"use strict";(self.webpackChunkdesktopDataExplore=self.webpackChunkdesktopDataExplore||[]).push([["conditional-formatting-dialog","field-list"],{84631:function(re,U,a){a.d(U,{CZ:function(){return A},IA:function(){return W},MM:function(){return w},QZ:function(){return O},XB:function(){return V},_1:function(){return p},vX:function(){return T},xK:function(){return M},yY:function(){return L},zB:function(){return D}});var C=a(52083),b=a(62458),y=a(94419),d=a(4829);function T(B){return{solid:{color:M(B,(0,C.d9)())}}}function M(B,h){b.fF.assertValue(h,"gradientSettings");var N,j,k,S={color:(0,y.$_)(h.minColor,"minColor")},H=h.minValue;if(null!=H&&(N=(0,y.tx)(H)),h.diverging){j={color:(0,y.$_)(h.midColor,"midColor")};var R=h.midValue;null!=R&&(k=(0,y.tx)(R))}var J,se={color:(0,y.$_)(h.maxColor,"maxColor")},ie=h.maxValue;null!=ie&&(J=(0,y.tx)(ie));var Z,Y=h.nullStrategy,Ce=h.nullColor,de={};return Z=h.diverging?de.linearGradient3={min:S,mid:j,max:se}:de.linearGradient2={min:S,max:se},N&&(Z.min.value=N),k&&(Z.mid.value=k),J&&(Z.max.value=J),Y&&(Z.nullColoringStrategy={strategy:(0,y.fL)(Y)},Y===d.Sx&&(Z.nullColoringStrategy.color=(0,y.$_)(Ce,"nullColor"))),(0,y.x5)(B,de)}function L(B,h,S){var N;switch(S){case"number":N={condition:(0,y.qu)(3,B,(0,y.tx)(0)),value:(0,y.fL)(h)};break;case"text":N={condition:(0,y.qu)(0,B,(0,y.fL)("")),value:(0,y.fL)(h)};break;default:b.fF.assertNever(S)}return{solid:{color:(0,y.u7)([N])}}}var D="CircleHigh",W="Before",O="Top";function V(B,h){switch(void 0===h&&(h="number"),h){case"number":return{kind:"Icon",value:(0,y.u7)([A(B,67,100,!0,(0,y.fL)("CircleHigh")),A(B,33,67,!1,(0,y.fL)("SignMedium")),A(B,0,33,!1,(0,y.fL)("SignLow"))]),layout:(0,y.fL)(W),verticalAlignment:(0,y.fL)(O)};case"text":return{kind:"Icon",value:(0,y.u7)([p(B,(0,y.fL)("CircleHigh")),p(B,(0,y.fL)("SignMedium")),p(B,(0,y.fL)("SignLow"))]),layout:(0,y.fL)(W),verticalAlignment:(0,y.fL)(O)};default:b.fF.assertNever(h)}}function A(B,h,S,N,H){var j,k;return h>0&&(j=(0,y.qu)(2,B,y.LE.overRangeOf(B,h/100))),S<100&&(k=(0,y.qu)(N?4:3,B,y.LE.overRangeOf(B,S/100))),{condition:j&&k?(0,y.xD)(j,k):j||k,value:H}}function p(B,h){return{condition:(0,y.qu)(0,B,(0,y.fL)("")),value:h}}function w(B,h,S,N,H){var j,k;return null!==h&&(j=(0,y.qu)(2,B,(0,y.tx)(h))),null!==S&&(k=(0,y.qu)(N?4:3,B,(0,y.tx)(S))),{condition:j&&k?(0,y.xD)(j,k):j||k,value:H}}},26902:function(re,U,a){a.d(U,{L6:function(){return W},aI:function(){return D},ac:function(){return A},dw:function(){return w},uz:function(){return V}});var C=a(40812),b=a(64067),y=a(62458),d=a(94419),T=a(59897),M=a(80777),L={totalMatchingOption:1,reverseDirection:!1,hideText:!1};function D(h,S){return y.fF.assertValue(h,"visual"),y.fF.assertValue(S,"repetition"),W(p(h.objects,S))}function W(h){if(!h)return L;var S,N=h.minValue;N&&(S=N.value);var H,j=h.maxValue;j&&(H=j.value);var k=1,R=h.totalMatchingOption;return R&&(k=R.value),{minValue:S,maxValue:H,positiveColor:O(h.positiveColor),negativeColor:O(h.negativeColor),axisColor:O(h.axisColor),reverseDirection:h.reverseDirection.value,hideText:h.hideText.value,totalMatchingOption:k}}function O(h){var S=h.solid.color;return(0,b.A7)(S.value)?{solid:{color:S.value}}:null}function V(){return A(L,M.Ge.fromPrimitiveTypeAndCategory(12))}function A(h,S){var N,H,j;return y.fF.assertValue(h,"dataBars"),y.fF.assertValue(S,"valueType"),void 0!==h.minValue&&(N=B(h.minValue,S)),void 0!==h.maxValue&&(H=B(h.maxValue,S)),void 0!==h.totalMatchingOption&&(j=(0,d.cA)(h.totalMatchingOption)),{minValue:N,maxValue:H,positiveColor:(0,T.EV)(h.positiveColor&&h.positiveColor.solid.color,"maxColor"),negativeColor:(0,T.EV)(h.negativeColor&&h.negativeColor.solid.color,"minColor"),axisColor:(0,T.EV)(h.axisColor&&h.axisColor.solid.color,"foreground"),reverseDirection:(0,d.O7)(h.reverseDirection),hideText:(0,d.O7)(h.hideText),totalMatchingOption:j}}function p(h,S){return y.fF.assertValue(S,"objectRepetition"),(0,C.OT)(h,S)}function w(h,S){return y.fF.assertValue(S,"objectRepetition"),void 0!==p(h,S)}function B(h,S){if(y.fF.assert(function(){return S.integer||S.numeric},"databars only supports numeric SQExprs"),S.integer){var N=Math.round(h);return(0,d.cA)(N)}return 2===S.primitiveType?(0,d.gH)(h):(y.fF.assert(function(){return 259===S.extendedType},"Unexpected data type."),(0,d.tx)(h))}},32441:function(re,U,a){a.d(U,{u:function(){return d}});var C=a(50423),b=a(18460),y=function(M,L,D,W,O){return{formattingSources:M,indicatorEnabled:L,mobileFormatting:D,disabledCards:W,disabledSlices:O}},d=function(){function T(){var M=this;this.mobileFormatting=!1,this.propertyChanged=new C.EventEmitter,this.outputArgs={propertyChanged:function(D){return M.propertyChanged.emit(D)}},this.modulePath="@powerbi/ExploreUIAuthoring/lazy-modules/pane-formatting/pane-formatting.module#PaneFormattingModule",this.componentId="FormattingPaneComponentId"}return T.\u0275fac=function(L){return new(L||T)},T.\u0275cmp=C.\u0275\u0275defineComponent({type:T,selectors:[["formatting-pane-lazy"]],inputs:{formattingSources:"formattingSources",indicatorEnabled:"indicatorEnabled",mobileFormatting:"mobileFormatting",disabledCards:"disabledCards",disabledSlices:"disabledSlices"},outputs:{propertyChanged:"propertyChanged"},decls:1,vars:10,consts:[[3,"inputArgs","modulePath","outputArgs","componentId"]],template:function(L,D){1&L&&C.\u0275\u0275element(0,"pbi-lazy-load",0),2&L&&C.\u0275\u0275property("inputArgs",C.\u0275\u0275pureFunction5(4,y,D.formattingSources,D.indicatorEnabled,D.mobileFormatting,D.disabledCards,D.disabledSlices))("modulePath",D.modulePath)("outputArgs",D.outputArgs)("componentId",D.componentId)},dependencies:[b.R],encapsulation:2,changeDetection:0}),T}()},78633:function(re,U,a){a.d(U,{a:function(){return d}});var C=a(50423),b=a(18460),y=function(M){return{colors:M}},d=function(){function T(){this.modulePath="@powerbi/ExploreUIAuthoring/lazy-modules/pane-formatting/pane-formatting.module#PaneFormattingModule",this.componentId="GradientBarComponentId"}return T.\u0275fac=function(L){return new(L||T)},T.\u0275cmp=C.\u0275\u0275defineComponent({type:T,selectors:[["gradient-bar-lazy"]],inputs:{colors:"colors"},decls:1,vars:5,consts:[[3,"inputArgs","modulePath","componentId"]],template:function(L,D){1&L&&C.\u0275\u0275element(0,"pbi-lazy-load",0),2&L&&C.\u0275\u0275property("inputArgs",C.\u0275\u0275pureFunction1(3,y,D.colors))("modulePath",D.modulePath)("componentId",D.componentId)},dependencies:[b.R],encapsulation:2,changeDetection:0}),T}()},92278:function(re,U,a){a.d(U,{I:function(){return d}});var C=a(50423),b=a(18460),y=function(M,L,D,W,O){return{toggle:M,ariaLabelledby:L,ariaDescribedby:D,toggleLabel:W,isDisabled:O}},d=function(){function T(){var M=this;this.onToggleChange=new C.EventEmitter,this.modulePath="@powerbi/ExploreUIAuthoring/lazy-modules/pane-formatting/pane-formatting.module#PaneFormattingModule",this.componentId="ToggleSwitchModernComponentId",this.outputArgs={onToggleChange:function(D){return M.onToggleChange.emit(D)}}}return T.\u0275fac=function(L){return new(L||T)},T.\u0275cmp=C.\u0275\u0275defineComponent({type:T,selectors:[["toggle-switch-modern-lazy"]],inputs:{toggle:"toggle",ariaLabelledby:"ariaLabelledby",ariaDescribedby:"ariaDescribedby",toggleLabel:"toggleLabel",isDisabled:"isDisabled"},outputs:{onToggleChange:"onToggleChange"},decls:1,vars:10,consts:[[3,"inputArgs","modulePath","outputArgs","componentId"]],template:function(L,D){1&L&&C.\u0275\u0275element(0,"pbi-lazy-load",0),2&L&&C.\u0275\u0275property("inputArgs",C.\u0275\u0275pureFunction5(4,y,D.toggle,D.ariaLabelledby,D.ariaDescribedby,D.toggleLabel,D.isDisabled))("modulePath",D.modulePath)("outputArgs",D.outputArgs)("componentId",D.componentId)},dependencies:[b.R],encapsulation:2,changeDetection:0}),T}()},90094:function(re,U,a){a.d(U,{l:function(){return d}});var C=a(50423),b=a(18460),y=function(M){return{warningMessage:M}},d=function(){function T(){this.modulePath="@powerbi/ExploreUIAuthoring/lazy-modules/pane-formatting/pane-formatting.module#PaneFormattingModule",this.componentId="WarningComponentId"}return T.\u0275fac=function(L){return new(L||T)},T.\u0275cmp=C.\u0275\u0275defineComponent({type:T,selectors:[["warning-eager"]],inputs:{warningMessage:"warningMessage"},decls:1,vars:5,consts:[[3,"inputArgs","modulePath","componentId"]],template:function(L,D){1&L&&C.\u0275\u0275element(0,"pbi-lazy-load",0),2&L&&C.\u0275\u0275property("inputArgs",C.\u0275\u0275pureFunction1(3,y,D.warningMessage))("modulePath",D.modulePath)("componentId",D.componentId)},dependencies:[b.R],encapsulation:2,changeDetection:0}),T}()},42101:function(re,U,a){a.d(U,{p:function(){return w}});var C=a(9844),M=(a(32441),a(78633),a(92278),a(90094),a(77476)),L=a(9398),D=a(76072),W=a(82156),O=a(50423),V={loadChildren:function(){return Promise.all([a.e(5),a.e("pane-formatting")]).then(a.bind(a,53150)).then(function(h){return h.PaneFormattingModule})}};D.E.addLazyLoadForLegacyMapping("@powerbi/ExploreUIAuthoring/lazy-modules/pane-formatting/pane-formatting.module#PaneFormattingModule",V.loadChildren);var A=[{path:"dummy-pane-formatting-lazy",loadChildren:V.loadChildren}],w=function(){function B(){}return B.\u0275fac=function(S){return new(S||B)},B.\u0275mod=O.\u0275\u0275defineNgModule({type:B}),B.\u0275inj=O.\u0275\u0275defineInjector({imports:[M.CommonModule,C.j,W.N,L.Bz.forChild(A)]}),B}()},48311:function(re,U,a){a.r(U),a.d(U,{ConditionalFormattingDialogModule:function(){return Vi}});var C=a(81337),b=a(42101),d=a(74082),T=function(){function o(n,t){this.options=n,this.featureSwitchService=t,this.ruleTemplateKind=n.ruleTemplateKind}return Object.defineProperty(o.prototype,"propertyType",{get:function(){return this.options.propertyType},enumerable:!1,configurable:!0}),o.prototype.isValid=function(){return this.lowerBound.isValid()},o.prototype.onColorChanged=function(n){n||(n={value:this.options.defaultYieldValue}),this.value=n.value},o.prototype.onIconChanged=function(n){this.value=n,this.options.onCaseIconChanged()},o}(),M=function(){function o(){}return o.Number={kind:"Number",displayNameKey:"ConditionalFormattingDialog_Number"},o.Text={kind:"Text",displayNameKey:"Text"},o.Percent={kind:"Percent",displayNameKey:"ConditionalFormattingDialog_Percent"},o}(),D=function(){function o(n){this.localizationService=n,this.equal=this._equal,this.isBlank=this._isBlank}return Object.defineProperty(o.prototype,"_equal",{get:function(){return{id:2,displayName:"=",disableOtherOperator:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"_isBlank",{get:function(){return{id:5,displayName:this.localizationService.get("FilterOperator_IsBlank"),disableOtherOperator:!0,disableInput:!0}},enumerable:!1,configurable:!0}),o}(),W=function(o){function n(t){var i=o.call(this,t)||this;return i.contains=i._contains,i.startsWith=i._startsWith,i.doesNotContain=i._doesNotContain,i.doesNotStartWith=i._doesNotStartWith,i.isNotBlank=i._isNotBlank,i.isEmpty=i._isEmpty,i.isNotEmpty=i._isNotEmpty,i.notEqual=i._notEqual,i.equal=i._textEqual,i.lowerBoundOptions=[i.contains,i.startsWith,i.doesNotContain,i.doesNotStartWith,i.equal,i.notEqual,i.isEmpty,i.isBlank,i.isNotEmpty,i.isNotBlank],i}return(0,C.__extends)(n,o),Object.defineProperty(n.prototype,"_textEqual",{get:function(){return{id:2,displayName:this.localizationService.get("FilterOperator_Is"),disableOtherOperator:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_doesNotStartWith",{get:function(){return{id:9,displayName:this.localizationService.get("FilterOperator_DoesNotStartWith"),disableOtherOperator:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_startsWith",{get:function(){return{id:8,displayName:this.localizationService.get("FilterOperator_StartsWith"),disableOtherOperator:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_doesNotContain",{get:function(){return{id:7,displayName:this.localizationService.get("FilterOperator_DoesNotContain"),disableOtherOperator:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_contains",{get:function(){return{id:6,displayName:this.localizationService.get("FilterOperator_Contains"),disableOtherOperator:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_notEqual",{get:function(){return{id:13,displayName:this.localizationService.get("FilterOperator_IsNot"),disableOtherOperator:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_isEmpty",{get:function(){return{id:11,displayName:this.localizationService.get("FilterOperator_IsEmptyString"),disableOtherOperator:!0,disableInput:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_isNotEmpty",{get:function(){return{id:12,displayName:this.localizationService.get("FilterOperator_IsNotEmptyString"),disableOtherOperator:!0,disableInput:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_isNotBlank",{get:function(){return{id:10,displayName:this.localizationService.get("FilterOperator_IsNotBlank"),disableOtherOperator:!0,disableInput:!0}},enumerable:!1,configurable:!0}),n}(D),O=function(o){function n(t){var i=o.call(this,t)||this;return i.greaterThan=i._greaterThan,i.greaterThanOrEqual=i._greaterThanOrEqual,i.lessThan=i._lessThan,i.lessThanOrEqual=i._lessThanOrEqual,i.lowerBoundOptions=[i.greaterThan,i.greaterThanOrEqual,i.equal,i.isBlank],i.upperBoundOptions=[i._lessThan,i._lessThanOrEqual],i}return(0,C.__extends)(n,o),Object.defineProperty(n.prototype,"_greaterThan",{get:function(){return{id:0,displayName:">"}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_greaterThanOrEqual",{get:function(){return{id:1,displayName:">="}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_lessThan",{get:function(){return{id:3,displayName:"<"}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_lessThanOrEqual",{get:function(){return{id:4,displayName:"<="}},enumerable:!1,configurable:!0}),n}(D),V=a(45413),A=function(){return function(){}}(),p=a(62458),w=a(94419),B=function(o){function n(t,i,r,l){var s=o.call(this)||this;return s.part=t,s.isPercentEnabled=i,s.operatorOptions=r,s.featureSwitchService=l,s.onIsPercentEnabledChanged(i),s}return(0,C.__extends)(n,o),n.prototype.reset=function(){switch(this.part){case"LowerBound":this.operator=this.operatorOptions.greaterThanOrEqual;break;case"UpperBound":this.operator=this.operatorOptions.lessThan;break;default:p.fF.assertNever(this.part)}this.resetValue()},n.prototype.update=function(t){var r=t.right;this.operator=this.getOperatorOption(t.comparison,r),this.updateArgument(r)},n.prototype.onIsPercentEnabledChanged=function(t){this.isPercentEnabled=t,this.isPercentEnabled||(this.valueKind=M.Number)},n.prototype.updateToOpenEnded=function(){switch(this.part){case"LowerBound":return void this.reset();case"UpperBound":return this.operator=this.operatorOptions.lessThanOrEqual,void(this.isPercentEnabled?(this.value=100,this.valueKind=M.Percent):(this.value=null,this.valueKind=M.Number));default:p.fF.assertNever(this.part)}},n.prototype.isOpenEnded=function(){switch(this.part){case"LowerBound":return null===this.value&&this.valueKind===M.Number||0===this.value&&this.valueKind===M.Percent;case"UpperBound":return null===this.value&&this.valueKind===M.Number||100===this.value&&this.valueKind===M.Percent;default:p.fF.assertNever(this.part)}},n.prototype.isValid=function(){if(_.isEqual(this.operator,this.operatorOptions.isBlank))return!0;if(void 0===this.value)return!1;if(_.isEqual(this.operator,this.operatorOptions.equal)){if(null===this.value)return!1;switch(this.valueKind.kind){case"Percent":return this.value>=0&&this.value<=100;case"Number":return!0;case"Text":return!!this.featureSwitchService.featureSwitches.cfStrings;default:p.fF.assertNever(this.valueKind.kind)}}switch(this.valueKind.kind){case"Percent":if(null===this.value)return!1;switch(this.part){case"LowerBound":return this.value>=0&&this.value<100;case"UpperBound":return this.value>0&&this.value<=100;default:p.fF.assertNever(this.part)}case"Number":return!0;case"Text":return p.fF.assertFail("Text is not a valid value kind for numeric condition"),!1;default:p.fF.assertNever(this.valueKind.kind)}},n.prototype.getDefinition=function(t){var i=this;return p.fF.assert(function(){return i.isValid()},"getDefinition called for an invalid Condition"),_.isEqual(this.operator,this.operatorOptions.isBlank)?(0,w.qu)(0,t,(0,w.IF)()):!this.isOpenEnded()||this.operator.disableOtherOperator?(0,w.qu)(this.getComparisonKind(),t,this.getArgumentExpr(t)):void 0},n.prototype.resetValue=function(){switch(this.part){case"LowerBound":return void(this.isPercentEnabled?(this.value=0,this.valueKind=M.Percent):(this.value=null,this.valueKind=M.Number));case"UpperBound":return this.value=0,void(this.valueKind=M.Number);default:p.fF.assertNever(this.part)}},n.prototype.getOperatorOption=function(t,i){var r=this;switch(t){case 1:return p.fF.assert(function(){return"LowerBound"===r.part},"Unexpected condition"),this.operatorOptions.greaterThan;case 2:return p.fF.assert(function(){return"LowerBound"===r.part},"Unexpected condition"),this.operatorOptions.greaterThanOrEqual;case 0:return p.fF.assert(function(){return"LowerBound"===r.part},"Unexpected condition"),(0,V.fS)(i,(0,w.IF)())?this.operatorOptions.isBlank:this.operatorOptions.equal;case 3:return p.fF.assert(function(){return"UpperBound"===r.part},"Unexpected condition"),this.operatorOptions.lessThan;case 4:return p.fF.assert(function(){return"UpperBound"===r.part},"Unexpected condition"),this.operatorOptions.lessThanOrEqual;default:p.fF.assertNever(t)}},n.prototype.getComparisonKind=function(){switch(this.operator.id){case 5:case 2:return 0;case 0:return 1;case 1:return 2;case 3:return 3;case 4:return 4;case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:p.fF.assertFail("Unexpected operator");break;default:p.fF.assertNever(this.operator.id)}},n.prototype.updateArgument=function(t){if(_.isEqual(this.operator,this.operatorOptions.isBlank))this.resetValue();else{if((0,d.S9)(t))return this.value=w.jz.getNumericValue(t),void(this.valueKind=M.Number);if((0,d.YF)(t)){var i=t.decomposeOverRangePattern();if(i)return this.value=100*i.percent,this.value=parseFloat(this.value.toFixed(4)),void(this.valueKind=M.Percent)}p.fF.assertFail("numericConditionviewmode - updateArgument - Unrecognized comparison argument pattern")}},n.prototype.getArgumentExpr=function(t){switch(this.valueKind.kind){case"Number":return(0,w.tx)(this.value);case"Percent":return w.LE.overRangeOf(t,this.value/100);case"Text":p.fF.assertFail("Text argument is not supported");break;default:p.fF.assertNever(this.valueKind.kind)}},n}(A),h=function(o){function n(t,i,r){var l=o.call(this,t,i)||this;l.argumentKindOptions=[M.Number,M.Percent];var s=l.options,g=s.sqCase,v=s.disableAutoRange;return l.operatorOptions=new O(r),p.fF.assertAnyValue(g,"if sqCase is undefined, create a default Case (If value >= 0% AND < 0 THEN <Yield>)"),p.fF.assert(function(){return l.operatorOptions instanceof O},"operatorOptions should be NumericConditionalOperatorOptions"),l.isPercentEnabled=!v,l.lowerBound=new B("LowerBound",l.isPercentEnabled,l.operatorOptions,i),l.upperBound=new B("UpperBound",l.isPercentEnabled,l.operatorOptions,i),l.onIsPercentEnabledChanged(l.isPercentEnabled),l.initCase(g),l}return(0,C.__extends)(n,o),n.prototype.isValid=function(){if(!o.prototype.isValid.call(this))return!1;if(this.lowerBound.operator.disableOtherOperator)return!0;if(!this.upperBound.isValid())return!1;var t=!this.lowerBound.isOpenEnded(),i=!this.upperBound.isOpenEnded();return!t&&!i||!t||!i||this.lowerBound.valueKind!==this.upperBound.valueKind||this.upperBound.value>this.lowerBound.value},n.prototype.getDefinition=function(t){var i=this;p.fF.assert(function(){return i.isValid()},"Invalid case settings");var l=this.lowerBound.getDefinition(t),s=this.lowerBound.operator.disableOtherOperator?null:this.upperBound.getDefinition(t);return{condition:l||s?l&&s?(0,w.xD)(l,s):l||s:(0,w.O7)(!0),value:null==this.value?(0,w.IF)():(0,w.fL)(this.value)}},n.prototype.onIsPercentEnabledChanged=function(t){p.fF.assertValue(this.lowerBound,"lowerBound must be defined"),p.fF.assertValue(this.upperBound,"upperBound must be defined"),this.isPercentEnabled=t,this.lowerBound.onIsPercentEnabledChanged(this.isPercentEnabled),this.upperBound.onIsPercentEnabledChanged(this.isPercentEnabled)},n.prototype.initCase=function(t){if(!t)return this.lowerBound.reset(),this.upperBound.reset(),void(this.value=this.options.defaultYieldValue);(0,d.AW)(t.value)?this.value=w.jz.getTextValue(t.value):(0,d.uR)(t.value)?this.value=null:p.fF.assertFail("Unexpected Case yield value type");var i=t.condition;if((0,d.un)(i)){var r=i.left,l=i.right;(0,d.$Q)(r)&&(0,d.$Q)(l)?(this.lowerBound.update(r),this.upperBound.update(l)):p.fF.assertFail("Unexpected AND expr")}else if((0,d.IS)(i))this.lowerBound.reset(),this.upperBound.reset();else if((0,d.VC)(i)&&!0===i.value)this.lowerBound.updateToOpenEnded(),this.upperBound.updateToOpenEnded();else if((0,d.$Q)(i)){var s=i.comparison;switch(s){case 0:return this.lowerBound.update(i),void this.upperBound.reset();case 1:case 2:return this.lowerBound.update(i),void this.upperBound.updateToOpenEnded();case 3:case 4:return this.lowerBound.updateToOpenEnded(),void this.upperBound.update(i);default:p.fF.assertFail("Unexpected QueryComparisonKind: "+s)}}else p.fF.assertFail("Unexpected Case")},n}(T),S=a(48676),N=function(o){function n(t,i){var r=o.call(this)||this;return r.part=t,r.operatorOptions=i,r}return(0,C.__extends)(n,o),n.prototype.reset=function(){this.operator=this.operatorOptions.equal,this.resetValue()},n.prototype.update=function(t){var i=(0,d.Ym)(t)?t.arg:t;if((0,d.IS)(i)||(0,d.f8)(i)||(0,d.$Q)(i)){var r=i.right;return this.operator=this.getOperatorOption(t),void this.updateArgument(r)}p.fF.assertFail("TextConditionViewMode - update - Unexpected condition expression")},n.prototype.isValid=function(){return this.valueKind!==M.Text?(p.fF.assertFail("TextConditionViewMode - isValid - Unexpected valueKind"),!1):!!(_.isEqual(this.operator,this.operatorOptions.isBlank)||_.isEqual(this.operator,this.operatorOptions.isNotBlank)||_.isEqual(this.operator,this.operatorOptions.isEmpty)||_.isEqual(this.operator,this.operatorOptions.isNotEmpty))||void 0!==this.value&&(_.isEqual(this.operator,this.operatorOptions.equal)||_.isEqual(this.operator,this.operatorOptions.notEqual)?null!==this.value:!_.isEmpty(this.value))},n.prototype.getDefinition=function(t){var r,i=this;p.fF.assert(function(){return i.isValid()},"TextConditionViewMode - getDefinition called for an invalid Condition");var l=null!==(r=t.getAnnotations())&&void 0!==r?r:{},s=this.operator;l[S.L]=1,l[S.Q]=s.id;var g=function(){return(0,w.qu)(0,t,(0,w.fL)(i.value),l)},v=function(){return(0,w.qu)(0,t,(0,w.IF)(),l)},x=function(){return(0,w.qu)(0,t,(0,w.$t)(),l)},f=function(){return(0,w.Ny)(t,(0,w.fL)(i.value),l)},z=function(){return(0,w.r3)(t,(0,w.fL)(i.value),l)};switch(s.id){case this.operatorOptions.isBlank.id:return v();case this.operatorOptions.isNotBlank.id:return(0,w.ff)(v());case this.operatorOptions.isEmpty.id:return x();case this.operatorOptions.isNotEmpty.id:return(0,w.ff)(x());case this.operatorOptions.contains.id:return z();case this.operatorOptions.doesNotContain.id:return(0,w.ff)(z());case this.operatorOptions.startsWith.id:return f();case this.operatorOptions.doesNotStartWith.id:return(0,w.ff)(f());case this.operatorOptions.equal.id:return g();case this.operatorOptions.notEqual.id:return(0,w.ff)(g());default:p.fF.assertFail("TextConditionViewMode - getDefinition - Unexpected operator: ConditionalOperatorOptionId ".concat(this.operator.id))}},n.prototype.getOperatorOption=function(t){var i=this;p.fF.assert(function(){return"LowerBound"===i.part},"TextConditionViewMode - getOperatorOption - Unexpected condition");var r=(0,d.Ym)(t),l=r?t.arg:t;if((0,d.$Q)(l)){if(0===l.comparison){var g=l.getAnnotations();if(null!=g)switch(g[S.Q]){case this.operatorOptions.isNotBlank.id:return this.operatorOptions.isNotBlank;case this.operatorOptions.isBlank.id:return this.operatorOptions.isBlank;case this.operatorOptions.isEmpty.id:return this.operatorOptions.isEmpty;case this.operatorOptions.isNotEmpty.id:return this.operatorOptions.isNotEmpty}return r?this.operatorOptions.notEqual:this.operatorOptions.equal}}else{if((0,d.IS)(l))return r?this.operatorOptions.doesNotContain:this.operatorOptions.contains;if((0,d.f8)(l))return r?this.operatorOptions.doesNotStartWith:this.operatorOptions.startsWith}p.fF.assertFail("TextConditionViewMode - getOperatorOption - Unexpected argument expression")},n.prototype.updateArgument=function(t){if(!_.isEqual(this.operator,this.operatorOptions.isEmpty)&&!_.isEqual(this.operator,this.operatorOptions.isNotEmpty))return _.isEqual(this.operator,this.operatorOptions.isBlank)||_.isEqual(this.operator,this.operatorOptions.isNotBlank)?(this.value=null,void(this.valueKind=M.Text)):(0,d.AW)(t)?(this.value=w.jz.getTextValue(t),void(this.valueKind=M.Text)):void p.fF.assertFail("TextConditionViewMode - updateArgument - Unexpected argument expression");this.resetValue()},n.prototype.resetValue=function(){this.value="",this.valueKind=M.Text},n}(A),H=function(o){function n(t,i,r){var l=o.call(this,t,i)||this,s=l.options.sqCase;return l.operatorOptions=new W(r),l.lowerBound=new N("LowerBound",l.operatorOptions),l.initCase(s),l}return(0,C.__extends)(n,o),n.prototype.getDefinition=function(t){var i=this;return p.fF.assert(function(){return i.isValid()},"TextCaseViewModel - getDefinition - Invalid case settings"),{condition:this.lowerBound.getDefinition(t)||(0,w.O7)(!0),value:null==this.value?(0,w.IF)():(0,w.fL)(this.value)}},n.prototype.initCase=function(t){if(!t)return this.lowerBound.reset(),void(this.value=this.options.defaultYieldValue);(0,d.AW)(t.value)?this.value=w.jz.getTextValue(t.value):(0,d.uR)(t.value)?this.value=null:p.fF.assertFail("Unexpected Case yield value type");var s,i=t.condition;(0,d.IS)(s=i)||(0,d.f8)(s)||(0,d.$Q)(s)||(0,d.Ym)(s)?this.lowerBound.update(i):(0,d.VC)(i)&&!0===i.value?this.lowerBound.reset():p.fF.assertFail("TextCaseViewModel - initCase - Unexpected Case condition type")},n}(T),j=function(){function o(n,t){this.featureSwitchService=n,this.localizationService=t}return o.prototype.create=function(n){switch(n.ruleTemplateKind){case"number":return new h(n,this.featureSwitchService,this.localizationService);case"text":return new H(n,this.featureSwitchService,this.localizationService);default:p.fF.assertNever(n.ruleTemplateKind)}},o}(),k=a(84631),R=a(50550),se=function(){function o(n,t,i,r,l,s,g,v){var x=this;switch(this.disableAutoRange=n,this.propertyType=t,this.defaultYieldValue=i,this.iconSets=l,this.caseTypeStore=new Map,p.fF.assertValue(r,"ConditionalViewModel - expr"),p.fF.assertValue(g,"ConditionalViewModel - ruleTemplateKind"),p.fF.assertNonEmpty(r.cases,"ConditionalViewModel - expr"),this.caseViewModelBuilder=new j(v,s),this.ruleTemplateKind=g,t){case"Color":this.reverseButtonLabelKey="ConditionalFormattingDialog_RuleBased_RulesReverseValues_Color";break;case"Icon":this.reverseButtonLabelKey="ConditionalFormattingDialog_RuleBased_RulesReverseValues_Icon";break;case"Text":case"WebUrl":case"DataBars":p.fF.assertFail("Rules support only Icons and Colors");break;case"Numeric":case"DateTime":break;default:p.fF.assertNever(t)}this.cases=_.chain(r.cases).reverse().map(function(f){return x.caseViewModelBuilder.create(x.getCurrentCaseViewModelOptions(f))}).value(),this.updateSelectedIconSet()}return o.prototype.onDisableAutoRangeChanged=function(n){if(this.disableAutoRange=n,!_.isEmpty(this.cases))for(var t=0,i=this.cases;t<i.length;t++){var r=i[t];r instanceof h?r.onIsPercentEnabledChanged(!n):p.fF.assertFail("ConditionalViewModel - onDisableAutoRangeChanged - caseViewModel is not NumericCaseViewModel")}},o.prototype.reinitializeSQConditionalExpr=function(n){p.fF.assertValue(n,"ConditionalViewModel - reinitializeSQConditionalExpr - newRuleTemplateKind");var t=this.cases;this.cases=[],this.caseTypeStore.set(this.ruleTemplateKind,t),this.ruleTemplateKind=n,this.cases=this.caseTypeStore.get(this.ruleTemplateKind)||[],0===this.cases.length&&this.addCase(),this.updateSelectedIconSet()},o.prototype.getCurrentCaseViewModelOptions=function(n){var t=this;return void 0===n&&(n=void 0),{disableAutoRange:this.disableAutoRange,propertyType:this.propertyType,defaultYieldValue:this.defaultYieldValue,onCaseIconChanged:function(){return t.updateSelectedIconSet()},sqCase:n,ruleTemplateKind:this.ruleTemplateKind}},o.prototype.addCase=function(){this.cases.push(this.caseViewModelBuilder.create(this.getCurrentCaseViewModelOptions()))},o.prototype.reverseCasesValue=function(){for(var n=this.cases.length,t=0;t<n/2;t++){var i=this.cases[t].value;this.cases[t].value=this.cases[n-t-1].value,this.cases[n-t-1].value=i}this.updateSelectedIconSet()},o.prototype.moveCaseUp=function(n){_.size(this.cases)>1&&n>0&&n<this.cases.length&&((0,R.LF)(this.cases,n,n-1),this.updateSelectedIconSet())},o.prototype.moveCaseDown=function(n){_.size(this.cases)>1&&n>=0&&n<this.cases.length-1&&((0,R.LF)(this.cases,n,n+1),this.updateSelectedIconSet())},o.prototype.deleteCase=function(n){_.size(this.cases)>1&&n>=0&&n<this.cases.length&&(this.cases.splice(n,1),this.updateSelectedIconSet())},o.prototype.onIconSetSelected=function(n,t){var i=this;(0,R.ZH)(this.cases);var r=this.createIconCases(n,this.iconSets[t]);this.cases=r.map(function(l){return i.caseViewModelBuilder.create(i.getCurrentCaseViewModelOptions(l))}),this.iconSetId=t},o.prototype.isValid=function(){return!_.isEmpty(this.cases)&&_.every(this.cases,function(n){return n.isValid()})},o.prototype.getDefinition=function(n){var t=this;return p.fF.assert(function(){return t.isValid()},"Invalid conditional settings"),(0,w.u7)(_.chain(this.cases).clone().reverse().map(function(i){return i.getDefinition(n)}).value())},o.prototype.createIconCases=function(n,t){var i=this,r=t.iconIds.length,l=[];switch(this.ruleTemplateKind){case"number":!function(){for(var x=i.disableAutoRange?k.MM:k.CZ,f=0;f<r;f++)l.push(x(n,Math.round(f/r*100),Math.round((f+1)/r*100),f+1===r,(0,w.fL)(t.iconIds[f])))}();break;case"text":!function(){for(var x=k._1,f=0;f<r;f++)l.push(x(n,(0,w.fL)(t.iconIds[f])))}();break;default:p.fF.assertNever(this.ruleTemplateKind)}return l},o.prototype.updateSelectedIconSet=function(){if("Icon"===this.propertyType&&(this.iconSetId&&(this.iconSetMatching(this.iconSets[this.iconSetId])||(this.iconSetId=void 0)),!this.iconSetId))for(var n in this.iconSets)if(this.iconSetMatching(this.iconSets[n]))return void(this.iconSetId=n)},o.prototype.iconSetMatching=function(n){if(n.iconIds.length!==this.cases.length)return!1;for(var t=0;t<this.cases.length;t++)if(this.cases[t].value!==n.iconIds[t])return!1;return!0},o}(),J=a(26902),ie=a(87632),Y=function(){function o(n,t,i,r){var l=this;this.localizationService=n,this.disableAutoRange=t,this.valueType=i,this.onOptionChanged=function(g){var v=g.id;switch(v){case 0:case 3:break;case 1:l.settings.minValue=void 0;break;case 2:l.settings.maxValue=void 0;break;default:p.fF.assertNever(v)}},this.tooltipConfig={tooltipDelay:100,tooltipLocalizeTitle:"Enter_A_Value",isTooltipForModalDialog:!0,tooltipArrowPosition:ie.xI.arrowTopLeft,tooltipShowOnFocus:!0},this.tooltipConfigDisabled={tooltipDisable:!0};var s={id:0,value:this.localizationService.get("Custom"),disableInput:!1};this.minimumSelectOptions=[{id:1,value:this.localizationService.get("ConditionalFormattingDialog_LowestValue"),disableInput:!0},s],this.maximumSelectOptions=[{id:2,value:this.localizationService.get("ConditionalFormattingDialog_HighestValue"),disableInput:!0},s],this.barDirectionSelectOptions=[{reverseDirection:!1,displayName:this.localizationService.get("LeftToRight")},{reverseDirection:!0,displayName:this.localizationService.get("RightToLeft")}],this.updateDataBarsPositiveColor=function(g){l.settings.positiveColor=l.getFillFromColor(g)},this.updateDataBarsNegativeColor=function(g){l.settings.negativeColor=l.getFillFromColor(g)},this.updateDataBarsAxisColor=function(g){l.settings.axisColor=l.getFillFromColor(g)},this.settings=r?(0,J.L6)(r):this.getDefaultDataBarsSettings(),this.minimumSelectedOption=this.minimumSelectOptions[void 0!==this.settings.minValue||this.disableAutoRange?1:0],this.maximumSelectedOption=this.maximumSelectOptions[void 0!==this.settings.maxValue||this.disableAutoRange?1:0],this.barDirectionSelectedOption=this.barDirectionSelectOptions[this.settings.reverseDirection?1:0]}return o.prototype.getDefaultDataBarsSettings=function(){return{reverseDirection:!1,hideText:!1}},o.prototype.getFillFromColor=function(n){return{solid:{color:null==n?null:n.value}}},o.prototype.onDisableAutoRangeChanged=function(n){this.disableAutoRange=n,this.disableAutoRange?(this.minimumSelectedOption=this.minimumSelectOptions[1],this.maximumSelectedOption=this.maximumSelectOptions[1]):(this.minimumSelectedOption=this.minimumSelectOptions[0],this.maximumSelectedOption=this.maximumSelectOptions[0])},o.prototype.getDefinition=function(n,t,i){if(t.type.dataBars)return(0,J.ac)((0,C.__assign)((0,C.__assign)({},this.settings),{totalMatchingOption:i}),this.valueType);p.fF.assertFail("Unsupported property type, expected dataBars, received ".concat(JSON.stringify(t.type)))},o}(),Ce=function(){function o(){}return o.prototype.getDefinition=function(n,t){switch(t){case"Color":return{solid:{color:n}};case"Icon":return{kind:"Icon",value:n};case"Text":case"WebUrl":case"Numeric":case"DateTime":return n;case"DataBars":return p.fF.assertFail("Data bars not supported for field value"),null;default:p.fF.assertNever(t)}p.fF.assertFail("Unsupported property type - expected color, icon, text, url, numeric, dateTime; received ".concat(t))},o}(),de=a(52083),Z=a(4829),Pe=function(){function o(n,t,i,r){var l=this;this.localizationService=n,this.disableAutoRange=t,this.defaultGradientColors=i,this.onOptionChanged=function(g){var v=g.id;switch(v){case 0:break;case 1:l.settings.minValue=void 0;break;case 3:l.settings.midValue=void 0;break;case 2:l.settings.maxValue=void 0;break;default:p.fF.assertNever(v)}},this.onDivergingChanged=function(){l.updateGradientBar()},this.tooltipConfig={tooltipDelay:100,tooltipLocalizeTitle:"Enter_A_Value",isTooltipForModalDialog:!0,tooltipArrowPosition:ie.xI.arrowTopLeft,tooltipShowOnFocus:!0},this.tooltipConfigDisabled={tooltipDisable:!0};var s={id:0,value:this.localizationService.get("Custom"),disableInput:!1};switch(this.nullStrategyOptions=[{id:0,value:this.localizationService.get("ConditionalFormattingDialog_FormatNull_NoFormat"),disableInput:!0,stringValue:Z.TJ},{id:1,value:this.localizationService.get("ConditionalFormattingDialog_FormatNull_AsZero"),disableInput:!0,stringValue:Z.LX},{id:2,value:this.localizationService.get("ConditionalFormattingDialog_FormatNull_SpecificColor"),disableInput:!1,stringValue:Z.Sx}],this.updateNullStrategy=function(){l.settings.nullStrategy=l.nullStrategyOption.stringValue},this.updateGradientNullColor=function(g){l.settings.nullColor=g&&g.value},this.minimumSelectOptions=[{id:1,value:this.localizationService.get("ConditionalFormattingDialog_LowestValue"),disableInput:!0},s],this.updateGradientMinColor=function(g){l.settings.minColor=g&&g.value,l.updateGradientBar()},this.centerSelectOptions=[{id:3,value:this.localizationService.get("ConditionalFormattingDialog_MiddleValue"),disableInput:!0},s],this.updateGradientMidColor=function(g){l.settings.midColor=g&&g.value,l.updateGradientBar()},this.maximumSelectOptions=[{id:2,value:this.localizationService.get("ConditionalFormattingDialog_HighestValue"),disableInput:!0},s],this.updateGradientMaxColor=function(g){l.settings.maxColor=g&&g.value,l.updateGradientBar()},this.settings=r?(0,de.qG)(r.rule):(0,de.d9)(),this.minimumSelectedOption=this.minimumSelectOptions[void 0!==this.settings.minValue||this.disableAutoRange?1:0],this.centerSelectedOption=this.centerSelectOptions[void 0!==this.settings.midValue||this.disableAutoRange?1:0],this.maximumSelectedOption=this.maximumSelectOptions[void 0!==this.settings.maxValue||this.disableAutoRange?1:0],this.settings.nullStrategy){case Z.TJ:this.nullStrategyOption=this.nullStrategyOptions[0];break;case Z.Sx:this.nullStrategyOption=this.nullStrategyOptions[2];break;default:this.nullStrategyOption=this.nullStrategyOptions[1]}this.updateGradientBar()}return o.prototype.onDisableAutoRangeChanged=function(n){this.disableAutoRange=n,this.disableAutoRange?(this.minimumSelectedOption=this.minimumSelectOptions[1],this.centerSelectedOption=this.centerSelectOptions[1],this.maximumSelectedOption=this.maximumSelectOptions[1]):(this.minimumSelectedOption=this.minimumSelectOptions[0],this.centerSelectedOption=this.centerSelectOptions[0],this.maximumSelectedOption=this.maximumSelectOptions[0])},o.prototype.toggleDiverging=function(){this.settings.diverging=!this.settings.diverging,this.onDivergingChanged()},o.prototype.updateGradientBar=function(){this.gradientBarValue=(0,de.Kj)(this.settings,this.defaultGradientColors)},o.prototype.getDefinition=function(n,t){var i=t.type;if(i.fill&&i.fill.solid&&i.fill.solid.color)return{solid:{color:(0,k.xK)(n,this.settings)}};p.fF.assertFail("Unsupported property type, expected color, received ".concat(JSON.stringify(t.type)))},o}(),ae=a(7956),Xe=a(95862),Ze=a(88268),qe=a(9754),De=a(68509),et=a(45334),ge=a(80777),tt=function(){function o(n,t,i,r,l){var s=this;this.services=n,this.dataSources=t,this.sourceField=i,this.visualCapabilities=r,this.expectedTypes=l,this.isSourceDisabled=function(g){if(!g)return!1;var v=g.getMetadata(s.schema);if(!v)return!1;switch(v.kind){case 1:return!ge.Ge.isCompatibleTo(v.type,s.expectedTypes);case 0:return _.isEmpty(s.getSupportedAggregates(g));default:p.fF.assertFail("Unexpected FieldKind value "+v.kind)}},this.onSourceSelected=function(g,v){s.setSourceField(v)}}return o.prototype.init=function(){return(0,C.__awaiter)(this,void 0,void 0,function(){var n,t,i,r;return(0,C.__generator)(this,function(l){switch(l.label){case 0:return n=this.services.dataSourceSerializer.deserializeDataSources(this.dataSources),this.services.dataSourcesService.set(n),t=this,[4,this.services.conceptualSchemaProxy.get(n)];case 1:return t.schema=l.sent(),(i=this.sourceField)&&(i=(0,qe.H)(i),i=(0,Ze.E)(i),(0,d.iV)(i)&&(r=i.func,i=this.sourceField=(0,De.n)(i,this.schema))),this.setSourceField(i,r),[2]}})})},o.prototype.onSourceExpectedTypeChange=function(n){this.expectedTypes=n,this.setSourceField(this.sourceField)},o.prototype.setSourceField=function(n,t){if(this.sourceField=n,this.updateSourceAggregateOptions(),_.isEmpty(this.aggregationOptions)){if(this.sourceField){var r=this.sourceField.getMetadata(this.schema);r&&1===r.kind&&!(0,d.jX)(this.sourceField)&&ge.Ge.isCompatibleTo(r.type,this.expectedTypes)?(this.aggregationOption=null,this.setSourceAggregate()):(this.sourceField=void 0,this.fieldDisplayName=void 0)}}else{if(this.aggregationOption=_.find(this.aggregationOptions,function(l){return l.aggregate===t}),!this.aggregationOption){var i=this.services.aggrOps.defaultAggregate(n,this.schema,!0,this.expectedTypes);this.aggregationOption=_.find(this.aggregationOptions,function(l){return l.aggregate===i}),this.aggregationOption||(this.aggregationOption=_.head(this.aggregationOptions))}this.setSourceAggregate()}},o.prototype.updateSourceAggregateOptions=function(){for(var n=this.getSupportedAggregates(this.sourceField),t=this.aggregationOptions=[],i=0,r=n;i<r.length;i++){var l=r[i],s=(0,De.n)(this.sourceField,this.schema).getMetadata(this.schema),g=(0,ae.z)(l,s);t.push({aggregate:l,displayName:this.services.localizationService.get("Aggregate_"+g)})}},o.prototype.getSupportedAggregates=function(n){return!n||et.m.discourageAggregation(n,this.schema)?[]:this.services.aggrOps.getSupportedAggregates(n,this.schema,this.expectedTypes)},o.prototype.setSourceAggregate=function(){this.sourceField&&(this.aggregationOption&&(this.sourceField=(0,Xe.k)(this.sourceField,this.aggregationOption.aggregate)),this.fieldDisplayName=this.services.displayNameService.getDisplayName(this.sourceField,this.schema,this.visualCapabilities,null,null,{includeDefaultAggregate:!0,includeHierarchyName:!0,includeVariationSource:!0}))},o}(),Se=function(){function o(n){switch(this.id=n,this.id){case 1:this.displayNameKey="ConditionalFormattingDialog_TotalMatching_ValuesOnly",this.disableAutoRange=!1;break;case 0:this.displayNameKey="ConditionalFormattingDialog_TotalMatching_ValuesAndTotals",this.disableAutoRange=!0;break;case 2:this.displayNameKey="ConditionalFormattingDialog_TotalMatching_TotalsOnly",this.disableAutoRange=!0}}return o.prototype.changeSelector=function(n){var t={data:[{dataViewWildcard:{matchingOption:this.id}}]};return n.id&&(t.id=n.id),n.metadata&&(t.metadata=n.metadata),t},o}(),Te=a(77616),Oe=a(54766),it=a(54834),Me=a(58702),e=a(50423),nt=a(28199),Be=a(26898),_e=a(83008),ot=a(13702),rt=a(40823),Ee=a(9380),Fe=a(65181),Ve=a(29866),Ae=function(){function o(n,t,i,r,l,s,g,v){this.aggrOps=n,this.conceptualSchemaProxy=t,this.dataSourcesService=i,this.displayNameService=r,this.featureSwitchService=l,this.localizationService=s,this.visualPlugin=g,this.dataSourceSerializer=v,this.modeInitialized=!1}return o.prototype.create=function(n,t,i,r,l,s,g,v,x,f,z){return(0,C.__awaiter)(this,void 0,void 0,function(){var I,$,pe,he,be,fe,F,oe,ve;return(0,C.__generator)(this,function(ee){switch(ee.label){case 0:return I=(0,Te.mc)(v),$=s?it.ib.deserializeExpr(s):null,[4,this.visualPlugin.ensureBuiltInPlugins()];case 1:return ee.sent(),pe=this.visualPlugin.capabilities(r),he=this.dataSourceSerializer.deserializeDataSources(t),[4,this.conceptualSchemaProxy.get(he)];case 2:return be=ee.sent(),fe=this.getPropertyType(I.type),F={visualCapabilities:pe,propertyDescriptor:I,propertyType:fe,dialogTitle:v.displayName,subtitle:i,targetFieldExpr:$,disableAutoRange:!g,colorPickerType:{fill:{solid:{color:!0}}},modeSelectOptions:this.createModeSelectOptions(fe,this.localizationService,this.featureSwitchService),schema:be},this.initializePropertyDefinition(F,x),z&&(oe="DataBars"===fe,p.fF.assert(function(){return oe||!_.isEmpty(f.data)&&1===f.data.length&&null!=f.data[0].dataViewWildcard},"allowOverrideTotalMatching is only supported for DataViewWildcard Selectors or static-bound dataBars"),F.totalMatchingOptions=[new Se(1),new Se(0),new Se(2)],ve=oe?(0,J.L6)(F.originalPropertyDefinition).totalMatchingOption:f.data[0].dataViewWildcard.matchingOption,F.totalMatchingOption=_.find(F.totalMatchingOptions,function(wt){return wt.id===ve}),this.updateDisableAutoRange(F,g)),this.initializeExpectedSourceType(F),this.initializeSourceFieldSelector(F,t),[4,F.sourceSelector.init()];case 3:return ee.sent(),this.initializeMode(F,F.originalPropertyDefinition,n,l,this.localizationService,this.featureSwitchService),[2,F]}})})},o.prototype.updateDisableAutoRange=function(n,t){n.disableAutoRange=!t||n.totalMatchingOption.disableAutoRange},o.prototype.initializeExpectedSourceType=function(n){switch(p.fF.assertValue(n.mode,"mode required to be assigned to the view model before source type(s) can be initialized"),n.mode){case"gradient":case"dataBars":n.expectedSourceTypes=[{numeric:!0}];break;case"conditional":n.expectedSourceTypes=this.featureSwitchService.featureSwitches.cfStrings?[{numeric:!0},{text:!0}]:[{numeric:!0}];break;case"fieldValue":switch(n.propertyType){case"Numeric":n.expectedSourceTypes=[{numeric:!0}];break;case"DateTime":n.expectedSourceTypes=[{dateTime:!0}];break;default:n.expectedSourceTypes=[{text:!0}]}break;default:p.fF.assertNever(n.mode)}},o.prototype.initializeSourceFieldSelector=function(n,t){p.fF.assertValue(n.expectedSourceTypes,"expectedSourceTypes required to initialize source field selector"),n.sourceSelector=new tt({aggrOps:this.aggrOps,conceptualSchemaProxy:this.conceptualSchemaProxy,dataSourcesService:this.dataSourcesService,displayNameService:this.displayNameService,featureSwitchService:this.featureSwitchService,localizationService:this.localizationService,dataSourceSerializer:this.dataSourceSerializer},t,n.originalSourceField,n.visualCapabilities,n.expectedSourceTypes)},o.prototype.getPropertyType=function(n){if(n.fill&&n.fill.solid&&n.fill.solid.color)return"Color";if(n.icon)return"Icon";if(n.dataBars)return"DataBars";var i=ge.Ge.fromDescriptor(n);return i.text?i.misc&&i.misc.webUrl?"WebUrl":"Text":i.numeric?"Numeric":i.dateTime?"DateTime":void p.fF.assertFail("Unexpected property type")},o.prototype.createModeSelectOptions=function(n,t,i){var l={name:t.get("ConditionalFormattingDialogModern_Mode_ColorScale"),value:"gradient"},s={name:t.get("ConditionalFormattingDialog_RuleBased_RulesTitle"),value:"conditional"},g={name:t.get("ConditionalFormattingDialog_Mode_FieldValue"),value:"fieldValue"},v={name:t.get("Visual_ConditionalFormatting_DataBars"),value:"dataBars"};switch(n){case"Color":return[l,s,g];case"Icon":return[s,g];case"Text":case"WebUrl":case"Numeric":case"DateTime":return[g];case"DataBars":return[v];default:p.fF.assertNever(n)}return[]},o.prototype.getConditionalSourceExpr=function(n){p.fF.assertValue(n,"propDefn"),p.fF.assertNonEmpty(n.cases,"Empty conditional cases");var t=_.head(n.cases).condition;return(0,d.Ym)(t)&&(t=t.arg),(0,d.IS)(t)||(0,d.f8)(t)?t.left:((0,d.un)(t)&&(t=t.left),(0,d.$Q)(t)?t.left:void 0)},o.prototype.initializePropertyDefinition=function(n,t){var i,r;if(t){var l=(0,Oe.PU)(t,n.propertyDescriptor,!0);switch(n.propertyType){case"Color":var s=l;p.fF.assert(function(){return(0,Me.X2)(s)},"Expected a FillDefinition"),r=s&&s.solid&&s.solid.color;break;case"Icon":var v=l;p.fF.assert(function(){return(0,Me.r)(v)},"Expected an IconDefinition"),r=v.value,p.fF.assert(function(){return(0,d.AW)(v.layout)},"Icon layout should be constant"),p.fF.assert(function(){return(0,d.AW)(v.verticalAlignment)},"Icon Vertical alignment should be constant"),n.iconLayout=w.jz.getTextValue(v.layout),n.iconVerticalAlignment=w.jz.getTextValue(v.verticalAlignment);break;case"DataBars":return n.mode="dataBars",n.originalSourceField=n.targetFieldExpr,void(n.originalPropertyDefinition=l);case"Text":case"WebUrl":case"Numeric":case"DateTime":r=l;break;default:p.fF.assertNever(n.propertyType)}}if(r&&!(0,d.VC)(r)&&!(0,d.wt)(r)&&((0,d.Tu)(r)?(n.mode="gradient",n.originalPropertyDefinition=r,n.originalSourceField=r.input):(0,d.Gs)(r)?(n.mode="conditional",n.originalPropertyDefinition=r,n.originalSourceField=this.getConditionalSourceExpr(r)):(0,d.kb)(r)||(0,d.iV)(r)?(n.mode="fieldValue",n.originalPropertyDefinition=r,n.originalSourceField=r):p.fF.assertFail("Unsupported property value, received ".concat(r))),!n.originalPropertyDefinition){if("text"===this.determineRuleTemplateKind(n,!1,n.targetFieldExpr)&&"Color"===n.propertyType){var f=n.modeSelectOptions.find(function(z){return"conditional"===z.value});n.mode=null!==(i=f?.value)&&void 0!==i?i:n.modeSelectOptions[0].value}else n.mode=n.modeSelectOptions[0].value;n.originalPropertyDefinition=void 0,"Icon"===n.propertyType&&(n.iconLayout=n.iconLayout||k.IA,n.iconVerticalAlignment=n.iconVerticalAlignment||k.QZ)}(!n.originalSourceField||(0,d.NH)(n.originalSourceField))&&(n.originalSourceField=n.targetFieldExpr)},o.prototype.initializeMode=function(n,t,i,r,l,s){p.fF.assertAnyValue(t,"If propertyDefinition is defined, the viewModel will be initialized with it, if not, it will be initialized with default settings"),this.initializeExpectedSourceType(n);var g=n.targetFieldExpr,v=i.dataColors;switch(n.mode){case"gradient":return t||(t=(0,k.vX)(g).solid.color),n.gradient=new Pe(l,n.disableAutoRange,v.getGradientColors(),t),void(this.modeInitialized=!0);case"conditional":var x,f="number",z=!this.modeInitialized;switch(n.propertyType){case"Color":x=v.getGradientColors().minColor.value,f=this.determineRuleTemplateKind(n,z),t=this.determinePropertyDefinition(f,t,function(){return(0,k.yY)(g,x,f).solid.color});break;case"Icon":x=k.zB,f=this.determineRuleTemplateKind(n,z),t=this.determinePropertyDefinition(f,t,function(){return(0,k.XB)(g,f).value});break;default:p.fF.assertFail("Conditional mode supports only Color and Icon")}return n.conditional=new se(n.disableAutoRange,n.propertyType,x,t,r,l,f,s),void(this.modeInitialized=!0);case"dataBars":var pe=n.originalSourceField.getMetadata(n.schema).type;return n.dataBars=new Y(l,n.disableAutoRange,pe,t),void(this.modeInitialized=!0);case"fieldValue":n.fieldValue=new Ce,this.modeInitialized=!0;break;default:p.fF.assertNever(n.mode)}},o.prototype.determinePropertyDefinition=function(n,t,i){if(null==t)return i();var r=_.every(t.cases,function(g){var v=g.condition,z=((0,d.Ym)(v)?v.arg:v).getAnnotations();return!_.isEmpty(z)&&null!=z[S.Q]});return"text"===n&&!r||"number"===n&&r?(p.fF.warn("The rule template kind does not match the existing property definition. Creating a new default property definition."),i()):t},o.prototype.retrieveSourceFieldFromViewModel=function(n){var t;return null===(t=n.sourceSelector)||void 0===t?void 0:t.sourceField},o.prototype.determineRuleTemplateKind=function(n,t,i){var r;if(void 0===t&&(t=!0),void 0===i&&(i=null),!this.featureSwitchService.featureSwitches.cfStrings||null==(i=i??this.retrieveSourceFieldFromViewModel(n)))return"number";var l=this.aggrOps.getMetadataForUnderlyingType(i,n.schema);if(t){var s=null===(r=n.sourceSelector)||void 0===r?void 0:r.aggregationOption;if(null!=s){var g=s?.aggregate,v=3===g||4===g||null==g;return l?.type.text&&v?"text":"number"}}return l?.type.text?"text":"number"},o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275inject(nt.C),e.\u0275\u0275inject(Be.i),e.\u0275\u0275inject(_e.D),e.\u0275\u0275inject(ot.O),e.\u0275\u0275inject(Ee.vZ),e.\u0275\u0275inject(Fe.o),e.\u0275\u0275inject(Ve.D),e.\u0275\u0275inject(rt._))},o.\u0275prov=e.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac}),o}(),Le=a(85287),P=a(17174),Ne=a(59897),at=a(25740),ze=a(44529),lt=a(88315),Re=a(73221),st=a(4633),dt=a(83317),ut=a(59973),ct=a(14172),xe=a(4877),ke=a(84144),Ke=a(67489),pt=a(83309),je=a(93215),Ue=a(23983),He=a(75096),Ge=a(29524),We=a(88023),gt=a(72525),$e=a(86612),ne=a(77476),mt=a(96777),ht=a(96295),Q=a(93247),ft=function(){function o(){var n=this;this.onClick=function(t){return n.onButtonClick(t)},this.onKeydown=function(t){return n.onButtonKeydown(t)},this.onDocumentMouseDown=function(t){n.popup.contains(t.target)||n.popupButton.contains(t.target)||n.close()}}return o.prototype.subscribe=function(n,t){this.popup=n,this.popupButton=t,this.popup.style.position="fixed",this.close(),this.popupButton.addEventListener("click",this.onClick),this.popupButton.addEventListener("keydown",this.onKeydown),document.addEventListener("mousedown",this.onDocumentMouseDown,!0)},o.prototype.unsubscribe=function(){this.popupButton.removeEventListener("click",this.onClick),this.popupButton.removeEventListener("keydown",this.onKeydown),document.removeEventListener("mousedown",this.onDocumentMouseDown,!0),this.close(),this.popup=void 0,this.popupButton=void 0},o.prototype.onButtonClick=function(n){this.togglePopup()},o.prototype.onButtonKeydown=function(n){switch(n.keyCode){case Q.K5:this.open();break;case Q.hY:this.close();break;default:return}n.preventDefault(),n.stopPropagation()},o.prototype.togglePopup=function(){this.closed?this.open():this.close()},o.prototype.open=function(){this.popup.style.display="block";var i,n=this.popup.getBoundingClientRect(),t=this.popupButton.getBoundingClientRect();this.popup.style.left=t.right-n.width+"px",i=t.bottom+n.height>window.innerHeight?Math.max(t.top-n.height,0):t.bottom,this.popup.style.top=i+"px",this.closed=!1},o.prototype.close=function(){this.popup.style.display="none",this.closed=!0},o}(),vt=a(91615),Qe=a(11494),Ct=a(45916),Je=a(85102),Dt=["button"],yt=["popup"],bt=["noIcon"],c=["icon"];function u(o,n){if(1&o&&e.\u0275\u0275element(0,"img",14),2&o){var t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("src",t.selectedIcon.imageUrl,e.\u0275\u0275sanitizeUrl)}}function m(o,n){if(1&o&&e.\u0275\u0275element(0,"pbi-svg-use-symbol",15),2&o){var t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("symbolId",t.selectedIcon.svgId)}}function E(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",11),e.\u0275\u0275template(1,u,1,1,"img",12),e.\u0275\u0275template(2,m,1,1,"pbi-svg-use-symbol",13),e.\u0275\u0275elementEnd()),2&o){var t=e.\u0275\u0275nextContext();e.\u0275\u0275attribute("aria-label",t.getIconDescription(t.selectedIcon)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!!t.selectedIcon.url),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!!t.selectedIcon.svgId)}}function K(o,n){if(1&o&&e.\u0275\u0275element(0,"img",14),2&o){var t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275property("src",t.imageUrl,e.\u0275\u0275sanitizeUrl)}}function G(o,n){if(1&o&&e.\u0275\u0275element(0,"pbi-svg-use-symbol",15),2&o){var t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275property("symbolId",t.svgId)}}function le(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",16,17),e.\u0275\u0275listener("click",function(){var v=e.\u0275\u0275restoreView(t).$implicit,x=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(x.onIconClick(v))})("keydown",function(g){var x=e.\u0275\u0275restoreView(t).$implicit,f=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(f.onIconKeydown(g,x))}),e.\u0275\u0275template(2,K,1,1,"img",12),e.\u0275\u0275template(3,G,1,1,"pbi-svg-use-symbol",13),e.\u0275\u0275elementEnd()}if(2&o){var i=n.$implicit,r=n.index,l=e.\u0275\u0275nextContext();e.\u0275\u0275property("title",l.getIconDescription(i)),e.\u0275\u0275attribute("key",r)("tabindex",0==r?0:-1)("aria-selected",l.selectedIconId===i.id)("aria-posinset",r+1)("aria-setsize",i.length)("data-unique-id","icon-"+i.id),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!!i.url),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!!i.svgId)}}var ue=function(){function o(n,t,i){this.eventBridge=n,this.localizationService=t,this.itemPickerService=i,this.iconChanged=new e.EventEmitter,this.closed=new e.EventEmitter,this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager()}return o.prototype.ngOnInit=function(){var n=this;this.noIconLabel=this.localizationService.get("IconPicker_NoIcon"),this.subscriptionManager.subscribe(vt.kx,function(){return n.onVisualThemeChanged()}),this.updateIcons(),this.selectedIcon=this.icons.find(function(t){return t.id===n.selectedIconId})},o.prototype.ngAfterViewInit=function(){this.popupHandler=new ft,this.popupHandler.subscribe(this.popup.nativeElement,this.headerButton.nativeElement)},o.prototype.ngOnDestroy=function(){this.popupHandler.unsubscribe(),this.subscriptionManager.unsubscribeAll()},o.prototype.onIconClick=function(n){this.selectIcon(n)},o.prototype.onIconKeydown=function(n,t){switch(n.keyCode){case Q.hY:this.popupHandler.close();break;case Q.K5:this.selectIcon(t);break;case Q.Mf:this.noIcon.nativeElement.focus();break;case Q.LH:case Q.JH:case Q.oh:case Q.SV:this.focusOnNextIcon(n.keyCode,this.icons.indexOf(t))}n.preventDefault(),n.stopPropagation()},o.prototype.onNoPickClick=function(){this.selectIcon(void 0)},o.prototype.onNoPickKeyDown=function(n){switch(n.keyCode){case Q.Mf:var t;t=n.shiftKey?this.icons.length-1:0,this.iconElementRefs.map(function(i){return i.nativeElement}).find(function(i){return i.getAttribute("key")===t.toString()}).focus();break;case Q.K5:this.selectIcon(void 0)}n.preventDefault(),n.stopPropagation()},o.prototype.getIconDescription=function(n){if(n.description){if("string"==typeof n.description)return n.description;if(n.description.resourceKey)return this.localizationService.get(n.description.resourceKey)}},o.prototype.onVisualThemeChanged=function(){this.updateIcons()},o.prototype.updateIcons=function(){var n=_.cloneDeep(this.itemPickerService.getIcons());for(var t in this.icons=[],n){var i=n[t];i.id=t,this.icons.push(i)}},o.prototype.selectIcon=function(n){this.selectedIcon=n,this.selectedIconId=n?n.id:void 0,this.popupHandler.close(),this.iconChanged.emit(this.selectedIconId)},o.prototype.focusOnNextIcon=function(n,t){var i=this.getNextIconIndex(n,t);this.focusOnIconByIndex(i)},o.prototype.focusOnIconByIndex=function(n){this.getElementFromIndex(n).focus()},o.prototype.getElementFromIndex=function(n){return this.iconElementRefs.map(function(t){return t.nativeElement}).find(function(t){return t.getAttribute("key")===n.toString()})},o.prototype.getNextIconIndex=function(n,t){var l,s,i=t%o.columnCount,r=Math.floor(t/o.columnCount);return n===Q.LH||n===Q.JH?(l=i,s=this.getNextIndex(this.getColumnItemCount(i),r,n)):(n===Q.oh||n===Q.SV)&&(l=this.getNextIndex(this.getRowItemCount(r),i,n),s=r),this.getIndexFromPosition(l,s)},o.prototype.getRowItemCount=function(n){var t=this.icons.length;return n<Math.floor(t/o.columnCount)?o.columnCount:t%o.columnCount},o.prototype.getColumnItemCount=function(n){var t=this.icons.length/o.columnCount,i=Math.floor(t);return n<(t-i)*o.columnCount-1&&i++,i},o.prototype.getNextIndex=function(n,t,i){return i===Q.SV||i===Q.JH?t=++t>=n?0:t:(i===Q.oh||i===Q.LH)&&(t=--t<0?n-1:t),t},o.prototype.getIndexFromPosition=function(n,t){return n+t*o.columnCount},o.columnCount=10,o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(Qe.J),e.\u0275\u0275directiveInject(Fe.o),e.\u0275\u0275directiveInject(xe.a))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["icon-picker"]],viewQuery:function(t,i){if(1&t&&(e.\u0275\u0275viewQuery(Dt,7),e.\u0275\u0275viewQuery(yt,7),e.\u0275\u0275viewQuery(bt,7),e.\u0275\u0275viewQuery(c,5)),2&t){var r=void 0;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.headerButton=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.popup=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.noIcon=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.iconElementRefs=r)}},inputs:{selectedIconId:"selectedIconId",labelId:"labelId"},outputs:{iconChanged:"iconChanged",closed:"closed"},decls:13,vars:7,consts:[["role","button","tabindex","0",1,"popoutButton"],["button",""],["class","icon",4,"ngIf"],[1,"glyphicon","pbi-glyph-flickup","glyph-micro","dropdown-icon"],[1,"popup"],["popup",""],["role","listbox",1,"icon-container"],[1,"icon-container-scroll"],["class","icon","role","option",3,"title","click","keydown",4,"ngFor","ngForOf"],["tabindex","0",1,"noIcon",3,"click","keydown"],["noIcon",""],[1,"icon"],["role","presentation",3,"src",4,"ngIf"],["sheet","conditionalFormattingDialogIcons",3,"symbolId",4,"ngIf"],["role","presentation",3,"src"],["sheet","conditionalFormattingDialogIcons",3,"symbolId"],["role","option",1,"icon",3,"title","click","keydown"],["icon",""]],template:function(t,i){1&t&&(e.\u0275\u0275elementStart(0,"div",0,1),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275template(3,E,3,3,"div",2),e.\u0275\u0275element(4,"i",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"div",4,5)(7,"div",6)(8,"div",7),e.\u0275\u0275template(9,le,4,9,"div",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",9,10),e.\u0275\u0275listener("click",function(){return i.onNoPickClick()})("keydown",function(l){return i.onNoPickKeyDown(l)}),e.\u0275\u0275text(12),e.\u0275\u0275elementEnd()()()),2&t&&(e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(2,5,"Icon_Picker")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!!i.selectedIcon),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",i.icons),e.\u0275\u0275advance(1),e.\u0275\u0275attribute("aria-selected",void 0===i.selectedIconId),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(i.noIconLabel))},dependencies:[ne.NgForOf,ne.NgIf,Ct.R,Je.F],styles:["[_nghost-%COMP%]{display:flex;white-space:nowrap;-webkit-user-select:none;-ms-user-select:none;user-select:none}.popoutButton[_ngcontent-%COMP%]{display:flex;width:44px;height:28px;margin-left:4px;background-color:var(--white-color, #FFF);border:1px solid var(--fluent-theme-neutral-dark-color, #201F1E);box-sizing:border-box}.popoutButton[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{position:relative}.dropdown-icon[_ngcontent-%COMP%]{margin-left:6px;margin-top:6px}.popup[_ngcontent-%COMP%]{position:fixed;color:var(--fluent-theme-neutral-primary-alt-color, #3B3A39);background-color:var(--white-color, #FFF);box-shadow:0 4.8px 14.4px rgba(0,0,0,.11),0 25.6px 57.6px rgba(0,0,0,.13);font-size:12px;padding:5px;z-index:1}.icon-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.icon-container-scroll[_ngcontent-%COMP%]{overflow:auto;max-height:200px}.icon[_ngcontent-%COMP%]{margin-left:4px;margin-top:4px;width:16px;height:16px;float:left}.icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.noIcon[_ngcontent-%COMP%]{text-align:center}"],changeDetection:0}),o}(),ce=a(59968),me=a(22844),Ie=a(50057),we=a(78633),te=a(76492),St=a(58679),Ot=a(42189),Mt=a(9529),_t=a(56011),Ft=a(65005),Ye=a(45074),xt=a(36858),Et=a(57274);function Vt(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"pbi-dropdown-item",26),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){var t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.name," ")}}function At(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"pbi-dropdown-item",26),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275elementEnd()),2&o){var t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(2,2,t.displayNameKey)," ")}}function Lt(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"fieldset",27),e.\u0275\u0275element(1,"legend",28),e.\u0275\u0275elementStart(2,"pbi-dropdown",29)(3,"pbi-dropdown-trigger"),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,At,3,4,"pbi-dropdown-item",20),e.\u0275\u0275elementEnd()()),2&o){var t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(5,3,t.totalMatchingOption.value.displayNameKey)," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t.viewModel.totalMatchingOptions)("ngForTrackBy",t.trackBy.id)}}function Nt(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"pbi-dropdown-item",26),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){var t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",t.displayName," ")}}function zt(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"pbi-dropdown-item",26),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){var t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",t.value," ")}}var X=function(n){return{value:n}},Rt=function(n){return{visibility:n}};function kt(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"fieldset",30),e.\u0275\u0275element(1,"legend",31),e.\u0275\u0275elementStart(2,"section",32)(3,"pbi-dropdown",33)(4,"pbi-dropdown-trigger"),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,zt,2,2,"pbi-dropdown-item",20),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"theme-color-input",34),e.\u0275\u0275listener("colorChanged",function(l){e.\u0275\u0275restoreView(t);var s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.viewModel.gradient.updateGradientNullColor(l))}),e.\u0275\u0275elementEnd()()()}if(2&o){var i=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275attribute("aria-label",i.defaultFormattingLabel),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(i.nullStrategyOption.value.value),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",i.viewModel.gradient.nullStrategyOptions)("ngForTrackBy",i.trackBy.id),e.\u0275\u0275advance(1),e.\u0275\u0275property("color",e.\u0275\u0275pureFunction1(9,X,i.viewModel.gradient.settings.nullColor))("defaultColor",e.\u0275\u0275pureFunction1(11,X,i.colorPalette.dataColors.getGradientColors().nullColor.value))("isNoFillItemSupported",i.isNoFillItemSupported)("buttonHeight",32)("ngStyle",e.\u0275\u0275pureFunction1(13,Rt,i.viewModel.gradient.nullStrategyOption.disableInput?"hidden":"visible"))}}function Kt(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"pbi-dropdown-item",26),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){var t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",t.displayName," ")}}function jt(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"fieldset",35),e.\u0275\u0275element(1,"legend",36),e.\u0275\u0275elementStart(2,"pbi-dropdown",37)(3,"pbi-dropdown-trigger"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,Kt,2,2,"pbi-dropdown-item",20),e.\u0275\u0275elementEnd()()),2&o){var t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",t.barDirectionSelectedOption.value.displayName," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t.viewModel.dataBars.barDirectionSelectOptions)("ngForTrackBy",t.trackBy.reverseDirection)}}function Ut(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"pbi-dropdown-item",26),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){var t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",t.value," ")}}function Ht(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"pbi-dropdown-item",26),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){var t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",t.value," ")}}function Gt(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"fieldset"),e.\u0275\u0275element(1,"legend",52),e.\u0275\u0275elementStart(2,"section",32)(3,"pbi-dropdown",53)(4,"pbi-dropdown-trigger"),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,Ht,2,2,"pbi-dropdown-item",20),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"theme-color-input",42),e.\u0275\u0275listener("colorChanged",function(l){e.\u0275\u0275restoreView(t);var s=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(s.viewModel.gradient.updateGradientMidColor(l))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(8,"pbi-form-field"),e.\u0275\u0275element(9,"input",54),e.\u0275\u0275pipe(10,"localize"),e.\u0275\u0275pipe(11,"localize"),e.\u0275\u0275elementEnd()()}if(2&o){var i=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",i.centerSelectedOption.value.value," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",i.viewModel.gradient.centerSelectOptions)("ngForTrackBy",i.trackBy.id),e.\u0275\u0275advance(1),e.\u0275\u0275property("color",e.\u0275\u0275pureFunction1(15,X,i.viewModel.gradient.settings.midColor))("defaultColor",e.\u0275\u0275pureFunction1(17,X,i.colorPalette.dataColors.getGradientColors().midColor.value))("isNoFillItemSupported",i.isNoFillItemSupported)("buttonHeight",32),e.\u0275\u0275advance(2),e.\u0275\u0275property("placeholder",e.\u0275\u0275pipeBind1(10,11,"Enter_A_Value"))("pbiTooltip",null==i.viewModel.gradient.settings.midValue?e.\u0275\u0275pipeBind1(11,13,"Enter_A_Value"):void 0)("pbiTooltipShowDelay",i.viewModel.gradient.tooltipConfig.tooltipDelay)("pbiTooltipHideDelay",i.viewModel.gradient.tooltipConfig.tooltipDelay)}}function Wt(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"pbi-dropdown-item",26),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){var t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",t.value," ")}}var $t=function(){return{name:"ConditionalFormattingDialogModern_Diverging","aria-label":"ConditionalFormattingDialogModern_Diverging"}};function Qt(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",38)(1,"section",39)(2,"fieldset"),e.\u0275\u0275element(3,"legend",40),e.\u0275\u0275elementStart(4,"section",32)(5,"pbi-dropdown",41)(6,"pbi-dropdown-trigger"),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,Ut,2,2,"pbi-dropdown-item",20),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"theme-color-input",42),e.\u0275\u0275listener("colorChanged",function(l){e.\u0275\u0275restoreView(t);var s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.viewModel.gradient.updateGradientMinColor(l))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(10,"pbi-form-field"),e.\u0275\u0275element(11,"input",43),e.\u0275\u0275pipe(12,"localize"),e.\u0275\u0275pipe(13,"localize"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(14,Gt,12,19,"fieldset",44),e.\u0275\u0275elementStart(15,"fieldset"),e.\u0275\u0275element(16,"legend",45),e.\u0275\u0275elementStart(17,"section",32)(18,"pbi-dropdown",46)(19,"pbi-dropdown-trigger"),e.\u0275\u0275text(20),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(21,Wt,2,2,"pbi-dropdown-item",20),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"theme-color-input",42),e.\u0275\u0275listener("colorChanged",function(l){e.\u0275\u0275restoreView(t);var s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.viewModel.gradient.updateGradientMaxColor(l))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(23,"pbi-form-field"),e.\u0275\u0275element(24,"input",47),e.\u0275\u0275pipe(25,"localize"),e.\u0275\u0275pipe(26,"localize"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(27,"section",48),e.\u0275\u0275element(28,"pbi-checkbox",49),e.\u0275\u0275pipe(29,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"section",50),e.\u0275\u0275element(31,"gradient-bar-lazy",51),e.\u0275\u0275elementEnd()()}if(2&o){var i=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate(i.minimumSelectedOption.value.value),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",i.viewModel.gradient.minimumSelectOptions)("ngForTrackBy",i.trackBy.id),e.\u0275\u0275advance(1),e.\u0275\u0275property("color",e.\u0275\u0275pureFunction1(36,X,i.viewModel.gradient.settings.minColor))("defaultColor",e.\u0275\u0275pureFunction1(38,X,i.colorPalette.dataColors.getGradientColors().minColor.value))("isNoFillItemSupported",i.isNoFillItemSupported)("buttonHeight",32),e.\u0275\u0275advance(2),e.\u0275\u0275property("placeholder",e.\u0275\u0275pipeBind1(12,26,"Enter_A_Value"))("pbiTooltip",null==i.viewModel.gradient.settings.minValue?e.\u0275\u0275pipeBind1(13,28,"Enter_A_Value"):void 0)("pbiTooltipShowDelay",i.viewModel.gradient.tooltipConfig.tooltipDelay)("pbiTooltipHideDelay",i.viewModel.gradient.tooltipConfig.tooltipDelay),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",i.diverging.value),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate1(" ",i.maximumSelectedOption.value.value," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",i.viewModel.gradient.maximumSelectOptions)("ngForTrackBy",i.trackBy.id),e.\u0275\u0275advance(1),e.\u0275\u0275property("color",e.\u0275\u0275pureFunction1(40,X,i.viewModel.gradient.settings.maxColor))("defaultColor",e.\u0275\u0275pureFunction1(42,X,i.colorPalette.dataColors.getGradientColors().maxColor.value))("isNoFillItemSupported",i.isNoFillItemSupported)("buttonHeight",32),e.\u0275\u0275advance(2),e.\u0275\u0275property("placeholder",e.\u0275\u0275pipeBind1(25,30,"Enter_A_Value"))("pbiTooltip",null==i.viewModel.gradient.settings.maxValue?e.\u0275\u0275pipeBind1(26,32,"Enter_A_Value"):void 0)("pbiTooltipShowDelay",i.viewModel.gradient.tooltipConfig.tooltipDelay)("pbiTooltipHideDelay",i.viewModel.gradient.tooltipConfig.tooltipDelay),e.\u0275\u0275advance(4),e.\u0275\u0275property("label",e.\u0275\u0275pipeBind1(29,34,"ConditionalFormattingDialogModern_Diverging"))("localizeAttr",e.\u0275\u0275pureFunction0(44,$t)),e.\u0275\u0275advance(3),e.\u0275\u0275property("colors",i.viewModel.gradient.gradientBarValue)}}function Jt(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"pbi-dropdown-item",26),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){var t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",t.value," ")}}function Yt(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"pbi-dropdown-item",26),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){var t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",t.value," ")}}var Xt=function(){return{name:"DataBarsDialog_HideText","aria-label":"DataBarsDialog_HideText"}};function Zt(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",38)(1,"section",39)(2,"fieldset"),e.\u0275\u0275element(3,"legend",40),e.\u0275\u0275elementStart(4,"section",32)(5,"pbi-dropdown",41)(6,"pbi-dropdown-trigger"),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,Jt,2,2,"pbi-dropdown-item",20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"pbi-form-field"),e.\u0275\u0275element(10,"input",55),e.\u0275\u0275pipe(11,"localize"),e.\u0275\u0275pipe(12,"localize"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(13,"fieldset"),e.\u0275\u0275element(14,"legend",45),e.\u0275\u0275elementStart(15,"section",32)(16,"pbi-dropdown",46)(17,"pbi-dropdown-trigger"),e.\u0275\u0275text(18),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(19,Yt,2,2,"pbi-dropdown-item",20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(20,"pbi-form-field"),e.\u0275\u0275element(21,"input",56),e.\u0275\u0275pipe(22,"localize"),e.\u0275\u0275pipe(23,"localize"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(24,"section",57)(25,"fieldset"),e.\u0275\u0275element(26,"legend",58),e.\u0275\u0275elementStart(27,"theme-color-input",59),e.\u0275\u0275listener("colorChanged",function(l){e.\u0275\u0275restoreView(t);var s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.viewModel.dataBars.updateDataBarsPositiveColor(l))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(28,"fieldset"),e.\u0275\u0275element(29,"legend",60),e.\u0275\u0275elementStart(30,"theme-color-input",61),e.\u0275\u0275listener("colorChanged",function(l){e.\u0275\u0275restoreView(t);var s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.viewModel.dataBars.updateDataBarsNegativeColor(l))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(31,"fieldset"),e.\u0275\u0275element(32,"legend",62),e.\u0275\u0275elementStart(33,"theme-color-input",63),e.\u0275\u0275listener("colorChanged",function(l){e.\u0275\u0275restoreView(t);var s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.viewModel.dataBars.updateDataBarsAxisColor(l))}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(34,"section",48),e.\u0275\u0275element(35,"pbi-checkbox",64),e.\u0275\u0275pipe(36,"localize"),e.\u0275\u0275elementEnd()()}if(2&o){var i=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate(i.minimumSelectedOption.value.value),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",i.viewModel.dataBars.minimumSelectOptions)("ngForTrackBy",i.trackBy.id),e.\u0275\u0275advance(2),e.\u0275\u0275property("placeholder",e.\u0275\u0275pipeBind1(11,26,"Enter_A_Value"))("pbiTooltip",null==i.viewModel.dataBars.settings.minValue?e.\u0275\u0275pipeBind1(12,28,"Enter_A_Value"):void 0)("pbiTooltipShowDelay",i.viewModel.dataBars.tooltipConfig.tooltipDelay)("pbiTooltipHideDelay",i.viewModel.dataBars.tooltipConfig.tooltipDelay),e.\u0275\u0275advance(8),e.\u0275\u0275textInterpolate1(" ",i.maximumSelectedOption.value.value," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",i.viewModel.dataBars.maximumSelectOptions)("ngForTrackBy",i.trackBy.id),e.\u0275\u0275advance(2),e.\u0275\u0275property("placeholder",e.\u0275\u0275pipeBind1(22,30,"Enter_A_Value"))("pbiTooltip",null==i.viewModel.dataBars.settings.maxValue?e.\u0275\u0275pipeBind1(23,32,"Enter_A_Value"):void 0)("pbiTooltipShowDelay",i.viewModel.dataBars.tooltipConfig.tooltipDelay)("pbiTooltipHideDelay",i.viewModel.dataBars.tooltipConfig.tooltipDelay),e.\u0275\u0275advance(6),e.\u0275\u0275property("color",e.\u0275\u0275pureFunction1(36,X,null==i.viewModel.dataBars.settings.positiveColor?null:i.viewModel.dataBars.settings.positiveColor.solid.color))("defaultColor",e.\u0275\u0275pureFunction1(38,X,i.colorPalette.dataColors.getGradientColors().maxColor.value))("buttonHeight",32),e.\u0275\u0275advance(3),e.\u0275\u0275property("color",e.\u0275\u0275pureFunction1(40,X,null==i.viewModel.dataBars.settings.negativeColor?null:i.viewModel.dataBars.settings.negativeColor.solid.color))("defaultColor",e.\u0275\u0275pureFunction1(42,X,i.colorPalette.dataColors.getGradientColors().minColor.value))("buttonHeight",32),e.\u0275\u0275advance(3),e.\u0275\u0275property("color",e.\u0275\u0275pureFunction1(44,X,null==i.viewModel.dataBars.settings.axisColor?null:i.viewModel.dataBars.settings.axisColor.solid.color))("defaultColor",e.\u0275\u0275pureFunction1(46,X,i.colorPalette.foreground.value))("buttonHeight",32)("isNoFillItemSupported",i.isNoFillItemSupported),e.\u0275\u0275advance(2),e.\u0275\u0275property("label",e.\u0275\u0275pipeBind1(36,34,"DataBarsDialog_HideText"))("localizeAttr",e.\u0275\u0275pureFunction0(48,Xt))}}function qt(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"pbi-dropdown-item",26),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275elementEnd()),2&o){var t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(2,2,t.displayNameKey)," ")}}function ei(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"pbi-dropdown-item",26),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275elementEnd()),2&o){var t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(2,2,t.displayNameKey)," ")}}function ti(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"fieldset",73),e.\u0275\u0275element(1,"legend",74)(2,"icon-set-picker-input",75),e.\u0275\u0275elementEnd()),2&o){var t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(2),e.\u0275\u0275property("iconSetId",t.viewModel.conditional.iconSetId)("onIconSetSelected",t.onIconSetSelected)}}function ii(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"section",65)(1,"fieldset",66),e.\u0275\u0275element(2,"legend",67),e.\u0275\u0275elementStart(3,"pbi-dropdown",68)(4,"pbi-dropdown-trigger"),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,qt,3,4,"pbi-dropdown-item",7),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(8,"fieldset",69),e.\u0275\u0275element(9,"legend",70),e.\u0275\u0275elementStart(10,"pbi-dropdown",71)(11,"pbi-dropdown-trigger"),e.\u0275\u0275text(12),e.\u0275\u0275pipe(13,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(14,ei,3,4,"pbi-dropdown-item",7),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(15,ti,3,2,"fieldset",72),e.\u0275\u0275elementEnd()),2&o){var t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(6,5,t.iconLayout.value.displayNameKey)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t.iconLayoutOptions),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(13,7,t.iconVerticalAlignment.value.displayNameKey)," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t.iconVerticalAlignmentOptions),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isConditional&&t.isPropertyTypeIcon)}}function ni(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"pbi-dropdown-item",26),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){var t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",t.displayName," ")}}function oi(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"pbi-dropdown-item",26),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275elementEnd()),2&o){var t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(2,2,t.displayNameKey)," ")}}function ri(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"pbi-dropdown-item",26),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){var t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",t.displayName," ")}}function ai(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"pbi-dropdown-item",26),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275elementEnd()),2&o){var t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(2,2,t.displayNameKey)," ")}}var ye=function(n){return{hiddenNoTransition:n}},li=function(){return{placeholder:"Min"}},si=function(){return{placeholder:"Max"}};function di(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"section")(1,"section"),e.\u0275\u0275element(2,"h2",100),e.\u0275\u0275elementStart(3,"pbi-dropdown",101)(4,"pbi-dropdown-trigger"),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,ni,2,2,"pbi-dropdown-item",20),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(7,"input",102),e.\u0275\u0275pipe(8,"localize"),e.\u0275\u0275elementStart(9,"pbi-dropdown",103)(10,"pbi-dropdown-trigger"),e.\u0275\u0275text(11),e.\u0275\u0275pipe(12,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(13,oi,3,4,"pbi-dropdown-item",20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"section",104),e.\u0275\u0275element(15,"h2",105),e.\u0275\u0275elementStart(16,"pbi-dropdown",106)(17,"pbi-dropdown-trigger"),e.\u0275\u0275text(18),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(19,ri,2,2,"pbi-dropdown-item",20),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(20,"input",107),e.\u0275\u0275pipe(21,"localize"),e.\u0275\u0275elementStart(22,"pbi-dropdown",108)(23,"pbi-dropdown-trigger"),e.\u0275\u0275text(24),e.\u0275\u0275pipe(25,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(26,ai,3,4,"pbi-dropdown-item",20),e.\u0275\u0275elementEnd()()()),2&o){var t=e.\u0275\u0275nextContext().ngIf,i=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1("",t.lowerBound.operator.displayName," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t.operatorOptions.lowerBoundOptions)("ngForTrackBy",i.trackBy.id),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(27,ye,t.lowerBound.operator.disableInput))("localizeAttr",e.\u0275\u0275pureFunction0(29,li))("pbiTooltip",e.\u0275\u0275pipeBind1(8,19,"Min")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(30,ye,t.lowerBound.operator.disableInput)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(12,21,t.lowerBound.valueKind.displayNameKey)," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t.argumentKindOptions)("ngForTrackBy",i.trackBy.kind),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(32,ye,t.lowerBound.operator.disableOtherOperator)),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1("",t.upperBound.operator.displayName," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t.operatorOptions.upperBoundOptions)("ngForTrackBy",i.trackBy.id),e.\u0275\u0275advance(1),e.\u0275\u0275property("localizeAttr",e.\u0275\u0275pureFunction0(34,si))("pbiTooltip",e.\u0275\u0275pipeBind1(21,23,"Max")),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(25,25,t.upperBound.valueKind.displayNameKey)," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t.argumentKindOptions)("ngForTrackBy",i.trackBy.kind)}}function ui(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"pbi-dropdown-item",26),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){var t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",t.displayName," ")}}var ci=function(){return{placeholder:"Text"}};function pi(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"section")(1,"section"),e.\u0275\u0275element(2,"h2",100),e.\u0275\u0275elementStart(3,"pbi-dropdown",101)(4,"pbi-dropdown-trigger"),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,ui,2,2,"pbi-dropdown-item",20),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(7,"input",109),e.\u0275\u0275pipe(8,"localize"),e.\u0275\u0275elementEnd()()),2&o){var t=e.\u0275\u0275nextContext().ngIf,i=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1("",t.lowerBound.operator.displayName," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t.operatorOptions.lowerBoundOptions)("ngForTrackBy",i.trackBy.id),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(8,ye,t.lowerBound.operator.disableInput))("localizeAttr",e.\u0275\u0275pureFunction0(10,ci))("pbiTooltip",e.\u0275\u0275pipeBind1(8,6,"ConditionalFormattingDialog_StringInput_TooltipText"))}}function gi(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"theme-color-input",42),e.\u0275\u0275listener("colorChanged",function(s){e.\u0275\u0275restoreView(t);var g=e.\u0275\u0275nextContext().ngIf;return e.\u0275\u0275resetView(g.onColorChanged(s))}),e.\u0275\u0275elementEnd()}if(2&o){var i=e.\u0275\u0275nextContext().ngIf,r=e.\u0275\u0275nextContext(4);e.\u0275\u0275property("color",e.\u0275\u0275pureFunction1(4,X,i.value))("defaultColor",e.\u0275\u0275pureFunction1(6,X,i.defaultValue||r.defaultColor))("isNoFillItemSupported",r.isNoFillItemSupported)("buttonHeight",32)}}function mi(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"icon-picker",110),e.\u0275\u0275listener("iconChanged",function(l){e.\u0275\u0275restoreView(t);var s=e.\u0275\u0275nextContext().ngIf;return e.\u0275\u0275resetView(s.onIconChanged(l))}),e.\u0275\u0275elementEnd()}if(2&o){var i=e.\u0275\u0275nextContext().ngIf;e.\u0275\u0275property("selectedIconId",i.value)}}var It=function(n){return{disabled:n}};function hi(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0,90),e.\u0275\u0275template(1,di,27,35,"section",91),e.\u0275\u0275template(2,pi,9,11,"section",91),e.\u0275\u0275element(3,"h2",92),e.\u0275\u0275template(4,gi,1,8,"theme-color-input",93),e.\u0275\u0275template(5,mi,1,1,"icon-picker",94),e.\u0275\u0275elementStart(6,"section",95),e.\u0275\u0275element(7,"i",96),e.\u0275\u0275elementStart(8,"i",97),e.\u0275\u0275listener("keydown",function(f){e.\u0275\u0275restoreView(t);var z=e.\u0275\u0275nextContext().index,I=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(I.handleKeyDownCase(f,z,I.handleMoveCaseUp))})("click",function(f){e.\u0275\u0275restoreView(t);var z=e.\u0275\u0275nextContext().index,I=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(I.handleMoveCaseUp(z,f))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"i",98),e.\u0275\u0275listener("keydown",function(f){e.\u0275\u0275restoreView(t);var z=e.\u0275\u0275nextContext().index,I=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(I.handleKeyDownCase(f,z,I.handleMoveCaseDown))})("click",function(f){e.\u0275\u0275restoreView(t);var z=e.\u0275\u0275nextContext().index,I=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(I.handleMoveCaseDown(z,f))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"i",99),e.\u0275\u0275listener("keydown",function(f){e.\u0275\u0275restoreView(t);var z=e.\u0275\u0275nextContext().index,I=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(I.handleKeyDownCase(f,z,I.handleDeleteCase))})("click",function(f){e.\u0275\u0275restoreView(t);var z=e.\u0275\u0275nextContext().index,I=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(I.handleDeleteCase(z,f))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()}if(2&o){var i=n.ngIf,r=e.\u0275\u0275nextContext(),l=r.$implicit,s=r.first,g=r.last,v=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("formGroup",l)("ngSwitch",v.viewModel.conditional.ruleTemplateKind),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","number"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","text"),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf","Color"===i.propertyType),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Icon"===i.propertyType),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(15,ye,i.isValid())),e.\u0275\u0275attribute("tabindex",i.isValid()?-1:0)("aria-label",v.caseHasAnErrorMessage),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(17,It,s)),e.\u0275\u0275attribute("tabindex",s?-1:0),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(19,It,g)),e.\u0275\u0275attribute("tabindex",g?-1:0),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(21,It,s&&g)),e.\u0275\u0275attribute("tabindex",s&&g?-1:0)}}function fi(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"section",88),e.\u0275\u0275template(1,hi,11,23,"ng-container",89),e.\u0275\u0275elementEnd()),2&o){var t=n.index,i=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.viewModel.conditional.cases[t])}}function vi(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"section",76)(1,"section",77)(2,"div",78)(3,"button",79),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var l=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(l.reverseCasesValue())}),e.\u0275\u0275element(4,"i",80)(5,"span",81),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"button",79),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var l=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(l.addCase())}),e.\u0275\u0275element(7,"i",82)(8,"span",83),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(9,"legend",84),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"section",85),e.\u0275\u0275elementContainerStart(11,86),e.\u0275\u0275template(12,fi,2,1,"section",87),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()()}if(2&o){var i=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(5),e.\u0275\u0275property("localize",i.viewModel.conditional.reverseButtonLabelKey)("localizeTooltip",i.viewModel.conditional.reverseButtonLabelKey),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngForOf",i.rulesFormArray.controls)}}function Ci(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"form",1),e.\u0275\u0275element(1,"label",2),e.\u0275\u0275elementStart(2,"section",3)(3,"fieldset",4),e.\u0275\u0275element(4,"legend",5),e.\u0275\u0275elementStart(5,"pbi-dropdown",6)(6,"pbi-dropdown-trigger"),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,Vt,2,2,"pbi-dropdown-item",7),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(9,Lt,7,5,"fieldset",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"section",9)(11,"fieldset",10),e.\u0275\u0275element(12,"legend",11),e.\u0275\u0275elementStart(13,"pbi-dropdown",12,13)(15,"pbi-dropdown-trigger"),e.\u0275\u0275text(16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"div",14)(18,"pbi-field-list",15),e.\u0275\u0275listener("onNodeClick",function(l){e.\u0275\u0275restoreView(t);var s=e.\u0275\u0275reference(14),g=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(g.handleNodeSelect(l,s))})("onNodeCheck",function(l){e.\u0275\u0275restoreView(t);var s=e.\u0275\u0275reference(14),g=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(g.handleNodeSelect(l,s))}),e.\u0275\u0275pipe(19,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(20,"div",16),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(21,"fieldset",17),e.\u0275\u0275element(22,"legend",18),e.\u0275\u0275elementStart(23,"pbi-dropdown",19)(24,"pbi-dropdown-trigger"),e.\u0275\u0275text(25),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(26,Nt,2,2,"pbi-dropdown-item",20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(27,kt,8,15,"fieldset",21),e.\u0275\u0275template(28,jt,6,3,"fieldset",22),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(29,Qt,32,45,"div",23),e.\u0275\u0275template(30,Zt,37,49,"div",23),e.\u0275\u0275template(31,ii,16,9,"section",24),e.\u0275\u0275template(32,vi,13,3,"section",25),e.\u0275\u0275elementEnd()}if(2&o){var i=e.\u0275\u0275nextContext();e.\u0275\u0275property("formGroup",i.conditionalFormattingForm),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate(i.formattingMode.value.name),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",i.viewModel.modeSelectOptions),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.viewModel.totalMatchingOptions),e.\u0275\u0275advance(4),e.\u0275\u0275property("options",i.dropdownOptions),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(i.viewModel.sourceSelector.fieldDisplayName),e.\u0275\u0275advance(2),e.\u0275\u0275property("fieldListTree",e.\u0275\u0275pipeBind1(19,20,i.fieldListTree$))("scrollSelectedItemIntoViewOnInit",!0)("hasHighlights",!1)("options",i.fieldListTreeOptions),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(22,ye,0==i.viewModel.sourceSelector.aggregationOptions.length)),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",null==i.sourceSummarization.value?null:i.sourceSummarization.value.displayName," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",i.viewModel.sourceSelector.aggregationOptions)("ngForTrackBy",i.trackBy.aggregate),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.isGradient),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.isDataBars),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.isGradient),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.isDataBars),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.isPropertyTypeIcon),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.isConditional)}}var yi=function(o){function n(t,i,r,l,s,g,v,x,f,z,I,$,pe,he,be,fe){var F=o.call(this)||this;return F.itemPicker=t,F.featureSwitchService=i,F.localizationService=r,F.screenReaderService=l,F.svgProvider=s,F.modelService=g,F.fieldListTreeService=v,F.captionSetting=x,F.draggableSetting=f,F.inlineItemsSetting=z,F.groupingDesignStateService=I,F.changeDetectorRef=$,F.templateDialogPayload=pe,F.conditionalFormattingDialogViewModelService=he,F.enabledSetting=be,F.telemetryService=fe,F.formSubscriptions=[],F.conditionalFormSubscriptions=[],F.fieldListTreeOptions={editLabel:void 0},F.pbiTreeNodeSettingOptions={captionSetting:F.captionSetting,draggableSetting:F.draggableSetting,enabledSetting:F.enabledSetting,inlineItemsSetting:F.inlineItemsSetting,showMenuSetting:{canShowMenu:function(){return!1}}},F.defaultColor="#fff",F.fieldListTree$=F.fieldListTreeService.fieldListTree$,F.iconLayoutOptions=[{value:"Before",displayNameKey:"Visual_IconLayout_Before"},{value:"IconOnly",displayNameKey:"Visual_IconLayout_IconOnly"},{value:"After",displayNameKey:"Visual_IconLayout_After"}],F.iconVerticalAlignmentOptions=[{value:"Top",displayNameKey:"Top"},{value:"Middle",displayNameKey:"Middle"},{value:"Bottom",displayNameKey:"Bottom"}],F.trackBy={kind:function(ve,ee){return ee.kind},id:function(ve,ee){return ee.id},aggregate:function(ve,ee){return ee.aggregate},reverseDirection:function(ve,ee){return ee.reverseDirection}},F.dropdownOptions={dropdownHeight:312},F.onIconSetSelected=function(oe){F.viewModel.conditional.onIconSetSelected(F.viewModel.sourceSelector.sourceField,oe),F.resetRulesFormArray()},F.defaultFormattingLabel=F.localizationService.get("ConditionalFormattingDialog_FormatNull_Desc"),F.caseHasAnErrorMessage=F.localizationService.get("ConditionalFormattingDialog_RuleBased_ConditionError"),F.fieldListTreeService.modelToPbiTreeConverterOptions=F.pbiTreeNodeSettingOptions,F}return(0,C.__extends)(n,o),n.prototype.ngOnInit=function(){var t,i,r;return(0,C.__awaiter)(this,void 0,void 0,function(){var l,s,g=this;return(0,C.__generator)(this,function(v){switch(v.label){case 0:return this.allowOverrideTotalMatching=(s=this.templateDialogPayload.input).allowOverrideTotalMatching,this.hasGrouping=s.hasGrouping,this.icons=s.icons,this.iconSets=s.iconSets,this.inDataSources=s.inDataSources,this.propertyDefinition=s.propertyDefinition,this.propertyDescriptor=s.propertyDescriptor,this.propertySelector=s.propertySelector,this.targetFieldDisplayName=s.targetFieldDisplayName,this.targetFieldExpr=s.targetFieldExpr,this.visualType=s.visualType,this.colorPalette=(0,at.DP)(this.templateDialogPayload.input.colorPalette),this.itemPicker.setThemeItems(this.colorPalette.dataColors,this.icons,this.iconSets),this.propertyDescriptor.type.icon?[4,this.svgProvider.loadSheet("conditionalFormattingDialogIcons")]:[3,2];case 1:v.sent(),v.label=2;case 2:return this.propertyDescriptor.type.dataBars&&(this.allowOverrideTotalMatching=!0),l=this,[4,this.conditionalFormattingDialogViewModelService.create(this.colorPalette,this.inDataSources,this.targetFieldDisplayName,this.visualType,this.iconSets,this.targetFieldExpr,this.hasGrouping,this.propertyDescriptor,this.propertyDefinition,this.propertySelector,this.allowOverrideTotalMatching)];case 3:return l.viewModel=v.sent(),this.enabledSetting.isEnabled=function(x){if(x instanceof lt.Xx){var f=(0,ze.Sd)(x,g.groupingDesignStateService);return!g.viewModel.sourceSelector.isSourceDisabled(f)}return!0},this.buildFormGroup(),!(null===(r=null===(i=null===(t=this.viewModel.colorPickerType)||void 0===t?void 0:t.fill)||void 0===i?void 0:i.solid)||void 0===r)&&r.color&&(this.isNoFillItemSupported=(0,Ne.AG)(this.viewModel.colorPickerType.fill.solid.color)),this.templateDialogPayload.onOkButtonClick=function(){return(0,C.__awaiter)(g,void 0,void 0,function(){return(0,C.__generator)(this,function(x){return[2,this.onSubmit()]})})},[4,this.buildFieldListTree()];case 4:return v.sent(),this.changeDetectorRef.markForCheck(),[2]}})})},n.prototype.ngOnDestroy=function(){this.removeConditionalSubscriptions(),o.prototype.ngOnDestroy.call(this)},n.prototype.buildFormGroup=function(){for(var t,i,r,l,g,v,s=this,x=0,f=this.formSubscriptions;x<f.length;x++)this.lifecycleSubscriptions.remove(f[x]);this.formSubscriptions=[],this.removeConditionalSubscriptions(),this.formattingMode=new P.p4(this.viewModel.modeSelectOptions.find(function(q){return q.value===s.viewModel.mode})),this.totalMatchingOption=new P.p4(this.viewModel.totalMatchingOption),this.sourceField=new P.p4(this.viewModel.sourceSelector.sourceField,P.kI.required),this.sourceSummarization=new P.p4(this.viewModel.sourceSelector.aggregationOption);var I={};if(this.isGradient&&(this.buildGradientFormControls(),(t={}).nullStrategyOption=this.nullStrategyOption,t.minimumSelectedOption=this.minimumSelectedOption,t.centerSelectedOption=this.centerSelectedOption,t.maximumSelectedOption=this.maximumSelectedOption,t.gradientMinValue=this.gradientMinValue,t.gradientMaxValue=this.gradientMaxValue,t.diverging=this.diverging,I=t,this.diverging.value&&(I.gradientMidValue=this.gradientMidValue)),this.isDataBars&&(this.buildDataBarsFormControls(),(i={}).barDirectionSelectedOption=this.barDirectionSelectedOption,i.minimumSelectedOption=this.minimumSelectedOption,i.maximumSelectedOption=this.maximumSelectedOption,i.dataBarsMinValue=this.dataBarsMinValue,i.dataBarsMaxValue=this.dataBarsMaxValue,i.hideText=this.hideText,I=i),this.isConditional){this.rulesFormArray=new P.vC([]);for(var $=0,pe=this.viewModel.conditional.cases;$<pe.length;$++)this.buildConditionalFormGroup(pe[$]);(r={}).rules=this.rulesFormArray,I=r}if(this.isPropertyTypeIcon){var be=null!==(g=this.iconLayoutOptions.find(function(q){return s.viewModel.iconLayout===q.value}))&&void 0!==g?g:this.iconLayoutOptions[0],fe=null!==(v=this.iconVerticalAlignmentOptions.find(function(q){return s.viewModel.iconVerticalAlignment===q.value}))&&void 0!==v?v:this.iconVerticalAlignmentOptions[0];this.iconLayout=new P.p4(be),this.iconVerticalAlignment=new P.p4(fe);var F=this.iconLayout.valueChanges.subscribe(function(q){s.viewModel.iconLayout=q.value}),oe=this.iconVerticalAlignment.valueChanges.subscribe(function(q){s.viewModel.iconVerticalAlignment=q.value});this.formSubscriptions.push(F,oe),I.iconLayout=this.iconLayout,I.iconVerticalAlignment=this.iconVerticalAlignment}this.conditionalFormattingForm=new P.nJ((0,C.__assign)(((l={}).formattingMode=this.formattingMode,l.totalMatchingOption=this.totalMatchingOption,l.sourceField=this.sourceField,l.sourceSummarization=this.sourceSummarization,l),I)),this.templateDialogPayload.setOkButtonState(this.conditionalFormattingForm.invalid);var ve=this.formattingMode.valueChanges.subscribe(function(q){s.onModeChanged(q.value)}),ee=this.totalMatchingOption.valueChanges.subscribe(function(q){s.onTotalMatchingOptionChanged(q)}),wt=this.sourceSummarization.valueChanges.subscribe(function(q){s.onSummarizationOptionChanged(q)}),Ai=this.conditionalFormattingForm.valueChanges.subscribe(function(){s.templateDialogPayload.setOkButtonState(s.setOkButtonStatus())});this.formSubscriptions.push(ve,ee,wt,Ai);for(var Pt=0,Bt=this.formSubscriptions;Pt<Bt.length;Pt++)this.lifecycleSubscriptions.add(Bt[Pt])},n.prototype.removeConditionalSubscriptions=function(){for(var t=0,i=this.conditionalFormSubscriptions;t<i.length;t++)i[t].forEach(function(l){return l.unsubscribe});this.conditionalFormSubscriptions=[]},n.prototype.buildGradientFormControls=function(){var t=this,i=this.viewModel.gradient;this.nullStrategyOption=new P.p4(i.nullStrategyOption),this.minimumSelectedOption=new P.p4({value:i.minimumSelectedOption,disabled:this.viewModel.disableAutoRange}),this.centerSelectedOption=new P.p4({value:i.centerSelectedOption,disabled:this.viewModel.disableAutoRange}),this.maximumSelectedOption=new P.p4({value:i.maximumSelectedOption,disabled:this.viewModel.disableAutoRange}),this.gradientMinValue=new P.p4({value:i.settings.minValue,disabled:i.minimumSelectedOption.disableInput},P.kI.required),this.gradientMidValue=new P.p4({value:i.settings.midValue,disabled:i.centerSelectedOption.disableInput},P.kI.required),this.gradientMaxValue=new P.p4({value:i.settings.maxValue,disabled:i.maximumSelectedOption.disableInput},P.kI.required),this.diverging=new P.p4(i.settings.diverging);var r=this.nullStrategyOption.valueChanges.subscribe(function(I){t.onNullStrategyOptionChanged(I)}),l=this.minimumSelectedOption.valueChanges.subscribe(function(I){t.onMinimumSelectedOptionChanged(I)}),s=this.centerSelectedOption.valueChanges.subscribe(function(I){t.onCenterSelectedOptionChanged(I)}),g=this.maximumSelectedOption.valueChanges.subscribe(function(I){t.onMaximumSelectedOptionChanged(I)}),v=this.gradientMaxValue.valueChanges.subscribe(function(I){t.viewModel.gradient.settings.maxValue=I}),x=this.gradientMinValue.valueChanges.subscribe(function(I){t.viewModel.gradient.settings.minValue=I}),f=this.gradientMidValue.valueChanges.subscribe(function(I){t.viewModel.gradient.settings.midValue=I}),z=this.diverging.valueChanges.subscribe(function(I){t.onDivergingChanged(I)});this.formSubscriptions.push(r,l,s,g,v,x,f,z)},n.prototype.buildDataBarsFormControls=function(){var t=this,i=this.viewModel.dataBars;this.minimumSelectedOption=new P.p4({value:i.minimumSelectedOption,disabled:this.viewModel.disableAutoRange}),this.maximumSelectedOption=new P.p4({value:i.maximumSelectedOption,disabled:this.viewModel.disableAutoRange}),this.barDirectionSelectedOption=new P.p4(i.barDirectionSelectedOption),this.dataBarsMinValue=new P.p4({value:i.settings.minValue,disabled:i.minimumSelectedOption.disableInput},P.kI.required),this.dataBarsMaxValue=new P.p4({value:i.settings.maxValue,disabled:i.maximumSelectedOption.disableInput},P.kI.required),this.hideText=new P.p4(i.settings.hideText);var r=this.minimumSelectedOption.valueChanges.subscribe(function(f){i.minimumSelectedOption=f,i.onOptionChanged(f),t.dataBarsMinValue.setValue(i.settings.minValue),i.minimumSelectedOption.disableInput?t.dataBarsMinValue.disable():t.dataBarsMinValue.enable()}),l=this.maximumSelectedOption.valueChanges.subscribe(function(f){i.maximumSelectedOption=f,i.onOptionChanged(f),t.dataBarsMaxValue.setValue(i.settings.maxValue),i.maximumSelectedOption.disableInput?t.dataBarsMaxValue.disable():t.dataBarsMaxValue.enable()}),s=this.barDirectionSelectedOption.valueChanges.subscribe(function(f){i.barDirectionSelectedOption=f,i.settings.reverseDirection=f.reverseDirection}),g=this.dataBarsMinValue.valueChanges.subscribe(function(f){t.viewModel.dataBars.settings.minValue=f}),v=this.dataBarsMaxValue.valueChanges.subscribe(function(f){t.viewModel.dataBars.settings.maxValue=f}),x=this.hideText.valueChanges.subscribe(function(f){t.viewModel.dataBars.settings.hideText=f});this.sourceField.disable(),this.sourceSummarization.disable(),this.formSubscriptions.push(s,r,l,g,v,x)},n.prototype.buildConditionalFormGroup=function(t){var i;switch(t.ruleTemplateKind){case"number":i=this.buildNumericConditionalFormGroup(t);break;case"text":i=this.buildStringConditionalFormGroup(t);break;default:p.fF.assertNever(t.ruleTemplateKind)}i.setValidators(this.caseValidator(t)),this.rulesFormArray.push(i)},n.prototype.buildNumericConditionalFormGroup=function(t){var i,r=this,l=new P.nJ(((i={}).lowerBoundOperator=new P.p4(t.lowerBound.operator),i.lowerBoundArgument=new P.p4(t.lowerBound.value),i.lowerBoundArgumentKind=new P.p4({value:t.lowerBound.valueKind,disabled:!t.isPercentEnabled}),i.upperBoundOperator=new P.p4(t.upperBound.operator),i.upperBoundArgument=new P.p4(t.upperBound.value),i.upperBoundArgumentKind=new P.p4({value:t.upperBound.valueKind,disabled:!t.isPercentEnabled}),i)),s=l.controls,g=s.lowerBoundOperator.valueChanges.subscribe(function($){r.lowerBoundOperatorChanged($,t)}),v=s.lowerBoundArgument.valueChanges.subscribe(function($){r.lowerBoundArgumentChanged($,t)}),x=s.lowerBoundArgumentKind.valueChanges.subscribe(function($){r.lowerBoundArgumentKindChanged($,t)}),f=s.upperBoundOperator.valueChanges.subscribe(function($){r.upperBoundOperatorChanged($,t)}),z=s.upperBoundArgument.valueChanges.subscribe(function($){r.upperBoundArgumentChanged($,t)}),I=s.upperBoundArgumentKind.valueChanges.subscribe(function($){r.upperBoundArgumentKindChanged($,t)});return this.conditionalFormSubscriptions.push([g,v,x,f,z,I]),l},n.prototype.buildStringConditionalFormGroup=function(t){var i,r=this,l=new P.nJ(((i={}).lowerBoundOperator=new P.p4(t.lowerBound.operator),i.lowerBoundArgument=new P.p4(t.lowerBound.value),i.lowerBoundArgumentKind=new P.p4({value:t.lowerBound.valueKind,disabled:!0}),i)),s=l.controls,g=s.lowerBoundOperator.valueChanges.subscribe(function(f){r.lowerBoundOperatorChanged(f,t)}),v=s.lowerBoundArgument.valueChanges.subscribe(function(f){r.lowerBoundArgumentChanged(f,t)}),x=s.lowerBoundArgumentKind.valueChanges.subscribe(function(f){r.lowerBoundArgumentKindChanged(f,t)});return this.conditionalFormSubscriptions.push([g,v,x]),l},Object.defineProperty(n.prototype,"exploreUIAuthoringModulePath",{get:function(){return"@powerbi/ExploreUIAuthoring/lazy-modules/explore-ui-authoring/explore-ui-authoring.module#ExploreUIAuthoringModule"},enumerable:!1,configurable:!0}),n.prototype.caseValidator=function(t){return function(i){var r=i.controls.lowerBoundArgument,l=t.isValid()?null:{caseInvalid:!0};r.setErrors(l),i.controls.upperBoundArgument&&i.controls.upperBoundArgument.setErrors(l)}},n.prototype.upperBoundOperatorChanged=function(t,i){i.upperBound.operator=t,this.screenReaderAlertIfInvalid()},n.prototype.upperBoundArgumentChanged=function(t,i){i.upperBound.value=t,this.screenReaderAlertIfInvalid()},n.prototype.upperBoundArgumentKindChanged=function(t,i){i.upperBound.valueKind=t,this.screenReaderAlertIfInvalid()},n.prototype.lowerBoundOperatorChanged=function(t,i){switch(i.ruleTemplateKind){case"number":case"text":i.lowerBound.operator=t;break;default:p.fF.assertNever(i.ruleTemplateKind)}this.screenReaderAlertIfInvalid()},n.prototype.lowerBoundArgumentChanged=function(t,i){switch(i.ruleTemplateKind){case"number":case"text":i.lowerBound.value=t;break;default:p.fF.assertNever(i.ruleTemplateKind)}this.screenReaderAlertIfInvalid()},n.prototype.lowerBoundArgumentKindChanged=function(t,i){i.lowerBound.valueKind=t,this.screenReaderAlertIfInvalid()},n.prototype.screenReaderAlertIfInvalid=function(){this.isConditional&&(this.viewModel.conditional.isValid()?this.screenReaderService.cancelDebounce("conditionalDialog"):this.screenReaderService.alertWithDebounce("conditionalDialog",this.caseHasAnErrorMessage))},n.prototype.handleKeyDownCase=function(t,i,r){var l=this,s=!1;switch(t.keyCode){case 32:case 13:p.fF.assert(function(){return l.isConditional},"Case control is only possible in conditional"),r.call(this,i),s=!0}s&&t.stopPropagation()},n.prototype.handleDeleteCase=function(t){1!==this.rulesFormArray.controls.length&&(this.viewModel.conditional.deleteCase(t),this.conditionalFormSubscriptions[t].forEach(function(i){return i.unsubscribe()}),this.conditionalFormSubscriptions=this.conditionalFormSubscriptions.filter(function(i,r){return t!==r}),this.rulesFormArray.removeAt(t))},n.prototype.handleMoveCaseDown=function(t){if(t!==this.rulesFormArray.controls.length-1){this.viewModel.conditional.moveCaseDown(t),(0,R.LF)(this.conditionalFormSubscriptions,t,t+1);var i=this.rulesFormArray.at(t);this.rulesFormArray.removeAt(t),this.rulesFormArray.insert(t+1,i)}},n.prototype.handleMoveCaseUp=function(t){if(0!==t){this.viewModel.conditional.moveCaseUp(t),(0,R.LF)(this.conditionalFormSubscriptions,t,t-1);var i=this.rulesFormArray.at(t);this.rulesFormArray.removeAt(t),this.rulesFormArray.insert(t-1,i)}},n.prototype.handleKeyDownDiverging=function(t){var i=this;p.fF.assert(function(){return i.isGradient},"Divergent is only possible in gradient");var r=!1;switch(t.keyCode){case 32:case 13:p.fF.assert(function(){return!!i.viewModel.gradient},"Gradient cannot be null"),this.viewModel.gradient.settings.diverging=!this.viewModel.gradient.settings.diverging,this.viewModel.gradient.onDivergingChanged(),r=!0}r&&t.stopPropagation()},Object.defineProperty(n.prototype,"isConditional",{get:function(){var i;return"conditional"===(null===(i=this.viewModel)||void 0===i?void 0:i.mode)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isFieldValue",{get:function(){var i;return"fieldValue"===(null===(i=this.viewModel)||void 0===i?void 0:i.mode)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isGradient",{get:function(){var i;return"gradient"===(null===(i=this.viewModel)||void 0===i?void 0:i.mode)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isDataBars",{get:function(){var i;return"dataBars"===(null===(i=this.viewModel)||void 0===i?void 0:i.mode)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isPropertyTypeIcon",{get:function(){var i;return"Icon"===(null===(i=this.viewModel)||void 0===i?void 0:i.propertyType)},enumerable:!1,configurable:!0}),n.prototype.onModeChanged=function(t){this.viewModel.mode=t,this.viewModel.gradient=void 0,this.viewModel.conditional=void 0,this.viewModel.fieldValue=void 0,this.conditionalFormattingDialogViewModelService.initializeMode(this.viewModel,null,this.colorPalette,this.iconSets,this.localizationService,this.featureSwitchService),this.viewModel.sourceSelector.onSourceExpectedTypeChange(this.viewModel.expectedSourceTypes),this.fieldListTreeService.refresh(),this.buildFormGroup()},n.prototype.onTotalMatchingOptionChanged=function(t){if(this.viewModel.totalMatchingOption=t,this.viewModel.gradient){this.conditionalFormattingDialogViewModelService.updateDisableAutoRange(this.viewModel,this.hasGrouping),this.viewModel.gradient.onDisableAutoRangeChanged(i=this.viewModel.disableAutoRange);var r=null!=this.gradientMinValue.value||null!=this.gradientMaxValue.value||null!=this.gradientMidValue.value;this.enforceGradientSelectionInputs(),i?this.setSelectedOptionsGradient([0]):r||this.setSelectedOptionsGradient([1,2,3])}if(this.viewModel.dataBars&&(this.conditionalFormattingDialogViewModelService.updateDisableAutoRange(this.viewModel,this.hasGrouping),this.viewModel.dataBars.onDisableAutoRangeChanged(i=this.viewModel.disableAutoRange),r=null!=this.dataBarsMinValue.value||null!=this.dataBarsMaxValue.value,this.enforceDataBarsSelectionInputs(),i?this.setSelectedOptionsDataBars([0]):r||this.setSelectedOptionsDataBars([1,2])),this.viewModel.conditional&&"number"===this.viewModel.conditional.ruleTemplateKind){var i;this.conditionalFormattingDialogViewModelService.updateDisableAutoRange(this.viewModel,this.hasGrouping),this.viewModel.conditional.onDisableAutoRangeChanged(i=this.viewModel.disableAutoRange);for(var l=0;l<this.rulesFormArray.controls.length;l++){var s=this.rulesFormArray.controls[l].controls;this.viewModel.conditional.cases[l].isPercentEnabled?(s.lowerBoundArgumentKind.enable(),s.upperBoundArgumentKind.enable()):(s.lowerBoundArgumentKind.disable(),s.upperBoundArgumentKind.disable())}}this.changeDetectorRef.markForCheck()},n.prototype.enforceGradientSelectionInputs=function(){var t=this.viewModel.gradient;t.minimumSelectedOption.disableInput?this.minimumSelectedOption.enable():(this.minimumSelectedOption.disable(),this.gradientMinValue.enable()),t.centerSelectedOption.disableInput?this.centerSelectedOption.enable():(this.centerSelectedOption.disable(),this.gradientMidValue.enable()),t.maximumSelectedOption.disableInput?this.maximumSelectedOption.enable():(this.maximumSelectedOption.disable(),this.gradientMaxValue.enable())},n.prototype.enforceDataBarsSelectionInputs=function(){var t=this.viewModel.dataBars;t.minimumSelectedOption.disableInput?this.minimumSelectedOption.enable():(this.minimumSelectedOption.disable(),this.dataBarsMinValue.enable()),t.maximumSelectedOption.disableInput?this.maximumSelectedOption.enable():(this.maximumSelectedOption.disable(),this.dataBarsMaxValue.enable())},n.prototype.setSelectedOptionsGradient=function(t){var i=this.viewModel.gradient,r=function(s,g){if(!_.isEmpty(s)){var v=_.first(s.filter(function(x){return t.includes(x.id)}));null!=v&&g.setValue(v)}};r(i.minimumSelectOptions,this.minimumSelectedOption),r(i.centerSelectOptions,this.centerSelectedOption),r(i.maximumSelectOptions,this.maximumSelectedOption)},n.prototype.setSelectedOptionsDataBars=function(t){var i=this.viewModel.dataBars,r=function(s,g){if(!_.isEmpty(s)){var v=_.first(s.filter(function(x){return t.includes(x.id)}));null!=v&&g.setValue(v)}};r(i.minimumSelectOptions,this.minimumSelectedOption),r(i.maximumSelectOptions,this.maximumSelectedOption)},n.prototype.isModelValid=function(){return!(!this.viewModel||!this.viewModel.sourceSelector||!this.viewModel.sourceSelector.sourceField||"conditional"===this.viewModel.mode&&!this.viewModel.conditional.isValid())},n.prototype.handleNodeSelect=function(t,i){var r=t.node;if(!r.disabled&&[0,2,4].includes(r.data.fieldType)){var s=r.data?(0,ze.Sd)(r.data,this.groupingDesignStateService):void 0;this.setSourceField(void 0,s),this.sourceSummarization.setValue(this.viewModel.sourceSelector.aggregationOption),this.sourceField.setValue(this.viewModel.sourceSelector.sourceField),i.closeDropdown()}},n.prototype.onSummarizationOptionChanged=function(t){var i;if(null!=t){var r=null===(i=this.viewModel.sourceSelector.aggregationOptions.find(function(s){return _.isEqual(s.aggregate,t.aggregate)}))||void 0===i?void 0:i.displayName;t.displayName=r??t.displayName,this.viewModel.sourceSelector.aggregationOption=t}if(this.featureSwitchService.featureSwitches.cfStrings&&"conditional"===this.viewModel.mode){var l=this.conditionalFormattingDialogViewModelService.determineRuleTemplateKind(this.viewModel);this.viewModel.conditional.reinitializeSQConditionalExpr(l),this.resetRulesFormArray(),this.buildFormGroup(),this.changeDetectorRef.markForCheck()}this.viewModel.sourceSelector.setSourceAggregate()},n.prototype.onNullStrategyOptionChanged=function(t){this.viewModel.gradient.nullStrategyOption=t,this.viewModel.gradient.updateNullStrategy()},n.prototype.onMaximumSelectedOptionChanged=function(t){this.viewModel.gradient.maximumSelectedOption=t,this.viewModel.gradient.onOptionChanged(t),this.gradientMaxValue.setValue(this.viewModel.gradient.settings.maxValue),this.viewModel.gradient.maximumSelectedOption.disableInput?this.gradientMaxValue.disable():this.gradientMaxValue.enable()},n.prototype.addCase=function(){this.viewModel.conditional.addCase();var t=this.viewModel.conditional.cases.slice(-1)[0];this.buildConditionalFormGroup(t)},n.prototype.reverseCasesValue=function(){this.viewModel.conditional.reverseCasesValue(),this.resetRulesFormArray()},n.prototype.resetRulesFormArray=function(){this.rulesFormArray=new P.vC([]),this.removeConditionalSubscriptions();for(var t=0,i=this.viewModel.conditional.cases;t<i.length;t++)this.buildConditionalFormGroup(i[t])},n.prototype.onCenterSelectedOptionChanged=function(t){this.viewModel.gradient.centerSelectedOption=t,this.viewModel.gradient.onOptionChanged(t),this.gradientMidValue.setValue(this.viewModel.gradient.settings.midValue),this.viewModel.gradient.centerSelectedOption.disableInput?this.gradientMidValue.disable():this.gradientMidValue.enable()},n.prototype.onMinimumSelectedOptionChanged=function(t){this.viewModel.gradient.minimumSelectedOption=t,this.viewModel.gradient.onOptionChanged(t),this.gradientMinValue.setValue(this.viewModel.gradient.settings.minValue),this.viewModel.gradient.minimumSelectedOption.disableInput?this.gradientMinValue.disable():this.gradientMinValue.enable()},n.prototype.onDivergingChanged=function(t){t?this.conditionalFormattingForm.addControl("gradientMidValue",this.gradientMidValue):this.conditionalFormattingForm.removeControl("gradientMidValue"),this.viewModel.gradient.settings.diverging=t,this.viewModel.gradient.onDivergingChanged()},n.prototype.setOkButtonStatus=function(){var t=this.conditionalFormattingForm.invalid;return this.featureSwitchService.featureSwitches.cfStrings&&"conditional"===this.viewModel.mode&&this.viewModel.sourceSelector.sourceField&&(t=!this.viewModel.conditional.isValid()),t},n.prototype.setSourceField=function(t,i){this.viewModel.sourceSelector.onSourceSelected(t,i)},n.prototype.buildFieldListTree=function(){return(0,C.__awaiter)(this,void 0,void 0,function(){var t=this;return(0,C.__generator)(this,function(i){switch(i.label){case 0:return[4,this.modelService.update([])];case 1:return i.sent(),this.modelService.modelChange$.pipe((0,dt.R)(this.onDestroy$),(0,ut.h)(function(r){return!!r?.model}),(0,ct.U)(function(r){return r.model})).subscribe(function(r){t.fieldListTreeService.setOrUpdateFieldListTreeModel(r,[])}),[2]}})})},n.prototype.onSubmit=function(){var i,r,l,t=this;p.fF.assert(function(){return t.isModelValid()},"Invalid Conditional Formatting model");var s,g=this.viewModel.sourceSelector.sourceField,v=this.viewModel.propertyDescriptor,x=this.viewModel.propertyType,f=this.viewModel.totalMatchingOption;switch(this.viewModel.mode){case"gradient":s=this.viewModel.gradient.getDefinition(g,v);break;case"conditional":var z=this.viewModel.conditional.getDefinition(g);switch(x){case"Color":s={solid:{color:z}};break;case"Icon":s={kind:"Icon",value:z};break;case"Text":case"WebUrl":case"Numeric":case"DateTime":case"DataBars":s=z;break;default:p.fF.assertNever(x)}break;case"dataBars":s=this.viewModel.dataBars.getDefinition(g,v,f.id);break;case"fieldValue":s=this.viewModel.fieldValue.getDefinition(g,x);break;default:p.fF.assertNever(this.viewModel.mode)}return"Icon"===x&&(s.layout=(0,w.fL)(this.viewModel.iconLayout),s.verticalAlignment=(0,w.fL)(this.viewModel.iconVerticalAlignment)),this.featureSwitchService.featureSwitches.cfStrings&&this.telemetryService.logEvent(Le.vB,{visualType:this.visualType,propertyType:this.viewModel.propertyType,conditionalFormattingMode:this.viewModel.mode,conditionalRuleTemplateKind:null===(i=this.viewModel.conditional)||void 0===i?void 0:i.ruleTemplateKind,numberOfRulesApplied:null===(l=null===(r=this.viewModel.conditional)||void 0===r?void 0:r.cases)||void 0===l?void 0:l.length}),{selector:f&&"dataBars"!==this.viewModel.mode?f.changeSelector(this.propertySelector):this.propertySelector,propertyDefinition:(0,Oe.W7)(s,v,!0,this.featureSwitchService.featureSwitches.serializeSpaceOptimization)}},n.\u0275fac=function(i){return new(i||n)(e.\u0275\u0275directiveInject(xe.a),e.\u0275\u0275directiveInject(Ee.vZ),e.\u0275\u0275directiveInject(Fe.o),e.\u0275\u0275directiveInject(pt.g),e.\u0275\u0275directiveInject(ke.g),e.\u0275\u0275directiveInject(je.b),e.\u0275\u0275directiveInject(He.p),e.\u0275\u0275directiveInject(Ge.B),e.\u0275\u0275directiveInject(We.F),e.\u0275\u0275directiveInject(gt.wt),e.\u0275\u0275directiveInject(Ue.AA),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(Ke.x),e.\u0275\u0275directiveInject(Ae),e.\u0275\u0275directiveInject($e.y),e.\u0275\u0275directiveInject(st.y0))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["conditional-formatting-dialog"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:2,vars:1,consts:[[3,"formGroup",4,"ngIf"],[3,"formGroup"],["id","genericColor","localize","Generic_Color",1,"hidden"],[1,"flex","spaceBelow"],[1,"conditionalFormattingMode"],["id","formattingModeLabel","localize","ConditionalFormattingDialogModern_Mode_Label"],["id","formattingMode","name","formattingMode","formControlName","formattingMode","aria-labelledby","formattingModeLabel"],[3,"value",4,"ngFor","ngForOf"],["id","totalMatching",4,"ngIf"],[1,"flex","space-between"],[1,"sourceField"],["id","sourceFieldLabel","localize","ConditionalFormattingDialogModern_SourceFieldHeader"],["id","sourceFieldSelect","formControlName","sourceField","aria-labelledby","sourceFieldLabel","dropdown-type","field-list",3,"options"],["dropdownRef",""],[1,"conditionalFormattingFieldListContainer"],["focus-nav-mode","Browser",1,"fieldList","themeableElement",3,"fieldListTree","scrollSelectedItemIntoViewOnInit","hasHighlights","options","onNodeClick","onNodeCheck"],["tabindex","0",1,"container-stop-bottom"],[1,"sourceSummarization",3,"ngClass"],["id","sourceSummarizationLabel","localize","ConditionalFormattingDialog_SourceSummarizationHeader"],["id","sourceSummarization","formControlName","sourceSummarization","aria-labelledby","sourceSummarizationLabel"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],["class","nullColorStrategy",4,"ngIf"],["class","barDirection",4,"ngIf"],["class","spaceAbove",4,"ngIf"],["id","iconSettingsSection","class","flex spaceAbove",4,"ngIf"],["class","flex-column conditional spaceAbove",4,"ngIf"],[3,"value"],["id","totalMatching"],["id","totalMatchingOptionLabel","localize","ConditionalFormattingDialog_TotalMatching_Label"],["id","totalMatchingOption","formControlName","totalMatchingOption","aria-labelledby","totalMatchingOptionLabel"],[1,"nullColorStrategy"],["localize","ConditionalFormattingDialogModern_FormatNull"],[1,"colorSettings"],["formControlName","nullStrategyOption"],["tabindex","-1","labelId","genericColor",1,"whiteTheme",3,"color","defaultColor","isNoFillItemSupported","buttonHeight","ngStyle","colorChanged"],[1,"barDirection"],["id","barDirectionLabel","localize","DataBarsDialog_BarDirection"],["id","barDirectionSelectedOption","formControlName","barDirectionSelectedOption","aria-labelledby","barDirectionLabel"],[1,"spaceAbove"],[1,"sectionSettings"],["id","minimumSelectedOptionLabel","localize","ConditionalFormattingDialog_MinimumHeader","localizeTooltip","ConditionalFormattingDialog_MinimumHeader"],["formControlName","minimumSelectedOption","aria-labelledby","minimumSelectedOptionLabel"],["tabindex","-1","labelId","genericColor",1,"whiteTheme",3,"color","defaultColor","isNoFillItemSupported","buttonHeight","colorChanged"],["type","number","pbiInput","","formControlName","gradientMinValue","pbiTooltipPosition","below",1,"pbi-text-input",3,"placeholder","pbiTooltip","pbiTooltipShowDelay","pbiTooltipHideDelay"],[4,"ngIf"],["id","maximumSelectedOptionLabel","localize","ConditionalFormattingDialog_MaximumHeader","localizeTooltip","ConditionalFormattingDialog_MaximumHeader"],["formControlName","maximumSelectedOption","aria-labelledby","maximumSelectedOptionLabel"],["type","number","pbiInput","","formControlName","gradientMaxValue","pbiTooltipPosition","below",1,"pbi-text-input",3,"placeholder","pbiTooltip","pbiTooltipShowDelay","pbiTooltipHideDelay"],[1,"checkBoxSettings"],["id","diverging","formControlName","diverging","localizeTooltip","ConditionalFormattingDialogModern_Diverging",3,"label","localizeAttr"],["data-testid","gradient-value",1,"gradientValue"],[3,"colors"],["id","centerSelectedOptionLabel","localize","ConditionalFormattingDialog_CenterHeader","localizeTooltip","ConditionalFormattingDialog_CenterHeader"],["formControlName","centerSelectedOption","aria-labelledby","centerSelectedOptionLabel"],["type","number","pbiInput","","formControlName","gradientMidValue","pbiTooltipPosition","below",1,"pbi-text-input",3,"placeholder","pbiTooltip","pbiTooltipShowDelay","pbiTooltipHideDelay"],["type","number","pbiInput","","formControlName","dataBarsMinValue","pbiTooltipPosition","below",1,"pbi-text-input",3,"placeholder","pbiTooltip","pbiTooltipShowDelay","pbiTooltipHideDelay"],["type","number","pbiInput","","formControlName","dataBarsMaxValue","pbiTooltipPosition","below",1,"pbi-text-input",3,"placeholder","pbiTooltip","pbiTooltipShowDelay","pbiTooltipHideDelay"],[1,"sectionSettings","colorList"],["id","positiveColorLabel","localize","DataBarsDialog_PositiveBar"],["tabindex","-1","labelId","positiveColorLabel",1,"whiteTheme",3,"color","defaultColor","buttonHeight","colorChanged"],["id","negativeColorLabel","localize","DataBarsDialog_NegativeBar"],["tabindex","-1","labelId","negativeColorLabel",1,"whiteTheme",3,"color","defaultColor","buttonHeight","colorChanged"],["id","axisColorLabel","localize","DataBarsDialog_BarAxis"],["tabindex","-1","labelId","axisColorLabel",1,"whiteTheme",3,"color","defaultColor","buttonHeight","isNoFillItemSupported","colorChanged"],["id","diverging","formControlName","hideText","localizeTooltip","DataBarsDialog_HideText",3,"label","localizeAttr"],["id","iconSettingsSection",1,"flex","spaceAbove"],["id","iconLayout"],["id","iconLayoutLabel","localize","Visual_IconLayout","localizeTooltip","Visual_IconLayout"],["formControlName","iconLayout","aria-labelledby","iconLayoutLabel"],["id","iconVerticalAlignment"],["id","iconVerticalAlignmentLabel","localize","Visual_IconVerticalAlignment","localizeTooltip","Visual_IconVerticalAlignment"],["formControlName","iconVerticalAlignment","aria-labelledby","iconVerticalAlignmentLabel"],["id","iconSet",4,"ngIf"],["id","iconSet"],["localize","ConditionalFormattingDialog_RuleBased_IconStyleHeader","id","genericIconSet"],["tabindex","-1","labelId","genericIconSet",1,"whiteTheme",3,"iconSetId","onIconSetSelected"],[1,"flex-column","conditional","spaceAbove"],[1,"header"],["id","listActions"],["type","button",1,"pbi-fluent-small-button",3,"click"],[1,"glyphicon","pbi-glyph-sort","glyph-mini"],[3,"localize","localizeTooltip"],[1,"glyphicon","pbi-glyph-add","glyph-mini"],["localize","ConditionalFormattingDialog_RuleBased_RulesAdd","localizeTooltip","ConditionalFormattingDialog_RuleBased_RulesAdd"],["localize","ConditionalFormattingDialog_RuleBased_RulesTitle","localizeTooltip","ConditionalFormattingDialog_RuleBased_RulesTitle"],[1,"rulesContainer","spaceAbove"],["formArrayName","rules"],["class","ruleSettings",4,"ngFor","ngForOf"],[1,"ruleSettings"],[3,"formGroup","ngSwitch",4,"ngIf"],[3,"formGroup","ngSwitch"],[4,"ngSwitchCase"],["localize","ConditionalFormattingDialog_RuleBased_ConditionPostfix"],["class","whiteTheme","tabindex","-1","labelId","genericColor",3,"color","defaultColor","isNoFillItemSupported","buttonHeight","colorChanged",4,"ngIf"],["class","whiteTheme","labelId","genericIcon",3,"selectedIconId","iconChanged",4,"ngIf"],[1,"actionsContainer"],["localizeTooltip","ConditionalFormattingDialog_RuleBased_ConditionError",1,"glyphicon","glyph-small","pbi-glyph-info","error",3,"ngClass"],["role","button","localizeTooltip","ConditionalFormattingDialog_Case_Move_Up",1,"glyphicon","glyph-mini","pbi-glyph-drillup-nocircle",3,"ngClass","keydown","click"],["role","button","localizeTooltip","ConditionalFormattingDialog_Case_Move_Down",1,"glyphicon","glyph-mini","pbi-glyph-drilldowndisabled-nocircle",3,"ngClass","keydown","click"],["role","button","localizeTooltip","ConditionalFormattingDialog_Case_Delete",1,"glyphicon","glyph-mini","pbi-glyph-exit",3,"ngClass","keydown","click"],["localize","ConditionalFormattingDialog_RuleBased_ConditionPrefix"],["formControlName","lowerBoundOperator",1,"operator"],["formControlName","lowerBoundArgument","type","number","pbiTooltipPosition","below",1,"pbi-text-input","numeric-argument",3,"ngClass","localizeAttr","pbiTooltip"],["formControlName","lowerBoundArgumentKind",1,"argumentKind",3,"ngClass"],[3,"ngClass"],["localize","ConditionalFormattingDialog_RuleBased_ConditionSeparator"],["formControlName","upperBoundOperator",1,"operator"],["formControlName","upperBoundArgument","type","number","pbiTooltipPosition","below",1,"pbi-text-input","numeric-argument",3,"localizeAttr","pbiTooltip"],["formControlName","upperBoundArgumentKind",1,"argumentKind"],["formControlName","lowerBoundArgument","type","string","pbiTooltipPosition","below",1,"pbi-text-input","string-argument",3,"ngClass","localizeAttr","pbiTooltip"],["labelId","genericIcon",1,"whiteTheme",3,"selectedIconId","iconChanged"]],template:function(i,r){1&i&&(e.\u0275\u0275elementStart(0,"template-dialog"),e.\u0275\u0275template(1,Ci,33,24,"form",0),e.\u0275\u0275elementEnd()),2&i&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",r.viewModel))},dependencies:[ne.NgClass,ne.NgForOf,ne.NgIf,ne.NgStyle,ne.NgSwitch,ne.NgSwitchCase,mt.J,ht.Z,ue,P._Y,P.Fj,P.wV,P.JJ,P.JL,P.sg,P.u,P.CE,ce.X,me.b,Ie.r,we.a,te.H,St.I,Ot.r,Mt._,te.T,_t.v,Ft.l,Ye.bP,Ye.ug,xt.V,Et.oO,ne.AsyncPipe,Je.F],styles:["[_nghost-%COMP%]{--colorDialogForeground: var(--fluent-theme-neutral-primary-color);--colorDialogInputBorder: var(--fluent-theme-neutral-secondary-alt-color);--colorDialogInputBackground: var(--fluent-theme-white-color);--colorDialogInputBackgroundAlt: var(--fluent-theme-neutral-light-color);--colorDialogInputDisabled: var(--fluent-theme-neutral-tertiary-alt-color);--colorDialogInputError: var(--fluent-theme-error-dark-color);--colorDialogBackground: var(--globalColorWhite)}[data-legacy-theming=false]   [_nghost-%COMP%]{--colorDialogForeground: var(--colorNeutralForeground1);--colorDialogBackground: var(--colorNeutralBackground1);--colorDialogInputBorder: var(--colorNeutralStroke1);--colorDialogInputBackground: var(--colorNeutralBackground1);--colorDialogInputBackgroundAlt: var(--colorNeutralBackground2);--colorDialogInputDisabled: var(--colorNeutralForegroundDisabled);--colorDialogInputError: var(--colorDangerBorder2)}[_nghost-%COMP%]   .description[_ngcontent-%COMP%]{margin-top:0;font-size:var(--md-font-size, 14px);line-height:var(--md-font-size, 14px);color:var(--colorDialogForeground)}[_nghost-%COMP%]   h2[_ngcontent-%COMP%]{font-size:var(--sm-font-size, 12px);line-height:var(--sm-font-size, 12px);font-weight:400;color:var(--colorDialogForeground);margin-bottom:8px;margin-top:16px}[_nghost-%COMP%]   input[_ngcontent-%COMP%]{border:1px solid var(--colorDialogInputBorder);outline:0;padding:4px}[_nghost-%COMP%]   input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button, [_nghost-%COMP%]   input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;-moz-appearance:textfield;margin:0}[_nghost-%COMP%]   input[disabled][_ngcontent-%COMP%]:hover{border-color:var(--colorDialogInputBorder)}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]{border:0;margin:0;padding:0}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%]{font-size:var(--lg-font-size, 16px);margin-bottom:12px}[_nghost-%COMP%]   .sectionSettings[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:10px;margin-bottom:20px}[_nghost-%COMP%]   .sectionSettings[_ngcontent-%COMP%]   pbi-dropdown[_ngcontent-%COMP%]{margin-bottom:5px}[_nghost-%COMP%]   .sectionSettings[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:122px}[_nghost-%COMP%]   .checkBoxSettings[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]   .checkBoxSettings[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 5px 5px;font-size:var(--sm-font-size, 12px);cursor:pointer}[_nghost-%COMP%]   .checkBoxSettings[_ngcontent-%COMP%]   pbi-checkbox[_ngcontent-%COMP%]{margin-bottom:0;padding:2px}[_nghost-%COMP%]   theme-color-input[_ngcontent-%COMP%]{margin-left:4px}.conditionalFormattingFieldListContainer[_ngcontent-%COMP%]   pbi-field-list[_ngcontent-%COMP%]{width:264px;height:300px;background:var(--colorDialogInputBackground);border:1px solid var(--colorDialogInputBorder);padding:5px;position:absolute}[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;position:relative}[_nghost-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1;height:494px}[_nghost-%COMP%]   pbi-dropdown[_ngcontent-%COMP%]{width:276px}[_nghost-%COMP%]   .colorSettings[_ngcontent-%COMP%]   pbi-dropdown[_ngcontent-%COMP%]{width:224px}[_nghost-%COMP%]   section.flex[_ngcontent-%COMP%]{display:flex;flex-direction:row}[_nghost-%COMP%]   section.flex.space-between[_ngcontent-%COMP%]{justify-content:space-between}[_nghost-%COMP%]   section.flex[_ngcontent-%COMP%] > fieldset[_ngcontent-%COMP%]{margin-top:auto}[_nghost-%COMP%]   section.flex-column[_ngcontent-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   .spaceAbove[_ngcontent-%COMP%]{margin-top:12px}[_nghost-%COMP%]   .spaceBelow[_ngcontent-%COMP%]{margin-bottom:12px}[_nghost-%COMP%]   fieldset.conditionalFormattingMode[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset#totalMatching[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset.sourceField[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset.sourceSummarization[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset.nullColorStrategy[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset.barDirection[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset#iconLayout[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset#iconVerticalAlignment[_ngcontent-%COMP%]{position:relative;width:276px;margin-bottom:8px}[_nghost-%COMP%]   fieldset.conditionalFormattingMode[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset#totalMatching[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset.sourceField[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset.sourceSummarization[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset.nullColorStrategy[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset.barDirection[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset#iconLayout[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset#iconVerticalAlignment[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;margin-bottom:12px;display:block}[_nghost-%COMP%]   fieldset.conditionalFormattingMode[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset#totalMatching[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset.sourceField[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset.sourceSummarization[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset#iconLayout[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset#iconVerticalAlignment[_ngcontent-%COMP%]{margin-right:28px}[_nghost-%COMP%]   fieldset.nullColorStrategy[_ngcontent-%COMP%]{width:276px}[_nghost-%COMP%]   fieldset.nullColorStrategy[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{display:inline-flex;width:100%}[_nghost-%COMP%]   fieldset#iconSet[_ngcontent-%COMP%]{margin-bottom:12px}[_nghost-%COMP%]   .sectionSettings[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]{width:276px}[_nghost-%COMP%]   .sectionSettings[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{display:inline-flex;width:100%}[_nghost-%COMP%]   .sectionSettings[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]   input.ng-invalid[_ngcontent-%COMP%]{border:1px solid var(--colorDialogInputError)}[_nghost-%COMP%]   .sectionSettings.colorList[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%] > theme-color-input[_ngcontent-%COMP%]{margin:0}[_nghost-%COMP%]   section.gradientValue[_ngcontent-%COMP%]{border:1px solid var(--colorDialogInputBorder);display:block;height:25px;margin-top:20px;margin-right:8px}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.header[_ngcontent-%COMP%]{position:relative;height:35px;vertical-align:bottom}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.header[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%]{margin-bottom:0}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.header[_ngcontent-%COMP%]   #listActions[_ngcontent-%COMP%]{position:absolute;right:0;top:0;display:flex;flex-direction:row}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.header[_ngcontent-%COMP%]   #listActions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:80px;max-width:200px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;margin-right:8px;display:flex;align-items:center}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.header[_ngcontent-%COMP%]   #listActions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:5px}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.header[_ngcontent-%COMP%]   #listActions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-of-type{margin-right:0}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.rulesContainer[_ngcontent-%COMP%]{overflow-y:auto;overflow-x:hidden;font-size:12px;flex:1}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.rulesContainer[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.rulesContainer[_ngcontent-%COMP%]   section.ruleSettings[_ngcontent-%COMP%]:nth-of-type(odd){background:var(--colorDialogInputBackgroundAlt)}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.rulesContainer[_ngcontent-%COMP%]   section.ruleSettings[_ngcontent-%COMP%]{padding:3px 0}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.rulesContainer[_ngcontent-%COMP%]   section.ruleSettings[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:8px 4px}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.rulesContainer[_ngcontent-%COMP%]   section.ruleSettings[_ngcontent-%COMP%]   pbi-dropdown.operator[_ngcontent-%COMP%]{width:120px}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.rulesContainer[_ngcontent-%COMP%]   section.ruleSettings[_ngcontent-%COMP%]   input.numeric-argument[_ngcontent-%COMP%]{width:50px;margin-left:4px}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.rulesContainer[_ngcontent-%COMP%]   section.ruleSettings[_ngcontent-%COMP%]   input.string-argument[_ngcontent-%COMP%]{width:250px;margin-left:4px}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.rulesContainer[_ngcontent-%COMP%]   section.ruleSettings[_ngcontent-%COMP%]   pbi-dropdown.argumentKind[_ngcontent-%COMP%]{width:80px;margin-left:4px}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.rulesContainer[_ngcontent-%COMP%]   section.ruleSettings[_ngcontent-%COMP%]   input.argument.ng-invalid[_ngcontent-%COMP%]{border-color:var(--colorDialogInputError)}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.rulesContainer[_ngcontent-%COMP%]   section.ruleSettings[_ngcontent-%COMP%]   .colorpicker[_ngcontent-%COMP%]{background:white}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.rulesContainer[_ngcontent-%COMP%]   section.ruleSettings[_ngcontent-%COMP%]   section.actionsContainer[_ngcontent-%COMP%]{flex-grow:1;display:flex;justify-content:flex-end}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.rulesContainer[_ngcontent-%COMP%]   section.ruleSettings[_ngcontent-%COMP%]   section.actionsContainer[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin:6px 10px 6px 0;cursor:pointer}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.rulesContainer[_ngcontent-%COMP%]   section.ruleSettings[_ngcontent-%COMP%]   section.actionsContainer[_ngcontent-%COMP%]   i.disabled[_ngcontent-%COMP%]{color:var(--colorDialogInputDisabled);cursor:default}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.rulesContainer[_ngcontent-%COMP%]   section.ruleSettings[_ngcontent-%COMP%]   section.actionsContainer[_ngcontent-%COMP%]   i.pbi-glyph-info.error[_ngcontent-%COMP%]{color:var(--colorDialogInputError)}.container-stop-bottom[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;pointer-events:none}"],changeDetection:0}),n}(Re.w),bi=a(94165),Si=a(22346),Oi=a(27531),Mi=a(82156),_i=a(79061),Tt=a(78963),Fi=a(76966),xi=a(16973),Ii=a(47913),wi=a(6015),Pi=a(63654),Di=a(14525),Ti=a(16095),Bi=a(27037),Ei=a(18363),Vi=function(){function o(){}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=e.\u0275\u0275defineInjector({providers:(0,C.__spreadArray)((0,C.__spreadArray)([],Oi.H,!0),[Ei.l6,Ae,_e.D,$e.y,Qe.J,He.p,Ue.AA,xe.a,je.b,{provide:Tt.W,useClass:Tt.w},Ke.x],!1),imports:[ne.CommonModule,Fi.c.withManifest([{componentIdentifier:"ConditionalFormattingDialog",componentType:yi}]),Si.J,bi.FieldListModule,P.u5,P.UX,Mi.N,_i.v,b.p,wi.C,Ii.V,Pi.X,Di.g,Ti.Z,Bi.b,xi.e]}),o}()},85287:function(re,U,a){a.d(U,{df:function(){return y},vB:function(){return T}});var C=a(41114),b="PBI.ExploreUIDialogs.SampleDatasetDialog",y=C.cx[b]=(0,C.b1)(b),d="PBI.EX.ApplyConditionalFormattingRules",T=C.cx[d]=(0,C.b1)(d)},94165:function(re,U,a){a.r(U),a.d(U,{FieldListModule:function(){return bt}});var C=a(81337),b=a(22346),y=a(58286),d=a(50423),T=a(40290),M=a(8590),L=a(21728),D=a(87879),W=a(94419),O=a(9738),V=a(70863),A=a(58295),p=a(44529),w=a(88315),B=a(9380),h=a(11494),S=a(83008),N=a(39503),H=a(72262),j=a(28199),k=a(93215),R=a(23983),se=a(66890),J=function(){function c(u,m,E,K,G,le,ue,ce,me,Ie,we){var te=this;this.featureSwitchService=u,this.eventBridge=m,this.aggrOpsService=E,this.dataSourcesService=K,this.modelService=G,this.groupingDesignStateService=le,this.visualAuthoringService=ue,this.explorationNavigationService=ce,this.selectionService=me,this.fieldListCheckedService=Ie,this.modelingSelectionService=we,this.subscriptionManager=m.createChannelSubscriptionManager(),this.subscriptionManager.subscribe(M.oRp,function(){return te.updateFieldListCheckFromSelectedVisual()}),this.subscriptionManager.subscribe(M.jCS,function(){return te.updateFieldListCheckFromSelectedVisual()}),this.modelService.modelChange$.subscribe(function(){return te.updateFieldListCheckFromSelectedVisual()}),this.subscriptionManager.subscribe(M.OPn,function(){return te.modelingSelectionService.clear()}),this.subscriptionManager.subscribe(M.tRg,function(){te.modelingSelectionService.clear(),te.updateFieldListCheckFromSelectedVisual()}),this.subscriptionManager.subscribe(M.KD7,function(){te.modelingSelectionService.clear(),te.updateFieldListCheckFromSelectedVisual()})}return c.prototype.updateFieldListCheckFromSelectedVisual=function(){this.fieldListCheckedService.selectAll(this.getModelItemsFromSelectedVisual(this.modelService.model),!0)},c.prototype.addFieldToVisual=function(u){return(0,C.__awaiter)(this,void 0,void 0,function(){var m,E,K;return(0,C.__generator)(this,function(G){switch(G.label){case 0:return m=this.getFieldExpr(u),(E=L.UP.getSelectedVisual(this.selectionService))?(K=16===E.visibility,[4,this.visualAuthoringService.addFieldToVisual(m,this.dataSourcesService.get(),E,"CheckboxTickedInFieldList",K)]):[3,2];case 1:return[2,G.sent()];case 2:return this.eventBridge.publishToChannel(M.Tyr,{expr:m,allowAggregate:!0,telemetrySource:0}),[2,!0]}})})},c.prototype.removeField=function(u){this.visualAuthoringService.removeFieldFromAllRoles(this.dataSourcesService.get(),this.getFieldExpr(u))},c.prototype.addToDrillTrhough=function(u){this.visualAuthoringService.addDrillthroughFilter(this.getFieldExpr(u),{container:this.explorationNavigationService.getCurrentSection(),scopeType:1},this.dataSourcesService.get(),!0)},c.prototype.canAddToFilter=function(u){return!(0,V.kb)(u)||!this.castToConceptualItem(u).schema.capabilities.limitMultiColumnFiltersToQueryGroupColumns},c.prototype.addReportLevelFilter=function(u){this.visualAuthoringService.addFilter(this.getFieldExpr(u),{container:this.explorationNavigationService.getCurrentExploration(),scopeType:2},this.dataSourcesService.get())},c.prototype.addPageLevelFilter=function(u){this.visualAuthoringService.addFilter(this.getFieldExpr(u),{container:this.explorationNavigationService.getCurrentSection(),scopeType:1},this.dataSourcesService.get())},c.prototype.addVisualLevelFilter=function(u,m){this.visualAuthoringService.addFilter(this.getFieldExpr(u),{container:m,scopeType:0},this.dataSourcesService.get())},c.prototype.getTopNVisualFilters=function(u){return this.visualAuthoringService.createVisualFilters(this.explorationNavigationService.getCurrentSection(),u,this.dataSourcesService.get(),this.modelService.schema).filter(function(m){return m.contract&&m.contract.type===T.vA.TopN})},c.prototype.addToTopNFilterValue=function(u,m){var E=this.getFieldExpr(u),K=(0,A.k)(E)?E:(0,W.m_)(E,this.aggrOpsService.defaultAggregate(E,this.modelService.schema,!0));this.eventBridge.publishToChannel(D.d,{filterViewModel:m,orderByField:K})},c.prototype.getModelItemsFromSelectedVisual=function(u){if(!u)return[];var m=[],E=L.UP.getSelectedVisual(this.selectionService);if(E&&E.config.singleVisual&&E.config.singleVisual.query&&E.config.singleVisual.query.defn)if(this.featureSwitchService.featureSwitches.fieldParameters)for(var G=0,le=E.config.singleVisual.query.getUniqueQueryFields();G<le.length;G++)m.push.apply(m,u.findItems(le[G].expr));else for(var ce=0,me=E.config.singleVisual.query.defn.select();ce<me.length;ce++)m.push.apply(m,u.findItems(me[ce].expr));return m},c.prototype.getFieldExpr=function(u){return(0,p.Sd)(this.castToConceptualItem(u),this.groupingDesignStateService)},c.prototype.castToConceptualItem=function(u){if(u instanceof w.Xx)return u;throw Error("invalid type passed to toConceptualItem")},c.\u0275fac=function(m){return new(m||c)(d.\u0275\u0275inject(B.vZ),d.\u0275\u0275inject(h.J),d.\u0275\u0275inject(j.C),d.\u0275\u0275inject(S.D),d.\u0275\u0275inject(k.b),d.\u0275\u0275inject(R.AA),d.\u0275\u0275inject(se.$8),d.\u0275\u0275inject(N.z),d.\u0275\u0275inject(H.z),d.\u0275\u0275inject(O.fc),d.\u0275\u0275inject(O.W6))},c.\u0275prov=d.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac}),c}(),ie=function(){function c(u){this.fieldListReportAuthoringService=u}return c.prototype.check=function(u){return(0,C.__awaiter)(this,void 0,void 0,function(){var m;return(0,C.__generator)(this,function(E){switch(E.label){case 0:return u.checked?(m=u.flatNode.node,[4,this.fieldListReportAuthoringService.addFieldToVisual(u.flatNode.node.data)]):[3,2];case 1:return m.checked=E.sent(),[3,3];case 2:u.flatNode.node.checked=!1,this.fieldListReportAuthoringService.removeField(u.flatNode.node.data),E.label=3;case 3:return[2]}})})},c.\u0275fac=function(m){return new(m||c)(d.\u0275\u0275inject(J))},c.\u0275prov=d.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac}),c}(),Y=a(64560),Ce=function(c){return c.AddToDrillthrough="FieldListMenuItem_AddToDrillthrough",c}({}),Z={items:[{id:Ce.AddToDrillthrough,type:Y.iB.Button,text:"FieldListMenuItem_AddToDrillthrough",tooltip:"FieldListMenuItem_AddToDrillthrough"}]},Pe=function(){function c(u){this.fieldListReportAuthoringService=u}return c.prototype.getHandler=function(u){var m=this;return[Ce.AddToDrillthrough,{execute:function(){return m.fieldListReportAuthoringService.addToDrillTrhough(u)}}]},c.\u0275fac=function(m){return new(m||c)(d.\u0275\u0275inject(J))},c.\u0275prov=d.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac}),c}(),ae=function(c){return c.AddToFilters="FieldListMenuItem_AddToFilters",c.AddToReportLevelFilters="FieldListMenuItem_ReportLevelFilters",c.AddToPageLevelFilters="FieldListMenuItem_PageLevelFilters",c.AddToVisualLevelFilters="FieldListMenuItem_VisualLevelFilters",c}({}),et={items:[{id:ae.AddToFilters,type:Y.iB.SubMenu,text:"FieldListMenuItem_AddToFilters",tooltip:"FieldListMenuItem_AddToFilters",menu:{items:[{id:ae.AddToVisualLevelFilters,type:Y.iB.Button,text:"FieldListMenuItem_VisualLevelFilters",tooltip:"FieldListMenuItem_VisualLevelFilters"},{id:ae.AddToPageLevelFilters,type:Y.iB.Button,text:"FieldListMenuItem_PageLevelFilters",tooltip:"FieldListMenuItem_PageLevelFilters"},{id:ae.AddToReportLevelFilters,type:Y.iB.Button,text:"FieldListMenuItem_ReportLevelFilters",tooltip:"FieldListMenuItem_ReportLevelFilters"}]}}]},ge=function(c){return c.AddToTopNFilters="FieldListMenuItem_AddToTopNByValue",c.AddToTopNFilter="AddToTopNFilter",c}({}),Se={items:[{id:ge.AddToTopNFilters,type:Y.iB.SubMenu,text:"FieldListMenuItem_AddToTopNByValue",tooltip:"FieldListMenuItem_AddToTopNByValue"}]},Te=function(){function c(u,m){this.selectionService=u,this.fieldListReportAuthoringService=m}return c.prototype.getHandlers=function(u){var m=this;if(!this.fieldListReportAuthoringService.canAddToFilter(u))return[];var E=[[ae.AddToFilters,{execute:void 0}],[ae.AddToReportLevelFilters,{execute:function(){return m.fieldListReportAuthoringService.addReportLevelFilter(u)}}],[ae.AddToPageLevelFilters,{execute:function(){return m.fieldListReportAuthoringService.addPageLevelFilter(u)}}]],K=L.UP.getSelectedVisual(this.selectionService);return K&&(E.push([ae.AddToVisualLevelFilters,{execute:function(){return m.fieldListReportAuthoringService.addVisualLevelFilter(u,K)}}]),E.push([ge.AddToTopNFilters,{getSubItems:function(){return m.getTopNVisualFiltersMenuItems(K)},execute:void 0}]),E.push([ge.AddToTopNFilter,{execute:function(le){m.fieldListReportAuthoringService.addToTopNFilterValue(u,le.menuItem.data)}}])),E},c.prototype.getTopNVisualFiltersMenuItems=function(u){return this.fieldListReportAuthoringService.getTopNVisualFilters(u).sort(function(m,E){return m.displayName.localeCompare(E.displayName)}).map(function(m){return{id:ge.AddToTopNFilter,type:Y.iB.Button,text:m.displayName,tooltip:m.displayName,data:m}})},c.\u0275fac=function(m){return new(m||c)(d.\u0275\u0275inject(H.z),d.\u0275\u0275inject(J))},c.\u0275prov=d.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac}),c}(),Oe=function(c){return c.AddToField="FieldListMenuItem_AddToField",c}({}),it={id:Oe.AddToField,type:Y.iB.Button,text:"FieldListMenuItem_AddToField",tooltip:"FieldListMenuItem_AddToField"},Me=function(c){return c.Select="Select",c}({}),nt={items:[it,{id:Me.Select,type:Y.iB.Button,text:"Select",tooltip:"Select",checkable:!1}]},Be=a(81141),_e=function(){function c(u,m){this.fieldListReportAuthoringService=u,this.checkSettingStrategy=m}return c.prototype.getHandlers=function(u){var m=this;return this.canAddToField(u)?[[Oe.AddToField,{execute:function(K){return m.fieldListReportAuthoringService.addFieldToVisual(u)}}]]:[]},c.prototype.canAddToField=function(u){return!!this.checkSettingStrategy&&((0,V.t3)(u)||(0,V.kb)(u)||(0,V.y3)(u),this.checkSettingStrategy.isCheckable(u))},c.\u0275fac=function(m){return new(m||c)(d.\u0275\u0275inject(J),d.\u0275\u0275inject(Be.x,8))},c.\u0275prov=d.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac}),c}(),rt=[Te,Pe,_e,function(){function c(u){this.modelingSelectionService=u}return c.prototype.getHandlers=function(u){var m=this;return[[Me.Select,{execute:function(K){return m.modelingSelectionService.select(K.flatNode.node.data,!0)}}]]},c.\u0275fac=function(m){return new(m||c)(d.\u0275\u0275inject(O.W6))},c.\u0275prov=d.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac}),c}(),y.H,ie,J],Ee=a(19129),Fe=a(72038),Ve=a(66444),Ae=[nt,Ee.qd,et,Z,Se],Le=function(){function c(u,m,E,K,G){this.menuFactory=u,this.expandCollapseMenuItemHandlers=m,this.checkMenuItemHandler=E,this.addToFiltersMenuItemHandler=K,this.addToDrillthroughItemHandler=G,this.menuMode=Y.Kb.Compact,this.activeContextMenuRef=void 0}return c.prototype.menuClick=function(u){},c.prototype.menuOpen=function(u){this.activeContextMenuRef=u.menuRef},c.prototype.menuClose=function(u){this.activeContextMenuRef=void 0},c.prototype.closeActiveMenu=function(){void 0!==this.activeContextMenuRef&&this.activeContextMenuRef.close()},c.prototype.getMenu=function(u){var m;return this.menuFactory.getMenu(u,Ae,this.getItemMenuHandlers(null===(m=u.flatNode)||void 0===m?void 0:m.node.data))},c.prototype.menuItemClick=function(u){var m,E,K=this.getItemMenuHandlers(null===(m=u.flatNode)||void 0===m?void 0:m.node.data).get(u.menuItem.id);K.execute?K.execute(u):K.executeMany&&K.executeMany([null===(E=u.flatNode)||void 0===E?void 0:E.node.data],u)},c.prototype.getItemMenuHandlers=function(u){var m=[];return m.push.apply(m,this.expandCollapseMenuItemHandlers.getHandlers()),u&&(((0,V.t3)(u)||(0,V.kb)(u)||(0,V.y3)(u)||(0,V.ez)(u))&&m.push.apply(m,this.checkMenuItemHandler.getHandlers(u)),((0,V.t3)(u)||(0,V.kb)(u)||(0,V.ez)(u))&&(m.push.apply(m,this.addToFiltersMenuItemHandler.getHandlers(u)),m.push(this.addToDrillthroughItemHandler.getHandler(u)))),new Map(m)},c.\u0275fac=function(m){return new(m||c)(d.\u0275\u0275inject(Fe.E),d.\u0275\u0275inject(Ve.T),d.\u0275\u0275inject(_e),d.\u0275\u0275inject(Te),d.\u0275\u0275inject(Pe))},c.\u0275prov=d.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac}),c}(),P=a(90166),Ne=a(75096),at=a(7779),ze=a(59725),lt=a(34763),Re=a(14172),st=a(8538),dt=a(29834),ut=a(50998),ct=a(29524),xe=a(88023),ke=a(72193),Ke=a(72525),pt=a(412),je=a(66014),Ue=a(65005),He=a(56213),Ge=a(77476),We=function(){function c(u,m,E,K,G,le,ue,ce,me,Ie,we,te,St,Ot,Mt,_t,Ft,Ye,xt){this.modelService=m,this.modelingSelectionService=E,this.modelingCheckingService=K,this.modelChangeSelectionSynchronizer=G,this.schemaItemActivationServiceSynchronizer=le,this.captionSetting=ue,this.draggableSetting=ce,this.hiddenSetting=me,this.inlineItemsSetting=Ie,this.checkableSetting=we,this.fieldListTreeService=te,this.clickStrategy=St,this.menuStrategy=Ot,this.checkStrategy=Mt,this.dragDropStrategy=_t,this.keyboardStrategy=Ft,this.tooltipStrategy=Ye,this.gettingStartedService=xt,this.fieldListTree$=this.fieldListTreeService.fieldListTree$,this.fieldListOptions={click:this.clickStrategy,check:this.checkStrategy,menu:this.menuStrategy,dragDrop:this.dragDropStrategy,keyboard:this.keyboardStrategy,tooltip:this.tooltipStrategy},this.pbiTreeNodeSettingOptions={captionSetting:this.captionSetting,draggableSetting:this.draggableSetting,inlineItemsSetting:this.inlineItemsSetting,checkableSetting:this.checkableSetting,hiddenSetting:this.hiddenSetting},this.checkMode=ze.kH.Multi,this.subscription=new lt.w,this.fieldListTreeService.modelToPbiTreeConverterOptions=this.pbiTreeNodeSettingOptions,this.subscriptionManager=u.createChannelSubscriptionManager()}return c.prototype.ngOnInit=function(){var u=this;this.subscriptionManager.subscribe(M.LE3,function(){return u.modelService.update(void 0)}),this.subscription.add(this.modelService.modelChange$.subscribe(function(m){return u.onModelChange(m)})),this.subscription.add(this.modelingSelectionService.selectionChanged.subscribe(function(m){return u.updateSelection(m)})),this.subscription.add(this.modelingCheckingService.selectionChanged.subscribe(function(m){return u.fieldListTreeService.updateChecked(m)})),this.loading$=this.gettingStartedService.currentState$.pipe((0,Re.U)(function(m){return 1===m})),this.emptyModel$=this.gettingStartedService.currentState$.pipe((0,Re.U)(function(m){return 0===m})),this.schemaItemActivationServiceSynchronizer.initialize(),this.modelService.update(void 0)},c.prototype.ngOnDestroy=function(){this.subscriptionManager.unsubscribeAll(),this.subscription.unsubscribe()},c.prototype.updateSelection=function(u){this.closeActiveMenus(),this.fieldListTreeService.updateSelected(u)},c.prototype.closeActiveMenus=function(){this.menuStrategy&&this.menuStrategy.closeActiveMenu()},c.prototype.onModelChange=function(u){this.modelChangeSelectionSynchronizer.update(u.model,u.appliedChanges),this.fieldListTreeService.setOrUpdateFieldListTreeModel(u.model,this.modelingSelectionService.selection,this.modelingCheckingService.selection)},c.\u0275fac=function(m){return new(m||c)(d.\u0275\u0275directiveInject(h.J),d.\u0275\u0275directiveInject(k.b),d.\u0275\u0275directiveInject(O.W6),d.\u0275\u0275directiveInject(O.fc),d.\u0275\u0275directiveInject(ut.O),d.\u0275\u0275directiveInject(st.h),d.\u0275\u0275directiveInject(ct.B),d.\u0275\u0275directiveInject(xe.F),d.\u0275\u0275directiveInject(ke.J),d.\u0275\u0275directiveInject(Ke.wt),d.\u0275\u0275directiveInject(Be.x),d.\u0275\u0275directiveInject(Ne.p),d.\u0275\u0275directiveInject(P.Y),d.\u0275\u0275directiveInject(Le),d.\u0275\u0275directiveInject(ie),d.\u0275\u0275directiveInject(y.H),d.\u0275\u0275directiveInject(pt.W),d.\u0275\u0275directiveInject(je.Z),d.\u0275\u0275directiveInject(dt.c))},c.\u0275cmp=d.\u0275\u0275defineComponent({type:c,selectors:[["field-list-container"]],features:[d.\u0275\u0275ProvidersFeature((0,C.__spreadArray)((0,C.__spreadArray)((0,C.__spreadArray)([],rt,!0),at.r,!0),[P.Y,Le,Ve.T,Ne.p],!1))],decls:6,vars:11,consts:[[1,"container",3,"click"],["focus-nav-mode","Browser","fluent","true",3,"fieldListTree","scrollSelectedItemIntoViewOnInit","checkMode","options","loading"],[1,"pbi-field-list-watermark"]],template:function(m,E){1&m&&(d.\u0275\u0275elementStart(0,"div",0),d.\u0275\u0275listener("click",function(G){return G.stopPropagation()}),d.\u0275\u0275elementStart(1,"pbi-field-list",1),d.\u0275\u0275pipe(2,"async"),d.\u0275\u0275pipe(3,"async"),d.\u0275\u0275pipe(4,"async"),d.\u0275\u0275element(5,"field-list-watermark",2),d.\u0275\u0275elementEnd()()),2&m&&(d.\u0275\u0275advance(1),d.\u0275\u0275property("fieldListTree",d.\u0275\u0275pipeBind1(2,5,E.emptyModel$)?null:d.\u0275\u0275pipeBind1(3,7,E.fieldListTree$))("scrollSelectedItemIntoViewOnInit",!0)("checkMode",E.checkMode)("options",E.fieldListOptions)("loading",d.\u0275\u0275pipeBind1(4,9,E.loading$)))},dependencies:[Ue.l,He.s,Ge.AsyncPipe],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}pbi-field-list[_ngcontent-%COMP%]{flex:1;padding:0 4px}pbi-field-list[_ngcontent-%COMP%]     pbi-tree{margin-top:8px;padding-top:0!important}"],changeDetection:0}),c}(),gt=a(52910),$e=a(82156),ne=a(79061),mt=a(34256),ht=a(69792),Q=a(41920),ft=a(97930),vt=a(72359),Qe=a(90938),Ct=a(63654),Je=a(94841),yt=[{type:We,componentId:"FieldListContainerComponentId"}],bt=function(){function c(){}return c.\u0275fac=function(m){return new(m||c)},c.\u0275mod=d.\u0275\u0275defineNgModule({type:c}),c.\u0275inj=d.\u0275\u0275defineInjector({providers:(0,C.__spreadArray)((0,C.__spreadArray)((0,C.__spreadArray)([],mt.q,!0),Q.U,!0),[ke.J],!1),imports:[Ge.CommonModule,gt.O,b.J,$e.N.withManifests(yt),ne.v,Je.b,vt.K,Qe.g,Ct.X,ft.g,ht.v]}),c}()},58679:function(re,U,a){a.d(U,{I:function(){return B}});var C=a(65005),b=a(62458),y=a(9795),d=a(59017),T=a(59973),M=a(14172),L=a(81905),D=a(83317),W=a(48787),O=a(50423),V=a(84354),A=function(){function h(S){this.pbiDropdownService=S,this.isOpen$=this.pbiDropdownService.select$("open");var N=this.pbiDropdownService.select$("dropdownItems"),H=this.pbiDropdownService.select$("overlayRef"),j=N.pipe((0,T.h)(function(R){return!!R}),(0,M.U)(function(R){return b.fF.assert(function(){return 1===R.length},"Expected 1 FieldListComponent"),R.first})),k=j.pipe((0,L.w)(function(R){return R.onFirstRenderComplete}));(0,d.aj)([this.isOpen$,H,j,k]).pipe((0,D.R)(this.pbiDropdownService.onDestroy$),(0,T.h)(function(R){var J=R[1],ie=R[2];return R[0]&&!!J?.overlayRef.overlayElement&&!!ie})).subscribe(function(R){R[2].focusSearchBox()})}return h.prototype.buttonKeydown=function(S){var N=this;this.isOpen$.pipe((0,W.q)(1)).subscribe(function(H){H||(0,y.Wl)(S.keyCode)&&(N.pbiDropdownService.toggleOpenState(),S.preventDefault())})},h.\u0275fac=function(N){return new(N||h)(O.\u0275\u0275inject(V.S))},h.\u0275prov=O.\u0275\u0275defineInjectable({token:h,factory:h.\u0275fac}),h}(),p=a(26333),w=a(31343),B=function(){function h(S,N){this.pbiDropdownService=S,this.strategy=N}return h.prototype.ngAfterViewInit=function(){var S=this;(0,p.x)([{strategy:this.strategy,dropdownItems:this.dropdownItems}],w.N).subscribe(function(N){S.pbiDropdownService.updateState(N)})},h.\u0275fac=function(N){return new(N||h)(O.\u0275\u0275directiveInject(V.S),O.\u0275\u0275directiveInject(A))},h.\u0275dir=O.\u0275\u0275defineDirective({type:h,selectors:[["pbi-dropdown","dropdown-type","field-list"]],contentQueries:function(N,H,j){var k;(1&N&&O.\u0275\u0275contentQuery(j,C.l,5),2&N)&&(O.\u0275\u0275queryRefresh(k=O.\u0275\u0275loadQuery())&&(H.dropdownItems=k))},features:[O.\u0275\u0275ProvidersFeature([A])]}),h}()},45074:function(re,U,a){a.d(U,{bP:function(){return W},nm:function(){return L},uC:function(){return D},ug:function(){return M}});var C=a(4437),b=a(50423),y=[[["","pbiLabel",""]],[["","pbiInput",""]],[["","pbiInputButton",""]],[["","pbiInputError",""]]],d=["[pbiLabel]","[pbiInput]","[pbiInputButton]","[pbiInputError]"],T=0,M=function(){function O(V,A){this.elementRef=V,this.formField=A}return O.\u0275fac=function(A){return new(A||O)(b.\u0275\u0275directiveInject(b.ElementRef),b.\u0275\u0275directiveInject((0,b.forwardRef)(function(){return W})))},O.\u0275dir=b.\u0275\u0275defineDirective({type:O,selectors:[["","pbiInput",""]],hostAttrs:["autocomplete","off"],hostVars:3,hostBindings:function(A,p){2&A&&b.\u0275\u0275attribute("aria-required",p.required||null)("aria-describedby",null==p.formField.error?null:p.formField.error.id)("aria-invalid",p.formField.error?"true":"false")},inputs:{required:"required"}}),O}(),L=function(){function O(V,A){this.elementRef=V,this.formField=A}return O.\u0275fac=function(A){return new(A||O)(b.\u0275\u0275directiveInject(b.ElementRef),b.\u0275\u0275directiveInject((0,b.forwardRef)(function(){return W})))},O.\u0275dir=b.\u0275\u0275defineDirective({type:O,selectors:[["","pbiLabel",""]],hostVars:2,hostBindings:function(A,p){2&A&&b.\u0275\u0275classProp("pbi-label-required",null!=p.formField.input.required)}}),O}(),D=function(){function O(){this.id="pbi-input-error-id-".concat(T++)}return O.\u0275fac=function(A){return new(A||O)},O.\u0275dir=b.\u0275\u0275defineDirective({type:O,selectors:[["","pbiInputError",""]],hostVars:3,hostBindings:function(A,p){2&A&&(b.\u0275\u0275attribute("id",p.id),b.\u0275\u0275classProp("pbi-input-error",!0))}}),O}(),W=function(){function O(V){this.renderer=V,this._compact=!1}return Object.defineProperty(O.prototype,"compact",{get:function(){return this._compact},set:function(A){this._compact=(0,C.Ig)(A)},enumerable:!1,configurable:!0}),O.prototype.ngAfterContentInit=function(){if(this.input&&this.label){var V="pbi-input-id-".concat(T++);this.renderer.setAttribute(this.input.elementRef.nativeElement,"id",V),this.renderer.setAttribute(this.label.elementRef.nativeElement,"for",V)}},O.\u0275fac=function(A){return new(A||O)(b.\u0275\u0275directiveInject(b.Renderer2))},O.\u0275cmp=b.\u0275\u0275defineComponent({type:O,selectors:[["pbi-form-field"]],contentQueries:function(A,p,w){if(1&A&&(b.\u0275\u0275contentQuery(w,M,5),b.\u0275\u0275contentQuery(w,L,5),b.\u0275\u0275contentQuery(w,D,5)),2&A){var B=void 0;b.\u0275\u0275queryRefresh(B=b.\u0275\u0275loadQuery())&&(p.input=B.first),b.\u0275\u0275queryRefresh(B=b.\u0275\u0275loadQuery())&&(p.label=B.first),b.\u0275\u0275queryRefresh(B=b.\u0275\u0275loadQuery())&&(p.error=B.first)}},hostVars:2,hostBindings:function(A,p){2&A&&b.\u0275\u0275classProp("pbi-compact-form-field",p.compact)},inputs:{compact:"compact"},ngContentSelectors:d,decls:5,vars:0,consts:[[1,"controls"]],template:function(A,p){1&A&&(b.\u0275\u0275projectionDef(y),b.\u0275\u0275projection(0),b.\u0275\u0275elementStart(1,"div",0),b.\u0275\u0275projection(2,1),b.\u0275\u0275projection(3,2),b.\u0275\u0275elementEnd(),b.\u0275\u0275projection(4,3))},styles:['[_nghost-%COMP%]{display:flex;flex-direction:column;--input-border-color: var(--gray-110);--input-foreground: var(--gray-140);--disabled-input-background: var(--gray-20);--disabled-input-border-color: var(--gray-60);--disabled-input-foreground: var(--gray-90);--focused-input-border-color: var(--gray-130);--focused-input-foreground: var(--gray-180);--error-color: var(--fluent-theme-error-dark-color)}[data-legacy-theming=false]   [_nghost-%COMP%]{--input-border-color: var(--colorNeutralStroke1);--input-foreground: var(--colorNeutralForeground1);--disabled-input-background: var(--colorNeutralBackgroundDisabled);--disabled-input-border-color: var(--colorNeutralStrokeDisabled);--disabled-input-foreground: var(--colorNeutralForegroundDisabled);--focused-input-border-color: var(--colorNeutralStrokeFocus2);--focused-input-foreground: var(--colorNeutralForeground1);--error-color: var(--fluent-theme-error-dark-color)}.pbi-form-field-inline[_nghost-%COMP%] {flex-direction:row;align-items:center;justify-content:space-between}.pbi-form-field-inline[_nghost-%COMP%]  label{margin:0 8px 0 0}.pbi-form-field-inline[_nghost-%COMP%]  .controls{flex-grow:1;justify-content:flex-end}.pbi-compact-form-field[_nghost-%COMP%]  label{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-regular, 400)}.pbi-compact-form-field[_nghost-%COMP%]  input{height:28px;padding:4px 6px}.pbi-compact-form-field[_nghost-%COMP%]  textarea{padding:4px 6px}[_nghost-%COMP%]  *{box-sizing:border-box}[_nghost-%COMP%]  label{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-semi-bold, 600);margin:0 0 4px}[_nghost-%COMP%]  label.pbi-label-required:after{content:"*";margin-left:4px;color:var(--error-color)}[_nghost-%COMP%]  .controls{display:flex}[_nghost-%COMP%]  .controls>*:not(:last-child){margin-right:8px}[_nghost-%COMP%]  input{height:32px}[_nghost-%COMP%]  textarea{resize:none}[_nghost-%COMP%]  input, [_nghost-%COMP%]  textarea{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);width:100%;border-radius:2px;border:1px solid var(--input-border-color);color:var(--input-foreground);outline:none;padding:8px 6px}[_nghost-%COMP%]  input[disabled], [_nghost-%COMP%]  textarea[disabled], [_nghost-%COMP%]  input[aria-disabled=true], [_nghost-%COMP%]  textarea[aria-disabled=true]{background-color:var(--disabled-input-background);border-color:var(--disabled-input-border-color);color:var(--disabled-input-foreground)}[_nghost-%COMP%]  input:focus, [_nghost-%COMP%]  textarea:focus{border-color:var(--focused-input-border-color);color:var(--focused-input-foreground)}[_nghost-%COMP%]  [pbiInput][aria-invalid=true]{border-color:var(--error-color)}[_nghost-%COMP%]  .pbi-input-error{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-regular, 400);margin:4px 0 0;color:var(--error-color)}'],changeDetection:0}),O}()}}]);