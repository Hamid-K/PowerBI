"use strict";(self.webpackChunkdesktopDaxQueryView=self.webpackChunkdesktopDaxQueryView||[]).push([[5],{94478:function(be,Z,g){g.d(Z,{Mb:function(){return V},dt:function(){return B},r5:function(){return M}});var B=1e3;function V(m,w){return w||!m?0:m.getDuration()}var M=function(){function m(w){w&&w.duration&&(this.animationDuration=w.duration),this.animationDuration=this.animationDuration>=0?this.animationDuration:250}return m.prototype.getDuration=function(){return this.animationDuration},m.prototype.animate=function(w){return null},m.prototype.getEasing=function(){return d3.easeCubicInOut},m}()},58698:function(be,Z,g){g.d(Z,{c:function(){return B}});var h=g(30237),B=function(){function V(){}return V.prototype.bindEvents=function(M,m,w,b){this.labelItems=M.labelItems,b?(0,h.FO)(this.labelItems):(0,h.YG)(this.labelItems,m)},V.prototype.renderSelection=function(M){this.labelItems.styles(M?{opacity:function(w){return w.selected?V.DefaultLabelOpacity:V.DimmedLabelOpacity}}:{opacity:V.DefaultLabelOpacity})},V.DefaultLabelOpacity=1,V.DimmedLabelOpacity=.6,V}()},3087:function(be,Z,g){g.d(Z,{t:function(){return h}});var h={show:{objectName:"zoom",propertyName:"show"},showOnValueAxis:{objectName:"zoom",propertyName:"showOnValueAxis"},valueMin:{objectName:"zoom",propertyName:"valueMin"},valueMax:{objectName:"zoom",propertyName:"valueMax"},valueSize:{objectName:"zoom",propertyName:"valueSize"},showOnCategoryAxis:{objectName:"zoom",propertyName:"showOnCategoryAxis"},categoryMin:{objectName:"zoom",propertyName:"categoryMin"},categoryMax:{objectName:"zoom",propertyName:"categoryMax"},categorySize:{objectName:"zoom",propertyName:"categorySize"},showOnValueSecAxis:{objectName:"zoom",propertyName:"showOnValueSecAxis"},valueSecMin:{objectName:"zoom",propertyName:"valueSecMin"},valueSecMax:{objectName:"zoom",propertyName:"valueSecMax"},valueSecSize:{objectName:"zoom",propertyName:"valueSecSize"},showLabels:{objectName:"zoom",propertyName:"showLabels"},showTooltip:{objectName:"zoom",propertyName:"showTooltip"}}},67918:function(be,Z,g){g.d(Z,{HL:function(){return v}});var h=g(81337),B=g(62458),V=g(32379),M=g(38958),m=g(6714),w=g(66123),b=g(6058),d=g(2241),O=g(80822),k=g(51490);function v(c,y,f,o,t,a,i,s){var r;if(_.isEmpty(y.forecastLines))if(y.hasDynamicSeries){var e=c.getLocalizedString("Role_DisplayName_Legend");r=c.getLocalizedString("Visual_AnomalyDetection_WarningMessage_RoleNotAllowed",e)}else if((0,M.aJ)(y.valuesMetadata,m.R.Y2))e=c.getLocalizedString("Role_DisplayName_Y2"),r=c.getLocalizedString("Visual_AnomalyDetection_WarningMessage_RoleNotAllowed",e);else if(1!==y.series.length)e=c.getLocalizedString("Role_DisplayName_Values"),r=c.getLocalizedString("Visual_AnomalyDetection_WarningMessage_WrongDataSeries",e);else if(function(c){var y,f,o;B.fF.assertValue(c,"anomalyDetectionVisualPlugin hasDatetime dataView");var t=null===(y=c.categorical)||void 0===y?void 0:y.categories;if(B.fF.assert(function(){return _.size(t)>0},"should exist at least one category"),!t||0===_.size(t))return!1;var a=null===(f=_.first(t).source)||void 0===f?void 0:f.type;return!!a&&(!!a.dateTime||!(null===(o=a.temporal)||void 0===o||!o.year)||!!a.temporal&&_.some(c.metadata.columns,function(i){var s;return null===(s=i.type.temporal)||void 0===s?void 0:s.year}))}(f))if(i){if(function(c){var y;B.fF.assertValue(c,"anomalyDetectionVisualPlugin hasReferenceLine dataView");var f=null===(y=c.categorical)||void 0===y?void 0:y.values;return B.fF.assert(function(){return _.size(f)>0},"should exist at least one categorical value"),!(!f||0===_.size(f))&&_.some(f,function(o){return!!o.source.objects&&!!o.source.objects[O.Si]})}(f)){var L=c.getLocalizedString("Visual_Trend_Line"),H=c.getLocalizedString("Visual_Reference_Line");r=c.getLocalizedString("Visual_AnomalyDetection_WarningMessage_NoWithReferenceLine",L,H)}}else{var S=c.getLocalizedString("Type"),C=c.getLocalizedString("Visual_XAxis"),D=c.getLocalizedString("Visual_Axis_Scalar");r=c.getLocalizedString("Visual_AnomalyDetection_WarningMessage_NoContinousCategory",S,C,D)}else e=c.getLocalizedString("Role_DisplayName_Axis"),r=c.getLocalizedString("Visual_AnomalyDetection_WarningMessage_CategoryNotDateTime",e);else r=c.getLocalizedString("Visual_AnomalyDetection_WarningMessage_NoWithForecast");!function(c,y,f,o,t){var a;B.fF.assertValue(c,"enumeration"),B.fF.assertValue(f,"visualStyle"),B.fF.assertAnyValue(o,"disabledReason"),B.fF.assertAnyValue(t,"selectors");var i=function(L){var H,N;return(0,h.__assign)((0,h.__assign)(((H={})[O.MA.show]=L.show,H[O.MA.displayName]=L.displayName,H),function(c,y,f){var o={};return w.Wz.forEach(function(t){y[t]&&(o[y[t]]="color"===t?(0,b.Q)(c?.color):c?.[t])}),Object.assign(o,(0,d.HM)(c.stroke,y)),o}(L.marker,w.m6)),((N={})[O.MA.confidenceBandShow]=L.band.show,N[O.MA.confidenceBandStyle]=L.band.style,N[O.MA.transparency]=L.band.transparency,N[O.MA.confidenceBandColor]={solid:{color:L.band.color}},N))},s=_.first(y);if(s){if(c.pushInstance({selector:s.selector,properties:i(s),objectName:O.xn}),t)for(var r=(0,V.GT)((0,V.tV)(t)),e=0,S=s.anomalies;e<S.length;e++){var C=S[e];C.isAnomaly&&(r||(0,V.Ic)(C.identity.getSelectorsByColumn(),t))&&c.pushInstance({objectName:O.r3,selector:(0,V.tV)(C.identity.getSelectorsByColumn()),properties:(a={},a[O.K1.CategoryValue]=C.categoryValue,a[O.K1.Value]=C.value,a[O.K1.ExpectedValue]=C.expectedValue,a[O.K1.ExpectedLow]=C.lowerBound,a[O.K1.ExpectedHigh]=C.upperBound,a[O.K1.BatchStart]=C.batchStart,a[O.K1.BatchEnd]=C.batchEnd,a[O.K1.FormattedCategoryValue]=C.formattedCategoryValue,a[O.K1.ValueFormatString]=C.valueFormatString,a)})}}else c.pushInstance({selector:{id:"0"},properties:i((0,k.EL)(f)),objectName:O.xn,disabledReason:o})}(o,t,a,r,s)}},42589:function(be,Z,g){g.d(Z,{WI:function(){return t},bj:function(){return e},ec:function(){return k},v8:function(){return r}});var o,h=g(64067),B=g(79154),V=g(62458),M=g(65195),m=g(51995),w=g(47998),b=g(80822),d=(0,B.CH)("anomaly-confidence-interval"),P=(0,B.CH)("anomaly-lower-layer"),O=(0,B.CH)("anomaly-higher-layer"),k=(0,B.CH)("anomaly-point"),x=.5,v=1,p="".concat(M.oe).concat(k.selector),n="".concat(M.$u).concat(k.selector),c="".concat(M.NN).concat(k.selector),y=1.4,f=2;function t(S,C,D,L,H,N,U){V.fF.assertValue(C&&D&&L&&N?.onSelecting,"renderAnomalies parameters");var Q=C.select(P.selector);Q.empty()&&(Q=C.insert("g",":first-child").classed(P.class,!0));var ne=C.select(O.selector);ne.empty()&&(ne=C.append("g").classed(O.class,!0)),function(S,C,D,L,H){var N=d3.line().x(function(U){return D(U.x)}).y(function(U){return L(U.y)});C.selectAll(d.selector).data(S||[],function(U){return U.selector.id}).join(function(U){return U.insert("path",":first-child").classed(d.class,!0)}).call(function(U){return(H?U.transition().ease(d3.easeLinear).duration(H):U).attr("d",function(Q){for(var ne=[],Y=0,W=Q.anomalies.slice().reverse();Y<W.length;Y++)ne.push({x:(I=W[Y]).categoryValue,y:I.lowerBound});for(var E=0,u=Q.anomalies;E<u.length;E++){var I;ne.push({x:(I=u[E]).categoryValue,y:I.upperBound})}return N(ne)}).styles(function(Q){var ne=(0,h.TD)(Q.band.transparency);return{"fill-opacity":ne,"stroke-opacity":ne,stroke:Q.band.show&&Q.band.style===w.X$.line?Q.band.color:"transparent",fill:Q.band.show&&Q.band.style===w.X$.fill?Q.band.color:"transparent"}})})}(S,Q,D,L,H),function(S,C,D,L,H,N,U){var Q=_.first(S),ne=[];Q&&(ne=_.filter(Q.anomalies,function(I){return I.isAnomaly}));var Y=C.selectAll(k.selector).data(ne,function(I){return I.categoryValue.toString()}),W=Y.enter().append("path").classed(k.class,!0).merge(Y);(H?W.transition().ease(d3.easeLinear).duration(H):W).attr("d",function(){return(0,m.jM)(Q.marker.shape,1)}),W.attr("transform",function(I){var E=D(I.categoryValue),u=L(I.value),l=L.range()[0]>L.range()[1],T=I.value>I.expectedValue&&l?-f*Q.marker.size:f*Q.marker.size,R=I.value>I.expectedValue&&l?0:180;return"translate(".concat(E,",").concat(u+T,") rotate(").concat(R,") scale(").concat(Q.marker.size,")")}),W.each(function(){d3.select(this).style("fill",Q.marker.color).style("stroke",Q.marker.color).attr("vector-effect","non-scaling-stroke").style("stroke-width",1.5).style("stroke-opacity",1).style("fill-opacity",function(E){return this===o||E.isHighlighted?v:x}).on(c,function(E){U&&function(S,C,D){o?o===S?(d3.select(S).style("fill-opacity",x),o=void 0):(d3.select(o).style("fill-opacity",x),o=S,d3.select(o).style("fill-opacity",v)):(o=S,d3.select(o).style("fill-opacity",v)),o&&D({type:0,visualObjects:[{objectName:b.r3,selectorsByColumn:C.identity.getSelectorsByColumn()}]}),d3.event.stopPropagation()}(this,E,N)}).on(n,function(){U&&d3.select(this).style("fill-opacity",v)}).on(p,function(){U&&this!==o&&d3.select(this).style("fill-opacity",x)})}),Y.exit().remove()}(S,ne,D,L,H,N.onSelecting,U)}function r(S,C,D){var L=S.value>S.expectedValue?-f*D:f*D;return C(S.value)+L}function e(S){return S*y}},40006:function(be,Z,g){g.d(Z,{B:function(){return V}});var h=g(62458),B=g(72902),V=function(){function M(){}return M.prototype.update=function(m,w,b,d,P){this.anomalies=m,this.scrolledData=w,this.focusedDatum=b,this.updateFocusElement=d},M.prototype.getFirstElement=function(m,w){if(void 0===w&&(w=!1),null!=m){var d;if((d=(w?_.findLast:_.find)(this.anomalies,function(O){return O.categoryIndex>=m&&O.isAnomaly}))&&this.scrolledData&&-1===this.scrolledData.categories.indexOf(d.categoryValue))return{element:null};if(d)return this.focusedDatum=d,{element:this.updateFocusElement(d).node()}}},M.prototype.getNextDataPoint=function(m,w,b){var d=this.focusedDatum;switch(b){case B.x0.NextCategory:case B.x0.PreviousCategory:var P=_.findIndex(this.anomalies,function(k){return k&&k.categoryIndex===m});d=this.pickNextAvailableIndex(this.anomalies,P,b);break;case B.x0.NextSeries:case B.x0.PreviousSeries:break;default:h.fF.assertNever(b)}if(d)return this.scrolledData&&-1===this.scrolledData.categories.indexOf(d.categoryValue)?{element:null,targetCategoryIndex:d.categoryIndex}:(this.focusedDatum=d,{element:this.updateFocusElement(d).node(),targetCategoryIndex:d.categoryIndex})},M.prototype.pickNextAvailableIndex=function(m,w,b){h.fF.assert(function(){return b===B.x0.NextCategory||b===B.x0.PreviousCategory},"pickNextAvailableIndex direction");var d=b===B.x0.NextCategory?1:-1,P=w;do{if((P+=d)>=m.length?P=0:P<0&&(P=m.length-1),P===w)break}while(!m[P]||!m[P].isAnomaly);return m[P]},M}()},37274:function(be,Z,g){g.d(Z,{DR:function(){return h},LO:function(){return B},_F:function(){return V}});var h=function(){function M(){}return M.prototype.willCollide=function(m){return!1},M.prototype.addItem=function(m){},M.prototype.skipItem=function(m){},M}(),B=function(){function M(m,w,b){this.fontOffsetLeft=w,this.fontOffsetRight=b,this.previousLabelRightEdge=m}return M.prototype.willCollide=function(m){return m-this.fontOffsetLeft<=this.previousLabelRightEdge},M.prototype.addItem=function(m){this.previousLabelRightEdge=m+this.fontOffsetRight},M.prototype.skipItem=function(m){},M}(),V=function(){function M(m,w,b,d,P,O,k){this.fontOffsetLeft=w,this.fontOffsetRight=b,this.currentNode=d,this.scale=P,this.halfCategoryThickness=O,this.rotationPadding=k,this.previousLabelRightEdge=m,this.index=0;var x=M.getLastChildIndex(d,0);this.groupEndPosition=P(x)+O-k}return M.prototype.willCollide=function(m){return M.isLastChild(this.currentNode)?m-this.fontOffsetLeft<=this.previousLabelRightEdge:m+this.fontOffsetRight>this.groupEndPosition},M.prototype.addItem=function(m){this.moveToNextNode(m)},M.prototype.skipItem=function(m){this.moveToNextNode(m)},M.prototype.moveToNextNode=function(m){var w=this.currentNode,b=this.currentNode=this.currentNode.next;if(this.index++,M.isLastChild(w)){this.previousLabelRightEdge=this.groupEndPosition+2*this.rotationPadding;var d=M.getLastChildIndex(b,this.index);this.groupEndPosition=this.scale(d)+this.halfCategoryThickness-this.rotationPadding}else this.previousLabelRightEdge=m+this.fontOffsetRight},M.isLastChild=function(m){return null==m.next||m.parent!==m.next.parent},M.getLastChildIndex=function(m,w){for(var b=m,d=w;!M.isLastChild(b);)d++,b=b.next;return d},M}()},11856:function(be,Z,g){g.d(Z,{D:function(){return V}});var h=g(38265),V={card:{maxFontSize:200},label:{textSize:12,fontFamily:g(56707).Pq,colorName:"foregroundNeutralTertiary",paddingTop:8},value:{textSize:27,colorName:"foreground",fontFamily:h.Wn.regularSecondary.css}}},32554:function(be,Z,g){g.d(Z,{jN:function(){return k},k2:function(){return O},xr:function(){return x},y0:function(){return v}});var h=g(81337),B=g(62458),V=g(56578),M=g(32379),m=g(82755),w=g(91059),b=g(96915),d={objectName:"dataPoint",propertyName:"showAllDataPoints"};function O(n,c,y){if(n.dataView){var f={fill:{objectName:"dataPoint",propertyName:"fill"},showAllDataPoints:{objectName:"dataPoint",propertyName:"showAllDataPoints"}},o=new V.CQ(new V.lg("colors"),"Visual_Colors",f,function(t){return y.getLocalizedString(t)});return o.addGroup("colors",function(t){k({colorProps:f,featureSwitches:c,groupBuilder:t,hostService:y,options:n})}),o.build()}}function k(n){var e,c=n.groupBuilder,y=n.colorProps,f=n.featureSwitches,o=n.options,t=o.categories,a=o.dataView.metadata&&o.dataView.metadata.objects,i=(0,m.NA)(a,d,!!o.showAllDataPoints),s=function(n,c){return(0,m.W7)(n,{objectName:"dataPoint",propertyName:"fill"})||(0,m.W7)(n,{objectName:"dataPoint",propertyName:"defaultColor"})||c.colorPalette.dataColors.getColorByIndex(0).value}(a,o.style),r=o.fillInstanceKind;if(null==r&&(r=3),1&r&&(e=null),y.fill){var S=(0,h.__assign)((0,h.__assign)({},y.fill),{selector:{data:[(0,b.Ue)(1)]},altConstantValueSelector:e,instanceKind:r});o.noDefaultFillColor?o.hideShowAllToggle&&c.addSimpleSlice("defaultColor",new V.tL({descriptor:S,value:void 0}).build(),function(D){return D.withCustomDisplayName("PropertyPane_ConditionalFormatting_DialogLauncherSliceTitle")}):c.addSimpleSlice("defaultColor",new V.BT({descriptor:S,value:{value:s}}).build(),function(D){return D.withCustomDisplayName("Default")})}y.showAllDataPoints&&!o.hideShowAllToggle&&c.addSimpleSlice(o.disableShowAllToggle?"showAllDisabled":"showAll",new V.bd({descriptor:(0,h.__assign)((0,h.__assign)({},d),{selector:{data:[(0,b.Ue)(1)]},altConstantValueSelector:e}),value:(0,m.NA)(a,d,!!o.showAllDataPoints)}).build(),function(D){return D.withDisabled(o.disableShowAllToggle)});var C=function(L){for(var H=function(ne,Y){var W=t[ne],I=(0,M.fd)(W.identity.getSelector());o.multipleRole&&(I=(0,M.d9)(I),B.fF.assert(function(){return!!I.data},"expect categories to have some data identity"),I.data.unshift((0,w.Yp)([o.multipleRole])));var E=f.onObjectFormatPaneUid?"datapoint":W.displayName;E=o.disableShowAllToggle?"".concat(E,"Disabled"):E,c.addSimpleSlice(E,new V.BT({descriptor:(0,h.__assign)((0,h.__assign)({},y.fill),{selector:I,instanceKind:1}),value:{value:W.color||s}}).build(),function(u){return L?u.withCustomDisplayName(W.displayName,!1).withDisabled(o.disableShowAllToggle).withHidden(!i):u.withCustomDisplayName(W.displayName,!1).withDisabled(o.disableShowAllToggle)})},N=0,U=t.length;N<U;N++)H(N)};f.onObject?C(f.onObject):i&&C()}function x(n,c,y){var f={fill:{objectName:"dataPoint",propertyName:"fill"}},o=function(i){return c.getLocalizedString(i)},t=new V.CQ(new V.lg("colors"),"Visual_Colors",f,o);return t.addGroup(void 0,function(a){v({groupBuilder:a,dataPoints:n,seriesColorProps:f,localize:o,featureSwitches:y})}),t.build()}function v(n,c){for(var y=n.groupBuilder,f=n.dataPoints,o=n.seriesColorProps,t=n.localize,a=n.featureSwitches,i=function(S,C){var D=f[S],L=D.displayName||t("DataPointColorTitle"),H=(0,M.fd)(D.identity.getSelector()),N=void 0;a.onObjectFormatPaneUid?(N="datapoint",c&&(N="".concat(N,"-").concat(S))):N=L,y.addSimpleSlice(N,new V.BT({descriptor:(0,h.__assign)((0,h.__assign)({},o.fill),{selector:H,instanceKind:1}),value:{value:D.color}}).build(),function(U){return U.withCustomDisplayName(L,!1).withDisabled(c&&!(0,M.fS)(c,H))})},s=0,r=f?.length;s<r;s++)i(s)}},84183:function(be,Z,g){g.d(Z,{Z:function(){return O}});var h=g(81337),B=g(56578),V=g(62458),M=g(32379),m=g(43539);function O(x,v,p,n,c){var y=function(x,v){if(_.isEmpty(x))return[];V.fF.assertValue(v,"objectDescriptors");for(var p=[],n=function(t){for(var a in t.objects){var i=t.objects[a]&&t.objects[a].formattingProperties;if(!_.isEmpty(i))for(var s=0,r=i;s<r.length;s++){var S={objectName:a,propertyName:r[s]},C=(0,m.VM)(v,S),D=void 0;t.allowOverrideSubtotalMatching&&(V.fF.assert(function(){return(0,M.N6)(t.selector)},"allowOverrideSubtotalMatching is only supported for Wildcard Selectors"),D=!0),C&&p.push({selector:t.selector,allowOverrideSubtotalMatching:D,altStaticSelector:t.altStaticSelector,propertyId:S,propertyDescriptor:C,containerName:t.containerName})}}},c=0,y=x;c<y.length;c++)n(y[c]);return p}(x,p);if(!_.isEmpty(y)){var f=[],o=_.groupBy(y,function(a){return a.containerName}),t=new B.CQ(new B.lg("conditionalFormatting"),n,f,v);return t.withDescription(c).withAliasName("FieldWell_ConditionalFormatting"),t.addGroup("options",function(a){a.withDisplayName("Apply_Settings_To").withCollapsible(!1).addContainer("series",function(i){i.withDisplayName("Series"),Object.keys(o).forEach(function(s){var r=o[s];i.addContainerItem(s.replace(" ",""),s,function(e){return function(x,v,p,n){v.addGroup("cellElements",function(c){for(var y=0,f=x;y<f.length;y++){var o=f[y];c.addSimpleSlice(o.propertyId.propertyName,new B.M$({descriptor:(0,h.__assign)((0,h.__assign)({},o.propertyId),{selector:o.selector}),displayName:p,value:o}).build()),_.some(n,o.propertyId)||n.push(o.propertyId)}})}(r,e,s,f)})})})}),t.build()}}},7490:function(be,Z,g){function h(B,V){return _.find(B.cases,function(M){return M.pattern===V})||B.defaultCase}g.d(Z,{A:function(){return h}})},45028:function(be,Z,g){g.d(Z,{_I:function(){return O},_u:function(){return k},qQ:function(){return P},w9:function(){return d}});var h=g(81337),B=g(32041),V=g(43479),M=g(20624),m=g(382),w=g(56707),b=g(18664),d=200;function P(i,s,r){var e=function(i,s,r){var e=a(i,s,"width"),S=a(i,s,"height"),C=r.parentShape;return{width:e,height:S,top:C?.rect?C.rect.top:0,left:C?.rect?C.rect.left:0}}(i,s,r),S=Math.floor(function(i,s,r){var e=s.parentShape,S=i.optimizeLabelDisplay?i.labelContainerMaxWidth:d;if(i.position===m.h.auto&&!function(i){return[m.h.insideBase,m.h.insideCenter,m.h.insideEnd].includes(i.position)}(i))return S;var C=function(i){if(!i?.rect)return i;var s={horizontalBuffer:2*w.Bo,verticalBuffer:2*w.d1},r=s.horizontalBuffer,e=s.verticalBuffer,S=(0,h.__assign)((0,h.__assign)({},i.rect),{width:i.rect.width-r,height:i.rect.height-e});return(0,h.__assign)((0,h.__assign)({},i),{rect:S})}(e),D=function(i,s,r){if(!s?.rect)return!1;var e=r.width,S=r.height,C=s.rect,D=C.width,L=C.height;switch(i.labelOrientation){case M.B.Horizontal:return e<=D&&S<=L;case M.B.Vertical:return e<=L&&S<=D;default:return!0}}(i,C,r);return D||!e?.orientation?S:i.labelOverflow?i.labelOverflow&&!i.optimizeLabelDisplay?d:S:Math.min(S,i.labelOrientation===M.B.Horizontal?C.rect.width:C.rect.height)}(s,r,e));(function(i,s,r){switch(i.position){case m.h.insideEnd:case m.h.insideBase:case m.h.insideCenter:return i.labelOverflow&&i.optimizeLabelDisplay||s.width>=r;case m.h.above:case m.h.outsideEnd:case m.h.under:return i.optimizeLabelDisplay&&s.width>=r;case m.h.auto:return i.optimizeLabelDisplay;default:return!1}})(s,e,S)&&k(i,S,s.labelContentLayout)}function O(i,s){var r=(0,b.qk)(i,s);return{width:B.b.measureSvgTextWidth(r),height:B.b.estimateSvgTextHeight(r,!0)}}function k(i,s,r,e){void 0===e&&(e=0);for(var S=i.length,C=s,D=0,L=0,H=i;L<H.length;L++){var N=H[L],U=Math.floor(C/S);if(N.textSize.width>=U){var Q=(0,b.qk)(N.fontProperties,N.text);N.text=B.b.getTailoredTextOrDefault(Q,U),Q.text=N.text;var ne=N.textSize.width;N.textSize={width:B.b.measureSvgTextWidth(Q),height:B.b.estimateSvgTextHeight(Q,!0)},D+=ne-N.textSize.width}S--}if((C-=D)<0)!function(i,s){if(!(i>=0)){var r=s.every(function(S){return B.b.isFullyTruncated(S.text)});if(r)for(;i<0&&s.length>1;)i+=s.pop().textSize.width}}(C,i);else{var Y=function(i,s){return s===V.v.SingleLine?i.reduce(function(r,e){return r+e.textSize.width},0):Math.max.apply(Math,i.map(function(r){return r.textSize.width}))}(i,r);Y>s&&e<5&&k(i,s,r,e+1)}}function a(i,s,r){for(var e=0,S=0,C=i;S<C.length;S++){var L=C[S].textSize[r];s?.labelContentLayout===V.v.SingleLine?e+=L+w.uM:e=Math.max(e,L)}return e}},34519:function(be,Z,g){g.d(Z,{U:function(){return k}});var h=g(81337),B=g(93907),V=g(43479),M=g(71793),m=g(56707),w=g(45028),b=g(46769),d=g(20624),P=g(92374),O=g(5381);function k(c){var y,f,o=c.cartesianDataPoint,t=c.labelDataPoint,a=c.enableValueDataLabel,i=c.valueDataLabelSettings,s=c.valueShowBlankAs,r=[];if(!_.isEmpty(o.appendedLabelContents))for(var e=0,S=o.appendedLabelContents;e<S.length;e++){var D=x(S[e],c);D&&r.push(D)}if(a&&(t.text||s)){var L=(0,w._I)(t.fontProperties,t.text);r.push({text:null!==(y=t.text)&&void 0!==y?y:s,outsideFill:t.outsideFill,insideFill:t.insideFill,fontProperties:t.fontProperties,textSize:L,transparency:t.transparency,role:"Value"})}var H=1===r.length?V.v.SingleLine:i?.labelContentLayout,N=null!==(f=i?.horizontalAlignment)&&void 0!==f?f:i?.labelOrientation===d.B.Vertical?P.D.left:P.D.center,U=(0,h.__assign)((0,h.__assign)({},t),{labelDataPointContents:r,contentLayout:H,alignment:N});return(0,w.qQ)(r,i,t),U}function x(c,y){var o=function(c,y,f){var o,t,a,i,s="",r=c?.fontProperties,e=0;switch(y.role){case"Detail":s=function(c,y){var o=y.percentOfTotal,t=y.formattersCache,a=y.currentSeries,i=y.currentAxisProperties,s=c.labelSettings,r=s??{},S=r.detailLabelPrecision,C=r.detailLabelDisplayUnits,D=r.detailShowBlankAs,L="";if(y.isStacked100&&r.detailContentType===B.W.Percent)L=t.getOrCreate(m.L0,s,void 0,S).format(o);else{var N=(0,h.__assign)((0,h.__assign)({},s),{precision:C===m.In?void 0:S,displayUnits:C}),U=(0,O.d6)(i,N);L=(0,b.nU)(c.dynamicLabel,t,N,U,a,c.role)}return L??D??""}(y,f),r=null===(o=y?.labelSettings)||void 0===o?void 0:o.detailFontProperties,e=null!==(t=c?.detailTransparency)&&void 0!==t?t:0;break;case"Title":s=function(c,y){var f=y.formattersCache,o=y.currentSeries,t=y.currentAxisProperties,a=y.seriesName,i=c.labelSettings,s=i??{},e=s.titleLabelPrecision,S=s.titleLabelDisplayUnits,C=s.titleShowBlankAs;if(s.titleContentType===M.A.Custom){var D=(0,h.__assign)((0,h.__assign)({},i),{precision:S===m.In?void 0:e,displayUnits:S}),L=(0,O.d6)(t,D);return(0,b.nU)(c.dynamicLabel,f,D,L,o,c.role)??C??""}return a}(y,f),e=null!==(a=c?.titleTransparency)&&void 0!==a?a:0,r=null===(i=y.labelSettings)||void 0===i?void 0:i.titleFontProperties}return{text:s,fontProperties:r,transparency:e}}(c.labelSettings,c,y),t=o.text,a=o.fontProperties,i=o.transparency;if(t){var s=(0,w._I)(a,t);return{text:t,outsideFill:y.getOutsideLabelFill(c),insideFill:y.getInsideLabelFill(c),fontProperties:a,transparency:i,textSize:s,role:c.role}}}},19744:function(be,Z,g){function h(V){return V.some(function(M){return B(M)})}function B(V){return V&&typeof V.labelDataPointContents<"u"}g.d(Z,{r:function(){return B},t:function(){return h}})},5381:function(be,Z,g){g.d(Z,{$J:function(){return ue},AE:function(){return ee},Bf:function(){return Pe},Bw:function(){return $e},R1:function(){return at},SS:function(){return ct},Sw:function(){return it},W1:function(){return ve},Xc:function(){return Ee},d6:function(){return Fe},fI:function(){return te},gm:function(){return me},in:function(){return pe},n8:function(){return Te},ng:function(){return He},x5:function(){return Ue},z8:function(){return Ve}});var t,a,i,r,e,S,h=g(79154),B=g(62458),V=g(79476),M=g(80758),m=g(32041),w=g(64329),b=g(66001),d=g(28326),P=g(20624),O=g(38168),k=g(53197),x=g(41368),v=g(56707),p=g(19744),n=g(18664),c=g(60066),y=g(2241),f=g(51660),o=g(95519),C=(t=(0,h.CH)("label")).class,D=t.selector,L=(a=(0,h.CH)("label-container")).class,H=a.selector,N=(i=(0,h.CH)("label-tspan")).class,U=i.selector,Q=(0,h.CH)("label-background").class,Y=(r=(0,h.CH)("seriesLabel")).class,W=r.selector,I=(e=(0,h.CH)("label-second-line")).class,E=e.selector,u=(S=(0,h.CH)("label-container-background")).class,l=S.selector,T="-0.25em",R=5,A=(0,h.CH)("leader-lines"),z=(0,h.CH)("line-label"),K=4;function te(){return new x.R}function ee(j){var ge,se=j.labelContainers,fe=j.onObject,Ce={transform:function(We){var F="translate(".concat(function(j){return j.boundingBox.left+j.boundingBox.width/2}(We),",").concat(function(j){var se=j.labelOrientation===P.B.Vertical?j.boundingBox.height:j.boundingBox.height/2;return j.wordBreak&&(se=j.boundingBox.height/2),j.boundingBox.top+se}(We),")");return We.labelOrientation===P.B.Vertical?"".concat(F,"rotate(-90)"):F},dy:T},ae=j.labelGroupContext.selectAll(H).data(se,mt),we=se.some(function(Me){return!_.isEmpty(Me.labelContents)}),he=se.some(function(Me){return Me.hasBackground});return we&&(ge=ae.enter().append("g").merge(ae).classed(L,!0).attrs(Ce),he&&function(j,re){var se=j.selectAll(l).data(function(ae){return[ae]}),fe=se.enter().insert("rect","text").classed(u,!0).merge(se),Ce=new Map;fe.interrupt().filter(function(ae){return ae.hasBackground}).each(function(ae){var we=0,he=0,ge=ae.labelOrientation===P.B.Vertical,Re=Xe(ae.labelContents,ge,!0),Me=2*v.d1+Re,We=2*v.Bo;"MultiLine"===ae.contentLayout?(we=ge?ae.boundingBox.width+Me:ae.boundingBox.width+We,he=ge?ae.boundingBox.height+We:ae.boundingBox.height+Me):(we=ge?ae.boundingBox.height+We:ae.boundingBox.width+We,he=ge?ae.boundingBox.width+Me:ae.boundingBox.height+Me),Ce.set(ae.identity.getKey(),{calculatedWidth:we,calculatedHeight:he})}).attr("rx",K).attr("ry",K).attr("width",function(ae){return Ce.get(ae.identity.getKey()).calculatedWidth}).attr("height",function(ae){return Ce.get(ae.identity.getKey()).calculatedHeight}).attr("x",function(ae){return ae.labelOrientation===P.B.Vertical?0:Ce.get(ae.identity.getKey()).calculatedWidth/-2}).attr("y",function(ae){return Ce.get(ae.identity.getKey()).calculatedHeight/-2}).style("fill",function(ae){return ae.backgroundColor}).style("fill-opacity",function(ae){return 1-ae.backgroundTransparency}),re&&Ct(fe,function(ae){return ae.hasBackground}),se.exit().remove(),fe.exit().remove()}(ge,j.onObject),function(j){var re=j.selectAll(D).data(function(he){return[he]}),Ce=re.enter().append("text").merge(re).attr("x",function(he){return function(ge){return ge.labelOrientation===P.B.Vertical?v.Bo:ge.boundingBox.width/-2}(he)}).attr("y",function(he){return function(ge){var Re="MultiLine"===ge.contentLayout,F=Xe(ge.labelContents,ge.labelOrientation===P.B.Vertical,ge.hasBackground);return Re?(ge.boundingBox.height+F)/-2:-((ge.hasBackground?ge.labelOrientation===P.B.Vertical?v.d1:v.Bo:0)+F)}(he)}).style("text-anchor",function(he){return he.textAnchor}).classed(C,!0);Ce.selectAll("tspan").remove();var ae=Ce.interrupt().selectAll(U).data(function(he){return function(j){var re=j.labelContents.sort(function(Me,We){return Qe[Me.role]-Qe[We.role]}),se=1===re.length,fe="MultiLine"===j.contentLayout,ae=j.hasBackground?j.labelOrientation===P.B.Vertical?v.d1:v.Bo:0,we=j.alignment,he=j.boundingBox.width,ge=function(We){return We.textSize.height+v.i1},Re=function(We){if(j.labelOrientation===P.B.Vertical)switch(we){case"center":return(he-We.textSize.width)/2;case"left":default:return ae;case"right":return he-ae-We.textSize.width}else switch(we){case"center":default:return-We.textSize.width/2;case"left":return-(he-2*ae)/2;case"right":return(he-2*ae)/2-We.textSize.width}};return re.map(function(Me,We){return fe&&!se?{x:Re(Me),y:null,label:Me,dx:null,dy:ge(Me),id:We}:{x:null,y:0,label:Me,dx:We>0?v.uM:ae,dy:".35em",id:We}})}(he)},function(he){return he.label.role}),we=ae.enter().append("tspan").merge(ae);we.interrupt().attr("x",function(he){return he.x}).attr("y",function(he){return he.y}).attr("dx",function(he){return he.dx}).attr("dy",function(he){return he.dy}).text(function(he){return he.label.text}).styles(function(he){return(0,n.E_)(he.label.fontProperties)}).style("fill-opacity",function(he){var ge;return null!==(ge=1-he.label.transparency)&&void 0!==ge?ge:0}).classed(N,!0),re.exit().remove(),ae.exit().remove(),we.exit().remove()}(ge),ge.style("pointer-events",function(Me){return We=Me,j.onObject?j.formatMode&&We.hasBackground||!j.formatMode&&(!j.hasTooltip||null==We.tooltip)?"none":"all":j.hasTooltip&&null!=We.tooltip?"all":"none";var We})),ge&&((!he||!we)&&ge.selectAll(l).remove(),ge.filter(function(Me){return!Me.hasBackground}).selectAll(l).remove()),fe&&Ct(ge,function(Me){return!Me.hasBackground}),ae.exit().remove(),ge}function ue(j){var re;null===(re=j.selectAll(H))||void 0===re||re.remove()}function pe(j){var re;null===(re=j.selectAll(l))||void 0===re||re.remove()}function me(j){var re=Ue(j);return He({context:j.backgroundContext,dataLabels:j.dataLabels,onObject:j.onObject}),re}function Pe(j){var re=Ee(j.labelContext,j.dataLabels,j.duration,j.numeric,j.easeType,j.onObject);return function(j,re,se,fe,Ce){var ae=_.filter(re,function(ge){return ge.hasBackground}),we=j.selectAll("rect").data(ae,mt);we.enter().append("rect").style("fill-opacity",0).merge(we).transition().ease(Ce).duration(se).attrs({x:function(Re){return Re.boundingBox.left-v.Bo},y:function(Re){return Re.boundingBox.top-v.d1},rx:K,ry:K,width:function(Re){return Re.boundingBox.width+2*v.Bo},height:function(Re){return void 0===Re.text&&void 0===Re.secondRowText?0:Re.boundingBox.height+2*v.d1}}).style("fill",function(ge){return ge.backgroundColor}).style("fill-opacity",function(ge){return 1-ge.backgroundTransparency}),we.exit().transition().duration(se).style("fill-opacity",0).remove()}(j.backgroundContext,j.dataLabels,j.duration,0,j.easeType),re}function Ee(j,re,se,fe,Ce,ae){void 0===fe&&(fe=!1),void 0===Ce&&(Ce=d3.easeCubicInOut);var we={transform:function(Me){var We="translate(".concat(St(Me),",").concat(vt(Me),")");return Me.labelOrientation===P.B.Vertical?"".concat(We,"rotate(-90)"):We},dy:T};fe&&(we.dy=void 0);var he=j.selectAll(D).data(re,mt),ge=he.enter().append("text").classed(C,!0).style("opacity",0).attrs(we).merge(he);return ae&&ge.classed(f.cy,!0).attr(f.Ez,function(Re){return Re.isCategory?"category-labels":"data-labels"}).attr(f.CK,"Visual_DataPointsLabels").attr(f.QZ,1),ge.text(function(Re){return Re.text}).style("text-anchor",function(Re){return Re.textAnchor}).styles(function(Re){return(0,n.E_)(Re.fontProperties)}).transition().ease(Ce).duration(se).attrs(we).style("opacity",1),he.exit().transition().duration(se).style("opacity",0).remove(),ge}function Te(j){return 11===j?{maximumOffset:c.rA,startingOffset:c.vD,offsetIterationDelta:c.YD,allowLeaderLines:!0,attemptToMoveLabelsIntoViewport:!0}:{maximumOffset:v.wh,startingOffset:v.ki,attemptToMoveLabelsIntoViewport:!0}}function Ve(j,re,se){(function(j){j.select(A.selector).empty()&&j.append("g").classed(A.class,!0)})(j),j.select(A.selector).selectAll("polyline").data(re,se).join(function(fe){return fe.append("polyline").classed(z.class,!0)}).attr("points",function(fe){return fe.leaderLinePoints}).styles(function(fe){return(0,y.bc)(fe.leaderLine)})}function Fe(j,re){return new yt(j,re)}function $e(j,re,se){return se?se.format(j):d.dx.formatValue(j,re)}function Ue(j){var re=j.dataLabels,se=j.formatMode,fe=j.hasTooltip,Ce=j.labelContext,ae=j.numeric,we=j.onObject,he=j.twoRows,ge={transform:function(G){var le="translate(".concat(St(G),",").concat(vt(G),")");return G.labelOrientation===P.B.Vertical?"".concat(le,"rotate(-90)"):le},dy:T};ae&&(ge.dy=void 0);var Re=Ce.selectAll(D).data(re,mt),Me=Re.enter().append("text").classed(C,!0).merge(Re);we&&Ct(Me,function(q){return!q.hasBackground}),Me.interrupt().text(function(q){return q.text}).attrs(ge).style("text-anchor",function(q){return q.textAnchor}).styles(function(q){return(0,n.E_)(q.fontProperties)}),Re.exit().remove(),ge={transform:function(G){return"translate(".concat(function(j){return j.boundingBox.left+j.boundingBox.width/2}(G),",").concat(function(j){return j.boundingBox.top+(void 0!==j.text?j.boundingBox.height/2:j.boundingBox.height)}(G),")")},dy:T},ae&&(ge.dy=void 0);var We=_.filter(he?re:[],function(q){return!_.isEmpty(q.secondRowText)}),F=Ce.selectAll(E).data(We,function(q,G){return q.identity?q.identity.getKeyWithoutHighlight():G.toString()}),J=F.enter().append("text").classed(I,!0).merge(F);we&&Ct(J,function(q){return!q.hasBackground}),J.interrupt().text(function(q){return q.secondRowText}).attrs(ge).style("text-anchor",function(q){return q.textAnchor}).styles(function(q){return(0,n.E_)(q.fontProperties)}),fe&&(Me.append("title").text(function(q){return q.tooltip}),J.append("title").text(function(q){return q.tooltip}));var X=function(G){return we?se&&G.hasBackground||!se&&(!fe||null==G.tooltip)?"none":"all":fe&&null!=G.tooltip?"all":"none"};return Me.style("pointer-events",function(q){return X(q)}),J.style("pointer-events",function(q){return X(q)}),F.exit().remove(),Me}function He(j){var re=j.context,fe=j.onObject,Ce=_.filter(j.dataLabels,function(he){return he.hasBackground}),ae=re.selectAll("rect"),we=(ae=ae.data(Ce,mt)).enter().append("rect").merge(ae);return we.classed(Q,!0).attr("x",function(he){return he.boundingBox.left-v.Bo}).attr("y",function(he){return he.boundingBox.top-v.d1}).attr("rx",K).attr("ry",K).attr("width",function(he){return he.boundingBox.width+2*v.Bo}).attr("height",function(he){return void 0===he.text&&void 0===he.secondRowText?0:he.boundingBox.height+2*v.d1}).style("fill",function(he){return he.backgroundColor}).style("fill-opacity",function(he){return 1-he.backgroundTransparency}),fe&&Ct(we,function(he){return he.hasBackground}),ae.exit().remove(),we}function ct(j,re,se,fe){if(null==re||0===re)return se;var Ce=re/100,ae=Math.ceil(j/fe);return 1===Ce?ae:se+Math.floor(Ce*(ae-se))}function at(j){return(0,p.t)(j)?function(j){var re=new Set,se=new Set;return j.filter(function(fe){var Ce=fe.labelDataPointContents.map(function(we){return we.text}).join("|"),ae=1===fe.parentType;return!(re.has(Ce)&&Ie(fe,Array.from(se),ae)||(re.add(Ce),se.add(fe.parentShape),0))})}(j):function(j){for(var re=[],se={},fe=0,Ce=j;fe<Ce.length;fe++){var ae=Ce[fe];if(B.fF.assertValue(ae,"dataPoint"),null!=ae){var we=ae,ge=se[we.text];ge?Ie(we,ge,1===we.parentType)||(re.push(we),ge.push(we.parentShape)):(re.push(we),se[we.text]=[we.parentShape])}}return re}(j)}function ve(j,re,se,fe,Ce,ae,we){void 0===Ce&&(Ce=0),void 0===ae&&(ae=!1),void 0===we&&(we=!1);var he=m.b.estimateSvgTextHeight(re)+Ce,ge=Math.max(1,Math.floor(fe/he));return(0,b.ql)(j,re,m.b.measureSvgTextWidth,se,ge,null,!1,ae,we)}function Xe(j,re,se){return j.length>1&&!re?(j.length-1)*v.i1-(se?v.d1:0):0}var Ie=function(re,se,fe){return se.some(function(Ce){return fe?(0,M.fS)(re.parentShape.rect,Ce.rect):(0,V.fS)(re.parentShape.point,Ce.point)})},Qe={Title:1,Value:2,Detail:3};function Pt(j){B.fF.assertValue(j,"textElement");var re=m.b.getSvgMeasurementProperties(j);return m.b.measureSvgTextWidth(re,j.textContent)}function ht(j,re,se,fe){for(var Ce=d3.select(j),ae=m.b.estimateSvgTextHeight(se),we=Math.min(re.length,2),he=0,ge=0;ge<we;ge++){se.text=re[ge],re.length>2&&ge&&(se.text=re[ge].concat("..."));var Re=m.b.getTailoredTextOrDefault(se,fe);Ce.append("tspan").attr("id","wordWrap".concat(re[ge])).attrs({x:0,dy:ge?ae:T}).text(Re);var Me=m.b.measureSvgTextWidth(se,Re);he=Me>he?Me:he}return he}function it(j){var re,se=j.dataLabels,fe=j.seriesLabelsSettings,Ce=j.plotArea,ae=j.onObject,we=fe.position===O.M.right,he=(0,o.lr)(fe,j.availableChartWidth),ge={transform:function(Ge){var qe=we?R:-R,ut=function(j){return j.boundingBox.left+(j.hasBackground?v.Bo:0)}(Ge)+qe,wt="translate(".concat(ut,",").concat(vt(Ge),")");return Ge.labelOrientation===P.B.Vertical?"".concat(wt,"rotate(-90)"):wt},dy:T},Re=j.labelContext.selectAll(W).data(se,mt),Me=Re.enter().append("text").classed(Y,!0).merge(Re);ae&&Me.classed(f.cy,!0).attr(f.Ez,"series-labels").attr(f.CK,"Visual_SeriesLabels").attr(f.QZ,1);var We=[],F=0;Me.interrupt().text(function(ke){var Ge,qe;return fe?.wordWrap?ke.text:function(j,re,se,fe){var Ce=v.bN,ae={text:j,fontFamily:se||Ce.fontFamily,fontSize:w.FP.fromPoint(re),fontWeight:Ce.fontWeight};return m.b.getTailoredTextOrDefault(ae,fe)}(ke.text,null!==(Ge=ke.fontProperties)&&void 0!==Ge&&Ge.size?ke.fontProperties.size.pt:void 0,null===(qe=ke.fontProperties)||void 0===qe?void 0:qe.family,he)}).attrs(ge).styles(function(ke){return(0,n.E_)(ke.fontProperties)}).styles({"text-anchor":we?"start":"end","white-space":"pre"});var J=Me.nodes();if(fe?.wordWrap)for(var X=m.b.estimateSvgTextHeight(v.bN),q=null!==(re=fe?.fontProperties.size.px)&&void 0!==re?re:0,le=q+X+(Ce.height-X-q)/2,ie=0,de=J;ie<de.length;ie++){B.fF.assertValue(ce=de[ie],"textElement");var oe=ce.textContent,ye=m.b.getSvgMeasurementProperties(ce);ce.textContent=null;var _e=ht(ce,ve(oe,ye,he,Ce.height-le,void 0,!0,!0),ye,he);se[F].hasBackground&&We.push(_e),F++}else for(var Ae=0,Ye=J;Ae<Ye.length;Ae++){var ce=Ye[Ae];se[F].hasBackground&&We.push(Pt(ce)),F++}Re.exit().remove();var lt=_.filter(se,function(ke){return ke.hasBackground}),je=j.backgroundContext.selectAll("rect");return(je=je.data(lt,mt)).enter().append("rect").merge(je).attr("transform",function(ke,Ge){var qe=ke.boundingBox.left;return we||(qe-=We[Ge]),"translate(".concat(qe+=R*(we?1:-1),",").concat(function(j){var re=0;return j.wordBreak||(re=(j.boundingBox.height+2*v.d1)/4),j.boundingBox.top-re}(ke),")")}).attr("rx",K).attr("ry",K).attr("width",function(ke,Ge){return We[Ge]+2*v.Bo}).attr("height",function(ke){return void 0===ke.text&&void 0===ke.secondRowText?0:ke.boundingBox.height+2*v.d1}).style("fill",function(ke){return ke.backgroundColor}).style("fill-opacity",function(ke){return 1-ke.backgroundTransparency}),je.exit().remove(),Me}function St(j){var re=j.labelOrientation===P.B.Vertical;return j.boundingBox.left+(re?j.boundingBox.width:j.boundingBox.width/2)-(j.hasBackground&&re?v.Bo:0)}function vt(j){var re=j.labelOrientation===P.B.Vertical,se=re?j.boundingBox.height/2:j.boundingBox.height,fe=j.hasBackground&&!re?v.d1:0;return j.wordBreak&&(se=j.boundingBox.height/2,fe=-v.d1),j.boundingBox.top+se-fe}function mt(j,re){return j.key?j.key:j.identity?j.identity.getKeyWithoutHighlight():String(re)}function Ct(j,re){j.classed(f.cy,function(se){return re(se)}).attr(f.Ez,function(se){return re(se)?se.isCategory?"category-labels":se.isTotal?"total-labels":"data-labels":null}).attr(f.CK,function(se){return re(se)?se.isTotal?"Visual_DataTotalLabels":"Visual_DataPointsLabels":null}).attr(f.QZ,function(se){return re(se)?1:null})}var yt=function(){function j(re,se){if(this.noPrecision=!0,0===se.displayUnits){var fe=re.formatter;if(this.units=fe&&fe.displayUnit&&fe.displayUnit.value,null==se.precision){this.noPrecision=!1;var Ce=fe&&fe.options;if(Ce&&Ce.precision)this.precisionForAxis=re.formatter.options.precision+1;else{var ae=re.d3Axis.tickValues();ae&&ae.length&&(this.precisionForAxis=(0,k.Gv)(ae[0],ae.length>1?ae[1]:void 0,10*(this.units||1),Ce&&Ce.format))}}}}return j.prototype.getPrecision=function(re,se){if(!this.noPrecision){if(this.units)return this.precisionForAxis;if(!re)return se&&se.integer?0:this.precisionForAxis}},j}()},70903:function(be,Z,g){g.d(Z,{F:function(){return B}});var h=g(62458),B=function(){function V(M,m,w,b){this.matchObjectName=M,this.matchPropertyName=m,this.relatedTopLevelToggleValue=w,this.hasSelector=b,this.disabledBehaviorChanges=[],this.enabledBehaviorChanges=[]}return V.prototype.onToggleDisabled=function(){for(var M,m=[],w=0;w<arguments.length;w++)m[w]=arguments[w];return(M=this.disabledBehaviorChanges).push.apply(M,m),this},V.prototype.onToggleEnabled=function(){for(var M,m=[],w=0;w<arguments.length;w++)m[w]=arguments[w];return(M=this.enabledBehaviorChanges).push.apply(M,m),this},V.prototype.getBehaviorChanges=function(M){switch(M){case 2:return this.disabledBehaviorChanges;case 1:return this.enabledBehaviorChanges;default:h.fF.assertNever(M)}},V.prototype.updateBehaviorChanges=function(M,m){switch(M){case 2:this.disabledBehaviorChanges.forEach(function(w){return w.updateChange(m)});break;case 1:this.enabledBehaviorChanges.forEach(function(w){return w.updateChange(m)});break;default:h.fF.assertNever(M)}},V.prototype.getToggleBehaviorType=function(M){return this.relatedTopLevelToggleValue&&!M.propertyValue?2:!this.relatedTopLevelToggleValue&&M.propertyValue?1:0},V.prototype.isMatchingVisualObjectChange=function(M){return M.objectName===this.matchObjectName&&M.propertyName===this.matchPropertyName&&!!M.selector===this.hasSelector},V}()},3665:function(be,Z,g){g.d(Z,{v:function(){return M}});var h=g(81337),B=g(32379),M=function(m){function w(b,d,P,O){void 0===O&&(O=[]);var k=m.call(this,b,d,P,!0)||this;return k.relatedSeriesLevelToggleValues=O,k}return(0,h.__extends)(w,m),w.create=function(b,d,P){return void 0===P&&(P=[]),new w(b.objectName,b.propertyName,d,P)},w.prototype.getSeriesValueCount=function(b){return this.relatedSeriesLevelToggleValues.filter(function(d){return d.value===b}).length},w.prototype.isSelectorForSeries=function(b){return!!this.relatedSeriesLevelToggleValues.find(function(d){return(0,B.fS)(b,d.selector)})},w.prototype.shouldApplyChanges=function(b,d){var P=this.getSeriesValueCount(!0);return 0===P||1===P&&2===d&&this.isSelectorForSeries(b.selector)},w.prototype.getChanges=function(b){if(this.isMatchingVisualObjectChange(b)){var d=this.getToggleBehaviorType(b);if(0!==d&&this.shouldApplyChanges(b,d))return this.updateBehaviorChanges(d,b),this.getBehaviorChanges(d)}return[]},w}(g(70903).F)},23465:function(be,Z,g){g.d(Z,{$:function(){return V}});var h=g(81337),V=function(M){function m(w,b,d){return M.call(this,w,b,d,!1)||this}return(0,h.__extends)(m,M),m.create=function(w,b){return new m(w.objectName,w.propertyName,b)},m.prototype.getChanges=function(w){if(this.isMatchingVisualObjectChange(w)){var b=this.getToggleBehaviorType(w);if(0!==b)return this.updateBehaviorChanges(b,w),this.getBehaviorChanges(b)}return[]},m}(g(70903).F)},51650:function(be,Z,g){g.d(Z,{o:function(){return B}});var h=g(81337),B=function(){function V(){}return V.getDataViewObjectsBehaviorChanges=function(M,m){for(var w=[],b=0,d=M;b<d.length;b++)for(var P=d[b],O=0,k=m;O<k.length;O++)w.unshift.apply(w,k[O].getChanges(P));return w},V.applyDataViewObjectsBehaviorChanges=function(M,m){for(var w=(0,h.__spreadArray)([],M,!0),b=0,d=m;b<d.length;b++)w=d[b].applyChange(w);return w},V}()},57622:function(be,Z,g){g.d(Z,{W:function(){return B}});var h=g(81337),B=function(){function V(M,m,w){this.visualObjectChange=M,this.required=m,this.shouldInheritSelector=w}return V.createBooleanDataViewObjectChange=function(M,m,w){var b=(0,h.__assign)((0,h.__assign)({},M),{propertyValue:m,propertyType:{bool:!0}});return V.create(b,w)},V.createRevertToDefaultDataViewObjectChange=function(M,m){return V.create({objectName:M,propertyName:"revertToDefault",propertyValue:void 0,propertyType:{bool:!0}},m)},V.createColorDataViewObjectChange=function(M,m,w){var b=(0,h.__assign)((0,h.__assign)({},M),{propertyValue:{value:m},propertyType:{fill:{solid:{color:!0}}}});return V.create(b,w)},V.createNumericDataViewObjectChange=function(M,m,w){var b=(0,h.__assign)((0,h.__assign)({},M),{propertyValue:m,propertyType:{numeric:!0}});return V.create(b,w)},V.create=function(M,m){return m?.selector&&(M.selector=m.selector),new V(M,m?.required,m?.inheritSelector)},V.prototype.applyChange=function(M){return M.push(this.visualObjectChange),M},V.prototype.updateChange=function(M){this.shouldInheritSelector&&(this.visualObjectChange.selector=M.selector)},V}()},17591:function(be,Z,g){function h(V,M){return null==V&&null==M||null!=V&&null!=M&&V.getTime()===M.getTime()}function B(V,M){var O=Math.abs(V.valueOf()-M.valueOf());return Math.floor(O/864e5)}g.d(Z,{I:function(){return B},X:function(){return h}})},33948:function(be,Z,g){g.d(Z,{j:function(){return V}});var h=g(90120),B=g(56707);function V(M,m,w,b){return M||h.v.getThemeColor(b,m&&!w?B.pl:B.uQ)}},32476:function(be,Z,g){g.d(Z,{Me:function(){return e},ji:function(){return i}});var h=g(81337),B=g(1521),V=g(48966),M=g(64067),m=g(79154),w=g(62458),b=g(32041),d=g(48066),P=g(38078),O=g(66001),k=g(49511),v=g(18664),p=g(63194),n=g(39071),c=g(97121),y=function(){function E(u){var l=this;this.options=u,this.pageIndex=0,this.pageIndexLast=0,this.rowIndexStart=0,this.rowIndexEnd=0,this.navButtonPrev=u.viewContainer.append("button").classed("powervisuals-glyph",!0).style("background","transparent").style("flex","0 0 ".concat(20,"px")).on("click",function(){return l.renderPrevPage()}).lower(),this.navButtonNext=u.viewContainer.append("button").classed("powervisuals-glyph",!0).style("background","transparent").style("flex","0 0 ".concat(20,"px")).on("click",function(){return l.renderNextPage()})}return E.prototype.render=function(){var u=this;if(this.dataSettings){var l=this.dataSettings.rowDataStore.slice(this.rowIndexStart,this.rowIndexEnd+1),T=this.options.contentContainer.selectAll(".row").data(l,this.dataSettings.getRowDataKey);T.enter().append("div").classed("row",!0).attr("role","none").call(function(R){return u.options.enter(R)}).merge(T).call(function(R){return u.options.update(R)}).order(),T.exit().remove(),this.navButtonPrev.style("visibility",this.hasPrevPage()?null:"hidden"),this.navButtonNext.style("visibility",this.hasNextPage()?null:"hidden")}},E.prototype.data=function(u){return(!this.dataSettings||this.dataSettings.isHorizontal!==u.isHorizontal)&&this.setOrientation(u.isHorizontal),this.dataSettings=u,this.updateIndexes(u.resetPosition?0:this.pageIndex),this},E.prototype.getScrollPosition=function(){return{startIndex:this.rowIndexStart,endIndex:this.rowIndexEnd}},E.prototype.setOrientation=function(u){u?(this.options.viewContainer.style("flex-direction","row"),this.navButtonPrev.classed("chevron-up",!1).classed("left-nav-arrow",!0),this.navButtonNext.classed("chevron-down",!1).classed("right-nav-arrow",!0)):(this.options.viewContainer.style("flex-direction","column"),this.navButtonPrev.classed("chevron-up",!0).classed("left-nav-arrow",!1),this.navButtonNext.classed("chevron-down",!0).classed("right-nav-arrow",!1))},E.prototype.updateIndexes=function(u){this.pageIndexLast=Math.ceil(this.dataSettings.totalCellCount/(this.dataSettings.rowCount*this.dataSettings.columnCount))-1,this.pageIndex=Math.min(Math.max(u,0),this.pageIndexLast),this.rowIndexStart=this.pageIndex*this.dataSettings.rowCount,this.rowIndexEnd=Math.min(this.rowIndexStart+this.dataSettings.rowCount-1,this.dataSettings.rowDataStore.length-1),this.pageIndex>=this.pageIndexLast-2&&this.options.loadMoreData()},E.prototype.renderNextPage=function(){this.hasNextPage()&&(this.updateIndexes(this.pageIndex+1),this.render())},E.prototype.renderPrevPage=function(){this.hasPrevPage()&&(this.updateIndexes(this.pageIndex-1),this.render())},E.prototype.hasNextPage=function(){return this.options.scrollEnabled&&this.pageIndex<this.pageIndexLast},E.prototype.hasPrevPage=function(){return this.options.scrollEnabled&&this.pageIndex>0},E}(),f=g(51660),o=g(2241),t=g(95519),i=3;function s(E,u){var l=0===u?n.yD.selector:n.yT.selector;return E.find("".concat(n.qN.selector).concat(l))}var r=[n.yD,n.bL,n.yT],e=function(){function E(u,l,T,R,A,z,K){this.$container=u,this.loadMoreHandler=l,this.scrollEnabled=T,this.interactivityService=R,this.eventManager=A,this.boundDataKey=z,this.featureSwitches=K}return E.prototype.update=function(u){this.ensureRenderer(u);var A,z,l=u.gridLineSettings,T=u.cellPadding,R=l&&l.strokeWidth;w.fF.assert(function(){return!T.right},"Expected only left padding to be set"),w.fF.assert(function(){return!T.bottom},"Expected only top padding to be set"),A=R&&E.hasVerticalGridLines(l)?2*T.left+l.strokeWidth:2*T.left,z=R&&E.hasHorizontalGridLines(l)?2*T.top+l.strokeWidth:2*T.top,T=(0,h.__assign)((0,h.__assign)({},T),{left:A,top:z});var K=this.getUpdatedHeaderMargins(u.headerMargins),te=(0,h.__assign)((0,h.__assign)({},u.viewport),{width:Math.floor(u.viewport.width),height:Math.floor(u.viewport.height)}),ee=Math.ceil(u.subheaderHeight);this.settings=(0,h.__assign)((0,h.__assign)({},u),{cellPadding:T,headerMargins:K,subheaderHeight:ee,viewport:te})},E.prototype.ensureRenderer=function(u){u.isPaginated&&this.renderer instanceof ne||!u.isPaginated&&this.renderer instanceof Q||(this.renderer&&this.destroy(),this.renderer=u.isPaginated?new ne(this.$container,this.loadMoreHandler,this.scrollEnabled,this.interactivityService,this.eventManager,this.featureSwitches,this.boundDataKey):new Q(this.$container,this.loadMoreHandler,this.scrollEnabled,this.interactivityService,this.eventManager,this.featureSwitches,this.boundDataKey))},E.prototype.updateHeaderMargins=function(u){var l=this.settings;w.fF.assertValue(l,"Settings should be initialized when updating header margins.");var T=this.getUpdatedHeaderMargins(u);this.settings=(0,h.__assign)((0,h.__assign)({},l),{headerMargins:T})},E.prototype.getScrollPosition=function(){return this.renderer.getScrollPosition()},E.prototype.render=function(u){return(0,h.__awaiter)(this,void 0,void 0,function(){var l;return(0,h.__generator)(this,function(T){return l=this.calculateGridRenderSettings(u.calculatedCellDimensions),[2,this.renderer.render(l,this.settings.shouldResetScrollPosition,u)]})})},E.prototype.scrollTo=function(u){var l=this;w.fF.assert(function(){return l.renderer instanceof Q},"scrollTo is only valid for scrollable grid renderer"),this.renderer instanceof Q&&this.renderer.scrollTo(u)},E.prototype.getRowHeight=function(u){return this.renderer.getRowHeight(u)},E.prototype.getUpdatedHeaderMargins=function(u){return(0,h.__assign)((0,h.__assign)({},u),{left:Math.ceil(u.left),right:Math.ceil(u.right),bottom:Math.ceil(u.bottom),top:Math.ceil(u.top)})},E.prototype.calculateGridRenderSettings=function(u){var l=u.axesOverflow,T=u.plotAreaViewport,R=u.seriesLabelsWidth,A=u.scrollableViewport,z={height:T.height+l.bottom+l.top,width:T.width+l.left+l.right+(isNaN(R)?0:R??0)},K=this.settings,ue=K.cellCount,pe=K.cellPadding,me=K.columnCount,Pe=K.getAllCells,Ee=K.gridLineSettings,Ve=K.outerPadding,Ue=K.renderHeader,He=K.rowCount,Le=K.viewport,Be=K.manageTabIndexOnRowHeaderFooter,ze=K.boldedSubheaders,Xe=K.isHorizontal,Ie=K.borderSettings,Qe=K.background,De=K.headerMargins,Ke={subheaderHeight:K.subheaderHeight,subheaderLineHeight:K.subheaderLineHeight,subheaderPosition:K.subheaderPosition,subheaderShow:K.subheaderShow,headerWidth:De.left,footerWidth:De.right,cell:{width:z.width,getCellBackgroundColor:K.getCellBackgroundColor,backgroundTransparency:K.backgroundTransparency,renderCell:K.renderCell,renderCellSubheader:K.renderCellSubheader},height:z.height,scale:this.settings.viewport.scale,rowCount:He,columnCount:me,cellPadding:pe,outerPadding:Ve,scrollPadding:K.scrollPadding,gridLineSettings:Ee,isPaginated:this.settings.isPaginated,isHorizontal:this.settings.isHorizontal},rt=this.calculateVerticalGridLines(Ee,De,pe,Ve,z,me,He);return{viewport:Le,scrollableViewPort:(0,h.__assign)((0,h.__assign)({},A),{scale:Le.scale}),footerHeight:De.bottom,rowCount:He,columnCount:me,row:Ke,totalCellCount:ue,renderHeader:Ue,verticalGridLines:rt,gridLineSettings:Ee,getAllCells:Pe,manageTabIndexOnRowHeaderFooter:Be,boldedSubheaders:ze,isHorizontal:Xe,borderSettings:Ie,background:Qe}},E.prototype.destroy=function(){var u;null===(u=this.renderer)||void 0===u||u.destroy()},E.prototype.clearRenderingTimeout=function(){this.renderer instanceof Q&&this.renderer.clearRenderingTimeout()},E.typeHasVerticalGridLines=function(u){return u===k.o.all||u===k.o.inner||u===k.o.innerVertical},E.hasVerticalGridLines=function(u){return null!=u&&E.typeHasVerticalGridLines(u.region)},E.typeHasHorizontalGridLines=function(u){return u===k.o.all||u===k.o.inner||u===k.o.innerHorizontal},E.hasHorizontalGridLines=function(u){return null!=u&&E.typeHasHorizontalGridLines(u.region)},E.typeHasOuterGridLines=function(u){return u===k.o.all},E.hasOuterGridLines=function(u){return null!=u&&E.typeHasOuterGridLines(u.region)},E.getOuterBorderWidth=function(u,l){var T=0,R=0;return this.hasOuterGridLines(u)&&(T=u.strokeWidth),l&&(R=l.strokeWidth),Math.max(T,R,0)},E.prototype.calculateCellDimensions=function(u,l,T){var R,A,$e,z=this.hasScroll(),K=this.settings,te=K.viewport,ee=K.headerMargins,ue=K.cellPadding,pe=K.columnCount,me=K.rowCount,Pe=K.outerPadding,Ee=K.scrollPadding,Te=K.subheaderHeight,Ve=K.subheaderShow,Fe=this.settings.isHorizontal&&!this.settings.isPaginated;w.fF.assert(function(){return _.isInteger(ee.left)&&_.isInteger(ee.right)&&_.isInteger(ee.top)&&_.isInteger(ee.bottom)}),w.fF.assert(function(){return _.isInteger(te.width)&&_.isInteger(te.height)}),R=2*E.getOuterBorderWidth(A=this.settings.gridLineSettings,this.settings.borderSettings),$e=this.settings.noExtraPadding?0:Pe.left+Pe.right;var He,Ue=te.width-ee.left-ee.right;if(this.settings.noExtraPadding)He=0;else if(!Fe&&z){var ct=C.getBottomInnerPadding(!0,ue.top,A);He=Pe.top+ct+R/2}else He=Pe.top+Pe.bottom+R;var at=te.height-ee.top-ee.bottom;at=this.renderer.adjustHeight(at,z,Ee,this.settings.isHorizontal);var ve=(Ue=this.renderer.adjustWidth(Ue,z,Ee,this.settings.isHorizontal))-R-ue.left*(pe-1)-$e,xe=at-ue.top*(me-1)-He,Oe=Math.floor(ve/pe),Le=Math.floor(xe/me);Ue-=ve%pe,at-=xe%me;var ze,Be=l?.titleWrap;if(Ve){ze=Te;var Xe=l?.subheaders;if(Be&&Xe){for(var Ie=(0,v.qk)(l.subheaderFontProperties),Qe=1,Je=0,De=Xe;Je<De.length;Je++){var rt=(0,O.ql)(De[Je],Ie,b.b.measureSvgTextWidth,Oe,i,null,!0);if((Qe=Math.max(Qe,rt.length))===i)break}ze=Math.ceil(Qe*l.subheaderLineHeight+l.subheaderMargin.top+l.subheaderMargin.bottom)}Le-=ze}Le-=u.top+u.bottom,Oe-=u.left+u.right,w.fF.assert(function(){return _.isInteger(Oe)}),w.fF.assert(function(){return _.isInteger(Le)});var et=T?.showSeriesLabels?Math.ceil((0,t.lr)(T.seriesLabelSettings,Oe)):0;return Oe-=et,{plotAreaViewport:{width:Math.max(Oe,0),height:Math.max(Le,0)},scrollableViewport:{width:Ue,height:at},headerMargins:ee,axesOverflow:u,seriesLabelsWidth:et,maxSubheaderHeight:Be?ze:void 0}},E.prototype.calculateVerticalGridLines=function(u,l,T,R,A,z,K){if(!E.hasVerticalGridLines(u))return[];var te=u.strokeColor;null!=u.strokeTransparency&&(te=(0,B.Et)(te,(0,M.TD)(u.strokeTransparency)));var ee=this.settings.isHorizontal&&!this.settings.isPaginated,ue=E.hasVerticalGridLines(u),pe=E.hasOuterGridLines(u),me="".concat(u.strokeWidth,"px ").concat(u.strokePattern," ").concat(te),Pe=u.strokeWidth/2,Ee=pe?0:void 0,Te=[];if(pe&&Te.push(ee?{key:"outer-vertical-".concat(Ee++),position:{top:"".concat(l.top,"px")},size:{},style:{horizontal:me}}:{key:"outer-vertical-".concat(Ee++),position:{left:"".concat(l.left,"px")},size:{},style:{vertical:me}}),ue){var Fe=me?(ee?K:z)-1:void 0;if(Fe){var $e=ee?T.top:T.left,Ue=ee?A.height:A.width,He=ee?R.top:R.left,ct=ee?T.top+T.bottom:T.left+T.right,at=ee?l.top:l.left;w.fF.assert(function(){return!T.right},"Unexpected right cell padding");for(var Oe=at+He+(Ue+$e/2-Pe)+E.getOuterBorderWidth(u,this.settings.borderSettings),Le=ct+Ue,Be=0;Be<Fe;Be++)Te.push(ee?{key:"inner-vertical-".concat(Be),position:{top:"".concat(Oe,"px")},size:{},style:{horizontal:me}}:{key:"inner-vertical-".concat(Be),position:{left:"".concat(Oe,"px")},size:{},style:{vertical:me}}),Oe+=Le}}if(pe)if(ee){var ze=l.top+A.height*K+T.top*(K-1)+u.strokeWidth+R.top+R.bottom;Te.push({key:"outer-vertical-".concat(Ee++),position:{top:"".concat(ze,"px")},size:{},style:{horizontal:me}})}else ze=l.left+A.width*z+T.left*(z-1)+u.strokeWidth+R.left+R.right,Te.push({key:"outer-vertical-".concat(Ee++),position:{left:"".concat(ze,"px")},size:{},style:{vertical:me}});return Te},E.prototype.hasScroll=function(){return!this.settings.isPaginated&&this.settings.cellCount/(this.settings.isHorizontal?this.settings.rowCount:this.settings.columnCount)>(this.settings.isHorizontal?this.settings.columnCount:this.settings.rowCount)},E}(),S="GridRenderingContext",C=function(){function E(u,l,T,R,A,z,K){var te=this;if(this.$container=u,this.loadMoreHandler=l,this.scrollEnabled=T,this.interactivityService=R,this.eventManager=A,this.featureSwitches=z,this.isInitialized=!1,R){var ee=new p.wA(K,function(){return te.settings.getAllCells()});this.behavior=ee.create()}}return E.prototype.render=function(u,l,T){return(0,h.__awaiter)(this,void 0,void 0,function(){var R,A;return(0,h.__generator)(this,function(z){switch(z.label){case 0:return this.settings=u,this.dataToBind=T.dataToBind,this.pointSourceKey=T.pointSourceKey,this.formatMode=T.formatMode,this.subSelectionHelper=T.subSelectionHelper,this.isInitialized||this.initialize(T.visualInstanceId),this.renderingContext={},this.$gridWrapper.css(((A={})[m.kP]=(R=u.viewport).width,A[m.ei]=R.height,A)),this.updateFooter(),[4,this.updateRows(l)];case 1:return z.sent(),this.updateGridlines(),this.updateBorder(),this.updateBackground(),[2]}})})},E.prototype.showFooter=function(u){this.$gridFooter.css("display",u?"":"none")},E.prototype.updateBorder=function(){var u,l=this.settings.borderSettings,T=this.settings.scrollableViewPort.width,R=this.settings.scrollableViewPort.height,A={};if(!l)return(u={}).width="",u.height="",u["border-radius"]="",A=u,this.$gridBorder.css("display","none"),void this.updateViewportElement(A);this.isPaginated||(this.settings.isHorizontal?(A.height="".concat(R,"px"),this.$gridWrapper.css("width","".concat(T,"px"))):(A.width="".concat(T,"px"),this.$gridWrapper.css("height","".concat(R,"px")))),A["border-radius"]=I(l.radius),this.updateViewportElement(A),this.$gridBorder.css("display",""),this.$gridBorder.css(m.ei,"".concat(R,"px")),this.$gridBorder.css(m.kP,"".concat(T,"px")),this.$gridBorder.css(m.mA,(0,o.YE)(l)),this.$gridBorder.css(m.wu,A[m.wu])},E.prototype.updateBackground=function(){var u=this.settings.background;if(!u)return this.$gridBackground.css("display","none"),void this.$gridBackgroundColor.css("display","none");var l=this.getBackgroundStyles();if(_.isEmpty(u.color))this.$gridBackgroundColor.css("display","none");else{var T=u.color;u.colorTransparency&&(T=(0,B.Et)(T,(0,M.TD)(u.colorTransparency))),this.$gridBackgroundColor.css("background-color",T||""),this.$gridBackgroundColor.css(l)}!function(E){return E&&((0,d.gU)(E.url)||(0,d.pU)(E.url))}(u.image)?this.$gridBackground.css("display","none"):(this.$gridBackground.css("background-image","url(".concat(P.b$.encodeUriForImageDataSvg(u.image.url),")")),this.$gridBackground.css("background-size",function(E){switch(E.image.scaling){case V.C.fit:return"100% 100%";case V.C.fill:return"cover";default:return"contain"}}(u)),this.$gridBackground.css("opacity",(0,M.TD)(u.imageTransparency)),this.$gridBackground.css(l))},E.prototype.getBackgroundStyles=function(){var u=this.settings.borderSettings,l={},T=this.settings.scrollableViewPort.height,R=this.settings.scrollableViewPort.width,A=0,z=0,K={topLeft:0,topRight:0,bottomLeft:0,bottomRight:0};return u&&(u.strokeWidth>0&&(A=u.strokeWidth,z=u.strokeWidth,T-=2*u.strokeWidth,R-=2*u.strokeWidth),u.radius&&(K={topLeft:u.radius.topLeft-u.strokeWidth,topRight:u.radius.topRight-u.strokeWidth,bottomLeft:u.radius.bottomLeft-u.strokeWidth,bottomRight:u.radius.bottomRight-u.strokeWidth})),l.height="".concat(T,"px"),l.width="".concat(R,"px"),l.left="".concat(z,"px"),l.top="".concat(A,"px"),l.display="",l["border-radius"]=I(K),l},E.prototype.updateFooter=function(){var u=this,l=this.settings.footerHeight;if(!l)return this.showFooter(!1),this.$gridFooter.css("display","none"),void this.$gridFooter.empty();this.showFooter(!0);var T=this.settings.row;this.$gridFooter.css(m.ei,l),this.$gridFooter.css(m.kP,this.adjustWidth(this.settings.viewport.width,this.hasScroll(),T.scrollPadding,this.settings.isHorizontal));var R={rowCount:T.rowCount,columnCount:T.columnCount,footerWidth:T.footerWidth,headerWidth:T.headerWidth,subheaderHeight:0,subheaderLineHeight:0,subheaderPosition:T.subheaderPosition,subheaderShow:!1,height:l,scale:this.settings.viewport.scale,cellPadding:{top:0,bottom:0,left:T.cellPadding.left,right:T.cellPadding.right},outerPadding:{top:0,bottom:0,left:T.outerPadding.left,right:T.outerPadding.right},scrollPadding:T.scrollPadding,cell:{width:T.cell.width,getCellBackgroundColor:function(K){},renderCell:function(K){var te=K;te.position=2,u.settings.renderHeader(te)},renderCellSubheader:_.noop},gridLineSettings:void 0,isPaginated:!1,isHorizontal:!1},A=this.$gridFooter.find(n.YR.selector);0===A.length&&(A=this.buildElement(this.$gridFooter,n.YR.class)),this.renderRow(A,R,0,function(){},T.columnCount,{startIndex:0,endIndex:T.columnCount})},E.prototype.updateGridlines=function(){this.updateGridLines(d3.select(this.$gridBody[0]),this.settings.verticalGridLines,n.MB)},E.prototype.getTotalOccupiedRowCount=function(){return Math.ceil(this.settings.totalCellCount/this.virtualColumnCount)},E.prototype.hasScroll=function(){return this.scrollEnabled&&(!this.settings||this.getTotalOccupiedRowCount()>this.virtualRowCount)},E.getTotalScrollWidth=function(u,l){return u?8+l:0},E.getBottomInnerPadding=function(u,l,T){if(u){var R=l,A=0;return e.hasHorizontalGridLines(T)&&(A=T.strokeWidth),Math.round((R-=A)/2)}return 0},E.getRightInnerPadding=function(u,l){return u?Math.round(l/2):0},E.prototype.getTotalOuterPixels=function(){var u=this.settings.row;return u.outerPadding.top+e.getOuterBorderWidth(u.gridLineSettings,this.settings.borderSettings)},E.prototype.getRowHeightWithoutPadding=function(u){var l=u;return 1===this.getTotalRowCount()&&(l+=u),this.getRowHeight(0)-l},E.prototype.getRowWidthWithoutPadding=function(u){var l=u;return 1===this.getTotalColumnCount()&&(l+=u),N(this.settings.row,this.settings.gridLineSettings,this.settings.borderSettings,0)-l},E.prototype.updateGridLines=function(u,l,T){var R=u.selectAll("".concat(n.F6.selector,".").concat(T.class)).data(l,function(z){return z.key}),A=R.enter().append("div").classed(n.F6.class,!0).classed(T.class,!0);A.merge(R).style("top",function(z){return z.position.top}).style("right",function(z){return z.position.right}).style("bottom",function(z){return z.position.bottom}).style("left",function(z){return z.position.left}).style("width",function(z){return z.size.width}).style("border-left",function(z){return z.style.vertical}).style("border-top",function(z){return z.style.horizontal}).classed(n.IA.class,!this.isPaginated&&this.settings.isHorizontal),this.featureSwitches&&this.featureSwitches.onObject&&A.classed(f.cy,!0).attr(f.Ez,"small-multiples-gridlines").attr(f.CK,"Small_Multiples_Border").attr(f.QZ,3),R.exit().remove()},E.prototype.buildRow=function(u,l,T,R,A){var z=function(E,u,l,T,R){var A=E.subheaderShow&&1!==E.subheaderPosition,z=D(T,R,E,l),K=z.height,te=z.topPadding,ee=z.bottomPadding,ue=K-te-ee,pe={},me=E.isHorizontal&&!E.isPaginated,Pe={},Ee={},Te={},Ve={},Fe={},$e={},Ue={},He=N(E,u,l,T),ct=He,at=te,ve=He;if(me){ve=0;var xe=e.getOuterBorderWidth(u,l);u&&(ve=u.strokeWidth,at+=z.height-xe),pe["flex-direction"]="row"}else pe["flex-direction"]="column";return pe.width="".concat(He,"px"),Pe.width="".concat(ct,"px"),Ee.width="".concat(ve,"px"),Ee.height="".concat(at,"px"),pe.height="".concat(K,"px"),Pe.height="".concat(ue,"px"),Te.height="".concat(ee,"px"),Ve["flex-direction"]=A?"column-reverse":"column",Fe.width="".concat(E.cell.width,"px"),E.subheaderShow?($e["line-height"]="".concat(E.subheaderLineHeight,"px"),$e.height="".concat(E.subheaderHeight,"px"),$e.width="".concat(E.cell.width,"px"),Ue["padding-top"]="".concat(A?E.subheaderHeight:0,"px")):Ue["padding-top"]="0px",Ue.height="".concat(ue,"px"),Pe["flex-direction"]=E.isHorizontal&&!E.isPaginated?"column":"",{rowWrapperStyling:pe,rowStyling:Pe,gridLineWrapperStyling:Ee,gridLineWrapperBottomStyling:Te,cellStyling:Ve,cellContentStyling:Fe,subheaderStyling:$e,rowHeaderCellStyling:Ue}}(l,this.settings.gridLineSettings,this.settings.borderSettings,A,this.getTotalRowCount()),te=z.rowStyling,ee=z.gridLineWrapperStyling,ue=z.gridLineWrapperBottomStyling,pe=z.cellStyling,me=z.cellContentStyling,Pe=z.subheaderStyling,Ee=z.rowHeaderCellStyling;u.css(z.rowWrapperStyling);var Te=u.find(n.oE.selector);0===Te.length&&(Te=this.buildElement(u,n.oE.class)),Te.css(ee);var Ve=u.find(n.X2.selector);0===Ve.length&&(Ve=this.buildElement(u,n.X2.class)),Ve.css(te),Ve.attr("role","row"),Ve.attr("aria-rowindex",A+1);var Fe=u.find(n.MR.selector);0===Fe.length&&(Fe=this.buildElement(u,n.MR.class)),Fe.css(ue),this.renderTopGridline(A,l,d3.select(Te[0])),this.renderRowInnerGridline(A,l,d3.select(Te[0])),this.buildHeaderCell(Ve,0,Ee,l),this.buildCells(Ve,l,T,R,pe,me,Pe,A),this.buildHeaderCell(Ve,1,Ee,l),this.renderBottomGridline(A,l,d3.select(Fe[0])),this.orderRowContent(d3.select(Ve[0]))},E.prototype.buildCells=function(u,l,T,R,A,z,K,te){for(var ee=u.find(n.bL.selector),ue=0;ue<this.virtualColumnCount;ue++){var pe=T+ue,me=ee.eq(ue);0===me.length&&(me=this.buildElement(u,n.bL.class)),A=(0,h.__assign)((0,h.__assign)({},A),{"padding-top":"","padding-left":"","padding-right":"","margin-left":"","margin-right":"","background-color":"","margin-top":"","margin-bottom":""}),me.attr("role","gridcell"),me.attr("aria-colindex",ue+1);var Pe=0===ue,Ee=ue===this.virtualColumnCount-1,Te=e.getOuterBorderWidth(this.settings.gridLineSettings,this.settings.borderSettings),Ve=e.hasHorizontalGridLines(this.settings.gridLineSettings)?this.settings.gridLineSettings.strokeWidth:0;l.isHorizontal&&!l.isPaginated?(A["padding-left"]=L(te,l)?"".concat(Te,"px"):"".concat(l.cellPadding.left-Ve,"px"),Pe||(A["padding-top"]="".concat(l.cellPadding.top,"px")),Pe&&(A["margin-top"]="".concat(Te,"px")),Ee&&(A["margin-bottom"]="".concat(Te,"px"))):(A["padding-left"]="".concat(Pe?l.outerPadding.left:l.cellPadding.left,"px"),Ee&&(A["padding-right"]="".concat(l.outerPadding.right,"px")),Pe&&(A["margin-left"]="".concat(Te,"px")),Ee&&(A["margin-right"]="".concat(Te,"px")));var Fe=me.find(n.J5.selector),$e=me.find(n.bU.selector);if(pe>=R)Fe.remove(),$e.remove(),A["background-color"]="";else{0===Fe.length&&(Fe=this.buildElement(me,n.J5.class)),Fe.css(z);var Ue=l.cell.getCellBackgroundColor(pe);if(Ue){var He=(0,M.WV)(Ue),ct=(0,M.b9)(He,(100-l.cell.backgroundTransparency)/100);A["background-color"]=(0,M.U8)(ct)}else A["background-color"]="";l.subheaderShow?(0===$e.length&&($e=this.buildElement(me,n.bU.class),this.featureSwitches&&this.featureSwitches.onObject&&d3.select($e.get(0)).classed(f.cy,!0).attr(f.Ez,"grid-cell-subheader").attr(f.CK,"Small_Multiples_Title").attr(f.QZ,1)),$e.css(K)):$e.remove()}me.css(A)}ee.slice(this.virtualColumnCount).remove()},E.prototype.buildHeaderCell=function(u,l,T,R){var A,z;w.fF.assert(function(){return 0===l||1===l},"buildHeaderCell expects header position to be left or right."),0===l?(A=R.headerWidth,z=n.yD.class):(A=R.footerWidth,z=n.yT.class);var K=s(u,l);A<=0?K.remove():(0===K.length&&(K=this.buildElement(u,n.qN.class)).addClass(z),K.css(T),K.css("width","".concat(A,"px")))},E.prototype.orderRowContent=function(u){var l=u.selectAll(_.map(r,function(T){return T.selector}).join(", ")).nodes();l.sort(function(T,R){for(var A=0,z=0;z<r.length;z++)A+=Number(d3.select(T).classed(r[z].class))*z,A-=Number(d3.select(R).classed(r[z].class))*z;return A}),d3.selectAll(l).order()},E.prototype.renderRowGridline=function(u,l,T,R,A,z){var K=[];if(u){var te=this.settings.isHorizontal&&!this.isPaginated,ue=(0,o.YE)(A.gridLineSettings),pe=e.getOuterBorderWidth(A.gridLineSettings,this.settings.borderSettings),me={top:"".concat(te?pe:l,"px"),left:"".concat(A.headerWidth+(te?l:pe),"px")};if(te)K.push({key:T,position:me,size:Pe={width:"0px"},style:{vertical:ue}});else{var Pe={width:"".concat(A.cell.width*A.columnCount+A.cellPadding.left*(A.columnCount-1)+A.outerPadding.left+A.outerPadding.right,"px")};K.push({key:T,position:me,size:Pe,style:{horizontal:ue}})}}this.updateGridLines(z,K,R)},E.prototype.renderRowInnerGridline=function(u,l,T){var R=l.gridLineSettings,A=u>0&&e.hasHorizontalGridLines(R),z=A?Math.floor((l.cellPadding.top-R.strokeWidth)/2):0,K="inner-horizontal-".concat(u-1);this.renderRowGridline(A,z,K,n.SM,l,T)},E.prototype.renderTopGridline=function(u,l,T){var A=0===u&&e.hasOuterGridLines(l.gridLineSettings);this.renderRowGridline(A,0,"outer-horizontal-0",n.J3,l,T)},E.prototype.renderBottomGridline=function(u,l,T){var R=l.gridLineSettings,A=u===this.getTotalRowCount()-1&&e.hasOuterGridLines(R);this.renderRowGridline(A,l.outerPadding.bottom,"outer-horizontal-1",n.J3,l,T)},E.prototype.renderRow=function(u,l,T,R,A,z){var K=Math.floor(T/this.virtualColumnCount);this.buildRow(u,l,T,A,K);var te={width:l.cell.width,height:l.height,scale:l.scale};l.headerWidth>0&&this.renderHeaderCell(s(u,0),K,0,te.height,l.headerWidth,l.scale,R);for(var ee=u.find(n.bL.selector),ue=0;ue<this.virtualColumnCount;ue++){var pe=T+ue;if(!(pe>=A)){var me=ee.eq(ue),Ee={element:me.find(n.J5.selector),index:pe,viewport:te,scrollPosition:z};if(this.behavior&&(Ee.bindDataToGridCell=p.p$.bindDataToGridCell),l.cell.renderCell(Ee),l.subheaderShow){var Ve={element:me.find(n.bU.selector),index:pe,viewport:{width:l.cell.width,height:l.subheaderHeight,scale:l.scale},scrollPosition:z};this.behavior&&(Ve.styleSubheader=p.p$.styleSubheader),l.cell.renderCellSubheader(Ve)}}}l.footerWidth>0&&this.renderHeaderCell(s(u,1),K,1,te.height,l.footerWidth,l.scale,R)},E.prototype.renderHeaderCell=function(u,l,T,R,A,z,K){K({index:l,viewport:{width:A,height:R,scale:z},position:T,element:u,scrollPosition:this.getScrollPosition()})},E.prototype.renderListViewRow=function(u){u.each(function(l,T){$(this).addClass(n.YR.class)})},E.prototype.updateListViewRow=function(u){var l=this,T=this.renderingContext;u.each(function(R,A){var z=$(this);z.data(S)!==T&&(z.data(S,T),l.renderRow($(this),l.settings.row,R.cellIndex,l.settings.renderHeader,l.settings.totalCellCount,l.getScrollPosition()))})},E.prototype.getRowHeight=function(u,l){return void 0===l&&(l=this.settings.row),D(u,this.getTotalRowCount(),l,this.settings.borderSettings).height},E.prototype.buildListViewData=function(){for(var u=0,l=[],T=this.getTotalRowCount(),R=0;R<T;R++)l.push({index:R,cellIndex:u,columnCount:this.virtualColumnCount}),u+=this.virtualColumnCount;return l},E.prototype.buildElement=function(u,l){return $(document.createElement("div")).addClass(l).appendTo(u)},E.prototype.buildGridBody=function(){var u=this.buildElement(this.$grid,n.uT.class);return u.attr("role","grid"),this.featureSwitches&&this.featureSwitches.onObject&&u.attr(f.oy,1),u},E.prototype.getRowsFromBodyOrFooter=function(u){return this.$container.find("".concat(u?n.uT.selector:n.$_.selector," ").concat(n.X2.selector))},E}();function D(E,u,l,T){var R=0,A=0,z=0;return l.isHorizontal&&!l.isPaginated?(z=l.height*l.rowCount+l.cellPadding.top*(l.rowCount-1),z+=e.getOuterBorderWidth(l.gridLineSettings,T)):(L(E,l)&&(A+=l.outerPadding.top,A+=e.getOuterBorderWidth(l.gridLineSettings,T)),function(E,u,l){return u.isPaginated?E%u.rowCount==u.rowCount-1:E===l-1}(E,l,u)&&(R+=l.outerPadding.bottom,R+=e.getOuterBorderWidth(l.gridLineSettings,T)),(l.isPaginated&&E%l.rowCount!=0||!l.isPaginated&&E>0)&&(A+=l.cellPadding.top),z=l.height+(l.subheaderShow?l.subheaderHeight:0)+R+A),{height:z,topPadding:A,bottomPadding:R}}function L(E,u){return u.isPaginated?E%u.rowCount==0:0===E}function N(E,u,l,T){var me,R=E.cell,A=E.columnCount,z=E.cellPadding,K=E.outerPadding,te=E.headerWidth,ee=void 0===te?0:te,ue=E.footerWidth,pe=void 0===ue?0:ue;return E.isHorizontal&&!E.isPaginated?(me=R.width,T>0&&(me+=E.cellPadding.left),0===T&&(me+=e.getOuterBorderWidth(u,l))):(me=R.width*A+z.left*(A-1)+K.left+K.right+ee+pe,me+=2*e.getOuterBorderWidth(u,l)),me}var Q=function(E){function u(){return null!==E&&E.apply(this,arguments)||this}return(0,h.__extends)(u,E),u.prototype.getScrollPosition=function(){var l;return null===(l=this.listView)||void 0===l?void 0:l.getCurrentPosition()},u.prototype.scrollTo=function(l){var T;null===(T=this.listView)||void 0===T||T.scrollTo(l)},u.prototype.clearRenderingTimeout=function(){var l;null===(l=this.listView)||void 0===l||l.clearRenderingTimeout()},u.prototype.destroy=function(){this.isInitialized&&(this.listView.destroy(),this.$gridWrapper.empty(),this.$gridWrapper.remove(),this.isInitialized=!1)},Object.defineProperty(u.prototype,"virtualRowCount",{get:function(){return this.settings.isHorizontal?this.settings.columnCount:this.settings.rowCount},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"virtualColumnCount",{get:function(){return this.settings.isHorizontal?this.settings.rowCount:this.settings.columnCount},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"isPaginated",{get:function(){return!1},enumerable:!1,configurable:!0}),u.prototype.initialize=function(l){this.isInitialized=!0,this.$gridWrapper=this.buildElement(this.$container,n.zc.class),this.$grid=this.buildElement(this.$gridWrapper,n.rj.class),this.$gridBody=this.buildGridBody(),this.$gridBorder=this.buildElement(this.$grid,n.OC.class),this.$gridBackground=this.buildElement(this.$grid,n.Aq.class),this.$gridBackgroundColor=this.buildElement(this.$grid,n.lP.class),this.$gridFooter=this.buildElement(this.$grid,n.$_.class),this.$gridFooter.attr("role","grid");var T=this.buildListViewOptions(l);this.listView=(0,c.P)(T)},u.prototype.updateViewportElement=function(l){var T;null===(T=this.listView)||void 0===T||T.updateScrollingViewport(l)},u.prototype.updateRows=function(l){var T=this;w.fF.assert(function(){return T.isInitialized},"grid renderer not initialized");var R=this.buildListViewData(),A=this.getTotalOuterPixels(),z=this.settings.isHorizontal?this.getRowWidthWithoutPadding(A):this.getRowHeightWithoutPadding(A);if(this.listView.viewport(null).rowHeight(z).paddingBetween(this.settings.row.cellPadding.top).paddingOuter(A).orientation(this.settings.isHorizontal).data(R,function(te){return JSON.stringify(te)},l),this.settings.isHorizontal)this.$gridBody.css("flex-grow","1"),this.$gridBody.css("flex-basis",null);else{var K=this.getVerticalContainerHeight();this.$gridBody.css("flex-grow",null),this.$gridBody.css("flex-basis",K)}return this.$gridBody.attr("aria-rowcount",this.getTotalRowCount()),this.$gridBody.attr("aria-colcount",this.settings.row.columnCount),this.listView.render()},u.prototype.buildListViewOptions=function(l){var T=this;return{loadMoreData:function(){return T.loadMoreHandler()},customLoadMoreCheck:function(){return T.checkLoadMore()},viewport:this.settings.viewport,baseContainer:d3.select(this.$gridBody.get(0)),scrollEnabled:this.scrollEnabled,isReadMode:function(){return!0},enter:function(A){T.renderListViewRow(A)},update:function(A){T.updateListViewRow(A)},rowHeight:this.settings.isHorizontal?N(this.settings.row,this.settings.gridLineSettings,this.settings.borderSettings,0):this.getRowHeightWithoutPadding(this.getTotalOuterPixels()),paddingBetween:this.settings.row.cellPadding.top,paddingOuter:this.getTotalOuterPixels(),doNotRenderToCalculateRowHeight:!0,getContainerHeight:function(){return T.settings.isHorizontal?T.getHorizontalContainerWidth():T.getVerticalContainerHeight()},onScroll:function(){return T.onScroll()},afterScroll:this.behavior?function(){return T.bindInteractivity(l)}:void 0}},u.prototype.onScroll=function(){var l;this.formatMode&&(null===(l=this.subSelectionHelper)||void 0===l||l.onVisualScroll())},u.prototype.getVerticalContainerHeight=function(){var l=this.settings;if(0===l.rowCount)return 0;for(var T=0,R=0;R<l.rowCount;R++)T+=D(R,this.getTotalRowCount(),l.row,l.borderSettings).height;var A=this.hasScroll();return T+C.getBottomInnerPadding(A,this.settings.row.cellPadding.top,this.settings.gridLineSettings)},u.prototype.getHorizontalContainerWidth=function(){var l=this.settings;if(0===l.columnCount)return 0;for(var T=0,R=0;R<l.columnCount;R++)T+=N(l.row,l.gridLineSettings,l.borderSettings,R);var A=this.hasScroll();return T+C.getRightInnerPadding(A,this.settings.row.cellPadding.left)},u.prototype.getTotalRowCount=function(){var l=Math.ceil(this.settings.totalCellCount/this.virtualColumnCount);return Math.max(l,this.virtualRowCount)},u.prototype.getTotalColumnCount=function(){var l=Math.ceil(this.settings.totalCellCount/this.virtualRowCount);return Math.max(l,this.virtualColumnCount)},u.prototype.checkLoadMore=function(){var l;return null===(l=this.listView)||void 0===l?void 0:l.reachedLastRowContent()},u.prototype.bindInteractivity=function(l){var T={gridContainer:d3.select(this.$container.get(0)),cells:this.$container.find("".concat(n.uT.selector," ").concat(n.bL.selector)),columnCount:this.settings.row.columnCount,viewportRowCount:this.settings.rowCount,cellCount:this.settings.totalCellCount,listView:this.listView,visualInstanceId:l,$rows:this.getRowsFromBodyOrFooter(this.settings.manageTabIndexOnRowHeaderFooter),manageTabIndexOnRowHeaderFooter:this.settings.manageTabIndexOnRowHeaderFooter,eventManager:this.eventManager,boldedSubheaders:this.settings.boldedSubheaders};this.interactivityService.bind(this.dataToBind,this.behavior,T,{pointSourceKey:this.pointSourceKey,useSelectableDataPointForHasSelection:!0})},u.prototype.adjustHeight=function(l,T,R,A){return A?l-C.getTotalScrollWidth(T,R):l},u.prototype.adjustWidth=function(l,T,R,A){return A?l:l-C.getTotalScrollWidth(T,R)},u}(C),ne=function(E){function u(){return null!==E&&E.apply(this,arguments)||this}return(0,h.__extends)(u,E),u.prototype.initialize=function(){var l=this;this.isInitialized=!0,this.$gridWrapper=this.buildElement(this.$container,n.zc.class),this.$gridWrapper.css("display","flex"),this.$grid=this.buildElement(this.$gridWrapper,n.rj.class),this.$gridBody=this.buildGridBody(),this.$gridBorder=this.buildElement(this.$grid,n.OC.class),this.$gridBackground=this.buildElement(this.$grid,n.Aq.class),this.$gridBackgroundColor=this.buildElement(this.$grid,n.lP.class),this.$gridFooter=this.buildElement(this.$grid,n.$_.class),this.$gridFooter.attr("role","grid"),this.paginatedView=new y({viewContainer:d3.select(this.$gridWrapper.get(0)),contentContainer:d3.select(this.$gridBody.get(0)),enter:function(R){return l.renderListViewRow(R)},update:function(R){return l.updateListViewRow(R)},loadMoreData:this.loadMoreHandler,scrollEnabled:this.scrollEnabled})},u.prototype.destroy=function(){this.isInitialized&&(this.$gridWrapper.empty(),this.$gridWrapper.remove(),this.isInitialized=!1)},Object.defineProperty(u.prototype,"virtualRowCount",{get:function(){return this.settings.rowCount},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"virtualColumnCount",{get:function(){return this.settings.columnCount},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"isPaginated",{get:function(){return!0},enumerable:!1,configurable:!0}),u.prototype.updateViewportElement=function(l){this.$gridBody.css(l),this.$gridBody.css("min-height","".concat(this.settings.scrollableViewPort.height,"px")),this.$gridBody.css("width","".concat(this.settings.scrollableViewPort.width,"px")),this.$gridBody.css("overflow","hidden")},u.prototype.updateRows=function(l){var T=this;w.fF.assert(function(){return T.isInitialized},"grid renderer not initialized");var R=this.buildListViewData();this.$gridBody.attr("aria-rowcount",this.settings.rowCount),this.$gridBody.attr("aria-colcount",this.settings.columnCount),this.paginatedView.data({rowDataStore:R,getRowDataKey:function(K){return JSON.stringify(K)},rowCount:this.settings.rowCount,columnCount:this.settings.columnCount,totalCellCount:this.settings.totalCellCount,isHorizontal:this.settings.isHorizontal,resetPosition:l}).render()},u.prototype.getTotalRowCount=function(){var l=Math.ceil(this.settings.totalCellCount/(this.settings.rowCount*this.settings.columnCount));return 0===l?this.settings.rowCount:l*this.settings.rowCount},u.prototype.getTotalColumnCount=function(){var l=Math.ceil(this.settings.totalCellCount/(this.settings.rowCount*this.settings.columnCount));return 0===l?this.settings.columnCount:l*this.settings.columnCount},u.prototype.getScrollPosition=function(){var l;return null===(l=this.paginatedView)||void 0===l?void 0:l.getScrollPosition()},u.prototype.adjustHeight=function(l,T,R,A){return A?l:l-40},u.prototype.adjustWidth=function(l,T,R,A){return A?l-40:l},u}(C);function I(E){return E?"".concat(E.topLeft,"px  ").concat(E?.topRight,"px ").concat(E?.bottomRight,"px ").concat(E.bottomLeft,"px"):""}},63194:function(be,Z,g){g.d(Z,{p$:function(){return p},rG:function(){return O},wA:function(){return v}});var h=g(81337),B=g(79154),V=g(65195),M=g(88987),m=g(59107),w=g(26543),b=g(60066),d=g(39071),P=g(30237),O=(0,B.CH)("managed-tab-index-element"),x=[34,33,36,35,32],v=function(){function n(c,y){this.boundDataKey=c,this.getAllCells=y}return n.prototype.create=function(){return new p(this.boundDataKey,this.getAllCells)},n}(),p=function(){function n(c,y){this.boundDataKey=c,this.getAllCells=y,this.pendingFocusCall=!1,this.factory=(0,M.p)()}return n.prototype.bindEvents=function(c,y,f){this.$cells=c.cells,this.columnCount=c.columnCount,this.viewportRowCount=c.viewportRowCount,this.cellCount=c.cellCount,this.listView=c.listView,this.cellCount=c.cellCount,this.visualInstanceId=c.visualInstanceId,this.$rows=c.$rows,this.manageTabIndexOnRowHeaderFooter=c.manageTabIndexOnRowHeaderFooter,this.eventManager=c.eventManager,this.boldedSubheaders=c.boldedSubheaders;var o=this,t=this.boundDataKey,a=!1,i=-1;this.$cells.each(function(){var r=$(this),e=r.data(t);if(e){a||(a=o.checkUpdateEntryMappingImmediate(r,e,o));var S=e.getIndex();a||i<0&&(i=S);var C=e.getDataPoint();o.bindKeyNavigation(this,S,C,y),o.bindSubheaderSelection(this,C,y),o.bindClickEvents(this,S)}}),a||this.checkUpdateEntryMappingDelayed(i>=0,i),c.gridContainer.on("click.selection",function(){(0,P.XM)(y,n.isValidClickTarget)})},n.prototype.renderSelection=function(c){var y=this.boundDataKey,f=this.boldedSubheaders;this.$cells.each(function(){var o=$(this),t=o.data(y);t&&n.styleSubheader(o,t,f)})},n.bindDataToGridCell=function(c,y,f){y&&c.data(f,y)},n.styleSubheader=function(c,y,f){f||d3.select(c.get(0)).select(d.bU.selector).style("font-weight",y.isSelected()?"".concat(700):"normal")},n.isValidClickTarget=function(c){var y=c.target;return!_.some(["scroll-bar","scroll-element_outer","scroll-element_track",d.bU.class],function(f){return y.classList.contains(f)})},n.prototype.bindSubheaderSelection=function(c,y,f){var o=d3.select(c).select(d.bU.selector).node();o&&this.eventManager.on(o,"click",function(){return(0,P.c8)(y,f)})},n.prototype.bindKeyNavigation=function(c,y,f,o){var t=this,a=d3.select(c).select(O.selector).node();a&&this.eventManager.on(a,"keydown",function(){var i=d3.event,s=d3.select(i.target),r=i.keyCode;if(s.classed(O.class)){var e=function(L){i.preventDefault(),i.stopPropagation(),L()};switch(r){case 39:y!==t.getLastCellIndexInRow(y)?e(i.shiftKey?function(){return(0,h.__awaiter)(t,void 0,void 0,function(){return(0,h.__generator)(this,function(D){return[2,this.triggerFocusAndSelection(y+1,f,o)]})})}:function(){return(0,h.__awaiter)(t,void 0,void 0,function(){return(0,h.__generator)(this,function(D){return[2,this.focusCellAtIndex(y+1,!1)]})})}):e(function(){});break;case 37:y!==t.getFirstCellIndexInRow(y)?e(i.shiftKey?function(){return(0,h.__awaiter)(t,void 0,void 0,function(){return(0,h.__generator)(this,function(D){return[2,this.triggerFocusAndSelection(y-1,f,o)]})})}:function(){return(0,h.__awaiter)(t,void 0,void 0,function(){return(0,h.__generator)(this,function(D){return[2,this.focusCellAtIndex(y-1,!1)]})})}):e(function(){});break;case 40:var S=y+t.columnCount;e(S<t.cellCount?i.shiftKey?function(){return(0,h.__awaiter)(t,void 0,void 0,function(){return(0,h.__generator)(this,function(D){return[2,this.triggerFocusAndSelection(S,f,o)]})})}:function(){return(0,h.__awaiter)(t,void 0,void 0,function(){return(0,h.__generator)(this,function(D){return[2,this.focusCellAtIndex(S,!1)]})})}:function(){});break;case 38:var C=y-t.columnCount;e(C>=0?i.shiftKey?function(){return(0,h.__awaiter)(t,void 0,void 0,function(){return(0,h.__generator)(this,function(D){return[2,this.triggerFocusAndSelection(C,f,o)]})})}:function(){return(0,h.__awaiter)(t,void 0,void 0,function(){return(0,h.__generator)(this,function(D){return[2,this.focusCellAtIndex(C,!1)]})})}:function(){});break;case 36:m.M.isCtrlOrMeta(i)?e(function(){return(0,h.__awaiter)(t,void 0,void 0,function(){return(0,h.__generator)(this,function(D){return[2,this.focusCellAtIndex(0,!1)]})})}):e(function(){return(0,h.__awaiter)(t,void 0,void 0,function(){return(0,h.__generator)(this,function(D){return[2,this.focusCellAtIndex(this.getFirstCellIndexInRow(y),!1)]})})});break;case 35:m.M.isCtrlOrMeta(i)?e(function(){return(0,h.__awaiter)(t,void 0,void 0,function(){return(0,h.__generator)(this,function(D){return[2,this.focusCellAtIndex(this.cellCount-1,!1)]})})}):e(function(){return(0,h.__awaiter)(t,void 0,void 0,function(){return(0,h.__generator)(this,function(D){return[2,this.focusCellAtIndex(this.getLastCellIndexInRow(y),!1)]})})});break;case 32:e(function(){return t.handleCellSelection(f,o)});break;case 65:m.M.isCtrlOrMeta(i)&&(o.handleClearSelection(),e(function(){return t.handleSelectAll(o)}));break;case 33:e(function(){return(0,h.__awaiter)(t,void 0,void 0,function(){return(0,h.__generator)(this,function(D){return[2,this.focusCellAtIndex(Math.max(y-this.getCellsPerPage(),0),!1)]})})});break;case 34:e(function(){return(0,h.__awaiter)(t,void 0,void 0,function(){return(0,h.__generator)(this,function(D){return[2,this.focusCellAtIndex(y+this.getCellsPerPage(),!0)]})})})}}else _.indexOf(x,r)>=0&&(i.preventDefault(),i.stopPropagation())})},n.prototype.checkUpdateEntryMappingImmediate=function(c,y,f){var o=y.getDataPoint().identity,t=f.entryCellKeyMapping,a=void 0===t,i=t&&w.l0.isEqual(o,f.entryCellKeyMapping.key);if(a||i){var s={cell:c,index:y.getIndex(),key:o,selectableDataPoint:y.getDataPoint()};return f.setEntryCellKeyMapping(s),!0}return!1},n.prototype.checkUpdateEntryMappingDelayed=function(c,y){this.setEntryCellKeyMapping(c?this.getCellKeyMapping(y):void 0)},n.prototype.focusCellAtIndex=function(c,y){var f=this,o=this.factory.defer(),t=this.getRowIndexFromCellIndex(c),a=y;return this.pendingFocusCall?o.resolve(1):(this.pendingFocusCall=!0,this.focusCallback=function(){var i=a?Math.min(c,f.cellCount-1):c,s=f.getCellKeyMapping(i);s&&(f.setEntryCellKeyMapping(s),f.pendingFocusCall=!1,m.M.focus(f.getManagedElementFromCell(s.cell).get(0),{preventScroll:!0})),f.pendingFocusCall=!1,o.resolve(0)},this.listView.scrollRowIntoView(t,this.focusCallback)),o.promise},n.prototype.setEntryCellKeyMapping=function(c){var y=this.entryCellKeyMapping;if(y&&y.cell){var f=this.getManagedElementFromCell(y.cell);f.removeAttr("tabindex"),f.removeAttr("focusable"),f.attr(V.Rh,"true")}if(c){var o=this.getManagedElementFromCell(c.cell);o.attr("tabindex",0),o.attr("focusable","true"),o.attr("aria-labelledby","".concat(this.visualInstanceId,"-").concat(c.index)),o.removeAttr(V.Rh),this.updateFocusAttributesForRowHeaders(c.index)}this.entryCellKeyMapping=c},n.prototype.getCellKeyMapping=function(c){var f,y=this.boundDataKey;return this.$cells.each(function(){var o=$(this),t=o.data(y);if(t){var a=t.getIndex();if(a===c)return f={cell:o,key:t.getDataPoint().identity,index:a,selectableDataPoint:t.getDataPoint()},!1}}),f},n.prototype.getRowIndexFromCellIndex=function(c){return Math.floor(c/this.columnCount)},n.prototype.getColumnIndexFromCellIndex=function(c){return c%this.columnCount},n.prototype.getCellsPerPage=function(){return this.columnCount*this.viewportRowCount},n.prototype.getFirstCellIndexInRow=function(c){return this.getRowIndexFromCellIndex(c)*this.columnCount},n.prototype.getLastCellIndexInRow=function(c){return Math.min(this.cellCount-1,this.getFirstCellIndexInRow(c)+this.columnCount-1)},n.prototype.getManagedElementFromCell=function(c){return c.find(O.selector).first()},n.prototype.getManagedElementFromRows=function(c,y){return c.find("".concat(y," ").concat(O.selector))},n.prototype.handleCellSelection=function(c,y){(0,P.c8)(c,y)},n.prototype.handleSelectAll=function(c){var y=this.getAllCells();_.isEmpty(y)||c.handleMultipleSelection(y.map(function(f){return f.getDataPoint()}),1)},n.prototype.appendCellToSelection=function(c,y){y.handleMultipleSelection([c],1)},n.prototype.triggerFocusAndSelection=function(c,y,f){return(0,h.__awaiter)(this,void 0,void 0,function(){var t,a;return(0,h.__generator)(this,function(i){switch(i.label){case 0:return[4,this.focusCellAtIndex(c,!1)];case 1:return 1!==i.sent()&&(t=this.getCellKeyMapping(c),a=t?t.selectableDataPoint:void 0,y.selected&&a&&this.appendCellToSelection(a,f)),[2]}})})},n.prototype.updateFocusAttributesForRowHeaders=function(c){var f,y=this;this.manageTabIndexOnRowHeaderFooter?(f=this.getRowIndexFromCellIndex(c),this.$rows.each(function(){var t=$(this),a=y.getManagedElementFromRows(t,d.qN.selector);t.attr("aria-rowindex")===(f+1).toString()?a.attr("tabindex",0).attr("focusable","true").addClass(b.Pg).removeAttr(V.Rh):a.removeAttr("tabindex").removeAttr("focusable").removeClass(b.Pg).attr(V.Rh,"true")})):(f=this.getColumnIndexFromCellIndex(c),y.getManagedElementFromRows(this.$rows,"").each(function(t){var a=$(this);t===f?a.attr("tabindex",0).attr("focusable","true").addClass(b.Pg).removeAttr(V.Rh):a.removeAttr("tabindex").removeAttr("focusable").removeClass(b.Pg).attr(V.Rh,"true")}))},n.prototype.bindClickEvents=function(c,y){var f=this,o=d3.select(c).select(d.J5.selector).node();this.eventManager.on(o,"click",function(){var t=f.getCellKeyMapping(y);t&&f.setEntryCellKeyMapping(t)})},n}()},39071:function(be,Z,g){g.d(Z,{$_:function(){return x},Aq:function(){return m},F6:function(){return p},IA:function(){return a},J3:function(){return o},J5:function(){return d},MB:function(){return n},MR:function(){return f},OC:function(){return M},SM:function(){return c},X2:function(){return k},YR:function(){return t},bL:function(){return b},bU:function(){return P},lP:function(){return w},oE:function(){return y},qN:function(){return O},rj:function(){return V},uT:function(){return v},yD:function(){return i},yT:function(){return s},zc:function(){return B}});var h=g(79154),B=(0,h.CH)("small-multiples-grid-wrapper"),V=(0,h.CH)("small-multiples-grid"),M=(0,h.CH)("small-multiples-grid-border"),m=(0,h.CH)("small-multiples-grid-background"),w=(0,h.CH)("small-multiples-grid-background-color"),b=(0,h.CH)("small-multiples-grid-cell"),d=(0,h.CH)("small-multiples-grid-cell-content"),P=(0,h.CH)("small-multiples-grid-cell-subheader"),O=(0,h.CH)("small-multiples-grid-header-cell"),k=(0,h.CH)("small-multiples-grid-row"),x=(0,h.CH)("small-multiples-grid-footer"),v=(0,h.CH)("small-multiples-grid-body"),p=(0,h.CH)("small-multiples-grid-line"),n=(0,h.CH)("vertical"),c=(0,h.CH)("horizontal"),y=(0,h.CH)("horizontal-wrapper"),f=(0,h.CH)("horizontal-wrapper-bottom"),o=(0,h.CH)("horizontal-outer"),t=(0,h.CH)("small-multiples-grid-row-wrapper"),a=(0,h.CH)("grid-line-rotated"),i=(0,h.CH)("row-header"),s=(0,h.CH)("row-footer")},39407:function(be,Z,g){g.d(Z,{J_:function(){return n},y$:function(){return d}});var h=g(62458),B=g(78843),V=g(26743),M=function(t){return t[t.Leaf=0]="Leaf",t[t.NonLeaf=1]="NonLeaf",t}({});function w(t){return b(t,M.NonLeaf)}function b(t,a){return t&&t.kind===a}function d(t,a,i){if(h.fF.assert(function(){return i>=0},"depth must be greater than or equal to 0"),0===i)return t;h.fF.assert(function(){return w(t)},"rootNode must be non-leaf if depth > 0");for(var s=t,r=function(C){var D=s.children;h.fF.assert(function(){return!_.isEmpty(D)},"currentNode has no children");var L=_.head(D);s=P(L,a)},e=1;e<=i;e++)r();return s}function P(t,a){h.fF.assertValue(t,"node must not be null or undefined"),h.fF.assert(function(){return!function(t){return!!t.visited}(t)},"Detected loop in previous/next references. node has already been visited.");var i=v(t);if(i===a)return t;if(i<a){var s=t.next;h.fF.assertValue(s,"categoryIndex is greater than the greatest maxCategoryIndex"),O(t);var r=P(s,a);return k(t),r}var e=t.previous;return e&&v(e)>=a?(O(t),r=P(e,a),k(t),r):t}function O(t){t.visited=!0}function k(t){delete t.visited}function v(t){return function(t){return b(t,M.Leaf)}(t)?t.categoryIndex:w(t)?t.maxCategoryIndex:void h.fF.assertFail("Unhandled hierarchical node type")}function p(t){if(t.parent){var a=t.parent;if(!_.isEmpty(a.children))return _.last(a.children);var i=p(a);return i&&_.last(i.children)}}function n(t){for(var a=_.head(t).values.length,i={categorySpan:a,children:[],kind:M.NonLeaf,maxCategoryIndex:a,parent:null},s=0;s<a;)s+=c(i,t,0,s);return i}function c(t,a,i,s,r){r||(r=[]);var C,e=a[i],S=r[i];if(!S){h.fF.assertValue(e.source.identityExprs,"levelCategory.source.identityExprs");var D=e.source.identityExprs;(S=r[i]=i>0?r[i-1].slice():[]).push.apply(S,D||[])}var L=function(t,a,i){for(var e,s=0,r=t.values.length,S=a;S<r;S++){var C=o(t,S,i);if(e&&!(0,B.fS)(e,C))break;e||(e=C),s++}return s}(e,s,S),H={categorySpan:L,children:[],kind:M.NonLeaf,maxCategoryIndex:null,parent:t};void 0===C&&(C=p(H)),C&&(H.previous=C,C.next=H);var N=i+1;if(N>=a.length-1)!function(t,a,i,s){for(var r,e=i,S=i+s;e<S;e++){var C={categoryIndex:e,kind:M.Leaf,parent:t,previous:r};void 0===r&&(r=p(C)),r&&(r.next=C,C.previous=r),r=C,t.children.push(C)}}(H,0,s,L);else for(var U=0;U<L;)U+=c(H,a,N,U+s,r);var ne=_.last(H.children);switch(ne.kind){case M.Leaf:H.maxCategoryIndex=ne.categoryIndex;break;case M.NonLeaf:H.maxCategoryIndex=ne.maxCategoryIndex;break;default:h.fF.assertFail("Unhandled HierarchyNodeType")}return t.children.push(H),L}function o(t,a,i){var s=t.identity;h.fF.assertNonEmpty(s,"columnIdentities");var r=s[a];h.fF.assertValue(r,"identity");var e=(0,V.J2)(r.expr,i);return(0,B.TZ)(e)}},57952:function(be,Z,g){g.d(Z,{r:function(){return h}});var h=function(){function B(V,M,m,w,b){void 0===M&&(M=!0),void 0===m&&(m=250),void 0===w&&(w=1700),void 0===b&&(b=100),this.callback=V,this.enabled=M,this.distanceFactor=m,this.timeFactor=w,this.sampleTime=b,this.points=[]}return B.prototype.addPoint=function(V,M){for(var m=this.points,w=Date.now();!(_.isEmpty(m)||w-m[0].timestamp<this.sampleTime);)m.shift();m.push({x:V,y:M,timestamp:w})},B.prototype.hasStarted=function(){return this.started},B.prototype.start=function(){var V=this;if(this.enabled&&!(this.points.length<=1)){this.started&&this.stop();var M=d3.easeCubicOut,m=_.last(this.points),w=_.head(this.points),P=m.timestamp-w.timestamp,O=(m.x-w.x)/P,k=(m.y-w.y)/P,x=window.distanceFactor||this.distanceFactor,v=O*x,p=k*x,n=Math.sqrt(Math.pow(O,2)+Math.pow(k,2))*window.timeFactor||this.timeFactor,c=0,y=0;this.started=!0;var f=d3.timer(function(o){if(V.stopRequested)V.clearState(),f.stop();else{var t=Math.min(1,1*o/n),a=M(t),i=a*v-c,s=a*p-y;c+=i,y+=s,V.callback&&(Math.abs(i)>0||Math.abs(s)>0)&&V.callback(i,s),o>n&&(V.clearState(),f.stop())}})}},B.prototype.stop=function(){this.started&&(this.stopRequested=!0)},B.prototype.clearState=function(){this.started=!1,this.stopRequested=!1},B}()},30237:function(be,Z,g){g.d(Z,{BV:function(){return s},FO:function(){return n},I8:function(){return f},Jv:function(){return N},W3:function(){return i},XM:function(){return ne},YG:function(){return x},a0:function(){return k},bt:function(){return b},c8:function(){return Q},ct:function(){return Y},kW:function(){return L},lt:function(){return P},tn:function(){return W},to:function(){return O},wf:function(){return o},zV:function(){return H}});var h=g(59107),B=g(60066),V=g(66232);function b(){var I=d3.event;return{x:I.clientX,y:I.clientY}}var d="keydown.clearCatcher";function P(I,E){I.on(d,function(){var u=d3.event;67===u.keyCode&&u.ctrlKey&&u.shiftKey&&(E.handleClearSelection(),u.preventDefault(),u.stopPropagation())})}function O(I){I.on(d,null)}function k(I,E){x(I,E),function(I,E){I.on("contextmenu",function(u){!function(I,E){var u=d3.event;if(!h.M.isCtrlOrMeta(u)){u.preventDefault(),(0,V.n)(u);var l=b();E.handleContextMenu(I,l)}}(c(u)?u.data:u,E)})}(I,E)}function x(I,E){I.on("click",function(u){Q(c(u)?u.data:u,E)}),I.on("keydown.select",function(u){var l=d3.event,T=l.keyCode;32!==T&&13!==T||(Q(c(u)?u.data:u,E),l.preventDefault(),l.stopPropagation())},!0)}function n(I){(function(I){I.on("click",null),I.on("keydown.select",null)})(I),function(I){I.on("contextmenu",null)}(I)}function c(I){return!!I.data}var y="keydown.dataPoint";function f(I,E,u){I.on(y,function(){var l=d3.event,T=l.keyCode;(9===T||37===T||39===T||38===T||40===T)&&(L(function(R){l.preventDefault(),l.stopPropagation();var A=function(I){return!!I.data}(R)?R.data:R;E.handleKeyDownEvent(u,A.categoryIndex,A.seriesIndex,T,l.shiftKey)},void 0),d3.select(document.activeElement).dispatch("moveToolTipWithKeyboardAction",{bubbles:!0,cancelable:!1,detail:void 0}))})}function o(I){I.on(y,null)}var a="keydown.enterPlotArea";function i(I,E,u){I.on(a,function(){var l=d3.event,T=l.keyCode;if(13===T)l.preventDefault(),l.stopPropagation(),E.goToFirstElement(u);else if(27===T&&l.target!==I.node()){l.preventDefault(),l.stopPropagation();var R=I.node();h.M.focus(R)}})}function s(I){I.on(a,null)}function L(I,E){var u=d3.event,T=d3.select(u.target).datum();T&&(I(T),E&&(u.preventDefault(),u.stopPropagation()))}function H(I,E,u,l){I.selectAll("use").remove(),I.append("use").attr("href","#".concat(B.aY,"-").concat(E,"-").concat(u)).style("pointer-events","none").attr("role",l??null).attr("aria-hidden",!0).style("fill","none")}function N(I){I.selectAll("use").remove()}function Q(I,E){var u=b(),l=d3.event;(function(I){I.selectionHandled=!0})(l),E.handleSelection(I,(0,h.D)(l),u)}function ne(I,E){var u=d3.event;!h.M.isCtrlOrMeta(u)&&!function(I){return!!I.selectionHandled}(u)&&(!E||E?.(u))&&I.handleClearSelection()}function Y(I,E,u){var l=0;h.M.isCtrlOrMeta(I)?l=3:I.shiftKey&&(l=1),u.handleMultipleSelection(E,l,!0)}function W(I,E,u){u.handleMultipleSelection(I,E,!0)}},33777:function(be,Z,g){g.d(Z,{b:function(){return M}});var h=g(62458),B=g(82386),V=g(45296);function M(w,b,d,P,O,k){return new m(b,d,P,k,O).getWarningMessages(w)}var m=function(){function w(b,d,P,O,k){this.supportsNaN=b,this.supportsNegativeInfinity=d,this.supportsPositiveInfinity=P,this.preferMatrixDV=O,this.ignoreRoles=k}return w.prototype.getWarningMessages=function(b){this.loadWarningStatus(b);var d=[];return this.hasNaN&&!this.supportsNaN&&d.push(new V.EN),(this.hasNegativeInfinity&&!this.supportsNegativeInfinity||this.hasPositiveInfinity&&!this.supportsPositiveInfinity)&&d.push(new V.s2),this.hasOutOfRange&&d.push(new V.TH),d},w.prototype.loadWarningStatus=function(b){this.hasNaN=!1,this.hasNegativeInfinity=!1,this.hasOutOfRange=!1,this.hasPositiveInfinity=!1;for(var d=0,P=b;d<P.length;d++){var O=P[d];h.fF.assertValue(O,"dataView"),this.preferMatrixDV&&O.matrix?this.readMatrix(O):this.readCategorical(O)}},w.prototype.readCategorical=function(b){var d=b&&b.categorical&&b.categorical.values?b.categorical.values:null;if(d)for(var P=this.valueIndicesToIgnore(_.map(d,function(c){return c.source})),O=0,k=d.length;O<k;O++)if(!_.includes(P,O)){var x=d[O];if(x.values)for(var v=0,p=x.values;v<p.length;v++)this.checkValue(p[v])}},w.prototype.valueIndicesToIgnore=function(b){var d=this,P=[];if(!_.isEmpty(this.ignoreRoles))for(var O=0;O<b.length;O++){var k=b[O],x=k&&k.roles&&Object.keys(k.roles);!_.isEmpty(x)&&_.every(x,function(v){return _.includes(d.ignoreRoles,v)})&&P.push(O)}return P},w.prototype.readMatrix=function(b){var d=this;h.fF.assertValue(b.matrix,"dataView.matrix");var P=this.valueIndicesToIgnore(b.matrix.valueSources);(0,B.w1)(b.matrix.rows.root,function(O,k){if((0,B.N9)(O)){if(!O.values)return 1;for(var v=0,p=Object.keys(O.values);v<p.length;v++){var c=O.values[p[v]];_.includes(P,c.valueSourceIndex)||d.checkValue(c&&c.value)}return 1}return d.hasNaN&&d.hasPositiveInfinity&&d.hasNegativeInfinity&&d.hasOutOfRange?0:1})},w.prototype.checkValue=function(b){isNaN(b)?this.hasNaN=!0:b===Number.POSITIVE_INFINITY?this.hasPositiveInfinity=!0:b===Number.NEGATIVE_INFINITY?this.hasNegativeInfinity=!0:(b<-1e300||b>1e300)&&(this.hasOutOfRange=!0)},w}()},91358:function(be,Z,g){g.d(Z,{jz:function(){return n},sq:function(){return v},zl:function(){return p}});var h=g(62458),B="powervisuals-glyph",V="big-kpi",M=["kpi-red","kpi-yellow","kpi-green"],m={kpiIconClass:"circle",statusValues:M},w={kpiIconClass:"",statusValues:["circle-x kpi-red","circle-exclamation kpi-yellow","circle-checkmark kpi-green"]},b={kpiIconClass:"traffic-light",statusValues:M},d={kpiIconClass:"",statusValues:["rhombus kpi-red","triangle kpi-yellow","circle kpi-green"]},P={kpiIconClass:"",statusValues:["circle-empty","circle-one-quarter","circle-half","circle-three-quarters","circle-full"]},O={"THREE CIRCLES COLORED":m,"TRAFFIC LIGHT - SINGLE":m,"THREE FLAGS COLORED":{kpiIconClass:"flag",statusValues:M},"ROAD SIGNS":w,"THREE SYMBOLS CIRCLED COLORED":w,"TRAFFIC LIGHT":b,"THREE TRAFFIC LIGHTS RIMMED COLORED":b,"THREE SYMBOLS UNCIRCLED COLORED":{kpiIconClass:"",statusValues:["x kpi-red","exclamation kpi-yellow","checkmark kpi-green"]},SHAPES:d,"SMILEY FACE":d,THERMOMETER:d,CYLINDER:d,"THREE SIGNS COLORED":d,"THREE STARS COLORED":{kpiIconClass:"star-stacked",statusValues:["star-empty","star-half-full","star-full"]},"FIVE BARS COLORED":{kpiIconClass:"bars-stacked",statusValues:["bars-zero","bars-one","bars-two","bars-three","bars-four"]},"FIVE BOXES COLORED":{kpiIconClass:"boxes-stacked",statusValues:["boxes-zero","boxes-one","boxes-two","boxes-three","boxes-four"]},"FIVE QUARTERS COLORED":P,"GAUGE - ASCENDING":P,"GAUGE - DESCENDING":{kpiIconClass:"",statusValues:["circle-full","circle-three-quarters","circle-half","circle-one-quarter","circle-empty"]},"STANDARD ARROW":{kpiIconClass:"",statusValues:["arrow-down","arrow-right-down","arrow-right","arrow-right-up","arrow-up"]},"VARIANCE ARROW":{kpiIconClass:"",statusValues:["arrow-down kpi-red","arrow-right kpi-yellow","arrow-up kpi-green"]},"STATUS ARROW - ASCENDING":{kpiIconClass:"",statusValues:["arrow-down kpi-red","arrow-right-down kpi-yellow","arrow-right kpi-yellow","arrow-right-up kpi-yellow","arrow-up kpi-green"]},"STATUS ARROW - DESCENDING":{kpiIconClass:"",statusValues:["arrow-up kpi-green","arrow-right-up kpi-yellow","arrow-right kpi-yellow","arrow-right-down kpi-yellow","arrow-down kpi-red"]}};function k(c,y){var f=parseFloat(y);if(c){var o=O[c.graphic.toUpperCase()];if(o&&!isNaN(f)){var t=o.statusValues;return c.normalizedFiveStateKpiRange&&5===t.length&&(f*=2),[o.kpiIconClass,t[f+(t.length>>1)]].join(" ").trim()}}}function x(c,y){if(c)return 1===y?[B,V,c].join(" "):[B,c].join(" ")}function v(c,y,f){return h.fF.assertValue(c,"kpi"),h.fF.assertValue(y,"value"),x(k(c,y),f)}function p(c,y,f){var o=c&&c.kpi;if(o){var t=k(o,y);if(t)return{caption:t,statusGraphic:o.graphic,class:x(t,f)}}}function n(c){return!(!c||!c.kpi)}},12198:function(be,Z,g){g.d(Z,{v:function(){return M}});var h=g(81337),B=g(62458),V=function(m){return m[m.Minimum=0]="Minimum",m[m.Maximum=1]="Maximum",m[m.Neither=2]="Neither",m}({}),M=function(){function m(w,b,d,P,O){var k=this;this.unsortedLabelDataPointGroups=w,this.series=b,this.viewport=d,this.yScale=P,this.y2Scale=O,this.sortDataPointGroup=function(x,v){if(!_.isEmpty(x.labelDataPoints)){var p=x.labelDataPoints,n=k.series[v],c=m.maxNumberToSortFactor*x.maxNumberOfLabels,y=_.some(n.data,function(r){return r?.highlight})?function(r){return null!=r?.value&&r.highlight}:function(r){return null!=r?.value},f=_.filter(n.data,y);B.fF.assert(function(){return f.length===p.length},"expecting lengths dataPoints and labelDataPoints to match");var o=m.getMinMaxInRange(0,f.length-1,f),t=[],a=function(){return(0,h.__assign)((0,h.__assign)({},x),{labelDataPoints:t})};if((c-=k.addFirstLastMaxMin(p,t,o.maxIndex,o.minIndex))<=0)return a();var s=k.calculateWeights(p,f,o,n.isY2?k.y2Scale:k.yScale);return(c-=k.addLocalMinMaxes(s,t,o.maxIndex,o.minIndex,c))<=0||k.addNonMinMaxes(s,t,c),a()}}}return m.prototype.getSortedDataLabels=function(){return this.unsortedLabelDataPointGroups.map(this.sortDataPointGroup).filter(function(w){return w})},m.prototype.calculateWeights=function(w,b,d,P){for(var O,k,x=b.length,v=this.findMinMaxesBasedOnSmoothedValues(w,b),p=Math.abs(P(d.maxValue)-P(d.minValue)),n=0,c=v.length;n<c;n++){k=v[n];var y=void 0;if(O&&(y=(Math.abs((P(O.value)-P(k.value))/p)+Math.abs(O.index-k.index)/(x-1))/2),null!=y&&O){var t=w[O.index];t.weight=null!=t.weight?(t.weight+y)/2:y,w[k.index].weight=y}O=k}for(var a=0,i=w;a<i.length;a++){var s=i[a];s.weight<m.minimumWeightToConsiderMinMax&&(s.weight=void 0)}return w},m.prototype.findMinMaxesBasedOnSmoothedValues=function(w,b){for(var d=[],P=this.getWindowSize(b),O=P>>1,k=this.calculateSmoothedValues(b,P),x=0,v=w.length;x<v;x++){var p=this.getMinMaxType(x,k);p!==V.Neither&&d.push({index:x,type:p,value:b[x].value})}for(var c,y,f,o=0,t=d.length;o<t;o++)if(y=d[o],f=d[o+1],(c=d[o-1])&&f){var i,a=m.getMinMaxInRange(Math.max(c.index,y.index-O),Math.min(f.index,y.index+O),b);y.type===V.Maximum?(y.index=i=a.maxIndex,y.value=b[i].value):(y.index=i=a.minIndex,y.value=b[i].value)}return d},m.getMinMaxInRange=function(w,b,d){for(var P,O,k,x,v=w,p=d.length;v<=b&&v<p;v++){var n=d[v].value;null!=n&&((void 0===P||n<P)&&(P=n,k=v),(void 0===O||n>O)&&(O=n,x=v))}return{minIndex:k,minValue:P,maxIndex:x,maxValue:O}},m.prototype.getWindowSize=function(w){return 1|w.length/this.viewport.width*m.estimatedLabelWidth},m.prototype.calculateSmoothedValues=function(w,b){for(var d=m.getGaussianDistribution(b),P=[],O=0,k=w.length;O<k;O++)if(1===b)P.push(w[O].value);else{var x=this.getSmoothedValue(w,O,b,d);P.push(x)}return P},m.getGaussianDistribution=function(w){B.fF.assert(function(){return w/2!=w>>1},"window size should be a whole odd number");for(var b=[],d=w>>1,O=d,k=d/2,x=0;x<d;x++){var v=1*Math.pow(Math.E,(x-O)*(x-O)*-1/(2*k*k));b.push(v)}for(b.push(1),x=d-1;x>=0;x--)b.push(b[x]);return b},m.prototype.getSmoothedValue=function(w,b,d,P){if(null==w[b].value)return w[b].value;for(var O=d>>1,x=b+O,v=0,p=0,n=w.length-1,c=b-O,y=0;c<=x;c++,y++){var o=w[Math.max(0,Math.min(c,n))].value;null!=o&&(v+=o*P[y],p++)}return v/p},m.prototype.addFirstLastMaxMin=function(w,b,d,P){var O=0;if(_.isEmpty(w))return O;b.push(w[0]),O++;var k=w.length-1;return 0!==k&&(b.push(w[k]),O++),0!==d&&d!==k&&(b.push(w[d]),O++),0!==P&&P!==k&&(b.push(w[P]),O++),O},m.prototype.addLocalMinMaxes=function(w,b,d,P,O){for(var k=w.length-1,x=_.filter(w,function(y,f){return 0!==f&&f!==k&&f!==d&&f!==P&&null!=y.weight}),v=_.sortBy(x,function(y){return-y.weight}),p=0,n=0,c=Math.min(v.length,O);n<c;n++)b.push(v[n]),p++;return p},m.prototype.addNonMinMaxes=function(w,b,d){for(var O,P=[],k=0,x=w.length;k<x;k++)null==w[k].weight?O?O.count++:O={startingIndex:k,count:1}:O&&O.count>0&&(P.push(O),O=null);for(var v=0;P.length>0&&v<d;){for(var p=0,n=0,c=0,y=P.length;c<y;c++){var f=P[c].count;f>p&&(p=f,n=c)}var o=P.splice(n,1)[0];if(1===o.count)b.push(w[o.startingIndex]);else{var t=(o.count>>1)+o.startingIndex;b.push(w[t]);var a=t-o.startingIndex;a>0&&P.push({startingIndex:o.startingIndex,count:a});var i=o.startingIndex+o.count-t-1;i>0&&P.push({startingIndex:t+1,count:i})}v++}},m.prototype.getMinMaxType=function(w,b){var d=b[w];if(null==b[w]||b.length<2)return V.Neither;if(null==b[w-1])return b[w+1]>d?V.Minimum:V.Maximum;if(null==b[w+1])return b[w-1]>d?V.Minimum:V.Maximum;var P=b[w-1],O=b[w+1];return null==P&&null==O?V.Neither:null==P?O>d?V.Minimum:V.Maximum:null==O?P>d?V.Minimum:V.Maximum:P>d&&d<O?V.Minimum:P<d&&d>O?V.Maximum:V.Neither},m.estimatedLabelWidth=40,m.minimumWeightToConsiderMinMax=.015,m.maxNumberToSortFactor=2,m}()},86727:function(be,Z,g){g.d(Z,{Gh:function(){return d},ZF:function(){return w},aJ:function(){return b},l3:function(){return k},tV:function(){return P},tY:function(){return O}});var h=g(81337),B=g(56578),V=g(69871),M=g(80065),m={show:{objectName:"legend",propertyName:"show"},position:{objectName:"legend",propertyName:"position"},showTitle:{objectName:"legend",propertyName:"showTitle"},titleText:{objectName:"legend",propertyName:"titleText"},labelColor:{objectName:"legend",propertyName:"labelColor"},fontSize:{objectName:"legend",propertyName:"fontSize"},fontFamily:{objectName:"legend",propertyName:"fontFamily"},showGradientLegend:{objectName:"legend",propertyName:"showGradientLegend"},bold:{objectName:"legend",propertyName:"bold"},italic:{objectName:"legend",propertyName:"italic"},underline:{objectName:"legend",propertyName:"underline"}};function w(x,v,p,n,c){void 0===n&&(n=!1),null==c&&(c=p.onObject?"Visual_LegendCard_DisabledReasonNew":"Visual_LegendCard_DisabledReason");var y=x.legendData,f=[m.show,m.showGradientLegend,m.position,m.showTitle,m.titleText,m.labelColor,m.fontFamily,m.fontSize,V.zK.legend.legendMarkerRendering,V.zK.legend.matchLineColor,m.bold,m.italic,m.underline],o=new B.CQ(new B.lg("legend"),"Role_DisplayName_Legend",f,function(i){return v.getLocalizedString(i)});if(o.addTopLevelToggle("show",function(){return new B.bd({descriptor:m.show,value:!n&&y.show}).build()}),n)return o.withDisabled(!0,c),o.build();var a=(new B.UN).withFontFamily({descriptor:m.fontFamily,value:y.fontProperties.family}).withFontSizeProperties({descriptor:m.fontSize,value:y.fontProperties.size.pt}).withBold({descriptor:m.bold,value:y.bold}).withItalic({descriptor:m.italic,value:y.italic}).withUnderline({descriptor:m.underline,value:y.underline}).build();return o.withDescription("Visual_LegendDescription").addGroup("options",function(i){i.withDisplayName("Desktop_FileMenu_Options"),i.addSimpleSlice("position",new B.uY({descriptor:m.position,value:y.position}).build()),null!=x.legendMarkerRendering&&i.addSimpleSlice("markerRendering",new B.uY({descriptor:V.zK.legend.legendMarkerRendering,value:x.legendMarkerRendering}).build()),null!=x.matchLineColor&&i.addSimpleSlice("matchLineColor",new B.bd({descriptor:V.zK.legend.matchLineColor,value:x.matchLineColor}).build())}),o.addGroup("text",function(i){i.withDisplayName("Text").addCompositeSlice("fontselector","Font",a).addSimpleSlice("color",new B.BT({descriptor:(0,h.__assign)((0,h.__assign)({},m.labelColor),{instanceKind:3}),value:{value:y.fontProperties.color}}).build())}).addGroup("title",function(i){i.withDisplayName("Title").addTopLevelToggle("showTitle",function(){return new B.bd({descriptor:m.showTitle,value:y.showTitle}).build()}).addSimpleSlice("titleText",new B.fq({descriptor:m.titleText,value:y.title,placeholder:""}).build(),function(s){return s.withCustomDisplayName("Visual_Title_Text")})}),o.build()}function b(){}function d(x){return(0,M.un)(x,{fontFamilyReference:m.fontFamily,fontSizeReference:m.fontSize,boldReference:m.bold,italicReference:m.italic,underlineReference:m.underline,fontColorReference:m.labelColor})}function P(x){return[(0,h.__assign)((0,h.__assign)({type:2},m.showTitle),{disabledLabel:x.getLocalizedString("Delete"),keyboardShortcuts:[{key:"Delete",nextValue:!1}]}),{type:0,excludedResetFormattingIds:[m.showTitle]},{type:1,destinationInfo:{cardUid:"".concat("Visual","-").concat("legend"),groupUid:"".concat("legend","-").concat("title")},label:x.getLocalizedString("Format_Legend_Title")}]}function O(x){var v=x.hostServices,p=x.showSort,n=[(0,h.__assign)((0,h.__assign)({type:2},m.show),{disabledLabel:v.getLocalizedString("Delete"),keyboardShortcuts:[{key:"Delete",nextValue:!1}]}),{type:0,excludedResetFormattingIds:[m.show,m.showTitle]},(0,h.__assign)((0,h.__assign)({type:2},m.showTitle),{enabledLabel:v.getLocalizedString("Format_AddLegendTitle")})];return p&&n.push({type:4,sortableField:{queryName:"",sortDirection:1},label:v.getLocalizedString("Format_SortLegend"),key:"Legend"}),(0,h.__spreadArray)((0,h.__spreadArray)([],n,!0),[{type:1,destinationInfo:{cardUid:"".concat("Visual","-").concat("legend"),groupUid:"".concat("legend","-").concat("options")},label:v.getLocalizedString("Format_Legend")}],!1)}function k(x){return _.map(x.dataPoints,function(v){return{color:v.marker.color,displayName:v.label,identity:v.identity}})}},70569:function(be,Z,g){g.d(Z,{vs:function(){return Re},hD:function(){return ge},OG:function(){return we}});var h=g(81337),B=g(62458),V=g(39681),M=g(48708),m=g(38078),w=g(10389),b=g(44977),d=g(32105),p=g(70700),n=g(79811),c=g(32041),y=g(59107),f=g(64329),o=g(66001),t=g(72489),a=g(18664),i=g(51995),s=g(66123),r=g(51660),e=g(77686),S=g(14599),C=g(72902),D=g(30237),L=function(){function F(){}return F.prototype.bindEvents=function(J,X,q,G){var le;this.legendIcons=J.legendIcons,this.legendLines=J.legendLines,this.visualStyle=J.visualStyle;var ie=J.legendRoot;this.legendItems=J.legendItems,G?this.unbindEventsFormatMode():((0,D.lt)(ie,X),ie.on("keydown",function(){var de=d3.event;if(y.M.noModifierPressed(de)&&27===de.keyCode&&de.target.classList.contains(e.rL.class)){var ce=ie.node();y.M.focus(ce),de.preventDefault(),de.stopPropagation()}return!1}),this.legendItems.on("click",function(de){return(0,D.c8)(de.dataPoint,X)}).on("keydown",function(de){var ce=d3.event.keyCode;(32===ce||13===ce)&&(0,D.c8)(de.dataPoint,X)}),null===(le=J.clearCatcher)||void 0===le||le.on("click",function(){y.M.isCtrlOrMeta(d3.event)||X.handleClearSelection()}))},F.prototype.unbindEventsFormatMode=function(){this.legendItems.on("click",null).on("keydown",null)},F.prototype.renderSelection=function(J){this.legendItems.attr("aria-selected",function(X){return J&&X.dataPoint.selected}),(0,e.t9)(this.legendLines,this.legendIcons,J,this.visualStyle.isHighContrast)},F}(),H=g(79154),Ue=(g(38265),(0,H.CH)("tooltip-container"),(0,H.CH)("tooltip-light"),(0,H.CH)("tooltip-content-container"),(0,H.CH)("tooltip-data-container"),(0,H.CH)("tooltip-icon-cell"),(0,H.CH)("tooltip-line-icon"),(0,H.CH)("tooltip-marker-icon"),(0,H.CH)("tooltip-header"),(0,H.CH)("tooltip-subheader"),(0,H.CH)("tooltip-footer"),(0,H.CH)("tooltip-discoverabilityText"),(0,H.CH)("tooltip-rows-container"),(0,H.CH)("tooltip-row"),(0,H.CH)("tooltip-title-cell"),(0,H.CH)("tooltip-value-cell"),(0,H.CH)("tooltip-kpi-cell"),(0,H.CH)("arrow"),d.B.createFromPt(9),d.B.createFromPx(10),g(2241));function He(F){var J,X,q,G=F.data,le=F.parentViewport,ie=F.interactivityService,de=F.orientation,ce=F.legendDataStartIndex,oe=F.hostServices,ye=F.showTitlePlaceholder,Se=G.fontProperties,_e=(0,e.XZ)(Se),Ae=(0,e.fy)(G),Ye=function(F){var J,X,q=F.data;if(!(0,e.fy)(q))return{height:0,width:0};switch(F.orientation){case p.tV.Top:case p.tV.Bottom:case p.tV.TopCenter:case p.tV.BottomCenter:case p.tV.TopRight:case p.tV.BottomRight:return{height:dt+(null!==(X=null===(J=q?.fontProperties)||void 0===J?void 0:J.size.px)&&void 0!==X?X:f.FP.fromPointToPixel(e.OS.pt))-e.OS.pt,width:0};case p.tV.Right:case p.tV.Left:case p.tV.RightCenter:case p.tV.LeftCenter:return{height:0,width:F.lastCalculatedWidth||F.parentViewport.width*it};default:B.fF.assertFail("Unexpected legend position - calculateViewport")}}(F),lt=null!==(X=null===(J=G?.fontProperties)||void 0===J?void 0:J.size.px)&&void 0!==X?X:f.FP.fromPointToPixel(e.OS.pt),je=lt-ft,Ne=G.showTitle&&!G.isGradientLegend?re((0,h.__assign)((0,h.__assign)({},F),{legendFontSizeMarginDifference:je,legendFontSizeMarginValue:lt,legendViewport:Ye})):null,ke=c.b.estimateSvgTextHeight((0,a.qk)(Se))/rt;(lt<=ft||ke<Ke)&&(ke=Ke);var Ge=je/rt,qe=2*(ke+Ge),ut=31+2*Ge,wt=vt+Ge,Dt=ie&&(0,C.G6)(G.dataPoints),Nt=(0,e.s0)(de)?Ye.height:20+je,Ot=(0,e.s0)(de)?function(F,J,X,q){var ce,G=X.height/2-yt/2,le=(0,w.AD)(j,yt,180),ie=(0,w.AD)(j,yt,0),de=0;if(q.useLargeArrowHitArea){var oe=Ct.Horizontal;de=oe.arrowsOffset,ce=oe.hitAreaWidthPx}return{previous:{show:!1,x:F?F.x+F.width:0,y:G,path:le.path,rotateTransform:le.transform,type:1,arrowOffset:de||0,hitAreaWidth:ce||Lt},next:{show:!1,x:J.width-j,y:G,path:ie.path,rotateTransform:ie.transform,type:0,arrowOffset:de||0,hitAreaWidth:ce||Lt}}}(Ne,le,Ye,G):function(F,J,X,q){var oe,G=X.height/2+yt/2,le=(0,w.AD)(j,yt,270),ie=(0,w.AD)(j,yt,90),ce=0;if(q.useLargeArrowHitArea){var ye=Ct.Vertical;ce=ye.arrowsOffset,oe=ye.hitAreaWidthPx}return{previous:{show:!1,x:G,y:j+(F?F.height:0),path:le.path,rotateTransform:le.transform,type:1,arrowOffset:ce,hitAreaWidth:oe},next:{show:!1,x:G,y:J.height-yt,path:ie.path,rotateTransform:ie.transform,type:0,arrowOffset:ce,hitAreaWidth:oe}}}(Ne,le,Ye,G);F.isScrollable&&F.legendDataStartIndex>0&&(Ot.previous.show=!0);var xt,Wt,Gt,Ft=F.arrowPosWindow,ot=function(){var nt=function(F){var J=F.fontProperties,X=F.titleLayout,q=F.navigationArrows,G=F.iconWidth,le=F.iconAndLineWidth,ie=F.options,de=ie.parentViewport,ce=ie.data.dataPoints,oe=ie.legendDataStartIndex,ye=ie.autoWidth;if((0,e.s0)(F.options.orientation)){var Se=de.width-(X?X.width:0)-(q.previous.show&&q.previous.hitAreaWidth||0)-(q.next.show&&q.next.hitAreaWidth||0);return{legendItems:Ie(ce,Se,oe,J,G,le,F.totalTextPadding),horizontalLegendWidth:Se}}var _e=_.some(ce,function(lt){return lt.line}),Ye=function(F){for(var J=F.dataPoints,X=F.maxHorizontalSpaceAvailable,q=F.fontProperties,G=F.legendDataStartIndex,le=[],ie=Math.min(Math.floor(F.legendItemContainerHeight/F.legendItemHeight),J.length),de=F.titleWidth||0,ce=0,oe=J.length;ce<oe;ce++){var ye=J[ce],Se=(0,a.qk)(q,ye.label),_e=c.b.measureSvgTextWidth(Se);if(_e>de&&(de=Math.min(_e,X)),ce>=G&&ce<G+ie){var Ae=_e;Ae>X&&(Se.text=c.b.getTailoredTextOrDefault(Se,X),_e=c.b.measureSvgTextWidth(Se)),le.push({dataPoint:ye,desiredOverMaxWidth:_e>X,textProperties:Se,desiredWidth:Ae,width:_e})}}return{legendItems:le,horizontalWidthUsed:de}}({dataPoints:ce,legendItemContainerHeight:de.height-(X?X.height:0)-(q.previous.show?yt:0)-(q.next.show?yt:0),maxHorizontalSpaceAvailable:(ye?F.options.parentViewport.width*it:F.options.lastCalculatedWidth)-(_e?le:G)-bt,legendDataStartIndex:oe,fontProperties:J,titleWidth:X?X.width:void 0,legendItemHeight:F.svgHeight});return{legendItems:Ye.legendItems,verticalLegendWidth:ye?Math.ceil(Ye.horizontalWidthUsed+(_e?le:G)+bt):F.options.lastCalculatedWidth}}({fontProperties:Se,options:F,navigationArrows:Ot,titleLayout:Ne,iconWidth:qe,iconAndLineWidth:ut,svgHeight:Nt,totalTextPadding:wt});if(xt=nt.legendItems,Wt=nt.verticalLegendWidth,Gt=nt.horizontalLegendWidth,F.isScrollable){var Et=xt.length;Ot.next.show=Et!==G.dataPoints.length-ce,Ft=Ot.next.show?Et:Ft}};ot(),Ot.next.show&&(ot(),B.fF.assert(function(){return Ot.next.show},"We must still have next-show set to true")),null!=Wt&&(Ye.width=Wt),Ne&&Wt&&Wt>Ne.width&&(Ne=G.showTitle?re((0,h.__assign)((0,h.__assign)({},F),{legendFontSizeMarginDifference:je,legendFontSizeMarginValue:lt,legendViewport:Ye})):null);var gt=(0,e.s0)(de),st=!gt,tt=F.element.select(e.wT.selector),pt=oe?oe.getLocalizedString("Visual_Legend"):null;Ae?(tt.empty()&&(tt=F.element.append("div").classed(e.wT.class,!0).styles({position:"absolute"}),ie&&tt.attrs({tabindex:0,role:"region","focus-nav-mode":"HierarchicalTabOrder","aria-label":pt?.concat(G.showTitle&&G.title?" ".concat(G.title):"")}).attr("data-testid","legend")),tt.classed("flex-row",gt).classed("flex-column",st).classed("flex-justify-content-center",(0,e.EH)(de)).classed("flex-justify-content-start",(0,e.F3)(de)).classed("flex-justify-content-end",(0,e.Ok)(de)).classed("flex-align-items-center",gt&&!G.isGradientLegend).classed("flex-align-items-start",st||G.isGradientLegend).styles({"padding-top":G.isGradientLegend?"3px":"null"}),ie&&tt.attrs({"aria-label":pt?.concat(G.showTitle&&G.title?" ".concat(G.title):"")})):tt.remove();var It=tt.select(e.NT.selector).empty();(G.isGradientLegend?It:!It)&&tt.selectAll("*").remove();var Rt=tt.select(".clearCatcher");if(Rt.empty()&&(Rt=(0,C.EX)(tt,"div")),Rt.style("position","absolute").style("width","100%").style("height","100%"),F.formatMode?(0,C.kA)(tt,"div"):(0,C.ku)(tt,"div"),ae(Ye,F.orientation,tt,Ae,le),!Ae)return{width:0,height:0};var At=tt.select(e.OF.selector);if(At.empty()&&(At=tt.append("div").classed(e.OF.class,!0).classed("flex-align-items-center",!0).classed("flex-order-third",!0).classed("flex-justify-context-start",!0).style("position","relative")),At.classed("flex-grow",Ot.next.show||Ot.previous.show).classed("flex-row",gt).classed("flex-column",st).classed("flex-align-items-center",gt).classed("flex-align-items-start",st).classed(e.NT.class,G.isGradientLegend).attr("width",Gt).attr("role","listbox").attr("aria-label",function(){return F.hostServices&&Ne&&Ne.text?Ne.text:F.hostServices?pt:null}),F.onObject&&At.classed(r.cy,!0).attr(r.Ez,"legend-items").attr(r.CK,"Visual_Legend").attr(r.QZ,1),F.data.isGradientLegend)!function(F,J,X,q,G,le){var ie,de,lt,ke,Ge,ce=F.data.gradientRule.options.linearGradient2?F.data.gradientRule.options.linearGradient2:F.data.gradientRule.options.linearGradient3,oe=F.data.fontProperties,ye=oe.size.px,_e=0,Ae=(0,t.Ue)({value:ce.min.value,value2:ce.max.value,format:(0,t.EO)(F.data.gradientRule.source,S.e0.formatString)}),Ye=(0,a.qk)(oe),je=Ae.format(ce.min.value),Ne={width:c.b.measureSvgTextWidth(Ye,je),height:c.b.measureSvgTextHeight(Ye,je)};lt="".concat(F.hostServices.getLocalizedString("ConditionalFormattingDialog_LowestValue")," ").concat(je,", "),Be(ce)&&(ke=Ae.format(ce.mid.value),Ge={width:c.b.measureSvgTextWidth(Ye,ke),height:c.b.measureSvgTextHeight(Ye,ke)},lt+="".concat(F.hostServices.getLocalizedString("ConditionalFormattingDialog_MiddleValue")," ").concat(ke,", "));var qe=Ae.format(ce.max.value),ut={width:c.b.measureSvgTextWidth(Ye,qe),height:c.b.measureSvgTextHeight(Ye,qe)};lt+="".concat(F.hostServices.getLocalizedString("ConditionalFormattingDialog_HighestValue")," ").concat(qe);var st,pt,It,zt,Rt,Ft=.5*F.parentViewport.width,ot=.25*ye,gt=1.5*ye,tt=gt,At=[];if(J){pt=Ne.width+ot+(st=6*ye)+ot+ut.width,It=gt+ot,_e=Tt=gt/2,Rt=[{text:je,text_anchor:"start",x:0,y:Tt,width:Ne.width,height:tt},{text:qe,text_anchor:"start",x:Ut=Ne.width+ot+st+ot,y:Tt,width:ut.width,height:tt}];var _t=Ne.width+ot;if(zt=[{fill:"url(#legendGradient-".concat(F.hostServices.instanceId,")"),fill_opacity:"1",x:_t,y:0,width:st,height:gt}],Be(ce)){It+=1.25*ye;var Bt=ze(ce);Rt.splice(1,0,{text:ke,text_anchor:"middle",x:_t+Bt*st,y:gt+ot+ye/2,width:Ge.width,height:tt}),At=[{x1:_t+Bt*st,x2:_t+Bt*st,y1:0,y2:gt+ot,stroke:null!==(ie=oe.color)&&void 0!==ie?ie:F.visualStyle.colorPalette.foregroundNeutralDark.value,stroke_width:"1"}]}}else{if(st=Be(ce)?6*ye:10*ye,(pt=Be(ce)?Ne.width+ot+st+ot+ut.width:st+ot)>Ft){It=Ft;var Ht=function(F,J,X,q,G,le,ie,de){var ce,oe;return ie?(ce=.6*(oe=F-2*de),le.text=X,X=c.b.getTailoredTextOrDefault(le,.2*oe),J.width=c.b.measureSvgTextWidth(le,X),le.text=G,G=c.b.getTailoredTextOrDefault(le,.2*oe),q.width=c.b.measureSvgTextWidth(le,G)):(ce=oe=F-de,le.text=X,X=c.b.getTailoredTextOrDefault(le,ce/2),J.width=c.b.measureSvgTextWidth(le,X),le.text=G,G=c.b.getTailoredTextOrDefault(le,ce/2),q.width=c.b.measureSvgTextWidth(le,G)),{gradientWidth:ce,minValueString:X,minValueWidth:J.width,maxValueString:G,maxValueWidth:q.width}}(Ft,Ne,je,ut,qe,Ye,Be(ce),ot);st=Ht.gradientWidth,je=Ht.minValueString,Ne.width=Ht.minValueWidth,qe=Ht.maxValueString,ut.width=Ht.maxValueWidth}if(Be(ce)){pt=Ne.width+ot+st+ot+ut.width,It=8+3*ye;var Tt=8+gt/2,Ut=Ne.width+ot+st+ot;Bt=ze(ce),Rt=[{text:je,text_anchor:"start",x:0,y:Tt,width:Ne.width,height:tt},{text:ke,text_anchor:"middle",x:(_t=Ne.width+ot)+Bt*st,y:8+gt+ot+ye/2,width:Ge.width,height:tt},{text:qe,text_anchor:"start",x:Ut,y:Tt,width:ut.width,height:tt}],At=[{x1:_t+Bt*st,x2:_t+Bt*st,y1:8,y2:8+gt+ot,stroke:null!==(de=oe.color)&&void 0!==de?de:F.visualStyle.colorPalette.foregroundNeutralDark.value,stroke_width:"1"}],zt=[{fill:"url(#legendGradient-".concat(F.hostServices.instanceId,")"),fill_opacity:"1",x:_t,y:8,width:st,height:gt}]}else It=16+3*ye,Rt=[{text:je,text_anchor:"start",x:0,y:Tt=16+2*ye,width:(pt=st+ot)/2,height:tt},{text:qe,text_anchor:"start",x:pt-ot-ut.width,y:Tt,width:pt/2,height:tt}],zt=[{fill:"url(#legendGradient-".concat(F.hostServices.instanceId,")"),fill_opacity:"1",x:0,y:8,width:st,height:gt}]}X.height=J?Math.max(X.height,It):X.height,X.width=J?X.width:Math.max(X.width,pt)+bt,ae(X,F.orientation,G,le,F.parentViewport,!0),function(F,J,X,q,G,le,ie){var oe,ye,de=(0,a.qk)((0,e.XZ)(F.data.fontProperties),F.data.title),ce=[];if(J)ce=[{dy:"0.35em",word:(oe=[c.b.getTailoredTextOrDefault(de,F.parentViewport.width-X.width-ht/2-2*bt)])[0]}],ye={height:X.height,width:c.b.measureSvgTextWidth(de,oe[0])};else{var _e=c.b.measureSvgTextHeight(de,F.data.title),Ye=Math.min(3,Math.floor((F.parentViewport.height-X.height-8-2*bt)/_e));oe=(0,o.ql)(F.data.title,de,c.b.measureSvgTextWidth,X.width,Ye,c.b.getTailoredTextOrDefault,!0);for(var lt=0;lt<oe.length;lt++)ce.push({dy:String(_e),word:oe[lt]});ye={height:(oe.length+.5)*_e,width:X.width}}var je=F.data.showTitle&&!_.isEmpty(F.data.title)?[0]:[],Ne=q.selectAll(e.fD.selector).data(je),ke=Ne.enter().append("svg").classed(e.fD.class,!0).merge(Ne);ke.attr("height",ye.height).attr("width",ye.width).styles({"padding-right":"".concat(ht/2,"px")});var Ge=ke.selectAll("text").data([0]),qe=Ge.enter().append("text").merge(Ge);qe.classed("flex-order-first",!0).styles((0,a.wB)((0,e.XZ)(F.data.fontProperties))).styles({"text-overflow":"ellipsis","white-space":"pre"}).attr("fill",F.data.fontProperties.color).attr("title",F.data.title).attr("x",0).attr("y",le).text(null);var ut=qe.selectAll("tspan").data(ce);ut.enter().append("tspan").merge(ut).attr("dy",function(Dt){return Dt.dy}).attr("x",0).text(function(Dt){return Dt.word}),ut.exit().remove(),Ge.exit().remove(),Ne.exit().remove()}(F,J,{height:It,width:pt},G,0,_e);var jt=function(F,J,X,q,G){var le=J.selectAll("svg").data([F]).join("svg").attr("width",function(de){return de.width}).attr("height",function(de){return de.height}).attrs({tabindex:0,"aria-label":G}),ie=le.selectAll("defs").data([0]).join("defs");return ie.append("linearGradient").attr("id",q),ie.select("linearGradient").selectAll("stop").data((0,h.__spreadArray)((0,h.__spreadArray)([{stop:0,color:X.min.color}],Be(X)?[{stop:ze(X),color:X.mid.color}]:[],!0),[{stop:1,color:X.max.color}],!1),function(de){return de.stop.toString()}).join("stop").attr("stop-color",function(de){return de.color}).attr("offset",function(de){return de.stop}),le}({width:pt,height:It},q,ce,"legendGradient-".concat(F.hostServices.instanceId),lt);(function(F,J,X){J.selectAll("g.rect").data([0]).join(function(q){return q.append("g").classed("rect",!0)}).call(function(q){q.selectAll("rect").data(F).join("rect").attr("fill",function(G){return G.fill}).attr("fill-opacity",function(G){return G.fill_opacity}).attr("x",function(G){return G.x}).attr("y",function(G){return G.y}).attr("width",function(G){return G.width}).attr("height",function(G){return G.height}),q.selectAll("line").data(X).join("line").attr("x1",function(G){return G.x1}).attr("x2",function(G){return G.x2}).attr("y1",function(G){return G.y1}).attr("y2",function(G){return G.y2}).styles({stroke:function(le){return le.stroke}}).styles({"stroke-width":function(le){return le.stroke_width}})})})(zt,jt,At),function(F,J,X){var q=J.selectAll("g.text").data([0]),le=q.enter().append("g").classed("text",!0).merge(q).selectAll("text").data(F).join("text").text(function(ie){return ie.text}).attr("text-anchor",function(ie){return ie.text_anchor}).attr("x",function(ie){return ie.x}).attr("y",function(ie){return ie.y}).attr("width",function(ie){return ie.width}).attr("dy","0.35em").attr("height",function(ie){return ie.height}).styles((0,a.E_)(X));le.selectAll("title").data(function(ie){return[ie.text]}).join("title").text(function(ie){return ie})}(Rt,jt,oe)}(F,gt,Ye,At,tt,Ae);else{tt.selectAll(e.fD.selector).data(Ne?[Ne]:[]).join(function(Ze){return Ze.insert("text",".clearCatcher")}).classed(e.fD.class,!0).classed("flex-order-first",!0).attr("title",G.title).styles((0,a.wB)(_e)).styles({"text-overflow":"ellipsis","white-space":"pre","padding-right":"".concat(ht/2,"px"),position:"relative"}).text(function(Ze){return Ze.text}).filter(function(){return F.onObject}).classed(r.cy,!0).classed(r.Qh.class,Ne?.isPlaceholder).attr(r.Ez,"legend-title").attr(r.CK,"MiniToolbar_LegendTitle").attr(r.QZ,0).filter(function(){return F.formatMode||ye}).attr(r.kv,JSON.stringify({reference:S.N_.legend.titleText,style:3}));var Ut=function(nt){return nt.dataPoint.identity.getKey()+(null!=nt.dataPoint.layerNumber?nt.dataPoint.layerNumber:"")},Tt=At.selectAll(e.rL.selector).data(_.uniqBy(xt,Ut),Ut),_t=Tt.enter().append("div").classed(e.rL.class,!0).classed("flex-justify-content-center",!0).classed("flex-align-items-center",!0).attr("role","option");ie&&_t.attr("tabindex",0).attr("data-testid","legend-item");var Bt=null!==(q=oe?.getLocalizedString("NullValue"))&&void 0!==q?q:null,kt=_t.merge(Tt);kt.attr("aria-label",function(Ze){return F.hostServices?Ze.dataPoint.label?Ze.dataPoint.label:Bt:null}).attr("aria-selected",function(Ze){return Dt&&Ze.dataPoint.selected}).attr("aria-posinset",function(Ze){return Ze.dataPoint.index+1}).attr("aria-setsize",G.dataPoints.length),kt.sort(function(Ze,nt){var Et=Ze.dataPoint,Vt=nt.dataPoint;if(null!=Et.layerNumber){B.fF.assertValue(Vt.layerNumber,"Both datapoints should have a layerNumber");var Yt=Et.layerNumber-Vt.layerNumber;if(0!==Yt)return Yt}return Et.index-Vt.index}),Tt.exit().remove();var Kt=_t.append("svg").classed(e.PR.class,!0).style("overflow","visible");Kt.append("path").classed(e.az.class,!0).append("title"),Kt.append("path").classed(e.x4.class,!0).append("title"),_t.append("text").classed(e.dy.class,!0).styles({"text-overflow":"ellipsis","white-space":"pre"}),kt.select(e.PR.selector).attrs({height:Nt,width:function(nt){return nt.dataPoint.line?ut:qe}});var jt=kt.select(e.az.selector);jt.attrs({transform:(0,w.Iu)(15.5,Nt*St),d:function(nt){return nt.dataPoint.line?"M -".concat(15.5," 0 L ").concat(15.5," 0"):null},fill:"none"}).styles(function(Ze){return(0,Ue.bc)(Ze.dataPoint.line)});var $t=kt.select(e.x4.selector);$t.attrs({transform:function(nt){return(0,w.aI)((nt.dataPoint.line?ut:qe)/2,Nt*St,ke/s.$V)},d:function(nt){return(0,i.Ar)(nt.dataPoint.marker.shape)}}).styles(function(Ze){return(0,Ue.bc)(Ze.dataPoint.marker.stroke)}).styles({display:function(nt){return nt.dataPoint.marker.show?"block":"none"},fill:function(nt){return nt.dataPoint.marker.color},stroke:function(nt){var Et,Vt;return null!==(Vt=null===(Et=nt.dataPoint.marker.stroke)||void 0===Et?void 0:Et.strokeColor)&&void 0!==Vt?Vt:nt.dataPoint.marker.color},"stroke-width":function(nt){var Et;return(0,i.F)(nt.dataPoint.marker.shape)||(null!==(Et=nt.dataPoint.marker.stroke)&&void 0!==Et&&Et.strokeShow?2:0)}}),(0,e.t9)(jt,$t,Dt),_t.selectAll("path > title").text(function(Ze){return Ze.dataPoint.label}),kt.select(e.dy.selector).text(function(Ze){return Ze.textProperties.text}).styles((0,h.__assign)((0,h.__assign)({},Se&&(0,a.wB)(Se)),{"padding-left":"".concat(mt,"px"),"padding-right":"".concat(wt-mt,"px")})).attr("title",function(Ze){return Ze.dataPoint.label});var Qt={arrowPosWindow:Ft,legend:tt,legendDataStartIndex:ce,rerenderCallback:F.rerenderCallback,useLargeArrowHitArea:G.useLargeArrowHitArea,verticalLegendWidth:(0,e.s0)(de)?void 0:Ye.width,isTabbable:!!ie,hostServices:F.hostServices};De((0,h.__assign)((0,h.__assign)({},Qt),{arrow:Ot.previous,arrowClassAndSelector:e.Rw})),De((0,h.__assign)((0,h.__assign)({},Qt),{arrow:Ot.next,arrowClassAndSelector:e.EF})),ie?.bind(G.dataPoints,new L,{legendRoot:tt,legendItems:kt,legendIcons:$t,legendLines:jt,clearCatcher:Rt,visualStyle:F.visualStyle},{isLegend:!0,pointSourceKey:"legend",isHierarchicalAxis:F.isHierarchicalAxis,formatMode:F.formatMode})}return Ye}function Be(F){return void 0!==F.mid}function ze(F){return F.min.value===F.max.value?.5:(F.mid.value-F.min.value)/(F.max.value-F.min.value)}function Ie(F,J,X,q,G,le,ie){for(var de=J,ce=[],oe=X,ye=F.length;oe<ye;oe++){var Se=F[oe],_e=Qe(ce,Se,q,Se.line?le:G,de,ie);if(de=_e.newRemainingWidth,!_e.fit)break}for(var Ae=_.filter(ce,function(Dt){return Dt.desiredOverMaxWidth}),Ye=de;de>0&&Ae.length>0;){for(oe=0;oe<Ae.length;){var je=Ae[oe],Ne=je.width,ke=Ne+de/Ae.length;if(ke>je.desiredWidth)je.textProperties.text=je.dataPoint.label,je.width=je.desiredWidth,je.desiredOverMaxWidth=!1,Ae.splice(oe,1),de-=je.width-Ne;else{var Ge=Ae[oe].textProperties,qe=Ge.text;Ge.text=je.dataPoint.label;var ut=c.b.getTailoredTextOrDefault(Ge,ke);if(qe===ut)Ge.text=qe;else{Ge.text=ut;var wt=c.b.measureSvgTextWidth(Ge,ut);je.width=wt,de-=je.width-Ne}oe++}}if(Ye===de)break;Ye=de}return ce}function Qe(F,J,X,q,G,le){var ie=(0,a.qk)(X,J.label),de=c.b.measureSvgTextWidth(ie),ce=de,oe=!1;if(ce>et){oe=!0;var ye=c.b.getTailoredTextOrDefault(ie,et);ie=(0,a.qk)(X,ye),ce=c.b.measureSvgTextWidth(ie)}var Se=G-(ce+q+le);return Se<0?{newRemainingWidth:G,fit:!1}:(F.push({dataPoint:J,textProperties:ie,width:ce,desiredWidth:de,desiredOverMaxWidth:oe}),{newRemainingWidth:Se,fit:!0})}function De(F){var J=F.legendDataStartIndex,X=F.arrowPosWindow,q=F.useLargeArrowHitArea,G=F.verticalLegendWidth,le=F.isTabbable,ie=F.arrow,de=F.arrowClassAndSelector;B.fF.assert(function(){return!!ie},"arrow must be set");var ye=G?G+Mt:q?ie.show?ie.hitAreaWidth:j:j+Mt;F.legend.selectAll(de.selector).data(ie.show?[ie]:[]).join(function(Se){return Se.append("svg").classed(de.class,!0).style("position","relative")}).classed("flex-order-second",1===ie.type).classed("flex-order-fourth",0===ie.type).attrs({width:ye,height:yt,role:"button","aria-label":function(){return F.hostServices?F.arrowClassAndSelector.class===e.EF.class?F.hostServices.getLocalizedString("Next_ButtonText"):F.arrowClassAndSelector.class===e.Rw.class?F.hostServices.getLocalizedString("Previous_ButtonText"):"":null}}).on("click",function(){F.rerenderCallback(ie.type,J,X)}).call(function(Se){le&&Se.attrs({tabindex:0,focusable:!0}).on("keydown",function(){var _e=d3.event,Ae=_e.keyCode;if(32===Ae||13===Ae){_e.stopPropagation(),F.rerenderCallback(ie.type,J,X);var lt=F.legend.selectAll(e.rL.selector+(1===ie.type?":last-child":":first-child")).node();lt&&y.M.focus(lt)}})}).selectAll(".navArrow").data(function(Se){var _e=Se;if(_e.isHitArea=!1,_e.index=Math.abs(_e.arrowOffset),!q)return[_e];var Ae=Object.create(_e);return Ae.isHitArea=!0,Ae.index++,[Ae,_e]},function(Se){return Se.index.toString()}).join(function(Se){return Se.append("path").classed("navArrow",!0)}).attrs({d:function(_e){return _e.path},transform:function(_e){return"".concat((0,w.Iu)(ye/2-j/2,0)," ").concat(_e.rotateTransform)},"stroke-width":function(_e){return _e.isHitArea?"".concat(_e.hitAreaWidth,"px"):void 0},"fill-opacity":function(_e){return _e.isHitArea?"0":void 0},"stroke-opacity":function(_e){return _e.isHitArea?"0":void 0}})}var Ke=5,rt=5,et=60,Pt=5,ht=15,bt=10,it=.3,dt=24,ft=e.OS.pt,St=.52,vt=5,mt=1,Mt=2,Ct={Horizontal:{arrowSize:30,hitAreaWidthPx:28,arrowsOffset:-10},Vertical:{arrowSize:12,hitAreaWidthPx:18,arrowsOffset:-3}},Lt=10,yt=15,j=7.5;function re(F){var le,J=F.data.title,X=0,q=!_.isEmpty(J),G=!q&&F.showTitlePlaceholder;if(G&&(J=F.hostServices.getLocalizedString("Format_AddLegendTitle")),!q&&!G)return null;le=(0,e.s0)(F.orientation)?F.parentViewport.width*it-(Ke+(F.legendFontSizeMarginValue>ft?Pt+F.legendFontSizeMarginDifference:Pt)+(Pt+Ke))-bt+ht/2:F.legendViewport.width-bt;var oe=(0,a.qk)(F.data.fontProperties,J),ye=J;return(X=c.b.measureSvgTextWidth(oe))>le&&(ye=c.b.getTailoredTextOrDefault(oe,le),oe.text=ye,X=c.b.measureSvgTextWidth(oe)),(0,e.s0)(F.orientation)?X+=ht/2:ye=c.b.getTailoredTextOrDefault(oe,F.legendViewport.width),{x:0,y:0,text:ye,width:X,height:c.b.estimateSvgTextHeight(oe),isPlaceholder:G}}function ae(F,J,X,q,G,le){var ie=le?bt:0;X.styles({height:"".concat(F.height||(q?G.height:0),"px"),width:"".concat(F.width||(q?G.width:0),"px"),"margin-left":(0,e.tO)(J)?"".concat(G.width-F.width+ie,"px"):null,"margin-top":(0,e.Kx)(J)?"".concat(G.height-F.height,"px"):null,"margin-right":(0,e.nM)(J)&&le?"".concat(ie,"px"):null})}function we(F,J,X,q,G,le,ie){return void 0===q&&(q=!1),void 0===G&&(G=n.Xv),void 0===le&&(le=(0,M.Ue)()),J?new We(F):new Me(F,G,le,X,ie,q)}var ge=7,Re=8,Me=function(){function F(J,X,q,G,le,ie){this.style=q,this.interactivityService=G,this.hostServices=le,this.isScrollable=ie,this.legendDataStartIndex=0,this.arrowPosWindow=1,this.lastCalculatedWidth=0,this.element=d3.select(J.get(0)),this.setPosition(X),this.viewport={height:0,width:0}}return F.prototype.getMargins=function(){return this.viewport},F.prototype.isVisible=function(){return(0,e.fy)(this.data)},F.prototype.setPosition=function(J){this.orientation=J??n.Xv},F.prototype.getPosition=function(){return this.orientation},F.prototype.drawLegend=function(J){var X,q=J.data,G=(0,V.ED)(q);_.defaults(G,{fontProperties:(0,n.en)(this.style)});for(var le=[],ie=0,de=q.dataPoints;ie<de.length;ie++)le.push((0,V.ED)(de[ie]));G.dataPoints=le,F.setTooltipToLegendItems(G),(G.fontSize||G.labelColor)&&(G.fontProperties={color:G.labelColor||"#666666",size:G.fontSize?d.B.createFromPt(G.fontSize):e.OS,family:e.cp}),null!==(X=G.fontProperties)&&void 0!==X||(G.fontProperties=(0,n.en)(this.style)),G.isGradientLegend||(0===G.dataPoints.length&&(G.show=!1),G.show||(G.dataPoints=[])),this.interactivityService&&(this.interactivityService.applySelectionStateToData(q.dataPoints),this.interactivityService.applySelectionStateToData(G.dataPoints)),this.render((0,h.__assign)((0,h.__assign)({},J),{data:G}))},F.prototype.updateLegendDataStartIndex=function(J,X){this.legendDataStartIndex=m.b$.clampValue(J,0,Math.max(X.data.dataPoints.length-1,0))},F.prototype.render=function(J){var X=this;this.updateLegendDataStartIndex(this.legendDataStartIndex,J),this.viewport=He(function G(){return(0,h.__assign)((0,h.__assign)({},J),{autoWidth:!0,element:X.element,lastCalculatedWidth:X.lastCalculatedWidth,orientation:X.orientation,isScrollable:X.isScrollable,arrowPosWindow:X.arrowPosWindow,legendDataStartIndex:X.legendDataStartIndex,interactivityService:X.interactivityService,rerenderCallback:function(ie,de,ce){X.updateLegendDataStartIndex(de+ce*(0===ie?1:-1),J),X.viewport=He((0,h.__assign)((0,h.__assign)({},G()),{arrowPosWindow:ce}))},visualStyle:X.style,hostServices:X.hostServices})}())},F.prototype.reset=function(){},F.setTooltipToLegendItems=function(J){for(var X=0,q=J.dataPoints;X<q.length;X++){var G=q[X];G.tooltip=G.label}},F}(),We=function(){function F(J){this.legendContainerParent=d3.select(J.get(0))}return F.prototype.getMargins=function(){return{height:F.LegendHeight,width:0}},F.prototype.drawLegend=function(J){var X=J.data;B.fF.assertValue(X,"legendData");var q=X.dataPoints;if(B.fF.assertValue(q,"dataPoints"),!(q.length<1)){var G=this.legendContainerParent.select(F.LegendContainerSelector);if(G.empty()){if(!q.length)return;var le=$("<div></div>").height(this.getMargins().height).addClass(F.LegendContainerClass);$(this.legendContainerParent.node()).prepend(le),G=d3.select(le.get(0))}this.legendContainerDiv=G,this.drawTitle(q),this.drawLegendItems(q)}},F.prototype.reset=function(){this.legendContainerDiv&&(this.legendContainerDiv.remove(),this.legendContainerDiv=null)},F.prototype.isVisible=function(){return!0},F.prototype.setPosition=function(J){},F.prototype.getPosition=function(){return p.tV.Top},F.prototype.drawTitle=function(J){B.fF.assert(function(){return J&&J.length>0},"data is null or empty");var q=this.legendContainerDiv.selectAll("div.".concat(F.LegendTitleClass)).data([J[0]]),G=q.enter().append("div").attr("class",F.LegendTitleClass);G.filter(function(ie){return ie.iconOnlyOnLabel}).append("span").attr("class",F.legendIconClass).html(F.legendPlaceSelector),G.append("span");var le=G.merge(q);le.filter(function(ie){return ie.iconOnlyOnLabel}).select("span.".concat(F.legendIconClass)).style(F.legendColorCss,function(ie){return ie.marker.color}),le.select("span:last-child").text(function(ie){return ie.category})},F.prototype.drawLegendItems=function(J){this.ensureLegendTableCreated();var X=[J],q=this.legendContainerDiv.select("tbody").selectAll("tr").data(X),G=q.enter().append("tr"),ie=G.selectAll("td").data(function(oe){return oe},function(oe){return oe.label}).enter().append("td").attr("class",F.LegendItem).append("span");ie.filter(function(oe){return!oe.iconOnlyOnLabel}).append("span").html(F.legendPlaceSelector).attr("class",F.legendIconClass).attr("white-space","nowrap").styles({"font-size":"20px","margin-bottom":"7px"}),ie.append("span").attr("class",F.legendItemNameClass),ie.append("span").attr("class",F.legendItemMeasureClass);var ce=G.merge(q).selectAll("td").data(function(oe){return oe},function(oe){return oe.label});ce.select("span.".concat(F.legendItemNameClass)).html(function(oe){return(0,b.nU)(oe.label)}),ce.select("span.".concat(F.legendItemMeasureClass)).html(function(oe){return"&nbsp;".concat(oe.measure)}),ce.select("span.".concat(F.legendIconClass)).style("color",function(oe){return oe.marker.color}),ce.exit().remove()},F.prototype.ensureLegendTableCreated=function(){if(this.legendContainerDiv.select("div table").empty()){var J=this.legendContainerDiv.append("div").append("table");J.style("table-layout","fixed").append("tbody"),this.setPanGestureOnLegend(J)}},F.prototype.setPanGestureOnLegend=function(J){var X=$(this.legendContainerParent.node()).width(),q=d3.zoom().on("zoom",function(){if($(J.node()).width()>X){var G=d3.event.transform.x;G=Math.min(G,0),G=Math.max(G,X-$(J.node()).width()),J.style("-ms-transform",(0,w.y4)(G)),J.style("-webkit-transform",(0,w.y4)(G)),J.style("transform",(0,w.y4)(G))}});this.legendContainerDiv?this.legendContainerDiv.call(q):J.call(q)},F.LegendHeight=70,F.LegendContainerClass="interactive-legend",F.LegendContainerSelector=".interactive-legend",F.LegendTitleClass="title",F.LegendItem="item",F.legendPlaceSelector="\u25cf",F.legendIconClass="icon",F.legendColorCss="color",F.legendItemNameClass="itemName",F.legendItemMeasureClass="itemMeasure",F}()},97121:function(be,Z,g){g.d(Z,{P:function(){return d}});var h=g(81337),B=g(62458),V=g(88987),M=g(12913),m=g(60810),w=g(98094),b=g(10389);function d(v){return new k(v)}var k=function(){function v(p){var c,n=this;this._data=[],this.scrollTop=0,this.scrollLeft=0,this.prevWheelTime=0,this.factory=(0,V.p)(),p=this.options=$.extend(!0,{},p),B.fF.assert(function(){return!n.options.paddingBetween&&!n.options.paddingOuter||n.options.doNotRenderToCalculateRowHeight}),this.scrollbarInner=p.baseContainer.append("div").classed("scrollbar-inner",!0).attr("role","none").on("scroll",function(){return n.onScroll()}),this.scrollContainer=this.scrollbarInner.append("div").classed("scrollRegion",!0).attr("role","none").on("touchstart",function(){return n.stopTouchPropagation()}).on("touchmove",function(){return n.stopTouchPropagation()}).style("overflow","hidden"),this.visibleGroupContainer=this.scrollContainer.append("div").classed("visibleGroup",!0).attr("role","none"),this.scrollInner=$(this.scrollbarInner.node()),null!==(c=this.scrollInner)&&void 0!==c&&c.scrollbar&&this.scrollInner.scrollbar({ignoreOverlay:!1,ignoreMobile:!1,onDestroy:function(){return n.scrollbarInner.on("scroll",null)}});var y=$(p.baseContainer.node()),f=y.find(".scroll-element");f.attr("drag-resize-disabled","true"),p.scrollEnabled&&f.css("pointer-events","auto"),y.find(".scroll-wrapper").attr("role","none"),this.scrollToFrame=this.options.scrollToFrame||this.defaultScrollToFrame,v.setDefaultOptions(p)}return v.prototype.orientation=function(p){var n=this;return this.isHorizontal=p,p?(this.visibleGroupContainer.style("display","flex"),this.visibleGroupContainer.style("flex-direction","row"),this.scrollbarInner.on("wheel",function(){var c;performance.now()-n.prevWheelTime>100&&(n.propagateWheel=void 0);var y=d3.event,f=Math.abs(y.deltaX)>=Math.abs(y.deltaY);if(n.propagateWheel||f)n.prevWheelTime=performance.now();else{var o=n.scrollbarInner.node().scrollLeft;n.scrollbarInner.node().scrollBy({left:y.deltaY});var t=n.scrollbarInner.node().scrollLeft;null!==(c=n.propagateWheel)&&void 0!==c||(n.propagateWheel=t===o),n.propagateWheel||(y.stopPropagation(),y.preventDefault()),n.prevWheelTime=performance.now()}})):(this.visibleGroupContainer.style("display",null),this.visibleGroupContainer.style("flex-direction",null),this.scrollbarInner.on("wheel",null)),this},v.prototype.scrollTo=function(p){this.scrollInner.scrollTop(p)},v.prototype.scrollRowIntoView=function(p,n){var c=this,y=this.options,f=y.rowHeight,o=y.paddingBetween,t=y.paddingOuter,a=Math.min(Math.max(p,0),this._totalRows-1),i=this.scrollTop,s=this.getContainerHeight(),r=this.getRowStartPosition(a,f,o,t),e=this.getTotalRowHeight(a,f,o,t),S=this.getNeededScrollChange(r,e,i,s);this.setFocusCallback=n,0!==S?(this.scrollTo(i+S),this.pendingFocusCallback=function(C){C?c.pendingScrollCallback=function(){return c.scrollRowIntoView(p,n)}:c.setFocusCallback&&c.setFocusCallback()}):this.setFocusCallback&&this.setFocusCallback()},v.prototype.getTotalRowHeight=function(p,n,c,y){var f=n;return 0===p&&(f+=y),p===this._totalRows&&(f+=y),p>0&&(f+=c),f},v.prototype.getNeededScrollChange=function(p,n,c,y){if(p<c)return Math.floor(p-c);var f=p+n,o=c+y;return f>o?Math.floor(f-o):0},v.prototype.onScroll=function(){var n,c,p=this;null===(c=(n=this.options).onScroll)||void 0===c||c.call(n),this.scrollTop=this.scrollbarInner.node().scrollTop,this.scrollLeft=this.scrollbarInner.node().scrollLeft,void 0===this.scrollTimeoutId&&(this.scrollTimeoutId=window.requestAnimationFrame(function(){var y=p.renderImpl(p.options.rowHeight,p.options.paddingBetween,p.options.paddingOuter);p.scrollTimeoutId=void 0,p.pendingFocusCallback&&(p.pendingFocusCallback(y.loadedMore),p.pendingFocusCallback=void 0)}))},v.prototype.resetCallBacks=function(){this.pendingFocusCallback=void 0,this.pendingScrollCallback=void 0,this.setFocusCallback=void 0},v.prototype.destroy=function(){this.scrollInner&&this.scrollInner.scrollbar("destroy"),this.resetCallBacks(),this.clearRenderingTimeout()},v.prototype.getContainerHeight=function(){if(this.options.getContainerHeight){var p=this.options.getContainerHeight();if(null!=p)return p}var n=$(this.options.baseContainer.node());return this.isHorizontal?n.outerWidth():n.outerHeight()},v.setDefaultOptions=function(p){p.rowHeight=v.valueOrDefault(p.rowHeight,v.defaultRowHeight),p.paddingBetween=v.valueOrDefault(p.paddingBetween,v.defaultPaddingBetween),p.paddingOuter=v.valueOrDefault(p.paddingOuter,v.defaultPaddingOuter)},v.valueOrDefault=function(p,n){return p||0===p?p:n},v.prototype.getRowHeight=function(){return this.options.rowHeight},v.prototype.rowHeight=function(p){return this.options.rowHeight=p,this},v.prototype.paddingBetween=function(p){return this.options.paddingBetween=p,this},v.prototype.paddingOuter=function(p){return this.options.paddingOuter=p,this},v.prototype.data=function(p,n,c,y){return void 0===c&&(c=!1),this._data=p,this.getDatumIndex=n,this.setTotalRows(),c&&($(this.scrollbarInner.node()).scrollTop(0),this.resetCallBacks()),this.render(y).catch(function(f){return M.f.error(f)}),this},v.prototype.viewport=function(p){return this.render().catch(function(n){return M.f.error(n)}),this},v.prototype.empty=function(){this._data=[],this.resetCallBacks(),this.render().catch(function(p){return M.f.error(p)})},v.prototype.clearRenderingTimeout=function(){void 0!==this.renderDelay&&(this.renderDelay.cancel(),this.renderDelay=void 0),void 0!==this.scrollTimeoutId&&(window.cancelAnimationFrame(this.scrollTimeoutId),this.scrollTimeoutId=void 0)},v.prototype.render=function(p){return(0,h.__awaiter)(this,void 0,void 0,function(){var n;return(0,h.__generator)(this,function(c){switch(c.label){case 0:return this.clearRenderingTimeout(),[4,this.delay()];case 1:return c.sent()?[2]:(this.renderDelay=void 0,[4,this.getRowHeightInternal()]);case 2:return n=c.sent(),this.renderImpl(n.rowHeight,n.paddingBetween,n.paddingOuter),p&&p(),this.pendingScrollCallback&&(this.pendingScrollCallback(),this.pendingScrollCallback=void 0),[2]}})})},v.prototype.delay=function(){return this.renderDelay=new x,this.renderDelay.promise},v.prototype.canScrollTop=function(){return 0!==this.scrollTop},v.prototype.getScroll=function(){return new(function(){function p(n){this.self=n}return Object.defineProperty(p.prototype,"scrollHeight",{get:function(){return this.self.getTotalHeight(this.self.options.rowHeight,this.self.options.paddingBetween,this.self.options.paddingOuter)},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"visibleHeight",{get:function(){return this.self.getContainerHeight()},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"scrollTop",{get:function(){return this.self.scrollTop},enumerable:!1,configurable:!0}),p}())(this)},v.prototype.updateScrollingViewport=function(p){p.width?this.scrollInner.get(0).style.setProperty("width",p.width,"important"):this.scrollInner.get(0).style.removeProperty("width"),p.height?this.scrollInner.get(0).style.setProperty("flex-basis",p.height,"important"):this.scrollInner.get(0).style.removeProperty("flex-basis"),p["border-radius"]?this.scrollInner.get(0).style.borderRadius=p["border-radius"]:this.scrollInner.get(0).style.removeProperty("border-radius")},v.prototype.getTotalHeight=function(p,n,c){var y=v.valueOrDefault(n,v.defaultPaddingBetween),f=v.valueOrDefault(c,v.defaultPaddingOuter);return this.options.scrollEnabled?Math.max(0,this._totalRows*p+(this._totalRows-1)*y+2*f):this.getContainerHeight()},v.prototype.renderImpl=function(p,n,c){var y=this.getTotalHeight(p,n,c);return this.scrollContainer.style("width",this.isHorizontal?"".concat(y,"px"):null).style("height",this.isHorizontal?null:"".concat(y,"px")),this.scrollToFrame({listView:this,loadMoreData:!0,rowHeight:this.options.rowHeight||v.defaultRowHeight,paddingBetween:this.options.paddingBetween||v.defaultPaddingBetween,paddingOuter:this.options.paddingOuter||v.defaultPaddingOuter,scrollTop:this.scrollTop,scrollLeft:this.scrollLeft,totalRows:this._totalRows,visibleGroupContainer:this.visibleGroupContainer,baseContainer:this.options.baseContainer})},v.prototype.stopTouchPropagation=function(){var p=d3.event;this.options.isReadMode()&&("touchstart"===p.type&&p.touches&&1===p.touches.length&&p.stopPropagation(),"touchmove"===p.type&&p.stopPropagation())},v.prototype.defaultScrollToFrame=function(p){var i,s,r,n=p.loadMoreData,c=p.rowHeight,y=p.paddingBetween,f=p.paddingOuter,o=this.isHorizontal?p.scrollLeft:p.scrollTop,t=p.totalRows,a=p.visibleGroupContainer;if(y||f)!this._totalRows||!this.options.rowHeight||c<1?(s=0,r=(0,b.O7)(0,0),i=1):(s=this.getRowIndex(o,c,y,f,!1),e=o>0?this.getRowStartPosition(s,c,y,f):0,r=(0,b.O7)(this.isHorizontal?e:0,this.isHorizontal?0:e),i=this.getRowIndex(o+this.getContainerHeight(),c,y,f,!0)-s+1);else{i=this.getVisibleRowsWithoutPadding();var e=(s=Math.max(0,Math.min(Math.floor(o/c),t-i+1)))*c;r=(0,b.O7)(this.isHorizontal?e:0,this.isHorizontal?0:e)}a.styles({transform:function(N){return r},"-webkit-transform":r});var L=s+i;return this.currentScrollPosition={startIndex:s,endIndex:L},this.performScrollToFrame(s,L,t,i,n)},v.prototype.getFirstVisibleRow=function(){if(!_.isEmpty(this.visibleData))return this.visibleData[0]},v.prototype.reachedLastRowContent=function(){if(this._totalRows>0){var p=this.options,c=p.paddingBetween,y=p.paddingOuter,f=this.isHorizontal?this.scrollLeft:this.scrollTop,o=this._totalRows-1;return this.getRowStartPosition(o,p.rowHeight,c,y)+(0===o?y:c)<f+this.getContainerHeight()}return!1},v.prototype.performScrollToFrame=function(p,n,c,y,f){var o=this.options,t=this.visibleGroupContainer;this.visibleData=this._data.slice(p,Math.min(n,c));var a=!1,i=t.selectAll(".row").data(this.visibleData,this.getDatumIndex);if(i.exit().remove(),i.enter().append("div").classed("row",!0).attr("role","none").call(function(S){return o.enter(S)}).merge(i).order(),t.selectAll(".row:not(.transitioning)").call(function(S){return o.update(S)}),f){var e=o.customLoadMoreCheck?o.customLoadMoreCheck():function(v,p,n){return n!==p&&v>=.8*p}(n,c,y);e&&(a=o.loadMoreData()===m.G.TriggeredLoadMore)}return o.afterScroll&&o.afterScroll(),this.setFocusCallback&&this.setFocusCallback(),{loadedMore:a}},v.prototype.getCurrentPosition=function(){return this.currentScrollPosition},v.prototype.setTotalRows=function(){var p=this._data;this._totalRows=p?p.length:0},v.prototype.getVisibleRowsWithoutPadding=function(){var n=this.options,c=n.rowHeight,y=n.scrollEnabled,f=this.getContainerHeight();if(!c||c<1)return 1;var o=f/c;return y?Math.min(Math.ceil(o)+1,this._totalRows)||1:Math.min(Math.floor(o),this._totalRows)||1},v.prototype.getRowIndex=function(p,n,c,y,f){var o=Math.min(p<n+y?0:Math.floor((p-n-y)/(n+c))+1,this._totalRows-1);return this.getRowStartPosition(o,n,c,y)===p&&(o=f?Math.max(o-1,0):o),o},v.prototype.getRowStartPosition=function(p,n,c,y){return p*n+Math.max(0,p-1)*c+(p>0?y:0)},v.prototype.getRowHeightInternal=function(){var p=this,n=this.factory.defer(),c=this,y=c.options;if(this.cancelMeasurePass&&this.cancelMeasurePass(),!(this._data&&this._data.length&&y))return c.rowHeight(v.defaultRowHeight),c.paddingBetween(v.defaultPaddingBetween),c.paddingOuter(v.defaultPaddingOuter),n.resolve({rowHeight:y.rowHeight,paddingBetween:y.paddingBetween,paddingOuter:y.paddingOuter}),n.promise;if(y&&y.doNotRenderToCalculateRowHeight)return n.resolve({rowHeight:y.rowHeight,paddingBetween:y.paddingBetween,paddingOuter:y.paddingOuter}),n.promise;var f={listView:this,loadMoreData:!1,rowHeight:this.options.rowHeight||v.defaultRowHeight,paddingBetween:v.defaultPaddingBetween,paddingOuter:v.defaultPaddingOuter,scrollTop:this.scrollbarInner.node().scrollTop,scrollLeft:this.scrollbarInner.node().scrollLeft,totalRows:this._totalRows,visibleGroupContainer:this.visibleGroupContainer,baseContainer:this.options.baseContainer};this.scrollToFrame(f);var o=window.requestAnimationFrame(function(){var t=c.visibleGroupContainer.selectAll(".row").filter(function(){return""!==this.textContent||null!==this.querySelector("img")});if(t.empty()&&(t=c.visibleGroupContainer.select(".row")),!t.empty()){var a=t.nodes(),i=p.calculateRowHeight(a);c.rowHeight(i),n.resolve({rowHeight:i,paddingBetween:v.defaultPaddingBetween,paddingOuter:v.defaultPaddingOuter})}c.cancelMeasurePass=void 0});return this.cancelMeasurePass=function(){window.cancelAnimationFrame(o),n.reject({code:"cancelMeasurePass",ignorable:!0})},n.promise},v.prototype.calculateRowHeight=function(p){for(var c=2>p.length?p.length:2,y=0,f=0;f<c;f++)y=Math.max(y,this.measureElementHeight(p[f]));return y},v.prototype.measureElementHeight=function(p){var n=$(p);return Math.ceil(Math.max(n.outerHeight(!0),n.children().first().outerHeight(!0)))},v.defaultRowHeight=1,v.defaultPaddingBetween=0,v.defaultPaddingOuter=0,v}(),x=function(){function v(){var p=this;this.promise=new w.J(function(n){p.resolve=n}),this.timeoutId=setTimeout(this.complete.bind(this))}return v.prototype.complete=function(){this.resolve(!1)},v.prototype.cancel=function(){window.clearTimeout(this.timeoutId),this.resolve(!0)},v}()},51995:function(be,Z,g){g.d(Z,{Ar:function(){return P},F:function(){return O},Wo:function(){return v},jM:function(){return k}});var h=g(62458),B=g(61193),V=g(66123),M=g(64067),m=g(39681),w=g(59107),b=1,d=2;function P(p){return k(p,V.$V)}function O(p){if((0,B.nK)(p))return 0;switch(p){case B.ZO.x:case B.ZO.plus:case B.ZO.lowerErrorBar:case B.ZO.upperErrorBar:return b;case B.ZO.shortDash:case B.ZO.longDash:return d;default:h.fF.assertNever(p)}}function k(p,n){switch(p){case B.ZO.circle:return"M 0 0 m ".concat(-n," 0 a ").concat(n," ").concat(n," 0 1 0 ").concat(2*n," 0 a ").concat(n," ").concat(n," 0 1 0 ").concat(-2*n," 0");case B.ZO.square:return"M 0 0 m ".concat(-n," ").concat(-n," l ").concat(2*n," 0 l 0 ").concat(2*n," l ").concat(-2*n," 0 z");case B.ZO.diamond:return"M 0 0 m ".concat(-n," 0 l ").concat(n," ").concat(-n," l ").concat(n," ").concat(n," l ").concat(-n," ").concat(n," z");case B.ZO.triangle:return"M 0 0 m ".concat(-n," ").concat(n," l ").concat(n," ").concat(-2*n," l ").concat(n," ").concat(2*n," z");case B.ZO.droplet:return h.fF.assert(function(){return 1===n},"Droplet marker path is hardcoded for r=1"),"M 1.123 -0.214\n                            C 1.123 0.123 0.947 0.435 0.749 0.626\n                            L 0.139 1.275\n                            C 0.065 1.353 -0.059 1.353 -0.133 1.275\n                            L -0.743 0.626\n                            C -1.023 0.346 -1.117 0.118 -1.117 -0.214\n                            C -1.117 -0.832 -0.615 -1.333 0.003 -1.333\n                            C 0.621 -1.333 1.123 -0.832 1.123 -0.214 Z";case B.ZO.x:return"M 0 0 m ".concat(-n," ").concat(-n," l ").concat(2*n," ").concat(2*n," m ").concat(2*-n," 0 l ").concat(2*n," ").concat(2*-n);case B.ZO.shortDash:return"M 0 0 l ".concat(n," 0");case B.ZO.longDash:return"M 0 0 m ".concat(-n," 0 l ").concat(2*n," 0");case B.ZO.plus:return"M 0 0 m ".concat(-n," 0 l ").concat(2*n," 0 m ").concat(-n," ").concat(-n," l 0 ").concat(2*n);case B.ZO.lowerErrorBar:return"M 0 0 m 0 ".concat(-n," l 0 ").concat(2*n," m ").concat(-n," 0 l ").concat(2*n," 0");case B.ZO.upperErrorBar:return"M 0 0 m 0 ".concat(n," l 0 ").concat(2*-n," m ").concat(-n," 0 l ").concat(2*n," 0");default:h.fF.assertNever(p)}}var v=function(){function p(){this.uniqueIdentifier=_.uniqueId(),this.markerKeyModifier=""}return p.prototype.ensureMarkers=function(n,c){var y=this,f=this.modifyMarkersIfNeeded(c);n.selectAll("marker").data(f.filter(function(o){return o.show}),function(o){return y.getMarkerId(o)}).join(function(o){return o.append("marker").call(function(t){return t.append("path").classed("markerPaths",!0)})}).attrs({id:function(t){return y.getMarkerId(t)},markerUnits:"strokeWidth",orient:function(t){var a;return null!==(a=t.rotation)&&void 0!==a?a:0},refX:0,refY:0,viewBox:"-6 -6 12 12",markerHeight:function(t){return t.size},markerWidth:function(t){return t.size}}).select(".markerPaths").attr("d",function(o){return o.lineRadius?function(p,n,c){var y=(c+1)/(n/5);switch(p){case B.ZO.x:return"M ".concat(y,",1 L 4,5 L 5,4 L 1,0 L 5,-4 L 4,-5 L 0,-1 L -4,-5 L-5,-4 L -1,0 L -5,4 L -4,5 L-").concat(y,",1");case B.ZO.shortDash:return"M ".concat(y,",1 L 5,1 L 5,-1 L -").concat(y,",-1 L -").concat(y,",1");case B.ZO.longDash:return"M ".concat(y,",1 L 5,1 L 5,-1 L -5,-1 L -5,1 L -").concat(y,",1");case B.ZO.plus:return"M ".concat(y,",1 L 5,1 L 5,-1, L1,-1 L1,-5 L-1,-5 L-1,-1 L-5,-1 L-5,1 L-").concat(y,",1");default:return P(p)}}(o.shape,o.size,o.lineRadius):P(o.shape)}).styles({"stroke-width":function(t){var a,i;return t.lineRadius?(null!==(i=null===(a=t.stroke)||void 0===a?void 0:a.strokeWidth)&&void 0!==i?i:0)/(t.size/5):O(t.shape)},"stroke-opacity":function(t){return null!=t.transparency?(0,M.TD)(t.transparency):1},stroke:function(t){var a,i;return null!==(i=null===(a=t.stroke)||void 0===a?void 0:a.strokeColor)&&void 0!==i?i:t.color},fill:function(t){return t.color},opacity:function(t){return null!=t.transparency?(0,M.TD)(t.transparency):null}})},p.prototype.getMarkerId=function(n){return"".concat(n.key,"-").concat(this.uniqueIdentifier).concat(n.modifier||"")},p.prototype.getMarkerKey=function(n){if(!n.show)return null;var c=w.M.isSafari()||w.M.isIOSWebView()?window.location.href:"",y=n.key;return"url('".concat(c,"#").concat(y,"-").concat(this.uniqueIdentifier).concat(this.markerKeyModifier,"')")},p.prototype.modifyMarkersIfNeeded=function(n){if(w.M.isInternetExplorerOrEdge()){var c=[];return this.cycleMarkerKeyModifier(),(c=this.modifyMarkerProperties(n,"a")).push.apply(c,this.modifyMarkerProperties(n,"b")||[]),c}return n},p.prototype.cycleMarkerKeyModifier=function(){this.markerKeyModifier="a"===this.markerKeyModifier?"b":"a"},p.prototype.modifyMarkerProperties=function(n,c){return _.map(n,function(y){var f=(0,m.ED)(y);return f.modifier=c,f})},p.sizeRatio=10/12,p}()},49203:function(be,Z,g){g.d(Z,{R:function(){return B}});var h=g(72902);function B(V,M,m,w,b){var d,k,x,v,P=M,O=m;switch(b){case h.x0.PreviousCategory:case h.x0.NextCategory:if(w===h.jN.SeriesOnly)break;x=b===h.x0.PreviousCategory?-1:1,k=_.filter(V,function(p){return p.seriesIndex===m}),(v=x+_.findIndex(k,function(p){return p.categoryIndex===M}))>=k.length&&(v=0),v<0&&(v=k.length-1),P=k[v].categoryIndex;break;case h.x0.NextSeries:case h.x0.PreviousSeries:if(w===h.jN.CategoryOnly)break;(v=(x=b===h.x0.PreviousSeries?-1:1)+_.findIndex(V,function(p){return p.categoryIndex===M&&p.seriesIndex===m}))>=V.length&&(v=0),v<0&&(v=V.length-1),P=(d=[V[v].categoryIndex,V[v].seriesIndex])[0],O=d[1]}return{categoryIndex:P,seriesIndex:O}}},28579:function(be,Z,g){g.d(Z,{G:function(){return V}});var h=g(62458),B=g(32379),V=function(){function M(){}return M.prototype.pushInstance=function(m,w){void 0===w&&(w=!0),h.fF.assertValue(m,"instance");var b=this.instances;b||(b=this.instances=[]);var d=this.containerIdx;if(null!=d&&(m.containerIdx=d),w)for(var P=0,O=b;P<O.length;P++){var k=O[P];if(this.canMerge(k,m))return this.extend(k,m,"properties"),this.extend(k,m,"validValues"),this}return b.push(m),this},M.prototype.pushContainer=function(m){h.fF.assertValue(m,"container");var w=this.containers;w||(w=this.containers=[]);var b=w.push(m);return this.containerIdx=b-1,this},M.prototype.popContainer=function(){return this.containerIdx=void 0,this},M.prototype.complete=function(){if(this.instances){var m={instances:this.instances},w=this.containers;return w&&(m.containers=w),m}},M.prototype.canMerge=function(m,w){return h.fF.assertValue(m,"x"),h.fF.assertValue(w,"y"),m.objectName===w.objectName&&m.containerIdx===w.containerIdx&&(0,B.fS)(m.selector,w.selector)},M.prototype.extend=function(m,w,b){h.fF.assertValue(m,"target"),h.fF.assertValue(w,"source"),h.fF.assertValue(b,"propertyName");var d=w[b];if(d){var P=m[b];for(var O in P||(P=m[b]={}),d)P[O]||(P[O]=d[O])}},M.merge=function(m,w){var b=M.normalize(m),d=M.normalize(w);if(!b||!d)return b||d;h.fF.assertValue(b,"xNormalized"),h.fF.assertValue(d,"yNormalized");for(var P=b.containers?b.containers.length:0,O=0,k=d.instances;O<k.length;O++){var x=k[O];b.instances.push(x),null!=x.containerIdx&&(x.containerIdx+=P)}var v=d.containers;return _.isEmpty(v)||(b.containers?Array.prototype.push.apply(b.containers,v):b.containers=v),b},M.normalize=function(m){return h.fF.assertAnyValue(m,"x"),_.isArray(m)?{instances:m}:m},M.getContainerForInstance=function(m,w){return h.fF.assertValue(m,"enumeration"),h.fF.assertValue(w,"instance"),h.fF.assertValue(m.containers,"containers"),h.fF.assert(function(){return m.containers.length>w.containerIdx},"no container found in containers collection"),m.containers[w.containerIdx]},M}()},80065:function(be,Z,g){g.d(Z,{Jf:function(){return b},Mw:function(){return v},RM:function(){return P},dF:function(){return k},s4:function(){return x},un:function(){return M},w3:function(){return w},xs:function(){return m}});var h=g(81337),B=g(62458),V=g(46769),M=function(n,c,y){return(0,h.__assign)({type:1},P(n,c,y))},m=function(n,c,y){var f=c.precisionReference,o=c.displayUnitsReference,t=(0,h.__rest)(c,["precisionReference","displayUnitsReference"]);return(0,h.__assign)((0,h.__assign)({type:2},P(n,t,y)),{precision:(0,h.__assign)((0,h.__assign)({},y?.precision),{reference:f,label:n.getLocalizedString("Visual_Precision")}),displayUnits:{reference:o,label:n.getLocalizedString("Visual_DisplayUnits")}})},w=function(n,c,y,f){void 0===c&&(c=null),void 0===y&&(y=null),void 0===f&&(f=null);var o={type:3};return c&&(o.stroke={reference:c,label:f||n.getLocalizedString("Visual_Shape_Line")}),y&&(o.fill={reference:y,label:n.getLocalizedString("Visual_Fill")}),o},b=function(n,c){var y=n.hostServices,f=n.omitSelectorForSingleSeries,o=n.individualSelector,t=n.repetitionSelector,a=n.subSelectionStylesOptions,i=c.fontColorReference;return i&&(c=(0,h.__assign)((0,h.__assign)({},c),{fontColorReference:(0,h.__assign)((0,h.__assign)({},i),{selector:(0,V.hm)(o,f?void 0:i.selector,t)})})),void 0!==c.precisionReference?m(y,c,a):M(y,c,a)},P=function(n,c,y){var f=c.fontFamilyReference,o=c.fontSizeReference,t=c.boldReference,a=c.italicReference,i=c.underlineReference,r=c.backgroundReference,e=c.wordWrapReference,S=c.horizontalAlignmentReference,C={fontColor:{reference:c.fontColorReference,label:n.getLocalizedString("Visual_FontColor")},fontFamily:{reference:f,label:n.getLocalizedString("Visual_FontFamily")},bold:{reference:t,label:n.getLocalizedString("Bold")},italic:{reference:a,label:n.getLocalizedString("Italic")},underline:{reference:i,label:n.getLocalizedString("Underline")}};return o&&(C.fontSize={reference:o,label:n.getLocalizedString("FontSize")}),r&&(C.background={reference:r,label:n.getLocalizedString("Background_Color")}),e&&(C.wordWrap={reference:e,label:n.getLocalizedString("Visual_WordWrap")}),S&&(C.horizontalAlignment={reference:S,label:n.getLocalizedString("Visual_Alignment_Horizontal")}),y&&(y.grid&&(C.grid=y.grid),y.border&&(C.border=y.border)),C},k=function(n){var y=_.first(n).visualObjects;B.fF.assert(function(){return 1===y.length},"Expected 1 visual");var f=y[0];return B.fF.assert(function(){return 1===n.length||n.every(function(o){return _.isEqual(o.visualObjects,[f])},"Expected 1 sub-selection or matching objects")}),f},x=function(n,c){if(n)return{reference:n,style:2,displayValue:c}},v=function(n,c){if(n)return{reference:n,style:1,displayValue:c||""}}},46099:function(be,Z,g){g.d(Z,{TY:function(){return ct},Dr:function(){return ue},Lp:function(){return at},UL:function(){return He},xw:function(){return Ve},XC:function(){return R},Dk:function(){return A}});var h=g(81337),B=g(79154),V=g(62458),M=g(39681),m=g(32041),w=g(6444),b=g(59694),d=g(76045),P=g(72489),O=g(39680),k=g(28326),x=g(54743),v=g(47316),p=g(36578),n=g(21408),c=g(68277),y=g(57521),f=g(90120),o=g(46769),t=g(21181),a=g(18664),s="lineColor",e="displayName",S="value",D="position",L="shadeRegion",H="shadeColor",N="shadeTransparency",U="dataLabelShow",Q="dataLabelColor",ne="dataLabelText",Y="dataLabelDecimalPoints",W="dataLabelHorizontalPosition",I="dataLabelVerticalPosition",E="dataLabelDisplayUnits",u=g(2241),l=g(14599),T=g(64067),R="xAxisReferenceLine",A="y1AxisReferenceLine",z={strokeShow:!1,strokeColor:void 0,strokeTransparency:50,strokeWidth:3,strokePattern:v.Dv.dashed,strokeDashArray:v.YU,strokeDashCap:v.xm,strokeAutoScale:!1,shadeRegionProperties:{shadeRegion:y.YP,shadeColor:void 0,shadeTransparency:40},dataLabelProperties:{show:!1,color:void 0,text:x.S3,horizontalPosition:n.t$,verticalPosition:c.aE,decimalPoints:void 0,displayUnits:0},position:p.W$},K=(0,B.CH)("reference-line-front"),te=(0,B.CH)("reference-line-back"),ee=(0,B.CH)("shade-region-ref-line");function ue(ve,xe,Oe,Le,Be,ze){if(V.fF.assertValue(ve,"enumeration"),!Be){var Xe=pe(xe,ze);if(_.isEmpty(Xe))return Ee(Le,Ie={selector:{id:"0"},properties:(0,h.__assign)((0,h.__assign)({},(0,u.HM)(z,l.vi,Oe)),{position:z.position,dataLabelShow:z.dataLabelProperties.show}),objectName:Le,propertyTypes:{}},ze),void ve.pushInstance(Ie);for(var Qe=0,Je=Xe;Qe<Je.length;Qe++){var Ie,De=Je[Qe],Ke=De.dataLabelProperties&&De.dataLabelProperties.show;(Ie={selector:De.selector,properties:(0,h.__assign)((0,h.__assign)({},(0,u.HM)(De,l.vi)),{displayName:De.displayName,value:De.value,position:De.position}),objectName:De.type,propertyTypes:{},propertyInstanceKind:{}}).propertyInstanceKind[S]=3;var rt=De.shadeRegionProperties;if(Ie.properties[L]=rt.shadeRegion,De.shadeRegionProperties.shadeRegion!==y.YP&&(Ie.properties[H]=rt.shadeColor,Ie.properties[N]=rt.shadeTransparency),Ie.properties[U]=Ke,Ke){var et=De.dataLabelProperties;Ie.properties[Q]=et.color,Ie.properties[ne]=et.text,Ie.properties[W]=et.horizontalPosition,Ie.properties[I]=et.verticalPosition,Ie.properties[E]=et.displayUnits,Ie.properties[Y]=et.decimalPoints}Le===R&&Ee(Le,Ie,ze),ve.pushInstance(Ie)}}}function pe(ve,xe){return _.filter(ve,function(Oe){var Le=Oe.value;return 0!==Oe.axis||_.isUndefined(Le)||!xe||xe.dateTime===Le instanceof Date||xe.numeric===_.isNumber(Le)})}function me(ve,xe,Oe,Le){var Be=pe(ve,function(ve){return ve.x.isCategoryAxis?ve.x:ve.y1}(xe).valueType),ze=function(ve,xe,Oe){return _.filter(ve,function(Le){var Be;if(Te(Le,xe)){var Ie=(Le.isY2&&(null===(Be=xe.y2)||void 0===Be?void 0:Be.scale)||xe.y1.scale)(Le.value);return Ie>=0&&Ie<=Oe.height}var Qe=xe.x.scale(Le.value);return Qe>=0&&Qe<=Oe.width})}(Be,xe,Oe);return ze=_.filter(ze,function(Xe){var Ie=xe.x.isCategoryAxis?Xe.isY2?xe.y2:xe.y1:xe.x;return!Ie?.isIrregular}),Le?function(ve){return _.filter(ve,function(xe){return xe.shadeRegionProperties.shadeRegion!==y.YP})}(Be):function(ve){return _.filter(ve,function(xe){return xe.strokeShow&&(_.isNumber(xe.value)||xe.value instanceof Date)})}(ze)}function Ee(ve,xe,Oe){ve===R&&Oe&&(Oe.dateTime?xe.propertyTypes[S]={dateTime:!0}:Oe.numeric&&(xe.propertyTypes[S]={numeric:!0}))}function Te(ve,xe){return 0!==ve.axis&&!xe.y1.isCategoryAxis}function Ve(ve){var xe=ve.axes.x.scale,Oe=ve.axes.y1.scale,Le=ve.axes.y2&&ve.axes.y2.scale;function Be(it){if(it.strokeShow&&!_.isUndefined(it.value)){var dt=it.isY2?Le:Oe,ft=Te(it,ve.axes),St=ve.viewport,vt=it.value;d3.select(this).attrs({x1:ft?0:xe(vt),y1:ft?dt(vt):0,x2:ft?St.width:xe(vt),y2:ft?dt(vt):St.height}).styles((0,u.bc)(it))}}var Xe=me(ve.referenceLines,ve.axes,ve.viewport,!1),Ie=ve.graphicContext,Qe=_.filter(Xe,function(it){return it.position===p.W$}),Je=Ie.selectAll(K.selector).data(Qe);Je.enter().append("line").classed(K.class,!0).merge(Je).each(Be),Je.exit().remove();var Ke=_.filter(Xe,function(it){return it.position!==p.W$}),rt=Ie.selectAll(te.selector).data(Ke);rt.enter().insert("line",":first-child").classed(te.class,!0).merge(rt).each(Be),rt.exit().remove();var Pt=me(ve.referenceLines,ve.axes,ve.viewport,!0),ht=Ie.selectAll(ee.selector).data(Pt);ht.enter().append("rect").classed(ee.class,!0).merge(ht).each(function(it){var dt=it.shadeRegionProperties;if(dt.shadeRegion!==y.YP&&it.strokeShow&&!_.isUndefined(it.value)){var ft=ve.viewport,St=it.value,vt=d3.select(this),mt=it.isY2?Le:Oe,Mt=Te(it,ve.axes),Ct=Math.max(xe(St),0),Lt=Math.min(mt(St),ft.height),yt=dt.shadeRegion===y.bb?0:Ct,j=dt.shadeRegion===y.bb?Lt:0,re=(0,T.TD)(dt.shadeTransparency),fe=dt.shadeRegion===y.bb?Ct:ft.width-Ct;vt.attr("height",Mt?dt.shadeRegion===y.bb?ft.height-Lt:Lt:ft.height),vt.attr("width",Mt?ft.width:fe),vt.attr("fill",dt.shadeColor.solid.color),vt.attr("fill-opacity",re),vt.attr(Mt?"y":"x",Mt?j:yt),vt.style("pointer-events","none")}}),ht.exit().remove()}function He(ve,xe,Oe,Le,Be,ze,Xe){if(!ve)return[];var Ie=[],Qe=f.v.create(Be);for(var Je in ve){var De=ve[Je],Ke=void 0;if(Oe===R&&11!==ze)Ke=(0,d.N)(De,S);else if(Ke=(0,d.N)(De,S,0),_.isNull(Ke))continue;(0,w.M4)(Ke)&&(Ke=k.y3.fromTimeValue(Ke.epochTimeStamp));var et=(0,d.N)(De,Y,void 0);Ie.push((0,h.__assign)((0,h.__assign)({type:Oe,selector:{id:Je,metadata:Xe&&Xe.queryName},displayName:(0,d.N)(De,e,void 0),value:Ke},(0,u.AF)(De,l.vi,z,Qe.getColorForPropertyNameWithDefaultColor(De,s,xe))),{position:(0,d.N)(De,D,p.W$),shadeRegionProperties:{shadeRegion:(0,d.N)(De,L,y.YP),shadeColor:{solid:{color:Qe.getColorForPropertyNameWithDefaultColor(De,H,xe)}},shadeTransparency:(0,d.N)(De,N,40)},dataLabelProperties:{show:(0,d.N)(De,U,!1),color:{solid:{color:Qe.getColorForPropertyNameWithDefaultColor(De,Q,xe)}},text:(0,d.N)(De,ne,x.S3),horizontalPosition:(0,d.N)(De,W,n.t$),verticalPosition:(0,d.N)(De,I,c.aE),decimalPoints:et<0?void 0:et,displayUnits:(0,d.N)(De,E,0)},axis:Le,isY2:Xe&&Xe.roles&&Xe.roles.Y2}))}return Ie}function ct(ve){if(_.isEmpty(ve.referenceLines))return[];for(var xe=[],Le=ve.axes,Be=ve.viewport,ze=Le.x.scale,Xe=Le.y1.scale,Ie=Le.y2&&Le.y2.scale,Je=0,De=me(ve.referenceLines,ve.axes,ve.viewport,!1);Je<De.length;Je++){var Ke=De[Je];if(Ke.strokeShow&&Ke.dataLabelProperties.show&&!_.isUndefined(Ke.value)){var rt=Ke.dataLabelProperties,et=Te(Ke,Le),Pt=void 0,ht=Ke.value;if(ht instanceof Date)Pt=(0,P.E3)(O.eF,!0);else{var bt=et?Le.y1.formatter:Le.x.formatter;Pt=bt;var it=null!=bt.options?(0,M.ED)(bt.options):{};it.precision=rt.decimalPoints,it.value=rt.displayUnits,Pt=(0,P.Ue)(it)}var dt="";switch(rt.text){case x.u2:dt=Ke.displayName;break;case x.u6:dt=(0,b.W)(ve.hostServices.getLocalizedString("NamePattern_Colon"),Ke.displayName,(0,o.Bw)(Pt.format(ht)));break;default:dt=(0,o.Bw)(Pt.format(ht))}var ft=(0,t.bT)({style:ve.style,textClassName:"smallDataLabel"}).fontProperties,St=(0,a.qk)(ft,dt),vt=m.b.measureSvgTextWidth(St),mt=m.b.estimateSvgTextHeight(St),Mt=void 0,Ct=void 0,Lt=Ke.isY2?Ie:Xe,yt=et?0:ze(ht),j=et?Lt(ht):0,re=et?Be.width:ze(ht),se=et?Lt(ht):Be.height,fe=[1];et?(Mt=rt.horizontalPosition===n.t$?yt+5:re-vt/2-5,Ct=j,fe=rt.verticalPosition===c.aE?[1]:[2]):(Mt=yt,Ct=rt.verticalPosition===c.aE?j+mt/2+5:se-mt/2-5,fe=rt.horizontalPosition===n.t$?[4]:[8]);var Ce=m.b.measureSvgTextWidth(St),ae=m.b.estimateSvgTextHeight(St,!0);xe.push({isPreferred:!0,text:dt,textSize:{width:Ce,height:ae},outsideFill:rt.color.solid.color,insideFill:null,parentShape:{point:{x:Mt,y:Ct},radius:0,validPositions:fe},parentType:0,fontProperties:ft,identity:null,secondRowText:null,key:JSON.stringify({type:Ke.type,id:Ke.selector.id})})}}return xe}function at(ve,xe,Oe,Le,Be){var ze=pe(ve,Be);if(!_.isEmpty(ze))for(var Xe=0,Ie=ze;Xe<Ie.length;Xe++){var Qe=Ie[Xe];if(Qe.strokeShow){var Je=Qe.value;_.isUndefined(Je)||0===Qe.axis&&Be&&Be.dateTime!==Je instanceof Date&&Be.numeric!==_.isNumber(Je)||(0===Qe.axis?xe.push(Je):Qe.isY2?Le.push(Je):Oe.push(Je))}}}},10034:function(be,Z,g){g.d(Z,{q:function(){return V}});var h=g(38308),B=g(62458);function V(){var M=function(){function m(w,b){this.visualElement=w,this.iconClassName=b,this.isVisualVisible=!0}return m.prototype.updateVisibility=function(w){w.showIcon?(this.hideVisual(),B.fF.assertValue(w.viewport,"viewport"),this.renderResponsiveIcon(w.viewport)):(this.removeResponsiveIcon(),this.showVisual())},m.prototype.renderResponsiveIcon=function(w){this.responsiveIcon||(this.responsiveIcon=(0,h.hi)().addClass(this.iconClassName).appendTo(this.visualElement)),this.responsiveIcon.css({width:w.width,height:w.height})},m.prototype.removeResponsiveIcon=function(){this.responsiveIcon&&(this.responsiveIcon.remove(),this.responsiveIcon=void 0)},m.prototype.hideVisual=function(){this.isVisualVisible&&(this.visualElement.children().hide(),this.isVisualVisible=!1)},m.prototype.showVisual=function(){this.isVisualVisible||(this.visualElement.children().show(),this.isVisualVisible=!0)},m}();return{visibilityHelper:function(w,b){return new M(w,b)}}}},5342:function(be,Z,g){g.d(Z,{BN:function(){return w},C0:function(){return M},mD:function(){return m}});var h=g(62458),B=g(6444),V=g(17591),M=function(){function b(d,P,O,k){h.fF.assert(function(){return P>=d},"Requires max date to be bigger than min date."),h.fF.assert(function(){return(!O||O>=d)&&(!k||k<=P)},"Specified date is out of boundaries"),this.rangeMaxValue=(0,V.I)(P,d),this.scale=d3.scaleTime().domain([d,P]).range([0,this.rangeMaxValue]),this.value={min:O||d,max:k||P},this.setValue(this.value)}return b.prototype.getScaledValue=function(){return this.scaledValue},b.prototype.setValue=function(d){h.fF.assert(function(){return null!=d},"Value can't be null"),h.fF.assert(function(){return null!=d.min},"Min can't be null"),h.fF.assert(function(){return null!=d.max},"Max can't be null"),this.value=d,this.scaledValue={min:this.scale(d.min),max:this.scale(d.max)}},b.prototype.getValue=function(){return this.value},b.prototype.setScaledValue=function(d){var P=this;h.fF.assert(function(){return d.min<=P.rangeMaxValue&&d.min>=0&&d.max>=0&&d.max<=P.rangeMaxValue&&d.max>=d.min},"Value is out of range"),this.scaledValue=d,this.value={min:(0,B.Fg)(this.scale.invert(d.min)),max:(0,B.Fg)(this.scale.invert(d.max))}},b}(),m=function(){function b(d,P,O,k){h.fF.assert(function(){return P>=d},"Requires max to be bigger than or equal to min."),h.fF.assert(function(){return(!O||O>=d)&&(!k||k<=P)},"Specified value is out of boundaries"),this.rangeMaxValue=P,this.scale=d3.scaleLinear().domain([d,P]).range([d,this.rangeMaxValue]),this.value={min:void 0===O?d:O,max:void 0===k?P:k},this.setValue(this.value)}return b.prototype.getScaledValue=function(){return this.scaledValue},b.prototype.setValue=function(d){h.fF.assertValue(d,"Value can't be null"),h.fF.assertValue(d.min,"Min can't be null"),h.fF.assertValue(d.max,"Max can't be null"),this.value=d,this.scaledValue={min:this.scale(d.min),max:this.scale(d.max)}},b.prototype.getValue=function(){return this.value},b.prototype.setScaledValue=function(d){var P=this;h.fF.assert(function(){return d.min<=P.rangeMaxValue&&d.min>=0&&d.max>=0&&d.max<=P.rangeMaxValue&&d.max>=d.min},"Value is out of range"),this.scaledValue=d,this.value={min:this.scale.invert(d.min),max:this.scale.invert(d.max)}},b}(),w=function(){function b(d,P,O,k){h.fF.assert(function(){return P>=d},"Requires max to be bigger than or equal to min."),h.fF.assert(function(){return(!O||O>=d)&&(!k||k<=P)},"Specified value is out of boundaries"),this.value={min:void 0===O?d:O,max:void 0===k?P:k}}return b.prototype.getScaledValue=function(){return this.value},b.prototype.setValue=function(d){h.fF.assertValue(d,"Value can't be null"),h.fF.assertValue(d.min,"Min can't be null"),h.fF.assertValue(d.max,"Max can't be null"),this.value=d},b.prototype.getValue=function(){return this.value},b.prototype.setScaledValue=function(d){this.setValue(d)},b}()},95519:function(be,Z,g){g.d(Z,{eR:function(){return v},lr:function(){return d}});var h=g(81337),B=g(62458),V=g(56578),M=g(90120),m=g(56707),w=g(60066),b=g(48708);function d(p,n){if(!p?.show)return 0;var c=p.maxWidthPercentage;return null!=p.defaultSeriesWidth&&(c=Math.min(Math.max(1,100*p.defaultSeriesWidth/n),50)),n*((c||0)/100)}function v(p,n){var c=p.seriesOptions,y=p.seriesLabelsProps;B.fF.assertValue(c,"seriesOptions");var f=c.seriesLabelsSettings;f&&(y.seriesPosition&&function(p,n,c){void 0===c&&(c="Desktop_FileMenu_Options");var f=p.seriesLabelsProps,o=p.omitGroupDisplayNames,a=p.selector,i=p.seriesOptions.seriesLabelsSettings,s=p.cardBuilder;n&&(s=n,n.addSimpleSlice("showSeries",new V.bd({descriptor:(0,h.__assign)((0,h.__assign)({},f.show),{selector:a}),value:i.show}).build(),function(r){return r.withDisabled(n&&!a)})),s.addGroup("options",function(r){o||r.withDisplayName(c),n||r.addSimpleSlice("showSeries",new V.bd({descriptor:(0,h.__assign)((0,h.__assign)({},f.show),{selector:a}),value:i.show}).build(),function(e){return e.withDisabled(n&&!a)}),r.addSimpleSlice("seriesMaximumWidth",new V.mu({descriptor:(0,h.__assign)((0,h.__assign)({},f.seriesMaximumWidth),{selector:a}),value:i.defaultSeriesWidth?null:i.maxWidthPercentage,options:{minValue:{type:0,value:m._i},maxValue:{type:1,value:m.NL}}}).build(),function(e){return e.withDisabled(!!a)}),r.addSimpleSlice("position",new V.uY({descriptor:(0,h.__assign)((0,h.__assign)({},f.seriesPosition),{selector:a}),value:i.position}).build(),function(e){return e.withDisabled(!!a)})})}(p,n),function(p,n,c){void 0===c&&(c="Role_DisplayName_Values");var y=p.seriesOptions,f=p.seriesLabelsProps,o=p.cardBuilder,t=p.omitGroupDisplayNames,a=p.selector,i=y.seriesLabelsSettings,s=y.style?y.style:(0,b.Ue)(),r=o;n&&(r=n),r.addGroup("values",function(e){t||e.withDisplayName(c),(f.seriesFontFamily||f.seriesFontSize)&&e.addCompositeSlice("font","Font",function(){return(new V.UN).withFontFamily({descriptor:(0,h.__assign)((0,h.__assign)({},f.seriesFontFamily),{selector:a}),value:i.fontProperties.family||w.rk}).withFontSizeProperties({descriptor:(0,h.__assign)((0,h.__assign)({},f.textSize),{selector:a}),value:i.fontProperties.size.pt,options:{minValue:{type:0,value:i.minFontSize},maxValue:{type:1,value:i.maxFontSize}}}).withBold({descriptor:(0,h.__assign)((0,h.__assign)({},f.bold),{selector:a}),value:i.bold}).withItalic({descriptor:(0,h.__assign)((0,h.__assign)({},f.italic),{selector:a}),value:i.italic}).withUnderline({descriptor:(0,h.__assign)((0,h.__assign)({},f.underline),{selector:a}),value:i.underline}).build()}),f.seriesColor&&e.addSimpleSlice("seriesColor",new V.BT({descriptor:(0,h.__assign)((0,h.__assign)({},f.seriesColor),{selector:a}),value:{value:i.seriesColor||M.v.getThemeColor(s,m.uQ)}}).build()),e.addSimpleSlice("seriesWordWrap",new V.bd({descriptor:(0,h.__assign)((0,h.__assign)({},f.seriesWordWrap),{selector:a}),value:i.wordWrap}).build())})}(p,n),null!=f.enableBackground&&y.enableBackground&&function(p,n){var y=p.hostServices,f=p.seriesLabelsProps,t=p.selector,a=p.seriesOptions.seriesLabelsSettings;(n||p.cardBuilder).addGroup("background",function(i){i.withDisplayName("Visual_Background").addTopLevelToggle("enableBackground",function(){return new V.bd({descriptor:(0,h.__assign)((0,h.__assign)({},f.enableBackground),{selector:t}),value:a.enableBackground}).build()}).addSimpleSlice("backgroundColor",new V.BT({descriptor:(0,h.__assign)((0,h.__assign)({},f.backgroundColor),{selector:t}),value:{value:a.backgroundColor}}).build()).addSimpleSlice("backgroundTransparency",V.JN.getTransparencySliderBuilder({descriptor:(0,h.__assign)((0,h.__assign)({},f.backgroundTransparency),{selector:t}),value:Math.round(100*a.backgroundTransparency),localize:function(r){return y.getLocalizedString(r)}}).build())})}(p,n))}},86108:function(be,Z,g){g.d(Z,{Ad:function(){return B},HN:function(){return V},Kf:function(){return h},yn:function(){return M}});var h={min:1,max:3},B={min:-30,max:100};function V(m){return h.min+(m??0)/100*h.max}function M(m){return Math.round((m-h.min)/h.max*100)}},45875:function(be,Z,g){g.d(Z,{$O:function(){return B},Cd:function(){return M},Ck:function(){return V}});var h=g(64329),B={rangeSlicer:{iconBreakpoints:[{height:1/0,width:75},{height:28,width:1/0},{height:63,width:162}],hideHeaderHeightNoSlider:48,hideHeaderHeightSlider:88},horizontalSlicer:{iconBreakpoints:[{height:1/0,width:75},{height:15,width:1/0}],hideHeaderHeight:48,fontSize:[{breakpoint:360,applyWidth:!0,applyHeight:!1,maxFontSizePt:9},{breakpoint:540,applyWidth:!0,applyHeight:!1,maxFontSizePt:16}]},slicerHeader:{fontSize:[{breakpoint:140,applyWidth:!0,applyHeight:!0,maxFontSizePt:9},{breakpoint:220,applyWidth:!0,applyHeight:!0,maxFontSizePt:16},{breakpoint:320,applyWidth:!0,applyHeight:!1,maxFontSizePt:24},{breakpoint:460,applyWidth:!0,applyHeight:!1,maxFontSizePt:32}]}},V=function(){function m(){}return m.fixWidgetPosition=function(w,b,d,P,O){if(void 0===d&&(d=null),void 0===P&&(P=!1),void 0===O&&(O=null),w&&b){var k="",x="",v="",p="",n="",c=m.getScale(b),y=b.get(0),f=w.offsetParent(),o=m.getScale(f);P&&w.css({transform:"scale(".concat(c,")")});var t=y.getBoundingClientRect();if(null==O&&(O=m.getWidgetPosition(t)),1&~O?(v=(window.innerHeight-t.top)/o,k="auto",n="bottom"):(k=(t.top+t.height)/o,n="top"),2&~O){var r=window.innerWidth-t.left-t.width;p="auto",m.isWidgetPositionExceedsBoundaries(w,c,x=r/o)&&(x=window.innerWidth-w.innerWidth()*c),n="right ".concat(n)}else m.isWidgetPositionExceedsBoundaries(w,c,p=t.left/o)&&(p=window.innerWidth-w.innerWidth()*c),n="left ".concat(n);var e={left:p,top:k,right:x,bottom:v,"transform-origin":n};d&&("auto"!==e.top?e.top+=d.top*c:e.bottom+=d.top*c,"auto"!==e.left?e.left+=d.left*c:e.right+=d.left*c),w.css(e)}},m.getScale=function(w){if(!w)return 1;var b=w.outerWidth();return 0===b?1:w.get(0).getBoundingClientRect().width/b},m.isWidgetPositionExceedsBoundaries=function(w,b,d){return w.innerWidth()*b+d>window.innerWidth},m.getWidgetPosition=function(w){var b=3,d=window.innerHeight,P=window.innerWidth;return d-w.top<d/2&&(b&=-2,b|=0),P-w.left<P/2&&(b&=-3,b|=4),b},m}();function M(m,w){for(var b=h.PR,d=0,P=w;d<P.length;d++){var O=P[d];if(m.width<O.breakpoint&&O.applyWidth||m.height<O.breakpoint&&O.applyHeight){b=O.maxFontSizePt;break}}return b}},51660:function(be,Z,g){g.d(Z,{Qh:function(){return n},y3:function(){return y},cy:function(){return f},O5:function(){return ne},Zx:function(){return s},kv:function(){return e},CK:function(){return t},Ez:function(){return i},oy:function(){return L},QZ:function(){return r},CP:function(){return C}});var B,h=g(81337),V=Object.freeze(((B={}).background=10,B.title=20,B["legend-title"]=30,B["legend-items"]=40,B["y1-axis-title"]=50,B["y1-axis-values"]=60,B["y1-axis-zoom-slider"]=70,B["y2-axis-title"]=80,B["y2-axis-values"]=90,B["y2-axis-zoom-slider"]=100,B["x-axis-values"]=110,B["x-axis-title"]=120,B["x-axis-zoom-slider"]=130,B["horizontal-gridlines"]=140,B["vertical-gridlines"]=150,B.lines=1e3,B.markers=1010,B.columns=1020,B.bars=1030,B["data-labels"]=1040,B["total-labels"]=1050,B["series-labels"]=1060,B["category-labels"]=1070,B)),b=g(32379),d=g(66232),P=g(52023),O=g(79154),k=g(62458),v=(0,O.CH)("sub-selectable"),p="sub-selection-data",n=(0,O.CH)("direct-edit-placeholder"),c=(0,O.CH)("direct-edit-placeholder-outline"),y="format-mode",f=v.class,o=v.selector,t="data-sub-selection-display-name",a="data-sub-selection-hide-outline",i="data-sub-selection-object-name",s="data-sub-selection-alt-object-name",r="data-sub-selection-type",e="data-sub-selection-direct-edit",S="data-sub-selection-sub-selected",C="data-sub-selection-ui-anchor",L="data-sub-selection-restricting-element",H="data-helper-host";function U(Y){return"".concat(Y,".").concat("htmlSubSelection")}function Q(Y,W){return W.closest("[".concat(H,"]"))===Y}var ne=function(){function Y(W){this.hostElement=W.hostElement,this.host=d3.select(W.hostElement),this.hostServices=W.hostServices,this.subSelectionRegionOutlines={},this.renderer=W.renderer,this.targetSource=W.targetSource,this.scale=W.scale,this.selectorCallback=W.selectorCallback,this.customOutlineCallback=W.customOutlineCallback,this.customElementCallback=W.customElementCallback,this.customElementRegionOutlineIdCallback=W.customElementRegionOutlineIdCallback,this.subSelectionMetadataCallback=W.subSelectionMetadataCallback,this.customScrollCallbacks=W.customScrollCallbacks,this.host.attr(H,!0)}return Y.createHtmlSubselectionHelper=function(W){return new Y(W)},Y.prototype.setCustomOutlineCallback=function(W){this.customOutlineCallback=W},Y.prototype.destroy=function(){this.removeEventHandlers(),this.hideAllOutlines()},Y.prototype.setFormatMode=function(W){this.formatMode!==W&&(this.formatMode=W,W?this.attachEventHandlers():(this.removeEventHandlers(),this.hideAllOutlines()))},Y.prototype.attachEventHandlers=function(){var W=this;this.host.on(U("pointerover"),function(){W.onPointerOver(d3.event)}),this.host.on(U("click"),function(){W.onClick(d3.event)}),this.host.on(U("contextmenu"),function(){W.onContextMenu(d3.event)})},Y.prototype.onVisualScroll=function(){var W=this;this.scrollDebounce||(this.onVisualScrollStart(),this.scrollDebounce=_.debounce(function(){return W.onVisualScrollEnd()},100)),this.scrollDebounce()},Y.prototype.onVisualScrollStart=function(){this.customScrollCallbacks?this.customScrollCallbacks.onScrollStart():this.scrollSubSelections||(this.hideAllOutlines(),this.scrollSubSelections=this.subSelections)},Y.prototype.onVisualScrollEnd=function(){if(this.customScrollCallbacks)return this.customScrollCallbacks.onScrollEnd(),void(this.scrollDebounce=void 0);this.scrollSubSelections&&this.scrollSubSelections.length>0&&this.subSelect(this.scrollSubSelections[0]),this.scrollSubSelections=void 0,this.scrollDebounce=void 0},Y.prototype.onPointerOver=function(W){var I=this;if(!(0,d.q)(W)&&"format"===this.targetSource){this.clearHoveredOutline();var E=this.getSubSelectionSourceFromEvent(W);if(E&&E.subSelectionElement){if(0===this.updateCustomOutlinesFromSubSelections([E.visualSubSelection],1).length){var l=this.getSubSelectionElementsFromSubSelectionSource(E);l=l.filter(function(A){var z=d3.select(A);return!z.attr(S)&&"true"!==z.attr(a)}),this.updateOutlinesFromSubSelectionElements(l,1)}this.renderOutlines();var T=U("pointerleave"),R=d3.select(E.subSelectionElement);R.on(T,function(){R.attr(S)||(I.clearHoveredOutline(),R.on(T,null))}),(0,d.n)(W)}}},Y.prototype.clearHoveredOutline=function(){var W=this;_.values(this.subSelectionRegionOutlines).filter(function(u){return 1===u.visibility}).forEach(function(u){W.subSelectionRegionOutlines[u.id]=(0,h.__assign)((0,h.__assign)({},W.subSelectionRegionOutlines[u.id]),{visibility:0})}),this.renderOutlines()},Y.prototype.onClick=function(W){this.subSelectFromEvent(W,!1)},Y.prototype.onContextMenu=function(W){this.subSelectFromEvent(W,!0)},Y.prototype.subSelectFromEvent=function(W,I){if(!(0,d.q)(W)&&"format"===this.targetSource){var E=this.getSubSelectionElementsFromEvent(W);(0,d.n)(W);var u={x:W.clientX,y:W.clientY};if(_.isEmpty(E))return void this.hostServices.onSelect({type:1,selectionMode:0,visualObjects:[],selectionOrigin:u});var l=E[0],T=d3.select(l).attr(i),R=this.getSubSelectionTypeFromElement(l),A=W.target,z=this.getDisplayNameFromElement(l),K=this.selectorCallback?this.selectorCallback(l):{},te=this.createVisualSubSelectionForSingleObject({objectName:T,subSelectionType:R,displayName:z,showUI:I,selectorsByColumn:K,selectionOrigin:u,target:A});this.scrollSubSelections=void 0,this.subSelect(te)}},Y.prototype.getSubSelectionElementsFromEvent=function(W){var I=this.getSubSelectionSourceFromEvent(W);return this.getSubSelectionElementsFromSubSelectionSource(I)},Y.prototype.getSubSelectionSourceFromEvent=function(W){var I=W.composedPath();if(I){for(var l,E=I.indexOf(this.hostElement),T=0,R=I.slice(0,E+1);T<R.length;T++){var A=R[T];if(d3.select(A).classed(f)){l=A;break}}if(l&&Q(this.hostElement,l)){var K=this.selectorCallback?this.selectorCallback(l):{},te=d3.select(l).attr(i),ee=this.getDisplayNameFromElement(l),ue=this.getSubSelectionTypeFromElement(l),pe={x:W.clientX,y:W.clientY},me=this.subSelectionMetadataCallback?this.subSelectionMetadataCallback(l):null;return{subSelectionElement:l,visualSubSelection:this.createVisualSubSelectionForSingleObject({objectName:te,subSelectionType:ue,displayName:ee,showUI:!1,selectorsByColumn:K,selectionOrigin:pe,metadata:me})}}}},Y.prototype.getSubSelectionElementsFromSubSelectionSource=function(W){var I=this;if(!W)return[];var E=W.visualSubSelection;if(this.customElementCallback){var u=this.customElementCallback(E);if(!_.isEmpty(u))return u}var l=this.getSubSelectableElements(),T=E.visualObjects[0],R=T.objectName,A=T.selectorsByColumn,z=l.filter(function(te){return te.getAttribute(i)===R});return this.selectorCallback&&(z=z.filter(function(te){return(0,b.Ic)(I.selectorCallback(te),A)})),z},Y.prototype.removeEventHandlers=function(){this.host.on(U("pointerover"),null),this.host.on(U("click"),null),this.host.on(U("contextmenu"),null)},Y.prototype.subSelect=function(W){var I=(0,h.__assign)({type:1},W);this.hostServices.onSelecting(I),1!==I.action&&this.hostServices.onSelect(I)},Y.prototype.isVisualObjectSubSelected=function(W){return!!(this.subSelections&&this.subSelections.length>0)&&!!this.subSelections.find(function(I){return I.visualObjects.find(function(E){return W.objectName===E.objectName&&(0,b.Ic)(W.selectorsByColumn,E.selectorsByColumn)})})},Y.prototype.updateElementOutline=function(W,I,E,u){return void 0===E&&(E=void 0),void 0===u&&(u=!1),this.updateElementOutlines([W],I,E,u)[0]},Y.prototype.updateElementOutlines=function(W,I,E,u){var l=this;void 0===E&&(E=void 0),void 0===u&&(u=!1);for(var T=_.groupBy(W,function(ee){var ue=d3.select(ee);return l.getElementRegionOutlineId(ue)}),R=Object.keys(T),A=0,z=R;A<z.length;A++){var K=z[A],te=this.getSubSelectionRegionOutline(K,T[K],I,E);this.subSelectionRegionOutlines[K]=te}return u||this.renderOutlines(),R},Y.prototype.getSubSelectionRegionOutline=function(W,I,E,u){for(var l=[],T=0,R=I;T<R.length;T++){var A=R[T],z=this.getRectangleSubSelectionOutline(A),K=this.getRestrictionRect(A,0);K&&(z=this.getClampedOutline(z,K,A));var te=this.getRestrictionRect(A,1);te&&(z=this.getClippedOutline(z,te,A)),z.height>0&&z.width>0&&l.push(z)}var ee={type:0,outlines:l};return null!=u&&(ee.extendedProperties=u),{id:W,visibility:E,outline:ee,source:this.targetSource}},Y.prototype.traverseElementRestrictions=function(W,I,E){var u=W.closest("[".concat(L,'="').concat(E,'"]')),l=I;if(u&&Q(this.hostElement,u)){l||(l=new P.U(0,0,Number.MAX_VALUE,Number.MAX_VALUE));var T=u.getBoundingClientRect(),R=Math.max(T.top,l.top),A=Math.max(T.left,l.left),z=Math.max(Math.min(T.bottom,l.top+l.height)-R,0),K=Math.max(Math.min(T.right,l.left+l.width)-A,0);l=new P.U(A,R,K,z),l=this.traverseElementRestrictions(W.parentElement,l,E)}return l},Y.prototype.getRestrictionRect=function(W,I){return this.traverseElementRestrictions(W,void 0,I)},Y.prototype.applyElementRestriction=function(W,I){var E=Y.getDataForElement(I);if(E&&E.outlineRestrictionOptions){var u=E.outlineRestrictionOptions,l=u.margin,T=u.padding,R=0,A=0,z=0,K=0;if(l){var te=l.top;R+=ee=l.left,A+=te,z-=l.bottom+te,K-=ee+l.right}if(T){var ee,me=T.top;R-=ee=T.left,A-=me,z+=T.bottom+me,K+=ee+T.right}W.left+=R,W.top+=A,W.height+=z,W.width+=K}return W},Y.prototype.getClampedOutline=function(W,I,E){var u=this.applyElementRestriction(I,E),l=Math.max(W.x,u.left),T=Math.max(W.y,u.top),R=Math.min(W.x+W.width,u.left+u.width),A=Math.min(W.y+W.height,u.top+u.height);return(0,h.__assign)((0,h.__assign)({},W),{x:l,y:T,height:A-T,width:R-l})},Y.prototype.getClippedOutline=function(W,I,E){var u=this.applyElementRestriction(I,E);return(0,h.__assign)((0,h.__assign)({},W),{clipPath:{type:1,x:u.left,y:u.top,height:u.height,width:u.width}})},Y.prototype.getRectangleSubSelectionOutline=function(W){var I=W.getBoundingClientRect(),R={height:I.height,width:I.width,x:I.x,y:I.y,type:1};return W.hasAttribute(e)&&(R.directEdit=function(){if(W.hasAttribute(e))return JSON.parse(W.getAttribute(e))}),R},Y.prototype.updateRegionOutline=function(W,I){void 0===I&&(I=!1),this.updateRegionOutlines([W],I)},Y.prototype.updateRegionOutlines=function(W,I){void 0===I&&(I=!1);for(var E=0,u=W;E<u.length;E++){var l=u[E];this.subSelectionRegionOutlines[l.id]=l}I||this.renderOutlines()},Y.prototype.getElementsFromSubSelections=function(W){if(!W)return[];var I=[],E=this.getSubSelectableElements(),u=this.isElementSubSelected,l=this.selectorCallback;return d3.selectAll(E).each(function(){u(this,W,l)&&I.push(this)}),I},Y.prototype.setSubSelectedStateDOM=function(W){if(W){var I=this.getSubSelectableElements(),E=this.isElementSubSelected,u=this.selectorCallback;d3.selectAll(I).attr(S,function(){return!!E(this,W,u)||null})}},Y.prototype.isElementSubSelected=function(W,I,E){if(!I)return!1;var u=d3.select(W).attr(i),l=d3.select(W).attr(s);return I.some(function(R){var A;return null===(A=R.visualObjects)||void 0===A?void 0:A.some(function(z){var K=!0;return E&&((0,b.Ic)(z.selectorsByColumn,E(W))||(K=!1)),(z.objectName===u||z.objectName===l)&&K})})},Y.prototype.updateCustomOutlinesFromSubSelections=function(W,I){var u,E=this;void 0===I&&(I=2);var l=[];if(this.customOutlineCallback&&!_.isEmpty(W))for(var T=0,R=W;T<R.length;T++){var A=R[T],z=this.customOutlineCallback(A);if(z&&z.length>0){for(var K=function(Pe){k.fF.assert(function(){var Te;return(null!==(Te=Pe.source)&&void 0!==Te?Te:"format")===E.targetSource},"custom outline's source should match the current htmlSubSelectionHelper's targetSource");var Ee=null===(u=te.subSelectionRegionOutlines[Pe.id])||void 0===u?void 0:u.visibility;(1!==I||2!==Ee)&&te.setOutline(Pe,I)},te=this,ee=0,ue=z;ee<ue.length;ee++)K(ue[ee]);l.push(A)}}return l},Y.prototype.updateOutlinesFromSubSelectionElements=function(W,I,E){void 0===I&&(I=2),void 0===E&&(E=void 0);var u=[];if(!_.isEmpty(W)){for(var l=0,T=W;l<T.length;l++){var R=T[l],A=Y.getDataForElement(R);if(A&&A.getRegionOutlines)for(var K=0,te=A.getRegionOutlines();K<te.length;K++){var ee=te[K],ue=this.getRestrictionRect(R,1);if(ue){var pe=this.getClippedOutline(ee.outline,ue,R);ee=(0,h.__assign)((0,h.__assign)({},ee),{outline:(0,h.__assign)((0,h.__assign)({},pe),{extendedProperties:E}),source:this.targetSource})}this.setOutline(ee,I)}else u.push(R)}this.updateElementOutlines(u,I,E,!0)}},Y.prototype.updateOutlinesFromSubSelections=function(W,I,E){I&&this.hideAllOutlines(!0),this.subSelections=W;var u=W?(0,h.__spreadArray)([],W,!0):[];this.setSubSelectedStateDOM(W);var l=this.updateCustomOutlinesFromSubSelections(W);l?.length>0&&_.remove(u,function(A){return l.find(function(z){return _.isEqual(A,z)})});var R=this.getElementsFromSubSelections(u).filter(function(A){return"true"!==d3.select(A).attr(a)});this.updateOutlinesFromSubSelectionElements(R),E||this.renderOutlines()},Y.prototype.refreshOutlines=function(){this.updateOutlinesFromSubSelections(this.subSelections,!0,!1)},Y.prototype.getLabelsFromSubSelections=function(W,I,E){void 0===E&&(E=" ");for(var l=[],T=0,R=this.getElementsFromSubSelections(W);T<R.length;T++){for(var A=R[T],z="",K=0,te=I;K<te.length;K++){var ue=A.attributes.getNamedItem(te[K]);ue&&ue.value&&(z+=ue.value+E)}_.isEmpty(z)||l.push(z.trim())}return l},Y.prototype.setOutline=function(W,I){var E=(0,h.__assign)((0,h.__assign)({},W),{visibility:I,id:W.id});this.subSelectionRegionOutlines[W.id]=E},Y.setDataForElement=function(W,I){$(W).data(p,I)},Y.getDataForElement=function(W){return $(W).data(p)},Y.prototype.hideAllOutlines=function(W){void 0===W&&(W=!1);var I=this.subSelectionRegionOutlines,E=[];for(var u in I)E.push((0,h.__assign)((0,h.__assign)({},I[u]),{visibility:0}));this.updateRegionOutlines(E,W)},Y.prototype.getRegionOutline=function(W){return this.getRegionOutlines([W])[0]},Y.prototype.getRegionOutlines=function(W){var I=this;return W.map(function(E){return I.subSelectionRegionOutlines[E]})},Y.prototype.getAllOutlines=function(){return(0,h.__assign)({},this.subSelectionRegionOutlines)},Y.prototype.renderOutlines=function(){var W=_.values(this.subSelectionRegionOutlines);this.renderer.updateRegionOutlines(W)},Y.prototype.addDirectEditPlaceholderOutlines=function(){var W=this,I=this.scale(),E=this.hostElement.getBoundingClientRect(),l=_.filter(_.map(this.hostElement.querySelectorAll(n.selector),function(R){return{element:R,bounds:(A=R,z=A.getBoundingClientRect(),{left:(z.x-E.x)/I-1,top:(z.y-E.y)/I-1,width:z.width/I,height:z.height/I}),outlineId:W.getElementRegionOutlineId(d3.select(R)),objectName:R.getAttribute(i),displayNameKey:R.getAttribute(t)};var A,z}),function(R){return!!R.outlineId&&!!R.objectName}),T=d3.select(this.hostElement).selectAll("div.".concat(c.class)).data(l,function(R){return R.objectName});T.enter().append("div").classed(c.class,!0).attr("data-testid",function(R){return"direct-edit-placeholder-outline-".concat(R.objectName)}).style("position","absolute").style("border","1px black dashed").style("cursor","text").on("click",function(R){d3.event.stopImmediatePropagation();var A={visualObjects:[{objectName:R.objectName,selectorsByColumn:{}}],subSelectionType:1,selectionOrigin:{x:d3.event.x,y:d3.event.y},immediateDirectEdit:R.outlineId,displayName:R.displayNameKey&&W.hostServices.getLocalizedString(R.displayNameKey)};W.subSelect(A)}).merge(T).style("width",function(R){return"".concat(R.bounds.width,"px")}).style("height",function(R){return"".concat(R.bounds.height,"px")}).style("left",function(R){return"".concat(R.bounds.left,"px")}).style("top",function(R){return"".concat(R.bounds.top,"px")}),T.exit().remove()},Y.prototype.getElementRegionOutlineId=function(W){var I=this.customElementRegionOutlineIdCallback?this.customElementRegionOutlineIdCallback(W.node()):W.attr(i),E="";if(this.selectorCallback){var u=this.selectorCallback(W.node()),l=(0,b.tV)(u);l&&(E=(0,b.km)(l))}return""!==E?"".concat(I,"___").concat(E):I},Y.prototype.getAllSubSelectables=function(W){var I=this,E=this.getSubSelectableElements(),l=_.uniqWith(E,function(ue,pe){return ue.getAttribute(i)===pe.getAttribute(i)&&(!I.selectorCallback||(0,b.Ic)(I.selectorCallback(ue),I.selectorCallback(pe)))}),T=l;W&&(T=l.filter(function(ee){var ue=I.getSubSelectionTypeFromElement(ee);return Number(ue)===W}));var R=T.map(function(ee){var ue=ee.getBoundingClientRect();return{x:ue.x+ue.width/2,y:ue.y+ue.height/2}}),z=_.orderBy(Array.from(Array(R.length).keys()),function(ue){return R[ue].y},["asc"]),K={currentSeriesMultiplier:0};return z.map(function(ee){return I.createSubSelectionFromElement(T[ee],!1,void 0,K,R[ee])})},Y.prototype.getNextSubSelectable=function(W,I){var E=this.getAllSubSelectables();if(E.length){var l,u=_.orderBy(E,["focusOrder"],["asc"]);if(!W)return I?_.last(u):_.first(u);var T=_.findIndex(u,function(A){return _.isEqual(W,A)});if(T>-1){var R=I?T-1:T+1;R>-1&&R<u.length&&(l=u[R])}return l}},Y.prototype.createVisualSubSelectionForSingleObject=function(W){var I,E=W.objectName,u=W.subSelectionType,l=W.displayName,T=W.showUI,R=W.selectorsByColumn,A=W.selectionOrigin,z=W.focusOrder,K=W.metadata,te=W.target,ee=(null!==(I=te?.getBoundingClientRect())&&void 0!==I?I:{top:0}).top,ue=A&&u in[1,2]?(0,h.__assign)((0,h.__assign)({},A),{offset:{x:0,y:-1*(A?.y-ee)}}):A;return(0,h.__assign)((0,h.__assign)({visualObjects:[{objectName:E,selectorsByColumn:R??{}}],showUI:T,displayName:l,subSelectionType:u,selectionOrigin:ue,target:te},K?{metadata:K}:{}),z?{focusOrder:z}:{})},Y.prototype.createSubSelectionFromElement=function(W,I,E,u,l){var T=W.getAttribute(i);k.fF.assert(function(){return!!T},"createVisualSubSelectionFromElement should not be called on an element that is not subselectable");var R={};this.selectorCallback&&(R=this.selectorCallback(W));var A=this.getSelectorKey(R);A&&void 0===u[A]&&(u[A]=u.currentSeriesMultiplier,u.currentSeriesMultiplier++);var z=this.getSubSelectionFocusOrder(T,u[A]),K=this.getSubSelectionTypeFromElement(W),te=this.getDisplayNameFromElement(W),ee=l;return E&&(ee={x:E.clientX,y:E.clientY}),this.createVisualSubSelectionForSingleObject({objectName:T,subSelectionType:K,displayName:te,showUI:I,selectorsByColumn:R,selectionOrigin:ee,focusOrder:z})},Y.prototype.getDisplayNameFromElement=function(W){var I=W.getAttribute(t);if(I)I=this.hostServices.getLocalizedString(I);else{var E=Y.getDataForElement(W);E?.getDisplayName?I=E.getDisplayName():k.fF.assertFail("getAllSubSelectables - custom jquery data getDisplayName should be defined if no attribute is added to DOMElement")}return I},Y.prototype.getSubSelectionTypeFromElement=function(W){var I=W.getAttribute(r);if(I)return Number(I);k.fF.assertFail("getAllSubSelectables - DOMElement should have type")},Y.prototype.getSelectorKey=function(W){var I=(0,b.fd)((0,b.tV)(W));return _.isEmpty(I)?"":JSON.stringify(I)},Y.prototype.getSubSelectionFocusOrder=function(W,I){var E=V[W];return E?(void 0!==I&&(E+=1e3*I),E):999999},Y.prototype.getSubSelectableElements=function(){var W=this.hostElement;return this.host.selectAll(o).filter(function(){return Q(W,this)}).nodes()},Y}()},48645:function(be,Z,g){g.d(Z,{y:function(){return B}});var h=g(81337),B=function(){function V(M,m){void 0===m&&(m=2),this.renderer=M,this.tolerance=m}return V.prototype.updateRegionOutlines=function(M){for(var m=[],w=0,b=M;w<b.length;w++){var d=b[w],P=this.traverse(d.outline);m.push((0,h.__assign)((0,h.__assign)({},d),{outline:P}))}this.renderer.updateRegionOutlines(m)},V.prototype.traverse=function(M){var m=this;if(0===M.type){var w=M.outlines.map(function(d){return m.traverse(d)}),b=this.mergeOverlappingOutlines(w);return(0,h.__assign)((0,h.__assign)({},M),{type:0,outlines:b})}return M},V.prototype.isOverlapping=function(M,m){var w,b,d,O,k,x;return M.x<=m.x?(w=M.x,b=m.x,d=M.width):(w=m.x,b=M.x,d=m.width),M.y<=m.y?(O=M.y,k=m.y,x=M.height):(O=m.y,k=M.y,x=m.height),O+x+this.tolerance>=k-this.tolerance&&w+d+this.tolerance>=b-this.tolerance},V.prototype.mergeOverlappingOutlines=function(M){for(var m=0;m<M.length;m++)for(var w=m+1;w<M.length;w++){var b=M[m],d=M[w];1===b.type&&1===d.type&&this.isOverlapping(b,d)&&(M[m]=this.merge(b,d),M.splice(w,1),w--)}return M},V.prototype.merge=function(M,m){var w=Math.min(M.x,m.x),b=Math.min(M.y,m.y);return{type:1,x:w,y:b,width:Math.max(M.x+M.width,m.x+m.width)-w,height:Math.max(M.y+M.height,m.y+m.height)-b}},V}()},86900:function(be,Z,g){g.d(Z,{D:function(){return o}});var h=g(79154),B=g(62458),V=function(){function t(a){this.clipPaths=a}return t.createRendererGroupClipPath=function(a){return new t(a)},t.prototype.createPathString=function(a,i){return void 0===i&&(i=0),this.clipPaths.map(function(s){return s.createPathString(a,i)}).join(" ")},t}(),M=g(92379),m=function(){function t(a){this.points=a}return t.createRendererPolygonClipPath=function(a,i,s){return void 0===i&&(i=0),void 0===s&&(s=0),new t(a.points.map(function(e){return{x:e.x-i,y:e.y-s}}))},t.prototype.createPathString=function(a,i){void 0===i&&(i=0);var s=this.points.map(function(L){return{x:L.x-a.x,y:L.y-a.y}});if(0!==i){var r=M.m.fromPolygonPoints(s);s=M.m.resize(r,i).polygonPoints}for(var S=d3.path(),C=0;C<s.length;C++){var D=s[C];0===C?S.moveTo(D.x,D.y):S.lineTo(D.x,D.y)}return S.closePath(),S.toString()},t}(),w=function(){function t(a){this.bounds=a}return t.createRendererRectangleClipPath=function(a,i,s){return void 0===i&&(i=0),void 0===s&&(s=0),new t({x:a.x-i,y:a.y-s,width:a.width,height:a.height})},t.prototype.createPathString=function(a,i){void 0===i&&(i=0);var s=d3.path();return s.rect(this.bounds.x-a.x,this.bounds.y-a.y,this.bounds.width+2*i,this.bounds.height+2*i),s.toString()},t}(),b=g(81337),d=function(){function t(a,i,s,r,e,S){void 0===S&&(S=void 0),this.id=a,this.qualifiedName=i,this.bounds=s,this.points=r,this.clipPath=e,this.extendedProperties=S}return t.prototype.cleanup=function(a){return a},t.prototype.renderHandles=function(a,i){this.applyClipPath(a,i);var s=a.selectAll(t.OutlineHandleSelector.selector).data(this.points);return s.enter().append("circle").classed(t.OutlineHandleSelector.class,!0).merge(s).attr("cx",function(e){return e.x}).attr("cy",function(e){return e.y}).attr("r",i),s.exit().remove(),a},t.prototype.tag=function(){return document.createElementNS("http://www.w3.org/2000/svg",this.qualifiedName)},t.prototype.shouldRenderHandles=function(){var a;return null!=(null===(a=this.extendedProperties)||void 0===a?void 0:a.showHandles)?this.extendedProperties.showHandles:2===this.visibility},t.prototype.applyClipPath=function(a,i){if(void 0===i&&(i=0),this.clipPath){var s=this.clipPath.createPathString(this.bounds,i);a.attr("clip-path","path('".concat(s,"')"))}return a},t.OutlineHandleSelector=(0,h.CH)("outline-handle"),t}();function O(t,a,i){return{x:t.x+i*Math.sin(a),y:t.y-i*Math.cos(a)}}var k=function(t){function a(i,s,r,e,S){var C=this,D=r,L=(0,b.__assign)((0,b.__assign)({},D),{innerRadius:Math.max(0,D.innerRadius-4),outerRadius:D.outerRadius+4}),H=L.center,N=L.innerRadius,U=L.outerRadius,Y=H.x-U,W=H.y-U,I=2*U,E=I,u=I,T=L.startAngle+0,R=L.endAngle+0,A=[O(H,T,N),O(H,T,U),O(H,R,U)];return N&&A.push(O(H,R,N)),(C=t.call(this,i,"path",{x:Y,y:W,width:E,height:u},A,e,S)||this).visibility=s,C.outline=L,C}return(0,b.__extends)(a,t),a.create=function(i,s,r,e,S,C,D){var L;void 0===S&&(S=0),void 0===C&&(C=0),void 0===D&&(D=void 0);var H=(L=r.center).x,N=L.y;return new a(i,s,r=(0,b.__assign)((0,b.__assign)({},r),{center:{x:H-S,y:N-C}}),e,D)},a.prototype.initialize=function(i){return i.classed(a.OutlineSelector.class,!0),i},a.prototype.update=function(i){var s,r=(s=this.outline).innerRadius,e=s.outerRadius,S=s.center,C=d3.arc().innerRadius(r).outerRadius(e);return this.applyClipPath(i).style("transform","translate(".concat(S.x,"px, ").concat(S.y,"px)")).attr("d",C(this.outline)).style("pointer-events","none").style("stroke",function(D){var L;return null===(L=D.extendedProperties)||void 0===L?void 0:L.color}).style("stroke-width",function(D){var L;return(null===(L=D.extendedProperties)||void 0===L?void 0:L.thickness)>=1?D.extendedProperties.thickness:null})},a.OutlineSelector=(0,h.CH)("outline-arc"),a}(d),x=function(t){function a(i,s,r,e,S,C){var D=t.call(this,i,"g",e,[],S,C)||this;return D.visibility=s,D.outlines=r,D}return(0,b.__extends)(a,t),a.createRendererGroupOutline=function(i,s,r,e,S){void 0===S&&(S=void 0);var C=Math.min.apply(Math,r.map(function(U){return U.bounds.x})),D=Math.min.apply(Math,r.map(function(U){return U.bounds.y})),L=Math.max.apply(Math,r.map(function(U){return U.bounds.x+U.bounds.width})),H=Math.max.apply(Math,r.map(function(U){return U.bounds.y+U.bounds.height}));return new a(i,s,r,{x:C,y:D,width:L-C,height:H-D},e,S)},a.prototype.shouldRenderHandles=function(){var i=this;return this.outlines.some(function(s){var r,e,S=_.cloneDeep(s);return S.extendedProperties=(0,b.__assign)((0,b.__assign)({},null!==(r=i.extendedProperties)&&void 0!==r?r:{}),null!==(e=s.extendedProperties)&&void 0!==e?e:{}),S.shouldRenderHandles()})},a.prototype.renderHandles=function(i,s){this.applyClipPath(i,s);for(var r=[],e=0,S=this.outlines;e<S.length;e++){var C=S[e];C.shouldRenderHandles()&&r.push(C)}var D=i.selectAll(a.OutlineHandlesGroupItem.selector).filter(function(){return this.parentNode===i.node()}).data(r,function(H){return"".concat(H.id)}),L=D.enter().append("g").classed(a.OutlineHandlesGroupItem.class,!0).merge(D);return L.each(function(H){H.renderHandles(d3.select(this),s)}),D.exit().remove(),L},a.prototype.initialize=function(i){return this.renderGroupOutline(i)},a.prototype.update=function(i){return this.renderGroupOutline(i)},a.prototype.renderGroupOutline=function(i){this.applyClipPath(i);var s=i.selectAll(a.OutlineGroupItem.selector).filter(function(){return this.parentNode===i.node()}).data(this.outlines,function(e){return"".concat(e.id)}),r=s.enter().append(function(e){return e.tag()}).each(function(e){e.initialize(d3.select(this))}).classed(a.OutlineGroupItem.class,!0).style("stroke",function(e){var S;return null===(S=e.extendedProperties)||void 0===S?void 0:S.color}).style("stroke-width",function(e){var S;return(null===(S=e.extendedProperties)||void 0===S?void 0:S.thickness)>=1?e.extendedProperties.thickness:null}).merge(s);return r.each(function(e){e.update(d3.select(this))}),s.exit().each(function(e){e.cleanup(d3.select(this)),i.remove()}),r},a.OutlineGroupItem=(0,h.CH)("outline-group-item"),a.OutlineHandlesGroupItem=(0,h.CH)("outline-handles-group-item"),a}(d),v=function(t){function a(i,s,r,e,S,C){var D=t.call(this,i,"line",e,r,S,C)||this;return D.visibility=s,D}return(0,b.__extends)(a,t),a.createRendererLineOutline=function(i,s,r,e,S,C,D){void 0===S&&(S=0),void 0===C&&(C=0),void 0===D&&(D=void 0);var L=r.map(function(Q){return{x:Q.x-S,y:Q.y-C}}),N=M.m.fromPolygonPoints(L).absoluteBoundingRect();return new a(i,s,L,{x:N.left,y:N.top,width:N.width,height:N.height},e,D)},a.prototype.shouldRenderHandles=function(){return!0},a.prototype.initialize=function(i){return i.classed(a.OutlineSelector.class,!0)},a.prototype.update=function(i){return this.applyClipPath(i).style("stroke",function(s){var r;return null===(r=s.extendedProperties)||void 0===r?void 0:r.color}).style("stroke-width",function(s){var r;return(null===(r=s.extendedProperties)||void 0===r?void 0:r.thickness)>=1?s.extendedProperties.thickness:null})},a.OutlineSelector=(0,h.CH)("outline-line"),a}(d),p=function(t){function a(i,s,r,e,S,C){var D=t.call(this,i,"polygon",e,r,S,C)||this;return D.visibility=s,D}return(0,b.__extends)(a,t),a.createRendererPolygonOutline=function(i,s,r,e,S,C,D){void 0===S&&(S=0),void 0===C&&(C=0),void 0===D&&(D=void 0);var L=r.map(function(Q){return{x:Q.x-S,y:Q.y-C}}),N=M.m.fromPolygonPoints(L).absoluteBoundingRect();return new a(i,s,L,{x:N.left,y:N.top,width:N.width,height:N.height},e,D)},a.prototype.initialize=function(i){return i.classed(a.OutlineSelector.class,!0)},a.prototype.update=function(i){return this.applyClipPath(i).attr("points",this.points.map(function(s){return[s.x,s.y].join(",")}).join(" ")).style("stroke",function(s){var r;return null===(r=s.extendedProperties)||void 0===r?void 0:r.color}).style("stroke-width",function(s){var r;return(null===(r=s.extendedProperties)||void 0===r?void 0:r.thickness)>=1?s.extendedProperties.thickness:null})},a.OutlineSelector=(0,h.CH)("outline-polygon"),a}(d),n=function(t){function a(i,s,r,e,S,C){var D=t.call(this,i,"rect",r,[{x:r.x,y:r.y},{x:r.x+r.width,y:r.y},{x:r.x+r.width,y:r.y+r.height},{x:r.x,y:r.y+r.height}],e,C)||this;return D.visibility=s,D.subSelection=r,D.directEditCallbacks=S,D.eventListeners={},D.directEditCallbacks&&r.directEdit&&(D.eventListeners=D.populateEventListeners()),D}return(0,b.__extends)(a,t),a.createRendererRectangleOutline=function(i,s,r,e,S,C,D,L){return void 0===C&&(C=0),void 0===D&&(D=0),void 0===L&&(L=void 0),r.x=r.x-C,r.y=r.y-D,new a(i,s,r,e,S,L)},a.prototype.initialize=function(i){return this.attachEventHandlers(i),i.classed(a.OutlineSelector.class,!0),i},a.prototype.update=function(i){return this.applyClipPath(i).attr("x",this.subSelection.x).attr("y",this.subSelection.y).attr("width",this.subSelection.width).attr("height",this.subSelection.height).style("pointer-events",this.isInteractive()?"fill":"none").style("cursor",this.isInteractive()?"text":void 0).style("stroke",function(s){var r;return null===(r=s.extendedProperties)||void 0===r?void 0:r.color}).style("stroke-width",function(s){var r;return(null===(r=s.extendedProperties)||void 0===r?void 0:r.thickness)>=1?s.extendedProperties.thickness:null})},a.prototype.isInteractive=function(){return this.directEditCallbacks&&this.subSelection.directEdit&&2===this.visibility},a.prototype.populateEventListeners=function(){var i=this;return{"pointerdown.directEditEvent":function(r){0===r.button&&(r.stopImmediatePropagation(),r.preventDefault(),i.directEditCallbacks.startEdit(i.subSelection))},"contextmenu.directEditEvent":function(r){var e=r;2===e.button&&(r.stopImmediatePropagation(),r.preventDefault(),i.directEditCallbacks.showUI(i.subSelection,e))}}},a.prototype.attachEventHandlers=function(i){for(var s=this.eventListeners,e=function(H){var N=s[H];i.on(H,function(){N(d3.event,this)})},S=0,C=Object.keys(s);S<C.length;S++)e(C[S])},a.OutlineSelector=(0,h.CH)("outline-rect"),a}(d),o=function(){function t(a,i){this.directEditCallbacks=i,this.outlineHost=d3.select(a),this.visibleOutlines=[]}return t.create=function(a,i){return new t(a,i)},t.createWithDefaultHost=function(){var a=d3.select("body").append("div").style("position","absolute").style("top",0).style("left",0).style("width","100%").style("height","100%").style("z-index",1).style("pointer-events","none").node();return t.create(a)},t.prototype.updateRegionOutlines=function(a,i){this.clearRenderOutlineDelay();var s=this.convertRegionOutlinesToOutlines(a,i);this.renderOutlines(s)},t.prototype.convertRegionOutlinesToOutlines=function(a,i){var s=this,r=_.cloneDeep(a);return _.flatMap(r,function(S){return s.convertSubSelectionToOutline(S.id,S.visibility,S.outline,i?.x,i?.y)})},t.prototype.convertSubSelectionToOutline=function(a,i,s,r,e,S){var C=this;void 0===r&&(r=0),void 0===e&&(e=0);var D=_.isUndefined(S)?a:"".concat(a,"-").concat(S),L=s.clipPath?this.convertClipPathToRendererClipPath(s.clipPath,r,e):void 0;switch(s.type){case 0:var H=s.outlines.map(function(N,U){return C.convertSubSelectionToOutline(D,i,N,r,e,U)});return x.createRendererGroupOutline(D,i,H,L,s.extendedProperties);case 2:return v.createRendererLineOutline(D,i,s.points,L,r,e,s.extendedProperties);case 3:return p.createRendererPolygonOutline(D,i,s.points,L,r,e,s.extendedProperties);case 1:return n.createRendererRectangleOutline(D,i,s,L,this.directEditCallbacks,r,e,s.extendedProperties);case 4:return k.create(D,i,s,L,r,e,s.extendedProperties);default:B.fF.assertNever(s)}},t.prototype.convertClipPathToRendererClipPath=function(a,i,s){var r=this;switch(void 0===i&&(i=0),void 0===s&&(s=0),a.type){case 0:var e=a.clipPaths.map(function(S){return r.convertClipPathToRendererClipPath(S,i,s)});return V.createRendererGroupClipPath(e);case 3:return m.createRendererPolygonClipPath(a,i,s);case 1:return w.createRendererRectangleClipPath(a,i,s);default:B.fF.assertNever(a)}},t.prototype.renderOutlines=function(a){var i=this,s=[],r=[],e=[];if(a)for(var S=0,C=a;S<C.length;S++){var D=C[S];2===D.visibility?(s.push(D),e.push(D)):1===D.visibility&&(r.push(D),e.push(D))}this.visibleOutlines=_.intersectionBy(e,this.visibleOutlines,"id"),this.visibleOutlines=_.unionBy(s,this.visibleOutlines,"id"),this.renderVisibleOutlines(this.visibleOutlines),this.visibleOutlines=_.unionBy(r,this.visibleOutlines,"id"),this.setRenderOutlineDelay(function(){i.renderVisibleOutlines(i.visibleOutlines)})},t.prototype.renderVisibleOutlines=function(a){var i=this.renderSVGContainer(t.OutlineShapesSVGSelector);t.renderOutlineShapes(i,a);var s=this.renderSVGContainer(t.OutlineHandlesSVGSelector);t.renderOutlineHandles(s,a)},t.prototype.renderSVGContainer=function(a){return this.outlineHost.selectAll(a.selector).data([null]).join("svg").classed(a.class,!0)},t.renderOutlineShapes=function(a,i){var s=a.selectAll(t.OutlineShapeSelector.selector).data(i,function(e){return"".concat(e.id)});s.enter().append(function(e){return e.tag()}).each(function(e){e.initialize(d3.select(this))}).classed(t.OutlineShapeSelector.class,!0).merge(s).attr("data-sub-selection-outline-id",function(e){return"".concat(e.id)}).classed(t.OutlineActiveSelector.class,function(e){return 2===e.visibility}).classed(t.OutlineHoverSelector.class,function(e){return 1===e.visibility}).style("stroke",function(e){var S;return null===(S=e.extendedProperties)||void 0===S?void 0:S.color}).style("stroke-width",function(e){var S;return(null===(S=e.extendedProperties)||void 0===S?void 0:S.thickness)>=1?e.extendedProperties.thickness:null}).each(function(e){e.update(d3.select(this))}),s.exit().each(function(e){var S=d3.select(this);e.cleanup(S),S.remove()})},t.renderOutlineHandles=function(a,i){for(var s=[],r=0,e=i;r<e.length;r++){var S=e[r];S.shouldRenderHandles()&&s.push(S)}var C=a.selectAll(t.OutlineShapeHandlesSelector.selector).data(s,function(L){return"".concat(L.id)});C.enter().append("g").classed(t.OutlineShapeHandlesSelector.class,!0).merge(C).each(function(L){L.renderHandles(d3.select(this),4)}),C.exit().remove()},t.prototype.setRenderOutlineDelay=function(a){this.clearRenderOutlineDelay(),this.outlineDelayTimer=setTimeout(a,100)},t.prototype.clearRenderOutlineDelay=function(){this.outlineDelayTimer&&(clearTimeout(this.outlineDelayTimer),this.outlineDelayTimer=void 0)},t.OutlineShapesSVGSelector=(0,h.CH)("outline-svg-shapes"),t.OutlineHandlesSVGSelector=(0,h.CH)("outline-svg-handles"),t.OutlineShapeSelector=(0,h.CH)("outline-shape"),t.OutlineShapeHandlesSelector=(0,h.CH)("outline-shape-handles"),t.OutlineHoverSelector=(0,h.CH)("outline-hover"),t.OutlineActiveSelector=(0,h.CH)("outline-active"),t}()},44977:function(be,Z,g){g.d(Z,{PC:function(){return w},lM:function(){return d},mC:function(){return m},nU:function(){return M},zI:function(){return b}});var h=g(62458),B=g(32041),V=g(66001);function M(P){return P.toString().replace(new RegExp(" ","g"),"&nbsp")}function m(P){return P.replace(/\u2026/g,"")}function w(P){if(null!=P)return P.replace(/ /g,"\xa0")}function b(P){if(null!=P)return P.replace(/\n| /g,"\xa0")}function d(P,O,k,x,v,p){void 0===x&&(x=0),void 0===v&&(v=!1),void 0===p&&(p=!1),h.fF.assertValue(P,"textElement");var n=B.b.getSvgMeasurementProperties(P),c=B.b.estimateSvgTextHeight(n)+x,y=Math.max(1,Math.floor(k/c)),f=d3.select(P),o=P.textContent;P.textContent="";for(var t=(0,V.ql)(o,n,B.b.measureSvgTextWidth,O,y,null,!1,v,p),a=0,i=t.length;a<i;a++)n.text=t[a],f.append("tspan").attr("x",0).attr("dy",0===a?0:c).text(B.b.getTailoredTextOrDefault(n,O))}},67064:function(be,Z,g){g.d(Z,{mR:function(){return B}});var h=!0;function B(){return h}},70249:function(be,Z,g){g.d(Z,{$s:function(){return P},Sh:function(){return V},Vi:function(){return O},_M:function(){return m},eR:function(){return b},oN:function(){return M},rI:function(){return d}});var h=g(79154),B=g(51660),V={node:"treemapNode",highlight:"treemapNodeHighlight",major:"majorLabel",minor:"minorLabel"},M="foregroundLight";function m(k,x){return k.depth>1&&!k.data.identity.hasIdentity()&&!x||w(k)?h.zu:k.data.color}function w(k){var x=k.children;if(!x)return!1;var v=x.length;if(0===v)return!1;for(var p=v-1;p>=0;p--)if(x[p].data.identity.hasIdentity())return!0;return!1}function b(k,x,v,p){return v?x&&p?k.data.selected?null:(0).toString():p?null:.4.toString():!x||k.data.selected||k.depth>1&&k.parent.data.selected||w(k)?null:.4.toString()}function d(k,x,v){return k.filter(function(p){return 1===p.depth}).classed(B.cy,!0).attr(B.Ez,"category").attr(B.QZ,3).style("pointer-events","bounding-box").each(function(p){var n=d3.select(this).node();B.O5.setDataForElement(n,{getDisplayName:function(){return x.getLocalizedString("MiniToolbar_Categories",v.majorLabelFullText(p))}})})}function P(k,x){return k.classed(B.cy,!0).attr(B.Ez,x).attr(B.QZ,1).attr(B.CK,"category-labels"===x?"Visual_CategoryLabels":"Visual_DataPointsLabels").style("pointer-events","bounding-box")}function O(k){return k.classed(B.cy,!1).attr(B.Ez,null).attr(B.QZ,null).attr(B.CK,null).style("pointer-events",null).each(function(){var x=d3.select(this).node();B.O5.setDataForElement(x,void 0)})}},92783:function(be,Z,g){g.d(Z,{Qp:function(){return L},VP:function(){return H},Zb:function(){return ne},md:function(){return D}});var h=g(81337),B=g(64067),V=g(79154),M=g(62458),m=g(38958),w=g(82755),b=g(76045),d=g(69871),P=g(47316),O=g(53197),k=g(90120),x=g(51660),v=g(2241),p=g(14599),c="displayName",y="lineColor",t="combineSeries",a="useHighlightValues",i="trend",s="foregroundDark";function r(I){return{strokeShow:!1,strokeColor:U(I),strokeTransparency:0,strokeWidth:2,strokePattern:P.Dv.dashed,strokeDashArray:P.YU,strokeDashCap:P.xm,strokeAutoScale:!1,combineSeries:!0,useHighlightValues:!0}}var e=(0,V.CH)("trend-line"),S=(0,V.CH)("interactivity-trend-line"),C=(0,V.CH)("trend-line-layer");function D(I,E,u){if(M.fF.assertValue(I,"enumeration"),_.isEmpty(E)){var l=r(u);I.pushInstance({selector:null,properties:(0,h.__assign)((0,h.__assign)({},(0,v.HM)(l,p.vi)),{combineSeries:l.combineSeries}),objectName:i})}else{var T=E[0];I.pushInstance({selector:null,properties:(0,h.__assign)((0,h.__assign)({displayName:T.displayName},(0,v.HM)(T,p.vi,T.combineSeries?T.strokeColor:void 0)),{combineSeries:T.combineSeries,useHighlightValues:T.useHighlightValues}),objectName:i})}}function L(I){return(0,m.c5)(I,"regression.X")}function H(I,E,u,l){return I&&I.matrix?function(u,l,T,R){return function(E,u,l,T){if(E&&E.matrix){var R=E.matrix,A=R.rows&&R.rows.root&&R.rows.root.children;if(!_.isEmpty(A)){for(var z=u.metadata.objects,K=N(E.metadata.objects,z,A[0].children[0].objects,l,T),te=K.trendLineProperties,ee=K.colorHelper,ue=K.defaultColor,pe=u.matrix&&u.matrix.rows&&u.matrix.rows.root.children,me=[],Pe=0;Pe<A.length;Pe++){for(var Te=[],Ve=0,Fe=A[Pe].children;Ve<Fe.length;Ve++){var $e=Fe[Ve],Ue=(0,O.eT)($e.value),He=(0,O.eT)($e.values[0].value);null!=Ue&&null!=He&&Te.push({x:Ue,y:He})}var ct=void 0;if(te.combineSeries)ct=te.strokeColor||U(T);else if(2===u.matrix.rows.levels.length){var at=pe[Pe],ve=ee.getColorForSeriesValue(at.objects,at.childIdentityFields,at.value,s);ct=ve=Q(ve)}else{var xe=(0,w.W7)(z,{objectName:"dataPoint",propertyName:"defaultCategoryColor"});ct=Q(k.v.create(T,{objectName:"dataPoint",propertyName:"fill"},ue||xe).getColorForMeasure(null,"",s))}me.push((0,h.__assign)((0,h.__assign)({},te),{points:Te,strokeColor:ct,y2Axis:l}))}return me}}}(u,l,T,R)}(I,E,u,l):function(u,l,T,R){return function(E,u,l,T){if(E&&E.categorical){var R=E.categorical;if(!_.isEmpty(R.categories)&&!_.isEmpty(R.values)){var A=R.categories[0].values,z=R.values.grouped();if(A&&z){for(var K=N(E.metadata.objects,u.metadata.objects,R.values[0].source.objects,l,T),te=K.trendLineProperties,ee=K.colorHelper,ue=[],pe=0;pe<z.length;pe++){for(var me=z[pe],Pe=[],Ee=0;Ee<A.length;Ee++){var Te=(0,O.eT)(A[Ee]),Ve=me.values[0],$e=(0,O.eT)((te.useHighlightValues&&Ve.highlights?Ve.highlights:Ve.values)[Ee]);null!=Te&&null!=$e&&Pe.push({x:Te,y:$e})}var Ue=void 0;if(te.combineSeries)Ue=te.strokeColor||U(T);else{var He=void 0;if(u.categorical.values.source){var ct=u.categorical.values.grouped();He=ee.getColorForSeriesValue(ct[pe].objects,u.categorical.values.identityFields,me.name,s)}else He=ee.getColorForMeasure(u.categorical.values[pe].source.objects,me.name,s);Ue=He=Q(He)}ue.push((0,h.__assign)((0,h.__assign)({},te),{points:Pe,strokeColor:Ue,y2Axis:l}))}return ue}}}}(u,l,T,R)}(I,E,u,l)}function N(I,E,u,l,T){var R=(0,w.RK)(I,i,{}),A=k.v.create(T),z=r(T),K=(0,h.__assign)((0,h.__assign)({},(0,v.AF)(R,p.vi,z,A.getColorForPropertyName(R,y,s))),{displayName:(0,b.N)(R,c),combineSeries:(0,b.N)(R,t,z.combineSeries),useHighlightValues:(0,b.N)(R,a,z.useHighlightValues)}),te=(0,w.NA)(u,d.zK.lineStyles.strokeColor);te&&(K.strokeColor=te.solid.color);var ee=(0,w.W7)(E,{objectName:"dataPoint",propertyName:"defaultColor"});return l||(ee=ee||(0,w.W7)(E,{objectName:"dataPoint",propertyName:"fill"})),{trendLineProperties:K,colorHelper:A=k.v.create(T,{objectName:"dataPoint",propertyName:"fill"},ee),defaultColor:ee}}function U(I){return k.v.getThemeColor(I,s)}function Q(I){var E=(0,B.WV)(I);return E=(0,B._j)(E,20),(0,B.U8)(E)}function ne(I,E,u,l,T){var R=E.select(C.selector);R.empty()&&(R=E.append("svg").classed(C.class,!0)),R.attrs({height:l.height,width:l.width}),R.selectAll(e.selector).data(I||[]).join(function(A){return A.append("path").classed(e.class,!0)}).attr("d",function(A){var z=u.x.scale,K=A.y2Axis&&u.y2?u.y2.scale:u.y1.scale;return d3.line().x(function(ee){return z(ee.x)}).y(function(ee){return K(ee.y)})(_.filter(A.points,function(ee){return null!=ee.x&&null!=ee.y}))}).styles(function(A){return(0,v.bc)(A)}),T&&R.selectAll(S.selector).data(I||[]).join(function(A){return A.append("path").classed(S.class,!0).classed(x.cy,!0).attr(x.Ez,"lines").attr(x.CK,"Visual_Trend_Line").attr(x.QZ,3).style("stroke-dasharray","none")}).attr("d",function(A){var z=u.x.scale,K=A.y2Axis&&u.y2?u.y2.scale:u.y1.scale;return d3.line().x(function(ee){return z(ee.x)}).y(function(ee){return K(ee.y)})(_.filter(A.points,function(ee){return null!=ee.x&&null!=ee.y}))}).each(function(){var A=this;x.O5.setDataForElement(A,{getRegionOutlines:function(){var K=E.node(),te=K.getBoundingClientRect(),ee=te.left,ue=te.top,pe=K.getBBox(),me=pe.x,Pe=pe.y,Ee=d3.select(A).datum(),Te=u.x.scale,Ve=Ee.y2Axis&&u.y2?u.y2.scale:u.y1.scale,Fe=10*l.scale;return[{id:"Visual_Trend_Line",outline:{type:0,outlines:Ee.points.map(function(He){return{x:(Te(He.x)-me)*l.scale+ee-Fe/2,y:(Ve(He.y)-Pe)*l.scale+ue-Fe/2,width:Fe,height:Fe,type:1}})}}]}})})}},7176:function(be,Z,g){g.d(Z,{PT:function(){return p},nC:function(){return v}});var h=g(81337),B=g(62458),V=g(82755),M=g(76045),m=g(47998),w=g(77558),b=g(47316),d=g(61193),P=g(53197),O=g(90120),k=g(21181),x={DefaultWidth:1,DefaultBarMatchSeriesColor:!1,DefaultTransparency:80,DefaultBandStyle:m.X$.fill,DefaultMarkerShape:d.ZO.longDash,DefaultMarkerSize:5,DefaultLabelBackgroundTransparency:90,DefaultLabelFormat:w.K.absolute,DefaultTooltipFormat:w.K.absolute,MarkerKeyBase:"uncertainty"};function v(y,f,o,t,a,i){var N,s=(0,h.__assign)((0,h.__assign)({},(0,V.RK)(i.staticObjects,"error")),(0,V.RK)(y,"error")),r=O.v.create(f),e=(0,M.N)(s,"barShow",!0),S=(0,M.N)(s,"barMatchSeriesColor",x.DefaultBarMatchSeriesColor),C=(0,M.N)(s,"barWidth",x.DefaultWidth),D=r.getColorForPropertyNameWithDefaultColor(s,"barBorderColor",f.colorPalette.background.value),L=(0,M.N)(s,"barBorderSize",x.DefaultWidth),H=o;S||(H=r.getColorForPropertyNameWithDefaultColor(s,"barColor",f.colorPalette.foregroundNeutralSecondary.value)),i.hideBand||(N={show:(0,M.N)(s,"shadeShow",!1),bandStyle:(0,M.N)(s,"shadeBandStyle",x.DefaultBandStyle),matchSeriesColor:(0,M.N)(s,"shadeMatchSeriesColor",!0),transparency:(0,M.N)(s,"shadeTransparency",x.DefaultTransparency),color:o}).matchSeriesColor||(N.color=r.getColorForPropertyNameWithDefaultColor(s,"shadeColor",f.colorPalette.foregroundNeutralSecondary.value));var U=(0,M.N)(s,"markerShape",e?x.DefaultMarkerShape:void 0),Q=(0,M.N)(s,"markerShow",void 0);"none"===U&&(U=Q?x.DefaultMarkerShape:void 0);var ne={color:e?H:N?.color,key:x.MarkerKeyBase+t,rotation:i.valueAxisHorizontal?90:0,show:!!U&&!1!==Q&&(e||N?.show||Q),shape:U??x.DefaultMarkerShape,showMarkerByDefault:(0,M.N)(s,"showMarkerByDefault",!0),size:(0,M.N)(s,"markerSize",x.DefaultMarkerSize),stroke:{strokeShow:!0,strokeColor:e?D:void 0,strokePattern:b.Dv.solid,strokeWidth:L,strokeTransparency:void 0},lineRadius:e?C/2:void 0},Y={show:(0,M.N)(s,"labelShow"),fontFamily:(0,M.N)(s,"labelFontFamily"),fontSize:(0,M.N)(s,"labelFontSize"),bold:(0,M.N)(s,"labelBold"),italic:(0,M.N)(s,"labelItalic"),underline:(0,M.N)(s,"labelUnderline"),color:(0,M.N)(s,"labelColor"),enableBackground:(0,M.N)(s,"labelBackground"),backgroundColor:(0,M.N)(s,"labelBackgroundColor"),backgroundTransparency:(0,M.N)(s,"labelBackgroundTransparency",x.DefaultLabelBackgroundTransparency),labelDisplayUnits:void 0,labelPosition:void 0},W=(0,M.N)(s,"labelMatchSeriesColor",!1);W&&(Y.color={solid:{color:o}}),(0,k.ww)(Y,a,!1,f,i.isCombo);var I=(0,M.N)(s,"enabled",!1);return{hasUncertainty:I,bar:{show:e,borderColor:D,borderWidth:L,matchSeriesColor:S,color:H,width:C,isHorizontal:i.valueAxisHorizontal},markers:ne,tooltips:{format:(0,M.N)(s,"tooltipFormat",x.DefaultTooltipFormat),show:(0,M.N)(s,"tooltipShow",!0)},labels:(0,h.__assign)((0,h.__assign)({},a),{matchSeriesColor:W,errorFormat:(0,M.N)(s,"labelFormat",x.DefaultLabelFormat)}),renderUncertainty:I&&(e||ne.show||N?.show),band:N,markersFlipped:(0,h.__assign)((0,h.__assign)({},ne),{key:"".concat(ne.key,"-flip"),rotation:i.valueAxisHorizontal?270:180})}}function p(y,f,o,t,a){return function(y,f){if(null!=y){if(y.explicit){var o=y.explicit;return c(o.lowerBound,o.upperBound,o.isRelative?f:0)}if(y.symmetricalExplicit){var t=y.symmetricalExplicit.delta;return c(Math.min(-t,t),Math.max(-t,t),f)}if(y.standardDeviation){var s=y.standardDeviation,r=s.value,e=s.multiplier;return B.fF.assert(function(){return null!=r&&!isNaN(r)&&r>=0},"convertUncertaintyDataPoint - stddev is undefined or negative"),c(-r*e,r*e,f)}if(y.percentage){var S=y.percentage,C=S.lowerBoundDelta,D=S.upperBoundDelta,L=Math.abs(f);return c(f-C*L,f+D*L)}if(y.percentile){var H=y.percentile;return c(H.lowerBound,H.upperBound)}B.fF.assertFail("convertUncertaintyDataPoint - unknown ErrorRange definition supplied; expected at least one property to be populated")}}(y.getErrorValues(f,o,a),t)}function c(y,f,o){var t=o??0,a={},i=(0,P.eT)(y);null!=i&&(a.lower=i+t);var s=(0,P.eT)(f);return null!=s&&(a.upper=s+t),a}},16122:function(be,Z,g){g.d(Z,{f:function(){return P}});var h=g(81337),B=g(62458),V=g(56578),M=g(14599),m=g(21181),w=g(57416),b=g(33024),d=g(61193);function P(O,k){var x=O.uncertainty,v=O.measureSelector,p=O.uncertaintyOptions,n=O.localize;k.addGroup("options",function(o){return o.withDisplayName("Desktop_FileMenu_Options").addSimpleSlice("errorRangeEnabled",new V.bd({descriptor:(0,h.__assign)((0,h.__assign)({},M.Qx.enabled),{selector:v}),value:x.hasUncertainty}).build()).addSimpleSlice("errorRange",new V.LB({descriptor:(0,h.__assign)((0,h.__assign)({},M.Qx.errorRange),{selector:O.dataPointSelector,instanceKind:2}),validators:{field:{kind:1,type:{numeric:!0}}},targetMeasure:O.targetMeasure,value:void 0}).build(),function(t){return t.withSuppressDisplayName(!0)})}).addGroup("bar",function(o){return o.withDisplayName("Visual_Bar").withDisabled(!x.hasUncertainty).addTopLevelToggle("barShow",function(){return new V.bd({descriptor:(0,h.__assign)((0,h.__assign)({},M.Qx.barShow),{selector:v}),value:x.bar.show}).build()}).addSimpleSlice("barMatchSeriesColor",new V.bd({descriptor:(0,h.__assign)((0,h.__assign)({},M.Qx.barMatchSeriesColor),{selector:v}),value:x.bar.matchSeriesColor}).build()).addSimpleSlice("barColor",new V.BT({descriptor:(0,h.__assign)((0,h.__assign)({},M.Qx.barColor),{selector:v}),value:{value:x.bar.color}}).build(),function(t){return t.withDisabled(x.bar.matchSeriesColor)}).addSimpleSlice("barWidth",new V.mu({descriptor:(0,h.__assign)((0,h.__assign)({},M.Qx.barWidth),{selector:v}),value:x.bar.width,options:{minValue:{type:0,value:1},maxValue:{type:1,value:10}}}).build()).addSimpleSlice("barBorderColor",new V.BT({descriptor:(0,h.__assign)((0,h.__assign)({},M.Qx.barBorderColor),{selector:v}),value:{value:x.bar.borderColor}}).build()).addSimpleSlice("barBorderSize",new V.mu({descriptor:(0,h.__assign)((0,h.__assign)({},M.Qx.barBorderSize),{selector:v}),value:x.bar.borderWidth,options:{minValue:{type:0,value:0},maxValue:{type:1,value:2},unitSymbol:b.e_}}).build())}).addGroup("markers",function(o){return o.withDisplayName("Visual_Markers").withDisabled(!x.hasUncertainty).addTopLevelToggle("markerShow",function(){return new V.bd({descriptor:(0,h.__assign)((0,h.__assign)({},M.Qx.markerShow),{selector:v}),value:x.markers.show}).build()}).addSimpleSlice("markerShape",new V.uY({descriptor:(0,h.__assign)((0,h.__assign)({},M.Qx.markerShape),{selector:v}),value:x.markers.shape,filterValues:d.Dt.map(function(t){return t.value})}).build()).addSimpleSlice("markerSize",new V.mu({descriptor:(0,h.__assign)((0,h.__assign)({},M.Qx.markerSize),{selector:v}),value:x.markers.size,options:{minValue:{type:0,value:1},maxValue:{type:1,value:10},unitSymbol:b.e_}}).build())}),p?.hideBand||(B.fF.assertValue(x.band,"getUncertaintyFormattingContainer() - viewModel.band is not defined but is enumerated anyway"),k.addGroup("band",function(o){return o.withDisplayName("Visual_Error_Band").withDisabled(!x.hasUncertainty).addTopLevelToggle("shadeShow",function(){return new V.bd({descriptor:(0,h.__assign)((0,h.__assign)({},M.Qx.shadeShow),{selector:v}),value:x.band.show}).build()}).addSimpleSlice("shadeBandStyle",new V.uY({descriptor:(0,h.__assign)((0,h.__assign)({},M.Qx.shadeBandStyle),{selector:v}),value:x.band.bandStyle}).build()).addSimpleSlice("shadeMatchSeriesColor",new V.bd({descriptor:(0,h.__assign)((0,h.__assign)({},M.Qx.shadeMatchSeriesColor),{selector:v}),value:x.band.matchSeriesColor}).build()).addSimpleSlice("shadeColor",new V.BT({descriptor:(0,h.__assign)((0,h.__assign)({},M.Qx.shadeColor),{selector:v}),value:{value:x.band.color}}).build(),function(t){return t.withDisabled(x.band.matchSeriesColor)}).addSimpleSlice("shadeTransparency",V.JN.getTransparencySliderBuilder({descriptor:(0,h.__assign)((0,h.__assign)({},M.Qx.shadeTransparency),{selector:v}),value:x.band.transparency,localize:n}).build())}));var y=x.labels,f={featureSwitches:{},hostServices:{getLocalizedString:n},options:{dataLabelsSettings:y,show:y.show,fontFamily:!0,fontSize:!0,bold:!0,italic:!0,underline:!0,matchSeriesColor:y.matchSeriesColor,enableBackground:y.enableBackground,backgroundColor:y.backgroundColor,backgroundTransparency:y.backgroundTransparency},omitGroupDisplayNames:!0,cardBuilder:void 0,selector:v,dataLabelsProps:{fontFamily:M.Qx.labelFontFamily,fontSize:M.Qx.labelFontSize,bold:M.Qx.labelBold,italic:M.Qx.labelItalic,underline:M.Qx.labelUnderline,matchSeriesColor:M.Qx.labelMatchSeriesColor,color:M.Qx.labelColor,enableBackground:M.Qx.labelBackground,backgroundColor:M.Qx.labelBackgroundColor,backgroundTransparency:M.Qx.labelBackgroundTransparency}};k.addGroup("labels",function(o){o.withDisplayName("Visual_Error_Labels").withDisabled(!x.hasUncertainty).addTopLevelToggle("labelShow",function(){return new V.bd({descriptor:(0,h.__assign)((0,h.__assign)({},M.Qx.labelShow),{selector:v}),value:y.show}).build()}),(0,w.lJ)(o,f),o.addSimpleSlice("labelFormat",function(){return new V.uY({descriptor:(0,h.__assign)((0,h.__assign)({},M.Qx.labelFormat),{selector:v}),value:y.errorFormat}).build()}),(0,m.td)(o,f,!0)}),k.addGroup("tooltip",function(o){return o.withDisplayName("Tooltip").withDisabled(!x.hasUncertainty).addTopLevelToggle("tooltipShow",function(){return new V.bd({descriptor:(0,h.__assign)((0,h.__assign)({},M.Qx.tooltipShow),{selector:v}),value:x.tooltips.show}).build()}).addSimpleSlice("tooltipFormat",new V.uY({descriptor:(0,h.__assign)((0,h.__assign)({},M.Qx.tooltipFormat),{selector:v}),value:x.tooltips.format}).build())})}},58691:function(be,Z,g){g.d(Z,{B9:function(){return y},DI:function(){return C},E6:function(){return p},EC:function(){return a},FZ:function(){return o},OY:function(){return f},Ok:function(){return n},YU:function(){return v},di:function(){return t},fM:function(){return i},iD:function(){return e},jx:function(){return w},xl:function(){return r}});var h=g(47998),B=g(79154),V=g(34644),M=g(60066),m=g(62458),w=(0,B.CH)("uncertainty"),b=(0,B.CH)("uncertainty-areas"),d=(0,B.CH)("uncertainty-area"),P=(0,B.CH)("uncertainty-lines"),O=(0,B.CH)("uncertainty-line"),k=(0,B.CH)("uncertainty-bars"),x=(0,B.CH)("uncertainty-bar"),v=(0,B.CH)("uncertainty-markers"),p=(0,B.CH)("uncertainty-marker"),n=(0,B.CH)("uncertainty-defs"),c=(0,B.CH)("uncertainty-marker-active");function y(L){return L.selectAll(w.selector).data([1]).join("g").attr("class",w.class)}function f(L){L.selectAll(w.selector).remove()}function o(L,H,N,U,Q,ne,Y){void 0===ne&&(ne=!1),void 0===Y&&(Y=!1);var W=_.filter(H,function(u){return u.uncertainty.bar.show}),I=function(l){return(0,M.eR)(l.selected,l.highlight,Y,ne)},E=L.selectAll(k.selector).data(W,function(u){return u.identity.getKey()}).join("g").attr("class",k.class).style("fill",function(u){return u.uncertainty.bar.color}).style("stroke",function(u){return u.uncertainty.bar.borderColor}).style("stroke-width",function(u){return u.uncertainty.bar.borderWidth}).order();return E.each(function(u){if(null!=u&&!_.isEmpty(u.data)){var l=_.filter(u.data,function(T){var R,A;return!!T&&(!ne||T.highlight)&&((null===(R=T.uncertainty)||void 0===R?void 0:R.lower)||(null===(A=T.uncertainty)||void 0===A?void 0:A.upper))});d3.select(this).selectAll(x.selector).data(l,function(T){return T.identity.getKey()}).join("path").attr("class",x.class).attr("transform",U).style("fill-opacity",function(T){return Y?I(T):null}).style("stroke-opacity",function(T){return Y?I(T):null}).attr("d",function(T){return d3.symbol().type(function(L,H,N){return{draw:function(Q,ne){var Y,W;if(null!=L.uncertainty){var I=null!=L.uncertainty.upper,E=null!=L.uncertainty.lower;if(I||E){var u=N(L.uncertainty.upper)-N(L.value),l=N(L.uncertainty.lower)-N(L.value),T=.5*(H.width+H.borderWidth),R=!!H.isHorizontal,A=N.range()[0]<N.range()[1];(R&&!A||!R&&A)&&(l=(Y=[u,l])[0],u=Y[1],E=(W=[I,E])[0],I=W[1]),R?(I?(Q.moveTo(u,T),Q.lineTo(u,-T)):(Q.moveTo(0,T),Q.lineTo(0,-T)),E?(Q.lineTo(l,-T),Q.lineTo(l,T)):(Q.lineTo(0,-T),Q.lineTo(0,T))):(I?(Q.moveTo(T,u),Q.lineTo(-T,u)):(Q.moveTo(T,0),Q.lineTo(-T,0)),E?(Q.lineTo(-T,l),Q.lineTo(T,l)):(Q.lineTo(-T,0),Q.lineTo(T,0))),Q.closePath()}}}}}(T,u.uncertainty.bar,N(T))).size(Q)()})}}),E}function t(L,H,N,U,Q,ne,Y,W){void 0===Y&&(Y=!1),void 0===W&&(W=!1);var I=_.filter(H,function(l){return l.uncertainty.markers.show}),E=L.selectAll(v.selector).data(I,function(l){return l.identity.getKey()}).join("g").attr("class",v.class).style("stroke-opacity",0).style("stroke-width",2).order();return S(E.selectAll(p.selector).data(function(l){return _.map(["upper","lower"],function(T){return{seriesData:l,type:T}})}).join("path").attr("class",p.class).style("stroke-width","inherit").style("opacity",Y?(0,M.eR)(!1,!0,Y,W):null).attr("d",function(l){return"upper"===l.type&&!Q||"lower"===l.type&&Q?N(l.seriesData.data):U(l.seriesData.data)}),ne),E}function a(L,H,N,U,Q,ne){var Y=_.filter(H,function(W){return W.uncertainty.band.show});L.selectAll(b.selector).data(Y,function(W){return W.identity.getKey()}).join("g").attr("class",b.class).order().each(function(W){if(null!=W&&!_.isEmpty(W.data)){var I=W.uncertainty.band,E=d3.select(this),u=_.filter(W.data,function(A){return!!A}),l=I.bandStyle!==h.X$.line?["0"]:[];E.selectAll(d.selector).data(l,function(A){return A}).join("path").attr("class",d.class).style("fill",I.color).style("fill-opacity",ne(W,I.transparency)).attr("d",Q(u));var T=I.bandStyle!==h.X$.fill?["0"]:[];E.selectAll(P.selector).data(T,function(A){return A}).join("g").attr("class",P.class).style("stroke",I.color).style("stroke-opacity",ne(W,I.transparency)).style("stroke-width",2).selectAll(O.selector).data(["upper","lower"],function(A){return A}).join("path").attr("class",O.class).attr("d",function(A){return"upper"===A?N(u):U(u)})}})}function i(L,H){L.selectAll(b.selector).each(function(N){var U=N.uncertainty.band.transparency,Q=d3.select(this);Q.selectAll(d.selector).style("fill-opacity",H(N,U)),Q.selectAll(P.selector).style("stroke-opacity",H(N,U))}),L.selectAll(k.selector).style("fill-opacity",function(N){return H(N)}).style("stroke-opacity",function(N){return H(N)}),L.selectAll(p.selector).style("opacity",function(N){return H(N.seriesData)})}function r(L,H,N,U,Q,ne,Y){ne?S(L.selectAll(c.selector).data(function(I){return _.map(["upper","lower"],function(E){return{seriesData:{uncertainty:I.uncertainty,identity:I.identity,data:_.filter(I.data,function(u){return u.selected&&u.uncertainty&&(u.highlight||!Y)})},type:E}})}).join("path").attr("class",c.class).style("stroke-width","inherit").attr("d",function(I){return"upper"===I.type&&!U||"lower"===I.type&&U?H(I.seriesData.data):N(I.seriesData.data)}),Q):L.selectAll(c.selector).remove()}function e(L,H){for(var N=0,U=L;N<U.length;N++){var Q=U[N];H.push(Q.uncertainty.markers),Q.uncertainty.markersFlipped&&H.push(Q.uncertainty.markersFlipped)}}function S(L,H){function N(U){var Q=U.seriesData.uncertainty.markers;switch(U.type){case"upper":return H.getMarkerKey(Q);case"lower":return H.getMarkerKey(U.seriesData.uncertainty.markersFlipped||Q);default:m.fF.assertNever(U.type)}}L.attr("marker-start",N).attr("marker-mid",N).attr("marker-end",N)}function C(L){(0,V.LL)(L,[b,k,v])}},44196:function(be,Z,g){g.d(Z,{$w:function(){return m},O2:function(){return d},Ww:function(){return b},kS:function(){return w}});var h=g(62458),B=g(72489),V=g(77558),M=g(61193);function m(P,O,k,x,v,p){if(null!=O&&null!=P&&null!=v&&k.tooltips.show){var n=null!=P.lower,c=null!=P.upper,y=w(P,O,k,x,v,p);h.fF.assert(function(){return k.tooltips.format===V.K.range?1===y.length:n&&c?2===y.length:n||c?1===y.length:0===y.length},"setUncertaintyTooltipItems - wrong number of tooltip items added"),k.tooltips.format===V.K.range?P.rangeTooltip=y.shift():(n&&(P.lowerTooltip=y.shift()),c&&(P.upperTooltip=y.shift()))}}function w(P,O,k,x,v,p){if(void 0===p&&(p={}),null!=O&&null!=P&&null!=v&&k.tooltips.show){var n=k.tooltips.format,c=b(O,P,n),y=c.lower,f=c.upper,o=p.hideMarker,t=p.overrideDisplayName,a=function(C){return n===V.K.relativePercentage?d(C,v):x(C)},i=[];switch(n){case V.K.range:var s=a(O),r=null!=y?a(y):"",e=null!=f?a(f):"";i.push({displayName:t||v.getLocalizedString("Value"),value:v.getLocalizedString("Visual_Error_Tooltip_Range",s,r,e)});break;case V.K.absolute:case V.K.relativeNumeric:case V.K.relativePercentage:null!=y&&i.push({displayName:t||v.getLocalizedString("Visual_Error_Tooltip_Lower"),value:a(y),marker:o?void 0:{show:!0,shape:M.ZO.lowerErrorBar,color:k.bar.color}}),null!=f&&i.push({displayName:t||v.getLocalizedString("Visual_Error_Tooltip_Upper"),value:a(f),marker:o?void 0:{show:!0,shape:M.ZO.upperErrorBar,color:k.bar.color}});break;default:h.fF.assertNever(n)}return i}}function b(P,O,k){var x=O.lower,v=O.upper;switch(k){case V.K.relativeNumeric:null!=x&&(x-=P),null!=v&&(v-=P);break;case V.K.relativePercentage:null!=x&&(x=(x-P)/P),null!=v&&(v=(v-P)/P);break;case V.K.absolute:case V.K.range:break;default:h.fF.assertNever(k)}return{lower:x,upper:v}}function d(P,O){return P===-1/0||P===1/0?O.getLocalizedString("ManageDatasets_NextRefresh_NA"):(0,B.WU)(P,O.getLocalizedString("Percentage"))}},30053:function(be,Z,g){g.d(Z,{a:function(){return V}});var h=g(39681),B=g(82755),V=function(){function M(){}return M.getResponsiveVisualProperties=function(m,w){var b={responsive:!1,responsiveLegacy:!1};if(!m||!m.metadata)return b;var d=m.metadata.objects;return d&&(b.responsive=(0,B.NA)(d,w.general.responsive,b.responsive),w.general.responsiveLegacy&&(b.responsiveLegacy=(0,B.NA)(d,w.general.responsiveLegacy,b.responsiveLegacy))),b},M.cloneData=function(m){var w=_.cloneDeep(m);return(0,h.Zx)(m,w),w},M.shouldApplyResponsiveChanges=function(m,w){return M.getResponsiveVisualProperties(m,w).responsive},M}()},45545:function(be,Z,g){g.d(Z,{Re:function(){return k},_W:function(){return O},q5:function(){return x},x6:function(){return b}});var h=g(81337),B=g(64067),V=g(56578),M=g(22733),m=g(48966);function b(){return 50}function O(v,p){var n=M.p.plotArea;return new V.CQ(new V.lg("plotBackground"),"Visual_Plot_Background",[n.image,n.transparency],p).addGroup(void 0,function(c){var y;return c.addSimpleSlice("image",new V.bD({descriptor:n.image,value:v&&v.image}).build()).addSimpleSlice("transparency",V.JN.getTransparencySliderBuilder({descriptor:n.transparency,value:null!==(y=v?.transparency)&&void 0!==y?y:50,localize:p}).build(),function(f){var o,t;return f.withDisabled(!(v&&v.image&&(null!==(o=v.image)&&void 0!==o&&o.name||null!==(t=v.image)&&void 0!==t&&t.url)))})}).build()}function k(v,p,n){var c,y=null===(c=v?.image)||void 0===c?void 0:c.url;if(y){var o,f=p.children(".background-image");switch(0===f.length&&(p.prepend('<div class="background-image"></div>'),(f=p.children(".background-image")).css("position","absolute")),v.image.scaling){case m.C.normal:o={"background-size":"","background-position":"50% 50%"};break;case m.C.fit:o={"background-size":"100% 100%","background-position":""};break;case m.C.fill:o={"background-size":"100%","background-position":"50% 50%"};break;default:o={"background-size":"","background-position":"50% 50%"}}f.css((0,h.__assign)((0,h.__assign)({},o),{width:n.width,height:n.height,"margin-left":n.left,"margin-top":n.top,"background-image":"url(".concat(y,")"),"background-repeat":"no-repeat",opacity:(0,B.TD)(v.transparency)}))}else x(p)}function x(v){v?.children(".background-image").remove()}},70450:function(be,Z,g){g.d(Z,{x:function(){return w}});var h=g(79154),B=g(62458),V=g(10389),M=function(b){return b[b.None=0]="None",b[b.DraggingThumb=1]="DraggingThumb",b[b.BackgroundClicked=2]="BackgroundClicked",b[b.InitialPagingDelay=3]="InitialPagingDelay",b[b.Paging=4]="Paging",b}({}),m=function(b){return b[b.none=0]="none",b[b.active=1]="active",b}({}),w=function(){function b(d){this.brushType=m.none,this.scrollingMode=M.None,this.brushWidth=d.scrollbarWidth,this.brushContextAdditionalClass=d.scrollbarClass,this.onExtentUpdate=d.onExtentUpdate,this.updateBrushRadius(d.scrollbarRadius)}return b.prototype.updateBrushRadius=function(d){B.fF.assertAnyValue(d,"radius can be null"),this.brushRadius=d??b.defaultBrushRadius},b.prototype.updateScrollbarOptions=function(d){this.brushWidth=d.scrollbarWidth,this.updateBrushRadius(d.scrollbarRadius);var P=d.scrollbarClass,O=this.brushContextAdditionalClass;this.brushContextAdditionalClass=P,this.brushGraphicsContext&&O!==P&&this.brushGraphicsContext.classed(O,!1).classed(P,!!P)},b.prototype.init=function(d){this.element=d},b.prototype.remove=function(){this.isInitialized=!1,this.element.selectAll(b.Brush.selector).remove(),this.brush&&(this.brush.on(b.events.start,null).on(b.events.brush,null).on(b.events.end,null),this.brush=void 0,this.brushType=m.none),this.brushGraphicsContext=void 0,this.clearRenderingTimeout()},b.prototype.getExtent=function(){return this.extent?{start:this.extent[0],end:this.extent[1]}:{start:0,end:0}},b.prototype.setExtent=function(d){var O,k,x,P=this;if(B.fF.assert(function(){return null!=d.start||null!=d.end},"At least the start or end value for the extent must be given."),null==d.start||null==d.end?(x=this.getExtentLength(),null==d.start?d.start=d.end-x:d.end=d.start+x):x=d.end-d.start,x>this.scrollBarLength)B.fF.assert(function(){return P.scrollBarLength>=x},"extentLength should not be greater than scrollBarLength.");else{var v=this.getExtent().start;d=b.clampExtent(d,this.scrollBarLength,x),this.scrollingMode!==M.None&&(this.offset=d.start-v,this.previousBrushExtent=d),this.extent=[d.start,d.end],this.brushType===m.active&&null!==(k=null===(O=this.brushGraphicsContext)||void 0===O?void 0:O.node().__brush)&&void 0!==k&&k.selection&&(this.brushGraphicsContext.node().__brush.selection=this.isHorizontal?[[d.start,0],[d.end,this.brushWidth]]:[[0,d.start],[this.brushWidth,d.end]])}},b.prototype.getExtentLength=function(){var d=this.getExtent();return d.end-d.start},b.prototype.setExtentLength=function(d){B.fF.assert(function(){return d>=0},"extentLength must be 0 or greater");var P=this.getExtent();P.end=P.start+d,this.setExtent(P)},b.prototype.setScale=function(d,P){if(this.brushType=P?m.none:m.active,this.brushType===m.active){var O=d.range();this.isHorizontal?(this.brush=d3.brushX(),this.brush.extent([[O[0],0],[O[1],this.brushWidth]])):(this.brush=d3.brushY(),this.brush.extent([[0,O[0]],[this.brushWidth,O[1]]]))}},b.prototype.setOrientation=function(d){this.isHorizontal=d},b.prototype.render=function(d,P,O,k,x){var v=this;this.brushGraphicsContext||(this.brushGraphicsContext=this.element.append("g").classed(b.Brush.class,!0).classed(this.brushContextAdditionalClass,!!this.brushContextAdditionalClass)),this.onRefreshVisualCallback=O;var p=this.brushGraphicsContext.attrs({transform:(0,V.Iu)(d,P),"drag-resize-disabled":"true"});this.brushType!==m.none&&(p=p.call(this.brush)),this.brushType===m.active&&!this.isInitialized&&(this.isInitialized=!0,this.brushGraphicsContext.call(this.brush.move,this.extent)),this.brushType!==m.none&&this.brush.on("start",function(){v.previousBrushExtent=v.getExtent(),v.extent=d3.event.selection,v.handleDrag()}).on("brush",function(){v.extent=d3.event.selection,k&&x?.onVisualScroll(),v.handleDrag()}).on("end",function(){v.setExtent(v.previousBrushExtent),v.refreshExtent(),v.previousBrushExtent=null,v.startBrushExtent=null,v.pointerPosition=null,v.scrollingMode=M.None,v.offset=null,null!=v.timeoutId&&(window.clearTimeout(v.timeoutId),v.timeoutId=null)}),p.selectAll(".handle").remove();var n={rx:this.brushRadius,ry:this.brushRadius};this.isHorizontal?n.height=this.brushWidth:n.width=this.brushWidth,p.selectAll("rect").attrs(n)},b.prototype.handleDrag=function(){var d=this.previousBrushExtent?this.previousBrushExtent.end-this.previousBrushExtent.start:0,P=this.getExtent(),O=!1;this.scrollingMode===M.None&&(P.start<0&&0===P.end?P.start=0:P.start===this.scrollBarLength&&P.end>this.scrollBarLength&&(P.end=this.scrollBarLength),this.scrollingMode=b.isBackgroundClickExtent(P)?M.BackgroundClicked:M.DraggingThumb,this.startBrushExtent=P),null!=this.offset&&(P.start+=this.offset,P.end+=this.offset);var k=this.getExtentLength();switch(P=b.clampExtent(P,this.scrollBarLength,k),this.pointerPosition=this.getPointerPosition(),this.scrollingMode){case M.DraggingThumb:d>0&&d!==P.end-P.start&&(P.end=P.start+d),O=!0;break;case M.BackgroundClicked:if(b.CenterOnBackgroundClick){var v=k/2;P.start=this.pointerPosition-v,P.end=this.pointerPosition+v}else{var x=P.start>this.previousBrushExtent.start;P=b.stepExtent(this.previousBrushExtent,x),this.scrollingMode=M.InitialPagingDelay,this.setStepTimeout(x,P)}O=!0;break;case M.InitialPagingDelay:case M.Paging:P=this.previousBrushExtent}this.onExtentUpdate?this.onExtentUpdate(P):(O&&this.refreshVisual(),this.setExtent(P),this.refreshExtent(),this.previousBrushExtent=P)},b.prototype.shouldContinueStepping=function(d,P){return 0!==P.start&&P.end!==d&&!(this.pointerPosition>=P.start&&this.pointerPosition<=P.end)},b.prototype.getPointerPosition=function(){var d=this.getExtent();return b.isBackgroundClickExtent(this.startBrushExtent)?d.start<this.startBrushExtent.start?d.start:d.end:(d.end-d.start)/2},b.prototype.refreshExtent=function(){var d=this.getExtent(),P=this.getExtentLength();this.brushGraphicsContext.select(".selection").attrs(this.isHorizontal?{width:P,x:d.start}:{height:P,y:d.start})},b.prototype.refreshVisual=function(){var d=this;this.onRefreshVisualCallback&&(this.clearRenderingTimeout(),this.renderTimeoutHandle=window.requestAnimationFrame(function(){d.renderTimeoutHandle=void 0,d.onRefreshVisualCallback()}))},b.prototype.clearRenderingTimeout=function(){this.renderTimeoutHandle&&(window.cancelAnimationFrame(this.renderTimeoutHandle),this.renderTimeoutHandle=void 0),null!=this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)},b.prototype.refreshExtentAndVisual=function(){this.refreshExtent(),this.refreshVisual()},b.prototype.setStepTimeout=function(d,P){var O=this;this.shouldContinueStepping(this.scrollBarLength,P)&&(this.timeoutId=_.delay(function(){O.onPagingTimeoutExpired(d)},this.scrollingMode===M.InitialPagingDelay?b.InitialPagingDelayMS:b.PagingDelayMS))},b.isBackgroundClickExtent=function(d){return d.start===d.end},b.stepExtent=function(d,P){var O=d.end-d.start;return d.start=P?d.start+O:d.start-O,d.end=P?d.end+O:d.end-O,d},b.prototype.onPagingTimeoutExpired=function(d){this.scrollingMode!==M.Paging&&(this.scrollingMode=M.Paging);var P=this.getExtent(),O=b.stepExtent(P,d);this.setExtent(O),this.refreshExtentAndVisual(),this.previousBrushExtent=P,this.setStepTimeout(d,O)},b.clampExtent=function(d,P,O){return B.fF.assert(function(){return P>=O},"extentLength should not be greater than scrollBarLength"),d.end>P?{start:P-O,end:P}:d.start<0?{start:0,end:O}:d},b.InitialPagingDelayMS=500,b.PagingDelayMS=50,b.defaultBrushRadius=0,b.CenterOnBackgroundClick=!1,b.events={start:"start",brush:"brush",end:"end"},b.Brush=(0,h.CH)("brush"),b}()},68983:function(be,Z,g){g.d(Z,{S:function(){return d}});var h=g(38308),B=g(62458),V=g(45875),b=function(){function P(O){this.$select=O}return P.prototype.execute=function(O){if(this.$select.selectmenu("instance"))return this.$select.selectmenu(O)},P}(),d=function(){function P(O){this.isOpened=!1,B.fF.assertValue(O.container,"container"),this.settings=O,this.init(),this.applyStyles(),this.setValue(this.settings.selectedValue)}return P.prototype.destroy=function(){this.selectMenu.execute("destroy")},P.prototype.update=function(O){_.extend(this.settings,O),P.populateOptions(this.$select,this.settings.options),null!=this.settings.selectedValue&&this.setValue(this.settings.selectedValue),this.refresh(),this.applyStyles(),this.applyState()},P.prototype.disableOption=function(O){for(var k=this.$select.find("option"),x=0;x<k.length;x++){var v=k[x];v.getAttribute("value")===O&&v.setAttribute("disabled","true")}this.refresh()},P.prototype.enableOption=function(O){for(var k=this.$select.find("option"),x=0;x<k.length;x++){var v=k[x];v.getAttribute("value")===O&&v.setAttribute("disabled","false")}this.refresh()},P.prototype.close=function(){this.selectMenu.execute("close")},P.prototype.setValue=function(O){this.$select.val(O)},P.prototype.init=function(){var k,x,O=this;this.$select=(0,h.Ys)(),this.$select.attr("drag-resize-disabled","true").appendTo(this.settings.container),P.populateOptions(this.$select,this.settings.options),this.$select.selectmenu({open:function(){O.isOpened=!0,V.Ck.fixWidgetPosition(O.menuWidget,O.widget,{left:-0,top:0},!0)},select:function(p){p.stopPropagation()},width:"auto",close:function(p){O.isOpened=!1,27===p.keyCode&&(p.stopPropagation(),p.preventDefault())}}),this.selectMenu=new b(this.$select),this.settings.onChange&&this.$select.on("selectmenuchange",function(v,p){O.settings.onChange(p.item.value)}),this.applyState(),this.widget=this.selectMenu.execute("widget"),this.settings.title&&this.widget.attr("aria-label",this.settings.title),this.widget.attr("role","combobox").removeAttr("aria-autocomplete"),this.widget.on("keydown",function(v){(40===v.keyCode||38===v.keyCode||37===v.keyCode||39===v.keyCode)&&(O.isOpened||O.selectMenu.execute("open"),v.stopPropagation()),v.preventDefault()}),this.menuWidget=null===(k=this.selectMenu.execute("menuWidget"))||void 0===k?void 0:k.parent(),null===(x=this.menuWidget)||void 0===x||x.addClass(this.settings.className+" themeableElement highContrastBorder")},P.prototype.applyState=function(){this.selectMenu.execute(this.settings.disabled?"disable":"enable")},P.prototype.applyStyles=function(){this.settings.css&&this.widget.css(this.settings.css)},P.prototype.refresh=function(){this.selectMenu.execute("refresh"),this.updateAria()},P.prototype.updateAria=function(){var O=this;setTimeout(function(){if(O.settings.title)O.widget.removeAttr("aria-labelledby");else{var k=O.widget.attr("id"),x=O.widget.attr("aria-labelledby").replace(k,"").trim();O.widget.attr("aria-labelledby",x+" "+k)}var v=O.widget.attr("aria-owns");null!=v&&(O.widget.attr("aria-controls",v),O.widget.removeAttr("aria-owns")),O.widget.attr("aria-haspopup")&&O.widget.attr("aria-haspopup","listbox"),O.widget.removeAttr("title"),O.widget.find(".ui-selectmenu-icon").attr("aria-hidden","true"),O.updateMenuItemAria()})},P.prototype.updateMenuItemAria=function(){var O=this;this.menuWidget.find(".ui-menu-item").each(function(x,v){var p=$(v);p.attr("role","none");var n=p.find(".ui-menu-item-wrapper");p.hasClass("ui-state-disabled")&&(n.attr("aria-disabled","true"),p.removeAttr("aria-disabled"));var c=O.menuWidget.find(".ui-menu").attr("aria-activedescendant");n.attr("aria-selected",function(){return n.attr("id")===c?"true":"false"})})},P.populateOptions=function(O,k){O.find("option").remove();for(var x=0,v=k;x<v.length;x++){var p=v[x];$("<option ></option>").attr("value",p.value).text(p.text).appendTo(O)}},P}()},31198:function(be,Z,g){function B(){return{scrolling:{enabled:!0},selection:{enabled:!0},sorting:{enabled:!0,showActiveSortIcon:!0},columnResizing:{enabled:!0},interactivityIndicatorEnabled:!0,tooltipsEnabled:!0,expandCollapse:{buttonsOption:"interactive"},showAsTableNativeMenuEnabled:!1}}g.d(Z,{DH:function(){return B}})},35249:function(be,Z,g){function B(){return{scrolling:{enabled:!0},selection:{enabled:!0},sorting:{enabled:!0,showActiveSortIcon:!0},columnResizing:{enabled:!0},interactivityIndicatorEnabled:!0,tooltipsEnabled:!0}}g.d(Z,{DH:function(){return B}})},72494:function(be,Z,g){g.d(Z,{Q:function(){return P}});var h=g(62458),B=g(56707),V=g(63972),M=g(86745),P=function(){function k(){}return k.prototype.layout=function(x,v,p,n){var c=_.map(x,function(U){return{labelDataPoint:U}});if(n||void 0===this.labels){for(var y={labelDataPoints:c,maxNumberOfLabels:c.length},f=0,o=c;f<o.length;f++){var t=o[f];t.labelSize={width:(a=t.labelDataPoint).textSize.width+2*B.Bo,height:a.textSize.height+2*B.d1}}for(var i=new V.qC([y],v),s=[],r=[],e=0,S=x;e<S.length;e++){var C=(a=S[e]).parentShape.polygon;r.push(C),C.pixelBoundingRect=p.applyToRect(C.absoluteBoundingRect())}for(var D=new O(r,v),L=0,H=x;L<H.length;L++){var a,N=this.getLabelByPolygonPositions(a=H[L],p,i,D);null!=N&&s.push(N)}this.labels=s}else this.updateLabelOffsets(p);return _.filter(this.labels,function(U){return U.isVisible})},k.prototype.getLabelPolygon=function(x,v,p,n){return this.getLabelBoundingBox({width:x.textSize.width,height:x.textSize.height},v,p,n)},k.prototype.getLabelBoundingBox=function(x,v,p,n){switch(v){case 1:return(0,M.aE)(x,p,n);case 2:return(0,M.B2)(x,p,n);case 4:return(0,M.t$)(x,p,n);case 8:return(0,M.F2)(x,p,n);case 128:return(0,M.Q$)(x,p,n);case 64:return(0,M.kx)(x,p,n);case 32:return(0,M.I6)(x,p,n);case 16:return(0,M.W7)(x,p,n);case 256:return(0,M.be)(x,p);default:h.fF.assertFail("Unsupported label position")}return null},k.prototype.getLabelByPolygonPositions=function(x,v,p,n){for(var c=0,y=v.getInverse(),f=0;f<2;f++){1===f&&(c=5);for(var o=0,t=x.parentShape.validPositions;o<t.length;o++){var i=this.tryPositionForPolygonPosition(a=t[o],x,v,c,y);if((256!==a||0===f)&&i){var s=v.applyToRect(i);return{text:x.text,secondRowText:x.secondRowText,boundingBox:s,isVisible:!0,fontProperties:{color:x.insideFill},identity:null,selected:!1,hasBackground:!0,textAnchor:"middle",originalPixelOffset:c,isPlacedInsidePolygon:!0,absoluteBoundingBoxCenter:{x:i.left+i.width/2,y:i.top+i.height/2}}}}}for(var e=6;e<=60;){for(var S=0,C=x.parentShape.validPositions;S<C.length;S++){var a;if(256!==(a=C[S])){var D=x.parentShape.polygon,L=v.applyToPoint(D.absoluteCentroid()),H=this.tryPlaceLabelOutsidePolygon(p,a,x,e,L,n,y);if(H){s=v.applyToRect(H);var r={text:x.text,secondRowText:x.secondRowText,boundingBox:s,isVisible:!0,fontProperties:{color:x.insideFill},identity:null,selected:!1,hasBackground:!0,isPlacedInsidePolygon:!1,textAnchor:"middle",originalPixelOffset:e,originalPosition:a,originalAbsoluteCentroid:D.absoluteCentroid(),absoluteBoundingBoxCenter:{x:H.left+H.width/2,y:H.top+H.height/2}},N=this.calculateStemSource(v,y,D,s,a,L);return r.leaderLinePoints=this.setLeaderLinePoints(N,this.calculateStemDestination(s,a)),r.absoluteStemSource=y.applyToPoint(N),p.add(s),r}}}e+=10}return null},k.prototype.setLeaderLinePoints=function(x,v){return[[x.x,x.y],[v.x,v.y]]},k.prototype.calculateStemSource=function(x,v,p,n,c,y){var f=p.lineIntersectionPoint(p.absoluteCentroid(),v.applyToPoint({x:n.left+n.width/2,y:n.top+n.height/2}));if(null==f)return y;var o=x.applyToPoint(f);switch(c){case 1:o.y+=5;break;case 2:o.y-=5;break;case 4:o.x+=5;break;case 8:o.x-=5;break;case 128:o.x+=5/M.nK,o.y+=5/M.fB;break;case 64:o.x-=5/M.nK,o.y+=5/M.fB;break;case 32:o.x+=5/M.nK,o.y-=5/M.fB;break;case 16:o.x-=5/M.nK,o.y-=5/M.fB;break;case 256:break;default:h.fF.assertFail("Unsupported label position")}return o},k.prototype.calculateStemDestination=function(x,v){var p,n;switch(v){case 1:p=x.left+x.width/2,n=x.top+x.height;break;case 2:p=x.left+x.width/2,n=x.top;break;case 4:p=x.left+x.width,n=x.top+x.height/2;break;case 8:p=x.left,n=x.top+x.height/2;break;case 128:p=x.left+x.width,n=x.top+x.height;break;case 64:p=x.left,n=x.top+x.height;break;case 32:p=x.left+x.width,n=x.top;break;case 16:p=x.left,n=x.top;break;case 256:break;default:h.fF.assertFail("Unsupported label position")}return{x:p,y:n}},k.prototype.tryPositionForPolygonPosition=function(x,v,p,n,c){var y=v.parentShape.polygon,f=p.applyToPoint(y.absoluteCentroid()),o=this.getLabelPolygon(v,x,f,n),t=this.getAbsoluteRectangle(c,o);return y.contains(t)?t:null},k.prototype.tryPlaceLabelOutsidePolygon=function(x,v,p,n,c,y,f){var t=this.getLabelPolygon(p,v,c,n);if(!x.hasConflict(t)){var i=this.getAbsoluteRectangle(f,t);if(!y.hasConflict(i,t))return i}return null},k.prototype.updateLabelOffsets=function(x){for(var v=0,p=this.labels;v<p.length;v++){var n=p[v];if(n.isVisible)if(n.isPlacedInsidePolygon){var c=x.applyToPoint(n.absoluteBoundingBoxCenter),y=n.boundingBox.left+n.boundingBox.width/2-c.x;n.boundingBox.top-=n.boundingBox.top+n.boundingBox.height/2-c.y,n.boundingBox.left-=y}else{var o=x.applyToPoint(n.absoluteStemSource),t=x.applyToPoint(n.originalAbsoluteCentroid);n.boundingBox=this.getLabelBoundingBox({width:n.boundingBox.width,height:n.boundingBox.height},n.originalPosition,t,n.originalPixelOffset),void 0!==n.leaderLinePoints&&(n.leaderLinePoints=this.setLeaderLinePoints(o,this.calculateStemDestination(n.boundingBox,n.originalPosition)))}}},k.prototype.getAbsoluteRectangle=function(x,v){return x.applyToRect(v)},k}(),O=function(){function k(x,v){for(var p=0,n=0,c=0,y=x;c<y.length;c++){var o=y[c].pixelBoundingRect;o.width>p&&(p=o.width),o.height>n&&(n=o.height)}0===p&&(p=v.width),0===n&&(n=v.height);var t=this.cellSize={width:p*k.cellSizeMultiplier,height:n*k.cellSizeMultiplier};this.columnCount=k.getCellCount(t.width,v.width,1,100),this.rowCount=k.getCellCount(t.height,v.height,1,100);for(var a=[],i=0,s=this.columnCount;i<s;i++){a[i]=[];for(var r=0,e=this.rowCount;r<e;r++)a[i][r]=[]}this.grid=a;for(var S=0,C=x;S<C.length;S++)this.add(C[S])}return k.prototype.hasConflict=function(x,v){for(var p=this.getContainingGridSubsection(v),n=this.grid,c=p.xMin;c<p.xMax;c++)for(var y=p.yMin;y<p.yMax;y++)for(var f=0,o=n[c][y];f<o.length;f++)if(o[f].conflicts(x))return!0;return!1},k.prototype.add=function(x){for(var v=this.getContainingGridSubsection(x.pixelBoundingRect),p=v.xMin;p<v.xMax;p++)for(var n=v.yMin;n<v.yMax;n++)this.grid[p][n].push(x)},k.prototype.getContainingGridSubsection=function(x){return{xMin:k.bound(Math.floor(x.left/this.cellSize.width),0,this.columnCount),xMax:k.bound(Math.ceil((x.left+x.width)/this.cellSize.width),0,this.columnCount),yMin:k.bound(Math.floor(x.top/this.cellSize.height),0,this.rowCount),yMax:k.bound(Math.ceil((x.top+x.height)/this.cellSize.height),0,this.rowCount)}},k.getCellCount=function(x,v,p,n){return k.bound(Math.ceil(v/x),p,n)},k.bound=function(x,v,p){return Math.max(Math.min(x,p),v)},k.cellSizeMultiplier=2,k}()},43906:function(be,Z,g){g.d(Z,{F:function(){return B},S:function(){return V}});var h=g(54522);function B(M){return function(m,w,b){return(0,h.xq)(m,w,M,!0,b)}}function V(M){return function(m,w,b){return(0,h.xq)(m,w,M,!1,b)}}},63972:function(be,Z,g){g.d(Z,{qC:function(){return c},nu:function(){return y}});var h=g(81337),B=g(62458),V=g(41640),M=g(80758),m=g(56707),w=g(18664),b=g(20624),d=g(86745);function P(r,e,S){var D=r.labelDataPoint.parentShape;if(null!=D)switch(e){case 1:case 32:switch(D.orientation){case 1:case 2:return(0,d.Vq)(r.labelSize,D.rect,S);case 3:case 4:return(0,d.um)(r.labelSize,D.rect,S)}case 2:case 64:switch(D.orientation){case 1:return(0,d.jb)(r.labelSize,D.rect,S);case 2:return(0,d.ug)(r.labelSize,D.rect,S);case 3:return(0,d.e6)(r.labelSize,D.rect,S);case 4:return(0,d.QS)(r.labelSize,D.rect,S)}case 4:case 128:switch(D.orientation){case 1:return(0,d.ug)(r.labelSize,D.rect,S);case 2:return(0,d.jb)(r.labelSize,D.rect,S);case 3:return(0,d.QS)(r.labelSize,D.rect,S);case 4:return(0,d.e6)(r.labelSize,D.rect,S)}case 8:switch(D.orientation){case 1:return(0,d.O5)(r.labelSize,D.rect,S);case 2:return(0,d.ZN)(r.labelSize,D.rect,S);case 3:return(0,d._f)(r.labelSize,D.rect,S);case 4:return(0,d.cx)(r.labelSize,D.rect,S)}case 16:switch(D.orientation){case 1:return(0,d.ZN)(r.labelSize,D.rect,S);case 2:return(0,d.O5)(r.labelSize,D.rect,S);case 3:return(0,d.cx)(r.labelSize,D.rect,S);case 4:return(0,d._f)(r.labelSize,D.rect,S)}default:B.fF.assertFail("Unsupported label position")}return null}var k=g(54086),x=g(46769),v=g(19744),p=g(45028),n=g(43479),c=function(){function r(e,S){this.viewport=S;for(var C=0,D=0,L=0,H=e;L<H.length;L++)for(var U=0,Q=H[L].labelDataPoints;U<Q.length;U++){var Y=Q[U].labelSize;Y.width>C&&(C=Y.width),Y.height>D&&(D=Y.height)}0===C&&(C=S.width),0===D&&(D=S.height);var W=this.cellSize={width:C*r.cellSizeMultiplier,height:D*r.cellSizeMultiplier};this.columnCount=r.getCellCount(W.width,S.width,1,100),this.rowCount=r.getCellCount(W.height,S.height,1,100);for(var I=[],E=0,u=this.columnCount;E<u;E++){I[E]=[];for(var l=0,T=this.rowCount;l<T;l++)I[E][l]=[]}this.grid=I}return r.prototype.add=function(e){var S=this;B.fF.assert(function(){return(0,V.bA)(e.left,0)&&(0,V.bl)(e.left+e.width,S.viewport.width)&&(0,V.bA)(e.top,0)&&(0,V.bl)(e.top+e.height,S.viewport.height)},"LabelArrangeGrid.add received a rectangle outside the grid");for(var C=this.getContainingGridSubsection(e),D=C.xMin;D<C.xMax;D++)for(var L=C.yMin;L<C.yMax;L++)this.grid[D][L].push(e)},r.prototype.addCheckSeries=function(e){for(var S=this.getContainingGridSubsection(e),C=S.xMin;C<S.xMax;C++)for(var D=S.yMin;D<S.yMax;D++)this.grid[C][D].push(e)},r.prototype.hasConflict=function(e){return!this.isWithinGridViewport(e)||this.hasCollision(e)},r.prototype.tryPositionInViewport=function(e){if(this.isCloseToGridViewport(e)&&(this.isWithinGridViewport(e)||(e=this.tryMoveInsideViewport(e)),e&&!this.hasCollision(e)))return e},r.prototype.trySeriesLabelPositionInViewport=function(e){if(this.isCloseToGridViewport(e)&&(this.isWithinGridViewport(e)||(e=this.trySeriesLabelMoveInsideViewport(e)),e&&!this.hasCollision(e)))return e},r.prototype.hasCollision=function(e){for(var S=this.getContainingGridSubsection(e),C=this.grid,D=M.HL,L=S.xMin;L<S.xMax;L++)for(var H=S.yMin;H<S.yMax;H++)for(var N=0,U=C[L][H];N<U.length;N++)if(D(U[N],e))return!0;return!1},r.prototype.isWithinGridViewport=function(e){return e.left>=0&&e.top>=0&&e.left+e.width<=this.viewport.width&&e.top+e.height<=this.viewport.height},r.prototype.isCloseToGridViewport=function(e){return e.left+e.width>=0-e.width&&e.top+e.height>=-e.height&&e.left<=this.viewport.width+e.width&&e.top<=this.viewport.height+e.height},r.prototype.tryMoveInsideViewport=function(e){var S=(0,M.d9)(e),C=this.viewport;if(!(e.width>C.width||e.height>C.height))return e.left<0?S.left=0:e.left+e.width>C.width&&(S.left-=e.left+e.width-C.width),e.top<0?S.top=0:e.top+e.height>C.height&&(S.top-=e.top+e.height-C.height),S},r.prototype.trySeriesLabelMoveInsideViewport=function(e){var S=(0,M.d9)(e),C=this.viewport;if(!(e.height>C.height))return e.left<0&&(S.left=0),e.top<0?S.top=0:e.top+e.height>C.height&&(S.top-=e.top+e.height-C.height),S},r.prototype.getContainingGridSubsection=function(e){return{xMin:r.bound(Math.floor(e.left/this.cellSize.width),0,this.columnCount),xMax:r.bound(Math.ceil((e.left+e.width)/this.cellSize.width),0,this.columnCount),yMin:r.bound(Math.floor(e.top/this.cellSize.height),0,this.rowCount),yMax:r.bound(Math.ceil((e.top+e.height)/this.cellSize.height),0,this.rowCount)}},r.getCellCount=function(e,S,C,D){return r.bound(Math.ceil(S/e),C,D)},r.bound=function(e,S,C){return Math.max(Math.min(e,C),S)},r.cellSizeMultiplier=2,r}(),y=function(){function r(e){this.startingOffset=e.startingOffset,this.maximumOffset=e.maximumOffset,null!=e.offsetIterationDelta?(B.fF.assert(function(){return e.offsetIterationDelta>0},"label offset delta must be greater than 0"),this.offsetIterationDelta=e.offsetIterationDelta):this.offsetIterationDelta=r.defaultOffsetIterationDelta,this.horizontalPadding=null!=e.horizontalPadding?e.horizontalPadding:r.defaultHorizontalPadding,this.verticalPadding=null!=e.verticalPadding?e.verticalPadding:r.defaultVerticalPadding,this.shrinkLeaderLinesForBestFit=!!e.shrinkLeaderLinesForBestFit,this.drawLeaderLinesIgnoreOffset=!!e.drawLeaderLinesIgnoreOffset,this.allowLeaderLines=!!e.allowLeaderLines,this.attemptToMoveLabelsIntoViewport=!!e.attemptToMoveLabelsIntoViewport}return r.prototype.computeLabelSize=function(e,S){var C,D=function(u){var l={width:0,height:0},T=u.textSize,R=T.width,A=T.height;return S===b.B.Vertical?(l.width=A,l.height=R):(l.width=R,l.height=A),e.wordBreak&&(l.height+=u.fontProperties.size.px),l},L={width:0,height:0};if((0,v.r)(e))for(var H=e.labelDataPointContents.length,N=0;N<H;N++){var Q=e.contentLayout,ne=(C=D(e.labelDataPointContents[N])).width,Y=C.height,W=S===b.B.Vertical;if("MultiLine"===Q)if(W){var I=0!==N?m.i1:0;L.width=Math.max(L.width,Y),L.height+=ne+I}else I=0!==N?m.i1:0,L.width=Math.max(L.width,ne),L.height+=Y+I;else"SingleLine"===Q&&(W?(I=0!==N?m.uM:0,L.width=Math.max(L.width,ne),L.height+=Y+I):(L.width+=ne+(I=0!==N?m.uM:0),L.height=Math.max(L.height,Y)))}else L=D(e);return e.hasBackground?S===b.B.Vertical?{width:L.width+2*m.d1,height:L.height+2*m.Bo}:{width:L.width+2*m.Bo,height:L.height+2*m.d1}:L},r.prototype.layout=function(e,S){for(var D=[],L=0,H=e;L<H.length;L++){for(var N=H[L],U=_.map(N.labelDataPoints,function(me){return{labelDataPoint:me}}),Q=N.labelOrientation,ne=0,Y=U;ne<Y.length;ne++){var W=Y[ne];W.hasBeenRendered=!1,W.labelSize=this.computeLabelSize(W.labelDataPoint,Q)}D.push({labelDataPoints:U,maxNumberOfLabels:N.maxNumberOfLabels,labelOrientation:N.labelOrientation,offset:N.offset})}for(var I=[],E=new c(D,S),u=D.length>1,l=0,T=D;l<T.length;l++){for(var R=T[l],A=R.maxNumberOfLabels,z=(U=_.clone(R.labelDataPoints),[]),K=(Q=R.labelOrientation,U.length-1),te=A;K>=0&&te>0;K--)U[K].labelDataPoint.isPreferred&&(z.unshift(U.splice(K,1)[0]),te--);if(z.length>0&&(A-=(ue=this.positionDataLabels(z,S,E,A,Q,u,R.offset)).length,I=I.concat(ue)),U.length>0){var ue=this.positionDataLabels(U,S,E,A,Q,u,R.offset);I=I.concat(ue)}}return this.filterLabelInstancesByVisibility(I)},r.prototype.filterLabelInstancesByVisibility=function(e){return _.filter(e,function(C){return(0,x.CC)(D=C)?D.labelContents.some(function(L){return L.isVisible}):D.isVisible;var D})},r.prototype.drawLeaderLinesOnIteration=function(e,S){var C;if(!this.allowLeaderLines)return!1;var D=S.labelDataPoint;return!((0,v.r)(D)?D.labelDataPointContents.every(function(H){return _.isEmpty(H.text)}):_.isEmpty(D.text))&&(!(!this.drawLeaderLinesIgnoreOffset||null===(C=D.leaderLine)||void 0===C||!C.strokeShow)||e>this.startingOffset)},r.prototype.determineMaximumOffset=function(e,S){var C,D=null!==(C=S?.max)&&void 0!==C?C:this.maximumOffset;return e>=D?e:D},r.prototype.positionDataLabels=function(e,S,C,D,L,H,N){for(var U,Q=[],ne=this.offsetIterationDelta,Y=0,W=0,I=null!==(U=N?.min)&&void 0!==U?U:this.startingOffset,E=this.determineMaximumOffset(I,N),u=I;u<=E&&W<D;){for(var l=0,T=e;l<T.length;l++){var R=T[l];if(!R.hasBeenRendered){var z=void 0;if(1===R.labelDataPoint.parentType)z=this.tryPositionForRectPositions(R,C,u,Y,L,H);else{var K=this.drawLeaderLinesOnIteration(u,R);z=this.tryPositionForPointPositions(R,C,u,K,L)}if(z&&(Q.push(z),W++),!(W<D))break}}u+=ne,Y+=ne}return Q},r.prototype.tryPositionForRectPositions=function(e,S,C,D,L,H){var N=this,U=e.labelDataPoint,Y=function(T,R,A){void 0===A&&(A=0),function(T){var R,A,z,K;if(T>0&&(0,v.r)(U)){var te=L===b.B.Vertical?null!==(A=null===(R=e.labelSize)||void 0===R?void 0:R.height)&&void 0!==A?A:0:null!==(K=null===(z=e.labelSize)||void 0===z?void 0:z.width)&&void 0!==K?K:0;(0,p._u)(U.labelDataPointContents,te*(1-T),"SingleLine"===U.contentLayout?n.v.SingleLine:n.v.MultiLine),e.labelSize=N.computeLabelSize(U,L)}}(A);var z=r.tryPositionRect(S,T,e,C,D,R);return z&&function(T,R){var z=!!(224&T);return!(7&T&&!function(r,e,S,C){var D=e.parentShape.rect,L=(0,M.rr)(r,{left:S,right:S,top:C,bottom:C});return(0,M.BD)(D,{x:L.left,y:L.top})&&(0,M.BD)(D,{x:L.left+L.width,y:L.top+L.height})}(R,U,N.horizontalPadding,N.verticalPadding)||z&&!function(r,e,S){var C=e.parentShape.rect;if(!(0,M.HL)(r,C))return!1;var D=(0,M.wf)(r,C),L=f,H=(0,V.GG)(D.top,r.top,L)&&(0,V.GG)(D.height,r.height,L),N=(0,V.GG)(D.left,r.left,L)&&(0,V.GG)(D.width,r.width,L),U=_.includes([1,2],e.parentShape.orientation);if(!N&&!H||S&&(U&&!H||!U&&!N))return!1;if(N&&H)return!0;var Q=function(r,e){var S=e.width*e.height,C=r.width*r.height,D=Math.max(S,C);if(0===D)return 0;var L=Math.min(S,C),H=0!==L?L:D,N=(0,M.wf)(e,r);return N.width*N.height/H}(r,C)>=o,ne=!1;return H?ne=0===C.width||C.width/r.width>k.w:N&&(ne=0===C.height||C.height/r.height>k.w),Q&&ne}(R,U,H))}(T,z)?(S.add(z),e.hasBeenRendered=!0,N.createLabelInstanceForRectPosition(U,L,z,T)):null},W=U.parentShape.validPositions,I=function l(T,R,A){void 0===R&&(R=!1),void 0===A&&(A=0);for(var te=R?.03*(A+1):0,ee=0,ue=W;ee<ue.length;ee++){var me=Y(ue[ee],T,te);if(me)return me}return!R||A>=1/.03?null:l(T,R,A+1)},E=I(!1);if(E)return E;if(this.attemptToMoveLabelsIntoViewport){var u=I(!0);if(u)return u}},r.prototype.createLabelInstanceForRectPosition=function(e,S,C,D){var L=!!(231&D),H={boundingBox:C,tooltip:e.tooltip,isVisible:!0,identity:e.identity,key:e.key,hasBackground:e.hasBackground,labelOrientation:S,backgroundColor:e.backgroundColor,backgroundTransparency:e.backgroundTransparency};if((0,v.r)(e)){var U=e.labelDataPointContents.map(function(ne){return{text:ne.text,role:ne.role,transparency:ne.transparency,fontProperties:(0,w.ED)(ne.fontProperties,{color:(Y=ne,L?Y.insideFill:Y.outsideFill)}),isVisible:!0,textSize:ne.textSize};var Y});return(0,h.__assign)((0,h.__assign)({},H),{labelContents:U,wordBreak:e.wordBreak,contentLayout:e.contentLayout,textAnchor:"unset",alignment:e.alignment})}var Q=L?e.insideFill:e.outsideFill;return(0,h.__assign)((0,h.__assign)({},H),{text:e.text,fontProperties:(0,w.ED)(e.fontProperties,{color:Q}),selected:!1,isTotal:e.isTotal,isCategory:e.isCategory})},r.tryPositionRect=function(e,S,C,D,L,H){var N=[1,32].includes(S),U=N?L:D,Q=P(C,S,U);return N&&0===C.labelDataPoint.parentShape.orientation?this.checkLabelPosition(e,Q,H)||this.checkLabelPosition(e,P(C,S,-U),H):this.checkLabelPosition(e,Q,H)},r.checkLabelPosition=function(e,S,C){return e.hasConflict(S)?C?e.tryPositionInViewport(S):null:S},r.prototype.getShrinkAmountPixels=function(e,S){var C=e.labelDataPoint.hasBackground,D=!!(0,v.r)(e.labelDataPoint)&&"MultiLine"===e.labelDataPoint.contentLayout,H=S.height+(C?2*m.Bo:m.Cr);return D?H/4:H/2},r.prototype.calculateNewEndPoint=function(e,S,C){var D,L,H=(D=(0,h.__spreadArray)((0,h.__spreadArray)([],e,!0),S,!0))[0],N=D[1],ne=(L=[D[2]-H,D[3]-N])[0],Y=L[1],W=Math.sqrt(Math.pow(ne,2)+Math.pow(Y,2)),I=(W-C/2)/W;return[H+ne*I,N+Y*I]},r.prototype.getLeaderLinePoints=function(e,S,C,D){var L=function(r,e,S){var C=r.left,D=r.top;switch(e){case 1:C+=r.width/2,D+=r.height;break;case 2:C+=r.width/2;break;case 4:C+=r.width,D+=2*r.height/3;break;case 8:D+=2*r.height/3;break;case 32:C+=r.width,D+=r.height/2;break;case 16:D+=r.height/2;break;case 128:C+=r.width,D+=r.height;break;case 64:D+=r.height}return[[S.point.x,S.point.y],[C,D]]}(e,S,C);if(!this.shrinkLeaderLinesForBestFit)return L;var H=this.getShrinkAmountPixels(D,e),N=L[0];return[N,this.calculateNewEndPoint(N,L[1],H)]},r.prototype.tryPositionForPointPositions=function(e,S,C,D,L){for(var H=this,N=e.labelDataPoint,U=function(l,T,R){var A=r.tryPositionPoint(S,l,e,C,R);if(A){512===l?S.addCheckSeries(A):S.add(A),e.hasBeenRendered=!0;var z=D?H.getLeaderLinePoints(A,l,T,e):null;return(0,v.r)(N)?{boundingBox:A,labelContents:N.labelDataPointContents.map(function(te,ee){return{text:te.text,role:te.role,transparency:te.transparency,fontProperties:(0,w.ED)(te.fontProperties,{color:256===l?te.insideFill:te.outsideFill}),isVisible:!0,textSize:te.textSize}}),tooltip:N.tooltip,hasBackground:!!N.hasBackground,labelOrientation:L,key:N.key,identity:N.identity,leaderLinePoints:z,backgroundColor:N.backgroundColor,backgroundTransparency:N.backgroundTransparency,wordBreak:N.wordBreak,contentLayout:N.contentLayout,alignment:N.alignment,selected:!1,textAnchor:"unset",leaderLine:N.leaderLine}:{boundingBox:A,text:N.text,tooltip:N.tooltip,isVisible:!0,isInsideParent:256===l,identity:N.identity,key:N.key,fontProperties:(0,w.ED)(N.fontProperties,{color:256===l?N.insideFill:N.outsideFill}),selected:!1,leaderLinePoints:z,leaderLine:N.leaderLine,hasBackground:!!N.hasBackground,labelOrientation:L,backgroundColor:N.backgroundColor,backgroundTransparency:N.backgroundTransparency,wordBreak:N.wordBreak,isTotal:N.isTotal,isCategory:N.isCategory}}},Q=N.parentShape,ne=Q.validPositions,Y=0,W=ne;Y<W.length;Y++)if(E=U(W[Y],Q,!1))return E;var E;return this.attemptToMoveLabelsIntoViewport&&!_.isEmpty(ne)&&(E=U(ne[0],Q,!0))?E:null},r.tryPositionPoint=function(e,S,C,D,L){var H=(0,k.c)(C.labelSize,C.labelDataPoint.parentShape,S,D);return e.hasConflict(H)?L?512===S?e.trySeriesLabelPositionInViewport(H):e.tryPositionInViewport(H):null:H},r.defaultOffsetIterationDelta=2,r.defaultHorizontalPadding=2,r.defaultVerticalPadding=2,r}(),f=.09,o=.2},54086:function(be,Z,g){g.d(Z,{c:function(){return M},w:function(){return V}});var h=g(62458),B=g(86745),V=.02;function M(m,w,b,d){switch(b){case 1:return(0,B.aE)(m,w.point,w.radius+d);case 2:return(0,B.B2)(m,w.point,w.radius+d);case 4:return(0,B.t$)(m,w.point,w.radius+d);case 8:return(0,B.F2)(m,w.point,w.radius+d);case 32:return(0,B.I6)(m,w.point,w.radius+d);case 16:return(0,B.W7)(m,w.point,w.radius+d);case 128:return(0,B.Q$)(m,w.point,w.radius+d);case 64:return(0,B.kx)(m,w.point,w.radius+d);case 256:return(0,B.be)(m,w.point);case 512:return(0,B.BV)(m,w.point);default:h.fF.assertFail("Unsupported label position")}return null}},86745:function(be,Z,g){g.d(Z,{B2:function(){return M},BV:function(){return x},F2:function(){return w},I6:function(){return b},O5:function(){return f},Q$:function(){return P},QS:function(){return n},Vq:function(){return i},W7:function(){return d},ZN:function(){return y},_f:function(){return t},aE:function(){return V},be:function(){return k},cx:function(){return o},e6:function(){return c},fB:function(){return B},jb:function(){return p},kx:function(){return O},nK:function(){return h},t$:function(){return m},ug:function(){return v},um:function(){return a}});var h=Math.cos(45),B=Math.sin(45);function V(s,r,e){return{left:r.x-s.width/2,top:r.y-e-s.height,width:s.width,height:s.height}}function M(s,r,e){return{left:r.x-s.width/2,top:r.y+e,width:s.width,height:s.height}}function m(s,r,e){return{left:r.x-e-s.width,top:r.y-s.height/2,width:s.width,height:s.height}}function w(s,r,e){return{left:r.x+e,top:r.y-s.height/2,width:s.width,height:s.height}}function b(s,r,e){return{left:r.x-B*e-s.width,top:r.y+h*e,width:s.width,height:s.height}}function d(s,r,e){return{left:r.x+B*e,top:r.y+h*e,width:s.width,height:s.height}}function P(s,r,e){return{left:r.x-B*e-s.width,top:r.y-h*e-s.height,width:s.width,height:s.height}}function O(s,r,e){return{left:r.x+B*e,top:r.y-h*e-s.height,width:s.width,height:s.height}}function k(s,r){return{left:r.x-s.width/2,top:r.y-s.height/2,width:s.width,height:s.height}}function x(s,r){return{left:r.x,top:r.y-s.height/2,width:s.width,height:s.height}}function v(s,r,e){return{left:r.left+r.width/2-s.width/2,top:r.top+e,width:s.width,height:s.height}}function p(s,r,e){return{left:r.left+r.width/2-s.width/2,top:r.top+r.height-e-s.height,width:s.width,height:s.height}}function n(s,r,e){return{left:r.left+r.width-s.width-e,top:r.top+r.height/2-s.height/2,width:s.width,height:s.height}}function c(s,r,e){return{left:r.left+e,top:r.top+r.height/2-s.height/2,width:s.width,height:s.height}}function y(s,r,e){return{left:r.left+r.width/2-s.width/2,top:r.top-s.height-e,width:s.width,height:s.height}}function f(s,r,e){return{left:r.left+r.width/2-s.width/2,top:r.top+r.height+e,width:s.width,height:s.height}}function o(s,r,e){return{left:r.left+r.width+e,top:r.top+r.height/2-s.height/2,width:s.width,height:s.height}}function t(s,r,e){return{left:r.left-s.width-e,top:r.top+r.height/2-s.height/2,width:s.width,height:s.height}}function a(s,r,e){return{left:r.left+r.width/2-s.width/2+e,top:r.top+r.height/2-s.height/2,width:s.width,height:s.height}}function i(s,r,e){return{left:r.left+r.width/2-s.width/2,top:r.top+r.height/2-s.height/2+e,width:s.width,height:s.height}}},72902:function(be,Z,g){g.d(Z,{Bt:function(){return v},EX:function(){return m},G6:function(){return P},jN:function(){return p},kA:function(){return w},ku:function(){return b},ub:function(){return M},x0:function(){return n}});var h=g(62458),B=g(32379),V=g(26543);function M(f,o){return new v(f,o)}function m(f,o){void 0===o&&(o="rect");var t=f.select("".concat(o,".clearCatcher"));return t.empty()&&(t=f.append(o).classed("clearCatcher",!0).attr("width","100%").attr("height","100%")),t}function w(f,o){void 0===o&&(o="rect");var t=f.select("".concat(o,".clearCatcher"));t.empty()||t.style("pointer-events","none")}function b(f,o){void 0===o&&(o="rect");var t=f.select("".concat(o,".clearCatcher"));t.empty()||t.style("pointer-events","auto")}function P(f){if(_.isEmpty(f))return!1;for(var o=0,t=f.length;o<t;o++)if(f[o].selected)return!0;return!1}var O=function(){function f(o,t,a,i,s){this.dataPoints=o,this.behavior=t,this.key=a,this.hasSelection=i,this.matchPartialIdentities=s}return f.prototype.render=function(){this.behavior.renderSelection(this.hasSelection())},f}();function k(f,o){return _.find(f,function(t){return!t.identity.highlight&&o.identity.includes(t.identity,!0)})}var x=function(){function f(o,t){this.selectionStateManager=o,this.pointSources={},t&&(this.identityComparisonCache={containsComparisonCache:{},equalsComparisonCache:{}})}return f.prototype.findNonHightlightDataPoint=function(o){for(var t=0,a=this.getSelectablePointSources();t<a.length;t++){var s=k(a[t].dataPoints,o);if(s)return s}},f.prototype.applySelectionStateToDataPoints=function(o){this.updateSelectableDataPointsBySelectedIds(o,void 0,this.identityComparisonCache)},f.prototype.syncSelectionState=function(o){var t=this;this.getSelectablePointSources(o).forEach(function(a){t.updateSelectableDataPointsBySelectedIds(a.dataPoints,a.matchPartialIdentities,t.identityComparisonCache)})},f.prototype.clearDataPointSelection=function(){this.applyToAllSelectableDataPoints(function(o){return o.selected=!1})},f.prototype.render=function(){this.getSelectablePointSources().forEach(function(o){o.render()})},f.prototype.bind=function(o,t,a,i){var r,s=this,e=!1;i&&(i.isAxis||i.isLabels||i.isLegend||i.useSelectableDataPointForHasSelection)?r=function(){return!!o&&P(o)}:(r=function(){return s.selectionStateManager.getSelectionSize()>0},e=!0),this.isHierarchicalAxis=i&&i.isHierarchicalAxis,this.selectionStateManager.amendDecomposedSelection(!this.isHierarchicalAxis),this.pointSources[a]=new O(o,t,a,r,e),this.clearComparisonCache()},f.prototype.hasSelectionForSource=function(o){var t;return P(null===(t=this.pointSources[o])||void 0===t?void 0:t.dataPoints)},f.prototype.clearComparisonCache=function(){this.identityComparisonCache&&(this.identityComparisonCache={containsComparisonCache:{},equalsComparisonCache:{}})},f.prototype.applyToAllSelectableDataPoints=function(o){this.getSelectablePointSources().forEach(function(t){if(t.dataPoints)for(var a=0,i=t.dataPoints;a<i.length;a++)o(i[a])})},f.prototype.updateSelectableDataPointsBySelectedIds=function(o,t,a){void 0===t&&(t=!1),!_.isEmpty(o)&&this.selectionStateManager.updateDatapointAgainstSelectedIds(o,t,this.isHierarchicalAxis,a)},f.prototype.getSelectablePointSources=function(o){var t=this;if(o){var a=this.pointSources[o];return a?[a]:[]}return _.map(Object.keys(this.pointSources),function(i){return t.pointSources[i]})},f}(),v=function(){function f(o,t){h.fF.assertValue(o,"hostServices"),this.hostService=o,this.dataPointNavigationManager=new y,this.categoryAxisNavigationManager=new y,this.selectionStateManager=new c,this.dataPointManager=new x(this.selectionStateManager,t.interactivityServiceCaching)}return f.prototype.bind=function(o,t,a,i){i&&i.overrideSelectionFromData&&this.takeSelectionStateFromDataPoints(o),this.isHierarchicalAxis=i&&i.isHierarchicalAxis;var s=i?i.pointSourceKey:"";this.dataPointManager.bind(o,t,s,i),i&&i.navigationOptions&&(i.isAxis?this.categoryAxisNavigationManager.update(t,i.navigationOptions,s):this.dataPointNavigationManager.update(t,i.navigationOptions,s),i.navigationOptions.focusElement&&t.renderFocus(i.navigationOptions.focusElement)),t.bindEvents(a,this,i&&i.isAxis?{dataPointNavigationManager:this.categoryAxisNavigationManager,pointSourceKey:s}:{dataPointNavigationManager:this.dataPointNavigationManager,pointSourceKey:s},this.formatMode),this.syncSelectionState(i&&i.pointSourceKey)},f.prototype.clearSelection=function(){this.clearSelectionInternal(),this.renderAll()},f.prototype.clearSelectionInternal=function(){this.clearSelectionState(),this.dataPointManager.clearDataPointSelection()},f.prototype.applySelectionStateToData=function(o){return this.dataPointManager.applySelectionStateToDataPoints(o),this.hasSelection()},f.prototype.hasSelection=function(){return this.selectionStateManager.getSelectionSize()>0},f.prototype.hasSelectionForSource=function(o){return this.dataPointManager.hasSelectionForSource(o)},f.getVisualObjects=function(o){return _.map(o,function(t){return{objectName:f.dataPointObjectName,selectorsByColumn:t.getSelectorsByColumn()}})},f.prototype.handleSelection=function(o,t,a){var s,i=this;(h.fF.assertValue(o,"dataPoint"),o)&&(o.specificIdentity?s=o.specificIdentity.getSelectorsByColumn():(!o.identity&&o.lazyIdentity&&(o.identity=o.lazyIdentity()),o.identity&&(s=o.identity.getSelectorsByColumn())),1===this.hostService.dataMultiSelectMode()&&0===t&&(t=3),this.runInTransaction(function(){o.identity&&i.select(o,t);var D={type:0,visualObjects:o.specificIdentity?[{objectName:f.dataPointObjectName,selectorsByColumn:s}]:f.getVisualObjects(i.selectionStateManager.getSelectionIds()),isCtrlOrMetaKey:3===t,isShiftKey:1===t,isLassoSelect:!1,position:a};return _.isEmpty(s)||i.hostService.onSelecting(D),D},t,!1,!o.identity))},f.prototype.handleMultipleSelection=function(o,t,a,i){var s=this;this.runInTransaction(function(){s.selectMultiple(o,t);var S={type:0,visualObjects:f.getVisualObjects(s.selectionStateManager.getSelectionIds()),isCtrlOrMetaKey:!!a||3===t,isShiftKey:1===t,isLassoSelect:a,position:i};return s.hostService.onSelecting(S),S},t,a,!1)},f.prototype.runInTransaction=function(o,t,a,i){var r,s=!1;this.selectionStateManager.beginTransaction();try{var e=o();0!==e.action&&e.action?this.selectionStateManager.rollback():(this.selectionStateManager.commit(),s=!0,r=e.selectionLimitInfo,this.syncSelectionState())}catch{this.selectionStateManager.rollback()}finally{s&&(i?this.handleClearSelection():(this.sendSelectionToHost(t,a,r),this.renderAll()))}},f.prototype.handleContextMenu=function(o,t){this.sendContextMenuToHost(o,t)},f.prototype.handleClearSelection=function(){0===this.hostService.dataMultiSelectMode()&&(this.clearSelection(),this.sendSelectionToHost(0,!1,{existingSelectionLength:0,newSelectionLength:0,allowed:!0}))},f.prototype.restoreSelection=function(o){return this.clearSelection(),this.selectionStateManager.restoreSelection(o,this.isHierarchicalAxis),this.syncSelectionState(),this.renderAll(),this.hasSelection()},f.prototype.renderAll=function(){this.dataPointManager.render()},f.prototype.clearSelectionState=function(){this.selectionStateManager.clearSelectionState()},f.prototype.selectMultiple=function(o,t){(0===t||2===t)&&this.clearSelectionState();for(var a=0,i=o;a<i.length;a++){var s=i[a],r=s.identity;r.highlight||(1===t||0===t?this.addId(r):3===t?s.selected?this.removeId(r):this.addId(r):2===t&&s.selected&&this.addId(r))}},f.prototype.updateSelectionState=function(o,t,a,i){i||this.clearSelectionInternal(),o.selected?i&&3===t&&this.removeId(a):(this.addId(a),i&&(a.hasIdentity()?this.removeSelectionIdsWithOnlyMeasures():this.removeSelectionIdsExceptOnlyMeasures()))},f.prototype.select=function(o,t){o.identity&&o.identity.highlight&&(o=this.dataPointManager.findNonHightlightDataPoint(o),h.fF.assertValue(o,"Expected to find a non-highlight data point"));var a=o.identity;if(a){var i=this.getSelectionIds(),s=this.hostService.canSelect(f.createSelectEventArgs(i,t));switch(t){case 0:!o.selected||i.length>1||1===i.length&&!i[0].equals(a)?(this.clearSelectionInternal(),this.addId(a)):o.selected?this.removeId(a):this.addId(a);break;case 3:case 1:this.updateSelectionState(o,t,a,s);break;case 2:h.fF.assertFail("single selection does not have intersection implemented");break;default:h.fF.assertFail("no such multiSelectMode")}}},f.prototype.removeId=function(o){this.selectionStateManager.removeId(o,this.isHierarchicalAxis)},f.prototype.addId=function(o){this.selectionStateManager.addId(o,this.isHierarchicalAxis)},f.prototype.getSelectionIds=function(){return this.selectionStateManager.getSelectionIds()},f.prototype.sendContextMenuToHost=function(o,t){var a=this.hostService;if(a.onContextMenu){var i,r;o.specificIdentity?i=o.specificIdentity:o.identity&&(i=o.identity),r=this.selectionStateManager.isIdSelected(i);for(var e=[],S=0,C=!i||r?this.getSelectionIds():[i];S<C.length;S++){var L=C[S].getSelectorsByColumn();_.isEmpty(L)||e.push(L)}_.isEmpty(e)||a.onContextMenu({data:e,position:t})}},f.prototype.sendSelectionToHost=function(o,t,a){var i=this.hostService;if(i.onSelect){var s=f.createSelectEventArgs(this.getSelectionIds(),o,t,a);i.onSelect(s)}},f.createSelectEventArgs=function(o,t,a,i){var s=!1;_.isEmpty(o)||(s=o[0].getSelector()&&!o[0].getSelectorsByColumn());var r=_.chain(o).filter(function(S){return S.hasIdentity()}),e={type:0,visualObjects:r.map(function(S){return{objectName:f.dataPointObjectName,selectorsByColumn:S.getSelectorsByColumn()}}).value(),selectionMode:t,isLassoSelect:a,selectionLimitInfo:i};return s&&(e.selectors=r.map(function(S){return S.getSelector()}).value()),e},f.prototype.takeSelectionStateFromDataPoints=function(o){h.fF.assertValue(o,"dataPoints"),this.clearSelectionState();for(var t=0,a=o;t<a.length;t++){var i=a[t];i.selected&&this.addId(i.identity)}},f.prototype.syncSelectionState=function(o){this.dataPointManager.syncSelectionState(o)},f.prototype.removeSelectionIdsWithOnlyMeasures=function(){this.filterSelection(function(o){return o.hasIdentity()})},f.prototype.removeSelectionIdsExceptOnlyMeasures=function(){this.filterSelection(function(o){return!o.hasIdentity()})},f.prototype.filterSelection=function(o){this.selectionStateManager.filterSelection(o)},f.prototype.setFormatMode=function(o){this.formatMode=o,o&&this.handleClearSelection()},f.prototype.setSubSelectionHelper=function(o){this.subSelectionHelper=o},f.prototype.getSubSelectionHelper=function(){return this.subSelectionHelper},f.dataPointObjectName="dataPoint",f}(),p=function(f){return f[f.CategoryFirst=0]="CategoryFirst",f[f.SeriesFirst=1]="SeriesFirst",f[f.CategoryOnly=2]="CategoryOnly",f[f.SeriesOnly=3]="SeriesOnly",f}({}),n=function(f){return f[f.NextCategory=0]="NextCategory",f[f.PreviousCategory=1]="PreviousCategory",f[f.NextSeries=2]="NextSeries",f[f.PreviousSeries=3]="PreviousSeries",f}({}),c=function(){function f(){this.clearSelectionState()}return f.prototype.beginTransaction=function(){var o=this;h.fF.assert(function(){return void 0===o.previousSelectedIds},"previousSelectedIds"),this.previousSelectedIds=_.clone(this.selectedIds),this.previousDecomposedSelectedIds=_.clone(this.decomposedSelectedIds),this.previousSelectionIdSize=this.selectionIdSize},f.prototype.commit=function(){h.fF.assertValue(this.previousSelectedIds,"previousSelectedIds"),this.previousSelectedIds=void 0,this.previousDecomposedSelectedIds=void 0,this.previousSelectionIdSize=void 0},f.prototype.rollback=function(){h.fF.assertValue(this.previousSelectedIds,"previousSelectedIds"),this.selectedIds=this.previousSelectedIds,this.decomposedSelectedIds=this.previousDecomposedSelectedIds,this.selectionIdSize=this.previousSelectionIdSize,this.previousSelectedIds=void 0,this.previousDecomposedSelectedIds=void 0,this.previousSelectionIdSize=void 0},f.prototype.isIdSelected=function(o){var t=this.selectedIds[o?.getKeyWithoutHighlight()];return this.selectionIdSize>1&&t&&t.equals(o)},f.prototype.clearSelectionState=function(){this.selectedIds={},this.decomposedSelectedIds={},this.selectionIdSize=0},f.prototype.restoreSelection=function(o,t){var a=this;_.forEach(o,function(i){var s=V.l0.fromSelectorsByColumn(i);a.addId(s,t)})},f.prototype.addId=function(o,t){this.addDecomposedId(o,!t);var a=!!this.selectedIds[o.getKeyWithoutHighlight()];this.selectedIds[o.getKeyWithoutHighlight()]=o,a||(this.selectionIdSize=void 0!==this.selectionIdSize?this.selectionIdSize+1:1)},f.prototype.addDecomposedId=function(o,t){var a=o.getDecomposedKeys(t);if(a)for(var i=0,s=a;i<s.length;i++){var r=s[i],e=this.decomposedSelectedIds[r];_.isArray(e)?_.some(e,function(S){return S.equals(o)})||e.push(o):this.decomposedSelectedIds[r]=[o]}},f.prototype.amendDecomposedSelection=function(o){this.decomposedSelectedIds={};for(var a=0,i=_.values(this.selectedIds);a<i.length;a++)this.addDecomposedId(i[a],o)},f.prototype.removeId=function(o,t){var a=this,i=function(N){var U=N.getKeyWithoutHighlight(),Q=a.selectedIds[U];Q&&Q.includes(o)&&(delete a.selectedIds[U],a.selectionIdSize--)};i(o);var s=function(N){if(N)for(var U=N.length-1;U>-1;U--){var Q=N[U];o.includes(Q)&&(N.splice(U,1),i(Q))}},r=o.getDecomposedKeys(!t);if(r)for(var e=0,S=r;e<S.length;e++){var C=S[e],D=this.decomposedSelectedIds[C];s(D),_.isEmpty(D)&&delete this.decomposedSelectedIds[C]}var L=this.decomposedSelectedIds[B.xO];L&&L.length&&(s(L),_.isEmpty(L)&&delete this.decomposedSelectedIds[B.xO])},f.prototype.getSelectionSize=function(){return this.selectionIdSize},f.prototype.getSelectionIds=function(){return _.values(this.selectedIds)},f.prototype.filterSelection=function(o){this.selectedIds=_.pickBy(this.selectedIds,o);var t={};_.forEach(this.decomposedSelectedIds,function(a,i){var s=_.filter(a,o);s&&!_.isEmpty(s)&&(t[i]=s)}),this.decomposedSelectedIds=t},f.prototype.updateDatapointAgainstSelectedIds=function(o,t,a,i){var s=!_.isEmpty(this.selectedIds),r=!_.isEmpty(this.decomposedSelectedIds);if(s||r)for(var D=0,L=o;D<L.length;D++)(C=L[D]).selected=this.checkDatapointAgainstSelectedIds(C,t,a,s,r,i);else for(var e=0,S=o;e<S.length;e++){var C;(C=S[e]).selected=!1}},f.prototype.checkDatapointAgainstSelectedIds=function(o,t,a,i,s,r){var e,S;if(i&&(C=null===(e=o.identity)||void 0===e?void 0:e.getKeyWithoutHighlight())&&(D=this.selectedIds[C])&&D.includes(o.identity,!0,t,r))return!0;if(s){var L=null===(S=o.identity)||void 0===S?void 0:S.getDecomposedKeys(!a);if(L)for(var H=0,N=L;H<N.length;H++){var C,U=this.decomposedSelectedIds[C=N[H]];if(U)for(var Q=0,ne=U;Q<ne.length;Q++)if((D=ne[Q])&&D.includes(o.identity,!0,t,r))return!0}var Y=this.decomposedSelectedIds[B.xO];if(!_.isEmpty(Y))for(var W=0,I=Y;W<I.length;W++){var D;if((D=I[W])&&D.includes(o.identity,!0,t))return!0}}return!1},f}(),y=function(){function f(){this.behaviors={},this.helpers={}}return f.prototype.update=function(o,t,a){this.behaviors[a]=o,this.navigationStrategy=t.navigationStrategy,this.helpers[a]=t.helper},f.prototype.goToFirstElement=function(o){var t=this.helpers[o].getFirstElement().element;t&&this.behaviors[o].renderFocus(t)},f.prototype.isEmpty=function(o){return!this.behaviors[o]||_.isEmpty(this.helpers[o])},f.prototype.handleKeyDownEvent=function(o,t,a,i,s){var r,e,S,C,D,L=this.helpers[o];switch(i){case 9:var H=this.navigationStrategy;H===p.CategoryFirst||H===p.SeriesOnly?D=L.getNextDataPoint(t,a,s?n.PreviousSeries:n.NextSeries):H===p.SeriesFirst||H===p.CategoryOnly?D=L.getNextDataPoint(t,a,s?n.PreviousCategory:n.NextCategory):h.fF.assertFail("Unknown DataPointNavigationStrategy in DataPointNavigationManager.handleKeyDownEvent");break;case 37:D=L.getNextDataPoint(t,a,n.PreviousCategory);break;case 39:D=L.getNextDataPoint(t,a,n.NextCategory);break;case 38:D=L.getNextDataPoint(t,a,null!==(e=null===(r=L.validateDirection)||void 0===r?void 0:r.call(L,n.NextSeries))&&void 0!==e?e:n.NextSeries);break;case 40:D=L.getNextDataPoint(t,a,null!==(C=null===(S=L.validateDirection)||void 0===S?void 0:S.call(L,n.PreviousSeries))&&void 0!==C?C:n.PreviousSeries);break;default:h.fF.assertFail("Unsupported key code received by DataPointNavigationManager.handleKeyDownEvent")}this.behaviors[o].renderFocus(D.element)},f}()},40739:function(be,Z,g){g.d(Z,{r:function(){return m}});var h=g(62458),B=g(81337),V=g(59107);function m(d){var P=d.tooltips();return h.fF.assertValue(P,"visualHostTooltipService"),new b(P)}var b=function(){function d(P,O){void 0===O&&(O=1e3),this.visualHostTooltipService=P,this.tooltipEventsRegistrator=function(){var d=".tooltip",P="mouseout"+d,O="pointercancel"+d,k="pointerdown"+d,x="pointermove"+d,v="pointerup"+d,p="pointerover"+d,n="pointerleave"+d,c="keydown"+d,y="moveToolTipWithKeyboardAction",f=function(){function t(a,i){var s=this;this.handleTouchDelay=i,this.handleTouchTooltipHideDelay=2e3,this.preventContextMenuHandler=function(r){r.preventDefault(),r.stopPropagation(),s.visualElement&&s.visualElement.removeEventListener("contextmenu",s.preventContextMenuHandler,!0)},this.ignoreMouseoutEvent=!1,this.forceRefreshData=!1,this.visualHostTooltipService=a,this.rootNode=this.visualHostTooltipService.container()}return t.prototype.showTooltip=function(a,i,s,r,e,S,C,D,L,H){if(this.canDisplayTooltip(a,S)){this.visualElement&&this.visualElement.removeEventListener("contextmenu",this.preventContextMenuHandler,!0);var N=d3.event;this.visualElement=$(N.target).parent().get(0),a&&this.visualElement&&this.visualHostTooltipService.isTouchScreenOptimizedEnabled()&&(this.ignoreMouseEventsTimeoutId&&clearTimeout(this.ignoreMouseEventsTimeoutId),this.visualElement.addEventListener("contextmenu",this.preventContextMenuHandler,!0)),this.touchOriginTooltipShowing=a;var U=this.makeTooltipEventArgs(a);if(U){var Q;if((r||a||this.forceRefreshData)&&(this.forceRefreshData=!1,null==(Q=i(U))))return void(e&&this.visualHostTooltipService.hide({isTouchEvent:a,immediately:!1,isKeyboardEvent:L}));var ne=s(U),Y=ne&&ne.map(function(E){return(0,B.__assign)((0,B.__assign)({},E.getSelectorsByColumn()),{exclude:E.exclude})}),W=ne&&ne.map(function(E){return E?.role}),I=d3.event;"touch"===I.pointerType&&(I.tooltip=!0),this.visualHostTooltipService.show({coordinates:U.coordinates,isTouchEvent:a,dataItems:Q,identities:Y,roles:W,suppressAnnouncements:C,showByDefaultOverride:D,isKeyboardEvent:L,focusTooltip:H}),a&&!this.visualHostTooltipService.isTouchScreenOptimizedEnabled()&&this.startTouchHideTooltipTimeout()}}},t.prototype.hideTooltip=function(a,i){"pointerleave"===i&&a||"mouseout"===i&&this.ignoreMouseoutEvent||(this.touchOriginTooltipShowing=!1,clearTimeout(this.handleTouchTooltipHideId),this.visualHostTooltipService.hide({isTouchEvent:a,immediately:"pointerdown"===i,isKeyboardEvent:!1}))},t.prototype.getCoordinates=function(a){for(var r,s=d3.event;r=s.sourceEvent;)s=r;var e=a.getBoundingClientRect(),S=s.clientX,C=s.clientY;if(null==S||null==C){var D=d3.event;h.fF.assert(function(){return"keydown"===D.type||"moveToolTipWithKeyboardAction"===D.type},"only non-mouse/touch events (e.g., 'keydown') should get here");var H=D.target.getBoundingClientRect();S=H.left+H.width/2,C=H.top+H.height/2}return[S-e.left-a.clientLeft,C-e.top-a.clientTop]},t.prototype.makeTooltipEventArgs=function(a){var i=this.getCoordinates(this.rootNode),s=a?document.elementFromPoint(i[0],i[1]):d3.event.target;return{data:d3.select(s).datum(),coordinates:i,elementCoordinates:this.getCoordinates(s),context:s,isTouchEvent:a}},t.prototype.startTouchHideTooltipTimeout=function(){var a=this;this.handleTouchTooltipHideId&&clearTimeout(this.handleTouchTooltipHideId),this.handleTouchTooltipHideId=setTimeout(function(){a.hideTooltip(!0,"timeout")},this.handleTouchTooltipHideDelay)},t.prototype.startIgnoreMouseEventsTimeout=function(){var a=this;this.ignoreMouseEventsTimeoutId&&clearTimeout(this.ignoreMouseEventsTimeoutId),this.ignoreMouseEventsTimeoutId=setTimeout(function(){a.visualElement&&a.visualElement.removeEventListener("contextmenu",a.preventContextMenuHandler,!0),a.ignoreMouseEventsTimeoutId=void 0,a.forceRefreshData=!0},this.handleTouchDelay)},t.prototype.canDisplayTooltip=function(a,i){return!(!a&&("pointerdown"===i||this.touchOriginTooltipShowing||void 0!==this.ignoreMouseEventsTimeoutId))},t}(),o=function(){function t(a,i){this.tooltipServiceDelegate=a,this.visualHostTooltipService=i,this.moveThreshold=10,this.focusTooltip=!0}return t.prototype.unregisterEvents=function(a){a.on(d,null),a.on(y,null)},t.prototype.registerEvents=function(a,i,s,r,e,S){this.registerTooltipEvents(a,i,s,r,e,S)},t.prototype.hasPointerTypeTouch=function(a){return"touch"===a.pointerType},t.prototype.onPointerEnd=function(){if(this.tooltipServiceDelegate.startIgnoreMouseEventsTimeout(),this.visualHostTooltipService.visible()&&this.visualHostTooltipService.isTouchScreenOptimizedEnabled())this.tooltipServiceDelegate.ignoreMouseoutEvent=!0;else{var a=d3.event;this.tooltipServiceDelegate.hideTooltip(this.hasPointerTypeTouch(a),a.type)}},t.prototype.moveThresholdReached=function(a,i){var s=a-this.initialX,r=i-this.initialY;return Math.sqrt(s*s+r*r)>this.moveThreshold},t.prototype.registerTooltipEvents=function(a,i,s,r,e,S){var D,C=this;a.on(p,function(){C.focusTooltip=!0;var L=d3.event;C.hasPointerTypeTouch(L)||C.tooltipServiceDelegate.showTooltip(C.hasPointerTypeTouch(L),i,s,!0,!1,L.type,e,S,!1,C.focusTooltip)}),a.on(y,function(){var L=d3.event;!1===C.focusTooltip&&(C.visualHostTooltipService.visible()?C.tooltipServiceDelegate.showTooltip(C.hasPointerTypeTouch(L),i,s,!0,!1,L.type,e,S,!0,C.focusTooltip):(C.tooltipServiceDelegate.hideTooltip(!1,L.type),C.focusTooltip=!0),D=L.target)}),a.on(c,function(){var L=d3.event;V.M.isCtrlOrMeta(L)&&72===L.keyCode&&L.shiftKey?(C.focusTooltip=!1,L.target===D&&C.visualHostTooltipService.visible()?(C.tooltipServiceDelegate.hideTooltip(!1,L.type),C.focusTooltip=!0):C.tooltipServiceDelegate.showTooltip(C.hasPointerTypeTouch(L),i,s,!0,!1,L.type,e,S,!0,C.focusTooltip),D=L.target,L.preventDefault()):V.M.isCtrlOrMeta(L)&&72===L.keyCode?(C.focusTooltip=!0,L.target===D&&C.visualHostTooltipService.visible()?C.tooltipServiceDelegate.hideTooltip(!1,L.type):C.tooltipServiceDelegate.showTooltip(C.hasPointerTypeTouch(L),i,s,!0,!1,L.type,e,S,!0,C.focusTooltip),D=L.target,L.preventDefault()):27===L.keyCode&&(C.focusTooltip=!0,(L.target===D||C.visualHostTooltipService.visible())&&(C.tooltipServiceDelegate.hideTooltip(!1,L.type),L.preventDefault()))}),a.on(n,function(){C.focusTooltip=!0;var L=d3.event;C.tooltipServiceDelegate.hideTooltip(C.visualHostTooltipService.isTouchScreenOptimizedEnabled()&&C.hasPointerTypeTouch(L),L.type)}),a.on(P,function(){C.focusTooltip=!0;var L=d3.event;C.tooltipServiceDelegate.hideTooltip(C.visualHostTooltipService.isTouchScreenOptimizedEnabled()&&C.hasPointerTypeTouch(L),L.type)}),a.on(x,function(){C.focusTooltip=!0;var L=d3.event;C.tooltipServiceDelegate.ignoreMouseoutEvent=!1,C.visualHostTooltipService.visible()||!C.hasPointerTypeTouch(L)?C.tooltipServiceDelegate.showTooltip(C.hasPointerTypeTouch(L),i,s,r,!0,L.type,e,S,!1,!0):C.moveThresholdReached(L.screenX,L.screenY)&&C.tooltipServiceDelegate.hideTooltip(C.hasPointerTypeTouch(L),L.type)}),a.on(k,function(){C.focusTooltip=!1;var L=d3.event;C.initialX=L.screenX,C.initialY=L.screenY,C.tooltipServiceDelegate.showTooltip(C.hasPointerTypeTouch(L),i,s,!0,!C.visualHostTooltipService.isTouchScreenOptimizedEnabled(),L.type,e,S,!1,!0)}),a.on(v,function(){return C.onPointerEnd()}),a.on(O,function(){return C.onPointerEnd()})},t}();return{create:function(a){var i=new f(a.visualHostTooltipService,a.handleTouchDelay);return new o(i,a.visualHostTooltipService)}}}().create({visualHostTooltipService:this.visualHostTooltipService,handleTouchDelay:O})}return d.prototype.addTooltip=function(P,O,k,x,v,p){P&&(p||this.visualHostTooltipService.enabled())&&this.tooltipEventsRegistrator.registerEvents(P,O,k,x,v,p)},d.prototype.removeTooltips=function(P){P&&this.tooltipEventsRegistrator.unregisterEvents(P)},d.prototype.hide=function(){this.visualHostTooltipService.hide({immediately:!0,isTouchEvent:!1,isKeyboardEvent:!1})},d.prototype.visible=function(){return this.visualHostTooltipService&&this.visualHostTooltipService.visible()},d.prototype.isTouchScreenOptimizedEnabled=function(){return this.visualHostTooltipService.isTouchScreenOptimizedEnabled()},d}()}}]);