"use strict";(self.webpackChunkdesktopDaxQueryView=self.webpackChunkdesktopDaxQueryView||[]).push([["extension-host-git"],{2552:function(yt,nt,a){a.d(nt,{Ug:function(){return ct},su:function(){return V},ce:function(){return P},Kl:function(){return o},i:function(){return R},bE:function(){return Q},xU:function(){return ht},aw:function(){return tt},Zt:function(){return L},P9:function(){return H},mK:function(){return _t},ZH:function(){return ft},WV:function(){return ut},nD:function(){return ot},Jv:function(){return vt},h_:function(){return gt}});var l=a(60225),r=a(37419),K=a(47875);function c(d){return void 0===d&&(d=-1),function(y){return y.lift(new U(d,y))}}var U=function(){function d(g,S){this.count=g,this.source=S}return d.prototype.call=function(S,m){return m.subscribe(new G(S,this.count,this.source))},d}(),G=function(d){function y(S,m,f){var s;return(s=d.call(this,S)||this).count=m,s.source=f,s}return(0,r.Z)(y,d),y.prototype.error=function(m){if(!this.isStopped){var f=this.source,s=this.count;if(0===s)return d.prototype.error.call(this,m);s>-1&&(this.count=s-1),f.subscribe(this._unsubscribeAndRecycle())}},y}(K.L),k=a(14172),A=a(59822),B=a(68698),w=a(50423),_=function(){function d(y){this.httpService=y}return d.prototype.getData=function(y){var g=this.createNoRetriesRequestOptions();return this.httpService.get(y,g).pipe(c(0),(0,k.U)(function(S){return S.data}))},d.prototype.postData=function(y,g){var S=this.createNoRetriesRequestOptions();return this.httpService.post(y,g,S).pipe(this.retryWithTransform(),(0,k.U)(function(m){return m.data}))},d.prototype.deleteData=function(y){var g=this.createNoRetriesRequestOptions();return this.httpService.delete(y,g).pipe(c(0),(0,k.U)(function(S){return S.data}))},d.prototype.createNoRetriesRequestOptions=function(){var y=this.httpService.powerbiRequestOptions();return y.disableRetriesOnServerError=!0,y.retryCount=0,y.signInOnConditionalAccessErrors=!1,y},d.prototype.retryWithTransform=function(){return function(y){return y.pipe(c(0),(0,A.K)(function(g){return(0,l._)(g)}),(0,k.U)(function(g){return{data:g.data}}))}},d.\u0275fac=function(g){return new(g||d)(w.\u0275\u0275inject(B.s))},d.\u0275prov=w.\u0275\u0275defineInjectable({token:d,factory:d.\u0275fac,providedIn:"root"}),d}(),V=function(){function d(y){this.httpUtils=y}return d.prototype.branchOut=function(y,g){return this.httpUtils.postData("metadata/git/workspaces/".concat(y,"/branchOut"),g)},d.\u0275fac=function(g){return new(g||d)(w.\u0275\u0275inject(_))},d.\u0275prov=w.\u0275\u0275defineInjectable({token:d,factory:d.\u0275fac}),d}(),b=a(81337),P=function(){function d(y){this.httpUtils=y}return d.prototype.commitArtifacts=function(y,g){return this.httpUtils.postData("metadata/git/workspaces/".concat(y,"/commitToGit?skipHeadValidation=true"),g).pipe((0,k.U)(function(S){return(0,b.__assign)((0,b.__assign)({},S),{responseDate:new Date(Date.now())})}))},d.\u0275fac=function(g){return new(g||d)(w.\u0275\u0275inject(_))},d.\u0275prov=w.\u0275\u0275defineInjectable({token:d,factory:d.\u0275fac}),d}(),o=function(){function d(y){this.httpUtils=y}return d.prototype.postConfigureCredentials=function(y,g){return this.httpUtils.postData("/metadata/git/workspaces/".concat(y,"/configureCredentials"),g)},d.prototype.deleteConfiguredCredentials=function(y){return this.httpUtils.deleteData("/metadata/git/workspaces/".concat(y,"/configureCredentials"))},d.\u0275fac=function(g){return new(g||d)(w.\u0275\u0275inject(_))},d.\u0275prov=w.\u0275\u0275defineInjectable({token:d,factory:d.\u0275fac,providedIn:"root"}),d}(),R=function(){function d(y){this.httpUtils=y}return d.prototype.getGitConnectionDetails=function(y){return this.httpUtils.getData("/metadata/git/workspaces/".concat(y,"/connection"))},d.prototype.setGitConnectionDetails=function(y,g){return this.httpUtils.postData("/metadata/git/workspaces/".concat(y,"/connection"),g)},d.prototype.checkoutBranch=function(y,g){return this.httpUtils.postData("/metadata/git/workspaces/".concat(y,"/checkoutBranch"),g)},d.prototype.deleteGitConnectionDetails=function(y){return this.httpUtils.deleteData("/metadata/git/workspaces/".concat(y,"/connection"))},d.\u0275fac=function(g){return new(g||d)(w.\u0275\u0275inject(_))},d.\u0275prov=w.\u0275\u0275defineInjectable({token:d,factory:d.\u0275fac}),d}(),q=a(18016),Q=function(){function d(y){this.httpUtils=y}return d.prototype.getOrganizations=function(y,g){return this.httpUtils.getData("/metadata/git/organizations?gitProviderType=".concat(q.IS[y],"&workspaceId=").concat(g))},d.prototype.getProjects=function(y,g,S){return this.httpUtils.getData("/metadata/git/projects?gitProviderType=".concat(q.IS[y],"&organizationName=").concat(g,"&workspaceId=").concat(S))},d.prototype.getRepositories=function(y,g,S,m){return this.httpUtils.getData("/metadata/git/repositories?gitProviderType=".concat(q.IS[y],"&organizationName=").concat(g,"&projectName=").concat(S,"&workspaceId=").concat(m))},d.prototype.getBranches=function(y,g,S,m,f,s){var D="/metadata/git/branches?workspaceId=".concat(y,"&gitProviderType=").concat(q.IS[g],"&organizationName=").concat(S,"&repositoryName=").concat(m);return f&&(D+="&projectName=".concat(f)),s&&(D+="&datasourceOID=".concat(s)),this.httpUtils.getData(D)},d.prototype.createBranch=function(y){return this.httpUtils.postData("/metadata/git/branches",y)},d.prototype.createDirectory=function(y){return this.httpUtils.postData("/metadata/git/directory",y)},d.prototype.getRelatedWorkspaces=function(y){return this.httpUtils.getData("/metadata/git/workspaces/".concat(y,"/relatedWorkspaces"))},d.\u0275fac=function(g){return new(g||d)(w.\u0275\u0275inject(_))},d.\u0275prov=w.\u0275\u0275defineInjectable({token:d,factory:d.\u0275fac,providedIn:"root"}),d}(),tt=function(){function d(y){this.httpUtils=y}return d.prototype.createDatasource=function(y){return this.httpUtils.postData("/v2.0/myorg/me/gatewayClusterCloudDatasource",y)},d.prototype.discoverDatasources=function(){return this.httpUtils.postData("/v2.0/myorg/me/gatewayClusterDatasources",{datasourceTypes:["Extension"]})},d.prototype.getDatasource=function(y){var g="/v2.0/myorg/me/gatewayClusterDatasources/".concat(y);return this.httpUtils.getData(g)},d.\u0275fac=function(g){return new(g||d)(w.\u0275\u0275inject(_))},d.\u0275prov=w.\u0275\u0275defineInjectable({token:d,factory:d.\u0275fac,providedIn:"root"}),d}(),L=function(){function d(y){this.httpUtils=y}return d.prototype.initializeGitConnection=function(y,g){return this.httpUtils.postData("/metadata/git/workspaces/".concat(y,"/connection/initialize"),g)},d.\u0275fac=function(g){return new(g||d)(w.\u0275\u0275inject(_))},d.\u0275prov=w.\u0275\u0275defineInjectable({token:d,factory:d.\u0275fac}),d}(),_t=function(){function d(y){this.httpUtils=y}return d.prototype.getUncommittedChanges=function(y){return this.getData(y,"uncommittedChanges")},d.prototype.getIncomingChanges=function(y){return this.getData(y,"incomingChanges")},d.prototype.getGitStatus=function(y){return this.getData(y,"gitStatus")},d.prototype.getData=function(y,g){var S="metadata/git/workspaces/".concat(y,"/").concat(g);return this.httpUtils.getData(S)},d.\u0275fac=function(g){return new(g||d)(w.\u0275\u0275inject(_))},d.\u0275prov=w.\u0275\u0275defineInjectable({token:d,factory:d.\u0275fac}),d}(),ut=function(){function d(y){this.httpUtils=y}return d.prototype.getlatestGitOperation=function(y){return this.httpUtils.getData("metadata/git/workspaces/".concat(y,"/latestGitOperationV2"))},d.\u0275fac=function(g){return new(g||d)(w.\u0275\u0275inject(_))},d.\u0275prov=w.\u0275\u0275defineInjectable({token:d,factory:d.\u0275fac}),d}(),ft=function(){function d(y){this.httpUtils=y}return d.prototype.switchBranch=function(y,g){return this.httpUtils.postData("/metadata/git/workspaces/".concat(y,"/switchBranch"),g)},d.\u0275fac=function(g){return new(g||d)(w.\u0275\u0275inject(_))},d.\u0275prov=w.\u0275\u0275defineInjectable({token:d,factory:d.\u0275fac}),d}(),ot=function(){function d(y){this.httpUtils=y}return d.prototype.undoCommitArtifacts=function(y,g){return this.httpUtils.postData("metadata/git/workspaces/".concat(y,"/undo"),g)},d.\u0275fac=function(g){return new(g||d)(w.\u0275\u0275inject(_))},d.\u0275prov=w.\u0275\u0275defineInjectable({token:d,factory:d.\u0275fac}),d}(),vt=function(){function d(y){this.httpUtils=y}return d.prototype.UpdateArtifactsFromGit=function(y,g){return this.httpUtils.postData("metadata/git/workspaces/".concat(y,"/updateFromGit"),g).pipe((0,k.U)(function(S){return(0,b.__assign)((0,b.__assign)({},S),{responseDate:new Date(Date.now())})}))},d.\u0275fac=function(g){return new(g||d)(w.\u0275\u0275inject(_))},d.\u0275prov=w.\u0275\u0275defineInjectable({token:d,factory:d.\u0275fac}),d}(),H=function(){function d(y){this.httpUtils=y}return d.prototype.gitRepairItems=function(y,g){return this.httpUtils.postData("metadata/git/workspaces/".concat(y,"/repairGitItems"),g).pipe((0,k.U)(function(S){return(0,b.__assign)({},S)}))},d.\u0275fac=function(g){return new(g||d)(w.\u0275\u0275inject(_))},d.\u0275prov=w.\u0275\u0275defineInjectable({token:d,factory:d.\u0275fac}),d}();function gt(d){return d&&"string"==typeof d.extensionDataSourceKind&&"string"==typeof d.extensionDataSourcePath}var ht=function(d){return d[d.Undefined=0]="Undefined",d[d.Completed=1]="Completed",d[d.UpdateFromGitRequired=2]="UpdateFromGitRequired",d[d.CommitToGitRequired=3]="CommitToGitRequired",d[d.Failed=100]="Failed",d}({}),Gt=a(77476),ct=function(){function d(){}return d.forRoot=function(){return{ngModule:d,providers:[]}},d.\u0275fac=function(g){return new(g||d)},d.\u0275mod=w.\u0275\u0275defineNgModule({type:d}),d.\u0275inj=w.\u0275\u0275defineInjector({providers:[V,P,o,R,Q,tt,_,L,_t,ut,ft,ot,vt,H],imports:[Gt.CommonModule]}),d}()},70628:function(yt,nt,a){a.d(nt,{CmZ:function(){return L},DAQ:function(){return Rn},j3q:function(){return gt},f$Z:function(){return We},iAv:function(){return uo},REK:function(){return Wn},gCl:function(){return ro},F8e:function(){return je},pPx:function(){return yr},CCT:function(){return Yn},Gui:function(){return Q},ND3:function(){return vt},x6e:function(){return G},V_q:function(){return Ut}});var l=a(60756),r=a(85732),K=a(2552),c=a(81337),U=a(8894),G=(0,r.PH)("[GitStatus] Load Uncommitted Changes",(0,r.Ky)()),k=(0,r.PH)("[GitStatus] Load Uncommitted Changes Success",(0,r.Ky)()),A=(0,r.PH)("[GitStatus] Load Uncommitted Changes Failure",(0,r.Ky)()),B=(0,r.PH)("[GitStatus] Load Incoming Changes",(0,r.Ky)()),w=(0,r.PH)("[GitStatus] Load Incoming Changes Success",(0,r.Ky)()),_=(0,r.PH)("[GitStatus] Load Incoming Changes Failure",(0,r.Ky)()),V=(0,r.PH)("[GitStatus] set selection of artifact in changes tab",(0,r.Ky)()),b=(0,r.PH)("[GitStatus] clear selection of artifact in changes tab",(0,r.Ky)()),P=(0,r.PH)("[GitConnection] Invalidate Git status",(0,r.Ky)()),o=(0,r.PH)("[GitStatus] Load Git Status",(0,r.Ky)()),R=(0,r.PH)("[GitStatus] Load Git Status Success",(0,r.Ky)()),q=(0,r.PH)("[GitStatus] Load Git Status Failure",(0,r.Ky)()),Q=function(t){return t[t.Initial=0]="Initial",t[t.Loading=1]="Loading",t[t.Loaded=2]="Loaded",t}({}),L=function(t){return t[t.Initial=0]="Initial",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t}({}),_t=function(t){return t[t.Initial=0]="Initial",t[t.Committing=1]="Committing",t[t.Committed=2]="Committed",t}({}),ut=function(t){return t[t.Initial=0]="Initial",t[t.Undoing=1]="Undoing",t[t.Undone=2]="Undone",t}({}),ft=function(t){return t[t.Initial=0]="Initial",t[t.Updating=1]="Updating",t[t.Updated=2]="Updated",t}({}),ot=function(t){return t[t.None=0]="None",t[t.CommitFlowInProgress=1]="CommitFlowInProgress",t[t.CommitInitialFlowInProgress=2]="CommitInitialFlowInProgress",t[t.UpdateFlowInProgress=3]="UpdateFlowInProgress",t[t.UpdateInitialFlowInProgress=4]="UpdateInitialFlowInProgress",t[t.UndoFlowInProgress=5]="UndoFlowInProgress",t[t.CheckoutBranchFlowInProgress=6]="CheckoutBranchFlowInProgress",t[t.SwitchBranchFlowInProgress=7]="SwitchBranchFlowInProgress",t}({}),vt=function(t){return t[t.Initial=0]="Initial",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t}({}),H=function(t){return t[t.Initial=0]="Initial",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t}({}),gt=function(t){return t[t.Initial=0]="Initial",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t}({}),ht=function(t){return t[t.Initial=0]="Initial",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t}({}),ct=(0,U.H)({selectId:function(e){return e.workspaceId}}),W=(0,c.__assign)({},ct.getInitialState()),d=(0,r.Lq)(W,(0,r.on)(o,function(t,e){return ct.upsertOne({workspaceId:e.workspaceId,statusCallState:Q.Loading},t)}),(0,r.on)(R,function(t,e){return ct.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitStatus),{statusCallState:Q.Loaded}),t)}),(0,r.on)(q,function(t,e){return ct.upsertOne({workspaceId:e.workspaceId,statusCallState:e.error},t)}),(0,r.on)(G,function(t,e){return ct.upsertOne({workspaceId:e.workspaceId,uncommittedChangesCallState:Q.Loading},t)}),(0,r.on)(k,function(t,e){var i,n,u,v,C,E=e.gitStatus;return ct.upsertOne({workspaceId:E.workspaceId,head:E.head,gitChanges:(0,c.__spreadArray)((0,c.__spreadArray)([],null!==(u=null===(n=null===(i=t.entities[E.workspaceId])||void 0===i?void 0:i.gitChanges)||void 0===n?void 0:n.filter(function(I){return I.remoteChange}))&&void 0!==u?u:[],!0),null!==(v=E?.gitChanges)&&void 0!==v?v:[],!0),incomingChangesCommitHash:null===(C=t.entities[E.workspaceId])||void 0===C?void 0:C.incomingChangesCommitHash,uncommittedChangesCallState:Q.Loaded},t)}),(0,r.on)(A,function(t,e){return ct.upsertOne({workspaceId:e.workspaceId,uncommittedChangesCallState:e.error},t)}),(0,r.on)(B,function(t,e){return ct.upsertOne({workspaceId:e.workspaceId,incomingChangesCallState:Q.Loading},t)}),(0,r.on)(w,function(t,e){var i,n,u,v,C=e.gitStatus;return ct.upsertOne({workspaceId:C.workspaceId,head:C.head,gitChanges:(0,c.__spreadArray)((0,c.__spreadArray)([],null!==(u=null===(n=null===(i=t.entities[C.workspaceId])||void 0===i?void 0:i.gitChanges)||void 0===n?void 0:n.filter(function(E){return E.workspaceChange}))&&void 0!==u?u:[],!0),null!==(v=C?.gitChanges)&&void 0!==v?v:[],!0),incomingChangesCommitHash:C.incomingChangesCommitHash,incomingChangesCallState:Q.Loaded},t)}),(0,r.on)(_,function(t,e){return ct.upsertOne({workspaceId:e.workspaceId,incomingChangesCallState:e.error},t)}),(0,r.on)(V,function(t,e){var i,n,u=e.workspaceId,v=e.artifactId,C=e.logicalId,I=(null===(n=null===(i=t.entities[u])||void 0===i?void 0:i.uncommittedChangesArtifactSelectionState)||void 0===n?void 0:n.selectedArtifacts)||[],T=e.isChecked?I.concat({artifactId:v,logicalId:C}):I.filter(function(O){return O.artifactId!==v||O.logicalId!==C});return ct.upsertOne({workspaceId:u,uncommittedChangesArtifactSelectionState:{selectedArtifacts:T}},t)}),(0,r.on)(b,function(t,e){return ct.updateOne({id:e.workspaceId,changes:{uncommittedChangesArtifactSelectionState:{selectedArtifacts:[]}}},t)}),(0,r.on)(P,function(t,e){return ct.removeOne(e.workspaceId,t)})),g=a(18016),S=(0,r.PH)("[GitConnection] Initialize Git connection",(0,r.Ky)()),m=(0,r.PH)("[GitConnection] Initialize Git connection success",(0,r.Ky)()),f=(0,r.PH)("[GitConnection] Initialize Git connection failure",(0,r.Ky)()),s=(0,r.PH)("[GitConnection] Invalidate Git connection initialization",(0,r.Ky)()),D=(0,r.PH)("[GitConnection] Load Git Connection",(0,r.Ky)()),M=(0,r.PH)("[GitConnection] Load Git Connection Success",(0,r.Ky)()),$=(0,r.PH)("[GitConnection] Load Git Connection Failure",(0,r.Ky)()),X=(0,r.PH)("[GitConnection] Ensure Git Connection",(0,r.Ky)()),et=(0,r.PH)("[GitConnection] Save Git Connection",(0,r.Ky)()),Z=(0,r.PH)("[GitConnection] Save Git Connection Success",(0,r.Ky)()),St=(0,r.PH)("[GitConnection] Save Git Connection Failure",(0,r.Ky)()),Ot=(0,r.PH)("[GitConnection] Delete Git Connection",(0,r.Ky)()),h=(0,r.PH)("[GitConnection] Delete Git Connection Success",(0,r.Ky)()),x=(0,r.PH)("[GitConnection] Delete Git Connection Failure",(0,r.Ky)()),rt=(0,r.PH)("[GitConnection] Git Checkout Branch",(0,r.Ky)()),Et=(0,r.PH)("[GitConnection] Git Checkout Branch Success",(0,r.Ky)()),kt=(0,r.PH)("[GitConnection] Git Checkout Branch Failure",(0,r.Ky)()),Ut=(0,r.PH)("[GitConnection] Update datasource in GitConnection",(0,r.Ky)()),bt=(0,r.PH)("[GitSync] Get latest git alm operation",(0,r.Ky)()),Bt=(0,r.PH)("[GitSync] Get latest git alm operation Success",(0,r.Ky)()),xt=(0,r.PH)("[GitSync] Get latest git alm operation Failure",(0,r.Ky)()),Tt=(0,r.PH)("[GitConnection] Invalidate Git sync",(0,r.Ky)()),Kt=(0,r.PH)("[GitSwitchBranch] Git Switch Branch",(0,r.Ky)()),Rt=(0,r.PH)("[GitSwitchBranch] Git Switch Branch Success",(0,r.Ky)()),Y=(0,r.PH)("[GitSwitchBranch] Git Switch Branch In Progress",(0,r.Ky)()),j=(0,r.PH)("[GitSwitchBranch] Git Switch Branch Failure server error",(0,r.Ky)()),at=(0,r.PH)("[GitSwitchBranch] Git Switch Branch Failure",(0,r.Ky)()),mt=(0,r.PH)("[GitBranchOut] Branch Out",(0,r.Ky)()),At=(0,r.PH)("[GitBranchOut] Branch Out success",(0,r.Ky)()),Ft=(0,r.PH)("[GitBranchOut] Branch Out failure",(0,r.Ky)()),Dt=(0,r.PH)("[GitBranchOut] Branch Out requires to sync folder into store",(0,r.Ky)()),se=(0,r.PH)("[GitBranchOut] Branch Out completed",(0,r.Ky)()),le=(0,r.PH)("[GitBranchOut] Branch Out requires to sync folder into store without update",(0,r.Ky)()),Wi=(0,r.PH)("[GitBranchOut] Branch Out store invalidate",(0,r.Ky)()),wt=(0,U.H)({selectId:function(e){return e.workspaceId}}),ge=(0,c.__assign)({},wt.getInitialState()),$i=(0,r.Lq)(ge,(0,r.on)(D,Ot,function(t,e){return wt.upsertOne({workspaceId:e.workspaceId,callState:L.InProgress},t)}),(0,r.on)(et,function(t,e){return wt.upsertOne({workspaceId:e.gitConnection.workspaceId,callState:L.InProgress},t)}),(0,r.on)(rt,function(t,e){return wt.upsertOne({workspaceId:e.gitCheckoutBranchState.workspaceId,callState:L.InProgress},t)}),(0,r.on)(M,Z,function(t,e){return wt.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitConnection),{callState:L.Completed}),t)}),(0,r.on)(Et,function(t,e){var i,n=e.gitCheckoutBranchState,u=n.workspaceId,v=null===(i=t.entities[u])||void 0===i?void 0:i.gitConnectionDetails;return wt.updateOne({id:u,changes:{gitConnectionDetails:(0,c.__assign)((0,c.__assign)({},v),{branchName:n.request.branchName}),callState:L.Completed}},t)}),(0,r.on)(Y,function(t,e){var i,n=e.gitSwitchBranchState,u=n.workspaceId;return void 0!==(null===(i=n?.request)||void 0===i?void 0:i.targetBranchName)?function(t,e,i){var n,u=null===(n=t.entities[e])||void 0===n?void 0:n.gitConnectionDetails;return wt.updateOne({id:e,changes:{gitConnectionDetails:(0,c.__assign)((0,c.__assign)({},u),{branchName:i}),callState:L.Completed}},t)}(t,u,n.request.targetBranchName):t}),(0,r.on)(Ut,function(t,e){var i,n=e.workspaceId,u=e.datasourceOID,v=null===(i=t.entities[n])||void 0===i?void 0:i.gitConnectionDetails;return wt.updateOne({id:n,changes:{gitConnectionDetails:(0,c.__assign)((0,c.__assign)({},v),{datasourceOID:u}),callState:L.Completed}},t)}),(0,r.on)(h,function(t,e){return wt.removeOne(e.workspaceId,t)}),(0,r.on)($,x,kt,function(t,e){return wt.updateOne({id:e.workspaceId,changes:{callState:e.error}},t)}),(0,r.on)(St,function(t,e){return wt.updateOne({id:e.gitConnection.workspaceId,changes:{callState:e.error}},t)}),(0,r.on)(m,function(t,e){var i,n,u=e.gitInitializationStateWithResponse,v=u.workspaceId,C=null===(i=t.entities[v])||void 0===i?void 0:i.gitConnectionDetails;return wt.updateOne({id:v,changes:{gitConnectionDetails:(0,c.__assign)((0,c.__assign)({},C),{isInitialized:!0,head:null===(n=u.response)||void 0===n?void 0:n.head})}},t)}),(0,r.on)(At,function(t,e){var i,n,u,v,C,E,I=e.gitBranchOutState;if(void 0===(null===(i=I.response)||void 0===i?void 0:i.folder))return t;var T=null===(u=null===(n=I.response)||void 0===n?void 0:n.folder)||void 0===u?void 0:u.objectId,F=null===(v=t.entities[I.workspaceId])||void 0===v?void 0:v.gitConnectionDetails,N=(0,c.__assign)((0,c.__assign)({},F),{head:null===(E=null===(C=I.response)||void 0===C?void 0:C.initializeConnectionStatus)||void 0===E?void 0:E.head,branchName:I.request.targetBranchName});return wt.upsertOne((0,c.__assign)((0,c.__assign)({},N),{workspaceId:T,callState:L.Completed}),t)}),(0,r.on)(k,w,R,function(t,e){var i,n,u,v=e.gitStatus,C=v.workspaceId,E=null===(i=t.entities[C])||void 0===i?void 0:i.gitConnectionDetails;return v.head&&v.head!==(null===(u=null===(n=t.entities[v.workspaceId])||void 0===n?void 0:n.gitConnectionDetails)||void 0===u?void 0:u.head)?wt.updateOne({id:C,changes:{gitConnectionDetails:(0,c.__assign)((0,c.__assign)({},E),{head:v.head})}},t):t}),(0,r.on)(Bt,function(t,e){var i,n,u=e.gitSyncState,v=u.workspaceId,C=null===(i=t.entities[v])||void 0===i?void 0:i.gitConnectionDetails;return u.gitOperationStatus!==g.wM.Successful?t:wt.updateOne({id:v,changes:{gitConnectionDetails:(0,c.__assign)((0,c.__assign)({},C),{lastSyncTime:null===(n=u.lastUpdatedTime)||void 0===n?void 0:n.toString()})}},t)})),de=(0,r.PH)("[CommitToGit] Commit Changes To Git",(0,r.Ky)()),te=(0,r.PH)("[CommitToGit] Commit Changes To Git inProgress",(0,r.Ky)()),fe=(0,r.PH)("[CommitToGit] Commit Changes To Git success",(0,r.Ky)()),he=(0,r.PH)("[CommitToGit] Commit Changes To Git failure server error ",(0,r.Ky)()),me=(0,r.PH)("[CommitToGit] Commit Changes To Git failure ",(0,r.Ky)()),Lt=(0,U.H)({selectId:function(e){return e.workspaceId}}),Ge=(0,c.__assign)({},Lt.getInitialState()),Ji=(0,r.Lq)(Ge,(0,r.on)(de,function(t,e){return Lt.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitCommitState),{callState:_t.Committing}),t)}),(0,r.on)(te,function(t,e){return Lt.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitCommitState),{callState:_t.Committing}),t)}),(0,r.on)(fe,function(t,e){return Lt.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitCommitStateWithResponse),{callState:_t.Committed,notificationId:void 0}),t)}),(0,r.on)(he,function(t,e){return Lt.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitCommitState),{callState:_t.Committed,notificationId:void 0}),t)}),(0,r.on)(me,function(t,e){var n=e.error;return Lt.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitCommitState),{callState:n,notificationId:void 0}),t)}),(0,r.on)(s,function(t,e){return Lt.removeOne(e.workspaceId,t)})),ee=(0,r.PH)("[UpdateFromGit] Update Changes From Git",(0,r.Ky)()),ie=(0,r.PH)("[UpdateFromGit] Update Changes From Git InProgress",(0,r.Ky)()),Se=(0,r.PH)("[UpdateFromGit] Update Changes From Git success",(0,r.Ky)()),ye=(0,r.PH)("[UpdateFromGit] Update Changes From Git failure ",(0,r.Ky)()),Ie=(0,r.PH)("[UpdateFromGit] Update Changes From Git failure server error",(0,r.Ky)()),Ht=(0,U.H)({selectId:function(e){return e.workspaceId}}),Ce=(0,c.__assign)({},Ht.getInitialState()),Zi=(0,r.Lq)(Ce,(0,r.on)(ee,function(t,e){return Ht.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitUpdateState),{callState:ft.Updating}),t)}),(0,r.on)(ie,function(t,e){return Ht.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitUpdateState),{callState:ft.Updating}),t)}),(0,r.on)(Se,function(t,e){return Ht.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitUpdateStateWithResponse),{callState:ft.Updated,notificationId:void 0}),t)}),(0,r.on)(Ie,function(t,e){var n=e.error;return Ht.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitUpdateState),{callState:n,notificationId:void 0}),t)}),(0,r.on)(ye,function(t,e){var n=e.error;return Ht.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitUpdateState),{callState:n,notificationId:void 0}),t)}),(0,r.on)(s,function(t,e){return Ht.removeOne(e.workspaceId,t)})),Qt=(0,U.H)({selectId:function(e){return e.workspaceId}}),Ee=(0,c.__assign)({},Qt.getInitialState()),qi=(0,r.Lq)(Ee,(0,r.on)(S,function(t,e){return Qt.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitInitializationState),{callState:L.InProgress}),t)}),(0,r.on)(m,function(t,e){return Qt.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitInitializationStateWithResponse),{callState:L.Completed}),t)}),(0,r.on)(f,function(t,e){var n=e.error;return Qt.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitInitializationState),{callState:n}),t)}),(0,r.on)(s,function(t,e){return Qt.removeOne(e.workspaceId,t)})),Jt=(0,U.H)({selectId:function(e){return e.workspaceId}}),Te=(0,c.__assign)({},Jt.getInitialState()),er=(0,r.Lq)(Te,(0,r.on)(bt,function(t,e){return Jt.upsertOne({workspaceId:e.workspaceId,isValid:!0,isInitial:!!e.isInitial,callState:L.InProgress},t)}),(0,r.on)(Bt,function(t,e){return Jt.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitSyncState),{callState:L.Completed}),t)}),(0,r.on)(xt,function(t,e){return Jt.updateOne({id:e.workspaceId,changes:{callState:e.error,isValid:!1}},t)}),(0,r.on)(Tt,function(t,e){return Jt.removeOne(e.workspaceId,t)})),ue=(0,r.PH)("[undoFromGit] Undo changes From Git",(0,r.Ky)()),re=(0,r.PH)("[undoFromGit] Undo changes From Git inProgress",(0,r.Ky)()),De=(0,r.PH)("[undoFromGit] Undo changes From Git success",(0,r.Ky)()),we=(0,r.PH)("[undoFromGit] Undo changes From Git failure server error ",(0,r.Ky)()),Oe=(0,r.PH)("[undoFromGit] Undo changes From Git failure ",(0,r.Ky)()),Wt=(0,U.H)({selectId:function(e){return e.workspaceId}}),Be=(0,c.__assign)({},Wt.getInitialState()),rr=(0,r.Lq)(Be,(0,r.on)(ue,function(t,e){return Wt.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitUndoState),{callState:ut.Undoing}),t)}),(0,r.on)(re,function(t,e){return Wt.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitUndoState),{callState:ut.Undoing}),t)}),(0,r.on)(De,function(t,e){return Wt.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitUndoStateWithResponse),{callState:ut.Undone,notificationId:void 0}),t)}),(0,r.on)(we,function(t,e){var n=e.error;return Wt.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitUndoState),{callState:n,notificationId:void 0}),t)}),(0,r.on)(Oe,function(t,e){var n=e.error;return Wt.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitUndoState),{callState:n,notificationId:void 0}),t)}),(0,r.on)(s,function(t,e){return Wt.removeOne(e.workspaceId,t)})),lt=function(t){return t[t.None=0]="None",t[t.GitActionStart=1]="GitActionStart",t[t.GitActionInProgress=2]="GitActionInProgress",t[t.GitActionDone=3]="GitActionDone",t[t.GitSyncStart=4]="GitSyncStart",t[t.GitSyncInProgress=5]="GitSyncInProgress",t[t.GitSyncDone=6]="GitSyncDone",t}({}),Pt=function(t){return t[t.None=0]="None",t[t.Commit=1]="Commit",t[t.Update=2]="Update",t[t.Undo=3]="Undo",t[t.CheckoutBranch=4]="CheckoutBranch",t[t.SwitchBranch=5]="SwitchBranch",t}({}),pt=(0,U.H)({selectId:function(e){return e.workspaceId}}),Fe=(0,c.__assign)({},pt.getInitialState()),or=(0,r.Lq)(Fe,(0,r.on)(de,function(t,e){return pt.upsertOne({workspaceId:e.gitCommitState.workspaceId,activeFlowName:Pt.Commit,progressState:lt.GitActionStart,activeFlowState:e.isInitialSync?ot.CommitInitialFlowInProgress:ot.CommitFlowInProgress,isIntermidiateStep:!1},t)}),(0,r.on)(te,function(t,e){var i=e.gitCommitState,n=t.entities[i.workspaceId];return n&&pe(Pt.Commit,n)?pt.upsertOne((0,c.__assign)((0,c.__assign)({},n),{progressState:lt.GitActionInProgress}),t):pt.upsertOne({workspaceId:i.workspaceId,activeFlowName:Pt.Commit,progressState:lt.GitActionInProgress,activeFlowState:ot.CommitFlowInProgress,isIntermidiateStep:!1},t)}),(0,r.on)(fe,function(t,e){var n=t.entities[e.gitCommitStateWithResponse.workspaceId];return n?pt.upsertOne((0,c.__assign)((0,c.__assign)({},n),{progressState:lt.GitActionDone}),t):t}),(0,r.on)(me,he,function(t,e){var n=t.entities[e.gitCommitState.workspaceId];return n?pt.upsertOne((0,c.__assign)((0,c.__assign)({},n),{activeFlowState:ot.None,progressState:lt.None,isIntermidiateStep:!1}),t):t}),(0,r.on)(ue,function(t,e){return pt.upsertOne({workspaceId:e.gitUndoState.workspaceId,activeFlowName:Pt.Undo,activeFlowState:ot.UndoFlowInProgress,isIntermidiateStep:!1,progressState:lt.GitActionStart},t)}),(0,r.on)(re,function(t,e){var i=e.gitUndoState,n=t.entities[i.workspaceId];return n&&pe(Pt.Undo,n)?pt.upsertOne((0,c.__assign)((0,c.__assign)({},n),{progressState:lt.GitActionInProgress}),t):pt.upsertOne({workspaceId:i.workspaceId,activeFlowName:Pt.Undo,progressState:lt.GitActionInProgress,activeFlowState:ot.UndoFlowInProgress,isIntermidiateStep:!1},t)}),(0,r.on)(De,function(t,e){var n=t.entities[e.gitUndoStateWithResponse.workspaceId];return n?pt.upsertOne((0,c.__assign)((0,c.__assign)({},n),{progressState:lt.GitActionDone}),t):t}),(0,r.on)(Oe,we,function(t,e){var n=t.entities[e.gitUndoState.workspaceId];return n?pt.upsertOne((0,c.__assign)((0,c.__assign)({},n),{activeFlowState:ot.None,progressState:lt.None,isIntermidiateStep:!1}),t):t}),(0,r.on)(Kt,function(t,e){return pt.upsertOne({workspaceId:e.gitSwitchBranchState.workspaceId,activeFlowName:Pt.SwitchBranch,activeFlowState:ot.SwitchBranchFlowInProgress,isIntermidiateStep:!1,progressState:lt.GitActionStart},t)}),(0,r.on)(Y,function(t,e){var i=e.gitSwitchBranchState,n=t.entities[i.workspaceId];return n&&pe(Pt.SwitchBranch,n)?pt.upsertOne((0,c.__assign)((0,c.__assign)({},n),{progressState:lt.GitActionInProgress}),t):pt.upsertOne({workspaceId:i.workspaceId,activeFlowName:Pt.SwitchBranch,progressState:lt.GitActionInProgress,activeFlowState:ot.SwitchBranchFlowInProgress,isIntermidiateStep:!1},t)}),(0,r.on)(Rt,function(t,e){var n=t.entities[e.gitSwitchBranchState.workspaceId];return n?pt.upsertOne((0,c.__assign)((0,c.__assign)({},n),{progressState:lt.GitActionDone}),t):t}),(0,r.on)(at,j,function(t,e){var n=t.entities[e.gitSwitchBranchState.workspaceId];return n?pt.upsertOne((0,c.__assign)((0,c.__assign)({},n),{activeFlowState:ot.None,progressState:lt.None,isIntermidiateStep:!1}),t):t}),(0,r.on)(ee,function(t,e){return pt.upsertOne({workspaceId:e.gitUpdateState.workspaceId,activeFlowName:Pt.Update,activeFlowState:e.isInitialSync?ot.UpdateInitialFlowInProgress:ot.UpdateFlowInProgress,isIntermidiateStep:!1,progressState:lt.GitActionStart},t)}),(0,r.on)(ie,function(t,e){var i=e.gitUpdateState,n=t.entities[i.workspaceId];return n&&pe(Pt.Update,n)?pt.upsertOne((0,c.__assign)((0,c.__assign)({},n),{progressState:lt.GitActionInProgress}),t):pt.upsertOne({workspaceId:i.workspaceId,activeFlowName:Pt.Update,progressState:lt.GitActionInProgress,activeFlowState:ot.UpdateFlowInProgress,isIntermidiateStep:!1},t)}),(0,r.on)(Se,function(t,e){var n=t.entities[e.gitUpdateStateWithResponse.workspaceId];return n?pt.upsertOne((0,c.__assign)((0,c.__assign)({},n),{progressState:lt.GitActionDone}),t):t}),(0,r.on)(ye,Ie,function(t,e){var n=t.entities[e.gitUpdateState.workspaceId];return n?pt.upsertOne((0,c.__assign)((0,c.__assign)({},n),{activeFlowState:ot.None,progressState:lt.None,isIntermidiateStep:!1}),t):t}),(0,r.on)(B,G,o,function(t,e){var u=t.entities[e.workspaceId];return e.isTriggeredByGitAction&&u?.progressState===lt.GitActionDone?pt.upsertOne((0,c.__assign)((0,c.__assign)({},u),{isIntermidiateStep:!0,progressState:lt.GitSyncStart}),t):t}),(0,r.on)(k,w,R,function(t,e){var n=t.entities[e.gitStatus.workspaceId];return n?.isIntermidiateStep&&n?.progressState===lt.GitSyncStart?pt.upsertOne((0,c.__assign)((0,c.__assign)({},n),{activeFlowState:ot.None,progressState:lt.GitSyncDone,isIntermidiateStep:!1}),t):t}),(0,r.on)(A,_,q,function(t,e){var n=t.entities[e.workspaceId];return n?.isIntermidiateStep?pt.upsertOne((0,c.__assign)((0,c.__assign)({},n),{progressState:lt.None,isIntermidiateStep:!1}),t):t}),(0,r.on)(rt,function(t,e){return pt.upsertOne({workspaceId:e.gitCheckoutBranchState.workspaceId,activeFlowName:Pt.CheckoutBranch,activeFlowState:ot.CheckoutBranchFlowInProgress,isIntermidiateStep:!1,progressState:lt.GitActionStart},t)}),(0,r.on)(Et,function(t,e){var n=t.entities[e.gitCheckoutBranchState.workspaceId];return n?pt.upsertOne((0,c.__assign)((0,c.__assign)({},n),{progressState:lt.GitActionDone}),t):t}),(0,r.on)(kt,function(t,e){var n=t.entities[e.workspaceId];return n?pt.upsertOne((0,c.__assign)((0,c.__assign)({},n),{activeFlowState:ot.None,progressState:lt.None,isIntermidiateStep:!1}),t):t}));function pe(t,e){return e.activeFlowName===t&&(e.progressState===lt.GitActionStart||e.progressState===lt.GitActionInProgress)}var $t=(0,U.H)({selectId:function(e){return e.workspaceId}}),Pe=(0,c.__assign)({},$t.getInitialState()),cr=(0,r.Lq)(Pe,(0,r.on)(Kt,function(t,e){return $t.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitSwitchBranchState),{response:void 0,callState:vt.InProgress}),t)}),(0,r.on)(Y,function(t,e){return $t.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitSwitchBranchState),{callState:vt.InProgress}),t)}),(0,r.on)(Rt,function(t,e){var i=e.gitSwitchBranchState;return $t.upsertOne((0,c.__assign)((0,c.__assign)({},i),{callState:vt.Completed,response:i.response,notificationId:void 0}),t)}),(0,r.on)(j,function(t,e){return $t.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitSwitchBranchState),{callState:vt.Completed,notificationId:void 0}),t)}),(0,r.on)(at,function(t,e){var n=e.error;return $t.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitSwitchBranchState),{callState:n,notificationId:void 0}),t)}),(0,r.on)(s,function(t,e){return $t.removeOne(e.workspaceId,t)})),Je=(0,r.PH)("[GitSessionStorage] select Git provider type",(0,r.Ky)()),Xe=(0,r.PH)("[GitSessionStorage] select datasource",(0,r.Ky)()),Ze=(0,r.PH)("[GitSessionStorage] select temp datasource",(0,r.Ky)()),Ye=(0,r.PH)("[GitSessionStorage] set datasource url",(0,r.Ky)()),qe=(0,r.PH)("[GitSessionStorage] reset datasource url",(0,r.Ky)()),ti=(0,r.PH)("[GitSessionStorage] select organization",(0,r.Ky)()),ei=(0,r.PH)("[GitSessionStorage] select repository",(0,r.Ky)()),ii=(0,r.PH)("[GitSessionStorage] select branch",(0,r.Ky)()),ri=(0,r.PH)("[GitSessionStorage] select directory",(0,r.Ky)()),ni=(0,r.PH)("[GitSessionStorage] select userAccount",(0,r.Ky)()),oi=(0,r.PH)("[GitSessionStorage] configure credentials",(0,r.Ky)()),ai=(0,r.PH)("[GitSessionStorage] delete credentials",(0,r.Ky)()),ci=(0,r.PH)("[GitSessionStorage] select workspace capacity",(0,r.Ky)()),It=(0,U.H)({selectId:function(e){return e.workspaceId}}),Me=(0,c.__assign)({},It.getInitialState()),lr=(0,r.Lq)(Me,(0,r.on)(Je,function(t,e){return It.upsertOne({workspaceId:e.workspaceId,selectedGitProviderType:e.gitProviderType},t)}),(0,r.on)(Xe,function(t,e){var i=e.workspaceId,n=e.datasourceOID,u=t.entities[i];return u&&u.selectedDatasourceOID===n?t:It.upsertOne({workspaceId:i,selectedDatasourceOID:n},t)}),(0,r.on)(Ze,function(t,e){return It.upsertOne({workspaceId:e.workspaceId,selectedTempDatasourceOID:e.datasourceOID},t)}),(0,r.on)(ti,function(t,e){var n=e.organization;return It.upsertOne({workspaceId:e.workspaceId,selectedOrganization:n?{name:n,setByDatasource:!1}:void 0},t)}),(0,r.on)(ei,function(t,e){var n=e.repository;return It.upsertOne({workspaceId:e.workspaceId,selectedRepository:n?{name:n,setByDatasource:!1}:void 0},t)}),(0,r.on)(ii,function(t,e){return It.upsertOne({workspaceId:e.workspaceId,selectedBranch:e.branch},t)}),(0,r.on)(ri,function(t,e){return It.upsertOne({workspaceId:e.workspaceId,selectedDirectory:e.directory},t)}),(0,r.on)(Ye,function(t,e){return It.upsertOne({workspaceId:e.workspaceId,selectedOrganization:{name:e.organization,setByDatasource:!0},selectedRepository:{name:e.repository,setByDatasource:!0}},t)}),(0,r.on)(qe,function(t,e){return It.upsertOne({workspaceId:e.workspaceId,selectedOrganization:void 0,selectedRepository:void 0},t)}),(0,r.on)(ni,function(t,e){return It.upsertOne({workspaceId:e.workspaceId,selectedUserAccount:e.userAccount},t)}),(0,r.on)(oi,function(t,e){return It.upsertOne({workspaceId:e.workspaceId,isConfigured:!0},t)}),(0,r.on)(ai,function(t,e){return It.updateOne({id:e.workspaceId,changes:{selectedUserAccount:void 0,isConfigured:!1}},t)}),(0,r.on)(M,function(t,e){var i,n,u,v=e.gitConnection;return It.upsertOne({workspaceId:v.workspaceId,selectedGitProviderType:null===(i=v.gitConnectionDetails)||void 0===i?void 0:i.gitProviderType,selectedDatasourceOID:null===(n=v.gitConnectionDetails)||void 0===n?void 0:n.datasourceOID,isConfigured:void 0!==(null===(u=v.gitConnectionDetails)||void 0===u?void 0:u.datasourceOID)},t)}),(0,r.on)(h,function(t,e){return It.updateOne({id:e.workspaceId,changes:{selectedBranch:void 0,selectedDatasourceOID:void 0,selectedTempDatasourceOID:void 0,selectedGitProviderType:void 0,selectedDirectory:void 0,selectedOrganization:void 0,selectedRepository:void 0,selectedUserAccount:void 0,isConfigured:void 0}},t)}),(0,r.on)(ci,function(t,e){return It.upsertOne({workspaceId:e.workspaceId,isWorkspaceOnCapaity:e.isWorkspaceOnCapacity},t)})),jt=(0,U.H)({selectId:function(e){return e.workspaceId}}),ke=(0,c.__assign)({},jt.getInitialState()),ur=(0,r.Lq)(ke,(0,r.on)(mt,function(t,e){return jt.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitBranchOutState),{response:void 0,callState:H.InProgress}),t)}),(0,r.on)(At,function(t,e){var i=e.gitBranchOutState;return jt.upsertOne((0,c.__assign)((0,c.__assign)({},i),{callState:H.InProgress,response:i.response}),t)}),(0,r.on)(Dt,function(t,e){var i=e.gitBranchOutState;return jt.upsertOne((0,c.__assign)((0,c.__assign)({},i),{callState:H.InProgress,response:i.response}),t)}),(0,r.on)(le,function(t,e){var i=e.gitBranchOutState;return jt.upsertOne((0,c.__assign)((0,c.__assign)({},i),{callState:H.Completed,response:i.response}),t)}),(0,r.on)(se,function(t,e){var i=e.gitBranchOutState;return jt.upsertOne((0,c.__assign)((0,c.__assign)({},i),{callState:H.Completed,response:i.response}),t)}),(0,r.on)(Ft,function(t,e){var n=e.error;return jt.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitBranchOutState),{callState:n}),t)}),(0,r.on)(Wi,function(t,e){return jt.removeOne(e.gitBranchOutState.workspaceId,t)})),_e=(0,r.PH)("[GitDatasources] Load Datasources",(0,r.Ky)()),si=(0,r.PH)("[GitDatasources] Load Datasources Success",(0,r.Ky)()),Ae=(0,r.PH)("[GitDatasources] Load Datasources Failure",(0,r.Ky)()),Ue=(0,r.PH)("[GitDatasources] Create Datasource",(0,r.Ky)()),_r=(0,r.PH)("[GitDatasources] Create Datasource Success",(0,r.Ky)()),Ne=(0,r.PH)("[GitDatasources] Create Datasource Failure",(0,r.Ky)()),Xt=(0,U.H)({selectId:function(e){return e.workspaceId}}),be=(0,c.__assign)({},Xt.getInitialState()),vr=(0,r.Lq)(be,(0,r.on)(_e,function(t,e){return Xt.upsertOne({workspaceId:e.gitDatasourceRequest.workspaceId,callState:gt.InProgress},t)}),(0,r.on)(si,function(t,e){return Xt.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitDatasourcesState),{callState:gt.Completed}),t)}),(0,r.on)(Ae,Ne,function(t,e){return Xt.updateOne({id:e.workspaceId,changes:{callState:e.error}},t)}),(0,r.on)(Ue,function(t,e){return Xt.upsertOne({workspaceId:e.request.workspaceId,callState:gt.InProgress},t)})),li=(0,r.PH)("[GitRepairItems] Repair Items in Git",(0,r.Ky)()),fr=(0,r.PH)("[GitRepairItems] Repair Items in Git inProgress",(0,r.Ky)()),di=(0,r.PH)("[GitRepairItems] Repair Items in Git success",(0,r.Ky)()),ui=(0,r.PH)("[GitRepairItems] Repair Items in Git failure ",(0,r.Ky)()),ne=(0,U.H)({selectId:function(e){return e.workspaceId}}),Ke=(0,c.__assign)({},ne.getInitialState()),hr=(0,r.Lq)(Ke,(0,r.on)(li,fr,function(t,e){return ne.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitRepairState),{callState:ht.InProgress}),t)}),(0,r.on)(di,function(t,e){var i=e.gitRepairStateWithResponse;return ne.upsertOne((0,c.__assign)((0,c.__assign)({},i),{response:i.response,callState:ht.Completed}),t)}),(0,r.on)(ui,function(t,e){var n=e.error;return ne.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitRepairState),{callState:n,notificationId:void 0}),t)})),Gr={gitStatus:function(t,e){return d(t,e)},gitConnection:function(t,e){return $i(t,e)},gitCommit:function(t,e){return Ji(t,e)},gitUpdate:function(t,e){return Zi(t,e)},gitInitialization:function(t,e){return qi(t,e)},gitSync:function(t,e){return er(t,e)},gitUndo:function(t,e){return rr(t,e)},gitProgressIndicator:function(t,e){return or(t,e)},gitSwitchBranch:function(t,e){return cr(t,e)},gitSessionStorage:function(t,e){return lr(t,e)},gitBranchOut:function(t,e){return ur(t,e)},gitDatasources:function(t,e){return vr(t,e)},gitRepair:function(t,e){return hr(t,e)}},Mt=(0,r.ZF)("git"),dt=a(11547),z=a(14172),it=a(81905),Ct=a(59822),Zt=a(67758),Nt=a(65232),Sr=a(12315),yr=function(t){return t[t.SingleCall=0]="SingleCall",t[t.SeparateCalls=1]="SeparateCalls",t}({});function Ir(t){var e=Sr.RG,i=e.includes(t);if(i)return t;if(!i){var n=e.findIndex(function(u){return t.toLowerCase()===u.toLowerCase()});if(n>=0)return e[n]}throw Error("Invalid ArtifactType: "+t)}function Cr(t,e){return{artifact:(0,c.__assign)((0,c.__assign)({},t.artifact),{artifactType:e.getFrontendArtifactType(t.artifact.artifactType)}),remoteChange:{displayName:t.artifact.displayName,changeType:t.gitChangeType},syncStatus:0}}function _i(t,e){var i=e.getFrontendArtifactType(t.artifact.artifactType);return{artifact:(0,c.__assign)((0,c.__assign)({},t.artifact),{artifactType:Ir(i)}),workspaceChange:{displayName:t.artifact.displayName,changeType:t.gitChangeType},syncStatus:0}}function xe(t,e,i,n){return{workspaceId:t,head:e,gitChanges:i,incomingChangesCommitHash:n||void 0}}var p=a(50423),wr=function(){function t(e,i,n,u){var v=this;this.actions$=e,this.gitStatusClient=i,this.gitErrorService=n,this.extensionManifestService=u,this.loadUncommittedChanges$=(0,l.GW)(function(){return v.actions$.pipe((0,l.l4)(G),(0,z.U)(function(C){return C.workspaceId}),(0,it.w)(function(C){return v.gitStatusClient.getUncommittedChanges(C).pipe((0,z.U)(function(E){return v.updateGitStatusWithUncommittedChanges(C,E)}),(0,z.U)(function(E){return k({gitStatus:E})}),(0,Ct.K)(function(E){var I=v.gitErrorService.makeGitErrorFromHttpResponse("Git_Status_Failed",E);return(0,dt.of)(A({workspaceId:C,error:I}))}))}))}),this.loadIncomingChanges$=(0,l.GW)(function(){return v.actions$.pipe((0,l.l4)(B),(0,z.U)(function(C){return C.workspaceId}),(0,it.w)(function(C){return v.gitStatusClient.getIncomingChanges(C).pipe((0,z.U)(function(E){return v.updateGitStatusWithIncomingChanges(C,E)}),(0,z.U)(function(E){return w({gitStatus:E})}),(0,Ct.K)(function(E){var I=v.gitErrorService.makeGitErrorFromHttpResponse("Git_Status_Failed",E);return(0,dt.of)(_({workspaceId:C,error:I}))}))}))}),this.loadGitStatus$=(0,l.GW)(function(){return v.actions$.pipe((0,l.l4)(o),(0,z.U)(function(C){return C.workspaceId}),(0,it.w)(function(C){return v.gitStatusClient.getGitStatus(C).pipe((0,z.U)(function(E){return v.gitStatusContractToModel(C,E)}),(0,z.U)(function(E){return R({gitStatus:E})}),(0,Ct.K)(function(E){var I=v.gitErrorService.makeGitErrorFromHttpResponse("Git_Status_Failed",E);return(0,dt.of)(q({workspaceId:C,error:I}))}))}))})}return t.prototype.updateGitStatusWithIncomingChanges=function(e,i){var n=function(t,e){for(var i=[],n=0,u=t.changes;n<u.length;n++)i.push(Cr(u[n],e));return i}(i,this.extensionManifestService);return xe(e,i.head,n,i.targetCommit.commitId)},t.prototype.updateGitStatusWithUncommittedChanges=function(e,i){var n=function(t,e){for(var i=[],n=0,u=t.changes;n<u.length;n++)i.push(_i(u[n],e));return i}(i,this.extensionManifestService);return xe(e,i.head,n)},t.prototype.gitStatusContractToModel=function(e,i){var n,u=function(t,e){var i=[];if(null==t.changes)return i;for(var n=0,u=t.changes;n<u.length;n++){var v=u[n],C=v;C.artifact.artifactType=e.getFrontendArtifactType(v.artifact.artifactType),i.push(C)}return i}(i,this.extensionManifestService);return xe(e,i.head,u,null===(n=i.targetCommit)||void 0===n?void 0:n.commitId)},t.\u0275fac=function(i){return new(i||t)(p.\u0275\u0275inject(l.eX),p.\u0275\u0275inject(K.mK),p.\u0275\u0275inject(Nt.jR),p.\u0275\u0275inject(Zt.vC))},t.\u0275prov=p.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t}(),vi=a(37272),zt=a(12385),oe=a(94771),gi=(0,r.P1)(Mt,function(t){return t?.gitConnection||ge}),fi=wt.getSelectors(),Or=fi.selectAll,Br=fi.selectEntities,hi=((0,r.P1)(gi,function(t){return Or(t)}),(0,r.P1)(gi,function(t){return Br(t)})),Re=function(e){return(0,r.P1)(hi,function(i){return i[e]})};function ae(t,e,i){return i?[o({workspaceId:t,isTriggeredByGitAction:e})]:[B({workspaceId:t,isTriggeredByGitAction:e}),G({workspaceId:t,isTriggeredByGitAction:e})]}var Fr=function(){function t(e,i,n,u,v,C,E){var I=this;this.actions$=e,this.gitConnectionDetailsClient=i,this.gitErrorService=n,this.gitNotificationService=u,this.extensionManifestService=v,this.store=C,this.featureSwitchService=E,this.ensureGitConnection$=(0,l.GW)(function(){return I.actions$.pipe((0,l.l4)(X),(0,z.U)(function(T){return T.workspaceId}),(0,l.IC)(function(T){return I.store.select(Re(T))}),(0,it.w)(function(T){var O=T[0],F=T[1];return F?.gitConnectionDetails&&F.callState===L.Completed||!F?.gitConnectionDetails&&(0,g.pb)(F?.callState)?vi.E:(0,dt.of)(D({workspaceId:O}))}))}),this.loadGitConnection$=(0,l.GW)(function(){return I.actions$.pipe((0,l.l4)(D),(0,z.U)(function(T){return T.workspaceId}),(0,it.w)(function(T){return I.gitConnectionDetailsClient.getGitConnectionDetails(T).pipe((0,z.U)(function(O){return I.gitConnectionContractToModel(T,O)}),(0,z.U)(function(O){return M({gitConnection:O})}),(0,Ct.K)(function(O){var F=I.gitErrorService.makeGitErrorFromHttpResponse("Git_Connect_Failed",O);return(0,dt.of)($({workspaceId:T,error:F}))}))}))}),this.saveGitConnection$=(0,l.GW)(function(){return I.actions$.pipe((0,l.l4)(et),(0,z.U)(function(T){return T.gitConnection}),(0,it.w)(function(T){if(!T.gitConnectionDetails){var O=I.gitErrorService.makeClientSideGitError("Git_Invalid_Connection_Details");return I.gitNotificationService.showErrorNotification(O,"Trident_Git_Error_Git_Invalid_Connection_Details_Title"),(0,dt.of)(St({gitConnection:T,error:O}))}var F=I.gitNotificationService.showLoadingNotification("Trident_Git_Toast_Connect_Loading");return I.gitConnectionDetailsClient.setGitConnectionDetails(T.workspaceId,T.gitConnectionDetails).pipe((0,z.U)(function(){return I.gitNotificationService.showSuccessNotification("Trident_Git_Toast_Connect_Success",F),Z({gitConnection:T})}),(0,Ct.K)(function(N){var J=I.gitErrorService.makeGitErrorFromHttpResponse("Git_Connect_Failed",N);return(0,g.yG)(J)?I.gitNotificationService.hideCurrentNotification():I.gitNotificationService.showErrorNotification(J,"Trident_Git_Error_Git_Invalid_Connection_Details_Title",F),(0,dt.of)(St({gitConnection:T,error:J}))}))}))}),this.gitCheckoutBranch$=(0,l.GW)(function(){return I.actions$.pipe((0,l.l4)(rt),(0,z.U)(function(T){return T.gitCheckoutBranchState}),(0,it.w)(function(T){return I.gitConnectionDetailsClient.checkoutBranch(T.workspaceId,T.request).pipe((0,it.w)(function(){var O;return I.gitNotificationService.showSuccessNotification("Trident_Git_Toast_CheckoutBranch_Success"),(0,c.__spreadArray)([Et({gitCheckoutBranchState:T}),bt({workspaceId:T.workspaceId})],ae(T.workspaceId,!0,null!==(O=I.featureSwitchService.featureSwitches.tridentGitStatusAPI)&&void 0!==O&&O),!0)}),(0,Ct.K)(function(O){var F=I.gitErrorService.makeGitErrorFromHttpResponse("Git_Checkout_Branch_Failed",O);return(0,g.xT)(F,"Git_BranchNameAlreadyExists")||I.gitNotificationService.showErrorNotification(F,"Trident_Git_Error_Git_Checkout_Branch_Failed_Title"),(0,dt.of)(kt({workspaceId:T.workspaceId,error:F}))}))}))}),this.deleteGitConnection$=(0,l.GW)(function(){return I.actions$.pipe((0,l.l4)(Ot),(0,z.U)(function(T){return T.workspaceId}),(0,it.w)(function(T){var O=I.gitNotificationService.showLoadingNotification("Trident_Git_Toast_Disconnect_Loading_Title","Trident_Git_Toast_Disconnect_Loading_Message");return I.gitConnectionDetailsClient.deleteGitConnectionDetails(T).pipe((0,it.w)(function(){return I.gitNotificationService.showSuccessNotification("Trident_Git_Toast_Disconnect_Success",O),[h({workspaceId:T}),s({workspaceId:T}),Tt({workspaceId:T}),P({workspaceId:T})]}),(0,Ct.K)(function(F){var N=I.gitErrorService.makeGitErrorFromHttpResponse("Git_Connect_Failed",F);return I.gitNotificationService.showErrorNotification(N,"Trident_Git_Error_Git_Disconnect_Failed_Title",O),(0,dt.of)(x({workspaceId:T,error:N}))}))}))})}return t.prototype.gitConnectionContractToModel=function(e,i){var J=i.datasourceOID;return{workspaceId:e,gitConnectionDetails:{gitProviderType:i.gitProviderType,organizationName:i.organizationName,projectName:i.projectName,repositoryName:i.repositoryName,branchName:i.branchName,rootDirectory:i.rootDirectory,head:i.head,isInitialized:!!i.isInitialized,lastSyncTime:i.lastSyncTime,supportedArtifactTypeNames:this.ConvertArtifactNamesBackendToFrontEnd(i.supportedArtifactTypeNames),datasourceOID:J}}},t.prototype.ConvertArtifactNamesBackendToFrontEnd=function(e){var i=this;if(e)return e.map(function(n){return i.extensionManifestService.getFrontendArtifactType(n)})},t.\u0275fac=function(i){return new(i||t)(p.\u0275\u0275inject(l.eX),p.\u0275\u0275inject(K.i),p.\u0275\u0275inject(Nt.jR),p.\u0275\u0275inject(zt.mn),p.\u0275\u0275inject(Zt.vC),p.\u0275\u0275inject(r.yh),p.\u0275\u0275inject(oe.V$))},t.\u0275prov=p.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t}(),Pr=a(59017),ce=a(59973),Vt=a(48787),mi=(0,r.P1)(Mt,function(t){return t?.gitStatus||W}),Gi=ct.getSelectors(),Mr=Gi.selectAll,kr=Gi.selectEntities,Si=((0,r.P1)(mi,function(t){return Mr(t)}),(0,r.P1)(mi,function(t){return kr(t)})),Yt=function(e){return(0,r.P1)(Si,function(i){return i[e]})},je=function(){function t(e){this.store=e}return t.prototype.getGitStatus=function(e){return this.store.select(Yt(e))},t.prototype.loadGitStatus=function(e){return this.store.dispatch(o({workspaceId:e})),this.getGitStatus(e)},t.prototype.getStatusLoadingState=function(e){return this.store.select(Yt(e)).pipe((0,z.U)(function(i){var n;return null!==(n=i?.statusCallState)&&void 0!==n?n:Q.Initial}))},t.prototype.getAllChanges=function(e){return this.getGitStatus(e).pipe((0,z.U)(function(i){var n;return null!==(n=i?.gitChanges)&&void 0!==n?n:[]}))},t.prototype.getUncommittedChanges=function(e){return this.getGitStatus(e).pipe((0,z.U)(function(i){var n,u;return null!==(u=null===(n=i?.gitChanges)||void 0===n?void 0:n.filter(function(v){return v.workspaceChange}))&&void 0!==u?u:[]}))},t.prototype.loadUncommittedChanges=function(e){return this.store.dispatch(G({workspaceId:e})),this.getUncommittedChanges(e)},t.prototype.getUncommittedChangesLoadingState=function(e){return this.store.select(Yt(e)).pipe((0,z.U)(function(i){return i&&i.uncommittedChangesCallState||Q.Initial}))},t.prototype.getUncommittedArtifactsSelectionState=function(e){return this.store.select(Yt(e)).pipe((0,z.U)(function(i){return i&&i.uncommittedChangesArtifactSelectionState||{selectedArtifacts:[]}}))},t.prototype.setChangesArtifactSelection=function(e,i,n,u){this.store.dispatch(V({workspaceId:e,artifactId:i,logicalId:n,isChecked:u}))},t.prototype.clearChangesArtifactSelection=function(e){this.store.dispatch(b({workspaceId:e}))},t.prototype.getIncomingChanges=function(e){return this.getGitStatus(e).pipe((0,z.U)(function(i){var n,u;return null!==(u=null===(n=i?.gitChanges)||void 0===n?void 0:n.filter(function(v){return v.remoteChange}))&&void 0!==u?u:[]}))},t.prototype.loadIncomingChanges=function(e){return this.store.dispatch(B({workspaceId:e})),this.getIncomingChanges(e)},t.prototype.getIncomingChangesLoadingState=function(e){return this.store.select(Yt(e)).pipe((0,z.U)(function(i){return i&&i.incomingChangesCallState||Q.Initial}))},t.prototype.getIncomingChangesCommitId=function(e){return this.store.select(Yt(e)).pipe((0,z.U)(function(i){return i?.incomingChangesCommitHash}))},t.\u0275fac=function(i){return new(i||t)(p.\u0275\u0275inject(r.yh))},t.\u0275prov=p.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),yi=(0,r.P1)(Mt,function(t){return t?.gitCommit||Ge}),Ii=Lt.getSelectors(),Ur=Ii.selectAll,Nr=Ii.selectEntities,br=((0,r.P1)(yi,function(t){return Ur(t)}),(0,r.P1)(yi,function(t){return Nr(t)})),xr=function(){function t(e,i,n,u,v,C,E,I){var T=this;this.actions$=e,this.gitCommitClient=i,this.gitErrorService=n,this.gitNotificationService=u,this.extensionManifestService=v,this.gitStatusFacade=C,this.store=E,this.featureSwitchService=I,this.commitToGit$=(0,l.GW)(function(){return T.actions$.pipe((0,l.l4)(de),(0,z.U)(function(O){var F=O.gitCommitState,N=O.isInitialSync,J=T.gitNotificationService.showLoadingNotification(N?"Trident_Git_Toast_Initial_Commit_Loading":"Trident_Git_Toast_Commit_Loading_Title",N?void 0:"Trident_Git_Toast_Commit_Loading_Message");return(0,c.__assign)((0,c.__assign)({},F),{isInitialSync:N,notificationId:J})}),(0,it.w)(function(O){return(0,Pr.aj)([T.gitCommitClient.commitArtifacts(O.workspaceId,T.fromGitCommitContractToGitCommitRequest(O.request))]).pipe((0,it.w)(function(F){var N=F[0],J=(0,c.__assign)((0,c.__assign)({},O),{response:{almAction:N.almOperation,responseDate:N.responseDate}});return[te({gitCommitState:J})]}),(0,Ct.K)(function(F){var N=T.gitErrorService.makeGitErrorFromHttpResponse(" Git_Commit_Invalid_Request",F);return O?.notificationId&&(T.gitNotificationService.showErrorNotification(N,"Trident_Git_Error_Unable_To_Commit_Title",O.notificationId),T.gitErrorService.showErrorHandlingDialog(N)),(0,dt.of)(me({gitCommitState:O,error:N}))}))}))}),this.getLatestGitAlmOperationSuccess$=(0,l.GW)(function(){return T.actions$.pipe((0,l.l4)(Bt),(0,z.U)(function(O){return O.gitSyncState}),(0,ce.h)(function(O){return T.isLatestOpValid(O)}),(0,it.w)(function(O){return T.store.select(function(e){return(0,r.P1)(br,function(i){return i[e]})}(O.workspaceId)).pipe((0,Vt.q)(1),(0,it.w)(function(F){return T.getActions(O,F)}))}))})}return t.prototype.isLatestOpValid=function(e){return!!e?.isValid&&e.gitOperationType===g.u9.Commit},t.prototype.getActions=function(e,i){var n,u=i&&i.workspaceId===e.workspaceId?{workspaceId:i.workspaceId,request:i.request,response:i?.response,isInitialSync:i?.isInitialSync,notificationId:i?.notificationId}:{workspaceId:e.workspaceId,request:void 0};switch(e.gitOperationStatus){case g.wM.Successful:return i?.notificationId&&this.gitNotificationService.showSuccessNotification(i?.isInitialSync?"Trident_Git_Toast_Initial_Action_Success":"Trident_Git_Toast_Commit_Success",i.notificationId),this.gitStatusFacade.clearChangesArtifactSelection(u.workspaceId),(0,c.__spreadArray)((0,c.__spreadArray)([fe({gitCommitStateWithResponse:u})],ae(u.workspaceId,!0,null!==(n=this.featureSwitchService.featureSwitches.tridentGitStatusAPI)&&void 0!==n&&n),!0),[Tt({workspaceId:u.workspaceId})],!1);case g.wM.InProgress:return[te({gitCommitState:u})];case g.wM.Failed:var v=this.gitErrorService.handleAlmGitError("AlmOperationFailed_CommitToGit",e);return i?.notificationId&&(this.gitNotificationService.showErrorNotification(v,"Trident_Git_Error_Unable_To_Commit_Title",i.notificationId),this.gitErrorService.showErrorHandlingDialog(v)),[he({gitCommitState:u}),Tt({workspaceId:u.workspaceId})]}return[te({gitCommitState:u})]},t.prototype.fromGitCommitContractToGitCommitRequest=function(e){var i=this;return{artifacts:e.artifacts.map(function(u){return i.fromGitArtifactChangeToArtifactSelector(u)}),workspaceHead:e.workspaceHead,comment:e.comment}},t.prototype.fromGitArtifactChangeToArtifactSelector=function(e){var i=e.artifact;return{artifactType:this.extensionManifestService.getBackendArtifactType(i.artifactType),etag:i.etag,objectId:i.objectId,logicalId:i.logicalId,changeType:e.workspaceChange.changeType}},t.\u0275fac=function(i){return new(i||t)(p.\u0275\u0275inject(l.eX),p.\u0275\u0275inject(K.ce),p.\u0275\u0275inject(Nt.jR),p.\u0275\u0275inject(zt.mn),p.\u0275\u0275inject(Zt.vC),p.\u0275\u0275inject(je),p.\u0275\u0275inject(r.yh),p.\u0275\u0275inject(oe.V$))},t.\u0275prov=p.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t}(),Rr=a(32980),Ci=(a(17177),a(94228),a(14977),a(95228),a(209)),jr=a(41838),qt=function(t){return t[t.CommitToGit=100]="CommitToGit",t[t.UpdateFromGit=101]="UpdateFromGit",t[t.InitializeWorkspaceGitConnection=102]="InitializeWorkspaceGitConnection",t[t.Undo=103]="Undo",t[t.CheckoutBranch=104]="CheckoutBranch",t[t.SwitchBranch=105]="SwitchBranch",t}({}),ze=function(t){return t[t.NonFinalBase=0]="NonFinalBase",t[t.FinalBase=1001]="FinalBase",t[t.FinalSuccessBase=1001]="FinalSuccessBase",t[t.FinalErrorBase=2001]="FinalErrorBase",t[t.Created=0]="Created",t[t.Approval_Pending=10]="Approval_Pending",t[t.Execution_Pending=20]="Execution_Pending",t[t.Executing_Running=30]="Executing_Running",t[t.Succeeded=1001]="Succeeded",t[t.SucceededWithWarning_RefreshSkipped=1011]="SucceededWithWarning_RefreshSkipped",t[t.SucceededWithWarning_MissingCredentials=1012]="SucceededWithWarning_MissingCredentials",t[t.Failed_GenericError=2001]="Failed_GenericError",t[t.Failed_GenericDryRunError=2006]="Failed_GenericDryRunError",t[t.Approval_Abandoned=2011]="Approval_Abandoned",t[t.Approval_Rejected=2012]="Approval_Rejected",t[t.Execution_Cancelled=2021]="Execution_Cancelled",t[t.Execution_UnsupportedOperationType=2031]="Execution_UnsupportedOperationType",t[t.Execution_UnsupportedStepType=2032]="Execution_UnsupportedStepType",t[t.Execution_NoSteps=2033]="Execution_NoSteps",t}({}),zr=function(t){return t[t.SingleOption=0]="SingleOption",t[t.None=1]="None",t}({}),ve=a(77476),Lr=a(95825),Hr=a(74913),Wr=a(64266),$r=a(94243),Vr=a(10965),Qr=a(37350),Jr=a(89330),Xr=a(55334);function Zr(t,e){1&t&&p.\u0275\u0275element(0,"tri-svg-icon",16)}function Yr(t,e){if(1&t&&(p.\u0275\u0275elementStart(0,"tri-pivot-item",11)(1,"span",12),p.\u0275\u0275template(2,Zr,1,0,"tri-svg-icon",13),p.\u0275\u0275elementEnd(),p.\u0275\u0275element(3,"tri-svg-icon",14),p.\u0275\u0275elementStart(4,"span",15),p.\u0275\u0275text(5),p.\u0275\u0275elementEnd()()),2&t){var u,v,i=e.$implicit,n=p.\u0275\u0275nextContext();p.\u0275\u0275property("value",i),p.\u0275\u0275advance(2),p.\u0275\u0275property("ngIf",n.isArtifactOptionSelected(i)),p.\u0275\u0275advance(1),p.\u0275\u0275property("sprite",null==(u=n.localGetArtifactIconFromDict(n.getArtifactType(i)))?null:u.sprite)("name",null==(v=n.localGetArtifactIconFromDict(n.getArtifactType(i)))?null:v.name),p.\u0275\u0275advance(1),p.\u0275\u0275attribute("aria-label",null==i.failedArtifactMetadata?null:i.failedArtifactMetadata.artifactDisplayName),p.\u0275\u0275advance(1),p.\u0275\u0275textInterpolate1(" ",null==i.failedArtifactMetadata?null:i.failedArtifactMetadata.artifactDisplayName," ")}}function qr(t,e){if(1&t){var i=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementContainerStart(0,19),p.\u0275\u0275elementStart(1,"tri-checkbox",20),p.\u0275\u0275listener("onChange",function(){p.\u0275\u0275restoreView(i);var v=p.\u0275\u0275nextContext(2);return p.\u0275\u0275resetView(v.checkBoxSelectionChanged(v.getSingleOption(v.displayError)))}),p.\u0275\u0275text(2),p.\u0275\u0275pipe(3,"localize"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementContainerEnd()}if(2&t){var n=p.\u0275\u0275nextContext(2);p.\u0275\u0275advance(1),p.\u0275\u0275property("checked",n.isArtifactOptionSelected(n.displayError)),p.\u0275\u0275advance(1),p.\u0275\u0275textInterpolate1(" ",p.\u0275\u0275pipeBind1(3,2,n.getSingleOptionMessageKey(n.displayError))," ")}}function tn(t,e){if(1&t){var i=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"tri-radio-button",22),p.\u0275\u0275listener("change",function(){var E=p.\u0275\u0275restoreView(i).$implicit,I=p.\u0275\u0275nextContext(3);return p.\u0275\u0275resetView(I.radioButtonSelectionChanged(E))}),p.\u0275\u0275text(1),p.\u0275\u0275pipe(2,"localize"),p.\u0275\u0275elementEnd()}if(2&t){var n=e.$implicit,u=p.\u0275\u0275nextContext(3);p.\u0275\u0275property("value",n.OptionKey)("checked",u.isArtifactOptionSelected(u.displayError,n)),p.\u0275\u0275attribute("role","radio"),p.\u0275\u0275advance(1),p.\u0275\u0275textInterpolate1(" ",p.\u0275\u0275pipeBind1(2,4,n.OptionMessageKey)," ")}}function en(t,e){if(1&t&&(p.\u0275\u0275elementStart(0,"tri-radio-group"),p.\u0275\u0275template(1,tn,3,6,"tri-radio-button",21),p.\u0275\u0275elementEnd()),2&t){var i=p.\u0275\u0275nextContext(2);p.\u0275\u0275advance(1),p.\u0275\u0275property("ngForOf",null==i.displayError.interactiveOperationInfo?null:i.displayError.interactiveOperationInfo.options)}}function rn(t,e){if(1&t&&(p.\u0275\u0275elementContainerStart(0),p.\u0275\u0275template(1,qr,4,4,"ng-container",17),p.\u0275\u0275template(2,en,2,1,"ng-template",null,18,p.\u0275\u0275templateRefExtractor),p.\u0275\u0275elementContainerEnd()),2&t){var i=p.\u0275\u0275reference(3),n=p.\u0275\u0275nextContext();p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",1===n.displayErrorOptionsListSize)("ngIfElse",i)}}var nn=function(){function t(e,i,n){var u,v;this.extensionManifestService=e,this.dialogRef=i,this.data=n,this.localGetArtifactIconFromDict=jr.zp,this.enabledOptions=new Map,this.displayError=(0,g.lz)(this.data.errors),this.displayErrorOptionsListSize=null!==(v=null===(u=this.displayError.interactiveOperationInfo)||void 0===u?void 0:u.options.length)&&void 0!==v?v:0,this.InteractionType=zr}return t.prototype.buttonClicked=function(e){if(e===this.data.buttons[0].name)return this.dialogRef.close(this.getInteractiveOperationsOptions(this.enabledOptions));this.dialogRef.close()},t.prototype.getInteractiveOperationsOptions=function(e){var i=[];return e.forEach(function(n,u){i.push({artifactLogicalId:u,optionName:n})}),{optionPerArtifactList:i}},t.prototype.convertDialogData=function(e){return{title:e.title,buttons:e.buttons}},t.prototype.onArtifactSelectionChange=function(e){var i,n;this.displayError=e,this.displayErrorOptionsListSize=null!==(n=null===(i=this.displayError.interactiveOperationInfo)||void 0===i?void 0:i.options.length)&&void 0!==n?n:0},t.prototype.radioButtonSelectionChanged=function(e){var i;this.enabledOptions.set(null===(i=this.displayError.failedArtifactMetadata)||void 0===i?void 0:i.artifactLogicalId,e.OptionKey),this.data.buttons[0].disabled=this.enabledOptions.size!==this.data.errors.errorsDetails.length},t.prototype.checkBoxSelectionChanged=function(e){var i,n,u;this.enabledOptions.has(null===(i=this.displayError.failedArtifactMetadata)||void 0===i?void 0:i.artifactLogicalId)?this.enabledOptions.delete(null===(n=this.displayError.failedArtifactMetadata)||void 0===n?void 0:n.artifactLogicalId):this.enabledOptions.set(null===(u=this.displayError.failedArtifactMetadata)||void 0===u?void 0:u.artifactLogicalId,e.OptionKey),this.data.buttons[0].disabled=this.enabledOptions.size!==this.data.errors.errorsDetails.length},t.prototype.getOptionsListSize=function(e){var i,n;return null!==(n=null===(i=e.interactiveOperationInfo)||void 0===i?void 0:i.options.length)&&void 0!==n?n:0},t.prototype.getSingleOption=function(e){var i;return null===(i=e.interactiveOperationInfo)||void 0===i?void 0:i.options[0]},t.prototype.getSingleOptionMessageKey=function(e){var i;return null===(i=e.interactiveOperationInfo)||void 0===i?void 0:i.options[0].OptionMessageKey},t.prototype.isArtifactOptionSelected=function(e,i){var n,u=null===(n=e.failedArtifactMetadata)||void 0===n?void 0:n.artifactLogicalId;return i?this.enabledOptions.has(u)&&this.enabledOptions.get(u)===i.OptionKey:this.enabledOptions.has(u)},t.prototype.getArtifactType=function(e){var i;return this.extensionManifestService.getFrontendArtifactType(null===(i=e.failedArtifactMetadata)||void 0===i?void 0:i.artifactType)},t.\u0275fac=function(i){return new(i||t)(p.\u0275\u0275directiveInject(Zt.vC),p.\u0275\u0275directiveInject(Ci.so),p.\u0275\u0275directiveInject(Ci.WI))},t.\u0275cmp=p.\u0275\u0275defineComponent({type:t,selectors:[["interactive-operations-dialog"]],decls:14,vars:11,consts:[[3,"dialogData","closeButtonLabel","buttonClickEvent"],[1,"subtitle"],[1,"content"],[1,"artifacts"],["linkFormat","tab","direction","vertical",3,"selectedValue","selectedValueChange"],["class","artifact-details",3,"value",4,"ngFor","ngForOf"],[1,"divider"],[1,"options"],["tabindex","0",1,"message"],[1,"options-list-container",3,"ngSwitch"],[4,"ngSwitchCase"],[1,"artifact-details",3,"value"],[1,"check-mark-icon"],["sprite","fluentui-icons","name","checkmark_12_filled",4,"ngIf"],["tri-svg-icon-22","",1,"artifact-icon",3,"sprite","name"],[1,"trimmedTextWithEllipsis"],["sprite","fluentui-icons","name","checkmark_12_filled"],["class","single-option",4,"ngIf","ngIfElse"],["multiOptions",""],[1,"single-option"],["ng-non-bindable","",3,"checked","onChange"],["ng-non-bindable","",3,"value","checked","change",4,"ngFor","ngForOf"],["ng-non-bindable","",3,"value","checked","change"]],template:function(i,n){1&i&&(p.\u0275\u0275elementStart(0,"trident-dialog",0),p.\u0275\u0275listener("buttonClickEvent",function(v){return n.buttonClicked(v)}),p.\u0275\u0275pipe(1,"localize"),p.\u0275\u0275elementStart(2,"div",1),p.\u0275\u0275text(3),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(4,"div",2)(5,"div",3)(6,"tri-pivot",4),p.\u0275\u0275listener("selectedValueChange",function(v){return n.onArtifactSelectionChange(v)}),p.\u0275\u0275template(7,Yr,6,6,"tri-pivot-item",5),p.\u0275\u0275elementEnd()(),p.\u0275\u0275element(8,"hr",6),p.\u0275\u0275elementStart(9,"div",7)(10,"div",8),p.\u0275\u0275text(11),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(12,"div",9),p.\u0275\u0275template(13,rn,4,2,"ng-container",10),p.\u0275\u0275elementEnd()()()()),2&i&&(p.\u0275\u0275property("dialogData",n.convertDialogData(n.data))("closeButtonLabel",p.\u0275\u0275pipeBind1(1,9,"Cancel_ButtonText")),p.\u0275\u0275advance(3),p.\u0275\u0275textInterpolate1(" ",n.data.subTitle," "),p.\u0275\u0275advance(3),p.\u0275\u0275property("selectedValue",n.displayError),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngForOf",n.data.errors.errorsDetails),p.\u0275\u0275advance(3),p.\u0275\u0275attribute("aria-label",null==n.displayError.interactiveOperationInfo?null:n.displayError.interactiveOperationInfo.dialogMessage),p.\u0275\u0275advance(1),p.\u0275\u0275textInterpolate1(" ",null==n.displayError.interactiveOperationInfo?null:n.displayError.interactiveOperationInfo.dialogMessage," "),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngSwitch",null==n.displayError.interactiveOperationInfo?null:n.displayError.interactiveOperationInfo.interactionType),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngSwitchCase",n.InteractionType.SingleOption))},dependencies:[ve.NgForOf,ve.NgIf,ve.NgSwitch,ve.NgSwitchCase,Lr.v,Hr.M,Wr.E,$r.B,Vr.r,Qr.Y,Jr.Z,Xr.Y],styles:[".content[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:16px}.subtitle[_ngcontent-%COMP%]{padding:0 0 16px}.artifacts[_ngcontent-%COMP%]   tri-pivot-item[_ngcontent-%COMP%]{width:220px;padding-bottom:10px;margin-inline-end:10px}.artifacts[_ngcontent-%COMP%]   .tri-pivot-item-tab[_ngcontent-%COMP%]{display:flex;gap:4px}.artifacts[_ngcontent-%COMP%]   .check-mark-icon[_ngcontent-%COMP%]{width:20px}hr.divider[_ngcontent-%COMP%]{border:1px solid var(--colorNeutralStroke1);height:inherit;margin:0}[_nghost-%COMP%]     .tri-pivot-item-tab{display:flex;gap:4px}.message[_ngcontent-%COMP%]{font-size:16px;font-weight:600;padding:0 0 10px}.options-list-container[_ngcontent-%COMP%]{max-height:100px;overflow-y:scroll}"],changeDetection:0}),t}(),sn=a(7452),Le=function(){function t(e,i){this.dialogService=e,this.localizationService=i}return t.prototype.isOptionNotEnabled=function(e){return(0,g.lz)(e).workloadErrorCategory===g.QJ},t.prototype.showInteractiveOperationsDialog=function(e,i,n){var u=function(t,e,i){var n=t.get("Cancel_ButtonText"),u=t.get("ModalDialogButtonText_Continue"),v=t.get("Trident_Git_Interactive_Operations_Dialog_Message"),C={title:t.get(i),buttons:[{name:u,label:u,buttonType:"primary",disabled:!0},{name:n,label:n,buttonType:null}],subTitle:v,errors:e};return{componentRef:nn,config:{width:"864px",panelClass:"dialog-style",data:C}}}(this.localizationService,e,i);this.dialogService.open(u.componentRef,u.config).afterClosed().pipe((0,Vt.q)(1),(0,ce.h)(function(v){return v})).subscribe(function(v){n(e,v)})},t.\u0275fac=function(i){return new(i||t)(p.\u0275\u0275inject(Rr.uQ),p.\u0275\u0275inject(sn.z))},t.\u0275prov=p.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),Ei=(0,r.P1)(Mt,function(t){return t?.gitUpdate||Ce}),Ti=Ht.getSelectors(),ln=Ti.selectAll,dn=Ti.selectEntities,un=((0,r.P1)(Ei,function(t){return ln(t)}),(0,r.P1)(Ei,function(t){return dn(t)})),He=function(e){return(0,r.P1)(un,function(i){return i[e]})},We=function(){function t(e){this.store=e}return t.prototype.getGitConnection=function(e){return this.store.select(Re(e))},t.prototype.ensureGitConnection=function(e){return this.store.dispatch(X({workspaceId:e})),this.getGitConnection(e)},t.prototype.loadGitConnection=function(e){return this.store.dispatch(D({workspaceId:e})),this.getGitConnection(e)},t.prototype.saveGitConnection=function(e){return this.store.dispatch(et({gitConnection:e})),(0,dt.of)(void 0)},t.prototype.deleteGitConnection=function(e){return this.store.dispatch(Ot({workspaceId:e})),(0,dt.of)(void 0)},t.prototype.checkoutBranch=function(e){return this.store.dispatch(rt({gitCheckoutBranchState:e})),(0,dt.of)(void 0)},t.prototype.getGitConnectionOperationState=function(e){return this.store.select(Re(e)).pipe((0,z.U)(function(i){return i&&i.callState||L.Initial}))},t.\u0275fac=function(i){return new(i||t)(p.\u0275\u0275inject(r.yh))},t.\u0275prov=p.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),pn=function(){function t(e){this.store=e}return t.prototype.updateFromGit=function(e){return this.store.dispatch(ee({gitUpdateState:e})),this.store.select(He(e.workspaceId))},t.prototype.getUpdatingState=function(e){return this.store.select(He(e)).pipe((0,z.U)(function(i){return i&&i.callState||ft.Initial}))},t.\u0275fac=function(i){return new(i||t)(p.\u0275\u0275inject(r.yh))},t.\u0275prov=p.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),_n=function(){function t(e,i,n,u,v,C,E,I,T,O){var F=this;this.actions$=e,this.gitUpdateClient=i,this.gitErrorService=n,this.gitNotificationService=u,this.interactiveOperationsService=v,this.store=C,this.extensionManifestService=E,this.gitConnectionFacade=I,this.gitUpdateFacade=T,this.featureSwitchService=O,this.updateFromGit$=(0,l.GW)(function(){return F.actions$.pipe((0,l.l4)(ee),(0,z.U)(function(N){var J=N.gitUpdateState,st=N.isInitialSync,Qe=F.gitNotificationService.showLoadingNotification(st?"Trident_Git_Toast_Initial_Update_Loading":"Trident_Git_Toast_Update_Loading_Title",st?void 0:"Trident_Git_Toast_Update_Loading_Message");return(0,c.__assign)((0,c.__assign)({},J),{isInitialSync:st,notificationId:Qe})}),(0,it.w)(function(N){return F.gitUpdateClient.UpdateArtifactsFromGit(N.workspaceId,F.updateFromGitModelToContract(N.request)).pipe((0,it.w)(function(J){var st=(0,c.__assign)((0,c.__assign)({},N),{response:{almAction:J.almOperation}});return[ie({gitUpdateState:st})]}),(0,Ct.K)(function(J){var st=F.gitErrorService.makeGitErrorFromHttpResponse("Git_Update_Invalid_Request",J);return N?.notificationId&&(F.gitNotificationService.showErrorNotification(st,"Trident_Git_Error_Unable_To_Update_Title",N.notificationId),F.gitErrorService.showErrorHandlingDialog(st)),(0,dt.of)(ye({gitUpdateState:N,error:st}))}))}))}),this.getLatestGitAlmOperationSuccess$=(0,l.GW)(function(){return F.actions$.pipe((0,l.l4)(Bt),(0,z.U)(function(N){return N.gitSyncState}),(0,ce.h)(function(N){return F.isLatestOpValid(N)}),(0,it.w)(function(N){return F.store.select(He(N.workspaceId)).pipe((0,Vt.q)(1),(0,it.w)(function(J){return F.getActions(N,J)}))}))})}return t.prototype.isLatestOpValid=function(e){return!!e?.isValid&&e.gitOperationType===g.u9.Update},t.prototype.getActions=function(e,i){var u,n=this,v=i&&i.workspaceId===e.workspaceId?{workspaceId:i.workspaceId,request:i.request,response:i?.response,isInitialSync:i?.isInitialSync,notificationId:i?.notificationId}:{workspaceId:e.workspaceId,request:void 0};switch(e.gitOperationStatus){case g.wM.Successful:return i?.notificationId&&this.gitNotificationService.showSuccessNotification(i?.notificationId?"Trident_Git_Toast_Initial_Action_Success":"Trident_Git_Toast_Update_Success",i.notificationId),(0,c.__spreadArray)((0,c.__spreadArray)([Se({gitUpdateStateWithResponse:v})],ae(v.workspaceId,!0,null!==(u=this.featureSwitchService.featureSwitches.tridentGitStatusAPI)&&void 0!==u&&u),!0),[Tt({workspaceId:v.workspaceId})],!1);case g.wM.InProgress:return[ie({gitUpdateState:v})];case g.wM.Failed:var C=this.gitErrorService.handleAlmGitError("AlmOperationFailed_UpdateFromGit",e);return i?.notificationId&&(this.featureSwitchService.featureSwitches.interactiveOperationUI&&this.interactiveOperationsService.isOptionNotEnabled(C)?(this.interactiveOperationsService.showInteractiveOperationsDialog(C,"Trident_Git_Updates_Fail_Message_Bar",function(E,I){return n.doUpdateFlowWithInteractiveOptions(E,I,e.workspaceId)}),this.gitNotificationService.hideCurrentNotification()):(this.gitNotificationService.showErrorNotification(C,"Trident_Git_Error_Unable_To_Update_Title",i.notificationId),this.gitErrorService.showErrorHandlingDialog(C))),[Ie({gitUpdateState:v,error:C}),Tt({workspaceId:v.workspaceId})]}return[ie({gitUpdateState:v})]},t.prototype.updateFromGitModelToContract=function(e){var i,n=this.ConvertArtifactTypesInTree(e.artifactMergePolicyInfoTreeList,this.extensionManifestService);return{targetCommit:e.targetCommit,workspaceHead:null!==(i=e.workspaceHead)&&void 0!==i?i:null,ArtifactMergePolicyInfoTreeList:n,retryOperationId:e.retryOperationId,interactiveUpdateOptions:e.interactiveUpdateOptions}},t.prototype.ConvertArtifactTypesInTree=function(e,i){return e&&e.map(function(n){var u=(0,c.__assign)({},n);return"artifact"in u.root&&(u.root=(0,c.__assign)((0,c.__assign)({},u.root),{artifact:(0,c.__assign)((0,c.__assign)({},u.root.artifact),{artifactType:i.getBackendArtifactType(u.root.artifact.artifactType)})})),u})},t.prototype.doUpdateFlowWithInteractiveOptions=function(e,i,n){var u=this;this.gitConnectionFacade.getGitConnection(n).pipe((0,Vt.q)(1)).subscribe(function(v){var C,E,I=null===(C=v?.gitConnectionDetails)||void 0===C?void 0:C.head;u.gitUpdateFacade.updateFromGit({workspaceId:n,request:{workspaceHead:I,targetCommit:void 0,artifactMergePolicyInfoTreeList:void 0,retryOperationId:null===(E=e.errorInfo)||void 0===E?void 0:E.retryOperationId,interactiveUpdateOptions:i}})})},t.\u0275fac=function(i){return new(i||t)(p.\u0275\u0275inject(l.eX),p.\u0275\u0275inject(K.Jv),p.\u0275\u0275inject(Nt.jR),p.\u0275\u0275inject(zt.mn),p.\u0275\u0275inject(Le),p.\u0275\u0275inject(r.yh),p.\u0275\u0275inject(Zt.vC),p.\u0275\u0275inject(We),p.\u0275\u0275inject(pn),p.\u0275\u0275inject(oe.V$))},t.\u0275prov=p.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t}();function vn(t,e){return"Committing ".concat(t.toString()," ").concat(1===t?"item":"items"," from workspace ").concat(e)}var gn=a(54323),fn=function(){function t(e,i,n,u,v,C,E){var I=this;this.actions$=e,this.gitInitializationClient=i,this.gitErrorService=n,this.gitNotificationService=u,this.interactiveOperationsService=v,this.telemetryService=C,this.extensionManifestService=E,this.initializeGitConnection$=(0,l.GW)(function(){return I.actions$.pipe((0,l.l4)(S),(0,z.U)(function(T){return T.gitInitializationState}),(0,it.w)(function(T){return I.gitInitializationClient.initializeGitConnection(T.workspaceId,I.gitInitializationRequestFromState(T)).pipe((0,it.w)(function(O){var F=(0,c.__assign)((0,c.__assign)({},T),{response:O});return I.mapInitializationStateToActions(F)}),(0,Ct.K)(function(O){var F=I.gitErrorService.makeGitErrorFromHttpResponse("Git_Initialization_Failed",O);return(0,g.E6)(F)||I.interactiveOperationsService.isOptionNotEnabled(F)||I.gitNotificationService.showErrorNotification(F,"Trident_Git_Toast_Initialize_Fail"),(0,dt.of)(f({gitInitializationState:T,error:F}))}))}))})}return t.prototype.gitInitializationRequestFromState=function(e){return{mergePolicy:e.request.mergePolicy}},t.prototype.mapInitializationStateToActions=function(e){var i;switch(null===(i=e.response)||void 0===i?void 0:i.result){case K.xU.Completed:if(e.response.incomingChanges&&e.response.incomingChanges.length>0||e.response.uncommittedChanges&&e.response.uncommittedChanges.length>0||!e.response.head){var n=this.gitErrorService.makeClientSideGitError("Git_Initialization_Invalid_Request");return this.gitNotificationService.showErrorNotification(n,"Trident_Git_Toast_Initialize_Fail"),[f({gitInitializationState:e,error:n})]}return[m({gitInitializationStateWithResponse:e}),bt({workspaceId:e.workspaceId})];case K.xU.UpdateFromGitRequired:if(!e.response.incomingChanges||!e.response.partialSyncBaseCommit)return n=this.gitErrorService.makeClientSideGitError("Git_Initialization_Invalid_Request"),this.gitNotificationService.showErrorNotification(n,"Trident_Git_Toast_Initialize_Fail"),[f({gitInitializationState:e,error:n})];var u=this.createUpdateRequestFromState(e);return this.telemetryService.logEvent({name:"Automatic update after initialization",properties:{workspaceId:e.workspaceId,targetCommit:u.request.targetCommit}}),[m({gitInitializationStateWithResponse:e}),ee({gitUpdateState:u,isInitialSync:!0})];case K.xU.CommitToGitRequired:var v=this.createCommitRequestFromState(e);return null!=v?(this.telemetryService.logEvent({name:"Automatic commit after initialization",properties:{workspaceId:e.workspaceId,workspaceHead:v.request.workspaceHead}}),[m({gitInitializationStateWithResponse:e}),de({gitCommitState:v,isInitialSync:!0})]):(n=this.gitErrorService.makeClientSideGitError("Git_Initialization_Invalid_Request"),this.gitNotificationService.showErrorNotification(n,"Trident_Git_Toast_Initialize_Fail"),[f({gitInitializationState:e,error:n})]);default:return n=this.gitErrorService.makeClientSideGitError("Git_Initialization_Invalid_Request"),this.gitNotificationService.showErrorNotification(n,"Trident_Git_Toast_Initialize_Fail"),[f({gitInitializationState:e,error:n})]}},t.prototype.createUpdateRequestFromState=function(e){var i,n=e.response;return{workspaceId:e.workspaceId,request:{targetCommit:n?.partialSyncBaseCommit,workspaceHead:null!==(i=n?.head)&&void 0!==i?i:null}}},t.prototype.createCommitRequestFromState=function(e){var n,u,i=this,v=null===(n=e?.response)||void 0===n?void 0:n.head,C=null===(u=e?.response)||void 0===u?void 0:u.uncommittedChanges;if(!C||!v)return this.gitErrorService.handleClientSideGitError(" Git_Commit_Invalid_Request"),null;var E=C.map(function(I){return _i(I,i.extensionManifestService)});return{workspaceId:e.workspaceId,request:{workspaceHead:v,artifacts:E,comment:vn(C.length,e.workspaceId)}}},t.\u0275fac=function(i){return new(i||t)(p.\u0275\u0275inject(l.eX),p.\u0275\u0275inject(K.Zt),p.\u0275\u0275inject(Nt.jR),p.\u0275\u0275inject(zt.mn),p.\u0275\u0275inject(Le),p.\u0275\u0275inject(gn.t),p.\u0275\u0275inject(Zt.vC))},t.\u0275prov=p.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t}(),hn=function(){function t(e,i,n){var u=this;this.actions$=e,this.gitSyncClient=i,this.gitErrorService=n,this.getLatestGitAlmOperation$=(0,l.GW)(function(){return u.actions$.pipe((0,l.l4)(bt),(0,it.w)(function(v){var C=v.workspaceId,E=v.isInitial;return u.gitSyncClient.getlatestGitOperation(C).pipe((0,z.U)(function(I){return u.almOperationToSyncModel(I,C,E)}),(0,z.U)(function(I){return Bt({gitSyncState:I})}),(0,Ct.K)(function(){var I=u.gitErrorService.makeClientSideGitError("Git_Sync_Failed");return(0,dt.of)(xt({workspaceId:C,error:I}))}))}))})}return t.prototype.almOperationToSyncModel=function(e,i,n){var u=this.getGitOperationType(e.operationType),v="0"!==e.objectId&&void 0!==u,C=this.getGitOperationStatus(e.status);return{isValid:v,isInitial:!!n,workspaceId:i,gitOperationId:e.operationId,gitOperationType:u,gitOperationStatus:C,lastUpdatedTime:new Date(e.lastUpdatedTime),gitNonInteractiveOperationErrorDetails:this.getNonInteractiveErrorDetails(e.gitOperationErrorDetailsList),gitInteractiveOperationErrorDetailsList:this.getInteractiveErrorDetails(e.gitOperationErrorDetailsList)}},t.prototype.getInteractiveErrorDetails=function(e){if(!e||!e.some(function(i){var n;return(null===(n=i.artifactErrorDetails)||void 0===n?void 0:n.ErrorCategory)!==g.QJ}))return e},t.prototype.getNonInteractiveErrorDetails=function(e){if(e)return e.find(function(i){var n;return(null===(n=i.artifactErrorDetails)||void 0===n?void 0:n.ErrorCategory)!==g.QJ})},t.prototype.getGitOperationType=function(e){switch(e){case qt.CommitToGit:return g.u9.Commit;case qt.UpdateFromGit:return g.u9.Update;case qt.InitializeWorkspaceGitConnection:return g.u9.Initialize;case qt.Undo:return g.u9.Undo;case qt.CheckoutBranch:return g.u9.CheckoutBranch;case qt.SwitchBranch:return g.u9.SwitchBranch;default:return}},t.prototype.getGitOperationStatus=function(e){return e<ze.FinalBase?g.wM.InProgress:e>=ze.FinalSuccessBase&&e<ze.FinalErrorBase?g.wM.Successful:g.wM.Failed},t.\u0275fac=function(i){return new(i||t)(p.\u0275\u0275inject(l.eX),p.\u0275\u0275inject(K.WV),p.\u0275\u0275inject(Nt.jR))},t.\u0275prov=p.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t}(),Di=(0,r.P1)(Mt,function(t){return t?.gitUndo||Be}),wi=Wt.getSelectors(),mn=wi.selectAll,Gn=wi.selectEntities,Sn=((0,r.P1)(Di,function(t){return mn(t)}),(0,r.P1)(Di,function(t){return Gn(t)})),$e=function(e){return(0,r.P1)(Sn,function(i){return i[e]})},yn=function(){function t(e){this.store=e}return t.prototype.UndoFromGit=function(e){return this.store.dispatch(ue({gitUndoState:e})),this.store.select($e(e.workspaceId))},t.prototype.getUndoState=function(e){return this.store.select($e(e)).pipe((0,z.U)(function(i){return i&&i.callState||ut.Initial}))},t.\u0275fac=function(i){return new(i||t)(p.\u0275\u0275inject(r.yh))},t.\u0275prov=p.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),In=function(){function t(e,i,n,u,v,C,E,I,T,O){var F=this;this.actions$=e,this.gitUndoClient=i,this.gitErrorService=n,this.gitNotificationService=u,this.interactiveOperationsService=v,this.gitUndoFacade=C,this.gitStatusFacade=E,this.gitConnectionFacade=I,this.store=T,this.featureSwitchService=O,this.undoFromGit$=(0,l.GW)(function(){return F.actions$.pipe((0,l.l4)(ue),(0,z.U)(function(N){var J=N.gitUndoState,st=F.gitNotificationService.showLoadingNotification("Trident_Git_Toast_Undo_Loading_Title","Trident_Git_Toast_Undo_Loading_Message");return(0,c.__assign)((0,c.__assign)({},J),{notificationId:st})}),(0,it.w)(function(N){return F.gitUndoClient.undoCommitArtifacts(N.workspaceId,F.fromGitUndoContractToGitUndoRequest(N.request)).pipe((0,it.w)(function(J){var st=(0,c.__assign)((0,c.__assign)({},N),{response:{almAciton:J.almOperation}});return[re({gitUndoState:st})]}),(0,Ct.K)(function(J){var st=F.gitErrorService.makeGitErrorFromHttpResponse("Git_InvalidUndoRequest",J);return N?.notificationId&&(F.gitNotificationService.showErrorNotification(st,"Trident_Git_Error_Unable_To_Undo_Title",N.notificationId),F.gitErrorService.showErrorHandlingDialog(st)),(0,dt.of)(Oe({gitUndoState:N,error:st}))}))}))}),this.getLatestGitAlmOperationSuccess$=(0,l.GW)(function(){return F.actions$.pipe((0,l.l4)(Bt),(0,z.U)(function(N){return N.gitSyncState}),(0,ce.h)(function(N){return F.isLatestOpValid(N)}),(0,it.w)(function(N){return F.store.select($e(N.workspaceId)).pipe((0,Vt.q)(1),(0,it.w)(function(J){return F.getUndoActions(N,J)}))}))})}return t.prototype.isLatestOpValid=function(e){return!!e?.isValid&&e.gitOperationType===g.u9.Undo},t.prototype.getUndoActions=function(e,i){var u,n=this,v=i&&i.workspaceId===e.workspaceId?{workspaceId:i.workspaceId,request:i.request,response:i?.response,notificationId:i?.notificationId}:{workspaceId:e.workspaceId,request:void 0};switch(e.gitOperationStatus){case g.wM.Successful:return v?.notificationId&&this.gitNotificationService.showSuccessNotification("Trident_Git_Toast_Undo_Success",v.notificationId),this.gitStatusFacade.clearChangesArtifactSelection(v.workspaceId),(0,c.__spreadArray)((0,c.__spreadArray)([De({gitUndoStateWithResponse:v})],ae(v.workspaceId,!0,null!==(u=this.featureSwitchService.featureSwitches.tridentGitStatusAPI)&&void 0!==u&&u),!0),[Tt({workspaceId:v.workspaceId})],!1);case g.wM.InProgress:return[re({gitUndoState:v})];case g.wM.Failed:var C=this.gitErrorService.handleAlmGitError("AlmOperationFailed_UndoFromGit",e);return v?.notificationId&&(this.featureSwitchService.featureSwitches.interactiveOperationUI&&this.interactiveOperationsService.isOptionNotEnabled(C)?(this.interactiveOperationsService.showInteractiveOperationsDialog(C,"Trident_Git_Error_Undo_Title",function(E,I){return n.undoWithInteractiveOptions(E,I,e.workspaceId)}),this.gitNotificationService.hideCurrentNotification()):(this.gitNotificationService.showErrorNotification(C,"Trident_Git_Error_Unable_To_Undo_Title",v.notificationId),this.gitErrorService.showErrorHandlingDialog(C))),[we({gitUndoState:v,error:C}),Tt({workspaceId:v.workspaceId})]}return[re({gitUndoState:v})]},t.prototype.fromGitArtifactToArtifactSelector=function(e){var i,n,u,v=e.artifact;return{artifactType:v.artifactType,etag:v.etag,objectId:v.objectId,logicalId:v.logicalId,changeType:null!==(n=null===(i=e.remoteChange)||void 0===i?void 0:i.changeType)&&void 0!==n?n:null===(u=e?.workspaceChange)||void 0===u?void 0:u.changeType}},t.prototype.fromGitUndoContractToGitUndoRequest=function(e){var n,i=this;return{artifacts:null===(n=e.artifacts)||void 0===n?void 0:n.map(function(v){return i.fromGitArtifactToArtifactSelector(v)}),workspaceHead:e.workspaceHead,retryOperationId:e.retryOperationId,interactiveUpdateOptions:e.interactiveUpdateOptions}},t.prototype.undoWithInteractiveOptions=function(e,i,n){var u=this;this.gitConnectionFacade.getGitConnection(n).pipe((0,Vt.q)(1)).subscribe(function(v){var C,E;u.gitUndoFacade.UndoFromGit({workspaceId:n,request:{workspaceHead:null===(C=v?.gitConnectionDetails)||void 0===C?void 0:C.head,artifacts:void 0,retryOperationId:null===(E=e.errorInfo)||void 0===E?void 0:E.retryOperationId,interactiveUpdateOptions:i}})})},t.\u0275fac=function(i){return new(i||t)(p.\u0275\u0275inject(l.eX),p.\u0275\u0275inject(K.nD),p.\u0275\u0275inject(Nt.jR),p.\u0275\u0275inject(zt.mn),p.\u0275\u0275inject(Le),p.\u0275\u0275inject(yn),p.\u0275\u0275inject(je),p.\u0275\u0275inject(We),p.\u0275\u0275inject(r.yh),p.\u0275\u0275inject(oe.V$))},t.\u0275prov=p.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t}(),Oi=(0,r.P1)(Mt,function(t){return t?.gitSwitchBranch||Pe}),Bi=$t.getSelectors(),Cn=Bi.selectAll,En=Bi.selectEntities,Tn=((0,r.P1)(Oi,function(t){return Cn(t)}),(0,r.P1)(Oi,function(t){return En(t)})),Ve=function(e){return(0,r.P1)(Tn,function(i){return i[e]})},Dn=function(){function t(e,i,n,u,v,C){var E=this;this.actions$=e,this.gitSwitchBranchClient=i,this.gitErrorService=n,this.gitNotificationService=u,this.store=v,this.featureSwitchService=C,this.gitSwitchBranch$=(0,l.GW)(function(){return E.actions$.pipe((0,l.l4)(Kt),(0,z.U)(function(I){var T=I.gitSwitchBranchState,O=E.gitNotificationService.showLoadingNotification("Trident_Git_Toast_Switch_Branch_Switching_In_Progress_Message");return(0,c.__assign)((0,c.__assign)({},T),{notificationId:O})}),(0,it.w)(function(I){return E.gitSwitchBranchClient.switchBranch(I.workspaceId,I.request).pipe((0,it.w)(function(T){var O=(0,c.__assign)((0,c.__assign)({},I),{response:{almOperation:T.almOperation}});return E.gitNotificationService.showSuccessNotification("Trident_Git_Toast_Switch_Branch_Success_Message",I.notificationId),[Y({gitSwitchBranchState:O})]}),(0,Ct.K)(function(T){var O=E.gitErrorService.makeGitErrorFromHttpResponse("Git_Switch_Branch_Failed",T),F=E.convertToSwitchBranchSpecficError(O),N=E.gitErrorService.handleSyncGitError(F,T);return I?.notificationId&&E.gitNotificationService.showErrorNotification(N,"Trident_Git_Error_Unable_To_Switch_Branch_Title",I.notificationId),(0,dt.of)(at({gitSwitchBranchState:I,error:N}))}))}))}),this.getLatestGitAlmOperationSuccess$=(0,l.GW)(function(){return E.actions$.pipe((0,l.l4)(Bt),(0,z.U)(function(I){return I.gitSyncState}),(0,ce.h)(function(I){return E.isLatestOpValid(I)}),(0,it.w)(function(I){return E.store.select(Ve(I.workspaceId)).pipe((0,Vt.q)(1),(0,it.w)(function(T){return E.getSwitchBranchActions(I,T)}))}))})}return t.prototype.getSwitchBranchActions=function(e,i){var n,u=i&&i.workspaceId===e.workspaceId?(0,c.__assign)({},i):{workspaceId:e.workspaceId,request:void 0};if(e)switch(e.gitOperationStatus){case g.wM.Successful:return u?.notificationId&&this.gitNotificationService.showSuccessNotification("Trident_Git_Toast_Switch_Branch_Syncing_Completed_Message",u.notificationId),(0,c.__spreadArray)((0,c.__spreadArray)([Rt({gitSwitchBranchState:u})],ae(u.workspaceId,!0,null!==(n=this.featureSwitchService.featureSwitches.tridentGitStatusAPI)&&void 0!==n&&n),!0),[Tt({workspaceId:u.workspaceId})],!1);case g.wM.InProgress:return this.setInProgress(u);default:var v=this.gitErrorService.handleAlmGitError("AlmOperationFailed_SwitchGitBranch",e);return u?.notificationId&&this.gitNotificationService.showErrorNotification(v,"Trident_Git_Error_Unable_To_Switch_Branch_Title",u.notificationId),[j({gitSwitchBranchState:u}),Tt({workspaceId:u.workspaceId})]}return[Y({gitSwitchBranchState:u})]},t.prototype.setInProgress=function(e){var i=this.gitNotificationService.showLoadingNotification("Trident_Git_Toast_Switch_Branch_Syncing_In_Progress_Message");return[Y({gitSwitchBranchState:(0,c.__assign)((0,c.__assign)({},e),{notificationId:i})})]},t.prototype.isLatestOpValid=function(e){return!!e?.isValid&&e.gitOperationType===g.u9.SwitchBranch},t.prototype.convertToSwitchBranchSpecficError=function(e){if(void 0===e)return"Git_Switch_Branch_Invalid_Request";if((0,g.yG)(e))return"Git_Switch_Branch_Item_Not_Found";switch((0,g.lz)(e).errorType){case"Git_MissingDependencies":return"Git_MissingDependenciesSwitchBranch";case"Git_CyclicDependencyDetected":return"Git_CyclicDependencyDetectedSwitchBranch";default:return"Git_Switch_Branch_Invalid_Request"}},t.\u0275fac=function(i){return new(i||t)(p.\u0275\u0275inject(l.eX),p.\u0275\u0275inject(K.ZH),p.\u0275\u0275inject(Nt.jR),p.\u0275\u0275inject(zt.mn),p.\u0275\u0275inject(r.yh),p.\u0275\u0275inject(oe.V$))},t.\u0275prov=p.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t}(),wn=a(17653),Bn=a(9398),Fn=function(){function t(e,i,n,u,v){var C=this;this.actions$=e,this.router=i,this.gitBranchOutClient=n,this.gitErrorService=u,this.gitNotificationService=v,this.gitBranchOut$=(0,l.GW)(function(){return C.actions$.pipe((0,l.l4)(mt),(0,z.U)(function(E){var I=E.gitBranchOutState,T=C.gitNotificationService.showLoadingNotification("Trident_Git_Branch_Out","Trident_Git_Toast_Branch_Out_In_Progress_Message");return(0,c.__assign)((0,c.__assign)({},I),{notificationId:T})}),(0,it.w)(function(E){return C.gitBranchOutClient.branchOut(E.workspaceId,E.request).pipe((0,it.w)(function(I){var T=(0,c.__assign)((0,c.__assign)({},E),{response:I});return[At({gitBranchOutState:T})]}),(0,Ct.K)(function(I){var T=C.gitErrorService.makeGitErrorFromHttpResponse("Git_Branch_Out_Failed",I),O="Git_Branch_Out_Failed"!==(0,g.lz)(T).errorType&&function(t,e){var i,n,u,v,C,E=null===(C=null===(v=null===(u=null===(n=null===(i=t.error)||void 0===i?void 0:i["pbi.error"])||void 0===n?void 0:n.details)||void 0===u?void 0:u[0])||void 0===v?void 0:v.detail)||void 0===C?void 0:C.value;if(E)try{var I=JSON.parse(E);if(I?.errorSpecificData){var T=JSON.parse(I.errorSpecificData);if(T)return(0,c.__assign)((0,c.__assign)({},e),{response:{folder:T}})}}catch{return null}return null}(I,E)||E;return E?.notificationId&&C.gitNotificationService.showErrorNotification(T,"Trident_Git_Error_Unable_To_Branch_Out_Git_Branch_Fail_Title",E.notificationId),(0,dt.of)(Ft({gitBranchOutState:O,error:T}))}))}))}),this.gitBranchOutSuccess$=(0,l.GW)(function(){return C.actions$.pipe((0,l.l4)(At),(0,it.w)(function(E){var I,T,O,F=E.gitBranchOutState;if(null!==(I=F?.response)&&void 0!==I&&I.initializeConnectionStatus){var J=F.response.initializeConnectionStatus.incomingChanges&&(null===(O=null===(T=F.response)||void 0===T?void 0:T.initializeConnectionStatus)||void 0===O?void 0:O.incomingChanges.length)>0?C.createUpdateRequestFromState(F):void 0;return(0,dt.of)(Dt({gitBranchOutState:F,gitUpdateState:J}))}var st=C.gitErrorService.makeClientSideGitError("Git_Invalid_Connection_Details");return C.gitNotificationService.showErrorNotification(st,"Trident_Git_Error_Git_Invalid_Connection_Details_Title"),(0,dt.of)(Ft({gitBranchOutState:F,error:st}))}))}),this.gitBranchOutCompleted$=(0,l.GW)(function(){return C.actions$.pipe((0,l.l4)(se),(0,wn.b)(function(E){var I,T,O;C.navigateToNewWorkspace(null===(I=E.gitBranchOutState.response)||void 0===I?void 0:I.folder.objectId),null!==(T=E.gitBranchOutState)&&void 0!==T&&T.notificationId&&C.gitNotificationService.showSuccessNotification("Trident_Git_Toast_Branch_Out_Success_Message",null===(O=E.gitBranchOutState)||void 0===O?void 0:O.notificationId)}))},{dispatch:!1})}return t.prototype.createUpdateRequestFromState=function(e){var i,n,u,v=null===(i=e.response)||void 0===i?void 0:i.initializeConnectionStatus,C=null===(n=e.response)||void 0===n?void 0:n.folder.objectId;if(v&&C)return{workspaceId:C,request:{targetCommit:v.partialSyncBaseCommit,workspaceHead:null!==(u=v.head)&&void 0!==u?u:null}}},t.prototype.navigateToNewWorkspace=function(e){this.router.navigate(["/groups/".concat(e,"/")],{queryParamsHandling:"preserve"})},t.\u0275fac=function(i){return new(i||t)(p.\u0275\u0275inject(l.eX),p.\u0275\u0275inject(Bn.F0),p.\u0275\u0275inject(K.su),p.\u0275\u0275inject(Nt.jR),p.\u0275\u0275inject(zt.mn))},t.\u0275prov=p.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t}();function An(t){var e=JSON.parse(t.connectionDetails);return(0,K.h_)(e)&&"GitHubSourceControl"===e.extensionDataSourceKind}function Un(t){var e=JSON.parse(t.connectionDetails);return{id:t.id,datasourceName:t.datasourceName,url:(0,K.h_)(e)?e.extensionDataSourcePath:"https://github.com"}}function Nn(t){return(0,c.__assign)((0,c.__assign)({},g.I),{datasourceName:t.displayName,datasourceType:g.LO,connectionDetails:JSON.stringify(t?.repositoryUrl?{url:t?.repositoryUrl}:{}),mashupTestConnectionDetails:{functionName:"GitHubSourceControl.Contents",parameters:[(0,c.__assign)((0,c.__assign)({},g.cW),{value:t?.repositoryUrl})]},credentialDetails:(0,c.__assign)((0,c.__assign)({},g.f7),{credentials:JSON.stringify({credentialData:[{name:"key",value:t.personalAccessToken}]})})})}var Kn=function(){function t(e,i,n,u){var v=this;this.actions$=e,this.gitDatasourceClient=i,this.gitErrorService=n,this.gitNotificationService=u,this.loadDatasources$=(0,l.GW)(function(){return v.actions$.pipe((0,l.l4)(_e),(0,it.w)(function(C){var E,I,T=C.gitDatasourceRequest,O=null===(E=v.gitDatasourcesConfigRecord[T.gitProviderType])||void 0===E?void 0:E.convertDatasourceContractToModel,F=null===(I=v.gitDatasourcesConfigRecord[T.gitProviderType])||void 0===I?void 0:I.filterDatasource;if(!O||!F){var N=v.gitErrorService.makeClientSideGitError("Git_UnsupportedGitProvider");return(0,dt.of)(Ae({workspaceId:T.workspaceId,error:N}))}return v.gitDatasourceClient.discoverDatasources().pipe((0,Vt.q)(1),(0,z.U)(function(J){return J.value.filter(F)}),(0,z.U)(function(J){return J.map(O)}),(0,it.w)(function(J){var st,Qe={workspaceId:T.workspaceId,datasourcesRecord:(st={},st[T.gitProviderType]=J,st)};return(0,dt.of)(si({gitDatasourcesState:Qe}))}),(0,Ct.K)(function(J){var st=v.gitErrorService.makeGitErrorFromHttpResponse("Git_Load_Datasources_Failed",J);return(0,dt.of)(Ae({workspaceId:T.workspaceId,error:st}))}))}))}),this.createDatasource$=(0,l.GW)(function(){return v.actions$.pipe((0,l.l4)(Ue),(0,it.w)(function(C){var E,I=C.request,T=v.gitNotificationService.showLoadingNotification("Trident_Git_Toast_Add_Account_In_Progress_Title","Trident_Git_Toast_Add_Account_In_Progress_Message"),O=null===(E=v.gitDatasourcesConfigRecord[I.gitProviderType])||void 0===E?void 0:E.convertCreateDatasourceRequestModelToContract;if(!O){var F=v.gitErrorService.makeClientSideGitError("Git_UnsupportedGitProvider");return v.gitNotificationService.showErrorNotification(F,"Trident_Git_Toast_Add_Account_Fail_Title",T),(0,dt.of)(Ne({workspaceId:I.workspaceId,error:F}))}var N={workspaceId:I.workspaceId,gitProviderType:I.gitProviderType};return v.gitDatasourceClient.createDatasource(O(I)).pipe((0,it.w)(function(J){return v.gitNotificationService.showSuccessNotification("Trident_Git_Toast_Add_Account_Success",T),[_r({workspaceId:I.workspaceId,datasourceResponse:J}),_e({gitDatasourceRequest:N})]}),(0,Ct.K)(function(J){var st=v.gitErrorService.makeGitErrorFromHttpResponse("Git_Create_Datasource_Failed",J);return v.gitNotificationService.showErrorNotification(st,"Trident_Git_Toast_Add_Account_Fail_Title",T),(0,dt.of)(Ne({workspaceId:I.workspaceId,error:st}))}))}))}),this.gitDatasourcesConfigRecord=function(){var t;return(t={})[g.IS.AzureDevOps]={},t[g.IS.GitHub]={filterDatasource:An,convertDatasourceContractToModel:Un,convertCreateDatasourceRequestModelToContract:Nn},t}()}return t.\u0275fac=function(i){return new(i||t)(p.\u0275\u0275inject(l.eX),p.\u0275\u0275inject(K.aw),p.\u0275\u0275inject(Nt.jR),p.\u0275\u0275inject(zt.mn))},t.\u0275prov=p.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t}(),xn=function(){function t(e,i,n,u){var v=this;this.actions$=e,this.gitNotificationService=i,this.gitErrorService=n,this.gitRepairClient=u,this.gitRepairItems$=(0,l.GW)(function(){return v.actions$.pipe((0,l.l4)(li),(0,z.U)(function(C){var E=C.gitRepairState,I=v.gitNotificationService.showLoadingNotification("Trident_Git_Toast_Repair_Loading_Message");return(0,c.__assign)((0,c.__assign)({},E),{notificationId:I})}),(0,it.w)(function(C){return v.gitRepairClient.gitRepairItems(C.workspaceId,C.request).pipe((0,it.w)(function(E){var I=(0,c.__assign)((0,c.__assign)({},C),{response:E});return(0,dt.of)(di({gitRepairStateWithResponse:I}))}),(0,Ct.K)(function(E){var I=v.gitErrorService.makeGitErrorFromHttpResponse("Git_Repair_Items_Failed",E);return C?.notificationId&&(v.gitNotificationService.showErrorNotification(I,"Trident_Git_Error_Unable_To_Repair_Items_Title",C.notificationId),v.gitErrorService.showErrorHandlingDialog(I)),(0,dt.of)(ui({gitRepairState:C,error:I}))}))}))})}return t.\u0275fac=function(i){return new(i||t)(p.\u0275\u0275inject(l.eX),p.\u0275\u0275inject(zt.mn),p.\u0275\u0275inject(Nt.jR),p.\u0275\u0275inject(K.P9))},t.\u0275prov=p.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t}(),Rn=function(){function t(){}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=p.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=p.\u0275\u0275defineInjector({imports:[r.Aw.forFeature("git",Gr),l.sQ.forFeature([wr]),l.sQ.forFeature([Fr]),l.sQ.forFeature([xr]),l.sQ.forFeature([_n]),l.sQ.forFeature([fn]),l.sQ.forFeature([hn]),l.sQ.forFeature([In]),l.sQ.forFeature([Dn]),l.sQ.forFeature([Fn]),l.sQ.forFeature([Kn]),l.sQ.forFeature([xn]),K.Ug]}),t}(),Fi=(0,r.P1)(Mt,function(t){return t?.gitInitialization||Ee}),Pi=Qt.getSelectors(),jn=Pi.selectAll,zn=Pi.selectEntities,Ln=((0,r.P1)(Fi,function(t){return jn(t)}),(0,r.P1)(Fi,function(t){return zn(t)})),Wn=function(){function t(e){this.store=e}return t.prototype.getGitInitializationState=function(e){return this.store.select(function(e){return(0,r.P1)(Ln,function(i){return i[e]})}(e))},t.prototype.initializeGitConnection=function(e){return this.store.dispatch(S({gitInitializationState:e})),this.getGitInitializationState(e.workspaceId)},t.prototype.invalidateGitConnectionInitialization=function(e){return this.store.dispatch(s({workspaceId:e})),(0,dt.of)(void 0)},t.prototype.getGitInitializationCallState=function(e){return this.getGitInitializationState(e).pipe((0,z.U)(function(i){return i&&i.callState||L.Initial}))},t.\u0275fac=function(i){return new(i||t)(p.\u0275\u0275inject(r.yh))},t.\u0275prov=p.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),Mi=(0,r.P1)(Mt,function(t){return t?.gitSync||Te}),ki=Jt.getSelectors(),$n=ki.selectAll,Vn=ki.selectEntities,Ai=((0,r.P1)(Mi,function(t){return $n(t)}),(0,r.P1)(Mi,function(t){return Vn(t)}),(0,r.P1)(Mt,function(t){return t?.gitProgressIndicator||Fe})),Ui=pt.getSelectors(),Jn=Ui.selectAll,Xn=Ui.selectEntities,Yn=((0,r.P1)(Ai,function(t){return Jn(t)}),(0,r.P1)(Ai,function(t){return Xn(t)}),function(){function t(e){this.store=e}return t.prototype.switchBranch=function(e){return this.store.dispatch(Kt({gitSwitchBranchState:e})),this.store.select(Ve(e.workspaceId))},t.prototype.getSwitchBranchState=function(e){return this.store.select(Ve(e)).pipe((0,z.U)(function(i){return i&&i.callState||vt.Initial}))},t.\u0275fac=function(i){return new(i||t)(p.\u0275\u0275inject(r.yh))},t.\u0275prov=p.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()),Ni=(0,r.P1)(Mt,function(t){return t?.gitSessionStorage||Me}),bi=It.getSelectors(),qn=bi.selectAll,to=bi.selectEntities,eo=((0,r.P1)(Ni,function(t){return qn(t)}),(0,r.P1)(Ni,function(t){return to(t)})),ro=function(){function t(e){this.store=e}return t.prototype.selectGitProviderType=function(e,i){this.store.dispatch(Je({workspaceId:e,gitProviderType:i}))},t.prototype.selectDatasource=function(e,i){this.store.dispatch(Xe({workspaceId:e,datasourceOID:i}))},t.prototype.selectTempDatasource=function(e,i){this.store.dispatch(Ze({workspaceId:e,datasourceOID:i}))},t.prototype.selectOrganization=function(e,i){this.store.dispatch(ti({workspaceId:e,organization:i}))},t.prototype.selectRepository=function(e,i){this.store.dispatch(ei({workspaceId:e,repository:i}))},t.prototype.selectBranch=function(e,i){this.store.dispatch(ii({workspaceId:e,branch:i}))},t.prototype.selectRootDirectory=function(e,i){this.store.dispatch(ri({workspaceId:e,directory:i}))},t.prototype.selectUserAccount=function(e,i){this.store.dispatch(ni({workspaceId:e,userAccount:i}))},t.prototype.setDatasourceUrl=function(e,i,n){this.store.dispatch(Ye({workspaceId:e,organization:i,repository:n}))},t.prototype.selectWorkspaceCapacity=function(e,i){this.store.dispatch(ci({workspaceId:e,isWorkspaceOnCapacity:i}))},t.prototype.resetDatasourceUrl=function(e){this.store.dispatch(qe({workspaceId:e}))},t.prototype.loadGitSessionStorage=function(e){return this.store.select(function(e){return(0,r.P1)(eo,function(i){return i[e]})}(e)).pipe((0,z.U)(function(i){return i??{workspaceId:e}}))},t.prototype.configureCredentials=function(e){this.store.dispatch(oi({workspaceId:e}))},t.prototype.deleteCredentials=function(e){this.store.dispatch(ai({workspaceId:e}))},t.\u0275fac=function(i){return new(i||t)(p.\u0275\u0275inject(r.yh))},t.\u0275prov=p.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),Ki=(0,r.P1)(Mt,function(t){return t?.gitBranchOut||ke}),xi=jt.getSelectors(),no=xi.selectAll,oo=xi.selectEntities,Ri=((0,r.P1)(Ki,function(t){return no(t)}),(0,r.P1)(Ki,function(t){return oo(t)}),(0,r.P1)(Mt,function(t){return t?.gitDatasources||be})),ji=Xt.getSelectors(),co=ji.selectAll,so=ji.selectEntities,lo=((0,r.P1)(Ri,function(t){return co(t)}),(0,r.P1)(Ri,function(t){return so(t)})),zi=function(e){return(0,r.P1)(lo,function(i){return i[e]})},uo=function(){function t(e){this.store=e}return t.prototype.getDatasources=function(e){return this.store.select(zi(e.workspaceId)).pipe((0,z.U)(function(i){return{workspaceId:e.workspaceId,datasourcesRecord:i?.datasourcesRecord,callState:i?.callState||gt.Initial}}))},t.prototype.loadDatasources=function(e){return this.store.dispatch(_e({gitDatasourceRequest:e})),this.getDatasources(e)},t.prototype.createDatasource=function(e){return this.store.dispatch(Ue({request:e})),(0,dt.of)(void 0)},t.prototype.getDataSourcesCallState=function(e){return this.store.select(zi(e)).pipe((0,z.U)(function(i){return i?.callState||gt.Initial}))},t.\u0275fac=function(i){return new(i||t)(p.\u0275\u0275inject(r.yh))},t.\u0275prov=p.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),Li=(0,r.P1)(Mt,function(t){return t?.gitRepair||Ke}),Hi=ne.getSelectors(),po=Hi.selectAll,_o=Hi.selectEntities;(0,r.P1)(Li,function(t){return po(t)}),(0,r.P1)(Li,function(t){return _o(t)})},6393:function(yt,nt,a){a.r(nt),a.d(nt,{ExtensionHostGitModule:function(){return vt},createExtensionHostGitModule:function(){return ot}});var l=a(77476),r=a(50423),K=a(60756),c=a(81337),U=a(82762),G=a(11547),k=a(81905),A=a(59973),B=a(48787),w=a(14172),_=a(59822),V=a(17653),b=a(73471),P=a(60397),o=a(17899),R=a(10510),q=a(6814),Q=a(18016),tt=a(88),L=new r.InjectionToken("IFrames$"),_t=a(7452),ut=function(H){return H[H.Initial=0]="Initial",H[H.Loading=1]="Loading",H[H.Loaded=2]="Loaded",H}({}),ft=function(){function H(gt,ht,Gt,ct,W){var d=this;this.actions$=gt,this.messageBroker=ht,this.triLocalizationService=Gt,this.lazyProvider=ct,this.iframes$=W,this.sharedUtils=(0,Q.L4)(),this.onGetGitConnectionRecieved$=(0,o.Av)(this.actions$,this.messageBroker,b.Vm.getGitConnection,function(y){var g=y.workspaceObjectId;return(0,U.D)(d.lazyProvider.get("@trident/git/services/connection",R.AC)).pipe((0,k.w)(function(S){return S.ensureGitConnection(g)}),(0,A.h)(function(S){return S?.callState===ut.Loaded||(0,Q.pb)(S?.callState)}),(0,B.q)(1),(0,w.U)(function(S){if(S?.gitConnectionDetails&&!(0,Q.pb)(S?.callState)){var m=S.gitConnectionDetails;return b.Vm.getGitConnection.resolve({branchName:m.branchName,headRef:d.sharedUtils[m.gitProviderType].getHeadReference(m),lastSyncTime:(0,Q.n)(d.triLocalizationService,m?.lastSyncTime)})}return b.Vm.getGitConnection.resolve({})}),(0,_.K)(function(S){return(0,G.of)(b.Vm.getGitConnection.reject({error:S}))}))}),this.updateGitConnection$=(0,K.GW)(function(){return d.actions$.pipe((0,o.UF)(tt.E),(0,K.IC)(function(){return d.iframes$}),(0,w.U)(function(y){var S=y[1],f=(0,c.__rest)(y[0],["type"]);return Object.values(S).filter(function(s){return"initialized"===s?.initState}).map(function(s){var D=s.iframeId;return b.Vm.onGitConnectionChange(f)(D)})}),(0,V.b)(function(y){return y.forEach(function(g){delete g.lazyModuleId,d.messageBroker.send(g)})}))},{dispatch:!1})}return H.\u0275fac=function(ht){return new(ht||H)(r.\u0275\u0275inject(K.eX),r.\u0275\u0275inject(P.u),r.\u0275\u0275inject(_t.z),r.\u0275\u0275inject(q.rn),r.\u0275\u0275inject(L))},H.\u0275prov=r.\u0275\u0275defineInjectable({token:H,factory:H.\u0275fac}),H}();function ot(H,gt){return(0,r.createNgModule)(vt,r.Injector.create({providers:[{provide:L,useValue:H.iframes$}],parent:gt}))}var vt=function(){function H(){}return H.\u0275fac=function(ht){return new(ht||H)},H.\u0275mod=r.\u0275\u0275defineNgModule({type:H}),H.\u0275inj=r.\u0275\u0275defineInjector({imports:[l.CommonModule,K.sQ.forFeature([ft])]}),H}()},10510:function(yt,nt,a){a.d(nt,{Gg:function(){return w.Gg},eL:function(){return w.eL},rC:function(){return w.rC},AC:function(){return w.AC},a6:function(){return m},FF:function(){return Rt},Mv:function(){return w.Mv},rl:function(){return s.rl},EI:function(){return s.EI}}),a(81544);var r=a(209),K=a(35510),c=a(11547),U=a(48787),G=a(17653),k=a(59822),A=a(18016),B=a(65232),w=a(40773),_=a(50423),V=a(7452),b=a(54323),P=a(77476),o=a(17174),R=a(95825),q=a(65e3),Q=a(74913),tt=a(55490),L=a(20551),_t=a(64716),ut=a(85721),ft=a(89237),ot=a(55334);function vt(Y,j){if(1&Y&&(_.\u0275\u0275elementContainerStart(0),_.\u0275\u0275elementStart(1,"div",14),_.\u0275\u0275element(2,"tri-svg-icon",15),_.\u0275\u0275elementStart(3,"span"),_.\u0275\u0275text(4),_.\u0275\u0275elementEnd()(),_.\u0275\u0275elementContainerEnd()),2&Y){var at=_.\u0275\u0275nextContext();_.\u0275\u0275advance(1),_.\u0275\u0275attribute("data-testid","tri-git-connection-details-settings-v2-directory-error"),_.\u0275\u0275advance(1),_.\u0275\u0275property("name","error_circle_12_filled"),_.\u0275\u0275advance(2),_.\u0275\u0275textInterpolate1(" ",at.branchNameInputError$.value," ")}}function H(Y,j){if(1&Y&&(_.\u0275\u0275elementStart(0,"tri-dropdown-item",16)(1,"p"),_.\u0275\u0275text(2),_.\u0275\u0275elementEnd()()),2&Y){var at=j.$implicit;_.\u0275\u0275property("value",at),_.\u0275\u0275advance(2),_.\u0275\u0275textInterpolate(at.text)}}var gt=function(j){return{error:j}},ht="cancelButton",S="createButton",m=function(){function Y(j,at,mt,At,Ft,Dt,se){this.data=j,this.cdr=at,this.dr=mt,this.gitConnectionDiscoveryService=At,this.localizationService=Ft,this.telemetryService=Dt,this.gitErrorService=se,this._isCreateButtonEnabled=!1,this._isCreateButtonLoading=!1,this.branchNameInputError$=new K.X(void 0),this.unfiliteredBranchesList=this.data.branchesList.map(function(le){return{key:le,text:le}}),this.filteredBranchesList=this.unfiliteredBranchesList,this.dialogData={title:this.localizationService.get("Trident_Git_Create_New_Branch"),buttons:[{name:S,label:this.localizationService.get("Create_ButtonText"),buttonType:"primary",disabled:!this.isCreateButtonEnabled,isLoading:this.isCreateButtonLoading},{name:ht,label:this.localizationService.get("Cancel_ButtonText"),closeButton:!0}]}}return Y.prototype.onBranchNameChange=function(j){this.branchName=j,this.branchNameInputError$.next(this.validateBranchName(j)),this.calculateCreateButtonState()},Y.prototype.onParentBranchNameChange=function(j){this.parentBranch=j?.text,this.calculateCreateButtonState()},Y.prototype.onBranchesSearch=function(j){this.filteredBranchesList=this.unfiliteredBranchesList.filter(function(at){return!j||at.text.toLowerCase().includes(j.toLowerCase())})},Y.prototype.clickButton=function(j){j===S?this.handleCreateBranchRequest():j===ht&&this.dr.close()},Y.prototype.handleCreateBranchRequest=function(){var at,j=this;if(this.isCreateButtonLoading=!0,this.branchNameInputError$.next(void 0),!this.branchName)return this.isCreateButtonLoading=!1,void this.branchNameInputError$.next(this.localizationService.get("Trident_Git_Error_Git_InvalidBranchName_Message"));if(!this.parentBranch)return this.isCreateButtonLoading=!1,void this.branchNameInputError$.next(this.localizationService.get("Trident_Git_Error_Git_Create_Branch_Origin_Branch_Not_Found_Message"));if(void 0===this.data.details.gitProviderType||!this.data.details.organizationName||!this.data.details.repositoryName)return this.isCreateButtonLoading=!1,void this.branchNameInputError$.next(this.localizationService.get("Trident_Git_Error_Git_Create_Branch_Failed_Message"));var mt={branchName:this.branchName,parentBranchName:this.parentBranch,organizationName:this.data.details.organizationName,providerType:this.data.details.gitProviderType,repositoryId:this.data.details.repositoryName,projectName:this.data.details.projectName,datasourceOID:null===(at=this.data.details)||void 0===at?void 0:at.datasourceOID,workspaceId:this.data.workspaceId};this.gitConnectionDiscoveryService.createBranch(mt).pipe((0,U.q)(1),(0,G.b)(function(){j.isCreateButtonLoading=!1,j.telemetryService.logEvent({name:"Create branch request",properties:{isWorkspaceConnected:j.data.isWorkspaceConnected}}),j.dr.close(j.branchName)}),(0,k.K)(function(At){var Ft,Dt=null===(Ft=j.gitErrorService.makeGitErrorFromHttpResponse("Git_Create_Branch_Failed",At))||void 0===Ft?void 0:Ft.errorsDetails[0];return Dt&&j.gitErrorService.isDedicatedErrorMessageAvailable(Dt.errorType)?j.branchNameInputError$.next(Dt.message):j.branchNameInputError$.next(j.localizationService.get("Trident_Git_Error_Git_Create_Branch_Failed_Message")),j.isCreateButtonLoading=!1,(0,c.of)()})).subscribe()},Y.prototype.validateBranchName=function(j){return(0,A.tI)(j,this.localizationService)},Y.prototype.calculateCreateButtonState=function(){this.isCreateButtonEnabled=void 0!==this.branchName&&""!==this.branchName&&void 0!==this.parentBranch&&void 0===this.branchNameInputError$.value},Y.prototype.getDropDownOptions=function(){return{showFullContent:!1,dropdownHeight:this.filteredBranchesList.length>1?200:76,dropdownWidth:304}},Y.prototype.getDropdownOverlayOptions=function(j){return{dropdownHeight:30*Math.max(Math.min(j,12),1)+34}},Object.defineProperty(Y.prototype,"isCreateButtonEnabled",{get:function(){return this._isCreateButtonEnabled},set:function(at){this._isCreateButtonEnabled=at,this.dialogData.buttons[0].disabled=!at},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"isCreateButtonLoading",{get:function(){return this._isCreateButtonLoading},set:function(at){this._isCreateButtonLoading=at,this.dialogData.buttons[0].isLoading=at,this.dialogData.buttons[0].label=this.localizationService.get(at?"CapacityProvisioning_SpinnerText":"Create_ButtonText"),this.cdr.detectChanges()},enumerable:!1,configurable:!0}),Y.\u0275fac=function(at){return new(at||Y)(_.\u0275\u0275directiveInject(r.WI),_.\u0275\u0275directiveInject(_.ChangeDetectorRef),_.\u0275\u0275directiveInject(r.so),_.\u0275\u0275directiveInject(w.eL),_.\u0275\u0275directiveInject(V.z),_.\u0275\u0275directiveInject(b.t),_.\u0275\u0275directiveInject(B.jR))},Y.\u0275cmp=_.\u0275\u0275defineComponent({type:Y,selectors:[["tri-git-create-branch"]],decls:33,vars:37,consts:[[3,"dialogData","buttonClickEvent"],["target","_blank","href","https://go.microsoft.com/fwlink/?linkid=2235132","localize","LearnMore","localize-tooltip","LearnMore",1,"learn-more-link-icon"],[1,"accordion-area"],[1,"branch-name-input"],[1,"mandatory"],["type","text",3,"ngClass","ngModel","placeholder","ngModelChange"],[4,"ngIf"],[1,"parent-branch-selection"],[1,"header-and-tooltip"],["id","select-origin-branch-dropdown-label-v2"],["tri-svg-icon-16","",3,"name","triTooltip"],["aria-labelledby","select-origin-branch-dropdown-label-V2",3,"ngModel","isDisabled","options","valueChange"],[1,"dropdown-search",3,"value"],[3,"value",4,"ngFor","ngForOf"],["tri-textfield-error","",1,"error-message"],["tri-svg-icon-12","",3,"name"],[3,"value"]],template:function(at,mt){var At;(1&at&&(_.\u0275\u0275elementStart(0,"trident-dialog",0),_.\u0275\u0275listener("buttonClickEvent",function(Dt){return mt.clickButton(Dt)}),_.\u0275\u0275elementStart(1,"div"),_.\u0275\u0275text(2),_.\u0275\u0275pipe(3,"localize"),_.\u0275\u0275elementStart(4,"tri-link",1),_.\u0275\u0275text(5),_.\u0275\u0275pipe(6,"localize"),_.\u0275\u0275elementEnd()(),_.\u0275\u0275elementStart(7,"div",2)(8,"div",3)(9,"h4"),_.\u0275\u0275text(10),_.\u0275\u0275pipe(11,"localize"),_.\u0275\u0275elementStart(12,"span",4),_.\u0275\u0275text(13," *"),_.\u0275\u0275elementEnd()(),_.\u0275\u0275elementStart(14,"input",5),_.\u0275\u0275listener("ngModelChange",function(Dt){return mt.onBranchNameChange(Dt)}),_.\u0275\u0275pipe(15,"localize"),_.\u0275\u0275elementEnd(),_.\u0275\u0275template(16,vt,5,3,"ng-container",6),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementStart(17,"div",7)(18,"div",8)(19,"h4",9),_.\u0275\u0275text(20),_.\u0275\u0275pipe(21,"localize"),_.\u0275\u0275elementStart(22,"span",4),_.\u0275\u0275text(23," *"),_.\u0275\u0275elementEnd()(),_.\u0275\u0275element(24,"tri-svg-icon",10),_.\u0275\u0275pipe(25,"localize"),_.\u0275\u0275pipe(26,"localize"),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementStart(27,"tri-dropdown",11),_.\u0275\u0275listener("valueChange",function(Dt){return mt.onParentBranchNameChange(Dt)}),_.\u0275\u0275elementStart(28,"tri-dropdown-trigger"),_.\u0275\u0275text(29),_.\u0275\u0275pipe(30,"localize"),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementStart(31,"tri-search-box",12),_.\u0275\u0275listener("value",function(Dt){return mt.onBranchesSearch(Dt)}),_.\u0275\u0275elementEnd(),_.\u0275\u0275template(32,H,3,2,"tri-dropdown-item",13),_.\u0275\u0275elementEnd()()()()),2&at)&&(_.\u0275\u0275property("dialogData",mt.dialogData),_.\u0275\u0275advance(2),_.\u0275\u0275textInterpolate1(" ",_.\u0275\u0275pipeBind1(3,19,"Trident_Git_Create_New_Branch_Info")," "),_.\u0275\u0275advance(3),_.\u0275\u0275textInterpolate1(" ",_.\u0275\u0275pipeBind1(6,21,"LearnMore")," "),_.\u0275\u0275advance(5),_.\u0275\u0275textInterpolate1(" ",_.\u0275\u0275pipeBind1(11,23,"Trident_Git_Branch_Name")," "),_.\u0275\u0275advance(4),_.\u0275\u0275property("ngClass",_.\u0275\u0275pureFunction1(35,gt,void 0!==mt.branchNameInputError$.value))("ngModel",mt.branchName)("placeholder",_.\u0275\u0275pipeBind1(15,25,"Trident_Git_Branch_Name")),_.\u0275\u0275attribute("data-testid","branch-name-text-input"),_.\u0275\u0275advance(2),_.\u0275\u0275property("ngIf",void 0!==mt.branchNameInputError$.value),_.\u0275\u0275advance(4),_.\u0275\u0275textInterpolate1(" ",_.\u0275\u0275pipeBind1(21,27,"Trident_Git_Create_New_Branch_Create_From")," "),_.\u0275\u0275advance(4),_.\u0275\u0275property("name","info_16_regular")("triTooltip",_.\u0275\u0275pipeBind1(25,29,"Trident_Git_Create_New_Branch_Tooltip")),_.\u0275\u0275attribute("aria-label",_.\u0275\u0275pipeBind1(26,31,"Trident_Git_Create_New_Branch_Tooltip")),_.\u0275\u0275advance(3),_.\u0275\u0275property("ngModel",mt.parentBranch)("isDisabled",0===mt.data.branchesList.length)("options",mt.getDropDownOptions()),_.\u0275\u0275attribute("data-testid","parent-branch-dropdown"),_.\u0275\u0275advance(2),_.\u0275\u0275textInterpolate1(" ",null!==(At=mt.parentBranch)&&void 0!==At?At:_.\u0275\u0275pipeBind1(30,33,"Trident_Git_Create_New_Branch_Choose_Parent_Branch")," "),_.\u0275\u0275advance(3),_.\u0275\u0275property("ngForOf",mt.filteredBranchesList))},dependencies:[P.NgClass,P.NgForOf,P.NgIf,o.Fj,o.JJ,o.On,R.v,q.v,Q.M,tt.Z,L.M3,_t.l,ut.q,L.ii,ft.U,ot.Y],styles:["[_nghost-%COMP%]     mat-dialog-content{display:flex;flex-direction:column;font-size:var(--fontSizeBase300)}[_nghost-%COMP%]     .mat-mdc-dialog-content.dialog-body{display:flex;flex-direction:column;gap:16px;max-height:none}.accordion-area[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;padding:24px;border:1px solid var(--globalColorGrey82);border-radius:8px;gap:24px;height:100%}.accordion-area[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:var(--fontSizeBase300);font-weight:var(--fontWeightSemibold);margin:0 0 4px}.accordion-area[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   span.mandatory[_ngcontent-%COMP%]{color:var(--globalColorRedShade10)}.accordion-area[_ngcontent-%COMP%]   .branch-name-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;border-bottom:1px solid var(--globalColorGrey38);border:1px solid var(--globalColorGrey82);border-radius:4px;padding:6px 10px 6px 12px;box-sizing:border-box}.accordion-area[_ngcontent-%COMP%]   .branch-name-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-bottom:2px solid var(--globalColorBrand80)}.accordion-area[_ngcontent-%COMP%]   .branch-name-input[_ngcontent-%COMP%]   .input-error[_ngcontent-%COMP%]{border-color:var(--colorPaletteRedForeground1)}.accordion-area[_ngcontent-%COMP%]   .parent-branch-selection[_ngcontent-%COMP%]{margin-bottom:12px;display:flex;flex-direction:column;gap:4px}.accordion-area[_ngcontent-%COMP%]   .parent-branch-selection[_ngcontent-%COMP%]   .header-and-tooltip[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:20px}.accordion-area[_ngcontent-%COMP%]   .parent-branch-selection[_ngcontent-%COMP%]   .header-and-tooltip[_ngcontent-%COMP%]   tri-svg-icon[_ngcontent-%COMP%]{fill:var(--globalColorGrey38)}tri-dropdown[_ngcontent-%COMP%]{width:100%;overflow-x:hidden;text-overflow:ellipsis;color:var(--colorNeutralForeground4);box-sizing:border-box}tri-dropdown.error[_ngcontent-%COMP%]{border:1px solid var(--globalColorCranberryPrimary)}.dropdown-search[_ngcontent-%COMP%]{box-sizing:border-box;width:100%;margin-bottom:2px}.error-message[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:4px;color:var(--globalColorCranberryPrimary);fill:var(--globalColorCranberryPrimary)}.error-message[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:var(--fontSizeBase200)}.error-message[_ngcontent-%COMP%]   tri-svg-icon[_ngcontent-%COMP%]{min-width:12px;min-height:12px}"],changeDetection:0}),Y}(),s=(a(71707),a(31572)),D=a(32980),M=a(6814),$=a(78035),X=a(95228),et=a(16149),Z=a(17177),St=a(75476),Ot=a(57156),h=a(13281),x=a(8816),rt=a(2552),Et=a(12385),kt=a(44913),Ut=a(46303),bt=a(94757),Bt=a(84515),xt=a(42178),Tt=a(81339),Kt=a(15468),Rt=function(){function Y(){}return Y.\u0275fac=function(at){return new(at||Y)},Y.\u0275mod=_.\u0275\u0275defineNgModule({type:Y}),Y.\u0275inj=_.\u0275\u0275defineInjector({providers:[bt.G,Bt.e,xt.r,Kt.A,M.Ns.withLazyService(Tt.A,xt.r)],imports:[P.CommonModule,o.u5,D.sp,et.m,$.Y,Z.T6,x.w,h.fe,Ot.F,St.OT,X.W,rt.Ug,Et.K3,kt.lK,Ut.b]}),Y}()},81544:function(yt,nt,a){a.d(nt,{b:function(){return ct}});var l=a(209),r=a(30794),K=a(35510),c=a(11547),U=a(59017),G=a(48787),k=a(14172),A=a(81905),B=a(83317),w=a(59973),_=a(70628),V=a(18016),b=a(31572),P=a(40773),o=a(50423),R=a(7452),q=a(77476),Q=a(17174),tt=a(95825),L=a(74913),_t=a(55490),ut=a(55334);function ft(W,d){1&W&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"div",7),o.\u0275\u0275element(2,"tri-svg-icon",8),o.\u0275\u0275elementStart(3,"span"),o.\u0275\u0275text(4),o.\u0275\u0275pipe(5,"localize"),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementContainerEnd()),2&W&&(o.\u0275\u0275advance(1),o.\u0275\u0275attribute("data-testid","tri-git-auth-dialog-name-error"),o.\u0275\u0275advance(1),o.\u0275\u0275property("name","error_circle_12_filled"),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate1(" ",o.\u0275\u0275pipeBind1(5,3,"Pipelines_CreatePipelineDialog_NameAlreadyExistsError")," "))}function ot(W,d){1&W&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"div",7),o.\u0275\u0275element(2,"tri-svg-icon",8),o.\u0275\u0275elementStart(3,"span"),o.\u0275\u0275text(4),o.\u0275\u0275pipe(5,"localize"),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementContainerEnd()),2&W&&(o.\u0275\u0275advance(1),o.\u0275\u0275attribute("data-testid","tri-git-auth-dialog-pat-error"),o.\u0275\u0275advance(1),o.\u0275\u0275property("name","error_circle_12_filled"),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate1(" ",o.\u0275\u0275pipeBind1(5,3,"Trident_Git_Auth_Dialog_Param_PAT_Error")," "))}function vt(W,d){1&W&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"div",7),o.\u0275\u0275element(2,"tri-svg-icon",8),o.\u0275\u0275elementStart(3,"span"),o.\u0275\u0275text(4),o.\u0275\u0275pipe(5,"localize"),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementContainerEnd()),2&W&&(o.\u0275\u0275advance(1),o.\u0275\u0275attribute("data-testid","tri-git-auth-dialog-url-error"),o.\u0275\u0275advance(1),o.\u0275\u0275property("name","error_circle_12_filled"),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate1(" ",o.\u0275\u0275pipeBind1(5,3,"Trident_Git_Auth_Dialog_Param_RepoUrl_Error")," "))}var H=function(d){return{error:d}};function gt(W,d){if(1&W){var y=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"trident-dialog",1),o.\u0275\u0275listener("buttonClickEvent",function(f){o.\u0275\u0275restoreView(y);var s=o.\u0275\u0275nextContext();return o.\u0275\u0275resetView(s.clickButton(f))}),o.\u0275\u0275pipe(2,"localize"),o.\u0275\u0275elementStart(3,"div")(4,"h4"),o.\u0275\u0275text(5),o.\u0275\u0275pipe(6,"localize"),o.\u0275\u0275elementStart(7,"span",2),o.\u0275\u0275text(8," *"),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementStart(9,"div",3)(10,"input",4),o.\u0275\u0275listener("ngModelChange",function(f){o.\u0275\u0275restoreView(y);var s=o.\u0275\u0275nextContext();return o.\u0275\u0275resetView(s.displayName=f)})("ngModelChange",function(f){o.\u0275\u0275restoreView(y);var s=o.\u0275\u0275nextContext();return o.\u0275\u0275resetView(s.displayNameChanged(f))}),o.\u0275\u0275pipe(11,"async"),o.\u0275\u0275pipe(12,"localize"),o.\u0275\u0275pipe(13,"localize"),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(14,ft,6,5,"ng-container",0),o.\u0275\u0275pipe(15,"async"),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementStart(16,"div")(17,"h4"),o.\u0275\u0275text(18),o.\u0275\u0275pipe(19,"localize"),o.\u0275\u0275elementStart(20,"span",2),o.\u0275\u0275text(21," *"),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(22,"tri-svg-icon",5),o.\u0275\u0275pipe(23,"localize"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(24,"div",3)(25,"input",6),o.\u0275\u0275listener("ngModelChange",function(f){o.\u0275\u0275restoreView(y);var s=o.\u0275\u0275nextContext();return o.\u0275\u0275resetView(s.personalAccessToken=f)})("ngModelChange",function(f){o.\u0275\u0275restoreView(y);var s=o.\u0275\u0275nextContext();return o.\u0275\u0275resetView(s.personalAccessTokenChanged(f))}),o.\u0275\u0275pipe(26,"async"),o.\u0275\u0275pipe(27,"localize"),o.\u0275\u0275pipe(28,"localize"),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(29,ot,6,5,"ng-container",0),o.\u0275\u0275pipe(30,"async"),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementStart(31,"div")(32,"h4"),o.\u0275\u0275text(33),o.\u0275\u0275pipe(34,"localize"),o.\u0275\u0275element(35,"tri-svg-icon",5),o.\u0275\u0275pipe(36,"localize"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(37,"div",3)(38,"input",4),o.\u0275\u0275listener("ngModelChange",function(f){o.\u0275\u0275restoreView(y);var s=o.\u0275\u0275nextContext();return o.\u0275\u0275resetView(s.repositoryUrl=f)})("ngModelChange",function(f){o.\u0275\u0275restoreView(y);var s=o.\u0275\u0275nextContext();return o.\u0275\u0275resetView(s.repositoryUrlChanged(f))}),o.\u0275\u0275pipe(39,"async"),o.\u0275\u0275pipe(40,"localize"),o.\u0275\u0275pipe(41,"localize"),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(42,vt,6,5,"ng-container",0),o.\u0275\u0275pipe(43,"async"),o.\u0275\u0275elementEnd()()(),o.\u0275\u0275elementContainerEnd()}if(2&W){var g=d.ngIf,S=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("dialogData",S.dialogData)("closeButtonLabel",o.\u0275\u0275pipeBind1(2,27,"Cancel_ButtonText")),o.\u0275\u0275advance(4),o.\u0275\u0275textInterpolate1(" ",o.\u0275\u0275pipeBind1(6,29,"Trident_Git_Auth_Dialog_Param_DisplayName")," "),o.\u0275\u0275advance(5),o.\u0275\u0275property("ngClass",o.\u0275\u0275pureFunction1(63,H,o.\u0275\u0275pipeBind1(11,31,S.isDisplayNameInvalid$)))("ngModel",S.displayName)("placeholder",o.\u0275\u0275pipeBind1(12,33,g.localizationKeysList[1])),o.\u0275\u0275attribute("data-testid","tri-git-auth-dialog-display-name-input")("aria-label",o.\u0275\u0275pipeBind1(13,35,"Trident_Git_Auth_Dialog_Param_DisplayName")),o.\u0275\u0275advance(4),o.\u0275\u0275property("ngIf",o.\u0275\u0275pipeBind1(15,37,S.isDisplayNameInvalid$)),o.\u0275\u0275advance(4),o.\u0275\u0275textInterpolate1(" ",o.\u0275\u0275pipeBind1(19,39,"Trident_Git_Auth_Dialog_Param_PAT")," "),o.\u0275\u0275advance(4),o.\u0275\u0275property("name","info_16_regular")("triTooltip",o.\u0275\u0275pipeBind1(23,41,g.localizationKeysList[2])),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngClass",o.\u0275\u0275pureFunction1(65,H,o.\u0275\u0275pipeBind1(26,43,S.isPersonalAccessTokenInvalid$)))("ngModel",S.personalAccessToken)("placeholder",o.\u0275\u0275pipeBind1(27,45,g.localizationKeysList[3])),o.\u0275\u0275attribute("data-testid","tri-git-auth-dialog-pat-input")("aria-label",o.\u0275\u0275pipeBind1(28,47,"Trident_Git_Auth_Dialog_Param_PAT")),o.\u0275\u0275advance(4),o.\u0275\u0275property("ngIf",o.\u0275\u0275pipeBind1(30,49,S.isPersonalAccessTokenInvalid$)),o.\u0275\u0275advance(4),o.\u0275\u0275textInterpolate1(" ",o.\u0275\u0275pipeBind1(34,51,"Trident_Git_Auth_Dialog_Param_RepoUrl")," "),o.\u0275\u0275advance(2),o.\u0275\u0275property("name","info_16_regular")("triTooltip",o.\u0275\u0275pipeBind1(36,53,g.localizationKeysList[4])),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngClass",o.\u0275\u0275pureFunction1(67,H,o.\u0275\u0275pipeBind1(39,55,S.isRepositoryUrlInvalid$)))("ngModel",S.repositoryUrl)("placeholder",o.\u0275\u0275pipeBind1(40,57,g.localizationKeysList[5])),o.\u0275\u0275attribute("data-testid","tri-git-auth-dialog-url-input")("aria-label",o.\u0275\u0275pipeBind1(41,59,"Trident_Git_Auth_Dialog_Param_RepoUrl")),o.\u0275\u0275advance(4),o.\u0275\u0275property("ngIf",o.\u0275\u0275pipeBind1(43,61,S.isRepositoryUrlInvalid$))}}var ct=function(){function W(d,y,g,S,m,f){this.cdr=d,this.dr=y,this.gitDatasourceService=g,this.gitSessionStorageService=S,this.localizationService=m,this.data=f,this._isAddButtonEnabled=!1,this._isAddButtonLoading=!1,this.destroy$=new r.xQ,this.isDisplayNameInvalid$=new K.X(void 0),this.isPersonalAccessTokenInvalid$=new K.X(void 0),this.validatePersonalAccessToken=function(){return!1},this.isRepositoryUrlInvalid$=new K.X(!1),this.validateRepositoryUrl=function(){return!0},this.workspaceId=this.data,this.selectedGitProviderType$=(0,c.of)(),this.componentAssets$=(0,c.of)(),this.existingDatasourcesNames=[],this.dialogData={title:"",buttons:[{name:"Add",label:this.localizationService.get("ItemAction_Add"),buttonType:"primary",disabled:!this.isAddButtonEnabled,isLoading:this.isAddButtonLoading},{name:"Cancel",label:this.localizationService.get("Cancel_ButtonText"),closeButton:!0}]},this.displayName="",this.personalAccessToken="",this.repositoryUrl=""}return W.prototype.ngOnInit=function(){var d=this,y=(0,b.fA)();this.selectedGitProviderType$=this.gitSessionStorageService.loadGitSessionStorage(this.workspaceId).pipe((0,G.q)(1),(0,k.U)(function(g){return g?.selectedGitProviderType})),this.componentAssets$=this.selectedGitProviderType$.pipe((0,G.q)(1),(0,k.U)(function(g){if(g){var S=y[g];if(S)return d.dialogData.title=d.localizationService.get(S.localizationKeysList[0]),d.validatePersonalAccessToken=S.validationFunctionsList[0],d.validateRepositoryUrl=S.validationFunctionsList[1],S}})),this.selectedGitProviderType$.pipe((0,G.q)(1),(0,A.w)(function(g){return void 0!==g?d.gitDatasourceService.getDatasources({workspaceId:d.workspaceId,gitProviderType:g}).pipe((0,k.U)(function(S){return{gitProviderType:g,datasources:S}})):(0,c.of)({gitProviderType:void 0,datasources:void 0})})).subscribe(function(g){var S,m=g.gitProviderType,f=g.datasources;void 0!==f?.datasourcesRecord&&void 0!==m&&(d.existingDatasourcesNames=null!==(S=f.datasourcesRecord[m].map(function(D){return D.datasourceName.toLowerCase()}))&&void 0!==S?S:[])})},W.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},W.prototype.clickButton=function(d){"Add"===d?this.handleCreateDatasourceRequest():"Cancel"===d&&this.dr.close()},W.prototype.displayNameChanged=function(d){this.isDisplayNameInvalid$.next(this.existingDatasourcesNames.includes(d.toLowerCase())),this.calculateAddButtonState()},W.prototype.personalAccessTokenChanged=function(d){this.isPersonalAccessTokenInvalid$.next(!(""===this.personalAccessToken||this.validatePersonalAccessToken(d))),this.calculateAddButtonState()},W.prototype.repositoryUrlChanged=function(d){this.isRepositoryUrlInvalid$.next(""!==d&&!this.validateRepositoryUrl(d)),this.calculateAddButtonState()},W.prototype.handleCreateDatasourceRequest=function(){var d=this,y={workspaceId:this.workspaceId,gitProviderType:V.IS.GitHub,displayName:this.displayName,personalAccessToken:this.personalAccessToken,repositoryUrl:this.repositoryUrl};this.isAddButtonLoading=!0,(0,U.aj)([this.gitDatasourceService.getDatasourceCallState(this.workspaceId),this.gitDatasourceService.createDatasource(y)]).pipe((0,B.R)(this.destroy$),(0,w.h)(function(g){var S=g[0];return S===_.j3q.Completed||(0,V.pb)(S)}),(0,G.q)(1)).subscribe(function(g){var S=g[0];S===_.j3q.Completed?d.dr.close():(d.isAddButtonLoading=!1,(!(0,V.pb)(S)||!d.isRecoverableError(S))&&d.dr.close())})},W.prototype.calculateAddButtonState=function(){this.isAddButtonEnabled=!(""===this.displayName||this.isDisplayNameInvalid$.value||""===this.personalAccessToken||this.isPersonalAccessTokenInvalid$.value||""!==this.repositoryUrl&&this.isRepositoryUrlInvalid$.value)},W.prototype.isRecoverableError=function(d){return!1},Object.defineProperty(W.prototype,"isAddButtonEnabled",{get:function(){return this._isAddButtonEnabled},set:function(y){this._isAddButtonEnabled=y,this.dialogData.buttons[0].disabled=!y},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"isAddButtonLoading",{get:function(){return this._isAddButtonLoading},set:function(y){this._isAddButtonLoading=y,this.dialogData.buttons[0].isLoading=y,this.dialogData.buttons[0].label=this.localizationService.get(y?"Adding":"ItemAction_Add"),this.cdr.detectChanges()},enumerable:!1,configurable:!0}),W.\u0275fac=function(y){return new(y||W)(o.\u0275\u0275directiveInject(o.ChangeDetectorRef),o.\u0275\u0275directiveInject(l.so),o.\u0275\u0275directiveInject(P.Ae),o.\u0275\u0275directiveInject(_.gCl),o.\u0275\u0275directiveInject(R.z),o.\u0275\u0275directiveInject(l.WI))},W.\u0275cmp=o.\u0275\u0275defineComponent({type:W,selectors:[["tri-git-auth-dialog"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"dialogData","closeButtonLabel","buttonClickEvent"],[1,"mandatory"],["tri-textfield","",1,"input-container"],["type","text",3,"ngClass","ngModel","placeholder","ngModelChange"],["tri-svg-icon-16","",3,"name","triTooltip"],["type","password",3,"ngClass","ngModel","placeholder","ngModelChange"],["tri-textfield-error","",1,"error-message"],["tri-svg-icon-12","",3,"name"]],template:function(y,g){1&y&&(o.\u0275\u0275template(0,gt,44,69,"ng-container",0),o.\u0275\u0275pipe(1,"async")),2&y&&o.\u0275\u0275property("ngIf",o.\u0275\u0275pipeBind1(1,1,g.componentAssets$))},dependencies:[q.NgClass,q.NgIf,Q.Fj,Q.JJ,Q.On,tt.v,L.M,_t.Z,q.AsyncPipe,ut.Y],styles:["[_nghost-%COMP%]     mat-dialog-content{display:flex;flex-direction:column;gap:8px;font-size:var(--fontSizeBase300)}[_nghost-%COMP%]     mat-dialog-content div:not(.input-container){display:flex;flex-direction:column;gap:4px}[_nghost-%COMP%]     mat-dialog-content div:not(.input-container) h4{display:flex;flex-direction:row;align-items:center;gap:4px;margin:0;font-size:var(--fontSizeBase300);font-weight:var(--fontWeightSemibold)}[_nghost-%COMP%]     mat-dialog-content div:not(.input-container) h4 span.mandatory{color:var(--globalColorRedShade10)}[_nghost-%COMP%]     mat-dialog-content div:not(.input-container) h4 tri-svg-icon{fill:var(--globalColorGrey38)}[_nghost-%COMP%]     mat-dialog-content div:not(.input-container) input{width:100%;border-bottom:1px solid var(--globalColorGrey38)}[_nghost-%COMP%]     mat-dialog-content div:not(.input-container) input.error{border:1px solid var(--globalColorCranberryPrimary)}[_nghost-%COMP%]     mat-dialog-content div:not(.input-container) input:focus{border-bottom:2px solid var(--globalColorBrand80)}[_nghost-%COMP%]     mat-dialog-content div:not(.input-container) .error-message{display:flex;flex-direction:row}[_nghost-%COMP%]     mat-dialog-content div:not(.input-container) .error-message span{font-size:var(--fontSizeBase200)}[_nghost-%COMP%]     mat-dialog-actions .button-container{gap:8px;margin:16px 0 0}[_nghost-%COMP%]     .mat-mdc-dialog-content.dialog-body{max-height:none}"],changeDetection:0}),W}()},71707:function(yt,nt,a){a.d(nt,{A:function(){return q}});var l=a(48787),r=a(81905),K=a(17653),c=a(59822),U=a(209),G=a(11547),k=a(65232),A=a(70628),B=a(12385),w=a(40773),_=a(50423),V=a(7452),b=a(95825),P=a(55334),o="cancelButton",R="logoutButton",q=function(){function Q(tt,L,_t,ut,ft,ot,vt,H){this.data=tt,this.dr=L,this.localizationService=_t,this.gitConfigureCredentialsService=ut,this.gitSessionStorageService=ft,this.gitNotificationService=ot,this.gitConnectionService=vt,this.gitErrorService=H,this.dialogData={title:this.localizationService.get("Trident_Git_Log_Out_Dialog_Title"),buttons:[{name:R,label:this.localizationService.get("Trident_Git_Log_Out"),buttonType:"primary"},{name:o,label:this.localizationService.get("Cancel_ButtonText"),closeButton:!0}]}}return Q.prototype.clickButton=function(tt){tt===R?this.handleLogOutRequest():tt===o&&this.dr.close(tt)},Q.prototype.handleLogOutRequest=function(){var tt=this;this.gitConnectionService.getGitConnection(this.data.workspaceId).pipe((0,l.q)(1),(0,r.w)(function(L){return L?.gitConnectionDetails?tt.gitConfigureCredentialsService.deleteConfiguredCredentials(tt.data.workspaceId):(0,G.of)(void 0)}),(0,l.q)(1),(0,K.b)(function(){tt.gitSessionStorageService.deleteCredentials(tt.data.workspaceId),tt.gitNotificationService.showSuccessNotification("Trident_Git_Toast_Logout_Success"),tt.dr.close(R)}),(0,c.K)(function(L){var _t=tt.gitErrorService.makeGitErrorFromHttpResponse("Git_Delete_Credentials_Failed",L);return tt.gitNotificationService.showErrorNotification(_t,"Trident_Git_Toast_Logout_Fail"),[]})).subscribe()},Q.\u0275fac=function(L){return new(L||Q)(_.\u0275\u0275directiveInject(U.WI),_.\u0275\u0275directiveInject(U.so),_.\u0275\u0275directiveInject(V.z),_.\u0275\u0275directiveInject(w.id),_.\u0275\u0275directiveInject(A.gCl),_.\u0275\u0275directiveInject(B.mn),_.\u0275\u0275directiveInject(w.rC),_.\u0275\u0275directiveInject(k.jR))},Q.\u0275cmp=_.\u0275\u0275defineComponent({type:Q,selectors:[["tri-git-logout-dialog"]],decls:4,vars:4,consts:[[3,"dialogData","buttonClickEvent"]],template:function(L,_t){1&L&&(_.\u0275\u0275elementStart(0,"trident-dialog",0),_.\u0275\u0275listener("buttonClickEvent",function(ft){return _t.clickButton(ft)}),_.\u0275\u0275elementStart(1,"p"),_.\u0275\u0275text(2),_.\u0275\u0275pipe(3,"localize"),_.\u0275\u0275elementEnd()()),2&L&&(_.\u0275\u0275property("dialogData",_t.dialogData),_.\u0275\u0275advance(2),_.\u0275\u0275textInterpolate1(" ",_.\u0275\u0275pipeBind1(3,2,"Trident_Git_Log_Out_Dialog_Message")," "))},dependencies:[b.v,P.Y],encapsulation:2,changeDetection:0}),Q}()},31572:function(yt,nt,a){a.d(nt,{NJ:function(){return ct},P0:function(){return W},rl:function(){return ht},fA:function(){return d},ge:function(){return S},_k:function(){return m},Tr:function(){return g},EI:function(){return y},yp:function(){return f}});var l=a(11547),r=a(18016),K=a(48787),c=a(14172);function U(s){if(!s?.project)throw"Git_AzureDevOpsMissingProjectName";if(s?.datasourceOID)throw"Git_AzureDevOpsInvalidParameters"}function G(s){if(!s?.projectName)throw"Git_AzureDevOpsMissingProjectName"}function k(s){if(!s?.projectName)throw"Git_AzureDevOpsMissingProjectName"}function A(s){return void 0!==s?.selectedUserAccount}function B(s){if(!s?.projectName)throw"Git_AzureDevOpsMissingProjectName"}function w(s,D){return D.getGitConnection(s).pipe((0,K.q)(1),(0,c.U)(function(M){return void 0===M?.gitConnectionDetails}))}var _=a(59017),V="https://github.com";function o(s){return{datasourceOID:s.id}}function R(s){var D;return null!==(D=s.isConfigured)&&void 0!==D&&D}function q(s,D,M){return(0,_.aj)([M.loadGitSessionStorage(s),D.getGitConnection(s)]).pipe((0,c.U)(function($){var et=$[1];return void 0!==et?.gitConnectionDetails}))}function Q(s,D,M){if(D&&D!==V){if(!ut(D))throw new Error("Git_Invalid_Github_Repository_Url");var $=D.split("/");s.setDatasourceUrl(M,$[3],$[4])}else s.resetDatasourceUrl(M)}var tt=["Trident_Git_Auth_Dialog_Title_GitHub","Trident_Git_Auth_Dialog_Param_DisplayName_Placeholder","Trident_Git_Auth_Dialog_Param_PAT_Tooltip_GitHub","Trident_Git_Auth_Dialog_Param_PAT_Placeholder_GitHub","Trident_Git_Auth_Dialog_Param_RepoUrl_Tooltip_GitHub","Trident_Git_Auth_Dialog_Param_RepoUrl_Placeholder"],L=[function(s){return s.toLowerCase().startsWith("ghp_")||s.startsWith("github_pat_")},ut];function ut(s){var D=s.replace(/\/$|\.git$/g,"");return/^https:\/\/github\.com\/[^/]+\/[^/]+$/.test(D)}function ft(s){if(!s?.datasourceOID)throw"Git_GitHubMissingDatasourceOID"}function ot(s){if(s?.projectName)throw"Git_GitHubInvalidParameters";if(!s?.datasourceOID)throw"Git_GitHubMissingDatasourceOID"}function vt(s){if(s?.projectName)throw"Git_GitHubInvalidParameters";if(!s?.datasourceOID)throw"Git_GitHubMissingDatasourceOID"}function H(s){if(s?.projectName)throw"Git_GitHubInvalidParameters";if(!s?.datasourceOID)throw"Git_GitHubMissingDatasourceOID"}function gt(s,D){return s?.filter(function(M){return M.url===D||M.url===V})}function ht(s){return"".concat(V,"/").concat(s.organizationName,"/").concat(s.repositoryName)}var ct=function(s){return s[s.ShowADOAccountsList=0]="ShowADOAccountsList",s[s.ShowGitHubDataSourcesList=1]="ShowGitHubDataSourcesList",s}({}),W=function(s){return s.UserAccountDetails="UserAccountDetails",s.DatasourceDetails="DatasourceDetails",s}({});function d(){var s;return(s={})[r.IS.AzureDevOps]=void 0,s[r.IS.GitHub]={localizationKeysList:tt,validationFunctionsList:L},s}function y(){var s;return(s={})[r.IS.AzureDevOps]={displayMode:ct.ShowADOAccountsList,connectedProviderDetailsType:W.UserAccountDetails,doesGitProviderNeedsDatasource:!1,canTheUserLogOut:w,shouldShowSwitchAccount:function(){return(0,l.of)(!1)},isWorkspaceConnectedToGitProvider:A},s[r.IS.GitHub]={displayMode:ct.ShowGitHubDataSourcesList,connectedProviderDetailsType:W.DatasourceDetails,doesGitProviderNeedsDatasource:!0,canTheUserLogOut:function(){return(0,l.of)(!0)},shouldShowSwitchAccount:q,isWorkspaceConnectedToGitProvider:R,selectDatasourceSideEffect:Q,filterDatasources:gt,getFilteringValue:ht},s}function g(){var s;return(s={})[r.IS.AzureDevOps]={},s[r.IS.GitHub]={createConfigureCredentialsRequestFromDatasource:o},s}function S(){var s;return(s={})[r.IS.AzureDevOps]={getBranchesValidator:U,createBranchRequestValidator:G,createDirectoryRequestValidator:k},s[r.IS.GitHub]={getBranchesValidator:ft,createBranchRequestValidator:ot,createDirectoryRequestValidator:vt},s}function m(){var s;return(s={})[r.IS.AzureDevOps]={gitConnectionDetailsContractValidator:B},s[r.IS.GitHub]={gitConnectionDetailsContractValidator:H},s}function f(s){var D=new Map;return D.set(r.IS.GitHub,function(s){var D,M;return null===(M=null===(D=s.featureSwitches)||void 0===D?void 0:D.gitHubTenantSettingsEnabled)||void 0===M||M}(s)),D.set(r.IS.AzureDevOps,!0),D}},94757:function(yt,nt,a){a.d(nt,{G:function(){return k}});var l=a(33554),r=a(58417),K=a(48787),c=a(14172),U=a(94771),G=a(50423),k=function(){function A(B){this.featureSwitchService=B,this.featureSwitchStatusSubjects={}}return A.prototype.isTenantAdminEnabled=function(B){return this.featureSwitchStatusSubjects[B]||(this.featureSwitchStatusSubjects[B]=new l.t(1),this.fetchFeatureSwitchStatus(B).subscribe(this.featureSwitchStatusSubjects[B])),this.featureSwitchStatusSubjects[B].asObservable()},A.prototype.fetchFeatureSwitchStatus=function(B){var w=this;return!0!==this.featureSwitchService.featureSwitches.tridentGitSwitchesDelegation?new r.y(function(_){_.next(!!w.featureSwitchService.featureSwitches.gitIntegrationTenantSwitchEnabled),_.complete()}):this.featureSwitchService.getWorkspaceDelegatedSetting({name:"GitIntegrationTenantSwitchEnabled",workspaceObjectId:B}).pipe((0,K.q)(1),(0,c.U)(function(_){return _.isEnabled||!1}))},A.\u0275fac=function(w){return new(w||A)(G.\u0275\u0275inject(U.V$))},A.\u0275prov=G.\u0275\u0275defineInjectable({token:A,factory:A.\u0275fac,providedIn:"root"}),A}()},84515:function(yt,nt,a){a.d(nt,{e:function(){return U}});var l=a(14172),r=a(2552),K=a(31572),c=a(50423),U=function(){function G(k){this.gitConnectionDiscoveryClient=k,this.serviceConfig=(0,K.ge)()}return G.prototype.getOrganizations=function(k,A){return this.gitConnectionDiscoveryClient.getOrganizations(k,A)},G.prototype.getProjects=function(k,A,B){return this.gitConnectionDiscoveryClient.getProjects(k,A,B)},G.prototype.getRepositories=function(k,A,B,w){return this.gitConnectionDiscoveryClient.getRepositories(k,A,B,w)},G.prototype.getBranches=function(k){var A,B=null===(A=this.serviceConfig[k.gitProviderType])||void 0===A?void 0:A.getBranchesValidator;return B&&B(k),this.gitConnectionDiscoveryClient.getBranches(k.workspaceId,k.gitProviderType,k.organization,k.repository,k?.project,k?.datasourceOID)},G.prototype.createBranch=function(k){var A,B=null===(A=this.serviceConfig[k.providerType])||void 0===A?void 0:A.createBranchRequestValidator;return B&&B(k),this.gitConnectionDiscoveryClient.createBranch(k)},G.prototype.createDirectory=function(k){var A,B=null===(A=this.serviceConfig[k.providerType])||void 0===A?void 0:A.createDirectoryRequestValidator;return B&&B(k),this.gitConnectionDiscoveryClient.createDirectory(k)},G.prototype.getRelatedWorkspaces=function(k){return this.gitConnectionDiscoveryClient.getRelatedWorkspaces(k).pipe((0,l.U)(function(A){return A.relatedWorkspaces}))},G.\u0275fac=function(A){return new(A||G)(c.\u0275\u0275inject(r.bE))},G.\u0275prov=c.\u0275\u0275defineInjectable({token:G,factory:G.\u0275fac,providedIn:"root"}),G}()},81339:function(yt,nt,a){a.d(nt,{A:function(){return r}});var r=new(a(50423).InjectionToken)("GitConnectionService")},42178:function(yt,nt,a){a.d(nt,{r:function(){return _}});var l=a(11547),r=a(48787),K=a(81905),c=a(17653),U=a(59822),G=a(70628),k=a(94757),A=a(31572),B=a(50423),w=a(85732),_=function(){function V(b,P,o){this.gitConnectionFacade=b,this.gitAdminSwitchesService=P,this.store=o,this.serviceConfig=(0,A._k)()}return V.prototype.loadGitConnection=function(b){var P=this;return this.gitAdminSwitchesService.isTenantAdminEnabled(b).pipe((0,r.q)(1),(0,K.w)(function(o){return o?P.gitConnectionFacade.loadGitConnection(b):(0,l.of)(void 0)}),(0,r.q)(1),(0,c.b)(function(o){var R;if(o?.gitConnectionDetails){var q=null===(R=P.serviceConfig[o.gitConnectionDetails.gitProviderType])||void 0===R?void 0:R.gitConnectionDetailsContractValidator;q&&q(o.gitConnectionDetails)}}),(0,U.K)(function(){return(0,l.of)(void 0)}))},V.prototype.ensureGitConnection=function(b,P){var o=this;return void 0===P&&(P=!1),P?this.gitConnectionFacade.ensureGitConnection(b):this.gitAdminSwitchesService.isTenantAdminEnabled(b).pipe((0,r.q)(1),(0,K.w)(function(R){return R?o.gitConnectionFacade.ensureGitConnection(b):(0,l.of)(void 0)}))},V.prototype.getGitConnection=function(b){var P=this;return this.gitAdminSwitchesService.isTenantAdminEnabled(b).pipe((0,r.q)(1),(0,K.w)(function(o){return o?P.gitConnectionFacade.getGitConnection(b):(0,l.of)(void 0)}))},V.prototype.updateDatasourceInGitConnection=function(b,P){this.store.dispatch((0,G.V_q)({workspaceId:b,datasourceOID:P}))},V.prototype.saveGitConnection=function(b){var P;if(b?.gitConnectionDetails){var o=null===(P=this.serviceConfig[b.gitConnectionDetails.gitProviderType])||void 0===P?void 0:P.gitConnectionDetailsContractValidator;o&&o(b.gitConnectionDetails)}return this.gitConnectionFacade.saveGitConnection(b)},V.prototype.deleteGitConnection=function(b){return this.gitConnectionFacade.deleteGitConnection(b)},V.prototype.getGitConnectionOperationState=function(b){var P=this;return this.gitAdminSwitchesService.isTenantAdminEnabled(b).pipe((0,r.q)(1),(0,K.w)(function(o){return o?P.gitConnectionFacade.getGitConnectionOperationState(b):(0,l.of)(G.Gui.Initial)}))},V.prototype.checkoutBranch=function(b){return this.gitConnectionFacade.checkoutBranch(b)},V.\u0275fac=function(P){return new(P||V)(B.\u0275\u0275inject(G.f$Z),B.\u0275\u0275inject(k.G),B.\u0275\u0275inject(w.yh))},V.\u0275prov=B.\u0275\u0275defineInjectable({token:V,factory:V.\u0275fac,providedIn:"root"}),V}()},15468:function(yt,nt,a){a.d(nt,{A:function(){return K}});var l=a(70628),r=a(50423),K=function(){function c(U){this.gitDatasourcesFacade=U}return c.prototype.createDatasource=function(U){return this.gitDatasourcesFacade.createDatasource(U)},c.prototype.discoverDatasources=function(U){return this.gitDatasourcesFacade.loadDatasources(U)},c.prototype.getDatasources=function(U){return this.gitDatasourcesFacade.getDatasources(U)},c.prototype.getDatasourceCallState=function(U){return this.gitDatasourcesFacade.getDataSourcesCallState(U)},c.\u0275fac=function(G){return new(G||c)(r.\u0275\u0275inject(l.iAv))},c.\u0275prov=r.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac,providedIn:"root"}),c}()},40773:function(yt,nt,a){a.d(nt,{Gg:function(){return l.G},id:function(){return V},eL:function(){return c.e},rC:function(){return G.r},AC:function(){return U.A},Ae:function(){return k.A},Mv:function(){return b}});var l=a(94757),r=a(70628),c=a(84515),U=a(81339),G=a(42178),k=a(15468),A=a(60225),B=a(2552),w=a(31572),_=a(50423),V=function(){function P(o){this.gitDatasourceClient=o,this.datasourceServiceConfigRecord=(0,w.Tr)()}return P.prototype.configureCredentials=function(o,R,q){var Q,tt=null===(Q=this.datasourceServiceConfigRecord[o])||void 0===Q?void 0:Q.createConfigureCredentialsRequestFromDatasource;return tt?this.gitDatasourceClient.postConfigureCredentials(R,tt(q)):(0,A._)("Git_UnsupportedGitProvider")},P.prototype.deleteConfiguredCredentials=function(o){return this.gitDatasourceClient.deleteConfiguredCredentials(o)},Object.defineProperty(P.prototype,"getDatasourceServiceConfig",{get:function(){return this.datasourceServiceConfigRecord},enumerable:!1,configurable:!0}),P.\u0275fac=function(R){return new(R||P)(_.\u0275\u0275inject(B.Kl))},P.\u0275prov=_.\u0275\u0275defineInjectable({token:P,factory:P.\u0275fac,providedIn:"root"}),P}(),b=function(){function P(o){this.gitSwitchBranchFacade=o}return P.prototype.switchBranch=function(o){return this.gitSwitchBranchFacade.switchBranch(o)},P.prototype.getSwitchBranchState=function(o){return this.gitSwitchBranchFacade.getSwitchBranchState(o)},P.\u0275fac=function(R){return new(R||P)(_.\u0275\u0275inject(r.CCT))},P.\u0275prov=_.\u0275\u0275defineInjectable({token:P,factory:P.\u0275fac,providedIn:"root"}),P}()},65232:function(yt,nt,a){a.d(nt,{jR:function(){return W},Nn:function(){return k}});var l=a(77476),r=a(209),K=a(78035),c=a(32980),U=a(17177),G=a(50423),k=function(){function S(){}return S.\u0275fac=function(f){return new(f||S)},S.\u0275mod=G.\u0275\u0275defineNgModule({type:S}),S.\u0275inj=G.\u0275\u0275defineInjector({imports:[l.CommonModule,r.Is,K.Y,c.sp,U.T6]}),S}(),A=a(81337),B=a(18016),w=a(67758),_=a(41838),V=a(12315),b=a(95825),P=a(74913);function o(S,m){if(1&S&&(G.\u0275\u0275elementStart(0,"div",1),G.\u0275\u0275element(1,"tri-svg-icon",2),G.\u0275\u0275elementStart(2,"span",3),G.\u0275\u0275text(3),G.\u0275\u0275elementEnd()()),2&S){var f=m.$implicit;G.\u0275\u0275advance(1),G.\u0275\u0275property("sprite",f.sprite)("name",f.iconName),G.\u0275\u0275advance(1),G.\u0275\u0275attribute("aria-label",f.name),G.\u0275\u0275advance(1),G.\u0275\u0275textInterpolate(f.name)}}var R=function(){function S(){this.artifactList=[]}return S.\u0275fac=function(f){return new(f||S)},S.\u0275cmp=G.\u0275\u0275defineComponent({type:S,selectors:[["tri-git-items-list"]],inputs:{artifactList:"artifactList"},decls:1,vars:1,consts:[["class","artifacts-list",4,"ngFor","ngForOf"],[1,"artifacts-list"],["tri-svg-icon-22","",1,"artifact-icon",3,"sprite","name"],["tabIndex","0",1,"artifact-name","trimmedTextWithEllipsis"]],template:function(f,s){1&f&&G.\u0275\u0275template(0,o,4,4,"div",0),2&f&&G.\u0275\u0275property("ngForOf",s.artifactList)},dependencies:[l.NgForOf,P.M],styles:[".artifacts-list[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:center;min-height:40px;flex-grow:1;gap:8px}.artifacts-list[_ngcontent-%COMP%]   .artifact-icon[_ngcontent-%COMP%]{fill:var(--globalColorGrey26)}.artifacts-list[_ngcontent-%COMP%]   .artifact-name[_ngcontent-%COMP%]{font-size:var(--fontSizeBase300);font-weight:var(--fontWeightRegular);line-height:var(--lineHeightBase300);color:var(--colorNeutralForeground1)}"]}),S}(),q=a(55334);function Q(S,m){if(1&S&&G.\u0275\u0275element(0,"tri-git-items-list",5),2&S){var f=G.\u0275\u0275nextContext();G.\u0275\u0275property("artifactList",f.failedArtifacts)}}function tt(S,m){if(1&S&&(G.\u0275\u0275elementStart(0,"div",8)(1,"span"),G.\u0275\u0275element(2,"tri-svg-icon",9),G.\u0275\u0275elementEnd(),G.\u0275\u0275elementStart(3,"span",10),G.\u0275\u0275text(4),G.\u0275\u0275elementEnd()()),2&S){var f=m.$implicit;G.\u0275\u0275advance(2),G.\u0275\u0275property("sprite","git-icons")("name","bullet_dot_8"),G.\u0275\u0275advance(1),G.\u0275\u0275attribute("aria-label",f),G.\u0275\u0275advance(1),G.\u0275\u0275textInterpolate(f)}}function L(S,m){if(1&S&&(G.\u0275\u0275elementStart(0,"div",6),G.\u0275\u0275template(1,tt,5,4,"div",7),G.\u0275\u0275elementEnd()),2&S){var f=G.\u0275\u0275nextContext();G.\u0275\u0275advance(1),G.\u0275\u0275property("ngForOf",f.data.moreInfo)}}function _t(S,m){if(1&S){var f=G.\u0275\u0275getCurrentView();G.\u0275\u0275elementStart(0,"div",11),G.\u0275\u0275listener("click",function(){G.\u0275\u0275restoreView(f);var M=G.\u0275\u0275nextContext();return G.\u0275\u0275resetView(M.collapseExpand())}),G.\u0275\u0275pipe(1,"localizeFormat"),G.\u0275\u0275elementStart(2,"span"),G.\u0275\u0275text(3),G.\u0275\u0275pipe(4,"localize"),G.\u0275\u0275pipe(5,"localize"),G.\u0275\u0275elementEnd(),G.\u0275\u0275element(6,"tri-svg-icon",12),G.\u0275\u0275elementEnd()}if(2&S){var s=G.\u0275\u0275nextContext();G.\u0275\u0275attribute("aria-expanded",!s.showDetailsToggle)("aria-label",G.\u0275\u0275pipeBind2(1,4,s.showDetailsToggle?"ClickToExpandFormat":"ClickToCollapseFormat","errorDetails")),G.\u0275\u0275advance(3),G.\u0275\u0275textInterpolate(s.showDetailsToggle?G.\u0275\u0275pipeBind1(4,7,"Generic_HideDetails"):G.\u0275\u0275pipeBind1(5,9,"Generic_ShowDetails")),G.\u0275\u0275advance(3),G.\u0275\u0275property("name",s.showDetailsToggle?"chevron_up_16_regular":"chevron_down_16_regular")}}function ut(S,m){if(1&S&&(G.\u0275\u0275elementStart(0,"p")(1,"b"),G.\u0275\u0275text(2),G.\u0275\u0275pipe(3,"localize"),G.\u0275\u0275elementEnd(),G.\u0275\u0275text(4),G.\u0275\u0275elementEnd()),2&S){var f=m.$implicit;G.\u0275\u0275advance(2),G.\u0275\u0275textInterpolate1("",f.shouldLocalize?G.\u0275\u0275pipeBind1(3,2,f.name):f.name," "),G.\u0275\u0275advance(2),G.\u0275\u0275textInterpolate1("",f.content," ")}}function ft(S,m){if(1&S&&(G.\u0275\u0275elementContainerStart(0),G.\u0275\u0275elementStart(1,"div",13),G.\u0275\u0275template(2,ut,5,4,"p",14),G.\u0275\u0275elementEnd(),G.\u0275\u0275elementContainerEnd()),2&S){var f=G.\u0275\u0275nextContext();G.\u0275\u0275advance(2),G.\u0275\u0275property("ngForOf",f.details)}}var ot=function(){function S(m,f,s){var D,M,$,X;this.dialogRef=m,this.extensionManifestService=f,this.data=s,this.showDetailsToggle=!1,this.errorDetails=this.data.errorDetails,this.requestInfo=this.data.requestInfo,this.details=[],this.artifactType=null===(M=null===(D=this.errorDetails)||void 0===D?void 0:D.failedArtifactMetadata)||void 0===M?void 0:M.artifactType,this.artifactName=null===(X=null===($=this.errorDetails)||void 0===$?void 0:$.failedArtifactMetadata)||void 0===X?void 0:X.artifactDisplayName,this.failedArtifacts=[],this.failedArtifactsSize=0,this.createGitErrorDetailsFromGitError()}return S.prototype.convertDialogData=function(m){return{title:m.title,buttons:m.buttons}},S.prototype.close=function(){return this.dialogRef.close()},S.prototype.collapseExpand=function(){this.showDetailsToggle=!this.showDetailsToggle},S.prototype.getErrorMoreInfoSize=function(){var m,f;return null!==(f=null===(m=this.data.moreInfo)||void 0===m?void 0:m.length)&&void 0!==f?f:0},S.prototype.createGitErrorDetailsFromGitError=function(){var m,f,s,D,M,$;if(null!=this&&this.errorDetails){if(this.requestInfo.clusterUri&&this.details.push(this.createGitErrorDetail("ServerError_ClusterUriText",this.requestInfo.clusterUri)),this.requestInfo.activityId&&this.details.push(this.createGitErrorDetail("ServerError_ActivityIdText",this.requestInfo.activityId)),this.requestInfo.requestId&&this.details.push(this.createGitErrorDetail("AdditionalErrorInfo_RequestIdText",this.requestInfo.requestId)),!(null===(m=this.errorDetails)||void 0===m)&&m.workloadErrorCode&&this.details.push(this.createGitErrorDetail("Workload_Error_Code",this.errorDetails.workloadErrorCode)),this.getFailedArtifactsDetails(),null!==(f=this.errorDetails)&&void 0!==f&&f.workloadErrorMessage){var X=this.errorDetails.workloadErrorMessage,et=(X.match(/{(\d+)}/g)||[]).length;if(null!==(s=this.errorDetails)&&void 0!==s&&s.workloadErrorParameters){var Z=this.errorDetails.workloadErrorParameters,St=Z.length;if(et===St){for(var Ot=X,h=0;h<St;h++)Ot=Ot.replace("{".concat(h,"}"),Z[h]);this.details.push(this.createGitErrorDetail("Workload_Error_Message",Ot))}}else 0===et&&this.details.push(this.createGitErrorDetail("Workload_Error_Message",X))}if(null!==(D=this.errorDetails)&&void 0!==D&&D.errorParameters)for(var x in this.errorDetails.errorParameters)this.details.push(this.createGitErrorDetail(x,this.errorDetails.errorParameters[x],!1));this.details.push(this.createGitErrorDetail("ServerError_TimestampText",null!==($=null===(M=null==this?void 0:this.errorDetails)||void 0===M?void 0:M.time)&&void 0!==$?$:(new Date).toString()))}},S.prototype.createGitErrorDetail=function(m,f,s){return void 0===s&&(s=!0),{name:m,content:f,shouldLocalize:s}},S.prototype.getFailedArtifactsDetails=function(){var m,f,s;if(this.artifactType&&this.artifactName){var D=this.extensionManifestService.getFrontendArtifactType(this.artifactType),M=(0,_.zp)(D);this.failedArtifacts.push({name:this.artifactName,iconName:M?.name,sprite:M?.sprite})}else if(null!==(m=this.errorDetails)&&void 0!==m&&m.errorParameters)for(var $=null===(s=null===(f=this.errorDetails)||void 0===f?void 0:f.errorParameters.Artifacts)||void 0===s?void 0:s.slice(1,-1),X=/Display Name: '([^']+)' Type: '([^']+)'/g,et=void 0;null!==(et=X.exec($));)D=this.extensionManifestService.getFrontendArtifactType(et[2]),V.RG.includes(D)&&(M=(0,_.zp)(D),this.failedArtifacts.push({name:et[1],iconName:M?.name,sprite:M?.sprite}));this.failedArtifactsSize=this.failedArtifacts.length},S.\u0275fac=function(f){return new(f||S)(G.\u0275\u0275directiveInject(r.so),G.\u0275\u0275directiveInject(w.vC),G.\u0275\u0275directiveInject(r.WI))},S.\u0275cmp=G.\u0275\u0275defineComponent({type:S,selectors:[["tri-git-error-dialog"]],decls:7,vars:9,consts:[[3,"dialogData","closeButtonLabel","buttonClickEvent"],["class","git-artifact-list",3,"artifactList",4,"ngIf"],["class","git-info-list",4,"ngIf"],["class","details-selector",3,"click",4,"ngIf"],[4,"ngIf"],[1,"git-artifact-list",3,"artifactList"],[1,"git-info-list"],["class","info-list-item",4,"ngFor","ngForOf"],[1,"info-list-item"],["calss","info-icon","tri-svg-icon-8","",3,"sprite","name"],[1,"list-item"],[1,"details-selector",3,"click"],["tri-svg-icon-16","",3,"name"],[1,"error-details-container"],[4,"ngFor","ngForOf"]],template:function(f,s){1&f&&(G.\u0275\u0275elementStart(0,"trident-dialog",0),G.\u0275\u0275listener("buttonClickEvent",function(){return s.close()}),G.\u0275\u0275pipe(1,"localize"),G.\u0275\u0275text(2),G.\u0275\u0275template(3,Q,1,1,"tri-git-items-list",1),G.\u0275\u0275template(4,L,2,1,"div",2),G.\u0275\u0275template(5,_t,7,11,"div",3),G.\u0275\u0275template(6,ft,3,1,"ng-container",4),G.\u0275\u0275elementEnd()),2&f&&(G.\u0275\u0275property("dialogData",s.convertDialogData(s.data))("closeButtonLabel",G.\u0275\u0275pipeBind1(1,7,"Close")),G.\u0275\u0275advance(2),G.\u0275\u0275textInterpolate1(" ",s.data.content," "),G.\u0275\u0275advance(1),G.\u0275\u0275property("ngIf",s.failedArtifactsSize>0),G.\u0275\u0275advance(1),G.\u0275\u0275property("ngIf",s.getErrorMoreInfoSize()>0),G.\u0275\u0275advance(1),G.\u0275\u0275property("ngIf",s.details.length>0),G.\u0275\u0275advance(1),G.\u0275\u0275property("ngIf",s.showDetailsToggle))},dependencies:[l.NgForOf,l.NgIf,b.v,P.M,R,q.Y,q.A],styles:[".mat-mdc-dialog-content{display:flex;flex-direction:column;margin-top:4px;margin-bottom:16px;gap:12px}.details-selector[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:6px;font-weight:600}.error-details-container[_ngcontent-%COMP%]{font-size:12px;display:flex;flex-direction:column;align-items:flex-start;padding:12px;max-height:228px;overflow-y:scroll;background:var(--globalColorGrey96);border-radius:4px}.error-details-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.git-artifact-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;overflow-y:auto;min-height:40px;max-height:200px}.git-info-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.info-list-item[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;gap:8px}"],changeDetection:0}),S}(),vt=a(7452),H=a(54323),W=function(){function S(m,f,s){this.dialogService=m,this.localizationService=f,this.telemetryService=s,this.dialogWidth="564px",this.defaultDialogClass="dialog-style"}return S.prototype.getErrorContent=function(m){var f,s,D=null===(f=B.A6[m])||void 0===f?void 0:f.messageKey,M=null===(s=B.A6[m])||void 0===s?void 0:s.titleKey;return(!D||!M)&&(m.startsWith("Git_")||m.startsWith("Alm"))&&this.telemetryService.logEvent({name:"Git error which is not mapped to content occurred",properties:{errorType:m}}),{message:this.localizationService.get(D??"ErrorDialogHelperText_TechnicalDetails"),title:this.localizationService.get(M??"ErrorMessage_DefaultTitle")}},S.prototype.getErrorMoreInfo=function(m){var f,s;return null!==(s=null===(f=B.jZ[m])||void 0===f?void 0:f.moreInfoKeys)&&void 0!==s?s:[]},S.prototype.handleSyncGitError=function(m,f){var s=this.makeGitErrorFromHttpResponse(m,f);return this.showErrorHandlingDialog(s),s},S.prototype.handleAlmGitError=function(m,f){return this.isGitAlmError(m,f)?this.makeGitErrorFromAlmResponse(m,f):this.makeClientSideGitError(m)},S.prototype.handleClientSideGitError=function(m,f){this.logValidationError(m);var s=this.makeClientSideGitError(m,f);return this.showErrorHandlingDialog(s),s},S.prototype.logValidationError=function(m){this.telemetryService.logEvent({name:"Validation error occurred",properties:{errorType:m}})},S.prototype.showErrorHandlingDialog=function(m){var f=this.createGitErrorDialogModel(m);return this.dialogService.open(f.componentRef,f.config)},S.prototype.createGitErrorDialogModel=function(m){var s,D,M,f=this,$=this.localizationService.get("Close"),X=(0,B.lz)(m),et=this.getErrorMoreInfo(X?.errorType).map(function(St){return f.localizationService.get(St)}),Z={title:X.title,buttons:[{name:$,label:$,buttonType:null}],content:X.message,moreInfo:et,errorDetails:X,requestInfo:{clusterUri:null===(s=m.errorInfo)||void 0===s?void 0:s.clusterUri,activityId:null===(D=m.errorInfo)||void 0===D?void 0:D.activityId,requestId:null===(M=m.errorInfo)||void 0===M?void 0:M.requestId}};return{componentRef:ot,config:{width:this.dialogWidth,panelClass:this.defaultDialogClass,data:Z}}},S.prototype.makeClientSideGitError=function(m,f){var s=this.getErrorContent(m);return(0,B.iX)([{errorType:m,title:s.title,message:s.message,errorParameters:f}])},S.prototype.makeGitErrorFromHttpResponse=function(m,f){var M,s=this.parseHttpWorkloadError(f),D=this.parseHttpError(f);M=(0,B.KJ)(f)?"Git_AdoConditionalAccessNotSupported":"Git_Switch_Branch_Item_Not_Found"===m?"Git_Switch_Branch_Item_Not_Found":"Git_Branch_Out_Failed"===m?this.getBranchOutError(f):D?.code?D.code:m;var $=this.getErrorContent(M),X=(0,A.__assign)((0,A.__assign)((0,A.__assign)({},s),D),{errorType:M,time:(new Date).toString(),title:$.title,message:$.message}),et={requestId:f?.requestId,clusterUri:window.clusterUri,activityId:f?.activityId,statusCode:f?.status};return(0,B.iX)([X],et)},S.prototype.makeGitErrorFromAlmResponse=function(m,f){var D,M,$,X,et,s=this,Z=[];if(f.gitInteractiveOperationErrorDetailsList)null===(D=f.gitInteractiveOperationErrorDetailsList)||void 0===D||D.forEach(function(Et){var kt,Ut,bt,Bt,xt,Tt,Kt;et=s.parseAlmWorkloadError(Et);var Rt=s.getErrorContent(et.workloadErrorCode),Y={dialogMessage:Rt.message,interactionType:null!==(bt=null===(Ut=null===(kt=Et?.artifactErrorDetails)||void 0===kt?void 0:kt.UserInteractionRequest)||void 0===Ut?void 0:Ut.InteractionType)&&void 0!==bt?bt:B.s_.None,options:null!==(Tt=null===(xt=null===(Bt=Et?.artifactErrorDetails)||void 0===Bt?void 0:Bt.UserInteractionRequest)||void 0===xt?void 0:xt.Options)&&void 0!==Tt?Tt:[]},j=(0,A.__assign)((0,A.__assign)({},et),{errorType:m,time:null===(Kt=f.lastUpdatedTime)||void 0===Kt?void 0:Kt.toString(),title:Rt.title,message:Rt.message,interactiveOperationInfo:Y});Z.push(j)});else if(f.gitNonInteractiveOperationErrorDetails){et=this.parseAlmWorkloadError(f.gitNonInteractiveOperationErrorDetails);var St=null!==(M=et?.workloadErrorCode)&&void 0!==M?M:m,Ot=this.getErrorContent(St),h=(0,A.__assign)((0,A.__assign)({},et),{errorType:St,time:null===($=f.lastUpdatedTime)||void 0===$?void 0:$.toString(),title:Ot.title,message:Ot.message});if((0,B.VQ)(m,f)){var x=this.getErrorContent("Git_GitProviderCommitRejectedByPolicy");h.errorType="Git_GitProviderCommitRejectedByPolicy",h.title=x.title,h.message=x.message}else(0,B.Ss)(m,f)&&(x=this.getErrorContent("Git_GitProviderCommitMaxSizeExceeded"),h.errorType="Git_GitProviderCommitMaxSizeExceeded",h.title=x.title,h.message=x.message);Z.push(h)}var rt={requestId:null===(X=f.gitNonInteractiveOperationErrorDetails)||void 0===X?void 0:X.requestId,clusterUri:window.clusterUri,retryOperationId:f.gitOperationId};return(0,B.iX)(Z,rt)},S.prototype.isDedicatedErrorMessageAvailable=function(m){return m in B.A6},S.prototype.parseHttpError=function(m){var f,s,D;return{code:null===(f=m?.error)||void 0===f?void 0:f.code,errorParameters:null===(D=null===(s=m?.error)||void 0===s?void 0:s["pbi.error"])||void 0===D?void 0:D.parameters}},S.prototype.parseHttpWorkloadError=function(m){var f,s,D,M,$,X,et,Z,St=null===(D=null===(s=null===(f=m?.error)||void 0===f?void 0:f["pbi.error"])||void 0===s?void 0:s.parameters)||void 0===D?void 0:D.GitErrorDetails;return St&&(Z=JSON.parse(St)),Z?{failedArtifactMetadata:Z?.artifactType&&Z?.artifactDisplayName?{artifactType:Z.artifactType,artifactDisplayName:Z.artifactDisplayName,artifactLogicalId:Z.artifactLogicalId}:void 0,workloadErrorCode:null!==($=null===(M=Z?.errorDetails)||void 0===M?void 0:M.ErrorCode)&&void 0!==$?$:Z?.errorCode,workloadErrorMessage:null===(X=Z?.errorDetails)||void 0===X?void 0:X.ErrorMessage,workloadErrorParameters:null===(et=Z?.errorDetails)||void 0===et?void 0:et.ErrorParameters}:{failedArtifactMetadata:void 0,workloadErrorCode:void 0,workloadErrorMessage:void 0,workloadErrorParameters:void 0}},S.prototype.parseAlmWorkloadError=function(m){var f,s,D,M,$;return{failedArtifactMetadata:{artifactDisplayName:m.artifactDisplayName,artifactType:m.artifactType,artifactLogicalId:m.artifactLogicalId},workloadErrorCode:null!==(s=null===(f=m.artifactErrorDetails)||void 0===f?void 0:f.ErrorCode)&&void 0!==s?s:m.errorCode,workloadErrorMessage:null===(D=m.artifactErrorDetails)||void 0===D?void 0:D.ErrorMessage,workloadErrorCategory:null===(M=m.artifactErrorDetails)||void 0===M?void 0:M.ErrorCategory,workloadErrorParameters:null===($=m?.artifactErrorDetails)||void 0===$?void 0:$.ErrorParameters}},S.prototype.isGitAlmError=function(m,f){return f.gitOperationStatus===B.wM.Failed&&(!!f.gitNonInteractiveOperationErrorDetails||!!f.gitInteractiveOperationErrorDetailsList)&&(0,B.ve)(m)},S.prototype.getBranchOutError=function(m){var f,s,D,M,$,X=null===(f=m.error)||void 0===f?void 0:f.code;if("Alm_InvalidBranchOutRequest_OperationFailureAfterFolderCreation"===X){var et=null===($=null===(M=null===(D=null===(s=m.error)||void 0===s?void 0:s["pbi.error"])||void 0===D?void 0:D.details)||void 0===M?void 0:M[0])||void 0===$?void 0:$.code;if(et)return et}else if(X)return X;return"Git_Branch_Out_Failed"},S.\u0275fac=function(f){return new(f||S)(G.\u0275\u0275inject(c.uQ),G.\u0275\u0275inject(vt.z),G.\u0275\u0275inject(H.t))},S.\u0275prov=G.\u0275\u0275defineInjectable({token:S,factory:S.\u0275fac,providedIn:"root"}),S}();(0,A.__assign)({errorType:"Git_MergePolicyNotSpecified"},{title:"MockTitle",message:"MockMessage"})},12385:function(yt,nt,a){a.d(nt,{mn:function(){return b},K3:function(){return c}});var l=a(77476),r=a(65232),K=a(50423),c=function(){function P(){}return P.\u0275fac=function(R){return new(R||P)},P.\u0275mod=K.\u0275\u0275defineNgModule({type:P}),P.\u0275inj=K.\u0275\u0275defineInjector({imports:[l.CommonModule,r.Nn]}),P}(),U=a(81337),G=a(42888),k=a(73471),A={style:"Trident"},B=(0,U.__assign)((0,U.__assign)({},A),{notificationType:k.k$.Loading}),w=(0,U.__assign)((0,U.__assign)({},A),{notificationType:k.k$.Success}),_=(0,U.__assign)((0,U.__assign)({},A),{notificationType:k.k$.Error}),V=a(7452),b=function(){function P(o,R){this.localizationService=o,this.notificationService=R}return P.prototype.hideNotification=function(o){return this.notificationService.hide(o)},P.prototype.hideCurrentNotification=function(){this.notificationService.hideCurrentNotification()},P.prototype.showLoadingNotification=function(o,R){var q=(0,U.__assign)((0,U.__assign)({},B),{title:this.localizationService.get(o),message:R?this.localizationService.get(R):void 0});return this.notificationService.notify(q)},P.prototype.showSuccessNotification=function(o,R){var q=(0,U.__assign)((0,U.__assign)({},w),{id:R,title:this.localizationService.get(o)});return this.notificationService.notify(q)},P.prototype.showErrorNotification=function(o,R,q){var Q={action:"open.git.error.dialog",data:o},tt={displayText:this.localizationService.get("View_Details"),action:Q};return this.notificationService.notify((0,U.__assign)((0,U.__assign)({},_),{id:q,duration:G.S.Long,title:this.localizationService.get(R),message:this.localizationService.get("View_Details_Learn_More"),actionButtons:[tt]}))},P.\u0275fac=function(R){return new(R||P)(K.\u0275\u0275inject(V.z),K.\u0275\u0275inject(G.g))},P.\u0275prov=K.\u0275\u0275defineInjectable({token:P,factory:P.\u0275fac,providedIn:"root"}),P}()},18016:function(yt,nt,a){a.d(nt,{wM:function(){return H},u9:function(){return vt},IS:function(){return ut},s_:function(){return L},Z_:function(){return gt},I:function(){return D},f7:function(){return s},LO:function(){return M},Rv:function(){return W},cW:function(){return $},tI:function(){return Ot},lz:function(){return k},n:function(){return Z},A6:function(){return c},jZ:function(){return U},xT:function(){return A},L4:function(){return St},KJ:function(){return B},VQ:function(){return b},Ss:function(){return o},ve:function(){return Q},pb:function(){return G},Fc:function(){return w},yG:function(){return tt},E6:function(){return V},iX:function(){return R},QJ:function(){return ot}});var l,r,K=function(h){return h.AdalMultiFactorAuthEnrollRequiredErrorCode="AdalMultiFactorAuthEnrollRequiredErrorCode",h.AdalMultiFactorAuthRequiredErrorCode="AdalMultiFactorAuthRequiredErrorCode",h.AdalDeviceObjectNotFoundInTenantErrorCode="AdalDeviceObjectNotFoundInTenantErrorCode",h}({}),c=((l={}).Git_MissingRequiredParam={messageKey:"Trident_Git_Error_Git_Provider_API_Message",titleKey:"Trident_Git_Error_Git_Provider_API_Title"},l.Git_DirectoryHasInvalidSystemFiles={messageKey:"Trident_Git_Error_Git_DirectoryHasInvalidSystemFiles_Message",titleKey:"Trident_Git_Error_Git_DirectoryHasInvalidSystemFiles_Title"},l.Git_SelectedArtifactsDoNotBelongToWorkspace={messageKey:"Trident_Git_Error_Git_Undo_Failed_Message",titleKey:"Trident_Git_Error_Unable_To_Undo_Title"},l.Git_AzureDevOpsMissingProjectName={messageKey:"Trident_Git_Error_Git_Connect_Failed_Message",titleKey:"Trident_Git_Error_Git_Connect_Failed_Title"},l.Git_UndoDuplicateArtifacts={messageKey:"Trident_Git_Error_Git_Undo_Failed_Message",titleKey:"Trident_Git_Error_Unable_To_Undo_Title"},l.Git_CommitInvalidArtifacts={messageKey:"Trident_Git_Error_Git_InvalidCommitRequest_Message",titleKey:"Trident_Git_Error_Unable_To_Commit_Title"},l.Git_GitProviderApiFailed={messageKey:"Trident_Git_Error_Git_Provider_API_Message",titleKey:"Trident_Git_Error_Git_Provider_API_Title"},l.Git_GitProviderDeserialization={messageKey:"Trident_Git_Error_Git_Provider_API_Message",titleKey:"Trident_Git_Error_Git_Provider_API_Title"},l.Git_GitProviderResourceNotExistOrUnauthorized={messageKey:"Trident_Git_Error_Git_No_Permissions_ADO_Message",titleKey:"Trident_Git_Error_Git_No_Permissions_ADO_Title"},l.Git_WorkspaceAlreadyConnectedToGit={messageKey:"Trident_Git_Error_Git_Workspace_Already_Connected_To_Git_Message",titleKey:"Trident_Git_Error_Git_Workspace_Already_Connected_To_Git_Title"},l.Git_WorkspaceNotConnectedToGit={messageKey:"Trident_Git_Error_Git_Workspace_Not_Connected_To_Git_Message",titleKey:"Trident_Git_Error_Git_Workspace_Not_Connected_To_Git_Title"},l.Git_WorkspaceHasNoCapacity={messageKey:"Trident_Git_Error_Git_Workspace_Has_No_Capacity_Message",titleKey:"Pipelines_Error_FoldersHasNoCapacity_Title"},l.Git_InvalidPath={messageKey:"Trident_Git_Error_Git_Connection_Details_Message",titleKey:"Trident_Git_Error_Git_Connection_Details_Title"},l.Alm_InvalidRequest_PurgeRequired={messageKey:"Trident_Git_Error_Dataset_PurgeData_Message",titleKey:"Trident_Git_Error_AlmOperation_Update_Title"},l.Git_PotentialCrossGeo={messageKey:"Trident_Git_Error_Git_PotentialCrossGeo_Message",titleKey:"Trident_Git_Error_Git_PotentialCrossGeo_Title"},l.Git_DuplicateDisplayNameAndType={messageKey:"Trident_Git_Error_Git_DuplicateDisplayNameAndType_Message",titleKey:"Trident_Git_Error_Unable_To_Complete_Action_Title"},l.Git_CommitDuplicateArtifacts={messageKey:"Trident_Git_Error_Git_CommitDuplicateArtifacts_Message",titleKey:"Trident_Git_Error_Git_CommitDuplicateArtifacts_Title"},l.Git_HeadNotSynced={messageKey:"Trident_Git_Error_Git_HeadNotSynced_Message",titleKey:"Trident_Git_Error_Git_HeadNotSynced_Title"},l.Git_IdentifierExceededMaxLength={messageKey:"Trident_Git_Error_Git_IdentifierExceededMaxLength_Message",titleKey:"Trident_Git_Error_Unable_To_Complete_Action_Title"},l.Git_InvalidCommitRequest={messageKey:"Trident_Git_Error_Git_InvalidCommitRequest_Message",titleKey:"Trident_Git_Error_Unable_To_Commit_Title"},l.Git_InvalidUndoRequest={messageKey:"Trident_Git_Error_Git_Undo_Failed_Message",titleKey:"Trident_Git_Error_Unable_To_Undo_Title"},l.Git_InvalidBranchName={messageKey:"Trident_Git_Error_Git_InvalidBranchName_Message",titleKey:"Trident_Git_Error_Git_InvalidBranchName_Title"},l.Git_InvalidDirectoryName={messageKey:"Trident_Git_Error_Git_InvalidDirectoryName_Message",titleKey:"Trident_Git_Error_Git_InvalidDirectoryName_Title"},l.Git_InvalidRequestNoFilesToCommit={messageKey:"Trident_Git_Error_Git_InvalidRequestNoFilesToCommit_Message",titleKey:"Trident_Git_Error_Git_InvalidRequestNoFilesToCommit_Title"},l.Git_PotentialMergeConflict={messageKey:"Trident_Git_Error_Git_PotentialMergeConflict_Message",titleKey:"Trident_Git_Error_Git_PotentialMergeConflict_Title"},l.Git_GitConnectionAlreadyInitialized={messageKey:"Trident_Git_Error_Git_GitConnectionAlreadyInitialized_Message",titleKey:"Trident_Git_Error_Git_GitConnectionAlreadyInitialized_Title"},l.Git_UnexpectedResponseFromGitProvider={messageKey:"Trident_Git_Error_Git_Provider_API_Message",titleKey:"Trident_Git_Error_Git_Provider_API_Title"},l.Git_DependenciesDeletionFailed={messageKey:"Trident_Git_Error_Git_DependenciesDeletionFailed_Message",titleKey:"Trident_Git_Error_Unable_To_Complete_Action_Title"},l.Git_MissingDependencies={messageKey:"Trident_Git_Error_Git_MissingDependencies_Message",titleKey:"Trident_Git_Error_Unable_To_Update_Title"},l.Git_MissingDependenciesSwitchBranch={messageKey:"Trident_Git_Error_Git_Switch_Branch_MissingDependencies_Message",titleKey:"Trident_Git_Error_Git_Switch_Branch_Failed_Title"},l.Git_CyclicDependencyDetectedSwitchBranch={messageKey:"Trident_Git_Error_Git_Switch_Branch_MissingDependencies_Message",titleKey:"Trident_Git_Error_Git_Switch_Branch_Failed_Title"},l.Git_CyclicDependencyDetected={messageKey:"Trident_Git_Error_Git_MissingDependencies_Message",titleKey:"Trident_Git_Error_Unable_To_Update_Title"},l.Git_ItemNotFound={titleKey:"Trident_Git_Error_Git_ItemNotFound_Title",messageKey:"Trident_Git_Error_Git_ItemNotFound_Message"},l.Git_PathTooLong={titleKey:"Trident_Git_Error_Git_PathTooLong_Title",messageKey:"Trident_Git_Error_Git_PathTooLong_Message"},l.Git_GitOperationWithSensitivityLabelsNotSupported={messageKey:"Trident_Git_Error_Git_GitOperationWithSensitivityLabelsNotSupported_Message",titleKey:"Trident_Git_Error_Git_GitOperationWithSensitivityLabelsNotSupported_Title"},l.Git_BranchDeleted={messageKey:"Trident_Git_Error_Git_BranchDeleted_Message",titleKey:"Trident_Git_Error_Unable_To_Complete_Action_Title"},l.Git_GitProviderCommitRejectedByPolicy={messageKey:"Trident_Git_Error_GitProviderCommitRejectedByPolicy_Message",titleKey:"Trident_Git_Error_GitProviderCommitRejectedByPolicy_Title"},l.Git_DirectoryNameDiffersByCase={messageKey:"Trident_Git_Error_Git_ItemNotFound_Message",titleKey:"Trident_Git_Error_Git_ItemNotFound_Title"},l.Git_GitIntegrationTenantAdminSwitchDisabled={messageKey:"Trident_Git_TenantAdminSwitchDisabled_Message",titleKey:"Trident_Git_TenantAdminSwitchDisabled_Title"},l.Git_GitProviderCommitMaxSizeExceeded={messageKey:"Trident_Git_Error_GitProviderCommitMaxSizeExceeded_Message",titleKey:"Trident_Git_Error_GitProviderCommitMaxSizeExceeded_Title"},l.Git_ExportDefinitionFailed={messageKey:"Trident_Git_Error_ExportDefinitionFailed_Message",titleKey:"Trident_Git_Error_ExportDefinitionFailed_Title"},l.Git_DiscoverDependenciesFailed={messageKey:"Trident_Git_Error_DiscoverDependenciesFailed_Message",titleKey:"Trident_Git_Error_DiscoverDependenciesFailed_Title"},l.Git_GitProviderUnauthorizedGuestUser={messageKey:"Trident_Git_Error_GitProviderUnauthorizedGuestUser_Message",titleKey:"Trident_Git_Error_GitProviderUnauthorizedGuestUser_Title"},l.Git_GitProviderCommitObjectRejected={messageKey:"Trident_Git_Error_GitProviderCommitObjectRejected_Message",titleKey:"Trident_Git_Error_GitProviderCommitRejectedByPolicy_Title"},l.Git_BranchNameAlreadyExists={messageKey:"Trident_Git_Error_Git_Branch_Name_Already_Exists_Message",titleKey:"Trident_Git_Error_Git_InvalidBranchName_Title"},l.Git_GitProviderAadUserStateError={messageKey:"Trident_Git_Error_GitProviderAadUserStateError_Message",titleKey:"Trident_Git_Error_Unable_To_Complete_Action_Title"},l.Git_Disconnect_No_Connection={messageKey:"Trident_Git_Error_Git_Disconnect_No_Connection_Message",titleKey:"Trident_Git_Error_Git_Disconnect_Failed_Title"},l.Git_Invalid_Connection_Details={messageKey:"Trident_Git_Error_Git_Invalid_Connection_Details_Message",titleKey:"Trident_Git_Error_Git_Invalid_Connection_Details_Title"},l.Git_ConnectionDetailsNotFound={messageKey:"Trident_Git_Error_Git_Connection_Details_Not_Found_Message",titleKey:"ErrorMessage_DefaultTitle"},l.Git_Workspace_Not_Initialized={messageKey:"Trident_Git_Error_Git_Workspace_Not_Initialized_Message",titleKey:"Trident_Git_Error_Git_Workspace_Not_Initialized_Title"},l.Git_Create_Branch_Origin_Branch_Not_Found={messageKey:"Trident_Git_Error_Git_Create_Branch_Origin_Branch_Not_Found_Message",titleKey:"Trident_Git_Error_Git_Create_Branch_Origin_Branch_Not_Found_Title"},l.Git_GitSwitchBranchWithUncommittedChanges={messageKey:"Trident_Git_Error_Git_Switch_Branch_Uncommited_Changes_Message",titleKey:"Trident_Git_Error_Git_Switch_Branch_Failed_Title"},l.GitGitInvalidSwitchBranchRequest={messageKey:"Trident_Git_Error_Git_Switch_Branch_Invalid_Request_Message",titleKey:"Trident_Git_Error_Git_Switch_Branch_Failed_Title"},l.GitSwitchBranchIdenticalBranchName={messageKey:"Trident_Git_Error_Git_Switch_Branch_Identical_Branch_Name_Message",titleKey:"Trident_Git_Error_Git_Switch_Branch_Failed_Title"},l.Git_Switch_Branch_Item_Not_Found={messageKey:"Trident_Git_Error_Git_Switch_Branch_Item_Not_Found_Message",titleKey:"Trident_Git_Error_Git_Switch_Branch_Failed_Title"},l.Git_Switch_Branch_Head_Not_Synced={messageKey:"Trident_Git_Error_Git_Switch_Branch_Head_Not_Synced_Message",titleKey:"Trident_Git_Error_Git_Switch_Branch_Failed_Title"},l.Git_GitProviderCredentialsNotAuthorizedError={messageKey:"Trident_Git_Error_Git_CredentialsNotAuthorized_Message",titleKey:"Trident_Git_Error_Git_CredentialsNotAuthorized_Title"},l.Git_DuplicateArtifactsWithSameLogicalId={messageKey:"Trident_Git_Duplicate_LogicalId_Message",titleKey:"Trident_Git_Duplicate_LogicalId_Title"},l.Git_PotentialDuplicateDisplayNameAndType={messageKey:"Trident_Git_Error_Git_Potential_Duplicate_Diaplay_Name_And_Type_Message",titleKey:"Trident_Git_Error_AlmOperation_Update_Title"},l.Git_DisplayNameIsInvalid={messageKey:"Trident_Git_Error_Git_Display_Name_Is_Invalid_Message",titleKey:"Trident_Git_Error_AlmOperation_Update_Title"},l.Git_GitIntegrationBlockedByDataLossPrevention={messageKey:"Trident_Git_Blocked_DataLoss_Prevention_Message",titleKey:"Trident_Git_Blocked_DataLoss_Prevention_Title"},l.Git_Connect_Invalid_Request={messageKey:"Trident_Git_Error_Git_Connect_Failed_Message",titleKey:"Trident_Git_Error_Git_Connect_Failed_Title"},l.Git_Disconnect_Invalid_Request={messageKey:"Trident_Git_Error_Git_Disconnect_Failed_Message",titleKey:"Trident_Git_Error_Git_Disconnect_Failed_Title"},l.Git_Initialization_Invalid_Request={messageKey:"Trident_Git_Error_Git_Invalid_Initialization_Request_Message",titleKey:"Trident_Git_Error_Unable_To_Initialize_Title"},l.Git_Undo_Invalid_Request={messageKey:"Trident_Git_Error_Undo_Message",titleKey:"Trident_Git_Error_Unable_To_Undo_Title"},l[" Git_Commit_Invalid_Request"]={messageKey:"Trident_Git_Error_Git_InvalidCommitRequest_Message",titleKey:"Trident_Git_Error_Unable_To_Commit_Title"},l.Git_Update_Invalid_Request={messageKey:"Trident_Git_Error_Git_Update_Invalid_Request_Message",titleKey:"Trident_Git_Error_Unable_To_Update_Title"},l.Git_Create_Branch_Invalid_Request={messageKey:"Trident_Git_Error_Git_Create_Branch_Invalid_Request_Message",titleKey:"Trident_Git_Error_Unable_To_Create_Branch_Title"},l.Git_Create_Directory_Invalid_Request={messageKey:"Trident_Git_Error_Git_Create_Folder_Invalid_Request_Message",titleKey:"Trident_Git_Error_Unable_To_Create_Folder_Title"},l.Git_Switch_Branch_Invalid_Request={messageKey:"Trident_Git_Error_Git_Switch_Branch_Invalid_Request_Message",titleKey:"Trident_Git_Error_Git_Switch_Branch_Failed_Title"},l.Git_Connect_Failed={messageKey:"Trident_Git_Error_Git_Connect_Failed_Message",titleKey:"Trident_Git_Error_Git_Connect_Failed_Title"},l.Git_Status_Failed={messageKey:"Trident_Git_Error_Git_Status_Failed_Message",titleKey:"Trident_Git_Error_Git_Status_Failed_Title"},l.Git_Create_Branch_Failed={messageKey:"Trident_Git_Error_Git_Create_Branch_Failed_Message",titleKey:"Trident_Git_Error_Git_Create_Branch_Failed_Title"},l.Git_Sync_Failed={messageKey:"Trident_Git_Error_Git_Sync_Failed_Message",titleKey:"Trident_Git_Error_Git_Sync_Failed_Title"},l.Git_Disconnect_Failed={messageKey:"Trident_Git_Error_Git_Disconnect_Failed_Message",titleKey:"Trident_Git_Error_Git_Disconnect_Failed_Title"},l.Git_Initialization_Failed={messageKey:"Trident_Git_Error_Git_Initialization_Failed_Message",titleKey:"Trident_Git_Error_Unable_To_Initialize_Title"},l.Git_Undo_Failed={messageKey:"Trident_Git_Error_Git_Undo_Failed_Message",titleKey:"Trident_Git_Error_Unable_To_Undo_Title"},l.Git_Commit_Failed={messageKey:"Trident_Git_Error_Git_InvalidCommitRequest_Message",titleKey:"Trident_Git_Error_Unable_To_Commit_Title"},l.Git_Update_Failed={messageKey:"Trident_Git_Error_Git_Update_Invalid_Request_Message",titleKey:"Trident_Git_Error_Unable_To_Update_Title"},l.Git_Create_Folder_Failed={messageKey:"Trident_Git_Error_Git_Create_Folder_Invalid_Request_Message",titleKey:"Trident_Git_Error_Unable_To_Create_Folder_Title"},l.Git_Checkout_Branch_Failed={messageKey:"Trident_Git_Error_Git_Checkout_Branch_Failed_Message",titleKey:"Trident_Git_Error_Git_Checkout_Branch_Failed_Title"},l.Git_Switch_Branch_Failed={messageKey:"Trident_Git_Error_Git_Switch_Branch_Failed_Message",titleKey:"Trident_Git_Error_Git_Switch_Branch_Failed_Title"},l.Git_Get_Branches_Failed={messageKey:"Trident_Git_Error_Git_Get_Branches_Failed_Message",titleKey:"Trident_Git_Error_Git_Connection_Details_Title"},l.Git_Branch_Out_Failed={messageKey:"Trident_Git_Error_Git_Branch_Out_Failed_Message",titleKey:"Trident_Git_Error_Git_Branch_Out_Failed_Title"},l.Git_BranchOutIdenticalBranchNames={messageKey:"Trident_Git_Error_Git_Branch_Name_Already_Exists_Message",titleKey:"Trident_Git_Error_Git_InvalidBranchName_Title"},l.GitProviderRepositoryNotFoundException={messageKey:"Trident_Git_Provider_Repository_Not_Found_Error_Message",titleKey:"Trident_Git_Provider_Repository_Not_Found_Error_Title"},l.GitTreeSizeExceeded={messageKey:"Trident_Git_Tree_Size_Exceeded_Message",titleKey:"Trident_Git_Tree_Size_Exceeded_Title"},l.GitIntegrationGitHubTenantAdminSwitchDisabled={messageKey:"Trident_Git_GitHub_Tenant_Admin_Switch_Disabled_Message",titleKey:"Trident_Git_GitHub_Tenant_Admin_Switch_Disabled_Title"},l.GitTokenExpiredOrDeprecatedException={messageKey:"Trident_Git_Token_Expired_Or_Deprecated_Exception_Message",titleKey:"Trident_Git_Token_Expired_Or_Deprecated_Exception_Title"},l.Git_GitTokenProviderCredentialsKindMismatchError={messageKey:"Trident_Git_Git_Token_Provider_Credentials_Kind_Mismatch_Error_Message",titleKey:"Trident_Git_Git_Token_Provider_Credentials_Kind_Mismatch_Error_Title"},l.Git_GitTokenProviderCredentialsConnectionMismatchError={messageKey:"Trident_Git_Git_Token_Provider_Credentials_Connection_Mismatch_Error_Message",titleKey:"Trident_Git_Git_Token_Provider_Credentials_Connection_Mismatch_Error_Title"},l.Git_GitTokenProviderCredentialsInternalError={messageKey:"Trident_Git_Provider_Bad_Credentials_Message",titleKey:"Trident_Git_Provider_Bad_Credentials_Title"},l.Git_InvalidConfigureCredentialsRequest={messageKey:"Trident_Git_Invalid_Configure_Credentials_Request_Message",titleKey:"Trident_Git_Invalid_Configure_Credentials_Request_Title"},l.GitCommitInvalidOperationResult={messageKey:"Trident_Git_Commit_Invalid_Operation_Result_Message",titleKey:"Trident_Git_Commit_Invalid_Operation_Result_Title"},l.Git_GitProviderRateLimitExceeded={messageKey:"Trident_Git_Git_Provider_Rate_Limit_Exceeded_Message",titleKey:"Trident_Git_Git_Provider_Rate_Limit_Exceeded_Title"},l.Git_GitProviderBadCredentials={messageKey:"Trident_Git_Provider_Bad_Credentials_Message",titleKey:"Trident_Git_Provider_Bad_Credentials_Title"},l.Git_Create_Datasource_Failed={messageKey:"Trident_Git_Create_Datasource_Failed_Message",titleKey:"Trident_Git_Create_Datasource_Failed_Title"},l.Git_Load_Datasources_Failed={messageKey:"Trident_Git_Load_Datasources_Failed_Message",titleKey:"Trident_Git_Load_Datasources_Failed_Title"},l.Git_SQLDatabaseDisplayNameCannotBeChanged={messageKey:"Trident_Git_SQL_Database_Display_Name_Cannot_Be_Changed_Message",titleKey:"Trident_Git_SQL_Database_Display_Name_Cannot_Be_Changed_Title"},l.Git_GitHttpClientTimeout={messageKey:"Trident_Git_Error_Git_GitHttpClientTimeout_Message",titleKey:"MultiSelect_Shortcut_Failed"},l.Alm_InvalidBranchOutRequest_OperationFailureAfterFolderCreation={messageKey:"Trident_Git_Branch_Out_Error_Branch_Error_Message",titleKey:"Trident_Git_Branch_Out_Error_Branch_Error_Title"},l.AlmOperationFailed_CommitToGit={messageKey:"ErrorDialogHelperText_TechnicalDetails",titleKey:"Trident_Git_Error_AlmOperation_Commit_Title"},l.AlmOperationFailed_UndoFromGit={messageKey:"ErrorDialogHelperText_TechnicalDetails",titleKey:"Trident_Git_Error_AlmOperation_Undo_Title"},l.AlmOperationFailed_UpdateFromGit={messageKey:"ErrorDialogHelperText_TechnicalDetails",titleKey:"Trident_Git_Error_AlmOperation_Update_Title"},l.AlmOperationFailed_SwitchGitBranch={messageKey:"ErrorDialogHelperText_TechnicalDetails",titleKey:"Trident_Git_Error_AlmOperation_Switch_Branch_Title"},l.DMTS_DuplicateDataSourceNameError={messageKey:"Trident_Git_Data_Source_Name_Already_Exists_Message",titleKey:"Trident_Git_Data_Source_Name_Already_Exists_Title"},l.DM_GWPipeline_Gateway_MashupDataAccessError={messageKey:"Trident_Git_Provider_Bad_Credentials_Message",titleKey:"Trident_Git_Provider_Bad_Credentials_Title"},l),U=((r={}).Git_PotentialDuplicateDisplayNameAndType={moreInfoKeys:["Trident_Git_Error_Git_Potential_Duplicate_Diaplay_Name_And_Type_MoreInfo1","Trident_Git_Error_Git_Potential_Duplicate_Diaplay_Name_And_Type_MoreInfo2"]},r);function G(h){return h&&"GitError"===h.__tag}function k(h){return h?.errorsDetails[0]}function A(h,x){return h?.errorsDetails.some(function(rt){return rt.errorType===x})}function B(h){var x,rt=K[null===(x=h?.error)||void 0===x?void 0:x.code];return 400===h?.status&&!!rt}function w(h){var x;return"Git_InvalidDirectoryName"===(null===(x=h.error["pbi.error"])||void 0===x?void 0:x.code)}function V(h){return A(h,"Git_MergePolicyNotSpecified")}function b(h,x){var rt;return"AlmOperationFailed_CommitToGit"===h&&"Git_GitProviderCommitRejectedByPolicy"===(null===(rt=x?.gitNonInteractiveOperationErrorDetails)||void 0===rt?void 0:rt.errorCode)}function o(h,x){var rt;return"AlmOperationFailed_CommitToGit"===h&&"Git_GitProviderCommitMaxSizeExceeded"===(null===(rt=x?.gitNonInteractiveOperationErrorDetails)||void 0===rt?void 0:rt.errorCode)}function R(h,x){return{__tag:"GitError",errorInfo:x,errorsDetails:h}}function Q(h){return!!_t.find(function(x){return x===h})}function tt(h){return A(h,"Git_ItemNotFound")||A(h,"Git_DirectoryNameDiffersByCase")}var Gt,L=function(h){return h[h.SingleOption=0]="SingleOption",h[h.None=1]="None",h}({}),_t=["AlmOperationFailed_CommitToGit","AlmOperationFailed_UndoFromGit","AlmOperationFailed_UpdateFromGit"],ut=function(h){return h[h.AzureDevOps=0]="AzureDevOps",h[h.GitHub=1]="GitHub",h}({}),ot="optionNotEnabled",vt=function(h){return h[h.Commit=0]="Commit",h[h.Update=1]="Update",h[h.Initialize=2]="Initialize",h[h.Undo=3]="Undo",h[h.CheckoutBranch=4]="CheckoutBranch",h[h.SwitchBranch=5]="SwitchBranch",h}({}),H=function(h){return h[h.InProgress=0]="InProgress",h[h.Successful=1]="Successful",h[h.Failed=2]="Failed",h}({}),gt=function(h){return h[h.None=0]="None",h[h.KeepYours=1]="KeepYours",h[h.TakeTheirs=2]="TakeTheirs",h}({}),ct=function(h){return h.AzureDevOps="Azure DevOps",h.GitHub="GitHub",h}({}),W=((Gt={})[ut.AzureDevOps]={type:ut.AzureDevOps,name:ct.AzureDevOps,iconName:"azuredevops_logo_16_regular"},Gt[ut.GitHub]={type:ut.GitHub,name:ct.GitHub,iconName:"github_logo"},Gt);function d(h){var x,rt=null===(x=g(h))||void 0===x?void 0:x.repositoryLink;if(rt)return{branchName:h.branchName,branchLink:rt+"?version=GB".concat(h.branchName)}}function y(h){var x,rt=null===(x=g(h))||void 0===x?void 0:x.repositoryLink;if(rt&&h?.head)return{commitId:h.head,commitLink:rt+"/commit/".concat(h.head,"/?refName=refs/heads/").concat(h.branchName)}}function g(h){if(h?.projectName)return{repositoryName:h.repositoryName,repositoryLink:"https://".concat(h.organizationName,".visualstudio.com/").concat(h.projectName,"/_git/").concat(h.repositoryName)}}function S(h){return{branchName:h.branchName,branchLink:f(h).repositoryLink+"/tree/".concat(h.branchName)}}function m(h){if(h?.head)return{commitId:h.head,commitLink:f(h).repositoryLink+"/commit/".concat(h.head)}}function f(h){return{repositoryName:h.repositoryName,repositoryLink:"https://github.com/".concat(h.organizationName,"/").concat(h.repositoryName)}}var s={credentialType:"Key",encryptedConnection:"Any",privacyLevel:"Private",skipTestConnection:!1,encryptionAlgorithm:"NONE"},D={singleSignOnType:"None",allowDatasourceThroughGateway:!1},M="Extension",$={name:"url",type:"nullable text",isRequired:!1},X=["\\","?","*",":","|",'"',"<",">"],et=["."," "];function Z(h,x,rt){if(void 0===rt&&(rt="Trident_Git_Last_Synced_At"),x){var Et=h.currentLanguageLocale,kt=new Date(x),Ut=h.format("Trident_Git_Last_Synced_At",[kt.toLocaleDateString(Et,{day:"numeric",month:"numeric",year:"numeric"}),kt.toLocaleTimeString(Et,{hour:"numeric",minute:"numeric"})]);return"Trident_Git_Last_Synced_At"===rt?Ut:h.get(rt)+Ut}}function St(){var h;return(h={})[ut.AzureDevOps]={getBranchReference:d,getHeadReference:y,getIconName:function(){return"azuredevops_logo_16_regular"},getRepositoryReference:g},h[ut.GitHub]={getBranchReference:S,getHeadReference:m,getIconName:function(){return"github_logo"},getRepositoryReference:f},h}function Ot(h,x){return X.some(function(rt){return h.includes(rt)})?x.get("Trident_Git_Error_Git_InvalidBranchName_Message"):et.some(function(rt){return h.endsWith(rt)})?x.get("Trident_Git_Error_Git_InvalidBranchNameSuffix_Message"):void 0}},57156:function(yt,nt,a){a.d(nt,{F:function(){return G}});var l=a(77476),r=a(78035),K=a(17177),c=a(16622),U=a(50423),G=function(){function k(){}return k.\u0275fac=function(B){return new(B||k)},k.\u0275mod=U.\u0275\u0275defineNgModule({type:k}),k.\u0275inj=U.\u0275\u0275defineInjector({imports:[l.CommonModule,r.Y,K.T6,c.u]}),k}()},89330:function(yt,nt,a){a.d(nt,{Z:function(){return A}});var l=a(4437),r=a(50423),K=a(17174),c=a(30794),U=a(83317),G=a(15485),k=["*"],A=function(){function B(w,_){this.changeDetector=w,this.triRadioService=_,this._disabled=!1,this._isCompact=!1,this.value=null,this.destroy$=new c.xQ,this.onChange=function(){},this.onTouched=function(){}}return Object.defineProperty(B.prototype,"disabled",{get:function(){return this._disabled},set:function(_){this._disabled=(0,l.Ig)(_)},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"isCompact",{get:function(){return this._isCompact},set:function(_){this._isCompact=(0,l.Ig)(_)},enumerable:!1,configurable:!0}),B.prototype.ngOnInit=function(){var w=this;this.triRadioService.selected$.pipe((0,U.R)(this.destroy$)).subscribe(function(_){w.value!==_&&(w.value=_,w.onChange(w.value))}),this.triRadioService.touched$.pipe((0,U.R)(this.destroy$)).subscribe(function(){w.onTouched()})},B.prototype.ngOnChanges=function(w){var V=w.isCompact,b=w.name;w.disabled&&this.triRadioService.setDisabled(this.disabled),V&&this.triRadioService.setIsCompact(this.isCompact),b&&this.triRadioService.setName(this.name)},B.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},B.prototype.writeValue=function(w){this.value=w,this.triRadioService.select(w),this.changeDetector.markForCheck()},B.prototype.registerOnChange=function(w){this.onChange=w},B.prototype.registerOnTouched=function(w){this.onTouched=w},B.prototype.setDisabledState=function(w){this.disabled=w,this.triRadioService.setDisabled(w),this.changeDetector.markForCheck()},B.prototype.setIsCompactState=function(w){this.isCompact=w,this.triRadioService.setIsCompact(w),this.changeDetector.markForCheck()},B.\u0275fac=function(_){return new(_||B)(r.\u0275\u0275directiveInject(r.ChangeDetectorRef),r.\u0275\u0275directiveInject(G.x))},B.\u0275cmp=r.\u0275\u0275defineComponent({type:B,selectors:[["tri-radio-group"]],hostAttrs:["role","radiogroup",1,"tri-radio-group"],inputs:{disabled:"disabled",isCompact:"isCompact",name:"name"},exportAs:["triRadioGroup"],features:[r.\u0275\u0275ProvidersFeature([G.x,{provide:K.JU,useExisting:(0,r.forwardRef)(function(){return B}),multi:!0}]),r.\u0275\u0275NgOnChangesFeature],ngContentSelectors:k,decls:1,vars:0,template:function(_,V){1&_&&(r.\u0275\u0275projectionDef(),r.\u0275\u0275projection(0))},encapsulation:2,changeDetection:0}),B}()}}]);