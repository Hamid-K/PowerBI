"use strict";(self.webpackChunkdesktopDialogHost=self.webpackChunkdesktopDialogHost||[]).push([["personalize-visual"],{54807:function(se,N,o){o.r(N),o.d(N,{PersonalizeVisualModule:function(){return Et}});var w=o(91280),n=o(81337),B=o(83839),b=o(41114),T="PBI.PersonalizeVisual.TypePaneInteraction",Z=b.cx[T]=(0,b.b1)(T),S="PBI.PersonalizeVisual.FieldPaneInteraction",F=b.cx[S]=(0,b.b1)(S),R="PBI.PersonalizeVisual.FieldContextMenuInteraction",I=b.cx[R]=(0,b.b1)(R),X="PBI.PersonalizeVisual.ResetVisual",s=(b.cx[X]=(0,b.b1)(X),"PBI.PersonalizeVisual.DiscardChanges"),v=b.cx[s]=(0,b.b1)(s),V="PBI.PersonalizeVisual.DragAndDropProperty",j=b.cx[V]=(0,b.b1)(V),O="PBI.PersonalizeVisual.BookmarkTutorial",J=b.cx[O]=(0,b.b1)(O),k="PBI.EX.PersonalizeVisual.LoadFieldList",A=b.cx[k]=(0,b.b1)(k),e=o(50423),ee=o(59694),D=o(98665),H=o(86286),U=o(37196),te=o(82762),Y=o(11547),Q=o(14172),pe=o(73805),ce=o(59822),ne=o(65181),ae=o(83008),ue=o(39503),h=o(9380),C=o(85564),g=o(77476),y=o(59968),z=o(65005),L=o(68070),E=o(85102);function Ee(a,i){if(1&a&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",8),e.\u0275\u0275element(2,"span",9),e.\u0275\u0275elementStart(3,"p",10),e.\u0275\u0275element(4,"span",11),e.\u0275\u0275elementStart(5,"span",12),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(7,"span",13),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()),2&a){var t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.perspectiveDisplayName)}}function Ie(a,i){if(1&a&&(e.\u0275\u0275element(0,"span",14),e.\u0275\u0275elementStart(1,"p",10),e.\u0275\u0275element(2,"span",11),e.\u0275\u0275elementStart(3,"span",12),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()),2&a){var t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(t.perspectiveDisplayName)}}function Me(a,i){if(1&a&&(e.\u0275\u0275elementStart(0,"div",6),e.\u0275\u0275template(1,Ee,8,1,"ng-container",2),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275template(3,Ie,5,1,"ng-template",null,7,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&a){var t=e.\u0275\u0275reference(4),r=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(2,2,r.hasCubeNameError$))("ngIfElse",t)}}function Fe(a,i){if(1&a){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"pbi-field-list",4),e.\u0275\u0275listener("onNodeClick",function(p){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(c.onClickFieldListTreeNode(p))}),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275template(3,Me,5,4,"div",5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&a){var r=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("fieldListTree",e.\u0275\u0275pipeBind1(2,4,r.fieldListTree$))("options",r.fieldListOptions)("scrollSelectedItemIntoViewOnInit",!0),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",r.perspectiveDisplayName&&r.perspectiveDisplayName!==r.defaultPerspective)}}function Oe(a,i){if(1&a&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",8),e.\u0275\u0275element(2,"span",9),e.\u0275\u0275elementStart(3,"p",10),e.\u0275\u0275element(4,"span",11),e.\u0275\u0275elementStart(5,"span",12),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(7,"span",13),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()),2&a){var t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.perspectiveDisplayName)}}function De(a,i){if(1&a&&(e.\u0275\u0275element(0,"span",14),e.\u0275\u0275elementStart(1,"p",10),e.\u0275\u0275element(2,"span",11),e.\u0275\u0275elementStart(3,"span",12),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()),2&a){var t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(t.perspectiveDisplayName)}}function ke(a,i){if(1&a&&(e.\u0275\u0275elementStart(0,"div",6),e.\u0275\u0275template(1,Oe,8,1,"ng-container",2),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275template(3,De,5,1,"ng-template",null,18,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&a){var t=e.\u0275\u0275reference(4),r=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(2,2,r.hasCubeNameError$))("ngIfElse",t)}}function we(a,i){if(1&a){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"pbi-tree",19,20),e.\u0275\u0275listener("onNodeClick",function(u){e.\u0275\u0275restoreView(t);var m=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(m.onClickFieldListTreeNode(u))})("onFirstRender",function(){e.\u0275\u0275restoreView(t);var u=e.\u0275\u0275reference(1);return e.\u0275\u0275resetView(u.scrollToFirstSelectedNode())}),e.\u0275\u0275elementEnd()}if(2&a){var r=i.ngIf;e.\u0275\u0275nextContext();var l=e.\u0275\u0275reference(2),p=e.\u0275\u0275nextContext();e.\u0275\u0275property("tree",r)("options",p.fieldListOptions)("search",l.value)}}function Be(a,i){if(1&a&&(e.\u0275\u0275elementStart(0,"pbi-search-box")(1,"input",15,16),e.\u0275\u0275listener("keyup",function(){return null}),e.\u0275\u0275pipe(3,"localize"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(4,ke,5,4,"div",5),e.\u0275\u0275template(5,we,2,3,"pbi-tree",17),e.\u0275\u0275pipe(6,"async")),2&a){var t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("placeholder",e.\u0275\u0275pipeBind1(3,3,"SearchBox_Text")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",t.perspectiveDisplayName&&t.perspectiveDisplayName!==t.defaultPerspective),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(6,5,t.fieldListTree$))}}var he=function(){function a(i){this.localizationService=i,this.tooltipCaretSize="small"}return a.prototype.getTooltip=function(i){var t=i.flatNode;if(t.node.data.entity){var r=t.node.data.entity.contract.displayName;return(0,ee.W)(this.localizationService.get("Field_Tooltip"),r,t.node.displayName)}return t.node.displayName},a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275inject(ne.o))},a.\u0275prov=e.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),ge=function(){function a(i,t,r,l,p,c,u){var m=this;this.dataSourcesService=i,this.explorationNavigationService=t,this.featureSwitchService=r,this.fieldListData=l,this.fieldListService=p,this.telemetryService=c,this.tooltipStrategy=u,this.onSelectProperty=new e.EventEmitter,this.fieldListTree$=(0,te.D)(this.fieldListService.getViewModel(this.getDataSources())).pipe((0,Q.U)(function(f){return f.schema.entities.sort(function(x,P){return x.displayName.localeCompare(P.displayName)}),m.convertFieldListToPbiTree(f)})),this.CubeNameErrorCode="CubeNameDoesNotExist",this.hasCubeNameError$=this.fieldListTree$.pipe((0,pe.h)(!1),(0,ce.K)(function(f){return(0,Y.of)(f.serviceError.errorCode===m.CubeNameErrorCode)})),this.perspectiveDisplayName=this.getPerspectiveRef(),this.defaultPerspective="",this.fieldListOptions={tooltip:this.tooltipStrategy}}return a.prototype.onClickFieldListTreeNode=function(i){i.expandable||this.onSelectProperty.emit(i.node.data)},a.prototype.convertFieldListToPbiTree=function(i){var t,r=this.fieldListData.selectedProperty;if(r){var l=r.hierarchyLevels,p=l&&l.length?l.reduce(function(u,m){return(0,n.__spreadArray)((0,n.__spreadArray)([],u||[],!0),i.schema.findItems(m.expr)||[],!0)},[]):r.expr?i.schema.findItems(r.expr):[],c=new Set(p);t=function(m){return!(m.children&&m.children.length)&&c.has(m)}}return(0,B.hF)(i,{fieldSelectionPredicate:t,showTooltips:!0})},a.prototype.getPerspectiveRef=function(){var i,t,r,l=this.explorationNavigationService.getCurrentExploration(),p=l.sections[l.activeSectionIndex];return null===(r=null===(t=null===(i=p?.evaluatedObjects)||void 0===i?void 0:i.personalizeVisual)||void 0===t?void 0:t.perspectiveRef)||void 0===r?void 0:r.toString()},a.prototype.getDataSources=function(){var i=(0,n.__spreadArray)([],this.dataSourcesService.get(),!0),t=!1,r=this.getPerspectiveRef();if(r&&r!==this.defaultPerspective){var l=i.findIndex(function(u){return"dsr"===u.type}),p=i[l];if(t=!0,p){var c=(0,n.__assign)((0,n.__assign)({},p),{perspectiveId:r});i[l]=c}}return this.telemetryService.logEvent(A,{hasPerspective:t}),i},a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275directiveInject(ae.D),e.\u0275\u0275directiveInject(ue.z),e.\u0275\u0275directiveInject(h.vZ),e.\u0275\u0275directiveInject(H.M),e.\u0275\u0275directiveInject(C.x),e.\u0275\u0275directiveInject(D.y0),e.\u0275\u0275directiveInject(he))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["personalize-visual-field-list"]],viewQuery:function(t,r){var l;(1&t&&e.\u0275\u0275viewQuery(U.u,5),2&t)&&(e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(r.fieldListTree=l.first))},outputs:{onSelectProperty:"onSelectProperty"},features:[e.\u0275\u0275ProvidersFeature([he])],decls:6,vars:3,consts:[[1,"pbi-depth-2","themeableElement"],[1,"fluentTheme-vlg-semibold"],[4,"ngIf","ngIfElse"],["originalFieldList",""],[3,"fieldListTree","options","scrollSelectedItemIntoViewOnInit","onNodeClick"],["class","pbi-field-list-perspective-header",4,"ngIf"],[1,"pbi-field-list-perspective-header"],["noCubeNameError",""],[1,"perspective-error"],["role","presentation",1,"glyphicon","glyph-small","pbi-glyph-error"],[1,"fluentTheme-sm-reg"],["localize","PersonalizeVisual_PerspectiveDescription"],[1,"fluentTheme-sm-semiBold"],["localize","PersonalizeVisual_PerspectiveDescription_Extensions_CubeNameError"],["role","presentation",1,"glyphicon","glyph-small","pbi-glyph-info"],["pbiSearchInput","",1,"pbi-focus-outline",3,"placeholder","keyup"],["searchInput",""],[3,"tree","options","search","onNodeClick","onFirstRender",4,"ngIf"],["noCubeNameErrorOriginalFieldList",""],[3,"tree","options","search","onNodeClick","onFirstRender"],["pbiTree",""]],template:function(t,r){if(1&t&&(e.\u0275\u0275elementStart(0,"section",0)(1,"header",1),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,Fe,4,6,"ng-container",2),e.\u0275\u0275template(4,Be,7,7,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&t){var l=e.\u0275\u0275reference(5);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",r.fieldListData.bucket.displayName," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",r.featureSwitchService.featureSwitches.personalizeVisualUnifiedFieldList)("ngIfElse",l)}},dependencies:[g.NgIf,y.X,z.l,L.a,L.p,U.u,g.AsyncPipe,E.F],styles:[".pbi-overlay-caret-large.pbi-overlay-caret[_nghost-%COMP%]:after{background:var(--gray-20, #F3F2F1)}section[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:383px;width:260px;padding:12px 24px 17px;border-radius:2px;background:var(--fluent-theme-neutral-lighter-color, #F3F2F1);box-sizing:border-box}header[_ngcontent-%COMP%]{color:var(--fluent-theme-neutral-dark-alt-color, #333333);margin-bottom:16px}.pbi-field-list-perspective-header[_ngcontent-%COMP%]{display:flex;margin:12px 0 3px}.pbi-field-list-perspective-header[_ngcontent-%COMP%]   .pbi-glyph-error[_ngcontent-%COMP%]{color:var(--fluent-theme-error-dark-color, #A80000)}.pbi-field-list-perspective-header[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%]{margin:3px 8px 0 0}.pbi-field-list-perspective-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--gray-160, #323130)}.pbi-field-list-perspective-header[_ngcontent-%COMP%]   .perspective-error[_ngcontent-%COMP%]{background-color:var(--fluent-theme-error-background-color, #FDE7E9);display:flex;padding:8px}pbi-tree[_ngcontent-%COMP%]{margin-top:9px;height:100%;display:block;overflow:hidden}"],changeDetection:0}),a}(),de=o(93437),fe=o(48144),ye=o(21728),_e=o(19008),Re=o(80366),Ne=o(76001),K=o(25512),oe=o(86940),je=o(33554),Ae=o(35510),le=o(48787),re=o(83317),$e=o(26898),He=o(72262),Ue=o(23983),xe=o(76072),Qe=o(28894),Ce=o(66890),me=o(36858),Ke=o(96883),Ge=o(80357);function We(a,i){if(1&a&&e.\u0275\u0275element(0,"i"),2&a){var t=e.\u0275\u0275nextContext();e.\u0275\u0275classMapInterpolate1("field-glyph glyphicon glyph-mini ng-scope ",t.icon,"")}}function Ze(a,i){if(1&a){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",5),e.\u0275\u0275listener("pbiMenuButtonClick",function(p){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(c.onMenuItemClicked.emit(p))})("pbiMenuOpen",function(){e.\u0275\u0275restoreView(t);var p=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(p.onMenuOpen())}),e.\u0275\u0275pipe(1,"localize"),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275elementEnd()}if(2&a){var r=e.\u0275\u0275nextContext();e.\u0275\u0275attributeInterpolate3("aria-labelledby","",r.contextMenuLabel," ",r.bucketLabel," ",r.propertyLabel,""),e.\u0275\u0275property("pbiMenu",r.pbiMenuViewModel)("title",e.\u0275\u0275pipeBind1(2,8,"FieldListProperty_Context_Menu")),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(1,6,"FieldListProperty_Context_Menu"))}}var be=new Set([128,1]),Pe=new Set([4,2]),Xe=new Set((0,n.__spreadArray)((0,n.__spreadArray)([],Array.from(be)||[],!0),Array.from(Pe)||[],!0)),Je=function(){function a(i){var t=this;this.telemetryService=i,this.onOpenFieldMenu=new e.EventEmitter,this.onMenuItemClicked=new e.EventEmitter,this.pbiMenuViewModel=function(){return t.getContextMenuModel(t.menuViewModel)}}return a.prototype.getContextMenuModel=function(i){var t=i.items.filter(function(c){return!!c.key&&Xe.has(c.key.action)}),r=t.filter(function(c){return be.has(c.key.action)}),l=t.filter(function(c){return Pe.has(c.key.action)}),p=(0,n.__spreadArray)((0,n.__spreadArray)([],r||[],!0),l.length?[{type:1}].concat(l):[],!0);return(0,Ke.m)({items:p})},a.prototype.onMenuOpen=function(){this.telemetryService.logChildEvent(this.rootTelemetryEvent,de.l,{overlayType:"FieldContextMenu"})},a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275directiveInject(D.y0))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["personalize-visual-visual-data-role"]],inputs:{rootTelemetryEvent:"rootTelemetryEvent",displayName:"displayName",bucketLabel:"bucketLabel",propertyLabel:"propertyLabel",fieldMenuLabel:"fieldMenuLabel",contextMenuLabel:"contextMenuLabel",tooltip:"tooltip",icon:"icon",showContextMenu:"showContextMenu",interactive:"interactive",menuViewModel:"menuViewModel"},outputs:{onOpenFieldMenu:"onOpenFieldMenu",onMenuItemClicked:"onMenuItemClicked"},decls:6,vars:13,consts:[[1,"fluentTheme-md-reg","field"],["pbiTooltipCaretSize","small","aria-haspopup","listbox",1,"field-menu","pbi-focus-outline",3,"id","pbiTooltip","pbiTooltipDisabled","pbiTooltipShowDelay","click"],["propertyButton",""],[3,"class",4,"ngIf"],["class","glyphicon glyph-small pbi-glyph-more field-context-menu pbi-focus-outline","aria-haspopup","listbox",3,"pbiMenu","title","pbiMenuButtonClick","pbiMenuOpen",4,"ngIf"],["aria-haspopup","listbox",1,"glyphicon","glyph-small","pbi-glyph-more","field-context-menu","pbi-focus-outline",3,"pbiMenu","title","pbiMenuButtonClick","pbiMenuOpen"]],template:function(t,r){if(1&t){var l=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",0)(1,"button",1,2),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(l);var c=e.\u0275\u0275reference(2);return e.\u0275\u0275resetView(r.onOpenFieldMenu.emit(c))}),e.\u0275\u0275template(3,We,1,3,"i",3),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,Ze,3,10,"button",4),e.\u0275\u0275elementEnd()}2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275classProp("field-menu-noninteractive",!r.interactive),e.\u0275\u0275attributeInterpolate3("aria-labelledby","",r.fieldMenuLabel," ",r.bucketLabel," ",r.propertyLabel,""),e.\u0275\u0275property("id",r.propertyLabel)("pbiTooltip",r.tooltip)("pbiTooltipDisabled",!r.showContextMenu)("pbiTooltipShowDelay",1500),e.\u0275\u0275attribute("aria-disabled",!r.interactive),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",r.icon),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",r.displayName,""),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",r.showContextMenu))},dependencies:[g.NgIf,Ge.l8,me.V,E.F],styles:['personalize-visual-visual-data-role .field{position:relative}personalize-visual-visual-data-role .field .field-menu{background:var(--fluent-theme-white-color, #FFF);border:1px solid var(--gray-110, #8A8886);box-sizing:border-box;border-radius:2px;height:24px;color:var(--fluent-theme-neutral-dark-color, #201F1E);line-height:14px;width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;margin-top:4px;padding:2px 44px 2px 6px;position:relative;text-align:left;cursor:pointer}personalize-visual-visual-data-role .field .field-menu:after{font-family:PowrMDL2;content:"\\e972";position:absolute;top:5px;right:5px;height:12px;transform:rotate(-90deg);width:12px;font-size:var(--sm-font-size, 12px)}html[dir=rtl] personalize-visual-visual-data-role .field .field-menu{padding-left:44px;padding-right:6px;text-align:right}html[dir=rtl] personalize-visual-visual-data-role .field .field-menu:after{transform:rotate(90deg);left:5px;right:initial}personalize-visual-visual-data-role .field .field-menu-noninteractive{cursor:default}personalize-visual-visual-data-role .field .field-menu-noninteractive:after{display:none}personalize-visual-visual-data-role .field .field-context-menu{position:absolute;height:20px;width:20px;right:21px;top:6px;padding:0;border:0;background-color:var(--fluent-theme-white-color, #FFF)}html[dir=rtl] personalize-visual-visual-data-role .field .field-context-menu{left:21px;right:initial}personalize-visual-visual-data-role .field .drop-target{border-top:2px solid var(--fluent-theme-neutral-primary-color, #323130)}\n'],encapsulation:2,changeDetection:0}),a}();function Ye(a,i){if(1&a){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",12,13),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var p=e.\u0275\u0275nextContext().$implicit,c=e.\u0275\u0275reference(9),u=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(u.enableEditMode(p,c))}),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275elementEnd()}if(2&a){var r=e.\u0275\u0275nextContext().index;e.\u0275\u0275attributeInterpolate1("aria-labelledby","inline-explore-bucket-label-",r," inline-explore-add-new-field"),e.\u0275\u0275property("pbiTooltip",e.\u0275\u0275pipeBind1(2,2,"InlineExplore_AddNewField"))}}function qe(a,i){if(1&a){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"personalize-visual-visual-data-role",19),e.\u0275\u0275listener("onOpenFieldMenu",function(f){var x=e.\u0275\u0275restoreView(t),P=x.$implicit,M=x.index,G=e.\u0275\u0275nextContext(2).$implicit,W=e.\u0275\u0275nextContext(2).$implicit,ie=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(ie.openChangeFieldMenu(W,f,G,P,M))})("onMenuItemClicked",function(f){e.\u0275\u0275restoreView(t);var x=e.\u0275\u0275nextContext(2).$implicit,P=e.\u0275\u0275nextContext(2).$implicit,M=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(M.handlePbiMenuClick(f,P,x))}),e.\u0275\u0275elementEnd()}if(2&a){var r=i.$implicit,l=i.index,p=e.\u0275\u0275nextContext(2).$implicit,c=e.\u0275\u0275nextContext(2).index,u=e.\u0275\u0275nextContext(2);e.\u0275\u0275propertyInterpolate1("bucketLabel","inline-explore-bucket-label-",c,""),e.\u0275\u0275propertyInterpolate3("propertyLabel","inline-explore-bucket-property-",c,"-",p.startIndex,"-",l,""),e.\u0275\u0275property("rootTelemetryEvent",u.rootTelemetryEvent)("menuViewModel",p.interactivityOptions.dropDownItems)("displayName",u.formatHierarchyLevel(p.displayOptions.displayName,r.displayName))("tooltip",p.displayOptions.tooltipTitle)("icon",p.displayOptions.glyph)("interactive",p.interactivityOptions.isRemovableField)("showContextMenu",p.interactivityOptions.dropDownItems)}}function et(a,i){if(1&a&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,qe,1,11,"personalize-visual-visual-data-role",18),e.\u0275\u0275elementContainerEnd()),2&a){var t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t.hierarchyLevels)}}function tt(a,i){if(1&a){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"personalize-visual-visual-data-role",19),e.\u0275\u0275listener("onOpenFieldMenu",function(u){e.\u0275\u0275restoreView(t);var m=e.\u0275\u0275nextContext().$implicit,f=e.\u0275\u0275nextContext(2).$implicit,x=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(x.openChangeFieldMenu(f,u,m))})("onMenuItemClicked",function(u){e.\u0275\u0275restoreView(t);var m=e.\u0275\u0275nextContext().$implicit,f=e.\u0275\u0275nextContext(2).$implicit,x=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(x.handlePbiMenuClick(u,f,m))}),e.\u0275\u0275elementEnd()}if(2&a){var r=e.\u0275\u0275nextContext().$implicit,l=e.\u0275\u0275nextContext(2).index,p=e.\u0275\u0275nextContext(2);e.\u0275\u0275propertyInterpolate1("bucketLabel","inline-explore-bucket-label-",l,""),e.\u0275\u0275propertyInterpolate2("propertyLabel","inline-explore-bucket-property-",l,"-",r.startIndex,""),e.\u0275\u0275property("rootTelemetryEvent",p.rootTelemetryEvent)("menuViewModel",r.interactivityOptions.dropDownItems)("displayName",r.displayOptions.displayName)("tooltip",r.displayOptions.tooltipTitle)("icon",r.displayOptions.glyph)("interactive",r.interactivityOptions.isRemovableField)("showContextMenu",r.interactivityOptions.dropDownItems)}}function nt(a,i){if(1&a){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",15),e.\u0275\u0275listener("drop",function(c){var m=e.\u0275\u0275restoreView(t).index,f=e.\u0275\u0275nextContext(2).index,x=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(x.handleDrop(c,m,f))})("dragend",function(c){e.\u0275\u0275restoreView(t);var u=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(u.handleDragEnd(c))})("dragleave",function(c){e.\u0275\u0275restoreView(t);var u=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(u.handleDragLeave(c))})("dragstart",function(){var u=e.\u0275\u0275restoreView(t).index,m=e.\u0275\u0275nextContext(2).index,f=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(f.handleDragStart(u,m))})("dragover",function(c){var m=e.\u0275\u0275restoreView(t).index,f=e.\u0275\u0275nextContext(2).index,x=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(x.handleDragOver(c,m,f))}),e.\u0275\u0275template(2,et,2,1,"ng-container",16),e.\u0275\u0275template(3,tt,1,10,"ng-template",null,17,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&a){var r=i.$implicit,l=e.\u0275\u0275reference(4);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",null==r||null==r.hierarchyLevels?null:r.hierarchyLevels.length)("ngIfElse",l)}}function it(a,i){if(1&a&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,nt,5,2,"ng-container",14),e.\u0275\u0275elementContainerEnd()),2&a){var t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t.properties)}}function rt(a,i){if(1&a){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",20,21),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var p=e.\u0275\u0275reference(1),c=e.\u0275\u0275nextContext().$implicit,u=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(u.openNewFieldMenu(c,p))})("drop",function(p){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext().index,u=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(u.handleDrop(p,0,c))})("dragleave",function(p){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(c.handleDragLeave(p))})("dragover",function(p){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(c.handleDragOver(p,-1,-1))}),e.\u0275\u0275elementEnd()}if(2&a){var r=e.\u0275\u0275nextContext().index;e.\u0275\u0275attributeInterpolate1("aria-labelledby","inline-explore-bucket-label-",r," inline-explore-add-new-field")}}function at(a,i){if(1&a&&(e.\u0275\u0275elementStart(0,"li",5)(1,"fieldset")(2,"div",6)(3,"legend",7),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,Ye,3,4,"button",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,it,2,1,"ng-container",3),e.\u0275\u0275template(7,rt,2,1,"button",9),e.\u0275\u0275element(8,"button",10,11),e.\u0275\u0275pipe(10,"async"),e.\u0275\u0275elementEnd()()),2&a){var t=i.$implicit,r=i.index,l=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate1("id","inline-explore-bucket-label-",r,""),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.displayName," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.supportsMultipleItems&&(null==t.properties?null:t.properties.length)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==t.properties?null:t.properties.length),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!(null!=t.properties&&t.properties.length)),e.\u0275\u0275advance(1),e.\u0275\u0275attributeInterpolate1("aria-labelledby","inline-explore-bucket-label-",r," inline-explore-add-new-field"),e.\u0275\u0275property("hidden",e.\u0275\u0275pipeBind1(10,7,l.editableBucket$)!==t)}}function ot(a,i){if(1&a&&(e.\u0275\u0275elementStart(0,"ul"),e.\u0275\u0275template(1,at,11,9,"li",4),e.\u0275\u0275elementEnd()),2&a){var t=i.ngIf;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t)}}var lt=function(){function a(i,t,r,l,p,c,u,m,f,x,P,M,G,W){this.elementRef=i,this.conceptualSchemaProxy=t,this.dataSources=r,this.groupingDesignStateService=l,this.injector=p,this.lazyProvider=c,this.lazyScoped=u,this.localizationService=m,this.overlay=f,this.overlayRef=x,this.renderer=P,this.selection=M,this.telemetryService=G,this.visualAuthoring=W,this.onLoad=new e.EventEmitter,this.buckets$=new je.t(1),this.editableBucket$=new Ae.X(null),this.includeVariationSourceDisplayName=this.localizationService.get("IncludeVariationSourceDisplayName"),this.dropTargetClass="drop-target"}return a.prototype.ngOnInit=function(){return(0,n.__awaiter)(this,void 0,void 0,function(){var i,t,r=this;return(0,n.__generator)(this,function(l){switch(l.label){case 0:return i=this,[4,this.lazyScoped.get("fieldWellModernService")];case 1:return i.fieldWellModernService=l.sent(),t=function(c){return r.buckets$.next(c.buckets)},this.core=this.fieldWellModernService.createFieldWellCore($(this.elementRef.nativeElement),!0,t),[4,this.core.onInit()];case 2:return l.sent(),this.onLoad.emit(),[2]}})})},a.prototype.enableEditMode=function(i,t){this.editableBucket$.next(i),this.openNewFieldMenu(i,t)},a.prototype.openChangeFieldMenu=function(i,t,r,l,p){r.interactivityOptions.isRemovableField&&this.openFieldListOverlay({bucket:i,selectedProperty:l||r},t,r,l,p)},a.prototype.openNewFieldMenu=function(i,t){this.openFieldListOverlay({bucket:i},t)},a.prototype.formatHierarchyLevel=function(i,t){return(0,ee.W)(this.includeVariationSourceDisplayName,i,t)},a.prototype.openFieldListOverlay=function(i,t,r,l,p){return(0,n.__awaiter)(this,void 0,void 0,function(){var c,u,m,f,x=this;return(0,n.__generator)(this,function(P){switch(P.label){case 0:return c=this.telemetryService.startChildEvent(this.rootTelemetryEvent,de.l,{overlayType:"FieldSelection"}),u=this.overlay.position().flexibleConnectedTo(t).withPositions([(0,K.v3)(4,0),(0,K.xe)(0,-4),(0,K.Zc)(0,4),(0,K.q6)(-4,0)]).withFlexibleDimensions(!0).withPush(!0).withGrowAfterOpen(!0),[4,this.lazyProvider.getModule("./lazy-modules/personalize-visual/personalize-visual.module#PersonalizeVisualModule")];case 1:return m=P.sent().componentFactoryResolver,(f=this.overlay.open({component:ge,data:i,options:{positionStrategy:u,hasBackdrop:!0,backdropClass:oe.L},closeOnBackdropClick:!0,hasCaret:!0,parent:this.overlayRef,closeWithParent:!0,injector:this.injector,componentFactoryResolver:m})).onClose.pipe((0,le.q)(1)).subscribe(function(){x.editableBucket$.next(null),c.resolve()}),f.componentRef.instance.onSelectProperty.pipe((0,re.R)(f.onClose)).subscribe(function(M){return x.onSelectProperty(M,i.bucket.role,f,r,l,p)}),[2]}})})},a.prototype.onSelectProperty=function(i,t,r,l,p,c){return(0,n.__awaiter)(this,void 0,void 0,function(){var u,m,f,x,P,M,G,ie;return(0,n.__generator)(this,function(q){switch(q.label){case 0:return(u=ye.UP.getSelectedVisual(this.selection))?(m=this.dataSources.get(),x=!0,(f=!!l)?[4,this.conceptualSchemaProxy.get(m)]:[3,3]):[2];case 1:return P=q.sent(),[4,this.visualAuthoring.removeFieldFromRole({role:t,projOptions:{fieldIndex:l.startIndex+(c||0)},count:p?1:l.hierarchyLevels&&l.hierarchyLevels.length||1},P)];case 2:x=q.sent(),q.label=3;case 3:return M=(0,fe.y)((0,fe.R)(i.fieldType),this.groupingDesignStateService),G=M.fieldExpr(i),[4,this.visualAuthoring.addFieldInRole(G,t,m,u,l&&l.startIndex+(c||0),void 0,!0)];case 4:return ie=q.sent(),this.telemetryService.logChildEvent(this.rootTelemetryEvent,F,{interactionType:f?"Replace":"Add",success:x&&ie}),r.close(),[2]}})})},a.prototype.handlePbiMenuClick=function(i,t,r){var l=ye.UP.getSelectedVisual(this.selection);this.handleContextMenuClick(i.data,t,r,this.dataSources,this.conceptualSchemaProxy,l)},a.prototype.handleContextMenuClick=function(i,t,r,l,p,c){return(0,n.__awaiter)(this,void 0,void 0,function(){var u,m,x;return(0,n.__generator)(this,function(P){switch(P.label){case 0:switch(u=c.config.singleVisual.visualType,m=l.get(),i.action){case 1:return[3,1];case 2:return[3,3];case 4:return[3,5];case 128:return[3,7]}return[3,9];case 1:return[4,p.get(m)];case 2:return x=P.sent(),this.removeField(t.role,r.startIndex,x,u),[3,10];case 3:return[4,this.removeAggregate(t.role,r.startIndex,c,m,u)];case 4:case 6:case 8:return P.sent(),[3,10];case 5:return[4,this.setAggregate(t.role,r.startIndex,(0,Re._L)((0,Ne.Q)(r.expr)),i.aggregate,c,m,u)];case 7:return[4,this.setVariation(t.role,r.startIndex,i.variationExpr,c,m,u)];case 9:return[3,10];case 10:return[2]}})})},a.prototype.removeField=function(i,t,r,l){return(0,n.__awaiter)(this,void 0,void 0,function(){var p;return(0,n.__generator)(this,function(c){switch(c.label){case 0:return[4,this.visualAuthoring.removeFieldFromRole({role:i,projOptions:{fieldIndex:t}},r)];case 1:return p=c.sent(),this.telemetryService.logChildEvent(this.rootTelemetryEvent,I,{interactionType:"RemoveField",visualType:l,role:i,success:p}),[2]}})})},a.prototype.removeAggregate=function(i,t,r,l,p){return(0,n.__awaiter)(this,void 0,void 0,function(){var c;return(0,n.__generator)(this,function(u){switch(u.label){case 0:return[4,this.visualAuthoring.removeAggregate(i,t,r,l)];case 1:return c=u.sent(),this.telemetryService.logChildEvent(this.rootTelemetryEvent,I,{interactionType:"RemoveAggregate",visualType:p,role:i,success:c}),[2]}})})},a.prototype.setAggregate=function(i,t,r,l,p,c,u){return(0,n.__awaiter)(this,void 0,void 0,function(){var m;return(0,n.__generator)(this,function(f){switch(f.label){case 0:return[4,this.visualAuthoring.setAggregate(i,t,l,p,c)];case 1:return m=f.sent(),this.telemetryService.logChildEvent(this.rootTelemetryEvent,I,{interactionType:"SetAggregate",visualType:u,role:i,oldValue:(0,_e.b)(r),newValue:(0,_e.b)(l),success:m}),[2]}})})},a.prototype.setVariation=function(i,t,r,l,p,c){return(0,n.__awaiter)(this,void 0,void 0,function(){var u;return(0,n.__generator)(this,function(m){switch(m.label){case 0:return[4,this.visualAuthoring.setVariation(p,l,r,i,t)];case 1:return u=m.sent(),this.telemetryService.logChildEvent(this.rootTelemetryEvent,I,{interactionType:"SetVariation",visualType:c,role:i,success:u}),[2]}})})},a.prototype.handleDrop=function(i,t,r){return(0,n.__awaiter)(this,void 0,void 0,function(){var l,p,u;return(0,n.__generator)(this,function(m){switch(m.label){case 0:return this.dragDropPayload?(l=this.core.viewModel.buckets,p=this.dataSources.get(),r!==this.dragDropPayload.sourceBucketIndex||t!==this.dragDropPayload.sourcePropertyIndex?((r===this.dragDropPayload.sourceBucketIndex?t>this.dragDropPayload.sourcePropertyIndex:r>this.dragDropPayload.sourceBucketIndex)&&(t=0===t?0:t-1),[4,this.visualAuthoring.moveField(l[this.dragDropPayload.sourceBucketIndex].role,l[r].role,this.dragDropPayload.sourcePropertyIndex,t,1,p,!1)]):[3,2]):[3,3];case 1:u=m.sent(),this.telemetryService.logChildEvent(this.rootTelemetryEvent,j,{success:u,sourceBucketIndex:this.dragDropPayload.sourceBucketIndex,targetBucketIndex:r,sourcePropertyIndex:this.dragDropPayload.sourcePropertyIndex,targetPropertyIndex:t}),m.label=2;case 2:i.preventDefault(),this.renderer.removeClass(i.target,this.dropTargetClass),m.label=3;case 3:return[2]}})})},a.prototype.handleDragOver=function(i,t,r){this.dragDropPayload&&(this.dragDropPayload.sourcePropertyIndex!==t||r!==this.dragDropPayload.sourceBucketIndex)&&(this.renderer.addClass(i.target,this.dropTargetClass),i.preventDefault())},a.prototype.handleDragStart=function(i,t){this.dragDropPayload={sourcePropertyIndex:i,sourceBucketIndex:t}},a.prototype.handleDragLeave=function(i){this.dragDropPayload&&(this.renderer.removeClass(i.target,this.dropTargetClass),i.preventDefault())},a.prototype.handleDragEnd=function(i){this.dragDropPayload=void 0,this.renderer.removeClass(i.target,this.dropTargetClass)},a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject($e.i),e.\u0275\u0275directiveInject(ae.D),e.\u0275\u0275directiveInject(Ue.AA),e.\u0275\u0275directiveInject(e.Injector),e.\u0275\u0275directiveInject(xe.E),e.\u0275\u0275directiveInject(Qe.H),e.\u0275\u0275directiveInject(ne.o),e.\u0275\u0275directiveInject(oe._),e.\u0275\u0275directiveInject(H.w),e.\u0275\u0275directiveInject(e.Renderer2),e.\u0275\u0275directiveInject(He.z),e.\u0275\u0275directiveInject(D.y0),e.\u0275\u0275directiveInject(Ce.$8))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["personalize-visual-visual-data-role-list"]],inputs:{rootTelemetryEvent:"rootTelemetryEvent"},outputs:{onLoad:"onLoad"},decls:5,vars:3,consts:[["id","inline-explore-property-label","role","none","localize","InlineExplore_ChangeField",1,"cdk-visually-hidden"],["id","inline-explore-context-menu-label","role","none","localize","PersonalizeVisual_FieldContextMenuLabel",1,"cdk-visually-hidden"],["id","inline-explore-add-new-field","role","none","localize","InlineExplore_AddNewField",1,"cdk-visually-hidden"],[4,"ngIf"],["class","bucket",4,"ngFor","ngForOf"],[1,"bucket"],[1,"header"],[1,"fluentTheme-md-reg",3,"id"],["pbiTooltipCaretSize","small","class","glyphicon pbi-glyph-add add-property pbi-focus-outline",3,"pbiTooltip","click",4,"ngIf"],["class","fluentTheme-md-reg pill add-new-field pbi-focus-outline","aria-haspopup","listbox","localize","InlineExplore_AddNewField",3,"click","drop","dragleave","dragover",4,"ngIf"],["disabled","","aria-haspopup","listbox","localize","InlineExplore_AddNewField",1,"fluentTheme-md-reg","pill","add-new-field",3,"hidden"],["addNewFieldButtonPlaceholder",""],["pbiTooltipCaretSize","small",1,"glyphicon","pbi-glyph-add","add-property","pbi-focus-outline",3,"pbiTooltip","click"],["addNewPropertyButton",""],[4,"ngFor","ngForOf"],["draggable","true",1,"projection",3,"drop","dragend","dragleave","dragstart","dragover"],[4,"ngIf","ngIfElse"],["notHierarchyLevel",""],["fieldMenuLabel","inline-explore-property-label","contextMenuLabel","inline-explore-context-menu-label",3,"bucketLabel","propertyLabel","rootTelemetryEvent","menuViewModel","displayName","tooltip","icon","interactive","showContextMenu","onOpenFieldMenu","onMenuItemClicked",4,"ngFor","ngForOf"],["fieldMenuLabel","inline-explore-property-label","contextMenuLabel","inline-explore-context-menu-label",3,"bucketLabel","propertyLabel","rootTelemetryEvent","menuViewModel","displayName","tooltip","icon","interactive","showContextMenu","onOpenFieldMenu","onMenuItemClicked"],["aria-haspopup","listbox","localize","InlineExplore_AddNewField",1,"fluentTheme-md-reg","pill","add-new-field","pbi-focus-outline",3,"click","drop","dragleave","dragover"],["addNewFieldButton",""]],template:function(t,r){1&t&&(e.\u0275\u0275element(0,"p",0)(1,"p",1)(2,"p",2),e.\u0275\u0275template(3,ot,2,1,"ul",3),e.\u0275\u0275pipe(4,"async")),2&t&&(e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(4,1,r.buckets$)))},dependencies:[g.NgForOf,g.NgIf,y.X,me.V,Je,g.AsyncPipe,E.F],styles:["ul[_ngcontent-%COMP%]{list-style:none;padding:0}fieldset[_ngcontent-%COMP%]{min-width:100%;padding:0;margin:0;border:0}.bucket[_ngcontent-%COMP%]:not(:last-child){margin-bottom:20px}.bucket[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%]{color:var(--fluent-theme-neutral-primary-color, #323130)}.bucket[_ngcontent-%COMP%]   button.pill[_ngcontent-%COMP%]{background:var(--fluent-theme-white-color, #FFF);border:1px solid var(--gray-110, #8A8886);box-sizing:border-box;border-radius:2px;height:24px;color:var(--fluent-theme-neutral-dark-color, #201F1E);line-height:14px;width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;padding:2px;margin-top:4px}.bucket[_ngcontent-%COMP%]   button.add-new-field[_ngcontent-%COMP%]{text-align:center}.bucket[_ngcontent-%COMP%]   button.drop-target[_ngcontent-%COMP%]{border:2px solid var(--fluent-theme-neutral-primary-color, #323130)}.bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .add-property[_ngcontent-%COMP%]{font-size:12px;background:none;border:none;padding:0;color:var(--gray-190, #201F1E);margin-right:6px}"],changeDetection:0}),a}(),st=o(89961),Ve=function(){function a(){}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["ng-component"]],decls:1,vars:2,consts:[["role","listbox",1,"compact-container",3,"disableMoreOptionsIcon","disableContextMenu"]],template:function(t,r){1&t&&e.\u0275\u0275element(0,"visual-types-container-modern",0),2&t&&e.\u0275\u0275property("disableMoreOptionsIcon",!0)("disableContextMenu",!0)},dependencies:[st.r],styles:[".pbi-overlay-caret-large.pbi-overlay-caret[_nghost-%COMP%]:after{background:var(--gray-20, #F3F2F1)}[_nghost-%COMP%]{width:168px;min-height:144px;background:var(--gray-20, #F3F2F1);border-radius:2px;box-shadow:0 0 2px var(--colorNeutralShadowAmbient),0 4px 8px var(--colorNeutralShadowKey);padding:12px}"]}),a}(),Te=o(9398),Se=o(8590),pt=o(20590),ze=o(59973),ct=o(17653),ut=o(22318),dt=o(77526),mt=o(18353),Le=o(81905),vt=o(11494),ht=function(){function a(i){this.localizationService=i,this.BookmarkTutorialModelKey="BookmarkTutorial"}return a.prototype.createBookmarkTutorialModel=function(){var i="#bookmarkButton";return{itemKeys:[this.BookmarkTutorialModelKey],items:{BookmarkTutorial:{title:this.localizationService.get("TutorialPopup_BookmarkTitle"),text:this.localizationService.get("TutorialPopup_BookmarkContent"),buttonLabel:this.localizationService.get("TutorialPopup_GotIt"),customClass:"tutorial-bookmarks-container",dataStoreKey:this.BookmarkTutorialModelKey,canShow:function(){return!!$(i)},attachTo:function(){return $(i)},offset:{top:-15,left:0},telemetryEventArgs:[J],telemetryLogTutorialDismiss:!0,preferredOrientation:"top",learnMoreText:this.localizationService.get("LearnMore"),learnMoreUrl:"https://go.microsoft.com/fwlink/?linkid=2141051"}}}},a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275inject(ne.o))},a.\u0275prov=e.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),gt=o(69071),ft=o(29866),yt=o(56083),ve=function(){function a(i,t,r,l,p,c,u,m,f,x,P,M,G,W,ie,q){this.personalizeVisualData=i,this.eventBridge=t,this.changeDetectorRef=r,this.lazyProvider=l,this.localizationService=p,this.ngZone=c,this.overlay=u,this.tutorialService=m,this.router=f,this.telemetryService=x,this.trustedVisualService=P,this.injector=M,this.visualPluginService=G,this.tutorialPopupService=W,this.overlayRef=ie,this.visualAuthoringService=q,this.isSessionDirty=!1,this.rootTelemetryEvent=this.personalizeVisualData.rootEvent,this.originalVisualConfig=_.cloneDeep(this.personalizeVisualData.visual.config)}return a.prototype.ngOnInit=function(){var i=this,t=this.eventBridge.on(Se.jCS).pipe((0,ze.h)(function(r){return r.affectContainer(i.personalizeVisualData.visual)}));this.visualTypes$=t.pipe((0,ct.b)(function(){return i.checkDirtyState()}),(0,Q.U)(function(){return i.personalizeVisualData.visual.config.singleVisual.visualType}),(0,ut.O)(this.personalizeVisualData.visual.config.singleVisual.visualType),(0,dt.x)()),this.visualDisplayName$=this.visualTypes$.pipe((0,Q.U)(function(r){return i.getVisualDisplayName(r)})),this.visualTypes$.pipe((0,mt.R)(function(r,l){return i.logVisualTypeChange(r,l),l}),(0,re.R)(this.overlayRef.onClose)).subscribe(),this.router.events.pipe((0,ze.h)(function(r){return r instanceof Te.m2}),(0,le.q)(1)).subscribe(function(){return i.overlayRef.close()}),t.pipe((0,re.R)(this.overlayRef.onClose),(0,Le.w)(function(){return i.ngZone.onStable})).subscribe(function(){return i.updateOverlayPosition()}),this.overlayRef.onClose.pipe((0,le.q)(1)).subscribe(function(){i.isSessionDirty&&i.tutorialPopupService.startTutorial(i.tutorialService.createBookmarkTutorialModel())})},a.prototype.onClickVisualTypes=function(i){return(0,n.__awaiter)(this,void 0,void 0,function(){var t,r,l,p,c=this;return(0,n.__generator)(this,function(u){switch(u.label){case 0:return t=this.overlay.position().flexibleConnectedTo(i).withPositions([(0,K.v3)(4,0),(0,K.xe)(0,-4),(0,K.Zc)(0,4),(0,K.q6)(-4,0)]).withFlexibleDimensions(!0).withPush(!0).withGrowAfterOpen(!0),r=this.telemetryService.startChildEvent(this.rootTelemetryEvent,de.l,{overlayType:"VisualTypeSelection"}),[4,this.lazyProvider.getModule("./lazy-modules/personalize-visual/personalize-visual.module#PersonalizeVisualModule")];case 1:return l=u.sent().componentFactoryResolver,(p=this.overlay.open({component:Ve,options:{positionStrategy:t,hasBackdrop:!0,backdropClass:oe.L},closeOnBackdropClick:!0,hasCaret:!0,parent:this.overlayRef,closeWithParent:!0,injector:this.injector,componentFactoryResolver:l})).onClose.pipe((0,re.R)(this.overlayRef.onClose),(0,le.q)(1)).subscribe(function(){return r.resolve()}),this.visualTypes$.pipe((0,re.R)(p.onClose),(0,Le.w)(function(){return c.ngZone.onStable})).subscribe(function(){return t.apply()}),[2]}})})},a.prototype.getDiscardChangesTooltipText=function(){return this.localizationService.get(this.isSessionDirty?"PersonalizeVisual_DiscardChanges":"PersonalizeVisual_DiscardChanges_Disabled")},a.prototype.discardChanges=function(){var i=this.personalizeVisualData.visual;i.config=_.cloneDeep(this.originalVisualConfig),this.eventBridge.publishToChannel(Se.jCS,{affectContainer:function(r){return r.name===i.name}}),this.telemetryService.logChildEvent(this.rootTelemetryEvent,v,{})},a.prototype.updateOverlayPosition=function(){this.changeDetectorRef.detectChanges(),this.overlayRef.overlayRef.updatePosition()},a.prototype.logVisualTypeChange=function(i,t){this.telemetryService.logChildEvent(this.rootTelemetryEvent,Z,{oldVisualType:i,newVisualType:t})},a.prototype.getVisualDisplayName=function(i){var t=this.visualPluginService.getPlugin(i),r=this.trustedVisualService.isTrustedVisual(i),l=r&&this.trustedVisualService.getVisualTypeOptions(i);return t.custom?t.displayName:r?l&&l.titleKey?this.localizationService.get(l.titleKey):t.displayName||t.name:(0,pt.Gf)(t.titleKey,this.localizationService)},a.prototype.checkDirtyState=function(){var i=this.originalVisualConfig.singleVisual,t=this.personalizeVisualData.visual.config.singleVisual;this.isSessionDirty=i.visualType!==t.visualType||!_.isEqual(i.query,t.query),(this.isSessionDirty||i.presentationChangesApplied)&&this.visualAuthoringService.setPresentationChangesApplied(!0)},a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275directiveInject(H.M),e.\u0275\u0275directiveInject(vt.J),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(xe.E),e.\u0275\u0275directiveInject(ne.o),e.\u0275\u0275directiveInject(e.NgZone),e.\u0275\u0275directiveInject(oe._),e.\u0275\u0275directiveInject(ht),e.\u0275\u0275directiveInject(Te.F0),e.\u0275\u0275directiveInject(D.y0),e.\u0275\u0275directiveInject(gt.t),e.\u0275\u0275directiveInject(e.Injector),e.\u0275\u0275directiveInject(ft.D),e.\u0275\u0275directiveInject(yt.yU),e.\u0275\u0275directiveInject(H.w),e.\u0275\u0275directiveInject(Ce.$8))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["personalize-visual"]],decls:16,vars:9,consts:[[1,"pbi-depth-2"],[1,"personalize-visual-container"],["localize","PersonalizeVisual_MainMenuLabel",1,"fluentTheme-vlg-semibold"],[1,"header-actions"],["pbiTooltipCaretSize","small",1,"glyphicon","glyph-small","pbi-glyph-eraser","pbi-focus-outline",3,"disabled","pbiTooltip","click"],["pbiTooltipCaretSize","small",1,"glyphicon","glyph-small","pbi-glyph-close","pbi-focus-outline",3,"pbiTooltip","click"],[1,"scrollable-content"],[1,"visual-types-picker"],["id","inline-explore-visual-type-picker-label","localize","PersonalizeVisual_VisualType",1,"fluentTheme-md-reg"],["id","inline-explore-visual-type-picker","aria-haspopup","listbox","aria-labelledby","inline-explore-visual-type-picker-label inline-explore-visual-type-picker",1,"fluentTheme-md-reg","pbi-focus-outline",3,"click"],["visualTypeOrigin",""],[3,"rootTelemetryEvent","onLoad"]],template:function(t,r){if(1&t){var l=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"section",0)(1,"div",1)(2,"header"),e.\u0275\u0275element(3,"div",2),e.\u0275\u0275elementStart(4,"span",3)(5,"button",4),e.\u0275\u0275listener("click",function(){return r.discardChanges()}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"button",5),e.\u0275\u0275listener("click",function(){return r.overlayRef.close()}),e.\u0275\u0275pipe(7,"localize"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(8,"div",6)(9,"div",7),e.\u0275\u0275element(10,"label",8),e.\u0275\u0275elementStart(11,"button",9,10),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(l);var c=e.\u0275\u0275reference(12);return e.\u0275\u0275resetView(r.onClickVisualTypes(c))}),e.\u0275\u0275text(13),e.\u0275\u0275pipe(14,"async"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(15,"personalize-visual-visual-data-role-list",11),e.\u0275\u0275listener("onLoad",function(){return r.updateOverlayPosition()}),e.\u0275\u0275elementEnd()()()()}2&t&&(e.\u0275\u0275advance(5),e.\u0275\u0275property("disabled",!r.isSessionDirty)("pbiTooltip",r.getDiscardChangesTooltipText()),e.\u0275\u0275advance(1),e.\u0275\u0275property("pbiTooltip",e.\u0275\u0275pipeBind1(7,5,"PBI_Button_Label_Close")),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(14,7,r.visualDisplayName$)," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("rootTelemetryEvent",r.rootTelemetryEvent))},styles:['personalize-visual{height:100%;max-height:100vh;display:block}personalize-visual section{width:240px;height:100%;max-height:100vh;background:var(--fluent-theme-neutral-lighter-color, #F3F2F1);border-radius:2px;box-sizing:border-box;display:flex;flex-direction:column}personalize-visual section .personalize-visual-container{margin:12px 24px 0;height:100%;max-height:100vh;display:flex;flex-direction:column}personalize-visual section .personalize-visual-container .scrollable-content{height:calc(100% - 40px);overflow:auto;padding:0 1px}personalize-visual section .personalize-visual-container .scrollable-content personalize-visual-visual-data-role-list{display:block;margin-bottom:24px}personalize-visual header{display:flex;justify-content:space-between;color:var(--fluent-theme-neutral-dark-alt-color, #333333);height:24px;margin-bottom:16px}personalize-visual header .header-actions{display:flex}personalize-visual header .header-actions button{padding:0;border:0;background:transparent;margin-left:12px;color:var(--gray-190, #201F1E)}personalize-visual header .header-actions button.pbi-glyph-close{font-size:14px}personalize-visual header .header-actions button[disabled]{opacity:.5}personalize-visual .visual-types-picker{margin-bottom:20px}personalize-visual .visual-types-picker label{color:var(--fluent-theme-neutral-primary-color, #323130)}personalize-visual .visual-types-picker button{background:var(--fluent-theme-white-color, #FFF);border:1px solid var(--gray-110, #8A8886);box-sizing:border-box;border-radius:2px;height:24px;padding:2px 18px 2px 6px;color:var(--fluent-theme-neutral-dark-color, #201F1E);line-height:var(--md-font-size, 14px);position:relative;width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;text-align:left;margin-top:4px}personalize-visual .visual-types-picker button:after{font-family:PowrMDL2;content:"\\e972";position:absolute;top:5px;right:5px;height:var(--sm-font-size, 12px);transform:rotate(-90deg);width:var(--sm-font-size, 12px);font-size:var(--sm-font-size, 12px)}html[dir=rtl] personalize-visual .visual-types-picker button{padding-left:18px;padding-right:6px;text-align:right}html[dir=rtl] personalize-visual .visual-types-picker button:after{transform:rotate(90deg);left:5px;right:initial}\n'],encapsulation:2,changeDetection:0}),a}(),_t=o(82156),xt=o(79061),Ct=o(69310),bt=o(63654),Pt=o(94841),Vt=o(66972),Tt=o(39433),St=o(16095),zt=o(35284),Lt=[{type:ve,componentId:"PersonalizeVisualComponentId"}],Et=function(){function a(){}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=e.\u0275\u0275defineInjector({imports:[g.CommonModule,_t.N.withManifests(Lt),xt.v,Pt.b,bt.X,Vt.N,Tt.t,St.Z,zt.J,Ct.R,w.Q]}),a}();e.\u0275\u0275setComponentScope(ve,[y.X,me.V,lt],[g.AsyncPipe,E.F])},48144:function(se,N,o){o.d(N,{R:function(){return Z},y:function(){return S}});var w=o(42233),n=o(69843),B=o(94419),b=o(76001),T=o(80366);function Z(d){switch(d){case 2:return 1;case 3:return 2;case 0:default:return 0;case 6:return 3}}function S(d,s){switch(d){case 1:return new I;case 2:return new X;case 3:return new F;default:return new R(s)}}var F=function(){function d(){}return d.prototype.fieldExpr=function(s){var v=(0,B.nw)(s.schema.name,s.contract.name);return(0,B.m_)(v,2)},d}(),R=function(){function d(s){this.groupingDesignStateService=s}return d.prototype.fieldExpr=function(s){if(void 0!==s.kind){if(0===s.kind){if((0,w.RV)(s.entity.name,s.contract,this.groupingDesignStateService)){var v=(0,B.nw)(s.entity.contractSchema.name,s.entity.name),V=(0,w.ZP)(s.contract.column.groupingMetadata,v);return(0,T.og)({groupingColumn:{schema:s.schema.name,entity:s.entity.name,name:s.name,groupedColumns:_.isEmpty(V)?void 0:_.map(V,function(j){return(0,b.Q)(j)})}})}return(0,T.og)({column:{schema:s.schema.name,entity:s.originalEntity?s.originalEntity.name:s.entity.name,name:s.name}})}if(1===s.kind)return(0,T.og)({measure:{schema:s.schema.name,entity:s.entity.name,name:s.name}})}},d}(),I=function(){function d(){}return d.prototype.fieldExpr=function(s){if(s.variation&&s.originalEntity){var v=s.parent;return(0,T.og)({columnHierarchyVariation:{source:{name:v.name,schema:v.entity.contractSchema.name,entity:v.entity.name},hierarchy:{schema:s.entity.contractSchema.name,entity:s.originalEntity.name,name:s.contract.name},variationName:s.variation}})}return(0,T.og)({hierarchy:{name:s.name,schema:s.entity.contractSchema.name,entity:s.originalEntity?s.originalEntity.name:s.entity.name}})},d}(),X=function(){function d(){}return d.prototype.fieldExpr=function(s){if(s.variation&&s.parent instanceof n.Jg){var v=s.parent,V=v.parent;return(0,T.og)({columnHierarchyLevelVariation:{source:{name:V.name,schema:V.entity.contractSchema.name,entity:V.entity.name},level:{schema:V.entity.contractSchema.name,entity:s.originalEntity.name,name:v.contract.name,level:s.name},variationName:s.variation}})}return(0,T.og)({hierarchyLevel:{schema:s.entity.contractSchema.name,entity:s.entity.name,name:s.parent.name,level:s.name}})},d}()},83839:function(se,N,o){o.d(N,{hF:function(){return T},iq:function(){return I}});var w=o(69843),n={type:1,sheet:"fieldListPaneIcons",symbolId:"fieldListCheckmark"},B="fieldListPaneIcons_paneColorRefresh",b="fieldListPaneIcons_paneColorRefresh";function T(d,s){return{nodes:d.schema.entities.filter(function(v){return(!v.hidden||v.showHidden||s&&s.fieldHiddenPredicate&&!s.fieldHiddenPredicate(v))&&v.userEntity}).map(function(v){return function(d,s){for(var v={type:1,sheet:B,symbolId:"".concat(d.iconClassName||"fieldListEntity","_paneColorRefresh")},V={data:d,displayName:d.displayName,icon:v,tooltip:s&&s.showTooltips,ariaLabel:d.displayName},j=V.children=[],O=0,J=d.properties;O<J.length;O++){var k=J[O],A=s&&s.fieldHiddenPredicate&&s.fieldHiddenPredicate(k);k.visible&&(!k.hidden||void 0!==A&&!A)&&j.push(S(V,k,s))}return V}(v,s)})}}function S(d,s,v){var V=(0,w.Wx)(s,!0,!0),j="none"!==V?{type:1,sheet:b,symbolId:V}:void 0,O=v&&v.fieldSelectionPredicate&&v.fieldSelectionPredicate(s),J=O,k=v&&v.fieldIdPredicate&&v.fieldIdPredicate(s),A=v&&v.fieldCheckablePredicate&&v.fieldCheckablePredicate(s),e=v&&v.fieldDraggablePredicate&&v.fieldDraggablePredicate(s),ee=v&&v.fieldHasMenuPredicate&&v.fieldHasMenuPredicate(s),D={data:s,displayName:s.displayName,draggable:e,id:k,parent:d,checkable:A,checked:J,selected:O,icon:j,tooltip:v&&v.showTooltips,menu:ee,ariaLabel:s.displayName};if(O&&F(D,v?.showAncestorsBadge),s.children)for(var H=D.children=[],U=0,te=s.children;U<te.length;U++){var Y=te[U],Q=v&&v.fieldHiddenPredicate&&v.fieldHiddenPredicate(Y);(!Y.hidden||void 0!==Q&&!Q)&&H.push(S(D,Y,v))}return D}function F(d,s){d.expanded=!0,d.parent&&(s?(R(d),F(d.parent,!0)):F(d.parent))}function R(d){d.parent.badge=n,null==d.parent.badgedChildren&&(d.parent.badgedChildren=[]),_.find(d.parent.badgedChildren,d)||d.parent.badgedChildren.push(d)}function I(d){d.parent&&(d.checked||d.badge?R(d):(_.remove(d.parent.badgedChildren,function(s){return s.displayName===d.displayName}),d.parent.badge=_.isEmpty(d.parent.badgedChildren)?void 0:n),I(d.parent))}},65005:function(se,N,o){o.d(N,{l:function(){return ue}});var w=o(81337),n=o(50423),B=o(48787),b=o(30794),T=o(37196),Z=[],S=o(77476),F=o(68070),R=o(89237);function I(h,C){1&h&&n.\u0275\u0275element(0,"div",7)}function X(h,C){1&h&&(n.\u0275\u0275elementStart(0,"div",8),n.\u0275\u0275element(1,"div",9)(2,"div",10),n.\u0275\u0275elementEnd())}function d(h,C){1&h&&(n.\u0275\u0275elementStart(0,"div",11),n.\u0275\u0275element(1,"div",12),n.\u0275\u0275elementStart(2,"div",13),n.\u0275\u0275element(3,"div",14)(4,"div",15),n.\u0275\u0275elementEnd()())}function s(h,C){if(1&h&&(n.\u0275\u0275elementContainerStart(0,3),n.\u0275\u0275template(1,I,1,0,"div",4),n.\u0275\u0275template(2,X,3,0,"div",5),n.\u0275\u0275template(3,d,5,0,"div",6),n.\u0275\u0275elementContainerEnd()),2&h){var g=C.$implicit,y=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("ngSwitch",g),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngSwitchCase",y.largeBarType),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngSwitchCase",y.multipleBarType),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngSwitchCase",y.multipleSmallLargeType)}}function v(h,C){if(1&h&&(n.\u0275\u0275elementStart(0,"div",1),n.\u0275\u0275template(1,s,4,4,"ng-container",2),n.\u0275\u0275elementEnd()),2&h){var g=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngStyle",g.barsStyle),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",g.barsProperties.bars)}}var A=function(){function h(){this.largeBarType=0,this.multipleBarType=1,this.multipleSmallLargeType=2}return h.prototype.ngOnChanges=function(){this.barsProperties&&(this.barsStyle={height:"".concat((this.barsProperties.height+8)*this.barsProperties.bars.length,"px")})},h.\u0275fac=function(g){return new(g||h)},h.\u0275cmp=n.\u0275\u0275defineComponent({type:h,selectors:[["shimmering-bars"]],inputs:{barsProperties:"barsProperties"},features:[n.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[["class","bars",3,"ngStyle",4,"ngIf"],[1,"bars",3,"ngStyle"],[3,"ngSwitch",4,"ngFor","ngForOf"],[3,"ngSwitch"],["class","largerLoadingBar animate",4,"ngSwitchCase"],["class","multipleBars",4,"ngSwitchCase"],["class","multipleSmallLarge",4,"ngSwitchCase"],[1,"largerLoadingBar","animate"],[1,"multipleBars"],[1,"miniLoadingBar","animate"],[1,"smallerLoadingBar","animate"],[1,"multipleSmallLarge"],[1,"shimmerBox","animate"],[1,"smallLargeBarContainer"],[1,"upperLoadingBar","animate"],[1,"lowerLoadingBar","animate"]],template:function(g,y){1&g&&n.\u0275\u0275template(0,v,2,2,"div",0),2&g&&n.\u0275\u0275property("ngIf",y.barsProperties)},dependencies:[S.NgForOf,S.NgIf,S.NgStyle,S.NgSwitch,S.NgSwitchCase],styles:['[_nghost-%COMP%]{--shimmer-background-color: var(--gray-20);--shimmer-animate1: var(--gray-30);--shimmer-animate2: var(--gray-50)}[data-legacy-theming=false]   [_nghost-%COMP%]{--shimmer-background-color: var(--colorNeutralBackground3);--shimmer-animate1: var(--colorNeutralBackground3Hover);--shimmer-animate2: var(--colorNeutralBackground3Pressed)}.bars[_ngcontent-%COMP%]{display:flex;flex-direction:column}.largerLoadingBar[_ngcontent-%COMP%]{border-radius:2px;flex-grow:1;background:var(--shimmer-background-color)}html:not([dir="rtl"])[_nghost-%COMP%]   .largerLoadingBar[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .largerLoadingBar[_ngcontent-%COMP%]{margin:4px 8px}html[dir="rtl"][_nghost-%COMP%]   .largerLoadingBar[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .largerLoadingBar[_ngcontent-%COMP%]{margin:4px 8px}.multipleBars[_ngcontent-%COMP%]{display:flex;align-items:center;flex-grow:1}html:not([dir="rtl"])[_nghost-%COMP%]   .multipleBars[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .multipleBars[_ngcontent-%COMP%]{margin:4px 8px}html[dir="rtl"][_nghost-%COMP%]   .multipleBars[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .multipleBars[_ngcontent-%COMP%]{margin:4px 8px}.miniLoadingBar[_ngcontent-%COMP%]{border-radius:2px;height:60%;width:10%;background:var(--shimmer-background-color)}html:not([dir="rtl"])[_nghost-%COMP%]   .miniLoadingBar[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .miniLoadingBar[_ngcontent-%COMP%]{margin-right:4px}html[dir="rtl"][_nghost-%COMP%]   .miniLoadingBar[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .miniLoadingBar[_ngcontent-%COMP%]{margin-left:4px}.smallerLoadingBar[_ngcontent-%COMP%]{border-radius:2px;height:80%;width:100%;background:var(--shimmer-background-color)}html:not([dir="rtl"])[_nghost-%COMP%]   .smallerLoadingBar[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .smallerLoadingBar[_ngcontent-%COMP%]{margin-left:4px}html[dir="rtl"][_nghost-%COMP%]   .smallerLoadingBar[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .smallerLoadingBar[_ngcontent-%COMP%]{margin-right:4px}.multipleSmallLarge[_ngcontent-%COMP%]{display:flex;flex-grow:1;padding:10px 9px}html:not([dir="rtl"])[_nghost-%COMP%]   .multipleSmallLarge[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .multipleSmallLarge[_ngcontent-%COMP%]{margin:4px 8px}html[dir="rtl"][_nghost-%COMP%]   .multipleSmallLarge[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .multipleSmallLarge[_ngcontent-%COMP%]{margin:4px 8px}.upperLoadingBar[_ngcontent-%COMP%]{border-radius:2px;height:65%;width:49%;background:var(--shimmer-background-color)}html:not([dir="rtl"])[_nghost-%COMP%]   .upperLoadingBar[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .upperLoadingBar[_ngcontent-%COMP%]{margin:0 4px 11px 0}html[dir="rtl"][_nghost-%COMP%]   .upperLoadingBar[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .upperLoadingBar[_ngcontent-%COMP%]{margin:0 0 11px 4px}.lowerLoadingBar[_ngcontent-%COMP%]{border-radius:2px;height:65%;width:100%;background:var(--shimmer-background-color)}.shimmerBox[_ngcontent-%COMP%]{background:var(--shimmer-background-color);border-radius:2px;height:32px;width:32px}.smallLargeBarContainer[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;max-width:167px}html:not([dir="rtl"])[_nghost-%COMP%]   .smallLargeBarContainer[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .smallLargeBarContainer[_ngcontent-%COMP%]{margin:4px 0 2.42px 13px}html[dir="rtl"][_nghost-%COMP%]   .smallLargeBarContainer[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .smallLargeBarContainer[_ngcontent-%COMP%]{margin:4px 13px 2.42px 0}.animate[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_shimmer 5s infinite linear;background:linear-gradient(270deg,var(--shimmer-animate1) 0%,var(--shimmer-animate2) 50%,var(--shimmer-animate1) 100%);background-size:250% 100%}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:250% 0}to{background-position:-250% 0}}'],changeDetection:0}),h}(),e=o(85102),ee=["pbiTree"];function D(h,C){if(1&h){var g=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"tri-search-box",5),n.\u0275\u0275listener("value",function(L){n.\u0275\u0275restoreView(g);var E=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(E.search$.next(L))}),n.\u0275\u0275pipe(1,"localize"),n.\u0275\u0275pipe(2,"localize"),n.\u0275\u0275elementEnd()}if(2&h){var y=n.\u0275\u0275nextContext();n.\u0275\u0275property("currentInputValue",y.searchText||"")("placeholderText",n.\u0275\u0275pipeBind1(2,8,"SearchBox_Text"))("fluentTheme",!0)("compact",!0)("fullWidth",!0),n.\u0275\u0275attribute("aria-label",n.\u0275\u0275pipeBind1(1,6,"SearchBox_Text"))}}function H(h,C){if(1&h){var g=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"pbi-search-box")(1,"input",6),n.\u0275\u0275listener("input",function(L){n.\u0275\u0275restoreView(g);var E=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(E.search$.next(L.target.value))}),n.\u0275\u0275pipe(2,"localize"),n.\u0275\u0275pipe(3,"localize"),n.\u0275\u0275elementEnd()()}if(2&h){var y=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("value",y.searchText||"")("placeholder",n.\u0275\u0275pipeBind1(3,5,"SearchBox_Text")),n.\u0275\u0275attribute("aria-label",n.\u0275\u0275pipeBind1(2,3,"SearchBox_Text"))}}function U(h,C){if(1&h&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"shimmering-bars",7),n.\u0275\u0275elementContainerEnd()),2&h){var g=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("barsProperties",g.shimmeringBars)}}function te(h,C){if(1&h){var g=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"pbi-tree",12,13),n.\u0275\u0275listener("onNodeClick",function(L){n.\u0275\u0275restoreView(g);var E=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(E.onNodeClick.emit(L))})("onNodeCheck",function(L){n.\u0275\u0275restoreView(g);var E=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(E.onNodeCheck.emit(L))})("onNodeExpansionToggle",function(L){n.\u0275\u0275restoreView(g);var E=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(E.onNodeExpansionToggle.emit(L))})("onFirstRender",function(){n.\u0275\u0275restoreView(g);var L=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(L.onFirstRender())}),n.\u0275\u0275pipe(2,"async"),n.\u0275\u0275elementEnd()}if(2&h){var y=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("tree",y.fieldListTree)("search",n.\u0275\u0275pipeBind1(2,5,y.search$))("hasHighlights",y.hasHighlights)("checkMode",y.checkMode)("options",y._options)}}function Y(h,C){1&h&&n.\u0275\u0275projection(0,2)}function Q(h,C){if(1&h&&(n.\u0275\u0275elementStart(0,"div",8),n.\u0275\u0275element(1,"div",9),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(2,te,3,7,"pbi-tree",10),n.\u0275\u0275template(3,Y,1,0,"ng-template",null,11,n.\u0275\u0275templateRefExtractor)),2&h){var g=n.\u0275\u0275reference(4),y=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",y.fieldListTree)("ngIfElse",g)}}var pe=[[["",8,"pbi-field-list-perspective-header"]],[["",8,"pbi-field-list-header"]],[["",8,"pbi-field-list-watermark"]]],ce=[".pbi-field-list-perspective-header",".pbi-field-list-header",".pbi-field-list-watermark"],ae={height:24,bars:[0,1,1,0,0]},ue=function(){function h(){this.hasHighlights=!1,this.loading=!1,this.shimmeringBars=ae,this.defaultOptions={},this._options=this.defaultOptions,this.onNodeExpansionToggle=new n.EventEmitter,this.onNodeClick=new n.EventEmitter,this.onNodeCheck=new n.EventEmitter,this.onFirstRenderComplete=new n.EventEmitter,this.handleFieldListTreeHeightDiff=new n.EventEmitter,this.search$=new b.xQ}return Object.defineProperty(h.prototype,"options",{set:function(g){this._options=(0,w.__assign)((0,w.__assign)({},this.defaultOptions),g)},enumerable:!1,configurable:!0}),h.prototype.ngOnInit=function(){var C=this;this.focusSearchBoxOnFirstRenderComplete&&this.onFirstRenderComplete.pipe((0,B.q)(1)).subscribe(function(){return C.focusSearchBox()})},h.prototype.onFirstRender=function(){var C=this.getFieldListTreeHeightDiff();this.handleFieldListTreeHeightDiff.emit(C),this.scrollSelectedItemIntoViewOnInit&&this.pbiTree.scrollToFirstSelectedNode(),this.onFirstRenderComplete.emit()},h.prototype.focusSearchBox=function(){$(".field-list-search-container input").trigger("focus")},h.prototype.getFieldListTreeHeightDiff=function(){return this.pbiTree.getTreeHeight()+2-this.pbiTreeElementRef.nativeElement.getBoundingClientRect().height},h.\u0275fac=function(g){return new(g||h)},h.\u0275cmp=n.\u0275\u0275defineComponent({type:h,selectors:[["pbi-field-list"]],viewQuery:function(g,y){if(1&g&&(n.\u0275\u0275viewQuery(T.u,5),n.\u0275\u0275viewQuery(ee,5,n.ElementRef)),2&g){var z=void 0;n.\u0275\u0275queryRefresh(z=n.\u0275\u0275loadQuery())&&(y.pbiTree=z.first),n.\u0275\u0275queryRefresh(z=n.\u0275\u0275loadQuery())&&(y.pbiTreeElementRef=z.first)}},inputs:{fieldListTree:"fieldListTree",scrollSelectedItemIntoViewOnInit:"scrollSelectedItemIntoViewOnInit",checkMode:"checkMode",hasHighlights:"hasHighlights",loading:"loading",searchText:"searchText",focusSearchBoxOnFirstRenderComplete:"focusSearchBoxOnFirstRenderComplete",fluent:"fluent",options:"options"},outputs:{onNodeExpansionToggle:"onNodeExpansionToggle",onNodeClick:"onNodeClick",onNodeCheck:"onNodeCheck",onFirstRenderComplete:"onFirstRenderComplete",handleFieldListTreeHeightDiff:"handleFieldListTreeHeightDiff"},features:[n.\u0275\u0275ProvidersFeature(Z)],ngContentSelectors:ce,decls:8,vars:4,consts:[["data-tutorial-target","search-box",1,"field-list-search-container"],["data-testid","search-bar-input",3,"currentInputValue","placeholderText","fluentTheme","compact","fullWidth","value",4,"ngIf"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["loaded",""],["data-testid","search-bar-input",3,"currentInputValue","placeholderText","fluentTheme","compact","fullWidth","value"],["pbiSearchInput","","data-testid","search-bar-input",1,"pbi-focus-outline",3,"value","placeholder","input"],[3,"barsProperties"],[1,"tutorial-target-container"],["data-tutorial-target","data-tree"],["data-testid","data-tree",3,"tree","search","hasHighlights","checkMode","options","onNodeClick","onNodeCheck","onNodeExpansionToggle","onFirstRender",4,"ngIf","ngIfElse"],["watermark",""],["data-testid","data-tree",3,"tree","search","hasHighlights","checkMode","options","onNodeClick","onNodeCheck","onNodeExpansionToggle","onFirstRender"],["pbiTree",""]],template:function(g,y){if(1&g&&(n.\u0275\u0275projectionDef(pe),n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275template(1,D,3,10,"tri-search-box",1),n.\u0275\u0275template(2,H,4,7,"pbi-search-box",2),n.\u0275\u0275elementEnd(),n.\u0275\u0275projection(3),n.\u0275\u0275projection(4,1),n.\u0275\u0275template(5,U,2,1,"ng-container",3),n.\u0275\u0275template(6,Q,5,2,"ng-template",null,4,n.\u0275\u0275templateRefExtractor)),2&g){var z=n.\u0275\u0275reference(7);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",y.fluent),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!y.fluent),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",y.loading)("ngIfElse",z)}},dependencies:[S.NgIf,F.a,F.p,R.U,T.u,A,S.AsyncPipe,e.F],styles:["[_nghost-%COMP%]{height:100%;display:flex;flex-direction:column}pbi-tree[_ngcontent-%COMP%]{margin-top:9px;height:100%;display:block;overflow:hidden}.tutorial-target-container[_ngcontent-%COMP%]{position:relative;visibility:hidden;height:0;width:0}.tutorial-target-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;top:20px;visibility:hidden;height:0;width:0}"],changeDetection:0}),h}()}}]);