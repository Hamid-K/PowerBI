"use strict";(self.webpackChunkdesktopDialogHost=self.webpackChunkdesktopDialogHost||[]).push([["conditional-formatting-dialog","field-list"],{84631:function(le,H,r){r.d(H,{CZ:function(){return D},IA:function(){return W},MM:function(){return C},QZ:function(){return w},XB:function(){return A},_1:function(){return m},vX:function(){return P},xK:function(){return I},yY:function(){return p},zB:function(){return B}});var y=r(52083),l=r(62458),M=r(94419),b=r(4829);function P(v){return{solid:{color:I(v,(0,y.d9)())}}}function I(v,h){l.fF.assertValue(h,"gradientSettings");var z,J,U,x={color:(0,M.$_)(h.minColor,"minColor")},Z=h.minValue;if(null!=Z&&(z=(0,M.tx)(Z)),h.diverging){J={color:(0,M.$_)(h.midColor,"midColor")};var k=h.midValue;null!=k&&(U=(0,M.tx)(k))}var re,Ce={color:(0,M.$_)(h.maxColor,"maxColor")},ce=h.maxValue;null!=ce&&(re=(0,M.tx)(ce));var ne,ue=h.nullStrategy,Se=h.nullColor,q={};return ne=h.diverging?q.linearGradient3={min:x,mid:J,max:Ce}:q.linearGradient2={min:x,max:Ce},z&&(ne.min.value=z),U&&(ne.mid.value=U),re&&(ne.max.value=re),ue&&(ne.nullColoringStrategy={strategy:(0,M.fL)(ue)},ue===b.Sx&&(ne.nullColoringStrategy.color=(0,M.$_)(Se,"nullColor"))),(0,M.x5)(v,q)}function p(v,h,x){var z;switch(x){case"number":z={condition:(0,M.qu)(3,v,(0,M.tx)(0)),value:(0,M.fL)(h)};break;case"text":z={condition:(0,M.qu)(0,v,(0,M.fL)("")),value:(0,M.fL)(h)};break;default:l.fF.assertNever(x)}return{solid:{color:(0,M.u7)([z])}}}var B="CircleHigh",W="Before",w="Top";function A(v,h){switch(void 0===h&&(h="number"),h){case"number":return{kind:"Icon",value:(0,M.u7)([D(v,67,100,!0,(0,M.fL)("CircleHigh")),D(v,33,67,!1,(0,M.fL)("SignMedium")),D(v,0,33,!1,(0,M.fL)("SignLow"))]),layout:(0,M.fL)(W),verticalAlignment:(0,M.fL)(w)};case"text":return{kind:"Icon",value:(0,M.u7)([m(v,(0,M.fL)("CircleHigh")),m(v,(0,M.fL)("SignMedium")),m(v,(0,M.fL)("SignLow"))]),layout:(0,M.fL)(W),verticalAlignment:(0,M.fL)(w)};default:l.fF.assertNever(h)}}function D(v,h,x,z,Z){var J,U;return h>0&&(J=(0,M.qu)(2,v,M.LE.overRangeOf(v,h/100))),x<100&&(U=(0,M.qu)(z?4:3,v,M.LE.overRangeOf(v,x/100))),{condition:J&&U?(0,M.xD)(J,U):J||U,value:Z}}function m(v,h){return{condition:(0,M.qu)(0,v,(0,M.fL)("")),value:h}}function C(v,h,x,z,Z){var J,U;return null!==h&&(J=(0,M.qu)(2,v,(0,M.tx)(h))),null!==x&&(U=(0,M.qu)(z?4:3,v,(0,M.tx)(x))),{condition:J&&U?(0,M.xD)(J,U):J||U,value:Z}}},26902:function(le,H,r){r.d(H,{L6:function(){return W},aI:function(){return B},ac:function(){return D},dw:function(){return C},uz:function(){return A}});var y=r(40812),l=r(64067),M=r(62458),b=r(94419),P=r(59897),I=r(80777),p={totalMatchingOption:1,reverseDirection:!1,hideText:!1};function B(h,x){return M.fF.assertValue(h,"visual"),M.fF.assertValue(x,"repetition"),W(m(h.objects,x))}function W(h){if(!h)return p;var x,z=h.minValue;z&&(x=z.value);var Z,J=h.maxValue;J&&(Z=J.value);var U=1,k=h.totalMatchingOption;return k&&(U=k.value),{minValue:x,maxValue:Z,positiveColor:w(h.positiveColor),negativeColor:w(h.negativeColor),axisColor:w(h.axisColor),reverseDirection:h.reverseDirection.value,hideText:h.hideText.value,totalMatchingOption:U}}function w(h){var x=h.solid.color;return(0,l.A7)(x.value)?{solid:{color:x.value}}:null}function A(){return D(p,I.Ge.fromPrimitiveTypeAndCategory(12))}function D(h,x){var z,Z,J;return M.fF.assertValue(h,"dataBars"),M.fF.assertValue(x,"valueType"),void 0!==h.minValue&&(z=v(h.minValue,x)),void 0!==h.maxValue&&(Z=v(h.maxValue,x)),void 0!==h.totalMatchingOption&&(J=(0,b.cA)(h.totalMatchingOption)),{minValue:z,maxValue:Z,positiveColor:(0,P.EV)(h.positiveColor&&h.positiveColor.solid.color,"maxColor"),negativeColor:(0,P.EV)(h.negativeColor&&h.negativeColor.solid.color,"minColor"),axisColor:(0,P.EV)(h.axisColor&&h.axisColor.solid.color,"foreground"),reverseDirection:(0,b.O7)(h.reverseDirection),hideText:(0,b.O7)(h.hideText),totalMatchingOption:J}}function m(h,x){return M.fF.assertValue(x,"objectRepetition"),(0,y.OT)(h,x)}function C(h,x){return M.fF.assertValue(x,"objectRepetition"),void 0!==m(h,x)}function v(h,x){if(M.fF.assert(function(){return x.integer||x.numeric},"databars only supports numeric SQExprs"),x.integer){var z=Math.round(h);return(0,b.cA)(z)}return 2===x.primitiveType?(0,b.gH)(h):(M.fF.assert(function(){return 259===x.extendedType},"Unexpected data type."),(0,b.tx)(h))}},32441:function(le,H,r){r.d(H,{u:function(){return b}});var y=r(50423),l=r(18460),M=function(I,p,B,W,w){return{formattingSources:I,indicatorEnabled:p,mobileFormatting:B,disabledCards:W,disabledSlices:w}},b=function(){function P(){var I=this;this.mobileFormatting=!1,this.propertyChanged=new y.EventEmitter,this.outputArgs={propertyChanged:function(B){return I.propertyChanged.emit(B)}},this.modulePath="@powerbi/ExploreUIAuthoring/lazy-modules/pane-formatting/pane-formatting.module#PaneFormattingModule",this.componentId="FormattingPaneComponentId"}return P.\u0275fac=function(p){return new(p||P)},P.\u0275cmp=y.\u0275\u0275defineComponent({type:P,selectors:[["formatting-pane-lazy"]],inputs:{formattingSources:"formattingSources",indicatorEnabled:"indicatorEnabled",mobileFormatting:"mobileFormatting",disabledCards:"disabledCards",disabledSlices:"disabledSlices"},outputs:{propertyChanged:"propertyChanged"},decls:1,vars:10,consts:[[3,"inputArgs","modulePath","outputArgs","componentId"]],template:function(p,B){1&p&&y.\u0275\u0275element(0,"pbi-lazy-load",0),2&p&&y.\u0275\u0275property("inputArgs",y.\u0275\u0275pureFunction5(4,M,B.formattingSources,B.indicatorEnabled,B.mobileFormatting,B.disabledCards,B.disabledSlices))("modulePath",B.modulePath)("outputArgs",B.outputArgs)("componentId",B.componentId)},dependencies:[l.R],encapsulation:2,changeDetection:0}),P}()},78633:function(le,H,r){r.d(H,{a:function(){return b}});var y=r(50423),l=r(18460),M=function(I){return{colors:I}},b=function(){function P(){this.modulePath="@powerbi/ExploreUIAuthoring/lazy-modules/pane-formatting/pane-formatting.module#PaneFormattingModule",this.componentId="GradientBarComponentId"}return P.\u0275fac=function(p){return new(p||P)},P.\u0275cmp=y.\u0275\u0275defineComponent({type:P,selectors:[["gradient-bar-lazy"]],inputs:{colors:"colors"},decls:1,vars:5,consts:[[3,"inputArgs","modulePath","componentId"]],template:function(p,B){1&p&&y.\u0275\u0275element(0,"pbi-lazy-load",0),2&p&&y.\u0275\u0275property("inputArgs",y.\u0275\u0275pureFunction1(3,M,B.colors))("modulePath",B.modulePath)("componentId",B.componentId)},dependencies:[l.R],encapsulation:2,changeDetection:0}),P}()},71707:function(le,H,r){r.d(H,{I:function(){return b}});var y=r(50423),l=r(18460),M=function(I,p,B,W,w){return{toggle:I,ariaLabelledby:p,ariaDescribedby:B,toggleLabel:W,isDisabled:w}},b=function(){function P(){var I=this;this.onToggleChange=new y.EventEmitter,this.modulePath="@powerbi/ExploreUIAuthoring/lazy-modules/pane-formatting/pane-formatting.module#PaneFormattingModule",this.componentId="ToggleSwitchModernComponentId",this.outputArgs={onToggleChange:function(B){return I.onToggleChange.emit(B)}}}return P.\u0275fac=function(p){return new(p||P)},P.\u0275cmp=y.\u0275\u0275defineComponent({type:P,selectors:[["toggle-switch-modern-lazy"]],inputs:{toggle:"toggle",ariaLabelledby:"ariaLabelledby",ariaDescribedby:"ariaDescribedby",toggleLabel:"toggleLabel",isDisabled:"isDisabled"},outputs:{onToggleChange:"onToggleChange"},decls:1,vars:10,consts:[[3,"inputArgs","modulePath","outputArgs","componentId"]],template:function(p,B){1&p&&y.\u0275\u0275element(0,"pbi-lazy-load",0),2&p&&y.\u0275\u0275property("inputArgs",y.\u0275\u0275pureFunction5(4,M,B.toggle,B.ariaLabelledby,B.ariaDescribedby,B.toggleLabel,B.isDisabled))("modulePath",B.modulePath)("outputArgs",B.outputArgs)("componentId",B.componentId)},dependencies:[l.R],encapsulation:2,changeDetection:0}),P}()},90094:function(le,H,r){r.d(H,{l:function(){return b}});var y=r(50423),l=r(18460),M=function(I){return{warningMessage:I}},b=function(){function P(){this.modulePath="@powerbi/ExploreUIAuthoring/lazy-modules/pane-formatting/pane-formatting.module#PaneFormattingModule",this.componentId="WarningComponentId"}return P.\u0275fac=function(p){return new(p||P)},P.\u0275cmp=y.\u0275\u0275defineComponent({type:P,selectors:[["warning-eager"]],inputs:{warningMessage:"warningMessage"},decls:1,vars:5,consts:[[3,"inputArgs","modulePath","componentId"]],template:function(p,B){1&p&&y.\u0275\u0275element(0,"pbi-lazy-load",0),2&p&&y.\u0275\u0275property("inputArgs",y.\u0275\u0275pureFunction1(3,M,B.warningMessage))("modulePath",B.modulePath)("componentId",B.componentId)},dependencies:[l.R],encapsulation:2,changeDetection:0}),P}()},42101:function(le,H,r){r.d(H,{p:function(){return C}});var y=r(9844),I=(r(32441),r(78633),r(71707),r(90094),r(77476)),p=r(9398),B=r(76072),W=r(82156),w=r(50423),A={loadChildren:function(){return Promise.all([r.e(5),r.e("pane-formatting")]).then(r.bind(r,53150)).then(function(h){return h.PaneFormattingModule})}};B.E.addLazyLoadForLegacyMapping("@powerbi/ExploreUIAuthoring/lazy-modules/pane-formatting/pane-formatting.module#PaneFormattingModule",A.loadChildren);var D=[{path:"dummy-pane-formatting-lazy",loadChildren:A.loadChildren}],C=function(){function v(){}return v.\u0275fac=function(x){return new(x||v)},v.\u0275mod=w.\u0275\u0275defineNgModule({type:v}),v.\u0275inj=w.\u0275\u0275defineInjector({imports:[I.CommonModule,y.j,W.N,p.Bz.forChild(D)]}),v}()},48311:function(le,H,r){r.r(H),r.d(H,{ConditionalFormattingDialogModule:function(){return Li}});var y=r(81337),l=r(42101),b=r(74082),P=function(){function o(n,t){this.options=n,this.featureSwitchService=t,this.ruleTemplateKind=n.ruleTemplateKind}return Object.defineProperty(o.prototype,"propertyType",{get:function(){return this.options.propertyType},enumerable:!1,configurable:!0}),o.prototype.isValid=function(){return this.lowerBound.isValid()},o.prototype.onColorChanged=function(n){n||(n={value:this.options.defaultYieldValue}),this.value=n.value},o.prototype.onIconChanged=function(n){this.value=n,this.options.onCaseIconChanged()},o}(),I=function(){function o(){}return o.Number={kind:"Number",displayNameKey:"ConditionalFormattingDialog_Number"},o.Text={kind:"Text",displayNameKey:"Text"},o.Percent={kind:"Percent",displayNameKey:"ConditionalFormattingDialog_Percent"},o}(),B=function(){function o(n){this.localizationService=n,this.equal=this._equal,this.isBlank=this._isBlank}return Object.defineProperty(o.prototype,"_equal",{get:function(){return{id:2,displayName:"=",disableOtherOperator:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"_isBlank",{get:function(){return{id:5,displayName:this.localizationService.get("FilterOperator_IsBlank"),disableOtherOperator:!0,disableInput:!0}},enumerable:!1,configurable:!0}),o}(),W=function(o){function n(t){var i=o.call(this,t)||this;return i.contains=i._contains,i.startsWith=i._startsWith,i.doesNotContain=i._doesNotContain,i.doesNotStartWith=i._doesNotStartWith,i.isNotBlank=i._isNotBlank,i.isEmpty=i._isEmpty,i.isNotEmpty=i._isNotEmpty,i.notEqual=i._notEqual,i.equal=i._textEqual,i.lowerBoundOptions=[i.contains,i.startsWith,i.doesNotContain,i.doesNotStartWith,i.equal,i.notEqual,i.isEmpty,i.isBlank,i.isNotEmpty,i.isNotBlank],i}return(0,y.__extends)(n,o),Object.defineProperty(n.prototype,"_textEqual",{get:function(){return{id:2,displayName:this.localizationService.get("FilterOperator_Is"),disableOtherOperator:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_doesNotStartWith",{get:function(){return{id:9,displayName:this.localizationService.get("FilterOperator_DoesNotStartWith"),disableOtherOperator:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_startsWith",{get:function(){return{id:8,displayName:this.localizationService.get("FilterOperator_StartsWith"),disableOtherOperator:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_doesNotContain",{get:function(){return{id:7,displayName:this.localizationService.get("FilterOperator_DoesNotContain"),disableOtherOperator:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_contains",{get:function(){return{id:6,displayName:this.localizationService.get("FilterOperator_Contains"),disableOtherOperator:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_notEqual",{get:function(){return{id:13,displayName:this.localizationService.get("FilterOperator_IsNot"),disableOtherOperator:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_isEmpty",{get:function(){return{id:11,displayName:this.localizationService.get("FilterOperator_IsEmptyString"),disableOtherOperator:!0,disableInput:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_isNotEmpty",{get:function(){return{id:12,displayName:this.localizationService.get("FilterOperator_IsNotEmptyString"),disableOtherOperator:!0,disableInput:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_isNotBlank",{get:function(){return{id:10,displayName:this.localizationService.get("FilterOperator_IsNotBlank"),disableOtherOperator:!0,disableInput:!0}},enumerable:!1,configurable:!0}),n}(B),w=function(o){function n(t){var i=o.call(this,t)||this;return i.greaterThan=i._greaterThan,i.greaterThanOrEqual=i._greaterThanOrEqual,i.lessThan=i._lessThan,i.lessThanOrEqual=i._lessThanOrEqual,i.lowerBoundOptions=[i.greaterThan,i.greaterThanOrEqual,i.equal,i.isBlank],i.upperBoundOptions=[i._lessThan,i._lessThanOrEqual],i}return(0,y.__extends)(n,o),Object.defineProperty(n.prototype,"_greaterThan",{get:function(){return{id:0,displayName:">"}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_greaterThanOrEqual",{get:function(){return{id:1,displayName:">="}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_lessThan",{get:function(){return{id:3,displayName:"<"}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_lessThanOrEqual",{get:function(){return{id:4,displayName:"<="}},enumerable:!1,configurable:!0}),n}(B),A=r(45413),D=function(){return function(){}}(),m=r(62458),C=r(94419),v=function(o){function n(t,i,a,s){var d=o.call(this)||this;return d.part=t,d.isPercentEnabled=i,d.operatorOptions=a,d.featureSwitchService=s,d.onIsPercentEnabledChanged(i),d}return(0,y.__extends)(n,o),n.prototype.reset=function(){switch(this.part){case"LowerBound":this.operator=this.operatorOptions.greaterThanOrEqual;break;case"UpperBound":this.operator=this.operatorOptions.lessThan;break;default:m.fF.assertNever(this.part)}this.resetValue()},n.prototype.update=function(t){var a=t.right;this.operator=this.getOperatorOption(t.comparison,a),this.updateArgument(a)},n.prototype.onIsPercentEnabledChanged=function(t){this.isPercentEnabled=t,this.isPercentEnabled||(this.valueKind=I.Number)},n.prototype.updateToOpenEnded=function(){switch(this.part){case"LowerBound":return void this.reset();case"UpperBound":return this.operator=this.operatorOptions.lessThanOrEqual,void(this.isPercentEnabled?(this.value=100,this.valueKind=I.Percent):(this.value=null,this.valueKind=I.Number));default:m.fF.assertNever(this.part)}},n.prototype.isOpenEnded=function(){switch(this.part){case"LowerBound":return null===this.value&&this.valueKind===I.Number||0===this.value&&this.valueKind===I.Percent;case"UpperBound":return null===this.value&&this.valueKind===I.Number||100===this.value&&this.valueKind===I.Percent;default:m.fF.assertNever(this.part)}},n.prototype.isValid=function(){if(_.isEqual(this.operator,this.operatorOptions.isBlank))return!0;if(void 0===this.value)return!1;if(_.isEqual(this.operator,this.operatorOptions.equal)){if(null===this.value)return!1;switch(this.valueKind.kind){case"Percent":return this.value>=0&&this.value<=100;case"Number":return!0;case"Text":return!!this.featureSwitchService.featureSwitches.cfStrings;default:m.fF.assertNever(this.valueKind.kind)}}switch(this.valueKind.kind){case"Percent":if(null===this.value)return!1;switch(this.part){case"LowerBound":return this.value>=0&&this.value<100;case"UpperBound":return this.value>0&&this.value<=100;default:m.fF.assertNever(this.part)}case"Number":return!0;case"Text":return m.fF.assertFail("Text is not a valid value kind for numeric condition"),!1;default:m.fF.assertNever(this.valueKind.kind)}},n.prototype.getDefinition=function(t){var i=this;return m.fF.assert(function(){return i.isValid()},"getDefinition called for an invalid Condition"),_.isEqual(this.operator,this.operatorOptions.isBlank)?(0,C.qu)(0,t,(0,C.IF)()):!this.isOpenEnded()||this.operator.disableOtherOperator?(0,C.qu)(this.getComparisonKind(),t,this.getArgumentExpr(t)):void 0},n.prototype.resetValue=function(){switch(this.part){case"LowerBound":return void(this.isPercentEnabled?(this.value=0,this.valueKind=I.Percent):(this.value=null,this.valueKind=I.Number));case"UpperBound":return this.value=0,void(this.valueKind=I.Number);default:m.fF.assertNever(this.part)}},n.prototype.getOperatorOption=function(t,i){var a=this;switch(t){case 1:return m.fF.assert(function(){return"LowerBound"===a.part},"Unexpected condition"),this.operatorOptions.greaterThan;case 2:return m.fF.assert(function(){return"LowerBound"===a.part},"Unexpected condition"),this.operatorOptions.greaterThanOrEqual;case 0:return m.fF.assert(function(){return"LowerBound"===a.part},"Unexpected condition"),(0,A.fS)(i,(0,C.IF)())?this.operatorOptions.isBlank:this.operatorOptions.equal;case 3:return m.fF.assert(function(){return"UpperBound"===a.part},"Unexpected condition"),this.operatorOptions.lessThan;case 4:return m.fF.assert(function(){return"UpperBound"===a.part},"Unexpected condition"),this.operatorOptions.lessThanOrEqual;default:m.fF.assertNever(t)}},n.prototype.getComparisonKind=function(){switch(this.operator.id){case 5:case 2:return 0;case 0:return 1;case 1:return 2;case 3:return 3;case 4:return 4;case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:m.fF.assertFail("Unexpected operator");break;default:m.fF.assertNever(this.operator.id)}},n.prototype.updateArgument=function(t){if(_.isEqual(this.operator,this.operatorOptions.isBlank))this.resetValue();else{if((0,b.S9)(t))return this.value=C.jz.getNumericValue(t),void(this.valueKind=I.Number);if((0,b.YF)(t)){var i=t.decomposeOverRangePattern();if(i)return this.value=100*i.percent,this.value=parseFloat(this.value.toFixed(4)),void(this.valueKind=I.Percent)}m.fF.assertFail("numericConditionviewmode - updateArgument - Unrecognized comparison argument pattern")}},n.prototype.getArgumentExpr=function(t){switch(this.valueKind.kind){case"Number":return(0,C.tx)(this.value);case"Percent":return C.LE.overRangeOf(t,this.value/100);case"Text":m.fF.assertFail("Text argument is not supported");break;default:m.fF.assertNever(this.valueKind.kind)}},n}(D),h=function(o){function n(t,i,a){var s=o.call(this,t,i)||this;s.argumentKindOptions=[I.Number,I.Percent];var d=s.options,f=d.sqCase,O=d.disableAutoRange;return s.operatorOptions=new w(a),m.fF.assertAnyValue(f,"if sqCase is undefined, create a default Case (If value >= 0% AND < 0 THEN <Yield>)"),m.fF.assert(function(){return s.operatorOptions instanceof w},"operatorOptions should be NumericConditionalOperatorOptions"),s.isPercentEnabled=!O,s.lowerBound=new v("LowerBound",s.isPercentEnabled,s.operatorOptions,i),s.upperBound=new v("UpperBound",s.isPercentEnabled,s.operatorOptions,i),s.onIsPercentEnabledChanged(s.isPercentEnabled),s.initCase(f),s}return(0,y.__extends)(n,o),n.prototype.isValid=function(){if(!o.prototype.isValid.call(this))return!1;if(this.lowerBound.operator.disableOtherOperator)return!0;if(!this.upperBound.isValid())return!1;var t=!this.lowerBound.isOpenEnded(),i=!this.upperBound.isOpenEnded();return!t&&!i||!t||!i||this.lowerBound.valueKind!==this.upperBound.valueKind||this.upperBound.value>this.lowerBound.value},n.prototype.getDefinition=function(t){var i=this;m.fF.assert(function(){return i.isValid()},"Invalid case settings");var s=this.lowerBound.getDefinition(t),d=this.lowerBound.operator.disableOtherOperator?null:this.upperBound.getDefinition(t);return{condition:s||d?s&&d?(0,C.xD)(s,d):s||d:(0,C.O7)(!0),value:null==this.value?(0,C.IF)():(0,C.fL)(this.value)}},n.prototype.onIsPercentEnabledChanged=function(t){m.fF.assertValue(this.lowerBound,"lowerBound must be defined"),m.fF.assertValue(this.upperBound,"upperBound must be defined"),this.isPercentEnabled=t,this.lowerBound.onIsPercentEnabledChanged(this.isPercentEnabled),this.upperBound.onIsPercentEnabledChanged(this.isPercentEnabled)},n.prototype.initCase=function(t){if(!t)return this.lowerBound.reset(),this.upperBound.reset(),void(this.value=this.options.defaultYieldValue);(0,b.AW)(t.value)?this.value=C.jz.getTextValue(t.value):(0,b.uR)(t.value)?this.value=null:m.fF.assertFail("Unexpected Case yield value type");var i=t.condition;if((0,b.un)(i)){var a=i.left,s=i.right;(0,b.$Q)(a)&&(0,b.$Q)(s)?(this.lowerBound.update(a),this.upperBound.update(s)):m.fF.assertFail("Unexpected AND expr")}else if((0,b.IS)(i))this.lowerBound.reset(),this.upperBound.reset();else if((0,b.VC)(i)&&!0===i.value)this.lowerBound.updateToOpenEnded(),this.upperBound.updateToOpenEnded();else if((0,b.$Q)(i)){var d=i.comparison;switch(d){case 0:return this.lowerBound.update(i),void this.upperBound.reset();case 1:case 2:return this.lowerBound.update(i),void this.upperBound.updateToOpenEnded();case 3:case 4:return this.lowerBound.updateToOpenEnded(),void this.upperBound.update(i);default:m.fF.assertFail("Unexpected QueryComparisonKind: "+d)}}else m.fF.assertFail("Unexpected Case")},n}(P),x=r(48676),z=function(o){function n(t,i){var a=o.call(this)||this;return a.part=t,a.operatorOptions=i,a}return(0,y.__extends)(n,o),n.prototype.reset=function(){this.operator=this.operatorOptions.equal,this.resetValue()},n.prototype.update=function(t){var i=(0,b.Ym)(t)?t.arg:t;if((0,b.IS)(i)||(0,b.f8)(i)||(0,b.$Q)(i)){var a=i.right;return this.operator=this.getOperatorOption(t),void this.updateArgument(a)}m.fF.assertFail("TextConditionViewMode - update - Unexpected condition expression")},n.prototype.isValid=function(){return this.valueKind!==I.Text?(m.fF.assertFail("TextConditionViewMode - isValid - Unexpected valueKind"),!1):!!(_.isEqual(this.operator,this.operatorOptions.isBlank)||_.isEqual(this.operator,this.operatorOptions.isNotBlank)||_.isEqual(this.operator,this.operatorOptions.isEmpty)||_.isEqual(this.operator,this.operatorOptions.isNotEmpty))||void 0!==this.value&&(_.isEqual(this.operator,this.operatorOptions.equal)||_.isEqual(this.operator,this.operatorOptions.notEqual)?null!==this.value:!_.isEmpty(this.value))},n.prototype.getDefinition=function(t){var a,i=this;m.fF.assert(function(){return i.isValid()},"TextConditionViewMode - getDefinition called for an invalid Condition");var s=null!==(a=t.getAnnotations())&&void 0!==a?a:{},d=this.operator;s[x.L]=1,s[x.Q]=d.id;var f=function(){return(0,C.qu)(0,t,(0,C.fL)(i.value),s)},O=function(){return(0,C.qu)(0,t,(0,C.IF)(),s)},E=function(){return(0,C.qu)(0,t,(0,C.$t)(),s)},S=function(){return(0,C.Ny)(t,(0,C.fL)(i.value),s)},K=function(){return(0,C.r3)(t,(0,C.fL)(i.value),s)};switch(d.id){case this.operatorOptions.isBlank.id:return O();case this.operatorOptions.isNotBlank.id:return(0,C.ff)(O());case this.operatorOptions.isEmpty.id:return E();case this.operatorOptions.isNotEmpty.id:return(0,C.ff)(E());case this.operatorOptions.contains.id:return K();case this.operatorOptions.doesNotContain.id:return(0,C.ff)(K());case this.operatorOptions.startsWith.id:return S();case this.operatorOptions.doesNotStartWith.id:return(0,C.ff)(S());case this.operatorOptions.equal.id:return f();case this.operatorOptions.notEqual.id:return(0,C.ff)(f());default:m.fF.assertFail("TextConditionViewMode - getDefinition - Unexpected operator: ConditionalOperatorOptionId ".concat(this.operator.id))}},n.prototype.getOperatorOption=function(t){var i=this;m.fF.assert(function(){return"LowerBound"===i.part},"TextConditionViewMode - getOperatorOption - Unexpected condition");var a=(0,b.Ym)(t),s=a?t.arg:t;if((0,b.$Q)(s)){if(0===s.comparison){var f=s.getAnnotations();if(null!=f)switch(f[x.Q]){case this.operatorOptions.isNotBlank.id:return this.operatorOptions.isNotBlank;case this.operatorOptions.isBlank.id:return this.operatorOptions.isBlank;case this.operatorOptions.isEmpty.id:return this.operatorOptions.isEmpty;case this.operatorOptions.isNotEmpty.id:return this.operatorOptions.isNotEmpty}return a?this.operatorOptions.notEqual:this.operatorOptions.equal}}else{if((0,b.IS)(s))return a?this.operatorOptions.doesNotContain:this.operatorOptions.contains;if((0,b.f8)(s))return a?this.operatorOptions.doesNotStartWith:this.operatorOptions.startsWith}m.fF.assertFail("TextConditionViewMode - getOperatorOption - Unexpected argument expression")},n.prototype.updateArgument=function(t){if(!_.isEqual(this.operator,this.operatorOptions.isEmpty)&&!_.isEqual(this.operator,this.operatorOptions.isNotEmpty))return _.isEqual(this.operator,this.operatorOptions.isBlank)||_.isEqual(this.operator,this.operatorOptions.isNotBlank)?(this.value=null,void(this.valueKind=I.Text)):(0,b.AW)(t)?(this.value=C.jz.getTextValue(t),void(this.valueKind=I.Text)):void m.fF.assertFail("TextConditionViewMode - updateArgument - Unexpected argument expression");this.resetValue()},n.prototype.resetValue=function(){this.value="",this.valueKind=I.Text},n}(D),Z=function(o){function n(t,i,a){var s=o.call(this,t,i)||this,d=s.options.sqCase;return s.operatorOptions=new W(a),s.lowerBound=new z("LowerBound",s.operatorOptions),s.initCase(d),s}return(0,y.__extends)(n,o),n.prototype.getDefinition=function(t){var i=this;return m.fF.assert(function(){return i.isValid()},"TextCaseViewModel - getDefinition - Invalid case settings"),{condition:this.lowerBound.getDefinition(t)||(0,C.O7)(!0),value:null==this.value?(0,C.IF)():(0,C.fL)(this.value)}},n.prototype.initCase=function(t){if(!t)return this.lowerBound.reset(),void(this.value=this.options.defaultYieldValue);(0,b.AW)(t.value)?this.value=C.jz.getTextValue(t.value):(0,b.uR)(t.value)?this.value=null:m.fF.assertFail("Unexpected Case yield value type");var d,i=t.condition;(0,b.IS)(d=i)||(0,b.f8)(d)||(0,b.$Q)(d)||(0,b.Ym)(d)?this.lowerBound.update(i):(0,b.VC)(i)&&!0===i.value?this.lowerBound.reset():m.fF.assertFail("TextCaseViewModel - initCase - Unexpected Case condition type")},n}(P),J=function(){function o(n,t){this.featureSwitchService=n,this.localizationService=t}return o.prototype.create=function(n){switch(n.ruleTemplateKind){case"number":return new h(n,this.featureSwitchService,this.localizationService);case"text":return new Z(n,this.featureSwitchService,this.localizationService);default:m.fF.assertNever(n.ruleTemplateKind)}},o}(),U=r(84631),k=r(50550),Ce=function(){function o(n,t,i,a,s,d,f,O){var E=this;switch(this.disableAutoRange=n,this.propertyType=t,this.defaultYieldValue=i,this.iconSets=s,this.caseTypeStore=new Map,m.fF.assertValue(a,"ConditionalViewModel - expr"),m.fF.assertValue(f,"ConditionalViewModel - ruleTemplateKind"),m.fF.assertNonEmpty(a.cases,"ConditionalViewModel - expr"),this.caseViewModelBuilder=new J(O,d),this.ruleTemplateKind=f,t){case"Color":this.reverseButtonLabelKey="ConditionalFormattingDialog_RuleBased_RulesReverseValues_Color";break;case"Icon":this.reverseButtonLabelKey="ConditionalFormattingDialog_RuleBased_RulesReverseValues_Icon";break;case"Text":case"WebUrl":case"DataBars":m.fF.assertFail("Rules support only Icons and Colors");break;case"Numeric":case"DateTime":break;default:m.fF.assertNever(t)}this.cases=_.chain(a.cases).reverse().map(function(S){return E.caseViewModelBuilder.create(E.getCurrentCaseViewModelOptions(S))}).value(),this.updateSelectedIconSet()}return o.prototype.onDisableAutoRangeChanged=function(n){if(this.disableAutoRange=n,!_.isEmpty(this.cases))for(var t=0,i=this.cases;t<i.length;t++){var a=i[t];a instanceof h?a.onIsPercentEnabledChanged(!n):m.fF.assertFail("ConditionalViewModel - onDisableAutoRangeChanged - caseViewModel is not NumericCaseViewModel")}},o.prototype.reinitializeSQConditionalExpr=function(n){m.fF.assertValue(n,"ConditionalViewModel - reinitializeSQConditionalExpr - newRuleTemplateKind");var t=this.cases;this.cases=[],this.caseTypeStore.set(this.ruleTemplateKind,t),this.ruleTemplateKind=n,this.cases=this.caseTypeStore.get(this.ruleTemplateKind)||[],0===this.cases.length&&this.addCase(),this.updateSelectedIconSet()},o.prototype.getCurrentCaseViewModelOptions=function(n){var t=this;return void 0===n&&(n=void 0),{disableAutoRange:this.disableAutoRange,propertyType:this.propertyType,defaultYieldValue:this.defaultYieldValue,onCaseIconChanged:function(){return t.updateSelectedIconSet()},sqCase:n,ruleTemplateKind:this.ruleTemplateKind}},o.prototype.addCase=function(){this.cases.push(this.caseViewModelBuilder.create(this.getCurrentCaseViewModelOptions()))},o.prototype.reverseCasesValue=function(){for(var n=this.cases.length,t=0;t<n/2;t++){var i=this.cases[t].value;this.cases[t].value=this.cases[n-t-1].value,this.cases[n-t-1].value=i}this.updateSelectedIconSet()},o.prototype.moveCaseUp=function(n){_.size(this.cases)>1&&n>0&&n<this.cases.length&&((0,k.LF)(this.cases,n,n-1),this.updateSelectedIconSet())},o.prototype.moveCaseDown=function(n){_.size(this.cases)>1&&n>=0&&n<this.cases.length-1&&((0,k.LF)(this.cases,n,n+1),this.updateSelectedIconSet())},o.prototype.deleteCase=function(n){_.size(this.cases)>1&&n>=0&&n<this.cases.length&&(this.cases.splice(n,1),this.updateSelectedIconSet())},o.prototype.onIconSetSelected=function(n,t){var i=this;(0,k.ZH)(this.cases);var a=this.createIconCases(n,this.iconSets[t]);this.cases=a.map(function(s){return i.caseViewModelBuilder.create(i.getCurrentCaseViewModelOptions(s))}),this.iconSetId=t},o.prototype.isValid=function(){return!_.isEmpty(this.cases)&&_.every(this.cases,function(n){return n.isValid()})},o.prototype.getDefinition=function(n){var t=this;return m.fF.assert(function(){return t.isValid()},"Invalid conditional settings"),(0,C.u7)(_.chain(this.cases).clone().reverse().map(function(i){return i.getDefinition(n)}).value())},o.prototype.createIconCases=function(n,t){var i=this,a=t.iconIds.length,s=[];switch(this.ruleTemplateKind){case"number":!function(){for(var E=i.disableAutoRange?U.MM:U.CZ,S=0;S<a;S++)s.push(E(n,Math.round(S/a*100),Math.round((S+1)/a*100),S+1===a,(0,C.fL)(t.iconIds[S])))}();break;case"text":!function(){for(var E=U._1,S=0;S<a;S++)s.push(E(n,(0,C.fL)(t.iconIds[S])))}();break;default:m.fF.assertNever(this.ruleTemplateKind)}return s},o.prototype.updateSelectedIconSet=function(){if("Icon"===this.propertyType&&(this.iconSetId&&(this.iconSetMatching(this.iconSets[this.iconSetId])||(this.iconSetId=void 0)),!this.iconSetId))for(var n in this.iconSets)if(this.iconSetMatching(this.iconSets[n]))return void(this.iconSetId=n)},o.prototype.iconSetMatching=function(n){if(n.iconIds.length!==this.cases.length)return!1;for(var t=0;t<this.cases.length;t++)if(this.cases[t].value!==n.iconIds[t])return!1;return!0},o}(),re=r(26902),ce=r(87632),ue=function(){function o(n,t,i,a){var s=this;this.localizationService=n,this.disableAutoRange=t,this.valueType=i,this.onOptionChanged=function(f){var O=f.id;switch(O){case 0:case 3:break;case 1:s.settings.minValue=void 0;break;case 2:s.settings.maxValue=void 0;break;default:m.fF.assertNever(O)}},this.tooltipConfig={tooltipDelay:100,tooltipLocalizeTitle:"Enter_A_Value",isTooltipForModalDialog:!0,tooltipArrowPosition:ce.xI.arrowTopLeft,tooltipShowOnFocus:!0},this.tooltipConfigDisabled={tooltipDisable:!0};var d={id:0,value:this.localizationService.get("Custom"),disableInput:!1};this.minimumSelectOptions=[{id:1,value:this.localizationService.get("ConditionalFormattingDialog_LowestValue"),disableInput:!0},d],this.maximumSelectOptions=[{id:2,value:this.localizationService.get("ConditionalFormattingDialog_HighestValue"),disableInput:!0},d],this.barDirectionSelectOptions=[{reverseDirection:!1,displayName:this.localizationService.get("LeftToRight")},{reverseDirection:!0,displayName:this.localizationService.get("RightToLeft")}],this.updateDataBarsPositiveColor=function(f){s.settings.positiveColor=s.getFillFromColor(f)},this.updateDataBarsNegativeColor=function(f){s.settings.negativeColor=s.getFillFromColor(f)},this.updateDataBarsAxisColor=function(f){s.settings.axisColor=s.getFillFromColor(f)},this.settings=a?(0,re.L6)(a):this.getDefaultDataBarsSettings(),this.minimumSelectedOption=this.minimumSelectOptions[void 0!==this.settings.minValue||this.disableAutoRange?1:0],this.maximumSelectedOption=this.maximumSelectOptions[void 0!==this.settings.maxValue||this.disableAutoRange?1:0],this.barDirectionSelectedOption=this.barDirectionSelectOptions[this.settings.reverseDirection?1:0]}return o.prototype.getDefaultDataBarsSettings=function(){return{reverseDirection:!1,hideText:!1}},o.prototype.getFillFromColor=function(n){return{solid:{color:null==n?null:n.value}}},o.prototype.onDisableAutoRangeChanged=function(n){this.disableAutoRange=n,this.disableAutoRange?(this.minimumSelectedOption=this.minimumSelectOptions[1],this.maximumSelectedOption=this.maximumSelectOptions[1]):(this.minimumSelectedOption=this.minimumSelectOptions[0],this.maximumSelectedOption=this.maximumSelectOptions[0])},o.prototype.getDefinition=function(n,t,i){if(t.type.dataBars)return(0,re.ac)((0,y.__assign)((0,y.__assign)({},this.settings),{totalMatchingOption:i}),this.valueType);m.fF.assertFail("Unsupported property type, expected dataBars, received ".concat(JSON.stringify(t.type)))},o}(),Se=function(){function o(){}return o.prototype.getDefinition=function(n,t){switch(t){case"Color":return{solid:{color:n}};case"Icon":return{kind:"Icon",value:n};case"Text":case"WebUrl":case"Numeric":case"DateTime":return n;case"DataBars":return m.fF.assertFail("Data bars not supported for field value"),null;default:m.fF.assertNever(t)}m.fF.assertFail("Unsupported property type - expected color, icon, text, url, numeric, dateTime; received ".concat(t))},o}(),q=r(52083),ne=r(4829),De=function(){function o(n,t,i,a){var s=this;this.localizationService=n,this.disableAutoRange=t,this.defaultGradientColors=i,this.onOptionChanged=function(f){var O=f.id;switch(O){case 0:break;case 1:s.settings.minValue=void 0;break;case 3:s.settings.midValue=void 0;break;case 2:s.settings.maxValue=void 0;break;default:m.fF.assertNever(O)}},this.onDivergingChanged=function(){s.updateGradientBar()},this.tooltipConfig={tooltipDelay:100,tooltipLocalizeTitle:"Enter_A_Value",isTooltipForModalDialog:!0,tooltipArrowPosition:ce.xI.arrowTopLeft,tooltipShowOnFocus:!0},this.tooltipConfigDisabled={tooltipDisable:!0};var d={id:0,value:this.localizationService.get("Custom"),disableInput:!1};switch(this.nullStrategyOptions=[{id:0,value:this.localizationService.get("ConditionalFormattingDialog_FormatNull_NoFormat"),disableInput:!0,stringValue:ne.TJ},{id:1,value:this.localizationService.get("ConditionalFormattingDialog_FormatNull_AsZero"),disableInput:!0,stringValue:ne.LX},{id:2,value:this.localizationService.get("ConditionalFormattingDialog_FormatNull_SpecificColor"),disableInput:!1,stringValue:ne.Sx}],this.updateNullStrategy=function(){s.settings.nullStrategy=s.nullStrategyOption.stringValue},this.updateGradientNullColor=function(f){s.settings.nullColor=f&&f.value},this.minimumSelectOptions=[{id:1,value:this.localizationService.get("ConditionalFormattingDialog_LowestValue"),disableInput:!0},d],this.updateGradientMinColor=function(f){s.settings.minColor=f&&f.value,s.updateGradientBar()},this.centerSelectOptions=[{id:3,value:this.localizationService.get("ConditionalFormattingDialog_MiddleValue"),disableInput:!0},d],this.updateGradientMidColor=function(f){s.settings.midColor=f&&f.value,s.updateGradientBar()},this.maximumSelectOptions=[{id:2,value:this.localizationService.get("ConditionalFormattingDialog_HighestValue"),disableInput:!0},d],this.updateGradientMaxColor=function(f){s.settings.maxColor=f&&f.value,s.updateGradientBar()},this.settings=a?(0,q.qG)(a.rule):(0,q.d9)(),this.minimumSelectedOption=this.minimumSelectOptions[void 0!==this.settings.minValue||this.disableAutoRange?1:0],this.centerSelectedOption=this.centerSelectOptions[void 0!==this.settings.midValue||this.disableAutoRange?1:0],this.maximumSelectedOption=this.maximumSelectOptions[void 0!==this.settings.maxValue||this.disableAutoRange?1:0],this.settings.nullStrategy){case ne.TJ:this.nullStrategyOption=this.nullStrategyOptions[0];break;case ne.Sx:this.nullStrategyOption=this.nullStrategyOptions[2];break;default:this.nullStrategyOption=this.nullStrategyOptions[1]}this.updateGradientBar()}return o.prototype.onDisableAutoRangeChanged=function(n){this.disableAutoRange=n,this.disableAutoRange?(this.minimumSelectedOption=this.minimumSelectOptions[1],this.centerSelectedOption=this.centerSelectOptions[1],this.maximumSelectedOption=this.maximumSelectOptions[1]):(this.minimumSelectedOption=this.minimumSelectOptions[0],this.centerSelectedOption=this.centerSelectOptions[0],this.maximumSelectedOption=this.maximumSelectOptions[0])},o.prototype.toggleDiverging=function(){this.settings.diverging=!this.settings.diverging,this.onDivergingChanged()},o.prototype.updateGradientBar=function(){this.gradientBarValue=(0,q.Kj)(this.settings,this.defaultGradientColors)},o.prototype.getDefinition=function(n,t){var i=t.type;if(i.fill&&i.fill.solid&&i.fill.solid.color)return{solid:{color:(0,U.xK)(n,this.settings)}};m.fF.assertFail("Unsupported property type, expected color, received ".concat(JSON.stringify(t.type)))},o}(),Te=r(7956),Fe=r(95862),me=r(88268),N=r(9754),X=r(68509),j=r(45334),G=r(80777),ae=function(){function o(n,t,i,a,s){var d=this;this.services=n,this.dataSources=t,this.sourceField=i,this.visualCapabilities=a,this.expectedTypes=s,this.isSourceDisabled=function(f){if(!f)return!1;var O=f.getMetadata(d.schema);if(!O)return!1;switch(O.kind){case 1:return!G.Ge.isCompatibleTo(O.type,d.expectedTypes);case 0:return _.isEmpty(d.getSupportedAggregates(f));default:m.fF.assertFail("Unexpected FieldKind value "+O.kind)}},this.onSourceSelected=function(f,O){d.setSourceField(O)}}return o.prototype.init=function(){return(0,y.__awaiter)(this,void 0,void 0,function(){var n,t,i,a;return(0,y.__generator)(this,function(s){switch(s.label){case 0:return n=this.services.dataSourceSerializer.deserializeDataSources(this.dataSources),this.services.dataSourcesService.set(n),t=this,[4,this.services.conceptualSchemaProxy.get(n)];case 1:return t.schema=s.sent(),(i=this.sourceField)&&(i=(0,N.H)(i),i=(0,me.E)(i),(0,b.iV)(i)&&(a=i.func,i=this.sourceField=(0,X.n)(i,this.schema))),this.setSourceField(i,a),[2]}})})},o.prototype.onSourceExpectedTypeChange=function(n){this.expectedTypes=n,this.setSourceField(this.sourceField)},o.prototype.setSourceField=function(n,t){if(this.sourceField=n,this.updateSourceAggregateOptions(),_.isEmpty(this.aggregationOptions)){if(this.sourceField){var a=this.sourceField.getMetadata(this.schema);a&&1===a.kind&&!(0,b.jX)(this.sourceField)&&G.Ge.isCompatibleTo(a.type,this.expectedTypes)?(this.aggregationOption=null,this.setSourceAggregate()):(this.sourceField=void 0,this.fieldDisplayName=void 0)}}else{if(this.aggregationOption=_.find(this.aggregationOptions,function(s){return s.aggregate===t}),!this.aggregationOption){var i=this.services.aggrOps.defaultAggregate(n,this.schema,!0,this.expectedTypes);this.aggregationOption=_.find(this.aggregationOptions,function(s){return s.aggregate===i}),this.aggregationOption||(this.aggregationOption=_.head(this.aggregationOptions))}this.setSourceAggregate()}},o.prototype.updateSourceAggregateOptions=function(){for(var n=this.getSupportedAggregates(this.sourceField),t=this.aggregationOptions=[],i=0,a=n;i<a.length;i++){var s=a[i],d=(0,X.n)(this.sourceField,this.schema).getMetadata(this.schema),f=(0,Te.z)(s,d);t.push({aggregate:s,displayName:this.services.localizationService.get("Aggregate_"+f)})}},o.prototype.getSupportedAggregates=function(n){return!n||j.m.discourageAggregation(n,this.schema)?[]:this.services.aggrOps.getSupportedAggregates(n,this.schema,this.expectedTypes)},o.prototype.setSourceAggregate=function(){this.sourceField&&(this.aggregationOption&&(this.sourceField=(0,Fe.k)(this.sourceField,this.aggregationOption.aggregate)),this.fieldDisplayName=this.services.displayNameService.getDisplayName(this.sourceField,this.schema,this.visualCapabilities,null,null,{includeDefaultAggregate:!0,includeHierarchyName:!0,includeVariationSource:!0}))},o}(),te=function(){function o(n){switch(this.id=n,this.id){case 1:this.displayNameKey="ConditionalFormattingDialog_TotalMatching_ValuesOnly",this.disableAutoRange=!1;break;case 0:this.displayNameKey="ConditionalFormattingDialog_TotalMatching_ValuesAndTotals",this.disableAutoRange=!0;break;case 2:this.displayNameKey="ConditionalFormattingDialog_TotalMatching_TotalsOnly",this.disableAutoRange=!0}}return o.prototype.changeSelector=function(n){var t={data:[{dataViewWildcard:{matchingOption:this.id}}]};return n.id&&(t.id=n.id),n.metadata&&(t.metadata=n.metadata),t},o}(),pe=r(77616),je=r(54766),Ke=r(54834),Be=r(58702),e=r(50423),Ue=r(28199),at=r(26898),He=r(83008),We=r(13702),Ge=r(40823),$e=r(9380),Ee=r(65181),Pe=r(29866),Qe=function(){function o(n,t,i,a,s,d,f,O){this.aggrOps=n,this.conceptualSchemaProxy=t,this.dataSourcesService=i,this.displayNameService=a,this.featureSwitchService=s,this.localizationService=d,this.visualPlugin=f,this.dataSourceSerializer=O,this.modeInitialized=!1}return o.prototype.create=function(n,t,i,a,s,d,f,O,E,S,K){return(0,y.__awaiter)(this,void 0,void 0,function(){var L,ee,be,Oe,we,Me,T,ve,xe;return(0,y.__generator)(this,function(de){switch(de.label){case 0:return L=(0,pe.mc)(O),ee=d?Ke.ib.deserializeExpr(d):null,[4,this.visualPlugin.ensureBuiltInPlugins()];case 1:return de.sent(),be=this.visualPlugin.capabilities(a),Oe=this.dataSourceSerializer.deserializeDataSources(t),[4,this.conceptualSchemaProxy.get(Oe)];case 2:return we=de.sent(),Me=this.getPropertyType(L.type),T={visualCapabilities:be,propertyDescriptor:L,propertyType:Me,dialogTitle:O.displayName,subtitle:i,targetFieldExpr:ee,disableAutoRange:!f,colorPickerType:{fill:{solid:{color:!0}}},modeSelectOptions:this.createModeSelectOptions(Me,this.localizationService,this.featureSwitchService),schema:we},this.initializePropertyDefinition(T,E),K&&(ve="DataBars"===Me,m.fF.assert(function(){return ve||!_.isEmpty(S.data)&&1===S.data.length&&null!=S.data[0].dataViewWildcard},"allowOverrideTotalMatching is only supported for DataViewWildcard Selectors or static-bound dataBars"),T.totalMatchingOptions=[new te(1),new te(0),new te(2)],xe=ve?(0,re.L6)(T.originalPropertyDefinition).totalMatchingOption:S.data[0].dataViewWildcard.matchingOption,T.totalMatchingOption=_.find(T.totalMatchingOptions,function(zt){return zt.id===xe}),this.updateDisableAutoRange(T,f)),this.initializeExpectedSourceType(T),this.initializeSourceFieldSelector(T,t),[4,T.sourceSelector.init()];case 3:return de.sent(),this.initializeMode(T,T.originalPropertyDefinition,n,s,this.localizationService,this.featureSwitchService),[2,T]}})})},o.prototype.updateDisableAutoRange=function(n,t){n.disableAutoRange=!t||n.totalMatchingOption.disableAutoRange},o.prototype.initializeExpectedSourceType=function(n){switch(m.fF.assertValue(n.mode,"mode required to be assigned to the view model before source type(s) can be initialized"),n.mode){case"gradient":case"dataBars":n.expectedSourceTypes=[{numeric:!0}];break;case"conditional":n.expectedSourceTypes=this.featureSwitchService.featureSwitches.cfStrings?[{numeric:!0},{text:!0}]:[{numeric:!0}];break;case"fieldValue":switch(n.propertyType){case"Numeric":n.expectedSourceTypes=[{numeric:!0}];break;case"DateTime":n.expectedSourceTypes=[{dateTime:!0}];break;default:n.expectedSourceTypes=[{text:!0}]}break;default:m.fF.assertNever(n.mode)}},o.prototype.initializeSourceFieldSelector=function(n,t){m.fF.assertValue(n.expectedSourceTypes,"expectedSourceTypes required to initialize source field selector"),n.sourceSelector=new ae({aggrOps:this.aggrOps,conceptualSchemaProxy:this.conceptualSchemaProxy,dataSourcesService:this.dataSourcesService,displayNameService:this.displayNameService,featureSwitchService:this.featureSwitchService,localizationService:this.localizationService,dataSourceSerializer:this.dataSourceSerializer},t,n.originalSourceField,n.visualCapabilities,n.expectedSourceTypes)},o.prototype.getPropertyType=function(n){if(n.fill&&n.fill.solid&&n.fill.solid.color)return"Color";if(n.icon)return"Icon";if(n.dataBars)return"DataBars";var i=G.Ge.fromDescriptor(n);return i.text?i.misc&&i.misc.webUrl?"WebUrl":"Text":i.numeric?"Numeric":i.dateTime?"DateTime":void m.fF.assertFail("Unexpected property type")},o.prototype.createModeSelectOptions=function(n,t,i){var s={name:t.get("ConditionalFormattingDialogModern_Mode_ColorScale"),value:"gradient"},d={name:t.get("ConditionalFormattingDialog_RuleBased_RulesTitle"),value:"conditional"},f={name:t.get("ConditionalFormattingDialog_Mode_FieldValue"),value:"fieldValue"},O={name:t.get("Visual_ConditionalFormatting_DataBars"),value:"dataBars"};switch(n){case"Color":return[s,d,f];case"Icon":return[d,f];case"Text":case"WebUrl":case"Numeric":case"DateTime":return[f];case"DataBars":return[O];default:m.fF.assertNever(n)}return[]},o.prototype.getConditionalSourceExpr=function(n){m.fF.assertValue(n,"propDefn"),m.fF.assertNonEmpty(n.cases,"Empty conditional cases");var t=_.head(n.cases).condition;return(0,b.Ym)(t)&&(t=t.arg),(0,b.IS)(t)||(0,b.f8)(t)?t.left:((0,b.un)(t)&&(t=t.left),(0,b.$Q)(t)?t.left:void 0)},o.prototype.initializePropertyDefinition=function(n,t){var i,a;if(t){var s=(0,je.PU)(t,n.propertyDescriptor,!0);switch(n.propertyType){case"Color":var d=s;m.fF.assert(function(){return(0,Be.X2)(d)},"Expected a FillDefinition"),a=d&&d.solid&&d.solid.color;break;case"Icon":var O=s;m.fF.assert(function(){return(0,Be.r)(O)},"Expected an IconDefinition"),a=O.value,m.fF.assert(function(){return(0,b.AW)(O.layout)},"Icon layout should be constant"),m.fF.assert(function(){return(0,b.AW)(O.verticalAlignment)},"Icon Vertical alignment should be constant"),n.iconLayout=C.jz.getTextValue(O.layout),n.iconVerticalAlignment=C.jz.getTextValue(O.verticalAlignment);break;case"DataBars":return n.mode="dataBars",n.originalSourceField=n.targetFieldExpr,void(n.originalPropertyDefinition=s);case"Text":case"WebUrl":case"Numeric":case"DateTime":a=s;break;default:m.fF.assertNever(n.propertyType)}}if(a&&!(0,b.VC)(a)&&!(0,b.wt)(a)&&((0,b.Tu)(a)?(n.mode="gradient",n.originalPropertyDefinition=a,n.originalSourceField=a.input):(0,b.Gs)(a)?(n.mode="conditional",n.originalPropertyDefinition=a,n.originalSourceField=this.getConditionalSourceExpr(a)):(0,b.kb)(a)||(0,b.iV)(a)?(n.mode="fieldValue",n.originalPropertyDefinition=a,n.originalSourceField=a):m.fF.assertFail("Unsupported property value, received ".concat(a))),!n.originalPropertyDefinition){if("text"===this.determineRuleTemplateKind(n,!1,n.targetFieldExpr)&&"Color"===n.propertyType){var S=n.modeSelectOptions.find(function(K){return"conditional"===K.value});n.mode=null!==(i=S?.value)&&void 0!==i?i:n.modeSelectOptions[0].value}else n.mode=n.modeSelectOptions[0].value;n.originalPropertyDefinition=void 0,"Icon"===n.propertyType&&(n.iconLayout=n.iconLayout||U.IA,n.iconVerticalAlignment=n.iconVerticalAlignment||U.QZ)}(!n.originalSourceField||(0,b.NH)(n.originalSourceField))&&(n.originalSourceField=n.targetFieldExpr)},o.prototype.initializeMode=function(n,t,i,a,s,d){m.fF.assertAnyValue(t,"If propertyDefinition is defined, the viewModel will be initialized with it, if not, it will be initialized with default settings"),this.initializeExpectedSourceType(n);var f=n.targetFieldExpr,O=i.dataColors;switch(n.mode){case"gradient":return t||(t=(0,U.vX)(f).solid.color),n.gradient=new De(s,n.disableAutoRange,O.getGradientColors(),t),void(this.modeInitialized=!0);case"conditional":var E,S="number",K=!this.modeInitialized;switch(n.propertyType){case"Color":E=O.getGradientColors().minColor.value,S=this.determineRuleTemplateKind(n,K),t=this.determinePropertyDefinition(S,t,function(){return(0,U.yY)(f,E,S).solid.color});break;case"Icon":E=U.zB,S=this.determineRuleTemplateKind(n,K),t=this.determinePropertyDefinition(S,t,function(){return(0,U.XB)(f,S).value});break;default:m.fF.assertFail("Conditional mode supports only Color and Icon")}return n.conditional=new Ce(n.disableAutoRange,n.propertyType,E,t,a,s,S,d),void(this.modeInitialized=!0);case"dataBars":var be=n.originalSourceField.getMetadata(n.schema).type;return n.dataBars=new ue(s,n.disableAutoRange,be,t),void(this.modeInitialized=!0);case"fieldValue":n.fieldValue=new Se,this.modeInitialized=!0;break;default:m.fF.assertNever(n.mode)}},o.prototype.determinePropertyDefinition=function(n,t,i){if(null==t)return i();var a=_.every(t.cases,function(f){var O=f.condition,K=((0,b.Ym)(O)?O.arg:O).getAnnotations();return!_.isEmpty(K)&&null!=K[x.Q]});return"text"===n&&!a||"number"===n&&a?(m.fF.warn("The rule template kind does not match the existing property definition. Creating a new default property definition."),i()):t},o.prototype.retrieveSourceFieldFromViewModel=function(n){var t;return null===(t=n.sourceSelector)||void 0===t?void 0:t.sourceField},o.prototype.determineRuleTemplateKind=function(n,t,i){var a;if(void 0===t&&(t=!0),void 0===i&&(i=null),!this.featureSwitchService.featureSwitches.cfStrings||null==(i=i??this.retrieveSourceFieldFromViewModel(n)))return"number";var s=this.aggrOps.getMetadataForUnderlyingType(i,n.schema);if(t){var d=null===(a=n.sourceSelector)||void 0===a?void 0:a.aggregationOption;if(null!=d){var f=d?.aggregate,O=3===f||4===f||null==f;return s?.type.text&&O?"text":"number"}}return s?.type.text?"text":"number"},o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275inject(Ue.C),e.\u0275\u0275inject(at.i),e.\u0275\u0275inject(He.D),e.\u0275\u0275inject(We.O),e.\u0275\u0275inject($e.vZ),e.\u0275\u0275inject(Ee.o),e.\u0275\u0275inject(Pe.D),e.\u0275\u0275inject(Ge._))},o.\u0275prov=e.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac}),o}(),lt=r(85287),V=r(17174),st=r(59897),Ae=r(25740),Le=r(44529),dt=r(88315),Je=r(73221),Xe=r(98665),ct=r(83317),ut=r(59973),Ye=r(14172),Ve=r(4877),Ze=r(84144),qe=r(67489),pt=r(83309),et=r(93215),Ne=r(23983),tt=r(75096),gt=r(29524),mt=r(88023),ht=r(72525),it=r(86612),he=r(77476),ft=r(96777),vt=r(96295),Y=r(93247),Ct=function(){function o(){var n=this;this.onClick=function(t){return n.onButtonClick(t)},this.onKeydown=function(t){return n.onButtonKeydown(t)},this.onDocumentMouseDown=function(t){n.popup.contains(t.target)||n.popupButton.contains(t.target)||n.close()}}return o.prototype.subscribe=function(n,t){this.popup=n,this.popupButton=t,this.popup.style.position="fixed",this.close(),this.popupButton.addEventListener("click",this.onClick),this.popupButton.addEventListener("keydown",this.onKeydown),document.addEventListener("mousedown",this.onDocumentMouseDown,!0)},o.prototype.unsubscribe=function(){this.popupButton.removeEventListener("click",this.onClick),this.popupButton.removeEventListener("keydown",this.onKeydown),document.removeEventListener("mousedown",this.onDocumentMouseDown,!0),this.close(),this.popup=void 0,this.popupButton=void 0},o.prototype.onButtonClick=function(n){this.togglePopup()},o.prototype.onButtonKeydown=function(n){switch(n.keyCode){case Y.K5:this.open();break;case Y.hY:this.close();break;default:return}n.preventDefault(),n.stopPropagation()},o.prototype.togglePopup=function(){this.closed?this.open():this.close()},o.prototype.open=function(){this.popup.style.display="block";var i,n=this.popup.getBoundingClientRect(),t=this.popupButton.getBoundingClientRect();this.popup.style.left=t.right-n.width+"px",i=t.bottom+n.height>window.innerHeight?Math.max(t.top-n.height,0):t.bottom,this.popup.style.top=i+"px",this.closed=!1},o.prototype.close=function(){this.popup.style.display="none",this.closed=!0},o}(),yt=r(91615),nt=r(11494),ot=r(45916),rt=r(85102),bt=["button"],ze=["popup"],St=["noIcon"],_t=["icon"];function Ot(o,n){if(1&o&&e.\u0275\u0275element(0,"img",14),2&o){var t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("src",t.selectedIcon.imageUrl,e.\u0275\u0275sanitizeUrl)}}function Mt(o,n){if(1&o&&e.\u0275\u0275element(0,"pbi-svg-use-symbol",15),2&o){var t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("symbolId",t.selectedIcon.svgId)}}function xt(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",11),e.\u0275\u0275template(1,Ot,1,1,"img",12),e.\u0275\u0275template(2,Mt,1,1,"pbi-svg-use-symbol",13),e.\u0275\u0275elementEnd()),2&o){var t=e.\u0275\u0275nextContext();e.\u0275\u0275attribute("aria-label",t.getIconDescription(t.selectedIcon)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!!t.selectedIcon.url),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!!t.selectedIcon.svgId)}}function Ft(o,n){if(1&o&&e.\u0275\u0275element(0,"img",14),2&o){var t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275property("src",t.imageUrl,e.\u0275\u0275sanitizeUrl)}}function Pt(o,n){if(1&o&&e.\u0275\u0275element(0,"pbi-svg-use-symbol",15),2&o){var t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275property("symbolId",t.svgId)}}function It(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",16,17),e.\u0275\u0275listener("click",function(){var O=e.\u0275\u0275restoreView(t).$implicit,E=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(E.onIconClick(O))})("keydown",function(f){var E=e.\u0275\u0275restoreView(t).$implicit,S=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(S.onIconKeydown(f,E))}),e.\u0275\u0275template(2,Ft,1,1,"img",12),e.\u0275\u0275template(3,Pt,1,1,"pbi-svg-use-symbol",13),e.\u0275\u0275elementEnd()}if(2&o){var i=n.$implicit,a=n.index,s=e.\u0275\u0275nextContext();e.\u0275\u0275property("title",s.getIconDescription(i)),e.\u0275\u0275attribute("key",a)("tabindex",0==a?0:-1)("aria-selected",s.selectedIconId===i.id)("aria-posinset",a+1)("aria-setsize",i.length)("data-unique-id","icon-"+i.id),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!!i.url),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!!i.svgId)}}var kt=function(){function o(n,t,i){this.eventBridge=n,this.localizationService=t,this.itemPickerService=i,this.iconChanged=new e.EventEmitter,this.closed=new e.EventEmitter,this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager()}return o.prototype.ngOnInit=function(){var n=this;this.noIconLabel=this.localizationService.get("IconPicker_NoIcon"),this.subscriptionManager.subscribe(yt.kx,function(){return n.onVisualThemeChanged()}),this.updateIcons(),this.selectedIcon=this.icons.find(function(t){return t.id===n.selectedIconId})},o.prototype.ngAfterViewInit=function(){this.popupHandler=new Ct,this.popupHandler.subscribe(this.popup.nativeElement,this.headerButton.nativeElement)},o.prototype.ngOnDestroy=function(){this.popupHandler.unsubscribe(),this.subscriptionManager.unsubscribeAll()},o.prototype.onIconClick=function(n){this.selectIcon(n)},o.prototype.onIconKeydown=function(n,t){switch(n.keyCode){case Y.hY:this.popupHandler.close();break;case Y.K5:this.selectIcon(t);break;case Y.Mf:this.noIcon.nativeElement.focus();break;case Y.LH:case Y.JH:case Y.oh:case Y.SV:this.focusOnNextIcon(n.keyCode,this.icons.indexOf(t))}n.preventDefault(),n.stopPropagation()},o.prototype.onNoPickClick=function(){this.selectIcon(void 0)},o.prototype.onNoPickKeyDown=function(n){switch(n.keyCode){case Y.Mf:var t;t=n.shiftKey?this.icons.length-1:0,this.iconElementRefs.map(function(i){return i.nativeElement}).find(function(i){return i.getAttribute("key")===t.toString()}).focus();break;case Y.K5:this.selectIcon(void 0)}n.preventDefault(),n.stopPropagation()},o.prototype.getIconDescription=function(n){if(n.description){if("string"==typeof n.description)return n.description;if(n.description.resourceKey)return this.localizationService.get(n.description.resourceKey)}},o.prototype.onVisualThemeChanged=function(){this.updateIcons()},o.prototype.updateIcons=function(){var n=_.cloneDeep(this.itemPickerService.getIcons());for(var t in this.icons=[],n){var i=n[t];i.id=t,this.icons.push(i)}},o.prototype.selectIcon=function(n){this.selectedIcon=n,this.selectedIconId=n?n.id:void 0,this.popupHandler.close(),this.iconChanged.emit(this.selectedIconId)},o.prototype.focusOnNextIcon=function(n,t){var i=this.getNextIconIndex(n,t);this.focusOnIconByIndex(i)},o.prototype.focusOnIconByIndex=function(n){this.getElementFromIndex(n).focus()},o.prototype.getElementFromIndex=function(n){return this.iconElementRefs.map(function(t){return t.nativeElement}).find(function(t){return t.getAttribute("key")===n.toString()})},o.prototype.getNextIconIndex=function(n,t){var s,d,i=t%o.columnCount,a=Math.floor(t/o.columnCount);return n===Y.LH||n===Y.JH?(s=i,d=this.getNextIndex(this.getColumnItemCount(i),a,n)):(n===Y.oh||n===Y.SV)&&(s=this.getNextIndex(this.getRowItemCount(a),i,n),d=a),this.getIndexFromPosition(s,d)},o.prototype.getRowItemCount=function(n){var t=this.icons.length;return n<Math.floor(t/o.columnCount)?o.columnCount:t%o.columnCount},o.prototype.getColumnItemCount=function(n){var t=this.icons.length/o.columnCount,i=Math.floor(t);return n<(t-i)*o.columnCount-1&&i++,i},o.prototype.getNextIndex=function(n,t,i){return i===Y.SV||i===Y.JH?t=++t>=n?0:t:(i===Y.oh||i===Y.LH)&&(t=--t<0?n-1:t),t},o.prototype.getIndexFromPosition=function(n,t){return n+t*o.columnCount},o.columnCount=10,o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(nt.J),e.\u0275\u0275directiveInject(Ee.o),e.\u0275\u0275directiveInject(Ve.a))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["icon-picker"]],viewQuery:function(t,i){if(1&t&&(e.\u0275\u0275viewQuery(bt,7),e.\u0275\u0275viewQuery(ze,7),e.\u0275\u0275viewQuery(St,7),e.\u0275\u0275viewQuery(_t,5)),2&t){var a=void 0;e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(i.headerButton=a.first),e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(i.popup=a.first),e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(i.noIcon=a.first),e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(i.iconElementRefs=a)}},inputs:{selectedIconId:"selectedIconId",labelId:"labelId"},outputs:{iconChanged:"iconChanged",closed:"closed"},decls:13,vars:7,consts:[["role","button","tabindex","0",1,"popoutButton"],["button",""],["class","icon",4,"ngIf"],[1,"glyphicon","pbi-glyph-flickup","glyph-micro","dropdown-icon"],[1,"popup"],["popup",""],["role","listbox",1,"icon-container"],[1,"icon-container-scroll"],["class","icon","role","option",3,"title","click","keydown",4,"ngFor","ngForOf"],["tabindex","0",1,"noIcon",3,"click","keydown"],["noIcon",""],[1,"icon"],["role","presentation",3,"src",4,"ngIf"],["sheet","conditionalFormattingDialogIcons",3,"symbolId",4,"ngIf"],["role","presentation",3,"src"],["sheet","conditionalFormattingDialogIcons",3,"symbolId"],["role","option",1,"icon",3,"title","click","keydown"],["icon",""]],template:function(t,i){1&t&&(e.\u0275\u0275elementStart(0,"div",0,1),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275template(3,xt,3,3,"div",2),e.\u0275\u0275element(4,"i",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"div",4,5)(7,"div",6)(8,"div",7),e.\u0275\u0275template(9,It,4,9,"div",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",9,10),e.\u0275\u0275listener("click",function(){return i.onNoPickClick()})("keydown",function(s){return i.onNoPickKeyDown(s)}),e.\u0275\u0275text(12),e.\u0275\u0275elementEnd()()()),2&t&&(e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(2,5,"Icon_Picker")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!!i.selectedIcon),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",i.icons),e.\u0275\u0275advance(1),e.\u0275\u0275attribute("aria-selected",void 0===i.selectedIconId),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(i.noIconLabel))},dependencies:[he.NgForOf,he.NgIf,ot.R,rt.F],styles:["[_nghost-%COMP%]{display:flex;white-space:nowrap;-webkit-user-select:none;-ms-user-select:none;user-select:none}.popoutButton[_ngcontent-%COMP%]{display:flex;width:44px;height:28px;margin-left:4px;background-color:var(--white-color, #FFF);border:1px solid var(--fluent-theme-neutral-dark-color, #201F1E);box-sizing:border-box}.popoutButton[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{position:relative}.dropdown-icon[_ngcontent-%COMP%]{margin-left:6px;margin-top:6px}.popup[_ngcontent-%COMP%]{position:fixed;color:var(--fluent-theme-neutral-primary-alt-color, #3B3A39);background-color:var(--white-color, #FFF);box-shadow:0 4.8px 14.4px rgba(0,0,0,.11),0 25.6px 57.6px rgba(0,0,0,.13);font-size:12px;padding:5px;z-index:1}.icon-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.icon-container-scroll[_ngcontent-%COMP%]{overflow:auto;max-height:200px}.icon[_ngcontent-%COMP%]{margin-left:4px;margin-top:4px;width:16px;height:16px;float:left}.icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.noIcon[_ngcontent-%COMP%]{text-align:center}"],changeDetection:0}),o}(),wt=r(59968),Dt=r(22844),c=r(50057),u=r(78633),g=r(76492),F=r(58679),R=r(42189),Q=r(9529),ie=r(56011),ge=r(65005),ye=r(45074),_e=r(36858),Re=r(57274);function ke(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"pbi-dropdown-item",26),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){var t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.name," ")}}function fe(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"pbi-dropdown-item",26),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275elementEnd()),2&o){var t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(2,2,t.displayNameKey)," ")}}function Tt(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"fieldset",27),e.\u0275\u0275element(1,"legend",28),e.\u0275\u0275elementStart(2,"pbi-dropdown",29)(3,"pbi-dropdown-trigger"),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,fe,3,4,"pbi-dropdown-item",20),e.\u0275\u0275elementEnd()()),2&o){var t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(5,3,t.totalMatchingOption.value.displayNameKey)," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t.viewModel.totalMatchingOptions)("ngForTrackBy",t.trackBy.id)}}function Bt(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"pbi-dropdown-item",26),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){var t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",t.displayName," ")}}function Et(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"pbi-dropdown-item",26),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){var t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",t.value," ")}}var oe=function(n){return{value:n}},At=function(n){return{visibility:n}};function Lt(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"fieldset",30),e.\u0275\u0275element(1,"legend",31),e.\u0275\u0275elementStart(2,"section",32)(3,"pbi-dropdown",33)(4,"pbi-dropdown-trigger"),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,Et,2,2,"pbi-dropdown-item",20),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"theme-color-input",34),e.\u0275\u0275listener("colorChanged",function(s){e.\u0275\u0275restoreView(t);var d=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(d.viewModel.gradient.updateGradientNullColor(s))}),e.\u0275\u0275elementEnd()()()}if(2&o){var i=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275attribute("aria-label",i.defaultFormattingLabel),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(i.nullStrategyOption.value.value),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",i.viewModel.gradient.nullStrategyOptions)("ngForTrackBy",i.trackBy.id),e.\u0275\u0275advance(1),e.\u0275\u0275property("color",e.\u0275\u0275pureFunction1(9,oe,i.viewModel.gradient.settings.nullColor))("defaultColor",e.\u0275\u0275pureFunction1(11,oe,i.colorPalette.dataColors.getGradientColors().nullColor.value))("isNoFillItemSupported",i.isNoFillItemSupported)("buttonHeight",32)("ngStyle",e.\u0275\u0275pureFunction1(13,At,i.viewModel.gradient.nullStrategyOption.disableInput?"hidden":"visible"))}}function Vt(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"pbi-dropdown-item",26),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){var t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",t.displayName," ")}}function Ut(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"fieldset",35),e.\u0275\u0275element(1,"legend",36),e.\u0275\u0275elementStart(2,"pbi-dropdown",37)(3,"pbi-dropdown-trigger"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,Vt,2,2,"pbi-dropdown-item",20),e.\u0275\u0275elementEnd()()),2&o){var t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",t.barDirectionSelectedOption.value.displayName," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t.viewModel.dataBars.barDirectionSelectOptions)("ngForTrackBy",t.trackBy.reverseDirection)}}function Ht(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"pbi-dropdown-item",26),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){var t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",t.value," ")}}function Wt(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"pbi-dropdown-item",26),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){var t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",t.value," ")}}function Gt(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"fieldset"),e.\u0275\u0275element(1,"legend",52),e.\u0275\u0275elementStart(2,"section",32)(3,"pbi-dropdown",53)(4,"pbi-dropdown-trigger"),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,Wt,2,2,"pbi-dropdown-item",20),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"theme-color-input",42),e.\u0275\u0275listener("colorChanged",function(s){e.\u0275\u0275restoreView(t);var d=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(d.viewModel.gradient.updateGradientMidColor(s))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(8,"pbi-form-field"),e.\u0275\u0275element(9,"input",54),e.\u0275\u0275pipe(10,"localize"),e.\u0275\u0275pipe(11,"localize"),e.\u0275\u0275elementEnd()()}if(2&o){var i=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",i.centerSelectedOption.value.value," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",i.viewModel.gradient.centerSelectOptions)("ngForTrackBy",i.trackBy.id),e.\u0275\u0275advance(1),e.\u0275\u0275property("color",e.\u0275\u0275pureFunction1(15,oe,i.viewModel.gradient.settings.midColor))("defaultColor",e.\u0275\u0275pureFunction1(17,oe,i.colorPalette.dataColors.getGradientColors().midColor.value))("isNoFillItemSupported",i.isNoFillItemSupported)("buttonHeight",32),e.\u0275\u0275advance(2),e.\u0275\u0275property("placeholder",e.\u0275\u0275pipeBind1(10,11,"Enter_A_Value"))("pbiTooltip",null==i.viewModel.gradient.settings.midValue?e.\u0275\u0275pipeBind1(11,13,"Enter_A_Value"):void 0)("pbiTooltipShowDelay",i.viewModel.gradient.tooltipConfig.tooltipDelay)("pbiTooltipHideDelay",i.viewModel.gradient.tooltipConfig.tooltipDelay)}}function $t(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"pbi-dropdown-item",26),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){var t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",t.value," ")}}var Qt=function(){return{name:"ConditionalFormattingDialogModern_Diverging","aria-label":"ConditionalFormattingDialogModern_Diverging"}};function Jt(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",38)(1,"section",39)(2,"fieldset"),e.\u0275\u0275element(3,"legend",40),e.\u0275\u0275elementStart(4,"section",32)(5,"pbi-dropdown",41)(6,"pbi-dropdown-trigger"),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,Ht,2,2,"pbi-dropdown-item",20),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"theme-color-input",42),e.\u0275\u0275listener("colorChanged",function(s){e.\u0275\u0275restoreView(t);var d=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(d.viewModel.gradient.updateGradientMinColor(s))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(10,"pbi-form-field"),e.\u0275\u0275element(11,"input",43),e.\u0275\u0275pipe(12,"localize"),e.\u0275\u0275pipe(13,"localize"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(14,Gt,12,19,"fieldset",44),e.\u0275\u0275elementStart(15,"fieldset"),e.\u0275\u0275element(16,"legend",45),e.\u0275\u0275elementStart(17,"section",32)(18,"pbi-dropdown",46)(19,"pbi-dropdown-trigger"),e.\u0275\u0275text(20),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(21,$t,2,2,"pbi-dropdown-item",20),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"theme-color-input",42),e.\u0275\u0275listener("colorChanged",function(s){e.\u0275\u0275restoreView(t);var d=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(d.viewModel.gradient.updateGradientMaxColor(s))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(23,"pbi-form-field"),e.\u0275\u0275element(24,"input",47),e.\u0275\u0275pipe(25,"localize"),e.\u0275\u0275pipe(26,"localize"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(27,"section",48),e.\u0275\u0275element(28,"pbi-checkbox",49),e.\u0275\u0275pipe(29,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"section",50),e.\u0275\u0275element(31,"gradient-bar-lazy",51),e.\u0275\u0275elementEnd()()}if(2&o){var i=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate(i.minimumSelectedOption.value.value),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",i.viewModel.gradient.minimumSelectOptions)("ngForTrackBy",i.trackBy.id),e.\u0275\u0275advance(1),e.\u0275\u0275property("color",e.\u0275\u0275pureFunction1(36,oe,i.viewModel.gradient.settings.minColor))("defaultColor",e.\u0275\u0275pureFunction1(38,oe,i.colorPalette.dataColors.getGradientColors().minColor.value))("isNoFillItemSupported",i.isNoFillItemSupported)("buttonHeight",32),e.\u0275\u0275advance(2),e.\u0275\u0275property("placeholder",e.\u0275\u0275pipeBind1(12,26,"Enter_A_Value"))("pbiTooltip",null==i.viewModel.gradient.settings.minValue?e.\u0275\u0275pipeBind1(13,28,"Enter_A_Value"):void 0)("pbiTooltipShowDelay",i.viewModel.gradient.tooltipConfig.tooltipDelay)("pbiTooltipHideDelay",i.viewModel.gradient.tooltipConfig.tooltipDelay),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",i.diverging.value),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate1(" ",i.maximumSelectedOption.value.value," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",i.viewModel.gradient.maximumSelectOptions)("ngForTrackBy",i.trackBy.id),e.\u0275\u0275advance(1),e.\u0275\u0275property("color",e.\u0275\u0275pureFunction1(40,oe,i.viewModel.gradient.settings.maxColor))("defaultColor",e.\u0275\u0275pureFunction1(42,oe,i.colorPalette.dataColors.getGradientColors().maxColor.value))("isNoFillItemSupported",i.isNoFillItemSupported)("buttonHeight",32),e.\u0275\u0275advance(2),e.\u0275\u0275property("placeholder",e.\u0275\u0275pipeBind1(25,30,"Enter_A_Value"))("pbiTooltip",null==i.viewModel.gradient.settings.maxValue?e.\u0275\u0275pipeBind1(26,32,"Enter_A_Value"):void 0)("pbiTooltipShowDelay",i.viewModel.gradient.tooltipConfig.tooltipDelay)("pbiTooltipHideDelay",i.viewModel.gradient.tooltipConfig.tooltipDelay),e.\u0275\u0275advance(4),e.\u0275\u0275property("label",e.\u0275\u0275pipeBind1(29,34,"ConditionalFormattingDialogModern_Diverging"))("localizeAttr",e.\u0275\u0275pureFunction0(44,Qt)),e.\u0275\u0275advance(3),e.\u0275\u0275property("colors",i.viewModel.gradient.gradientBarValue)}}function Xt(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"pbi-dropdown-item",26),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){var t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",t.value," ")}}function Yt(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"pbi-dropdown-item",26),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){var t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",t.value," ")}}var Zt=function(){return{name:"DataBarsDialog_HideText","aria-label":"DataBarsDialog_HideText"}};function qt(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",38)(1,"section",39)(2,"fieldset"),e.\u0275\u0275element(3,"legend",40),e.\u0275\u0275elementStart(4,"section",32)(5,"pbi-dropdown",41)(6,"pbi-dropdown-trigger"),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,Xt,2,2,"pbi-dropdown-item",20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"pbi-form-field"),e.\u0275\u0275element(10,"input",55),e.\u0275\u0275pipe(11,"localize"),e.\u0275\u0275pipe(12,"localize"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(13,"fieldset"),e.\u0275\u0275element(14,"legend",45),e.\u0275\u0275elementStart(15,"section",32)(16,"pbi-dropdown",46)(17,"pbi-dropdown-trigger"),e.\u0275\u0275text(18),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(19,Yt,2,2,"pbi-dropdown-item",20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(20,"pbi-form-field"),e.\u0275\u0275element(21,"input",56),e.\u0275\u0275pipe(22,"localize"),e.\u0275\u0275pipe(23,"localize"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(24,"section",57)(25,"fieldset"),e.\u0275\u0275element(26,"legend",58),e.\u0275\u0275elementStart(27,"theme-color-input",59),e.\u0275\u0275listener("colorChanged",function(s){e.\u0275\u0275restoreView(t);var d=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(d.viewModel.dataBars.updateDataBarsPositiveColor(s))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(28,"fieldset"),e.\u0275\u0275element(29,"legend",60),e.\u0275\u0275elementStart(30,"theme-color-input",61),e.\u0275\u0275listener("colorChanged",function(s){e.\u0275\u0275restoreView(t);var d=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(d.viewModel.dataBars.updateDataBarsNegativeColor(s))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(31,"fieldset"),e.\u0275\u0275element(32,"legend",62),e.\u0275\u0275elementStart(33,"theme-color-input",63),e.\u0275\u0275listener("colorChanged",function(s){e.\u0275\u0275restoreView(t);var d=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(d.viewModel.dataBars.updateDataBarsAxisColor(s))}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(34,"section",48),e.\u0275\u0275element(35,"pbi-checkbox",64),e.\u0275\u0275pipe(36,"localize"),e.\u0275\u0275elementEnd()()}if(2&o){var i=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate(i.minimumSelectedOption.value.value),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",i.viewModel.dataBars.minimumSelectOptions)("ngForTrackBy",i.trackBy.id),e.\u0275\u0275advance(2),e.\u0275\u0275property("placeholder",e.\u0275\u0275pipeBind1(11,26,"Enter_A_Value"))("pbiTooltip",null==i.viewModel.dataBars.settings.minValue?e.\u0275\u0275pipeBind1(12,28,"Enter_A_Value"):void 0)("pbiTooltipShowDelay",i.viewModel.dataBars.tooltipConfig.tooltipDelay)("pbiTooltipHideDelay",i.viewModel.dataBars.tooltipConfig.tooltipDelay),e.\u0275\u0275advance(8),e.\u0275\u0275textInterpolate1(" ",i.maximumSelectedOption.value.value," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",i.viewModel.dataBars.maximumSelectOptions)("ngForTrackBy",i.trackBy.id),e.\u0275\u0275advance(2),e.\u0275\u0275property("placeholder",e.\u0275\u0275pipeBind1(22,30,"Enter_A_Value"))("pbiTooltip",null==i.viewModel.dataBars.settings.maxValue?e.\u0275\u0275pipeBind1(23,32,"Enter_A_Value"):void 0)("pbiTooltipShowDelay",i.viewModel.dataBars.tooltipConfig.tooltipDelay)("pbiTooltipHideDelay",i.viewModel.dataBars.tooltipConfig.tooltipDelay),e.\u0275\u0275advance(6),e.\u0275\u0275property("color",e.\u0275\u0275pureFunction1(36,oe,null==i.viewModel.dataBars.settings.positiveColor?null:i.viewModel.dataBars.settings.positiveColor.solid.color))("defaultColor",e.\u0275\u0275pureFunction1(38,oe,i.colorPalette.dataColors.getGradientColors().maxColor.value))("buttonHeight",32),e.\u0275\u0275advance(3),e.\u0275\u0275property("color",e.\u0275\u0275pureFunction1(40,oe,null==i.viewModel.dataBars.settings.negativeColor?null:i.viewModel.dataBars.settings.negativeColor.solid.color))("defaultColor",e.\u0275\u0275pureFunction1(42,oe,i.colorPalette.dataColors.getGradientColors().minColor.value))("buttonHeight",32),e.\u0275\u0275advance(3),e.\u0275\u0275property("color",e.\u0275\u0275pureFunction1(44,oe,null==i.viewModel.dataBars.settings.axisColor?null:i.viewModel.dataBars.settings.axisColor.solid.color))("defaultColor",e.\u0275\u0275pureFunction1(46,oe,i.colorPalette.foreground.value))("buttonHeight",32)("isNoFillItemSupported",i.isNoFillItemSupported),e.\u0275\u0275advance(2),e.\u0275\u0275property("label",e.\u0275\u0275pipeBind1(36,34,"DataBarsDialog_HideText"))("localizeAttr",e.\u0275\u0275pureFunction0(48,Zt))}}function ei(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"pbi-dropdown-item",26),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275elementEnd()),2&o){var t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(2,2,t.displayNameKey)," ")}}function ti(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"pbi-dropdown-item",26),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275elementEnd()),2&o){var t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(2,2,t.displayNameKey)," ")}}function ii(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"fieldset",73),e.\u0275\u0275element(1,"legend",74)(2,"icon-set-picker-input",75),e.\u0275\u0275elementEnd()),2&o){var t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(2),e.\u0275\u0275property("iconSetId",t.viewModel.conditional.iconSetId)("onIconSetSelected",t.onIconSetSelected)}}function ni(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"section",65)(1,"fieldset",66),e.\u0275\u0275element(2,"legend",67),e.\u0275\u0275elementStart(3,"pbi-dropdown",68)(4,"pbi-dropdown-trigger"),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,ei,3,4,"pbi-dropdown-item",7),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(8,"fieldset",69),e.\u0275\u0275element(9,"legend",70),e.\u0275\u0275elementStart(10,"pbi-dropdown",71)(11,"pbi-dropdown-trigger"),e.\u0275\u0275text(12),e.\u0275\u0275pipe(13,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(14,ti,3,4,"pbi-dropdown-item",7),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(15,ii,3,2,"fieldset",72),e.\u0275\u0275elementEnd()),2&o){var t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(6,5,t.iconLayout.value.displayNameKey)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t.iconLayoutOptions),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(13,7,t.iconVerticalAlignment.value.displayNameKey)," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t.iconVerticalAlignmentOptions),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isConditional&&t.isPropertyTypeIcon)}}function oi(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"pbi-dropdown-item",26),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){var t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",t.displayName," ")}}function ri(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"pbi-dropdown-item",26),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275elementEnd()),2&o){var t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(2,2,t.displayNameKey)," ")}}function ai(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"pbi-dropdown-item",26),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){var t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",t.displayName," ")}}function li(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"pbi-dropdown-item",26),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275elementEnd()),2&o){var t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(2,2,t.displayNameKey)," ")}}var Ie=function(n){return{hiddenNoTransition:n}},si=function(){return{placeholder:"Min"}},di=function(){return{placeholder:"Max"}};function ci(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"section")(1,"section"),e.\u0275\u0275element(2,"h2",100),e.\u0275\u0275elementStart(3,"pbi-dropdown",101)(4,"pbi-dropdown-trigger"),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,oi,2,2,"pbi-dropdown-item",20),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(7,"input",102),e.\u0275\u0275pipe(8,"localize"),e.\u0275\u0275elementStart(9,"pbi-dropdown",103)(10,"pbi-dropdown-trigger"),e.\u0275\u0275text(11),e.\u0275\u0275pipe(12,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(13,ri,3,4,"pbi-dropdown-item",20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"section",104),e.\u0275\u0275element(15,"h2",105),e.\u0275\u0275elementStart(16,"pbi-dropdown",106)(17,"pbi-dropdown-trigger"),e.\u0275\u0275text(18),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(19,ai,2,2,"pbi-dropdown-item",20),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(20,"input",107),e.\u0275\u0275pipe(21,"localize"),e.\u0275\u0275elementStart(22,"pbi-dropdown",108)(23,"pbi-dropdown-trigger"),e.\u0275\u0275text(24),e.\u0275\u0275pipe(25,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(26,li,3,4,"pbi-dropdown-item",20),e.\u0275\u0275elementEnd()()()),2&o){var t=e.\u0275\u0275nextContext().ngIf,i=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1("",t.lowerBound.operator.displayName," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t.operatorOptions.lowerBoundOptions)("ngForTrackBy",i.trackBy.id),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(27,Ie,t.lowerBound.operator.disableInput))("localizeAttr",e.\u0275\u0275pureFunction0(29,si))("pbiTooltip",e.\u0275\u0275pipeBind1(8,19,"Min")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(30,Ie,t.lowerBound.operator.disableInput)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(12,21,t.lowerBound.valueKind.displayNameKey)," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t.argumentKindOptions)("ngForTrackBy",i.trackBy.kind),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(32,Ie,t.lowerBound.operator.disableOtherOperator)),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1("",t.upperBound.operator.displayName," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t.operatorOptions.upperBoundOptions)("ngForTrackBy",i.trackBy.id),e.\u0275\u0275advance(1),e.\u0275\u0275property("localizeAttr",e.\u0275\u0275pureFunction0(34,di))("pbiTooltip",e.\u0275\u0275pipeBind1(21,23,"Max")),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(25,25,t.upperBound.valueKind.displayNameKey)," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t.argumentKindOptions)("ngForTrackBy",i.trackBy.kind)}}function ui(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"pbi-dropdown-item",26),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){var t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",t.displayName," ")}}var pi=function(){return{placeholder:"Text"}};function gi(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"section")(1,"section"),e.\u0275\u0275element(2,"h2",100),e.\u0275\u0275elementStart(3,"pbi-dropdown",101)(4,"pbi-dropdown-trigger"),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,ui,2,2,"pbi-dropdown-item",20),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(7,"input",109),e.\u0275\u0275pipe(8,"localize"),e.\u0275\u0275elementEnd()()),2&o){var t=e.\u0275\u0275nextContext().ngIf,i=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1("",t.lowerBound.operator.displayName," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t.operatorOptions.lowerBoundOptions)("ngForTrackBy",i.trackBy.id),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(8,Ie,t.lowerBound.operator.disableInput))("localizeAttr",e.\u0275\u0275pureFunction0(10,pi))("pbiTooltip",e.\u0275\u0275pipeBind1(8,6,"ConditionalFormattingDialog_StringInput_TooltipText"))}}function mi(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"theme-color-input",42),e.\u0275\u0275listener("colorChanged",function(d){e.\u0275\u0275restoreView(t);var f=e.\u0275\u0275nextContext().ngIf;return e.\u0275\u0275resetView(f.onColorChanged(d))}),e.\u0275\u0275elementEnd()}if(2&o){var i=e.\u0275\u0275nextContext().ngIf,a=e.\u0275\u0275nextContext(4);e.\u0275\u0275property("color",e.\u0275\u0275pureFunction1(4,oe,i.value))("defaultColor",e.\u0275\u0275pureFunction1(6,oe,i.defaultValue||a.defaultColor))("isNoFillItemSupported",a.isNoFillItemSupported)("buttonHeight",32)}}function hi(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"icon-picker",110),e.\u0275\u0275listener("iconChanged",function(s){e.\u0275\u0275restoreView(t);var d=e.\u0275\u0275nextContext().ngIf;return e.\u0275\u0275resetView(d.onIconChanged(s))}),e.\u0275\u0275elementEnd()}if(2&o){var i=e.\u0275\u0275nextContext().ngIf;e.\u0275\u0275property("selectedIconId",i.value)}}var Nt=function(n){return{disabled:n}};function fi(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0,90),e.\u0275\u0275template(1,ci,27,35,"section",91),e.\u0275\u0275template(2,gi,9,11,"section",91),e.\u0275\u0275element(3,"h2",92),e.\u0275\u0275template(4,mi,1,8,"theme-color-input",93),e.\u0275\u0275template(5,hi,1,1,"icon-picker",94),e.\u0275\u0275elementStart(6,"section",95),e.\u0275\u0275element(7,"i",96),e.\u0275\u0275elementStart(8,"i",97),e.\u0275\u0275listener("keydown",function(S){e.\u0275\u0275restoreView(t);var K=e.\u0275\u0275nextContext().index,L=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(L.handleKeyDownCase(S,K,L.handleMoveCaseUp))})("click",function(S){e.\u0275\u0275restoreView(t);var K=e.\u0275\u0275nextContext().index,L=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(L.handleMoveCaseUp(K,S))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"i",98),e.\u0275\u0275listener("keydown",function(S){e.\u0275\u0275restoreView(t);var K=e.\u0275\u0275nextContext().index,L=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(L.handleKeyDownCase(S,K,L.handleMoveCaseDown))})("click",function(S){e.\u0275\u0275restoreView(t);var K=e.\u0275\u0275nextContext().index,L=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(L.handleMoveCaseDown(K,S))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"i",99),e.\u0275\u0275listener("keydown",function(S){e.\u0275\u0275restoreView(t);var K=e.\u0275\u0275nextContext().index,L=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(L.handleKeyDownCase(S,K,L.handleDeleteCase))})("click",function(S){e.\u0275\u0275restoreView(t);var K=e.\u0275\u0275nextContext().index,L=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(L.handleDeleteCase(K,S))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()}if(2&o){var i=n.ngIf,a=e.\u0275\u0275nextContext(),s=a.$implicit,d=a.first,f=a.last,O=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("formGroup",s)("ngSwitch",O.viewModel.conditional.ruleTemplateKind),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","number"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","text"),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf","Color"===i.propertyType),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Icon"===i.propertyType),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(15,Ie,i.isValid())),e.\u0275\u0275attribute("tabindex",i.isValid()?-1:0)("aria-label",O.caseHasAnErrorMessage),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(17,Nt,d)),e.\u0275\u0275attribute("tabindex",d?-1:0),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(19,Nt,f)),e.\u0275\u0275attribute("tabindex",f?-1:0),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(21,Nt,d&&f)),e.\u0275\u0275attribute("tabindex",d&&f?-1:0)}}function vi(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"section",88),e.\u0275\u0275template(1,fi,11,23,"ng-container",89),e.\u0275\u0275elementEnd()),2&o){var t=n.index,i=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.viewModel.conditional.cases[t])}}function Ci(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"section",76)(1,"section",77)(2,"div",78)(3,"button",79),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.reverseCasesValue())}),e.\u0275\u0275element(4,"i",80)(5,"span",81),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"button",79),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.addCase())}),e.\u0275\u0275element(7,"i",82)(8,"span",83),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(9,"legend",84),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"section",85),e.\u0275\u0275elementContainerStart(11,86),e.\u0275\u0275template(12,vi,2,1,"section",87),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()()}if(2&o){var i=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(5),e.\u0275\u0275property("localize",i.viewModel.conditional.reverseButtonLabelKey)("localizeTooltip",i.viewModel.conditional.reverseButtonLabelKey),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngForOf",i.rulesFormArray.controls)}}function yi(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"form",1),e.\u0275\u0275element(1,"label",2),e.\u0275\u0275elementStart(2,"section",3)(3,"fieldset",4),e.\u0275\u0275element(4,"legend",5),e.\u0275\u0275elementStart(5,"pbi-dropdown",6)(6,"pbi-dropdown-trigger"),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,ke,2,2,"pbi-dropdown-item",7),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(9,Tt,7,5,"fieldset",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"section",9)(11,"fieldset",10),e.\u0275\u0275element(12,"legend",11),e.\u0275\u0275elementStart(13,"pbi-dropdown",12,13)(15,"pbi-dropdown-trigger"),e.\u0275\u0275text(16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"div",14)(18,"pbi-field-list",15),e.\u0275\u0275listener("onNodeClick",function(s){e.\u0275\u0275restoreView(t);var d=e.\u0275\u0275reference(14),f=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(f.handleNodeSelect(s,d))})("onNodeCheck",function(s){e.\u0275\u0275restoreView(t);var d=e.\u0275\u0275reference(14),f=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(f.handleNodeSelect(s,d))}),e.\u0275\u0275pipe(19,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(20,"div",16),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(21,"fieldset",17),e.\u0275\u0275element(22,"legend",18),e.\u0275\u0275elementStart(23,"pbi-dropdown",19)(24,"pbi-dropdown-trigger"),e.\u0275\u0275text(25),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(26,Bt,2,2,"pbi-dropdown-item",20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(27,Lt,8,15,"fieldset",21),e.\u0275\u0275template(28,Ut,6,3,"fieldset",22),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(29,Jt,32,45,"div",23),e.\u0275\u0275template(30,qt,37,49,"div",23),e.\u0275\u0275template(31,ni,16,9,"section",24),e.\u0275\u0275template(32,Ci,13,3,"section",25),e.\u0275\u0275elementEnd()}if(2&o){var i=e.\u0275\u0275nextContext();e.\u0275\u0275property("formGroup",i.conditionalFormattingForm),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate(i.formattingMode.value.name),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",i.viewModel.modeSelectOptions),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.viewModel.totalMatchingOptions),e.\u0275\u0275advance(4),e.\u0275\u0275property("options",i.dropdownOptions),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(i.viewModel.sourceSelector.fieldDisplayName),e.\u0275\u0275advance(2),e.\u0275\u0275property("fieldListTree",e.\u0275\u0275pipeBind1(19,20,i.fieldListTree$))("scrollSelectedItemIntoViewOnInit",!0)("hasHighlights",!1)("options",i.fieldListTreeOptions),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(22,Ie,0==i.viewModel.sourceSelector.aggregationOptions.length)),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",null==i.sourceSummarization.value?null:i.sourceSummarization.value.displayName," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",i.viewModel.sourceSelector.aggregationOptions)("ngForTrackBy",i.trackBy.aggregate),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.isGradient),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.isDataBars),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.isGradient),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.isDataBars),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.isPropertyTypeIcon),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.isConditional)}}var bi=function(o){function n(t,i,a,s,d,f,O,E,S,K,L,ee,be,Oe,we,Me){var T=o.call(this)||this;return T.itemPicker=t,T.featureSwitchService=i,T.localizationService=a,T.screenReaderService=s,T.svgProvider=d,T.modelService=f,T.fieldListTreeService=O,T.captionSetting=E,T.draggableSetting=S,T.inlineItemsSetting=K,T.groupingDesignStateService=L,T.changeDetectorRef=ee,T.templateDialogPayload=be,T.conditionalFormattingDialogViewModelService=Oe,T.enabledSetting=we,T.telemetryService=Me,T.formSubscriptions=[],T.conditionalFormSubscriptions=[],T.fieldListTreeOptions={editLabel:void 0},T.pbiTreeNodeSettingOptions={captionSetting:T.captionSetting,draggableSetting:T.draggableSetting,enabledSetting:T.enabledSetting,inlineItemsSetting:T.inlineItemsSetting,showMenuSetting:{canShowMenu:function(){return!1}}},T.defaultColor="#fff",T.fieldListTree$=T.fieldListTreeService.fieldListTree$,T.iconLayoutOptions=[{value:"Before",displayNameKey:"Visual_IconLayout_Before"},{value:"IconOnly",displayNameKey:"Visual_IconLayout_IconOnly"},{value:"After",displayNameKey:"Visual_IconLayout_After"}],T.iconVerticalAlignmentOptions=[{value:"Top",displayNameKey:"Top"},{value:"Middle",displayNameKey:"Middle"},{value:"Bottom",displayNameKey:"Bottom"}],T.trackBy={kind:function(xe,de){return de.kind},id:function(xe,de){return de.id},aggregate:function(xe,de){return de.aggregate},reverseDirection:function(xe,de){return de.reverseDirection}},T.dropdownOptions={dropdownHeight:312},T.onIconSetSelected=function(ve){T.viewModel.conditional.onIconSetSelected(T.viewModel.sourceSelector.sourceField,ve),T.resetRulesFormArray()},T.defaultFormattingLabel=T.localizationService.get("ConditionalFormattingDialog_FormatNull_Desc"),T.caseHasAnErrorMessage=T.localizationService.get("ConditionalFormattingDialog_RuleBased_ConditionError"),T.fieldListTreeService.modelToPbiTreeConverterOptions=T.pbiTreeNodeSettingOptions,T}return(0,y.__extends)(n,o),n.prototype.ngOnInit=function(){var t,i,a;return(0,y.__awaiter)(this,void 0,void 0,function(){var s,d,f=this;return(0,y.__generator)(this,function(O){switch(O.label){case 0:return this.allowOverrideTotalMatching=(d=this.templateDialogPayload.input).allowOverrideTotalMatching,this.hasGrouping=d.hasGrouping,this.icons=d.icons,this.iconSets=d.iconSets,this.inDataSources=d.inDataSources,this.propertyDefinition=d.propertyDefinition,this.propertyDescriptor=d.propertyDescriptor,this.propertySelector=d.propertySelector,this.targetFieldDisplayName=d.targetFieldDisplayName,this.targetFieldExpr=d.targetFieldExpr,this.visualType=d.visualType,this.colorPalette=(0,Ae.DP)(this.templateDialogPayload.input.colorPalette),this.itemPicker.setThemeItems(this.colorPalette.dataColors,this.icons,this.iconSets),this.propertyDescriptor.type.icon?[4,this.svgProvider.loadSheet("conditionalFormattingDialogIcons")]:[3,2];case 1:O.sent(),O.label=2;case 2:return this.propertyDescriptor.type.dataBars&&(this.allowOverrideTotalMatching=!0),s=this,[4,this.conditionalFormattingDialogViewModelService.create(this.colorPalette,this.inDataSources,this.targetFieldDisplayName,this.visualType,this.iconSets,this.targetFieldExpr,this.hasGrouping,this.propertyDescriptor,this.propertyDefinition,this.propertySelector,this.allowOverrideTotalMatching)];case 3:return s.viewModel=O.sent(),this.enabledSetting.isEnabled=function(E){if(E instanceof dt.Xx){var S=(0,Le.Sd)(E,f.groupingDesignStateService);return!f.viewModel.sourceSelector.isSourceDisabled(S)}return!0},this.buildFormGroup(),!(null===(a=null===(i=null===(t=this.viewModel.colorPickerType)||void 0===t?void 0:t.fill)||void 0===i?void 0:i.solid)||void 0===a)&&a.color&&(this.isNoFillItemSupported=(0,st.AG)(this.viewModel.colorPickerType.fill.solid.color)),this.templateDialogPayload.onOkButtonClick=function(){return(0,y.__awaiter)(f,void 0,void 0,function(){return(0,y.__generator)(this,function(E){return[2,this.onSubmit()]})})},[4,this.buildFieldListTree()];case 4:return O.sent(),this.changeDetectorRef.markForCheck(),[2]}})})},n.prototype.ngOnDestroy=function(){this.removeConditionalSubscriptions(),o.prototype.ngOnDestroy.call(this)},n.prototype.buildFormGroup=function(){for(var t,i,a,s,f,O,d=this,E=0,S=this.formSubscriptions;E<S.length;E++)this.lifecycleSubscriptions.remove(S[E]);this.formSubscriptions=[],this.removeConditionalSubscriptions(),this.formattingMode=new V.p4(this.viewModel.modeSelectOptions.find(function(se){return se.value===d.viewModel.mode})),this.totalMatchingOption=new V.p4(this.viewModel.totalMatchingOption),this.sourceField=new V.p4(this.viewModel.sourceSelector.sourceField,V.kI.required),this.sourceSummarization=new V.p4(this.viewModel.sourceSelector.aggregationOption);var L={};if(this.isGradient&&(this.buildGradientFormControls(),(t={}).nullStrategyOption=this.nullStrategyOption,t.minimumSelectedOption=this.minimumSelectedOption,t.centerSelectedOption=this.centerSelectedOption,t.maximumSelectedOption=this.maximumSelectedOption,t.gradientMinValue=this.gradientMinValue,t.gradientMaxValue=this.gradientMaxValue,t.diverging=this.diverging,L=t,this.diverging.value&&(L.gradientMidValue=this.gradientMidValue)),this.isDataBars&&(this.buildDataBarsFormControls(),(i={}).barDirectionSelectedOption=this.barDirectionSelectedOption,i.minimumSelectedOption=this.minimumSelectedOption,i.maximumSelectedOption=this.maximumSelectedOption,i.dataBarsMinValue=this.dataBarsMinValue,i.dataBarsMaxValue=this.dataBarsMaxValue,i.hideText=this.hideText,L=i),this.isConditional){this.rulesFormArray=new V.vC([]);for(var ee=0,be=this.viewModel.conditional.cases;ee<be.length;ee++)this.buildConditionalFormGroup(be[ee]);(a={}).rules=this.rulesFormArray,L=a}if(this.isPropertyTypeIcon){var we=null!==(f=this.iconLayoutOptions.find(function(se){return d.viewModel.iconLayout===se.value}))&&void 0!==f?f:this.iconLayoutOptions[0],Me=null!==(O=this.iconVerticalAlignmentOptions.find(function(se){return d.viewModel.iconVerticalAlignment===se.value}))&&void 0!==O?O:this.iconVerticalAlignmentOptions[0];this.iconLayout=new V.p4(we),this.iconVerticalAlignment=new V.p4(Me);var T=this.iconLayout.valueChanges.subscribe(function(se){d.viewModel.iconLayout=se.value}),ve=this.iconVerticalAlignment.valueChanges.subscribe(function(se){d.viewModel.iconVerticalAlignment=se.value});this.formSubscriptions.push(T,ve),L.iconLayout=this.iconLayout,L.iconVerticalAlignment=this.iconVerticalAlignment}this.conditionalFormattingForm=new V.nJ((0,y.__assign)(((s={}).formattingMode=this.formattingMode,s.totalMatchingOption=this.totalMatchingOption,s.sourceField=this.sourceField,s.sourceSummarization=this.sourceSummarization,s),L)),this.templateDialogPayload.setOkButtonState(this.conditionalFormattingForm.invalid);var xe=this.formattingMode.valueChanges.subscribe(function(se){d.onModeChanged(se.value)}),de=this.totalMatchingOption.valueChanges.subscribe(function(se){d.onTotalMatchingOptionChanged(se)}),zt=this.sourceSummarization.valueChanges.subscribe(function(se){d.onSummarizationOptionChanged(se)}),Vi=this.conditionalFormattingForm.valueChanges.subscribe(function(){d.templateDialogPayload.setOkButtonState(d.setOkButtonStatus())});this.formSubscriptions.push(xe,de,zt,Vi);for(var Rt=0,Kt=this.formSubscriptions;Rt<Kt.length;Rt++)this.lifecycleSubscriptions.add(Kt[Rt])},n.prototype.removeConditionalSubscriptions=function(){for(var t=0,i=this.conditionalFormSubscriptions;t<i.length;t++)i[t].forEach(function(s){return s.unsubscribe});this.conditionalFormSubscriptions=[]},n.prototype.buildGradientFormControls=function(){var t=this,i=this.viewModel.gradient;this.nullStrategyOption=new V.p4(i.nullStrategyOption),this.minimumSelectedOption=new V.p4({value:i.minimumSelectedOption,disabled:this.viewModel.disableAutoRange}),this.centerSelectedOption=new V.p4({value:i.centerSelectedOption,disabled:this.viewModel.disableAutoRange}),this.maximumSelectedOption=new V.p4({value:i.maximumSelectedOption,disabled:this.viewModel.disableAutoRange}),this.gradientMinValue=new V.p4({value:i.settings.minValue,disabled:i.minimumSelectedOption.disableInput},V.kI.required),this.gradientMidValue=new V.p4({value:i.settings.midValue,disabled:i.centerSelectedOption.disableInput},V.kI.required),this.gradientMaxValue=new V.p4({value:i.settings.maxValue,disabled:i.maximumSelectedOption.disableInput},V.kI.required),this.diverging=new V.p4(i.settings.diverging);var a=this.nullStrategyOption.valueChanges.subscribe(function(L){t.onNullStrategyOptionChanged(L)}),s=this.minimumSelectedOption.valueChanges.subscribe(function(L){t.onMinimumSelectedOptionChanged(L)}),d=this.centerSelectedOption.valueChanges.subscribe(function(L){t.onCenterSelectedOptionChanged(L)}),f=this.maximumSelectedOption.valueChanges.subscribe(function(L){t.onMaximumSelectedOptionChanged(L)}),O=this.gradientMaxValue.valueChanges.subscribe(function(L){t.viewModel.gradient.settings.maxValue=L}),E=this.gradientMinValue.valueChanges.subscribe(function(L){t.viewModel.gradient.settings.minValue=L}),S=this.gradientMidValue.valueChanges.subscribe(function(L){t.viewModel.gradient.settings.midValue=L}),K=this.diverging.valueChanges.subscribe(function(L){t.onDivergingChanged(L)});this.formSubscriptions.push(a,s,d,f,O,E,S,K)},n.prototype.buildDataBarsFormControls=function(){var t=this,i=this.viewModel.dataBars;this.minimumSelectedOption=new V.p4({value:i.minimumSelectedOption,disabled:this.viewModel.disableAutoRange}),this.maximumSelectedOption=new V.p4({value:i.maximumSelectedOption,disabled:this.viewModel.disableAutoRange}),this.barDirectionSelectedOption=new V.p4(i.barDirectionSelectedOption),this.dataBarsMinValue=new V.p4({value:i.settings.minValue,disabled:i.minimumSelectedOption.disableInput},V.kI.required),this.dataBarsMaxValue=new V.p4({value:i.settings.maxValue,disabled:i.maximumSelectedOption.disableInput},V.kI.required),this.hideText=new V.p4(i.settings.hideText);var a=this.minimumSelectedOption.valueChanges.subscribe(function(S){i.minimumSelectedOption=S,i.onOptionChanged(S),t.dataBarsMinValue.setValue(i.settings.minValue),i.minimumSelectedOption.disableInput?t.dataBarsMinValue.disable():t.dataBarsMinValue.enable()}),s=this.maximumSelectedOption.valueChanges.subscribe(function(S){i.maximumSelectedOption=S,i.onOptionChanged(S),t.dataBarsMaxValue.setValue(i.settings.maxValue),i.maximumSelectedOption.disableInput?t.dataBarsMaxValue.disable():t.dataBarsMaxValue.enable()}),d=this.barDirectionSelectedOption.valueChanges.subscribe(function(S){i.barDirectionSelectedOption=S,i.settings.reverseDirection=S.reverseDirection}),f=this.dataBarsMinValue.valueChanges.subscribe(function(S){t.viewModel.dataBars.settings.minValue=S}),O=this.dataBarsMaxValue.valueChanges.subscribe(function(S){t.viewModel.dataBars.settings.maxValue=S}),E=this.hideText.valueChanges.subscribe(function(S){t.viewModel.dataBars.settings.hideText=S});this.sourceField.disable(),this.sourceSummarization.disable(),this.formSubscriptions.push(d,a,s,f,O,E)},n.prototype.buildConditionalFormGroup=function(t){var i;switch(t.ruleTemplateKind){case"number":i=this.buildNumericConditionalFormGroup(t);break;case"text":i=this.buildStringConditionalFormGroup(t);break;default:m.fF.assertNever(t.ruleTemplateKind)}i.setValidators(this.caseValidator(t)),this.rulesFormArray.push(i)},n.prototype.buildNumericConditionalFormGroup=function(t){var i,a=this,s=new V.nJ(((i={}).lowerBoundOperator=new V.p4(t.lowerBound.operator),i.lowerBoundArgument=new V.p4(t.lowerBound.value),i.lowerBoundArgumentKind=new V.p4({value:t.lowerBound.valueKind,disabled:!t.isPercentEnabled}),i.upperBoundOperator=new V.p4(t.upperBound.operator),i.upperBoundArgument=new V.p4(t.upperBound.value),i.upperBoundArgumentKind=new V.p4({value:t.upperBound.valueKind,disabled:!t.isPercentEnabled}),i)),d=s.controls,f=d.lowerBoundOperator.valueChanges.subscribe(function(ee){a.lowerBoundOperatorChanged(ee,t)}),O=d.lowerBoundArgument.valueChanges.subscribe(function(ee){a.lowerBoundArgumentChanged(ee,t)}),E=d.lowerBoundArgumentKind.valueChanges.subscribe(function(ee){a.lowerBoundArgumentKindChanged(ee,t)}),S=d.upperBoundOperator.valueChanges.subscribe(function(ee){a.upperBoundOperatorChanged(ee,t)}),K=d.upperBoundArgument.valueChanges.subscribe(function(ee){a.upperBoundArgumentChanged(ee,t)}),L=d.upperBoundArgumentKind.valueChanges.subscribe(function(ee){a.upperBoundArgumentKindChanged(ee,t)});return this.conditionalFormSubscriptions.push([f,O,E,S,K,L]),s},n.prototype.buildStringConditionalFormGroup=function(t){var i,a=this,s=new V.nJ(((i={}).lowerBoundOperator=new V.p4(t.lowerBound.operator),i.lowerBoundArgument=new V.p4(t.lowerBound.value),i.lowerBoundArgumentKind=new V.p4({value:t.lowerBound.valueKind,disabled:!0}),i)),d=s.controls,f=d.lowerBoundOperator.valueChanges.subscribe(function(S){a.lowerBoundOperatorChanged(S,t)}),O=d.lowerBoundArgument.valueChanges.subscribe(function(S){a.lowerBoundArgumentChanged(S,t)}),E=d.lowerBoundArgumentKind.valueChanges.subscribe(function(S){a.lowerBoundArgumentKindChanged(S,t)});return this.conditionalFormSubscriptions.push([f,O,E]),s},Object.defineProperty(n.prototype,"exploreUIAuthoringModulePath",{get:function(){return"@powerbi/ExploreUIAuthoring/lazy-modules/explore-ui-authoring/explore-ui-authoring.module#ExploreUIAuthoringModule"},enumerable:!1,configurable:!0}),n.prototype.caseValidator=function(t){return function(i){var a=i.controls.lowerBoundArgument,s=t.isValid()?null:{caseInvalid:!0};a.setErrors(s),i.controls.upperBoundArgument&&i.controls.upperBoundArgument.setErrors(s)}},n.prototype.upperBoundOperatorChanged=function(t,i){i.upperBound.operator=t,this.screenReaderAlertIfInvalid()},n.prototype.upperBoundArgumentChanged=function(t,i){i.upperBound.value=t,this.screenReaderAlertIfInvalid()},n.prototype.upperBoundArgumentKindChanged=function(t,i){i.upperBound.valueKind=t,this.screenReaderAlertIfInvalid()},n.prototype.lowerBoundOperatorChanged=function(t,i){switch(i.ruleTemplateKind){case"number":case"text":i.lowerBound.operator=t;break;default:m.fF.assertNever(i.ruleTemplateKind)}this.screenReaderAlertIfInvalid()},n.prototype.lowerBoundArgumentChanged=function(t,i){switch(i.ruleTemplateKind){case"number":case"text":i.lowerBound.value=t;break;default:m.fF.assertNever(i.ruleTemplateKind)}this.screenReaderAlertIfInvalid()},n.prototype.lowerBoundArgumentKindChanged=function(t,i){i.lowerBound.valueKind=t,this.screenReaderAlertIfInvalid()},n.prototype.screenReaderAlertIfInvalid=function(){this.isConditional&&(this.viewModel.conditional.isValid()?this.screenReaderService.cancelDebounce("conditionalDialog"):this.screenReaderService.alertWithDebounce("conditionalDialog",this.caseHasAnErrorMessage))},n.prototype.handleKeyDownCase=function(t,i,a){var s=this,d=!1;switch(t.keyCode){case 32:case 13:m.fF.assert(function(){return s.isConditional},"Case control is only possible in conditional"),a.call(this,i),d=!0}d&&t.stopPropagation()},n.prototype.handleDeleteCase=function(t){1!==this.rulesFormArray.controls.length&&(this.viewModel.conditional.deleteCase(t),this.conditionalFormSubscriptions[t].forEach(function(i){return i.unsubscribe()}),this.conditionalFormSubscriptions=this.conditionalFormSubscriptions.filter(function(i,a){return t!==a}),this.rulesFormArray.removeAt(t))},n.prototype.handleMoveCaseDown=function(t){if(t!==this.rulesFormArray.controls.length-1){this.viewModel.conditional.moveCaseDown(t),(0,k.LF)(this.conditionalFormSubscriptions,t,t+1);var i=this.rulesFormArray.at(t);this.rulesFormArray.removeAt(t),this.rulesFormArray.insert(t+1,i)}},n.prototype.handleMoveCaseUp=function(t){if(0!==t){this.viewModel.conditional.moveCaseUp(t),(0,k.LF)(this.conditionalFormSubscriptions,t,t-1);var i=this.rulesFormArray.at(t);this.rulesFormArray.removeAt(t),this.rulesFormArray.insert(t-1,i)}},n.prototype.handleKeyDownDiverging=function(t){var i=this;m.fF.assert(function(){return i.isGradient},"Divergent is only possible in gradient");var a=!1;switch(t.keyCode){case 32:case 13:m.fF.assert(function(){return!!i.viewModel.gradient},"Gradient cannot be null"),this.viewModel.gradient.settings.diverging=!this.viewModel.gradient.settings.diverging,this.viewModel.gradient.onDivergingChanged(),a=!0}a&&t.stopPropagation()},Object.defineProperty(n.prototype,"isConditional",{get:function(){var i;return"conditional"===(null===(i=this.viewModel)||void 0===i?void 0:i.mode)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isFieldValue",{get:function(){var i;return"fieldValue"===(null===(i=this.viewModel)||void 0===i?void 0:i.mode)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isGradient",{get:function(){var i;return"gradient"===(null===(i=this.viewModel)||void 0===i?void 0:i.mode)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isDataBars",{get:function(){var i;return"dataBars"===(null===(i=this.viewModel)||void 0===i?void 0:i.mode)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isPropertyTypeIcon",{get:function(){var i;return"Icon"===(null===(i=this.viewModel)||void 0===i?void 0:i.propertyType)},enumerable:!1,configurable:!0}),n.prototype.onModeChanged=function(t){this.viewModel.mode=t,this.viewModel.gradient=void 0,this.viewModel.conditional=void 0,this.viewModel.fieldValue=void 0,this.conditionalFormattingDialogViewModelService.initializeMode(this.viewModel,null,this.colorPalette,this.iconSets,this.localizationService,this.featureSwitchService),this.viewModel.sourceSelector.onSourceExpectedTypeChange(this.viewModel.expectedSourceTypes),this.fieldListTreeService.refresh(),this.buildFormGroup()},n.prototype.onTotalMatchingOptionChanged=function(t){if(this.viewModel.totalMatchingOption=t,this.viewModel.gradient){this.conditionalFormattingDialogViewModelService.updateDisableAutoRange(this.viewModel,this.hasGrouping),this.viewModel.gradient.onDisableAutoRangeChanged(i=this.viewModel.disableAutoRange);var a=null!=this.gradientMinValue.value||null!=this.gradientMaxValue.value||null!=this.gradientMidValue.value;this.enforceGradientSelectionInputs(),i?this.setSelectedOptionsGradient([0]):a||this.setSelectedOptionsGradient([1,2,3])}if(this.viewModel.dataBars&&(this.conditionalFormattingDialogViewModelService.updateDisableAutoRange(this.viewModel,this.hasGrouping),this.viewModel.dataBars.onDisableAutoRangeChanged(i=this.viewModel.disableAutoRange),a=null!=this.dataBarsMinValue.value||null!=this.dataBarsMaxValue.value,this.enforceDataBarsSelectionInputs(),i?this.setSelectedOptionsDataBars([0]):a||this.setSelectedOptionsDataBars([1,2])),this.viewModel.conditional&&"number"===this.viewModel.conditional.ruleTemplateKind){var i;this.conditionalFormattingDialogViewModelService.updateDisableAutoRange(this.viewModel,this.hasGrouping),this.viewModel.conditional.onDisableAutoRangeChanged(i=this.viewModel.disableAutoRange);for(var s=0;s<this.rulesFormArray.controls.length;s++){var d=this.rulesFormArray.controls[s].controls;this.viewModel.conditional.cases[s].isPercentEnabled?(d.lowerBoundArgumentKind.enable(),d.upperBoundArgumentKind.enable()):(d.lowerBoundArgumentKind.disable(),d.upperBoundArgumentKind.disable())}}this.changeDetectorRef.markForCheck()},n.prototype.enforceGradientSelectionInputs=function(){var t=this.viewModel.gradient;t.minimumSelectedOption.disableInput?this.minimumSelectedOption.enable():(this.minimumSelectedOption.disable(),this.gradientMinValue.enable()),t.centerSelectedOption.disableInput?this.centerSelectedOption.enable():(this.centerSelectedOption.disable(),this.gradientMidValue.enable()),t.maximumSelectedOption.disableInput?this.maximumSelectedOption.enable():(this.maximumSelectedOption.disable(),this.gradientMaxValue.enable())},n.prototype.enforceDataBarsSelectionInputs=function(){var t=this.viewModel.dataBars;t.minimumSelectedOption.disableInput?this.minimumSelectedOption.enable():(this.minimumSelectedOption.disable(),this.dataBarsMinValue.enable()),t.maximumSelectedOption.disableInput?this.maximumSelectedOption.enable():(this.maximumSelectedOption.disable(),this.dataBarsMaxValue.enable())},n.prototype.setSelectedOptionsGradient=function(t){var i=this.viewModel.gradient,a=function(d,f){if(!_.isEmpty(d)){var O=_.first(d.filter(function(E){return t.includes(E.id)}));null!=O&&f.setValue(O)}};a(i.minimumSelectOptions,this.minimumSelectedOption),a(i.centerSelectOptions,this.centerSelectedOption),a(i.maximumSelectOptions,this.maximumSelectedOption)},n.prototype.setSelectedOptionsDataBars=function(t){var i=this.viewModel.dataBars,a=function(d,f){if(!_.isEmpty(d)){var O=_.first(d.filter(function(E){return t.includes(E.id)}));null!=O&&f.setValue(O)}};a(i.minimumSelectOptions,this.minimumSelectedOption),a(i.maximumSelectOptions,this.maximumSelectedOption)},n.prototype.isModelValid=function(){return!(!this.viewModel||!this.viewModel.sourceSelector||!this.viewModel.sourceSelector.sourceField||"conditional"===this.viewModel.mode&&!this.viewModel.conditional.isValid())},n.prototype.handleNodeSelect=function(t,i){var a=t.node;if(!a.disabled&&[0,2,4].includes(a.data.fieldType)){var d=a.data?(0,Le.Sd)(a.data,this.groupingDesignStateService):void 0;this.setSourceField(void 0,d),this.sourceSummarization.setValue(this.viewModel.sourceSelector.aggregationOption),this.sourceField.setValue(this.viewModel.sourceSelector.sourceField),i.closeDropdown()}},n.prototype.onSummarizationOptionChanged=function(t){var i;if(null!=t){var a=null===(i=this.viewModel.sourceSelector.aggregationOptions.find(function(d){return _.isEqual(d.aggregate,t.aggregate)}))||void 0===i?void 0:i.displayName;t.displayName=a??t.displayName,this.viewModel.sourceSelector.aggregationOption=t}if(this.featureSwitchService.featureSwitches.cfStrings&&"conditional"===this.viewModel.mode){var s=this.conditionalFormattingDialogViewModelService.determineRuleTemplateKind(this.viewModel);this.viewModel.conditional.reinitializeSQConditionalExpr(s),this.resetRulesFormArray(),this.buildFormGroup(),this.changeDetectorRef.markForCheck()}this.viewModel.sourceSelector.setSourceAggregate()},n.prototype.onNullStrategyOptionChanged=function(t){this.viewModel.gradient.nullStrategyOption=t,this.viewModel.gradient.updateNullStrategy()},n.prototype.onMaximumSelectedOptionChanged=function(t){this.viewModel.gradient.maximumSelectedOption=t,this.viewModel.gradient.onOptionChanged(t),this.gradientMaxValue.setValue(this.viewModel.gradient.settings.maxValue),this.viewModel.gradient.maximumSelectedOption.disableInput?this.gradientMaxValue.disable():this.gradientMaxValue.enable()},n.prototype.addCase=function(){this.viewModel.conditional.addCase();var t=this.viewModel.conditional.cases.slice(-1)[0];this.buildConditionalFormGroup(t)},n.prototype.reverseCasesValue=function(){this.viewModel.conditional.reverseCasesValue(),this.resetRulesFormArray()},n.prototype.resetRulesFormArray=function(){this.rulesFormArray=new V.vC([]),this.removeConditionalSubscriptions();for(var t=0,i=this.viewModel.conditional.cases;t<i.length;t++)this.buildConditionalFormGroup(i[t])},n.prototype.onCenterSelectedOptionChanged=function(t){this.viewModel.gradient.centerSelectedOption=t,this.viewModel.gradient.onOptionChanged(t),this.gradientMidValue.setValue(this.viewModel.gradient.settings.midValue),this.viewModel.gradient.centerSelectedOption.disableInput?this.gradientMidValue.disable():this.gradientMidValue.enable()},n.prototype.onMinimumSelectedOptionChanged=function(t){this.viewModel.gradient.minimumSelectedOption=t,this.viewModel.gradient.onOptionChanged(t),this.gradientMinValue.setValue(this.viewModel.gradient.settings.minValue),this.viewModel.gradient.minimumSelectedOption.disableInput?this.gradientMinValue.disable():this.gradientMinValue.enable()},n.prototype.onDivergingChanged=function(t){t?this.conditionalFormattingForm.addControl("gradientMidValue",this.gradientMidValue):this.conditionalFormattingForm.removeControl("gradientMidValue"),this.viewModel.gradient.settings.diverging=t,this.viewModel.gradient.onDivergingChanged()},n.prototype.setOkButtonStatus=function(){var t=this.conditionalFormattingForm.invalid;return this.featureSwitchService.featureSwitches.cfStrings&&"conditional"===this.viewModel.mode&&this.viewModel.sourceSelector.sourceField&&(t=!this.viewModel.conditional.isValid()),t},n.prototype.setSourceField=function(t,i){this.viewModel.sourceSelector.onSourceSelected(t,i)},n.prototype.buildFieldListTree=function(){return(0,y.__awaiter)(this,void 0,void 0,function(){var t=this;return(0,y.__generator)(this,function(i){switch(i.label){case 0:return[4,this.modelService.update([])];case 1:return i.sent(),this.modelService.modelChange$.pipe((0,ct.R)(this.onDestroy$),(0,ut.h)(function(a){return!!a?.model}),(0,Ye.U)(function(a){return a.model})).subscribe(function(a){t.fieldListTreeService.setOrUpdateFieldListTreeModel(a,[])}),[2]}})})},n.prototype.onSubmit=function(){var i,a,s,t=this;m.fF.assert(function(){return t.isModelValid()},"Invalid Conditional Formatting model");var d,f=this.viewModel.sourceSelector.sourceField,O=this.viewModel.propertyDescriptor,E=this.viewModel.propertyType,S=this.viewModel.totalMatchingOption;switch(this.viewModel.mode){case"gradient":d=this.viewModel.gradient.getDefinition(f,O);break;case"conditional":var K=this.viewModel.conditional.getDefinition(f);switch(E){case"Color":d={solid:{color:K}};break;case"Icon":d={kind:"Icon",value:K};break;case"Text":case"WebUrl":case"Numeric":case"DateTime":case"DataBars":d=K;break;default:m.fF.assertNever(E)}break;case"dataBars":d=this.viewModel.dataBars.getDefinition(f,O,S.id);break;case"fieldValue":d=this.viewModel.fieldValue.getDefinition(f,E);break;default:m.fF.assertNever(this.viewModel.mode)}return"Icon"===E&&(d.layout=(0,C.fL)(this.viewModel.iconLayout),d.verticalAlignment=(0,C.fL)(this.viewModel.iconVerticalAlignment)),this.featureSwitchService.featureSwitches.cfStrings&&this.telemetryService.logEvent(lt.vB,{visualType:this.visualType,propertyType:this.viewModel.propertyType,conditionalFormattingMode:this.viewModel.mode,conditionalRuleTemplateKind:null===(i=this.viewModel.conditional)||void 0===i?void 0:i.ruleTemplateKind,numberOfRulesApplied:null===(s=null===(a=this.viewModel.conditional)||void 0===a?void 0:a.cases)||void 0===s?void 0:s.length}),{selector:S&&"dataBars"!==this.viewModel.mode?S.changeSelector(this.propertySelector):this.propertySelector,propertyDefinition:(0,je.W7)(d,O,!0,this.featureSwitchService.featureSwitches.serializeSpaceOptimization)}},n.\u0275fac=function(i){return new(i||n)(e.\u0275\u0275directiveInject(Ve.a),e.\u0275\u0275directiveInject($e.vZ),e.\u0275\u0275directiveInject(Ee.o),e.\u0275\u0275directiveInject(pt.g),e.\u0275\u0275directiveInject(Ze.g),e.\u0275\u0275directiveInject(et.b),e.\u0275\u0275directiveInject(tt.p),e.\u0275\u0275directiveInject(gt.B),e.\u0275\u0275directiveInject(mt.F),e.\u0275\u0275directiveInject(ht.wt),e.\u0275\u0275directiveInject(Ne.AA),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(qe.x),e.\u0275\u0275directiveInject(Qe),e.\u0275\u0275directiveInject(it.y),e.\u0275\u0275directiveInject(Xe.y0))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["conditional-formatting-dialog"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:2,vars:1,consts:[[3,"formGroup",4,"ngIf"],[3,"formGroup"],["id","genericColor","localize","Generic_Color",1,"hidden"],[1,"flex","spaceBelow"],[1,"conditionalFormattingMode"],["id","formattingModeLabel","localize","ConditionalFormattingDialogModern_Mode_Label"],["id","formattingMode","name","formattingMode","formControlName","formattingMode","aria-labelledby","formattingModeLabel"],[3,"value",4,"ngFor","ngForOf"],["id","totalMatching",4,"ngIf"],[1,"flex","space-between"],[1,"sourceField"],["id","sourceFieldLabel","localize","ConditionalFormattingDialogModern_SourceFieldHeader"],["id","sourceFieldSelect","formControlName","sourceField","aria-labelledby","sourceFieldLabel","dropdown-type","field-list",3,"options"],["dropdownRef",""],[1,"conditionalFormattingFieldListContainer"],["focus-nav-mode","Browser",1,"fieldList","themeableElement",3,"fieldListTree","scrollSelectedItemIntoViewOnInit","hasHighlights","options","onNodeClick","onNodeCheck"],["tabindex","0",1,"container-stop-bottom"],[1,"sourceSummarization",3,"ngClass"],["id","sourceSummarizationLabel","localize","ConditionalFormattingDialog_SourceSummarizationHeader"],["id","sourceSummarization","formControlName","sourceSummarization","aria-labelledby","sourceSummarizationLabel"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],["class","nullColorStrategy",4,"ngIf"],["class","barDirection",4,"ngIf"],["class","spaceAbove",4,"ngIf"],["id","iconSettingsSection","class","flex spaceAbove",4,"ngIf"],["class","flex-column conditional spaceAbove",4,"ngIf"],[3,"value"],["id","totalMatching"],["id","totalMatchingOptionLabel","localize","ConditionalFormattingDialog_TotalMatching_Label"],["id","totalMatchingOption","formControlName","totalMatchingOption","aria-labelledby","totalMatchingOptionLabel"],[1,"nullColorStrategy"],["localize","ConditionalFormattingDialogModern_FormatNull"],[1,"colorSettings"],["formControlName","nullStrategyOption"],["tabindex","-1","labelId","genericColor",1,"whiteTheme",3,"color","defaultColor","isNoFillItemSupported","buttonHeight","ngStyle","colorChanged"],[1,"barDirection"],["id","barDirectionLabel","localize","DataBarsDialog_BarDirection"],["id","barDirectionSelectedOption","formControlName","barDirectionSelectedOption","aria-labelledby","barDirectionLabel"],[1,"spaceAbove"],[1,"sectionSettings"],["id","minimumSelectedOptionLabel","localize","ConditionalFormattingDialog_MinimumHeader","localizeTooltip","ConditionalFormattingDialog_MinimumHeader"],["formControlName","minimumSelectedOption","aria-labelledby","minimumSelectedOptionLabel"],["tabindex","-1","labelId","genericColor",1,"whiteTheme",3,"color","defaultColor","isNoFillItemSupported","buttonHeight","colorChanged"],["type","number","pbiInput","","formControlName","gradientMinValue","pbiTooltipPosition","below",1,"pbi-text-input",3,"placeholder","pbiTooltip","pbiTooltipShowDelay","pbiTooltipHideDelay"],[4,"ngIf"],["id","maximumSelectedOptionLabel","localize","ConditionalFormattingDialog_MaximumHeader","localizeTooltip","ConditionalFormattingDialog_MaximumHeader"],["formControlName","maximumSelectedOption","aria-labelledby","maximumSelectedOptionLabel"],["type","number","pbiInput","","formControlName","gradientMaxValue","pbiTooltipPosition","below",1,"pbi-text-input",3,"placeholder","pbiTooltip","pbiTooltipShowDelay","pbiTooltipHideDelay"],[1,"checkBoxSettings"],["id","diverging","formControlName","diverging","localizeTooltip","ConditionalFormattingDialogModern_Diverging",3,"label","localizeAttr"],["data-testid","gradient-value",1,"gradientValue"],[3,"colors"],["id","centerSelectedOptionLabel","localize","ConditionalFormattingDialog_CenterHeader","localizeTooltip","ConditionalFormattingDialog_CenterHeader"],["formControlName","centerSelectedOption","aria-labelledby","centerSelectedOptionLabel"],["type","number","pbiInput","","formControlName","gradientMidValue","pbiTooltipPosition","below",1,"pbi-text-input",3,"placeholder","pbiTooltip","pbiTooltipShowDelay","pbiTooltipHideDelay"],["type","number","pbiInput","","formControlName","dataBarsMinValue","pbiTooltipPosition","below",1,"pbi-text-input",3,"placeholder","pbiTooltip","pbiTooltipShowDelay","pbiTooltipHideDelay"],["type","number","pbiInput","","formControlName","dataBarsMaxValue","pbiTooltipPosition","below",1,"pbi-text-input",3,"placeholder","pbiTooltip","pbiTooltipShowDelay","pbiTooltipHideDelay"],[1,"sectionSettings","colorList"],["id","positiveColorLabel","localize","DataBarsDialog_PositiveBar"],["tabindex","-1","labelId","positiveColorLabel",1,"whiteTheme",3,"color","defaultColor","buttonHeight","colorChanged"],["id","negativeColorLabel","localize","DataBarsDialog_NegativeBar"],["tabindex","-1","labelId","negativeColorLabel",1,"whiteTheme",3,"color","defaultColor","buttonHeight","colorChanged"],["id","axisColorLabel","localize","DataBarsDialog_BarAxis"],["tabindex","-1","labelId","axisColorLabel",1,"whiteTheme",3,"color","defaultColor","buttonHeight","isNoFillItemSupported","colorChanged"],["id","diverging","formControlName","hideText","localizeTooltip","DataBarsDialog_HideText",3,"label","localizeAttr"],["id","iconSettingsSection",1,"flex","spaceAbove"],["id","iconLayout"],["id","iconLayoutLabel","localize","Visual_IconLayout","localizeTooltip","Visual_IconLayout"],["formControlName","iconLayout","aria-labelledby","iconLayoutLabel"],["id","iconVerticalAlignment"],["id","iconVerticalAlignmentLabel","localize","Visual_IconVerticalAlignment","localizeTooltip","Visual_IconVerticalAlignment"],["formControlName","iconVerticalAlignment","aria-labelledby","iconVerticalAlignmentLabel"],["id","iconSet",4,"ngIf"],["id","iconSet"],["localize","ConditionalFormattingDialog_RuleBased_IconStyleHeader","id","genericIconSet"],["tabindex","-1","labelId","genericIconSet",1,"whiteTheme",3,"iconSetId","onIconSetSelected"],[1,"flex-column","conditional","spaceAbove"],[1,"header"],["id","listActions"],["type","button",1,"pbi-fluent-small-button",3,"click"],[1,"glyphicon","pbi-glyph-sort","glyph-mini"],[3,"localize","localizeTooltip"],[1,"glyphicon","pbi-glyph-add","glyph-mini"],["localize","ConditionalFormattingDialog_RuleBased_RulesAdd","localizeTooltip","ConditionalFormattingDialog_RuleBased_RulesAdd"],["localize","ConditionalFormattingDialog_RuleBased_RulesTitle","localizeTooltip","ConditionalFormattingDialog_RuleBased_RulesTitle"],[1,"rulesContainer","spaceAbove"],["formArrayName","rules"],["class","ruleSettings",4,"ngFor","ngForOf"],[1,"ruleSettings"],[3,"formGroup","ngSwitch",4,"ngIf"],[3,"formGroup","ngSwitch"],[4,"ngSwitchCase"],["localize","ConditionalFormattingDialog_RuleBased_ConditionPostfix"],["class","whiteTheme","tabindex","-1","labelId","genericColor",3,"color","defaultColor","isNoFillItemSupported","buttonHeight","colorChanged",4,"ngIf"],["class","whiteTheme","labelId","genericIcon",3,"selectedIconId","iconChanged",4,"ngIf"],[1,"actionsContainer"],["localizeTooltip","ConditionalFormattingDialog_RuleBased_ConditionError",1,"glyphicon","glyph-small","pbi-glyph-info","error",3,"ngClass"],["role","button","localizeTooltip","ConditionalFormattingDialog_Case_Move_Up",1,"glyphicon","glyph-mini","pbi-glyph-drillup-nocircle",3,"ngClass","keydown","click"],["role","button","localizeTooltip","ConditionalFormattingDialog_Case_Move_Down",1,"glyphicon","glyph-mini","pbi-glyph-drilldowndisabled-nocircle",3,"ngClass","keydown","click"],["role","button","localizeTooltip","ConditionalFormattingDialog_Case_Delete",1,"glyphicon","glyph-mini","pbi-glyph-exit",3,"ngClass","keydown","click"],["localize","ConditionalFormattingDialog_RuleBased_ConditionPrefix"],["formControlName","lowerBoundOperator",1,"operator"],["formControlName","lowerBoundArgument","type","number","pbiTooltipPosition","below",1,"pbi-text-input","numeric-argument",3,"ngClass","localizeAttr","pbiTooltip"],["formControlName","lowerBoundArgumentKind",1,"argumentKind",3,"ngClass"],[3,"ngClass"],["localize","ConditionalFormattingDialog_RuleBased_ConditionSeparator"],["formControlName","upperBoundOperator",1,"operator"],["formControlName","upperBoundArgument","type","number","pbiTooltipPosition","below",1,"pbi-text-input","numeric-argument",3,"localizeAttr","pbiTooltip"],["formControlName","upperBoundArgumentKind",1,"argumentKind"],["formControlName","lowerBoundArgument","type","string","pbiTooltipPosition","below",1,"pbi-text-input","string-argument",3,"ngClass","localizeAttr","pbiTooltip"],["labelId","genericIcon",1,"whiteTheme",3,"selectedIconId","iconChanged"]],template:function(i,a){1&i&&(e.\u0275\u0275elementStart(0,"template-dialog"),e.\u0275\u0275template(1,yi,33,24,"form",0),e.\u0275\u0275elementEnd()),2&i&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",a.viewModel))},dependencies:[he.NgClass,he.NgForOf,he.NgIf,he.NgStyle,he.NgSwitch,he.NgSwitchCase,ft.J,vt.Z,kt,V._Y,V.Fj,V.wV,V.JJ,V.JL,V.sg,V.u,V.CE,wt.X,Dt.b,c.r,u.a,g.H,F.I,R.r,Q._,g.T,ie.v,ge.l,ye.bP,ye.ug,_e.V,Re.oO,he.AsyncPipe,rt.F],styles:["[_nghost-%COMP%]{--colorDialogForeground: var(--fluent-theme-neutral-primary-color);--colorDialogInputBorder: var(--fluent-theme-neutral-secondary-alt-color);--colorDialogInputBackground: var(--fluent-theme-white-color);--colorDialogInputBackgroundAlt: var(--fluent-theme-neutral-light-color);--colorDialogInputDisabled: var(--fluent-theme-neutral-tertiary-alt-color);--colorDialogInputError: var(--fluent-theme-error-dark-color);--colorDialogBackground: var(--globalColorWhite)}[data-legacy-theming=false]   [_nghost-%COMP%]{--colorDialogForeground: var(--colorNeutralForeground1);--colorDialogBackground: var(--colorNeutralBackground1);--colorDialogInputBorder: var(--colorNeutralStroke1);--colorDialogInputBackground: var(--colorNeutralBackground1);--colorDialogInputBackgroundAlt: var(--colorNeutralBackground2);--colorDialogInputDisabled: var(--colorNeutralForegroundDisabled);--colorDialogInputError: var(--colorDangerBorder2)}[_nghost-%COMP%]   .description[_ngcontent-%COMP%]{margin-top:0;font-size:var(--md-font-size, 14px);line-height:var(--md-font-size, 14px);color:var(--colorDialogForeground)}[_nghost-%COMP%]   h2[_ngcontent-%COMP%]{font-size:var(--sm-font-size, 12px);line-height:var(--sm-font-size, 12px);font-weight:400;color:var(--colorDialogForeground);margin-bottom:8px;margin-top:16px}[_nghost-%COMP%]   input[_ngcontent-%COMP%]{border:1px solid var(--colorDialogInputBorder);outline:0;padding:4px}[_nghost-%COMP%]   input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button, [_nghost-%COMP%]   input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;-moz-appearance:textfield;margin:0}[_nghost-%COMP%]   input[disabled][_ngcontent-%COMP%]:hover{border-color:var(--colorDialogInputBorder)}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]{border:0;margin:0;padding:0}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%]{font-size:var(--lg-font-size, 16px);margin-bottom:12px}[_nghost-%COMP%]   .sectionSettings[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:10px;margin-bottom:20px}[_nghost-%COMP%]   .sectionSettings[_ngcontent-%COMP%]   pbi-dropdown[_ngcontent-%COMP%]{margin-bottom:5px}[_nghost-%COMP%]   .sectionSettings[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:122px}[_nghost-%COMP%]   .checkBoxSettings[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]   .checkBoxSettings[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 5px 5px;font-size:var(--sm-font-size, 12px);cursor:pointer}[_nghost-%COMP%]   .checkBoxSettings[_ngcontent-%COMP%]   pbi-checkbox[_ngcontent-%COMP%]{margin-bottom:0;padding:2px}[_nghost-%COMP%]   theme-color-input[_ngcontent-%COMP%]{margin-left:4px}.conditionalFormattingFieldListContainer[_ngcontent-%COMP%]   pbi-field-list[_ngcontent-%COMP%]{width:264px;height:300px;background:var(--colorDialogInputBackground);border:1px solid var(--colorDialogInputBorder);padding:5px;position:absolute}[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;position:relative}[_nghost-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1;height:494px}[_nghost-%COMP%]   pbi-dropdown[_ngcontent-%COMP%]{width:276px}[_nghost-%COMP%]   .colorSettings[_ngcontent-%COMP%]   pbi-dropdown[_ngcontent-%COMP%]{width:224px}[_nghost-%COMP%]   section.flex[_ngcontent-%COMP%]{display:flex;flex-direction:row}[_nghost-%COMP%]   section.flex.space-between[_ngcontent-%COMP%]{justify-content:space-between}[_nghost-%COMP%]   section.flex[_ngcontent-%COMP%] > fieldset[_ngcontent-%COMP%]{margin-top:auto}[_nghost-%COMP%]   section.flex-column[_ngcontent-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   .spaceAbove[_ngcontent-%COMP%]{margin-top:12px}[_nghost-%COMP%]   .spaceBelow[_ngcontent-%COMP%]{margin-bottom:12px}[_nghost-%COMP%]   fieldset.conditionalFormattingMode[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset#totalMatching[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset.sourceField[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset.sourceSummarization[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset.nullColorStrategy[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset.barDirection[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset#iconLayout[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset#iconVerticalAlignment[_ngcontent-%COMP%]{position:relative;width:276px;margin-bottom:8px}[_nghost-%COMP%]   fieldset.conditionalFormattingMode[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset#totalMatching[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset.sourceField[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset.sourceSummarization[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset.nullColorStrategy[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset.barDirection[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset#iconLayout[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset#iconVerticalAlignment[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;margin-bottom:12px;display:block}[_nghost-%COMP%]   fieldset.conditionalFormattingMode[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset#totalMatching[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset.sourceField[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset.sourceSummarization[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset#iconLayout[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset#iconVerticalAlignment[_ngcontent-%COMP%]{margin-right:28px}[_nghost-%COMP%]   fieldset.nullColorStrategy[_ngcontent-%COMP%]{width:276px}[_nghost-%COMP%]   fieldset.nullColorStrategy[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{display:inline-flex;width:100%}[_nghost-%COMP%]   fieldset#iconSet[_ngcontent-%COMP%]{margin-bottom:12px}[_nghost-%COMP%]   .sectionSettings[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]{width:276px}[_nghost-%COMP%]   .sectionSettings[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{display:inline-flex;width:100%}[_nghost-%COMP%]   .sectionSettings[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]   input.ng-invalid[_ngcontent-%COMP%]{border:1px solid var(--colorDialogInputError)}[_nghost-%COMP%]   .sectionSettings.colorList[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%] > theme-color-input[_ngcontent-%COMP%]{margin:0}[_nghost-%COMP%]   section.gradientValue[_ngcontent-%COMP%]{border:1px solid var(--colorDialogInputBorder);display:block;height:25px;margin-top:20px;margin-right:8px}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.header[_ngcontent-%COMP%]{position:relative;height:35px;vertical-align:bottom}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.header[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%]{margin-bottom:0}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.header[_ngcontent-%COMP%]   #listActions[_ngcontent-%COMP%]{position:absolute;right:0;top:0;display:flex;flex-direction:row}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.header[_ngcontent-%COMP%]   #listActions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:80px;max-width:200px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;margin-right:8px;display:flex;align-items:center}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.header[_ngcontent-%COMP%]   #listActions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:5px}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.header[_ngcontent-%COMP%]   #listActions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-of-type{margin-right:0}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.rulesContainer[_ngcontent-%COMP%]{overflow-y:auto;overflow-x:hidden;font-size:12px;flex:1}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.rulesContainer[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.rulesContainer[_ngcontent-%COMP%]   section.ruleSettings[_ngcontent-%COMP%]:nth-of-type(odd){background:var(--colorDialogInputBackgroundAlt)}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.rulesContainer[_ngcontent-%COMP%]   section.ruleSettings[_ngcontent-%COMP%]{padding:3px 0}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.rulesContainer[_ngcontent-%COMP%]   section.ruleSettings[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:8px 4px}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.rulesContainer[_ngcontent-%COMP%]   section.ruleSettings[_ngcontent-%COMP%]   pbi-dropdown.operator[_ngcontent-%COMP%]{width:120px}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.rulesContainer[_ngcontent-%COMP%]   section.ruleSettings[_ngcontent-%COMP%]   input.numeric-argument[_ngcontent-%COMP%]{width:50px;margin-left:4px}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.rulesContainer[_ngcontent-%COMP%]   section.ruleSettings[_ngcontent-%COMP%]   input.string-argument[_ngcontent-%COMP%]{width:250px;margin-left:4px}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.rulesContainer[_ngcontent-%COMP%]   section.ruleSettings[_ngcontent-%COMP%]   pbi-dropdown.argumentKind[_ngcontent-%COMP%]{width:80px;margin-left:4px}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.rulesContainer[_ngcontent-%COMP%]   section.ruleSettings[_ngcontent-%COMP%]   input.argument.ng-invalid[_ngcontent-%COMP%]{border-color:var(--colorDialogInputError)}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.rulesContainer[_ngcontent-%COMP%]   section.ruleSettings[_ngcontent-%COMP%]   .colorpicker[_ngcontent-%COMP%]{background:white}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.rulesContainer[_ngcontent-%COMP%]   section.ruleSettings[_ngcontent-%COMP%]   section.actionsContainer[_ngcontent-%COMP%]{flex-grow:1;display:flex;justify-content:flex-end}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.rulesContainer[_ngcontent-%COMP%]   section.ruleSettings[_ngcontent-%COMP%]   section.actionsContainer[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin:6px 10px 6px 0;cursor:pointer}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.rulesContainer[_ngcontent-%COMP%]   section.ruleSettings[_ngcontent-%COMP%]   section.actionsContainer[_ngcontent-%COMP%]   i.disabled[_ngcontent-%COMP%]{color:var(--colorDialogInputDisabled);cursor:default}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.rulesContainer[_ngcontent-%COMP%]   section.ruleSettings[_ngcontent-%COMP%]   section.actionsContainer[_ngcontent-%COMP%]   i.pbi-glyph-info.error[_ngcontent-%COMP%]{color:var(--colorDialogInputError)}.container-stop-bottom[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;pointer-events:none}"],changeDetection:0}),n}(Je.w),Si=r(99786),_i=r(32208),Oi=r(27531),Mi=r(82156),xi=r(79061),jt=r(78963),Fi=r(42729),Pi=r(16973),Ii=r(47913),wi=r(6015),Di=r(63654),Ti=r(14525),Bi=r(16095),Ei=r(27037),Ai=r(52121),Li=function(){function o(){}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=e.\u0275\u0275defineInjector({providers:(0,y.__spreadArray)((0,y.__spreadArray)([],Oi.H,!0),[Ai.l6,Qe,He.D,it.y,nt.J,tt.p,Ne.AA,Ve.a,et.b,{provide:jt.W,useClass:jt.w},qe.x],!1),imports:[he.CommonModule,Fi.c.withManifest([{componentIdentifier:"ConditionalFormattingDialog",componentType:bi}]),_i.J,Si.FieldListModule,V.u5,V.UX,Mi.N,xi.v,l.p,wi.C,Ii.V,Di.X,Ti.g,Bi.Z,Ei.b,Pi.e]}),o}()},85287:function(le,H,r){r.d(H,{df:function(){return M},vB:function(){return P}});var y=r(41114),l="PBI.ExploreUIDialogs.SampleDatasetDialog",M=y.cx[l]=(0,y.b1)(l),b="PBI.EX.ApplyConditionalFormattingRules",P=y.cx[b]=(0,y.b1)(b)},99786:function(le,H,r){r.r(H),r.d(H,{FieldListModule:function(){return Dt}});var y=r(81337),l=r(32208),M=r(54834),b=r(70863),P=r(44529),I=r(59725),p=r(50423),B=r(23983),W=function(){function c(u){this.groupingDesignStateService=u}return c.prototype.dragStart=function(u){var g=u.flatNode.node;if(!(0,b.wb)(g.data)&&!(0,b.Ov)(g.data)){var F=(0,P.Sd)(g.data,this.groupingDesignStateService),R=M.ib.serializeExpr(F),Q=JSON.stringify({id:g.id,icon:g.icon,label:g.displayName,fieldExpr:R});u.sourceEvent.dataTransfer.setData(I.L$,Q)}},c.\u0275fac=function(g){return new(g||c)(p.\u0275\u0275inject(B.AA))},c.\u0275prov=p.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac}),c}(),w=r(40290),A=r(8590),D=r(21728),m=r(87879),C=r(94419),v=r(9738),h=r(58295),x=r(88315),z=r(9380),Z=r(11494),J=r(83008),U=r(39503),k=r(72262),Ce=r(28199),re=r(93215),ce=r(66890),ue=function(){function c(u,g,F,R,Q,ie,ge,ye,_e,Re,ke){var fe=this;this.featureSwitchService=u,this.eventBridge=g,this.aggrOpsService=F,this.dataSourcesService=R,this.modelService=Q,this.groupingDesignStateService=ie,this.visualAuthoringService=ge,this.explorationNavigationService=ye,this.selectionService=_e,this.fieldListCheckedService=Re,this.modelingSelectionService=ke,this.subscriptionManager=g.createChannelSubscriptionManager(),this.subscriptionManager.subscribe(A.oRp,function(){return fe.updateFieldListCheckFromSelectedVisual()}),this.subscriptionManager.subscribe(A.jCS,function(){return fe.updateFieldListCheckFromSelectedVisual()}),this.modelService.modelChange$.subscribe(function(){return fe.updateFieldListCheckFromSelectedVisual()}),this.subscriptionManager.subscribe(A.OPn,function(){return fe.modelingSelectionService.clear()}),this.subscriptionManager.subscribe(A.tRg,function(){fe.modelingSelectionService.clear(),fe.updateFieldListCheckFromSelectedVisual()}),this.subscriptionManager.subscribe(A.KD7,function(){fe.modelingSelectionService.clear(),fe.updateFieldListCheckFromSelectedVisual()})}return c.prototype.updateFieldListCheckFromSelectedVisual=function(){this.fieldListCheckedService.selectAll(this.getModelItemsFromSelectedVisual(this.modelService.model),!0)},c.prototype.addFieldToVisual=function(u){return(0,y.__awaiter)(this,void 0,void 0,function(){var g,F,R;return(0,y.__generator)(this,function(Q){switch(Q.label){case 0:return g=this.getFieldExpr(u),(F=D.UP.getSelectedVisual(this.selectionService))?(R=16===F.visibility,[4,this.visualAuthoringService.addFieldToVisual(g,this.dataSourcesService.get(),F,"CheckboxTickedInFieldList",R)]):[3,2];case 1:return[2,Q.sent()];case 2:return this.eventBridge.publishToChannel(A.Tyr,{expr:g,allowAggregate:!0,telemetrySource:0}),[2,!0]}})})},c.prototype.removeField=function(u){this.visualAuthoringService.removeFieldFromAllRoles(this.dataSourcesService.get(),this.getFieldExpr(u))},c.prototype.addToDrillTrhough=function(u){this.visualAuthoringService.addDrillthroughFilter(this.getFieldExpr(u),{container:this.explorationNavigationService.getCurrentSection(),scopeType:1},this.dataSourcesService.get(),!0)},c.prototype.canAddToFilter=function(u){return!(0,b.kb)(u)||!this.castToConceptualItem(u).schema.capabilities.limitMultiColumnFiltersToQueryGroupColumns},c.prototype.addReportLevelFilter=function(u){this.visualAuthoringService.addFilter(this.getFieldExpr(u),{container:this.explorationNavigationService.getCurrentExploration(),scopeType:2},this.dataSourcesService.get())},c.prototype.addPageLevelFilter=function(u){this.visualAuthoringService.addFilter(this.getFieldExpr(u),{container:this.explorationNavigationService.getCurrentSection(),scopeType:1},this.dataSourcesService.get())},c.prototype.addVisualLevelFilter=function(u,g){this.visualAuthoringService.addFilter(this.getFieldExpr(u),{container:g,scopeType:0},this.dataSourcesService.get())},c.prototype.getTopNVisualFilters=function(u){return this.visualAuthoringService.createVisualFilters(this.explorationNavigationService.getCurrentSection(),u,this.dataSourcesService.get(),this.modelService.schema).filter(function(g){return g.contract&&g.contract.type===w.vA.TopN})},c.prototype.addToTopNFilterValue=function(u,g){var F=this.getFieldExpr(u),R=(0,h.k)(F)?F:(0,C.m_)(F,this.aggrOpsService.defaultAggregate(F,this.modelService.schema,!0));this.eventBridge.publishToChannel(m.d,{filterViewModel:g,orderByField:R})},c.prototype.getModelItemsFromSelectedVisual=function(u){if(!u)return[];var g=[],F=D.UP.getSelectedVisual(this.selectionService);if(F&&F.config.singleVisual&&F.config.singleVisual.query&&F.config.singleVisual.query.defn)if(this.featureSwitchService.featureSwitches.fieldParameters)for(var Q=0,ie=F.config.singleVisual.query.getUniqueQueryFields();Q<ie.length;Q++)g.push.apply(g,u.findItems(ie[Q].expr));else for(var ye=0,_e=F.config.singleVisual.query.defn.select();ye<_e.length;ye++)g.push.apply(g,u.findItems(_e[ye].expr));return g},c.prototype.getFieldExpr=function(u){return(0,P.Sd)(this.castToConceptualItem(u),this.groupingDesignStateService)},c.prototype.castToConceptualItem=function(u){if(u instanceof x.Xx)return u;throw Error("invalid type passed to toConceptualItem")},c.\u0275fac=function(g){return new(g||c)(p.\u0275\u0275inject(z.vZ),p.\u0275\u0275inject(Z.J),p.\u0275\u0275inject(Ce.C),p.\u0275\u0275inject(J.D),p.\u0275\u0275inject(re.b),p.\u0275\u0275inject(B.AA),p.\u0275\u0275inject(ce.$8),p.\u0275\u0275inject(U.z),p.\u0275\u0275inject(k.z),p.\u0275\u0275inject(v.fc),p.\u0275\u0275inject(v.W6))},c.\u0275prov=p.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac}),c}(),Se=function(){function c(u){this.fieldListReportAuthoringService=u}return c.prototype.check=function(u){return(0,y.__awaiter)(this,void 0,void 0,function(){var g;return(0,y.__generator)(this,function(F){switch(F.label){case 0:return u.checked?(g=u.flatNode.node,[4,this.fieldListReportAuthoringService.addFieldToVisual(u.flatNode.node.data)]):[3,2];case 1:return g.checked=F.sent(),[3,3];case 2:u.flatNode.node.checked=!1,this.fieldListReportAuthoringService.removeField(u.flatNode.node.data),F.label=3;case 3:return[2]}})})},c.\u0275fac=function(g){return new(g||c)(p.\u0275\u0275inject(ue))},c.\u0275prov=p.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac}),c}(),q=r(64560),ne=function(c){return c.AddToDrillthrough="FieldListMenuItem_AddToDrillthrough",c}({}),Te={items:[{id:ne.AddToDrillthrough,type:q.iB.Button,text:"FieldListMenuItem_AddToDrillthrough",tooltip:"FieldListMenuItem_AddToDrillthrough"}]},Fe=function(){function c(u){this.fieldListReportAuthoringService=u}return c.prototype.getHandler=function(u){var g=this;return[ne.AddToDrillthrough,{execute:function(){return g.fieldListReportAuthoringService.addToDrillTrhough(u)}}]},c.\u0275fac=function(g){return new(g||c)(p.\u0275\u0275inject(ue))},c.\u0275prov=p.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac}),c}(),me=function(c){return c.AddToFilters="FieldListMenuItem_AddToFilters",c.AddToReportLevelFilters="FieldListMenuItem_ReportLevelFilters",c.AddToPageLevelFilters="FieldListMenuItem_PageLevelFilters",c.AddToVisualLevelFilters="FieldListMenuItem_VisualLevelFilters",c}({}),ae={items:[{id:me.AddToFilters,type:q.iB.SubMenu,text:"FieldListMenuItem_AddToFilters",tooltip:"FieldListMenuItem_AddToFilters",menu:{items:[{id:me.AddToVisualLevelFilters,type:q.iB.Button,text:"FieldListMenuItem_VisualLevelFilters",tooltip:"FieldListMenuItem_VisualLevelFilters"},{id:me.AddToPageLevelFilters,type:q.iB.Button,text:"FieldListMenuItem_PageLevelFilters",tooltip:"FieldListMenuItem_PageLevelFilters"},{id:me.AddToReportLevelFilters,type:q.iB.Button,text:"FieldListMenuItem_ReportLevelFilters",tooltip:"FieldListMenuItem_ReportLevelFilters"}]}}]},te=function(c){return c.AddToTopNFilters="FieldListMenuItem_AddToTopNByValue",c.AddToTopNFilter="AddToTopNFilter",c}({}),je={items:[{id:te.AddToTopNFilters,type:q.iB.SubMenu,text:"FieldListMenuItem_AddToTopNByValue",tooltip:"FieldListMenuItem_AddToTopNByValue"}]},Ke=function(){function c(u,g){this.selectionService=u,this.fieldListReportAuthoringService=g}return c.prototype.getHandlers=function(u){var g=this;if(!this.fieldListReportAuthoringService.canAddToFilter(u))return[];var F=[[me.AddToFilters,{execute:void 0}],[me.AddToReportLevelFilters,{execute:function(){return g.fieldListReportAuthoringService.addReportLevelFilter(u)}}],[me.AddToPageLevelFilters,{execute:function(){return g.fieldListReportAuthoringService.addPageLevelFilter(u)}}]],R=D.UP.getSelectedVisual(this.selectionService);return R&&(F.push([me.AddToVisualLevelFilters,{execute:function(){return g.fieldListReportAuthoringService.addVisualLevelFilter(u,R)}}]),F.push([te.AddToTopNFilters,{getSubItems:function(){return g.getTopNVisualFiltersMenuItems(R)},execute:void 0}]),F.push([te.AddToTopNFilter,{execute:function(ie){g.fieldListReportAuthoringService.addToTopNFilterValue(u,ie.menuItem.data)}}])),F},c.prototype.getTopNVisualFiltersMenuItems=function(u){return this.fieldListReportAuthoringService.getTopNVisualFilters(u).sort(function(g,F){return g.displayName.localeCompare(F.displayName)}).map(function(g){return{id:te.AddToTopNFilter,type:q.iB.Button,text:g.displayName,tooltip:g.displayName,data:g}})},c.\u0275fac=function(g){return new(g||c)(p.\u0275\u0275inject(k.z),p.\u0275\u0275inject(ue))},c.\u0275prov=p.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac}),c}(),Be=function(c){return c.AddToField="FieldListMenuItem_AddToField",c}({}),e={id:Be.AddToField,type:q.iB.Button,text:"FieldListMenuItem_AddToField",tooltip:"FieldListMenuItem_AddToField"},Ue=function(c){return c.Select="Select",c}({}),He={items:[e,{id:Ue.Select,type:q.iB.Button,text:"Select",tooltip:"Select",checkable:!1}]},We=r(81141),Ge=function(){function c(u,g){this.fieldListReportAuthoringService=u,this.checkSettingStrategy=g}return c.prototype.getHandlers=function(u){var g=this;return this.canAddToField(u)?[[Be.AddToField,{execute:function(R){return g.fieldListReportAuthoringService.addFieldToVisual(u)}}]]:[]},c.prototype.canAddToField=function(u){return!!this.checkSettingStrategy&&((0,b.t3)(u)||(0,b.kb)(u)||(0,b.y3)(u),this.checkSettingStrategy.isCheckable(u))},c.\u0275fac=function(g){return new(g||c)(p.\u0275\u0275inject(ue),p.\u0275\u0275inject(We.x,8))},c.\u0275prov=p.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac}),c}(),Ee=[Ke,Fe,Ge,function(){function c(u){this.modelingSelectionService=u}return c.prototype.getHandlers=function(u){var g=this;return[[Ue.Select,{execute:function(R){return g.modelingSelectionService.select(R.flatNode.node.data,!0)}}]]},c.\u0275fac=function(g){return new(g||c)(p.\u0275\u0275inject(v.W6))},c.\u0275prov=p.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac}),c}(),W,Se,ue],Pe=function(c){return c.ExpandAll="ExpandAll",c.CollapseAll="CollapseAll",c}({}),V={items:[{id:Pe.CollapseAll,type:q.iB.Button,text:"FieldListMenuItem_CollapseAll",tooltip:"FieldListMenuItem_CollapseAll"},{id:Pe.ExpandAll,type:q.iB.Button,text:"FieldListMenuItem_ExpandAll",tooltip:"FieldListMenuItem_ExpandAll"}]},st=r(72038),Ae=r(75096),Le=function(){function c(u){this.fieldListTreeService=u}return c.prototype.getHandlers=function(){var u=this;return[[Pe.ExpandAll,{executeMany:function(F,R){R.tree.expandAll(),u.fieldListTreeService.update()}}],[Pe.CollapseAll,{executeMany:function(F,R){R.tree.collapseAll(),u.fieldListTreeService.update()}}]]},c.\u0275fac=function(g){return new(g||c)(p.\u0275\u0275inject(Ae.p))},c.\u0275prov=p.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac}),c}(),dt=[He,V,ae,Te,je],Je=function(){function c(u,g,F,R,Q){this.menuFactory=u,this.expandCollapseMenuItemHandlers=g,this.checkMenuItemHandler=F,this.addToFiltersMenuItemHandler=R,this.addToDrillthroughItemHandler=Q,this.menuMode=q.Kb.Compact,this.activeContextMenuRef=void 0}return c.prototype.menuClick=function(u){},c.prototype.menuOpen=function(u){this.activeContextMenuRef=u.menuRef},c.prototype.menuClose=function(u){this.activeContextMenuRef=void 0},c.prototype.closeActiveMenu=function(){void 0!==this.activeContextMenuRef&&this.activeContextMenuRef.close()},c.prototype.getMenu=function(u){var g;return this.menuFactory.getMenu(u,dt,this.getItemMenuHandlers(null===(g=u.flatNode)||void 0===g?void 0:g.node.data))},c.prototype.menuItemClick=function(u){var g,F,R=this.getItemMenuHandlers(null===(g=u.flatNode)||void 0===g?void 0:g.node.data).get(u.menuItem.id);R.execute?R.execute(u):R.executeMany&&R.executeMany([null===(F=u.flatNode)||void 0===F?void 0:F.node.data],u)},c.prototype.getItemMenuHandlers=function(u){var g=[];return g.push.apply(g,this.expandCollapseMenuItemHandlers.getHandlers()),u&&(((0,b.t3)(u)||(0,b.kb)(u)||(0,b.y3)(u)||(0,b.ez)(u))&&g.push.apply(g,this.checkMenuItemHandler.getHandlers(u)),((0,b.t3)(u)||(0,b.kb)(u)||(0,b.ez)(u))&&(g.push.apply(g,this.addToFiltersMenuItemHandler.getHandlers(u)),g.push(this.addToDrillthroughItemHandler.getHandler(u)))),new Map(g)},c.\u0275fac=function(g){return new(g||c)(p.\u0275\u0275inject(st.E),p.\u0275\u0275inject(Le),p.\u0275\u0275inject(Ge),p.\u0275\u0275inject(Ke),p.\u0275\u0275inject(Fe))},c.\u0275prov=p.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac}),c}(),Xe=function(){function c(u){this.modelingSelectionService=u}return c.prototype.click=function(u){var g,F;u.sourceEvent.shiftKey?this.startRangeSelectionNode&&this.startRangeSelectionNode.parent===u.flatNode.node.parent&&this.modelingSelectionService.selectAll(this.findNodesRange(this.startRangeSelectionNode,u.flatNode.node,null===(F=null===(g=u?.tree)||void 0===g?void 0:g.search$)||void 0===F?void 0:F.value),!0):u.sourceEvent.ctrlKey?this.modelingSelectionService.isSelected(u.flatNode.node.data)?(this.startRangeSelectionNode=void 0,this.modelingSelectionService.deselect(u.flatNode.node.data)):(this.startRangeSelectionNode=u.flatNode.node,this.modelingSelectionService.select(u.flatNode.node.data,!1)):(this.startRangeSelectionNode=u.flatNode.node,this.modelingSelectionService.select(u.flatNode.node.data,!0))},c.prototype.findNodesRange=function(u,g,F){var R=u.parent.children.indexOf(u),Q=g.parent.children.indexOf(g),ie=u.parent.children.slice(Math.min(R,Q),Math.max(R,Q)+1).filter(function(ge){return!F||F.test(ge.displayName)}).map(function(ge){return ge.data});return R<=Q?ie:ie.reverse()},c.\u0275fac=function(g){return new(g||c)(p.\u0275\u0275inject(v.W6))},c.\u0275prov=p.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac}),c}(),ct=r(7779),ut=r(34763),Ye=r(14172),Ve=r(8538),Ze=r(29834),qe=r(50998),pt=r(29524),et=r(88023),Ne=r(72193),tt=r(72525),gt=r(412),mt=r(66014),ht=r(65005),it=r(58137),he=r(68082),ft=r(95867),vt=r(35510),Y=r(77476),Ct=r(59968);function yt(c,u){if(1&c){var g=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"div",1),p.\u0275\u0275element(1,"i",2),p.\u0275\u0275elementStart(2,"div",3),p.\u0275\u0275element(3,"span",4),p.\u0275\u0275elementStart(4,"button",5),p.\u0275\u0275listener("click",function(){p.\u0275\u0275restoreView(g);var R=p.\u0275\u0275nextContext();return p.\u0275\u0275resetView(R.getData())}),p.\u0275\u0275element(5,"div",6),p.\u0275\u0275elementEnd()()()}}var nt=function(){function c(u,g,F){this.gettingStartedService=u,this.commandStore=g,this.dataModelService=F,this.enabled=new vt.X(void 0),this.enabled$=this.enabled.asObservable()}return c.prototype.ngOnInit=function(){var u=this;this.modelStateSubscription=this.gettingStartedService.currentState$.subscribe(function(g){return u.updateModelState(g)})},c.prototype.ngOnDestroy=function(){this.modelStateSubscription&&this.modelStateSubscription.unsubscribe()},c.prototype.getData=function(){this.commandStore.DataImport.Connect.execute()},c.prototype.updateModelState=function(u){return(0,y.__awaiter)(this,void 0,void 0,function(){var g,F,R,Q;return(0,y.__generator)(this,function(ie){switch(ie.label){case 0:return this.dataModelService?[3,1]:(this.enabled.next(!1),[3,5]);case 1:return F=(g=this.enabled).next,(R=0===u)?(Q=ft.Ez,[4,this.dataModelService.getModelAuthoringCapabilities()]):[3,4];case 2:return[4,Q.apply(void 0,[ie.sent()])];case 3:R=ie.sent(),ie.label=4;case 4:F.apply(g,[R]),ie.label=5;case 5:return[2]}})})},c.\u0275fac=function(g){return new(g||c)(p.\u0275\u0275directiveInject(Ze.c),p.\u0275\u0275directiveInject(it.D),p.\u0275\u0275directiveInject(he.n,8))},c.\u0275cmp=p.\u0275\u0275defineComponent({type:c,selectors:[["field-list-watermark"]],decls:2,vars:3,consts:[["class","getDataHint",4,"ngIf"],[1,"getDataHint"],[1,"glyphicon","icon","glyph-med","pbi-glyph-table-group"],[1,"getDataText"],["id","dataNotLoadedYet","localize","Data_Not_Loaded_Yet"],["aria-labelledby","dataNotLoadedYet getDataLabel","tabindex","0",1,"pbi-internal-link",3,"click"],["id","getDataLabel","localize","GetDataMenu"]],template:function(g,F){1&g&&(p.\u0275\u0275template(0,yt,6,0,"div",0),p.\u0275\u0275pipe(1,"async")),2&g&&p.\u0275\u0275property("ngIf",p.\u0275\u0275pipeBind1(1,1,F.enabled$))},dependencies:[Y.NgIf,Ct.X,Y.AsyncPipe],styles:['[_nghost-%COMP%]{--no-data-table-icon-color: var(--gray-180);--no-data-text-color: var(--gray-140)}[data-legacy-theming=false]   [_nghost-%COMP%]{--no-data-table-icon-color: var(--colorNeutralForeground1);--no-data-text-color: var(--colorNeutralForeground2)}.getDataHint[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;padding:0 10%}.getDataHint[_ngcontent-%COMP%]   i.pbi-glyph-table-group[_ngcontent-%COMP%]{color:var(--no-data-table-icon-color);margin-top:16px}.getDataHint[_ngcontent-%COMP%]   .getDataText[_ngcontent-%COMP%]{text-align:center;margin-top:8px}.getDataHint[_ngcontent-%COMP%]   .getDataText[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-regular, 400);color:var(--no-data-text-color)}.getDataHint[_ngcontent-%COMP%]   .getDataText[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-semi-bold, 600);background:transparent;padding-left:4px}.getDataHint[_ngcontent-%COMP%]   .getDataText[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{cursor:pointer}'],changeDetection:0}),c}(),ot=function(){function c(u,g,F,R,Q,ie,ge,ye,_e,Re,ke,fe,Tt,Bt,Et,oe,At,Lt,Vt){this.modelService=g,this.modelingSelectionService=F,this.modelingCheckingService=R,this.modelChangeSelectionSynchronizer=Q,this.schemaItemActivationServiceSynchronizer=ie,this.captionSetting=ge,this.draggableSetting=ye,this.hiddenSetting=_e,this.inlineItemsSetting=Re,this.checkableSetting=ke,this.fieldListTreeService=fe,this.clickStrategy=Tt,this.menuStrategy=Bt,this.checkStrategy=Et,this.dragDropStrategy=oe,this.keyboardStrategy=At,this.tooltipStrategy=Lt,this.gettingStartedService=Vt,this.fieldListTree$=this.fieldListTreeService.fieldListTree$,this.fieldListOptions={click:this.clickStrategy,check:this.checkStrategy,menu:this.menuStrategy,dragDrop:this.dragDropStrategy,keyboard:this.keyboardStrategy,tooltip:this.tooltipStrategy},this.pbiTreeNodeSettingOptions={captionSetting:this.captionSetting,draggableSetting:this.draggableSetting,inlineItemsSetting:this.inlineItemsSetting,checkableSetting:this.checkableSetting,hiddenSetting:this.hiddenSetting},this.checkMode=I.kH.Multi,this.subscription=new ut.w,this.fieldListTreeService.modelToPbiTreeConverterOptions=this.pbiTreeNodeSettingOptions,this.subscriptionManager=u.createChannelSubscriptionManager()}return c.prototype.ngOnInit=function(){var u=this;this.subscriptionManager.subscribe(A.LE3,function(){return u.modelService.update(void 0)}),this.subscription.add(this.modelService.modelChange$.subscribe(function(g){return u.onModelChange(g)})),this.subscription.add(this.modelingSelectionService.selectionChanged.subscribe(function(g){return u.updateSelection(g)})),this.subscription.add(this.modelingCheckingService.selectionChanged.subscribe(function(g){return u.fieldListTreeService.updateChecked(g)})),this.loading$=this.gettingStartedService.currentState$.pipe((0,Ye.U)(function(g){return 1===g})),this.emptyModel$=this.gettingStartedService.currentState$.pipe((0,Ye.U)(function(g){return 0===g})),this.schemaItemActivationServiceSynchronizer.initialize(),this.modelService.update(void 0)},c.prototype.ngOnDestroy=function(){this.subscriptionManager.unsubscribeAll(),this.subscription.unsubscribe()},c.prototype.updateSelection=function(u){this.closeActiveMenus(),this.fieldListTreeService.updateSelected(u)},c.prototype.closeActiveMenus=function(){this.menuStrategy&&this.menuStrategy.closeActiveMenu()},c.prototype.onModelChange=function(u){this.modelChangeSelectionSynchronizer.update(u.model,u.appliedChanges),this.fieldListTreeService.setOrUpdateFieldListTreeModel(u.model,this.modelingSelectionService.selection,this.modelingCheckingService.selection)},c.\u0275fac=function(g){return new(g||c)(p.\u0275\u0275directiveInject(Z.J),p.\u0275\u0275directiveInject(re.b),p.\u0275\u0275directiveInject(v.W6),p.\u0275\u0275directiveInject(v.fc),p.\u0275\u0275directiveInject(qe.O),p.\u0275\u0275directiveInject(Ve.h),p.\u0275\u0275directiveInject(pt.B),p.\u0275\u0275directiveInject(et.F),p.\u0275\u0275directiveInject(Ne.J),p.\u0275\u0275directiveInject(tt.wt),p.\u0275\u0275directiveInject(We.x),p.\u0275\u0275directiveInject(Ae.p),p.\u0275\u0275directiveInject(Xe),p.\u0275\u0275directiveInject(Je),p.\u0275\u0275directiveInject(Se),p.\u0275\u0275directiveInject(W),p.\u0275\u0275directiveInject(gt.W),p.\u0275\u0275directiveInject(mt.Z),p.\u0275\u0275directiveInject(Ze.c))},c.\u0275cmp=p.\u0275\u0275defineComponent({type:c,selectors:[["field-list-container"]],features:[p.\u0275\u0275ProvidersFeature((0,y.__spreadArray)((0,y.__spreadArray)((0,y.__spreadArray)([],Ee,!0),ct.r,!0),[Xe,Je,Le,Ae.p],!1))],decls:6,vars:11,consts:[[1,"container",3,"click"],["focus-nav-mode","Browser","fluent","true",3,"fieldListTree","scrollSelectedItemIntoViewOnInit","checkMode","options","loading"],[1,"pbi-field-list-watermark"]],template:function(g,F){1&g&&(p.\u0275\u0275elementStart(0,"div",0),p.\u0275\u0275listener("click",function(Q){return Q.stopPropagation()}),p.\u0275\u0275elementStart(1,"pbi-field-list",1),p.\u0275\u0275pipe(2,"async"),p.\u0275\u0275pipe(3,"async"),p.\u0275\u0275pipe(4,"async"),p.\u0275\u0275element(5,"field-list-watermark",2),p.\u0275\u0275elementEnd()()),2&g&&(p.\u0275\u0275advance(1),p.\u0275\u0275property("fieldListTree",p.\u0275\u0275pipeBind1(2,5,F.emptyModel$)?null:p.\u0275\u0275pipeBind1(3,7,F.fieldListTree$))("scrollSelectedItemIntoViewOnInit",!0)("checkMode",F.checkMode)("options",F.fieldListOptions)("loading",p.\u0275\u0275pipeBind1(4,9,F.loading$)))},dependencies:[ht.l,nt,Y.AsyncPipe],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}pbi-field-list[_ngcontent-%COMP%]{flex:1;padding:0 4px}pbi-field-list[_ngcontent-%COMP%]     pbi-tree{margin-top:8px;padding-top:0!important}"],changeDetection:0}),c}(),rt=r(52910),bt=r(82156),ze=r(79061),St=r(34256),_t=function(){function c(){}return c.\u0275fac=function(g){return new(g||c)},c.\u0275mod=p.\u0275\u0275defineNgModule({type:c}),c.\u0275inj=p.\u0275\u0275defineInjector({imports:[Y.CommonModule,ze.v]}),c}(),Ot=r(41920),Mt=function(){function c(){}return c.\u0275fac=function(g){return new(g||c)},c.\u0275mod=p.\u0275\u0275defineNgModule({type:c}),c.\u0275inj=p.\u0275\u0275defineInjector({imports:[Y.CommonModule,ze.v]}),c}(),xt=r(72359),Ft=r(56545),Pt=r(63654),It=r(94841),wt=[{type:ot,componentId:"FieldListContainerComponentId"}],Dt=function(){function c(){}return c.\u0275fac=function(g){return new(g||c)},c.\u0275mod=p.\u0275\u0275defineNgModule({type:c}),c.\u0275inj=p.\u0275\u0275defineInjector({providers:(0,y.__spreadArray)((0,y.__spreadArray)((0,y.__spreadArray)([],St.q,!0),Ot.U,!0),[Ne.J],!1),imports:[Y.CommonModule,rt.O,l.J,bt.N.withManifests(wt),ze.v,It.b,xt.K,Ft.g,Pt.X,Mt,_t]}),c}()},7779:function(le,H,r){r.d(H,{r:function(){return I}});var y=r(23983),l=r(29834),M=r(93215),b=r(8538),P=r(34145),I=[y.eE,l.c,M.b,b.h,{provide:P.q,useExisting:M.b}]},93215:function(le,H,r){r.d(H,{b:function(){return w}});var y=r(81337),l=r(98209),M=r(8590),b=r(35510),P=r(50423),I=r(11494),p=r(83008),B=r(26898),W=r(65181),w=function(){function A(D,m,C,v){var h=this;this.conceptualSchemaProxy=m,this.dataSourcesService=C,this.localizationService=v,this.modelUpdates=new b.X({schema:void 0,model:void 0,appliedChanges:void 0}),this.subscriptionManager=D.createChannelSubscriptionManager(),this.subscriptionManager.subscribe(M.CCe,function(x,z){return h.update(z.result.changes)})}return A.prototype.update=function(D,m,C){return void 0===m&&(m=!0),void 0===C&&(C=!1),(0,y.__awaiter)(this,void 0,void 0,function(){var v,h;return(0,y.__generator)(this,function(z){switch(z.label){case 0:return this.dataSourcesService.get()?(m||this.conceptualSchemaProxy.clearCache(),[4,this.conceptualSchemaProxy.get(this.dataSourcesService.get())]):[3,2];case 1:(v=z.sent())&&(h=new l.O(this.localizationService).createModel(v,C)),z.label=2;case 2:return this.modelUpdates.next({schema:v,model:h,appliedChanges:D}),[2]}})})},Object.defineProperty(A.prototype,"modelChange$",{get:function(){return this.modelUpdates.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"model",{get:function(){return this.modelUpdates.value.model},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"schema",{get:function(){return this.modelUpdates.value.schema},enumerable:!1,configurable:!0}),A.\u0275fac=function(m){return new(m||A)(P.\u0275\u0275inject(I.J),P.\u0275\u0275inject(B.i),P.\u0275\u0275inject(p.D),P.\u0275\u0275inject(W.o))},A.\u0275prov=P.\u0275\u0275defineInjectable({token:A,factory:A.\u0275fac}),A}()},8538:function(le,H,r){r.d(H,{h:function(){return m}});var y=r(70863);function l(C){return{schema:C.schemaName,entity:(0,y.wb)(C)?C.name:(0,y.Om)(C)?C.table.name:(0,y.ez)(C)?C.hierarchy.table.name:void 0,hierarchy:(0,y.y3)(C)?C.name:(0,y.ez)(C)?C.hierarchy.name:void 0,hierarchyLevel:(0,y.ez)(C)?C.name:void 0,property:(0,y.wb)(C)||(0,y.y3)(C)||(0,y.ez)(C)||(0,y.Ov)(C)?void 0:C.name}}var P=r(8590),I=r(62458),p=r(9738),B=r(34763),W=r(50423),w=r(11494),A=r(39833),D=r(93215),m=function(){function C(v,h,x,z){this.schemaItemActivationService=h,this.modelService=x,this.modelingSelectionService=z,this.subscription=new B.w,this.subscriptionManager=v.createChannelSubscriptionManager()}return C.prototype.initialize=function(){var v=this;this.subscriptionManager.subscribe(P.$Bd,function(){return v.onSchemaItemActivationChanged()}),this.subscription.add(this.modelingSelectionService.selectionChanged.subscribe(function(h){return v.onSelectionChanged(h)}))},C.prototype.onSelectionChanged=function(v){if(0===v.length)this.schemaItemActivationService.clearActiveItem();else{var h=v[v.length-1];v.length>1&&this.modelingSelectionService.select(h,!0),this.schemaItemActivationService.setActiveItem(l(h))}},C.prototype.onSchemaItemActivationChanged=function(){if(!function(C,v){if(!v&&0===C.length)return!0;if(1===C.length&&v){var h=l(C[0]);return v.schema===h.schema&&v.entity===h.entity&&v.property===h.property&&v.hierarchy===h.hierarchy&&v.hierarchyLevel===h.hierarchyLevel}return!1}(this.modelingSelectionService.selection,this.schemaItemActivationService.getActiveItem())){var v=this.schemaItemActivationService.getActiveItem();if(v){var h=function(C,v){return v.hierarchyLevel?(0,y.xu)(C,v.schema,v.entity,v.hierarchy,v.hierarchyLevel):v.hierarchy?(0,y.ZG)(C,v.schema,v.entity,v.hierarchy):v.property?(0,y.Gz)(C,v.schema,v.entity,v.property)||(0,y.yo)(C,v.schema,v.entity,v.property):(0,y.AG)(C,v.entity)}(this.modelService.model,v);h?this.modelingSelectionService.select(h,!0):I.fF.assert(function(){return!!h},"onSchemaItemActivationChanged item not found in model")}else this.modelingSelectionService.clear()}},C.prototype.ngOnDestroy=function(){this.subscriptionManager.unsubscribeAll(),this.subscription.unsubscribe()},C.\u0275fac=function(h){return new(h||C)(W.\u0275\u0275inject(w.J),W.\u0275\u0275inject(A.WK),W.\u0275\u0275inject(D.b),W.\u0275\u0275inject(p.W6))},C.\u0275prov=W.\u0275\u0275defineInjectable({token:C,factory:C.\u0275fac}),C}()},58679:function(le,H,r){r.d(H,{I:function(){return v}});var y=r(65005),l=r(62458),M=r(9795),b=r(59017),P=r(59973),I=r(14172),p=r(81905),B=r(83317),W=r(48787),w=r(50423),A=r(84354),D=function(){function h(x){this.pbiDropdownService=x,this.isOpen$=this.pbiDropdownService.select$("open");var z=this.pbiDropdownService.select$("dropdownItems"),Z=this.pbiDropdownService.select$("overlayRef"),J=z.pipe((0,P.h)(function(k){return!!k}),(0,I.U)(function(k){return l.fF.assert(function(){return 1===k.length},"Expected 1 FieldListComponent"),k.first})),U=J.pipe((0,p.w)(function(k){return k.onFirstRenderComplete}));(0,b.aj)([this.isOpen$,Z,J,U]).pipe((0,B.R)(this.pbiDropdownService.onDestroy$),(0,P.h)(function(k){var re=k[1],ce=k[2];return k[0]&&!!re?.overlayRef.overlayElement&&!!ce})).subscribe(function(k){k[2].focusSearchBox()})}return h.prototype.buttonKeydown=function(x){var z=this;this.isOpen$.pipe((0,W.q)(1)).subscribe(function(Z){Z||(0,M.Wl)(x.keyCode)&&(z.pbiDropdownService.toggleOpenState(),x.preventDefault())})},h.\u0275fac=function(z){return new(z||h)(w.\u0275\u0275inject(A.S))},h.\u0275prov=w.\u0275\u0275defineInjectable({token:h,factory:h.\u0275fac}),h}(),m=r(26333),C=r(31343),v=function(){function h(x,z){this.pbiDropdownService=x,this.strategy=z}return h.prototype.ngAfterViewInit=function(){var x=this;(0,m.x)([{strategy:this.strategy,dropdownItems:this.dropdownItems}],C.N).subscribe(function(z){x.pbiDropdownService.updateState(z)})},h.\u0275fac=function(z){return new(z||h)(w.\u0275\u0275directiveInject(A.S),w.\u0275\u0275directiveInject(D))},h.\u0275dir=w.\u0275\u0275defineDirective({type:h,selectors:[["pbi-dropdown","dropdown-type","field-list"]],contentQueries:function(z,Z,J){var U;(1&z&&w.\u0275\u0275contentQuery(J,y.l,5),2&z)&&(w.\u0275\u0275queryRefresh(U=w.\u0275\u0275loadQuery())&&(Z.dropdownItems=U))},features:[w.\u0275\u0275ProvidersFeature([D])]}),h}()},65005:function(le,H,r){r.d(H,{l:function(){return me}});var y=r(81337),l=r(50423),M=r(48787),b=r(30794),P=r(37196),I=[],p=r(77476),B=r(68070),W=r(89237);function w(N,X){1&N&&l.\u0275\u0275element(0,"div",7)}function A(N,X){1&N&&(l.\u0275\u0275elementStart(0,"div",8),l.\u0275\u0275element(1,"div",9)(2,"div",10),l.\u0275\u0275elementEnd())}function D(N,X){1&N&&(l.\u0275\u0275elementStart(0,"div",11),l.\u0275\u0275element(1,"div",12),l.\u0275\u0275elementStart(2,"div",13),l.\u0275\u0275element(3,"div",14)(4,"div",15),l.\u0275\u0275elementEnd()())}function m(N,X){if(1&N&&(l.\u0275\u0275elementContainerStart(0,3),l.\u0275\u0275template(1,w,1,0,"div",4),l.\u0275\u0275template(2,A,3,0,"div",5),l.\u0275\u0275template(3,D,5,0,"div",6),l.\u0275\u0275elementContainerEnd()),2&N){var j=X.$implicit,G=l.\u0275\u0275nextContext(2);l.\u0275\u0275property("ngSwitch",j),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngSwitchCase",G.largeBarType),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngSwitchCase",G.multipleBarType),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngSwitchCase",G.multipleSmallLargeType)}}function C(N,X){if(1&N&&(l.\u0275\u0275elementStart(0,"div",1),l.\u0275\u0275template(1,m,4,4,"ng-container",2),l.\u0275\u0275elementEnd()),2&N){var j=l.\u0275\u0275nextContext();l.\u0275\u0275property("ngStyle",j.barsStyle),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngForOf",j.barsProperties.bars)}}var J=function(){function N(){this.largeBarType=0,this.multipleBarType=1,this.multipleSmallLargeType=2}return N.prototype.ngOnChanges=function(){this.barsProperties&&(this.barsStyle={height:"".concat((this.barsProperties.height+8)*this.barsProperties.bars.length,"px")})},N.\u0275fac=function(j){return new(j||N)},N.\u0275cmp=l.\u0275\u0275defineComponent({type:N,selectors:[["shimmering-bars"]],inputs:{barsProperties:"barsProperties"},features:[l.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[["class","bars",3,"ngStyle",4,"ngIf"],[1,"bars",3,"ngStyle"],[3,"ngSwitch",4,"ngFor","ngForOf"],[3,"ngSwitch"],["class","largerLoadingBar animate",4,"ngSwitchCase"],["class","multipleBars",4,"ngSwitchCase"],["class","multipleSmallLarge",4,"ngSwitchCase"],[1,"largerLoadingBar","animate"],[1,"multipleBars"],[1,"miniLoadingBar","animate"],[1,"smallerLoadingBar","animate"],[1,"multipleSmallLarge"],[1,"shimmerBox","animate"],[1,"smallLargeBarContainer"],[1,"upperLoadingBar","animate"],[1,"lowerLoadingBar","animate"]],template:function(j,G){1&j&&l.\u0275\u0275template(0,C,2,2,"div",0),2&j&&l.\u0275\u0275property("ngIf",G.barsProperties)},dependencies:[p.NgForOf,p.NgIf,p.NgStyle,p.NgSwitch,p.NgSwitchCase],styles:['[_nghost-%COMP%]{--shimmer-background-color: var(--gray-20);--shimmer-animate1: var(--gray-30);--shimmer-animate2: var(--gray-50)}[data-legacy-theming=false]   [_nghost-%COMP%]{--shimmer-background-color: var(--colorNeutralBackground3);--shimmer-animate1: var(--colorNeutralBackground3Hover);--shimmer-animate2: var(--colorNeutralBackground3Pressed)}.bars[_ngcontent-%COMP%]{display:flex;flex-direction:column}.largerLoadingBar[_ngcontent-%COMP%]{border-radius:2px;flex-grow:1;background:var(--shimmer-background-color)}html:not([dir="rtl"])[_nghost-%COMP%]   .largerLoadingBar[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .largerLoadingBar[_ngcontent-%COMP%]{margin:4px 8px}html[dir="rtl"][_nghost-%COMP%]   .largerLoadingBar[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .largerLoadingBar[_ngcontent-%COMP%]{margin:4px 8px}.multipleBars[_ngcontent-%COMP%]{display:flex;align-items:center;flex-grow:1}html:not([dir="rtl"])[_nghost-%COMP%]   .multipleBars[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .multipleBars[_ngcontent-%COMP%]{margin:4px 8px}html[dir="rtl"][_nghost-%COMP%]   .multipleBars[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .multipleBars[_ngcontent-%COMP%]{margin:4px 8px}.miniLoadingBar[_ngcontent-%COMP%]{border-radius:2px;height:60%;width:10%;background:var(--shimmer-background-color)}html:not([dir="rtl"])[_nghost-%COMP%]   .miniLoadingBar[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .miniLoadingBar[_ngcontent-%COMP%]{margin-right:4px}html[dir="rtl"][_nghost-%COMP%]   .miniLoadingBar[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .miniLoadingBar[_ngcontent-%COMP%]{margin-left:4px}.smallerLoadingBar[_ngcontent-%COMP%]{border-radius:2px;height:80%;width:100%;background:var(--shimmer-background-color)}html:not([dir="rtl"])[_nghost-%COMP%]   .smallerLoadingBar[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .smallerLoadingBar[_ngcontent-%COMP%]{margin-left:4px}html[dir="rtl"][_nghost-%COMP%]   .smallerLoadingBar[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .smallerLoadingBar[_ngcontent-%COMP%]{margin-right:4px}.multipleSmallLarge[_ngcontent-%COMP%]{display:flex;flex-grow:1;padding:10px 9px}html:not([dir="rtl"])[_nghost-%COMP%]   .multipleSmallLarge[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .multipleSmallLarge[_ngcontent-%COMP%]{margin:4px 8px}html[dir="rtl"][_nghost-%COMP%]   .multipleSmallLarge[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .multipleSmallLarge[_ngcontent-%COMP%]{margin:4px 8px}.upperLoadingBar[_ngcontent-%COMP%]{border-radius:2px;height:65%;width:49%;background:var(--shimmer-background-color)}html:not([dir="rtl"])[_nghost-%COMP%]   .upperLoadingBar[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .upperLoadingBar[_ngcontent-%COMP%]{margin:0 4px 11px 0}html[dir="rtl"][_nghost-%COMP%]   .upperLoadingBar[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .upperLoadingBar[_ngcontent-%COMP%]{margin:0 0 11px 4px}.lowerLoadingBar[_ngcontent-%COMP%]{border-radius:2px;height:65%;width:100%;background:var(--shimmer-background-color)}.shimmerBox[_ngcontent-%COMP%]{background:var(--shimmer-background-color);border-radius:2px;height:32px;width:32px}.smallLargeBarContainer[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;max-width:167px}html:not([dir="rtl"])[_nghost-%COMP%]   .smallLargeBarContainer[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .smallLargeBarContainer[_ngcontent-%COMP%]{margin:4px 0 2.42px 13px}html[dir="rtl"][_nghost-%COMP%]   .smallLargeBarContainer[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .smallLargeBarContainer[_ngcontent-%COMP%]{margin:4px 13px 2.42px 0}.animate[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_shimmer 5s infinite linear;background:linear-gradient(270deg,var(--shimmer-animate1) 0%,var(--shimmer-animate2) 50%,var(--shimmer-animate1) 100%);background-size:250% 100%}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:250% 0}to{background-position:-250% 0}}'],changeDetection:0}),N}(),U=r(85102),k=["pbiTree"];function Ce(N,X){if(1&N){var j=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"tri-search-box",5),l.\u0275\u0275listener("value",function(te){l.\u0275\u0275restoreView(j);var pe=l.\u0275\u0275nextContext();return l.\u0275\u0275resetView(pe.search$.next(te))}),l.\u0275\u0275pipe(1,"localize"),l.\u0275\u0275pipe(2,"localize"),l.\u0275\u0275elementEnd()}if(2&N){var G=l.\u0275\u0275nextContext();l.\u0275\u0275property("currentInputValue",G.searchText||"")("placeholderText",l.\u0275\u0275pipeBind1(2,8,"SearchBox_Text"))("fluentTheme",!0)("compact",!0)("fullWidth",!0),l.\u0275\u0275attribute("aria-label",l.\u0275\u0275pipeBind1(1,6,"SearchBox_Text"))}}function re(N,X){if(1&N){var j=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"pbi-search-box")(1,"input",6),l.\u0275\u0275listener("input",function(te){l.\u0275\u0275restoreView(j);var pe=l.\u0275\u0275nextContext();return l.\u0275\u0275resetView(pe.search$.next(te.target.value))}),l.\u0275\u0275pipe(2,"localize"),l.\u0275\u0275pipe(3,"localize"),l.\u0275\u0275elementEnd()()}if(2&N){var G=l.\u0275\u0275nextContext();l.\u0275\u0275advance(1),l.\u0275\u0275property("value",G.searchText||"")("placeholder",l.\u0275\u0275pipeBind1(3,5,"SearchBox_Text")),l.\u0275\u0275attribute("aria-label",l.\u0275\u0275pipeBind1(2,3,"SearchBox_Text"))}}function ce(N,X){if(1&N&&(l.\u0275\u0275elementContainerStart(0),l.\u0275\u0275element(1,"shimmering-bars",7),l.\u0275\u0275elementContainerEnd()),2&N){var j=l.\u0275\u0275nextContext();l.\u0275\u0275advance(1),l.\u0275\u0275property("barsProperties",j.shimmeringBars)}}function ue(N,X){if(1&N){var j=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"pbi-tree",12,13),l.\u0275\u0275listener("onNodeClick",function(te){l.\u0275\u0275restoreView(j);var pe=l.\u0275\u0275nextContext(2);return l.\u0275\u0275resetView(pe.onNodeClick.emit(te))})("onNodeCheck",function(te){l.\u0275\u0275restoreView(j);var pe=l.\u0275\u0275nextContext(2);return l.\u0275\u0275resetView(pe.onNodeCheck.emit(te))})("onNodeExpansionToggle",function(te){l.\u0275\u0275restoreView(j);var pe=l.\u0275\u0275nextContext(2);return l.\u0275\u0275resetView(pe.onNodeExpansionToggle.emit(te))})("onFirstRender",function(){l.\u0275\u0275restoreView(j);var te=l.\u0275\u0275nextContext(2);return l.\u0275\u0275resetView(te.onFirstRender())}),l.\u0275\u0275pipe(2,"async"),l.\u0275\u0275elementEnd()}if(2&N){var G=l.\u0275\u0275nextContext(2);l.\u0275\u0275property("tree",G.fieldListTree)("search",l.\u0275\u0275pipeBind1(2,5,G.search$))("hasHighlights",G.hasHighlights)("checkMode",G.checkMode)("options",G._options)}}function Se(N,X){1&N&&l.\u0275\u0275projection(0,2)}function q(N,X){if(1&N&&(l.\u0275\u0275elementStart(0,"div",8),l.\u0275\u0275element(1,"div",9),l.\u0275\u0275elementEnd(),l.\u0275\u0275template(2,ue,3,7,"pbi-tree",10),l.\u0275\u0275template(3,Se,1,0,"ng-template",null,11,l.\u0275\u0275templateRefExtractor)),2&N){var j=l.\u0275\u0275reference(4),G=l.\u0275\u0275nextContext();l.\u0275\u0275advance(2),l.\u0275\u0275property("ngIf",G.fieldListTree)("ngIfElse",j)}}var ne=[[["",8,"pbi-field-list-perspective-header"]],[["",8,"pbi-field-list-header"]],[["",8,"pbi-field-list-watermark"]]],De=[".pbi-field-list-perspective-header",".pbi-field-list-header",".pbi-field-list-watermark"],Fe={height:24,bars:[0,1,1,0,0]},me=function(){function N(){this.hasHighlights=!1,this.loading=!1,this.shimmeringBars=Fe,this.defaultOptions={},this._options=this.defaultOptions,this.onNodeExpansionToggle=new l.EventEmitter,this.onNodeClick=new l.EventEmitter,this.onNodeCheck=new l.EventEmitter,this.onFirstRenderComplete=new l.EventEmitter,this.handleFieldListTreeHeightDiff=new l.EventEmitter,this.search$=new b.xQ}return Object.defineProperty(N.prototype,"options",{set:function(j){this._options=(0,y.__assign)((0,y.__assign)({},this.defaultOptions),j)},enumerable:!1,configurable:!0}),N.prototype.ngOnInit=function(){var X=this;this.focusSearchBoxOnFirstRenderComplete&&this.onFirstRenderComplete.pipe((0,M.q)(1)).subscribe(function(){return X.focusSearchBox()})},N.prototype.onFirstRender=function(){var X=this.getFieldListTreeHeightDiff();this.handleFieldListTreeHeightDiff.emit(X),this.scrollSelectedItemIntoViewOnInit&&this.pbiTree.scrollToFirstSelectedNode(),this.onFirstRenderComplete.emit()},N.prototype.focusSearchBox=function(){$(".field-list-search-container input").trigger("focus")},N.prototype.getFieldListTreeHeightDiff=function(){return this.pbiTree.getTreeHeight()+2-this.pbiTreeElementRef.nativeElement.getBoundingClientRect().height},N.\u0275fac=function(j){return new(j||N)},N.\u0275cmp=l.\u0275\u0275defineComponent({type:N,selectors:[["pbi-field-list"]],viewQuery:function(j,G){if(1&j&&(l.\u0275\u0275viewQuery(P.u,5),l.\u0275\u0275viewQuery(k,5,l.ElementRef)),2&j){var ae=void 0;l.\u0275\u0275queryRefresh(ae=l.\u0275\u0275loadQuery())&&(G.pbiTree=ae.first),l.\u0275\u0275queryRefresh(ae=l.\u0275\u0275loadQuery())&&(G.pbiTreeElementRef=ae.first)}},inputs:{fieldListTree:"fieldListTree",scrollSelectedItemIntoViewOnInit:"scrollSelectedItemIntoViewOnInit",checkMode:"checkMode",hasHighlights:"hasHighlights",loading:"loading",searchText:"searchText",focusSearchBoxOnFirstRenderComplete:"focusSearchBoxOnFirstRenderComplete",fluent:"fluent",options:"options"},outputs:{onNodeExpansionToggle:"onNodeExpansionToggle",onNodeClick:"onNodeClick",onNodeCheck:"onNodeCheck",onFirstRenderComplete:"onFirstRenderComplete",handleFieldListTreeHeightDiff:"handleFieldListTreeHeightDiff"},features:[l.\u0275\u0275ProvidersFeature(I)],ngContentSelectors:De,decls:8,vars:4,consts:[["data-tutorial-target","search-box",1,"field-list-search-container"],["data-testid","search-bar-input",3,"currentInputValue","placeholderText","fluentTheme","compact","fullWidth","value",4,"ngIf"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["loaded",""],["data-testid","search-bar-input",3,"currentInputValue","placeholderText","fluentTheme","compact","fullWidth","value"],["pbiSearchInput","","data-testid","search-bar-input",1,"pbi-focus-outline",3,"value","placeholder","input"],[3,"barsProperties"],[1,"tutorial-target-container"],["data-tutorial-target","data-tree"],["data-testid","data-tree",3,"tree","search","hasHighlights","checkMode","options","onNodeClick","onNodeCheck","onNodeExpansionToggle","onFirstRender",4,"ngIf","ngIfElse"],["watermark",""],["data-testid","data-tree",3,"tree","search","hasHighlights","checkMode","options","onNodeClick","onNodeCheck","onNodeExpansionToggle","onFirstRender"],["pbiTree",""]],template:function(j,G){if(1&j&&(l.\u0275\u0275projectionDef(ne),l.\u0275\u0275elementStart(0,"div",0),l.\u0275\u0275template(1,Ce,3,10,"tri-search-box",1),l.\u0275\u0275template(2,re,4,7,"pbi-search-box",2),l.\u0275\u0275elementEnd(),l.\u0275\u0275projection(3),l.\u0275\u0275projection(4,1),l.\u0275\u0275template(5,ce,2,1,"ng-container",3),l.\u0275\u0275template(6,q,5,2,"ng-template",null,4,l.\u0275\u0275templateRefExtractor)),2&j){var ae=l.\u0275\u0275reference(7);l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",G.fluent),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",!G.fluent),l.\u0275\u0275advance(3),l.\u0275\u0275property("ngIf",G.loading)("ngIfElse",ae)}},dependencies:[p.NgIf,B.a,B.p,W.U,P.u,J,p.AsyncPipe,U.F],styles:["[_nghost-%COMP%]{height:100%;display:flex;flex-direction:column}pbi-tree[_ngcontent-%COMP%]{margin-top:9px;height:100%;display:block;overflow:hidden}.tutorial-target-container[_ngcontent-%COMP%]{position:relative;visibility:hidden;height:0;width:0}.tutorial-target-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;top:20px;visibility:hidden;height:0;width:0}"],changeDetection:0}),N}()},45074:function(le,H,r){r.d(H,{bP:function(){return W},nm:function(){return p},uC:function(){return B},ug:function(){return I}});var y=r(4437),l=r(50423),M=[[["","pbiLabel",""]],[["","pbiInput",""]],[["","pbiInputButton",""]],[["","pbiInputError",""]]],b=["[pbiLabel]","[pbiInput]","[pbiInputButton]","[pbiInputError]"],P=0,I=function(){function w(A,D){this.elementRef=A,this.formField=D}return w.\u0275fac=function(D){return new(D||w)(l.\u0275\u0275directiveInject(l.ElementRef),l.\u0275\u0275directiveInject((0,l.forwardRef)(function(){return W})))},w.\u0275dir=l.\u0275\u0275defineDirective({type:w,selectors:[["","pbiInput",""]],hostAttrs:["autocomplete","off"],hostVars:3,hostBindings:function(D,m){2&D&&l.\u0275\u0275attribute("aria-required",m.required||null)("aria-describedby",null==m.formField.error?null:m.formField.error.id)("aria-invalid",m.formField.error?"true":"false")},inputs:{required:"required"}}),w}(),p=function(){function w(A,D){this.elementRef=A,this.formField=D}return w.\u0275fac=function(D){return new(D||w)(l.\u0275\u0275directiveInject(l.ElementRef),l.\u0275\u0275directiveInject((0,l.forwardRef)(function(){return W})))},w.\u0275dir=l.\u0275\u0275defineDirective({type:w,selectors:[["","pbiLabel",""]],hostVars:2,hostBindings:function(D,m){2&D&&l.\u0275\u0275classProp("pbi-label-required",null!=m.formField.input.required)}}),w}(),B=function(){function w(){this.id="pbi-input-error-id-".concat(P++)}return w.\u0275fac=function(D){return new(D||w)},w.\u0275dir=l.\u0275\u0275defineDirective({type:w,selectors:[["","pbiInputError",""]],hostVars:3,hostBindings:function(D,m){2&D&&(l.\u0275\u0275attribute("id",m.id),l.\u0275\u0275classProp("pbi-input-error",!0))}}),w}(),W=function(){function w(A){this.renderer=A,this._compact=!1}return Object.defineProperty(w.prototype,"compact",{get:function(){return this._compact},set:function(D){this._compact=(0,y.Ig)(D)},enumerable:!1,configurable:!0}),w.prototype.ngAfterContentInit=function(){if(this.input&&this.label){var A="pbi-input-id-".concat(P++);this.renderer.setAttribute(this.input.elementRef.nativeElement,"id",A),this.renderer.setAttribute(this.label.elementRef.nativeElement,"for",A)}},w.\u0275fac=function(D){return new(D||w)(l.\u0275\u0275directiveInject(l.Renderer2))},w.\u0275cmp=l.\u0275\u0275defineComponent({type:w,selectors:[["pbi-form-field"]],contentQueries:function(D,m,C){if(1&D&&(l.\u0275\u0275contentQuery(C,I,5),l.\u0275\u0275contentQuery(C,p,5),l.\u0275\u0275contentQuery(C,B,5)),2&D){var v=void 0;l.\u0275\u0275queryRefresh(v=l.\u0275\u0275loadQuery())&&(m.input=v.first),l.\u0275\u0275queryRefresh(v=l.\u0275\u0275loadQuery())&&(m.label=v.first),l.\u0275\u0275queryRefresh(v=l.\u0275\u0275loadQuery())&&(m.error=v.first)}},hostVars:2,hostBindings:function(D,m){2&D&&l.\u0275\u0275classProp("pbi-compact-form-field",m.compact)},inputs:{compact:"compact"},ngContentSelectors:b,decls:5,vars:0,consts:[[1,"controls"]],template:function(D,m){1&D&&(l.\u0275\u0275projectionDef(M),l.\u0275\u0275projection(0),l.\u0275\u0275elementStart(1,"div",0),l.\u0275\u0275projection(2,1),l.\u0275\u0275projection(3,2),l.\u0275\u0275elementEnd(),l.\u0275\u0275projection(4,3))},styles:['[_nghost-%COMP%]{display:flex;flex-direction:column;--input-border-color: var(--gray-110);--input-foreground: var(--gray-140);--disabled-input-background: var(--gray-20);--disabled-input-border-color: var(--gray-60);--disabled-input-foreground: var(--gray-90);--focused-input-border-color: var(--gray-130);--focused-input-foreground: var(--gray-180);--error-color: var(--fluent-theme-error-dark-color)}[data-legacy-theming=false]   [_nghost-%COMP%]{--input-border-color: var(--colorNeutralStroke1);--input-foreground: var(--colorNeutralForeground1);--disabled-input-background: var(--colorNeutralBackgroundDisabled);--disabled-input-border-color: var(--colorNeutralStrokeDisabled);--disabled-input-foreground: var(--colorNeutralForegroundDisabled);--focused-input-border-color: var(--colorNeutralStrokeFocus2);--focused-input-foreground: var(--colorNeutralForeground1);--error-color: var(--fluent-theme-error-dark-color)}.pbi-form-field-inline[_nghost-%COMP%] {flex-direction:row;align-items:center;justify-content:space-between}.pbi-form-field-inline[_nghost-%COMP%]  label{margin:0 8px 0 0}.pbi-form-field-inline[_nghost-%COMP%]  .controls{flex-grow:1;justify-content:flex-end}.pbi-compact-form-field[_nghost-%COMP%]  label{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-regular, 400)}.pbi-compact-form-field[_nghost-%COMP%]  input{height:28px;padding:4px 6px}.pbi-compact-form-field[_nghost-%COMP%]  textarea{padding:4px 6px}[_nghost-%COMP%]  *{box-sizing:border-box}[_nghost-%COMP%]  label{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-semi-bold, 600);margin:0 0 4px}[_nghost-%COMP%]  label.pbi-label-required:after{content:"*";margin-left:4px;color:var(--error-color)}[_nghost-%COMP%]  .controls{display:flex}[_nghost-%COMP%]  .controls>*:not(:last-child){margin-right:8px}[_nghost-%COMP%]  input{height:32px}[_nghost-%COMP%]  textarea{resize:none}[_nghost-%COMP%]  input, [_nghost-%COMP%]  textarea{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);width:100%;border-radius:2px;border:1px solid var(--input-border-color);color:var(--input-foreground);outline:none;padding:8px 6px}[_nghost-%COMP%]  input[disabled], [_nghost-%COMP%]  textarea[disabled], [_nghost-%COMP%]  input[aria-disabled=true], [_nghost-%COMP%]  textarea[aria-disabled=true]{background-color:var(--disabled-input-background);border-color:var(--disabled-input-border-color);color:var(--disabled-input-foreground)}[_nghost-%COMP%]  input:focus, [_nghost-%COMP%]  textarea:focus{border-color:var(--focused-input-border-color);color:var(--focused-input-foreground)}[_nghost-%COMP%]  [pbiInput][aria-invalid=true]{border-color:var(--error-color)}[_nghost-%COMP%]  .pbi-input-error{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-regular, 400);margin:4px 0 0;color:var(--error-color)}'],changeDetection:0}),w}()}}]);