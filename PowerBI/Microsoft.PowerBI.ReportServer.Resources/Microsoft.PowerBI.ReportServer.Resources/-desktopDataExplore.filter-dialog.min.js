"use strict";(self.webpackChunkdesktopDataExplore=self.webpackChunkdesktopDataExplore||[]).push([["filter-dialog"],{37599:function(X,f,u){u.r(f),u.d(f,{FilterDialogModule:function(){return Z}});var v=u(30549),m=u(81337),s=u(17174),l=function(e){return e[e.Text=1]="Text",e[e.Number=2]="Number",e[e.DateTime=3]="DateTime",e[e.Date=4]="Date",e[e.Time=5]="Time",e}({});function y(e,o){var n=o.arguments[0];switch(e.type){case l.DateTime:case l.Date:return{logic:o.logic,operation:o.operation,arguments:n&&_.isDate(n)?[b(n)]:[null]};case l.Time:return{logic:o.logic,operation:o.operation,arguments:n&&_.isDate(n)?[P(n)]:[null]};case l.Number:return{logic:o.logic,operation:o.operation,arguments:n||0===n?[n]:[null]};case l.Text:return{logic:o.logic,operation:o.operation,arguments:n?[n]:[null,""]}}}function b(e){return p(e.getFullYear(),4)+"-"+p(e.getMonth()+1,2)+"-"+p(e.getDate(),2)+"T"+p(e.getHours(),2)+":"+p(e.getMinutes(),2)+":"+p(e.getSeconds(),2)+"."+p(e.getMilliseconds(),3)}function P(e){return F+"T"+p(e.getHours(),2)+":"+p(e.getMinutes(),2)+":"+p(e.getSeconds(),2)}function p(e,o){for(var n=e.toString();n.length<o;)n="0"+n;return n}var F="1899-12-30",T=u(73221),t=u(50423),k=u(65181),w=u(64647),C=u(67489),d=u(77476),I=u(96777),L=u(11941),N=u(39686),E=u(85102);function B(e,o){if(1&e&&(t.\u0275\u0275elementStart(0,"div",14)(1,"pbi-radio-group",15)(2,"pbi-radio-button",16),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"localize"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"pbi-radio-button",16),t.\u0275\u0275text(6),t.\u0275\u0275pipe(7,"localize"),t.\u0275\u0275elementEnd()()()),2&e){var n=t.\u0275\u0275nextContext(3);t.\u0275\u0275attribute("aria-label",n.viewModel.filterLogicLabel),t.\u0275\u0275advance(1),t.\u0275\u0275property("isCompact",!0),t.\u0275\u0275advance(1),t.\u0275\u0275property("value",1),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,6,"Logical_And_Operator")),t.\u0275\u0275advance(2),t.\u0275\u0275property("value",2),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(7,8,"Logical_Or_Operator"))}}function S(e,o){if(1&e&&(t.\u0275\u0275elementStart(0,"option",17),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&e){var n=o.$implicit;t.\u0275\u0275property("ngValue",n.key),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(n.text)}}function V(e,o){if(1&e&&t.\u0275\u0275element(0,"input",18),2&e){var n=t.\u0275\u0275nextContext().index,r=t.\u0275\u0275nextContext(2);t.\u0275\u0275attribute("aria-label",r.viewModel.filterInputLabel+" "+(n+1))}}function A(e,o){if(1&e&&t.\u0275\u0275element(0,"input",19),2&e){var n=t.\u0275\u0275nextContext().index,r=t.\u0275\u0275nextContext(2);t.\u0275\u0275attribute("aria-label",r.viewModel.filterInputLabel+" "+(n+1))}}function G(e,o){if(1&e){var n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"input",20),t.\u0275\u0275listener("focus",function(){t.\u0275\u0275restoreView(n);var g=t.\u0275\u0275nextContext().$implicit,c=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(c.onDateTimeFocus(g))}),t.\u0275\u0275elementEnd()}if(2&e){var r=t.\u0275\u0275nextContext().index,a=t.\u0275\u0275nextContext(2);t.\u0275\u0275attribute("aria-label",a.viewModel.filterInputLabel+" "+(r+1))}}function Y(e,o){if(1&e){var n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"input",21),t.\u0275\u0275listener("focus",function(){t.\u0275\u0275restoreView(n);var g=t.\u0275\u0275nextContext().$implicit,c=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(c.onDateTimeFocus(g))}),t.\u0275\u0275elementEnd()}if(2&e){var r=t.\u0275\u0275nextContext().index,a=t.\u0275\u0275nextContext(2);t.\u0275\u0275attribute("aria-label",a.viewModel.filterInputLabel+" "+(r+1))}}function H(e,o){if(1&e){var n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"input",22),t.\u0275\u0275listener("focus",function(){t.\u0275\u0275restoreView(n);var g=t.\u0275\u0275nextContext().$implicit,c=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(c.onDateTimeFocus(g))}),t.\u0275\u0275elementEnd()}if(2&e){var r=t.\u0275\u0275nextContext().index,a=t.\u0275\u0275nextContext(2);t.\u0275\u0275attribute("aria-label",a.viewModel.filterInputLabel+" "+(r+1))}}function R(e,o){if(1&e&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275elementContainerStart(1,4),t.\u0275\u0275template(2,B,8,10,"div",5),t.\u0275\u0275elementStart(3,"div",6)(4,"select",7),t.\u0275\u0275template(5,S,2,2,"option",8),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(6,V,1,1,"input",9),t.\u0275\u0275template(7,A,1,1,"input",10),t.\u0275\u0275template(8,G,1,1,"input",11),t.\u0275\u0275template(9,Y,1,1,"input",12),t.\u0275\u0275template(10,H,1,1,"input",13),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementEnd()),2&e){var n=o.$implicit,r=o.first,a=o.index,i=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("formGroup",n),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!r),t.\u0275\u0275advance(2),t.\u0275\u0275attribute("aria-label",i.viewModel.filterSelectLabel+" "+(a+1))("cdkFocusInitial",!0),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",i.viewModel.filterOperations),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",1===i.viewModel.column.type),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",2===i.viewModel.column.type),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",3===i.viewModel.column.type),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",4===i.viewModel.column.type),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",5===i.viewModel.column.type)}}function j(e,o){if(1&e&&(t.\u0275\u0275elementStart(0,"section",1)(1,"div",2)(2,"span"),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(4,R,11,10,"div",3),t.\u0275\u0275elementEnd()),2&e){var n=t.\u0275\u0275nextContext();t.\u0275\u0275attribute("aria-label",n.viewModel.filterLabel),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(n.viewModel.filterLabel),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",n.formArray.controls)}}var J=function(e){function o(n,r,a){var i=e.call(this)||this;return i.localizationService=n,i.highContrastCssGenerationService=r,i.templateDialogPayload=a,i.initializeHighContrastRules(),i}return(0,m.__extends)(o,e),o.prototype.ngOnInit=function(){var n=this;this.viewModel=function(e,o){var n={};return n.column=(e=e||{}).column||{name:"Column",type:l.Text},n.filters=function(e,o){var n=[];if(o)if(e===l.DateTime||e===l.Date||e===l.Time)for(var r=0,a=o;r<a.length;r++){var i=a[r];n.push({logic:i.logic,operation:i.operation,arguments:_.map(i.arguments,function(g){return g&&_.isString(g)?new Date(g):void 0})})}else n.push.apply(n,o||[]);for(;n.length<2;)n.push({operation:null,arguments:[""],logic:1});return n}(n.column.type,e.filters),n.filterOperations=e.filterOperations||function(e,o){switch(e){case l.Date:case l.DateTime:case l.Time:return[{key:null,text:""},{key:1,text:o.get("FilterOperator_Equal")},{key:10,text:o.get("FilterOperator_DoesNotEqual")},{key:7,text:o.get("FilterOperator_GreaterThan_DT")},{key:8,text:o.get("FilterOperator_GreaterThanOrEqual_DT")},{key:5,text:o.get("FilterOperator_LessThan_DT")},{key:6,text:o.get("FilterOperator_LessThanOrEqual_DT")}];case l.Number:return[{key:null,text:""},{key:1,text:o.get("FilterOperator_Equal")},{key:10,text:o.get("FilterOperator_DoesNotEqual")},{key:7,text:o.get("FilterOperator_GreaterThan")},{key:8,text:o.get("FilterOperator_GreaterThanOrEqual")},{key:5,text:o.get("FilterOperator_LessThan")},{key:6,text:o.get("FilterOperator_LessThanOrEqual")}];default:return[{key:null,text:""},{key:1,text:o.get("FilterOperator_Equal")},{key:10,text:o.get("FilterOperator_DoesNotEqual")},{key:3,text:o.get("FilterOperator_StartsWith")},{key:12,text:o.get("FilterOperator_DoesNotStartWith")},{key:4,text:o.get("FilterOperator_EndsWith")},{key:13,text:o.get("FilterOperator_DoesNotEndWith")},{key:2,text:o.get("FilterOperator_Contains")},{key:11,text:o.get("FilterOperator_DoesNotContain")}]}}(n.column.type,o),n.filterLabel=e.filterLabel||o.format("Filter_Intro",[n.column.name]),n.filterSelectLabel=o.get("Filter_Label_Operator"),n.filterInputLabel=o.get("Filter_Label_Value"),n.filterLogicLabel=o.get("Filter_Label_Logic"),n}(this.templateDialogPayload.input,this.localizationService);var r=this.viewModel.filters.map(function(a){var i=a.arguments[0],g=n.isDateTimeType()&&i?new s.p4(moment(i).format(n.getDateTimeFormatString())):new s.p4(i);return new s.nJ({logic:new s.p4(a.logic),operation:new s.p4(a.operation),argument:g})});this.formArray=new s.vC(r),this.lifecycleSubscriptions.add(this.formArray.valueChanges.subscribe(function(){n.templateDialogPayload.setOkButtonState(!n.canCommit())})),this.templateDialogPayload.setOkButtonState(!this.canCommit()),this.templateDialogPayload.onOkButtonClick=function(){return n.commit()}},o.prototype.getDateTimeFormatString=function(){switch(this.viewModel.column.type){case l.DateTime:return"YYYY-MM-DDThh:mm";case l.Date:return"YYYY-MM-DD";case l.Time:return"hh:mm"}},o.prototype.isDateTimeType=function(){return[l.DateTime,l.Date,l.Time].includes(this.viewModel.column.type)},o.prototype.initializeHighContrastRules=function(){this.highContrastCssGenerationService.addRule(".themeableElement input.styled-radio","{ opacity: 0 !important; }"),this.highContrastCssGenerationService.addRule(".themeableElement input.styled-radio + span:before","{ border-color: @buttonForegroundColor !important; background-color: @buttonBackgroundColor !important;}"),this.highContrastCssGenerationService.addRule(".themeableElement input.styled-radio:focus + span:before, .themeableElement input.styled-radio:hover + span:before","{ border-color: @selectedBackgroundColor !important; }"),this.highContrastCssGenerationService.addRule(".themeableElement input.styled-radio:checked + span:after","{ border-color: @buttonBackgroundColor !important; background-color: @buttonForegroundColor !important; }")},o.prototype.canCommit=function(){return this.getFilters().some(function(r){var a=r.operation,i=r.argument;return a&&(i||0===i||1===a||10===a)})},o.prototype.getFilters=function(){return this.formArray.getRawValue()},o.prototype.commit=function(){var n=this,a=this.getFilters().reduce(function(g,c){var K=n.isDateTimeType()&&c.argument?moment(c.argument).toDate():c.argument;return(0,m.__spreadArray)((0,m.__spreadArray)([],g,!0),[(0,m.__assign)((0,m.__assign)({},c),{arguments:[K]})],!1)},[]),i=function(e){for(var o={column:e.column,filters:[]},n=0,r=e.filters;n<r.length;n++){var a=r[n];if(a.operation){var i=y(o.column,a);o.filters.push(i)}}return o}((0,m.__assign)((0,m.__assign)({},this.viewModel),{filters:a}));return Promise.resolve(i)},o.prototype.onDateTimeFocus=function(n){if(!n.getRawValue().argument){var a=moment().startOf("day").format(this.getDateTimeFormatString());n.controls.argument.setValue(a)}},o.\u0275fac=function(r){return new(r||o)(t.\u0275\u0275directiveInject(k.o),t.\u0275\u0275directiveInject(w.g),t.\u0275\u0275directiveInject(C.x))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["filter-dialog"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:2,vars:1,consts:[["class","mainSection",4,"ngIf"],[1,"mainSection"],[1,"filterLabel"],[4,"ngFor","ngForOf"],[3,"formGroup"],["class","filterLogic",4,"ngIf"],[1,"filterCondition"],["formControlName","operation",1,"filterOperation"],[3,"ngValue",4,"ngFor","ngForOf"],["type","text","class","filterArg","formControlName","argument",4,"ngIf"],["type","number","class","filterArg","formControlName","argument",4,"ngIf"],["type","datetime-local","class","filterArg","min","1899-12-30T00:00","max","9999-01-01T00:00","formControlName","argument",3,"focus",4,"ngIf"],["type","date","class","filterArg","min","1899-12-30","max","9999-01-01","formControlName","argument",3,"focus",4,"ngIf"],["type","time","class","filterArg","step","1","formControlName","argument",3,"focus",4,"ngIf"],[1,"filterLogic"],["formControlName","logic",3,"isCompact"],[3,"value"],[3,"ngValue"],["type","text","formControlName","argument",1,"filterArg"],["type","number","formControlName","argument",1,"filterArg"],["type","datetime-local","min","1899-12-30T00:00","max","9999-01-01T00:00","formControlName","argument",1,"filterArg",3,"focus"],["type","date","min","1899-12-30","max","9999-01-01","formControlName","argument",1,"filterArg",3,"focus"],["type","time","step","1","formControlName","argument",1,"filterArg",3,"focus"]],template:function(r,a){1&r&&(t.\u0275\u0275elementStart(0,"template-dialog"),t.\u0275\u0275template(1,j,5,3,"section",0),t.\u0275\u0275elementEnd()),2&r&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",a.viewModel))},dependencies:[d.NgForOf,d.NgIf,s.YN,s.Kr,s.Fj,s.wV,s.EJ,s.JJ,s.JL,s.sg,s.u,I.J,L.o,N.d,E.F],styles:["[_nghost-%COMP%]{--inputBorder: var(--neutral-tertiary-alt-color, #C8C8C8);--inputBorderHover: var(--black-color, #000);--inputBorderFocus: var(--black-color, #000);--inputBackgroundDisabled: var(--neutral-lighter-color, #F4F4F4);--foregroundBase: var(--neutral-primary-color, #333333);--backgroundBase: var(--white-color, #fff)}[data-legacy-theming=false]   [_nghost-%COMP%]{--inputBorder: var(--colorNeutralStroke1);--inputBorderHover: var(--colorNeutralStroke1Hover);--inputBorderFocus: var(--colorNeutralStroke1Hover);--inputBackground: var(--colorNeutralBackground1);--inputBackgroundDisabled: var(--colorTransparentBackground);--foregroundBase: var(--colorNeutralForeground1);--backgroundBase: var(--colorNeutralBackground1)}[data-theme=dark]   [_nghost-%COMP%]   select[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{color-scheme:dark}[_nghost-%COMP%]{font-size:12px;font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif;background-color:var(--backgroundBase);color:var(--foregroundBase)}[_nghost-%COMP%]   template-dialog[_ngcontent-%COMP%]{min-height:300px}[_nghost-%COMP%]   section.mainSection[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column;z-index:1}[_nghost-%COMP%]   section.mainSection[_ngcontent-%COMP%]   .filterLabel[_ngcontent-%COMP%]{margin:0 0 10px}[_nghost-%COMP%]   section.mainSection[_ngcontent-%COMP%]   .filterLogic[_ngcontent-%COMP%]{margin:5px 0}[_nghost-%COMP%]   section.mainSection[_ngcontent-%COMP%]   .filterLogic[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin:0 5px}[_nghost-%COMP%]   section.mainSection[_ngcontent-%COMP%]   .filterLogic[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{transform:translateY(2px);margin:0 2px 0 0}[_nghost-%COMP%]   section.mainSection[_ngcontent-%COMP%]   .filterOperation[_ngcontent-%COMP%]{width:200px;background-color:var(--inputBackground)}[_nghost-%COMP%]   section.mainSection[_ngcontent-%COMP%]   .filterArg[_ngcontent-%COMP%]{width:400px}[_nghost-%COMP%]   section.topSection[_ngcontent-%COMP%]{z-index:2}[_nghost-%COMP%]   input[type=text][_ngcontent-%COMP%], [_nghost-%COMP%]   input[type=number][_ngcontent-%COMP%], [_nghost-%COMP%]   input[type=date][_ngcontent-%COMP%], [_nghost-%COMP%]   select[_ngcontent-%COMP%]{flex:1;box-sizing:border-box;background-color:var(--inputBackground);border:1px solid var(--inputBorder);padding:0 5px;height:24px}[_nghost-%COMP%]   input[type=text][_ngcontent-%COMP%]:disabled, [_nghost-%COMP%]   input[type=number][_ngcontent-%COMP%]:disabled, [_nghost-%COMP%]   input[type=date][_ngcontent-%COMP%]:disabled, [_nghost-%COMP%]   select[_ngcontent-%COMP%]:disabled{background-color:var(--inputBackgroundDisabled)}[_nghost-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus, [_nghost-%COMP%]   input[type=number][_ngcontent-%COMP%]:focus, [_nghost-%COMP%]   input[type=date][_ngcontent-%COMP%]:focus, [_nghost-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border:1px solid var(--inputBorderFocus)}[_nghost-%COMP%]   input[type=text][_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   input[type=number][_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   input[type=date][_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   select[_ngcontent-%COMP%]:hover{outline:none;border:1px solid var(--inputBorderHover)}html[data-focus-source=key]   [_nghost-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus, html[data-focus-source=key]   [_nghost-%COMP%]   input[type=number][_ngcontent-%COMP%]:focus, html[data-focus-source=key]   [_nghost-%COMP%]   input[type=date][_ngcontent-%COMP%]:focus, html[data-focus-source=key]   [_nghost-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color);outline-offset:-1px;border:none}[_nghost-%COMP%]   pbi-radio-group[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]   pbi-radio-group[_ngcontent-%COMP%]   pbi-radio-button[_ngcontent-%COMP%]{margin:0 5px}"],changeDetection:0}),o}(T.w),$=u(79061),W=u(76966),U=u(59951),Z=function(){function e(){}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=t.\u0275\u0275defineInjector({providers:[C.x],imports:[d.CommonModule,s.u5,s.UX,W.c.withManifest([{componentIdentifier:v.V,componentType:J}]),$.v,U.v]}),e}()}}]);