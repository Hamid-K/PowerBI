"use strict";(self.webpackChunkdesktopDataExplore=self.webpackChunkdesktopDataExplore||[]).push([["visual-recommendation-provider"],{66098:function(wt,Ze,j){j.r(Ze),j.d(Ze,{VisualRecommendationProviderModule:function(){return Pt}});var te=j(81337),ze=j(47287),ce=ze.au.tooltips,G=function(){function e(){}return e.defaultFieldCount=20,e.defaultTopNFieldCount=3,e.fieldScoreBase=1.2,e.dispreferedLegendScoreReducer=.67,e.dispreferedRoleReducer=.67,e.dispreferedSortScoreReducer=.1,e.incompleteFieldsScore=.1,e.unsureTypeFieldScore=.3,e.idOnDispreferedAxis=.3,e.incompatibleAggregate=.1,e}(),Se=function(){function e(){}return e.strong=1,e.medium=.85,e.low=.3,e}(),K=j(94419),He=j(5361),k=j(74082),Nr=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return(0,te.__extends)(a,e),a.prototype.visitDateAdd=function(r){var t=new Ar,i=r.accept(t);return t.dateSpanExpr?(0,K.uQ)(t.dateSpanExpr.unit,i):r},a}(He.b),Sr=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return(0,te.__extends)(a,e),a.prototype.visitDateAdd=function(r){return(0,k.jr)(r.arg)&&0===r.unit&&-1===r.amount?(0,K.sO)(7,-24,r.arg):r},a}(He.b),Ar=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return(0,te.__extends)(a,e),a.prototype.visitDateSpan=function(r){return this.dateSpanExpr=r,r.arg},a}(He.b),M=j(62458),fe=j(45413),de=j(58295);function pe(e,a){var r,t,i;M.fF.assertNonEmpty(e,"groupedExprs");for(var o=[],u=0,s=e;u<s.length;u++){var n=s[u];if(1===_.size(n.exprs)&&(0,k.Lk)(n.exprs[0])){if(!n.defaultLabel)return;if(ke(n.defaultLabel,e))continue;o.push({exprs:[n.defaultLabel],type:n.type,isMeasure:n.isMeasure,entity:null===(r=n.defaultLabel.getTargetEntity())||void 0===r?void 0:r.entity,canAggregate:n.canAggregate,isFiltered:n.isFiltered,isSingleValue:n.isSingleValue,isIdentity:null===(i=null===(t=n.defaultLabel.getConceptualProperty(a))||void 0===t?void 0:t.column)||void 0===i?void 0:i.idOnEntityKey,isParameter:n.isParameter,isTooltip:n.isTooltip,showAll:n.showAll,groupMetadata:n.groupMetadata})}else o.push(n)}return o}function me(e,a,r,t,i){M.fF.assertNonEmpty(e,"exprs"),M.fF.assertValue(r,"schema"),M.fF.assertValue(t,"aggrOps"),M.fF.assertValue(i,"condition");var o=function(h){return i(h)&&1===_.size(h.exprs)&&!h.isFiltered&&!h.isSingleValue&&!h.isParameter&&!h.showAll&&h.canAggregate},u=_.filter(e,function(A){return o(A)});if(_.isEmpty(u))return{groupedExprsWithMetadata:e,query:a};for(var s=[],n=a.orderBy(),l=a,c=function(h){if(!o(h))return s.push(h),"continue";var p=h,m=t.createExprWithAggregate(p.exprs[0],r,!1,void 0);if(!m||!(0,de.k)(m))return s.push(p),"continue";var g=m.getMetadata(r);s.push({exprs:[m],isMeasure:!0,type:g&&g.type,entity:h.entity,isTooltip:h.isTooltip,groupMetadata:h.groupMetadata,isHidden:h.isHidden});var y=_.find(n,function(S){return(0,fe.fS)(S.expr,p.exprs[0])});y&&(y.expr=m)},f=0,d=e;f<d.length;f++)c(d[f]);return l=l.orderBy(n),{groupedExprsWithMetadata:s,query:l}}function ye(e){return e&&e.type&&!e.type.temporal&&(e.type.numeric||e.type.integer)}function Te(e){return(0,k.iV)(e)&&(1===e.func||2===e.func)}function z(e,a,r,t,i,o,u){i?e.addParameter(a,r):e.add(a,r,{nativeReferenceName:o,isHidden:u}),t&&!e.projections[r].showAll&&e.toggleShowAll(r)}function Fe(e,a,r,t){var i,o=_.size(null===(i=e.projections[a])||void 0===i?void 0:i.all());o<=1||e.setActiveProjections([a],r?o:null!=t?t+1:1)}function ke(e,a){var r=_.flatten(_.map(a,function(i){return i.exprs}));return!!_.find(r,function(i){return(0,fe.fS)(i,e,!1,!0)})}var ue=j(45114),b=j(47508),ne=j(95462),Tr=function(){function e(a){this.visualAuthoring=a}return Object.defineProperty(e.prototype,"applicableVisuals",{get:function(){return[b.L.card.name,b.L.multiRowCard.name]},enumerable:!1,configurable:!0}),e.prototype.process=function(a,r,t){M.fF.assertNonEmpty(a,"typedExprs should not be empty"),M.fF.assertValue(r,"query"),M.fF.assertValue(t,"pluginConfig");var i=pe(a,t.schema);if(!_.isEmpty(i)){var o=_.filter(i,function(F){return!F.isMeasure}),u=_.filter(i,function(F){return F.isMeasure}),s=_.filter(u,function(F){return!F.isHidden});_.isEmpty(s)&&(i=me(i,r,t.schema,t.aggrOps,function(F){return ye(F)}).groupedExprsWithMetadata,o=_.filter(i,function(F){return!F.isMeasure}),s=_.filter(i,function(F){return F.isMeasure&&!F.isTooltip&&!F.isHidden}));for(var l=_.size(s),c=_.size(o),x=1===l&&0===c,A=_.size(_.filter(i,function(F){return F.isSingleValue}))===c?1:Math.pow(5,-c),h=0===l?G.incompleteFieldsScore:1,p=new ue.g(ne.vQ.create(),{},[]),m=0,g=s;m<g.length;m++){var O=r.selectNativeReferenceNameOf(S=(y=g[m]).exprs[0]);z(p,S,"Values",y.showAll,y.isParameter,O)}for(var P=0,E=_.filter(u,function(F){return F.isHidden});P<E.length;P++){var y;O=r.selectNativeReferenceNameOf(S=(y=E[P]).exprs[0]),z(p,S,"Values",y.showAll,y.isParameter,O,!0)}for(var I=0,v=o;I<v.length;I++)for(var V=v[I],C=0,B=V.exprs;C<B.length;C++)O=r.selectNativeReferenceNameOf(S=B[C]),z(p,S,"Values",V.showAll,V.isParameter,O);if(!x){var L=r.orderBy(),X=_.some(a,function(F){return F.isExplicitSortBy});if(_.isEmpty(L)||!X){var S,T=_.first(s);L=null!=T?[{expr:S=T.exprs[0],direction:qe(L,S,2)}]:[{expr:S=_.first(o).exprs[0],direction:qe(L,S,1)}]}p.orderBy(L)}return[{config:this.visualAuthoring.create({query:p,visualType:x?b.L.card.name:b.L.multiRowCard.name,schema:t.schema,expr:void 0}),scores:{fieldScore:A,semanticTypeScore:h}}]}},e}();function qe(e,a,r){var t,i=_.find(e,function(o){return(0,fe.fS)(o.expr,a,!0,!0)});return null!==(t=i?.direction)&&void 0!==t?t:r}var Be=j(92947),De=j(5616),Fr=j(48766),se=j(5265),Pr=function(){function e(a){this.visualAuthoring=a}return Object.defineProperty(e.prototype,"applicableVisuals",{get:function(){return[b.L.clusteredColumnChart.name,b.L.clusteredBarChart.name,b.L.columnChart.name,b.L.barChart.name,b.L.hundredPercentStackedColumnChart.name,b.L.hundredPercentStackedBarChart.name,b.L.donutChart.name,b.L.pieChart.name,b.L.ribbonChart.name,b.L.waterfallChart.name,b.L.treemap.name]},enumerable:!1,configurable:!0}),e.prototype.process=function(a,r,t){var i,o,u;M.fF.assertNonEmpty(a,"typedExprs"),M.fF.assertValue(r,"query"),M.fF.assertValue(t,"pluginConfig");var s=function(e){return e===b.L.waterfallChart.name?{category:De.IT.category,series:De.IT.breakdown,y:De.IT.y}:e===b.L.treemap.name?{category:Be.A4.group,series:Be.A4.details,y:Be.A4.values}:{category:ze.au.category,series:ze.au.series,y:ze.au.y}}(t.visualType),n=r,l=pe(a,t.schema);if(!_.isEmpty(l)){var c=1,f=1,d=new ue.g(ne.vQ.create(),{},[]),x=_.filter(l,function(W){return!W.isMeasure}),A=_.filter(l,function(W){return W.isMeasure&&!W.isTooltip}),h=_.filter(A,function(W){return!W.isHidden}),p=_.filter(l,function(W){return W.isTooltip});if(_.isEmpty(h)){var m=me(l,r,t.schema,t.aggrOps,function(W){return ye(W)});l=m.groupedExprsWithMetadata,n=m.query,x=_.filter(l,function(W){return!W.isMeasure}),h=_.filter(l,function(W){return W.isMeasure&&!W.isTooltip&&!W.isHidden})}var g=_.remove(x,function(W){return W.isSingleValue});if(_.isEmpty(x)&&(x=g),!_.some(h,function(W){return W.type&&!W.type.numeric&&!W.type.integer})){var R,y=function(e){return _.orderBy(e,function(a){return a.type&&(a.type.text||a.type.temporal)?1:a.type&&a.type.bool?2:3})}(x),S=_.chain(y).filter(function(W){return W.isIdentity}).map(function(W){return W.entity}).value(),O=_.size(h)<=1&&_.size(x)>1;if(O){var P=_.findLastIndex(y,function(W){return 1===_.size(W.exprs)&&!W.isIdentity&&_.indexOf(S,W.entity)<0});if(P>=0){var E=y[P],I=_.findLastIndex(x,E);R=E.type&&E.type.text&&!E.type.geography&&!E.type.misc&&!E.type.temporal,x.splice(I,1),y.splice(P,1);var V=r.selectNativeReferenceNameOf(v=E.exprs[0]);z(d,v,s.series,E.showAll,E.isParameter,V)}}for(var C=!0,B=!1,L=0,X=y;L<X.length;L++){var T=X[L];T.isIdentity&&(B=!0);var U=Se.low;if(null==T.type)return;!T.isIdentity&&!T.type.text||T.type.geography||T.type.misc||T.type.temporal||T.type.dateTime?T.type&&(T.type.bool||T.type.geography||T.type.misc)&&(U=Se.medium):U=Se.strong,f=Math.min(f,U);for(var J=!0,F=0,w=T.exprs;F<w.length;F++)V=r.selectNativeReferenceNameOf(v=w[F]),z(d,v,s.category,T.showAll,T.isParameter,V),J=J&&!_.isEmpty(v.getOrderByColumns(t.schema));C=C&&(!(null===(i=T.type)||void 0===i||!i.temporal)||J)}Fe(d,s.category,t.addDefaultFormatting,null===(u=null===(o=y?.[0])||void 0===o?void 0:o.groupMetadata)||void 0===u?void 0:u.maxProjectedIndex),O&&!R&&(f*=G.dispreferedLegendScoreReducer);for(var $=!1,ae=function(he){M.fF.assert(function(){return 1===_.size(he.exprs)});var Ee=he.exprs[0],Ye=r.selectNativeReferenceNameOf(Ee);z(d,Ee,s.y,he.showAll,he.isParameter,Ye),$=$||Te(Ee)},re=0,q=h;re<q.length;re++)ae(Q=q[re]);for(var ie=0,ve=_.filter(A,function(W){return W.isHidden});ie<ve.length;ie++){var Q;V=r.selectNativeReferenceNameOf(v=(Q=ve[ie]).exprs[0]),z(d,v,s.y,Q.showAll,Q.isParameter,V,!0)}for(var Re=function(he){M.fF.assert(function(){return 1===_.size(he.exprs)});var Ee=he.exprs[0],Ye=r.selectNativeReferenceNameOf(Ee);z(d,Ee,ce,he.showAll,he.isParameter,Ye,he.isHidden),$=$||Te(Ee)},N=0,D=p;N<D.length;N++)Re(D[N]);var Z=n.orderBy(),Ve=_.some(a,function(W){return W.isExplicitSortBy});if(_.isEmpty(Z)||!Ve){var Le=_.first(h);if(C&&!_.isEmpty(y))Z=[{expr:v=_.first(y).exprs[0],direction:Ie(Z,v,1)}];else if(Le)Z=[{expr:v=Le.exprs[0],direction:Ie(Z,v,2)}];else{var v;Z=[{expr:v=_.first(y).exprs[0],direction:Ie(Z,v,1)}]}}d.orderBy(Z),c=Math.pow(G.fieldScoreBase,1-_.size(x))*Math.pow(G.fieldScoreBase,1-_.size(h)),(_.isEmpty(x)||_.isEmpty(h))&&(c=G.incompleteFieldsScore);var H=t.visualType;if(!H)if(B)H=b.L.clusteredColumnChart.name;else{var le=_.first(Z);H=(0,de.k)(le.expr)?b.L.clusteredBarChart.name:b.L.clusteredColumnChart.name}var Ne=be(this.visualAuthoring,d,b.L.clusteredBarChart.name,t.schema,B,t.addDefaultFormatting),je=be(this.visualAuthoring,d,b.L.clusteredColumnChart.name,t.schema,B,t.addDefaultFormatting),Mt=be(this.visualAuthoring,d,b.L.barChart.name,t.schema,B,t.addDefaultFormatting),Ot=be(this.visualAuthoring,d,b.L.columnChart.name,t.schema,B,t.addDefaultFormatting),$e=$?G.incompatibleAggregate:f,gr=[{config:Ne,scores:{fieldScore:c,semanticTypeScore:f}},{config:Mt,scores:{fieldScore:c,semanticTypeScore:$e}}],xr=[{config:je,scores:{fieldScore:c,semanticTypeScore:f}},{config:Ot,scores:{fieldScore:c,semanticTypeScore:$e}}],Rr=H!==b.L.clusteredColumnChart.name&&H!==b.L.columnChart.name?(0,te.__spreadArray)((0,te.__spreadArray)([],gr,!0),xr,!0):(0,te.__spreadArray)((0,te.__spreadArray)([],xr,!0),gr,!0);if(function(e){return null!=e&&e!==b.L.clusteredBarChart.name&&e!==b.L.clusteredColumnChart.name&&e!==b.L.barChart.name&&e!==b.L.columnChart.name}(t.visualType)){var bt=be(this.visualAuthoring,d,t.visualType,t.schema,B,t.addDefaultFormatting);Rr.unshift({config:bt,scores:{fieldScore:c,semanticTypeScore:$e}})}return Rr}}},e}();function be(e,a,r,t,i,o){var u=e.create({query:a,visualType:r,schema:t,expr:void 0});return o&&(function(e){e.singleVisual.objects={},(0,se.sO)(e.singleVisual.objects,{objectName:"categoryAxis",propertyName:"showAxisTitle"},void 0,(0,K.O7)(!0)),(0,se.sO)(e.singleVisual.objects,{objectName:"valueAxis",propertyName:"showAxisTitle"},void 0,(0,K.O7)(!0))}(u),i&&function(e){(0,se.sO)(e.singleVisual.objects,{objectName:"categoryAxis",propertyName:"axisType"},void 0,(0,K.fL)(Fr.w.categorical))}(u)),u}function Ie(e,a,r){var t,i=_.find(e,function(o){return(0,fe.fS)(o.expr,a,!0,!0)});return null!==(t=i?.direction)&&void 0!==t?t:r}var we=j(84741),Lr=function(){function e(a){this.visualAuthoring=a}return Object.defineProperty(e.prototype,"applicableVisuals",{get:function(){return[b.L.lineStackedColumnComboChart.name,b.L.lineClusteredColumnComboChart.name]},enumerable:!1,configurable:!0}),e.prototype.process=function(a,r,t){var i,o;M.fF.assertNonEmpty(a,"typedExprs"),M.fF.assertValue(r,"query"),M.fF.assertValue(t,"pluginConfig");var u=pe(a,t.schema);if(!_.isEmpty(u)){var s=_.filter(u,function(N){return!N.isMeasure}),n=_.filter(u,function(N){return N.isMeasure&&!N.isTooltip}),l=_.filter(n,function(N){return!N.isHidden}),c=_.filter(u,function(N){return N.isTooltip});if(_.isEmpty(l)&&(u=me(u,r,t.schema,t.aggrOps,function(N){return ye(N)}).groupedExprsWithMetadata,s=_.filter(u,function(N){return!N.isMeasure}),l=_.filter(u,function(N){return N.isMeasure&&!N.isTooltip&&!N.isHidden})),!_.some(l,function(N){return N.type&&!N.type.numeric&&!N.type.integer})){var y,V,C,d=_.size(l),x=function(e){return _.orderBy(e,function(a){return a.type&&(a.type.temporal||a.type.dateTime)?1:a.type&&(a.type.numeric||a.type.integer)?2:3})}(s),A=_.chain(x).filter(function(N){return N.isIdentity}).map(function(N){return N.entity}).value(),h=1,m=new ue.g(ne.vQ.create(),{},[]);if(_.size(s)>1&&(y=_.findLast(x,function(N){return 1===_.size(N.exprs)&&!N.isIdentity&&_.indexOf(A,N.entity)<0}))){_.remove(s,y),_.remove(x,y);var O=r.selectNativeReferenceNameOf(S=y.exprs[0]);z(m,S,we.rJ.series,y.showAll,y.isParameter,O)}for(var R=0,P=x;R<P.length;R++)for(var E=P[R],I=0,v=E.exprs;I<v.length;I++){var S;O=r.selectNativeReferenceNameOf(S=v[I]),z(m,S,we.rJ.category,E.showAll,E.isParameter,O)}Fe(m,we.rJ.category,t.addDefaultFormatting,null===(o=null===(i=x?.[0])||void 0===i?void 0:i.groupMetadata)||void 0===o?void 0:o.maxProjectedIndex),y?(V=[_.first(l)],d>1&&(C=l.splice(1,d-1))):(V=d<=1?l:l.splice(0,d-1),C=d<=1?void 0:[_.last(l)]);for(var L=0,X=_.filter(n,function(N){return N.isHidden});L<X.length;L++)V.push(X[L]);var U=!1;if(!_.isEmpty(V))for(var Y=function(D){M.fF.assert(function(){return 1===_.size(D.exprs)});var ee=D.exprs[0],Z=r.selectNativeReferenceNameOf(ee);z(m,ee,we.rJ.y,D.showAll,D.isParameter,Z,D.isHidden),U=U||Te(ee)},J=0,F=V;J<F.length;J++)Y(F[J]);if(!_.isEmpty(C))for(var w=function(D){M.fF.assert(function(){return 1===_.size(D.exprs)});var ee=D.exprs[0],Z=r.selectNativeReferenceNameOf(ee);z(m,ee,we.rJ.y2,D.showAll,D.isParameter,Z,D.isHidden)},$=0,ae=C;$<ae.length;$++)w(ae[$]);for(var re=function(D){M.fF.assert(function(){return 1===_.size(D.exprs)});var ee=D.exprs[0],Z=r.selectNativeReferenceNameOf(ee);z(m,ee,ce,D.showAll,D.isParameter,Z,D.isHidden),U=U||Te(ee)},q=0,Q=c;q<Q.length;q++)re(Q[q]);h=Math.pow(G.fieldScoreBase,1-_.size(s))*Math.pow(G.fieldScoreBase,1-_.size(l)),(_.isEmpty(s)||_.isEmpty(l))&&(h=G.incompleteFieldsScore);var ie=this.visualAuthoring.create({query:m,visualType:b.L.lineClusteredColumnComboChart.name,schema:t.schema,expr:void 0});t.addDefaultFormatting&&er(ie);var ve=this.visualAuthoring.create({query:m,visualType:b.L.lineStackedColumnComboChart.name,schema:t.schema,expr:void 0});return t.addDefaultFormatting&&er(ve),[{config:ie,scores:{fieldScore:h,semanticTypeScore:1}},{config:ve,scores:{fieldScore:h,semanticTypeScore:U?G.incompatibleAggregate:1}}]}}},e}();function er(e){e.singleVisual.objects={},(0,se.sO)(e.singleVisual.objects,{objectName:"categoryAxis",propertyName:"showAxisTitle"},void 0,(0,K.O7)(!0)),(0,se.sO)(e.singleVisual.objects,{objectName:"valueAxis",propertyName:"showAxisTitle"},void 0,(0,K.O7)(!0)),(0,se.sO)(e.singleVisual.objects,{objectName:"valueAxis",propertyName:"secShowAxisTitle"},void 0,(0,K.O7)(!0))}var _e=j(99653),zr=function(){function e(a){this.visualAuthoring=a}return Object.defineProperty(e.prototype,"applicableVisuals",{get:function(){return[b.L.funnel.name]},enumerable:!1,configurable:!0}),e.prototype.process=function(a,r,t){var i,o;M.fF.assertNonEmpty(a,"typedExprs"),M.fF.assertValue(r,"query"),M.fF.assertValue(t,"pluginConfig");var u=pe(a,t.schema);if(!_.isEmpty(u)){var s=_.filter(u,function(T){return!T.isMeasure}),n=_.filter(u,function(T){return T.isMeasure&&!T.isTooltip}),l=_.filter(n,function(T){return!T.isHidden}),c=_.filter(u,function(T){return T.isTooltip});if(_.isEmpty(l)&&(u=me(u,r,t.schema,t.aggrOps,function(T){return ye(T)}).groupedExprsWithMetadata,s=_.filter(u,function(T){return!T.isMeasure}),l=_.filter(u,function(T){return T.isMeasure&&!T.isTooltip&&!T.isHidden})),!_.some(l,function(T){return T.type&&!T.type.numeric&&!T.type.integer})){var d=new ue.g(ne.vQ.create(),{},[]);if(!_.isEmpty(s)){for(var x=0,A=s;x<A.length;x++)for(var h=A[x],p=0,m=h.exprs;p<m.length;p++){var y=r.selectNativeReferenceNameOf(g=m[p]);z(d,g,_e.IW.category,h.showAll,h.isParameter,y)}Fe(d,_e.IW.category,t.addDefaultFormatting,null===(o=null===(i=s?.[0])||void 0===i?void 0:i.groupMetadata)||void 0===o?void 0:o.maxProjectedIndex)}if(!_.isEmpty(l)){var S=_.first(l);d.orderBy([{expr:g=S.exprs[0],direction:2}]);for(var O=0,R=l;O<R.length;O++){var E=(P=R[O]).exprs[0];y=r.selectNativeReferenceNameOf(E),z(d,E,_e.IW.y,P.showAll,P.isParameter,y)}}for(var v=0,V=_.filter(n,function(T){return T.isHidden});v<V.length;v++){var P;y=r.selectNativeReferenceNameOf(g=(P=V[v]).exprs[0]),z(d,g,_e.IW.y,P.showAll,P.isParameter,y,!0)}for(var C=0,B=c;C<B.length;C++){var g,L=B[C];y=r.selectNativeReferenceNameOf(g=L.exprs[0]),z(d,g,ce,L.showAll,L.isParameter,y,L.isHidden)}return[{config:this.visualAuthoring.create({query:d,visualType:t.visualType,schema:t.schema,expr:void 0}),scores:{fieldScore:1,semanticTypeScore:1}}]}}},e}(),Pe=j(5719),Hr=function(){function e(a){this.visualAuthoring=a}return Object.defineProperty(e.prototype,"applicableVisuals",{get:function(){return[b.L.gauge.name]},enumerable:!1,configurable:!0}),e.prototype.process=function(a,r,t){M.fF.assertNonEmpty(a,"typedExprs"),M.fF.assertValue(r,"query"),M.fF.assertValue(t,"pluginConfig");var i=pe(a,t.schema);if(!_.isEmpty(i)){var o=_.filter(i,function(E){return!E.isMeasure}),u=_.filter(i,function(E){return E.isMeasure&&!E.isTooltip}),s=_.filter(u,function(E){return!E.isHidden}),n=_.filter(i,function(E){return E.isTooltip});if(_.isEmpty(s)&&(i=me(i,r,t.schema,t.aggrOps,function(E){return ye(E)}).groupedExprsWithMetadata,o=_.filter(i,function(E){return!E.isMeasure}),s=_.filter(i,function(E){return E.isMeasure&&!E.isTooltip&&!E.isHidden})),!_.isEmpty(s)&&_.isEmpty(o)&&!_.some(s,function(E){return E.type&&!E.type.numeric&&!E.type.integer})){for(var c=new ue.g(ne.vQ.create(),{},[]),f=0;f<s.length;f++){var d;d=0===f?Pe.Vd.y:1===f?Pe.Vd.targetValue:2===f?Pe.Vd.minValue:3===f?Pe.Vd.maxValue:Pe.Vd.tooltips;var x=s[f].exprs[0],A=r.selectNativeReferenceNameOf(x);z(c,x,d,u[f].showAll,u[f].isParameter,A)}for(var p=0,m=_.filter(u,function(E){return E.isHidden});p<m.length;p++){var g=m[p];A=r.selectNativeReferenceNameOf(y=g.exprs[0]),z(c,y,Pe.Vd.y,g.showAll,g.isParameter,A,!0)}for(var S=0,O=n;S<O.length;S++){var y,R=O[S];A=r.selectNativeReferenceNameOf(y=R.exprs[0]),z(c,y,ce,R.showAll,R.isParameter,A,R.isHidden)}return[{config:this.visualAuthoring.create({query:c,visualType:t.visualType,schema:t.schema,expr:void 0}),scores:{fieldScore:1,semanticTypeScore:1}}]}}},e}(),Ce=j(47895),_r=j(80366),Cr=function(){function e(a){this.visualAuthoring=a}return Object.defineProperty(e.prototype,"applicableVisuals",{get:function(){return[b.L.kpi.name]},enumerable:!1,configurable:!0}),e.prototype.process=function(a,r,t){M.fF.assertNonEmpty(a,"typedExprs"),M.fF.assertValue(r,"query"),M.fF.assertValue(t,"pluginConfig");var i=pe(a,t.schema);if(!_.isEmpty(i)){var o=_.filter(i,function(R){return!R.isMeasure}),u=_.filter(i,function(R){return R.isMeasure}),s=_.filter(u,function(R){return!R.isHidden});_.isEmpty(s)&&(i=me(i,r,t.schema,t.aggrOps,function(R){return ye(R)}).groupedExprsWithMetadata,o=_.filter(i,function(R){return!R.isMeasure}),s=_.filter(i,function(R){return R.isMeasure&&!R.isTooltip&&!R.isHidden}));var l=_.size(s);if(!(l<=0||l>2||_.some(s,function(R){return R.type&&!R.type.numeric&&!R.type.integer}))){var c,f,d;if(1===_.size(o)&&1===_.size(o[0].exprs)){var x=o[0].type;(x.temporal||x.dateTime)&&(d=o[0].exprs[0])}l>=1&&(c=s[0].exprs[0]),2===l&&(f=s[1].exprs[0]);var A=_.chain(s).map(function(R){return R.exprs}).flatten().find(function(R){var P=R.getConceptualProperty(t.schema);return P.measure&&P.measure.kpi}).value();if(A){var h=A.getConceptualProperty(t.schema).measure.kpi;c=A,!d&&h.trend&&(d=rr(h.trend,A)),!f&&h.goal&&(f=rr(h.goal,A))}if(c&&d){var p=new ue.g(ne.vQ.create(),{},[]);p.add(c,Ce.Pn.indicator,{nativeReferenceName:r.selectNativeReferenceNameOf(c)}),p.add(d,Ce.Pn.trendLine,{nativeReferenceName:r.selectNativeReferenceNameOf(d)}),f&&p.add(f,Ce.Pn.goal,{nativeReferenceName:r.selectNativeReferenceNameOf(f)});for(var g=0,y=_.filter(u,function(R){return R.isHidden});g<y.length;g++){var S=y[g];p.add(S.exprs[0],Ce.Pn.indicator,{nativeReferenceName:r.selectNativeReferenceNameOf(S.exprs[0]),isHidden:!0})}return[{config:this.visualAuthoring.create({query:p,visualType:t.visualType,schema:t.schema,expr:void 0}),scores:{fieldScore:1,semanticTypeScore:1}}]}}}},e}();function rr(e,a){var r=a.getTargetEntity();return(0,_r.og)({measure:{schema:r.schema,entity:r.entity,name:e.name}})}var Me=j(22733),Br=function(){function e(a){this.visualAuthoring=a}return Object.defineProperty(e.prototype,"applicableVisuals",{get:function(){return[b.L.lineChart.name,b.L.areaChart.name,b.L.stackedAreaChart.name]},enumerable:!1,configurable:!0}),e.prototype.process=function(a,r,t){var i,o,u;M.fF.assertNonEmpty(a,"typedExprs"),M.fF.assertValue(r,"query"),M.fF.assertValue(t,"pluginConfig");var s=r,n=pe(a,t.schema);if(!_.isEmpty(n)){var l=1,c=Se.strong,f=new ue.g(ne.vQ.create(),{},[]),d=_.filter(n,function(H){return!H.isMeasure}),x=_.filter(n,function(H){return H.isMeasure&&!H.isTooltip}),A=_.filter(x,function(H){return!H.isHidden}),h=_.filter(n,function(H){return H.isTooltip});if(_.isEmpty(A)){var p=me(n,r,t.schema,t.aggrOps,function(H){return ye(H)});n=p.groupedExprsWithMetadata,s=p.query,d=_.filter(n,function(H){return!H.isMeasure}),A=_.filter(n,function(H){return H.isMeasure&&!H.isTooltip&&!H.isHidden})}var m=_.remove(d,function(H){return H.isSingleValue});if(_.isEmpty(d)&&(d=m),!_.some(A,function(H){return H.type&&!H.type.numeric&&!H.type.integer})){var g=function(e){return _.orderBy(e,function(a){return a.type&&(a.type.temporal||a.type.dateTime)?1:a.type&&(a.type.numeric||a.type.integer)?2:3})}(d),y=g[0],S=_.find(g,function(H){return H.type&&(H.type.temporal||H.type.dateTime)});if(S){for(var O=0,R=S.exprs;O<R.length;O++){var E=r.selectNativeReferenceNameOf(P=R[O]);z(f,P,Me.x.category,S.showAll,S.isParameter,E)}_.remove(g,S)}var v,V,I=_.chain(g).filter(function(H){return H.isIdentity}).map(function(H){return H.entity}).value();_.size(A)<=1&&(S?_.size(g)>0:_.size(g)>1)&&(v=_.findLast(g,function(H){return 1===_.size(H.exprs)&&!H.isIdentity&&_.indexOf(I,H.entity)<0}))&&(V=v.type&&v.type.text&&!v.type.misc,_.remove(d,v),_.remove(g,v),E=r.selectNativeReferenceNameOf(P=v.exprs[0]),z(f,P,Me.x.series,v.showAll,v.isParameter,E));for(var B=!0,L=!1,X=0,T=g;X<T.length;X++){var U=T[X];U.type&&!U.type.numeric&&!U.type.integer&&(c=Se.low),U.isIdentity&&U.type&&!U.type.temporal&&!U.type.dateTime&&(L=!0);for(var Y=0,J=U.exprs;Y<J.length;Y++)E=r.selectNativeReferenceNameOf(P=J[Y]),z(f,P,Me.x.category,U.showAll,U.isParameter,E),B=B&&!_.isEmpty(P.getOrderByColumns(t.schema))}Fe(f,Me.x.category,t.addDefaultFormatting,null===(u=null===(o=null===(i=(0,te.__spreadArray)([S],g,!0))||void 0===i?void 0:i[0])||void 0===o?void 0:o.groupMetadata)||void 0===u?void 0:u.maxProjectedIndex),v&&!V&&(c*=G.dispreferedLegendScoreReducer);for(var F=!1,w=function(le){M.fF.assert(function(){return 1===_.size(le.exprs)});var Ne=le.exprs[0],je=r.selectNativeReferenceNameOf(Ne);z(f,Ne,Me.x.y,le.showAll,le.isParameter,je),F=F||Te(Ne)},$=0,ae=A;$<ae.length;$++)w(re=ae[$]);for(var Q=0,oe=_.filter(x,function(H){return H.isHidden});Q<oe.length;Q++){var re,P;E=r.selectNativeReferenceNameOf(P=(re=oe[Q]).exprs[0]),z(f,P,Me.x.y,re.showAll,re.isParameter,E,!0)}for(var ie=function(le){M.fF.assert(function(){return 1===_.size(le.exprs)});var Ne=le.exprs[0],je=r.selectNativeReferenceNameOf(Ne);z(f,Ne,ce,le.showAll,le.isParameter,je,le.isHidden),F=F||Te(Ne)},ve=0,Re=h;ve<Re.length;ve++)ie(Re[ve]);var D=s.orderBy();if(_.isEmpty(D))if(y&&(B||y.type&&(y.type.numeric||y.type.integer||y.type.dateTime||y.type.temporal)))D=[{expr:y.exprs[0],direction:1}];else{var ee=_.first(A);D=ee?[{expr:ee.exprs[0],direction:2}]:[{expr:y.exprs[0],direction:1}]}f.orderBy(D),l=Math.pow(G.fieldScoreBase,1-_.size(d))*Math.pow(G.fieldScoreBase,1-_.size(A)),L&&(l*=G.idOnDispreferedAxis),(_.isEmpty(d)||_.isEmpty(A))&&(l=G.incompleteFieldsScore);var Z=this.visualAuthoring.create({query:f,visualType:b.L.lineChart.name,schema:t.schema,expr:void 0});t.addDefaultFormatting&&Qe(Z);var Ve=this.visualAuthoring.create({query:f,visualType:b.L.areaChart.name,schema:t.schema,expr:void 0});t.addDefaultFormatting&&Qe(Ve);var Le=this.visualAuthoring.create({query:f,visualType:b.L.stackedAreaChart.name,schema:t.schema,expr:void 0});return t.addDefaultFormatting&&Qe(Le),[{config:Z,scores:{fieldScore:l,semanticTypeScore:c}},{config:Ve,scores:{fieldScore:l,semanticTypeScore:c}},{config:Le,scores:{fieldScore:l,semanticTypeScore:F?G.incompatibleAggregate:c}}]}}},e}();function Qe(e){e.singleVisual.objects={},(0,se.sO)(e.singleVisual.objects,{objectName:"categoryAxis",propertyName:"showAxisTitle"},void 0,(0,K.O7)(!0)),(0,se.sO)(e.singleVisual.objects,{objectName:"valueAxis",propertyName:"showAxisTitle"},void 0,(0,K.O7)(!0))}var Oe=j(98755),Ir=j(52083),Qr=j(96915),Wr=function(){function e(a){this.visualAuthoring=a}return Object.defineProperty(e.prototype,"applicableVisuals",{get:function(){return[b.L.map.name,b.L.filledMap.name]},enumerable:!1,configurable:!0}),e.prototype.process=function(a,r,t){var i,o;M.fF.assertNonEmpty(a,"typedExprs"),M.fF.assertValue(r,"query"),M.fF.assertValue(t,"pluginConfig");var u=pe(a,t.schema);if(!_.isEmpty(u)){var s=1,n=new ue.g(ne.vQ.create(),{},[]),l=_.filter(u,function(w){return!w.isMeasure});if(!_.isEmpty(l)){var c=_.filter(u,function(w){return w.isMeasure&&!w.isTooltip}),f=_.filter(c,function(w){return!w.isHidden}),d=_.filter(u,function(w){return w.isTooltip});_.isEmpty(f)&&(u=me(u,r,t.schema,t.aggrOps,function(w){return ye(w)}).groupedExprsWithMetadata,l=_.filter(u,function(w){return!w.isMeasure}),f=_.filter(u,function(w){return w.isMeasure&&!w.isTooltip&&!w.isHidden}));var A=_.remove(l,function(w){return w.isSingleValue});_.isEmpty(l)&&(l=A);var h=_.filter(l,function(w){return w.type&&w.type.geography&&!w.type.geography.latitude&&!w.type.geography.longitude}),p=_.find(l,function(w){return w.type&&w.type.geography&&w.type.geography.latitude}),m=_.find(l,function(w){return w.type&&w.type.geography&&w.type.geography.longitude}),g=_.filter(l,function(w){return w.type&&!w.type.geography&&1===_.size(w.exprs)});if(!(_.size(g)>1)){if(_.isEmpty(h)&&!p&&!m){if(!t.visualType)return;h=g,g=void 0,s=G.unsureTypeFieldScore}var y,O;if(p){var S=p.exprs[0];y=_.isEmpty(h)?S:(0,K.m_)(S,1)}if(m&&(S=m.exprs[0],O=_.isEmpty(h)?S:(0,K.m_)(S,1)),!_.isEmpty(h)){for(var R=0,P=h;R<P.length;R++)for(var E=P[R],I=0,v=E.exprs;I<v.length;I++){var V=v[I],C=r.selectNativeReferenceNameOf(V);z(n,V,Oe.aX.category,E.showAll,E.isParameter,C)}Fe(n,Oe.aX.category,t.addDefaultFormatting,null===(o=null===(i=h?.[0])||void 0===i?void 0:i.groupMetadata)||void 0===o?void 0:o.maxProjectedIndex)}y&&z(n,y,Oe.aX.y,p.showAll,p.isParameter,r.selectNativeReferenceNameOf(y),p.isHidden),O&&z(n,O,Oe.aX.x,m.showAll,m.isParameter,r.selectNativeReferenceNameOf(O),m.isHidden);var B=!1;if(!_.isEmpty(g)){var L=g[0].exprs[0];C=r.selectNativeReferenceNameOf(L),z(n,L,Oe.aX.series,g[0].showAll,g[0].isParameter,C),B=!0,(S=g[0]).type&&S.type.text&&!S.type.geography&&!S.type.misc||(s*=G.dispreferedLegendScoreReducer),S.isIdentity&&(s*=G.idOnDispreferedAxis)}if(!_.some(f,function(w){return w.type&&!w.type.numeric&&!w.type.integer})){var T=this.visualAuthoring.create({query:n.clone(),visualType:b.L.map.name,schema:t.schema,expr:void 0}),U=tr(T,r,(0,te.__spreadArray)([],c,!0),d,B,t.allowTooltipMeasures,t.addDefaultFormatting),Y=this.visualAuthoring.create({query:n.clone(),visualType:b.L.filledMap.name,schema:t.schema,expr:void 0}),J=tr(Y,r,(0,te.__spreadArray)([],c,!0),d,B,t.allowTooltipMeasures,t.addDefaultFormatting),F=[];if(U&&F.push({config:T,scores:{fieldScore:U,semanticTypeScore:s}}),J&&F.push({config:Y,scores:{fieldScore:J,semanticTypeScore:s}}),!_.isEmpty(F))return F}}}}},e}();function tr(e,a,r,t,i,o,u){var s=_.filter(r,function(v){return!v.isHidden}),n=_.filter(r,function(v){return v.isHidden}),l=_.size(s);if(0===l)return 1;var f=e.singleVisual.query,d=1;if(e.singleVisual.visualType===b.L.map.name){M.fF.assert(function(){return 1===_.size(s[0].exprs)},"we can only have 1 measure group");var A=a.selectNativeReferenceNameOf(x=s[0].exprs[0]);z(f,x,Oe.aX.size,s[0].showAll,s[0].isParameter,A,s[0].isHidden),s.splice(0,1),l-=1}if(0!==l&&!i&&u){M.fF.assert(function(){return 1===_.size(r[0].exprs)},"we can only have 1 measure group");var h=s[0].exprs[0];(function(e,a){e.singleVisual.objects={},(0,se.sO)(e.singleVisual.objects,{objectName:"dataPoint",propertyName:"fill"},{data:[(0,Qr.Ue)(1)]},{solid:{color:(0,K.x5)(a,(0,Ir.jT)())}})})(e,h),o&&(A=a.selectNativeReferenceNameOf(h),z(f,h,ce,!1,!1,A,r[0].isHidden)),s.splice(0,1),l-=1}if(0!==l){if(!o)return;d=Math.pow(G.fieldScoreBase,-l);for(var p=function(V){M.fF.assert(function(){return 1===_.size(V.exprs)},"we can only have 1 measure group");var C=V.exprs[0],B=a.selectNativeReferenceNameOf(C);z(f,C,ce,V.showAll,V.isParameter,B,V.isHidden)},m=0,g=s;m<g.length;m++)p(y=g[m])}for(var S=0,O=n;S<O.length;S++){var y,x;A=a.selectNativeReferenceNameOf(x=(y=O[S]).exprs[0]),z(f,x,ce,y.showAll,y.isParameter,A,y.isHidden)}for(var R=function(V){M.fF.assert(function(){return 1===_.size(V.exprs)});var C=V.exprs[0],B=a.selectNativeReferenceNameOf(C);z(f,C,ce,V.showAll,V.isParameter,B,V.isHidden)},P=0,E=t;P<E.length;P++)R(E[P]);return d}var ge=j(85196),Kr=function(){function e(a){this.visualAuthoring=a}return Object.defineProperty(e.prototype,"applicableVisuals",{get:function(){return[b.L.pivotTable.name,b.L.tableEx.name]},enumerable:!1,configurable:!0}),e.prototype.process=function(a,r,t){M.fF.assertNonEmpty(a,"typedExprs"),M.fF.assertValue(r,"query"),M.fF.assertValue(t,"pluginConfig");var i=function(e,a){var r,t,i;M.fF.assertNonEmpty(e,"groupedExprs");for(var o=[],u=0,s=e;u<s.length;u++){var n=s[u];if(1===_.size(n.exprs)&&(0,k.Lk)(n.exprs[0])){if(!n.defaultFields)return;for(var l=0,c=n.defaultFields;l<c.length;l++){var f=c[l];if(!ke(f,e)){var d=f.getMetadata(a);o.push({exprs:[f],type:d&&d.type,isMeasure:(0,de.k)(f),entity:null===(r=f.getTargetEntity())||void 0===r?void 0:r.entity,canAggregate:!1,isIdentity:null===(i=null===(t=f.getConceptualProperty(a))||void 0===t?void 0:t.column)||void 0===i?void 0:i.idOnEntityKey,isParameter:n.isParameter,isTooltip:n.isTooltip,showAll:n.showAll})}}}else o.push(n)}return o}(a,t.schema);if(!_.isEmpty(i)){var o=_.filter(i,function(p){return!p.isMeasure}),u=_.filter(i,function(p){return p.isMeasure}),s=_.filter(u,function(p){return!p.isHidden}),n=_.chain(o).filter(function(p){return p.isIdentity}).map(function(p){return p.entity}).value(),l=2===_.size(o)&&1===_.size(s)?_.findLast(o,function(p){return 1===_.size(p.exprs)&&!p.isIdentity&&_.indexOf(n,p.entity)<0}):void 0,c=_.some(o,function(p){return p.type&&p.type.misc}),f=function(e){var a=_.chain(e).map(function(r){return r.exprs}).flatten().value();if(_.some(a,function(r){return(0,k.g5)(r)&&!_.isEmpty(r.scope)}))return!0}(s),d=!f&&function(e,a,r,t,i){for(var o=function(d){return d.isParameter||_.some(d.exprs,function(x){return(0,k.tO)(x)})},u=!1,s=0,n=e;s<n.length;s++){var l=n[s];if(_.indexOf(r,l.entity)<0&&(u=!0),o(l))return!0}if(!u||_.some(a,function(f){return o(f)}))return!0;var c=t.orderBy();return!!i&&_.some(c,function(f){return(0,de.k)(f.expr)})}(o,s,n,r,l),x=f?void 0:function(e,a,r,t,i,o,u){for(var s,n=new ue.g(ne.vQ.create(),{},[]),l=_.filter(i,function(V){return!V.isHidden}),c=0,f=t;c<f.length;c++)for(var d=f[c],x=0,A=d.exprs;x<A.length;x++){var p=e.selectNativeReferenceNameOf(h=A[x]);z(n,h,ge.r.values,d.showAll,d.isParameter,p)}for(var m=0,g=i;m<g.length;m++)for(var y=g[m],S=0,O=y.exprs;S<O.length;S++){var h;p=e.selectNativeReferenceNameOf(h=O[S]),z(n,h,ge.r.values,y.showAll,y.isParameter,p,y.isHidden)}u&&_.size(e.select())>1&&_.some(t,function(V){return V.type&&V.type.misc&&V.type.misc.webUrl})&&(0,se.sO)(s={},{objectName:"values",propertyName:"urlIcon"},void 0,(0,K.O7)(!0));var R=e.orderBy();if(_.isEmpty(R)){var P=_.first(l);if(P)R=[{expr:P.exprs[0],direction:2}];else{var E=_.find(t);E?R=[{expr:E.exprs[0],direction:1}]:M.fF.assertFail("No expr for order by. This should not happen.")}}n.orderBy(R);var I=a.create({query:n,visualType:b.L.tableEx.name,schema:r,expr:void 0});return s&&(I.singleVisual.objects=s),{config:I,fieldScore:o?1:(1+_.size(t))/(2+_.size(t)),semanticScore:Se.strong}}(r,this.visualAuthoring,t.schema,o,u,c,t.addDefaultFormatting),A=d?void 0:function(e,a,r,t,i,o,u){for(var s,n=new ue.g(ne.vQ.create(),{},[]),l=_.filter(i,function(F){return!F.isHidden}),c=_.filter(i,function(F){return F.isHidden}),f=2===_.size(t)&&1===_.size(l)?_.findLast(t,function(F){return 1===_.size(F.exprs)&&!F.isIdentity&&_.indexOf(o,F.entity)<0}):void 0,d=0,x=t;d<x.length;d++)for(var A=x[d],h=A===f?ge.r.columns:ge.r.rows,p=0,m=A.exprs;p<m.length;p++){var y=e.selectNativeReferenceNameOf(g=m[p]);z(n,g,h,A.showAll,A.isParameter,y)}var S=f?1:0;if(_.size(_.flatten(_.map(t,function(F){return F.exprs})))-S>1){var O=n.getQueryRefByProjectionIndex(ge.r.rows,0);n.projections[ge.r.rows].addActiveQueryReference(O),(0,se.sO)(s={},{objectName:"rowHeaders",propertyName:"showExpandCollapseButtons"},void 0,(0,K.O7)(!0))}for(var R=0;R<l.length;R++)for(var P=0,E=l[R].exprs;P<E.length;P++){y=e.selectNativeReferenceNameOf(g=E[P]),z(n,g,ge.r.values,l[R].showAll,l[R].isParameter,y);var I=l[R].type;(!I||I.numeric||I.integer)&&u&&(O=n.getQueryRef(ge.r.values,{fieldIndex:R}),s||(s={}),(0,se.sO)(s,{objectName:"columnFormatting",propertyName:"dataBars"},{metadata:O},{axisColor:{solid:{color:(0,K.fL)("foreground")}},hideText:(0,K.O7)(!1),negativeColor:{solid:{color:(0,K.fL)("minColor")}},positiveColor:{solid:{color:(0,K.fL)("maxColor")}},reverseDirection:(0,K.O7)(!1),maxValue:void 0,minValue:void 0}))}for(var v=0,V=c;v<V.length;v++)for(var C=V[v],B=0,L=C.exprs;B<L.length;B++){var g;y=e.selectNativeReferenceNameOf(g=L[B]),z(n,g,ge.r.values,C.showAll,C.isParameter,y,!0)}var X=e.orderBy();if(_.isEmpty(X)){var T=_.first(l);if(!f&&T)X=[{expr:T.exprs[0],direction:2}];else{var U=_.find(t,function(F){return F!==f});U?X=[{expr:U.exprs[0],direction:1}]:M.fF.assertFail("No expr for order by. This should not happen.")}}n.orderBy(X);var Y=a.create({query:n,visualType:b.L.pivotTable.name,schema:r,expr:void 0});return s&&(Y.singleVisual.objects=s),{config:Y,fieldScore:(1+_.size(t))/(2+_.size(t)),semanticScore:_.isEmpty(l)?Se.medium:Se.strong}}(r,this.visualAuthoring,t.schema,o,u,n,t.addDefaultFormatting),h=[];return A&&h.push({config:A.config,scores:{fieldScore:A.fieldScore,semanticTypeScore:A.semanticScore}}),x&&h.push({config:x.config,scores:{fieldScore:x.fieldScore,semanticTypeScore:x.semanticScore}}),h}},e}(),Ae=j(14577),Yr=function(){function e(a){this.visualAuthoring=a}return Object.defineProperty(e.prototype,"applicableVisuals",{get:function(){return[b.L.scatterChart.name]},enumerable:!1,configurable:!0}),e.prototype.process=function(a,r,t){var i,o,u;M.fF.assertNonEmpty(a,"typedExprs"),M.fF.assertValue(r,"query"),M.fF.assertValue(t,"pluginConfig");var s=pe(a,t.schema);if(!_.isEmpty(s)){var n=_.filter(s,function(N){return!N.isMeasure}),l=_.filter(s,function(N){return N.isMeasure&&!N.isTooltip}),c=_.filter(l,function(N){return!N.isHidden}),f=_.filter(s,function(N){return N.isTooltip});_.isEmpty(c)&&(s=me(s,r,t.schema,t.aggrOps,function(N){return ye(N)}).groupedExprsWithMetadata,n=_.filter(s,function(N){return!N.isMeasure}),c=_.filter(s,function(N){return N.isMeasure&&!N.isTooltip&&!N.isHidden}));var x=_.remove(n,function(N){return N.isSingleValue});if(_.isEmpty(n)&&(n=x),!_.some(c,function(N){return N.type&&!N.type.numeric&&!N.type.integer})){var A=1,h=1,p=new ue.g(ne.vQ.create(),{},[]);if(Math.max(0,2-_.size(c))>0){for(var y=[],S=0,O=_.filter(n,function(N){return N.type&&(N.type.numeric||N.type.integer)&&1===_.size(N.exprs)&&!N.isIdentity});S<O.length;S++)!(P=t.aggrOps.createExprWithAggregate((R=O[S]).exprs[0],t.schema,!1,void 0))||!(0,de.k)(P)||y.push({original:R,measure:{exprs:[P],isMeasure:!0,type:null===(i=P.getMetadata(t.schema))||void 0===i?void 0:i.type,entity:P.getTargetEntity().entity,isTooltip:!1}});for(var E=0,I=y;E<I.length;E++){var v=I[E];_.remove(n,v.original),c.push(v.measure)}}var V=_.findLast(n,function(N,D){return D>0&&1===_.size(N.exprs)});V&&(!(V&&V.type&&V.type.text)||V.type.geography||V.type.misc)&&(h*=G.dispreferedLegendScoreReducer);for(var B=0,L=n;B<L.length;B++)for(var R,X=(R=L[B])===V?Ae.TL.series:Ae.TL.category,T=0,U=R.exprs;T<U.length;T++){var Y=r.selectNativeReferenceNameOf(P=U[T]);z(p,P,X,R.showAll,R.isParameter,Y)}Fe(p,Ae.TL.category,t.addDefaultFormatting,null===(u=null===(o=n?.[0])||void 0===o?void 0:o.groupMetadata)||void 0===u?void 0:u.maxProjectedIndex);for(var J=function(D){M.fF.assert(function(){return 1===_.size(c[D].exprs)},"measure groups should have only 1 expr");var ee=0===D?Ae.TL.x:1===D?Ae.TL.y:2===D?Ae.TL.size:Ae.TL.tooltips,Z=c[D].exprs[0],Ve=r.selectNativeReferenceNameOf(Z);z(p,Z,ee,c[D].showAll,c[D].isParameter,Ve)},F=0;F<_.size(c);F++)J(F);for(var $=0,ae=_.filter(l,function(N){return N.isHidden});$<ae.length;$++){var P,re=ae[$];Y=r.selectNativeReferenceNameOf(P=re.exprs[0]),z(p,P,Ae.TL.x,re.showAll,re.isParameter,Y,!0)}for(var q=function(D){M.fF.assert(function(){return 1===_.size(D.exprs)});var ee=D.exprs[0],Z=r.selectNativeReferenceNameOf(ee);z(p,ee,ce,D.showAll,D.isParameter,Z,D.isHidden)},Q=0,oe=f;Q<oe.length;Q++)q(oe[Q]);A=_.isEmpty(n)||_.size(c)<2?G.incompleteFieldsScore:Math.pow(G.fieldScoreBase,2-_.size(c))*Math.pow(G.fieldScoreBase,1-_.size(n)),_.some(n,function(N){return N.type&&(N.type.temporal||!N.type.text)})&&(A*=G.dispreferedLegendScoreReducer);var ve=r.orderBy();_.isEmpty(ve)||(h*=G.dispreferedSortScoreReducer);var Re=this.visualAuthoring.create({query:p,visualType:t.visualType||b.L.scatterChart.name,schema:t.schema,expr:void 0});return t.addDefaultFormatting&&function(e){e.singleVisual.objects={},(0,se.sO)(e.singleVisual.objects,{objectName:"categoryAxis",propertyName:"showAxisTitle"},void 0,(0,K.O7)(!0)),(0,se.sO)(e.singleVisual.objects,{objectName:"valueAxis",propertyName:"showAxisTitle"},void 0,(0,K.O7)(!0))}(Re),[{config:Re,scores:{fieldScore:A,semanticTypeScore:h}}]}}},e}(),kr=j(9434),qr=function(){function e(a){this.visualAuthoring=a}return Object.defineProperty(e.prototype,"applicableVisuals",{get:function(){return[b.L.slicer.name]},enumerable:!1,configurable:!0}),e.prototype.process=function(a,r,t){M.fF.assertNonEmpty(a,"typedExprs"),M.fF.assertValue(t,"pluginConfig");var i=pe(a,t.schema);if(!_.isEmpty(i)&&1===_.size(i)&&1===_.size(i[0].exprs)&&!i[0].isMeasure){var u=new ue.g(ne.vQ.create(),{},[]),s=i[0].exprs[0],n=r.selectNativeReferenceNameOf(s);return z(u,s,kr.CT.value,i[0].showAll,i[0].isParameter,n),[{config:this.visualAuthoring.create({query:u,visualType:b.L.slicer.name,schema:t.schema,expr:void 0}),scores:{fieldScore:1,semanticTypeScore:1}}]}},e}(),We=j(28199),ar=j(77435),ir=j(28107),nr=j(9380),et=j(66794),rt=j(42614),sr=j(3579),or=j(50550),tt=j(38078),at=j(75074),ur=j(38953),lr=j(19501),Ue=j(45551),Ke=j(29866),xe=j(50423),cr=j(13702),ut={provide:"visualRecommendationService",useFactory:function(e,a,r,t,i,o){return new Promise(function(u){u(new Xe(e,a,r,t,i,o))})},deps:[We.C,nr.vZ,ar.q,Ke.D,ir.Q]},Xe=function(){function e(a,r,t,i,o,u){this.aggrOps=a,this.visualPlugin=i,this.visualAuthoringCore=(0,et.Vz)(i,t,a,r,o,u),this.recommendationPlugins=[new Tr(this.visualAuthoringCore),new Pr(this.visualAuthoringCore),new Br(this.visualAuthoringCore),new Wr(this.visualAuthoringCore),new Kr(this.visualAuthoringCore),new Yr(this.visualAuthoringCore)],this.pluginsByExplicitRequestOnly=[new Lr(this.visualAuthoringCore),new zr(this.visualAuthoringCore),new Hr(this.visualAuthoringCore),new Cr(this.visualAuthoringCore)],this.pluginsForChartSuggestionOnly=[new qr(this.visualAuthoringCore)]}return e.prototype.recommendVisuals=function(a,r,t){var i,o=this;M.fF.assertValue(a,"query"),M.fF.assertValue(r,"schema"),M.fF.assertValue(t,"recommendationConfig");var s,u=t.visualType,n=[];if(function(e,a){var r=e.select();return _.some(r,function(t){var i;return(0,k.tO)(t.expr)||(null===(i=_.find(a.exprMetadata,function(o){return(0,fe.fS)(o.expression,t.expr,!0,!0)}))||void 0===i?void 0:i.isParameter)})}(a,t)){var l=b.L.tableEx.name;n.push(_.find(this.recommendationPlugins,function(v){return _.indexOf(v.applicableVisuals,l)>=0})),s=u===l?void 0:"TypeRequestedNotCompatible",u=u===l?u:void 0}else if(function(e){var a=e.select();return _.some(a,function(r){return(0,k.g5)(r.expr)&&!_.isEmpty(r.expr.scope)})}(a)){var c=b.L.pivotTable.name;n.push(_.find(this.recommendationPlugins,function(v){return _.indexOf(v.applicableVisuals,c)>=0})),s=u===c?void 0:"TypeRequestedNotCompatible",u=u===c?u:void 0}else n.push.apply(n,this.recommendationPlugins),u&&(n.push.apply(n,this.pluginsByExplicitRequestOnly),n=_.filter(n,function(v){return _.indexOf(v.applicableVisuals,u)>=0}));_.isEmpty(n)&&(n=(0,te.__spreadArray)([],this.recommendationPlugins,!0),u=void 0,s="TypeRequestedNotSupported");var f=(i=this.processInput(a,t.exprMetadata,r)).modifiedQuery,d=i.processedExprs,x=new ue.g(ne.vQ.create(),{},[]),A={visualContainers:[pr(this.visualAuthoringCore.create({query:x,visualType:u||b.L.columnChart.name,schema:r,expr:void 0}),void 0)],warning:"CouldNotGenerateResult"};if(_.isEmpty(d))return A;if(_.every(d,function(v){return v.isHidden}))return A.warning="HasOnlyHiddenFields",A;if(_.some(d,function(v){return(0,k.Lk)(v.exprs[0])&&!v.defaultLabel&&_.isEmpty(v.defaultFields)}))return A;var m={schema:r,aggrOps:this.aggrOps,addDefaultFormatting:t.addDefaultFormatting,allowTooltipMeasures:t.allowTooltipMeasures};u&&(m.visualType=u);var g=function(V){var C=o.ensureMeasures(d,f,r),B=V.process(C.groupedExprsWithMetadata,C.query,m);if(!_.isEmpty(B))return _.map(B,function(L){return{result:L,score:gt(L.scores)}})},y=rt.l.deriveFromSQFilters(f.from(),f.where(),{Select:void 0,Filters:t.filterMetadata}),S=_.chain(n).map(function(v){return g(v)}).flatten().filter(function(v){return null!=v}).value();_.isEmpty(S)&&null!=m.visualType&&(m.visualType=void 0,S=_.chain(this.recommendationPlugins).map(function(v){return g(v)}).flatten().filter(function(v){return null!=v}).value());var O=_.orderBy(S,[function(v){return v.result.config.singleVisual.visualType===m.visualType},function(v){return v.score}],["desc","desc"]);if(t.includeChartTypeOnlyAlternatives){var R=_.chain(this.pluginsForChartSuggestionOnly).map(function(v){return g(v)}).flatten().filter(function(v){return null!=v}).value();!_.isEmpty(R)&&!_.isEmpty(O)&&O.splice.apply(O,(0,te.__spreadArray)([1,0],R,!1))}_.isFunction(t.isVisualExcluded)&&(O=_.filter(O,function(v){return!t.isVisualExcluded(v.result.config.singleVisual.visualType)})),a.hasVisualCalculations()&&(O=_.filter(O,function(v){return!o.visualPlugin.capabilities(v.result.config.singleVisual.visualType).suppressVisualCalc})),O=_.take(O,t.numberOfResults),t.filterOutLowScoringResults&&(O=_.filter(O,function(v){return v.score>.1}));var P=_.map(O,function(v){return pr(v.result.config,y)});if(!_.isEmpty(P)){var E=_.first(P),I=(0,sr.s)(E);return null!=u&&I!==u&&null==s&&(s="TypeRequestedNotCompatible"),{visualContainers:P,warning:s}}return A},e.prototype.processInput=function(a,r,t){var i=a.select();if(_.isEmpty(r)&&!_.isEmpty(i)){r=[];for(var o=0,u=i;o<u.length;o++)r.push({expression:u[o].expr})}var n=_.filter(r,function(f){return(0,de.k)(f.expression)});!_.isEmpty(n)&&_.every(n,function(f){return f.isTooltip})&&_.forEach(n,function(f){return f.isTooltip=!1});var l=function(e,a,r){var t=e,i=[],o=e.select();M.fF.assert(function(){return _.size(o)===_.size(a)},"each select should have metadata");for(var u=0;u<o.length;u++){var s=o[u],n=a[u];if((0,k.y3)(s.expr)){var l=s.expr,c=(0,Ue.wA)(r,l);if(_.isEmpty(c))i.push(n);else{c=(0,or.rY)(c),t=t.removeSelect(l);for(var f=0,d=c;f<d.length;f++){var x=d[f];t=t.addSelect(x);var A=_.clone(n);A.expression=x,i.push(A)}}}else i.push(n)}return{modifiedQuery:t,modifiedExprMetadata:i}}(a,r,t);l.modifiedQuery=fr(l.modifiedQuery),l.modifiedQuery=vr(l.modifiedQuery);var c=function(e,a,r){var t,i,o,u=[],s={},n=e.select();M.fF.assert(function(){return _.size(n)===_.size(a)},"each expr should have metadata");for(var l=function(e){for(var a=e.from(),r=e.where(),t=_.chain(r).filter(function(c){return(0,k.Hi)(c.condition)&&1===_.size(c.condition.values)&&1===_.size(c.condition.values.values)||(0,k.$Q)(c.condition)&&0===c.condition.comparison}).map(function(c){return(0,k.Hi)(c.condition)?_.first(c.condition.args):(0,k.$Q)(c.condition)?c.condition.left:void 0}).value(),i=_.map(r,function(c){return(0,k.Hi)(c.condition)&&c.condition.table&&(0,k.jv)(c.condition.table)?c.condition.table.variable:void 0}),o=0,u=i;o<u.length;o++){var s=u[o];if(s){var n=a.source(s);if(!(0,lr.y)(n)){M.fF.assertFail("should be subquery source");continue}if(1===n.subquery.top()){var l=_.map(n.subquery.select(),function(c){return c.expr});t.push.apply(t,l||[])}}}return t}(e),c=function(e){for(var a=e.where(),r=new xt,t=0,i=a;t<i.length;t++)i[t].condition.accept(r);return r.fields}(e),f=new Rt,d=function(h){var p=n[h].expr;p=p.accept(f);var m=a[h],g=function(e,a){if((0,k.Lk)(e)){var r=a.schema(e.schema).entities.withName(e.entity);if(r){var t=r.defaultLabel;if(t)return(0,K.Oh)(e,t.name)}}}(p,r)||m?.defaultLabel,y=g?g.getMetadata(r):p.getMetadata(r),S=function(e,a){return a?a.geography?e?.geography?e:a:a.dateTime&&(e?.dateTime||e?.temporal)?e:a:e}(y?.type,m?.type),O=(0,de.k)(p),R=m&&!m.isGroup,P=m?.isExplicitSortBy,E=m?.isParameter,I=null===(i=null===(t=(g??p).getConceptualProperty(r))||void 0===t?void 0:t.column)||void 0===i?void 0:i.idOnEntityKey,v=function(e,a,r){if((0,k.Lk)(e)){var t=r.schema(e.schema).entities.withName(e.entity);if(t){var i=t.defaultFields;_.isEmpty(i)&&(i=_.chain(t.properties).filter(function(c){return(c.column||c.measure)&&!c.hidden}).take(G.defaultFieldCount).value());var o=[];a&&o.push(a);for(var u=0,s=i;u<s.length;u++){var n=s[u],l=n.column?(0,K.Oh)((0,K.nw)(e.schema,e.entity),n.name):(0,K.mv)((0,K.nw)(e.schema,e.entity),n.name);a&&(0,fe.fS)(l,a,!1,!0)||o.push(l)}return o}}}(p,g,r),V=null===(o=p.getTargetEntity())||void 0===o?void 0:o.entity,C=m?.isTooltip,B=m?.showAll,L=m?.groupMetadata,X=L?.groupId,T=L?.isProjected,U=m?.isHidden,Y=function(Q){var oe=_.first(p.getKeyColumns(r)),ie=g?_.first(g.getKeyColumns(r)):void 0;return(0,fe.fS)(Q,p,!1,!0)||oe&&(0,fe.fS)(Q,oe,!1,!0)||g&&(0,fe.fS)(Q,g,!1,!0)||ie&&(0,fe.fS)(Q,ie,!1,!0)},J=_.some(l,function(q){return Y(q)}),F=_.some(c,function(q){return Y(q)});g&&(g=g.accept(f));var w={exprs:[p],type:S,isMeasure:O,entity:V,isTooltip:C,canAggregate:R,defaultLabel:g,defaultFields:v,isExplicitSortBy:P,isParameter:E,isSingleValue:J,isFiltered:F,isIdentity:I,showAll:B,groupMetadata:L?{groupId:X,maxProjectedIndex:T?0:void 0}:void 0,isHidden:U},$=function(Q){if(Q){if(Q.exprs.push(p),Q.isSingleValue=!1,Q.isFiltered=Q.isFiltered||F,Q.isIdentity=void 0,T){var oe=Q.groupMetadata.maxProjectedIndex,ie=_.size(Q.exprs)-1;Q.groupMetadata.maxProjectedIndex=oe+1===ie?ie:void 0}return"Updated"}return u.push(w),"Added"};null!=X?$(_.find(u,function(q){var Q;return(null===(Q=q.groupMetadata)||void 0===Q?void 0:Q.groupId)===X})):(0,k.ez)(p)&&(0,k.y3)(p.arg)?"Added"===$(s[p.arg.hierarchy])&&(s[p.arg.hierarchy]=w):u.push(w)},x=0;x<n.length;x++)d(x);return u}(l.modifiedQuery,l.modifiedExprMetadata,t);return{modifiedQuery:l.modifiedQuery,processedExprs:c}},e.prototype.ensureMeasures=function(a,r,t){var i=_.filter(a,function(o){return!o.isMeasure&&!o.canAggregate});return _.isEmpty(i)?{groupedExprsWithMetadata:a,query:r}:me(a,r,t,this.aggrOps,function(o){return!o.isMeasure&&o.canAggregate&&ye(o)})},e.\u0275fac=function(r){return new(r||e)(xe.\u0275\u0275inject(We.C),xe.\u0275\u0275inject(nr.vZ),xe.\u0275\u0275inject(ar.q),xe.\u0275\u0275inject(Ke.D),xe.\u0275\u0275inject(ir.Q),xe.\u0275\u0275inject(cr.O))},e.\u0275prov=xe.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}();function fr(e){for(var a=dr(e,fr),r=e.where(),t=0,i=r;t<i.length;t++){var o=i[t];o.condition=o.condition.accept(new Nr),o.condition=o.condition.accept(new Sr)}return e.where(r,a)}function vr(e){var a=dr(e,vr),r=e.orderBy();if(_.isEmpty(r))return e;for(var t=0,i=r;t<i.length;t++){var o=i[t];if(null==o.direction||0===o.direction){var s=(0,de.k)(o.expr);o.direction=s?2:1}}return e.from(a).orderBy(r)}function dr(e,a){var t=e.from().sources();for(var i in t){var o=t[i];if((0,lr.y)(o)){var u=a(o.subquery);t[i]=new ur.vd(u)}}return new ur.cL(t)}function gt(e){return Math.pow(e.fieldScore,1.2)*Math.pow(e.semanticTypeScore,1.5)}function pr(e,a){return{name:tt.b$.generateGuid(),config:e,filters:a}}var xt=function(e){function a(){var r=null!==e&&e.apply(this,arguments)||this;return r.fields=[],r}return(0,te.__extends)(a,e),a.prototype.visitColumnRef=function(r){this.fields.push(r)},a.prototype.visitHierarchyLevel=function(r){this.fields.push(r)},a.prototype.visitMeasureRef=function(r){this.fields.push(r)},a}(at.PA),Rt=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return(0,te.__extends)(a,e),a.prototype.visitEntity=function(r){return(0,K.nw)(r.schema,r.entity)},a}(He.b),mr=j(60661),Nt=j(68509),yr=j(45334),At={provide:"authoringVisualRecommendationInterop",useFactory:function(e,a,r,t){return new Promise(function(i){i(new Et(e,a,r,t))})},deps:[We.C,Xe,cr.O,Ke.D]},Et=function(){function e(a,r,t,i){this.aggrOps=a,this.visualRecommendationService=r,this.displayNameService=t,this.visualPluginService=i}return e.prototype.updateWithRecommendation=function(a,r,t,i){var o;M.fF.assertValue(a,"visualContainer"),M.fF.assertAnyValue(r,"withChanges"),M.fF.assertValue(t,"schema");var u=(0,mr.PQ)(a);if(u){var s;(r?.toUpdate||r?.toAdd)&&(s=this.visualPluginService.capabilities(u.visualType));var l,n=hr(u,ne.vQ.create(),r?.toUpdate,i,t,s,this.displayNameService);r?.toAdd&&(l=function(e,a,r,t,i,o,u){var s,n=e.hasDefaultSort,l=null===(s=e.query)||void 0===s?void 0:s.defn.orderBy(),c=a,f=[];if((0,Ue.K8)(t,r))for(var d=(0,Ue.wA)(t,r),x=0,A=(0,or.rY)(d);x<A.length;x++)f.push(h=A[x]);else if(!yr.m.isExprValidForAggregation(r)||yr.m.discourageAggregation(r,t)||(0,de.k)(r))f.push(r);else{var h=o.createExprWithAggregate(r,t,!1,void 0);f.push(h)}var p=[];return _.forEach(f,function(m){var g=u.createUniqueNativeReference(m,t,e.query,i,void 0);c=c.addSelect(m,void 0,g),p.push(Ge(m,!1,!1,l,n,void 0))}),{query:c,exprMetadata:p}}(u,n.query,r.toAdd,t,s,this.aggrOps,this.displayNameService));var c=null!==(o=l?.query)&&void 0!==o?o:n.query,f=l?(0,te.__spreadArray)((0,te.__spreadArray)([],n.exprMetadata,!0),l.exprMetadata,!0):(0,te.__spreadArray)([],n.exprMetadata,!0),d=this.visualRecommendationService.recommendVisuals(c,t,{numberOfResults:1,exprMetadata:f,filterMetadata:void 0,filterOutLowScoringResults:!0,visualType:r?.visualType,isVisualExcluded:r?.isVisualExcluded});if("CouldNotGenerateResult"!==d.warning&&"HasOnlyHiddenFields"!==d.warning&&!_.isEmpty(d?.visualContainers)){var x=d.visualContainers[0].config.singleVisual;return a.config.singleVisual.query=x.query,a.config.singleVisual.visualType=x.visualType,a.config.singleVisual.conversionSourceContext=void 0,x.visualType}}},e.prototype.getRecommendedVisualTypes=function(a,r,t,i){M.fF.assertValue(a,"visualContainer"),M.fF.assertValue(r,"schema"),M.fF.assert(function(){return t>0},"invalid number of suggestions");var o=(0,mr.PQ)(a);if(o){var u=hr(o,ne.vQ.create()),s=this.visualRecommendationService.recommendVisuals(u.query,r,{numberOfResults:t,exprMetadata:u.exprMetadata,filterMetadata:void 0,filterOutLowScoringResults:!0,isVisualExcluded:i});if("CouldNotGenerateResult"!==s.warning&&"HasOnlyHiddenFields"!==s.warning&&!_.isEmpty(s?.visualContainers))return _.map(s.visualContainers,function(n){return(0,sr.s)(n)})}},e}();function Ge(e,a,r,t,i,o,u,s){var n=!(0,de.k)(e);return{expression:e,isGroup:n,isParameter:a,isTooltip:r,isExplicitSortBy:!i&&!!_.find(t,function(l){return(0,fe.fS)(l.expr,e)}),showAll:o,groupMetadata:n?u:void 0,isHidden:s}}function hr(e,a,r,t,i,o,u){var s,n,l,c=[],f=null===(s=e.query)||void 0===s?void 0:s.projections,d=null===(n=e.query)||void 0===n?void 0:n.defn.select(),x=null===(l=e.query)||void 0===l?void 0:l.defn.orderBy(),A=e.hasDefaultSort;if(_.isEmpty(f))return{exprMetadata:c,query:a};var h=a,p=0,m=function(S){for(var O=f[S],R=O.all(),P=O.activeProjectionRefs,E=O.getFieldParameters(),I=O.showAll,v=S===ce,V={},C=0,B=E;C<B.length;C++){var L=B[C];if(null!=L.index||null!=L.length&&L.length>0)for(var X=O.convertFieldIndexToProjectionIndex(L.index),T=0;T<L.length;T++)V[X+T]=L.expr;h=h.addSelect(L.expr),c.push(Ge(L.expr,!0,v,x,A,I,t?{groupId:p,isProjected:!1}:void 0))}var U=function(J){var F=void 0,w=void 0;if(V[J])return"continue";var $=_.find(d,function(q){return q.name===R[J].queryRef});if(F=$?.expr,w=$?.nativeReferenceName,r&&S===r.role&&J===r.index&&(F=(0,k.iV)(F)?F.arg:F,F=void 0===r.aggregateToUse?(0,Nt.n)(F,i):(0,K.m_)(F,r.aggregateToUse),w=u.createUniqueNativeReference(F,i,e.query,o,void 0)),M.fF.assertValue(F,"projection has to exist as a parameter or in the query selects"),F){var ae=_.indexOf(P,R[J].queryRef)>=0,re=R[J].hidden;h=h.addSelect(F,void 0,w),c.push(Ge(F,!1,v,x,A,I,t?{groupId:p,isProjected:ae}:void 0,re))}};for(T=0;T<R.length;T++)U(T);p++};for(var g in f)m(g);return{query:h,exprMetadata:c}}var Ft=j(77476),Pt=function(){function e(){}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=xe.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=xe.\u0275\u0275defineInjector({providers:[At,Xe,ut],imports:[Ft.CommonModule]}),e}()}}]);