"use strict";(self.webpackChunkdesktopDialogHost=self.webpackChunkdesktopDialogHost||[]).push([["pbicopilot-desktop"],{57485:function(F,h,l){l.r(h),l.d(h,{PBICopilotDesktopModule:function(){return D}});var e=l(77476),b=l(82762),u=l(50423),f=l(80795),P=function(){function t(){this.aiScenarioDesktopService=(0,u.inject)(f.$)}return t.prototype.runScenario=function(o,r){if(r)throw Error("Streaming not yet supported");var n=this.aiScenarioDesktopService.complete(o);return(0,b.D)(n)},t.\u0275prov=u.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac=function(r){return new(r||t)}}),t}(),i=l(81337),y=l(94759),I=l(98665),B=l(94853),m=l(83019),N=function(){function t(){this.telemetryService=(0,u.inject)(I.y0),this.aiScenarioDesktopService=(0,u.inject)(f.$)}return t.prototype.complete=function(o,r,n){return(0,i.__awaiter)(this,void 0,void 0,function(){var a,c,s,p;return(0,i.__generator)(this,function(d){switch(d.label){case 0:return a=(0,i.__assign)({scenarioDefinition:{aiClientCompletion:o}},r),c=this.buildCopilotUsageRequest(a,r),s=this.telemetryService.startEvent(m.ob,(0,i.__assign)({promptLength:o.prompt.length},n?.telemetryOptions||{})),[4,this.aiScenarioDesktopService.complete(c)];case 1:if((p=d.sent()).error)throw this.logError(s,p.error),p;return s.resolve(),[2,p]}})})},t.prototype.embedding=function(o,r,n){return(0,i.__awaiter)(this,void 0,void 0,function(){var a,v,s;return(0,i.__generator)(this,function(p){switch(p.label){case 0:return a=this.buildCopilotUsageRequest(o,r),v=this.telemetryService.startEvent(m.yI,(0,i.__assign)({inputLength:a.input.length},n?.telemetryOptions||{})),[4,this.aiScenarioDesktopService.embedding(a)];case 1:if((s=p.sent()).error)throw this.logError(v,s.error),s;return v.resolve(),[2,s]}})})},t.prototype.complete$=function(o){throw new Error("complete$ not yet implemented")},t.prototype.chatCompletion=function(o,r,n){var a;return(0,i.__awaiter)(this,void 0,void 0,function(){var c,C,v,s,p,d,E,g;return(0,i.__generator)(this,function(S){switch(S.label){case 0:return c=this.buildCopilotUsageRequest(o,r),C=n?.telemetryOptions||{},v=o.model,s=y.eH[null===(a=o.client_scenario)||void 0===a?void 0:a.scenario_type],p=c.messages.length,d=c.messages.map(function(x){return x.content?x.content.length:0}),E=this.telemetryService.startEvent(m.C_,(0,i.__assign)({numberOfMessages:p,messageLengths:d,scenarioType:s,model:v},C)),[4,this.aiScenarioDesktopService.chatCompletion(c)];case 1:if((g=S.sent()).error)throw this.logError(E,g.error),g;return E.resolve(),[2,g]}})})},t.prototype.buildCopilotUsageRequest=function(o,r){return(0,i.__assign)((0,i.__assign)({},o),{copilotUsageMetadata:r})},t.prototype.logError=function(o,r){var n;r&&(n=(0,B.GB)(r)),o.reject(n)},t.\u0275prov=u.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac=function(r){return new(r||t)}}),t}(),k=l(66971),R=function(){function t(o){this.titlebarService=o}return t.prototype.getReportTitle=function(){return(0,i.__awaiter)(this,void 0,void 0,function(){return(0,i.__generator)(this,function(o){return[2,this.titlebarService.getTitleAsync()]})})},t.prototype.getAvailableTokens=function(){return(0,i.__awaiter)(this,void 0,void 0,function(){return(0,i.__generator)(this,function(o){throw new Error("getAvailableTokens not available in Desktop")})})},t.\u0275fac=function(r){return new(r||t)(u.\u0275\u0275inject(k.M))},t.\u0275prov=u.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t}(),D=function(){function t(){}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=u.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=u.\u0275\u0275defineInjector({providers:[{provide:"copilotScenarioProxyService",useClass:P},{provide:"copilotLLMProxyService",useClass:N},{provide:"reportContentCopilotProxyService",useClass:R}],imports:[e.CommonModule]}),t}()},83019:function(F,h,l){l.d(h,{C_:function(){return I},P0:function(){return U},T4:function(){return j},fD:function(){return O},ob:function(){return u},yI:function(){return P}});var e=l(41114),b="PBI.Copilot.CompletionEvent",u=e.cx[b]=(0,e.b1)(b),f="PBI.Copilot.EmbeddingEvent",P=e.cx[f]=(0,e.b1)(f),i="PBI.Copilot.StreamCompletionEvent",y="PBI.Copilot.ChatCompletionEvent",I=e.cx[y]=(0,e.b1)(y),m=(e.cx[i]=(0,e.b1)(i),"PBI.Copilot.GetSerializedSchema"),k=(e.cx[m]=(0,e.b1)(m),"PBI.Copilot.UndoSkill"),D=(e.cx[k]=(0,e.b1)(k),"PBI.Copilot.RetrySkill"),o=(e.cx[D]=(0,e.b1)(D),"PBI.Copilot.ZeroPromptAction"),n=(e.cx[o]=(0,e.b1)(o),"PBI.Copilot.PromptGuideAction"),c=(e.cx[n]=(0,e.b1)(n),"PBI.Copilot.SkillSetExecution"),v=(e.cx[c]=(0,e.b1)(c),"PBI.Copilot.UserTurn"),p=(e.cx[v]=(0,e.b1)(v),"PBI.Copilot.CopilotTurn"),E=(e.cx[p]=(0,e.b1)(p),"PBI.Copilot.CopilotTurnSkillExecution"),S=(e.cx[E]=(0,e.b1)(E),"PBI.Copilot.AggregationError"),T=(e.cx[S]=(0,e.b1)(S),"PBI.Copilot.NonRetriableError"),w=(e.cx[T]=(0,e.b1)(T),"PBI.Copilot.RetriableError"),L=(e.cx[w]=(0,e.b1)(w),"PBI.Copilot.FeedbackDialog"),U=e.cx[L]=(0,e.b1)(L),M="PBI.Copilot.FeedbackDialogError",j=e.cx[M]=(0,e.b1)(M),A="PBI.Copilot.FeedbackDialogView",O=e.cx[A]=(0,e.b1)(A)}}]);