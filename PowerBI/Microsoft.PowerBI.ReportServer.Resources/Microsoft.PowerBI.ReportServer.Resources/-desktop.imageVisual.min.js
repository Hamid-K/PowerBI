"use strict";

(self.webpackChunkdesktop = self.webpackChunkdesktop || []).push([ [ "imageVisual" ], {
    14021: function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {
        __webpack_require__.r(__webpack_exports__), __webpack_require__.d(__webpack_exports__, {
            ImageVisual: function() {
                return ImageVisual;
            }
        });
        var _Visuals_capabilities_imageVisual_capabilities__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(83479), _Visuals_types_imageScalingType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(48966), _VisualsCommon_Utility_browserUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(59107), _VisualsCommon_Utility_build_control_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(56578), _VisualsCommon_Utility_Utility__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(38078), ImageVisual = function() {
            function ImageVisual() {
                this.scalingType = _Visuals_types_imageScalingType__WEBPACK_IMPORTED_MODULE_0__.C.normal;
            }
            return ImageVisual.prototype.init = function(options) {
                this.element = options.element, this.hostServices = options.host, this.featureSwitches = options.featureSwitches;
            }, ImageVisual.prototype.enumerateObjectInstances = function(options) {
                return "imageScaling" === options.objectName ? this.enumerateImageScaling() : null;
            }, ImageVisual.prototype.getFormattingModel = function() {
                var _this = this;
                return new _VisualsCommon_Utility_build_control_util__WEBPACK_IMPORTED_MODULE_1__.Nq(function() {
                    return _this.getStyleCard();
                }, function() {
                    return _this.getVisualLinkPlaceholder();
                }).build();
            }, ImageVisual.prototype.getStyleCard = function() {
                var _a, _this = this, imageScalingProps = _Visuals_capabilities_imageVisual_capabilities__WEBPACK_IMPORTED_MODULE_2__._g.imageScaling;
                return new _VisualsCommon_Utility_build_control_util__WEBPACK_IMPORTED_MODULE_1__.CQ(new _VisualsCommon_Utility_build_control_util__WEBPACK_IMPORTED_MODULE_1__.lg("style"), (null === (_a = this.featureSwitches) || void 0 === _a ? void 0 : _a.onObject) ? "Visual_ImageStyle" : "Style", [ imageScalingProps.imageScalingType ], function(key) {
                    return _this.hostServices.getLocalizedString(key);
                }).addGroup("default", function(groupBuilder) {
                    groupBuilder.addSimpleSlice("scaling", new _VisualsCommon_Utility_build_control_util__WEBPACK_IMPORTED_MODULE_1__.uY({
                        descriptor: imageScalingProps.imageScalingType,
                        value: _this.scalingType
                    }).build());
                }).build();
            }, ImageVisual.prototype.getVisualLinkPlaceholder = function() {
                return (0, _VisualsCommon_Utility_build_control_util__WEBPACK_IMPORTED_MODULE_1__.UH)("actions");
            }, ImageVisual.prototype.enumerateImageScaling = function() {
                return [ {
                    selector: null,
                    objectName: "imageScaling",
                    properties: {
                        imageScalingType: this.scalingType
                    }
                } ];
            }, ImageVisual.prototype.onViewModeChanged = function(viewMode) {
                this.updateVisualLinkProps();
            }, ImageVisual.prototype.update = function(options) {
                var _this = this, dataViews = options.dataViews;
                if (dataViews && 0 !== dataViews.length) {
                    var objects = dataViews[0].metadata.objects;
                    if (objects && objects.general) {
                        var div = this.imageBackgroundElement;
                        div || ((div = $("<div class='imageBackground' ></div>")).click(function(event) {
                            var selectingArgs = {
                                type: 0,
                                visualObjects: [ {
                                    objectName: "image",
                                    selectorsByColumn: {}
                                } ],
                                isCtrlOrMetaKey: _VisualsCommon_Utility_browserUtils__WEBPACK_IMPORTED_MODULE_3__.M.isCtrlOrMeta(event),
                                isShiftKey: event.shiftKey,
                                position: {
                                    x: event.clientX,
                                    y: event.clientY
                                }
                            };
                            _this.hostServices.onSelecting(selectingArgs), 1 === selectingArgs.action && event.stopPropagation();
                        }), this.imageBackgroundElement = div, this.imageBackgroundElement.appendTo(this.element));
                        var viewport = options.viewport;
                        div.css("height", viewport.height), div.css("width", viewport.width), this.scalingType = objects.imageScaling ? objects.imageScaling.imageScalingType.toString() : _Visuals_types_imageScalingType__WEBPACK_IMPORTED_MODULE_0__.C.normal;
                        var imageUrl = objects.general.imageUrl;
                        _VisualsCommon_Utility_Utility__WEBPACK_IMPORTED_MODULE_4__.b$.isLocalUrl(imageUrl) && div.css("backgroundImage", "url(" + imageUrl + ")"), 
                        div.css("background-size", this.scalingType === _Visuals_types_imageScalingType__WEBPACK_IMPORTED_MODULE_0__.C.fit ? "100% 100%" : this.scalingType === _Visuals_types_imageScalingType__WEBPACK_IMPORTED_MODULE_0__.C.fill ? "cover" : "contain"), 
                        this.updateVisualLinkProps();
                    }
                }
            }, ImageVisual.prototype.updateVisualLinkProps = function() {
                var visualLinkProps = this.hostServices.getVisualLinkProperties();
                visualLinkProps && this.imageBackgroundElement && this.imageBackgroundElement.css("cursor", visualLinkProps.hasVisualLink ? "pointer" : "inherit");
            }, ImageVisual;
        }();
    }
} ]);