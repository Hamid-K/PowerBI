"use strict";(self.webpackChunkdesktopDaxQueryView=self.webpackChunkdesktopDaxQueryView||[]).push([["pbicopilot-desktop"],{57485:function(O,g,s){s.r(g),s.d(g,{PBICopilotDesktopModule:function(){return I}});var D=s(77476),k=s(82762),p=s(50423),y=s(80795),E=function(){function e(){this.aiScenarioDesktopService=(0,p.inject)(y.$)}return e.prototype.runScenario=function(t,o){if(o)throw Error("Streaming not yet supported");var n=this.aiScenarioDesktopService.complete(t);return(0,k.D)(n)},e.\u0275prov=p.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac=function(o){return new(o||e)}}),e}(),r=s(81337),b=s(62345),L=s(58707),w=s(94853),h=s(83019),M=function(){function e(){this.telemetryService=(0,p.inject)(L.y0),this.aiScenarioDesktopService=(0,p.inject)(y.$)}return e.prototype.complete=function(t,o,n){return(0,r.__awaiter)(this,void 0,void 0,function(){var i,l,a,c;return(0,r.__generator)(this,function(f){switch(f.label){case 0:return i=(0,r.__assign)({scenarioDefinition:{aiClientCompletion:t}},o),l=this.buildCopilotUsageRequest(i,o),a=this.telemetryService.startEvent(h.ob,(0,r.__assign)({promptLength:t.prompt.length},n?.telemetryOptions||{})),[4,this.aiScenarioDesktopService.complete(l)];case 1:if((c=f.sent()).error)throw this.logError(a,c.error),c;return a.resolve(),[2,c]}})})},e.prototype.embedding=function(t,o,n){return(0,r.__awaiter)(this,void 0,void 0,function(){var i,u,a;return(0,r.__generator)(this,function(c){switch(c.label){case 0:return i=this.buildCopilotUsageRequest(t,o),u=this.telemetryService.startEvent(h.yI,(0,r.__assign)({inputLength:i.input.length},n?.telemetryOptions||{})),[4,this.aiScenarioDesktopService.embedding(i)];case 1:if((a=c.sent()).error)throw this.logError(u,a.error),a;return u.resolve(),[2,a]}})})},e.prototype.complete$=function(t){throw new Error("complete$ not yet implemented")},e.prototype.chatCompletion=function(t,o,n){var i;return(0,r.__awaiter)(this,void 0,void 0,function(){var l,v,u,a,c,f,m,d;return(0,r.__generator)(this,function(S){switch(S.label){case 0:return l=this.buildCopilotUsageRequest(t,o),v=n?.telemetryOptions||{},u=t.model,a=b.eH[null===(i=t.client_scenario)||void 0===i?void 0:i.scenario_type],c=l.messages.length,f=l.messages.map(function(C){return C.content?C.content.length:0}),m=this.telemetryService.startEvent(h.C_,(0,r.__assign)({numberOfMessages:c,messageLengths:f,scenarioType:a,model:u},v)),[4,this.aiScenarioDesktopService.chatCompletion(l)];case 1:if((d=S.sent()).error)throw this.logError(m,d.error),d;return m.resolve(),[2,d]}})})},e.prototype.buildCopilotUsageRequest=function(t,o){return(0,r.__assign)((0,r.__assign)({},t),{copilotUsageMetadata:o})},e.prototype.logError=function(t,o){var n;o&&(n=(0,w.GB)(o)),t.reject(n)},e.\u0275prov=p.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac=function(o){return new(o||e)}}),e}(),R=s(66971),j=function(){function e(t){this.titlebarService=t}return e.prototype.getReportTitle=function(){return(0,r.__awaiter)(this,void 0,void 0,function(){return(0,r.__generator)(this,function(t){return[2,this.titlebarService.getTitleAsync()]})})},e.prototype.getAvailableTokens=function(){return(0,r.__awaiter)(this,void 0,void 0,function(){return(0,r.__generator)(this,function(t){throw new Error("getAvailableTokens not available in Desktop")})})},e.\u0275fac=function(o){return new(o||e)(p.\u0275\u0275inject(R.M))},e.\u0275prov=p.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),I=function(){function e(){}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=p.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=p.\u0275\u0275defineInjector({providers:[{provide:"copilotScenarioProxyService",useClass:E},{provide:"copilotLLMProxyService",useClass:M},{provide:"reportContentCopilotProxyService",useClass:j}],imports:[D.CommonModule]}),e}()}}]);