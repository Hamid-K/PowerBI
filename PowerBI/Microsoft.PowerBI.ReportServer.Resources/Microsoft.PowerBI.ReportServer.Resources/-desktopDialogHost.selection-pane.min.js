"use strict";(self.webpackChunkdesktopDialogHost=self.webpackChunkdesktopDialogHost||[]).push([["selection-pane"],{78656:function(vt,de,p){p.r(de),p.d(de,{SelectionPaneModule:function(){return Mn}});var c=p(81337),m=p(21728),t=p(50423),O=p(72262),S=function(){function o(e){this.selectionService=e}return o.prototype.click=function(e){var n=e.flatNode.node.data.canvasItem.contract,i=e.flatNode,r=e.sourceEvent;r.ctrlKey?m.UP.isCanvasItemSelected(n,this.selectionService)?m.UP.unselectCanvasItem(n,this.selectionService):(m.UP.selectCanvasItem(n,this.selectionService,1),this.startRangeSelectionNode=i.node):r.shiftKey&&this.startRangeSelectionNode?i.node.parent===this.startRangeSelectionNode.parent?(this.selectionService.clearSelection(),this.selectNodesRange(this.startRangeSelectionNode,i.node)):this.singleSelection(i.node,n):m.UP.isCanvasItemSelected(n,this.selectionService)?(this.selectionService.clearSelection(),this.startRangeSelectionNode=void 0):this.singleSelection(i.node,n),e.tree.renderNodeChanges()},o.prototype.setTree=function(e){this.tree=e},o.prototype.singleSelection=function(e,n){this.selectionService.clearSelection(),m.UP.selectCanvasItem(n,this.selectionService),this.startRangeSelectionNode=e},o.prototype.selectNodesRange=function(e,n){var i,r,a;e.parent&&n.parent?(i=e.parent.children.findIndex(function(s){return e.data.canvasItem.name===s.data.canvasItem.name}),r=n.parent.children.findIndex(function(s){return n.data.canvasItem.name===s.data.canvasItem.name}),a=n.parent.children):(i=this.tree.nodes.findIndex(function(s){return e.data.canvasItem.name===s.data.canvasItem.name}),r=this.tree.nodes.findIndex(function(s){return n.data.canvasItem.name===s.data.canvasItem.name}),a=this.tree.nodes),m.UP.selectCanvasItems(a.slice(Math.min(i,r),Math.max(i,r)+1).map(function(s){return s.data.canvasItem.contract}),this.selectionService)},o.\u0275fac=function(n){return new(n||o)(t.\u0275\u0275inject(O.z))},o.\u0275prov=t.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac}),o}(),b=p(60661),k=p(11494),H=function(){function o(e){this.eventBridge=e}return o.prototype.enter=function(e){(0,b.vz)(!0,e.flatNode.node.data.canvasItem.contract.name,this.eventBridge)},o.prototype.leave=function(e){(0,b.vz)(!1,e.flatNode.node.data.canvasItem.contract.name,this.eventBridge)},o.\u0275fac=function(n){return new(n||o)(t.\u0275\u0275inject(k.J))},o.\u0275prov=t.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac}),o}(),f=p(7077),E=function(){function o(){}return o.getFlattenedVisibleNodes=function(e){for(var n=[],i=0,r=e;i<r.length;i++){var a=r[i];n.push(a),a.expanded&&(0,f.q4)(a.data.canvasItem)&&(n=n.concat(this.getFlattenedVisibleNodes(a.children)))}return n},o.isDroppedAtEndOfList=function(e,n){if(e<=0)return!1;var i=n[e-1];return this.isTheLastChild(i)&&i&&((0,f.Vz)(i.data.canvasItem)||!i.expanded)},o.isTheLastChild=function(e){return e.parent&&e.data.canvasItem.name===e.parent.children[e.parent.children.length-1].data.canvasItem.name},o.createNewNameChangeObject=function(e){return[{merge:[{objectName:"title",properties:{text:e},selector:null}]}]},o}(),A=p(23306),w=p(59725),U=p(30794),ue=p(59142),be=p(46015),X=p(28894),Le=function(){function o(e,n,i,r){this.explorationNavigationService=e,this.lazyScoped=n,this.selectionService=i,this.visualContainerGroupAuthoringService=r,this.dragDropChange$=new U.xQ,this.zIndexPromise=this.lazyScoped.get("zIndexService")}return o.prototype.dragStart=function(e){var n=e.sourceEvent,i=e.flatNode;this.dragSourceNode=i.node,n.dataTransfer.setData(w.L$,JSON.stringify({id:i.node.id,label:i.node.displayName})),m.UP.isCanvasItemSelected(i.node.data.canvasItem.contract,this.selectionService)||m.UP.selectCanvasItem(i.node.data.canvasItem.contract,this.selectionService),this.flattenedVisibleNodes=E.getFlattenedVisibleNodes(this.tree.nodes),this.startIndex=this.flattenedVisibleNodes.findIndex(function(s){return s.data.canvasItem.name===i.node.data.canvasItem.name})},o.prototype.drop=function(e){var n=e.sourceEvent,i=e.flatNode;if(this.dragSourceNode&&(i.node.dragBorderTop=!1,i.node.dragBorderBottom=!1,n.dataTransfer.getData(w.L$)&&!(this.dragSourceNode.data.canvasItem.name===i.node.data.canvasItem.name||(0,f.q4)(this.dragSourceNode.data.canvasItem)&&(0,A.sE)(i.node.data.canvasItem.name,this.dragSourceNode.data.canvasItem.children)))){var r=this.flattenedVisibleNodes.findIndex(function(a){return a.data.canvasItem.name===i.node.data.canvasItem.name});n.preventDefault(),this.dropHelper(i,r)}},o.prototype.dropHelper=function(e,n){return(0,c.__awaiter)(this,void 0,void 0,function(){var i,r,a,s,d,l;return(0,c.__generator)(this,function(g){switch(g.label){case 0:return[4,this.zIndexPromise];case 1:return i=g.sent(),a=this.dragSourceNode.data.canvasItem.contract,s=(r=e.node.data.canvasItem).contract.parentGroup?r.contract.parentGroup.children:this.tree.nodes.map(function(h){return h.data.canvasItem.contract}),d=!1,n<this.startIndex?n-1>0&&E.isDroppedAtEndOfList(n,this.flattenedVisibleNodes)?(i.moveBefore((r=this.flattenedVisibleNodes[n-1].data.canvasItem).contract.parentGroup.children,r,[a]),d=E.isDroppedAtEndOfList(n,this.flattenedVisibleNodes)):i.moveAfter(s,r,[a]):(0,f.q4)(e.node.data.canvasItem)&&e.node.expanded?i.moveAfter((r=this.flattenedVisibleNodes[n+1].data.canvasItem).contract.parentGroup.children,r,[a]):(s.findIndex(function(h){return h.name===r.name})===s.length-1&&(d=!0),i.moveBefore(s,r,[a])),r.contract.parentGroup===a.parentGroup||(l=this.explorationNavigationService.getCurrentExploreCanvas(),this.visualContainerGroupAuthoringService.moveCanvasItemInTree(l,a,r.contract,d)),this.dragDropChange$.next(!0),[2]}})})},o.prototype.dragOver=function(e){this.dragSourceNode&&e.sourceEvent.preventDefault()},o.prototype.dragEnter=function(e){this.dragSourceNode&&this.dragEnterHelper(e.flatNode)},o.prototype.dragEnterHelper=function(e){if(!(this.dragSourceNode.data.canvasItem.name===e.node.data.canvasItem.name||(0,f.q4)(this.dragSourceNode.data.canvasItem)&&(0,A.sE)(e.node.data.canvasItem.name,this.dragSourceNode.data.canvasItem.children))){var n=this.flattenedVisibleNodes.findIndex(function(i){return i.data.canvasItem.name===e.node.data.canvasItem.name});if(n<this.startIndex){if(n-1>=0&&this.flattenedVisibleNodes[n-1].grayedOut)return;e.node.dragBorderTop=!0}else{if(e.node.grayedOut)return;e.node.dragBorderBottom=!0}}},o.prototype.dragLeave=function(e){var n=e.flatNode;n.node.dragBorderTop=!1,n.node.dragBorderBottom=!1},o.prototype.dragEnd=function(e){var n=e.flatNode;this.dragSourceNode&&(this.dragSourceNode=void 0,n.node.dragBorderTop=!1,n.node.dragBorderBottom=!1,this.startIndex=void 0)},o.prototype.getDragDropChange$=function(){return this.dragDropChange$.asObservable()},o.prototype.setTree=function(e){this.tree=e},o.\u0275fac=function(n){return new(n||o)(t.\u0275\u0275inject(ue.I),t.\u0275\u0275inject(X.H),t.\u0275\u0275inject(O.z),t.\u0275\u0275inject(be.p))},o.\u0275prov=t.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac}),o}(),Z=p(66890),it=function(){function o(e){this.visualAuthoring=e}return o.prototype.beginEdit=function(e){e.sourceEvent&&e.sourceEvent.stopPropagation(),this.previousLabel=e.flatNode.node.displayName,e.flatNode.node.editing=!0},o.prototype.edit=function(e){e.flatNode.node.displayName=e.value},o.prototype.endEdit=function(e){e.sourceEvent.stopPropagation();var n=e.flatNode.node;if(n.editing=!1,0!==n.displayName.length&&this.previousLabel!==n.displayName){var i=e.flatNode.node.displayName;e.flatNode.node.displayName=i,e.flatNode.node.ariaLabel=i,(0,f.Vz)(e.flatNode.node.data.canvasItem)?this.visualAuthoring.persistVCProperties(E.createNewNameChangeObject(i),e.flatNode.node.data.canvasItem.contract):this.visualAuthoring.setVisualContainerGroupDisplayName(i,[e.flatNode.node.data.canvasItem.contract]),e.tree.renderNodeChanges()}else e.flatNode.node.displayName=this.previousLabel},o.\u0275fac=function(n){return new(n||o)(t.\u0275\u0275inject(Z.$8))},o.\u0275prov=t.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac}),o}(),G=p(80981),pe=p(18659),F=p(9215),L=p(62458),P=p(82332),ge=p(26898),W=p(83008),ie=p(13702),J=p(9380),Y=p(65181),ve=p(39631),oe=p(83309),q=p(29866),ot=function(){function o(e,n,i,r,a,s,d,u,l){this.conceptualSchemaProxy=e,this.dataSources=n,this.displayNameService=i,this.featureSwitchService=r,this.localizationService=a,this.pauseQueriesService=s,this.screenReaderService=d,this.visualAuthoring=u,this.visualPlugin=l,this.inlineItemChange$=new U.xQ,this.inlineItemToggleVisibilityShown={type:w.Q_.Button,id:P.SO,icon:{type:0,glyph:P.qV},label:this.localizationService.get("ExplorationCanvasItemsPane_Hide")},this.inlineItemToggleVisibilityHidden={type:w.Q_.Button,id:P.zB,icon:{type:0,glyph:P.cD},label:this.localizationService.get("ExplorationCanvasItemsPane_Show")},this.inlineItemToggleVisibilityDisabled={type:w.Q_.Icon,id:P.S6,icon:{type:0,glyph:P.qV},label:this.localizationService.get("ExplorationCanvasItemsPane_Hide"),disabled:!0},this.inlineItemRefreshVisual={type:w.Q_.Button,id:P.TV,icon:{type:0,glyph:P.c5},label:this.localizationService.get("Refresh")}}return o.prototype.click=function(e){var i,r,a,s,d,n=this,u=e.flatNode,l=null===(r=null===(i=u.node.data)||void 0===i?void 0:i.canvasItem)||void 0===r?void 0:r.contract,g=null===(d=null===(s=null===(a=u.node.parent)||void 0===a?void 0:a.data)||void 0===s?void 0:s.canvasItem)||void 0===d?void 0:d.contract;if(e.item.id===P.SO){if(!u.node.parent||g&&!this.isItemHidden(g)){if(L.fF.assert(function(){return!n.isItemHidden(l)},"Selection inline item strategy - item should not be hidden already"),this.isItemVisibilityDisabled(l))return;this.setVisibility(l,!1),this.readOutVisibilityChange(!0,l)}}else if(e.item.id===P.zB)(!u.node.parent||u.node.parent&&!this.isItemHidden(g))&&(L.fF.assert(function(){return n.isItemHidden(l)},"Selection inline item strategy - item should not be shown already"),this.setVisibility(l,!0),this.readOutVisibilityChange(!1,l));else{if(e.item.id===P.S6)return;e.item.id===P.TV?this.pauseQueriesService.refreshVisuals(l.name):L.fF.assertFail("Selection inline item strategy - unexpected button id")}e.sourceEvent.stopPropagation(),this.inlineItemChange$.next(!0)},o.prototype.setVisibility=function(e,n){this.setCanvasItemsVisibility(e,n)},o.prototype.setCanvasItemsVisibility=function(e,n){var i=!n;(0,F.Vz)(e)?this.visualAuthoring.setVisibility(i,[e]):this.visualAuthoring.setVisualContainerGroupVisibility(i,[e])},o.prototype.isItemHidden=function(e){return(0,F.Vz)(e)?(0,G.xj)(e.config.singleVisual):(0,pe.xj)(e)},o.prototype.isItemVisibilityDisabled=function(e){for(var n=e.parentGroup;n;){if(n.isHidden)return!0;n=n.parentGroup}return n&&n.isHidden},o.prototype.getInlineItemChange$=function(){return this.inlineItemChange$.asObservable()},o.prototype.getInlineItems=function(e){var n=[];return this.isItemInPausedState(e)&&n.push(this.inlineItemRefreshVisual),this.isItemHidden(e.contract)?n.push(this.inlineItemToggleVisibilityHidden):this.isItemVisibilityDisabled(e.contract)?n.push(this.inlineItemToggleVisibilityDisabled):n.push(this.inlineItemToggleVisibilityShown),n},o.prototype.isItemInPausedState=function(e){return!(!this.featureSwitchService.featureSwitches.optimizeTabRibbon||!(0,f.Vz)(e)||!e.visualPausedWarning)},o.prototype.readOutVisibilityChange=function(e,n){return(0,c.__awaiter)(this,void 0,void 0,function(){var i,r,a;return(0,c.__generator)(this,function(s){switch(s.label){case 0:return i=e?"ExplorationCanvasItemsPane_Hidden":"ExplorationCanvasItemsPane_Shown",(0,F.Vz)(n)?[4,(0,b.uo)(n,{dataSources:this.dataSources,conceptualSchemaProxy:this.conceptualSchemaProxy,visualPlugin:this.visualPlugin,displayNameService:this.displayNameService})]:[3,2];case 1:return r=s.sent(),[3,3];case 2:r=n.displayName,s.label=3;case 3:return a=this.localizationService.format(i,r),this.screenReaderService.alertPolite(a),[2]}})})},o.\u0275fac=function(n){return new(n||o)(t.\u0275\u0275inject(ge.i),t.\u0275\u0275inject(W.D),t.\u0275\u0275inject(ie.O),t.\u0275\u0275inject(J.vZ),t.\u0275\u0275inject(Y.o),t.\u0275\u0275inject(ve.F),t.\u0275\u0275inject(oe.g),t.\u0275\u0275inject(Z.$8),t.\u0275\u0275inject(q.D))},o.\u0275prov=t.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac}),o}(),ye=function(){function o(){this.sendItemsDirectionKeyboard$=new U.xQ,this.toggleItemsVisibilityKeyboard$=new U.xQ}return o.prototype.getSendItemsDirectionKeyboard$=function(){return this.sendItemsDirectionKeyboard$},o.prototype.getToggleItemsVisibilityKeyboard$=function(){return this.toggleItemsVisibilityKeyboard$},o.prototype.treeNodeKeyDown=function(e){var n=e.sourceEvent;if(e.flatNode.node.editable&&(n.ctrlKey||n.metaKey)&&n.shiftKey)switch(n.key){case"B":return this.sendItemsDirectionKeyboard$.next(!1),!0;case"F":return this.sendItemsDirectionKeyboard$.next(!0),!0;case"S":return this.toggleItemsVisibilityKeyboard$.next(),!0;default:return!1}return!1},o.prototype.backgroundKeyDown=function(e){},o.\u0275prov=t.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac=function(n){return new(n||o)}}),o}(),Se=p(37335),Ve=p(66901),rt=p(64560),Pe=function(){function o(e,n){this.localizationService=e,this.visualContainerMenuFactoryService=n,this.menuMode=rt.Kb.Compact}return o.prototype.getMenu=function(e){return(0,c.__awaiter)(this,void 0,void 0,function(){var i,r;return(0,c.__generator)(this,function(s){switch(s.label){case 0:return[4,this.visualContainerMenuFactoryService.createCommands(e.flatNode.node.data.canvasItem,{data:void 0,position:{x:0,y:0}},void 0,void 0,!1,{})];case 1:return i=s.sent(),this.vcContextMenu=new Ve.u(this.localizationService),[4,this.vcContextMenu.createItems(i)];case 2:return r=s.sent(),[2,Se.p.createPbiMenu(r.items,!1)]}})})},o.prototype.menuItemClick=function(e){var n=this;L.fF.assert(function(){return!!n.vcContextMenu},"SelectionPaneLayerMenuStrategy - Issue in state for commands"),Se.p.menuItemClick(e.menuItem.id,this.vcContextMenu)},o.\u0275fac=function(n){return new(n||o)(t.\u0275\u0275inject(Y.o),t.\u0275\u0275inject(Se.p))},o.\u0275prov=t.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac}),o}(),re=p(33554),he=p(35510),_e=function(){function o(){this.zSortedState$=new he.X(!1),this.tabSortedState$=new he.X(!1),this.listRebuildData$=new U.xQ,this.notifyUserLayerDataChanged$=new U.xQ}return o.prototype.getZSortedState$=function(){return this.zSortedState$},o.prototype.getTabSortedState$=function(){return this.tabSortedState$},o.prototype.markTabSorted=function(e){this.tabSortedState$.next(e)},o.prototype.markZSorted=function(e){this.zSortedState$.next(e)},o.prototype.getListRebuildData$=function(){return this.listRebuildData$},o.prototype.rebuildListData=function(){this.listRebuildData$.next()},o.prototype.getNotifyUserLayerDataChanged$=function(){return this.notifyUserLayerDataChanged$},o.prototype.notifyUserLayerDataChanged=function(e){this.notifyUserLayerDataChanged$.next(e)},o.prototype.sortItemsByProperty=function(e,n,i){var r=_.orderBy(e,n,"desc"),a={sortedItems:r};i&&(a.isDirty=!this.areCanvasItemsEqual(i,r));for(var s=0;s<r.length;s++){var d=r[s],u=i&&i[s];if((0,f.q4)(d)){var l=u&&(0,f.q4)(u)&&u.children||[],g=this.sortItemsByProperty(d.children,n,i?l:void 0);i&&(a.isDirty=a.isDirty||g.isDirty),d.children=g.sortedItems}}return a},o.prototype.areCanvasItemsEqual=function(e,n){if(e.length!==n.length)return!1;for(var i=0;i<e.length;i++){var r=e[i],a=n[i];if((0,f.Vz)(r)!==(0,f.Vz)(a)||r.name!==a.name)return!1}return!0},o.\u0275prov=t.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac=function(n){return new(n||o)},providedIn:"root"}),o}();function Be(o,e){if(1&o&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"tab-order-section",9),t.\u0275\u0275elementContainerEnd()),2&o){var n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("groups",n.groups)("visualContainers",n.visualContainers)}}function at(o,e){if(1&o&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"layer-order-section",9),t.\u0275\u0275elementContainerEnd()),2&o){var n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("groups",n.groups)("visualContainers",n.visualContainers)}}var Oe=function(e){return{active:e}},st=function(e,n){return{sectionLength:e,currentSection:n}},z=function(o){return o[o.listOrderSection=0]="listOrderSection",o[o.tabOrderSection=1]="tabOrderSection",o}({}),M=function(o){return o[o.grouping=0]="grouping",o[o.flatten=1]="flatten",o}({}),fe=function(){function o(e){this.selectionPaneListOrderService=e,this.SectionType=z,this.activeSection$=new re.t(1),this.activeSection$.next(z.listOrderSection)}return o.prototype.setActiveSection=function(e){e===z.listOrderSection?(this.selectionPaneListOrderService.markZSorted(!1),this.activeSection$.next(z.listOrderSection),this.selectionPaneListOrderService.rebuildListData()):(this.selectionPaneListOrderService.markTabSorted(!1),this.activeSection$.next(z.tabOrderSection))},o.\u0275fac=function(n){return new(n||o)(t.\u0275\u0275directiveInject(_e))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["selection-pane-list"]],inputs:{groups:"groups",visualContainers:"visualContainers"},decls:24,vars:60,consts:[[1,"sectionHeader","item-auto","pivotNav","canvasItemsPane"],["role","tablist"],["role","tab","attr.aria-controls","section-layerOrder","localize","ExplorationCanvasItemsPane_LayerOrder",1,"sectionTab","trimmedTextWithEllipsis","themeableElement",3,"ngClass","section-tab-key-handler","aria-label","aria-describedby","pbiTooltip","onActiveSection","accessible-click"],["role","tab","ariaControls","section-tabOrder","localize","ExplorationCanvasItemsPane_TabOrder",1,"sectionTab","trimmedTextWithEllipsis","themeableElement",3,"ngClass","section-tab-key-handler","aria-label","aria-describedby","pbiTooltip","onActiveSection","accessible-click"],["localize","ExplorationCanvasItemsPane_LayerOrder_Tooltip","id","layerOrderTooltip",1,"tooltip-description"],["localize","ExplorationCanvasItemsPane_TabOrder_Tooltip","id","tabOrderTooltip",1,"tooltip-description"],[1,"navMarker"],["role","tabpanel","section-animation-slider","","autoWidth","true","navMarkerParent","canvasItemsPane","doNotAnimateSection","true",1,"sectionHost","item-fill","flex-grow-section",3,"sectionNumber"],[4,"ngIf"],[3,"groups","visualContainers"]],template:function(n,i){1&n&&(t.\u0275\u0275elementStart(0,"nav",0)(1,"ul",1)(2,"li",2),t.\u0275\u0275listener("onActiveSection",function(a){return i.setActiveSection(a.nextSection)})("accessible-click",function(){return i.setActiveSection(i.SectionType.listOrderSection)}),t.\u0275\u0275pipe(3,"async"),t.\u0275\u0275pipe(4,"async"),t.\u0275\u0275pipe(5,"async"),t.\u0275\u0275pipe(6,"localize"),t.\u0275\u0275pipe(7,"localize"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"li",3),t.\u0275\u0275listener("onActiveSection",function(a){return i.setActiveSection(a.nextSection)})("accessible-click",function(){return i.setActiveSection(i.SectionType.tabOrderSection)}),t.\u0275\u0275pipe(9,"async"),t.\u0275\u0275pipe(10,"async"),t.\u0275\u0275pipe(11,"async"),t.\u0275\u0275pipe(12,"localize"),t.\u0275\u0275pipe(13,"localize"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(14,"p",4)(15,"p",5),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(16,"div",6),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(17,"section",7),t.\u0275\u0275pipe(18,"async"),t.\u0275\u0275pipe(19,"async"),t.\u0275\u0275template(20,Be,2,2,"ng-container",8),t.\u0275\u0275pipe(21,"async"),t.\u0275\u0275template(22,at,2,2,"ng-container",8),t.\u0275\u0275pipe(23,"async"),t.\u0275\u0275elementEnd()),2&n&&(t.\u0275\u0275advance(2),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(50,Oe,t.\u0275\u0275pipeBind1(4,24,i.activeSection$)===i.SectionType.listOrderSection))("section-tab-key-handler",t.\u0275\u0275pureFunction2(52,st,i.SectionType.tabOrderSection+1,i.SectionType.listOrderSection))("aria-label",t.\u0275\u0275pipeBind1(6,28,"ExplorationCanvasItemsPane_LayerOrder"))("aria-describedby","layerOrderTooltip")("pbiTooltip",t.\u0275\u0275pipeBind1(7,30,"ExplorationCanvasItemsPane_LayerOrder_Tooltip")),t.\u0275\u0275attribute("tabindex",t.\u0275\u0275pipeBind1(3,22,i.activeSection$)===i.SectionType.listOrderSection?0:-1)("aria-posinset",i.SectionType.listOrderSection+1)("aria-setsize",i.SectionType.tabOrderSection+1)("aria-selected",t.\u0275\u0275pipeBind1(5,26,i.activeSection$)===i.SectionType.listOrderSection),t.\u0275\u0275advance(6),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(55,Oe,t.\u0275\u0275pipeBind1(10,34,i.activeSection$)===i.SectionType.tabOrderSection))("section-tab-key-handler",t.\u0275\u0275pureFunction2(57,st,i.SectionType.tabOrderSection+1,i.SectionType.tabOrderSection))("aria-label",t.\u0275\u0275pipeBind1(12,38,"ExplorationCanvasItemsPane_TabOrder"))("aria-describedby","tabOrderTooltip")("pbiTooltip",t.\u0275\u0275pipeBind1(13,40,"ExplorationCanvasItemsPane_TabOrder_Tooltip")),t.\u0275\u0275attribute("tabindex",t.\u0275\u0275pipeBind1(9,32,i.activeSection$)===i.SectionType.tabOrderSection?0:-1)("aria-posinset",i.SectionType.tabOrderSection+1)("aria-setsize",i.SectionType.tabOrderSection+1)("aria-selected",t.\u0275\u0275pipeBind1(11,36,i.activeSection$)===i.SectionType.tabOrderSection),t.\u0275\u0275advance(9),t.\u0275\u0275property("sectionNumber",t.\u0275\u0275pipeBind1(19,44,i.activeSection$)===i.SectionType.tabOrderSection?i.SectionType.tabOrderSection:i.SectionType.listOrderSection),t.\u0275\u0275attribute("id",t.\u0275\u0275pipeBind1(18,42,i.activeSection$)===i.SectionType.tabOrderSection?"section-tabOrder":"section-layerOrder"),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(21,46,i.activeSection$)===i.SectionType.tabOrderSection),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(23,48,i.activeSection$)===i.SectionType.listOrderSection))},styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;flex:1 0 auto;text-align:left;width:100%;height:100%}[_nghost-%COMP%]:focus{outline:none}i.caret.glyphicon[_ngcontent-%COMP%]{margin:0 4px}.flex-grow-section[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column}.tooltip-description[_ngcontent-%COMP%]{display:none}"]}),o}(),y=p(8590),Ie=p(3579),ct=p(73221),ae=p(37196),lt=p(59017),I=p(83317),ke=p(14172),me=p(41198),De=p(48787),V=p(23558),ht=p(77526),se=p(17328),Ce=p(77200),x=p(77476),Ae=p(59968),Me=p(80649),Fe=p(36858),ze=p(94585),Q=p(15015),Re=p(14463),ee=p(41887),$e=p(42342),xe=p(59107),je=p(34763),ft=p(11547),He=p(50702),Ue=p(558),Te=p(50057),mt=p(53267),Ge=p(82214),Ct=p(64647),Ke=p(37534),bt=function(e,n){return{showSkipIconAlways:e,hiddenStyle:n}};function Xe(o,e){if(1&o){var n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",6),t.\u0275\u0275listener("click",function(a){t.\u0275\u0275restoreView(n);var s=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(s.toggleSkipped(a))}),t.\u0275\u0275element(1,"div",7),t.\u0275\u0275elementStart(2,"div",8),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd()()}if(2&o){var i=t.\u0275\u0275nextContext();t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction2(5,bt,i.isSkipped,i.isShowItemHiddenStyle))("disabled",!i.isEditMode()),t.\u0275\u0275attribute("title",i.actionTitle),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngClass",i.actionIconClass),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(i.order)}}function yt(o,e){if(1&o){var n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",9),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(n);var a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.refreshVisual())}),t.\u0275\u0275elementEnd()}if(2&o){var i=t.\u0275\u0275nextContext();t.\u0275\u0275attribute("title",i.refreshTitle)}}function Ze(o,e){if(1&o){var n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",10),t.\u0275\u0275listener("click",function(a){t.\u0275\u0275restoreView(n);var s=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(s.toggleVisibility(a))}),t.\u0275\u0275elementEnd()}if(2&o){var i=t.\u0275\u0275nextContext();t.\u0275\u0275property("ngClass",i.actionIconClass)("disabled",i.isDisabled()),t.\u0275\u0275attribute("title",i.actionTitle)}}function St(o,e){if(1&o){var n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",11),t.\u0275\u0275listener("click",function(r){t.\u0275\u0275restoreView(n);var a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.showContextMenu(r))}),t.\u0275\u0275element(1,"i",12),t.\u0275\u0275elementEnd()}}var Qe=function(e){return{hiddenStyle:e}},Ne=function(){function o(e,n,i,r,a,s,d,u,l,g,h,C,T,B){var j=this;this.conceptualSchemaProxy=e,this.dataSources=n,this.displayNameService=i,this.eventBridge=r,this.featureSwitchService=a,this.formFactor=s,this.highContrastCssGenerationService=d,this.localizationService=u,this.screenReaderService=l,this.viewModeState=g,this.visualAuthoring=h,this.visualContainerMenuFactory=C,this.visualPlugin=T,this.pauseQueriesService=B,this.renameAction=new t.EventEmitter,this.isEditing=new t.EventEmitter,this.skipFunction=new t.EventEmitter,this.editableTextLabelStyles={margin:"0 6px"},this.editableTextLabelClasses="trimmedTextWithEllipsis",this.refreshLabel=this.localizationService.get("Refresh"),this.initializeHighContrastRules(),this.isListOrderSection=function(){return void 0===j.isSkipped},this.isShowItemHiddenStyle=!1}return o.prototype.ngOnInit=function(){var e=this;this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager(),(0,f.Vz)(this.item)?this.subscriptionManager.subscribe(y.jCS,function(n,i){return e.onVisualContainerChanged(i)}):this.subscriptionManager.subscribe(y.ICs,function(n,i){return e.onVisualContainerGroupChanged(i)}),this.subscriptionManager.subscribe(y.D1A,function(n,i){return e.onVisualContainerDataRendered(i)})},o.prototype.ngOnDestroy=function(){this.subscriptionManager.unsubscribeAll()},o.prototype.onMouseEnter=function(e){this.onHover(!0)},o.prototype.onMouseLeave=function(e){this.onHover(!1)},o.prototype.ngOnChanges=function(e){e.item&&(this.item=e.item.currentValue,this.generateTitle(),this.isListOrderSection()?this.updateVisibility():(0,f.Vz)(this.item)&&this.updateSkipped(this.item))},o.prototype.onContextMenu=function(e){this.isEditable()&&this.isListOrderSection()&&(e.preventDefault(),this.showContextMenu(e,!0))},o.prototype.onHover=function(e){(0,b.vz)(e,this.item.name,this.eventBridge)},o.prototype.refreshVisual=function(){this.pauseQueriesService.refreshVisuals(this.item.name)},o.prototype.isItemInPausedState=function(){return!(!this.featureSwitchService.featureSwitches.optimizeTabRibbon||!(0,f.Vz)(this.item)||!this.item.visualPausedWarning)},o.prototype.toggleSkipped=function(e){this.skipFunction&&this.skipFunction.emit({isSkippedSection:this.isSkipped,visualContainer:this.item}),e.stopPropagation()},o.prototype.toggleVisibility=function(e){(0,f.Vz)(this.item)?this.toggleVisualContainerVisibility(this.item):this.toggleVisualContainerGroupVisibility(this.item),e.stopPropagation()},o.prototype.toggleVisualContainerVisibility=function(e){var i=!(0,G.xj)(e.contract.config.singleVisual);this.visualAuthoring.setVisibility(i,[e.contract])},o.prototype.toggleVisualContainerGroupVisibility=function(e){var n=!(0,pe.xj)(e.contract);this.visualAuthoring.setVisualContainerGroupVisibility(n,[e.contract]),this.updateVisibility()},o.prototype.onVisualContainerChanged=function(e){(0,f.Vz)(this.item)&&(e&&e.affectContainer(this.item.contract)||this.isPhoneLayout())&&(this.generateTitle(),this.isListOrderSection()?this.updateVisibility():this.updateSkipped(this.item))},o.prototype.onVisualContainerGroupChanged=function(e){(0,f.q4)(this.item)&&e&&e.affectContainer(this.item.contract)&&(this.generateTitle(),this.isListOrderSection()&&this.updateVisibility())},o.prototype.onVisualContainerDataRendered=function(e){e.name===this.item.contract.name&&this.generateTitle()},o.prototype.generateTitle=function(){return(0,c.__awaiter)(this,void 0,void 0,function(){var e;return(0,c.__generator)(this,function(n){switch(n.label){case 0:return(0,f.Vz)(this.item)?(e=this,[4,(0,b.uo)(this.item.contract,{dataSources:this.dataSources,conceptualSchemaProxy:this.conceptualSchemaProxy,visualPlugin:this.visualPlugin,displayNameService:this.displayNameService})]):[3,2];case 1:return e.title=n.sent(),[3,3];case 2:this.title=this.item.contract.displayName,n.label=3;case 3:return[2]}})})},o.prototype.editLabel=function(){this.isEditable()&&(this.isEditingLabel=!0,this.isEditing.emit(!0))},o.prototype.isDisabled=function(){if(this.isEditable()){for(var e=this.item.parentGroup;e;){if(e.isHidden)return!0;e=e.parentGroup}return e&&e.isHidden}return!0},o.prototype.isPhoneLayout=function(){return 1===this.formFactor.getCurrentLayout()},o.prototype.rename=function(e){var n=e.newName;""!==n&&null!=n?(this.isEditing.emit(!1),(0,f.Vz)(this.item)?this.visualAuthoring.persistVCProperties(this.createNewNameChangeObject(n),this.item.contract):this.visualAuthoring.setVisualContainerGroupDisplayName(n,[this.item.contract]),this.title=n,this.renameAction.emit(n),this.isEditingLabel=!1):this.cancelRename()},o.prototype.cancelRename=function(){this.isEditingLabel=!1,this.isEditing.emit(!1)},o.prototype.createNewNameChangeObject=function(e){return[{merge:[{objectName:"title",properties:{text:e},selector:null}]}]},o.prototype.isEditMode=function(){return 1===this.viewModeState.getMode()},o.prototype.isEditable=function(){return this.isEditMode()&&!this.isPhoneLayout()},o.prototype.showContextMenu=function(e,n){void 0===n&&(n=!1),n||e.stopPropagation(),this.visualContainerMenuFactory.createMenu(this.item,{data:void 0,position:{x:e.pageX,y:e.pageY}},void 0,void 0,!1,{},e.target)},o.prototype.initializeHighContrastRules=function(){this.highContrastCssGenerationService.addRule(".themeableElement canvas-items-list .canvas-items-list.scroll-content li.append","{ border-bottom-color: @selectedBackgroundColor !important; }")},o.prototype.updateSkipped=function(e){this.actionIconClass="glyphicon pbi-glyph-disable",this.isShowItemHiddenStyle=!!(0,G.xj)(e.contract.config.singleVisual)},o.prototype.isHidden=function(){return(0,F.Vz)(this.item.contract)?this.isPhoneLayout()?(0,b.Pu)(this.item.contract):(0,G.xj)(this.item.contract.config.singleVisual):this.item.contract.isHidden},o.prototype.updateVisibility=function(){var e,n,i=this.actionIconClass;if(this.isHidden()?(this.actionIconClass="glyphicon pbi-glyph-hide3",e=this.isPhoneLayout()?"ExplorationCanvasItemsPane_Hidden_Visual":"ExplorationCanvasItemsPane_Show",n="ExplorationCanvasItemsPane_Hidden"):(this.actionIconClass="glyphicon pbi-glyph-view",e=this.isPhoneLayout()?"ExplorationCanvasItemsPane_Shown_Visual":"ExplorationCanvasItemsPane_Hide",n="ExplorationCanvasItemsPane_Shown"),this.actionTitle=this.localizationService.get(e),i&&i!==this.actionIconClass){var r=this.localizationService.format(n,[this.title]);this.screenReaderService.alertWithDebounce("canvas-item-visibility-"+this.item.contract.name,r)}},o.\u0275fac=function(n){return new(n||o)(t.\u0275\u0275directiveInject(ge.i),t.\u0275\u0275directiveInject(W.D),t.\u0275\u0275directiveInject(ie.O),t.\u0275\u0275directiveInject(k.J),t.\u0275\u0275directiveInject(J.vZ),t.\u0275\u0275directiveInject(se.F),t.\u0275\u0275directiveInject(Ct.g),t.\u0275\u0275directiveInject(Y.o),t.\u0275\u0275directiveInject(oe.g),t.\u0275\u0275directiveInject(Ce.kc),t.\u0275\u0275directiveInject(Z.$8),t.\u0275\u0275directiveInject(Se.p),t.\u0275\u0275directiveInject(q.D),t.\u0275\u0275directiveInject(ve.F))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["selection-pane-item"]],hostBindings:function(n,i){1&n&&t.\u0275\u0275listener("mouseenter",function(a){return i.onMouseEnter(a)})("mouseleave",function(a){return i.onMouseLeave(a)})},inputs:{isSkipped:"isSkipped",item:"item",order:"order"},outputs:{renameAction:"renameAction",isEditing:"isEditing",skipFunction:"skipFunction"},features:[t.\u0275\u0275NgOnChangesFeature],decls:6,vars:14,consts:[[1,"selectionPaneItem",3,"contextmenu"],["class","actionIcon","tabindex","-1",3,"ngClass","disabled","click",4,"ngIf"],[3,"textLabelClasses","textLabelStyles","ngClass","displayName","editable","disableClick","maxInputLength","customTooltip","dblclick","onBlur","cancel"],["class","refreshIcon glyphicon pbi-glyph-refresh","tabindex","-1",3,"click",4,"ngIf"],["class","actionIcon glyphicon","tabindex","-1",3,"ngClass","disabled","click",4,"ngIf"],["class","optionsMenu menuContainer item-auto","tabindex","-1","localizeTooltip","Options_Menu",3,"click",4,"ngIf"],["tabindex","-1",1,"actionIcon",3,"ngClass","disabled","click"],[1,"glyphicon","left",3,"ngClass"],[1,"tabOrderNumber"],["tabindex","-1",1,"refreshIcon","glyphicon","pbi-glyph-refresh",3,"click"],["tabindex","-1",1,"actionIcon","glyphicon",3,"ngClass","disabled","click"],["tabindex","-1","localizeTooltip","Options_Menu",1,"optionsMenu","menuContainer","item-auto",3,"click"],[1,"glyphicon","pbi-glyph-more"]],template:function(n,i){1&n&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275listener("contextmenu",function(a){return i.onContextMenu(a)}),t.\u0275\u0275template(1,Xe,4,8,"button",1),t.\u0275\u0275elementStart(2,"editable-label",2),t.\u0275\u0275listener("dblclick",function(){return i.editLabel()})("onBlur",function(a){return i.rename(a)})("cancel",function(){return i.cancelRename()}),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(3,yt,1,1,"button",3),t.\u0275\u0275template(4,Ze,1,3,"button",4),t.\u0275\u0275template(5,St,2,0,"button",5),t.\u0275\u0275elementEnd()),2&n&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!i.isListOrderSection()),t.\u0275\u0275advance(1),t.\u0275\u0275property("textLabelClasses",i.editableTextLabelClasses)("textLabelStyles",i.editableTextLabelStyles)("ngClass",t.\u0275\u0275pureFunction1(12,Qe,i.isShowItemHiddenStyle))("displayName",i.title)("editable",i.isEditingLabel)("disableClick",!0)("maxInputLength",250)("customTooltip",!1),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",i.isItemInPausedState()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",i.isListOrderSection()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",i.isEditable()&&i.isListOrderSection()))},dependencies:[x.NgClass,x.NgIf,Ke.V,Te.r],styles:["[_nghost-%COMP%]{width:100%}.selectionPaneItem[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;align-items:center;height:24px}.selectionPaneItem[_ngcontent-%COMP%]:focus{outline:none}.selectionPaneItem[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent;border-color:inherit;color:inherit;border:none;padding:0 0 0 5px}.selectionPaneItem[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .selectionPaneItem[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:12px}.selectionPaneItem[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin:0}.selectionPaneItem[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .selectionPaneItem[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled, .selectionPaneItem[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%], .selectionPaneItem[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .selectionPaneItem[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:hover, .selectionPaneItem[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:hover, .selectionPaneItem[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus, .selectionPaneItem[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:focus, .selectionPaneItem[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:focus, .selectionPaneItem[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active, .selectionPaneItem[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:active, .selectionPaneItem[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:active, .selectionPaneItem[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active:hover, .selectionPaneItem[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:active:hover, .selectionPaneItem[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:active:hover, .selectionPaneItem[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus:hover, .selectionPaneItem[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:focus:hover, .selectionPaneItem[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:focus:hover{background-color:transparent;border-color:inherit;color:var(--gray-80)}.selectionPaneItem[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .selectionPaneItem[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .selectionPaneItem[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus, .selectionPaneItem[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active, .selectionPaneItem[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active:hover, .selectionPaneItem[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus:hover{color:inherit}.selectionPaneItem[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled, .selectionPaneItem[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%], .selectionPaneItem[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:hover, .selectionPaneItem[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:hover, .selectionPaneItem[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:focus, .selectionPaneItem[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:focus, .selectionPaneItem[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:active, .selectionPaneItem[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:active, .selectionPaneItem[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:active:hover, .selectionPaneItem[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:active:hover, .selectionPaneItem[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:focus:hover, .selectionPaneItem[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:focus:hover{color:var(--neutral-tertiary-color, #A6A6A6)}.selectionPaneItem[_ngcontent-%COMP%]   button.refreshIcon[_ngcontent-%COMP%]{padding-right:5px}.selectionPaneItem[_ngcontent-%COMP%]   button.actionIcon[_ngcontent-%COMP%]{padding:0}.selectionPaneItem[_ngcontent-%COMP%]   button.actionIcon[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{padding-right:14px;display:none;font-size:12px}.selectionPaneItem[_ngcontent-%COMP%]   button.actionIcon.hiddenStyle[_ngcontent-%COMP%]{color:var(--gray-180, #252423)}.selectionPaneItem[_ngcontent-%COMP%]   button.actionIcon[_ngcontent-%COMP%]   .tabOrderNumber[_ngcontent-%COMP%]{padding-right:14px;min-width:12px;font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif;display:block}.selectionPaneItem[_ngcontent-%COMP%]   button.actionIcon.showSkipIconAlways[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{display:block}.selectionPaneItem[_ngcontent-%COMP%]   button.actionIcon.showSkipIconAlways[_ngcontent-%COMP%]   .tabOrderNumber[_ngcontent-%COMP%]{display:none}.selectionPaneItem[_ngcontent-%COMP%]   button.actionIcon[_ngcontent-%COMP%]:not(.showSkipIconAlways):hover   .left[_ngcontent-%COMP%]{display:block}.selectionPaneItem[_ngcontent-%COMP%]   button.actionIcon[_ngcontent-%COMP%]:not(.showSkipIconAlways):hover   .tabOrderNumber[_ngcontent-%COMP%]{display:none}.selectionPaneItem[_ngcontent-%COMP%]   editable-label[_ngcontent-%COMP%]{flex-grow:1}.selectionPaneItem[_ngcontent-%COMP%]   .optionsMenu[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%]{opacity:1}.selectionPaneItem[_ngcontent-%COMP%]   .optionsMenu[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%]:focus{outline:none}"]}),o}();function Pt(o,e){if(1&o&&t.\u0275\u0275element(0,"i",6),2&o){var n=t.\u0275\u0275nextContext().$implicit,i=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("ngClass",i.treeControl.isExpanded(n)?"pbi-glyph-chevronupsmall":"pbi-glyph-chevrondownsmall")}}var Je=function(e,n){return{selected:e,droppable:n}},_t=function(e){return{groupNode:e}};function Ye(o,e){if(1&o){var n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-tree-node",3),t.\u0275\u0275listener("keydown",function(s){var u=t.\u0275\u0275restoreView(n).$implicit,l=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(l.onKeyDown(s,null==u?null:u.canvasItem))})("click",function(s){var u=t.\u0275\u0275restoreView(n).$implicit,l=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(l.onItemClick(s,null==u?null:u.canvasItem))})("cdkDragStarted",function(s){t.\u0275\u0275restoreView(n);var d=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(d.dragStarted(s))})("cdkDragReleased",function(){t.\u0275\u0275restoreView(n);var s=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(s.dragEnd())}),t.\u0275\u0275template(1,Pt,1,1,"i",4),t.\u0275\u0275elementStart(2,"selection-pane-item",5),t.\u0275\u0275listener("isEditing",function(s){t.\u0275\u0275restoreView(n);var d=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(d.updateIsEditing(s))}),t.\u0275\u0275elementEnd()()}if(2&o){var i=e.$implicit,r=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("cdkDragData",i)("ngClass",t.\u0275\u0275pureFunction2(6,Je,r.isSelected[null==i||null==i.canvasItem?null:i.canvasItem.name],r.isDroppable(null==i?null:i.canvasItem))),t.\u0275\u0275attribute("tabindex",r.getTabIndex(null==i||null==i.canvasItem?null:i.canvasItem.name)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",r.treeControl.isExpandable(i)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(9,_t,r.treeControl.isExpandable(i)))("item",null==i?null:i.canvasItem)}}function Ot(o,e){if(1&o){var n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"mat-tree",1),t.\u0275\u0275listener("cdkDropListDropped",function(a){t.\u0275\u0275restoreView(n);var s=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(s.drop(a))}),t.\u0275\u0275template(2,Ye,3,11,"mat-tree-node",2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()}if(2&o){var i=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("dataSource",i.dataSource)("treeControl",i.treeControl)("cdkDropListDisabled",!i.isEditable()||i.isEditingLabel),t.\u0275\u0275attribute("focus-nav-mode",i.isListActive?"Group":void 0)}}function qe(o,e){if(1&o){var n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"selection-pane-item",12),t.\u0275\u0275listener("skipFunction",function(d){t.\u0275\u0275restoreView(n);var u=t.\u0275\u0275nextContext(4);return t.\u0275\u0275resetView(u.toggleTabOrderSection(d))})("isEditing",function(d){t.\u0275\u0275restoreView(n);var u=t.\u0275\u0275nextContext(4);return t.\u0275\u0275resetView(u.updateIsEditing(d))}),t.\u0275\u0275elementEnd()}if(2&o){var i=t.\u0275\u0275nextContext(2),a=i.index;t.\u0275\u0275property("item",i.$implicit)("order",a+1)("isSkipped",!1)}}function It(o,e){if(1&o){var n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"selection-pane-item",13),t.\u0275\u0275listener("isEditing",function(a){t.\u0275\u0275restoreView(n);var s=t.\u0275\u0275nextContext(4);return t.\u0275\u0275resetView(s.updateIsEditing(a))}),t.\u0275\u0275elementEnd()}if(2&o){var i=t.\u0275\u0275nextContext(2).$implicit;t.\u0275\u0275property("item",i)}}var Ee=function(e){return{selected:e}};function Mt(o,e){if(1&o){var n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"li",9),t.\u0275\u0275listener("click",function(u){t.\u0275\u0275restoreView(n);var l=t.\u0275\u0275nextContext().$implicit,g=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(g.onItemClick(u,l))})("keydown",function(u){t.\u0275\u0275restoreView(n);var l=t.\u0275\u0275nextContext().$implicit,g=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(g.onKeyDown(u,l))})("dropHandler",function(u){t.\u0275\u0275restoreView(n);var l=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(l.dropOntoSibling(u.event,u.ui,u.dropAction))}),t.\u0275\u0275template(1,qe,1,3,"selection-pane-item",10),t.\u0275\u0275template(2,It,1,1,"selection-pane-item",11),t.\u0275\u0275elementEnd()}if(2&o){var i=t.\u0275\u0275nextContext(),r=i.$implicit,a=i.index,s=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(9,Ee,s.isSelected[null==r?null:r.name]))("drag","visualContainer")("getDragContext",s.getDragContext(r))("drop",s.dropConfig)("dropAction",s.dropActionHandler),t.\u0275\u0275attribute("tabindex",s.getTabIndex(null==r?null:r.name,a))("data-name",null==r?null:r.name),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",s.isActiveSection(s.SectionType.tabOrderSection)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!s.isActiveSection(s.SectionType.tabOrderSection))}}function At(o,e){if(1&o&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,Mt,3,11,"li",8),t.\u0275\u0275elementContainerEnd()),2&o){var n=e.$implicit,i=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!i.isShowingTabOrderSection()||i.isPositiveTabOrder(n))}}function Ft(o,e){if(1&o){var n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"li",15),t.\u0275\u0275listener("click",function(u){t.\u0275\u0275restoreView(n);var l=t.\u0275\u0275nextContext().$implicit,g=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(g.onItemClick(u,l))})("keydown",function(u){t.\u0275\u0275restoreView(n);var l=t.\u0275\u0275nextContext().$implicit,g=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(g.onKeyDown(u,l,!1))}),t.\u0275\u0275elementStart(1,"selection-pane-item",16),t.\u0275\u0275listener("skipFunction",function(u){t.\u0275\u0275restoreView(n);var l=t.\u0275\u0275nextContext(4);return t.\u0275\u0275resetView(l.toggleTabOrderSection(u))}),t.\u0275\u0275elementEnd()()}if(2&o){var i=t.\u0275\u0275nextContext(),r=i.$implicit,a=i.index,s=t.\u0275\u0275nextContext(3);t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(4,Ee,s.isSelected[null==r?null:r.name])),t.\u0275\u0275attribute("tabindex",s.getTabIndex(null==r?null:r.name,a)),t.\u0275\u0275advance(1),t.\u0275\u0275property("item",r)("isSkipped",!0)}}function zt(o,e){if(1&o&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,Ft,2,6,"li",14),t.\u0275\u0275elementContainerEnd()),2&o){var n=e.$implicit,i=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!i.isPositiveTabOrder(n))}}function Rt(o,e){if(1&o&&(t.\u0275\u0275elementStart(0,"ul"),t.\u0275\u0275template(1,zt,2,1,"ng-container",7),t.\u0275\u0275elementEnd()),2&o){var n=t.\u0275\u0275nextContext(2);t.\u0275\u0275attribute("focus-nav-mode",n.isListActive?"Group":void 0),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",n.getSortedVisualContainers(!1))("ngForTrackBy",null==n.visualContainer?null:n.visualContainer.name)}}function $t(o,e){if(1&o&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"ul"),t.\u0275\u0275template(2,At,2,1,"ng-container",7),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(3,Rt,2,3,"ul",0),t.\u0275\u0275elementContainerEnd()),2&o){var n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275attribute("focus-nav-mode",n.isListActive?"Group":void 0),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",n.getSortedVisualContainers())("ngForTrackBy",null==n.visualContainer?null:n.visualContainer.name),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.isShowingTabOrderSection())}}var ce=function(o){return o[o.listOrderSection=0]="listOrderSection",o[o.tabOrderSection=1]="tabOrderSection",o}({}),R=function(o){return o[o.grouping=0]="grouping",o[o.flatten=1]="flatten",o}({}),dt=function(){function o(e,n,i,r,a,s,d,u,l,g,h,C,T,B,j,K,te,ne){var N=this;this.conceptualSchemaProxy=e,this.dataSources=n,this.displayNameService=i,this.dragDataService=r,this.eventBridge=a,this.explorationNavigationService=s,this.featureSwitchService=d,this.formFactor=u,this.visualContainerGroupAuthoringService=l,this.lazyScoped=g,this.localizationService=h,this.promiseFactory=C,this.screenReaderService=T,this.selection=B,this.selectionPaneListOrderService=j,this.viewModeState=K,this.visualAuthoring=te,this.visualPlugin=ne,this.SectionType=ce,this.OrderStrategy=R,this.getDragContext=function(v){return function(){return N.getDragContextInternal(v)}},this.isEditingLabel=!1,this.expandedNodeSet={},this.isDragging=!1,this.subscription=new je.w,this.bringForwardName=this.localizationService.get("ExplorationCanvasItemsPane_BringForward"),this.sendBackwardName=this.localizationService.get("ExplorationCanvasItemsPane_SendBackward"),this.orderTabsByPositionName=this.localizationService.get("Tab_Order_Reorder_Items"),this.expandAllName=this.localizationService.get("FieldListMenuItem_ExpandAll"),this.collapseAllName=this.localizationService.get("FieldListMenuItem_CollapseAll"),this.moveUpName=this.localizationService.get("FieldListMenuItem_MoveUp"),this.moveDownName=this.localizationService.get("FieldListMenuItem_MoveDown"),this.reorderItemsName=this.localizationService.get("Tab_Order_Reorder_Items_Hint"),this.layerOrderName=this.localizationService.get("ExplorationCanvasItemsPane_LayerOrder_Tooltip"),this.tabOrderName=this.localizationService.get("ExplorationCanvasItemsPane_TabOrder_Tooltip");var et=function(D){return D.level},tt=function(D){return D.expandable};this.treeFlattener=new Q.JZ(function(D,we){return{canvasItem:D,expandable:(0,f.q4)(D),level:we}},et,tt,function(D){if((0,f.q4)(D))return(0,ft.of)(D.children)}),this.treeControl=new ze.C2(et,tt),this.dataSource=new Q.kc(this.treeControl,this.treeFlattener),this.dropActionHandler=function(v){return N.getDropAction(v)},this.dropConfig={accept:"visualContainer"},this.isSelected={},this.zIndexPromise=this.lazyScoped.get("zIndexService"),this.tabOrderPromise=this.lazyScoped.get("tabOrderService"),this.isListActive=!1,this.scrollbarsConfig={ignoreOverlay:!1,ignoreMobile:!1},this.activeSection=ce.listOrderSection,this.featureSwitches$=this.featureSwitchService.featureSwitches$,this.listChangeObserver=new MutationObserver(function(v,D){for(var we=0,nt=v;we<nt.length;we++)if(_.indexOf(nt[we].addedNodes,N.currentFocusElement)>-1){N.currentFocusElement.focus(),N.currentFocusElement=null;break}D.disconnect()}),this.zSortedState$=this.selectionPaneListOrderService.getZSortedState$(),this.tabSortedState$=this.selectionPaneListOrderService.getTabSortedState$(),this.subscription.add(this.selectionPaneListOrderService.getListRebuildData$().subscribe(function(){N.rebuildTreeForData(N.dataSource.data)})),this.subscription.add(this.selectionPaneListOrderService.getNotifyUserLayerDataChanged$().subscribe(function(v){return(0,c.__awaiter)(N,void 0,void 0,function(){return(0,c.__generator)(this,function(D){switch(D.label){case 0:return[4,this.notifyUserLayerChanged(v)];case 1:return D.sent(),[2]}})})}))}return o.prototype.bringForwardTextTooltip=function(){return this.isShowingTabOrderSection()?this.moveUpName:this.bringForwardName},o.prototype.sendBackwardTextTooltip=function(){return this.isShowingTabOrderSection()?this.moveDownName:this.sendBackwardName},o.prototype.getFlattenedVisibleNodesInDOM=function(e){for(var n=[],i=0,r=e;i<r.length;i++){var a=r[i];n.push(a),_.has(this.expandedNodeSet,a.name)&&(0,f.q4)(a)&&(n=n.concat(this.getFlattenedVisibleNodesInDOM(a.children)))}return n},o.prototype.getExpandedNodeSet=function(){return this.expandedNodeSet},o.prototype.rememberExpandedTreeNodes=function(e){var n={};return e.dataNodes&&e.dataNodes.forEach(function(i){e.isExpandable(i)&&e.isExpanded(i)&&(n[i.canvasItem.name]=!0)}),n},o.prototype.isDroppable=function(e){return!(this.currentDraggingNode&&!(0,f.Vz)(this.currentDraggingNode)&&this.currentDraggingNode!==e&&(0,A.sE)(e.name,this.currentDraggingNode.children))},o.prototype.dragStarted=function(e){this.isDragging=!0,L.fF.assertValue(e&&e.source,"No source for dragging");var n=e.source.data.canvasItem;this.currentDraggingNode=n,m.UP.isCanvasItemSelected(n.contract,this.selection)||m.UP.selectCanvasItem(n.contract,this.selection)},o.prototype.dragEnd=function(){this.currentDraggingNode=void 0},o.prototype.isTheLastChild=function(e){if(!e)return!1;var n=this.sortItemsByProperty((0,A.E8)(e,this.dataSource.data),function(i){return i.position.z}).sortedItems;return n&&_.last(n)===e},o.prototype.isDroppedAtEndOfList=function(e,n){var i=n[e-1],r=_.find(this.treeControl.dataNodes,function(a){return a.canvasItem===i});return this.isTheLastChild(i)&&i&&((0,f.Vz)(i)||!this.treeControl.isExpanded(r))},o.prototype.findRelativeIndex=function(e,n,i,r){var a=e,s=n.parentGroup;if(s)a=e-(_.findIndex(r,function(C){return C.name===s.name})+1);else for(var l=0,g=r;l<g.length;l++){var h=g[l];if(n===h)break;h.parentGroup&&i!==h&&a--}return a},o.prototype.dropAtZIndexOperation=function(e,n,i,r){return void 0===r&&(r=!0),(0,c.__awaiter)(this,void 0,void 0,function(){var a;return(0,c.__generator)(this,function(s){switch(s.label){case 0:return[4,this.zIndexPromise];case 1:return a=s.sent(),r?a.moveAfter(e,n,[i.contract]):a.moveBefore(e,n,[i.contract]),[2]}})})},o.prototype.dropAtZIndexAndMoveGroup=function(e,n,i,r,a,s){return(0,c.__awaiter)(this,void 0,void 0,function(){var d,u,l,g,h,C;return(0,c.__generator)(this,function(T){switch(T.label){case 0:return d=r.parentGroup===a.parentGroup,u=this.findRelativeIndex(e,r,a,i),l=(0,A.E8)(r,this.dataSource.data),g=d?l.length-1:l.length,h=0!==u&&u>=g,void 0===s&&(s=!n&&!h),[4,this.dropAtZIndexOperation(_.map(l,function(B){return B.contract}),r,a,s)];case 1:return T.sent(),d||(C=this.explorationNavigationService.getCurrentExploreCanvas(),this.visualContainerGroupAuthoringService.moveCanvasItemInTree(C,a.contract,r.contract,h)),[2]}})})},o.prototype.drop=function(e){return(0,c.__awaiter)(this,void 0,void 0,function(){var n,i,a,s,d,u,l,g;return(0,c.__generator)(this,function(h){switch(h.label){case 0:return this.expandedNodeSet=this.rememberExpandedTreeNodes(this.treeControl),n=this.getFlattenedVisibleNodesInDOM(this.dataSource.data),(s=n[i=e.currentIndex]).name===(a=e.item.data.canvasItem).name||(0,f.q4)(a)&&(0,A.sE)(s.name,a.children)?[2]:(d=_.findIndex(n,function(C){return C===a}),u=i>d,g=_.find(this.treeControl.dataNodes,function(C){return C.canvasItem===s}),u&&(0,f.q4)(s)&&this.treeControl.isExpanded(g)?(s=n[i+1],l=!0):!u&&this.isDroppedAtEndOfList(i,n)&&(s=n[i-1],l=!1),[4,this.dropAtZIndexAndMoveGroup(i,u,n,s,a,l)]);case 1:return h.sent(),this.rebuildTreeForData(this.groups),this.isDragging=!1,[2]}})})},o.prototype.areCanvasItemsEqual=function(e,n){if(e.length!==n.length)return!1;for(var i=0;i<e.length;i++){var r=e[i],a=n[i];if((0,f.Vz)(r)!==(0,f.Vz)(a)||r.name!==a.name)return!1}return!0},o.prototype.sortItemsByProperty=function(e,n,i){var r=_.orderBy(e,n,"desc"),a={sortedItems:r};i&&(a.isDirty=!this.areCanvasItemsEqual(i,r));for(var s=0;s<r.length;s++){var d=r[s],u=i&&i[s];if((0,f.q4)(d)){var l=u&&(0,f.q4)(u)&&u.children||[],g=this.sortItemsByProperty(d.children,n,i?l:void 0);i&&(a.isDirty=a.isDirty||g.isDirty),d.children=g.sortedItems}}return a},o.prototype.getSortedVisualContainers=function(e){var n;void 0===e&&(e=!0);var i=this.isShowingTabOrderSection(),r=this.activePositionListOrder;if(!("z"===r?this.zSortedState$.value:this.tabSortedState$.value)){if(i){var s=this.sortItemsByProperty(this.visualContainers,function(l){return l.position[r]}).sortedItems,d=(n=_.partition(s,function(l){return void 0===l.position.tabOrder||l.position.tabOrder>=0}))[0],u=n[1];this.sortedVisualContainersByPositiveTabOrder=d,this.sortedVisualContainersByNegativeTabOrder=u}else this.sortedVisualContainersByZIndex=this.sortItemsByProperty(this.visualContainers,function(l){return l.position[r]}).sortedItems;this.updateActiveListSortState(!0)}return i?e?this.sortedVisualContainersByPositiveTabOrder:this.sortedVisualContainersByNegativeTabOrder:this.sortedVisualContainersByZIndex},o.prototype.rebuildTreeForData=function(e,n){void 0===n&&(n=!1);var i=this.sortItemsByProperty(e,function(r){return r.position.z},n?this.dataSource.data:void 0);(!n||i.isDirty)&&(this.expandedNodeSet=this.rememberExpandedTreeNodes(this.treeControl),this.dataSource.data=i.sortedItems,this.forgetMissingExpandedNodes(this.treeControl,this.expandedNodeSet),this.expandNodesByName(this.treeControl.dataNodes))},o.prototype.forgetMissingExpandedNodes=function(e,n){e.dataNodes&&_.keys(n).forEach(function(i){e.dataNodes.find(function(r){return r.canvasItem.name===i})||_.unset(n,i)})},o.prototype.expandNodesByName=function(e){var n=this;!e||0===e.length||e.forEach(function(i){_.has(n.expandedNodeSet,i.canvasItem.name)&&n.treeControl.expand(i)})},o.prototype.ngOnInit=function(){var e=this;this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager(),this.subscriptionManager.subscribe(y.tRg,function(){return e.updateSelection()}).subscribe(y.KD7,function(){return e.updateSelection()}).subscribe(y.gsv,function(n,i){return e.selectionPaneListOrderService.markZSorted(!1)}).subscribe(y.jCS,function(){return e.updateZindexListOrder()}).subscribe(y.ICs,function(){return e.updateZindexListOrder()}),this.featureSwitchSubscription=this.featureSwitches$.pipe((0,me.n)(function(n){return!n}),(0,De.q)(1)).subscribe(function(n){return(0,c.__awaiter)(e,void 0,void 0,function(){return(0,c.__generator)(this,function(i){return this.isNewPaneColorsEnabled=this.isNewPaneColorsEnabled||n.paneColorRefresh,[2]})})})},o.prototype.updateZindexListOrder=function(){this.activeOrderStrategy===R.grouping&&(this.ensureNormalization(!0,!1),this.rebuildTreeForData(this.groups,!0))},o.prototype.ngOnDestroy=function(){this.subscriptionManager.unsubscribeAll(),this.featureSwitchSubscription.unsubscribe(),this.subscription.unsubscribe()},o.prototype.setActiveSection=function(e){this.activeSection=e,e===ce.listOrderSection?this.selectionPaneListOrderService.markZSorted(!1):this.selectionPaneListOrderService.markTabSorted(!1),this.setOrderStrategy(),this.rebuildTreeForData(this.groups)},o.prototype.setOrderStrategy=function(){this.activeOrderStrategy=!this.isPhoneLayout()&&(this.activeSection===ce.listOrderSection||this.activeSection===ce.tabOrderSection&&this.accessibilityTopLevelNavFS)?R.grouping:R.flatten,this.activePositionListOrder=this.isShowingTabOrderSection()?"tabOrder":"z"},o.prototype.isActiveSection=function(e){return this.activeSection===e},o.prototype.isActiveOrderStrategy=function(e){return this.activeOrderStrategy===e},o.prototype.isShowingTabOrderSection=function(){return this.isActiveSection(this.SectionType.tabOrderSection)},o.prototype.isPhoneLayout=function(){return 1===this.formFactor.getCurrentLayout()},o.prototype.isZOrder=function(){return"z"===this.activePositionListOrder},o.prototype.updateIsEditing=function(e){this.isEditingLabel=e},o.prototype.ngOnChanges=function(e){this.setOrderStrategy(),e.groups&&e.groups.currentValue&&(this.listContracts=_.map(this.groups,function(n){return n.contract}),this.ensureNormalization(),this.updateSelection(),this.rebuildTreeForData(e.groups.currentValue),this.selectionPaneListOrderService.markZSorted(!1),this.selectionPaneListOrderService.markTabSorted(!1)),e.visualContainers&&e.visualContainers.currentValue&&(this.selectionPaneListOrderService.markTabSorted(!1),this.ensureNormalization(!1),this.updateSelection())},o.prototype.ensureNormalization=function(e,n){return void 0===e&&(e=!0),void 0===n&&(n=!0),(0,c.__awaiter)(this,void 0,void 0,function(){var i,r;return(0,c.__generator)(this,function(a){switch(a.label){case 0:return e?[4,this.zIndexPromise]:[3,2];case 1:i=a.sent(),this.ensureNormalizedZIndex(i),a.label=2;case 2:return n?[4,this.tabOrderPromise]:[3,4];case 3:r=a.sent(),this.ensureNormalizedTabOrder(r),a.label=4;case 4:return[2]}})})},o.prototype.isPositiveTabOrder=function(e){return e&&(void 0===e.position.tabOrder||e.position.tabOrder>=0)},o.prototype.onItemClick=function(e,n){var r=this.selection;if(e&&e.shiftKey){var d=[],u=void 0,l=void 0;if(this.previousFocusedItem)for(var g=!1,T=0,B=this.activeOrderStrategy===R.flatten?this.isShowingTabOrderSection()?(0,c.__spreadArray)((0,c.__spreadArray)([],this.sortedVisualContainersByPositiveTabOrder||[],!0),this.sortedVisualContainersByNegativeTabOrder||[],!0):(0,c.__spreadArray)([],this.sortedVisualContainersByZIndex||[],!0):this.previousFocusedItem.parentGroup?this.sortItemsByProperty(this.previousFocusedItem.parentGroup.children,function(N){return N.position.z}).sortedItems:this.dataSource.data;T<B.length;T++){var K=B[T].contract,te=K.name===this.previousFocusedItem.name,ne=K.name===n.name;if(u=u||te,l=l||ne,te||ne){if(d.push(K),g)break;g=!0}else g&&d.push(K)}!_.isEmpty(d)&&u&&l?m.UP.selectCanvasItems(d,r):this.flipSelection(n,!1)}else this.flipSelection(n,xe.M.isCtrlOrMeta(e)),this.previousFocusedItem=n},o.prototype.flipSelection=function(e,n){var i=this.selection;this.isCanvasItemSelected(e)?n?m.UP.unselectCanvasItem(e.contract,i):i.clearSelection():m.UP.selectCanvasItem(e.contract,this.selection,n?3:0)},o.prototype.bringForward=function(){return(0,c.__awaiter)(this,void 0,void 0,function(){return(0,c.__generator)(this,function(n){switch(n.label){case 0:switch(this.activeOrderStrategy){case R.grouping:return[3,1];case R.flatten:return[3,3]}return[3,5];case 1:return this.bringForwardGroupingOrder(),[4,this.notifyUserLayerChanged(!0)];case 2:case 4:return n.sent(),[3,6];case 3:return this.bringForwardFlattenOrder(),[4,this.notifyUserLayerChanged(!0)];case 5:return L.fF.assertNever(this.activeOrderStrategy),[3,6];case 6:return[2]}})})},o.prototype.notifyUserLayerChanged=function(e){return(0,c.__awaiter)(this,void 0,void 0,function(){var n,i,r,a=this;return(0,c.__generator)(this,function(s){switch(s.label){case 0:return[4,Promise.all(this.dataSource.data.map(function(d){if(a.isCanvasItemSelected(d))return(0,f.Vz)(d)?(0,b.uo)(d.contract,{dataSources:a.dataSources,conceptualSchemaProxy:a.conceptualSchemaProxy,visualPlugin:a.visualPlugin,displayNameService:a.displayNameService}):Promise.resolve(d.contract.displayName)}))];case 1:return n=s.sent(),(i=n.filter(function(d){return d}).join(", "))&&(r=this.localizationService.format(e?"ExplorationCanvasItemsPane_SentForward":"ExplorationCanvasItemsPane_SentBackward",i),this.screenReaderService.alertPolite(r)),[2]}})})},o.prototype.bringForwardFlattenOrder=function(){return(0,c.__awaiter)(this,void 0,void 0,function(){var e,n,i;return(0,c.__generator)(this,function(r){switch(r.label){case 0:return[4,(e=this.isZOrder())?this.zIndexPromise:this.tabOrderPromise];case 1:return n=r.sent(),this.ensureNormalization(e,!e),i=e?this.listContracts:this.filterVisualContainersByTabOrderSign(!0),n.bringForward(i,m.UP.getSelectedVisualContainers(this.selection),!0),this.updateActiveListSortState(!1),[2]}})})},o.prototype.bringForwardGroupingOrder=function(){return(0,c.__awaiter)(this,void 0,void 0,function(){var e;return(0,c.__generator)(this,function(n){switch(n.label){case 0:return[4,this.zIndexPromise];case 1:return e=n.sent(),this.ensureNormalizedZIndex(e),e.sendZIndexCommandsByLevel(this.selection,this.listContracts,3),this.rebuildTreeForData(this.dataSource.data),[2]}})})},o.prototype.sendBackward=function(){return(0,c.__awaiter)(this,void 0,void 0,function(){return(0,c.__generator)(this,function(n){switch(n.label){case 0:switch(this.activeOrderStrategy){case R.grouping:return[3,1];case R.flatten:return[3,3]}return[3,5];case 1:return this.sendBackwardGroupingOrder(),[4,this.notifyUserLayerChanged(!1)];case 2:case 4:return n.sent(),[3,6];case 3:return this.sendBackwardFlattenOrder(),[4,this.notifyUserLayerChanged(!1)];case 5:return L.fF.assertNever(this.activeOrderStrategy),[3,6];case 6:return[2]}})})},o.prototype.sendBackwardFlattenOrder=function(){return(0,c.__awaiter)(this,void 0,void 0,function(){var e,n,i;return(0,c.__generator)(this,function(r){switch(r.label){case 0:return[4,(e=this.isZOrder())?this.zIndexPromise:this.tabOrderPromise];case 1:return n=r.sent(),this.ensureNormalization(e,!e),i=e?this.listContracts:this.filterVisualContainersByTabOrderSign(!0),n.sendBackward(i,m.UP.getSelectedVisualContainers(this.selection),!0),this.updateActiveListSortState(!1),[2]}})})},o.prototype.sendBackwardGroupingOrder=function(){return(0,c.__awaiter)(this,void 0,void 0,function(){var e;return(0,c.__generator)(this,function(n){switch(n.label){case 0:return[4,this.zIndexPromise];case 1:return e=n.sent(),this.ensureNormalizedZIndex(e),e.sendZIndexCommandsByLevel(this.selection,this.listContracts,4),this.rebuildTreeForData(this.dataSource.data),[2]}})})},o.prototype.toggleTabOrderSection=function(e){return(0,c.__awaiter)(this,void 0,void 0,function(){var n;return(0,c.__generator)(this,function(i){switch(i.label){case 0:return[4,this.tabOrderPromise];case 1:return n=i.sent(),this.ensureNormalizedTabOrder(n),n.changeSection(this.filterVisualContainersByTabOrderSign(e.isSkippedSection),[e.visualContainer.contract],e.isSkippedSection),this.selection.clearSelection(),m.UP.selectCanvasItem(e.visualContainer.contract,this.selection),this.selectionPaneListOrderService.markTabSorted(!1),[2]}})})},o.prototype.isEditable=function(){return 1===this.viewModeState.getMode()},o.prototype.getDragContextInternal=function(e){var i;return m.UP.isCanvasItemSelected(e.contract,this.selection)?i=this.getSelectedViewModels():(m.UP.selectCanvasItem(e.contract,this.selection),i=[e]),{visualContainers:i}},o.prototype.getDropAction=function(e){var n=this.promiseFactory.defer(),i=this.dragDataService.getDragContext();return i&&!_.isEmpty(i.visualContainers)&&this.isEditable()?(0,$e.W6)(e)?n.resolve(2):n.resolve(3):n.resolve(0),n.promise},o.prototype.dropOntoSibling=function(e,n,i){var r=this.dragDataService.getDragContext();if(r&&!_.isEmpty(r.visualContainers)&&this.isEditable()){var a=e.target.dataset.name,s=_.find(this.visualContainers,function(u){return u.name===a});switch(L.fF.assertValue(s,"Unable to get target view model"),this.activeOrderStrategy){case R.grouping:this.dropOntoSiblingHelper(this.listContracts,i,r,s);break;case R.flatten:var d=this.isZOrder()?this.listContracts:this.filterVisualContainersByTabOrderSign(!0);this.dropOntoSiblingHelper(d,i,r,s);break;default:L.fF.assertNever(this.activeOrderStrategy)}}},o.prototype.dropOntoSiblingHelper=function(e,n,i,r){return(0,c.__awaiter)(this,void 0,void 0,function(){var a,s;return(0,c.__generator)(this,function(d){switch(d.label){case 0:return[4,(a=this.isZOrder())?this.zIndexPromise:this.tabOrderPromise];case 1:return s=d.sent(),this.ensureNormalization(a,!a),2===n?s.moveAfter(e,r,_.map(i.visualContainers,function(u){return u.contract}),!0):3===n&&s.moveBefore(e,r,_.map(i.visualContainers,function(u){return u.contract}),!0),this.updateActiveListSortState(!1),[2]}})})},o.prototype.getSelectedViewModels=function(){var e=m.UP.getSelectedVisualContainers(this.selection);return _.filter(this.visualContainers,function(i){return _.some(e,function(r){return i.contract===r})})},o.prototype.onKeyDown=function(e,n,i){return void 0===i&&(i=!0),(0,c.__awaiter)(this,void 0,void 0,function(){var r;return(0,c.__generator)(this,function(a){switch(a.label){case 0:return 117===e.keyCode?(this.isListActive=!0,e.stopPropagation(),e.preventDefault()):9===e.keyCode&&this.isListActive?this.isListActive=!1:(13===e.keyCode||32===e.keyCode)&&i&&this.onItemClick(e,n),this.isEditable()?70===e.keyCode&&xe.M.isCtrlOrMeta(e)&&e.shiftKey&&i?(this.trackFocusElement(e.target),[4,this.bringForward()]):[3,2]:[3,5];case 1:return a.sent(),[3,5];case 2:return 66===e.keyCode&&xe.M.isCtrlOrMeta(e)&&e.shiftKey&&i?(this.trackFocusElement(e.target),[4,this.sendBackward()]):[3,4];case 3:return a.sent(),[3,5];case 4:if(this.isListActive&&37===e.keyCode&&i)r=_.find(this.treeControl.dataNodes,function(s){return n.name===s.canvasItem.name}),this.treeControl.isExpandable(r)&&this.treeControl.isExpanded(r)&&(this.treeControl.collapse(r),e.stopPropagation());else if(this.isListActive&&39===e.keyCode&&i)r=_.find(this.treeControl.dataNodes,function(s){return n.name===s.canvasItem.name}),this.treeControl.isExpandable(r)&&!this.treeControl.isExpanded(r)&&(this.treeControl.expand(r),e.stopPropagation());else if(57===e.keyCode&&e.shiftKey&&e.altKey&&i)this.treeControl.expandAll();else if(49===e.keyCode&&e.shiftKey&&e.altKey&&i)this.treeControl.collapseAll();else if(83===e.keyCode&&xe.M.isCtrlOrMeta(e)&&e.shiftKey)switch(this.activeSection){case ce.listOrderSection:this.toggleSelectedVisibility();break;case ce.tabOrderSection:this.toggleTabOrderSection({isSkippedSection:i,visualContainer:n});break;default:L.fF.assertNever(this.activeSection)}a.label=5;case 5:return[2]}})})},o.prototype.trackFocusElement=function(e){this.currentFocusElement=e,this.listChangeObserver.observe(e.parentElement,{childList:!0,subtree:!1,attributes:!1})},o.prototype.getTabIndex=function(e,n){return this.isListActive?0:_.isEmpty(this.isSelected)?(void 0===n&&(n=this.treeControl.dataNodes.findIndex(function(i){return i.canvasItem.name===e})),0===n?0:-1):e===_.last(Object.keys(this.isSelected))?0:-1},o.prototype.toggleSelectedVisibility=function(){var e,n,i,r=this.getSelectedItems(),a=(e=_.partition(r,function(h){return(0,F.q4)(h)}))[0],s=e[1];if(!_.isEmpty(a)){var d=(n=_.partition(a,function(h){return(0,pe.xj)(h)}))[0],u=n[1];_.isEmpty(d)||this.visualAuthoring.setVisualContainerGroupVisibility(!1,d),_.isEmpty(u)||this.visualAuthoring.setVisualContainerGroupVisibility(!0,u)}if(!_.isEmpty(s)){var l=(i=_.partition(s,function(h){return(0,G.xj)(h.config.singleVisual)}))[0],g=i[1];_.isEmpty(l)||this.visualAuthoring.setVisibility(!1,l),_.isEmpty(g)||this.visualAuthoring.setVisibility(!0,g)}},o.prototype.isCanvasItemSelected=function(e){return m.UP.isCanvasItemSelected(e.contract,this.selection)},o.prototype.getSelectedItems=function(){return m.UP.getSelectedCanvasItems(this.selection)},o.prototype.updateSelection=function(){_.isEmpty(this.visualContainers)&&(this.isSelected={});var e=this.getSelectedItems();_.isEmpty(e)&&(this.isSelected={}),this.isSelected=_.zipObject(_.map(e,function(n){return n.name}),_.map(e,_.constant(!0)))},o.prototype.ensureNormalizedZIndex=function(e){var n=this.listContracts;e.shouldNormalize(n)&&(e.normalize(n),this.selectionPaneListOrderService.markZSorted(!1))},o.prototype.filterVisualContainersByTabOrderSign=function(e){return this.visualContainers?(0,ee.cV)(this.visualContainers.map(function(n){return n.contract}),e):[]},o.prototype.ensureNormalizedTabOrder=function(e){var n=this.filterVisualContainersByTabOrderSign(!0);e.shouldNormalize(n,!0)&&(e.normalize(n,!0),this.selectionPaneListOrderService.markTabSorted(!1));var i=this.filterVisualContainersByTabOrderSign(!1);e.shouldNormalize(i,!1)&&(e.normalize(i,!1),this.selectionPaneListOrderService.markTabSorted(!1))},o.prototype.updateActiveListSortState=function(e){"tabOrder"===this.activePositionListOrder?this.selectionPaneListOrderService.markTabSorted(e):"z"===this.activePositionListOrder&&this.selectionPaneListOrderService.markZSorted(e)},o.\u0275fac=function(n){return new(n||o)(t.\u0275\u0275directiveInject(ge.i),t.\u0275\u0275directiveInject(W.D),t.\u0275\u0275directiveInject(ie.O),t.\u0275\u0275directiveInject(He.x),t.\u0275\u0275directiveInject(k.J),t.\u0275\u0275directiveInject(ue.I),t.\u0275\u0275directiveInject(J.vZ),t.\u0275\u0275directiveInject(se.F),t.\u0275\u0275directiveInject(be.p),t.\u0275\u0275directiveInject(X.H),t.\u0275\u0275directiveInject(Y.o),t.\u0275\u0275directiveInject(Re.t),t.\u0275\u0275directiveInject(oe.g),t.\u0275\u0275directiveInject(O.z),t.\u0275\u0275directiveInject(_e),t.\u0275\u0275directiveInject(Ce.kc),t.\u0275\u0275directiveInject(Z.$8),t.\u0275\u0275directiveInject(q.D))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["selection-pane-list-legacy-tree"]],inputs:{groups:"groups",visualContainers:"visualContainers",activeSection:"activeSection",activePositionListOrder:"activePositionListOrder"},features:[t.\u0275\u0275NgOnChangesFeature],decls:2,vars:2,consts:[[4,"ngIf"],["cdkDropList","",3,"dataSource","treeControl","cdkDropListDisabled","cdkDropListDropped"],["matTreeNodePadding","","matTreeNodePaddingIndent","20","cdkDrag","","class","selection-pane-item themeableElement",3,"cdkDragData","ngClass","keydown","click","cdkDragStarted","cdkDragReleased",4,"matTreeNodeDef"],["matTreeNodePadding","","matTreeNodePaddingIndent","20","cdkDrag","",1,"selection-pane-item","themeableElement",3,"cdkDragData","ngClass","keydown","click","cdkDragStarted","cdkDragReleased"],["matTreeNodeToggle","","class","caret glyphicon glyph-mini smallFontSize item-auto",3,"ngClass",4,"ngIf"],["tabindex","-1",3,"ngClass","item","isEditing"],["matTreeNodeToggle","",1,"caret","glyphicon","glyph-mini","smallFontSize","item-auto",3,"ngClass"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","ui-droppable dropzone selection-pane-item themeableElement",3,"ngClass","drag","getDragContext","drop","dropAction","click","keydown","dropHandler",4,"ngIf"],[1,"ui-droppable","dropzone","selection-pane-item","themeableElement",3,"ngClass","drag","getDragContext","drop","dropAction","click","keydown","dropHandler"],["tabindex","-1",3,"item","order","isSkipped","skipFunction","isEditing",4,"ngIf"],["tabindex","-1",3,"item","isEditing",4,"ngIf"],["tabindex","-1",3,"item","order","isSkipped","skipFunction","isEditing"],["tabindex","-1",3,"item","isEditing"],["class","ui-droppable dropzone selection-pane-item themeableElement","localizeTooltip","ExplorationCanvasItemsPane_TabOrder_Element_Skipped_Tooltip",3,"ngClass","click","keydown",4,"ngIf"],["localizeTooltip","ExplorationCanvasItemsPane_TabOrder_Element_Skipped_Tooltip",1,"ui-droppable","dropzone","selection-pane-item","themeableElement",3,"ngClass","click","keydown"],["tabindex","-1",3,"item","isSkipped","skipFunction"]],template:function(n,i){1&n&&(t.\u0275\u0275template(0,Ot,3,4,"ng-container",0),t.\u0275\u0275template(1,$t,4,4,"ng-container",0)),2&n&&(t.\u0275\u0275property("ngIf",i.isActiveOrderStrategy(i.OrderStrategy.grouping)&&i.isActiveSection(i.SectionType.listOrderSection)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!i.isActiveOrderStrategy(i.OrderStrategy.grouping)))},dependencies:[x.NgClass,x.NgForOf,x.NgIf,Ue.Wj,Ue.Zt,Te.r,Q.fQ,Q.ah,Q.eu,Q.gi,Q.uo,mt.w,Ge.W,Ne],styles:['[_nghost-%COMP%]{--colorForeground: var(--gray-180, #252423);--colorSelectedBackground: var(--colorNeutralBackground3Selected);--colorBackgroundHover: var(--neutral-secondary-color, #666666);--colorBackgroundDisabledAndSelected: var(--neutral-primary-color-alt3, #515151);--colorDropBackground: var(--theme-primary-color, #F2C811);--colorDragging: var(--gray-20, #F3F2F1);--colorDragPreviewHover: var(--gray-30, #EDEBE9);--colorPaneFont: var(--neutral-lighter-color, #F4F4F4)}[data-legacy-theming=false]   [_nghost-%COMP%]{--colorForeground: var(--colorNeutralForeground1);--colorSelectedBackground: var(--colorNeutralBackground3Selected);--colorBackgroundHover: var(--colorNeutralBackground3Hover);--colorBackgroundDisabledAndSelected: var(--colorBackgroundHover);--colorDropBackground: var(--colorBrandBackground);--colorDragging: var(--colorBackgroundDisabledAndSelected);--colorDragPreviewHover: var(--colorBackgroundHover);--colorPaneFont: var(--colorForeground)}.mat-tree-node[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{display:flex;margin:0 2px;align-items:center;justify-content:space-between;background-color:var(--colorSelectedBackground);color:var(--colorPaneFont);cursor:pointer;background-color:transparent;border:1px solid transparent;padding:0 6px}.mat-tree-node.append[_ngcontent-%COMP%], li.append[_ngcontent-%COMP%]{border-bottom-color:var(--colorDropBackground)!important}.mat-tree-node.prepend[_ngcontent-%COMP%], li.prepend[_ngcontent-%COMP%]{border-top-color:var(--colorDropBackground)!important}.mat-tree-node.droppable[_ngcontent-%COMP%]:hover, li.droppable[_ngcontent-%COMP%]:hover, .mat-tree-node.ui-droppable[_ngcontent-%COMP%]:hover, li.ui-droppable[_ngcontent-%COMP%]:hover{background-color:var(--colorBackgroundDisabledAndSelected);color:var(--colorForeground)}.mat-tree-node.selected[_ngcontent-%COMP%]   .menuContainer[_ngcontent-%COMP%]   .optionsMenu[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%], li.selected[_ngcontent-%COMP%]   .menuContainer[_ngcontent-%COMP%]   .optionsMenu[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%], .mat-tree-node[_ngcontent-%COMP%]:hover   .menuContainer[_ngcontent-%COMP%]   .optionsMenu[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%], li[_ngcontent-%COMP%]:hover   .menuContainer[_ngcontent-%COMP%]   .optionsMenu[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%]{opacity:1}.mat-tree-node[_ngcontent-%COMP%]:focus, li[_ngcontent-%COMP%]:focus{outline:none}.mat-tree-node[_ngcontent-%COMP%]{margin:0}i.caret.glyphicon[_ngcontent-%COMP%]{margin:0 4px}selection-pane-item.groupNode[_ngcontent-%COMP%]{width:calc(100% - 10px)}selection-pane-item[_ngcontent-%COMP%]:focus{outline:none}li.selection-pane-item.ui-draggable-dragging[_ngcontent-%COMP%], .mat-tree-node.cdk-drag-preview[_ngcontent-%COMP%]{display:flex;margin:0 2px;align-items:center;justify-content:space-between;background-color:var(--colorSelectedBackground);color:var(--colorPaneFont);padding:0 6px}.mat-tree-node.cdk-drag-preview[_ngcontent-%COMP%]{font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif;font-size:12px;background-color:var(--colorDragging);color:var(--colorForeground);border-radius:2px}.mat-tree-node[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{background-color:transparent;color:var(--colorForeground);border-radius:2px}.mat-tree-node.selected[_ngcontent-%COMP%], li.selected[_ngcontent-%COMP%]{background-color:var(--colorSelectedBackground)}.mat-tree-node.droppable[_ngcontent-%COMP%]:hover, li.droppable[_ngcontent-%COMP%]:hover, .mat-tree-node.ui-droppable[_ngcontent-%COMP%]:hover, li.ui-droppable[_ngcontent-%COMP%]:hover{background-color:var(--colorDragPreviewHover);color:var(--colorForeground)}html[data-focus-source="key"][_nghost-%COMP%]   .mat-tree-node[_ngcontent-%COMP%]:focus, html[data-focus-source="key"]   [_nghost-%COMP%]   .mat-tree-node[_ngcontent-%COMP%]:focus, html[data-focus-source="key"][_nghost-%COMP%]   li[_ngcontent-%COMP%]:focus, html[data-focus-source="key"]   [_nghost-%COMP%]   li[_ngcontent-%COMP%]:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color)}.selection-pane-item.ui-draggable-dragging[_ngcontent-%COMP%]{background-color:var(--colorDragging);color:var(--colorForeground);border-radius:2px}',".mat-tree[_ngcontent-%COMP%]{display:inherit;background:none}.mat-tree-node[_ngcontent-%COMP%]{font-weight:inherit;font-size:inherit;min-height:24px}.mat-tree-node[_ngcontent-%COMP%]{-webkit-user-select:none;-ms-user-select:none;user-select:none}.mat-tree-node.cdk-drag-preview[_ngcontent-%COMP%]{box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.mat-tree-node.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .mat-tree-node[_ngcontent-%COMP%]:not(.cdk-drag-placeholder).droppable{transition:transform .25s cubic-bezier(0,0,.2,1)}.cdk-drag-animating.droppable[_ngcontent-%COMP%]{transition:transform .2s cubic-bezier(0,0,.2,1)}"]}),o}(),ut=p(85102);function jt(o,e){if(1&o){var n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",10)(1,"button",11),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(n);var a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.setVisibilityButton.fn(!0))}),t.\u0275\u0275pipe(2,"async"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"button",12),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(n);var a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.setVisibilityButton.fn(!1))}),t.\u0275\u0275pipe(4,"async"),t.\u0275\u0275elementEnd()()}if(2&o){var i=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("disabled",!t.\u0275\u0275pipeBind1(2,2,i.isEditable$)),t.\u0275\u0275advance(2),t.\u0275\u0275property("disabled",!t.\u0275\u0275pipeBind1(4,4,i.isEditable$))}}function Ht(o,e){1&o&&(t.\u0275\u0275elementStart(0,"div",13),t.\u0275\u0275element(1,"div",14),t.\u0275\u0275elementEnd())}function Ut(o,e){if(1&o&&t.\u0275\u0275element(0,"pbi-tree",16),2&o){var n=e.ngIf,i=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("tree",n)("options",i.treeOptions)}}function Gt(o,e){if(1&o&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,Ut,1,2,"pbi-tree",15),t.\u0275\u0275pipe(2,"async"),t.\u0275\u0275elementContainerEnd()),2&o){var n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(2,1,n.layerTree$))}}function Kt(o,e){if(1&o&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"selection-pane-list-legacy-tree",17),t.\u0275\u0275elementContainerEnd()),2&o){var n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("groups",n.groups)("visualContainers",n.visualContainers)("activeSection",n.activeSection)("activePositionListOrder",n.activePositionListOrder)}}var xt=function(o){function e(n,i,r,a,s,d,u,l,g,h,C,T,B,j,K,te,ne,N,le,et,tt,gt){var v=o.call(this)||this;return v.clickStrategy=n,v.conceptualSchemaProxy=i,v.dataSources=r,v.displayNameService=a,v.dragDropStrategy=s,v.editLabelStrategy=d,v.eventBridge=u,v.featureSwitchService=l,v.formFactor=g,v.hoverStrategy=h,v.keyboardStrategy=C,v.layerInlineItemStrategy=T,v.layerMenuStrategy=B,v.lazyScoped=j,v.localizationService=K,v.pauseQueriesService=te,v.screenReaderService=ne,v.selection=N,v.selectionPaneListOrderService=le,v.viewModeState=et,v.visualAuthoring=tt,v.visualPlugin=gt,v.OrderStrategy=M,v.activePositionListOrder="z",v.activeSection=z.listOrderSection,v.activeOrderStrategy$=new re.t(1),v.isSelected={},v.layerTree$=new re.t(1),v.treeOptions={click:v.clickStrategy,dragDrop:v.dragDropStrategy,editLabel:v.editLabelStrategy,hover:v.hoverStrategy,inlineItem:v.layerInlineItemStrategy,keyboard:v.keyboardStrategy,menu:v.layerMenuStrategy},v.zNodeSet={},v.layerOrderPanePbiTreeFS$=new re.t(1),v.showLayerOrderTree$=new re.t(1),v.zIndexPromise=v.lazyScoped.get("zIndexService"),v.scrollbarsConfig={ignoreOverlay:!1,ignoreMobile:!1},v}return(0,c.__extends)(e,o),e.prototype.ngOnInit=function(){var n=this;this.updateSelection(),this.changes$("groups").pipe((0,I.R)(this.onDestroy$)).subscribe(function(i){n.listContracts=_.map(i,function(r){return r.contract})}),this.hasNoContent$=this.changes$("groups").pipe((0,ke.U)(function(i){return!i||0===i.length})),this.isEditable$=this.viewModeState.getMode$().pipe((0,ke.U)(function(i){return 1===i})),this.featureSwitchSubscription=this.featureSwitchService.featureSwitches$.pipe((0,me.n)(function(i){return!i}),(0,De.q)(1),(0,I.R)(this.onDestroy$)).subscribe(function(i){return(0,c.__awaiter)(n,void 0,void 0,function(){return(0,c.__generator)(this,function(r){return this.layerOrderPanePbiTreeFS$.next(i.layerOrderPanePbiTree),[2]})})}),this.layerInlineItemStrategy.getInlineItemChange$().pipe((0,V.M)(this.isEditable$),(0,I.R)(this.onDestroy$)).subscribe(function(i){return n.refreshTree(n.groups,i[1])}),this.dragDropStrategy.getDragDropChange$().pipe((0,V.M)(this.isEditable$),(0,I.R)(this.onDestroy$)).subscribe(function(i){return n.refreshTree(n.groups,i[1])}),this.pauseQueriesService.getShowPausedQuery$().pipe((0,V.M)(this.isEditable$,this.pauseQueriesService.isReportPaused$()),(0,I.R)(this.onDestroy$)).subscribe(function(i){i[2]&&n.refreshTreeNodesByName([i[0]],i[1])}),this.keyboardStrategy.getSendItemsDirectionKeyboard$().pipe((0,I.R)(this.onDestroy$)).subscribe(function(i){n.sendDirectionGroupingOrder(i),n.selectionPaneListOrderService.notifyUserLayerDataChanged(i)}),this.keyboardStrategy.getToggleItemsVisibilityKeyboard$().pipe((0,V.M)(this.isEditable$),(0,I.R)(this.onDestroy$)).subscribe(function(i){var a=i[1];n.toggleSelectedVisibility(),n.refreshTree(n.groups,a)}),this.eventBridge.on(y.tRg).pipe((0,I.R)(this.onDestroy$)).subscribe(function(){n.setNodesSelectedState(n.zNodeSet,n.isSelected,!1),n.updateSelection(),n.setNodesSelectedState(n.zNodeSet,n.isSelected,!0)}),this.eventBridge.on(y.KD7).pipe((0,V.M)(this.isEditable$),(0,I.R)(this.onDestroy$)).subscribe(function(i){var a=i[1];n.updateSelection(),n.refreshTreeNodesByName(Object.keys(n.isSelected),a)}),this.eventBridge.on(y.jCS).pipe((0,V.M)(this.isEditable$),(0,I.R)(this.onDestroy$)).subscribe(function(i){n.refreshTree(n.groups,i[1])}),this.eventBridge.on(y.ICs).pipe((0,V.M)(this.isEditable$),(0,I.R)(this.onDestroy$)).subscribe(function(i){var a=i[1];n.ensureNormalization(),n.refreshTree(n.groups,a)}),this.eventBridge.on(y.D1A).pipe((0,V.M)(this.isEditable$),(0,I.R)(this.onDestroy$)).subscribe(function(i){n.refreshTreeNodesByName([i[0].name],i[1])}),this.formFactor.currentLayout$.pipe((0,I.R)(this.onDestroy$)).subscribe(function(i){n.activeOrderStrategy$.next(1!==i?M.grouping:M.flatten)}),(0,lt.aj)([this.activeOrderStrategy$,this.layerOrderPanePbiTreeFS$]).pipe((0,ht.x)(),(0,I.R)(this.onDestroy$)).subscribe(function(i){n.showLayerOrderTree$.next(i[0]===M.grouping&&i[1])}),this.showLayerOrderTree$.pipe((0,V.M)(this.isEditable$),(0,I.R)(this.onDestroy$)).subscribe(function(i){i[0]&&n.refreshTree(n.groups,i[1])}),this.onChanges$.pipe((0,V.M)(this.layerOrderPanePbiTreeFS$,this.isEditable$),(0,I.R)(this.onDestroy$)).subscribe(function(i){var r=i[0],a=i[1],s=i[2];a&&r.groups&&r.groups.currentValue&&(n.listContracts=_.map(n.groups,function(d){return d.contract}),n.updateSelection(),n.refreshTree(r.groups.currentValue,s)),!a&&r.groups&&r.groups.currentValue&&(n.listContracts=_.map(n.groups,function(d){return d.contract}),n.ensureNormalization(),n.updateSelection())}),this.bringForwardButton=this.createEventAdapter(),this.bringForwardButton.$.pipe((0,V.M)(this.activeOrderStrategy$,this.showLayerOrderTree$)).subscribe(function(i){var a=i[1],s=i[2];switch(a){case M.grouping:n.sendDirectionGroupingOrder(!0),s?n.announceItemsZIndexChange(!0):n.selectionPaneListOrderService.notifyUserLayerDataChanged(!0);break;case M.flatten:n.sendDirectionFlattenOrder(!0),n.selectionPaneListOrderService.notifyUserLayerDataChanged(!0);break;default:L.fF.assertNever(a)}}),this.sendBackwardButton=this.createEventAdapter(),this.sendBackwardButton.$.pipe((0,V.M)(this.activeOrderStrategy$,this.showLayerOrderTree$)).subscribe(function(i){var a=i[1],s=i[2];switch(a){case M.grouping:n.sendDirectionGroupingOrder(!1),s?n.announceItemsZIndexChange(!1):n.selectionPaneListOrderService.notifyUserLayerDataChanged(!1);break;case M.flatten:n.sendDirectionFlattenOrder(!1),n.selectionPaneListOrderService.notifyUserLayerDataChanged(!1);break;default:L.fF.assertNever(a)}}),this.setVisibilityButton=this.createEventAdapter(),this.setVisibilityButton.$.subscribe(function(i){n.setItemsVisibility(i)})},e.prototype.setItemsVisibility=function(n){var i=this.getSelectedItems(),r=_.isEmpty(i),a=r?this.listContracts:i;this.setCanvasItemsVisibility(a,n,r),this.readOutItemVisibilityChanges(a,n)},e.prototype.readOutItemVisibilityChanges=function(n,i){return(0,c.__awaiter)(this,void 0,void 0,function(){var r,a,s,d;return(0,c.__generator)(this,function(u){switch(u.label){case 0:return r=[],a=[],n.map(function(l){(0,F.Vz)(l)?r.push(l):a.push(l)}),[4,this.joinVCandGroupNames(r,a)];case 1:return(s=u.sent())&&(d=this.localizationService.format(i?"ExplorationCanvasItemsPane_Shown":"ExplorationCanvasItemsPane_Hidden",s),this.screenReaderService.alertPolite(d)),[2]}})})},e.prototype.joinVCandGroupNames=function(n,i){return(0,c.__awaiter)(this,void 0,void 0,function(){var r,a,u=this;return(0,c.__generator)(this,function(l){switch(l.label){case 0:return[4,Promise.all(n.map(function(g){return(0,b.uo)(g,{dataSources:u.dataSources,conceptualSchemaProxy:u.conceptualSchemaProxy,visualPlugin:u.visualPlugin,displayNameService:u.displayNameService})}))];case 1:return r=l.sent(),a=i.map(function(g){return g.displayName}),[2,(0,c.__spreadArray)((0,c.__spreadArray)([],r,!0),a,!0).filter(function(g){return g}).join(", ")]}})})},e.prototype.toggleSelectedVisibility=function(){var n,i,r,a=this.getSelectedItems(),s=(n=_.partition(a,function(C){return(0,F.q4)(C)}))[0],d=n[1];if(!_.isEmpty(s)){var u=(i=_.partition(s,function(C){return(0,pe.xj)(C)}))[0],l=i[1];_.isEmpty(u)||this.visualAuthoring.setVisualContainerGroupVisibility(!1,u),_.isEmpty(l)||this.visualAuthoring.setVisualContainerGroupVisibility(!0,l)}if(!_.isEmpty(d)){var g=(r=_.partition(d,function(C){return(0,G.xj)(C.config.singleVisual)}))[0],h=r[1];_.isEmpty(g)||this.visualAuthoring.setVisibility(!1,g),_.isEmpty(h)||this.visualAuthoring.setVisibility(!0,h)}},e.prototype.refreshTree=function(n,i){var r;return(0,c.__awaiter)(this,void 0,void 0,function(){var a,s,d,u,l=this;return(0,c.__generator)(this,function(g){switch(g.label){case 0:return a=this.dataSources.get(),[4,this.conceptualSchemaProxy.get(a)];case 1:return s=g.sent(),d=this.selectionPaneListOrderService.sortItemsByProperty(n,function(h){return h.position.z}),u={nodes:_.map(d.sortedItems,function(h,C){return l.refreshTreeNode(h,s,i)})},this.clickStrategy.setTree(u),this.dragDropStrategy.setTree(u),null===(r=this.layerTree)||void 0===r||r.renderNodeChangesImmediate(),this.layerTree$.next(u),[2,u]}})})},e.prototype.refreshTreeNode=function(n,i,r,a,s){var d=this;void 0===s&&(s=!0);var u=this.getCanvasItemDisplayName(n,i),l=this.zNodeSet[n.name]=this.zNodeSet[n.name]||{displayName:void 0};return l.displayName=u,l.ariaLabel=u,l.data={canvasItem:n},l.id=n.name,l.selected=this.isSelected[n.name],l.editable=r,l.inlineItems=(0,c.__spreadArray)([],this.layerInlineItemStrategy.getInlineItems(n),!0),l.alwaysShowInlineItems=!0,l.menu=!0,l.alwaysShowMenu=!0,l.draggable=!0,l.parent=a,l.children=[],(0,f.q4)(n)&&s&&_.forEach(n.children,function(g,h){l.children.push(d.refreshTreeNode(g,i,r,l))}),l},e.prototype.refreshTreeNodesByName=function(n,i){var r,a;return(0,c.__awaiter)(this,void 0,void 0,function(){var s,d,u,l,g,h;return(0,c.__generator)(this,function(C){switch(C.label){case 0:return s=this.dataSources.get(),[4,this.conceptualSchemaProxy.get(s)];case 1:for(d=C.sent(),u=0,l=n;u<l.length;u++)h=this.zNodeSet[g=l[u]]=this.zNodeSet[g]||{displayName:void 0},null!==(r=h.data)&&void 0!==r&&r.canvasItem&&this.refreshTreeNode(h.data.canvasItem,d,i,h.parent,!1);return null===(a=this.layerTree)||void 0===a||a.renderNodeChanges(),[2]}})})},e.prototype.getCanvasItemDisplayName=function(n,i){var r;if((0,f.Vz)(n)){var a=(0,b.PQ)(n.contract),s=this.visualPlugin.capabilities((0,Ie.s)(n.contract));return null===(r=this.displayNameService.getVisualTitle(a,i,s,void 0,void 0,!0))||void 0===r?void 0:r.text}return n.contract.displayName},e.prototype.setNodesSelectedState=function(n,i,r){for(var a in i)n[a]&&(n[a].selected=r);this.layerTree&&this.layerTree.renderNodeChanges()},e.prototype.sendDirectionFlattenOrder=function(n){return(0,c.__awaiter)(this,void 0,void 0,function(){var i,r;return(0,c.__generator)(this,function(a){switch(a.label){case 0:return[4,this.zIndexPromise];case 1:return i=a.sent(),[4,this.ensureNormalization()];case 2:return a.sent(),r=this.listContracts,n?i.bringForward(r,m.UP.getSelectedVisualContainers(this.selection),!0):i.sendBackward(r,m.UP.getSelectedVisualContainers(this.selection),!0),this.selectionPaneListOrderService.markZSorted(!1),[2]}})})},e.prototype.sendDirectionGroupingOrder=function(n){return(0,c.__awaiter)(this,void 0,void 0,function(){var i;return(0,c.__generator)(this,function(r){switch(r.label){case 0:return[4,this.zIndexPromise];case 1:return i=r.sent(),[4,this.ensureNormalization()];case 2:return r.sent(),i.sendZIndexCommandsByLevel(this.selection,this.listContracts,n?3:4),this.selectionPaneListOrderService.rebuildListData(),[2]}})})},e.prototype.announceItemsZIndexChange=function(n){return(0,c.__awaiter)(this,void 0,void 0,function(){var i,r,a,s;return(0,c.__generator)(this,function(d){switch(d.label){case 0:return i=m.UP.getSelectedVisualContainers(this.selection),r=m.UP.getSelectedVisualContainerGroups(this.selection),[4,this.joinVCandGroupNames(i,r)];case 1:return(a=d.sent())&&(s=this.localizationService.format(n?"ExplorationCanvasItemsPane_SentForward":"ExplorationCanvasItemsPane_SentBackward",a),this.screenReaderService.alertPolite(s)),[2]}})})},e.prototype.ensureNormalization=function(){return(0,c.__awaiter)(this,void 0,void 0,function(){var n,i;return(0,c.__generator)(this,function(r){switch(r.label){case 0:return[4,this.zIndexPromise];case 1:return(n=r.sent()).shouldNormalize(i=this.listContracts)&&(n.normalize(i),this.selectionPaneListOrderService.markZSorted(!1)),[2]}})})},e.prototype.setCanvasItemsVisibility=function(n,i,r){for(var a=!i,s=[],d=[],u=0,l=n;u<l.length;u++){var g=l[u];(0,F.Vz)(g)?(0,G.xj)(g.config.singleVisual)!==a&&s.push(g):((0,pe.xj)(g)!==a&&d.push(g),r&&this.setCanvasItemsVisibility(g.children,i,r))}_.isEmpty(s)||this.visualAuthoring.setVisibility(a,s),_.isEmpty(d)||this.visualAuthoring.setVisualContainerGroupVisibility(a,d)},e.prototype.updateSelection=function(){_.isEmpty(this.groups)&&(this.isSelected={});var n=this.getSelectedItems();_.isEmpty(n)&&(this.isSelected={}),this.isSelected=_.zipObject(_.map(n,function(i){return i.name}),_.map(n,_.constant(!0)))},e.prototype.getSelectedItems=function(){return m.UP.getSelectedCanvasItems(this.selection)},e.\u0275fac=function(i){return new(i||e)(t.\u0275\u0275directiveInject(S),t.\u0275\u0275directiveInject(ge.i),t.\u0275\u0275directiveInject(W.D),t.\u0275\u0275directiveInject(ie.O),t.\u0275\u0275directiveInject(Le),t.\u0275\u0275directiveInject(it),t.\u0275\u0275directiveInject(k.J),t.\u0275\u0275directiveInject(J.vZ),t.\u0275\u0275directiveInject(se.F),t.\u0275\u0275directiveInject(H),t.\u0275\u0275directiveInject(ye),t.\u0275\u0275directiveInject(ot),t.\u0275\u0275directiveInject(Pe),t.\u0275\u0275directiveInject(X.H),t.\u0275\u0275directiveInject(Y.o),t.\u0275\u0275directiveInject(ve.F),t.\u0275\u0275directiveInject(oe.g),t.\u0275\u0275directiveInject(O.z),t.\u0275\u0275directiveInject(_e),t.\u0275\u0275directiveInject(Ce.kc),t.\u0275\u0275directiveInject(Z.$8),t.\u0275\u0275directiveInject(q.D))},e.\u0275cmp=t.\u0275\u0275defineComponent({type:e,selectors:[["layer-order-section"]],viewQuery:function(i,r){var a;(1&i&&t.\u0275\u0275viewQuery(ae.u,5),2&i)&&(t.\u0275\u0275queryRefresh(a=t.\u0275\u0275loadQuery())&&(r.layerTree=a.first))},inputs:{groups:"groups",visualContainers:"visualContainers"},features:[t.\u0275\u0275ProvidersFeature([S,it,H,Le,ot,ye,Pe]),t.\u0275\u0275InheritDefinitionFeature],decls:20,vars:25,consts:[[1,"selection-pane-list-actions"],[1,"selection-pane-list-actions-move"],["id","bringForward",3,"disabled","pbiTooltip","click"],[1,"glyphicon","pbi-glyph-flickup","glyph-small"],["id","sendBackward",3,"disabled","pbiTooltip","click"],["class","selection-pane-list-actions-visibility",4,"ngIf"],["class","no-content-container","tabindex","0",4,"ngIf"],[1,"scroll-container-flex-grow"],[1,"selection-pane-list",3,"pbiScrollbar"],[4,"ngIf"],[1,"selection-pane-list-actions-visibility"],["id","show","localize","Show",3,"disabled","click"],["id","hide","localize","Hide",3,"disabled","click"],["tabindex","0",1,"no-content-container"],["localize","ExplorationCanvasItemsPane_NoCanvasItems"],["disableIcons","true","focus-nav-mode","Browser",3,"tree","options",4,"ngIf"],["disableIcons","true","focus-nav-mode","Browser",3,"tree","options"],[3,"groups","visualContainers","activeSection","activePositionListOrder"]],template:function(i,r){1&i&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"button",2),t.\u0275\u0275listener("click",function(){return r.bringForwardButton.fn()}),t.\u0275\u0275pipe(3,"async"),t.\u0275\u0275pipe(4,"localize"),t.\u0275\u0275element(5,"i",3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"button",4),t.\u0275\u0275listener("click",function(){return r.sendBackwardButton.fn()}),t.\u0275\u0275pipe(7,"async"),t.\u0275\u0275pipe(8,"localize"),t.\u0275\u0275element(9,"i",3),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(10,jt,5,6,"div",5),t.\u0275\u0275pipe(11,"async"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(12,Ht,2,0,"div",6),t.\u0275\u0275pipe(13,"async"),t.\u0275\u0275elementStart(14,"div",7)(15,"div",8),t.\u0275\u0275template(16,Gt,3,3,"ng-container",9),t.\u0275\u0275pipe(17,"async"),t.\u0275\u0275template(18,Kt,2,4,"ng-container",9),t.\u0275\u0275pipe(19,"async"),t.\u0275\u0275elementEnd()()),2&i&&(t.\u0275\u0275advance(2),t.\u0275\u0275property("disabled",!t.\u0275\u0275pipeBind1(3,9,r.isEditable$))("pbiTooltip",t.\u0275\u0275pipeBind1(4,11,"ExplorationCanvasItemsPane_BringForward")),t.\u0275\u0275advance(4),t.\u0275\u0275property("disabled",!t.\u0275\u0275pipeBind1(7,13,r.isEditable$))("pbiTooltip",t.\u0275\u0275pipeBind1(8,15,"ExplorationCanvasItemsPane_SendBackward")),t.\u0275\u0275advance(4),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(11,17,r.activeOrderStrategy$)===r.OrderStrategy.grouping),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(13,19,r.hasNoContent$)),t.\u0275\u0275advance(3),t.\u0275\u0275property("pbiScrollbar",r.scrollbarsConfig),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(17,21,r.showLayerOrderTree$)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!1===t.\u0275\u0275pipeBind1(19,23,r.showLayerOrderTree$)))},dependencies:[x.NgIf,Ae.X,Me.r,Fe.V,ae.u,dt,x.AsyncPipe,ut.F],styles:['.selection-pane-list-actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;padding:0 10px;height:32px;border-bottom:1px solid var(--neutral-primary-color);flex:none;border-color:var(--gray-40)}.selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{flex-grow:1;display:flex;align-items:center}.selection-pane-list-actions[_ngcontent-%COMP%] > div.selection-pane-list-actions-move[_ngcontent-%COMP%]{justify-content:flex-start;font-size:11px;margin-right:6px}.selection-pane-list-actions[_ngcontent-%COMP%] > div.selection-pane-list-actions-move[_ngcontent-%COMP%]   #bringForward[_ngcontent-%COMP%]{margin-right:6px}.selection-pane-list-actions[_ngcontent-%COMP%] > div.selection-pane-list-actions-move[_ngcontent-%COMP%]   #sendBackward[_ngcontent-%COMP%]{margin-left:6px}.selection-pane-list-actions[_ngcontent-%COMP%] > div.selection-pane-list-actions-visibility[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;font-size:11px;margin-left:6px;overflow:hidden}.selection-pane-list-actions[_ngcontent-%COMP%] > div.selection-pane-list-actions-visibility[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;min-width:25px}.selection-pane-list-actions[_ngcontent-%COMP%] > div.selection-pane-list-actions-visibility[_ngcontent-%COMP%]   button#show[_ngcontent-%COMP%]{margin-right:6px}.selection-pane-list-actions[_ngcontent-%COMP%] > div.selection-pane-list-actions-visibility[_ngcontent-%COMP%]   button#hide[_ngcontent-%COMP%]{margin-left:6px}.selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent;border-color:inherit;color:inherit;font-size:12px}.selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%], .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:hover, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:hover, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:focus, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:focus, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:active, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:active, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active:hover, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:active:hover, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:active:hover, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus:hover, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:focus:hover, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:focus:hover{background-color:transparent;border-color:inherit}.selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active:hover, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus:hover{color:inherit}.selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%], .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:hover, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:hover, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:focus, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:focus, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:active, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:active, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:active:hover, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:active:hover, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:focus:hover, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:focus:hover{color:var(--gray-80)}html[data-focus-source="key"][_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus, html[data-focus-source="key"]   [_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color)}.selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .glyph-small[_ngcontent-%COMP%]{font-size:14px}.selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button#sendBackward[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding:10px 0 0;margin:0}.selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button#bringForward[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding:5px 0 0;margin:0;transform:scaleY(-1);-webkit-transform:scale(1,-1)}.no-content-container[_ngcontent-%COMP%]{--empty-container-text-color: var(--gray-180);display:flex;flex:1 0 auto;justify-content:center;align-items:start;color:var(--empty-container-text-color);padding-top:6px}  [data-legacy-theming=false] .no-content-container{--empty-container-text-color: var(--colorNeutralForeground1)}.scroll-container-flex-grow[_ngcontent-%COMP%]{flex:1 0 0px;overflow:hidden}.aria-hint[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]{display:flex;flex-direction:column;flex:1 0 auto;text-align:left}[_nghost-%COMP%]:focus{outline:none}']}),e}(ct.w),Tt=p(10556),Nt=p(9500),Et=p(98665),Xt=p(21024),Zt=p(54932),Qt=p(35756),Wt=p(21023),Jt=p(24548);function Yt(o,e){if(1&o&&(t.\u0275\u0275elementStart(0,"div",4)(1,"section",5),t.\u0275\u0275element(2,"selection-pane-list",6),t.\u0275\u0275elementEnd()()),2&o){var n=t.\u0275\u0275nextContext().ngIf,i=t.\u0275\u0275nextContext();t.\u0275\u0275property("hidden",!n.isPaneExpanded),t.\u0275\u0275advance(2),t.\u0275\u0275property("groups",i.exploreCanvas.visualContainerGroups)("visualContainers",i.exploreCanvas.visualContainers)}}function qt(o,e){if(1&o){var n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"pbi-pane",1),t.\u0275\u0275listener("onToggle",function(){t.\u0275\u0275restoreView(n);var s=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(s.togglePane())})("onCollapse",function(){t.\u0275\u0275restoreView(n);var s=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(s.onPaneCollapsed())}),t.\u0275\u0275elementStart(1,"pbi-pane-section",2),t.\u0275\u0275template(2,Yt,3,3,"div",3),t.\u0275\u0275elementEnd()()}if(2&o){var i=e.ngIf,r=t.\u0275\u0275nextContext();t.\u0275\u0275property("expanded",i.isPaneExpanded)("allowToggle",!r.isPaneSwitcherSupported)("title",i.title)("optionsSetting",r.isPaneSwitcherSupported?i.optionsSetting:void 0)("showCollapse",r.isPaneSwitcherSupported),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",i.isPaneVisible)}}var pt=function(){function o(e,n,i){this.panesVisibility=e,this.telemetryService=n,this.viewModeState=i,this.viewModel$=this.panesVisibility.getPanes$().pipe((0,ke.U)(function(r){return r.canvasItems}))}return o.prototype.ngOnInit=function(){this.core=new en({panesVisibility:this.panesVisibility,telemetryService:this.telemetryService,viewModeState:this.viewModeState}),this.core.exploreCanvas=this.exploreCanvas},o.prototype.ngOnChanges=function(e){this.core&&e.exploreCanvas&&(this.core.exploreCanvas=e.exploreCanvas.currentValue)},Object.defineProperty(o.prototype,"isPaneSwitcherSupported",{get:function(){return this.panesVisibility.isPaneSwitcherSupported()},enumerable:!1,configurable:!0}),o.prototype.onPaneCollapsed=function(){this.core.onPaneCollapsed()},o.prototype.togglePane=function(){this.core.togglePane()},o.\u0275fac=function(n){return new(n||o)(t.\u0275\u0275directiveInject(Xt.r),t.\u0275\u0275directiveInject(Et.y0),t.\u0275\u0275directiveInject(Ce.kc))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["selection-pane"]],inputs:{exploreCanvas:"exploreCanvas"},features:[t.\u0275\u0275NgOnChangesFeature],decls:2,vars:3,consts:[["class","selection-pane","noPadding","","disableScroll","","pbiAutoFocus","","keyboard-shortcuts","ctrl-F6","focus-priority","7","focus-nav-mode","Group",3,"expanded","allowToggle","title","optionsSetting","showCollapse","onToggle","onCollapse",4,"ngIf"],["noPadding","","disableScroll","","pbiAutoFocus","","keyboard-shortcuts","ctrl-F6","focus-priority","7","focus-nav-mode","Group",1,"selection-pane",3,"expanded","allowToggle","title","optionsSetting","showCollapse","onToggle","onCollapse"],["noPadding","",1,"pane-section"],["class","paneContents",3,"hidden",4,"ngIf"],[1,"paneContents",3,"hidden"],[1,"canvasItemsListSection"],["tabindex","-1",3,"groups","visualContainers"]],template:function(n,i){1&n&&(t.\u0275\u0275template(0,qt,3,6,"pbi-pane",0),t.\u0275\u0275pipe(1,"async")),2&n&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,i.viewModel$))},dependencies:[x.NgIf,Zt.r,Qt.q,Wt.VO,Jt.i,fe,x.AsyncPipe],styles:["[_nghost-%COMP%]   .paneContents[_ngcontent-%COMP%]{display:flex;flex:1 0 0;position:static;top:0;width:100%}[_nghost-%COMP%]   .canvasItemsListSection[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1 0 0;height:100%}[_nghost-%COMP%]   .selection-pane[_ngcontent-%COMP%]   .pane-section[_ngcontent-%COMP%]{display:flex;flex-grow:1}"]}),o}(),en=function(){function o(e){this.services=e}return o.prototype.onPaneCollapsed=function(){this.services.panesVisibility.setPaneExpansion("canvasItems",!1),this.services.telemetryService.logEvent(Tt.vLR,{paneType:"CanvasItems",expanded:!1,viewMode:(0,Nt.ku)(this.services.viewModeState.getMode())})},o.prototype.togglePane=function(){var e=this.services.panesVisibility.togglePaneExpansion("canvasItems");this.services.telemetryService.logEvent(Tt.vLR,{paneType:"CanvasItems",expanded:e,viewMode:(0,Nt.ku)(this.services.viewModeState.getMode())})},o}(),tn=p(40702),wt=function(){function o(e,n,i,r){this.explorationNavigationService=e,this.lazyScoped=n,this.selectionService=i,this.visualContainerGroupAuthoringService=r,this.dragDropChange$=new U.xQ,this.tabOrderPromise=this.lazyScoped.get("tabOrderService")}return o.prototype.dragStart=function(e){var n=e.sourceEvent,i=e.flatNode;this.dragSourceNode=i.node,n.dataTransfer.setData(w.L$,JSON.stringify({id:i.node.id,label:i.node.displayName})),m.UP.isCanvasItemSelected(i.node.data.canvasItem.contract,this.selectionService)||m.UP.selectCanvasItem(i.node.data.canvasItem.contract,this.selectionService),this.flattenedVisibleNodes=E.getFlattenedVisibleNodes(this.tree.nodes),this.startIndex=this.flattenedVisibleNodes.findIndex(function(s){return s.data.canvasItem.name===i.node.data.canvasItem.name})},o.prototype.drop=function(e){var n=e.sourceEvent,i=e.flatNode;if(this.dragSourceNode&&(i.node.dragBorderTop=!1,i.node.dragBorderBottom=!1,n.dataTransfer.getData(w.L$)&&!(this.dragSourceNode.data.canvasItem.name===i.node.data.canvasItem.name||(0,f.q4)(this.dragSourceNode.data.canvasItem)&&(0,A.sE)(i.node.data.canvasItem.name,this.dragSourceNode.data.canvasItem.children)))){var r=this.flattenedVisibleNodes.findIndex(function(a){return a.data.canvasItem.name===i.node.data.canvasItem.name});r>this.startIndex&&i.node.grayedOut||r<this.startIndex&&r-1>=0&&this.flattenedVisibleNodes[r-1].grayedOut||(n.preventDefault(),this.dropHelper(i,r))}},o.prototype.dropHelper=function(e,n){return(0,c.__awaiter)(this,void 0,void 0,function(){var i,r,a,s,d,u,g;return(0,c.__generator)(this,function(h){switch(h.label){case 0:return[4,this.tabOrderPromise];case 1:return i=h.sent(),a=this.dragSourceNode.data.canvasItem.contract,s=(r=e.node.data.canvasItem).contract.parentGroup?r.contract.parentGroup.children:this.tree.nodes.map(function(C){return C.data.canvasItem.contract}),d=(0,ee.cV)(s,!0),u=!1,n<this.startIndex?e.node.grayedOut&&n-1>0&&!this.flattenedVisibleNodes[n-1].grayedOut&&(0,f.q4)(this.flattenedVisibleNodes[n-1].data.canvasItem)&&e.node.data.canvasItem.parentGroup===this.flattenedVisibleNodes[n-1].data.canvasItem?(d=(0,ee.cV)(s,!1),i.moveAfter(d,r,[a],!1),i.changeSection([],[a],!0,!0,!1)):e.node.grayedOut&&n-1>0&&!this.flattenedVisibleNodes[n-1].grayedOut||E.isDroppedAtEndOfList(n,this.flattenedVisibleNodes)?(d=(0,ee.cV)((r=this.flattenedVisibleNodes[n-1].data.canvasItem).contract.parentGroup.children,!0),i.moveBefore(d,r,[a],!0),u=E.isDroppedAtEndOfList(n,this.flattenedVisibleNodes)):i.moveAfter(d,r,[a],!0):(0,f.q4)(e.node.data.canvasItem)&&e.node.expanded?(d=(0,ee.cV)((r=this.flattenedVisibleNodes[n+1].data.canvasItem).contract.parentGroup.children,!0),i.moveAfter(d,r,[a],!0)):(s.findIndex(function(C){return C.name===r.name})===s.length-1&&(u=!0),i.moveBefore(d,r,[a],!0)),r.contract.parentGroup===a.parentGroup||(g=this.explorationNavigationService.getCurrentExploreCanvas(),this.visualContainerGroupAuthoringService.moveCanvasItemInTree(g,a,r.contract,u)),this.dragDropChange$.next(!0),[2]}})})},o.prototype.dragOver=function(e){this.dragSourceNode&&e.sourceEvent.preventDefault()},o.prototype.dragEnter=function(e){this.dragSourceNode&&this.dragEnterHelper(e.flatNode)},o.prototype.dragEnterHelper=function(e){if(!(this.dragSourceNode.data.canvasItem.name===e.node.data.canvasItem.name||(0,f.q4)(this.dragSourceNode.data.canvasItem)&&(0,A.sE)(e.node.data.canvasItem.name,this.dragSourceNode.data.canvasItem.children))){var n=this.flattenedVisibleNodes.findIndex(function(i){return i.data.canvasItem.name===e.node.data.canvasItem.name});if(n<this.startIndex){if(n-1>=0&&this.flattenedVisibleNodes[n-1].grayedOut)return;e.node.dragBorderTop=!0}else{if(e.node.grayedOut)return;e.node.dragBorderBottom=!0}}},o.prototype.dragLeave=function(e){var n=e.flatNode;n.node.dragBorderTop=!1,n.node.dragBorderBottom=!1},o.prototype.dragEnd=function(e){var n=e.flatNode;this.dragSourceNode&&(this.dragSourceNode=void 0,n.node.dragBorderTop=!1,n.node.dragBorderBottom=!1,this.startIndex=void 0)},o.prototype.getDragDropChange$=function(){return this.dragDropChange$.asObservable()},o.prototype.setTree=function(e){this.tree=e},o.\u0275fac=function(n){return new(n||o)(t.\u0275\u0275inject(ue.I),t.\u0275\u0275inject(X.H),t.\u0275\u0275inject(O.z),t.\u0275\u0275inject(be.p))},o.\u0275prov=t.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac}),o}(),Lt=function(){function o(e){this.visualAuthoring=e}return o.prototype.beginEdit=function(e){e.sourceEvent&&e.sourceEvent.stopPropagation(),e.flatNode.node.grayedOut||(e.flatNode.node.displayName=e.flatNode.node.displayName.substr(e.flatNode.node.data.index.length+1)),this.previousLabel=e.flatNode.node.displayName,e.flatNode.node.editing=!0},o.prototype.edit=function(e){e.flatNode.node.displayName=e.value},o.prototype.endEdit=function(e){if(e.sourceEvent.stopPropagation(),e.flatNode.node.editing=!1,0!==e.flatNode.node.displayName.length&&this.previousLabel!==e.flatNode.node.displayName){var n=e.flatNode.node.displayName;e.flatNode.node.displayName=e.flatNode.node.grayedOut?"".concat(n):"".concat(e.flatNode.node.data.index," ").concat(n),e.flatNode.node.ariaLabel=n,(0,f.Vz)(e.flatNode.node.data.canvasItem)?this.visualAuthoring.persistVCProperties(E.createNewNameChangeObject(n),e.flatNode.node.data.canvasItem.contract):this.visualAuthoring.setVisualContainerGroupDisplayName(n,[e.flatNode.node.data.canvasItem.contract]),e.tree.renderNodeChanges()}else e.flatNode.node.displayName=e.flatNode.node.grayedOut?"".concat(this.previousLabel):"".concat(e.flatNode.node.data.index," ").concat(this.previousLabel)},o.\u0275fac=function(n){return new(n||o)(t.\u0275\u0275inject(Z.$8))},o.\u0275prov=t.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac}),o}(),nn=p(84281),Vt=function(){function o(e,n,i){this.lazyScoped=e,this.selectionService=n,this.undoRedoService=i,this.inlineItemChange$=new U.xQ,this.tabOrderPromise=this.lazyScoped.get("tabOrderService")}return o.prototype.click=function(e){return(0,c.__awaiter)(this,void 0,void 0,function(){var n;return(0,c.__generator)(this,function(i){switch(i.label){case 0:return n=e.flatNode,e.item.id!==P.Zw?[3,5]:!n.node.parent||n.node.parent&&!this.isItemHidden(n.node.parent.data.canvasItem)?this.isItemHidden(n.node.data.canvasItem)?[4,this.setTabStateAwaitService([n.node],!0)]:[3,2]:[3,4];case 1:return i.sent(),[3,4];case 2:return[4,this.setTabStateAwaitService([n.node],!1)];case 3:i.sent(),i.label=4;case 4:this.selectionService.clearSelection(),m.UP.selectCanvasItem(n.node.data.canvasItem.contract,this.selectionService),this.inlineItemChange$.next(!0),i.label=5;case 5:return[2]}})})},o.prototype.setTree=function(e){this.tree=e},o.prototype.isItemHidden=function(e){var n,i;return!(void 0===(null===(n=e.position)||void 0===n?void 0:n.tabOrder)||(null===(i=e.position)||void 0===i?void 0:i.tabOrder)>=0)},o.prototype.getInlineItemChange$=function(){return this.inlineItemChange$.asObservable()},o.prototype.setTabStateAwaitService=function(e,n){return(0,c.__awaiter)(this,void 0,void 0,function(){var i,r=this;return(0,c.__generator)(this,function(a){switch(a.label){case 0:return[4,this.tabOrderPromise];case 1:return i=a.sent(),this.undoRedoService.register("Update Visual Containers for tabOrder - skipping items",function(){r.setTabState(e.map(function(s){return s.data.canvasItem.contract}),n,i)}),[2]}})})},o.prototype.setTabState=function(e,n,i){if(e&&0!==e.length){var a=(e[0].parentGroup?e[0].parentGroup.children:this.tree.nodes.map(function(l){return l.data.canvasItem.contract})).filter(function(l){var g=(0,ee.bt)(l,0).tabOrder;return n?g>=0||void 0===g:g&&g<0});i.changeSection(a,e,n,!0,!0);for(var s=0,d=e;s<d.length;s++){var u=d[s];(0,F.q4)(u)&&this.setTabState(u.children,n,i)}}},o.\u0275fac=function(n){return new(n||o)(t.\u0275\u0275inject(X.H),t.\u0275\u0275inject(O.z),t.\u0275\u0275inject(nn.z))},o.\u0275prov=t.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac}),o}(),Bt=p(63057),on=p(3307),kt=p(44581);function rn(o,e){if(1&o){var n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",10)(1,"button",11),t.\u0275\u0275listener("accessible-click",function(){t.\u0275\u0275restoreView(n);var a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.expandAllTree())}),t.\u0275\u0275pipe(2,"localize"),t.\u0275\u0275element(3,"i",12),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"button",13),t.\u0275\u0275listener("accessible-click",function(){t.\u0275\u0275restoreView(n);var a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.collapseAllTree())}),t.\u0275\u0275pipe(5,"localize"),t.\u0275\u0275element(6,"i",14),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"button",15),t.\u0275\u0275listener("accessible-click",function(){t.\u0275\u0275restoreView(n);var a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.orderTabsByPosition())}),t.\u0275\u0275pipe(8,"localize"),t.\u0275\u0275element(9,"i",16),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(10,"div",17),t.\u0275\u0275elementEnd()}if(2&o){var i=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("pbiTooltip",t.\u0275\u0275pipeBind1(2,4,"FieldListMenuItem_ExpandAll")),t.\u0275\u0275advance(3),t.\u0275\u0275property("pbiTooltip",t.\u0275\u0275pipeBind1(5,6,"FieldListMenuItem_CollapseAll")),t.\u0275\u0275advance(3),t.\u0275\u0275property("disabled",!i.isEditable())("pbiTooltip",t.\u0275\u0275pipeBind1(8,8,"Tab_Order_Reorder_Items_Hint"))}}function an(o,e){1&o&&(t.\u0275\u0275elementStart(0,"div",18),t.\u0275\u0275element(1,"div",19),t.\u0275\u0275elementEnd())}function sn(o,e){if(1&o&&t.\u0275\u0275element(0,"pbi-tree",21),2&o){var n=e.ngIf,i=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("tree",n)("options",i.treeOptions)}}function cn(o,e){if(1&o&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,sn,1,2,"pbi-tree",20),t.\u0275\u0275pipe(2,"async"),t.\u0275\u0275elementContainerEnd()),2&o){var n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(2,1,n.tabTree$))}}function ln(o,e){if(1&o&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"selection-pane-list-legacy-tree",22),t.\u0275\u0275elementContainerEnd()),2&o){var n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("groups",n.groups)("visualContainers",n.visualContainers)("activeSection",n.activeSection)("activePositionListOrder",n.activePositionListOrder)}}var dn={type:w.Q_.Button,id:P.Zw,icon:{type:0,glyph:P.qV},label:"",displayOnHover:!0},un={type:w.Q_.Button,id:P.Zw,icon:{type:0,glyph:P.cD},label:"",displayOnHover:!1},Dt=function(){function o(e,n,i,r,a,s,d,u,l,g,h,C,T,B,j,K,te,ne,N){this.conceptualSchemaProxy=e,this.clickStrategy=n,this.dataSources=i,this.displayNameService=r,this.dragDropStrategy=a,this.editLabelStrategy=s,this.eventBridge=d,this.hoverStrategy=u,this.featureSwitchService=l,this.formFactor=g,this.lazyScoped=h,this.localizationService=C,this.screenReaderService=T,this.selection=B,this.selectionPaneListOrderService=j,this.tabInlineItemStrategy=K,this.telemetryService=te,this.viewModeState=ne,this.visualPlugin=N,this.SectionType=z,this.OrderStrategy=M,this.activeSection=z.tabOrderSection,this.activePositionListOrder="tabOrder",this.tabTree$=new he.X({nodes:[]}),this.treeOptions={click:this.clickStrategy,dragDrop:this.dragDropStrategy,editLabel:this.editLabelStrategy,hover:this.hoverStrategy,inlineItem:this.tabInlineItemStrategy},this.tabNodeSet={},this.initialLoad$=new re.t(1),this.tabOrderPromise=this.lazyScoped.get("tabOrderService"),this.scrollbarsConfig={ignoreOverlay:!1,ignoreMobile:!1}}return o.prototype.setOrderStrategy=function(){this.activeOrderStrategy=!this.isPhoneLayout()&&this.accessibilityTopLevelNavFS?M.grouping:M.flatten},o.prototype.isPhoneLayout=function(){return 1===this.formFactor.getCurrentLayout()},o.prototype.refreshTree=function(e){var n;return(0,c.__awaiter)(this,void 0,void 0,function(){var i,r,a,s,d=this;return(0,c.__generator)(this,function(u){switch(u.label){case 0:return i=this.dataSources.get(),[4,this.conceptualSchemaProxy.get(i)];case 1:return r=u.sent(),a=this.selectionPaneListOrderService.sortItemsByProperty(e,function(l){return l.position.tabOrder}),s={nodes:_.map(a.sortedItems,function(l,g){return d.refreshTreeNode(l,r,"".concat(g+1))})},this.tabInlineItemStrategy.setTree(s),this.clickStrategy.setTree(s),this.dragDropStrategy.setTree(s),null===(n=this.tabTree)||void 0===n||n.renderNodeChangesImmediate(),this.tabTree$.next(s),[2,s]}})})},o.prototype.refreshTreeNode=function(e,n,i,r,a){var s=this;void 0===a&&(a=!0);var d=this.getCanvasItemDisplayName(e,n),u=e.position.tabOrder<0,l=this.tabNodeSet[e.name]=this.tabNodeSet[e.name]||{displayName:void 0};return l.displayName=u?d:"".concat(i," ").concat(d),l.ariaLabel=d,l.data={index:i,canvasItem:e},l.id=e.name,l.selected=this.isSelected[e.name],l.editable=this.isEditable(),this.setNodeInlineItems(l,u,d),l.alwaysShowInlineItems=u,l.grayedOut=u,l.parent=r,l.children=[],(0,f.q4)(e)&&a&&_.forEach(e.children,function(g,h){l.children.push(s.refreshTreeNode(g,n,"".concat(i,".").concat(h+1),l))}),l},o.prototype.refreshTreeNodesByName=function(e){var n;return(0,c.__awaiter)(this,void 0,void 0,function(){var i,r,a,s,d,u;return(0,c.__generator)(this,function(l){switch(l.label){case 0:return i=this.dataSources.get(),[4,this.conceptualSchemaProxy.get(i)];case 1:for(r=l.sent(),a=0,s=e;a<s.length;a++)u=this.tabNodeSet[d=s[a]]=this.tabNodeSet[d]||{displayName:void 0},this.refreshTreeNode(u.data.canvasItem,r,u.data.index,u.parent,!1);return null===(n=this.tabTree)||void 0===n||n.renderNodeChanges(),[2]}})})},o.prototype.getCanvasItemDisplayName=function(e,n){var i;if((0,f.Vz)(e)){var r=(0,b.PQ)(e.contract),a=this.visualPlugin.capabilities((0,Ie.s)(e.contract));return null===(i=this.displayNameService.getVisualTitle(r,n,a,void 0,void 0,!0))||void 0===i?void 0:i.text}return e.contract.displayName},o.prototype.setNodeInlineItems=function(e,n,i){_.isEmpty(e.inlineItems)&&(e.inlineItems=[{type:void 0,id:void 0,icon:void 0,label:void 0}]);var r=e.inlineItems[0];n?(Object.assign(r,un),(0,w.cW)(r)||(r.label=this.localizationService.format("ExplorationCanvasItemsPane_Hidden",i)),e.draggable=!1):(Object.assign(r,dn),(0,w.cW)(r)||(r.label=this.localizationService.format("ExplorationCanvasItemsPane_Shown_Hide",i)),e.draggable=!0)},o.prototype.ngOnInit=function(){var e=this;this.featureSwitchSubscription=this.featureSwitchService.featureSwitches$.pipe((0,me.n)(function(n){return!n}),(0,De.q)(1)).subscribe(function(n){return(0,c.__awaiter)(e,void 0,void 0,function(){var i=this;return(0,c.__generator)(this,function(r){return this.accessibilityTopLevelNavFS=n.accessibilityTopLevelNav,this.setOrderStrategy(),this.initialLoad$.next(!0),this.accessibilityTopLevelNavFS&&(this.shouldShowTabOrderTree()&&this.refreshTree(this.groups),this.treeRebuildSubscription=(0,Bt.T)(this.viewModeState.getMode$(),this.tabInlineItemStrategy.getInlineItemChange$()).subscribe(function(){return i.refreshTree(i.groups)})),[2]})})}),this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager(),this.subscriptionManager.subscribe(y.tRg,function(){e.setNodesSelectedState(e.tabNodeSet,e.isSelected,!1),e.updateSelection(),e.setNodesSelectedState(e.tabNodeSet,e.isSelected,!0)}).subscribe(y.KD7,function(){e.updateSelection(),e.refreshTreeNodesByName(Object.keys(e.isSelected))}).subscribe(y.jCS,function(){e.refreshTree(e.groups)}).subscribe(y.ICs,function(){e.updateTabOrderTree()}).subscribe(y.D1A,function(n,i){e.refreshTreeNodesByName([i.name])}).subscribe(y.aco,function(){e.setOrderStrategy()}),this.treeRebuildSubscription=(0,Bt.T)(this.viewModeState.getMode$(),this.tabInlineItemStrategy.getInlineItemChange$()).subscribe(function(){return e.refreshTree(e.groups)})},o.prototype.updateTabOrderTree=function(){this.ensureNormalization(),this.refreshTree(this.groups)},o.prototype.ngOnDestroy=function(){this.featureSwitchSubscription.unsubscribe(),this.subscriptionManager.unsubscribeAll(),this.treeRebuildSubscription.unsubscribe()},o.prototype.ngOnChanges=function(e){e.groups&&e.groups.currentValue&&(this.listContracts=_.map(this.groups,function(n){return n.contract}),this.ensureNormalization(),this.updateSelection(),this.refreshTree(e.groups.currentValue),this.selectionPaneListOrderService.markTabSorted(!1))},o.prototype.ensureNormalization=function(){return(0,c.__awaiter)(this,void 0,void 0,function(){var e;return(0,c.__generator)(this,function(n){switch(n.label){case 0:return[4,this.tabOrderPromise];case 1:return e=n.sent(),this.ensureNormalizedTabOrder(e),[2]}})})},o.prototype.updateSelection=function(){_.isEmpty(this.groups)&&(this.isSelected={});var e=this.getSelectedItems();_.isEmpty(e)&&(this.isSelected={}),this.isSelected=_.zipObject(_.map(e,function(n){return n.name}),_.map(e,_.constant(!0)))},o.prototype.ensureNormalizedTabOrder=function(e){e.shouldNormalize(this.listContracts,!0)&&(e.normalizeHierarchy(this.listContracts),this.selectionPaneListOrderService.markTabSorted(!1))},o.prototype.orderTabsByPosition=function(){return(0,c.__awaiter)(this,void 0,void 0,function(){return(0,c.__generator)(this,function(n){switch(n.label){case 0:return this.telemetryService.logEvent(tn.Y$),[4,this.tabOrderPromise];case 1:return n.sent().orderByPosition(this.listContracts),this.selectionPaneListOrderService.markTabSorted(!1),this.refreshTree(this.groups),[2]}})})},o.prototype.expandAllTree=function(){this.tabTree&&(this.tabTree.expandAll(),this.tabTree.renderNodeChanges())},o.prototype.collapseAllTree=function(){this.tabTree&&(this.tabTree.collapseAll(),this.tabTree.renderNodeChanges())},o.prototype.setNodesSelectedState=function(e,n,i){for(var r in n)e[r]&&(e[r].selected=i);this.tabTree&&this.tabTree.renderNodeChanges()},o.prototype.shouldShowTabOrderTree=function(){return this.activeOrderStrategy===M.grouping},o.prototype.bringForward=function(){return(0,c.__awaiter)(this,void 0,void 0,function(){return(0,c.__generator)(this,function(n){switch(n.label){case 0:switch(this.activeOrderStrategy){case M.grouping:return[3,1];case M.flatten:return[3,3]}return[3,4];case 1:return this.notifyTabOrderChanges(0),[4,this.sendTabChangeGroupingOrder(0)];case 2:return n.sent(),[3,5];case 3:return this.sendDirectionFlattenOrder(!0),this.selectionPaneListOrderService.notifyUserLayerDataChanged(!0),[3,5];case 4:return L.fF.assertNever(this.activeOrderStrategy),[3,5];case 5:return[2]}})})},o.prototype.sendBackward=function(){return(0,c.__awaiter)(this,void 0,void 0,function(){return(0,c.__generator)(this,function(n){switch(n.label){case 0:switch(this.activeOrderStrategy){case M.grouping:return[3,1];case M.flatten:return[3,3]}return[3,4];case 1:return this.notifyTabOrderChanges(1),[4,this.sendTabChangeGroupingOrder(1)];case 2:return n.sent(),[3,5];case 3:return this.sendDirectionFlattenOrder(!1),this.selectionPaneListOrderService.notifyUserLayerDataChanged(!1),[3,5];case 4:return L.fF.assertNever(this.activeOrderStrategy),[3,5];case 5:return[2]}})})},o.prototype.sendDirectionFlattenOrder=function(e){return(0,c.__awaiter)(this,void 0,void 0,function(){var n,i;return(0,c.__generator)(this,function(r){switch(r.label){case 0:return[4,this.tabOrderPromise];case 1:return n=r.sent(),this.ensureNormalization(),i=this.filterVisualContainersByTabOrderSign(!0),e?n.bringForward(i,m.UP.getSelectedVisualContainers(this.selection),!0):n.sendBackward(i,m.UP.getSelectedVisualContainers(this.selection),!0),this.selectionPaneListOrderService.markTabSorted(!1),[2]}})})},o.prototype.filterVisualContainersByTabOrderSign=function(e){return this.visualContainers?(0,ee.cV)(this.visualContainers.map(function(n){return n.contract}),e):[]},o.prototype.sendTabChangeGroupingOrder=function(e){return(0,c.__awaiter)(this,void 0,void 0,function(){var n;return(0,c.__generator)(this,function(i){switch(i.label){case 0:return[4,this.tabOrderPromise];case 1:return n=i.sent(),this.ensureNormalizedTabOrder(n),n.sendTabOrderCommandsByLevel(this.selection,this.listContracts,e),[2]}})})},o.prototype.notifyTabOrderChanges=function(e){var n=this.eventBridge.createChannelSubscriptionManager(),i=m.UP.getSelectedVisualContainers(this.selection),r=[];i.length>0&&r.push(this.handleTabOrderChangesForContainer(n,y.jCS,i,e));var a=m.UP.getSelectedVisualContainerGroups(this.selection);a.length>0&&r.push(this.handleTabOrderChangesForContainer(n,y.ICs,a,e)),Promise.all(r).then(function(){return n.unsubscribeAll()})},o.prototype.handleTabOrderChangesForContainer=function(e,n,i,r){var a=this;return new Promise(function(s){e.subscribe(n,function(d,u){return(0,c.__awaiter)(a,void 0,void 0,function(){var l,g=this;return(0,c.__generator)(this,function(h){return l=this.tabTree$.pipe((0,on.T)(1)).subscribe(function(C){i.forEach(function(T){if(u.affectContainer(T)){var B=g.findNode(T.name),j=g.localizationService.format(1===r?"ExplorationCanvasItemsPane_SentBackward":"ExplorationCanvasItemsPane_SentForward",B.displayName);B&&g.screenReaderService.alertPolite(j)}}),l.unsubscribe(),s()}),[2]})})})})},o.prototype.findNode=function(e){return this.tabNodeSet[e]},o.prototype.isContentPresent=function(){return this.isNoGroupsList()},o.prototype.isNoGroupsList=function(){return!this.groups||0===this.groups.length},o.prototype.isEditable=function(){return 1===this.viewModeState.getMode()},o.prototype.getSelectedItems=function(){return m.UP.getSelectedCanvasItems(this.selection)},o.\u0275fac=function(n){return new(n||o)(t.\u0275\u0275directiveInject(ge.i),t.\u0275\u0275directiveInject(S),t.\u0275\u0275directiveInject(W.D),t.\u0275\u0275directiveInject(ie.O),t.\u0275\u0275directiveInject(wt),t.\u0275\u0275directiveInject(Lt),t.\u0275\u0275directiveInject(k.J),t.\u0275\u0275directiveInject(H),t.\u0275\u0275directiveInject(J.vZ),t.\u0275\u0275directiveInject(se.F),t.\u0275\u0275directiveInject(X.H),t.\u0275\u0275directiveInject(Y.o),t.\u0275\u0275directiveInject(oe.g),t.\u0275\u0275directiveInject(O.z),t.\u0275\u0275directiveInject(_e),t.\u0275\u0275directiveInject(Vt),t.\u0275\u0275directiveInject(Et.y0),t.\u0275\u0275directiveInject(Ce.kc),t.\u0275\u0275directiveInject(q.D))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["tab-order-section"]],viewQuery:function(n,i){var r;(1&n&&t.\u0275\u0275viewQuery(ae.u,5),2&n)&&(t.\u0275\u0275queryRefresh(r=t.\u0275\u0275loadQuery())&&(i.tabTree=r.first))},inputs:{groups:"groups",visualContainers:"visualContainers"},features:[t.\u0275\u0275ProvidersFeature([S,wt,Lt,H,Vt]),t.\u0275\u0275NgOnChangesFeature],decls:16,vars:17,consts:[[1,"selection-pane-list-actions"],[1,"selection-pane-list-actions-move"],["id","bringForward",3,"disabled","pbiTooltip","click"],[1,"glyphicon","pbi-glyph-flickup","glyph-small"],["id","sendBackward",3,"disabled","pbiTooltip","click"],["class","selection-pane-list-tab-actions",4,"ngIf"],["class","no-content-container","tabindex","0",4,"ngIf"],[1,"scroll-container-flex-grow"],[1,"selection-pane-list",3,"pbiScrollbar"],[4,"ngIf"],[1,"selection-pane-list-tab-actions"],["id","expandAll",3,"pbiTooltip","accessible-click"],[1,"glyphicon","pbi-glyph-expand-all","glyph-small"],["id","collapseAll",3,"pbiTooltip","accessible-click"],[1,"glyphicon","pbi-glyph-collapse-all","glyph-small"],["id","orderTabsByPosition","aria-describedby","orderTabsByPositionDescription",3,"disabled","pbiTooltip","accessible-click"],[1,"glyphicon","pbi-glyph-horizontal-tab-key","glyph-small"],["id","orderTabsByPositionDescription","localize","Tab_Order_Reorder_Items_Hint",1,"aria-hint"],["tabindex","0",1,"no-content-container"],["localize","ExplorationCanvasItemsPane_NoCanvasItems"],["disableIcons","true","focus-nav-mode","Browser",3,"tree","options",4,"ngIf"],["disableIcons","true","focus-nav-mode","Browser",3,"tree","options"],[3,"groups","visualContainers","activeSection","activePositionListOrder"]],template:function(n,i){1&n&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"button",2),t.\u0275\u0275listener("click",function(){return i.bringForward()}),t.\u0275\u0275pipe(3,"localize"),t.\u0275\u0275element(4,"i",3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"button",4),t.\u0275\u0275listener("click",function(){return i.sendBackward()}),t.\u0275\u0275pipe(6,"localize"),t.\u0275\u0275element(7,"i",3),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(8,rn,11,10,"div",5),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(9,an,2,0,"div",6),t.\u0275\u0275elementStart(10,"div",7)(11,"div",8),t.\u0275\u0275template(12,cn,3,3,"ng-container",9),t.\u0275\u0275pipe(13,"async"),t.\u0275\u0275template(14,ln,2,4,"ng-container",9),t.\u0275\u0275pipe(15,"async"),t.\u0275\u0275elementEnd()()),2&n&&(t.\u0275\u0275advance(2),t.\u0275\u0275property("disabled",!i.isEditable())("pbiTooltip",t.\u0275\u0275pipeBind1(3,9,"FieldListMenuItem_MoveUp")),t.\u0275\u0275advance(3),t.\u0275\u0275property("disabled",!i.isEditable())("pbiTooltip",t.\u0275\u0275pipeBind1(6,11,"FieldListMenuItem_MoveDown")),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",i.shouldShowTabOrderTree()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",i.isContentPresent()),t.\u0275\u0275advance(2),t.\u0275\u0275property("pbiScrollbar",i.scrollbarsConfig),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",i.shouldShowTabOrderTree()&&t.\u0275\u0275pipeBind1(13,13,i.initialLoad$)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!i.shouldShowTabOrderTree()&&t.\u0275\u0275pipeBind1(15,15,i.initialLoad$)))},dependencies:[x.NgIf,Ae.X,kt.t,Me.r,Fe.V,ae.u,dt,x.AsyncPipe,ut.F],styles:['.selection-pane-list-actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;padding:0 10px;height:32px;border-bottom:1px solid var(--neutral-primary-color);flex:none;border-color:var(--gray-40)}.selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{flex-grow:1;display:flex;align-items:center}.selection-pane-list-actions[_ngcontent-%COMP%] > div.selection-pane-list-actions-move[_ngcontent-%COMP%]{justify-content:flex-start;font-size:11px;margin-right:6px}.selection-pane-list-actions[_ngcontent-%COMP%] > div.selection-pane-list-actions-move[_ngcontent-%COMP%]   #bringForward[_ngcontent-%COMP%]{margin-right:6px}.selection-pane-list-actions[_ngcontent-%COMP%] > div.selection-pane-list-actions-move[_ngcontent-%COMP%]   #sendBackward[_ngcontent-%COMP%]{margin-left:6px}.selection-pane-list-actions[_ngcontent-%COMP%] > div.selection-pane-list-tab-actions[_ngcontent-%COMP%]{font-size:12px;justify-content:flex-end;margin-left:6px}.selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent;border-color:inherit;color:inherit;font-size:12px}.selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%], .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:hover, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:hover, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:focus, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:focus, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:active, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:active, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active:hover, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:active:hover, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:active:hover, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus:hover, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:focus:hover, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:focus:hover{background-color:transparent;border-color:inherit}.selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active:hover, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus:hover{color:inherit}.selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%], .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:hover, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:hover, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:focus, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:focus, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:active, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:active, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:active:hover, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:active:hover, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:focus:hover, .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:focus:hover{color:var(--gray-80)}html[data-focus-source="key"][_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus, html[data-focus-source="key"]   [_nghost-%COMP%]   .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color)}.selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .glyph-small[_ngcontent-%COMP%]{font-size:14px}.selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button#sendBackward[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding:10px 0 0;margin:0}.selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button#bringForward[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding:5px 0 0;margin:0;transform:scaleY(-1);-webkit-transform:scale(1,-1)}.selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button#orderTabsByPosition[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding:5px 0 0}.selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button#expandAll[_ngcontent-%COMP%], .selection-pane-list-actions[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button#collapseAll[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding:2px 12px 0 0;margin:0}.no-content-container[_ngcontent-%COMP%]{--empty-container-text-color: var(--gray-180);display:flex;flex:1 0 auto;justify-content:center;align-items:start;color:var(--empty-container-text-color);padding-top:6px}  [data-legacy-theming=false] .no-content-container{--empty-container-text-color: var(--colorNeutralForeground1)}.scroll-container-flex-grow[_ngcontent-%COMP%]{flex:1 0 0px;overflow:hidden}.aria-hint[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]{display:flex;flex-direction:column;flex:1 0 auto;text-align:left}[_nghost-%COMP%]:focus{outline:none}']}),o}(),pn=p(67659),gn=p(32208),vn=p(82156),hn=p(79061),fn=p(13316),mn=p(16987),Cn=p(13254),bn=p(72359),yn=p(16095),Sn=p(35284),Pn=p(64824),_n=p(79154),On=function(){function o(){this.onActiveSection=new t.EventEmitter}return o.prototype.onKeyDown=function(e){var n=this.sectionTabKeyHandler.sectionLength;switch(e.keyCode){case $.ui.keyCode.LEFT:case $.ui.keyCode.UP:var i=(this.sectionTabKeyHandler.currentSection-1+n)%n;this.focusOnSection(i,e);break;case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:this.focusOnSection(i=(this.sectionTabKeyHandler.currentSection+1)%n,e)}},o.prototype.focusOnSection=function(e,n){var i=(0,_n.CH)("sectionTab");this.onActiveSection.emit({nextSection:e}),$(n.target).parent("ul").find(i.selector).eq(e).focus(),n.stopPropagation()},o.\u0275fac=function(n){return new(n||o)},o.\u0275dir=t.\u0275\u0275defineDirective({type:o,selectors:[["","section-tab-key-handler",""]],hostBindings:function(n,i){1&n&&t.\u0275\u0275listener("keydown",function(a){return i.onKeyDown(a)})},inputs:{sectionTabKeyHandler:["section-tab-key-handler","sectionTabKeyHandler"]},outputs:{onActiveSection:"onActiveSection"}}),o}(),In=[{componentId:"SelectionPaneComponentId",type:pt}],Mn=function(){function o(){}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=t.\u0275\u0275defineInjector({imports:[x.CommonModule,Ue._t,mn.w,gn.J,vn.N.withManifests(In),hn.v,Q.dp,pn._,fn._,Cn.x,bn.K,yn.Z,Sn.J]}),o}();t.\u0275\u0275setComponentScope(fe,[x.NgClass,x.NgIf,Pn.R,On,Ae.X,kt.t,Fe.V,xt,Dt],[x.AsyncPipe,ut.F])},40702:function(vt,de,p){p.d(de,{$0:function(){return A},Es:function(){return M},G5:function(){return S},Lo:function(){return at},Sd:function(){return oe},TS:function(){return Y},V1:function(){return ie},Y$:function(){return Le},Yu:function(){return rt},_Z:function(){return be},_m:function(){return ct},cF:function(){return t},gW:function(){return lt},jG:function(){return y},lG:function(){return k},rU:function(){return f},yw:function(){return U}});var c=p(41114),m="PBI.ExploreUIAuthoring.ContextMenuButtonClicked",t=c.cx[m]=(0,c.b1)(m),O="PBI.ExploreUIAuthoring.RevertToDefaultClicked",S=c.cx[O]=(0,c.b1)(O),b="PBI.ExploreUIAuthoring.ExpansionButtonClicked",k=c.cx[b]=(0,c.b1)(b),H="PBI.ExploreUIAuthoring.FormattingPaneSearch",f=c.cx[H]=(0,c.b1)(H),E="PBI.ExploreUIAuthoring.InsertSection",A=c.cx[E]=(0,c.b1)(E),w="PBI.ExploreUIAuthoring.DeleteSection",U=c.cx[w]=(0,c.b1)(w),ue="PBI.ExploreUIAuthoring.VisualSession",be=c.cx[ue]=(0,c.b1)(ue,{logExpAssignment:!0}),X="PBI.ExploreUIAuthoring.ReorderTabOrderByPosition",Le=c.cx[X]=(0,c.b1)(X),Z="PBI.ReportCreationCopilot.RunSuggestQueries",G=(c.cx[Z]=(0,c.b1)(Z),"PBI.AuthoringCopilotCreatePage.RunSuggestQueries"),F=(c.cx[G]=(0,c.b1)(G),"PBI.ReportCreationCopilot.PageValidation"),P=(c.cx[F]=(0,c.b1)(F),"PBI.ReportCreationCopilot.VisualValidation"),W=(c.cx[P]=(0,c.b1)(P),"PBI.EX.ChangeFieldWell"),ie=c.cx[W]=(0,c.b1)(W),J="PBI.EX.ChangeAggregation",Y=c.cx[J]=(0,c.b1)(J),ve="PBI.EX.RemoveConditionalFormatting",oe=c.cx[ve]=(0,c.b1)(ve),q="PBI.EX.RemoveDataBars",ye=(c.cx[q]=(0,c.b1)(q),"PBI.EX.AnalyticsPane.Open"),Ve=(c.cx[ye]=(0,c.b1)(ye),"PBI.EX.AnalyticsPane.AddInstance"),rt=c.cx[Ve]=(0,c.b1)(Ve),Pe="PBI.EX.AnalyticsPane.RemoveInstance",he=(c.cx[Pe]=(0,c.b1)(Pe),"PBI.EX.AnalyticsPane.ForecastParameterUpdated"),Be=(c.cx[he]=(0,c.b1)(he),"PBI.EX.PropertyPane.OnValueChanged"),at=c.cx[Be]=(0,c.b1)(Be),Oe="PBI.EX.DrillthroughPane.ChangeLink",z=(c.cx[Oe]=(0,c.b1)(Oe),"PBI.EX.NavigateAndSelectVisual"),M=c.cx[z]=(0,c.b1)(z),fe="PBI.EX.FieldWellAbnormalRename",y=c.cx[fe]=(0,c.b1)(fe),Ie="PBI.EX.LaunchChangeDetectionDialog",ct=c.cx[Ie]=(0,c.b1)(Ie),ae="PBI.EX.PersonalizeVisual.ChangePerspective",lt=c.cx[ae]=(0,c.b1)(ae),I="PBI.ReportCreationCopilot.FeedbackLoop.UserResponse",me=(c.cx[I]=(0,c.b1)(I),"PBI.ReportCreationCopilot.FeedbackLoop"),V=(c.cx[me]=(0,c.b1)(me),"PBI.ReportCreationCopilot.UserResponse"),se=(c.cx[V]=(0,c.b1)(V),"PBI.ReportCreationCopilot.StageCompleted"),x=(c.cx[se]=(0,c.b1)(se),"PBI.ReportCreationCopilot.TerminalAPIError"),Me=(c.cx[x]=(0,c.b1)(x),"PBI.ReportCreationCopilot.TerminalAgentError"),ze=(c.cx[Me]=(0,c.b1)(Me),"PBI.ReportCreationCopilot.EnsureComplete"),Re=(c.cx[ze]=(0,c.b1)(ze),"PBI.CopilotReportAuthoring.Authoring"),$e=(c.cx[Re]=(0,c.b1)(Re),"PBI.CopilotReportAuthoring.CreatePage"),je=(c.cx[$e]=(0,c.b1)($e),"PBI.Copilot.PageCreationTool"),He=(c.cx[je]=(0,c.b1)(je),"PBI.CopilotReportAuthoring.SuggestTopics"),Te=(c.cx[He]=(0,c.b1)(He),"PBI.CopilotReportAuthoring.SummarizeDataset"),Ge=(c.cx[Te]=(0,c.b1)(Te),"PBI.CopilotReportAuthoring.CloseButtonClicked"),Ke=(c.cx[Ge]=(0,c.b1)(Ge),"PBI.CopilotReportAuthoring.ValidateVisual"),Xe=(c.cx[Ke]=(0,c.b1)(Ke),"PBI.CopilotReportAuthoring.ValidateVisualAdHocQuery"),Ze=(c.cx[Xe]=(0,c.b1)(Xe),"PBI.CopilotScenario.Summary.Generated"),Qe=(c.cx[Ze]=(0,c.b1)(Ze),"PBI.CopilotScenario.Answer.Generated"),Ne=(c.cx[Qe]=(0,c.b1)(Qe),"PBI.CopilotScenario.Forecast.Generated"),Je=(c.cx[Ne]=(0,c.b1)(Ne),"PBI.CopilotReportAuthoring.ValidateField"),Ye=(c.cx[Je]=(0,c.b1)(Je),"PBI.ExploreCopilot.CopilotReferenceClicked"),qe=(c.cx[Ye]=(0,c.b1)(Ye),"PBI.ExploreCopilot.CopilotReferenceHovered"),Ee=(c.cx[qe]=(0,c.b1)(qe),"PBI.Copilot.OpenCopilotPaneEditModeFS");c.cx[Ee]=(0,c.b1)(Ee)},64824:function(vt,de,p){p.d(de,{R:function(){return t}});var c=p(50423),t=function(){function O(S){this.elementRef=S}return O.prototype.ngOnChanges=function(S){if(S.sectionNumber&&!S.sectionNumber.isFirstChange()){var b=S.sectionNumber.currentValue;null!=b&&this.animateSectionSlide(b,S.sectionNumber.previousValue)}},O.prototype.animateElement=function(S,b,k){S.css(b).animate(k,200)},O.prototype.animateSectionSlide=function(S,b){this.doNotAnimateSection||(S<b?this.animateElement($(this.elementRef.nativeElement),{right:"200%"},{right:0}):S>b&&this.animateElement($(this.elementRef.nativeElement),{"margin-left":"200%"},{"margin-left":0}));var k=$(".".concat(this.navMarkerParent," .navMarker"));if(this.autoWidth){var H=0===S?"margin-left":"margin-right",f=0===S?"margin-right":"margin-left",E={};E[H]="".concat(k.width(),"px"),E[f]="auto";var A={};A[H]="0",this.animateElement(k,E,A)}else this.animateElement(k,{},{"margin-left":k.width()*S+"px"})},O.\u0275fac=function(b){return new(b||O)(c.\u0275\u0275directiveInject(c.ElementRef))},O.\u0275dir=c.\u0275\u0275defineDirective({type:O,selectors:[["","section-animation-slider",""]],inputs:{sectionNumber:"sectionNumber",navMarkerParent:"navMarkerParent",autoWidth:"autoWidth",doNotAnimateSection:"doNotAnimateSection"},features:[c.\u0275\u0275NgOnChangesFeature]}),O}()}}]);