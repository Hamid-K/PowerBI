"use strict";(self.webpackChunkdesktopDialogHost=self.webpackChunkdesktopDialogHost||[]).push([["extension-host-artifact-recent-runs"],{70331:function(O,R,t){t.r(R),t.d(R,{createExtensionHostArtifactRecentRunsModule:function(){return $}});var x=t(77476),e=t(50423),s=t(60756),p=t(82762),h=t(11547),A=t(42195),I=t(14172),M=t(17653),E=t(11105),g=t(73471),y=t(60397),u=t(17899),H=t(41838),T=t(6814),v=t(20917),j=new e.InjectionToken("GetArtifactManifest"),m=new e.InjectionToken("OpenUI"),U=function(){function n(o,i,z,C,D){var r=this;this.actions$=o,this.messageBroker=i,this.lazyProvider=z,this.getArtifactManifest=C,this.openUI=D,this.onOpenArtifactRecentRunsReceived$=(0,u.Av)(this.actions$,this.messageBroker,g.Vm.openArtifactRecentRuns,function(a){var c=a.artifact;return(0,p.D)(r.lazyProvider.get("@powerbi/TridentPortalArtifactActions",H.E3.recentruns)).subscribe(function(d){d.onAction({artifact:c,scenario:"workspace"})}),(0,h.of)(g.Vm.openArtifactRecentRuns.resolve({value:!0}))}),this.onOpenArtifactRecentRuns$=(0,s.GW)(function(){return r.actions$.pipe((0,u.UF)(v.k),(0,A.zg)(function(){return(0,h.of)(v.i({visible:!0}))}))}),this.openArtifactRecentRunsPanel$=(0,s.GW)(function(){return r.actions$.pipe((0,u.UF)(v.k),(0,A.zg)(function(a){var c=a.artifact;return(0,p.D)(r.getArtifactManifest(c.artifactType)).pipe((0,I.U)(function(d){var l,f=null===(l=d.artifactSettings)||void 0===l?void 0:l.recentRun;if(f&&"extension"in f){var G=[f.path,c.objectId].join("/").replace(/[/]{1,}/g,"/");return{uiId:(0,E.Z)(),uiType:"panel",extensionName:f.extension,path:G}}throw new Error("Failed to find the recent runs action config for artifact: ".concat(c.artifactType))}))}),(0,M.b)(function(a){return r.openUI(a)}))},{dispatch:!1})}return n.\u0275fac=function(i){return new(i||n)(e.\u0275\u0275inject(s.eX),e.\u0275\u0275inject(y.u),e.\u0275\u0275inject(T.rn),e.\u0275\u0275inject(j),e.\u0275\u0275inject(m))},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n}();function $(n,o){return(0,e.createNgModule)(F,e.Injector.create({providers:[{provide:j,useValue:n.getArtifactManifest},{provide:m,useValue:n.openUI}],parent:o}))}var F=function(){function n(){}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[x.CommonModule,s.sQ.forFeature([U])]}),n}()}}]);