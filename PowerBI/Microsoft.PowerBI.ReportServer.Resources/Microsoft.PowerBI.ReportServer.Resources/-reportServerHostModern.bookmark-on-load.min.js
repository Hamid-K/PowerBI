"use strict";(self.webpackChunkreportServerHostModern=self.webpackChunkreportServerHostModern||[]).push([["bookmark-on-load"],{15318:function(Q,f,t){t.r(f),t.d(f,{BookmarkOnLoadModule:function(){return W}});var c=t(81337),M=t(17966),C=t(19276),x=t(26898),D=t(83008),P=t(39445),F=t(49080),j=t(83342),T=t(14463),N=t(60661),b=t(10556),G=t(62458),I=t(98665),z={provide:"bookmarkOnLoad",useFactory:function(e,r,a,v,d,h,l,s,i){var o=new E(e,r,a,v,d,h,l,i);return s.resolve(o)},deps:[M.F,x.i,D.D,P.H,F.J,j.vZ,C.j,T.t,I.y0]},E=function(){function e(r,a,v,d,h,l,s,i){this.bookmarkService=r,this.conceptualSchemaProxy=a,this.dataSources=v,this.explorationStateService=d,this.stateManager=h,this.featureSwitchService=l,this.explorationStateApplierService=s,this.telemetryService=i}return e.prototype.applyBookmarkOnLoad=function(r,a,v,d,h){return(0,c.mG)(this,void 0,void 0,function(){var l,s,i,o,m,g,n,p,O,B,A,S,y;return(0,c.Jh)(this,function(u){switch(u.label){case 0:return l=this.dataSources.get(),s=this.conceptualSchemaProxy.get(l),i=[s],v&&i.push(v),[4,Promise.allSettled(i)];case 1:u.sent(),o=r.bookmark,G.fF.assert(function(){return!!o},"a valid bookmark must be present"),u.label=2;case 2:return u.trys.push([2,4,,5]),n={clearUnmatchedData:!1},o.options&&(n.suppressData=(p=o.options).suppressData,n.suppressActiveSection=p.suppressActiveSection,n.suppressDisplay=p.suppressDisplay,p.applyOnlyToTargetVisuals&&(n.targetVisualNames=p.targetVisualNames)),B=(O=this.explorationStateService).apply,A=[o.explorationState,a],[4,s];case 3:if(m=B.apply(O,A.concat([u.sent(),(0,c.pi)((0,c.pi)({},n),{suppressActiveSection:!!d,applyPresentationChanges:!0,isPersistentState:1!==r.resolution})])),this.explorationStateApplierService.syncFilterState(m),1===r.resolution&&this.bookmarkService.setActiveBookmark(o),!m)return[2];if(g=function(e){if(e.activeSection){var r={visualContainers:e.visualContainers,visualContainerGroups:e.visualContainerGroups};return e.filterScope&&(r.filterScope=e.filterScope),e.pendingHighlights&&(r.pendingHighlights=e.pendingHighlights),e.visibility&&(r.visibility=e.visibility),r}return e}(m),!this.featureSwitchService.featureSwitches.bookmarkInitRefactor){S=this.stateManager.createApplyBookmarkActivity("ApplyBookmarkOnLoad",h);try{this.stateManager.applyImpact(g,a,(0,c.pi)((0,c.pi)({},n),{suppressActiveSection:!0,suppressDisplay:!0}),S),S.resolve()}catch(K){S.reject(K)}}return(0,N.oU)(a),[3,5];case 4:return y=u.sent(),this.telemetryService.logEvent(b.WZm,{bookmarkType:1===r.resolution?-1:o.type,bookmarkObjectId:o.name,errorCode:"ApplyError",pbi_source:y.stack,stack:y.message}),[3,5];case 5:return[2,m]}})})},e}(),J=t(77476),V=t(52910),Z=t(82156),k=t(50423),W=function(){function e(){}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({providers:[z],imports:[J.CommonModule,V.O,Z.N]}),e}()}}]);