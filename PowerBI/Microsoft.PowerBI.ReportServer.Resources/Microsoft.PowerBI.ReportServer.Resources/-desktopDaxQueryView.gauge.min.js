"use strict";(self.webpackChunkdesktopDaxQueryView=self.webpackChunkdesktopDaxQueryView||[]).push([["gauge","animatedNumber"],{58914:function(tt,B,p){p.r(B),p.d(B,{AnimatedNumber:function(){return S}});var P=p(81337),E=p(94478),v=p(62458),S=function(e){function h(r,y){var g=e.call(this,"animatedNumber")||this;return r&&(g.svg=r),y&&(g.animator=y),g}return(0,P.__extends)(h,e),h.prototype.init=function(r){this.options=r,this.svg||(this.svg=d3.select(r.element.get(0)).append("svg")),this.currentViewport=r.viewport,this.hostServices=r.host,this.style=r.style,this.updateViewportDependantProperties()},h.prototype.updateViewportDependantProperties=function(){var r=this.currentViewport;this.svg.attr("width",r.width).attr("height",r.height)},h.prototype.update=function(r){v.fF.assertValue(r,"options"),this.currentViewport=r.viewport;var y=this.dataViews=r.dataViews;if(y&&y[0]){var g=y[0];this.updateViewportDependantProperties(),this.getMetaDataColumn(g),this.updateInternal(g&&g.single?g.single.value:0,r.suppressAnimations,!0,this.formatter)}},h.prototype.setFormatter=function(r){this.formatter=r},h.prototype.onDataChanged=function(r){this.update({dataViews:r.dataViews,suppressAnimations:r.suppressAnimations,viewport:this.currentViewport})},h.prototype.onResizing=function(r){this.update({dataViews:this.dataViews,suppressAnimations:!0,viewport:r})},h.prototype.canResizeTo=function(r){return!0},h.prototype.updateInternal=function(r,y,g,b){void 0===g&&(g=!1);var V=this.value,n=(0,E.Mb)(this.animator,y);this.doValueTransition(V,r,null,this.options.animation,n,g,b),this.value=r},h}(p(68193).V)},68193:function(tt,B,p){p.d(B,{V:function(){return b}});var P=p(14599),E=p(53197),v=p(90120),W=p(38400),S=p(79154),e=p(62458),h=p(32041),r=p(64329),y=p(10389),g=p(72489),b=function(){function V(n){this.defaultTitleColor="#333333",this._animatedTextOptions={},this.mainText=(0,S.CH)("mainText"),this.name=n,this.visualConfiguration={maxFontSize:60}}return V.prototype.getMetaDataColumn=function(n){if(n&&n.metadata&&n.metadata.columns)for(var o=0,C=n.metadata.columns.length;o<C;o++){var D=n.metadata.columns[o];if(D.isMeasure){this.metaDataColumn=D;break}}},V.prototype.getAdjustedFontHeight=function(n,o,C){var D,A,w,O,T={fontFamily:null===(D=this._animatedTextOptions.textProperties)||void 0===D?void 0:D.fontFamily,fontWeight:null===(A=this._animatedTextOptions.textProperties)||void 0===A?void 0:A.fontWeight,fontStyle:null===(w=this._animatedTextOptions.textProperties)||void 0===w?void 0:w.fontStyle,textDecoration:null===(O=this._animatedTextOptions.textProperties)||void 0===O?void 0:O.textDecoration,text:o};return this.getAdjustedFontHeightCore(T,n,C,0)},V.prototype.getAdjustedFontHeightCore=function(n,o,C,D){return D>10?C:(n.fontSize=r.FP.toString(C),h.b.measureSvgTextWidth(n)<o?C:this.getAdjustedFontHeightCore(n,o,.9*C,D+1))},V.prototype.clear=function(){this.svg.select(this.mainText.selector).text("")},V.prototype.doValueTransition=function(n,o,C,D,A,w,O,T){var F,J,N,rt;if(w||n!==o||null==o){n||(n=0),T||(T=this.getDefaultDatumTransform());var G=this.svg,nt=this.currentViewport,H=nt.height,z=nt.width,ut=this.getSeedFontHeight(z,H),ht=this.getTranslateX(z),st=this.getTranslateY(ut),Q=this.metaDataColumn;O||(O=(0,g.Ue)({format:this.getFormatString(this.dataPointObjects,Q),value:o,displayUnitSystemType:C,formatSingleValues:!0,allowFormatBeautification:!0,columnType:Q?Q.type:void 0}));var Z=String(n),Y=String(o);(_.isEmpty(o)||"string"!=typeof o)&&(Y=O.format(o)),(_.isEmpty(n)||"string"!=typeof n)&&(Z=O.format(n)),G.classed(this.name,!0);var dt=[T.getDatum(o,Y)],ot=G.selectAll("text").data(dt),k=ot.enter().append("text").classed(this.mainText.class,!0).merge(ot),lt=this.getAdjustedFontHeight(z,Y,ut);if(st=this.getTranslateY(lt+(H-lt)/2),k.text(Z).attr("text-anchor",this.getTextAnchor()).attr("font-size",lt).attr("transform",(0,y.Iu)(ht,st)).style("font-style",null===(F=this._animatedTextOptions.textProperties)||void 0===F?void 0:F.fontStyle).style("text-decoration",null===(J=this._animatedTextOptions.textProperties)||void 0===J?void 0:J.textDecoration).style("font-weight",null===(N=this._animatedTextOptions.textProperties)||void 0===N?void 0:N.fontWeight).style("font-family",null===(rt=this._animatedTextOptions.textProperties)||void 0===rt?void 0:rt.fontFamily).style("fill",this.getTextColor()).call(W.Q,[Z]),null==o||Q&&(0,E.v9)(Q.type)||"string"==typeof o||"string"==typeof n)k.text(Y).call(W.Q,[Y]);else{var ct=n;k.transition().duration(A).tween("text",function(q){var ft=T.getValue(q),vt=d3.interpolate(ct,ft);return function(mt){var pt=vt(mt);this.textContent=O.format(pt)}})}return(0,y.bL)(D,k),k}},V.prototype.getDefaultDatumTransform=function(){return{getDatum:function(o,C){return{value:o}},getValue:function(o){return o.value}}},Object.defineProperty(V.prototype,"animatedTextOptions",{get:function(){return this._animatedTextOptions},set:function(o){this._animatedTextOptions=o},enumerable:!1,configurable:!0}),V.prototype.getTextColor=function(){var n,o=this.style&&v.v.getThemeColor(this.style,"foreground");return(null===(n=this._animatedTextOptions)||void 0===n?void 0:n.titleColor)||o||this.defaultTitleColor},V.prototype.getSeedFontHeight=function(n,o){var C=Math.floor(.75*Math.min(n,o)),D=this.visualConfiguration.maxFontSize;return D?Math.min(D,C):C},V.prototype.getTranslateX=function(n){if(this.visualConfiguration)switch(this.visualConfiguration.align){case"left":return 0;case"right":return n}return n/2},V.prototype.getTranslateY=function(n){return n},V.prototype.getTextAnchor=function(){if(this.visualConfiguration)switch(this.visualConfiguration.align){case"left":return"start";case"right":return"end"}return"middle"},V.prototype.getFormatString=function(n,o){return e.fF.assertAnyValue(o,"column"),(0,g.eU)(n,o,P.e0.formatString)},V}()},27115:function(tt,B,p){p.r(B),p.d(B,{Gauge:function(){return xt}});var P=p(81337),E=p(94478),v=p(5719),W=p(53197),S=p(60066),e=p(90120),h=p(21181),r=p(18664),y=p(80065),g=p(51660),b=p(86900),V=p(32379),n=p(33777),o=p(38400),C=p(51129),D=p(72902),A=p(40739),w=p(44783),O=p(79154),T=p(62458),F=p(38265),J=p(34644),N=p(32041),rt=p(59107),G=p(56578),nt=p(10389),H=p(46135),z=p(38958),ut=p(58914),ht=p(54522),st=p(34021),Q=p(11305),Z=p(82755),Y=p(72489),dt=p(26543),ot=p(56707),k=p(70188),q=function(){function c(){}return c.getDefaultGaugeLabelSettings=function(t,a,i){var s=(0,h.bT)({show:!0,labelColor:a,fontSize:ot.qy,style:t,textClassName:"largeLightLabel"});return i&&(s.fontProperties=(0,r.ED)(s.fontProperties,{family:i})),s.position=null,s.bold=!1,s.italic=!1,s.underline=!1,s.showDynamicLabels=!1,s},c.getDefaultDataPointSettings=function(t){var a=t.colorPalette.dataColors.getAllColors();return{fillColor:e.v.getDataColorByIndex(t,0,w.fA),targetColor:a&&a.length>1?e.v.getDataColorByIndex(t,1,w.fA):e.v.getThemeColor(t,"foregroundNeutralSecondary")}},c.convert=function(t,a){var i,s=t.columns,u=t.objects.getStaticObjects(),l=s.getValueMetadataColumn(v.Vd.y),d=this.parseGaugeData(t),m=this.convertDataLabelSettings(u,"labels",a,d.minDynamicFormatString),x=this.convertDataLabelSettings(u,"labels",a,d.maxDynamicFormatString),f=this.convertDataLabelSettings(u,"target",a,d.targetDynamicFormatString),L=e.v.getThemeColor(a,w.fA),I=this.convertDataLabelSettings(u,"calloutValue",a,null!==(i=d.dynamicCalloutLabelFormatString)&&void 0!==i?i:d.valueDynamicFormatString,L,F.Wn.lightSecondary.family),R=l&&null!=l.queryName?dt.dw.builder().withMeasure(l.queryName).createSelectionId():void 0;return{maxLabel:this.createLabel(d.max,s.getValueMetadataColumn(v.Vd.maxValue),x,l),minLabel:this.createLabel(d.min,s.getValueMetadataColumn(v.Vd.minValue),m,l,d.max),target:{label:this.createLabel(d.target,s.getValueMetadataColumn(v.Vd.targetValue),f,l),ratio:this.getTargetRatio(d)},calloutLabel:this.createLabel(d.callout,l,I,l),tooltipInfo:d.tooltipItems,formattedTooltip:(0,o.X)(d.tooltipItems),ratio:this.getValueRatio(d),dataPointSettings:this.convertDataPointSettings(u,a),identity:R,strokeSettings:(0,st.kG)(a)}},c.parseGaugeData=function(t){var a=t.columns,i=t.objects.getStaticObjects(),s=a.getValueMetadataColumn(v.Vd.y),u=i?i.axis:null,l=t.data.hasValues(v.Vd.y),d=t.data.hasValues(v.Vd.maxValue),m=t.data.hasValues(v.Vd.minValue),f={max:null,min:null,target:null,value:null,callout:null,tooltipItems:[],dynamicCalloutEnabled:!1};if(l){f.value=t.data.getValue(v.Vd.y,0),f.valueDynamicFormatString=f.minDynamicFormatString=f.maxDynamicFormatString=t.data.getFormatString(v.Vd.y,0);var L=(0,ht.xq)(f.value,s,v.qJ.general.formatString,!1,f.valueDynamicFormatString);f.tooltipItems.push({displayName:t.data.getValueDisplayName(v.Vd.y),value:L})}if(t.data.hasValues(v.Vd.targetValue)){var M=a.getValueMetadataColumn(v.Vd.targetValue);f.target=t.data.getValue(v.Vd.targetValue,0),f.targetDynamicFormatString=t.data.getFormatString(v.Vd.targetValue,0),L=(0,ht.xq)(f.target,M,v.qJ.general.formatString,!1,f.targetDynamicFormatString),f.tooltipItems.push({displayName:t.data.getValueDisplayName(v.Vd.targetValue),value:L})}else u&&(f.target=u.target);if(f.dynamicCalloutEnabled=(0,Z.NA)(i,v.qJ.calloutValue.showDynamicLabels,!1),f.dynamicCalloutEnabled){var I=(0,Z.NA)(i,v.qJ.calloutValue.dynamicLabelValue);f.callout=I,f.dynamicCalloutLabelFormatString=t.data.getFormatStringForRelatedObject(v.qJ.calloutValue.dynamicLabelValue)}else f.callout=f.value;if(d)f.max=t.data.getValue(v.Vd.maxValue,0),f.maxDynamicFormatString=t.data.getFormatString(v.Vd.maxValue,0);else if(u&&null!=u.max)f.max=u.max;else if(f.max=1,l&&f.value&&0!==f.value){var R=!1;if(s){var U=(0,Y.EO)(s,v.qJ.general.formatString,!0);null!=U&&(R=(0,Y.G2)(U).hasPercent)}R||(f.max=f.value<0?0:2*f.value)}return m?(f.min=t.data.getValue(v.Vd.minValue,0),f.minDynamicFormatString=t.data.getFormatString(v.Vd.minValue,0)):u&&null!=u.min?f.min=u.min:(f.min=0,l&&null!=f.value&&f.value<0&&(f.min=2*f.value)),(0,Q.VT)(t,f.tooltipItems,0,void 0,v.qJ.general.formatString),f},c.createLabel=function(t,a,i,s,u){var d=(0,r.qk)(i.fontProperties),m=this.getFormatter(i,a,s,u||t);return i.showDynamicLabels&&(d.text=m.format(t)),d.text=m.format(t),{value:t,requiredSpace:{width:N.b.measureSvgTextWidth(d),height:N.b.estimateSvgTextHeight(d)},text:d.text,formatter:m,settings:i}},c.getFormatter=function(t,a,i,s){var u=0===t.displayUnits?s:null;(!a||!a.objects||_.isEmpty((0,Z.NA)(a.objects,v.qJ.general.formatString)))&&(a=i);var l=t.dynamicFormatString||(0,Y.EO)(a,v.qJ.general.formatString),d=(0,k.h1)(t.precision,l),m=(0,k.YO)(t,l,u,d);return m.formatSingleValues=!(t.displayUnits>0),0===t.displayUnits&&(m.value=u),(0,Y.Ue)(m)},c.getValueRatio=function(t){return!_.isNumber(t.value)||!this.isValid(t)||t.value<=t.min?0:t.value>=t.max?1:(t.value-t.min)/(t.max-t.min)},c.isValid=function(t){return _.isNumber(t.min)&&_.isNumber(t.max)&&t.min<=t.max},c.getTargetRatio=function(t){if(!this.isValid(t)||!_.isNumber(t.target))return-1;var a=t.max-t.min;return 0!==a?(t.target-t.min)/a:0},c.convertDataLabelSettings=function(t,a,i,s,u,l){var d=c.getDefaultGaugeLabelSettings(i,u,l);return d.dynamicFormatString=s,t&&(0,h.ww)(t[a],d,void 0,i),d},c.convertDataPointSettings=function(t,a){var i=c.getDefaultDataPointSettings(a),s=e.v.create(a);return{fillColor:s.getColorForPropertyWithDefaultColor(t,v.qJ.dataPoint.fill,i.fillColor),targetColor:s.getColorForPropertyWithDefaultColor(t,v.qJ.dataPoint.target,i.targetColor)}},c}(),ft=p(41234),xt=function(){function c(t,a){this.lastAngle=-Math.PI/2,t&&(t.gaugeSmallViewPortProperties&&(this.gaugeSmallViewPortProperties=t.gaugeSmallViewPortProperties),this.animator=t.animator,this.tooltipsEnabled=t.tooltipsEnabled,this.behavior=t.behavior,this.featureSwitches=a||{},this.onObjectEnabled=this.featureSwitches.onObject)}return c.prototype.getDataLabelsCard=function(){var t,a;return this.generateLabelsCard("labels","Visual_DataPointsLabels",(0,P.__assign)((0,P.__assign)({},v.qJ.labels),{displayUnits:v.qJ.labels.labelDisplayUnits,precision:v.qJ.labels.labelPrecision}),this.getDataLabelSettingsOptions(void 0,null!==(a=null===(t=this.data)||void 0===t?void 0:t.minLabel.settings)&&void 0!==a?a:q.getDefaultGaugeLabelSettings(this.style)),void 0)},c.prototype.getTargetLabelCard=function(){var t,a,i;return this.generateLabelsCard("target","Visual_Gauge_Axis_TargetLabel",(0,P.__assign)((0,P.__assign)({},v.qJ.target),{displayUnits:v.qJ.target.labelDisplayUnits,precision:v.qJ.target.labelPrecision}),this.getDataLabelSettingsOptions(void 0,null!==(i=null===(a=null===(t=this.data)||void 0===t?void 0:t.target)||void 0===a?void 0:a.label.settings)&&void 0!==i?i:q.getDefaultGaugeLabelSettings(this.style)),!0)},c.prototype.getCalloutValueCard=function(){var t,a;return this.generateLabelsCard("calloutValue","Visual_Gauge_CalloutValue",(0,P.__assign)((0,P.__assign)({},v.qJ.calloutValue),{displayUnits:v.qJ.calloutValue.labelDisplayUnits,precision:v.qJ.calloutValue.labelPrecision,showDynamicLabels:v.qJ.calloutValue.showDynamicLabels,dynamicLabelValue:v.qJ.calloutValue.dynamicLabelValue}),this.getDataLabelSettingsOptions(void 0,null!==(a=null===(t=this.data)||void 0===t?void 0:t.calloutLabel.settings)&&void 0!==a?a:q.getDefaultGaugeLabelSettings(this.style,e.v.getThemeColor(this.style,w.fA),F.Wn.lightSecondary.family)),!0)},c.prototype.generateLabelsCard=function(t,a,i,s,u){var l=this;return(0,h.XQ)({cardBuilder:new G.CQ(new G.lg(t),a,i,function(d){return l.hostService.getLocalizedString(d)}),dataLabelsProps:i,featureSwitches:this.featureSwitches,hostServices:this.hostService,options:s,omitDescription:u,omitDynamicLabelSelector:!0,instanceKind:3})},c.prototype.getColorsCard=function(){var a,i,t=this,s=null!==(i=null===(a=this.data)||void 0===a?void 0:a.dataPointSettings)&&void 0!==i?i:q.getDefaultDataPointSettings(this.style),u=v.qJ.dataPoint;return new G.CQ(new G.lg("datapoint"),"Visual_Colors",u,function(l){return t.hostService.getLocalizedString(l)}).addGroup("datapoint",function(l){return l.addSimpleSlice(u.fill.propertyName,new G.BT({descriptor:(0,P.__assign)((0,P.__assign)({},u.fill),{instanceKind:3}),value:{value:s.fillColor}}).build()).addSimpleSlice(u.target.propertyName,new G.BT({descriptor:(0,P.__assign)((0,P.__assign)({},u.target),{instanceKind:3}),value:{value:s.targetColor}}).build())}).build()},c.prototype.getGaugeAxisCard=function(){var t,a=this,i=this.dataView;if(i?.metadata){var s=v.qJ.axis,u=(t=c.getGaugeObjectsProperties(i)).min,l=t.max,d=t.target;return new G.CQ(new G.lg("axis"),"Visual_Gauge_Axis",s,function(m){return a.hostService.getLocalizedString(m)}).addGroup("axis",function(m){return m.addSimpleSlice(s.min.propertyName,new G.mu({descriptor:(0,P.__assign)((0,P.__assign)({},s.min),{instanceKind:3}),value:u,options:{maxValue:null!=l?{type:1,value:l}:void 0}}).build(),function(x){return x.withDisabled((0,z.c5)(i,v.Vd.minValue))}).addSimpleSlice(s.max.propertyName,new G.mu({descriptor:(0,P.__assign)((0,P.__assign)({},s.max),{instanceKind:3}),value:l,options:{minValue:null!=u?{type:0,value:u}:void 0}}).build(),function(x){return x.withDisabled((0,z.c5)(i,v.Vd.maxValue))}).addSimpleSlice(s.target.propertyName,new G.mu({descriptor:(0,P.__assign)((0,P.__assign)({},s.target),{instanceKind:3}),value:d,options:{minValue:null!=u?{type:0,value:u}:void 0,maxValue:null!=l?{type:1,value:l}:void 0}}).build(),function(x){return x.withDisabled((0,z.c5)(i,v.Vd.targetValue))})}).build()}},c.prototype.getFormattingModel=function(){var t=this;return new G.Nq(function(){return t.getGaugeAxisCard()},function(){return t.getColorsCard()},function(){return t.getDataLabelsCard()},function(){return t.getTargetLabelCard()},function(){return t.getCalloutValueCard()}).build()},c.prototype.getDataLabelSettingsOptions=function(t,a){return{dataLabelsSettings:a,show:!0,precision:!0,displayUnits:!0,fontSize:!0,fontFamily:!0,enumeration:t,style:this.style,bold:!0,italic:!0,underline:!0,enableDynamicLabelPickers:a.showDynamicLabels,dynamicLabelValue:a.dynamicLabelValue}},c.getGaugeObjectsProperties=function(t){var a={},i=t.metadata.objects,s=!!i&&!!i.axis;return(0,z.c5)(t,v.Vd.minValue)||(a.min=s?i.axis.min:void 0),(0,z.c5)(t,v.Vd.maxValue)||(a.max=s?i.axis.max:void 0),(0,z.c5)(t,v.Vd.targetValue)||(a.target=s?i.axis.target:void 0),a},c.prototype.init=function(t){var i,a=this;if(this.element=t.element,this.currentViewport=t.viewport,this.style=t.style,this.settings=c.DefaultStyleProperties,this.tooltipService=(0,A.r)(t.host),this.labelPosition=0,this.margin={top:0,left:0,right:0,bottom:0},this.color=d3.scaleOrdinal([e.v.getSentimentColor(this.style,"bad"),e.v.getSentimentColor(this.style,"neutral"),e.v.getSentimentColor(this.style,"good")]).domain([0,1,2]),this.hostService=t.host,this.behavior&&(this.interactivityService=(0,D.ub)(this.hostService,this.featureSwitches)),this.onObjectEnabled){var u=(null===(i=this.hostService)||void 0===i?void 0:i.getSubSelectionService())??b.D.createWithDefaultHost();this.subSelectionHelper=g.O5.createHtmlSubselectionHelper({hostElement:this.element.get(0),hostServices:this.hostService,renderer:u,targetSource:"format",scale:function(){return a.currentViewport.scale}})}var l=this.svg=d3.select(this.element.get(0)).append("svg").classed("gauge",!0);if(this.interactivityService){var d=rt.M.isInternetExplorerOrEdge();l.attr("tabindex",0).attr("focusable",!0).classed(S.Pg,!d)}var m=this.mainGraphicsContext=l.append("g");m.attr("class",c.MainGaugeGroupClassName),this.onObjectEnabled&&m.attr(g.CP,!0),this.initKpiBands();var x=this.backgroundArc=d3.arc().innerRadius(0).outerRadius(0).startAngle(-Math.PI/2).endAngle(Math.PI/2),f=this.foregroundArc=d3.arc().innerRadius(0).outerRadius(0).startAngle(-Math.PI/2);this.backgroundArcPath=m.append("path").classed("backgroundArc",!0).attr("d",x),this.foregroundArcPath=m.append("path").datum({endAngle:-Math.PI/2}).classed("foregroundArc",!0).attr("d",f);var L=this.animatedNumberGraphicsContext=l.append("g");this.animatedNumber=new ut.AnimatedNumber(L),this.animatedNumber.init(t);var M=this.gaugeVisualProperties=this.getGaugeVisualProperties(),I=this.getAnimatedNumberProperties(M.radius,M.innerRadiusFactor,M.top,M.left);this.animatedNumberGraphicsContext.attr("transform",I.transformString),this.animatedNumber.onResizing(I.viewport)},c.prototype.update=function(t){var a;if(T.fF.assertValue(t,"options"),this.currentViewport=t.viewport,this.onObjectEnabled){var i=t.formatMode;this.subSelectionHelper.setFormatMode(i),null===(a=this.interactivityService)||void 0===a||a.setFormatMode(i),this.formatMode=i}if(t.dataViews&&t.dataViews[0]){var s=this.dataView=t.dataViews[0],u=(0,C.G)(s,{formatStringProp:v.qJ.general.formatString});if(t.type&H.EP.Data||!this.data){this.data=q.convert(u,this.style);var l=(0,n.b)([s],!1,!1,!1,["Tooltips"]);this.hostService.setWarnings(l)}(t.type&H.EP.Resize||t.type&H.EP.ResizeEnd)&&(t.suppressAnimations=!0),this.dataView.single={value:this.data.calloutLabel.value,column:void 0},this.labels=[this.data.minLabel,this.data.maxLabel],this.showTargetLabel=this.data.target.ratio>=0&&this.data.target.ratio<=1&&this.currentViewport.width>150&&this.showSideNumbersLabelText()&&this.data.target.label.settings.show;var d=c.calculatePosition(this.data,this.showTargetLabel,this.currentViewport,this.gaugeSmallViewPortProperties);this.labelPosition=d.labelPosition,this.margin=d.margin,this.gaugeVisualProperties=this.getGaugeVisualProperties(),this.drawViewPort(this.gaugeVisualProperties),this.updateInternal(t.suppressAnimations),this.updateCalloutValue(t.suppressAnimations);var x=t.type&H.EP.FormattingSubSelectionChange;if(this.subSelectionHelper&&(t.type&H.EP.Data||t.type&H.EP.Resize||t.type&H.EP.FormattingSubSelectionChange)&&(this.subSelectionHelper.updateOutlinesFromSubSelections(t.subSelections,!0),this.hostService.alertScreenReader&&x)){var f=this.subSelectionHelper.getLabelsFromSubSelections(t.subSelections,["aria-label"]),L=f?.length&&f.join(" ");L&&this.hostService.alertScreenReader(L)}}},c.prototype.updateCalloutValue=function(t){var a=this.data.calloutLabel.settings;if(this.data.calloutLabel.settings.show){var i=this.getAnimatedNumberProperties(this.gaugeVisualProperties.radius,this.gaugeVisualProperties.innerRadiusFactor,this.gaugeVisualProperties.top,this.gaugeVisualProperties.left),s={fontFamily:a.fontProperties.family,fontStyle:a.fontProperties.style,fontWeight:a.fontProperties.weight,textDecoration:a.fontProperties.textDecoration};this.animatedNumberGraphicsContext.attr("transform",i.transformString),this.animatedNumber.animatedTextOptions={textProperties:s,titleColor:a.fontProperties.color};var u=this.data.calloutLabel.formatter;this.animatedNumber.setFormatter(u),this.animatedNumber.update({viewport:i.viewport,dataViews:[this.dataView],suppressAnimations:t}),this.animatedNumberGraphicsContext.selectAll("title").remove(),this.animatedNumberGraphicsContext.append("title").text(u.format(this.data.calloutLabel.value)),this.onObjectEnabled&&this.animatedNumberGraphicsContext.classed(g.cy,!0).attr(g.Ez,"callout-value").attr(g.CK,"Visual_Gauge_CalloutValue").attr(g.QZ,2)}else this.animatedNumber.clear(),this.animatedNumberGraphicsContext.selectAll("title").remove()},c.prototype.initKpiBands=function(){if(this.settings.kpiBands.show)for(var t=this.kpiArcs=[],a=this.kpiArcPaths=[],i=this.mainGraphicsContext,s=0;s<3;s++){var u=d3.arc().innerRadius(0).outerRadius(0).startAngle(0).endAngle(0);t.push(u);var l=i.append("path").attr("d",u);a.push(l)}},c.prototype.updateKpiBands=function(t,a,i,s){if(this.settings.kpiBands.show)for(var u=0;u<s.length;u++)this.kpiArcs[u].innerRadius(t*a-(c.KpiBandDistanceFromMainArc+this.settings.kpiBands.thickness)).outerRadius(t*a-c.KpiBandDistanceFromMainArc).startAngle(s[u].start).endAngle(s[u].end),this.kpiArcPaths[u].attr("fill",s[u].fill).attr("d",this.kpiArcs[u]).attr("transform",i)},c.prototype.removeTargetElements=function(){this.targetLine&&(this.targetLine.remove(),this.targetText.remove(),this.targetConnector.remove(),this.targetLine=this.targetConnector=this.targetText=null,this.interactivityTarget&&(this.interactivityTarget.remove(),this.interactivityTarget=null))},c.prototype.updateTargetLine=function(t,a,i,s){var u=this;this.targetLine||(this.targetLine=this.mainGraphicsContext.append("line"));var l=this.data.target.ratio*Math.PI,d=s-t*Math.sin(l),m=i-t*Math.cos(l),x=s-a*Math.sin(l),f=i-a*Math.cos(l);if(this.targetLine.attr("x1",f).attr("y1",x).attr("x2",m).attr("y2",d),this.onObjectEnabled){this.interactivityTarget||(this.interactivityTarget=this.mainGraphicsContext.append("line").attr("class",c.InteractivityTargetClassSelector.class).classed(g.cy,!0).attr(g.Ez,"target").attr(g.CK,"Target").attr(g.QZ,3)),this.interactivityTarget.attr("x1",f).attr("y1",x).attr("x2",m).attr("y2",d);var L=this.interactivityTarget.node();g.O5.setDataForElement(L,{getRegionOutlines:function(){return u.getTargetOutline(L)}})}},c.prototype.getTargetOutline=function(t){var a=t.getBoundingClientRect(),s=a.x,u=a.y,d=a.width,m=this.data.ratio>.5;return[{id:"target",outline:{points:[{x:m?s+d:s,y:u},{x:m?s:s+d,y:u+a.height}],type:2}}]},c.prototype.getAnimatedNumberProperties=function(t,a,i,s){var u=Math.PI/4,m=t*a-(this.settings.kpiBands.show?c.KpiBandDistanceFromMainArc+this.settings.kpiBands.thickness:0),x=m*Math.cos(u),f=m*Math.sin(u),L=i-f,M=s-x,I=2*x;return{transformString:(0,nt.Iu)(M*=1,L*=1),viewport:{height:f,width:I,scale:1}}},c.prototype.getGaugeVisualProperties=function(){var t=this.currentViewport,a=this.margin,i=t.width-a.right-a.left,s=i/2,u=t.height-a.top-a.bottom,l=Math.min(s,u),d=c.InnerRadiusFactor,m=a.left+s,x=l+(u-l)/2+a.top;return{radius:l,innerRadiusOfArc:l*d,left:m,top:x,height:u,width:i,margin:a,transformString:(0,nt.Iu)(m,x),innerRadiusFactor:d}},c.prototype.drawViewPort=function(t){var a=this;T.fF.assertAnyValue(t,"Gauge options");var i=this.settings.kpiBands.separationRadians,s=c.InnerRadiusFactor,u=this.backgroundArc,l=this.color,d=[{fill:l(0),start:-Math.PI/2,end:-Math.PI/2+Math.PI/4-i},{fill:l(1),start:-Math.PI/2+1*Math.PI/4+i,end:-Math.PI/2+3*Math.PI/4-i},{fill:l(2),start:-Math.PI/2+3*Math.PI/4+i,end:Math.PI/2}],m=t.radius,x=t.transformString;this.updateKpiBands(m,s,x,d);var f=m*s,L=-Math.PI/2;u.innerRadius(f).outerRadius(m).startAngle(L).endAngle(Math.PI/2),this.backgroundArcPath.attr("d",u).attr("transform",x);var M=this.foregroundArc;if(M.innerRadius(f).outerRadius(m).startAngle(L),this.foregroundArcPath.datum({endAngle:this.lastAngle}).attr("transform",x).attr("d",M),this.onObjectEnabled){this.foregroundArcPath.classed(g.cy,!0).attr(g.Ez,"fill").attr(g.CK,"Visual_Fill").attr(g.QZ,3);var I=this.foregroundArcPath.node();g.O5.setDataForElement(I,{getRegionOutlines:function(){return a.getFillOutline(f,m,L,a.lastAngle)}})}var R=t.innerRadiusOfArc,U=t.left,j=t.top,K=t.margin,X=t.height;this.settings.targetLine.show&&$.isNumeric(this.data.target.label.value)?this.data.target.ratio<0||this.data.target.ratio>1?this.removeTargetElements():(this.updateTargetLine(m,R,U,j),this.renderTarget(m,X,t.width,K)):this.removeTargetElements(),this.svg.attr("height",this.currentViewport.height).attr("width",this.currentViewport.width)},c.prototype.getFillOutline=function(t,a,i,s){var u,l=(u=this.backgroundArcPath.node().getBoundingClientRect()).left,I=this.currentViewport.scale;return[{id:"fill",outline:{type:4,center:{x:l+u.width/2,y:u.top+u.height},innerRadius:t*I,outerRadius:a*I,startAngle:i,endAngle:s}}]},c.prototype.getSubSelectables=function(t){return this.subSelectionHelper.getAllSubSelectables(t)},c.prototype.getNextSubSelectable=function(t,a){return this.subSelectionHelper.getNextSubSelectable(t,a)},c.prototype.getSubSelectionStyles=function(t){if(this.onObjectEnabled){var i=_.first(t).visualObjects;T.fF.assert(function(){return 1===i.length},"Expected 1 visual");var s=i[0];switch(T.fF.assert(function(){return 1===t.length||t.every(function(l){return _.isEqual(l.visualObjects,[s])},"Expected 1 sub-selection or matching objects")}),s&&s.selectorsByColumn&&(0,V.fd)((0,V.tV)(s.selectorsByColumn)),s.objectName){case"callout-value":return this.getCalloutValueSubSelectionStyles();case"data-labels":return this.getDataLabelsSubSelectionStyles();case"target":return(0,y.w3)(this.hostService,void 0,(0,P.__assign)({},v.qJ.dataPoint.target));case"target-label":return this.getTargetLabelSubSelectionStyles();case"fill":return(0,y.w3)(this.hostService,void 0,(0,P.__assign)({},v.qJ.dataPoint.fill))}}},c.prototype.getCalloutValueSubSelectionStyles=function(){var t,a=(t=v.qJ.calloutValue).fontFamily;return(0,y.xs)(this.hostService,{fontFamilyReference:a,boldReference:t.bold,italicReference:t.italic,underlineReference:t.underline,fontColorReference:t.color,displayUnitsReference:t.labelDisplayUnits,precisionReference:t.labelPrecision})},c.prototype.getDataLabelsSubSelectionStyles=function(){var t,a=(t=v.qJ.labels).fontFamily;return(0,y.Jf)({hostServices:this.hostService,omitSelectorForSingleSeries:!0,individualSelector:void 0,selector:void 0,repetitionSelector:void 0},{fontFamilyReference:a,fontSizeReference:t.fontSize,boldReference:t.bold,italicReference:t.italic,underlineReference:t.underline,fontColorReference:t.color,displayUnitsReference:t.labelDisplayUnits,precisionReference:t.labelPrecision})},c.prototype.getTargetLabelSubSelectionStyles=function(){var t,a=(t=v.qJ.target).fontFamily;return(0,y.xs)(this.hostService,{fontFamilyReference:a,fontSizeReference:t.fontSize,boldReference:t.bold,italicReference:t.italic,underlineReference:t.underline,fontColorReference:t.color,displayUnitsReference:t.labelDisplayUnits,precisionReference:t.labelPrecision})},c.prototype.getSubSelectionShortcuts=function(t,a){var i=this;if(this.onObjectEnabled&&!a){var u=_.first(t).visualObjects;T.fF.assert(function(){return 1===u.length},"Expected 1 visual");var l=u[0];T.fF.assert(function(){return 1===t.length||t.every(function(m){return _.isEqual(m.visualObjects,[l])},"Expected 1 sub-selection or matching objects")});var d=function(x){return i.hostService.getLocalizedString(x)};switch(l.objectName){case"callout-value":return this.getCalloutValueShortcuts(d);case"data-labels":return this.getDataLabelsShortcuts(d);case"target":return this.getTargetShortcuts(d);case"target-label":return this.getTargetLabelShortcuts(d);case"fill":return this.getFillShortcuts(d)}}},c.prototype.getCalloutValueShortcuts=function(t){return[{type:0},(0,P.__assign)((0,P.__assign)({type:2},v.qJ.calloutValue.show),{disabledLabel:t("Delete"),keyboardShortcuts:[{key:"Delete",nextValue:!1}]}),{type:1,destinationInfo:(0,P.__assign)({},v.qJ.calloutValue.fontFamily),label:t("Format_Callout_Value")}]},c.prototype.getDataLabelsShortcuts=function(t){return[{type:0},(0,P.__assign)((0,P.__assign)({type:2},v.qJ.labels.show),{disabledLabel:t("Delete"),keyboardShortcuts:[{key:"Delete",nextValue:!1}]}),{type:1,destinationInfo:(0,P.__assign)({},v.qJ.labels.fontFamily),label:t("Format_Data_Labels")}]},c.prototype.getTargetShortcuts=function(t){return[{type:0},(0,P.__assign)((0,P.__assign)({type:2},v.qJ.target.show),{enabledLabel:t("Format_AddTargetLabel")}),{type:1,destinationInfo:(0,P.__assign)({},v.qJ.dataPoint.target),label:t("Format_Target")}]},c.prototype.getTargetLabelShortcuts=function(t){return[{type:0},(0,P.__assign)((0,P.__assign)({type:2},v.qJ.target.show),{disabledLabel:t("Delete"),keyboardShortcuts:[{key:"Delete",nextValue:!1}]}),{type:1,destinationInfo:(0,P.__assign)({},v.qJ.target.fontFamily),label:t("Format_Target_Label")}]},c.prototype.getFillShortcuts=function(t){return[{type:0},(0,P.__assign)((0,P.__assign)({type:2},v.qJ.labels.show),{enabledLabel:t("Format_AddDataLabels")}),{type:1,destinationInfo:(0,P.__assign)({},v.qJ.dataPoint.fill),label:t("Format_Fill")}]},c.prototype.updateInternal=function(t){var a=this.gaugeVisualProperties.height,i=this.gaugeVisualProperties.width,s=this.gaugeVisualProperties.radius,u=this.margin,l=(0,E.Mb)(this.animator,t),d=this.data,m=this.lastAngle=-Math.PI/2+Math.PI*this.data.ratio;if(this.foregroundArcPath.transition().ease((0,J.Ad)(this.settings.transition.ease)).duration(l).call(this.arcTween,[m,this.foregroundArc]),this.renderMinMaxLabels(this.labels,s,a,i,u),this.updateVisualConfigurations(),this.tooltipsEnabled&&(this.tooltipService.addTooltip(this.foregroundArcPath,function(L){return d.tooltipInfo},function(L){return d.identity&&[d.identity]}),this.tooltipService.addTooltip(this.backgroundArcPath,function(L){return d.tooltipInfo},function(L){return d.identity&&[d.identity]})),this.interactivityService){this.interactivityService.bind([],this.behavior,{paths:[this.foregroundArcPath],formatMode:this.formatMode});var x="".concat(this.hostService.getLocalizedString("Role_DisplayName_MinValue")," ").concat(d.minLabel.text,".")+" ".concat(this.hostService.getLocalizedString("Role_DisplayName_MaxValue")," ").concat(d.maxLabel.text,".");this.svg.attr("aria-label",d.formattedTooltip?d.formattedTooltip.concat(" ".concat(x)):x)}this.foregroundArcPath.datum().identity=d.identity},c.prototype.updateVisualConfigurations=function(){this.mainGraphicsContext.select("line:not(".concat(c.InteractivityTargetClassSelector.selector,")")).attr("stroke",this.data.dataPointSettings.targetColor).attr("stroke-width",this.settings.targetLine.thickness),(0,st.H4)(this.mainGraphicsContext.select("path"),this.data.strokeSettings),this.onObjectEnabled&&this.mainGraphicsContext.select(c.InteractivityTargetClassSelector.selector).attr("stroke",this.data.dataPointSettings.targetColor).attr("stroke-opacity",0).style("stroke-width",this.settings.targetLine.thickness+c.InteractivityTargetPadding).style("stroke-linejoin",ft.t.round).style("stroke-dasharray","none"),this.backgroundArcPath.style("fill",e.v.getThemeColor(this.style,"backgroundLight")),this.foregroundArcPath.style("fill",this.data.dataPointSettings.fillColor)},c.prototype.renderMinMaxLabels=function(t,a,i,s,u){if(this.svg.selectAll(c.LabelText.selector).remove(),this.data.minLabel.settings.show)for(var d=t.length,m=d-1,x=this.labelPosition,f=this.data.minLabel.settings.fontProperties,L=f.size.px,M=this.settings.labels.padding,I=0;I<d;I++){var R=this.gaugeVisualProperties.top,U=(0,r.qk)(f,t[I].text);if(this.showSideNumbersLabelText()){var j=u.left+s/2-a*Math.cos(Math.PI*I/m),K=void 0,X=1===I,et=!1;2===x?(et=!0,R+=M,K=X?"end":"start",U.text=N.b.getTailoredTextOrDefault(U,a)):(K=X?"start":"end",j+=M*(X?1:-1));var at=this.mainGraphicsContext.append("text").attr("x",j).attr("y",R).attr("dy",et?L:0).classed(c.LabelText.class,!0);this.onObjectEnabled&&at.classed(g.cy,!0).attr(g.Ez,"data-labels").attr(g.CK,"Visual_DataPointsLabels").attr(g.QZ,2),at.style("text-anchor",K).styles((0,r.E_)(f)).text(U.text),et||this.truncateTextIfNeeded(at,j,X),at.append("title").text(U.text)}}},c.prototype.truncateTextIfNeeded=function(t,a,i){t.call(W.oq,i?this.currentViewport.width-a:a,N.b.svgEllipsis)},c.prototype.renderTarget=function(t,a,i,s){var u=this.data.target,l=this.data.target.label.settings,d=u.label.value,m=u.ratio,x=t+(a-t)/2+s.top,f=m>.5,L=this.settings.labels.padding,M=f?"start":"end",I=this.data.target.label.formatter,R=Math.asin(10/t)/Math.PI,U=m<R||m>1-R?f?1-R:R:m,j=s.left+i/2-(t+L)*Math.cos(Math.PI*U),K=x-(t+L)*Math.sin(Math.PI*U);this.targetText||(this.targetText=this.mainGraphicsContext.append("text").classed(c.TargetText.class,!0)),this.onObjectEnabled&&this.targetText.classed(g.cy,!0).attr(g.Ez,"target-label").attr(g.CK,"Visual_Gauge_Axis_TargetLabel").attr(g.QZ,2),this.targetText.attr("x",j).attr("y",K).style("display",this.showTargetLabel?"":"none").style("text-anchor",M).styles((0,r.E_)(l.fontProperties)).text(I.format(d)),this.truncateTextIfNeeded(this.targetText,j,f),this.targetText.call(o.Q,[I.format(d)]),this.targetConnector||(this.targetConnector=this.mainGraphicsContext.append("line").classed(c.TargetConnector.class,!0)),m===U?this.targetConnector.style("display","none"):this.targetConnector.attr("x1",s.left+i/2-t*Math.cos(Math.PI*m)).attr("y1",x-t*Math.sin(Math.PI*m)).attr("x2",j).attr("y2",K).style("stroke-width",this.settings.targetLine.thickness).style("stroke",e.v.getThemeColor(this.style,"foregroundNeutralSecondary")).style("display","")},c.prototype.arcTween=function(t,a){t.attrTween("d",function(i){var s=d3.interpolate(i.endAngle,a[0]);return function(u){return i.endAngle=s(u),a[1](i)}})},c.calculatePosition=function(t,a,i,s){var u=c.DefaultStyleProperties,l={margin:{top:0,left:0,bottom:0,right:0},labelPosition:0};if(s&&s.smallGaugeMarginsOnSmallViewPort&&i.height<s.MinHeightGaugeSideNumbersVisible){var d=s.GaugeMarginsOnSmallViewPort;return l.margin={top:d,bottom:d,left:d,right:d},l}if(!t)return l;var m=2*u.labels.padding,x=t&&t.minLabel.settings.show;if(a){var L=(t.target.ratio<=.5?t.target.ratio:1-t.target.ratio)*Math.PI,I=(i.width-(t.target.label.requiredSpace.width+m))/(Math.cos(L)+1),R=i.width-2*I;R>0&&(t.target.ratio<.5?l.margin.left=R:l.margin.right=R);var U=(i.height-t.target.label.requiredSpace.height-m)/Math.sin(L);(R=i.height-U)>0&&(l.margin.top=R)}if(x){var j=Math.max(l.margin.left,t.minLabel.requiredSpace.width+m),K=Math.max(l.margin.right,t.maxLabel.requiredSpace.width+m),X=t.minLabel.requiredSpace.height+m;i.height-l.margin.top-X>(i.width-j-K)/2?(l.labelPosition=2,l.margin.bottom=X):(l.labelPosition=1,l.margin={left:j,right:K,top:l.margin.top,bottom:u.labels.padding})}var it=t.strokeSettings;return it&&it.visible&&(l.margin={left:l.margin.left+it.width,right:l.margin.right+it.width,top:l.margin.top+it.width,bottom:l.margin.bottom+it.width}),l},c.prototype.showSideNumbersLabelText=function(){return!(this.gaugeSmallViewPortProperties&&this.gaugeSmallViewPortProperties.hideGaugeSideNumbersOnSmallViewPort&&this.currentViewport.height<this.gaugeSmallViewPortProperties.MinHeightGaugeSideNumbersVisible)},c.DefaultStyleProperties={transition:{ease:"cubic-in-out"},targetLine:{show:!0,thickness:2},labels:{count:2,padding:5,fontSize:ot.UU},kpiBands:{show:!1,separationRadians:Math.PI/128,thickness:5}},c.InnerRadiusFactor=.7,c.KpiBandDistanceFromMainArc=2,c.MainGaugeGroupClassName="mainGroup",c.InteractivityTargetPadding=8,c.InteractivityTargetClassSelector=(0,O.CH)("interactivity-target"),c.LabelText=(0,O.CH)("labelText"),c.TargetConnector=(0,O.CH)("targetConnector"),c.TargetText=(0,O.CH)("targetText"),c}()},79476:function(tt,B,p){p.d(B,{ao:function(){return V},fS:function(){return v},oY:function(){return b}});var P=p(19377);function v(n,o){return null!=n&&null!=o&&n.x===o.x&&n.y===o.y}function b(n,o,C){var D=(o.y-n.y)*(C.x-o.x)-(o.x-n.x)*(C.y-o.y);return 0===D?P.i.Colinear:D>0?P.i.Clockwise:P.i.Counterclockwise}function V(n,o,C){return C.x<=Math.max(n.x,o.x)&&C.x>=Math.min(n.x,o.x)&&C.y<=Math.max(n.y,o.y)&&C.y>=Math.min(n.y,o.y)}},92379:function(tt,B,p){p.d(B,{m:function(){return W}});var P=p(19377),E=p(79476),v=p(80758),W=function(){function S(e){e&&(this.polygonPoints=this.convertArrayPathToPoints(e))}return S.fromPolygonPoints=function(e){var h=new S(null);return h.polygonPoints=e,h},S.prototype.absoluteCentroid=function(){return null==this._absoluteCentroid&&(this._absoluteCentroid=this.calculatePolygonCentroid()),this._absoluteCentroid},S.prototype.absoluteBoundingRect=function(){return null==this._absoluteBoundingRect&&(this._absoluteBoundingRect=this.calculateBoundingRect()),this._absoluteBoundingRect},S.prototype.contains=function(e){var r={x:e.left+e.width,y:e.top},y={x:e.left,y:e.top+e.height},g={x:e.left+e.width,y:e.top+e.height};return this.inside({x:e.left,y:e.top})&&this.inside(r)&&this.inside(y)&&this.inside(g)},S.prototype.conflicts=function(e){if(!this.isConflictWithBoundingBox(e))return!1;var r={x:e.left+e.width/2,y:e.top},y={x:e.left+e.width,y:e.top},g={x:e.left,y:e.top+e.height},b={x:e.left+e.width/2,y:e.top+e.height},V={x:e.left+e.width,y:e.top+e.height},n={x:e.left,y:e.top+e.height/2},o={x:e.left+e.width,y:e.top+e.height/2};return this.inside({x:e.left,y:e.top})||this.inside(r)||this.inside(y)||this.inside(g)||this.inside(b)||this.inside(V)||this.inside(n)||this.inside(o)},S.prototype.lineIntersectionPoint=function(e,h){for(var r=0;r<this.polygonPoints.length;r++){var b=this.getLineIntersection(e,h,this.polygonPoints[r],r===this.polygonPoints.length-1?this.polygonPoints[0]:this.polygonPoints[r+1]);if(null!==b)return b}return null},S.calculateAbsolutePolygonArea=function(e){var h,r=1,y=0;for(h=0;h<e.length;h++)y+=e[h].x*e[r].y-e[r].x*e[h].y,r=(r+1)%e.length;return.5*y},S.prototype.overlapPath=function(e){if(this.inside({x:e[0],y:e[1]}))return!0;var h=new S(e);if(h.inside(this.polygonPoints[0]))return!0;for(var r=0;r<this.polygonPoints.length;r++)if(h.lineIntersectionPoint(this.polygonPoints[r],this.polygonPoints[(r+1)%this.polygonPoints.length]))return!0;return!1},S.prototype.inside=function(e){for(var h=e.x,r=e.y,y=!1,g=0,b=this.polygonPoints.length-1;g<this.polygonPoints.length;b=g++){var V=this.polygonPoints[g].x,n=this.polygonPoints[g].y,C=this.polygonPoints[b].y;n>r!=C>r&&h<(this.polygonPoints[b].x-V)*(r-n)/(C-n)+V&&(y=!y)}return y},S.translateX=function(e,h){for(var r=new Float64Array(2*e.polygonPoints.length),y=0;y<e.polygonPoints.length;y++)r[2*y]=e.polygonPoints[y].x+h,r[2*y+1]=e.polygonPoints[y].y;return new S(r)},S.polygonBoundsOverlap=function(e,h){var r=(0,v.WN)(S.getPolyBoundLeft(e),S.getPolyBoundRight(e),S.getPolyBoundLeft(h),S.getPolyBoundRight(h)),y=(0,v.WN)(S.getPolyBoundLower(e),S.getPolyBoundUpper(e),S.getPolyBoundLower(h),S.getPolyBoundUpper(h));return r&&y},S.circleRectangleOverlap=function(e,h,r){var y=Math.max(e.left,Math.min(h.x,e.right)),g=Math.min(e.bottom,Math.max(h.y,e.top)),b=y-h.x,V=g-h.y;return b*b+V*V<=r*r},S.linesIntersect=function(e,h,r,y,g){void 0===g&&(g=!0);var b=(0,E.oY)(e,h,r),V=(0,E.oY)(e,h,y),n=(0,E.oY)(r,y,e),o=(0,E.oY)(r,y,h);return b!==V&&n!==o||!!g&&!!(b===P.i.Colinear&&(0,E.ao)(e,h,r)||V===P.i.Colinear&&(0,E.ao)(e,h,y)||n===P.i.Colinear&&(0,E.ao)(r,y,e)||o===P.i.Colinear&&(0,E.ao)(r,y,h))},S.resize=function(e,h){if(0===h)return e;for(var r=S.calculateAbsolutePolygonArea(e.polygonPoints)>0,g=_.clone(h>0&&!0===r||h<0&&!1===r?e.polygonPoints.reverse():e.polygonPoints),b=e.absoluteCentroid(),V=[],n=0;n<g.length;n++){var o=g[n],C=g[(n+1)%g.length],D=C.y-o.y,A=void 0;0!==D&&(A=-(C.x-o.x)/D);var w=0;_.isUndefined(A)||(w=(o.y<C.y?-1:1)*Math.sqrt(h*h/(1+A*A)));var O=0;0===w?O=(o.x>C.x?-1:1)*h:_.isUndefined(A)||(O=A*w);var T={x:o.x+w,y:o.y+O},F={x:0,y:0};0===A?(F.x=T.x,F.y=T.y+10):_.isUndefined(A)||(F.x=T.x+10,F.y=T.y-10/A);var J=(T.x-F.x)*(b.y-o.y)-(T.y-F.y)*(b.x-o.x);if(0!==J){var N={x:((T.x*F.y-T.y*F.x)*(b.x-o.x)-(T.x-F.x)*(b.x*o.y-b.y*o.x))/J,y:((T.x*F.y-T.y*F.x)*(b.y-o.y)-(T.y-F.y)*(b.x*o.y-b.y*o.x))/J};isFinite(N.x)&&isFinite(N.y)&&V.push(N)}}return S.fromPolygonPoints(V)},S.getPolyBoundLeft=function(e){var h;return null===(h=_.minBy(e.polygonPoints,function(r){return r.x}))||void 0===h?void 0:h.x},S.getPolyBoundRight=function(e){var h;return null===(h=_.maxBy(e.polygonPoints,function(r){return r.x}))||void 0===h?void 0:h.x},S.getPolyBoundUpper=function(e){var h;return null===(h=_.maxBy(e.polygonPoints,function(r){return r.y}))||void 0===h?void 0:h.y},S.getPolyBoundLower=function(e){var h;return null===(h=_.minBy(e.polygonPoints,function(r){return r.y}))||void 0===h?void 0:h.y},S.prototype.isConflictWithBoundingBox=function(e){return(0,v.HL)(this.absoluteBoundingRect(),e)},S.prototype.calculatePolygonCentroid=function(){var e,h,r,y,g,b;for(e=S.calculateAbsolutePolygonArea(this.polygonPoints),r=y=0,b=1,g=0;g<this.polygonPoints.length;g++)r+=(this.polygonPoints[g].x+this.polygonPoints[b].x)*(h=this.polygonPoints[g].x*this.polygonPoints[b].y-this.polygonPoints[b].x*this.polygonPoints[g].y),y+=(this.polygonPoints[g].y+this.polygonPoints[b].y)*h,b=(b+1)%this.polygonPoints.length;return{x:r/=6*e,y:y/=6*e}},S.prototype.calculateBoundingRect=function(){for(var e=Number.POSITIVE_INFINITY,h=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,y=Number.NEGATIVE_INFINITY,g=0,b=this.polygonPoints;g<b.length;g++){var V=b[g];V.x<e?e=V.x:V.x>r&&(r=V.x),V.y<h?h=V.y:V.y>y&&(y=V.y)}return{left:e,top:h,width:r-e,height:y-h}},S.prototype.getLineIntersection=function(e,h,r,y){var g=e.x,b=e.y,o=r.x,C=r.y,w=h.x-g,O=h.y-b,T=y.x-o,F=y.y-C,J=(-O*(g-o)+w*(b-C))/(-T*O+w*F),N=(T*(b-C)-F*(g-o))/(-T*O+w*F);return J>=0&&J<=1&&N>=0&&N<=1?{x:g+N*w,y:b+N*O}:null},S.prototype.convertArrayPathToPoints=function(e){for(var h=[],r=0;r<e.length;r+=2)h.push({x:e[r],y:e[r+1]});return h},S}()},34644:function(tt,B,p){p.d(B,{Ad:function(){return E},LL:function(){return W},_9:function(){return v}});var P=p(62458);function E(S){switch(S){case"linear":return d3.easeLinear;case"cubic-in-out":return d3.easeCubicInOut;case"cubic-out":return d3.easeCubicOut;case"back":return d3.easeBack;default:P.fF.assertNever(S)}return d3.easeCubicInOut}function v(S){return!!S.bandwidth}function W(S,e){var h=S.selectAll(_.map(e,function(r){return r.selector}).join(", ")).nodes();h.sort(function(r,y){for(var g=0,b=0;b<e.length;b++)g+=+d3.select(r).classed(e[b].class)*b,g-=+d3.select(y).classed(e[b].class)*b;return g}),d3.selectAll(h).order()}},19377:function(tt,B,p){p.d(B,{i:function(){return P}});var P=function(E){return E[E.Clockwise=0]="Clockwise",E[E.Counterclockwise=1]="Counterclockwise",E[E.Colinear=2]="Colinear",E}({})}}]);