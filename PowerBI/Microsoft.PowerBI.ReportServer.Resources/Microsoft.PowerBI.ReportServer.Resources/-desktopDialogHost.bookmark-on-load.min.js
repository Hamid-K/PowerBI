"use strict";(self.webpackChunkdesktopDialogHost=self.webpackChunkdesktopDialogHost||[]).push([["bookmark-on-load"],{15318:function(Q,f,t){t.r(f),t.d(f,{BookmarkOnLoadModule:function(){return W}});var c=t(81337),C=t(17966),D=t(19276),x=t(26898),M=t(83008),P=t(39445),F=t(49080),j=t(9380),T=t(14463),N=t(60661),b=t(10556),I=t(62458),U=t(98665),E={provide:"bookmarkOnLoad",useFactory:function(e,o,a,l,d,h,v,s,i){var r=new G(e,o,a,l,d,h,v,i);return s.resolve(r)},deps:[C.F,x.i,M.D,P.H,F.J,j.vZ,D.j,T.t,U.y0]},G=function(){function e(o,a,l,d,h,v,s,i){this.bookmarkService=o,this.conceptualSchemaProxy=a,this.dataSources=l,this.explorationStateService=d,this.stateManager=h,this.featureSwitchService=v,this.explorationStateApplierService=s,this.telemetryService=i}return e.prototype.applyBookmarkOnLoad=function(o,a,l,d,h){return(0,c.__awaiter)(this,void 0,void 0,function(){var v,s,i,r,m,g,n,u,O,B,A,y,S;return(0,c.__generator)(this,function(p){switch(p.label){case 0:return v=this.dataSources.get(),s=this.conceptualSchemaProxy.get(v),i=[s],l&&i.push(l),[4,Promise.allSettled(i)];case 1:p.sent(),r=o.bookmark,I.fF.assert(function(){return!!r},"a valid bookmark must be present"),p.label=2;case 2:return p.trys.push([2,4,,5]),n={clearUnmatchedData:!1},r.options&&(n.suppressData=(u=r.options).suppressData,n.suppressActiveSection=u.suppressActiveSection,n.suppressDisplay=u.suppressDisplay,u.applyOnlyToTargetVisuals&&(n.targetVisualNames=u.targetVisualNames)),B=(O=this.explorationStateService).apply,A=[r.explorationState,a],[4,s];case 3:if(m=B.apply(O,A.concat([p.sent(),(0,c.__assign)((0,c.__assign)({},n),{suppressActiveSection:!!d,applyPresentationChanges:!0,isPersistentState:1!==o.resolution})])),this.explorationStateApplierService.syncFilterState(m),1===o.resolution&&this.bookmarkService.setActiveBookmark(r),!m)return[2];if(g=function(e){if(e.activeSection){var o={visualContainers:e.visualContainers,visualContainerGroups:e.visualContainerGroups};return e.filterScope&&(o.filterScope=e.filterScope),e.pendingHighlights&&(o.pendingHighlights=e.pendingHighlights),e.visibility&&(o.visibility=e.visibility),o}return e}(m),!this.featureSwitchService.featureSwitches.bookmarkInitRefactor){y=this.stateManager.createApplyBookmarkActivity("ApplyBookmarkOnLoad",h);try{this.stateManager.applyImpact(g,a,(0,c.__assign)((0,c.__assign)({},n),{suppressActiveSection:!0,suppressDisplay:!0}),y),y.resolve()}catch(K){y.reject(K)}}return(0,N.oU)(a),[3,5];case 4:return S=p.sent(),this.telemetryService.logEvent(b.WZm,{bookmarkType:1===o.resolution?-1:r.type,bookmarkObjectId:r.name,errorCode:"ApplyError",pbi_source:S.stack,stack:S.message}),[3,5];case 5:return[2,m]}})})},e}(),V=t(77476),Z=t(52910),J=t(82156),k=t(50423),W=function(){function e(){}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({providers:[E],imports:[V.CommonModule,Z.O,J.N]}),e}()}}]);