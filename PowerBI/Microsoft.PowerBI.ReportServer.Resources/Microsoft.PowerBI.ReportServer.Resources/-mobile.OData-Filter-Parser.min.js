"use strict";(self.webpackChunkmobile=self.webpackChunkmobile||[]).push([["OData-Filter-Parser"],{43570:function(Jf,Re,M){M.r(Re),M.d(Re,{ODataFilterParserModule:function(){return si}});var E=M(81337),d=function(f){return f[f.eq=0]="eq",f[f.ne=1]="ne",f[f.lt=2]="lt",f[f.le=3]="le",f[f.gt=4]="gt",f[f.ge=5]="ge",f[f.add=6]="add",f[f.sub=7]="sub",f[f.mul=8]="mul",f[f.div=9]="div",f[f.mod=10]="mod",f[f.in=11]="in",f}({}),se=function(f){return f[f.property=0]="property",f[f.literal=1]="literal",f[f.collection=2]="collection",f}({}),Ae=function(f){return f[f.and=0]="and",f[f.or=1]="or",f}({}),L=function(f){return f[f.integer=1]="integer",f[f.double=2]="double",f[f.decimal=3]="decimal",f[f.float=4]="float",f}({}),W=M(41114),Le="PBI.OData.PegSyntaxError",Fs=W.cx[Le]=(0,W.b1)(Le),Ve="PBI.OData.FilterParserError",Is=W.cx[Ve]=(0,W.b1)(Ve),Ze="PBI.OData.FilterParserSuccess",js=W.cx[Ze]=(0,W.b1)(Ze),Qe=function(f){function c(r,g,y,C){var A=f.call(this)||this;return A.message=r,A.expected=g,A.found=y,A.location=C,A.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(A,c),A}return(0,E.ZT)(c,f),c.buildMessage=function(r,g){function y(P){return P.charCodeAt(0).toString(16).toUpperCase()}function C(P){return P.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(b){return"\\x0"+y(b)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(b){return"\\x"+y(b)})}function A(P){return P.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(b){return"\\x0"+y(b)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(b){return"\\x"+y(b)})}function V(P){switch(P.type){case"literal":return'"'+C(P.text)+'"';case"class":var b=P.parts.map(function(N){return Array.isArray(N)?A(N[0])+"-"+A(N[1]):A(N)});return"["+(P.inverted?"^":"")+b+"]";case"any":return"any character";case"end":return"end of input";case"other":return P.description}}return"Expected "+function(P){var N,Y,b=P.map(V);if(b.sort(),b.length>0){for(N=1,Y=1;N<b.length;N++)b[N-1]!==b[N]&&(b[Y]=b[N],Y++);b.length=Y}switch(b.length){case 1:return b[0];case 2:return b[0]+" or "+b[1];default:return b.slice(0,-1).join(", ")+", or "+b[b.length-1]}}(r)+" but "+((P=g)?'"'+C(P)+'"':"end of input")+" found.";var P},c}(Error),Os=function(f,c){c=void 0!==c?c:{};var he,e,i,t,r={},g={start:ms},y=ms,C=" ",A=p(" ",!1),V=/^[0-9]/,re=R([["0","9"]],!1,!1),I=function(i){return i.join("")},P=/^[0-9a-fA-F]/,b=R([["0","9"],["a","f"],["A","F"]],!1,!1),N="%x27",Y=p("%x27",!1),Pe="'",Te=p("'",!1),ii=function(){return"'"},Je="null",ti=p("null",!1),We="%d88",fi=p("%d88",!1),Ke="binary",ai=p("binary",!1),Ye="true",li=p("true",!1),ke=function(){return!0},_e="1",er=p("1",!1),rr="false",ni=p("false",!1),sr=function(){return!1},ir="0",tr=p("0",!1),Z="-",Q=p("-",!1),ci=function(i,t,a){return new Date(i+"-"+t+"-"+a+"T00:00:00.000")},fr="datetime",oi=p("datetime",!1),we=function(i){return new Date(i)},ar="datetimeoffset",ui=p("datetimeoffset",!1),pi="T",gi=p("T",!1),Ee=":",xe=p(":",!1),vi=function(i,t,a,o,u){return i+"-"+t+"-"+a+"T"+o+":"+u},hi=function(i,t){return i+":"+t},G=".",q=p(".",!1),$i=function(i,t){return i+"."+t},di="Z",mi=p("Z",!1),yi=function(i){return i+"Z"},Ci=function(i,t,a,o){return i+t+a+":"+o},lr=":00",Ai=p(":00",!1),bi=function(i,t,a){return i+t+a+":00"},nr="M",cr=p("M",!1),or="m",ur=p("m",!1),Se=function(i,t,a){return+((i||"")+t.join("")+"."+a.join(""))},Ne=function(i,t){return Number((i||"")+t.join(""))},pr="e",gr=p("e",!1),vr="E",hr=p("E",!1),ie="D",te=p("D",!1),fe="d",ae=p("d",!1),$r=function(i,t,a,o,u){return+((i||"")+t+"."+a.join("")+"e"+(o||"")+u.join(""))},dr="guid",Pi=p("guid",!1),Ti=function(i,t){return parseInt(t.join(""))*("-"===i?-1:1)},wi="L",Ei=p("L",!1),xi="l",Si=p("l",!1),Ni=function(i,t){return Number(t.join(""))*("-"===i?-1:1)},le="F",ne=p("F",!1),ce="f",oe=p("f",!1),Di=function(i,t,a){return t},Fi=/^[1-9]/,Ii=R([["1","9"]],!1,!1),ji=function(i,t){return i+t},mr=/^[0-2]/,yr=R([["0","2"]],!1,!1),ue=function(i,t){return i+t},Cr="13",Mi=p("13",!1),Ar="60",Oi=p("60",!1),Ri=/^[0-5]/,Li=R([["0","5"]],!1,!1),Vi="3",Zi=p("3",!1),br=/^[0-1]/,Pr=R([["0","1"]],!1,!1),Qi=function(i){return"3"+i},Bi="2",zi=p("2",!1),Gi=/^[0-4]/,qi=R([["0","4"]],!1,!1),Xi=function(i){return"2"+i},Ui=function(i,t,a,o){return i+t+a+o},Hi="+",Ji=p("+",!1),Tr="NaN",Wi=p("NaN",!1),wr="-INF",Ki=p("-INF",!1),Er="INF",Yi=p("INF",!1),ki=/^[^']/,_i=R(["'"],!0,!1),xr=function(i){return i},Sr=/^[a-zA-Z0-9\-_]/,Nr=R([["a","z"],["A","Z"],["0","9"],"-","_"],!1,!1),et=/^[_a-zA-Z]/,rt=R(["_",["a","z"],["A","Z"]],!1,!1),st=function(i,t){return t?i+t:i},it=function(i,t){return t},tt=function(i,t){return t||(t=[]),t&&t[0]&&"[object Array]"===Object.prototype.toString.call(t[0])&&(t=t[0]),t.unshift(i),t.join(".")},ft="/",at=p("/",!1),lt=function(i,t){return t&&t[0]&&"[object Array]"===Object.prototype.toString.call(t[0])&&(t=t[0]),t?"/"+i+t:"/"+i},nt=function(i,t){return t?i+t:i},X=",",U=p(",",!1),ct=function(i){return i},H="(",J=p("(",!1),B=")",z=p(")",!1),ot=function(i,t){return t?(t.unshift(i),t):[i]},ut=function(i){return i},Dr="$filter=",pt=p("$filter=",!1),Fr={type:"any"},gt=function(){return{error:"invalid $filter parameter"}},pe="and",Ir=p("and",!1),ge="or",jr=p("or",!1),vt=function(i,t,a){return{type:t,value:a}},ht=function(i,t){return t?{type:t.type,left:i,right:t.value}:i},Mr="substringof",$t=p("substringof",!1),Or="endswith",dt=p("endswith",!1),Rr="startswith",mt=p("startswith",!1),Lr="IsOf",yt=p("IsOf",!1),Ct=function(i,t,a){return{type:"functioncall",func:i,args:[t,a]}},Vr="IsOf(",At=p("IsOf(",!1),bt=function(i){return{type:"functioncall",func:"IsOf",args:[i]}},Zr="tolower",Pt=p("tolower",!1),Qr="toupper",Tt=p("toupper",!1),Br="trim",wt=p("trim",!1),zr="length",Et=p("length",!1),Gr="year",xt=p("year",!1),qr="month",St=p("month",!1),Xr="day",Nt=p("day",!1),Ur="hour",Dt=p("hour",!1),Hr="minute",Ft=p("minute",!1),Jr="second",It=p("second",!1),Wr="round",jt=p("round",!1),Kr="floor",Mt=p("floor",!1),Yr="ceiling",Ot=p("ceiling",!1),Rt=function(i,t){return{type:"functioncall",func:i,args:[t]}},kr="indexof",Lt=p("indexof",!1),_r="concat",Vt=p("concat",!1),es="substring",Zt=p("substring",!1),rs="replace",Qt=p("replace",!1),Bt=function(i,t,a){return{type:"functioncall",func:i,args:[t,a]}},ss="substring(",zt=p("substring(",!1),Gt=function(i,t,a){return{type:"functioncall",func:"substring",args:[i,t,a]}},is="replace(",qt=p("replace(",!1),Xt=function(i,t,a){return{type:"functioncall",func:"replace",args:[i,t,a]}},ts="in",Ut=p("in",!1),Ht=function(i,t){return{type:"in",left:i,right:{type:"collection",values:t}}},Jt=function(i,t,a){return{type:t,left:i,right:a}},Wt=function(i,t){return(0,E.pi)({type:"literal",value:i},!!t&&{numericType:t})},Kt=function(i){return{type:"property",name:i}},fs="eq",Yt=p("eq",!1),as="ne",kt=p("ne",!1),ls="lt",_t=p("lt",!1),ns="le",ef=p("le",!1),cs="gt",rf=p("gt",!1),os="ge",sf=p("ge",!1),us="add",tf=p("add",!1),ps="sub",ff=p("sub",!1),gs="mul",af=p("mul",!1),vs="div",lf=p("div",!1),hs="mod",nf=p("mod",!1),s=0,ve=[{line:1,column:1}],O=0,De=[],n=0;if(void 0!==c.startRule){if(!(c.startRule in g))throw new Error("Can't start parsing from rule \""+c.startRule+'".');y=g[c.startRule]}function p(e,i){return{type:"literal",text:e,ignoreCase:i}}function R(e,i,t){return{type:"class",parts:e,inverted:i,ignoreCase:t}}function $s(e){var t,i=ve[e];if(i)return i;for(t=e-1;!ve[t];)t--;for(i={line:(i=ve[t]).line,column:i.column};t<e;)10===f.charCodeAt(t)?(i.line++,i.column=1):i.column++,t++;return ve[e]=i,i}function l(e){s<O||(s>O&&(O=s,De=[]),De.push(e))}function ms(){return function(){var e,i,t,a;if(e=s,(i=Ce())!==r&&(i=ut(i)),(e=i)===r)if(e=s,f.substr(s,8)===Dr?(i=Dr,s+=8):(i=r,0===n&&l(pt)),i!==r){for(t=[],f.length>s?(a=f.charAt(s),s++):(a=r,0===n&&l(Fr));a!==r;)t.push(a),f.length>s?(a=f.charAt(s),s++):(a=r,0===n&&l(Fr));t!==r?e=i=gt():(s=e,e=r)}else s=e,e=r;return e}()}function T(){var e;return 32===f.charCodeAt(s)?(e=C,s++):(e=r,0===n&&l(A)),e}function $(){var e;return V.test(f.charAt(s))?(e=f.charAt(s),s++):(e=r,0===n&&l(re)),e}function $e(){var e;return P.test(f.charAt(s))?(e=f.charAt(s),s++):(e=r,0===n&&l(b)),e}function ys(){var e,i,t;return e=s,(i=$e())!==r&&(t=$e())!==r?e=i=[i,t]:(s=e,e=r),e}function de(){var e,i,t;return e=s,(i=ys())!==r&&(t=ys())!==r?e=i=[i,t]:(s=e,e=r),e}function Fe(){var e,i,t;return e=s,(i=de())!==r&&(t=Fe())!==r?e=i=[i,t]:(s=e,e=r),e}function j(){var e;return f.substr(s,4)===N?(e=N,s+=4):(e=r,0===n&&l(Y)),e===r&&(39===f.charCodeAt(s)?(e=Pe,s++):(e=r,0===n&&l(Te))),e}function Ie(){var e,i;return e=function(){var e,i,t,a,o,u;return e=s,f.substr(s,4)===Je?(i=Je,s+=4):(i=r,0===n&&l(ti)),i!==r?(t=s,39===f.charCodeAt(s)?(a=Pe,s++):(a=r,0===n&&l(Te)),a!==r&&(o=Me())!==r?(39===f.charCodeAt(s)?(u=Pe,s++):(u=r,0===n&&l(Te)),u!==r?t=a=[a,o,u]:(s=t,t=r)):(s=t,t=r),t===r&&(t=null),t!==r?e=i=[i,t]:(s=e,e=r)):(s=e,e=r),e}(),e===r&&(e=function(){var e,i,t,a,o,u;return e=s,f.substr(s,4)===We?(i=We,s+=4):(i=r,0===n&&l(fi)),i===r&&(f.substr(s,6)===Ke?(i=Ke,s+=6):(i=r,0===n&&l(ai))),i!==r&&(t=j())!==r&&(a=$e())!==r&&(o=$e())!==r&&(u=j())!==r?e=i=[i,t,a,o,u]:(s=e,e=r),e}(),e===r&&(e=function(){var e,i,a;return e=s,f.substr(s,8)===fr?(i=fr,s+=8):(i=r,0===n&&l(oi)),i!==r&&j()!==r&&(a=me())!==r&&j()!==r?e=i=we(a):(s=e,e=r),e}(),e===r&&(e=function(){var e,i,a;return e=s,(i=bs())!==r&&(i=we(i)),(e=i)===r&&(e=s,f.substr(s,14)===ar?(i=ar,s+=14):(i=r,0===n&&l(ui)),i!==r&&j()!==r&&(a=bs())!==r&&j()!==r?e=i=we(a):(s=e,e=r)),e}(),e===r&&(e=function(){var e,i,t,a,o,u;return e=s,(i=Ts())!==r?(45===f.charCodeAt(s)?(t=Z,s++):(t=r,0===n&&l(Q)),t!==r&&(a=ye())!==r?(45===f.charCodeAt(s)?(o=Z,s++):(o=r,0===n&&l(Q)),o!==r&&(u=Ps())!==r?e=i=ci(i,a,u):(s=e,e=r)):(s=e,e=r)):(s=e,e=r),e}(),e===r&&(e=function(){var e,i,t,a,o,u,v,m,h,w,D,Oe;return e=s,f.substr(s,4)===dr?(i=dr,s+=4):(i=r,0===n&&l(Pi)),i!==r&&(t=j())!==r&&(a=Fe())!==r?(45===f.charCodeAt(s)?(o=Z,s++):(o=r,0===n&&l(Q)),o!==r&&(u=de())!==r?(45===f.charCodeAt(s)?(v=Z,s++):(v=r,0===n&&l(Q)),v!==r&&(m=de())!==r?(45===f.charCodeAt(s)?(h=Z,s++):(h=r,0===n&&l(Q)),h!==r&&(w=Fe())!==r&&(D=de())!==r&&(Oe=j())!==r?e=i=[i,t,a,o,u,v,m,h,w,D,Oe]:(s=e,e=r)):(s=e,e=r)):(s=e,e=r)):(s=e,e=r),e}(),i=L.float,e===r&&(e=function(){var e,i,t,a,o,u,v,m,h;if(e=s,(i=x())===r&&(i=null),i!==r)if((t=$())!==r)if(46===f.charCodeAt(s)?(a=G,s++):(a=r,0===n&&l(q)),a!==r){if(o=[],(u=$())!==r)for(;u!==r;)o.push(u),u=$();else o=r;if(o!==r)if(101===f.charCodeAt(s)?(u=pr,s++):(u=r,0===n&&l(gr)),u===r&&(69===f.charCodeAt(s)?(u=vr,s++):(u=r,0===n&&l(hr))),u!==r)if((v=x())===r&&(v=null),v!==r){if(m=[],(h=$())!==r)for(;h!==r;)m.push(h),h=$();else m=r;m!==r?(70===f.charCodeAt(s)?(h=le,s++):(h=r,0===n&&l(ne)),h===r&&(102===f.charCodeAt(s)?(h=ce,s++):(h=r,0===n&&l(oe))),h!==r?e=i=$r(i,t,o,v,m):(s=e,e=r)):(s=e,e=r)}else s=e,e=r;else s=e,e=r;else s=e,e=r}else s=e,e=r;else s=e,e=r;else s=e,e=r;if(e===r){if(e=s,(i=x())===r&&(i=null),i!==r){for(t=[],a=$();a!==r;)t.push(a),a=$();if(t!==r)if(46===f.charCodeAt(s)?(a=G,s++):(a=r,0===n&&l(q)),a!==r){if(o=[],(u=$())!==r)for(;u!==r;)o.push(u),u=$();else o=r;o!==r?(70===f.charCodeAt(s)?(u=le,s++):(u=r,0===n&&l(ne)),u===r&&(102===f.charCodeAt(s)?(u=ce,s++):(u=r,0===n&&l(oe))),u!==r?e=i=Se(i,t,o):(s=e,e=r)):(s=e,e=r)}else s=e,e=r;else s=e,e=r}else s=e,e=r;if(e===r){if(e=s,(i=x())===r&&(i=null),i!==r){if(t=[],(a=$())!==r)for(;a!==r;)t.push(a),a=$();else t=r;t!==r?(70===f.charCodeAt(s)?(a=le,s++):(a=r,0===n&&l(ne)),a===r&&(102===f.charCodeAt(s)?(a=ce,s++):(a=r,0===n&&l(oe))),a!==r?e=i=Ne(i,t):(s=e,e=r)):(s=e,e=r)}else s=e,e=r;e===r&&(e=s,(i=ws())!==r?(70===f.charCodeAt(s)?(t=le,s++):(t=r,0===n&&l(ne)),t===r&&(102===f.charCodeAt(s)?(t=ce,s++):(t=r,0===n&&l(oe))),t!==r?e=i=[i,t]:(s=e,e=r)):(s=e,e=r))}}return e}(),e===r&&(e=function(){var e,i,t,a,o,u;if(e=s,(i=x())===r&&(i=null),i!==r){if(t=[],(a=$())!==r)for(;a!==r;)t.push(a),a=$();else t=r;if(t!==r)if(46===f.charCodeAt(s)?(a=G,s++):(a=r,0===n&&l(q)),a!==r){if(o=[],(u=$())!==r)for(;u!==r;)o.push(u),u=$();else o=r;o!==r?(77===f.charCodeAt(s)?(u=nr,s++):(u=r,0===n&&l(cr)),u===r&&(109===f.charCodeAt(s)?(u=or,s++):(u=r,0===n&&l(ur))),u!==r?e=i=Se(i,t,o):(s=e,e=r)):(s=e,e=r)}else s=e,e=r;else s=e,e=r}else s=e,e=r;if(e===r)if(e=s,(i=x())===r&&(i=null),i!==r){if(t=[],(a=$())!==r)for(;a!==r;)t.push(a),a=$();else t=r;t!==r?(77===f.charCodeAt(s)?(a=nr,s++):(a=r,0===n&&l(cr)),a===r&&(109===f.charCodeAt(s)?(a=or,s++):(a=r,0===n&&l(ur))),a!==r?e=i=Ne(i,t):(s=e,e=r)):(s=e,e=r)}else s=e,e=r;return e}(),i=L.decimal,e===r&&(e=function(){var e,i,t,a,o,u,v,m,h;if(e=s,(i=x())===r&&(i=null),i!==r)if((t=$())!==r)if(46===f.charCodeAt(s)?(a=G,s++):(a=r,0===n&&l(q)),a!==r){if(o=[],(u=$())!==r)for(;u!==r;)o.push(u),u=$();else o=r;if(o!==r)if(101===f.charCodeAt(s)?(u=pr,s++):(u=r,0===n&&l(gr)),u===r&&(69===f.charCodeAt(s)?(u=vr,s++):(u=r,0===n&&l(hr))),u!==r)if((v=x())===r&&(v=null),v!==r){if(m=[],(h=$())!==r)for(;h!==r;)m.push(h),h=$();else m=r;m!==r?(68===f.charCodeAt(s)?(h=ie,s++):(h=r,0===n&&l(te)),h===r&&(100===f.charCodeAt(s)?(h=fe,s++):(h=r,0===n&&l(ae))),h===r&&(h=null),h!==r?e=i=$r(i,t,o,v,m):(s=e,e=r)):(s=e,e=r)}else s=e,e=r;else s=e,e=r;else s=e,e=r}else s=e,e=r;else s=e,e=r;else s=e,e=r;if(e===r){if(e=s,(i=x())===r&&(i=null),i!==r){if(t=[],(a=$())!==r)for(;a!==r;)t.push(a),a=$();else t=r;if(t!==r)if(46===f.charCodeAt(s)?(a=G,s++):(a=r,0===n&&l(q)),a!==r){if(o=[],(u=$())!==r)for(;u!==r;)o.push(u),u=$();else o=r;o!==r?(68===f.charCodeAt(s)?(u=ie,s++):(u=r,0===n&&l(te)),u===r&&(100===f.charCodeAt(s)?(u=fe,s++):(u=r,0===n&&l(ae))),u===r&&(u=null),u!==r?e=i=Se(i,t,o):(s=e,e=r)):(s=e,e=r)}else s=e,e=r;else s=e,e=r}else s=e,e=r;if(e===r){if(e=s,(i=x())===r&&(i=null),i!==r){if(t=[],(a=$())!==r)for(;a!==r;)t.push(a),a=$();else t=r;t!==r?(68===f.charCodeAt(s)?(a=ie,s++):(a=r,0===n&&l(te)),a===r&&(100===f.charCodeAt(s)?(a=fe,s++):(a=r,0===n&&l(ae))),a!==r?e=i=Ne(i,t):(s=e,e=r)):(s=e,e=r)}else s=e,e=r;e===r&&(e=s,(i=ws())!==r?(68===f.charCodeAt(s)?(t=ie,s++):(t=r,0===n&&l(te)),t===r&&(100===f.charCodeAt(s)?(t=fe,s++):(t=r,0===n&&l(ae))),t===r&&(t=null),t!==r?e=i=[i,t]:(s=e,e=r)):(s=e,e=r))}}return e}(),i=L.double,e===r&&(e=function(){var e,i,t,a;if(e=s,(i=x())===r&&(i=null),i!==r){if(t=[],(a=$())!==r)for(;a!==r;)t.push(a),a=$();else t=r;t!==r?(76===f.charCodeAt(s)?(a=wi,s++):(a=r,0===n&&l(Ei)),a===r&&(108===f.charCodeAt(s)?(a=xi,s++):(a=r,0===n&&l(Si))),a===r&&(a=null),a!==r?e=i=Ni(i,t):(s=e,e=r)):(s=e,e=r)}else s=e,e=r;return e}(),i=L.integer,e===r&&(e=function(){var e,i,t,a;if(e=s,(i=x())===r&&(i=null),i!==r){if(t=[],(a=$())!==r)for(;a!==r;)t.push(a),a=$();else t=r;t!==r?e=i=Ti(i,t):(s=e,e=r)}else s=e,e=r;return e}(),e===r&&(e=function(){var e,i,t,a;return e=s,(i=$())!==r&&(t=$())!==r&&(a=$())!==r?e=i=[i,t,a]:(s=e,e=r),e}(),e===r&&(e=function(){var e,i,t,a,o;return e=s,(i=x())===r&&(i=null),i!==r&&(t=$())!==r?((a=$())===r&&(a=null),a!==r?((o=$())===r&&(o=null),o!==r?e=i=[i,t,a,o]:(s=e,e=r)):(s=e,e=r)):(s=e,e=r),e}(),e===r&&(e=function(){var e,i;return e=s,f.substr(s,4)===Ye?(i=Ye,s+=4):(i=r,0===n&&l(li)),i!==r&&(i=ke()),(e=i)===r&&(e=s,49===f.charCodeAt(s)?(i=_e,s++):(i=r,0===n&&l(er)),i!==r&&(i=ke()),(e=i)===r&&(e=s,f.substr(s,5)===rr?(i=rr,s+=5):(i=r,0===n&&l(ni)),i!==r&&(i=sr()),(e=i)===r&&(e=s,48===f.charCodeAt(s)?(i=ir,s++):(i=r,0===n&&l(tr)),i!==r&&(i=sr()),e=i))),e}(),i=void 0,e===r&&(e=function(){var e,i,t,a;return e=s,(i=j())!==r&&(t=function(){var i,t;for(s,i=[],t=Es();t!==r;)i.push(t),t=Es();return i!==r&&(i=I(i)),i}())!==r&&(a=j())!==r?e=i=Di(i,t,a):(s=e,e=r),e}())))))))))))))),(0,E.pi)({value:e},!!i&&{numericType:i})}function Cs(){var e,i,t,a,o,u,v,m,h,w;return e=s,(i=Ts())!==r?(45===f.charCodeAt(s)?(t=Z,s++):(t=r,0===n&&l(Q)),t!==r&&(a=ye())!==r?(45===f.charCodeAt(s)?(o=Z,s++):(o=r,0===n&&l(Q)),o!==r&&(u=Ps())!==r?(84===f.charCodeAt(s)?(v=pi,s++):(v=r,0===n&&l(gi)),v!==r?(m=function(){var e,i,t;return e=s,50===f.charCodeAt(s)?(i=Bi,s++):(i=r,0===n&&l(zi)),i!==r?(Gi.test(f.charAt(s))?(t=f.charAt(s),s++):(t=r,0===n&&l(qi)),t!==r?e=i=Xi(t):(s=e,e=r)):(s=e,e=r),e===r&&(e=s,br.test(f.charAt(s))?(i=f.charAt(s),s++):(i=r,0===n&&l(Pr)),i!==r?(t=$())!==r?e=i=ue(i,t):(s=e,e=r):(s=e,e=r)),e}(),m!==r?(58===f.charCodeAt(s)?(h=Ee,s++):(h=r,0===n&&l(xe)),h!==r&&(w=je())!==r?e=i=vi(i,a,u,m,w):(s=e,e=r)):(s=e,e=r)):(s=e,e=r)):(s=e,e=r)):(s=e,e=r)):(s=e,e=r),e}function As(){var e,i,t,a;return e=s,(i=Cs())!==r?(58===f.charCodeAt(s)?(t=Ee,s++):(t=r,0===n&&l(xe)),t!==r&&(a=je())!==r?e=i=hi(i,a):(s=e,e=r)):(s=e,e=r),e}function me(){var e;return(e=function(){var e,i,t,a;return e=s,(i=As())!==r?(46===f.charCodeAt(s)?(t=G,s++):(t=r,0===n&&l(q)),t!==r?(a=function(){var i,t;if(i=[],(t=$())!==r)for(;t!==r;)i.push(t),t=$();else i=r;return i!==r&&(i=I(i)),i}(),a!==r?e=i=$i(i,a):(s=e,e=r)):(s=e,e=r)):(s=e,e=r),e}())===r&&(e=As())===r&&(e=Cs()),e}function bs(){var e,i,t,a,o,u;return e=s,(i=me())!==r?(90===f.charCodeAt(s)?(t=di,s++):(t=r,0===n&&l(mi)),t!==r?e=i=yi(i):(s=e,e=r)):(s=e,e=r),e===r&&(e=s,(i=me())!==r&&(t=x())!==r&&(a=ye())!==r?(58===f.charCodeAt(s)?(o=Ee,s++):(o=r,0===n&&l(xe)),o!==r&&(u=je())!==r?e=i=Ci(i,t,a,u):(s=e,e=r)):(s=e,e=r),e===r&&(e=s,(i=me())!==r&&(t=x())!==r?(a=function(){var e;return(e=ye())===r&&(f.substr(s,2)===Cr?(e=Cr,s+=2):(e=r,0===n&&l(Mi))),e}(),a!==r?(f.substr(s,3)===lr?(o=lr,s+=3):(o=r,0===n&&l(Ai)),o===r&&(o=null),o!==r?e=i=bi(i,t,a):(s=e,e=r)):(s=e,e=r)):(s=e,e=r))),e}function ye(){var e,i,t;return e=s,48===f.charCodeAt(s)?(i=ir,s++):(i=r,0===n&&l(tr)),i!==r?(Fi.test(f.charAt(s))?(t=f.charAt(s),s++):(t=r,0===n&&l(Ii)),t!==r?e=i=ji(i,t):(s=e,e=r)):(s=e,e=r),e===r&&(e=s,49===f.charCodeAt(s)?(i=_e,s++):(i=r,0===n&&l(er)),i!==r?(mr.test(f.charAt(s))?(t=f.charAt(s),s++):(t=r,0===n&&l(yr)),t!==r?e=i=ue(i,t):(s=e,e=r)):(s=e,e=r)),e}function je(){var e,i,t;return f.substr(s,2)===Ar?(e=Ar,s+=2):(e=r,0===n&&l(Oi)),e===r&&(e=s,Ri.test(f.charAt(s))?(i=f.charAt(s),s++):(i=r,0===n&&l(Li)),i!==r&&(t=$())!==r?e=i=ue(i,t):(s=e,e=r)),e}function Ps(){var e,i,t;return e=s,51===f.charCodeAt(s)?(i=Vi,s++):(i=r,0===n&&l(Zi)),i!==r?(br.test(f.charAt(s))?(t=f.charAt(s),s++):(t=r,0===n&&l(Pr)),t!==r?e=i=Qi(t):(s=e,e=r)):(s=e,e=r),e===r&&(e=s,mr.test(f.charAt(s))?(i=f.charAt(s),s++):(i=r,0===n&&l(yr)),i!==r&&(t=$())!==r?e=i=ue(i,t):(s=e,e=r)),e}function Ts(){var e,i,t,a,o;return e=s,(i=$())!==r&&(t=$())!==r&&(a=$())!==r&&(o=$())!==r?e=i=Ui(i,t,a,o):(s=e,e=r),e}function x(){var e;return 43===f.charCodeAt(s)?(e=Hi,s++):(e=r,0===n&&l(Ji)),e===r&&(45===f.charCodeAt(s)?(e=Z,s++):(e=r,0===n&&l(Q))),e}function ws(){var e;return(e=function(){var e;return f.substr(s,3)===Tr?(e=Tr,s+=3):(e=r,0===n&&l(Wi)),e}())===r&&(e=function(){var e;return f.substr(s,4)===wr?(e=wr,s+=4):(e=r,0===n&&l(Ki)),e}())===r&&(e=function(){var e;return f.substr(s,3)===Er?(e=Er,s+=3):(e=r,0===n&&l(Yi)),e}()),e}function Es(){var e,i;return e=s,ki.test(f.charAt(s))?(i=f.charAt(s),s++):(i=r,0===n&&l(_i)),i!==r&&(i=xr(i)),(e=i)===r&&(e=s,i=function(){var e;return e=s,j()!==r&&j()!==r?e=ii():(s=e,e=r),e}(),i!==r&&(i=xr(i)),e=i),e}function xs(){var e,i,t;return e=s,et.test(f.charAt(s))?(i=f.charAt(s),s++):(i=r,0===n&&l(rt)),i!==r?(t=function(){var i,t;if(i=[],Sr.test(f.charAt(s))?(t=f.charAt(s),s++):(t=r,0===n&&l(Nr)),t!==r)for(;t!==r;)i.push(t),Sr.test(f.charAt(s))?(t=f.charAt(s),s++):(t=r,0===n&&l(Nr));else i=r;return i!==r&&(i=I(i)),i}(),t!==r?e=i=st(i,t):(s=e,e=r)):(s=e,e=r),e}function Me(){var e,i,t,a,o;return e=s,(i=xs())!==r?(t=s,46===f.charCodeAt(s)?(a=G,s++):(a=r,0===n&&l(q)),a!==r&&(o=Me())!==r?t=a=it(i,o):(s=t,t=r),t===r&&(t=null),t!==r?e=i=tt(i,t):(s=e,e=r)):(s=e,e=r),e}function Ss(){var e,i,t,a;return e=s,47===f.charCodeAt(s)?(i=ft,s++):(i=r,0===n&&l(at)),i!==r&&(t=xs())!==r?((a=Ss())===r&&(a=null),a!==r?e=i=lt(t,a):(s=e,e=r)):(s=e,e=r),e}function Lf(){var e,i,t;return e=s,(i=Me())!==r?((t=Ss())===r&&(t=null),t!==r?e=i=nt(i,t):(s=e,e=r)):(s=e,e=r),e}function Ns(){var e,i,t,a,o;return e=s,44===f.charCodeAt(s)?(i=X,s++):(i=r,0===n&&l(U)),i!==r?((t=T())===r&&(t=null),t!==r&&(a=Ie()).value!==r?((o=T())===r&&(o=null),o!==r?e=i=ct(a):(s=e,e=r)):(s=e,e=r)):(s=e,e=r),e}function Ce(){var e,i,t,a,o,u,v,m,h,w,D;return e=s,40===f.charCodeAt(s)?(i=H,s++):(i=r,0===n&&l(J)),i!==r?((t=T())===r&&(t=null),t!==r&&(a=Ce())!==r?((o=T())===r&&(o=null),o!==r?(41===f.charCodeAt(s)?(u=B,s++):(u=r,0===n&&l(z)),u!==r?(v=s,(m=T())!==r?(f.substr(s,3)===pe?(h=pe,s+=3):(h=r,0===n&&l(Ir)),h===r&&(f.substr(s,2)===ge?(h=ge,s+=2):(h=r,0===n&&l(jr))),h!==r&&(w=T())!==r&&(D=Ce())!==r?v=m=[m,h,w,D]:(s=v,v=r)):(s=v,v=r),v===r&&(v=null),v!==r?e=i=[i,t,a,o,u,v]:(s=e,e=r)):(s=e,e=r)):(s=e,e=r)):(s=e,e=r)):(s=e,e=r),e===r&&(e=s,i=function(){var e,i,a,u;return e=s,(i=S())!==r?T()!==r?(a=function(){var e;return f.substr(s,2)===fs?(e=fs,s+=2):(e=r,0===n&&l(Yt)),e===r&&(f.substr(s,2)===as?(e=as,s+=2):(e=r,0===n&&l(kt)),e===r&&(f.substr(s,2)===ls?(e=ls,s+=2):(e=r,0===n&&l(_t)),e===r&&(f.substr(s,2)===ns?(e=ns,s+=2):(e=r,0===n&&l(ef)),e===r&&(f.substr(s,2)===cs?(e=cs,s+=2):(e=r,0===n&&l(rf)),e===r&&(f.substr(s,2)===os?(e=os,s+=2):(e=r,0===n&&l(sf)),e===r&&(f.substr(s,3)===us?(e=us,s+=3):(e=r,0===n&&l(tf)),e===r&&(f.substr(s,3)===ps?(e=ps,s+=3):(e=r,0===n&&l(ff)),e===r&&(f.substr(s,3)===gs?(e=gs,s+=3):(e=r,0===n&&l(af)),e===r&&(f.substr(s,3)===vs?(e=vs,s+=3):(e=r,0===n&&l(lf)),e===r&&(f.substr(s,3)===hs?(e=hs,s+=3):(e=r,0===n&&l(nf)))))))))))),e}(),a!==r?T()!==r?(u=S())!==r?e=i=Jt(i,a,u):(s=e,e=r):(s=e,e=r):(s=e,e=r)):(s=e,e=r):(s=e,e=r),e===r&&(e=function(){var e,i,a,u;return e=s,(i=S())!==r?T()!==r?(f.substr(s,2)===ts?(a=ts,s+=2):(a=r,0===n&&l(Ut)),a!==r?T()!==r?(u=function(){var e,i,t,a,o;if(e=s,40===f.charCodeAt(s)?(i=H,s++):(i=r,0===n&&l(J)),i!==r)if((t=Ie()).value!==r){for(a=[],o=Ns();o!==r;)a.push(o),o=Ns();a!==r?(41===f.charCodeAt(s)?(o=B,s++):(o=r,0===n&&l(z)),o!==r?e=i=ot(t,a):(s=e,e=r)):(s=e,e=r)}else s=e,e=r;else s=e,e=r;return e}(),u!==r?e=i=Ht(i,u):(s=e,e=r)):(s=e,e=r):(s=e,e=r)):(s=e,e=r):(s=e,e=r),e}(),e===r&&(e=Ds())),e}(),i!==r?(t=s,(a=T())!==r?(f.substr(s,3)===pe?(o=pe,s+=3):(o=r,0===n&&l(Ir)),o===r&&(f.substr(s,2)===ge?(o=ge,s+=2):(o=r,0===n&&l(jr))),o!==r&&(u=T())!==r&&(v=Ce())!==r?t=a=vt(i,o,v):(s=t,t=r)):(s=t,t=r),t===r&&(t=null),t!==r?e=i=ht(i,t):(s=e,e=r)):(s=e,e=r)),e}function Ds(){var e,i,t,a,o,u,v,m;return e=s,i=function(){var e;return f.substr(s,11)===Mr?(e=Mr,s+=11):(e=r,0===n&&l($t)),e===r&&(f.substr(s,8)===Or?(e=Or,s+=8):(e=r,0===n&&l(dt)),e===r&&(f.substr(s,10)===Rr?(e=Rr,s+=10):(e=r,0===n&&l(mt)),e===r&&(f.substr(s,4)===Lr?(e=Lr,s+=4):(e=r,0===n&&l(yt))))),e}(),i!==r?(40===f.charCodeAt(s)?(t=H,s++):(t=r,0===n&&l(J)),t!==r&&(a=S())!==r?(44===f.charCodeAt(s)?(o=X,s++):(o=r,0===n&&l(U)),o!==r?((u=T())===r&&(u=null),u!==r&&(v=S())!==r?(41===f.charCodeAt(s)?(m=B,s++):(m=r,0===n&&l(z)),m!==r?e=i=Ct(i,a,v):(s=e,e=r)):(s=e,e=r)):(s=e,e=r)):(s=e,e=r)):(s=e,e=r),e===r&&(e=s,f.substr(s,5)===Vr?(i=Vr,s+=5):(i=r,0===n&&l(At)),i!==r&&(t=S())!==r?(41===f.charCodeAt(s)?(a=B,s++):(a=r,0===n&&l(z)),a!==r?e=i=bt(t):(s=e,e=r)):(s=e,e=r)),e}function S(){var e,i;if((e=Ds())===r&&(e=function(){var e,i,t,a,o,u,v,m,h,w,D;return e=s,i=function(){var e;return f.substr(s,7)===kr?(e=kr,s+=7):(e=r,0===n&&l(Lt)),e===r&&(f.substr(s,6)===_r?(e=_r,s+=6):(e=r,0===n&&l(Vt)),e===r&&(f.substr(s,9)===es?(e=es,s+=9):(e=r,0===n&&l(Zt)),e===r&&(f.substr(s,7)===rs?(e=rs,s+=7):(e=r,0===n&&l(Qt))))),e}(),i!==r?(40===f.charCodeAt(s)?(t=H,s++):(t=r,0===n&&l(J)),t!==r&&(a=S())!==r?(44===f.charCodeAt(s)?(o=X,s++):(o=r,0===n&&l(U)),o!==r?((u=T())===r&&(u=null),u!==r&&(v=S())!==r?(41===f.charCodeAt(s)?(m=B,s++):(m=r,0===n&&l(z)),m!==r?e=i=Bt(i,a,v):(s=e,e=r)):(s=e,e=r)):(s=e,e=r)):(s=e,e=r)):(s=e,e=r),e===r&&(e=s,f.substr(s,10)===ss?(i=ss,s+=10):(i=r,0===n&&l(zt)),i!==r?(40===f.charCodeAt(s)?(t=H,s++):(t=r,0===n&&l(J)),t!==r&&(a=S())!==r?(44===f.charCodeAt(s)?(o=X,s++):(o=r,0===n&&l(U)),o!==r?((u=T())===r&&(u=null),u!==r&&(v=S())!==r?(44===f.charCodeAt(s)?(m=X,s++):(m=r,0===n&&l(U)),m!==r?((h=T())===r&&(h=null),h!==r&&(w=S())!==r?(41===f.charCodeAt(s)?(D=B,s++):(D=r,0===n&&l(z)),D!==r?e=i=Gt(a,v,w):(s=e,e=r)):(s=e,e=r)):(s=e,e=r)):(s=e,e=r)):(s=e,e=r)):(s=e,e=r)):(s=e,e=r),e===r&&(e=s,f.substr(s,8)===is?(i=is,s+=8):(i=r,0===n&&l(qt)),i!==r?(40===f.charCodeAt(s)?(t=H,s++):(t=r,0===n&&l(J)),t!==r&&(a=S())!==r?(44===f.charCodeAt(s)?(o=X,s++):(o=r,0===n&&l(U)),o!==r?((u=T())===r&&(u=null),u!==r&&(v=S())!==r?(44===f.charCodeAt(s)?(m=X,s++):(m=r,0===n&&l(U)),m!==r?((h=T())===r&&(h=null),h!==r&&(w=S())!==r?(41===f.charCodeAt(s)?(D=B,s++):(D=r,0===n&&l(z)),D!==r?e=i=Xt(a,v,w):(s=e,e=r)):(s=e,e=r)):(s=e,e=r)):(s=e,e=r)):(s=e,e=r)):(s=e,e=r)):(s=e,e=r))),e}())===r&&(e=function(){var e,i,t,a,o;return e=s,i=function(){var e;return f.substr(s,7)===Zr?(e=Zr,s+=7):(e=r,0===n&&l(Pt)),e===r&&(f.substr(s,7)===Qr?(e=Qr,s+=7):(e=r,0===n&&l(Tt)),e===r&&(f.substr(s,4)===Br?(e=Br,s+=4):(e=r,0===n&&l(wt)),e===r&&(f.substr(s,6)===zr?(e=zr,s+=6):(e=r,0===n&&l(Et)),e===r&&(f.substr(s,4)===Gr?(e=Gr,s+=4):(e=r,0===n&&l(xt)),e===r&&(f.substr(s,5)===qr?(e=qr,s+=5):(e=r,0===n&&l(St)),e===r&&(f.substr(s,3)===Xr?(e=Xr,s+=3):(e=r,0===n&&l(Nt)),e===r&&(f.substr(s,4)===Ur?(e=Ur,s+=4):(e=r,0===n&&l(Dt)),e===r&&(f.substr(s,6)===Hr?(e=Hr,s+=6):(e=r,0===n&&l(Ft)),e===r&&(f.substr(s,6)===Jr?(e=Jr,s+=6):(e=r,0===n&&l(It)),e===r&&(f.substr(s,5)===Wr?(e=Wr,s+=5):(e=r,0===n&&l(jt)),e===r&&(f.substr(s,5)===Kr?(e=Kr,s+=5):(e=r,0===n&&l(Mt)),e===r&&(f.substr(s,7)===Yr?(e=Yr,s+=7):(e=r,0===n&&l(Ot)))))))))))))),e}(),i!==r?(40===f.charCodeAt(s)?(t=H,s++):(t=r,0===n&&l(J)),t!==r&&(a=S())!==r?(41===f.charCodeAt(s)?(o=B,s++):(o=r,0===n&&l(z)),o!==r?e=i=Rt(i,a):(s=e,e=r)):(s=e,e=r)):(s=e,e=r),e}())===r){e=s;var t=Ie();(i=t.value)!==r&&(i=Wt(i,t.numericType)),(e=i)===r&&(e=s,(i=Lf())!==r&&(i=Kt(i)),e=i)}return e}if((he=y())!==r&&s===f.length)return he;throw he!==r&&s<f.length&&l({type:"end"}),e=De,i=O<f.length?f.charAt(O):null,t=function(e,i){var t=$s(e),a=$s(i);return{start:{offset:e,line:t.line,column:t.column},end:{offset:i,line:a.line,column:a.column}}}(O,O<f.length?O+1:O),new Qe(Qe.buildMessage(e,i),e,i,t)},Rs=M(80366),Ls=M(95462),F=M(94419),Vs=M(62458),Zs=/_[xX]([0-9a-fA-F]{4})_/g;function Qs(f){return new Bs(f||{})}function Be(f){return f.replace(Zs,function(c,r){return String.fromCharCode(parseInt(r,16))})}var Bs=function(){function f(c){this.predicateDepth=0,this.maxPredicatesCount=c.maxPredicatesCount||10,this.supportMultiplePredicates=c.supportMultiplePredicates,this.supportNumericalPredicates=c.supportNumericalPredicates,this.supportComparisonPredicates=c.supportComparisonPredicates,this.supportDatePredicates=c.supportDatePredicates,this.supportNonAsciiCharacters=c.supportNonAsciiCharacters,this.supportInPredicates=c.supportInPredicates}return f.prototype.getFilters=function(c){if(!c)throw{name:"OdataFilterParserInputIsNullOrEmpty",message:"The input for the OData filter parser can not be null or empty."};var r=decodeURIComponent(c),g=ze(Os(r));this.predicateDepth=0;var y=this.filterNodeToSemanticFilters(g);return _.map(y,function(C){return{name:null,howCreated:7,filter:C}})},f.prototype.filterNodeToSemanticFilters=function(c){if(this.predicateDepth++,this.predicateDepth>this.maxPredicatesCount)throw function(f){return{name:"MultipleExpressionsExceededLimit",message:"Multiple expressions in additional Odata filters exceeded the limit: "+f}}(this.maxPredicatesCount);if(c instanceof qe){var r=c,g=this.buildSemanticFilter(r.getFilterOperator(),r.getProperty(),r.getConstant());return this.predicateDepth--,[g]}if(c instanceof Xe){if(!this.supportMultiplePredicates)throw Ue(c.getType());var y=this.filterTreeToSemanticFilters(c);return this.predicateDepth--,y}throw function(f){return{name:"UnexpectedRootODataFilterNode",message:"Invalid OData filter node type at the root: "+f}}(c.getType())},f.prototype.filterTreeToSemanticFilters=function(c){if(c.getExpressionOperator()===Ae.and){var g=this.filterNodeToSemanticFilters(c.getLeft()),y=this.filterNodeToSemanticFilters(c.getRight());return(0,E.ev)((0,E.ev)([],g||[],!0),y||[],!0)}throw Ue(c.getType())},f.prototype.buildSemanticFilter=function(c,r,g){var y=(0,Rs.og)({column:{schema:void 0,entity:r.getEntity(this.supportNonAsciiCharacters),name:r.getColumn(this.supportNonAsciiCharacters)}}),C=this.convertToSQExpr(c,y,g);return Ls.yl.fromSQExpr(C)},f.prototype.buildSQConstantExpr=function(c){var r=c.value;if(!this.supportNumericalPredicates||!_.isNumber(r)){if(this.supportDatePredicates&&_.isDate(r))return(0,F.CQ)(r);if(_.isString(r))return(0,F.fL)(r);throw function(f,c,r){var g=["string"];return c&&g.push("number"),r&&g.push("date"),{name:"InvalidDataTypeForConstantExpression",message:'The data type of the value "'.concat(f,'" is not supported. Only the following types are supported: ').concat(JSON.stringify(g))}}(r,this.supportNumericalPredicates,this.supportDatePredicates)}var g=c.numericType;switch(Vs.fF.assertValue(g,"Parsed numeric values must have numericType defined"),g){case L.integer:return(0,F.cA)(r);case L.decimal:return(0,F.gH)(r);default:return(0,F.tx)(r)}},f.prototype.convertToSQExpr=function(c,r,g){if(this.validateOperatorIsEnabled(c),g.validateOperatorType(c),g.isCollection()){var y=g.getParsedValues();if(c===d.in){for(var C=[],A=0,V=y;A<V.length;A++)C.push([this.buildSQConstantExpr(V[A])]);return(0,F.Sh)([r],C)}throw be(y,c)}if(g.isPrimitiveLiteral()){var I=this.buildSQConstantExpr(g.getParsedValue());switch(c){case d.eq:return(0,F.qu)(0,r,I);case d.ge:return(0,F.qu)(2,r,I);case d.gt:return(0,F.qu)(1,r,I);case d.le:return(0,F.qu)(4,r,I);case d.lt:return(0,F.qu)(3,r,I);case d.ne:return(0,F.ff)((0,F.qu)(0,r,I));default:throw K(c)}}throw He(g.getType())},f.prototype.validateOperatorIsEnabled=function(c){switch(c){case d.eq:return;case d.ge:case d.gt:case d.le:case d.lt:if(!this.supportComparisonPredicates||!this.supportNumericalPredicates&&!this.supportDatePredicates)throw K(c);return;case d.ne:if(!this.supportComparisonPredicates)throw K(c);return;case d.in:if(!this.supportInPredicates)throw K(c);return;case d.add:case d.sub:case d.mul:case d.div:case d.mod:throw K(c);default:throw function(f){return{name:"UnableToConvertToQueryOperator",message:"Unable to convert the OData filter operator to a Query operator: "+d[f]}}(c)}},f}();function ze(f){var r=new k(f).getType(),g=se[r];if(g===se.property)return new zs(f);if(g===se.literal)return new Gs(f);if(g===se.collection)return new qs(f);if(void 0!==Ae[r])return new Xe(f);if(void 0!==d[r])return new qe(f);throw He(r)}var k=function(){function f(c){this.dictionary=c}return f.prototype.getType=function(){var c=this.dictionary[f.NodeType];return null!=c?c.toLowerCase():null},f.NodeType="type",f}(),Ge=function(f){function c(){return null!==f&&f.apply(this,arguments)||this}return(0,E.ZT)(c,f),c.prototype.getLeft=function(){return this.getNode(c.Left)},c.prototype.getRight=function(){return this.getNode(c.Right)},c.prototype.getNode=function(r){return ze(this.dictionary[r])},c.Left="left",c.Right="right",c}(k),qe=function(f){function c(){return null!==f&&f.apply(this,arguments)||this}return(0,E.ZT)(c,f),c.prototype.getProperty=function(){return this.getLeft()},c.prototype.getFilterOperator=function(){return d[this.getType()]},c.prototype.getConstant=function(){return this.getRight()},c}(Ge),Xe=function(f){function c(){return null!==f&&f.apply(this,arguments)||this}return(0,E.ZT)(c,f),c.prototype.getExpressionOperator=function(){return Ae[this.getType()]},c}(Ge),zs=function(f){function c(r){var g=f.call(this,r)||this,y=g.dictionary[c.Name],C=y.split("/");if(!C||2!==C.length)throw function(f){return{name:"PropertyMustContainEntityAndColumnName",message:"The property '"+f+"' must contain the entity name and the column name with the format 'EntityName/ColumnName'."}}(y);return g.entity=C[0],g.column=C[1],g}return(0,E.ZT)(c,f),c.prototype.getEntity=function(r){return r?Be(this.entity):this.entity},c.prototype.getColumn=function(r){return r?Be(this.column):this.column},c.Name="name",c}(k),Gs=function(f){function c(){return null!==f&&f.apply(this,arguments)||this}return(0,E.ZT)(c,f),c.prototype.getValue=function(){return this.dictionary[c.Value]},c.prototype.getNumericType=function(){return this.dictionary[c.NumericType]},c.prototype.getParsedValue=function(){return{value:this.getValue(),numericType:this.getNumericType()}},c.prototype.validateOperatorType=function(r){var g=this.getValue();switch(r){case d.eq:case d.ne:return;case d.ge:case d.gt:case d.le:case d.lt:if(!_.isNumber(g)&&!_.isDate(g))throw be(g,r);return;default:throw K(r)}},c.prototype.isPrimitiveLiteral=function(){return!0},c.prototype.isCollection=function(){return!1},c.Value="value",c.NumericType="numericType",c}(k),qs=function(f){function c(r){for(var g=f.call(this,r)||this,y=g.getValues(),C=1;C<y.length;C++)if(typeof y[0]!=typeof y[C])throw Hs(g,y[C]);return g}return(0,E.ZT)(c,f),c.prototype.getValues=function(){return this.dictionary[c.Values].map(function(r){return r.value})},c.prototype.getParsedValues=function(){return this.dictionary[c.Values]},c.prototype.validateOperatorType=function(r){if(r!==d.in)throw be(this.getValues(),r)},c.prototype.isPrimitiveLiteral=function(){return!1},c.prototype.isCollection=function(){return!0},c.Values="values",c}(k);function K(f){return{name:"NotSupportedODataOperator",message:"The OData operator '"+d[f]+"' is not supported."}}function Hs(f,c){return{name:"InvalidDataTypeForCollection",message:"The data type of the value ".concat(c," does not match the type of the other items in the collection: ").concat(f.getValues())}}function be(f,c){return{name:"InvalidDataTypeForOperator",message:"The data type of the value '"+f+"' is not supported by the '"+d[c]+"' operator."}}function Ue(f){return{name:"MultipleExpressionsAreNotSupported",message:"Multiple expressions are not allowed in additional Odata filters. The operator is invalid: "+f}}function He(f){return{name:"InvalidODataFilterNodeType",message:"Invalid OData filter node type: "+f}}var ks=M(46544),ee=M(50423),_s=M(9380),ei=/_[xX]([0-9a-fA-F]{4})_/g,ri=function(){function f(c,r){this.featureSwitchService=c,this.telemetryService=r}return f.prototype.getFeatureSwitchOptions=function(){return(0,E.mG)(this,void 0,void 0,function(){var c,r;return(0,E.Jh)(this,function(g){switch(g.label){case 0:return c={},[4,this.featureSwitchService.getFeatureSwitches()];case 1:return r=g.sent(),c.supportNumericalPredicates=!0,c.supportMultiplePredicates=!1!==r.multipleODataPredicates,c.supportComparisonPredicates=r.comparisonODataPredicates,c.supportDatePredicates=r.dateODataType,c.supportNonAsciiCharacters=r.nonAsciiODataNames,c.supportInPredicates=r.inODataPredicates,[2,c]}})})},f.prototype.tryGetFilters=function(c){return(0,E.mG)(this,void 0,void 0,function(){var r,g,y,C;return(0,E.Jh)(this,function(A){switch(A.label){case 0:return A.trys.push([0,2,,3]),g=Qs,[4,this.getFeatureSwitchOptions()];case 1:return r=g.apply(void 0,[A.sent()]),y=r.getFilters(c),this.logODataTelemetry(c),[2,y];case 2:return"SyntaxError"===(C=A.sent()).name?this.telemetryService.logEvent(Fs,{message:C.message}):this.telemetryService.logEvent(Is,{errorType:C.name}),[2,null];case 3:return[2]}})})},f.prototype.logODataTelemetry=function(c){var r=this.countOperator(c,d.eq),g=this.countOperator(c,[d.gt,d.lt,d.ge,d.le]),y=this.countOperator(c,d.ne),C=this.countOperator(c,d.in),A=this.countRegex(c,ei);this.telemetryService.logEvent(js,{eqCount:r,comparisonCount:g,neCount:y,inCount:C,nonAsciiCount:A})},f.prototype.countOperator=function(c,r){var g=_.countBy(_.words(c));if(_.isArray(r)){for(var y=0,C=0,A=r;C<A.length;C++)y+=g[d[A[C]]]||0;return y||void 0}return g[d[r]]||void 0},f.prototype.countRegex=function(c,r){return _.size((c||"").match(r)||[])||void 0},f.\u0275fac=function(r){return new(r||f)(ee.\u0275\u0275inject(_s.vZ),ee.\u0275\u0275inject(ks.y0))},f.\u0275prov=ee.\u0275\u0275defineInjectable({token:f,factory:f.\u0275fac,providedIn:"root"}),f}(),si=function(){function f(){}return f.\u0275fac=function(r){return new(r||f)},f.\u0275mod=ee.\u0275\u0275defineNgModule({type:f}),f.\u0275inj=ee.\u0275\u0275defineInjector({providers:[{provide:"odataFilterParserService",useExisting:ri}]}),f}()}}]);