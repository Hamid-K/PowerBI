"use strict";(self.webpackChunkdesktopDaxQueryView=self.webpackChunkdesktopDaxQueryView||[]).push([["extension-host-error-handling"],{77753:function(O,F,o){o.r(F),o.d(F,{GetIFrameByIdInjectionToken:function(){return p},createExtensionHostErrorHandlingModule:function(){return B}});var S=o(77476),t=o(50423),f=o(60756),E=o(82762),m=o(11547),h=o(42195),g=o(14172),j=o(17653),e=o(73471),M=o(60397),d=o(17899),R=new t.InjectionToken("RequestFailureHandler"),p=new t.InjectionToken("GetIFrameById"),x=o(54323),T=function(){return function(){}}(),V=function(){function r(u,l,$,W,C,D){var s=this;this.actions$=u,this.messageBroker=l,this.telemetryService=$,this.errorService=W,this.requestFailureHandler=C,this.getIFrameById=D,this.onHandleRequestFailureReceived$=(0,d.Av)(this.actions$,this.messageBroker,e.Vm.handleRequestFailure,function(n){return(0,E.D)(s.getIFrameById(n.iframeId)).pipe((0,h.zg)(function(i){var a=n.status;return a>=400&&(s.telemetryService.logEvent({name:"handleRequestFailure",properties:{extensionName:i?.extensionName,status:a}}),s.requestFailureHandler)?s.requestFailureHandler(n).pipe((0,g.U)(function(I){return e.Vm.handleRequestFailure.resolve(I)})):(0,m.of)(e.Vm.handleRequestFailure.resolve({handled:!1}))}))}),this.onHandleInvalidRouteReceived$=(0,f.GW)(function(){return s.actions$.pipe((0,d.pR)(e.Vm.handleInvalidRoute),(0,j.b)(function(n){return s.errorService.handleInvalidRoute({routePath:n.routePath,invalidRouteErrorMessage:n.invalidRouteErrorMessage})}))},{dispatch:!1}),this.onOpenErrorDialogReceived$=(0,d.Av)(this.actions$,this.messageBroker,e.Vm.openError,function(n){return(0,E.D)(s.getIFrameById(n.iframeId)).pipe((0,h.zg)(function(i){if(i){var a=void 0;switch(n.kind){case e.oS.Error:a=e.oS.Error;break;case e.oS.Fatal:a=e.oS.Fatal;break;case e.oS.Warning:a=e.oS.Warning;break;case e.oS.Custom:a=e.oS.Custom;break;default:a=e.oS.Error}var I=n.asyncId,N=n.iframeId,H=n.errorOptions,P=n.featureName,y=i.extensionName,v=i.initBy,c=i.initState;if("preload"!==v||"initialized"===c)return s.errorService.openError({errorMsg:n.errorMsg,errorOptions:n.errorOptions}).afterClosed().pipe((0,g.U)(function(G){return e.Vm.openError.resolve({value:G})}));s.telemetryService.logEvent({name:"ErrorTrace",properties:{errorMessage:n.errorMsg,kind:a,featureName:P||"",errorOptions:H?.title||"",asyncId:I,iframeId:N,extensionName:y??"",initBy:v??"",initState:c??""}})}return(0,m.of)(e.Vm.openError.resolve({value:""}))}))}),this.onOpenErrorDialogWithErrorTypeReceived$=(0,d.Av)(this.actions$,this.messageBroker,e.Vm.openErrorWithErrorType,function(n){return(0,E.D)(s.errorService.openErrorWithErrorType(n)).pipe((0,h.zg)(function(i){return i?i.afterClosed().pipe((0,g.U)(function(){return e.Vm.openErrorWithErrorType.resolve({})})):(0,m.of)(e.Vm.openErrorWithErrorType.reject())}))})}return r.\u0275fac=function(l){return new(l||r)(t.\u0275\u0275inject(f.eX),t.\u0275\u0275inject(M.u),t.\u0275\u0275inject(x.t),t.\u0275\u0275inject(T),t.\u0275\u0275inject(R),t.\u0275\u0275inject(p))},r.\u0275prov=t.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac}),r}();function B(r,u){return(0,t.createNgModule)(k,t.Injector.create({providers:[{provide:p,useValue:r.getIFrameById}],parent:u}))}var k=function(){function r(){}return r.\u0275fac=function(l){return new(l||r)},r.\u0275mod=t.\u0275\u0275defineNgModule({type:r}),r.\u0275inj=t.\u0275\u0275defineInjector({imports:[S.CommonModule,f.sQ.forFeature([V])]}),r}()}}]);