"use strict";(self.webpackChunkmobile=self.webpackChunkmobile||[]).push([["schema-validator"],{73566:function(F,I,i){i.d(I,{E:function(){return j}});var D=i(77476),B=i(9398),k=i(77906),l=i(8483),J=i(50423),j=function(){function d(){}return d.\u0275fac=function(x){return new(x||d)},d.\u0275mod=J.\u0275\u0275defineNgModule({type:d}),d.\u0275inj=J.\u0275\u0275defineInjector({imports:[D.CommonModule,k.N,B.Bz.forChild(l.Vc)]}),d}()},8483:function(F,I,i){i.d(I,{Vc:function(){return J},yO:function(){return k}});var D=i(50423),B=i(76072),k=new D.InjectionToken("JsonSchemaValidationService"),l={loadChildren:function(){return i.e("json-schema-validation-lazy").then(i.bind(i,98909)).then(function(d){return d.JsonSchemaValidationLazyModule})}};B.E.addLazyLoadForLegacyMapping("@powerbi/JsonSchemaValidation/lazy/json-schema-validation-lazy-module#JsonSchemaValidationLazyModule",l.loadChildren);var J=[{path:"dummy-json-schema-validation-lazy",loadChildren:l.loadChildren}]},36731:function(F,I,i){i.d(I,{D:function(){return D}});var D={allErrors:!0,verbose:!0,allowUnionTypes:!0,validateSchema:"log"}},60639:function(F,I,i){i.r(I),i.d(I,{ReportDefinitionSchemaValidatorModule:function(){return Se}});var D=i(77476),B=i(73566),k=i(77906),l=i(81337),J=i(36731),j=i(38504),d=function(e){return e.Bookmark="bookmark",e.BookmarksMetadata="bookmarksMetadata",e.FormattingObjectDefinitions="formattingObjectDefinitions",e.Page="page",e.PagesMetadata="pagesMetadata",e.ReportExtension="reportExtension",e.Report="report",e.SemanticQuery="semanticQuery",e.VersionMetadata="versionMetadata",e.VisualContainerMobileState="visualContainerMobileState",e.VisualContainer="visualContainer",e}({}),A=[1],x=[1],T=[1],X=[1],Y=[1],w=[1],q=[1],ee=[1],te=[1];function y(e,t){return t.includes(e)}function p(e){return(0,l.mG)(this,void 0,void 0,function(){return(0,l.Jh)(this,function(a){switch(a.label){case 0:return 1===e.majorVersion?[3,1]:[3,24];case 1:switch(e.type){case d.Bookmark:return[3,2];case d.BookmarksMetadata:return[3,4];case d.FormattingObjectDefinitions:return[3,6];case d.Page:return[3,8];case d.PagesMetadata:return[3,10];case d.ReportExtension:return[3,12];case d.Report:return[3,14];case d.SemanticQuery:return[3,16];case d.VersionMetadata:return[3,18];case d.VisualContainerMobileState:return[3,20];case d.VisualContainer:return[3,22]}return[3,24];case 2:return[4,i.e("schema.json").then(i.t.bind(i,61811,19))];case 3:case 5:case 7:case 9:case 11:case 13:case 15:case 17:case 19:case 21:case 23:return[2,a.sent()];case 4:return[4,i.e("schema.json.0").then(i.t.bind(i,60378,19))];case 6:return[4,i.e("schema.json.1").then(i.t.bind(i,86891,19))];case 8:return[4,i.e("schema.json.2").then(i.t.bind(i,9590,19))];case 10:return[4,i.e("schema.json.3").then(i.t.bind(i,81938,19))];case 12:return[4,i.e("schema.json.4").then(i.t.bind(i,50339,19))];case 14:return[4,i.e("schema.json.5").then(i.t.bind(i,75774,19))];case 16:return[4,i.e("schema.json.6").then(i.t.bind(i,33959,19))];case 18:return[4,i.e("schema.json.7").then(i.t.bind(i,90836,19))];case 20:return[4,i.e("schema.json.8").then(i.t.bind(i,41605,19))];case 22:return[4,i.e("schema.json.9").then(i.t.bind(i,91139,19))];case 24:throw Error("Error major version ".concat(e.majorVersion," of ").concat(e.type," schema not found!"))}})})}function L(e,t){return(0,l.mG)(this,void 0,void 0,function(){var n,a;return(0,l.Jh)(this,function(r){switch(r.label){case 0:return[4,p({type:d.SemanticQuery,majorVersion:e})];case 1:return n=r.sent(),[4,p({type:d.FormattingObjectDefinitions,majorVersion:t})];case 2:return a=r.sent(),[2,(0,l.pi)({schemas:[n,a]},J.D)]}})})}function M(e,t){return{filePath:e,keyword:j.VL.InvalidMajorVersion,params:{InvalidMajorVersionError:t},level:j.qB.Error,type:j.ER}}var ae=[j.VL.AdditionalProperties];function g(e,t){if(!t.isValid&&!_.isEmpty(t.errors)){for(var n=[],a=0,r=t.errors;a<r.length;a++){var o=r[a];if("string"==typeof o)n.push({filePath:e,keyword:"error",params:{error:o},level:j.qB.Error,type:j.ER});else{if(o.keyword===j.VL.OneOf){var c=o.schema.map(function(s){return s.required});o.params.fields=c.join(",")}n.push({filePath:e,keyword:o.keyword,instancePath:o.instancePath,params:o.params,level:ae.includes(o.keyword)?j.qB.Warning:j.qB.Error,type:j.ER})}}return n}}var m=i(541),u=i(50423),ne=i(76072),ie=i(8483),E=function(){function e(){this.lazyProvider=(0,u.inject)(ne.E)}return e.prototype.registerSchema=function(t,n,a){return(0,l.mG)(this,void 0,void 0,function(){return(0,l.Jh)(this,function(o){switch(o.label){case 0:return[4,this.getService()];case 1:return o.sent().registerSchema(t,n,a),[2]}})})},e.prototype.validate=function(t,n,a){return(0,l.mG)(this,void 0,void 0,function(){var r;return(0,l.Jh)(this,function(o){switch(o.label){case 0:return[4,this.getService()];case 1:return r=o.sent(),"string"==typeof t?[2,r.validate(t,n)]:[2,r.validate(t,n,a)]}})})},e.prototype.getService=function(){return this.servicePromise||(this.servicePromise=this.lazyProvider.get("@powerbi/JsonSchemaValidation/lazy/json-schema-validation-lazy-module#JsonSchemaValidationLazyModule",ie.yO)),this.servicePromise},e.\u0275prov=u.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac=function(n){return new(n||e)},providedIn:"root"}),e}(),re=function(){function e(t){this.jsonSchemaValidationService=t}return e.prototype.validate=function(t){return(0,l.mG)(this,void 0,void 0,function(){var n,a,c,s,f,S;return(0,l.Jh)(this,function(h){switch(h.label){case 0:return n=(0,m.ZG)(t.content.$schema).version,y(a=(0,m.W3)(n).major,A)?[4,p({type:d.Bookmark,majorVersion:a})]:[2,[M(t.filePath,a)]];case 1:return c=h.sent(),[4,L((s={semanticQueryVersion:1,formattingObjectDefinitionsMajorVersion:1}).semanticQueryVersion,s.formattingObjectDefinitionsMajorVersion)];case 2:return f=h.sent(),[4,this.jsonSchemaValidationService.registerSchema(c.$id,c,f)];case 3:return h.sent(),[4,this.jsonSchemaValidationService.validate(c.$id,t.content)];case 4:return S=h.sent(),[2,g(t.filePath,S)]}})})},e.\u0275fac=function(n){return new(n||e)(u.\u0275\u0275inject(E))},e.\u0275prov=u.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),oe=function(){function e(t){this.jsonSchemaValidationService=t}return e.prototype.validate=function(t){return(0,l.mG)(this,void 0,void 0,function(){var n,a,o,c;return(0,l.Jh)(this,function(s){switch(s.label){case 0:return n=(0,m.ZG)(t.wireContract.$schema).version,y(a=(0,m.W3)(n).major,x)?[4,p({type:d.BookmarksMetadata,majorVersion:a})]:[2,[M(t.filePath,a)]];case 1:return o=s.sent(),[4,this.jsonSchemaValidationService.registerSchema(o.$id,o)];case 2:return s.sent(),[4,this.jsonSchemaValidationService.validate(o.$id,t.wireContract)];case 3:return c=s.sent(),[2,g(t.filePath,c)]}})})},e.\u0275fac=function(n){return new(n||e)(u.\u0275\u0275inject(E))},e.\u0275prov=u.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),se=i(43838),ce=function(){function e(t){this.jsonSchemaValidationService=t}return e.prototype.validate=function(t){return(0,l.mG)(this,void 0,void 0,function(){var n,a,c,s,f,S;return(0,l.Jh)(this,function(h){switch(h.label){case 0:return n=(0,m.ZG)(t.content.$schema).version,y(a=(0,m.W3)(n).major,ee)?[4,p({type:d.VisualContainerMobileState,majorVersion:a})]:[2,[M(t.filePath,a)]];case 1:return c=h.sent(),[4,L((s={semanticQueryVersion:1,formattingObjectDefinitionsMajorVersion:1}).semanticQueryVersion,s.formattingObjectDefinitionsMajorVersion)];case 2:return f=h.sent(),[4,this.jsonSchemaValidationService.registerSchema(c.$id,c,f)];case 3:return h.sent(),[4,this.jsonSchemaValidationService.validate(c.$id,t.content)];case 4:return S=h.sent(),[2,g(t.filePath,S)]}})})},e.\u0275fac=function(n){return new(n||e)(u.\u0275\u0275inject(E))},e.\u0275prov=u.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),le=function(){function e(t){this.jsonSchemaValidationService=t}return e.prototype.validate=function(t){return(0,l.mG)(this,void 0,void 0,function(){var n,a,c,s,f,S;return(0,l.Jh)(this,function(h){switch(h.label){case 0:return n=(0,m.ZG)(t.content.$schema).version,y(a=(0,m.W3)(n).major,te)?[4,p({type:d.VisualContainer,majorVersion:a})]:[2,[M(t.filePath,a)]];case 1:return c=h.sent(),[4,L((s={semanticQueryVersion:1,formattingObjectDefinitionsMajorVersion:1}).semanticQueryVersion,s.formattingObjectDefinitionsMajorVersion)];case 2:return f=h.sent(),[4,this.jsonSchemaValidationService.registerSchema(c.$id,c,f)];case 3:return h.sent(),[4,this.jsonSchemaValidationService.validate(c.$id,t.content)];case 4:return S=h.sent(),[2,g(t.filePath,S)]}})})},e.\u0275fac=function(n){return new(n||e)(u.\u0275\u0275inject(E))},e.\u0275prov=u.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),de=function(){function e(t,n,a){this.visualContainerMobileStateSchemaValidatorService=t,this.visualContainerSchemaValidatorService=n,this.jsonSchemaValidationService=a}return e.prototype.validate=function(t){return(0,l.mG)(this,void 0,void 0,function(){var n,a,r,s,f,S,h,b,R,$,O,P;return(0,l.Jh)(this,function(V){switch(V.label){case 0:return n=[],a=(0,m.ZG)(t.content.$schema).version,y(r=(0,m.W3)(a).major,T)?[4,p({type:d.Page,majorVersion:r})]:[2,[M(t.filePath,r)]];case 1:return s=V.sent(),[4,L((f={semanticQueryVersion:1,formattingObjectDefinitionsMajorVersion:1}).semanticQueryVersion,f.formattingObjectDefinitionsMajorVersion)];case 2:return S=V.sent(),[4,this.jsonSchemaValidationService.registerSchema(s.$id,s,S)];case 3:return V.sent(),[4,this.jsonSchemaValidationService.validate(s.$id,t.content)];case 4:if(h=V.sent(),b=g(t.filePath,h),_.isEmpty(b)||n.push.apply(n,b),!t.visualContainers)return[3,11];R=0,$=t.visualContainers,V.label=5;case 5:return R<$.length?(P=void 0,(0,se.$h)((O=$[R]).content)?[4,this.visualContainerMobileStateSchemaValidatorService.validate(O)]:[3,7]):[3,11];case 6:return P=V.sent(),[3,9];case 7:return[4,this.visualContainerSchemaValidatorService.validate(O)];case 8:P=V.sent(),V.label=9;case 9:_.isEmpty(P)||n.push.apply(n,P),V.label=10;case 10:return R++,[3,5];case 11:return[2,n]}})})},e.\u0275fac=function(n){return new(n||e)(u.\u0275\u0275inject(ce),u.\u0275\u0275inject(le),u.\u0275\u0275inject(E))},e.\u0275prov=u.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),ue=function(){function e(t){this.jsonSchemaValidationService=t}return e.prototype.validate=function(t){return(0,l.mG)(this,void 0,void 0,function(){var n,a,o,c;return(0,l.Jh)(this,function(s){switch(s.label){case 0:return n=(0,m.ZG)(t.content.$schema).version,y(a=(0,m.W3)(n).major,X)?[4,p({type:d.PagesMetadata,majorVersion:a})]:[2,[M(t.filePath,a)]];case 1:return o=s.sent(),[4,this.jsonSchemaValidationService.registerSchema(o.$id,o)];case 2:return s.sent(),[4,this.jsonSchemaValidationService.validate(o.$id,t.content)];case 3:return c=s.sent(),[2,g(t.filePath,c)]}})})},e.\u0275fac=function(n){return new(n||e)(u.\u0275\u0275inject(E))},e.\u0275prov=u.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),he=function(){function e(t){this.jsonSchemaValidationService=t}return e.prototype.validate=function(t){return(0,l.mG)(this,void 0,void 0,function(){var n,a,o,c;return(0,l.Jh)(this,function(s){switch(s.label){case 0:return n=(0,m.ZG)(t.content.$schema).version,y(a=(0,m.W3)(n).major,Y)?[4,p({type:d.ReportExtension,majorVersion:a})]:[2,[M(t.filePath,a)]];case 1:return o=s.sent(),[4,this.jsonSchemaValidationService.registerSchema(o.$id,o)];case 2:return s.sent(),[4,this.jsonSchemaValidationService.validate(o.$id,t.content)];case 3:return c=s.sent(),[2,g(t.filePath,c)]}})})},e.\u0275fac=function(n){return new(n||e)(u.\u0275\u0275inject(E))},e.\u0275prov=u.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),me=function(){function e(t){this.jsonSchemaValidationService=t}return e.prototype.validate=function(t){return(0,l.mG)(this,void 0,void 0,function(){var n,a,o,c;return(0,l.Jh)(this,function(s){switch(s.label){case 0:return n=(0,m.ZG)(t.content.$schema).version,y(a=(0,m.W3)(n).major,q)?[4,p({type:d.VersionMetadata,majorVersion:a})]:[2,[M(t.filePath,a)]];case 1:return o=s.sent(),[4,this.jsonSchemaValidationService.registerSchema(o.$id,o)];case 2:return s.sent(),[4,this.jsonSchemaValidationService.validate(o.$id,t.content)];case 3:return c=s.sent(),[2,g(t.filePath,c)]}})})},e.\u0275fac=function(n){return new(n||e)(u.\u0275\u0275inject(E))},e.\u0275prov=u.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),ve=function(){function e(t,n,a,r,o,c,s){this.bookmarkSchemaValidatorService=t,this.bookmarksMetadataSchemaValidatorService=n,this.jsonSchemaValidationService=a,this.pageSchemaValidatorService=r,this.pagesMetadataSchemaValidatorService=o,this.reportExtensionSchemaValidatorService=c,this.versionMetadataSchemaValidatorService=s}return e.prototype.validate=function(t,n){return(0,l.mG)(this,void 0,void 0,function(){var a,r,o,c,s,h,b,R,$,O,P,V,G,C,Q,Z,W,K,U;return(0,l.Jh)(this,function(v){switch(v.label){case 0:return a=n?.createChildActivity({name:"ReportSchemaValidationStep"}),r=[],[4,this.versionMetadataSchemaValidatorService.validate(t.version)];case 1:return o=v.sent(),_.isEmpty(o)||r.push.apply(r,o),c=(0,m.ZG)(t.report.content.$schema).version,y(s=(0,m.W3)(c).major,w)?[4,p({type:d.Report,majorVersion:s})]:[2,[M(t.report.filePath,s)]];case 2:return h=v.sent(),[4,L((b={semanticQueryVersion:1,formattingObjectDefinitionsMajorVersion:1}).semanticQueryVersion,b.formattingObjectDefinitionsMajorVersion)];case 3:return R=v.sent(),[4,this.jsonSchemaValidationService.registerSchema(h.$id,h,R)];case 4:return v.sent(),[4,this.jsonSchemaValidationService.validate(h.$id,t.report.content)];case 5:return $=v.sent(),O=g(t.report.filePath,$),_.isEmpty(O)||r.push.apply(r,O),t.reportExtensions?[4,this.reportExtensionSchemaValidatorService.validate(t.reportExtensions)]:[3,7];case 6:P=v.sent(),_.isEmpty(P)||r.push.apply(r,P),v.label=7;case 7:return t.bookmarks?[4,this.bookmarksMetadataSchemaValidatorService.validate({wireContract:t.bookmarks.content,filePath:t.bookmarks.filePath})]:[3,12];case 8:V=v.sent(),_.isEmpty(V)||r.push.apply(r,V),G=0,C=t.bookmarks.bookmarks,v.label=9;case 9:return G<C.length?[4,this.bookmarkSchemaValidatorService.validate(C[G])]:[3,12];case 10:Q=v.sent(),_.isEmpty(Q)||r.push.apply(r,Q),v.label=11;case 11:return G++,[3,9];case 12:return t.pages.pagesMetadata?[4,this.pagesMetadataSchemaValidatorService.validate(t.pages.pagesMetadata)]:[3,14];case 13:Z=v.sent(),_.isEmpty(Z)||r.push.apply(r,Z),v.label=14;case 14:W=0,K=t.pages.pages,v.label=15;case 15:return W<K.length?[4,this.pageSchemaValidatorService.validate(K[W])]:[3,18];case 16:U=v.sent(),_.isEmpty(U)||r.push.apply(r,U),v.label=17;case 17:return W++,[3,15];case 18:return a?.setProperty("errorCodes",_.map(r,function(Ve){return JSON.stringify(Ve)})),a?.resolve(),[2,r]}})})},e.\u0275fac=function(n){return new(n||e)(u.\u0275\u0275inject(re),u.\u0275\u0275inject(oe),u.\u0275\u0275inject(E),u.\u0275\u0275inject(de),u.\u0275\u0275inject(ue),u.\u0275\u0275inject(he),u.\u0275\u0275inject(me))},e.\u0275prov=u.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),fe=i(61032),Se=function(){function e(){}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=u.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=u.\u0275\u0275defineInjector({providers:[k.N.withLazyService(fe.ED,ve)],imports:[D.CommonModule,k.N,B.E]}),e}()}}]);