"use strict";(self.webpackChunkdesktopDialogHost=self.webpackChunkdesktopDialogHost||[]).push([["copilot-skills-common"],{92126:function(te,b,i){i.r(b),i.d(b,{CopilotSkillsCommonModule:function(){return ze}});var y=i(77476),B=i(42729),N=i(32208),A=i(33783),Q=i(17177),K=i(8816),W=i(79061),V=i(81337),J=i(35510),q=i(46867),w=i(27531),j=i(14463),H=i(67489),R=i(9410),$=i(47245),U=i(74857),G=i(2142),X=i(11077),Z=i(35911),Y=i(39681),L=i(8590),a=i(80318),e=i(50423),u=i(26898),l=i(83008),p=i(11494),f=i(79006),m=i(40956),s=i(58991),c=i(65181),v=i(2330),h=i(906),C=i(84281),x=i(27980),S=i(29866),P=i(80277),M=i(20066),I=function(){function t(n,o,r,d,g,D,E,T,z,k,Be,be,we,je,He,Re,Ue){this.conceptualSchemaProxy=n,this.dataSources=o,this.eventBridge=r,this.expandCollapse=d,this.geocoder=g,this.geolocationService=D,this.localizationService=E,this.moduleLoader=T,this.sortService=z,this.undoRedoService=k,this.visualAuthoringOpService=Be,this.visualPlugin=be,this.azureMapTokenCache=we,this.azureMapsEndpoint=je,this.geocoderIndexedDB=He,this.promiseFactory=Re,this.visualHostTooltipServiceFactory=Ue}return t.prototype.getSingleVisualHostConfig=function(n){return(0,V.__awaiter)(this,void 0,void 0,function(){var o,r,d,g=this;return(0,V.__generator)(this,function(D){switch(D.label){case 0:return o=_.find(this.dataSources.get(),function(E){return E.type===G.nKy}),[4,this.conceptualSchemaProxy.get(this.dataSources.get())];case 1:return r=D.sent(),d=o&&r&&r.schema(o.name).capabilities,[2,{notifyStart:_.noop,notifyEnd:_.noop,clearQueryErrors:_.noop,handleQueryErrors:_.noop,handleQueryWarnings:_.noop,queryVisualHostServices:{getFilters:function(){return g.createVisualContainerFilters(n)},getDataSourceVariables:function(){},disableAnchorTime:!0},visualHostServices:(0,Y.ED)((0,$.q)({geocoder:this.geocoder,geolocation:this.geolocationService,localizationService:this.localizationService,moduleLoader:this.moduleLoader,promiseFactory:this.promiseFactory,visualHostTooltipService:this.visualHostTooltipServiceFactory.createFromVisualContract(n),getAzureMapToken:function(){return g.azureMapTokenCache.getAzureMapToken()},azureMapsEndpoint:this.azureMapsEndpoint,geocoderIndexedDB:this.geocoderIndexedDB}),function(E){E.getLocalizedString=function(T){return g.localizationService.get(T)},E.onCustomSort=function(T){return g.onCustomSort(n,T.sortDescriptors)},E.canExpandCollapse=function(T){var z;return null!==(z=d?.supportsInstanceFilters)&&void 0!==z&&z},E.setNodeExpansionState=function(T){T.isCollapse?g.expandCollapse.collapseNode(n,T.dataRoles,T.data):g.expandCollapse.expandNode(n,T.dataRoles,T.data),g.eventBridge.publishToChannel(L.jCS,{affectContainer:function(k){return k.name===n.name}})}}),interactivityOptions:{selection:!0},additionalObjectUpdates:void 0,disableQueryCacheUpdates:!1,noLoadMore:!1}]}})})},t.prototype.createVisualContainerFilters=function(n){var o=new X.ME;_.forEach(n.filters,function(d){var g=d.filter;g&&o.addVisualFilter({filter:g})});var r=o.getFilters(!1);return{dataFilter:r.dataFilter,dataFiltersUnmerged:r.dataFiltersUnmerged,highlightFilter:void 0,highlightFiltersUnmerged:void 0}},t.prototype.onCustomSort=function(n,o){return(0,V.__awaiter)(this,void 0,void 0,function(){var r;return(0,V.__generator)(this,function(d){switch(d.label){case 0:return[4,(0,U.Vq)(n,this.conceptualSchemaProxy,this.dataSources,this.sortService,this.undoRedoService,this.visualAuthoringOpService,this.visualPlugin)];case 1:return r=d.sent(),(0,U.fI)(n,r,o),[2]}})})},t.\u0275fac=function(o){return new(o||t)(e.\u0275\u0275inject(u.i),e.\u0275\u0275inject(l.D),e.\u0275\u0275inject(p.J),e.\u0275\u0275inject(f.v),e.\u0275\u0275inject(m.i),e.\u0275\u0275inject(Z._1),e.\u0275\u0275inject(c.o),e.\u0275\u0275inject(v.m),e.\u0275\u0275inject(h.K),e.\u0275\u0275inject(C.z),e.\u0275\u0275inject(x.Q),e.\u0275\u0275inject(S.D),e.\u0275\u0275inject(P.o),e.\u0275\u0275inject(s.A),e.\u0275\u0275inject(M.W),e.\u0275\u0275inject(j.t),e.\u0275\u0275inject(a.A))},t.\u0275prov=e.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t}(),O=i(40823),F=i(8586),ne=i(52121),oe=i(67660),ie=i(96777),ee=i(18503),re=i(81213),ae=i(98885),le=i(46101),se=i(91781),ue=i(74913),ce=i(55490),pe=i(59968),de=i(85102),ve=["visualHostContainer"];function me(t,n){if(1&t&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){var o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(o.title)}}function fe(t,n){if(1&t&&e.\u0275\u0275element(0,"tri-svg-icon",10),2&t){var o=e.\u0275\u0275nextContext();e.\u0275\u0275property("triTooltip",o.componentConfig.titleTooltip)}}function ge(t,n){1&t&&e.\u0275\u0275element(0,"tri-spinner",14),2&t&&e.\u0275\u0275property("delay",0)}function he(t,n){if(1&t&&e.\u0275\u0275element(0,"single-visual-host",15),2&t){var o=e.\u0275\u0275nextContext().ngIf,r=e.\u0275\u0275nextContext();e.\u0275\u0275property("visual",r.visualContainer)("config",r.singleVisualHostConfig)("themeCollection",r.theme.themeCollection)("visualViewport",o)("useOnPushChangeDetection",!0)}}function Ce(t,n){if(1&t){var o=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"canvas-visual-error-overlay",16),e.\u0275\u0275listener("showErrorDetails",function(){e.\u0275\u0275restoreView(o);var D=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(D.showErrorDetails())}),e.\u0275\u0275elementEnd()}if(2&t){var r=e.\u0275\u0275nextContext().ngIf,d=e.\u0275\u0275nextContext();e.\u0275\u0275property("errorInfo",d.error)("viewport",r)}}function ye(t,n){if(1&t&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,ge,1,1,"tri-spinner",11),e.\u0275\u0275template(2,he,1,5,"single-visual-host",12),e.\u0275\u0275template(3,Ce,1,2,"canvas-visual-error-overlay",13),e.\u0275\u0275elementContainerEnd()),2&t){var o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",o.loading),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!o.error&&o.singleVisualHostConfig),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",o.error&&!o.loading)}}function Se(t,n){if(1&t){var o=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",17),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(o);var d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.onAddToPage.emit())}),e.\u0275\u0275pipe(1,"localize"),e.\u0275\u0275element(2,"tri-svg-icon",18)(3,"span",19),e.\u0275\u0275elementEnd()}2&t&&e.\u0275\u0275property("triTooltip",e.\u0275\u0275pipeBind1(1,1,"Insights_ExploreAddToPage"))}function Ee(t,n){1&t&&e.\u0275\u0275element(0,"span",23)}var Te=function(n){return{withText:n}};function Ve(t,n){if(1&t){var o=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",20),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(o);var g=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(g.onExpand.emit())}),e.\u0275\u0275pipe(1,"localize"),e.\u0275\u0275element(2,"tri-svg-icon",21),e.\u0275\u0275template(3,Ee,1,0,"span",22),e.\u0275\u0275elementEnd()}if(2&t){var r=e.\u0275\u0275nextContext();e.\u0275\u0275property("triTooltip",e.\u0275\u0275pipeBind1(1,3,"ExpandView"))("ngClass",e.\u0275\u0275pureFunction1(5,Te,!r.componentConfig.supportsAddToPage)),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!r.componentConfig.supportsAddToPage)}}function xe(t,n){if(1&t){var o=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",17),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(o);var d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.onExplore.emit())}),e.\u0275\u0275pipe(1,"localize"),e.\u0275\u0275element(2,"tri-svg-icon",24)(3,"span",25),e.\u0275\u0275elementEnd()}2&t&&e.\u0275\u0275property("triTooltip",e.\u0275\u0275pipeBind1(1,1,"Explore_This_Visual"))}var Ie=function(n){return{height:n}},Pe=function(n){return{"background-color":n}},Me=function(n,o,r){return{color:n,fill:o,"justify-content":r}},_e=function(n){return{alignRight:n}},De=function(){function t(n,o,r,d){this.changeDetectionRef=n,this.errorService=o,this.localizationService=r,this.singleVisualHostConfigBuilder=d,this.onAddToPage=new e.EventEmitter,this.onExpand=new e.EventEmitter,this.onExplore=new e.EventEmitter,this.viewport$=new J.X(void 0),this.loading=!0}return t.prototype.ngOnInit=function(){return(0,V.__awaiter)(this,void 0,void 0,function(){var n,o=this;return(0,V.__generator)(this,function(r){switch(r.label){case 0:return[4,this.singleVisualHostConfigBuilder.getSingleVisualHostConfig(this.visualContainer)];case 1:return(n=r.sent()).notifyEnd=function(){return o.handleDoneLoading()},n.handleQueryErrors=function(d){return o.handleQueryErrors(d)},this.singleVisualHostConfig=n,this.changeDetectionRef.markForCheck(),[2]}})})},t.prototype.ngAfterViewInit=function(){var n=this;setTimeout(function(){n.viewport$.next({width:n.visualHostContainerElement.nativeElement.clientWidth,height:n.visualHostContainerElement.nativeElement.clientHeight,scale:1})})},t.prototype.ngOnChanges=function(n){this.changeDetectionRef.detectChanges()},t.prototype.showErrorDetails=function(){(0,U.aZ)(this.error,this.errorService,this.localizationService)},t.prototype.handleDoneLoading=function(){this.loading=!1,this.changeDetectionRef.markForCheck()},t.prototype.handleQueryErrors=function(n){if(!n.ignorable){var o=n.getDetails(this.localizationService),r=(0,ee.fe)(n.code);this.error={details:o,code:n.code,fixableError:0,hideSeeDetails:(0,ee.O6)(n.code),overlayType:r,requestId:n.requestId,source:o?.source||n.source||"PowerBI"},this.changeDetectionRef.markForCheck()}},t.\u0275fac=function(o){return new(o||t)(e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(re.T),e.\u0275\u0275directiveInject(c.o),e.\u0275\u0275directiveInject(I))},t.\u0275cmp=e.\u0275\u0275defineComponent({type:t,selectors:[["copilot-visual-common"]],viewQuery:function(o,r){var d;(1&o&&e.\u0275\u0275viewQuery(ve,5,e.ElementRef),2&o)&&(e.\u0275\u0275queryRefresh(d=e.\u0275\u0275loadQuery())&&(r.visualHostContainerElement=d.first))},inputs:{title:"title",theme:"theme",visualContainer:"visualContainer",componentConfig:"componentConfig",height:"height"},outputs:{onAddToPage:"onAddToPage",onExpand:"onExpand",onExplore:"onExplore"},features:[e.\u0275\u0275NgOnChangesFeature],decls:13,vars:23,consts:[[1,"copilotVisualCommon",3,"ngStyle"],[1,"visualHostAndTitleContainer",3,"ngStyle"],[1,"visualTitle",3,"ngStyle","triTooltip"],[4,"ngIf"],["name","info_20_regular",3,"triTooltip",4,"ngIf"],[1,"visualHostContainer"],["visualHostContainer",""],[1,"actionBar",3,"ngClass"],["tri-button","","size","small","class","pbi-fluent-button",3,"triTooltip","click",4,"ngIf"],["tri-button","","size","small","class","expandButton pbi-fluent-button",3,"triTooltip","ngClass","click",4,"ngIf"],["name","info_20_regular",3,"triTooltip"],["size","small",3,"delay",4,"ngIf"],[3,"visual","config","themeCollection","visualViewport","useOnPushChangeDetection",4,"ngIf"],[3,"errorInfo","viewport","showErrorDetails",4,"ngIf"],["size","small",3,"delay"],[3,"visual","config","themeCollection","visualViewport","useOnPushChangeDetection"],[3,"errorInfo","viewport","showErrorDetails"],["tri-button","","size","small",1,"pbi-fluent-button",3,"triTooltip","click"],["name","add_16_regular"],["localize","Insights_ExploreAddToPage",1,"tri-font-12-r"],["tri-button","","size","small",1,"expandButton","pbi-fluent-button",3,"triTooltip","ngClass","click"],["name","expand_up_right_16_regular"],["class","tri-font-12-r","localize","ExpandView",4,"ngIf"],["localize","ExpandView",1,"tri-font-12-r"],["sprite","trident-icons","name","binoculars_20_regular"],["localize","Explore_This_Visual",1,"tri-font-12-r"]],template:function(o,r){1&o&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"section",2),e.\u0275\u0275template(3,me,2,1,"span",3),e.\u0275\u0275template(4,fe,1,1,"tri-svg-icon",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"section",5,6),e.\u0275\u0275template(7,ye,4,3,"ng-container",3),e.\u0275\u0275pipe(8,"async"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"section",7),e.\u0275\u0275template(10,Se,4,3,"button",8),e.\u0275\u0275template(11,Ve,4,7,"button",9),e.\u0275\u0275template(12,xe,4,3,"button",8),e.\u0275\u0275elementEnd()()),2&o&&(e.\u0275\u0275property("ngStyle",e.\u0275\u0275pureFunction1(13,Ie,r.height+"px")),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngStyle",e.\u0275\u0275pureFunction1(15,Pe,r.theme.background)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngStyle",e.\u0275\u0275pureFunction3(17,Me,r.theme.foreground,r.theme.foreground,r.title?"space-between":"flex-end"))("triTooltip",r.title),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",r.title),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",r.componentConfig.titleTooltip),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(8,11,r.viewport$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(21,_e,"right"===r.componentConfig.actionAlignment)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",r.componentConfig.supportsAddToPage),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",r.componentConfig.supportsExpand),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",r.componentConfig.supportsExplore))},dependencies:[y.NgClass,y.NgIf,y.NgStyle,ae.f,le.v,se.O,ue.M,ce.Z,pe.X,y.AsyncPipe,de.F],styles:['.copilotVisualCommon[_ngcontent-%COMP%]{display:flex;flex-direction:column}.copilotVisualCommon[_ngcontent-%COMP%]   .visualHostAndTitleContainer[_ngcontent-%COMP%]{display:flex;flex-direction:column;border:solid 1px var(--colorNeutralStroke1);border-radius:var(--borderRadiusMedium);padding:var(--spacingVerticalS) var(--spacingHorizontalS);margin:0 0 var(--spacingVerticalM) 0;box-sizing:border-box;width:100%;flex:1}.copilotVisualCommon[_ngcontent-%COMP%]   .visualHostAndTitleContainer[_ngcontent-%COMP%]   .visualTitle[_ngcontent-%COMP%]{width:100%;display:flex;gap:8px}.copilotVisualCommon[_ngcontent-%COMP%]   .visualHostAndTitleContainer[_ngcontent-%COMP%]   .visualTitle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap;font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-semi-bold, 600);flex:1}.copilotVisualCommon[_ngcontent-%COMP%]   .visualHostAndTitleContainer[_ngcontent-%COMP%]   .visualHostContainer[_ngcontent-%COMP%]{flex:1;display:flex;overflow:hidden}.copilotVisualCommon[_ngcontent-%COMP%]   .visualHostAndTitleContainer[_ngcontent-%COMP%]   .visualHostContainer[_ngcontent-%COMP%]   tri-spinner[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%}.copilotVisualCommon[_ngcontent-%COMP%]   .visualHostAndTitleContainer[_ngcontent-%COMP%]   .visualHostContainer[_ngcontent-%COMP%]   single-visual-host[_ngcontent-%COMP%]{flex:1;display:block}.copilotVisualCommon[_ngcontent-%COMP%]   .actionBar[_ngcontent-%COMP%]{display:flex;gap:8px}.copilotVisualCommon[_ngcontent-%COMP%]   .actionBar.alignRight[_ngcontent-%COMP%]{justify-content:right}.copilotVisualCommon[_ngcontent-%COMP%]   .actionBar[_ngcontent-%COMP%]   .expandButton[_ngcontent-%COMP%]:not(.withText){padding:2px}']}),t}();function Oe(t,n){if(1&t){var o=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"copilot-visual-common",2),e.\u0275\u0275listener("onAddToPage",function(){e.\u0275\u0275restoreView(o);var g=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(g.addToPage())}),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275elementEnd()}if(2&t){var r=e.\u0275\u0275nextContext();e.\u0275\u0275property("title",r.title)("theme",e.\u0275\u0275pipeBind1(1,5,r.theme$))("visualContainer",r.visualContainer)("height",456)("componentConfig",r.visualComponentConfig)}}var Ae=function(){function t(n,o,r,d,g,D,E){this.dataSourcesService=n,this.dataSourceSerializer=o,this.explorationSerializer=r,this.resourceLoader=d,this.templateDialogPayload=g,this.themeService=D,this.promiseFactory=E}return t.prototype.ngOnInit=function(){var n=this.templateDialogPayload.input;this.title=n.visualTitle,this.visualContainer=this.explorationSerializer.deserializeCanvasItem(n.visualContainer),this.visualComponentConfig={supportsAddToPage:n.supportsAddToPage,supportsExpand:!1,actionAlignment:"right",supportsExplore:!1};var o=this.dataSourceSerializer.deserializeDataSources(n.dataSources);this.dataSourcesService.set(o),R.P.loadThemeAndBaseTheme(this.promiseFactory,this.resourceLoader,this.themeService,n.resourcePackages,n.theme.themeCollection),this.theme$=new J.X(n.theme)},t.prototype.addToPage=function(){this.templateDialogPayload.closeDialogFromConsumer({closedWithAddAction:!0})},t.\u0275fac=function(o){return new(o||t)(e.\u0275\u0275directiveInject(l.D),e.\u0275\u0275directiveInject(O._),e.\u0275\u0275directiveInject(F.L),e.\u0275\u0275directiveInject(ne.l6),e.\u0275\u0275directiveInject(H.x),e.\u0275\u0275directiveInject(oe.f),e.\u0275\u0275directiveInject(j.t))},t.\u0275cmp=e.\u0275\u0275defineComponent({type:t,selectors:[["copilot-visual-dialog"]],features:[e.\u0275\u0275ProvidersFeature((0,V.__spreadArray)((0,V.__spreadArray)((0,V.__spreadArray)([],q.K,!0),w.H,!0),[I,H.x],!1))],decls:3,vars:3,consts:[[2,"height","auto"],[3,"title","theme","visualContainer","height","componentConfig","onAddToPage",4,"ngIf"],[3,"title","theme","visualContainer","height","componentConfig","onAddToPage"]],template:function(o,r){1&o&&(e.\u0275\u0275elementStart(0,"template-dialog",0),e.\u0275\u0275template(1,Oe,2,7,"copilot-visual-common",1),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementEnd()),2&o&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",r.visualContainer&&e.\u0275\u0275pipeBind1(2,1,r.theme$)))},dependencies:[y.NgIf,ie.J,De,y.AsyncPipe],encapsulation:2}),t}(),Fe=i(35889),ze=function(){function t(){}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=e.\u0275\u0275defineInjector({providers:[I],imports:[y.CommonModule,B.c.withManifest([{componentIdentifier:Fe.Tx,componentType:Ae}]),N.J,A.F,Q.T6,K.w,W.v]}),t}()},74857:function(te,b,i){i.d(b,{D4:function(){return R},ET:function(){return V},Nj:function(){return w},Su:function(){return H},Vq:function(){return G},aZ:function(){return j},fI:function(){return X},y_:function(){return $}});var y=i(81337),B=i(62458),N=i(38701),A=i(60661),Q=i(18503),K=i(50547),W=i(2240);function V(a){return{code:"qnaNotAllowedInIE",fixableError:0,hideSeeDetails:!0,details:{message:a.get("Qna_NotSupportedInIE"),displayableErrorInfo:void 0},source:"User"}}function w(a){if(a)return{Filters:_.map(a.filters,function(e){return{Restatement:e.Restatement,type:void 0}}),Select:_.map(a.selects,function(e){return{Restatement:e.restatement}})}}function j(a,e,u){B.fF.assertValue(a,"Expect this to be called only when the given error is defined.");var l=a.details;if(l){var p=(0,Q.jx)(l),f=u.get("ServiceError_CannotLoadVisual"),m=l.message,s=[];if(p&&(f=l.displayableErrorInfo[0].errorInfoKey,m=l.displayableErrorInfo[0].errorInfoValue,l.displayableErrorInfo.length>1))for(var c=1;c<l.displayableErrorInfo.length;c++)s.push(l.displayableErrorInfo[c]);B.fF.assert(function(){return null!=a.source},"Expect error.source is not null."),e.error(m,a.code,{debugErrorInfo:l.debugErrorInfo,displayableErrorInfo:s,title:f,source:a.source,level:K.U.Error})}}function H(a,e){var u=a.getCurrentExploration(),l=u?.themeCollection;return _.isEmpty(l)?R(e):l}function R(a){return{baseTheme:(0,N.DC)(a)}}function $(a,e,u,l){return(0,y.__awaiter)(this,void 0,void 0,function(){var p,f,m,s,c,v,h,C;return(0,y.__generator)(this,function(x){switch(x.label){case 0:return p=a?.command,f=p?.query,f?(m=f.select(),s=p.queryMetadata,c=_.map(s?.selects,function(S,P){return{expression:m[P].expr,type:S.type,isGroup:S.isGroup,defaultLabel:S.defaultLabel,isExplicitSortBy:S.isExplicitSortBy}}),v=s?.filters,[4,e.get(u.get())]):[2];case 1:return h=x.sent(),(C=l.recommendVisuals(f,h,{numberOfResults:1,visualType:_.first(p.suggestedVisualTypes),filterMetadata:v,exprMetadata:c,addDefaultFormatting:!0,allowTooltipMeasures:!0}))?(B.fF.assert(function(){return 1===_.size(C.visualContainers)},"Expected 1 result"),[2,C.visualContainers[0]]):[2]}})})}function G(a,e,u,l,p,f,m){return(0,y.__awaiter)(this,void 0,void 0,function(){var s,c;return(0,y.__generator)(this,function(v){switch(v.label){case 0:return[4,Y(a,e,u,l)];case 1:return s=v.sent(),c={defaultSortBehavior:Z(a,m),sortableFields:s?.sortableFields,sortGroups:s?.sortGroups},[2,new W.B(c,a,l,p,f)]}})})}function X(a,e,u){if(!_.isEmpty(u)){var l=(0,A.oJ)(a);_.isEmpty(l)||e.applySortByFields(u)}}function Z(a,e){var u,l=(0,A.cj)(a,e);return!!l&&!(null===(u=l.sorting)||void 0===u||!u.default)}function Y(a,e,u,l){return(0,y.__awaiter)(this,void 0,void 0,function(){var p,f,m,s;return(0,y.__generator)(this,function(v){switch(v.label){case 0:if(!(p=u.get()))return[2];v.label=1;case 1:return v.trys.push([1,3,,4]),f=(0,A.PQ)(a),m=(0,A.Xf)(a),[4,e.get(p)];case 2:return s=v.sent(),[2,l.getSortableFields({query:m,schema:s,visualType:f.visualType,columnProperties:f.columnProperties,compiledMappings:[]})];case 3:return v.sent(),[3,4];case 4:return[2]}})})}}}]);