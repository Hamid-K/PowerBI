"use strict";(self.webpackChunkdesktopDataExplore=self.webpackChunkdesktopDataExplore||[]).push([["bookmark-on-load"],{15318:function(Q,f,t){t.r(f),t.d(f,{BookmarkOnLoadModule:function(){return W}});var c=t(81337),x=t(17966),C=t(19276),D=t(26898),M=t(83008),P=t(39445),F=t(49080),T=t(9380),E=t(14463),H=t(60661),N=t(10556),b=t(62458),I=t(4633),z={provide:"bookmarkOnLoad",useFactory:function(e,r,a,l,d,h,v,s,i){var o=new G(e,r,a,l,d,h,v,i);return s.resolve(o)},deps:[x.F,D.i,M.D,P.H,F.J,T.vZ,C.j,E.t,I.y0]},G=function(){function e(r,a,l,d,h,v,s,i){this.bookmarkService=r,this.conceptualSchemaProxy=a,this.dataSources=l,this.explorationStateService=d,this.stateManager=h,this.featureSwitchService=v,this.explorationStateApplierService=s,this.telemetryService=i}return e.prototype.applyBookmarkOnLoad=function(r,a,l,d,h){return(0,c.__awaiter)(this,void 0,void 0,function(){var v,s,i,o,m,g,n,u,O,B,A,y,S;return(0,c.__generator)(this,function(p){switch(p.label){case 0:return v=this.dataSources.get(),s=this.conceptualSchemaProxy.get(v),i=[s],l&&i.push(l),[4,Promise.allSettled(i)];case 1:p.sent(),o=r.bookmark,b.fF.assert(function(){return!!o},"a valid bookmark must be present"),p.label=2;case 2:return p.trys.push([2,4,,5]),n={clearUnmatchedData:!1},o.options&&(n.suppressData=(u=o.options).suppressData,n.suppressActiveSection=u.suppressActiveSection,n.suppressDisplay=u.suppressDisplay,u.applyOnlyToTargetVisuals&&(n.targetVisualNames=u.targetVisualNames)),B=(O=this.explorationStateService).apply,A=[o.explorationState,a],[4,s];case 3:if(m=B.apply(O,A.concat([p.sent(),(0,c.__assign)((0,c.__assign)({},n),{suppressActiveSection:!!d,applyPresentationChanges:!0,isPersistentState:1!==r.resolution})])),this.explorationStateApplierService.syncFilterState(m),1===r.resolution&&this.bookmarkService.setActiveBookmark(o),!m)return[2];if(g=function(e){if(e.activeSection){var r={visualContainers:e.visualContainers,visualContainerGroups:e.visualContainerGroups};return e.filterScope&&(r.filterScope=e.filterScope),e.pendingHighlights&&(r.pendingHighlights=e.pendingHighlights),e.visibility&&(r.visibility=e.visibility),r}return e}(m),!this.featureSwitchService.featureSwitches.bookmarkInitRefactor){y=this.stateManager.createApplyBookmarkActivity("ApplyBookmarkOnLoad",h);try{this.stateManager.applyImpact(g,a,(0,c.__assign)((0,c.__assign)({},n),{suppressActiveSection:!0,suppressDisplay:!0}),y),y.resolve()}catch(K){y.reject(K)}}return(0,H.oU)(a),[3,5];case 4:return S=p.sent(),this.telemetryService.logEvent(N.WZm,{bookmarkType:1===r.resolution?-1:o.type,bookmarkObjectId:o.name,errorCode:"ApplyError",pbi_source:S.stack,stack:S.message}),[3,5];case 5:return[2,m]}})})},e}(),V=t(77476),Z=t(52910),J=t(82156),k=t(50423),W=function(){function e(){}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({providers:[z],imports:[V.CommonModule,Z.O,J.N]}),e}()}}]);