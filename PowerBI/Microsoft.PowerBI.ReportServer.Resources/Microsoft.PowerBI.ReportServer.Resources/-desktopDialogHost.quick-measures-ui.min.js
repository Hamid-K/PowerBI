"use strict";(self.webpackChunkdesktopDialogHost=self.webpackChunkdesktopDialogHost||[]).push([["quick-measures-ui"],{93215:function(se,j,l){l.d(j,{b:function(){return K}});var I=l(81337),r=l(98209),A=l(8590),H=l(35510),D=l(50423),W=l(11494),F=l(83008),R=l(26898),Q=l(65181),K=function(){function O(L,S,V,B){var f=this;this.conceptualSchemaProxy=S,this.dataSourcesService=V,this.localizationService=B,this.modelUpdates=new H.X({schema:void 0,model:void 0,appliedChanges:void 0}),this.subscriptionManager=L.createChannelSubscriptionManager(),this.subscriptionManager.subscribe(A.CCe,function(b,P){return f.update(P.result.changes)})}return O.prototype.update=function(L,S,V){return void 0===S&&(S=!0),void 0===V&&(V=!1),(0,I.__awaiter)(this,void 0,void 0,function(){var B,f;return(0,I.__generator)(this,function(P){switch(P.label){case 0:return this.dataSourcesService.get()?(S||this.conceptualSchemaProxy.clearCache(),[4,this.conceptualSchemaProxy.get(this.dataSourcesService.get())]):[3,2];case 1:(B=P.sent())&&(f=new r.O(this.localizationService).createModel(B,V)),P.label=2;case 2:return this.modelUpdates.next({schema:B,model:f,appliedChanges:L}),[2]}})})},Object.defineProperty(O.prototype,"modelChange$",{get:function(){return this.modelUpdates.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"model",{get:function(){return this.modelUpdates.value.model},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"schema",{get:function(){return this.modelUpdates.value.schema},enumerable:!1,configurable:!0}),O.\u0275fac=function(S){return new(S||O)(D.\u0275\u0275inject(W.J),D.\u0275\u0275inject(R.i),D.\u0275\u0275inject(F.D),D.\u0275\u0275inject(Q.o))},O.\u0275prov=D.\u0275\u0275defineInjectable({token:O,factory:O.\u0275fac}),O}()},52844:function(se,j,l){l.r(j),l.d(j,{QuickMeasuresUIModule:function(){return Qt}});var I=l(77476),r=l(42729),A=l(99649),H=l(32208),D=l(82156),W=l(79061),F=l(44913),R=l(56598),Q=l(63654),K=l(14525),O=l(93367),L=l(94841),S=l(16748),V=l(16095),B=l(35284),f=l(81337),b=function(n){return n[n.Number=0]="Number",n[n.Enum=1]="Enum",n[n.Boolean=2]="Boolean",n[n.Field=3]="Field",n[n.Instance=4]="Instance",n}({}),P=l(62458),w=function(){function n(){}return n.isNumber=function(t){return P.fF.assertValue(t,"daxTemplateParameter input"),t.kind===b.Number},n.isEnum=function(t){return P.fF.assertValue(t,"daxTemplateParameter input"),t.kind===b.Enum},n.isBoolean=function(t){return P.fF.assertValue(t,"daxTemplateParameter input"),t.kind===b.Boolean},n.isColumnOrMeasure=function(t){return P.fF.assertValue(t,"daxTemplateParameter input"),t.kind===b.Field},n.isInstance=function(t){return P.fF.assertValue(t,"daxTemplateParameter input"),t.kind===b.Instance},n}(),ce=l(3011),de=function(){function n(){}return n.rewrite=function(t,i,a,o){if(t){var s=(0,ce.vH)(i),d={},c=new n;for(var p in t){var u=t[p].input;d[p]=t[p],u&&(w.isColumnOrMeasure(u)?d[p].input=c.rewriteField(u,s,a,o):w.isInstance(u)&&(d[p].input=c.rewriteInstance(u,s,a,o)))}return d}},n.prototype.rewriteField=function(t,i,a,o){for(var s=t.value,d=0,c=i;d<c.length;d++){var p=c[d];s=s?.accept(p)}return _.isEmpty(s?.validate(a,o))||(s=void 0),(0,f.__assign)((0,f.__assign)({},t),{value:s})},n.prototype.rewriteInstance=function(t,i,a,o){for(var s,d,c=null===(s=t.value)||void 0===s?void 0:s.field,p=null===(d=t.value)||void 0===d?void 0:d.filter,u=0,y=i;u<y.length;u++){var v=y[u];c=c?.accept(v),p=p?.rewrite(v)}return _.isEmpty(c?.validate(a,o))||(c=void 0,p=void 0),(0,f.__assign)((0,f.__assign)({},t),{value:c?{field:c,filter:p}:void 0})},n}(),G=l(54834),pe=l(8590),X=l(21571),ue=l(95462),Y=l(94419),ne=l(35510),ie=l(30794),me=l(82762),ae=l(22318),q=l(77526),re=l(81905),oe=l(59973),m=l(14172),M=l(73805),h=l(57243),C=l(83317),T=l(74082),e=l(50423),N=l(28199),ye=l(26898),ge=l(83008),ze=l(11494),$e=l(80435),je=l(57151),Me=l(96899),ve=l(65181),ee=function(){function n(t,i,a,o,s,d,c,p){var u=this;this.aggrOps=t,this.conceptualSchemaProxy=i,this.dataSourcesService=a,this.daxCapabilitiesService=o,this.daxTemplateService=s,this.daxTemplateTelemetry=d,this.eventBridge=c,this.localizationService=p,this.templatesModelStore$=new ne.X({selectedTemplate:void 0,flattenedTemplatesAndCategory:[]}),this.parametersStore$=new ne.X(void 0),this.validation$=this.parameters$.pipe((0,ae.O)(null)).pipe((0,q.x)(),(0,re.w)(function(y){return u.validateParameters(y,u.templatesModelStore$.value.selectedTemplate)})),this.selectedTemplate$=this.templatesModel$.pipe((0,oe.h)(function(y){return!!y.selectedTemplate}),(0,m.U)(function(y){return y.selectedTemplate}),(0,q.x)()),this.isTemplateSelected$=this.selectedTemplate$.pipe((0,M.h)(!0),(0,ae.O)(!1),(0,q.x)(),(0,h.d)(1)),this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager().subscribe(pe.CCe,function(y,v){return u.onModelChanged(v.result)})}return Object.defineProperty(n.prototype,"templatesModel$",{get:function(){return this.templatesModelStore$.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"parameters$",{get:function(){return this.parametersStore$.asObservable()},enumerable:!1,configurable:!0}),n.prototype.ngOnDestroy=function(){this.subscriptionManager.unsubscribeAll()},n.prototype.initialize=function(t){var i=t.selects,a=t.schemaName,o=t.openDaxTemplateEvent,s=t.targetEntity;return(0,f.__awaiter)(this,void 0,void 0,function(){var d,c=this;return(0,f.__generator)(this,function(p){switch(p.label){case 0:return this.destroy$=new ie.xQ,this.schemaName=a,this.targetEntity=s,this.sourceExpressions=_.map(i,function(u){return G.ib.deserializeExpr(u)}),[4,this.conceptualSchemaProxy.get(this.dataSourcesService.get())];case 1:return d=p.sent(),[4,this.initializeTemplates(d)];case 2:return p.sent(),o&&(this.openDaxTemplateEvent=o,this.daxTemplateTelemetry.startTemplateSelectedEvent(o,"Select a measure")),this.selectedTemplate$.pipe((0,C.R)(this.destroy$),(0,re.w)(function(u){return(0,me.D)(c.conceptualSchemaProxy.get(c.dataSourcesService.get())).pipe((0,m.U)(function(y){return{template:u,schema:y}}))})).subscribe(function(u){var y=c.getParameters(u.template,c.parametersStore$.value,u.schema);c.parametersStore$.next(y)}),[2]}})})},n.prototype.updateSelectedTemplate=function(t){this.templatesModelStore$.next((0,f.__assign)((0,f.__assign)({},this.templatesModelStore$.value),{selectedTemplate:t})),this.daxTemplateTelemetry.resolveTemplateSelectedEvent(),this.daxTemplateTelemetry.startTemplateSelectedEvent(this.openDaxTemplateEvent,t.capabilities.name)},n.prototype.updateParameters=function(t,i){if(P.fF.assertValue(t,"parameterInput"),P.fF.assertValue(i,"parameterKey"),t&&i&&_.has(this.parametersStore$.value,i)){var a=_.clone(this.parametersStore$.value),o=a[i];w.isInstance(t)&&!t.value.field&&(t.value.filter=void 0,o.hasBeenSet=!0),o.input=t,o.hasBeenSet=o.hasBeenSet||function(n){var t;return w.isInstance(n)?!(null===(t=n.value)||void 0===t||!t.filter):!!n.value}(o.input),this.parametersStore$.next(a)}},n.prototype.getNewMeasureResult=function(){return(0,f.__awaiter)(this,void 0,void 0,function(){var t,i,a,o,s;return(0,f.__generator)(this,function(d){switch(d.label){case 0:return[4,this.conceptualSchemaProxy.get(this.dataSourcesService.get())];case 1:return t=d.sent(),i=this.templatesModelStore$.value.selectedTemplate,a=fe(this.parametersStore$.value,t,this.daxTemplateService.utils),[4,this.getNewMeasureMetadata(a,i,t)];case 2:return(o=d.sent())&&(s={template:i?.capabilities,parameters:_.mapValues(a,function(c){return{expression:G.ib.serializeExpr(c.expression)}}),newMeasureMetadata:o}),[2,s]}})})},n.prototype.destroy=function(){this.destroy$.next(),this.destroy$.complete()},n.prototype.updateTemplates=function(t){var i=this.flattenAndOrderTemplatesByCategory(t);this.templatesModelStore$.next({selectedTemplate:void 0,flattenedTemplatesAndCategory:i})},n.prototype.initializeTemplates=function(t){return(0,f.__awaiter)(this,void 0,void 0,function(){var i,a;return(0,f.__generator)(this,function(o){switch(o.label){case 0:return[4,this.daxCapabilitiesService.getCapabilities()];case 1:return i=o.sent(),a=this.daxTemplateService.getTemplates(t,i,this.schemaName,1),this.updateTemplates(a),[2]}})})},n.prototype.flattenAndOrderTemplatesByCategory=function(t){var i=this,a=_.groupBy(t,function(u){return(0,X.G)(u.capabilities.category,i.localizationService)}),o=[];for(var s in a){o.push({kind:"category",value:s});for(var d=0,c=a[s];d<c.length;d++)o.push({kind:"daxTemplate",value:c[d]})}return o},n.prototype.validateParameters=function(t,i){return(0,f.__awaiter)(this,void 0,void 0,function(){var a,o,s,d,c,p;return(0,f.__generator)(this,function(u){switch(u.label){case 0:return i&&t?[4,this.conceptualSchemaProxy.get(this.dataSourcesService.get())]:[2,{result:{errors:{},warnings:{}},allParametersSet:!1}];case 1:return a=u.sent(),s=fe(t,a,o=this.daxTemplateService.utils),[4,this.daxCapabilitiesService.getCapabilities()];case 2:return d=u.sent(),c=!0,p=o.validateIfNeeded(i,a,d,{schemaName:this.schemaName,inputValues:s}),_.forEach(i.capabilities.input,function(y){var v=y.name,g=t[v],x=s[v];g?.hasBeenSet?(!o.isValidValueForInput(x,y,a)||y.instance&&x.expression&&o.isDefaultValueFilter(x.expression))&&(p.errors[v]="DaxTemplateDialog_ParameterRequired"):c=!1}),[2,{result:p,allParametersSet:c}]}})})},n.prototype.getParameters=function(t,i,a){var o=this.daxTemplateService.utils,s=fe(i,a,o),d=_.map(s,function(u){return u.expression});d.push.apply(d,this.sourceExpressions||[]);var p=function(n,t,i,a){for(var o={},d=function(v){var g=t?t[v.name]:void 0,x=void 0;g&&(x=g.expression);var E={name:v.name,displayName:(0,X.G)(v.displayName,i),description:(0,X.G)(v.description,i),hasBeenSet:!!x,input:void 0};if(v.column)E.input={kind:b.Field,value:x,validationInfo:{field:{kind:0,type:v.column.type}}};else if(v.measure)E.input={kind:b.Field,value:x,validationInfo:{field:{kind:1,type:v.measure.type}}};else if(v.instance){var U=void 0,z=void 0;x&&(0,T.Hi)(x)&&!_.isEmpty(x.args)&&(U=x.args[0],a.isDefaultValueFilter(x)||(z=x)),E.input={kind:b.Instance,value:{field:U,filter:z&&ue.yl.fromSQExpr(z)},validationInfo:{field:{kind:0,type:v.instance.column.type}}},E.hasBeenSet=!!z}else if(v.constant)if(v.constant.type.numeric)E.input={kind:b.Number,value:x&&(0,T.VC)(x)&&x.value,type:v.constant.type,validationInfo:{decimal:!0,integer:!0}};else if(v.constant.type.enumeration){var Z=v.constant.type.enumeration.members(),le=x&&(0,T.VC)(x)&&x.value;E.input={kind:b.Enum,value:null!=le?_.find(Z,function(Ce){return Ce.value===le}):void 0,type:v.constant.type,selectionOptions:Z}}else v.constant.type.bool&&(E.input={kind:b.Boolean,value:x&&(0,T.VC)(x)&&x.value});o[v.name]=E},c=0,p=n.capabilities.input;c<p.length;c++)d(p[c]);return o}(t,o.generateValuesFromExpressions(t.capabilities.input,d,a),this.localizationService,o);return p},n.prototype.getNewMeasureMetadata=function(t,i,a){var o;return(0,f.__awaiter)(this,void 0,void 0,function(){var s,d,c,p,u=this;return(0,f.__generator)(this,function(y){switch(y.label){case 0:return s=i?.capabilities,s?[4,this.daxCapabilitiesService.getCapabilities()]:[2];case 1:return d=y.sent(),c=i?.getMeasureName(a,d,{schemaName:this.schemaName,inputValues:t}),(p={measureName:c}).formatType=null===(o=s.output)||void 0===o?void 0:o.format,_.forEach(s.input,function(v){var g,x,E,U,z;if(p.formatSource&&p.entity)return!1;if(v.measure||v.column){var Z=null===(g=t[v.name])||void 0===g?void 0:g.expression;P.fF.assertValue(Z,"input expression should be defined");var le=(null===(x=v.measure)||void 0===x?void 0:x.shouldUseForEntitySource)||(null===(E=v.column)||void 0===E?void 0:E.shouldUseForEntitySource),Ce=null===(U=v.measure)||void 0===U?void 0:U.shouldUseForFormatting;if(le){var xe=(null===(z=u.targetEntity)||void 0===z?void 0:z.SourceRef)&&G.ib.deserializeExpr(u.targetEntity),J=void 0;xe&&(0,T.Lk)(xe)&&(J=xe),(J=J??Z.getTargetEntity())&&(p.entity=J.entity,p.schema=u.schemaName)}Ce&&null==p.formatType&&(p.formatSource=G.ib.serializeExpr(Z))}}),[2,p]}})})},n.prototype.onModelChanged=function(t){return(0,f.__awaiter)(this,void 0,void 0,function(){var i,a;return(0,f.__generator)(this,function(o){switch(o.label){case 0:return[4,this.conceptualSchemaProxy.get(this.dataSourcesService.get())];case 1:return i=o.sent(),a=de.rewrite(this.parametersStore$.value,t.changes,i,this.aggrOps),this.parametersStore$.next(a),[2]}})})},n.\u0275fac=function(i){return new(i||n)(e.\u0275\u0275inject(N.C),e.\u0275\u0275inject(ye.i),e.\u0275\u0275inject(ge.D),e.\u0275\u0275inject($e.r3),e.\u0275\u0275inject(je.c),e.\u0275\u0275inject(Me.W),e.\u0275\u0275inject(ze.J),e.\u0275\u0275inject(ve.o))},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n}();function fe(n,t,i){var a,o,s,d={};if(null==n)return d;for(var c in n){var p=void 0,u=null===(a=n[c])||void 0===a?void 0:a.input;if(u){if(w.isColumnOrMeasure(u))p=u.value;else if(w.isNumber(u))p=(0,Y.kQ)(u.value,u.type);else if(w.isEnum(u))p=(0,Y.kQ)(u.value.value,u.type);else if(w.isBoolean(u))p=(0,Y.O7)(u.value);else if(w.isInstance(u)&&null!==(o=u.value)&&void 0!==o&&o.filter&&null!==(s=u.value)&&void 0!==s&&s.field){var y=u.value,v=y.field,g=y.filter,x=v.getTargetColumnRef(t);_.isEmpty(g.where())||(p=i.replacerRewrite(g.where()[0].condition,x,v))}p&&(d[c]={expression:p})}}return d}var Pe=l(93215),Te=l(73221),Se=l(67489),Ue=l(40823),Ae=l(96777),He=l(45334),We=l(80777),Oe=l(44529),he=l(64560),Ke=l(48787),be=l(23983),Ee=function(){function n(t,i,a,o,s,d){this.aggrOps=t,this.conceptualSchemaProxy=i,this.dataSourcesService=a,this.daxTemplateStore=o,this.groupingDesignStateService=s,this.localizationService=d,this.menuMode=he.Kb.Compact}return n.prototype.getMenu=function(t){var i=this,a={items:[]};return this.daxTemplateStore.parameters$.pipe((0,Ke.q)(1)).subscribe(function(o){var s=t.flatNode;if(!s)return a;var d=s.node.data;if(!o||!d||(o=_.pickBy(o,function(y){return w.isColumnOrMeasure(y.input)||w.isInstance(y.input)}),_.isEmpty(o)))return a;if(function(n){return 0===n.fieldType}(d)||function(n){return 2===n.fieldType}(d))return(c=i.createAddToSubMenu()).menu=i.createPropertyMenu(d.contract,o),a.items=[c],a;var p=function(n){return 4===n.fieldType}(d)&&2===d.kpiType;if(p||function(n){return n.isExtension}(d)){var c=i.createAddToSubMenu(),u=_.pickBy(o,function(v){return te(v.input)});return c.menu={items:i.convertParametersToMenuItems(u)},a.items=[c],a}}),_.isEmpty(a.items)?void 0:a},n.prototype.menuItemClick=function(t){return(0,f.__awaiter)(this,void 0,void 0,function(){var i,a,o,s,d,c,p;return(0,f.__generator)(this,function(u){switch(u.label){case 0:return P.fF.assertValue(i=t.menuItem.data,"AddTo menu item"),i?(o=i.parameter,s=t.flatNode.node.data,P.fF.assertValue(a=i.parameterKey,"parameter key undefined in AddTo menu item"),P.fF.assertValue(o,"parameter undefined in AddTo menu item"),P.fF.assertValue(s,"fieldItem undefined"),a&&o&&s&&(d=(0,Oe.Sd)(s,this.groupingDesignStateService))?(c=o.input,[4,this.conceptualSchemaProxy.get(this.dataSourcesService.get())]):[2]):[2];case 1:return p=u.sent(),w.isColumnOrMeasure(c)?function(n,t,i){return!!t&&te(t)&&!He.m.discourageAggregation(n,i)}(d,c,p)?c.value=this.aggrOps.createExprWithAggregate(d,p,!0,Ie(c.validationInfo)):(!te(c)||(0,T.kb)(d))&&(c.value=d):w.isInstance(c)&&(c.value.field=d),this.daxTemplateStore.updateParameters(c,a),[2]}})})},n.prototype.createPropertyMenu=function(t,i){if(t.measure||t.column){var o,a={items:[]};return t.column?o=_.pickBy(i,function(s){if(w.isColumnOrMeasure(s.input)&&!te(s.input)){var d=Ie(s.input.validationInfo);return _.isEmpty(d)||We.Ge.isCompatibleTo(t.type,d,!0)}return!0}):t.measure&&(o=_.pickBy(i,function(s){return te(s.input)})),a.items=this.convertParametersToMenuItems(o),a}},n.prototype.createAddToSubMenu=function(){return{text:this.localizationService.get("DaxTemplateDialog_AddToItemMenu"),type:he.iB.SubMenu}},n.prototype.convertParametersToMenuItems=function(t){return _.map(t,function(i,a){return{text:i.displayName,type:he.iB.Button,checked:!1,data:{parameterKey:a,parameter:i}}})},n.\u0275fac=function(i){return new(i||n)(e.\u0275\u0275inject(N.C),e.\u0275\u0275inject(ye.i),e.\u0275\u0275inject(ge.D),e.\u0275\u0275inject(ee),e.\u0275\u0275inject(be.AA),e.\u0275\u0275inject(ve.o))},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n}();function te(n){var t;return!!w.isColumnOrMeasure(n)&&1===(null===(t=n.validationInfo.field)||void 0===t?void 0:t.kind)}function Ie(n){var t,i=null===(t=n?.field)||void 0===t?void 0:t.type;if(i)return i.variant||[i]}var k=l(70863),qe=function(){function n(t){var i=this;this.daxTemplateStore=t,this.isTemplateSelected=!1,this.onDestroy$=new ie.xQ,this.daxTemplateStore.isTemplateSelected$.pipe((0,C.R)(this.onDestroy$)).subscribe(function(a){return i.isTemplateSelected=a})}return n.prototype.canShowMenu=function(t){return k.t3(t)||k.kb(t)||k.ez(t)?this.isTemplateSelected:!(k.wb(t)||k.y3(t)||k.Ov(t)||k.jz(t))&&void 0},n.prototype.ngOnDestroy=function(){this.onDestroy$.next(),this.onDestroy$.complete()},n.\u0275fac=function(i){return new(i||n)(e.\u0275\u0275inject(ee))},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n}(),et=l(20598),we=l(88023),Fe=l(78963),Le=l(75096),De=l(59725),tt=l(59017),nt=l(29524),it=l(72525),at=l(67930),rt=l(2839),ot=l(59968),lt=l(60733),Be=l(20551),st=l(64716),ct=l(85721),dt=l(65005),pt=l(86663),ut=l(24326),mt=l(85102);function gt(n,t){1&n&&(e.\u0275\u0275elementStart(0,"div",14),e.\u0275\u0275element(1,"h4",15),e.\u0275\u0275elementEnd())}function vt(n,t){if(1&n&&(e.\u0275\u0275elementStart(0,"label"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){var i=e.\u0275\u0275nextContext(2).ngIf,a=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(a.getDisplayNameFromGetter(i.selectedTemplate.capabilities.displayName))}}function ft(n,t){1&n&&e.\u0275\u0275element(0,"label",16)}function ht(n,t){if(1&n&&(e.\u0275\u0275elementStart(0,"label",20),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){var i=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(i.value)}}function _t(n,t){if(1&n&&(e.\u0275\u0275elementStart(0,"label",21),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){var i=e.\u0275\u0275nextContext().$implicit,a=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(a.getDisplayNameFromGetter(i.value.capabilities.displayName))}}function Ct(n,t){if(1&n&&(e.\u0275\u0275elementStart(0,"tri-dropdown-item",17),e.\u0275\u0275template(1,ht,2,1,"label",18),e.\u0275\u0275template(2,_t,2,1,"label",19),e.\u0275\u0275elementEnd()),2&n){var i=t.$implicit;e.\u0275\u0275property("value",i.value)("disabled","category"===i.kind),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","category"===i.kind),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","daxTemplate"===i.kind)}}function xt(n,t){if(1&n&&(e.\u0275\u0275elementStart(0,"div",22)(1,"mat-error",23),e.\u0275\u0275element(2,"pbi-icon",24)(3,"span",25),e.\u0275\u0275elementEnd()()),2&n){var i=e.\u0275\u0275nextContext().ngIf,a=e.\u0275\u0275nextContext().ngIf;e.\u0275\u0275advance(3),e.\u0275\u0275property("localize",i.result.warnings[a.selectedTemplate])}}function yt(n,t){if(1&n&&e.\u0275\u0275element(0,"a",29),2&n){var i=e.\u0275\u0275nextContext(3).ngIf;e.\u0275\u0275property("href","https://go.microsoft.com/fwlink/?linkid="+i.selectedTemplate.capabilities.helpLink,e.\u0275\u0275sanitizeUrl)}}function Mt(n,t){if(1&n&&(e.\u0275\u0275elementStart(0,"div",26)(1,"span",27),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,yt,1,1,"a",28),e.\u0275\u0275elementEnd()),2&n){var i=e.\u0275\u0275nextContext(2).ngIf,a=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",a.getDisplayNameFromGetter(i.selectedTemplate.capabilities.description)," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.selectedTemplate.capabilities.helpLink)}}function Pt(n,t){if(1&n){var i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",39)(1,"input",40),e.\u0275\u0275listener("change",function(s){e.\u0275\u0275restoreView(i);var d=e.\u0275\u0275nextContext().ngIf,c=e.\u0275\u0275nextContext().$implicit,p=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(p.onNumberParameterChange(s.target.value,c.key,d.input))}),e.\u0275\u0275elementEnd()()}if(2&n){var a=e.\u0275\u0275nextContext().ngIf;e.\u0275\u0275advance(1),e.\u0275\u0275property("value",null==a.input?null:a.input.value),e.\u0275\u0275attribute("aria-label",a.displayName)}}function Tt(n,t){if(1&n&&(e.\u0275\u0275elementStart(0,"tri-dropdown-item",43)(1,"label",44),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&n){var i=t.$implicit,a=e.\u0275\u0275nextContext(7);e.\u0275\u0275property("value",i),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(a.getDisplayNameFromGetter(i.displayName))}}var Ne=function(){return{panelClass:"dax-template-dropdown-panel"}};function St(n,t){if(1&n){var i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tri-dropdown",41),e.\u0275\u0275listener("valueChange",function(d){e.\u0275\u0275restoreView(i);var c=e.\u0275\u0275nextContext().ngIf,p=e.\u0275\u0275nextContext().$implicit,u=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(u.onEnumParameterChange(d,p.key,c.input))}),e.\u0275\u0275elementStart(1,"tri-dropdown-trigger",8)(2,"label"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(4,Tt,3,2,"tri-dropdown-item",42),e.\u0275\u0275elementEnd()}if(2&n){var a=e.\u0275\u0275nextContext().ngIf,o=e.\u0275\u0275nextContext(5);e.\u0275\u0275property("value",a.input.value)("options",e.\u0275\u0275pureFunction0(4,Ne)),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(o.getDisplayNameFromGetter(a.input.value.displayName)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",null==a.input?null:a.input.selectionOptions)}}var ke=function(t){return{expr:t}};function Ot(n,t){if(1&n){var i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"field-picker-modern-lazy",45),e.\u0275\u0275listener("onExprChange",function(s){e.\u0275\u0275restoreView(i);var d=e.\u0275\u0275nextContext().ngIf,c=e.\u0275\u0275nextContext().$implicit,p=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(p.onFieldPickerChange(null==s.newExpr?null:s.newExpr.expr,c.key,d.input))}),e.\u0275\u0275elementEnd()}if(2&n){var a=e.\u0275\u0275nextContext().ngIf;e.\u0275\u0275property("initialExpr",null!=a.input&&a.input.value?e.\u0275\u0275pureFunction1(3,ke,a.input.value):void 0)("validators",null==a.input?null:a.input.validationInfo)("withFieldList",!0)}}function bt(n,t){if(1&n){var i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"instance-picker-modern",48),e.\u0275\u0275listener("modelChange",function(d){e.\u0275\u0275restoreView(i);var c=e.\u0275\u0275nextContext(2).ngIf,p=e.\u0275\u0275nextContext().$implicit,u=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(u.onInstanceValueChanged(d,p.key,c.input))}),e.\u0275\u0275elementEnd()}if(2&n){var a=e.\u0275\u0275nextContext(2).ngIf,o=e.\u0275\u0275nextContext(5);e.\u0275\u0275property("field",null==a.input||null==a.input.value?null:a.input.value.field)("selectedValue",null==a.input||null==a.input.value?null:a.input.value.filter)("mode",o.instancePickerMode)}}function Et(n,t){if(1&n){var i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"field-picker-modern-lazy",46),e.\u0275\u0275listener("onExprChange",function(s){e.\u0275\u0275restoreView(i);var d=e.\u0275\u0275nextContext().ngIf,c=e.\u0275\u0275nextContext().$implicit,p=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(p.onInstanceFieldChange(null==s.newExpr?null:s.newExpr.expr,c.key,d.input))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(2,bt,1,3,"instance-picker-modern",47),e.\u0275\u0275elementContainerEnd()}if(2&n){var a=e.\u0275\u0275nextContext().ngIf;e.\u0275\u0275advance(1),e.\u0275\u0275property("initialExpr",null!=a.input&&null!=a.input.value&&a.input.value.field?e.\u0275\u0275pureFunction1(4,ke,a.input.value.field):void 0)("validators",null==a.input?null:a.input.validationInfo)("withFieldList",!0),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==a.input||null==a.input.value?null:a.input.value.field)}}function It(n,t){if(1&n&&(e.\u0275\u0275elementStart(0,"div",22)(1,"mat-error",49),e.\u0275\u0275element(2,"pbi-icon",50)(3,"span",25),e.\u0275\u0275elementEnd()()),2&n){var i=e.\u0275\u0275nextContext(2).$implicit,a=e.\u0275\u0275nextContext(2).ngIf;e.\u0275\u0275advance(3),e.\u0275\u0275property("localize",a.result.errors[i.key])}}function wt(n,t){if(1&n&&(e.\u0275\u0275elementStart(0,"div",22)(1,"mat-error",23),e.\u0275\u0275element(2,"pbi-icon",24)(3,"span",25),e.\u0275\u0275elementEnd()()),2&n){var i=e.\u0275\u0275nextContext(2).$implicit,a=e.\u0275\u0275nextContext(2).ngIf;e.\u0275\u0275advance(3),e.\u0275\u0275property("localize",a.result.warnings[i.key])}}function Ft(n,t){if(1&n&&(e.\u0275\u0275elementStart(0,"div",33)(1,"div",14)(2,"h4"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"pbi-icon",34),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,Pt,2,2,"div",35),e.\u0275\u0275template(6,St,5,5,"tri-dropdown",36),e.\u0275\u0275template(7,Ot,1,5,"field-picker-modern-lazy",37),e.\u0275\u0275template(8,Et,3,6,"ng-container",38),e.\u0275\u0275template(9,It,4,1,"div",11),e.\u0275\u0275template(10,wt,4,1,"div",11),e.\u0275\u0275elementEnd()),2&n){var i=t.ngIf,a=e.\u0275\u0275nextContext().$implicit,o=e.\u0275\u0275nextContext(2).ngIf,s=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngSwitch",null==i.input?null:i.input.kind),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(i.displayName),e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate("title",i.description),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",s.DaxTemplateParameterKind.Number),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",s.DaxTemplateParameterKind.Enum),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",s.DaxTemplateParameterKind.Field),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",s.DaxTemplateParameterKind.Instance),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",o.result.errors[a.key]&&i.hasBeenSet),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",o.result.warnings[a.key]&&i.hasBeenSet)}}function Lt(n,t){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Ft,11,9,"div",32),e.\u0275\u0275elementContainerEnd()),2&n){var i=t.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.value)}}function Dt(n,t){if(1&n&&(e.\u0275\u0275elementStart(0,"div",30),e.\u0275\u0275template(1,Lt,2,1,"ng-container",31),e.\u0275\u0275pipe(2,"keyvalue"),e.\u0275\u0275elementEnd()),2&n){var i=t.ngIf,a=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind2(2,1,i,a.parameterDisplayOrder))}}function Bt(n,t){if(1&n){var i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div"),e.\u0275\u0275template(2,gt,2,0,"div",6),e.\u0275\u0275elementStart(3,"tri-dropdown",7),e.\u0275\u0275listener("valueChange",function(c){e.\u0275\u0275restoreView(i);var p=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(p.onTemplateSelectionChange(c))}),e.\u0275\u0275elementStart(4,"tri-dropdown-trigger",8),e.\u0275\u0275template(5,vt,2,1,"label",5),e.\u0275\u0275template(6,ft,1,0,"label",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,Ct,3,4,"tri-dropdown-item",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,xt,4,1,"div",11),e.\u0275\u0275template(9,Mt,4,2,"div",12),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(10,Dt,3,4,"div",13),e.\u0275\u0275pipe(11,"async"),e.\u0275\u0275elementContainerEnd()}if(2&n){var a=t.ngIf,o=e.\u0275\u0275nextContext().ngIf,s=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",s.showFieldList),e.\u0275\u0275advance(1),e.\u0275\u0275property("value",o.selectedTemplate)("options",e.\u0275\u0275pureFunction0(11,Ne)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",o.selectedTemplate),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!o.selectedTemplate),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",o.flattenedTemplatesAndCategory),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",a.result.warnings[o.selectedTemplate]),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",o.selectedTemplate),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(11,9,null==s.daxTemplateStore?null:s.daxTemplateStore.parameters$))}}function Nt(n,t){if(1&n&&(e.\u0275\u0275elementStart(0,"div",4),e.\u0275\u0275template(1,Bt,12,12,"ng-container",5),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementEnd()),2&n){var i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(2,1,null==i.daxTemplateStore?null:i.daxTemplateStore.validation$))}}function kt(n,t){1&n&&(e.\u0275\u0275elementStart(0,"div",51),e.\u0275\u0275element(1,"pbi-spinner",52)(2,"span",53),e.\u0275\u0275elementEnd())}function Vt(n,t){if(1&n&&(e.\u0275\u0275elementStart(0,"div",54)(1,"div",14),e.\u0275\u0275element(2,"h4",55),e.\u0275\u0275pipe(3,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"pbi-field-list",56),e.\u0275\u0275pipe(5,"async"),e.\u0275\u0275elementEnd()),2&n){var i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(3,5,"TaskPane_Fields")),e.\u0275\u0275advance(2),e.\u0275\u0275property("fieldListTree",e.\u0275\u0275pipeBind1(5,7,i.fieldListTree$))("scrollSelectedItemIntoViewOnInit",!0)("hasHighlights",!1)("options",i.fieldListTreeOptions)}}var zt=function(t){return{"grid-template-columns":t}},$t=function(){function n(){}return n.prototype.isDraggable=function(t){return!k.wb(t)&&!k.y3(t)&&(!!(k.t3(t)||k.kb(t)||k.ez(t))||void 0)},n}(),_e=function(n){function t(i,a,o,s,d,c,p,u,y,v){var g=n.call(this)||this;return g.daxTemplateStore=i,g.captionSetting=a,g.draggableSetting=o,g.inlineItemsSetting=s,g.showMenuSetting=d,g.fieldListMenuStrategy=c,g.fieldListTreeService=p,g.groupingDesignStateService=u,g.localizationService=y,g.modelService=v,g.showFieldList=!0,g.fieldListTree$=g.fieldListTreeService.fieldListTree$,g.parameterPickerDataFormat=De.L$,g.instancePickerMode=et.j6,g.DaxTemplateParameterKind=b,g.parameterDisplayOrder=function(){return 0},g.fieldListTreeOptions={dragDrop:{dragStart:function(E){return g.dragStartHandler(E.sourceEvent,E.flatNode)}},menu:g.fieldListMenuStrategy,editLabel:null},g.pbiTreeNodeSettingOptions={captionSetting:g.captionSetting,draggableSetting:g.draggableSetting,inlineItemsSetting:g.inlineItemsSetting,showMenuSetting:g.showMenuSetting},g.fieldListTreeService.modelToPbiTreeConverterOptions=g.pbiTreeNodeSettingOptions,g}return(0,f.__extends)(t,n),t.prototype.ngOnInit=function(){return(0,f.__awaiter)(this,void 0,void 0,function(){return(0,f.__generator)(this,function(i){switch(i.label){case 0:return this.showFieldList?[4,this.buildFieldListTree()]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})},t.prototype.onTemplateSelectionChange=function(i){this.daxTemplateStore.updateSelectedTemplate(i)},t.prototype.onEnumParameterChange=function(i,a,o){o.value=i,this.daxTemplateStore.updateParameters(o,a)},t.prototype.onNumberParameterChange=function(i,a,o){o.value=Number(i),Number.isNaN(o.value)&&(o.value=0),this.daxTemplateStore.updateParameters(o,a)},t.prototype.onFieldPickerChange=function(i,a,o){o.value=i,this.daxTemplateStore.updateParameters(o,a)},t.prototype.onInstanceFieldChange=function(i,a,o){o.value.field=i,this.daxTemplateStore.updateParameters(o,a)},t.prototype.onInstanceValueChanged=function(i,a,o){o.value=i,this.daxTemplateStore.updateParameters(o,a)},t.prototype.getDisplayNameFromGetter=function(i){return(0,X.G)(i,this.localizationService)},t.prototype.buildFieldListTree=function(){return(0,f.__awaiter)(this,void 0,void 0,function(){var i=this;return(0,f.__generator)(this,function(a){switch(a.label){case 0:return[4,this.modelService.update([])];case 1:return a.sent(),(0,tt.aj)([this.modelService.modelChange$,this.daxTemplateStore.isTemplateSelected$]).pipe((0,C.R)(this.onDestroy$),(0,oe.h)(function(o){var s=o[0];return!!s?.model}),(0,m.U)(function(o){return o[0].model})).subscribe(function(o){i.fieldListTreeService.setOrUpdateFieldListTreeModel(o,[])}),[2]}})})},t.prototype.dragStartHandler=function(i,a){var o=a.node,s=o.data?(0,Oe.Sd)(o.data,this.groupingDesignStateService):void 0;if(null!=s){var d={id:o.id,icon:o.icon,label:o.displayName,fieldExpr:G.ib.serializeExpr(s)};i.dataTransfer.setData(De.L$,JSON.stringify(d))}},t.prototype.ngOnDestroy=function(){return n.prototype.ngOnDestroy.call(this)},t.\u0275fac=function(a){return new(a||t)(e.\u0275\u0275directiveInject(ee),e.\u0275\u0275directiveInject(nt.B),e.\u0275\u0275directiveInject(we.F),e.\u0275\u0275directiveInject(it.wt),e.\u0275\u0275directiveInject(Fe.W),e.\u0275\u0275directiveInject(Ee),e.\u0275\u0275directiveInject(Le.p),e.\u0275\u0275directiveInject(be.AA),e.\u0275\u0275directiveInject(ve.o),e.\u0275\u0275directiveInject(Pe.b))},t.\u0275cmp=e.\u0275\u0275defineComponent({type:t,selectors:[["quick-measures-template"]],inputs:{showFieldList:"showFieldList"},features:[e.\u0275\u0275ProvidersFeature([{provide:we.F,useClass:$t},{provide:Fe.W,useClass:qe},Ee,Le.p]),e.\u0275\u0275InheritDefinitionFeature],decls:6,vars:8,consts:[[1,"container",3,"ngStyle"],["class","daxTemplateContainer",4,"ngIf","ngIfElse"],["templateLoading",""],["class","daxFieldListContainer",4,"ngIf"],[1,"daxTemplateContainer"],[4,"ngIf"],["class","label",4,"ngIf"],["id","templateSelector",1,"tri-caption1",3,"value","options","valueChange"],[1,"dropdownTrigger"],["localize","DaxTemplateDialog_SelectMeasurePrompt",4,"ngIf"],["class","dropdownItem tri-caption1",3,"value","disabled",4,"ngFor","ngForOf"],["role","alert","aria-live","polite",4,"ngIf"],["class","description",4,"ngIf"],["class","parameterContainer",4,"ngIf"],[1,"label"],["for","templateSelector","localize","DaxTemplateDialog_CalculationTitle"],["localize","DaxTemplateDialog_SelectMeasurePrompt"],[1,"dropdownItem","tri-caption1",3,"value","disabled"],["class","dropdownItemContent category",4,"ngIf"],["class","dropdownItemContent template",4,"ngIf"],[1,"dropdownItemContent","category"],[1,"dropdownItemContent","template"],["role","alert","aria-live","polite"],[1,"validation","warning","label"],["name","warning","size","mini"],[1,"text",3,"localize"],[1,"description"],["role","text"],["target","_blank","class","pbi-external-link fluentTheme-sm-reg","localize","Generic_LearnMore",3,"href",4,"ngIf"],["target","_blank","localize","Generic_LearnMore",1,"pbi-external-link","fluentTheme-sm-reg",3,"href"],[1,"parameterContainer"],[4,"ngFor","ngForOf"],[3,"ngSwitch",4,"ngIf"],[3,"ngSwitch"],["name","info","size","mini","aria-hidden","true",3,"title"],["tri-textfield","","class","tri-flex tri-flex-col",4,"ngSwitchCase"],["class","tri-caption1",3,"value","options","valueChange",4,"ngSwitchCase"],[3,"initialExpr","validators","withFieldList","onExprChange",4,"ngSwitchCase"],[4,"ngSwitchCase"],["tri-textfield","",1,"tri-flex","tri-flex-col"],["type","number",1,"numberInput",3,"value","change"],[1,"tri-caption1",3,"value","options","valueChange"],["class","dropdownItem tri-caption1",3,"value",4,"ngFor","ngForOf"],[1,"dropdownItem","tri-caption1",3,"value"],[1,"dropdownItemContent"],[3,"initialExpr","validators","withFieldList","onExprChange"],["aria-controls","instancePickerControl",3,"initialExpr","validators","withFieldList","onExprChange"],["id","instancePickerControl","aria-live","polite",3,"field","selectedValue","mode","modelChange",4,"ngIf"],["id","instancePickerControl","aria-live","polite",3,"field","selectedValue","mode","modelChange"],[1,"validation","error","label"],["name","status-error-full","size","mini","aria-hidden","true"],["aria-live","polite","role","status",1,"templateLoadingMessage"],["aria-busy","true",1,"pbi-spinner-small"],["localize","DaxTemplateDialog_TemplateLoadingMessage",1,"text"],[1,"daxFieldListContainer"],["localize","TaskPane_Fields"],[1,"fieldList",3,"fieldListTree","scrollSelectedItemIntoViewOnInit","hasHighlights","options"]],template:function(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275template(1,Nt,3,3,"div",1),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275template(3,kt,3,0,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(5,Vt,6,9,"div",3),e.\u0275\u0275elementEnd()),2&a){var s=e.\u0275\u0275reference(4);e.\u0275\u0275property("ngStyle",e.\u0275\u0275pureFunction1(6,zt,o.showFieldList?"repeat(2, 1fr)":"1fr")),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(2,4,null==o.daxTemplateStore?null:o.daxTemplateStore.templatesModel$))("ngIfElse",s),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",o.showFieldList)}},dependencies:[I.NgForOf,I.NgIf,I.NgStyle,I.NgSwitch,I.NgSwitchCase,at.m,rt.O,ot.X,lt.TO,Be.M3,st.l,ct.q,Be.ii,dt.l,pt._,ut.k,I.AsyncPipe,I.KeyValuePipe,mt.F],styles:['.container[_ngcontent-%COMP%]{display:grid;height:100%;width:100%;column-gap:2em;color:var(--colorNeutralForeground1);font-size:var(--sm-font-size, 12px)}.container[_ngcontent-%COMP%]   .daxTemplateContainer[_ngcontent-%COMP%]{display:flex;flex-direction:column;row-gap:2em;height:100%;width:100%;overflow:hidden}.container[_ngcontent-%COMP%]   .daxTemplateContainer[_ngcontent-%COMP%]   tri-dropdown[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]   .daxTemplateContainer[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{line-height:1.2em}html:not([dir="rtl"])[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .daxTemplateContainer[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .daxTemplateContainer[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{margin:5px 0 15px}html[dir="rtl"][_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .daxTemplateContainer[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .daxTemplateContainer[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{margin:5px 0 15px}.container[_ngcontent-%COMP%]   .daxTemplateContainer[_ngcontent-%COMP%]   .parameterContainer[_ngcontent-%COMP%]{display:flex;flex-direction:column;row-gap:1.8em}.container[_ngcontent-%COMP%]   .daxTemplateContainer[_ngcontent-%COMP%]   .parameterContainer[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]   .daxTemplateContainer[_ngcontent-%COMP%]   .parameterContainer[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button, .container[_ngcontent-%COMP%]   .daxTemplateContainer[_ngcontent-%COMP%]   .parameterContainer[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;-moz-appearance:textfield;margin:0}.container[_ngcontent-%COMP%]   .daxTemplateContainer[_ngcontent-%COMP%]   .parameterContainer[_ngcontent-%COMP%]   instance-picker-modern[_ngcontent-%COMP%]{display:block}.container[_ngcontent-%COMP%]   .daxTemplateContainer[_ngcontent-%COMP%]   .validation[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;column-gap:3px;margin-top:8px}.container[_ngcontent-%COMP%]   .daxTemplateContainer[_ngcontent-%COMP%]   .validation.error[_ngcontent-%COMP%]{color:var(--colorDangerForeground1)}.container[_ngcontent-%COMP%]   .daxTemplateContainer[_ngcontent-%COMP%]   .validation.warning[_ngcontent-%COMP%]{color:var(--colorWarningForeground1)}.container[_ngcontent-%COMP%]   .daxTemplateContainer[_ngcontent-%COMP%]   pbi-form-field[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}.container[_ngcontent-%COMP%]   .daxTemplateContainer[_ngcontent-%COMP%]   pbi-form-field[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, .container[_ngcontent-%COMP%]   .daxTemplateContainer[_ngcontent-%COMP%]   pbi-form-field[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.container[_ngcontent-%COMP%]   .daxFieldListContainer[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column}.container[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:flex;margin-bottom:5px;line-height:20px}.container[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{align-self:center;font-size:var(--lg-font-size, 16px);font-weight:400;margin-top:0;margin-bottom:0}html:not([dir="rtl"])[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-left:0}html[dir="rtl"][_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-right:0}html:not([dir="rtl"])[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-right:6px}html[dir="rtl"][_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-left:6px}.container[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   pbi-icon[_ngcontent-%COMP%]{align-self:center;height:18px}  .dax-template-dropdown-panel tri-dropdown-item label.dropdownItemContent{font-size:var(--sm-font-size);color:var(--colorNeutralForeground1)}  .dax-template-dropdown-panel tri-dropdown-item label.dropdownItemContent.template{margin:0 16px}  .dax-template-dropdown-panel tri-dropdown-item label.dropdownItemContent.category{font-weight:600}']}),t}(Te.w),Ve=function(n){function t(i,a,o,s,d){var c=n.call(this)||this;return c.dataSourcesService=i,c.daxTemplateStore=a,c.daxTemplateTelemetry=o,c.templateDialogPayload=s,c.dataSourceSerializer=d,c}return(0,f.__extends)(t,n),t.prototype.ngOnInit=function(){return(0,f.__awaiter)(this,void 0,void 0,function(){var i,a=this;return(0,f.__generator)(this,function(o){switch(o.label){case 0:return P.fF.assertValue(this.templateDialogPayload.input,"templateDialogPayload input"),i=this.dataSourceSerializer.deserializeDataSources(this.templateDialogPayload.input.dataSources),this.dataSourcesService.set(i),[4,this.daxTemplateStore.initialize(this.templateDialogPayload.input)];case 1:return o.sent(),this.templateDialogPayload.onOkButtonClick=function(){return a.onCommit()},this.templateDialogPayload.onCancelButtonClick=function(){return a.onCancel()},this.disableCommit$=this.daxTemplateStore.validation$.pipe((0,m.U)(function(s){var c=s.allParametersSet;return!_.isEmpty(s.result.errors)||!c})),this.lifecycleSubscriptions.add(this.disableCommit$.subscribe(function(s){return a.templateDialogPayload.setOkButtonState(s)})),[2]}})})},t.prototype.onCommit=function(){return(0,f.__awaiter)(this,void 0,void 0,function(){var i;return(0,f.__generator)(this,function(a){switch(a.label){case 0:return[4,this.daxTemplateStore.getNewMeasureResult()];case 1:return i=a.sent(),P.fF.assertValue(i,"new quick measure result"),i?(this.daxTemplateTelemetry.resolveTemplateSelectedEvent(!0),[2,i]):[2]}})})},t.prototype.onCancel=function(){return this.daxTemplateTelemetry.resolveTemplateSelectedEvent(),Promise.resolve(void 0)},t.prototype.ngOnDestroy=function(){return this.daxTemplateStore.destroy(),n.prototype.ngOnDestroy.call(this)},t.\u0275fac=function(a){return new(a||t)(e.\u0275\u0275directiveInject(ge.D),e.\u0275\u0275directiveInject(ee),e.\u0275\u0275directiveInject(Me.W),e.\u0275\u0275directiveInject(Se.x),e.\u0275\u0275directiveInject(Ue._))},t.\u0275cmp=e.\u0275\u0275defineComponent({type:t,selectors:[["quick-measures-dialog"]],features:[e.\u0275\u0275ProvidersFeature([Se.x,ee,Pe.b]),e.\u0275\u0275InheritDefinitionFeature],decls:2,vars:1,consts:[[3,"showFieldList"]],template:function(a,o){1&a&&(e.\u0275\u0275elementStart(0,"template-dialog"),e.\u0275\u0275element(1,"quick-measures-template",0),e.\u0275\u0275elementEnd()),2&a&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("showFieldList",!0))},dependencies:[Ae.J,_e],styles:["quick-measures-template[_ngcontent-%COMP%]{display:block;height:592px;width:642px}"]}),t}(Te.w),jt=l(22695),Rt=[{type:_e,componentId:"QuickMeasuresTemplateComponentId"}],Qt=function(){function n(){}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[I.CommonModule,H.J,D.N.withManifests(Rt),W.v,A.LD,F.lK,R.K,Q.X,K.g,O.U,L.b,S.H,V.Z,B.J,r.c.withManifest([{componentIdentifier:jt.T,componentType:Ve}])]}),n}()},56598:function(se,j,l){l.d(j,{K:function(){return L}});var I=l(67659),r=l(5806),A=l(94770),H=l(93367),D=l(94841),W=l(79725),F=l(16095),R=l(77476),Q=l(17174),K=l(79061),O=l(50423),L=function(){function S(){}return S.\u0275fac=function(B){return new(B||S)},S.\u0275mod=O.\u0275\u0275defineNgModule({type:S}),S.\u0275inj=O.\u0275\u0275defineInjector({imports:[R.CommonModule,r.Y,Q.u5,K.v,I._,A.f,H.U,D.b,W.j,F.Z,Q.UX]}),S}()},65005:function(se,j,l){l.d(j,{l:function(){return oe}});var I=l(81337),r=l(50423),A=l(48787),H=l(30794),D=l(37196),W=[],F=l(77476),R=l(68070),Q=l(89237);function K(m,M){1&m&&r.\u0275\u0275element(0,"div",7)}function O(m,M){1&m&&(r.\u0275\u0275elementStart(0,"div",8),r.\u0275\u0275element(1,"div",9)(2,"div",10),r.\u0275\u0275elementEnd())}function L(m,M){1&m&&(r.\u0275\u0275elementStart(0,"div",11),r.\u0275\u0275element(1,"div",12),r.\u0275\u0275elementStart(2,"div",13),r.\u0275\u0275element(3,"div",14)(4,"div",15),r.\u0275\u0275elementEnd()())}function S(m,M){if(1&m&&(r.\u0275\u0275elementContainerStart(0,3),r.\u0275\u0275template(1,K,1,0,"div",4),r.\u0275\u0275template(2,O,3,0,"div",5),r.\u0275\u0275template(3,L,5,0,"div",6),r.\u0275\u0275elementContainerEnd()),2&m){var h=M.$implicit,C=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("ngSwitch",h),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngSwitchCase",C.largeBarType),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngSwitchCase",C.multipleBarType),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngSwitchCase",C.multipleSmallLargeType)}}function V(m,M){if(1&m&&(r.\u0275\u0275elementStart(0,"div",1),r.\u0275\u0275template(1,S,4,4,"ng-container",2),r.\u0275\u0275elementEnd()),2&m){var h=r.\u0275\u0275nextContext();r.\u0275\u0275property("ngStyle",h.barsStyle),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",h.barsProperties.bars)}}var ce=function(){function m(){this.largeBarType=0,this.multipleBarType=1,this.multipleSmallLargeType=2}return m.prototype.ngOnChanges=function(){this.barsProperties&&(this.barsStyle={height:"".concat((this.barsProperties.height+8)*this.barsProperties.bars.length,"px")})},m.\u0275fac=function(h){return new(h||m)},m.\u0275cmp=r.\u0275\u0275defineComponent({type:m,selectors:[["shimmering-bars"]],inputs:{barsProperties:"barsProperties"},features:[r.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[["class","bars",3,"ngStyle",4,"ngIf"],[1,"bars",3,"ngStyle"],[3,"ngSwitch",4,"ngFor","ngForOf"],[3,"ngSwitch"],["class","largerLoadingBar animate",4,"ngSwitchCase"],["class","multipleBars",4,"ngSwitchCase"],["class","multipleSmallLarge",4,"ngSwitchCase"],[1,"largerLoadingBar","animate"],[1,"multipleBars"],[1,"miniLoadingBar","animate"],[1,"smallerLoadingBar","animate"],[1,"multipleSmallLarge"],[1,"shimmerBox","animate"],[1,"smallLargeBarContainer"],[1,"upperLoadingBar","animate"],[1,"lowerLoadingBar","animate"]],template:function(h,C){1&h&&r.\u0275\u0275template(0,V,2,2,"div",0),2&h&&r.\u0275\u0275property("ngIf",C.barsProperties)},dependencies:[F.NgForOf,F.NgIf,F.NgStyle,F.NgSwitch,F.NgSwitchCase],styles:['[_nghost-%COMP%]{--shimmer-background-color: var(--gray-20);--shimmer-animate1: var(--gray-30);--shimmer-animate2: var(--gray-50)}[data-legacy-theming=false]   [_nghost-%COMP%]{--shimmer-background-color: var(--colorNeutralBackground3);--shimmer-animate1: var(--colorNeutralBackground3Hover);--shimmer-animate2: var(--colorNeutralBackground3Pressed)}.bars[_ngcontent-%COMP%]{display:flex;flex-direction:column}.largerLoadingBar[_ngcontent-%COMP%]{border-radius:2px;flex-grow:1;background:var(--shimmer-background-color)}html:not([dir="rtl"])[_nghost-%COMP%]   .largerLoadingBar[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .largerLoadingBar[_ngcontent-%COMP%]{margin:4px 8px}html[dir="rtl"][_nghost-%COMP%]   .largerLoadingBar[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .largerLoadingBar[_ngcontent-%COMP%]{margin:4px 8px}.multipleBars[_ngcontent-%COMP%]{display:flex;align-items:center;flex-grow:1}html:not([dir="rtl"])[_nghost-%COMP%]   .multipleBars[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .multipleBars[_ngcontent-%COMP%]{margin:4px 8px}html[dir="rtl"][_nghost-%COMP%]   .multipleBars[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .multipleBars[_ngcontent-%COMP%]{margin:4px 8px}.miniLoadingBar[_ngcontent-%COMP%]{border-radius:2px;height:60%;width:10%;background:var(--shimmer-background-color)}html:not([dir="rtl"])[_nghost-%COMP%]   .miniLoadingBar[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .miniLoadingBar[_ngcontent-%COMP%]{margin-right:4px}html[dir="rtl"][_nghost-%COMP%]   .miniLoadingBar[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .miniLoadingBar[_ngcontent-%COMP%]{margin-left:4px}.smallerLoadingBar[_ngcontent-%COMP%]{border-radius:2px;height:80%;width:100%;background:var(--shimmer-background-color)}html:not([dir="rtl"])[_nghost-%COMP%]   .smallerLoadingBar[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .smallerLoadingBar[_ngcontent-%COMP%]{margin-left:4px}html[dir="rtl"][_nghost-%COMP%]   .smallerLoadingBar[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .smallerLoadingBar[_ngcontent-%COMP%]{margin-right:4px}.multipleSmallLarge[_ngcontent-%COMP%]{display:flex;flex-grow:1;padding:10px 9px}html:not([dir="rtl"])[_nghost-%COMP%]   .multipleSmallLarge[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .multipleSmallLarge[_ngcontent-%COMP%]{margin:4px 8px}html[dir="rtl"][_nghost-%COMP%]   .multipleSmallLarge[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .multipleSmallLarge[_ngcontent-%COMP%]{margin:4px 8px}.upperLoadingBar[_ngcontent-%COMP%]{border-radius:2px;height:65%;width:49%;background:var(--shimmer-background-color)}html:not([dir="rtl"])[_nghost-%COMP%]   .upperLoadingBar[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .upperLoadingBar[_ngcontent-%COMP%]{margin:0 4px 11px 0}html[dir="rtl"][_nghost-%COMP%]   .upperLoadingBar[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .upperLoadingBar[_ngcontent-%COMP%]{margin:0 0 11px 4px}.lowerLoadingBar[_ngcontent-%COMP%]{border-radius:2px;height:65%;width:100%;background:var(--shimmer-background-color)}.shimmerBox[_ngcontent-%COMP%]{background:var(--shimmer-background-color);border-radius:2px;height:32px;width:32px}.smallLargeBarContainer[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;max-width:167px}html:not([dir="rtl"])[_nghost-%COMP%]   .smallLargeBarContainer[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .smallLargeBarContainer[_ngcontent-%COMP%]{margin:4px 0 2.42px 13px}html[dir="rtl"][_nghost-%COMP%]   .smallLargeBarContainer[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .smallLargeBarContainer[_ngcontent-%COMP%]{margin:4px 13px 2.42px 0}.animate[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_shimmer 5s infinite linear;background:linear-gradient(270deg,var(--shimmer-animate1) 0%,var(--shimmer-animate2) 50%,var(--shimmer-animate1) 100%);background-size:250% 100%}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:250% 0}to{background-position:-250% 0}}'],changeDetection:0}),m}(),de=l(85102),G=["pbiTree"];function pe(m,M){if(1&m){var h=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"tri-search-box",5),r.\u0275\u0275listener("value",function(e){r.\u0275\u0275restoreView(h);var N=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(N.search$.next(e))}),r.\u0275\u0275pipe(1,"localize"),r.\u0275\u0275pipe(2,"localize"),r.\u0275\u0275elementEnd()}if(2&m){var C=r.\u0275\u0275nextContext();r.\u0275\u0275property("currentInputValue",C.searchText||"")("placeholderText",r.\u0275\u0275pipeBind1(2,8,"SearchBox_Text"))("fluentTheme",!0)("compact",!0)("fullWidth",!0),r.\u0275\u0275attribute("aria-label",r.\u0275\u0275pipeBind1(1,6,"SearchBox_Text"))}}function X(m,M){if(1&m){var h=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"pbi-search-box")(1,"input",6),r.\u0275\u0275listener("input",function(e){r.\u0275\u0275restoreView(h);var N=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(N.search$.next(e.target.value))}),r.\u0275\u0275pipe(2,"localize"),r.\u0275\u0275pipe(3,"localize"),r.\u0275\u0275elementEnd()()}if(2&m){var C=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("value",C.searchText||"")("placeholder",r.\u0275\u0275pipeBind1(3,5,"SearchBox_Text")),r.\u0275\u0275attribute("aria-label",r.\u0275\u0275pipeBind1(2,3,"SearchBox_Text"))}}function ue(m,M){if(1&m&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275element(1,"shimmering-bars",7),r.\u0275\u0275elementContainerEnd()),2&m){var h=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("barsProperties",h.shimmeringBars)}}function Y(m,M){if(1&m){var h=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"pbi-tree",12,13),r.\u0275\u0275listener("onNodeClick",function(e){r.\u0275\u0275restoreView(h);var N=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(N.onNodeClick.emit(e))})("onNodeCheck",function(e){r.\u0275\u0275restoreView(h);var N=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(N.onNodeCheck.emit(e))})("onNodeExpansionToggle",function(e){r.\u0275\u0275restoreView(h);var N=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(N.onNodeExpansionToggle.emit(e))})("onFirstRender",function(){r.\u0275\u0275restoreView(h);var e=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(e.onFirstRender())}),r.\u0275\u0275pipe(2,"async"),r.\u0275\u0275elementEnd()}if(2&m){var C=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("tree",C.fieldListTree)("search",r.\u0275\u0275pipeBind1(2,5,C.search$))("hasHighlights",C.hasHighlights)("checkMode",C.checkMode)("options",C._options)}}function ne(m,M){1&m&&r.\u0275\u0275projection(0,2)}function ie(m,M){if(1&m&&(r.\u0275\u0275elementStart(0,"div",8),r.\u0275\u0275element(1,"div",9),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(2,Y,3,7,"pbi-tree",10),r.\u0275\u0275template(3,ne,1,0,"ng-template",null,11,r.\u0275\u0275templateRefExtractor)),2&m){var h=r.\u0275\u0275reference(4),C=r.\u0275\u0275nextContext();r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",C.fieldListTree)("ngIfElse",h)}}var me=[[["",8,"pbi-field-list-perspective-header"]],[["",8,"pbi-field-list-header"]],[["",8,"pbi-field-list-watermark"]]],ae=[".pbi-field-list-perspective-header",".pbi-field-list-header",".pbi-field-list-watermark"],re={height:24,bars:[0,1,1,0,0]},oe=function(){function m(){this.hasHighlights=!1,this.loading=!1,this.shimmeringBars=re,this.defaultOptions={},this._options=this.defaultOptions,this.onNodeExpansionToggle=new r.EventEmitter,this.onNodeClick=new r.EventEmitter,this.onNodeCheck=new r.EventEmitter,this.onFirstRenderComplete=new r.EventEmitter,this.handleFieldListTreeHeightDiff=new r.EventEmitter,this.search$=new H.xQ}return Object.defineProperty(m.prototype,"options",{set:function(h){this._options=(0,I.__assign)((0,I.__assign)({},this.defaultOptions),h)},enumerable:!1,configurable:!0}),m.prototype.ngOnInit=function(){var M=this;this.focusSearchBoxOnFirstRenderComplete&&this.onFirstRenderComplete.pipe((0,A.q)(1)).subscribe(function(){return M.focusSearchBox()})},m.prototype.onFirstRender=function(){var M=this.getFieldListTreeHeightDiff();this.handleFieldListTreeHeightDiff.emit(M),this.scrollSelectedItemIntoViewOnInit&&this.pbiTree.scrollToFirstSelectedNode(),this.onFirstRenderComplete.emit()},m.prototype.focusSearchBox=function(){$(".field-list-search-container input").trigger("focus")},m.prototype.getFieldListTreeHeightDiff=function(){return this.pbiTree.getTreeHeight()+2-this.pbiTreeElementRef.nativeElement.getBoundingClientRect().height},m.\u0275fac=function(h){return new(h||m)},m.\u0275cmp=r.\u0275\u0275defineComponent({type:m,selectors:[["pbi-field-list"]],viewQuery:function(h,C){if(1&h&&(r.\u0275\u0275viewQuery(D.u,5),r.\u0275\u0275viewQuery(G,5,r.ElementRef)),2&h){var T=void 0;r.\u0275\u0275queryRefresh(T=r.\u0275\u0275loadQuery())&&(C.pbiTree=T.first),r.\u0275\u0275queryRefresh(T=r.\u0275\u0275loadQuery())&&(C.pbiTreeElementRef=T.first)}},inputs:{fieldListTree:"fieldListTree",scrollSelectedItemIntoViewOnInit:"scrollSelectedItemIntoViewOnInit",checkMode:"checkMode",hasHighlights:"hasHighlights",loading:"loading",searchText:"searchText",focusSearchBoxOnFirstRenderComplete:"focusSearchBoxOnFirstRenderComplete",fluent:"fluent",options:"options"},outputs:{onNodeExpansionToggle:"onNodeExpansionToggle",onNodeClick:"onNodeClick",onNodeCheck:"onNodeCheck",onFirstRenderComplete:"onFirstRenderComplete",handleFieldListTreeHeightDiff:"handleFieldListTreeHeightDiff"},features:[r.\u0275\u0275ProvidersFeature(W)],ngContentSelectors:ae,decls:8,vars:4,consts:[["data-tutorial-target","search-box",1,"field-list-search-container"],["data-testid","search-bar-input",3,"currentInputValue","placeholderText","fluentTheme","compact","fullWidth","value",4,"ngIf"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["loaded",""],["data-testid","search-bar-input",3,"currentInputValue","placeholderText","fluentTheme","compact","fullWidth","value"],["pbiSearchInput","","data-testid","search-bar-input",1,"pbi-focus-outline",3,"value","placeholder","input"],[3,"barsProperties"],[1,"tutorial-target-container"],["data-tutorial-target","data-tree"],["data-testid","data-tree",3,"tree","search","hasHighlights","checkMode","options","onNodeClick","onNodeCheck","onNodeExpansionToggle","onFirstRender",4,"ngIf","ngIfElse"],["watermark",""],["data-testid","data-tree",3,"tree","search","hasHighlights","checkMode","options","onNodeClick","onNodeCheck","onNodeExpansionToggle","onFirstRender"],["pbiTree",""]],template:function(h,C){if(1&h&&(r.\u0275\u0275projectionDef(me),r.\u0275\u0275elementStart(0,"div",0),r.\u0275\u0275template(1,pe,3,10,"tri-search-box",1),r.\u0275\u0275template(2,X,4,7,"pbi-search-box",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275projection(3),r.\u0275\u0275projection(4,1),r.\u0275\u0275template(5,ue,2,1,"ng-container",3),r.\u0275\u0275template(6,ie,5,2,"ng-template",null,4,r.\u0275\u0275templateRefExtractor)),2&h){var T=r.\u0275\u0275reference(7);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",C.fluent),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!C.fluent),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngIf",C.loading)("ngIfElse",T)}},dependencies:[F.NgIf,R.a,R.p,Q.U,D.u,ce,F.AsyncPipe,de.F],styles:["[_nghost-%COMP%]{height:100%;display:flex;flex-direction:column}pbi-tree[_ngcontent-%COMP%]{margin-top:9px;height:100%;display:block;overflow:hidden}.tutorial-target-container[_ngcontent-%COMP%]{position:relative;visibility:hidden;height:0;width:0}.tutorial-target-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;top:20px;visibility:hidden;height:0;width:0}"],changeDetection:0}),m}()}}]);