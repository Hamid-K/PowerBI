(self.webpackChunkmobile=self.webpackChunkmobile||[]).push([["cartesianVisuals","cartesianChart","realTimeLineChartAnimator"],{45863:function(li,la){var S,X;void 0!==(X="function"==typeof(S=function(){"use strict";var ce="14.6.2";function Ke(f){f.parentElement.removeChild(f)}function et(f){return null!=f}function Ht(f){f.preventDefault()}function We(f){return"number"==typeof f&&!isNaN(f)&&isFinite(f)}function kt(f,v,H){H>0&&(j(f,v),setTimeout(function(){vt(f,v)},H))}function rt(f){return Math.max(Math.min(f,100),0)}function xt(f){return Array.isArray(f)?f:[f]}function Ot(f){var v=(f=String(f)).split(".");return v.length>1?v[1].length:0}function j(f,v){f.classList&&!/\s/.test(v)?f.classList.add(v):f.className+=" "+v}function vt(f,v){f.classList&&!/\s/.test(v)?f.classList.remove(v):f.className=f.className.replace(new RegExp("(^|\\b)"+v.split(" ").join("|")+"(\\b|$)","gi")," ")}function Ue(f){var v=void 0!==window.pageXOffset,H="CSS1Compat"===(f.compatMode||"");return{x:v?window.pageXOffset:H?f.documentElement.scrollLeft:f.body.scrollLeft,y:v?window.pageYOffset:H?f.documentElement.scrollTop:f.body.scrollTop}}function lt(f,v){return 100/(v-f)}function Se(f,v,H){return 100*v/(f[H+1]-f[H])}function F(f,v){for(var H=1;f>=v[H];)H+=1;return H}function C(f,v,H){if(H>=f.slice(-1)[0])return 100;var K=F(H,f),Ve=v[K-1],Ne=v[K];return Ve+function(f,v){return Se(f,f[0]<0?v+Math.abs(f[0]):v-f[0],0)}([f[K-1],f[K]],H)/lt(Ve,Ne)}function ne(f,v,H,K){if(100===K)return K;var Re=F(K,f),_e=f[Re-1],Ve=f[Re];return H?K-_e>(Ve-_e)/2?Ve:_e:v[Re-1]?f[Re-1]+function(f,v){return Math.round(f/v)*v}(K-f[Re-1],v[Re-1]):K}function ze(f,v,H){var K;if("number"==typeof v&&(v=[v]),!Array.isArray(v))throw new Error("noUiSlider ("+ce+"): 'range' contains invalid value.");if(!We(K="min"===f?0:"max"===f?100:parseFloat(f))||!We(v[0]))throw new Error("noUiSlider ("+ce+"): 'range' value isn't numeric.");H.xPct.push(K),H.xVal.push(v[0]),K?H.xSteps.push(!isNaN(v[1])&&v[1]):isNaN(v[1])||(H.xSteps[0]=v[1]),H.xHighestCompleteStep.push(0)}function De(f,v,H){if(v){if(H.xVal[f]===H.xVal[f+1])return void(H.xSteps[f]=H.xHighestCompleteStep[f]=H.xVal[f]);H.xSteps[f]=Se([H.xVal[f],H.xVal[f+1]],v,0)/lt(H.xPct[f],H.xPct[f+1]);var Re=Math.ceil(Number(((H.xVal[f+1]-H.xVal[f])/H.xNumSteps[f]).toFixed(3))-1);H.xHighestCompleteStep[f]=H.xVal[f]+H.xNumSteps[f]*Re}}function Be(f,v,H){this.xPct=[],this.xVal=[],this.xSteps=[H||!1],this.xNumSteps=[!1],this.xHighestCompleteStep=[],this.snap=v;var K,Re=[];for(K in f)f.hasOwnProperty(K)&&Re.push([f[K],K]);for(Re.sort(Re.length&&"object"==typeof Re[0][0]?function(_e,Ve){return _e[0][0]-Ve[0][0]}:function(_e,Ve){return _e[0]-Ve[0]}),K=0;K<Re.length;K++)ze(Re[K][1],Re[K][0],this);for(this.xNumSteps=this.xSteps.slice(0),K=0;K<this.xNumSteps.length;K++)De(K,this.xNumSteps[K],this)}Be.prototype.getDistance=function(f){var v,H=[];for(v=0;v<this.xNumSteps.length-1;v++){var K=this.xNumSteps[v];if(K&&f/K%1!=0)throw new Error("noUiSlider ("+ce+"): 'limit', 'margin' and 'padding' of "+this.xPct[v]+"% range must be divisible by step.");H[v]=Se(this.xVal,f,v)}return H},Be.prototype.getAbsoluteDistance=function(f,v,H){var K=0;if(f<this.xPct[this.xPct.length-1])for(;f>this.xPct[K+1];)K++;else f===this.xPct[this.xPct.length-1]&&(K=this.xPct.length-2);!H&&f===this.xPct[K+1]&&K++;var Re,_e=1,Ve=v[K],Ne=0,Qe=0,it=0,dt=0;for(Re=H?(f-this.xPct[K])/(this.xPct[K+1]-this.xPct[K]):(this.xPct[K+1]-f)/(this.xPct[K+1]-this.xPct[K]);Ve>0;)Ne=this.xPct[K+1+dt]-this.xPct[K+dt],v[K+dt]*_e+100-100*Re>100?(Qe=Ne*Re,_e=(Ve-100*Re)/v[K+dt],Re=1):(Qe=v[K+dt]*Ne/100*_e,_e=0),H?(it-=Qe,this.xPct.length+dt>=1&&dt--):(it+=Qe,this.xPct.length-dt>=1&&dt++),Ve=v[K+dt]*_e;return f+it},Be.prototype.toStepping=function(f){return C(this.xVal,this.xPct,f)},Be.prototype.fromStepping=function(f){return function(f,v,H){if(H>=100)return f.slice(-1)[0];var K=F(H,v),Ve=v[K-1];return function(f,v){return v*(f[1]-f[0])/100+f[0]}([f[K-1],f[K]],(H-Ve)*lt(Ve,v[K]))}(this.xVal,this.xPct,f)},Be.prototype.getStep=function(f){return ne(this.xPct,this.xSteps,this.snap,f)},Be.prototype.getDefaultStep=function(f,v,H){var K=F(f,this.xPct);return(100===f||v&&f===this.xPct[K-1])&&(K=Math.max(K-1,1)),(this.xVal[K]-this.xVal[K-1])/H},Be.prototype.getNearbySteps=function(f){var v=F(f,this.xPct);return{stepBefore:{startValue:this.xVal[v-2],step:this.xNumSteps[v-2],highestStep:this.xHighestCompleteStep[v-2]},thisStep:{startValue:this.xVal[v-1],step:this.xNumSteps[v-1],highestStep:this.xHighestCompleteStep[v-1]},stepAfter:{startValue:this.xVal[v],step:this.xNumSteps[v],highestStep:this.xHighestCompleteStep[v]}}},Be.prototype.countStepDecimals=function(){var f=this.xNumSteps.map(Ot);return Math.max.apply(null,f)},Be.prototype.convert=function(f){return this.getStep(this.toStepping(f))};var ae={to:function(v){return void 0!==v&&v.toFixed(2)},from:Number},ve={target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",touchArea:"touch-area",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",textDirectionLtr:"txt-dir-ltr",textDirectionRtl:"txt-dir-rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"};function se(f){if(function(f){return"object"==typeof f&&"function"==typeof f.to&&"function"==typeof f.from}(f))return!0;throw new Error("noUiSlider ("+ce+"): 'format' requires 'to' and 'from' methods.")}function w(f,v){if(!We(v))throw new Error("noUiSlider ("+ce+"): 'step' is not numeric.");f.singleStep=v}function le(f,v){if(!We(v))throw new Error("noUiSlider ("+ce+"): 'keyboardPageMultiplier' is not numeric.");f.keyboardPageMultiplier=v}function Y(f,v){if(!We(v))throw new Error("noUiSlider ("+ce+"): 'keyboardDefaultStep' is not numeric.");f.keyboardDefaultStep=v}function me(f,v){if("object"!=typeof v||Array.isArray(v))throw new Error("noUiSlider ("+ce+"): 'range' is not an object.");if(void 0===v.min||void 0===v.max)throw new Error("noUiSlider ("+ce+"): Missing 'min' or 'max' in 'range'.");if(v.min===v.max)throw new Error("noUiSlider ("+ce+"): 'range' 'min' and 'max' cannot be equal.");f.spectrum=new Be(v,f.snap,f.singleStep)}function Le(f,v){if(v=xt(v),!Array.isArray(v)||!v.length)throw new Error("noUiSlider ("+ce+"): 'start' option is incorrect.");f.handles=v.length,f.start=v}function ye(f,v){if(f.snap=v,"boolean"!=typeof v)throw new Error("noUiSlider ("+ce+"): 'snap' option must be a boolean.")}function oe(f,v){if(f.animate=v,"boolean"!=typeof v)throw new Error("noUiSlider ("+ce+"): 'animate' option must be a boolean.")}function Ce(f,v){if(f.animationDuration=v,"number"!=typeof v)throw new Error("noUiSlider ("+ce+"): 'animationDuration' option must be a number.")}function de(f,v){var K,H=[!1];if("lower"===v?v=[!0,!1]:"upper"===v&&(v=[!1,!0]),!0===v||!1===v){for(K=1;K<f.handles;K++)H.push(v);H.push(!1)}else{if(!Array.isArray(v)||!v.length||v.length!==f.handles+1)throw new Error("noUiSlider ("+ce+"): 'connect' option doesn't match handle count.");H=v}f.connect=H}function z(f,v){switch(v){case"horizontal":f.ort=0;break;case"vertical":f.ort=1;break;default:throw new Error("noUiSlider ("+ce+"): 'orientation' option is invalid.")}}function L(f,v){if(!We(v))throw new Error("noUiSlider ("+ce+"): 'margin' option must be numeric.");0!==v&&(f.margin=f.spectrum.getDistance(v))}function E(f,v){if(!We(v))throw new Error("noUiSlider ("+ce+"): 'limit' option must be numeric.");if(f.limit=f.spectrum.getDistance(v),!f.limit||f.handles<2)throw new Error("noUiSlider ("+ce+"): 'limit' option is only supported on linear sliders with 2 or more handles.")}function Q(f,v){var H;if(!We(v)&&!Array.isArray(v))throw new Error("noUiSlider ("+ce+"): 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(v)&&2!==v.length&&!We(v[0])&&!We(v[1]))throw new Error("noUiSlider ("+ce+"): 'padding' option must be numeric or array of exactly 2 numbers.");if(0!==v){for(Array.isArray(v)||(v=[v,v]),f.padding=[f.spectrum.getDistance(v[0]),f.spectrum.getDistance(v[1])],H=0;H<f.spectrum.xNumSteps.length-1;H++)if(f.padding[0][H]<0||f.padding[1][H]<0)throw new Error("noUiSlider ("+ce+"): 'padding' option must be a positive number(s).");if((v[0]+v[1])/(f.spectrum.xVal[f.spectrum.xVal.length-1]-f.spectrum.xVal[0])>1)throw new Error("noUiSlider ("+ce+"): 'padding' option must not exceed 100% of the range.")}}function B(f,v){switch(v){case"ltr":f.dir=0;break;case"rtl":f.dir=1;break;default:throw new Error("noUiSlider ("+ce+"): 'direction' option was not recognized.")}}function T(f,v){if("string"!=typeof v)throw new Error("noUiSlider ("+ce+"): 'behaviour' must be a string containing options.");var H=v.indexOf("tap")>=0,K=v.indexOf("drag")>=0,Re=v.indexOf("fixed")>=0,_e=v.indexOf("snap")>=0,Ve=v.indexOf("hover")>=0,Ne=v.indexOf("unconstrained")>=0;if(Re){if(2!==f.handles)throw new Error("noUiSlider ("+ce+"): 'fixed' behaviour must be used with 2 handles");L(f,f.start[1]-f.start[0])}if(Ne&&(f.margin||f.limit))throw new Error("noUiSlider ("+ce+"): 'unconstrained' behaviour cannot be used with margin or limit");f.events={tap:H||_e,drag:K,fixed:Re,snap:_e,hover:Ve,unconstrained:Ne}}function b(f,v){if(!1!==v)if(!0===v){f.tooltips=[];for(var H=0;H<f.handles;H++)f.tooltips.push(!0)}else{if(f.tooltips=xt(v),f.tooltips.length!==f.handles)throw new Error("noUiSlider ("+ce+"): must pass a formatter for all handles.");f.tooltips.forEach(function(K){if("boolean"!=typeof K&&("object"!=typeof K||"function"!=typeof K.to))throw new Error("noUiSlider ("+ce+"): 'tooltips' must be passed a formatter or 'false'.")})}}function N(f,v){f.ariaFormat=v,se(v)}function p(f,v){f.format=v,se(v)}function k(f,v){if(f.keyboardSupport=v,"boolean"!=typeof v)throw new Error("noUiSlider ("+ce+"): 'keyboardSupport' option must be a boolean.")}function G(f,v){f.documentElement=v}function ee(f,v){if("string"!=typeof v&&!1!==v)throw new Error("noUiSlider ("+ce+"): 'cssPrefix' must be a string or `false`.");f.cssPrefix=v}function U(f,v){if("object"!=typeof v)throw new Error("noUiSlider ("+ce+"): 'cssClasses' must be an object.");if("string"==typeof f.cssPrefix)for(var H in f.cssClasses={},v)v.hasOwnProperty(H)&&(f.cssClasses[H]=f.cssPrefix+v[H]);else f.cssClasses=v}function Z(f){var v={margin:0,limit:0,padding:0,animate:!0,animationDuration:300,ariaFormat:ae,format:ae},H={step:{r:!1,t:w},keyboardPageMultiplier:{r:!1,t:le},keyboardDefaultStep:{r:!1,t:Y},start:{r:!0,t:Le},connect:{r:!0,t:de},direction:{r:!0,t:B},snap:{r:!1,t:ye},animate:{r:!1,t:oe},animationDuration:{r:!1,t:Ce},range:{r:!0,t:me},orientation:{r:!1,t:z},margin:{r:!1,t:L},limit:{r:!1,t:E},padding:{r:!1,t:Q},behaviour:{r:!0,t:T},ariaFormat:{r:!1,t:N},format:{r:!1,t:p},tooltips:{r:!1,t:b},keyboardSupport:{r:!0,t:k},documentElement:{r:!1,t:G},cssPrefix:{r:!0,t:ee},cssClasses:{r:!0,t:U}},K={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses:ve,keyboardPageMultiplier:5,keyboardDefaultStep:10};f.format&&!f.ariaFormat&&(f.ariaFormat=f.format),Object.keys(H).forEach(function(Qe){if(!et(f[Qe])&&void 0===K[Qe]){if(H[Qe].r)throw new Error("noUiSlider ("+ce+"): '"+Qe+"' is required.");return!0}H[Qe].t(v,et(f[Qe])?f[Qe]:K[Qe])}),v.pips=f.pips;var Re=document.createElement("div");return v.transformRule=void 0!==Re.style.transform?"transform":void 0!==Re.style.msTransform?"msTransform":"webkitTransform",v.style=[["left","top"],["right","bottom"]][v.dir][v.ort],v}function Pe(f,v,H){var Ne,Qe,it,dt,Rt,$t,te,K=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},_e=window.CSS&&CSS.supports&&CSS.supports("touch-action","none")&&function(){var f=!1;try{var v=Object.defineProperty({},"passive",{get:function(){f=!0}});window.addEventListener("test",null,v)}catch{}return f}(),Ve=f,ct=v.spectrum,mt=[],Vt=[],ra=[],Nt=0,_t={},oa=f.ownerDocument,Wa=v.documentElement||oa.documentElement,Ra=oa.body,Ma=-1,Bt=0,ia=1,Ca=2,Ta="rtl"===oa.dir||1===v.ort?0:100;function da(te,pe){var Te=oa.createElement("div");return pe&&j(Te,pe),te.appendChild(Te),Te}function fe(te,pe){var Te=da(te,v.cssClasses.origin),Je=da(Te,v.cssClasses.handle);return da(Je,v.cssClasses.touchArea),Je.setAttribute("data-handle",pe),v.keyboardSupport&&(Je.setAttribute("tabindex","0"),Je.addEventListener("keydown",function(ot){return function(te,pe){if(V()||R(pe))return!1;var Te=["Left","Right"],Je=["Down","Up"],ot=["PageDown","PageUp"],ut=["Home","End"];v.dir&&!v.ort?Te.reverse():v.ort&&!v.dir&&(Je.reverse(),ot.reverse());var ka,yt=te.key.replace("Arrow",""),st=yt===ot[0],pa=yt===ot[1],ua=yt===Je[0]||yt===Te[0]||st,wa=yt===Je[1]||yt===Te[1]||pa,La=yt===ut[1];if(!(ua||wa||yt===ut[0]||La))return!0;if(te.preventDefault(),wa||ua){var ji=v.keyboardPageMultiplier,Pr=ua?0:1,yi=Ei(pe)[Pr];if(null===yi)return!1;!1===yi&&(yi=ct.getDefaultStep(Vt[pe],ua,v.keyboardDefaultStep)),(pa||st)&&(yi*=ji),yi=Math.max(yi,1e-7),ka=mt[pe]+(yi*=ua?-1:1)}else ka=La?v.spectrum.xVal[v.spectrum.xVal.length-1]:v.spectrum.xVal[0];return Ia(pe,ct.toStepping(ka),!0,!0),Gt("slide",pe),Gt("update",pe),Gt("change",pe),Gt("set",pe),!1}(ot,pe)})),Je.setAttribute("role","slider"),Je.setAttribute("aria-orientation",v.ort?"vertical":"horizontal"),0===pe?j(Je,v.cssClasses.handleLower):pe===v.handles-1&&j(Je,v.cssClasses.handleUpper),Te}function Xe(te,pe){return!!pe&&da(te,v.cssClasses.connect)}function m(te,pe){return!!v.tooltips[pe]&&da(te.firstChild,v.cssClasses.tooltip)}function V(){return Ve.hasAttribute("disabled")}function R(te){return Qe[te].hasAttribute("disabled")}function be(){Rt&&(Aa("update.tooltips"),Rt.forEach(function(te){te&&Ke(te)}),Rt=null)}function Fe(){be(),Rt=Qe.map(m),za("update.tooltips",function(te,pe,Te){if(Rt[pe]){var Je=te[pe];!0!==v.tooltips[pe]&&(Je=v.tooltips[pe].to(Te[pe])),Rt[pe].innerHTML=Je}})}function nt(te,pe,Te){var Je=oa.createElement("div"),ot=[];ot[Bt]=v.cssClasses.valueNormal,ot[ia]=v.cssClasses.valueLarge,ot[Ca]=v.cssClasses.valueSub;var ut=[];ut[Bt]=v.cssClasses.markerNormal,ut[ia]=v.cssClasses.markerLarge,ut[Ca]=v.cssClasses.markerSub;var yt=[v.cssClasses.valueHorizontal,v.cssClasses.valueVertical],st=[v.cssClasses.markerHorizontal,v.cssClasses.markerVertical];function pa(wa,Ja){var La=Ja===v.cssClasses.value;return Ja+" "+(La?yt:st)[v.ort]+" "+(La?ot:ut)[wa]}return j(Je,v.cssClasses.pips),j(Je,0===v.ort?v.cssClasses.pipsHorizontal:v.cssClasses.pipsVertical),Object.keys(te).forEach(function(wa){!function(wa,Ja,La){if((La=pe?pe(Ja,La):La)!==Ma){var ka=da(Je,!1);ka.className=pa(La,v.cssClasses.marker),ka.style[v.style]=wa+"%",La>Bt&&((ka=da(Je,!1)).className=pa(La,v.cssClasses.value),ka.setAttribute("data-value",Ja),ka.style[v.style]=wa+"%",ka.innerHTML=Te.to(Ja))}}(wa,te[wa][0],te[wa][1])}),Je}function pt(){dt&&(Ke(dt),dt=null)}function bt(te){pt();var pe=te.mode,Je=te.filter||!1,st=function(te,pe,Te){function Je(wa,Ja){return(wa+Ja).toFixed(7)/1}var ot={},ut=ct.xVal[0],yt=ct.xVal[ct.xVal.length-1],st=!1,pa=!1,ua=0;return(Te=function(f){return f.filter(function(v){return!this[v]&&(this[v]=!0)},{})}(Te.slice().sort(function(wa,Ja){return wa-Ja})))[0]!==ut&&(Te.unshift(ut),st=!0),Te[Te.length-1]!==yt&&(Te.push(yt),pa=!0),Te.forEach(function(wa,Ja){var La,ka,ji,yi,cr,hn,vn,Dt,Ri,Pr=wa,qi=Te[Ja+1],en="steps"===pe;if(en&&(La=ct.xNumSteps[Ja]),La||(La=qi-Pr),!1!==Pr)for(void 0===qi&&(qi=Pr),La=Math.max(La,1e-7),ka=Pr;ka<=qi;ka=Je(ka,La)){for(Ri=(cr=(yi=ct.toStepping(ka))-ua)/(Dt=Math.round(cr/te)),ji=1;ji<=Dt;ji+=1)ot[(hn=ua+ji*Ri).toFixed(5)]=[ct.fromStepping(hn),0];vn=Te.indexOf(ka)>-1?ia:en?Ca:Bt,!Ja&&st&&ka!==qi&&(vn=0),ka===qi&&pa||(ot[yi.toFixed(5)]=[ka,vn]),ua=yi}}),ot}(te.density||1,pe,function(te,pe,Te){if("range"===te||"steps"===te)return ct.xVal;if("count"===te){if(pe<2)throw new Error("noUiSlider ("+ce+"): 'values' (>= 2) required for mode 'count'.");var Je=pe-1,ot=100/Je;for(pe=[];Je--;)pe[Je]=Je*ot;pe.push(100),te="positions"}return"positions"===te?pe.map(function(ut){return ct.fromStepping(Te?ct.getStep(ut):ut)}):"values"===te?Te?pe.map(function(ut){return ct.fromStepping(ct.getStep(ct.toStepping(ut)))}):pe:void 0}(pe,te.values||!1,te.stepped||!1)),pa=te.format||{to:Math.round};return dt=Ve.appendChild(nt(st,Je,pa))}function zt(){var te=Ne.getBoundingClientRect(),pe="offset"+["Width","Height"][v.ort];return 0===v.ort?te.width||Ne[pe]:te.height||Ne[pe]}function Ct(te,pe,Te,Je){var ot=function(st){if(!(st=function(te,pe,Te){var yt,st,Je=0===te.type.indexOf("touch"),ot=0===te.type.indexOf("mouse"),ut=0===te.type.indexOf("pointer");if(0===te.type.indexOf("MSPointer")&&(ut=!0),"mousedown"===te.type&&!te.buttons&&!te.touches)return!1;if(Je){var pa=function(La){return La.target===Te||Te.contains(La.target)||La.target.shadowRoot&&La.target.shadowRoot.contains(Te)};if("touchstart"===te.type){var ua=Array.prototype.filter.call(te.touches,pa);if(ua.length>1)return!1;yt=ua[0].pageX,st=ua[0].pageY}else{var wa=Array.prototype.find.call(te.changedTouches,pa);if(!wa)return!1;yt=wa.pageX,st=wa.pageY}}return pe=pe||Ue(oa),(ot||ut)&&(yt=te.clientX+pe.x,st=te.clientY+pe.y),te.pageOffset=pe,te.points=[yt,st],te.cursor=ot||ut,te}(st,Je.pageOffset,Je.target||pe))||V()&&!Je.doNotReject||function(f,v){return f.classList?f.classList.contains(v):new RegExp("\\b"+v+"\\b").test(f.className)}(Ve,v.cssClasses.tap)&&!Je.doNotReject||te===K.start&&void 0!==st.buttons&&st.buttons>1||Je.hover&&st.buttons)return!1;_e||st.preventDefault(),st.calcPoint=st.points[v.ort],Te(st,Je)},ut=[];return te.split(" ").forEach(function(yt){var st=!!_e&&{passive:!0};pe.addEventListener(yt,ot,st),ut.push([yt,ot,st])}),ut}function Wt(te){var Te=100*(te-function(f,v){var H=f.getBoundingClientRect(),K=f.ownerDocument,Re=K.documentElement,_e=Ue(K);return/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(_e.x=0),v?H.top+_e.y-Re.clientTop:H.left+_e.x-Re.clientLeft}(Ne,v.ort))/zt();return Te=rt(Te),v.dir?100-Te:Te}function St(te,pe){"mouseout"===te.type&&"HTML"===te.target.nodeName&&null===te.relatedTarget&&na(te,pe)}function jt(te,pe){if(-1===navigator.appVersion.indexOf("MSIE 9")&&0===te.buttons&&0!==pe.buttonsProperty)return na(te,pe);var Te=(v.dir?-1:1)*(te.calcPoint-pe.startCalcPoint);Za(Te>0,100*Te/pe.baseSize,pe.locations,pe.handleNumbers)}function na(te,pe){pe.handle&&(vt(pe.handle,v.cssClasses.active),Nt-=1),pe.listeners.forEach(function(Te){Wa.removeEventListener(Te[0],Te[1],Te[2])}),0===Nt&&(vt(Ve,v.cssClasses.drag),Ai(),te.cursor&&(Ra.style.cursor="",Ra.removeEventListener("selectstart",Ht))),pe.handleNumbers.forEach(function(Te){Gt("change",Te),Gt("set",Te),Gt("end",Te)})}function ya(te,pe){if(pe.handleNumbers.some(R))return!1;var Te;1===pe.handleNumbers.length&&(Nt+=1,j(Te=Qe[pe.handleNumbers[0]].children[0],v.cssClasses.active)),te.stopPropagation();var ot=[],ut=Ct(K.move,Wa,jt,{target:te.target,handle:Te,listeners:ot,startCalcPoint:te.calcPoint,baseSize:zt(),pageOffset:te.pageOffset,handleNumbers:pe.handleNumbers,buttonsProperty:te.buttons,locations:Vt.slice()}),yt=Ct(K.end,Wa,na,{target:te.target,handle:Te,listeners:ot,doNotReject:!0,handleNumbers:pe.handleNumbers}),st=Ct("mouseout",Wa,St,{target:te.target,handle:Te,listeners:ot,doNotReject:!0,handleNumbers:pe.handleNumbers});ot.push.apply(ot,ut.concat(yt,st)),te.cursor&&(Ra.style.cursor=getComputedStyle(te.target).cursor,Qe.length>1&&j(Ve,v.cssClasses.drag),Ra.addEventListener("selectstart",Ht,!1)),pe.handleNumbers.forEach(function(pa){Gt("start",pa)})}function sa(te){te.stopPropagation();var pe=Wt(te.calcPoint),Te=function(te){var pe=100,Te=!1;return Qe.forEach(function(Je,ot){if(!R(ot)){var ut=Vt[ot],yt=Math.abs(ut-te);(yt<pe||yt<=pe&&te>ut||100===yt&&100===pe)&&(Te=ot,pe=yt)}}),Te}(pe);if(!1===Te)return!1;v.events.snap||kt(Ve,v.cssClasses.tap,v.animationDuration),Ia(Te,pe,!0,!0),Ai(),Gt("slide",Te,!0),Gt("update",Te,!0),Gt("change",Te,!0),Gt("set",Te,!0),v.events.snap&&ya(te,{handleNumbers:[Te]})}function fa(te){var pe=Wt(te.calcPoint),Te=ct.getStep(pe),Je=ct.fromStepping(Te);Object.keys(_t).forEach(function(ot){"hover"===ot.split(".")[0]&&_t[ot].forEach(function(ut){ut.call($t,Je)})})}function za(te,pe){_t[te]=_t[te]||[],_t[te].push(pe),"update"===te.split(".")[0]&&Qe.forEach(function(Te,Je){Gt("update",Je)})}function Aa(te){var pe=te&&te.split(".")[0],Te=pe&&te.substring(pe.length);Object.keys(_t).forEach(function(Je){var ot=Je.split(".")[0],ut=Je.substring(ot.length);pe&&pe!==ot||Te&&Te!==ut||delete _t[Je]})}function Gt(te,pe,Te){Object.keys(_t).forEach(function(Je){var ot=Je.split(".")[0];te===ot&&_t[Je].forEach(function(ut){ut.call($t,mt.map(v.format.to),pe,mt.slice(),Te||!1,Vt.slice(),$t)})})}function _a(te,pe,Te,Je,ot,ut){var yt;return Qe.length>1&&!v.events.unconstrained&&(Je&&pe>0&&(yt=ct.getAbsoluteDistance(te[pe-1],v.margin,0),Te=Math.max(Te,yt)),ot&&pe<Qe.length-1&&(yt=ct.getAbsoluteDistance(te[pe+1],v.margin,1),Te=Math.min(Te,yt))),Qe.length>1&&v.limit&&(Je&&pe>0&&(yt=ct.getAbsoluteDistance(te[pe-1],v.limit,0),Te=Math.min(Te,yt)),ot&&pe<Qe.length-1&&(yt=ct.getAbsoluteDistance(te[pe+1],v.limit,1),Te=Math.max(Te,yt))),v.padding&&(0===pe&&(yt=ct.getAbsoluteDistance(0,v.padding[0],0),Te=Math.max(Te,yt)),pe===Qe.length-1&&(yt=ct.getAbsoluteDistance(100,v.padding[1],1),Te=Math.min(Te,yt))),!((Te=rt(Te=ct.getStep(Te)))===te[pe]&&!ut)&&Te}function Da(te,pe){var Te=v.ort;return(Te?pe:te)+", "+(Te?te:pe)}function Za(te,pe,Te,Je){var ot=Te.slice(),ut=[!te,te],yt=[te,!te];Je=Je.slice(),te&&Je.reverse(),Je.length>1?Je.forEach(function(pa,ua){var wa=_a(ot,pa,ot[pa]+pe,ut[ua],yt[ua],!1);!1===wa?pe=0:(pe=wa-ot[pa],ot[pa]=wa)}):ut=yt=[!0];var st=!1;Je.forEach(function(pa,ua){st=Ia(pa,Te[pa]+pe,ut[ua],yt[ua])||st}),st&&Je.forEach(function(pa){Gt("update",pa),Gt("slide",pa)})}function ur(te,pe){return v.dir?100-te-pe:te}function Ai(){ra.forEach(function(te){Qe[te].style.zIndex=3+(Qe.length+(Vt[te]>50?-1:1)*te)})}function Ia(te,pe,Te,Je,ot){return ot||(pe=_a(Vt,te,pe,Te,Je,!1)),!1!==pe&&(function(te,pe){Vt[te]=pe,mt[te]=ct.fromStepping(pe);var Je="translate("+Da(10*(ur(pe,0)-Ta)+"%","0")+")";Qe[te].style[v.transformRule]=Je,Va(te),Va(te+1)}(te,pe),!0)}function Va(te){if(it[te]){var pe=0,Te=100;0!==te&&(pe=Vt[te-1]),te!==it.length-1&&(Te=Vt[te]);var Je=Te-pe,ot="translate("+Da(ur(pe,Je)+"%","0")+")",ut="scale("+Da(Je/100,"1")+")";it[te].style[v.transformRule]=ot+" "+ut}}function Di(te,pe){return null===te||!1===te||void 0===te||("number"==typeof te&&(te=String(te)),te=v.format.from(te),!1===(te=ct.toStepping(te))||isNaN(te))?Vt[pe]:te}function Ui(te,pe,Te){var Je=xt(te);pe=void 0===pe||!!pe,v.animate&&!(void 0===Vt[0])&&kt(Ve,v.cssClasses.tap,v.animationDuration),ra.forEach(function(yt){Ia(yt,Di(Je[yt],yt),!0,!1,Te)});for(var ut=1===ra.length?0:1;ut<ra.length;++ut)ra.forEach(function(yt){Ia(yt,Vt[yt],!0,!0,Te)});Ai(),ra.forEach(function(yt){Gt("update",yt),null!==Je[yt]&&pe&&Gt("set",yt)})}function Qa(){var te=mt.map(v.format.to);return 1===te.length?te[0]:te}function Ei(te){var pe=Vt[te],Te=ct.getNearbySteps(pe),Je=mt[te],ot=Te.thisStep.step,ut=null;if(v.snap)return[Je-Te.stepBefore.startValue||null,Te.stepAfter.startValue-Je||null];!1!==ot&&Je+ot>Te.stepAfter.startValue&&(ot=Te.stepAfter.startValue-Je),ut=Je>Te.thisStep.startValue?Te.thisStep.step:!1!==Te.stepBefore.step&&Je-Te.stepBefore.highestStep,100===pe?ot=null:0===pe&&(ut=null);var yt=ct.countStepDecimals();return null!==ot&&!1!==ot&&(ot=Number(ot.toFixed(yt))),null!==ut&&!1!==ut&&(ut=Number(ut.toFixed(yt))),[ut,ot]}return j(te=Ve,v.cssClasses.target),j(te,0===v.dir?v.cssClasses.ltr:v.cssClasses.rtl),j(te,0===v.ort?v.cssClasses.horizontal:v.cssClasses.vertical),j(te,"rtl"===getComputedStyle(te).direction?v.cssClasses.textDirectionRtl:v.cssClasses.textDirectionLtr),Ne=da(te,v.cssClasses.base),function(te,pe){var Te=da(pe,v.cssClasses.connects);Qe=[],(it=[]).push(Xe(Te,te[0]));for(var Je=0;Je<v.handles;Je++)Qe.push(fe(pe,Je)),ra[Je]=Je,it.push(Xe(Te,te[Je+1]))}(v.connect,Ne),function(te){te.fixed||Qe.forEach(function(pe,Te){Ct(K.start,pe.children[0],ya,{handleNumbers:[Te]})}),te.tap&&Ct(K.start,Ne,sa,{}),te.hover&&Ct(K.move,Ne,fa,{hover:!0}),te.drag&&it.forEach(function(pe,Te){if(!1!==pe&&0!==Te&&Te!==it.length-1){var Je=Qe[Te-1],ot=Qe[Te],ut=[pe];j(pe,v.cssClasses.draggable),te.fixed&&(ut.push(Je.children[0]),ut.push(ot.children[0])),ut.forEach(function(yt){Ct(K.start,yt,ya,{handles:[Je,ot],handleNumbers:[Te-1,Te]})})}})}(v.events),Ui(v.start),v.pips&&bt(v.pips),v.tooltips&&Fe(),za("update",function(te,pe,Te,Je,ot){ra.forEach(function(ut){var yt=Qe[ut],st=_a(Vt,ut,0,!0,!0,!0),pa=_a(Vt,ut,100,!0,!0,!0),ua=ot[ut];v.ariaFormat.to(Te[ut]),st=ct.fromStepping(st).toFixed(0),pa=ct.fromStepping(pa).toFixed(0),ua=ct.fromStepping(ua).toFixed(0),yt.children[0].setAttribute("aria-valuemin",st),yt.children[0].setAttribute("aria-valuemax",pa),yt.children[0].setAttribute("aria-valuenow",ua)})}),$t={destroy:function(){for(var te in v.cssClasses)v.cssClasses.hasOwnProperty(te)&&vt(Ve,v.cssClasses[te]);for(;Ve.firstChild;)Ve.removeChild(Ve.firstChild);delete Ve.noUiSlider},steps:function(){return ra.map(Ei)},on:za,off:Aa,get:Qa,set:Ui,setHandle:function(te,pe,Te,Je){if(!((te=Number(te))>=0&&te<ra.length))throw new Error("noUiSlider ("+ce+"): invalid handle number, got: "+te);Ia(te,Di(pe,te),!0,!0,Je),Gt("update",te),Te&&Gt("set",te)},reset:function(te){Ui(v.start,te)},__moveHandles:function(pe,Te,Je){Za(pe,Te,Vt,Je)},options:H,updateOptions:function(te,pe){var Te=Qa(),Je=["margin","limit","padding","range","animate","snap","step","format","pips","tooltips"];Je.forEach(function(ut){void 0!==te[ut]&&(H[ut]=te[ut])});var ot=Z(H);Je.forEach(function(ut){void 0!==te[ut]&&(v[ut]=ot[ut])}),ct=ot.spectrum,v.margin=ot.margin,v.limit=ot.limit,v.padding=ot.padding,v.pips?bt(v.pips):pt(),v.tooltips?Fe():be(),Vt=[],Ui(te.start||Te,pe)},target:Ve,removePips:pt,removeTooltips:be,getTooltips:function(){return Rt},getOrigins:function(){return Qe},pips:bt}}return{__spectrum:Be,version:ce,cssClasses:ve,create:function(f,v){if(!f||!f.nodeName)throw new Error("noUiSlider ("+ce+"): create requires a single element, got: "+f);if(f.noUiSlider)throw new Error("noUiSlider ("+ce+"): Slider was already initialized.");var K=Pe(f,Z(v),v);return f.noUiSlider=K,K}}})?S.apply(la,[]):S)&&(li.exports=X)},11956:function(li,la,S){"use strict";S.r(la),S.d(la,{DefaultInnerTickSize:function(){return ge},DefaultRotation:function(){return it},DefaultRotationForYAxisHierarchy:function(){return Rt},DefaultVerticalRotation:function(){return dt},Mockable:function(){return me},StackedAxisPadding:function(){return qe},adjustDomainWithConstantPixelDifference:function(){return L},assertScalarDomain:function(){return Q},axisFactory:function(){return q},createAxis:function(){return N},createAxisLabel:function(){return ia},createD3Scale_Band:function(){return mt},createD3Scale_Numeric:function(){return ra},createDomain:function(){return E},createFormatter:function(){return v},createScalarDomainOptions:function(){return Wa},createScale:function(){return je},createStackedD3Axis:function(){return U},createUncertaintyAwareValueDomain:function(){return _e},createValueDomain:function(){return Re},defaultTickFormat:function(){return ne},emptyDomain:function(){return Ue},ensureValuesInRange:function(){return B},extendCreateAxisOptions:function(){return p},generateScalarDomainSources:function(){return Ra},getAxisFormatString:function(){return Ve},getBestNumberOfTicks:function(){return ze},getCategoryThickness:function(){return Ce},getCategoryValueType:function(){return T},getHierStack:function(){return Xe},getMaxWidth:function(){return ht},getMergedUserDomains:function(){return $t},getNumHierarchyLevels:function(){return He},getRecommendedNumberOfTicksForXAxis:function(){return F},getRecommendedNumberOfTicksForYAxis:function(){return C},getRecommendedTickValues:function(){return De},getTickLabelMargins:function(){return Y},hasForcedDomain:function(){return Bt},invertOrdinalScale:function(){return de},invertOrdinalSimpleScaleWithDirection:function(){return z},invertScale:function(){return ye},isHierarchical:function(){return da},isLogScaleAllowedFunc:function(){return Vt},isOrdinalAxisDomain:function(){return _t},isScalarAxisDomain:function(){return Nt},isStackedAxisProperties:function(){return fe},mergeDomains:function(){return oa},mergeScalarAxisDomains:function(){return Ma},powerOfTen:function(){return Ta},rotate:function(){return ct},scaleShouldClamp:function(){return Ca},shouldIncludeZero:function(){return b},willLabelsFit:function(){return Ne},willLabelsWordBreak:function(){return Qe}});var d=S(81337),X=S(62458),ce=S(41640),Ge=S(68365),Ke=S(32041),et=S(64329),Ht=S(66001),Pt=S(41414),Mt=S(45059),ft=S(72489),We=S(28326),kt=S(80777),rt=S(37274),xt=S(54522),Ot=S(18664),j=S(44977),vt=S(53197),At=S(34969),Ue=[0,0],Oe=35,P=2,Ae=3,lt=10,Se=3,qe=5,ge=6;function F(m){return m<300?3:m<500?5:8}function C(m){return m<150?3:m<300?5:8}function q(m,V){switch(V){case vt.Or.top:return d3.axisTop(m);case vt.Or.right:return d3.axisRight(m);case vt.Or.bottom:return d3.axisBottom(m);case vt.Or.left:return d3.axisLeft(m);default:X.fF.assertNever(V)}}function ne(m){return X.fF.warn('Using default (unformatted) tickFormat for value "'.concat(m,'"')),"".concat(m)}function ze(m,V,R,be,Fe){var ke=m[0],Me=m[1];return X.fF.assert(function(){return R>=0},"maxTickCount must be greater or equal to zero"),isNaN(ke)||isNaN(Me)?Ae:ke===Me?Fe||be?1:Ae:(X.fF.assert(function(){return ke<=Me},"min value needs to be less or equal to max value"),R<=1||Me<=1&&ke>=-1||V.some(function(at){return at?.type&&!at.type.integer})?R:Math.min(Me-ke+1,R))}function De(m,V){var R=m.axis,Fe=(void 0===R?{}:R).logAxisScale,ke=m.isScalar,Me=m.domainOptions,at=m.isLogScaleAllowed,nt=m.valueType,pt=m.minTickInterval,bt=V.scale,zt=V.bestTickCount;if(V.isInvalidDomain)return[];if(ke&&!_.isEmpty(Me?.domain)&&1===zt)return[Me?.domain[0]];if(!ke||(0,vt._9)(bt))return function(m,V){if(m<=0)return[];var R=V.length;if(m>R)return V;for(var be=[],Fe=0,ke=Math.ceil(R/m);Fe<R;Fe+=ke)be.push(V[Fe]);return be}(zt,bt.domain());if((0,vt.v9)(nt))return function(m,V){if(0===V[0]&&0===V[1])return[];var be=Mt.EP.calculate(We.y3.fromTimeValue(V[0]),We.y3.fromTimeValue(V[1]),m).sequence.map(function(Fe){return Fe.getTime()});return B(be,V[0],V[1])}(zt,bt.domain());var Ct=function(m,V,R,be){if(!V.ticks)return X.fF.assertFail("must pass a quantitative scale to this method"),[];if(m<=1)return[];var ke=m,Me=V.ticks(ke);if(Me.length>m&&m>1){var at=V.domain();ke=function(pt,bt,zt){var Ct=(bt-pt)/zt,Lt=Math.floor(Math.log(Ct)/Math.LN10),Wt=Ct/Math.pow(10,Lt);if(Wt>=Math.sqrt(50)){var Et=Math.sqrt(2)*Math.pow(10,Lt+1);return Math.floor((bt-pt)/Et)}if(Wt>=Math.sqrt(10)){var St=Math.sqrt(50)*Math.pow(10,Lt);return Math.floor((bt-pt)/St)}if(Wt>=Math.sqrt(2)){var jt=Math.sqrt(10)*Math.pow(10,Lt);return Math.floor((bt-pt)/jt)}var na=Math.sqrt(2)*Math.pow(10,Lt);return Math.floor((bt-pt)/na)}(at[0],at[1],Me.length),Me=V.ticks(ke)}if(Me.length<P&&(Me=V.ticks(ke=m+1)),R&&Me.length>1)for(var nt=Me[1]-Me[0];nt>0&&(0,ce.Po)(nt,R)&&ke>2;){if(ke--,(Me=V.ticks(ke)).length<P){Me=V.ticks(++ke);break}nt=Me[1]-Me[0]}return Me.length<=1?[]:(be||(Me=function(m,V){if(void 0===V&&(V=1e-5),!m||m.length<2)return m;var R=V*Math.abs(m[1]-m[0]);return m.map(function(be){return Math.abs(be)<=R?0:be})}(Me)),X.fF.assert(function(){return 0===Me.length||(0,ce.bA)(Me[0],V.domain()[0],ce.BM)&&(0,ce.bl)(Me[Me.length-1],V.domain()[1],ce.BM)},"getRecommendedTickValuesForAQuantitativeRange should not generate tick values outside the scale"),Me)}(zt,bt,pt,Fe);if(Fe&&at)for(var Lt=0;Ct.length>10;)Ct=Ct.filter(function(Wt){return Ta(Wt,Lt)}),Lt++;return Ct}function w(m,V,R){var be=10===V?.[0],Fe=10===V?.[1],ke=Fe&&be&&m[0]>=m[1];(!be||ke)&&(m[0]-=Math.abs(R[0]),V&&(V[0]=0)),(!Fe||ke)&&(m[1]+=Math.abs(R[1]),V&&(V[1]=0))}function Y(m){var V=m.plotArea,R=m.yMarginLimit,be=m.textHeightMeasurer,Fe=m.textWidthMeasurer,ke=m.axes,Me=m.bottomMarginLimit,at=m.axesFontProperties,nt=m.rotate90,pt=m.showY1OnRight,bt=m.shouldRenderAxis,zt=bt.x,Ct=bt.y,Lt=bt.y2,Wt=He(ke),Et=null!=Wt&&Wt>0;X.fF.assertValue(V,"options.plotArea"),X.fF.assertValue(ke,"axes");var St=ke.x,jt=ke.y1,na=ke.y2;X.fF.assertValue(V,"plotArea"),X.fF.assertValue(Fe,"textWidthMeasurer"),X.fF.assertValue(be,"textHeightMeasurer"),X.fF.assertValue(St,"xAxis"),X.fF.assertValue(jt,"yAxis");var ya=St.values,sa=0,fa=0,aa=0,It=0,za=0,Aa=0,Gt=0,Da=St.categoryThickness?St.categoryThickness*(null!=St.innerPaddingRatio?.5-St.innerPaddingRatio/2:0):0,Za=(0,vt._9)(St.scale),ii=0;void 0!==St.outerPadding?ii=St.outerPadding:void 0!==St.xLabelMaxWidth&&(ii=Math.max(0,(V.width-St.xLabelMaxWidth*ya.length)/2));var Ia,Va,Ai=zt&&!_.isEmpty(ya);if(0!==F(V.width)||0!==C(V.height)){var Di=nt||Et&&St.isCategoryAxis?dt:it;if(Ct){var wi,Ui=at.y.tickLabels;jt.categoryIdentities&&(Ui=(0,Ot.ED)(Ui,{weight:"700"})),za=(wi=me.getAxisTickLabelMargins(jt,Ui,Fe,be)).maxWidth,aa=Math.max(aa,wi.overflow.top),It=Math.max(It,wi.overflow.bottom),Va=wi.textHeight}na&&Lt&&(Aa=(wi=me.getAxisTickLabelMargins(na,at.y2.tickLabels,Fe,be)).maxWidth,aa=Math.max(aa,wi.overflow.top),It=Math.max(It,wi.overflow.bottom));var $i=at.x.tickLabels,Qa=(0,Ot.qk)($i),Gi=St.scale,Ei=Gi.domain();if(Ia=be(Qa),Ai){var yr=Math.floor(Me/Ia);St.categoryIdentities&&!St.willLabelsWordBreak&&(Qa.fontWeight="700");for(var di=0,gi=ya.length;di<gi;di++){var te=void 0;Qa.text=ya[di];var pe=Fe(Qa);if(St.willLabelsWordBreak){var Te=_.isEmpty(St.categoryLabelMaxWidths)?St.xLabelMaxWidth:St.categoryLabelMaxWidths[di];te=(0,Ht.ql)(Qa.text,Qa,Fe,Te,yr).length*Ia,pe=Te}else if(!St.willLabelsFit&&Za){var ot=$i.size.pt<=At.rZ;te=pe*Di.sine+(ot?0:Ia*Di.cosine),pe=pe*Di.cosine+(ot?0:Ia*Di.sine)}else te=Ia+-5;if(0===di){if(Za)sa=St.willLabelsFit?pe/2-Da-ii:pe-Da-ii,sa=Math.max(sa,0);else if(Ei.length>1){var st=0;st=pe/2-(pa=Gi(Ei[St.invertAxis?1:0])),st=Math.max(st,0),St.invertAxis&&pt?fa=st:sa=st}}else if(di===gi-1)if(Za)(St.willLabelsFit||St.willLabelsWordBreak)&&(fa=pe/2-Da-ii,fa=Math.max(fa,0));else if(Ei.length>1){st=0;var pa=Gi(Ei[St.invertAxis?0:1]);st=pe/2-(V.width-pa),st=Math.max(st,0),St.invertAxis&&pt?sa=st:fa=st}Gt=Math.max(Gt,te)}sa=Math.min(sa,Oe),fa=Math.min(fa,Oe)}}var La,ua=0,wa=0,Ja=Math.min(Math.max(It,Math.ceil(Gt)),Me);if(pt?(wa=Math.min(Math.max(sa,Aa),R),ua=Math.min(Math.max(fa,za),R)):(wa=Math.min(Math.max(sa,za),R),ua=Math.min(Math.max(fa,Aa),R)),Et){var ka=function(){return La*(Wt-1)};St.isCategoryAxis&&Ai?(La=Ia+qe,Ja+=ka()):jt.isCategoryAxis&&Ct?(La=Va+qe,pt?ua+=ka():wa+=ka()):La=0}return{yTop:Math.ceil(aa),yLeft:Math.ceil(wa),yBottom:Math.ceil(It),yRight:Math.ceil(ua),xMax:Math.ceil(Ja),stackHeight:La,axesOverflow:{top:Math.ceil(aa),bottom:Math.ceil(It),left:Math.ceil(sa),right:Math.ceil(fa)}}}var me={getAxisTickLabelMargins:function(V,R,be,Fe){var ke,nt,pt,Me=V.scale,at=V.d3Axis.tickValues();if(_.isEmpty(at))return{maxWidth:0,overflow:{top:0,bottom:0}};if((0,vt._9)(Me))nt=(ke=Me.range())[0],pt=ke[1];else{var bt=Me.range();nt=_.head(bt),pt=_.last(bt)}var Ct,Lt,Wt,Et,zt=V.values;nt<pt?(Ct=nt,Lt=Me(_.head(at)),Wt=pt,Et=Me(_.last(at))):(Ct=pt,Lt=Me(_.last(at)),Wt=nt,Et=Me(_.head(at)));for(var St=(0,Ot.qk)(R,"".concat(_.head(zt))),jt=Fe(St),na=Math.max(0,-(Lt-jt/2-Ct)),ya=Math.max(0,Et+jt/2-Wt),sa=0,fa=0,aa=zt.length;fa<aa;fa++)St.text="".concat(zt[fa]),sa=Math.max(sa,be(St));return{maxWidth:sa,overflow:{top:na,bottom:ya},textHeight:jt}}};function ye(m,V,R,be,Fe){return(0,vt._9)(m)?0===R?{value:de(m,V)}:z(m,V,R,be,Fe):{value:m.invert(V)}}function oe(m){return(0,vt._9)(m)?m.domain().map(function(V){return m(V)}):m.range()}function Ce(m){var V=oe(m);if(V.length<2){if((0,vt._9)(m)){var R=m.range();return R[1]-R[0]}X.fF.assertFail("Unsupported axis type")}return V[1]-V[0]}function de(m,V){var R=m.bandwidth(),be=oe(m),Fe=m.domain();return be.length<2||be[0]>V?Fe[0]||0:Fe[d3.bisect(be,V+(be[1]-be[0]-R)/2)-1]}function z(m,V,R,be,Fe){var ke=oe(m),Me=m.domain(),at=Fe||1,nt=m.bandwidth()/at;if(0!==Me.length){X.fF.assert(function(){return!_.some(Me,function(jt,na){return 0!==na&&jt!==Me[na-1]+1})});var pt=1===be?nt/2:0;if(ke[0]+pt>V)return 1===R?void 0:{value:Me[0],seriesIndex:0};if(!(V>ke[ke.length-1]+nt*at-pt&&-1===R)){var bt=pt*R*-1,zt=ke[1]-ke[0]-nt*at;if(at>1){var Ct=d3.bisect(ke,V)-1,Lt=m(Me[Ct]),Wt=_.map(d3.range(at),function(jt){return jt*nt+Lt}),Et=d3.bisect(Wt,V+bt)-1;return Et<0?{value:Me[Ct-1],seriesIndex:at-1}:-1===R&&Et===at-1&&Ct!==ke.length-1&&V+bt+zt>ke[Ct+1]?{value:Me[Ct+1],seriesIndex:0}:{value:Me[Ct],seriesIndex:Et}}-1===R&&(bt+=zt);var St=d3.bisect(ke,V+bt)-1;return{value:Me[St],seriesIndex:0}}}}function L(m,V,R,be){if(R<m||be>V){var Fe=Math.abs(Math.min(R-m,0)),ke=Math.max(be-V,0),Me=V-m,nt=m-Fe*Math.pow(Me,2)/((Me-ke)*(Me-Fe)-Fe*ke);return{domain:[nt,V+ke*(V-nt)/(Me-ke)],adjusted:!0}}return{domain:void 0,adjusted:!1}}function E(m,V,R,be){if(R&&!(0,vt.c$)(V)){if(0===m.length)return;var ke=_.flatMap(m,function(zt){return _.flatMap(zt.data,function(Ct){return[Ct?.categoryValue]})});return Ma.apply(void 0,(0,d.ev)([Wa(d3.extent(ke),0)],be||[],!1))}var Me=[];if(!_.isEmpty(m))for(var nt=0,pt=m[0].data;nt<pt.length;nt++){var bt=pt[nt];bt.highlight||Me.push(bt.categoryIndex)}return{domain:Me,type:0}}function Q(m){if(2!==m.length&&!_.every(m,function(R){return null==R||_.isNumber(R)}))throw new Ge.wJ("CartesianAxisScalarDomain")}function B(m,V,R){X.fF.assert(function(){return V<=R},"min must be less or equal to max");var be=m.filter(function(Fe){return Fe>=V&&Fe<=R});return be.length>=2?be:[V,R]}function T(m,V){return function(m){return m&&(m.bool||m.numeric||m.text||m.dateTime)}(m?.type)?m.type:kt.Ge.fromDescriptor(V?{numeric:!0}:{text:!0})}function b(m){var V=m?.domain;if(!V||2!==V.length)return!0;var R=m.domainSources;return!((10===R[0]?V[0]:void 0)>0||(10===R[1]?V[1]:void 0)<0)}function N(m){var V=k(m);return m.axisZoom&&!m.skipAxisZoomUpdate&&(m.axisZoom.updateAxisOptions(V,m),V=k(m)),V}function p(m){var V,R=m.isScalar,Fe=m.axis.logAxisScale,ke=void 0!==Fe&&Fe,Me=m.orientation,at=void 0===Me?m.isVertical?vt.Or.left:vt.Or.bottom:Me,nt=m.metaDataColumn,pt=m.outerPadding,bt=void 0===pt?0:pt,zt=m.innerPaddingRatio,Ct=void 0===zt?At.$B:zt,Lt=m.outerPaddingRatio,Wt=void 0===Lt?0:Lt,Et=null===(V=m.domainOptions)||void 0===V?void 0:V.domain,jt=T(nt instanceof Array?(0,At.GN)(nt):nt,R),na=Vt(Et,jt);return(0,d.pi)((0,d.pi)((0,d.pi)({},m),{isLogScaleAllowed:na,valueType:jt,minTickInterval:R?K(m.formatString,jt,m.is100Pct):void 0,hasDisallowedZeroInDomain:R&&!na&&ke,orientation:at,innerPaddingRatio:Ct,outerPaddingRatio:Wt,outerPadding:0===bt&&R&&m.isVertical?1:bt}),m.isCategoryAxis&&function(m,V,R,be){var Fe;return!(!m||V&&"0"!==V&&"g"!==V&&"G"!==V||R&&1!==R||!(null!==(Fe=m.temporal)&&void 0!==Fe&&Fe.year||m.integer&&2===be?.length&&ee(be[0])&&ee(be[1])))}(jt,m.formatString,m.axis.labelDisplayUnits,Et)?{formatString:"0",useTickIntervalForDisplayUnits:!1}:{})}function k(m){var V,R=p(m),be=R.domainOptions,ke=(void 0===be?{}:be).domain,Me=je(R),at=Me.scale,nt=Me.bestTickCount,pt=at.domain(),bt=m.categoryThickness;if(bt&&R.isScalar&&2===ke?.length){X.fF.assert(function(){return!(ke[0]instanceof Date)||ke[0]instanceof We.y3},"The domain has to be a no-Date object or a PBIFormattingDate");var zt=ke[1]-ke[0],Ct=pt[1]-pt[0];zt>0&&Ct>0&&(bt=bt*zt/Ct)}var St,jt,Lt=De(R,Me),Wt=v(Me,R,Lt),Et=q(at,R.orientation).tickSizeInner(ge).tickSizeOuter(0).ticks(nt).tickValues(Lt);return!R.isScalar&&bt?St=Math.max(1,bt-2*At.Fv):Lt.length>1?(St=function(m,V){return m&&!_.isEmpty(V)?Math.abs(m(V[1])-m(V[0])):1}(at,Lt),St-=2*Se,R.margin&&(jt=function(m,V,R,be,Fe){var ke=_.times(V.length,_.constant(Fe)),Me=R.left,at=R.right,nt=m(_.head(V)),pt=m(_.last(V)),bt=oe(m),Ct=bt[1],Lt=2*(Math.abs(nt-bt[0])+Me+be),Wt=2*(Math.abs(pt-Ct)+at+be);return ke[0]=Math.min(Lt,Fe),ke[V.length-1]=Math.min(Wt,Fe),ke}(at,Lt,R.margin,R.outerPadding,St),St=void 0)):St=m.pixelSpan-2*Se,{scale:Me.scale,isInvalidDomain:Me.isInvalidDomain,d3Axis:Et,formatter:Wt,values:_.isEmpty(R.metaDataColumn)?[]:H(Et,Lt,Wt,R.valueType,R.getValueFn),axisLabel:(0,xt.O1)(R.metaDataColumn),xLabelMaxWidth:St,categoryLabelMaxWidths:jt,categoryThickness:bt,valueType:R.valueType,isCategoryAxis:R.isCategoryAxis,outerPadding:R.outerPadding,outerPaddingRatio:R.outerPaddingRatio,innerPaddingRatio:R.innerPaddingRatio,isLogScaleAllowed:R.isLogScaleAllowed,dataDomain:null===(V=R.domainOptions)||void 0===V?void 0:V.domain,hasDisallowedZeroInDomain:R.hasDisallowedZeroInDomain,invertAxis:R.axis.invertAxis,orientation:R.orientation}}function ee(m){return _.isNumber(m)&&m===Math.floor(m)&&m>-1e4&&m<1e4}function U(m){return X.fF.assertValue(m,"options is null or undefined"),X.fF.assertValue(m.d3axis,"options.axis is null or undefined"),X.fF.assertValue(m.scale,"options.scale is null or undefined"),X.fF.assertValue(m.tickFormat,"options.tickFormat is null or undefined"),q(m.scale,null!=m.orient?m.orient:vt.Or.bottom).tickSizeInner(m.innerTickSize||0).tickSizeOuter(m.outerTickSize||0).ticks(m.d3axis.tickArguments()).tickValues(m.d3axis.tickValues()).tickFormat(m.tickFormat)}function je(m){var V=m.pixelSpan,R=m.metaDataColumn,be=m.outerPadding,Fe=m.isScalar,ke=m.isVertical,Me=m.forcedTickCount,at=m.maxTickCount,nt=m.allowSingleScalarTick,pt=m.includeZero,bt=m.domainOptions,zt=m.zeroScalarDomain,Ct=m.minTickInterval,Lt=m.valueType,Wt=m.axis,Et=Wt.logAxisScale,St=Wt.invertAxis,jt=m.domainOptions,na=bt?.domain;X.fF.assert(function(){return!nt||nt&&Fe},"allowSingleScalarTick should only be true if the chart is scalar"),X.fF.assert(function(){return!pt||Fe&&pt},"includeZero can only have an effect if the domain is scalar");var ya=R instanceof Array?R:[R];if(null==na||2===na.length&&null==na[0]&&null==na[1]||2!==na.length&&Fe)return{isInvalidDomain:!0,scale:(0,vt.c$)(Lt)?mt(m,Lt.dateTime?Ue:[]):ra(m,Ue,Et),bestTickCount:0};var sa=ke?C(V):F(V);at&&(sa=Math.min(sa,at));var Aa,fa=sa,aa=m.axis.logAxisScale&&m.isLogScaleAllowed,It=na?.slice();if(It&&Fe){if(pt){var za=aa?_.every(It,function(Gt){return Gt>0})?1:-1:0;It[0]=Math.min(za,It[0]),It[It.length-1]=Math.max(za,It[It.length-1])}2===It.length&&(Q(It),fa=void 0!==Me?0!==sa?Me:0:ze(It,ya,sa,Lt.dateTime,nt),It=function(m,V,R,be){return isNaN(m[0])||isNaN(m[1])?Ue:(m[0]===m[1]?null==R||.2*Math.abs(m[1])>=R?w(m,V,[.2*m[0],.2*m[1]]):0!==m[1]&&w(m,V,[R,R]):be||Math.abs(m[0])<1e-4&&Math.abs(m[0]/(m[1]-m[0]))<1e-4&&10!==V?.[0]&&(m[0]=0),m)}(It,jt.domainSources,Ct,Et))}return Fe&&(Lt.numeric||Lt.dateTime)?(Lt.dateTime||(Q(It),2===jt.domain.length&&0===jt.domain[0]&&0===jt.domain[1]&&zt&&(w(It,jt.domainSources,zt),void 0===Me&&(fa=ze(It,ya,sa,Lt.dateTime,nt)))),Aa=ra(m,It,aa,fa)):Lt.text||Lt.dateTime||Lt.numeric||Lt.bool?(Aa=mt(m,It),fa=0===sa?0:Math.min(It.length,(V-2*be)/At.jY)):(X.fF.assertFail("unsupported dataType, something other than text or numeric"),X.fF.assert(function(){return!!Aa},"scale must be defined")),ke&&Fe&&Aa.range(oe(Aa).reverse()),St&&Aa.range(Aa.range().reverse()),function(m){for(var V=m.domain(),R=0,be=V.length;R<be;++R)V[R]===Number.POSITIVE_INFINITY?V[R]=Number.MAX_VALUE:V[R]===Number.NEGATIVE_INFINITY&&(V[R]=-Number.MAX_VALUE);m.domain(V)}(Aa),{scale:Aa,bestTickCount:fa}}function v(m,V,R){var Fe=m.bestTickCount,ke=V.domainOptions,Me=V.valueType,nt=V.formatString,pt=V.useTickIntervalForDisplayUnits,bt=V.axis,zt=bt.logAxisScale,Ct=bt.labelPrecision,Lt=bt.labelDisplayUnits;if(V.isScalar){if(Me.dateTime){var Et=m.scale.domain();return(0,ft.Ue)({format:nt,value:We.y3.fromTimeValue(1===Fe?ke.domain[0]:Et[0]),value2:We.y3.fromTimeValue(1===Fe?ke.domain[0]:Et[1]),tickCount:Fe,columnType:Me})}if(pt&&R.length>1){var St=[R[0],R[1]];return zt&&_.every(R,function(jt){return jt<=0})&&(St=[R[R.length-2],R[R.length-1]]),(0,ft.Ue)({format:nt,value:Lt||St[1]-St[0],value2:0,allowFormatBeautification:!0,columnType:Me,precision:Ct??(0,vt.Gv)(St[0],St[1],Lt,nt)})}if(1===R.length)return(0,ft.Ue)({format:nt,value:Lt||(pt?_.head(R):0),allowFormatBeautification:!0,precision:Ct})}return(0,ft.E3)(nt,!0)}function H(m,V,R,be,Fe){return Fe||(Fe=function(Me){return Me}),R?(m.tickFormat(function(ke){return R.format(Fe(ke,be))}),V.map(function(ke){return R.format(Fe(ke,be))})):V.map(function(ke){return Fe(ke,be)})}function K(m,V,R){if(m&&!(0,We.iH)(m)){var Fe=(0,We.rH)(m,!0).precision;return m.indexOf("%")>-1&&(Fe+=2),Math.pow(10,-Fe)}return R?.01:V.integer?1:0}function Re(m,V){if(X.fF.assertValue(m,"data"),0===m.length)return null;var R=_.flatMap(m,function(be){return _.flatMap(be.data,function(Fe){return[Fe?.value]})});return V&&R.push(0),d3.extent(R)}function _e(m,V){if(X.fF.assertValue(m,"data"),0===m.length)return null;if(!_.some(m,function(Fe){var ke;return null===(ke=Fe.uncertainty)||void 0===ke?void 0:ke.renderUncertainty}))return Re(m,V);var R=d3.min(m,function(Fe){var ke;return null!==(ke=Fe.uncertainty)&&void 0!==ke&&ke.renderUncertainty?d3.min(Fe.data,function(Me){var at;return Me&&d3.min([Me.value,null===(at=Me.uncertainty)||void 0===at?void 0:at.lower])}):d3.min(Fe.data,function(Me){return Me&&Me.value})}),be=d3.max(m,function(Fe){var ke;return null!==(ke=Fe.uncertainty)&&void 0!==ke&&ke.renderUncertainty?d3.max(Fe.data,function(Me){var at;return Me&&d3.max([Me.value,null===(at=Me.uncertainty)||void 0===at?void 0:at.upper])}):d3.max(Fe.data,function(Me){return Me&&Me.value})});return V&&(R=null==R?0:Math.min(R,0),be=null==be?0:Math.max(be,0)),[R,be]}function Ve(m){if(X.fF.assertValue(m,"data"),m.length>=1)for(var V=0,R=m;V<R.length;V++){var Fe=_.find(R[V].data,function(ke){return ke?.labelFormatString});if(Fe)return Fe.labelFormatString}}function Ne(m,V,R,be){var Fe=m.values;if(0===Fe.length)return!1;var ke=void 0!==m.xLabelMaxWidth?m.xLabelMaxWidth:V/Fe.length;return!Fe.some(function(Me){return be.text=Me,R(be)>ke})}function Qe(m,V,R,be,Fe,ke,Me){var at=m.values,nt=void 0!==m.xLabelMaxWidth?m.xLabelMaxWidth:R/at.length,pt=V.bottom/it.sine,bt=Fe(Me),zt=Math.max(1,Math.floor(V.bottom/bt));return 0!==at.length&&!at.some(function(Wt){return Me.text=Wt,!(0,Ht.r)(Wt)&&be(Me)>nt})&&at.filter(function(Wt,Et){var na=Math.min((V.left+m.outerPadding+m.categoryThickness*(Et+.5)-lt)/it.cosine,pt),ya=(0,Ht.ql)(Wt,Me,be,nt,zt,ke).join(" ");Me.text=Wt;var sa=ke(Me,na);return(0,j.mC)(ya).length>=(0,j.mC)(sa).length}).length>=at.length>>1}var it={sine:Math.sin(Math.PI*(35/180)),cosine:Math.cos(Math.PI*(35/180)),tangent:Math.tan(Math.PI*(35/180)),transform:"rotate(-35)",dy:"-0.5em",textAnchor:"end"},dt={sine:Math.sin(.5*Math.PI),cosine:Math.cos(.5*Math.PI),tangent:Math.tan(.5*Math.PI),transform:"rotate(-90)",dy:"-0.65em",textAnchor:"end"},Rt={sine:Math.sin(.5*Math.PI),cosine:Math.cos(.5*Math.PI),tangent:Math.tan(.5*Math.PI),transform:"rotate(-90)",dy:"-0.45em",textAnchor:"middle",x:0,y:0,dx:0};function ct(m,V){var R=V.textTruncator,be=V.textProperties,Fe=V.needRotate,ke=V.needEllipsis,Me=V.axisProperties,at=V.margin,nt=V.rotate90,pt=V.firstVisibleNode,bt=V.rotationPadding,zt=void 0===bt?0:bt,Ct=V.dropLabelsOnOverlap,Lt=V.height,Wt=V.y1Hierarchy;if(Fe){X.fF.assert(function(){return(0,vt._9)(Me.scale)},"Rotating non-ordinal scales is currently not supported");var Ia,Va,Et=Wt?Rt:nt?dt:it,St=(0,ce.GG)(Math.abs(Et.cosine),0,1e-10),jt=at.left-(St?lt:0),na=et.FP.fromPointToPixel(At.rZ),sa=parseFloat(be.fontSize),fa=sa<=na,aa=Ke.b.estimateSvgTextHeight(be),It=Me.scale,za=oe(It),Aa=Ce(It),Gt=aa*Et.sine,_a=St?0:aa*Et.cosine,Za=Gt/2,ur=(St?0:_a/Et.tangent)+Za,ii=Za,Ai=!!pt;if(fa)Ia=Lt/Et.sine,Va=-5.5;else{var Di=na/2;Va=-(Di+_a)*Et.sine,Ia=Fe?(Lt-Di-_a-(!nt||Ai?0:Di))/Et.sine:void 0}var Qa,wi=It.bandwidth()/2,$i=Aa/2;Qa=Ct?Ai?new rt._F(zt+za[0]+wi-$i,ur,ii,pt,It,$i,zt):new rt.LO(zt-(nt?0:jt),ur,ii):new rt.DR;var Ei=-1;m.each(function(yr,di){var gi=d3.select(this),te=za[di]+wi;if(Ct&&Qa.willCollide(te))return Qa.skipItem(te),void gi.text(null);Qa.addItem(te);var Te,pe=gi.text();if(be.text=pe,St)if(Wt&&nt){if(!pe)return;var ut=Me;Ei=_.indexOf(ut.adjustedValues,pe,Ei+1),Te=ut.categoryLabelMaxWidths[Ei],X.fF.assert(function(){return!isNaN(Te)},"stacked group allowedLength should be a valid number")}else Te=Ia;else Te=((fa?Me.outerPadding+Me.categoryThickness*(di+.5):te)+jt-Gt)/Et.cosine;if(nt||ke||Te<Ia){var yt=R(be,Math.min(Te,Ia));yt!==pe&&gi.text(yt)}var st=gi.attr("x");gi.style("text-anchor",Et.textAnchor).attrs({x:null!=Et.x?Et.x:st,y:null!=Et.y?Et.y:sa,dx:null!=Et.dx?Et.dx:Va,dy:Et.dy,transform:Et.transform})})}else m.each(function(yr){var di=d3.select(this),gi=di.text();be.text=gi;var te=ht(Me,yr),pe=R(be,te);pe!==gi&&di.text(pe),di.style("text-anchor","middle").attrs({dx:"0em",dy:"1em",transform:"rotate(0)"})})}function mt(m,V){var R,be=m.categoryThickness?m.outerPadding/m.categoryThickness:0;return X.fF.assert(function(){return be>=0&&be<4},"outerPaddingRatio should be a value between zero and four"),d3.scaleBand().range([0,m.pixelSpan]).paddingInner(null!==(R=m.innerPaddingRatio)&&void 0!==R?R:At.$B).paddingOuter(be).domain(V)}function Vt(m,V){return null!=m&&!(0,vt.v9)(V)&&(m[0]>0&&m[1]>0||m[0]<0&&m[1]<0)}function ra(m,V,R,be){var Fe=(R?d3.scaleLog():d3.scaleLinear()).range([m.outerPadding,m.pixelSpan-m.outerPadding]).domain([V[0],V[1]]).clamp(R||m.shouldClamp);return!(0,vt.v9)(m.valueType)&&!m.preventNice&&!(m.allowSingleScalarTick&&2===V.length&&V[0]===V[1])&&V[0]!==-Number.MAX_VALUE&&V[1]!==Number.MAX_VALUE&&Fe.nice(R?void 0:be),Fe}function Nt(m){return 1===m?.type}function _t(m){return 0===m?.type}function $t(m){var V,R,be=_.filter(m.includeDomains,function(Fe){return _.includes(Fe.domainSources,10)});return null!==(R=null===(V=Ma.apply(void 0,be))||void 0===V?void 0:V.domain)&&void 0!==R?R:[void 0,void 0]}function oa(){for(var m=[],V=0;V<arguments.length;V++)m[V]=arguments[V];for(var R,be,Fe=0,ke=m;Fe<ke.length;Fe++){var Me=ke[Fe];if(Me){var at=Me[0],nt=Me[1];null!=at&&(R=Math.min(at,void 0===R?Number.POSITIVE_INFINITY:R)),null!=nt&&(be=Math.max(nt,void 0===be?Number.NEGATIVE_INFINITY:be))}}return[R,be]}function Wa(m,V,R){if(m){X.fF.assert(function(){return void 0===m[0]||void 0===m[1]||Number.isNaN(m[0])||Number.isNaN(m[1])||m[0]<=m[1]},"min should be less or equal to max");var be={type:1,domain:m,domainSources:Ra(m,V),forced:R};return X.fF.assert(function(){return!_.includes(be.domainSources,10)||!(!Bt(be)||!be.domain)},"For a user-set domain, `forced` must be true and `domain` must be set"),be}}function Ra(m,V){return[null!=m[0]?V:void 0,null!=m[1]?V:void 0]}function Ma(){for(var m=[],V=0;V<arguments.length;V++)m[V]=arguments[V];var R={forced:!1,source:0},be={forced:!1,source:0},Fe={forced:!1,source:0,value:null},ke={forced:!1,source:0,value:null};function Me(Lt,Wt){var Et,St,jt,na,ya,sa,fa="min"===Wt,aa=fa?R:be,It=fa?Fe:ke,za=null!==(St=null===(Et=Lt.domainSources)||void 0===Et?void 0:Et[fa?0:1])&&void 0!==St?St:0,Aa=null!==(na=null===(jt=Lt.forced)||void 0===jt?void 0:jt[fa?0:1])&&void 0!==na&&na,Gt=Lt.domain[fa?0:1];if(null!=Gt){var _a=function(Za){0===za&&(It.value=Za,It.forced=Aa)};null==It.value&&_a(Gt),za>aa.source?(aa.value=Gt,aa.source=za,aa.forced=Aa):za===aa.source&&(Aa&&!aa.forced?(aa.value=Gt,aa.forced=!0,_a(Gt)):(Aa||!aa.forced)&&(aa.value=fa?Math.min(Gt,null!==(ya=aa.value)&&void 0!==ya?ya:Number.POSITIVE_INFINITY):Math.max(Gt,null!==(sa=aa.value)&&void 0!==sa?sa:Number.NEGATIVE_INFINITY),_a(aa.value)))}}for(var at=0,nt=m;at<nt.length;at++){var pt=nt[at];!pt||!pt.domain||(Me(pt,"min"),Me(pt,"max"))}if(void 0!==R.value||void 0!==be.value){var bt=null!=Fe.value&&null!=ke.value&&(0===R.source||0===be.source)&&(R.value>ke.value||be.value<Fe.value),zt=bt?Fe:R,Ct=bt?ke:be;return{type:1,domain:[zt.value,Ct.value],forced:[zt.forced,Ct.forced],domainSources:[zt.source,Ct.source]}}}function Bt(m){var V,R;return(null===(V=m?.forced)||void 0===V?void 0:V[0])||(null===(R=m?.forced)||void 0===R?void 0:R[1])}function ia(m,V,R,be){void 0===be&&(be=!1);var Fe=be?"secAxisStyle":"axisStyle";return m?.[Fe]?(0,Pt.O1)(m[Fe],V,R):V}function Ca(m,V){return!(!m||!V||m.length<2||V.length<2||m[0]===V[0]&&m[1]===V[1])}function Ta(m,V){void 0===V&&(V=0);var R=Math.abs(m),be=Math.log(R)/Math.LN10;return be=Math.ceil(be-1e-12),R/Math.pow(10,be)==1&&be%Math.pow(2,V)==0}function da(m){return!0===m.isHierarchical}function fe(m){return!0===m.isStacked}function Xe(m){return da(m.x)?m.x.hierStack:da(m.y1)?m.y1.hierStack:[]}function He(m){return da(m.x)?m.x.numHierarchyLevels:da(m.y1)?m.y1.numHierarchyLevels:void 0}function ht(m,V){if(_.isEmpty(m.categoryLabelMaxWidths))return m.xLabelMaxWidth;if(fe(m))return m.categoryLabelMaxWidths[V];var be=m.d3Axis.tickValues().indexOf(V);return m.categoryLabelMaxWidths[be]}},3128:function(li,la,S){"use strict";S.d(la,{Rl:function(){return ae},fI:function(){return ve},Gf:function(){return ye},l$:function(){return Q},xm:function(){return de},PH:function(){return Ce},H_:function(){return z},yV:function(){return E},mv:function(){return L}});var d=S(81337),X=S(22733),ce=S(14599),Ge=S(56707),Ke=S(80065),et=S(2241),Ht=S(45545),Pt=S(33024),Mt=S(86727),ft=S(41414),We=S(48766),kt=S(92374),rt=S(18765),xt=S(79154),Ot=S(62458),j=S(56578),vt=S(32379),At=S(91059),Ue=S(28326),Oe=S(11956),P=S(34969),Ae=S(3087),lt=function(T,b,N,p){var k,Z,ee=X.p.valueAxis;return k=T?{fontFamilyReference:(Z=b?ee:X.p.y2Axis).secTitleFontFamily,fontSizeReference:Z.secTitleFontSize,boldReference:Z.secTitleBold,italicReference:Z.secTitleItalic,underlineReference:Z.secTitleUnderline,fontColorReference:Z.secTitleColor}:{fontFamilyReference:(Z=N?X.p.categoryAxis:ee).titleFontFamily,fontSizeReference:Z.titleFontSize,boldReference:Z.titleBold,italicReference:Z.titleItalic,underlineReference:Z.titleUnderline,fontColorReference:Z.titleColor},Ot.fF.assertValue(k,"getAxisTitleSubSelectionStyles titleReferences"),(0,Ke.un)(p,k)},Se=function(T,b,N,p){var k,Z,ee=X.p.valueAxis;return k=T?{fontFamilyReference:(Z=b?ee:X.p.y2Axis).secFontFamily,fontSizeReference:Z.secFontSize,boldReference:Z.secBold,italicReference:Z.secItalic,underlineReference:Z.secUnderline,fontColorReference:Z.secLabelColor,displayUnitsReference:Z.secLabelDisplayUnits,precisionReference:Z.secLabelPrecision}:{fontFamilyReference:(Z=N?X.p.categoryAxis:ee).fontFamily,fontSizeReference:Z.fontSize,boldReference:Z.bold,italicReference:Z.italic,underlineReference:Z.underline,fontColorReference:Z.labelColor,displayUnitsReference:Z.labelDisplayUnits,precisionReference:Z.labelPrecision},(0,Ke.xs)(p,k)},qe=function(T,b,N,p,k){var G=C(N,T,b),ee=G.axisTitleShow,U=G.zoomAxisShow,Z=[{type:1,destinationInfo:{cardUid:q(T,N),groupUid:ne(T,N,"title")},label:k.getLocalizedString("Format_AxisTitle")}];return F(N,p)&&Z.unshift((0,d.pi)((0,d.pi)({type:2},U),{relatedToggledFormattingIds:[Ae.t.show],enabledLabel:k.getLocalizedString("Format_AddZoomSlider")})),Z.unshift((0,d.pi)((0,d.pi)({type:2},ee),{disabledLabel:k.getLocalizedString("Delete"),keyboardShortcuts:[{key:"Delete",nextValue:!1}]}),{type:0,excludedResetFormattingIds:[ee,Ae.t.show,U]}),Z},ge=function(T,b,N,p,k,G){var ee=F(N,p),U=C(N,T,b),Z=U.axisShow,Pe=U.axisTitleShow,je=U.zoomAxisShow,f=[{type:1,destinationInfo:{cardUid:q(T,N),groupUid:ne(T,N,N&&ee?"valuesScalar":"values")},label:G.getLocalizedString("Format_AxisValues")}];return ee||f.unshift({type:4,sortableField:{queryName:"",sortDirection:1},label:G.getLocalizedString("Format_SortAxis"),key:"Category"}),N&&k===We.w.both&&f.unshift((0,d.pi)((0,d.pi)({type:3},X.p.categoryAxis.axisType),{label:G.getLocalizedString("Format_Label_AxisType")})),ee&&f.unshift((0,d.pi)((0,d.pi)({type:2},je),{relatedToggledFormattingIds:[Ae.t.show],enabledLabel:G.getLocalizedString("Format_AddZoomSlider")})),f.unshift((0,d.pi)((0,d.pi)({type:2},Pe),{enabledLabel:G.getLocalizedString("Format_AddAxisTitle")})),f.unshift((0,d.pi)((0,d.pi)({type:2},Z),{disabledLabel:G.getLocalizedString("Delete"),keyboardShortcuts:[{key:"Delete",nextValue:!1}]}),{type:0,excludedResetFormattingIds:[Z,Ae.t.show,je]}),f},F=function(T,b){return!T||b},C=function(T,b,N){if(T)return{axisShow:X.p.categoryAxis.show,axisTitleShow:X.p.categoryAxis.showAxisTitle,zoomAxisShow:Ae.t.showOnCategoryAxis};if(b){var p=N?X.p.valueAxis:X.p.y2Axis;return{axisShow:p.show,axisTitleShow:p.secShowAxisTitle,zoomAxisShow:Ae.t.showOnValueSecAxis}}return{axisShow:X.p.valueAxis.show,axisTitleShow:X.p.valueAxis.showAxisTitle,zoomAxisShow:Ae.t.showOnValueAxis}},q=function(T,b){return T?"".concat("Visual","-").concat("y2Axis"):b?"".concat("Visual","-").concat("categoryAxis"):"".concat("Visual","-").concat("valueAxis")},ne=function(T,b,N){return T?"".concat("y2Axis","-").concat(N):b?"".concat("categoryAxis","-").concat(N):"".concat("valueAxis","-").concat(N)},De=S(88439),Be=S(49511),ae=60;function ve(){for(var T,b,N,p,k,B=this,G=12!==this.chartType,U=new j.Nq(function(){return oe.call(B,se.call(B))},function(){return oe.call(B,w.call(B))},function(){return le.call(B)},function(){return Y.call(B)},function(){return Le.call(B)},function(){return me.call(B)},function(){return B.axisZoom.getZoomCard(G)}).build(),Z=[],Pe=0,je=this.getLayers();Pe<je.length;Pe++){var f=je[Pe];if(!f.getFormattingCards)return;Z.push(f.getFormattingCards({categoryAxisData:null===(b=null===(T=this.originalCartesianData)||void 0===T?void 0:T.axesData)||void 0===b?void 0:b.categoryAxis}))}if(Ot.fF.assert(function(){return B.isComboChart()||Z.length<=1},"Formatting layer cards length is not as expected"),this.isComboChart()){var v=De.pD(De.GJ(Z,this.chartType,function(K){for(var Re=[],_e=1;_e<arguments.length;_e++)Re[_e-1]=arguments[_e];return B.hostServices.getLocalizedString(K,Re)}),this.chartType);null===(N=U?.cards)||void 0===N||N.push.apply(N,v)}else 1===Z.length?null===(p=U?.cards)||void 0===p||p.push.apply(p,Z[0].card):Ot.fF.assert(function(){return 0===Z.length},"Formatting cards for layer has unexpected length");var H=(0,Ht._W)(this.background,this.localizer);return H&&(null===(k=U?.cards)||void 0===k||k.push(H)),U}function se(){var T,B=this,b=null===(T=this.originalCartesianData)||void 0===T?void 0:T.axesData,N=this.axes;if(N.hasCategoryAxis()&&b){var p=X.p.categoryAxis,k=b.categoryAxis,G=N.isYAxisCategorical,ee=G?"Visual_YAxis_Hyphen":"Visual_XAxis_Hyphen",U=new j.CQ(new j.lg("categoryAxis"),ee,[p.show,p.axisType,p.start,p.end,p.fontFamily,p.fontSize,p.bold,p.italic,p.underline,p.labelColor,p.labelDisplayUnits,p.labelPrecision,p.maxMarginFactor,p.preferredCategoryWidth,p.showAxisTitle,p.titleText,p.axisStyle,p.titleFontFamily,p.titleFontSize,p.titleBold,p.titleItalic,p.titleUnderline,p.titleColor,p.concatenateLabels,p.show,p.invertAxis,p.logAxisScale,p.switchAxisPosition],this.localizer),Z=this.categoryAxisIsScalar(),Pe=Z.isScalar;Z.supportedType===We.w.both&&U.addGroup("type",function(Ne){Ne.addSimpleSlice("type",new j.uY({descriptor:p.axisType,value:Pe?We.w.scalar:We.w.categorical}).build())}),Pe&&U.addGroup("range",function(Ne){Ne.withDisplayName("Visual_Axis_Range");var Qe=(0,Oe.getMergedUserDomains)(k),it=Qe[0],dt=Qe[1];if(N.isCategoryAxisDateTime()){var Rt=it&&Ue.y3.fromTimeValue(it),ct=dt&&Ue.y3.fromTimeValue(dt);Ne.addSimpleSlice("min",new j.hz({descriptor:(0,d.pi)((0,d.pi)({},p.start),{propertyTypes:{dateTime:!0},instanceKind:3}),value:Rt,placeholder:"",validators:{max:{type:1,value:ct}}}).build(),function(mt){return mt.withCustomDisplayName("Visual_Gradient_MinValue")}).addSimpleSlice("max",new j.hz({descriptor:(0,d.pi)((0,d.pi)({},p.end),{propertyTypes:{dateTime:!0},instanceKind:3}),value:ct,placeholder:"",validators:{min:{type:0,value:Rt}}}).build(),function(mt){return mt.withCustomDisplayName("Visual_Gradient_MaxValue")})}else Ne.addSimpleSlice("min",new j.mu({descriptor:(0,d.pi)((0,d.pi)({},p.start),{propertyTypes:{numeric:!0},instanceKind:3}),value:it,options:{maxValue:{type:1,value:dt}}}).build(),function(mt){return mt.withCustomDisplayName("Visual_Gradient_MinValue")}).addSimpleSlice("max",new j.mu({descriptor:(0,d.pi)((0,d.pi)({},p.end),{propertyTypes:{numeric:!0},instanceKind:3}),value:dt,options:{minValue:{type:0,value:it}}}).build(),function(mt){return mt.withCustomDisplayName("Visual_Gradient_MaxValue")});Ne.addSimpleSlice("logAxisScale",new j.bd({descriptor:p.logAxisScale,value:k.logAxisScale}).build(),function(mt){return mt.withDisabled(!B.isLogAxisScaleAllowed(!1)).withCustomDescriptionIf(function(){return!B.isLogAxisScaleAllowed(!1)},"Visual_LogarithmicScaleDescription")}),Ne.addSimpleSlice("invertAxis",new j.bd({descriptor:p.invertAxis,value:k.invertAxis}).build(),function(mt){return mt.withCustomDisplayName("Visual_InvertRange")})});var f=k.labelFontProperties,v=k.titleFontProperties,H=(new j.UN).withFontFamily({descriptor:p.fontFamily,value:f.family}).withFontSizeProperties({descriptor:p.fontSize,value:f.size.pt}).withBold({descriptor:p.bold,value:f.weight===xt.en}).withItalic({descriptor:p.italic,value:f.style===xt.BF}).withUnderline({descriptor:p.underline,value:f.textDecoration===xt.f0}),K=(new j.UN).withFontFamily({descriptor:p.titleFontFamily,value:v.family}).withFontSizeProperties({descriptor:p.titleFontSize,value:v.size.pt}).withBold({descriptor:p.titleBold,value:v.weight===xt.en}).withItalic({descriptor:p.titleItalic,value:v.style===xt.BF}).withUnderline({descriptor:p.titleUnderline,value:v.textDecoration===xt.f0}),Re=H.build(),_e=K.build();return U.addGroup(Pe?"valuesScalar":"values",function(Ne){var Qe;Ne.withDisplayName("Role_DisplayName_Values").addCompositeSlice("font","Font",Re).addTopLevelToggle("show",function(){return new j.bd({descriptor:p.show,value:k.show}).build()}).addSimpleSlice("color",new j.BT({descriptor:(0,d.pi)((0,d.pi)({},p.labelColor),{instanceKind:3}),value:{value:f.color}}).build()),Pe?Ne.addSimpleSlice("displayUnits",new j.uY({descriptor:p.labelDisplayUnits,value:k.labelDisplayUnits}).build(),function(it){return it.withAliasName("Decimal")}).addSimpleSlice("precision",new j.mu({descriptor:p.labelPrecision,value:k.labelPrecision,options:{minValue:{type:0,value:0},maxValue:{type:1,value:Ge.vo}}}).build()):Ne.addSimpleSlice("maxMarginFactor",new j.JN({descriptor:p.maxMarginFactor,value:Math.round(100*k.maxMarginFactor),options:{minValue:{type:0,value:15},maxValue:{type:1,value:50},unitSymbol:Pt.t2},localize:B.localizer}).build(),function(it){return it.withCustomDisplayName(G?"Visual_Max_Width":"Visual_Max_Height")}),G&&Ne.addSimpleSlice("switchAxisPosition",new j.bd({descriptor:p.switchAxisPosition,value:k.switchAxisPosition}).build(),function(it){return it.withCustomDisplayName("Visual_SwitchAxisPosition")}),null!==(Qe=B.cartesianVisualCapabilities)&&void 0!==Qe&&Qe.supportsHierarchicalCategoryAxis&&!Pe&&Ne.addSimpleSlice("concatenateLabels",new j.bd({descriptor:p.concatenateLabels,value:k.concatenateLabels}).build())}).addGroup("title",function(Ne){Ne.withDisplayName("Visual_Title").withInheritDisabled(!1).addTopLevelToggle("show",function(){return new j.bd({descriptor:p.showAxisTitle,value:k.showAxisTitle}).build()}).addSimpleSlice("text",new j.fq({descriptor:p.titleText,value:k.titleText,placeholder:""}).build(),function(Qe){return Qe.withCustomDisplayName("Visual_Title_Text")}).addSimpleSlice("style",function(){return new j.uY({descriptor:p.axisStyle,value:k.axisStyle,filterValues:N.categoryAxisHasUnitType?[ft.DO.showTitleOnly,ft.DO.showUnitOnly,ft.DO.showBoth]:[ft.DO.showTitleOnly]}).build()}).addCompositeSlice("font","Font",_e).addSimpleSlice("color",new j.BT({descriptor:(0,d.pi)((0,d.pi)({},p.titleColor),{instanceKind:3}),value:{value:v.color}}).build(),function(Qe){return Qe.withCustomDisplayName("Generic_Color")})}),Pe||U.addGroup("layout",function(Ne){Ne.withDisplayName("Layout").withInheritDisabled(!1).addSimpleSlice("preferredCategoryWidth",new j.JN({descriptor:X.p.categoryAxis.preferredCategoryWidth,value:k.preferredCategoryWidth,options:{minValue:{type:0,value:20},maxValue:{type:1,value:180},unitSymbol:Pt.e_},localize:B.localizer}).build(),function(Qe){return Qe.withCustomDisplayName(G?"Visual_Category_Height":"Visual_Category_Width").withCustomDescription(G?"Visual_Category_Height_Description":"Visual_Category_Width_Description").withHidden(Pe)})}),U.build()}}function w(){var T,B=this,b=null===(T=this.originalCartesianData)||void 0===T?void 0:T.axesData;if(b?.isValueAxisSet){var N=this.axes,p=X.p.valueAxis,k=b.valueAxis,G=N.isYAxisCategorical,ee=G?"Visual_XAxis_Hyphen":"Visual_YAxis_Hyphen",U=new j.CQ(new j.lg("valueAxis"),ee,[p.show,p.start,p.end,p.invertAxis,p.sharedAxis,p.scaleToFit,p.fontFamily,p.fontSize,p.bold,p.italic,p.underline,p.labelColor,p.labelDisplayUnits,p.labelPrecision,p.showAxisTitle,p.titleText,p.axisStyle,p.titleFontFamily,p.titleFontSize,p.titleBold,p.titleItalic,p.titleUnderline,p.titleColor,p.logAxisScale,p.switchAxisPosition],this.localizer),Z=k.labelFontProperties,Pe=k.titleFontProperties,je=(new j.UN).withFontFamily({descriptor:p.fontFamily,value:Z.family}).withFontSizeProperties({descriptor:p.fontSize,value:Z.size.pt}).withBold({descriptor:p.bold,value:k.labelBold}).withItalic({descriptor:p.italic,value:k.labelItalic}).withUnderline({descriptor:p.underline,value:k.labelUnderline}),f=(new j.UN).withFontFamily({descriptor:p.titleFontFamily,value:Pe.family}).withFontSizeProperties({descriptor:p.titleFontSize,value:Pe.size.pt}).withBold({descriptor:p.titleBold,value:k.titleBold}).withItalic({descriptor:p.titleItalic,value:k.titleItalic}).withUnderline({descriptor:p.titleUnderline,value:k.titleUnderline}),v=je.build(),H=f.build();return U.addGroup("range",function(K){var Re=(0,Oe.getMergedUserDomains)(k),_e=Re[0],Ve=Re[1];K.withDisplayName("Visual_Axis_Range").withInheritDisabled(!1).addSimpleSlice("min",new j.mu({descriptor:(0,d.pi)((0,d.pi)({},p.start),{propertyTypes:{numeric:!0},instanceKind:3}),value:_e,options:{maxValue:{type:1,value:Ve}}}).build(),function(Ne){return Ne.withCustomDisplayName("Visual_Gradient_MinValue")}).addSimpleSlice("max",new j.mu({descriptor:(0,d.pi)((0,d.pi)({},p.end),{propertyTypes:{numeric:!0},instanceKind:3}),value:Ve,options:{minValue:{type:0,value:_e}}}).build(),function(Ne){return Ne.withCustomDisplayName("Visual_Gradient_MaxValue")}),12!==B.chartType&&K.addSimpleSlice("logAxisScale",new j.bd({descriptor:p.logAxisScale,value:k.logAxisScale}).build(),function(Ne){return Ne.withDisabled(!B.isLogAxisScaleAllowed(!0)).withCustomDescriptionIf(function(){return!B.isLogAxisScaleAllowed(!0)},"Visual_LogarithmicScaleDescription")}),K.addSimpleSlice("invertAxis",new j.bd({descriptor:p.invertAxis,value:k.invertAxis}).build(),function(Ne){return Ne.withCustomDisplayName("Visual_InvertRange")}),B.isSmallMultiples()&&K.addSimpleSlice("sharedAxis",new j.bd({descriptor:p.sharedAxis,value:k.sharedAxis}).build(),function(Ne){N.isYAxisCategorical&&Ne.withCustomDisplayName("Visual_Shared_XAxis")}).addSimpleSlice("scaleToFit",new j.bd({descriptor:p.scaleToFit,value:k.scaleToFit}).build(),function(Ne){return Ne.withDisabled(k.sharedAxis)})}).addGroup("values",function(K){K.withDisplayName("Role_DisplayName_Values").addCompositeSlice("font","Font",v).addTopLevelToggle("show",function(){return new j.bd({descriptor:p.show,value:k.show}).build()}).addSimpleSlice("color",new j.BT({descriptor:(0,d.pi)((0,d.pi)({},p.labelColor),{instanceKind:3}),value:{value:Z.color}}).build()),b.isValueAxisIrregular&&K.withDisabled(!0,"Visual_Axis_Disabled_IrregularAxis"),B.is100Stacked()||K.addSimpleSlice("displayUnits",new j.uY({descriptor:p.labelDisplayUnits,value:k.labelDisplayUnits}).build(),function(Re){return Re.withAliasName("Decimal")}).addSimpleSlice("precision",new j.mu({descriptor:p.labelPrecision,value:k.labelPrecision,options:{minValue:{type:0,value:0},maxValue:{type:1,value:Ge.vo}}}).build()),G||K.addSimpleSlice("switchAxisPosition",new j.bd({descriptor:p.switchAxisPosition,value:k.switchAxisPosition}).build(),function(Re){return Re.withCustomDisplayName("Visual_SwitchAxisPosition")})}).addGroup("title",function(K){K.withDisplayName("Visual_Title").withInheritDisabled(!1).addTopLevelToggle("show",function(){return new j.bd({descriptor:p.showAxisTitle,value:k.showAxisTitle}).build()}).addSimpleSlice("text",new j.fq({descriptor:p.titleText,value:k.titleText,placeholder:""}).build(),function(Re){return Re.withCustomDisplayName("Visual_Title_Text")}).addSimpleSlice("style",function(){return new j.uY({descriptor:p.axisStyle,value:k.axisStyle,filterValues:N.valueAxisHasUnitType?[ft.DO.showTitleOnly,ft.DO.showUnitOnly,ft.DO.showBoth]:[ft.DO.showTitleOnly]}).build()}).addCompositeSlice("font","Font",H).addSimpleSlice("color",new j.BT({descriptor:(0,d.pi)((0,d.pi)({},p.titleColor),{instanceKind:3}),value:{value:Pe.color}}).build(),function(Re){return Re.withCustomDisplayName("Generic_Color")})}),U.build()}}function le(){var T,B=this,b=null===(T=this.originalCartesianData)||void 0===T?void 0:T.axesData;if(b?.isValueAxisSet&&!b.isValueAxisIrregular){var p,k,G;switch(this.chartType){case 0:case 1:p=!0,k=X.p.y2Axis.show,G=X.p.y2Axis;break;case 13:case 14:p=!0,k=X.p.valueAxis.secShow,G=X.p.valueAxis;break;default:p=!1}if(p){var ee=this.axes,U=b,Z=U.y2,je=new j.CQ(new j.lg("y2Axis"),"Visual_Y2Axis_Hyphen",(0,d.pi)((0,d.pi)({},G),{alignZeros:X.p.valueAxis.alignZeros}),this.localizer),f=Z.labelFontProperties,v=Z.titleFontProperties,H=(new j.UN).withFontFamily({descriptor:G.secFontFamily,value:f.family}).withFontSizeProperties({descriptor:G.secFontSize,value:f.size.pt}).withBold({descriptor:G.secBold,value:Z.labelBold}).withItalic({descriptor:G.secItalic,value:Z.labelItalic}).withUnderline({descriptor:G.secUnderline,value:Z.labelUnderline}),K=(new j.UN).withFontFamily({descriptor:G.secTitleFontFamily,value:v.family}).withFontSizeProperties({descriptor:G.secTitleFontSize,value:v.size.pt}).withBold({descriptor:G.secTitleBold,value:Z.titleBold}).withItalic({descriptor:G.secTitleItalic,value:Z.titleItalic}).withUnderline({descriptor:G.secTitleUnderline,value:Z.titleUnderline}),Re=H.build(),_e=K.build();return je.addGroup("range",function(Ve){var Ne=(0,Oe.getMergedUserDomains)(Z),Qe=Ne[0],it=Ne[1];Ve.withDisplayName("Visual_Axis_Range").addSimpleSlice("min",new j.mu({descriptor:(0,d.pi)((0,d.pi)({},G.secStart),{instanceKind:3}),value:Qe,options:{maxValue:{type:1,value:it}}}).build(),function(dt){return dt.withCustomDisplayName("Visual_Gradient_MinValue")}).addSimpleSlice("max",new j.mu({descriptor:(0,d.pi)((0,d.pi)({},G.secEnd),{instanceKind:3}),value:it,options:{minValue:{type:0,value:Qe}}}).build(),function(dt){return dt.withCustomDisplayName("Visual_Gradient_MaxValue")}),Ve.addSimpleSlice("logAxisScale",new j.bd({descriptor:G.secLogAxisScale,value:Z.logAxisScale}).build(),function(dt){return dt.withDisabled(!B.isLogAxisScaleAllowed(!0,!0)).withCustomDescriptionIf(function(){return!B.isLogAxisScaleAllowed(!0,!0)},"Visual_LogarithmicScaleDescription")}),B.isComboChart()&&Ve.addSimpleSlice("alignZeroes",new j.bd({descriptor:X.p.valueAxis.alignZeros,value:U.valueAxis.alignZeros}).build())}).addGroup("values",function(Ve){Ve.withDisplayName("Role_DisplayName_Values").addTopLevelToggle("show",function(){return new j.bd({descriptor:k,value:Z.show}).build()}).addCompositeSlice("font","Font",Re).addSimpleSlice("color",new j.BT({descriptor:G.secLabelColor,value:{value:f.color}}).build()),B.is100Stacked()||Ve.addSimpleSlice("displayUnits",new j.uY({descriptor:G.secLabelDisplayUnits,value:Z.labelDisplayUnits}).build(),function(Ne){return Ne.withAliasName("Decimal")}).addSimpleSlice("precision",new j.mu({descriptor:G.secLabelPrecision,value:Z.labelPrecision,options:{minValue:{type:0,value:0},maxValue:{type:1,value:Ge.vo}}}).build())}).addGroup("title",function(Ve){Ve.withDisplayName("Visual_Title").withInheritDisabled(!1).addTopLevelToggle("show",function(){return new j.bd({descriptor:G.secShowAxisTitle,value:Z.showAxisTitle}).build()}).addSimpleSlice("text",new j.fq({descriptor:G.secTitleText,value:Z.titleText,placeholder:""}).build(),function(Ne){return Ne.withCustomDisplayName("Visual_Title_Text")}).addSimpleSlice("style",function(){return new j.uY({descriptor:G.secAxisStyle,value:Z.axisStyle,filterValues:ee.valueAxisHasUnitType?[ft.DO.showTitleOnly,ft.DO.showUnitOnly,ft.DO.showBoth]:[ft.DO.showTitleOnly]}).build()}).addCompositeSlice("font","Font",_e).addSimpleSlice("color",new j.BT({descriptor:G.secTitleColor,value:{value:v.color}}).build(),function(Ne){return Ne.withCustomDisplayName("Generic_Color")})}),je.build()}}}function Y(){var B,T=null===(B=this.originalCartesianData)||void 0===B?void 0:B.legendData;if(!_.isEmpty(this.dataViews)&&T){for(var b={legendData:T},p=0,k=this.getLayers();p<k.length;p++){var G=k[p];G.customizeLegendFormattingModelOptions&&(b=G.customizeLegendFormattingModelOptions(b))}var ee;return ee=this.featureSwitches.onObject?"Visual_LegendCard_DisabledReasonNew":13===this.chartType?"Visual_LegendCard_ComboLineClustered_DisabledReason":14===this.chartType?"Visual_LegendCard_ComboLineStacked_DisabledReason":"Visual_LegendCard_DisabledReason",(0,Mt.ZF)(b,this.hostServices,this.featureSwitches,!this.shouldShowLegendCard(),ee)}}function me(){var T,B=this,b=null===(T=this.originalCartesianData)||void 0===T?void 0:T.axesData;if(!_.isEmpty(this.dataViews)&&b){var G,ee,U,Z,N=this.axes,p=N.hasCategoryAxis(),k=N.isYAxisCategorical,je=this.categoryAxisIsScalar().isScalar||this.hasHierarchicalAxisRenderMode;k?(G=X.p.categoryAxis,ee=b.categoryAxis,p&&(U=X.p.valueAxis,Z=b.valueAxis)):(G=X.p.valueAxis,ee=b.valueAxis,p&&12!==this.chartType&&(U=X.p.categoryAxis,Z=b.categoryAxis));var f=new j.CQ(new j.lg("gridlines"),"Visual_Gridline_Show",[X.p.categoryAxis.gridlineShow,X.p.categoryAxis.gridlineStyle,X.p.categoryAxis.gridlineColor,X.p.categoryAxis.gridlineTransparency,X.p.categoryAxis.gridlineThickness,X.p.categoryAxis.gridlineDashArray,X.p.categoryAxis.gridlineDashCap,X.p.categoryAxis.gridlineAutoScale,X.p.valueAxis.gridlineShow,X.p.valueAxis.gridlineStyle,X.p.valueAxis.gridlineColor,X.p.valueAxis.gridlineTransparency,X.p.valueAxis.gridlineThickness,X.p.valueAxis.gridlineDashArray,X.p.valueAxis.gridlineDashCap,X.p.valueAxis.gridlineAutoScale],this.localizer),v=function(K,Re,_e,Ve){Re&&K.withDisplayName(Ve).addTopLevelToggle("show",function(){return new j.bd({descriptor:Re.gridlineShow,value:!!_e.show&&_e.gridline.strokeShow}).build()},function(Ne){return Ne.withDisabled(!_e.show)}).addSlices((0,et.Iq)({containerItemBuilder:K,descriptors:{strokePattern:Re.gridlineStyle,strokeColor:Re.gridlineColor,strokeTransparency:Re.gridlineTransparency,strokeWidth:Re.gridlineThickness,strokeDashArray:Re.gridlineDashArray,strokeDashCap:Re.gridlineDashCap,strokeAutoScale:Re.gridlineAutoScale},strokeData:_e.gridline,selector:void 0,featureSwitches:B.featureSwitches,localize:B.localizer,isSVGStroke:!0,colorInstanceKind:3,maxWidth:4}).map(function(Ne){return Ne.build()}))};return(ee&&!k||k&&je)&&f.addGroup("horizontal",function(H){return v(H,G,ee,"Visual_LabelOrientation_Horizontal")}),(U&&Z&&k||!k&&je)&&f.addGroup("vertical",function(H){return v(H,U,Z,"Visual_LabelOrientation_Vertical")}),f.build()}}function Le(){var B=this;if(11!==this.chartType&&12!==this.chartType&&!_.isEmpty(this.dataViews)){var T=ce.N_.smallMultiplesLayout,b=ce.N_.subheader,N=new j.CQ(new j.lg("smallMultiples"),"Role_DisplayName_SmallMultiples",[T.rowCount,T.columnCount,T.gridPadding,T.advancedPaddingOptions,T.columnPaddingInner,T.columnPaddingOuter,T.rowPaddingInner,T.rowPaddingOuter,T.gridLineType,T.gridLineShow,T.gridLineStyle,T.gridLineColor,T.gridLineTransparency,T.gridLineWidth,T.backgroundColor,T.backgroundTransparency,b.show,b.fontFamily,b.fontSize,b.fontColor,b.underline,b.bold,b.italic,b.position,b.alignment,b.titleWrap],this.localizer);if(!this.showSmallMultiplesCard())return N.withDisabled(!0,"Visual_SmallMultipleCard_DisabledReason"),N.build();var p=(0,P.Zw)(this.dataViews[0].metadata.objects,this.layerStyle),k=(0,P.yA)(this.dataViews[0].metadata.objects,this.layerStyle),G=P.LK(p);return N.withDescription("Small_Multiples_Layout_Description").addGroup("layout",function(ee){Ot.fF.assert(function(){return 0!==p.layoutType},"Unexpected auto layout"),ee.withDisplayName("Layout").addSimpleSlice("rowCount",new j.mu({descriptor:T.rowCount,value:p.rowCount,options:{minValue:{type:0,value:P.$W},maxValue:{type:1,value:G.maxRowCount}}}).build()).addSimpleSlice("columnCount",new j.mu({descriptor:T.columnCount,value:p.columnCount,options:{minValue:{type:0,value:P.fw},maxValue:{type:1,value:G.maxColumnCount}}}).build());var U=p.advancedPaddingOptions,Z={minValue:{type:0,value:0},maxValue:{type:1,value:40}};ee.addSimpleSlice("gridPadding",new j.mu({descriptor:T.gridPadding,value:p.gridPadding,options:Z}).build(),function(Pe){return Pe.withDisabled(U).withCustomDisplayName("Small_Multiples_All_Padding")}).addSimpleSlice("advancedPadding",new j.bd({descriptor:T.advancedPaddingOptions,value:p.advancedPaddingOptions}).build(),function(Pe){return Pe.withCustomDisplayName("Small_Multiples_Customize_Padding")}),U&&ee.addSimpleSlice("columnPaddingInner",new j.JN({descriptor:T.columnPaddingInner,value:p.columnPaddingInner,options:Z,localize:B.localizer}).build()).addSimpleSlice("columnPaddingOuter",new j.JN({descriptor:T.columnPaddingOuter,value:p.columnPaddingOuter,options:Z,localize:B.localizer}).build()).addSimpleSlice("rowPaddingInner",new j.JN({descriptor:T.rowPaddingInner,value:p.rowPaddingInner,options:Z,localize:B.localizer}).build()).addSimpleSlice("rowPaddingOuter",new j.JN({descriptor:T.rowPaddingOuter,value:p.rowPaddingOuter,options:Z,localize:B.localizer}).build())}),N.addGroup("border",function(ee){return ee.withDisplayName("Visual_Border").addSimpleSlice("gridLineType",new j.uY({descriptor:T.gridLineType,value:p.gridline.region===Be.o.none?Be.o.inner:p.gridline.region}).build()).addSlices((0,et.Iq)({containerItemBuilder:ee,descriptors:{strokeShow:T.gridLineShow,strokeColor:T.gridLineColor,strokeTransparency:T.gridLineTransparency,strokePattern:T.gridLineStyle,strokeWidth:T.gridLineWidth},strokeData:p.gridline,selector:void 0,featureSwitches:B.featureSwitches,localize:B.localizer}).map(function(U){return U.build()}))}),N.addGroup("title",function(ee){ee.withDisplayName("Title"),ee.addTopLevelToggle("show",function(){return new j.bd({descriptor:b.show,value:!!B.showSubheaderCard()&&k.show}).build()});var U=k.fontProperties,Pe=(new j.UN).withFontFamily({descriptor:b.fontFamily,value:U.family}).withFontSizeProperties({descriptor:b.fontSize,value:U.size.pt}).withBold({descriptor:b.bold,value:k.labelBold}).withItalic({descriptor:b.italic,value:k.labelItalic}).withUnderline({descriptor:b.underline,value:k.labelUnderline}).build();ee.addSimpleSlice("position",function(){var je;switch(k.vertical){default:case 0:je=rt.cL.top;break;case 1:je=rt.cL.bottom}return new j.uY({descriptor:b.position,value:je}).build()}).addCompositeSlice("font","Font",Pe).addSimpleSlice("color",new j.BT({descriptor:(0,d.pi)((0,d.pi)({},b.fontColor),{instanceKind:3,selector:{data:[(0,At.Yp)([X.x.rows])]},altConstantValueSelector:null}),value:{value:U.color}}).build()).addSimpleSlice("alignment",function(){var je;switch(k.horizontal){default:case 0:je=kt.D.left;break;case 1:je=kt.D.center;break;case 2:je=kt.D.right}return new j.Gp({descriptor:b.alignment,value:je,mode:"horizontalAlignment"}).build()}),ee.addSimpleSlice("titleWrap",new j.bd({descriptor:b.titleWrap,value:k.titleWrap}).build(),function(je){return je.withCustomDisplayName("TextWrap")})}),N.addGroup("background",function(ee){return ee.withDisplayName("Visual_Background").addSimpleSlice("color",new j.BT({descriptor:(0,d.pi)((0,d.pi)({},T.backgroundColor),{selector:{data:[(0,At.Yp)([X.x.rows])]},altConstantValueSelector:null,instanceKind:3}),value:{value:p.backgroundColor},isNoFillItemSupported:!0}).build(),function(U){return U.withCustomDisplayName("Generic_Color")}).addSimpleSlice("transparency",j.JN.getTransparencySliderBuilder({descriptor:T.backgroundTransparency,value:p.backgroundTransparency,localize:B.localizer}).build(),function(U){return U.withCustomDisplayName("Transparency")})}),N.build()}}function ye(B,T){return new j.JN({descriptor:X.p.categoryAxis.innerPadding,value:P.qE(B),options:{minValue:{type:0,value:P.T4},maxValue:{type:1,value:P.zn},unitSymbol:Pt.t2},localize:T}).build()}function oe(B){if(B)for(var b=B,N=0,p=this.getLayers();N<p.length;N++){var k=p[N];return k.customizeFormattingCard&&(b=k.customizeFormattingCard(B)),b}}function Ce(B){for(var b=0,N=this.getLayers();b<N.length;b++){var p=N[b];if(p.getSubSelectionCustomOutlines){var k=p.getSubSelectionCustomOutlines(B);if(k)return k}}return[]}function de(B){for(var b=0,N=this.getLayers();b<N.length;b++){var p=N[b];if(p.getSubSelectionCustomElements){var k=p.getSubSelectionCustomElements(B);if(k)return k}}return[]}function z(B){for(var b=0,N=this.getLayers();b<N.length;b++){var p=N[b];if(p.getSubSelectionMetadata){var k=p.getSubSelectionMetadata(B);if(k)return k}}return null}function L(B){if(this.featureSwitches.onObject){var N,p,b=_.first(B).visualObjects;if(!(b.length>0))return;N=b[0],N?.selectorsByColumn&&(p=(0,vt.fd)((0,vt.tV)(N.selectorsByColumn)));var k=1===this.getLayers().length&&this.cartesianData.legendData.dataPoints.length<=1,G=this.isComboChart();switch(N.objectName){case"legend-title":return(0,Mt.aJ)();case"x-axis-zoom-slider":case"y1-axis-zoom-slider":case"y2-axis-zoom-slider":return;case"legend-items":return(0,Mt.Gh)(this.hostServices);case"horizontal-gridlines":return Ke.w3(this.hostServices,this.axes.isYAxisCategorical?X.p.categoryAxis.gridlineColor:X.p.valueAxis.gridlineColor);case"vertical-gridlines":return Ke.w3(this.hostServices,this.axes.isYAxisCategorical?X.p.valueAxis.gridlineColor:X.p.categoryAxis.gridlineColor);case"series-labels":var ee=k?void 0:p;return Ke.un(this.hostServices,{fontFamilyReference:(0,d.pi)((0,d.pi)({},ce.N_.seriesLabels.seriesFontFamily),{selector:ee}),fontSizeReference:(0,d.pi)((0,d.pi)({},ce.N_.seriesLabels.textSize),{selector:ee}),boldReference:(0,d.pi)((0,d.pi)({},ce.N_.seriesLabels.bold),{selector:ee}),italicReference:(0,d.pi)((0,d.pi)({},ce.N_.seriesLabels.italic),{selector:ee}),underlineReference:(0,d.pi)((0,d.pi)({},ce.N_.seriesLabels.underline),{selector:ee}),fontColorReference:(0,d.pi)((0,d.pi)({},ce.N_.seriesLabels.seriesColor),{selector:ee}),backgroundReference:(0,d.pi)((0,d.pi)({},ce.N_.seriesLabels.backgroundColor),{selector:ee}),wordWrapReference:(0,d.pi)((0,d.pi)({},ce.N_.seriesLabels.seriesWordWrap),{selector:ee})});case"x-axis-title":return lt(!1,G,!this.axes.isYAxisCategorical,this.hostServices);case"y1-axis-title":return lt(!1,G,this.axes.isYAxisCategorical,this.hostServices);case"y2-axis-title":return lt(!0,G,this.axes.isYAxisCategorical,this.hostServices);case"x-axis-values":return Se(!1,G,!this.axes.isYAxisCategorical,this.hostServices);case"y1-axis-values":return Se(!1,G,this.axes.isYAxisCategorical,this.hostServices);case"y2-axis-values":return Se(!0,G,this.axes.isYAxisCategorical,this.hostServices);case"grid-cell-subheader":var U=ce.N_.subheader;return Ke.un(this.hostServices,{fontFamilyReference:U.fontFamily,fontSizeReference:U.fontSize,boldReference:U.bold,italicReference:U.italic,underlineReference:U.underline,fontColorReference:(0,d.pi)((0,d.pi)({},U.fontColor),{selector:{data:[(0,At.Yp)([X.x.rows])]}}),horizontalAlignmentReference:U.alignment,wordWrapReference:U.titleWrap});case"small-multiples-gridlines":var Z=ce.N_.smallMultiplesLayout;return Ke.w3(this.hostServices,Z.gridLineColor,(0,d.pi)((0,d.pi)({},Z.backgroundColor),{selector:{data:[(0,At.Yp)([X.x.rows])]}}),this.localizer("Visual_Border"));default:for(var Pe=0,je=this.getLayers();Pe<je.length;Pe++){var f=je[Pe];if(f.getSubSelectionStyles){var v=f.getSubSelectionStyles(B);if(v)return v}}}}}function E(B,T){if(this.featureSwitches.onObject&&!T){var p,N=_.first(B).visualObjects;if(!(N.length>0))return;p=N[0];var Z,k=this.getLayers(),G=this.isComboChart(),ee=k.length<=1&&this.cartesianData.legendData.dataPoints.length<=1,U={key:"Delete",nextValue:!1};switch(!ee&&!_.isEmpty(p.selectorsByColumn)&&(Z=(0,vt.fd)((0,vt.tV)(p.selectorsByColumn))),p.objectName){case"legend-title":return(0,Mt.tV)(this.hostServices);case"legend-items":return(0,Mt.tY)({hostServices:this.hostServices,showSort:!0});case"horizontal-gridlines":return[(0,d.pi)((0,d.pi)({type:2},(this.axes.isYAxisCategorical?X.p.categoryAxis:X.p.valueAxis).gridlineShow),{disabledLabel:this.localizer("Delete"),keyboardShortcuts:[U]}),{type:0},{type:1,destinationInfo:{cardUid:"".concat("Visual","-").concat("gridlines"),groupUid:"".concat("gridlines","-").concat("horizontal")},label:this.localizer("Format_Gridlines")}];case"vertical-gridlines":return[(0,d.pi)((0,d.pi)({type:2},(this.axes.isYAxisCategorical?X.p.valueAxis:X.p.categoryAxis).gridlineShow),{disabledLabel:this.localizer("Delete"),keyboardShortcuts:[U]}),{type:0},{type:1,destinationInfo:{cardUid:"".concat("Visual","-").concat("gridlines"),groupUid:"".concat("gridlines","-").concat("vertical")},label:this.localizer("Format_Gridlines")}];case"data-labels":var f=ee?ce.N_.labels.show:ce.N_.labels.showSeries;return[(0,d.pi)((0,d.pi)({type:2},f),{disabledLabel:this.localizer("Delete"),selector:Z,keyboardShortcuts:[U]}),{type:0,excludedResetFormattingIds:[(0,d.pi)((0,d.pi)({},f),{selector:Z})],relatedResetFormattingIds:[(0,d.pi)((0,d.pi)({},ce.N_.labels.enableBackground),{selector:Z})]},{type:1,destinationInfo:(0,d.pi)((0,d.pi)({},ce.N_.labels.labelPosition),{selector:Z}),label:this.localizer("Format_Data_Labels")}];case"series-labels":return[(0,d.pi)((0,d.pi)({type:2},ce.N_.seriesLabels.show),{disabledLabel:this.localizer("Delete"),selector:Z,keyboardShortcuts:[U]}),{type:0,relatedResetFormattingIds:[(0,d.pi)((0,d.pi)({},ce.N_.seriesLabels.enableBackground),{selector:Z})],excludedResetFormattingIds:[(0,d.pi)((0,d.pi)({},ce.N_.seriesLabels.show),{selector:Z})]},{type:1,destinationInfo:(0,d.pi)((0,d.pi)({},ce.N_.seriesLabels.seriesPosition),{selector:Z}),label:this.localizer("Format_Series_Labels")}];case"total-labels":return[(0,d.pi)((0,d.pi)({type:2},ce.N_.totals.show),{disabledLabel:this.localizer("Delete"),keyboardShortcuts:[U]}),{type:0,excludedResetFormattingIds:[ce.N_.totals.show]},{type:1,destinationInfo:{cardUid:"".concat("Visual","-").concat("totals"),groupUid:"".concat("totals","-").concat("values")},label:this.localizer("Format_Total_Labels")}];case"x-axis-title":return qe(!1,G,!this.axes.isYAxisCategorical,this.categoryAxisIsScalar().isScalar,this.hostServices);case"y1-axis-title":return qe(!1,G,this.axes.isYAxisCategorical,this.categoryAxisIsScalar().isScalar,this.hostServices);case"y2-axis-title":return qe(!0,G,this.axes.isYAxisCategorical,this.categoryAxisIsScalar().isScalar,this.hostServices);case"x-axis-values":return ge(!1,G,!this.axes.isYAxisCategorical,this.categoryAxisIsScalar().isScalar,this.categoryAxisIsScalar().supportedType,this.hostServices);case"y1-axis-values":return ge(!1,G,this.axes.isYAxisCategorical,this.categoryAxisIsScalar().isScalar,this.categoryAxisIsScalar().supportedType,this.hostServices);case"y2-axis-values":return ge(!0,G,this.axes.isYAxisCategorical,this.categoryAxisIsScalar().isScalar,this.categoryAxisIsScalar().supportedType,this.hostServices);case"grid-cell-subheader":return[(0,d.pi)((0,d.pi)({type:2},ce.N_.subheader.show),{disabledLabel:this.localizer("Delete"),keyboardShortcuts:[U]}),{type:0},{type:1,destinationInfo:{cardUid:"".concat("Visual","-").concat("smallMultiples"),groupUid:"".concat("smallMultiples","-").concat("title")},label:this.localizer("Format_Small_Multiples_Title")}];case"small-multiples-gridlines":return[{type:0},(0,d.pi)((0,d.pi)({type:3},ce.N_.smallMultiplesLayout.gridLineType),{label:this.localizer("Small_Multiples_Gridlines_Style")}),{type:1,destinationInfo:{cardUid:"".concat("Visual","-").concat("smallMultiples"),groupUid:"".concat("smallMultiples","-").concat("border")},label:this.localizer("Format_Small_Multiples_Border")}];case"x-axis-zoom-slider":case"y1-axis-zoom-slider":case"y2-axis-zoom-slider":return[(0,d.pi)((0,d.pi)({type:2},"y2-axis-zoom-slider"===p.objectName?Ae.t.showOnValueSecAxis:!("x-axis-zoom-slider"!==p.objectName)==!!this.axes.isYAxisCategorical?Ae.t.showOnValueAxis:Ae.t.showOnCategoryAxis),{disabledLabel:this.localizer("Delete"),keyboardShortcuts:[U]}),{type:0,excludedResetFormattingIds:[Ae.t.showOnValueSecAxis]},(0,d.pi)((0,d.pi)({type:2},Ae.t.showLabels),{enabledLabel:this.localizer("Format_AddSliderLabels")}),(0,d.pi)((0,d.pi)({type:2},Ae.t.showTooltip),{enabledLabel:this.localizer("Format_AddSliderTooltips")}),{type:1,destinationInfo:{cardUid:"".concat("Visual","-").concat("zoom"),groupUid:"".concat("zoom","-").concat("default")},label:this.localizer("Format_ZoomSlider")}];default:for(var Ve=0,Ne=k;Ve<Ne.length;Ve++){var Qe=Ne[Ve];if(Qe.getSubSelectionShortcuts){var it=Qe.getSubSelectionShortcuts(B,T);if(it)return it}}}}}function Q(B){for(var T=this.subSelectionHelper.getAllSubSelectables(B),N=0,p=this.getLayers();N<p.length;N++){var k=p[N];k.getDisambiguationSubSelectables&&T.push.apply(T,k.getDisambiguationSubSelectables(this.subSelectionHelper,B))}return T}},63616:function(li,la,S){"use strict";S.r(la),S.d(la,{CartesianAxisRenderModeSelector:function(){return ps},CartesianCategoryLoadMoreDataHandler:function(){return to},CartesianChart:function(){return Nu},SharedColorPalette:function(){return eo}});var d=S(81337),X=S(22733),ce=S(86946),Ge=S(90120),Ke=S(95938),et=S(51650),Ht=S(95309),Pt=S(33777),Mt=S(28579),ft=S(47006),We=S(52287),kt=S(86900),rt=S(92783),xt=S(45545),Ot=S(65741),j=S(72902),vt=S(40739),At=S(48766),Ue=S(45296),Oe=S(44783),P=S(62458),Ae=S(39681),lt=S(58778),Se=S(56578),qe=S(60810),ge=S(46135),F=S(38958),C=S(82755),q=S(79154),ne=S(32041),ze=S(64329),De=S(3087),Be=S(38168),ae=S(18664),ve=S(95519),se=S(80065),w=S(11956),le=S(45863),Y=S(53197),me=(0,q.CH)("noUi-target"),Le=(0,q.CH)("noUi-base"),ye=(0,q.CH)("noUi-value"),oe=(0,q.CH)("noUi-handle"),z=function(){function r(){}return r.createOrUpdateSliders=function(e){var a=e.axesData,i=e.zoomAxes,n=e.zoomData,s=e.zoomExtents,o=e.hasYAxisCategorical,l=e.yFlipped,u=e.maxLabelWidthLeft,c=e.maxLabelWidthRight,h=e.resetEventHandlers,g=e.hideSliders,y=e.visualHostServices,D=e.invertedState;e.containers.each(function(x){var O,I,A=r.getAxisType(x,l),M=!1;if("y2"===A?(O=i.valueSecAxis,I=s.valueSecExtent):"y1"===A&&o||"x"===A&&!o?(O=i.categoryAxis,I=s.categoryExtent):(O=i.valueAxis,I=s.valueExtent),O){var W=r.getAxisData(A,a),J=O.scale.domain(),ue=O.d3Axis.tickValues(),xe=W.logAxisScale&&(0,w.isLogScaleAllowedFunc)(J),ie=g?"none":r.getScaleType(J,xe);"none"!==ie&&xe&&(I=r.calcLogSliderValues(I),J=r.calcLogSliderValues(J),ue=r.calcLogSliderValues(ue));var re=r.getFormatFn(O,ie),he=d3.select(this),Ee=he.select(me.selector);r.wasInverted(A,a,D)&&(Ee.node()&&Ee.node().noUiSlider.destroy(),M=!0),Ee.node()&&!M?r.updateSlider({slider:Ee,axisType:A,axisData:W,zoomData:n,hasYAxisCategorical:o,extent:I,scaleDomain:J,labelValues:ue,maxLabelWidth:"left"===x?u:c,scaleType:ie,formatFn:re,resetEventHandlers:h,visualHostServices:y}):r.createSlider({container:he,axisType:A,axisData:W,zoomData:n,hasYAxisCategorical:o,extent:I,scaleDomain:J,labelValues:ue,maxLabelWidth:"left"===x?u:c,scaleType:ie,formatFn:re,visualHostServices:y})}})},r.createSlider=function(e){var a=e.axisType,i=e.axisData,n=e.zoomData,s=e.hasYAxisCategorical,o=e.extent,l=e.scaleDomain,u=e.labelValues,c=e.maxLabelWidth,h=e.scaleType,g=e.formatFn,y=e.visualHostServices;if("none"!==h){var D=e.container.append("div").attr("rtl","rtl"===document.dir);(0,le.create)(D.node(),{start:o,range:{min:l[0],max:l[1]},margin:.001*(l[1]-l[0]),connect:!0,behaviour:"tap-drag",orientation:"x"===a?"horizontal":"vertical",direction:"x"===a?i.invertAxis?"rtl":"ltr":i.invertAxis?"ltr":"rtl",tooltips:!!n.showTooltip&&[{to:g},{to:g}],pips:n.showLabels?{mode:"values",values:u,format:{to:g,from:void 0}}:void 0}),D.select(Le.selector).attr("drag-resize-disabled",!0).on("keydown",function(){return d3.event.stopPropagation()}),this.applyVisualAxisStyles(D,a,i,c);var x=this.getAxisZoomPropertyNames(a,s);D.node().querySelectorAll(oe.selector).forEach(function(A){A.setAttribute("aria-label",e.visualHostServices.getLocalizedString("Visual_ZoomSlider"))}),D.node().noUiSlider.on("slide",_.throttle(function(A,M,O){r.onSlide(x.min,x.max,x.size,O,this.options.range.min,this.options.range.max,h,y)},100)),this.convertSliderToSubSelectable(D,a)}},r.updateSlider=function(e){var t=e.slider,a=e.axisType,i=e.axisData,n=e.zoomData,s=e.hasYAxisCategorical,o=e.extent,l=e.scaleDomain,u=e.labelValues,c=e.maxLabelWidth,h=e.scaleType,g=e.formatFn,y=e.resetEventHandlers,D=e.visualHostServices;if("none"!==h){if(t.node().noUiSlider.updateOptions({start:o,range:{min:l[0],max:l[1]},margin:.001*(l[1]-l[0]),tooltips:!!n.showTooltip&&[{to:g},{to:g}],pips:n.showLabels?{mode:"values",values:u,format:{to:g,from:void 0}}:null},!1),this.applyVisualAxisStyles(t,a,i,c),y){var x=this.getAxisZoomPropertyNames(a,s);t.node().noUiSlider.off("slide"),t.node().noUiSlider.on("slide",_.throttle(function(A,M,O){r.onSlide(x.min,x.max,x.size,O,this.options.range.min,this.options.range.max,h,D)},100))}this.convertSliderToSubSelectable(t,a)}else t.node().noUiSlider.destroy()},r.convertSliderToSubSelectable=function(e,t){var a=this;e.classed(We.cy,!0).attr(We.Ez,this.getAxisZoomSliderSubSelectableRegionAttribute(t)).attr(We.CK,"Visual_ZoomSlider").attr(We.QZ,0);var i=e.node();We.O5.setDataForElement(i,{getRegionOutlines:function(){return a.getSliderOutlines(i,t)}})},r.getSliderOutlines=function(e,t){var a=e.getBoundingClientRect(),i=e.querySelector(oe.selector).getBoundingClientRect().width/2;return[{id:this.getAxisZoomSliderSubSelectableRegionAttribute(t),outline:{x:a.x-i,y:a.y-i,width:i+a.width+i,height:i+a.height+i,type:1}}]},r.getAxisZoomSliderSubSelectableRegionAttribute=function(e){switch(e){case"x":return"x-axis-zoom-slider";case"y1":return"y1-axis-zoom-slider";case"y2":return"y2-axis-zoom-slider";default:P.fF.assertFail("Unsupported axis type")}},r.destroySliders=function(e){var a=e.hasYAxisCategorical,i=e.yFlipped,n=e.visualHostServices;e.containers.each(function(s){var o=r.getAxisType(s,i);r.destroySlider({axisType:o,hasYAxisCategorical:a,visualHostServices:n})})},r.destroySlider=function(e){var i=e.visualHostServices,n=this.getAxisZoomPropertyNames(e.axisType,e.hasYAxisCategorical),s={};s[n.min]=!0,s[n.max]=!0,s[n.size]=!0,i.persistProperties({remove:[{objectName:"zoom",properties:s,selector:void 0}]},!0)},r.onSlide=function(e,t,a,i,n,s,o,l){var u={},c={};i=_.map(i,function(g){return r.calcOriginalValue(g,o)}),n=r.calcOriginalValue(n,o),s=r.calcOriginalValue(s,o);var h=i[1]-i[0];i[0]===n&&i[1]===s?(c[e]=!0,c[t]=!0,c[a]=!0):i[0]===n?(c[e]=!0,u[t]=1,u[a]=h):i[1]===s?(u[e]=1,c[t]=!0,u[a]=h):(u[e]=i[0],u[t]=i[1],c[a]=!0),l.persistProperties({merge:[{objectName:"zoom",properties:u,selector:void 0}],remove:[{objectName:"zoom",properties:c,selector:void 0}]},!0)},r.getAxisType=function(e,t){switch(e){case"bottom":return"x";case"left":return t?"y2":"y1";case"right":return t?"y1":"y2";default:P.fF.assertNever(e)}},r.getFormatFn=function(e,t){var a;if("none"!==t){var i=null!==(a=e.d3Axis.tickFormat())&&void 0!==a?a:w.defaultTickFormat;return function(n){return i(r.calcOriginalValue(n,t),0)}}},r.calcLogSliderValues=function(e){return _.map(e,function(t){return r.log10(Math.abs(t))})},r.calcOriginalValue=function(e,t){switch(t){case"linear":return e;case"log":return Math.pow(10,e);case"rLog":return-Math.pow(10,e);default:P.fF.assertNever(t)}},r.applyVisualAxisStyles=function(e,t,a,i){var n=a.labelFontProperties;e.selectAll(ye.selector).styles((0,ae.wB)(n)),"x"!==t&&e.selectAll(ye.selector).call(Y.oq,i,ne.b.svgEllipsis)},r.getAxisData=function(e,t){return t["y1"===e?"y":e]},r.getScaleType=function(e,t){return P.fF.assert(function(){return e[0]!==e[1]},"Scale domain should not have zero width"),t?(P.fF.assert(function(){return e[0]<0&&e[1]<0||e[0]>0&&e[1]>0},"Log scale domain should not cross or contain 0"),e[0]<0?"rLog":"log"):"linear"},r.log10=function(e){return Math.log(e)/Math.log(10)},r.wasInverted=function(e,t,a){return"x"===e&&a?.x!==t.x.invertAxis||"y1"===e&&a?.y!==t.y.invertAxis||"y2"===e&&a?.y2!==t.y2.invertAxis},r.getAxisZoomPropertyNames=function(e,t){return"y2"===e?{min:De.t.valueSecMin.propertyName,max:De.t.valueSecMax.propertyName,size:De.t.valueSecSize.propertyName}:"y1"===e&&t||"x"===e&&!t?{min:De.t.categoryMin.propertyName,max:De.t.categoryMax.propertyName,size:De.t.categorySize.propertyName}:{min:De.t.valueMin.propertyName,max:De.t.valueMax.propertyName,size:De.t.valueSize.propertyName}},r}(),L=(0,q.CH)("zoom"),B=function(){function r(e,t,a,i){this.hostServices=t,this.isScrollable=a,this.featureSwitches=i,this._zoomData=(0,d.pi)({},r.DefaultOptions),this.axesLabels={},this.zoomContext=d3.select(e.get(0)).append("div").attr("class","axisZoom").style("position","absolute"),this.zoomAxes={categoryAxis:void 0,valueAxis:void 0,valueSecAxis:void 0},this.zoomExtents={categoryExtent:void 0,valueExtent:void 0,valueSecExtent:void 0}}return r.prototype.destroy=function(){this.zoomContext.selectAll(L.selector).remove()},r.prototype.update=function(e){var t,a,i,n=e.dataViews,s=e.hasScalarCategoryAxis;if(this.hasSmallMultiples=e.hasSmallMultiples,this.hasYAxisCategorical=e.hasYAxisCategorical,this._zoomData=this.hasSmallMultiples||!this.isScrollable?(0,d.pi)({},r.DefaultOptions):e.zoomData,s||(this._zoomData.showOnCategoryAxis=!1),this.hasValueAxis=!1,this.hasCategoryAxis=!1,this.hasY2Axis=!1,n){for(var o=0,l=n;o<l.length;o++){var u=l[o];this.hasCategoryAxis||(this.hasCategoryAxis=s&&((0,F.c5)(u,X.x.category)||(0,F.c5)(u,X.x.x))),this.hasValueAxis||(this.hasValueAxis=(0,F.c5)(u,X.x.y)),this.hasY2Axis||(this.hasY2Axis=(0,F.c5)(u,X.x.y2))}(t=this._zoomData).showOnValueAxis&&(t.showOnValueAxis=this.hasValueAxis),(a=this._zoomData).showOnValueSecAxis&&(a.showOnValueSecAxis=this.hasY2Axis),(i=this._zoomData).showOnCategoryAxis&&(i.showOnCategoryAxis=this.hasCategoryAxis)}},r.prototype.render=function(e){var t,i,n,s,a=this,o=(t=e.axesLayout).margin,l=t.shouldRenderAxis,u=e.axesData,c=(0,d.pi)({},this.baseZoomAxesPosition);if(c.bottom){c.bottom.width-=o.left+o.right;var h=u?.showsSeriesLabels()?(0,ve.lr)(u.seriesLabelSettings,c.bottom.width):0;c.bottom.width-=h,c.bottom.left+=o.left+(u.seriesLabelSettings.position===Be.M.left?h:0),!this.hasYAxisCategorical&&this.xOuterPadding&&(c.bottom.left+=this.xOuterPadding,c.bottom.width-=2*this.xOuterPadding)}c.left&&(c.left.top+=o.top,c.left.height-=o.top+o.bottom),c.right&&(c.right.top+=o.top,c.right.height-=o.top+o.bottom);var g=this.axesLabels,y=this.yFlipped,D=null===(i=this.zoomAxes.categoryAxis)||void 0===i?void 0:i.scale.domain(),x=null===(n=this.zoomAxes.valueAxis)||void 0===n?void 0:n.scale.domain(),A=null===(s=this.zoomAxes.valueSecAxis)||void 0===s?void 0:s.scale.domain(),O=!(l.x||l.y||l.y2)||D&&D[0]===D[1]||x&&x[0]===x[1]||A&&A[0]===A[1],I=this.featureSwitches&&this.featureSwitches.onObject,W=this;this.zoomContext.selectAll(L.selector).style("top",function(J){return c[J].top?"".concat(c[J].top,"px"):null}).style("left",function(J){return c[J].left?"".concat(c[J].left,"px"):null}).style("width",function(J){return"".concat(c[J].width,"px")}).style("height",function(J){return"".concat(c[J].height,"px")}).call(function(J){return z.createOrUpdateSliders({containers:J,axesData:u,zoomAxes:a.zoomAxes,zoomData:a.zoomData,zoomExtents:a.zoomExtents,hasYAxisCategorical:a.hasYAxisCategorical,yFlipped:a.yFlipped,maxLabelWidthLeft:a.maxZoomLabelWidthLeft,maxLabelWidthRight:a.maxZoomLabelWidthRight,resetEventHandlers:a.resetEventHandlers,hideSliders:O,visualHostServices:a.hostServices,invertedState:a.invertedState})}).each(function(J){var xe,ue=d3.select(this);switch(J){case"bottom":xe="x";break;case"left":xe=y?"y2":"y";break;case"right":xe=y?"y":"y2";break;default:P.fF.assertFail(J)}var re,ie=u[xe].titleFontProperties,he=[];if(u[xe].showAxisTitle&&!O){var Ee=g[xe];P.fF.assertValue("axisZoom: axisLabel",Ee),!Ee&&e.showTitlePlaceholders&&I&&(Ee=W.hostServices.getLocalizedString("Format_AddAxisTitle"),re=!0),he=[Ee]}ue.selectAll(".title").data(he,function(Ze){return Ze}).join(function(Ze){return Ze.append("span").attr("class","title")}).each(function(Ze){var Yt,Ie=d3.select(this),tt=(0,ae.qk)(ie,Ze),$e=c[J].height,Tt=c[J].width,Xt=ie.size.px;switch(J){case"bottom":Yt=Tt,Ie.style("top","".concat($e-Xt,"px")).style("left","50%").style("width","100%").style("transform","translateX(-50%)");break;case"left":Yt=$e,Ie.style("width","".concat($e,"px")).style("transform","translateX(-".concat($e/2,"px)rotate(-90deg)")).style("top","".concat($e/2-r.SliderHandleRadius,"px"));break;case"right":Yt=$e,Ie.style("width","".concat($e,"px")).style("transform","translateX(-".concat($e/2-8,"px)rotate(-90deg)")).style("top","".concat($e/2-r.SliderHandleRadius,"px")).style("left","".concat(Tt-Xt,"px"));break;default:P.fF.assertNever(J)}if(Ie.styles((0,ae.wB)(ie)).text(ne.b.getTailoredTextOrDefault(tt,Yt)),I){Ie.classed(We.cy,!0).attr(We.CK,"Visual_Axis_Title").attr(We.QZ,1);var wt=void 0;switch(xe){case"x":Ie.attr(We.Ez,"x-axis-title"),wt=(0,se.s4)(u.categoryAxis===u.x?X.p.categoryAxis.titleText:X.p.valueAxis.titleText,g.x);break;case"y":Ie.attr(We.Ez,"y1-axis-title"),wt=(0,se.Mw)(u.categoryAxis===u.y?X.p.categoryAxis.titleText:X.p.valueAxis.titleText,g.y);break;case"y2":Ie.attr(We.Ez,"y2-axis-title"),wt=(0,se.Mw)(X.p.valueAxis.secTitleText,g.y2);break;default:P.fF.assertFail(xe)}re&&Ie.classed(We.Qh.class,!0),wt&&Ie.attr(We.kv,JSON.stringify(wt))}})}),this.invertedState={x:u.x.invertAxis,y:u.y.invertAxis,y2:u.y2.invertAxis}},r.prototype.renderContainers=function(e,t,a,i){var n,s=this;void 0===a&&(a=0),this.resetEventHandlers=void 0!==this.yFlipped&&t.y.switchAxisPosition!==this.yFlipped||void 0!==this.isLogScaleX&&t.x.logAxisScale!==this.isLogScaleX||void 0!==this.isLogScaleY1&&t.y.logAxisScale!==this.isLogScaleY1||void 0!==this.isLogScaleY2&&t.y2.logAxisScale!==this.isLogScaleY2,this.yFlipped=t.y.switchAxisPosition,this.isLogScaleX=t.x.logAxisScale,this.isLogScaleY1=t.y.logAxisScale,this.isLogScaleY2=t.y2.logAxisScale;var o={top:0,left:0,right:0,bottom:0},l=[];if(this.zoomData.show){var c=(n=this.zoomData).show,h=n.showOnCategoryAxis,g=n.showOnValueAxis,D=n.showLabels;if(c){var A=g&&!this.hasYAxisCategorical||h&&this.hasYAxisCategorical,M=n.showOnValueSecAxis;(h&&!this.hasYAxisCategorical||g&&this.hasYAxisCategorical)&&(o.bottom+=16,D&&(o.bottom+=t.x.labelFontProperties.size.px+r.StaticPadding),t.x.showAxisTitle&&(o.bottom+=t.x.titleFontProperties.size.px+r.StaticPadding),l.push("bottom")),(A&&!this.yFlipped||M&&this.yFlipped)&&(this.maxZoomLabelWidthLeft=this.getMaxYLabelWidth("left",this.yFlipped,t),o.left+=(D?16+this.maxZoomLabelWidthLeft+r.StaticPadding:16)+8,t.y.showAxisTitle&&!this.yFlipped?o.left+=t.y.titleFontProperties.size.px+r.StaticPadding:t.y2.showAxisTitle&&this.yFlipped&&(o.left+=t.y2.titleFontProperties.size.px+r.StaticPadding),l.push("left")),(M&&!this.yFlipped||A&&this.yFlipped)&&(this.maxZoomLabelWidthRight=this.getMaxYLabelWidth("right",this.yFlipped,t),o.right+=(D?16+this.maxZoomLabelWidthRight+r.StaticPadding:16)+8,t.y2.showAxisTitle&&!this.yFlipped?o.right+=t.y2.titleFontProperties.size.px+r.StaticPadding:t.y.showAxisTitle&&this.yFlipped&&(o.right+=t.y.titleFontProperties.size.px+r.StaticPadding),l.push("right"))}}this.baseZoomAxesPosition=this.calculateZoomAxesPositions(l,e,o,a);var I=this.zoomContext.selectAll(".zoom").data(l,function(ue){return ue});I.enter().append("div").attr("class",function(ue){return"zoom zoom-".concat(ue)}).attr("tabindex",0).attr("focus-nav-mode","Hierarchy").attr("role","group").attr("aria-label",this.hostServices.getLocalizedString("Slicer_Slider")).style("position","absolute");var W=I.exit();return this.resetEventHandlers||W.call(function(ue){return z.destroySliders({containers:ue,hasYAxisCategorical:s.hasYAxisCategorical,yFlipped:s.yFlipped,visualHostServices:s.hostServices})}),W.remove(),_.some(o,function(ue){return 0!==ue})?o:void 0},r.prototype.updateShowAxisTitles=function(e){var t,a=(t=this.zoomData).show,i=t.showOnCategoryAxis,n=t.showOnValueAxis;return a?{x:e.x&&!(this.hasYAxisCategorical?n:i),y:e.y&&!(this.hasYAxisCategorical?i:n),y2:e.y2&&!t.showOnValueSecAxis}:e},r.prototype.updateAxisTitles=function(e){this.zoomData.show&&(this.axesLabels=(0,d.pi)((0,d.pi)({},this.axesLabels),e))},r.prototype.getCategoryZoomFactor=function(){var e,t=null===(e=this.zoomAxes.categoryAxis)||void 0===e?void 0:e.scale.domain(),a=this.zoomExtents.categoryExtent;if(_.isEmpty(t)||_.isEmpty(a))return 1;var i=Math.abs(t[1]-t[0]),n=Math.abs(a[1]-a[0]);return 0===n?1:Math.max(1,i/n)},r.prototype.updateAxisOptions=function(e,t){var a,i,n;if(t.isScalar&&this.zoomData.show){var s=function(c,h){if(t.domainOptions){var g=t.domainOptions.domain,y=e.scale.domain();c=[Math.max(c[0],Math.min(g[0],y[0])),Math.min(c[1],Math.max(g[1],y[1]))]}c[0]=Math.min(c[0],c[1]),t.domainOptions=(0,w.createScalarDomainOptions)(c),t.preventNice||(t.preventNice=h),t.includeZero&&(t.includeZero=!h)};if(t.isCategoryAxis){if(this.zoomData.showOnCategoryAxis){this.zoomAxes.categoryAxis=e;var o=(a=r.getAxisRange(e,this.zoomData.categoryMin,this.zoomData.categoryMax,this.zoomData.categorySize)).domain,l=a.force;this.zoomExtents.categoryExtent=o,s(o,l),this.hasYAxisCategorical||(this.xOuterPadding=e.outerPadding)}}else t.isSecValueAxis?this.zoomData.showOnValueSecAxis&&(this.zoomAxes.valueSecAxis=e,o=(i=r.getAxisRange(e,this.zoomData.valueSecMin,this.zoomData.valueSecMax,this.zoomData.valueSecSize)).domain,l=i.force,this.zoomExtents.valueSecExtent=o,s(o,l)):this.zoomData.showOnValueAxis&&(this.zoomAxes.valueAxis=e,o=(n=r.getAxisRange(e,this.zoomData.valueMin,this.zoomData.valueMax,this.zoomData.valueSize)).domain,l=n.force,this.zoomExtents.valueExtent=o,s(o,l))}},r.prototype.skipMergingValueAxisDomains=function(){return this.zoomData.show&&(this.zoomData.showOnValueAxis||this.zoomData.showOnValueSecAxis)},r.getAxisRange=function(e,t,a,i){var n=e.scale.domain(),s=[void 0,void 0];return null!=i?(P.fF.assert(function(){return t!==a},"axisZoom: only one of min/max should be set if size is set"),null!=a?(P.fF.assert(function(){return null==t},"axisZoom: if size and max is set, min should not (zooming linked to min extent)"),s=[n[0],Math.min(n[0]+i,n[1])]):(P.fF.assert(function(){return null==a},"axisZoom: if size and min is set, max should not (zooming linked to max extent)"),s=[Math.max(n[1]-i,n[0]),n[1]])):(s[0]=null!=t&&t>=n[0]&&t<n[1]?t:n[0],s[1]=null!=a&&a>n[0]&&a<=n[1]?a:n[1]),{domain:s,force:!(null==i&&null==a&&null==t||s[0]===n[0]&&s[1]===n[1])}},Object.defineProperty(r.prototype,"zoomData",{get:function(){return this._zoomData},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"context",{get:function(){return this.zoomContext},enumerable:!1,configurable:!0}),r.converter=function(e){var t,a=null===(t=e?.metadata)||void 0===t?void 0:t.objects;return{show:(0,C.NA)(a,De.t.show,r.DefaultOptions.show),showOnValueAxis:(0,C.NA)(a,De.t.showOnValueAxis,r.DefaultOptions.showOnValueAxis),valueMin:this.clampValue((0,C.NA)(a,De.t.valueMin,null)),valueMax:this.clampValue((0,C.NA)(a,De.t.valueMax,null)),valueSize:this.clampValue((0,C.NA)(a,De.t.valueSize,null)),showOnCategoryAxis:(0,C.NA)(a,De.t.showOnCategoryAxis,r.DefaultOptions.showOnCategoryAxis),categoryMin:this.clampValue((0,C.NA)(a,De.t.categoryMin,null)),categoryMax:this.clampValue((0,C.NA)(a,De.t.categoryMax,null)),categorySize:this.clampValue((0,C.NA)(a,De.t.categorySize,null)),showOnValueSecAxis:(0,C.NA)(a,De.t.showOnValueSecAxis,r.DefaultOptions.showOnValueSecAxis),valueSecMin:this.clampValue((0,C.NA)(a,De.t.valueSecMin,null)),valueSecMax:this.clampValue((0,C.NA)(a,De.t.valueSecMax,null)),valueSecSize:this.clampValue((0,C.NA)(a,De.t.valueSecSize,null)),showLabels:(0,C.NA)(a,De.t.showLabels,r.DefaultOptions.showLabels),showTooltip:(0,C.NA)(a,De.t.showTooltip,r.DefaultOptions.showTooltip)}},r.clampValue=function(e){return isNaN(e)||"number"!=typeof e?null:e},r.prototype.getZoomCard=function(e){var t=this;if(!this.hasSmallMultiples&&e){var i=this.zoomData;return new Se.CQ(new Se.lg("zoom"),"Visual_ZoomSlider",[De.t.show,De.t.showOnCategoryAxis,De.t.showOnValueAxis,De.t.showOnValueSecAxis,De.t.showLabels,De.t.showTooltip],function(s){return t.hostServices.getLocalizedString(s)}).addTopLevelToggle("show",function(){return new Se.bd({descriptor:De.t.show,value:i.show}).build()}).addGroup(void 0,function(n){t.hasCategoryAxis&&n.addSimpleSlice("categoryAxis",new Se.bd({descriptor:De.t.showOnCategoryAxis,value:i.showOnCategoryAxis}).build(),function(s){return s.withCustomDisplayName(t.hasYAxisCategorical?"Visual_YAxis_Hyphen":"Visual_XAxis_Hyphen")}),t.hasValueAxis&&n.addSimpleSlice("valueAxis",new Se.bd({descriptor:De.t.showOnValueAxis,value:i.showOnValueAxis}).build(),function(s){return s.withCustomDisplayName(t.hasYAxisCategorical?"Visual_XAxis_Hyphen":"Visual_YAxis_Hyphen")}),t.hasY2Axis&&n.addSimpleSlice("valueSecAxis",new Se.bd({descriptor:De.t.showOnValueSecAxis,value:i.showOnValueSecAxis}).build(),function(s){return s.withCustomDisplayName("Visual_Y2Axis_Hyphen")}),n.addSimpleSlice("labels",new Se.bd({descriptor:De.t.showLabels,value:i.showLabels}).build()).addSimpleSlice("tooltips",new Se.bd({descriptor:De.t.showTooltip,value:i.showTooltip}).build())}).build()}},r.prototype.calculateZoomAxesPositions=function(e,t,a,i){void 0===i&&(i=0);for(var n={},s=t.height-a.bottom-i,o=t.width-a.right,l={height:s-a.top,width:o-a.left},u=r.SliderHandleRadius,c=0,h=e;c<h.length;c++){var g=h[c];switch(g){case"bottom":n.bottom={top:s,left:a.left-u,width:l.width+2*u,height:a.bottom};break;case"left":n.left={top:-u,left:null,width:a.left,height:l.height+2*u};break;case"right":n.right={top:-u,left:o,width:a.right,height:l.height+2*u};break;default:P.fF.assertNever(g)}}return n},r.prototype.getMaxYLabelWidth=function(e,t,a){if(!a)return 50;var i=this.getAxisType(e,t),s=a["y1"===i?"y":i].labelFontProperties,o={text:"1234567",fontFamily:s.family,fontSize:ze.FP.toString(s.size.px),fontWeight:s.weight,fontStyle:s.style,fontVariant:s.variant,whiteSpace:s.whiteSpace};return ne.b.measureSvgTextWidth(o)},r.prototype.getAxisType=function(e,t){var a;switch(e){case"bottom":a="x";break;case"left":a=t?"y2":"y1";break;case"right":a=t?"y1":"y2";break;default:P.fF.assertNever(e)}return a},r.DefaultOptions={show:!1,showOnValueAxis:!0,showOnValueSecAxis:!1,showOnCategoryAxis:!0,showLabels:!1,showTooltip:!1},r.StaticPadding=5,r.SliderHandleRadius=8,r}(),T=S(76045),b=S(56707),N=S(32105),p=S(41414),k=S(47316),G=S(41640),ee=S(78843),U=S(26543),Z=S(26743),Pe=S(54522),je=S(39407),f=S(34969),v=S(82173),H=S(51490),K=S(21181),Re=S(48708);function Ve(r,e,t){return it(function(a){return!a.supportsStaticReferenceLines||a.supportsStaticReferenceLines()},r,e,t)}function Ne(r,e,t){return it(function(a){return a.supportsTrendLine&&a.supportsTrendLine()},r,e,t)}function Qe(r,e,t){return!it(function(a){return!a.getCartesianVisualCapabilities().isValueAxisIrregular},r,e,t)}function it(r,e,t,a){var i=dt(e);return!_.isEmpty(t)&&_.every(null==a?t:[t[a]],function(s,o){return!i[o]||r(s)})}function dt(r){return _.isEmpty(r)?[]:_.filter(r,function(e){return!(0,rt.Qp)(e)&&!(0,v.Aq)(e)&&!(0,H.Ik)(e)})}function Rt(r,e,t){return r&&(0,f.PC)(e)?function(r){if(r.length>1){var e=r[0].getSeriesLabelsSettings(),t=r[1].getSeriesLabelsSettings();return e.maxWidthPercentage>t.maxWidthPercentage?e:t}return r[0].getSeriesLabelsSettings()}(r):mt(t)}function mt(r){var e=Ge.v.getThemeColor(r||(0,Re.Ue)(),b.uQ);return{show:!1,seriesColor:e,position:Be.M.right,fontProperties:(0,K.bT)({style:r,labelColor:e,textClassName:"smallLightLabel"}).fontProperties,wordWrap:!1,maxWidthPercentage:20,defaultSeriesWidth:20,showLabelPerSeries:!1,enableBackground:!1,bold:!1,italic:!1,underline:!1}}function Vt(r,e){if(r)return{categoryIndex:r.categoryIndex,categoryValue:r.categoryValue,hierarchyCategoryLevels:e,hasData:null!=r.value}}function ra(r,e){return r.map(function(t){return(0,Ke.BJ)(e.categoryData[t.categoryIndex].hierarchyCategoryLevels)})}var $t=function(){function r(e,t,a){this.scrollbarWidth=t,this.isScrollable=e,this.trimOrdinalDataOnOverflow=a}return r.prototype.init=function(e){this.axesData=e.axesData,this.axisZoom=e.axisZoom,this.interactivityService=e.interactivityService},r.prototype.shouldShowY1OnRight=function(){return!0===this.axesData.y.switchAxisPosition},Object.defineProperty(r.prototype,"isYAxisCategorical",{get:function(){return(0,f.Au)(this.axesData.chartType)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"categoryAxis",{get:function(){return this.getAxis(this.isYAxisCategorical?1:0)},enumerable:!1,configurable:!0}),r.prototype.hasCategoryAxis=function(){return null!=this.categoryAxis},r.prototype.isCategoryAxisDateTime=function(){var e,t,a;return null!==(a=null===(t=null===(e=this.categoryAxis)||void 0===e?void 0:e.valueType)||void 0===t?void 0:t.dateTime)&&void 0!==a&&a},r.getLeafHeight=function(e,t,a){var i=t===Y.Or.bottom?e.xMax:t===Y.Or.right?e.yRight:e.yLeft,n=e.stackHeight;return P.fF.assertValue(i,"getLeafHeight: availableSpace"),P.fF.assertValue(n,"getLeafHeight: stackHeight"),P.fF.assertValue(a,"getLeafHeight: numStacks"),i-n*(a-1)+w.StackedAxisPadding+1},r.prototype.getYAxisPosition=function(e){return P.fF.assert(function(){return 0!==e},"cannot ask y-axis specific position for x-axis"),1===e?this.getY1AxisPosition():this.getY2AxisPosition()},r.prototype.getY1AxisPosition=function(){return this.axesData.y.switchAxisPosition?"right":"left"},r.prototype.getY2AxisPosition=function(){return this.axesData.y.switchAxisPosition?"left":"right"},r.prototype.update=function(e,t,a,i){this.categories=e,this.axesData=t,this.updateScrollbarWidthIfNeeded(i),this.isHierarchicalCategoryAxis=3===a},r.prototype.updateResize=function(e,t){this.axesData=e,this.updateScrollbarWidthIfNeeded(t)},r.prototype.addWarnings=function(e){var t=this.layout&&this.layout.axes;if(t&&t.x&&t.x.hasDisallowedZeroInDomain){var a={selector:null,warnings:[new Ue.MX]};e.addForVisualObject(this.isYAxisCategorical?"valueAxis":"categoryAxis",a)}if(t&&(t.y1&&t.y1.hasDisallowedZeroInDomain||t.y2&&t.y2.hasDisallowedZeroInDomain)&&(a={selector:null,warnings:[new Ue.MX]},e.addForVisualObject(this.isYAxisCategorical?"categoryAxis":"valueAxis",a)),this.alignZerosWithCustomDomainWarning){var n={selector:null,warnings:[new Ue.rO]};e.addForVisualObject("valueAxis",n)}},r.prototype.getScrollbarWidth=function(){return this.scrollbarWidth},r.prototype.updateScrollbarWidthIfNeeded=function(e){null!=e&&(this.scrollbarWidth=e)},r.prototype.calculateAxes=function(e,t,a,i,n,s){var o,l,u,c=e.options,h=e.isScalar,g=e.isScrollVisible,y=c.layers,D=c.playAxisControlLayout;P.fF.assertValue(y,"layers");var x=r.shouldRenderAnyAxis(s)||h?f.K8:0,A=this.axesData.categoryAxis.innerPadding,M={x:null,y1:null},O=(o=this.axesData).categoryAxis,I=o.valueAxis,J=_.some(o.y2.includeDomains,function(hi){return w.hasForcedDomain(hi)}),ue=this.axesData.isValueAxisSet&&!1===this.axesData.y2.show&&!J,xe=function(ja){return ja&&w.createScalarDomainOptions([ja.min,ja.max],0)},ie=function(ja,Bi){return{includeDomain:w.mergeScalarAxisDomains.apply(w,(0,d.ev)((0,d.ev)([],ja.includeDomains,!1),[xe(Bi)],!1)),axis:ja}},re=ie(O,c.ensureXDomain),he=ie(I,c.ensureYDomain),Ee={viewport:t,margin:a,categoryAxisOptions:re,forceMerge:ue,trimOrdinalDataOnOverflow:this.trimOrdinalDataOnOverflow,outerPaddingRatio:x,innerPaddingRatio:A,playAxisControlLayout:D,valueAxisOptions:he,axisZoom:this.axisZoom},Ze=this.axesData.isValueAxisSet&&this.axesData.y2.show,Ie=this.axesData.isValueAxisSet&&this.axesData.y.alignZeros,tt=c.skipMergeValueAxes||!ue&&(!0===Ze||J||void 0===Ze&&(Ie||he.includeDomain)),$e=!1;if(oa(y)&&!tt){var Tt=function(r,e){P.fF.assert(function(){return r.length<3},"merging of more than 2 layers is not supported");var t=void 0,a=function(){return{domain:void 0,merged:!1,tickCount:t}};if(r.length<2)return a();var i=(0,Ae.ED)(e);i.roleName="Y2";var n=r[0].calculateAxesProperties(e)[1],s=r[1].calculateAxesProperties(i)[1],o=n.scale.domain(),l=s.scale.domain();if(n.dataDomain&&s.dataDomain){var u=0===n.dataDomain[0]&&0===n.dataDomain[1],c=0===s.dataDomain[0]&&0===s.dataDomain[1];u&&!c?o=[0,0]:!u&&c&&(l=[0,0])}n.values&&n.values.length>0&&s.values&&s.values.length>0&&(t=Math.max(n.values.length,s.values.length));var h=Math.min(o[0],l[0]),g=Math.max(o[1],l[1]);if(e.forceMerge)return{domain:[h,g],merged:!0,tickCount:t};if(o[0]>l[1]||o[1]<l[0])return a();var y=g-h;if(0===y)return a();var D=Math.max(o[0],l[0]),x=Math.min(o[1],l[1]);return Math.abs((x-D)/y)<.1?a():{domain:[h,g],merged:!0,tickCount:t}}(y,Ee);($e=Tt.merged)?he.includeDomain=w.mergeScalarAxisDomains(he.includeDomain,w.createScalarDomainOptions(Tt.domain,0,[!0,!0])):Ee.forcedTickCount=Tt.tickCount}var Xt=oa(y)?!$e&&!1!==Ze||Ze:this.axesData.y2.hasY2Role;Xt=Xt||J,Ie=Ie&&Xt;var Yt=(0,Ae.ED)(Ee);if(Xt){var wt=this.axesData.y2,Kt=Yt.valueAxisOptions=(0,d.pi)((0,d.pi)({},(0,Ae.ED)(he)),{axis:(0,d.pi)((0,d.pi)({},wt),{invertAxis:I.invertAxis}),includeDomain:w.mergeScalarAxisDomains.apply(w,(0,d.ev)((0,d.ev)([],wt.includeDomains,!1),[xe(c.ensureY2Domain)],!1))});if(Ie){var ha=y[0].getAxesDomains(!0,{valueAxis:!0}),ca=w.mergeScalarAxisDomains.apply(w,(0,d.ev)([w.createScalarDomainOptions(ha.valueAxis,0)],I.includeDomains,!1)),Ft=y[1].getAxesDomains(!0,{valueAxis:!0}),ea=w.mergeScalarAxisDomains(w.createScalarDomainOptions(Ft.valueAxis,0),Kt.includeDomain),ga=ca&&ea,Oa=ga&&(w.hasForcedDomain(ca)||w.hasForcedDomain(ea));if(M.alignZerosWithCustomDomainWarning=Oa,ga&&!Oa){var Ha=(l=function(r,e,t){P.fF.assert(function(){return r&&2===r.length},"domain1 length"),P.fF.assert(function(){return e&&2===e.length},"domain2 length"),P.fF.assert(function(){return!0},"bufferMultiplier should be between 0 and 0.15");var a=r.slice(),i=e.slice(),n=r[1]-r[0],s=e[1]-e[0];if(a[0]=a[0]-n*t,a[1]=a[1]+n*t,i[0]=i[0]-s*t,i[1]=i[1]+s*t,r[0]>=0&&e[0]>=0)a[0]=0,i[0]=0;else if(r[1]<=0&&e[1]<=0)a[1]=0,i[1]=0;else{var o=Ra(a),l=Ra(i);if(o.pos<o.neg&&l.pos<l.neg)o.pos<l.pos?a[1]=-l.pos*a[0]/(1-l.pos):i[1]=-o.pos*i[0]/(1-o.pos);else if(o.pos>o.neg&&l.pos>l.neg)o.neg<l.neg?a[0]=-l.neg*a[1]/(1-l.neg):i[0]=-o.neg*i[1]/(1-o.neg);else{var u=Math.max(Math.abs(a[0]),Math.abs(a[1])),c=Math.max(Math.abs(i[0]),Math.abs(i[1]));a=[-u,u],i=[-c,c]}}return[a,i]}(ca.domain,ea.domain,.05),l[0]),xa=l[1];he.includeDomain=w.createScalarDomainOptions(Ha,0,[!0,!0]),Kt.includeDomain=w.createScalarDomainOptions(xa,0,[!0,!0])}else Kt.includeDomain=w.mergeScalarAxisDomains(Kt.includeDomain,ea)}else $e||(Kt.includeDomain=this.axesData.isValueAxisSet&&Kt.includeDomain)}for(var $a=[Ee,Yt],ui=oa(y)||this.axesData.y2.hasY2Role?2:1,Xa=0;Xa<ui;Xa++){var Pa=$a[Xa],qa=null!==(u=y[Xa])&&void 0!==u?u:y[0];!$e&&1===Xa&&(Pa.roleName="Y2"),P.fF.assertValue(Pa,"currentVisualOptions must be set");var ta=qa.calculateAxesProperties(Pa);0===Xa?(M.x=ta[0],M.y1=ta[1]):ta&&!M.y2&&(M.x.isInvalidDomain||_.isEmpty(M.x.dataDomain)?(M.x=ta[0],M.y1=ta[1]):(qa.overrideXAxis(M.x),!$e&&!ta[1].isInvalidDomain&&!_.isEmpty(ta[1].values)&&(M.y2=ta[1])));var Ua=(0,ae.qk)(c.axesFontProperties.x.tickLabels),ei=M.x;if(i&&i.x)ei.willLabelsFit=i.x.willLabelsFit,ei.willLabelsWordBreak=i.x.willLabelsWordBreak;else{var ci=t.width-(a.left+a.right);ei.willLabelsFit=w.willLabelsFit(ei,ci,ne.b.measureSvgTextWidth,Ua),ei.willLabelsWordBreak=!ei.willLabelsFit&&!g&&w.willLabelsWordBreak(M.x,a,ci,ne.b.measureSvgTextWidth,ne.b.estimateSvgTextHeight,ne.b.getTailoredTextOrDefault,Ua)}var Na=M.x.isCategoryAxis;if(this.isHierarchicalCategoryAxis&&(Na?this.axesData.x.show:this.axesData.y.show)){var Ga=Na?M.x:M.y1;Ga.isHierarchical=!0,Ga.rootNode=(0,je.J_)(this.categories),Ga.numHierarchyLevels=this.categories.length,n&&(Ga.hierStack=r.createStackedAxis(this.categories,Ga,n,Na?Y.Or.bottom:this.axesData.y.switchAxisPosition?Y.Or.right:Y.Or.left))}}return this.finalizeAxisLabels(M,c.showAxisTitles),M},r.createStackedAxis=function(e,t,a,i){if(P.fF.assertValue(t,"axis"),!_.isEmpty(e)){for(var n=e.length,s=a.stackHeight,o=r.getLeafHeight(a,i,n),l=[],u=w.getCategoryThickness(t.scale),c=[],h=function(D){var x=D===n-1,A=n-D-1,M=e[D];x||(P.fF.assertValue(M.source.identityExprs,"levelCategory.source.identityExprs"),c.push.apply(c,M.source.identityExprs||[]));for(var O=[],I=[],W=[],J=[],ue=[],xe=0,ie=void 0,re=M.values.length,he=function($e){var Tt=x?M.identity[$e]:r.getSpecificIdentityFromCompositeIdentity(M,$e,c),Yt=(0,Pe.xq)(M.values[$e],M.source,X.p.general.formatString);if(!x&&ie&&(0,ee.fS)(ie,Tt))O[$e]=Y.Pt,xe++;else{if(xe>0&&!x){var wt=$e-xe;J[wt]=r.getMaxCategoryWidth(xe,u),ue[wt]=r.getHierarchyLineStyleInfo({levelIndex:A,stackHeight:s,leafHeight:o,categorySpanCount:xe,categoryWidth:u,orientation:i})}xe=1,O[$e]=Yt,I[$e]=function(){return U.dw.builder().withCategoryIdentity(M,$e,Tt).createSelectionId()},W[$e]={categoryIndex:$e,seriesIndex:D}}ie=Tt},Ee=0;Ee<re;Ee++)he(Ee);if(xe>0&&!x){var Ze=re-xe;J[Ze]=r.getMaxCategoryWidth(xe,u),ue[Ze]=r.getHierarchyLineStyleInfo({levelIndex:A,stackHeight:s,leafHeight:o,categorySpanCount:xe,categoryWidth:u,orientation:i})}var Ie=(0,Ae.ED)(t);Ie.isStacked=!0,Ie.adjustedValues=O,t.categoryIdentities&&(Ie.categoryIdentities=I,Ie.categoryHierarchyPointers=W,P.fF.assert(function(){return I.length===W.length},"keep identities and pointers in sync")),Ie.d3Axis=w.createStackedD3Axis({d3axis:Ie.d3Axis,scale:Ie.scale,tickFormat:function($e){return O[$e]!==Y.Pt?O[$e]:null}}),Ie.categoryThickness=u,Ie.levelIndex=A,Ie.lineStyleInfo=ue,Ie.values=O,Ie.categoryLabelMaxWidths=J,x||(Ie.willLabelsFit=!0,Ie.willLabelsWordBreak=!1),l.unshift(Ie)},g=0;g<n;g++)h(g);return l}},r.shouldRenderAnyAxis=function(e){return e&&(e.x||e.y)},r.getSpecificIdentityFromCompositeIdentity=function(e,t,a){var i=e.identity;P.fF.assertNonEmpty(i,"columnIdentities");var n=i[t];P.fF.assertValue(n,"identity");var s=(0,Z.J2)(n.expr,a);return(0,ee.TZ)(s)},r.getCategorySpanSize=function(e,t){return e*t},r.getMaxCategoryWidth=function(e,t){return P.fF.assertValue(e,"categorySpanCount"),P.fF.assertAnyValue(t,"categoryWidth"),r.getCategorySpanSize(e,t)-2*f.Fv},r.getHierarchyLineStyleInfo=function(e){return P.fF.assertValue(e,"options"),P.fF.assertValue(e.levelIndex,"levelIndex"),P.fF.assertValue(e.stackHeight,"stackHeight"),P.fF.assertValue(e.leafHeight,"leafHeight"),P.fF.assertValue(e.categorySpanCount,"categorySpanCount"),P.fF.assertValue(e.categoryWidth,"categoryWidth"),e.orientation===Y.Or.bottom?r.createXHierarchyLineStyleInfo(e):r.createYHierarchyLineStyleInfo(e)},r.createXHierarchyLineStyleInfo=function(e){var t=e.levelIndex,a=e.stackHeight,i=e.leafHeight;if(0!==t){var o=r.getCategorySpanSize(e.categorySpanCount,e.categoryWidth);return(0,d.ev)([{x1:-o/2,y1:a,x2:-o/2,y2:1===t?-i:0},{x1:o/2,y1:a,x2:o/2,y2:1===t?-i:0}],t>1?[{x1:-o/2,y1:0,x2:o/2,y2:0}]:[],!0)}},r.createYHierarchyLineStyleInfo=function(e){var t=e.levelIndex,a=e.stackHeight,i=e.leafHeight;if(0!==t){var o=r.getCategorySpanSize(e.categorySpanCount,e.categoryWidth);return(0,d.ev)([{x1:-a,x2:1===t?i:0,y1:-o/2,y2:-o/2},{x1:-a,x2:1===t?i:0,y1:o/2,y2:o/2}],t>1?[{x1:0,x2:0,y1:-o/2,y2:o/2}]:[],!0).map(function(l){return e.orientation===Y.Or.right&&(l.x1=-l.x1-a,l.x2=-l.x2-a),l})}},r.prototype.negotiateAxes=function(e){var t,a,i,W,n=e.layers,s=e.padding,o=e.showAxisTitles,l=(0,Ae.ED)(r.MinimumMargin),u={left:0,top:0,bottom:0,right:0},c={left:0,top:0,bottom:0,right:0},h=this.axesData,g=(null===(t=h?.categoryAxis)||void 0===t?void 0:t.maxMarginFactor)||r.DefaultMaxMarginFactor,y=(0,Ae.ED)(e.parentViewport),D=y.width*g,A={left:D,right:D,top:0,bottom:Math.max(r.MinimumMargin.bottom,Math.ceil(y.height*g))},M=null===(i=null===(a=n?.[0])||void 0===a?void 0:a.getVisualCategoryAxisIsScalar)||void 0===i?void 0:i.call(a),O=this.calculateAxesRenderOptions({options:e,viewport:y,axesMargins:l,scrollHandleMargins:u,axesOverflow:c,isScalar:M,marginLimits:A,isScrollVisible:!1}),I=this.getAxesMarginFactors(O.axes);l=(O=this.calculateAxesRenderOptions({options:e,viewport:y,axesMargins:l,scrollHandleMargins:u,axesOverflow:c,isScalar:M,marginLimits:A,isScrollVisible:!1,axesRenderOptions:O})).axesMargins,e.rotateXTickLabels90=e.rotateXTickLabels90||!this.willAllCategoriesFitInPlotArea(O.plotArea,O.preferredPlotArea),this.shouldRecalculateRenderOptions(I,O.axes,e.rotateXTickLabels90)&&(l=(O=this.calculateAxesRenderOptions({options:e,viewport:y,axesMargins:l,axesOverflow:c,scrollHandleMargins:u,isScalar:M,marginLimits:A,isScrollVisible:e.rotateXTickLabels90,skipWordBreakUpdate:!0,axesRenderOptions:O})).axesMargins,!this.willAllCategoriesFitInPlotArea(O.plotArea,O.preferredPlotArea)&&(W=this.updateScrollMargins(O.axes,y,u),l=(O=this.calculateAxesRenderOptions({options:e,viewport:y,axesMargins:l,scrollHandleMargins:u,axesOverflow:c,isScalar:M,marginLimits:A,isScrollVisible:!0,skipWordBreakUpdate:!0,axesRenderOptions:O,skipTickMarginsUpdate:!0,isXScrollBarVisible:W.isXVisible,isYScrollBarVisible:W.isYVisible})).axesMargins));var ue=O.axes;return this.layout={axes:ue,axisLabels:{x:o.x&&ue.x?ue.x.axisLabel:null,y:o.y&&ue.y1?ue.y1.axisLabel:null,y2:o.y2&&ue.y2?ue.y2.axisLabel:null},margin:l,marginLimits:A,viewport:y,plotArea:O.plotArea,preferredPlotArea:O.preferredPlotArea,tickLabelMargins:O.tickLabelMargins,tickPadding:s,titleMargins:O.titleMargins,rotateXTickLabels90:e.rotateXTickLabels90,shouldRenderAxis:O.shouldRenderAxis,isXScrollBarVisible:W&&W.isXVisible,isYScrollBarVisible:W&&W.isYVisible,scrollHandleMargins:u},this.alignZerosWithCustomDomainWarning=ue.alignZerosWithCustomDomainWarning,this.layout},r.prototype.updateScrollMargins=function(e,t,a){var i,n,s=!1,o=!1;return e.x.isCategoryAxis&&(s=!0,t.height-=this.scrollbarWidth,a.bottom=this.scrollbarWidth),e.y1.isCategoryAxis&&(o=!0,t.width-=this.scrollbarWidth,(null===(n=null===(i=this.axesData)||void 0===i?void 0:i.y)||void 0===n?void 0:n.switchAxisPosition)?a.right=this.scrollbarWidth:a.left=this.scrollbarWidth),{isXVisible:s,isYVisible:o}},r.prototype.shouldRecalculateRenderOptions=function(e,t,a){var i=this.getAxesMarginFactors(t);return!!(t.y1&&i.tickCountY1!==e.tickCountY1||t.y2&&i.tickCountY2!==e.tickCountY2||t.x&&i.willFitX!==e.willFitX||t.x&&i.willBreakX!==e.willBreakX||t.x&&i.xLabelMaxWidth!==e.xLabelMaxWidth||a||this.isHierarchicalCategoryAxis||t.x&&i.categoryThickness!==e.categoryThickness)},r.prototype.getAxesMarginFactors=function(e){return{tickCountY1:e.y1&&e.y1.values.length,tickCountY2:e.y2&&e.y2.values.length,willFitX:e.x&&e.x.willLabelsFit,willBreakX:e.x&&e.x.willLabelsWordBreak,xLabelMaxWidth:e.x&&e.x.xLabelMaxWidth,categoryThickness:e.x&&e.x.categoryThickness}},r.prototype.calculateAxesRenderOptions=function(e){var t,a,i,n,s,O,o=e.options,l=e.viewport,u=e.scrollHandleMargins,c=e.isScalar,h=e.marginLimits,g=e.axesRenderOptions,y=e.skipTickMarginsUpdate,D=e.axesMargins,x=e.axesOverflow,A=null!==(a=g?.shouldRenderAxis)&&void 0!==a?a:o.shouldRenderAxis,M=g?.axes,I={top:0,bottom:0,left:0,right:0};if(g){var W=this.shouldShowY1OnRight();O=y?g.tickLabelMargins:w.getTickLabelMargins({plotArea:g.plotArea,yMarginLimit:h.left,textWidthMeasurer:ne.b.measureSvgTextWidth,textHeightMeasurer:ne.b.estimateSvgTextHeight,axes:g.axes,bottomMarginLimit:h.bottom,axesFontProperties:o.axesFontProperties,rotate90:o.rotateXTickLabels90,showY1OnRight:W,shouldRenderAxis:g.shouldRenderAxis}),D=(t=this.updateAxisMargins(e,O,W)).axesMargins,I=t.titleMargins,x=O.axesOverflow}var J=o.calculatePlotArea({viewport:l,axesMargins:D,axesOverflow:x,titleMargins:I,shouldRenderAxis:A,axes:M,scrollHandleMargins:u,seriesLabelSettings:Rt(o.layers,this.axesData.chartType),showSeriesLabels:this.axesData.showsSeriesLabels()});return M=this.calculateAxes(e,this.calculateLayerViewport(J,D),D,e.skipWordBreakUpdate?M:null,O,A),{plotArea:J,preferredPlotArea:this.getPreferredPlotArea(M,o.layers,c),axes:M,axesMargins:D,titleMargins:I,shouldRenderAxis:{x:A.x&&!_.isEmpty(null===(i=M.x)||void 0===i?void 0:i.values),y:A.y&&!_.isEmpty(null===(n=M.y1)||void 0===n?void 0:n.values),y2:A.y2&&!_.isEmpty(null===(s=M.y2)||void 0===s?void 0:s.values)},tickLabelMargins:O}},r.prototype.getPreferredPlotArea=function(e,t,a){if(!a&&this.isScrollable&&!_.isEmpty(t)&&t[0].getPreferredPlotArea){var i=e.x.isCategoryAxis?e.x:e.y1;return t[0].getPreferredPlotArea({isScalar:a,categoryCount:i.dataDomain.length,categoryThickness:i.categoryThickness,outerPaddingRatio:i.outerPaddingRatio})}},r.prototype.calculateLayerViewport=function(e,t){return{width:e.width+t.left+t.right,height:e.height+t.top+t.bottom,scale:e.scale}},r.prototype.willAllCategoriesFitInPlotArea=function(e,t){return!(!this.isYAxisCategorical&&t&&(0,G.aP)(t.width,e.width)||this.isYAxisCategorical&&t&&(0,G.aP)(t.height,e.height))},r.prototype.updateAxisMargins=function(e,t,a){var i,n,s,o=e.isScalar,l=(i=e.axesRenderOptions).axes,u=i.shouldRenderAxis,c=(n=e.options).padding,h=n.showAxisTitles,g=n.axesFontProperties,y=n.forceMarginMin,D=n.interactivityRightMargin,x={top:0,bottom:0,left:0,right:0},A=a?t.yRight:t.yLeft,M=a?t.yLeft:t.yRight,O=t.xMax;if(u.y&&(A+=a?c.right:c.left),u.y2&&(M+=a?c.left:c.right),u.x&&(O+=c.bottom),null!=l.x.axisLabel&&h.x){var I=ne.b.estimateSvgTextHeight((0,ae.qk)(g.x.title));x.bottom=I+r.XAxisLabelPadding+r.XAxisPaddingDeltaForTitle,O+=x.bottom}if(null!=l.y1.axisLabel&&h.y){var W=(I=ne.b.estimateSvgTextHeight((0,ae.qk)(g.y.title)))+r.YAxisLabelPadding;a?x.right=W:x.left=W,A+=W}if(null!=(null===(s=l.y2)||void 0===s?void 0:s.axisLabel)&&h.y2){var J=(I=ne.b.estimateSvgTextHeight((0,ae.qk)(g.y2.title)))+r.YAxisLabelPadding;a?x.left=J:x.right=J,M+=J}var ue=(a?A:M)+(o?0:D);ue=e.isYScrollBarVisible?Math.max(ue,r.MinimumAxisMarginFromScrollbar):ue;var xe=O;xe=e.isXScrollBarVisible?Math.max(xe,r.MinimumAxisMarginFromScrollbar):xe,t.axesOverflow.top=Math.max(t.yTop,r.MinimumMargin.top);var ie={top:t.axesOverflow.top,left:a?M:A,right:ue,bottom:xe};return y&&(ie={top:Math.max(ie.top,y.top),bottom:Math.max(ie.bottom,y.bottom),left:Math.max(ie.left,y.left),right:Math.max(ie.right,y.right)}),{axesMargins:ie,titleMargins:x}},r.prototype.getAxis=function(e){var t,a,i,n,s,o;switch(e){case 0:return null===(a=null===(t=this.layout)||void 0===t?void 0:t.axes)||void 0===a?void 0:a.x;case 1:return null===(n=null===(i=this.layout)||void 0===i?void 0:i.axes)||void 0===n?void 0:n.y1;case 2:return null===(o=null===(s=this.layout)||void 0===s?void 0:s.axes)||void 0===o?void 0:o.y2;default:P.fF.assertNever(e)}},r.prototype.isLogScaleAllowed=function(e){var t,a;return null!==(a=null===(t=this.getAxis(e))||void 0===t?void 0:t.isLogScaleAllowed)&&void 0!==a&&a},r.prototype.axesHaveTicks=function(e){if(!this.layout)return!1;var t=this.layout.margin,i=e.height-(t.top+t.bottom);return!(0===w.getRecommendedNumberOfTicksForXAxis(e.width-(t.left+t.right))&&0===w.getRecommendedNumberOfTicksForYAxis(i))},r.prototype.finalizeAxisLabels=function(e,t){var a,i,n,s;if(this.axesData.x.showAxisTitle||this.axesData.y.showAxisTitle||this.axesData.y2.showAxisTitle){var o={x:e.x?null!==(a=this.axesData.x.titleText)&&void 0!==a?a:e.x.axisLabel:void 0,y:e.y1?null!==(i=this.axesData.y.titleText)&&void 0!==i?i:e.y1.axisLabel:void 0,y2:e.y2?null!==(n=this.axesData.y2.titleText)&&void 0!==n?n:e.y2.axisLabel:void 0},l=r.getUnitType(e.x.formatter);e.x.isCategoryAxis?this.categoryAxisHasUnitType=null!=l:this.valueAxisHasUnitType=null!=l,o.x&&l&&(o.x=(0,p.O1)(this.axesData.x.axisStyle,o.x,l));var u=r.getUnitType(e.y1.formatter);if(e.y1.isCategoryAxis?this.categoryAxisHasUnitType=null!=u:this.valueAxisHasUnitType=null!=u,o.y&&u&&(o.y=(0,p.O1)(this.axesData.y.axisStyle,o.y,u)),e.y2){var c=r.getUnitType(e.y2.formatter);this.secondaryValueAxisHasUnitType=null!=c,o.y2&&c&&(o.y2=(0,p.O1)(this.axesData.y2.axisStyle,o.y2,c))}null===(s=this.axisZoom)||void 0===s||s.updateAxisTitles(o),e.x&&(e.x.axisLabel=t.x?o.x:null),e.y1&&(e.y1.axisLabel=t.y?o.y:null),e.y2&&(e.y2.axisLabel=t.y2?o.y2:null)}},r.getUnitType=function(e){var t;if((null===(t=e?.displayUnit)||void 0===t?void 0:t.value)>1)return e.displayUnit.title},r.YAxisLabelPadding=5,r.XAxisLabelPadding=3,r.XAxisPaddingDeltaForTitle=-6,r.DefaultMaxMarginFactor=.25,r.MinimumMargin={left:1,right:1,top:8,bottom:25},r.MinimumAxisMarginFromScrollbar=5,r}();function oa(r){return P.fF.assertValue(r,"layers"),r.length>1}function Ra(r){return P.fF.assert(function(){return 2===r.length},"domain length must be 2"),P.fF.assert(function(){return r[1]-r[0]!=0},"div by zero warning"),{pos:(r[1]-0)/(r[1]-r[0]),neg:(0-r[0])/(r[1]-r[0])}}var Bt=S(46769),ia=S(34021),Ca=S(11305),Ta=S(61193),da=S(51129),fe=S(45034),Xe=S(59694),He=S(32379),ht=S(94419),m=S(79811),V=S(80777),R=S(72489),ke="Waterfall_TotalLabel",Me="Waterfall_OtherLabel",nt=function(){function r(){}return r.convert=function(e){var t=e.dataView;if(t){if(t.categorical)return function(r){var e,t,a,i,J,xe,n=r.dataView,s=r.hostServices,o=r.dataLabelSettings,l=r.sentimentColors,u=r.interactivityService,c=r.tooltipsEnabled,h=X.p.general.formatString,g=(0,da.G)(n,{formatStringProp:h}),y=g.data,D=(0,C.NA)(g.objects.getStaticObjects(),X.p.valueAxis.totalsEnabled,true),x=n.categorical.categories||[],A=s.getLocalizedString(ke),M={current:0,min:0,max:0,formatString:void 0},O=[],I=[],W=[],ue=[];if(y.hasValues("Tooltips")&&(xe=g.columns.getAllValueMetadataColumnsForRole("Tooltips",void 0)),y.hasValues("Y")){var ie=(ue=[g.columns.getValueMetadataColumn("Y")])[0].format;if(_.isEmpty(x)){var re=y.getValue("Y",0),he=y.getFormatString("Y",0);M={current:re,max:re,min:0,formatString:he}}else{var Ee=x[0];J=Ee.source,(I=Ee.values.slice()).push(A);for(var Ze=null!==(e=n.categorical.originalCategories)&&void 0!==e?e:[Ee],Ie=o.fontProperties.color,tt=function(wt,Kt){var ha=I[wt],ca=y.getValue("Y",wt)||0,Ft=y.getFormatString("Y",wt);void 0!==Ft&&void 0===ie&&(ie=Ft);var ea=U.dw.builder().withCategory(Ze,wt,null===(t=Ee?.source)||void 0===t?void 0:t.queryName,!0).withMeasure(ue[0].queryName,g.columns.getValueColumn("Y"),wt).createSelectionId(),ga=void 0;if(c){ga=Ct(J?[J]:null,ue[0],[ha],ca,Ft,h);var Oa=y.getAllValuesForRole("Tooltips",wt),Ha=y.getAllFormatStringsForRole("Tooltips",wt);Oa&&xe&&Et(Oa,Ha,ga,xe,h,s)}var xa=(0,Bt.t$)({defaultColor:Ie,categoricalDataReader:g,categoryIndex:wt}),$a=(0,Bt.B8)(xa)?xa.color:Ie;o.fontProperties=(0,Bt.Vv)($a,o.fontProperties),O.push(Lt(ca,M.current,l,ha,wt,ea,ga,xa.color,Ft||ie,0)),W[wt]=function(){return(0,f.MH)(wt,Ee)},M=Wt(M,ca)},$e=0,Tt=y.getCategoryCount();$e<Tt;$e++)tt($e)}var Xt=void 0;c&&(Xt=Ct(J?[J]:null,ue[0],[A],M.current,ie,h)),D&&O.push(Lt(M.current,0,l,A,y.getCategoryCount(),U.l0.createNull(),Xt,o.fontProperties.color,ie,1,{text:!0}))}return u&&u.applySelectionStateToData(O),{series:[{data:O,type:null===(a=ue?.[0])||void 0===a?void 0:a.type,measureDisplayName:null===(i=ue?.[0])||void 0===i?void 0:i.displayName}],categories:I,categoryIdentities:W,categoryMetadata:J,preferredCategoryWidth:(0,f.$K)((0,f.Vk)(n.metadata,void 0)),valuesMetadata:ue,legendData:zt(l,s,g.objects.getStaticObjects(),r.style,!1,D),hasHighlights:!1,positionMin:M.min,positionMax:M.max,dataLabelsSettings:o,sentimentColors:l,strokeSettings:(0,ia.kG)(r.style),totalsEnabled:D}}(e);if(t.matrix)return function(r){var e,t,a,i,n=r.dataView,s=r.hostServices,o=r.dataLabelSettings,l=r.sentimentColors,u=r.interactivityService,c=r.tooltipsEnabled,h=r.numberOfBreakdowns,g=n.matrix,y=!_.isEmpty(g.columns.levels)&&g.columns.levels[0].sources[0];P.fF.assert(function(){return!!y},"breakdown role should be defined when using matrix converter");var D=!_.isEmpty(g.rows.levels)&&g.rows.levels[0].sources,x=_.findIndex(g.valueSources,function(ma){return(0,F.nu)(ma,"Y")}),A=g.valueSources[x],M=_.filter(g.valueSources,function(ma){return(0,F.nu)(ma,"Tooltips")}),O=[],I=[],W={current:0,min:0,max:0},J=0,ue=null===(t=n?.metadata)||void 0===t?void 0:t.objects;if(y&&D&&A){P.fF.assert(function(){return(0,F.nu)(y,"Breakdown")},"matrix column should have breakdown role"),P.fF.assert(function(){return _.every(D,function(ma){return(0,F.nu)(ma,"Category")})},"matrix row should have category role");var xe=new jt(y,D,A),ie=A.format,re=s.getLocalizedString(Me),he=X.p.general.formatString,Ee=g.rows.root.children,Ze=g.columns.root.children;if(!_.isEmpty(Ee)&&!_.isEmpty(Ze)){var Ie=Ee.length,tt=Ze.length,$e=0,Tt=void 0,Xt=void 0,Yt=_.size(M)+1;Ie>0&&(J=_.size(Ee[0].values)/Yt-1),h=Math.min(h,J);for(var wt=0;wt<Ie;wt++){for(var Kt=void 0,ha=Ee[wt],ca=wt>0?Ee[wt-1]:void 0,Ft=_.map(ha.levelValues,function(ma){return ma.value}),ea=_.map(Ft,function(ma,Fa){return(0,Pe.xq)(ma,D[Fa],he)}).join(" "),ga=xe.splitIdentity(ha.identity.expr),Oa=[],Ha=_.size(ha.values),xa=0;xa<Ha;xa+=Yt){for(var $a=void 0,ui=void 0,Xa=void 0,Pa=void 0,qa=[],ta=[],Ua=0;Ua<Yt;Ua++)if(Ua===x){var ei=ha.values[xa+Ua];$a=(0,Y.eT)(ei.value),Xa=(0,C.NA)(ei.objects,he),Pa=(0,T.y)(null===(a=ei.objects)||void 0===a?void 0:a.labels,"color"),Kt||(Kt=Xa),ui=ca&&(0,Y.eT)(ca.values[xa+Ua].value)}else qa.push(ha.values[xa+Ua].value),ta.push(ca&&ca.values[xa+Ua].value);Oa.push({key:xa,currentValue:$a,previousValue:ui,difference:($a||0)-(ui||0),column:Ze[xa/Yt],currentTooltipValues:qa,previousTooltipValues:ta,formatString:Xa,labelColor:Pa??void 0})}Oa=_.sortBy(Oa,function(ma){return-1*Math.abs(ma.difference)});var Na=_.chain(Oa).filter(function(ma){return!ma.column.isSubtotal}).take(h).sortBy(function(ma){return-1*ma.difference}).value(),Ga=_.find(Oa,function(ma){return ma.column.isSubtotal}),hi=Ga.currentValue,ja=Ga.previousValue;if(ca){var Bi=_.sumBy(Na,function(ma){return ma.currentValue}),hr=_.sumBy(Na,function(ma){return ma.previousValue}),ri=_.chain(Na).map(function(ma){return xe.splitIdentity(ma.column.identity.expr)}).flatten().value(),Ii=tt>h+1,Li=0,qt=void 0,Si=void 0;if(Ii){var xi=hi-Bi,Ya=ja-hr;if(Li=xi-Ya,qt=xe.createBreakdownOtherIdentity(ri,ga,Xt),c){Si=xe.createBreakdownTooltip(ea,Tt,re,xi,Ya,Li,he,s);for(var bi=[],Pi=[],vr=function(Fa){var vi=Ga.currentTooltipValues[Fa],ba=Ga.previousTooltipValues[Fa];if(_.isNumber(vi)&&_.isNumber(ba)){var Ci=vi-_.sumBy(Na,function(Mi){return Mi.currentTooltipValues[Fa]}),ai=ba-_.sumBy(Na,function(Mi){return Mi.previousTooltipValues[Fa]});bi.push(Ci-ai),Pi.push(ai)}},ni=0;ni<Ga.currentTooltipValues.length;ni++)vr(ni);Et(bi,void 0,Si,M,he,s,Pi,ea,Tt)}}for(var we=!1,gt=function(Fa){Ii&&Li>Fa.difference&&!we&&(we=!0,O.push(Lt(Li,W.current,l,re,$e++,qt,Si,o.fontProperties.color,ie||Kt,3,{text:!0})),I.push(re),W=Wt(W,Li));var vi=(0,Pe.xq)(Fa.column.value,y,he),ba=xe.splitIdentity(Fa.column.identity.expr);P.fF.assertValue(ba,"breakdown identity must be a compare expr");var Ci=xe.createBreakdownIdentity(ga,Xt,ba),ai=void 0;c&&(ai=xe.createBreakdownTooltip(ea,Tt,vi,Fa.currentValue,Fa.previousValue,Fa.difference,he,s),Et(_.map(Fa.currentTooltipValues,function(ar,Ba){return _.isNumber(ar)?ar-Fa.previousTooltipValues[Ba]:ar}),void 0,ai,M,he,s,Fa.previousTooltipValues,ea,Tt)),O.push(Lt(Fa.difference,W.current,l,vi,$e++,Ci,ai,null!==(i=Fa.labelColor)&&void 0!==i?i:o.fontProperties.color,Fa.formatString||ie,0,{text:!0})),I.push(vi),W=Wt(W,Fa.difference)},Sa=0,ti=Na;Sa<ti.length;Sa++)gt(ti[Sa]);Ii&&!we&&(we=!0,O.push(Lt(Li,W.current,l,re,$e++,qt,Si,o.fontProperties.color,ie||Kt,3,{text:!0})),I.push(re),W=Wt(W,Li))}var Zt={dataMap:(e={},e[D[0].queryName]=[ha.identity],e),metadata:[A.queryName]},Ki=void 0;c&&(Ki=Ct(D,A,Ft,hi,void 0,he),Et(Ga.currentTooltipValues,void 0,Ki,M,he,s)),O.push(Lt(hi,0,l,ea,$e++,new U.l0((0,He.tV)(Zt),!1,Zt),Ki,o.fontProperties.color,ie||Kt,2,{text:!0})),I.push(ea),0===wt&&(W={current:hi,max:hi,min:hi}),Tt=ea,Xt=ga}}}return u&&u.applySelectionStateToData(O),{series:[{data:O,type:A?.type,measureDisplayName:A?.displayName}],categories:I,categoryIdentities:_.map(O,function(ma){return function(){return ma.identity}}),categoryMetadata:D[0],preferredCategoryWidth:(0,f.$K)((0,f.Vk)(n.metadata,void 0)),valuesMetadata:g.valueSources,legendData:zt(l,s,ue,r.style,!0,!0),hasHighlights:!1,positionMin:W.min,positionMax:W.max,dataLabelsSettings:o,sentimentColors:l,isBreakdown:!0,numberOfBreakdowns:h,totalBreakdownCategories:J,strokeSettings:(0,ia.kG)(r.style),totalsEnabled:!0}}(e)}},r}();function zt(r,e,t,a,i,n){var s=function(u,c,h,g){return{label:e.getLocalizedString(c),marker:{show:!0,color:u,shape:Ta.ZO.circle},identity:U.dw.builder().withMeasure(h).createSelectionId(),selected:!1,index:g}},o=(0,d.ev)((0,d.ev)([s(r.increaseFill.solid.color,"Increase","increase",0),s(r.decreaseFill.solid.color,"Decrease","decrease",1)],i?[s(r.otherFill.solid.color,Me,"other",3)]:[],!0),n?[s(r.totalFill.solid.color,ke,"total",2)]:[],!0);return(0,m.RS)(t,o,!0,"",!1,a)}function Ct(r,e,t,a,i,n){var s=new Ca.E4;return _.isEmpty(r)||s.withLazyValue(new fe.o(function(){return{displayName:_.map(r,function(o){return o.displayName}).join(" "),value:_.map(t,function(o,l){return(0,Pe.xq)(o,r[l],n)}).join(" ")}})),null!=a&&e&&s.withLazyValue(new fe.o(function(){return{displayName:e.displayName,value:(0,Pe.xq)(a,e,n,!1,i)}})),s}function Lt(r,e,t,a,i,n,s,o,l,u,c){var h,g;return 1===u||2===u?(h=t.totalFill,g=2):3===u?(h=t.otherFill,g=3):r>0?(h=t.increaseFill,g=0):(h=t.decreaseFill,g=1),{value:r,position:e,color:h.solid.color,sentimentColorType:g,categoryValue:a,categoryIndex:i,identity:n,seriesIndex:0,selected:!1,highlight:!1,key:n.getKey(),tooltipInfo:s&&function(){return s.getTooltipItems()},labelFill:o,labelFormatString:l,type:V.Ge.fromDescriptor(c),barType:u}}function Wt(r,e){var t=r.current+e;return{current:t,min:Math.min(r.min,t),max:Math.max(r.max,t)}}function Et(r,e,t,a,i,n,s,o,l){if(!_.isEmpty(r)&&!_.isEmpty(a))for(var u=function(g){if(null!=r[g]&&a[g]){var y=a[g].displayName,D=(0,Pe.xq)(r[g],a[g],i,!1,e?.[g]);if(_.isEmpty(s))t.withLazyValue(new fe.o(function(){return{displayName:y,value:D}}));else{var x=r[g],A=s[g];if(_.isNumber(x)&&_.isNumber(A))y=(0,Xe.W)(n.getLocalizedString("Waterfall_BreakdownDifferenceTooltip"),y),D=St(D,x,A),t.withLazyValue(new fe.o(function(){return{displayName:y,value:D}}));else{if(null!=A){var M=(0,Pe.xq)(A,a[g],i,!1);t.withLazyValue(new fe.o(function(){return{displayName:"".concat(l," ").concat(y),value:M}}))}null!=x&&t.withLazyValue(new fe.o(function(){return{displayName:"".concat(o," ").concat(y),value:D}}))}}}},c=0;c<r.length;c++)u(c)}function St(r,e,t){if(!t)return r;var a=e/Math.abs(t),i=(0,R.Z)("Percentage"),n=(0,R.WU)(a,i);return"".concat(r," (").concat(n,")")}var jt=function(){function r(e,t,a){this.breakdownMetadata=e,this.categoryMetadata=t,this.valueMetadata=a}return r.prototype.splitIdentity=function(e){return(0,Z.Dh)(e)},r.prototype.createBreakdownIdentity=function(e,t,a){var i,n={dataMap:(i={},i[this.breakdownMetadata.queryName]=[(0,ee.TZ)((0,ht.Sh)((0,d.ev)((0,d.ev)([],_.map(e,function(o){return o.left}),!0),_.map(a,function(o){return o.left}),!0),[(0,d.ev)((0,d.ev)([],_.map(t,function(o){return o.right}),!0),_.map(a,function(o){return o.right}),!0),(0,d.ev)((0,d.ev)([],_.map(e,function(o){return o.right}),!0),_.map(a,function(o){return o.right}),!0)]))],i),metadata:[this.valueMetadata.queryName]},s=(0,He.tV)(n);return new U.l0(s,!1,n)},r.prototype.createBreakdownOtherIdentity=function(e,t,a){var i,n={dataMap:(i={},i[this.breakdownMetadata.queryName]=[(0,ee.TZ)((0,ht.ff)((0,ht.Sh)([this.breakdownMetadata.expr],_.map(e,function(o){return[o.right]}))))],i),metadata:[this.valueMetadata.queryName]};n.dataMap[this.categoryMetadata[0].queryName]=[(0,ee.TZ)((0,ht.Sh)(_.map(t,function(o){return o.left}),[_.map(a,function(o){return o.right}),_.map(t,function(o){return o.right})]))];var s=(0,He.tV)(n);return new U.l0(s,!1,n)},r.prototype.createBreakdownTooltip=function(e,t,a,i,n,s,o,l){var u=this,c=new Ca.E4;if(this.breakdownMetadata&&c.withLazyValue(new fe.o(function(){return{displayName:u.breakdownMetadata.displayName,value:(0,Pe.xq)(a,u.breakdownMetadata,o)}})),this.valueMetadata&&(null!=n&&c.withLazyValue(new fe.o(function(){return{displayName:"".concat(t," ").concat(u.valueMetadata.displayName),value:(0,Pe.xq)(n,u.valueMetadata,o,!1)}})),null!=i&&c.withLazyValue(new fe.o(function(){return{displayName:"".concat(e," ").concat(u.valueMetadata.displayName),value:(0,Pe.xq)(i,u.valueMetadata,o,!1)}})),null!=s)){var h=(0,Pe.xq)(s,this.valueMetadata,o,!1);h=St(h,s,n),c.withLazyValue(new fe.o(function(){return{displayName:(0,Xe.W)(l.getLocalizedString("Waterfall_BreakdownDifferenceTooltip"),u.valueMetadata.displayName),value:h}}))}return c},r}(),na=function(){function r(e){var t=e.valueAxisProperties,a=e.y2AxisProperties,i=e.categoryAxisProperties,n=e.isValueAxisIrregular,s=void 0!==n&&n,o=e.style,l=e.hasY2Role,u=e.forceShowY2;this.chartType=e.chartType;var c=(0,f.Au)(this.chartType),h=11===this.chartType;P.fF.assert(function(){return!(c&&h)},"You can't have a categorical Y axis with a Scatter chart"),this.isCategoryAxisSet=!!i,this.isValueAxisSet=!!t,this.isValueAxisIrregular=s;var g=c?t:i,y=c?i:t,D=this.isComboChart?t:a,x=this.isRibbonChart?f.cI:f.$B,A=!this.isRibbonChart,M=(0,d.pi)((0,d.pi)({},r.AxisDataDefaults),{innerPadding:c||h?void 0:x});M.gridline.strokeShow=c||h;var O=(0,d.pi)((0,d.pi)({},r.AxisDataDefaults),{innerPadding:c?x:void 0,show:!!c||A});O.gridline.strokeShow=!c,this.x=r.createSingleAxisFromObject(g,M,o),this.y=r.createSingleAxisFromObject(y,O,o),this.categoryAxis=c?this.y:this.x,this.valueAxis=c?this.x:this.y,s&&(this.valueAxis.show=!1);var I=(0,d.pi)((0,d.pi)({},r.AxisDataDefaults),{show:u&&l||(this.isComboChart?void 0:l),labelFontProperties:(0,ae.ED)(c?this.x.labelFontProperties:this.y.labelFontProperties,{weight:q.zu,style:q.zu,textDecoration:q.AI}),showAxisTitle:c?this.x.showAxisTitle:this.y.showAxisTitle,switchAxisPosition:!0});this.y2=(0,d.pi)((0,d.pi)({},r.createSingleAxisFromObject(D,I,o,!0,this.isComboChart)),{hasY2Role:l}),this.secondaryValueAxis=this.y2,this.seriesLabelSettings=e.seriesLabelSettings||{show:!1,maxWidthPercentage:0,defaultSeriesWidth:0,position:void 0},this.hasY2Role=l}return Object.defineProperty(r,"AxisDataDefaults",{get:function(){return{show:!0,alignZeros:!1,showAxisTitle:!1,includeDomains:[],axisType:void 0,axisStyle:p.DO.showTitleOnly,labelDisplayUnits:0,labelPrecision:b.NZ,titleText:void 0,preferredCategoryWidth:f.jY,maxMarginFactor:$t.DefaultMaxMarginFactor,concatenateLabels:f.SM,labelFontProperties:{color:void 0,family:f.se,size:N.B.createFromPt(f.rZ),style:void 0,variant:void 0,weight:void 0,whiteSpace:void 0,textDecoration:void 0},titleFontProperties:{family:f.se,size:N.B.createFromPt(f.rZ)},axisLabel:void 0,logAxisScale:!1,gridline:{strokeShow:void 0,strokeColor:void 0,strokeTransparency:0,strokePattern:k.Dv.solid,strokeWidth:1,strokeDashArray:k.YU,strokeDashCap:k.xm,strokeAutoScale:!1},innerPadding:void 0,invertAxis:!1,sharedAxis:!0,scaleToFit:!1,totalsEnabled:true,switchAxisPosition:!1,labelBold:!1,labelItalic:!1,labelUnderline:!1,titleBold:!1,titleItalic:!1,titleUnderline:!1}},enumerable:!1,configurable:!0}),r.prototype.showsSeriesLabels=function(){var e;return(null===(e=this.seriesLabelSettings)||void 0===e?void 0:e.show)&&(!this.isComboChart||this.hasY2Role)},Object.defineProperty(r.prototype,"isComboChart",{get:function(){return(0,f.LQ)(this.chartType)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isRibbonChart",{get:function(){return 10===this.chartType},enumerable:!1,configurable:!0}),r.createSingleAxisFromObject=function(e,t,a,i,n){var s=i?function(J){return _.camelCase("sec ".concat(J.propertyName))}:function(J){return J.propertyName},o=X.p.valueAxis,l=Ge.v.create(a),u=function(ue){return ue>=1?ue/100:ue},h=(0,T.N)(e,s(o.concatenateLabels),t.concatenateLabels),g=(0,T.N)(e,s(o.gridlineStyle),t.gridline.strokePattern),y={family:s(o.fontFamily),size:s(o.fontSize),color:s(o.labelColor),sizeInPixels:!1,bold:s(o.bold),italic:s(o.italic),underline:s(o.underline)},D=(0,ae.Zi)(e,y,l,a,t.labelFontProperties.color?void 0:f.eX,"smallLightLabel",t.labelFontProperties);y.family=s(o.titleFontFamily),y.size=s(o.titleFontSize),y.color=s(o.titleColor),y.bold=s(o.titleBold),y.italic=s(o.titleItalic),y.underline=s(o.titleUnderline);var ue,x=(0,ae.Zi)(e,y,l,a,void 0,"title",(0,ae.ED)(t.titleFontProperties,{color:D.color,family:D.family,size:D.size,variant:D.variant,whiteSpace:D.whiteSpace})),A=(0,w.getMergedUserDomains)(t),M=(0,T.N)(e,s(o.start),A[0]),O=(0,T.N)(e,s(o.end),A[1]),I=void 0!==M,W=void 0!==O;return{show:(0,T.N)(e,n?s(o.show):o.show.propertyName,t.show),alignZeros:(0,T.N)(e,s(o.alignZeros),t.alignZeros),showAxisTitle:(0,T.N)(e,s(o.showAxisTitle),t.showAxisTitle),includeDomains:I||W?[(0,w.createScalarDomainOptions)([M,O],10,[I,W])]:[],axisType:(0,T.N)(e,s(o.axisType),t.axisType),axisStyle:(0,T.N)(e,s(o.axisStyle),t.axisStyle),labelDisplayUnits:(0,T.N)(e,s(o.labelDisplayUnits),t.labelDisplayUnits),labelPrecision:(ue=(0,T.N)(e,s(o.labelPrecision),t.labelPrecision),null==ue||ue<0?t.labelPrecision:ue),titleText:(0,T.N)(e,s(o.titleText),t.titleText),preferredCategoryWidth:(0,T.N)(e,s(o.preferredCategoryWidth),t.preferredCategoryWidth),maxMarginFactor:u((0,T.N)(e,s(X.p.categoryAxis.maxMarginFactor),t.maxMarginFactor)),concatenateLabels:h,labelFontProperties:D,titleFontProperties:x,axisLabel:(0,T.N)(e,s(o.axisLabel)),logAxisScale:(0,T.N)(e,s(o.logAxisScale),t.logAxisScale),gridline:{strokeShow:(0,T.N)(e,s(o.gridlineShow),t.gridline.strokeShow||!1===h),strokeColor:l.getColorForPropertyName(e,s(o.gridlineColor),r.getGridlineDefaultColorFromGridlineStyle(g)),strokeTransparency:(0,T.N)(e,s(o.gridlineTransparency),t.gridline.strokeTransparency),strokeWidth:(0,T.N)(e,s(o.gridlineThickness),t.gridline.strokeWidth),strokePattern:g,strokeDashArray:(0,T.N)(e,s(o.gridlineDashArray),t.gridline.strokeDashArray),strokeDashCap:(0,T.N)(e,s(o.gridlineDashCap),t.gridline.strokeDashCap),strokeAutoScale:(0,T.N)(e,s(o.gridlineAutoScale),t.gridline.strokeAutoScale)},innerPadding:u((0,T.N)(e,s(X.p.categoryAxis.innerPadding),t.innerPadding)),invertAxis:(0,T.N)(e,s(o.invertAxis),t.invertAxis),sharedAxis:(0,T.N)(e,o.sharedAxis.propertyName,t.sharedAxis),scaleToFit:(0,T.N)(e,o.scaleToFit.propertyName,t.scaleToFit),totalsEnabled:(0,T.N)(e,s(o.totalsEnabled),t.totalsEnabled),labelBold:(0,T.N)(e,s(o.bold),t.labelBold),labelItalic:(0,T.N)(e,s(o.italic),t.labelItalic),labelUnderline:(0,T.N)(e,s(o.underline),t.labelUnderline),titleBold:(0,T.N)(e,s(o.titleBold),t.titleBold),titleItalic:(0,T.N)(e,s(o.titleItalic),t.titleItalic),titleUnderline:(0,T.N)(e,s(o.titleUnderline),t.titleUnderline),switchAxisPosition:(0,T.N)(e,s(o.switchAxisPosition),t.switchAxisPosition)}},r.getGridlineDefaultColorFromGridlineStyle=function(e){switch(e){case k.Dv.dashed:case k.Dv.solid:case k.Dv.custom:return f.Ao;case k.Dv.dotted:return f.JI;default:return P.fF.assertFail("unknown gridline style: ".concat(e)),f.Ao}},r}(),ya=S(3128),sa=S(94478),fa=S(10034),aa=S(77686),It=S(59107),za=S(30237),Aa=function(){function r(){}return r.prototype.bindEvents=function(e,t,a,i){var s,n=this;if(e&&!i){if(this.ticks=e.ticks,a){var o=a.dataPointNavigationManager,l=a.pointSourceKey;o.isEmpty(l)||((0,za.W3)(e.root,o,l),(0,za.I8)(e.root,o,l),(0,za.lt)(e.root,t))}this.ticks.on("click.select",function(){return n.handleSelection(t)}).on("keydown.select",function(){var u=d3.event,c=u.keyCode;(32===c||13===c)&&(u.preventDefault(),u.stopPropagation(),n.handleSelection(t))})}else null===(s=this.ticks)||void 0===s||s.on("click.select",null).on("keydown.select",null)},r.prototype.renderSelection=function(e){var t;null===(t=this.ticks)||void 0===t||t.style("font-weight",function(a){return a.selected?"700":null}).select("text").attr("aria-selected",function(a){return e&&a.selected})},r.prototype.renderFocus=function(e){It.M.focus(e)},r.prototype.handleSelection=function(e){(0,za.kW)(function(t){return(0,za.c8)(t,e)},!0)},r}(),Gt=S(70450),_a=S(63194),Da=S(60066),Za=S(2241),ur=S(44977),ii=S(38400),Ai=S(41234),Ia=S(65195),Va=S(10389);function Di(r){var e=r.viewport,t=r.margin;return{width:e.width-t.left-t.right,height:e.height-t.top-t.bottom}}var Ui={left:10,right:10,top:0,bottom:13};function $i(r){var e=r.rendererSettings,t=e.interactivity,a=e.axes,i=e.calculatePlotArea,n=e.cartesianOptions.chartType,s=r.axisZoom,o=r.axesData,l=r.layers,u=r.playAxesRect,h=r.trimOrdinalDataOnOverflow,g=r.viewport,y=r.rotateXTickLabels90,D=r.forceMarginMin,x=[],A=[],M=[];function O(I){var W=d3.extent(I);return{min:W[0],max:W[1]}}return(0,ft.Lp)(r.referenceLines,x,A,M,(0,f.RN)(l)),a.negotiateAxes({layers:l,parentViewport:g,padding:(0,Ae.ED)(Ui),playAxisControlLayout:u,showAxisTitles:Ei(o,s),shouldRenderAxis:(0,f.QB)(o,(0,f.LQ)(n)),axesFontProperties:Gi(o),interactivityRightMargin:t?.mobileTileInteractive&&!h?6:0,calculatePlotArea:i,skipMergeValueAxes:s?.skipMergingValueAxisDomains(),ensureXDomain:O(x),ensureYDomain:O(A),ensureY2Domain:O(M),rotateXTickLabels90:y,forceMarginMin:D})}function Qa(r){return r.isXScrollBarVisible||r.isYScrollBarVisible}function Gi(r){return{x:{tickLabels:r.x.labelFontProperties,title:r.x.titleFontProperties},y:{tickLabels:r.y.labelFontProperties,title:r.y.titleFontProperties},y2:{tickLabels:r.y2.labelFontProperties,title:r.y2.titleFontProperties}}}function Ei(r,e){var t={x:r.x.showAxisTitle,y:r.y.showAxisTitle,y2:r.y2.showAxisTitle};return e&&(t=e.updateShowAxisTitles(t)),t}var yr=function(){function r(e){this.settings=e,this.axesData=e.data;var t=this.axesData.useManagedTabIndex,a=this.axisGraphicsContext=this.settings.container.append("g").attr(We.CP,!0).classed(r.AxisGraphicsContext.class,!0);this.svgScrollable=this.settings.container.append("svg").classed("svgScrollable",!0).style("overflow","hidden");var i=this.axisGraphicsContextScrollable=this.svgScrollable.append("g").attr(We.CP,!0).classed(r.AxisGraphicsContext.class,!0);this.labelBackgroundRegion=this.svgScrollable.append("g").classed(b.u9.class,!0),this.labelRegion=this.svgScrollable.append("g").classed(b.ZL.class,!0),this.labelContainerRegion=this.svgScrollable.append("g").classed(b.LV.class,!0).attr(We.CP,!0),this.labelSeriesBackgroundRegion=this.svgScrollable.append("g").classed(b.pJ.class,!0),this.labelSeriesRegion=this.svgScrollable.append("g").classed(b.oA.class,!0),this.axes.isYAxisCategorical?(this.y1AxisGraphicsContext=i.append("g").attr("class","y axis").attr("data-automation-type","y axis").classed(_a.rG.class,t).attr(Ia.Rh,t),this.y2AxisGraphicsContext=i.append("g").attr("class","y axis").attr("data-automation-type","y2 axis"),this.xAxisGraphicsContext=a.append("g").attr("class","x axis").attr("data-automation-type","x axis").attr(We.CP,!0)):(this.y1AxisGraphicsContext=a.append("g").attr("class","y axis").attr("data-automation-type","y axis"),this.y2AxisGraphicsContext=a.append("g").attr("class","y axis").attr("data-automation-type","y2 axis"),this.xAxisGraphicsContext=i.append("g").attr("class","x axis").attr("data-automation-type","x axis").classed(_a.rG.class,t).attr(Ia.Rh,t))}return Object.defineProperty(r.prototype,"axes",{get:function(){return this.settings.axes},enumerable:!1,configurable:!0}),r.prototype.getScrollableRegion=function(){return this.axisGraphicsContextScrollable},r.prototype.getLabelsRegion=function(){return this.labelRegion},r.prototype.getSeriesLabelsRegion=function(){return this.labelSeriesRegion},r.prototype.getLabelBackground=function(){return this.labelBackgroundRegion},r.prototype.getLabelsContainers=function(){return{foreground:this.labelRegion,background:this.labelBackgroundRegion}},r.prototype.getLabelContainerRegion=function(){return{foreground:this.labelContainerRegion}},r.prototype.getSeriesLabelsContainers=function(){return{seriesForeground:this.labelSeriesRegion,seriesBackground:this.labelSeriesBackgroundRegion}},r.prototype.update=function(e){this.axesData=e},Object.defineProperty(r.prototype,"featureSwitches",{get:function(){return this.settings.cartesianOptions.featureSwitches},enumerable:!1,configurable:!0}),r.updateTickTooltips=function(e,t){var a=t.d3Axis.tickValues(),i=r.getTickFormatter(t.d3Axis);e.selectAll(r.TickTextSelector).each(function(n){var s=d3.select(this),o=a.indexOf(n);o<0||s.append("title").text(i(n,o))})},r.getTickFormatter=function(e){return e.tickFormat()||w.defaultTickFormat},r.prototype.renderAxis=function(e){var t,a,i,n,s,o,u,c,h=e.axesLayout,g=e.isStacked,y=e.gridlineOptions,D=e.firstVisibleNode,x=0===e.location,A=1===e.location,M=!x,O=h.tickPadding,I=h.margin,W=h.marginLimits.left,J=h.tickLabelMargins,ue=h.plotArea.width,xe=h.axes,ie=this.getGraphicsElement(e),re=g?1:this.getAxisRenderMode(e);if(0!==re){var he=r.getAxisProps(e),Ee=r.getAxisTickLabelFontProperties(e),Ze=!(0,Y._9)(he.scale),Ie=!x&&"right"===this.axes.getYAxisPosition(e.location),tt=Ie?O.right:O.left;if(_.isEmpty((0,w.getHierStack)(xe))||!he.isCategoryAxis||g){ie.selectAll(r.HierarchicalStackCS.selector).remove(),x?(he.d3Axis.tickSizeInner(Ze?-h.plotArea.height:0).tickSizeOuter(0),!he.willLabelsFit&&!Ze&&he.d3Axis.tickPadding(r.TickPaddingRotatedX)):Ze?he.d3Axis.tickSize(g?J.stackHeight:A?-ue:r.Y2TickSize).tickPadding(tt):he.d3Axis.tickSize(w.DefaultInnerTickSize),he.d3Axis=r.orient(ie,he.d3Axis,x?"bottom":this.axes.getYAxisPosition(e.location));var $e=(a=void 0===(t=e.cartesianOptions)?{}:t).animateCategoryAxis,Tt=a.animateValueAxis,Xt=(n=void 0===(i=e.axesAnimationOptions)?{}:i).duration,Yt=n.ease,wt=(s=e.axesLayout.axes).x.isCategoryAxis,Kt=s.y1.isCategoryAxis,ha=(void 0===(o=s.y2)?{}:o).isCategoryAxis;P.fF.assert(function(){return!ha},"Unit test scream check -  Y2 cannot be categorical, must be always numeric"),(Xt&&Yt&&(x?Tt&&wt:A?$e&&Kt||Tt&&!Kt:$e&&ha||Tt&&!ha)?ie.transition().duration(Xt).ease(Yt):ie).call(he.d3Axis);var Ft=ie.selectAll(r.TickTextSelector).attr("style",null).styles((0,ae.E_)(Ee)).style("visibility",null).style("fill",null!==(u=this.getAxisData(e.location).labelFontProperties.color)&&void 0!==u?u:null);if(ie.selectAll("g.tick line").classed("zero-line",!1),Ze&&ie.selectAll("g.tick").filter(function(Oa){return 0===Oa}).select("line").classed("zero-line",!0),ie.classed("showLinesOnAxis",y.strokeShow).classed("hideLinesOnAxis",!y.strokeShow),ie.selectAll("g.tick line:not(".concat(r.InteractivityGridlineClassSelector.selector,")")).styles((0,Za.bc)(y)),!(null===(c=this.featureSwitches)||void 0===c)&&c.onObject&&(this.convertAxisValuesToSubSelectable(e),this.renderInteractivityGridline(e)),2!==re){if(g){var ea=he;ie.selectAll("g.tick").filter(function(Oa){return ea.adjustedValues[Oa]===Y.Pt}).selectAll("line").remove(),_.isEmpty(he.categoryLabelMaxWidths)?ie.selectAll("g.tick").selectAll("line").remove():(r.centerHierarchyTicks(ie,ea),r.styleHierarchyTicks(ie,ea,y),M&&Ft.call(w.rotate,{textTruncator:ne.b.getTailoredTextOrDefault,textProperties:(0,ae.qk)(Ee),needRotate:!0,needEllipsis:!0,axisProperties:he,margin:I,rotate90:!0,firstVisibleNode:D,rotationPadding:f.Fv,height:e.height,y1Hierarchy:!0}))}x?he.willLabelsWordBreak?r.xAxisWordBreak(Ft,e):Ft.call(w.rotate,{textTruncator:ne.b.getTailoredTextOrDefault,textProperties:(0,ae.qk)(Ee),needRotate:!he.willLabelsFit&&!Ze,needEllipsis:!0,axisProperties:he,margin:I,rotate90:Qa(h)||!he.willLabelsFit&&(!!g||h.rotateXTickLabels90),firstVisibleNode:D,rotationPadding:f.Fv,height:e.height}):(Ie?J.yRight:J.yLeft)>=W&&(!g||_.isEmpty(he.categoryLabelMaxWidths))&&ie.selectAll(r.TickTextSelector).call(Y.oq,W-tt,ne.b.svgEllipsis),r.updateTickTooltips(ie,he),(x||A)&&this.axes.interactivityService&&(A?this.axes.isYAxisCategorical:!this.axes.isYAxisCategorical)&&he.categoryIdentities&&(Ze?this.removeFocusAbility(ie):this.renderCategoricalInteractivity(e))}else y.strokeShow&&(ie.selectAll(r.TickTextSelector).style("visibility","hidden"),this.removeFocusAbility(ie))}else this.renderHierarchicalAxis(e)}else ie.selectAll("*").remove()},r.prototype.renderHierarchicalAxis=function(e){var t,a=this,i=(t=e.axesLayout).axes,n=t.tickLabelMargins,s=this.getGraphicsElement(e),o=(0,w.getHierStack)(i);P.fF.assertValue(!_.isEmpty(o),"one of the axis must be hierarchical and have sub-axes");var l=i.x.isCategoryAxis;P.fF.assert(function(){return l||i.y1.isCategoryAxis},"renderHierarchicalAxis should only be called if one axis is categorical"),this.axisGraphicsContextScrollable.selectAll(".".concat(l?"x":"y",".axis > .tick")).remove(),(l?i.x:i.y1).categoryIdentities&&s.attr("tabindex",0).attr("focusable",!0).attr("aria-label",l?i.x.axisLabel:i.y1.axisLabel).attr("role","listbox").classed(Da.Pg,!It.M.isInternetExplorerOrEdge());var u=l?Y.Or.bottom:"left"===this.axes.getY1AxisPosition()?Y.Or.left:Y.Or.right,c=$t.getLeafHeight(n,u,o.length);s.selectAll(r.HierarchicalStackCS.selector).data(o).join(function(h){return h.append("g").classed(r.HierarchicalStackCS.class,!0).classed("showLinesOnAxis",e.gridlineOptions.strokeShow).classed("hideLinesOnAxis",!e.gridlineOptions.strokeShow)}).each(function(h,g,y){var D=0,x=0,A=0===g;A||(u===Y.Or.bottom?D=c+(g-1)*n.stackHeight:u===Y.Or.left?x=-c-(g-1)*n.stackHeight:u===Y.Or.right?x=c+g*n.stackHeight:P.fF.assertAnyValue(u,"AxisOrientation is not expected to be top.")),a.renderAxis((0,d.pi)((0,d.pi)({},e),{axisProps:h,graphicsElement:d3.select(y[g]).attr("transform",(0,Va.Iu)(x,D)),isStacked:!0,firstVisibleNode:(0,je.y$)(h.rootNode,h.scale.domain()[0],o.length-g),useManagedTabIndex:!!l&&e.useManagedTabIndex,height:function(){if(!l)return 999;var M=r.getAxisTickLabelFontProperties(e);return A?M.size.pt<=f.rZ?e.axesLayout.marginLimits.bottom:c:n.stackHeight}()}))}),this.categoryAxisGraphicsContext=s},r.prototype.renderCategoricalInteractivity=function(e){var t=r.getAxisProps(e),a=this.getGraphicsElement(e),i=t.categoryIdentities;this.categoryAxisGraphicsContext=a;var n=(0,w.isStackedAxisProperties)(t);n||(a.attr("aria-label",t.axisLabel),e.useManagedTabIndex||a.attr("tabindex",0).attr("focusable",!0).attr("role","listbox").classed(Da.Pg,!It.M.isInternetExplorerOrEdge()));for(var s=(0,w.isStackedAxisProperties)(t)?t.adjustedValues:t.values,o=(0,w.isStackedAxisProperties)(t)?t.categoryHierarchyPointers:[],l=_.map(t.d3Axis.tickValues(),function(D,x){var A,M,O;0===x&&!_.isEmpty(o)&&(O=D,D=_.findLastIndex(o,function(W){return!!W},D));var I=o[D];return{value:s[D],selected:!1,categoryIndex:null!==(A=I?.categoryIndex)&&void 0!==A?A:D,adjustedCategoryIndex:O,seriesIndex:null!==(M=I?.seriesIndex)&&void 0!==M?M:0,identity:i[D]?i[D]():void 0}}),u=0,c=0,h=i.length;c<h;c++){var g=l[u];if(g?.categoryIndex===c)g.value!==Y.Pt&&this.categoryDataPoints.push(g),u++;else{var y=o[c];(!n||y)&&this.categoryDataPoints.push({value:void 0,categoryIndex:y?y.categoryIndex:c,seriesIndex:y?y.seriesIndex:0,selected:!1,identity:void 0})}}a.selectAll(".tick").data(l,function(D){var x,A,M,O;return null!==(O=null!==(A=null===(x=D.adjustedCategoryIndex)||void 0===x?void 0:x.toString())&&void 0!==A?A:null===(M=D.categoryIndex)||void 0===M?void 0:M.toString())&&void 0!==O?O:D.toString()}).select("text").each(function(D){D.value!==Y.Pt&&d3.select(this).attr("tabindex",0).attr("focusable",!0).attr("role","option").attr("aria-selected",function(x){return x.selected}).attr("data-automation-type","axis-tick-text").classed(Da.Pg,!It.M.isInternetExplorerOrEdge()).selectAll("tspan").datum(D)})},r.prototype.removeFocusAbility=function(e){e.attr("tabindex",null).attr("focusable",null)},r.prototype.getAxisData=function(e){return 0===e?this.axesData.x:1===e?this.axesData.y:this.axesData.y2},r.getAxisProps=function(e){var t,a=e.axesLayout.axes;return null!==(t=e.axisProps)&&void 0!==t?t:0===e.location?a.x:1===e.location?a.y1:a.y2},r.prototype.getGraphicsElement=function(e){var t,a=e.location;return null!==(t=e.graphicsElement)&&void 0!==t?t:0===a?this.xAxisGraphicsContext:1===a?this.y1AxisGraphicsContext:this.y2AxisGraphicsContext},r.getAxisTickLabelFontProperties=function(e){var t=e.location,a=e.axesFontProperties;return(0===t?a.x:1===t?a.y:a.y2).tickLabels},r.prototype.getAxisRenderMode=function(e){var t=e.location,a=e.axesLayout.shouldRenderAxis;return r.getAxisProps(e)?e.shouldRenderGridLinesOnly&&e.gridlineOptions.strokeShow?2:(0===t?a.x:1===t?a.y:a.y2)?1:0:0},r.prototype.convertAxisValuesToSubSelectable=function(e){var t=0===e.location?"x-axis-values":1===e.location?"y1-axis-values":"y2-axis-values",a=this.getGraphicsElement(e).selectAll(r.TickTextSelector).filter(function(){return"visible"===d3.select(this).style("visibility")}),i=a.nodes();_.isEmpty(i)||(a.classed(We.cy,!0).attr(We.Ez,t).attr(We.CK,"Role_DisplayName_Values").attr(We.QZ,2),i.forEach(function(n){return We.O5.setDataForElement(n,{getRegionOutlines:function(){return r.getAxisValuesOutlines(i,t,e.multipleId)}})}))},r.getAxisValuesOutlines=function(e,t,a){for(var i,n=Number.MAX_SAFE_INTEGER,s=Number.MAX_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER,l=Number.MIN_SAFE_INTEGER,u=0,c=e;u<c.length;u++){var g=(i=c[u].getBoundingClientRect()).x,y=i.y,D=i.bottom,x=i.right;n=Math.min(n,g),s=Math.min(s,y),o=Math.max(o,D),l=Math.max(l,x)}return[{id:"".concat(t).concat(a??""),outline:{x:n,y:s,width:l-n,height:o-s,type:1}}]},r.prototype.renderAxes=function(e){var t,a,i,n;P.fF.assertValue(e.axesLayout,"axesLayout");var h,g,s=e.axesLayout,o=e.axesFontProperties,l=s.axes,u=!_.isEmpty((0,w.getHierStack)(l));this.categoryDataPoints=[],this.categoryAxisGraphicsContext=void 0,P.fF.assert(function(){return null!=l.x},"axes.x must be defined."),this.renderAxis((0,d.pi)((0,d.pi)({},e),{location:0,height:(h=o.x.tickLabels.size.pt<=f.rZ,g=h?s.marginLimits.bottom:s.margin.bottom,h||null==s.axisLabels.x?g:g-(ne.b.estimateSvgTextHeight((0,ae.qk)(o.x.tickLabels))+$t.XAxisLabelPadding)),gridlineOptions:(0,d.pi)((0,d.pi)({},null===(t=this.axesData)||void 0===t?void 0:t.x.gridline),{strokeShow:(!(0,Y._9)(l.x.scale)||l.x.isCategoryAxis&&u)&&(null===(a=this.axesData)||void 0===a?void 0:a.x.gridline.strokeShow)})}));var c=(0,d.pi)((0,d.pi)({},null===(i=this.axesData)||void 0===i?void 0:i.y.gridline),{strokeShow:(!(0,Y._9)(l.y1.scale)||l.y1.isCategoryAxis&&u)&&(null===(n=this.axesData)||void 0===n?void 0:n.y.gridline.strokeShow)});if(this.renderAxis((0,d.pi)((0,d.pi)({},e),{location:1,gridlineOptions:c})),this.renderAxis((0,d.pi)((0,d.pi)({},e),{location:2,gridlineOptions:c})),this.renderAxesTitles(e),this.valueGridlines=this.axisGraphicsContext.selectAll("g.tick line"),this.translateAxes(s),this.axes.interactivityService&&this.categoryAxisGraphicsContext)return{dataPoints:this.categoryDataPoints,behaviorOptions:{root:this.categoryAxisGraphicsContext,ticks:this.categoryAxisGraphicsContext.selectAll(".tick")},navigationOptions:{helper:this,navigationStrategy:u?j.jN.SeriesFirst:j.jN.CategoryOnly},animateLabels:!1,labelDataPointGroups:[],labelDataPoints:[],labelOrientation:void 0,labelsAreNumeric:void 0,labelDataPointSeriesGroups:[]}},r.prototype.renderInteractivityGridline=function(e){var t=e.location,a=e.multipleId,i=e.gridlineOptions,n=this.getGraphicsElement(e),s=0===t?"vertical-gridlines":1===t?"horizontal-gridlines":"secondary-horizontal-gridlines",o="vertical-gridlines"!==s,l=n.selectAll("g.tick line:not(".concat(r.InteractivityGridlineClassSelector.selector,")"));l.each(function(){var u,c=d3.select(this.parentNode),h=d3.select(this),g=h.node(),y=(u=g.getBoundingClientRect()).height,x=i.strokeShow&&(o&&u.width>0||!o&&y>0);c.selectAll(r.InteractivityGridlineClassSelector.selector).filter(function(A){return A===g}).data(function(){return x?[g]:[]}).join("line").attr("class",r.InteractivityGridlineClassSelector.class).classed(We.cy,!0).style("stroke-width",r.interactivityGridlinePadding).style("stroke-linejoin",Ai.t.round).style("stroke-dasharray","none").attrs({x1:h.attr("x1"),y1:h.attr("y1"),x2:h.attr("x2"),y2:h.attr("y2")}).attr(We.Ez,s).attr(We.CK,o?"Visual_Gridline_Horizontal":"Visual_Gridline_Vertical").attr(We.QZ,3).each(function(){We.O5.setDataForElement(this,{getRegionOutlines:function(){var M=l.nodes();return r.getGridlinesOutlines(M,s,a)}})})})},r.prototype.getFirstElement=function(){var e;return{element:null===(e=this.categoryAxisGraphicsContext)||void 0===e?void 0:e.selectAll(r.TickTextSelector).node()}},r.prototype.getDataPointsAtSeries=function(e){return _.filter(this.categoryDataPoints,function(t){return t.seriesIndex===e})},r.prototype.getNextDataPoint=function(e,t,a){var i,n;if(_.isEmpty(this.categoryDataPoints))return{element:this.categoryAxisGraphicsContext.select(r.TickTextSelector).node(),targetCategoryIndex:0};switch(a){case j.x0.PreviousCategory:case j.x0.NextCategory:var s=a===j.x0.PreviousCategory?-1:1,o=this.getDataPointsAtSeries(t),l=s+_.findIndex(o,function(h){return h.categoryIndex===e});l>=o.length||l<0?(i=this.rollToNextSeries(t,a),e=i[0],t=i[1]):e=o[l].categoryIndex;break;case j.x0.PreviousSeries:case j.x0.NextSeries:s=a===j.x0.PreviousSeries?-1:1,o=_.filter(this.categoryDataPoints,function(y){return y.categoryIndex===e});var u=s+_.findIndex(o,function(y){return y.seriesIndex===t});u>=o.length||u<0?(n=this.findNearestSeries(e,t,a),e=n[0],t=n[1]):t=o[u].seriesIndex}return{element:this.categoryAxisGraphicsContext.selectAll(r.TickTextSelector).filter(function(h){return(!h.adjustedCategoryIndex||h.adjustedCategoryIndex===h.categoryIndex)&&h.categoryIndex===e&&h.seriesIndex===t}).node(),targetCategoryIndex:e}},r.getGridlinesOutlines=function(e,t,a){var n={type:0,outlines:e.map(function(s){var o=s.getBoundingClientRect(),l=o.x,u=o.y;return{points:[{x:l,y:u},{x:l+o.width,y:u+o.height}],type:2}})};return[{id:a?"".concat(t).concat(a):t,outline:n}]},r.prototype.rollToNextSeries=function(e,t){P.fF.assert(function(){return t===j.x0.PreviousCategory||t===j.x0.NextCategory},"expected a direction having to do with category");var a=t===j.x0.PreviousCategory?-1:1,i=t===j.x0.PreviousCategory?_.last:_.first,n=_.maxBy(this.categoryDataPoints,function(l){return l.seriesIndex}).seriesIndex+1;return(e+=a)>=n?e=0:e<0&&(e=n-1),[i(this.getDataPointsAtSeries(e)).categoryIndex,e]},r.prototype.findNearestSeries=function(e,t,a){P.fF.assert(function(){return a===j.x0.PreviousSeries||a===j.x0.NextSeries},"expected a direction having to do with series");var i=_.maxBy(this.categoryDataPoints,function(l){return l.seriesIndex}).seriesIndex+1;(t+=a===j.x0.PreviousSeries?-1:1)>=i&&(t=0),t<0&&(t=i-1);var s=this.getDataPointsAtSeries(t),o=_.sortedLastIndexBy(s,{categoryIndex:e},function(l){return l.categoryIndex})-1;return P.fF.assertValue(e=s[o].categoryIndex,"sortedLastIndexBy failed"),[e,t]},r.prototype.renderAxesTitles=function(e){var t,a=this;this.axisGraphicsContext.selectAll(".xAxisLabel").remove(),this.axisGraphicsContext.selectAll(".yAxisLabel").remove();var i=e.axesFontProperties,n=(t=e.axesLayout).axisLabels,s=t.viewport,o=t.margin,l=t.axes;if(P.fF.assertValue(s,"viewport"),P.fF.assertValue(n,"axisLabels"),(null!=n.x||null!=n.y||null!=n.y2)&&!e.shouldRenderGridLinesOnly){var c=s.width-(o.left+o.right),h=s.height-o.top,g=this.axes.shouldShowY1OnRight(),y=function(x){var A,M,O,I,W,J,ue,xe,ie=0===x,re=1===x,he=2===x,Ee=ie?n.x:re?n.y:n.y2,Ze=null===(A=ie?i.x:re?i.y:i.y2)||void 0===A?void 0:A.title;if(null!=Ee&&Ze){var Ie,tt;if(null!==(M=a.featureSwitches)&&void 0!==M&&M.onObject){var $e=he?X.p.valueAxis.secTitleText:ie&&l.x.isCategoryAxis||re&&null!==(O=l.y1)&&void 0!==O&&O.isCategoryAxis?X.p.categoryAxis.titleText:X.p.valueAxis.titleText;(tt=ie?(0,se.s4)($e,Ee):(0,se.Mw)($e,Ee))&&!Ee&&e.showTitlePlaceholders&&(Ie=!0,Ee=a.settings.hostServices.getLocalizedString("Format_AddAxisTitle"))}if(Ee||!he){var Tt=(0,ae.qk)(Ze,Ee),Xt=ne.b.estimateSvgTextBaselineDelta(Tt),Yt=ne.b.estimateSvgTextHeight(Tt),Kt=c+o.right-Yt-$t.YAxisLabelPadding+3,ha=-(o.left+3);a.axisGraphicsContext.append("text").attr("class",ie?"xAxisLabel":"yAxisLabel").attr("transform",ie?null:"rotate(-90)").attr("dy",ie?null:"1em").attr("x",ie?c/2:-(h-o.bottom)/2).attr("y",ie?h-Xt:re?g?Kt:ha:g?ha:Kt).style("text-anchor","middle").styles((0,ae.E_)(Ze)).style("fill",null!==(xe=null===(ue=ie?null===(I=a.axesData)||void 0===I?void 0:I.x:re?null===(W=a.axesData)||void 0===W?void 0:W.y:null===(J=a.axesData)||void 0===J?void 0:J.y2)||void 0===ue?void 0:ue.titleFontProperties.color)&&void 0!==xe?xe:null).text(Ee).call(Y.oq,ie?c:h-o.bottom,function(ca,Ft){return ne.b.svgEllipsis(ca,Ft,Tt)}).call(ii.Q,[Ee]).filter(function(){var ca;return null===(ca=a.featureSwitches)||void 0===ca?void 0:ca.onObject}).classed(We.cy,!0).classed(We.Qh.class,Ie).attr(We.Ez,ie?"x-axis-title":re?"y1-axis-title":"y2-axis-title").attr(We.CK,"Visual_Axis_Title").attr(We.QZ,1).filter(function(){return!!tt}).attr(We.kv,JSON.stringify(tt))}}};y(0),y(1),y(2)}},r.prototype.translateAxes=function(e){var t,a=this,i=e.margin,n=(t=Di(e)).width,s=t.height,o=this.axesData.showsSeriesLabels()?(0,ve.lr)(this.axesData.seriesLabelSettings,n):0,l=this.axesData.seriesLabelSettings.position===Be.M.right,u=l?i.left:i.left+o,c=l?0:o,h=this.axes.shouldShowY1OnRight();this.xAxisGraphicsContext.attr("transform",(0,Va.Iu)(0,s)),this.y1AxisGraphicsContext.attr("transform",(0,Va.Iu)(h?n:0,0)),this.y2AxisGraphicsContext.attr("transform",(0,Va.Iu)(h?0:n,0)),this.svgScrollable.attrs({x:0,width:e.viewport.width,height:e.viewport.height}),this.axisGraphicsContext.attr("transform",(0,Va.Iu)(i.left,i.top));var g=function(x){a.axisGraphicsContextScrollable.attr("transform",(0,Va.Iu)(x,i.top)),a.labelRegion.attr("transform",(0,Va.Iu)(x,i.top)),a.labelContainerRegion.attr("transform",(0,Va.Iu)(x,i.top)),a.labelBackgroundRegion.attr("transform",(0,Va.Iu)(x,i.top)),a.labelSeriesRegion.attr("transform",(0,Va.Iu)(x,i.top)),a.labelSeriesBackgroundRegion.attr("transform",(0,Va.Iu)(x,i.top))};g(u),e.isXScrollBarVisible?(this.svgScrollable.attrs({x:i.left,width:n}),g(c)):e.isYScrollBarVisible&&this.svgScrollable.attr("height",s+i.top),this.valueGridlines.attr("transform","translate(".concat(l?h?-o:0:h?0:o,")"))},r.centerHierarchyTicks=function(e,t){e.selectAll("g.tick").filter(function(a){return t.adjustedValues[a]!==Y.Pt}).each(function(a){var i=d3.select(this),n=i.attr("transform"),s=(0,Va.nd)(n);s&&+s.x>0&&i.attr("transform",(0,Va.Iu)(+s.x+t.categoryLabelMaxWidths[a]/2-t.categoryThickness/2+f.Fv,+s.y)),s&&+s.y>0&&i.attr("transform",(0,Va.Iu)(+s.x,+s.y+t.categoryLabelMaxWidths[a]/2-t.categoryThickness/2+f.Fv))})},r.xAxisWordBreak=function(e,t){var a=null;e.style("text-anchor","middle").attrs({dx:null,dy:null,transform:"rotate(0)",y:function(){if(null==a){var n=ne.b.getSvgMeasurementProperties(this),s=ne.b.estimateSvgTextHeight(n),o=ne.b.estimateSvgTextBaselineDelta(n);a=10+s-o}return"".concat(a,"px")}}).each(function(i){(0,ur.lM)(this,(0,w.getMaxWidth)(r.getAxisProps(t),i),t.height)})},r.orient=function(e,t,a){return delete e.node().__axis,(0,w.axisFactory)(t.scale(),Y.Or[a]).tickArguments(t.tickArguments()).tickValues(t.tickValues()).tickFormat(t.tickFormat()).tickSize(t.tickSize()).tickSizeInner(t.tickSizeInner()).tickSizeOuter(t.tickSizeOuter()).tickPadding(t.tickPadding())},r.styleHierarchyTicks=function(e,t,a){e.selectAll("g.tick").filter(function(i){return t.adjustedValues[i]!==Y.Pt}).selectAll("line").data(function(i){return t.lineStyleInfo[i]}).join(function(i){return i.append("line")}).attrs({x1:function(n){return n.x1},y1:function(n){return n.y1},x2:function(n){return n.x2},y2:function(n){return n.y2}}).styles((0,Za.bc)(a))},r.AxisGraphicsContext=(0,q.CH)("axisGraphicsContext"),r.HierarchicalStackCS=(0,q.CH)("stack"),r.InteractivityGridlineClassSelector=(0,q.CH)("interactivity-gridline"),r.TickTextSelector="g.tick > text",r.interactivityGridlinePadding=10,r.TickPaddingRotatedX=5,r.Y2TickSize=-6,r}(),di=function(){function r(){this.navigationLayers=[],this.currentNavigationLayerIndex=0}return r.prototype.updateScrollCallbacks=function(e){this.scrollCallbacks=e},r.prototype.clearNavigationLayers=function(){this.navigationLayers=[]},r.prototype.addNavigationLayer=function(e){this.navigationLayers.push(e)},r.prototype.getFirstElement=function(){this.currentNavigationLayerIndex=0;var t,e=this.navigationLayers[this.currentNavigationLayerIndex].getFirstElement();return e&&(t=e.element?e.element:this.getNextDataPoint(e.targetCategoryIndex,e.targetSeriesIndex,j.x0.NextSeries).element),{element:t}},r.prototype.getNextDataPoint=function(e,t,a){var i=this.composeLayerPointInfo(e,t);return this.getNextDataPointWithStartData(i,a,i)},r.prototype.getNextDataPointWithStartData=function(e,t,a){var i=this,n=e.categoryIndex,s=e.seriesIndex,o=this.navigationLayers[this.currentNavigationLayerIndex],l=o.getNextDataPoint(n,s,t),u=l.targetCategoryIndex,c=t===j.x0.NextSeries||t===j.x0.NextCategory,h=this.navigationLayers.length;if(h>1&&l.targetCategoryIndex!==n){var g=n,y=0,D=c?1:-1;do{switch(t){case j.x0.NextSeries:case j.x0.PreviousSeries:this.currentNavigationLayerIndex+=D,this.layerRollOverCheck(this.currentNavigationLayerIndex,h)?(this.currentNavigationLayerIndex=this.currentNavigationLayerIndex<0?h-1:0,l=(o=this.navigationLayers[this.currentNavigationLayerIndex]).getFirstElement(u,!c),_.isFinite(l.targetCategoryIndex)&&(u=l.targetCategoryIndex),g=u,y++):l=(o=this.navigationLayers[this.currentNavigationLayerIndex]).getFirstElement(g,!c);break;case j.x0.NextCategory:case j.x0.PreviousCategory:y=h;break;default:P.fF.assertNever(t)}}while(!l.element&&y<h&&(!this.layerRollOverCheck(this.currentNavigationLayerIndex+D,h)||y<h-1))}if(!l.element&&null!=u&&this.shouldScroll(u)){this.getPendingFocusElement=function(){if(i.getPendingFocusElement=void 0,t===j.x0.NextSeries?i.currentNavigationLayerIndex=0:t===j.x0.PreviousSeries&&(i.currentNavigationLayerIndex=h-1),!(l=(o=i.navigationLayers[i.currentNavigationLayerIndex]).getNextDataPoint(n,s,t)).element){var M=i.currentNavigationLayerIndex;do{i.currentNavigationLayerIndex++,i.currentNavigationLayerIndex>=i.navigationLayers.length&&(i.currentNavigationLayerIndex=0),l=i.navigationLayers[i.currentNavigationLayerIndex].getNextDataPoint(n,s,t)}while(!l.element&&i.currentNavigationLayerIndex!==M)}if(i.shouldFindNextPoint(l,e,a,c)){var O=i.composeLayerPointInfo(l.targetCategoryIndex,l.targetSeriesIndex);return i.getNextDataPointWithStartData(O,t,a).element}return l.element};var x=u-n;x<0?this.scrollCallbacks.scrollTo(u):this.scrollCallbacks.scrollBy(x)}else if(this.shouldFindNextPoint(l,e,a,c)){var A=this.composeLayerPointInfo(l.targetCategoryIndex,l.targetSeriesIndex);return this.getNextDataPointWithStartData(A,t,a)}return l},r.prototype.shouldScroll=function(e){return!!this.scrollCallbacks&&this.scrollCallbacks.shouldScrollTo(e)},r.prototype.layerRollOverCheck=function(e,t){return e>=t||e<0},r.prototype.composeLayerPointInfo=function(e,t){return{categoryIndex:e,seriesIndex:t,layerIndex:this.currentNavigationLayerIndex}},r.prototype.shouldFindNextPoint=function(e,t,a,i){if((!e.element||e.noShape)&&null!==e.targetCategoryIndex&&null!==e.targetSeriesIndex){var s=this.composeLayerPointInfo(e.targetCategoryIndex,e.targetSeriesIndex);switch(this.compareLayerPointInfo(a,s,i)){case 1:if(this.compareLayerPointInfo(t,s,i)>=0&&this.compareLayerPointInfo(a,t,i)>0)return!1;break;case 0:return!1;case-1:if(this.compareLayerPointInfo(a,t,i)>0||this.compareLayerPointInfo(t,s,i)>=0)return!1;break;default:P.fF.assertFail("Unexpected result from compareLayerPointInfo")}return!0}return!1},r.prototype.compareLayerPointInfo=function(e,t,a){return e.categoryIndex>t.categoryIndex?a?1:-1:e.categoryIndex<t.categoryIndex?a?-1:1:e.seriesIndex>t.seriesIndex?a?1:-1:e.seriesIndex<t.seriesIndex?a?-1:1:e.layerIndex>t.layerIndex?a?1:-1:e.layerIndex<t.layerIndex?a?-1:1:0},r}(),gi=S(38078),te=function(){function r(e,t){this.options=e,this.scrollbar=t}return r.filterDataToViewport=function(e){var t,a=(t=e||{}).scrollScale,i=t.mainAxisScale,n=t.layers,s=t.axesLayout;if(e.scrollScale){var o=(0,w.invertOrdinalScale)(a,e.extent.start),l=o+e.visibleCategoryCount,c=a.domain().slice(o,l);if(!_.isEqual(c,i.domain())){if(c&&c.length>0){for(var h=0,g=n;h<g.length;h++)g[h].setFilteredData(c[0],c[c.length-1]+1);i.domain(c);var D=s.axes,x=s.isXScrollBarVisible?D.x:D.y1;x.d3Axis.scale(i),x.scale(i),x.d3Axis.ticks(c.length),x.d3Axis.tickValues(c);var A=yr.getTickFormatter(x.d3Axis);x.values=_.map(c,function(ue){return A(ue)});var M=(0,w.getHierStack)(D);if(!_.isEmpty(M))for(var O=D.x.isCategoryAxis?Y.Or.bottom:s.axes.y1.orientation,I=$t.getLeafHeight(e.axesLayout.tickLabelMargins,O,M.length),W=function(xe){var ie=M[xe],re=(0,w.getCategoryThickness)(ie.scale),he=ie.values,Ee=r.setLabelsAtEdges(c,he);if(ie.d3Axis.ticks(c.length).tickValues(c).tickFormat(function(ca){var Ft=he[Ee[c.indexOf(ca)]];return Ft===Y.Pt?"":"".concat(Ft)}),0===xe)return"continue";for(var $e,Ze=[],Ie=[],tt=[],Tt=function(Ft){null!=$e&&(Ze[$e]=$t.getMaxCategoryWidth(Ft,re),Ie[$e]=$t.getHierarchyLineStyleInfo({levelIndex:xe,stackHeight:s.tickLabelMargins.stackHeight,leafHeight:I,categorySpanCount:Ft,categoryWidth:re,orientation:O}))},Xt=0;Xt<Ee.length;Xt++){var Yt=c[Xt],wt=Ee[Xt];he[wt]!==Y.Pt?(Tt(Yt-$e),tt[Yt]=he[wt],$e=Yt):tt[Yt]=Y.Pt}null!=$e&&Tt(c[Ee.length-1]-$e+1),ie.categoryLabelMaxWidths=Ze,ie.lineStyleInfo=Ie,ie.adjustedValues=tt},J=0;J<M.length;J++)W(J)}return{startIndex:o,endIndex:l-1}}}},r.prototype.destroy=function(){this.scrollbar.remove()},r.prototype.render=function(e,t,a,i,n,s,o){var u,c,h,D,x,A,M,O,I,W,J,l=this,g=e.axesLayout,y=e.layers;if(this.axisScale=null,i||Qa(g))if(this.options.axes.isYAxisCategorical){this.axisScale=g.axes.y1.scale,D=g.viewport.width,x=g.margin.top,W=g.axes.y1.innerPaddingRatio;var he=(O=g.axes.y1.categoryThickness)*(I=g.axes.y1.outerPaddingRatio);J=g.plotArea.height,M=Math.max(1,(0,G.Uy)((J-2*he)/O)),A=J}else{this.axisScale=g.axes.x.scale,D=g.margin.left;var ue=null===(u=this.options.cartesianOptions)||void 0===u?void 0:u.chartType,xe=!(0,f.LQ)(ue)||n,ie=Rt(y,ue);if(ie.position===Be.M.left&&xe){var re=Di(g).width;D+=(0,ve.lr)(ie,re)}x=g.viewport.height,W=g.axes.x.innerPaddingRatio,he=(O=g.axes.x.categoryThickness)*(I=g.axes.x.outerPaddingRatio),J=g.plotArea.width,M=Math.max(1,(0,G.Uy)((J-2*he)/O)),A=J}if(!Qa(g))return i&&(i.resetViewport(M),i.shouldLoadMoreData()&&i.loadMoreData()),this.scrollbar.remove(),void t((0,d.pi)((0,d.pi)({},e),{cartesianOptions:this.options.cartesianOptions}));var Ee=this.axisScale.copy();Ee.range([0,A]).paddingInner(.1).paddingOuter(0);var Ze=Ee(M-1)+Ee.bandwidth();this.scrollHandler=new pe({visibleScale:this.axisScale,fullScale:Ee,onScroll:function($e){var Tt=Ee($e);l.scrollbar.setExtent({start:Tt,end:null}),l.scrollbar.refreshExtentAndVisual()}}),this.axisScale.range([0,J]).paddingInner(W).paddingOuter(I),this.scrollbar.setOrientation(g.isXScrollBarVisible),this.scrollbar.setScale(Ee,this.options.suppressBrush),this.scrollbar.scrollBarLength=A,this.scrollbar.setExtentLength(Ze),a||this.scrollbar.setExtent({start:0,end:null});var Ie={axesLayout:g,layers:y,categoryLoadMoreDataHandler:i,mainAxisScale:this.axisScale,renderDelegate:t,scrollScale:Ee,visibleCategoryCount:M,cartesianOptions:this.options.cartesianOptions,extent:this.scrollbar.getExtent()};this.scrollbar.render(D,x,function(){r.renderVisual((0,d.pi)((0,d.pi)({},Ie),{suppressAnimations:!0,extent:l.scrollbar.getExtent()})),o?.addDirectEditPlaceholderOutlines(),o?.refreshOutlines()},s,o),a&&i?this.scrollTo(null!==(h=null===(c=i.viewportDataRange)||void 0===c?void 0:c.startIndex)&&void 0!==h?h:0):r.renderVisual((0,d.pi)((0,d.pi)({},Ie),{extent:this.scrollbar.getExtent()}))},r.prototype.scrollDelta=function(e){this.scrollHandler.scrollDelta(e)},r.prototype.scrollTo=function(e){this.scrollHandler.scrollTo(e)},r.prototype.shouldScrollTo=function(e){if(!this.scrollHandler)return!1;var t=this.axisScale.domain();return!_.isEmpty(t)&&(e<t[0]||e>t[t.length-1])},r.prototype.setExtent=function(e){this.scrollbar.setExtent(e),this.scrollbar.refreshExtentAndVisual()},r.prototype.scrollBy=function(e){var t=this.axisScale.domain();_.isEmpty(t)||this.scrollHandler.scrollTo(t[0]+e)},r.prototype.clearRenderingTimeout=function(){this.scrollbar&&this.scrollbar.clearRenderingTimeout()},r.setLabelsAtEdges=function(e,t){if(e.length<=1||t[e[0]]!==Y.Pt)return e;var a=e[0],i=e.slice();if(a<t.length&&a>=0){for(;t[a]===Y.Pt&&a>=0;a--);i[0]=a}return i},r.renderVisual=function(e){var t=r.filterDataToViewport(e);if(t){if(e.categoryLoadMoreDataHandler){var a=e.categoryLoadMoreDataHandler;a.viewportDataRange=t,a.shouldLoadMoreData()&&a.loadMoreData()}e.renderDelegate(e)}},r.ScrollbarWidth=10,r}(),pe=function(){function r(e){P.fF.assertValue(e,"options must be set"),P.fF.assertValue(e.visibleScale,"options.visibleScale must be set"),P.fF.assertValue(e.fullScale,"options.fullScale must be set"),P.fF.assertValue(e.onScroll,"options.onScroll must be set"),this.visibleScale=e.visibleScale,this.fullScale=e.fullScale,this.onScroll=e.onScroll;var t=gi.b$.valueOrDefault(e.timeout,r.defaultTimeoutMs);this.extendScrollTimeout=_.debounce(this.onTimeout,t),this.totalScrollDistance=0}return r.prototype.scrollDelta=function(e){if(!_.isEmpty(this.visibleScale.domain())){this.totalScrollDistance<0&&e>0||this.totalScrollDistance>0&&e<0?this.totalScrollDistance=e:this.totalScrollDistance+=e;var t=r.getStepSize(this.visibleScale);if(Math.abs(this.totalScrollDistance)>=t){this.extendScrollTimeout&&this.extendScrollTimeout.cancel();var a=this.getNewStartIndex(this.totalScrollDistance);this.scrollTo(a),this.totalScrollDistance=0}else this.extendScrollTimeout()}},r.prototype.scrollTo=function(e){var t=this.clampIndex(e);this.onScroll(t)},r.getStepSize=function(e){var t=_.map(e.domain(),e);if(t.length>1)return t[1]-t[0];var a=e.range();return a[1]-a[0]},r.prototype.getNewStartIndex=function(e){var t=e>=0;e=t?e:-e;var a=this.visibleScale,i=_.map(a.domain(),a),n=a.domain(),s=n[0],l=i[0]+e;return(t?1:-1)*(l>a.range()[1]?n.length:(0,w.invertOrdinalScale)(a,l)-s)+s},r.prototype.clampIndex=function(e){var t=this.fullScale.domain(),a=_.head(t),i=_.last(t);return Math.max(a,Math.min(i,e))},r.prototype.onTimeout=function(){this.totalScrollDistance=0},r.defaultTimeoutMs=1e3,r}(),Te=function(){function r(e){this.settings=e,this.svgAxes=new yr(e),this.navigationHelper=new di}return r.prototype.destroy=function(){var e,t;null===(e=this.scrollableAxes)||void 0===e||e.destroy(),null===(t=this.svgScrollbar)||void 0===t||t.remove(),this.scrollableAxes=void 0,this.svgScrollbar=void 0},r.prototype.update=function(e,t){var a;null===(a=this.svgScrollbar)||void 0===a||a.updateScrollbarOptions(t),this.svgAxes.update(e)},r.prototype.render=function(e,t,a,i,n,s,o,l,u){var c=this,h=this.options=o,y=h.trimOrdinalDataOnOverflow,D=h.categoryLoadMoreDataHandler,x=h.suppressAnimations,A=h.isHierarchicalAxis,M=h.formatMode,O=h.isSelected,I=h.viewMode,W=h.subSelectionHelper,J=h.preserveScrollPosition,ue=h.navigationScrollCallbacks,xe=this.options.multipleId||this.settings.multipleId;if(!u&&((u=$i({axesData:e,rendererSettings:this.settings,referenceLines:i,layers:a,viewport:n,playAxesRect:h.playAxesRect,trimOrdinalDataOnOverflow:y,axisZoom:t,rotateXTickLabels90:void 0})).plotArea.width<1||u.plotArea.height<1))return u;if(!this.settings.suppressBrush||!(n.height<1||n.width<1)){a.forEach(function(Ee,Ze){var Ie,tt;0!==Ze&&u.axes.y2?tt=2:(tt=1,1===a.length&&u.axes.y2&&(tt|=2)),null===(Ie=Ee.setAxesLayout)||void 0===Ie||Ie.call(Ee,{layout:u,trimOrdinalDataOnOverflow:y,axisType:tt})}),t?.render({axesLayout:u,axesData:e,showTitlePlaceholders:O&&1===I});var ie=u.axes.x.isCategoryAxis?u.axes.x:u.axes.y1;D?.setScale(ie.scale);var re=function(Ze){return c.renderAxes((0,d.pi)((0,d.pi)({},Ze),{isHierarchicalAxis:A}),o.axesAnimationOptions,Gi(e),s,l,O&&1===I,xe)};P.fF.assert(function(){return!c.svgScrollbar&&!c.scrollableAxes||!(!c.svgScrollbar||!c.scrollableAxes)},"Expect `svgScrollbar` and `scrollableAxes` to have the same state");var he={axesLayout:u,layers:a,suppressAnimations:x,isHierarchicalAxis:A};return o.supportsScrolling?(this.svgScrollbar||(this.svgScrollbar=new Gt.x({scrollbarWidth:te.ScrollbarWidth,onExtentUpdate:this.settings.onExtentUpdate}),this.scrollableAxes=new te(this.settings,this.svgScrollbar),this.svgScrollbar.init(this.settings.container)),this.scrollableAxes.render(he,re,J,D,e.hasY2Role,M,W)):(this.destroy(),re((0,d.pi)((0,d.pi)({},he),{cartesianOptions:this.settings.cartesianOptions}))),this.navigationHelper.updateScrollCallbacks(o.supportsScrolling?ue:void 0),this.eventsBoundForAxesLayout!==u&&(this.bindScrollWheelEvents(u,this.settings.container,M,W),this.bindTouchEvents(u,this.settings.container,M,W),this.eventsBoundForAxesLayout=u),u}},r.prototype.renderAxes=function(e,t,a,i,n,s,o){var l,u,c=this.svgAxes.renderAxes((0,d.pi)((0,d.pi)({},e),{axesAnimationOptions:t,axesFontProperties:a,shouldRenderGridLinesOnly:this.options.shouldRenderGridLinesOnly,useManagedTabIndex:n,showTitlePlaceholders:s,multipleId:o}));if(c?.navigationOptions&&this.settings.behavior){this.navigationHelper.clearNavigationLayers(),this.navigationHelper.addNavigationLayer(c.navigationOptions.helper);var h={isAxis:!0,navigationOptions:{helper:this.navigationHelper,navigationStrategy:c.navigationOptions.navigationStrategy,focusElement:null===(u=(l=this.navigationHelper).getPendingFocusElement)||void 0===u?void 0:u.call(l)},pointSourceKey:"cartesian-axis".concat(this.settings.multipleId||""),isHierarchicalAxis:e.isHierarchicalAxis};this.settings.interactivityService.bind(c.dataPoints,this.settings.behavior,c.behaviorOptions,h),this.settings.behavior.renderSelection(this.settings.interactivityService.hasSelection())}i(e)},r.prototype.getLayerContainer=function(){return this.svgAxes.getScrollableRegion()},r.prototype.getDataLabelContainers=function(){return this.svgAxes.getLabelsContainers()},r.prototype.getLabelContainerRegion=function(){return this.svgAxes.getLabelContainerRegion()},r.prototype.getSeriesLabelContainers=function(){return this.svgAxes.getSeriesLabelsContainers()},r.prototype.setExtent=function(e){var t;null===(t=this.scrollableAxes)||void 0===t||t.setExtent(e)},r.prototype.scrollDelta=function(e){var t;null===(t=this.scrollableAxes)||void 0===t||t.scrollDelta(e)},r.prototype.scrollTo=function(e){var t;null===(t=this.scrollableAxes)||void 0===t||t.scrollTo(e)},r.prototype.shouldScrollTo=function(e){var t;return null===(t=this.scrollableAxes)||void 0===t?void 0:t.shouldScrollTo(e)},r.prototype.scrollBy=function(e){var t;null===(t=this.scrollableAxes)||void 0===t||t.scrollBy(e)},r.prototype.clearRenderingTimeout=function(){var e;null===(e=this.scrollableAxes)||void 0===e||e.clearRenderingTimeout()},r.prototype.bindTouchEvents=function(e,t,a,i){var n=this,s={x:0,y:0};this.settings.eventManager.on(t.node(),"touchstart",function(){if(0===n.options.viewMode&&Qa(e)){var l=d3.event.changedTouches[0];s.x=l.pageX,s.y=l.pageY}}),this.settings.eventManager.on(t.node(),"touchmove",function(){var o,l,u=null===(o=n.settings.hostServices)||void 0===o?void 0:o.tooltips();if(0===n.options.viewMode&&Qa(e)&&!(u&&u.isTouchScreenOptimizedEnabled()&&u.visible())){a&&i?.onVisualScroll(),n.settings.tooltipService.hide();var c=d3.event,h=c.changedTouches[0],D=e.isXScrollBarVisible?s.x-h.pageX:s.y-h.pageY;n.settings.onScroll?n.settings.onScroll(D):null===(l=n.scrollableAxes)||void 0===l||l.scrollDelta(D),s.x=h.pageX,s.y=h.pageY,c.preventDefault()}})},r.prototype.bindScrollWheelEvents=function(e,t,a,i){var n=this;this.settings.eventManager.on(t.node(),"wheel",function(){var s;if(Qa(e)){a&&i?.onVisualScroll(),n.settings.tooltipService.hide();var o=d3.event,l=o.deltaX,u=o.deltaY,c=Math.abs(l)>Math.abs(u)?l:u;if(n.settings.onScroll){if(n.options.isSmallMultiples&&!o.shiftKey)return;n.settings.onScroll(c)}else null===(s=n.scrollableAxes)||void 0===s||s.scrollDelta(c);o.preventDefault()}})},r}(),Je=S(58698),ot=S(11745),ut=S(63972),yt=S(20624),st=S(5381),pa=function(){function r(e,t,a,i,n,s,o,l,u,c,h){var g;this.cartesianOptions=e,this.visibilityHelper=t,this.chartAreaSvg=a,this.axesRenderer=i,this.element=n,this.hostServices=s,this.behavior=o,this.interactivityService=l,this.clearCatcher=u,this.initialViewportScale=h,this.dataPointNavigationHelper=new di,null!==(g=this.cartesianOptions)&&void 0!==g&&g.dataPointLassoSelect&&!c&&(this.plotLassoManager=new ot.oW(!1),this.plotLassoManager.init([i.getLayerContainer(),u],a,this.hostServices,this.featureSwitches),this.lassoSelectionBehavior=new ot.lk(this.behavior),this.plotLassoManager.behaviors.push(this.lassoSelectionBehavior),this.plotLassoManager.setUiScale(this.initialViewportScale))}return Object.defineProperty(r.prototype,"featureSwitches",{get:function(){var t;return(null===(t=this.cartesianOptions)||void 0===t?void 0:t.featureSwitches)||{}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"chartType",{get:function(){var t;return null===(t=this.cartesianOptions)||void 0===t?void 0:t.chartType},enumerable:!1,configurable:!0}),r.prototype.attachToElement=function(e,t){this.element=e;var a=this.chartAreaSvg;a.attrs({width:t.width,height:t.height}),a.node().parentElement!==e.get(0)&&e.append(a.node())},r.prototype.render=function(e,t,a,i,n){var s;this.options=i,this.renderedPlotArea=a,this.cartesianData=t,this.layers=e,null===(s=this.plotLassoManager)||void 0===s||s.setUiScale(n),this.cartesianData&&(this.cartesianData.showIcon?this.visibilityHelper.updateVisibility({showIcon:this.cartesianData.showIcon,viewport:this.options.viewport}):(this.visibilityHelper.updateVisibility({showIcon:this.cartesianData.showIcon}),this.renderCartesianChart()))},r.prototype.destroy=function(){this.axesRenderer.destroy(),this.chartAreaSvg.html(null),(0,xt.q5)(this.element)},r.prototype.renderCartesianChart=function(){var e=this,t=this.options,a=!this.renderedPlotArea||this.renderedPlotArea.height!==t.chartAreaViewport.height||this.renderedPlotArea.width!==t.chartAreaViewport.width;this.renderedPlotArea=t.chartAreaViewport,this.axesRenderer.render(this.cartesianData.axesData,this.options.axisZoom,this.layers,this.cartesianData.referenceLines,this.options.chartAreaViewport,function(s){return e.renderPlotArea((0,d.pi)((0,d.pi)({},s),{resizeMode:t.resizeMode}))},(0,d.pi)((0,d.pi)({},t),{suppressAnimations:t.suppressAnimations||a}),void 0,this.options.axesLayout),this.dataPointNavigationHelper.updateScrollCallbacks(t.supportsScrolling?t.navigationScrollCallbacks:void 0)},r.prototype.getPlotAreaRect=function(e){return{left:e.margin.left+this.options.chartAreaMargins.left,top:e.margin.top+this.options.chartAreaMargins.top,width:e.plotArea.width,height:e.plotArea.height}},r.prototype.renderPlotArea=function(e){var t=e.axesLayout;(0,xt.Re)(this.options.background,this.element,this.getPlotAreaRect(t)),(0,ft.xw)({graphicContext:this.axesRenderer.getLayerContainer(),axes:t.axes,viewport:t.plotArea,referenceLines:this.cartesianData.referenceLines}),this.renderLayers(e),(0,rt.Zb)(this.cartesianData.trendLines,this.axesRenderer.getLayerContainer(),t.axes,t.plotArea,this.featureSwitches.onObject)},r.prototype.getReferenceLineLabels=function(e,t){return(0,ft.TY)({axes:e,viewport:t,referenceLines:this.cartesianData.referenceLines,hostServices:this.hostServices,style:this.options.layerStyle})},r.prototype.getDataLabelLayoutOptions=function(e){var t=(0,st.n8)(this.chartType);return t.allowLeaderLines=t.allowLeaderLines||e.some(function(a){return a.enableLeaderLines}),t.shrinkLeaderLinesForBestFit=11!==this.chartType,t.drawLeaderLinesIgnoreOffset=11!==this.chartType,t},r.prototype.renderDataLabels=function(e){var t=this.behavior?this.renderLabelsWithInteractiveBehavior(e):this.renderLabelsWithoutInteractiveBehavior(e);return!_.isEmpty(t)||_.every(e.labelDataPointGroups,function(a){return _.isEmpty(a.labelDataPoints)})},r.prototype.renderLabelsWithoutInteractiveBehavior=function(e){var t,s=new ut.nu({maximumOffset:b.wh,startingOffset:b.ki,attemptToMoveLabelsIntoViewport:!0}).layout(e.labelDataPointGroups,e.plotArea);return null!==(t=this.featureSwitches)&&void 0!==t&&t.labelEnhancementsM0?this.renderEnhancedLabels(s,e):this.drawLegacyLabelsAndBackgrounds(s,e),s},r.prototype.drawLegacyLabelsAndBackgrounds=function(e,t){var a=this.axesRenderer.getDataLabelContainers();return(0,st.gm)({labelContext:a.foreground,dataLabels:e,numeric:t.labelsAreNumeric,backgroundContext:a.background,formatMode:this.options.formatMode,onObject:this.featureSwitches.onObject})},r.prototype.drawLabelContainer=function(e,t){var a=t.labelsAreNumeric,i=this.axesRenderer.getLabelContainerRegion().foreground;return(0,st.AE)({labelGroupContext:i,labelContainers:e,numeric:a,formatMode:this.options.formatMode,onObject:this.featureSwitches.onObject})},r.prototype.renderEnhancedLabels=function(e,t){var o,a=this.labelInstanceTypeSplitter(e),i=a.labels,n=a.containers,s=this.axesRenderer.getLabelContainerRegion().foreground;return _.isEmpty(n)||(o=this.drawLabelContainer(n,t)),o=this.drawLegacyLabelsAndBackgrounds(i,t),_.isEmpty(n)&&((0,st.in)(s),(0,st.$J)(s)),o},r.prototype.renderLabelsWithInteractiveBehavior=function(e){var t,M,a=e.labelDataPointGroups,i=e.plotArea,n=e.suppressAnimations,s=e.animateLabels,o=e.labelsAreNumeric,l=this.options,u=l.formatMode,c=l.labelAnimationOptions,h=this.getDataLabelLayoutOptions(a),y=new ut.nu(h).layout(a,i),D=this.axesRenderer.getDataLabelContainers(),x=D.foreground,A=D.background,O=(0,Bt.ML)(y);if(this.renderLeaderLines(h,y),M=!O&&null!==(t=this.cartesianOptions)&&void 0!==t&&t.animator&&!n&&s?(0,st.Bf)({labelContext:x,dataLabels:y,duration:c.duration,numeric:o,easeType:c.ease,backgroundContext:A,formatMode:u,onObject:this.featureSwitches.onObject}):this.featureSwitches.labelEnhancementsM0?this.renderEnhancedLabels(y,e):this.drawLegacyLabelsAndBackgrounds(y,e),this.interactivityService&&(this.cartesianOptions.isLabelInteractivityEnabled||u)){var I={labelItems:M};this.interactivityService.bind(y,new Je.c,I,{isLabels:!0,pointSourceKey:"data-labels",formatMode:u})}return y},r.prototype.labelInstanceTypeSplitter=function(e){for(var t=[],a=[],i=0,n=e;i<n.length;i++){var s=n[i];(0,Bt.CC)(s)?a.push(s):t.push(s)}return{labels:t,containers:a}},r.prototype.renderLeaderLines=function(e,t){var a=this.axesRenderer.getDataLabelContainers().foreground,i=e.allowLeaderLines?t.filter(function(n){return!_.isEmpty(n.leaderLinePoints)&&null!=n.identity}):[];(0,st.z8)(a,i,function(n){return n.identity.getKey()})},r.prototype.renderSeriesLabels=function(e,t,a,i,n){var s=this.axesRenderer.getSeriesLabelContainers(),o=s.seriesForeground,l=s.seriesBackground,u=new ut.nu({maximumOffset:b.wh,startingOffset:b.ki,attemptToMoveLabelsIntoViewport:!0});(0,st.Sw)({labelContext:o,dataLabels:u.layout(e,t),backgroundContext:l,availableChartWidth:i,seriesLabelsSettings:a,plotArea:t,formatMode:n,onObject:this.featureSwitches.onObject})},r.prototype.renderLayers=function(e){var t=e.layers,a=e.axesLayout,i=e.suppressAnimations,n=e.resizeMode;P.fF.assertValue(t,"layers");var c,D,x,s=[],o=[],l=[],u=[],h=!0,g=a.axes,y=a.plotArea;i=i||_.some(t,function(ie){return ie.shouldSuppressAnimation&&ie.shouldSuppressAnimation()});for(var A=!0,M=function(re){var he=re.render(i,n,O.options.formatMode);if(he){if(he.animateLabels||(A=!1),O.behavior&&(l=l.concat(he.dataPoints),u.push(he.behaviorOptions),he.navigationOptions&&(c?c.navigationOptions.navigationStrategy=j.jN.CategoryFirst:(c={pointSourceKey:"cartesian-layer ".concat(O.options.multipleId||""),navigationOptions:{navigationStrategy:he.navigationOptions.navigationStrategy,helper:O.dataPointNavigationHelper}},O.dataPointNavigationHelper.clearNavigationLayers()),c.isHierarchicalAxis=O.options.isHierarchicalAxis,O.dataPointNavigationHelper.addNavigationLayer(he.navigationOptions.helper))),he.labelDataPointGroups)for(var Ze=0,Ie=he.labelDataPointGroups;Ze<Ie.length;Ze++)(tt=Ie[Ze])&&s.push((0,d.pi)((0,d.pi)({},tt),{labelDataPoints:(0,st.R1)(tt.labelDataPoints||[]),labelOrientation:tt.isTotal?yt.B.Horizontal:he.labelOrientation}));else{var $e=he.labelDataPoints||[];s.push((0,d.pi)((0,d.pi)({},$e),{labelDataPoints:(0,st.R1)($e),maxNumberOfLabels:$e.length,labelOrientation:he.labelOrientation}))}if(he.labelDataPointSeriesGroups)for(var Tt=0,Xt=he.labelDataPointSeriesGroups;Tt<Xt.length;Tt++){var tt;(tt=Xt[Tt])&&o.push((0,d.pi)((0,d.pi)({},tt),{labelDataPoints:(0,st.R1)(tt.labelDataPoints||[]),labelOrientation:tt.isTotal?yt.B.Horizontal:he.labelOrientation}))}h=h&&he.labelsAreNumeric,O.lassoSelectionBehavior&&(void 0!==he.categorySubRangeCount&&(void 0===D?D=he.categorySubRangeCount:P.fF.assert(function(){return he.categorySubRangeCount===D},"categorySubRangeCount should match between layers")),void 0!==he.verticalCategoryAxis&&(void 0===x?x=he.verticalCategoryAxis:P.fF.assert(function(){return he.verticalCategoryAxis===x},"verticalCategoryAxis should match between layers")))}},O=this,I=0,W=t;I<W.length;I++)M(W[I]);var ue=this.getReferenceLineLabels(g,y);_.isEmpty(ue)||s.unshift({labelDataPoints:ue,maxNumberOfLabels:ue.length});var xe={labelDataPointGroups:s,labelsAreNumeric:h,plotArea:y,suppressAnimations:i,isCombo:(0,f.LQ)(this.chartType),animateLabels:A};this.noLabelsCanBeRendered=!this.renderDataLabels(xe),this.renderSeriesLabels(o,y,Rt(t,this.chartType),Di(a).width,this.options.formatMode),this.dataPointNavigationHelper.getPendingFocusElement&&c&&(c.navigationOptions.focusElement=this.dataPointNavigationHelper.getPendingFocusElement()),this.interactivityService&&this.interactivityService.bind(l,this.behavior,{layerOptions:u,clearCatcher:this.clearCatcher,root:this.chartAreaSvg,axesLayout:a,categorySubRangeCount:D,verticalCategoryAxis:x},c)},r}(),ua=S(14599),wa=S(61297),Ja=S(32476),La=S(66001),ka=function(){function r(){var e;this.unSyncedLayout=[],this.maxMargin={top:0,bottom:0,left:0,right:0},this.axesRenderersByPosition=((e={})[2]=[],e[0]=[],e[1]=[],e)}return r.prototype.update=function(e,t,a,i,n,s,o){this.settings=e,this.coreMultiple=o,this.renderOptions=a,this.maxMargin={bottom:0,left:0,right:0,top:0},this.unSyncedLayout=[];var l=_.clone(this.getCoreMultipleData()),u=this.coreMultiple.layers;if(!this.shouldShareAxis()){for(var c=0,h=t;c<h.length;c++){var g=h[c],y=g.getData(),D=g.layers;y.axesData.x.showAxisTitle=!1,y.axesData.y.showAxisTitle=!1,y.axesData.y2.showAxisTitle=!1,l.axesData.y.sharedAxis||(y.axesData.x.show=!1),l.axesData.x.sharedAxis||(y.axesData.y.show=!1);var x=$i({axesData:y.axesData,rendererSettings:this.settings,referenceLines:y.referenceLines,layers:D,viewport:i,playAxesRect:this.renderOptions.playAxesRect,trimOrdinalDataOnOverflow:this.renderOptions.trimOrdinalDataOnOverflow,axisZoom:void 0,rotateXTickLabels90:!0});this.unSyncedLayout.push(x),x.margin.left>=this.maxMargin.left&&(this.maxMargin.left=x.margin.left),x.margin.right>=this.maxMargin.right&&(this.maxMargin.right=x.margin.right),x.margin.top>=this.maxMargin.top&&(this.maxMargin.top=x.margin.top),x.margin.bottom>=this.maxMargin.bottom&&(this.maxMargin.bottom=x.margin.bottom)}(l=_.clone(t[0].getData())).axesData.x.showAxisTitle=this.getCoreMultipleData().axesData.x.showAxisTitle,l.axesData.y.showAxisTitle=this.getCoreMultipleData().axesData.y.showAxisTitle,l.axesData.y.sharedAxis||(l.axesData.x.show=this.getCoreMultipleData().axesData.x.show,l.axesData.y.show=!1,l.axesData.y2&&(l.axesData.y2.show=!1,l.axesData.y2.showAxisTitle=this.getCoreMultipleData().axesData.y.showAxisTitle)),l.axesData.x.sharedAxis||(l.axesData.x.show=!1,l.axesData.y.show=this.getCoreMultipleData().axesData.y.show)}return this.generateSharedAxisLayout(l,u,i,n,s),this.unSyncedLayout},r.prototype.generateSharedAxisLayout=function(e,t,a,i,n){this.layout=$i({axesData:e.axesData,rendererSettings:this.settings,referenceLines:e.referenceLines,layers:t,viewport:a,playAxesRect:this.renderOptions.playAxesRect,trimOrdinalDataOnOverflow:this.renderOptions.trimOrdinalDataOnOverflow,axisZoom:void 0,rotateXTickLabels90:!0,forceMarginMin:this.shouldShareAxis()?void 0:(0,d.pi)({},this.maxMargin)}),this.clearUnusedRenderers(i,n,this.layout.shouldRenderAxis,this.layout)},r.prototype.getCoreMultipleData=function(){return this.coreMultiple.getData()},r.prototype.shouldShareAxis=function(){return this.getCoreMultipleData().axesData.x.sharedAxis&&this.getCoreMultipleData().axesData.y.sharedAxis},r.prototype.clearUnusedRenderers=function(e,t,a,i){this.destroyUnusedRenderers(e=a.x||i.isXScrollBarVisible?e:0,2);var n=a.y||i.isYScrollBarVisible?t:0,s=this.shouldRenderYAxis(0,this.settings.data.y.switchAxisPosition)?0:1;this.destroyUnusedRenderers(n,s),this.destroyUnusedRenderers(a.y2||i.isYScrollBarVisible?t:0,0===s?1:0)},r.prototype.destroyUnusedRenderers=function(e,t){var a=this.axesRenderersByPosition[t];_.isEmpty(a)||a.length<=e||(a.slice(e,a.length).forEach(function(i){return i.destroy()}),this.axesRenderersByPosition[t]=a.slice(0,e))},r.prototype.calculateAxesLayout=function(e){return this.shouldShareAxis()||void 0===e?this.calculateSynchronizedAxesLayout():void 0!==e?this.calculateUnSynchronizedAxesLayout(e):this.layout},r.prototype.calculateSynchronizedAxesLayout=function(){var e=_.cloneDeep(this.layout);return(0,Ae.Zx)(this.layout,e),e.axes.x.scale=this.layout.axes.x.scale.copy(),e.axes.y1.scale=this.layout.axes.y1.scale.copy(),e.axes.y2&&(e.axes.y2.scale=this.layout.axes.y2.scale.copy()),e},r.prototype.calculateUnSynchronizedAxesLayout=function(e){var t,a=_.cloneDeep(this.unSyncedLayout[e]);(0,Ae.Zx)(this.unSyncedLayout[e],a);var i=a.axes.x,n=a.axes.y1,s=a.plotArea=this.layout.plotArea,o=this.getCoreMultipleData().axesData,l=this.layout.tickLabelMargins.axesOverflow,u=a.tickLabelMargins.axesOverflow;if(!o.y.sharedAxis){i.outerPadding=this.layout.axes.x.outerPadding,i.outerPaddingRatio=this.layout.axes.x.outerPaddingRatio,i.xLabelMaxWidth=this.layout.axes.x.xLabelMaxWidth,i.categoryThickness=this.layout.axes.x.categoryThickness,a.isXScrollBarVisible=this.layout.isXScrollBarVisible;var c=l.bottom+l.top-(u.bottom+u.top);if((h=n.scale).range(n.invertAxis?[1,s.height+c-1]:[s.height+c-1,1]),i.scale=this.layout.axes.x.scale.copy(),a.axes.y2)a.axes.y2.scale.range(n.invertAxis?[1,s.height+c-1]:[s.height+c-1,1]);a.margin.left=Math.max(this.maxMargin.left,a.margin.left),a.margin.right=Math.max(this.maxMargin.right,a.margin.right)}if(!o.x.sharedAxis){n.outerPadding=this.layout.axes.y1.outerPadding,n.outerPaddingRatio=this.layout.axes.y1.outerPaddingRatio,n.xLabelMaxWidth=this.layout.axes.y1.xLabelMaxWidth,n.categoryThickness=this.layout.axes.y1.categoryThickness,a.isYScrollBarVisible=this.layout.isYScrollBarVisible;var h,y=l.left+l.right-(u.left+u.right);if(i.scale.range(i.invertAxis?[s.width+y-1,1]:[1,s.width+y-1]),!o.x.show)if((0,Y._9)(h=n.scale))h.range([0,a.plotArea.height]),h.paddingOuter(n.outerPaddingRatio);else{var x=null!==(t=n.outerPadding)&&void 0!==t?t:0;h.range([a.plotArea.height-x,x])}a.margin.bottom=Math.max(this.maxMargin.bottom,a.margin.bottom),a.margin.top=Math.max(this.maxMargin.top,a.margin.top)}return a},r.prototype.renderAxes=function(e){if(!(e.viewport.height<1||e.viewport.width<1)){var t=(0,f.MI)(e.element,e.viewport),a=this.getCoreMultipleData();this.getAxesRenderer(t.element,e.position,e.index,a).render(a.axesData,void 0,this.coreMultiple.layers,a.referenceLines,e.viewport,function(){},(0,d.pi)((0,d.pi)({},this.renderOptions),{supportsScrolling:this.shouldSupportScrolling(a,e.position),formatMode:this.settings.formatMode,isSelected:this.settings.isSelected,subSelectionHelper:void 0,multipleId:void 0,playAxesRect:void 0}),this.renderOptions.isSmallMultiples,this.updateAxesLayoutByPosition(e))}},r.prototype.scrollDelta=function(e,t){this.updateScrollState(function(a){return a.scrollDelta(e)},t)},r.prototype.scrollTo=function(e,t){this.updateScrollState(function(a){return a.scrollTo(e)},t)},r.prototype.scrollBy=function(e,t){this.updateScrollState(function(a){return a.scrollBy(e)},t)},r.prototype.updateScrollbarExtent=function(e,t){this.updateScrollState(function(a){return a.setExtent(e)},t)},r.prototype.updateScrollState=function(e,t){var a=this.getCoreMultipleData(),i=this.getScrollablePosition(a);P.fF.assertValue(i,"scrollablePosition");var n=this.axesRenderersByPosition[i];2!==i&&_.isEmpty(t)||_.isEmpty(n)||n.forEach(function(s,o){2!==i&&(o<t.startIndex||o>t.endIndex)||e(s)})},r.prototype.updateAxesLayoutByPosition=function(e){var t=e.position,a=e.viewport,i=this.calculateAxesLayout(),n=i.scrollHandleMargins;i.viewport=n?{width:a.width-(n.left+n.right),height:a.height-(n.top+n.bottom),scale:a.scale}:a,i.preferredPlotArea={width:0,height:0};var s=this.getCoreMultipleData();return 2===t?(i.margin=this.getMarginByPosition(i.margin,t,i.tickLabelMargins.axesOverflow),!s.axesData.y.sharedAxis&&s.axesData.y.show&&(i.margin.left=this.layout.margin.left,i.shouldRenderAxis.y=!1),s.axesData.x.sharedAxis||(i.margin.bottom=this.layout.margin.bottom),this.shouldShareAxis()&&(i.shouldRenderAxis.y=!1),i.shouldRenderAxis.y2=!1,i.shouldRenderAxis.y=!1,i.axisLabels.y=null,i.axisLabels.y2=null,i.plotArea.height=0,i):(i.plotArea.width=0,i.margin=this.getMarginByPosition(i.margin,t,i.tickLabelMargins.axesOverflow),i.shouldRenderAxis.x=!1,i.axisLabels.x=null,this.shouldRenderYAxis(t,this.settings.data.y.switchAxisPosition)?(i.axisLabels.y2=null,i.shouldRenderAxis.y2=!1):(i.shouldRenderAxis.y=!1,i.axisLabels.y=null),i)},r.prototype.destroy=function(){var e=this;this.executeActionByPosition(this.axesRenderersByPosition,function(t,a){_.isEmpty(t)||(t.forEach(function(i){return i.destroy()}),e.axesRenderersByPosition[a]=[])})},r.prototype.executeActionByPosition=function(e,t){for(var a in this.axesRenderersByPosition)t(e[a],a)},r.prototype.clearRenderingTimeout=function(){this.executeActionByPosition(this.axesRenderersByPosition,function(e){_.isEmpty(e)||e.forEach(function(t){return t.clearRenderingTimeout()})})},r.prototype.shouldRenderYAxis=function(e,t){return 0===e&&!t||1===e&&t},r.prototype.getMarginByPosition=function(e,t,a){var i=(0,Ae.ED)(a);return 2===t?(i.bottom=e.bottom,i.top=0,i):(i.left=0,i.right=0,0===t?i.left=e.left:1===t&&(i.right=e.right),i)},r.prototype.getScrollablePosition=function(e){var t;return this.layout.isYScrollBarVisible?null!==(t=e.axesData.y)&&void 0!==t&&t.switchAxisPosition?1:0:this.layout.isXScrollBarVisible?2:void 0},r.prototype.shouldSupportScrolling=function(e,t){return this.getScrollablePosition(e)===t},r.prototype.getAxesRenderer=function(e,t,a,i){var n=$(e.node()),s=n.data("CartesianAxesRenderer");if(s)s.update(i.axesData,i.scrollbarOptions);else{var o=(0,d.pi)((0,d.pi)({},this.settings),{container:e,multipleId:"".concat(a),behavior:new Aa});o.data.useManagedTabIndex=!0,this.axesRenderersByPosition[t][a]=s=new Te(o),n.data("CartesianAxesRenderer",s)}return s},r}(),ji=S(39071),qi="multiple",yi=function(){function r(e,t,a,i,n,s,o,l,u,c,h,g){var y,D;this.interactivityService=t,this.getLocalizedString=a,this.cartesianOptions=n,this.layerStyle=s,this.viewMode=o,this.buildPlotAreaLayout=l,this.renderMultiple=u,this.adapterFactory=c,this.visualInstanceId=h,this.sharedAxisLayout=new ka,this.gridLayout=new Ja.Me(e,function(){return i.loadMoreData()},null===(y=this.cartesianOptions)||void 0===y?void 0:y.isScrollable,t,g,qi,null===(D=this.cartesianOptions)||void 0===D?void 0:D.featureSwitches),this.visibilityHelper=(0,fa.q)().visibilityHelper(e,r.IconClassName)}return r.prototype.render=function(e){var t=this;this.clearRenderingTimeout();var a=e.cartesianSmallMultipleFactory;this.options=e;var i=e.cartesianSmallMultipleFactory,n=this.adapterFactory(),s=n.getMultiplesSubheader(e.warnings);P.fF.assertValue(n,"smallMultipleAdapter");var l=this.multiplesLayout=n.getMultiplesLayout(e.warnings),u=l.showIcon;if(this.visibilityHelper.updateVisibility({showIcon:u,viewport:e.viewport}),!u){var h={categoryLoadMoreDataHandler:e.categoryLoadMoreDataHandler,playAxesRect:e.playAxesRect,trimOrdinalDataOnOverflow:e.trimOrdinalDataOnOverflow,suppressAnimations:e.suppressAnimations,resizeMode:e.resizeMode,rowCount:l.rowCount,columnCount:l.columnCount,getCellBackgroundColor:function(y){return t.getColorFromMultipleObjects(y,ua.e0.smallMultiplesBackgroundColor,t.multiplesLayout.backgroundColor)},backgroundTransparency:l.backgroundTransparency,isHierarchicalAxis:e.isHierarchicalAxis,gridline:l.gridline,cellPadding:{top:l.rowPaddingInner,bottom:0,left:l.columnPaddingInner,right:0},outerPadding:{top:l.rowPaddingOuter,bottom:l.rowPaddingOuter,left:l.columnPaddingOuter,right:l.columnPaddingOuter}};return this.cellDimensions&&(this.cellDimensions.maxSubheaderHeight=void 0),this.renderGridLayout(a,e.viewport,function(y){return t.renderGridCell(i,y,e.background,e.playAxesRect,e.suppressAnimations,e.resizeMode,e.trimOrdinalDataOnOverflow,e.categoryLoadMoreDataHandler,e.isHierarchicalAxis,!0,e.formatMode)},function(y){return t.renderGridCellSubheader(y,i,s)},s,h,e.axisRendererSettings.axes.isYAxisCategorical)}},r.prototype.clearRenderingTimeout=function(){this.sharedAxisLayout.clearRenderingTimeout(),this.gridLayout.clearRenderingTimeout()},r.prototype.destroy=function(){this.gridLayout.destroy(),this.sharedAxisLayout.destroy()},r.prototype.onScroll=function(e){this.sharedAxisLayout.scrollDelta(e,this.gridLayout.getScrollPosition()),this.options.cartesianSmallMultipleFactory.scrollDelta(e,this.getVisibleMultiples())},r.prototype.onExtentUpdate=function(e){this.sharedAxisLayout.updateScrollbarExtent(e,this.gridLayout.getScrollPosition()),this.options.cartesianSmallMultipleFactory.updateScrollbarExtent(e,this.getVisibleMultiples())},r.prototype.scrollTo=function(e){this.sharedAxisLayout.scrollTo(e,this.gridLayout.getScrollPosition()),this.options.cartesianSmallMultipleFactory.scrollTo(e,this.getVisibleMultiples())},r.prototype.shouldScrollTo=function(e){return this.options.cartesianSmallMultipleFactory.shouldScrollTo(e,this.getVisibleMultiples())},r.prototype.scrollBy=function(e){this.sharedAxisLayout.scrollBy(e,this.gridLayout.getScrollPosition()),this.options.cartesianSmallMultipleFactory.scrollBy(e,this.getVisibleMultiples())},r.adjustAxesMarginsForShared=function(e,t,a){var i,n,s,o=e.axesMargins,l=e.titleMargins,u=e.scrollHandleMargins,c=e.shouldRenderAxis,h=e.axes;function g(M,O,I){return O||M&&null!=M.axisLabel&&I}var y=g(h?.y1,c.y,a.y),D=g(h?.y2,c.y2,a.y2),A={bottom:g(h?.x,c.x,a.x)?o.bottom:0,top:0,left:0,right:0};return t?(y&&(A.right=c.y?o.right:l.right),D&&(A.left=c.y2?o.left:l.left)):(y&&(A.left=c.y?o.left:l.left),D&&(A.right=c.y2?o.right:l.right)),{left:A.left+(null!==(i=u?.left)&&void 0!==i?i:0),right:A.right+(null!==(n=u?.right)&&void 0!==n?n:0),bottom:A.bottom+(null!==(s=u?.bottom)&&void 0!==s?s:0),top:0}},r.prototype.getVisibleMultiples=function(){var e=this.options.cartesianSmallMultipleFactory.getFrameCount(),t=this.gridLayout.getScrollPosition();return t?{startIndex:t.startIndex*this.multiplesLayout.columnCount,endIndex:Math.min(t.endIndex*this.multiplesLayout.columnCount,e)}:{startIndex:0,endIndex:0}},r.prototype.calculatePlotArea=function(e){var t,a,i=r.adjustAxesMarginsForShared(e,this.options.axesData.y.switchAxisPosition,Ei(this.options.axesData,void 0));this.gridLayout.updateHeaderMargins(i);var n=null!==(a=null===(t=this.adapterFactory())||void 0===t?void 0:t.getMultiplesSubheader(this.options.warnings))&&void 0!==a?a:(0,f.yA)(this.options.cartesianSmallMultipleFactory.getObjects(),this.layerStyle),s=(0,d.pi)({},e.axesOverflow);if((!this.options.axesData.y.sharedAxis||!this.options.axesData.x.sharedAxis)&&this.sharedAxisLayout.getCoreMultipleData().axesData.valueAxis.show){var o=e.axesMargins;this.options.axesData.y.sharedAxis||(s.left=Math.max(o.left,s.left),s.right=Math.max(o.right,s.right)),this.options.axesData.x.sharedAxis||(s.bottom=Math.max(o.bottom,s.bottom),s.top=Math.max(o.top,s.top))}return this.cellDimensions=this.gridLayout.calculateCellDimensions(s,{titleWrap:n.titleWrap,subheaders:n.titleWrap?this.getFrameDisplayNames():void 0,subheaderFontProperties:n.fontProperties,subheaderLineHeight:n.height,subheaderMargin:n.margins},e),this.cellDimensions.plotAreaViewport},r.prototype.scrollRowsTo=function(e){P.fF.assertValue(this.gridLayout,"grid layout"),this.gridLayout.scrollTo(e)},r.prototype.getFrameDisplayNames=function(){var e=this.getLocalizedString("ListJoin_Separator"),t=this.options.cartesianSmallMultipleFactory.reader.getFrameDisplayNames();return t&&t.map(function(a){return a.join(e)})},r.prototype.renderGridLayout=function(e,t,a,i,n,s,o){var l,u;return(0,d.mG)(this,void 0,void 0,function(){var c,h,g,y,D,x,A,M,O,I,J,ue,xe,ie,re,he,Ee=this;return(0,d.Jh)(this,function(Ze){return c=this.getAxesRenderOptions(s),h=e.getFrameCount(),g=e.getCoreMultiple(),y=e.getShouldResetRowMultipleScrollPosition(),A=s.getCellBackgroundColor,M=s.backgroundTransparency,O=s.cellPadding,I=s.outerPadding,ue=n.show,xe=n.height+(J=n.margins).top+J.bottom,ie={rowCount:D=s.rowCount,columnCount:x=s.columnCount,viewport:t,renderCell:function(tt){return(0,d.mG)(Ee,void 0,void 0,function(){return(0,d.Jh)(this,function($e){return a(tt),[2,new Promise(function(Tt){return Tt()})]})})},renderCellSubheader:function(tt){return(0,d.mG)(Ee,void 0,void 0,function(){return(0,d.Jh)(this,function($e){return i(tt),[2,new Promise(function(Tt){return Tt()})]})})},cellCount:h,headerMargins:(0,f.rX)(),renderHeader:function(){},subheaderShow:ue,subheaderHeight:(null===(l=this.cellDimensions)||void 0===l?void 0:l.maxSubheaderHeight)||xe,subheaderLineHeight:n.height,subheaderPosition:1!==n.vertical?0:1,shouldResetScrollPosition:y,cellPadding:O,outerPadding:I,scrollPadding:5,getCellBackgroundColor:A,backgroundTransparency:M,gridLineSettings:s.gridline,getAllCells:function(){return e.multiples},manageTabIndexOnRowHeaderFooter:o,boldedSubheaders:n.labelBold},this.gridLayout.update(ie),re=Math.ceil(h/x),this.sharedAxisLayout.update(this.options.axisRendererSettings,e.multiples,c,t,x,Math.max(re,D),g),ie.renderHeader=function(Ie){return Ee.sharedAxisLayout.renderAxes(Ie)},ie.headerMargins=this.cellDimensions.headerMargins,ie.subheaderHeight=(null===(u=this.cellDimensions)||void 0===u?void 0:u.maxSubheaderHeight)||xe,this.gridLayout.update(ie),he=_.map(e.multiples,function(Ie){return Ie.getDataPoint()}),[2,this.gridLayout.render({calculatedCellDimensions:this.cellDimensions,dataToBind:he,pointSourceKey:"multiples",visualInstanceId:this.visualInstanceId,formatMode:this.options.formatMode,subSelectionHelper:this.options.subSelectionHelper})]})})},r.prototype.renderGridCellSubheader=function(e,t,a){var i,n=e.element,s=e.index,o=e.viewport;if(!_.isUndefined(s)){var l=1===a.horizontal?"center":2===a.horizontal?"right":"left",u=this.getSubheaderFontProperties(s,a.fontProperties);n.css((0,ae.wB)(u)),n.css({padding:"".concat(a.margins.top,"px ").concat(a.margins.right,"px ").concat(a.margins.bottom,"px ").concat(a.margins.left,"px "),"text-align":l});var c=this.getLocalizedString("ListJoin_Separator"),h=this.options.cartesianSmallMultipleFactory.reader.getDisplayNameForFrame(s),g=h&&h.join("".concat(c));if(n.attr("title",g),n.attr("id","".concat(this.visualInstanceId,"-").concat(s)),n.empty(),a.titleWrap&&(null===(i=this.cellDimensions)||void 0===i?void 0:i.maxSubheaderHeight)>a.height+a.margins.top+a.margins.bottom)for(var y=(0,ae.qk)(u),x=(0,La.ql)(g,y,ne.b.measureSvgTextWidth,o.width,Ja.ji,null,!0),A=0;A<x.length;A++){var M=x[A],O=$("<div/>").text(M);A===x.length-1&&O.addClass("truncate"),n.append(O)}else n.text(g);if(this.interactivityService){var I=t.get(s),W=n.closest(ji.bL.selector);e.styleSubheader(W,I,a.labelBold)}}},r.prototype.getSubheaderFontProperties=function(e,t){var a=this.getColorFromMultipleObjects(e,{objectName:wa.XG,propertyName:"fontColor"});return null==a?t:(0,ae.ED)(t,{color:a})},r.prototype.getColorFromMultipleObjects=function(e,t,a){var i;if(null!=e){var n=null===(i=this.options.cartesianSmallMultipleFactory.reader.getFrameNode(e))||void 0===i?void 0:i.objects;if(n){var s=(0,C.W7)(n,t);if(s)return s}}return a},r.prototype.getAxesRenderOptions=function(e){var t=this;return(0,d.pi)((0,d.pi)({},e),{axesAnimationOptions:this.options.animationSettings,viewMode:this.viewMode,isSmallMultiples:!0,preserveScrollPosition:!0,navigationScrollCallbacks:{scrollTo:function(i){return t.scrollTo(i)},shouldScrollTo:function(i){return t.shouldScrollTo(i)},scrollBy:function(i){return t.scrollBy(i)}}})},r.prototype.renderGridCell=function(e,t,a,i,n,s,o,l,u,c,h){var g,y=t.viewport,D=e.get(t.index);if(2&D.getState())D.getRenderer().attachToElement(t.element,t.viewport);else{var x=(0,f.MI)(t.element,y),A=x.element,M=null===(g=this.cartesianOptions.behaviorFactory)||void 0===g?void 0:g.create();D.initRenderer(this.buildPlotAreaLayout(!0,A,x.clearCatcher,t.element,M))}if(this.interactivityService){var O=t.element.closest(ji.bL.selector);t.bindDataToGridCell(O,D,qi)}this.renderMultiple({multiple:D,viewport:y,background:a,axisZoom:void 0,chartAreaViewport:y,chartAreaMargins:(0,f.rX)(),renderedViewport:y,playAxesRect:i,suppressAnimations:n,resizeMode:s,trimOrdinalDataOnOverflow:o,categoryLoadMoreDataHandler:l,isSharedAxis:!0,isHierarchicalAxis:u,preserveScrollPosition:c,supportsScrolling:!0,axesLayout:this.sharedAxisLayout.calculateAxesLayout(D.index),formatMode:h})},r.IconClassName="cartesianChartResponsiveIcon",r}(),cr=S(67174),hn=function(){function r(e,t,a,i){this.options=e,this.axes=t,this.isPlayAxis=a,this.adapterFactory=i}return r.prototype.init=function(e,t,a,i,n,s,o,l){this.initOptions=e,this.tooltipService=t,this.legend=a,this.axesData=i,this.interactivityService=n,this.layerStyle=s,this.rowLoadMoreDataHandler=o,this.eventManager=l},r.prototype.create=function(e){var t=new On(this.options,this.axes,this.isPlayAxis,this.axesData,this.adapterFactory);return t.init(e,this.initOptions,this.tooltipService,this.legend,this.interactivityService,this.layerStyle,this.rowLoadMoreDataHandler,this.eventManager),t},r}(),vn=function(){function r(e,t,a,i,n){this.legend=e,this.data=t,this.viewport=a,this.interactivity=i,this.showTitlePlaceholder=n}return r.prototype.render=function(e,t,a){if(this.shouldRender()){var i=this.data;this.legend.setPosition(i.position),1===i.dataPoints.length&&!i.grouped&&((i=(0,Ae.ED)(i)).dataPoints=[]),this.legend.drawLegend({data:i,parentViewport:this.viewport,isHierarchicalAxis:e,formatMode:t,onObject:a,titleSliceUid:"".concat("legend","-").concat("title","-titleText"),showTitlePlaceholder:this.showTitlePlaceholder})}},r.prototype.shouldRender=function(){var e;return!(null!==(e=this.interactivity)&&void 0!==e&&e.mobileTileInteractive)},r.prototype.getMargin=function(){return this.legend.getMargins()},r.prototype.getPosition=function(){return this.legend.getPosition()},r.prototype.adjustChartArea=function(e){(0,aa.xz)(e,this.legend)},r.prototype.isRenderedLeftOrRight=function(){return this.legend.isVisible()&&(0,aa.cB)(this.legend.getPosition())},r}(),On=function(){function r(e,t,a,i,n){this.cartesianOptions=e,this.axes=t,this.isPlayAxis=a,this.axesData=i,this.adapterFactory=n,this.viewMode=0,P.fF.assertValue(e,"CartesianChartLayout.cartesianOptions")}return Object.defineProperty(r.prototype,"featureSwitches",{get:function(){return this.cartesianOptions.featureSwitches||{}},enumerable:!1,configurable:!0}),r.prototype.init=function(e,t,a,i,n,s,o,l){var u,c;this.options=t,this.tooltipService=a,this.legend=i,this.interactivityService=n,this.layerStyle=s,this.element=e,this.rowLoadMoreDataHandler=o,this.eventManager=l,this.hostServices=t.host,this.gridContainer=$(document.createElement("div")).appendTo(this.element),this.gridContainer.addClass(r.GridContainerClassName),this.behavior=null===(u=this.cartesianOptions.behaviorFactory)||void 0===u?void 0:u.create(),this.visibilityHelper=(0,fa.q)().visibilityHelper(this.element,r.IconClassName);var h=d3.select(this.element.get(0)),g=this.chartAreaSvg=h.append("svg");g.classed(f.Sq,!0),g.attr("name",this.getCartesianChartName()),g.style("position","absolute"),!(null===(c=t.featureSwitches)||void 0===c)&&c.onObject&&g.attr(We.oy,0),this.behavior&&(this.clearCatcher=(0,j.EX)(g),this.categoricalAxisBehavior=new Aa),this.viewMode=this.hostServices.getViewMode()},r.prototype.getCartesianChartName=function(){var e;switch(this.cartesianOptions.chartType){case 0:case 15:e="LineChart_ToolTip";break;case 1:e="AreaChart_ToolTip";break;case 2:e="StackedAreaChart_ToolTip";break;case 3:e="HundredPercentStackedAreaChart_ToolTip";break;case 4:e="ClusteredColumnChart_ToolTip";break;case 5:e="ColumnChart_ToolTip";break;case 6:e="ClusteredBarChart_ToolTip";break;case 7:e="BarChart_ToolTip";break;case 8:e="HundredPercentStackedBarChart_ToolTip";break;case 9:e="HundredPercentStackedColumnChart_ToolTip";break;case 10:e="RibbonChart_ToolTip";break;case 11:e="ScatterChart_ToolTip";break;case 12:e="WaterfallChart_ToolTip";break;case 13:e="LineClusteredColumnComboChart_ToolTip";break;case 14:e="LineStackedColumnComboChart_ToolTip";break;default:e="Chart"}return this.hostServices.getLocalizedString(e)},r.prototype.render=function(e,t,a,i,n,s,o,l,u,c,h,g,y){return(0,d.mG)(this,void 0,void 0,function(){var D,x,M,O,I,W,J;return(0,d.Jh)(this,function(ue){switch(ue.label){case 0:return this.cartesianSmallMultipleFactory=e,this.viewportScale=t.scale,e.clearRenderingTimeout(),D=e.getCoreMultiple(),(x=D.getData())?(this.axesData=x.axesData,this.formatMode=c,this.isSelected=g,J=this.renderLegend(x.legendData,t,l,c,this.featureSwitches.onObject),O=J[1],this.chartAreaViewport={height:t.height-(M=J[0]).height,width:t.width-M.width,scale:t.scale},I=n.renderContainers(this.chartAreaViewport,this.axesData,this.isPlayAxis()?r.PlayAxisBottomMargin:0,this.featureSwitches),this.legendRenderer.adjustChartArea(n.context),this.positionChartArea(M,O,this.isPlayAxis(),I),W=this.calculatePlayAxisControlLayout(this.chartAreaViewport,M,this.legendRenderer.getPosition(),I),e.isSmallMultiples()?[3,1]:(this.cartesianSmallMultiplesLayout&&(this.cartesianSmallMultiplesLayout.destroy(),this.cartesianSmallMultiplesLayout=void 0),this.setGridContainerVisibility(!1),2&D.getState()||D.initRenderer(this.buildPlotAreaLayout(!1)),this.renderMultiple({multiple:D,viewport:t,background:i,axisZoom:n,chartAreaViewport:this.chartAreaViewport,chartAreaMargins:this.chartAreaMargins,renderedViewport:this.renderedPlotArea,playAxesRect:W,suppressAnimations:o,resizeMode:y,trimOrdinalDataOnOverflow:s,categoryLoadMoreDataHandler:a,isSharedAxis:!1,isHierarchicalAxis:l,preserveScrollPosition:u,supportsScrolling:!0,formatMode:c,isSelected:g,subSelectionHelper:h}),[3,3])):[2];case 1:return this.setGridContainerVisibility(!0),this.adjustGridContainer(this.chartAreaViewport),this.cartesianSmallMultiplesLayout=this.cartesianSmallMultiplesLayout||this.createSmallMultiplesLayout(),[4,this.cartesianSmallMultiplesLayout.render({viewport:this.chartAreaViewport,axisRendererSettings:this.getAxisRendererSettings(this.chartAreaSvg,!0,!1),cartesianSmallMultipleFactory:e,axesData:this.axesData,animationSettings:this.getAnimationOptions(!0),background:i,playAxesRect:W,suppressAnimations:!0,resizeMode:y,isHierarchicalAxis:l,trimOrdinalDataOnOverflow:s,categoryLoadMoreDataHandler:a,warnings:x.warningObjectCollection,formatMode:c,subSelectionHelper:h})];case 2:ue.sent(),ue.label=3;case 3:return this.featureSwitches.onObject&&h.addDirectEditPlaceholderOutlines(),[2]}})})},r.prototype.setGridContainerVisibility=function(e){this.gridContainer.css("display",e?"":"none")},r.prototype.scrollRowsTo=function(e){P.fF.assertValue(this.cartesianSmallMultiplesLayout,"multiple layout"),this.cartesianSmallMultiplesLayout.scrollRowsTo(e)},r.prototype.destroy=function(){this.cartesianSmallMultiplesLayout&&this.cartesianSmallMultiplesLayout.destroy()},r.prototype.positionChartArea=function(e,t,a,i){this.chartAreaMargins=(0,f.rX)(),(0,aa.nM)(t)&&(this.chartAreaMargins.left=e.width),(0,aa.RB)(t)&&(this.chartAreaMargins.top=e.height),a&&(this.chartAreaViewport.height-=r.PlayAxisBottomMargin),i&&(this.chartAreaViewport.height-=i.top+i.bottom,this.chartAreaViewport.width-=i.left+i.right,this.chartAreaMargins.left=(this.chartAreaMargins.left||0)+i.left,this.chartAreaMargins.top=(this.chartAreaMargins.top||0)+i.top),this.chartAreaSvg.attrs({width:this.chartAreaViewport.width,height:this.chartAreaViewport.height}).styles({"margin-top":this.chartAreaMargins.top?"".concat(this.chartAreaMargins.top,"px"):null,"margin-left":this.chartAreaMargins.left?"".concat(this.chartAreaMargins.left,"px"):null})},r.prototype.createSmallMultiplesLayout=function(){var e=this;return new yi(this.gridContainer,this.interactivityService,function(t){return e.hostServices.getLocalizedString(t)},this.rowLoadMoreDataHandler,this.cartesianOptions,this.layerStyle,this.viewMode,this.buildPlotAreaLayout.bind(this),this.renderMultiple.bind(this),this.adapterFactory,this.hostServices.instanceId,this.eventManager)},r.prototype.adjustGridContainer=function(e){this.gridContainer.css({width:e.width,height:e.height}),this.legendRenderer.adjustChartArea(d3.select(this.gridContainer.get(0)))},r.prototype.getVisibleMultiples=function(){return this.cartesianSmallMultiplesLayout?this.cartesianSmallMultiplesLayout.getVisibleMultiples():{startIndex:0,endIndex:1}},r.prototype.isSmallMultiples=function(){var e,t;return null!==(t=null===(e=this.cartesianSmallMultipleFactory)||void 0===e?void 0:e.isSmallMultiples())&&void 0!==t&&t},r.prototype.renderMultiple=function(e){var t=this,a=(0,d.pi)((0,d.pi)({},e),{axesLayout:void 0,labelAnimationOptions:this.getLabelAnimationOptions(e.suppressAnimations),axesAnimationOptions:this.getAnimationOptions(e.suppressAnimations),layerStyle:this.layerStyle,viewMode:this.viewMode,shouldRenderGridLinesOnly:!1,isSmallMultiples:this.isSmallMultiples(),multipleId:e.multiple.getIndex().toString(),navigationScrollCallbacks:{scrollTo:function(o){return t.scrollTo(o)},shouldScrollTo:function(o){return t.shouldScrollTo(o)},scrollBy:function(o){return t.scrollBy(o)}}}),i=e.multiple.getData();e.isSharedAxis&&this.adjustOptionsForSharedAxis(a,e.viewport,e.axesLayout,i);var n=e.multiple.getRenderer();n.axesRenderer.update(i.axesData,i.scrollbarOptions),n.render(e.multiple.layers,i,e.renderedViewport,a,this.viewportScale),this.renderedPlotArea=n.renderedPlotArea},r.prototype.scrollTo=function(e){this.isSmallMultiples()?this.cartesianSmallMultiplesLayout.scrollTo(e):this.cartesianSmallMultipleFactory.scrollTo(e,this.getVisibleMultiples())},r.prototype.shouldScrollTo=function(e){return this.isSmallMultiples()?this.cartesianSmallMultiplesLayout.shouldScrollTo(e):this.cartesianSmallMultipleFactory.shouldScrollTo(e,this.getVisibleMultiples())},r.prototype.scrollBy=function(e){this.isSmallMultiples()?this.cartesianSmallMultiplesLayout.scrollBy(e):this.cartesianSmallMultipleFactory.scrollBy(e,this.getVisibleMultiples())},r.prototype.getLabelAnimationOptions=function(e){return this.isPlayAxis()?cr.Je:this.getAnimationOptions(e)},r.prototype.getAnimationOptions=function(e){var t;return{ease:null===(t=this.cartesianOptions.animator)||void 0===t?void 0:t.getEasing(),duration:(0,sa.Mb)(this.cartesianOptions.animator,e)}},r.prototype.calculatePlotArea=function(e){if(this.isSmallMultiples()){var t=this.cartesianSmallMultiplesLayout.calculatePlotArea(e);return{width:t.width,height:t.height,scale:e.viewport.scale}}var a=e.viewport,i=e.axesMargins,n=a.width-(i.left+i.right);return{width:n-(e.showSeriesLabels?(0,ve.lr)(e.seriesLabelSettings,n):0),height:a.height-(i.top+i.bottom),scale:a.scale}},r.prototype.adjustOptionsForSharedAxis=function(e,t,a,i){i.axesData.y.sharedAxis&&i.axesData.x.sharedAxis?(a.shouldRenderAxis.x=!1,a.shouldRenderAxis.y=!1,a.shouldRenderAxis.y2=!1,a.margin=a.tickLabelMargins.axesOverflow,e.shouldRenderGridLinesOnly=!0):e.shouldRenderGridLinesOnly=!this.axesData.valueAxis.show,a.viewport=t,e.axesLayout=a},r.prototype.getAxisRendererSettings=function(e,t,a){var i=this;return this.axesData.useManagedTabIndex=!1,{axes:this.axes,container:e,cartesianOptions:this.cartesianOptions,data:this.axesData,interactivity:this.options.interactivity,interactivityService:this.interactivityService,behavior:this.categoricalAxisBehavior,calculatePlotArea:function(s){return i.calculatePlotArea(s)},hostServices:this.hostServices,tooltipService:this.tooltipService,eventManager:this.eventManager,formatMode:this.formatMode,isSelected:this.isSelected,onScroll:t?function(n){return i.cartesianSmallMultiplesLayout.onScroll(n)}:void 0,onExtentUpdate:t?function(n){return i.cartesianSmallMultiplesLayout.onExtentUpdate(n)}:void 0,suppressBrush:t?a:void 0}},r.prototype.calculatePlayAxisControlLayout=function(e,t,a,i){var n;if(this.isPlayAxis()){var s=i?.left||0,o=i?.bottom||0;n={left:(0,aa.nM)(a)?t.width:0,top:(0,aa.RB)(a)?t.height+e.height+o:e.height+o,height:r.PlayAxisBottomMargin,width:e.width+s}}return n},r.prototype.renderLegend=function(e,t,a,i,n){return this.legendRenderer=new vn(this.legend,e,t,this.options.interactivity,n&&1===this.viewMode&&this.isSelected),this.legendRenderer.render(a,i,n),[this.legendRenderer.getMargin(),this.legendRenderer.getPosition()]},r.prototype.buildPlotAreaLayout=function(e,t,a,i,n){return t||(t=this.chartAreaSvg),new pa(this.cartesianOptions,this.visibilityHelper,t,new Te(this.getAxisRendererSettings(t,e,e)),i||this.element,this.hostServices,n||this.behavior,this.interactivityService,a||this.clearCatcher,e,this.viewportScale)},r.IconClassName="cartesianChartResponsiveIcon",r.GridContainerClassName="cartesian-grid-container",r.PlayAxisBottomMargin=80,r}(),Dt=S(47287),Ri=S(58691),en=S(34644),ys=function(){function r(e){var t;this.options=e,P.fF.assertValue(e,"options:CartesianVisualConstructorOptions"),this._tooltipsEnabled=null!==(t=e.tooltipsEnabled)&&void 0!==t&&t}return Object.defineProperty(r.prototype,"activeData",{get:function(){var t;return null!==(t=this.clippedData)&&void 0!==t?t:this.data},enumerable:!1,configurable:!0}),r.prototype.hasData=function(){return!!this.data},Object.defineProperty(r.prototype,"featureSwitches",{get:function(){return this.options.featureSwitches||{}},enumerable:!1,configurable:!0}),r.prototype.initData=function(e){P.fF.assertValue(e,"options:CartesianVisualInitDataOptions"),this._currentViewport=e.viewport,this.dataInitOptions=e},r.prototype.initRenderer=function(e){P.fF.assertValue(e?.svg,"options:CartesianVisualInitRendererOptions"),this.renderOptions=e},Object.defineProperty(r.prototype,"tooltipsEnabledSafe",{get:function(){var t,a=null===(t=this.hostService)||void 0===t?void 0:t.tooltips();return this.tooltipsEnabled&&(!a||a?.enabled())},enumerable:!1,configurable:!0}),r.prototype.updateCurrentViewport=function(e){this._currentViewport=e.viewport,this._margin=e.margin},r.prototype.getLegendData=function(){var e;return null===(e=this.data)||void 0===e?void 0:e.legendData},Object.defineProperty(r.prototype,"margin",{get:function(){return this._margin},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"style",{get:function(){return this.dataInitOptions.style},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"animationOptions",{get:function(){return this.dataInitOptions.animation},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"currentViewport",{get:function(){return this._currentViewport},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"hostService",{get:function(){return this.dataInitOptions.host},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tooltipService",{get:function(){var t;return null===(t=this.dataInitOptions.services)||void 0===t?void 0:t.tooltips},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tooltipsEnabled",{get:function(){return this._tooltipsEnabled},set:function(t){this._tooltipsEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"element",{get:function(){return this.dataInitOptions.element},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"cartesianVisualHost",{get:function(){return this.renderOptions.cartesianHost},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"animator",{get:function(){return this.renderOptions.animator},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"svg",{get:function(){return this.renderOptions.svg},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"availableWidth",{get:function(){return Math.max(0,this.currentViewport.width-(this.margin.left+this.margin.right))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"availableHeight",{get:function(){return Math.max(0,this.currentViewport.height-(this.margin.top+this.margin.bottom))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"interactivityService",{get:function(){return this.options.interactivityService},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mobileTileInteractive",{get:function(){var t,a;return null!==(a=null===(t=this.dataInitOptions.interactivity)||void 0===t?void 0:t.mobileTileInteractive)&&void 0!==a&&a},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isVisualInteractive",{get:function(){var t,a;return null!==(a=null===(t=this.dataInitOptions.interactivity)||void 0===t?void 0:t.isVisualInteractive)&&void 0!==a&&a},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dragDataPoint",{get:function(){var t;return null===(t=this.dataInitOptions.interactivity)||void 0===t?void 0:t.dragDataPoint},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isComboChart",{get:function(){return this.options.isComboChart},enumerable:!1,configurable:!0}),r.prototype.isYCategorical=function(){return!1},r.prototype.overrideXAxis=function(e){this.xAxisProperties=e},r.prototype.onClearSelection=function(){var e;null===(e=this.interactivityService)||void 0===e||e.clearSelection()},Object.defineProperty(r.prototype,"localizer",{get:function(){var t=this;return function(a){return t.hostService.getLocalizedString(a)}},enumerable:!1,configurable:!0}),r.prototype.getPreferredPlotArea=function(e){var n=e.outerPaddingRatio,o={height:this.availableHeight,width:this.availableWidth};if(this.options.isScrollable&&!e.isScalar){var l=e.categoryThickness*(e.categoryCount+2*(void 0===n?0:n));this.isYCategorical()?o.height=Math.max(l,o.height):o.width=Math.max(l,o.width)}return o},r}(),Fn=function(r){function e(t){var a=r.call(this,t)||this;return a.options=t,a.viewModelAdapterFactory=t.viewModelAdapterFactory,a}return(0,d.ZT)(e,r),e.prototype.updateCurrentViewport=function(t){r.prototype.updateCurrentViewport.call(this,t),this.updateViewModelAdapterAndData()},e.prototype.updateViewModelAdapterAndData=function(){this.viewModelAdapterFactory&&this.originalData&&(this.viewModelAdapter=this.viewModelAdapterFactory.create({data:this.originalData,dataView:this.dataView,viewport:this.currentViewport}),this.data=this.viewModelAdapter.getData())},e.prototype.addWarnings=function(t){var a;null===(a=this.viewModelAdapter)||void 0===a||a.addWarnings(t)},e}(ys),ms=S(52083),fn=S(7176),Mr=S(44196),Jn=S(43906),tn=S(77558),Ea=S(382),an=S(6444),Ut=S(38859),ao=function(){function r(e){var t;this.options=e,this.categories=[],this.existingTooltips=[],this.fillTransparency=Ut.fl,P.fF.assertValue(e.dataView,"dataView"),P.fF.assertValue(e.style,"style"),this.reader=(0,da.G)(e.dataView,{staticSeriesRoleNames:[X.x.y],colorOptions:{valueRole:X.x.y,visualStyle:e.style},formatStringProp:X.p.general.formatString,errorRangeProp:ua.Qx.errorRange}),this.seriesCount=this.reader.data.hasValues(r.valueRoleName)?this.reader.data.getSeriesCount():void 0,this.isStacked=Ut.C3(e.chartType,this.seriesCount);var a=(t=(0,Pe.xh)(e.dataView.categorical,Dt.gE.general.formatString,void 0)).categories,i=t.categoryFormatter;this.categories=a,this.categoryFormatter=i}return Object.defineProperty(r.prototype,"displayNames",{get:function(){if(!this._displayNames){var t=this.options.hostServices;this._displayNames={negative:t.getLocalizedString("Visual_TotalTooltipNegative"),positive:t.getLocalizedString("Visual_TotalTooltipPositive"),net:t.getLocalizedString("Visual_TotalTooltipNet"),simple:t.getLocalizedString("Visual_Total")}}return this._displayNames},enumerable:!1,configurable:!0}),r.create=function(e){return new r(e)},r.convert=function(e){return new r(e).convert()},Object.defineProperty(r.prototype,"staticObjects",{get:function(){return this.reader.objects.getStaticObjects()},enumerable:!1,configurable:!0}),r.prototype.convert=function(){var e,t,a,i,n=(e=this.options).dataView,s=e.style,o=e.multipleInfo,l=e.chartType,u=e.interactivityService,c=e.hostServices,h=e.isComboChart,g=e.supportsTotalLabels,y=null!==(a=n.metadata)&&void 0!==a?a:null,D=84===l,x=Ut.Ds(l),A=(0,f.Vk)(y,!1),M=(0,f.$K)(A),O=(0,f.qU)(null!==(i=this.options.isScalar)&&void 0!==i&&i,A),J=(0,f.Zo)(n.categorical,O).category.source,ue=Ut.L2(s,x,h,l,this.seriesCount);this.staticObjects&&(0,K.AR)(this.staticObjects.labels,ue,!Ut.hg(l),s,h);var xe=(0,d.pi)((0,d.pi)({},ue),{show:!1});g&&this.staticObjects&&(0,K.ww)(this.staticObjects.totals,xe,!1,s,h),this.totalLabelsSettings=xe,this.color=(0,C.W7)(this.staticObjects,Dt.gE.dataPoint.fill,s.colorPalette.dataColors.getColorByIndex(0).value),this.fillTransparency=(0,C.NA)(this.staticObjects,Dt.gE.dataPoint.fillTransparency,Ut.fl),this.borderSettings=this.readBorderSettings(this.staticObjects,(0,Ut.nO)(s),this.color),this.ribbonBandSettings=(0,d.pi)({show:(0,C.NA)(this.staticObjects,Dt.gE.ribbonBands.show,D)},this.readRibbonSettings(void 0,this.color));var ie=mt(s);this.staticObjects&&((0,K.FJ)(this.staticObjects.seriesLabels,ie,s,h),ie.defaultSeriesWidth=ie.defaultSeriesWidth?-1:null,ie.maxWidthPercentage=ie.defaultSeriesWidth?-1:ie.maxWidthPercentage),this.layout={seriesOrderReversed:(0,C.NA)(this.staticObjects,Dt.gE.layout.seriesOrderReversed,Ut.HQ.seriesOrderReversed),seriesOrderSorted:(0,C.NA)(this.staticObjects,Dt.gE.layout.seriesOrderSorted,!!D||Ut.HQ.seriesOrderSorted),stackedGapSize:(0,C.NA)(this.staticObjects,Dt.gE.layout.stackedGapSize,Ut.HQ.stackedGapSize),stackedGapExplodes:(0,C.NA)(this.staticObjects,Dt.gE.layout.stackedGapExplodes,Ut.HQ.stackedGapExplodes),clusteredGapSize:(0,C.NA)(this.staticObjects,Dt.gE.layout.clusteredGapSize,Ut.HQ.clusteredGapSize),clusteredGapOverlaps:(0,C.NA)(this.staticObjects,Dt.gE.layout.clusteredGapOverlaps,Ut.HQ.clusteredGapOverlaps),clusteredGapOverlapReverse:(0,C.NA)(this.staticObjects,Dt.gE.layout.clusteredGapOverlapReverse,Ut.HQ.clusteredGapOverlapReverse),ribbonGapSize:(0,C.NA)(this.staticObjects,Dt.gE.layout.ribbonGapSize,Ut.HQ.ribbonGapSize)},(h||x)&&(this.layout.stackedGapExplodes=!1),this.isStacked&&(this.layout.stackedGapSize=Math.min(this.layout.stackedGapSize,this.layout.stackedGapExplodes?Ut._f:Ut.nD)),this.isStacked||(this.layout.clusteredGapSize=Math.min(this.layout.clusteredGapSize,this.layout.clusteredGapOverlaps?Ut.jL:Ut.E5)),(!this.isStacked||this.layout.stackedGapSize>0)&&(this.borderSettings.outlineOnly=!1);var Ee=(t=this.getLegend()).legendData,Ze=t.seriesSources,Ie=Ee.dataPoints,tt=this.createDataPoints({legend:Ie,defaultDataLabelsSettings:ue,defaultSeriesSettings:ie,totalLabelsSettings:xe,isScalar:O,isCombo:!!h,categoryMetadata:J,multipleInfo:o}),$e=tt.series,Tt=tt.hasHighlights,Xt=tt.hasDynamicSeries,Yt=Ut.e3(l,$e.length);(null==ue.position||!_.includes(Yt,ue.position))&&(ue.position=Ea.h.auto);for(var wt=[],Kt=0,ha=Ie.length;Kt<ha;Kt++)wt.push(Ze[Kt]);if((this.layout.seriesOrderSorted||this.isStacked&&this.layout.stackedGapSize>0||this.borderSettings.outlineOnly)&&function(r){for(var e=Array.from({length:r.categoryCount},function(){return[]}),t=Array.from({length:r.categoryCount},function(){return[]}),a=Array.from({length:r.categoryCount},function(){return 0}),i=r.isStacked&&r.layout.stackedGapSize>0&&!r.layout.seriesOrderSorted,n=function(D){for(var x=function(O){var I=D[O];if(I.highlight)return"continue";r.hasHighlights&&P.fF.assert(function(){return D[O+1].highlight},"next item must be a highlight data point"),(I.value>=0?e:t)[I.categoryIndex].push({data:I,dataHighlight:r.hasHighlights?D[O+1]:void 0}),I.value&&a[I.categoryIndex]++},A=0;A<D.length;A++)x(A)},s=0,o=r.series;s<o.length;s++)n(o[s].data);function u(y,D){var x;if(!(y.length<1)){y.sort(function(ie,re){var he,Ee;return Math.abs(null!==(he=ie.data.value)&&void 0!==he?he:0)-Math.abs(null!==(Ee=re.data.value)&&void 0!==Ee?Ee:0)}),r.layout.seriesOrderReversed&&y.reverse();for(var A=0,M=0,O=0;M<y.length;M++){var I=y[M],W=I.data,J=I.dataHighlight,ue=A,xe=null!==(x=W.value)&&void 0!==x?x:0;W.indexFromZeroValue=O,J&&(J.indexFromZeroValue=O),xe&&O++,xe>0?(W.position=A+=xe,W.rank=y.length-M,W.seriesPosition=r.layout.seriesOrderReversed?D+M:y.length-M-1):(W.position=A,A+=xe,W.rank=D+M+1,W.seriesPosition=r.layout.seriesOrderReversed?y.length-M:D+M),W.originalPosition=W.position,J&&(J.rank=W.rank,J.seriesPosition=W.seriesPosition,J.position=xe>0?ue+J.value:ue,J.originalPosition=W.position)}}}function c(y){if(!(y.length<1))for(var D=0,x=0;D<y.length;D++){var A=y[D],M=A.data,O=A.dataHighlight;M.indexFromZeroValue=x,O&&(O.indexFromZeroValue=x),M.value&&x++}}for(var h=0;h<r.categoryCount;h++)i?(c(e[h]),c(t[h])):r.layout.seriesOrderSorted&&(u(e[h],t[h].length),u(t[h],e[h].length));var g=function(D){for(var x=a[D],A=0,M=function(xe){xe.countOfPointsInCategory=x,xe.value&&(xe.indexFromBottom=A,A++)},O=t[D].length-1;O>=0;O--)M(t[D][O].data);for(var I=0,W=e[D];I<W.length;I++)M(W[I].data)};for(h=0;h<r.categoryCount;h++)g(h)}({series:$e,hasHighlights:Tt,categoryCount:this.categories.length,layout:this.layout,isStacked:this.isStacked}),this.isStacked&&this.layout.stackedGapSize>0&&this.layout.stackedGapExplodes){for(var ca=0,Ft=0,ea=$e;Ft<ea.length;Ft++)for(var Oa=0,Ha=(ga=ea[Ft]).data;Oa<Ha.length;Oa++)(xa=Ha[Oa]).highlight||(ca=Math.max(xa.valueAbsolute,ca));this.layout.stackedGapExplodeStepSize=ca*this.layout.stackedGapSize/100;for(var $a=0,ui=$e;$a<ui.length;$a++)for(var Xa=0,Pa=(ga=ui[$a]).data;Xa<Pa.length;Xa++){var xa;Ut.o9(xa=Pa[Xa],this.layout)}}for(var qa=1,ta=0;ta<this.categories.length;ta++)for(var Ua=0,ei=$e;Ua<ei.length;Ua++){var ga=ei[Ua];ga?.data[ta]&&(ga.data[ta].posinset=qa++)}if(this.ribbonBandSettings.show&&this.categories.length>=2&&function(r){for(var e=X.p.general.formatString,t=r.dataView.categorical.categories,a=Ut.hg(r.chartType)&&!r.isScalar,i=function(u){var c=r.hasHighlights?_.filter(u.data,function(y){return y.highlight}):u.data;P.fF.assert(function(){return null!==u.ribbonBands},"ribbonBands must be created per each series in advance");for(var h=function(D){var x=c[D],A=c[D+1];if(!x.value||!A.value||x.categoryIndex!==A.categoryIndex-1)return"continue";if(a){var M=x;x=A,A=M}var O=[],I=r.reader.columns.getValueMetadataColumn(Dt.au.y,u.index),W=(0,Ke.BJ)((0,Ke.AD)(t,x.categoryIndex,e)),J=(0,Ke.BJ)((0,Ke.AD)(t,A.categoryIndex,e)),ue=function($e){return"".concat($e," ").concat(u.displayName).concat(r.hasDynamicSeries?" ".concat(I.displayName):"")};O.push({displayName:ue(W),value:(0,Pe.xq)(x.value,I,e,!1)}),O.push({displayName:ue(J),value:(0,Pe.xq)(A.value,I,e,!1)});var xe=A.value-x.value,ie=(0,Pe.xq)(xe,I,e,!1),re=(0,R.Z)("Percentage"),Ee=(0,R.WU)(xe/x.value,re);if(O.push({displayName:"".concat(I.displayName," ").concat(r.hostServices.getLocalizedString("Change")),value:"".concat(ie," (").concat(Ee,")")}),null!=x.rank&&null!=A.rank){O.push({displayName:"".concat(W," ").concat(u.displayName," ").concat(r.hostServices.getLocalizedString("RibbonChart_TooltipRank")),value:"".concat(x.rank)}),O.push({displayName:"".concat(J," ").concat(u.displayName," ").concat(r.hostServices.getLocalizedString("RibbonChart_TooltipRank")),value:"".concat(A.rank)});var Ze=A.rank-x.rank;if(0!==Ze){var Ie=Ze>0?"\u25bc".concat(Ze):"\u25b2".concat(-Ze);O.push({displayName:"".concat(r.hostServices.getLocalizedString("RibbonChart_TooltipRank")," ").concat(r.hostServices.getLocalizedString("Change")),value:Ie})}}u.ribbonBands.dataPoints.push({d1:x,d2:A,tooltipInfo:O})},g=0;g<c.length-1;g++)h(g)},n=0,s=r.series;n<s.length;n++)i(s[n])}({dataView:n,isScalar:O,chartType:l,series:$e,hasHighlights:Tt,hasDynamicSeries:Xt,reader:this.reader,hostServices:c}),u){for(var ci=0,Na=$e;ci<Na.length;ci++)u.applySelectionStateToData((ga=Na[ci]).data);u.applySelectionStateToData(Ee.dataPoints)}return(0,d.pi)((0,d.pi)({},tt),{categories:this.categories,categoryFormatter:this.categoryFormatter,preferredCategoryWidth:M,hasY2Role:(0,F.c5)(n,"Y2"),valuesMetadata:wt,legendData:Ee,categoryMetadata:J,isScalar:O,dataLabelsSettings:ue,seriesLabelSettings:ie,totalLabelsSettings:xe,columnStyle:{fillColor:this.color,fillTransparency:this.fillTransparency,border:this.borderSettings},layout:this.layout,ribbonBands:this.ribbonBandSettings,strokeSettings:(0,ia.kG)(s),dataPointsCount:qa})},r.prototype.createDataPoints=function(e){var t,i,n,s,o,l,u,c,h,g,y,D,x,A,M,a=this,O=(t=this.options).dataView,I=t.chartType,W=t.style,J=t.hostServices,ue=Ut.Ds(I),xe=e.multipleInfo,ie=e.isCombo,re=e.defaultDataLabelsSettings,he=e.defaultSeriesSettings,Ee=e.isScalar,Ze=this.seriesCount,Ie=O.categorical,tt=X.p.general.formatString,$e=null!==(n=null===(i=Ie?.values)||void 0===i?void 0:i.grouped())&&void 0!==n?n:void 0,Tt=this.categories.length,Xt=[],Yt=[],wt=[];if(Ze<1||Tt<1)return{series:Xt,totals:Yt,hasPositive:!1,hasNegative:!1,hasNetPositive:!1,hasNetNegative:!1,valuesMetadataBySeries:[],categoryIdentities:[],hasHighlights:!1,hasDynamicSeries:!1,multipleIdentity:void 0,categoryData:wt};var ha,Kt=Ie.categories;ha=_.isEmpty(Kt)?null:_.last(Kt).source;var ui,Xa,Pa,ca=(0,w.getCategoryValueType)(ha),Ft=(0,Y.v9)(ca),ea=[],ga=[],Oa=[],Ha=[],xa=[],$a=!(!Ie.values||!Ie.values.source);xe&&(Xa=_.first(xe.sources).metadata.queryName,Pa=xe.sources.map(function(gt){return(0,U.Y)(gt.metadata,gt.value,xe.identity)}),ui=(new U.dw).withColumnIdentity(xe.identity,Xa,Pa).createSelectionId());for(var qa=!1,ta=this.reader.data.hasHighlights(),Ua=0;Ua<Ze;Ua++){for(var ei=[],ci=[],Na=0;Na<Tt;Na++){var Ga=this.getValueBySeriesAndCategory(Ua,Na),hi=this.getFormatStringBySeriesAndCategory(Ua,Na);if(ei[Na]={value:Ga,formatString:hi},ta){var ja=this.getHighlightBySeriesAndCategory(Ua,Na),Bi=this.getHighlightFormatStringBySeriesAndCategory(Ua,Na);ci[Na]={value:ja,formatString:Bi},null!=Ga&&null!=ja&&!(Ga>=0&&ja>=0&&(0,G.bA)(Ga,ja)||Ga<=0&&ja<=0&&(0,G.bl)(Ga,ja))&&(qa=!0)}}ea.push(ei),ta&&ga.push(ci)}qa&&!Ut.G1(I,Ze)&&(qa=!1,ta=!1,ea=ga);for(var hr=ue?Ss(Tt,Ze,function(gt,Sa){return ea[gt][Sa].value}):[],ri=re.fontProperties.color,Ii=this.totalLabelsSettings.fontProperties.color,Li=function(Sa){var ti=Sa,Zt=qt.layout.seriesOrderReversed?Ze-Sa-1:Sa,Ki=qt.reader.labels.dynamicLabelReader.areDynamicValueLabelsEnabled(null===(s=qt.options.featureSwitches)||void 0===s?void 0:s.labelEnhancementsM0,Zt,ta),ma=[],Fa=e.legend[Zt],vi=void 0,ba=(0,Ae.ED)(he);if(qt.reader.data.hasSeries()||ie){var Ci,ai=(Ci=ie&&!qt.reader.data.hasSeries()?qt.reader.objects.getValueMetadataObjects(r.valueRoleName,Zt):qt.reader.objects.getSeriesDataObjects(Zt))&&Ci.labels,Mi=Ci&&Ci.seriesLabels;(vi=(0,Ae.ED)(re)).show=re.show&&(null===(o=re.showByDefault)||void 0===o||o),ai&&(0,K.AR)(ai,vi,void 0,W,ie),ba.show=he.show&&(null===(l=he.showByDefault)||void 0===l||l),Mi&&(0,K.FJ)(Mi,ba,W,ie)}var ar=qt.reader.columns.getValueColumnBySeries(Zt),Ba=Ha[Zt]=qt.reader.columns.getValueMetadataColumn(r.valueRoleName,Zt),ir=_.findIndex(Ha,Ba);-1!==ir&&(xa[ir]?xa[ir].usedInSeriesIndices.push(Zt):xa[ir]={metadataColumn:Ba,usedInSeriesIndices:[Zt],valueSelector:(new U.dw).withMeasure(Ba.queryName,ar).createSelectionId()});var va=(0,fn.nC)(qt.isStacked?{}:Ba.objects,W,Fa.marker.color,Zt,(0,d.pi)((0,d.pi)({},re),{show:!1}),{isCombo:ie,hideBand:!0,valueAxisHorizontal:Ut.hg(I),staticObjects:qt.staticObjects}),xr=va.hasUncertainty,kr=(0,d.pi)((0,d.pi)({displayName:Fa.label,key:"series".concat(Zt),index:Zt,data:ma,identity:Fa.identity,columnStyle:{fillColor:Fa.marker.color,fillTransparency:Fa.marker.transparency,border:Fa.marker.stroke}},qt.ribbonBandSettings.show&&{ribbonBands:(0,d.pi)((0,d.pi)({},qt.readRibbonSettings(Zt,Fa.marker.color)),{dataPoints:[]})}),{labelSettings:vi,uncertainty:va,measureDisplayName:Ba.displayName,type:Ba.type,seriesLabelSettings:ba});Xt.push(kr);for(var br=(0,ms.yj)(Ie),Ur=(0,ms.Rr)(Ie),si=(0,R.Z)("Percentage"),Cr=!1,ln=function(Qt){var zi,Er,un=(zi=ea[Zt][Qt]).value,pi=zi.formatString,Oi=(0,Y.eT)(un);if(null==Oi&&ti>0)return"continue";var Xi=qt.categories[Qt];if(Ft&&null!=Xi&&!(Xi instanceof Date))return"continue";var Zi,Ar=void 0;if(Xi instanceof Date?(P.fF.assert(function(){return Ft},"Metadata type and value type must match"),P.fF.assert(function(){return(0,an.M4)(Xi)},"originalCategoryValue"),Ar=Xi.epochTimeStamp):Ar=Xi,Ee&&(null==Ar||isNaN(Ar)))return"continue";xr&&(Zi=(0,fn.PT)(qt.reader.data,Qt,Zt,Oi));var jr=Oi<0;null!==(u=Yt[Qt])&&void 0!==u||(Yt[Qt]={positive:0,positiveCount:0,negative:0,negativeCount:0,net:0,categoryValue:Ar,categoryIndex:Qt,dynamicFormatString:pi}),null!==(c=(A=Yt[Qt]).dynamicFormatString)&&void 0!==c||(A.dynamicFormatString=pi);var Yr=(0,Bt.AO)({defaultColor:Ii,categoricalDataReader:qt.reader,categoryIndex:Qt,seriesIndex:ti}),Xn=(0,Bt.B8)(Yr)?Yr.color:ri;qt.totalLabelsSettings.fontProperties=(0,Bt.Vv)(Xn,qt.totalLabelsSettings.fontProperties),Yt[Qt].labelFill=Yr.color;var Kr=null==Oi?null:Oi*(ue?hr[Qt][jr?"neg":"pos"]:1),Fi=Math.abs(Kr),Dr=void 0;jr?(Dr=Yt[Qt].negative,isNaN(Fi)||(Yt[Qt].negative-=Fi,Yt[Qt].negativeCount++,Yt[Qt].net-=Fi)):(isNaN(Fi)||(Yt[Qt].positive+=Fi,Yt[Qt].positiveCount++,Yt[Qt].net+=Fi),Dr=Yt[Qt].positive);var Zn=$e&&$e.length>Zt&&$e[Zt].values?$e[Zt]:null,rr=_.isEmpty(Ie.categories)?null:Ie.categories[0],Dn=(Er=r.createIdentities(Ie,rr,Qt,Zn,qt.reader.columns.getValueColumn(r.valueRoleName,Zt),Ba,xe,Xa,Pa)).identity,Jt=Er.identityKey;null!==(h=Oa[Qt])&&void 0!==h||(Oa[Qt]=function(){return(0,f.MH)(Qt,rr)});var Vi,Rr,fr,cn,Wi=0===br?null:Ur;ta&&(Vi=qt.reader.data.getHighlight(r.valueRoleName,Qt,Zt),Rr=qt.reader.data.getHighlightFormatString(r.valueRoleName,Qt,Zt),cn=Vi,null!==Vi&&(xr&&(fr=(0,fn.PT)(qt.reader.data,Qt,Zt,Vi,!0)),ue&&(Vi*=hr[Qt][jr?"neg":"pos"])));var ki,Ni=rr?(0,Ke.AD)(O.categorical.categories,Qt,tt):void 0;qt.options.tooltipsEnabled&&(ki=new Ca.E4).withLazyValues(function(){var or,oi=[];if(xe){var dn=(0,Ca.Q6)(xe.sources.map(function(Tn){return Tn.metadata}),xe.sources.map(function(Tn){return Tn.value}),!0,(0,Jn.F)(tt));dn&&oi.push(dn())}rr&&oi.push((0,Ke.bR)(Ni)),$a&&(!rr||rr.source!==Ie.values.source)&&oi.push({displayName:Ie.values.source.displayName,value:(0,Pe.xq)($e[Zt].name,Ie.values.source,tt)});var Ir=function(gs){return(0,Pe.xq)(gs,Ba,tt,!1,pi)};if(null!=Oi){var Pn=Ir(Oi),Mn=ue?"".concat(Pn," (").concat((0,R.WU)(Fi,si),")"):Pn,Jr={displayName:Ba.displayName,value:Mn},$r=va.tooltips;if(xr&&!ta&&$r.show&&$r.format===tn.K.range){var Nr=(0,Mr.kS)(Zi,Kr,va,Ir,J,{overrideDisplayName:Ba.displayName});P.fF.assert(function(){return void 0===Nr||1===Nr.length},"getUncertaintyTooltipItems() with 'range' format should return exactly one item"),_.isEmpty(Nr)||(Jr=Nr[0])}oi.push(Jr)}if(ta){var qr=void 0;if(null!==cn&&null!==Vi){var Hi=(0,R.WU)(Vi,si),Lr=(0,Pe.xq)(cn,Ba,tt,!1,Rr);qr=ue?"".concat(Lr," (").concat(Hi,")"):Lr}if(Ir=function(gs){return(0,Pe.xq)(gs,Ba,tt,!1,Rr)},qr)if($r=va.tooltips,xr&&$r.show&&$r.format===tn.K.range){var Ji=(0,Mr.kS)(Zi,Kr,va,Ir,J,{overrideDisplayName:Ca.I6.localizationOptions.highlightedValueDisplayName});P.fF.assert(function(){return void 0===Ji||1===Ji.length},"getUncertaintyTooltipItems() with 'range' format should return exactly one item"),_.isEmpty(Ji)?oi.push({displayName:Ca.I6.localizationOptions.highlightedValueDisplayName,value:qr}):oi.push(Ji[0])}else oi.push({displayName:Ca.I6.localizationOptions.highlightedValueDisplayName,value:qr})}if(xr&&va.tooltips.format!==tn.K.range){var gr=ta?fr:Zi;gr&&oi.push.apply(oi,(0,Mr.kS)(gr,Oi,va,Ir,J,{hideMarker:!0}))}Wi&&null!=Wi.values[Qt]&&oi.push({displayName:Wi.source.displayName,value:(0,Pe.xq)(Wi.values[Qt],Wi.source,tt,!1,(0,C.NA)(null===(or=Wi.objects)||void 0===or?void 0:or[Qt],tt))}),(0,Ca.VT)(a.reader,oi,Qt,$a?Zt:void 0,tt);var lr=a.getTotalTooltip(Zt,Qt,jr,Yt,Ha,tt);return lr&&oi.push(lr),oi});var _r=null!==(g=Xt[ti].labelSettings)&&void 0!==g?g:re,Xr={defaultColor:ri,seriesColor:vi?.fontProperties.color,categoricalDataReader:qt.reader,categoryIndex:Qt,seriesIndex:Zt},nr=(0,Bt.t$)(Xr),sr={dataPointLabelSettings:_r,defaultLabelSettings:re,categoricalDataReader:qt.reader,categoryIndex:Qt,seriesIndex:Zt,hasHighlights:ta,dynamicLabelsEnabledForSeries:Ki,featureSwitches:qt.options.featureSwitches},Zr=(0,Bt.Xc)((0,d.pi)((0,d.pi)({},sr),{dataLabelFillColorOptions:Xr,detailPropertyId:Dt.mi.labels.dynamicLabelDetail,titlePropertyId:Dt.mi.labels.dynamicLabelTitle})),Qr=(0,Bt.tI)((0,d.pi)((0,d.pi)({},sr),{valuePropertyId:Dt.mi.labels.dynamicLabelValue}));if(!Cr&&null!==(y=qt.options.featureSwitches)&&void 0!==y&&y.labelEnhancementsM0&&!_.isEmpty(Zr)){var Qi=Zr&&(null===(D=Zr.find(function(or){return"Detail"===or.role}))||void 0===D?void 0:D.dynamicLabel),wn=Qi?.enabled&&null!=Qi?.value;if(wn){var Qn=Ut.Ds(I);(0,Bt.hY)(J,Qn,Qr?.enabled,wn,_r)}Cr=!0}var wr=(0,d.pi)({categoryValue:Ar,position:Dr,categoryIndex:Qt,seriesIndex:ti,seriesPosition:Zt,labelSettings:_r,columnStyle:function(){if(a.reader.columns.hasDynamicSeries()||a.reader.columns.hasStaticSeries()||!a.reader.columns.hasCategories()||null==Qt)return kr.columnStyle;var or=a.reader.colors.createBySeries(Zt,Qt),oi=a.reader.objects.getCategoryDataObjects(Qt);return{fillColor:or,fillTransparency:(0,C.NA)(oi,Dt.gE.dataPoint.fillTransparency,a.fillTransparency),border:a.readBorderSettings(oi,a.borderSettings,or)}}(),selected:!1,originalValue:Oi,originalPosition:Dr,labelFill:nr.color,dynamicLabelValue:Qr,value:Kr,valueAbsolute:Fi,indexFromZeroValue:qt.isStacked?ti:0,uncertainty:Zi,identity:Dn,key:Jt,labelFormatString:pi||Ba.format},qt.options.featureSwitches.labelEnhancementsM0&&{appendedLabelContents:Zr,labelDataPointContainerEnabled:!0});if(null!==(x=wt[Qt])&&void 0!==x||(wt[Qt]=Vt(wr,Ni)),wt[Qt]&&((M=wt[Qt]).hasData||(M.hasData=null!=wr.value)),ma.push((0,d.pi)({get tooltipInfo(){return ki?.getTooltipItems()},get formattedTooltip(){return ki?.getFormattedTooltipItems()}},wr)),ta){var Ln=null!==Vi?Math.abs(Vi):0,pr=U.l0.createWithHighlight(Dn);ma.push((0,d.pi)((0,d.pi)({get tooltipInfo(){return ki?.getTooltipItems()},get formattedTooltip(){return ki&&ki.getFormattedTooltipItems()}},wr),{value:Vi,position:io(Dr,Kr,Vi,Fi,Ln),valueAbsolute:Ln,uncertainty:fr,highlight:!0,drawThinner:qa,identity:pr,key:pr.getKey(),pairKey:Jt,labelFormatString:Rr||Ba.format}))}},Gr=0;Gr<Tt;Gr++)ln(Gr)},qt=this,Si=0;Si<Ze;Si++)Li(Si);for(var xi=!1,Ya=!1,bi=!1,Pi=!1,vr=0,ni=Yt;vr<ni.length;vr++){var we=ni[vr];we&&(xi||(xi=we.positive>0),Ya||(Ya=we.negative<0),bi||(bi=we.net>0),Pi||(Pi=we.net<0))}return this.hasNetPositive=bi,this.hasNetNegative=Pi,{series:Xt,totals:Yt,hasPositive:xi,hasNegative:Ya,hasNetPositive:bi,hasNetNegative:Pi,valuesMetadataBySeries:xa,categoryIdentities:Oa,hasHighlights:ta,hasDynamicSeries:$a,multipleIdentity:ui,categoryData:wt}},r.createIdentities=function(e,t,a,i,n,s,o,l,u){var c,h=e.originalCategories||[t],g=U.dw.builder().withCategory(h,a,null===(c=t?.source)||void 0===c?void 0:c.queryName,!0).withSeries(e.values,i,!0).withMeasure(s.queryName,n,a);o&&(g=g.withColumnIdentity(o.identity,l,u));var y=g.createSelectionId();return{identity:y,identityKey:y.getKey()}},r.prototype.getTotalTooltip=function(e,t,a,i,n,s){var o,l,u,c,h,g;if(this.options.tooltipsEnabled&&this.options.supportsTotalLabels&&this.totalLabelsSettings.show){if(null!==(o=(c=this.existingTooltips)[t])&&void 0!==o||(c[t]={}),this.totalLabelsSettings.showPositiveAndNegative){var y=a?"negative":"positive";return null!==(l=(h=this.existingTooltips[t])[y])&&void 0!==l||(h[y]={displayName:this.displayNames[y],value:(0,Pe.xq)(i[t][y],n[e],s,!1)}),this.existingTooltips[t][y]}return null!==(u=(g=this.existingTooltips[t]).net)&&void 0!==u||(g.net={displayName:this.hasNetPositive&&this.hasNetNegative?this.displayNames.net:this.displayNames.simple,value:(0,Pe.xq)(i[t].net,n[e],s,!1,i[t].dynamicFormatString)}),this.existingTooltips[t].net}},r.prototype.readRibbonSettings=function(e,t){var a=void 0===e,i=a?this.staticObjects:this.reader.objects.getSeriesDataObjects(e),n=a?Ut.bS(this.options.style):this.ribbonBandSettings,s=(0,C.W7)(i,Dt.gE.ribbonBands.fillColor,n.fillColor),o=(0,C.NA)(i,Dt.gE.ribbonBands.fillMatchColor,n.fillMatchColor);return o&&t&&(s=t),{fillColor:s,fillMatchColor:o,fillTransparency:(0,C.NA)(i,Dt.gE.ribbonBands.fillTransparency,n.fillTransparency),border:(0,Za.QI)(i,{strokeShow:Dt.gE.ribbonBands.borderShow,strokeWidth:Dt.gE.ribbonBands.borderSize,strokeColor:Dt.gE.ribbonBands.borderColor,strokeColorMatch:Dt.gE.ribbonBands.borderColorMatchFill,strokeTransparency:Dt.gE.ribbonBands.borderTransparency},n.border,s)}},r.prototype.readBorderSettings=function(e,t,a){var i=(0,Za.QI)(e,{strokeShow:Dt.gE.dataPoint.borderShow,strokeWidth:Dt.gE.dataPoint.borderSize,strokeColor:Dt.gE.dataPoint.borderColor,strokeColorMatch:Dt.gE.dataPoint.borderColorMatchFill,strokeTransparency:Dt.gE.dataPoint.borderTransparency},t,a);return i.outlineOnly=(0,C.NA)(e,Dt.gE.dataPoint.borderOutlineOnly,t?.outlineOnly),i},r.prototype.getLegend=function(){var e,t,a,i,n,h,s=[],o=[],l=[],u=!1,c=null===(e=this.options.dataView)||void 0===e?void 0:e.categorical;if(c?.values){for(var g=this.reader.columns.getSeriesCount(X.x.y),y=0;y<g;y++){var D=this.reader.columns.getValueMetadataColumnBySeries(y),x=this.reader.objects.getSeriesDataObjects(y);o.push(D),l.push(x);var A=null!==(t=this.reader.colors.createBySeries(y))&&void 0!==t?t:this.color;s.push({marker:{show:!0,shape:Ta.ZO.circle,color:A,transparency:(0,C.NA)(x,Dt.gE.dataPoint.fillTransparency,this.fillTransparency),stroke:this.readBorderSettings(x,this.borderSettings,A)},label:this.reader.data.hasSeries()?(0,R.WU)(this.reader.data.getSeriesName(y),this.reader.objects.getSeriesFormatString(y)):(0,Pe.TO)(D,c.values,X.p.general.formatString),identity:this.reader.data.hasSeries()?this.reader.identities.createForSeries(y):this.reader.identities.createForValue(0),selected:!1,index:y}),void 0!==D.groupName&&(u=!0)}h=null!==(n=null===(i=null===(a=c.values)||void 0===a?void 0:a.source)||void 0===i?void 0:i.displayName)&&void 0!==n?n:""}return{legendData:(0,m.RS)(this.staticObjects,s,!0,h,u,this.options.style,void 0),seriesSources:o,seriesObjects:l}},r.prototype.getValueBySeriesAndCategory=function(e,t){return this.reader.data.getValue("Y",t,e)},r.prototype.getHighlightBySeriesAndCategory=function(e,t){return this.reader.data.getHighlight("Y",t,e)},r.prototype.getFormatStringBySeriesAndCategory=function(e,t){return this.reader.data.getFormatString("Y",t,e)},r.prototype.getHighlightFormatStringBySeriesAndCategory=function(e,t){return this.reader.data.getHighlightFormatString("Y",t,e)},r.valueRoleName=X.x.y,r}();function io(r,e,t,a,i){return t>0?r-(a-i):(null===t||0===t)&&e>0?r-a:r}function Ss(r,e,t){for(var a=[],i=0;i<r;i++){for(var n=0,s=0,o=0;o<e;o++){var l=(0,Y.eT)(t(o,i));l>0?n+=l:s-=l}var u=s+n;a[i]={pos:n?n/u/n:1,neg:s?s/u/s:1}}return a}var xs=S(84741),Tr=S(3665),Or=S(23465),Ka=S(57622),$n=S(61617),pn=S(33024),bs=S(16122),gn=S(96915),qn=S(91059),so=0,oo=25;function lo(r){return{type:4,card:[co.call(this,r.categoryAxisData),uo.call(this,r.categoryAxisData),ho.call(this),vo.call(this),fo.call(this)].filter(function(e){return e})}}function Cs(r,e,t,a){var i=this,n=this.originalData;if(n&&this.dataView){var s=n.series.length,o=this.isClustered&&s>1,l=Dt.gE.layout;r.addGroup("layout",function(u){u.withDisplayName("Layout"),a?u.withDisabled(a,"perCategory"===t?"Visual_DisabledReason_AllCategoriesOnly_Plural":"Visual_DisabledReason_AllSeriesOnly_Plural"):u.addSimpleSlice("seriesOrderReversed",new Se.bd({descriptor:l.seriesOrderReversed,value:n.layout.seriesOrderReversed}).build(),function(c){return c.withDisabled(s<2,"Visual_DisabledReason_MultiSeriesOnly_Singular")}).addSimpleSlice("seriesOrderSorted",new Se.bd({descriptor:l.seriesOrderSorted,value:n.layout.seriesOrderSorted}).build(),function(c){return c.withDisabled(s<2,"Visual_DisabledReason_MultiSeriesOnly_Singular")}).addSimpleSlice("innerPadding",(0,ya.Gf)(e,i.localizer)).addSimpleSlice("stackedGapSize",new Se.JN({descriptor:l.stackedGapSize,value:n.layout.stackedGapSize,options:{minValue:{type:0,value:Ut.fX},maxValue:{type:1,value:n.layout.stackedGapExplodes?Ut._f:Ut.nD},unitSymbol:n.layout.stackedGapExplodes?pn.t2:pn.e_},localize:i.localizer}).build(),function(c){return c.withHidden(i.isClustered).withDisabled(s<2,"Visual_DisabledReason_MultiSeriesOnly_Singular")}).addSimpleSlice("stackedGapExplodes",new Se.bd({descriptor:l.stackedGapExplodes,value:n.layout.stackedGapExplodes}).build(),function(c){return c.withHidden(!i.supportsStackedGapExplode()).withCustomDescription("Visual_Spacing_Explode_Description_".concat(i.isColumn?"Columns":"Bars"))}).addSimpleSlice("clusteredGapSize",new Se.JN({descriptor:l.clusteredGapSize,value:n.layout.clusteredGapSize,options:{minValue:{type:0,value:0},maxValue:{type:1,value:n.layout.clusteredGapOverlaps?Ut.jL:Ut.E5},unitSymbol:pn.t2},localize:i.localizer}).build(),function(c){return c.withHidden(!o)}).addSimpleSlice("clusteredGapOverlaps",new Se.bd({descriptor:l.clusteredGapOverlaps,value:n.layout.clusteredGapOverlaps}).build(),function(c){return c.withHidden(!o)}).addSimpleSlice("clusteredGapOverlapReverse",new Se.bd({descriptor:l.clusteredGapOverlapReverse,value:n.layout.clusteredGapOverlapReverse}).build(),function(c){return c.withHidden(!o).withDisabled(!n.layout.clusteredGapOverlaps)})}).build()}}function uo(){var r=this;if(this.dataView&&!this.isClustered&&!this.isComboChart){var e=this.originalData;if(e&&0!==e.series.length){var a=Dt.gE.ribbonBands,i=new Se.CQ(new Se.lg("ribbonChart"),"RibbonChart",[a.show,a.fillMatchColor,a.fillColor,a.fillTransparency,a.borderShow,a.borderColor,a.borderColorMatchFill,a.borderTransparency,a.borderSize,Dt.gE.layout.ribbonGapSize],this.localizer),n=function(o,l){o.addGroup("layout",function(u){u.withDisplayName("Layout"),l?u.withDisabled(!0,"Visual_DisabledReason_AllSeriesOnly_Plural"):u.addSimpleSlice("ribbonGapSize",new Se.JN({descriptor:Dt.gE.layout.ribbonGapSize,value:e.layout.ribbonGapSize,options:{minValue:{type:0,value:so},maxValue:{type:1,value:oo},unitSymbol:pn.t2},localize:r.localizer}).build())})};return i.withDescription("RibbonChart_Description").addTopLevelToggle("show",function(){var s;return new Se.bd({descriptor:a.show,value:null===(s=e.ribbonBands)||void 0===s?void 0:s.show}).build()}),this.hasRibbonBands&&e.ribbonBands&&i.addGroup("applySettingsTo",function(s){s.withContainerDisabled(!1).withDisplayName("Apply_Settings_To").withCollapsible(!1),s.addContainer("series",function(o){o.withDisplayName("Series"),o.addContainerItem("all",r.localizer("All"),function(g){var y={containerBuilder:g,props:a,selector:null,panelGroupType:"allSeries"};Vn.call(r,y,e.ribbonBands),kn.call(r,y,e.ribbonBands.border,"Visual_MatchRibbonColor",!0),n(g)});for(var l=function(y){P.fF.assert(function(){return null!=y.ribbonBands},"series must have ribbonBands for ribbon charts"),o.addContainerItem(y.displayName,y.displayName,function(D){var x={containerBuilder:D,props:a,selector:(0,He.fd)(y.identity.getSelector()),panelGroupType:"perSeries"};Vn.call(r,x,y.ribbonBands),kn.call(r,x,y.ribbonBands.border,"Visual_MatchRibbonColor",!0),n(D,!0)})},u=0,c=e.series;u<c.length;u++)l(c[u])})}),i.build()}}}function co(r){var e=this,t=this.originalData;if(t&&this.dataView){var a=t.series.length;if(0!==a){var i=Dt.gE.dataPoint,n=Dt.gE.layout;return new Se.CQ(new Se.lg("bars"),this.isColumn?"Role_DisplayName_Columns":"Visual_Bars_Title",[i.fill,i.fillTransparency,i.borderShow,i.borderColor,i.borderColorMatchFill,i.borderTransparency,i.borderSize,i.borderOutlineOnly,n.seriesOrderReversed,n.seriesOrderSorted,n.stackedGapSize,n.stackedGapExplodes,n.clusteredGapSize,n.clusteredGapOverlaps,n.clusteredGapOverlapReverse,X.p.categoryAxis.innerPadding],this.localizer).addGroup("applySettingsTo",function(s){return s.withContainerDisabled(!1).withDisplayName("Apply_Settings_To").withCollapsible(!1).addContainer("series",function(o){o.withDisplayName(a>1?"Series":"Visual_Categories");var l=e.isColumn?"Visual_MatchColumnColor":"Visual_MatchBarColor";o.addContainerItem("all",e.localizer("All"),function(O){var I={containerBuilder:O,props:i,selector:null,panelGroupType:1===t.series.length?"allCategories":"allSeries"};Vn.call(e,I,e.data.columnStyle),kn.call(e,I,t.columnStyle.border,l),Cs.call(e,O,r,I.panelGroupType,!1)});var u=t.series,c="perSeries";if(1===u.length){var h=t.series[0],g=h.data.slice(0,ya.Rl);if(g.length<2)return;var y=ra(g,t);u=_.map(g,function(O,I){var W,J;return(0,d.pi)((0,d.pi)({},h),{identity:(null===(J=null===(W=t.categoryIdentities)||void 0===W?void 0:W[O.categoryIndex])||void 0===J?void 0:J.call(W))||O.identity,columnStyle:O.columnStyle,displayName:y[I]})}),c="perCategory"}for(var D=function(I){o.addContainerItem(I.displayName,I.displayName,function(W){var J=(0,He.fd)(I.identity.getSelector());if(J){"perCategory"===c&&t.multipleIdentity&&(J=(0,He.d9)(J),P.fF.assert(function(){return!!J.data},"expect categories to have some data identity"),J.data.unshift((0,qn.Yp)([Dt.au.rows])));var ue={containerBuilder:W,props:i,selector:J,panelGroupType:c};Vn.call(e,ue,I.columnStyle),kn.call(e,ue,I.columnStyle.border,l),Cs.call(e,W,r,c,!0)}})},x=0,A=u;x<A.length;x++)D(A[x])})}).build()}}}function Vn(r,e){var t=this,i=r.props,n=r.selector,s=r.panelGroupType,o=null==e.fillMatchColor||null==i.fillMatchColor,l="allCategories"===s&&o,u="allSeries"===s&&o;r.containerBuilder.addGroup("colors",function(c){return c.withDisplayName("Generic_Color").addSimpleSlice("fillMatchColor",new Se.bd({descriptor:(0,d.pi)((0,d.pi)({},i.fillMatchColor),{selector:n}),value:e.fillMatchColor}).build(),function(h){return h.withHidden(o)}).addSimpleSlice("fillColor",new Se.BT({descriptor:(0,d.pi)((0,d.pi)((0,d.pi)((0,d.pi)({},i.fill||i.fillColor),{selector:(0,d.pi)((0,d.pi)({},n),l&&{data:[(0,gn.Ue)(1)]})}),l&&{altConstantValueSelector:null}),{instanceKind:l?3:1}),value:{value:e.fillColor}}).build(),function(h){return h.withDisabled(u||e.fillMatchColor,u?"Visual_Color_AllSeries_DisabledReason":"")}).addSimpleSlice("fillTransparency",Se.JN.getTransparencySliderBuilder({descriptor:(0,d.pi)((0,d.pi)({},i.fillTransparency),{selector:n}),value:e.fillTransparency,localize:t.localizer}).build())})}function kn(r,e,t,a){var i=this,s=r.props,o=r.selector;void 0===a&&(a=!1),r.containerBuilder.addGroup("border",function(l){l.withDisplayName("Visual_Border").addSlices((0,Za.Iq)({containerItemBuilder:l,descriptors:{strokeShow:s.borderShow,strokeColorMatch:s.borderColorMatchFill,strokeColor:s.borderColor,strokeTransparency:s.borderTransparency,strokeWidth:s.borderSize},selector:o,strokeData:e,featureSwitches:i.featureSwitches,localize:i.localizer}).map(function(u){return(0,$n.cd)(u.getSimpleControlDescriptor(),s.borderColorMatchFill)&&u.withCustomDisplayName(t),u.build()})),a||l.addSimpleSlice("borderOutlineOnly",new Se.bd({descriptor:(0,d.pi)((0,d.pi)({},s.borderOutlineOnly),{selector:o}),value:e.outlineOnly}).build(),function(u){var c;return u.withHidden(i.isClustered||null!==o).withDisabled((null===(c=i.originalData)||void 0===c?void 0:c.layout.stackedGapSize)>0,"Visual_Border_OutlineOnly_DisabledReason")})}).build()}function ho(){var e,r=this,t=this.originalData,a=t.dataLabelsSettings,i=t.series.length,n=i>1||!t.categoryMetadata||this.isComboChart,s=t.dataLabelsSettings.position!==Ea.h.outsideEnd,o=Ut.e3(this.columnChartType,i);a.position&&o.indexOf(a.position)<0&&(a.position=Ea.h.auto);var l=(0,d.pi)((0,d.pi)({},Dt.mi.labels),{position:Dt.mi.labels.labelPosition,precision:Dt.mi.labels.labelPrecision,displayUnits:Dt.mi.labels.labelDisplayUnits,labelBackgroundColor:Dt.mi.labels.backgroundColor,labelBackgroundTransparency:Dt.mi.labels.backgroundTransparency,showDynamicLabels:Dt.mi.labels.showDynamicLabels,dynamicLabelValue:Dt.mi.labels.dynamicLabelValue});this.isColumn||delete l.labelOrientation;var D,u=new Se.CQ(new Se.lg("labels"),"Visual_DataPointsLabels",l,this.localizer),c=(0,Bt.DU)(this.featureSwitches,t.hasDynamicSeries,n,i,this.isComboChart,!0),h=As.call(this,void 0,a,null,n,o,s,c),g=rn.call(this,!1),y={cardBuilder:u,dataLabelsProps:l,featureSwitches:this.featureSwitches,includeAltConstantValueSelector:!0,hostServices:this.hostService,options:h,individualSelector:g,showEnhancedLabelsFormattingOptions:!0,instanceId:"all"};if(null!==(e=this.featureSwitches)&&void 0!==e&&e.labelEnhancementsM0&&this.dataView){var x=(D=(0,da.y)(this.dataView)).labels.dynamicLabelReader.getLabelFieldSourceTypes();Object.assign(y,{valueFieldSourceType:x.valueFieldSourceType,detailFieldSourceType:x.detailFieldSourceType,titleFieldSourceType:x.titleFieldSourceType,valueLabelPickerFallbackExpr:(0,Bt.WA)(t.valuesMetadataBySeries,i,t.hasDynamicSeries),dataLabelPickerSeriesType:(0,Bt.Nb)(i,t.hasDynamicSeries,this.isComboChart)})}return l.show&&u.addTopLevelToggle("show",function(){return new Se.bd({descriptor:l.show,value:h.dataLabelsSettings.show}).build()}),u.addGroup("applySettingsTo",function(I){I.withDisplayName("Apply_Settings_To").withCollapsible(!1).addContainer("series",function(W){var J,ue;if(W.withDisplayName("Series"),W.addContainerItem("all",r.localizer("All"),function(Ze){return(0,K.WW)(y,Ze)}),n)for(var xe=0;xe<i;xe++){var ie=t.series[xe],re=ie.labelSettings?ie.labelSettings:t.dataLabelsSettings;re.position&&o.indexOf(re.position)<0&&(re.position=Ea.h.auto);var he=ie.identity.getSelector();if(Object.assign(y,{includeAltConstantValueSelector:!1,selector:t.hasDynamicSeries?(0,He.fd)(he):he,individualSelector:rn.call(r,!0),options:As.call(r,void 0,re,he,void 0,o,s,t.hasDynamicSeries),displayDisabledSlices:(J={},J.labelOverflow=!0,J),instanceId:"sn-".concat(xe)}),null!==(ue=r.featureSwitches)&&void 0!==ue&&ue.labelEnhancementsM0){var Ee=D?D.labels.dynamicLabelReader.getLabelFieldSourceTypes(xe):null;Object.assign(y,(0,d.pi)((0,d.pi)({},Ee?{valueFieldSourceType:Ee.valueFieldSourceType,detailFieldSourceType:Ee.detailFieldSourceType,titleFieldSourceType:Ee.titleFieldSourceType}:{}),{valueLabelPickerFallbackExpr:(0,Bt.CH)(t.valuesMetadataBySeries,xe),dataLabelPickerSeriesType:(0,Bt.aC)(i,t.hasDynamicSeries,r.isComboChart)}))}W.addContainerItem(ie.displayName,ie.displayName,function(Ze){return(0,K.WW)(y,Ze)})}})}),u.build()}function rn(r){return(0,K.WD)({featureSwitches:this.featureSwitches,hasCategories:null!=_.first(this.originalData.categories),hasDynamicSeries:this.originalData.hasDynamicSeries,hasSeriesSelector:r})}function vo(){var r,t=this.originalData.totalLabelsSettings;if(t&&!this.isClustered&&!this.isStacked100){var a=(0,d.pi)((0,d.pi)({},Dt.mi.totals),{precision:Dt.mi.totals.labelPrecision,displayUnits:Dt.mi.totals.labelDisplayUnits}),i=new Se.CQ(new Se.lg("totals"),"Visual_DataTotalLabels",a,this.localizer);if(!this.supportsTotalLabels()){var n=!(null===(r=this.data)||void 0===r||!r.multipleIdentity);return i.withDisabled(!0,n?"Visual_Totals_DisabledReason_SmallMultiples":"Visual_Totals_DisabledReason"),i.addTopLevelToggle("show",function(){return new Se.bd({descriptor:a.show,value:!1}).build()}),i.build()}return(0,K.XQ)({cardBuilder:i,dataLabelsProps:a,featureSwitches:this.featureSwitches,hostServices:this.hostService,options:po.call(this,void 0,t),individualSelector:rn.call(this,!1),showEnhancedLabelsFormattingOptions:!1,instanceId:"all"})}}function fo(){var r=this;if(!this.isStacked){var e=this.originalData;if(e&&e.series&&0!==e.series.length)return new Se.CQ(new Se.lg("errorBars"),"Visual_Error_Bars",ua.Qx,this.localizer,!0,!0).addGroup("applySettingsTo",function(t){return t.withDisplayName("Apply_Settings_To").withCollapsible(!1).addContainer("measure",function(a){a.withDisplayName("Series");for(var i=function(u){var c=_.first(u.usedInSeriesIndices);if(P.fF.assertValue(c,"lineChart - measure is not associated with any series"),null!=c&&null!==e.series[c]){var h=u.valueSelector.getSelector();a.addContainerItem(u.metadataColumn.queryName,u.metadataColumn.displayName,function(g){return(0,bs.f)({localize:r.localizer,uncertainty:e.series[c].uncertainty,targetMeasure:u.metadataColumn.expr,measureSelector:h,dataPointSelector:(0,d.pi)((0,d.pi)({},h),{data:[(0,gn.Ue)()],highlightMatching:1}),featureSwitches:r.featureSwitches,uncertaintyOptions:{isCombo:r.isComboChart,hideBand:!0}},g)})}},n=0,s=e.valuesMetadataBySeries;n<s.length;n++)i(s[n])})}).build()}}function As(r,e,t,a,i,n,s){var o,l=!!t;return{enumeration:r,dataLabelsSettings:e,show:!0,position:!_.isEmpty(i),positionObject:i,labelOrientation:!this.isBar&&!l,displayUnits:!this.isStacked100,precision:!0,selector:t,showAll:a,fontSize:!0,fontFamily:!0,labelDensity:null===(o=this.data)||void 0===o?void 0:o.isScalar,labelOverflow:!l&&n,enableBackground:e.enableBackground,backgroundColor:e.backgroundColor,backgroundTransparency:e.backgroundTransparency,style:this.style,bold:!0,italic:!0,underline:!0,enableDynamicLabelPickers:!s,isStacked100:this.isStacked100}}function po(r,e){return{enumeration:r,dataLabelsSettings:e,show:!0,displayUnits:!0,precision:!0,fontSize:!0,fontFamily:!0,showPositiveAndNegative:!0,enableBackground:e.enableBackground,backgroundColor:e.backgroundColor,backgroundTransparency:e.backgroundTransparency,style:this.style,bold:!0,italic:!0,underline:!0}}function go(r){var a,i,t=_.first(r).visualObjects;if(t.length>0){a=t[0],a?.selectorsByColumn&&(i=(0,He.fd)((0,He.tV)(a.selectorsByColumn)));var n=1===this.data.series.length;switch(a.objectName){case"columns":return n&&this.data.categoryMetadata&&!this.data.hasDynamicSeries&&(i={data:[(0,gn.Ue)(1)]}),(0,se.w3)(this.hostService,(0,d.pi)((0,d.pi)({},Dt.gE.dataPoint.borderColor),{selector:i}),(0,d.pi)((0,d.pi)({},Dt.gE.dataPoint.fill),{selector:i}),this.hostService.getLocalizedString("Visual_Border"));case"ribbon":return n&&this.data.categoryMetadata&&!this.data.hasDynamicSeries&&(i={data:[(0,gn.Ue)(1)]}),(0,se.w3)(this.hostService,(0,d.pi)((0,d.pi)({},Dt.gE.ribbonBands.borderColor),{selector:i}),(0,d.pi)((0,d.pi)({},Dt.gE.ribbonBands.fillColor),{selector:i}),this.hostService.getLocalizedString("Visual_Border"));case"data-labels":var s=this.data.series.find(function(h){var g;return(0,He.Ic)(null===(g=h?.identity)||void 0===g?void 0:g.getSelectorsByColumn(),a.selectorsByColumn)});if(!s)return;var o=Dt.mi.labels,l=n?void 0:i,u={fontFamilyReference:(0,d.pi)((0,d.pi)({},o.fontFamily),{selector:l}),fontSizeReference:(0,d.pi)((0,d.pi)({},o.fontSize),{selector:l}),boldReference:(0,d.pi)((0,d.pi)({},o.bold),{selector:l}),italicReference:(0,d.pi)((0,d.pi)({},o.italic),{selector:l}),underlineReference:(0,d.pi)((0,d.pi)({},o.underline),{selector:l}),fontColorReference:(0,d.pi)((0,d.pi)({},o.color),{selector:l}),displayUnitsReference:(0,d.pi)((0,d.pi)({},o.labelDisplayUnits),{selector:l}),precisionReference:(0,d.pi)((0,d.pi)({},o.labelPrecision),{selector:l}),backgroundReference:(0,d.pi)((0,d.pi)({},o.backgroundColor),{selector:l})};return(0,se.Jf)({hostServices:this.hostService,omitSelectorForSingleSeries:n,individualSelector:rn.call(this,!n),selector:i,repetitionSelector:void 0,subSelectionStylesOptions:{precision:{defaultPrecision:this.getLabelUnitsAndPrecision().getPrecision(!1,s.type)}}},u);case"total-labels":var c=Dt.mi.totals;return(0,se.Jf)({hostServices:this.hostService,omitSelectorForSingleSeries:n,individualSelector:rn.call(this,!n),selector:i,repetitionSelector:void 0},{fontFamilyReference:c.fontFamily,fontSizeReference:c.fontSize,boldReference:c.bold,italicReference:c.italic,underlineReference:c.underline,fontColorReference:(0,d.pi)((0,d.pi)({},c.color),{selector:(0,Bt.hm)(rn.call(this,!1),void 0,void 0)}),displayUnitsReference:c.labelDisplayUnits,precisionReference:c.labelPrecision,backgroundReference:c.backgroundColor});default:return}}}function yo(r,e){if(!e){var i,a=_.first(r).visualObjects;if(!(a.length>0))return;i=a[0];var s,n=!this.showLabelPerSeries();!n&&!_.isEmpty(i.selectorsByColumn)&&(s=(0,He.fd)((0,He.tV)(i.selectorsByColumn)));var o=n?Dt.mi.labels.show:Dt.mi.labels.showSeries;switch(i.objectName){case"columns":case"ribbon":var l="ribbon"===i.objectName,u=(0,d.pi)({},l?Dt.gE.ribbonBands.fillColor:Dt.gE.dataPoint.fill),c=[{type:1,destinationInfo:(0,d.pi)((0,d.pi)({},u),{selector:this.data.series.length>1?s:void 0}),label:this.localizer(l?"Format_Ribbon":this.isBar?"Format_Bars":"Format_Columns")}];return this.supportsTotalLabels()&&c.unshift((0,d.pi)((0,d.pi)({type:2},Dt.mi.totals.show),{enabledLabel:this.localizer("Format_AddTotalLabels")})),c.unshift({type:0,excludedResetFormattingIds:[Dt.mi.totals.show,(0,d.pi)((0,d.pi)({},o),{selector:s})]},(0,d.pi)((0,d.pi)({type:2},o),{enabledLabel:this.localizer("Format_AddDataLabels"),selector:s})),c;default:return}}}function mo(r){switch(d3.select(r).attr(We.Ez)){case"columns":var t=d3.select(r).datum();return Ds.call(this,t.seriesIndex);case"ribbon":return t=d3.select(r).datum(),Ds.call(this,t.d1.seriesIndex);case"data-labels":case"series-labels":var i=(0,Bt.wT)(r,this.data.series);if(i)return i;default:return}}function Ds(r){var e,t=this.data.series;if(!_.isEmpty(t)&&r>=0){var a=t[r];return null===(e=a?.identity)||void 0===e?void 0:e.getSelectorsByColumn()}}function So(r,e){var t=[];if(this.featureSwitches.onObject&&1===e){var a=this.isComboChart?xs.OA:Dt.mi,i=this.data.series.map(function(s){var o;return{selector:s.identity.getSelector(),value:null===(o=s.labelSettings)||void 0===o?void 0:o.show}}),n=[Tr.v.create(a.labels.backgroundColor,this.data.dataLabelsSettings.enableBackground).onToggleEnabled(Ka.W.createBooleanDataViewObjectChange(a.labels.enableBackground,!0,{inheritSelector:!0})),Or.$.create(a.labels.backgroundColor,this.data.dataLabelsSettings.enableBackground).onToggleEnabled(Ka.W.createBooleanDataViewObjectChange(a.labels.enableBackground,!0)),Tr.v.create(a.labels.showSeries,this.data.dataLabelsSettings.show,i).onToggleEnabled(Ka.W.createBooleanDataViewObjectChange(a.labels.showByDefault,!1),Ka.W.createBooleanDataViewObjectChange(a.labels.show,!0)).onToggleDisabled(Ka.W.createRevertToDefaultDataViewObjectChange("labels")),Or.$.create(a.labels.show,this.data.dataLabelsSettings.show).onToggleDisabled(Ka.W.createRevertToDefaultDataViewObjectChange("labels")),Or.$.create(a.totals.backgroundColor,this.data.totalLabelsSettings.enableBackground).onToggleEnabled(Ka.W.createBooleanDataViewObjectChange(a.totals.enableBackground,!0)).onToggleDisabled(Ka.W.createRevertToDefaultDataViewObjectChange("totals")),Tr.v.create(Dt.gE.dataPoint.borderColor,this.data.columnStyle.border.strokeShow).onToggleEnabled(Ka.W.createBooleanDataViewObjectChange(Dt.gE.dataPoint.borderShow,!0,{inheritSelector:!0,required:!0}))];t=(0,d.ev)((0,d.ev)([],t,!0),et.o.getDataViewObjectsBehaviorChanges(r,n),!0)}return t}var Br=S(3406),xo=function(r){function e(t){var a=r.call(this,t)||this;return a.options=t,P.fF.assertValue(t.columnChartType,"columnChartType"),a}return(0,d.ZT)(e,r),Object.defineProperty(e.prototype,"columnChartType",{get:function(){return this.options.columnChartType},enumerable:!1,configurable:!0}),e.prototype.initRenderer=function(t){r.prototype.initRenderer.call(this,t),this.svg.classed(e.ClassName,!0),this.unclippedGraphicsContext=this.svg.append("g").classed("columnChartUnclippedGraphicsContext",!0),this.mainGraphicsContext=this.unclippedGraphicsContext.append("svg").classed("mainGraphicsContext",!0),this.useManagedTabIndex=t.useManagedTabIndex,this.interactivityService&&(this.mainGraphicsContext.attrs({"aria-label":this.localizer("Visual_Plot"),"data-automation-type":"mainGraphicsContext",role:"group"}).classed(Da.Pg,!It.M.isInternetExplorerOrEdge()),t.useManagedTabIndex?(this.mainGraphicsContext.classed(_a.rG.class,!0),this.mainGraphicsContext.attr(Ia.Rh,!0)):this.mainGraphicsContext.attrs({tabindex:0,focusable:!0}))},Object.defineProperty(e.prototype,"isBar",{get:function(){return Ut.hg(this.columnChartType)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isColumn",{get:function(){return Ut.t3(this.columnChartType)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isStacked",{get:function(){var a;return Ut.C3(this.columnChartType,null===(a=this.data)||void 0===a?void 0:a.series.length)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isStacked100",{get:function(){return Ut.Ds(this.columnChartType)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isClustered",{get:function(){return Ut.V5(this.columnChartType)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasRibbonBands",{get:function(){var a;return(null===(a=this.data.ribbonBands)||void 0===a?void 0:a.show)&&!this.isComboChart},enumerable:!1,configurable:!0}),e.prototype.isYCategorical=function(){return this.isBar},e.sliceSeries=function(t,a,i){void 0===i&&(i=0);var n=[];if(t&&t.length>0)for(var s=0,o=t.length;s<o;s++)n[s]=(0,Ae.ED)(t[s]),n[s].data=t[s].data.filter(function(l){return l.categoryIndex>=i&&l.categoryIndex<a});return n},e.getInteractiveColumnChartDomElement=function(t){return t.children("svg").get(0)},e.prototype.setData=function(t,a){P.fF.assertValue(t,"dataViews");var n=Ut.L2(this.style,this.isStacked100);if(this.data=this.originalData={categories:[],categoryFormatter:null,series:[],totals:[],valuesMetadata:[],categoryData:[],legendData:null,hasHighlights:!1,categoryMetadata:null,isScalar:!1,dataLabelsSettings:n,titleDataLabelsSettings:n,detailDataLabelsSettings:n,seriesLabelSettings:mt(this.style),hasDynamicSeries:!1,columnStyle:{fillColor:void 0,fillTransparency:Ut.fl,border:Ut.nO(this.style)},layout:Ut.HQ,ribbonBands:(0,d.pi)({show:!1},Ut.bS(this.style))},t.length>0){var s=this.dataView=t[0];if(s&&s.categorical){var o=s.categorical.categories,u=w.getCategoryValueType(o&&o.length>0?o[0].source:null),c=(0,Ht.n$)(s),h=(0,ce.PX)(s.metadata?s.metadata.objects:null,X.p.categoryAxis.axisType,u,void 0,c);this.converter=ao.create({dataView:s,style:this.style,isScalar:h,multipleInfo:a,chartType:this.columnChartType,interactivityService:this.interactivityService,tooltipsEnabled:this.tooltipsEnabled,hostServices:this.hostService,isComboChart:this.isComboChart,supportsTotalLabels:!a&&this.supportsTotalLabels(),featureSwitches:this.featureSwitches}),this.data=this.originalData=this.converter.convert()}}},e.prototype.hasLegend=function(){return this.data&&(this.data.hasDynamicSeries||this.data.series&&this.data.series.length>1)},e.prototype.getSeriesLabelsSettings=function(){return(0,Ae.ED)(this.data).seriesLabelSettings},e.prototype.getFormattingCards=function(t){return lo.call(this,t)},e.prototype.getSubSelectionStyles=function(t){return go.call(this,t)},e.prototype.getSubSelectionShortcuts=function(t,a){return yo.call(this,t,a)},e.prototype.getSelectorsByColumnFromSubselectedElement=function(t){return mo.call(this,t)},e.prototype.getDataViewObjectLayerChanges=function(t,a){return So.call(this,t,a)},e.prototype.showSeriesCard=function(){return!(this.isComboChart&&!this.data.hasY2Role)},e.prototype.showLabelPerSeries=function(){var t=this.originalData;return t.series.length>1||!t.categoryMetadata||this.isComboChart},e.prototype.calculateAxesProperties=function(t){var a,i,n,s,o,l,u,c,h;this.updateCurrentViewport(t);var g=null!==(n=null===(i=null===(a=this.data)||void 0===a?void 0:a.categories)||void 0===i?void 0:i.length)&&void 0!==n?n:0,y=this.data?(0,f.is)({data:this.data,availableWidth:Math.max(0,this.isBar?this.availableHeight:this.availableWidth),categoryCount:g,preferredCategoryWidth:null!==(o=null===(s=this.data)||void 0===s?void 0:s.preferredCategoryWidth)&&void 0!==o?o:null,domain:null===(u=w.createDomain(this.data.series,w.getCategoryValueType(null===(l=this.data)||void 0===l?void 0:l.categoryMetadata),this.getVisualCategoryAxisIsScalar(),[t.categoryAxisOptions.includeDomain]))||void 0===u?void 0:u.domain,isScalar:this.getVisualCategoryAxisIsScalar(),cartesianOptions:this.options,trimOrdinalDataOnOverflow:t.trimOrdinalDataOnOverflow,outerPaddingRatio:t.outerPaddingRatio,innerPaddingRatio:t.innerPaddingRatio,axisZoom:t.axisZoom}):(0,f.u8)(),D=this.adjustLayoutForScroll(this.data,g,t.trimOrdinalDataOnOverflow,y);this.updateCategoryLayout(y);var x=this.createCategoryAxis(t),A=this.createValueAxis(t),M=(null===(c=D.totalLabelsSettings)||void 0===c?void 0:c.show)&&this.supportsTotalLabels(),O=(null===(h=D.dataLabelsSettings)||void 0===h?void 0:h.show)&&this.isClusteredOptimized;if(M||O){var I=w.mergeScalarAxisDomains(w.createScalarDomainOptions(this.adjustDomainForLabels(A),0,[!0,!0]),t.valueAxisOptions.includeDomain,w.createScalarDomainOptions(A.scale.domain(),0));A=this.createValueAxis(t,I,!0)}return[this.isBar?A:x,this.isBar?x:A]},e.prototype.setAxesLayout=function(t){var a,i,n;this.updateCurrentViewport(t.layout),this.xAxisProperties=t.layout.axes.x,this.yAxisProperties=t.layout.axes.y1;var s=this.data?{categoryCount:_.isEmpty(this.categoryAxis.categoryIdentities)?0:this.categoryAxis.categoryIdentities.length,categoryThickness:this.categoryAxis.categoryThickness,outerPaddingRatio:this.categoryAxis.outerPaddingRatio,innerPaddingRatio:this.categoryAxis.innerPaddingRatio,isScalar:this.getVisualCategoryAxisIsScalar()}:(0,f.u8)();this.data=this.adjustLayoutForScroll(this.data,null!==(n=null===(i=null===(a=this.data)||void 0===a?void 0:a.categories)||void 0===i?void 0:i.length)&&void 0!==n?n:0,t.trimOrdinalDataOnOverflow,s),this.updateCategoryLayout(s)},e.prototype.getAxesDomains=function(t,a){var i,n,s={};if(!this.data)return s;if(a.categoryAxis&&this.data.isScalar){var o=w.createDomain(this.data.series,null!==(n=null===(i=this.data.categoryMetadata)||void 0===i?void 0:i.type)&&void 0!==n?n:V.Ge.fromDescriptor({text:!0}),this.data.isScalar,void 0);o&&(w.assertScalarDomain(o.domain),s.categoryAxis=[o.domain[0],o.domain[1]])}if(a.valueAxis){var l=void 0;if(this.isStacked){var u=Ut.VY(this.data.series,this.isStacked100);l=[u.min,u.max]}else l=w.createUncertaintyAwareValueDomain(this.data.series,t)||w.emptyDomain;var c=l[0],h=l[1];void 0!==c&&void 0!==h&&(s.valueAxis=[c,h])}return s},e.prototype.updateCategoryLayout=function(t){var a;a=this.getPreferredPlotArea(t),this.height=a.height,this.width=a.width,this.categoryLayout=t,this.applyInteractivity(),this.categoryBandScale=d3.scaleBand().range([0,this.categoryWidth]),this.isClusteredOptimized?(this.activeData.layout.clusteredGapSize&&(this.activeData.layout.clusteredGapOverlaps?this.categoryBandScale=d3.scaleBand().range([0,this.categoryWidth*(1-this.activeData.layout.clusteredGapSize/100)]):this.categoryBandScale.paddingInner(this.activeData.layout.clusteredGapSize/100)),this.categoryBandScale.domain(this.activeData.series.map(function(i){return i.index.toString()}))):this.categoryBandScale.domain(["0"])},e.prototype.adjustLayoutForScroll=function(t,a,i,n){if(this.clippedData=void 0,t&&!n.isScalar&&!this.options.isScrollable&&i){var s=Math.min(a,n.categoryCount);if(s!==a){var o=(0,Ae.ED)(t);o.series=e.sliceSeries(o.series,s),o.categories=o.categories.slice(0,s),o.categoryIdentities&&(o.categoryIdentities=o.categoryIdentities.slice(0,s)),this.clippedData=o}}return t},e.prototype.getLabelUnitsAndPrecision=function(){return(0,st.d6)(this.xAxisProperties,this.data.dataLabelsSettings)},e.prototype.adjustDomainForLabels=function(t){var a=this.activeData,i=t.dataDomain;if(i&&null!=i[0]&&null!=i[1]){var n=i[0].toString(),s=i[1].toString(),o="";a.series.length>0&&a.series[0].data.length>0&&(o=a.series[0].data[0].labelFormatString);var l=(0,K.fI)(),u=(0,st.d6)(t,a.totalLabelsSettings),c=l.getOrCreate(o,a.totalLabelsSettings,u.units,a.totalLabelsSettings.precision),h=(0,st.Bw)(c.format(n)),g=(0,st.Bw)(c.format(s)),y=(0,ae.qk)(a.totalLabelsSettings.fontProperties,h),D=(0,ae.qk)(a.totalLabelsSettings.fontProperties,g),x=void 0,A=void 0,M=void 0;this.isBar?(x=ne.b.measureSvgTextWidth(y),A=ne.b.measureSvgTextWidth(D),M=t.invertAxis?-1:1):(x=ne.b.estimateSvgTextHeight(y),A=ne.b.estimateSvgTextHeight(D),M=t.invertAxis?1:-1);var O=t.scale,I=O(i[0])-M*(x+b.FJ),W=O(i[1])+M*(A+b.FJ),J=!1,ue=!1;return a.totalLabelsSettings.showPositiveAndNegative?(J=a.hasPositive,ue=a.hasNegative):(J=a.hasNetPositive,ue=a.hasNetNegative),[ue?O.invert(I):void 0,J?O.invert(W):void 0]}},e.prototype.isMobileInteractiveLegend=function(){return this.mobileTileInteractive&&!(this.data&&this.data.multipleIdentity)},e.prototype.getClosestColumnIndex=function(t){for(var a=0,i=Number.MAX_VALUE,n=this.getGlyphCenters(),s=0;s<n.length;s++){var o=Math.abs(t-n[s]);o<i&&(i=o,a=s)}return a},e.prototype.applyInteractivity=function(){var t=this;if(this.isMobileInteractiveLegend()){var a=function(){var o=d3.mouse(t.mainGraphicsContext.node()),c=t.getClosestColumnIndex(t.isColumn?o[0]:o[1]);t.selectColumn(c)},i=e.getInteractiveColumnChartDomElement(this.element);this.svg.on("click",a),d3.select(i).on("click",a).style("touch-action","none");var n=d3.drag().on("drag",a);this.svg.call(n),d3.select(i).call(n)}},e.prototype.selectColumn=function(t,a){void 0===a&&(a=!1),(a||this.lastInteractiveSelectedColumnIndex!==t)&&(Br.rT(this.mainGraphicsContext,this.CS.selector,t,this.lastInteractiveSelectedColumnIndex,a),this.moveHandle(t),this.cartesianVisualHost.updateLegend(this.createInteractiveLegendDataPoints(t)),this.lastInteractiveSelectedColumnIndex=t)},e.prototype.createInteractiveLegendDataPoints=function(t){var i,n,s,o,a=this,l=this.data;if(!l||_.isEmpty(l.series))return(0,m.Fe)(this.style);var u=X.p.general.formatString,c=null===(i=l.categories)||void 0===i?void 0:i[t],h=null!==(s=null===(n=l.categoryFormatter)||void 0===n?void 0:n.format(c))&&void 0!==s?s:c,g=null===(o=l.legendData)||void 0===o?void 0:o.dataPoints,y=l.series.map(function(D,x){var A,M=null===(A=a.converter)||void 0===A?void 0:A.getValueBySeriesAndCategory(x,t),O=l.valuesMetadata[x],I=g[x];return{marker:{show:!0,shape:Ta.ZO.circle,color:1===l.series.length?D.data.length>t&&D.data[t].columnStyle.fillColor:g.length>x&&I.marker.color,transparency:I.marker.transparency,stroke:I.marker.stroke},label:(0,Pe.TO)(O,a.dataView.categorical.values,u),category:h,measure:(0,R.WU)(M,(0,R.EO)(O,u)),identity:U.l0.createNull(),selected:!1,index:x}});return(0,d.pi)((0,d.pi)({},(0,m.Fe)(this.style)),{dataPoints:y})},e.prototype.render=function(t,a,i){return Br.sY.call(this,t,i)},e.prototype.usesUngroupedRenderer=function(){return this.data.layout.clusteredGapOverlaps&&this.data.layout.clusteredGapSize>0},e.prototype.getFirstElement=function(t,a){void 0===a&&(a=!1);var i=this.activeData.series;if(_.isEmpty(i))return null;var o,l,n=t??i[0].data[0].categoryIndex,s=a?this.findSeriesIndex(i.length-1,n,!1):this.findSeriesIndex(0,n,!0);return s>=0?(o=this.data.series[s].data[n],l=this.getDataPointElement(s,n)):s=a?i.length-1:0,{element:l,targetCategoryIndex:n,targetSeriesIndex:s,noShape:o&&0===o.valueAbsolute}},e.prototype.getNextDataPoint=function(t,a,i){switch(i){case j.x0.NextCategory:t=e.findCategoryIndex(this.data.series[a].data,t,!0);break;case j.x0.PreviousCategory:t=e.findCategoryIndex(this.data.series[a].data,t,!1);break;case j.x0.NextSeries:(a=this.findSeriesIndex(a+1,t,!0))<0&&(t=e.loopIndex(t+1,this.data.categories.length),a=this.findSeriesIndex(0,t,!0));break;case j.x0.PreviousSeries:(a=a>0?this.findSeriesIndex(a-1,t,!1):-1)<0&&(t=e.loopIndex(t-1,this.data.categories.length),a=this.findSeriesIndex(this.data.series.length-1,t,!1))}var n,s;if(P.fF.assert(function(){return a>=0||t>=0},"We expect that categoryIndex or seriesIndex will always be valid."),a>=0&&t>=0){var o=this.data.series[a].data;this.data.hasHighlights&&(o=o.filter(function(l){return!l.highlight})),n=o[t],s=this.getDataPointElement(a,t)}else if(t<0)switch(i){case j.x0.NextCategory:t=e.loopIndex(t+1,this.data.categories.length);break;case j.x0.PreviousCategory:t=e.loopIndex(t-1,this.data.categories.length);break;default:P.fF.assertFail("categoryIndex should not be less than 0 unless we are navigating on categories.")}else switch(i){case j.x0.NextSeries:a=0;break;case j.x0.PreviousSeries:a=this.data.series.length-1;break;default:P.fF.assertFail("seriesIndex should be less than 0 unless we are navigating on series")}return this.isInViewport(s)?{element:s,targetCategoryIndex:t,targetSeriesIndex:a,noShape:n&&0===n.valueAbsolute}:this.getNextDataPoint(t,a,i)},e.prototype.validateDirection=function(t){return this.isBar&&!this.getVisualCategoryAxisIsScalar()&&(t===j.x0.NextSeries||t===j.x0.PreviousSeries)&&(t=t===j.x0.NextSeries?j.x0.PreviousSeries:j.x0.NextSeries),t},e.prototype.isInViewport=function(t){if(!t)return!0;var i=t.getBBox(),n=this.currentViewport;return i.y+i.height>0&&i.y<n.height&&i.x+i.width>0&&i.x<n.width},e.prototype.getDataPointElement=function(t,a){return this.mainGraphicsContext.selectAll(this.CS.selector).filter(function(n){return n.categoryIndex===a&&n.seriesIndex===t}).node()},e.prototype.findSeriesIndex=function(t,a,i){return(i?_.findIndex:_.findLastIndex)(this.data.series,function(s){return _.some(s.data,function(o){return o.categoryIndex===a&&null!=o.value})},t)},e.findCategoryIndex=function(t,a,i){var n=i?1:-1,s=_.findIndex(t,function(o){return o.categoryIndex===a});return s<0?s:t[s=e.loopIndex(s+n,t.length)].categoryIndex},e.loopIndex=function(t,a){return t>=a?0:t<0?a-1:t},e.prototype.getCategoryValueType=function(){return w.getCategoryValueType(this.data.categoryMetadata)},e.prototype.getVisualCategoryAxisIsScalar=function(){return!!this.data&&this.data.isScalar},e.prototype.getSupportedCategoryAxisType=function(){var t,a=w.getCategoryValueType(null===(t=this.data)||void 0===t?void 0:t.categoryMetadata);return(0,Y.c$)(a)?At.w.categorical:At.w.both},e.prototype.setFilteredData=function(t,a){var i=(0,Ae.ED)(this.data);i.series=e.sliceSeries(i.series,a,t),i.categories=i.categories.slice(t,a),this.clippedData=i},e.prototype.supportsTotalLabels=function(){return!(this.data&&this.data.multipleIdentity)&&this.isStacked&&!this.isStacked100},e.prototype.supportsTrendLine=function(){if(this.data.multipleIdentity)return!1;var a=(0,da.y)(this.dataView),i=this.getVisualCategoryAxisIsScalar();return 12===this.columnChartType&&i&&a.data.hasValues("Y")},e.prototype.supportsStaticReferenceLines=function(){return this.data&&!this.isValueAxisIrregular()},e.prototype.isValueAxisIrregular=function(){var t,a;return(null===(t=this.data)||void 0===t?void 0:t.layout.stackedGapSize)>0&&(null===(a=this.data)||void 0===a?void 0:a.layout.stackedGapExplodes)&&this.isStacked},e.prototype.supportsStackedGapExplode=function(){return this.isStacked&&!this.isStacked100&&!this.isComboChart},e.prototype.getCartesianVisualCapabilities=function(){var t;return{supportsHierarchicalCategoryAxis:!0,isValueAxisIrregular:this.isValueAxisIrregular(),axesCapabilities:{categoryAxis:{domainAggregateRole:Dt.au.category,supportedDomainAggregates:null!==(t=this.data)&&void 0!==t&&t.isScalar?3:0},valueAxis:{domainAggregateRole:Dt.au.y,supportedDomainAggregates:84===this.columnChartType||this.isStacked?1:3}}}},e.prototype.getStaticSeriesRole=function(){return"Y"},Object.defineProperty(e.prototype,"CS",{get:function(){return Ut.t3(this.columnChartType)?{class:"column",selector:".column"}:{class:"bar",selector:".bar"}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"chartTypeOptimized",{get:function(){var a,i=this.columnChartType,n=Ut.C3(i,null===(a=this.data)||void 0===a?void 0:a.series.length);return 18!==i||n?20!==i||n?i:12:10},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isStackedOptimized",{get:function(){return Ut.C3(this.chartTypeOptimized,2)||this.hasRibbonBands},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isClusteredOptimized",{get:function(){return Ut.V5(this.chartTypeOptimized)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"valueAxis",{get:function(){return this.isColumn?this.yAxisProperties:this.xAxisProperties},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"categoryAxis",{get:function(){return this.isColumn?this.xAxisProperties:this.yAxisProperties},enumerable:!1,configurable:!0}),e.prototype.createCategoryAxis=function(t,a){var i,n,s,o,l=this.activeData,u=(i=this.categoryLayout).isScalar,c=i.outerPaddingRatio,h=i.categoryThickness,g=t.axisZoom,y=t.innerPaddingRatio,D=(n=t.categoryAxisOptions).axis,x=n.includeDomain,A=w.createAxis({pixelSpan:this.isColumn?this.width:this.height,domainOptions:w.createDomain(l.series,null!==(o=null===(s=l.categoryMetadata)||void 0===s?void 0:s.type)&&void 0!==o?o:V.Ge.fromDescriptor({text:!0}),u,[a??x]),axisZoom:g,metaDataColumn:l.categoryMetadata,formatString:(0,R.EO)(l.categoryMetadata,X.p.general.formatString),outerPadding:h*c,outerPaddingRatio:c,isCategoryAxis:!0,isScalar:u,isVertical:this.isBar,categoryThickness:h,useTickIntervalForDisplayUnits:!0,getValueFn:function(O,I){return(0,f.dZ)(l,O,I,u)},axis:(0,d.pi)((0,d.pi)({},D),{invertAxis:D.invertAxis&&u}),margin:this.margin,allowSingleScalarTick:u,preventNice:w.hasForcedDomain(x),innerPaddingRatio:y,orientation:this.isColumn?Y.Or.bottom:D.switchAxisPosition?Y.Or.right:Y.Or.left});return A.categoryIdentities=l.categoryIdentities,this.categoryLayout.categoryThickness=A.categoryThickness,A},e.prototype.createValueAxis=function(t,a,i){var s,h,n=this,o=t.axisZoom,l=t.forcedTickCount,u=t.valueAxisOptions,c=u.axis;if(P.fF.assert(function(){return!(n.isBar&&void 0!==l)},"Cannot have bar chart as combo chart."),P.fF.assert(function(){return!(n.isClusteredOptimized&&n.isStacked100)},"Cannot have 100% clustered chart."),a??(a=u.includeDomain),this.isClusteredOptimized)h=w.createUncertaintyAwareValueDomain(this.activeData.series)||w.emptyDomain;else{var g=Ut.VY(this.activeData.series,this.isStacked100);h=[g.min,g.max]}var y=w.mergeScalarAxisDomains(a,w.createScalarDomainOptions(h,0)),D=w.createAxis({pixelSpan:this.isColumn?this.availableHeight:this.width,domainOptions:y,zeroScalarDomain:Ut.iR,metaDataColumn:this.activeData.valuesMetadata,formatString:this.isStackedOptimized&&this.isStacked100?this.hostService.getLocalizedString("Percentage"):null!==(s=w.getAxisFormatString(this.activeData.series))&&void 0!==s?s:(0,R.EO)(this.activeData.valuesMetadata[0],X.p.general.formatString),outerPadding:0,isScalar:!0,isVertical:this.isColumn,useTickIntervalForDisplayUnits:!0,isCategoryAxis:!1,shouldClamp:w.scaleShouldClamp(y?.domain,h),preventNice:w.hasForcedDomain(y)||this.isValueAxisIrregular(),includeZero:w.shouldIncludeZero(y),axisZoom:o,forcedTickCount:l,axis:c,margin:this.margin,skipAxisZoomUpdate:i,is100Pct:this.isStackedOptimized&&this.isStacked100,orientation:this.isColumn?c.switchAxisPosition?Y.Or.right:Y.Or.left:Y.Or.bottom});return D.isIrregular=this.isValueAxisIrregular(),this.isBar&&D.d3Axis.tickSizeInner(-this.availableHeight).tickSizeOuter(0),D},Object.defineProperty(e.prototype,"categoryWidth",{get:function(){return this.categoryLayout.categoryThickness*(1-this.categoryLayout.innerPaddingRatio)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"columnWidth",{get:function(){var a=this.activeData.series.length;return a>=2&&this.activeData.layout.clusteredGapSize>0&&this.activeData.layout.clusteredGapOverlaps?this.categoryWidth*(1+(a-1)*this.activeData.layout.clusteredGapSize/100)/a:this.categoryBandScale.bandwidth()},enumerable:!1,configurable:!0}),e.prototype.createLabelDataPoints=function(t){return Ut.Q4.call(this,t)},e.prototype.createTotalLabelDataPoints=function(t){return Ut.$3.call(this,t)},e.prototype.createUncertaintyLabels=function(t){return Ut.EX.call(this,t)},Object.defineProperty(e.prototype,"ribbonGapSize",{get:function(){var a;return this.categoryLayout.categoryThickness*this.categoryLayout.innerPaddingRatio*(null!==(a=this.data.layout.ribbonGapSize)&&void 0!==a?a:0)/100},enumerable:!1,configurable:!0}),e.prototype.drawColumns=function(t){var a,i=this;P.fF.assertValue(this.activeData,"data should be defined"),this.glyphsCenters=null,this.layout=this.getColumnLayout();var o,l,c,s=!0,u=Br.kC.call(this);return this.animator&&t&&(o=(a=this.animator.animate({chart:this,series:u,valueAxisProps:this.isClusteredOptimized?this.valueAxis:void 0,isBar:this.isClusteredOptimized?this.isBar:void 0,columnWidth:this.isClusteredOptimized?this.columnWidth:void 0,layout:this.layout,interactivityService:this.interactivityService})).shapes,l=a.uncertaintyShapes,s=a.failed),s&&(l=Br.WR.call(this,{isBar:this.isBar,valueAxisProps:this.isStackedOptimized?void 0:this.valueAxis,layout:this.isStackedOptimized?void 0:this.layout,columnWidth:this.isStackedOptimized?void 0:this.columnWidth,interactivityService:this.isStackedOptimized?void 0:this.interactivityService}),o=Br.Wv.call(this,u),this.isClusteredOptimized&&(0,en.LL)(this.mainGraphicsContext,[Ut.L0,Ri.jx])),Br.hJ.call(this,t,this.animator),this.dragDataPoint&&(c=function(g){g.identity&&i.hostService.onDragStart({event:d3.event,data:{data:g.identity.getSelector()}})}),Br.bk(o,c),{eventGroup:this.mainGraphicsContext,shapesSelection:o,uncertaintyShapes:this.isClusteredOptimized?l:void 0,labelDataPointGroups:(0,d.ev)((0,d.ev)((0,d.ev)([],this.createLabelDataPoints(this.style),!0),this.createUncertaintyLabels(this.style),!0),this.createTotalLabelDataPoints(this.style),!0),animateLabels:!s}},Object.defineProperty(e.prototype,"scaledMargin",{get:function(){var a,i=null!==(a=this.currentViewport.scale)&&void 0!==a?a:1;return{top:this.margin.top*i,right:this.margin.right*i,bottom:this.margin.bottom*i,left:this.margin.left*i}},enumerable:!1,configurable:!0}),e.prototype.getGlyphCenters=function(){var t=this;if(!this.glyphsCenters&&this.activeData.series.length>0){var a=0;this.categoryLayout.isScalar||(a=this.categoryWidth/2),this.glyphsCenters=this.activeData.series[0].data.map(function(n){return t.categoryAxis.scale(t.categoryLayout.isScalar?n.categoryValue:n.categoryIndex)+a})}return this.glyphsCenters},e.prototype.moveHandle=function(t){var a,i=this.getGlyphCenters(),n=d3.select(".interactive-hover-line");if(!n.empty()&&!this.columnSelectionLineHandle&&(this.columnSelectionLineHandle=d3.select(n.node().parentElement)),!i||i.length<=1)null===(a=this.columnSelectionLineHandle)||void 0===a||a.remove();else{var s=i[t];this.columnSelectionLineHandle?(this.columnSelectionLineHandle.select("line").attrs(this.isColumn?{x1:s,x2:s}:{y1:s,y2:s}),this.columnSelectionLineHandle.select("circle").attrs(this.isColumn?{cx:s}:{cy:s})):(this.columnSelectionLineHandle=this.unclippedGraphicsContext.append("g"),this.columnSelectionLineHandle.append("line").classed("interactive-hover-line",!0).attrs(this.isColumn?{x1:s,x2:s,y1:0,y2:this.height}:{y1:s,y2:s,x1:0,x2:this.width}),this.columnSelectionLineHandle.append("circle").classed("drag-handle",!0).attrs(this.isColumn?{cx:s,cy:this.height}:{cy:s,cx:0}).attr("r","6px"))}},e.prototype.getColumnLayout=function(){var t=this,a=this.columnWidth,i=this.categoryLayout.isScalar,n=this.valueAxis.invertAxis,s=this.valueAxis.scale,o=this.categoryAxis.scale,l=i?this.categoryWidth/2:0,u=function(re){var he=re.catSize,Ee=re.catBase,Ze=re.valueSize,Ie=re.valueBase;return t.isColumn?{width:he,x:Ee,height:Ze,y:Ie}:{height:he,y:Ee,width:Ze,x:Ie}};if(this.isStackedOptimized){var c={catSize:function(re){return a},catBase:function(re){return o(i?re.categoryValue:re.categoryIndex)-l}},h=function(re,he){return re!==he},g=function(re){return h(h(re,t.isBar),n)},y=this.data.layout.stackedGapExplodes?0:this.data.layout.stackedGapSize,D=function(re){return re.indexFromZeroValue>0?y:0},x=function(re){return Math.abs(s(re.originalPosition-Math.abs(re.originalValue))-s(re.originalPosition))},M=function(re,he){void 0===he&&(he=!1);var Ee=he?re.originalPosition:re.position,Ie=Math.abs(s(Ee-Math.abs(he?re.originalValue:re.value))-s(Ee)),tt=D(re);return 0===tt?Ie:re.highlight?Ie*(1-Math.min(1,tt/x(re))):Math.min(Math.max(1,Ie-tt),Ie)},O=function(re,he){void 0===he&&(he=!1);var Ee=he?re.originalPosition:re.position,Ze=he?re.originalValue:re.value,Ie=s(h(n,t.isColumn)?Ee:Ee-Math.abs(Ze)),tt=D(re);if(0===tt)return Ie;if(!re.highlight||he||g(Ze<0)){if(!g(Ze<0))return Ie;Ie+=tt}else{var $e=function(re){return Math.abs(s(re.position-Math.abs(re.value))-s(re.position))}(re),Tt=x(re);Ie-=tt*((Tt-$e)/Tt)}var Xt=s(h(n,t.isColumn)?re.originalPosition-Math.abs(re.originalValue):re.originalPosition);return Math.min(Ie,Xt)};return{shapeLayout:u((0,d.pi)((0,d.pi)({},c),{valueSize:function(re){return M(re)},valueBase:function(re){return O(re)}})),shapeLayoutWithoutHighlights:u((0,d.pi)((0,d.pi)({},c),{valueSize:function(re){return M(re,!0)},valueBase:function(re){return O(re,!0)}})),zeroShapeLayout:u((0,d.pi)((0,d.pi)({},c),{valueSize:function(re){return 0},valueBase:function(re){return s(re.value>=0?re.position-re.valueAbsolute:re.position)}}))}}var I=.5*a,W=I/2,J=s(0),ue=function(re){return J+(0,Y.sc)(s,re,0)},xe=function(re){return o(i?re.categoryValue:re.categoryIndex)+t.categoryBandScale("".concat(re.seriesPosition))-l};return{shapeLayout:u({catSize:function(re){return re.drawThinner?I:a},catBase:function(re){return xe(re)+(re.drawThinner?W:0)},valueSize:function(re){return Math.abs((0,Y.sc)(s,0,re.value))},valueBase:this.isColumn?function(ie){return ue(n?Math.min(0,ie.value):Math.max(0,ie.value))}:function(ie){return ue(n?Math.max(0,ie.value):Math.min(0,ie.value))}}),shapeLayoutWithoutHighlights:u({catSize:function(re){return a},catBase:function(re){return xe(re)},valueSize:function(re){return Math.abs((0,Y.sc)(s,0,re.originalValue))},valueBase:this.isColumn?function(ie){return ue(n?Math.min(0,ie.originalValue):Math.max(0,ie.originalValue))}:function(ie){return ue(n?Math.max(0,ie.originalValue):Math.min(0,ie.originalValue))}}),zeroShapeLayout:u({catSize:function(re){return re.drawThinner?I:a},catBase:function(re){return xe(re)+(re.drawThinner?W:0)},valueSize:function(re){return 0},valueBase:this.isColumn?function(ie){return J}:function(ie){return ue(n?Math.max(0,ie.value):Math.min(0,ie.value))}}),uncertaintyLayout:{lower:function(re){var he,Ee;if(null!=(null===(he=re.uncertainty)||void 0===he?void 0:he.lower))return s(null===(Ee=re.uncertainty)||void 0===Ee?void 0:Ee.lower)},upper:function(re){var he,Ee;if(null!=(null===(he=re.uncertainty)||void 0===he?void 0:he.upper))return s(null===(Ee=re.uncertainty)||void 0===Ee?void 0:Ee.upper)}}}},e.ClassName="columnChart",e}(Fn),Ye=S(69871),En=S(42589),bo=S(40006),ws=S(80822),dr=S(51995),Rn=S(94038),nn=S(37865),Co=S(28326),mi=S(6714),yn=S(17772),Ao=S(45028),Do=S(66123),wo=S(92374),Lo=S(63892),Po=S(93907),Ls=(0,q.CH)("tooltip-overlay"),Ps={min:1,max:20};function es(r){return void 0===r&&(r=!1),(0,d.pi)({strokeShow:!0,strokeColor:void 0,strokeTransparency:0,strokeWidth:2,strokeLineJoin:Ai.t.round,strokePattern:k.Dv.solid,strokeDashArray:k.YU,strokeDashCap:k.xm,strokeAutoScale:!1,markerProperties:{show:!1,showMarkerByDefault:!0,shape:Ta.ZO.circle,size:Do.$V,color:void 0,transparency:0,rotation:0,stroke:{strokeShow:!0,strokePattern:k.Dv.solid,strokeColor:void 0,strokeTransparency:0,strokeWidth:void 0}},areaShow:r,areaColor:void 0,areaTransparency:60,areaMatchStrokeColor:!0},(0,yn.aQ)())}function _n(r){return r.strokeWidth/2+3}function ts(r,e,t){void 0===e&&(e=!1),void 0===t&&(t=!1);var a=(0,K.bT)({style:r,labelColor:Ge.v.getThemeColor(r,b.uQ),textClassName:"smallLightLabel"}).fontProperties;return(0,d.pi)((0,d.pi)({show:!1,showByDefault:!0},a),{bold:!1,italic:!1,underline:!1,position:Ea.h.auto,horizontalAlignment:wo.D.center,minimumOffset:void 0,maximumOffset:void 0,labelDensity:b.go,labelContainerMaxWidth:Ao.w9,labelContentLayout:Lo.v.SingleLine,optimizeLabelDisplay:!1,enableValueDataLabel:!t,fontProperties:a,displayUnits:0,precision:b.NZ,valueCustomFormatString:b.M3,enableTitleDataLabel:!1,titleFontProperties:a,titleLabelDisplayUnits:0,titleLabelPrecision:b.NZ,titleCustomFormatString:b.M3,enableDetailDataLabel:t,detailFontProperties:a,detailLabelDisplayUnits:0,detailLabelPrecision:b.NZ,detailCustomFormatString:b.M3,detailContentType:t?Po.W.Percent:void 0,leaderLine:(0,Bt.sW)(r),enableBackground:e,backgroundColor:e?Ge.v.getThemeColor(r,Oe.U):void 0,backgroundTransparency:e?b.r_:void 0})}function In(r){return _.some(r.anomalyDetections,function(e){return!_.isEmpty(e.anomaliesCategoryIndex)})}function as(r){return r.isAnomaly}function Ms(r){return r&&null!=r.points}function Ts(r,e,t){return zr.convertSvgXToClientX(er(r,e),r.currentViewport.scale,t)}var zr={convertSvgXToClientX:function(e,t,a){return e*t+a},convertSvgYToClientY:function(e,t,a){return e*t+a}};function Os(r,e){return r.activeData.isScalar?e.categoryValue:e.categoryIndex}function er(r,e){return r.xAxisProperties.scale(Os(r,e))+r.horizontalOffset}function Fr(r,e){var t;return e.isY2?null===(t=r.y2AxisProperties)||void 0===t?void 0:t.scale(e.value):r.yAxisProperties.scale(r.isStackedArea?e.stackedValue:e.value)}function Fs(r,e){var t,a;return e.isY2?null===(t=r.y2AxisProperties)||void 0===t?void 0:t.scale(e.uncertainty.lower):null===(a=r.yAxisProperties)||void 0===a?void 0:a.scale(e.uncertainty.lower)}function Vs(r,e){var t,a;return e.isY2?null===(t=r.y2AxisProperties)||void 0===t?void 0:t.scale(e.uncertainty.upper):null===(a=r.yAxisProperties)||void 0===a?void 0:a.scale(e.uncertainty.upper)}var ks=function(){function r(e){this.options=e,P.fF.assertValue(e.dataView,"dataView"),P.fF.assertValue(e.style,"style");var t=e.dataView,a=(0,f.Vk)(t.metadata);this.isScalar=(0,f.qU)(this.options.isScalar,a);var i=(0,f.Zo)(t.categorical,this.isScalar).category;this.isDateTime=(0,Y.v9)((0,w.getCategoryValueType)(i.source,this.isScalar)),this.reader=(0,da.G)(t,{staticSeriesRoleNames:this.valueRoleNames,colorOptions:{visualStyle:e.style,valueRole:this.primaryValueRole,ignoreDefaultColor:e.isComboChart,ignoreDefaultCategoryColor:!0},formatStringProp:Ye.zK.general.formatString,errorRangeProp:ua.Qx.errorRange})}return Object.defineProperty(r.prototype,"primaryValueRole",{get:function(){return this.options.isComboChart?mi.R.Y2:mi.R.Y},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"secondaryValueRole",{get:function(){return this.options.isComboChart?void 0:mi.R.Y2},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"valueRoleNames",{get:function(){return[this.primaryValueRole,this.secondaryValueRole].filter(function(t){return t})},enumerable:!1,configurable:!0}),r.convert=function(e){return new r(e).convert()},Object.defineProperty(r.prototype,"staticObjects",{get:function(){return this.reader.objects.getStaticObjects()},enumerable:!1,configurable:!0}),r.prototype.convert=function(){var e,t,a,i,n,s,o,l,u,c,h,g,y,D,x,A,M,O,I,W,J,ue,xe,ie,Oa,re=this.options,he=re.dataView,Ee=re.style,Ze=re.interactivityService,Ie=re.isStacked,tt=re.isStacked100,$e=re.isComboChart,Tt=re.anomalyDetectionDataView,Xt=re.tooltipsEnabled,Yt=void 0===Xt||Xt,wt=re.multipleInfo,Kt=re.hostServices,ha=(0,f.Vk)(he.metadata),ca=(0,f.Zo)(he.categorical,this.isScalar),Ft=ca.category,ea=ca.useScalarKeys,ga=ca.scalarKeys;ea&&((Oa=(0,Ae.ED)(Ft.source)).type={dateTime:!0});var ei,ci,Na,Ga,Ha=Ye.zK.general.formatString,xa=[],$a=[],ui=[],Xa=[],Pa=he.categorical.values,qa=!(!Pa||!Pa.source),ta=ts(Ee,$e,tt),Ua=Ge.v.create(Ee);if(wt){ei=_.first(wt.sources).metadata.queryName,Ga=wt.sources.map(function(Ba){return(0,U.Y)(Ba.metadata,Ba.value,wt.identity)}),ci=(new U.dw).withColumnIdentity(wt.identity,ei,Ga).createSelectionId();var hi=(0,Jn.F)(Ha);Na=(0,Ke.ML)(_.map(wt.sources,function(Ba){return hi(Ba.value,Ba.metadata)}))}this.staticObjects&&(0,K.AR)(this.staticObjects.labels,ta,void 0,Ee,$e);var ja=(0,d.pi)((0,d.pi)({},ta),{show:!1});this.options.supportsTotalLabels&&this.staticObjects&&(0,K.ww)(this.staticObjects.totals,ja,!1,Ee,$e);var Bi=null!==(e=Pa?.grouped())&&void 0!==e?e:void 0,hr=Ie&&Pa?.length>0?_.times(Pa[0].values.length,function(){return 0}):[],ri=this.reader.data,Ii=this.reader.columns,Li=ri.hasCategories()?ri.getCategoryCount():1,qt=ri.getSeriesCount();this.seriesColors=this.allocateSeriesColors(),this.staticLineStyle=this.readLineStyleFromObjects(null,Ee);var Si=Ii.getAllValueMetadataColumnsForRole(this.primaryValueRole);this.secondaryValueRole&&(Si=(0,d.ev)((0,d.ev)([],Si||[],!0),Ii.getAllValueMetadataColumnsForRole(this.secondaryValueRole)||[],!0));var bi,xi=[],Ya=[];Tt&&this.isScalar&&!Ie&&!$e&&(bi=(0,H.Eb)(Tt,he,Ee,Ha),P.fF.assert(function(){return bi.length===qt},"anomalyDetections length should be the same as series count"));var gt,Pi=(0,C.NA)(this.staticObjects,Ye.zK.layout.seriesOrderReversed,Ut.HQ.seriesOrderReversed),vr=this.getSeriesNames(),ni=mt(Ee),we=!1;if(_.some(this.valueRoleNames,function(Ba){return ri.hasValues(Ba)})){var Sa=this.reader.columns.getSeriesCount(this.primaryValueRole);if(we=!0,gt=qa?(0,Pe.xq)(ri.getSeriesDisplayName(),Ii.getSeriesMetadataColumn(),Ha):void 0,this.staticObjects){(0,K.FJ)(this.staticObjects.seriesLabels,ni,Ee,$e);var Zt=function(r,e){var t=1;if(e)for(var a=e.length,i=0;i<a;i++){var n=b.bN,o={text:e[i],fontFamily:r.family,fontSize:ze.FP.fromPoint(r.size.pt),fontWeight:n.fontWeight},l=ne.b.measureSvgTextWidth(o)+2*b.Bo;t=l>t?l:t}return t}(ni.fontProperties,vr);ni.defaultSeriesWidth=ni.defaultSeriesWidth?Zt:null,ni.maxWidthPercentage=ni.defaultSeriesWidth?Zt:ni.maxWidthPercentage}for(var Ki=[],ma=ta.fontProperties.color,Fa=tt?Ss(Li,qt,function(Ba,ir){return ri.getValueBySeries(ir,Ba)}):[],vi=function(ir){var va=Pi?qt-ir-1:ir,xr=ba.reader.labels.dynamicLabelReader.areDynamicValueLabelsEnabled(null===(t=ba.options.featureSwitches)||void 0===t?void 0:t.labelEnhancementsM0,va),kr=va>=Sa,br=Ii.getValueColumnBySeries(va),Ur=Bi&&Bi[va],si=Ki[va]=br.source,Cr=[],ln=U.dw.builder().withSeries(Pa,Ur,!0).withMeasure(si.queryName).createSelectionId(),Gr=ln.getKey(),Ti=void 0,Qt=(0,Ae.ED)(ni);if(ba.reader.data.hasSeries()||$e){var zi=$e&&!ba.reader.data.hasSeries()?ba.reader.objects.getValueMetadataObjectsBySeries(va):ba.reader.objects.getSeriesDataObjects(va),Er=zi?.labels,un=zi?.seriesLabels;(Ti=(0,Ae.ED)(ta)).show=ta.show&&(null===(a=ta.showByDefault)||void 0===a||a),Er&&(0,K.AR)(Er,Ti,void 0,Ee,$e),Qt.show=ni.show&&(null===(i=ni.showByDefault)||void 0===i||i),un&&(0,K.FJ)(un,Qt,Ee,$e)}for(var Fi,pi=(0,fn.nC)(si.objects,Ee,ba.seriesColors[va],va,(0,d.pi)((0,d.pi)({},ta),{show:!1}),{isCombo:$e,staticObjects:ba.staticObjects}),Oi=pi.hasUncertainty,Xi=Ti??ta,Ar=(null===(n=br.highlights)||void 0===n?void 0:n.length)>0,Zi=ba.readLineStyleFromObjects(va,Ee),jr=_.get(bi,va),Yr=jr?new H.LO(Kt,jr,si,Ha):void 0,Xn=!1,Kr=function(Jt,Wi){var Vi=Ft.values[Jt],Rr=ea?null===(s=ga.values[Jt])||void 0===s?void 0:s.min:Vi,fr=(0,Y.eT)(Ar?ri.getHighlightBySeries(Jt,va):ri.getValueBySeries(Jt,va)),cn=fr<0,Ni=tt?fr*Fa[Jt][cn?"neg":"pos"]:fr;if(ba.isScalar&&(null==Rr||null==Ni)||ba.isDateTime&&null!=Vi&&!(Vi instanceof Date))return Fi=Wi,"continue";if(Wi++,null==Ni&&(Pi?va<qt-1:va>0))return Fi=Wi,"continue";var _r=Ar?ri.getHighlightFormatStringBySeries(Jt,va):ri.getFormatStringBySeries(Jt,va),Xr=Oi?(0,fn.PT)(ri,Jt,va,Ni):void 0,nr=void 0,sr=void 0,Zr=Ft.source?(0,Ke.AD)(he.categorical.categories,Jt,Ha):void 0;if(Yt){if(nr=[],wt){var Qr=new Ca.E4;Qr.withMultipleColumnAndValues(wt.sources.map(function(Hi){return Hi.metadata}),wt.sources.map(function(Hi){return Hi.value}),!0,(0,Jn.F)(Ha)),nr.push.apply(nr,Qr.getTooltipItems())}Ft.source&&nr.push((0,Ke.bR)(Zr));var Qi=function(Lr){return(0,Pe.xq)(Lr,si,Ha,!1,_r)};if(qa&&(!Ft.source||Ft.source!==Pa.source)&&nr.push({displayName:Pa.source.displayName,value:(0,Pe.xq)(Bi[va].name,Pa.source,Ha)}),null!=Ni){var wn={displayName:si.displayName,value:ba.options.isStacked100?"".concat(Qi(fr)," (").concat((0,R.WU)(Ni,(0,R.Z)("Percentage")),")"):Qi(fr)},Qn=pi.tooltips;if(Oi&&Qn.show&&Qn.format===tn.K.range){var wr=(0,Mr.kS)(Xr,Ni,pi,Qi,Kt,{overrideDisplayName:si.displayName});P.fF.assert(function(){return void 0===wr||1===wr.length},"getUncertaintyTooltipItems() with 'range' format should return exactly one item or undefined when when bounds have not been set yet"),_.isEmpty(wr)||(wn=wr[0])}nr.push(wn)}Oi&&($e&&pi.tooltips.format!==tn.K.range?nr.push.apply(nr,null!==(o=(0,Mr.kS)(Xr,Ni,pi,Qi,Kt,{hideMarker:!0}))&&void 0!==o?o:[]):(0,Mr.$w)(Xr,Ni,pi,Qi,Kt)),(0,Ca.VT)(ba.reader,sr=[],Jt,qa?va:void 0,Ha);var Ln=Yr?.getTooltipItems(Jt,_r);Ln&&sr.push.apply(sr,Ln),sr=_.isEmpty(sr)?void 0:sr}var pr=new U.dw,or=null!==(l=he.categorical.originalCategories)&&void 0!==l?l:[Ft];ri.hasCategories()&&(pr=pr.withCategory(or,Jt,null===(c=null===(u=Ii.getCategoryColumn("Category"))||void 0===u?void 0:u.source)||void 0===c?void 0:c.queryName,!0)),qa&&(pr=pr.withSeries(Pa,Ur,!0)),wt&&(pr=pr.withColumnIdentity(wt.identity,ei,Ga)),null!==(h=Ya[Jt])&&void 0!==h||(Ya[Jt]={positive:0,positiveCount:0,negative:0,negativeCount:0,net:0,categoryValue:ba.convertCategoryValue(Rr,ba.isDateTime,ea),categoryIndex:Jt,dynamicFormatString:_r});var oi=Math.abs(Ni);isNaN(oi)||(cn?(Ya[Jt].net-=oi,Ya[Jt].net<Ya[Jt].negative&&(Ya[Jt].negative=Ya[Jt].net,Ya[Jt].negativeCount++)):(Ya[Jt].net+=oi,Ya[Jt].net>Ya[Jt].positive&&(Ya[Jt].positive=Ya[Jt].net,Ya[Jt].positiveCount++)));var dn={defaultColor:ma,seriesColor:Ti?.fontProperties.color,categoricalDataReader:ba.reader,categoryIndex:Jt,seriesIndex:va},Ir=(0,Bt.t$)(dn),Pn={dataPointLabelSettings:Xi,defaultLabelSettings:ta,categoricalDataReader:ba.reader,categoryIndex:Jt,seriesIndex:va,dynamicLabelsEnabledForSeries:xr,featureSwitches:ba.options.featureSwitches},Mn=(0,Bt.Xc)((0,d.pi)((0,d.pi)({},Pn),{detailPropertyId:Ye.zK.labels.dynamicLabelDetail,titlePropertyId:Ye.zK.labels.dynamicLabelTitle,dataLabelFillColorOptions:dn})),Jr=(0,Bt.tI)((0,d.pi)((0,d.pi)({},Pn),{valuePropertyId:Ye.zK.labels.dynamicLabelValue}));if(!Xn&&null!==(g=ba.options.featureSwitches)&&void 0!==g&&g.labelEnhancementsM0){var $r=Mn&&(null===(y=_.first(Mn.filter(function(Hi){return"Detail"===Hi.role})))||void 0===y?void 0:y.dynamicLabel.enabled);(0,Bt.hY)(Kt,!1,Jr?.enabled,$r,Xi),Xn=!0}Ie&&(hr[Jt]+=Ni);var Hi,Lr,Ji,gr,lr,Nr=(0,d.pi)({categoryValue:ba.convertCategoryValue(Rr,ba.isDateTime,ea),value:Ni,originalValue:fr,categoryIndex:Jt,seriesIndex:va,tooltipInfo:nr,selected:!1,identity:pr.withMeasure(si.queryName,Ii.getValueColumn(kr?mi.R.Y2:mi.R.Y,va),Jt).createSelectionId(),key:JSON.stringify({series:Gr,category:Ft&&!_.isEmpty(Ft.identity)&&Ft.identity[Jt]?Ft.identity[Jt].key:Jt}),labelFill:Ir.color,leaderLineColor:(0,Bt.Zj)(ta.leaderLine.strokeColor,Ti,dn,Ir),labelFormatString:_r||si.format,labelSettings:Xi,uncertainty:Xr,additionalTooltipItems:sr,marker:(Lr=Ye.zK.lineStyles.strokeColor,Ji=null===(Hi=Ft.objects)||void 0===Hi?void 0:Hi[Jt],gr=Ji&&Ua.hasColorForProperty(Ji,Lr),lr=Object.create(Zi.markerProperties),lr.perCategoryStyle=!!gr,lr.transparency=Zi.strokeTransparency,lr.color=gr?Ua.getColorForProperty(Ji,Lr,void 0):Zi.strokeColor,lr.show=!!gr||!!lr.show,lr.focusOnlySize=_n(Zi),lr.focusOnlyColor=Zi.strokeColor,lr),isY2:kr,dynamicLabelValue:Jr,stackedValue:Ie?hr[Jt]:void 0},(null===(D=ba.options.featureSwitches)||void 0===D?void 0:D.labelEnhancementsM0)&&{appendedLabelContents:Mn,labelDataPointContainerEnabled:!0});Cr[Wi]=Nr,null!==(x=xa[Jt])&&void 0!==x||(xa[Jt]=Vt(Nr,Zr)),xa[Jt]&&((ie=xa[Jt]).hasData||(ie.hasData=null!=Nr.value));var qr=function(Lr){var Ji,gr=(new U.dw).withCategory(or,Jt,null===(Ji=Ft?.source)||void 0===Ji?void 0:Ji.queryName,!0);return!qa&&1===qt&&gr.withMeasure(si.queryName),Lr&&wt&&gr.withColumnIdentity(wt.identity,ei,Ga),gr};ri.hasCategories()&&(null!==(A=$a[Jt])&&void 0!==A||($a[Jt]=qr(!1).createSelectionId()),null!==(M=ui[Jt])&&void 0!==M||(ui[Jt]=qr(!0).createSelectionId())),Fi=Wi},Dr=0,Zn=-1;Dr<Li;Dr++)Kr(Dr,Zn),Zn=Fi;var rr=_.findIndex(Si,si);-1!==rr&&(null!==(O=xi[rr])&&void 0!==O||(xi[rr]={metadataColumn:si,usedInSeriesIndices:[],valueSelector:(new U.dw).withMeasure(si.queryName,br).createSelectionId()}),xi[rr].usedInSeriesIndices.push(va)),Ze?.applySelectionStateToData(_.filter(Cr,function(Dn){return null!=Dn})),(Cr.length>0||wt?.isCoreMultiple)&&Xa.push({displayName:vr[va],key:Gr,index:va,xCol:ea?Oa:Ft.source,yCol:si,data:Cr,identity:ln,selected:!1,uncertainty:pi,labelSettings:Ti,seriesLabelSettings:Qt,type:si.type,measureDisplayName:si.displayName,lineStyle:Zi,isY2:kr})},ba=this,Ci=0;Ci<qt;Ci++)vi(Ci);this.addTotalTooltips(Pi,Xa,ja,Ya,Ki)}var ai=null===(W=null===(I=he.metadata)||void 0===I?void 0:I.dataReduction)||void 0===W?void 0:W.categorical;Ze?.applySelectionStateToData(Xa);var Mi=(0,C.NA)(this.staticObjects,Ye.zK.legend.legendMarkerRendering,nn._.markerCircleDefault),ar=(0,C.NA)(this.staticObjects,Ye.zK.legend.matchLineColor,!0);return{series:Xa,totals:Ya,legendData:(0,m.pq)({dataView:he,allowLegendWithNoSeries:$e,showByDefault:!0,staticSeriesRoleNames:$e?["Y2"]:["Y","Y2"],style:Ee,ignoreDefaultColor:$e,ignoreDefaultCategoryColor:!0,lineAndMarkerOptions:{renderLineStyle:!0,legendMarkerRendering:Mi,matchSeriesColor:ar,defaultMarkerShape:Ta.ZO.longDash},featureSwitches:this.options.featureSwitches}),forecastLines:this.convertForecastLines(xa,ea,$a,ui),anomalyDetections:bi,isScalar:this.isScalar,dataLabelsSettings:ta,totalLabelsSettings:ja,seriesLabelSettings:ni,hasDynamicSeries:qa,hasHighlights:!1,hasY2Role:(0,F.c5)(he,"Y2"),categoryMetadata:Ft.source,valuesMetadata:Si,valuesMetadataBySeries:xi,preferredCategoryWidth:(0,f.$K)(ha),scalarMetadata:Oa,scalarKeyCount:ea?ga.values.length:void 0,categories:Ft.values,categoryData:xa,seriesDisplayName:gt,hasValues:we,categoryIdentities:$a,multiplesCategoryIdentities:ui,lineStyle:this.staticLineStyle,binnedLineSamplingApplied:!!(null!==(J=ai?.metadata)&&void 0!==J&&J.binnedLineSample||null!==(ue=ai?.categories)&&void 0!==ue&&ue.binnedLineSample||null!==(xe=ai?.values)&&void 0!==xe&&xe.binnedLineSample),legendMarkerRendering:Mi,matchLineColor:ar,multipleIdentity:ci,multipleDisplayName:Na,layout:{seriesOrderReversed:Pi}}},r.prototype.addTotalTooltips=function(e,t,a,i,n){var s,o,l,u,c=this.options,h=c.hostServices,y=c.tooltipsEnabled;if(c.isStacked&&h&&(void 0===y||y)&&a.show)for(var x=this.reader.data.getSeriesCount(),A=a.fontProperties.color,M=[],O=0;O<x;O++){var I=e?x-O-1:O;if(t[I])for(var W=0,J=t[I].data;W<J.length;W++){var ue=J[W];if(ue){var xe=ue.categoryIndex,ie=(0,Bt.AO)({defaultColor:A,categoricalDataReader:this.reader,categoryIndex:xe,seriesIndex:I});i[xe].labelFill=ie.color;var re=(0,Bt.B8)(ie)?ie.color:A;a.fontProperties=(0,Bt.Vv)(re,a.fontProperties),null!==(s=M[xe])&&void 0!==s||(M[xe]={net:{displayName:h.getLocalizedString("Visual_Total"),value:(0,Pe.xq)(i[xe].net,n[I],Ye.zK.general.formatString,!1)}});var he=M[xe].net;null!==(o=ue.tooltipInfo)&&void 0!==o||(ue.tooltipInfo=[]),ue.tooltipInfo.push(he),null!==(l=(u=ue).additionalTooltipItems)&&void 0!==l||(u.additionalTooltipItems=[]),ue.additionalTooltipItems.push(he)}}}},r.prototype.convertForecastLines=function(e,t,a,i){var n,s,o,l=this.options,u=l.dataView,y=l.forecastDataView;if(y&&this.isScalar&&!l.isStacked&&!l.isComboChart){for(var D=(0,v.XB)(y,u,l.style,this.staticLineStyle),x=_.last(e),A=0,M=D;A<M.length;A++)for(var I=x.categoryIndex,W=0,J=M[A].points;W<J.length;W++){var ue=J[W];ue.point.x=this.convertCategoryValue(ue.point.x,this.isDateTime,t),ue.upperBound.x=this.convertCategoryValue(ue.upperBound.x,this.isDateTime,t),ue.lowerBound.x=this.convertCategoryValue(ue.lowerBound.x,this.isDateTime,t);var xe=ue.point.x;xe<=x.categoryValue||(null!==(n=e[++I])&&void 0!==n||(e[I]={categoryIndex:I,categoryValue:xe,hasData:null!=ue.point.y,hierarchyCategoryLevels:(0,Ke.AD)(u.categorical.categories,I,Ye.zK.general.formatString)}),null!==(s=a[I])&&void 0!==s||(a[I]=null),null!==(o=i[I])&&void 0!==o||(i[I]=null))}return D}},r.prototype.allocateSeriesColors=function(){for(var e=this.reader.data.getSeriesCount(),t=[],a=0;a<e;a++)t.push(this.reader.colors.createBySeries(a,void 0,Oe.fA));return t},r.prototype.getSeriesNames=function(){var e=this,t=this.reader.data.getSeriesCount();return _.range(t).map(function(a){return e.reader.columns.hasDynamicSeries()?(0,R.WU)(e.reader.data.getSeriesName(a),e.reader.objects.getSeriesFormatString(a)):e.reader.columns.hasStaticSeries()?e.reader.data.getSeriesName(a):e.reader.data.getValueDisplayName(e.primaryValueRole)})},r.prototype.convertCategoryValue=function(e,t,a){if(e&&(t||a)){var i=e;return P.fF.assert(function(){return(0,an.M4)(i)},"dateValue"),i.epochTimeStamp}return e},r.prototype.readLineStyleFromObjects=function(e,t){var a=Ye.zK.lineStyles,i=(0,C.NA)(this.staticObjects,Ye.zK.lineStyles.showSeries,!0),s=null!=e&&i?this.reader.objects.getSeriesDataObjects(e):this.staticObjects,o=this.staticLineStyle,l=o??es(this.options.isAreaChart);null!=e?P.fF.assert(function(){return null!=o},"If converting per-series line style, staticStyle must be defined"):P.fF.assert(function(){return null==o},"If converting static line style, staticStyle must be not-defined");var u=(0,d.pi)((0,d.pi)((0,d.pi)({},(0,Za.QI)(s,a,l)),{markerProperties:null==e?(0,Rn.RZ)(s,t):(0,Rn.Yh)(this.reader,o.markerProperties,e,t,!i),areaShow:(0,C.NA)(s,a.areaShow,l.areaShow),areaColor:(0,C.W7)(s,a.areaColor,l.areaColor),areaTransparency:(0,C.NA)(s,a.areaTransparency,l.areaTransparency),areaMatchStrokeColor:(0,C.NA)(s,a.areaMatchStrokeColor,l.areaMatchStrokeColor)}),(0,yn.RN)(s,a,l));return null!==e&&(u.strokeColor=this.seriesColors[e]),null!=e&&u.areaShow&&(u.areaShow=o.areaShow),u.areaMatchStrokeColor&&(u.areaColor=u.strokeColor),u},r}(),Oo=S(67918),Fo=S(72250);function Vo(){return{type:0,card:[Io.call(this),_o.call(this),ko.call(this),Eo.call(this),Ro.call(this),No.call(this),Bo.call(this)].filter(function(r){return r})}}function ko(){var e,t,r=this,a=this.originalData;if(a&&this.dataView){var i=a.series.length;if(0!==i){var n=(0,C.NA)(null===(t=null===(e=this.dataView)||void 0===e?void 0:e.metadata)||void 0===t?void 0:t.objects,Ye.qn.lineStyles.showSeries,!0);return new Se.CQ(new Se.lg("markers"),"Visual_Markers",Object.values(Ye.zK.markers).concat([Ye.zK.dataPoint.fill,Ye.zK.dataPoint.showAllDataPoints,Ye.zK.lineStyles.showSeries]),this.localizer).addTopLevelToggle("showMarkerTopLevel",function(){return new Se.bd({descriptor:Ye.qn.lineStyles.showMarker,value:a.lineStyle.markerProperties.show}).build()}).addGroup("applySettingsTo",function(s){return s.withContainerDisabled(!n).withDisplayName("Apply_Settings_To").withCollapsible(!1).addContainer("series",function(o){if(o.withDisplayName(i>1?"Series":"Visual_Categories").addContainerItem("all",r.localizer("All"),function(x){var A,M,O;if(rs.call(r,{containerItemBuilder:x,listType:i>1?"staticPerSeries":"staticPerCategories",markerStyle:(0,d.pi)((0,d.pi)({},a.lineStyle.markerProperties),{color:null!==(M=null!==(A=a.lineStyle.markerProperties.color)&&void 0!==A?A:a.lineStyle.strokeColor)&&void 0!==M?M:null===(O=a.series[0])||void 0===O?void 0:O.lineStyle.strokeColor})}),!n){var I=[Ye.qn.lineStyles.lineChartType,Ye.qn.lineStyles.lineStyle,Ye.qn.lineStyles.strokeWidth,Ye.qn.lineStyles.strokeLineJoin,Ye.qn.lineStyles.showMarker,Ye.qn.lineStyles.showMarkerByDefault,Ye.qn.lineStyles.markerShape,Ye.qn.lineStyles.markerSize,Ye.qn.lineStyles.markerColor,Ye.qn.dataPoint.showAllDataPoints,Ye.qn.dataPoint.fill];x.addSimpleSlice("showSeriesLink",function(){return new Se.ob({descriptor:Ye.qn.lineStyles.showSeries,value:function(){},ariaLabel:"Enable_This_Setting",type:"SeriesDialogLink",resetToDefaultDescriptors:I,warningIcon:!0}).build()},function(W){return W.withCustomDisplayName("Enable_This_Setting").withSuppressDisplayName(!0)})}}),1===i&&r.supportsPerCategoryMarker()){var l=function(r){for(var e=[],t=function(o){if(o&&r.categoryIdentities[o.categoryIndex])for(var l=0;l<r.series.length;l++){var c=_.findIndex(r.series[l].data,function(h){return h.categoryIndex===o.categoryIndex});if(c>=0){e.push({categoryIndex:o.categoryIndex,seriesIndex:l,dataPointIndex:c});break}}},a=0,i=r.categoryData;a<i.length;a++)t(i[a]);return e}(a),u=l.slice(0,ya.Rl);if(u.length<2)return;var c=ra(u,a);u.forEach(function(x,A){var M,O=x.categoryIndex,I=x.seriesIndex,W=x.dataPointIndex,J=(0,d.pi)((0,d.pi)({},_.cloneDeep(a.lineStyle.markerProperties)),{color:null!==(M=a.series[I].data[W].marker.color)&&void 0!==M?M:a.series[I].lineStyle.strokeColor}),xe=(0,He.fd)(a.categoryIdentities[O].getSelector());a.multipleIdentity&&(xe=(0,He.d9)(xe),P.fF.assert(function(){return!!xe.data},"expect categories to have some data identity"),xe.data.unshift((0,qn.Yp)([mi.R.Rows]))),o.addContainerItem(c[A],c[A],function(ie){return rs.call(r,{containerItemBuilder:ie,listType:"perCategory",markerStyle:J,selector:xe})})})}if(i>1)for(var h=function(A){var M=(0,He.fd)(A.identity.getSelector());if(!M)return"continue";o.addContainerItem(A.displayName,A.displayName,function(O){return rs.call(r,{containerItemBuilder:O,listType:"perSeries",markerStyle:A.lineStyle.markerProperties,selector:M})})},g=0,y=a.series;g<y.length;g++)h(y[g])})}).build()}}}function Eo(){var e,r=this,t=this.originalData,a=t.dataLabelsSettings,i=t.series.length,n=i>1||!t.categoryMetadata||this.isComboChart,s=this.isStacked?[Ea.h.auto,Ea.h.insideCenter,Ea.h.insideEnd]:[Ea.h.auto,Ea.h.above,Ea.h.under];a.position&&s.indexOf(a.position)<0&&(a.position=Ea.h.auto);var y,o=(0,d.pi)((0,d.pi)({},Ye.qn.labels),{position:Ye.qn.labels.labelPosition,precision:Ye.qn.labels.labelPrecision,displayUnits:Ye.qn.labels.labelDisplayUnits,labelBackgroundColor:Ye.qn.labels.backgroundColor,labelBackgroundTransparency:Ye.qn.labels.backgroundTransparency,showDynamicLabels:Ye.qn.labels.showDynamicLabels,dynamicLabelValue:Ye.qn.labels.dynamicLabelValue,leaderLines:Ye.qn.labels.leaderLines,maximumOffset:Ye.qn.labels.maximumOffset,minimumOffset:Ye.qn.labels.minimumOffset}),l=new Se.CQ(new Se.lg("labels"),"Visual_DataPointsLabels",o,this.localizer),u=(0,Bt.DU)(this.featureSwitches,t.hasDynamicSeries,n,i,this.isComboChart,!0),c=Es.call(this,void 0,a,null,n,s,u),h=this.isComboChart?void 0:sn.call(this,!1),g={cardBuilder:l,dataLabelsProps:o,featureSwitches:this.featureSwitches,hostServices:this.hostService,options:c,includeAltConstantValueSelector:!0,individualSelector:h,showEnhancedLabelsFormattingOptions:!0,instanceId:"all"};if(null!==(e=this.featureSwitches)&&void 0!==e&&e.labelEnhancementsM0&&this.dataView){var D=(y=(0,da.y)(this.dataView)).labels.dynamicLabelReader.getLabelFieldSourceTypes();Object.assign(g,{valueFieldSourceType:D.valueFieldSourceType,detailFieldSourceType:D.detailFieldSourceType,titleFieldSourceType:D.titleFieldSourceType,valueLabelPickerFallbackExpr:(0,Bt.WA)(t.valuesMetadataBySeries,i,t.hasDynamicSeries),dataLabelPickerSeriesType:(0,Bt.Nb)(i,t.hasDynamicSeries,this.isComboChart)})}return l.withDescription("Visual_DataPointsLabelsDescription"),o.show&&l.addTopLevelToggle("show",function(){return new Se.bd({descriptor:o.show,value:c.dataLabelsSettings.show}).build()}),l.addGroup("applySettingsTo",function(O){return O.withDisplayName("Apply_Settings_To").withCollapsible(!1).addContainer("series",function(I){var W,J;if(I.withDisplayName("Series"),I.addContainerItem("all",r.localizer("All"),function(Ee){return(0,K.WW)(g,Ee)}),n)for(var ue=0;ue<i;ue++){var xe=t.series[ue],ie=null!==(W=xe.labelSettings)&&void 0!==W?W:t.dataLabelsSettings;ie.position&&s.indexOf(ie.position)<0&&(ie.position=Ea.h.auto);var re=xe.identity.getSelector();if(Object.assign(g,{includeAltConstantValueSelector:!1,selector:t.hasDynamicSeries?(0,He.fd)(re):re,individualSelector:sn.call(r,!0),options:Es.call(r,void 0,ie,re,void 0,s,t.hasDynamicSeries),instanceId:"sn-".concat(ue)}),null!==(J=r.featureSwitches)&&void 0!==J&&J.labelEnhancementsM0){var he=y?.labels.dynamicLabelReader.getLabelFieldSourceTypes(ue);Object.assign(g,(0,d.pi)((0,d.pi)({},he?{valueFieldSourceType:he.valueFieldSourceType,detailFieldSourceType:he.detailFieldSourceType,titleFieldSourceType:he.titleFieldSourceType}:{}),{valueLabelPickerFallbackExpr:(0,Bt.CH)(t.valuesMetadataBySeries,ue),dataLabelPickerSeriesType:(0,Bt.aC)(i,t.hasDynamicSeries,r.isComboChart)}))}I.addContainerItem(xe.displayName,xe.displayName,function(Ee){return(0,K.WW)(g,Ee)})}})}),l.build()}function Ro(){var r=this;if(this.showSeriesCard()){var e=this.originalData,t=e.seriesLabelSettings,a=this.showLabelPerSeries(),i=(0,d.pi)((0,d.pi)({},Ye.qn.seriesLabels),{show:{objectName:"seriesLabels",propertyName:"show"}}),n=new Se.CQ(new Se.lg("seriesLabels"),"Visual_SeriesLabels",i,this.localizer),s={cardBuilder:n,seriesLabelsProps:i,featureSwitches:this.featureSwitches,hostServices:this.hostService,seriesOptions:{enumeration:void 0,seriesLabelsSettings:t,selector:null,style:this.style,showAll:a}};return n.withDescription("Visual_SeriesDescription"),i.show&&n.addTopLevelToggle("show",function(){return new Se.bd({descriptor:i.show,value:s.seriesOptions.seriesLabelsSettings.show}).build()}),n.addGroup("applySettingsTo",function(o){return o.withDisplayName("Apply_Settings_To").withCollapsible(!1).addContainer("series",function(l){var u;if(l.withDisplayName("Series").addContainerItem("all",r.localizer("All"),function(D){return(0,ve.eR)(s,D)}),r.showLabelPerSeries())for(var c=0,h=e.series;c<h.length;c++){var g=h[c],y=g.identity.getSelector();s.selector=e.hasDynamicSeries?(0,He.fd)(y):y,s.seriesOptions={enumeration:void 0,seriesLabelsSettings:null!==(u=g.seriesLabelSettings)&&void 0!==u?u:e.seriesLabelSettings,selector:y,style:r.style,showAll:void 0},l.addContainerItem(g.displayName,g.displayName,function(D){return(0,ve.eR)(s,D)})}})}).build()}}function _o(){var r=this,e=this.originalData;if(e&&e.series&&0!==e.series.length){var t=function(i){var n=i.lineStyle,s=i.selector;i.containerItemBuilder.addSimpleSlice("showSeries",new Se.bd({descriptor:(0,d.pi)((0,d.pi)({},Ye.qn.lineStyles.areaShow),{selector:s}),value:n.areaShow}).build(),function(o){return o.withDisabled(!s).withCustomDisplayName("Visual_Show_Data_Labels_PerSeries")}).addGroup("colors",function(o){return o.withDisplayName("Generic_Color").addSimpleSlice("shadeAreaMatchStrokeColor",new Se.bd({descriptor:(0,d.pi)((0,d.pi)({},Ye.qn.lineStyles.areaMatchStrokeColor),{selector:s}),value:n.areaMatchStrokeColor}).build()).addSimpleSlice("shadeAreaColor",new Se.BT({descriptor:(0,d.pi)((0,d.pi)({},Ye.qn.lineStyles.areaColor),{selector:s}),value:{value:n.areaColor}}).build(),function(l){return l.withDisabled(n.areaMatchStrokeColor)}).addSimpleSlice("shadeAreaTransparency",Se.JN.getTransparencySliderBuilder({descriptor:(0,d.pi)((0,d.pi)({},Ye.qn.dataPoint.transparency),{selector:s}),value:n.areaTransparency,localize:r.localizer}).build())})};return new Se.CQ(new Se.lg("shadeArea"),"Visual_Shapes_ShadeArea",[Ye.qn.lineStyles.areaShow,Ye.qn.dataPoint.transparency,Ye.qn.lineStyles.areaColor,Ye.qn.lineStyles.areaMatchStrokeColor],this.localizer).addTopLevelToggle("shadeAreaShow",function(){return new Se.bd({descriptor:Ye.qn.lineStyles.areaShow,value:r.data.lineStyle.areaShow}).build()}).addGroup("applySettingsTo",function(a){return a.withDisplayName("Apply_Settings_To").withCollapsible(!1).addContainer("series",function(i){if(i.withDisplayName("Series"),i.addContainerItem("all",r.localizer("All"),function(u){t.call(r,{containerItemBuilder:u,lineStyle:e.lineStyle})}),e.series.length>1)for(var n=function(c){i.addContainerItem(c.displayName,c.displayName,function(h){return t.call(r,{containerItemBuilder:h,lineStyle:c.lineStyle,selector:(0,He.fd)(c.identity.getSelector())})})},s=0,o=e.series;s<o.length;s++)n(o[s])})}).build()}}function Io(){var e,t,r=this,a=this.originalData;if(a&&a.series&&0!==a.series.length){var i=(0,C.NA)(null===(t=null===(e=this.dataView)||void 0===e?void 0:e.metadata)||void 0===t?void 0:t.objects,Ye.qn.lineStyles.showSeries,!0);return new Se.CQ(new Se.lg("lines"),"Visual_Lines",[Ye.qn.lineStyles.lineChartType,Ye.qn.lineStyles.interpolationStep,Ye.qn.lineStyles.interpolationSmooth,Ye.qn.lineStyles.interpolationSmoothParam,Ye.qn.lineStyles.strokeShow,Ye.qn.dataPoint.fill,Ye.qn.dataPoint.defaultColor,Ye.qn.lineStyles.lineStyle,Ye.qn.lineStyles.strokeWidth,Ye.qn.lineStyles.strokeLineJoin,Ye.qn.lineStyles.strokeTransparency,Ye.qn.lineStyles.strokeAutoScale,Ye.qn.lineStyles.strokeDashArray,Ye.qn.lineStyles.strokeDashCap,Ye.qn.layout.seriesOrderReversed],this.localizer).addGroup("applySettingsTo",function(n){return n.withDisplayName("Apply_Settings_To").withCollapsible(!1).withContainerDisabled(!i).addContainer("series",function(s){if(s.withDisplayName("Series").addContainerItem("all",r.localizer("All"),function(h){return Rs.call(r,{containerItemBuilder:h,lineStyle:a.lineStyle})}),a.series.length>1)for(var o=function(g){s.addContainerItem(g.displayName,g.displayName,function(y){return Rs.call(r,{containerItemBuilder:y,lineStyle:g.lineStyle,selector:(0,He.fd)(g.identity.getSelector())})})},l=0,u=a.series;l<u.length;l++)o(u[l])})}).build()}}function No(){if(this.supportsTotalLabels()){var e=this.originalData.totalLabelsSettings;if(e){var t=(0,d.pi)((0,d.pi)({},Ye.qn.totals),{precision:Ye.qn.totals.labelPrecision,displayUnits:Ye.qn.totals.labelDisplayUnits}),a=new Se.CQ(new Se.lg("totals"),"Visual_DataTotalLabels",t,this.localizer).withDescription("Visual_DataTotalLabelsDescription");return(0,K.XQ)({cardBuilder:a,dataLabelsProps:t,featureSwitches:this.featureSwitches,hostServices:this.hostService,options:Wo.call(this,void 0,e),individualSelector:sn.call(this,!1),showEnhancedLabelsFormattingOptions:!1})}}}function Bo(){var r=this;if(!this.isAreaChart){var e=this.originalData;if(e&&e.series&&0!==e.series.length){var t=ua.N_.error;return new Se.CQ(new Se.lg("errorBars"),"Visual_Error_Bars",[t.enabled,t.errorRange,t.barShow,t.barMatchSeriesColor,t.barColor,t.barWidth,t.barBorderColor,t.barBorderSize,t.shadeShow,t.shadeBandStyle,t.shadeColor,t.shadeMatchSeriesColor,t.shadeTransparency,t.labelShow,t.labelFontFamily,t.labelFontSize,t.labelBold,t.labelItalic,t.labelUnderline,t.labelColor,t.labelMatchSeriesColor,t.labelFormat,t.labelBackground,t.labelBackgroundColor,t.labelBackgroundTransparency,t.markerShape,t.markerShow,t.markerSize,t.showMarkerByDefault,t.tooltipShow,t.tooltipFormat],this.localizer,!0,!0).addGroup("applySettingsTo",function(a){return a.withDisplayName("Apply_Settings_To").withCollapsible(!1).addContainer("measure",function(i){i.withDisplayName("Series");for(var n=function(c){var h=_.first(c.usedInSeriesIndices);if(P.fF.assertValue(h,"lineChart - measure is not associated with any series"),null!=h){var g=c.metadataColumn,y=e.series[h];if(null==y)return"continue";var D=c.valueSelector.getSelector(),x=r.isComboChart?(0,qn.Yp)([mi.R.Rows,mi.R.Category]):(0,gn.Ue)(),A=(0,d.pi)((0,d.pi)({},D),{data:[x],highlightMatching:1});i.addContainerItem(g.queryName,g.displayName,function(M){return(0,bs.f)({localize:r.localizer,uncertainty:y.uncertainty,targetMeasure:c.metadataColumn.expr,measureSelector:D,dataPointSelector:A,featureSwitches:r.featureSwitches},M)})}},s=0,o=e.valuesMetadataBySeries;s<o.length;s++)n(o[s])})}).build()}}}function zo(r,e){var t=this.originalData;if(t)switch(e.objectName){case v.Po:if(this.supportsForecast()){var a=void 0;_.isEmpty(t.anomalyDetections)||(a=this.localizer("Visual_AnomalyDetection_WarningMessage_NoWithForecast")),(0,v.$I)(r,t.forecastLines,this.style,a)}break;case ws.xn:this.supportsAnomalyDetection()&&(0,Oo.HL)(this.hostService,this.data,this.dataView,r,t.anomalyDetections,this.style,t.isScalar,e.selectors)}}function Es(r,e,t,a,i,n){return{enumeration:r,dataLabelsSettings:e,show:!0,position:!0,positionObject:i,displayUnits:!this.isStacked100,precision:!0,selector:t,showAll:a,fontSize:!0,fontFamily:!0,labelDensity:this.data.isScalar,enableBackground:e.enableBackground,backgroundColor:e.backgroundColor,backgroundTransparency:e.backgroundTransparency,style:this.style,bold:!0,italic:!0,underline:!0,enableDynamicLabelPickers:!n,isStacked100:this.isStacked100,leaderLines:!this.isStacked&&!this.isComboChart}}function Wo(r,e){return{enumeration:r,dataLabelsSettings:e,show:!0,displayUnits:!0,precision:!0,fontSize:!0,fontFamily:!0,enableBackground:e.enableBackground,backgroundColor:e.backgroundColor,backgroundTransparency:e.backgroundTransparency,style:this.style,bold:!0,italic:!0,underline:!0}}function Ho(r,e){var t;if(!this.data)return[];var a=[];if(void 0===e||3===e)for(var n=0,s=this.data.series;n<s.length;n++){var o=s[n];if(o.lineStyle.markerProperties.show){var l=null===(t=o?.identity)||void 0===t?void 0:t.getSelectorsByColumn(),u=this.hostService.getLocalizedString("MiniToolbar_Markers",o.displayName);a.push(r.createVisualSubSelectionForSingleObject({objectName:"markers",subSelectionType:3,displayName:u,showUI:!0,selectorsByColumn:l}))}}return a}function Uo(r){var e;switch(d3.select(r).attr(We.Ez)){case"area":case"lines":var a=d3.select(r).datum(),i=null===(e=a?.identity)||void 0===e?void 0:e.getSelectorsByColumn();if(i)return i;break;case"data-labels":case"series-labels":var n=(0,Bt.wT)(r,this.data.series);if(n)return n;break;default:return}}function Go(r){var e,t,i=r.visualObjects[0].selectorsByColumn;if("markers"===r.visualObjects[0].objectName){var n=null===(e=this.activeData)||void 0===e?void 0:e.series;if(n)for(var s=0,o=n;s<o.length;s++){var l=o[s],u=null===(t=l.identity)||void 0===t?void 0:t.getSelectorsByColumn();if((0,He.Ic)(u,i))return is(l,this.viewModel)}}}function is(r,e){var t,a=e.renderContext.mainGraphicsPositionOverlay;if(a){var i=a.node();if(i){var n=i.getBoundingClientRect(),s=n.left,o=n.top,l=e.currentViewport,u=r.data,c=null!==(t=_.first(u))&&void 0!==t&&t.isY2?e.y2AxisProperties.scale:e.yAxisProperties.scale,h=l.scale,g=e.data.lineStyle.markerProperties.size*h,A=Math.max(g+1.2*g,10)*h;A%2==0&&++A;var M=1;if(u.length*A>l.width){var O=(0,st.SS)(l.width,50,4,A);M=Math.floor(u.length/O)}for(var I=[],W=0;W<u.length;W+=M){var J=u[W];J&&I.push({x:Math.floor(Ts(e,J,s)-A/2),y:Math.floor(zr.convertSvgYToClientY(c(J.value),h,o)-A/2),width:A,height:A,type:1})}var ue=e.data.multipleDisplayName;return[{id:ue?"".concat(r.key).concat(ue):r.key,outline:{type:0,outlines:I,clipPath:{type:1,x:s,y:o,height:e.availableHeight*h,width:e.availableWidth*h}}}]}}return[]}function jo(r){if("area"===r.visualObjects[0].objectName){var t=this.findSubSelectedAreaElement({x:d3.event.clientX,y:d3.event.clientY});return t?[t]:void 0}}function Yo(r){var a,i,t=_.first(r).visualObjects;if(t.length>0){(a=t[0])&&a.selectorsByColumn&&(i=(0,He.fd)((0,He.tV)(a.selectorsByColumn)));var n=1===this.data.series.length;switch(a.objectName){case"lines":return i?(0,se.w3)(this.hostService,(0,d.pi)((0,d.pi)({},Ye.zK.lineStyles.strokeColor),{selector:i}),null):void P.fF.assertFail("LineChart - line subselection should never have no selector");case"area":return i?(0,se.w3)(this.hostService,void 0,(0,d.pi)((0,d.pi)({},Ye.zK.lineStyles.strokeColor),{selector:i})):void P.fF.assertFail("AreaChart - area subselection should never have no selector");case"markers":return i?(i=n?void 0:i,(0,se.w3)(this.hostService,void 0,(0,d.pi)((0,d.pi)({},Ye.zK.markers.color),{selector:i}))):void P.fF.assertFail("LineChart - marker subselection should never have no selector");case"data-labels":var s=this.data.series.find(function(D){var x;return(0,He.Ic)(null===(x=D?.identity)||void 0===x?void 0:x.getSelectorsByColumn(),a.selectorsByColumn)});if(!s)return;var o=n?void 0:i,l=this.getSeriesAxisProperties(s),u=(0,st.d6)(l,this.data.dataLabelsSettings),c=Ye.qn.labels,h={fontFamilyReference:(0,d.pi)((0,d.pi)({},c.fontFamily),{selector:o}),fontSizeReference:(0,d.pi)((0,d.pi)({},c.fontSize),{selector:o}),boldReference:(0,d.pi)((0,d.pi)({},c.bold),{selector:o}),italicReference:(0,d.pi)((0,d.pi)({},c.italic),{selector:o}),underlineReference:(0,d.pi)((0,d.pi)({},c.underline),{selector:o}),fontColorReference:(0,d.pi)((0,d.pi)({},c.color),{selector:o}),displayUnitsReference:(0,d.pi)((0,d.pi)({},c.labelDisplayUnits),{selector:o}),precisionReference:(0,d.pi)((0,d.pi)({},c.labelPrecision),{selector:o}),backgroundReference:(0,d.pi)((0,d.pi)({},c.backgroundColor),{selector:o})};return(0,se.Jf)({hostServices:this.hostService,omitSelectorForSingleSeries:n,individualSelector:sn.call(this,!n),selector:i,repetitionSelector:void 0,subSelectionStylesOptions:{precision:{defaultPrecision:u.getPrecision(!1,s.type)}}},h);case"total-labels":var y=Ye.qn.totals;return(0,se.Jf)({hostServices:this.hostService,omitSelectorForSingleSeries:n,individualSelector:sn.call(this,!n),selector:i,repetitionSelector:void 0},{fontFamilyReference:y.fontFamily,fontSizeReference:y.fontSize,boldReference:y.bold,italicReference:y.italic,underlineReference:y.underline,fontColorReference:(0,d.pi)((0,d.pi)({},y.color),{selector:(0,Bt.hm)(sn.call(this,!1),void 0,void 0)}),displayUnitsReference:y.labelDisplayUnits,precisionReference:y.labelPrecision,backgroundReference:y.backgroundColor});default:return}}}function sn(r){return(0,K.WD)({featureSwitches:this.featureSwitches,hasCategories:null!=_.first(this.originalData.categories),hasDynamicSeries:this.originalData.hasDynamicSeries,hasSeriesSelector:r})}function Ko(r,e){if(!e){var i,n,a=_.first(r).visualObjects;if(!(a.length>0))return;i=a[0],_.isEmpty(i.selectorsByColumn)||(n=(0,He.fd)((0,He.tV)(i.selectorsByColumn)));var s={key:"Delete",nextValue:!1};switch(i.objectName){case"lines":case"area":return n?[{type:0,excludedResetFormattingIds:[Ye.qn.labels.show,(0,d.pi)((0,d.pi)({},Ye.qn.labels.showSeries),{selector:n}),(0,d.pi)((0,d.pi)({},Ye.qn.lineStyles.showMarker),{selector:n}),{objectName:"seriesLabels",propertyName:"show",selector:n}]},(0,d.pi)((0,d.pi)({type:2},Ye.qn.labels.showSeries),{enabledLabel:this.localizer("Format_AddDataLabels"),selector:n}),(0,d.pi)((0,d.pi)({type:2},Ye.qn.lineStyles.showMarker),{enabledLabel:this.localizer("Format_AddMarkers"),selector:n,keyboardShortcuts:[s]}),(0,d.pi)((0,d.pi)({type:2},{objectName:"seriesLabels",propertyName:"show"}),{enabledLabel:this.localizer("Format_AddSeriesLabel"),selector:n}),{type:1,destinationInfo:(0,d.pi)((0,d.pi)({},Ye.qn.lineStyles.lineStyle),{selector:this.data.series.length>1?n:void 0}),label:this.localizer("Format_Line")}]:void P.fF.assertFail("LineChart - line subselection should never have no selector");case"markers":return n?[(0,d.pi)((0,d.pi)({type:2},Ye.qn.lineStyles.showMarker),{disabledLabel:this.localizer("Delete"),selector:n,keyboardShortcuts:[s]}),{type:0,excludedResetFormattingIds:[(0,d.pi)((0,d.pi)({},Ye.qn.lineStyles.showMarker),{selector:n})]},{type:1,destinationInfo:(0,d.pi)((0,d.pi)({},Ye.qn.lineStyles.markerShape),{selector:this.data.series.length>1?n:void 0}),label:this.localizer("Format_Markers")}]:void P.fF.assertFail("LineChart - marker subselection should never have no selector");default:return}}}function Xo(r){var t,e=this,a=r.lineStyle,i=r.selector,n=r.containerItemBuilder,s=(0,Za.Iq)({containerItemBuilder:n,descriptors:{strokePattern:Ye.qn.lineStyles.lineStyle,strokeDashArray:Ye.qn.lineStyles.strokeDashArray,strokeAutoScale:Ye.qn.lineStyles.strokeAutoScale,strokeDashCap:Ye.qn.lineStyles.strokeDashCap,strokeLineJoin:Ye.qn.lineStyles.strokeLineJoin,strokeWidth:Ye.qn.lineStyles.strokeWidth},strokeData:a,selector:i,isSVGStroke:!0,featureSwitches:this.featureSwitches,localize:this.localizer});null===(t=s.find(function(o){return(0,$n.cd)(o.getSimpleControlDescriptor(),Ye.zK.lineStyles.strokeLineJoin)}))||void 0===t||t.withDisabled(!a.strokeShow||a.interpolation===Fo.Fu.smooth,"Visual_StrokeLineJoinDisabledReason"),n.addGroup("shape",function(o){return o.withDisplayName("Visual_Shape_Line").addSlices(s.map(function(l){return l.build()})).addSlices((0,yn.Ie)({containerItemBuilder:n,descriptors:(0,d.pi)((0,d.pi)({},Ye.qn.lineStyles),{interpolation:Ye.qn.lineStyles.lineChartType}),interpData:a,selector:i,localize:e.localizer,featureSwitches:e.featureSwitches,disabledIfHasSelector:!0}).map(function(l){return l.build()}))})}function Zo(r){var e,t,a,i=r.selector,n=r.lineStyle,s=r.containerItemBuilder,o=!i&&this.hasSingleStaticSeries,l=(0,Za.Iq)({containerItemBuilder:s,descriptors:{strokeColor:Ye.qn.dataPoint.fill,strokeTransparency:Ye.qn.lineStyles.strokeTransparency},strokeData:(0,d.pi)((0,d.pi)({},n),{strokeColor:o?null===(e=this.data.series[0])||void 0===e?void 0:e.lineStyle.strokeColor:n.strokeColor}),selector:i,colorSelector:o?(0,He.fd)(null===(t=this.data.series[0])||void 0===t?void 0:t.identity.getSelector()):i,featureSwitches:this.featureSwitches,localize:this.localizer});null===(a=l.find(function(u){return(0,$n.cd)(u.getSimpleControlDescriptor(),Ye.zK.lineStyles.strokeColor)}))||void 0===a||a.withDisabled(!this.hasSingleStaticSeries&&!i,"Visual_Color_AllSeries_DisabledReason"),s.addGroup("colors",function(u){return u.withDisplayName("Generic_Color").addSlices(l.map(function(c){return c.build()}))})}function Qo(r){var e=this;this.isStacked&&null==r.selector&&(this.originalData.hasDynamicSeries||this.originalData.series.length>1)&&r.containerItemBuilder.addGroup("layout",function(t){return t.withDisplayName("Layout").addSimpleSlice("seriesOrderReversed",new Se.bd({descriptor:Ye.qn.layout.seriesOrderReversed,value:e.data.layout.seriesOrderReversed}).build())})}function Rs(r){var e=r.selector,t=r.lineStyle;r.containerItemBuilder.addSimpleSlice("showSeries",new Se.bd({descriptor:(0,d.pi)((0,d.pi)({},Ye.qn.lineStyles.strokeShow),{selector:e}),value:t.strokeShow}).build(),function(a){return a.withCustomDisplayName(e?"Visual_Show_Data_Labels_PerSeries":"Visual_ShowForAllSeries")}),Xo.call(this,r),Zo.call(this,r),Qo.call(this,r)}function rs(r){var e=this,t=r.markerStyle,a=r.selector,i=r.listType;r.containerItemBuilder.addSimpleSlice("showMarker",new Se.bd({descriptor:(0,d.pi)((0,d.pi)({},Ye.zK.markers.show),{selector:a}),value:t.show}).build(),function(n){return n.withDisabled(!a).withHidden("perCategory"===i||"staticPerCategories"===i)}).addGroup("markers",function(n){return n.withDisplayName("Visual_Shape").withDisabled(!t.show||"perCategory"===i).addSimpleSlice("markerShape",new Se.uY({descriptor:(0,d.pi)((0,d.pi)({},Ye.zK.markers.shape),{selector:a}),value:t.shape}).build()).addSimpleSlice("markerSize",new Se.mu({descriptor:(0,d.pi)((0,d.pi)({},Ye.zK.markers.size),{selector:a}),value:t.size,options:{minValue:{type:0,value:Ps.min},maxValue:{type:1,value:Ps.max},unitSymbol:pn.e_}}).build()).addSimpleSlice("markerRotation",Se.JN.getRotationSliderBuilder({descriptor:(0,d.pi)((0,d.pi)({},Ye.zK.markers.rotation),{selector:a}),value:t.rotation,localize:e.localizer}).build(),function(s){return s.withHidden(!e.featureSwitches.newMarkerProperties||!(0,Ta.Cd)(t.shape))})}).addGroup("colors",function(n){return n.withDisplayName("Generic_Color").withDisabled(!t.show).addSimpleSlice("markerColor",new Se.BT({descriptor:(0,d.pi)((0,d.pi)({},"perCategory"===i?(0,d.pi)((0,d.pi)({},Ye.zK.dataPoint.fill),{instanceKind:1}):Ye.zK.markers.color),{selector:a}),value:{value:t.color}}).build()).addSimpleSlice("markerTransparency",Se.JN.getTransparencySliderBuilder({descriptor:(0,d.pi)((0,d.pi)({},Ye.zK.markers.transparency),{selector:a}),value:t.transparency,localize:e.localizer}).build(),function(s){return s.withHidden(!e.featureSwitches.newMarkerProperties)})}),this.featureSwitches.newMarkerProperties&&r.containerItemBuilder.addGroup("border",function(n){return n.withDisplayName("Visual_Border").withDisabled(!(0,Ta.nK)(t.shape)||!t.show||"perCategory"===i).addSlices((0,Za.Iq)({containerItemBuilder:n,descriptors:ua.$9,strokeData:t.stroke,selector:a,featureSwitches:e.featureSwitches,localize:e.localizer}).map(function(s){return s.build()}))})}function Jo(r,e){if(!this.featureSwitches.onObject||1!==e)return[];var t=this.isComboChart?xs.OA:Ye.qn,a=this.data.series.map(function(o){return{selector:o.identity.getSelector(),value:o.lineStyle.markerProperties.show}}),i=this.data.series.map(function(o){var l;return{selector:o.identity.getSelector(),value:null===(l=o.seriesLabelSettings)||void 0===l?void 0:l.show}}),n=this.data.series.map(function(o){var l;return{selector:o.identity.getSelector(),value:null===(l=o.labelSettings)||void 0===l?void 0:l.show}}),s=[Tr.v.create(t.lineStyles.showMarker,this.data.lineStyle.markerProperties.show,a).onToggleEnabled(Ka.W.createBooleanDataViewObjectChange(t.lineStyles.showMarkerByDefault,!1,{required:!0}),Ka.W.createBooleanDataViewObjectChange(t.lineStyles.showMarker,!0,{required:!0})).onToggleDisabled(Ka.W.createRevertToDefaultDataViewObjectChange("lineStyles",{required:!0})),Or.$.create(t.lineStyles.showMarker,this.data.lineStyle.markerProperties.show).onToggleDisabled(Ka.W.createRevertToDefaultDataViewObjectChange("lineStyles",{required:!0})),Tr.v.create(Ye.qn.seriesLabels.backgroundColor,this.data.seriesLabelSettings.enableBackground).onToggleEnabled(Ka.W.createBooleanDataViewObjectChange(Ye.qn.seriesLabels.enableBackground,!0,{required:!0,inheritSelector:!0})),Or.$.create(Ye.qn.seriesLabels.backgroundColor,this.data.seriesLabelSettings.enableBackground).onToggleEnabled(Ka.W.createBooleanDataViewObjectChange(Ye.qn.seriesLabels.enableBackground,!0,{required:!0})),Tr.v.create(Ye.qn.seriesLabels.show,this.data.seriesLabelSettings.show,i).onToggleEnabled(Ka.W.createBooleanDataViewObjectChange(Ye.qn.seriesLabels.showByDefault,!1,{required:!0}),Ka.W.createBooleanDataViewObjectChange(Ye.qn.seriesLabels.show,!0,{required:!0})).onToggleDisabled(Ka.W.createRevertToDefaultDataViewObjectChange("seriesLabels",{required:!0})),Or.$.create(Ye.qn.seriesLabels.show,this.data.seriesLabelSettings.show).onToggleDisabled(Ka.W.createRevertToDefaultDataViewObjectChange("seriesLabels",{required:!0})),Tr.v.create(t.labels.backgroundColor,this.data.dataLabelsSettings.enableBackground).onToggleEnabled(Ka.W.createBooleanDataViewObjectChange(t.labels.enableBackground,!0,{inheritSelector:!0})),Or.$.create(t.labels.backgroundColor,this.data.dataLabelsSettings.enableBackground).onToggleEnabled(Ka.W.createBooleanDataViewObjectChange(t.labels.enableBackground,!0)),Tr.v.create(t.labels.showSeries,this.data.dataLabelsSettings.show,n).onToggleEnabled(Ka.W.createBooleanDataViewObjectChange(t.labels.showByDefault,!1),Ka.W.createBooleanDataViewObjectChange(t.labels.show,!0)).onToggleDisabled(Ka.W.createRevertToDefaultDataViewObjectChange("labels")),Or.$.create(t.labels.show,this.data.dataLabelsSettings.show).onToggleDisabled(Ka.W.createRevertToDefaultDataViewObjectChange("labels"))];return et.o.getDataViewObjectsBehaviorChanges(r,s)}var qo=S(34519),_s=S(12198),mn=S(64067),el=function(){function r(e){this.dataPoints=e.dataPoints,this.isComboChart=e.isComboChart,this.isScalar=e.isScalar,this.hasCategories=e.hasCategories}return r.prototype.queryRegion=function(e){var t=this,a=[],i=e.dataSpace;return(this.isScalar||this.hasCategories&&void 0!==i.left&&void 0!==i.right)&&(a=_.filter(this.dataPoints,function(n){return(0,G.bl)(i.left.value,t.isScalar?n.categoryValue:n.categoryIndex)&&(0,G.bl)(t.isScalar?n.categoryValue:n.categoryIndex,i.right.value)&&(0,G.bl)(t.getBottom(i,n),n.value)&&(0,G.bl)(n.value,t.getTop(i,n))})),a},r.prototype.getBottom=function(e,t){return t.isY2||this.isComboChart&&e.bottom2?e.bottom2.value:e.bottom.value},r.prototype.getTop=function(e,t){return t.isY2||this.isComboChart&&e.top2?e.top2.value:e.top.value},r}(),Sn=(0,q.CH)("line"),Nn=(0,q.CH)("focus-element"),Ns=(0,q.CH)("position-rect"),ss=(0,q.CH)("cat"),xn=(0,q.CH)("catArea"),Bs=(0,q.CH)("dot"),zs=(0,q.CH)("point"),os=(0,q.CH)("circle-item"),Bn=(0,q.CH)("marker-line"),ls=(0,q.CH)("interactivity-line"),us=(0,q.CH)("selected-markers"),Wr="path",zn="circle",Ws=(0,q.CH)("selection-circle"),Hs=(0,q.CH)("selection-circles");function dl(r,e){var t=this,a=this.getChartX(r);e.length>0&&Us.call(this,a),this.hoverLineContext.selectAll(os.selector).data(_.filter(e,function(i){return i.showHoverlineDots&&null!=i.value})).join(function(i){return i.append(zn).classed(os.class,!0)}).attr("fill",function(i){return i.marker.color}).attr("r",_n(this.data.lineStyle)).attr("cx",a).attr("cy",function(i){return Fr(t.viewModel,i)})}function hl(){this.hoverLine.style("opacity",Va.OH),this.hoverLineContext.selectAll(os.selector).remove()}function vl(){this.hoverLineContext=this.mainGraphicsSVG.append("g").classed("hover-line",!0),this.hoverLine=this.hoverLineContext.append("line").classed("interactive",this.mobileTileInteractive).attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",0).style("opacity",Va.OH).style("stroke",Ge.v.getThemeColor(this.style,"foregroundNeutralSecondary")),this.mobileTileInteractive&&(this.dragHandle=this.hoverLineContext.append("circle").attr("cx",0).attr("r","6px").classed("drag-handle",!0),this.hoverLineContext.append("g").classed(Hs.class,!0))}function Us(r){this.hoverLine.attr("x1",r=r||0).attr("x2",r).attr("y1",0).attr("y2",this.availableHeight).style("opacity",1)}function fl(r,e){var t=this;Us.call(this,r),this.mobileTileInteractive&&(this.dragHandle.attr("cx",r).attr("cy",this.availableHeight),this.hoverLineContext.select(Hs.selector).selectAll(Ws.selector).data(this.activeData.series,function(a){return a.identity.getKey()}).join(function(a){return a.append(zn).classed(Ws.class,!0)}).attr("r",_n(this.activeData.lineStyle)).attr("cx",r).attr("cy",function(a){return a.data[e]?Fr(t.viewModel,a.data[e]):0}).style("opacity",function(a){return _.some(a.data,function(i){return!!i&&i.categoryIndex===e})?1:0}).style("fill",function(a){return a.lineStyle.strokeColor}))}function bn(r){return r&&null!==r.value}function cs(r,e){return(e?_.findLast:_.find)(r.data,function(a,i,n){var s=e?n[i-1]:n[i+1];return null!=a&&null!=a.value&&null!=s&&null!=s.value})}var Gs={findSubSelectedAreaElement:function(e,t){if(null!=e.renderContext.mainGraphicsSVG){var a=e.renderContext.mainGraphicsSVG.selectAll(Sn.selector).filter(function(n){return n.data.some(function(s){return bn(s)})}).nodes(),i=function(r,e,t){for(var a,i=Number.MAX_VALUE,s=r.renderContext.mainGraphicsSVG.node().getBoundingClientRect(),o=s.left,l=s.top,u=0;u<t.length;u++){var h=Cl(e.x,t[u],function(y){return zr.convertSvgXToClientX(y,r.currentViewport.scale,o)},function(y){return zr.convertSvgYToClientY(y,r.currentViewport.scale,l)}).y,g=e.y-h;g>=-4&&i>(g=Math.abs(g))&&(i=g,a=u)}return a}(e,t,a);if(null!=i)return e.renderContext.mainGraphicsSVG.selectAll(xn.selector).filter(function(n){return n.index===i}).node()}}};function Cl(r,e,t,a){for(var n,l,s=0,o=e.getTotalLength();n=e.getPointAtLength(l=s+o>>1),(0,Va.lO)(n),t&&(n.x=t(n.x)),a&&(n.y=a(n.y)),l!==o&&l!==s||n.x===r;)if(n.x>r)o=l;else{if(!(n.x<r))break;s=l}return n}function Wn(r,e){return r.renderContext.mainGraphicsContext.selectAll(Nn.selector).data(e?[e]:[]).join(function(t){return t.append(zn).attr("class",Nn.class).attr("tabindex",0).attr("focusable",!0).attr("role","option").classed(Da.Pg,!It.M.isInternetExplorerOrEdge())}).attr("aria-selected",function(t){return t.selected}).attr("aria-label",function(t){var a,i;if(as(t))return r.hostService.getLocalizedString("Anomaly_ScreenReader_Hint");var n=!1;In(r.activeData)&&(n=_.some(r.activeData.anomalyDetections[0].anomaliesCategoryIndex,function(l){return l===t.categoryIndex}));var o=(0,ii.X)(t.tooltipInfo);return!(null===(a=t?.uncertainty)||void 0===a)&&a.upperTooltip&&(o+=" ".concat((0,ii.X)([t.uncertainty.upperTooltip]))),!(null===(i=t?.uncertainty)||void 0===i)&&i.lowerTooltip&&(o+=" ".concat((0,ii.X)([t.uncertainty.lowerTooltip]))),n&&(o+=" ".concat(r.hostService.getLocalizedString("AnomalyPoint_ScreenReader_Hint"))),o}).attr("cx",function(t){return er(r,t)}).attr("cy",function(t){return as(t)?(0,En.v8)(t,r.yAxisProperties.scale,r.activeData.anomalyDetections[0].marker.size):Fr(r,t)}).attr("r",function(t){return as(t)?(0,En.bj)(r.activeData.anomalyDetections[0].marker.size):t.marker.show?t.marker.size*dr.Wo.sizeRatio:t.marker.focusOnlySize}).style("fill","none")}var Al=function(){function r(e,t,a){this.tooltipService=e,this.mainGraphicsSVG=t,this.supportsHoverLineTooltip=a,this.isHoverLineTooltipActive=!1,a&&(this.hoverLineTooltipOverlay=t.append("rect").classed(Ls.class,!0))}return r.prototype.applyTooltips=function(e,t,a){!this.supportsHoverLineTooltip||e.activeData.binnedLineSamplingApplied&&e.activeData.hasDynamicSeries?this.applyPointTooltip(e,t,a):this.applyHoverLineTooltip(e,t,a)},r.prototype.removeTooltips=function(e,t){this.removePointTooltip(e),this.removeHoverLineTooltip(t)},r.prototype.applyHoverLineTooltip=function(e,t,a){this.removePointTooltip(e),this.hoverLineTooltipOverlay.attrs({x:0,width:e.availableWidth,height:e.availableHeight}),this.tooltipService.addTooltip(this.mainGraphicsSVG,function(s){var c,l=t.getCategoryIndexFromTooltipEvent(s,s.elementCoordinates[0]),u=a.getHoverLineDataForCategory(l);return u&&u.hasUncertainty&&(c=t.getYValueFromTooltipEvent(s.elementCoordinates[1],s.context)),r.getSeriesTooltipInfo(u,c)},function(n){return r.getCategoryIdentityForHoverLineTooltipEvent(t,a,n)},!0),this.mainGraphicsSVG.on("mouseout.hoverline",function(){return a.clearHoverLine()}),this.mainGraphicsSVG.on("touchmove.hoverline",function(){return a.clearHoverLine()}),this.setHoverLineTooltipActive(!0)},r.prototype.removeHoverLineTooltip=function(e){this.isHoverLineTooltipActive&&(e.clearHoverLine(),this.tooltipService.removeTooltips(this.mainGraphicsSVG),this.mainGraphicsSVG.on(".hoverline",null),this.setHoverLineTooltipActive(!1))},r.prototype.setHoverLineTooltipActive=function(e){this.isHoverLineTooltipActive=e},r.prototype.applyPointTooltip=function(e,t,a){this.removeHoverLineTooltip(a);var n=e.isComboChart?function(o){return r.getCategoryIdentityForHoverLineTooltipEvent(t,a,o)}:function(o){return o.data&&[o.data.identity]},s=function(l){var u;return null===(u=l.data)||void 0===u?void 0:u.tooltipInfo};this.tooltipService.addTooltip(e.interactivityLines,function(l){return t.getTooltipInfoForPoint(l,l.elementCoordinates[0])},n,!0),this.tooltipService.addTooltip(e.dots,s,n,!0),this.tooltipService.addTooltip(e.explicitDots,s,n,!0),this.tooltipService.addTooltip(e.focusElement,s,n,!0)},r.prototype.removePointTooltip=function(e){this.isHoverLineTooltipActive||(this.tooltipService.removeTooltips(e.interactivityLines),this.tooltipService.removeTooltips(e.dots),this.tooltipService.removeTooltips(e.explicitDots))},r.getCategoryIdentityForHoverLineTooltipEvent=function(e,t,a){var i;if(a){if(a.data&&Ms(a.data))return null;var s=e.getCategoryIndexFromTooltipEvent(a,a.elementCoordinates[0]);return t.getHoverLineIdentities(s,null===(i=a.data)||void 0===i?void 0:i.data)}},r.getSeriesTooltipInfo=function(e,t){var a,i,n,s,o;if(!e)return null;var l=e.dataPoints;if(_.isEmpty(l))return null;var u={show:!1,color:"#000000",transparency:100,shape:Ta.ZO.circle},c=!_.isEmpty(l)&&l[0].seriesDisplayName,h=[],g=function($e){return!(h.length>=r.MaxNumberOfItems||(h.push($e),0))},y=e.legendMarkerRendering,D=y!==nn._.markerOnly&&y!==nn._.markerCircleDefault,x=l[0].additionalTooltipItems,M=function($e){return D?$e.line:void 0};if(l.every(function(tt){return _.isEqual(tt.additionalTooltipItems,x)})){var O=[];for(var I in l)if(null!=(W=l[I]).value){if(!g({header:W.category,subheader:W.multipleDisplayName,displayName:W.seriesName||W.measureDisplayName,value:null!==(n=null===(i=null===(a=W.uncertainty)||void 0===a?void 0:a.rangeTooltip)||void 0===i?void 0:i.value)&&void 0!==n?n:W.formattedValue,marker:W.marker,line:M(W)}))break;O.push(+I)}e.hasUncertainty&&(P.fF.assertValue(t,"expect to have VerticalPositionInfo if uncertainty information present"),h=function(r,e,t,a){P.fF.assert(function(){return r.length===t.length},"augmentTooltipInfoWitUncertainty -- expected length of tooltipItems and mapping array to be identical");for(var i=[],n=1/0,s=-1,o=0,l=t.length;o<l;o++)if((c=e[t[o]]).uncertainty)if(c.isY2)(h=Math.abs(c.value-a.y2.point))<a.y2.threshold?i.push(o):h<n&&(n=h,s=o);else{var h;(h=Math.abs(c.value-a.y.point))<a.y.threshold&&i.push(o),h<n&&(n=h,s=o)}var g=[];for(o=0,l=t.length;o<l;o++){var c=e[t[o]],y=r[o];if(_.includes(i,o)||s===o){var x=c.uncertainty;P.fF.assertValue(x,"added point as having error when no uncertainty info exists"),x.upperTooltip&&g.push((0,d.pi)({header:c.category,subheader:c.multipleDisplayName},x.upperTooltip)),g.push(y),x.lowerTooltip&&g.push(x.lowerTooltip)}else g.push(y)}return g}(h,l,O,t));for(var J=0,ue=x??[];J<ue.length&&g({displayName:(xe=ue[J]).displayName,value:xe.value,marker:u});J++);}else for(var ie=0,re=l;ie<re.length;ie++){var W=re[ie];if(h.length>=r.MaxNumberOfItems)break;if(null!=W.value){c&&g({header:W.category,subheader:W.multipleDisplayName,displayName:W.seriesDisplayName,value:W.seriesName,marker:W.marker,line:M(W)}),g({header:W.category,subheader:W.multipleDisplayName,displayName:c?W.measureActualDisplayName:W.measureDisplayName,value:W.formattedValue,marker:c?u:W.marker,line:c?void 0:M(W)});for(var he=0,Ee=null!==(s=W.additionalTooltipItems)&&void 0!==s?s:[];he<Ee.length&&g({header:W.category,subheader:W.multipleDisplayName,displayName:(xe=Ee[he]).displayName,value:xe.value,marker:u});he++);}}for(var Ze=0,Ie=null!==(o=e.additionalTooltipItems)&&void 0!==o?o:[];Ze<Ie.length;Ze++){var xe;if(!g({header:l[0].category,subheader:l[0].multipleDisplayName,displayName:(xe=Ie[Ze]).displayName,value:xe.value,marker:u}))break}return 0===h.length?null:h},r.MaxNumberOfItems=15,r}(),mr=Ye.zK.general.formatString,wl=function(r){function e(t){var a=r.call(this,t)||this;return a.options=t,a.pathXAdjustment=0,a.deferDragMoveOperation=(0,gi.S5)(function(){if(a.lastDragMoveXPosition&&a.data&&a.margin){var i=e.findCategoryIndex({pointX:a.lastDragMoveXPosition-a.margin.left,offsetX:0,categoryData:a.data.categoryData,currentViewport:a.currentViewport,scale:a.xAxisProperties.scale,categoryThickness:a.xAxisProperties.categoryThickness,isScalar:a.data.isScalar});a.selectColumn(i),a.lastDragMoveXPosition=void 0}}),a.tooltipsEnabledOnHost=t.tooltipsEnabled,a.markerRenderer=new dr.Wo,a.anomalyNavigationHelper=new bo.B,a}return(0,d.ZT)(e,r),e.getInteractiveLineChartDomElement=function(t){return t.children("svg").get(0)},e.createStackedValueDomain=function(t,a){if(P.fF.assertValue(t,"data"),0===t.length)return null;var i=[d3.min(t,function(s){return d3.min(s.data,function(o){return o&&o.stackedValue})}),d3.max(t,function(s){return d3.max(s.data,function(o){return o&&o.stackedValue})})];if(a){var n=1e-4;i[0]=(0,G.W0)(i[0],n),i[1]=(0,G.W0)(i[1],n)}return i},Object.defineProperty(e.prototype,"lineChartType",{get:function(){return this.options.lineChartType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isAreaChart",{get:function(){return 2===this.lineChartType||16===this.lineChartType||32===this.lineChartType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isStacked",{get:function(){return 16===this.lineChartType||32===this.lineChartType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isStacked100",{get:function(){return 32===this.lineChartType},enumerable:!1,configurable:!0}),e.prototype.initRenderer=function(t){var a=this;if(r.prototype.initRenderer.call(this,t),this.svg.classed(e.ClassName,!0),this.mainGraphicsSVG=this.svg.append("svg").classed(e.lineChartSVGClassName,!0),this.svgDefs=this.mainGraphicsSVG.append("defs"),this.lineChartTooltipHelper=new Al(this.tooltipService,this.mainGraphicsSVG,!this.isComboChart&&!this.mobileTileInteractive),this.mainGraphicsContext=this.mainGraphicsSVG.append("g").attr("role","listbox").attr("aria-label",this.localizer("Visual_Plot")).attr("aria-live","polite").classed(e.MainGraphicsContextClassName,!0),this.mainGraphicsContext.append("g").attr("class",us.class),this.interactivityService&&(this.isComboChart?this.mainGraphicsContext.attr(Ia.Rh,!0):(t.useManagedTabIndex?this.mainGraphicsContext.classed(_a.rG.class,!0).attr(Ia.Rh,!0):this.mainGraphicsContext.attr("tabindex",0).attr("focusable",!0),this.mainGraphicsContext.classed(Da.Pg,!It.M.isInternetExplorerOrEdge()))),vl.call(this),this.xAxisProperties={d3Axis:null,scale:null,valueType:null,formatter:null,graphicsContext:null,values:[],axisLabel:null,isCategoryAxis:!0},this.mobileTileInteractive){var n=e.getInteractiveLineChartDomElement(this.element),s=function(){a.lastDragMoveXPosition=d3.mouse(n)[0],a.deferDragMoveOperation()},o=d3.drag().on("drag",s);d3.select(n).style("touch-action","none").call(o).on("click",s)}},e.prototype.setData=function(t,a){var i,n,s;if(this.data=this.originalData={series:[],totals:[],legendData:(0,m.Fe)(this.style),isScalar:!1,dataLabelsSettings:ts(this.style,this.isComboChart,this.isStacked100),seriesLabelSettings:mt(this.style),hasDynamicSeries:!1,hasHighlights:!1,categories:[],categoryMetadata:void 0,valuesMetadata:[],categoryData:[],categoryIdentities:[],lineStyle:es(),binnedLineSamplingApplied:!1,legendMarkerRendering:nn._.markerCircleDefault,matchLineColor:!1,layout:{seriesOrderReversed:!1}},this.focusedDatum=void 0,_.isEmpty(t))this.dataView=void 0;else{var o=_.first(t);if(o?.categorical){this.dataView=o;var c,l=o.categorical.categories,u={text:!0};l&&!_.isEmpty(l)&&(l[0].source&&l[0].source.type&&(u=l[0].source.type),c=(0,ce.A8)(l[0]));var h=null===(i=this.hostService)||void 0===i?void 0:i.tooltips(),g=this.tooltipsEnabled=this.tooltipsEnabledOnHost&&(!h||h?.enabled());this.data=this.originalData=ks.convert({dataView:o,style:this.style,isScalar:(0,ce.PX)(null!==(s=null===(n=o.metadata)||void 0===n?void 0:n.objects)&&void 0!==s?s:null,Ye.zK.categoryAxis.axisType,u,c,(0,Ht.n$)(o)),interactivityService:this.interactivityService,isComboChart:this.isComboChart,tooltipsEnabled:g,forecastDataView:_.find(t,function(A){return(0,v.Aq)(A)}),anomalyDetectionDataView:_.find(t,function(A){return(0,H.Ik)(A)}),isStacked:this.isStacked,isAreaChart:this.isAreaChart,isStacked100:this.isStacked100,multipleInfo:a,supportsTotalLabels:!a&&this.supportsTotalLabels(),featureSwitches:this.featureSwitches,hostServices:this.hostService});var D=this.data.categoryIdentities;this.suppressAnimation=e.shouldSuppressAnimations(this.previousCategoryIds,D),this.previousCategoryIds=D;var x=_.find(this.data.series,function(A){return A.data[0]});this.focusedDatum=x?.data[0]}}},e.shouldSuppressAnimations=function(t,a){var i;if(null!=t&&!(t.length>sa.dt||a.length>sa.dt))if(i=!1,0===t.length)i=!0;else for(var n=0,s=Math.min(t.length,a.length);n<s;n++)if(!U.l0.isEqual(t[n],a[n])){i=!0;break}return i},e.prototype.getCategoryDomain=function(t){var a;return w.createDomain(t.series,this.getCategoryValueType(),t.isScalar,[w.createScalarDomainOptions(null===(a=e.getForecastDomain(t.forecastLines))||void 0===a?void 0:a.x,0)])},e.prototype.getAxesDomains=function(t,a){var i,n,s,o;if(!this.data)return{};var l=this.data,u={};if(a.categoryAxis&&l.isScalar){var c=this.getCategoryDomain(l);if(c){w.assertScalarDomain(c.domain);var h=(i=c.domain)[0],g=i[1];void 0!==h&&void 0!==g&&(u.categoryAxis=[h,g])}}if(a.valueAxis||a.secondaryValueAxis){var y=null===(o=e.getForecastDomain(l.forecastLines))||void 0===o?void 0:o.y;if(a.valueAxis){var D=this.getValueDataDomain(t,!1),x=(n=w.mergeDomains(y,D))[0],A=n[1];void 0!==x&&void 0!==A&&(u.valueAxis=[x,A])}if(a.secondaryValueAxis){var M=this.getValueDataDomain(t,!0),O=(s=w.mergeDomains(y,M))[0],I=s[1];void 0!==O&&void 0!==I&&(u.secondaryValueAxis=[O,I])}}return u},e.prototype.getValueDataDomain=function(t,a){var i=e.getDataForValueAxis(this.data,a).seriesData;return this.isStacked?e.createStackedValueDomain(i,this.isStacked100):w.createUncertaintyAwareValueDomain(i,t)},e.prototype.hasLegend=function(){return this.data&&(this.data.hasDynamicSeries||this.data.series&&(this.data.series.length>1||this.data.valuesMetadata.length>1))},e.prototype.setFilteredData=function(t,a){var i=(0,Ae.ED)(this.data);i.series=e.sliceSeries(i.series,t,a),i.categories=i.categories.slice(t,a),this.clippedData=i},e.getCategoryCount=function(t){var a;return(null===(a=t.series)||void 0===a?void 0:a.length)>0?t.series[0].data.length:0},e.prototype.getSeriesLabelsSettings=function(){return(0,Ae.ED)(this.data).seriesLabelSettings},e.getForecastDomain=function(t){if(!_.isEmpty(t)){for(var a=[],i=[],n=0,s=t;n<s.length;n++){var o=s[n];_.isEmpty(o.points)||(a.push.apply(a,_.map(o.points,function(l){return l.point.x})),i.push.apply(i,_.map(o.points,function(l){return l.point.y})),a.push.apply(a,_.map(o.points,function(l){return l.upperBound.x})),i.push.apply(i,_.map(o.points,function(l){return l.upperBound.y})),a.push.apply(a,_.map(o.points,function(l){return l.lowerBound.x})),i.push.apply(i,_.map(o.points,function(l){return l.lowerBound.y})))}return{x:d3.extent(a),y:d3.extent(i)}}},e.prototype.calculateAxesProperties=function(t){var i,n,s,o,l,a=this;this.updateCurrentViewport(t);var u=t.categoryAxisOptions,c=t.valueAxisOptions,h=e.getCategoryCount(this.data),g=this.data?(0,f.is)({data:this.data,availableWidth:this.availableWidth,categoryCount:h,preferredCategoryWidth:null!==(n=null===(i=this.data)||void 0===i?void 0:i.preferredCategoryWidth)&&void 0!==n?n:null,domain:null===(o=w.createDomain(this.data.series,w.getCategoryValueType(null===(s=this.data)||void 0===s?void 0:s.categoryMetadata),this.getVisualCategoryAxisIsScalar(),[t.categoryAxisOptions.includeDomain]))||void 0===o?void 0:o.domain,isScalar:this.getVisualCategoryAxisIsScalar(),cartesianOptions:this.options,trimOrdinalDataOnOverflow:t.trimOrdinalDataOnOverflow,outerPaddingRatio:t.outerPaddingRatio,innerPaddingRatio:t.innerPaddingRatio}):(0,f.u8)(),y=this.adjustLayoutForScroll(this.data,h,t.trimOrdinalDataOnOverflow,g),D=y.series,x=!1,A=this.data.valuesMetadata;if(_.some(D,function(Kt){return Kt.isY2})){var M=e.getDataForValueAxis(y,x=t.roleName===mi.R.Y2);D=M.seriesData,A=M.valuesMetadata}var O=!_.isEmpty(y.series)&&y.series[0].xCol,I=!_.isEmpty(D)&&D[0].yCol,W=this.getAxesDomains(!1,{categoryAxis:!0,valueAxis:!x,secondaryValueAxis:x}),J=w.getAxisFormatString(D),ue=w.createScalarDomainOptions(x?W.secondaryValueAxis:W.valueAxis,0);ue=w.mergeScalarAxisDomains(c.includeDomain,ue);var xe=y.isScalar?w.mergeScalarAxisDomains(w.createScalarDomainOptions(W.categoryAxis,0),u.includeDomain):this.getCategoryDomain(y),ie=this.getPreferredPlotArea(g),re=function(ha){var ca,Ft="x"===ha,ea="y"===ha,ga=Ft?u:c;return{pixelSpan:Ft?ie.width:ie.height,domainOptions:Ft?xe:ue,metaDataColumn:Ft?O:A,axisZoom:t.axisZoom,isScalar:ea||y.isScalar,isVertical:ea,isCategoryAxis:Ft,forcedTickCount:t.forcedTickCount,axis:(0,d.pi)((0,d.pi)({},ga.axis),{invertAxis:ga.axis.invertAxis&&(ea||y.isScalar)}),useTickIntervalForDisplayUnits:!0,margin:a.margin,includeZero:!!ea&&a.isStacked&&(null===(ca=a.data)||void 0===ca?void 0:ca.series.length)>1&&w.shouldIncludeZero(ga.includeDomain),zeroScalarDomain:e.DefaultZeroScalarDomain,formatString:Ft?(0,R.EO)(O,mr):a.isStacked100?a.hostService.getLocalizedString("Percentage"):J??(0,R.EO)(I,mr),outerPadding:Ft&&y.isScalar?e.ScalarOuterPadding:0,outerPaddingRatio:Ft?g.outerPaddingRatio:0,categoryThickness:Ft?g.categoryThickness:void 0,allowSingleScalarTick:!!Ft&&y.isScalar,maxTickCount:Ft?y.scalarKeyCount:void 0,preventNice:Ft?!!y.isScalar&&w.hasForcedDomain(xe):w.hasForcedDomain(ue),shouldClamp:!ea&&void 0,isSecValueAxis:ea?x||a.isComboChart:void 0,is100Pct:ea&&a.isStacked100,getValueFn:Ft?function(Oa,Ha){return(0,f.dZ)(y,Oa,Ha,y.isScalar)}:void 0}},he=w.createAxis(re("y")),Ee=!1,Ze=0,Ie=!1;if(he.dataDomain&&_.isNumber(he.dataDomain[0])&&_.isNumber(he.dataDomain[1])&&(Ee=(null===(l=y.totalLabelsSettings)||void 0===l?void 0:l.show)&&this.supportsTotalLabels(),Ze=e.getMaximumMarkerSize(y.series),Ie=_.some(y.anomalyDetections,function(Kt){return-1!==Kt.highestAnomalyPointIndex||-1!==Kt.lowestAnomalyPointIndex})),Ee||Ze||Ie){P.fF.assert(function(){return!!he.dataDomain&&_.isNumber(he.dataDomain[0])&&_.isNumber(he.dataDomain[1])});var tt=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],$e=!1,Tt=function(ha){tt=[Math.min(tt[0],ha[0]),Math.max(tt[1],ha[1])],$e=!0};if(Ee){var Xt=e.adjustDomainForLabels(he,y);Xt.adjusted&&Tt(Xt.domain)}if(Ze){var Yt=e.adjustDomainCommon(he,Ze);Yt.adjusted&&Tt(Yt.domain)}Ie&&Tt((0,ws.LS)(he.dataDomain,he.scale,y.anomalyDetections)),$e&&(he=w.createAxis((0,d.pi)((0,d.pi)({},re("y")),{domainOptions:w.mergeScalarAxisDomains(c.includeDomain,ue,w.createScalarDomainOptions(tt,0)),preventNice:!0})))}x?this.y2AxisProperties=he:this.yAxisProperties=he;var wt=w.createAxis(re("x"));return this.interactivityService&&!this.data.isScalar&&(wt.categoryIdentities=_.map(y.categoryIdentities,function(Kt){return function(){return Kt}})),[wt,he]},e.prototype.getCategoryValueType=function(){return w.getCategoryValueType(this.data.scalarMetadata||this.data.categoryMetadata)},e.getDataForValueAxis=function(t,a){var n=t.valuesMetadata,s=a?{roles:{Y2:!0}}:{roles:{Y:!0}};return{seriesData:_.filter(t.series,function(o){return o.isY2===a}),valuesMetadata:_.filter(n,s)}},e.prototype.adjustLayoutForScroll=function(t,a,i,n){if(this.clippedData=void 0,t&&!t.isScalar&&!this.options.isScrollable&&i){var s=Math.min(a,n.categoryCount);a!==s&&((t=this.clippedData=(0,Ae.ED)(t)).series=e.sliceSeries(t.series,0,s),t.categories=t.categories.slice(0,s),t.categoryIdentities&&(t.categoryIdentities=t.categoryIdentities.slice(0,s)))}return t},e.prototype.setAxesLayout=function(t){this.updateCurrentViewport(t.layout),this.xAxisProperties=t.layout.axes.x,2&t.axisType&&(this.isComboChart?this.yAxisProperties=t.layout.axes.y2:this.y2AxisProperties=t.layout.axes.y2),1&t.axisType&&(this.yAxisProperties=t.layout.axes.y1);var a=this.data?{categoryCount:this.xAxisProperties.values.length,categoryThickness:this.xAxisProperties.categoryThickness,outerPaddingRatio:this.xAxisProperties.outerPaddingRatio,innerPaddingRatio:this.xAxisProperties.innerPaddingRatio,isScalar:this.getVisualCategoryAxisIsScalar()}:(0,f.u8)();this.data=this.adjustLayoutForScroll(this.data,e.getCategoryCount(this.data),t.trimOrdinalDataOnOverflow,a)},e.adjustDomainForLabels=function(t,a){var i=e.getCategoryCount(a)?a.series[0].data[0].labelFormatString:"",n=(0,K.fI)(),s=(0,st.d6)(t,a.totalLabelsSettings),o=n.getOrCreate(i,a.totalLabelsSettings,s.units,a.totalLabelsSettings.precision),l=t.dataDomain[0].toString(),u=(0,st.Bw)(o.format(l)),c=(0,ae.qk)(a.totalLabelsSettings.fontProperties,u),h=ne.b.estimateSvgTextHeight(c);return e.adjustDomainCommon(t,h+b.FJ)},e.getMaximumMarkerSize=function(t){return t.length>0?d3.max(t,function(a){return a.lineStyle.markerProperties.show?a.lineStyle.markerProperties.size:0})*dr.Wo.sizeRatio:0},e.adjustDomainCommon=function(t,a){var i=t.dataDomain,n=t.scale.domain(),s=t.scale,o=s(i[0])+a,l=s(i[1])-a,u=s.invert(o),c=s.invert(l);return w.adjustDomainWithConstantPixelDifference(n[0],n[1],u,c)},e.prototype.getFormattingCards=function(t){return Vo.call(this,t)},e.prototype.getDisambiguationSubSelectables=function(t,a){return Ho.call(this,t,a)},e.prototype.getSelectorsByColumnFromSubselectedElement=function(t){return Uo.call(this,t)},e.prototype.getSubSelectionCustomOutlines=function(t){return Go.call(this,t)},e.prototype.getSubSelectionCustomElements=function(t){return jo.call(this,t)},e.prototype.getSubSelectionStyles=function(t){return Yo.call(this,t)},e.prototype.getSubSelectionShortcuts=function(t,a){return Ko.call(this,t,a)},e.prototype.enumerateObjectInstances=function(t,a){return zo.call(this,t,a)},e.prototype.getDataViewObjectLayerChanges=function(t,a){return Jo.call(this,t,a)},e.prototype.showSeriesCard=function(){return!(this.isComboChart&&!this.data.hasY2Role)},e.prototype.supportsTotalLabels=function(){return!(this.data&&this.data.multipleIdentity)&&16===this.lineChartType},e.prototype.supportsTrendLine=function(){return!this.data.multipleIdentity&&!this.isStacked&&this.getVisualCategoryAxisIsScalar()&&this.data.hasValues&&!(this.haveY2Data()&&!this.isComboChart)},e.prototype.supportsStaticReferenceLines=function(){return this.getVisualCategoryAxisIsScalar()},e.prototype.supportsForecast=function(){return!this.data.multipleIdentity&&!this.isStacked&&this.getVisualCategoryAxisIsScalar()&&this.data.hasValues&&1===this.data.series.length&&!this.hasLegend()},e.prototype.supportsAnomalyDetection=function(){return!this.data.multipleIdentity&&this.featureSwitches.daxTransformEnabled&&!this.isStacked&&this.data.hasValues},e.prototype.supportsPerCategoryMarker=function(){return!this.isComboChart},e.prototype.shouldSuppressAnimation=function(){return!!this.suppressAnimation},e.prototype.showLabelPerSeries=function(){var t=this.originalData;return t.series.length>1||!t.categoryMetadata||this.isComboChart},e.prototype.getSeriesAxisProperties=function(t){return t.isY2?this.y2AxisProperties:this.yAxisProperties},e.prototype.render=function(t,a,i){var n=this,s=this.suppressAnimation?0:(0,sa.Mb)(this.animator,t),o=this.viewModel;this.mainGraphicsPositionRect=this.mainGraphicsSVG.selectAll(Ns.selector).data(function(u){return!n.lineChartTooltipHelper.hoverLineTooltipOverlay&&i?[u]:[]}).join("rect").attrs({x:0,width:0,height:0}).style("pointer-events","none").classed(Ns.class,!0),(0,En.WI)(this.data.anomalyDetections,this.mainGraphicsSVG,this.xAxisProperties.scale,this.yAxisProperties.scale,s,this.hostService,this.isVisualInteractive),this.anomalyNavigationHelper.update(In(this.data)?this.data.anomalyDetections[0].anomalies:[],this.clippedData,this.focusedDatum,function(u){return Wn(o,u)},this.mainGraphicsContext);var l=function(r,e,t){var a,i,n,s,o=r.renderContext,l=r.plotAreaHelper,u=r.lineChartTooltipHelper,c=r.tooltipInteractivity,h=r.markerRenderer,g=r.style,y=r.hostService,D=r.isStackedArea,x=r.isStacked100,A=r.currentViewport,M=r.interactivityService,O=r.mobileTileInteractive,I=r.featureSwitches,W=r.isComboChart,J=r.activeData;if(J){for(var ue=J.isScalar,xe=_.filter(J.series,function(we){var gt;return null===(gt=we.uncertainty)||void 0===gt?void 0:gt.renderUncertainty}),ie=!_.isEmpty(xe),re=!W,he=[],Ee=0,Ze=J.series;Ee<Ze.length;Ee++)he.push((Ie=Ze[Ee]).lineStyle.markerProperties);ie&&(0,Ri.iD)(J.series,he),h.ensureMarkers(o.svgDefs,he);var tt=r.yAxisProperties.scale,$e=null===(a=r.y2AxisProperties)||void 0===a?void 0:a.scale,Tt=M?.hasSelection(),Xt=_.filter(J.series,function(we){return we.lineStyle.areaShow}),Yt=Xt.length>0;(J.categories.length*J.series.length>sa.dt||It.M.isInternetExplorerOrEdge()&&_.some(he,function(we){return we.show})||Yt)&&(e=0);var Kt=function(gt){return er(r,gt)},ha=function(gt){return Fr(r,gt)},ca=D?function(we){return tt(we.stackedValue-we.value)}:function(we){return we.isY2?$e(0):tt(0)},Ft=[];_.forEach(J.series,function(we){Ft[we.index]=d3.line().x(Kt).y(ha).defined(function(gt){return bn(gt)}).curve((0,yn.By)(we.lineStyle))}),o.mainGraphicsContext.attr("aria-label","".concat(y.getLocalizedString("Visual_Plot")," ").concat(In(J)?y.getLocalizedString("Visual_Plot_ScreenReader_NavigateToAnomalies"):"").trim()),o.mainGraphicsSVG.attr("height",r.availableHeight).attr("width",r.availableWidth);var ea=o.mainGraphicsContext.selectAll(xn.selector).data(Xt,function(we){return we.identity.getKey()}).join(function(we){return we.append(Wr).classed(xn.class,!0)}).style("fill",function(we){return g.isHighContrast?Ge.v.getThemeColor(g,Oe.U):we.lineStyle.areaColor}).style("pointer-events",t&&re?"auto":null).classed(We.cy,re).attr(We.Ez,"area").attr(We.QZ,3).each(function(we){We.O5.setDataForElement(this,{getDisplayName:function(){return y.getLocalizedString("MiniToolbar_Area",we.displayName)},getRegionOutlines:function(){for(var Sa,Zt=o.mainGraphicsSVG.node().getBoundingClientRect(),Ki=Zt.left,ma=Zt.top,ai={type:1,x:Zt.x,y:Zt.y,height:Zt.height,width:Zt.width},Mi=A.scale,ar=tt.range(),Ba=_.min(ar),ir=_.max(ar),va=[],xr=function(r){for(var e=r.length,t=[],a=[],i=0;i<e;i++){var n=r[i];bn(n)?(a.push(n),i===e-1&&t.push(a)):a.length>0&&(t.push(a),a=[])}return t}(we.data),kr=function(Ti){var Qt=Ti.map(function(pi){return{x:zr.convertSvgXToClientX(Kt(pi),Mi,Ki),y:zr.convertSvgYToClientY(ha(pi),Mi,ma)}}),zi=[];Qt.forEach(function(pi,Oi){var Xi=_.clamp(ca(Ti[Oi]),Ba,ir);zi.unshift({x:pi.x,y:zr.convertSvgYToClientY(Xi,Mi,ma)})});var Er=(0,d.ev)((0,d.ev)([],Qt,!0),zi,!0);va.push({type:3,points:Er,clipPath:ai})},br=0,Ur=xr;br<Ur.length;br++)kr(Ur[br]);return[{id:"".concat("area","-").concat(we.index).concat(null!==(Sa=r.data.multipleDisplayName)&&void 0!==Sa?Sa:""),outline:{type:0,outlines:va}}]}})}).interrupt();if((e?ea.transition().ease(d3.easeLinear).duration(e):ea).attr("d",function(we){return d3.area().x(Kt).y0(ca).y1(ha).defined(function(gt){return bn(gt)}).curve((0,yn.By)(we.lineStyle))(we.data)}),ie){var ga=(0,Ri.B9)(o.mainGraphicsContext),Oa=d3.area().x(Kt).y0(function(we){return null!=we.uncertainty.lower?Fs(r,we):ha(we)}).y1(function(we){return null!=we.uncertainty.upper?Vs(r,we):ha(we)}).defined(function(we){var gt,Sa;return null!=(null===(gt=we?.uncertainty)||void 0===gt?void 0:gt.upper)||null!=(null===(Sa=we?.uncertainty)||void 0===Sa?void 0:Sa.lower)}),Ha=d3.line().x(Kt).y(function(we){return Fs(r,we)}).defined(function(we){var gt;return null!=(null===(gt=we?.uncertainty)||void 0===gt?void 0:gt.lower)}),xa=d3.line().x(Kt).y(function(we){return Vs(r,we)}).defined(function(we){var gt;return null!=(null===(gt=we?.uncertainty)||void 0===gt?void 0:gt.upper)});(0,Ri.EC)(ga,xe,xa,Ha,Oa,function(we,gt){return(0,Da.eR)(we.selected,!1,Tt,!1,(0,mn.TD)(gt))}),(0,Ri.FZ)(ga,xe,function(we){return we.isY2?$e:tt},function(we){return"translate(".concat(Kt(we),", ").concat(we.isY2?$e(we.value):tt(we.value),")")},10),(0,Ri.di)(ga,xe,xa,Ha,tt.range()[1]>tt.range()[0],h),(0,Ri.DI)(ga)}else(0,Ri.OY)(o.mainGraphicsContext);var $a=o.mainGraphicsContext.selectAll(Sn.selector).data(_.filter(J.series,function(we){return we.lineStyle.strokeShow}),function(we){return we.identity.getKey()}).join(function(we){return we.append(Wr).classed(Sn.class,!0)}).styles(function(we){return(0,Za.bc)(we.lineStyle,g)}).interrupt();(e?$a.transition().ease(d3.easeLinear).duration(e):$a).attr("d",function(we){return Ft[we.index](we.data)});var Pa,ui=o.mainGraphicsContext.selectAll(Bn.selector).data(_.filter(J.series,function(we){return we.lineStyle.markerProperties.show}),function(we){return we.identity.getKey()}).join(function(we){return we.append(Wr).classed(Bn.class,!0)}).style("stroke","#ffffff").style("stroke-width",2).style("stroke-opacity",0).attrs({"marker-start":function(gt){return h.getMarkerKey(gt.lineStyle.markerProperties)},"marker-mid":function(gt){return h.getMarkerKey(gt.lineStyle.markerProperties)},"marker-end":function(gt){return h.getMarkerKey(gt.lineStyle.markerProperties)}}).interrupt(),Xa=d3.line().x(Kt).y(ha).defined(function(we){return bn(we)&&(!I.lineChartMarkerRendering||!we.marker.perCategoryStyle)});(e?ui.transition().ease(d3.easeLinear).duration(e):ui).attr("d",function(we){return Xa(we.data)}).style("opacity",function(we){return(0,Da.eR)(we.selected,!1,Tt,!1)}).style("pointer-events","none"),O||(Pa=o.mainGraphicsContext.selectAll(ls.selector).data(_.filter(J.series,function(we){return cs(we)}),function(we){return we.identity.getKey()}).join(function(we){return we.append(Wr).classed(ls.class,!0).style("stroke-width",10).style("stroke-linejoin",Ai.t.round).attr(We.Ez,"lines").attr(We.Zx,"markers").attr(We.QZ,3).classed(We.cy,!Yt||!re)}).attr("d",function(we){if(!ue){var gt=cs(we);if(gt){var Sa=_.findIndex(we.data,function(Zt){return Zt&&Zt.categoryIndex===gt.categoryIndex});if(Sa>0&&Sa<we.data.length){var ti=we.data.slice(Sa);return Ft[we.index](ti)}}}return Ft[we.index](we.data)}).each(function(we){We.O5.setDataForElement(this,{getDisplayName:function(){return y.getLocalizedString("MiniToolbar_Line",we.displayName)},getRegionOutlines:function(){return is(we,r)}})}));var qa=o.mainGraphicsContext.selectAll(ss.selector).data(J.series,function(we){return we.identity.getKey()}).join(function(we){return we.append("g").classed(ss.class,!0)}),ta=qa.selectAll(Bs.selector).data(function(we){return we.lineStyle.strokeShow?we.data.filter(function(gt,Sa){return function(r,e){var t=r.data[e];if(null==t||null===t.value)return!1;var a=r.data[e-1],n=r.data[e+1];return!(null!=a&&null!==a.value||null!=n&&null!==n.value)}(we,Sa)}):[]},function(we){return we.key}).join(function(we){return we.append(zn).classed(Bs.class,!0).classed(We.cy,!0).attr(We.Ez,"lines").attr(We.Zx,"markers").attr(We.QZ,3)}).style("fill",function(we){return we.marker.color}).style("fill-opacity",function(we){return we.marker.show?0:(0,Da.eR)(we.selected,!1,Tt,!1,(0,mn.TD)(we.marker.transparency))}).each(function(){var gt=d3.select(this.parentNode).datum();We.O5.setDataForElement(this,{getDisplayName:function(){return y.getLocalizedString("MiniToolbar_Line",gt.displayName)},getRegionOutlines:function(){return is(gt,r)}})}),ei=ta.size(),ci=0;(e?ta.transition().duration(e):ta).attrs({cx:function(gt){return er(r,gt)},cy:function(gt){return Fr(r,gt)},r:_n(J.lineStyle)}).on("end",function(){++ci===ei&&Ua()}),e||Ua();var Na=qa.selectAll(zs.selector).data(function(we){return W?[]:_.filter(we.data,function(gt){return gt?.marker.perCategoryStyle&&null!=gt.value})},function(we){return we.key}).join(function(we){return we.append(Wr).classed(zs.class,!0).style("pointer-events","none")}).attrs({transform:function(gt){var Sa=I.lineChartMarkerRendering?gt.marker.size*dr.Wo.sizeRatio:5;return"translate(".concat(er(r,gt),", ").concat(Fr(r,gt),") scale(").concat(2*Sa,")")},d:function(gt){return(0,dr.jM)(I.lineChartMarkerRendering?gt.marker.shape:Ta.ZO.circle,.5)}}).style("stroke-width",function(we){return I.lineChartMarkerRendering?2*(0,dr.F)(we.marker.shape)/20:0});(e?Na.transition().duration(e):Na).style("fill",function(we){return we.marker.color}).style("stroke",function(we){return we.marker.color});var hi,Ga=function(r){return function(e){var a=r.renderContext.mainGraphicsContext,i=_.flatten(_.map(r.activeData.series,function(l){return _.filter(l.data,function(u){return u?.selected&&null!==u.value})})),n=_.map(i,function(l){return l.seriesIndex}),s=a.selectAll(us.selector).selectAll(Wr).data(i,function(l){return l.key}).join(function(l){return l.append(Wr).attr("pointer-events","none")}).attr("d",function(l){return l.marker.show?(0,dr.jM)(l.marker.shape,l.marker.size*dr.Wo.sizeRatio):(0,dr.jM)(Ta.ZO.circle,l.marker.focusOnlySize)}).attr("transform",function(l){return"translate(".concat(er(r,l),",").concat(Fr(r,l),")")}).style("stroke-width",function(l){return(0,dr.F)(l.marker.shape)}).style("stroke-opacity",1).style("stroke",function(l){return l.marker.focusOnlyColor}).style("fill",function(l){return l.marker.focusOnlyColor}),o=[];return a.selectAll(Sn.selector).each(function(l,u){o[u]=l.selected,l.selected=n.indexOf(l.index)>-1}).style("stroke-opacity",function(l,u){return(0,Da.eR)(l.selected,!1,e&&!o[u],!1,(0,mn.TD)(l.lineStyle.strokeTransparency))}),a.selectAll(xn.selector).style("fill-opacity",function(l){return(0,Da.eR)(l.selected,!1,e,!1,(0,mn.TD)(l.lineStyle.areaTransparency))}),a.selectAll(Bn.selector).style("opacity",(0,Da.eR)(!1,!1,e,!1)),(0,Ri.fM)(a.select(Ri.jx.selector),function(l,u){return(0,Da.eR)(l.selected||n.indexOf(l.index)>-1,!1,e&&!o[l.index],!1,null!=u?(0,mn.TD)(u):void 0)}),s}}(r);Ga(Tt),M&&(hi=Wn(r,r.focusedDatum));var ja=[],Bi=[];if(!(null===(i=J.dataLabelsSettings)||void 0===i)&&i.show&&(ja=ja.concat(function(r){var e,t=(0,st.fI)(),a=r.activeData.series.map(function(i){var n,s,o=i.labelSettings||r.data.dataLabelsSettings;if(!o.show)return{labelDataPoints:[],maxNumberOfLabels:0};var l=100===o.labelDensity,u=(0,st.SS)(r.currentViewport.width,o.labelDensity,4,_s.v.estimatedLabelWidth),c=!l&&r.data.isScalar?u:i.data.length,h=i.isY2?r.y2AxisProperties:r.yAxisProperties,g=i.data.map(function(y,D){if(null!=y&&null!=y.value){var x=function(r,e,t,a,i,n,s,o){var l,u,c,h,O,W,g=r.isStackedArea,y=r.style,D=r.featureSwitches,x=i.fontProperties,A=e.isY2?null===(l=r.y2AxisProperties)||void 0===l?void 0:l.scale:r.yAxisProperties.scale,M=null!==(u=t.labelFill)&&void 0!==u?u:x.color,I=!1;i?.displayUnits===b.In&&(i.precision=void 0);var J=(0,st.d6)(n,i);if(null!==(c=t.dynamicLabelValue)&&void 0!==c&&c.enabled)W=(0,Bt.nU)(t.dynamicLabelValue,s,i,J,e,"Value"),!D.labelEnhancementsM0&&D.measureDrivenDataLabels&&""===W&&(W=void 0);else{var xe=o&&!D.labelEnhancementsM0?b.L0:(t.labelSettings.displayUnits===b.In?t.labelSettings.valueCustomFormatString:void 0)??t.labelFormatString,ie=s.getOrCreate(xe,i,J.units,J.getPrecision(!!xe,e.type)),re=t.value;o&&(re=t.originalValue),W=(0,st.Bw)(ie.format(re))}var he=(0,ae.qk)(x,W);if(g){var Ee=Math.max(t.stackedValue-t.value,A.domain()[0]),Ze=r.currentViewport.width,Ie=void 0;switch(i?.position){case Ea.h.insideCenter:Ie=[1];break;case Ea.h.insideEnd:Ie=[4];break;default:Ie=[1,4]}O={rect:{left:er(r,t)-Ze/2,top:A(Math.max(t.stackedValue,t.stackedValue-t.value)),width:Ze,height:Math.abs(A(t.stackedValue)-A(Ee))},orientation:t.value>=0?1:2,validPositions:Ie},I=!0}else{var tt=e.lineStyle.markerProperties;switch(Ie=void 0,i?.position){case Ea.h.above:Ie=[1];break;case Ea.h.under:Ie=[2];break;default:Ie=100===i.labelDensity?[1]:function(r,e){var t=r.data,s=t[e].value,o=t[e-1]&&t[e-1].value,l=t[e+1]&&t[e+1].value,u=1,c=1;if(null==o?u=0:o>s?u=3:o<s&&(u=2),null===l?c=0:l>s?c=3:l<s&&(c=2),0===e)return 3===c?[2,1]:[1,2];if(e===t.length-1)return 3===u?[2,1]:[1,2];switch(u){case 0:switch(c){case 0:return[1,2,8,4];case 1:case 2:return[1,2,4,8];case 3:return[2,1,4,8]}case 1:switch(c){case 0:case 1:case 2:return[1,2,8,4];case 3:return[2,1,8,4]}case 3:switch(c){case 0:case 3:return[2,1,8,4];case 1:return[2,1,4,8];case 2:return[1,2,8,4]}case 2:switch(c){case 0:case 3:case 2:return[1,2,8,4];case 1:return[1,2,4,8]}}}(e,a)}O={point:{x:er(r,t),y:A(t.value)},radius:tt.show?tt.size:0,validPositions:Ie}}return{isPreferred:!1,text:W,textSize:{width:ne.b.measureSvgTextWidth(he)+b.TS,height:ne.b.estimateSvgTextHeight(he,!0)},outsideFill:M??Ge.v.getThemeColor(y,b.uQ),insideFill:M&&g?M:Ge.v.getThemeColor(y,b.pl),parentType:I?1:0,parentShape:O,fontProperties:x,identity:t.identity,key:t.key,hasBackground:i.enableBackground,backgroundColor:i.backgroundColor,backgroundTransparency:i.backgroundTransparency,transparency:i.transparency,leaderLine:(0,d.pi)((0,d.pi)({},i.leaderLine),{strokeColor:null!==(h=t?.leaderLineColor)&&void 0!==h?h:i.leaderLine.strokeColor})}}(r,i,y,D,o,h,t,r.isStacked100);return y.labelDataPointContainerEnabled?(0,qo.U)({seriesName:i.displayName,labelDataPoint:x,enableValueDataLabel:o.enableValueDataLabel,valueShowBlankAs:o.showBlankAs,cartesianDataPoint:y,isStacked100:r.isStacked100,percentOfTotal:y.value,formattersCache:t,currentSeries:i,currentAxisProperties:h,valueDataLabelSettings:o,getOutsideLabelFill:function(M){var O;return null!==(O=M.labelFill)&&void 0!==O?O:Ge.v.getThemeColor(r.style,b.uQ)},getInsideLabelFill:function(M){var O;return M.labelFill&&r.isStackedArea?null!==(O=M.labelFill)&&void 0!==O?O:M.labelSettings.fontProperties.color:Ge.v.getThemeColor(r.style,b.pl)}}):x}}).filter(function(y){return y});return{labelDataPoints:g,maxNumberOfLabels:c,enableLeaderLines:o?.leaderLine.strokeShow,offset:{min:null!==(n=o?.minimumOffset)&&void 0!==n?n:b.ki,max:null!==(s=o?.maximumOffset)&&void 0!==s?s:b.wh}}});return new _s.v(a,r.activeData.series,r.currentViewport,r.yAxisProperties.scale,null===(e=r.y2AxisProperties)||void 0===e?void 0:e.scale).getSortedDataLabels()}(r))),null!==(n=J.seriesLabelSettings)&&void 0!==n&&n.show){var hr=J.seriesLabelSettings.position===Be.M.right;Bi=Bi.concat(function(r,e,t){var a=r.isStackedArea,i=r.data.isScalar,n=ne.b.estimateSvgTextHeight(b.bN),s=r.xAxisProperties.scale.domain()[0],o=r.xAxisProperties.scale.domain()[1];return r.activeData.series.map(function(l){var u,c=l.seriesLabelSettings||r.data.seriesLabelSettings;if(!c?.show)return{labelDataPoints:[],maxNumberOfLabels:0};var h=l.isY2?null===(u=r.y2AxisProperties)||void 0===u?void 0:u.scale:r.yAxisProperties.scale,g=h.domain()[0],y=h.domain()[1],D=c?c.fontProperties.size.px:0,x=!!c&&!!c.wordWrap,M=r.currentViewport.height-(D+n+(r.currentViewport.height-n-D)/2),O=[],I=function(Ze){var Ie;if(null!=Ze){var tt=a?Ze.stackedValue:Ze.value;if(null!=tt&&tt>=g&&tt<=y){var Tt=(0,ae.qk)(c.fontProperties,l.displayName);P.fF.assertValue(Ze.value,"seriesLabels - createLabelDataPoint called on a dataPoint with no value"),O.push({identity:Ze.identity,key:Ze.key,isPreferred:!1,text:l.displayName,textSize:{width:ne.b.measureSvgTextWidth(Tt),height:ne.b.estimateSvgTextHeight(Tt,!0)},outsideFill:null!==(Ie=c.seriesColor)&&void 0!==Ie?Ie:Ge.v.getThemeColor(r.style,b.uQ),insideFill:c.seriesColor&&a?c.seriesColor:Ge.v.getThemeColor(r.style,b.pl),parentType:0,parentShape:{point:{x:e,y:Fr(r,Ze)},radius:l.lineStyle.markerProperties.show?l.lineStyle.markerProperties.size:0,validPositions:[512]},fontProperties:c.fontProperties,wordBreak:x&&(0,st.W1)(l.displayName,Tt,r.availableSeriesLabelWidth,M,void 0,!0,!0).length>1,hasBackground:c.enableBackground,backgroundColor:c.backgroundColor,backgroundTransparency:c.backgroundTransparency})}}},W=l.data;if(!_.isEmpty(W)&&l.displayName){var J=t?_.last(_.compact(W)):_.first(_.compact(W));if(i){for(var ue=0;ue<W.length;ue++){var xe=W[ue];if(null!=xe&&null!=xe.value&&xe){var ie=Os(r,xe);if(t?ie>o:ie>s){var he=-1;t&&0<=ue-1?he=ue-1:t||(he=ue),he>=0&&I(W[he]);break}}}ue===W.length&&I(J)}else I(J)}return{labelDataPoints:O,maxNumberOfLabels:1}})}(r,hr?r.availableWidth:0,hr))}if(null!==(s=J.totalLabelsSettings)&&void 0!==s&&s.show&&D&&!x&&(ja=ja.concat(function(r){var e=r.style,t=(0,f.GN)(r.data.valuesMetadata),a=(0,R.EO)(t,X.p.general.formatString),i=r.activeData,n=(0,st.fI)(),s=i.totalLabelsSettings,o=(0,st.d6)(r.yAxisProperties,s),l=s.fontProperties,u=i.totals.filter(function(c){return 0!==c?.net}).map(function(c){var h,g,y,D,x=c.net,A=n.getOrCreate(c.dynamicFormatString||a,s,o.units,s.precision),M=(0,st.Bw)(A.format(x)),O=(0,ae.qk)(l,M),I=x>0?c.positive:c.negative,W={value:I,originalValue:void 0,stackedValue:I,categoryIndex:c.categoryIndex,categoryValue:c.categoryValue,labelSettings:void 0,key:void 0,identity:void 0,marker:void 0,seriesIndex:void 0,selected:!1},J=r.currentViewport.width;return{isPreferred:!1,text:M,textSize:{width:ne.b.measureSvgTextWidth(O),height:ne.b.estimateSvgTextHeight(O,!0)},outsideFill:null!==(g=null!==(h=c.labelFill)&&void 0!==h?h:l.color)&&void 0!==g?g:Ge.v.getThemeColor(e,b.uQ),insideFill:null!==(D=null!==(y=c.labelFill)&&void 0!==y?y:l.color)&&void 0!==D?D:Ge.v.getThemeColor(e,b.pl),parentType:1,parentShape:{rect:{left:er(r,W)-J/2,top:r.yAxisProperties.scale(I),width:J,height:0},orientation:x>=0?1:2,validPositions:[16]},identity:void 0,fontProperties:l,hasBackground:s.enableBackground,backgroundColor:s.backgroundColor,backgroundTransparency:s.backgroundTransparency,isTotal:!0}});return[{labelDataPoints:u,maxNumberOfLabels:i.totals.length}]}(r))),_.map(_.filter(xe,function(we){return we.uncertainty.labels.show}),function(we){return we.uncertainty.labels})&&(ja=ja.concat(function(r){var e=r.style,t=r.hostService,a=_.filter(r.activeData.series,function(n){var s,o;return(null===(s=n.uncertainty)||void 0===s?void 0:s.renderUncertainty)&&(null===(o=n.uncertainty)||void 0===o?void 0:o.labels.show)});if(0===a.length)return[];var i=(0,st.fI)();return a.map(function(n){var o=n.uncertainty.labels,u=o.fontProperties,c=n.isY2?r.y2AxisProperties:r.yAxisProperties,h=(0,st.d6)(c,o),g=c.scale,y=[];return n.data.forEach(function(D){if(null!=D&&null!=D.value&&null!=D.uncertainty){for(var x=[],A=(0,Mr.Ww)(D.value,D.uncertainty,o.errorFormat),M=[A.lower,A.upper],O=0;O<2;O++){var I=M[O],W=1===O,J=W?D.uncertainty.upper:D.uncertainty.lower;if(null!=J){var ue=void 0;if(o.errorFormat===tn.K.relativePercentage)ue=(0,Mr.O2)(I,t);else{var xe=D.labelFormatString,ie=i.getOrCreate(xe,o,h.units,h.getPrecision(!!xe,n.type));ue=(0,st.Bw)(ie.format(I))}P.fF.assertValue(ue,"label has no value -- lineChart.createUncertaintyLabels");var re=(0,ae.qk)(u,ue);x.push({isPreferred:!1,text:ue,textSize:{width:ne.b.measureSvgTextWidth(re)+b.TS,height:ne.b.estimateSvgTextHeight(re,!0)},outsideFill:u.color?u.color:Ge.v.getThemeColor(e,b.uQ),insideFill:u.color?u.color:Ge.v.getThemeColor(e,b.pl),parentType:0,parentShape:{point:{x:er(r,D),y:g(J)},radius:0,validPositions:[W?1:2]},identity:void 0,fontProperties:u,hasBackground:o.enableBackground,backgroundColor:o.backgroundColor,backgroundTransparency:o.backgroundTransparency})}}_.isEmpty(x)||y.push.apply(y,x)}}),{labelDataPoints:y,maxNumberOfLabels:100}})}(r))),!O){var Li={availableHeight:r.availableHeight,availableWidth:r.availableWidth,isComboChart:W,activeData:r.activeData,interactivityLines:Pa,dots:ta,focusElement:hi,explicitDots:Na};u.removeTooltips(Li,c),r.tooltipsEnabled&&!t&&u.applyTooltips(Li,l,c)}(0,en.LL)(o.mainGraphicsContext,[xn,Ri.jx,Sn,Bn,ls,ss,us,Nn]);var qt,Si,xi,Ya=[];if(r.interactivityService&&!O){qt=[];for(var bi=0,Pi=r.data.series;bi<Pi.length;bi++){var Ie;Ya.push(Ie=Pi[bi]);var vr=_.filter(Ie.data,function(gt){return gt});qt.push.apply(qt,vr||[])}if(xi=[],In(J)){var ni=_.filter(J.anomalyDetections[0].anomalies,function(we){return we.isAnomaly});xi.push.apply(xi,ni||[])}Si={interactivityLines:Pa,root:o.mainGraphicsContext,focusMarker:hi,selectedMarkersCallback:Ga,dots:ta,areas:ea,hoverLineTooltipOverlay:u.hoverLineTooltipOverlay,isHoverLineTooltipActive:u.isHoverLineTooltipActive,getCategoryIndex:function(gt,Sa,ti){return l.getCategoryIndexFromSeriesAndPointX(gt,Sa,ti=ti&&!u.isHoverLineTooltipActive)},categoryIdentities:J.categoryIdentities,hitTester:new el({dataPoints:qt,isComboChart:W,isScalar:ue,hasCategories:J.categoryIdentities.length>0}),onSelecting:y.onSelecting,anomalies:o.mainGraphicsSVG.selectAll(En.ec.selector),anomalyNavigationHelper:r.anomalyNavigationHelper,onLineSubSelection:function(gt,Sa,ti,Zt,Ki){!function(r,e,t,a,i,n){var s,u,c,h,o=(0,za.bt)(),l=r.plotAreaHelper.getCategoryIndexFromSeriesAndPointX(e,t,!0);try{u=function(r,e,t){var a=r.renderContext.mainGraphicsSVG.node().getBoundingClientRect().left,i=_.find(e.data,function(n){return n&&n.categoryIndex===t});return Math.floor(Ts(r,i,a))}(r,e,l)}catch{return void P.fF.assertFail("Could not find data for categoryIndex in seriesData - getMarkerXPosition")}e.lineStyle.markerProperties.show&&Math.abs(u-o.x)<=e.lineStyle.markerProperties.size/2?(c="markers",h="MiniToolbar_Markers"):(c="lines",h="MiniToolbar_Line");var g=a.createVisualSubSelectionForSingleObject({objectName:c,subSelectionType:3,displayName:r.hostService.getLocalizedString(h,e.displayName),showUI:n,selectorsByColumn:null===(s=e.identity)||void 0===s?void 0:s.getSelectorsByColumn(),selectionOrigin:{x:i.clientX,y:i.clientY}});a.subSelect(g)}(r,gt,Sa,ti,Zt,Ki)},onDotSubSelection:function(gt,Sa,ti,Zt){!function(r,e,t,a,i){var n,s,o;e.lineStyle.markerProperties.show?(s="markers",o="MiniToolbar_Markers"):(s="lines",o="MiniToolbar_Line");var l=t.createVisualSubSelectionForSingleObject({objectName:s,subSelectionType:3,displayName:r.hostService.getLocalizedString(o,e.displayName),showUI:i,selectorsByColumn:null===(n=e.identity)||void 0===n?void 0:n.getSelectorsByColumn(),selectionOrigin:{x:a.clientX,y:a.clientY}});t.subSelect(l)}(r,gt,Sa,ti,Zt)},onAreaPointerMove:function(gt){!function(r,e){var t=new MouseEvent("pointerover",e),a=Gs.findSubSelectedAreaElement(r,{x:e.clientX,y:e.clientY});a?.dispatchEvent(t)}(r,gt)}}}return{dataPoints:qt?(0,d.ev)((0,d.ev)([],Ya,!0),qt,!0):void 0,behaviorOptions:O?void 0:Si,labelDataPoints:O?[]:null,labelsAreNumeric:!O||null,labelDataPointGroups:ja,labelDataPointSeriesGroups:Bi,animateLabels:!1,anomalies:xi,navigationOptions:r.navigationOptions}}function Ua(){O&&function(r){if(0===r.length)return!1;for(var e=0,t=r.length;e<t;e++)if(r[e].data.length>0)return!0;return!1}(J.series)&&c.selectColumn((0,f.Pg)(J.series),!0)}}(o,s,i);return(0,v.h8)(this.data.forecastLines,this.mainGraphicsSVG,this.xAxisProperties.scale,this.yAxisProperties.scale,s),(0,Va.bL)(this.dataInitOptions),l},Object.defineProperty(e.prototype,"navigationOptions",{get:function(){if(this.interactivityService)return{helper:this,navigationStrategy:this.data.isScalar?j.jN.SeriesFirst:j.jN.CategoryFirst}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewModel",{get:function(){var a;return{currentViewport:this.currentViewport,activeData:this.activeData,data:this.data,horizontalOffset:this.horizontalOffset,isComboChart:this.isComboChart,lineType:this.lineChartType,margin:this.margin,tooltipsEnabled:this.tooltipsEnabled,xAxisProperties:this.xAxisProperties,yAxisProperties:this.yAxisProperties,y2AxisProperties:this.y2AxisProperties,focusedDatum:this.focusedDatum,style:this.style,renderContext:{mainGraphicsSVG:this.mainGraphicsSVG,mainGraphicsContext:this.mainGraphicsContext,svgDefs:this.svgDefs,mainGraphicsPositionOverlay:(null===(a=this.lineChartTooltipHelper)||void 0===a?void 0:a.hoverLineTooltipOverlay)||this.mainGraphicsPositionRect},isStackedArea:this.isStacked,isStacked100:this.isStacked100,availableWidth:this.availableWidth-this.availableSeriesLabelWidth,availableHeight:this.availableHeight,availableSeriesLabelWidth:this.availableSeriesLabelWidth,hostService:this.hostService,markerRenderer:this.markerRenderer,interactivityService:this.interactivityService,navigationOptions:this.navigationOptions,lineChartTooltipHelper:this.lineChartTooltipHelper,tooltipInteractivity:this,plotAreaHelper:this,anomalyNavigationHelper:this.anomalyNavigationHelper,featureSwitches:this.featureSwitches,mobileTileInteractive:this.mobileTileInteractive}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"availableSeriesLabelWidth",{get:function(){return(0,ve.lr)(this.activeData.seriesLabelSettings,this.availableWidth)},enumerable:!1,configurable:!0}),e.prototype.getFirstElement=function(t,a){var i;if(void 0===a&&(a=!1),null!=t){var s,n=a?_.findLast:_.find;return n(this.data.series,function(u){return s=n(u.data,function(c){return c&&c.categoryIndex===t&&null!=c.value})}),s&&-1===(null===(i=this.clippedData)||void 0===i?void 0:i.categories.indexOf(s.categoryValue))?{element:null,targetCategoryIndex:s.categoryIndex,targetSeriesIndex:s.seriesIndex}:s?(this.focusedDatum=s,{element:Wn(this.viewModel,s).node(),targetCategoryIndex:t,targetSeriesIndex:s.seriesIndex}):{element:null,targetCategoryIndex:t,targetSeriesIndex:a?this.data.series.length-1:0}}return{element:this.mainGraphicsContext.select(Nn.selector).node()}},e.prototype.getNextDataPoint=function(t,a,i){var n,s=this.focusedDatum;switch(i){case j.x0.NextCategory:case j.x0.PreviousCategory:var o=this.data.series[a];if(o){var l=o.data,u=_.findIndex(l,function(x){return x&&x.categoryIndex===t});s=this.pickNextAvailableIndex(l,u,a,i)}else s=void 0;break;case j.x0.NextSeries:case j.x0.PreviousSeries:var c=_.map(this.data.series,function(x){return _.find(x.data,function(A){return A&&A.categoryIndex===t})});s=this.pickNextAvailableIndex(c,a,t,i);break;default:P.fF.assertNever(i)}if(!s){var h=i===j.x0.NextSeries||i===j.x0.NextCategory?1:-1;t=e.incrementIndex(t,h,this.data.categories.length);var y=a;return(i===j.x0.NextSeries||i===j.x0.PreviousSeries)&&(y=h<0?this.data.series.length-1:0),{element:null,targetCategoryIndex:t,targetSeriesIndex:y}}return-1===(null===(n=this.clippedData)||void 0===n?void 0:n.categories.indexOf(s.categoryValue))?{element:null,targetCategoryIndex:s.categoryIndex,targetSeriesIndex:s.seriesIndex}:(this.focusedDatum=s,{element:Wn(this.viewModel,s).node(),targetCategoryIndex:s.categoryIndex,targetSeriesIndex:s.seriesIndex})},e.prototype.pickNextAvailableIndex=function(t,a,i,n){var s=n===j.x0.NextCategory||n===j.x0.PreviousCategory?this.rollToNextSeries:this.rollToNextCategory,o=n===j.x0.NextSeries||n===j.x0.NextCategory?1:-1,l=a;do{if((l+=o)>=t.length||l<0)return s.call(this,i,n);if(l===a)break}while(!t[l]||null==t[l].value);if(null!=t[l].value)return t[l]},e.prototype.rollToNextSeries=function(t,a){P.fF.assert(function(){return a===j.x0.PreviousCategory||a===j.x0.NextCategory},"expected a direction having to do with category");var n=a===j.x0.PreviousCategory?_.findLast:_.find;return t=e.incrementIndex(t,a===j.x0.PreviousCategory?-1:1,this.data.series.length),n(this.data.series[t].data,function(l){return l&&null!=l.value})},e.prototype.rollToNextCategory=function(t,a){P.fF.assert(function(){return a===j.x0.PreviousSeries||a===j.x0.NextSeries},"expected a direction having to do with series");var n=a===j.x0.PreviousSeries?_.findLast:_.find;t=e.incrementIndex(t,a===j.x0.PreviousSeries?-1:1,this.data.categories.length);var o=_.map(this.data.series,function(u){return _.find(u.data,function(c){return c&&c.categoryIndex===t})}),l=n(o,function(u){return u&&null!=u.value});return l||(l=n(o,function(u){return!!u})),l},e.incrementIndex=function(t,a,i){return(t+=a)>=i?t=0:t<0&&(t=i-1),t},e.prototype.getTooltipInfoForPoint=function(t,a){var i,n=t.data,s=this.getCategoryIndexFromSeriesAndPointX(n,a,!0,t.context);if(null!==(i=n?.data)&&void 0!==i&&i.length){var o=_.find(n.data,function(l){return l?.categoryIndex===s});if(o)return _.concat(o.tooltipInfo,o.additionalTooltipItems||[])}},e.isDataPointData=function(t){return t&&null!=t.categoryIndex},e.prototype.getCategoryIndexFromTooltipEvent=function(t,a){var i=t.data;if(!Ms(i))return e.isDataPointData(i)?i.categoryIndex:this.getCategoryIndexFromSeriesAndPointX(i,a,!1);P.fF.assertFail("should not receive pointer events for forecast lines")},e.prototype.getCategoryIndexFromSeriesAndPointX=function(t,a,i,n){var s=0,o=this.data.categoryData,l=this.xAxisProperties.scale;if(t&&!_.isEmpty(t.data)&&this.xAxisProperties){a=this.adjustPathXCoordinate(a,n);var c=cs(t,this.data.isScalar&&l.range()[1]<l.range()[0]);P.fF.assertValue(c,"If there is data on the tooltipEvent but no categoryIndex, there should always be two consecutive non-null values"),c&&(s=er(this.viewModel,c)),i&&(o=_.map(t.data,function(h){return Vt(h,void 0)}))}return e.findCategoryIndex({pointX:a,offsetX:s,categoryData:o,currentViewport:this.currentViewport,scale:l,categoryThickness:this.xAxisProperties.categoryThickness,isScalar:this.data.isScalar})},e.prototype.getYValueFromTooltipEvent=function(t,a){var i,n,u,c,s=null===(i=this.yAxisProperties)||void 0===i?void 0:i.scale,o=null===(n=this.y2AxisProperties)||void 0===n?void 0:n.scale,l=this.currentViewport.scale;if((0,G.GG)(l,1,1e-5)||(t/=l),!a.classList.contains(Ls.class)&&!a.classList.contains(e.lineChartSVGClassName)&&(t+=a.getBBox().y),s){var h=s.domain();u={point:s.invert(t),threshold:.1*(h[1]-h[0])}}return o&&(h=o.domain(),c={point:o.invert(t),threshold:.1*(h[1]-h[0])}),{y:u,y2:c}},e.prototype.getVisualCategoryAxisIsScalar=function(){return!!this.data&&this.data.isScalar},e.prototype.getSupportedCategoryAxisType=function(){var t,a,i=!1,n=null===(a=null===(t=this.dataView)||void 0===t?void 0:t.categorical)||void 0===a?void 0:a.categories;return _.isEmpty(n)||(i=n.some(function(s){var o,l=null===(o=s.source)||void 0===o?void 0:o.type;if(l){var u=(0,ce.A8)(s);return!(0,Y.c$)(l)||u&&!_.isEmpty(u.values)}})),i?At.w.both:At.w.categorical},e.sliceSeries=function(t,a,i){var n;return null!==(n=t?.map(function(s){var o=(0,Ae.ED)(s);return o.data=s.data.slice(a,i),o}))&&void 0!==n?n:[]},Object.defineProperty(e.prototype,"horizontalOffset",{get:function(){if(!this.data.isScalar){var a=this.xAxisProperties.scale;if((0,en._9)(a))return a.bandwidth()/2}return 0},enumerable:!1,configurable:!0}),e.prototype.getHoverLineDataForCategory=function(t){var a=this.createTooltipData(t);if(a)return dl.call(this,t,a.dataPoints),a},e.prototype.getHoverLineIdentities=function(t,a){var i,n,s,o,l,u,c,h,g=null===(l=null===(o=this.data)||void 0===o?void 0:o.categoryIdentities)||void 0===l?void 0:l[t],y=null===(c=null===(u=this.data)||void 0===u?void 0:u.multiplesCategoryIdentities)||void 0===c?void 0:c[t],D=[],x=null===(h=_.find(a??[],function(A){return A?.categoryIndex===t}))||void 0===h?void 0:h.identity;return x&&(y.exclude=((i={})[1]=!0,i[0]=!1,i),g.exclude=((n={})[1]=!0,n[0]=!1,n),x.exclude=((s={})[1]=!1,s[0]=!0,s),D.push(x)),(y||g)&&D.push(y??g),D},e.prototype.clearHoverLine=function(){hl.call(this)},e.prototype.selectColumn=function(t,a){if(void 0===a&&(a=!1),a||this.lastInteractiveSelectedColumnIndex!==t){this.lastInteractiveSelectedColumnIndex=t;var i=this.getChartX(t);this.setHoverLine(i,t);var n=this.createLegendDataPoints(t);n&&this.cartesianVisualHost.updateLegend(n)}},e.prototype.setHoverLine=function(t,a){fl.call(this,t,a)},e.prototype.getChartX=function(t){var a=0;this.data.isScalar?t>=0&&t<this.data.categoryData.length&&(a=Math.max(0,this.xAxisProperties.scale(this.data.categoryData[t].categoryValue))):a=Math.max(0,this.xAxisProperties.scale(t));var i=Math.max.apply(Math,this.xAxisProperties.scale.range());return a=Math.min(a,i),this.horizontalOffset+(isNaN(a)?0:a)},e.findCategoryIndex=function(t){var a=t.offsetX,i=t.categoryData,n=t.scale,s=t.pointX,o=t.currentViewport.scale;(0,G.GG)(o,1,1e-5)||(s/=o),a&&(s+=a);var l=w.invertScale(n,s,0,0,void 0).value;if(t.isScalar){var u=e.findClosestXAxisIndex(l,i,n);return u>=0?i[u].categoryIndex:-1}if(i[l]&&!i[l].hasData){for(var c=-1,h=l;h>0&&-1===c&&i[--h].hasData;)c=h;for(var g=-1,y=l,D=i.length-1;y<D&&-1===g&&i[++y].hasData;)g=y;var x=Math.abs(c-l),A=Math.abs(g-l);x<A?l=c:x>A?l=g:x===A&&(l=s>n(l)+t.categoryThickness/2?g:c)}return l},e.findClosestXAxisIndex=function(t,a,i){var n=i.domain(),s=[n[0],n[1]],o=-1;if(P.fF.assert(function(){return s[1]>=s[0]},"expected max extent to not be less than min"),s[0]>s[1])return o;var l=Number.MAX_VALUE;for(var u in a){var c=a[u].categoryValue;if(!(c<s[0]||c>s[1])){var h=Math.abs(t-c);h<l&&(l=h,o=parseInt(u,10))}}return o},e.prototype.findSubSelectedAreaElement=function(t){return Gs.findSubSelectedAreaElement(this.viewModel,t)},e.prototype.createTooltipData=function(t){var a=this.data;if(a&&0!==a.series.length&&a.categories&&a.categoryData){var i=[];P.fF.assert(function(){return t<a.categoryData.length},"category index out of range (categoryData)"),P.fF.assert(function(){return t<a.categories.length},"category index out of range (categories)");for(var l,n=a.categoryData[t],s=!1,o=a.multipleDisplayName,u=0,c=a.series;u<c.length;u++){var h=c[u],g=this.data.isScalar?n?h.data.filter(function(I){return I.categoryValue===n.categoryValue})[0]:void 0:h.data[t],y=g?.originalValue;if(null!=y){var D=(0,R.WU)(y,g.labelFormatString||(0,R.EO)(h.yCol,mr));i.push({category:(0,Ke.BJ)(n.hierarchyCategoryLevels),multipleDisplayName:o,measureDisplayName:h.displayName,measureActualDisplayName:h.measureDisplayName,formattedValue:this.isStacked100?"".concat(D," (").concat((0,R.WU)(g.value,this.hostService.getLocalizedString("Percentage")),")"):D,value:y,stackedValue:g.stackedValue,uncertainty:g.uncertainty,showHoverlineDots:!h.lineStyle.markerProperties.show,marker:(0,d.pi)((0,d.pi)({},(0,Rn.lw)(h.lineStyle.markerProperties,a.legendMarkerRendering,Ta.ZO.longDash)),{color:(0,Rn.XU)(h.lineStyle.markerProperties,h.lineStyle.strokeColor,a.legendMarkerRendering,a.matchLineColor)}),line:h.lineStyle,isY2:g.isY2,seriesDisplayName:a.hasDynamicSeries?a.seriesDisplayName:void 0,seriesName:a.hasDynamicSeries?h.displayName:void 0,additionalTooltipItems:a.hasDynamicSeries?g.additionalTooltipItems:void 0}),s||(s=!!g.uncertainty),!a.hasDynamicSeries&&!l&&(l=g.additionalTooltipItems)}}if(!_.isEmpty(a.forecastLines)&&n){h=_.head(a.series),P.fF.assertValue(h,"expected a line chart series when forecast is present");for(var x=0,A=a.forecastLines;x<A.length;x++){var M=A[x],O=_(M.points).filter(function(J){return J.point.x===n.categoryValue}).first();y=O?.point.y,null!=y&&i.push({category:(0,Ke.BJ)(n.hierarchyCategoryLevels),multipleDisplayName:o,measureDisplayName:M.displayName,measureActualDisplayName:this.originalData.valuesMetadata[0].displayName,formattedValue:(0,R.WU)(y,(0,R.EO)(h.yCol,mr)),value:y,additionalTooltipItems:[{displayName:this.localizer("Visual_Confidence_Band_Upper"),value:(0,R.WU)(O.upperBound.y,(0,R.EO)(h.yCol,mr))},{displayName:this.localizer("Visual_Confidence_Band_Lower"),value:(0,R.WU)(O.lowerBound.y,(0,R.EO)(h.yCol,mr))}],showHoverlineDots:!0,marker:{show:!0,color:M.stroke.strokeColor,shape:Ta.ZO.circle},line:void 0})}}return{dataPoints:i,additionalTooltipItems:l,legendMarkerRendering:a.legendMarkerRendering,hasUncertainty:s}}},e.prototype.createLegendDataPoints=function(t){var i,n,s,o,a=this,l=this.data;if(l&&l.series&&!(l.series.length<1)){var u,c=l.categoryData[t];this.mobileTileInteractive&&c&&(this.data.isScalar?(u=c.categoryValue,(0,Y.v9)(this.xAxisProperties.valueType)&&(u=Co.y3.fromTimeValue(u))):u=(0,f.dZ)(this.data,t,this.xAxisProperties.valueType,this.data.isScalar));var h=l.series.map(function(g,y){var x,D=g.data;if(a.mobileTileInteractive){var A=void 0;if(a.data.isScalar){if(c)for(var M=c.categoryValue,O=0,I=D;O<I.length;O++){var W=I[O];if(W.categoryValue===M){A=W;break}}}else A=D[t];x=A?.value}return{marker:{show:!0,shape:Ta.ZO.circle,color:g.lineStyle.strokeColor},label:(0,Pe.TO)(g.yCol,a.dataView.categorical.values,mr),category:(0,R.WU)(u,(0,R.EO)(g.xCol,mr)),measure:(0,R.WU)(x,(0,R.EO)(g.yCol,mr)),identity:g.identity,selected:g.selected,index:y}});return(0,d.pi)((0,d.pi)({},(0,m.Fe)(this.style)),{title:(null===(o=null===(s=null===(n=null===(i=this.dataView)||void 0===i?void 0:i.categorical)||void 0===n?void 0:n.values)||void 0===s?void 0:s.source)||void 0===o?void 0:o.displayName)||"",dataPoints:h,grouped:l.hasDynamicSeries})}},e.prototype.adjustPathXCoordinate=function(t,a){It.M.isFirefox()&&null!=a&&(this.pathXAdjustment=this.getPathXAdjustmentForFirefox(a)),It.M.isInternetExplorerOrEdge()&&(this.pathXAdjustment=5);var i=this.currentViewport.scale;return t-this.pathXAdjustment*((0,G.GG)(i,1,1e-5)?1:i)},e.prototype.getPathXAdjustmentForFirefox=function(t){var a=t.getBoundingClientRect(),i=(0,Va.jL)(t);if(i.height>0&&i.width>0)return(a.width/this.currentViewport.scale-i.width)/2},Object.defineProperty(e.prototype,"hasSingleStaticSeries",{get:function(){return this.data&&!this.data.hasDynamicSeries&&this.hasSingleSeriesPerValueAxis()},enumerable:!1,configurable:!0}),e.prototype.getCartesianVisualCapabilities=function(){var t=this.data,a=!this.isStacked||this.hasSingleStaticSeries;return{supportsHierarchicalCategoryAxis:!0,axesCapabilities:{categoryAxis:{domainAggregateRole:mi.R.Category,supportedDomainAggregates:t&&t.isScalar?t.scalarKeyCount?1:3:0},valueAxis:{domainAggregateRole:mi.R.Y,supportedDomainAggregates:a?3:1},secondaryValueAxis:this.haveY2Data()||this.isComboChart?{domainAggregateRole:mi.R.Y2,supportedDomainAggregates:a?3:1}:void 0}}},e.prototype.hasSingleSeriesPerValueAxis=function(){var t=this.data;if(!t||_.isEmpty(t.valuesMetadata))return!1;for(var a=!1,i=!1,n=0,s=t.valuesMetadata;n<s.length;n++){var l=s[n].roles;for(var u in l)if(l[u]){if(u===mi.R.Y){if(a)return!1;a=!0}if(u===mi.R.Y2){if(i)return!1;i=!0}}}return!0},e.prototype.getStaticSeriesRole=function(){return this.isComboChart?mi.R.Y2:mi.R.Y},e.prototype.haveY2Data=function(){var t;return _.some(null===(t=this.data)||void 0===t?void 0:t.series,function(a){return a?.isY2})},e.prototype.customizeLegendFormattingModelOptions=function(t){var a=this.originalData,i=a.legendMarkerRendering,n=i===nn._.markerCircleDefault;return(0,d.pi)((0,d.pi)({},t),{legendMarkerRendering:i,matchLineColor:i===nn._.markerOnly||n?a.matchLineColor:void 0})},e.prototype.getTelemetryInformation=function(){var t,i={};if(_.isEmpty(null===(t=this.data)||void 0===t?void 0:t.anomalyDetections)||(i.AnomalyDetections=!0),!_.isEmpty(i))return i},e.ClassName="lineChart",e.MainGraphicsContextClassName="mainGraphicsContext",e.lineChartSVGClassName="lineChartSVG",e.ScalarOuterPadding=10,e.DefaultZeroScalarDomain=[-1,1],e}(Fn),Tl=function(r){function e(t){var a=r.call(this,t)||this;return a.maxDataValue=Number.MIN_VALUE,a.newDataInterval=0,a.duration=3e5,a}return(0,d.ZT)(e,r),e.prototype.initData=function(t){r.prototype.initData.call(this,t),this.data=this.defaultData},e.prototype.initRenderer=function(t){r.prototype.initRenderer.call(this,t),this.svg.classed("realTimeLineChart",!0).classed("cartesianChart",!0);var a=this.mainGraphicsSVG=this.svg.append("svg");a.classed("mainGraphicsSVG",!0),this.mainGraphicsContext=a.append("g").classed("mainGraphicsContext",!0)},Object.defineProperty(e.prototype,"defaultData",{get:function(){return{series:[],totals:[],legendData:(0,m.Fe)(this.style),isScalar:!1,dataLabelsSettings:ts(this.style),hasDynamicSeries:!1,hasHighlights:!1,categories:[],categoryMetadata:void 0,valuesMetadata:[],categoryData:[],lineStyle:es(),layout:{seriesOrderReversed:!1}}},enumerable:!1,configurable:!0}),e.prototype.setData=function(t){var a;if(null!==(a=this.data)&&void 0!==a||(this.data=this.defaultData),!_.isEmpty(t)){var i=_.head(t);if(i.categorical){var s=f.Vk(i.metadata).duration;s&&(this.duration=s);var o=i.categorical;this.removeOldData();var l=o.categories,u=V.Ge.fromDescriptor({text:!0});l&&l.length>0&&l[0].source&&l[0].source.type&&(u=l[0].source.type);var c=(0,ce._K)(i.metadata?i.metadata.objects:null,Ye.zK.categoryAxis.axisType,u),h=ks.convert({dataView:i,style:this.style,isComboChart:!1,isScalar:c,tooltipsEnabled:!1,supportsTotalLabels:!1,featureSwitches:this.featureSwitches});this.mergeNewData(h),this.removeOldData(this.newDataInterval)}}},e.prototype.hasLegend=function(){return this.data&&(this.data.hasDynamicSeries||!_.isEmpty(this.data.series))},e.prototype.calculateAxesProperties=function(t){var i,a=this;this.updateCurrentViewport(t);var n=t.categoryAxisOptions,s=t.valueAxisOptions;if(this.newAxisData&&(this.axisData=this.newAxisData),this.data){var o=this.getAxesDomains(!1,{categoryAxis:!0,valueAxis:!0}),l=function(c){var h="x"===c,g="y"===c,y=h?n:s,D=h?a.data.categoryMetadata:a.containsEmptySeries()?void 0:a.data.series[0].yCol,x=w.createAxis({pixelSpan:h?a.currentViewport.width:a.availableHeight,domainOptions:h?{domain:o.categoryAxis,type:0}:{domain:o.valueAxis,type:0},axisZoom:void 0,metaDataColumn:D,isScalar:!0,isCategoryAxis:h,isVertical:g,formatString:(0,R.EO)(D,X.p.general.formatString),outerPadding:h?10:0,useTickIntervalForDisplayUnits:!0,getValueFn:h?function(A,M){return f.dZ(a.data,A,M,!0)}:void 0,axis:na.AxisDataDefaults,margin:a.margin,preventNice:w.hasForcedDomain(y.includeDomain),categoryThickness:null});return g&&x.d3Axis.tickSize(-t.viewport.width),x};this.xAxisProperties=l("x"),this.yAxisProperties=l("y"),this.newAxisData={x:this.xAxisProperties,y1:this.yAxisProperties}}return null!==(i=this.axisData)&&void 0!==i||(this.axisData=this.newAxisData),[this.xAxisProperties,this.yAxisProperties]},e.prototype.getAxesDomains=function(t,a){var i,n,s,o={};if(!this.data)return o;var l=this.truncateSeries();if(_.isEmpty(l))return o;if(a.categoryAxis){var u=w.createDomain(l,null!==(s=null===(n=null===(i=this.data)||void 0===i?void 0:i.categoryMetadata)||void 0===n?void 0:n.type)&&void 0!==s?s:V.Ge.fromDescriptor({text:!0}),!0,[w.createScalarDomainOptions([this.getMinData()+this.newDataInterval,void 0],0,[!0,void 0])]);u&&(w.assertScalarDomain(u.domain),o.categoryAxis=u.domain)}return a.valueAxis&&(o.valueAxis=w.createValueDomain(l)),o},e.prototype.render=function(t){var a;if(!this.containsEmptySeries())return this.renderLines(),null===(a=this.animator)||void 0===a||a.refreshLastUpdate(),{dataPoints:[],behaviorOptions:{},labelDataPoints:[],labelsAreNumeric:!0,labelDataPointGroups:[],animateLabels:!1}},e.prototype.truncateSeries=function(){var t=this.getMinData(),a=this.data.series;return a?_.map(a,function(i){var n=(0,Ae.ED)(i);n.data=(0,Ae.ED)(n.data);var o=0;return _.findIndex(n.data,function(l){return l&&l.categoryValue>=t})>0&&o++,n.data=n.data.slice(o),n}):[]},e.prototype.removeOldData=function(t){if(void 0===t&&(t=0),!this.containsEmptySeries()){for(var a=this.getMinData(t),i=this.data,n=0,s=i.series;n<s.length;n++){var o=s[n],l=_.findIndex(o.data,function(c){return c&&c.categoryValue>a});l>0&&(o.data=o.data.slice(l))}var u=_.findIndex(i.categoryData,function(c){return c&&c.categoryValue>a});u>0&&(i.categoryData=this.data.categoryData.slice(u),i.categories=this.data.categories.slice(u))}},e.prototype.mergeNewData=function(t){if(P.fF.assertValue(t,"newData"),this.containsEmptySeries())return this.data=t,void(this.maxDataValue=this.getMaxData());this.data.series=e.mergeSeries(this.data.series,t.series,this.maxDataValue),e.mergeCategories(this.data,t,this.maxDataValue);var a=this.getMaxData();this.newDataInterval=this.maxDataValue&&a?a-this.maxDataValue:0,this.maxDataValue=a},e.prototype.getMaxData=function(){for(var t=0,a=0,i=this.data.series;a<i.length;a++){var n=i[a];n.data.length&&(t=Math.max(_.last(n.data).categoryValue,t))}return t},e.prototype.getMinData=function(t){return void 0===t&&(t=0),this.maxDataValue-this.duration-1.5*t},e.prototype.renderLines=function(){var t,a=this.axisData.x.scale,i=this.axisData.y1.scale,n=d3.line().x(function(s){return a(s.categoryValue)}).y(function(s){return i(s.value)});this.mainGraphicsSVG.attrs({x:0,height:this.availableHeight,width:this.availableWidth}),this.mainGraphicsContext.attr("transform",(0,Va.Iu)(0,0)),this.mainGraphicsContext.selectAll(".line").data(this.data.series,function(s){return s.identity.getKey()}).join(function(s){return s.append("path").classed("line",!0)}).style("stroke",function(s){return s.lineStyle.strokeColor}).attr("d",function(s){return n(s.data)}),null===(t=this.animator)||void 0===t||t.animate({mainGraphicsContext:this.mainGraphicsContext,interactivityService:null,xTranslation:a(a.domain()[0]+this.newDataInterval)-a(a.domain()[0])})},e.prototype.containsEmptySeries=function(){return!this.data||_.isEmpty(this.data.series)},e.mergeCategories=function(t,a,i){P.fF.assertValue(t,"existingChartData"),P.fF.assertValue(a,"newChartData");var s=_.findIndex(a.categories,function(o){return o&&o.categoryValue>i});s>-1?(t.categories=t.categories.concat(a.categories.slice(s)),t.categoryData=t.categoryData.concat(a.categoryData.slice(s))):(t.categories=a.categories,t.categoryData=a.categoryData)},e.mergeSeries=function(t,a,i){P.fF.assertValue(t,"existingSeries"),P.fF.assertValue(a,"newSeries");for(var n=[],s=0,o=a;s<o.length;s++){var l=o[s],u=_.find(t,function(y){return y.identity.equals(l.identity)});if(u){n.push(u);for(var c=0,h=l.data;c<h.length;c++){var g=h[c];g.categoryValue>i&&u.data.push(g)}}else n.push(l)}return n},e.prototype.getCartesianVisualCapabilities=function(){return{supportsHierarchicalCategoryAxis:!1}},e.prototype.getStaticSeriesRole=function(){return"Y"},e}(ys),Ol=S(14577),Fl=S(67165),Cn=S(81551),Sr=S(15458),ds=S(79972),hs=S(56914),Vl=function(r){function e(t){return r.call(this,t)||this}return(0,d.ZT)(e,r),e.prototype.initRenderer=function(t){r.prototype.initRenderer.call(this,t),this.svg.classed("".concat(e.ClassName," ").concat(cr.qR),!0),this.renderer=new hs.WG(this,t.eventManager)},e.prototype.renderAtFrame=function(t){this.data=this.originalData=t,this.updateViewModelAdapterAndData(),this.cartesianVisualHost.triggerRender(!1)},e.prototype.setData=function(t){var i,n,s,a=this;if(this.data=ds.vN(this.style),!(null===(i=this.playAxis)||void 0===i)&&i.isCurrentlyPlaying()&&this.playAxis.stop(),t.length>0){var o=t[0]||t[1];if(o){this.categoryAxisProperties=(0,f.Vk)(o.metadata,!0),this.valueAxisProperties=(0,f.$w)(o.metadata,!0),this.dataView=o;var l={viewport:this.currentViewport,colors:this.style.colorPalette.dataColors,interactivityService:this.interactivityService,categoryAxisProperties:this.categoryAxisProperties,valueAxisProperties:this.valueAxisProperties,style:this.style,tooltipsEnabled:this.tooltipsEnabled,useMatrixDV:!0};if((0,cr.vH)(o)){this.playAxis||(this.playAxis=new cr.CT(this.interactivityService),this.dataView&&(0,cr.vH)(this.dataView)&&(P.fF.assertValue(this.playAxis,"playaxis"),this.playAxis.initData(this.dataInitOptions)));var u=this.playAxis.setData(o,function(h,g,y){return ds.OQ(h,(0,d.pi)((0,d.pi)({},l),{useMatrixDV:!1}),g,y)});this.mergeSizeRanges(u),this.data=u.chartData,this.playAxis.setRenderFunction(function(h){return a.renderAtFrame(h)})}else{null===(n=this.playAxis)||void 0===n||n.remove(),this.playAxis=null;var c=ds.OQ(o,l);c&&(this.data=c)}}}else null===(s=this.playAxis)||void 0===s||s.remove(),this.playAxis=null;this.originalData=this.data},e.prototype.mergeSizeRanges=function(t){var a,i;if(t?.chartData){for(var n=t.chartData.sizeRange,s=0,o=t.allChartData;s<o.length;s++){var u=o[s].sizeRange;null!=u.min&&(n.min=Math.min(null!==(a=n.min)&&void 0!==a?a:Number.POSITIVE_INFINITY,u.min)),null!=u.max&&(n.max=Math.max(null!==(i=n.max)&&void 0!==i?i:Number.NEGATIVE_INFINITY,u.max))}for(var c=0,h=t.allChartData;c<h.length;c++)h[c].sizeRange=n}},e.prototype.hasLegend=function(){var t;return null===(t=this.data)||void 0===t?void 0:t.hasDynamicSeries},e.prototype.enumerateObjectInstances=function(t,a){return Sr.qo.call(this,t,a)},e.prototype.resolveFormattingPlaceholder=function(t){return Sr.u$.call(this,t)},e.prototype.customizeFormattingCard=function(t){return Sr.aD.call(this,t)},e.prototype.getFormattingCards=function(t){return Sr.nZ.call(this,t)},e.prototype.supportsTrendLine=function(){var t=this.data;return!(!t||this.isXAxisCategorical()||this.playAxis)&&!t.size&&(t.hasCategory||t.hasDynamicSeries)&&!!t.xCol&&!!t.yCol},e.prototype.supportsStaticReferenceLines=function(){return this.data&&!this.isXAxisCategorical()},e.prototype.getAxisLocationForRole=function(t){return"X"===t?0:1},e.getExtents=function(t){var a,i={},n=t.dataPoints;if(_.isEmpty(n))return{minY:0,maxY:0,formatStringY:void 0,minX:0,maxX:0,formatStringX:void 0};var s=!!t.xGroupMetadata,o=s&&t.xGroupMetadata.isCategoricalAxis;return o||(i.minX=d3.min(n,function(l){return l.x}),i.maxX=d3.max(n,function(l){return l.x}),i.formatStringX=_.first(n).xFormatString),s&&!o&&(n=_.filter(n,function(l){return null!=l.x})),i.minY=d3.min(n,function(l){return l.y}),i.maxY=d3.max(n,function(l){return l.y}),i.formatStringY=null===(a=_.first(n))||void 0===a?void 0:a.yFormatString,i},e.prototype.calculateAxesProperties=function(t){var a=this;this.updateCurrentViewport(t);var i={minY:0,maxY:10,formatStringY:void 0,formatStringX:void 0,minX:0,maxX:10};this.playAxis?(i=this.playAxis.getCartesianExtents(i,e.getExtents),this.playAxisControlLayout=t.playAxisControlLayout):_.isEmpty(this.data.dataPoints)||(i=e.getExtents(this.data));var n=this.getAxesDomains(!1,{categoryAxis:!this.isXAxisCategorical(),valueAxis:!0}),s=function(l){var u,c,h,g,y="x"===l,D="y"===l,x=y?t.categoryAxisOptions:t.valueAxisOptions,A=y&&a.isXAxisCategorical(),M=A?{domain:_.uniq(_.map(a.data.dataPoints,function(J){return J.categoryIndex})),type:0}:w.mergeScalarAxisDomains(x.includeDomain,w.createScalarDomainOptions(y?n.categoryAxis:n.valueAxis,0)),O=y?a.data.xCol:a.data.yCol,I=A?(0,f.is)({availableWidth:a.availableWidth,categoryCount:_.size(_.uniqBy(a.data.dataPoints,function(J){return J.categoryIndex})),preferredCategoryWidth:(0,f.$K)((0,f.Vk)(a.dataView.metadata)),domain:M.domain,isScalar:!a.isXAxisCategorical(),cartesianOptions:a.options,trimOrdinalDataOnOverflow:t.trimOrdinalDataOnOverflow,outerPaddingRatio:t.outerPaddingRatio,innerPaddingRatio:t.innerPaddingRatio}):void 0,W=w.createAxis({pixelSpan:y?a.availableWidth:a.availableHeight,domainOptions:M,metaDataColumn:O,axisZoom:t.axisZoom,zeroScalarDomain:e.DefaultZeroScalarDomain,isScalar:D||!A,isCategoryAxis:y,isVertical:D,formatString:(y?i.formatStringX:i.formatStringY)||(0,R.EO)(O,Ol.il.general.formatString),outerPadding:null!==(u=I?.outerPaddingRatio)&&void 0!==u?u:0,categoryThickness:null!==(c=I?.categoryThickness)&&void 0!==c?c:void 0,innerPaddingRatio:null!==(h=I?.innerPaddingRatio)&&void 0!==h?h:void 0,outerPaddingRatio:null!==(g=I?.outerPaddingRatio)&&void 0!==g?g:void 0,forcedTickCount:t.forcedTickCount,useTickIntervalForDisplayUnits:!0,axis:x.axis,margin:a.margin,preventNice:A?void 0:w.hasForcedDomain(M),getValueFn:A?function(J,ue){var xe=_.find(a.data.dataPoints,function(ie){return ie.categoryIndex===J});return xe?.formattedCategory.getValue()}:void 0});return W.axisLabel=a.data.axesLabels[l],y&&(W.d3Axis.tickSizeInner(-a.availableHeight).tickSizeOuter(0),A&&(W.categoryIdentities=a.data.categoryIdentities)),W};return this.xAxisProperties=s("x"),this.yAxisProperties=s("y"),[this.xAxisProperties,this.yAxisProperties]},e.prototype.getAxesDomains=function(t,a){var i={},n=this.data;if(!n)return i;var s={minY:0,maxY:10,formatStringY:void 0,formatStringX:void 0,minX:0,maxX:10};return this.playAxis?s=this.playAxis.getCartesianExtents(s,e.getExtents):_.isEmpty(n.dataPoints)||(s=e.getExtents(n)),a.categoryAxis&&!this.isXAxisCategorical()&&(i.categoryAxis=[s.minX,s.maxX]),a.valueAxis&&(i.valueAxis=[s.minY,s.maxY]),i},e.prototype.setFilteredData=function(t,a){if(this.isXAxisCategorical()){var i=this.data=(0,Ae.ED)(this.originalData);i.dataPoints=_.filter(i.dataPoints,function(n){return n.categoryIndex>=t&&n.categoryIndex<a}),i.dataPointSeries=_.map(i.dataPointSeries,function(n){var s=(0,Ae.ED)(n);return s.dataPoints=_.filter(n.dataPoints,function(o){return o.categoryIndex>=t&&o.categoryIndex<a}),s})}},e.prototype.shouldSuppressAnimation=function(){var t,a;return(null===(a=null===(t=this.data)||void 0===t?void 0:t.dataPoints)||void 0===a?void 0:a.length)>e.NoAnimationThreshold},e.prototype.render=function(t,a,i){var n,s,o,l,u,c,h;if(this.data){this.playAxis&&!this.playAxis.isRendererInitialized()&&this.playAxis.initRenderer({svg:this.svg});var M,g=this.data,y=(0,sa.Mb)(this.animator,t),D=!!this.data.size,x={data:this.data,allData:this.originalData,currentViewport:this.currentViewport,drawBubbles:D,isPlay:!!this.playAxis,hasCategoricalAxis:this.isXAxisCategorical(),xAxisProperties:this.xAxisProperties,yAxisProperties:this.yAxisProperties,plotArea:{width:this.availableWidth,height:this.availableHeight},margin:this.margin,hasSelection:null===(n=this.interactivityService)||void 0===n?void 0:n.hasSelection(),animation:null!==(s=this.playAxis)&&void 0!==s&&s.isCurrentlyPlaying()&&(this.mobileTileInteractive||y>0)?cr.Je:{duration:y,ease:d3.easeCubicInOut},animationOptions:this.animationOptions,fillMarkers:!D&&g.fillPointStyle===Fl.f.fillOnly,suppressDataPointRendering:1===a&&(null===(o=g.dataPoints)||void 0===o?void 0:o.length)>e.NoRenderResizeThreshold,supportsPlotAreaSymmetryShading:this.isPlotSymmetryShadingSupported()},A=this.renderer.render(x,this.interactivityService,this.hostService,i);if(this.mobileTileInteractive&&(A={data:A.data,dataPointsSelection:A.dataPointsSelection,eventGroup:A.eventGroup,root:A.root,host:this.cartesianVisualHost,mobileRoot:this.svg,visualDataInitOptions:this.dataInitOptions,xAxisProperties:this.xAxisProperties,yAxisProperties:this.yAxisProperties,background:d3.select(this.element.get(0)),visualInstanceId:A.visualInstanceId,eventManager:A.eventManager}),this.playAxis&&(P.fF.assertValue(this.playAxisControlLayout,"playAxisControlLayout"),this.playAxis.setPlayControlPosition(this.playAxisControlLayout),M=this.playAxis.render(x,this.currentViewport,this.margin),this.interactivityService&&(A.playOptions={traceLineRenderer:new hs.oz(M.viewModel,this)},null!==(l=this.interactivityService)&&void 0!==l&&l.hasSelection()))){var O=_.uniqBy(_.filter(M.allDataPoints,function(I){return I.selected}),function(I){return I.identity.getKey()});A.playOptions.traceLineRenderer.render(O,!t)}return{dataPoints:null!==(u=M?.allDataPoints)&&void 0!==u?u:g.dataPoints,behaviorOptions:A,navigationOptions:this.interactivityService?{helper:this.renderer,navigationStrategy:this.isXAxisCategorical()?j.jN.CategoryFirst:this.data.hasDynamicSeries?j.jN.SeriesFirst:j.jN.CategoryOnly}:void 0,labelDataPoints:null!==(c=g.dataLabelsSettings)&&void 0!==c&&c.show||null!==(h=g.dataLabelsSettings)&&void 0!==h&&h.showCategory?kl(x,this.style):void 0,labelsAreNumeric:!1,animateLabels:!0}}},e.prototype.getCategoryValueType=function(){return w.getCategoryValueType(this.data.xCol)},e.prototype.getSupportedCategoryAxisType=function(){var t;return null!==(t=this.data)&&void 0!==t&&t.xGroupMetadata?this.data.xGroupMetadata.isScalarType?At.w.both:At.w.categorical:At.w.scalar},e.prototype.getVisualCategoryAxisIsScalar=function(){return!this.isXAxisCategorical()},e.prototype.getSubSelectionMetadata=function(t){return{visualObject:t}},e.prototype.getSubSelectionShortcuts=function(t){return Sr.yV.call(this,t)},e.prototype.getSubSelectionStyles=function(t){return Sr.mv.call(this,t)},e.prototype.getSubSelectionCustomOutlines=function(t){return Sr.PH.call(this,t)},e.prototype.getSelectorsByColumnFromSubselectedElement=function(t){return Sr.l5.call(this,t)},e.prototype.getDataViewObjectLayerChanges=function(t,a){return Sr.In.call(this,t,a)},e.prototype.getGroupBoundingRect=function(t,a,i){var n,s,o,l=(n=i.node().getBoundingClientRect()).left,u=n.top,c=(s=i.node().getBBox()).x,h=s.y,g=(o=t.reduce(function(re,he){var Ee=he.geometry,Ze=Ee.size,Ie=Ee.x,tt=Ee.y;return re.xMin=Math.min(Ie-Ze,re.xMin),re.yMin=Math.min(tt-Ze,re.yMin),re.xMax=Math.max(Ie+Ze,re.xMax),re.yMax=Math.max(tt+Ze,re.yMax),re},{xMin:Number.MAX_SAFE_INTEGER,yMin:Number.MAX_SAFE_INTEGER,xMax:Number.MIN_SAFE_INTEGER,yMax:Number.MIN_SAFE_INTEGER})).xMin,y=o.yMin,O=(o.xMax-g)*a,I=Math.round((o.yMax-y)*a+10),W=Math.round(O+10),ue=(g-c)*a,xe=Math.ceil((y-h)*a-5+u);return{x:Math.ceil(ue-5+l),y:xe,height:I,width:W}},e.prototype.getCartesianVisualCapabilities=function(){return{supportsHierarchicalCategoryAxis:!1}},e.prototype.getStaticSeriesRole=function(){},e.prototype.isXAxisCategorical=function(){var t,a;return null===(a=null===(t=this.data)||void 0===t?void 0:t.xGroupMetadata)||void 0===a?void 0:a.isCategoricalAxis},e.prototype.isPlotSymmetryShadingSupported=function(){var t,a;return!(this.isXAxisCategorical()||null!==(t=this.valueAxisProperties)&&void 0!==t&&t.logAxisScale||null!==(a=this.categoryAxisProperties)&&void 0!==a&&a.logAxisScale)},e.ClassName="scatterChart",e.NoAnimationThreshold=1e3,e.NoRenderResizeThreshold=1e3,e.DefaultZeroScalarDomain=[-1,1],e}(Fn);function kl(r,e){var t,a=r.data.dataLabelsSettings,i=a.fontProperties,n=null!==(t=function(r){var e=r.plotArea,t=e.width,a=e.height,i=new Cn.E(t/2,a/2),n=function(r,e){var t=r/4,a=e/4;return[new Cn.E(t,a),new Cn.E(3*t,a),new Cn.E(t,3*a),new Cn.E(3*t,3*a)]}(t,a);return function(r,e,t){for(var o,a=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],i=[],n=t.xAxisProperties.scale,s=t.yAxisProperties.scale,l=0,u=t.data.dataPoints;l<u.length;l++){var c=u[l],h=n(c.x),g=s(c.y),y=Il(h,g,r);t.drawBubbles?i[y]||(i[y]=c.identity):(o=Nl(e[y].x,e[y].y,h,g))<a[y]&&(i[y]=c.identity,a[y]=o)}return _.filter(i,function(D){return!!D}).map(function(D){return D.getKey()})}(i,n,r)}(r))&&void 0!==t?t:[],s=i.color||Ge.v.getThemeColor(e,b.uQ);return _.map(r.data.dataPoints,function(o){var l=o.formattedCategory.getValue(),u=(0,ae.qk)(i,l);return{isPreferred:Bl(o.identity.getKey(),n),text:l,textSize:{width:ne.b.measureSvgTextWidth(u),height:ne.b.estimateSvgTextHeight(u)},outsideFill:s,insideFill:Ge.v.getThemeColor(e,b.pl),parentType:0,parentShape:{point:{x:r.xAxisProperties.scale(o.x),y:r.yAxisProperties.scale(o.y)},radius:hs.WG.calculateRadius(o.radius,r.data.sizeRange,r.plotArea,r.data.marker.rangeType,r.data.marker.multiplier),validPositions:[2,1,8,4,16,32,64,128]},identity:o.renderIdentity,fontProperties:i,leaderLine:{strokeColor:s,strokeWidth:1,strokeTransparency:50,strokePattern:k.Dv.solid,strokeShow:!0},hasBackground:a.enableBackground,backgroundColor:a.backgroundColor,backgroundTransparency:a.backgroundTransparency,isCategory:!0}})}function Il(r,e,t){return r>t.x&&e<=t.y?0:r<=t.x&&e<=t.y?1:r<=t.x&&e>t.y?2:3}function Nl(r,e,t,a){return Math.sqrt((r-t)*(r-t)+(e-a)*(e-a))}function Bl(r,e){return _.some(e,function(t){return 0===r.localeCompare(t)})}var fi=S(5616),zl=[Ea.h.auto,Ea.h.outsideEnd,Ea.h.insideEnd,Ea.h.insideCenter,Ea.h.insideBase],Wl=1,Hl=20;function Ul(r){return{type:3,card:[Gl.call(this,r.categoryAxisData),jl.call(this),Yl.call(this)].filter(function(e){return e})}}function Gl(r){var e=this,t=fi.wW.sentimentColors,a=this.originalData,i=a.sentimentColors,n=new Se.CQ(new Se.lg("sentimentColors"),"Role_DisplayName_Columns",(0,d.ev)((0,d.ev)([],_.values(t),!0),[fi.wW.valueAxis.totalsEnabled,fi.wW.categoryAxis.innerPadding],!1),this.localizer);return n.addGroup("colors",function(s){s.withDisplayName("Visual_Colors").addSimpleSlice("increaseFill",new Se.BT({descriptor:t.increaseFill,value:{value:i.increaseFill.solid.color}}).build()).addSimpleSlice("decreaseFill",new Se.BT({descriptor:t.decreaseFill,value:{value:i.decreaseFill.solid.color}}).build()).addSimpleSlice("otherFill",new Se.BT({descriptor:t.otherFill,value:{value:i.otherFill.solid.color}}).build(),function(o){return o.withDisabled(!a.isBreakdown).withCustomDescription("Visual_Waterfall_Breakdown_OtherDescription")}),a.isBreakdown||s.addSimpleSlice("totalsEnabled",new Se.bd({descriptor:fi.wW.valueAxis.totalsEnabled,value:e.isTotalsEnabled()}).build(),function(o){return o.withCustomDisplayName("Visual_Axis_Total_Column")}),e.isTotalsEnabled()&&s.addSimpleSlice("totalFill",new Se.BT({descriptor:t.totalFill,value:{value:i.totalFill.solid.color}}).build())}),n.addGroup("spacing",function(s){s.withDisplayName("Visual_Spacing").addSimpleSlice("innerPadding",(0,ya.Gf)(r,e.localizer))}),n.build()}function jl(){var r=this,e=this.originalData,t=fi.wW.breakdown,a=new Se.CQ(new Se.lg("breakdown"),"Visual_Waterfall_Breakdown",t,this.localizer);return e.isBreakdown?(a.addGroup("breakdown",function(i){i.addSimpleSlice("maxBreakdowns",new Se.JN({descriptor:t.maxBreakdowns,value:e.numberOfBreakdowns,localize:r.localizer,options:{minValue:{type:0,value:Wl},maxValue:{type:1,value:Math.min(Hl,e.totalBreakdownCategories)}}}).build(),function(n){return n.withCustomDisplayName("Visual_Waterfall_MaximumBreakdown")})}),a.build()):(a.withDisabled(!0,"Visual_BreakdownCard_DisabledReason"),a.build())}function Yl(){var r,e,t=fi.wW.labels,a=this.originalData,i=this.data.dataLabelsSettings,n={dataLabelsSettings:a.dataLabelsSettings,positionObject:zl,show:!0,displayUnits:!0,precision:!0,fontSize:!0,fontFamily:!0,labelOrientation:!0,position:!0,enableBackground:i.enableBackground,backgroundColor:i.backgroundColor,backgroundTransparency:i.backgroundTransparency,style:this.style,bold:!0,italic:!0,underline:!0};i.position&&n.positionObject.indexOf(i.position)<0&&(i.position=Ea.h.auto);var o={cardBuilder:new Se.CQ(new Se.lg("labels"),"Visual_DataPointsLabels",t,this.localizer),dataLabelsProps:t,featureSwitches:this.featureSwitches,hostServices:this.hostService,options:n,individualSelector:(0,K.WD)({featureSwitches:this.featureSwitches,hasCategories:null!=_.first(a.categories),hasDynamicSeries:!1,hasSeriesSelector:!1})};if(a.isBreakdown){var l=null===(e=_.first(null===(r=_.first(a.series))||void 0===r?void 0:r.data))||void 0===e?void 0:e.identity.getSelector();l&&(o.repetitionSelector={metadata:l.metadata})}return(0,K.XQ)(o)}function Kl(r,e){if(!e){var a=_.first(r).visualObjects;if(!(a.length>0))return;var n=this.localizer;switch(a[0].objectName){case"increase-fill":return Hn("Format_Increase_Fill",n);case"decrease-fill":return Hn("Format_Decrease_Fill",n);case"other-fill":return Hn("Format_Other_Fill",n);case"total-fill":return Hn("Format_Total_Fill",n);default:return}}}function Hn(r,e){var t=fi.wW.labels.show,a="".concat("Visual","-").concat("sentimentColors");return[{type:0,excludedResetFormattingIds:[t]},(0,d.pi)((0,d.pi)({type:2},t),{enabledLabel:e("Format_AddDataLabels")}),{type:1,destinationInfo:{cardUid:a},label:e(r)}]}function Xl(r){var t=_.first(r).visualObjects;if(t.length>0)switch(t[0].objectName){case"data-labels":return function(r){var e=fi.wW.labels;return(0,se.Jf)({hostServices:r,omitSelectorForSingleSeries:!0,individualSelector:!0,selector:void 0,repetitionSelector:void 0},{fontFamilyReference:e.fontFamily,fontSizeReference:e.fontSize,boldReference:e.bold,italicReference:e.italic,underlineReference:e.underline,fontColorReference:e.color,displayUnitsReference:e.labelDisplayUnits,precisionReference:e.labelPrecision})}(this.hostService);case"increase-fill":return(0,se.w3)(this.hostService,void 0,fi.wW.sentimentColors.increaseFill);case"decrease-fill":return(0,se.w3)(this.hostService,void 0,fi.wW.sentimentColors.decreaseFill);case"other-fill":return(0,se.w3)(this.hostService,void 0,fi.wW.sentimentColors.otherFill);case"total-fill":return(0,se.w3)(this.hostService,void 0,fi.wW.sentimentColors.totalFill);default:return}}var js=(0,q.CH)("waterfall-connector"),vs=(0,q.CH)("column");function Jl(r,e){var t=this,a=this.clippedData.series[0].data,i=this.interactivityService&&this.interactivityService.hasSelection(),n=this.xAxisProperties.scale,s=this.yAxisProperties.scale,o=s.domain()[0],l=this.yAxisProperties.invertAxis,u=this.featureSwitches.onObject;this.mainGraphicsSVG.attr("height",this.availableHeight).attr("width",this.availableWidth),(0,ia.H4)(this.mainGraphicsSVG,this.clippedData.strokeSettings);var c=this.mainGraphicsContext.selectAll(vs.selector).data(a,function(x){return x.key}).join(function(x){return x.append("rect").classed(vs.class,!0).classed("highlight",function(A){return A.highlight})}).style("fill",function(x){return x.color}).style("fill-opacity",function(x){return 1===x.barType?Da.Ko:(0,Da.eR)(x.selected,x.highlight,i,t.data.hasHighlights)}).attr("width",this.layout.categoryWidth).attr("x",function(x){return n(x.categoryIndex)}).attr("y",function(x){if(l){var A;return A=x.position<o?Math.abs(s(o)-s(x.value)):Math.abs(s(x.position)-s(x.position+x.value)),Un(s,x.position,x.value)-A}return Un(s,x.position,x.value)}).attr("height",function(x){return x.position<o?Math.abs(s(o)-s(x.value)):Math.abs(s(x.position)-s(x.position+x.value))});this.interactivityService&&c.attrs({tabindex:0,focusable:!0,"aria-label":function(A){return(0,ii.X)(A.tooltipInfo())},role:"option","aria-selected":function(A){return A.selected}}).classed(Da.Pg,!It.M.isInternetExplorerOrEdge()),u&&c.classed(We.cy,!0).attr(We.Ez,function(x){return function(r){switch(r){case 1:return"decrease-fill";case 0:return"increase-fill";case 3:return"other-fill";case 2:return"total-fill";default:P.fF.assertNever(r)}}(x.sentimentColorType)}).attr(We.CK,function(x){return function(r){switch(r){case 1:return"Visual_DecreaseFill";case 0:return"Visual_IncreaseFill";case 3:return"Visual_OtherFill";case 2:return"Visual_TotalFill";default:P.fF.assertNever(r)}}(x.sentimentColorType)}).attr(We.QZ,3),this.mainGraphicsContext.selectAll(js.selector).data(a.slice(0,a.length-1),function(x){return x.key}).join(function(x){return x.append("line").classed(js.class,!0)}).style("stroke",Ge.v.getThemeColor(this.style,"foregroundNeutralTertiary")).attrs({x1:function(A){return n(A.categoryIndex)},y1:function(A){return s(A.position+A.value)},x2:function(A){return n(A.categoryIndex+1)+t.layout.categoryWidth},y2:function(A){return s(A.position+A.value)}}),this.tooltipsEnabled&&this.tooltipService.addTooltip(c,function(x){return x.data&&x.data.tooltipInfo()},function(x){return x.data&&x.data.identity&&[x.data.identity]});var y,D,h=this.data.dataLabelsSettings,g=[];return(h&&h.show||h.showCategory)&&(g=this.createLabelDataPoints()),this.interactivityService&&(D={navigationStrategy:j.jN.CategoryOnly,helper:this},y={root:this.mainGraphicsContext,bars:c,isBreakdown:this.data.isBreakdown,formatMode:e}),(0,Va.bL)(this.animationOptions),{dataPoints:this.data.series[0].data,behaviorOptions:y,navigationOptions:D,labelDataPoints:g,labelsAreNumeric:!0,labelOrientation:h.labelOrientation,animateLabels:!r}}function Un(r,e,t){return t<0?r(e):r(e)-(r(0)-r(t))}function $l(r,e,t){return t<0?r(e)-(r(0)-r(t)):r(e)}var tu=function(r){function e(t){var a;return r.call(this,(0,d.pi)((0,d.pi)({},t),{tooltipsEnabled:null===(a=t.tooltipsEnabled)||void 0===a||a}))||this}return(0,d.ZT)(e,r),e.prototype.initRenderer=function(t){if(r.prototype.initRenderer.call(this,t),this.svg.classed(e.WaterfallClassName,!0),this.mainGraphicsSVG=this.svg.append("svg"),this.mainGraphicsContext=this.mainGraphicsSVG.append("g").classed(e.MainGraphicsContextClassName,!0),this.interactivityService){var a=It.M.isInternetExplorerOrEdge();this.mainGraphicsContext.attrs({tabindex:0,focusable:!0,role:"listbox","aria-multiselectable":!0,"aria-label":this.localizer("Visual_Plot")}).classed(Da.Pg,!a)}},e.getDefaultWaterfallLabelSettings=function(t,a,i,n){return void 0===a&&(a=!1),{show:a,labelOrientation:yt.B.Horizontal,position:Ea.h.auto,displayUnits:0,precision:b.NZ,fontProperties:(0,K.bT)({style:t,textClassName:"smallLightLabel",labelColor:i,fontSize:n}).fontProperties,enableBackground:!1,bold:!1,italic:!1,underline:!1}},e.doesDataLabelFitInShape=function(t,a,i){if(null==t||null===t.value)return!1;var n={text:i.labelText(t),fontFamily:b.bN.fontFamily,fontSize:b.bN.fontSize,fontWeight:b.bN.fontWeight};if(Un(a.scale,t.position,t.value)-b.FJ>0)return!0;var o=ne.b.measureSvgTextWidth(n),l=ne.b.estimateSvgTextHeight(n),u=i.categoryWidth,c=Math.abs((0,Y.sc)(a.scale,Math.max(0,Math.abs(t.value)),0));return!(o>u||l>c)},e.prototype.setData=function(t){P.fF.assertValue(t,"dataViews");var a=this.getSentimentColorsFromObjects(null),i=e.DefaultBreakdowns,n=t.length>0?t[0]:void 0;if(this.data=this.originalData={series:[{data:[]}],categories:[],valuesMetadata:[],legendData:(0,m.Fe)(this.style),hasHighlights:!1,categoryMetadata:null,scalarCategoryAxis:!1,positionMax:0,positionMin:0,dataLabelsSettings:e.getDefaultWaterfallLabelSettings(this.style,!1,void 0),sentimentColors:a,axesLabels:{x:null,y:null},numberOfBreakdowns:i,totalBreakdownCategories:0,totalsEnabled:true},n){if(this.dataView=n,n.metadata&&n.metadata.objects){var s=n.metadata.objects,o=s.labels;o&&(0,K.ww)(o,this.data.dataLabelsSettings,!0,this.style),a=this.getSentimentColorsFromObjects(s),i=(0,C.NA)(s,fi.wW.breakdown.maxBreakdowns,e.DefaultBreakdowns)}(n.categorical||n.matrix)&&(this.data=this.originalData=nt.convert({dataView:n,style:this.style,hostServices:this.hostService,dataLabelSettings:this.data.dataLabelsSettings,sentimentColors:a,interactivityService:this.interactivityService,tooltipsEnabled:this.tooltipsEnabled,numberOfBreakdowns:i}))}},e.prototype.getFormattingCards=function(t){return Ul.call(this,t)},e.prototype.getSubSelectionShortcuts=function(t,a){return Kl.call(this,t,a)},e.prototype.getSubSelectionStyles=function(t){return Xl.call(this,t)},e.prototype.isTotalsEnabled=function(){var t,a;return null!==(a=null===(t=this.data)||void 0===t?void 0:t.totalsEnabled)&&void 0!==a&&a},e.prototype.hasLegend=function(){return!0},e.createClippedDataIfOverflowed=function(t,a){P.fF.assertValue(t,"createClippedDataIfOverflowed");var i=t.series[0].data;if(a<i.length){var n=(0,Ae.ED)(t);return n.series=[{data:i.slice(0,a)}],n.categories=t.categories.slice(0,a),n}return t},e.prototype.calculateAxesProperties=function(t){var i,a=this;this.updateCurrentViewport(t);var n=t.categoryAxisOptions,s=t.valueAxisOptions,o=this.clippedData=this.data,l=o.categories.length-(this.isTotalsEnabled()?0:1),u=this.getPreferredPlotArea({isScalar:!1,categoryCount:l,categoryThickness:f.jY,outerPaddingRatio:t.outerPaddingRatio}),c=(0,f.is)({availableWidth:u.width,categoryCount:l,preferredCategoryWidth:null!==(i=o?.preferredCategoryWidth)&&void 0!==i?i:null,domain:null,isScalar:!1,cartesianOptions:this.options,trimOrdinalDataOnOverflow:t.trimOrdinalDataOnOverflow,outerPaddingRatio:t.outerPaddingRatio,innerPaddingRatio:t.innerPaddingRatio});this.options.isScrollable||(o=this.clippedData=e.createClippedDataIfOverflowed(o,c.categoryCount));var h=w.createScalarDomainOptions(this.getAxesDomains(!1,{valueAxis:!0}).valueAxis,0);h=w.mergeScalarAxisDomains(s.includeDomain,h);var g=function(M){var O,I="x"===M,W="y"===M,J=I?n:s,ue=w.createAxis({pixelSpan:I?u.width:u.height,domainOptions:I?w.createDomain(o.series,w.getCategoryValueType(o.categoryMetadata),!1,[n.includeDomain]):h,metaDataColumn:I?o.categoryMetadata:o.valuesMetadata,axisZoom:void 0,zeroScalarDomain:W?e.DefaultZeroScalarDomain:void 0,isScalar:W,isVertical:W,isCategoryAxis:I,formatString:null!==(O=w.getAxisFormatString(I?[]:a.data.series))&&void 0!==O?O:(0,R.EO)(I?o.categoryMetadata:o.valuesMetadata[0],X.p.general.formatString),outerPadding:W?0:c.categoryThickness*c.outerPaddingRatio,outerPaddingRatio:W?0:c.outerPaddingRatio,innerPaddingRatio:W?void 0:t.innerPaddingRatio,categoryThickness:W?void 0:c.categoryThickness,forcedTickCount:t.forcedTickCount,axis:(0,d.pi)((0,d.pi)({},J.axis),{invertAxis:J.axis.invertAxis&&W}),preventNice:w.hasForcedDomain(I?J.includeDomain:h),useTickIntervalForDisplayUnits:!!W||void 0,getValueFn:I?function(xe,ie){return e.lookupXValue(o,xe,ie)}:void 0});return I&&(ue.outerPaddingRatio=c.outerPaddingRatio,o.categoryIdentities&&(ue.categoryIdentities=o.categoryIdentities)),ue};this.xAxisProperties=g("x"),this.yAxisProperties=g("y");var y=(0,st.d6)(this.yAxisProperties,o.dataLabelsSettings),D=(0,K.fI)(),x=this.xAxisProperties.categoryThickness*(1-t.innerPaddingRatio);return this.layout={categoryCount:c.categoryCount,categoryThickness:c.categoryThickness,isScalar:c.isScalar,outerPaddingRatio:c.outerPaddingRatio,categoryWidth:x,labelText:function(M){var I=D.getOrCreate(M.labelFormatString,o.dataLabelsSettings,y.units,y.getPrecision(!!M.labelFormatString,o.series[M.seriesIndex].type));return(0,K.Gv)({label:I.format(M.value)})},labelLayout:e.getLabelLayoutXYForWaterfall(this.xAxisProperties,x,this.yAxisProperties,h?.domain),filter:function(M){return e.doesDataLabelFitInShape(M,a.yAxisProperties,a.layout)},style:{fill:function(M){return M.isLabelInside?Ge.v.getThemeColor(a.style,b.pl):M.labelFill}}},[this.xAxisProperties,this.yAxisProperties]},e.getLabelLayoutXYForWaterfall=function(t,a,i,n){return{x:function(o){return t.scale(o.categoryIndex)+a/2},y:function(o){return e.getWaterfallLabelYPosition(i.scale,o,n)}}},e.getWaterfallLabelYPosition=function(t,a,i){var n=t(0)-t(Math.abs(a.value)),s=t(a.position),o=t(i[0]),l=t(a.position+a.value);if(a.value<0){var c=s+n+ne.b.estimateSvgTextHeight({text:a.labelText,fontFamily:b.bN.fontFamily,fontSize:b.bN.fontSize,fontWeight:b.bN.fontWeight});if(o>c)return c}else{var h=s-n-b.FJ;if(h>0)return h}return a.isLabelInside=!0,e.getWaterfallInsideLabelYPosition(s,l,o)},e.getWaterfallInsideLabelYPosition=function(t,a,i){return t=(t=t<0?0:t)>i?i:t,a=(a=a<0?0:a)>i?i:a,Math.abs(a-t)/2+Math.min(t,a)},e.prototype.getAxesDomains=function(t,a){var i={},n=this.activeData;return n&&a.valueAxis&&(i.valueAxis=[n.positionMin,n.positionMax]),i},e.lookupXValue=function(t,a,i){var n=t.series[0].data;return a===n.length-1?n[a].categoryValue:(0,f.dZ)(t,a,n[a].type||i,!1)},e.prototype.getVisualCategoryAxisIsScalar=function(){return!1},e.prototype.setFilteredData=function(t,a){var i=this.clippedData=(0,Ae.ED)(this.data);i.series=[{data:i.series[0].data.slice(t,a)}],i.categories=i.categories.slice(t,a)},e.prototype.render=function(t,a,i){return Jl.call(this,t,i)},e.prototype.getSupportedCategoryAxisType=function(){return At.w.categorical},e.prototype.getFirstElement=function(){return _.isEmpty(this.clippedData.series)||_.isEmpty(this.clippedData.series[0].data)?{element:null}:{element:this.getHTMLElementFromCategoryIndex(this.clippedData.series[0].data[0].categoryIndex)}},e.prototype.getNextDataPoint=function(t,a,i){var s,n=t;do{switch(i){case j.x0.NextCategory:t+=1,((this.isTotalsEnabled()||this.data.isBreakdown)&&t>=this.data.categories.length||!this.isTotalsEnabled()&&!this.data.isBreakdown&&t>=this.data.categories.length-1)&&(t=0);break;case j.x0.PreviousCategory:(t-=1)<0&&(t=this.isTotalsEnabled()||this.data.isBreakdown?this.data.categories.length-1:this.data.categories.length-2);break;case j.x0.NextSeries:case j.x0.PreviousSeries:break;default:P.fF.assertNever(i)}s=this.data.series[a].data[t]}while(s&&0===s.value&&n!==t);return{element:this.getHTMLElementFromCategoryIndex(t),targetCategoryIndex:t}},e.prototype.getHTMLElementFromCategoryIndex=function(t){return this.mainGraphicsContext.selectAll(vs.selector).filter(function(a){return a.categoryIndex===t}).node()},e.prototype.getSentimentColorsFromObjects=function(t){var a=Ge.v.create(this.style);return{increaseFill:{solid:{color:a.getColorForPropertyWithDefaultColor(t,fi.wW.sentimentColors.increaseFill,Ge.v.getSentimentColor(this.style,"good"))}},decreaseFill:{solid:{color:a.getColorForPropertyWithDefaultColor(t,fi.wW.sentimentColors.decreaseFill,Ge.v.getSentimentColor(this.style,"bad"))}},totalFill:{solid:{color:a.getColorForPropertyWithDefaultColor(t,fi.wW.sentimentColors.totalFill,Ge.v.getDataColorByIndex(this.style,0))}},otherFill:{solid:{color:a.getColorForPropertyWithDefaultColor(t,fi.wW.sentimentColors.otherFill,Ge.v.getSentimentColor(this.style,"neutral"))}}}},e.prototype.createLabelDataPoints=function(){for(var t,a=[],i=this.data,n=this.xAxisProperties.scale,s=this.yAxisProperties.scale,o=this.yAxisProperties.invertAxis,l=s(0),u=i.series,c=(0,K.fI)(),h=i.dataLabelsSettings,g=(0,st.d6)(this.yAxisProperties,h),y=0,D=u;y<D.length;y++)for(var x=D[y],A=0,M=x.data;A<M.length;A++){var O=M[A],I=O.labelFormatString,W=c.getOrCreate(I,this.data.dataLabelsSettings,g.units,g.getPrecision(!!I,x.type)),J=(0,Bt.Bw)(W.format(O.value)),ue=h.fontProperties,xe=(0,ae.qk)(ue,J);a.push({isPreferred:!0,text:J,textSize:{width:ne.b.measureSvgTextWidth(xe),height:ne.b.estimateSvgTextHeight(xe,!0)},outsideFill:null!==(t=O.labelFill)&&void 0!==t?t:Ge.v.getThemeColor(this.style,b.uQ),insideFill:Ge.v.getThemeColor(this.style,b.pl),parentType:1,parentShape:{rect:{left:n(O.categoryIndex),top:o?$l(s,O.position,O.value):Un(s,O.position,O.value),width:this.layout.categoryWidth,height:Math.abs(l-s(Math.abs(O.value)))},orientation:O.value>=0?o?2:1:o?1:2,validPositions:e.getValidPositions(h.position,O.value)},fontProperties:ue,identity:void 0,hasBackground:h.enableBackground,backgroundColor:h.backgroundColor,backgroundTransparency:h.backgroundTransparency})}return a},e.getValidPositions=function(t,a){if(0===a)return e.validZeroLabelPosition;switch(t){case Ea.h.insideEnd:return[4];case Ea.h.insideCenter:return[1];case Ea.h.insideBase:return[2];case Ea.h.outsideEnd:return[16];default:return[16,4,1,2]}},e.prototype.getCartesianVisualCapabilities=function(){return{supportsHierarchicalCategoryAxis:!1}},e.prototype.getStaticSeriesRole=function(){},e.DefaultZeroScalarDomain=[0,1],e.DefaultBreakdowns=5,e.WaterfallClassName="waterfallChart",e.MainGraphicsContextClassName="mainGraphicsContext",e.validZeroLabelPosition=[16,8],e}(Fn);function Gn(r,e){return{create:function(a){return r.viewModelAdapterFactory.createLayerAdapter(e,a)}}}var Ys=function(e){return new xo((0,d.pi)((0,d.pi)({},e),{columnChartType:function(t){switch(t){case 14:case 5:return 20;case 13:case 4:return 12;case 9:return 52;case 7:return 18;case 6:return 10;case 8:return 50;case 10:return 84;default:return P.fF.assertFail("Not supported"),20}}(e.chartType),isComboChart:(0,f.LQ)(e.chartType),viewModelAdapterFactory:Gn(e,4)}))},Ks=function(e){return new wl((0,d.pi)((0,d.pi)({},e),{lineChartType:function(t){switch(t){case 0:case 13:case 14:return 1;case 3:return 32;case 1:return 2;case 2:return 16;default:return P.fF.assertFail("Not supported"),1}}(e.chartType),isComboChart:(0,f.LQ)(e.chartType),viewModelAdapterFactory:Gn(e,0)}))},iu=S(42359),nu=new(function(){function r(){}return r.prototype.getDataBoundReferenceLines=function(e,t,a){var i=[],n=[];if(e)if(e.matrix&&e.matrix.valueSources){var s=e.matrix;if(s.valueSources&&n.push.apply(n,e.matrix.valueSources||[]),s.rows&&s.rows.levels)for(var o=0,l=s.rows.levels;o<l.length;o++)n.push.apply(n,l[o].sources||[])}else if(e.categorical&&e.categorical.values){var c=_.head(e.categorical.values.grouped());if(c)for(var h=0,g=c.values;h<g.length;h++)n.push(g[h].source)}for(var D=0;D<n.length;D++){var x=n[D],A=Ge.v.getDataColorByIndex(a,D,Oe.fA),M=(0,C.AO)(x.objects,"referenceLine"),O=this.getCartesianRoleKind(x,t);i.push.apply(i,(0,ft.UL)(M,A,"referenceLine",O,a,void 0,x)||[])}return i},r.prototype.getCartesianRoleKind=function(e,t){var a=e.roles;if(t.getAxisLocationForRole&&a)for(var i in a)if(a[i])return t.getAxisLocationForRole(i);return 1},r}()),su=function(){function r(){}return r.convert=function(e){var t,a=e.dataViews,i=e.layers,n=e.layerStyle,s=e.chartType,o=e.hasDataChanged,l=i.length>1&&!!(a[0]&&a[0].categorical&&a[0].categorical.values),u=n.colorPalette.dataColors;u.clearPreferredScale();for(var c=dt(a),h=_.filter(a,v.Aq),g=_.filter(a,rt.Qp),y=_.filter(a,H.Ik),D=[],x=[],A=[],M=0,O=i.length;M<O;M++){var I=c[M],W=I?[I]:[];if(null!=h[M]&&W.push(h[M]),null!=y[M]&&W.push(y[M]),i[M].setData(W,e.multipleInfo),A.push(uu(i[M],I,n,l,s)),x.push.apply(x,nu.getDataBoundReferenceLines(I,i[M],n)||[]),Ne(a,i,M)){var J=g[M];if(J){var xe=(0,rt.VP)(J,I,M>0,n);D.push.apply(D,xe||[])}}O>1&&u.rotateScale()}var re,ie=B.converter(_.head(a));if(_.isEmpty(a))re=new na({style:n,chartType:s});else{var he=a[0],Ee=he.metadata&&!_.isEmpty(null===(t=he.categorical)||void 0===t?void 0:t.categories)&&!!(0,ce.A8)(he.categorical.categories[0]),Ze=11===s;re=new na({chartType:s,valueAxisProperties:(0,f.$w)(he.metadata,Ze),y2AxisProperties:(0,f.$w)(he.metadata,Ze,"y2Axis"),categoryAxisProperties:(0,f.Vk)(he.metadata,Ee||Ze),isValueAxisIrregular:Qe(a,i),style:n,hasY2Role:(0,F.c5)(he,"Y2")||a[1]&&(0,F.c5)(a[1],"Y2"),forceShowY2:ie.show&&ie.showOnValueSecAxis||!_.isEmpty(e.multipleInfo)&&(0,f.LQ)(s),seriesLabelSettings:Rt(i,s,n),featureSwitches:e.featureSwitches}),o&&function(r,e,t,a,i){if(r&&r.length>0){var s=r[0].metadata;if(s){var o=Ve(r,a);e.push.apply(e,function(r,e,t,a){var i=Ge.v.getDataColorByIndex(e,0,Oe.fA),n=[];if(t){var s=(0,C.AO)(r.objects,ft.XC);n.push.apply(n,(0,ft.UL)(s,i,ft.XC,0,e,a,void 0)||[])}var o=(0,C.AO)(r.objects,ft.Dk);return n.push.apply(n,(0,ft.UL)(o,i,ft.Dk,1,e)||[]),n}(s,t,o,i)||[])}}}(a,x,n,i,e.chartType)}return{legendData:(0,m.nh)(A,n),trendLines:D,referenceLines:x,axesData:re,warningObjectCollection:new Ue.tb,showIcon:!1,scrollbarOptions:{scrollbarWidth:te.ScrollbarWidth},zoomData:ie}},r}();function uu(r,e,t,a,i){var n=r.getLegendData();if(n?.dataPoints.length>1)return n;var s=(0,m.pq)({dataView:e,showByDefault:!0,staticSeriesRoleNames:[r.getStaticSeriesRole()],style:t,allowLegendWithNoSeries:a},function(r){return 4===r||6===r||5===r||7===r||9===r||8===r||11===r||10===r}(i));return!n||s?.isGradientLegend?s:n}var du=function(){function r(e){this.staticUpdateOptions=e}return r.prototype.create=function(e){return new hu(this.staticUpdateOptions,e)},r}(),hu=function(){function r(e,t){this.staticUpdateOptions=e,this.updateOptions=t}return r.prototype.apply=function(e,t){var a,y,i=this.staticUpdateOptions,n=i.layerInitDataOptions,s=i.updateGlobalAxesDomains,o=this.updateOptions,l=o.isSmallMultiples,u=o.reader,c=o.dataViews,h=o.updateOptions,g=o.requestedPerMultipleAxisDomains;if(l){y=(0,f.LQ)(t)?u.convertComboFrame(e.index):[u.convertFrame(e.index)];for(var D=void 0,x=0;x<y.length;x++){var A=y[x],M=(0,iu.eC)(A.metadata,ua.e0.formatString,X.x.category,A.categorical,!!D);D?M.categorical.categories=D:D=null===(a=M.categorical)||void 0===a?void 0:a.categories,y[x]=M}}else y=c;e.hasInitializedData()||e.initData(n);var O=(0,d.pi)((0,d.pi)({},h),{dataViews:y,multipleInfo:l?this.buildMultipleInfo(e.index):void 0});e.update(O),g&&(g.categoryAxis||g.valueAxis||g.secondaryValueAxis)&&s(e.getAxesDomains(!0,g))},r.prototype.applySynchronizedAxes=function(e,t){var a=this.updateOptions.isSmallMultiples;P.fF.assert(function(){return a},"Should not apply synchronizedAxes to non-small multiples"),e.applySynchronizedDomains(t)},r.prototype.applyResize=function(e){e.resize(this.updateOptions.updateOptions.viewport)},r.prototype.buildMultipleInfo=function(e){var t=this;P.fF.assert(function(){return t.updateOptions.isSmallMultiples},"isSmallMultiples"),P.fF.assert(function(){return!!t.updateOptions.reader},"reader");var a=this.updateOptions.reader;if(a){var i=a.getFrameNode(e),n=a.getFrameSourceColumns().map(function(s,o){return{metadata:s,value:i.levelValues[o].value}});return{identity:i.identity,sources:n,isCoreMultiple:0===e}}},r}(),fs=function(){function r(e,t,a,i,n,s,o){this.smallMultiples=e,this.index=t,this.featureSwitches=a,this.layers=i,this.type=n,this.interactivityService=s,this.getLayerInitOptions=o,this.state=0}return r.create=function(e,t,a,i,n,s,o){return new r(e,t,a,n,s,i,o)},r.prototype.getDataPoint=function(){if(!this.dataPoint){var e=this.multipleInfo,t=_.first(e.sources).metadata.queryName,a=e.sources.map(function(n){return(0,U.Y)(n.metadata,n.value,e.identity)}),i=(new U.dw).withColumnIdentity(e.identity,t,a).createSelectionId();this.dataPoint={selected:!1,identity:i},this.interactivityService&&this.interactivityService.applySelectionStateToData([this.dataPoint])}return this.dataPoint},r.prototype.getIndex=function(){return this.index},r.prototype.isSelected=function(){return this.getDataPoint().selected},r.prototype.getState=function(){return this.state},r.prototype.initRenderer=function(e){var t=this;P.fF.assert(function(){return!(2&t.getState())},"`initRenderer` was called when there was already a renderer"),this.renderer=e;var a=this.getLayerInitOptions(e);this.layers.forEach(function(i){return i.initRenderer(a)}),this.state|=2},r.prototype.getRenderer=function(){var e=this;return P.fF.assert(function(){return!!(2&e.getState())},"`getRenderer` was called before a renderer was set"),this.renderer},r.prototype.initData=function(e){var t=this;P.fF.assert(function(){return!(1&t.getState())},"`initData` multiple times"),this.layers.forEach(function(a){var i;return null===(i=a.initData)||void 0===i?void 0:i.call(a,e)}),this.style=e.style,this.state|=1},r.prototype.update=function(e){var t=this;P.fF.assert(function(){return!!(1&t.getState())},"update was called before `initData`"),this.dataViews=e.dataViews,this.multipleInfo=e.multipleInfo,this.dataPoint=void 0,this.adapterFactory=e.adapterFactory;var a=this.layers;return this.responsiveData=void 0,this.data=su.convert({layerStyle:this.style,chartType:this.type,dataViews:e.dataViews,layers:a,featureSwitches:this.featureSwitches,hasDataChanged:null!=e.operationKind,multipleInfo:e.multipleInfo}),this.data},r.prototype.isVisible=function(){return!!(2&this.state)},r.prototype.hasInitializedData=function(){return!!(1&this.state)},r.prototype.getMultipleInfo=function(){return this.multipleInfo},r.prototype.applySynchronizedDomains=function(e){var t=this.data&&this.data.axesData;if(e&&t){var a=function(h,g){h&&g.includeDomains.push((0,w.createScalarDomainOptions)(h,1))},i=t.categoryAxis,n=t.valueAxis,s=t.secondaryValueAxis,l=e.valueAxis,u=e.secondaryValueAxis;a(e.categoryAxis,i),i&&n&&(i.sharedAxis||!i.scaleToFit)&&(n.sharedAxis||!n.scaleToFit)&&(a(l,n),a(u,s))}},r.prototype.resize=function(e){if(this.adapterFactory&&this.data){var a=this.adapterFactory.createCartesianAdapter({cartesianData:this.data,dataView:this.dataViews[0],viewport:e,isCoreMultiple:!this.multipleInfo||this.multipleInfo.isCoreMultiple});this.responsiveData=a.getData()}},r.prototype.getCapabilities=function(){var e={domainAggregateRoles:[],supportedDomainAggregates:void 0},t={domainAggregateRoles:[],supportedDomainAggregates:void 0},a={domainAggregateRoles:[],supportedDomainAggregates:void 0};return this.layers.forEach(function(i){var n=i.getCartesianVisualCapabilities();if(n.axesCapabilities){var s=n.axesCapabilities,o=s.categoryAxis,l=s.valueAxis,u=s.secondaryValueAxis,c=function(g,y){!g||!g.domainAggregateRole||(y.domainAggregateRoles.push(g.domainAggregateRole),void 0===y.supportedDomainAggregates?y.supportedDomainAggregates=g.supportedDomainAggregates:y.supportedDomainAggregates&=g.supportedDomainAggregates)};P.fF.assertValue(o,"layerCategoryAxisCapabilities"),c(o,e),c(l,t),c(u,a)}else P.fF.log("All small-multiples layers must provide `axesCapabilities`")}),{axesCapabilities:{categoryAxis:_.isEmpty(e.domainAggregateRoles)?void 0:(0,d.pi)((0,d.pi)({},e),{domainAggregateRoles:_.uniq(e.domainAggregateRoles)}),valueAxis:_.isEmpty(t.domainAggregateRoles)?void 0:(0,d.pi)((0,d.pi)({},t),{domainAggregateRoles:_.uniq(t.domainAggregateRoles)}),secondaryValueAxis:_.isEmpty(a.domainAggregateRoles)?void 0:(0,d.pi)((0,d.pi)({},a),{domainAggregateRoles:_.uniq(a.domainAggregateRoles)})}}},r.prototype.getAxesDomains=function(e,t){for(var a={},i=0;i<this.layers.length;i++){var n=this.layers[i];if(n.getAxesDomains){var s=n.getAxesDomains(e,t);s.categoryAxis&&(a.categoryAxis=(0,w.mergeDomains)(a.categoryAxis||f.be,s.categoryAxis)),s.valueAxis&&(i>0&&(0,f.LQ)(this.type)?a.secondaryValueAxis=(0,w.mergeDomains)(a.secondaryValueAxis||f.be,s.valueAxis):a.valueAxis=(0,w.mergeDomains)(a.valueAxis||f.be,s.valueAxis)),s.secondaryValueAxis&&(a.secondaryValueAxis=(0,w.mergeDomains)(a.secondaryValueAxis||f.be,s.secondaryValueAxis))}else P.fF.assertFail("getAxesDomains does not exist")}return a},r.prototype.getData=function(){return this.responsiveData||this.data},r.prototype.clearSelection=function(){for(var e=0,t=this.layers.length;e<t;e++)this.layers[e].onClearSelection()},r.prototype.updateLayers=function(){this.layers.forEach(function(e){return e.render(!0)})},r.prototype.destroy=function(){var e=this;this.renderer&&(P.fF.assert(function(){return!!(2&e.getState())},"`destroy` was called before we had a renderer"),this.renderer.destroy())},r}(),vu=S(54365),fu=function(){function r(e,t,a,i){this.type=e,this.featureSwitches=t,this.layerFactory=a,this.getLayerInitRendererOptions=i,this.multiples=[]}return r.prototype.init=function(e,t){var a=this;this.rowLoadMoreDataHandler=new qe.J(e.host),this.updateFactory=new du({layerInitDataOptions:e,updateGlobalAxesDomains:function(n){return a.updateGlobalAxesDomains(n)}}),this.interactivityService=t,this.multiples=[]},r.prototype.getObjects=function(){return this.reader?this.reader.getObjects():void 0},r.prototype.getCoreMultiple=function(){return this.coreMultiple||(this.coreMultiple=fs.create(this,0,this.featureSwitches,this.interactivityService,this.layerFactory(),this.type,this.getLayerInitRendererOptions)),this.coreMultiple},r.prototype.getShouldResetRowMultipleScrollPosition=function(){return this.shouldResetRowMultipleScrollPosition},r.prototype.get=function(e){var t=this;if(P.fF.assert(function(){return t.isSmallMultiples()||0===e},"Non-small multiples only supports 0 index"),!this.isSmallMultiples())return this.getCoreMultiple();if(P.fF.assertValue(this.multipleUpdate,"Can not get multiple value before having an update"),null==this.multipleUpdate)return this.getCoreMultiple();var a=this.multiples[e];if(!a)for(var i=function(l){P.fF.assert(function(){return l===t.multiples.length},"Multiples should only be added to the end"),a=n.multiples[l]=fs.create(n,l,n.featureSwitches,n.interactivityService,n.layerFactory(),n.type,n.getLayerInitRendererOptions);var u=n.multipleUpdate;u.apply(a,n.type),n.isSmallMultiples()&&u.applySynchronizedAxes(a,n.axesDomains),u.applyResize(a)},n=this,s=this.multiples.length;s<=e;s++)i(s);return a},r.prototype.clear=function(){this.getMultiples(!0).forEach(function(e){return e.destroy()}),this.multiples=[],this.coreMultiple=void 0,this.axesDomains=void 0,this.shouldResetRowMultipleScrollPosition=void 0,this.multipleUpdate=void 0},r.prototype.resize=function(e){this.getMultiples(!0).forEach(function(t){return t.resize(e)})},r.prototype.update=function(e){var t=e.dataViews;this.updateOptions=e;var a,i=this.isSmallMultiples(t);this.shouldResetRowMultipleScrollPosition=!e.preserveScrollPosition;var n=this.getCoreMultiple();i?(this.reader=vu.p.create(t[0],ua.e0.formatString),this.updateFactory.create({dataViews:e.dataViews,isSmallMultiples:i,reader:this.reader,requestedPerMultipleAxisDomains:void 0,updateOptions:e}).apply(n,this.type),(!e.preserveScrollPosition||e.formatMode)&&(this.lastUpdatedFrameIndex=0,this.axesDomains=void 0,this.requestPerMultipleAxisDomains=this.updateSynchronizedDomainsFromAggregates()),a=this.reader.getFrameCount(),this.rowLoadMoreDataHandler.updateDataView(e.dataViews[0]),this.rowLoadMoreDataHandler.onLoadMoreDataCompleted()):(this.reader=void 0,this.lastUpdatedFrameIndex=0,this.axesDomains=void 0,a=1,this.rowLoadMoreDataHandler.updateDataView(void 0),this.rowLoadMoreDataHandler.onLoadMoreDataCompleted()),this.multipleUpdate=this.updateFactory.create({dataViews:e.dataViews,isSmallMultiples:i,reader:this.reader,requestedPerMultipleAxisDomains:this.requestPerMultipleAxisDomains,updateOptions:e}),this.updateMultiples(a)},r.prototype.updateMultiples=function(e){for(var t=this,a=this.multiples,i=this.multipleUpdate,s=this.isSmallMultiples(this.updateOptions.dataViews),o=this.getCoreMultiple(),l=this.requestPerMultipleAxisDomains,u={startIndex:this.lastUpdatedFrameIndex,endIndex:e},c=function(D){var x=s?a[D]:o;!x&&l&&(P.fF.assert(function(){return D===a.length},"Multiples should only be added to the end"),x=a[D]=fs.create(h,D,h.featureSwitches,h.interactivityService,h.layerFactory(),h.type,h.getLayerInitRendererOptions)),x&&i.apply(x,h.type)},h=this,g=u.startIndex;g<u.endIndex;g++)c(g);this.getMultiples(!0).forEach(function(y){y&&(s&&i.applySynchronizedAxes(y,t.axesDomains),i.applyResize(y))}),this.lastUpdatedFrameIndex=u.endIndex},r.prototype.updateSynchronizedDomainsFromAggregates=function(){var e,h,t=this.getCoreMultiple(),i=t.getCapabilities().axesCapabilities,n=i.categoryAxis,s=i.valueAxis,o=i.secondaryValueAxis,l_categoryAxis=!!(2&n.supportedDomainAggregates),l_valueAxis=!!(2&s.supportedDomainAggregates),l_secondaryValueAxis=!!(o&&2&o.supportedDomainAggregates),u={categoryAxis:!!(1&n.supportedDomainAggregates),valueAxis:!!(1&s.supportedDomainAggregates),secondaryValueAxis:!!(o&&1&o.supportedDomainAggregates)};if(l_categoryAxis||l_valueAxis||l_secondaryValueAxis){var g=this.getTopLevelDomains(i);g&&(h={categoryAxis:l_categoryAxis?g.categoryAxis:void 0,valueAxis:l_valueAxis?g.valueAxis:void 0,secondaryValueAxis:l_secondaryValueAxis?g.secondaryValueAxis:void 0})}this.axesDomains=h;var y=null===(e=t.getData())||void 0===e?void 0:e.axesData,D=y&&!y.valueAxis.sharedAxis,x={categoryAxis:u.categoryAxis&&(!h||_.isEmpty(h.categoryAxis)),valueAxis:u.valueAxis&&(!h||_.isEmpty(h.valueAxis)||D),secondaryValueAxis:u.secondaryValueAxis&&(!h||_.isEmpty(h.secondaryValueAxis))};return _.every(x,function(A){return!A})?void 0:x},r.prototype.isSmallMultiples=function(e){return!(!e&&!this.updateOptions)&&(0,f.sI)(e=e||this.updateOptions.dataViews)},r.prototype.clearSelection=function(e){this.getMultiples(!0).forEach(function(t){return t.clearSelection()}),this.executeActionForMultiplesInRange(function(t){return t.updateLayers()},e,!1)},r.prototype.checkIfNoLabelsCanBeRendered=function(){return _.every(this.getMultiples(),function(e){return e.isVisible()&&e.getRenderer().noLabelsCanBeRendered})},r.prototype.scrollTo=function(e,t){this.executeActionForMultiplesInRange(function(a){return a.getRenderer().axesRenderer.scrollTo(e)},t,!1)},r.prototype.shouldScrollTo=function(e,t){return!!this.getValueForFirstMultipleInRange(function(a){return a.getRenderer().axesRenderer.shouldScrollTo(e)},t,!1)},r.prototype.scrollBy=function(e,t){this.executeActionForMultiplesInRange(function(a){return a.getRenderer().axesRenderer.scrollBy(e)},t,!1)},r.prototype.scrollDelta=function(e,t){this.executeActionForMultiplesInRange(function(a){return a.getRenderer().axesRenderer.scrollDelta(e)},t,!1)},r.prototype.clearRenderingTimeout=function(){this.getMultiples().forEach(function(e){return e.isVisible()&&e.getRenderer().axesRenderer.clearRenderingTimeout()})},r.prototype.updateScrollbarExtent=function(e,t){this.executeActionForMultiplesInRange(function(a){return a.getRenderer().axesRenderer.setExtent(e)},t,!1)},r.prototype.executeActionForMultiplesInRange=function(e,t,a){var i=this.getMultiples(a,t);_.isEmpty(i)||i.forEach(function(n){return e(n)})},r.prototype.getValueForFirstMultipleInRange=function(e,t,a){var i=this.getMultiples(a,t);if(!_.isEmpty(i))return e(i[0])},r.prototype.getFrameCount=function(){return this.isSmallMultiples()?this.reader.getFrameCount():1},r.prototype.updateGlobalAxesDomains=function(e){var t=this.axesDomains=this.axesDomains||{};e.categoryAxis&&(t.categoryAxis=(0,w.mergeDomains)(t.categoryAxis||f.be,e.categoryAxis)),e.valueAxis&&(t.valueAxis=(0,w.mergeDomains)(t.valueAxis||f.be,e.valueAxis)),e.secondaryValueAxis&&(t.secondaryValueAxis=(0,w.mergeDomains)(t.secondaryValueAxis||f.be,e.secondaryValueAxis))},r.prototype.getTopLevelDomains=function(e){var t=this.reader;P.fF.assertValue(t,"this.reader");var o,l,u,a=e.categoryAxis,i=e.valueAxis,n=e.secondaryValueAxis,s=function(D){var x=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(var A in D)for(var O=function(xe){var ie=xe.min,re=xe.max;if(!(_.isDate(ie)||_.isNumber(ie)&&isFinite(ie))||!(_.isDate(re)||_.isNumber(re)&&isFinite(re)))return"continue";P.fF.assert(function(){return!_.isDate(ie)||(0,an.M4)(ie)},"If min is a date, it should implement DateWithEpochValue"),P.fF.assert(function(){return!_.isDate(re)||(0,an.M4)(re)},"If max is a date, it should implement DateWithEpochValue"),(0,an.M4)(ie)&&(0,an.M4)(re)&&(ie=ie.epochTimeStamp,re=re.epochTimeStamp),x=(0,w.mergeDomains)(x,[+ie,+re])},I=0,W=D[A];I<W.length;I++)O(W[I]);return x};if(2&a.supportedDomainAggregates){var c=t.getTopLevelAggregates(a.domainAggregateRoles);o=c?s(c):void 0}if(2&i.supportedDomainAggregates){var h=t.getTopLevelAggregates(i.domainAggregateRoles);l=h?s(h):void 0}if(n&&2&n.supportedDomainAggregates){var g=n&&t.getTopLevelAggregates(n.domainAggregateRoles);u=g?s(g):void 0}return o||l||u?{categoryAxis:o,valueAxis:l,secondaryValueAxis:u}:void 0},r.prototype.getMultiples=function(e,t){void 0===e&&(e=!1);var a=[],i=this.isSmallMultiples();if(!i||e){var n=this.getCoreMultiple();n&&a.push(n)}if(i){var s=this.multiples;t&&(s=s.slice(t.startIndex,Math.min(t.endIndex,s.length))),a.push.apply(a,s)}return a},r}(),_i=S(30053),pu_size=[{breakpoint:240,maxSizePt:9},{breakpoint:320,maxSizePt:12},{breakpoint:460,maxSizePt:16},{breakpoint:540,maxSizePt:24}],Hr=function(){function r(){this.lastViewportSeen=void 0,this.lastResolvedFontSizePt=void 0}return r.prototype.adjustFontSize=function(e,t){var a=this.resolveMaxFontSizePtForViewport(e);return a>=t.size.pt?t:this.copyWithNewFontSize(t,a)},r.prototype.getFontSizeSeriesLabelWarning=function(e,t){var a=this.getFontSizeLabelWarning(e.dataLabelsSettings,t.dataLabelsSettings);if(a)return a;if(e.series&&t.series){P.fF.assert(function(){return e.series.length===t.series.length},"Series are expected to be equal");for(var i=e.series,n=t.series,s=0;s<i.length;s++)if(a=this.getFontSizeLabelWarning(i[s].labelSettings,n[s].labelSettings))return a}},r.prototype.getFontSizeLabelWarning=function(e,t){if(e&&t){if(!_.isEqual(e.fontProperties.size,t.fontProperties.size))return{selector:null,warnings:[new Ue.er]};P.fF.assert(function(){return e.labelOverflow===t.labelOverflow},"Overflow switch should remain as is if no changes in label font size")}else P.fF.assert(function(){return e===t},"It's expected that both settings would be undefined / null")},r.prototype.resolveMaxFontSizePtForViewport=function(e){if(this.lastViewportSeen===e)return this.lastResolvedFontSizePt;for(var t=ze.PR,a=0,i=pu_size;a<i.length;a++){var n=i[a];if(e.height<n.breakpoint||e.width<n.breakpoint){t=n.maxSizePt;break}}return this.lastViewportSeen=e,this.lastResolvedFontSizePt=t,t},r.prototype.copyWithNewFontSize=function(e,t){var a=N.B.createFromPt(t);return(0,ae.ED)(e,{size:a})},r}(),gu=function(){function r(e){this.responsiveFontHelper=new Hr,this.originalData=e.data,this.dataView=e.dataView,this.viewport=e.viewport}return r.prototype.getData=function(){var t,e=this.originalData;return t=_i.a.shouldApplyResponsiveChanges(this.dataView,X.p)?this.applyResponsiveChanges(this.viewport,e):e,this.currentData=t,t},r.prototype.getCartesianChartLayerType=function(){return 4},r.prototype.addWarnings=function(e){var t=this.originalData,a=this.currentData;if(t&&a){var i=this.responsiveFontHelper.getFontSizeSeriesLabelWarning(t,a),n=this.responsiveFontHelper.getFontSizeLabelWarning(t.totalLabelsSettings,a.totalLabelsSettings);i&&e.addForVisualObject("labels",i),n&&e.addForVisualObject("totals",n)}},r.prototype.applyResponsiveChanges=function(e,t){var a=(0,Ae.ED)(t);return this.applyDataLabelFontSizesChanges(e,a),this.applySeriesDataLabelFontSizeChanges(e,a),this.applyTotalLabelFontSizesChanges(e,a),a},r.prototype.applyDataLabelFontSizesChanges=function(e,t){t.dataLabelsSettings=(0,Ae.ED)(t.dataLabelsSettings),this.updateLabelSettings(e,t.dataLabelsSettings)},r.prototype.applySeriesDataLabelFontSizeChanges=function(e,t){for(var a=t.series=(0,Ae.ED)(t.series),i=0;i<a.length;i++)if(a[i].labelSettings){var n=a[i]=(0,Ae.ED)(a[i]);n.labelSettings=(0,Ae.ED)(n.labelSettings),this.updateLabelSettings(e,n.labelSettings)}},r.prototype.applyTotalLabelFontSizesChanges=function(e,t){t.totalLabelsSettings&&(t.totalLabelsSettings=(0,Ae.ED)(t.totalLabelsSettings),this.updateLabelSettings(e,t.totalLabelsSettings))},r.prototype.updateLabelSettings=function(e,t){var a=t.fontProperties;t.fontProperties=this.responsiveFontHelper.adjustFontSize(e,t.fontProperties),a!==t.fontProperties&&(t.labelOverflow=!0)},r}(),yu=function(){function r(e){this.responsiveFontHelper=new Hr,this.originalData=e.data,this.viewport=e.viewport,this.dataView=e.dataView}return r.prototype.getData=function(){var t,e=this.originalData;return t=_i.a.shouldApplyResponsiveChanges(this.dataView,X.p)?this.applyResponsiveChanges(this.viewport,e):e,this.currentData=t,t},r.prototype.getCartesianChartLayerType=function(){return 0},r.prototype.addWarnings=function(e){var t=this.originalData,a=this.currentData;if(t&&a){var i=this.responsiveFontHelper.getFontSizeSeriesLabelWarning(t,a),n=this.responsiveFontHelper.getFontSizeLabelWarning(t.totalLabelsSettings,a.totalLabelsSettings);i&&e.addForVisualObject("labels",i),n&&e.addForVisualObject("totals",n)}},r.prototype.applyResponsiveChanges=function(e,t){var a=(0,Ae.ED)(t);return this.applyDataLabelFontSizesChanges(e,a),this.applySeriesDataLabelFontSizeChanges(e,a),this.applyTotalLabelFontSizesChanges(e,a),a},r.prototype.applyDataLabelFontSizesChanges=function(e,t){t.dataLabelsSettings=(0,Ae.ED)(t.dataLabelsSettings),this.updateLabelSettings(e,t.dataLabelsSettings)},r.prototype.applySeriesDataLabelFontSizeChanges=function(e,t){for(var a=t.series=(0,Ae.ED)(t.series),i=0;i<a.length;i++)if(a[i].labelSettings){var n=a[i]=(0,Ae.ED)(a[i]);n.labelSettings=(0,Ae.ED)(n.labelSettings),this.updateLabelSettings(e,n.labelSettings)}},r.prototype.applyTotalLabelFontSizesChanges=function(e,t){t.totalLabelsSettings&&(t.totalLabelsSettings=(0,Ae.ED)(t.totalLabelsSettings),this.updateLabelSettings(e,t.totalLabelsSettings))},r.prototype.updateLabelSettings=function(e,t){t.fontProperties=this.responsiveFontHelper.adjustFontSize(e,t.fontProperties)},r}(),mu=function(){function r(e){this.responsiveFontHelper=new Hr,this.originalData=e.data,this.viewport=e.viewport,this.dataView=e.dataView}return r.prototype.getData=function(){var t,e=this.originalData;return t=_i.a.shouldApplyResponsiveChanges(this.dataView,X.p)?this.applyResponsiveChanges(this.viewport,e):e,this.currentData=t,t},r.prototype.getCartesianChartLayerType=function(){return 2},r.prototype.addWarnings=function(e){var t=this.originalData,a=this.currentData;if(t&&a){var i=this.responsiveFontHelper.getFontSizeLabelWarning(t.dataLabelsSettings,a.dataLabelsSettings);i&&e.addForVisualObject("categoryLabels",i)}},r.prototype.applyResponsiveChanges=function(e,t){var a=(0,Ae.ED)(t);return this.applyDataLabelFontSizesChanges(e,a),a},r.prototype.applyDataLabelFontSizesChanges=function(e,t){t.dataLabelsSettings=(0,Ae.ED)(t.dataLabelsSettings),t.dataLabelsSettings.fontProperties=this.responsiveFontHelper.adjustFontSize(e,t.dataLabelsSettings.fontProperties)},r}(),Su=function(){function r(e){this.responsiveFontHelper=new Hr,this.originalData=e.data,this.viewport=e.viewport,this.dataView=e.dataView}return r.prototype.getData=function(){var t,e=this.originalData;return t=_i.a.shouldApplyResponsiveChanges(this.dataView,X.p)?this.applyResponsiveChanges(this.viewport,e):e,this.currentData=t,t},r.prototype.getCartesianChartLayerType=function(){return 3},r.prototype.addWarnings=function(e){var t=this.originalData,a=this.currentData;if(t&&a){var i=this.responsiveFontHelper.getFontSizeLabelWarning(t.dataLabelsSettings,a.dataLabelsSettings);i&&e.addForVisualObject("labels",i)}},r.prototype.applyResponsiveChanges=function(e,t){var a=(0,Ae.ED)(t);return this.applyDataLabelFontSizesChanges(e,a),a},r.prototype.applyDataLabelFontSizesChanges=function(e,t){t.dataLabelsSettings=(0,Ae.ED)(t.dataLabelsSettings),t.dataLabelsSettings.fontProperties=this.responsiveFontHelper.adjustFontSize(e,t.dataLabelsSettings.fontProperties)},r}(),xu=function(){function r(e,t){switch(this.layerType=e,e){case 4:this.adapter=new gu(t);break;case 0:this.adapter=new yu(t);break;case 2:this.adapter=new mu(t);break;case 3:this.adapter=new Su(t);break;default:P.fF.assertFail("Unsupported chart type for view model adapter")}}return r.prototype.getData=function(){return this.adapter.getData()},r.prototype.getCartesianChartLayerType=function(){return this.layerType},r.prototype.addWarnings=function(e){return this.adapter.addWarnings(e)},r}(),Xs=S(70700),tr_legendWidth=76,tr_legendHeight=58,tr_axesTitleWidth=128,tr_axesTitleHeight=58,tr_axesHeight=58,tr_axesMedWidth=128,tr_axesWidth=76,tr_maxWidthForMediumFont=180,tr_maxWidthForSmallFont=128;function Zs(r,e){var t=r.warningObjectCollection,a={},i=r.legendData,n=e.legendData;if(r.showIcon)a.legend=new Ue.ni,a.categoryAxis=new Ue.Mk,a.valueAxis=new Ue.Mk;else{i.show!==n.show?a.legend=new Ue.ni:i.position!==n.position?a.legend=new Ue.TS:_.isEqual(i.fontProperties.size,n.fontProperties.size)||(a.legend=new Ue.p7("fontSize"));var s=r.axesData,o=e.axesData,l=s.categoryAxis,u=o.categoryAxis,c=!_.isEqual(l.labelFontProperties.size,u.labelFontProperties.size),h=!_.isEqual(l.titleFontProperties.size,u.titleFontProperties.size);l.show!==u.show?a.categoryAxis=new Ue.Mk:l.showAxisTitle!==u.showAxisTitle?a.categoryAxis=new Ue.fk:(c||h)&&(a.categoryAxis=new Ue.Dr(c?"fontSize":"titleFontSize"));var g=s.valueAxis,y=o.valueAxis,D=!_.isEqual(g.labelFontProperties.size,y.labelFontProperties.size),x=!_.isEqual(g.titleFontProperties.size,y.titleFontProperties.size);g.show!==y.show?a.valueAxis=new Ue.Mk:g.showAxisTitle!==y.showAxisTitle?a.valueAxis=new Ue.fk:(D||x)&&(a.valueAxis=new Ue.Dr(D?"fontSize":"titleFontSize"));var A=r.zoomData,M=e.zoomData;(A.showOnCategoryAxis!==M.showOnCategoryAxis||A.showOnValueAxis!==M.showOnValueAxis||A.showOnValueSecAxis!==M.showOnValueSecAxis)&&(a.zoom=new Ue.JG)}for(var O in a)t.addForVisualObject(O,{selector:null,warnings:[a[O]]})}var Du=function(){function r(e){this.viewport=e.viewport,this.cartesianData=e.cartesianData,this.dataView=e.dataView,this.responsiveFontHelper=new Hr}return r.prototype.getData=function(){var e=_i.a.getResponsiveVisualProperties(this.dataView,X.p),t=e.responsive,a=e.responsiveLegacy,i=this.cartesianData;return(t||a)&&(i=this.createResponsiveData(t,a)),i},r.prototype.getResponsiveSlice=function(e,t){var a=X.p.general,i=_i.a.getResponsiveVisualProperties(e,X.p);return{item:new Se.vi({uidBuilder:new Se.IN(new Se.SS(new Se.lg("visualPlaceholderCard"),"visualPlaceholderGroup"),"responsive"),control:new Se.bd({descriptor:a.responsive,value:i.responsive}).build(),localize:t}).build(),revertToDefaultDescriptors:[a.responsive]}},r.prototype.createResponsiveData=function(e,t){var a=_i.a.cloneData(this.cartesianData);return e?(this.applyIconResponsiveChanges(a),this.applyLegendResponsiveChanges(this.viewport,a.legendData.position,a),this.applyAxesResponsiveChanges(this.viewport,a),this.applyZoomSliderResponsiveChanges(this.viewport,a),this.applyFontSizesChanges(this.viewport,a),a.scrollbarOptions=r.ScrollbarOptions):t&&function(r,e){(function(r,e){var t=e.axesData;if(r.height<=tr_axesTitleHeight&&(t.x.showAxisTitle=!1,t.y.showAxisTitle=!1,t.y2.showAxisTitle=!1),r.width<=tr_axesTitleWidth&&(t.y.showAxisTitle=!1,t.y2.showAxisTitle=!1),r.height<=tr_axesHeight&&(t.x.show=!1),r.width<=tr_axesWidth&&(t.y.show=!1,t.y2.show=!1),r.width<=tr_axesMedWidth&&(0,aa.cB)(e.legendData.position)&&(t.y.show=!1,t.y2.show=!1),r.width<=tr_maxWidthForMediumFont){var a={x:{tickLabels:f.CI,title:f.CI},y:{tickLabels:f.lc,title:f.lc},y2:{tickLabels:f.lc,title:f.lc}};r.width<=tr_maxWidthForSmallFont&&(a.y.tickLabels=f.yo,a.y.title=f.yo,a.y2.tickLabels=f.yo,a.y2.title=f.yo),t.x.titleFontProperties=(0,ae.ED)(t.x.titleFontProperties,{size:N.B.createFromPx(a.x.title)}),t.y.titleFontProperties=(0,ae.ED)(t.y.titleFontProperties,{size:N.B.createFromPx(a.y.title)}),t.y2.titleFontProperties=(0,ae.ED)(t.y2.titleFontProperties,{size:N.B.createFromPx(a.y2.title)}),t.x.labelFontProperties=(0,ae.ED)(t.x.labelFontProperties,{size:N.B.createFromPx(a.x.tickLabels)}),t.y.labelFontProperties=(0,ae.ED)(t.y.labelFontProperties,{size:N.B.createFromPx(a.y.tickLabels)}),t.y2.labelFontProperties=(0,ae.ED)(t.y2.labelFontProperties,{size:N.B.createFromPx(a.y2.tickLabels)})}})(r,e),function(r,e){var t=e.legendData.position,a=r.width<=tr_legendWidth&&(0,aa.cB)(t),i=r.height<=tr_legendHeight&&(0,aa.s0)(t);if((a||i)&&(e.legendData.show=!1),r.width<=tr_maxWidthForMediumFont){var s,n=e.legendData.fontProperties.size.pt;s=r.width<=tr_maxWidthForSmallFont?Math.min(n,Ot.hD):Math.min(n,Ot.vs),e.legendData.fontProperties=(0,ae.ED)(e.legendData.fontProperties,{size:N.B.createFromPt(s)})}}(r,e)}(this.viewport,a),Zs(a,this.cartesianData),a},r.prototype.applyIconResponsiveChanges=function(e){e.showIcon=this.viewport.height<=50||this.viewport.width<=50},r.prototype.applyLegendResponsiveChanges=function(e,t,a){(e.width<210||e.height<100)&&(0,aa.cB)(t)&&(a.legendData.position=Xs.tV.Top),(e.height<70||e.width<80)&&(a.legendData.show=!1),a.legendData.useLargeArrowHitArea=!0},r.prototype.applyAxesResponsiveChanges=function(e,t){e.height<100&&(t.axesData.x.show=!1),e.width<210&&(t.axesData.y.showAxisTitle=!1,t.axesData.y2.showAxisTitle=!1),e.width<100&&(t.axesData.y.show=!1,t.axesData.y2.show=!1),e.height<145&&(t.axesData.x.showAxisTitle=!1)},r.prototype.applyZoomSliderResponsiveChanges=function(e,t){(e.height<150||e.width<280)&&(t.zoomData.showOnCategoryAxis=!1,t.zoomData.showOnValueAxis=!1,t.zoomData.showOnValueSecAxis=!1)},r.prototype.applyFontSizesChanges=function(e,t){t.legendData&&t.legendData.fontProperties&&(t.legendData.fontProperties=this.responsiveFontHelper.adjustFontSize(e,t.legendData.fontProperties));var a=t.axesData;a.x.labelFontProperties=this.responsiveFontHelper.adjustFontSize(e,a.x.labelFontProperties),a.x.titleFontProperties=this.responsiveFontHelper.adjustFontSize(e,a.x.titleFontProperties),a.y.labelFontProperties=this.responsiveFontHelper.adjustFontSize(e,a.y.labelFontProperties),a.y.titleFontProperties=this.responsiveFontHelper.adjustFontSize(e,a.y.titleFontProperties),a.y2.labelFontProperties=this.responsiveFontHelper.adjustFontSize(e,a.y2.labelFontProperties),a.y2.titleFontProperties=this.responsiveFontHelper.adjustFontSize(e,a.y2.titleFontProperties)},r.ScrollbarOptions={scrollbarWidth:8,scrollbarRadius:4,scrollbarClass:"responsive"},r}(),Lu=function(){function r(e,t){this.smallMultiplesOptions=t,this.cartesianData=e.cartesianData,this.dataView=e.dataView,this.isCoreMultiple=e.isCoreMultiple,this.responsiveFontHelper=new Hr}return r.prototype.getData=function(){var e=this.cartesianData;return this.smallMultiplesOptions.isSmallMultiples?(_i.a.getResponsiveVisualProperties(this.dataView,X.p).responsive&&(e=this.applyResponsiveChanges(this.cartesianData,this.smallMultiplesOptions)),e):(P.fF.assertFail("Adapter does not support non-small multiples"),e)},r.prototype.getResponsiveSlice=function(e,t){},r.prototype.applyResponsiveChanges=function(e,t){var a=_i.a.cloneData(e),i=function(r){var e=r.columns,t=r.rows;return{legendPositionHeight:120+30*t,legendPositionWidth:210+40*e,legendShowHeight:90+30*t,legendShowWidth:90+40*e,removeXAxisTitleHeight:165+30*t,removeXAxisHeight:120+30*t,removeYAxisTitleWidth:210+40*e,removeYAxisWidth:120+40*e}}(t),n=t.viewport;return this.applyAxesResponsiveChanges(i,n,a),this.applyLegendResponsiveChanges(i,n,a),this.applyFontSizeResponsiveChanges(n,a),this.isCoreMultiple&&Zs(a,e),a},r.prototype.applyAxesResponsiveChanges=function(e,t,a){var i=t.height,n=t.width;i<e.removeXAxisTitleHeight&&(a.axesData.x.showAxisTitle=!1),i<e.removeXAxisHeight&&(a.axesData.x.show=!1,a.axesData.x.showAxisTitle=!1),n<e.removeYAxisTitleWidth&&(a.axesData.y.showAxisTitle=!1,a.axesData.y2.showAxisTitle=!1),n<e.removeYAxisWidth&&(a.axesData.y.show=!1,a.axesData.y2.show=!1,a.axesData.y.showAxisTitle=!1,a.axesData.y2.showAxisTitle=!1)},r.prototype.applyLegendResponsiveChanges=function(e,t,a){if(a.legendData.show){var n=t.height,s=t.width;(n<e.legendPositionHeight||s<e.legendPositionWidth)&&(0,aa.cB)(a.legendData.position)&&(a.legendData.position=Xs.tV.Top),(n<e.legendShowHeight||s<e.legendShowWidth)&&(a.legendData.show=!1),a.legendData.useLargeArrowHitArea=!0}},r.prototype.applyFontSizeResponsiveChanges=function(e,t){t.legendData&&t.legendData.fontProperties&&(t.legendData.fontProperties=this.responsiveFontHelper.adjustFontSize(e,t.legendData.fontProperties));var a=t.axesData;a.x.labelFontProperties=this.responsiveFontHelper.adjustFontSize(e,a.x.labelFontProperties),a.x.titleFontProperties=this.responsiveFontHelper.adjustFontSize(e,a.x.titleFontProperties),a.y.labelFontProperties=this.responsiveFontHelper.adjustFontSize(e,a.y.labelFontProperties),a.y.titleFontProperties=this.responsiveFontHelper.adjustFontSize(e,a.y.titleFontProperties),a.y2.labelFontProperties=this.responsiveFontHelper.adjustFontSize(e,a.y2.labelFontProperties),a.y2.titleFontProperties=this.responsiveFontHelper.adjustFontSize(e,a.y2.titleFontProperties)},r}(),Pu=function(){function r(e,t){this.layerType=e,this.layerData=t.data}return r.prototype.getData=function(){return this.layerData},r.prototype.getCartesianChartLayerType=function(){return this.layerType},r.prototype.addWarnings=function(e){},r}(),Vr=120;function on(r,e,t){return P.fF.assert(function(){return r[0]>=r[1]},"breakpoints must be [max, min]"),P.fF.assert(function(){return e[0]>=e[1]},"outputRange must be [max, min]"),d3.scaleLinear().range(e).domain(r).clamp(!0)(t)}function qs(r){var e=r.rowCount,t=r.columnCount;return{showIconHeight:30*t,showIconWidth:40*e,showSubheaderHeight:80+50*e,gridlineRowUpperBreakpoint:Vr+52*e,gridlineRowLowerBreakpoint:Vr+32*e,gridlineColumnUpperBreakpoint:Vr+62*t,gridlineColumnLowerBreakpoint:Vr+42*t,removeGridLineHeight:32*e,removeGridLineWidth:42*t,paddingRowUpperBreakpoint:Vr+130*e,paddingRowLowerBreakpoint:Vr+30*e,paddingColumnUpperBreakpoint:Vr+140*t,paddingColumnLowerBreakpoint:Vr+40*t}}var _u=function(){function r(e){this.multiplesLayout=e.multiplesLayout,this.multiplesSubheader=e.multiplesSubheader,this.dataView=e.dataView,this.viewport=e.viewport,this.responsiveFontHelper=new Hr}return r.prototype.getMultiplesLayout=function(e){var t=this.multiplesLayout;return _i.a.getResponsiveVisualProperties(this.dataView,X.p).responsive&&(t=this.applyResponsiveChanges(this.viewport,this.multiplesLayout,e)),t},r.prototype.getMultiplesSubheader=function(e){var t=this.multiplesSubheader;return _i.a.getResponsiveVisualProperties(this.dataView,X.p).responsive&&(t=this.applySubheaderResponsiveChanges(this.viewport,t,e)),t},r.prototype.getResponsiveSlice=function(e,t){var a=X.p.general,i=_i.a.getResponsiveVisualProperties(e,X.p);return{item:new Se.vi({uidBuilder:new Se.IN(new Se.SS(new Se.lg("visualPlaceholderCard"),"visualPlaceholderGroup"),"responsive"),control:new Se.bd({descriptor:a.responsive,value:i.responsive}).build(),localize:t}).build(),revertToDefaultDescriptors:[a.responsive]}},r.prototype.applyResponsiveChanges=function(e,t,a){var i=_i.a.cloneData(t),n=qs(i);return this.applyIconResponsiveChanges(n,e,i),this.applyGridlinesResponsiveChanges(n,e,i),this.applyPaddingResponsiveChanges(n,e,i),this.updateResponsiveWarnings(i,t,a),i},r.prototype.applyIconResponsiveChanges=function(e,t,a){(t.height<e.showIconHeight||t.width<e.showIconWidth)&&(a.showIcon=!0)},r.prototype.applyGridlinesResponsiveChanges=function(e,t,a){var i=a.gridline;if(null!=i?.strokeWidth){var n=i.strokeWidth,s=i.strokeWidth;if(t.height<e.removeGridLineHeight||t.width<e.removeGridLineWidth)return void(i.strokeWidth=0);if(t.height<=e.gridlineRowLowerBreakpoint||t.width<=e.gridlineColumnLowerBreakpoint)return void(i.strokeWidth=1);t.height<e.gridlineRowUpperBreakpoint&&(s=Math.ceil(on([e.gridlineRowUpperBreakpoint,e.gridlineRowLowerBreakpoint],[i.strokeWidth,1],t.height))),t.width<e.gridlineColumnUpperBreakpoint&&(n=Math.ceil(on([e.gridlineColumnUpperBreakpoint,e.gridlineColumnLowerBreakpoint],[i.strokeWidth,1],t.width))),i.strokeWidth=Math.min(n,s)}},r.prototype.applyPaddingResponsiveChanges=function(e,t,a){if(a.advancedPaddingOptions||0!==a.gridPadding){if(t.height<e.paddingRowUpperBreakpoint){var i=[e.paddingRowUpperBreakpoint,e.paddingRowLowerBreakpoint];a.rowPaddingOuter=a.rowPaddingOuter&&Math.ceil(on(i,[a.rowPaddingOuter,1],t.height)),a.rowPaddingInner=a.rowPaddingInner&&Math.ceil(on(i,[a.rowPaddingInner,1],t.height))}t.width<e.paddingColumnUpperBreakpoint&&(i=[e.paddingColumnUpperBreakpoint,e.paddingColumnLowerBreakpoint],a.columnPaddingOuter=a.columnPaddingOuter&&Math.ceil(on(i,[a.columnPaddingOuter,1],t.width)),a.columnPaddingInner=a.columnPaddingInner&&Math.ceil(on(i,[a.columnPaddingInner,1],t.width)))}},r.prototype.applySubheaderResponsiveChanges=function(e,t,a){var i=_i.a.cloneData(t),n=qs(this.multiplesLayout);return e.height<n.showSubheaderHeight&&(i.show=!1),i.show&&i.fontProperties&&(i.fontProperties=this.responsiveFontHelper.adjustFontSize(e,i.fontProperties),i.height=i.fontProperties.size.px+i.margins.top+i.margins.bottom),this.updateSubheaderResponsiveWarnings(i,t,a),i},r.prototype.updateResponsiveWarnings=function(e,t,a){var i,n,s=a,o={};for(var l in e.showIcon?o.subheader=new Ue.lC:((e.rowPaddingInner!==t.rowPaddingInner||e.rowPaddingOuter!==t.rowPaddingOuter||e.columnPaddingInner!==t.columnPaddingInner||e.columnPaddingOuter!==t.columnPaddingOuter)&&(o.smallMultiplesLayout=new Ue.e),(null===(i=e.gridline)||void 0===i?void 0:i.strokeWidth)!==(null===(n=t.gridline)||void 0===n?void 0:n.strokeWidth)&&(o.smallMultiplesLayout=new Ue.IX)),o)s.addForVisualObject(l,{selector:null,warnings:[o[l]]})},r.prototype.updateSubheaderResponsiveWarnings=function(e,t,a){var i=a,n={};for(var s in e.show!==t.show&&(n.subheader=new Ue.lC),_.isEqual(e.fontProperties.size,t.fontProperties.size)||(n.subheader=new Ue.W0),n)i.addForVisualObject(s,{selector:null,warnings:[n[s]]})},r}(),Iu=function(){function r(){}return r.prototype.createCartesianAdapter=function(e){return this.isSmallMultiples()?new Lu(e,this.smallMultiplesOptions):new Du(e)},r.prototype.createLayerAdapter=function(e,t){return this.isSmallMultiples()?new Pu(e,t):new xu(e,t)},r.prototype.setSmallMultiplesOptions=function(e){this.smallMultiplesOptions=e},r.prototype.createSmallMultiplesAdapter=function(e){if(this.isSmallMultiples())return new _u(e);P.fF.assertFail("Can not get SmallMultiplesAdapter for non-small multiples")},r.prototype.isSmallMultiples=function(){return this.smallMultiplesOptions&&this.smallMultiplesOptions.isSmallMultiples},r}(),Nu=function(){function r(e){var a,t=this;this.options=e,P.fF.assertValue(e,"CartesianConstructorOptions"),this.axes=new $t(null!==(a=e.isScrollable)&&void 0!==a&&a,te.ScrollbarWidth,this.trimOrdinalDataOnOverflow),this.viewModelAdapterFactory=new Iu,this.layoutBuilder=new hn(e,this.axes,function(){return t.isPlayAxis()},function(){return t.smallMultiplesViewModelAdapter}),this.multiples=new fu(this.chartType,this.featureSwitches,function(){return function(r){switch(r.chartType){case 1:case 0:case 2:case 3:return[Ks(r)];case 15:return[new Tl((0,d.pi)((0,d.pi)({},r),{isScrollable:!1}))];case 11:return[new Vl((0,d.pi)((0,d.pi)({},r),{viewModelAdapterFactory:Gn(r,2)}))];case 12:return[new tu((0,d.pi)((0,d.pi)({},r),{viewModelAdapterFactory:Gn(r,3)}))];case 5:case 4:case 9:case 7:case 6:case 8:case 10:return[Ys(r)];case 13:case 14:return[Ys(r),Ks(r)];default:return P.fF.assertFail("Unknown CartesianChartType enum value"),[]}}((0,d.pi)((0,d.pi)({},t.options),{viewModelAdapterFactory:t.viewModelAdapterFactory,interactivityService:t.interactivityService}))},function(i){return t.getLayerRendererInitOptions(i)})}return Object.defineProperty(r.prototype,"featureSwitches",{get:function(){return this.options.featureSwitches||{}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"chartType",{get:function(){return this.options.chartType},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"trimOrdinalDataOnOverflow",{get:function(){var t;return null===(t=this.options.trimOrdinalDataOnOverflow)||void 0===t||t},enumerable:!1,configurable:!0}),r.prototype.init=function(e){var a,t=this;P.fF.assertValue(e,"CartesianChart.init(options)"),this.visualInitOptions=e;var i=e.element;this.currentViewport=e.viewport,this.hostServices=e.host,this.eventManager=new lt.B(d3.select(i.get(0))),this.categoryLoadMoreDataHandler=new to(null,this.hostServices),this.options.behaviorFactory&&(this.interactivityService=(0,j.ub)(this.hostServices,this.featureSwitches)),this.tooltipService=(0,vt.r)(e.host);var n=this.visualInitOptions.style,s=(0,Ae.ED)(n);s.colorPalette=(0,Ae.ED)(n.colorPalette),s.colorPalette.dataColors=new eo(n.colorPalette.dataColors),this.layerStyle=s;var o=new na({style:n,chartType:this.chartType});this.axisZoom=new B(i,this.hostServices,this.axes.isScrollable&&!!e.interactivity,this.featureSwitches),this.axes.init({axesData:o,axisZoom:this.axisZoom,interactivityService:this.interactivityService}),this.legend=(0,Ot.OG)(i,e.interactivity&&e.interactivity.mobileTileInteractive,12!==this.chartType?this.interactivityService:void 0,this.axes.isScrollable,void 0,n,this.hostServices);var l=(0,Ae.ED)(e);if(l.style=s,l.services={tooltips:this.tooltipService},this.multiples.init(l,this.interactivityService),this.layoutBuilder.init(e,this.tooltipService,this.legend,o,this.interactivityService,this.layerStyle,this.multiples.rowLoadMoreDataHandler,this.eventManager),this.layout=this.layoutBuilder.create(this.visualInitOptions.element),this.isMobileChart=e.interactivity&&e.interactivity.mobileTileInteractive,this.featureSwitches.onObject){var c=(null===(a=this.hostServices)||void 0===a?void 0:a.getSubSelectionService())??kt.D.createWithDefaultHost();this.subSelectionHelper=We.O5.createHtmlSubselectionHelper({hostElement:i.get(0),hostServices:this.hostServices,renderer:c,targetSource:"format",scale:function(){return t.currentViewport.scale},selectorCallback:function(g){return t.getSelectorsByColumnSubSelection(g)},customOutlineCallback:function(g){return t.getSubSelectionCustomOutlines(g)},customElementCallback:function(g){return t.getSubSelectionCustomElements(g)},subSelectionMetadataCallback:function(g){return t.getSubSelectionMetadata(g)}}),this.interactivityService.setSubSelectionHelper(this.subSelectionHelper)}},r.prototype.isPlayAxis=function(){return!(!this.dataViews||!this.dataViews[0])&&11===this.chartType&&(this.options.animator||this.isMobileChart)&&(0,F.c5)(this.dataViews[0],"Play")},r.prototype.is100Stacked=function(){return 8===this.chartType||9===this.chartType||3===this.chartType},r.prototype.updateInternal=function(e,t){var a;return(0,d.mG)(this,void 0,void 0,function(){var i,n,s,o,l,u,c,h,g,y,A,M,O,I,J,ue,xe,ie;return(0,d.Jh)(this,function(re){switch(re.label){case 0:return i=this.dataViews=e.dataViews,n=this.featureSwitches.onObject&&e.formatMode,s=e.operationKind===ge.su.Append||null!=e.resizeMode||n,this.currentViewport=e.viewport,i?(l=this.multiples.isSmallMultiples(i),(u=l&&i[0])?(g=(0,f.Zw)(c=u.metadata.objects,h=this.layerStyle),y=(0,f.yA)(c,h),this.viewModelAdapterFactory.setSmallMultiplesOptions({viewport:this.currentViewport,isSmallMultiples:l,columns:g.columnCount,rows:g.rowCount}),this.smallMultiplesViewModelAdapter=this.viewModelAdapterFactory.createSmallMultiplesAdapter({dataView:u,multiplesLayout:g,multiplesSubheader:y,viewport:this.currentViewport})):(this.viewModelAdapterFactory.setSmallMultiplesOptions({viewport:this.currentViewport,isSmallMultiples:l,columns:void 0,rows:void 0}),this.smallMultiplesViewModelAdapter=void 0),l!==this.multiples.isSmallMultiples()&&this.multiples.clear(),null!=t?(A=this.multiples.getCoreMultiple(),M=A.layers,_.isEmpty(i)||(O=dt(i),this.cartesianVisualCapabilities=r.getCartesianVisualCapabilities(M),l&&this.cartesianVisualCapabilities&&(this.cartesianVisualCapabilities.supportsHierarchicalCategoryAxis=!1),2===(o=this.categoryAxisRenderMode=r.getRenderMode(O,this.cartesianVisualCapabilities))&&(i=i.map(function(he){return(0,Ke.Zy)(he,X.p.general.formatString,X.x.category)}))),this.multiples.update({dataViews:i,operationKind:t,viewport:this.currentViewport,adapterFactory:this.viewModelAdapterFactory,preserveScrollPosition:s,formatMode:n}),this.cartesianData=this.originalCartesianData=A.getData()):(this.multiples.resize(this.currentViewport),this.cartesianData=this.multiples.getCoreMultiple().getData()),null==t&&this.cartesianData&&this.cartesianData.axesData?this.axes.updateResize(this.cartesianData.axesData,this.cartesianData.scrollbarOptions.scrollbarWidth):null!=t&&(_.isEmpty(i)||((I=i[0]).metadata&&(this.background={image:(0,C.NA)(I.metadata.objects,X.p.plotArea.image),transparency:(0,C.NA)(I.metadata.objects,X.p.plotArea.transparency,(0,xt.x6)())}),this.categoryLoadMoreDataHandler.update(o,l),this.axes.update(I.categorical?I.categorical.categories:null,this.cartesianData.axesData,o,this.cartesianData.scrollbarOptions.scrollbarWidth)),this.categoryLoadMoreDataHandler.onLoadMoreDataCompleted()),this.cartesianData&&this.cartesianData.zoomData&&this.axisZoom.update({dataViews:i,zoomData:this.cartesianData.zoomData,hasSmallMultiples:l,hasScalarCategoryAxis:this.categoryAxisIsScalar().isScalar,hasYAxisCategorical:this.axes.isYAxisCategorical}),[4,this.render(!this.hasSetData||e.suppressAnimations||l,s,e.resizeMode)]):[2];case 1:return re.sent(),this.isDestroyed||(this.hasSetData=this.hasSetData||!_.isEmpty(i),this.updateWarnings(null===(a=this.cartesianData)||void 0===a?void 0:a.warningObjectCollection),J=e.type&ge.EP.Data||e.type&ge.EP.ResizeEnd||e.type&ge.EP.FormattingSubSelectionChange,ue=e.type&ge.EP.FormattingSubSelectionChange,this.subSelectionHelper&&J&&(this.subSelectionHelper.updateOutlinesFromSubSelections(e.subSelections,!0),this.hostServices.alertScreenReader&&ue&&(xe=this.subSelectionHelper.getLabelsFromSubSelections(e.subSelections,["aria-label"]),(ie=xe?.length&&xe.join(" "))&&this.hostServices.alertScreenReader(ie)))),[2]}})})},r.getCartesianVisualCapabilities=function(e){for(var t,a=0,i=e.length;a<i;a++){var s=e[a].getCartesianVisualCapabilities();t?t.supportsHierarchicalCategoryAxis&&(t.supportsHierarchicalCategoryAxis=s.supportsHierarchicalCategoryAxis):t=(0,Ae.ED)(s)}return t},r.getRenderMode=function(e,t){for(var a,i=0,n=e;i<n.length;i++){var s=n[i];if(null!=s){var o=new ps(s,t?.supportsHierarchicalCategoryAxis).getRenderModes();a=a?_.intersection(a,o):o,P.fF.assert(function(){return!_.isEmpty(a)},"Could not find a valid render mode for all layers")}}return _.head(a)},r.prototype.isSmallMultiples=function(){return(0,f.sI)(this.dataViews)},r.prototype.showSmallMultiplesCard=function(){return this.isSmallMultiples()},r.prototype.showSubheaderCard=function(){return this.isSmallMultiples()},Object.defineProperty(r.prototype,"hasHierarchicalAxisRenderMode",{get:function(){return 3===this.categoryAxisRenderMode},enumerable:!1,configurable:!0}),r.prototype.render=function(e,t,a){return(0,d.mG)(this,void 0,void 0,function(){return(0,d.Jh)(this,function(i){return[2,this.layout.render(this.multiples,this.currentViewport,this.categoryLoadMoreDataHandler,this.background,this.axisZoom,this.trimOrdinalDataOnOverflow,e,this.hasHierarchicalAxisRenderMode,t,this.formatMode,this.subSelectionHelper,this.isSelected,a)]})})},r.prototype.updateWarnings=function(e){var t,a,i,n,s;if(!_.isEmpty(this.dataViews)&&e){var o=this.dataViews,l=(0,Pt.b)(o,!1,!1,!1,["Tooltips"],!0);if(_.isEmpty(l)||e.add.apply(e,l||[]),this.axes.addWarnings(e),this.multiples.checkIfNoLabelsCanBeRendered()){var u={selector:null,warnings:[new Ue.we]};e.addForVisualObject("labels",u)}else{e.removeForVisualObject("labels");for(var h=0,g=null===(a=this.multiples.getCoreMultiple())||void 0===a?void 0:a.layers;h<g.length;h++){var y=g[h];null===(i=y.addWarnings)||void 0===i||i.call(y,e)}}for(var D=[],x=null===(n=this.cartesianVisualCapabilities)||void 0===n?void 0:n.supportsHierarchicalCategoryAxis,A=0,M=o;A<M.length;A++)new ps(M[A],x).addObjectWarnings(D);var I=function(J,ue){var xe=(0,w.getMergedUserDomains)(J);xe[0]>=xe[1]&&e.addForVisualObject(ue,{selector:null,warnings:[new Ue.Dm]})};!(null===(s=this.originalCartesianData)||void 0===s)&&s.axesData&&(I(this.originalCartesianData.axesData.valueAxis,"valueAxis"),I(this.originalCartesianData.axesData.categoryAxis,"categoryAxis"),I(this.originalCartesianData.axesData.secondaryValueAxis,"y2Axis")),_.isEmpty(D)||(t=this.cartesianData.warningObjectCollection).addForVisualObject.apply(t,(0,d.ev)(["categoryAxis"],D||[],!1)),this.hostServices.setWarnings(this.cartesianData.warningObjectCollection.complete())}},r.prototype.update=function(e){return(0,d.mG)(this,void 0,void 0,function(){return(0,d.Jh)(this,function(t){switch(t.label){case 0:return this.featureSwitches.onObject&&e.formatMode!==this.formatMode&&(this.subSelectionHelper.setFormatMode(e.formatMode),this.interactivityService.setFormatMode(e.formatMode),this.formatMode=e.formatMode),null==e.resizeMode?[3,2]:[4,this.updateInternal(e)];case 1:return t.sent(),[3,4];case 2:return[4,this.updateInternal(e,null!=e.operationKind?e.operationKind:ge.su.Create)];case 3:t.sent(),t.label=4;case 4:return[2]}})})},r.prototype.destroy=function(){this.isDestroyed=!0,this.multiples&&this.multiples.clear(),this.layout&&this.layout.destroy(),this.axisZoom&&(this.axisZoom.destroy(),this.axisZoom=void 0)},r.prototype.onViewModeChanged=function(e){this.layout.viewMode=e},r.prototype.onSelectionStateChanged=function(e){if(this.isSelected=e,this.cartesianData&&this.multiples&&this.dataViews){var t=!this.hasSetData||this.multiples.isSmallMultiples(this.dataViews);this.render(t,!0)}},r.prototype.scrollTo=function(e){var t=this.layout.getVisibleMultiples();this.multiples.scrollTo(e,t)},r.prototype.scrollRowsTo=function(e){this.layout.scrollRowsTo(e)},r.prototype.isComboChart=function(){return f.LQ(this.chartType)},r.prototype.enumerateObjectInstances=function(e){var t,a=new Mt.G,i=this.getLayers();if(e.objectName===ft.XC){var n=this.categoryAxisIsScalar().isScalar;if(Ve(this.dataViews,i)&&n){var s=f.RN(i);this.enumerateReferenceLines(a,e.objectName,s)}}else e.objectName===ft.Dk?this.enumerateReferenceLines(a,e.objectName):"referenceLine"===e.objectName?function(r,e,t){return it(function(a){return!a.isStacked},r,e,void 0)}(this.dataViews,i)&&this.enumerateReferenceLines(a,e.objectName):"trend"===e.objectName&&Ne(this.dataViews,i)&&(0,rt.md)(a,this.originalCartesianData.trendLines,this.layerStyle);for(var o=0,l=i;o<l.length;o++){var u=l[o];null===(t=u.enumerateObjectInstances)||void 0===t||t.call(u,a,e)}return a.complete()},r.prototype.getSelectorsByColumnSubSelection=function(e){for(var a=0,i=this.getLayers();a<i.length;a++){var n=i[a];if(n.getSelectorsByColumnFromSubselectedElement){var s=n.getSelectorsByColumnFromSubselectedElement(e);if(s)return s}}return{}},r.prototype.getSubSelectionCustomOutlines=function(e){return ya.PH.call(this,e)},r.prototype.getSubSelectionCustomElements=function(e){return ya.xm.call(this,e)},r.prototype.getSubSelectionMetadata=function(e){return ya.H_.call(this,e)},r.prototype.getSubSelectionStyles=function(e){return ya.mv.call(this,e)},r.prototype.getSubSelectionShortcuts=function(e,t){return ya.yV.call(this,e,t)},r.prototype.getSubSelectables=function(e){return ya.l$.call(this,e)},r.prototype.getNextSubSelectable=function(e,t){return this.subSelectionHelper.getNextSubSelectable(e,t)},r.prototype.getFormattingModel=function(){return ya.fI.call(this)},r.prototype.resolveFormattingPlaceholder=function(e){if((0,Se.n$)(e)){if("responsive"===e.name)return this.getResponsiveSlice();for(var a=0,i=this.getLayers();a<i.length;a++){var n=i[a],s=n.resolveFormattingPlaceholder&&n.resolveFormattingPlaceholder(e);if(s)return s}}},Object.defineProperty(r.prototype,"localizer",{get:function(){var t=this;return function(a){return t.hostServices.getLocalizedString(a)}},enumerable:!1,configurable:!0}),r.prototype.getResponsiveSlice=function(){var e=this.dataViews&&this.dataViews[0];if(e){if(this.smallMultiplesViewModelAdapter)return this.smallMultiplesViewModelAdapter.getResponsiveSlice(e,this.localizer);if(this.viewModelAdapterFactory)return this.viewModelAdapterFactory.createCartesianAdapter({cartesianData:void 0,dataView:e,viewport:void 0,isCoreMultiple:void 0}).getResponsiveSlice(e,this.localizer)}},r.prototype.getTelemetryInformation=function(){var e={};if(this.isSmallMultiples()){var t=(0,f.Zw)(this.dataViews[0].metadata.objects,this.layerStyle);P.fF.assertValue(t,"getTelemetryInformation - NULL layout"),e.smallMultiples={layout:{type:t.layoutType,rows:t.rowCount,columns:t.columnCount}}}for(var a=this.getLayers(),i=0;i<a.length;i++){var n=a[i];if(_.isFunction(n.getTelemetryInformation)){var s=n.getTelemetryInformation();s&&(e[i.toString()]=s)}}if(!_.isEmpty(e))return e},r.prototype.getLayers=function(){var e=this.multiples.getCoreMultiple();return 1&e.getState()?e.layers:[]},r.prototype.enumerateReferenceLines=function(e,t,a){var i,n;if(null!==(i=this.originalCartesianData)&&void 0!==i&&i.referenceLines&&null!==(n=this.originalCartesianData)&&void 0!==n&&n.axesData){var s=Ge.v.getDataColorByIndex(this.layerStyle,0,Oe.fA),o=_.filter(this.originalCartesianData.referenceLines,function(l){return l.type===t});(0,ft.Dr)(e,o,s,t,this.originalCartesianData.axesData.isValueAxisIrregular,a)}},r.prototype.shouldShowLegendCard=function(){var e,t;if(_.isEmpty(this.dataViews)||null===(e=this.cartesianData)||void 0===e||!e.legendData)return!1;if(this.cartesianData.legendData.isGradientLegend)return!0;var a=null===(t=this.multiples.getCoreMultiple())||void 0===t?void 0:t.layers;if(a&&this.dataViews)for(var i=a.length,n=0,s=0;s<i;s++){if(a[s].hasLegend())return!0;var o=this.dataViews[s];if(o&&o.categorical&&o.categorical.values&&o.categorical.values.length>0&&++n>1)return!0}return!1},r.prototype.isLogAxisScaleAllowed=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1);var a=this.axes.isYAxisCategorical;return this.axes.isLogScaleAllowed(e?a?0:t?2:1:a?1:0)},r.prototype.categoryAxisIsScalar=function(){var e;if(!this.originalCartesianData)return{isScalar:void 0,supportedType:void 0};var t=this.originalCartesianData.axesData.categoryAxis,a=this.hasHierarchicalAxisRenderMode?At.w.categorical:At.w.both,i=!1,n=null===(e=this.multiples.getCoreMultiple())||void 0===e?void 0:e.layers;return a===At.w.both&&n&&n[0].getSupportedCategoryAxisType&&((a=n[0].getSupportedCategoryAxisType())===At.w.scalar?i=!0:(i=f.qU(a===At.w.both,t))&&(i=n&&n[0].getVisualCategoryAxisIsScalar?n[0].getVisualCategoryAxisIsScalar():0===this.categoryAxisRenderMode)),{isScalar:i,supportedType:a}},r.prototype.onClearSelection=function(){this.hasSetData&&this.multiples.clearSelection(this.layout.getVisibleMultiples())},r.prototype.onRestoreSelection=function(e){return!!this.interactivityService&&this.interactivityService.restoreSelection(e.selection)},r.prototype.getLayerRendererInitOptions=function(e){var a,t=this;return{animator:null===(a=e.cartesianOptions)||void 0===a?void 0:a.animator,svg:e.axesRenderer.getLayerContainer(),cartesianHost:{updateLegend:function(n){return t.legend.drawLegend({data:n,parentViewport:t.currentViewport,isHierarchicalAxis:t.hasHierarchicalAxisRenderMode,onObject:t.featureSwitches.onObject,titleSliceUid:"".concat("legend","-").concat("title","-titleText")})},triggerRender:function(n){return t.render(n,!1)}},eventManager:this.eventManager,useManagedTabIndex:this.useManagedTabIndex()}},r.prototype.useManagedTabIndex=function(){return this.isSmallMultiples()},r.prototype.onDataViewObjectChanged=function(e,t){var c,a=(0,f.Zw)(this.dataViews[0].metadata.objects,this.layerStyle),i=f.Te(e,a);if(!this.featureSwitches.onObject||1!==t)return i;for(var s=[],o=0,l=this.getLayers();o<l.length;o++){var u=l[o];u.getDataViewObjectLayerChanges&&s.push(u.getDataViewObjectLayerChanges(i,t))}if(_.isEmpty(s))return i;if(s.length>1){for(var h=[],g=[],y=0;y<s.length;y++){g[y]=[];for(var D=0,x=s[y];D<x.length;D++){var A=x[D];A.required?h.push(A):g[y].push(A)}}for(var M=g[0],O=1;O<g.length;O++)M=_.intersectionWith(M,g[O],_.isEqual);c=et.o.applyDataViewObjectsBehaviorChanges(e,(0,d.ev)((0,d.ev)([],M,!0),h,!0))}else c=et.o.applyDataViewObjectsBehaviorChanges(i,_.first(s));return c},r}(),ps=function(){function r(e,t){this.processDataView(e,t)}return r.prototype.processDataView=function(e,t){if(this.renderModes=[],e&&e.metadata&&e.categorical&&!_.isEmpty(e.categorical.categories)){var a=e.metadata,i=e.categorical.categories,n=_.head(i),s=ce.A8(n),o=(0,Ht.n$)(e),l=ce.PX(a.objects,X.p.categoryAxis.axisType,n.source.type,s,o);if(o){var u=r.areNonLeafLevelsFilteredToUniqueValue(i),c=(0,C.NA)(a.objects,X.p.categoryAxis.concatenateLabels,f.SM);if(!u||!c&&t){var h=_.some(e.categorical.categories,function(y){return y.source&&y.source.identityExprs}),g=t&&!c&&h;this.renderModes.unshift(2),g&&this.renderModes.unshift(3),!c&&!h&&(this.warnings=[{selector:null,warnings:[new Ue.Tr]}])}else this.renderModes.unshift(1);l&&this.renderModes.unshift(0)}else this.renderModes.unshift(1),l&&this.renderModes.unshift(0)}else this.renderModes.push(2)},r.prototype.getRenderMode=function(){return _.head(this.renderModes)},r.prototype.getRenderModes=function(){return this.renderModes},r.prototype.addObjectWarnings=function(e){P.fF.assertValue(e,"warnings"),this.warnings&&e.push.apply(e,this.warnings||[])},r.areNonLeafLevelsFilteredToUniqueValue=function(e){if(_.isEmpty(e))return!1;for(var t=e.length-1,a=0;a<t;a++){var i=e[a].source;if(!i||!(0,C.NA)(i.objects,X.p.filters.filteredToUniqueValue,!1))return!1}return!0},r}(),eo=function(){function r(e){this.palette=e,this.clearPreferredScale()}return r.prototype.getAllColors=function(){return this.palette.getAllColors()},r.prototype.getColorScaleByKey=function(e){return this.setPreferredScale(e),this.preferredScale},r.prototype.getNewColorScale=function(){return this.preferredScale},r.prototype.getColorByIndex=function(e){return this.palette.getColorByIndex(e)},r.prototype.getSentimentColors=function(){return this.palette.getSentimentColors()},r.prototype.getGradientColors=function(){return this.palette.getGradientColors()},r.prototype.getBasePickerColors=function(){return this.palette.getBasePickerColors()},r.prototype.clearPreferredScale=function(){this.preferredScale=this.palette.getNewColorScale(),this.rotated=!1},r.prototype.rotateScale=function(){this.preferredScale=this.preferredScale.clone(),this.preferredScale.clearAndRotateScale(),this.rotated=!0},r.prototype.setPreferredScale=function(e){this.rotated||(this.preferredScale=this.palette.getColorScaleByKey(e))},r}(),to=function(){function r(e,t){this.loadMoreThreshold=1,this.enabled=!1,P.fF.assertValue(t,"hostServices"),this.hostServices=t,this.setScale(e)}return r.prototype.update=function(e,t){this.enabled=!t&&0!==e},r.prototype.resetViewport=function(e){this.viewportDataRange={startIndex:0,endIndex:e}},r.prototype.setScale=function(e){var t=e&&e.domain&&e.domain().length;t&&(this.loadMoreThresholdIndex=t-1-this.loadMoreThreshold)},r.prototype.isLoadingMoreData=function(){return this.loadingMoreData},r.prototype.onLoadMoreDataCompleted=function(){this.loadingMoreData=!1},r.prototype.shouldLoadMoreData=function(){var e=this.viewportDataRange;return!(!this.enabled||!e||this.isLoadingMoreData())&&e.endIndex>=this.loadMoreThresholdIndex},r.prototype.loadMoreData=function(){var e=this;return P.fF.assert(function(){return e.shouldLoadMoreData()},"unexpected call to loadMoreData"),this.isLoadingMoreData()?qe.G.WaitingForData:(this.loadingMoreData=!0,this.hostServices.loadMoreData(),qe.G.TriggeredLoadMore)},r}()},34969:function(li,la,S){"use strict";S.d(la,{$B:function(){return ze},$K:function(){return H},$W:function(){return ae},$w:function(){return Z},Ao:function(){return k},Au:function(){return dt},CI:function(){return T},Fv:function(){return Le},GN:function(){return Ne},JI:function(){return G},K8:function(){return E},LK:function(){return da},LQ:function(){return v},MH:function(){return _e},MI:function(){return Ca},PC:function(){return f},Pg:function(){return Re},QB:function(){return ra},RN:function(){return Qe},SM:function(){return Y},Sq:function(){return le},T4:function(){return q},Te:function(){return Ta},Vk:function(){return U},Zo:function(){return Ve},Zw:function(){return $t},be:function(){return Q},cI:function(){return De},dZ:function(){return K},eX:function(){return p},fw:function(){return Be},is:function(){return Rt},jY:function(){return me},lc:function(){return N},qE:function(){return Pe},qU:function(){return je},rX:function(){return ia},rZ:function(){return oe},sI:function(){return it},se:function(){return ye},u8:function(){return ee},yA:function(){return Ma},yo:function(){return b},zn:function(){return ne}});var d=S(81337),X=S(53197),ce=S(86946),Ge=S(48766),Ke=S(62458),et=S(38265),Ht=S(72489),Pt=S(26543),Mt=S(28326),ft=S(22733),We=S(38958),kt=S(41640),rt=S(14599),xt=S(61297),Ot=S(91593),j=S(90120),vt=S(82755),At=S(32476),Ue=S(49511),Oe=S(47316),P=S(18664),Ae=S(32105),lt=S(44783),Se=S(79154),qe=S(18765),ge=S(92374),F=S(72902),C=S(76045),q=0,ne=75,ze=.2,De=.6,Be=1,ae=1,w=36,le="cartesianChart",Y=!0,me=20,Le=2,ye=et.Wn.regular.css,oe=8,E=.4,Q=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],B=2,T=9,b=9,N=11,p="foregroundNeutralSecondaryAlt",k="foregroundNeutralLight",G="foregroundNeutralTertiaryAlt";function ee(){return{categoryCount:0,categoryThickness:me,outerPaddingRatio:0,innerPaddingRatio:0,isScalar:!1}}function U(fe,Xe){var He=Xe?{showAxisTitle:!0}:{};if(!fe)return He;var ht=fe.objects;if(ht){var m=ht.categoryAxis;m&&((He=_.clone(m)).showAxisTitle=m.showAxisTitle??Xe)}return He}function Z(fe,Xe,He){void 0===He&&(He="valueAxis");var ht=Xe?{showAxisTitle:!0}:{};if(!fe)return ht;var m=fe.objects;if(m){var V=m[He];V&&((ht=_.clone(V)).showAxisTitle=V.showAxisTitle??Xe)}return ht}function Pe(fe){return void 0!==fe.innerPadding?Math.round(100*fe.innerPadding):void 0}function je(fe,Xe){return!(!fe||Xe&&Xe.axisType&&Xe.axisType!==Ge.w.scalar)}function f(fe){return v(fe)||0===fe||1===fe||2===fe||3===fe}function v(fe){return 13===fe||14===fe}function H(fe){var Xe=fe.preferredCategoryWidth;return null==Xe?void 0:+Xe}function K(fe,Xe,He,ht){if(Ke.fF.assertValue(fe,"data"),Ke.fF.assertValue(He,"type"),ht)return(0,X.v9)(He)?Mt.y3.fromTimeValue(Xe):Xe;if(He.text)return Ke.fF.assert(function(){return Xe<fe.categories.length},"category index out of range"),fe.categories[Xe];if(fe&&fe.series&&fe.series.length>0){var m=fe.series[0];if(m){var V=m.data;if(V){fe.hasHighlights&&(Xe*=2);var R=V[Xe];if(R)return(0,X.v9)(He)&&null!=R.categoryValue?Mt.y3.fromTimeValue(R.categoryValue):R.categoryValue}}}return Xe}function Re(fe){if(_.isEmpty(fe))return 0;for(var Xe=0,He=0,ht=fe;He<ht.length;He++){var m=ht[He];_.isEmpty(m.data)||(Xe=Math.max(m.data[m.data.length-1].categoryIndex,Xe))}return Xe}function _e(fe,Xe){var He;return Pt.dw.builder().withCategory([Xe],fe,null===(He=Xe?.source)||void 0===He?void 0:He.queryName,!0).createSelectionId()}function Ve(fe,Xe){var He,m,ht=!1;if(Xe){var V=_.head(fe.categories);He=(ht=(m=(0,ce.A8)(V))&&!_.isEmpty(m.values))?V:_.last(fe.categories)}else He=_.isEmpty(fe.categories)?{source:void 0,values:[(0,Ht.WU)(null)],identity:void 0}:_.last(fe.categories);return{category:He,useScalarKeys:ht,scalarKeys:m}}function Ne(fe){return fe[0]}function Qe(fe){var Xe;return Ke.fF.assert(function(){return!_.isEmpty(fe)},"getCategoryValueType layers"),null===(Xe=_.find(fe,function(He){return He.getCategoryValueType&&He.hasData()}))||void 0===Xe?void 0:Xe.getCategoryValueType()}function it(fe){var Xe,He,ht,m,V;if(_.size(fe)<1)return!1;var R=null===(V=null===(m=null===(ht=null===(He=null===(Xe=fe[0])||void 0===Xe?void 0:Xe.matrix)||void 0===He?void 0:He.rows)||void 0===ht?void 0:ht.levels)||void 0===m?void 0:m[0])||void 0===V?void 0:V.sources;return!(_.size(R)<1||_.isEmpty(fe[0].matrix.rows.root.children))&&_.every(R,function(be){return(0,We.nu)(be,ft.x.rows)})}function dt(fe){switch(fe){case 7:case 6:case 8:return!0}return!1}function Rt(fe){var Xe=fe.categoryCount,He=fe.availableWidth,ht=fe.isScalar,m=void 0!==ht&&ht,V=fe.cartesianOptions,be=(void 0===V?{}:V).isScrollable,Fe=function(fe){var Xe=fe.categoryCount,He=fe.availableWidth,ht=fe.isScalar,m=fe.preferredCategoryWidth,V=fe.outerPaddingRatio,R=function(fe){var Xe,He,ht,at,m=fe.data,V=fe.categoryCount,R=fe.availableWidth,be=fe.domain,Fe=fe.isScalar,ke=fe.trimOrdinalDataOnOverflow,Me=fe.outerPaddingRatio;if(V<2)at=R*(1-Me);else if(Fe&&be&&be.length>1){var nt=function(fe){var Xe=Number.MAX_VALUE;if(fe.length>0)for(var He=fe[0].data.filter(function(R){return!R.highlight}),ht=function(be,Fe){var ke=He[be+1].categoryValue,Me=He[be].categoryValue;Ke.fF.assert(function(){return _.isNumber(ke)},"nextValue"),Ke.fF.assert(function(){return _.isNumber(Me)},"currentValue"),Xe=Math.min(Xe,Math.abs(ke-Me))},m=0,V=He.length-1;m<V;m++)ht(m);return Xe}(null!==(Xe=m?.series)&&void 0!==Xe?Xe:[]);at=R*(nt/(be[be.length-1]-be[0]+nt*Me*2));var zt=null!==(ht=null===(He=fe.axisZoom)||void 0===He?void 0:He.getCategoryZoomFactor())&&void 0!==ht?ht:1;Ke.fF.assert(function(){return zt>=1},"zoomFactor must be >= 1"),at=Math.max(at*zt,B)}else at=R/(V+2*Me),ke&&(at=Math.max(at,me));return at=Math.min(at,R/(3+2*Me)),!Fe&&V>=3&&ke?Math.max(at,me):at}(fe);if(ht||null==m||m<R)return{categoryThickness:R,outerPaddingRatio:V};var be=Math.floor((He-m*V*2)/m);return be<=0?R=He/(1+2*V):be<Xe?(V=(He-m*be)/(2*m),R=m):R=Math.min(m,He),{categoryThickness:R,outerPaddingRatio:V}}(fe),ke=Fe.categoryThickness,Me=Fe.outerPaddingRatio,nt=(0,kt.Uy)((He-ke*Me*2)/ke),pt=Math.min(nt,Xe);return m||pt<Xe&&be||(Me=Math.max(0,(He-ke*pt)/2/ke),Me=(0,kt.GG)(Me,0)?0:Me),{categoryCount:!m&&be?Xe:pt,categoryThickness:ke,outerPaddingRatio:Me,innerPaddingRatio:fe.innerPaddingRatio,isScalar:m}}function ra(fe,Xe){return{x:fe.x.show,y:fe.y.show,y2:fe.y2.show||Xe&&!1!==fe.y2.show}}function $t(fe,Xe){var He,ht,m=(0,vt.RK)(fe,xt.Xi),V=function(fe){return{layoutType:fe?.layoutType,rowCount:fe?.rowCount,columnCount:fe?.columnCount,backgroundColor:fe?.backgroundColor,backgroundTransparency:fe?.backgroundTransparency,gridPadding:fe?.gridPadding,advancedPaddingOptions:fe?.advancedPaddingOptions,columnPaddingInner:fe?.columnPaddingInner,columnPaddingOuter:fe?.columnPaddingOuter,rowPaddingInner:fe?.rowPaddingInner,rowPaddingOuter:fe?.rowPaddingOuter}}(m),R=function(fe){return{layoutType:0,rowCount:xt.UE,columnCount:xt.ZO,backgroundColor:null,backgroundTransparency:0,gridline:{region:Ue.o.none,strokeShow:!1,strokePattern:Oe.kY.solid,strokeWidth:1,strokeColor:j.v.getThemeColor(fe,lt.md),strokeTransparency:0},advancedPaddingOptions:!1,gridPadding:12,columnPaddingInner:12,columnPaddingOuter:12,rowPaddingInner:12,rowPaddingOuter:12}}(Xe),be=j.v.create(Xe),Fe=m?.gridLineShow,ke=null!==(He=m?.gridLineType)&&void 0!==He?He:R.gridline.region;!1===Fe?ke=Ue.o.none:!0===Fe?(ke===Ue.o.none||!ke)&&(ke=Ue.o.inner):null==Fe&&(Fe=ke!==Ue.o.none);var Me=(0,d.pi)((0,d.pi)({},V?.layoutType===Ot.r.auto?{layoutType:0,rowCount:R.rowCount,columnCount:R.columnCount}:{layoutType:1,rowCount:V?.rowCount||R.rowCount,columnCount:V?.columnCount||R.columnCount}),{backgroundColor:be.getColorForPropertyNameWithDefaultColor(m,rt.e0.smallMultiplesBackgroundColor.propertyName,R.backgroundColor,!0),backgroundTransparency:null!==(ht=V?.backgroundTransparency)&&void 0!==ht?ht:R.backgroundTransparency,gridline:{region:ke,strokeShow:Fe,strokePattern:(0,C.N)(m,"gridLineStyle",R.gridline.strokePattern),strokeColor:be.getColorForPropertyNameWithDefaultColor(m,"gridLineColor",R.gridline.strokeColor),strokeWidth:(0,C.N)(m,"gridLineWidth",R.gridline.strokeWidth),strokeTransparency:(0,C.N)(m,"gridLineTransparency",R.gridline.strokeTransparency)}});return function(fe,Xe,He){fe.gridPadding=Xe&&void 0!==Xe.gridPadding?Xe.gridPadding:He.gridPadding,fe.advancedPaddingOptions=Xe&&void 0!==Xe.advancedPaddingOptions?Xe.advancedPaddingOptions:He.advancedPaddingOptions;var ht=Xe&&Xe.advancedPaddingOptions,m={gridPadding:fe.gridPadding,gridLineRegion:fe.gridline.region};fe.columnPaddingInner=ht&&void 0!==Xe.columnPaddingInner?Xe.columnPaddingInner:Wa(m,1),ht&&void 0!==Xe.columnPaddingOuter?fe.columnPaddingOuter=Xe.columnPaddingOuter:(m.defaultPadding=He.columnPaddingOuter,fe.columnPaddingOuter=Wa(m,0)),fe.rowPaddingInner=ht&&void 0!==Xe.rowPaddingInner?Xe.rowPaddingInner:Wa(m,2),ht&&void 0!==Xe.rowPaddingOuter?fe.rowPaddingOuter=Xe.rowPaddingOuter:(m.defaultPadding=He.rowPaddingOuter,fe.rowPaddingOuter=Wa(m,0))}(Me,V,R),Me}function Wa(fe,Xe){var He=fe.gridPadding,ht=fe.gridLineRegion,m=fe.defaultPadding;switch(Xe){case 0:return At.Me.typeHasOuterGridLines(ht)?He:m;case 1:return At.Me.typeHasVerticalGridLines(ht)?He:Ra(He);case 2:return At.Me.typeHasHorizontalGridLines(ht)?He:Ra(He);default:Ke.fF.assertNever(Xe)}}function Ra(fe){return fe%2==0?fe/2:Math.ceil(fe/2)}function Ma(fe,Xe){var He=(0,vt.RK)(fe,"subheader"),ht=Bt(),m=j.v.create(Xe),V=(0,P.Zi)(He,{family:"fontFamily",size:"fontSize",color:"fontColor",bold:"bold",italic:"italic",underline:"underline"},m,Xe,ht.ColorName,ht.TextClassName,{color:j.v.getThemeColor(Xe,ht.ColorName),size:Ae.B.createFromPt(ht.FontPointSize),family:ht.FontFamily,weight:Se.AI,style:Se.AI,textDecoration:Se.zu}),R={top:0,bottom:2,left:5,right:0},be=V.size.px+R.top+R.bottom,Fe=ht.Vertical,ke=ht.Horizontal,Me=ht.TitleWrap,at=ht.Show,nt=!1,pt=!1,bt=!1;if(He){switch(He.position){case qe.cL.top:Fe=0;break;case qe.cL.bottom:Fe=1}switch(He.alignment){case ge.D.left:ke=0;break;case ge.D.center:ke=1;break;case ge.D.right:ke=2}Me=He.titleWrap,void 0!==He.show&&(at=He.show),void 0!==He.bold&&(nt=He.bold),void 0!==He.italic&&(pt=He.italic),void 0!==He.underline&&(bt=He.underline)}return{fontProperties:V,show:at,height:be,margins:R,vertical:Fe,horizontal:ke,titleWrap:Me,labelBold:nt,labelItalic:pt,labelUnderline:bt}}var Bt=function(){return{FontFamily:et.Wn.regular.css,FontPointSize:8,ColorName:"foregroundNeutralSecondary",TextClassName:"title",Vertical:0,Horizontal:0,Show:!0,TitleWrap:!1,bold:!1,italic:!1,underline:!1}};function ia(){return{top:0,bottom:0,left:0,right:0}}function Ca(fe,Xe){var He=d3.select(fe.get(0)),ht=He.select("svg");ht.empty()&&((ht=He.append("svg")).classed(le,!0),ht.style("position","absolute"));var m=(0,F.EX)(ht);return Xe&&ht.attrs({width:Xe.width,height:Xe.height}),{element:ht,clearCatcher:m}}function Ta(fe,Xe){if(fe[0].objectName===xt.Xi){var He=rt.N_.smallMultiplesLayout.rowCount,ht=rt.N_.smallMultiplesLayout.columnCount,m=fe[0].propertyValue;if(fe[0].propertyName===He.propertyName){var V=da({rowCount:m,columnCount:Xe.columnCount});fe.push({objectName:ht.objectName,propertyName:ht.propertyName,propertyValue:Math.min(V.maxColumnCount,Xe.columnCount),propertyType:{integer:!0}})}else fe[0].propertyName===ht.propertyName&&(V=da({rowCount:Xe.rowCount,columnCount:m}),fe.push({objectName:He.objectName,propertyName:He.propertyName,propertyValue:Math.min(V.maxRowCount,Xe.rowCount),propertyType:{integer:!0}}))}return fe}function da(fe){return{maxRowCount:Math.floor(w/fe.columnCount),maxColumnCount:Math.floor(w/fe.rowCount)}}},25604:function(li,la,S){"use strict";S.r(la),S.d(la,{CartesianChart:function(){return d.CartesianChart},CartesianChartBehaviorFactory:function(){return We},ColumnChartAnimator:function(){return Ke},ColumnChartWebBehaviorFactory:function(){return vt},LineChartWebBehaviorFactory:function(){return lt},RealTimeLineChartAnimator:function(){return ne.RealTimeLineChartAnimator},ScatterChartMobileBehaviorFactory:function(){return ye},ScatterChartWebBehaviorFactory:function(){return me},WaterfallChartWebBehaviorFactory:function(){return Ce}});var d=S(63616),X=S(81337),ce=S(94478),Ge=S(3406),Ke=function(z){function L(E){var Q=z.call(this,E)||this;return Q.realTimeDashboard=!1,Q.realTimeDashboard=E?.realTimeDashboard||!1,Q}return(0,X.ZT)(L,z),L.prototype.animate=function(E){var Q,B,T,b,N=E.chart.activeData;if(N.categories.length*N.series.length>ce.dt)return this.returnFailed(N);if(!this.realTimeDashboard&&this.previousViewModel&&this.previousViewModel.categories.length!==N.categories.length)return this.returnFailed(N);var p=(0,Ge.Gm)(E.chart,E.series,N),k=p.newShapes,G=p.updatedShapes,ee=p.removedShapes;if(this.realTimeDashboard)this.previousViewModel&&((0,Ge.Ls)(this.transition(G),E.layout.shapeLayout,E),ee.remove());else if(!N.hasHighlights||null!==(Q=this.previousViewModel)&&void 0!==Q&&Q.hasHighlights)if(N.hasHighlights&&null!==(B=this.previousViewModel)&&void 0!==B&&B.hasHighlights)(0,Ge.Ls)(this.transition(G),E.layout.shapeLayout,E),ee.remove();else{if(N.hasHighlights||null===(T=this.previousViewModel)||void 0===T||!T.hasHighlights)return this.returnFailed(N);(0,Ge.Ls)(this.transition(G),E.layout.shapeLayout,E);var U=null!==(b=E.interactivityService)&&void 0!==b&&b.hasSelection()?E.layout.zeroShapeLayout:E.layout.shapeLayoutWithoutHighlights;(0,Ge.Ls)(this.transition(ee),U).remove()}else(0,Ge.Ls)(k,E.layout.shapeLayoutWithoutHighlights),(0,Ge.Ls)(this.transition(G),E.layout.shapeLayout,E),ee.remove();return this.previousViewModel=N,{failed:!1,shapes:G,uncertaintyShapes:Ge.WR.call(E.chart,E)}},L.prototype.returnFailed=function(E){return this.previousViewModel=E,{failed:!0}},L.prototype.getEasing=function(){return this.realTimeDashboard?d3.easeLinear:d3.easeCubic},L.prototype.transition=function(E){return E.transition().ease(this.getEasing()).duration(this.animationDuration)},L}(ce.r5),et=S(30237),Ht=S(62458),Pt=S(59107),Mt=S(11956),ft={rectangle:{name:"rectangle",directionMode:0},centerBasedRectangle:{name:"centerBasedRectangle",directionMode:1},edgeBasedRectangle:{name:"edgeBasedRectangle",directionMode:2}},We=function(){function z(L,E){this.behaviorFactories=L,this.featureSwitches=E}return z.prototype.create=function(){var L=this.behaviorFactories.map(function(E){return E.create()});return new kt(L,this.featureSwitches)},z}(),kt=function(){function z(L,E){this.behaviors=L}return z.prototype.bindEvents=function(L,E,Q,B){for(var T=this.behaviors,b=0,N=T.length;b<N;b++)T[b].bindEvents(L.layerOptions[b],E,Q,B);this.axesLayout=L.axesLayout,this.categorySubRangeCount=L.categorySubRangeCount,this.verticalCategoryAxis=L.verticalCategoryAxis,this.selectionHandler=E,L.clearCatcher.on("click",B?null:function(){(0,et.XM)(E)}),Q&&(Q.dataPointNavigationManager.isEmpty(Q.pointSourceKey)||this.registerFocusKeyHandler(L.root,L.layerOptions))},z.prototype.renderSelection=function(L){for(var E=0,Q=this.behaviors;E<Q.length;E++)Q[E].renderSelection(L)},z.prototype.renderFocus=function(L){for(var E=0,Q=this.behaviors;E<Q.length;E++)Q[E].renderFocus(L)},z.prototype.lassoSelectRect=function(L,E){var Q=[],B=this.getLassoSelectDirectionMode(),T=this.getScaledRegion(E,B);if(void 0!==B){for(var b=function(ee){if(ee.lassoSelectRectLayer&&ee.getLassoSelectDirectionMode){var U=z.getRectResultKeys(ee.getLassoSelectDirectionMode());Ht.fF.assert(function(){return 1===U.length},"Layers should not utilize selections from multiple rectangle types"),Q.push.apply(Q,ee.lassoSelectRectLayer(T[U[0]]))}},N=0,p=this.behaviors;N<p.length;N++)b(p[N]);(0,et.ct)(L,Q,this.selectionHandler)}else Ht.fF.assertFail("Lasso select was triggered on a cartesian visual but no layers supplied a direction mode")},z.prototype.getLassoSelectDirectionMode=function(){for(var L=[],E=function(N){if(N.getLassoSelectDirectionMode){var p=N.getLassoSelectDirectionMode();_.some(L,function(k){return k===p})||L.push(p)}},Q=0,B=this.behaviors;Q<B.length;Q++)E(B[Q]);if(0!==L.length)return 1===L.length?L[0]:3},z.getRectResultKeys=function(L){return 0===L?[ft.rectangle.name]:1===L?[ft.centerBasedRectangle.name]:2===L?[ft.edgeBasedRectangle.name]:[ft.centerBasedRectangle.name,ft.edgeBasedRectangle.name]},z.prototype.getScaledRegion=function(L,E){for(var B={},T=0,b=z.getRectResultKeys(E);T<b.length;T++){var N=b[T];B[N]={dataSpace:this.getScaledRegionInternal(L,ft[N].directionMode),pixelValue:L}}return B},z.prototype.getScaledRegionInternal=function(L,E){var Q=L.left-this.axesLayout.margin.left,B=L.top-this.axesLayout.margin.top,T=L.right-this.axesLayout.margin.left,b=L.bottom-this.axesLayout.margin.top,N=2===E?this.categorySubRangeCount:void 0,p=0===E||this.verticalCategoryAxis?0:-1,k=0===E||this.verticalCategoryAxis?0:1,G=0!==E&&this.verticalCategoryAxis?-1:0,ee=0!==E&&this.verticalCategoryAxis?1:0,U={left:this.axesLayout.axes.x.invertAxis?(0,Mt.invertScale)(this.axesLayout.axes.x.scale,T,k,E,N):(0,Mt.invertScale)(this.axesLayout.axes.x.scale,Q,p,E,N),top:this.axesLayout.axes.y1.invertAxis?(0,Mt.invertScale)(this.axesLayout.axes.y1.scale,b,ee,E,N):(0,Mt.invertScale)(this.axesLayout.axes.y1.scale,B,G,E,N),right:this.axesLayout.axes.x.invertAxis?(0,Mt.invertScale)(this.axesLayout.axes.x.scale,Q,p,E,N):(0,Mt.invertScale)(this.axesLayout.axes.x.scale,T,k,E,N),bottom:this.axesLayout.axes.y1.invertAxis?(0,Mt.invertScale)(this.axesLayout.axes.y1.scale,B,G,E,N):(0,Mt.invertScale)(this.axesLayout.axes.y1.scale,b,ee,E,N)};return this.axesLayout.axes.y2&&_.assign(U,{top2:this.axesLayout.axes.y2.invertAxis?(0,Mt.invertScale)(this.axesLayout.axes.y2.scale,b,ee,E,N):(0,Mt.invertScale)(this.axesLayout.axes.y2.scale,B,G,E,N),bottom2:this.axesLayout.axes.y2.invertAxis?(0,Mt.invertScale)(this.axesLayout.axes.y2.scale,B,G,E,N):(0,Mt.invertScale)(this.axesLayout.axes.y2.scale,b,ee,E,N)}),U},z.prototype.registerFocusKeyHandler=function(L,E){L.on("keydown.cartesian",function(){var Q=d3.event;if(27===Q.keyCode&&_.some(E,function(N){return $.contains(N.root.node(),Q.target)})){Q.preventDefault(),Q.stopPropagation();var b=_.find(E,function(N){return $(N.root.node()).is(":tabbable")});Pt.M.focus(b.root.node())}})},z}(),rt=S(66232),xt=S(60066),Ot=S(58691),j=S(65195),vt=function(){function z(){}return z.prototype.create=function(){return new At},z}(),At=function(){function z(){}return z.prototype.bindEvents=function(L,E,Q,B){var T=this;this.options=L,this.hitTester=L.hitTester;var b=L.columnChartDrawInfo.eventGroup,N=L.root;if(B)b&&(b.on(j.G6,null),b.on("keydown.select",null),et.Ku(b)),et.FO(N);else{if(Q){var p=Q.dataPointNavigationManager,k=Q.pointSourceKey;p.isEmpty(k)||(et.zV(N,L.visualInstanceId,k),et.W3(N,p,k),et.I8(N,p,k),et.lt(N,E))}b.on(j.G6,function(){return T.handleSelection(E)}).on("keydown.select",function(){var ee=d3.event.keyCode;(32===ee||13===ee)&&T.handleSelection(E)},!0),b.on("contextmenu",function(){var G=d3.event;if(!Pt.M.isCtrlOrMeta(G)){G.preventDefault(),(0,rt.n)(G);var ee=et.bt();et.kW(function(U){return E.handleContextMenu(U,ee)})}})}},z.prototype.renderSelection=function(L){var E,Q=this.options,B=Q.columnChartDrawInfo;null===(E=Q.ribbonSeriesSelection)||void 0===E||E.style("fill-opacity",function(T){return(0,Ge.vA)(T.ribbonBands,L)}).style("stroke-opacity",function(T){return Ge.mM.opacity(T.ribbonBands.border,Q.style,L)}),(0,Ge.pM)(B.shapesSelection,L,Q.hasHighlights,Q.style),(0,Ot.f)(B.uncertaintyShapes,L,Q.hasHighlights)},z.prototype.renderFocus=function(L){var E="".concat(xt.aY,"-").concat(this.options.visualInstanceId);if(this.options.root.select("#".concat(E)).attr("id",null),L){L.setAttribute("id",E);var Q=this.options.root.select("#".concat(E));Q.empty()||(Q.attr("aria-label",function(B){return B.formattedTooltip}),Pt.M.focus(L))}},z.prototype.lassoSelectRectLayer=function(L){return this.hitTester.queryRegion(L)},z.prototype.getLassoSelectDirectionMode=function(){return 2},z.prototype.handleSelection=function(L){et.kW(function(E){return et.c8(E,L)},!this.options.useManagedTabIndex)},z}(),Ue=S(42589),Oe=S(63194),P=S(72902),Ae=S(64067),lt=function(){function z(){}return z.prototype.create=function(){return new Se},z}(),Se=function(){function z(){}return z.prototype.bindEvents=function(L,E,Q,B){var T=this,b=L.areas,N=L.focusMarker,p=L.interactivityLines,k=L.root,G=L.hoverLineTooltipOverlay,ee=this.dots=L.dots,U=L.onSelecting;this.anomalies=L.anomalies,this.anomalyNavigationHelper=L.anomalyNavigationHelper,this.selectedMarkersCallback=L.selectedMarkersCallback,this.hitTester=L.hitTester;var Z=function(v){return T.getPointX(v)};if(B?(this.unbindEventsFormatMode(L),p.on(j.G6,function(f){F(L,Z(this),f,E.getSubSelectionHelper(),!1)}),p.on("contextmenu",function(f){F(L,Z(this),f,E.getSubSelectionHelper(),!0)}),ee.on(j.G6,function(){var f=d3.select(this.parentNode).datum();C(L,f,E.getSubSelectionHelper(),!1)}),ee.on("contextmenu",function(){var f=d3.select(this.parentNode).datum();C(L,f,E.getSubSelectionHelper(),!0)}),b.on("pointermove",function(){!function(z){z.onAreaPointerMove(d3.event),(0,rt.n)(d3.event)}(L)})):(p.on(j.G6,function(f){!function(z,L,E,Q){var B=z.getCategoryIndex(Q,E,!0),T=_.find(Q.data,function(b){return b&&b.categoryIndex===B});T||(T={selected:Q.selected,identity:Q.identity,specificIdentity:z.categoryIdentities[B]}),et.c8(T,L)}(L,E,Z(this),f)}),p.on("contextmenu",function(f){!function(z,L,E,Q){if(!Pt.M.isCtrlOrMeta(d3.event)){d3.event.preventDefault(),(0,rt.n)(d3.event);var B=et.bt(),T=z.getCategoryIndex(Q,E,!0),b=_.find(Q.data,function(N){return N&&N.categoryIndex===T});b||(b={selected:Q.selected,identity:Q.identity,specificIdentity:z.categoryIdentities[T]}),L.handleContextMenu(b,B)}}(L,E,Z(this),f)}),et.a0(ee,E),et.lt(k,E),N&&(N.on(j.G6,function(f){var v=et.Xt(f)?f.data:f;et.c8(v,E)}),N.on("keydown.select",function(f){var v=d3.event,H=v.keyCode;if(32===H||13===H){if(z.isAnomaly(f)){var K=T.anomalies.filter(function(_e){return _e.isAnomaly&&_e===f});(0,Ue.rr)(K.node(),f,U)}else{var Re=et.Xt(f)?f.data:f;et.c8(Re,E)}v.preventDefault(),v.stopPropagation()}},!0),et.OW(N,E)),G&&L.isHoverLineTooltipActive&&(G.style("pointer-events","all"),_.isEmpty(L.categoryIdentities)?G.on(j.G6,function(){Pt.M.isCtrlOrMeta(d3.event)||E.handleClearSelection()}):(G.on(j.G6,function(){var f=L.getCategoryIndex(void 0,Z(this),!1);et.c8({selected:!1,identity:void 0,specificIdentity:L.categoryIdentities[f]},E)}),G.on("contextmenu",function(){var f=d3.event;if(!Pt.M.isCtrlOrMeta(f)){f.preventDefault(),(0,rt.n)(f);var v=et.bt(),H=L.getCategoryIndex(void 0,Z(this),!1);E.handleContextMenu({selected:!1,identity:void 0,specificIdentity:L.categoryIdentities[H]},v)}})))),Q){var Pe=Q.dataPointNavigationManager,je=Q.pointSourceKey;Pe.isEmpty(je)||(("0"===k.attr("tabindex")||k.classed(Oe.rG.class))&&this.registerEnterPlotAreaHandler(k,Pe,je),N&&this.registerDataPointNavigationHandler(N,Pe,je))}},z.prototype.unbindEventsFormatMode=function(L){var E=L.dots,Q=L.focusMarker,B=L.hoverLineTooltipOverlay;Q&&(Q.on(j.G6,null),Q.on("keydown.select",null),et.Ku(Q)),B&&(B.style("pointer-events","none"),et.lq(B)),et.FO(E)},z.prototype.registerEnterPlotAreaHandler=function(L,E,Q){var B=this;L.on("keydown.enterPlotArea",function(){var T=d3.event,b=T.keyCode;if(b===j.Of.F1&&T.ctrlKey){T.preventDefault(),T.stopPropagation();var N=B.anomalyNavigationHelper.getFirstElement(0);N&&B.renderFocus(N.element)}else 13===b&&(T.preventDefault(),T.stopPropagation(),E.goToFirstElement(Q))})},z.prototype.registerDataPointNavigationHandler=function(L,E,Q){var B=this;L.on("keydown.dataPoint",function(){var T=d3.event,b=T.keyCode;(9===b||37===b||39===b||38===b||40===b||b===j.Of.F1&&Pt.M.isCtrlOrMeta(T))&&et.kW(function(N){T.preventDefault(),T.stopPropagation();var p=et.A$(N)?N.data:N;if(z.isAnomaly(p))B.handleAnomalyKeyDownEvent(p.categoryIndex,p.seriesIndex,b,Pt.M.isCtrlOrMeta(T),E,Q);else if(b===j.Of.F1&&Pt.M.isCtrlOrMeta(T)){var k=B.anomalyNavigationHelper.getFirstElement(p.categoryIndex);k&&B.renderFocus(k.element)}else E.handleKeyDownEvent(Q,p.categoryIndex,p.seriesIndex,b,T.shiftKey);d3.select(document.activeElement).dispatch("moveToolTipWithKeyboardAction",{bubbles:!0,cancelable:!1,detail:void 0})},void 0)},!0)},z.isAnomaly=function(L){return L.isAnomaly},z.prototype.handleAnomalyKeyDownEvent=function(L,E,Q,B,T,b){var N;switch(Q){case 37:return N=this.anomalyNavigationHelper.getNextDataPoint(L,E,P.x0.PreviousCategory),void this.renderFocus(N.element);case 39:return N=this.anomalyNavigationHelper.getNextDataPoint(L,E,P.x0.NextCategory),void this.renderFocus(N.element);case j.Of.F1:return void(B&&(L>0?T.handleKeyDownEvent(b,L-1,E,39,!1):T.goToFirstElement(b)));default:return}},z.prototype.renderSelection=function(L){var E;this.dots.style("fill-opacity",function(Q){return Q.marker.show?0:(0,xt.eR)(Q.selected,!1,L,!1,(0,Ae.TD)(Q.marker.transparency))}),null===(E=this.selectedMarkersCallback)||void 0===E||E.call(this,L)},z.prototype.renderFocus=function(L){L&&Pt.M.focus(L)},z.prototype.lassoSelectRectLayer=function(L){return this.hitTester.queryRegion(L)},z.prototype.getLassoSelectDirectionMode=function(){return 1},z.prototype.getPointX=function(L){for(var Q,E=d3.event;Q=E.sourceEvent;)E=Q;var B=L.getBoundingClientRect();return E.clientX-B.left-L.clientLeft},z}();function F(z,L,E,Q,B){z.onLineSubSelection(E,L,Q,d3.event,B),(0,rt.n)(d3.event)}function C(z,L,E,Q){z.onDotSubSelection(L,E,d3.event,Q),(0,rt.n)(d3.event)}var ne=S(62494),ze=S(14577),De=S(38400),Be=S(79811),ae=S(79154),ve=S(38078),se=S(72489),w=S(26543),le=S(56914),Y=S(61193),me=function(){function z(){}return z.prototype.create=function(){return new Le},z}(),Le=function(){function z(){}return z.prototype.bindEvents=function(L,E,Q,B){var T,b,N;null!==(T=L.playOptions)&&void 0!==T&&T.traceLineRenderer||null===(N=null===(b=this.playOptions)||void 0===b?void 0:b.traceLineRenderer)||void 0===N||N.remove();var p=L.data,k=L.eventGroup,G=L.dataPointsSelection,ee=L.visualInstanceId;this.bubbles=L.dataPointsSelection,this.playOptions=L.playOptions,this.shouldEnableFill=L.fillMarkers,this.colorBorder=p.colorBorder,this.hitTester=L.hitTester;var Z,Pe,U=this.rootSelection=L.root;this.visualInstanceId=L.visualInstanceId,Q&&(Z=Q.dataPointNavigationManager,Pe=Q.pointSourceKey),et.zV(U,ee,Pe),this.selectionHandler=E,B?(k?et.FW(L.eventManager,k):et.FO(G),G.on("contextmenu",function(je){var f=d3.event;L.onMarkerSubSelection(this,je,E.getSubSelectionHelper(),f,!0),(0,rt.n)(f)}).on("click",function(je){var f=d3.event;L.onMarkerSubSelection(this,je,E.getSubSelectionHelper(),f,!1),(0,rt.n)(f)})):k?et.US(L.eventManager,k,E):et.a0(G,E),Z&&(Z.isEmpty(Pe)||(et.W3(U,Z,Pe),et.I8(U,Z,Pe),et.lt(U,E)))},z.prototype.renderSelection=function(L){var E=this;if(this.bubbles.styles({"fill-opacity":function(b){return le.WG.getMarkerFillOpacity(null!=b.marker.size,E.shouldEnableFill,L,b.selected)},"stroke-opacity":function(b){return le.WG.getMarkerStrokeOpacity(null!=b.marker.size,E.colorBorder,L,b.selected)}}),this.playOptions&&this.bubbles){var Q=this.bubbles.filter(function(T){return T.selected}).data(),B=this.playOptions.traceLineRenderer;Q&&Q.length>0&&null!=B?B.render(Q,!0):B.remove()}},z.prototype.renderFocus=function(L){var E="".concat(xt.aY,"-").concat(this.visualInstanceId);if(this.rootSelection.select("#".concat(E)).attr("id",null),L){this.bubbles.attr("aria-label",null);var Q=d3.select(L).datum();Q&&L.setAttribute("aria-label",(0,De.X)(Q.tooltipInfo())),L.setAttribute("id",E),Pt.M.focus(L)}},z.prototype.lassoSelectRectLayer=function(L){return this.hitTester.queryRegion(L)},z.prototype.getLassoSelectDirectionMode=function(){return 1},z}(),ye=function(){function z(){}return z.prototype.create=function(){return new oe},z}(),oe=function(){function z(){}return z.prototype.bindEvents=function(L,E,Q){this.setOptions(L),L.visualDataInitOptions&&L.visualDataInitOptions.interactivity.mobileTileInteractive&&(this.makeDataPointsSelectable(L.dataPointsSelection),this.makeRootSelectable(L.mobileRoot),this.makeDragable(L.mobileRoot),this.disableDefaultTouchInteractions(L.mobileRoot),this.selectRoot())},z.prototype.renderSelection=function(L){},z.prototype.setSelectionHandler=function(L){},z.prototype.makeDataPointsSelectable=function(){for(var L=this,E=[],Q=0;Q<arguments.length;Q++)E[Q]=arguments[Q];for(var B=0,T=E.length;B<T;B++)E[B].on("click",function(N,p){L.select(p)})},z.prototype.makeRootSelectable=function(L){var E=this;L.on("click",function(){return E.selectRoot()})},z.prototype.makeDragable=function(){for(var L=this,E=[],Q=0;Q<arguments.length;Q++)E[Q]=arguments[Q];for(var B=0,T=E.length;B<T;B++){var b=E[B],N=d3.drag().on("drag",function(){L.drag(0)}).on("end",function(){L.drag(1)});b.call(N)}},z.prototype.disableDefaultTouchInteractions=function(L){L.style("touch-action","none")},z.prototype.setOptions=function(L){this.data=L.data,this.mainGraphicsContext=L.root,this.xAxisProperties=L.xAxisProperties,this.yAxisProperties=L.yAxisProperties,this.host=L.host},z.prototype.select=function(L){this.selectDotByIndex(L)},z.prototype.selectRoot=function(){var L=(0,ve.BL)("selectRoot");this.onClick(),L()},z.prototype.drag=function(L){switch(L){case 0:this.onDrag();break;case 1:this.onClick();break;default:Ht.fF.assertFail("Unknown Drag Type")}},z.prototype.onDrag=function(){var L=this.getMouseCoordinates();this.moveCrosshairToXY(L.x,L.y);var E=this.findClosestDotIndex(L.x,L.y);this.selectDot(E),this.updateLegend(E)},z.prototype.onClick=function(){var L=this.getMouseCoordinates(),E=this.findClosestDotIndex(L.x,L.y);-1!==E&&this.selectDotByIndex(E)},z.prototype.getMouseCoordinates=function(){var L=this.mainGraphicsContext,E=0,Q=parseInt(L.attr("height"),10);Q=Q||0;try{var B=d3.mouse(L.node());E=B[0],Q=B[1]}catch{}return{x:E,y:Q}},z.prototype.selectDotByIndex=function(L){this.selectDot(L),this.moveCrosshairToIndexDot(L),this.updateLegend(L)},z.prototype.selectDot=function(L){var E=this,Q=this.mainGraphicsContext;Q.selectAll(z.ScatterMarker.selector).classed("selected",!1).classed("notSelected",!0),Q.selectAll(z.ScatterMarker.selector).filter(function(B){var T=E.data.dataPoints;Ht.fF.assert(function(){return T.length>L},"dataPoints length:".concat(T.length,"is smaller than index:").concat(L));var b=T[L];return B.x===b.x&&B.y===b.y}).classed("selected",!0).classed("notSelected",!1)},z.prototype.moveCrosshairToIndexDot=function(L){var E=this.data.dataPoints,Q=this.mainGraphicsContext;Ht.fF.assert(function(){return E.length>L},"dataPoints length:".concat(E.length,"is smaller than index:").concat(L));var B=this.xAxisProperties.scale(E[L].x),T=this.yAxisProperties.scale(E[L].y);if(null==this.crosshair){var b=+Q.attr("width"),N=+Q.attr("height");this.crosshair=this.drawCrosshair(Q,B,T,b,N),this.crosshairHorizontal=this.crosshair.select(z.Horizontal.selector),this.crosshairVertical=this.crosshair.select(z.Vertical.selector)}else this.moveCrosshairToXY(B,T)},z.prototype.moveCrosshairToXY=function(L,E){this.crosshairHorizontal.attrs({y1:E,y2:E}),this.crosshairVertical.attrs({x1:L,x2:L})},z.prototype.drawCrosshair=function(L,E,Q,B,T){var b=L.append("g");return b.classed(z.CrosshairClassName,!0),b.append("line").classed(z.Horizontal.class,!0).attrs({x1:0,x2:B,y1:Q,y2:Q}),b.append("line").classed(z.Vertical.class,!0).attrs({x1:E,x2:E,y1:T,y2:0}),b},z.prototype.findClosestDotIndex=function(L,E){var Q=-1,B=Number.MAX_VALUE,T=this.data.dataPoints,b=this.xAxisProperties.scale,N=this.yAxisProperties.scale;for(var p in T){var k=T[p],U=b(k.x)-L,Z=N(k.y)-E,Pe=U*U+Z*Z;(B===Number.MAX_VALUE||B&&B>Pe)&&(Q=p,B=Pe)}return Q},z.prototype.updateLegend=function(L){if(null==this.lastDotIndex||this.lastDotIndex!==L){var E=this.createLegendDataPoints(L);this.host.updateLegend(E),this.lastDotIndex=L}},z.prototype.createLegendDataPoints=function(L){var E=ze.il.general.formatString,Q=[],B=this.data;Ht.fF.assert(function(){return B.dataPoints.length>L},"dataPoints length:".concat(B.dataPoints.length,"is smaller than index:").concat(L));var T=B.dataPoints[L],b=(0,se.WU)(null),N=b,p=B.legendData;Ht.fF.assertValue(p,"legendData"),Ht.fF.assertValue(p.dataPoints,"legendData");var k=p.dataPoints,G=T.formattedCategory.getValue();G!==b?(N=G,T.sourceGroupName&&(N+="; ".concat((0,se.WU)(T.sourceGroupName)))):T.sourceGroupName?N=(0,se.WU)(T.sourceGroupName):k.length>0&&k.length>=L&&k[L].label!==b&&(N=k[L].label);var ee={show:!0,color:T.marker.color,shape:Y.ZO.circle};null!=B.xCol&&Q.push({category:N,marker:ee,identity:w.dw.builder().withMeasure(B.xCol.queryName).createSelectionId(),selected:T.selected,label:(0,se.WU)(this.data.axesLabels.x),measure:(0,se.WU)(T.x,(0,se.EO)(B.xCol,E)),iconOnlyOnLabel:!0,index:0}),null!=B.yCol&&Q.push({category:N,marker:ee,identity:w.dw.builder().withMeasure(B.yCol.queryName).createSelectionId(),selected:T.selected,label:(0,se.WU)(B.axesLabels.y),measure:(0,se.WU)(T.y,(0,se.EO)(B.yCol,E)),iconOnlyOnLabel:!0,index:1}),null!=B.size&&Q.push({category:N,marker:ee,identity:w.dw.builder().withMeasure(B.size.queryName).createSelectionId(),selected:T.selected,label:(0,se.WU)(B.size.displayName),measure:(0,se.WU)(T.radius,(0,se.EO)(B.size,E)),iconOnlyOnLabel:!0,index:2});var U=(0,Be.Fe)();return U.dataPoints=Q,U},z.CrosshairClassName="crosshair",z.ScatterMarker=(0,ae.CH)("scatterMarker"),z.Horizontal=(0,ae.CH)("horizontal"),z.Vertical=(0,ae.CH)("vertical"),z}(),Ce=function(){function z(){}return z.prototype.create=function(){return new de},z}(),de=function(){function z(){}return z.prototype.bindEvents=function(L,E,Q){var B=this,T=this.bars=L.bars,N=L.root;if(L.formatMode)T&&(T.on(j.G6,null),T.on("keydown.select",null),et.Ku(T)),et.FO(N);else{if(Q){var p=Q.dataPointNavigationManager,k=Q.pointSourceKey;if(!p.isEmpty(k)){var G=L.root;et.W3(G,p,k),et.I8(G,p,k),et.lt(G,E)}}T.on(j.G6,function(ee){return B.handleSelection(ee,E,L.isBreakdown)}).on("keydown",function(ee){var U=d3.event,Z=U.keyCode;(32===Z||13===Z)&&(U.preventDefault(),U.stopPropagation(),B.handleSelection(ee,E,L.isBreakdown))}),T.on("contextmenu",function(ee){var U=d3.event;if(!Pt.M.isCtrlOrMeta(U)&&(U.preventDefault(),(0,rt.n)(U),1!==ee.barType)){var Z=et.bt();E.handleContextMenu(ee,Z)}})}},z.prototype.renderSelection=function(L){this.bars.attr("aria-selected",function(E){return E.selected}).style("fill-opacity",function(E){return 1===E.barType?xt.Ko:(0,xt.eR)(E.selected,E.highlight,L,!1)}).style("stroke-opacity",function(E){return 1===E.barType?xt.Ko:(0,xt.eR)(E.selected,E.highlight,L,!1)})},z.prototype.renderFocus=function(L){L&&Pt.M.focus(L)},z.prototype.handleSelection=function(L,E,Q){if(1!==L.barType){var T,B=et.bt();T=Q?0:(0,Pt.D)(d3.event),E.handleSelection(L,T,B)}},z}()},3406:function(li,la,S){"use strict";S.d(la,{mM:function(){return ge},bk:function(){return Se},Wv:function(){return ne},hJ:function(){return se},kC:function(){return qe},WR:function(){return ze},vA:function(){return ve},sY:function(){return Ae},Gm:function(){return F},rT:function(){return De},Ls:function(){return C},pM:function(){return q}});var d=S(72902),X=S(51995),ce=S(60066),Ge=S(52287),Ke=S(58691),et=S(34021),Ht=S(10389),Pt=S(79154),Mt=S(59107),ft=S(62458),We=S(64067),kt=S(26543),rt=S(34969),xt=S(38859),Ot=S(80758),j=S(11956),vt=function(){function w(le){ft.fF.assert(function(){return le.columnWidth>0},"Columns should have a width"),ft.fF.assert(function(){return le.categoryWidth>0},"Categories should have a width"),this.categoryAxisScale=le.categoryAxisScale,this.categoryWidth=le.categoryWidth,this.columnWidth=le.columnWidth,this.dataPoints=le.dataPoints,this.hasCategories=le.hasCategories,this.isBar=le.isBar,this.isClustered=le.isClustered,this.isScalar=le.isScalar,this.seriesLength=le.seriesLength}return w.prototype.queryRegion=function(le){var ye,oe,Ce,de,Y=this,me=[],Le=le.dataSpace;return(this.isScalar||this.hasCategories&&!_.some([Le.bottom,Le.left,Le.right,Le.top],function(z){return void 0===z}))&&(this.isBar?(this.isScalar?(ye=Le.bottom.value,oe=Le.top.value):(ye=this.getAdjustedCategoryIndex(Le.top.value,Le.top.seriesIndex,this.seriesLength),oe=this.getAdjustedCategoryIndex(Le.bottom.value,Le.bottom.seriesIndex,this.seriesLength)),Ce=Le.left.value,de=Le.right.value):(this.isScalar?(ye=Le.left.value,oe=Le.right.value):(ye=this.getAdjustedCategoryIndex(Le.left.value,Le.left.seriesIndex,this.seriesLength),oe=this.getAdjustedCategoryIndex(Le.right.value,Le.right.seriesIndex,this.seriesLength)),Ce=Le.bottom.value,de=Le.top.value),me=_.filter(this.dataPoints,function(z){return 0!==z.valueAbsolute&&ye<=oe&&Ce<=de&&(0,Ot.WN)(ye,oe,Y.getAreaCategoryBound(z,!1),Y.getAreaCategoryBound(z,!0))&&(0,Ot.WN)(Ce,de,Y.getAreaValueLowerBound(z),Y.getAreaValueUpperBound(z))})),me},w.prototype.getAreaValueLowerBound=function(le){return this.isClustered?Math.min(0,le.value):le.position-le.valueAbsolute},w.prototype.getAreaValueUpperBound=function(le){return this.isClustered?Math.max(0,le.value):le.position},w.prototype.getAreaCategoryBound=function(le,Y){if(this.isScalar){this.isBar&&(Y=!Y);var me=Y?this.columnWidth:0,Le=this.isClustered?le.seriesIndex:0,ye=this.categoryAxisScale(le.categoryValue)-this.categoryWidth/2;return(0,j.invertScale)(this.categoryAxisScale,ye+Le*this.columnWidth+me,0,0,void 0).value}return this.getAdjustedCategoryIndex(le.categoryIndex,le.seriesIndex,this.seriesLength)},w.prototype.getAdjustedCategoryIndex=function(le,Y,me){return this.isClustered?(ft.fF.assert(function(){return void 0!==Y},"Series index should be present when getting adjusted category index for a clustered chart."),le*me+Y):le},w}(),At=(0,Pt.CH)("ribbonChartLayer"),Ue=(0,Pt.CH)("ribbonChartDefs"),Oe=(0,Pt.CH)("ribbonChartSeries"),P=(0,Pt.CH)("ribbonChartDataPoint");function Ae(w,le){var Y=this,me=this.drawColumns(!w),Le=this.data,ye=this.xAxisProperties.isCategoryAxis&&0===this.xAxisProperties.innerPaddingRatio||this.yAxisProperties.isCategoryAxis&&0===this.yAxisProperties.innerPaddingRatio;this.mainGraphicsContext.attr("height",this.availableHeight).attr("width",this.availableWidth).classed("withCrispEdges",ye);var oe=function(){return Y.mainGraphicsContext.selectAll(P.selector)};this.tooltipsEnabled&&!le?(this.tooltipService.addTooltip(me.eventGroup,function(B){var T;return null===(T=B.data)||void 0===T?void 0:T.tooltipInfo},function(B){var T;return(null===(T=B.data)||void 0===T?void 0:T.identity)&&[B.data.identity]}),this.hasRibbonBands&&this.tooltipService.addTooltip(oe(),function(B){var T;return null===(T=B.data)||void 0===T?void 0:T.tooltipInfo},function(){return[kt.l0.createNull()]})):(this.tooltipService.removeTooltips(me.eventGroup),this.hasRibbonBands&&this.tooltipService.removeTooltips(oe()));var de,z,Ce=[];if(this.interactivityService){for(var L=0,E=Le.series;L<E.length;L++)Ce=Ce.concat(E[L].data);de={datapoints:Ce,columnChartDrawInfo:me,hasHighlights:Le.hasHighlights,root:this.mainGraphicsContext,showLabel:Le.dataLabelsSettings.show,visualInstanceId:this.hostService.instanceId,hitTester:new vt({dataPoints:Ce,isScalar:Le.isScalar,hasCategories:!!Le.categoryIdentities&&Le.categoryIdentities.length>0,isBar:this.isBar,isClustered:this.isClustered,categoryAxisScale:this.categoryAxis.scale,columnWidth:this.columnWidth,categoryWidth:this.categoryWidth,seriesLength:Le.series.length}),useManagedTabIndex:this.useManagedTabIndex,ribbonSeriesSelection:this.mainGraphicsContext.selectAll(Oe.selector),style:this.style},z={navigationStrategy:Le.series.length>1?d.jN.CategoryFirst:d.jN.CategoryOnly,helper:this}}return this.isMobileInteractiveLegend()&&lt.call(this,!0),(0,Ht.bL)(this.animationOptions),{dataPoints:Ce,behaviorOptions:de,navigationOptions:z,labelDataPoints:[],labelDataPointGroups:me.labelDataPointGroups,labelsAreNumeric:!0,labelOrientation:Le.dataLabelsSettings.labelOrientation,animateLabels:me.animateLabels,categorySubRangeCount:this.isClustered?this.data.series.length:1,verticalCategoryAxis:this.isBar}}function lt(w){void 0===w&&(w=!1);var Y=void 0===this.lastInteractiveSelectedColumnIndex?(0,rt.Pg)(this.data.series):this.lastInteractiveSelectedColumnIndex;this.selectColumn(Y,w)}function Se(w,le){ft.fF.assertValue(w,"columns"),le&&w.attr("draggable","true").on("dragstart",le)}function qe(){var w=this;(0,et.H4)(this.mainGraphicsContext,this.data.strokeSettings);var le=this.mainGraphicsContext.selectAll(xt.L0.selector);if(this.usesUngroupedRenderer()){var Y=_.flatten(this.activeData.series.map(function(me){return me.data}));return Y.sort(function(me,Le){var ye=(me.highlight?1:0)-(Le.highlight?1:0);if(ye)return ye;var oe=me.seriesPosition-Le.seriesPosition;return w.activeData.layout.clusteredGapOverlapReverse&&(oe*=-1),oe}),le.data([{data:Y}],function(me){return"*"}).join(function(me){return me.append("g").classed(xt.L0.class,!0)})}return le.data(this.activeData.series,function(me){return me.key}).join(function(me){return me.append("g").classed(xt.L0.class,!0)}).styles({fill:function(Le){return Le.columnStyle.fillColor},"stroke-width":function(Le){return ge.size(Le.columnStyle.border,w.style)},stroke:function(Le){return ge.color(Le.columnStyle.border,w.style)}}).attr("role","listbox").attr("aria-label",function(me){return me.displayName})}var ge={opacity:function(le,Y,me){return(0,We.TD)(Y.isHighContrast?0:le.strokeTransparency)*(me?ce.eU:1)},size:function(le,Y){return Y.isHighContrast?null:le.strokeShow?2*le.strokeWidth:0},color:function(le,Y){return Y.isHighContrast?null:le.strokeColor},optimized:function(le,Y){return le===Y?null:le},rectClipPath:function(le,Y,me){var Le;return null!==(Le=le.columnStyle.border)&&void 0!==Le&&Le.strokeShow&&!Y.isHighContrast?"".concat(me?"fill-box ":"","inset(0px)"):null},strokePattern:function(le,Y,me,Le){var ye;if(null===(ye=le.columnStyle.border)||void 0===ye||!ye.outlineOnly||le.highlight)return null;var oe=me?[!1,!0,!1,!0]:[!0,!1,!0,!1],Ce=oe[0],de=oe[1],z=oe[2],L=oe[3],E=function(){me?Ce=!0:de=!0},Q=function(){me?z=!0:L=!0};le.indexFromBottom===le.countOfPointsInCategory-1?Le?Q():E():0===le.indexFromBottom&&(Le?E():Q());var B=Y.shapeLayout.width(le),T=Y.shapeLayout.height(le),b="",N=function(k,G){b+=k?"".concat(G," 0 "):"0 ".concat(G," ")};return N(Ce,B),N(de,T),N(z,B),N(L,T),b}};function F(w,le,Y,me){void 0===me&&(me=!1);var Le=le.selectAll(w.CS.selector).data(function(oe){return me?_.filter(oe.data,function(Ce){return!!Ce.value}):oe.data},function(oe){return oe.key}),ye=Le.enter().append("rect").classed(w.CS.class,!0).classed("highlight",function(oe){return!!oe.highlight}).styles({"clip-path":function(Ce){return ge.rectClipPath(Ce,w.style,!1)},"-webkit-clip-path":function(Ce){return ge.rectClipPath(Ce,w.style,!0)}});return w.featureSwitches.onObject&&ye.classed(Ge.cy,!0).attr(Ge.Ez,"columns").attr(Ge.QZ,3).each(function(oe,Ce,de){Ge.O5.setDataForElement(de[Ce],{outlineRestrictionOptions:{margin:w.scaledMargin},getDisplayName:function(){return w.hostService.getLocalizedString(w.isBar?"MiniToolbar_Bars":"MiniToolbar_Columns",Y.series[oe.seriesIndex].displayName)}})}),{newShapes:ye,updatedShapes:Le.merge(ye).style("fill",function(oe){return oe.columnStyle.fillColor!==Y.series[oe.seriesIndex].columnStyle.fillColor||w.usesUngroupedRenderer()?oe.columnStyle.fillColor:null}).attr("aria-hidden",function(oe){return!!oe.highlight||null}).order(),removedShapes:Le.exit()}}function C(w,le,Y){return w.attrs({width:le.width,height:le.height,x:le.x,y:le.y}).styles({"fill-opacity":Y?function(me){var Le;return Be(me,null===(Le=Y.interactivityService)||void 0===Le?void 0:Le.hasSelection(),Y.chart.activeData.hasHighlights)}:0,"stroke-opacity":Y?function(me){var Le;return ge.opacity(me.columnStyle.border,Y.chart.style,(Y.chart.activeData.hasHighlights||(null===(Le=Y.interactivityService)||void 0===Le?void 0:Le.hasSelection()))&&!me.highlight)}:0})}function q(w,le,Y,me){return w.attr("aria-selected",function(Le){return Le.selected}).style("fill-opacity",function(Le){return Be(Le,le,Y)}).style("stroke-opacity",function(Le){return ge.opacity(Le.columnStyle.border,me,(le||Y)&&!Le.selected)})}function ne(w){var le=this,Y=this.activeData,me=this.style,Le=F(this,w,Y,!this.animator),ye=Le.updatedShapes,oe=Le.removedShapes;return ye.interrupt(),this.interactivityService&&ye.attrs({tabindex:0,focusable:!0,role:"option","aria-selected":function(de){return de.selected},"aria-label":function(de){return null!=de.value?de.value:"null"},"data-automation-type":"column-chart-rect"}).classed(ce.Pg,!Mt.M.isInternetExplorerOrEdge()),this.usesUngroupedRenderer()?ye.styles({"stroke-width":function(de){return ge.size(de.columnStyle.border,me)},stroke:function(de){return ge.color(de.columnStyle.border,me)},fill:function(de){return Y.series[de.seriesIndex].columnStyle.fillColor}}):ye.styles({"stroke-width":function(de){return ge.optimized(ge.size(de.columnStyle.border,me),ge.size(Y.series[de.seriesIndex].columnStyle.border,me))},stroke:function(de){return ge.optimized(ge.color(de.columnStyle.border,me),ge.color(Y.series[de.seriesIndex].columnStyle.border,me))}}),ye.styles({"stroke-dasharray":function(de){return ge.strokePattern(de,le.layout,le.isColumn,le.valueAxis.invertAxis)},"clip-path":function(de){return ge.rectClipPath(de,me,!1)},"-webkit-clip-path":function(de){return ge.rectClipPath(de,me,!0)}}).attrs({"aria-setsize":Y.dataPointsCount,"aria-posinset":function(de){return de.posinset}}),C(ye,this.layout.shapeLayout,{chart:this,interactivityService:this.interactivityService}),oe.remove(),ye}function ze(w){var z,L,E,Q,B,le=w.isBar,Y=w.valueAxisProps,me=w.layout,Le=w.columnWidth,ye=w.interactivityService,oe=this.activeData,de=oe.hasHighlights;if(void 0!==Y&&(L=_.filter(oe.series,function(_e){return _e.uncertainty.renderUncertainty}),z=!_.isEmpty(L)),z){var G,ee,U,T=ye?.hasSelection(),b=Le/2,N=Y.scale.range(),p=Y.scale,k=void 0;if(le){var Z=function(Ve){return me.shapeLayout.y(Ve)+b-(Ve.drawThinner?b/2:0)};k=function(Ve){return"translate(".concat(p(Ve.value),", ").concat(Z(Ve),")")},G=d3.line().x(me.uncertaintyLayout.lower).y(Z),ee=d3.line().x(me.uncertaintyLayout.upper).y(Z),U=N[1]<N[0]}else{var Pe=function(Ve){return me.shapeLayout.x(Ve)+b-(Ve.drawThinner?b/2:0)};k=function(Ve){return"translate(".concat(Pe(Ve),", ").concat(p(Ve.value),")")},G=d3.line().x(Pe).y(me.uncertaintyLayout.lower),ee=d3.line().x(Pe).y(me.uncertaintyLayout.upper),U=N[1]>N[0]}G.defined(function(_e){var Ve;return null!=(null===(Ve=_e?.uncertainty)||void 0===Ve?void 0:Ve.lower)&&(!de||_e.highlight)}),ee.defined(function(_e){var Ve;return null!=(null===(Ve=_e?.uncertainty)||void 0===Ve?void 0:Ve.upper)&&(!de||_e.highlight)});var je=(0,Ke.B9)(this.mainGraphicsContext);E=(0,Ke.FZ)(je,L,function(_e){return p},k,Math.min(10,Le-2),de,T);var f=_.filter(L,function(_e){return _e.uncertainty.markers.show});if(_.isEmpty(f))je.selectAll(Ke.YU.selector).remove();else{var v=new X.Wo,H=this.mainGraphicsContext.selectAll("defs").data([1]).join("defs").attr("class",Ke.Ok.class),K=[];z&&(0,Ke.iD)(f,K),v.ensureMarkers(H,K);var Re=(0,Ke.di)(je,L,ee,G,U,v,T,de);Q=je.selectAll(Ke.E6.selector),(B=function(Ve,Ne){(0,Ke.xl)(Re,ee,G,U,v,Ve,Ne)})(T,de)}}else(0,Ke.OY)(this.mainGraphicsContext);return{bars:E,markerPaths:Q,updateActiveHighlightMarkers:B}}function De(w,le,Y,me,Le){var ye=!Le,oe=w.selectAll(xt.L0.selector).selectAll("rect".concat(le));oe.filter(function(de){return de.categoryIndex===Y}).interrupt().style("fill-opacity",function(de){return ce.Ko*(0,We.TD)(de.columnStyle.fillTransparency)});var Ce=oe.filter(function(de){return(void 0===me||Le||de.categoryIndex===me)&&de.categoryIndex!==Y});(ye?Ce.transition():Ce).style("fill-opacity",function(de){return ce.eU*(0,We.TD)(de.columnStyle.fillTransparency)})}function Be(w,le,Y){return(0,ce.eR)(w.selected,w.highlight,le,Y,(0,We.TD)(w.columnStyle.fillTransparency))}function ve(w,le){return(0,We.TD)(w.fillTransparency)*(le?ce.eU:ce.Ko)}function se(w,le){var Y=this,me=this.style,Le=this.scaledMargin,ye=this.ribbonGapSize,oe=this.layout,Ce=this.mainGraphicsContext,de=this.isColumn,z=this.interactivityService,L=this.hostService,E=this.hasRibbonBands?this.activeData.series:[],Q=.7;w&&(w=null!=le);var B=function(U){var Z=function(w,le,Y,me){var b,N,p,k,Le=w.shapeLayout,ye=le.d1,oe=le.d2,Ce=Le.x(ye),de=Le.y(ye),z=Le.width(ye),L=Le.height(ye),E=Le.x(oe),Q=Le.y(oe),B=Le.width(oe),T=Le.height(oe);if(me){var G=Ce+z+Y,ee=E-Y;b={x:G,y:de},N={x:G,y:de+L},p={x:ee,y:Q},k={x:ee,y:Q+T}}else{var U=de-Y,Z=Q+T+Y;b={x:Ce,y:U},N={x:Ce+z,y:U},p={x:E,y:Z},k={x:E+B,y:Z}}return{bottomLeft:b,topLeft:N,bottomRight:p,topRight:k}}(oe,U,ye,de),Pe=d3.interpolateNumber(Z.bottomLeft.x,Z.bottomRight.x),je=d3.interpolateNumber(Z.bottomLeft.y,Z.bottomRight.y),f="M".concat(Z.bottomLeft.x,",").concat(Z.bottomLeft.y);return f+=de?"C".concat(Pe(Q),",").concat(Z.bottomLeft.y," ").concat(Pe(1-Q),",").concat(Z.bottomRight.y," ").concat(Z.bottomRight.x,",").concat(Z.bottomRight.y):"C".concat(Z.bottomLeft.x,",").concat(je(Q)," ").concat(Z.bottomRight.x,",").concat(je(1-Q)," ").concat(Z.bottomRight.x,",").concat(Z.bottomRight.y),f+="L".concat(Z.topRight.x,",").concat(Z.topRight.y),Pe=d3.interpolateNumber(Z.topRight.x,Z.topLeft.x),je=d3.interpolateNumber(Z.topRight.y,Z.topLeft.y),(f+=de?"C".concat(Pe(Q),",").concat(Z.topRight.y," ").concat(Pe(1-Q),",").concat(Z.topLeft.y," ").concat(Z.topLeft.x,",").concat(Z.topLeft.y):"C".concat(Z.topRight.x,",").concat(je(Q)," ").concat(Z.topLeft.x,",").concat(je(1-Q)," ").concat(Z.topLeft.x,",").concat(Z.topLeft.y))+"L".concat(Z.bottomLeft.x,",").concat(Z.bottomLeft.y,"Z")},T=Ce.select(At.selector);T.empty()&&(T=Ce.append("g").classed(At.class,!0));var b=Ce.select(Ue.selector);b.empty()&&(b=Ce.append("defs").classed(Ue.class,!0));var N=function(U){return"".concat(L.instanceId,"-").concat(U.d1.categoryIndex,"-").concat(U.d1.seriesIndex)},p=b.selectAll("clipPath").data(_.flatMap(E,function(ee){var U,Z;return null!==(U=ee.ribbonBands)&&void 0!==U&&U.border.strokeShow?null===(Z=ee.ribbonBands)||void 0===Z?void 0:Z.dataPoints:[]}),N),k=p.enter().append("clipPath").attr("id",N);k.append("path");var G=k.merge(p).select("path");(w?G.transition().duration(le.getDuration()):G.interrupt()).attr("d",B),p.exit().remove(),T.selectAll(Oe.selector).data(E,function(ee){return ee.key}).join(function(ee){return ee.append("g").classed(Oe.class,!0)}).styles({fill:function(U){return me.isHighContrast?me.colorPalette.backgroundNeutral.value:U.ribbonBands.fillColor},"fill-opacity":function(U){return ve(U.ribbonBands,z?.hasSelection())},stroke:function(U){return ge.color(U.ribbonBands.border,me)},"stroke-width":function(U){return ge.size(U.ribbonBands.border,me)},"stroke-opacity":function(U){return ge.opacity(U.ribbonBands.border,me,z?.hasSelection())}}).each(function(ee,U,Z){ft.fF.assert(function(){return void 0!==ee.ribbonBands},"ribbonBands must be defined.");var Pe=ee.ribbonBands.dataPoints;ft.fF.assert(function(){return void 0!==Pe},"dataPoints must be defined.");var je=d3.select(Z[U]).selectAll(P.selector).data(Pe,function(f){var v;return null!==(v=f.d1.pairKey)&&void 0!==v?v:f.d1.key}).join(function(f){return f.append("path").classed(P.class,!0)}).style("clip-path",function(f){return ee.ribbonBands.border.strokeShow&&!me.isHighContrast?"url(#".concat(N(f),")"):null});Y.featureSwitches.onObject&&je.classed(Ge.cy,!0).attr(Ge.Ez,"ribbon").attr(Ge.QZ,3).each(function(){Ge.O5.setDataForElement(this,{outlineRestrictionOptions:{margin:Le},getDisplayName:function(){return L.getLocalizedString("MiniToolbar_Ribbon",ee.displayName)},getRegionOutlines:function(){return[]}})}),(w?je.transition().duration(le.getDuration()):je.interrupt()).attr("d",B)})}},38859:function(li,la,S){"use strict";S.d(la,{$3:function(){return L},C3:function(){return ee},Ds:function(){return U},E5:function(){return me},EX:function(){return E},G1:function(){return k},HQ:function(){return se},L0:function(){return q},L2:function(){return p},Q4:function(){return de},V5:function(){return je},VY:function(){return N},_f:function(){return le},bS:function(){return oe},e3:function(){return G},fX:function(){return w},fl:function(){return ve},hg:function(){return Z},iR:function(){return ae},jL:function(){return Le},nD:function(){return Y},nO:function(){return ye},o9:function(){return Ce},t3:function(){return Pe}});var d=S(44783),X=S(79154),ce=S(62458),Ge=S(41640),Ke=S(32041),et=S(43286),Ht=S(72489),Pt=S(22733),Mt=S(90120),ft=S(46769),We=S(21181),kt=S(18664),rt=S(12198),xt=S(44196),Ot=S(77558),j=S(20624),vt=S(382),At=S(56707),Ue=S(34519),Oe=S(45028),P=S(33948),Ae=S(93907),lt=S(63892),Se=S(47316),qe=S(34969),ge=S(5381),F=[vt.h.auto,vt.h.outsideEnd,vt.h.insideEnd,vt.h.insideCenter,vt.h.insideBase],C=[vt.h.auto,vt.h.insideCenter,vt.h.insideEnd,vt.h.insideBase],q=(0,X.CH)("series"),ne=[16,4,1,2],ze=[1,4,2],De=[16],Be=4,ae=[0,1],ve=0,se={seriesOrderReversed:!1,seriesOrderSorted:!1,stackedGapSize:0,stackedGapExplodes:!1,clusteredGapSize:0,clusteredGapOverlaps:!1,clusteredGapOverlapReverse:!1,ribbonGapSize:0},w=0,le=10,Y=5,me=75,Le=100;function ye(v){return{strokeShow:!1,strokeColorMatch:!1,strokeTransparency:0,strokeWidth:1,strokeColor:Mt.v.getThemeColor(v,"foregroundNeutralSecondaryAlt"),strokePattern:Se.Dv.solid,outlineOnly:!1}}function oe(v){return{fillMatchColor:!0,fillColor:Mt.v.getThemeColor(v,"backgroundNeutral"),fillTransparency:30,border:ye(v)}}function Ce(v,H){if(H.stackedGapExplodes&&H.stackedGapSize>0){ce.fF.assert(function(){return H.stackedGapExplodeStepSize>0},"stackedGapExplodeStepSize must be pre-computed via the converter.");var K=v.indexFromZeroValue*(v.value<0?-1:1)*H.stackedGapExplodeStepSize;v.position+=K,v.originalPosition+=K}}function de(v){var K,H=this,Re=this.activeData;if(ce.fF.assertValue(Re,"createLabelDataPoints this.activeData must be set"),null===(K=Re.dataLabelsSettings)||void 0===K||!K.show)return[];var _e=Re.series,Ve=(0,We.fI)(),Ne=_e.map(function(Qe){var it=Qe.labelSettings?Qe.labelSettings:Re.dataLabelsSettings;if(!it.show)return{labelDataPoints:[],maxNumberOfLabels:0};var Rt=100!==it.labelDensity&&Re.isScalar?(0,ge.SS)(H.availableWidth,it.labelDensity,Be,rt.v.estimatedLabelWidth):Qe.data.length;return{labelDataPoints:Qe.data.filter(function(mt){return!(null==mt||null==mt.value||Re.hasHighlights&&!mt.highlight)}).map(function(mt){var Vt=z.call(H,mt,it,Ve,v,Qe);return mt.labelDataPointContainerEnabled?(0,Ue.U)({cartesianDataPoint:mt,currentAxisProperties:H.valueAxis,currentSeries:Qe,enableValueDataLabel:it.enableValueDataLabel,formattersCache:Ve,isStacked100:H.isStacked100,labelDataPoint:Vt,percentOfTotal:mt.value,seriesName:Qe.displayName,valueDataLabelSettings:it,valueShowBlankAs:it.showBlankAs,getOutsideLabelFill:function(Nt){return(0,P.j)(Nt.labelFill,!1,H.isComboChart,v)},getInsideLabelFill:function(Nt){return(0,P.j)(Nt.labelFill,!0,H.isComboChart,v)}}):Vt}),maxNumberOfLabels:Rt}});return Re.isScalar?new rt.v(Ne,_e,{width:this.availableWidth,height:this.availableHeight},this.valueAxis.scale).getSortedDataLabels():Ne}function z(v,H,K,Re,_e){var Ve,Ne;H?.displayUnits===At.In&&(H.precision=void 0);var Qe=(0,ge.d6)(this.valueAxis,H);if(null!==(Ve=v.dynamicLabelValue)&&void 0!==Ve&&Ve.enabled)Ne=(0,ft.nU)(v.dynamicLabelValue,K,H,Qe,_e,"Value"),!this.featureSwitches.labelEnhancementsM0&&this.featureSwitches.measureDrivenDataLabels&&""===Ne&&(Ne=void 0);else{var it=H?.displayUnits===At.In?H.valueCustomFormatString:void 0,dt=(0,et.yE)(this.columnChartType,48)&&!this.featureSwitches.labelEnhancementsM0?At.L0:it??v.labelFormatString,Rt=K.getOrCreate(dt,H,Qe.units,Qe.getPrecision(!!dt,_e.type)),ct=v.value;this.isStacked100&&this.featureSwitches.labelEnhancementsM0&&(ct=v.originalValue),Ne=(0,ge.Bw)(Rt.format(ct))}var _t,$t,mt=H.fontProperties,Vt=(0,kt.qk)(mt,Ne),ra=Ke.b.measureSvgTextWidth(Vt),Nt=Ke.b.estimateSvgTextHeight(Vt,!0);return _t=this.isClusteredOptimized?function(v){switch(v){case vt.h.insideEnd:return[4];case vt.h.insideCenter:return[1];case vt.h.insideBase:return[2];case vt.h.outsideEnd:return[16];default:return ne}}(H.position):function(v){switch(v){case vt.h.insideEnd:return[4];case vt.h.insideBase:return[2];case vt.h.insideCenter:return[1];default:return ze}}(H.position),H.labelOverflow&&(_t=function(v){var H=void 0,Re=_.map(v,function(_e){return function(Ve){switch(Ve){case 4:return 128;case 2:return 64;case 1:return 32;default:return H}}(_e)}).filter(function(_e){return _e!==H});return v.concat(Re)}(_t)),$t=this.isBar?v.value>=0?this.valueAxis.invertAxis?4:3:this.valueAxis.invertAxis?3:4:v.value>=0?this.valueAxis.invertAxis?2:1:this.valueAxis.invertAxis?1:2,{isPreferred:!1,text:Ne,textSize:{width:ra,height:Nt},outsideFill:(0,P.j)(v.labelFill,!1,this.isComboChart,Re),insideFill:(0,P.j)(v.labelFill,!0,this.isComboChart,Re),parentType:1,parentShape:{rect:{left:this.layout.shapeLayout.x(v),top:this.layout.shapeLayout.y(v),width:this.layout.shapeLayout.width(v),height:this.layout.shapeLayout.height(v)},orientation:$t,validPositions:_t},identity:v.identity,fontProperties:mt,hasBackground:H.enableBackground,backgroundColor:H.backgroundColor,backgroundTransparency:H.backgroundTransparency,transparency:H.transparency}}function L(v){var K,H=this,Re=this.activeData;if(ce.fF.assertValue(Re,"createTotalLabelDataPoints this.activeData must be set"),!this.isStackedOptimized||null===(K=Re.totalLabelsSettings)||void 0===K||!K.show||this.isStacked100)return[];for(var _e=(0,qe.GN)(Re.valuesMetadata),Ve=(0,Ht.EO)(_e,Pt.p.general.formatString),Ne=(0,We.fI)(),Qe=this.layout.shapeLayout,it=Re.totalLabelsSettings,dt=(0,ge.d6)(this.valueAxis,it),Rt=[],ct=function(Nt,_t,$t){if(0!==Nt){var oa=Re.totals[_t],Wa=Ne.getOrCreate(oa.dynamicFormatString||Ve,it,dt.units,it.precision),Ra=(0,ge.Bw)(Wa.format(Nt)),Ma=it.fontProperties,Bt=(0,kt.qk)(Ma,Ra),ia=it.showPositiveAndNegative?Nt:Nt>0?oa.positive:oa.negative,Ca={value:ia,position:ia<0?0:ia,valueAbsolute:Math.abs(ia),categoryIndex:oa.categoryIndex,categoryValue:oa.categoryValue,labelSettings:void 0,columnStyle:{fillColor:void 0,fillTransparency:0,border:ye(v)},originalValue:void 0,originalPosition:void 0,key:void 0,seriesIndex:void 0,selected:void 0,identity:void 0,labelDataPointContainerEnabled:!1,indexFromZeroValue:H.data.layout.stackedGapExplodes?(Nt>0?oa.positiveCount:oa.negativeCount)-1:0};Ce(Ca,H.data.layout),Rt.push({isPreferred:!1,text:Ra,textSize:{width:Ke.b.measureSvgTextWidth(Bt),height:Ke.b.estimateSvgTextHeight(Bt,!0)},outsideFill:(0,P.j)(oa?.labelFill,!1,H.isComboChart,v),insideFill:(0,P.j)(oa?.labelFill,!0,H.isComboChart,v),parentType:1,parentShape:{rect:{left:Qe.x(Ca),top:Qe.y(Ca),width:Qe.width(Ca),height:Qe.height(Ca)},orientation:H.isBar?Nt>=0?$t?4:3:$t?3:4:Nt>=0?$t?2:1:$t?1:2,validPositions:De},identity:void 0,fontProperties:Ma,hasBackground:it.enableBackground,backgroundColor:it.backgroundColor,backgroundTransparency:it.backgroundTransparency,isTotal:!0})}},mt=0;mt<Re.totals.length;mt++){var Vt=Re.totals[mt];Vt&&(Re.totalLabelsSettings.showPositiveAndNegative?(ct(Vt.positive,mt,this.valueAxis.invertAxis),ct(Vt.negative,mt,this.valueAxis.invertAxis)):ct(Vt.net,mt,this.valueAxis.invertAxis))}return[{labelDataPoints:Rt,maxNumberOfLabels:2*Re.totals.length,isTotal:!0}]}function E(v){var H=this,K=this.activeData;if(ce.fF.assertValue(K,"createUncertaintyLabels this.activeData must be set"),this.isStackedOptimized||_.isEmpty(_.filter(this.activeData.series,function(it){var dt;return null===(dt=it.uncertainty)||void 0===dt?void 0:dt.labels.show})))return[];var Re=(0,We.fI)(),_e=this.layout.shapeLayout,Ve=this.layout.uncertaintyLayout,Ne=this.columnWidth/2,Qe=Ne/2;return K.series.map(function(it){var dt=it.uncertainty;if(!dt||!dt.renderUncertainty||!dt.labels.show)return{labelDataPoints:[],maxNumberOfLabels:0};var Rt=dt.labels,mt=Rt.fontProperties,Vt=(0,ge.d6)(H.valueAxis,Rt),ra=[];return it.data.forEach(function(Nt){if(null!=Nt&&null!=Nt.value&&(!K.hasHighlights||Nt.highlight)&&null!=Nt.uncertainty){for(var _t=[],$t=(0,xt.Ww)(Nt.value,Nt.uncertainty,Rt.errorFormat),oa=[$t.lower,$t.upper],Wa=0;Wa<2;Wa++){var Ra=oa[Wa],Ma=1===Wa;if(null!=(Ma?Nt.uncertainty.upper:Nt.uncertainty.lower)){var ia=void 0;if(Rt.errorFormat===Ot.K.relativePercentage)ia=(0,xt.O2)(Ra,H.hostService);else{var Ca=Nt.labelFormatString,Ta=Re.getOrCreate(Ca,Rt,Vt.units,Vt.getPrecision(!!Ca,it.type));ia=(0,ge.Bw)(Ta.format(Ra))}ce.fF.assertValue(ia,"label has no value -- columnUtil.createUncertaintyLabels");var da=(0,kt.qk)(mt,ia),fe=void 0,Xe=void 0;H.isBar?(fe={x:Ma?Ve.upper(Nt):Ve.lower(Nt),y:_e.y(Nt)+(Nt.drawThinner?Qe:Ne)},Xe=[Ma?8:4]):(fe={x:_e.x(Nt)+(Nt.drawThinner?Qe:Ne),y:Ma?Ve.upper(Nt):Ve.lower(Nt)},Xe=[Ma?1:2]),_t.push({isPreferred:!1,text:ia,textSize:{width:Ke.b.measureSvgTextWidth(da)+At.TS,height:Ke.b.estimateSvgTextHeight(da,!0)},outsideFill:mt.color?mt.color:Mt.v.getThemeColor(v,At.uQ),insideFill:mt.color?mt.color:Mt.v.getThemeColor(v,At.pl),parentType:0,parentShape:{point:fe,radius:0,validPositions:Xe},identity:void 0,fontProperties:mt,hasBackground:Rt.enableBackground,backgroundColor:Rt.backgroundColor,backgroundTransparency:Rt.backgroundTransparency})}}_.isEmpty(_t)||ra.push.apply(ra,_t)}}),{labelDataPoints:ra,maxNumberOfLabels:100}})}var b=1e-4;function N(v,H){if(0===v.length)return{min:0,max:10};var Re=d3.min(v,function(Ve){return d3.min(Ve.data,function(Ne){return Ne.position-Ne.valueAbsolute})}),_e=d3.max(v,function(Ve){return d3.max(Ve.data,function(Ne){return Ne.position})});return H&&(Re=(0,Ge.W0)(Re,b),_e=(0,Ge.W0)(_e,b)),{min:Re,max:_e}}function p(v,H,K,Re,_e){void 0===K&&(K=!1);var Ve=(0,We.bT)({style:v,textClassName:"smallLightLabel",noColor:!0});return Ve.position=null,Ve.labelDensity=At.go,Ve.labelOrientation=j.B.Horizontal,K?(Ve.enableBackground=!0,Ve.backgroundColor=Mt.v.getThemeColor(v,d.U),Ve.backgroundTransparency=At.r_):Ve.enableBackground=!1,Ve.enableTitleDataLabel=!1,H?(Ve.enableValueDataLabel=!1,Ve.enableDetailDataLabel=!0,Ve.detailContentType=Ae.W.Percent):(Ve.enableValueDataLabel=!0,Ve.enableDetailDataLabel=!1),Ve.labelContainerMaxWidth=Oe.w9,Ve.labelContentLayout=function(v,H){return v&&!Z(v)&&(je(v)||ee(v,H)||U(v))||Pe(v)?lt.v.MultiLine:lt.v.SingleLine}(Re,_e),Ve}function k(v,H){return!ee(v,H)}function G(v,H){return k(v,H)?F:C}function ee(v,H){return(0,et.yE)(v,16)&&(1!==H||U(v))}function U(v){return(0,et.yE)(v,48)}function Z(v){return(0,et.yE)(v,2)}function Pe(v){return(0,et.yE)(v,4)}function je(v){return(0,et.yE)(v,8)}},88439:function(li,la,S){"use strict";S.d(la,{GJ:function(){return Mt},on:function(){return Pt},pD:function(){return C}});var d=S(81337),X=S(84741),ce=S(61617),Ge=S(62458),Ke=S(56578),et=S(32379),Ht=[[X.rJ.y,X.rJ.tooltips],[X.rJ.y2]];function Pt(){return Ht}function Mt(ae,ve,se){if(0===ae.length)return[];var w,le,Y;switch(ve){case 13:case 14:w=[4,0],le=4;break;default:Ge.fF.assertFail("There is no support to merge formatting cards for this chart type (enum): ".concat(ve))}if(Y=function(ae,ve){if(0!==ve.length){var se={};ae.forEach(function(ye){se[ye.type]=ye.card});for(var w=[],le=function(oe){se[oe]&&se[oe].forEach(function(Ce){return w.push({card:Ce,type:oe})})},Y=0,me=ve;Y<me.length;Y++)le(me[Y]);return w}}(ae,w),0===Y.length)return[];for(var me={},Le=0,ye=Y;Le<ye.length;Le++){var oe=ye[Le],Ce=oe.card;me[Ce.uid]=me[Ce.uid]?{card:We(me[Ce.uid].card,Ce,me[Ce.uid].type,oe.type,se,le),type:oe.type}:{card:Ce,type:oe.type}}for(var de=[],z=0,L=_.values(me);z<L.length;z++)de.push(L[z].card);return de}function We(ae,ve,se,w,le,Y){var me=Y===w?ve.topLevelToggle:ae.topLevelToggle,Le=(0,d.pi)((0,d.pi)({},ae),{topLevelToggle:me}),ye={};ve.groups.forEach(function(Q){ye[Q.uid]=Q}),ae.groups.forEach(function(Q,B){if((0,Ke.Qu)(Q))Ge.fF.assertFail("Unsupported placeholder");else{var T=ye[Q.uid];T&&(Le.groups[B]=kt(Q,T,se,w,le,"errorBars"===ae.uid),delete ye[Q.uid])}});for(var oe=0,Ce=ve.groups;oe<Ce.length;oe++){var de=Ce[oe];if((0,Ke.Qu)(de))return void Ge.fF.assertFail("Unsupported placeholder");var z=ye[de.uid];z&&Le.groups.push(z)}var L=_.unionWith(ae.revertToDefaultDescriptors,ve.revertToDefaultDescriptors,_.isEqual),E=X.OA;return Le.revertToDefaultDescriptors=L.filter(function(Q){return E[Q.objectName]&&E[Q.objectName][Q.propertyName]}),Le}function kt(ae,ve,se,w,le,Y){var me=(0,d.pi)({},ve),Le=ae.slices;Ge.fF.assert(function(){return!Le||Le.every(function(oe){return!(0,Ke.Qu)(oe)})},"Unexpected placeholder");var ye=ve.slices;return Ge.fF.assert(function(){return!ye||ye.every(function(oe){return!(0,Ke.Qu)(oe)})},"Unexpected placeholder"),me.slices=j(Le,ye,se,w,le),me.container=ae.container&&ve.container?function(ae,ve,se,w,le,Y){var me,Le=(0,d.pi)({},ve);Le.containerItems=[];var ye=(0,d.ev)([],ae.containerItems,!0),oe=(0,d.ev)([],ve.containerItems,!0);if(Y)(me=Le.containerItems).push.apply(me,(0,d.ev)((0,d.ev)([],oe,!1),ye,!1));else{var Ce=void 0;Ge.fF.assert(function(){return ye[0].displayName===oe[0].displayName},"Trying to create a template from formattingContainerItems from items that are not equal"),ae.containerItems.length>0&&ve.containerItems.length>0&&(Ce=function(ae,ve,se,w,le){var Y=(0,d.pi)((0,d.pi)({},ve),{groups:[],slices:[]}),me={};ve.groups.forEach(function(Ce){me[Ce.uid]=Ce}),ae.groups.forEach(function(Ce,de){var z=me[Ce.uid];z?(Y.groups[de]=kt(Ce,z,se,w,le),delete me[Ce.uid]):Y.groups[de]=Ce});for(var Le=0,ye=ve.groups;Le<ye.length;Le++){var oe=ye[Le];me[oe.uid]&&Y.groups.push(me[oe.uid])}return Y.slices=j(ae.slices,ve.slices,se,w,le),Y}(ye.shift(),oe.shift(),se,w,le)),Le.containerItems.push(Ce);for(var de=[],z=0,L=ye;z<L.length;z++)de.push({containerItem:L[z],layerType:se});for(var Q=0,B=oe;Q<B.length;Q++)de.push({containerItem:B[Q],layerType:w});for(var b=0,N=de;b<N.length;b++){var p=N[b];Le.containerItems.push(Ue(Ce,p.containerItem,p.layerType))}}return Le}(ae.container,ve.container,se,w,le,Y):ae.container||ve.container,me}function xt(ae){return _.findIndex(ae,function(ve){return!(0,Ke.IW)(ve)&&function(ae){var ve=X.OA.labels.labelDensity,se=ae.control.properties.descriptor;return se.objectName===ve.objectName&&se.propertyName===ve.propertyName}(ve)})}function j(ae,ve,se,w,le){var Y=[],me=xt(ae),Le=ae[me],ye=xt(ve),oe=ve[ye];Le&&oe&&(ae=ae.filter(function(b,N){return!(0,Ke.IW)(b)&&N!==me}),ve=ve.filter(function(b,N){return!(0,Ke.IW)(b)&&N!==ye}));var Ce=X.OA,de={};ve.forEach(function(b){F(b,Ce)&&(de[(0,ce.zU)(b,!1)]=b)}),ae.forEach(function(b){if(F(b,Ce)){var N=de[(0,ce.zU)(b,!1)],p=b.displayName;if(function(ae,ve){return!(!ve||ve.control.type!==ae.control.type||!function(ae,ve){if(!(0,Ke.IW)(ae)&&!(0,Ke.IW)(ve)){var se=ae.control.properties.descriptor,w=ve.control.properties.descriptor;if(_.isEqual(_.omit(w,["selector","instanceKind"]),_.omit(se,["selector","instanceKind"]))){if(et.fS(w.selector,se.selector))return!0;var me=void 0;if(null==w.selector&&(me=et.N6(se.selector)),null==se.selector&&(me=et.N6(w.selector)),me)return function(ae,ve){var se,w=ae.control.properties.descriptor,le=ve.control.properties.descriptor;w.instanceKind|=le.instanceKind,null!==(se=w.selector)&&void 0!==se||(w.selector=le.selector)}(ae,ve),!0}return!1}return!0}(ae,ve))&&("Dropdown"!==ve.control.type||!!Se(ve.control.properties,ae.control.properties))}(b,N)){if((0,Ke.IW)(b)&&(0,Ke.IW)(N))for(var k in b.control.properties){var G=b.control.properties[k],ee=N.control.properties[k];G&&ee&&_.isEqual(G.descriptor,ee.descriptor)&&(G.value=ee.value)}else b.control.properties.value=N.control.properties.value;delete de[(0,ce.zU)(N,!1)]}else p=ne(b.uid,se,le);Y.push((0,d.pi)((0,d.pi)({},b),{displayName:p}))}});for(var z=0,L=ve;z<L.length;z++){var E=L[z],Q=de[(0,ce.zU)(E,!1)],B=qe(E.uid,w);if(Q){var T=ne(Q.uid,w,le);Y.push((0,d.pi)((0,d.pi)({},Q),{displayName:T,uid:B}))}}return Le&&oe&&function(ae,ve,se,w){ae.control.properties.value=ve.control.properties.value;var le=w("Visual_LabelDensity");se.push((0,d.pi)((0,d.pi)({},ae),{displayName:le}))}(Le,oe,Y,le),Y}function Ue(ae,ve,se){var w=(0,d.pi)({},ve),le={};return ve.groups.forEach(function(Y){le[Ke.SS.getGroupUid(Y.uid)]=Y}),Ge.fF.assert(function(){return ae.groups.length<=ve.groups.length},"template container item has more groups than created container item"),ae.groups.forEach(function(Y,me){var Le=Ke.SS.getGroupUid(Y.uid);if(le[Le]){var ye={};le[Le].slices.forEach(function(oe){ye[Ke.IN.getGroupAndSliceUid(oe.uid)]=oe}),w.groups[me].slices=[],Y.slices.forEach(function(oe){if((0,Ke.Qu)(oe))Ge.fF.assertFail("Unsupported placeholder");else{var Ce=Ke.IN.getGroupAndSliceUid(oe.uid),de=ye[Ce];if(de||(de=ye[function(ae,ve){return ae.replace("__".concat(ve,"__"),"")}(Ce,se)]),de)if("Dropdown"===de.control.type&&"Dropdown"===oe.control.type)if(Se(de.control.properties,oe.control.properties))de.displayName=oe.displayName,w.groups[me].slices.push(de);else{var E=w.groups[me].uid;w.groups[me].slices.push((0,d.pi)((0,d.pi)({},oe),{uid:"".concat(E).concat(oe.uid),displayName:oe.displayName,disabled:!0}))}else de.displayName=oe.displayName,w.groups[me].slices.push(de);else E=w.groups[me].uid,w.groups[me].slices.push((0,d.pi)((0,d.pi)({},oe),{uid:"".concat(E).concat(oe.uid),displayName:oe.displayName,disabled:!0}))}})}}),w}function lt(ae){return void 0===ae.items}function Se(ae,ve){return!(!lt(ae)||!lt(ve))&&_.isEqual(ae.filterValues,ve.filterValues)}function qe(ae,ve){return"".concat(ae,"__").concat(ve,"__")}function F(ae,ve){if((0,Ke.IW)(ae)){var se=ae.control.properties;return!!se&&Object.keys(se).every(function(le){var Y=se[le],me=Y?.descriptor;return!me||!!(me&&ve[me.objectName]&&ve[me.objectName][me.propertyName])})}var w=ae.control.properties.descriptor;return!!(w&&ve[w.objectName]&&ve[w.objectName][w.propertyName])}function C(ae,ve){var se=[];switch(ve){case 13:case 14:se=["bars","lines","shadeArea","layout","markers","labels","seriesLabels","totals","errorBars"]}return function(ae,ve){if(0===ve.length)return ae;var se={};ae.forEach(function(Le){se[Le.uid]=Le});for(var w=[],le=0,Y=ve;le<Y.length;le++){var me=Y[le];se[me]&&w.push(se[me])}return w}(ae,se)}function ne(ae,ve,se){var Y="Visual_Slice_Placeholder_"+function(ae){for(var se=0,w=Array.from(ze.entries());se<w.length;se++){var le=w[se],me=le[1];if(le[0].includes(ae))return me}return ae}(Ke.IN.getSliceUid(ae));return se(Y,function(ae,ve){switch(ae){case 4:return ve("DisplayName_QuickCalc_PercentOfColumnTotal");case 0:return ve("Visual_Slice_PlaceholderChartType_Line");default:Ge.fF.assertFail("There is not support for merging this chart layer type for formattingCards yet")}}(ve,se))}var ze=new Map([[["detailLabelDisplayUnits","detailDisplayUnits","titleLabelDisplayUnits"],"displayUnits"],[["detailLabelPrecision","titleLabelPrecision"],"precision"]])},54365:function(li,la,S){"use strict";S.d(la,{p:function(){return Ot}});var d=S(81337),X=S(53197),ce=S(62458),Ge=S(45034),Ke=S(1144),et=S(78843),Ht=S(61289),Pt=S(82386),Mt=S(72489),ft=S(94419),We=S(88439),kt=function(){function Ue(){}return Ue.prototype.ensureValueGroupAtSeriesIndex=function(Oe,P,Ae){if(!Oe[P]){var lt=this.getValueGroupName(Ae),Se={identity:this.getSeriesIdentity(Ae),values:[],objects:this.getSeriesObjects(Ae),name:lt};Oe[P]=Se}return Oe[P]},Ue}(),rt=function(Ue){function Oe(P){var Ae=Ue.call(this)||this;return Ae.matrix=P,Ae}return(0,d.ZT)(Oe,Ue),Oe.prototype.setSource=function(P){P.source=this.matrix.columns.levels[0].sources[0]},Oe.prototype.getSeriesGroups=function(P,Ae){return P&&_.map(P,function(lt){return _.isEmpty(lt.children)?1:lt.children.length})},Oe.prototype.getSeriesDataPoints=function(P){return _.filter(this.matrix.columns.root.children,function(lt){return!lt.isSubtotal})},Oe.prototype.getValueGroupName=function(P){return P.value||P.levelValues&&P.levelValues[0].value},Oe.prototype.getSeriesObjects=function(P){return P.objects},Oe.prototype.getSeriesIdentity=function(P){return P.identity},Oe.prototype.getSeriesSourceColumn=function(P,Ae){return void 0===Ae&&(Ae=null),_.create(P,{groupName:Ae})},Oe.prototype.createValueColumnForMeasure=function(P,Ae,lt,Se,qe){if(!Ae[qe]){var ge={identity:this.getSeriesIdentity(P),values:[],source:this.getSeriesSourceColumn(lt,Se),objects:void 0};Ae[qe]=ge}return Ae[qe]},Oe}(kt),xt=function(Ue){function Oe(P){return Ue.call(this)||this}return(0,d.ZT)(Oe,Ue),Oe.prototype.setSource=function(P){},Oe.prototype.getSeriesGroups=function(P,Ae){return Ae?[Ae]:[]},Oe.prototype.getSeriesDataPoints=function(P){return P},Oe.prototype.getValueGroupName=function(P){return P.displayName},Oe.prototype.getSeriesObjects=function(P){return P.objects},Oe.prototype.getSeriesIdentity=function(P){},Oe.prototype.getSeriesSourceColumn=function(P,Ae){return P},Oe.prototype.createValueColumnForMeasure=function(P,Ae,lt,Se,qe){if(!Ae[qe]){var ge={identity:this.getSeriesIdentity(P),values:[],source:this.getSeriesSourceColumn(lt,Se),objects:[]};Ae[qe]=ge}return Ae[qe]},Oe}(kt),Ot=function(){function Ue(Oe,P){var Ae=this;this.sourceDataView=Oe,this.formatStringPropId=P,ce.fF.assert(function(){return Oe&&Oe.metadata&&!!Oe.matrix},"sourceDataView && sourceDataView.metadata && !!sourceDataView.matrix"),this.matrix=Oe.matrix,this.hasRowChildren=!_.isEmpty(this.matrix.rows.root.children),this.hasColChildren=!_.isEmpty(this.matrix.columns.root.children),this.hasSeries=this.hasColChildren&&!_.isEmpty(this.matrix.columns.levels)&&_.every(this.matrix.columns.levels[0].sources,function(Se){return!Se.isMeasure}),this.hasCategories=this.matrix.rows.levels.length>1&&this.hasRowChildren,this.objects=Oe.metadata.objects,this.frameCount=function(Ue){return Ue.rows.root.children?_.filter(Ue.rows.root.children,function(Oe){return!Oe.isSubtotal}).length:0}(this.matrix),this._frameDisplayNames=new Ge.o(function(){return Ae.getDisplayNameFromAllFrames()})}return Ue.create=function(Oe,P){return new Ue(Oe,P)},Ue.prototype.getObjects=function(){return this.objects},Ue.prototype.getFrameDisplayNames=function(){return this._frameDisplayNames.getValue()},Ue.prototype.hasFrames=function(){return this.matrix&&this.frameCount>0&&!_.isEmpty(this.matrix.rows.levels)&&!!this.getFrameSourceColumns()},Ue.prototype.getFrameCount=function(){return this.frameCount},Ue.prototype.getFrameSourceColumns=function(){return this.matrix.rows.levels[0].sources},Ue.prototype.getFrameNode=function(Oe){return this.matrix.rows.root.children[Oe]},Ue.prototype.getValueSources=function(Oe){return Oe?(0,Pt.vC)(this.matrix.rows.levels[this.hasCategories?1:0]):this.matrix.valueSources},Ue.prototype.buildCategoricals=function(Oe,P,Ae,lt,Se){var qe=this,F=this.matrix.rows.root.children[Oe];ce.fF.assert(function(){return!F.isSubtotal},"frame node should not be subtotal");var C=[];Se.forEach(function(le,Y){C[Y]={shouldReadScopedValues:!le&&qe.hasSeries}});var q=Se.map(function(le){return qe.hasSeries&&le?new rt(qe.matrix):new xt(qe.matrix)});C.forEach(function(le){le.allValueSources=qe.getValueSources(le.shouldReadScopedValues)});for(var ne=0;ne<q.length;ne++){var ze=this.findUniqueFilteredValueSourcesAndIndices(C[ne].allValueSources,lt&&lt[ne]),De=ze[0],Be=ze[1];C[ne].requiredValueSources=De,C[ne].requiredValueSourcesIndices=Be,q[ne].setSource(P[ne].values);var ae=q[ne].getSeriesDataPoints(De);C[ne].seriesNodes=ae;var ve=q[ne].getSeriesGroups(ae,Be.length);C[ne].seriesGroups=ve,C[ne].valueGroups=Array(ve.length)}(0,Pt.y9)(this.hasCategories?F.children:[F],function(le,Y,me){var Le;if(!le.isSubtotal){qe.hasCategories&&function(Ue,Oe){ce.fF.assertNonEmpty(Ue,"sourceCategoryHierarchicalGroupNodes"),ce.fF.assertNonEmpty(Oe,"destinationCategories"),ce.fF.assert(function(){return _.every(Ue,function(ne){return 1===ne.levelValues.length})&&Ue.length===Oe.length||1===Ue.length&&Ue[0].levelValues.length===Oe.length},"pre-condition: there should be one category column per matrix row level/level source for Category.");var Ae,lt,P=_.last(Ue).objects,Se=Ue[0];if(Ue.length>1){(lt=new Array(Ue.length))[0]=Se.levelValues[0].value;for(var qe=Se.identity.expr,ge=1,F=Ue.length;ge<F;ge++)lt[ge]=(Se=Ue[ge]).levelValues[0].value,qe=(0,ft.xD)(qe,Se.identity.expr);Ae=(0,et.TZ)(qe)}else Ae=Se.identity,lt=_.map(Se.levelValues,function(ne){return ne.value});for(var C=0,q=Oe.length;C<q;C++)Oe[C].identity.push(Ae),Oe[C].objects.push(P),Oe[C].values.push(lt[C])}(me,Ae);for(var ye=C.map(function(p){return p.shouldReadScopedValues?(0,Pt.Lr)(le):le.values}),oe=0;oe<C.length;oe++)for(var Ce=C[oe],de=0;de<Ce.seriesGroups.length;de++){for(var z=Ce.seriesNodes&&Ce.seriesNodes[de],L=Ce.seriesGroups[de],E=q[oe].ensureValueGroupAtSeriesIndex(Ce.valueGroups,de,z),Q=[],B=0;B<L;B++){var T=de*L+B,b=q[oe].createValueColumnForMeasure(z,P[oe].values,Ce.requiredValueSources[Ce.shouldReadScopedValues?T:B],E.name,T);qe.hasSeries||(T=Ce.requiredValueSourcesIndices[T]);var N=null===(Le=ye?.[oe])||void 0===Le?void 0:Le[T];_.isEmpty(Ce.requiredValueSources)||qe.readValues(N,b,Y),Q.push(b)}E.values=Q}}});var w=this.hasSeries&&this.hasCategories&&_.isEmpty(C.filter(function(le){return!_.isEmpty(le.requiredValueSources)}));for(ne=0;ne<P.length;ne++)(0,Ke.PO)(P[ne].values,C[ne].valueGroups),_.isEmpty(C[ne].requiredValueSources)&&(Se[ne]?w||(P[ne].values=void 0):P[ne]=void 0)},Ue.prototype.findUniqueFilteredValueSourcesAndIndices=function(Oe,P){if(_.isEmpty(Oe))return[[],[]];for(var Ae=[],lt=[],Se={},qe=function(C){var q=Oe[C];if(!_.isEmpty(P)&&!_.some(P,function(ne){return q.roles[ne]})||Se[q.queryName])return"continue";Ae.push(C),lt.push(q),Se[q.queryName]=!0},ge=0;ge<Oe.length;ge++)qe(ge);return[lt,Ae]},Ue.prototype.readCategories=function(){var Oe=this.matrix.rows;if(ce.fF.assert(function(){return Oe.levels.length<=1||2===Oe.levels.length&&Oe.levels[1].sources.length>=1||Oe.levels.length>=2&&_.every(Oe.levels,function(Ae){return 1===Ae.sources.length})},"Incorrect Levels/Sources count."),this.hasCategories){var P=[];return this.fillCategoriesMetadata(P),P}},Ue.prototype.fillCategoriesMetadata=function(Oe){var P=this;ce.fF.assert(function(){return P.hasCategories},"No categories");for(var Ae=this.matrix.rows.levels,lt=1;lt<Ae.length;lt++)for(var Se=0,qe=Ae[lt].sources;Se<qe.length;Se++)Oe.push({source:qe[Se],values:[],identity:[],objects:[]})},Ue.prototype.convertComboFrame=function(Oe){var P=(0,We.on)();return this.convertFrameInternal(Oe,P)},Ue.prototype.createEmptyCategorical=function(Oe){var P;return(P=Oe.values).push.apply(P,function(Ue){return _.isEmpty(Ue)?[]:_.map(Ue,function(Oe){return{identity:void 0,values:[],source:Oe,objects:[]}})}(this.matrix.valueSources)||[]),{metadata:this.sourceDataView.metadata,categorical:Oe}},Ue.prototype.convertFrame=function(Oe){return this.convertFrameInternal(Oe)[0]},Ue.prototype.checkValueRolesInList=function(Oe,P){for(var Ae=function(C){if(_.some(Oe,function(q){return C.roles[q]}))return{value:!0}},lt=0,Se=P;lt<Se.length;lt++){var ge=Ae(Se[lt]);if("object"==typeof ge)return ge.value}return!1},Ue.prototype.validateValueRoles=function(Oe){if(!_.isEmpty(Oe)){var P=this.checkValueRolesInList(Oe,this.matrix.valueSources),Ae=this.getValueSources(!0),lt=Ae&&this.checkValueRolesInList(Oe,Ae);ce.fF.assert(function(){return!(P&&lt)},"valueRoles cannot exist in both")}},Ue.prototype.isForColumnValues=function(Oe){var P=(0,We.on)()[0];return _.isEmpty(Oe)||_.intersection(Oe,P).length>0},Ue.prototype.convertFrameInternal=function(Oe,P){var Ae=this,lt=[],Se=this.matrix,qe=[];_.isEmpty(P)?qe.push(!0):P.forEach(function(ve){Ae.validateValueRoles(ve),qe.push(Ae.isForColumnValues(ve))}),ce.fF.assert(function(){var ve;return _.size(null===(ve=Se?.rows)||void 0===ve?void 0:ve.levels)>=1},"matrix should have at least one level for Play fields");for(var ge=[],F=_.isEmpty(P)?1:P.length,C=0;C<F;C++)ge.push({categories:void 0,values:(0,Ht.Yv)()});if(!this.hasCategories){var q=[],ne=!0;for(C=0;C<ge.length;C++)if(qe[C]){if(!_.isEmpty(Se.valueSources)&&this.hasRowChildren){ne=!1;break}(this.hasSeries||1===ge.length)&&(q[C]=this.createEmptyCategorical(ge[C]))}else if(!_.isEmpty(this.getValueSources(this.hasSeries))){ne=!1;break}if(ne)return q}var ze=this.readCategories();this.buildCategoricals(Oe,ge,ze,P,qe);for(var De=0,Be=ge;De<Be.length;De++){var ae=Be[De];ae&&(ae.categories=ze,lt.push({metadata:this.sourceDataView.metadata,categorical:ae}))}return lt},Ue.prototype.readValues=function(Oe,P,Ae){P.values||(P.values=[]),Oe?(P.values[Ae]=Oe.value??null,void 0!==Oe.highlight&&(P.highlights||(P.highlights=[]),P.highlights[Ae]=Oe.highlight),void 0!==Oe.objects&&(P.objects||(P.objects=[]),P.objects[Ae]=Oe.objects),void 0!==Oe.highlightObjects&&(P.highlightObjects||(P.highlightObjects=[]),P.highlightObjects[Ae]=Oe.highlightObjects)):P.values[Ae]=null},Ue.prototype.getDisplayNameFromAllFrames=function(){for(var Oe=new Array(this.frameCount),P=0;P<this.frameCount;P++){var Ae=this.getDisplayNameForFrame(P);Oe[P]=Ae}return Oe},Ue.prototype.getDisplayNameForFrame=function(Oe){var P=this,Ae=this.getFrameNode(Oe),lt=this.getFrameSourceColumns(),Se=new Array(lt.length);return lt.forEach(function(qe,ge){ce.fF.assertValue(Ae.levelValues,"level values should be defined for non subTotal nodes");var F=Ae.levelValues&&Ae.levelValues[ge].value,C=new Mt.g({column:qe,formatStringPropId:P.formatStringPropId,nullsAreBlank:!0,trailingZeroes:!0});Se[ge]=C.format(F)}),Se},Ue.prototype.getSubtotals=function(){var Oe=_.find(this.matrix.rows.root.children,function(q){return q.isSubtotal});if(Oe){for(var P=_.size(Oe.values),Ae=_.size(this.matrix.valueSources),lt=P-Ae,Se={},qe=0;qe<Ae;qe++){var ge=this.matrix.valueSources[qe].roles,F=(0,X.eT)(Oe.values[lt+qe].value);for(var C in ge)Se[C]=F}return Se}},Ue.prototype.getTopLevelAggregates=function(Oe){for(var Ae={},lt=0,Se=this.sourceDataView.metadata.columns;lt<Se.length;lt++){var qe=Se[lt];if(qe.roles&&qe.aggregates)for(var ge=0,F=Oe;ge<F.length;ge++){var C=F[ge];qe.roles[C]&&(Ae[C]=Ae[C]||[]).push(qe.aggregates)}}return _.isEmpty(Ae)?void 0:Ae},Ue}()},67174:function(li,la,S){"use strict";S.d(la,{CT:function(){return j},Je:function(){return Ue},qR:function(){return Oe},vH:function(){return ge}});var d=S(45863),ce=S(22733),Ge=S(14599),Ke=S(14577),et=S(79154),Ht=S(62458),Pt=S(38265),Mt=S(32041),ft=S(64329),We=S(66001),kt=S(42359),rt=S(72489),xt=S(54365),j=function(){function F(C){C&&(this.interactivityService=C)}return F.prototype.initData=function(C){this.element=C.element,this.host=C.host,this.isMobileChart=C.interactivity&&C.interactivity.mobileTileInteractive},F.prototype.initRenderer=function(C){var q=this;Ht.fF.assertValue(C,"options"),Ht.fF.assert(function(){return!q.rendererInitialized},"renderer initialized multiple times"),this.svg=C.svg,this.interactivityService&&(this.playControl=new vt(this.element,function(ne){return q.moveToFrameAndRender(ne)},this.isMobileChart),this.playControl.onPlay(function(){return q.play()})),this.rendererInitialized=!0},F.prototype.isRendererInitialized=function(){return this.rendererInitialized},F.prototype.setData=function(C,q){if(C){if(this.ridiculousFlagForPersistProperties&&C.metadata)return this.ridiculousFlagForPersistProperties=!1,this.playData;this.playData=C.matrix||C.categorical?function(F,C){var q,ne,Be,ae,ze=[],De=[],ve=xt.p.create(F,Ge.e0.formatString),se=ve.getFrameCount(),w=ve.getSubtotals();if(ve.hasFrames()){var le=ve.getFrameSourceColumns(),Y=(0,rt.EO)(ae=le&&le[0],Ke.il.general.formatString),me=void 0;if(ae.type.numeric){var Le=null===(q=ve.getFrameNode(se-1))||void 0===q?void 0:q.value,ye=null===(ne=ve.getFrameNode(0))||void 0===ne?void 0:ne.value,oe=Math.abs(Le-ye);me=(0,rt.Ue)({format:Y,value:oe,value2:0,columnType:ae.type})}else me=(0,rt.E3)(Y,!0);for(var Ce=0,de=se;Ce<de;Ce++){var z=ve.getFrameNode(Ce);if(!z.isSubtotal){var L=me.format(z.value),E=$("<div></div>").text(L).html();De.push({escapedText:E,text:L}),Be=C(P(Ce,ve),{label:E,column:ae,identity:z.identity,value:z.value,formattedValue:L},w),ze.push(Be)}}}else Be=C(P(0,ve),void 0,w),ze.push(Be);return{allChartData:ze,chartData:Be,frameData:De,currentFrameIndex:De.length-1,labelData:qe(De,ae)}}(C,q):{frameData:[],allChartData:[],currentFrameIndex:0,chartData:void 0,labelData:{anyWordBreaks:!1,labelInfo:[]}}}else this.playData={frameData:[],allChartData:[],currentFrameIndex:0,chartData:void 0,labelData:{anyWordBreaks:!1,labelInfo:[]}};return this.lastViewport=void 0,this.playData},F.prototype.render=function(C,q,ne){var ze,De,Be=this.playData,ae=!this.lastViewport||this.lastViewport.height!==q.height||this.lastViewport.width!==q.width;if(this.lastViewport=q,ae&&this.stop(),Be)return null===(ze=this.interactivityService)||void 0===ze||ze.applySelectionStateToData(Be.chartData.dataPoints),this.updateCallout(q,ne),ae&&(null===(De=this.playControl)||void 0===De||De.rebuild(Be,q,this.playControlWidth)),{allDataPoints:_.flatten(Be.allChartData.map(function(ve){return ve.dataPoints})),viewModel:{data:this.playData,viewModel:C,viewport:q}}},F.prototype.updateCallout=function(C,q){var ne=this.playData,ze=ne.frameData,De=ne.currentFrameIndex,Be=C.height,ae=Be-q.top-q.bottom,ve=C.width,se=ve-q.left-q.right,w=0,le=Math.min(Be,1.3*ve),Y=Math.max(12,Math.round(le/7));Y=Math.min(Y,70);var me=[];if(De<ze.length&&De>=0){var Le={fontSize:ft.FP.toString(Y),text:ze[De].text||"",fontFamily:Pt.Wn.regular.css};(w=Mt.b.estimateSvgTextHeight(Le)-Mt.b.estimateSvgTextBaselineDelta(Le))<ae&&(me=[Mt.b.getTailoredTextOrDefault(Le,se-2*F.calloutOffsetMultiplier*w)])}this.svg.selectAll(F.PlayCallout.selector).data(me).join(function(de){return de.append("text").classed(F.PlayCallout.class,!0)}).text(function(de){return de}).attrs({x:se-F.calloutOffsetMultiplier*w,y:function(){return w}}).styles({"font-size":"".concat(Y,"px"),"text-anchor":"end"})},F.prototype.play=function(){var C=this.playData;if(this.isPlaying)this.stop();else if(this.playControl){this.isPlaying=!0,this.playControl.play();var q=this.playControl.getCurrentIndex();if(null==q)return;q=Math.round(q),C.currentFrameIndex=q>=C.allChartData.length-1?-1:q-1,this.playNextFrame(C)}},F.prototype.playNextFrame=function(C,q,ne){var ze=this;if(this.isPlaying){var De=C.currentFrameIndex+1;if(null!=q&&null!=ne&&(De=Math.abs(ne-q+1),q=De),De<C.allChartData.length&&De>-1){var Be=this.host.tooltips();Be&&Be.hide({immediately:!0,isTouchEvent:!1}),C.currentFrameIndex=De,C.chartData=C.allChartData[De],this.renderDelegate(C.chartData),this.playControl.setFrame(De),De<C.allChartData.length&&window.setTimeout(function(){ze.playNextFrame(C,q,ne)},At)}else this.stop()}else this.stop()},F.prototype.stop=function(){var C;null===(C=this.playControl)||void 0===C||C.pause(),this.isPlaying=!1},F.prototype.remove=function(){var C;null===(C=this.playControl)||void 0===C||C.remove(),d3.selectAll(F.PlayCallout.selector).remove()},F.prototype.setRenderFunction=function(C){this.renderDelegate=C},F.prototype.getCartesianExtents=function(C,q){return this.playData&&!_.isEmpty(this.playData.allChartData)&&!_.isEmpty(this.playData.frameData)&&function(F,C){for(var q={},ne=!1,ze=0,De=F.allChartData||[];ze<De.length;ze++){var Be=De[ze];if(!_.isEmpty(Be?.dataPoints)){ne=!0;var ae=C(Be);q={minY:d3.min([ae.minY,q.minY]),maxY:d3.max([ae.maxY,q.maxY]),minX:d3.min([ae.minX,q.minX]),maxX:d3.max([ae.maxX,q.maxX]),formatStringX:ae.formatStringX||q.formatStringX,formatStringY:ae.formatStringY||q.formatStringY}}}return ne?q:null}(this.playData,q)||C},F.prototype.setPlayControlPosition=function(C){if(this.playControl){var q=this.playControl.getContainer();q.css("left",C.left?"".concat(C.left,"px"):""),q.css("top",C.top?"".concat(C.top,"px"):""),q.css("width",C.width?"".concat(C.width,"px"):""),this.playControlWidth=C.width}},F.prototype.moveToFrameAndRender=function(C){var q=this.playData;if(this.isPlaying=!0,q&&C>=0&&C<q.allChartData.length&&C!==q.currentFrameIndex){q.currentFrameIndex=C;var ne=q.allChartData[C];q.chartData=ne,this.renderDelegate(ne)}this.isPlaying=!1},F.prototype.isCurrentlyPlaying=function(){return this.isPlaying},F.PlayCallout=(0,et.CH)("play-callout"),F.calloutOffsetMultiplier=.3,F}(),vt=function(){function F(C,q,ne){this.isMobileChart=ne,this.createSliderDOM(C),this.renderDelegate=q}return F.prototype.getContainer=function(){return this.playAxisContainer},F.prototype.remove=function(){this.playAxisContainer&&this.playAxisContainer.remove()},F.prototype.pause=function(){this.playButton.removeClass("pause").addClass("play")},F.prototype.play=function(){this.playButton.removeClass("play").addClass("pause")},F.prototype.getCurrentIndex=function(){if(this.noUiSlider)return Number(this.noUiSlider.get())},F.prototype.onPlay=function(C){this.playButtonCircle.off("click"),this.playButtonCircle.on("click",C)},F.prototype.setFrame=function(C){this.noUiSlider.set([C])},F.prototype.rebuild=function(C,q,ne){var ze=this;this.noUiSlider&&this.noUiSlider.destroy();var De=C.labelData,Be=F.calculateSliderSize(De,ne),ae=this.getContainer();Be.marginLeft>F.SliderMarginLeft&&(ae.css("padding-left","".concat(Be.marginLeft-F.SliderMarginLeft,"px")),ae.css("box-sizing","border-box"));var ve=this.updateSliderControl(C,Be.width),se=F.adjustWidthRegardingLastItem(De,ve,Be.width);this.slider.css("width","".concat(se,"px")),this.noUiSlider.on("slide",function(){var w=ze.getCurrentIndex();ze.renderDelegate(w)}),this.noUiSlider.on("update",function(){return $(".noUi-target").removeClass("noUi-state-tap")})},F.prototype.updateSliderControl=function(C,q){var ne=C.labelData,ze=this.slider.get(0),De=C.frameData.length,Be={start:De<=1?1:C.currentFrameIndex,step:1,range:{min:0,max:De<=1?1:De-1},animationDuration:At},ae=null,ve=0;if(De>1){var se=F.createPipsFilterFn(C,q,ne);ve=se.skipStep,ae={mode:"steps",density:Math.ceil(100/De),format:{to:function(le){return C.frameData[le].escapedText},from:function(le){return _.findIndex(C.frameData,function(Y){return Y.escapedText===le})}},filter:se.filter}}return Be.pips=ae,(0,d.create)(ze,Be),this.noUiSlider=ze.noUiSlider,ve},F.createPipsFilterFn=function(C,q,ne){var ze=_.max(_.map(ne.labelInfo,function(w){return w.labelWidth})),De=1,Be=1,ve=ze/(C.frameData.length>1?q/(C.frameData.length-1):q);return ve>1.25?(Be=Math.ceil(ve),De=2):(ve>1||ne.anyWordBreaks)&&(De=2),{filter:function(le){return le%Be==0?De:0},skipStep:Be}},F.adjustWidthRegardingLastItem=function(C,q,ne){if(_.isEmpty(C.labelInfo)||C.labelInfo.length<=1)return ne;var ze=C.labelInfo.length,De=Math.floor((ze-1)/q)*q,ve=C.labelInfo[De].labelWidth/2-(ne+F.SliderMarginRight-ne/ze*(De+1));if(ve>0){var se=F.SliderMaxMargin-F.SliderMarginRight;return ne-(ve>se?se:ve)}return ne},F.prototype.createSliderDOM=function(C){this.playAxisContainer=$('<div class="play-axis-container"></div>').appendTo(C).css("height","".concat(F.PlayControlHeight,"px")),this.playButtonCircle=$('<div class="button-container"></div>').appendTo(this.playAxisContainer),this.isMobileChart&&this.playButtonCircle.addClass("mobile-button-container"),this.playButton=$('<div class="play"></div>').appendTo(this.playButtonCircle),this.slider=$('<div class="sliders"></div>').attr("drag-resize-disabled","true").attr("rtl",("rtl"===document.dir).toString()).appendTo(this.playAxisContainer)},F.calculateSliderSize=function(C,q){var ne=0;!_.isEmpty(C.labelInfo)&&C.labelInfo.length>1&&(ne=_.head(C.labelInfo).labelWidth/2);var ze=Math.max(ne,F.SliderMarginLeft);return ze=Math.min(F.SliderMaxMargin,ze),{width:Math.max(q-ze-F.SliderMarginRight,1),marginLeft:ze}},F.SliderMarginLeft=44,F.SliderMarginRight=20,F.SliderMaxMargin=100,F.PlayControlHeight=80,F}(),At=800,Ue={duration:750,ease:d3.easeLinear},Oe="playChart";function P(F,C){var q=C.convertFrame(F);return(0,kt.eC)(q.metadata,Ge.e0.formatString,ce.x.category,q.categorical)}function qe(F,C){return{labelInfo:F.map(function(q){return{label:q.escapedText,labelWidth:(0,We.bY)(q.escapedText,Mt.b.measureSvgTextWidth,{fontFamily:Pt.Wn.regular.css,fontSize:ft.FP.toString(14)})}}),anyWordBreaks:_.some(F,function(q){return(0,We.r)(q.escapedText)||q.escapedText.indexOf("-")>-1}),labelFieldName:C?.displayName}}function ge(F,C){var q,ne,ze,De,Be,ae,ve;return void 0===C&&(C="Play"),Ht.fF.assertValue(F,"dataView"),null===(ve=null===(ae=null===(Be=null===(De=null===(ze=null===(ne=null===(q=F.matrix)||void 0===q?void 0:q.rows)||void 0===ne?void 0:ne.levels)||void 0===ze?void 0:ze[0])||void 0===De?void 0:De.sources)||void 0===Be?void 0:Be[0])||void 0===ae?void 0:ae.roles)||void 0===ve?void 0:ve[C]}},62494:function(li,la,S){"use strict";S.r(la),S.d(la,{RealTimeLineChartAnimator:function(){return Ht}});var d=S(81337),X=S(94478),ce=S(34644),Ge=S(10389),Ht=function(Pt){function Mt(ft){var We=Pt.call(this,ft)||this;return We.lastUpdateTime=null,We}return(0,d.ZT)(Mt,Pt),Mt.prototype.refreshLastUpdate=function(){this.lastUpdateTime=Date.now()},Mt.prototype.getDuration=function(){if(this.lastUpdateTime){var ft=Math.min(Date.now()-this.lastUpdateTime,250);return Math.max(this.animationDuration,ft)}return this.animationDuration},Mt.prototype.getEasing=function(){return(0,ce.Ad)("linear")},Mt.prototype.animate=function(ft){var We=ft.mainGraphicsContext,kt=this.getDuration();return We.transition().duration(kt).ease(this.getEasing()).attrTween("transform",function(){return function(rt){return(0,Ge.Iu)(-ft.xTranslation*rt,0)}}),{failed:!1}},Mt}(X.r5)},79972:function(li,la,S){"use strict";S.d(la,{OQ:function(){return ne},V2:function(){return q},jI:function(){return C},vN:function(){return De}});var d=S(81337),X=S(22733),ce=S(14577),Ge=S(53197),Ke=S(90120),et=S(95938),Ht=S(21181),Pt=S(52083),Mt=S(2241),ft=S(86108),We=S(51129),kt=S(43906),rt=S(79811),xt=S(11305),Ot=S(48766),j=S(67165),vt=S(94038),At=S(90700),Ue=S(61193),Oe=S(47316),P=S(44783),Ae=S(62458),lt=S(45034),Se=S(38958),qe=S(82755),ge=S(72489),F=S(26543),C=3500,q=1e4;function ne(p,k,G,ee){var U;return k.useMatrixDV?function(p,k,G){var ee,U,Z,Pe;if(p&&p.matrix&&(0!==_.size(p.matrix.valueSources)||0!==_.size(p.matrix.rows.levels))){for(var je=k.interactivityService,f=(0,Ht.vc)(k.style,"smallLightLabel"),v=L(null===(ee=p?.metadata)||void 0===ee?void 0:ee.objects,f,k.style),H=function(p){var k,G,H,K,Re,Ne,ee=p.matrix,U=ee.valueSources,Z=!1,Pe=!1,je=[_.findIndex(U,function(_t){return(0,Se.nu)(_t,"X")})],f=_.findIndex(U,function(_t){return(0,Se.nu)(_t,"Y")}),v=_.findIndex(U,function(_t){return(0,Se.nu)(_t,"Size")}),_e="",Ve="";(je[0]>=0?_e=(H=U[je[0]]).displayName:(Ne=B(ee.rows,ce.TL.x))&&(je=Ne.levelSourceIndices,_e=(H=Ne.column).displayName,Z=!0),f>=0)?Ve=(K=U[f]).displayName:(Ne=B(ee.rows,ce.TL.y))&&(f=Ne.levelSourceIndices[0],Ve=(K=Ne.column).displayName,Pe=!0);v>=0&&(Re=U[v]);var it,Qe=_.find(ee.rows.levels,function(_t){return!_.isEmpty(_t.sources)&&(0,Se.nu)(_t.sources[0],ce.TL.series)});Qe?it=ee.rows.root:(Qe=_.find(ee.columns.levels,function(_t){return!_.isEmpty(_t.sources)&&(0,Se.nu)(_t.sources[0],ce.TL.series)}))&&(it=ee.columns.root);var dt=null!==(G=null===(k=p?.metadata)||void 0===k?void 0:k.objects)&&void 0!==G?G:{},Rt=!1,ct=!1;if(H){var mt=H.type;Rt=_.size(je)<=1&&!(!mt.integer&&!mt.numeric),ct=(0,qe.NA)(dt,X.p.categoryAxis.axisType)===Ot.w.categorical||!Rt}if(Z||Pe){var ra=!!_.find(ee.rows.levels,function(_t){return(0,Se.nu)(_t.sources[0],ce.TL.category)});Ae.fF.assert(function(){return!ra},"not expecting to find category level with x/y grouping")}var Nt=Z?ce.TL.x:Pe?ce.TL.y:ce.TL.category;return{idx:{x:je,y:f,size:v},xCol:H,yCol:K,size:Re,axesLabels:{x:_e,y:Ve},xGroupMetadata:Z?{isCategoricalAxis:ct,isScalarType:Rt}:void 0,yGroupMetadata:Pe?{isCategoricalAxis:!1,isScalarType:!0}:void 0,seriesLevel:Qe,seriesNode:it,categoryLevel:_.find(ee.rows.levels,function(_t){return(0,Se.nu)(_t.sources[0],Nt)}),treatNullsAsZero:{x:(0,qe.NA)(dt,ce.il.categoryAxis.treatNullsAsZero,!1),y:(0,qe.NA)(dt,ce.il.valueAxis.treatNullsAsZero,!1)}}}(p),K=H.size,Re=p.matrix.valueSources,_e=[],Ve=0;Ve<Re.length;Ve++)(0,Se.nu)(Re[Ve],"Tooltips")&&_e.push(Ve);var Ne={colorHelper:Ke.v.create(k.style,ce.il.markers.color,(0,qe.W7)(null===(U=p.metadata)||void 0===U?void 0:U.objects,ce.il.dataPoint.defaultColor),(0,qe.W7)(null===(Z=p.metadata)||void 0===Z?void 0:Z.objects,ce.il.markers.color)),metadata:H,hasDynamicSeries:(0,Se.c5)(p,"Series"),tooltipsEnabled:k.tooltipsEnabled,sizeRange:K?.aggregates?{min:K.aggregates.minLocal||K.aggregates.min||0,max:K.aggregates.maxLocal||K.aggregates.max}:{min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},dataLabelSettings:f,playFrameInfo:G,tooltipValuesIndices:_e,gradientIndex:_.findIndex(Re,function(ct){return(0,Se.nu)(ct,"Gradient")}),staticObjProps:v,categoryMap:{},categoryMapNextIndex:0,categoryIdentities:[]},Qe=function(p,k){var G,ee,U,Z,Pe=[],je=p.matrix;if(!je.rows.root||0===_.size(je.rows.root.children))return{dataPointSeries:Pe};var K,f=k.metadata,v=f.seriesNode,H=-1!==f.idx.size?je.valueSources[f.idx.size]:void 0,Re=T(f);if(v){for(var _e=function(Rt){var ct=v.children[Rt];if(ct.isSubtotal)return"continue";var mt=Object.create(k.staticObjProps.marker);mt.color=k.colorHelper.getColorForSeriesValue(ct.objects,v.childIdentityFields,ct.value,P.fA),Ae.fF.assert(function(){return 1===_.size(f.seriesLevel.sources)},"Scatter should only have one series column");var Vt=f.seriesLevel.sources[0],ra=ct.levelValues.map(function(oa){return{expr:Vt.expr,formattedValue:ge.WU(oa.value,Vt.format),value:oa.value,identity:ct.identity}});k.staticObjProps.showSeries&&(mt.shape=(0,qe.NA)(ct.objects,ce.il.markers.shape,mt.shape));var Nt={dataView:p,currentSeries:ct,converterContext:k,seriesMarker:mt,seriesIndex:Rt,valueColumnIds:Re},_t={identityKey:null!==(U=null===(ee=ct.identity)||void 0===ee?void 0:ee.key)&&void 0!==U?U:"",dataPoints:ye(Nt),marker:mt,identity:(new F.dw).withColumnIdentity(ct.identity,Vt.queryName,ra).createSelectionId(),name:ge.WU(ct.value,(0,qe.NA)(Vt.objects,ce.il.general.formatString))};if(Pe.push(_t),!f.categoryLevel&&0===_.size(_t.dataPoints)){var $t=de({seriesOptions:Nt,category:ct,categoryMetadataColumns:[Vt],categoryIdentityFields:ct.childIdentityFields,categoryFormatter:oe(void 0,Vt)});$t&&_t.dataPoints.push($t)}},Ve=0;Ve<(null===(G=v.children)||void 0===G?void 0:G.length);Ve++)_e(Ve);var Ne=p.matrix.rows.root.children,Qe=_.find(Ne,function(dt){return dt.isSubtotal});Qe&&(K=Le(f,Qe))}else{var it=Object.create(k.staticObjProps.marker);it.color=k.colorHelper.getColorForMeasure(null,null!==(Z=H?.queryName)&&void 0!==Z?Z:"",P.fA),Pe.push({identityKey:"",dataPoints:ye({dataView:p,converterContext:k,currentSeries:je.rows.root,seriesMarker:it,valueColumnIds:Re}),marker:it}),f.categoryLevel?(Ne=p.matrix.rows.root.children,(Qe=_.find(Ne,function(ct){return ct.isSubtotal}))&&(K=Le(k.metadata,Qe))):!f.xGroupMetadata&&!f.yGroupMetadata&&(K=Le(f,p.matrix.rows.root.children[0]))}return{dataPointSeries:Pe,xSubtotal:K?.xSubtotal,ySubtotal:K?.ySubtotal}}(p,Ne),it=ve(Qe.dataPointSeries,H),dt={dataView:p,colorHelper:Ne.colorHelper,style:k.style,formatStringProp:null,showByDefault:!0,markerShapePropIdentifier:ce.il.markers.shape,markerShowSeriesPropIdentifier:ce.il.bubbles.showSeries},Rt=Ne.hasDynamicSeries?null!==(Pe=Ne.metadata.xGroupMetadata)&&void 0!==Pe&&Pe.isCategoricalAxis?(0,rt.Lk)(dt):(0,rt.PP)(dt):(0,rt.Fe)(k.style);return je&&(je.applySelectionStateToData(it),je.applySelectionStateToData(Rt.dataPoints)),(0,d.pi)((0,d.pi)((0,d.pi)({xCol:H.xCol,yCol:H.yCol,axesLabels:H.axesLabels,size:H.size,hasCategory:!!(H.xGroupMetadata||H.yGroupMetadata||H.categoryLevel),dataPoints:it},Qe),{legendData:Rt,categoryIdentities:Ne.categoryIdentities,sizeRange:Ne.sizeRange,dataLabelsSettings:f,hasDynamicSeries:Ne.hasDynamicSeries,xGroupMetadata:H.xGroupMetadata,yGroupMetadata:H.yGroupMetadata,treatNullsAsZero:H.treatNullsAsZero}),v)}}(p,k,G):null!==(U=p.categorical)&&void 0!==U&&U.values?function(p,k,G,ee){var U,Z,Pe=(0,We.G)(p,{colorOptions:{valueRole:"Size",visualStyle:k.style},formatStringProp:ce.il.general.formatString}),je=k.style,f=k.interactivityService,v=k.categoryAxisProperties,H=k.valueAxisProperties,K=p.categorical,Re=(0,Pt.Rr)(K),_e=[null],Ve=ge.E3(null);(null===(U=K.categories)||void 0===U?void 0:U.length)>0&&(_e=K.categories[0].values,Ve=ge.Ue({format:ge.EO(K.categories[0].source,ce.il.general.formatString),value:_e[0],value2:_e[_e.length-1],columnType:Pe.data.getCategoryType("Category")}));var Ne=K.values,Qe=!!Ne.source,it=Ne.grouped(),dt=function(p){var U,Z,Pe,k=(0,Se.a2)(p,"X"),G=(0,Se.a2)(p,"Y"),ee=(0,Se.a2)(p,"Size"),je="",f="";if(p&&p.length){var v=p[0];k>=0&&(U=v.values[k].source,je=v.values[k].source.displayName),G>=0&&(Z=v.values[G].source,f=v.values[G].source.displayName),ee>=0&&(Pe=v.values[ee].source)}return{idx:{x:[k],y:G,size:ee},xCol:U,yCol:Z,size:Pe,axesLabels:{x:je,y:f}}}(it),Rt=(0,Ht.vc)(je,"smallLightLabel"),ct=L(null===(Z=p?.metadata)||void 0===Z?void 0:Z.objects,Rt,je),mt=function(p,k,G,ee,U,Z,Pe,je,f,v,H,K){var Re,_e,Ve,Ne,Qe,it,dt=p.data.hasValues("X"),Rt=p.data.hasValues("Y"),ct=ee.categories;if(!dt&&!Rt)return[];var mt=[],Vt=G.idx,ra=ce.il.general.formatString,Nt=k.source,_t=k.grouped();Ae.fF.assert(function(){return _.size(Vt.x)<=1},"Categorical X axis is not supported with categorical data view and hence there should not be more than 1 column on X role");for(var $t=_.isEmpty(ct)?null:ct[0],oa=T(G),Wa=function(ia,Ca){var Ta=_t[ia],da=Ta.values,fe=N(Vt.size,da),Xe=Object.create(v.marker);Xe.color=Pe?p.colors.createBySeries(ia,void 0,P.fA):void 0,p.data.hasSeries()&&v.showSeries&&(Xe.shape=(0,qe.NA)(p.objects.getSeriesDataObjects(ia),ce.il.markers.shape,Xe.shape));var He={identityKey:null!==(_e=null===(Re=Ta?.identity)||void 0===Re?void 0:Re.key)&&void 0!==_e?_e:"",dataPoints:[],marker:Xe,identity:p.identities.createForSeries(ia,[ce.TL.size]),name:Pe?ge.WU(p.data.getSeriesName(ia),p.objects.getSeriesFormatString()):void 0};mt.push(He);for(var ht=function(be,Fe){var ke=dt?(0,Ge.eT)(p.data.getValue(ce.TL.x,be,ia)):0,Me=Rt?(0,Ge.eT)(p.data.getValue(ce.TL.y,be,ia)):0;if(null==ke||null==Me)return"continue";var at=null!==(Ve=ee.originalCategories)&&void 0!==Ve?Ve:[$t],nt=F.dw.builder().withCategory(at,be,null===(Ne=$t?.source)||void 0===Ne?void 0:Ne.queryName,!0).withSeries(k,Ta,!0).withMeasures(oa),pt=void 0;H?(pt=nt.clone()).withColumnIdentity(H.identity,H.column.queryName,[{expr:H.column.expr,formattedValue:H.formattedValue,identity:H.identity,value:H.value}]):pt=nt;var zt=pt.createSelectionId(),Ct=new xt.Rm(p.columns,ra);if(K){var Lt=(0,kt.F)(ra),Wt=(0,kt.S)(ra);Ct.withColumnValueByIndex($t,be,!0,Lt),Pe&&Ct.withColumnValue(Nt,Ta.name,void 0,!0,Lt);var Et=N(_.first(Vt.x),da),St=N(Vt.y,da);Ct.withColumnValueByIndex(Et,be,!1,Wt).withColumnValueByIndex(St,be,!1,Wt).withColumnValueByIndex(fe,be,!1,Wt).withColumnValueByIndex(f,be,!1,Wt),H&&Ct.withValue(H.column.displayName,H.label),Ct.withAllValuesForRole("Tooltips",be,ia,!1,Wt)}var jt=Object.create(He.marker);jt.size=(0,Ge.eT)(p.data.getValue(ce.TL.size,be,ia)),jt.color=v.colorByCategory&&!Pe?p.colors.createByCategory(be,P.fA):p.colors.createBySeries(ia,be,P.fA),He.dataPoints.push({x:ke,y:Me,xFormatString:dt?p.data.getFormatString(ce.TL.x,be,ia):void 0,yFormatString:Rt?p.data.getFormatString(ce.TL.y,be,ia):void 0,marker:jt,radius:fe?.values[be],sourceGroupName:null===(Qe=fe?.source)||void 0===Qe?void 0:Qe.groupName,formattedCategory:new lt.o(function(){return Z.format(null!=ct?U[be]:Ta.name)}),selected:!1,identity:zt,renderIdentity:null!==(it=nt?.createSelectionId())&&void 0!==it?it:zt,tooltipInfo:function(){return Ct.getTooltipItems()},labelFill:je.fontProperties.color,categoryIndex:be,seriesIndex:ia})},m=0,V=U.length;m<V;m++)ht(m)},Ra=0,Ma=_t.length;Ra<Ma;Ra++)Wa(Ra);return mt}(Pe,Ne,dt,K,_e,Ve,Qe,Rt,Re,ct,G,k.tooltipsEnabled),Vt=ve(mt,dt),ra=Qe?(0,rt.pq)({dataView:p,style:je,showByDefault:!0,simpleMarkerProp:ce.il.markers.shape}):(0,rt.Fe)();return v&&null!==v.showAxisTitle&&!1===v.showAxisTitle&&(dt.axesLabels.x=null),H&&null!==H.showAxisTitle&&!1===H.showAxisTitle&&(dt.axesLabels.y=null),f&&(f.applySelectionStateToData(Vt),f.applySelectionStateToData(ra.dataPoints)),(0,d.pi)({xCol:dt.xCol,yCol:dt.yCol,axesLabels:dt.axesLabels,size:dt.size,hasCategory:Pe.data.hasCategories(),dataPoints:Vt,dataPointSeries:mt,legendData:ra,sizeRange:le(it,dt.idx.size),dataLabelsSettings:Rt,hasDynamicSeries:Qe,xSubtotal:ee?.[ce.TL.x],ySubtotal:ee?.[ce.TL.y]},ct)}(p,k,G,ee):void 0}var ze="foregroundDark";function De(p){return{xCol:void 0,yCol:void 0,hasCategory:void 0,dataPoints:[],dataPointSeries:[],legendData:(0,rt.Fe)(p),axesLabels:{x:"",y:""},sizeRange:{min:void 0,max:void 0},dataLabelsSettings:(0,Ht.vc)(p,"smallLightLabel"),hasDynamicSeries:!1,plotAreaShadingSettings:{show:!1,upperShadingColor:{solid:{color:Ke.v.getDataColorByIndex(p,3)}},lowerShadingColor:{solid:{color:Ke.v.getDataColorByIndex(p,5)}},transparency:70},ratioLineSettings:{strokeShow:!1,strokeColor:p?Ke.v.getThemeColor(p,ze):void 0,strokeTransparency:0,strokeWidth:3,strokePattern:Oe.Dv.dashed,strokeDashArray:Oe.YU,strokeDashCap:Oe.xm,strokeAutoScale:!1},marker:{show:!0,shape:Ue.ZO.circle,color:p.colorPalette.dataColors.getColorByIndex(0).value,transparency:0,rotation:0,stroke:{strokeShow:!1,strokeColor:p?Ke.v.getThemeColor(p,ze):void 0,strokeTransparency:0,strokeWidth:1,strokePattern:Oe.Dv.solid},rangeType:At.Dl.deprecated,multiplier:ft.Kf.min},dataVolume:C,colorBorder:!1,colorByCategory:!1}}function ve(p,k){var G,ee=_.reduce(p,function(U,Z){return U.concat(Z.dataPoints)},[]);return k.size&&!(null!==(G=k.xGroupMetadata)&&void 0!==G&&G.isCategoricalAxis)&&ee.sort(se),ee}function se(p,k){if(null!=p.radius&&null!=k.radius){var G=k.radius-p.radius;if(0!==G)return G}return k.identity.getKey().localeCompare(p.identity.getKey())}function le(p,k){var G={};return p?.forEach(function(ee){var Z=function(p){var k={};return p&&(k.min=p.min??p.minLocal??d3.min(p.values),k.max=p.max??p.maxLocal??d3.max(p.values)),k}(N(k,ee.values));(null==G.min||G.min>Z.min)&&(G.min=Z.min),(null==G.max||G.max<Z.max)&&(G.max=Z.max)}),G}function Le(p,k){Ae.fF.assert(function(){return!p.xGroupMetadata&&!p.yGroupMetadata},"Can not get subtotals when grouped on x/y");var G,ee=p.idx.x,U=p.idx.y;Ae.fF.assert(function(){return _.size(ee)<=1},"Categorical X is not supported without X groups and hence there should only be 1 X column");var Pe,Z=_.first(ee);return-1!==Z&&(G=(0,Ge.eT)(k.values[Z].value)),-1!==U&&(Pe=(0,Ge.eT)(k.values[U].value)),{xSubtotal:G,ySubtotal:Pe}}function ye(p){for(var k=[],G=function(p){var k,G,ee,je,f,U=p.dataView,Z=p.converterContext,Pe=p.currentSeries,v=null!==(G=null===(k=Z.metadata.seriesLevel)||void 0===k?void 0:k.sources[0])&&void 0!==G?G:void 0,H=ge.E3(null);if(null!==(ee=Z.metadata.xGroupMetadata)&&void 0!==ee&&ee.isCategoricalAxis){var K=U.matrix.rows;H=oe((je=K.root.children)[0],(f=K.levels[0].sources)[0])}else Pe.children?(je=Pe.children,f=U.matrix.rows.levels.length>0?U.matrix.rows.levels[je[0].level].sources:void 0,v&&(H=oe(je[0],f[0]))):v&&(0,Se.nu)(v,"Category")&&(H=oe((je=[Pe])[0],(f=[v])[0]));return{categories:je,categoryMetadataColumns:f,categoryFormatter:H}}(p),U=G.categoryFormatter,Z=G.categoryMetadataColumns,Pe=0,je=G.categories??[];Pe<je.length;Pe++){var v=de({seriesOptions:p,category:je[Pe],categoryMetadataColumns:Z,categoryIdentityFields:p.currentSeries.childIdentityFields,categoryFormatter:U});v&&k.push(v)}return k}function oe(p,k){return p?.levelValues?ge.Ue({format:ge.EO(k,ce.il.general.formatString),value:p.levelValues[0],value2:p.levelValues[_.size(p.values)-1],columnType:null}):ge.E3(null)}function de(p){var k,G,ee,U,Z,Pe;if(!p.category.isSubtotal){var ra,je=p.seriesOptions,v=je.converterContext,H=je.seriesIndex,K=je.currentSeries,Re=je.seriesMarker,_e=v.metadata,Ve=je.dataView.matrix,Ne=_e.idx.x,Qe=_e.idx.y,it=_e.idx.size,dt=_.size(Ve.valueSources),Rt=_e.xGroupMetadata,ct=_e.yGroupMetadata,mt=_.first(Ne),Vt=0,Nt=ce.il.general.formatString;!Rt&&-1!==mt&&(Vt=(0,Ge.eT)(p.category.values[mt].value),Vt=null!==(k=_e.treatNullsAsZero)&&void 0!==k&&k.x&&null==Vt?0:Vt,ra=(0,qe.NA)(p.category.values[mt].objects,Nt));var _t=null==Vt?null:[Vt];Rt&&(Ae.fF.assert(function(){return-1!==mt},"a found grouped-X should not have an unknown index"),_t=_.map(Ne,function(Aa){var Gt,_a;return null!==(_a=null===(Gt=p.category.levelValues[Aa])||void 0===Gt?void 0:Gt.value)&&void 0!==_a?_a:void 0}));var Wa,$t=0,oa=null===(G=_e.xGroupMetadata)||void 0===G?void 0:G.isCategoricalAxis;if(ct||-1===Qe)ct&&(Ae.fF.assert(function(){return-1!==Qe},"a found grouped-Y should not have an unknown index"),$t=p.category.levelValues[Qe].value);else{var Ra=z(oa,H,dt,Qe);$t=(0,Ge.eT)(p.category.values[Ra].value),$t=null!==(ee=_e.treatNullsAsZero)&&void 0!==ee&&ee.y&&null==$t?0:$t,Wa=(0,qe.NA)(p.category.values[Ra].objects,Nt)}if(null!=_t&&null!=$t){var Bt,Ma=Object.create(Re);-1!==it&&(Ra=z(oa,H,dt,it),Ma.size=(0,Ge.eT)(p.category.values[Ra].value),Bt=(0,qe.NA)(p.category.values[Ra].objects,Nt));var Ca,ia=F.dw.builder();if(!_.isEmpty(p.categoryMetadataColumns)){for(var Ta=_.last(p.categoryMetadataColumns),da=[],fe=0,Xe=p.category.levelValues;fe<Xe.length;fe++){var He=Xe[fe],ht=p.categoryMetadataColumns[He.levelSourceIndex];da.push({expr:ht.expr,formattedValue:ge.WU(He.value,ht.format),value:He.value,identity:p.category.identity})}ia.withColumnIdentity(p.category.identity,Ta.queryName,da)}var m=null!==(Z=null===(U=v.metadata.seriesLevel)||void 0===U?void 0:U.sources[0])&&void 0!==Z?Z:void 0;m&&(da=K.levelValues.map(function(Gt){return{expr:m.expr,formattedValue:ge.WU(Gt.value,m.format),value:Gt.value,identity:K.identity}}),ia.withColumnIdentity(K.identity,m.queryName,da));var V=p.seriesOptions.valueColumnIds;if(_.isEmpty(V)||ia.withMeasures(V),v.playFrameInfo){var R=v.playFrameInfo;Ca=ia.clone(),ia.withColumnIdentity(R.identity,R.column.queryName,[da={expr:R.column.expr,formattedValue:R.formattedValue,identity:R.identity,value:R.value}])}var be=ia.createSelectionId(),Fe=v.sizeRange;Fe.min>Ma.size&&(Fe.min=Ma.size),Fe.max<Ma.size&&(Fe.max=Ma.size),v.hasDynamicSeries||(v.staticObjProps.colorByCategory?Ma.color=v.colorHelper.getColorForSeriesValue(p.category.objects,p.categoryIdentityFields,p.category.value,P.fA):p.category.objects&&(Ma.color=v.colorHelper.getColorForMeasure(p.category.objects,null!=v.metadata.size?v.metadata.size.queryName:"",P.fA)));var Me=(0,kt.F)(Nt),at=function(){var Gt=p.category.levelValues;return _.isEmpty(Gt)?K.value:_.size(Gt)>1?(0,et.ML)(_.map(Gt,function(_a,Da){return Me(_a.value,p.categoryMetadataColumns[Da])})):Gt[0].value},nt=new xt.E4;if(v.tooltipsEnabled){var pt=(0,kt.S)(Nt),bt=p.category.levelValues,zt=_.size(p.categoryMetadataColumns)>1;!Rt&&!ct&&(zt?nt.withMultipleColumnAndValues(p.categoryMetadataColumns,_.map(bt,function(Gt){return Gt.value}),!0,Me):bt&&nt.withColumnValue(_.head(p.categoryMetadataColumns),bt[0].value,void 0,!0,Me)),v.hasDynamicSeries&&nt.withColumnValue(m,K.value,void 0,!0,Me),Rt&&v.metadata.xGroupMetadata.isCategoricalAxis?nt.withMultipleColumnAndValues(p.categoryMetadataColumns,_t,!0,Me):nt.withColumnValue(_e.xCol,_t[0],ra,!1,pt),nt.withColumnValue(_e.yCol,$t,Wa,!1,pt).withColumnValue(_e.size,Ma.size,Bt,!1,pt);var Ct=v.gradientIndex,Lt=Ve.valueSources;if(Ct>=0){var Wt=(0,qe.NA)(p.category.values[Ct].objects,Nt);nt.withColumnValue(Lt[Ct],p.category.values[Ct].value,Wt,!1,pt)}(R=v.playFrameInfo)&&nt.withValue(R.column.displayName,R.label);for(var Et=0,St=v.tooltipValuesIndices;Et<St.length;Et++){var jt=St[Et],na=(Wt=(0,qe.NA)(p.category.values[jt].objects,Nt),z(oa,H,dt,jt));nt.withColumnValue(Lt[jt],p.category.values[na].value,Wt,!1,pt)}}var ya=_.size(_t)>1?_t.join(" "):_t[0],sa=oa?ya:at(),fa=v.categoryMap,aa=String(sa),It=fa[aa];if(void 0===It){fa[aa]=It=v.categoryMapNextIndex,v.categoryMapNextIndex=It+1;var za=v.categoryIdentities;za&&(za[It]=function(){var Aa=F.dw.builder();if(!_.isEmpty(p.categoryMetadataColumns))for(var Gt=function(ii){var Ai=p.category.levelValues.map(function(Ia){return{expr:ii.expr,formattedValue:ge.WU(Ia.value,ii.format),value:Ia.value,identity:p.category.identity}});Aa.withColumnIdentity(p.category.identity,ii.queryName,Ai)},_a=0,Da=p.categoryMetadataColumns;_a<Da.length;_a++)Gt(Da[_a]);return Aa.withMeasures(V).createSelectionId()})}return{x:ya,y:$t,marker:Ma,radius:Ma.size,xFormatString:ra,yFormatString:Wa,formattedCategory:new lt.o(function(){return p.categoryFormatter.format(at())}),selected:!1,identity:be,renderIdentity:null!==(Pe=Ca?.createSelectionId())&&void 0!==Pe?Pe:be,tooltipInfo:function(){return nt.getTooltipItems()},labelFill:v.dataLabelSettings.fontProperties.color,categoryIndex:It,seriesIndex:H||0}}}}function z(p,k,G,ee){return p&&null!=k?k*G+ee:ee}function L(p,k,G){p??(p={});var ee=Ke.v.create(G),U=De(G),Z=(0,qe.W7)(p,{objectName:"dataPoint",propertyName:"defaultColor"});Z&&(U.marker.color=Z);var Pe=(0,vt.JO)(p,ce.il.markers,U.marker);Pe.rangeType=(0,qe.NA)(p,ce.il.markers.rangeType,U.marker.rangeType),Pe.multiplier=(0,ft.HN)((0,qe.NA)(p,ce.il.bubbles.bubbleSize));var je={fillPointStyle:(0,qe.NA)(p,ce.il.fillPoint.style,j.f.fillOnly),colorBorder:(0,qe.NA)(p,ce.il.colorBorder.show,U.colorBorder),colorByCategory:(0,qe.NA)(p,ce.il.colorByCategory.show,U.colorByCategory),marker:Pe,plotAreaShadingSettings:{show:(0,qe.NA)(p,ce.il.plotAreaShading.show,U.plotAreaShadingSettings.show),upperShadingColor:E(ee,p,ce.il.plotAreaShading.upperShadingColor,U.plotAreaShadingSettings.upperShadingColor),lowerShadingColor:E(ee,p,ce.il.plotAreaShading.lowerShadingColor,U.plotAreaShadingSettings.lowerShadingColor),transparency:(0,qe.NA)(p,ce.il.plotAreaShading.transparency,U.plotAreaShadingSettings.transparency)},ratioLineSettings:(0,d.pi)((0,d.pi)({},(0,Mt.QI)(p,ce.il.ratioLine,U.ratioLineSettings)),{strokeColor:ee.getColorForPropertyWithDefaultColor(p,ce.il.ratioLine.strokeColor,U.ratioLineSettings.strokeColor)}),dataVolume:(0,qe.NA)(p,ce.il.general.dataVolume,C),showSeries:(0,qe.NA)(p,ce.il.bubbles.showSeries,!0)},f=p.categoryLabels;return f&&k&&(0,Ht.ww)(f,k,void 0,G),je}function E(p,k,G,ee){return{solid:{color:p.getColorForPropertyWithDefaultColor(k,G,ee?.solid.color)}}}function B(p,k){for(var G=0,ee=p.levels.length;G<ee;G++){var U=p.levels[G],Z=_.chain(U.sources).map(function(Pe,je){return{levelSource:Pe,index:je}}).filter(function(Pe){return(0,Se.nu)(Pe.levelSource,k)}).map(function(Pe){return Pe.index}).value();if(!_.isEmpty(Z))return{levelIndex:G,levelSourceIndices:Z,column:U.sources[_.first(Z)]}}}function T(p){var k=[];return!p.xGroupMetadata&&p.xCol&&k.push(p.xCol.queryName),!p.yGroupMetadata&&p.yCol&&k.push(p.yCol.queryName),p.size&&k.push(p.size.queryName),k}function N(p,k){return p>=0?k[p]:null}},15458:function(li,la,S){"use strict";S.d(la,{In:function(){return Le},PH:function(){return ve},aD:function(){return C},ke:function(){return le},l5:function(){return me},mv:function(){return qe},nZ:function(){return lt},qo:function(){return ae},u$:function(){return ge},yV:function(){return Y}});var d=S(81337),X=S(14577),ce=S(14599),Ge=S(21181),Ke=S(80065),et=S(86108),Ht=S(52287),Pt=S(23465),Mt=S(51650),ft=S(57622),We=S(2241),kt=S(90700),rt=S(61193),xt=S(67165),Ot=S(56578),j=S(32379),vt=S(82755),At=S(96915),Ue=S(3128),Oe=S(79972),P=7,Ae=10;function lt(ye){var oe,Ce;return{type:2,card:[Se.call(this,ye),this.isXAxisCategorical()?void 0:(0,Ge.Zu)({cardName:"Visual_CategoryLabel",dataLabelSettings:null!==(Ce=null===(oe=this.data)||void 0===oe?void 0:oe.dataLabelsSettings)&&void 0!==Ce?Ce:null,isShowCategory:void 0,localize:this.localizer,props:X.CS.categoryLabels,revertToDefaultProps:X.CS.categoryLabels,showBackground:!0,showValueColor:!0,style:this.style})].filter(function(de){return de})}}function Se(ye){var Ce,de,z,L,oe=this,E=this.originalData;if(E){var Q=null!==(de=null===(Ce=E.dataPointSeries)||void 0===Ce?void 0:Ce.length)&&void 0!==de?de:0;if(0!==Q){var B=(0,vt.NA)(null===(L=null===(z=this.dataView)||void 0===z?void 0:z.metadata)||void 0===L?void 0:L.objects,X.il.bubbles.showSeries,!0),T=new Ot.CQ(new Ot.lg("markers"),"Visual_Markers",Object.values(X.il.markers).concat([X.il.bubbles.bubbleSize,X.il.bubbles.showSeries,X.il.fillPoint.style,X.il.dataPoint.showAllDataPoints,X.il.dataPoint.defaultColor,X.il.colorByCategory.show,X.CS.categoryAxis.innerPadding,X.il.colorBorder.show]),this.localizer);return T.addGroup("applySettingsTo",function(b){return b.withContainerDisabled(!B).withDisplayName("Apply_Settings_To").withCollapsible(!1).addContainer("series",function(N){if(N.withDisplayName(Q>1?"Series":"Visual_Categories").addContainerItem("all",oe.localizer("All"),function(v){Be.call(oe,{containerItemBuilder:v,marker:E.marker,selector:null,listType:"static"}),!B&&v.addSimpleSlice("showSeriesLink",function(){return new Ot.ob({descriptor:X.il.bubbles.showSeries,value:function(){},ariaLabel:"Enable_This_Setting",type:"SeriesDialogLink",resetToDefaultDescriptors:[X.il.markers.shape],warningIcon:!0}).build()},function(H){return H.withCustomDisplayName("Enable_This_Setting").withSuppressDisplayName(!0)})}),1===Q){var p=E.dataPoints.slice(0,Ue.Rl);if(p.length<2)return;for(var k=function(H){var K=H.formattedCategory.getValue();N.addContainerItem(K,K,function(Re){return Be.call(oe,{containerItemBuilder:Re,marker:H.marker,selector:(0,j.fd)(H.identity.getSelector()),listType:"perCategory"})})},G=0,ee=p;G<ee.length;G++)k(ee[G])}if(Q>1)for(var Z=function(H){N.addContainerItem(H.name,H.name,function(K){return Be.call(oe,{containerItemBuilder:K,marker:H.marker,selector:(0,j.fd)(H.identity.getSelector()),listType:"perSeries"})})},Pe=0,je=E.dataPointSeries;Pe<je.length;Pe++)Z(je[Pe])})}),this.isXAxisCategorical()&&T.addGroup("spacing",function(b){return b.withDisplayName("Visual_Spacing").addSimpleSlice("innerPadding",(0,Ue.Gf)(ye.categoryAxisData,oe.localizer))}),T.build()}}}function qe(ye){var de,z,Ce=_.first(ye).visualObjects;if(Ce.length>0){(de=Ce[0])&&de.selectorsByColumn&&(z=(0,j.fd)((0,j.tV)(de.selectorsByColumn)));var L=this.originalData.fillPointStyle===xt.f.fillOnly,E=1===this.data.dataPointSeries.length;switch(de.objectName){case"markers":var Q={data:[(0,At.Ue)(1)]};z=E?Q:z;var B=(0,d.pi)((0,d.pi)({},X.il.dataPoint.fill),{selector:z});return(0,Ke.w3)(this.hostService,L?void 0:B,L?B:void 0);case"category-labels":return(0,Ke.un)(this.hostService,{fontFamilyReference:X.CS.categoryLabels.fontFamily,fontSizeReference:X.CS.categoryLabels.fontSize,boldReference:X.CS.categoryLabels.bold,italicReference:X.CS.categoryLabels.italic,underlineReference:X.CS.categoryLabels.underline,fontColorReference:X.CS.categoryLabels.color,backgroundReference:X.CS.categoryLabels.backgroundColor});default:return}}}function ge(ye){if((0,Ot.n$)(ye)&&"dataVolume"===ye.name)return F.call(this)}function F(){if(this.originalData&&!this.playAxis&&!this.isXAxisCategorical())return{item:new Ot.vi({uidBuilder:new Ot.IN(new Ot.SS(new Ot.lg("visualPlaceholderCard"),"visualPlaceholderGroup"),"dataVolume"),control:new Ot.mu({descriptor:X.il.general.dataVolume,value:this.originalData.dataVolume,options:{minValue:{type:0,value:Oe.jI},maxValue:{type:1,value:Oe.V2}}}).build(),localize:this.localizer}).withCustomDisplayName("Visual_DataVolumeModern").build(),revertToDefaultDescriptors:[X.il.general.dataVolume]}}function C(ye){if(!(0,Ot.Qu)(ye)){if("categoryAxis"===ye.uid)return q.call(this,ye);if("valueAxis"===ye.uid)return ne.call(this,ye)}}function q(ye){var oe=this,Ce=(0,d.ev)([],ye.groups,!0);return Ce.forEach(function(de,z){(0,Ot.Qu)(de)||de.uid==="".concat("categoryAxis","-").concat("valuesScalar")&&(Ce[z]=ze.call(oe,de,!0))}),(0,d.pi)((0,d.pi)({},ye),{revertToDefaultDescriptors:(0,d.ev)((0,d.ev)([],ye.revertToDefaultDescriptors,!0),[X.il.categoryAxis.treatNullsAsZero],!1),groups:Ce})}function ne(ye){var oe=this,Ce=(0,d.ev)([],ye.groups,!0);return Ce.forEach(function(de,z){(0,Ot.Qu)(de)||de.uid==="".concat("valueAxis","-").concat("values")&&(Ce[z]=ze.call(oe,de,!1))}),(0,d.pi)((0,d.pi)({},ye),{revertToDefaultDescriptors:(0,d.ev)((0,d.ev)([],ye.revertToDefaultDescriptors,!0),[X.il.valueAxis.treatNullsAsZero],!1),groups:Ce})}function ze(ye,oe){var Ce=(0,d.ev)([],ye.slices,!0),de=(0,Ot.Qs)(ye),z=De.call(this,de,oe);return z&&Ce.push(z),(0,d.pi)((0,d.pi)({},ye),{slices:Ce})}function De(ye,oe){var Ce,de,z=this.originalData;if(z&&!(oe?z.xGroupMetadata:z.yGroupMetadata))return new Ot.vi({control:{type:"ToggleSwitch",properties:{descriptor:(0,d.pi)((0,d.pi)({},oe?X.il.categoryAxis.treatNullsAsZero:X.il.valueAxis.treatNullsAsZero),{selector:null}),value:!!(oe?null!==(Ce=z.treatNullsAsZero)&&void 0!==Ce&&Ce.x:null!==(de=z.treatNullsAsZero)&&void 0!==de&&de.y)}},localize:this.localizer,uidBuilder:ye.withSlice("showblankvalues")}).build()}function Be(ye){var oe=this,Ce=ye.selector,de=ye.marker,z=this.originalData,L=!!z.size,E={get:this.localizer,getOptional:this.localizer,format:this.localizer},Q=_.map(kt.Yu,function(B){return(0,d.pi)((0,d.pi)({},B),{displayName:B.displayName(E)})});ye.containerItemBuilder.addGroup("shape",function(B){var T;return B.withDisplayName("Visual_Shape").addSimpleSlice("markerShape",new Ot.uY({descriptor:(0,d.pi)((0,d.pi)({},X.il.markers.shape),{selector:Ce}),value:de.shape}).build(),function(b){return b.withDisabled("perCategory"===ye.listType)}).addSimpleSlice("fillStyle",new Ot.uY({descriptor:(0,d.pi)((0,d.pi)({},X.il.fillPoint.style),{selector:Ce}),value:z.fillPointStyle}).build(),function(b){return b.withDisabled(L||"static"!==ye.listType).withHidden(oe.featureSwitches.newMarkerProperties).withCustomDescriptionIf(function(){return L||!!Ce},"Visual_Scatter_Size_FormatOption_DisabledReason_FillPoint")}).addSimpleSlice("markerRangeType",new Ot.uY({descriptor:(0,d.pi)((0,d.pi)({},X.il.markers.rangeType),{selector:Ce}),items:Q,value:null!==(T=Q.find(function(b){return b.value===z.marker.rangeType}))&&void 0!==T?T:{value:kt.Dl.deprecated,displayName:oe.localizer("Visual_MarkerRangeType_Deprecated")}}).build(),function(b){return b.withDisabled(!L||"static"!==ye.listType)}).addSimpleSlice("markerSize",new Ot.JN({descriptor:(0,d.pi)((0,d.pi)({},X.il.bubbles.bubbleSize),{selector:Ce}),value:(0,et.yn)(z.marker.multiplier),options:{minValue:{type:0,value:et.Ad.min},maxValue:{type:1,value:et.Ad.max}},localize:oe.localizer}).build(),function(b){return b.withDisabled("static"!==ye.listType)}).addSimpleSlice("markerRotation",Ot.JN.getRotationSliderBuilder({descriptor:(0,d.pi)((0,d.pi)({},X.il.markers.rotation),{selector:Ce}),value:de.rotation,localize:oe.localizer}).build(),function(b){return b.withHidden(!oe.featureSwitches.newMarkerProperties||!(0,rt.Cd)(de.shape))})}).addGroup("colors",function(B){return B.withDisplayName("Generic_Color").addSimpleSlice("colorByCategory",new Ot.bd({descriptor:(0,d.pi)((0,d.pi)({},X.il.colorByCategory.show),{selector:null}),value:z.colorByCategory}).build(),function(T){return T.withCustomDisplayName("Visual_ColorByCategory").withHidden(z.hasDynamicSeries).withDisabled("static"!==ye.listType,"Visual_DisabledReason_AllSeriesOnly_Singular")}).addSimpleSlice("markerColor",new Ot.BT({descriptor:(0,d.pi)((0,d.pi)((0,d.pi)({},X.il.markers.color),{selector:"static"===ye.listType?{data:[(0,At.Ue)(1)]}:Ce,instanceKind:z.hasDynamicSeries||"perCategory"===ye.listType?1:3}),"static"===ye.listType&&{altConstantValueSelector:null}),value:{value:de.color}}).build(),function(T){return T.withCustomDisplayName("Generic_Color").withDisabled(z.hasDynamicSeries&&"static"===ye.listType,"Visual_Color_AllSeries_DisabledReason")}).addSimpleSlice("markerTransparency",Ot.JN.getTransparencySliderBuilder({descriptor:(0,d.pi)((0,d.pi)({},X.il.markers.transparency),{selector:Ce}),value:de.transparency,localize:oe.localizer}).build(),function(T){return T.withDisabled(z.hasDynamicSeries&&"static"===ye.listType,"Visual_Color_AllSeries_DisabledReason").withHidden(!oe.featureSwitches.newMarkerProperties)})}).addGroup("border",function(B){B.withDisplayName("Visual_Border").withDisabled(!(0,rt.nK)(de.shape)),oe.featureSwitches.newMarkerProperties?B.withDisabled(!(0,rt.nK)(de.shape)||"static"!==ye.listType).addSlices((0,We.Iq)({containerItemBuilder:B,descriptors:ce.$9,strokeData:de?.stroke,selector:Ce,featureSwitches:oe.featureSwitches,localize:oe.localizer}).map(function(T){return T.build()})):B.addSimpleSlice("colorBorder",new Ot.bd({descriptor:(0,d.pi)((0,d.pi)({},X.il.colorBorder.show),{selector:null}),value:z.colorBorder}).build(),function(T){return T.withCustomDisplayName("Visual_ColorBorder").withCustomDescriptionIf(function(){return!L},"Visual_Scatter_Size_FormatOption_DisabledReason").withDisabled(!L||"static"!==ye.listType).withHidden(oe.featureSwitches.newMarkerProperties)})})}function ae(ye,oe){var Ce,de,z=this.originalData;if(z)switch(oe.objectName){case"plotAreaShading":this.isPlotSymmetryShadingSupported()?ye.pushInstance({selector:null,objectName:"plotAreaShading",properties:{show:z.plotAreaShadingSettings.show,upperShadingColor:z.plotAreaShadingSettings.upperShadingColor,lowerShadingColor:z.plotAreaShadingSettings.lowerShadingColor,transparency:z.plotAreaShadingSettings.transparency}}):ye.pushInstance({selector:null,objectName:"plotAreaShading",properties:{},disabledReason:this.localizer("Visual_Scatter_SymmetryShadingNotSupported")});break;case"ratioLine":null!==(Ce=z.xCol)&&void 0!==Ce&&Ce.isMeasure&&null!==(de=z.yCol)&&void 0!==de&&de.isMeasure&&ye.pushInstance({selector:null,objectName:"ratioLine",properties:(0,We.HM)(z.ratioLineSettings,ce.vi)});break;case"general":!this.playAxis&&!this.isXAxisCategorical()&&ye.pushInstance({selector:null,objectName:"general",properties:{dataVolume:z.dataVolume},validValues:{dataVolume:{numberRange:{min:Oe.jI,max:Oe.V2}}}})}}function ve(ye){for(var oe=ye.metadata,Ce=[],de=0,z=ye.visualObjects;de<z.length;de++){var E=z[de].objectName,Q=oe?.visualObject;if(Q&&"markers"===E){var T=d3.select(Q).datum(),b=this.data.dataPointSeries[T.seriesIndex];if(b.dataPoints.length<=P)return se.call(this,b);var p=this.getGroupBoundingRect(b.dataPoints,this.currentViewport.scale,this.renderer.mainGraphicsContext),k=Q.getBoundingClientRect(),G=Math.max(k.height,Ae),ee=Math.max(k.width,Ae);Ce.push(w([p,{x:k.x,y:k.y,height:G,width:ee}],b.identityKey,this.renderer.mainGraphicsContext,this.currentViewport,this.margin))}}return Ce}function se(ye){var oe=[],Ce=this.renderer.mainGraphicsContext,de=this.currentViewport.scale,z=Ce.node().getBoundingClientRect(),L=z.left,E=z.top,Q=Ce.node().getBBox(),B=Q.x,T=Q.y,b={type:1,x:L-B,y:E-T,height:this.availableHeight*de,width:this.availableWidth*de},N=ye.dataPoints.map(function(k){var G=Math.max(2*k.geometry.size*de,Ae);return{x:(k.geometry.x-B)*de-G/2+L,y:(k.geometry.y-T)*de-G/2+E,width:G,height:G,type:1,clipPath:b}});return oe.push({id:ye.identityKey,outline:{type:0,outlines:N}}),oe}function w(ye,oe,Ce,de,z){for(var L=Ce.node().getBoundingClientRect(),E=L.left,Q=L.top,B=[],T=Ce.node().getBBox(),p=de.scale,k={type:1,x:E-T.x,y:Q-T.y,height:(de.height-z.top-z.bottom)*p,width:(de.width-z.left-z.right)*p},G=0,ee=ye;G<ee.length;G++){var U=ee[G];B.push({x:U.x,y:U.y,width:U.width,height:U.height,type:1,clipPath:k})}return{id:oe,outline:{type:0,outlines:B}}}function le(ye){var oe,Ce,de=ye.element,z=ye.series,L=ye.subSelectionHelper,E=ye.d3Event,Q=ye.hostServices,B=ye.showUI,T=null===(oe=z.identity)||void 0===oe?void 0:oe.getSelectorsByColumn(),N=Q.getLocalizedString("MiniToolbar_Markers",null!==(Ce=z.name)&&void 0!==Ce?Ce:Q.getLocalizedString("All")),k=L.createVisualSubSelectionForSingleObject((0,d.pi)({objectName:"markers",subSelectionType:3,displayName:N,showUI:B,selectorsByColumn:T,selectionOrigin:{x:E.clientX,y:E.clientY,offset:{x:15,y:15}}},de?{metadata:{visualObject:de}}:{}));L.subSelect(k)}function Y(ye){var de,L,Ce=_.first(ye).visualObjects;if(Ce.length>0)switch(de=Ce[0],_.isEmpty(de.selectorsByColumn)||(L=(0,j.fd)((0,j.tV)(de.selectorsByColumn))),de.objectName){case"markers":return[{type:0,excludedResetFormattingIds:[X.CS.categoryLabels.show]},(0,d.pi)((0,d.pi)({type:2},X.CS.categoryLabels.show),{enabledLabel:this.localizer("Visual_Add_CategoryLabel")}),(0,d.pi)((0,d.pi)({type:3},X.il.markers.shape),{label:this.localizer("Visual_MarkerShape"),selector:L}),(0,d.pi)((0,d.pi)({type:3},X.il.fillPoint.style),{label:this.localizer("Visual_MarkerStyle"),selector:void 0}),{type:1,destinationInfo:(0,d.pi)((0,d.pi)({},X.il.markers.shape),{selector:L}),label:this.localizer("Format_Markers")}];case"category-labels":var E="".concat("Visual","-").concat("categoryLabels");return[(0,d.pi)((0,d.pi)({type:2},X.CS.categoryLabels.show),{disabledLabel:this.localizer("Delete"),selector:void 0,keyboardShortcuts:[{key:"Delete",nextValue:!1}]}),{type:0,relatedResetFormattingIds:[X.CS.categoryLabels.enableBackground],excludedResetFormattingIds:[X.CS.categoryLabels.show]},{type:1,destinationInfo:{cardUid:E,groupUid:"".concat("categoryLabels","-").concat("values")},label:this.localizer("Format_Category_Labels")}];default:return}}function me(ye){var oe;switch(d3.select(ye).attr(Ht.Ez)){case"markers":case"category-labels":var de=d3.select(ye).datum(),z=this.data.dataPointSeries[de.seriesIndex],L=null===(oe=z?.identity)||void 0===oe?void 0:oe.getSelectorsByColumn();if(L)return L}}function Le(ye,oe){if(!this.featureSwitches.onObject||1!==oe)return[];var z=[Pt.$.create({objectName:"categoryLabels",propertyName:"backgroundColor"},this.data.dataLabelsSettings.enableBackground).onToggleEnabled(ft.W.createBooleanDataViewObjectChange({objectName:"categoryLabels",propertyName:"enableBackground"},!0))];return Mt.o.getDataViewObjectsBehaviorChanges(ye,z)}},56914:function(li,la,S){"use strict";S.d(la,{WG:function(){return Se},oz:function(){return qe}});var d=S(51995),X=S(60066),ce=S(2241),Ge=S(52287),Ke=S(72902),et=S(90700),Ht=S(64067),Pt=S(79154),Mt=S(62458),ft=S(34644),We=S(59107),kt=S(10389),rt=S(67174),xt=S(15458),Ot=S(11745),j=S(41640),vt=S(61193),At=S(80758),Ue=S(92379),Oe=function(){function ge(F){this.dataPoints=F.dataPoints,this.margin=F.margin}return ge.prototype.queryRegion=function(F){var C=this,q=(0,Ot.g6)(F,!1);return this.adjustPositionRelativeToRoot(q),_.filter(this.dataPoints,function(ze){if(void 0===ze.marker.size)return C.isPointInRect(q,ze.geometry);var De;switch(ze.geometry.markerShape){case vt.ZO.circle:De=Ue.m.circleRectangleOverlap(q,{x:ze.geometry.x,y:ze.geometry.y},ze.geometry.size);break;case vt.ZO.square:De=C.isSquareMarkerIntersect(ze.geometry,q);break;case vt.ZO.diamond:De=C.isDiamondMarkerIntersect(ze.geometry,q);break;case vt.ZO.triangle:De=C.isTriangleMarkerIntersect(ze.geometry,q);break;default:Mt.fF.assertFail("markers does not have this shape"),De=!1}return De})},ge.prototype.isSquareMarkerIntersect=function(F,C){var q={left:F.x-F.size,right:F.x+F.size,top:F.y-F.size,bottom:F.y+F.size};return(0,At.WN)(q.left,q.right,C.left,C.right)&&(0,At.WN)(q.top,q.bottom,C.top,C.bottom)},ge.prototype.isDiamondMarkerIntersect=function(F,C){if(!this.isSquareMarkerIntersect(F,C))return!1;if(this.isPointInRect(C,F))return!0;for(var ne=[{x:F.x-F.size,y:F.y},{x:F.x,y:F.y-F.size},{x:F.x+F.size,y:F.y},{x:F.x,y:F.y+F.size}],De=[{x:C.left,y:C.top},{x:C.right,y:C.top},{x:C.right,y:C.bottom},{x:C.left,y:C.bottom}],Be=[[De[0],De[1]],[De[1],De[2]],[De[3],De[2]],[De[0],De[3]]],ae=0,ve=[[ne[0],ne[1]],[ne[1],ne[2]],[ne[0],ne[3]],[ne[3],ne[2]]];ae<ve.length;ae++)for(var se=ve[ae],w=0,le=Be;w<le.length;w++){var Y=le[w];if(Ue.m.linesIntersect(se[0],se[1],Y[0],Y[1],!1))return!0}return this.isLassoInShape(F,C)},ge.prototype.isPointInRect=function(F,C){return(0,j.bl)(F.left,C.x)&&(0,j.bl)(C.x,F.right)&&(0,j.bl)(F.top,C.y)&&(0,j.bl)(C.y,F.bottom)},ge.prototype.isLassoInShape=function(F,C){var q={left:F.x-F.size,right:F.x+F.size,top:F.y-F.size,bottom:F.y+F.size};return(0,At.WN)(C.left,C.right,q.left,q.right)&&(0,At.WN)(C.top,C.bottom,q.top,q.bottom)},ge.prototype.isTriangleMarkerIntersect=function(F,C){if(!this.isSquareMarkerIntersect(F,C))return!1;if(this.isPointInRect(C,F))return!0;for(var ne=[{x:F.x-F.size,y:F.y+F.size},{x:F.x,y:F.y-F.size},{x:F.x+F.size,y:F.y+F.size}],De=[{x:C.left,y:C.top},{x:C.right,y:C.top},{x:C.right,y:C.bottom},{x:C.left,y:C.bottom}],Be=[[De[0],De[1]],[De[1],De[2]],[De[3],De[2]],[De[0],De[3]]],ae=0,ve=[[ne[0],ne[1]],[ne[1],ne[2]],[ne[0],ne[2]]];ae<ve.length;ae++)for(var se=ve[ae],w=0,le=Be;w<le.length;w++){var Y=le[w];if(Ue.m.linesIntersect(se[0],se[1],Y[0],Y[1],!1))return!0}return this.isLassoInShape(F,C)},ge.prototype.adjustPositionRelativeToRoot=function(F){F.left-=this.margin.left,F.top-=this.margin.top,F.right-=this.margin.left,F.bottom-=this.margin.top},ge}(),Se=function(){function ge(F,C){var q=this;this.hostChart=F,this.eventManager=C,this.mainGraphicsG=this.hostChart.svg.append("g").classed(ge.MainGraphicsContext.class,!0).call(function(ne){return F.mobileTileInteractive&&ne.append("rect").classed("backgroundRect",!0).attrs({width:"100%",height:"100%"})}),this.mainGraphicsContext=this.mainGraphicsG.append("svg").attr("stroke-width","1").call(function(ne){return q.hostChart.interactivityService&&ne.attrs({tabindex:0,role:"listbox","aria-multiselectable":"true",focusable:"true","aria-label":q.hostChart.localizer("Visual_Plot")}).classed(X.Pg,!We.M.isInternetExplorerOrEdge())})}return ge.prototype.markerShapesHaveChanged=function(F){var C=_.map(F.data.dataPointSeries,function(De){return De.marker.shape}),q=this.previousMarkers;if(q)for(var ne=0,ze=Math.min(C.length,q.length);ne<ze;ne++)if(C[ne]!==q[ne])return this.previousMarkers=C,!0;return this.previousMarkers=C,!1},ge.calculateRadius=function(F,C,q,ne,ze){var De,Be;void 0===ze&&(ze=1);var ae=Math.min(q.height,q.width)/this.MarkerRefChartDim;if(null==F||null==C)return ze*ge.MarkerRadiusDefault;if(ne===et.Dl.deprecated){var ve=ae*ae,se={min:this.MarkerRefChartMinPixels*ve,max:this.MarkerRefChartMaxPixels*ve},w=(C={min:Math.min(C.min||0,0),max:Math.max(C.max||0,0)}).max-C.min,le=se.max-se.min,Y=((F=Math.min(Math.max(F,C.min),C.max))-C.min)/(w||1);return Mt.fF.assert(function(){return Y>=0&&Y<=1},"valueRatio must be between 0 and 1"),ze*Math.sqrt((se.min+Y*le)/Math.PI)}ne===et.Dl.auto&&(ne=C.min>=0||C.max<=0?et.Dl.magnitude:et.Dl.dataRange),ne===et.Dl.magnitude&&(F&&(F=Math.abs(F)),C={min:0,max:Math.max(null!==(De=Math.abs(C.max))&&void 0!==De?De:0,null!==(Be=Math.abs(C.min))&&void 0!==Be?Be:0)});var oe=((F=Math.min(Math.max(F,C.min),C.max))-C.min)/(C.max-C.min||1);return Mt.fF.assert(function(){return oe>=0&&oe<=1},"valueRatio must be between 0 and 1"),ze*((ge.MarkerRadiusMax-ge.MarkerRadiusMin)*Math.sqrt(oe)+ge.MarkerRadiusMin)*ae},ge.prototype.render=function(F,C,q,ne){var De,ze=F.plotArea;if(this.mainGraphicsContext.attrs({width:ze.width,height:ze.height}).classed(X.Pg,!We.M.isInternetExplorerOrEdge()&&!!C),this.drawRatioLine(F),this.drawShadedBackground(F),F.suppressDataPointRendering)this.mainGraphicsContext.selectAll(ge.MarkerSeriesGroupCS.selector).remove(),De=this.mainGraphicsContext.selectAll(ge.MarkerCS.selector);else{var Be=ge.getXOfFirstCategory(F),ae=!this.markerShapesHaveChanged(F)&&F.animation.duration>0,ve=F.drawBubbles||ae;De=this.mainGraphicsContext.selectAll(ge.MarkerSeriesGroupCS.selector).data(ve?[{identityKey:"",dataPoints:F.data.dataPoints,marker:{show:!0,color:void 0,shape:void 0}}]:F.data.dataPointSeries,function(se){return se.identityKey}).join(function(se){return se.append("g").classed(ge.MarkerSeriesGroupCS.class,!0).attr("role","group")}).styles(function(se){return ve?{}:{"stroke-opacity":ge.getMarkerStrokeOpacity(!!F.data.size,F.data.colorBorder,F.hasSelection,!1),fill:se.marker.color,"fill-opacity":ge.getMarkerFillOpacity(!!F.data.size,F.fillMarkers,F.hasSelection,!1)}}).selectAll(ge.MarkerCS.selector).data(function(se){return se.dataPoints},function(se){return se.renderIdentity.getKey()}).join(function(se){var w;return se.append("path").classed(ge.MarkerCS.class,!0).classed(X.Pg,!We.M.isInternetExplorerOrEdge()&&!!C).classed(Ge.cy,!0).attrs((w={},w[Ge.Ez]="markers",w[Ge.QZ]=3,w.transform=function(le){var Y=F.xAxisProperties.scale(F.hasCategoricalAxis?le.categoryIndex:le.x)+Be,me=F.yAxisProperties.scale(le.y);return"translate(".concat(Y,",").concat(me,")")},w.tabindex=C?0:null,w.focusable=!!C||null,w.role="option",w)).style("opacity",0)},function(se){return ae?se:se.interrupt()},function(se){return(ae?se.transition().ease(F.animation.ease).duration(F.animation.duration).style("opacity",0).attr("r",0):se).remove()}).attrs(function(se){return ge.updateMarkerGeometry(se,F,Be),{d:(0,d.jM)(se.marker.shape,se.geometry.size),transform:"translate(".concat(se.geometry.x,",").concat(se.geometry.y,")"),"aria-selected":se.selected}}).styles({"stroke-opacity":function(w){return ge.getMarkerStrokeOpacity(null!=w.marker.size,F.data.colorBorder,F.hasSelection,w.selected)},stroke:function(w){return ge.getMarkerStrokeFill(w.marker,F.data.colorBorder)},fill:function(w,le,Y){var me=d3.select(Y[le].parentElement).datum();return ve||me.marker.color!==w.marker.color?w.marker.color:null},"fill-opacity":function(w){return ge.getMarkerFillOpacity(null!=w.marker.size,F.fillMarkers,F.hasSelection,w.selected)},opacity:ae?void 0:null}).call(function(se){return(ae?se.transition().ease(F.animation.ease).duration(F.animation.duration):se).style("opacity",1)}).each(function(se,w,le){var Y,me;if(ne){var Le=q.getLocalizedString("MiniToolbar_Markers",null!==(me=null===(Y=F.data.dataPointSeries[se.seriesIndex])||void 0===Y?void 0:Y.name)&&void 0!==me?me:q.getLocalizedString("All"));Ge.O5.setDataForElement(le[w],{getDisplayName:function(){return Le}})}})}return this.hostChart.tooltipsEnabled&&this.hostChart.tooltipService.addTooltip(this.mainGraphicsContext,function(se){var w;return null===(w=se.data)||void 0===w?void 0:w.tooltipInfo()},function(se){var w;return(null===(w=se.data)||void 0===w?void 0:w.identity)&&[se.data.identity]}),(0,kt.bL)(F.animationOptions),Mt.fF.assert(function(){return null!=F.data.dataPointSeries},"dataPointSeries must be defined"),this.numSeries=F.data.dataPointSeries.length,this.scatterChartDataPoints=F.allData.dataPoints,{dataPointsSelection:De,eventGroup:this.mainGraphicsG,data:F.data,fillMarkers:F.fillMarkers,root:this.mainGraphicsContext,visualInstanceId:q.instanceId,eventManager:this.eventManager,onMarkerSubSelection:function(w,le,Y,me,Le){(0,xt.ke)({element:w,series:F.allData.dataPointSeries[le.seriesIndex],subSelectionHelper:Y,d3Event:me,hostServices:q,showUI:Le})},hitTester:new Oe({dataPoints:F.data.dataPoints,margin:F.margin})}},ge.prototype.getNextDataPoint=function(F,C,q){var ne,ze,se,w,De=this.mainGraphicsContext.selectAll(ge.MarkerCS.selector),Be=this.scatterChartDataPoints,ae=F,ve=C;switch(q){case Ke.x0.PreviousCategory:case Ke.x0.NextCategory:w=q===Ke.x0.PreviousCategory?-1:1,se=_.sortBy(_.filter(Be,function(me){return me.seriesIndex===C}),"categoryIndex");var le=w+_.findIndex(se,function(me){return me.categoryIndex===F});le>=se.length||le<0?(ne=this.rollToNextSeries(Be,C,q),ae=ne[0],ve=ne[1]):ae=se[le].categoryIndex;break;case Ke.x0.PreviousSeries:case Ke.x0.NextSeries:w=q===Ke.x0.PreviousSeries?-1:1,se=_.sortBy(_.filter(Be,function(me){return me.categoryIndex===F}),"seriesIndex");var Y=w+_.findIndex(se,function(me){return me.seriesIndex===C});Y>=se.length||Y<0?(ze=this.rollToNextCategory(Be,F,q),ae=ze[0],ve=ze[1]):ve=se[Y].seriesIndex}return{element:De.filter(function(me){return me.seriesIndex===ve&&me.categoryIndex===ae}).node(),targetCategoryIndex:ae}},ge.prototype.rollToNextSeries=function(F,C,q){Mt.fF.assert(function(){return q===Ke.x0.PreviousCategory||q===Ke.x0.NextCategory},"expected a direction having to do with category");for(var De,ne=q===Ke.x0.PreviousCategory?-1:1,ze=q===Ke.x0.PreviousCategory?_.last:_.first;_.isEmpty(De);)(C+=ne)>=this.numSeries?C=0:C<0&&(C=this.numSeries-1),De=_.sortBy(_.filter(F,function(ae){return ae.seriesIndex===C}),function(ae){return ae.categoryIndex});return[ze(De).categoryIndex,C]},ge.prototype.rollToNextCategory=function(F,C,q){Mt.fF.assert(function(){return q===Ke.x0.PreviousSeries||q===Ke.x0.NextSeries},"expected a direction having to do with series");for(var Be,ne=d3.max(F,function(ve){return ve.categoryIndex})+1,ze=q===Ke.x0.PreviousSeries?-1:1,De=q===Ke.x0.PreviousSeries?_.last:_.first;_.isEmpty(Be);)(C+=ze)>=ne?C=0:C<0&&(C=ne-1),Be=_.sortBy(_.filter(F,function(ve){return ve.categoryIndex===C}),function(ve){return ve.seriesIndex});var ae=De(Be).seriesIndex;return[C,ae]},ge.prototype.getFirstElement=function(){return{element:this.mainGraphicsContext.selectAll(ge.MarkerCS.selector).node()}},ge.prototype.drawShadedBackground=function(F){var C=F.data.plotAreaShadingSettings,q=C.show&&F.supportsPlotAreaSymmetryShading,ne=this.hostChart.svg.selectAll(ge.PlotAreaShadingLayerCS.selector).data(q?[1]:[]).join(function(Y){return Y.insert("svg",":first-child").classed(ge.PlotAreaShadingLayerCS.class,!0).style("pointer-events","none")}).attrs({height:F.plotArea.height,width:F.plotArea.width});if(q){var ze=F.xAxisProperties.scale,De=F.yAxisProperties.scale,Be=ze.domain(),ae=De.domain(),ve=[Math.min(Be[0],ae[0]),Math.max(Be[1],ae[1])],se=[{x:ze(ve[0]),y:De(ve[0])},{x:ze(ve[1]),y:De(ve[1])}];this.drawArea(ge.UpperShadingAreaCS,ne,C.show?[[{x:se[0].x,y:se[0].y},{x:se[0].x,y:se[1].y}],[{x:se[1].x,y:se[1].y},{x:se[1].x,y:se[1].y}]]:[],C.upperShadingColor,C.transparency),this.drawArea(ge.LowerShadingAreaCS,ne,C.show?[[{x:se[0].x,y:se[0].y},{x:se[0].x,y:se[0].y}],[{x:se[1].x,y:se[0].y},{x:se[1].x,y:se[1].y}]]:[],C.lowerShadingColor,C.transparency)}},ge.prototype.drawRatioLine=function(F){var C=F.data.ratioLineSettings,q=this.hostChart.svg.selectAll(ge.RatioLineLayerCS.selector).data(C?.strokeShow?[1]:[]).join(function(Y){return Y.append("svg").classed(ge.RatioLineLayerCS.class,!0)}).attrs({height:F.plotArea.height,width:F.plotArea.width});if(C?.strokeShow){var ne=F.xAxisProperties.scale,ze=F.yAxisProperties.scale,De=ne.domain(),Be=ze.domain(),ae=F.data.xSubtotal,ve=F.data.ySubtotal,se=[];if(_.isFinite(ae)&&_.isFinite(ve))if(0!==ae&&0!==ve){var w=ve/ae;se=[{x:ne(De[0]),y:ze(De[0]*w)},{x:ne(De[1]),y:ze(De[1]*w)}]}else 0!==ve?se=[{x:ne(0),y:ze(Be[0])},{x:ne(0),y:ze(Be[1])}]:0!==ae&&(se=[{x:ne(De[0]),y:ze(0)},{x:ne(De[1]),y:ze(0)}]);var le=d3.line().x(function(Y){return Y.x}).y(function(Y){return Y.y});q.selectAll(ge.RatioLineCS.selector).data([se]).join(function(Y){return Y.append("path").classed(ge.RatioLineCS.class,!0)}).attr("d",function(Y){return le(Y)}).style("fill","none").styles((0,ce.bc)(C))}},ge.getXOfFirstCategory=function(F){if(F.hasCategoricalAxis){var C=F.xAxisProperties.scale;if((0,ft._9)(C))return C.bandwidth()/2}return 0},ge.getMarkerFillOpacity=function(F,C,q,ne){return F||C?q&&!ne?.4:.85:0},ge.getMarkerStrokeOpacity=function(F,C,q,ne){return F&&C?1:q&&!ne?.4:.85},ge.getMarkerStrokeFill=function(F,C){if(null!=F.size&&C){var q=(0,Ht.WV)(F.color);return q?(0,Ht.Bx)((0,Ht._j)(q,63.75)):F.color}return F.color},ge.updateMarkerGeometry=function(F,C,q){F.geometry={size:ge.calculateRadius(F.radius,C.data.sizeRange,C.plotArea,C.data.marker.rangeType,C.data.marker.multiplier),markerShape:C.data.marker.shape,x:C.xAxisProperties.scale(C.hasCategoricalAxis?F.categoryIndex:F.x)+q,y:C.yAxisProperties.scale(F.y)}},ge.prototype.drawArea=function(F,C,q,ne,ze){var De=d3.area().x0(function(Be){return Be[0].x}).y0(function(Be){return Be[0].y}).x1(function(Be){return Be[1].x}).y1(function(Be){return Be[1].y});C.selectAll(F.selector).data([q]).join(function(Be){return Be.append("path").classed(F.class,!0)}).attr("d",function(Be){return De(Be)}).styles({fill:ne.solid.color,"fill-opacity":(0,Ht.TD)(ze)})},ge.MarkerCS=(0,Pt.CH)("scatterMarker"),ge.MainGraphicsContext=(0,Pt.CH)("mainGraphicsContext"),ge.MarkerSeriesGroupCS=(0,Pt.CH)("scatterMarkerSeriesGroup"),ge.PlotAreaShadingLayerCS=(0,Pt.CH)("plotAreaShadingLayer"),ge.UpperShadingAreaCS=(0,Pt.CH)("upperShadingArea"),ge.LowerShadingAreaCS=(0,Pt.CH)("lowerShadingArea"),ge.RatioLineLayerCS=(0,Pt.CH)("ratioLineLayer"),ge.RatioLineCS=(0,Pt.CH)("ratioLine"),ge.MarkerRefChartDim=300,ge.MarkerRefChartMinPixels=4,ge.MarkerRefChartMaxPixels=3e3,ge.MarkerRadiusDefault=6,ge.MarkerRadiusMax=30,ge.MarkerRadiusMin=2,ge}(),qe=function(){function ge(F,C){this.viewModel=F,this.hostChart=C}return ge.prototype.remove=function(){this.hostChart.svg.selectAll(ge.TraceLineCS.selector).remove(),this.hostChart.svg.selectAll(ge.TraceBubbleCS.selector).remove()},ge.prototype.render=function(F,C){var q=this.viewModel,ne=q.viewModel,ze=[];if(_.isEmpty(F)||ne.suppressDataPointRendering)this.remove();else{for(var De=q.data.currentFrameIndex,Be=[],ae=0,ve=F.length;ae<ve;ae++){ze[ae]=[],Be[ae]=!1;for(var se=0,w=q.data.allChartData.length;se<w&&se<=De;se++){var le=_.find(q.data.allChartData[se].dataPoints,function(b){var p=F[ae];return p.renderIdentity?b.renderIdentity.getKey()===p.renderIdentity.getKey():b.identity.getKey()===F[ae].identity.getKey()});null!=le&&(le.frameIndex=se,ze[ae].push(le),se===De&&(Be[ae]=!0))}}var Y=ne.xAxisProperties.scale,me=ne.yAxisProperties.scale,Le=d3.line().x(function(b){return Y(b.x)}).y(function(b){return me(b.y)}).defined(function(b){return null!==b.x&&null!==b.y}),ye=[],oe=[],Ce=!1,de=this.hostChart.svg.selectAll(ge.TraceLineCS.selector).data(F,function(b){return b.renderIdentity.getKey()}).join(function(b){return b.append("path").classed(ge.TraceLineCS.class,!0)}).each(function(b,N,p){var k=p[N],G=k.hasAttribute("d")?k.getTotalLength():0;ye.push(G);var ee=$("<svg><path></path></svg>"),U=$("path",ee);U.attr("d",Le(ze[N]));var Z=ze[N].length>0?U.get()[0].getTotalLength():0;oe.push(Z),Ce||(Ce=Z<G)});Ce?C?de.transition().ease(rt.Je.ease).duration(rt.Je.duration).attr("stroke-dashoffset",function(b,N){return ye[N]-oe[N]}).transition().ease(rt.Je.ease).duration(1).delay(0).style("stroke",function(b){return Se.getMarkerStrokeFill(b.marker,!0)}).attrs({d:function(N,p){return Le(ze[p])},"stroke-dasharray":function(N,p){return"".concat(oe[p]," ").concat(oe[p])},"stroke-dashoffset":0}):de.style("stroke",function(b){return Se.getMarkerStrokeFill(b.marker,!0)}).attrs({d:function(N,p){return Le(ze[p])},"stroke-dasharray":function(N,p){return"".concat(oe[p]," ").concat(oe[p])},"stroke-dashoffset":0}):de.style("stroke",function(b){return Se.getMarkerStrokeFill(b.marker,!0)}).attrs({d:function(N,p){return Le(ze[p])},"stroke-dasharray":function(N,p){return"".concat(oe[p]," ").concat(oe[p])},"stroke-dashoffset":function(N,p){return oe[p]-ye[p]}}).call(function(b){return C?b.transition().ease(rt.Je.ease).duration(rt.Je.duration):b}).attr("stroke-dashoffset",0);for(var z=[],L=0;L<ze.length;L++){var E=ze[L],Q=Be[L]?E.slice(0,E.length-1):E;z=z.concat(Q)}var B=Se.getXOfFirstCategory(ne),T=this.hostChart.svg.selectAll(ge.TraceBubbleCS.selector).data(z.sort(function(b,N){return N.marker.size-b.marker.size}),function(b){return b.renderIdentity.getKey()+b.x+b.y+b.marker.size}).join(function(b){return b.append("path").classed(ge.TraceBubbleCS.class,!0).style("opacity",0)},function(b){return b},function(b){return b.transition().ease(rt.Je.ease).duration(rt.Je.duration).style("opacity",0).remove()}).attrs(function(b){return Se.updateMarkerGeometry(b,ne,B),{d:(0,d.jM)(b.marker.shape,b.geometry.size),transform:"translate(".concat(b.geometry.x,",").concat(b.geometry.y,")")}}).styles({"stroke-opacity":function(N){return N.selected?.85:.4},stroke:function(N){return Se.getMarkerStrokeFill(N.marker,q.data.chartData.colorBorder)},fill:function(N){return N.marker.color},"fill-opacity":function(N){return null!=N.marker.size?.2+N.frameIndex/De*.6:0}}).call(function(b){return b.transition().ease(rt.Je.ease).duration(rt.Je.duration).style("opacity",1)});this.hostChart.tooltipsEnabled&&this.hostChart.tooltipService.addTooltip(T,function(b){var N;return null===(N=b.data)||void 0===N?void 0:N.tooltipInfo()},function(b){var N;return(null===(N=b.data)||void 0===N?void 0:N.identity)&&[b.data.identity]})}},ge.TraceLineCS=(0,Pt.CH)("traceLine"),ge.TraceBubbleCS=(0,Pt.CH)("traceBubble"),ge}()},58778:function(li,la,S){"use strict";S.d(la,{B:function(){return Ke}});var d=S(62458),X=S(38078),ce="BubblingEventListeners",Ge="BubblingEventManager",Ke=function(){function kt(rt){this.root=rt,this.registeredBubblingEvents={},this.registeredCapturedEvents={},this.rootNode=rt.node(),(0,X.aT)(this.rootNode,Ge,this)}return kt.prototype.ensureEventRegistered=function(rt,xt){var Ot=this,j=xt?this.registeredCapturedEvents:this.registeredBubblingEvents;if(!j[rt]){j[rt]=!0;var vt=xt?ft:We,At="".concat(rt,".").concat(Ge);xt&&(At+="Capture"),this.root.on(At,function(){vt(Ot.root)},xt)}},kt.prototype.on=function(rt,xt,Ot,j){var vt=function(kt){var rt=kt.indexOf(".");return-1===rt?kt:kt.substr(0,rt)}(xt);this.ensureEventRegistered(vt,!!j);var At=Ht(rt,!0);if(At){var Ue=At[vt];Ue||(At[vt]=Ue={bubbling:{},captured:{}}),(j?Ue.captured:Ue.bubbling)[xt]=Ot}},kt}();function Ht(kt,rt){var xt=(0,X.aT)(kt,ce);if(!xt){if(!rt)return;(0,X.aT)(kt,ce,xt={})}return xt}function Pt(kt){for(var rt in kt){var xt=kt[rt];xt&&xt()}}function Mt(kt,rt){for(var xt=kt.node(),Ot=d3.event,j=Ot.target;j;){var vt=Ht(j,!1);if(vt){var At=vt[Ot.type];At&&rt(At)}if(j===xt)break;d.fF.assert(function(){return!(0,X.aT)(j,Ge)},"BubblingEventManagers cannot overlap"),j=j.parentElement}}function ft(kt){var rt=[];Mt(kt,function(Ot){var j=Ot.captured;j&&rt.push(j)});for(var xt=rt.length;xt-- >0;)Pt(rt[xt])}function We(kt){Mt(kt,function(rt){var xt=rt.bubbling;xt&&Pt(xt)})}},60810:function(li,la,S){"use strict";S.d(la,{G:function(){return d},J:function(){return X}});var d=function(ce){return ce[ce.NoOperation=0]="NoOperation",ce[ce.WaitingForData=1]="WaitingForData",ce[ce.TriggeredLoadMore=2]="TriggeredLoadMore",ce}({}),X=function(){function ce(Ge){this.hostServices=Ge,this.waitingForData=!1}return ce.prototype.shouldLoadMoreData=function(){return this.shouldLoadMoreDataInternal()===d.TriggeredLoadMore},ce.prototype.isLoadingMoreData=function(){return this.waitingForData},ce.prototype.updateDataView=function(Ge){this.dataView=Ge},ce.prototype.loadMoreData=function(){var Ge=this.shouldLoadMoreDataInternal();return Ge===d.TriggeredLoadMore&&(this.hostServices.loadMoreData(),this.waitingForData=!0),Ge},ce.prototype.onLoadMoreDataCompleted=function(){this.waitingForData=!1},ce.prototype.shouldLoadMoreDataInternal=function(){if(!this.dataView)return d.NoOperation;var Ge=this.dataView.metadata;return this.waitingForData?d.WaitingForData:Ge&&Ge.segment?d.TriggeredLoadMore:d.NoOperation},ce}()},81551:function(li,la,S){"use strict";S.d(la,{E:function(){return d}});var d=function(){return function(ce,Ge){this.x=ce||0,this.y=Ge||0}}()},34644:function(li,la,S){"use strict";S.d(la,{Ad:function(){return X},LL:function(){return Ge},_9:function(){return ce}});var d=S(62458);function X(Ke){switch(Ke){case"linear":return d3.easeLinear;case"cubic-in-out":return d3.easeCubicInOut;case"cubic-out":return d3.easeCubicOut;case"back":return d3.easeBack;default:d.fF.assertNever(Ke)}return d3.easeCubicInOut}function ce(Ke){return!!Ke.bandwidth}function Ge(Ke,et){var Ht=Ke.selectAll(_.map(et,function(Pt){return Pt.selector}).join(", ")).nodes();Ht.sort(function(Pt,Mt){for(var ft=0,We=0;We<et.length;We++)ft+=+d3.select(Pt).classed(et[We].class)*We,ft-=+d3.select(Mt).classed(et[We].class)*We;return ft}),d3.selectAll(Ht).order()}}}]);