"use strict";(self.webpackChunkreportServerHostModern=self.webpackChunkreportServerHostModern||[]).push([["imageVisual"],{14021:function(v,m,a){a.r(m),a.d(m,{ImageVisual:function(){return y}});var h=a(83479),u=a(48966),p=a(59107),l=a(56578),f=a(38078),y=function(){function t(){this.scalingType=u.C.normal}return t.prototype.init=function(i){this.element=i.element,this.hostServices=i.host,this.featureSwitches=i.featureSwitches},t.prototype.enumerateObjectInstances=function(i){return"imageScaling"===i.objectName?this.enumerateImageScaling():null},t.prototype.getFormattingModel=function(){var i=this;return new l.Nq(function(){return i.getStyleCard()},function(){return i.getVisualLinkPlaceholder()}).build()},t.prototype.getStyleCard=function(){var n,i=this,r=h._g.imageScaling;return new l.CQ(new l.lg("style"),null!==(n=this.featureSwitches)&&void 0!==n&&n.onObject?"Visual_ImageStyle":"Style",[r.imageScalingType],function(g){return i.hostServices.getLocalizedString(g)}).addGroup("default",function(o){o.addSimpleSlice("scaling",new l.uY({descriptor:r.imageScalingType,value:i.scalingType}).build())}).build()},t.prototype.getVisualLinkPlaceholder=function(){return(0,l.UH)("actions")},t.prototype.enumerateImageScaling=function(){return[{selector:null,objectName:"imageScaling",properties:{imageScalingType:this.scalingType}}]},t.prototype.onViewModeChanged=function(i){this.updateVisualLinkProps()},t.prototype.update=function(i){var n=this,r=i.dataViews;if(r&&0!==r.length){var s=r[0].metadata.objects;if(s&&s.general){var e=this.imageBackgroundElement;e||((e=$("<div class='imageBackground' ></div>")).click(function(c){var d={type:0,visualObjects:[{objectName:"image",selectorsByColumn:{}}],isCtrlOrMetaKey:p.M.isCtrlOrMeta(c),isShiftKey:c.shiftKey,position:{x:c.clientX,y:c.clientY}};n.hostServices.onSelecting(d),1===d.action&&c.stopPropagation()}),this.imageBackgroundElement=e,this.imageBackgroundElement.appendTo(this.element));var o=i.viewport;e.css("height",o.height),e.css("width",o.width),this.scalingType=s.imageScaling?s.imageScaling.imageScalingType.toString():u.C.normal;var g=s.general.imageUrl;f.b$.isLocalUrl(g)&&e.css("backgroundImage","url("+g+")"),e.css("background-size",this.scalingType===u.C.fit?"100% 100%":this.scalingType===u.C.fill?"cover":"contain"),this.updateVisualLinkProps()}}},t.prototype.updateVisualLinkProps=function(){var i=this.hostServices.getVisualLinkProperties();i&&this.imageBackgroundElement&&this.imageBackgroundElement.css("cursor",i.hasVisualLink?"pointer":"inherit")},t}()}}]);