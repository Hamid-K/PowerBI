(self.webpackChunkdesktopDataExplore=self.webpackChunkdesktopDataExplore||[]).push([["cartesianVisuals","cartesianChart"],{45863:function(ci,va){var b,K;void 0!==(K="function"==typeof(b=function(){"use strict";var oe="14.6.2";function Ge(p){p.parentElement.removeChild(p)}function $e(p){return null!=p}function Gt(p){p.preventDefault()}function We(p){return"number"==typeof p&&!isNaN(p)&&isFinite(p)}function kt(p,f,W){W>0&&(j(p,f),setTimeout(function(){vt(p,f)},W))}function rt(p){return Math.max(Math.min(p,100),0)}function St(p){return Array.isArray(p)?p:[p]}function Pt(p){var f=(p=String(p)).split(".");return f.length>1?f[1].length:0}function j(p,f){p.classList&&!/\s/.test(f)?p.classList.add(f):p.className+=" "+f}function vt(p,f){p.classList&&!/\s/.test(f)?p.classList.remove(f):p.className=p.className.replace(new RegExp("(^|\\b)"+f.split(" ").join("|")+"(\\b|$)","gi")," ")}function ze(p){var f=void 0!==window.pageXOffset,W="CSS1Compat"===(p.compatMode||"");return{x:f?window.pageXOffset:W?p.documentElement.scrollLeft:p.body.scrollLeft,y:f?window.pageYOffset:W?p.documentElement.scrollTop:p.body.scrollTop}}function ot(p,f){return 100/(f-p)}function ge(p,f,W){return 100*f/(p[W+1]-p[W])}function V(p,f){for(var W=1;p>=f[W];)W+=1;return W}function A(p,f,W){if(W>=p.slice(-1)[0])return 100;var G=V(W,p),Me=f[G-1],Ee=f[G];return Me+function(p,f){return ge(p,p[0]<0?f+Math.abs(p[0]):f-p[0],0)}([p[G-1],p[G]],W)/ot(Me,Ee)}function te(p,f,W,G){if(100===G)return G;var Ce=V(G,p),Fe=p[Ce-1],Me=p[Ce];return W?G-Fe>(Me-Fe)/2?Me:Fe:f[Ce-1]?p[Ce-1]+function(p,f){return Math.round(p/f)*f}(G-p[Ce-1],f[Ce-1]):G}function Ne(p,f,W){var G;if("number"==typeof f&&(f=[f]),!Array.isArray(f))throw new Error("noUiSlider ("+oe+"): 'range' contains invalid value.");if(!We(G="min"===p?0:"max"===p?100:parseFloat(p))||!We(f[0]))throw new Error("noUiSlider ("+oe+"): 'range' value isn't numeric.");W.xPct.push(G),W.xVal.push(f[0]),G?W.xSteps.push(!isNaN(f[1])&&f[1]):isNaN(f[1])||(W.xSteps[0]=f[1]),W.xHighestCompleteStep.push(0)}function be(p,f,W){if(f){if(W.xVal[p]===W.xVal[p+1])return void(W.xSteps[p]=W.xHighestCompleteStep[p]=W.xVal[p]);W.xSteps[p]=ge([W.xVal[p],W.xVal[p+1]],f,0)/ot(W.xPct[p],W.xPct[p+1]);var Ce=Math.ceil(Number(((W.xVal[p+1]-W.xVal[p])/W.xNumSteps[p]).toFixed(3))-1);W.xHighestCompleteStep[p]=W.xVal[p]+W.xNumSteps[p]*Ce}}function Ie(p,f,W){this.xPct=[],this.xVal=[],this.xSteps=[W||!1],this.xNumSteps=[!1],this.xHighestCompleteStep=[],this.snap=f;var G,Ce=[];for(G in p)p.hasOwnProperty(G)&&Ce.push([p[G],G]);for(Ce.sort(Ce.length&&"object"==typeof Ce[0][0]?function(Fe,Me){return Fe[0][0]-Me[0][0]}:function(Fe,Me){return Fe[0]-Me[0]}),G=0;G<Ce.length;G++)Ne(Ce[G][1],Ce[G][0],this);for(this.xNumSteps=this.xSteps.slice(0),G=0;G<this.xNumSteps.length;G++)be(G,this.xNumSteps[G],this)}Ie.prototype.getDistance=function(p){var f,W=[];for(f=0;f<this.xNumSteps.length-1;f++){var G=this.xNumSteps[f];if(G&&p/G%1!=0)throw new Error("noUiSlider ("+oe+"): 'limit', 'margin' and 'padding' of "+this.xPct[f]+"% range must be divisible by step.");W[f]=ge(this.xVal,p,f)}return W},Ie.prototype.getAbsoluteDistance=function(p,f,W){var G=0;if(p<this.xPct[this.xPct.length-1])for(;p>this.xPct[G+1];)G++;else p===this.xPct[this.xPct.length-1]&&(G=this.xPct.length-2);!W&&p===this.xPct[G+1]&&G++;var Ce,Fe=1,Me=f[G],Ee=0,Ye=0,tt=0,dt=0;for(Ce=W?(p-this.xPct[G])/(this.xPct[G+1]-this.xPct[G]):(this.xPct[G+1]-p)/(this.xPct[G+1]-this.xPct[G]);Me>0;)Ee=this.xPct[G+1+dt]-this.xPct[G+dt],f[G+dt]*Fe+100-100*Ce>100?(Ye=Ee*Ce,Fe=(Me-100*Ce)/f[G+dt],Ce=1):(Ye=f[G+dt]*Ee/100*Fe,Fe=0),W?(tt-=Ye,this.xPct.length+dt>=1&&dt--):(tt+=Ye,this.xPct.length-dt>=1&&dt++),Me=f[G+dt]*Fe;return p+tt},Ie.prototype.toStepping=function(p){return A(this.xVal,this.xPct,p)},Ie.prototype.fromStepping=function(p){return function(p,f,W){if(W>=100)return p.slice(-1)[0];var G=V(W,f),Me=f[G-1];return function(p,f){return f*(p[1]-p[0])/100+p[0]}([p[G-1],p[G]],(W-Me)*ot(Me,f[G]))}(this.xVal,this.xPct,p)},Ie.prototype.getStep=function(p){return te(this.xPct,this.xSteps,this.snap,p)},Ie.prototype.getDefaultStep=function(p,f,W){var G=V(p,this.xPct);return(100===p||f&&p===this.xPct[G-1])&&(G=Math.max(G-1,1)),(this.xVal[G]-this.xVal[G-1])/W},Ie.prototype.getNearbySteps=function(p){var f=V(p,this.xPct);return{stepBefore:{startValue:this.xVal[f-2],step:this.xNumSteps[f-2],highestStep:this.xHighestCompleteStep[f-2]},thisStep:{startValue:this.xVal[f-1],step:this.xNumSteps[f-1],highestStep:this.xHighestCompleteStep[f-1]},stepAfter:{startValue:this.xVal[f],step:this.xNumSteps[f],highestStep:this.xHighestCompleteStep[f]}}},Ie.prototype.countStepDecimals=function(){var p=this.xNumSteps.map(Pt);return Math.max.apply(null,p)},Ie.prototype.convert=function(p){return this.getStep(this.toStepping(p))};var J={to:function(f){return void 0!==f&&f.toFixed(2)},from:Number},ce={target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",touchArea:"touch-area",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",textDirectionLtr:"txt-dir-ltr",textDirectionRtl:"txt-dir-rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"};function ne(p){if(function(p){return"object"==typeof p&&"function"==typeof p.to&&"function"==typeof p.from}(p))return!0;throw new Error("noUiSlider ("+oe+"): 'format' requires 'to' and 'from' methods.")}function P(p,f){if(!We(f))throw new Error("noUiSlider ("+oe+"): 'step' is not numeric.");p.singleStep=f}function ae(p,f){if(!We(f))throw new Error("noUiSlider ("+oe+"): 'keyboardPageMultiplier' is not numeric.");p.keyboardPageMultiplier=f}function Y(p,f){if(!We(f))throw new Error("noUiSlider ("+oe+"): 'keyboardDefaultStep' is not numeric.");p.keyboardDefaultStep=f}function se(p,f){if("object"!=typeof f||Array.isArray(f))throw new Error("noUiSlider ("+oe+"): 'range' is not an object.");if(void 0===f.min||void 0===f.max)throw new Error("noUiSlider ("+oe+"): Missing 'min' or 'max' in 'range'.");if(f.min===f.max)throw new Error("noUiSlider ("+oe+"): 'range' 'min' and 'max' cannot be equal.");p.spectrum=new Ie(f,p.snap,p.singleStep)}function Ae(p,f){if(f=St(f),!Array.isArray(f)||!f.length)throw new Error("noUiSlider ("+oe+"): 'start' option is incorrect.");p.handles=f.length,p.start=f}function fe(p,f){if(p.snap=f,"boolean"!=typeof f)throw new Error("noUiSlider ("+oe+"): 'snap' option must be a boolean.")}function ie(p,f){if(p.animate=f,"boolean"!=typeof f)throw new Error("noUiSlider ("+oe+"): 'animate' option must be a boolean.")}function Se(p,f){if(p.animationDuration=f,"number"!=typeof f)throw new Error("noUiSlider ("+oe+"): 'animationDuration' option must be a number.")}function le(p,f){var G,W=[!1];if("lower"===f?f=[!0,!1]:"upper"===f&&(f=[!1,!0]),!0===f||!1===f){for(G=1;G<p.handles;G++)W.push(f);W.push(!1)}else{if(!Array.isArray(f)||!f.length||f.length!==p.handles+1)throw new Error("noUiSlider ("+oe+"): 'connect' option doesn't match handle count.");W=f}p.connect=W}function Oe(p,f){switch(f){case"horizontal":p.ort=0;break;case"vertical":p.ort=1;break;default:throw new Error("noUiSlider ("+oe+"): 'orientation' option is invalid.")}}function et(p,f){if(!We(f))throw new Error("noUiSlider ("+oe+"): 'margin' option must be numeric.");0!==f&&(p.margin=p.spectrum.getDistance(f))}function ut(p,f){if(!We(f))throw new Error("noUiSlider ("+oe+"): 'limit' option must be numeric.");if(p.limit=p.spectrum.getDistance(f),!p.limit||p.handles<2)throw new Error("noUiSlider ("+oe+"): 'limit' option is only supported on linear sliders with 2 or more handles.")}function at(p,f){var W;if(!We(f)&&!Array.isArray(f))throw new Error("noUiSlider ("+oe+"): 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(f)&&2!==f.length&&!We(f[0])&&!We(f[1]))throw new Error("noUiSlider ("+oe+"): 'padding' option must be numeric or array of exactly 2 numbers.");if(0!==f){for(Array.isArray(f)||(f=[f,f]),p.padding=[p.spectrum.getDistance(f[0]),p.spectrum.getDistance(f[1])],W=0;W<p.spectrum.xNumSteps.length-1;W++)if(p.padding[0][W]<0||p.padding[1][W]<0)throw new Error("noUiSlider ("+oe+"): 'padding' option must be a positive number(s).");if((f[0]+f[1])/(p.spectrum.xVal[p.spectrum.xVal.length-1]-p.spectrum.xVal[0])>1)throw new Error("noUiSlider ("+oe+"): 'padding' option must not exceed 100% of the range.")}}function B(p,f){switch(f){case"ltr":p.dir=0;break;case"rtl":p.dir=1;break;default:throw new Error("noUiSlider ("+oe+"): 'direction' option was not recognized.")}}function S(p,f){if("string"!=typeof f)throw new Error("noUiSlider ("+oe+"): 'behaviour' must be a string containing options.");var W=f.indexOf("tap")>=0,G=f.indexOf("drag")>=0,Ce=f.indexOf("fixed")>=0,Fe=f.indexOf("snap")>=0,Me=f.indexOf("hover")>=0,Ee=f.indexOf("unconstrained")>=0;if(Ce){if(2!==p.handles)throw new Error("noUiSlider ("+oe+"): 'fixed' behaviour must be used with 2 handles");et(p,p.start[1]-p.start[0])}if(Ee&&(p.margin||p.limit))throw new Error("noUiSlider ("+oe+"): 'unconstrained' behaviour cannot be used with margin or limit");p.events={tap:W||Fe,drag:G,fixed:Ce,snap:Fe,hover:Me,unconstrained:Ee}}function g(p,f){if(!1!==f)if(!0===f){p.tooltips=[];for(var W=0;W<p.handles;W++)p.tooltips.push(!0)}else{if(p.tooltips=St(f),p.tooltips.length!==p.handles)throw new Error("noUiSlider ("+oe+"): must pass a formatter for all handles.");p.tooltips.forEach(function(G){if("boolean"!=typeof G&&("object"!=typeof G||"function"!=typeof G.to))throw new Error("noUiSlider ("+oe+"): 'tooltips' must be passed a formatter or 'false'.")})}}function M(p,f){p.ariaFormat=f,ne(f)}function h(p,f){p.format=f,ne(f)}function L(p,f){if(p.keyboardSupport=f,"boolean"!=typeof f)throw new Error("noUiSlider ("+oe+"): 'keyboardSupport' option must be a boolean.")}function E(p,f){p.documentElement=f}function R(p,f){if("string"!=typeof f&&!1!==f)throw new Error("noUiSlider ("+oe+"): 'cssPrefix' must be a string or `false`.");p.cssPrefix=f}function z(p,f){if("object"!=typeof f)throw new Error("noUiSlider ("+oe+"): 'cssClasses' must be an object.");if("string"==typeof p.cssPrefix)for(var W in p.cssClasses={},f)f.hasOwnProperty(W)&&(p.cssClasses[W]=p.cssPrefix+f[W]);else p.cssClasses=f}function H(p){var f={margin:0,limit:0,padding:0,animate:!0,animationDuration:300,ariaFormat:J,format:J},W={step:{r:!1,t:P},keyboardPageMultiplier:{r:!1,t:ae},keyboardDefaultStep:{r:!1,t:Y},start:{r:!0,t:Ae},connect:{r:!0,t:le},direction:{r:!0,t:B},snap:{r:!1,t:fe},animate:{r:!1,t:ie},animationDuration:{r:!1,t:Se},range:{r:!0,t:se},orientation:{r:!1,t:Oe},margin:{r:!1,t:et},limit:{r:!1,t:ut},padding:{r:!1,t:at},behaviour:{r:!0,t:S},ariaFormat:{r:!1,t:M},format:{r:!1,t:h},tooltips:{r:!1,t:g},keyboardSupport:{r:!0,t:L},documentElement:{r:!1,t:E},cssPrefix:{r:!0,t:R},cssClasses:{r:!0,t:z}},G={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses:ce,keyboardPageMultiplier:5,keyboardDefaultStep:10};p.format&&!p.ariaFormat&&(p.ariaFormat=p.format),Object.keys(W).forEach(function(Ye){if(!$e(p[Ye])&&void 0===G[Ye]){if(W[Ye].r)throw new Error("noUiSlider ("+oe+"): '"+Ye+"' is required.");return!0}W[Ye].t(f,$e(p[Ye])?p[Ye]:G[Ye])}),f.pips=p.pips;var Ce=document.createElement("div");return f.transformRule=void 0!==Ce.style.transform?"transform":void 0!==Ce.style.msTransform?"msTransform":"webkitTransform",f.style=[["left","top"],["right","bottom"]][f.dir][f.ort],f}function ye(p,f,W){var Ee,Ye,tt,dt,Et,$t,Q,G=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},Fe=window.CSS&&CSS.supports&&CSS.supports("touch-action","none")&&function(){var p=!1;try{var f=Object.defineProperty({},"passive",{get:function(){p=!0}});window.addEventListener("test",null,f)}catch{}return p}(),Me=p,ct=f.spectrum,yt=[],Tt=[],ra=[],Nt=0,Rt={},oa=p.ownerDocument,Wa=f.documentElement||oa.documentElement,Ea=oa.body,Pa=-1,Bt=0,ia=1,Ca=2,Ma="rtl"===oa.dir||1===f.ort?0:100;function ca(Q,he){var _e=oa.createElement("div");return he&&j(_e,he),Q.appendChild(_e),_e}function de(Q,he){var _e=ca(Q,f.cssClasses.origin),Xe=ca(_e,f.cssClasses.handle);return ca(Xe,f.cssClasses.touchArea),Xe.setAttribute("data-handle",he),f.keyboardSupport&&(Xe.setAttribute("tabindex","0"),Xe.addEventListener("keydown",function(st){return function(Q,he){if(k()||I(he))return!1;var _e=["Left","Right"],Xe=["Down","Up"],st=["PageDown","PageUp"],lt=["Home","End"];f.dir&&!f.ort?_e.reverse():f.ort&&!f.dir&&(Xe.reverse(),st.reverse());var Va,pt=Q.key.replace("Arrow",""),nt=pt===st[0],ga=pt===st[1],la=pt===Xe[0]||pt===_e[0]||nt,wa=pt===Xe[1]||pt===_e[1]||ga,_a=pt===lt[1];if(!(la||wa||pt===lt[0]||_a))return!0;if(Q.preventDefault(),wa||la){var ji=f.keyboardPageMultiplier,Lr=la?0:1,yi=ki(he)[Lr];if(null===yi)return!1;!1===yi&&(yi=ct.getDefaultStep(Tt[he],la,f.keyboardDefaultStep)),(ga||nt)&&(yi*=ji),yi=Math.max(yi,1e-7),Va=yt[he]+(yi*=la?-1:1)}else Va=_a?f.spectrum.xVal[f.spectrum.xVal.length-1]:f.spectrum.xVal[0];return Ia(he,ct.toStepping(Va),!0,!0),Ut("slide",he),Ut("update",he),Ut("change",he),Ut("set",he),!1}(st,he)})),Xe.setAttribute("role","slider"),Xe.setAttribute("aria-orientation",f.ort?"vertical":"horizontal"),0===he?j(Xe,f.cssClasses.handleLower):he===f.handles-1&&j(Xe,f.cssClasses.handleUpper),_e}function je(Q,he){return!!he&&ca(Q,f.cssClasses.connect)}function x(Q,he){return!!f.tooltips[he]&&ca(Q.firstChild,f.cssClasses.tooltip)}function k(){return Me.hasAttribute("disabled")}function I(Q){return Ye[Q].hasAttribute("disabled")}function me(){Et&&(Aa("update.tooltips"),Et.forEach(function(Q){Q&&Ge(Q)}),Et=null)}function Te(){me(),Et=Ye.map(x),za("update.tooltips",function(Q,he,_e){if(Et[he]){var Xe=Q[he];!0!==f.tooltips[he]&&(Xe=f.tooltips[he].to(_e[he])),Et[he].innerHTML=Xe}})}function it(Q,he,_e){var Xe=oa.createElement("div"),st=[];st[Bt]=f.cssClasses.valueNormal,st[ia]=f.cssClasses.valueLarge,st[Ca]=f.cssClasses.valueSub;var lt=[];lt[Bt]=f.cssClasses.markerNormal,lt[ia]=f.cssClasses.markerLarge,lt[Ca]=f.cssClasses.markerSub;var pt=[f.cssClasses.valueHorizontal,f.cssClasses.valueVertical],nt=[f.cssClasses.markerHorizontal,f.cssClasses.markerVertical];function ga(wa,Ja){var _a=Ja===f.cssClasses.value;return Ja+" "+(_a?pt:nt)[f.ort]+" "+(_a?st:lt)[wa]}return j(Xe,f.cssClasses.pips),j(Xe,0===f.ort?f.cssClasses.pipsHorizontal:f.cssClasses.pipsVertical),Object.keys(Q).forEach(function(wa){!function(wa,Ja,_a){if((_a=he?he(Ja,_a):_a)!==Pa){var Va=ca(Xe,!1);Va.className=ga(_a,f.cssClasses.marker),Va.style[f.style]=wa+"%",_a>Bt&&((Va=ca(Xe,!1)).className=ga(_a,f.cssClasses.value),Va.setAttribute("data-value",Ja),Va.style[f.style]=wa+"%",Va.innerHTML=_e.to(Ja))}}(wa,Q[wa][0],Q[wa][1])}),Xe}function ft(){dt&&(Ge(dt),dt=null)}function xt(Q){ft();var he=Q.mode,Xe=Q.filter||!1,nt=function(Q,he,_e){function Xe(wa,Ja){return(wa+Ja).toFixed(7)/1}var st={},lt=ct.xVal[0],pt=ct.xVal[ct.xVal.length-1],nt=!1,ga=!1,la=0;return(_e=function(p){return p.filter(function(f){return!this[f]&&(this[f]=!0)},{})}(_e.slice().sort(function(wa,Ja){return wa-Ja})))[0]!==lt&&(_e.unshift(lt),nt=!0),_e[_e.length-1]!==pt&&(_e.push(pt),ga=!0),_e.forEach(function(wa,Ja){var _a,Va,ji,yi,cr,hn,vn,Dt,Ei,Lr=wa,qi=_e[Ja+1],en="steps"===he;if(en&&(_a=ct.xNumSteps[Ja]),_a||(_a=qi-Lr),!1!==Lr)for(void 0===qi&&(qi=Lr),_a=Math.max(_a,1e-7),Va=Lr;Va<=qi;Va=Xe(Va,_a)){for(Ei=(cr=(yi=ct.toStepping(Va))-la)/(Dt=Math.round(cr/Q)),ji=1;ji<=Dt;ji+=1)st[(hn=la+ji*Ei).toFixed(5)]=[ct.fromStepping(hn),0];vn=_e.indexOf(Va)>-1?ia:en?Ca:Bt,!Ja&&nt&&Va!==qi&&(vn=0),Va===qi&&ga||(st[yi.toFixed(5)]=[Va,vn]),la=yi}}),st}(Q.density||1,he,function(Q,he,_e){if("range"===Q||"steps"===Q)return ct.xVal;if("count"===Q){if(he<2)throw new Error("noUiSlider ("+oe+"): 'values' (>= 2) required for mode 'count'.");var Xe=he-1,st=100/Xe;for(he=[];Xe--;)he[Xe]=Xe*st;he.push(100),Q="positions"}return"positions"===Q?he.map(function(lt){return ct.fromStepping(_e?ct.getStep(lt):lt)}):"values"===Q?_e?he.map(function(lt){return ct.fromStepping(ct.getStep(ct.toStepping(lt)))}):he:void 0}(he,Q.values||!1,Q.stepped||!1)),ga=Q.format||{to:Math.round};return dt=Me.appendChild(it(nt,Xe,ga))}function zt(){var Q=Ee.getBoundingClientRect(),he="offset"+["Width","Height"][f.ort];return 0===f.ort?Q.width||Ee[he]:Q.height||Ee[he]}function bt(Q,he,_e,Xe){var st=function(nt){if(!(nt=function(Q,he,_e){var pt,nt,Xe=0===Q.type.indexOf("touch"),st=0===Q.type.indexOf("mouse"),lt=0===Q.type.indexOf("pointer");if(0===Q.type.indexOf("MSPointer")&&(lt=!0),"mousedown"===Q.type&&!Q.buttons&&!Q.touches)return!1;if(Xe){var ga=function(_a){return _a.target===_e||_e.contains(_a.target)||_a.target.shadowRoot&&_a.target.shadowRoot.contains(_e)};if("touchstart"===Q.type){var la=Array.prototype.filter.call(Q.touches,ga);if(la.length>1)return!1;pt=la[0].pageX,nt=la[0].pageY}else{var wa=Array.prototype.find.call(Q.changedTouches,ga);if(!wa)return!1;pt=wa.pageX,nt=wa.pageY}}return he=he||ze(oa),(st||lt)&&(pt=Q.clientX+he.x,nt=Q.clientY+he.y),Q.pageOffset=he,Q.points=[pt,nt],Q.cursor=st||lt,Q}(nt,Xe.pageOffset,Xe.target||he))||k()&&!Xe.doNotReject||function(p,f){return p.classList?p.classList.contains(f):new RegExp("\\b"+f+"\\b").test(p.className)}(Me,f.cssClasses.tap)&&!Xe.doNotReject||Q===G.start&&void 0!==nt.buttons&&nt.buttons>1||Xe.hover&&nt.buttons)return!1;Fe||nt.preventDefault(),nt.calcPoint=nt.points[f.ort],_e(nt,Xe)},lt=[];return Q.split(" ").forEach(function(pt){var nt=!!Fe&&{passive:!0};he.addEventListener(pt,st,nt),lt.push([pt,st,nt])}),lt}function Wt(Q){var _e=100*(Q-function(p,f){var W=p.getBoundingClientRect(),G=p.ownerDocument,Ce=G.documentElement,Fe=ze(G);return/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(Fe.x=0),f?W.top+Fe.y-Ce.clientTop:W.left+Fe.x-Ce.clientLeft}(Ee,f.ort))/zt();return _e=rt(_e),f.dir?100-_e:_e}function mt(Q,he){"mouseout"===Q.type&&"HTML"===Q.target.nodeName&&null===Q.relatedTarget&&na(Q,he)}function jt(Q,he){if(-1===navigator.appVersion.indexOf("MSIE 9")&&0===Q.buttons&&0!==he.buttonsProperty)return na(Q,he);var _e=(f.dir?-1:1)*(Q.calcPoint-he.startCalcPoint);Za(_e>0,100*_e/he.baseSize,he.locations,he.handleNumbers)}function na(Q,he){he.handle&&(vt(he.handle,f.cssClasses.active),Nt-=1),he.listeners.forEach(function(_e){Wa.removeEventListener(_e[0],_e[1],_e[2])}),0===Nt&&(vt(Me,f.cssClasses.drag),Ai(),Q.cursor&&(Ea.style.cursor="",Ea.removeEventListener("selectstart",Gt))),he.handleNumbers.forEach(function(_e){Ut("change",_e),Ut("set",_e),Ut("end",_e)})}function ya(Q,he){if(he.handleNumbers.some(I))return!1;var _e;1===he.handleNumbers.length&&(Nt+=1,j(_e=Ye[he.handleNumbers[0]].children[0],f.cssClasses.active)),Q.stopPropagation();var st=[],lt=bt(G.move,Wa,jt,{target:Q.target,handle:_e,listeners:st,startCalcPoint:Q.calcPoint,baseSize:zt(),pageOffset:Q.pageOffset,handleNumbers:he.handleNumbers,buttonsProperty:Q.buttons,locations:Tt.slice()}),pt=bt(G.end,Wa,na,{target:Q.target,handle:_e,listeners:st,doNotReject:!0,handleNumbers:he.handleNumbers}),nt=bt("mouseout",Wa,mt,{target:Q.target,handle:_e,listeners:st,doNotReject:!0,handleNumbers:he.handleNumbers});st.push.apply(st,lt.concat(pt,nt)),Q.cursor&&(Ea.style.cursor=getComputedStyle(Q.target).cursor,Ye.length>1&&j(Me,f.cssClasses.drag),Ea.addEventListener("selectstart",Gt,!1)),he.handleNumbers.forEach(function(ga){Ut("start",ga)})}function sa(Q){Q.stopPropagation();var he=Wt(Q.calcPoint),_e=function(Q){var he=100,_e=!1;return Ye.forEach(function(Xe,st){if(!I(st)){var lt=Tt[st],pt=Math.abs(lt-Q);(pt<he||pt<=he&&Q>lt||100===pt&&100===he)&&(_e=st,he=pt)}}),_e}(he);if(!1===_e)return!1;f.events.snap||kt(Me,f.cssClasses.tap,f.animationDuration),Ia(_e,he,!0,!0),Ai(),Ut("slide",_e,!0),Ut("update",_e,!0),Ut("change",_e,!0),Ut("set",_e,!0),f.events.snap&&ya(Q,{handleNumbers:[_e]})}function fa(Q){var he=Wt(Q.calcPoint),_e=ct.getStep(he),Xe=ct.fromStepping(_e);Object.keys(Rt).forEach(function(st){"hover"===st.split(".")[0]&&Rt[st].forEach(function(lt){lt.call($t,Xe)})})}function za(Q,he){Rt[Q]=Rt[Q]||[],Rt[Q].push(he),"update"===Q.split(".")[0]&&Ye.forEach(function(_e,Xe){Ut("update",Xe)})}function Aa(Q){var he=Q&&Q.split(".")[0],_e=he&&Q.substring(he.length);Object.keys(Rt).forEach(function(Xe){var st=Xe.split(".")[0],lt=Xe.substring(st.length);he&&he!==st||_e&&_e!==lt||delete Rt[Xe]})}function Ut(Q,he,_e){Object.keys(Rt).forEach(function(Xe){var st=Xe.split(".")[0];Q===st&&Rt[Xe].forEach(function(lt){lt.call($t,yt.map(f.format.to),he,yt.slice(),_e||!1,Tt.slice(),$t)})})}function Ra(Q,he,_e,Xe,st,lt){var pt;return Ye.length>1&&!f.events.unconstrained&&(Xe&&he>0&&(pt=ct.getAbsoluteDistance(Q[he-1],f.margin,0),_e=Math.max(_e,pt)),st&&he<Ye.length-1&&(pt=ct.getAbsoluteDistance(Q[he+1],f.margin,1),_e=Math.min(_e,pt))),Ye.length>1&&f.limit&&(Xe&&he>0&&(pt=ct.getAbsoluteDistance(Q[he-1],f.limit,0),_e=Math.min(_e,pt)),st&&he<Ye.length-1&&(pt=ct.getAbsoluteDistance(Q[he+1],f.limit,1),_e=Math.max(_e,pt))),f.padding&&(0===he&&(pt=ct.getAbsoluteDistance(0,f.padding[0],0),_e=Math.max(_e,pt)),he===Ye.length-1&&(pt=ct.getAbsoluteDistance(100,f.padding[1],1),_e=Math.min(_e,pt))),!((_e=rt(_e=ct.getStep(_e)))===Q[he]&&!lt)&&_e}function Da(Q,he){var _e=f.ort;return(_e?he:Q)+", "+(_e?Q:he)}function Za(Q,he,_e,Xe){var st=_e.slice(),lt=[!Q,Q],pt=[Q,!Q];Xe=Xe.slice(),Q&&Xe.reverse(),Xe.length>1?Xe.forEach(function(ga,la){var wa=Ra(st,ga,st[ga]+he,lt[la],pt[la],!1);!1===wa?he=0:(he=wa-st[ga],st[ga]=wa)}):lt=pt=[!0];var nt=!1;Xe.forEach(function(ga,la){nt=Ia(ga,_e[ga]+he,lt[la],pt[la])||nt}),nt&&Xe.forEach(function(ga){Ut("update",ga),Ut("slide",ga)})}function ur(Q,he){return f.dir?100-Q-he:Q}function Ai(){ra.forEach(function(Q){Ye[Q].style.zIndex=3+(Ye.length+(Tt[Q]>50?-1:1)*Q)})}function Ia(Q,he,_e,Xe,st){return st||(he=Ra(Tt,Q,he,_e,Xe,!1)),!1!==he&&(function(Q,he){Tt[Q]=he,yt[Q]=ct.fromStepping(he);var Xe="translate("+Da(10*(ur(he,0)-Ma)+"%","0")+")";Ye[Q].style[f.transformRule]=Xe,Fa(Q),Fa(Q+1)}(Q,he),!0)}function Fa(Q){if(tt[Q]){var he=0,_e=100;0!==Q&&(he=Tt[Q-1]),Q!==tt.length-1&&(_e=Tt[Q]);var Xe=_e-he,st="translate("+Da(ur(he,Xe)+"%","0")+")",lt="scale("+Da(Xe/100,"1")+")";tt[Q].style[f.transformRule]=st+" "+lt}}function Di(Q,he){return null===Q||!1===Q||void 0===Q||("number"==typeof Q&&(Q=String(Q)),Q=f.format.from(Q),!1===(Q=ct.toStepping(Q))||isNaN(Q))?Tt[he]:Q}function Ui(Q,he,_e){var Xe=St(Q);he=void 0===he||!!he,f.animate&&!(void 0===Tt[0])&&kt(Me,f.cssClasses.tap,f.animationDuration),ra.forEach(function(pt){Ia(pt,Di(Xe[pt],pt),!0,!1,_e)});for(var lt=1===ra.length?0:1;lt<ra.length;++lt)ra.forEach(function(pt){Ia(pt,Tt[pt],!0,!0,_e)});Ai(),ra.forEach(function(pt){Ut("update",pt),null!==Xe[pt]&&he&&Ut("set",pt)})}function Qa(){var Q=yt.map(f.format.to);return 1===Q.length?Q[0]:Q}function ki(Q){var he=Tt[Q],_e=ct.getNearbySteps(he),Xe=yt[Q],st=_e.thisStep.step,lt=null;if(f.snap)return[Xe-_e.stepBefore.startValue||null,_e.stepAfter.startValue-Xe||null];!1!==st&&Xe+st>_e.stepAfter.startValue&&(st=_e.stepAfter.startValue-Xe),lt=Xe>_e.thisStep.startValue?_e.thisStep.step:!1!==_e.stepBefore.step&&Xe-_e.stepBefore.highestStep,100===he?st=null:0===he&&(lt=null);var pt=ct.countStepDecimals();return null!==st&&!1!==st&&(st=Number(st.toFixed(pt))),null!==lt&&!1!==lt&&(lt=Number(lt.toFixed(pt))),[lt,st]}return j(Q=Me,f.cssClasses.target),j(Q,0===f.dir?f.cssClasses.ltr:f.cssClasses.rtl),j(Q,0===f.ort?f.cssClasses.horizontal:f.cssClasses.vertical),j(Q,"rtl"===getComputedStyle(Q).direction?f.cssClasses.textDirectionRtl:f.cssClasses.textDirectionLtr),Ee=ca(Q,f.cssClasses.base),function(Q,he){var _e=ca(he,f.cssClasses.connects);Ye=[],(tt=[]).push(je(_e,Q[0]));for(var Xe=0;Xe<f.handles;Xe++)Ye.push(de(he,Xe)),ra[Xe]=Xe,tt.push(je(_e,Q[Xe+1]))}(f.connect,Ee),function(Q){Q.fixed||Ye.forEach(function(he,_e){bt(G.start,he.children[0],ya,{handleNumbers:[_e]})}),Q.tap&&bt(G.start,Ee,sa,{}),Q.hover&&bt(G.move,Ee,fa,{hover:!0}),Q.drag&&tt.forEach(function(he,_e){if(!1!==he&&0!==_e&&_e!==tt.length-1){var Xe=Ye[_e-1],st=Ye[_e],lt=[he];j(he,f.cssClasses.draggable),Q.fixed&&(lt.push(Xe.children[0]),lt.push(st.children[0])),lt.forEach(function(pt){bt(G.start,pt,ya,{handles:[Xe,st],handleNumbers:[_e-1,_e]})})}})}(f.events),Ui(f.start),f.pips&&xt(f.pips),f.tooltips&&Te(),za("update",function(Q,he,_e,Xe,st){ra.forEach(function(lt){var pt=Ye[lt],nt=Ra(Tt,lt,0,!0,!0,!0),ga=Ra(Tt,lt,100,!0,!0,!0),la=st[lt];f.ariaFormat.to(_e[lt]),nt=ct.fromStepping(nt).toFixed(0),ga=ct.fromStepping(ga).toFixed(0),la=ct.fromStepping(la).toFixed(0),pt.children[0].setAttribute("aria-valuemin",nt),pt.children[0].setAttribute("aria-valuemax",ga),pt.children[0].setAttribute("aria-valuenow",la)})}),$t={destroy:function(){for(var Q in f.cssClasses)f.cssClasses.hasOwnProperty(Q)&&vt(Me,f.cssClasses[Q]);for(;Me.firstChild;)Me.removeChild(Me.firstChild);delete Me.noUiSlider},steps:function(){return ra.map(ki)},on:za,off:Aa,get:Qa,set:Ui,setHandle:function(Q,he,_e,Xe){if(!((Q=Number(Q))>=0&&Q<ra.length))throw new Error("noUiSlider ("+oe+"): invalid handle number, got: "+Q);Ia(Q,Di(he,Q),!0,!0,Xe),Ut("update",Q),_e&&Ut("set",Q)},reset:function(Q){Ui(f.start,Q)},__moveHandles:function(he,_e,Xe){Za(he,_e,Tt,Xe)},options:W,updateOptions:function(Q,he){var _e=Qa(),Xe=["margin","limit","padding","range","animate","snap","step","format","pips","tooltips"];Xe.forEach(function(lt){void 0!==Q[lt]&&(W[lt]=Q[lt])});var st=H(W);Xe.forEach(function(lt){void 0!==Q[lt]&&(f[lt]=st[lt])}),ct=st.spectrum,f.margin=st.margin,f.limit=st.limit,f.padding=st.padding,f.pips?xt(f.pips):ft(),f.tooltips?Te():me(),Tt=[],Ui(Q.start||_e,he)},target:Me,removePips:ft,removeTooltips:me,getTooltips:function(){return Et},getOrigins:function(){return Ye},pips:xt}}return{__spectrum:Ie,version:oe,cssClasses:ce,create:function(p,f){if(!p||!p.nodeName)throw new Error("noUiSlider ("+oe+"): create requires a single element, got: "+p);if(p.noUiSlider)throw new Error("noUiSlider ("+oe+"): Slider was already initialized.");var G=ye(p,H(f),f);return p.noUiSlider=G,G}}})?b.apply(va,[]):b)&&(ci.exports=K)},11956:function(ci,va,b){"use strict";b.r(va),b.d(va,{DefaultInnerTickSize:function(){return ve},DefaultRotation:function(){return tt},DefaultRotationForYAxisHierarchy:function(){return Et},DefaultVerticalRotation:function(){return dt},Mockable:function(){return se},StackedAxisPadding:function(){return Qe},adjustDomainWithConstantPixelDifference:function(){return et},assertScalarDomain:function(){return at},axisFactory:function(){return Z},createAxis:function(){return M},createAxisLabel:function(){return ia},createD3Scale_Band:function(){return yt},createD3Scale_Numeric:function(){return ra},createDomain:function(){return ut},createFormatter:function(){return f},createScalarDomainOptions:function(){return Wa},createScale:function(){return Pe},createStackedD3Axis:function(){return z},createUncertaintyAwareValueDomain:function(){return Fe},createValueDomain:function(){return Ce},defaultTickFormat:function(){return te},emptyDomain:function(){return ze},ensureValuesInRange:function(){return B},extendCreateAxisOptions:function(){return h},generateScalarDomainSources:function(){return Ea},getAxisFormatString:function(){return Me},getBestNumberOfTicks:function(){return Ne},getCategoryThickness:function(){return Se},getCategoryValueType:function(){return S},getHierStack:function(){return je},getMaxWidth:function(){return ht},getMergedUserDomains:function(){return $t},getNumHierarchyLevels:function(){return Be},getRecommendedNumberOfTicksForXAxis:function(){return V},getRecommendedNumberOfTicksForYAxis:function(){return A},getRecommendedTickValues:function(){return be},getTickLabelMargins:function(){return Y},hasForcedDomain:function(){return Bt},invertOrdinalScale:function(){return le},invertOrdinalSimpleScaleWithDirection:function(){return Oe},invertScale:function(){return fe},isHierarchical:function(){return ca},isLogScaleAllowedFunc:function(){return Tt},isOrdinalAxisDomain:function(){return Rt},isScalarAxisDomain:function(){return Nt},isStackedAxisProperties:function(){return de},mergeDomains:function(){return oa},mergeScalarAxisDomains:function(){return Pa},powerOfTen:function(){return Ma},rotate:function(){return ct},scaleShouldClamp:function(){return Ca},shouldIncludeZero:function(){return g},willLabelsFit:function(){return Ee},willLabelsWordBreak:function(){return Ye}});var d=b(81337),K=b(62458),oe=b(41640),Ue=b(68365),Ge=b(32041),$e=b(64329),Gt=b(66001),Ot=b(41414),Vt=b(45059),At=b(72489),We=b(28326),kt=b(80777),rt=b(37274),St=b(54522),Pt=b(18664),j=b(44977),vt=b(53197),Ct=b(34969),ze=[0,0],Le=35,T=2,xe=3,ot=10,ge=3,Qe=5,ve=6;function V(x){return x<300?3:x<500?5:8}function A(x){return x<150?3:x<300?5:8}function Z(x,k){switch(k){case vt.Or.top:return d3.axisTop(x);case vt.Or.right:return d3.axisRight(x);case vt.Or.bottom:return d3.axisBottom(x);case vt.Or.left:return d3.axisLeft(x);default:K.fF.assertNever(k)}}function te(x){return K.fF.warn('Using default (unformatted) tickFormat for value "'.concat(x,'"')),"".concat(x)}function Ne(x,k,I,me,Te){var Ve=x[0],we=x[1];return K.fF.assert(function(){return I>=0},"maxTickCount must be greater or equal to zero"),isNaN(Ve)||isNaN(we)?xe:Ve===we?Te||me?1:xe:(K.fF.assert(function(){return Ve<=we},"min value needs to be less or equal to max value"),I<=1||we<=1&&Ve>=-1||k.some(function(qe){return qe?.type&&!qe.type.integer})?I:Math.min(we-Ve+1,I))}function be(x,k){var I=x.axis,Te=(void 0===I?{}:I).logAxisScale,Ve=x.isScalar,we=x.domainOptions,qe=x.isLogScaleAllowed,it=x.valueType,ft=x.minTickInterval,xt=k.scale,zt=k.bestTickCount;if(k.isInvalidDomain)return[];if(Ve&&!_.isEmpty(we?.domain)&&1===zt)return[we?.domain[0]];if(!Ve||(0,vt._9)(xt))return function(x,k){if(x<=0)return[];var I=k.length;if(x>I)return k;for(var me=[],Te=0,Ve=Math.ceil(I/x);Te<I;Te+=Ve)me.push(k[Te]);return me}(zt,xt.domain());if((0,vt.v9)(it))return function(x,k){if(0===k[0]&&0===k[1])return[];var me=Vt.EP.calculate(We.y3.fromTimeValue(k[0]),We.y3.fromTimeValue(k[1]),x).sequence.map(function(Te){return Te.getTime()});return B(me,k[0],k[1])}(zt,xt.domain());var bt=function(x,k,I,me){if(!k.ticks)return K.fF.assertFail("must pass a quantitative scale to this method"),[];if(x<=1)return[];var Ve=x,we=k.ticks(Ve);if(we.length>x&&x>1){var qe=k.domain();Ve=function(ft,xt,zt){var bt=(xt-ft)/zt,_t=Math.floor(Math.log(bt)/Math.LN10),Wt=bt/Math.pow(10,_t);if(Wt>=Math.sqrt(50)){var Ft=Math.sqrt(2)*Math.pow(10,_t+1);return Math.floor((xt-ft)/Ft)}if(Wt>=Math.sqrt(10)){var mt=Math.sqrt(50)*Math.pow(10,_t);return Math.floor((xt-ft)/mt)}if(Wt>=Math.sqrt(2)){var jt=Math.sqrt(10)*Math.pow(10,_t);return Math.floor((xt-ft)/jt)}var na=Math.sqrt(2)*Math.pow(10,_t);return Math.floor((xt-ft)/na)}(qe[0],qe[1],we.length),we=k.ticks(Ve)}if(we.length<T&&(we=k.ticks(Ve=x+1)),I&&we.length>1)for(var it=we[1]-we[0];it>0&&(0,oe.Po)(it,I)&&Ve>2;){if(Ve--,(we=k.ticks(Ve)).length<T){we=k.ticks(++Ve);break}it=we[1]-we[0]}return we.length<=1?[]:(me||(we=function(x,k){if(void 0===k&&(k=1e-5),!x||x.length<2)return x;var I=k*Math.abs(x[1]-x[0]);return x.map(function(me){return Math.abs(me)<=I?0:me})}(we)),K.fF.assert(function(){return 0===we.length||(0,oe.bA)(we[0],k.domain()[0],oe.BM)&&(0,oe.bl)(we[we.length-1],k.domain()[1],oe.BM)},"getRecommendedTickValuesForAQuantitativeRange should not generate tick values outside the scale"),we)}(zt,xt,ft,Te);if(Te&&qe)for(var _t=0;bt.length>10;)bt=bt.filter(function(Wt){return Ma(Wt,_t)}),_t++;return bt}function P(x,k,I){var me=10===k?.[0],Te=10===k?.[1],Ve=Te&&me&&x[0]>=x[1];(!me||Ve)&&(x[0]-=Math.abs(I[0]),k&&(k[0]=0)),(!Te||Ve)&&(x[1]+=Math.abs(I[1]),k&&(k[1]=0))}function Y(x){var k=x.plotArea,I=x.yMarginLimit,me=x.textHeightMeasurer,Te=x.textWidthMeasurer,Ve=x.axes,we=x.bottomMarginLimit,qe=x.axesFontProperties,it=x.rotate90,ft=x.showY1OnRight,xt=x.shouldRenderAxis,zt=xt.x,bt=xt.y,_t=xt.y2,Wt=Be(Ve),Ft=null!=Wt&&Wt>0;K.fF.assertValue(k,"options.plotArea"),K.fF.assertValue(Ve,"axes");var mt=Ve.x,jt=Ve.y1,na=Ve.y2;K.fF.assertValue(k,"plotArea"),K.fF.assertValue(Te,"textWidthMeasurer"),K.fF.assertValue(me,"textHeightMeasurer"),K.fF.assertValue(mt,"xAxis"),K.fF.assertValue(jt,"yAxis");var ya=mt.values,sa=0,fa=0,aa=0,It=0,za=0,Aa=0,Ut=0,Da=mt.categoryThickness?mt.categoryThickness*(null!=mt.innerPaddingRatio?.5-mt.innerPaddingRatio/2:0):0,Za=(0,vt._9)(mt.scale),ii=0;void 0!==mt.outerPadding?ii=mt.outerPadding:void 0!==mt.xLabelMaxWidth&&(ii=Math.max(0,(k.width-mt.xLabelMaxWidth*ya.length)/2));var Ia,Fa,Ai=zt&&!_.isEmpty(ya);if(0!==V(k.width)||0!==A(k.height)){var Di=it||Ft&&mt.isCategoryAxis?dt:tt;if(bt){var wi,Ui=qe.y.tickLabels;jt.categoryIdentities&&(Ui=(0,Pt.ED)(Ui,{weight:"700"})),za=(wi=se.getAxisTickLabelMargins(jt,Ui,Te,me)).maxWidth,aa=Math.max(aa,wi.overflow.top),It=Math.max(It,wi.overflow.bottom),Fa=wi.textHeight}na&&_t&&(Aa=(wi=se.getAxisTickLabelMargins(na,qe.y2.tickLabels,Te,me)).maxWidth,aa=Math.max(aa,wi.overflow.top),It=Math.max(It,wi.overflow.bottom));var $i=qe.x.tickLabels,Qa=(0,Pt.qk)($i),Gi=mt.scale,ki=Gi.domain();if(Ia=me(Qa),Ai){var yr=Math.floor(we/Ia);mt.categoryIdentities&&!mt.willLabelsWordBreak&&(Qa.fontWeight="700");for(var di=0,pi=ya.length;di<pi;di++){var Q=void 0;Qa.text=ya[di];var he=Te(Qa);if(mt.willLabelsWordBreak){var _e=_.isEmpty(mt.categoryLabelMaxWidths)?mt.xLabelMaxWidth:mt.categoryLabelMaxWidths[di];Q=(0,Gt.ql)(Qa.text,Qa,Te,_e,yr).length*Ia,he=_e}else if(!mt.willLabelsFit&&Za){var st=$i.size.pt<=Ct.rZ;Q=he*Di.sine+(st?0:Ia*Di.cosine),he=he*Di.cosine+(st?0:Ia*Di.sine)}else Q=Ia+-5;if(0===di){if(Za)sa=mt.willLabelsFit?he/2-Da-ii:he-Da-ii,sa=Math.max(sa,0);else if(ki.length>1){var nt=0;nt=he/2-(ga=Gi(ki[mt.invertAxis?1:0])),nt=Math.max(nt,0),mt.invertAxis&&ft?fa=nt:sa=nt}}else if(di===pi-1)if(Za)(mt.willLabelsFit||mt.willLabelsWordBreak)&&(fa=he/2-Da-ii,fa=Math.max(fa,0));else if(ki.length>1){nt=0;var ga=Gi(ki[mt.invertAxis?0:1]);nt=he/2-(k.width-ga),nt=Math.max(nt,0),mt.invertAxis&&ft?sa=nt:fa=nt}Ut=Math.max(Ut,Q)}sa=Math.min(sa,Le),fa=Math.min(fa,Le)}}var _a,la=0,wa=0,Ja=Math.min(Math.max(It,Math.ceil(Ut)),we);if(ft?(wa=Math.min(Math.max(sa,Aa),I),la=Math.min(Math.max(fa,za),I)):(wa=Math.min(Math.max(sa,za),I),la=Math.min(Math.max(fa,Aa),I)),Ft){var Va=function(){return _a*(Wt-1)};mt.isCategoryAxis&&Ai?(_a=Ia+Qe,Ja+=Va()):jt.isCategoryAxis&&bt?(_a=Fa+Qe,ft?la+=Va():wa+=Va()):_a=0}return{yTop:Math.ceil(aa),yLeft:Math.ceil(wa),yBottom:Math.ceil(It),yRight:Math.ceil(la),xMax:Math.ceil(Ja),stackHeight:_a,axesOverflow:{top:Math.ceil(aa),bottom:Math.ceil(It),left:Math.ceil(sa),right:Math.ceil(fa)}}}var se={getAxisTickLabelMargins:function(k,I,me,Te){var Ve,it,ft,we=k.scale,qe=k.d3Axis.tickValues();if(_.isEmpty(qe))return{maxWidth:0,overflow:{top:0,bottom:0}};if((0,vt._9)(we))it=(Ve=we.range())[0],ft=Ve[1];else{var xt=we.range();it=_.head(xt),ft=_.last(xt)}var bt,_t,Wt,Ft,zt=k.values;it<ft?(bt=it,_t=we(_.head(qe)),Wt=ft,Ft=we(_.last(qe))):(bt=ft,_t=we(_.last(qe)),Wt=it,Ft=we(_.head(qe)));for(var mt=(0,Pt.qk)(I,"".concat(_.head(zt))),jt=Te(mt),na=Math.max(0,-(_t-jt/2-bt)),ya=Math.max(0,Ft+jt/2-Wt),sa=0,fa=0,aa=zt.length;fa<aa;fa++)mt.text="".concat(zt[fa]),sa=Math.max(sa,me(mt));return{maxWidth:sa,overflow:{top:na,bottom:ya},textHeight:jt}}};function fe(x,k,I,me,Te){return(0,vt._9)(x)?0===I?{value:le(x,k)}:Oe(x,k,I,me,Te):{value:x.invert(k)}}function ie(x){return(0,vt._9)(x)?x.domain().map(function(k){return x(k)}):x.range()}function Se(x){var k=ie(x);if(k.length<2){if((0,vt._9)(x)){var I=x.range();return I[1]-I[0]}K.fF.assertFail("Unsupported axis type")}return k[1]-k[0]}function le(x,k){var I=x.bandwidth(),me=ie(x),Te=x.domain();return me.length<2||me[0]>k?Te[0]||0:Te[d3.bisect(me,k+(me[1]-me[0]-I)/2)-1]}function Oe(x,k,I,me,Te){var Ve=ie(x),we=x.domain(),qe=Te||1,it=x.bandwidth()/qe;if(0!==we.length){K.fF.assert(function(){return!_.some(we,function(jt,na){return 0!==na&&jt!==we[na-1]+1})});var ft=1===me?it/2:0;if(Ve[0]+ft>k)return 1===I?void 0:{value:we[0],seriesIndex:0};if(!(k>Ve[Ve.length-1]+it*qe-ft&&-1===I)){var xt=ft*I*-1,zt=Ve[1]-Ve[0]-it*qe;if(qe>1){var bt=d3.bisect(Ve,k)-1,_t=x(we[bt]),Wt=_.map(d3.range(qe),function(jt){return jt*it+_t}),Ft=d3.bisect(Wt,k+xt)-1;return Ft<0?{value:we[bt-1],seriesIndex:qe-1}:-1===I&&Ft===qe-1&&bt!==Ve.length-1&&k+xt+zt>Ve[bt+1]?{value:we[bt+1],seriesIndex:0}:{value:we[bt],seriesIndex:Ft}}-1===I&&(xt+=zt);var mt=d3.bisect(Ve,k+xt)-1;return{value:we[mt],seriesIndex:0}}}}function et(x,k,I,me){if(I<x||me>k){var Te=Math.abs(Math.min(I-x,0)),Ve=Math.max(me-k,0),we=k-x,it=x-Te*Math.pow(we,2)/((we-Ve)*(we-Te)-Te*Ve);return{domain:[it,k+Ve*(k-it)/(we-Ve)],adjusted:!0}}return{domain:void 0,adjusted:!1}}function ut(x,k,I,me){if(I&&!(0,vt.c$)(k)){if(0===x.length)return;var Ve=_.flatMap(x,function(zt){return _.flatMap(zt.data,function(bt){return[bt?.categoryValue]})});return Pa.apply(void 0,(0,d.__spreadArray)([Wa(d3.extent(Ve),0)],me||[],!1))}var we=[];if(!_.isEmpty(x))for(var it=0,ft=x[0].data;it<ft.length;it++){var xt=ft[it];xt.highlight||we.push(xt.categoryIndex)}return{domain:we,type:0}}function at(x){if(2!==x.length&&!_.every(x,function(I){return null==I||_.isNumber(I)}))throw new Ue.wJ("CartesianAxisScalarDomain")}function B(x,k,I){K.fF.assert(function(){return k<=I},"min must be less or equal to max");var me=x.filter(function(Te){return Te>=k&&Te<=I});return me.length>=2?me:[k,I]}function S(x,k){return function(x){return x&&(x.bool||x.numeric||x.text||x.dateTime)}(x?.type)?x.type:kt.Ge.fromDescriptor(k?{numeric:!0}:{text:!0})}function g(x){var k=x?.domain;if(!k||2!==k.length)return!0;var I=x.domainSources;return!((10===I[0]?k[0]:void 0)>0||(10===I[1]?k[1]:void 0)<0)}function M(x){var k=L(x);return x.axisZoom&&!x.skipAxisZoomUpdate&&(x.axisZoom.updateAxisOptions(k,x),k=L(x)),k}function h(x){var k,I=x.isScalar,Te=x.axis.logAxisScale,Ve=void 0!==Te&&Te,we=x.orientation,qe=void 0===we?x.isVertical?vt.Or.left:vt.Or.bottom:we,it=x.metaDataColumn,ft=x.outerPadding,xt=void 0===ft?0:ft,zt=x.innerPaddingRatio,bt=void 0===zt?Ct.$B:zt,_t=x.outerPaddingRatio,Wt=void 0===_t?0:_t,Ft=null===(k=x.domainOptions)||void 0===k?void 0:k.domain,jt=S(it instanceof Array?(0,Ct.GN)(it):it,I),na=Tt(Ft,jt);return(0,d.__assign)((0,d.__assign)((0,d.__assign)({},x),{isLogScaleAllowed:na,valueType:jt,minTickInterval:I?G(x.formatString,jt,x.is100Pct):void 0,hasDisallowedZeroInDomain:I&&!na&&Ve,orientation:qe,innerPaddingRatio:bt,outerPaddingRatio:Wt,outerPadding:0===xt&&I&&x.isVertical?1:xt}),x.isCategoryAxis&&function(x,k,I,me){var Te;return!(!x||k&&"0"!==k&&"g"!==k&&"G"!==k||I&&1!==I||!(null!==(Te=x.temporal)&&void 0!==Te&&Te.year||x.integer&&2===me?.length&&R(me[0])&&R(me[1])))}(jt,x.formatString,x.axis.labelDisplayUnits,Ft)?{formatString:"0",useTickIntervalForDisplayUnits:!1}:{})}function L(x){var k,I=h(x),me=I.domainOptions,Ve=(void 0===me?{}:me).domain,we=Pe(I),qe=we.scale,it=we.bestTickCount,ft=qe.domain(),xt=x.categoryThickness;if(xt&&I.isScalar&&2===Ve?.length){K.fF.assert(function(){return!(Ve[0]instanceof Date)||Ve[0]instanceof We.y3},"The domain has to be a no-Date object or a PBIFormattingDate");var zt=Ve[1]-Ve[0],bt=ft[1]-ft[0];zt>0&&bt>0&&(xt=xt*zt/bt)}var mt,jt,_t=be(I,we),Wt=f(we,I,_t),Ft=Z(qe,I.orientation).tickSizeInner(ve).tickSizeOuter(0).ticks(it).tickValues(_t);return!I.isScalar&&xt?mt=Math.max(1,xt-2*Ct.Fv):_t.length>1?(mt=function(x,k){return x&&!_.isEmpty(k)?Math.abs(x(k[1])-x(k[0])):1}(qe,_t),mt-=2*ge,I.margin&&(jt=function(x,k,I,me,Te){var Ve=_.times(k.length,_.constant(Te)),we=I.left,qe=I.right,it=x(_.head(k)),ft=x(_.last(k)),xt=ie(x),bt=xt[1],_t=2*(Math.abs(it-xt[0])+we+me),Wt=2*(Math.abs(ft-bt)+qe+me);return Ve[0]=Math.min(_t,Te),Ve[k.length-1]=Math.min(Wt,Te),Ve}(qe,_t,I.margin,I.outerPadding,mt),mt=void 0)):mt=x.pixelSpan-2*ge,{scale:we.scale,isInvalidDomain:we.isInvalidDomain,d3Axis:Ft,formatter:Wt,values:_.isEmpty(I.metaDataColumn)?[]:W(Ft,_t,Wt,I.valueType,I.getValueFn),axisLabel:(0,St.O1)(I.metaDataColumn),xLabelMaxWidth:mt,categoryLabelMaxWidths:jt,categoryThickness:xt,valueType:I.valueType,isCategoryAxis:I.isCategoryAxis,outerPadding:I.outerPadding,outerPaddingRatio:I.outerPaddingRatio,innerPaddingRatio:I.innerPaddingRatio,isLogScaleAllowed:I.isLogScaleAllowed,dataDomain:null===(k=I.domainOptions)||void 0===k?void 0:k.domain,hasDisallowedZeroInDomain:I.hasDisallowedZeroInDomain,invertAxis:I.axis.invertAxis,orientation:I.orientation}}function R(x){return _.isNumber(x)&&x===Math.floor(x)&&x>-1e4&&x<1e4}function z(x){return K.fF.assertValue(x,"options is null or undefined"),K.fF.assertValue(x.d3axis,"options.axis is null or undefined"),K.fF.assertValue(x.scale,"options.scale is null or undefined"),K.fF.assertValue(x.tickFormat,"options.tickFormat is null or undefined"),Z(x.scale,null!=x.orient?x.orient:vt.Or.bottom).tickSizeInner(x.innerTickSize||0).tickSizeOuter(x.outerTickSize||0).ticks(x.d3axis.tickArguments()).tickValues(x.d3axis.tickValues()).tickFormat(x.tickFormat)}function Pe(x){var k=x.pixelSpan,I=x.metaDataColumn,me=x.outerPadding,Te=x.isScalar,Ve=x.isVertical,we=x.forcedTickCount,qe=x.maxTickCount,it=x.allowSingleScalarTick,ft=x.includeZero,xt=x.domainOptions,zt=x.zeroScalarDomain,bt=x.minTickInterval,_t=x.valueType,Wt=x.axis,Ft=Wt.logAxisScale,mt=Wt.invertAxis,jt=x.domainOptions,na=xt?.domain;K.fF.assert(function(){return!it||it&&Te},"allowSingleScalarTick should only be true if the chart is scalar"),K.fF.assert(function(){return!ft||Te&&ft},"includeZero can only have an effect if the domain is scalar");var ya=I instanceof Array?I:[I];if(null==na||2===na.length&&null==na[0]&&null==na[1]||2!==na.length&&Te)return{isInvalidDomain:!0,scale:(0,vt.c$)(_t)?yt(x,_t.dateTime?ze:[]):ra(x,ze,Ft),bestTickCount:0};var sa=Ve?A(k):V(k);qe&&(sa=Math.min(sa,qe));var Aa,fa=sa,aa=x.axis.logAxisScale&&x.isLogScaleAllowed,It=na?.slice();if(It&&Te){if(ft){var za=aa?_.every(It,function(Ut){return Ut>0})?1:-1:0;It[0]=Math.min(za,It[0]),It[It.length-1]=Math.max(za,It[It.length-1])}2===It.length&&(at(It),fa=void 0!==we?0!==sa?we:0:Ne(It,ya,sa,_t.dateTime,it),It=function(x,k,I,me){return isNaN(x[0])||isNaN(x[1])?ze:(x[0]===x[1]?null==I||.2*Math.abs(x[1])>=I?P(x,k,[.2*x[0],.2*x[1]]):0!==x[1]&&P(x,k,[I,I]):me||Math.abs(x[0])<1e-4&&Math.abs(x[0]/(x[1]-x[0]))<1e-4&&10!==k?.[0]&&(x[0]=0),x)}(It,jt.domainSources,bt,Ft))}return Te&&(_t.numeric||_t.dateTime)?(_t.dateTime||(at(It),2===jt.domain.length&&0===jt.domain[0]&&0===jt.domain[1]&&zt&&(P(It,jt.domainSources,zt),void 0===we&&(fa=Ne(It,ya,sa,_t.dateTime,it)))),Aa=ra(x,It,aa,fa)):_t.text||_t.dateTime||_t.numeric||_t.bool?(Aa=yt(x,It),fa=0===sa?0:Math.min(It.length,(k-2*me)/Ct.jY)):(K.fF.assertFail("unsupported dataType, something other than text or numeric"),K.fF.assert(function(){return!!Aa},"scale must be defined")),Ve&&Te&&Aa.range(ie(Aa).reverse()),mt&&Aa.range(Aa.range().reverse()),function(x){for(var k=x.domain(),I=0,me=k.length;I<me;++I)k[I]===Number.POSITIVE_INFINITY?k[I]=Number.MAX_VALUE:k[I]===Number.NEGATIVE_INFINITY&&(k[I]=-Number.MAX_VALUE);x.domain(k)}(Aa),{scale:Aa,bestTickCount:fa}}function f(x,k,I){var Te=x.bestTickCount,Ve=k.domainOptions,we=k.valueType,it=k.formatString,ft=k.useTickIntervalForDisplayUnits,xt=k.axis,zt=xt.logAxisScale,bt=xt.labelPrecision,_t=xt.labelDisplayUnits;if(k.isScalar){if(we.dateTime){var Ft=x.scale.domain();return(0,At.Ue)({format:it,value:We.y3.fromTimeValue(1===Te?Ve.domain[0]:Ft[0]),value2:We.y3.fromTimeValue(1===Te?Ve.domain[0]:Ft[1]),tickCount:Te,columnType:we})}if(ft&&I.length>1){var mt=[I[0],I[1]];return zt&&_.every(I,function(jt){return jt<=0})&&(mt=[I[I.length-2],I[I.length-1]]),(0,At.Ue)({format:it,value:_t||mt[1]-mt[0],value2:0,allowFormatBeautification:!0,columnType:we,precision:bt??(0,vt.Gv)(mt[0],mt[1],_t,it)})}if(1===I.length)return(0,At.Ue)({format:it,value:_t||(ft?_.head(I):0),allowFormatBeautification:!0,precision:bt})}return(0,At.E3)(it,!0)}function W(x,k,I,me,Te){return Te||(Te=function(we){return we}),I?(x.tickFormat(function(Ve){return I.format(Te(Ve,me))}),k.map(function(Ve){return I.format(Te(Ve,me))})):k.map(function(Ve){return Te(Ve,me)})}function G(x,k,I){if(x&&!(0,We.iH)(x)){var Te=(0,We.rH)(x,!0).precision;return x.indexOf("%")>-1&&(Te+=2),Math.pow(10,-Te)}return I?.01:k.integer?1:0}function Ce(x,k){if(K.fF.assertValue(x,"data"),0===x.length)return null;var I=_.flatMap(x,function(me){return _.flatMap(me.data,function(Te){return[Te?.value]})});return k&&I.push(0),d3.extent(I)}function Fe(x,k){if(K.fF.assertValue(x,"data"),0===x.length)return null;if(!_.some(x,function(Te){var Ve;return null===(Ve=Te.uncertainty)||void 0===Ve?void 0:Ve.renderUncertainty}))return Ce(x,k);var I=d3.min(x,function(Te){var Ve;return null!==(Ve=Te.uncertainty)&&void 0!==Ve&&Ve.renderUncertainty?d3.min(Te.data,function(we){var qe;return we&&d3.min([we.value,null===(qe=we.uncertainty)||void 0===qe?void 0:qe.lower])}):d3.min(Te.data,function(we){return we&&we.value})}),me=d3.max(x,function(Te){var Ve;return null!==(Ve=Te.uncertainty)&&void 0!==Ve&&Ve.renderUncertainty?d3.max(Te.data,function(we){var qe;return we&&d3.max([we.value,null===(qe=we.uncertainty)||void 0===qe?void 0:qe.upper])}):d3.max(Te.data,function(we){return we&&we.value})});return k&&(I=null==I?0:Math.min(I,0),me=null==me?0:Math.max(me,0)),[I,me]}function Me(x){if(K.fF.assertValue(x,"data"),x.length>=1)for(var k=0,I=x;k<I.length;k++){var Te=_.find(I[k].data,function(Ve){return Ve?.labelFormatString});if(Te)return Te.labelFormatString}}function Ee(x,k,I,me){var Te=x.values;if(0===Te.length)return!1;var Ve=void 0!==x.xLabelMaxWidth?x.xLabelMaxWidth:k/Te.length;return!Te.some(function(we){return me.text=we,I(me)>Ve})}function Ye(x,k,I,me,Te,Ve,we){var qe=x.values,it=void 0!==x.xLabelMaxWidth?x.xLabelMaxWidth:I/qe.length,ft=k.bottom/tt.sine,xt=Te(we),zt=Math.max(1,Math.floor(k.bottom/xt));return 0!==qe.length&&!qe.some(function(Wt){return we.text=Wt,!(0,Gt.r)(Wt)&&me(we)>it})&&qe.filter(function(Wt,Ft){var na=Math.min((k.left+x.outerPadding+x.categoryThickness*(Ft+.5)-ot)/tt.cosine,ft),ya=(0,Gt.ql)(Wt,we,me,it,zt,Ve).join(" ");we.text=Wt;var sa=Ve(we,na);return(0,j.mC)(ya).length>=(0,j.mC)(sa).length}).length>=qe.length>>1}var tt={sine:Math.sin(Math.PI*(35/180)),cosine:Math.cos(Math.PI*(35/180)),tangent:Math.tan(Math.PI*(35/180)),transform:"rotate(-35)",dy:"-0.5em",textAnchor:"end"},dt={sine:Math.sin(.5*Math.PI),cosine:Math.cos(.5*Math.PI),tangent:Math.tan(.5*Math.PI),transform:"rotate(-90)",dy:"-0.65em",textAnchor:"end"},Et={sine:Math.sin(.5*Math.PI),cosine:Math.cos(.5*Math.PI),tangent:Math.tan(.5*Math.PI),transform:"rotate(-90)",dy:"-0.45em",textAnchor:"middle",x:0,y:0,dx:0};function ct(x,k){var I=k.textTruncator,me=k.textProperties,Te=k.needRotate,Ve=k.needEllipsis,we=k.axisProperties,qe=k.margin,it=k.rotate90,ft=k.firstVisibleNode,xt=k.rotationPadding,zt=void 0===xt?0:xt,bt=k.dropLabelsOnOverlap,_t=k.height,Wt=k.y1Hierarchy;if(Te){K.fF.assert(function(){return(0,vt._9)(we.scale)},"Rotating non-ordinal scales is currently not supported");var Ia,Fa,Ft=Wt?Et:it?dt:tt,mt=(0,oe.GG)(Math.abs(Ft.cosine),0,1e-10),jt=qe.left-(mt?ot:0),na=$e.FP.fromPointToPixel(Ct.rZ),sa=parseFloat(me.fontSize),fa=sa<=na,aa=Ge.b.estimateSvgTextHeight(me),It=we.scale,za=ie(It),Aa=Se(It),Ut=aa*Ft.sine,Ra=mt?0:aa*Ft.cosine,Za=Ut/2,ur=(mt?0:Ra/Ft.tangent)+Za,ii=Za,Ai=!!ft;if(fa)Ia=_t/Ft.sine,Fa=-5.5;else{var Di=na/2;Fa=-(Di+Ra)*Ft.sine,Ia=Te?(_t-Di-Ra-(!it||Ai?0:Di))/Ft.sine:void 0}var Qa,wi=It.bandwidth()/2,$i=Aa/2;Qa=bt?Ai?new rt._F(zt+za[0]+wi-$i,ur,ii,ft,It,$i,zt):new rt.LO(zt-(it?0:jt),ur,ii):new rt.DR;var ki=-1;x.each(function(yr,di){var pi=d3.select(this),Q=za[di]+wi;if(bt&&Qa.willCollide(Q))return Qa.skipItem(Q),void pi.text(null);Qa.addItem(Q);var _e,he=pi.text();if(me.text=he,mt)if(Wt&&it){if(!he)return;var lt=we;ki=_.indexOf(lt.adjustedValues,he,ki+1),_e=lt.categoryLabelMaxWidths[ki],K.fF.assert(function(){return!isNaN(_e)},"stacked group allowedLength should be a valid number")}else _e=Ia;else _e=((fa?we.outerPadding+we.categoryThickness*(di+.5):Q)+jt-Ut)/Ft.cosine;if(it||Ve||_e<Ia){var pt=I(me,Math.min(_e,Ia));pt!==he&&pi.text(pt)}var nt=pi.attr("x");pi.style("text-anchor",Ft.textAnchor).attrs({x:null!=Ft.x?Ft.x:nt,y:null!=Ft.y?Ft.y:sa,dx:null!=Ft.dx?Ft.dx:Fa,dy:Ft.dy,transform:Ft.transform})})}else x.each(function(yr){var di=d3.select(this),pi=di.text();me.text=pi;var Q=ht(we,yr),he=I(me,Q);he!==pi&&di.text(he),di.style("text-anchor","middle").attrs({dx:"0em",dy:"1em",transform:"rotate(0)"})})}function yt(x,k){var I,me=x.categoryThickness?x.outerPadding/x.categoryThickness:0;return K.fF.assert(function(){return me>=0&&me<4},"outerPaddingRatio should be a value between zero and four"),d3.scaleBand().range([0,x.pixelSpan]).paddingInner(null!==(I=x.innerPaddingRatio)&&void 0!==I?I:Ct.$B).paddingOuter(me).domain(k)}function Tt(x,k){return null!=x&&!(0,vt.v9)(k)&&(x[0]>0&&x[1]>0||x[0]<0&&x[1]<0)}function ra(x,k,I,me){var Te=(I?d3.scaleLog():d3.scaleLinear()).range([x.outerPadding,x.pixelSpan-x.outerPadding]).domain([k[0],k[1]]).clamp(I||x.shouldClamp);return!(0,vt.v9)(x.valueType)&&!x.preventNice&&!(x.allowSingleScalarTick&&2===k.length&&k[0]===k[1])&&k[0]!==-Number.MAX_VALUE&&k[1]!==Number.MAX_VALUE&&Te.nice(I?void 0:me),Te}function Nt(x){return 1===x?.type}function Rt(x){return 0===x?.type}function $t(x){var k,I,me=_.filter(x.includeDomains,function(Te){return _.includes(Te.domainSources,10)});return null!==(I=null===(k=Pa.apply(void 0,me))||void 0===k?void 0:k.domain)&&void 0!==I?I:[void 0,void 0]}function oa(){for(var x=[],k=0;k<arguments.length;k++)x[k]=arguments[k];for(var I,me,Te=0,Ve=x;Te<Ve.length;Te++){var we=Ve[Te];if(we){var qe=we[0],it=we[1];null!=qe&&(I=Math.min(qe,void 0===I?Number.POSITIVE_INFINITY:I)),null!=it&&(me=Math.max(it,void 0===me?Number.NEGATIVE_INFINITY:me))}}return[I,me]}function Wa(x,k,I){if(x){K.fF.assert(function(){return void 0===x[0]||void 0===x[1]||Number.isNaN(x[0])||Number.isNaN(x[1])||x[0]<=x[1]},"min should be less or equal to max");var me={type:1,domain:x,domainSources:Ea(x,k),forced:I};return K.fF.assert(function(){return!_.includes(me.domainSources,10)||!(!Bt(me)||!me.domain)},"For a user-set domain, `forced` must be true and `domain` must be set"),me}}function Ea(x,k){return[null!=x[0]?k:void 0,null!=x[1]?k:void 0]}function Pa(){for(var x=[],k=0;k<arguments.length;k++)x[k]=arguments[k];var I={forced:!1,source:0},me={forced:!1,source:0},Te={forced:!1,source:0,value:null},Ve={forced:!1,source:0,value:null};function we(_t,Wt){var Ft,mt,jt,na,ya,sa,fa="min"===Wt,aa=fa?I:me,It=fa?Te:Ve,za=null!==(mt=null===(Ft=_t.domainSources)||void 0===Ft?void 0:Ft[fa?0:1])&&void 0!==mt?mt:0,Aa=null!==(na=null===(jt=_t.forced)||void 0===jt?void 0:jt[fa?0:1])&&void 0!==na&&na,Ut=_t.domain[fa?0:1];if(null!=Ut){var Ra=function(Za){0===za&&(It.value=Za,It.forced=Aa)};null==It.value&&Ra(Ut),za>aa.source?(aa.value=Ut,aa.source=za,aa.forced=Aa):za===aa.source&&(Aa&&!aa.forced?(aa.value=Ut,aa.forced=!0,Ra(Ut)):(Aa||!aa.forced)&&(aa.value=fa?Math.min(Ut,null!==(ya=aa.value)&&void 0!==ya?ya:Number.POSITIVE_INFINITY):Math.max(Ut,null!==(sa=aa.value)&&void 0!==sa?sa:Number.NEGATIVE_INFINITY),Ra(aa.value)))}}for(var qe=0,it=x;qe<it.length;qe++){var ft=it[qe];!ft||!ft.domain||(we(ft,"min"),we(ft,"max"))}if(void 0!==I.value||void 0!==me.value){var xt=null!=Te.value&&null!=Ve.value&&(0===I.source||0===me.source)&&(I.value>Ve.value||me.value<Te.value),zt=xt?Te:I,bt=xt?Ve:me;return{type:1,domain:[zt.value,bt.value],forced:[zt.forced,bt.forced],domainSources:[zt.source,bt.source]}}}function Bt(x){var k,I;return(null===(k=x?.forced)||void 0===k?void 0:k[0])||(null===(I=x?.forced)||void 0===I?void 0:I[1])}function ia(x,k,I,me){void 0===me&&(me=!1);var Te=me?"secAxisStyle":"axisStyle";return x?.[Te]?(0,Ot.O1)(x[Te],k,I):k}function Ca(x,k){return!(!x||!k||x.length<2||k.length<2||x[0]===k[0]&&x[1]===k[1])}function Ma(x,k){void 0===k&&(k=0);var I=Math.abs(x),me=Math.log(I)/Math.LN10;return me=Math.ceil(me-1e-12),I/Math.pow(10,me)==1&&me%Math.pow(2,k)==0}function ca(x){return!0===x.isHierarchical}function de(x){return!0===x.isStacked}function je(x){return ca(x.x)?x.x.hierStack:ca(x.y1)?x.y1.hierStack:[]}function Be(x){return ca(x.x)?x.x.numHierarchyLevels:ca(x.y1)?x.y1.numHierarchyLevels:void 0}function ht(x,k){if(_.isEmpty(x.categoryLabelMaxWidths))return x.xLabelMaxWidth;if(de(x))return x.categoryLabelMaxWidths[k];var me=x.d3Axis.tickValues().indexOf(k);return x.categoryLabelMaxWidths[me]}},3128:function(ci,va,b){"use strict";b.d(va,{Rl:function(){return J},fI:function(){return ce},Gf:function(){return fe},l$:function(){return at},xm:function(){return le},PH:function(){return Se},H_:function(){return Oe},yV:function(){return ut},mv:function(){return et}});var d=b(81337),K=b(22733),oe=b(14599),Ue=b(56707),Ge=b(80065),$e=b(2241),Gt=b(45545),Ot=b(33024),Vt=b(86727),At=b(41414),We=b(48766),kt=b(92374),rt=b(18765),St=b(79154),Pt=b(62458),j=b(56578),vt=b(32379),Ct=b(91059),ze=b(28326),Le=b(11956),T=b(34969),xe=b(3087),ot=function(S,g,M,h){var L,H,R=K.p.valueAxis;return L=S?{fontFamilyReference:(H=g?R:K.p.y2Axis).secTitleFontFamily,fontSizeReference:H.secTitleFontSize,boldReference:H.secTitleBold,italicReference:H.secTitleItalic,underlineReference:H.secTitleUnderline,fontColorReference:H.secTitleColor}:{fontFamilyReference:(H=M?K.p.categoryAxis:R).titleFontFamily,fontSizeReference:H.titleFontSize,boldReference:H.titleBold,italicReference:H.titleItalic,underlineReference:H.titleUnderline,fontColorReference:H.titleColor},Pt.fF.assertValue(L,"getAxisTitleSubSelectionStyles titleReferences"),(0,Ge.un)(h,L)},ge=function(S,g,M,h){var L,H,R=K.p.valueAxis;return L=S?{fontFamilyReference:(H=g?R:K.p.y2Axis).secFontFamily,fontSizeReference:H.secFontSize,boldReference:H.secBold,italicReference:H.secItalic,underlineReference:H.secUnderline,fontColorReference:H.secLabelColor,displayUnitsReference:H.secLabelDisplayUnits,precisionReference:H.secLabelPrecision}:{fontFamilyReference:(H=M?K.p.categoryAxis:R).fontFamily,fontSizeReference:H.fontSize,boldReference:H.bold,italicReference:H.italic,underlineReference:H.underline,fontColorReference:H.labelColor,displayUnitsReference:H.labelDisplayUnits,precisionReference:H.labelPrecision},(0,Ge.xs)(h,L)},Qe=function(S,g,M,h,L){var E=A(M,S,g),R=E.axisTitleShow,z=E.zoomAxisShow,H=[{type:1,destinationInfo:{cardUid:Z(S,M),groupUid:te(S,M,"title")},label:L.getLocalizedString("Format_AxisTitle")}];return V(M,h)&&H.unshift((0,d.__assign)((0,d.__assign)({type:2},z),{relatedToggledFormattingIds:[xe.t.show],enabledLabel:L.getLocalizedString("Format_AddZoomSlider")})),H.unshift((0,d.__assign)((0,d.__assign)({type:2},R),{disabledLabel:L.getLocalizedString("Delete"),keyboardShortcuts:[{key:"Delete",nextValue:!1}]}),{type:0,excludedResetFormattingIds:[R,xe.t.show,z]}),H},ve=function(S,g,M,h,L,E){var R=V(M,h),z=A(M,S,g),H=z.axisShow,ye=z.axisTitleShow,Pe=z.zoomAxisShow,p=[{type:1,destinationInfo:{cardUid:Z(S,M),groupUid:te(S,M,M&&R?"valuesScalar":"values")},label:E.getLocalizedString("Format_AxisValues")}];return R||p.unshift({type:4,sortableField:{queryName:"",sortDirection:1},label:E.getLocalizedString("Format_SortAxis"),key:"Category"}),M&&L===We.w.both&&p.unshift((0,d.__assign)((0,d.__assign)({type:3},K.p.categoryAxis.axisType),{label:E.getLocalizedString("Format_Label_AxisType")})),R&&p.unshift((0,d.__assign)((0,d.__assign)({type:2},Pe),{relatedToggledFormattingIds:[xe.t.show],enabledLabel:E.getLocalizedString("Format_AddZoomSlider")})),p.unshift((0,d.__assign)((0,d.__assign)({type:2},ye),{enabledLabel:E.getLocalizedString("Format_AddAxisTitle")})),p.unshift((0,d.__assign)((0,d.__assign)({type:2},H),{disabledLabel:E.getLocalizedString("Delete"),keyboardShortcuts:[{key:"Delete",nextValue:!1}]}),{type:0,excludedResetFormattingIds:[H,xe.t.show,Pe]}),p},V=function(S,g){return!S||g},A=function(S,g,M){if(S)return{axisShow:K.p.categoryAxis.show,axisTitleShow:K.p.categoryAxis.showAxisTitle,zoomAxisShow:xe.t.showOnCategoryAxis};if(g){var h=M?K.p.valueAxis:K.p.y2Axis;return{axisShow:h.show,axisTitleShow:h.secShowAxisTitle,zoomAxisShow:xe.t.showOnValueSecAxis}}return{axisShow:K.p.valueAxis.show,axisTitleShow:K.p.valueAxis.showAxisTitle,zoomAxisShow:xe.t.showOnValueAxis}},Z=function(S,g){return S?"".concat("Visual","-").concat("y2Axis"):g?"".concat("Visual","-").concat("categoryAxis"):"".concat("Visual","-").concat("valueAxis")},te=function(S,g,M){return S?"".concat("y2Axis","-").concat(M):g?"".concat("categoryAxis","-").concat(M):"".concat("valueAxis","-").concat(M)},be=b(88439),Ie=b(49511),J=60;function ce(){for(var S,g,M,h,L,B=this,E=12!==this.chartType,z=new j.Nq(function(){return ie.call(B,ne.call(B))},function(){return ie.call(B,P.call(B))},function(){return ae.call(B)},function(){return Y.call(B)},function(){return Ae.call(B)},function(){return se.call(B)},function(){return B.axisZoom.getZoomCard(E)}).build(),H=[],ye=0,Pe=this.getLayers();ye<Pe.length;ye++){var p=Pe[ye];if(!p.getFormattingCards)return;H.push(p.getFormattingCards({categoryAxisData:null===(g=null===(S=this.originalCartesianData)||void 0===S?void 0:S.axesData)||void 0===g?void 0:g.categoryAxis}))}if(Pt.fF.assert(function(){return B.isComboChart()||H.length<=1},"Formatting layer cards length is not as expected"),this.isComboChart()){var f=be.pD(be.GJ(H,this.chartType,function(G){for(var Ce=[],Fe=1;Fe<arguments.length;Fe++)Ce[Fe-1]=arguments[Fe];return B.hostServices.getLocalizedString(G,Ce)}),this.chartType);null===(M=z?.cards)||void 0===M||M.push.apply(M,f)}else 1===H.length?null===(h=z?.cards)||void 0===h||h.push.apply(h,H[0].card):Pt.fF.assert(function(){return 0===H.length},"Formatting cards for layer has unexpected length");var W=(0,Gt._W)(this.background,this.localizer);return W&&(null===(L=z?.cards)||void 0===L||L.push(W)),z}function ne(){var S,B=this,g=null===(S=this.originalCartesianData)||void 0===S?void 0:S.axesData,M=this.axes;if(M.hasCategoryAxis()&&g){var h=K.p.categoryAxis,L=g.categoryAxis,E=M.isYAxisCategorical,R=E?"Visual_YAxis_Hyphen":"Visual_XAxis_Hyphen",z=new j.CQ(new j.lg("categoryAxis"),R,[h.show,h.axisType,h.start,h.end,h.fontFamily,h.fontSize,h.bold,h.italic,h.underline,h.labelColor,h.labelDisplayUnits,h.labelPrecision,h.maxMarginFactor,h.preferredCategoryWidth,h.showAxisTitle,h.titleText,h.axisStyle,h.titleFontFamily,h.titleFontSize,h.titleBold,h.titleItalic,h.titleUnderline,h.titleColor,h.concatenateLabels,h.show,h.invertAxis,h.logAxisScale,h.switchAxisPosition],this.localizer),H=this.categoryAxisIsScalar(),ye=H.isScalar;H.supportedType===We.w.both&&z.addGroup("type",function(Ee){Ee.addSimpleSlice("type",new j.uY({descriptor:h.axisType,value:ye?We.w.scalar:We.w.categorical}).build())}),ye&&z.addGroup("range",function(Ee){Ee.withDisplayName("Visual_Axis_Range");var Ye=(0,Le.getMergedUserDomains)(L),tt=Ye[0],dt=Ye[1];if(M.isCategoryAxisDateTime()){var Et=tt&&ze.y3.fromTimeValue(tt),ct=dt&&ze.y3.fromTimeValue(dt);Ee.addSimpleSlice("min",new j.hz({descriptor:(0,d.__assign)((0,d.__assign)({},h.start),{propertyTypes:{dateTime:!0},instanceKind:3}),value:Et,placeholder:"",validators:{max:{type:1,value:ct}}}).build(),function(yt){return yt.withCustomDisplayName("Visual_Gradient_MinValue")}).addSimpleSlice("max",new j.hz({descriptor:(0,d.__assign)((0,d.__assign)({},h.end),{propertyTypes:{dateTime:!0},instanceKind:3}),value:ct,placeholder:"",validators:{min:{type:0,value:Et}}}).build(),function(yt){return yt.withCustomDisplayName("Visual_Gradient_MaxValue")})}else Ee.addSimpleSlice("min",new j.mu({descriptor:(0,d.__assign)((0,d.__assign)({},h.start),{propertyTypes:{numeric:!0},instanceKind:3}),value:tt,options:{maxValue:{type:1,value:dt}}}).build(),function(yt){return yt.withCustomDisplayName("Visual_Gradient_MinValue")}).addSimpleSlice("max",new j.mu({descriptor:(0,d.__assign)((0,d.__assign)({},h.end),{propertyTypes:{numeric:!0},instanceKind:3}),value:dt,options:{minValue:{type:0,value:tt}}}).build(),function(yt){return yt.withCustomDisplayName("Visual_Gradient_MaxValue")});Ee.addSimpleSlice("logAxisScale",new j.bd({descriptor:h.logAxisScale,value:L.logAxisScale}).build(),function(yt){return yt.withDisabled(!B.isLogAxisScaleAllowed(!1)).withCustomDescriptionIf(function(){return!B.isLogAxisScaleAllowed(!1)},"Visual_LogarithmicScaleDescription")}),Ee.addSimpleSlice("invertAxis",new j.bd({descriptor:h.invertAxis,value:L.invertAxis}).build(),function(yt){return yt.withCustomDisplayName("Visual_InvertRange")})});var p=L.labelFontProperties,f=L.titleFontProperties,W=(new j.UN).withFontFamily({descriptor:h.fontFamily,value:p.family}).withFontSizeProperties({descriptor:h.fontSize,value:p.size.pt}).withBold({descriptor:h.bold,value:p.weight===St.en}).withItalic({descriptor:h.italic,value:p.style===St.BF}).withUnderline({descriptor:h.underline,value:p.textDecoration===St.f0}),G=(new j.UN).withFontFamily({descriptor:h.titleFontFamily,value:f.family}).withFontSizeProperties({descriptor:h.titleFontSize,value:f.size.pt}).withBold({descriptor:h.titleBold,value:f.weight===St.en}).withItalic({descriptor:h.titleItalic,value:f.style===St.BF}).withUnderline({descriptor:h.titleUnderline,value:f.textDecoration===St.f0}),Ce=W.build(),Fe=G.build();return z.addGroup(ye?"valuesScalar":"values",function(Ee){var Ye;Ee.withDisplayName("Role_DisplayName_Values").addCompositeSlice("font","Font",Ce).addTopLevelToggle("show",function(){return new j.bd({descriptor:h.show,value:L.show}).build()}).addSimpleSlice("color",new j.BT({descriptor:(0,d.__assign)((0,d.__assign)({},h.labelColor),{instanceKind:3}),value:{value:p.color}}).build()),ye?Ee.addSimpleSlice("displayUnits",new j.uY({descriptor:h.labelDisplayUnits,value:L.labelDisplayUnits}).build(),function(tt){return tt.withAliasName("Decimal")}).addSimpleSlice("precision",new j.mu({descriptor:h.labelPrecision,value:L.labelPrecision,options:{minValue:{type:0,value:0},maxValue:{type:1,value:Ue.vo}}}).build()):Ee.addSimpleSlice("maxMarginFactor",new j.JN({descriptor:h.maxMarginFactor,value:Math.round(100*L.maxMarginFactor),options:{minValue:{type:0,value:15},maxValue:{type:1,value:50},unitSymbol:Ot.t2},localize:B.localizer}).build(),function(tt){return tt.withCustomDisplayName(E?"Visual_Max_Width":"Visual_Max_Height")}),E&&Ee.addSimpleSlice("switchAxisPosition",new j.bd({descriptor:h.switchAxisPosition,value:L.switchAxisPosition}).build(),function(tt){return tt.withCustomDisplayName("Visual_SwitchAxisPosition")}),null!==(Ye=B.cartesianVisualCapabilities)&&void 0!==Ye&&Ye.supportsHierarchicalCategoryAxis&&!ye&&Ee.addSimpleSlice("concatenateLabels",new j.bd({descriptor:h.concatenateLabels,value:L.concatenateLabels}).build())}).addGroup("title",function(Ee){Ee.withDisplayName("Visual_Title").withInheritDisabled(!1).addTopLevelToggle("show",function(){return new j.bd({descriptor:h.showAxisTitle,value:L.showAxisTitle}).build()}).addSimpleSlice("text",new j.fq({descriptor:h.titleText,value:L.titleText,placeholder:""}).build(),function(Ye){return Ye.withCustomDisplayName("Visual_Title_Text")}).addSimpleSlice("style",function(){return new j.uY({descriptor:h.axisStyle,value:L.axisStyle,filterValues:M.categoryAxisHasUnitType?[At.DO.showTitleOnly,At.DO.showUnitOnly,At.DO.showBoth]:[At.DO.showTitleOnly]}).build()}).addCompositeSlice("font","Font",Fe).addSimpleSlice("color",new j.BT({descriptor:(0,d.__assign)((0,d.__assign)({},h.titleColor),{instanceKind:3}),value:{value:f.color}}).build(),function(Ye){return Ye.withCustomDisplayName("Generic_Color")})}),ye||z.addGroup("layout",function(Ee){Ee.withDisplayName("Layout").withInheritDisabled(!1).addSimpleSlice("preferredCategoryWidth",new j.JN({descriptor:K.p.categoryAxis.preferredCategoryWidth,value:L.preferredCategoryWidth,options:{minValue:{type:0,value:20},maxValue:{type:1,value:180},unitSymbol:Ot.e_},localize:B.localizer}).build(),function(Ye){return Ye.withCustomDisplayName(E?"Visual_Category_Height":"Visual_Category_Width").withCustomDescription(E?"Visual_Category_Height_Description":"Visual_Category_Width_Description").withHidden(ye)})}),z.build()}}function P(){var S,B=this,g=null===(S=this.originalCartesianData)||void 0===S?void 0:S.axesData;if(g?.isValueAxisSet){var M=this.axes,h=K.p.valueAxis,L=g.valueAxis,E=M.isYAxisCategorical,R=E?"Visual_XAxis_Hyphen":"Visual_YAxis_Hyphen",z=new j.CQ(new j.lg("valueAxis"),R,[h.show,h.start,h.end,h.invertAxis,h.sharedAxis,h.scaleToFit,h.fontFamily,h.fontSize,h.bold,h.italic,h.underline,h.labelColor,h.labelDisplayUnits,h.labelPrecision,h.showAxisTitle,h.titleText,h.axisStyle,h.titleFontFamily,h.titleFontSize,h.titleBold,h.titleItalic,h.titleUnderline,h.titleColor,h.logAxisScale,h.switchAxisPosition],this.localizer),H=L.labelFontProperties,ye=L.titleFontProperties,Pe=(new j.UN).withFontFamily({descriptor:h.fontFamily,value:H.family}).withFontSizeProperties({descriptor:h.fontSize,value:H.size.pt}).withBold({descriptor:h.bold,value:L.labelBold}).withItalic({descriptor:h.italic,value:L.labelItalic}).withUnderline({descriptor:h.underline,value:L.labelUnderline}),p=(new j.UN).withFontFamily({descriptor:h.titleFontFamily,value:ye.family}).withFontSizeProperties({descriptor:h.titleFontSize,value:ye.size.pt}).withBold({descriptor:h.titleBold,value:L.titleBold}).withItalic({descriptor:h.titleItalic,value:L.titleItalic}).withUnderline({descriptor:h.titleUnderline,value:L.titleUnderline}),f=Pe.build(),W=p.build();return z.addGroup("range",function(G){var Ce=(0,Le.getMergedUserDomains)(L),Fe=Ce[0],Me=Ce[1];G.withDisplayName("Visual_Axis_Range").withInheritDisabled(!1).addSimpleSlice("min",new j.mu({descriptor:(0,d.__assign)((0,d.__assign)({},h.start),{propertyTypes:{numeric:!0},instanceKind:3}),value:Fe,options:{maxValue:{type:1,value:Me}}}).build(),function(Ee){return Ee.withCustomDisplayName("Visual_Gradient_MinValue")}).addSimpleSlice("max",new j.mu({descriptor:(0,d.__assign)((0,d.__assign)({},h.end),{propertyTypes:{numeric:!0},instanceKind:3}),value:Me,options:{minValue:{type:0,value:Fe}}}).build(),function(Ee){return Ee.withCustomDisplayName("Visual_Gradient_MaxValue")}),12!==B.chartType&&G.addSimpleSlice("logAxisScale",new j.bd({descriptor:h.logAxisScale,value:L.logAxisScale}).build(),function(Ee){return Ee.withDisabled(!B.isLogAxisScaleAllowed(!0)).withCustomDescriptionIf(function(){return!B.isLogAxisScaleAllowed(!0)},"Visual_LogarithmicScaleDescription")}),G.addSimpleSlice("invertAxis",new j.bd({descriptor:h.invertAxis,value:L.invertAxis}).build(),function(Ee){return Ee.withCustomDisplayName("Visual_InvertRange")}),B.isSmallMultiples()&&G.addSimpleSlice("sharedAxis",new j.bd({descriptor:h.sharedAxis,value:L.sharedAxis}).build(),function(Ee){M.isYAxisCategorical&&Ee.withCustomDisplayName("Visual_Shared_XAxis")}).addSimpleSlice("scaleToFit",new j.bd({descriptor:h.scaleToFit,value:L.scaleToFit}).build(),function(Ee){return Ee.withDisabled(L.sharedAxis)})}).addGroup("values",function(G){G.withDisplayName("Role_DisplayName_Values").addCompositeSlice("font","Font",f).addTopLevelToggle("show",function(){return new j.bd({descriptor:h.show,value:L.show}).build()}).addSimpleSlice("color",new j.BT({descriptor:(0,d.__assign)((0,d.__assign)({},h.labelColor),{instanceKind:3}),value:{value:H.color}}).build()),g.isValueAxisIrregular&&G.withDisabled(!0,"Visual_Axis_Disabled_IrregularAxis"),B.is100Stacked()||G.addSimpleSlice("displayUnits",new j.uY({descriptor:h.labelDisplayUnits,value:L.labelDisplayUnits}).build(),function(Ce){return Ce.withAliasName("Decimal")}).addSimpleSlice("precision",new j.mu({descriptor:h.labelPrecision,value:L.labelPrecision,options:{minValue:{type:0,value:0},maxValue:{type:1,value:Ue.vo}}}).build()),E||G.addSimpleSlice("switchAxisPosition",new j.bd({descriptor:h.switchAxisPosition,value:L.switchAxisPosition}).build(),function(Ce){return Ce.withCustomDisplayName("Visual_SwitchAxisPosition")})}).addGroup("title",function(G){G.withDisplayName("Visual_Title").withInheritDisabled(!1).addTopLevelToggle("show",function(){return new j.bd({descriptor:h.showAxisTitle,value:L.showAxisTitle}).build()}).addSimpleSlice("text",new j.fq({descriptor:h.titleText,value:L.titleText,placeholder:""}).build(),function(Ce){return Ce.withCustomDisplayName("Visual_Title_Text")}).addSimpleSlice("style",function(){return new j.uY({descriptor:h.axisStyle,value:L.axisStyle,filterValues:M.valueAxisHasUnitType?[At.DO.showTitleOnly,At.DO.showUnitOnly,At.DO.showBoth]:[At.DO.showTitleOnly]}).build()}).addCompositeSlice("font","Font",W).addSimpleSlice("color",new j.BT({descriptor:(0,d.__assign)((0,d.__assign)({},h.titleColor),{instanceKind:3}),value:{value:ye.color}}).build(),function(Ce){return Ce.withCustomDisplayName("Generic_Color")})}),z.build()}}function ae(){var S,B=this,g=null===(S=this.originalCartesianData)||void 0===S?void 0:S.axesData;if(g?.isValueAxisSet&&!g.isValueAxisIrregular){var h,L,E;switch(this.chartType){case 0:case 1:h=!0,L=K.p.y2Axis.show,E=K.p.y2Axis;break;case 13:case 14:h=!0,L=K.p.valueAxis.secShow,E=K.p.valueAxis;break;default:h=!1}if(h){var R=this.axes,z=g,H=z.y2,Pe=new j.CQ(new j.lg("y2Axis"),"Visual_Y2Axis_Hyphen",(0,d.__assign)((0,d.__assign)({},E),{alignZeros:K.p.valueAxis.alignZeros}),this.localizer),p=H.labelFontProperties,f=H.titleFontProperties,W=(new j.UN).withFontFamily({descriptor:E.secFontFamily,value:p.family}).withFontSizeProperties({descriptor:E.secFontSize,value:p.size.pt}).withBold({descriptor:E.secBold,value:H.labelBold}).withItalic({descriptor:E.secItalic,value:H.labelItalic}).withUnderline({descriptor:E.secUnderline,value:H.labelUnderline}),G=(new j.UN).withFontFamily({descriptor:E.secTitleFontFamily,value:f.family}).withFontSizeProperties({descriptor:E.secTitleFontSize,value:f.size.pt}).withBold({descriptor:E.secTitleBold,value:H.titleBold}).withItalic({descriptor:E.secTitleItalic,value:H.titleItalic}).withUnderline({descriptor:E.secTitleUnderline,value:H.titleUnderline}),Ce=W.build(),Fe=G.build();return Pe.addGroup("range",function(Me){var Ee=(0,Le.getMergedUserDomains)(H),Ye=Ee[0],tt=Ee[1];Me.withDisplayName("Visual_Axis_Range").addSimpleSlice("min",new j.mu({descriptor:(0,d.__assign)((0,d.__assign)({},E.secStart),{instanceKind:3}),value:Ye,options:{maxValue:{type:1,value:tt}}}).build(),function(dt){return dt.withCustomDisplayName("Visual_Gradient_MinValue")}).addSimpleSlice("max",new j.mu({descriptor:(0,d.__assign)((0,d.__assign)({},E.secEnd),{instanceKind:3}),value:tt,options:{minValue:{type:0,value:Ye}}}).build(),function(dt){return dt.withCustomDisplayName("Visual_Gradient_MaxValue")}),Me.addSimpleSlice("logAxisScale",new j.bd({descriptor:E.secLogAxisScale,value:H.logAxisScale}).build(),function(dt){return dt.withDisabled(!B.isLogAxisScaleAllowed(!0,!0)).withCustomDescriptionIf(function(){return!B.isLogAxisScaleAllowed(!0,!0)},"Visual_LogarithmicScaleDescription")}),B.isComboChart()&&Me.addSimpleSlice("alignZeroes",new j.bd({descriptor:K.p.valueAxis.alignZeros,value:z.valueAxis.alignZeros}).build())}).addGroup("values",function(Me){Me.withDisplayName("Role_DisplayName_Values").addTopLevelToggle("show",function(){return new j.bd({descriptor:L,value:H.show}).build()}).addCompositeSlice("font","Font",Ce).addSimpleSlice("color",new j.BT({descriptor:E.secLabelColor,value:{value:p.color}}).build()),B.is100Stacked()||Me.addSimpleSlice("displayUnits",new j.uY({descriptor:E.secLabelDisplayUnits,value:H.labelDisplayUnits}).build(),function(Ee){return Ee.withAliasName("Decimal")}).addSimpleSlice("precision",new j.mu({descriptor:E.secLabelPrecision,value:H.labelPrecision,options:{minValue:{type:0,value:0},maxValue:{type:1,value:Ue.vo}}}).build())}).addGroup("title",function(Me){Me.withDisplayName("Visual_Title").withInheritDisabled(!1).addTopLevelToggle("show",function(){return new j.bd({descriptor:E.secShowAxisTitle,value:H.showAxisTitle}).build()}).addSimpleSlice("text",new j.fq({descriptor:E.secTitleText,value:H.titleText,placeholder:""}).build(),function(Ee){return Ee.withCustomDisplayName("Visual_Title_Text")}).addSimpleSlice("style",function(){return new j.uY({descriptor:E.secAxisStyle,value:H.axisStyle,filterValues:R.valueAxisHasUnitType?[At.DO.showTitleOnly,At.DO.showUnitOnly,At.DO.showBoth]:[At.DO.showTitleOnly]}).build()}).addCompositeSlice("font","Font",Fe).addSimpleSlice("color",new j.BT({descriptor:E.secTitleColor,value:{value:f.color}}).build(),function(Ee){return Ee.withCustomDisplayName("Generic_Color")})}),Pe.build()}}}function Y(){var B,S=null===(B=this.originalCartesianData)||void 0===B?void 0:B.legendData;if(!_.isEmpty(this.dataViews)&&S){for(var g={legendData:S},h=0,L=this.getLayers();h<L.length;h++){var E=L[h];E.customizeLegendFormattingModelOptions&&(g=E.customizeLegendFormattingModelOptions(g))}var R;return R=this.featureSwitches.onObject?"Visual_LegendCard_DisabledReasonNew":13===this.chartType?"Visual_LegendCard_ComboLineClustered_DisabledReason":14===this.chartType?"Visual_LegendCard_ComboLineStacked_DisabledReason":"Visual_LegendCard_DisabledReason",(0,Vt.ZF)(g,this.hostServices,this.featureSwitches,!this.shouldShowLegendCard(),R)}}function se(){var S,B=this,g=null===(S=this.originalCartesianData)||void 0===S?void 0:S.axesData;if(!_.isEmpty(this.dataViews)&&g){var E,R,z,H,M=this.axes,h=M.hasCategoryAxis(),L=M.isYAxisCategorical,Pe=this.categoryAxisIsScalar().isScalar||this.hasHierarchicalAxisRenderMode;L?(E=K.p.categoryAxis,R=g.categoryAxis,h&&(z=K.p.valueAxis,H=g.valueAxis)):(E=K.p.valueAxis,R=g.valueAxis,h&&12!==this.chartType&&(z=K.p.categoryAxis,H=g.categoryAxis));var p=new j.CQ(new j.lg("gridlines"),"Visual_Gridline_Show",[K.p.categoryAxis.gridlineShow,K.p.categoryAxis.gridlineStyle,K.p.categoryAxis.gridlineColor,K.p.categoryAxis.gridlineTransparency,K.p.categoryAxis.gridlineThickness,K.p.categoryAxis.gridlineDashArray,K.p.categoryAxis.gridlineDashCap,K.p.categoryAxis.gridlineAutoScale,K.p.valueAxis.gridlineShow,K.p.valueAxis.gridlineStyle,K.p.valueAxis.gridlineColor,K.p.valueAxis.gridlineTransparency,K.p.valueAxis.gridlineThickness,K.p.valueAxis.gridlineDashArray,K.p.valueAxis.gridlineDashCap,K.p.valueAxis.gridlineAutoScale],this.localizer),f=function(G,Ce,Fe,Me){Ce&&G.withDisplayName(Me).addTopLevelToggle("show",function(){return new j.bd({descriptor:Ce.gridlineShow,value:!!Fe.show&&Fe.gridline.strokeShow}).build()},function(Ee){return Ee.withDisabled(!Fe.show)}).addSlices((0,$e.Iq)({containerItemBuilder:G,descriptors:{strokePattern:Ce.gridlineStyle,strokeColor:Ce.gridlineColor,strokeTransparency:Ce.gridlineTransparency,strokeWidth:Ce.gridlineThickness,strokeDashArray:Ce.gridlineDashArray,strokeDashCap:Ce.gridlineDashCap,strokeAutoScale:Ce.gridlineAutoScale},strokeData:Fe.gridline,selector:void 0,featureSwitches:B.featureSwitches,localize:B.localizer,isSVGStroke:!0,colorInstanceKind:3,maxWidth:4}).map(function(Ee){return Ee.build()}))};return(R&&!L||L&&Pe)&&p.addGroup("horizontal",function(W){return f(W,E,R,"Visual_LabelOrientation_Horizontal")}),(z&&H&&L||!L&&Pe)&&p.addGroup("vertical",function(W){return f(W,z,H,"Visual_LabelOrientation_Vertical")}),p.build()}}function Ae(){var B=this;if(11!==this.chartType&&12!==this.chartType&&!_.isEmpty(this.dataViews)){var S=oe.N_.smallMultiplesLayout,g=oe.N_.subheader,M=new j.CQ(new j.lg("smallMultiples"),"Role_DisplayName_SmallMultiples",[S.rowCount,S.columnCount,S.gridPadding,S.advancedPaddingOptions,S.columnPaddingInner,S.columnPaddingOuter,S.rowPaddingInner,S.rowPaddingOuter,S.gridLineType,S.gridLineShow,S.gridLineStyle,S.gridLineColor,S.gridLineTransparency,S.gridLineWidth,S.backgroundColor,S.backgroundTransparency,g.show,g.fontFamily,g.fontSize,g.fontColor,g.underline,g.bold,g.italic,g.position,g.alignment,g.titleWrap],this.localizer);if(!this.showSmallMultiplesCard())return M.withDisabled(!0,"Visual_SmallMultipleCard_DisabledReason"),M.build();var h=(0,T.Zw)(this.dataViews[0].metadata.objects,this.layerStyle),L=(0,T.yA)(this.dataViews[0].metadata.objects,this.layerStyle),E=T.LK(h);return M.withDescription("Small_Multiples_Layout_Description").addGroup("layout",function(R){Pt.fF.assert(function(){return 0!==h.layoutType},"Unexpected auto layout"),R.withDisplayName("Layout").addSimpleSlice("rowCount",new j.mu({descriptor:S.rowCount,value:h.rowCount,options:{minValue:{type:0,value:T.$W},maxValue:{type:1,value:E.maxRowCount}}}).build()).addSimpleSlice("columnCount",new j.mu({descriptor:S.columnCount,value:h.columnCount,options:{minValue:{type:0,value:T.fw},maxValue:{type:1,value:E.maxColumnCount}}}).build());var z=h.advancedPaddingOptions,H={minValue:{type:0,value:0},maxValue:{type:1,value:40}};R.addSimpleSlice("gridPadding",new j.mu({descriptor:S.gridPadding,value:h.gridPadding,options:H}).build(),function(ye){return ye.withDisabled(z).withCustomDisplayName("Small_Multiples_All_Padding")}).addSimpleSlice("advancedPadding",new j.bd({descriptor:S.advancedPaddingOptions,value:h.advancedPaddingOptions}).build(),function(ye){return ye.withCustomDisplayName("Small_Multiples_Customize_Padding")}),z&&R.addSimpleSlice("columnPaddingInner",new j.JN({descriptor:S.columnPaddingInner,value:h.columnPaddingInner,options:H,localize:B.localizer}).build()).addSimpleSlice("columnPaddingOuter",new j.JN({descriptor:S.columnPaddingOuter,value:h.columnPaddingOuter,options:H,localize:B.localizer}).build()).addSimpleSlice("rowPaddingInner",new j.JN({descriptor:S.rowPaddingInner,value:h.rowPaddingInner,options:H,localize:B.localizer}).build()).addSimpleSlice("rowPaddingOuter",new j.JN({descriptor:S.rowPaddingOuter,value:h.rowPaddingOuter,options:H,localize:B.localizer}).build())}),M.addGroup("border",function(R){return R.withDisplayName("Visual_Border").addSimpleSlice("gridLineType",new j.uY({descriptor:S.gridLineType,value:h.gridline.region===Ie.o.none?Ie.o.inner:h.gridline.region}).build()).addSlices((0,$e.Iq)({containerItemBuilder:R,descriptors:{strokeShow:S.gridLineShow,strokeColor:S.gridLineColor,strokeTransparency:S.gridLineTransparency,strokePattern:S.gridLineStyle,strokeWidth:S.gridLineWidth},strokeData:h.gridline,selector:void 0,featureSwitches:B.featureSwitches,localize:B.localizer}).map(function(z){return z.build()}))}),M.addGroup("title",function(R){R.withDisplayName("Title"),R.addTopLevelToggle("show",function(){return new j.bd({descriptor:g.show,value:!!B.showSubheaderCard()&&L.show}).build()});var z=L.fontProperties,ye=(new j.UN).withFontFamily({descriptor:g.fontFamily,value:z.family}).withFontSizeProperties({descriptor:g.fontSize,value:z.size.pt}).withBold({descriptor:g.bold,value:L.labelBold}).withItalic({descriptor:g.italic,value:L.labelItalic}).withUnderline({descriptor:g.underline,value:L.labelUnderline}).build();R.addSimpleSlice("position",function(){var Pe;switch(L.vertical){default:case 0:Pe=rt.cL.top;break;case 1:Pe=rt.cL.bottom}return new j.uY({descriptor:g.position,value:Pe}).build()}).addCompositeSlice("font","Font",ye).addSimpleSlice("color",new j.BT({descriptor:(0,d.__assign)((0,d.__assign)({},g.fontColor),{instanceKind:3,selector:{data:[(0,Ct.Yp)([K.x.rows])]},altConstantValueSelector:null}),value:{value:z.color}}).build()).addSimpleSlice("alignment",function(){var Pe;switch(L.horizontal){default:case 0:Pe=kt.D.left;break;case 1:Pe=kt.D.center;break;case 2:Pe=kt.D.right}return new j.Gp({descriptor:g.alignment,value:Pe,mode:"horizontalAlignment"}).build()}),R.addSimpleSlice("titleWrap",new j.bd({descriptor:g.titleWrap,value:L.titleWrap}).build(),function(Pe){return Pe.withCustomDisplayName("TextWrap")})}),M.addGroup("background",function(R){return R.withDisplayName("Visual_Background").addSimpleSlice("color",new j.BT({descriptor:(0,d.__assign)((0,d.__assign)({},S.backgroundColor),{selector:{data:[(0,Ct.Yp)([K.x.rows])]},altConstantValueSelector:null,instanceKind:3}),value:{value:h.backgroundColor},isNoFillItemSupported:!0}).build(),function(z){return z.withCustomDisplayName("Generic_Color")}).addSimpleSlice("transparency",j.JN.getTransparencySliderBuilder({descriptor:S.backgroundTransparency,value:h.backgroundTransparency,localize:B.localizer}).build(),function(z){return z.withCustomDisplayName("Transparency")})}),M.build()}}function fe(B,S){return new j.JN({descriptor:K.p.categoryAxis.innerPadding,value:T.qE(B),options:{minValue:{type:0,value:T.T4},maxValue:{type:1,value:T.zn},unitSymbol:Ot.t2},localize:S}).build()}function ie(B){if(B)for(var g=B,M=0,h=this.getLayers();M<h.length;M++){var L=h[M];return L.customizeFormattingCard&&(g=L.customizeFormattingCard(B)),g}}function Se(B){for(var g=0,M=this.getLayers();g<M.length;g++){var h=M[g];if(h.getSubSelectionCustomOutlines){var L=h.getSubSelectionCustomOutlines(B);if(L)return L}}return[]}function le(B){for(var g=0,M=this.getLayers();g<M.length;g++){var h=M[g];if(h.getSubSelectionCustomElements){var L=h.getSubSelectionCustomElements(B);if(L)return L}}return[]}function Oe(B){for(var g=0,M=this.getLayers();g<M.length;g++){var h=M[g];if(h.getSubSelectionMetadata){var L=h.getSubSelectionMetadata(B);if(L)return L}}return null}function et(B){if(this.featureSwitches.onObject){var M,h,g=_.first(B).visualObjects;if(!(g.length>0))return;M=g[0],M?.selectorsByColumn&&(h=(0,vt.fd)((0,vt.tV)(M.selectorsByColumn)));var L=1===this.getLayers().length&&this.cartesianData.legendData.dataPoints.length<=1,E=this.isComboChart();switch(M.objectName){case"legend-title":return(0,Vt.aJ)();case"x-axis-zoom-slider":case"y1-axis-zoom-slider":case"y2-axis-zoom-slider":return;case"legend-items":return(0,Vt.Gh)(this.hostServices);case"horizontal-gridlines":return Ge.w3(this.hostServices,this.axes.isYAxisCategorical?K.p.categoryAxis.gridlineColor:K.p.valueAxis.gridlineColor);case"vertical-gridlines":return Ge.w3(this.hostServices,this.axes.isYAxisCategorical?K.p.valueAxis.gridlineColor:K.p.categoryAxis.gridlineColor);case"series-labels":var R=L?void 0:h;return Ge.un(this.hostServices,{fontFamilyReference:(0,d.__assign)((0,d.__assign)({},oe.N_.seriesLabels.seriesFontFamily),{selector:R}),fontSizeReference:(0,d.__assign)((0,d.__assign)({},oe.N_.seriesLabels.textSize),{selector:R}),boldReference:(0,d.__assign)((0,d.__assign)({},oe.N_.seriesLabels.bold),{selector:R}),italicReference:(0,d.__assign)((0,d.__assign)({},oe.N_.seriesLabels.italic),{selector:R}),underlineReference:(0,d.__assign)((0,d.__assign)({},oe.N_.seriesLabels.underline),{selector:R}),fontColorReference:(0,d.__assign)((0,d.__assign)({},oe.N_.seriesLabels.seriesColor),{selector:R}),backgroundReference:(0,d.__assign)((0,d.__assign)({},oe.N_.seriesLabels.backgroundColor),{selector:R}),wordWrapReference:(0,d.__assign)((0,d.__assign)({},oe.N_.seriesLabels.seriesWordWrap),{selector:R})});case"x-axis-title":return ot(!1,E,!this.axes.isYAxisCategorical,this.hostServices);case"y1-axis-title":return ot(!1,E,this.axes.isYAxisCategorical,this.hostServices);case"y2-axis-title":return ot(!0,E,this.axes.isYAxisCategorical,this.hostServices);case"x-axis-values":return ge(!1,E,!this.axes.isYAxisCategorical,this.hostServices);case"y1-axis-values":return ge(!1,E,this.axes.isYAxisCategorical,this.hostServices);case"y2-axis-values":return ge(!0,E,this.axes.isYAxisCategorical,this.hostServices);case"grid-cell-subheader":var z=oe.N_.subheader;return Ge.un(this.hostServices,{fontFamilyReference:z.fontFamily,fontSizeReference:z.fontSize,boldReference:z.bold,italicReference:z.italic,underlineReference:z.underline,fontColorReference:(0,d.__assign)((0,d.__assign)({},z.fontColor),{selector:{data:[(0,Ct.Yp)([K.x.rows])]}}),horizontalAlignmentReference:z.alignment,wordWrapReference:z.titleWrap});case"small-multiples-gridlines":var H=oe.N_.smallMultiplesLayout;return Ge.w3(this.hostServices,H.gridLineColor,(0,d.__assign)((0,d.__assign)({},H.backgroundColor),{selector:{data:[(0,Ct.Yp)([K.x.rows])]}}),this.localizer("Visual_Border"));default:for(var ye=0,Pe=this.getLayers();ye<Pe.length;ye++){var p=Pe[ye];if(p.getSubSelectionStyles){var f=p.getSubSelectionStyles(B);if(f)return f}}}}}function ut(B,S){if(this.featureSwitches.onObject&&!S){var h,M=_.first(B).visualObjects;if(!(M.length>0))return;h=M[0];var H,L=this.getLayers(),E=this.isComboChart(),R=L.length<=1&&this.cartesianData.legendData.dataPoints.length<=1,z={key:"Delete",nextValue:!1};switch(!R&&!_.isEmpty(h.selectorsByColumn)&&(H=(0,vt.fd)((0,vt.tV)(h.selectorsByColumn))),h.objectName){case"legend-title":return(0,Vt.tV)(this.hostServices);case"legend-items":return(0,Vt.tY)({hostServices:this.hostServices,showSort:!0});case"horizontal-gridlines":return[(0,d.__assign)((0,d.__assign)({type:2},(this.axes.isYAxisCategorical?K.p.categoryAxis:K.p.valueAxis).gridlineShow),{disabledLabel:this.localizer("Delete"),keyboardShortcuts:[z]}),{type:0},{type:1,destinationInfo:{cardUid:"".concat("Visual","-").concat("gridlines"),groupUid:"".concat("gridlines","-").concat("horizontal")},label:this.localizer("Format_Gridlines")}];case"vertical-gridlines":return[(0,d.__assign)((0,d.__assign)({type:2},(this.axes.isYAxisCategorical?K.p.valueAxis:K.p.categoryAxis).gridlineShow),{disabledLabel:this.localizer("Delete"),keyboardShortcuts:[z]}),{type:0},{type:1,destinationInfo:{cardUid:"".concat("Visual","-").concat("gridlines"),groupUid:"".concat("gridlines","-").concat("vertical")},label:this.localizer("Format_Gridlines")}];case"data-labels":var p=R?oe.N_.labels.show:oe.N_.labels.showSeries;return[(0,d.__assign)((0,d.__assign)({type:2},p),{disabledLabel:this.localizer("Delete"),selector:H,keyboardShortcuts:[z]}),{type:0,excludedResetFormattingIds:[(0,d.__assign)((0,d.__assign)({},p),{selector:H})],relatedResetFormattingIds:[(0,d.__assign)((0,d.__assign)({},oe.N_.labels.enableBackground),{selector:H})]},{type:1,destinationInfo:(0,d.__assign)((0,d.__assign)({},oe.N_.labels.labelPosition),{selector:H}),label:this.localizer("Format_Data_Labels")}];case"series-labels":return[(0,d.__assign)((0,d.__assign)({type:2},oe.N_.seriesLabels.show),{disabledLabel:this.localizer("Delete"),selector:H,keyboardShortcuts:[z]}),{type:0,relatedResetFormattingIds:[(0,d.__assign)((0,d.__assign)({},oe.N_.seriesLabels.enableBackground),{selector:H})],excludedResetFormattingIds:[(0,d.__assign)((0,d.__assign)({},oe.N_.seriesLabels.show),{selector:H})]},{type:1,destinationInfo:(0,d.__assign)((0,d.__assign)({},oe.N_.seriesLabels.seriesPosition),{selector:H}),label:this.localizer("Format_Series_Labels")}];case"total-labels":return[(0,d.__assign)((0,d.__assign)({type:2},oe.N_.totals.show),{disabledLabel:this.localizer("Delete"),keyboardShortcuts:[z]}),{type:0,excludedResetFormattingIds:[oe.N_.totals.show]},{type:1,destinationInfo:{cardUid:"".concat("Visual","-").concat("totals"),groupUid:"".concat("totals","-").concat("values")},label:this.localizer("Format_Total_Labels")}];case"x-axis-title":return Qe(!1,E,!this.axes.isYAxisCategorical,this.categoryAxisIsScalar().isScalar,this.hostServices);case"y1-axis-title":return Qe(!1,E,this.axes.isYAxisCategorical,this.categoryAxisIsScalar().isScalar,this.hostServices);case"y2-axis-title":return Qe(!0,E,this.axes.isYAxisCategorical,this.categoryAxisIsScalar().isScalar,this.hostServices);case"x-axis-values":return ve(!1,E,!this.axes.isYAxisCategorical,this.categoryAxisIsScalar().isScalar,this.categoryAxisIsScalar().supportedType,this.hostServices);case"y1-axis-values":return ve(!1,E,this.axes.isYAxisCategorical,this.categoryAxisIsScalar().isScalar,this.categoryAxisIsScalar().supportedType,this.hostServices);case"y2-axis-values":return ve(!0,E,this.axes.isYAxisCategorical,this.categoryAxisIsScalar().isScalar,this.categoryAxisIsScalar().supportedType,this.hostServices);case"grid-cell-subheader":return[(0,d.__assign)((0,d.__assign)({type:2},oe.N_.subheader.show),{disabledLabel:this.localizer("Delete"),keyboardShortcuts:[z]}),{type:0},{type:1,destinationInfo:{cardUid:"".concat("Visual","-").concat("smallMultiples"),groupUid:"".concat("smallMultiples","-").concat("title")},label:this.localizer("Format_Small_Multiples_Title")}];case"small-multiples-gridlines":return[{type:0},(0,d.__assign)((0,d.__assign)({type:3},oe.N_.smallMultiplesLayout.gridLineType),{label:this.localizer("Small_Multiples_Gridlines_Style")}),{type:1,destinationInfo:{cardUid:"".concat("Visual","-").concat("smallMultiples"),groupUid:"".concat("smallMultiples","-").concat("border")},label:this.localizer("Format_Small_Multiples_Border")}];case"x-axis-zoom-slider":case"y1-axis-zoom-slider":case"y2-axis-zoom-slider":return[(0,d.__assign)((0,d.__assign)({type:2},"y2-axis-zoom-slider"===h.objectName?xe.t.showOnValueSecAxis:!("x-axis-zoom-slider"!==h.objectName)==!!this.axes.isYAxisCategorical?xe.t.showOnValueAxis:xe.t.showOnCategoryAxis),{disabledLabel:this.localizer("Delete"),keyboardShortcuts:[z]}),{type:0,excludedResetFormattingIds:[xe.t.showOnValueSecAxis]},(0,d.__assign)((0,d.__assign)({type:2},xe.t.showLabels),{enabledLabel:this.localizer("Format_AddSliderLabels")}),(0,d.__assign)((0,d.__assign)({type:2},xe.t.showTooltip),{enabledLabel:this.localizer("Format_AddSliderTooltips")}),{type:1,destinationInfo:{cardUid:"".concat("Visual","-").concat("zoom"),groupUid:"".concat("zoom","-").concat("default")},label:this.localizer("Format_ZoomSlider")}];default:for(var Me=0,Ee=L;Me<Ee.length;Me++){var Ye=Ee[Me];if(Ye.getSubSelectionShortcuts){var tt=Ye.getSubSelectionShortcuts(B,S);if(tt)return tt}}}}}function at(B){for(var S=this.subSelectionHelper.getAllSubSelectables(B),M=0,h=this.getLayers();M<h.length;M++){var L=h[M];L.getDisambiguationSubSelectables&&S.push.apply(S,L.getDisambiguationSubSelectables(this.subSelectionHelper,B))}return S}},63616:function(ci,va,b){"use strict";b.r(va),b.d(va,{CartesianAxisRenderModeSelector:function(){return gs},CartesianCategoryLoadMoreDataHandler:function(){return to},CartesianChart:function(){return Nu},SharedColorPalette:function(){return eo}});var d=b(81337),K=b(22733),oe=b(86946),Ue=b(90120),Ge=b(95938),$e=b(51650),Gt=b(95309),Ot=b(33777),Vt=b(28579),At=b(47006),We=b(52287),kt=b(86900),rt=b(92783),St=b(45545),Pt=b(65741),j=b(72902),vt=b(40739),Ct=b(48766),ze=b(45296),Le=b(44783),T=b(62458),xe=b(39681),ot=b(58778),ge=b(56578),Qe=b(60810),ve=b(46135),V=b(38958),A=b(82755),Z=b(79154),te=b(32041),Ne=b(64329),be=b(3087),Ie=b(38168),J=b(18664),ce=b(95519),ne=b(80065),P=b(11956),ae=b(45863),Y=b(53197),se=(0,Z.CH)("noUi-target"),Ae=(0,Z.CH)("noUi-base"),fe=(0,Z.CH)("noUi-value"),ie=(0,Z.CH)("noUi-handle"),Oe=function(){function r(){}return r.createOrUpdateSliders=function(e){var a=e.axesData,i=e.zoomAxes,n=e.zoomData,s=e.zoomExtents,o=e.hasYAxisCategorical,l=e.yFlipped,u=e.maxLabelWidthLeft,c=e.maxLabelWidthRight,v=e.resetEventHandlers,y=e.hideSliders,m=e.visualHostServices,w=e.invertedState;e.containers.each(function(C){var F,N,D=r.getAxisType(C,l),O=!1;if("y2"===D?(F=i.valueSecAxis,N=s.valueSecExtent):"y1"===D&&o||"x"===D&&!o?(F=i.categoryAxis,N=s.categoryExtent):(F=i.valueAxis,N=s.valueExtent),F){var U=r.getAxisData(D,a),X=F.scale.domain(),re=F.d3Axis.tickValues(),pe=U.logAxisScale&&(0,P.isLogScaleAllowedFunc)(X),q=y?"none":r.getScaleType(X,pe);"none"!==q&&pe&&(N=r.calcLogSliderValues(N),X=r.calcLogSliderValues(X),re=r.calcLogSliderValues(re));var ee=r.getFormatFn(F,q),ue=d3.select(this),ke=ue.select(se.selector);r.wasInverted(D,a,w)&&(ke.node()&&ke.node().noUiSlider.destroy(),O=!0),ke.node()&&!O?r.updateSlider({slider:ke,axisType:D,axisData:U,zoomData:n,hasYAxisCategorical:o,extent:N,scaleDomain:X,labelValues:re,maxLabelWidth:"left"===C?u:c,scaleType:q,formatFn:ee,resetEventHandlers:v,visualHostServices:m}):r.createSlider({container:ue,axisType:D,axisData:U,zoomData:n,hasYAxisCategorical:o,extent:N,scaleDomain:X,labelValues:re,maxLabelWidth:"left"===C?u:c,scaleType:q,formatFn:ee,visualHostServices:m})}})},r.createSlider=function(e){var a=e.axisType,i=e.axisData,n=e.zoomData,s=e.hasYAxisCategorical,o=e.extent,l=e.scaleDomain,u=e.labelValues,c=e.maxLabelWidth,v=e.scaleType,y=e.formatFn,m=e.visualHostServices;if("none"!==v){var w=e.container.append("div").attr("rtl","rtl"===document.dir);(0,ae.create)(w.node(),{start:o,range:{min:l[0],max:l[1]},margin:.001*(l[1]-l[0]),connect:!0,behaviour:"tap-drag",orientation:"x"===a?"horizontal":"vertical",direction:"x"===a?i.invertAxis?"rtl":"ltr":i.invertAxis?"ltr":"rtl",tooltips:!!n.showTooltip&&[{to:y},{to:y}],pips:n.showLabels?{mode:"values",values:u,format:{to:y,from:void 0}}:void 0}),w.select(Ae.selector).attr("drag-resize-disabled",!0).on("keydown",function(){return d3.event.stopPropagation()}),this.applyVisualAxisStyles(w,a,i,c);var C=this.getAxisZoomPropertyNames(a,s);w.node().querySelectorAll(ie.selector).forEach(function(D){D.setAttribute("aria-label",e.visualHostServices.getLocalizedString("Visual_ZoomSlider"))}),w.node().noUiSlider.on("slide",_.throttle(function(D,O,F){r.onSlide(C.min,C.max,C.size,F,this.options.range.min,this.options.range.max,v,m)},100)),this.convertSliderToSubSelectable(w,a)}},r.updateSlider=function(e){var t=e.slider,a=e.axisType,i=e.axisData,n=e.zoomData,s=e.hasYAxisCategorical,o=e.extent,l=e.scaleDomain,u=e.labelValues,c=e.maxLabelWidth,v=e.scaleType,y=e.formatFn,m=e.resetEventHandlers,w=e.visualHostServices;if("none"!==v){if(t.node().noUiSlider.updateOptions({start:o,range:{min:l[0],max:l[1]},margin:.001*(l[1]-l[0]),tooltips:!!n.showTooltip&&[{to:y},{to:y}],pips:n.showLabels?{mode:"values",values:u,format:{to:y,from:void 0}}:null},!1),this.applyVisualAxisStyles(t,a,i,c),m){var C=this.getAxisZoomPropertyNames(a,s);t.node().noUiSlider.off("slide"),t.node().noUiSlider.on("slide",_.throttle(function(D,O,F){r.onSlide(C.min,C.max,C.size,F,this.options.range.min,this.options.range.max,v,w)},100))}this.convertSliderToSubSelectable(t,a)}else t.node().noUiSlider.destroy()},r.convertSliderToSubSelectable=function(e,t){var a=this;e.classed(We.cy,!0).attr(We.Ez,this.getAxisZoomSliderSubSelectableRegionAttribute(t)).attr(We.CK,"Visual_ZoomSlider").attr(We.QZ,0);var i=e.node();We.O5.setDataForElement(i,{getRegionOutlines:function(){return a.getSliderOutlines(i,t)}})},r.getSliderOutlines=function(e,t){var a=e.getBoundingClientRect(),i=e.querySelector(ie.selector).getBoundingClientRect().width/2;return[{id:this.getAxisZoomSliderSubSelectableRegionAttribute(t),outline:{x:a.x-i,y:a.y-i,width:i+a.width+i,height:i+a.height+i,type:1}}]},r.getAxisZoomSliderSubSelectableRegionAttribute=function(e){switch(e){case"x":return"x-axis-zoom-slider";case"y1":return"y1-axis-zoom-slider";case"y2":return"y2-axis-zoom-slider";default:T.fF.assertFail("Unsupported axis type")}},r.destroySliders=function(e){var a=e.hasYAxisCategorical,i=e.yFlipped,n=e.visualHostServices;e.containers.each(function(s){var o=r.getAxisType(s,i);r.destroySlider({axisType:o,hasYAxisCategorical:a,visualHostServices:n})})},r.destroySlider=function(e){var i=e.visualHostServices,n=this.getAxisZoomPropertyNames(e.axisType,e.hasYAxisCategorical),s={};s[n.min]=!0,s[n.max]=!0,s[n.size]=!0,i.persistProperties({remove:[{objectName:"zoom",properties:s,selector:void 0}]},!0)},r.onSlide=function(e,t,a,i,n,s,o,l){var u={},c={};i=_.map(i,function(y){return r.calcOriginalValue(y,o)}),n=r.calcOriginalValue(n,o),s=r.calcOriginalValue(s,o);var v=i[1]-i[0];i[0]===n&&i[1]===s?(c[e]=!0,c[t]=!0,c[a]=!0):i[0]===n?(c[e]=!0,u[t]=1,u[a]=v):i[1]===s?(u[e]=1,c[t]=!0,u[a]=v):(u[e]=i[0],u[t]=i[1],c[a]=!0),l.persistProperties({merge:[{objectName:"zoom",properties:u,selector:void 0}],remove:[{objectName:"zoom",properties:c,selector:void 0}]},!0)},r.getAxisType=function(e,t){switch(e){case"bottom":return"x";case"left":return t?"y2":"y1";case"right":return t?"y1":"y2";default:T.fF.assertNever(e)}},r.getFormatFn=function(e,t){var a;if("none"!==t){var i=null!==(a=e.d3Axis.tickFormat())&&void 0!==a?a:P.defaultTickFormat;return function(n){return i(r.calcOriginalValue(n,t),0)}}},r.calcLogSliderValues=function(e){return _.map(e,function(t){return r.log10(Math.abs(t))})},r.calcOriginalValue=function(e,t){switch(t){case"linear":return e;case"log":return Math.pow(10,e);case"rLog":return-Math.pow(10,e);default:T.fF.assertNever(t)}},r.applyVisualAxisStyles=function(e,t,a,i){var n=a.labelFontProperties;e.selectAll(fe.selector).styles((0,J.wB)(n)),"x"!==t&&e.selectAll(fe.selector).call(Y.oq,i,te.b.svgEllipsis)},r.getAxisData=function(e,t){return t["y1"===e?"y":e]},r.getScaleType=function(e,t){return T.fF.assert(function(){return e[0]!==e[1]},"Scale domain should not have zero width"),t?(T.fF.assert(function(){return e[0]<0&&e[1]<0||e[0]>0&&e[1]>0},"Log scale domain should not cross or contain 0"),e[0]<0?"rLog":"log"):"linear"},r.log10=function(e){return Math.log(e)/Math.log(10)},r.wasInverted=function(e,t,a){return"x"===e&&a?.x!==t.x.invertAxis||"y1"===e&&a?.y!==t.y.invertAxis||"y2"===e&&a?.y2!==t.y2.invertAxis},r.getAxisZoomPropertyNames=function(e,t){return"y2"===e?{min:be.t.valueSecMin.propertyName,max:be.t.valueSecMax.propertyName,size:be.t.valueSecSize.propertyName}:"y1"===e&&t||"x"===e&&!t?{min:be.t.categoryMin.propertyName,max:be.t.categoryMax.propertyName,size:be.t.categorySize.propertyName}:{min:be.t.valueMin.propertyName,max:be.t.valueMax.propertyName,size:be.t.valueSize.propertyName}},r}(),et=(0,Z.CH)("zoom"),B=function(){function r(e,t,a,i){this.hostServices=t,this.isScrollable=a,this.featureSwitches=i,this._zoomData=(0,d.__assign)({},r.DefaultOptions),this.axesLabels={},this.zoomContext=d3.select(e.get(0)).append("div").attr("class","axisZoom").style("position","absolute"),this.zoomAxes={categoryAxis:void 0,valueAxis:void 0,valueSecAxis:void 0},this.zoomExtents={categoryExtent:void 0,valueExtent:void 0,valueSecExtent:void 0}}return r.prototype.destroy=function(){this.zoomContext.selectAll(et.selector).remove()},r.prototype.update=function(e){var t,a,i,n=e.dataViews,s=e.hasScalarCategoryAxis;if(this.hasSmallMultiples=e.hasSmallMultiples,this.hasYAxisCategorical=e.hasYAxisCategorical,this._zoomData=this.hasSmallMultiples||!this.isScrollable?(0,d.__assign)({},r.DefaultOptions):e.zoomData,s||(this._zoomData.showOnCategoryAxis=!1),this.hasValueAxis=!1,this.hasCategoryAxis=!1,this.hasY2Axis=!1,n){for(var o=0,l=n;o<l.length;o++){var u=l[o];this.hasCategoryAxis||(this.hasCategoryAxis=s&&((0,V.c5)(u,K.x.category)||(0,V.c5)(u,K.x.x))),this.hasValueAxis||(this.hasValueAxis=(0,V.c5)(u,K.x.y)),this.hasY2Axis||(this.hasY2Axis=(0,V.c5)(u,K.x.y2))}(t=this._zoomData).showOnValueAxis&&(t.showOnValueAxis=this.hasValueAxis),(a=this._zoomData).showOnValueSecAxis&&(a.showOnValueSecAxis=this.hasY2Axis),(i=this._zoomData).showOnCategoryAxis&&(i.showOnCategoryAxis=this.hasCategoryAxis)}},r.prototype.render=function(e){var t,i,n,s,a=this,o=(t=e.axesLayout).margin,l=t.shouldRenderAxis,u=e.axesData,c=(0,d.__assign)({},this.baseZoomAxesPosition);if(c.bottom){c.bottom.width-=o.left+o.right;var v=u?.showsSeriesLabels()?(0,ce.lr)(u.seriesLabelSettings,c.bottom.width):0;c.bottom.width-=v,c.bottom.left+=o.left+(u.seriesLabelSettings.position===Ie.M.left?v:0),!this.hasYAxisCategorical&&this.xOuterPadding&&(c.bottom.left+=this.xOuterPadding,c.bottom.width-=2*this.xOuterPadding)}c.left&&(c.left.top+=o.top,c.left.height-=o.top+o.bottom),c.right&&(c.right.top+=o.top,c.right.height-=o.top+o.bottom);var y=this.axesLabels,m=this.yFlipped,w=null===(i=this.zoomAxes.categoryAxis)||void 0===i?void 0:i.scale.domain(),C=null===(n=this.zoomAxes.valueAxis)||void 0===n?void 0:n.scale.domain(),D=null===(s=this.zoomAxes.valueSecAxis)||void 0===s?void 0:s.scale.domain(),F=!(l.x||l.y||l.y2)||w&&w[0]===w[1]||C&&C[0]===C[1]||D&&D[0]===D[1],N=this.featureSwitches&&this.featureSwitches.onObject,U=this;this.zoomContext.selectAll(et.selector).style("top",function(X){return c[X].top?"".concat(c[X].top,"px"):null}).style("left",function(X){return c[X].left?"".concat(c[X].left,"px"):null}).style("width",function(X){return"".concat(c[X].width,"px")}).style("height",function(X){return"".concat(c[X].height,"px")}).call(function(X){return Oe.createOrUpdateSliders({containers:X,axesData:u,zoomAxes:a.zoomAxes,zoomData:a.zoomData,zoomExtents:a.zoomExtents,hasYAxisCategorical:a.hasYAxisCategorical,yFlipped:a.yFlipped,maxLabelWidthLeft:a.maxZoomLabelWidthLeft,maxLabelWidthRight:a.maxZoomLabelWidthRight,resetEventHandlers:a.resetEventHandlers,hideSliders:F,visualHostServices:a.hostServices,invertedState:a.invertedState})}).each(function(X){var pe,re=d3.select(this);switch(X){case"bottom":pe="x";break;case"left":pe=m?"y2":"y";break;case"right":pe=m?"y":"y2";break;default:T.fF.assertFail(X)}var ee,q=u[pe].titleFontProperties,ue=[];if(u[pe].showAxisTitle&&!F){var ke=y[pe];T.fF.assertValue("axisZoom: axisLabel",ke),!ke&&e.showTitlePlaceholders&&N&&(ke=U.hostServices.getLocalizedString("Format_AddAxisTitle"),ee=!0),ue=[ke]}re.selectAll(".title").data(ue,function(Ke){return Ke}).join(function(Ke){return Ke.append("span").attr("class","title")}).each(function(Ke){var Yt,Re=d3.select(this),Je=(0,J.qk)(q,Ke),Ze=c[X].height,Lt=c[X].width,Xt=q.size.px;switch(X){case"bottom":Yt=Lt,Re.style("top","".concat(Ze-Xt,"px")).style("left","50%").style("width","100%").style("transform","translateX(-50%)");break;case"left":Yt=Ze,Re.style("width","".concat(Ze,"px")).style("transform","translateX(-".concat(Ze/2,"px)rotate(-90deg)")).style("top","".concat(Ze/2-r.SliderHandleRadius,"px"));break;case"right":Yt=Ze,Re.style("width","".concat(Ze,"px")).style("transform","translateX(-".concat(Ze/2-8,"px)rotate(-90deg)")).style("top","".concat(Ze/2-r.SliderHandleRadius,"px")).style("left","".concat(Lt-Xt,"px"));break;default:T.fF.assertNever(X)}if(Re.styles((0,J.wB)(q)).text(te.b.getTailoredTextOrDefault(Je,Yt)),N){Re.classed(We.cy,!0).attr(We.CK,"Visual_Axis_Title").attr(We.QZ,1);var wt=void 0;switch(pe){case"x":Re.attr(We.Ez,"x-axis-title"),wt=(0,ne.s4)(u.categoryAxis===u.x?K.p.categoryAxis.titleText:K.p.valueAxis.titleText,y.x);break;case"y":Re.attr(We.Ez,"y1-axis-title"),wt=(0,ne.Mw)(u.categoryAxis===u.y?K.p.categoryAxis.titleText:K.p.valueAxis.titleText,y.y);break;case"y2":Re.attr(We.Ez,"y2-axis-title"),wt=(0,ne.Mw)(K.p.valueAxis.secTitleText,y.y2);break;default:T.fF.assertFail(pe)}ee&&Re.classed(We.Qh.class,!0),wt&&Re.attr(We.kv,JSON.stringify(wt))}})}),this.invertedState={x:u.x.invertAxis,y:u.y.invertAxis,y2:u.y2.invertAxis}},r.prototype.renderContainers=function(e,t,a,i){var n,s=this;void 0===a&&(a=0),this.resetEventHandlers=void 0!==this.yFlipped&&t.y.switchAxisPosition!==this.yFlipped||void 0!==this.isLogScaleX&&t.x.logAxisScale!==this.isLogScaleX||void 0!==this.isLogScaleY1&&t.y.logAxisScale!==this.isLogScaleY1||void 0!==this.isLogScaleY2&&t.y2.logAxisScale!==this.isLogScaleY2,this.yFlipped=t.y.switchAxisPosition,this.isLogScaleX=t.x.logAxisScale,this.isLogScaleY1=t.y.logAxisScale,this.isLogScaleY2=t.y2.logAxisScale;var o={top:0,left:0,right:0,bottom:0},l=[];if(this.zoomData.show){var c=(n=this.zoomData).show,v=n.showOnCategoryAxis,y=n.showOnValueAxis,w=n.showLabels;if(c){var D=y&&!this.hasYAxisCategorical||v&&this.hasYAxisCategorical,O=n.showOnValueSecAxis;(v&&!this.hasYAxisCategorical||y&&this.hasYAxisCategorical)&&(o.bottom+=16,w&&(o.bottom+=t.x.labelFontProperties.size.px+r.StaticPadding),t.x.showAxisTitle&&(o.bottom+=t.x.titleFontProperties.size.px+r.StaticPadding),l.push("bottom")),(D&&!this.yFlipped||O&&this.yFlipped)&&(this.maxZoomLabelWidthLeft=this.getMaxYLabelWidth("left",this.yFlipped,t),o.left+=(w?16+this.maxZoomLabelWidthLeft+r.StaticPadding:16)+8,t.y.showAxisTitle&&!this.yFlipped?o.left+=t.y.titleFontProperties.size.px+r.StaticPadding:t.y2.showAxisTitle&&this.yFlipped&&(o.left+=t.y2.titleFontProperties.size.px+r.StaticPadding),l.push("left")),(O&&!this.yFlipped||D&&this.yFlipped)&&(this.maxZoomLabelWidthRight=this.getMaxYLabelWidth("right",this.yFlipped,t),o.right+=(w?16+this.maxZoomLabelWidthRight+r.StaticPadding:16)+8,t.y2.showAxisTitle&&!this.yFlipped?o.right+=t.y2.titleFontProperties.size.px+r.StaticPadding:t.y.showAxisTitle&&this.yFlipped&&(o.right+=t.y.titleFontProperties.size.px+r.StaticPadding),l.push("right"))}}this.baseZoomAxesPosition=this.calculateZoomAxesPositions(l,e,o,a);var N=this.zoomContext.selectAll(".zoom").data(l,function(re){return re});N.enter().append("div").attr("class",function(re){return"zoom zoom-".concat(re)}).attr("tabindex",0).attr("focus-nav-mode","Hierarchy").attr("role","group").attr("aria-label",this.hostServices.getLocalizedString("Slicer_Slider")).style("position","absolute");var U=N.exit();return this.resetEventHandlers||U.call(function(re){return Oe.destroySliders({containers:re,hasYAxisCategorical:s.hasYAxisCategorical,yFlipped:s.yFlipped,visualHostServices:s.hostServices})}),U.remove(),_.some(o,function(re){return 0!==re})?o:void 0},r.prototype.updateShowAxisTitles=function(e){var t,a=(t=this.zoomData).show,i=t.showOnCategoryAxis,n=t.showOnValueAxis;return a?{x:e.x&&!(this.hasYAxisCategorical?n:i),y:e.y&&!(this.hasYAxisCategorical?i:n),y2:e.y2&&!t.showOnValueSecAxis}:e},r.prototype.updateAxisTitles=function(e){this.zoomData.show&&(this.axesLabels=(0,d.__assign)((0,d.__assign)({},this.axesLabels),e))},r.prototype.getCategoryZoomFactor=function(){var e,t=null===(e=this.zoomAxes.categoryAxis)||void 0===e?void 0:e.scale.domain(),a=this.zoomExtents.categoryExtent;if(_.isEmpty(t)||_.isEmpty(a))return 1;var i=Math.abs(t[1]-t[0]),n=Math.abs(a[1]-a[0]);return 0===n?1:Math.max(1,i/n)},r.prototype.updateAxisOptions=function(e,t){var a,i,n;if(t.isScalar&&this.zoomData.show){var s=function(c,v){if(t.domainOptions){var y=t.domainOptions.domain,m=e.scale.domain();c=[Math.max(c[0],Math.min(y[0],m[0])),Math.min(c[1],Math.max(y[1],m[1]))]}c[0]=Math.min(c[0],c[1]),t.domainOptions=(0,P.createScalarDomainOptions)(c),t.preventNice||(t.preventNice=v),t.includeZero&&(t.includeZero=!v)};if(t.isCategoryAxis){if(this.zoomData.showOnCategoryAxis){this.zoomAxes.categoryAxis=e;var o=(a=r.getAxisRange(e,this.zoomData.categoryMin,this.zoomData.categoryMax,this.zoomData.categorySize)).domain,l=a.force;this.zoomExtents.categoryExtent=o,s(o,l),this.hasYAxisCategorical||(this.xOuterPadding=e.outerPadding)}}else t.isSecValueAxis?this.zoomData.showOnValueSecAxis&&(this.zoomAxes.valueSecAxis=e,o=(i=r.getAxisRange(e,this.zoomData.valueSecMin,this.zoomData.valueSecMax,this.zoomData.valueSecSize)).domain,l=i.force,this.zoomExtents.valueSecExtent=o,s(o,l)):this.zoomData.showOnValueAxis&&(this.zoomAxes.valueAxis=e,o=(n=r.getAxisRange(e,this.zoomData.valueMin,this.zoomData.valueMax,this.zoomData.valueSize)).domain,l=n.force,this.zoomExtents.valueExtent=o,s(o,l))}},r.prototype.skipMergingValueAxisDomains=function(){return this.zoomData.show&&(this.zoomData.showOnValueAxis||this.zoomData.showOnValueSecAxis)},r.getAxisRange=function(e,t,a,i){var n=e.scale.domain(),s=[void 0,void 0];return null!=i?(T.fF.assert(function(){return t!==a},"axisZoom: only one of min/max should be set if size is set"),null!=a?(T.fF.assert(function(){return null==t},"axisZoom: if size and max is set, min should not (zooming linked to min extent)"),s=[n[0],Math.min(n[0]+i,n[1])]):(T.fF.assert(function(){return null==a},"axisZoom: if size and min is set, max should not (zooming linked to max extent)"),s=[Math.max(n[1]-i,n[0]),n[1]])):(s[0]=null!=t&&t>=n[0]&&t<n[1]?t:n[0],s[1]=null!=a&&a>n[0]&&a<=n[1]?a:n[1]),{domain:s,force:!(null==i&&null==a&&null==t||s[0]===n[0]&&s[1]===n[1])}},Object.defineProperty(r.prototype,"zoomData",{get:function(){return this._zoomData},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"context",{get:function(){return this.zoomContext},enumerable:!1,configurable:!0}),r.converter=function(e){var t,a=null===(t=e?.metadata)||void 0===t?void 0:t.objects;return{show:(0,A.NA)(a,be.t.show,r.DefaultOptions.show),showOnValueAxis:(0,A.NA)(a,be.t.showOnValueAxis,r.DefaultOptions.showOnValueAxis),valueMin:this.clampValue((0,A.NA)(a,be.t.valueMin,null)),valueMax:this.clampValue((0,A.NA)(a,be.t.valueMax,null)),valueSize:this.clampValue((0,A.NA)(a,be.t.valueSize,null)),showOnCategoryAxis:(0,A.NA)(a,be.t.showOnCategoryAxis,r.DefaultOptions.showOnCategoryAxis),categoryMin:this.clampValue((0,A.NA)(a,be.t.categoryMin,null)),categoryMax:this.clampValue((0,A.NA)(a,be.t.categoryMax,null)),categorySize:this.clampValue((0,A.NA)(a,be.t.categorySize,null)),showOnValueSecAxis:(0,A.NA)(a,be.t.showOnValueSecAxis,r.DefaultOptions.showOnValueSecAxis),valueSecMin:this.clampValue((0,A.NA)(a,be.t.valueSecMin,null)),valueSecMax:this.clampValue((0,A.NA)(a,be.t.valueSecMax,null)),valueSecSize:this.clampValue((0,A.NA)(a,be.t.valueSecSize,null)),showLabels:(0,A.NA)(a,be.t.showLabels,r.DefaultOptions.showLabels),showTooltip:(0,A.NA)(a,be.t.showTooltip,r.DefaultOptions.showTooltip)}},r.clampValue=function(e){return isNaN(e)||"number"!=typeof e?null:e},r.prototype.getZoomCard=function(e){var t=this;if(!this.hasSmallMultiples&&e){var i=this.zoomData;return new ge.CQ(new ge.lg("zoom"),"Visual_ZoomSlider",[be.t.show,be.t.showOnCategoryAxis,be.t.showOnValueAxis,be.t.showOnValueSecAxis,be.t.showLabels,be.t.showTooltip],function(s){return t.hostServices.getLocalizedString(s)}).addTopLevelToggle("show",function(){return new ge.bd({descriptor:be.t.show,value:i.show}).build()}).addGroup(void 0,function(n){t.hasCategoryAxis&&n.addSimpleSlice("categoryAxis",new ge.bd({descriptor:be.t.showOnCategoryAxis,value:i.showOnCategoryAxis}).build(),function(s){return s.withCustomDisplayName(t.hasYAxisCategorical?"Visual_YAxis_Hyphen":"Visual_XAxis_Hyphen")}),t.hasValueAxis&&n.addSimpleSlice("valueAxis",new ge.bd({descriptor:be.t.showOnValueAxis,value:i.showOnValueAxis}).build(),function(s){return s.withCustomDisplayName(t.hasYAxisCategorical?"Visual_XAxis_Hyphen":"Visual_YAxis_Hyphen")}),t.hasY2Axis&&n.addSimpleSlice("valueSecAxis",new ge.bd({descriptor:be.t.showOnValueSecAxis,value:i.showOnValueSecAxis}).build(),function(s){return s.withCustomDisplayName("Visual_Y2Axis_Hyphen")}),n.addSimpleSlice("labels",new ge.bd({descriptor:be.t.showLabels,value:i.showLabels}).build()).addSimpleSlice("tooltips",new ge.bd({descriptor:be.t.showTooltip,value:i.showTooltip}).build())}).build()}},r.prototype.calculateZoomAxesPositions=function(e,t,a,i){void 0===i&&(i=0);for(var n={},s=t.height-a.bottom-i,o=t.width-a.right,l={height:s-a.top,width:o-a.left},u=r.SliderHandleRadius,c=0,v=e;c<v.length;c++){var y=v[c];switch(y){case"bottom":n.bottom={top:s,left:a.left-u,width:l.width+2*u,height:a.bottom};break;case"left":n.left={top:-u,left:null,width:a.left,height:l.height+2*u};break;case"right":n.right={top:-u,left:o,width:a.right,height:l.height+2*u};break;default:T.fF.assertNever(y)}}return n},r.prototype.getMaxYLabelWidth=function(e,t,a){if(!a)return 50;var i=this.getAxisType(e,t),s=a["y1"===i?"y":i].labelFontProperties,o={text:"1234567",fontFamily:s.family,fontSize:Ne.FP.toString(s.size.px),fontWeight:s.weight,fontStyle:s.style,fontVariant:s.variant,whiteSpace:s.whiteSpace};return te.b.measureSvgTextWidth(o)},r.prototype.getAxisType=function(e,t){var a;switch(e){case"bottom":a="x";break;case"left":a=t?"y2":"y1";break;case"right":a=t?"y1":"y2";break;default:T.fF.assertNever(e)}return a},r.DefaultOptions={show:!1,showOnValueAxis:!0,showOnValueSecAxis:!1,showOnCategoryAxis:!0,showLabels:!1,showTooltip:!1},r.StaticPadding=5,r.SliderHandleRadius=8,r}(),S=b(76045),g=b(56707),M=b(32105),h=b(41414),L=b(47316),E=b(41640),R=b(78843),z=b(26543),H=b(26743),ye=b(54522),Pe=b(39407),p=b(34969),f=b(82173),W=b(51490),G=b(21181),Ce=b(48708);function Me(r,e,t){return tt(function(a){return!a.supportsStaticReferenceLines||a.supportsStaticReferenceLines()},r,e,t)}function Ee(r,e,t){return tt(function(a){return a.supportsTrendLine&&a.supportsTrendLine()},r,e,t)}function Ye(r,e,t){return!tt(function(a){return!a.getCartesianVisualCapabilities().isValueAxisIrregular},r,e,t)}function tt(r,e,t,a){var i=dt(e);return!_.isEmpty(t)&&_.every(null==a?t:[t[a]],function(s,o){return!i[o]||r(s)})}function dt(r){return _.isEmpty(r)?[]:_.filter(r,function(e){return!(0,rt.Qp)(e)&&!(0,f.Aq)(e)&&!(0,W.Ik)(e)})}function Et(r,e,t){return r&&(0,p.PC)(e)?function(r){if(r.length>1){var e=r[0].getSeriesLabelsSettings(),t=r[1].getSeriesLabelsSettings();return e.maxWidthPercentage>t.maxWidthPercentage?e:t}return r[0].getSeriesLabelsSettings()}(r):yt(t)}function yt(r){var e=Ue.v.getThemeColor(r||(0,Ce.Ue)(),g.uQ);return{show:!1,seriesColor:e,position:Ie.M.right,fontProperties:(0,G.bT)({style:r,labelColor:e,textClassName:"smallLightLabel"}).fontProperties,wordWrap:!1,maxWidthPercentage:20,defaultSeriesWidth:20,showLabelPerSeries:!1,enableBackground:!1,bold:!1,italic:!1,underline:!1}}function Tt(r,e){if(r)return{categoryIndex:r.categoryIndex,categoryValue:r.categoryValue,hierarchyCategoryLevels:e,hasData:null!=r.value}}function ra(r,e){return r.map(function(t){return(0,Ge.BJ)(e.categoryData[t.categoryIndex].hierarchyCategoryLevels)})}var $t=function(){function r(e,t,a){this.scrollbarWidth=t,this.isScrollable=e,this.trimOrdinalDataOnOverflow=a}return r.prototype.init=function(e){this.axesData=e.axesData,this.axisZoom=e.axisZoom,this.interactivityService=e.interactivityService},r.prototype.shouldShowY1OnRight=function(){return!0===this.axesData.y.switchAxisPosition},Object.defineProperty(r.prototype,"isYAxisCategorical",{get:function(){return(0,p.Au)(this.axesData.chartType)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"categoryAxis",{get:function(){return this.getAxis(this.isYAxisCategorical?1:0)},enumerable:!1,configurable:!0}),r.prototype.hasCategoryAxis=function(){return null!=this.categoryAxis},r.prototype.isCategoryAxisDateTime=function(){var e,t,a;return null!==(a=null===(t=null===(e=this.categoryAxis)||void 0===e?void 0:e.valueType)||void 0===t?void 0:t.dateTime)&&void 0!==a&&a},r.getLeafHeight=function(e,t,a){var i=t===Y.Or.bottom?e.xMax:t===Y.Or.right?e.yRight:e.yLeft,n=e.stackHeight;return T.fF.assertValue(i,"getLeafHeight: availableSpace"),T.fF.assertValue(n,"getLeafHeight: stackHeight"),T.fF.assertValue(a,"getLeafHeight: numStacks"),i-n*(a-1)+P.StackedAxisPadding+1},r.prototype.getYAxisPosition=function(e){return T.fF.assert(function(){return 0!==e},"cannot ask y-axis specific position for x-axis"),1===e?this.getY1AxisPosition():this.getY2AxisPosition()},r.prototype.getY1AxisPosition=function(){return this.axesData.y.switchAxisPosition?"right":"left"},r.prototype.getY2AxisPosition=function(){return this.axesData.y.switchAxisPosition?"left":"right"},r.prototype.update=function(e,t,a,i){this.categories=e,this.axesData=t,this.updateScrollbarWidthIfNeeded(i),this.isHierarchicalCategoryAxis=3===a},r.prototype.updateResize=function(e,t){this.axesData=e,this.updateScrollbarWidthIfNeeded(t)},r.prototype.addWarnings=function(e){var t=this.layout&&this.layout.axes;if(t&&t.x&&t.x.hasDisallowedZeroInDomain){var a={selector:null,warnings:[new ze.MX]};e.addForVisualObject(this.isYAxisCategorical?"valueAxis":"categoryAxis",a)}if(t&&(t.y1&&t.y1.hasDisallowedZeroInDomain||t.y2&&t.y2.hasDisallowedZeroInDomain)&&(a={selector:null,warnings:[new ze.MX]},e.addForVisualObject(this.isYAxisCategorical?"categoryAxis":"valueAxis",a)),this.alignZerosWithCustomDomainWarning){var n={selector:null,warnings:[new ze.rO]};e.addForVisualObject("valueAxis",n)}},r.prototype.getScrollbarWidth=function(){return this.scrollbarWidth},r.prototype.updateScrollbarWidthIfNeeded=function(e){null!=e&&(this.scrollbarWidth=e)},r.prototype.calculateAxes=function(e,t,a,i,n,s){var o,l,u,c=e.options,v=e.isScalar,y=e.isScrollVisible,m=c.layers,w=c.playAxisControlLayout;T.fF.assertValue(m,"layers");var C=r.shouldRenderAnyAxis(s)||v?p.K8:0,D=this.axesData.categoryAxis.innerPadding,O={x:null,y1:null},F=(o=this.axesData).categoryAxis,N=o.valueAxis,X=_.some(o.y2.includeDomains,function(hi){return P.hasForcedDomain(hi)}),re=this.axesData.isValueAxisSet&&!1===this.axesData.y2.show&&!X,pe=function(ja){return ja&&P.createScalarDomainOptions([ja.min,ja.max],0)},q=function(ja,Bi){return{includeDomain:P.mergeScalarAxisDomains.apply(P,(0,d.__spreadArray)((0,d.__spreadArray)([],ja.includeDomains,!1),[pe(Bi)],!1)),axis:ja}},ee=q(F,c.ensureXDomain),ue=q(N,c.ensureYDomain),ke={viewport:t,margin:a,categoryAxisOptions:ee,forceMerge:re,trimOrdinalDataOnOverflow:this.trimOrdinalDataOnOverflow,outerPaddingRatio:C,innerPaddingRatio:D,playAxisControlLayout:w,valueAxisOptions:ue,axisZoom:this.axisZoom},Ke=this.axesData.isValueAxisSet&&this.axesData.y2.show,Re=this.axesData.isValueAxisSet&&this.axesData.y.alignZeros,Je=c.skipMergeValueAxes||!re&&(!0===Ke||X||void 0===Ke&&(Re||ue.includeDomain)),Ze=!1;if(oa(m)&&!Je){var Lt=function(r,e){T.fF.assert(function(){return r.length<3},"merging of more than 2 layers is not supported");var t=void 0,a=function(){return{domain:void 0,merged:!1,tickCount:t}};if(r.length<2)return a();var i=(0,xe.ED)(e);i.roleName="Y2";var n=r[0].calculateAxesProperties(e)[1],s=r[1].calculateAxesProperties(i)[1],o=n.scale.domain(),l=s.scale.domain();if(n.dataDomain&&s.dataDomain){var u=0===n.dataDomain[0]&&0===n.dataDomain[1],c=0===s.dataDomain[0]&&0===s.dataDomain[1];u&&!c?o=[0,0]:!u&&c&&(l=[0,0])}n.values&&n.values.length>0&&s.values&&s.values.length>0&&(t=Math.max(n.values.length,s.values.length));var v=Math.min(o[0],l[0]),y=Math.max(o[1],l[1]);if(e.forceMerge)return{domain:[v,y],merged:!0,tickCount:t};if(o[0]>l[1]||o[1]<l[0])return a();var m=y-v;if(0===m)return a();var w=Math.max(o[0],l[0]),C=Math.min(o[1],l[1]);return Math.abs((C-w)/m)<.1?a():{domain:[v,y],merged:!0,tickCount:t}}(m,ke);(Ze=Lt.merged)?ue.includeDomain=P.mergeScalarAxisDomains(ue.includeDomain,P.createScalarDomainOptions(Lt.domain,0,[!0,!0])):ke.forcedTickCount=Lt.tickCount}var Xt=oa(m)?!Ze&&!1!==Ke||Ke:this.axesData.y2.hasY2Role;Xt=Xt||X,Re=Re&&Xt;var Yt=(0,xe.ED)(ke);if(Xt){var wt=this.axesData.y2,Kt=Yt.valueAxisOptions=(0,d.__assign)((0,d.__assign)({},(0,xe.ED)(ue)),{axis:(0,d.__assign)((0,d.__assign)({},wt),{invertAxis:N.invertAxis}),includeDomain:P.mergeScalarAxisDomains.apply(P,(0,d.__spreadArray)((0,d.__spreadArray)([],wt.includeDomains,!1),[pe(c.ensureY2Domain)],!1))});if(Re){var da=m[0].getAxesDomains(!0,{valueAxis:!0}),ua=P.mergeScalarAxisDomains.apply(P,(0,d.__spreadArray)([P.createScalarDomainOptions(da.valueAxis,0)],N.includeDomains,!1)),Mt=m[1].getAxesDomains(!0,{valueAxis:!0}),ea=P.mergeScalarAxisDomains(P.createScalarDomainOptions(Mt.valueAxis,0),Kt.includeDomain),pa=ua&&ea,Ta=pa&&(P.hasForcedDomain(ua)||P.hasForcedDomain(ea));if(O.alignZerosWithCustomDomainWarning=Ta,pa&&!Ta){var Ha=(l=function(r,e,t){T.fF.assert(function(){return r&&2===r.length},"domain1 length"),T.fF.assert(function(){return e&&2===e.length},"domain2 length"),T.fF.assert(function(){return!0},"bufferMultiplier should be between 0 and 0.15");var a=r.slice(),i=e.slice(),n=r[1]-r[0],s=e[1]-e[0];if(a[0]=a[0]-n*t,a[1]=a[1]+n*t,i[0]=i[0]-s*t,i[1]=i[1]+s*t,r[0]>=0&&e[0]>=0)a[0]=0,i[0]=0;else if(r[1]<=0&&e[1]<=0)a[1]=0,i[1]=0;else{var o=Ea(a),l=Ea(i);if(o.pos<o.neg&&l.pos<l.neg)o.pos<l.pos?a[1]=-l.pos*a[0]/(1-l.pos):i[1]=-o.pos*i[0]/(1-o.pos);else if(o.pos>o.neg&&l.pos>l.neg)o.neg<l.neg?a[0]=-l.neg*a[1]/(1-l.neg):i[0]=-o.neg*i[1]/(1-o.neg);else{var u=Math.max(Math.abs(a[0]),Math.abs(a[1])),c=Math.max(Math.abs(i[0]),Math.abs(i[1]));a=[-u,u],i=[-c,c]}}return[a,i]}(ua.domain,ea.domain,.05),l[0]),xa=l[1];ue.includeDomain=P.createScalarDomainOptions(Ha,0,[!0,!0]),Kt.includeDomain=P.createScalarDomainOptions(xa,0,[!0,!0])}else Kt.includeDomain=P.mergeScalarAxisDomains(Kt.includeDomain,ea)}else Ze||(Kt.includeDomain=this.axesData.isValueAxisSet&&Kt.includeDomain)}for(var $a=[ke,Yt],li=oa(m)||this.axesData.y2.hasY2Role?2:1,Xa=0;Xa<li;Xa++){var La=$a[Xa],qa=null!==(u=m[Xa])&&void 0!==u?u:m[0];!Ze&&1===Xa&&(La.roleName="Y2"),T.fF.assertValue(La,"currentVisualOptions must be set");var ta=qa.calculateAxesProperties(La);0===Xa?(O.x=ta[0],O.y1=ta[1]):ta&&!O.y2&&(O.x.isInvalidDomain||_.isEmpty(O.x.dataDomain)?(O.x=ta[0],O.y1=ta[1]):(qa.overrideXAxis(O.x),!Ze&&!ta[1].isInvalidDomain&&!_.isEmpty(ta[1].values)&&(O.y2=ta[1])));var Ua=(0,J.qk)(c.axesFontProperties.x.tickLabels),ei=O.x;if(i&&i.x)ei.willLabelsFit=i.x.willLabelsFit,ei.willLabelsWordBreak=i.x.willLabelsWordBreak;else{var ui=t.width-(a.left+a.right);ei.willLabelsFit=P.willLabelsFit(ei,ui,te.b.measureSvgTextWidth,Ua),ei.willLabelsWordBreak=!ei.willLabelsFit&&!y&&P.willLabelsWordBreak(O.x,a,ui,te.b.measureSvgTextWidth,te.b.estimateSvgTextHeight,te.b.getTailoredTextOrDefault,Ua)}var Na=O.x.isCategoryAxis;if(this.isHierarchicalCategoryAxis&&(Na?this.axesData.x.show:this.axesData.y.show)){var Ga=Na?O.x:O.y1;Ga.isHierarchical=!0,Ga.rootNode=(0,Pe.J_)(this.categories),Ga.numHierarchyLevels=this.categories.length,n&&(Ga.hierStack=r.createStackedAxis(this.categories,Ga,n,Na?Y.Or.bottom:this.axesData.y.switchAxisPosition?Y.Or.right:Y.Or.left))}}return this.finalizeAxisLabels(O,c.showAxisTitles),O},r.createStackedAxis=function(e,t,a,i){if(T.fF.assertValue(t,"axis"),!_.isEmpty(e)){for(var n=e.length,s=a.stackHeight,o=r.getLeafHeight(a,i,n),l=[],u=P.getCategoryThickness(t.scale),c=[],v=function(w){var C=w===n-1,D=n-w-1,O=e[w];C||(T.fF.assertValue(O.source.identityExprs,"levelCategory.source.identityExprs"),c.push.apply(c,O.source.identityExprs||[]));for(var F=[],N=[],U=[],X=[],re=[],pe=0,q=void 0,ee=O.values.length,ue=function(Ze){var Lt=C?O.identity[Ze]:r.getSpecificIdentityFromCompositeIdentity(O,Ze,c),Yt=(0,ye.xq)(O.values[Ze],O.source,K.p.general.formatString);if(!C&&q&&(0,R.fS)(q,Lt))F[Ze]=Y.Pt,pe++;else{if(pe>0&&!C){var wt=Ze-pe;X[wt]=r.getMaxCategoryWidth(pe,u),re[wt]=r.getHierarchyLineStyleInfo({levelIndex:D,stackHeight:s,leafHeight:o,categorySpanCount:pe,categoryWidth:u,orientation:i})}pe=1,F[Ze]=Yt,N[Ze]=function(){return z.dw.builder().withCategoryIdentity(O,Ze,Lt).createSelectionId()},U[Ze]={categoryIndex:Ze,seriesIndex:w}}q=Lt},ke=0;ke<ee;ke++)ue(ke);if(pe>0&&!C){var Ke=ee-pe;X[Ke]=r.getMaxCategoryWidth(pe,u),re[Ke]=r.getHierarchyLineStyleInfo({levelIndex:D,stackHeight:s,leafHeight:o,categorySpanCount:pe,categoryWidth:u,orientation:i})}var Re=(0,xe.ED)(t);Re.isStacked=!0,Re.adjustedValues=F,t.categoryIdentities&&(Re.categoryIdentities=N,Re.categoryHierarchyPointers=U,T.fF.assert(function(){return N.length===U.length},"keep identities and pointers in sync")),Re.d3Axis=P.createStackedD3Axis({d3axis:Re.d3Axis,scale:Re.scale,tickFormat:function(Ze){return F[Ze]!==Y.Pt?F[Ze]:null}}),Re.categoryThickness=u,Re.levelIndex=D,Re.lineStyleInfo=re,Re.values=F,Re.categoryLabelMaxWidths=X,C||(Re.willLabelsFit=!0,Re.willLabelsWordBreak=!1),l.unshift(Re)},y=0;y<n;y++)v(y);return l}},r.shouldRenderAnyAxis=function(e){return e&&(e.x||e.y)},r.getSpecificIdentityFromCompositeIdentity=function(e,t,a){var i=e.identity;T.fF.assertNonEmpty(i,"columnIdentities");var n=i[t];T.fF.assertValue(n,"identity");var s=(0,H.J2)(n.expr,a);return(0,R.TZ)(s)},r.getCategorySpanSize=function(e,t){return e*t},r.getMaxCategoryWidth=function(e,t){return T.fF.assertValue(e,"categorySpanCount"),T.fF.assertAnyValue(t,"categoryWidth"),r.getCategorySpanSize(e,t)-2*p.Fv},r.getHierarchyLineStyleInfo=function(e){return T.fF.assertValue(e,"options"),T.fF.assertValue(e.levelIndex,"levelIndex"),T.fF.assertValue(e.stackHeight,"stackHeight"),T.fF.assertValue(e.leafHeight,"leafHeight"),T.fF.assertValue(e.categorySpanCount,"categorySpanCount"),T.fF.assertValue(e.categoryWidth,"categoryWidth"),e.orientation===Y.Or.bottom?r.createXHierarchyLineStyleInfo(e):r.createYHierarchyLineStyleInfo(e)},r.createXHierarchyLineStyleInfo=function(e){var t=e.levelIndex,a=e.stackHeight,i=e.leafHeight;if(0!==t){var o=r.getCategorySpanSize(e.categorySpanCount,e.categoryWidth);return(0,d.__spreadArray)([{x1:-o/2,y1:a,x2:-o/2,y2:1===t?-i:0},{x1:o/2,y1:a,x2:o/2,y2:1===t?-i:0}],t>1?[{x1:-o/2,y1:0,x2:o/2,y2:0}]:[],!0)}},r.createYHierarchyLineStyleInfo=function(e){var t=e.levelIndex,a=e.stackHeight,i=e.leafHeight;if(0!==t){var o=r.getCategorySpanSize(e.categorySpanCount,e.categoryWidth);return(0,d.__spreadArray)([{x1:-a,x2:1===t?i:0,y1:-o/2,y2:-o/2},{x1:-a,x2:1===t?i:0,y1:o/2,y2:o/2}],t>1?[{x1:0,x2:0,y1:-o/2,y2:o/2}]:[],!0).map(function(l){return e.orientation===Y.Or.right&&(l.x1=-l.x1-a,l.x2=-l.x2-a),l})}},r.prototype.negotiateAxes=function(e){var t,a,i,U,n=e.layers,s=e.padding,o=e.showAxisTitles,l=(0,xe.ED)(r.MinimumMargin),u={left:0,top:0,bottom:0,right:0},c={left:0,top:0,bottom:0,right:0},v=this.axesData,y=(null===(t=v?.categoryAxis)||void 0===t?void 0:t.maxMarginFactor)||r.DefaultMaxMarginFactor,m=(0,xe.ED)(e.parentViewport),w=m.width*y,D={left:w,right:w,top:0,bottom:Math.max(r.MinimumMargin.bottom,Math.ceil(m.height*y))},O=null===(i=null===(a=n?.[0])||void 0===a?void 0:a.getVisualCategoryAxisIsScalar)||void 0===i?void 0:i.call(a),F=this.calculateAxesRenderOptions({options:e,viewport:m,axesMargins:l,scrollHandleMargins:u,axesOverflow:c,isScalar:O,marginLimits:D,isScrollVisible:!1}),N=this.getAxesMarginFactors(F.axes);l=(F=this.calculateAxesRenderOptions({options:e,viewport:m,axesMargins:l,scrollHandleMargins:u,axesOverflow:c,isScalar:O,marginLimits:D,isScrollVisible:!1,axesRenderOptions:F})).axesMargins,e.rotateXTickLabels90=e.rotateXTickLabels90||!this.willAllCategoriesFitInPlotArea(F.plotArea,F.preferredPlotArea),this.shouldRecalculateRenderOptions(N,F.axes,e.rotateXTickLabels90)&&(l=(F=this.calculateAxesRenderOptions({options:e,viewport:m,axesMargins:l,axesOverflow:c,scrollHandleMargins:u,isScalar:O,marginLimits:D,isScrollVisible:e.rotateXTickLabels90,skipWordBreakUpdate:!0,axesRenderOptions:F})).axesMargins,!this.willAllCategoriesFitInPlotArea(F.plotArea,F.preferredPlotArea)&&(U=this.updateScrollMargins(F.axes,m,u),l=(F=this.calculateAxesRenderOptions({options:e,viewport:m,axesMargins:l,scrollHandleMargins:u,axesOverflow:c,isScalar:O,marginLimits:D,isScrollVisible:!0,skipWordBreakUpdate:!0,axesRenderOptions:F,skipTickMarginsUpdate:!0,isXScrollBarVisible:U.isXVisible,isYScrollBarVisible:U.isYVisible})).axesMargins));var re=F.axes;return this.layout={axes:re,axisLabels:{x:o.x&&re.x?re.x.axisLabel:null,y:o.y&&re.y1?re.y1.axisLabel:null,y2:o.y2&&re.y2?re.y2.axisLabel:null},margin:l,marginLimits:D,viewport:m,plotArea:F.plotArea,preferredPlotArea:F.preferredPlotArea,tickLabelMargins:F.tickLabelMargins,tickPadding:s,titleMargins:F.titleMargins,rotateXTickLabels90:e.rotateXTickLabels90,shouldRenderAxis:F.shouldRenderAxis,isXScrollBarVisible:U&&U.isXVisible,isYScrollBarVisible:U&&U.isYVisible,scrollHandleMargins:u},this.alignZerosWithCustomDomainWarning=re.alignZerosWithCustomDomainWarning,this.layout},r.prototype.updateScrollMargins=function(e,t,a){var i,n,s=!1,o=!1;return e.x.isCategoryAxis&&(s=!0,t.height-=this.scrollbarWidth,a.bottom=this.scrollbarWidth),e.y1.isCategoryAxis&&(o=!0,t.width-=this.scrollbarWidth,(null===(n=null===(i=this.axesData)||void 0===i?void 0:i.y)||void 0===n?void 0:n.switchAxisPosition)?a.right=this.scrollbarWidth:a.left=this.scrollbarWidth),{isXVisible:s,isYVisible:o}},r.prototype.shouldRecalculateRenderOptions=function(e,t,a){var i=this.getAxesMarginFactors(t);return!!(t.y1&&i.tickCountY1!==e.tickCountY1||t.y2&&i.tickCountY2!==e.tickCountY2||t.x&&i.willFitX!==e.willFitX||t.x&&i.willBreakX!==e.willBreakX||t.x&&i.xLabelMaxWidth!==e.xLabelMaxWidth||a||this.isHierarchicalCategoryAxis||t.x&&i.categoryThickness!==e.categoryThickness)},r.prototype.getAxesMarginFactors=function(e){return{tickCountY1:e.y1&&e.y1.values.length,tickCountY2:e.y2&&e.y2.values.length,willFitX:e.x&&e.x.willLabelsFit,willBreakX:e.x&&e.x.willLabelsWordBreak,xLabelMaxWidth:e.x&&e.x.xLabelMaxWidth,categoryThickness:e.x&&e.x.categoryThickness}},r.prototype.calculateAxesRenderOptions=function(e){var t,a,i,n,s,F,o=e.options,l=e.viewport,u=e.scrollHandleMargins,c=e.isScalar,v=e.marginLimits,y=e.axesRenderOptions,m=e.skipTickMarginsUpdate,w=e.axesMargins,C=e.axesOverflow,D=null!==(a=y?.shouldRenderAxis)&&void 0!==a?a:o.shouldRenderAxis,O=y?.axes,N={top:0,bottom:0,left:0,right:0};if(y){var U=this.shouldShowY1OnRight();F=m?y.tickLabelMargins:P.getTickLabelMargins({plotArea:y.plotArea,yMarginLimit:v.left,textWidthMeasurer:te.b.measureSvgTextWidth,textHeightMeasurer:te.b.estimateSvgTextHeight,axes:y.axes,bottomMarginLimit:v.bottom,axesFontProperties:o.axesFontProperties,rotate90:o.rotateXTickLabels90,showY1OnRight:U,shouldRenderAxis:y.shouldRenderAxis}),w=(t=this.updateAxisMargins(e,F,U)).axesMargins,N=t.titleMargins,C=F.axesOverflow}var X=o.calculatePlotArea({viewport:l,axesMargins:w,axesOverflow:C,titleMargins:N,shouldRenderAxis:D,axes:O,scrollHandleMargins:u,seriesLabelSettings:Et(o.layers,this.axesData.chartType),showSeriesLabels:this.axesData.showsSeriesLabels()});return O=this.calculateAxes(e,this.calculateLayerViewport(X,w),w,e.skipWordBreakUpdate?O:null,F,D),{plotArea:X,preferredPlotArea:this.getPreferredPlotArea(O,o.layers,c),axes:O,axesMargins:w,titleMargins:N,shouldRenderAxis:{x:D.x&&!_.isEmpty(null===(i=O.x)||void 0===i?void 0:i.values),y:D.y&&!_.isEmpty(null===(n=O.y1)||void 0===n?void 0:n.values),y2:D.y2&&!_.isEmpty(null===(s=O.y2)||void 0===s?void 0:s.values)},tickLabelMargins:F}},r.prototype.getPreferredPlotArea=function(e,t,a){if(!a&&this.isScrollable&&!_.isEmpty(t)&&t[0].getPreferredPlotArea){var i=e.x.isCategoryAxis?e.x:e.y1;return t[0].getPreferredPlotArea({isScalar:a,categoryCount:i.dataDomain.length,categoryThickness:i.categoryThickness,outerPaddingRatio:i.outerPaddingRatio})}},r.prototype.calculateLayerViewport=function(e,t){return{width:e.width+t.left+t.right,height:e.height+t.top+t.bottom,scale:e.scale}},r.prototype.willAllCategoriesFitInPlotArea=function(e,t){return!(!this.isYAxisCategorical&&t&&(0,E.aP)(t.width,e.width)||this.isYAxisCategorical&&t&&(0,E.aP)(t.height,e.height))},r.prototype.updateAxisMargins=function(e,t,a){var i,n,s,o=e.isScalar,l=(i=e.axesRenderOptions).axes,u=i.shouldRenderAxis,c=(n=e.options).padding,v=n.showAxisTitles,y=n.axesFontProperties,m=n.forceMarginMin,w=n.interactivityRightMargin,C={top:0,bottom:0,left:0,right:0},D=a?t.yRight:t.yLeft,O=a?t.yLeft:t.yRight,F=t.xMax;if(u.y&&(D+=a?c.right:c.left),u.y2&&(O+=a?c.left:c.right),u.x&&(F+=c.bottom),null!=l.x.axisLabel&&v.x){var N=te.b.estimateSvgTextHeight((0,J.qk)(y.x.title));C.bottom=N+r.XAxisLabelPadding+r.XAxisPaddingDeltaForTitle,F+=C.bottom}if(null!=l.y1.axisLabel&&v.y){var U=(N=te.b.estimateSvgTextHeight((0,J.qk)(y.y.title)))+r.YAxisLabelPadding;a?C.right=U:C.left=U,D+=U}if(null!=(null===(s=l.y2)||void 0===s?void 0:s.axisLabel)&&v.y2){var X=(N=te.b.estimateSvgTextHeight((0,J.qk)(y.y2.title)))+r.YAxisLabelPadding;a?C.left=X:C.right=X,O+=X}var re=(a?D:O)+(o?0:w);re=e.isYScrollBarVisible?Math.max(re,r.MinimumAxisMarginFromScrollbar):re;var pe=F;pe=e.isXScrollBarVisible?Math.max(pe,r.MinimumAxisMarginFromScrollbar):pe,t.axesOverflow.top=Math.max(t.yTop,r.MinimumMargin.top);var q={top:t.axesOverflow.top,left:a?O:D,right:re,bottom:pe};return m&&(q={top:Math.max(q.top,m.top),bottom:Math.max(q.bottom,m.bottom),left:Math.max(q.left,m.left),right:Math.max(q.right,m.right)}),{axesMargins:q,titleMargins:C}},r.prototype.getAxis=function(e){var t,a,i,n,s,o;switch(e){case 0:return null===(a=null===(t=this.layout)||void 0===t?void 0:t.axes)||void 0===a?void 0:a.x;case 1:return null===(n=null===(i=this.layout)||void 0===i?void 0:i.axes)||void 0===n?void 0:n.y1;case 2:return null===(o=null===(s=this.layout)||void 0===s?void 0:s.axes)||void 0===o?void 0:o.y2;default:T.fF.assertNever(e)}},r.prototype.isLogScaleAllowed=function(e){var t,a;return null!==(a=null===(t=this.getAxis(e))||void 0===t?void 0:t.isLogScaleAllowed)&&void 0!==a&&a},r.prototype.axesHaveTicks=function(e){if(!this.layout)return!1;var t=this.layout.margin,i=e.height-(t.top+t.bottom);return!(0===P.getRecommendedNumberOfTicksForXAxis(e.width-(t.left+t.right))&&0===P.getRecommendedNumberOfTicksForYAxis(i))},r.prototype.finalizeAxisLabels=function(e,t){var a,i,n,s;if(this.axesData.x.showAxisTitle||this.axesData.y.showAxisTitle||this.axesData.y2.showAxisTitle){var o={x:e.x?null!==(a=this.axesData.x.titleText)&&void 0!==a?a:e.x.axisLabel:void 0,y:e.y1?null!==(i=this.axesData.y.titleText)&&void 0!==i?i:e.y1.axisLabel:void 0,y2:e.y2?null!==(n=this.axesData.y2.titleText)&&void 0!==n?n:e.y2.axisLabel:void 0},l=r.getUnitType(e.x.formatter);e.x.isCategoryAxis?this.categoryAxisHasUnitType=null!=l:this.valueAxisHasUnitType=null!=l,o.x&&l&&(o.x=(0,h.O1)(this.axesData.x.axisStyle,o.x,l));var u=r.getUnitType(e.y1.formatter);if(e.y1.isCategoryAxis?this.categoryAxisHasUnitType=null!=u:this.valueAxisHasUnitType=null!=u,o.y&&u&&(o.y=(0,h.O1)(this.axesData.y.axisStyle,o.y,u)),e.y2){var c=r.getUnitType(e.y2.formatter);this.secondaryValueAxisHasUnitType=null!=c,o.y2&&c&&(o.y2=(0,h.O1)(this.axesData.y2.axisStyle,o.y2,c))}null===(s=this.axisZoom)||void 0===s||s.updateAxisTitles(o),e.x&&(e.x.axisLabel=t.x?o.x:null),e.y1&&(e.y1.axisLabel=t.y?o.y:null),e.y2&&(e.y2.axisLabel=t.y2?o.y2:null)}},r.getUnitType=function(e){var t;if((null===(t=e?.displayUnit)||void 0===t?void 0:t.value)>1)return e.displayUnit.title},r.YAxisLabelPadding=5,r.XAxisLabelPadding=3,r.XAxisPaddingDeltaForTitle=-6,r.DefaultMaxMarginFactor=.25,r.MinimumMargin={left:1,right:1,top:8,bottom:25},r.MinimumAxisMarginFromScrollbar=5,r}();function oa(r){return T.fF.assertValue(r,"layers"),r.length>1}function Ea(r){return T.fF.assert(function(){return 2===r.length},"domain length must be 2"),T.fF.assert(function(){return r[1]-r[0]!=0},"div by zero warning"),{pos:(r[1]-0)/(r[1]-r[0]),neg:(0-r[0])/(r[1]-r[0])}}var Bt=b(46769),ia=b(34021),Ca=b(11305),Ma=b(61193),ca=b(51129),de=b(45034),je=b(59694),Be=b(32379),ht=b(94419),x=b(79811),k=b(80777),I=b(72489),Ve="Waterfall_TotalLabel",we="Waterfall_OtherLabel",it=function(){function r(){}return r.convert=function(e){var t=e.dataView;if(t){if(t.categorical)return function(r){var e,t,a,i,X,pe,n=r.dataView,s=r.hostServices,o=r.dataLabelSettings,l=r.sentimentColors,u=r.interactivityService,c=r.tooltipsEnabled,v=K.p.general.formatString,y=(0,ca.G)(n,{formatStringProp:v}),m=y.data,w=(0,A.NA)(y.objects.getStaticObjects(),K.p.valueAxis.totalsEnabled,true),C=n.categorical.categories||[],D=s.getLocalizedString(Ve),O={current:0,min:0,max:0,formatString:void 0},F=[],N=[],U=[],re=[];if(m.hasValues("Tooltips")&&(pe=y.columns.getAllValueMetadataColumnsForRole("Tooltips",void 0)),m.hasValues("Y")){var q=(re=[y.columns.getValueMetadataColumn("Y")])[0].format;if(_.isEmpty(C)){var ee=m.getValue("Y",0),ue=m.getFormatString("Y",0);O={current:ee,max:ee,min:0,formatString:ue}}else{var ke=C[0];X=ke.source,(N=ke.values.slice()).push(D);for(var Ke=null!==(e=n.categorical.originalCategories)&&void 0!==e?e:[ke],Re=o.fontProperties.color,Je=function(wt,Kt){var da=N[wt],ua=m.getValue("Y",wt)||0,Mt=m.getFormatString("Y",wt);void 0!==Mt&&void 0===q&&(q=Mt);var ea=z.dw.builder().withCategory(Ke,wt,null===(t=ke?.source)||void 0===t?void 0:t.queryName,!0).withMeasure(re[0].queryName,y.columns.getValueColumn("Y"),wt).createSelectionId(),pa=void 0;if(c){pa=bt(X?[X]:null,re[0],[da],ua,Mt,v);var Ta=m.getAllValuesForRole("Tooltips",wt),Ha=m.getAllFormatStringsForRole("Tooltips",wt);Ta&&pe&&Ft(Ta,Ha,pa,pe,v,s)}var xa=(0,Bt.t$)({defaultColor:Re,categoricalDataReader:y,categoryIndex:wt}),$a=(0,Bt.B8)(xa)?xa.color:Re;o.fontProperties=(0,Bt.Vv)($a,o.fontProperties),F.push(_t(ua,O.current,l,da,wt,ea,pa,xa.color,Mt||q,0)),U[wt]=function(){return(0,p.MH)(wt,ke)},O=Wt(O,ua)},Ze=0,Lt=m.getCategoryCount();Ze<Lt;Ze++)Je(Ze)}var Xt=void 0;c&&(Xt=bt(X?[X]:null,re[0],[D],O.current,q,v)),w&&F.push(_t(O.current,0,l,D,m.getCategoryCount(),z.l0.createNull(),Xt,o.fontProperties.color,q,1,{text:!0}))}return u&&u.applySelectionStateToData(F),{series:[{data:F,type:null===(a=re?.[0])||void 0===a?void 0:a.type,measureDisplayName:null===(i=re?.[0])||void 0===i?void 0:i.displayName}],categories:N,categoryIdentities:U,categoryMetadata:X,preferredCategoryWidth:(0,p.$K)((0,p.Vk)(n.metadata,void 0)),valuesMetadata:re,legendData:zt(l,s,y.objects.getStaticObjects(),r.style,!1,w),hasHighlights:!1,positionMin:O.min,positionMax:O.max,dataLabelsSettings:o,sentimentColors:l,strokeSettings:(0,ia.kG)(r.style),totalsEnabled:w}}(e);if(t.matrix)return function(r){var e,t,a,i,n=r.dataView,s=r.hostServices,o=r.dataLabelSettings,l=r.sentimentColors,u=r.interactivityService,c=r.tooltipsEnabled,v=r.numberOfBreakdowns,y=n.matrix,m=!_.isEmpty(y.columns.levels)&&y.columns.levels[0].sources[0];T.fF.assert(function(){return!!m},"breakdown role should be defined when using matrix converter");var w=!_.isEmpty(y.rows.levels)&&y.rows.levels[0].sources,C=_.findIndex(y.valueSources,function(ma){return(0,V.nu)(ma,"Y")}),D=y.valueSources[C],O=_.filter(y.valueSources,function(ma){return(0,V.nu)(ma,"Tooltips")}),F=[],N=[],U={current:0,min:0,max:0},X=0,re=null===(t=n?.metadata)||void 0===t?void 0:t.objects;if(m&&w&&D){T.fF.assert(function(){return(0,V.nu)(m,"Breakdown")},"matrix column should have breakdown role"),T.fF.assert(function(){return _.every(w,function(ma){return(0,V.nu)(ma,"Category")})},"matrix row should have category role");var pe=new jt(m,w,D),q=D.format,ee=s.getLocalizedString(we),ue=K.p.general.formatString,ke=y.rows.root.children,Ke=y.columns.root.children;if(!_.isEmpty(ke)&&!_.isEmpty(Ke)){var Re=ke.length,Je=Ke.length,Ze=0,Lt=void 0,Xt=void 0,Yt=_.size(O)+1;Re>0&&(X=_.size(ke[0].values)/Yt-1),v=Math.min(v,X);for(var wt=0;wt<Re;wt++){for(var Kt=void 0,da=ke[wt],ua=wt>0?ke[wt-1]:void 0,Mt=_.map(da.levelValues,function(ma){return ma.value}),ea=_.map(Mt,function(ma,Oa){return(0,ye.xq)(ma,w[Oa],ue)}).join(" "),pa=pe.splitIdentity(da.identity.expr),Ta=[],Ha=_.size(da.values),xa=0;xa<Ha;xa+=Yt){for(var $a=void 0,li=void 0,Xa=void 0,La=void 0,qa=[],ta=[],Ua=0;Ua<Yt;Ua++)if(Ua===C){var ei=da.values[xa+Ua];$a=(0,Y.eT)(ei.value),Xa=(0,A.NA)(ei.objects,ue),La=(0,S.y)(null===(a=ei.objects)||void 0===a?void 0:a.labels,"color"),Kt||(Kt=Xa),li=ua&&(0,Y.eT)(ua.values[xa+Ua].value)}else qa.push(da.values[xa+Ua].value),ta.push(ua&&ua.values[xa+Ua].value);Ta.push({key:xa,currentValue:$a,previousValue:li,difference:($a||0)-(li||0),column:Ke[xa/Yt],currentTooltipValues:qa,previousTooltipValues:ta,formatString:Xa,labelColor:La??void 0})}Ta=_.sortBy(Ta,function(ma){return-1*Math.abs(ma.difference)});var Na=_.chain(Ta).filter(function(ma){return!ma.column.isSubtotal}).take(v).sortBy(function(ma){return-1*ma.difference}).value(),Ga=_.find(Ta,function(ma){return ma.column.isSubtotal}),hi=Ga.currentValue,ja=Ga.previousValue;if(ua){var Bi=_.sumBy(Na,function(ma){return ma.currentValue}),hr=_.sumBy(Na,function(ma){return ma.previousValue}),ri=_.chain(Na).map(function(ma){return pe.splitIdentity(ma.column.identity.expr)}).flatten().value(),Ii=Je>v+1,_i=0,qt=void 0,Si=void 0;if(Ii){var xi=hi-Bi,Ya=ja-hr;if(_i=xi-Ya,qt=pe.createBreakdownOtherIdentity(ri,pa,Xt),c){Si=pe.createBreakdownTooltip(ea,Lt,ee,xi,Ya,_i,ue,s);for(var bi=[],Li=[],vr=function(Oa){var vi=Ga.currentTooltipValues[Oa],ba=Ga.previousTooltipValues[Oa];if(_.isNumber(vi)&&_.isNumber(ba)){var Ci=vi-_.sumBy(Na,function(Pi){return Pi.currentTooltipValues[Oa]}),ai=ba-_.sumBy(Na,function(Pi){return Pi.previousTooltipValues[Oa]});bi.push(Ci-ai),Li.push(ai)}},ni=0;ni<Ga.currentTooltipValues.length;ni++)vr(ni);Ft(bi,void 0,Si,O,ue,s,Li,ea,Lt)}}for(var De=!1,gt=function(Oa){Ii&&_i>Oa.difference&&!De&&(De=!0,F.push(_t(_i,U.current,l,ee,Ze++,qt,Si,o.fontProperties.color,q||Kt,3,{text:!0})),N.push(ee),U=Wt(U,_i));var vi=(0,ye.xq)(Oa.column.value,m,ue),ba=pe.splitIdentity(Oa.column.identity.expr);T.fF.assertValue(ba,"breakdown identity must be a compare expr");var Ci=pe.createBreakdownIdentity(pa,Xt,ba),ai=void 0;c&&(ai=pe.createBreakdownTooltip(ea,Lt,vi,Oa.currentValue,Oa.previousValue,Oa.difference,ue,s),Ft(_.map(Oa.currentTooltipValues,function(ar,Ba){return _.isNumber(ar)?ar-Oa.previousTooltipValues[Ba]:ar}),void 0,ai,O,ue,s,Oa.previousTooltipValues,ea,Lt)),F.push(_t(Oa.difference,U.current,l,vi,Ze++,Ci,ai,null!==(i=Oa.labelColor)&&void 0!==i?i:o.fontProperties.color,Oa.formatString||q,0,{text:!0})),N.push(vi),U=Wt(U,Oa.difference)},Sa=0,ti=Na;Sa<ti.length;Sa++)gt(ti[Sa]);Ii&&!De&&(De=!0,F.push(_t(_i,U.current,l,ee,Ze++,qt,Si,o.fontProperties.color,q||Kt,3,{text:!0})),N.push(ee),U=Wt(U,_i))}var Zt={dataMap:(e={},e[w[0].queryName]=[da.identity],e),metadata:[D.queryName]},Ki=void 0;c&&(Ki=bt(w,D,Mt,hi,void 0,ue),Ft(Ga.currentTooltipValues,void 0,Ki,O,ue,s)),F.push(_t(hi,0,l,ea,Ze++,new z.l0((0,Be.tV)(Zt),!1,Zt),Ki,o.fontProperties.color,q||Kt,2,{text:!0})),N.push(ea),0===wt&&(U={current:hi,max:hi,min:hi}),Lt=ea,Xt=pa}}}return u&&u.applySelectionStateToData(F),{series:[{data:F,type:D?.type,measureDisplayName:D?.displayName}],categories:N,categoryIdentities:_.map(F,function(ma){return function(){return ma.identity}}),categoryMetadata:w[0],preferredCategoryWidth:(0,p.$K)((0,p.Vk)(n.metadata,void 0)),valuesMetadata:y.valueSources,legendData:zt(l,s,re,r.style,!0,!0),hasHighlights:!1,positionMin:U.min,positionMax:U.max,dataLabelsSettings:o,sentimentColors:l,isBreakdown:!0,numberOfBreakdowns:v,totalBreakdownCategories:X,strokeSettings:(0,ia.kG)(r.style),totalsEnabled:!0}}(e)}},r}();function zt(r,e,t,a,i,n){var s=function(u,c,v,y){return{label:e.getLocalizedString(c),marker:{show:!0,color:u,shape:Ma.ZO.circle},identity:z.dw.builder().withMeasure(v).createSelectionId(),selected:!1,index:y}},o=(0,d.__spreadArray)((0,d.__spreadArray)([s(r.increaseFill.solid.color,"Increase","increase",0),s(r.decreaseFill.solid.color,"Decrease","decrease",1)],i?[s(r.otherFill.solid.color,we,"other",3)]:[],!0),n?[s(r.totalFill.solid.color,Ve,"total",2)]:[],!0);return(0,x.RS)(t,o,!0,"",!1,a)}function bt(r,e,t,a,i,n){var s=new Ca.E4;return _.isEmpty(r)||s.withLazyValue(new de.o(function(){return{displayName:_.map(r,function(o){return o.displayName}).join(" "),value:_.map(t,function(o,l){return(0,ye.xq)(o,r[l],n)}).join(" ")}})),null!=a&&e&&s.withLazyValue(new de.o(function(){return{displayName:e.displayName,value:(0,ye.xq)(a,e,n,!1,i)}})),s}function _t(r,e,t,a,i,n,s,o,l,u,c){var v,y;return 1===u||2===u?(v=t.totalFill,y=2):3===u?(v=t.otherFill,y=3):r>0?(v=t.increaseFill,y=0):(v=t.decreaseFill,y=1),{value:r,position:e,color:v.solid.color,sentimentColorType:y,categoryValue:a,categoryIndex:i,identity:n,seriesIndex:0,selected:!1,highlight:!1,key:n.getKey(),tooltipInfo:s&&function(){return s.getTooltipItems()},labelFill:o,labelFormatString:l,type:k.Ge.fromDescriptor(c),barType:u}}function Wt(r,e){var t=r.current+e;return{current:t,min:Math.min(r.min,t),max:Math.max(r.max,t)}}function Ft(r,e,t,a,i,n,s,o,l){if(!_.isEmpty(r)&&!_.isEmpty(a))for(var u=function(y){if(null!=r[y]&&a[y]){var m=a[y].displayName,w=(0,ye.xq)(r[y],a[y],i,!1,e?.[y]);if(_.isEmpty(s))t.withLazyValue(new de.o(function(){return{displayName:m,value:w}}));else{var C=r[y],D=s[y];if(_.isNumber(C)&&_.isNumber(D))m=(0,je.W)(n.getLocalizedString("Waterfall_BreakdownDifferenceTooltip"),m),w=mt(w,C,D),t.withLazyValue(new de.o(function(){return{displayName:m,value:w}}));else{if(null!=D){var O=(0,ye.xq)(D,a[y],i,!1);t.withLazyValue(new de.o(function(){return{displayName:"".concat(l," ").concat(m),value:O}}))}null!=C&&t.withLazyValue(new de.o(function(){return{displayName:"".concat(o," ").concat(m),value:w}}))}}}},c=0;c<r.length;c++)u(c)}function mt(r,e,t){if(!t)return r;var a=e/Math.abs(t),i=(0,I.Z)("Percentage"),n=(0,I.WU)(a,i);return"".concat(r," (").concat(n,")")}var jt=function(){function r(e,t,a){this.breakdownMetadata=e,this.categoryMetadata=t,this.valueMetadata=a}return r.prototype.splitIdentity=function(e){return(0,H.Dh)(e)},r.prototype.createBreakdownIdentity=function(e,t,a){var i,n={dataMap:(i={},i[this.breakdownMetadata.queryName]=[(0,R.TZ)((0,ht.Sh)((0,d.__spreadArray)((0,d.__spreadArray)([],_.map(e,function(o){return o.left}),!0),_.map(a,function(o){return o.left}),!0),[(0,d.__spreadArray)((0,d.__spreadArray)([],_.map(t,function(o){return o.right}),!0),_.map(a,function(o){return o.right}),!0),(0,d.__spreadArray)((0,d.__spreadArray)([],_.map(e,function(o){return o.right}),!0),_.map(a,function(o){return o.right}),!0)]))],i),metadata:[this.valueMetadata.queryName]},s=(0,Be.tV)(n);return new z.l0(s,!1,n)},r.prototype.createBreakdownOtherIdentity=function(e,t,a){var i,n={dataMap:(i={},i[this.breakdownMetadata.queryName]=[(0,R.TZ)((0,ht.ff)((0,ht.Sh)([this.breakdownMetadata.expr],_.map(e,function(o){return[o.right]}))))],i),metadata:[this.valueMetadata.queryName]};n.dataMap[this.categoryMetadata[0].queryName]=[(0,R.TZ)((0,ht.Sh)(_.map(t,function(o){return o.left}),[_.map(a,function(o){return o.right}),_.map(t,function(o){return o.right})]))];var s=(0,Be.tV)(n);return new z.l0(s,!1,n)},r.prototype.createBreakdownTooltip=function(e,t,a,i,n,s,o,l){var u=this,c=new Ca.E4;if(this.breakdownMetadata&&c.withLazyValue(new de.o(function(){return{displayName:u.breakdownMetadata.displayName,value:(0,ye.xq)(a,u.breakdownMetadata,o)}})),this.valueMetadata&&(null!=n&&c.withLazyValue(new de.o(function(){return{displayName:"".concat(t," ").concat(u.valueMetadata.displayName),value:(0,ye.xq)(n,u.valueMetadata,o,!1)}})),null!=i&&c.withLazyValue(new de.o(function(){return{displayName:"".concat(e," ").concat(u.valueMetadata.displayName),value:(0,ye.xq)(i,u.valueMetadata,o,!1)}})),null!=s)){var v=(0,ye.xq)(s,this.valueMetadata,o,!1);v=mt(v,s,n),c.withLazyValue(new de.o(function(){return{displayName:(0,je.W)(l.getLocalizedString("Waterfall_BreakdownDifferenceTooltip"),u.valueMetadata.displayName),value:v}}))}return c},r}(),na=function(){function r(e){var t=e.valueAxisProperties,a=e.y2AxisProperties,i=e.categoryAxisProperties,n=e.isValueAxisIrregular,s=void 0!==n&&n,o=e.style,l=e.hasY2Role,u=e.forceShowY2;this.chartType=e.chartType;var c=(0,p.Au)(this.chartType),v=11===this.chartType;T.fF.assert(function(){return!(c&&v)},"You can't have a categorical Y axis with a Scatter chart"),this.isCategoryAxisSet=!!i,this.isValueAxisSet=!!t,this.isValueAxisIrregular=s;var y=c?t:i,m=c?i:t,w=this.isComboChart?t:a,C=this.isRibbonChart?p.cI:p.$B,D=!this.isRibbonChart,O=(0,d.__assign)((0,d.__assign)({},r.AxisDataDefaults),{innerPadding:c||v?void 0:C});O.gridline.strokeShow=c||v;var F=(0,d.__assign)((0,d.__assign)({},r.AxisDataDefaults),{innerPadding:c?C:void 0,show:!!c||D});F.gridline.strokeShow=!c,this.x=r.createSingleAxisFromObject(y,O,o),this.y=r.createSingleAxisFromObject(m,F,o),this.categoryAxis=c?this.y:this.x,this.valueAxis=c?this.x:this.y,s&&(this.valueAxis.show=!1);var N=(0,d.__assign)((0,d.__assign)({},r.AxisDataDefaults),{show:u&&l||(this.isComboChart?void 0:l),labelFontProperties:(0,J.ED)(c?this.x.labelFontProperties:this.y.labelFontProperties,{weight:Z.zu,style:Z.zu,textDecoration:Z.AI}),showAxisTitle:c?this.x.showAxisTitle:this.y.showAxisTitle,switchAxisPosition:!0});this.y2=(0,d.__assign)((0,d.__assign)({},r.createSingleAxisFromObject(w,N,o,!0,this.isComboChart)),{hasY2Role:l}),this.secondaryValueAxis=this.y2,this.seriesLabelSettings=e.seriesLabelSettings||{show:!1,maxWidthPercentage:0,defaultSeriesWidth:0,position:void 0},this.hasY2Role=l}return Object.defineProperty(r,"AxisDataDefaults",{get:function(){return{show:!0,alignZeros:!1,showAxisTitle:!1,includeDomains:[],axisType:void 0,axisStyle:h.DO.showTitleOnly,labelDisplayUnits:0,labelPrecision:g.NZ,titleText:void 0,preferredCategoryWidth:p.jY,maxMarginFactor:$t.DefaultMaxMarginFactor,concatenateLabels:p.SM,labelFontProperties:{color:void 0,family:p.se,size:M.B.createFromPt(p.rZ),style:void 0,variant:void 0,weight:void 0,whiteSpace:void 0,textDecoration:void 0},titleFontProperties:{family:p.se,size:M.B.createFromPt(p.rZ)},axisLabel:void 0,logAxisScale:!1,gridline:{strokeShow:void 0,strokeColor:void 0,strokeTransparency:0,strokePattern:L.Dv.solid,strokeWidth:1,strokeDashArray:L.YU,strokeDashCap:L.xm,strokeAutoScale:!1},innerPadding:void 0,invertAxis:!1,sharedAxis:!0,scaleToFit:!1,totalsEnabled:true,switchAxisPosition:!1,labelBold:!1,labelItalic:!1,labelUnderline:!1,titleBold:!1,titleItalic:!1,titleUnderline:!1}},enumerable:!1,configurable:!0}),r.prototype.showsSeriesLabels=function(){var e;return(null===(e=this.seriesLabelSettings)||void 0===e?void 0:e.show)&&(!this.isComboChart||this.hasY2Role)},Object.defineProperty(r.prototype,"isComboChart",{get:function(){return(0,p.LQ)(this.chartType)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isRibbonChart",{get:function(){return 10===this.chartType},enumerable:!1,configurable:!0}),r.createSingleAxisFromObject=function(e,t,a,i,n){var s=i?function(X){return _.camelCase("sec ".concat(X.propertyName))}:function(X){return X.propertyName},o=K.p.valueAxis,l=Ue.v.create(a),u=function(re){return re>=1?re/100:re},v=(0,S.N)(e,s(o.concatenateLabels),t.concatenateLabels),y=(0,S.N)(e,s(o.gridlineStyle),t.gridline.strokePattern),m={family:s(o.fontFamily),size:s(o.fontSize),color:s(o.labelColor),sizeInPixels:!1,bold:s(o.bold),italic:s(o.italic),underline:s(o.underline)},w=(0,J.Zi)(e,m,l,a,t.labelFontProperties.color?void 0:p.eX,"smallLightLabel",t.labelFontProperties);m.family=s(o.titleFontFamily),m.size=s(o.titleFontSize),m.color=s(o.titleColor),m.bold=s(o.titleBold),m.italic=s(o.titleItalic),m.underline=s(o.titleUnderline);var re,C=(0,J.Zi)(e,m,l,a,void 0,"title",(0,J.ED)(t.titleFontProperties,{color:w.color,family:w.family,size:w.size,variant:w.variant,whiteSpace:w.whiteSpace})),D=(0,P.getMergedUserDomains)(t),O=(0,S.N)(e,s(o.start),D[0]),F=(0,S.N)(e,s(o.end),D[1]),N=void 0!==O,U=void 0!==F;return{show:(0,S.N)(e,n?s(o.show):o.show.propertyName,t.show),alignZeros:(0,S.N)(e,s(o.alignZeros),t.alignZeros),showAxisTitle:(0,S.N)(e,s(o.showAxisTitle),t.showAxisTitle),includeDomains:N||U?[(0,P.createScalarDomainOptions)([O,F],10,[N,U])]:[],axisType:(0,S.N)(e,s(o.axisType),t.axisType),axisStyle:(0,S.N)(e,s(o.axisStyle),t.axisStyle),labelDisplayUnits:(0,S.N)(e,s(o.labelDisplayUnits),t.labelDisplayUnits),labelPrecision:(re=(0,S.N)(e,s(o.labelPrecision),t.labelPrecision),null==re||re<0?t.labelPrecision:re),titleText:(0,S.N)(e,s(o.titleText),t.titleText),preferredCategoryWidth:(0,S.N)(e,s(o.preferredCategoryWidth),t.preferredCategoryWidth),maxMarginFactor:u((0,S.N)(e,s(K.p.categoryAxis.maxMarginFactor),t.maxMarginFactor)),concatenateLabels:v,labelFontProperties:w,titleFontProperties:C,axisLabel:(0,S.N)(e,s(o.axisLabel)),logAxisScale:(0,S.N)(e,s(o.logAxisScale),t.logAxisScale),gridline:{strokeShow:(0,S.N)(e,s(o.gridlineShow),t.gridline.strokeShow||!1===v),strokeColor:l.getColorForPropertyName(e,s(o.gridlineColor),r.getGridlineDefaultColorFromGridlineStyle(y)),strokeTransparency:(0,S.N)(e,s(o.gridlineTransparency),t.gridline.strokeTransparency),strokeWidth:(0,S.N)(e,s(o.gridlineThickness),t.gridline.strokeWidth),strokePattern:y,strokeDashArray:(0,S.N)(e,s(o.gridlineDashArray),t.gridline.strokeDashArray),strokeDashCap:(0,S.N)(e,s(o.gridlineDashCap),t.gridline.strokeDashCap),strokeAutoScale:(0,S.N)(e,s(o.gridlineAutoScale),t.gridline.strokeAutoScale)},innerPadding:u((0,S.N)(e,s(K.p.categoryAxis.innerPadding),t.innerPadding)),invertAxis:(0,S.N)(e,s(o.invertAxis),t.invertAxis),sharedAxis:(0,S.N)(e,o.sharedAxis.propertyName,t.sharedAxis),scaleToFit:(0,S.N)(e,o.scaleToFit.propertyName,t.scaleToFit),totalsEnabled:(0,S.N)(e,s(o.totalsEnabled),t.totalsEnabled),labelBold:(0,S.N)(e,s(o.bold),t.labelBold),labelItalic:(0,S.N)(e,s(o.italic),t.labelItalic),labelUnderline:(0,S.N)(e,s(o.underline),t.labelUnderline),titleBold:(0,S.N)(e,s(o.titleBold),t.titleBold),titleItalic:(0,S.N)(e,s(o.titleItalic),t.titleItalic),titleUnderline:(0,S.N)(e,s(o.titleUnderline),t.titleUnderline),switchAxisPosition:(0,S.N)(e,s(o.switchAxisPosition),t.switchAxisPosition)}},r.getGridlineDefaultColorFromGridlineStyle=function(e){switch(e){case L.Dv.dashed:case L.Dv.solid:case L.Dv.custom:return p.Ao;case L.Dv.dotted:return p.JI;default:return T.fF.assertFail("unknown gridline style: ".concat(e)),p.Ao}},r}(),ya=b(3128),sa=b(94478),fa=b(10034),aa=b(77686),It=b(59107),za=b(30237),Aa=function(){function r(){}return r.prototype.bindEvents=function(e,t,a,i){var s,n=this;if(e&&!i){if(this.ticks=e.ticks,a){var o=a.dataPointNavigationManager,l=a.pointSourceKey;o.isEmpty(l)||((0,za.W3)(e.root,o,l),(0,za.I8)(e.root,o,l),(0,za.lt)(e.root,t))}this.ticks.on("click.select",function(){return n.handleSelection(t)}).on("keydown.select",function(){var u=d3.event,c=u.keyCode;(32===c||13===c)&&(u.preventDefault(),u.stopPropagation(),n.handleSelection(t))})}else null===(s=this.ticks)||void 0===s||s.on("click.select",null).on("keydown.select",null)},r.prototype.renderSelection=function(e){var t;null===(t=this.ticks)||void 0===t||t.style("font-weight",function(a){return a.selected?"700":null}).select("text").attr("aria-selected",function(a){return e&&a.selected})},r.prototype.renderFocus=function(e){It.M.focus(e)},r.prototype.handleSelection=function(e){(0,za.kW)(function(t){return(0,za.c8)(t,e)},!0)},r}(),Ut=b(70450),Ra=b(63194),Da=b(60066),Za=b(2241),ur=b(44977),ii=b(38400),Ai=b(41234),Ia=b(65195),Fa=b(10389);function Di(r){var e=r.viewport,t=r.margin;return{width:e.width-t.left-t.right,height:e.height-t.top-t.bottom}}var Ui={left:10,right:10,top:0,bottom:13};function $i(r){var e=r.rendererSettings,t=e.interactivity,a=e.axes,i=e.calculatePlotArea,n=e.cartesianOptions.chartType,s=r.axisZoom,o=r.axesData,l=r.layers,u=r.playAxesRect,v=r.trimOrdinalDataOnOverflow,y=r.viewport,m=r.rotateXTickLabels90,w=r.forceMarginMin,C=[],D=[],O=[];function F(N){var U=d3.extent(N);return{min:U[0],max:U[1]}}return(0,At.Lp)(r.referenceLines,C,D,O,(0,p.RN)(l)),a.negotiateAxes({layers:l,parentViewport:y,padding:(0,xe.ED)(Ui),playAxisControlLayout:u,showAxisTitles:ki(o,s),shouldRenderAxis:(0,p.QB)(o,(0,p.LQ)(n)),axesFontProperties:Gi(o),interactivityRightMargin:t?.mobileTileInteractive&&!v?6:0,calculatePlotArea:i,skipMergeValueAxes:s?.skipMergingValueAxisDomains(),ensureXDomain:F(C),ensureYDomain:F(D),ensureY2Domain:F(O),rotateXTickLabels90:m,forceMarginMin:w})}function Qa(r){return r.isXScrollBarVisible||r.isYScrollBarVisible}function Gi(r){return{x:{tickLabels:r.x.labelFontProperties,title:r.x.titleFontProperties},y:{tickLabels:r.y.labelFontProperties,title:r.y.titleFontProperties},y2:{tickLabels:r.y2.labelFontProperties,title:r.y2.titleFontProperties}}}function ki(r,e){var t={x:r.x.showAxisTitle,y:r.y.showAxisTitle,y2:r.y2.showAxisTitle};return e&&(t=e.updateShowAxisTitles(t)),t}var yr=function(){function r(e){this.settings=e,this.axesData=e.data;var t=this.axesData.useManagedTabIndex,a=this.axisGraphicsContext=this.settings.container.append("g").attr(We.CP,!0).classed(r.AxisGraphicsContext.class,!0);this.svgScrollable=this.settings.container.append("svg").classed("svgScrollable",!0).style("overflow","hidden");var i=this.axisGraphicsContextScrollable=this.svgScrollable.append("g").attr(We.CP,!0).classed(r.AxisGraphicsContext.class,!0);this.labelBackgroundRegion=this.svgScrollable.append("g").classed(g.u9.class,!0),this.labelRegion=this.svgScrollable.append("g").classed(g.ZL.class,!0),this.labelContainerRegion=this.svgScrollable.append("g").classed(g.LV.class,!0).attr(We.CP,!0),this.labelSeriesBackgroundRegion=this.svgScrollable.append("g").classed(g.pJ.class,!0),this.labelSeriesRegion=this.svgScrollable.append("g").classed(g.oA.class,!0),this.axes.isYAxisCategorical?(this.y1AxisGraphicsContext=i.append("g").attr("class","y axis").attr("data-automation-type","y axis").classed(Ra.rG.class,t).attr(Ia.Rh,t),this.y2AxisGraphicsContext=i.append("g").attr("class","y axis").attr("data-automation-type","y2 axis"),this.xAxisGraphicsContext=a.append("g").attr("class","x axis").attr("data-automation-type","x axis").attr(We.CP,!0)):(this.y1AxisGraphicsContext=a.append("g").attr("class","y axis").attr("data-automation-type","y axis"),this.y2AxisGraphicsContext=a.append("g").attr("class","y axis").attr("data-automation-type","y2 axis"),this.xAxisGraphicsContext=i.append("g").attr("class","x axis").attr("data-automation-type","x axis").classed(Ra.rG.class,t).attr(Ia.Rh,t))}return Object.defineProperty(r.prototype,"axes",{get:function(){return this.settings.axes},enumerable:!1,configurable:!0}),r.prototype.getScrollableRegion=function(){return this.axisGraphicsContextScrollable},r.prototype.getLabelsRegion=function(){return this.labelRegion},r.prototype.getSeriesLabelsRegion=function(){return this.labelSeriesRegion},r.prototype.getLabelBackground=function(){return this.labelBackgroundRegion},r.prototype.getLabelsContainers=function(){return{foreground:this.labelRegion,background:this.labelBackgroundRegion}},r.prototype.getLabelContainerRegion=function(){return{foreground:this.labelContainerRegion}},r.prototype.getSeriesLabelsContainers=function(){return{seriesForeground:this.labelSeriesRegion,seriesBackground:this.labelSeriesBackgroundRegion}},r.prototype.update=function(e){this.axesData=e},Object.defineProperty(r.prototype,"featureSwitches",{get:function(){return this.settings.cartesianOptions.featureSwitches},enumerable:!1,configurable:!0}),r.updateTickTooltips=function(e,t){var a=t.d3Axis.tickValues(),i=r.getTickFormatter(t.d3Axis);e.selectAll(r.TickTextSelector).each(function(n){var s=d3.select(this),o=a.indexOf(n);o<0||s.append("title").text(i(n,o))})},r.getTickFormatter=function(e){return e.tickFormat()||P.defaultTickFormat},r.prototype.renderAxis=function(e){var t,a,i,n,s,o,u,c,v=e.axesLayout,y=e.isStacked,m=e.gridlineOptions,w=e.firstVisibleNode,C=0===e.location,D=1===e.location,O=!C,F=v.tickPadding,N=v.margin,U=v.marginLimits.left,X=v.tickLabelMargins,re=v.plotArea.width,pe=v.axes,q=this.getGraphicsElement(e),ee=y?1:this.getAxisRenderMode(e);if(0!==ee){var ue=r.getAxisProps(e),ke=r.getAxisTickLabelFontProperties(e),Ke=!(0,Y._9)(ue.scale),Re=!C&&"right"===this.axes.getYAxisPosition(e.location),Je=Re?F.right:F.left;if(_.isEmpty((0,P.getHierStack)(pe))||!ue.isCategoryAxis||y){q.selectAll(r.HierarchicalStackCS.selector).remove(),C?(ue.d3Axis.tickSizeInner(Ke?-v.plotArea.height:0).tickSizeOuter(0),!ue.willLabelsFit&&!Ke&&ue.d3Axis.tickPadding(r.TickPaddingRotatedX)):Ke?ue.d3Axis.tickSize(y?X.stackHeight:D?-re:r.Y2TickSize).tickPadding(Je):ue.d3Axis.tickSize(P.DefaultInnerTickSize),ue.d3Axis=r.orient(q,ue.d3Axis,C?"bottom":this.axes.getYAxisPosition(e.location));var Ze=(a=void 0===(t=e.cartesianOptions)?{}:t).animateCategoryAxis,Lt=a.animateValueAxis,Xt=(n=void 0===(i=e.axesAnimationOptions)?{}:i).duration,Yt=n.ease,wt=(s=e.axesLayout.axes).x.isCategoryAxis,Kt=s.y1.isCategoryAxis,da=(void 0===(o=s.y2)?{}:o).isCategoryAxis;T.fF.assert(function(){return!da},"Unit test scream check -  Y2 cannot be categorical, must be always numeric"),(Xt&&Yt&&(C?Lt&&wt:D?Ze&&Kt||Lt&&!Kt:Ze&&da||Lt&&!da)?q.transition().duration(Xt).ease(Yt):q).call(ue.d3Axis);var Mt=q.selectAll(r.TickTextSelector).attr("style",null).styles((0,J.E_)(ke)).style("visibility",null).style("fill",null!==(u=this.getAxisData(e.location).labelFontProperties.color)&&void 0!==u?u:null);if(q.selectAll("g.tick line").classed("zero-line",!1),Ke&&q.selectAll("g.tick").filter(function(Ta){return 0===Ta}).select("line").classed("zero-line",!0),q.classed("showLinesOnAxis",m.strokeShow).classed("hideLinesOnAxis",!m.strokeShow),q.selectAll("g.tick line:not(".concat(r.InteractivityGridlineClassSelector.selector,")")).styles((0,Za.bc)(m)),!(null===(c=this.featureSwitches)||void 0===c)&&c.onObject&&(this.convertAxisValuesToSubSelectable(e),this.renderInteractivityGridline(e)),2!==ee){if(y){var ea=ue;q.selectAll("g.tick").filter(function(Ta){return ea.adjustedValues[Ta]===Y.Pt}).selectAll("line").remove(),_.isEmpty(ue.categoryLabelMaxWidths)?q.selectAll("g.tick").selectAll("line").remove():(r.centerHierarchyTicks(q,ea),r.styleHierarchyTicks(q,ea,m),O&&Mt.call(P.rotate,{textTruncator:te.b.getTailoredTextOrDefault,textProperties:(0,J.qk)(ke),needRotate:!0,needEllipsis:!0,axisProperties:ue,margin:N,rotate90:!0,firstVisibleNode:w,rotationPadding:p.Fv,height:e.height,y1Hierarchy:!0}))}C?ue.willLabelsWordBreak?r.xAxisWordBreak(Mt,e):Mt.call(P.rotate,{textTruncator:te.b.getTailoredTextOrDefault,textProperties:(0,J.qk)(ke),needRotate:!ue.willLabelsFit&&!Ke,needEllipsis:!0,axisProperties:ue,margin:N,rotate90:Qa(v)||!ue.willLabelsFit&&(!!y||v.rotateXTickLabels90),firstVisibleNode:w,rotationPadding:p.Fv,height:e.height}):(Re?X.yRight:X.yLeft)>=U&&(!y||_.isEmpty(ue.categoryLabelMaxWidths))&&q.selectAll(r.TickTextSelector).call(Y.oq,U-Je,te.b.svgEllipsis),r.updateTickTooltips(q,ue),(C||D)&&this.axes.interactivityService&&(D?this.axes.isYAxisCategorical:!this.axes.isYAxisCategorical)&&ue.categoryIdentities&&(Ke?this.removeFocusAbility(q):this.renderCategoricalInteractivity(e))}else m.strokeShow&&(q.selectAll(r.TickTextSelector).style("visibility","hidden"),this.removeFocusAbility(q))}else this.renderHierarchicalAxis(e)}else q.selectAll("*").remove()},r.prototype.renderHierarchicalAxis=function(e){var t,a=this,i=(t=e.axesLayout).axes,n=t.tickLabelMargins,s=this.getGraphicsElement(e),o=(0,P.getHierStack)(i);T.fF.assertValue(!_.isEmpty(o),"one of the axis must be hierarchical and have sub-axes");var l=i.x.isCategoryAxis;T.fF.assert(function(){return l||i.y1.isCategoryAxis},"renderHierarchicalAxis should only be called if one axis is categorical"),this.axisGraphicsContextScrollable.selectAll(".".concat(l?"x":"y",".axis > .tick")).remove(),(l?i.x:i.y1).categoryIdentities&&s.attr("tabindex",0).attr("focusable",!0).attr("aria-label",l?i.x.axisLabel:i.y1.axisLabel).attr("role","listbox").classed(Da.Pg,!It.M.isInternetExplorerOrEdge());var u=l?Y.Or.bottom:"left"===this.axes.getY1AxisPosition()?Y.Or.left:Y.Or.right,c=$t.getLeafHeight(n,u,o.length);s.selectAll(r.HierarchicalStackCS.selector).data(o).join(function(v){return v.append("g").classed(r.HierarchicalStackCS.class,!0).classed("showLinesOnAxis",e.gridlineOptions.strokeShow).classed("hideLinesOnAxis",!e.gridlineOptions.strokeShow)}).each(function(v,y,m){var w=0,C=0,D=0===y;D||(u===Y.Or.bottom?w=c+(y-1)*n.stackHeight:u===Y.Or.left?C=-c-(y-1)*n.stackHeight:u===Y.Or.right?C=c+y*n.stackHeight:T.fF.assertAnyValue(u,"AxisOrientation is not expected to be top.")),a.renderAxis((0,d.__assign)((0,d.__assign)({},e),{axisProps:v,graphicsElement:d3.select(m[y]).attr("transform",(0,Fa.Iu)(C,w)),isStacked:!0,firstVisibleNode:(0,Pe.y$)(v.rootNode,v.scale.domain()[0],o.length-y),useManagedTabIndex:!!l&&e.useManagedTabIndex,height:function(){if(!l)return 999;var O=r.getAxisTickLabelFontProperties(e);return D?O.size.pt<=p.rZ?e.axesLayout.marginLimits.bottom:c:n.stackHeight}()}))}),this.categoryAxisGraphicsContext=s},r.prototype.renderCategoricalInteractivity=function(e){var t=r.getAxisProps(e),a=this.getGraphicsElement(e),i=t.categoryIdentities;this.categoryAxisGraphicsContext=a;var n=(0,P.isStackedAxisProperties)(t);n||(a.attr("aria-label",t.axisLabel),e.useManagedTabIndex||a.attr("tabindex",0).attr("focusable",!0).attr("role","listbox").classed(Da.Pg,!It.M.isInternetExplorerOrEdge()));for(var s=(0,P.isStackedAxisProperties)(t)?t.adjustedValues:t.values,o=(0,P.isStackedAxisProperties)(t)?t.categoryHierarchyPointers:[],l=_.map(t.d3Axis.tickValues(),function(w,C){var D,O,F;0===C&&!_.isEmpty(o)&&(F=w,w=_.findLastIndex(o,function(U){return!!U},w));var N=o[w];return{value:s[w],selected:!1,categoryIndex:null!==(D=N?.categoryIndex)&&void 0!==D?D:w,adjustedCategoryIndex:F,seriesIndex:null!==(O=N?.seriesIndex)&&void 0!==O?O:0,identity:i[w]?i[w]():void 0}}),u=0,c=0,v=i.length;c<v;c++){var y=l[u];if(y?.categoryIndex===c)y.value!==Y.Pt&&this.categoryDataPoints.push(y),u++;else{var m=o[c];(!n||m)&&this.categoryDataPoints.push({value:void 0,categoryIndex:m?m.categoryIndex:c,seriesIndex:m?m.seriesIndex:0,selected:!1,identity:void 0})}}a.selectAll(".tick").data(l,function(w){var C,D,O,F;return null!==(F=null!==(D=null===(C=w.adjustedCategoryIndex)||void 0===C?void 0:C.toString())&&void 0!==D?D:null===(O=w.categoryIndex)||void 0===O?void 0:O.toString())&&void 0!==F?F:w.toString()}).select("text").each(function(w){w.value!==Y.Pt&&d3.select(this).attr("tabindex",0).attr("focusable",!0).attr("role","option").attr("aria-selected",function(C){return C.selected}).attr("data-automation-type","axis-tick-text").classed(Da.Pg,!It.M.isInternetExplorerOrEdge()).selectAll("tspan").datum(w)})},r.prototype.removeFocusAbility=function(e){e.attr("tabindex",null).attr("focusable",null)},r.prototype.getAxisData=function(e){return 0===e?this.axesData.x:1===e?this.axesData.y:this.axesData.y2},r.getAxisProps=function(e){var t,a=e.axesLayout.axes;return null!==(t=e.axisProps)&&void 0!==t?t:0===e.location?a.x:1===e.location?a.y1:a.y2},r.prototype.getGraphicsElement=function(e){var t,a=e.location;return null!==(t=e.graphicsElement)&&void 0!==t?t:0===a?this.xAxisGraphicsContext:1===a?this.y1AxisGraphicsContext:this.y2AxisGraphicsContext},r.getAxisTickLabelFontProperties=function(e){var t=e.location,a=e.axesFontProperties;return(0===t?a.x:1===t?a.y:a.y2).tickLabels},r.prototype.getAxisRenderMode=function(e){var t=e.location,a=e.axesLayout.shouldRenderAxis;return r.getAxisProps(e)?e.shouldRenderGridLinesOnly&&e.gridlineOptions.strokeShow?2:(0===t?a.x:1===t?a.y:a.y2)?1:0:0},r.prototype.convertAxisValuesToSubSelectable=function(e){var t=0===e.location?"x-axis-values":1===e.location?"y1-axis-values":"y2-axis-values",a=this.getGraphicsElement(e).selectAll(r.TickTextSelector).filter(function(){return"visible"===d3.select(this).style("visibility")}),i=a.nodes();_.isEmpty(i)||(a.classed(We.cy,!0).attr(We.Ez,t).attr(We.CK,"Role_DisplayName_Values").attr(We.QZ,2),i.forEach(function(n){return We.O5.setDataForElement(n,{getRegionOutlines:function(){return r.getAxisValuesOutlines(i,t,e.multipleId)}})}))},r.getAxisValuesOutlines=function(e,t,a){for(var i,n=Number.MAX_SAFE_INTEGER,s=Number.MAX_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER,l=Number.MIN_SAFE_INTEGER,u=0,c=e;u<c.length;u++){var y=(i=c[u].getBoundingClientRect()).x,m=i.y,w=i.bottom,C=i.right;n=Math.min(n,y),s=Math.min(s,m),o=Math.max(o,w),l=Math.max(l,C)}return[{id:"".concat(t).concat(a??""),outline:{x:n,y:s,width:l-n,height:o-s,type:1}}]},r.prototype.renderAxes=function(e){var t,a,i,n;T.fF.assertValue(e.axesLayout,"axesLayout");var v,y,s=e.axesLayout,o=e.axesFontProperties,l=s.axes,u=!_.isEmpty((0,P.getHierStack)(l));this.categoryDataPoints=[],this.categoryAxisGraphicsContext=void 0,T.fF.assert(function(){return null!=l.x},"axes.x must be defined."),this.renderAxis((0,d.__assign)((0,d.__assign)({},e),{location:0,height:(v=o.x.tickLabels.size.pt<=p.rZ,y=v?s.marginLimits.bottom:s.margin.bottom,v||null==s.axisLabels.x?y:y-(te.b.estimateSvgTextHeight((0,J.qk)(o.x.tickLabels))+$t.XAxisLabelPadding)),gridlineOptions:(0,d.__assign)((0,d.__assign)({},null===(t=this.axesData)||void 0===t?void 0:t.x.gridline),{strokeShow:(!(0,Y._9)(l.x.scale)||l.x.isCategoryAxis&&u)&&(null===(a=this.axesData)||void 0===a?void 0:a.x.gridline.strokeShow)})}));var c=(0,d.__assign)((0,d.__assign)({},null===(i=this.axesData)||void 0===i?void 0:i.y.gridline),{strokeShow:(!(0,Y._9)(l.y1.scale)||l.y1.isCategoryAxis&&u)&&(null===(n=this.axesData)||void 0===n?void 0:n.y.gridline.strokeShow)});if(this.renderAxis((0,d.__assign)((0,d.__assign)({},e),{location:1,gridlineOptions:c})),this.renderAxis((0,d.__assign)((0,d.__assign)({},e),{location:2,gridlineOptions:c})),this.renderAxesTitles(e),this.valueGridlines=this.axisGraphicsContext.selectAll("g.tick line"),this.translateAxes(s),this.axes.interactivityService&&this.categoryAxisGraphicsContext)return{dataPoints:this.categoryDataPoints,behaviorOptions:{root:this.categoryAxisGraphicsContext,ticks:this.categoryAxisGraphicsContext.selectAll(".tick")},navigationOptions:{helper:this,navigationStrategy:u?j.jN.SeriesFirst:j.jN.CategoryOnly},animateLabels:!1,labelDataPointGroups:[],labelDataPoints:[],labelOrientation:void 0,labelsAreNumeric:void 0,labelDataPointSeriesGroups:[]}},r.prototype.renderInteractivityGridline=function(e){var t=e.location,a=e.multipleId,i=e.gridlineOptions,n=this.getGraphicsElement(e),s=0===t?"vertical-gridlines":1===t?"horizontal-gridlines":"secondary-horizontal-gridlines",o="vertical-gridlines"!==s,l=n.selectAll("g.tick line:not(".concat(r.InteractivityGridlineClassSelector.selector,")"));l.each(function(){var u,c=d3.select(this.parentNode),v=d3.select(this),y=v.node(),m=(u=y.getBoundingClientRect()).height,C=i.strokeShow&&(o&&u.width>0||!o&&m>0);c.selectAll(r.InteractivityGridlineClassSelector.selector).filter(function(D){return D===y}).data(function(){return C?[y]:[]}).join("line").attr("class",r.InteractivityGridlineClassSelector.class).classed(We.cy,!0).style("stroke-width",r.interactivityGridlinePadding).style("stroke-linejoin",Ai.t.round).style("stroke-dasharray","none").attrs({x1:v.attr("x1"),y1:v.attr("y1"),x2:v.attr("x2"),y2:v.attr("y2")}).attr(We.Ez,s).attr(We.CK,o?"Visual_Gridline_Horizontal":"Visual_Gridline_Vertical").attr(We.QZ,3).each(function(){We.O5.setDataForElement(this,{getRegionOutlines:function(){var O=l.nodes();return r.getGridlinesOutlines(O,s,a)}})})})},r.prototype.getFirstElement=function(){var e;return{element:null===(e=this.categoryAxisGraphicsContext)||void 0===e?void 0:e.selectAll(r.TickTextSelector).node()}},r.prototype.getDataPointsAtSeries=function(e){return _.filter(this.categoryDataPoints,function(t){return t.seriesIndex===e})},r.prototype.getNextDataPoint=function(e,t,a){var i,n;if(_.isEmpty(this.categoryDataPoints))return{element:this.categoryAxisGraphicsContext.select(r.TickTextSelector).node(),targetCategoryIndex:0};switch(a){case j.x0.PreviousCategory:case j.x0.NextCategory:var s=a===j.x0.PreviousCategory?-1:1,o=this.getDataPointsAtSeries(t),l=s+_.findIndex(o,function(v){return v.categoryIndex===e});l>=o.length||l<0?(i=this.rollToNextSeries(t,a),e=i[0],t=i[1]):e=o[l].categoryIndex;break;case j.x0.PreviousSeries:case j.x0.NextSeries:s=a===j.x0.PreviousSeries?-1:1,o=_.filter(this.categoryDataPoints,function(m){return m.categoryIndex===e});var u=s+_.findIndex(o,function(m){return m.seriesIndex===t});u>=o.length||u<0?(n=this.findNearestSeries(e,t,a),e=n[0],t=n[1]):t=o[u].seriesIndex}return{element:this.categoryAxisGraphicsContext.selectAll(r.TickTextSelector).filter(function(v){return(!v.adjustedCategoryIndex||v.adjustedCategoryIndex===v.categoryIndex)&&v.categoryIndex===e&&v.seriesIndex===t}).node(),targetCategoryIndex:e}},r.getGridlinesOutlines=function(e,t,a){var n={type:0,outlines:e.map(function(s){var o=s.getBoundingClientRect(),l=o.x,u=o.y;return{points:[{x:l,y:u},{x:l+o.width,y:u+o.height}],type:2}})};return[{id:a?"".concat(t).concat(a):t,outline:n}]},r.prototype.rollToNextSeries=function(e,t){T.fF.assert(function(){return t===j.x0.PreviousCategory||t===j.x0.NextCategory},"expected a direction having to do with category");var a=t===j.x0.PreviousCategory?-1:1,i=t===j.x0.PreviousCategory?_.last:_.first,n=_.maxBy(this.categoryDataPoints,function(l){return l.seriesIndex}).seriesIndex+1;return(e+=a)>=n?e=0:e<0&&(e=n-1),[i(this.getDataPointsAtSeries(e)).categoryIndex,e]},r.prototype.findNearestSeries=function(e,t,a){T.fF.assert(function(){return a===j.x0.PreviousSeries||a===j.x0.NextSeries},"expected a direction having to do with series");var i=_.maxBy(this.categoryDataPoints,function(l){return l.seriesIndex}).seriesIndex+1;(t+=a===j.x0.PreviousSeries?-1:1)>=i&&(t=0),t<0&&(t=i-1);var s=this.getDataPointsAtSeries(t),o=_.sortedLastIndexBy(s,{categoryIndex:e},function(l){return l.categoryIndex})-1;return T.fF.assertValue(e=s[o].categoryIndex,"sortedLastIndexBy failed"),[e,t]},r.prototype.renderAxesTitles=function(e){var t,a=this;this.axisGraphicsContext.selectAll(".xAxisLabel").remove(),this.axisGraphicsContext.selectAll(".yAxisLabel").remove();var i=e.axesFontProperties,n=(t=e.axesLayout).axisLabels,s=t.viewport,o=t.margin,l=t.axes;if(T.fF.assertValue(s,"viewport"),T.fF.assertValue(n,"axisLabels"),(null!=n.x||null!=n.y||null!=n.y2)&&!e.shouldRenderGridLinesOnly){var c=s.width-(o.left+o.right),v=s.height-o.top,y=this.axes.shouldShowY1OnRight(),m=function(C){var D,O,F,N,U,X,re,pe,q=0===C,ee=1===C,ue=2===C,ke=q?n.x:ee?n.y:n.y2,Ke=null===(D=q?i.x:ee?i.y:i.y2)||void 0===D?void 0:D.title;if(null!=ke&&Ke){var Re,Je;if(null!==(O=a.featureSwitches)&&void 0!==O&&O.onObject){var Ze=ue?K.p.valueAxis.secTitleText:q&&l.x.isCategoryAxis||ee&&null!==(F=l.y1)&&void 0!==F&&F.isCategoryAxis?K.p.categoryAxis.titleText:K.p.valueAxis.titleText;(Je=q?(0,ne.s4)(Ze,ke):(0,ne.Mw)(Ze,ke))&&!ke&&e.showTitlePlaceholders&&(Re=!0,ke=a.settings.hostServices.getLocalizedString("Format_AddAxisTitle"))}if(ke||!ue){var Lt=(0,J.qk)(Ke,ke),Xt=te.b.estimateSvgTextBaselineDelta(Lt),Yt=te.b.estimateSvgTextHeight(Lt),Kt=c+o.right-Yt-$t.YAxisLabelPadding+3,da=-(o.left+3);a.axisGraphicsContext.append("text").attr("class",q?"xAxisLabel":"yAxisLabel").attr("transform",q?null:"rotate(-90)").attr("dy",q?null:"1em").attr("x",q?c/2:-(v-o.bottom)/2).attr("y",q?v-Xt:ee?y?Kt:da:y?da:Kt).style("text-anchor","middle").styles((0,J.E_)(Ke)).style("fill",null!==(pe=null===(re=q?null===(N=a.axesData)||void 0===N?void 0:N.x:ee?null===(U=a.axesData)||void 0===U?void 0:U.y:null===(X=a.axesData)||void 0===X?void 0:X.y2)||void 0===re?void 0:re.titleFontProperties.color)&&void 0!==pe?pe:null).text(ke).call(Y.oq,q?c:v-o.bottom,function(ua,Mt){return te.b.svgEllipsis(ua,Mt,Lt)}).call(ii.Q,[ke]).filter(function(){var ua;return null===(ua=a.featureSwitches)||void 0===ua?void 0:ua.onObject}).classed(We.cy,!0).classed(We.Qh.class,Re).attr(We.Ez,q?"x-axis-title":ee?"y1-axis-title":"y2-axis-title").attr(We.CK,"Visual_Axis_Title").attr(We.QZ,1).filter(function(){return!!Je}).attr(We.kv,JSON.stringify(Je))}}};m(0),m(1),m(2)}},r.prototype.translateAxes=function(e){var t,a=this,i=e.margin,n=(t=Di(e)).width,s=t.height,o=this.axesData.showsSeriesLabels()?(0,ce.lr)(this.axesData.seriesLabelSettings,n):0,l=this.axesData.seriesLabelSettings.position===Ie.M.right,u=l?i.left:i.left+o,c=l?0:o,v=this.axes.shouldShowY1OnRight();this.xAxisGraphicsContext.attr("transform",(0,Fa.Iu)(0,s)),this.y1AxisGraphicsContext.attr("transform",(0,Fa.Iu)(v?n:0,0)),this.y2AxisGraphicsContext.attr("transform",(0,Fa.Iu)(v?0:n,0)),this.svgScrollable.attrs({x:0,width:e.viewport.width,height:e.viewport.height}),this.axisGraphicsContext.attr("transform",(0,Fa.Iu)(i.left,i.top));var y=function(C){a.axisGraphicsContextScrollable.attr("transform",(0,Fa.Iu)(C,i.top)),a.labelRegion.attr("transform",(0,Fa.Iu)(C,i.top)),a.labelContainerRegion.attr("transform",(0,Fa.Iu)(C,i.top)),a.labelBackgroundRegion.attr("transform",(0,Fa.Iu)(C,i.top)),a.labelSeriesRegion.attr("transform",(0,Fa.Iu)(C,i.top)),a.labelSeriesBackgroundRegion.attr("transform",(0,Fa.Iu)(C,i.top))};y(u),e.isXScrollBarVisible?(this.svgScrollable.attrs({x:i.left,width:n}),y(c)):e.isYScrollBarVisible&&this.svgScrollable.attr("height",s+i.top),this.valueGridlines.attr("transform","translate(".concat(l?v?-o:0:v?0:o,")"))},r.centerHierarchyTicks=function(e,t){e.selectAll("g.tick").filter(function(a){return t.adjustedValues[a]!==Y.Pt}).each(function(a){var i=d3.select(this),n=i.attr("transform"),s=(0,Fa.nd)(n);s&&+s.x>0&&i.attr("transform",(0,Fa.Iu)(+s.x+t.categoryLabelMaxWidths[a]/2-t.categoryThickness/2+p.Fv,+s.y)),s&&+s.y>0&&i.attr("transform",(0,Fa.Iu)(+s.x,+s.y+t.categoryLabelMaxWidths[a]/2-t.categoryThickness/2+p.Fv))})},r.xAxisWordBreak=function(e,t){var a=null;e.style("text-anchor","middle").attrs({dx:null,dy:null,transform:"rotate(0)",y:function(){if(null==a){var n=te.b.getSvgMeasurementProperties(this),s=te.b.estimateSvgTextHeight(n),o=te.b.estimateSvgTextBaselineDelta(n);a=10+s-o}return"".concat(a,"px")}}).each(function(i){(0,ur.lM)(this,(0,P.getMaxWidth)(r.getAxisProps(t),i),t.height)})},r.orient=function(e,t,a){return delete e.node().__axis,(0,P.axisFactory)(t.scale(),Y.Or[a]).tickArguments(t.tickArguments()).tickValues(t.tickValues()).tickFormat(t.tickFormat()).tickSize(t.tickSize()).tickSizeInner(t.tickSizeInner()).tickSizeOuter(t.tickSizeOuter()).tickPadding(t.tickPadding())},r.styleHierarchyTicks=function(e,t,a){e.selectAll("g.tick").filter(function(i){return t.adjustedValues[i]!==Y.Pt}).selectAll("line").data(function(i){return t.lineStyleInfo[i]}).join(function(i){return i.append("line")}).attrs({x1:function(n){return n.x1},y1:function(n){return n.y1},x2:function(n){return n.x2},y2:function(n){return n.y2}}).styles((0,Za.bc)(a))},r.AxisGraphicsContext=(0,Z.CH)("axisGraphicsContext"),r.HierarchicalStackCS=(0,Z.CH)("stack"),r.InteractivityGridlineClassSelector=(0,Z.CH)("interactivity-gridline"),r.TickTextSelector="g.tick > text",r.interactivityGridlinePadding=10,r.TickPaddingRotatedX=5,r.Y2TickSize=-6,r}(),di=function(){function r(){this.navigationLayers=[],this.currentNavigationLayerIndex=0}return r.prototype.updateScrollCallbacks=function(e){this.scrollCallbacks=e},r.prototype.clearNavigationLayers=function(){this.navigationLayers=[]},r.prototype.addNavigationLayer=function(e){this.navigationLayers.push(e)},r.prototype.getFirstElement=function(){this.currentNavigationLayerIndex=0;var t,e=this.navigationLayers[this.currentNavigationLayerIndex].getFirstElement();return e&&(t=e.element?e.element:this.getNextDataPoint(e.targetCategoryIndex,e.targetSeriesIndex,j.x0.NextSeries).element),{element:t}},r.prototype.getNextDataPoint=function(e,t,a){var i=this.composeLayerPointInfo(e,t);return this.getNextDataPointWithStartData(i,a,i)},r.prototype.getNextDataPointWithStartData=function(e,t,a){var i=this,n=e.categoryIndex,s=e.seriesIndex,o=this.navigationLayers[this.currentNavigationLayerIndex],l=o.getNextDataPoint(n,s,t),u=l.targetCategoryIndex,c=t===j.x0.NextSeries||t===j.x0.NextCategory,v=this.navigationLayers.length;if(v>1&&l.targetCategoryIndex!==n){var y=n,m=0,w=c?1:-1;do{switch(t){case j.x0.NextSeries:case j.x0.PreviousSeries:this.currentNavigationLayerIndex+=w,this.layerRollOverCheck(this.currentNavigationLayerIndex,v)?(this.currentNavigationLayerIndex=this.currentNavigationLayerIndex<0?v-1:0,l=(o=this.navigationLayers[this.currentNavigationLayerIndex]).getFirstElement(u,!c),_.isFinite(l.targetCategoryIndex)&&(u=l.targetCategoryIndex),y=u,m++):l=(o=this.navigationLayers[this.currentNavigationLayerIndex]).getFirstElement(y,!c);break;case j.x0.NextCategory:case j.x0.PreviousCategory:m=v;break;default:T.fF.assertNever(t)}}while(!l.element&&m<v&&(!this.layerRollOverCheck(this.currentNavigationLayerIndex+w,v)||m<v-1))}if(!l.element&&null!=u&&this.shouldScroll(u)){this.getPendingFocusElement=function(){if(i.getPendingFocusElement=void 0,t===j.x0.NextSeries?i.currentNavigationLayerIndex=0:t===j.x0.PreviousSeries&&(i.currentNavigationLayerIndex=v-1),!(l=(o=i.navigationLayers[i.currentNavigationLayerIndex]).getNextDataPoint(n,s,t)).element){var O=i.currentNavigationLayerIndex;do{i.currentNavigationLayerIndex++,i.currentNavigationLayerIndex>=i.navigationLayers.length&&(i.currentNavigationLayerIndex=0),l=i.navigationLayers[i.currentNavigationLayerIndex].getNextDataPoint(n,s,t)}while(!l.element&&i.currentNavigationLayerIndex!==O)}if(i.shouldFindNextPoint(l,e,a,c)){var F=i.composeLayerPointInfo(l.targetCategoryIndex,l.targetSeriesIndex);return i.getNextDataPointWithStartData(F,t,a).element}return l.element};var C=u-n;C<0?this.scrollCallbacks.scrollTo(u):this.scrollCallbacks.scrollBy(C)}else if(this.shouldFindNextPoint(l,e,a,c)){var D=this.composeLayerPointInfo(l.targetCategoryIndex,l.targetSeriesIndex);return this.getNextDataPointWithStartData(D,t,a)}return l},r.prototype.shouldScroll=function(e){return!!this.scrollCallbacks&&this.scrollCallbacks.shouldScrollTo(e)},r.prototype.layerRollOverCheck=function(e,t){return e>=t||e<0},r.prototype.composeLayerPointInfo=function(e,t){return{categoryIndex:e,seriesIndex:t,layerIndex:this.currentNavigationLayerIndex}},r.prototype.shouldFindNextPoint=function(e,t,a,i){if((!e.element||e.noShape)&&null!==e.targetCategoryIndex&&null!==e.targetSeriesIndex){var s=this.composeLayerPointInfo(e.targetCategoryIndex,e.targetSeriesIndex);switch(this.compareLayerPointInfo(a,s,i)){case 1:if(this.compareLayerPointInfo(t,s,i)>=0&&this.compareLayerPointInfo(a,t,i)>0)return!1;break;case 0:return!1;case-1:if(this.compareLayerPointInfo(a,t,i)>0||this.compareLayerPointInfo(t,s,i)>=0)return!1;break;default:T.fF.assertFail("Unexpected result from compareLayerPointInfo")}return!0}return!1},r.prototype.compareLayerPointInfo=function(e,t,a){return e.categoryIndex>t.categoryIndex?a?1:-1:e.categoryIndex<t.categoryIndex?a?-1:1:e.seriesIndex>t.seriesIndex?a?1:-1:e.seriesIndex<t.seriesIndex?a?-1:1:e.layerIndex>t.layerIndex?a?1:-1:e.layerIndex<t.layerIndex?a?-1:1:0},r}(),pi=b(38078),Q=function(){function r(e,t){this.options=e,this.scrollbar=t}return r.filterDataToViewport=function(e){var t,a=(t=e||{}).scrollScale,i=t.mainAxisScale,n=t.layers,s=t.axesLayout;if(e.scrollScale){var o=(0,P.invertOrdinalScale)(a,e.extent.start),l=o+e.visibleCategoryCount,c=a.domain().slice(o,l);if(!_.isEqual(c,i.domain())){if(c&&c.length>0){for(var v=0,y=n;v<y.length;v++)y[v].setFilteredData(c[0],c[c.length-1]+1);i.domain(c);var w=s.axes,C=s.isXScrollBarVisible?w.x:w.y1;C.d3Axis.scale(i),C.scale(i),C.d3Axis.ticks(c.length),C.d3Axis.tickValues(c);var D=yr.getTickFormatter(C.d3Axis);C.values=_.map(c,function(re){return D(re)});var O=(0,P.getHierStack)(w);if(!_.isEmpty(O))for(var F=w.x.isCategoryAxis?Y.Or.bottom:s.axes.y1.orientation,N=$t.getLeafHeight(e.axesLayout.tickLabelMargins,F,O.length),U=function(pe){var q=O[pe],ee=(0,P.getCategoryThickness)(q.scale),ue=q.values,ke=r.setLabelsAtEdges(c,ue);if(q.d3Axis.ticks(c.length).tickValues(c).tickFormat(function(ua){var Mt=ue[ke[c.indexOf(ua)]];return Mt===Y.Pt?"":"".concat(Mt)}),0===pe)return"continue";for(var Ze,Ke=[],Re=[],Je=[],Lt=function(Mt){null!=Ze&&(Ke[Ze]=$t.getMaxCategoryWidth(Mt,ee),Re[Ze]=$t.getHierarchyLineStyleInfo({levelIndex:pe,stackHeight:s.tickLabelMargins.stackHeight,leafHeight:N,categorySpanCount:Mt,categoryWidth:ee,orientation:F}))},Xt=0;Xt<ke.length;Xt++){var Yt=c[Xt],wt=ke[Xt];ue[wt]!==Y.Pt?(Lt(Yt-Ze),Je[Yt]=ue[wt],Ze=Yt):Je[Yt]=Y.Pt}null!=Ze&&Lt(c[ke.length-1]-Ze+1),q.categoryLabelMaxWidths=Ke,q.lineStyleInfo=Re,q.adjustedValues=Je},X=0;X<O.length;X++)U(X)}return{startIndex:o,endIndex:l-1}}}},r.prototype.destroy=function(){this.scrollbar.remove()},r.prototype.render=function(e,t,a,i,n,s,o){var u,c,v,w,C,D,O,F,N,U,X,l=this,y=e.axesLayout,m=e.layers;if(this.axisScale=null,i||Qa(y))if(this.options.axes.isYAxisCategorical){this.axisScale=y.axes.y1.scale,w=y.viewport.width,C=y.margin.top,U=y.axes.y1.innerPaddingRatio;var ue=(F=y.axes.y1.categoryThickness)*(N=y.axes.y1.outerPaddingRatio);X=y.plotArea.height,O=Math.max(1,(0,E.Uy)((X-2*ue)/F)),D=X}else{this.axisScale=y.axes.x.scale,w=y.margin.left;var re=null===(u=this.options.cartesianOptions)||void 0===u?void 0:u.chartType,pe=!(0,p.LQ)(re)||n,q=Et(m,re);if(q.position===Ie.M.left&&pe){var ee=Di(y).width;w+=(0,ce.lr)(q,ee)}C=y.viewport.height,U=y.axes.x.innerPaddingRatio,ue=(F=y.axes.x.categoryThickness)*(N=y.axes.x.outerPaddingRatio),X=y.plotArea.width,O=Math.max(1,(0,E.Uy)((X-2*ue)/F)),D=X}if(!Qa(y))return i&&(i.resetViewport(O),i.shouldLoadMoreData()&&i.loadMoreData()),this.scrollbar.remove(),void t((0,d.__assign)((0,d.__assign)({},e),{cartesianOptions:this.options.cartesianOptions}));var ke=this.axisScale.copy();ke.range([0,D]).paddingInner(.1).paddingOuter(0);var Ke=ke(O-1)+ke.bandwidth();this.scrollHandler=new he({visibleScale:this.axisScale,fullScale:ke,onScroll:function(Ze){var Lt=ke(Ze);l.scrollbar.setExtent({start:Lt,end:null}),l.scrollbar.refreshExtentAndVisual()}}),this.axisScale.range([0,X]).paddingInner(U).paddingOuter(N),this.scrollbar.setOrientation(y.isXScrollBarVisible),this.scrollbar.setScale(ke,this.options.suppressBrush),this.scrollbar.scrollBarLength=D,this.scrollbar.setExtentLength(Ke),a||this.scrollbar.setExtent({start:0,end:null});var Re={axesLayout:y,layers:m,categoryLoadMoreDataHandler:i,mainAxisScale:this.axisScale,renderDelegate:t,scrollScale:ke,visibleCategoryCount:O,cartesianOptions:this.options.cartesianOptions,extent:this.scrollbar.getExtent()};this.scrollbar.render(w,C,function(){r.renderVisual((0,d.__assign)((0,d.__assign)({},Re),{suppressAnimations:!0,extent:l.scrollbar.getExtent()})),o?.addDirectEditPlaceholderOutlines(),o?.refreshOutlines()},s,o),a&&i?this.scrollTo(null!==(v=null===(c=i.viewportDataRange)||void 0===c?void 0:c.startIndex)&&void 0!==v?v:0):r.renderVisual((0,d.__assign)((0,d.__assign)({},Re),{extent:this.scrollbar.getExtent()}))},r.prototype.scrollDelta=function(e){this.scrollHandler.scrollDelta(e)},r.prototype.scrollTo=function(e){this.scrollHandler.scrollTo(e)},r.prototype.shouldScrollTo=function(e){if(!this.scrollHandler)return!1;var t=this.axisScale.domain();return!_.isEmpty(t)&&(e<t[0]||e>t[t.length-1])},r.prototype.setExtent=function(e){this.scrollbar.setExtent(e),this.scrollbar.refreshExtentAndVisual()},r.prototype.scrollBy=function(e){var t=this.axisScale.domain();_.isEmpty(t)||this.scrollHandler.scrollTo(t[0]+e)},r.prototype.clearRenderingTimeout=function(){this.scrollbar&&this.scrollbar.clearRenderingTimeout()},r.setLabelsAtEdges=function(e,t){if(e.length<=1||t[e[0]]!==Y.Pt)return e;var a=e[0],i=e.slice();if(a<t.length&&a>=0){for(;t[a]===Y.Pt&&a>=0;a--);i[0]=a}return i},r.renderVisual=function(e){var t=r.filterDataToViewport(e);if(t){if(e.categoryLoadMoreDataHandler){var a=e.categoryLoadMoreDataHandler;a.viewportDataRange=t,a.shouldLoadMoreData()&&a.loadMoreData()}e.renderDelegate(e)}},r.ScrollbarWidth=10,r}(),he=function(){function r(e){T.fF.assertValue(e,"options must be set"),T.fF.assertValue(e.visibleScale,"options.visibleScale must be set"),T.fF.assertValue(e.fullScale,"options.fullScale must be set"),T.fF.assertValue(e.onScroll,"options.onScroll must be set"),this.visibleScale=e.visibleScale,this.fullScale=e.fullScale,this.onScroll=e.onScroll;var t=pi.b$.valueOrDefault(e.timeout,r.defaultTimeoutMs);this.extendScrollTimeout=_.debounce(this.onTimeout,t),this.totalScrollDistance=0}return r.prototype.scrollDelta=function(e){if(!_.isEmpty(this.visibleScale.domain())){this.totalScrollDistance<0&&e>0||this.totalScrollDistance>0&&e<0?this.totalScrollDistance=e:this.totalScrollDistance+=e;var t=r.getStepSize(this.visibleScale);if(Math.abs(this.totalScrollDistance)>=t){this.extendScrollTimeout&&this.extendScrollTimeout.cancel();var a=this.getNewStartIndex(this.totalScrollDistance);this.scrollTo(a),this.totalScrollDistance=0}else this.extendScrollTimeout()}},r.prototype.scrollTo=function(e){var t=this.clampIndex(e);this.onScroll(t)},r.getStepSize=function(e){var t=_.map(e.domain(),e);if(t.length>1)return t[1]-t[0];var a=e.range();return a[1]-a[0]},r.prototype.getNewStartIndex=function(e){var t=e>=0;e=t?e:-e;var a=this.visibleScale,i=_.map(a.domain(),a),n=a.domain(),s=n[0],l=i[0]+e;return(t?1:-1)*(l>a.range()[1]?n.length:(0,P.invertOrdinalScale)(a,l)-s)+s},r.prototype.clampIndex=function(e){var t=this.fullScale.domain(),a=_.head(t),i=_.last(t);return Math.max(a,Math.min(i,e))},r.prototype.onTimeout=function(){this.totalScrollDistance=0},r.defaultTimeoutMs=1e3,r}(),_e=function(){function r(e){this.settings=e,this.svgAxes=new yr(e),this.navigationHelper=new di}return r.prototype.destroy=function(){var e,t;null===(e=this.scrollableAxes)||void 0===e||e.destroy(),null===(t=this.svgScrollbar)||void 0===t||t.remove(),this.scrollableAxes=void 0,this.svgScrollbar=void 0},r.prototype.update=function(e,t){var a;null===(a=this.svgScrollbar)||void 0===a||a.updateScrollbarOptions(t),this.svgAxes.update(e)},r.prototype.render=function(e,t,a,i,n,s,o,l,u){var c=this,v=this.options=o,m=v.trimOrdinalDataOnOverflow,w=v.categoryLoadMoreDataHandler,C=v.suppressAnimations,D=v.isHierarchicalAxis,O=v.formatMode,F=v.isSelected,N=v.viewMode,U=v.subSelectionHelper,X=v.preserveScrollPosition,re=v.navigationScrollCallbacks,pe=this.options.multipleId||this.settings.multipleId;if(!u&&((u=$i({axesData:e,rendererSettings:this.settings,referenceLines:i,layers:a,viewport:n,playAxesRect:v.playAxesRect,trimOrdinalDataOnOverflow:m,axisZoom:t,rotateXTickLabels90:void 0})).plotArea.width<1||u.plotArea.height<1))return u;if(!this.settings.suppressBrush||!(n.height<1||n.width<1)){a.forEach(function(ke,Ke){var Re,Je;0!==Ke&&u.axes.y2?Je=2:(Je=1,1===a.length&&u.axes.y2&&(Je|=2)),null===(Re=ke.setAxesLayout)||void 0===Re||Re.call(ke,{layout:u,trimOrdinalDataOnOverflow:m,axisType:Je})}),t?.render({axesLayout:u,axesData:e,showTitlePlaceholders:F&&1===N});var q=u.axes.x.isCategoryAxis?u.axes.x:u.axes.y1;w?.setScale(q.scale);var ee=function(Ke){return c.renderAxes((0,d.__assign)((0,d.__assign)({},Ke),{isHierarchicalAxis:D}),o.axesAnimationOptions,Gi(e),s,l,F&&1===N,pe)};T.fF.assert(function(){return!c.svgScrollbar&&!c.scrollableAxes||!(!c.svgScrollbar||!c.scrollableAxes)},"Expect `svgScrollbar` and `scrollableAxes` to have the same state");var ue={axesLayout:u,layers:a,suppressAnimations:C,isHierarchicalAxis:D};return o.supportsScrolling?(this.svgScrollbar||(this.svgScrollbar=new Ut.x({scrollbarWidth:Q.ScrollbarWidth,onExtentUpdate:this.settings.onExtentUpdate}),this.scrollableAxes=new Q(this.settings,this.svgScrollbar),this.svgScrollbar.init(this.settings.container)),this.scrollableAxes.render(ue,ee,X,w,e.hasY2Role,O,U)):(this.destroy(),ee((0,d.__assign)((0,d.__assign)({},ue),{cartesianOptions:this.settings.cartesianOptions}))),this.navigationHelper.updateScrollCallbacks(o.supportsScrolling?re:void 0),this.eventsBoundForAxesLayout!==u&&(this.bindScrollWheelEvents(u,this.settings.container,O,U),this.bindTouchEvents(u,this.settings.container,O,U),this.eventsBoundForAxesLayout=u),u}},r.prototype.renderAxes=function(e,t,a,i,n,s,o){var l,u,c=this.svgAxes.renderAxes((0,d.__assign)((0,d.__assign)({},e),{axesAnimationOptions:t,axesFontProperties:a,shouldRenderGridLinesOnly:this.options.shouldRenderGridLinesOnly,useManagedTabIndex:n,showTitlePlaceholders:s,multipleId:o}));if(c?.navigationOptions&&this.settings.behavior){this.navigationHelper.clearNavigationLayers(),this.navigationHelper.addNavigationLayer(c.navigationOptions.helper);var v={isAxis:!0,navigationOptions:{helper:this.navigationHelper,navigationStrategy:c.navigationOptions.navigationStrategy,focusElement:null===(u=(l=this.navigationHelper).getPendingFocusElement)||void 0===u?void 0:u.call(l)},pointSourceKey:"cartesian-axis".concat(this.settings.multipleId||""),isHierarchicalAxis:e.isHierarchicalAxis};this.settings.interactivityService.bind(c.dataPoints,this.settings.behavior,c.behaviorOptions,v),this.settings.behavior.renderSelection(this.settings.interactivityService.hasSelection())}i(e)},r.prototype.getLayerContainer=function(){return this.svgAxes.getScrollableRegion()},r.prototype.getDataLabelContainers=function(){return this.svgAxes.getLabelsContainers()},r.prototype.getLabelContainerRegion=function(){return this.svgAxes.getLabelContainerRegion()},r.prototype.getSeriesLabelContainers=function(){return this.svgAxes.getSeriesLabelsContainers()},r.prototype.setExtent=function(e){var t;null===(t=this.scrollableAxes)||void 0===t||t.setExtent(e)},r.prototype.scrollDelta=function(e){var t;null===(t=this.scrollableAxes)||void 0===t||t.scrollDelta(e)},r.prototype.scrollTo=function(e){var t;null===(t=this.scrollableAxes)||void 0===t||t.scrollTo(e)},r.prototype.shouldScrollTo=function(e){var t;return null===(t=this.scrollableAxes)||void 0===t?void 0:t.shouldScrollTo(e)},r.prototype.scrollBy=function(e){var t;null===(t=this.scrollableAxes)||void 0===t||t.scrollBy(e)},r.prototype.clearRenderingTimeout=function(){var e;null===(e=this.scrollableAxes)||void 0===e||e.clearRenderingTimeout()},r.prototype.bindTouchEvents=function(e,t,a,i){var n=this,s={x:0,y:0};this.settings.eventManager.on(t.node(),"touchstart",function(){if(0===n.options.viewMode&&Qa(e)){var l=d3.event.changedTouches[0];s.x=l.pageX,s.y=l.pageY}}),this.settings.eventManager.on(t.node(),"touchmove",function(){var o,l,u=null===(o=n.settings.hostServices)||void 0===o?void 0:o.tooltips();if(0===n.options.viewMode&&Qa(e)&&!(u&&u.isTouchScreenOptimizedEnabled()&&u.visible())){a&&i?.onVisualScroll(),n.settings.tooltipService.hide();var c=d3.event,v=c.changedTouches[0],w=e.isXScrollBarVisible?s.x-v.pageX:s.y-v.pageY;n.settings.onScroll?n.settings.onScroll(w):null===(l=n.scrollableAxes)||void 0===l||l.scrollDelta(w),s.x=v.pageX,s.y=v.pageY,c.preventDefault()}})},r.prototype.bindScrollWheelEvents=function(e,t,a,i){var n=this;this.settings.eventManager.on(t.node(),"wheel",function(){var s;if(Qa(e)){a&&i?.onVisualScroll(),n.settings.tooltipService.hide();var o=d3.event,l=o.deltaX,u=o.deltaY,c=Math.abs(l)>Math.abs(u)?l:u;if(n.settings.onScroll){if(n.options.isSmallMultiples&&!o.shiftKey)return;n.settings.onScroll(c)}else null===(s=n.scrollableAxes)||void 0===s||s.scrollDelta(c);o.preventDefault()}})},r}(),Xe=b(58698),st=b(11745),lt=b(63972),pt=b(20624),nt=b(5381),ga=function(){function r(e,t,a,i,n,s,o,l,u,c,v){var y;this.cartesianOptions=e,this.visibilityHelper=t,this.chartAreaSvg=a,this.axesRenderer=i,this.element=n,this.hostServices=s,this.behavior=o,this.interactivityService=l,this.clearCatcher=u,this.initialViewportScale=v,this.dataPointNavigationHelper=new di,null!==(y=this.cartesianOptions)&&void 0!==y&&y.dataPointLassoSelect&&!c&&(this.plotLassoManager=new st.oW(!1),this.plotLassoManager.init([i.getLayerContainer(),u],a,this.hostServices,this.featureSwitches),this.lassoSelectionBehavior=new st.lk(this.behavior),this.plotLassoManager.behaviors.push(this.lassoSelectionBehavior),this.plotLassoManager.setUiScale(this.initialViewportScale))}return Object.defineProperty(r.prototype,"featureSwitches",{get:function(){var t;return(null===(t=this.cartesianOptions)||void 0===t?void 0:t.featureSwitches)||{}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"chartType",{get:function(){var t;return null===(t=this.cartesianOptions)||void 0===t?void 0:t.chartType},enumerable:!1,configurable:!0}),r.prototype.attachToElement=function(e,t){this.element=e;var a=this.chartAreaSvg;a.attrs({width:t.width,height:t.height}),a.node().parentElement!==e.get(0)&&e.append(a.node())},r.prototype.render=function(e,t,a,i,n){var s;this.options=i,this.renderedPlotArea=a,this.cartesianData=t,this.layers=e,null===(s=this.plotLassoManager)||void 0===s||s.setUiScale(n),this.cartesianData&&(this.cartesianData.showIcon?this.visibilityHelper.updateVisibility({showIcon:this.cartesianData.showIcon,viewport:this.options.viewport}):(this.visibilityHelper.updateVisibility({showIcon:this.cartesianData.showIcon}),this.renderCartesianChart()))},r.prototype.destroy=function(){this.axesRenderer.destroy(),this.chartAreaSvg.html(null),(0,St.q5)(this.element)},r.prototype.renderCartesianChart=function(){var e=this,t=this.options,a=!this.renderedPlotArea||this.renderedPlotArea.height!==t.chartAreaViewport.height||this.renderedPlotArea.width!==t.chartAreaViewport.width;this.renderedPlotArea=t.chartAreaViewport,this.axesRenderer.render(this.cartesianData.axesData,this.options.axisZoom,this.layers,this.cartesianData.referenceLines,this.options.chartAreaViewport,function(s){return e.renderPlotArea((0,d.__assign)((0,d.__assign)({},s),{resizeMode:t.resizeMode}))},(0,d.__assign)((0,d.__assign)({},t),{suppressAnimations:t.suppressAnimations||a}),void 0,this.options.axesLayout),this.dataPointNavigationHelper.updateScrollCallbacks(t.supportsScrolling?t.navigationScrollCallbacks:void 0)},r.prototype.getPlotAreaRect=function(e){return{left:e.margin.left+this.options.chartAreaMargins.left,top:e.margin.top+this.options.chartAreaMargins.top,width:e.plotArea.width,height:e.plotArea.height}},r.prototype.renderPlotArea=function(e){var t=e.axesLayout;(0,St.Re)(this.options.background,this.element,this.getPlotAreaRect(t)),(0,At.xw)({graphicContext:this.axesRenderer.getLayerContainer(),axes:t.axes,viewport:t.plotArea,referenceLines:this.cartesianData.referenceLines}),this.renderLayers(e),(0,rt.Zb)(this.cartesianData.trendLines,this.axesRenderer.getLayerContainer(),t.axes,t.plotArea,this.featureSwitches.onObject)},r.prototype.getReferenceLineLabels=function(e,t){return(0,At.TY)({axes:e,viewport:t,referenceLines:this.cartesianData.referenceLines,hostServices:this.hostServices,style:this.options.layerStyle})},r.prototype.getDataLabelLayoutOptions=function(e){var t=(0,nt.n8)(this.chartType);return t.allowLeaderLines=t.allowLeaderLines||e.some(function(a){return a.enableLeaderLines}),t.shrinkLeaderLinesForBestFit=11!==this.chartType,t.drawLeaderLinesIgnoreOffset=11!==this.chartType,t},r.prototype.renderDataLabels=function(e){var t=this.behavior?this.renderLabelsWithInteractiveBehavior(e):this.renderLabelsWithoutInteractiveBehavior(e);return!_.isEmpty(t)||_.every(e.labelDataPointGroups,function(a){return _.isEmpty(a.labelDataPoints)})},r.prototype.renderLabelsWithoutInteractiveBehavior=function(e){var t,s=new lt.nu({maximumOffset:g.wh,startingOffset:g.ki,attemptToMoveLabelsIntoViewport:!0}).layout(e.labelDataPointGroups,e.plotArea);return null!==(t=this.featureSwitches)&&void 0!==t&&t.labelEnhancementsM0?this.renderEnhancedLabels(s,e):this.drawLegacyLabelsAndBackgrounds(s,e),s},r.prototype.drawLegacyLabelsAndBackgrounds=function(e,t){var a=this.axesRenderer.getDataLabelContainers();return(0,nt.gm)({labelContext:a.foreground,dataLabels:e,numeric:t.labelsAreNumeric,backgroundContext:a.background,formatMode:this.options.formatMode,onObject:this.featureSwitches.onObject})},r.prototype.drawLabelContainer=function(e,t){var a=t.labelsAreNumeric,i=this.axesRenderer.getLabelContainerRegion().foreground;return(0,nt.AE)({labelGroupContext:i,labelContainers:e,numeric:a,formatMode:this.options.formatMode,onObject:this.featureSwitches.onObject})},r.prototype.renderEnhancedLabels=function(e,t){var o,a=this.labelInstanceTypeSplitter(e),i=a.labels,n=a.containers,s=this.axesRenderer.getLabelContainerRegion().foreground;return _.isEmpty(n)||(o=this.drawLabelContainer(n,t)),o=this.drawLegacyLabelsAndBackgrounds(i,t),_.isEmpty(n)&&((0,nt.in)(s),(0,nt.$J)(s)),o},r.prototype.renderLabelsWithInteractiveBehavior=function(e){var t,O,a=e.labelDataPointGroups,i=e.plotArea,n=e.suppressAnimations,s=e.animateLabels,o=e.labelsAreNumeric,l=this.options,u=l.formatMode,c=l.labelAnimationOptions,v=this.getDataLabelLayoutOptions(a),m=new lt.nu(v).layout(a,i),w=this.axesRenderer.getDataLabelContainers(),C=w.foreground,D=w.background,F=(0,Bt.ML)(m);if(this.renderLeaderLines(v,m),O=!F&&null!==(t=this.cartesianOptions)&&void 0!==t&&t.animator&&!n&&s?(0,nt.Bf)({labelContext:C,dataLabels:m,duration:c.duration,numeric:o,easeType:c.ease,backgroundContext:D,formatMode:u,onObject:this.featureSwitches.onObject}):this.featureSwitches.labelEnhancementsM0?this.renderEnhancedLabels(m,e):this.drawLegacyLabelsAndBackgrounds(m,e),this.interactivityService&&(this.cartesianOptions.isLabelInteractivityEnabled||u)){var N={labelItems:O};this.interactivityService.bind(m,new Xe.c,N,{isLabels:!0,pointSourceKey:"data-labels",formatMode:u})}return m},r.prototype.labelInstanceTypeSplitter=function(e){for(var t=[],a=[],i=0,n=e;i<n.length;i++){var s=n[i];(0,Bt.CC)(s)?a.push(s):t.push(s)}return{labels:t,containers:a}},r.prototype.renderLeaderLines=function(e,t){var a=this.axesRenderer.getDataLabelContainers().foreground,i=e.allowLeaderLines?t.filter(function(n){return!_.isEmpty(n.leaderLinePoints)&&null!=n.identity}):[];(0,nt.z8)(a,i,function(n){return n.identity.getKey()})},r.prototype.renderSeriesLabels=function(e,t,a,i,n){var s=this.axesRenderer.getSeriesLabelContainers(),o=s.seriesForeground,l=s.seriesBackground,u=new lt.nu({maximumOffset:g.wh,startingOffset:g.ki,attemptToMoveLabelsIntoViewport:!0});(0,nt.Sw)({labelContext:o,dataLabels:u.layout(e,t),backgroundContext:l,availableChartWidth:i,seriesLabelsSettings:a,plotArea:t,formatMode:n,onObject:this.featureSwitches.onObject})},r.prototype.renderLayers=function(e){var t=e.layers,a=e.axesLayout,i=e.suppressAnimations,n=e.resizeMode;T.fF.assertValue(t,"layers");var c,w,C,s=[],o=[],l=[],u=[],v=!0,y=a.axes,m=a.plotArea;i=i||_.some(t,function(q){return q.shouldSuppressAnimation&&q.shouldSuppressAnimation()});for(var D=!0,O=function(ee){var ue=ee.render(i,n,F.options.formatMode);if(ue){if(ue.animateLabels||(D=!1),F.behavior&&(l=l.concat(ue.dataPoints),u.push(ue.behaviorOptions),ue.navigationOptions&&(c?c.navigationOptions.navigationStrategy=j.jN.CategoryFirst:(c={pointSourceKey:"cartesian-layer ".concat(F.options.multipleId||""),navigationOptions:{navigationStrategy:ue.navigationOptions.navigationStrategy,helper:F.dataPointNavigationHelper}},F.dataPointNavigationHelper.clearNavigationLayers()),c.isHierarchicalAxis=F.options.isHierarchicalAxis,F.dataPointNavigationHelper.addNavigationLayer(ue.navigationOptions.helper))),ue.labelDataPointGroups)for(var Ke=0,Re=ue.labelDataPointGroups;Ke<Re.length;Ke++)(Je=Re[Ke])&&s.push((0,d.__assign)((0,d.__assign)({},Je),{labelDataPoints:(0,nt.R1)(Je.labelDataPoints||[]),labelOrientation:Je.isTotal?pt.B.Horizontal:ue.labelOrientation}));else{var Ze=ue.labelDataPoints||[];s.push((0,d.__assign)((0,d.__assign)({},Ze),{labelDataPoints:(0,nt.R1)(Ze),maxNumberOfLabels:Ze.length,labelOrientation:ue.labelOrientation}))}if(ue.labelDataPointSeriesGroups)for(var Lt=0,Xt=ue.labelDataPointSeriesGroups;Lt<Xt.length;Lt++){var Je;(Je=Xt[Lt])&&o.push((0,d.__assign)((0,d.__assign)({},Je),{labelDataPoints:(0,nt.R1)(Je.labelDataPoints||[]),labelOrientation:Je.isTotal?pt.B.Horizontal:ue.labelOrientation}))}v=v&&ue.labelsAreNumeric,F.lassoSelectionBehavior&&(void 0!==ue.categorySubRangeCount&&(void 0===w?w=ue.categorySubRangeCount:T.fF.assert(function(){return ue.categorySubRangeCount===w},"categorySubRangeCount should match between layers")),void 0!==ue.verticalCategoryAxis&&(void 0===C?C=ue.verticalCategoryAxis:T.fF.assert(function(){return ue.verticalCategoryAxis===C},"verticalCategoryAxis should match between layers")))}},F=this,N=0,U=t;N<U.length;N++)O(U[N]);var re=this.getReferenceLineLabels(y,m);_.isEmpty(re)||s.unshift({labelDataPoints:re,maxNumberOfLabels:re.length});var pe={labelDataPointGroups:s,labelsAreNumeric:v,plotArea:m,suppressAnimations:i,isCombo:(0,p.LQ)(this.chartType),animateLabels:D};this.noLabelsCanBeRendered=!this.renderDataLabels(pe),this.renderSeriesLabels(o,m,Et(t,this.chartType),Di(a).width,this.options.formatMode),this.dataPointNavigationHelper.getPendingFocusElement&&c&&(c.navigationOptions.focusElement=this.dataPointNavigationHelper.getPendingFocusElement()),this.interactivityService&&this.interactivityService.bind(l,this.behavior,{layerOptions:u,clearCatcher:this.clearCatcher,root:this.chartAreaSvg,axesLayout:a,categorySubRangeCount:w,verticalCategoryAxis:C},c)},r}(),la=b(14599),wa=b(61297),Ja=b(32476),_a=b(66001),Va=function(){function r(){var e;this.unSyncedLayout=[],this.maxMargin={top:0,bottom:0,left:0,right:0},this.axesRenderersByPosition=((e={})[2]=[],e[0]=[],e[1]=[],e)}return r.prototype.update=function(e,t,a,i,n,s,o){this.settings=e,this.coreMultiple=o,this.renderOptions=a,this.maxMargin={bottom:0,left:0,right:0,top:0},this.unSyncedLayout=[];var l=_.clone(this.getCoreMultipleData()),u=this.coreMultiple.layers;if(!this.shouldShareAxis()){for(var c=0,v=t;c<v.length;c++){var y=v[c],m=y.getData(),w=y.layers;m.axesData.x.showAxisTitle=!1,m.axesData.y.showAxisTitle=!1,m.axesData.y2.showAxisTitle=!1,l.axesData.y.sharedAxis||(m.axesData.x.show=!1),l.axesData.x.sharedAxis||(m.axesData.y.show=!1);var C=$i({axesData:m.axesData,rendererSettings:this.settings,referenceLines:m.referenceLines,layers:w,viewport:i,playAxesRect:this.renderOptions.playAxesRect,trimOrdinalDataOnOverflow:this.renderOptions.trimOrdinalDataOnOverflow,axisZoom:void 0,rotateXTickLabels90:!0});this.unSyncedLayout.push(C),C.margin.left>=this.maxMargin.left&&(this.maxMargin.left=C.margin.left),C.margin.right>=this.maxMargin.right&&(this.maxMargin.right=C.margin.right),C.margin.top>=this.maxMargin.top&&(this.maxMargin.top=C.margin.top),C.margin.bottom>=this.maxMargin.bottom&&(this.maxMargin.bottom=C.margin.bottom)}(l=_.clone(t[0].getData())).axesData.x.showAxisTitle=this.getCoreMultipleData().axesData.x.showAxisTitle,l.axesData.y.showAxisTitle=this.getCoreMultipleData().axesData.y.showAxisTitle,l.axesData.y.sharedAxis||(l.axesData.x.show=this.getCoreMultipleData().axesData.x.show,l.axesData.y.show=!1,l.axesData.y2&&(l.axesData.y2.show=!1,l.axesData.y2.showAxisTitle=this.getCoreMultipleData().axesData.y.showAxisTitle)),l.axesData.x.sharedAxis||(l.axesData.x.show=!1,l.axesData.y.show=this.getCoreMultipleData().axesData.y.show)}return this.generateSharedAxisLayout(l,u,i,n,s),this.unSyncedLayout},r.prototype.generateSharedAxisLayout=function(e,t,a,i,n){this.layout=$i({axesData:e.axesData,rendererSettings:this.settings,referenceLines:e.referenceLines,layers:t,viewport:a,playAxesRect:this.renderOptions.playAxesRect,trimOrdinalDataOnOverflow:this.renderOptions.trimOrdinalDataOnOverflow,axisZoom:void 0,rotateXTickLabels90:!0,forceMarginMin:this.shouldShareAxis()?void 0:(0,d.__assign)({},this.maxMargin)}),this.clearUnusedRenderers(i,n,this.layout.shouldRenderAxis,this.layout)},r.prototype.getCoreMultipleData=function(){return this.coreMultiple.getData()},r.prototype.shouldShareAxis=function(){return this.getCoreMultipleData().axesData.x.sharedAxis&&this.getCoreMultipleData().axesData.y.sharedAxis},r.prototype.clearUnusedRenderers=function(e,t,a,i){this.destroyUnusedRenderers(e=a.x||i.isXScrollBarVisible?e:0,2);var n=a.y||i.isYScrollBarVisible?t:0,s=this.shouldRenderYAxis(0,this.settings.data.y.switchAxisPosition)?0:1;this.destroyUnusedRenderers(n,s),this.destroyUnusedRenderers(a.y2||i.isYScrollBarVisible?t:0,0===s?1:0)},r.prototype.destroyUnusedRenderers=function(e,t){var a=this.axesRenderersByPosition[t];_.isEmpty(a)||a.length<=e||(a.slice(e,a.length).forEach(function(i){return i.destroy()}),this.axesRenderersByPosition[t]=a.slice(0,e))},r.prototype.calculateAxesLayout=function(e){return this.shouldShareAxis()||void 0===e?this.calculateSynchronizedAxesLayout():void 0!==e?this.calculateUnSynchronizedAxesLayout(e):this.layout},r.prototype.calculateSynchronizedAxesLayout=function(){var e=_.cloneDeep(this.layout);return(0,xe.Zx)(this.layout,e),e.axes.x.scale=this.layout.axes.x.scale.copy(),e.axes.y1.scale=this.layout.axes.y1.scale.copy(),e.axes.y2&&(e.axes.y2.scale=this.layout.axes.y2.scale.copy()),e},r.prototype.calculateUnSynchronizedAxesLayout=function(e){var t,a=_.cloneDeep(this.unSyncedLayout[e]);(0,xe.Zx)(this.unSyncedLayout[e],a);var i=a.axes.x,n=a.axes.y1,s=a.plotArea=this.layout.plotArea,o=this.getCoreMultipleData().axesData,l=this.layout.tickLabelMargins.axesOverflow,u=a.tickLabelMargins.axesOverflow;if(!o.y.sharedAxis){i.outerPadding=this.layout.axes.x.outerPadding,i.outerPaddingRatio=this.layout.axes.x.outerPaddingRatio,i.xLabelMaxWidth=this.layout.axes.x.xLabelMaxWidth,i.categoryThickness=this.layout.axes.x.categoryThickness,a.isXScrollBarVisible=this.layout.isXScrollBarVisible;var c=l.bottom+l.top-(u.bottom+u.top);if((v=n.scale).range(n.invertAxis?[1,s.height+c-1]:[s.height+c-1,1]),i.scale=this.layout.axes.x.scale.copy(),a.axes.y2)a.axes.y2.scale.range(n.invertAxis?[1,s.height+c-1]:[s.height+c-1,1]);a.margin.left=Math.max(this.maxMargin.left,a.margin.left),a.margin.right=Math.max(this.maxMargin.right,a.margin.right)}if(!o.x.sharedAxis){n.outerPadding=this.layout.axes.y1.outerPadding,n.outerPaddingRatio=this.layout.axes.y1.outerPaddingRatio,n.xLabelMaxWidth=this.layout.axes.y1.xLabelMaxWidth,n.categoryThickness=this.layout.axes.y1.categoryThickness,a.isYScrollBarVisible=this.layout.isYScrollBarVisible;var v,m=l.left+l.right-(u.left+u.right);if(i.scale.range(i.invertAxis?[s.width+m-1,1]:[1,s.width+m-1]),!o.x.show)if((0,Y._9)(v=n.scale))v.range([0,a.plotArea.height]),v.paddingOuter(n.outerPaddingRatio);else{var C=null!==(t=n.outerPadding)&&void 0!==t?t:0;v.range([a.plotArea.height-C,C])}a.margin.bottom=Math.max(this.maxMargin.bottom,a.margin.bottom),a.margin.top=Math.max(this.maxMargin.top,a.margin.top)}return a},r.prototype.renderAxes=function(e){if(!(e.viewport.height<1||e.viewport.width<1)){var t=(0,p.MI)(e.element,e.viewport),a=this.getCoreMultipleData();this.getAxesRenderer(t.element,e.position,e.index,a).render(a.axesData,void 0,this.coreMultiple.layers,a.referenceLines,e.viewport,function(){},(0,d.__assign)((0,d.__assign)({},this.renderOptions),{supportsScrolling:this.shouldSupportScrolling(a,e.position),formatMode:this.settings.formatMode,isSelected:this.settings.isSelected,subSelectionHelper:void 0,multipleId:void 0,playAxesRect:void 0}),this.renderOptions.isSmallMultiples,this.updateAxesLayoutByPosition(e))}},r.prototype.scrollDelta=function(e,t){this.updateScrollState(function(a){return a.scrollDelta(e)},t)},r.prototype.scrollTo=function(e,t){this.updateScrollState(function(a){return a.scrollTo(e)},t)},r.prototype.scrollBy=function(e,t){this.updateScrollState(function(a){return a.scrollBy(e)},t)},r.prototype.updateScrollbarExtent=function(e,t){this.updateScrollState(function(a){return a.setExtent(e)},t)},r.prototype.updateScrollState=function(e,t){var a=this.getCoreMultipleData(),i=this.getScrollablePosition(a);T.fF.assertValue(i,"scrollablePosition");var n=this.axesRenderersByPosition[i];2!==i&&_.isEmpty(t)||_.isEmpty(n)||n.forEach(function(s,o){2!==i&&(o<t.startIndex||o>t.endIndex)||e(s)})},r.prototype.updateAxesLayoutByPosition=function(e){var t=e.position,a=e.viewport,i=this.calculateAxesLayout(),n=i.scrollHandleMargins;i.viewport=n?{width:a.width-(n.left+n.right),height:a.height-(n.top+n.bottom),scale:a.scale}:a,i.preferredPlotArea={width:0,height:0};var s=this.getCoreMultipleData();return 2===t?(i.margin=this.getMarginByPosition(i.margin,t,i.tickLabelMargins.axesOverflow),!s.axesData.y.sharedAxis&&s.axesData.y.show&&(i.margin.left=this.layout.margin.left,i.shouldRenderAxis.y=!1),s.axesData.x.sharedAxis||(i.margin.bottom=this.layout.margin.bottom),this.shouldShareAxis()&&(i.shouldRenderAxis.y=!1),i.shouldRenderAxis.y2=!1,i.shouldRenderAxis.y=!1,i.axisLabels.y=null,i.axisLabels.y2=null,i.plotArea.height=0,i):(i.plotArea.width=0,i.margin=this.getMarginByPosition(i.margin,t,i.tickLabelMargins.axesOverflow),i.shouldRenderAxis.x=!1,i.axisLabels.x=null,this.shouldRenderYAxis(t,this.settings.data.y.switchAxisPosition)?(i.axisLabels.y2=null,i.shouldRenderAxis.y2=!1):(i.shouldRenderAxis.y=!1,i.axisLabels.y=null),i)},r.prototype.destroy=function(){var e=this;this.executeActionByPosition(this.axesRenderersByPosition,function(t,a){_.isEmpty(t)||(t.forEach(function(i){return i.destroy()}),e.axesRenderersByPosition[a]=[])})},r.prototype.executeActionByPosition=function(e,t){for(var a in this.axesRenderersByPosition)t(e[a],a)},r.prototype.clearRenderingTimeout=function(){this.executeActionByPosition(this.axesRenderersByPosition,function(e){_.isEmpty(e)||e.forEach(function(t){return t.clearRenderingTimeout()})})},r.prototype.shouldRenderYAxis=function(e,t){return 0===e&&!t||1===e&&t},r.prototype.getMarginByPosition=function(e,t,a){var i=(0,xe.ED)(a);return 2===t?(i.bottom=e.bottom,i.top=0,i):(i.left=0,i.right=0,0===t?i.left=e.left:1===t&&(i.right=e.right),i)},r.prototype.getScrollablePosition=function(e){var t;return this.layout.isYScrollBarVisible?null!==(t=e.axesData.y)&&void 0!==t&&t.switchAxisPosition?1:0:this.layout.isXScrollBarVisible?2:void 0},r.prototype.shouldSupportScrolling=function(e,t){return this.getScrollablePosition(e)===t},r.prototype.getAxesRenderer=function(e,t,a,i){var n=$(e.node()),s=n.data("CartesianAxesRenderer");if(s)s.update(i.axesData,i.scrollbarOptions);else{var o=(0,d.__assign)((0,d.__assign)({},this.settings),{container:e,multipleId:"".concat(a),behavior:new Aa});o.data.useManagedTabIndex=!0,this.axesRenderersByPosition[t][a]=s=new _e(o),n.data("CartesianAxesRenderer",s)}return s},r}(),ji=b(39071),qi="multiple",yi=function(){function r(e,t,a,i,n,s,o,l,u,c,v,y){var m,w;this.interactivityService=t,this.getLocalizedString=a,this.cartesianOptions=n,this.layerStyle=s,this.viewMode=o,this.buildPlotAreaLayout=l,this.renderMultiple=u,this.adapterFactory=c,this.visualInstanceId=v,this.sharedAxisLayout=new Va,this.gridLayout=new Ja.Me(e,function(){return i.loadMoreData()},null===(m=this.cartesianOptions)||void 0===m?void 0:m.isScrollable,t,y,qi,null===(w=this.cartesianOptions)||void 0===w?void 0:w.featureSwitches),this.visibilityHelper=(0,fa.q)().visibilityHelper(e,r.IconClassName)}return r.prototype.render=function(e){var t=this;this.clearRenderingTimeout();var a=e.cartesianSmallMultipleFactory;this.options=e;var i=e.cartesianSmallMultipleFactory,n=this.adapterFactory(),s=n.getMultiplesSubheader(e.warnings);T.fF.assertValue(n,"smallMultipleAdapter");var l=this.multiplesLayout=n.getMultiplesLayout(e.warnings),u=l.showIcon;if(this.visibilityHelper.updateVisibility({showIcon:u,viewport:e.viewport}),!u){var v={categoryLoadMoreDataHandler:e.categoryLoadMoreDataHandler,playAxesRect:e.playAxesRect,trimOrdinalDataOnOverflow:e.trimOrdinalDataOnOverflow,suppressAnimations:e.suppressAnimations,resizeMode:e.resizeMode,rowCount:l.rowCount,columnCount:l.columnCount,getCellBackgroundColor:function(m){return t.getColorFromMultipleObjects(m,la.e0.smallMultiplesBackgroundColor,t.multiplesLayout.backgroundColor)},backgroundTransparency:l.backgroundTransparency,isHierarchicalAxis:e.isHierarchicalAxis,gridline:l.gridline,cellPadding:{top:l.rowPaddingInner,bottom:0,left:l.columnPaddingInner,right:0},outerPadding:{top:l.rowPaddingOuter,bottom:l.rowPaddingOuter,left:l.columnPaddingOuter,right:l.columnPaddingOuter}};return this.cellDimensions&&(this.cellDimensions.maxSubheaderHeight=void 0),this.renderGridLayout(a,e.viewport,function(m){return t.renderGridCell(i,m,e.background,e.playAxesRect,e.suppressAnimations,e.resizeMode,e.trimOrdinalDataOnOverflow,e.categoryLoadMoreDataHandler,e.isHierarchicalAxis,!0,e.formatMode)},function(m){return t.renderGridCellSubheader(m,i,s)},s,v,e.axisRendererSettings.axes.isYAxisCategorical)}},r.prototype.clearRenderingTimeout=function(){this.sharedAxisLayout.clearRenderingTimeout(),this.gridLayout.clearRenderingTimeout()},r.prototype.destroy=function(){this.gridLayout.destroy(),this.sharedAxisLayout.destroy()},r.prototype.onScroll=function(e){this.sharedAxisLayout.scrollDelta(e,this.gridLayout.getScrollPosition()),this.options.cartesianSmallMultipleFactory.scrollDelta(e,this.getVisibleMultiples())},r.prototype.onExtentUpdate=function(e){this.sharedAxisLayout.updateScrollbarExtent(e,this.gridLayout.getScrollPosition()),this.options.cartesianSmallMultipleFactory.updateScrollbarExtent(e,this.getVisibleMultiples())},r.prototype.scrollTo=function(e){this.sharedAxisLayout.scrollTo(e,this.gridLayout.getScrollPosition()),this.options.cartesianSmallMultipleFactory.scrollTo(e,this.getVisibleMultiples())},r.prototype.shouldScrollTo=function(e){return this.options.cartesianSmallMultipleFactory.shouldScrollTo(e,this.getVisibleMultiples())},r.prototype.scrollBy=function(e){this.sharedAxisLayout.scrollBy(e,this.gridLayout.getScrollPosition()),this.options.cartesianSmallMultipleFactory.scrollBy(e,this.getVisibleMultiples())},r.adjustAxesMarginsForShared=function(e,t,a){var i,n,s,o=e.axesMargins,l=e.titleMargins,u=e.scrollHandleMargins,c=e.shouldRenderAxis,v=e.axes;function y(O,F,N){return F||O&&null!=O.axisLabel&&N}var m=y(v?.y1,c.y,a.y),w=y(v?.y2,c.y2,a.y2),D={bottom:y(v?.x,c.x,a.x)?o.bottom:0,top:0,left:0,right:0};return t?(m&&(D.right=c.y?o.right:l.right),w&&(D.left=c.y2?o.left:l.left)):(m&&(D.left=c.y?o.left:l.left),w&&(D.right=c.y2?o.right:l.right)),{left:D.left+(null!==(i=u?.left)&&void 0!==i?i:0),right:D.right+(null!==(n=u?.right)&&void 0!==n?n:0),bottom:D.bottom+(null!==(s=u?.bottom)&&void 0!==s?s:0),top:0}},r.prototype.getVisibleMultiples=function(){var e=this.options.cartesianSmallMultipleFactory.getFrameCount(),t=this.gridLayout.getScrollPosition();return t?{startIndex:t.startIndex*this.multiplesLayout.columnCount,endIndex:Math.min(t.endIndex*this.multiplesLayout.columnCount,e)}:{startIndex:0,endIndex:0}},r.prototype.calculatePlotArea=function(e){var t,a,i=r.adjustAxesMarginsForShared(e,this.options.axesData.y.switchAxisPosition,ki(this.options.axesData,void 0));this.gridLayout.updateHeaderMargins(i);var n=null!==(a=null===(t=this.adapterFactory())||void 0===t?void 0:t.getMultiplesSubheader(this.options.warnings))&&void 0!==a?a:(0,p.yA)(this.options.cartesianSmallMultipleFactory.getObjects(),this.layerStyle),s=(0,d.__assign)({},e.axesOverflow);if((!this.options.axesData.y.sharedAxis||!this.options.axesData.x.sharedAxis)&&this.sharedAxisLayout.getCoreMultipleData().axesData.valueAxis.show){var o=e.axesMargins;this.options.axesData.y.sharedAxis||(s.left=Math.max(o.left,s.left),s.right=Math.max(o.right,s.right)),this.options.axesData.x.sharedAxis||(s.bottom=Math.max(o.bottom,s.bottom),s.top=Math.max(o.top,s.top))}return this.cellDimensions=this.gridLayout.calculateCellDimensions(s,{titleWrap:n.titleWrap,subheaders:n.titleWrap?this.getFrameDisplayNames():void 0,subheaderFontProperties:n.fontProperties,subheaderLineHeight:n.height,subheaderMargin:n.margins},e),this.cellDimensions.plotAreaViewport},r.prototype.scrollRowsTo=function(e){T.fF.assertValue(this.gridLayout,"grid layout"),this.gridLayout.scrollTo(e)},r.prototype.getFrameDisplayNames=function(){var e=this.getLocalizedString("ListJoin_Separator"),t=this.options.cartesianSmallMultipleFactory.reader.getFrameDisplayNames();return t&&t.map(function(a){return a.join(e)})},r.prototype.renderGridLayout=function(e,t,a,i,n,s,o){var l,u;return(0,d.__awaiter)(this,void 0,void 0,function(){var c,v,y,m,w,C,D,O,F,N,X,re,pe,q,ee,ue,ke=this;return(0,d.__generator)(this,function(Ke){return c=this.getAxesRenderOptions(s),v=e.getFrameCount(),y=e.getCoreMultiple(),m=e.getShouldResetRowMultipleScrollPosition(),D=s.getCellBackgroundColor,O=s.backgroundTransparency,F=s.cellPadding,N=s.outerPadding,re=n.show,pe=n.height+(X=n.margins).top+X.bottom,q={rowCount:w=s.rowCount,columnCount:C=s.columnCount,viewport:t,renderCell:function(Je){return(0,d.__awaiter)(ke,void 0,void 0,function(){return(0,d.__generator)(this,function(Ze){return a(Je),[2,new Promise(function(Lt){return Lt()})]})})},renderCellSubheader:function(Je){return(0,d.__awaiter)(ke,void 0,void 0,function(){return(0,d.__generator)(this,function(Ze){return i(Je),[2,new Promise(function(Lt){return Lt()})]})})},cellCount:v,headerMargins:(0,p.rX)(),renderHeader:function(){},subheaderShow:re,subheaderHeight:(null===(l=this.cellDimensions)||void 0===l?void 0:l.maxSubheaderHeight)||pe,subheaderLineHeight:n.height,subheaderPosition:1!==n.vertical?0:1,shouldResetScrollPosition:m,cellPadding:F,outerPadding:N,scrollPadding:5,getCellBackgroundColor:D,backgroundTransparency:O,gridLineSettings:s.gridline,getAllCells:function(){return e.multiples},manageTabIndexOnRowHeaderFooter:o,boldedSubheaders:n.labelBold},this.gridLayout.update(q),ee=Math.ceil(v/C),this.sharedAxisLayout.update(this.options.axisRendererSettings,e.multiples,c,t,C,Math.max(ee,w),y),q.renderHeader=function(Re){return ke.sharedAxisLayout.renderAxes(Re)},q.headerMargins=this.cellDimensions.headerMargins,q.subheaderHeight=(null===(u=this.cellDimensions)||void 0===u?void 0:u.maxSubheaderHeight)||pe,this.gridLayout.update(q),ue=_.map(e.multiples,function(Re){return Re.getDataPoint()}),[2,this.gridLayout.render({calculatedCellDimensions:this.cellDimensions,dataToBind:ue,pointSourceKey:"multiples",visualInstanceId:this.visualInstanceId,formatMode:this.options.formatMode,subSelectionHelper:this.options.subSelectionHelper})]})})},r.prototype.renderGridCellSubheader=function(e,t,a){var i,n=e.element,s=e.index,o=e.viewport;if(!_.isUndefined(s)){var l=1===a.horizontal?"center":2===a.horizontal?"right":"left",u=this.getSubheaderFontProperties(s,a.fontProperties);n.css((0,J.wB)(u)),n.css({padding:"".concat(a.margins.top,"px ").concat(a.margins.right,"px ").concat(a.margins.bottom,"px ").concat(a.margins.left,"px "),"text-align":l});var c=this.getLocalizedString("ListJoin_Separator"),v=this.options.cartesianSmallMultipleFactory.reader.getDisplayNameForFrame(s),y=v&&v.join("".concat(c));if(n.attr("title",y),n.attr("id","".concat(this.visualInstanceId,"-").concat(s)),n.empty(),a.titleWrap&&(null===(i=this.cellDimensions)||void 0===i?void 0:i.maxSubheaderHeight)>a.height+a.margins.top+a.margins.bottom)for(var m=(0,J.qk)(u),C=(0,_a.ql)(y,m,te.b.measureSvgTextWidth,o.width,Ja.ji,null,!0),D=0;D<C.length;D++){var O=C[D],F=$("<div/>").text(O);D===C.length-1&&F.addClass("truncate"),n.append(F)}else n.text(y);if(this.interactivityService){var N=t.get(s),U=n.closest(ji.bL.selector);e.styleSubheader(U,N,a.labelBold)}}},r.prototype.getSubheaderFontProperties=function(e,t){var a=this.getColorFromMultipleObjects(e,{objectName:wa.XG,propertyName:"fontColor"});return null==a?t:(0,J.ED)(t,{color:a})},r.prototype.getColorFromMultipleObjects=function(e,t,a){var i;if(null!=e){var n=null===(i=this.options.cartesianSmallMultipleFactory.reader.getFrameNode(e))||void 0===i?void 0:i.objects;if(n){var s=(0,A.W7)(n,t);if(s)return s}}return a},r.prototype.getAxesRenderOptions=function(e){var t=this;return(0,d.__assign)((0,d.__assign)({},e),{axesAnimationOptions:this.options.animationSettings,viewMode:this.viewMode,isSmallMultiples:!0,preserveScrollPosition:!0,navigationScrollCallbacks:{scrollTo:function(i){return t.scrollTo(i)},shouldScrollTo:function(i){return t.shouldScrollTo(i)},scrollBy:function(i){return t.scrollBy(i)}}})},r.prototype.renderGridCell=function(e,t,a,i,n,s,o,l,u,c,v){var y,m=t.viewport,w=e.get(t.index);if(2&w.getState())w.getRenderer().attachToElement(t.element,t.viewport);else{var C=(0,p.MI)(t.element,m),D=C.element,O=null===(y=this.cartesianOptions.behaviorFactory)||void 0===y?void 0:y.create();w.initRenderer(this.buildPlotAreaLayout(!0,D,C.clearCatcher,t.element,O))}if(this.interactivityService){var F=t.element.closest(ji.bL.selector);t.bindDataToGridCell(F,w,qi)}this.renderMultiple({multiple:w,viewport:m,background:a,axisZoom:void 0,chartAreaViewport:m,chartAreaMargins:(0,p.rX)(),renderedViewport:m,playAxesRect:i,suppressAnimations:n,resizeMode:s,trimOrdinalDataOnOverflow:o,categoryLoadMoreDataHandler:l,isSharedAxis:!0,isHierarchicalAxis:u,preserveScrollPosition:c,supportsScrolling:!0,axesLayout:this.sharedAxisLayout.calculateAxesLayout(w.index),formatMode:v})},r.IconClassName="cartesianChartResponsiveIcon",r}(),cr=b(67174),hn=function(){function r(e,t,a,i){this.options=e,this.axes=t,this.isPlayAxis=a,this.adapterFactory=i}return r.prototype.init=function(e,t,a,i,n,s,o,l){this.initOptions=e,this.tooltipService=t,this.legend=a,this.axesData=i,this.interactivityService=n,this.layerStyle=s,this.rowLoadMoreDataHandler=o,this.eventManager=l},r.prototype.create=function(e){var t=new Tn(this.options,this.axes,this.isPlayAxis,this.axesData,this.adapterFactory);return t.init(e,this.initOptions,this.tooltipService,this.legend,this.interactivityService,this.layerStyle,this.rowLoadMoreDataHandler,this.eventManager),t},r}(),vn=function(){function r(e,t,a,i,n){this.legend=e,this.data=t,this.viewport=a,this.interactivity=i,this.showTitlePlaceholder=n}return r.prototype.render=function(e,t,a){if(this.shouldRender()){var i=this.data;this.legend.setPosition(i.position),1===i.dataPoints.length&&!i.grouped&&((i=(0,xe.ED)(i)).dataPoints=[]),this.legend.drawLegend({data:i,parentViewport:this.viewport,isHierarchicalAxis:e,formatMode:t,onObject:a,titleSliceUid:"".concat("legend","-").concat("title","-titleText"),showTitlePlaceholder:this.showTitlePlaceholder})}},r.prototype.shouldRender=function(){var e;return!(null!==(e=this.interactivity)&&void 0!==e&&e.mobileTileInteractive)},r.prototype.getMargin=function(){return this.legend.getMargins()},r.prototype.getPosition=function(){return this.legend.getPosition()},r.prototype.adjustChartArea=function(e){(0,aa.xz)(e,this.legend)},r.prototype.isRenderedLeftOrRight=function(){return this.legend.isVisible()&&(0,aa.cB)(this.legend.getPosition())},r}(),Tn=function(){function r(e,t,a,i,n){this.cartesianOptions=e,this.axes=t,this.isPlayAxis=a,this.axesData=i,this.adapterFactory=n,this.viewMode=0,T.fF.assertValue(e,"CartesianChartLayout.cartesianOptions")}return Object.defineProperty(r.prototype,"featureSwitches",{get:function(){return this.cartesianOptions.featureSwitches||{}},enumerable:!1,configurable:!0}),r.prototype.init=function(e,t,a,i,n,s,o,l){var u,c;this.options=t,this.tooltipService=a,this.legend=i,this.interactivityService=n,this.layerStyle=s,this.element=e,this.rowLoadMoreDataHandler=o,this.eventManager=l,this.hostServices=t.host,this.gridContainer=$(document.createElement("div")).appendTo(this.element),this.gridContainer.addClass(r.GridContainerClassName),this.behavior=null===(u=this.cartesianOptions.behaviorFactory)||void 0===u?void 0:u.create(),this.visibilityHelper=(0,fa.q)().visibilityHelper(this.element,r.IconClassName);var v=d3.select(this.element.get(0)),y=this.chartAreaSvg=v.append("svg");y.classed(p.Sq,!0),y.attr("name",this.getCartesianChartName()),y.style("position","absolute"),!(null===(c=t.featureSwitches)||void 0===c)&&c.onObject&&y.attr(We.oy,0),this.behavior&&(this.clearCatcher=(0,j.EX)(y),this.categoricalAxisBehavior=new Aa),this.viewMode=this.hostServices.getViewMode()},r.prototype.getCartesianChartName=function(){var e;switch(this.cartesianOptions.chartType){case 0:case 15:e="LineChart_ToolTip";break;case 1:e="AreaChart_ToolTip";break;case 2:e="StackedAreaChart_ToolTip";break;case 3:e="HundredPercentStackedAreaChart_ToolTip";break;case 4:e="ClusteredColumnChart_ToolTip";break;case 5:e="ColumnChart_ToolTip";break;case 6:e="ClusteredBarChart_ToolTip";break;case 7:e="BarChart_ToolTip";break;case 8:e="HundredPercentStackedBarChart_ToolTip";break;case 9:e="HundredPercentStackedColumnChart_ToolTip";break;case 10:e="RibbonChart_ToolTip";break;case 11:e="ScatterChart_ToolTip";break;case 12:e="WaterfallChart_ToolTip";break;case 13:e="LineClusteredColumnComboChart_ToolTip";break;case 14:e="LineStackedColumnComboChart_ToolTip";break;default:e="Chart"}return this.hostServices.getLocalizedString(e)},r.prototype.render=function(e,t,a,i,n,s,o,l,u,c,v,y,m){return(0,d.__awaiter)(this,void 0,void 0,function(){var w,C,O,F,N,U,X;return(0,d.__generator)(this,function(re){switch(re.label){case 0:return this.cartesianSmallMultipleFactory=e,this.viewportScale=t.scale,e.clearRenderingTimeout(),w=e.getCoreMultiple(),(C=w.getData())?(this.axesData=C.axesData,this.formatMode=c,this.isSelected=y,X=this.renderLegend(C.legendData,t,l,c,this.featureSwitches.onObject),F=X[1],this.chartAreaViewport={height:t.height-(O=X[0]).height,width:t.width-O.width,scale:t.scale},N=n.renderContainers(this.chartAreaViewport,this.axesData,this.isPlayAxis()?r.PlayAxisBottomMargin:0,this.featureSwitches),this.legendRenderer.adjustChartArea(n.context),this.positionChartArea(O,F,this.isPlayAxis(),N),U=this.calculatePlayAxisControlLayout(this.chartAreaViewport,O,this.legendRenderer.getPosition(),N),e.isSmallMultiples()?[3,1]:(this.cartesianSmallMultiplesLayout&&(this.cartesianSmallMultiplesLayout.destroy(),this.cartesianSmallMultiplesLayout=void 0),this.setGridContainerVisibility(!1),2&w.getState()||w.initRenderer(this.buildPlotAreaLayout(!1)),this.renderMultiple({multiple:w,viewport:t,background:i,axisZoom:n,chartAreaViewport:this.chartAreaViewport,chartAreaMargins:this.chartAreaMargins,renderedViewport:this.renderedPlotArea,playAxesRect:U,suppressAnimations:o,resizeMode:m,trimOrdinalDataOnOverflow:s,categoryLoadMoreDataHandler:a,isSharedAxis:!1,isHierarchicalAxis:l,preserveScrollPosition:u,supportsScrolling:!0,formatMode:c,isSelected:y,subSelectionHelper:v}),[3,3])):[2];case 1:return this.setGridContainerVisibility(!0),this.adjustGridContainer(this.chartAreaViewport),this.cartesianSmallMultiplesLayout=this.cartesianSmallMultiplesLayout||this.createSmallMultiplesLayout(),[4,this.cartesianSmallMultiplesLayout.render({viewport:this.chartAreaViewport,axisRendererSettings:this.getAxisRendererSettings(this.chartAreaSvg,!0,!1),cartesianSmallMultipleFactory:e,axesData:this.axesData,animationSettings:this.getAnimationOptions(!0),background:i,playAxesRect:U,suppressAnimations:!0,resizeMode:m,isHierarchicalAxis:l,trimOrdinalDataOnOverflow:s,categoryLoadMoreDataHandler:a,warnings:C.warningObjectCollection,formatMode:c,subSelectionHelper:v})];case 2:re.sent(),re.label=3;case 3:return this.featureSwitches.onObject&&v.addDirectEditPlaceholderOutlines(),[2]}})})},r.prototype.setGridContainerVisibility=function(e){this.gridContainer.css("display",e?"":"none")},r.prototype.scrollRowsTo=function(e){T.fF.assertValue(this.cartesianSmallMultiplesLayout,"multiple layout"),this.cartesianSmallMultiplesLayout.scrollRowsTo(e)},r.prototype.destroy=function(){this.cartesianSmallMultiplesLayout&&this.cartesianSmallMultiplesLayout.destroy()},r.prototype.positionChartArea=function(e,t,a,i){this.chartAreaMargins=(0,p.rX)(),(0,aa.nM)(t)&&(this.chartAreaMargins.left=e.width),(0,aa.RB)(t)&&(this.chartAreaMargins.top=e.height),a&&(this.chartAreaViewport.height-=r.PlayAxisBottomMargin),i&&(this.chartAreaViewport.height-=i.top+i.bottom,this.chartAreaViewport.width-=i.left+i.right,this.chartAreaMargins.left=(this.chartAreaMargins.left||0)+i.left,this.chartAreaMargins.top=(this.chartAreaMargins.top||0)+i.top),this.chartAreaSvg.attrs({width:this.chartAreaViewport.width,height:this.chartAreaViewport.height}).styles({"margin-top":this.chartAreaMargins.top?"".concat(this.chartAreaMargins.top,"px"):null,"margin-left":this.chartAreaMargins.left?"".concat(this.chartAreaMargins.left,"px"):null})},r.prototype.createSmallMultiplesLayout=function(){var e=this;return new yi(this.gridContainer,this.interactivityService,function(t){return e.hostServices.getLocalizedString(t)},this.rowLoadMoreDataHandler,this.cartesianOptions,this.layerStyle,this.viewMode,this.buildPlotAreaLayout.bind(this),this.renderMultiple.bind(this),this.adapterFactory,this.hostServices.instanceId,this.eventManager)},r.prototype.adjustGridContainer=function(e){this.gridContainer.css({width:e.width,height:e.height}),this.legendRenderer.adjustChartArea(d3.select(this.gridContainer.get(0)))},r.prototype.getVisibleMultiples=function(){return this.cartesianSmallMultiplesLayout?this.cartesianSmallMultiplesLayout.getVisibleMultiples():{startIndex:0,endIndex:1}},r.prototype.isSmallMultiples=function(){var e,t;return null!==(t=null===(e=this.cartesianSmallMultipleFactory)||void 0===e?void 0:e.isSmallMultiples())&&void 0!==t&&t},r.prototype.renderMultiple=function(e){var t=this,a=(0,d.__assign)((0,d.__assign)({},e),{axesLayout:void 0,labelAnimationOptions:this.getLabelAnimationOptions(e.suppressAnimations),axesAnimationOptions:this.getAnimationOptions(e.suppressAnimations),layerStyle:this.layerStyle,viewMode:this.viewMode,shouldRenderGridLinesOnly:!1,isSmallMultiples:this.isSmallMultiples(),multipleId:e.multiple.getIndex().toString(),navigationScrollCallbacks:{scrollTo:function(o){return t.scrollTo(o)},shouldScrollTo:function(o){return t.shouldScrollTo(o)},scrollBy:function(o){return t.scrollBy(o)}}}),i=e.multiple.getData();e.isSharedAxis&&this.adjustOptionsForSharedAxis(a,e.viewport,e.axesLayout,i);var n=e.multiple.getRenderer();n.axesRenderer.update(i.axesData,i.scrollbarOptions),n.render(e.multiple.layers,i,e.renderedViewport,a,this.viewportScale),this.renderedPlotArea=n.renderedPlotArea},r.prototype.scrollTo=function(e){this.isSmallMultiples()?this.cartesianSmallMultiplesLayout.scrollTo(e):this.cartesianSmallMultipleFactory.scrollTo(e,this.getVisibleMultiples())},r.prototype.shouldScrollTo=function(e){return this.isSmallMultiples()?this.cartesianSmallMultiplesLayout.shouldScrollTo(e):this.cartesianSmallMultipleFactory.shouldScrollTo(e,this.getVisibleMultiples())},r.prototype.scrollBy=function(e){this.isSmallMultiples()?this.cartesianSmallMultiplesLayout.scrollBy(e):this.cartesianSmallMultipleFactory.scrollBy(e,this.getVisibleMultiples())},r.prototype.getLabelAnimationOptions=function(e){return this.isPlayAxis()?cr.Je:this.getAnimationOptions(e)},r.prototype.getAnimationOptions=function(e){var t;return{ease:null===(t=this.cartesianOptions.animator)||void 0===t?void 0:t.getEasing(),duration:(0,sa.Mb)(this.cartesianOptions.animator,e)}},r.prototype.calculatePlotArea=function(e){if(this.isSmallMultiples()){var t=this.cartesianSmallMultiplesLayout.calculatePlotArea(e);return{width:t.width,height:t.height,scale:e.viewport.scale}}var a=e.viewport,i=e.axesMargins,n=a.width-(i.left+i.right);return{width:n-(e.showSeriesLabels?(0,ce.lr)(e.seriesLabelSettings,n):0),height:a.height-(i.top+i.bottom),scale:a.scale}},r.prototype.adjustOptionsForSharedAxis=function(e,t,a,i){i.axesData.y.sharedAxis&&i.axesData.x.sharedAxis?(a.shouldRenderAxis.x=!1,a.shouldRenderAxis.y=!1,a.shouldRenderAxis.y2=!1,a.margin=a.tickLabelMargins.axesOverflow,e.shouldRenderGridLinesOnly=!0):e.shouldRenderGridLinesOnly=!this.axesData.valueAxis.show,a.viewport=t,e.axesLayout=a},r.prototype.getAxisRendererSettings=function(e,t,a){var i=this;return this.axesData.useManagedTabIndex=!1,{axes:this.axes,container:e,cartesianOptions:this.cartesianOptions,data:this.axesData,interactivity:this.options.interactivity,interactivityService:this.interactivityService,behavior:this.categoricalAxisBehavior,calculatePlotArea:function(s){return i.calculatePlotArea(s)},hostServices:this.hostServices,tooltipService:this.tooltipService,eventManager:this.eventManager,formatMode:this.formatMode,isSelected:this.isSelected,onScroll:t?function(n){return i.cartesianSmallMultiplesLayout.onScroll(n)}:void 0,onExtentUpdate:t?function(n){return i.cartesianSmallMultiplesLayout.onExtentUpdate(n)}:void 0,suppressBrush:t?a:void 0}},r.prototype.calculatePlayAxisControlLayout=function(e,t,a,i){var n;if(this.isPlayAxis()){var s=i?.left||0,o=i?.bottom||0;n={left:(0,aa.nM)(a)?t.width:0,top:(0,aa.RB)(a)?t.height+e.height+o:e.height+o,height:r.PlayAxisBottomMargin,width:e.width+s}}return n},r.prototype.renderLegend=function(e,t,a,i,n){return this.legendRenderer=new vn(this.legend,e,t,this.options.interactivity,n&&1===this.viewMode&&this.isSelected),this.legendRenderer.render(a,i,n),[this.legendRenderer.getMargin(),this.legendRenderer.getPosition()]},r.prototype.buildPlotAreaLayout=function(e,t,a,i,n){return t||(t=this.chartAreaSvg),new ga(this.cartesianOptions,this.visibilityHelper,t,new _e(this.getAxisRendererSettings(t,e,e)),i||this.element,this.hostServices,n||this.behavior,this.interactivityService,a||this.clearCatcher,e,this.viewportScale)},r.IconClassName="cartesianChartResponsiveIcon",r.GridContainerClassName="cartesian-grid-container",r.PlayAxisBottomMargin=80,r}(),Dt=b(47287),Ei=b(58691),en=b(34644),ys=function(){function r(e){var t;this.options=e,T.fF.assertValue(e,"options:CartesianVisualConstructorOptions"),this._tooltipsEnabled=null!==(t=e.tooltipsEnabled)&&void 0!==t&&t}return Object.defineProperty(r.prototype,"activeData",{get:function(){var t;return null!==(t=this.clippedData)&&void 0!==t?t:this.data},enumerable:!1,configurable:!0}),r.prototype.hasData=function(){return!!this.data},Object.defineProperty(r.prototype,"featureSwitches",{get:function(){return this.options.featureSwitches||{}},enumerable:!1,configurable:!0}),r.prototype.initData=function(e){T.fF.assertValue(e,"options:CartesianVisualInitDataOptions"),this._currentViewport=e.viewport,this.dataInitOptions=e},r.prototype.initRenderer=function(e){T.fF.assertValue(e?.svg,"options:CartesianVisualInitRendererOptions"),this.renderOptions=e},Object.defineProperty(r.prototype,"tooltipsEnabledSafe",{get:function(){var t,a=null===(t=this.hostService)||void 0===t?void 0:t.tooltips();return this.tooltipsEnabled&&(!a||a?.enabled())},enumerable:!1,configurable:!0}),r.prototype.updateCurrentViewport=function(e){this._currentViewport=e.viewport,this._margin=e.margin},r.prototype.getLegendData=function(){var e;return null===(e=this.data)||void 0===e?void 0:e.legendData},Object.defineProperty(r.prototype,"margin",{get:function(){return this._margin},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"style",{get:function(){return this.dataInitOptions.style},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"animationOptions",{get:function(){return this.dataInitOptions.animation},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"currentViewport",{get:function(){return this._currentViewport},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"hostService",{get:function(){return this.dataInitOptions.host},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tooltipService",{get:function(){var t;return null===(t=this.dataInitOptions.services)||void 0===t?void 0:t.tooltips},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tooltipsEnabled",{get:function(){return this._tooltipsEnabled},set:function(t){this._tooltipsEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"element",{get:function(){return this.dataInitOptions.element},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"cartesianVisualHost",{get:function(){return this.renderOptions.cartesianHost},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"animator",{get:function(){return this.renderOptions.animator},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"svg",{get:function(){return this.renderOptions.svg},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"availableWidth",{get:function(){return Math.max(0,this.currentViewport.width-(this.margin.left+this.margin.right))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"availableHeight",{get:function(){return Math.max(0,this.currentViewport.height-(this.margin.top+this.margin.bottom))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"interactivityService",{get:function(){return this.options.interactivityService},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mobileTileInteractive",{get:function(){var t,a;return null!==(a=null===(t=this.dataInitOptions.interactivity)||void 0===t?void 0:t.mobileTileInteractive)&&void 0!==a&&a},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isVisualInteractive",{get:function(){var t,a;return null!==(a=null===(t=this.dataInitOptions.interactivity)||void 0===t?void 0:t.isVisualInteractive)&&void 0!==a&&a},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dragDataPoint",{get:function(){var t;return null===(t=this.dataInitOptions.interactivity)||void 0===t?void 0:t.dragDataPoint},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isComboChart",{get:function(){return this.options.isComboChart},enumerable:!1,configurable:!0}),r.prototype.isYCategorical=function(){return!1},r.prototype.overrideXAxis=function(e){this.xAxisProperties=e},r.prototype.onClearSelection=function(){var e;null===(e=this.interactivityService)||void 0===e||e.clearSelection()},Object.defineProperty(r.prototype,"localizer",{get:function(){var t=this;return function(a){return t.hostService.getLocalizedString(a)}},enumerable:!1,configurable:!0}),r.prototype.getPreferredPlotArea=function(e){var n=e.outerPaddingRatio,o={height:this.availableHeight,width:this.availableWidth};if(this.options.isScrollable&&!e.isScalar){var l=e.categoryThickness*(e.categoryCount+2*(void 0===n?0:n));this.isYCategorical()?o.height=Math.max(l,o.height):o.width=Math.max(l,o.width)}return o},r}(),On=function(r){function e(t){var a=r.call(this,t)||this;return a.options=t,a.viewModelAdapterFactory=t.viewModelAdapterFactory,a}return(0,d.__extends)(e,r),e.prototype.updateCurrentViewport=function(t){r.prototype.updateCurrentViewport.call(this,t),this.updateViewModelAdapterAndData()},e.prototype.updateViewModelAdapterAndData=function(){this.viewModelAdapterFactory&&this.originalData&&(this.viewModelAdapter=this.viewModelAdapterFactory.create({data:this.originalData,dataView:this.dataView,viewport:this.currentViewport}),this.data=this.viewModelAdapter.getData())},e.prototype.addWarnings=function(t){var a;null===(a=this.viewModelAdapter)||void 0===a||a.addWarnings(t)},e}(ys),ms=b(52083),fn=b(7176),Pr=b(44196),Jn=b(43906),tn=b(77558),ka=b(382),an=b(6444),Ht=b(38859),ao=function(){function r(e){var t;this.options=e,this.categories=[],this.existingTooltips=[],this.fillTransparency=Ht.fl,T.fF.assertValue(e.dataView,"dataView"),T.fF.assertValue(e.style,"style"),this.reader=(0,ca.G)(e.dataView,{staticSeriesRoleNames:[K.x.y],colorOptions:{valueRole:K.x.y,visualStyle:e.style},formatStringProp:K.p.general.formatString,errorRangeProp:la.Qx.errorRange}),this.seriesCount=this.reader.data.hasValues(r.valueRoleName)?this.reader.data.getSeriesCount():void 0,this.isStacked=Ht.C3(e.chartType,this.seriesCount);var a=(t=(0,ye.xh)(e.dataView.categorical,Dt.gE.general.formatString,void 0)).categories,i=t.categoryFormatter;this.categories=a,this.categoryFormatter=i}return Object.defineProperty(r.prototype,"displayNames",{get:function(){if(!this._displayNames){var t=this.options.hostServices;this._displayNames={negative:t.getLocalizedString("Visual_TotalTooltipNegative"),positive:t.getLocalizedString("Visual_TotalTooltipPositive"),net:t.getLocalizedString("Visual_TotalTooltipNet"),simple:t.getLocalizedString("Visual_Total")}}return this._displayNames},enumerable:!1,configurable:!0}),r.create=function(e){return new r(e)},r.convert=function(e){return new r(e).convert()},Object.defineProperty(r.prototype,"staticObjects",{get:function(){return this.reader.objects.getStaticObjects()},enumerable:!1,configurable:!0}),r.prototype.convert=function(){var e,t,a,i,n=(e=this.options).dataView,s=e.style,o=e.multipleInfo,l=e.chartType,u=e.interactivityService,c=e.hostServices,v=e.isComboChart,y=e.supportsTotalLabels,m=null!==(a=n.metadata)&&void 0!==a?a:null,w=84===l,C=Ht.Ds(l),D=(0,p.Vk)(m,!1),O=(0,p.$K)(D),F=(0,p.qU)(null!==(i=this.options.isScalar)&&void 0!==i&&i,D),X=(0,p.Zo)(n.categorical,F).category.source,re=Ht.L2(s,C,v,l,this.seriesCount);this.staticObjects&&(0,G.AR)(this.staticObjects.labels,re,!Ht.hg(l),s,v);var pe=(0,d.__assign)((0,d.__assign)({},re),{show:!1});y&&this.staticObjects&&(0,G.ww)(this.staticObjects.totals,pe,!1,s,v),this.totalLabelsSettings=pe,this.color=(0,A.W7)(this.staticObjects,Dt.gE.dataPoint.fill,s.colorPalette.dataColors.getColorByIndex(0).value),this.fillTransparency=(0,A.NA)(this.staticObjects,Dt.gE.dataPoint.fillTransparency,Ht.fl),this.borderSettings=this.readBorderSettings(this.staticObjects,(0,Ht.nO)(s),this.color),this.ribbonBandSettings=(0,d.__assign)({show:(0,A.NA)(this.staticObjects,Dt.gE.ribbonBands.show,w)},this.readRibbonSettings(void 0,this.color));var q=yt(s);this.staticObjects&&((0,G.FJ)(this.staticObjects.seriesLabels,q,s,v),q.defaultSeriesWidth=q.defaultSeriesWidth?-1:null,q.maxWidthPercentage=q.defaultSeriesWidth?-1:q.maxWidthPercentage),this.layout={seriesOrderReversed:(0,A.NA)(this.staticObjects,Dt.gE.layout.seriesOrderReversed,Ht.HQ.seriesOrderReversed),seriesOrderSorted:(0,A.NA)(this.staticObjects,Dt.gE.layout.seriesOrderSorted,!!w||Ht.HQ.seriesOrderSorted),stackedGapSize:(0,A.NA)(this.staticObjects,Dt.gE.layout.stackedGapSize,Ht.HQ.stackedGapSize),stackedGapExplodes:(0,A.NA)(this.staticObjects,Dt.gE.layout.stackedGapExplodes,Ht.HQ.stackedGapExplodes),clusteredGapSize:(0,A.NA)(this.staticObjects,Dt.gE.layout.clusteredGapSize,Ht.HQ.clusteredGapSize),clusteredGapOverlaps:(0,A.NA)(this.staticObjects,Dt.gE.layout.clusteredGapOverlaps,Ht.HQ.clusteredGapOverlaps),clusteredGapOverlapReverse:(0,A.NA)(this.staticObjects,Dt.gE.layout.clusteredGapOverlapReverse,Ht.HQ.clusteredGapOverlapReverse),ribbonGapSize:(0,A.NA)(this.staticObjects,Dt.gE.layout.ribbonGapSize,Ht.HQ.ribbonGapSize)},(v||C)&&(this.layout.stackedGapExplodes=!1),this.isStacked&&(this.layout.stackedGapSize=Math.min(this.layout.stackedGapSize,this.layout.stackedGapExplodes?Ht._f:Ht.nD)),this.isStacked||(this.layout.clusteredGapSize=Math.min(this.layout.clusteredGapSize,this.layout.clusteredGapOverlaps?Ht.jL:Ht.E5)),(!this.isStacked||this.layout.stackedGapSize>0)&&(this.borderSettings.outlineOnly=!1);var ke=(t=this.getLegend()).legendData,Ke=t.seriesSources,Re=ke.dataPoints,Je=this.createDataPoints({legend:Re,defaultDataLabelsSettings:re,defaultSeriesSettings:q,totalLabelsSettings:pe,isScalar:F,isCombo:!!v,categoryMetadata:X,multipleInfo:o}),Ze=Je.series,Lt=Je.hasHighlights,Xt=Je.hasDynamicSeries,Yt=Ht.e3(l,Ze.length);(null==re.position||!_.includes(Yt,re.position))&&(re.position=ka.h.auto);for(var wt=[],Kt=0,da=Re.length;Kt<da;Kt++)wt.push(Ke[Kt]);if((this.layout.seriesOrderSorted||this.isStacked&&this.layout.stackedGapSize>0||this.borderSettings.outlineOnly)&&function(r){for(var e=Array.from({length:r.categoryCount},function(){return[]}),t=Array.from({length:r.categoryCount},function(){return[]}),a=Array.from({length:r.categoryCount},function(){return 0}),i=r.isStacked&&r.layout.stackedGapSize>0&&!r.layout.seriesOrderSorted,n=function(w){for(var C=function(F){var N=w[F];if(N.highlight)return"continue";r.hasHighlights&&T.fF.assert(function(){return w[F+1].highlight},"next item must be a highlight data point"),(N.value>=0?e:t)[N.categoryIndex].push({data:N,dataHighlight:r.hasHighlights?w[F+1]:void 0}),N.value&&a[N.categoryIndex]++},D=0;D<w.length;D++)C(D)},s=0,o=r.series;s<o.length;s++)n(o[s].data);function u(m,w){var C;if(!(m.length<1)){m.sort(function(q,ee){var ue,ke;return Math.abs(null!==(ue=q.data.value)&&void 0!==ue?ue:0)-Math.abs(null!==(ke=ee.data.value)&&void 0!==ke?ke:0)}),r.layout.seriesOrderReversed&&m.reverse();for(var D=0,O=0,F=0;O<m.length;O++){var N=m[O],U=N.data,X=N.dataHighlight,re=D,pe=null!==(C=U.value)&&void 0!==C?C:0;U.indexFromZeroValue=F,X&&(X.indexFromZeroValue=F),pe&&F++,pe>0?(U.position=D+=pe,U.rank=m.length-O,U.seriesPosition=r.layout.seriesOrderReversed?w+O:m.length-O-1):(U.position=D,D+=pe,U.rank=w+O+1,U.seriesPosition=r.layout.seriesOrderReversed?m.length-O:w+O),U.originalPosition=U.position,X&&(X.rank=U.rank,X.seriesPosition=U.seriesPosition,X.position=pe>0?re+X.value:re,X.originalPosition=U.position)}}}function c(m){if(!(m.length<1))for(var w=0,C=0;w<m.length;w++){var D=m[w],O=D.data,F=D.dataHighlight;O.indexFromZeroValue=C,F&&(F.indexFromZeroValue=C),O.value&&C++}}for(var v=0;v<r.categoryCount;v++)i?(c(e[v]),c(t[v])):r.layout.seriesOrderSorted&&(u(e[v],t[v].length),u(t[v],e[v].length));var y=function(w){for(var C=a[w],D=0,O=function(pe){pe.countOfPointsInCategory=C,pe.value&&(pe.indexFromBottom=D,D++)},F=t[w].length-1;F>=0;F--)O(t[w][F].data);for(var N=0,U=e[w];N<U.length;N++)O(U[N].data)};for(v=0;v<r.categoryCount;v++)y(v)}({series:Ze,hasHighlights:Lt,categoryCount:this.categories.length,layout:this.layout,isStacked:this.isStacked}),this.isStacked&&this.layout.stackedGapSize>0&&this.layout.stackedGapExplodes){for(var ua=0,Mt=0,ea=Ze;Mt<ea.length;Mt++)for(var Ta=0,Ha=(pa=ea[Mt]).data;Ta<Ha.length;Ta++)(xa=Ha[Ta]).highlight||(ua=Math.max(xa.valueAbsolute,ua));this.layout.stackedGapExplodeStepSize=ua*this.layout.stackedGapSize/100;for(var $a=0,li=Ze;$a<li.length;$a++)for(var Xa=0,La=(pa=li[$a]).data;Xa<La.length;Xa++){var xa;Ht.o9(xa=La[Xa],this.layout)}}for(var qa=1,ta=0;ta<this.categories.length;ta++)for(var Ua=0,ei=Ze;Ua<ei.length;Ua++){var pa=ei[Ua];pa?.data[ta]&&(pa.data[ta].posinset=qa++)}if(this.ribbonBandSettings.show&&this.categories.length>=2&&function(r){for(var e=K.p.general.formatString,t=r.dataView.categorical.categories,a=Ht.hg(r.chartType)&&!r.isScalar,i=function(u){var c=r.hasHighlights?_.filter(u.data,function(m){return m.highlight}):u.data;T.fF.assert(function(){return null!==u.ribbonBands},"ribbonBands must be created per each series in advance");for(var v=function(w){var C=c[w],D=c[w+1];if(!C.value||!D.value||C.categoryIndex!==D.categoryIndex-1)return"continue";if(a){var O=C;C=D,D=O}var F=[],N=r.reader.columns.getValueMetadataColumn(Dt.au.y,u.index),U=(0,Ge.BJ)((0,Ge.AD)(t,C.categoryIndex,e)),X=(0,Ge.BJ)((0,Ge.AD)(t,D.categoryIndex,e)),re=function(Ze){return"".concat(Ze," ").concat(u.displayName).concat(r.hasDynamicSeries?" ".concat(N.displayName):"")};F.push({displayName:re(U),value:(0,ye.xq)(C.value,N,e,!1)}),F.push({displayName:re(X),value:(0,ye.xq)(D.value,N,e,!1)});var pe=D.value-C.value,q=(0,ye.xq)(pe,N,e,!1),ee=(0,I.Z)("Percentage"),ke=(0,I.WU)(pe/C.value,ee);if(F.push({displayName:"".concat(N.displayName," ").concat(r.hostServices.getLocalizedString("Change")),value:"".concat(q," (").concat(ke,")")}),null!=C.rank&&null!=D.rank){F.push({displayName:"".concat(U," ").concat(u.displayName," ").concat(r.hostServices.getLocalizedString("RibbonChart_TooltipRank")),value:"".concat(C.rank)}),F.push({displayName:"".concat(X," ").concat(u.displayName," ").concat(r.hostServices.getLocalizedString("RibbonChart_TooltipRank")),value:"".concat(D.rank)});var Ke=D.rank-C.rank;if(0!==Ke){var Re=Ke>0?"\u25bc".concat(Ke):"\u25b2".concat(-Ke);F.push({displayName:"".concat(r.hostServices.getLocalizedString("RibbonChart_TooltipRank")," ").concat(r.hostServices.getLocalizedString("Change")),value:Re})}}u.ribbonBands.dataPoints.push({d1:C,d2:D,tooltipInfo:F})},y=0;y<c.length-1;y++)v(y)},n=0,s=r.series;n<s.length;n++)i(s[n])}({dataView:n,isScalar:F,chartType:l,series:Ze,hasHighlights:Lt,hasDynamicSeries:Xt,reader:this.reader,hostServices:c}),u){for(var ui=0,Na=Ze;ui<Na.length;ui++)u.applySelectionStateToData((pa=Na[ui]).data);u.applySelectionStateToData(ke.dataPoints)}return(0,d.__assign)((0,d.__assign)({},Je),{categories:this.categories,categoryFormatter:this.categoryFormatter,preferredCategoryWidth:O,hasY2Role:(0,V.c5)(n,"Y2"),valuesMetadata:wt,legendData:ke,categoryMetadata:X,isScalar:F,dataLabelsSettings:re,seriesLabelSettings:q,totalLabelsSettings:pe,columnStyle:{fillColor:this.color,fillTransparency:this.fillTransparency,border:this.borderSettings},layout:this.layout,ribbonBands:this.ribbonBandSettings,strokeSettings:(0,ia.kG)(s),dataPointsCount:qa})},r.prototype.createDataPoints=function(e){var t,i,n,s,o,l,u,c,v,y,m,w,C,D,O,a=this,F=(t=this.options).dataView,N=t.chartType,U=t.style,X=t.hostServices,re=Ht.Ds(N),pe=e.multipleInfo,q=e.isCombo,ee=e.defaultDataLabelsSettings,ue=e.defaultSeriesSettings,ke=e.isScalar,Ke=this.seriesCount,Re=F.categorical,Je=K.p.general.formatString,Ze=null!==(n=null===(i=Re?.values)||void 0===i?void 0:i.grouped())&&void 0!==n?n:void 0,Lt=this.categories.length,Xt=[],Yt=[],wt=[];if(Ke<1||Lt<1)return{series:Xt,totals:Yt,hasPositive:!1,hasNegative:!1,hasNetPositive:!1,hasNetNegative:!1,valuesMetadataBySeries:[],categoryIdentities:[],hasHighlights:!1,hasDynamicSeries:!1,multipleIdentity:void 0,categoryData:wt};var da,Kt=Re.categories;da=_.isEmpty(Kt)?null:_.last(Kt).source;var li,Xa,La,ua=(0,P.getCategoryValueType)(da),Mt=(0,Y.v9)(ua),ea=[],pa=[],Ta=[],Ha=[],xa=[],$a=!(!Re.values||!Re.values.source);pe&&(Xa=_.first(pe.sources).metadata.queryName,La=pe.sources.map(function(gt){return(0,z.Y)(gt.metadata,gt.value,pe.identity)}),li=(new z.dw).withColumnIdentity(pe.identity,Xa,La).createSelectionId());for(var qa=!1,ta=this.reader.data.hasHighlights(),Ua=0;Ua<Ke;Ua++){for(var ei=[],ui=[],Na=0;Na<Lt;Na++){var Ga=this.getValueBySeriesAndCategory(Ua,Na),hi=this.getFormatStringBySeriesAndCategory(Ua,Na);if(ei[Na]={value:Ga,formatString:hi},ta){var ja=this.getHighlightBySeriesAndCategory(Ua,Na),Bi=this.getHighlightFormatStringBySeriesAndCategory(Ua,Na);ui[Na]={value:ja,formatString:Bi},null!=Ga&&null!=ja&&!(Ga>=0&&ja>=0&&(0,E.bA)(Ga,ja)||Ga<=0&&ja<=0&&(0,E.bl)(Ga,ja))&&(qa=!0)}}ea.push(ei),ta&&pa.push(ui)}qa&&!Ht.G1(N,Ke)&&(qa=!1,ta=!1,ea=pa);for(var hr=re?Ss(Lt,Ke,function(gt,Sa){return ea[gt][Sa].value}):[],ri=ee.fontProperties.color,Ii=this.totalLabelsSettings.fontProperties.color,_i=function(Sa){var ti=Sa,Zt=qt.layout.seriesOrderReversed?Ke-Sa-1:Sa,Ki=qt.reader.labels.dynamicLabelReader.areDynamicValueLabelsEnabled(null===(s=qt.options.featureSwitches)||void 0===s?void 0:s.labelEnhancementsM0,Zt,ta),ma=[],Oa=e.legend[Zt],vi=void 0,ba=(0,xe.ED)(ue);if(qt.reader.data.hasSeries()||q){var Ci,ai=(Ci=q&&!qt.reader.data.hasSeries()?qt.reader.objects.getValueMetadataObjects(r.valueRoleName,Zt):qt.reader.objects.getSeriesDataObjects(Zt))&&Ci.labels,Pi=Ci&&Ci.seriesLabels;(vi=(0,xe.ED)(ee)).show=ee.show&&(null===(o=ee.showByDefault)||void 0===o||o),ai&&(0,G.AR)(ai,vi,void 0,U,q),ba.show=ue.show&&(null===(l=ue.showByDefault)||void 0===l||l),Pi&&(0,G.FJ)(Pi,ba,U,q)}var ar=qt.reader.columns.getValueColumnBySeries(Zt),Ba=Ha[Zt]=qt.reader.columns.getValueMetadataColumn(r.valueRoleName,Zt),ir=_.findIndex(Ha,Ba);-1!==ir&&(xa[ir]?xa[ir].usedInSeriesIndices.push(Zt):xa[ir]={metadataColumn:Ba,usedInSeriesIndices:[Zt],valueSelector:(new z.dw).withMeasure(Ba.queryName,ar).createSelectionId()});var ha=(0,fn.nC)(qt.isStacked?{}:Ba.objects,U,Oa.marker.color,Zt,(0,d.__assign)((0,d.__assign)({},ee),{show:!1}),{isCombo:q,hideBand:!0,valueAxisHorizontal:Ht.hg(N),staticObjects:qt.staticObjects}),xr=ha.hasUncertainty,Vr=(0,d.__assign)((0,d.__assign)({displayName:Oa.label,key:"series".concat(Zt),index:Zt,data:ma,identity:Oa.identity,columnStyle:{fillColor:Oa.marker.color,fillTransparency:Oa.marker.transparency,border:Oa.marker.stroke}},qt.ribbonBandSettings.show&&{ribbonBands:(0,d.__assign)((0,d.__assign)({},qt.readRibbonSettings(Zt,Oa.marker.color)),{dataPoints:[]})}),{labelSettings:vi,uncertainty:ha,measureDisplayName:Ba.displayName,type:Ba.type,seriesLabelSettings:ba});Xt.push(Vr);for(var br=(0,ms.yj)(Re),Ur=(0,ms.Rr)(Re),si=(0,I.Z)("Percentage"),Cr=!1,ln=function(Qt){var zi,kr,un=(zi=ea[Zt][Qt]).value,gi=zi.formatString,Ti=(0,Y.eT)(un);if(null==Ti&&ti>0)return"continue";var Xi=qt.categories[Qt];if(Mt&&null!=Xi&&!(Xi instanceof Date))return"continue";var Zi,Ar=void 0;if(Xi instanceof Date?(T.fF.assert(function(){return Mt},"Metadata type and value type must match"),T.fF.assert(function(){return(0,an.M4)(Xi)},"originalCategoryValue"),Ar=Xi.epochTimeStamp):Ar=Xi,ke&&(null==Ar||isNaN(Ar)))return"continue";xr&&(Zi=(0,fn.PT)(qt.reader.data,Qt,Zt,Ti));var jr=Ti<0;null!==(u=Yt[Qt])&&void 0!==u||(Yt[Qt]={positive:0,positiveCount:0,negative:0,negativeCount:0,net:0,categoryValue:Ar,categoryIndex:Qt,dynamicFormatString:gi}),null!==(c=(D=Yt[Qt]).dynamicFormatString)&&void 0!==c||(D.dynamicFormatString=gi);var Yr=(0,Bt.AO)({defaultColor:Ii,categoricalDataReader:qt.reader,categoryIndex:Qt,seriesIndex:ti}),Xn=(0,Bt.B8)(Yr)?Yr.color:ri;qt.totalLabelsSettings.fontProperties=(0,Bt.Vv)(Xn,qt.totalLabelsSettings.fontProperties),Yt[Qt].labelFill=Yr.color;var Kr=null==Ti?null:Ti*(re?hr[Qt][jr?"neg":"pos"]:1),Oi=Math.abs(Kr),Dr=void 0;jr?(Dr=Yt[Qt].negative,isNaN(Oi)||(Yt[Qt].negative-=Oi,Yt[Qt].negativeCount++,Yt[Qt].net-=Oi)):(isNaN(Oi)||(Yt[Qt].positive+=Oi,Yt[Qt].positiveCount++,Yt[Qt].net+=Oi),Dr=Yt[Qt].positive);var Zn=Ze&&Ze.length>Zt&&Ze[Zt].values?Ze[Zt]:null,rr=_.isEmpty(Re.categories)?null:Re.categories[0],Dn=(kr=r.createIdentities(Re,rr,Qt,Zn,qt.reader.columns.getValueColumn(r.valueRoleName,Zt),Ba,pe,Xa,La)).identity,Jt=kr.identityKey;null!==(v=Ta[Qt])&&void 0!==v||(Ta[Qt]=function(){return(0,p.MH)(Qt,rr)});var Fi,Er,fr,cn,Wi=0===br?null:Ur;ta&&(Fi=qt.reader.data.getHighlight(r.valueRoleName,Qt,Zt),Er=qt.reader.data.getHighlightFormatString(r.valueRoleName,Qt,Zt),cn=Fi,null!==Fi&&(xr&&(fr=(0,fn.PT)(qt.reader.data,Qt,Zt,Fi,!0)),re&&(Fi*=hr[Qt][jr?"neg":"pos"])));var Vi,Ni=rr?(0,Ge.AD)(F.categorical.categories,Qt,Je):void 0;qt.options.tooltipsEnabled&&(Vi=new Ca.E4).withLazyValues(function(){var or,oi=[];if(pe){var dn=(0,Ca.Q6)(pe.sources.map(function(Mn){return Mn.metadata}),pe.sources.map(function(Mn){return Mn.value}),!0,(0,Jn.F)(Je));dn&&oi.push(dn())}rr&&oi.push((0,Ge.bR)(Ni)),$a&&(!rr||rr.source!==Re.values.source)&&oi.push({displayName:Re.values.source.displayName,value:(0,ye.xq)(Ze[Zt].name,Re.values.source,Je)});var Ir=function(ps){return(0,ye.xq)(ps,Ba,Je,!1,gi)};if(null!=Ti){var Ln=Ir(Ti),Pn=re?"".concat(Ln," (").concat((0,I.WU)(Oi,si),")"):Ln,Jr={displayName:Ba.displayName,value:Pn},$r=ha.tooltips;if(xr&&!ta&&$r.show&&$r.format===tn.K.range){var Nr=(0,Pr.kS)(Zi,Kr,ha,Ir,X,{overrideDisplayName:Ba.displayName});T.fF.assert(function(){return void 0===Nr||1===Nr.length},"getUncertaintyTooltipItems() with 'range' format should return exactly one item"),_.isEmpty(Nr)||(Jr=Nr[0])}oi.push(Jr)}if(ta){var qr=void 0;if(null!==cn&&null!==Fi){var Hi=(0,I.WU)(Fi,si),_r=(0,ye.xq)(cn,Ba,Je,!1,Er);qr=re?"".concat(_r," (").concat(Hi,")"):_r}if(Ir=function(ps){return(0,ye.xq)(ps,Ba,Je,!1,Er)},qr)if($r=ha.tooltips,xr&&$r.show&&$r.format===tn.K.range){var Ji=(0,Pr.kS)(Zi,Kr,ha,Ir,X,{overrideDisplayName:Ca.I6.localizationOptions.highlightedValueDisplayName});T.fF.assert(function(){return void 0===Ji||1===Ji.length},"getUncertaintyTooltipItems() with 'range' format should return exactly one item"),_.isEmpty(Ji)?oi.push({displayName:Ca.I6.localizationOptions.highlightedValueDisplayName,value:qr}):oi.push(Ji[0])}else oi.push({displayName:Ca.I6.localizationOptions.highlightedValueDisplayName,value:qr})}if(xr&&ha.tooltips.format!==tn.K.range){var pr=ta?fr:Zi;pr&&oi.push.apply(oi,(0,Pr.kS)(pr,Ti,ha,Ir,X,{hideMarker:!0}))}Wi&&null!=Wi.values[Qt]&&oi.push({displayName:Wi.source.displayName,value:(0,ye.xq)(Wi.values[Qt],Wi.source,Je,!1,(0,A.NA)(null===(or=Wi.objects)||void 0===or?void 0:or[Qt],Je))}),(0,Ca.VT)(a.reader,oi,Qt,$a?Zt:void 0,Je);var lr=a.getTotalTooltip(Zt,Qt,jr,Yt,Ha,Je);return lr&&oi.push(lr),oi});var Rr=null!==(y=Xt[ti].labelSettings)&&void 0!==y?y:ee,Xr={defaultColor:ri,seriesColor:vi?.fontProperties.color,categoricalDataReader:qt.reader,categoryIndex:Qt,seriesIndex:Zt},nr=(0,Bt.t$)(Xr),sr={dataPointLabelSettings:Rr,defaultLabelSettings:ee,categoricalDataReader:qt.reader,categoryIndex:Qt,seriesIndex:Zt,hasHighlights:ta,dynamicLabelsEnabledForSeries:Ki,featureSwitches:qt.options.featureSwitches},Zr=(0,Bt.Xc)((0,d.__assign)((0,d.__assign)({},sr),{dataLabelFillColorOptions:Xr,detailPropertyId:Dt.mi.labels.dynamicLabelDetail,titlePropertyId:Dt.mi.labels.dynamicLabelTitle})),Qr=(0,Bt.tI)((0,d.__assign)((0,d.__assign)({},sr),{valuePropertyId:Dt.mi.labels.dynamicLabelValue}));if(!Cr&&null!==(m=qt.options.featureSwitches)&&void 0!==m&&m.labelEnhancementsM0&&!_.isEmpty(Zr)){var Qi=Zr&&(null===(w=Zr.find(function(or){return"Detail"===or.role}))||void 0===w?void 0:w.dynamicLabel),wn=Qi?.enabled&&null!=Qi?.value;if(wn){var Qn=Ht.Ds(N);(0,Bt.hY)(X,Qn,Qr?.enabled,wn,Rr)}Cr=!0}var wr=(0,d.__assign)({categoryValue:Ar,position:Dr,categoryIndex:Qt,seriesIndex:ti,seriesPosition:Zt,labelSettings:Rr,columnStyle:function(){if(a.reader.columns.hasDynamicSeries()||a.reader.columns.hasStaticSeries()||!a.reader.columns.hasCategories()||null==Qt)return Vr.columnStyle;var or=a.reader.colors.createBySeries(Zt,Qt),oi=a.reader.objects.getCategoryDataObjects(Qt);return{fillColor:or,fillTransparency:(0,A.NA)(oi,Dt.gE.dataPoint.fillTransparency,a.fillTransparency),border:a.readBorderSettings(oi,a.borderSettings,or)}}(),selected:!1,originalValue:Ti,originalPosition:Dr,labelFill:nr.color,dynamicLabelValue:Qr,value:Kr,valueAbsolute:Oi,indexFromZeroValue:qt.isStacked?ti:0,uncertainty:Zi,identity:Dn,key:Jt,labelFormatString:gi||Ba.format},qt.options.featureSwitches.labelEnhancementsM0&&{appendedLabelContents:Zr,labelDataPointContainerEnabled:!0});if(null!==(C=wt[Qt])&&void 0!==C||(wt[Qt]=Tt(wr,Ni)),wt[Qt]&&((O=wt[Qt]).hasData||(O.hasData=null!=wr.value)),ma.push((0,d.__assign)({get tooltipInfo(){return Vi?.getTooltipItems()},get formattedTooltip(){return Vi?.getFormattedTooltipItems()}},wr)),ta){var _n=null!==Fi?Math.abs(Fi):0,gr=z.l0.createWithHighlight(Dn);ma.push((0,d.__assign)((0,d.__assign)({get tooltipInfo(){return Vi?.getTooltipItems()},get formattedTooltip(){return Vi&&Vi.getFormattedTooltipItems()}},wr),{value:Fi,position:io(Dr,Kr,Fi,Oi,_n),valueAbsolute:_n,uncertainty:fr,highlight:!0,drawThinner:qa,identity:gr,key:gr.getKey(),pairKey:Jt,labelFormatString:Er||Ba.format}))}},Gr=0;Gr<Lt;Gr++)ln(Gr)},qt=this,Si=0;Si<Ke;Si++)_i(Si);for(var xi=!1,Ya=!1,bi=!1,Li=!1,vr=0,ni=Yt;vr<ni.length;vr++){var De=ni[vr];De&&(xi||(xi=De.positive>0),Ya||(Ya=De.negative<0),bi||(bi=De.net>0),Li||(Li=De.net<0))}return this.hasNetPositive=bi,this.hasNetNegative=Li,{series:Xt,totals:Yt,hasPositive:xi,hasNegative:Ya,hasNetPositive:bi,hasNetNegative:Li,valuesMetadataBySeries:xa,categoryIdentities:Ta,hasHighlights:ta,hasDynamicSeries:$a,multipleIdentity:li,categoryData:wt}},r.createIdentities=function(e,t,a,i,n,s,o,l,u){var c,v=e.originalCategories||[t],y=z.dw.builder().withCategory(v,a,null===(c=t?.source)||void 0===c?void 0:c.queryName,!0).withSeries(e.values,i,!0).withMeasure(s.queryName,n,a);o&&(y=y.withColumnIdentity(o.identity,l,u));var m=y.createSelectionId();return{identity:m,identityKey:m.getKey()}},r.prototype.getTotalTooltip=function(e,t,a,i,n,s){var o,l,u,c,v,y;if(this.options.tooltipsEnabled&&this.options.supportsTotalLabels&&this.totalLabelsSettings.show){if(null!==(o=(c=this.existingTooltips)[t])&&void 0!==o||(c[t]={}),this.totalLabelsSettings.showPositiveAndNegative){var m=a?"negative":"positive";return null!==(l=(v=this.existingTooltips[t])[m])&&void 0!==l||(v[m]={displayName:this.displayNames[m],value:(0,ye.xq)(i[t][m],n[e],s,!1)}),this.existingTooltips[t][m]}return null!==(u=(y=this.existingTooltips[t]).net)&&void 0!==u||(y.net={displayName:this.hasNetPositive&&this.hasNetNegative?this.displayNames.net:this.displayNames.simple,value:(0,ye.xq)(i[t].net,n[e],s,!1,i[t].dynamicFormatString)}),this.existingTooltips[t].net}},r.prototype.readRibbonSettings=function(e,t){var a=void 0===e,i=a?this.staticObjects:this.reader.objects.getSeriesDataObjects(e),n=a?Ht.bS(this.options.style):this.ribbonBandSettings,s=(0,A.W7)(i,Dt.gE.ribbonBands.fillColor,n.fillColor),o=(0,A.NA)(i,Dt.gE.ribbonBands.fillMatchColor,n.fillMatchColor);return o&&t&&(s=t),{fillColor:s,fillMatchColor:o,fillTransparency:(0,A.NA)(i,Dt.gE.ribbonBands.fillTransparency,n.fillTransparency),border:(0,Za.QI)(i,{strokeShow:Dt.gE.ribbonBands.borderShow,strokeWidth:Dt.gE.ribbonBands.borderSize,strokeColor:Dt.gE.ribbonBands.borderColor,strokeColorMatch:Dt.gE.ribbonBands.borderColorMatchFill,strokeTransparency:Dt.gE.ribbonBands.borderTransparency},n.border,s)}},r.prototype.readBorderSettings=function(e,t,a){var i=(0,Za.QI)(e,{strokeShow:Dt.gE.dataPoint.borderShow,strokeWidth:Dt.gE.dataPoint.borderSize,strokeColor:Dt.gE.dataPoint.borderColor,strokeColorMatch:Dt.gE.dataPoint.borderColorMatchFill,strokeTransparency:Dt.gE.dataPoint.borderTransparency},t,a);return i.outlineOnly=(0,A.NA)(e,Dt.gE.dataPoint.borderOutlineOnly,t?.outlineOnly),i},r.prototype.getLegend=function(){var e,t,a,i,n,v,s=[],o=[],l=[],u=!1,c=null===(e=this.options.dataView)||void 0===e?void 0:e.categorical;if(c?.values){for(var y=this.reader.columns.getSeriesCount(K.x.y),m=0;m<y;m++){var w=this.reader.columns.getValueMetadataColumnBySeries(m),C=this.reader.objects.getSeriesDataObjects(m);o.push(w),l.push(C);var D=null!==(t=this.reader.colors.createBySeries(m))&&void 0!==t?t:this.color;s.push({marker:{show:!0,shape:Ma.ZO.circle,color:D,transparency:(0,A.NA)(C,Dt.gE.dataPoint.fillTransparency,this.fillTransparency),stroke:this.readBorderSettings(C,this.borderSettings,D)},label:this.reader.data.hasSeries()?(0,I.WU)(this.reader.data.getSeriesName(m),this.reader.objects.getSeriesFormatString(m)):(0,ye.TO)(w,c.values,K.p.general.formatString),identity:this.reader.data.hasSeries()?this.reader.identities.createForSeries(m):this.reader.identities.createForValue(0),selected:!1,index:m}),void 0!==w.groupName&&(u=!0)}v=null!==(n=null===(i=null===(a=c.values)||void 0===a?void 0:a.source)||void 0===i?void 0:i.displayName)&&void 0!==n?n:""}return{legendData:(0,x.RS)(this.staticObjects,s,!0,v,u,this.options.style,void 0),seriesSources:o,seriesObjects:l}},r.prototype.getValueBySeriesAndCategory=function(e,t){return this.reader.data.getValue("Y",t,e)},r.prototype.getHighlightBySeriesAndCategory=function(e,t){return this.reader.data.getHighlight("Y",t,e)},r.prototype.getFormatStringBySeriesAndCategory=function(e,t){return this.reader.data.getFormatString("Y",t,e)},r.prototype.getHighlightFormatStringBySeriesAndCategory=function(e,t){return this.reader.data.getHighlightFormatString("Y",t,e)},r.valueRoleName=K.x.y,r}();function io(r,e,t,a,i){return t>0?r-(a-i):(null===t||0===t)&&e>0?r-a:r}function Ss(r,e,t){for(var a=[],i=0;i<r;i++){for(var n=0,s=0,o=0;o<e;o++){var l=(0,Y.eT)(t(o,i));l>0?n+=l:s-=l}var u=s+n;a[i]={pos:n?n/u/n:1,neg:s?s/u/s:1}}return a}var xs=b(84741),Mr=b(3665),Tr=b(23465),Ka=b(57622),$n=b(61617),gn=b(33024),bs=b(16122),pn=b(96915),qn=b(91059),so=0,oo=25;function lo(r){return{type:4,card:[co.call(this,r.categoryAxisData),uo.call(this,r.categoryAxisData),ho.call(this),vo.call(this),fo.call(this)].filter(function(e){return e})}}function Cs(r,e,t,a){var i=this,n=this.originalData;if(n&&this.dataView){var s=n.series.length,o=this.isClustered&&s>1,l=Dt.gE.layout;r.addGroup("layout",function(u){u.withDisplayName("Layout"),a?u.withDisabled(a,"perCategory"===t?"Visual_DisabledReason_AllCategoriesOnly_Plural":"Visual_DisabledReason_AllSeriesOnly_Plural"):u.addSimpleSlice("seriesOrderReversed",new ge.bd({descriptor:l.seriesOrderReversed,value:n.layout.seriesOrderReversed}).build(),function(c){return c.withDisabled(s<2,"Visual_DisabledReason_MultiSeriesOnly_Singular")}).addSimpleSlice("seriesOrderSorted",new ge.bd({descriptor:l.seriesOrderSorted,value:n.layout.seriesOrderSorted}).build(),function(c){return c.withDisabled(s<2,"Visual_DisabledReason_MultiSeriesOnly_Singular")}).addSimpleSlice("innerPadding",(0,ya.Gf)(e,i.localizer)).addSimpleSlice("stackedGapSize",new ge.JN({descriptor:l.stackedGapSize,value:n.layout.stackedGapSize,options:{minValue:{type:0,value:Ht.fX},maxValue:{type:1,value:n.layout.stackedGapExplodes?Ht._f:Ht.nD},unitSymbol:n.layout.stackedGapExplodes?gn.t2:gn.e_},localize:i.localizer}).build(),function(c){return c.withHidden(i.isClustered).withDisabled(s<2,"Visual_DisabledReason_MultiSeriesOnly_Singular")}).addSimpleSlice("stackedGapExplodes",new ge.bd({descriptor:l.stackedGapExplodes,value:n.layout.stackedGapExplodes}).build(),function(c){return c.withHidden(!i.supportsStackedGapExplode()).withCustomDescription("Visual_Spacing_Explode_Description_".concat(i.isColumn?"Columns":"Bars"))}).addSimpleSlice("clusteredGapSize",new ge.JN({descriptor:l.clusteredGapSize,value:n.layout.clusteredGapSize,options:{minValue:{type:0,value:0},maxValue:{type:1,value:n.layout.clusteredGapOverlaps?Ht.jL:Ht.E5},unitSymbol:gn.t2},localize:i.localizer}).build(),function(c){return c.withHidden(!o)}).addSimpleSlice("clusteredGapOverlaps",new ge.bd({descriptor:l.clusteredGapOverlaps,value:n.layout.clusteredGapOverlaps}).build(),function(c){return c.withHidden(!o)}).addSimpleSlice("clusteredGapOverlapReverse",new ge.bd({descriptor:l.clusteredGapOverlapReverse,value:n.layout.clusteredGapOverlapReverse}).build(),function(c){return c.withHidden(!o).withDisabled(!n.layout.clusteredGapOverlaps)})}).build()}}function uo(){var r=this;if(this.dataView&&!this.isClustered&&!this.isComboChart){var e=this.originalData;if(e&&0!==e.series.length){var a=Dt.gE.ribbonBands,i=new ge.CQ(new ge.lg("ribbonChart"),"RibbonChart",[a.show,a.fillMatchColor,a.fillColor,a.fillTransparency,a.borderShow,a.borderColor,a.borderColorMatchFill,a.borderTransparency,a.borderSize,Dt.gE.layout.ribbonGapSize],this.localizer),n=function(o,l){o.addGroup("layout",function(u){u.withDisplayName("Layout"),l?u.withDisabled(!0,"Visual_DisabledReason_AllSeriesOnly_Plural"):u.addSimpleSlice("ribbonGapSize",new ge.JN({descriptor:Dt.gE.layout.ribbonGapSize,value:e.layout.ribbonGapSize,options:{minValue:{type:0,value:so},maxValue:{type:1,value:oo},unitSymbol:gn.t2},localize:r.localizer}).build())})};return i.withDescription("RibbonChart_Description").addTopLevelToggle("show",function(){var s;return new ge.bd({descriptor:a.show,value:null===(s=e.ribbonBands)||void 0===s?void 0:s.show}).build()}),this.hasRibbonBands&&e.ribbonBands&&i.addGroup("applySettingsTo",function(s){s.withContainerDisabled(!1).withDisplayName("Apply_Settings_To").withCollapsible(!1),s.addContainer("series",function(o){o.withDisplayName("Series"),o.addContainerItem("all",r.localizer("All"),function(y){var m={containerBuilder:y,props:a,selector:null,panelGroupType:"allSeries"};Fn.call(r,m,e.ribbonBands),Vn.call(r,m,e.ribbonBands.border,"Visual_MatchRibbonColor",!0),n(y)});for(var l=function(m){T.fF.assert(function(){return null!=m.ribbonBands},"series must have ribbonBands for ribbon charts"),o.addContainerItem(m.displayName,m.displayName,function(w){var C={containerBuilder:w,props:a,selector:(0,Be.fd)(m.identity.getSelector()),panelGroupType:"perSeries"};Fn.call(r,C,m.ribbonBands),Vn.call(r,C,m.ribbonBands.border,"Visual_MatchRibbonColor",!0),n(w,!0)})},u=0,c=e.series;u<c.length;u++)l(c[u])})}),i.build()}}}function co(r){var e=this,t=this.originalData;if(t&&this.dataView){var a=t.series.length;if(0!==a){var i=Dt.gE.dataPoint,n=Dt.gE.layout;return new ge.CQ(new ge.lg("bars"),this.isColumn?"Role_DisplayName_Columns":"Visual_Bars_Title",[i.fill,i.fillTransparency,i.borderShow,i.borderColor,i.borderColorMatchFill,i.borderTransparency,i.borderSize,i.borderOutlineOnly,n.seriesOrderReversed,n.seriesOrderSorted,n.stackedGapSize,n.stackedGapExplodes,n.clusteredGapSize,n.clusteredGapOverlaps,n.clusteredGapOverlapReverse,K.p.categoryAxis.innerPadding],this.localizer).addGroup("applySettingsTo",function(s){return s.withContainerDisabled(!1).withDisplayName("Apply_Settings_To").withCollapsible(!1).addContainer("series",function(o){o.withDisplayName(a>1?"Series":"Visual_Categories");var l=e.isColumn?"Visual_MatchColumnColor":"Visual_MatchBarColor";o.addContainerItem("all",e.localizer("All"),function(F){var N={containerBuilder:F,props:i,selector:null,panelGroupType:1===t.series.length?"allCategories":"allSeries"};Fn.call(e,N,e.data.columnStyle),Vn.call(e,N,t.columnStyle.border,l),Cs.call(e,F,r,N.panelGroupType,!1)});var u=t.series,c="perSeries";if(1===u.length){var v=t.series[0],y=v.data.slice(0,ya.Rl);if(y.length<2)return;var m=ra(y,t);u=_.map(y,function(F,N){var U,X;return(0,d.__assign)((0,d.__assign)({},v),{identity:(null===(X=null===(U=t.categoryIdentities)||void 0===U?void 0:U[F.categoryIndex])||void 0===X?void 0:X.call(U))||F.identity,columnStyle:F.columnStyle,displayName:m[N]})}),c="perCategory"}for(var w=function(N){o.addContainerItem(N.displayName,N.displayName,function(U){var X=(0,Be.fd)(N.identity.getSelector());if(X){"perCategory"===c&&t.multipleIdentity&&(X=(0,Be.d9)(X),T.fF.assert(function(){return!!X.data},"expect categories to have some data identity"),X.data.unshift((0,qn.Yp)([Dt.au.rows])));var re={containerBuilder:U,props:i,selector:X,panelGroupType:c};Fn.call(e,re,N.columnStyle),Vn.call(e,re,N.columnStyle.border,l),Cs.call(e,U,r,c,!0)}})},C=0,D=u;C<D.length;C++)w(D[C])})}).build()}}}function Fn(r,e){var t=this,i=r.props,n=r.selector,s=r.panelGroupType,o=null==e.fillMatchColor||null==i.fillMatchColor,l="allCategories"===s&&o,u="allSeries"===s&&o;r.containerBuilder.addGroup("colors",function(c){return c.withDisplayName("Generic_Color").addSimpleSlice("fillMatchColor",new ge.bd({descriptor:(0,d.__assign)((0,d.__assign)({},i.fillMatchColor),{selector:n}),value:e.fillMatchColor}).build(),function(v){return v.withHidden(o)}).addSimpleSlice("fillColor",new ge.BT({descriptor:(0,d.__assign)((0,d.__assign)((0,d.__assign)((0,d.__assign)({},i.fill||i.fillColor),{selector:(0,d.__assign)((0,d.__assign)({},n),l&&{data:[(0,pn.Ue)(1)]})}),l&&{altConstantValueSelector:null}),{instanceKind:l?3:1}),value:{value:e.fillColor}}).build(),function(v){return v.withDisabled(u||e.fillMatchColor,u?"Visual_Color_AllSeries_DisabledReason":"")}).addSimpleSlice("fillTransparency",ge.JN.getTransparencySliderBuilder({descriptor:(0,d.__assign)((0,d.__assign)({},i.fillTransparency),{selector:n}),value:e.fillTransparency,localize:t.localizer}).build())})}function Vn(r,e,t,a){var i=this,s=r.props,o=r.selector;void 0===a&&(a=!1),r.containerBuilder.addGroup("border",function(l){l.withDisplayName("Visual_Border").addSlices((0,Za.Iq)({containerItemBuilder:l,descriptors:{strokeShow:s.borderShow,strokeColorMatch:s.borderColorMatchFill,strokeColor:s.borderColor,strokeTransparency:s.borderTransparency,strokeWidth:s.borderSize},selector:o,strokeData:e,featureSwitches:i.featureSwitches,localize:i.localizer}).map(function(u){return(0,$n.cd)(u.getSimpleControlDescriptor(),s.borderColorMatchFill)&&u.withCustomDisplayName(t),u.build()})),a||l.addSimpleSlice("borderOutlineOnly",new ge.bd({descriptor:(0,d.__assign)((0,d.__assign)({},s.borderOutlineOnly),{selector:o}),value:e.outlineOnly}).build(),function(u){var c;return u.withHidden(i.isClustered||null!==o).withDisabled((null===(c=i.originalData)||void 0===c?void 0:c.layout.stackedGapSize)>0,"Visual_Border_OutlineOnly_DisabledReason")})}).build()}function ho(){var e,r=this,t=this.originalData,a=t.dataLabelsSettings,i=t.series.length,n=i>1||!t.categoryMetadata||this.isComboChart,s=t.dataLabelsSettings.position!==ka.h.outsideEnd,o=Ht.e3(this.columnChartType,i);a.position&&o.indexOf(a.position)<0&&(a.position=ka.h.auto);var l=(0,d.__assign)((0,d.__assign)({},Dt.mi.labels),{position:Dt.mi.labels.labelPosition,precision:Dt.mi.labels.labelPrecision,displayUnits:Dt.mi.labels.labelDisplayUnits,labelBackgroundColor:Dt.mi.labels.backgroundColor,labelBackgroundTransparency:Dt.mi.labels.backgroundTransparency,showDynamicLabels:Dt.mi.labels.showDynamicLabels,dynamicLabelValue:Dt.mi.labels.dynamicLabelValue});this.isColumn||delete l.labelOrientation;var w,u=new ge.CQ(new ge.lg("labels"),"Visual_DataPointsLabels",l,this.localizer),c=(0,Bt.DU)(this.featureSwitches,t.hasDynamicSeries,n,i,this.isComboChart,!0),v=As.call(this,void 0,a,null,n,o,s,c),y=rn.call(this,!1),m={cardBuilder:u,dataLabelsProps:l,featureSwitches:this.featureSwitches,includeAltConstantValueSelector:!0,hostServices:this.hostService,options:v,individualSelector:y,showEnhancedLabelsFormattingOptions:!0,instanceId:"all"};if(null!==(e=this.featureSwitches)&&void 0!==e&&e.labelEnhancementsM0&&this.dataView){var C=(w=(0,ca.y)(this.dataView)).labels.dynamicLabelReader.getLabelFieldSourceTypes();Object.assign(m,{valueFieldSourceType:C.valueFieldSourceType,detailFieldSourceType:C.detailFieldSourceType,titleFieldSourceType:C.titleFieldSourceType,valueLabelPickerFallbackExpr:(0,Bt.WA)(t.valuesMetadataBySeries,i,t.hasDynamicSeries),dataLabelPickerSeriesType:(0,Bt.Nb)(i,t.hasDynamicSeries,this.isComboChart)})}return l.show&&u.addTopLevelToggle("show",function(){return new ge.bd({descriptor:l.show,value:v.dataLabelsSettings.show}).build()}),u.addGroup("applySettingsTo",function(N){N.withDisplayName("Apply_Settings_To").withCollapsible(!1).addContainer("series",function(U){var X,re;if(U.withDisplayName("Series"),U.addContainerItem("all",r.localizer("All"),function(Ke){return(0,G.WW)(m,Ke)}),n)for(var pe=0;pe<i;pe++){var q=t.series[pe],ee=q.labelSettings?q.labelSettings:t.dataLabelsSettings;ee.position&&o.indexOf(ee.position)<0&&(ee.position=ka.h.auto);var ue=q.identity.getSelector();if(Object.assign(m,{includeAltConstantValueSelector:!1,selector:t.hasDynamicSeries?(0,Be.fd)(ue):ue,individualSelector:rn.call(r,!0),options:As.call(r,void 0,ee,ue,void 0,o,s,t.hasDynamicSeries),displayDisabledSlices:(X={},X.labelOverflow=!0,X),instanceId:"sn-".concat(pe)}),null!==(re=r.featureSwitches)&&void 0!==re&&re.labelEnhancementsM0){var ke=w?w.labels.dynamicLabelReader.getLabelFieldSourceTypes(pe):null;Object.assign(m,(0,d.__assign)((0,d.__assign)({},ke?{valueFieldSourceType:ke.valueFieldSourceType,detailFieldSourceType:ke.detailFieldSourceType,titleFieldSourceType:ke.titleFieldSourceType}:{}),{valueLabelPickerFallbackExpr:(0,Bt.CH)(t.valuesMetadataBySeries,pe),dataLabelPickerSeriesType:(0,Bt.aC)(i,t.hasDynamicSeries,r.isComboChart)}))}U.addContainerItem(q.displayName,q.displayName,function(Ke){return(0,G.WW)(m,Ke)})}})}),u.build()}function rn(r){return(0,G.WD)({featureSwitches:this.featureSwitches,hasCategories:null!=_.first(this.originalData.categories),hasDynamicSeries:this.originalData.hasDynamicSeries,hasSeriesSelector:r})}function vo(){var r,t=this.originalData.totalLabelsSettings;if(t&&!this.isClustered&&!this.isStacked100){var a=(0,d.__assign)((0,d.__assign)({},Dt.mi.totals),{precision:Dt.mi.totals.labelPrecision,displayUnits:Dt.mi.totals.labelDisplayUnits}),i=new ge.CQ(new ge.lg("totals"),"Visual_DataTotalLabels",a,this.localizer);if(!this.supportsTotalLabels()){var n=!(null===(r=this.data)||void 0===r||!r.multipleIdentity);return i.withDisabled(!0,n?"Visual_Totals_DisabledReason_SmallMultiples":"Visual_Totals_DisabledReason"),i.addTopLevelToggle("show",function(){return new ge.bd({descriptor:a.show,value:!1}).build()}),i.build()}return(0,G.XQ)({cardBuilder:i,dataLabelsProps:a,featureSwitches:this.featureSwitches,hostServices:this.hostService,options:go.call(this,void 0,t),individualSelector:rn.call(this,!1),showEnhancedLabelsFormattingOptions:!1,instanceId:"all"})}}function fo(){var r=this;if(!this.isStacked){var e=this.originalData;if(e&&e.series&&0!==e.series.length)return new ge.CQ(new ge.lg("errorBars"),"Visual_Error_Bars",la.Qx,this.localizer,!0,!0).addGroup("applySettingsTo",function(t){return t.withDisplayName("Apply_Settings_To").withCollapsible(!1).addContainer("measure",function(a){a.withDisplayName("Series");for(var i=function(u){var c=_.first(u.usedInSeriesIndices);if(T.fF.assertValue(c,"lineChart - measure is not associated with any series"),null!=c&&null!==e.series[c]){var v=u.valueSelector.getSelector();a.addContainerItem(u.metadataColumn.queryName,u.metadataColumn.displayName,function(y){return(0,bs.f)({localize:r.localizer,uncertainty:e.series[c].uncertainty,targetMeasure:u.metadataColumn.expr,measureSelector:v,dataPointSelector:(0,d.__assign)((0,d.__assign)({},v),{data:[(0,pn.Ue)()],highlightMatching:1}),featureSwitches:r.featureSwitches,uncertaintyOptions:{isCombo:r.isComboChart,hideBand:!0}},y)})}},n=0,s=e.valuesMetadataBySeries;n<s.length;n++)i(s[n])})}).build()}}function As(r,e,t,a,i,n,s){var o,l=!!t;return{enumeration:r,dataLabelsSettings:e,show:!0,position:!_.isEmpty(i),positionObject:i,labelOrientation:!this.isBar&&!l,displayUnits:!this.isStacked100,precision:!0,selector:t,showAll:a,fontSize:!0,fontFamily:!0,labelDensity:null===(o=this.data)||void 0===o?void 0:o.isScalar,labelOverflow:!l&&n,enableBackground:e.enableBackground,backgroundColor:e.backgroundColor,backgroundTransparency:e.backgroundTransparency,style:this.style,bold:!0,italic:!0,underline:!0,enableDynamicLabelPickers:!s,isStacked100:this.isStacked100}}function go(r,e){return{enumeration:r,dataLabelsSettings:e,show:!0,displayUnits:!0,precision:!0,fontSize:!0,fontFamily:!0,showPositiveAndNegative:!0,enableBackground:e.enableBackground,backgroundColor:e.backgroundColor,backgroundTransparency:e.backgroundTransparency,style:this.style,bold:!0,italic:!0,underline:!0}}function po(r){var a,i,t=_.first(r).visualObjects;if(t.length>0){a=t[0],a?.selectorsByColumn&&(i=(0,Be.fd)((0,Be.tV)(a.selectorsByColumn)));var n=1===this.data.series.length;switch(a.objectName){case"columns":return n&&this.data.categoryMetadata&&!this.data.hasDynamicSeries&&(i={data:[(0,pn.Ue)(1)]}),(0,ne.w3)(this.hostService,(0,d.__assign)((0,d.__assign)({},Dt.gE.dataPoint.borderColor),{selector:i}),(0,d.__assign)((0,d.__assign)({},Dt.gE.dataPoint.fill),{selector:i}),this.hostService.getLocalizedString("Visual_Border"));case"ribbon":return n&&this.data.categoryMetadata&&!this.data.hasDynamicSeries&&(i={data:[(0,pn.Ue)(1)]}),(0,ne.w3)(this.hostService,(0,d.__assign)((0,d.__assign)({},Dt.gE.ribbonBands.borderColor),{selector:i}),(0,d.__assign)((0,d.__assign)({},Dt.gE.ribbonBands.fillColor),{selector:i}),this.hostService.getLocalizedString("Visual_Border"));case"data-labels":var s=this.data.series.find(function(v){var y;return(0,Be.Ic)(null===(y=v?.identity)||void 0===y?void 0:y.getSelectorsByColumn(),a.selectorsByColumn)});if(!s)return;var o=Dt.mi.labels,l=n?void 0:i,u={fontFamilyReference:(0,d.__assign)((0,d.__assign)({},o.fontFamily),{selector:l}),fontSizeReference:(0,d.__assign)((0,d.__assign)({},o.fontSize),{selector:l}),boldReference:(0,d.__assign)((0,d.__assign)({},o.bold),{selector:l}),italicReference:(0,d.__assign)((0,d.__assign)({},o.italic),{selector:l}),underlineReference:(0,d.__assign)((0,d.__assign)({},o.underline),{selector:l}),fontColorReference:(0,d.__assign)((0,d.__assign)({},o.color),{selector:l}),displayUnitsReference:(0,d.__assign)((0,d.__assign)({},o.labelDisplayUnits),{selector:l}),precisionReference:(0,d.__assign)((0,d.__assign)({},o.labelPrecision),{selector:l}),backgroundReference:(0,d.__assign)((0,d.__assign)({},o.backgroundColor),{selector:l})};return(0,ne.Jf)({hostServices:this.hostService,omitSelectorForSingleSeries:n,individualSelector:rn.call(this,!n),selector:i,repetitionSelector:void 0,subSelectionStylesOptions:{precision:{defaultPrecision:this.getLabelUnitsAndPrecision().getPrecision(!1,s.type)}}},u);case"total-labels":var c=Dt.mi.totals;return(0,ne.Jf)({hostServices:this.hostService,omitSelectorForSingleSeries:n,individualSelector:rn.call(this,!n),selector:i,repetitionSelector:void 0},{fontFamilyReference:c.fontFamily,fontSizeReference:c.fontSize,boldReference:c.bold,italicReference:c.italic,underlineReference:c.underline,fontColorReference:(0,d.__assign)((0,d.__assign)({},c.color),{selector:(0,Bt.hm)(rn.call(this,!1),void 0,void 0)}),displayUnitsReference:c.labelDisplayUnits,precisionReference:c.labelPrecision,backgroundReference:c.backgroundColor});default:return}}}function yo(r,e){if(!e){var i,a=_.first(r).visualObjects;if(!(a.length>0))return;i=a[0];var s,n=!this.showLabelPerSeries();!n&&!_.isEmpty(i.selectorsByColumn)&&(s=(0,Be.fd)((0,Be.tV)(i.selectorsByColumn)));var o=n?Dt.mi.labels.show:Dt.mi.labels.showSeries;switch(i.objectName){case"columns":case"ribbon":var l="ribbon"===i.objectName,u=(0,d.__assign)({},l?Dt.gE.ribbonBands.fillColor:Dt.gE.dataPoint.fill),c=[{type:1,destinationInfo:(0,d.__assign)((0,d.__assign)({},u),{selector:this.data.series.length>1?s:void 0}),label:this.localizer(l?"Format_Ribbon":this.isBar?"Format_Bars":"Format_Columns")}];return this.supportsTotalLabels()&&c.unshift((0,d.__assign)((0,d.__assign)({type:2},Dt.mi.totals.show),{enabledLabel:this.localizer("Format_AddTotalLabels")})),c.unshift({type:0,excludedResetFormattingIds:[Dt.mi.totals.show,(0,d.__assign)((0,d.__assign)({},o),{selector:s})]},(0,d.__assign)((0,d.__assign)({type:2},o),{enabledLabel:this.localizer("Format_AddDataLabels"),selector:s})),c;default:return}}}function mo(r){switch(d3.select(r).attr(We.Ez)){case"columns":var t=d3.select(r).datum();return Ds.call(this,t.seriesIndex);case"ribbon":return t=d3.select(r).datum(),Ds.call(this,t.d1.seriesIndex);case"data-labels":case"series-labels":var i=(0,Bt.wT)(r,this.data.series);if(i)return i;default:return}}function Ds(r){var e,t=this.data.series;if(!_.isEmpty(t)&&r>=0){var a=t[r];return null===(e=a?.identity)||void 0===e?void 0:e.getSelectorsByColumn()}}function So(r,e){var t=[];if(this.featureSwitches.onObject&&1===e){var a=this.isComboChart?xs.OA:Dt.mi,i=this.data.series.map(function(s){var o;return{selector:s.identity.getSelector(),value:null===(o=s.labelSettings)||void 0===o?void 0:o.show}}),n=[Mr.v.create(a.labels.backgroundColor,this.data.dataLabelsSettings.enableBackground).onToggleEnabled(Ka.W.createBooleanDataViewObjectChange(a.labels.enableBackground,!0,{inheritSelector:!0})),Tr.$.create(a.labels.backgroundColor,this.data.dataLabelsSettings.enableBackground).onToggleEnabled(Ka.W.createBooleanDataViewObjectChange(a.labels.enableBackground,!0)),Mr.v.create(a.labels.showSeries,this.data.dataLabelsSettings.show,i).onToggleEnabled(Ka.W.createBooleanDataViewObjectChange(a.labels.showByDefault,!1),Ka.W.createBooleanDataViewObjectChange(a.labels.show,!0)).onToggleDisabled(Ka.W.createRevertToDefaultDataViewObjectChange("labels")),Tr.$.create(a.labels.show,this.data.dataLabelsSettings.show).onToggleDisabled(Ka.W.createRevertToDefaultDataViewObjectChange("labels")),Tr.$.create(a.totals.backgroundColor,this.data.totalLabelsSettings.enableBackground).onToggleEnabled(Ka.W.createBooleanDataViewObjectChange(a.totals.enableBackground,!0)).onToggleDisabled(Ka.W.createRevertToDefaultDataViewObjectChange("totals")),Mr.v.create(Dt.gE.dataPoint.borderColor,this.data.columnStyle.border.strokeShow).onToggleEnabled(Ka.W.createBooleanDataViewObjectChange(Dt.gE.dataPoint.borderShow,!0,{inheritSelector:!0,required:!0}))];t=(0,d.__spreadArray)((0,d.__spreadArray)([],t,!0),$e.o.getDataViewObjectsBehaviorChanges(r,n),!0)}return t}var Br=b(3406),xo=function(r){function e(t){var a=r.call(this,t)||this;return a.options=t,T.fF.assertValue(t.columnChartType,"columnChartType"),a}return(0,d.__extends)(e,r),Object.defineProperty(e.prototype,"columnChartType",{get:function(){return this.options.columnChartType},enumerable:!1,configurable:!0}),e.prototype.initRenderer=function(t){r.prototype.initRenderer.call(this,t),this.svg.classed(e.ClassName,!0),this.unclippedGraphicsContext=this.svg.append("g").classed("columnChartUnclippedGraphicsContext",!0),this.mainGraphicsContext=this.unclippedGraphicsContext.append("svg").classed("mainGraphicsContext",!0),this.useManagedTabIndex=t.useManagedTabIndex,this.interactivityService&&(this.mainGraphicsContext.attrs({"aria-label":this.localizer("Visual_Plot"),"data-automation-type":"mainGraphicsContext",role:"group"}).classed(Da.Pg,!It.M.isInternetExplorerOrEdge()),t.useManagedTabIndex?(this.mainGraphicsContext.classed(Ra.rG.class,!0),this.mainGraphicsContext.attr(Ia.Rh,!0)):this.mainGraphicsContext.attrs({tabindex:0,focusable:!0}))},Object.defineProperty(e.prototype,"isBar",{get:function(){return Ht.hg(this.columnChartType)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isColumn",{get:function(){return Ht.t3(this.columnChartType)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isStacked",{get:function(){var a;return Ht.C3(this.columnChartType,null===(a=this.data)||void 0===a?void 0:a.series.length)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isStacked100",{get:function(){return Ht.Ds(this.columnChartType)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isClustered",{get:function(){return Ht.V5(this.columnChartType)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasRibbonBands",{get:function(){var a;return(null===(a=this.data.ribbonBands)||void 0===a?void 0:a.show)&&!this.isComboChart},enumerable:!1,configurable:!0}),e.prototype.isYCategorical=function(){return this.isBar},e.sliceSeries=function(t,a,i){void 0===i&&(i=0);var n=[];if(t&&t.length>0)for(var s=0,o=t.length;s<o;s++)n[s]=(0,xe.ED)(t[s]),n[s].data=t[s].data.filter(function(l){return l.categoryIndex>=i&&l.categoryIndex<a});return n},e.getInteractiveColumnChartDomElement=function(t){return t.children("svg").get(0)},e.prototype.setData=function(t,a){T.fF.assertValue(t,"dataViews");var n=Ht.L2(this.style,this.isStacked100);if(this.data=this.originalData={categories:[],categoryFormatter:null,series:[],totals:[],valuesMetadata:[],categoryData:[],legendData:null,hasHighlights:!1,categoryMetadata:null,isScalar:!1,dataLabelsSettings:n,titleDataLabelsSettings:n,detailDataLabelsSettings:n,seriesLabelSettings:yt(this.style),hasDynamicSeries:!1,columnStyle:{fillColor:void 0,fillTransparency:Ht.fl,border:Ht.nO(this.style)},layout:Ht.HQ,ribbonBands:(0,d.__assign)({show:!1},Ht.bS(this.style))},t.length>0){var s=this.dataView=t[0];if(s&&s.categorical){var o=s.categorical.categories,u=P.getCategoryValueType(o&&o.length>0?o[0].source:null),c=(0,Gt.n$)(s),v=(0,oe.PX)(s.metadata?s.metadata.objects:null,K.p.categoryAxis.axisType,u,void 0,c);this.converter=ao.create({dataView:s,style:this.style,isScalar:v,multipleInfo:a,chartType:this.columnChartType,interactivityService:this.interactivityService,tooltipsEnabled:this.tooltipsEnabled,hostServices:this.hostService,isComboChart:this.isComboChart,supportsTotalLabels:!a&&this.supportsTotalLabels(),featureSwitches:this.featureSwitches}),this.data=this.originalData=this.converter.convert()}}},e.prototype.hasLegend=function(){return this.data&&(this.data.hasDynamicSeries||this.data.series&&this.data.series.length>1)},e.prototype.getSeriesLabelsSettings=function(){return(0,xe.ED)(this.data).seriesLabelSettings},e.prototype.getFormattingCards=function(t){return lo.call(this,t)},e.prototype.getSubSelectionStyles=function(t){return po.call(this,t)},e.prototype.getSubSelectionShortcuts=function(t,a){return yo.call(this,t,a)},e.prototype.getSelectorsByColumnFromSubselectedElement=function(t){return mo.call(this,t)},e.prototype.getDataViewObjectLayerChanges=function(t,a){return So.call(this,t,a)},e.prototype.showSeriesCard=function(){return!(this.isComboChart&&!this.data.hasY2Role)},e.prototype.showLabelPerSeries=function(){var t=this.originalData;return t.series.length>1||!t.categoryMetadata||this.isComboChart},e.prototype.calculateAxesProperties=function(t){var a,i,n,s,o,l,u,c,v;this.updateCurrentViewport(t);var y=null!==(n=null===(i=null===(a=this.data)||void 0===a?void 0:a.categories)||void 0===i?void 0:i.length)&&void 0!==n?n:0,m=this.data?(0,p.is)({data:this.data,availableWidth:Math.max(0,this.isBar?this.availableHeight:this.availableWidth),categoryCount:y,preferredCategoryWidth:null!==(o=null===(s=this.data)||void 0===s?void 0:s.preferredCategoryWidth)&&void 0!==o?o:null,domain:null===(u=P.createDomain(this.data.series,P.getCategoryValueType(null===(l=this.data)||void 0===l?void 0:l.categoryMetadata),this.getVisualCategoryAxisIsScalar(),[t.categoryAxisOptions.includeDomain]))||void 0===u?void 0:u.domain,isScalar:this.getVisualCategoryAxisIsScalar(),cartesianOptions:this.options,trimOrdinalDataOnOverflow:t.trimOrdinalDataOnOverflow,outerPaddingRatio:t.outerPaddingRatio,innerPaddingRatio:t.innerPaddingRatio,axisZoom:t.axisZoom}):(0,p.u8)(),w=this.adjustLayoutForScroll(this.data,y,t.trimOrdinalDataOnOverflow,m);this.updateCategoryLayout(m);var C=this.createCategoryAxis(t),D=this.createValueAxis(t),O=(null===(c=w.totalLabelsSettings)||void 0===c?void 0:c.show)&&this.supportsTotalLabels(),F=(null===(v=w.dataLabelsSettings)||void 0===v?void 0:v.show)&&this.isClusteredOptimized;if(O||F){var N=P.mergeScalarAxisDomains(P.createScalarDomainOptions(this.adjustDomainForLabels(D),0,[!0,!0]),t.valueAxisOptions.includeDomain,P.createScalarDomainOptions(D.scale.domain(),0));D=this.createValueAxis(t,N,!0)}return[this.isBar?D:C,this.isBar?C:D]},e.prototype.setAxesLayout=function(t){var a,i,n;this.updateCurrentViewport(t.layout),this.xAxisProperties=t.layout.axes.x,this.yAxisProperties=t.layout.axes.y1;var s=this.data?{categoryCount:_.isEmpty(this.categoryAxis.categoryIdentities)?0:this.categoryAxis.categoryIdentities.length,categoryThickness:this.categoryAxis.categoryThickness,outerPaddingRatio:this.categoryAxis.outerPaddingRatio,innerPaddingRatio:this.categoryAxis.innerPaddingRatio,isScalar:this.getVisualCategoryAxisIsScalar()}:(0,p.u8)();this.data=this.adjustLayoutForScroll(this.data,null!==(n=null===(i=null===(a=this.data)||void 0===a?void 0:a.categories)||void 0===i?void 0:i.length)&&void 0!==n?n:0,t.trimOrdinalDataOnOverflow,s),this.updateCategoryLayout(s)},e.prototype.getAxesDomains=function(t,a){var i,n,s={};if(!this.data)return s;if(a.categoryAxis&&this.data.isScalar){var o=P.createDomain(this.data.series,null!==(n=null===(i=this.data.categoryMetadata)||void 0===i?void 0:i.type)&&void 0!==n?n:k.Ge.fromDescriptor({text:!0}),this.data.isScalar,void 0);o&&(P.assertScalarDomain(o.domain),s.categoryAxis=[o.domain[0],o.domain[1]])}if(a.valueAxis){var l=void 0;if(this.isStacked){var u=Ht.VY(this.data.series,this.isStacked100);l=[u.min,u.max]}else l=P.createUncertaintyAwareValueDomain(this.data.series,t)||P.emptyDomain;var c=l[0],v=l[1];void 0!==c&&void 0!==v&&(s.valueAxis=[c,v])}return s},e.prototype.updateCategoryLayout=function(t){var a;a=this.getPreferredPlotArea(t),this.height=a.height,this.width=a.width,this.categoryLayout=t,this.applyInteractivity(),this.categoryBandScale=d3.scaleBand().range([0,this.categoryWidth]),this.isClusteredOptimized?(this.activeData.layout.clusteredGapSize&&(this.activeData.layout.clusteredGapOverlaps?this.categoryBandScale=d3.scaleBand().range([0,this.categoryWidth*(1-this.activeData.layout.clusteredGapSize/100)]):this.categoryBandScale.paddingInner(this.activeData.layout.clusteredGapSize/100)),this.categoryBandScale.domain(this.activeData.series.map(function(i){return i.index.toString()}))):this.categoryBandScale.domain(["0"])},e.prototype.adjustLayoutForScroll=function(t,a,i,n){if(this.clippedData=void 0,t&&!n.isScalar&&!this.options.isScrollable&&i){var s=Math.min(a,n.categoryCount);if(s!==a){var o=(0,xe.ED)(t);o.series=e.sliceSeries(o.series,s),o.categories=o.categories.slice(0,s),o.categoryIdentities&&(o.categoryIdentities=o.categoryIdentities.slice(0,s)),this.clippedData=o}}return t},e.prototype.getLabelUnitsAndPrecision=function(){return(0,nt.d6)(this.xAxisProperties,this.data.dataLabelsSettings)},e.prototype.adjustDomainForLabels=function(t){var a=this.activeData,i=t.dataDomain;if(i&&null!=i[0]&&null!=i[1]){var n=i[0].toString(),s=i[1].toString(),o="";a.series.length>0&&a.series[0].data.length>0&&(o=a.series[0].data[0].labelFormatString);var l=(0,G.fI)(),u=(0,nt.d6)(t,a.totalLabelsSettings),c=l.getOrCreate(o,a.totalLabelsSettings,u.units,a.totalLabelsSettings.precision),v=(0,nt.Bw)(c.format(n)),y=(0,nt.Bw)(c.format(s)),m=(0,J.qk)(a.totalLabelsSettings.fontProperties,v),w=(0,J.qk)(a.totalLabelsSettings.fontProperties,y),C=void 0,D=void 0,O=void 0;this.isBar?(C=te.b.measureSvgTextWidth(m),D=te.b.measureSvgTextWidth(w),O=t.invertAxis?-1:1):(C=te.b.estimateSvgTextHeight(m),D=te.b.estimateSvgTextHeight(w),O=t.invertAxis?1:-1);var F=t.scale,N=F(i[0])-O*(C+g.FJ),U=F(i[1])+O*(D+g.FJ),X=!1,re=!1;return a.totalLabelsSettings.showPositiveAndNegative?(X=a.hasPositive,re=a.hasNegative):(X=a.hasNetPositive,re=a.hasNetNegative),[re?F.invert(N):void 0,X?F.invert(U):void 0]}},e.prototype.isMobileInteractiveLegend=function(){return this.mobileTileInteractive&&!(this.data&&this.data.multipleIdentity)},e.prototype.getClosestColumnIndex=function(t){for(var a=0,i=Number.MAX_VALUE,n=this.getGlyphCenters(),s=0;s<n.length;s++){var o=Math.abs(t-n[s]);o<i&&(i=o,a=s)}return a},e.prototype.applyInteractivity=function(){var t=this;if(this.isMobileInteractiveLegend()){var a=function(){var o=d3.mouse(t.mainGraphicsContext.node()),c=t.getClosestColumnIndex(t.isColumn?o[0]:o[1]);t.selectColumn(c)},i=e.getInteractiveColumnChartDomElement(this.element);this.svg.on("click",a),d3.select(i).on("click",a).style("touch-action","none");var n=d3.drag().on("drag",a);this.svg.call(n),d3.select(i).call(n)}},e.prototype.selectColumn=function(t,a){void 0===a&&(a=!1),(a||this.lastInteractiveSelectedColumnIndex!==t)&&(Br.rT(this.mainGraphicsContext,this.CS.selector,t,this.lastInteractiveSelectedColumnIndex,a),this.moveHandle(t),this.cartesianVisualHost.updateLegend(this.createInteractiveLegendDataPoints(t)),this.lastInteractiveSelectedColumnIndex=t)},e.prototype.createInteractiveLegendDataPoints=function(t){var i,n,s,o,a=this,l=this.data;if(!l||_.isEmpty(l.series))return(0,x.Fe)(this.style);var u=K.p.general.formatString,c=null===(i=l.categories)||void 0===i?void 0:i[t],v=null!==(s=null===(n=l.categoryFormatter)||void 0===n?void 0:n.format(c))&&void 0!==s?s:c,y=null===(o=l.legendData)||void 0===o?void 0:o.dataPoints,m=l.series.map(function(w,C){var D,O=null===(D=a.converter)||void 0===D?void 0:D.getValueBySeriesAndCategory(C,t),F=l.valuesMetadata[C],N=y[C];return{marker:{show:!0,shape:Ma.ZO.circle,color:1===l.series.length?w.data.length>t&&w.data[t].columnStyle.fillColor:y.length>C&&N.marker.color,transparency:N.marker.transparency,stroke:N.marker.stroke},label:(0,ye.TO)(F,a.dataView.categorical.values,u),category:v,measure:(0,I.WU)(O,(0,I.EO)(F,u)),identity:z.l0.createNull(),selected:!1,index:C}});return(0,d.__assign)((0,d.__assign)({},(0,x.Fe)(this.style)),{dataPoints:m})},e.prototype.render=function(t,a,i){return Br.sY.call(this,t,i)},e.prototype.usesUngroupedRenderer=function(){return this.data.layout.clusteredGapOverlaps&&this.data.layout.clusteredGapSize>0},e.prototype.getFirstElement=function(t,a){void 0===a&&(a=!1);var i=this.activeData.series;if(_.isEmpty(i))return null;var o,l,n=t??i[0].data[0].categoryIndex,s=a?this.findSeriesIndex(i.length-1,n,!1):this.findSeriesIndex(0,n,!0);return s>=0?(o=this.data.series[s].data[n],l=this.getDataPointElement(s,n)):s=a?i.length-1:0,{element:l,targetCategoryIndex:n,targetSeriesIndex:s,noShape:o&&0===o.valueAbsolute}},e.prototype.getNextDataPoint=function(t,a,i){switch(i){case j.x0.NextCategory:t=e.findCategoryIndex(this.data.series[a].data,t,!0);break;case j.x0.PreviousCategory:t=e.findCategoryIndex(this.data.series[a].data,t,!1);break;case j.x0.NextSeries:(a=this.findSeriesIndex(a+1,t,!0))<0&&(t=e.loopIndex(t+1,this.data.categories.length),a=this.findSeriesIndex(0,t,!0));break;case j.x0.PreviousSeries:(a=a>0?this.findSeriesIndex(a-1,t,!1):-1)<0&&(t=e.loopIndex(t-1,this.data.categories.length),a=this.findSeriesIndex(this.data.series.length-1,t,!1))}var n,s;if(T.fF.assert(function(){return a>=0||t>=0},"We expect that categoryIndex or seriesIndex will always be valid."),a>=0&&t>=0){var o=this.data.series[a].data;this.data.hasHighlights&&(o=o.filter(function(l){return!l.highlight})),n=o[t],s=this.getDataPointElement(a,t)}else if(t<0)switch(i){case j.x0.NextCategory:t=e.loopIndex(t+1,this.data.categories.length);break;case j.x0.PreviousCategory:t=e.loopIndex(t-1,this.data.categories.length);break;default:T.fF.assertFail("categoryIndex should not be less than 0 unless we are navigating on categories.")}else switch(i){case j.x0.NextSeries:a=0;break;case j.x0.PreviousSeries:a=this.data.series.length-1;break;default:T.fF.assertFail("seriesIndex should be less than 0 unless we are navigating on series")}return this.isInViewport(s)?{element:s,targetCategoryIndex:t,targetSeriesIndex:a,noShape:n&&0===n.valueAbsolute}:this.getNextDataPoint(t,a,i)},e.prototype.validateDirection=function(t){return this.isBar&&!this.getVisualCategoryAxisIsScalar()&&(t===j.x0.NextSeries||t===j.x0.PreviousSeries)&&(t=t===j.x0.NextSeries?j.x0.PreviousSeries:j.x0.NextSeries),t},e.prototype.isInViewport=function(t){if(!t)return!0;var i=t.getBBox(),n=this.currentViewport;return i.y+i.height>0&&i.y<n.height&&i.x+i.width>0&&i.x<n.width},e.prototype.getDataPointElement=function(t,a){return this.mainGraphicsContext.selectAll(this.CS.selector).filter(function(n){return n.categoryIndex===a&&n.seriesIndex===t}).node()},e.prototype.findSeriesIndex=function(t,a,i){return(i?_.findIndex:_.findLastIndex)(this.data.series,function(s){return _.some(s.data,function(o){return o.categoryIndex===a&&null!=o.value})},t)},e.findCategoryIndex=function(t,a,i){var n=i?1:-1,s=_.findIndex(t,function(o){return o.categoryIndex===a});return s<0?s:t[s=e.loopIndex(s+n,t.length)].categoryIndex},e.loopIndex=function(t,a){return t>=a?0:t<0?a-1:t},e.prototype.getCategoryValueType=function(){return P.getCategoryValueType(this.data.categoryMetadata)},e.prototype.getVisualCategoryAxisIsScalar=function(){return!!this.data&&this.data.isScalar},e.prototype.getSupportedCategoryAxisType=function(){var t,a=P.getCategoryValueType(null===(t=this.data)||void 0===t?void 0:t.categoryMetadata);return(0,Y.c$)(a)?Ct.w.categorical:Ct.w.both},e.prototype.setFilteredData=function(t,a){var i=(0,xe.ED)(this.data);i.series=e.sliceSeries(i.series,a,t),i.categories=i.categories.slice(t,a),this.clippedData=i},e.prototype.supportsTotalLabels=function(){return!(this.data&&this.data.multipleIdentity)&&this.isStacked&&!this.isStacked100},e.prototype.supportsTrendLine=function(){if(this.data.multipleIdentity)return!1;var a=(0,ca.y)(this.dataView),i=this.getVisualCategoryAxisIsScalar();return 12===this.columnChartType&&i&&a.data.hasValues("Y")},e.prototype.supportsStaticReferenceLines=function(){return this.data&&!this.isValueAxisIrregular()},e.prototype.isValueAxisIrregular=function(){var t,a;return(null===(t=this.data)||void 0===t?void 0:t.layout.stackedGapSize)>0&&(null===(a=this.data)||void 0===a?void 0:a.layout.stackedGapExplodes)&&this.isStacked},e.prototype.supportsStackedGapExplode=function(){return this.isStacked&&!this.isStacked100&&!this.isComboChart},e.prototype.getCartesianVisualCapabilities=function(){var t;return{supportsHierarchicalCategoryAxis:!0,isValueAxisIrregular:this.isValueAxisIrregular(),axesCapabilities:{categoryAxis:{domainAggregateRole:Dt.au.category,supportedDomainAggregates:null!==(t=this.data)&&void 0!==t&&t.isScalar?3:0},valueAxis:{domainAggregateRole:Dt.au.y,supportedDomainAggregates:84===this.columnChartType||this.isStacked?1:3}}}},e.prototype.getStaticSeriesRole=function(){return"Y"},Object.defineProperty(e.prototype,"CS",{get:function(){return Ht.t3(this.columnChartType)?{class:"column",selector:".column"}:{class:"bar",selector:".bar"}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"chartTypeOptimized",{get:function(){var a,i=this.columnChartType,n=Ht.C3(i,null===(a=this.data)||void 0===a?void 0:a.series.length);return 18!==i||n?20!==i||n?i:12:10},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isStackedOptimized",{get:function(){return Ht.C3(this.chartTypeOptimized,2)||this.hasRibbonBands},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isClusteredOptimized",{get:function(){return Ht.V5(this.chartTypeOptimized)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"valueAxis",{get:function(){return this.isColumn?this.yAxisProperties:this.xAxisProperties},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"categoryAxis",{get:function(){return this.isColumn?this.xAxisProperties:this.yAxisProperties},enumerable:!1,configurable:!0}),e.prototype.createCategoryAxis=function(t,a){var i,n,s,o,l=this.activeData,u=(i=this.categoryLayout).isScalar,c=i.outerPaddingRatio,v=i.categoryThickness,y=t.axisZoom,m=t.innerPaddingRatio,w=(n=t.categoryAxisOptions).axis,C=n.includeDomain,D=P.createAxis({pixelSpan:this.isColumn?this.width:this.height,domainOptions:P.createDomain(l.series,null!==(o=null===(s=l.categoryMetadata)||void 0===s?void 0:s.type)&&void 0!==o?o:k.Ge.fromDescriptor({text:!0}),u,[a??C]),axisZoom:y,metaDataColumn:l.categoryMetadata,formatString:(0,I.EO)(l.categoryMetadata,K.p.general.formatString),outerPadding:v*c,outerPaddingRatio:c,isCategoryAxis:!0,isScalar:u,isVertical:this.isBar,categoryThickness:v,useTickIntervalForDisplayUnits:!0,getValueFn:function(F,N){return(0,p.dZ)(l,F,N,u)},axis:(0,d.__assign)((0,d.__assign)({},w),{invertAxis:w.invertAxis&&u}),margin:this.margin,allowSingleScalarTick:u,preventNice:P.hasForcedDomain(C),innerPaddingRatio:m,orientation:this.isColumn?Y.Or.bottom:w.switchAxisPosition?Y.Or.right:Y.Or.left});return D.categoryIdentities=l.categoryIdentities,this.categoryLayout.categoryThickness=D.categoryThickness,D},e.prototype.createValueAxis=function(t,a,i){var s,v,n=this,o=t.axisZoom,l=t.forcedTickCount,u=t.valueAxisOptions,c=u.axis;if(T.fF.assert(function(){return!(n.isBar&&void 0!==l)},"Cannot have bar chart as combo chart."),T.fF.assert(function(){return!(n.isClusteredOptimized&&n.isStacked100)},"Cannot have 100% clustered chart."),a??(a=u.includeDomain),this.isClusteredOptimized)v=P.createUncertaintyAwareValueDomain(this.activeData.series)||P.emptyDomain;else{var y=Ht.VY(this.activeData.series,this.isStacked100);v=[y.min,y.max]}var m=P.mergeScalarAxisDomains(a,P.createScalarDomainOptions(v,0)),w=P.createAxis({pixelSpan:this.isColumn?this.availableHeight:this.width,domainOptions:m,zeroScalarDomain:Ht.iR,metaDataColumn:this.activeData.valuesMetadata,formatString:this.isStackedOptimized&&this.isStacked100?this.hostService.getLocalizedString("Percentage"):null!==(s=P.getAxisFormatString(this.activeData.series))&&void 0!==s?s:(0,I.EO)(this.activeData.valuesMetadata[0],K.p.general.formatString),outerPadding:0,isScalar:!0,isVertical:this.isColumn,useTickIntervalForDisplayUnits:!0,isCategoryAxis:!1,shouldClamp:P.scaleShouldClamp(m?.domain,v),preventNice:P.hasForcedDomain(m)||this.isValueAxisIrregular(),includeZero:P.shouldIncludeZero(m),axisZoom:o,forcedTickCount:l,axis:c,margin:this.margin,skipAxisZoomUpdate:i,is100Pct:this.isStackedOptimized&&this.isStacked100,orientation:this.isColumn?c.switchAxisPosition?Y.Or.right:Y.Or.left:Y.Or.bottom});return w.isIrregular=this.isValueAxisIrregular(),this.isBar&&w.d3Axis.tickSizeInner(-this.availableHeight).tickSizeOuter(0),w},Object.defineProperty(e.prototype,"categoryWidth",{get:function(){return this.categoryLayout.categoryThickness*(1-this.categoryLayout.innerPaddingRatio)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"columnWidth",{get:function(){var a=this.activeData.series.length;return a>=2&&this.activeData.layout.clusteredGapSize>0&&this.activeData.layout.clusteredGapOverlaps?this.categoryWidth*(1+(a-1)*this.activeData.layout.clusteredGapSize/100)/a:this.categoryBandScale.bandwidth()},enumerable:!1,configurable:!0}),e.prototype.createLabelDataPoints=function(t){return Ht.Q4.call(this,t)},e.prototype.createTotalLabelDataPoints=function(t){return Ht.$3.call(this,t)},e.prototype.createUncertaintyLabels=function(t){return Ht.EX.call(this,t)},Object.defineProperty(e.prototype,"ribbonGapSize",{get:function(){var a;return this.categoryLayout.categoryThickness*this.categoryLayout.innerPaddingRatio*(null!==(a=this.data.layout.ribbonGapSize)&&void 0!==a?a:0)/100},enumerable:!1,configurable:!0}),e.prototype.drawColumns=function(t){var a,i=this;T.fF.assertValue(this.activeData,"data should be defined"),this.glyphsCenters=null,this.layout=this.getColumnLayout();var o,l,c,s=!0,u=Br.kC.call(this);return this.animator&&t&&(o=(a=this.animator.animate({chart:this,series:u,valueAxisProps:this.isClusteredOptimized?this.valueAxis:void 0,isBar:this.isClusteredOptimized?this.isBar:void 0,columnWidth:this.isClusteredOptimized?this.columnWidth:void 0,layout:this.layout,interactivityService:this.interactivityService})).shapes,l=a.uncertaintyShapes,s=a.failed),s&&(l=Br.WR.call(this,{isBar:this.isBar,valueAxisProps:this.isStackedOptimized?void 0:this.valueAxis,layout:this.isStackedOptimized?void 0:this.layout,columnWidth:this.isStackedOptimized?void 0:this.columnWidth,interactivityService:this.isStackedOptimized?void 0:this.interactivityService}),o=Br.Wv.call(this,u),this.isClusteredOptimized&&(0,en.LL)(this.mainGraphicsContext,[Ht.L0,Ei.jx])),Br.hJ.call(this,t,this.animator),this.dragDataPoint&&(c=function(y){y.identity&&i.hostService.onDragStart({event:d3.event,data:{data:y.identity.getSelector()}})}),Br.bk(o,c),{eventGroup:this.mainGraphicsContext,shapesSelection:o,uncertaintyShapes:this.isClusteredOptimized?l:void 0,labelDataPointGroups:(0,d.__spreadArray)((0,d.__spreadArray)((0,d.__spreadArray)([],this.createLabelDataPoints(this.style),!0),this.createUncertaintyLabels(this.style),!0),this.createTotalLabelDataPoints(this.style),!0),animateLabels:!s}},Object.defineProperty(e.prototype,"scaledMargin",{get:function(){var a,i=null!==(a=this.currentViewport.scale)&&void 0!==a?a:1;return{top:this.margin.top*i,right:this.margin.right*i,bottom:this.margin.bottom*i,left:this.margin.left*i}},enumerable:!1,configurable:!0}),e.prototype.getGlyphCenters=function(){var t=this;if(!this.glyphsCenters&&this.activeData.series.length>0){var a=0;this.categoryLayout.isScalar||(a=this.categoryWidth/2),this.glyphsCenters=this.activeData.series[0].data.map(function(n){return t.categoryAxis.scale(t.categoryLayout.isScalar?n.categoryValue:n.categoryIndex)+a})}return this.glyphsCenters},e.prototype.moveHandle=function(t){var a,i=this.getGlyphCenters(),n=d3.select(".interactive-hover-line");if(!n.empty()&&!this.columnSelectionLineHandle&&(this.columnSelectionLineHandle=d3.select(n.node().parentElement)),!i||i.length<=1)null===(a=this.columnSelectionLineHandle)||void 0===a||a.remove();else{var s=i[t];this.columnSelectionLineHandle?(this.columnSelectionLineHandle.select("line").attrs(this.isColumn?{x1:s,x2:s}:{y1:s,y2:s}),this.columnSelectionLineHandle.select("circle").attrs(this.isColumn?{cx:s}:{cy:s})):(this.columnSelectionLineHandle=this.unclippedGraphicsContext.append("g"),this.columnSelectionLineHandle.append("line").classed("interactive-hover-line",!0).attrs(this.isColumn?{x1:s,x2:s,y1:0,y2:this.height}:{y1:s,y2:s,x1:0,x2:this.width}),this.columnSelectionLineHandle.append("circle").classed("drag-handle",!0).attrs(this.isColumn?{cx:s,cy:this.height}:{cy:s,cx:0}).attr("r","6px"))}},e.prototype.getColumnLayout=function(){var t=this,a=this.columnWidth,i=this.categoryLayout.isScalar,n=this.valueAxis.invertAxis,s=this.valueAxis.scale,o=this.categoryAxis.scale,l=i?this.categoryWidth/2:0,u=function(ee){var ue=ee.catSize,ke=ee.catBase,Ke=ee.valueSize,Re=ee.valueBase;return t.isColumn?{width:ue,x:ke,height:Ke,y:Re}:{height:ue,y:ke,width:Ke,x:Re}};if(this.isStackedOptimized){var c={catSize:function(ee){return a},catBase:function(ee){return o(i?ee.categoryValue:ee.categoryIndex)-l}},v=function(ee,ue){return ee!==ue},y=function(ee){return v(v(ee,t.isBar),n)},m=this.data.layout.stackedGapExplodes?0:this.data.layout.stackedGapSize,w=function(ee){return ee.indexFromZeroValue>0?m:0},C=function(ee){return Math.abs(s(ee.originalPosition-Math.abs(ee.originalValue))-s(ee.originalPosition))},O=function(ee,ue){void 0===ue&&(ue=!1);var ke=ue?ee.originalPosition:ee.position,Re=Math.abs(s(ke-Math.abs(ue?ee.originalValue:ee.value))-s(ke)),Je=w(ee);return 0===Je?Re:ee.highlight?Re*(1-Math.min(1,Je/C(ee))):Math.min(Math.max(1,Re-Je),Re)},F=function(ee,ue){void 0===ue&&(ue=!1);var ke=ue?ee.originalPosition:ee.position,Ke=ue?ee.originalValue:ee.value,Re=s(v(n,t.isColumn)?ke:ke-Math.abs(Ke)),Je=w(ee);if(0===Je)return Re;if(!ee.highlight||ue||y(Ke<0)){if(!y(Ke<0))return Re;Re+=Je}else{var Ze=function(ee){return Math.abs(s(ee.position-Math.abs(ee.value))-s(ee.position))}(ee),Lt=C(ee);Re-=Je*((Lt-Ze)/Lt)}var Xt=s(v(n,t.isColumn)?ee.originalPosition-Math.abs(ee.originalValue):ee.originalPosition);return Math.min(Re,Xt)};return{shapeLayout:u((0,d.__assign)((0,d.__assign)({},c),{valueSize:function(ee){return O(ee)},valueBase:function(ee){return F(ee)}})),shapeLayoutWithoutHighlights:u((0,d.__assign)((0,d.__assign)({},c),{valueSize:function(ee){return O(ee,!0)},valueBase:function(ee){return F(ee,!0)}})),zeroShapeLayout:u((0,d.__assign)((0,d.__assign)({},c),{valueSize:function(ee){return 0},valueBase:function(ee){return s(ee.value>=0?ee.position-ee.valueAbsolute:ee.position)}}))}}var N=.5*a,U=N/2,X=s(0),re=function(ee){return X+(0,Y.sc)(s,ee,0)},pe=function(ee){return o(i?ee.categoryValue:ee.categoryIndex)+t.categoryBandScale("".concat(ee.seriesPosition))-l};return{shapeLayout:u({catSize:function(ee){return ee.drawThinner?N:a},catBase:function(ee){return pe(ee)+(ee.drawThinner?U:0)},valueSize:function(ee){return Math.abs((0,Y.sc)(s,0,ee.value))},valueBase:this.isColumn?function(q){return re(n?Math.min(0,q.value):Math.max(0,q.value))}:function(q){return re(n?Math.max(0,q.value):Math.min(0,q.value))}}),shapeLayoutWithoutHighlights:u({catSize:function(ee){return a},catBase:function(ee){return pe(ee)},valueSize:function(ee){return Math.abs((0,Y.sc)(s,0,ee.originalValue))},valueBase:this.isColumn?function(q){return re(n?Math.min(0,q.originalValue):Math.max(0,q.originalValue))}:function(q){return re(n?Math.max(0,q.originalValue):Math.min(0,q.originalValue))}}),zeroShapeLayout:u({catSize:function(ee){return ee.drawThinner?N:a},catBase:function(ee){return pe(ee)+(ee.drawThinner?U:0)},valueSize:function(ee){return 0},valueBase:this.isColumn?function(q){return X}:function(q){return re(n?Math.max(0,q.value):Math.min(0,q.value))}}),uncertaintyLayout:{lower:function(ee){var ue,ke;if(null!=(null===(ue=ee.uncertainty)||void 0===ue?void 0:ue.lower))return s(null===(ke=ee.uncertainty)||void 0===ke?void 0:ke.lower)},upper:function(ee){var ue,ke;if(null!=(null===(ue=ee.uncertainty)||void 0===ue?void 0:ue.upper))return s(null===(ke=ee.uncertainty)||void 0===ke?void 0:ke.upper)}}}},e.ClassName="columnChart",e}(On),He=b(69871),kn=b(42589),bo=b(40006),ws=b(80822),dr=b(51995),En=b(94038),nn=b(37865),Co=b(28326),mi=b(6714),yn=b(17772),Ao=b(45028),Do=b(66123),wo=b(92374),_o=b(63892),Lo=b(93907),_s=(0,Z.CH)("tooltip-overlay"),Ls={min:1,max:20};function es(r){return void 0===r&&(r=!1),(0,d.__assign)({strokeShow:!0,strokeColor:void 0,strokeTransparency:0,strokeWidth:2,strokeLineJoin:Ai.t.round,strokePattern:L.Dv.solid,strokeDashArray:L.YU,strokeDashCap:L.xm,strokeAutoScale:!1,markerProperties:{show:!1,showMarkerByDefault:!0,shape:Ma.ZO.circle,size:Do.$V,color:void 0,transparency:0,rotation:0,stroke:{strokeShow:!0,strokePattern:L.Dv.solid,strokeColor:void 0,strokeTransparency:0,strokeWidth:void 0}},areaShow:r,areaColor:void 0,areaTransparency:60,areaMatchStrokeColor:!0},(0,yn.aQ)())}function Rn(r){return r.strokeWidth/2+3}function ts(r,e,t){void 0===e&&(e=!1),void 0===t&&(t=!1);var a=(0,G.bT)({style:r,labelColor:Ue.v.getThemeColor(r,g.uQ),textClassName:"smallLightLabel"}).fontProperties;return(0,d.__assign)((0,d.__assign)({show:!1,showByDefault:!0},a),{bold:!1,italic:!1,underline:!1,position:ka.h.auto,horizontalAlignment:wo.D.center,minimumOffset:void 0,maximumOffset:void 0,labelDensity:g.go,labelContainerMaxWidth:Ao.w9,labelContentLayout:_o.v.SingleLine,optimizeLabelDisplay:!1,enableValueDataLabel:!t,fontProperties:a,displayUnits:0,precision:g.NZ,valueCustomFormatString:g.M3,enableTitleDataLabel:!1,titleFontProperties:a,titleLabelDisplayUnits:0,titleLabelPrecision:g.NZ,titleCustomFormatString:g.M3,enableDetailDataLabel:t,detailFontProperties:a,detailLabelDisplayUnits:0,detailLabelPrecision:g.NZ,detailCustomFormatString:g.M3,detailContentType:t?Lo.W.Percent:void 0,leaderLine:(0,Bt.sW)(r),enableBackground:e,backgroundColor:e?Ue.v.getThemeColor(r,Le.U):void 0,backgroundTransparency:e?g.r_:void 0})}function In(r){return _.some(r.anomalyDetections,function(e){return!_.isEmpty(e.anomaliesCategoryIndex)})}function as(r){return r.isAnomaly}function Ps(r){return r&&null!=r.points}function Ms(r,e,t){return zr.convertSvgXToClientX(er(r,e),r.currentViewport.scale,t)}var zr={convertSvgXToClientX:function(e,t,a){return e*t+a},convertSvgYToClientY:function(e,t,a){return e*t+a}};function Ts(r,e){return r.activeData.isScalar?e.categoryValue:e.categoryIndex}function er(r,e){return r.xAxisProperties.scale(Ts(r,e))+r.horizontalOffset}function Or(r,e){var t;return e.isY2?null===(t=r.y2AxisProperties)||void 0===t?void 0:t.scale(e.value):r.yAxisProperties.scale(r.isStackedArea?e.stackedValue:e.value)}function Os(r,e){var t,a;return e.isY2?null===(t=r.y2AxisProperties)||void 0===t?void 0:t.scale(e.uncertainty.lower):null===(a=r.yAxisProperties)||void 0===a?void 0:a.scale(e.uncertainty.lower)}function Fs(r,e){var t,a;return e.isY2?null===(t=r.y2AxisProperties)||void 0===t?void 0:t.scale(e.uncertainty.upper):null===(a=r.yAxisProperties)||void 0===a?void 0:a.scale(e.uncertainty.upper)}var Vs=function(){function r(e){this.options=e,T.fF.assertValue(e.dataView,"dataView"),T.fF.assertValue(e.style,"style");var t=e.dataView,a=(0,p.Vk)(t.metadata);this.isScalar=(0,p.qU)(this.options.isScalar,a);var i=(0,p.Zo)(t.categorical,this.isScalar).category;this.isDateTime=(0,Y.v9)((0,P.getCategoryValueType)(i.source,this.isScalar)),this.reader=(0,ca.G)(t,{staticSeriesRoleNames:this.valueRoleNames,colorOptions:{visualStyle:e.style,valueRole:this.primaryValueRole,ignoreDefaultColor:e.isComboChart,ignoreDefaultCategoryColor:!0},formatStringProp:He.zK.general.formatString,errorRangeProp:la.Qx.errorRange})}return Object.defineProperty(r.prototype,"primaryValueRole",{get:function(){return this.options.isComboChart?mi.R.Y2:mi.R.Y},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"secondaryValueRole",{get:function(){return this.options.isComboChart?void 0:mi.R.Y2},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"valueRoleNames",{get:function(){return[this.primaryValueRole,this.secondaryValueRole].filter(function(t){return t})},enumerable:!1,configurable:!0}),r.convert=function(e){return new r(e).convert()},Object.defineProperty(r.prototype,"staticObjects",{get:function(){return this.reader.objects.getStaticObjects()},enumerable:!1,configurable:!0}),r.prototype.convert=function(){var e,t,a,i,n,s,o,l,u,c,v,y,m,w,C,D,O,F,N,U,X,re,pe,q,Ta,ee=this.options,ue=ee.dataView,ke=ee.style,Ke=ee.interactivityService,Re=ee.isStacked,Je=ee.isStacked100,Ze=ee.isComboChart,Lt=ee.anomalyDetectionDataView,Xt=ee.tooltipsEnabled,Yt=void 0===Xt||Xt,wt=ee.multipleInfo,Kt=ee.hostServices,da=(0,p.Vk)(ue.metadata),ua=(0,p.Zo)(ue.categorical,this.isScalar),Mt=ua.category,ea=ua.useScalarKeys,pa=ua.scalarKeys;ea&&((Ta=(0,xe.ED)(Mt.source)).type={dateTime:!0});var ei,ui,Na,Ga,Ha=He.zK.general.formatString,xa=[],$a=[],li=[],Xa=[],La=ue.categorical.values,qa=!(!La||!La.source),ta=ts(ke,Ze,Je),Ua=Ue.v.create(ke);if(wt){ei=_.first(wt.sources).metadata.queryName,Ga=wt.sources.map(function(Ba){return(0,z.Y)(Ba.metadata,Ba.value,wt.identity)}),ui=(new z.dw).withColumnIdentity(wt.identity,ei,Ga).createSelectionId();var hi=(0,Jn.F)(Ha);Na=(0,Ge.ML)(_.map(wt.sources,function(Ba){return hi(Ba.value,Ba.metadata)}))}this.staticObjects&&(0,G.AR)(this.staticObjects.labels,ta,void 0,ke,Ze);var ja=(0,d.__assign)((0,d.__assign)({},ta),{show:!1});this.options.supportsTotalLabels&&this.staticObjects&&(0,G.ww)(this.staticObjects.totals,ja,!1,ke,Ze);var Bi=null!==(e=La?.grouped())&&void 0!==e?e:void 0,hr=Re&&La?.length>0?_.times(La[0].values.length,function(){return 0}):[],ri=this.reader.data,Ii=this.reader.columns,_i=ri.hasCategories()?ri.getCategoryCount():1,qt=ri.getSeriesCount();this.seriesColors=this.allocateSeriesColors(),this.staticLineStyle=this.readLineStyleFromObjects(null,ke);var Si=Ii.getAllValueMetadataColumnsForRole(this.primaryValueRole);this.secondaryValueRole&&(Si=(0,d.__spreadArray)((0,d.__spreadArray)([],Si||[],!0),Ii.getAllValueMetadataColumnsForRole(this.secondaryValueRole)||[],!0));var bi,xi=[],Ya=[];Lt&&this.isScalar&&!Re&&!Ze&&(bi=(0,W.Eb)(Lt,ue,ke,Ha),T.fF.assert(function(){return bi.length===qt},"anomalyDetections length should be the same as series count"));var gt,Li=(0,A.NA)(this.staticObjects,He.zK.layout.seriesOrderReversed,Ht.HQ.seriesOrderReversed),vr=this.getSeriesNames(),ni=yt(ke),De=!1;if(_.some(this.valueRoleNames,function(Ba){return ri.hasValues(Ba)})){var Sa=this.reader.columns.getSeriesCount(this.primaryValueRole);if(De=!0,gt=qa?(0,ye.xq)(ri.getSeriesDisplayName(),Ii.getSeriesMetadataColumn(),Ha):void 0,this.staticObjects){(0,G.FJ)(this.staticObjects.seriesLabels,ni,ke,Ze);var Zt=function(r,e){var t=1;if(e)for(var a=e.length,i=0;i<a;i++){var n=g.bN,o={text:e[i],fontFamily:r.family,fontSize:Ne.FP.fromPoint(r.size.pt),fontWeight:n.fontWeight},l=te.b.measureSvgTextWidth(o)+2*g.Bo;t=l>t?l:t}return t}(ni.fontProperties,vr);ni.defaultSeriesWidth=ni.defaultSeriesWidth?Zt:null,ni.maxWidthPercentage=ni.defaultSeriesWidth?Zt:ni.maxWidthPercentage}for(var Ki=[],ma=ta.fontProperties.color,Oa=Je?Ss(_i,qt,function(Ba,ir){return ri.getValueBySeries(ir,Ba)}):[],vi=function(ir){var ha=Li?qt-ir-1:ir,xr=ba.reader.labels.dynamicLabelReader.areDynamicValueLabelsEnabled(null===(t=ba.options.featureSwitches)||void 0===t?void 0:t.labelEnhancementsM0,ha),Vr=ha>=Sa,br=Ii.getValueColumnBySeries(ha),Ur=Bi&&Bi[ha],si=Ki[ha]=br.source,Cr=[],ln=z.dw.builder().withSeries(La,Ur,!0).withMeasure(si.queryName).createSelectionId(),Gr=ln.getKey(),Mi=void 0,Qt=(0,xe.ED)(ni);if(ba.reader.data.hasSeries()||Ze){var zi=Ze&&!ba.reader.data.hasSeries()?ba.reader.objects.getValueMetadataObjectsBySeries(ha):ba.reader.objects.getSeriesDataObjects(ha),kr=zi?.labels,un=zi?.seriesLabels;(Mi=(0,xe.ED)(ta)).show=ta.show&&(null===(a=ta.showByDefault)||void 0===a||a),kr&&(0,G.AR)(kr,Mi,void 0,ke,Ze),Qt.show=ni.show&&(null===(i=ni.showByDefault)||void 0===i||i),un&&(0,G.FJ)(un,Qt,ke,Ze)}for(var Oi,gi=(0,fn.nC)(si.objects,ke,ba.seriesColors[ha],ha,(0,d.__assign)((0,d.__assign)({},ta),{show:!1}),{isCombo:Ze,staticObjects:ba.staticObjects}),Ti=gi.hasUncertainty,Xi=Mi??ta,Ar=(null===(n=br.highlights)||void 0===n?void 0:n.length)>0,Zi=ba.readLineStyleFromObjects(ha,ke),jr=_.get(bi,ha),Yr=jr?new W.LO(Kt,jr,si,Ha):void 0,Xn=!1,Kr=function(Jt,Wi){var Fi=Mt.values[Jt],Er=ea?null===(s=pa.values[Jt])||void 0===s?void 0:s.min:Fi,fr=(0,Y.eT)(Ar?ri.getHighlightBySeries(Jt,ha):ri.getValueBySeries(Jt,ha)),cn=fr<0,Ni=Je?fr*Oa[Jt][cn?"neg":"pos"]:fr;if(ba.isScalar&&(null==Er||null==Ni)||ba.isDateTime&&null!=Fi&&!(Fi instanceof Date))return Oi=Wi,"continue";if(Wi++,null==Ni&&(Li?ha<qt-1:ha>0))return Oi=Wi,"continue";var Rr=Ar?ri.getHighlightFormatStringBySeries(Jt,ha):ri.getFormatStringBySeries(Jt,ha),Xr=Ti?(0,fn.PT)(ri,Jt,ha,Ni):void 0,nr=void 0,sr=void 0,Zr=Mt.source?(0,Ge.AD)(ue.categorical.categories,Jt,Ha):void 0;if(Yt){if(nr=[],wt){var Qr=new Ca.E4;Qr.withMultipleColumnAndValues(wt.sources.map(function(Hi){return Hi.metadata}),wt.sources.map(function(Hi){return Hi.value}),!0,(0,Jn.F)(Ha)),nr.push.apply(nr,Qr.getTooltipItems())}Mt.source&&nr.push((0,Ge.bR)(Zr));var Qi=function(_r){return(0,ye.xq)(_r,si,Ha,!1,Rr)};if(qa&&(!Mt.source||Mt.source!==La.source)&&nr.push({displayName:La.source.displayName,value:(0,ye.xq)(Bi[ha].name,La.source,Ha)}),null!=Ni){var wn={displayName:si.displayName,value:ba.options.isStacked100?"".concat(Qi(fr)," (").concat((0,I.WU)(Ni,(0,I.Z)("Percentage")),")"):Qi(fr)},Qn=gi.tooltips;if(Ti&&Qn.show&&Qn.format===tn.K.range){var wr=(0,Pr.kS)(Xr,Ni,gi,Qi,Kt,{overrideDisplayName:si.displayName});T.fF.assert(function(){return void 0===wr||1===wr.length},"getUncertaintyTooltipItems() with 'range' format should return exactly one item or undefined when when bounds have not been set yet"),_.isEmpty(wr)||(wn=wr[0])}nr.push(wn)}Ti&&(Ze&&gi.tooltips.format!==tn.K.range?nr.push.apply(nr,null!==(o=(0,Pr.kS)(Xr,Ni,gi,Qi,Kt,{hideMarker:!0}))&&void 0!==o?o:[]):(0,Pr.$w)(Xr,Ni,gi,Qi,Kt)),(0,Ca.VT)(ba.reader,sr=[],Jt,qa?ha:void 0,Ha);var _n=Yr?.getTooltipItems(Jt,Rr);_n&&sr.push.apply(sr,_n),sr=_.isEmpty(sr)?void 0:sr}var gr=new z.dw,or=null!==(l=ue.categorical.originalCategories)&&void 0!==l?l:[Mt];ri.hasCategories()&&(gr=gr.withCategory(or,Jt,null===(c=null===(u=Ii.getCategoryColumn("Category"))||void 0===u?void 0:u.source)||void 0===c?void 0:c.queryName,!0)),qa&&(gr=gr.withSeries(La,Ur,!0)),wt&&(gr=gr.withColumnIdentity(wt.identity,ei,Ga)),null!==(v=Ya[Jt])&&void 0!==v||(Ya[Jt]={positive:0,positiveCount:0,negative:0,negativeCount:0,net:0,categoryValue:ba.convertCategoryValue(Er,ba.isDateTime,ea),categoryIndex:Jt,dynamicFormatString:Rr});var oi=Math.abs(Ni);isNaN(oi)||(cn?(Ya[Jt].net-=oi,Ya[Jt].net<Ya[Jt].negative&&(Ya[Jt].negative=Ya[Jt].net,Ya[Jt].negativeCount++)):(Ya[Jt].net+=oi,Ya[Jt].net>Ya[Jt].positive&&(Ya[Jt].positive=Ya[Jt].net,Ya[Jt].positiveCount++)));var dn={defaultColor:ma,seriesColor:Mi?.fontProperties.color,categoricalDataReader:ba.reader,categoryIndex:Jt,seriesIndex:ha},Ir=(0,Bt.t$)(dn),Ln={dataPointLabelSettings:Xi,defaultLabelSettings:ta,categoricalDataReader:ba.reader,categoryIndex:Jt,seriesIndex:ha,dynamicLabelsEnabledForSeries:xr,featureSwitches:ba.options.featureSwitches},Pn=(0,Bt.Xc)((0,d.__assign)((0,d.__assign)({},Ln),{detailPropertyId:He.zK.labels.dynamicLabelDetail,titlePropertyId:He.zK.labels.dynamicLabelTitle,dataLabelFillColorOptions:dn})),Jr=(0,Bt.tI)((0,d.__assign)((0,d.__assign)({},Ln),{valuePropertyId:He.zK.labels.dynamicLabelValue}));if(!Xn&&null!==(y=ba.options.featureSwitches)&&void 0!==y&&y.labelEnhancementsM0){var $r=Pn&&(null===(m=_.first(Pn.filter(function(Hi){return"Detail"===Hi.role})))||void 0===m?void 0:m.dynamicLabel.enabled);(0,Bt.hY)(Kt,!1,Jr?.enabled,$r,Xi),Xn=!0}Re&&(hr[Jt]+=Ni);var Hi,_r,Ji,pr,lr,Nr=(0,d.__assign)({categoryValue:ba.convertCategoryValue(Er,ba.isDateTime,ea),value:Ni,originalValue:fr,categoryIndex:Jt,seriesIndex:ha,tooltipInfo:nr,selected:!1,identity:gr.withMeasure(si.queryName,Ii.getValueColumn(Vr?mi.R.Y2:mi.R.Y,ha),Jt).createSelectionId(),key:JSON.stringify({series:Gr,category:Mt&&!_.isEmpty(Mt.identity)&&Mt.identity[Jt]?Mt.identity[Jt].key:Jt}),labelFill:Ir.color,leaderLineColor:(0,Bt.Zj)(ta.leaderLine.strokeColor,Mi,dn,Ir),labelFormatString:Rr||si.format,labelSettings:Xi,uncertainty:Xr,additionalTooltipItems:sr,marker:(_r=He.zK.lineStyles.strokeColor,Ji=null===(Hi=Mt.objects)||void 0===Hi?void 0:Hi[Jt],pr=Ji&&Ua.hasColorForProperty(Ji,_r),lr=Object.create(Zi.markerProperties),lr.perCategoryStyle=!!pr,lr.transparency=Zi.strokeTransparency,lr.color=pr?Ua.getColorForProperty(Ji,_r,void 0):Zi.strokeColor,lr.show=!!pr||!!lr.show,lr.focusOnlySize=Rn(Zi),lr.focusOnlyColor=Zi.strokeColor,lr),isY2:Vr,dynamicLabelValue:Jr,stackedValue:Re?hr[Jt]:void 0},(null===(w=ba.options.featureSwitches)||void 0===w?void 0:w.labelEnhancementsM0)&&{appendedLabelContents:Pn,labelDataPointContainerEnabled:!0});Cr[Wi]=Nr,null!==(C=xa[Jt])&&void 0!==C||(xa[Jt]=Tt(Nr,Zr)),xa[Jt]&&((q=xa[Jt]).hasData||(q.hasData=null!=Nr.value));var qr=function(_r){var Ji,pr=(new z.dw).withCategory(or,Jt,null===(Ji=Mt?.source)||void 0===Ji?void 0:Ji.queryName,!0);return!qa&&1===qt&&pr.withMeasure(si.queryName),_r&&wt&&pr.withColumnIdentity(wt.identity,ei,Ga),pr};ri.hasCategories()&&(null!==(D=$a[Jt])&&void 0!==D||($a[Jt]=qr(!1).createSelectionId()),null!==(O=li[Jt])&&void 0!==O||(li[Jt]=qr(!0).createSelectionId())),Oi=Wi},Dr=0,Zn=-1;Dr<_i;Dr++)Kr(Dr,Zn),Zn=Oi;var rr=_.findIndex(Si,si);-1!==rr&&(null!==(F=xi[rr])&&void 0!==F||(xi[rr]={metadataColumn:si,usedInSeriesIndices:[],valueSelector:(new z.dw).withMeasure(si.queryName,br).createSelectionId()}),xi[rr].usedInSeriesIndices.push(ha)),Ke?.applySelectionStateToData(_.filter(Cr,function(Dn){return null!=Dn})),(Cr.length>0||wt?.isCoreMultiple)&&Xa.push({displayName:vr[ha],key:Gr,index:ha,xCol:ea?Ta:Mt.source,yCol:si,data:Cr,identity:ln,selected:!1,uncertainty:gi,labelSettings:Mi,seriesLabelSettings:Qt,type:si.type,measureDisplayName:si.displayName,lineStyle:Zi,isY2:Vr})},ba=this,Ci=0;Ci<qt;Ci++)vi(Ci);this.addTotalTooltips(Li,Xa,ja,Ya,Ki)}var ai=null===(U=null===(N=ue.metadata)||void 0===N?void 0:N.dataReduction)||void 0===U?void 0:U.categorical;Ke?.applySelectionStateToData(Xa);var Pi=(0,A.NA)(this.staticObjects,He.zK.legend.legendMarkerRendering,nn._.markerCircleDefault),ar=(0,A.NA)(this.staticObjects,He.zK.legend.matchLineColor,!0);return{series:Xa,totals:Ya,legendData:(0,x.pq)({dataView:ue,allowLegendWithNoSeries:Ze,showByDefault:!0,staticSeriesRoleNames:Ze?["Y2"]:["Y","Y2"],style:ke,ignoreDefaultColor:Ze,ignoreDefaultCategoryColor:!0,lineAndMarkerOptions:{renderLineStyle:!0,legendMarkerRendering:Pi,matchSeriesColor:ar,defaultMarkerShape:Ma.ZO.longDash},featureSwitches:this.options.featureSwitches}),forecastLines:this.convertForecastLines(xa,ea,$a,li),anomalyDetections:bi,isScalar:this.isScalar,dataLabelsSettings:ta,totalLabelsSettings:ja,seriesLabelSettings:ni,hasDynamicSeries:qa,hasHighlights:!1,hasY2Role:(0,V.c5)(ue,"Y2"),categoryMetadata:Mt.source,valuesMetadata:Si,valuesMetadataBySeries:xi,preferredCategoryWidth:(0,p.$K)(da),scalarMetadata:Ta,scalarKeyCount:ea?pa.values.length:void 0,categories:Mt.values,categoryData:xa,seriesDisplayName:gt,hasValues:De,categoryIdentities:$a,multiplesCategoryIdentities:li,lineStyle:this.staticLineStyle,binnedLineSamplingApplied:!!(null!==(X=ai?.metadata)&&void 0!==X&&X.binnedLineSample||null!==(re=ai?.categories)&&void 0!==re&&re.binnedLineSample||null!==(pe=ai?.values)&&void 0!==pe&&pe.binnedLineSample),legendMarkerRendering:Pi,matchLineColor:ar,multipleIdentity:ui,multipleDisplayName:Na,layout:{seriesOrderReversed:Li}}},r.prototype.addTotalTooltips=function(e,t,a,i,n){var s,o,l,u,c=this.options,v=c.hostServices,m=c.tooltipsEnabled;if(c.isStacked&&v&&(void 0===m||m)&&a.show)for(var C=this.reader.data.getSeriesCount(),D=a.fontProperties.color,O=[],F=0;F<C;F++){var N=e?C-F-1:F;if(t[N])for(var U=0,X=t[N].data;U<X.length;U++){var re=X[U];if(re){var pe=re.categoryIndex,q=(0,Bt.AO)({defaultColor:D,categoricalDataReader:this.reader,categoryIndex:pe,seriesIndex:N});i[pe].labelFill=q.color;var ee=(0,Bt.B8)(q)?q.color:D;a.fontProperties=(0,Bt.Vv)(ee,a.fontProperties),null!==(s=O[pe])&&void 0!==s||(O[pe]={net:{displayName:v.getLocalizedString("Visual_Total"),value:(0,ye.xq)(i[pe].net,n[N],He.zK.general.formatString,!1)}});var ue=O[pe].net;null!==(o=re.tooltipInfo)&&void 0!==o||(re.tooltipInfo=[]),re.tooltipInfo.push(ue),null!==(l=(u=re).additionalTooltipItems)&&void 0!==l||(u.additionalTooltipItems=[]),re.additionalTooltipItems.push(ue)}}}},r.prototype.convertForecastLines=function(e,t,a,i){var n,s,o,l=this.options,u=l.dataView,m=l.forecastDataView;if(m&&this.isScalar&&!l.isStacked&&!l.isComboChart){for(var w=(0,f.XB)(m,u,l.style,this.staticLineStyle),C=_.last(e),D=0,O=w;D<O.length;D++)for(var N=C.categoryIndex,U=0,X=O[D].points;U<X.length;U++){var re=X[U];re.point.x=this.convertCategoryValue(re.point.x,this.isDateTime,t),re.upperBound.x=this.convertCategoryValue(re.upperBound.x,this.isDateTime,t),re.lowerBound.x=this.convertCategoryValue(re.lowerBound.x,this.isDateTime,t);var pe=re.point.x;pe<=C.categoryValue||(null!==(n=e[++N])&&void 0!==n||(e[N]={categoryIndex:N,categoryValue:pe,hasData:null!=re.point.y,hierarchyCategoryLevels:(0,Ge.AD)(u.categorical.categories,N,He.zK.general.formatString)}),null!==(s=a[N])&&void 0!==s||(a[N]=null),null!==(o=i[N])&&void 0!==o||(i[N]=null))}return w}},r.prototype.allocateSeriesColors=function(){for(var e=this.reader.data.getSeriesCount(),t=[],a=0;a<e;a++)t.push(this.reader.colors.createBySeries(a,void 0,Le.fA));return t},r.prototype.getSeriesNames=function(){var e=this,t=this.reader.data.getSeriesCount();return _.range(t).map(function(a){return e.reader.columns.hasDynamicSeries()?(0,I.WU)(e.reader.data.getSeriesName(a),e.reader.objects.getSeriesFormatString(a)):e.reader.columns.hasStaticSeries()?e.reader.data.getSeriesName(a):e.reader.data.getValueDisplayName(e.primaryValueRole)})},r.prototype.convertCategoryValue=function(e,t,a){if(e&&(t||a)){var i=e;return T.fF.assert(function(){return(0,an.M4)(i)},"dateValue"),i.epochTimeStamp}return e},r.prototype.readLineStyleFromObjects=function(e,t){var a=He.zK.lineStyles,i=(0,A.NA)(this.staticObjects,He.zK.lineStyles.showSeries,!0),s=null!=e&&i?this.reader.objects.getSeriesDataObjects(e):this.staticObjects,o=this.staticLineStyle,l=o??es(this.options.isAreaChart);null!=e?T.fF.assert(function(){return null!=o},"If converting per-series line style, staticStyle must be defined"):T.fF.assert(function(){return null==o},"If converting static line style, staticStyle must be not-defined");var u=(0,d.__assign)((0,d.__assign)((0,d.__assign)({},(0,Za.QI)(s,a,l)),{markerProperties:null==e?(0,En.RZ)(s,t):(0,En.Yh)(this.reader,o.markerProperties,e,t,!i),areaShow:(0,A.NA)(s,a.areaShow,l.areaShow),areaColor:(0,A.W7)(s,a.areaColor,l.areaColor),areaTransparency:(0,A.NA)(s,a.areaTransparency,l.areaTransparency),areaMatchStrokeColor:(0,A.NA)(s,a.areaMatchStrokeColor,l.areaMatchStrokeColor)}),(0,yn.RN)(s,a,l));return null!==e&&(u.strokeColor=this.seriesColors[e]),null!=e&&u.areaShow&&(u.areaShow=o.areaShow),u.areaMatchStrokeColor&&(u.areaColor=u.strokeColor),u},r}(),To=b(67918),Oo=b(72250);function Fo(){return{type:0,card:[Io.call(this),Ro.call(this),Vo.call(this),ko.call(this),Eo.call(this),No.call(this),Bo.call(this)].filter(function(r){return r})}}function Vo(){var e,t,r=this,a=this.originalData;if(a&&this.dataView){var i=a.series.length;if(0!==i){var n=(0,A.NA)(null===(t=null===(e=this.dataView)||void 0===e?void 0:e.metadata)||void 0===t?void 0:t.objects,He.qn.lineStyles.showSeries,!0);return new ge.CQ(new ge.lg("markers"),"Visual_Markers",Object.values(He.zK.markers).concat([He.zK.dataPoint.fill,He.zK.dataPoint.showAllDataPoints,He.zK.lineStyles.showSeries]),this.localizer).addTopLevelToggle("showMarkerTopLevel",function(){return new ge.bd({descriptor:He.qn.lineStyles.showMarker,value:a.lineStyle.markerProperties.show}).build()}).addGroup("applySettingsTo",function(s){return s.withContainerDisabled(!n).withDisplayName("Apply_Settings_To").withCollapsible(!1).addContainer("series",function(o){if(o.withDisplayName(i>1?"Series":"Visual_Categories").addContainerItem("all",r.localizer("All"),function(C){var D,O,F;if(rs.call(r,{containerItemBuilder:C,listType:i>1?"staticPerSeries":"staticPerCategories",markerStyle:(0,d.__assign)((0,d.__assign)({},a.lineStyle.markerProperties),{color:null!==(O=null!==(D=a.lineStyle.markerProperties.color)&&void 0!==D?D:a.lineStyle.strokeColor)&&void 0!==O?O:null===(F=a.series[0])||void 0===F?void 0:F.lineStyle.strokeColor})}),!n){var N=[He.qn.lineStyles.lineChartType,He.qn.lineStyles.lineStyle,He.qn.lineStyles.strokeWidth,He.qn.lineStyles.strokeLineJoin,He.qn.lineStyles.showMarker,He.qn.lineStyles.showMarkerByDefault,He.qn.lineStyles.markerShape,He.qn.lineStyles.markerSize,He.qn.lineStyles.markerColor,He.qn.dataPoint.showAllDataPoints,He.qn.dataPoint.fill];C.addSimpleSlice("showSeriesLink",function(){return new ge.ob({descriptor:He.qn.lineStyles.showSeries,value:function(){},ariaLabel:"Enable_This_Setting",type:"SeriesDialogLink",resetToDefaultDescriptors:N,warningIcon:!0}).build()},function(U){return U.withCustomDisplayName("Enable_This_Setting").withSuppressDisplayName(!0)})}}),1===i&&r.supportsPerCategoryMarker()){var l=function(r){for(var e=[],t=function(o){if(o&&r.categoryIdentities[o.categoryIndex])for(var l=0;l<r.series.length;l++){var c=_.findIndex(r.series[l].data,function(v){return v.categoryIndex===o.categoryIndex});if(c>=0){e.push({categoryIndex:o.categoryIndex,seriesIndex:l,dataPointIndex:c});break}}},a=0,i=r.categoryData;a<i.length;a++)t(i[a]);return e}(a),u=l.slice(0,ya.Rl);if(u.length<2)return;var c=ra(u,a);u.forEach(function(C,D){var O,F=C.categoryIndex,N=C.seriesIndex,U=C.dataPointIndex,X=(0,d.__assign)((0,d.__assign)({},_.cloneDeep(a.lineStyle.markerProperties)),{color:null!==(O=a.series[N].data[U].marker.color)&&void 0!==O?O:a.series[N].lineStyle.strokeColor}),pe=(0,Be.fd)(a.categoryIdentities[F].getSelector());a.multipleIdentity&&(pe=(0,Be.d9)(pe),T.fF.assert(function(){return!!pe.data},"expect categories to have some data identity"),pe.data.unshift((0,qn.Yp)([mi.R.Rows]))),o.addContainerItem(c[D],c[D],function(q){return rs.call(r,{containerItemBuilder:q,listType:"perCategory",markerStyle:X,selector:pe})})})}if(i>1)for(var v=function(D){var O=(0,Be.fd)(D.identity.getSelector());if(!O)return"continue";o.addContainerItem(D.displayName,D.displayName,function(F){return rs.call(r,{containerItemBuilder:F,listType:"perSeries",markerStyle:D.lineStyle.markerProperties,selector:O})})},y=0,m=a.series;y<m.length;y++)v(m[y])})}).build()}}}function ko(){var e,r=this,t=this.originalData,a=t.dataLabelsSettings,i=t.series.length,n=i>1||!t.categoryMetadata||this.isComboChart,s=this.isStacked?[ka.h.auto,ka.h.insideCenter,ka.h.insideEnd]:[ka.h.auto,ka.h.above,ka.h.under];a.position&&s.indexOf(a.position)<0&&(a.position=ka.h.auto);var m,o=(0,d.__assign)((0,d.__assign)({},He.qn.labels),{position:He.qn.labels.labelPosition,precision:He.qn.labels.labelPrecision,displayUnits:He.qn.labels.labelDisplayUnits,labelBackgroundColor:He.qn.labels.backgroundColor,labelBackgroundTransparency:He.qn.labels.backgroundTransparency,showDynamicLabels:He.qn.labels.showDynamicLabels,dynamicLabelValue:He.qn.labels.dynamicLabelValue,leaderLines:He.qn.labels.leaderLines,maximumOffset:He.qn.labels.maximumOffset,minimumOffset:He.qn.labels.minimumOffset}),l=new ge.CQ(new ge.lg("labels"),"Visual_DataPointsLabels",o,this.localizer),u=(0,Bt.DU)(this.featureSwitches,t.hasDynamicSeries,n,i,this.isComboChart,!0),c=ks.call(this,void 0,a,null,n,s,u),v=this.isComboChart?void 0:sn.call(this,!1),y={cardBuilder:l,dataLabelsProps:o,featureSwitches:this.featureSwitches,hostServices:this.hostService,options:c,includeAltConstantValueSelector:!0,individualSelector:v,showEnhancedLabelsFormattingOptions:!0,instanceId:"all"};if(null!==(e=this.featureSwitches)&&void 0!==e&&e.labelEnhancementsM0&&this.dataView){var w=(m=(0,ca.y)(this.dataView)).labels.dynamicLabelReader.getLabelFieldSourceTypes();Object.assign(y,{valueFieldSourceType:w.valueFieldSourceType,detailFieldSourceType:w.detailFieldSourceType,titleFieldSourceType:w.titleFieldSourceType,valueLabelPickerFallbackExpr:(0,Bt.WA)(t.valuesMetadataBySeries,i,t.hasDynamicSeries),dataLabelPickerSeriesType:(0,Bt.Nb)(i,t.hasDynamicSeries,this.isComboChart)})}return l.withDescription("Visual_DataPointsLabelsDescription"),o.show&&l.addTopLevelToggle("show",function(){return new ge.bd({descriptor:o.show,value:c.dataLabelsSettings.show}).build()}),l.addGroup("applySettingsTo",function(F){return F.withDisplayName("Apply_Settings_To").withCollapsible(!1).addContainer("series",function(N){var U,X;if(N.withDisplayName("Series"),N.addContainerItem("all",r.localizer("All"),function(ke){return(0,G.WW)(y,ke)}),n)for(var re=0;re<i;re++){var pe=t.series[re],q=null!==(U=pe.labelSettings)&&void 0!==U?U:t.dataLabelsSettings;q.position&&s.indexOf(q.position)<0&&(q.position=ka.h.auto);var ee=pe.identity.getSelector();if(Object.assign(y,{includeAltConstantValueSelector:!1,selector:t.hasDynamicSeries?(0,Be.fd)(ee):ee,individualSelector:sn.call(r,!0),options:ks.call(r,void 0,q,ee,void 0,s,t.hasDynamicSeries),instanceId:"sn-".concat(re)}),null!==(X=r.featureSwitches)&&void 0!==X&&X.labelEnhancementsM0){var ue=m?.labels.dynamicLabelReader.getLabelFieldSourceTypes(re);Object.assign(y,(0,d.__assign)((0,d.__assign)({},ue?{valueFieldSourceType:ue.valueFieldSourceType,detailFieldSourceType:ue.detailFieldSourceType,titleFieldSourceType:ue.titleFieldSourceType}:{}),{valueLabelPickerFallbackExpr:(0,Bt.CH)(t.valuesMetadataBySeries,re),dataLabelPickerSeriesType:(0,Bt.aC)(i,t.hasDynamicSeries,r.isComboChart)}))}N.addContainerItem(pe.displayName,pe.displayName,function(ke){return(0,G.WW)(y,ke)})}})}),l.build()}function Eo(){var r=this;if(this.showSeriesCard()){var e=this.originalData,t=e.seriesLabelSettings,a=this.showLabelPerSeries(),i=(0,d.__assign)((0,d.__assign)({},He.qn.seriesLabels),{show:{objectName:"seriesLabels",propertyName:"show"}}),n=new ge.CQ(new ge.lg("seriesLabels"),"Visual_SeriesLabels",i,this.localizer),s={cardBuilder:n,seriesLabelsProps:i,featureSwitches:this.featureSwitches,hostServices:this.hostService,seriesOptions:{enumeration:void 0,seriesLabelsSettings:t,selector:null,style:this.style,showAll:a}};return n.withDescription("Visual_SeriesDescription"),i.show&&n.addTopLevelToggle("show",function(){return new ge.bd({descriptor:i.show,value:s.seriesOptions.seriesLabelsSettings.show}).build()}),n.addGroup("applySettingsTo",function(o){return o.withDisplayName("Apply_Settings_To").withCollapsible(!1).addContainer("series",function(l){var u;if(l.withDisplayName("Series").addContainerItem("all",r.localizer("All"),function(w){return(0,ce.eR)(s,w)}),r.showLabelPerSeries())for(var c=0,v=e.series;c<v.length;c++){var y=v[c],m=y.identity.getSelector();s.selector=e.hasDynamicSeries?(0,Be.fd)(m):m,s.seriesOptions={enumeration:void 0,seriesLabelsSettings:null!==(u=y.seriesLabelSettings)&&void 0!==u?u:e.seriesLabelSettings,selector:m,style:r.style,showAll:void 0},l.addContainerItem(y.displayName,y.displayName,function(w){return(0,ce.eR)(s,w)})}})}).build()}}function Ro(){var r=this,e=this.originalData;if(e&&e.series&&0!==e.series.length){var t=function(i){var n=i.lineStyle,s=i.selector;i.containerItemBuilder.addSimpleSlice("showSeries",new ge.bd({descriptor:(0,d.__assign)((0,d.__assign)({},He.qn.lineStyles.areaShow),{selector:s}),value:n.areaShow}).build(),function(o){return o.withDisabled(!s).withCustomDisplayName("Visual_Show_Data_Labels_PerSeries")}).addGroup("colors",function(o){return o.withDisplayName("Generic_Color").addSimpleSlice("shadeAreaMatchStrokeColor",new ge.bd({descriptor:(0,d.__assign)((0,d.__assign)({},He.qn.lineStyles.areaMatchStrokeColor),{selector:s}),value:n.areaMatchStrokeColor}).build()).addSimpleSlice("shadeAreaColor",new ge.BT({descriptor:(0,d.__assign)((0,d.__assign)({},He.qn.lineStyles.areaColor),{selector:s}),value:{value:n.areaColor}}).build(),function(l){return l.withDisabled(n.areaMatchStrokeColor)}).addSimpleSlice("shadeAreaTransparency",ge.JN.getTransparencySliderBuilder({descriptor:(0,d.__assign)((0,d.__assign)({},He.qn.dataPoint.transparency),{selector:s}),value:n.areaTransparency,localize:r.localizer}).build())})};return new ge.CQ(new ge.lg("shadeArea"),"Visual_Shapes_ShadeArea",[He.qn.lineStyles.areaShow,He.qn.dataPoint.transparency,He.qn.lineStyles.areaColor,He.qn.lineStyles.areaMatchStrokeColor],this.localizer).addTopLevelToggle("shadeAreaShow",function(){return new ge.bd({descriptor:He.qn.lineStyles.areaShow,value:r.data.lineStyle.areaShow}).build()}).addGroup("applySettingsTo",function(a){return a.withDisplayName("Apply_Settings_To").withCollapsible(!1).addContainer("series",function(i){if(i.withDisplayName("Series"),i.addContainerItem("all",r.localizer("All"),function(u){t.call(r,{containerItemBuilder:u,lineStyle:e.lineStyle})}),e.series.length>1)for(var n=function(c){i.addContainerItem(c.displayName,c.displayName,function(v){return t.call(r,{containerItemBuilder:v,lineStyle:c.lineStyle,selector:(0,Be.fd)(c.identity.getSelector())})})},s=0,o=e.series;s<o.length;s++)n(o[s])})}).build()}}function Io(){var e,t,r=this,a=this.originalData;if(a&&a.series&&0!==a.series.length){var i=(0,A.NA)(null===(t=null===(e=this.dataView)||void 0===e?void 0:e.metadata)||void 0===t?void 0:t.objects,He.qn.lineStyles.showSeries,!0);return new ge.CQ(new ge.lg("lines"),"Visual_Lines",[He.qn.lineStyles.lineChartType,He.qn.lineStyles.interpolationStep,He.qn.lineStyles.interpolationSmooth,He.qn.lineStyles.interpolationSmoothParam,He.qn.lineStyles.strokeShow,He.qn.dataPoint.fill,He.qn.dataPoint.defaultColor,He.qn.lineStyles.lineStyle,He.qn.lineStyles.strokeWidth,He.qn.lineStyles.strokeLineJoin,He.qn.lineStyles.strokeTransparency,He.qn.lineStyles.strokeAutoScale,He.qn.lineStyles.strokeDashArray,He.qn.lineStyles.strokeDashCap,He.qn.layout.seriesOrderReversed],this.localizer).addGroup("applySettingsTo",function(n){return n.withDisplayName("Apply_Settings_To").withCollapsible(!1).withContainerDisabled(!i).addContainer("series",function(s){if(s.withDisplayName("Series").addContainerItem("all",r.localizer("All"),function(v){return Es.call(r,{containerItemBuilder:v,lineStyle:a.lineStyle})}),a.series.length>1)for(var o=function(y){s.addContainerItem(y.displayName,y.displayName,function(m){return Es.call(r,{containerItemBuilder:m,lineStyle:y.lineStyle,selector:(0,Be.fd)(y.identity.getSelector())})})},l=0,u=a.series;l<u.length;l++)o(u[l])})}).build()}}function No(){if(this.supportsTotalLabels()){var e=this.originalData.totalLabelsSettings;if(e){var t=(0,d.__assign)((0,d.__assign)({},He.qn.totals),{precision:He.qn.totals.labelPrecision,displayUnits:He.qn.totals.labelDisplayUnits}),a=new ge.CQ(new ge.lg("totals"),"Visual_DataTotalLabels",t,this.localizer).withDescription("Visual_DataTotalLabelsDescription");return(0,G.XQ)({cardBuilder:a,dataLabelsProps:t,featureSwitches:this.featureSwitches,hostServices:this.hostService,options:Wo.call(this,void 0,e),individualSelector:sn.call(this,!1),showEnhancedLabelsFormattingOptions:!1})}}}function Bo(){var r=this;if(!this.isAreaChart){var e=this.originalData;if(e&&e.series&&0!==e.series.length){var t=la.N_.error;return new ge.CQ(new ge.lg("errorBars"),"Visual_Error_Bars",[t.enabled,t.errorRange,t.barShow,t.barMatchSeriesColor,t.barColor,t.barWidth,t.barBorderColor,t.barBorderSize,t.shadeShow,t.shadeBandStyle,t.shadeColor,t.shadeMatchSeriesColor,t.shadeTransparency,t.labelShow,t.labelFontFamily,t.labelFontSize,t.labelBold,t.labelItalic,t.labelUnderline,t.labelColor,t.labelMatchSeriesColor,t.labelFormat,t.labelBackground,t.labelBackgroundColor,t.labelBackgroundTransparency,t.markerShape,t.markerShow,t.markerSize,t.showMarkerByDefault,t.tooltipShow,t.tooltipFormat],this.localizer,!0,!0).addGroup("applySettingsTo",function(a){return a.withDisplayName("Apply_Settings_To").withCollapsible(!1).addContainer("measure",function(i){i.withDisplayName("Series");for(var n=function(c){var v=_.first(c.usedInSeriesIndices);if(T.fF.assertValue(v,"lineChart - measure is not associated with any series"),null!=v){var y=c.metadataColumn,m=e.series[v];if(null==m)return"continue";var w=c.valueSelector.getSelector(),C=r.isComboChart?(0,qn.Yp)([mi.R.Rows,mi.R.Category]):(0,pn.Ue)(),D=(0,d.__assign)((0,d.__assign)({},w),{data:[C],highlightMatching:1});i.addContainerItem(y.queryName,y.displayName,function(O){return(0,bs.f)({localize:r.localizer,uncertainty:m.uncertainty,targetMeasure:c.metadataColumn.expr,measureSelector:w,dataPointSelector:D,featureSwitches:r.featureSwitches},O)})}},s=0,o=e.valuesMetadataBySeries;s<o.length;s++)n(o[s])})}).build()}}}function zo(r,e){var t=this.originalData;if(t)switch(e.objectName){case f.Po:if(this.supportsForecast()){var a=void 0;_.isEmpty(t.anomalyDetections)||(a=this.localizer("Visual_AnomalyDetection_WarningMessage_NoWithForecast")),(0,f.$I)(r,t.forecastLines,this.style,a)}break;case ws.xn:this.supportsAnomalyDetection()&&(0,To.HL)(this.hostService,this.data,this.dataView,r,t.anomalyDetections,this.style,t.isScalar,e.selectors)}}function ks(r,e,t,a,i,n){return{enumeration:r,dataLabelsSettings:e,show:!0,position:!0,positionObject:i,displayUnits:!this.isStacked100,precision:!0,selector:t,showAll:a,fontSize:!0,fontFamily:!0,labelDensity:this.data.isScalar,enableBackground:e.enableBackground,backgroundColor:e.backgroundColor,backgroundTransparency:e.backgroundTransparency,style:this.style,bold:!0,italic:!0,underline:!0,enableDynamicLabelPickers:!n,isStacked100:this.isStacked100,leaderLines:!this.isStacked&&!this.isComboChart}}function Wo(r,e){return{enumeration:r,dataLabelsSettings:e,show:!0,displayUnits:!0,precision:!0,fontSize:!0,fontFamily:!0,enableBackground:e.enableBackground,backgroundColor:e.backgroundColor,backgroundTransparency:e.backgroundTransparency,style:this.style,bold:!0,italic:!0,underline:!0}}function Ho(r,e){var t;if(!this.data)return[];var a=[];if(void 0===e||3===e)for(var n=0,s=this.data.series;n<s.length;n++){var o=s[n];if(o.lineStyle.markerProperties.show){var l=null===(t=o?.identity)||void 0===t?void 0:t.getSelectorsByColumn(),u=this.hostService.getLocalizedString("MiniToolbar_Markers",o.displayName);a.push(r.createVisualSubSelectionForSingleObject({objectName:"markers",subSelectionType:3,displayName:u,showUI:!0,selectorsByColumn:l}))}}return a}function Uo(r){var e;switch(d3.select(r).attr(We.Ez)){case"area":case"lines":var a=d3.select(r).datum(),i=null===(e=a?.identity)||void 0===e?void 0:e.getSelectorsByColumn();if(i)return i;break;case"data-labels":case"series-labels":var n=(0,Bt.wT)(r,this.data.series);if(n)return n;break;default:return}}function Go(r){var e,t,i=r.visualObjects[0].selectorsByColumn;if("markers"===r.visualObjects[0].objectName){var n=null===(e=this.activeData)||void 0===e?void 0:e.series;if(n)for(var s=0,o=n;s<o.length;s++){var l=o[s],u=null===(t=l.identity)||void 0===t?void 0:t.getSelectorsByColumn();if((0,Be.Ic)(u,i))return is(l,this.viewModel)}}}function is(r,e){var t,a=e.renderContext.mainGraphicsPositionOverlay;if(a){var i=a.node();if(i){var n=i.getBoundingClientRect(),s=n.left,o=n.top,l=e.currentViewport,u=r.data,c=null!==(t=_.first(u))&&void 0!==t&&t.isY2?e.y2AxisProperties.scale:e.yAxisProperties.scale,v=l.scale,y=e.data.lineStyle.markerProperties.size*v,D=Math.max(y+1.2*y,10)*v;D%2==0&&++D;var O=1;if(u.length*D>l.width){var F=(0,nt.SS)(l.width,50,4,D);O=Math.floor(u.length/F)}for(var N=[],U=0;U<u.length;U+=O){var X=u[U];X&&N.push({x:Math.floor(Ms(e,X,s)-D/2),y:Math.floor(zr.convertSvgYToClientY(c(X.value),v,o)-D/2),width:D,height:D,type:1})}var re=e.data.multipleDisplayName;return[{id:re?"".concat(r.key).concat(re):r.key,outline:{type:0,outlines:N,clipPath:{type:1,x:s,y:o,height:e.availableHeight*v,width:e.availableWidth*v}}}]}}return[]}function jo(r){if("area"===r.visualObjects[0].objectName){var t=this.findSubSelectedAreaElement({x:d3.event.clientX,y:d3.event.clientY});return t?[t]:void 0}}function Yo(r){var a,i,t=_.first(r).visualObjects;if(t.length>0){(a=t[0])&&a.selectorsByColumn&&(i=(0,Be.fd)((0,Be.tV)(a.selectorsByColumn)));var n=1===this.data.series.length;switch(a.objectName){case"lines":return i?(0,ne.w3)(this.hostService,(0,d.__assign)((0,d.__assign)({},He.zK.lineStyles.strokeColor),{selector:i}),null):void T.fF.assertFail("LineChart - line subselection should never have no selector");case"area":return i?(0,ne.w3)(this.hostService,void 0,(0,d.__assign)((0,d.__assign)({},He.zK.lineStyles.strokeColor),{selector:i})):void T.fF.assertFail("AreaChart - area subselection should never have no selector");case"markers":return i?(i=n?void 0:i,(0,ne.w3)(this.hostService,void 0,(0,d.__assign)((0,d.__assign)({},He.zK.markers.color),{selector:i}))):void T.fF.assertFail("LineChart - marker subselection should never have no selector");case"data-labels":var s=this.data.series.find(function(w){var C;return(0,Be.Ic)(null===(C=w?.identity)||void 0===C?void 0:C.getSelectorsByColumn(),a.selectorsByColumn)});if(!s)return;var o=n?void 0:i,l=this.getSeriesAxisProperties(s),u=(0,nt.d6)(l,this.data.dataLabelsSettings),c=He.qn.labels,v={fontFamilyReference:(0,d.__assign)((0,d.__assign)({},c.fontFamily),{selector:o}),fontSizeReference:(0,d.__assign)((0,d.__assign)({},c.fontSize),{selector:o}),boldReference:(0,d.__assign)((0,d.__assign)({},c.bold),{selector:o}),italicReference:(0,d.__assign)((0,d.__assign)({},c.italic),{selector:o}),underlineReference:(0,d.__assign)((0,d.__assign)({},c.underline),{selector:o}),fontColorReference:(0,d.__assign)((0,d.__assign)({},c.color),{selector:o}),displayUnitsReference:(0,d.__assign)((0,d.__assign)({},c.labelDisplayUnits),{selector:o}),precisionReference:(0,d.__assign)((0,d.__assign)({},c.labelPrecision),{selector:o}),backgroundReference:(0,d.__assign)((0,d.__assign)({},c.backgroundColor),{selector:o})};return(0,ne.Jf)({hostServices:this.hostService,omitSelectorForSingleSeries:n,individualSelector:sn.call(this,!n),selector:i,repetitionSelector:void 0,subSelectionStylesOptions:{precision:{defaultPrecision:u.getPrecision(!1,s.type)}}},v);case"total-labels":var m=He.qn.totals;return(0,ne.Jf)({hostServices:this.hostService,omitSelectorForSingleSeries:n,individualSelector:sn.call(this,!n),selector:i,repetitionSelector:void 0},{fontFamilyReference:m.fontFamily,fontSizeReference:m.fontSize,boldReference:m.bold,italicReference:m.italic,underlineReference:m.underline,fontColorReference:(0,d.__assign)((0,d.__assign)({},m.color),{selector:(0,Bt.hm)(sn.call(this,!1),void 0,void 0)}),displayUnitsReference:m.labelDisplayUnits,precisionReference:m.labelPrecision,backgroundReference:m.backgroundColor});default:return}}}function sn(r){return(0,G.WD)({featureSwitches:this.featureSwitches,hasCategories:null!=_.first(this.originalData.categories),hasDynamicSeries:this.originalData.hasDynamicSeries,hasSeriesSelector:r})}function Ko(r,e){if(!e){var i,n,a=_.first(r).visualObjects;if(!(a.length>0))return;i=a[0],_.isEmpty(i.selectorsByColumn)||(n=(0,Be.fd)((0,Be.tV)(i.selectorsByColumn)));var s={key:"Delete",nextValue:!1};switch(i.objectName){case"lines":case"area":return n?[{type:0,excludedResetFormattingIds:[He.qn.labels.show,(0,d.__assign)((0,d.__assign)({},He.qn.labels.showSeries),{selector:n}),(0,d.__assign)((0,d.__assign)({},He.qn.lineStyles.showMarker),{selector:n}),{objectName:"seriesLabels",propertyName:"show",selector:n}]},(0,d.__assign)((0,d.__assign)({type:2},He.qn.labels.showSeries),{enabledLabel:this.localizer("Format_AddDataLabels"),selector:n}),(0,d.__assign)((0,d.__assign)({type:2},He.qn.lineStyles.showMarker),{enabledLabel:this.localizer("Format_AddMarkers"),selector:n,keyboardShortcuts:[s]}),(0,d.__assign)((0,d.__assign)({type:2},{objectName:"seriesLabels",propertyName:"show"}),{enabledLabel:this.localizer("Format_AddSeriesLabel"),selector:n}),{type:1,destinationInfo:(0,d.__assign)((0,d.__assign)({},He.qn.lineStyles.lineStyle),{selector:this.data.series.length>1?n:void 0}),label:this.localizer("Format_Line")}]:void T.fF.assertFail("LineChart - line subselection should never have no selector");case"markers":return n?[(0,d.__assign)((0,d.__assign)({type:2},He.qn.lineStyles.showMarker),{disabledLabel:this.localizer("Delete"),selector:n,keyboardShortcuts:[s]}),{type:0,excludedResetFormattingIds:[(0,d.__assign)((0,d.__assign)({},He.qn.lineStyles.showMarker),{selector:n})]},{type:1,destinationInfo:(0,d.__assign)((0,d.__assign)({},He.qn.lineStyles.markerShape),{selector:this.data.series.length>1?n:void 0}),label:this.localizer("Format_Markers")}]:void T.fF.assertFail("LineChart - marker subselection should never have no selector");default:return}}}function Xo(r){var t,e=this,a=r.lineStyle,i=r.selector,n=r.containerItemBuilder,s=(0,Za.Iq)({containerItemBuilder:n,descriptors:{strokePattern:He.qn.lineStyles.lineStyle,strokeDashArray:He.qn.lineStyles.strokeDashArray,strokeAutoScale:He.qn.lineStyles.strokeAutoScale,strokeDashCap:He.qn.lineStyles.strokeDashCap,strokeLineJoin:He.qn.lineStyles.strokeLineJoin,strokeWidth:He.qn.lineStyles.strokeWidth},strokeData:a,selector:i,isSVGStroke:!0,featureSwitches:this.featureSwitches,localize:this.localizer});null===(t=s.find(function(o){return(0,$n.cd)(o.getSimpleControlDescriptor(),He.zK.lineStyles.strokeLineJoin)}))||void 0===t||t.withDisabled(!a.strokeShow||a.interpolation===Oo.Fu.smooth,"Visual_StrokeLineJoinDisabledReason"),n.addGroup("shape",function(o){return o.withDisplayName("Visual_Shape_Line").addSlices(s.map(function(l){return l.build()})).addSlices((0,yn.Ie)({containerItemBuilder:n,descriptors:(0,d.__assign)((0,d.__assign)({},He.qn.lineStyles),{interpolation:He.qn.lineStyles.lineChartType}),interpData:a,selector:i,localize:e.localizer,featureSwitches:e.featureSwitches,disabledIfHasSelector:!0}).map(function(l){return l.build()}))})}function Zo(r){var e,t,a,i=r.selector,n=r.lineStyle,s=r.containerItemBuilder,o=!i&&this.hasSingleStaticSeries,l=(0,Za.Iq)({containerItemBuilder:s,descriptors:{strokeColor:He.qn.dataPoint.fill,strokeTransparency:He.qn.lineStyles.strokeTransparency},strokeData:(0,d.__assign)((0,d.__assign)({},n),{strokeColor:o?null===(e=this.data.series[0])||void 0===e?void 0:e.lineStyle.strokeColor:n.strokeColor}),selector:i,colorSelector:o?(0,Be.fd)(null===(t=this.data.series[0])||void 0===t?void 0:t.identity.getSelector()):i,featureSwitches:this.featureSwitches,localize:this.localizer});null===(a=l.find(function(u){return(0,$n.cd)(u.getSimpleControlDescriptor(),He.zK.lineStyles.strokeColor)}))||void 0===a||a.withDisabled(!this.hasSingleStaticSeries&&!i,"Visual_Color_AllSeries_DisabledReason"),s.addGroup("colors",function(u){return u.withDisplayName("Generic_Color").addSlices(l.map(function(c){return c.build()}))})}function Qo(r){var e=this;this.isStacked&&null==r.selector&&(this.originalData.hasDynamicSeries||this.originalData.series.length>1)&&r.containerItemBuilder.addGroup("layout",function(t){return t.withDisplayName("Layout").addSimpleSlice("seriesOrderReversed",new ge.bd({descriptor:He.qn.layout.seriesOrderReversed,value:e.data.layout.seriesOrderReversed}).build())})}function Es(r){var e=r.selector,t=r.lineStyle;r.containerItemBuilder.addSimpleSlice("showSeries",new ge.bd({descriptor:(0,d.__assign)((0,d.__assign)({},He.qn.lineStyles.strokeShow),{selector:e}),value:t.strokeShow}).build(),function(a){return a.withCustomDisplayName(e?"Visual_Show_Data_Labels_PerSeries":"Visual_ShowForAllSeries")}),Xo.call(this,r),Zo.call(this,r),Qo.call(this,r)}function rs(r){var e=this,t=r.markerStyle,a=r.selector,i=r.listType;r.containerItemBuilder.addSimpleSlice("showMarker",new ge.bd({descriptor:(0,d.__assign)((0,d.__assign)({},He.zK.markers.show),{selector:a}),value:t.show}).build(),function(n){return n.withDisabled(!a).withHidden("perCategory"===i||"staticPerCategories"===i)}).addGroup("markers",function(n){return n.withDisplayName("Visual_Shape").withDisabled(!t.show||"perCategory"===i).addSimpleSlice("markerShape",new ge.uY({descriptor:(0,d.__assign)((0,d.__assign)({},He.zK.markers.shape),{selector:a}),value:t.shape}).build()).addSimpleSlice("markerSize",new ge.mu({descriptor:(0,d.__assign)((0,d.__assign)({},He.zK.markers.size),{selector:a}),value:t.size,options:{minValue:{type:0,value:Ls.min},maxValue:{type:1,value:Ls.max},unitSymbol:gn.e_}}).build()).addSimpleSlice("markerRotation",ge.JN.getRotationSliderBuilder({descriptor:(0,d.__assign)((0,d.__assign)({},He.zK.markers.rotation),{selector:a}),value:t.rotation,localize:e.localizer}).build(),function(s){return s.withHidden(!e.featureSwitches.newMarkerProperties||!(0,Ma.Cd)(t.shape))})}).addGroup("colors",function(n){return n.withDisplayName("Generic_Color").withDisabled(!t.show).addSimpleSlice("markerColor",new ge.BT({descriptor:(0,d.__assign)((0,d.__assign)({},"perCategory"===i?(0,d.__assign)((0,d.__assign)({},He.zK.dataPoint.fill),{instanceKind:1}):He.zK.markers.color),{selector:a}),value:{value:t.color}}).build()).addSimpleSlice("markerTransparency",ge.JN.getTransparencySliderBuilder({descriptor:(0,d.__assign)((0,d.__assign)({},He.zK.markers.transparency),{selector:a}),value:t.transparency,localize:e.localizer}).build(),function(s){return s.withHidden(!e.featureSwitches.newMarkerProperties)})}),this.featureSwitches.newMarkerProperties&&r.containerItemBuilder.addGroup("border",function(n){return n.withDisplayName("Visual_Border").withDisabled(!(0,Ma.nK)(t.shape)||!t.show||"perCategory"===i).addSlices((0,Za.Iq)({containerItemBuilder:n,descriptors:la.$9,strokeData:t.stroke,selector:a,featureSwitches:e.featureSwitches,localize:e.localizer}).map(function(s){return s.build()}))})}function Jo(r,e){if(!this.featureSwitches.onObject||1!==e)return[];var t=this.isComboChart?xs.OA:He.qn,a=this.data.series.map(function(o){return{selector:o.identity.getSelector(),value:o.lineStyle.markerProperties.show}}),i=this.data.series.map(function(o){var l;return{selector:o.identity.getSelector(),value:null===(l=o.seriesLabelSettings)||void 0===l?void 0:l.show}}),n=this.data.series.map(function(o){var l;return{selector:o.identity.getSelector(),value:null===(l=o.labelSettings)||void 0===l?void 0:l.show}}),s=[Mr.v.create(t.lineStyles.showMarker,this.data.lineStyle.markerProperties.show,a).onToggleEnabled(Ka.W.createBooleanDataViewObjectChange(t.lineStyles.showMarkerByDefault,!1,{required:!0}),Ka.W.createBooleanDataViewObjectChange(t.lineStyles.showMarker,!0,{required:!0})).onToggleDisabled(Ka.W.createRevertToDefaultDataViewObjectChange("lineStyles",{required:!0})),Tr.$.create(t.lineStyles.showMarker,this.data.lineStyle.markerProperties.show).onToggleDisabled(Ka.W.createRevertToDefaultDataViewObjectChange("lineStyles",{required:!0})),Mr.v.create(He.qn.seriesLabels.backgroundColor,this.data.seriesLabelSettings.enableBackground).onToggleEnabled(Ka.W.createBooleanDataViewObjectChange(He.qn.seriesLabels.enableBackground,!0,{required:!0,inheritSelector:!0})),Tr.$.create(He.qn.seriesLabels.backgroundColor,this.data.seriesLabelSettings.enableBackground).onToggleEnabled(Ka.W.createBooleanDataViewObjectChange(He.qn.seriesLabels.enableBackground,!0,{required:!0})),Mr.v.create(He.qn.seriesLabels.show,this.data.seriesLabelSettings.show,i).onToggleEnabled(Ka.W.createBooleanDataViewObjectChange(He.qn.seriesLabels.showByDefault,!1,{required:!0}),Ka.W.createBooleanDataViewObjectChange(He.qn.seriesLabels.show,!0,{required:!0})).onToggleDisabled(Ka.W.createRevertToDefaultDataViewObjectChange("seriesLabels",{required:!0})),Tr.$.create(He.qn.seriesLabels.show,this.data.seriesLabelSettings.show).onToggleDisabled(Ka.W.createRevertToDefaultDataViewObjectChange("seriesLabels",{required:!0})),Mr.v.create(t.labels.backgroundColor,this.data.dataLabelsSettings.enableBackground).onToggleEnabled(Ka.W.createBooleanDataViewObjectChange(t.labels.enableBackground,!0,{inheritSelector:!0})),Tr.$.create(t.labels.backgroundColor,this.data.dataLabelsSettings.enableBackground).onToggleEnabled(Ka.W.createBooleanDataViewObjectChange(t.labels.enableBackground,!0)),Mr.v.create(t.labels.showSeries,this.data.dataLabelsSettings.show,n).onToggleEnabled(Ka.W.createBooleanDataViewObjectChange(t.labels.showByDefault,!1),Ka.W.createBooleanDataViewObjectChange(t.labels.show,!0)).onToggleDisabled(Ka.W.createRevertToDefaultDataViewObjectChange("labels")),Tr.$.create(t.labels.show,this.data.dataLabelsSettings.show).onToggleDisabled(Ka.W.createRevertToDefaultDataViewObjectChange("labels"))];return $e.o.getDataViewObjectsBehaviorChanges(r,s)}var qo=b(34519),Rs=b(12198),mn=b(64067),el=function(){function r(e){this.dataPoints=e.dataPoints,this.isComboChart=e.isComboChart,this.isScalar=e.isScalar,this.hasCategories=e.hasCategories}return r.prototype.queryRegion=function(e){var t=this,a=[],i=e.dataSpace;return(this.isScalar||this.hasCategories&&void 0!==i.left&&void 0!==i.right)&&(a=_.filter(this.dataPoints,function(n){return(0,E.bl)(i.left.value,t.isScalar?n.categoryValue:n.categoryIndex)&&(0,E.bl)(t.isScalar?n.categoryValue:n.categoryIndex,i.right.value)&&(0,E.bl)(t.getBottom(i,n),n.value)&&(0,E.bl)(n.value,t.getTop(i,n))})),a},r.prototype.getBottom=function(e,t){return t.isY2||this.isComboChart&&e.bottom2?e.bottom2.value:e.bottom.value},r.prototype.getTop=function(e,t){return t.isY2||this.isComboChart&&e.top2?e.top2.value:e.top.value},r}(),Sn=(0,Z.CH)("line"),Nn=(0,Z.CH)("focus-element"),Ns=(0,Z.CH)("position-rect"),ss=(0,Z.CH)("cat"),xn=(0,Z.CH)("catArea"),Bs=(0,Z.CH)("dot"),zs=(0,Z.CH)("point"),os=(0,Z.CH)("circle-item"),Bn=(0,Z.CH)("marker-line"),ls=(0,Z.CH)("interactivity-line"),us=(0,Z.CH)("selected-markers"),Wr="path",zn="circle",Ws=(0,Z.CH)("selection-circle"),Hs=(0,Z.CH)("selection-circles");function dl(r,e){var t=this,a=this.getChartX(r);e.length>0&&Us.call(this,a),this.hoverLineContext.selectAll(os.selector).data(_.filter(e,function(i){return i.showHoverlineDots&&null!=i.value})).join(function(i){return i.append(zn).classed(os.class,!0)}).attr("fill",function(i){return i.marker.color}).attr("r",Rn(this.data.lineStyle)).attr("cx",a).attr("cy",function(i){return Or(t.viewModel,i)})}function hl(){this.hoverLine.style("opacity",Fa.OH),this.hoverLineContext.selectAll(os.selector).remove()}function vl(){this.hoverLineContext=this.mainGraphicsSVG.append("g").classed("hover-line",!0),this.hoverLine=this.hoverLineContext.append("line").classed("interactive",this.mobileTileInteractive).attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",0).style("opacity",Fa.OH).style("stroke",Ue.v.getThemeColor(this.style,"foregroundNeutralSecondary")),this.mobileTileInteractive&&(this.dragHandle=this.hoverLineContext.append("circle").attr("cx",0).attr("r","6px").classed("drag-handle",!0),this.hoverLineContext.append("g").classed(Hs.class,!0))}function Us(r){this.hoverLine.attr("x1",r=r||0).attr("x2",r).attr("y1",0).attr("y2",this.availableHeight).style("opacity",1)}function fl(r,e){var t=this;Us.call(this,r),this.mobileTileInteractive&&(this.dragHandle.attr("cx",r).attr("cy",this.availableHeight),this.hoverLineContext.select(Hs.selector).selectAll(Ws.selector).data(this.activeData.series,function(a){return a.identity.getKey()}).join(function(a){return a.append(zn).classed(Ws.class,!0)}).attr("r",Rn(this.activeData.lineStyle)).attr("cx",r).attr("cy",function(a){return a.data[e]?Or(t.viewModel,a.data[e]):0}).style("opacity",function(a){return _.some(a.data,function(i){return!!i&&i.categoryIndex===e})?1:0}).style("fill",function(a){return a.lineStyle.strokeColor}))}function bn(r){return r&&null!==r.value}function cs(r,e){return(e?_.findLast:_.find)(r.data,function(a,i,n){var s=e?n[i-1]:n[i+1];return null!=a&&null!=a.value&&null!=s&&null!=s.value})}var Gs={findSubSelectedAreaElement:function(e,t){if(null!=e.renderContext.mainGraphicsSVG){var a=e.renderContext.mainGraphicsSVG.selectAll(Sn.selector).filter(function(n){return n.data.some(function(s){return bn(s)})}).nodes(),i=function(r,e,t){for(var a,i=Number.MAX_VALUE,s=r.renderContext.mainGraphicsSVG.node().getBoundingClientRect(),o=s.left,l=s.top,u=0;u<t.length;u++){var v=Cl(e.x,t[u],function(m){return zr.convertSvgXToClientX(m,r.currentViewport.scale,o)},function(m){return zr.convertSvgYToClientY(m,r.currentViewport.scale,l)}).y,y=e.y-v;y>=-4&&i>(y=Math.abs(y))&&(i=y,a=u)}return a}(e,t,a);if(null!=i)return e.renderContext.mainGraphicsSVG.selectAll(xn.selector).filter(function(n){return n.index===i}).node()}}};function Cl(r,e,t,a){for(var n,l,s=0,o=e.getTotalLength();n=e.getPointAtLength(l=s+o>>1),(0,Fa.lO)(n),t&&(n.x=t(n.x)),a&&(n.y=a(n.y)),l!==o&&l!==s||n.x===r;)if(n.x>r)o=l;else{if(!(n.x<r))break;s=l}return n}function Wn(r,e){return r.renderContext.mainGraphicsContext.selectAll(Nn.selector).data(e?[e]:[]).join(function(t){return t.append(zn).attr("class",Nn.class).attr("tabindex",0).attr("focusable",!0).attr("role","option").classed(Da.Pg,!It.M.isInternetExplorerOrEdge())}).attr("aria-selected",function(t){return t.selected}).attr("aria-label",function(t){var a,i;if(as(t))return r.hostService.getLocalizedString("Anomaly_ScreenReader_Hint");var n=!1;In(r.activeData)&&(n=_.some(r.activeData.anomalyDetections[0].anomaliesCategoryIndex,function(l){return l===t.categoryIndex}));var o=(0,ii.X)(t.tooltipInfo);return!(null===(a=t?.uncertainty)||void 0===a)&&a.upperTooltip&&(o+=" ".concat((0,ii.X)([t.uncertainty.upperTooltip]))),!(null===(i=t?.uncertainty)||void 0===i)&&i.lowerTooltip&&(o+=" ".concat((0,ii.X)([t.uncertainty.lowerTooltip]))),n&&(o+=" ".concat(r.hostService.getLocalizedString("AnomalyPoint_ScreenReader_Hint"))),o}).attr("cx",function(t){return er(r,t)}).attr("cy",function(t){return as(t)?(0,kn.v8)(t,r.yAxisProperties.scale,r.activeData.anomalyDetections[0].marker.size):Or(r,t)}).attr("r",function(t){return as(t)?(0,kn.bj)(r.activeData.anomalyDetections[0].marker.size):t.marker.show?t.marker.size*dr.Wo.sizeRatio:t.marker.focusOnlySize}).style("fill","none")}var Al=function(){function r(e,t,a){this.tooltipService=e,this.mainGraphicsSVG=t,this.supportsHoverLineTooltip=a,this.isHoverLineTooltipActive=!1,a&&(this.hoverLineTooltipOverlay=t.append("rect").classed(_s.class,!0))}return r.prototype.applyTooltips=function(e,t,a){!this.supportsHoverLineTooltip||e.activeData.binnedLineSamplingApplied&&e.activeData.hasDynamicSeries?this.applyPointTooltip(e,t,a):this.applyHoverLineTooltip(e,t,a)},r.prototype.removeTooltips=function(e,t){this.removePointTooltip(e),this.removeHoverLineTooltip(t)},r.prototype.applyHoverLineTooltip=function(e,t,a){this.removePointTooltip(e),this.hoverLineTooltipOverlay.attrs({x:0,width:e.availableWidth,height:e.availableHeight}),this.tooltipService.addTooltip(this.mainGraphicsSVG,function(s){var c,l=t.getCategoryIndexFromTooltipEvent(s,s.elementCoordinates[0]),u=a.getHoverLineDataForCategory(l);return u&&u.hasUncertainty&&(c=t.getYValueFromTooltipEvent(s.elementCoordinates[1],s.context)),r.getSeriesTooltipInfo(u,c)},function(n){return r.getCategoryIdentityForHoverLineTooltipEvent(t,a,n)},!0),this.mainGraphicsSVG.on("mouseout.hoverline",function(){return a.clearHoverLine()}),this.mainGraphicsSVG.on("touchmove.hoverline",function(){return a.clearHoverLine()}),this.setHoverLineTooltipActive(!0)},r.prototype.removeHoverLineTooltip=function(e){this.isHoverLineTooltipActive&&(e.clearHoverLine(),this.tooltipService.removeTooltips(this.mainGraphicsSVG),this.mainGraphicsSVG.on(".hoverline",null),this.setHoverLineTooltipActive(!1))},r.prototype.setHoverLineTooltipActive=function(e){this.isHoverLineTooltipActive=e},r.prototype.applyPointTooltip=function(e,t,a){this.removeHoverLineTooltip(a);var n=e.isComboChart?function(o){return r.getCategoryIdentityForHoverLineTooltipEvent(t,a,o)}:function(o){return o.data&&[o.data.identity]},s=function(l){var u;return null===(u=l.data)||void 0===u?void 0:u.tooltipInfo};this.tooltipService.addTooltip(e.interactivityLines,function(l){return t.getTooltipInfoForPoint(l,l.elementCoordinates[0])},n,!0),this.tooltipService.addTooltip(e.dots,s,n,!0),this.tooltipService.addTooltip(e.explicitDots,s,n,!0),this.tooltipService.addTooltip(e.focusElement,s,n,!0)},r.prototype.removePointTooltip=function(e){this.isHoverLineTooltipActive||(this.tooltipService.removeTooltips(e.interactivityLines),this.tooltipService.removeTooltips(e.dots),this.tooltipService.removeTooltips(e.explicitDots))},r.getCategoryIdentityForHoverLineTooltipEvent=function(e,t,a){var i;if(a){if(a.data&&Ps(a.data))return null;var s=e.getCategoryIndexFromTooltipEvent(a,a.elementCoordinates[0]);return t.getHoverLineIdentities(s,null===(i=a.data)||void 0===i?void 0:i.data)}},r.getSeriesTooltipInfo=function(e,t){var a,i,n,s,o;if(!e)return null;var l=e.dataPoints;if(_.isEmpty(l))return null;var u={show:!1,color:"#000000",transparency:100,shape:Ma.ZO.circle},c=!_.isEmpty(l)&&l[0].seriesDisplayName,v=[],y=function(Ze){return!(v.length>=r.MaxNumberOfItems||(v.push(Ze),0))},m=e.legendMarkerRendering,w=m!==nn._.markerOnly&&m!==nn._.markerCircleDefault,C=l[0].additionalTooltipItems,O=function(Ze){return w?Ze.line:void 0};if(l.every(function(Je){return _.isEqual(Je.additionalTooltipItems,C)})){var F=[];for(var N in l)if(null!=(U=l[N]).value){if(!y({header:U.category,subheader:U.multipleDisplayName,displayName:U.seriesName||U.measureDisplayName,value:null!==(n=null===(i=null===(a=U.uncertainty)||void 0===a?void 0:a.rangeTooltip)||void 0===i?void 0:i.value)&&void 0!==n?n:U.formattedValue,marker:U.marker,line:O(U)}))break;F.push(+N)}e.hasUncertainty&&(T.fF.assertValue(t,"expect to have VerticalPositionInfo if uncertainty information present"),v=function(r,e,t,a){T.fF.assert(function(){return r.length===t.length},"augmentTooltipInfoWitUncertainty -- expected length of tooltipItems and mapping array to be identical");for(var i=[],n=1/0,s=-1,o=0,l=t.length;o<l;o++)if((c=e[t[o]]).uncertainty)if(c.isY2)(v=Math.abs(c.value-a.y2.point))<a.y2.threshold?i.push(o):v<n&&(n=v,s=o);else{var v;(v=Math.abs(c.value-a.y.point))<a.y.threshold&&i.push(o),v<n&&(n=v,s=o)}var y=[];for(o=0,l=t.length;o<l;o++){var c=e[t[o]],m=r[o];if(_.includes(i,o)||s===o){var C=c.uncertainty;T.fF.assertValue(C,"added point as having error when no uncertainty info exists"),C.upperTooltip&&y.push((0,d.__assign)({header:c.category,subheader:c.multipleDisplayName},C.upperTooltip)),y.push(m),C.lowerTooltip&&y.push(C.lowerTooltip)}else y.push(m)}return y}(v,l,F,t));for(var X=0,re=C??[];X<re.length&&y({displayName:(pe=re[X]).displayName,value:pe.value,marker:u});X++);}else for(var q=0,ee=l;q<ee.length;q++){var U=ee[q];if(v.length>=r.MaxNumberOfItems)break;if(null!=U.value){c&&y({header:U.category,subheader:U.multipleDisplayName,displayName:U.seriesDisplayName,value:U.seriesName,marker:U.marker,line:O(U)}),y({header:U.category,subheader:U.multipleDisplayName,displayName:c?U.measureActualDisplayName:U.measureDisplayName,value:U.formattedValue,marker:c?u:U.marker,line:c?void 0:O(U)});for(var ue=0,ke=null!==(s=U.additionalTooltipItems)&&void 0!==s?s:[];ue<ke.length&&y({header:U.category,subheader:U.multipleDisplayName,displayName:(pe=ke[ue]).displayName,value:pe.value,marker:u});ue++);}}for(var Ke=0,Re=null!==(o=e.additionalTooltipItems)&&void 0!==o?o:[];Ke<Re.length;Ke++){var pe;if(!y({header:l[0].category,subheader:l[0].multipleDisplayName,displayName:(pe=Re[Ke]).displayName,value:pe.value,marker:u}))break}return 0===v.length?null:v},r.MaxNumberOfItems=15,r}(),mr=He.zK.general.formatString,wl=function(r){function e(t){var a=r.call(this,t)||this;return a.options=t,a.pathXAdjustment=0,a.deferDragMoveOperation=(0,pi.S5)(function(){if(a.lastDragMoveXPosition&&a.data&&a.margin){var i=e.findCategoryIndex({pointX:a.lastDragMoveXPosition-a.margin.left,offsetX:0,categoryData:a.data.categoryData,currentViewport:a.currentViewport,scale:a.xAxisProperties.scale,categoryThickness:a.xAxisProperties.categoryThickness,isScalar:a.data.isScalar});a.selectColumn(i),a.lastDragMoveXPosition=void 0}}),a.tooltipsEnabledOnHost=t.tooltipsEnabled,a.markerRenderer=new dr.Wo,a.anomalyNavigationHelper=new bo.B,a}return(0,d.__extends)(e,r),e.getInteractiveLineChartDomElement=function(t){return t.children("svg").get(0)},e.createStackedValueDomain=function(t,a){if(T.fF.assertValue(t,"data"),0===t.length)return null;var i=[d3.min(t,function(s){return d3.min(s.data,function(o){return o&&o.stackedValue})}),d3.max(t,function(s){return d3.max(s.data,function(o){return o&&o.stackedValue})})];if(a){var n=1e-4;i[0]=(0,E.W0)(i[0],n),i[1]=(0,E.W0)(i[1],n)}return i},Object.defineProperty(e.prototype,"lineChartType",{get:function(){return this.options.lineChartType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isAreaChart",{get:function(){return 2===this.lineChartType||16===this.lineChartType||32===this.lineChartType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isStacked",{get:function(){return 16===this.lineChartType||32===this.lineChartType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isStacked100",{get:function(){return 32===this.lineChartType},enumerable:!1,configurable:!0}),e.prototype.initRenderer=function(t){var a=this;if(r.prototype.initRenderer.call(this,t),this.svg.classed(e.ClassName,!0),this.mainGraphicsSVG=this.svg.append("svg").classed(e.lineChartSVGClassName,!0),this.svgDefs=this.mainGraphicsSVG.append("defs"),this.lineChartTooltipHelper=new Al(this.tooltipService,this.mainGraphicsSVG,!this.isComboChart&&!this.mobileTileInteractive),this.mainGraphicsContext=this.mainGraphicsSVG.append("g").attr("role","listbox").attr("aria-label",this.localizer("Visual_Plot")).attr("aria-live","polite").classed(e.MainGraphicsContextClassName,!0),this.mainGraphicsContext.append("g").attr("class",us.class),this.interactivityService&&(this.isComboChart?this.mainGraphicsContext.attr(Ia.Rh,!0):(t.useManagedTabIndex?this.mainGraphicsContext.classed(Ra.rG.class,!0).attr(Ia.Rh,!0):this.mainGraphicsContext.attr("tabindex",0).attr("focusable",!0),this.mainGraphicsContext.classed(Da.Pg,!It.M.isInternetExplorerOrEdge()))),vl.call(this),this.xAxisProperties={d3Axis:null,scale:null,valueType:null,formatter:null,graphicsContext:null,values:[],axisLabel:null,isCategoryAxis:!0},this.mobileTileInteractive){var n=e.getInteractiveLineChartDomElement(this.element),s=function(){a.lastDragMoveXPosition=d3.mouse(n)[0],a.deferDragMoveOperation()},o=d3.drag().on("drag",s);d3.select(n).style("touch-action","none").call(o).on("click",s)}},e.prototype.setData=function(t,a){var i,n,s;if(this.data=this.originalData={series:[],totals:[],legendData:(0,x.Fe)(this.style),isScalar:!1,dataLabelsSettings:ts(this.style,this.isComboChart,this.isStacked100),seriesLabelSettings:yt(this.style),hasDynamicSeries:!1,hasHighlights:!1,categories:[],categoryMetadata:void 0,valuesMetadata:[],categoryData:[],categoryIdentities:[],lineStyle:es(),binnedLineSamplingApplied:!1,legendMarkerRendering:nn._.markerCircleDefault,matchLineColor:!1,layout:{seriesOrderReversed:!1}},this.focusedDatum=void 0,_.isEmpty(t))this.dataView=void 0;else{var o=_.first(t);if(o?.categorical){this.dataView=o;var c,l=o.categorical.categories,u={text:!0};l&&!_.isEmpty(l)&&(l[0].source&&l[0].source.type&&(u=l[0].source.type),c=(0,oe.A8)(l[0]));var v=null===(i=this.hostService)||void 0===i?void 0:i.tooltips(),y=this.tooltipsEnabled=this.tooltipsEnabledOnHost&&(!v||v?.enabled());this.data=this.originalData=Vs.convert({dataView:o,style:this.style,isScalar:(0,oe.PX)(null!==(s=null===(n=o.metadata)||void 0===n?void 0:n.objects)&&void 0!==s?s:null,He.zK.categoryAxis.axisType,u,c,(0,Gt.n$)(o)),interactivityService:this.interactivityService,isComboChart:this.isComboChart,tooltipsEnabled:y,forecastDataView:_.find(t,function(D){return(0,f.Aq)(D)}),anomalyDetectionDataView:_.find(t,function(D){return(0,W.Ik)(D)}),isStacked:this.isStacked,isAreaChart:this.isAreaChart,isStacked100:this.isStacked100,multipleInfo:a,supportsTotalLabels:!a&&this.supportsTotalLabels(),featureSwitches:this.featureSwitches,hostServices:this.hostService});var w=this.data.categoryIdentities;this.suppressAnimation=e.shouldSuppressAnimations(this.previousCategoryIds,w),this.previousCategoryIds=w;var C=_.find(this.data.series,function(D){return D.data[0]});this.focusedDatum=C?.data[0]}}},e.shouldSuppressAnimations=function(t,a){var i;if(null!=t&&!(t.length>sa.dt||a.length>sa.dt))if(i=!1,0===t.length)i=!0;else for(var n=0,s=Math.min(t.length,a.length);n<s;n++)if(!z.l0.isEqual(t[n],a[n])){i=!0;break}return i},e.prototype.getCategoryDomain=function(t){var a;return P.createDomain(t.series,this.getCategoryValueType(),t.isScalar,[P.createScalarDomainOptions(null===(a=e.getForecastDomain(t.forecastLines))||void 0===a?void 0:a.x,0)])},e.prototype.getAxesDomains=function(t,a){var i,n,s,o;if(!this.data)return{};var l=this.data,u={};if(a.categoryAxis&&l.isScalar){var c=this.getCategoryDomain(l);if(c){P.assertScalarDomain(c.domain);var v=(i=c.domain)[0],y=i[1];void 0!==v&&void 0!==y&&(u.categoryAxis=[v,y])}}if(a.valueAxis||a.secondaryValueAxis){var m=null===(o=e.getForecastDomain(l.forecastLines))||void 0===o?void 0:o.y;if(a.valueAxis){var w=this.getValueDataDomain(t,!1),C=(n=P.mergeDomains(m,w))[0],D=n[1];void 0!==C&&void 0!==D&&(u.valueAxis=[C,D])}if(a.secondaryValueAxis){var O=this.getValueDataDomain(t,!0),F=(s=P.mergeDomains(m,O))[0],N=s[1];void 0!==F&&void 0!==N&&(u.secondaryValueAxis=[F,N])}}return u},e.prototype.getValueDataDomain=function(t,a){var i=e.getDataForValueAxis(this.data,a).seriesData;return this.isStacked?e.createStackedValueDomain(i,this.isStacked100):P.createUncertaintyAwareValueDomain(i,t)},e.prototype.hasLegend=function(){return this.data&&(this.data.hasDynamicSeries||this.data.series&&(this.data.series.length>1||this.data.valuesMetadata.length>1))},e.prototype.setFilteredData=function(t,a){var i=(0,xe.ED)(this.data);i.series=e.sliceSeries(i.series,t,a),i.categories=i.categories.slice(t,a),this.clippedData=i},e.getCategoryCount=function(t){var a;return(null===(a=t.series)||void 0===a?void 0:a.length)>0?t.series[0].data.length:0},e.prototype.getSeriesLabelsSettings=function(){return(0,xe.ED)(this.data).seriesLabelSettings},e.getForecastDomain=function(t){if(!_.isEmpty(t)){for(var a=[],i=[],n=0,s=t;n<s.length;n++){var o=s[n];_.isEmpty(o.points)||(a.push.apply(a,_.map(o.points,function(l){return l.point.x})),i.push.apply(i,_.map(o.points,function(l){return l.point.y})),a.push.apply(a,_.map(o.points,function(l){return l.upperBound.x})),i.push.apply(i,_.map(o.points,function(l){return l.upperBound.y})),a.push.apply(a,_.map(o.points,function(l){return l.lowerBound.x})),i.push.apply(i,_.map(o.points,function(l){return l.lowerBound.y})))}return{x:d3.extent(a),y:d3.extent(i)}}},e.prototype.calculateAxesProperties=function(t){var i,n,s,o,l,a=this;this.updateCurrentViewport(t);var u=t.categoryAxisOptions,c=t.valueAxisOptions,v=e.getCategoryCount(this.data),y=this.data?(0,p.is)({data:this.data,availableWidth:this.availableWidth,categoryCount:v,preferredCategoryWidth:null!==(n=null===(i=this.data)||void 0===i?void 0:i.preferredCategoryWidth)&&void 0!==n?n:null,domain:null===(o=P.createDomain(this.data.series,P.getCategoryValueType(null===(s=this.data)||void 0===s?void 0:s.categoryMetadata),this.getVisualCategoryAxisIsScalar(),[t.categoryAxisOptions.includeDomain]))||void 0===o?void 0:o.domain,isScalar:this.getVisualCategoryAxisIsScalar(),cartesianOptions:this.options,trimOrdinalDataOnOverflow:t.trimOrdinalDataOnOverflow,outerPaddingRatio:t.outerPaddingRatio,innerPaddingRatio:t.innerPaddingRatio}):(0,p.u8)(),m=this.adjustLayoutForScroll(this.data,v,t.trimOrdinalDataOnOverflow,y),w=m.series,C=!1,D=this.data.valuesMetadata;if(_.some(w,function(Kt){return Kt.isY2})){var O=e.getDataForValueAxis(m,C=t.roleName===mi.R.Y2);w=O.seriesData,D=O.valuesMetadata}var F=!_.isEmpty(m.series)&&m.series[0].xCol,N=!_.isEmpty(w)&&w[0].yCol,U=this.getAxesDomains(!1,{categoryAxis:!0,valueAxis:!C,secondaryValueAxis:C}),X=P.getAxisFormatString(w),re=P.createScalarDomainOptions(C?U.secondaryValueAxis:U.valueAxis,0);re=P.mergeScalarAxisDomains(c.includeDomain,re);var pe=m.isScalar?P.mergeScalarAxisDomains(P.createScalarDomainOptions(U.categoryAxis,0),u.includeDomain):this.getCategoryDomain(m),q=this.getPreferredPlotArea(y),ee=function(da){var ua,Mt="x"===da,ea="y"===da,pa=Mt?u:c;return{pixelSpan:Mt?q.width:q.height,domainOptions:Mt?pe:re,metaDataColumn:Mt?F:D,axisZoom:t.axisZoom,isScalar:ea||m.isScalar,isVertical:ea,isCategoryAxis:Mt,forcedTickCount:t.forcedTickCount,axis:(0,d.__assign)((0,d.__assign)({},pa.axis),{invertAxis:pa.axis.invertAxis&&(ea||m.isScalar)}),useTickIntervalForDisplayUnits:!0,margin:a.margin,includeZero:!!ea&&a.isStacked&&(null===(ua=a.data)||void 0===ua?void 0:ua.series.length)>1&&P.shouldIncludeZero(pa.includeDomain),zeroScalarDomain:e.DefaultZeroScalarDomain,formatString:Mt?(0,I.EO)(F,mr):a.isStacked100?a.hostService.getLocalizedString("Percentage"):X??(0,I.EO)(N,mr),outerPadding:Mt&&m.isScalar?e.ScalarOuterPadding:0,outerPaddingRatio:Mt?y.outerPaddingRatio:0,categoryThickness:Mt?y.categoryThickness:void 0,allowSingleScalarTick:!!Mt&&m.isScalar,maxTickCount:Mt?m.scalarKeyCount:void 0,preventNice:Mt?!!m.isScalar&&P.hasForcedDomain(pe):P.hasForcedDomain(re),shouldClamp:!ea&&void 0,isSecValueAxis:ea?C||a.isComboChart:void 0,is100Pct:ea&&a.isStacked100,getValueFn:Mt?function(Ta,Ha){return(0,p.dZ)(m,Ta,Ha,m.isScalar)}:void 0}},ue=P.createAxis(ee("y")),ke=!1,Ke=0,Re=!1;if(ue.dataDomain&&_.isNumber(ue.dataDomain[0])&&_.isNumber(ue.dataDomain[1])&&(ke=(null===(l=m.totalLabelsSettings)||void 0===l?void 0:l.show)&&this.supportsTotalLabels(),Ke=e.getMaximumMarkerSize(m.series),Re=_.some(m.anomalyDetections,function(Kt){return-1!==Kt.highestAnomalyPointIndex||-1!==Kt.lowestAnomalyPointIndex})),ke||Ke||Re){T.fF.assert(function(){return!!ue.dataDomain&&_.isNumber(ue.dataDomain[0])&&_.isNumber(ue.dataDomain[1])});var Je=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],Ze=!1,Lt=function(da){Je=[Math.min(Je[0],da[0]),Math.max(Je[1],da[1])],Ze=!0};if(ke){var Xt=e.adjustDomainForLabels(ue,m);Xt.adjusted&&Lt(Xt.domain)}if(Ke){var Yt=e.adjustDomainCommon(ue,Ke);Yt.adjusted&&Lt(Yt.domain)}Re&&Lt((0,ws.LS)(ue.dataDomain,ue.scale,m.anomalyDetections)),Ze&&(ue=P.createAxis((0,d.__assign)((0,d.__assign)({},ee("y")),{domainOptions:P.mergeScalarAxisDomains(c.includeDomain,re,P.createScalarDomainOptions(Je,0)),preventNice:!0})))}C?this.y2AxisProperties=ue:this.yAxisProperties=ue;var wt=P.createAxis(ee("x"));return this.interactivityService&&!this.data.isScalar&&(wt.categoryIdentities=_.map(m.categoryIdentities,function(Kt){return function(){return Kt}})),[wt,ue]},e.prototype.getCategoryValueType=function(){return P.getCategoryValueType(this.data.scalarMetadata||this.data.categoryMetadata)},e.getDataForValueAxis=function(t,a){var n=t.valuesMetadata,s=a?{roles:{Y2:!0}}:{roles:{Y:!0}};return{seriesData:_.filter(t.series,function(o){return o.isY2===a}),valuesMetadata:_.filter(n,s)}},e.prototype.adjustLayoutForScroll=function(t,a,i,n){if(this.clippedData=void 0,t&&!t.isScalar&&!this.options.isScrollable&&i){var s=Math.min(a,n.categoryCount);a!==s&&((t=this.clippedData=(0,xe.ED)(t)).series=e.sliceSeries(t.series,0,s),t.categories=t.categories.slice(0,s),t.categoryIdentities&&(t.categoryIdentities=t.categoryIdentities.slice(0,s)))}return t},e.prototype.setAxesLayout=function(t){this.updateCurrentViewport(t.layout),this.xAxisProperties=t.layout.axes.x,2&t.axisType&&(this.isComboChart?this.yAxisProperties=t.layout.axes.y2:this.y2AxisProperties=t.layout.axes.y2),1&t.axisType&&(this.yAxisProperties=t.layout.axes.y1);var a=this.data?{categoryCount:this.xAxisProperties.values.length,categoryThickness:this.xAxisProperties.categoryThickness,outerPaddingRatio:this.xAxisProperties.outerPaddingRatio,innerPaddingRatio:this.xAxisProperties.innerPaddingRatio,isScalar:this.getVisualCategoryAxisIsScalar()}:(0,p.u8)();this.data=this.adjustLayoutForScroll(this.data,e.getCategoryCount(this.data),t.trimOrdinalDataOnOverflow,a)},e.adjustDomainForLabels=function(t,a){var i=e.getCategoryCount(a)?a.series[0].data[0].labelFormatString:"",n=(0,G.fI)(),s=(0,nt.d6)(t,a.totalLabelsSettings),o=n.getOrCreate(i,a.totalLabelsSettings,s.units,a.totalLabelsSettings.precision),l=t.dataDomain[0].toString(),u=(0,nt.Bw)(o.format(l)),c=(0,J.qk)(a.totalLabelsSettings.fontProperties,u),v=te.b.estimateSvgTextHeight(c);return e.adjustDomainCommon(t,v+g.FJ)},e.getMaximumMarkerSize=function(t){return t.length>0?d3.max(t,function(a){return a.lineStyle.markerProperties.show?a.lineStyle.markerProperties.size:0})*dr.Wo.sizeRatio:0},e.adjustDomainCommon=function(t,a){var i=t.dataDomain,n=t.scale.domain(),s=t.scale,o=s(i[0])+a,l=s(i[1])-a,u=s.invert(o),c=s.invert(l);return P.adjustDomainWithConstantPixelDifference(n[0],n[1],u,c)},e.prototype.getFormattingCards=function(t){return Fo.call(this,t)},e.prototype.getDisambiguationSubSelectables=function(t,a){return Ho.call(this,t,a)},e.prototype.getSelectorsByColumnFromSubselectedElement=function(t){return Uo.call(this,t)},e.prototype.getSubSelectionCustomOutlines=function(t){return Go.call(this,t)},e.prototype.getSubSelectionCustomElements=function(t){return jo.call(this,t)},e.prototype.getSubSelectionStyles=function(t){return Yo.call(this,t)},e.prototype.getSubSelectionShortcuts=function(t,a){return Ko.call(this,t,a)},e.prototype.enumerateObjectInstances=function(t,a){return zo.call(this,t,a)},e.prototype.getDataViewObjectLayerChanges=function(t,a){return Jo.call(this,t,a)},e.prototype.showSeriesCard=function(){return!(this.isComboChart&&!this.data.hasY2Role)},e.prototype.supportsTotalLabels=function(){return!(this.data&&this.data.multipleIdentity)&&16===this.lineChartType},e.prototype.supportsTrendLine=function(){return!this.data.multipleIdentity&&!this.isStacked&&this.getVisualCategoryAxisIsScalar()&&this.data.hasValues&&!(this.haveY2Data()&&!this.isComboChart)},e.prototype.supportsStaticReferenceLines=function(){return this.getVisualCategoryAxisIsScalar()},e.prototype.supportsForecast=function(){return!this.data.multipleIdentity&&!this.isStacked&&this.getVisualCategoryAxisIsScalar()&&this.data.hasValues&&1===this.data.series.length&&!this.hasLegend()},e.prototype.supportsAnomalyDetection=function(){return!this.data.multipleIdentity&&this.featureSwitches.daxTransformEnabled&&!this.isStacked&&this.data.hasValues},e.prototype.supportsPerCategoryMarker=function(){return!this.isComboChart},e.prototype.shouldSuppressAnimation=function(){return!!this.suppressAnimation},e.prototype.showLabelPerSeries=function(){var t=this.originalData;return t.series.length>1||!t.categoryMetadata||this.isComboChart},e.prototype.getSeriesAxisProperties=function(t){return t.isY2?this.y2AxisProperties:this.yAxisProperties},e.prototype.render=function(t,a,i){var n=this,s=this.suppressAnimation?0:(0,sa.Mb)(this.animator,t),o=this.viewModel;this.mainGraphicsPositionRect=this.mainGraphicsSVG.selectAll(Ns.selector).data(function(u){return!n.lineChartTooltipHelper.hoverLineTooltipOverlay&&i?[u]:[]}).join("rect").attrs({x:0,width:0,height:0}).style("pointer-events","none").classed(Ns.class,!0),(0,kn.WI)(this.data.anomalyDetections,this.mainGraphicsSVG,this.xAxisProperties.scale,this.yAxisProperties.scale,s,this.hostService,this.isVisualInteractive),this.anomalyNavigationHelper.update(In(this.data)?this.data.anomalyDetections[0].anomalies:[],this.clippedData,this.focusedDatum,function(u){return Wn(o,u)},this.mainGraphicsContext);var l=function(r,e,t){var a,i,n,s,o=r.renderContext,l=r.plotAreaHelper,u=r.lineChartTooltipHelper,c=r.tooltipInteractivity,v=r.markerRenderer,y=r.style,m=r.hostService,w=r.isStackedArea,C=r.isStacked100,D=r.currentViewport,O=r.interactivityService,F=r.mobileTileInteractive,N=r.featureSwitches,U=r.isComboChart,X=r.activeData;if(X){for(var re=X.isScalar,pe=_.filter(X.series,function(De){var gt;return null===(gt=De.uncertainty)||void 0===gt?void 0:gt.renderUncertainty}),q=!_.isEmpty(pe),ee=!U,ue=[],ke=0,Ke=X.series;ke<Ke.length;ke++)ue.push((Re=Ke[ke]).lineStyle.markerProperties);q&&(0,Ei.iD)(X.series,ue),v.ensureMarkers(o.svgDefs,ue);var Je=r.yAxisProperties.scale,Ze=null===(a=r.y2AxisProperties)||void 0===a?void 0:a.scale,Lt=O?.hasSelection(),Xt=_.filter(X.series,function(De){return De.lineStyle.areaShow}),Yt=Xt.length>0;(X.categories.length*X.series.length>sa.dt||It.M.isInternetExplorerOrEdge()&&_.some(ue,function(De){return De.show})||Yt)&&(e=0);var Kt=function(gt){return er(r,gt)},da=function(gt){return Or(r,gt)},ua=w?function(De){return Je(De.stackedValue-De.value)}:function(De){return De.isY2?Ze(0):Je(0)},Mt=[];_.forEach(X.series,function(De){Mt[De.index]=d3.line().x(Kt).y(da).defined(function(gt){return bn(gt)}).curve((0,yn.By)(De.lineStyle))}),o.mainGraphicsContext.attr("aria-label","".concat(m.getLocalizedString("Visual_Plot")," ").concat(In(X)?m.getLocalizedString("Visual_Plot_ScreenReader_NavigateToAnomalies"):"").trim()),o.mainGraphicsSVG.attr("height",r.availableHeight).attr("width",r.availableWidth);var ea=o.mainGraphicsContext.selectAll(xn.selector).data(Xt,function(De){return De.identity.getKey()}).join(function(De){return De.append(Wr).classed(xn.class,!0)}).style("fill",function(De){return y.isHighContrast?Ue.v.getThemeColor(y,Le.U):De.lineStyle.areaColor}).style("pointer-events",t&&ee?"auto":null).classed(We.cy,ee).attr(We.Ez,"area").attr(We.QZ,3).each(function(De){We.O5.setDataForElement(this,{getDisplayName:function(){return m.getLocalizedString("MiniToolbar_Area",De.displayName)},getRegionOutlines:function(){for(var Sa,Zt=o.mainGraphicsSVG.node().getBoundingClientRect(),Ki=Zt.left,ma=Zt.top,ai={type:1,x:Zt.x,y:Zt.y,height:Zt.height,width:Zt.width},Pi=D.scale,ar=Je.range(),Ba=_.min(ar),ir=_.max(ar),ha=[],xr=function(r){for(var e=r.length,t=[],a=[],i=0;i<e;i++){var n=r[i];bn(n)?(a.push(n),i===e-1&&t.push(a)):a.length>0&&(t.push(a),a=[])}return t}(De.data),Vr=function(Mi){var Qt=Mi.map(function(gi){return{x:zr.convertSvgXToClientX(Kt(gi),Pi,Ki),y:zr.convertSvgYToClientY(da(gi),Pi,ma)}}),zi=[];Qt.forEach(function(gi,Ti){var Xi=_.clamp(ua(Mi[Ti]),Ba,ir);zi.unshift({x:gi.x,y:zr.convertSvgYToClientY(Xi,Pi,ma)})});var kr=(0,d.__spreadArray)((0,d.__spreadArray)([],Qt,!0),zi,!0);ha.push({type:3,points:kr,clipPath:ai})},br=0,Ur=xr;br<Ur.length;br++)Vr(Ur[br]);return[{id:"".concat("area","-").concat(De.index).concat(null!==(Sa=r.data.multipleDisplayName)&&void 0!==Sa?Sa:""),outline:{type:0,outlines:ha}}]}})}).interrupt();if((e?ea.transition().ease(d3.easeLinear).duration(e):ea).attr("d",function(De){return d3.area().x(Kt).y0(ua).y1(da).defined(function(gt){return bn(gt)}).curve((0,yn.By)(De.lineStyle))(De.data)}),q){var pa=(0,Ei.B9)(o.mainGraphicsContext),Ta=d3.area().x(Kt).y0(function(De){return null!=De.uncertainty.lower?Os(r,De):da(De)}).y1(function(De){return null!=De.uncertainty.upper?Fs(r,De):da(De)}).defined(function(De){var gt,Sa;return null!=(null===(gt=De?.uncertainty)||void 0===gt?void 0:gt.upper)||null!=(null===(Sa=De?.uncertainty)||void 0===Sa?void 0:Sa.lower)}),Ha=d3.line().x(Kt).y(function(De){return Os(r,De)}).defined(function(De){var gt;return null!=(null===(gt=De?.uncertainty)||void 0===gt?void 0:gt.lower)}),xa=d3.line().x(Kt).y(function(De){return Fs(r,De)}).defined(function(De){var gt;return null!=(null===(gt=De?.uncertainty)||void 0===gt?void 0:gt.upper)});(0,Ei.EC)(pa,pe,xa,Ha,Ta,function(De,gt){return(0,Da.eR)(De.selected,!1,Lt,!1,(0,mn.TD)(gt))}),(0,Ei.FZ)(pa,pe,function(De){return De.isY2?Ze:Je},function(De){return"translate(".concat(Kt(De),", ").concat(De.isY2?Ze(De.value):Je(De.value),")")},10),(0,Ei.di)(pa,pe,xa,Ha,Je.range()[1]>Je.range()[0],v),(0,Ei.DI)(pa)}else(0,Ei.OY)(o.mainGraphicsContext);var $a=o.mainGraphicsContext.selectAll(Sn.selector).data(_.filter(X.series,function(De){return De.lineStyle.strokeShow}),function(De){return De.identity.getKey()}).join(function(De){return De.append(Wr).classed(Sn.class,!0)}).styles(function(De){return(0,Za.bc)(De.lineStyle,y)}).interrupt();(e?$a.transition().ease(d3.easeLinear).duration(e):$a).attr("d",function(De){return Mt[De.index](De.data)});var La,li=o.mainGraphicsContext.selectAll(Bn.selector).data(_.filter(X.series,function(De){return De.lineStyle.markerProperties.show}),function(De){return De.identity.getKey()}).join(function(De){return De.append(Wr).classed(Bn.class,!0)}).style("stroke","#ffffff").style("stroke-width",2).style("stroke-opacity",0).attrs({"marker-start":function(gt){return v.getMarkerKey(gt.lineStyle.markerProperties)},"marker-mid":function(gt){return v.getMarkerKey(gt.lineStyle.markerProperties)},"marker-end":function(gt){return v.getMarkerKey(gt.lineStyle.markerProperties)}}).interrupt(),Xa=d3.line().x(Kt).y(da).defined(function(De){return bn(De)&&(!N.lineChartMarkerRendering||!De.marker.perCategoryStyle)});(e?li.transition().ease(d3.easeLinear).duration(e):li).attr("d",function(De){return Xa(De.data)}).style("opacity",function(De){return(0,Da.eR)(De.selected,!1,Lt,!1)}).style("pointer-events","none"),F||(La=o.mainGraphicsContext.selectAll(ls.selector).data(_.filter(X.series,function(De){return cs(De)}),function(De){return De.identity.getKey()}).join(function(De){return De.append(Wr).classed(ls.class,!0).style("stroke-width",10).style("stroke-linejoin",Ai.t.round).attr(We.Ez,"lines").attr(We.Zx,"markers").attr(We.QZ,3).classed(We.cy,!Yt||!ee)}).attr("d",function(De){if(!re){var gt=cs(De);if(gt){var Sa=_.findIndex(De.data,function(Zt){return Zt&&Zt.categoryIndex===gt.categoryIndex});if(Sa>0&&Sa<De.data.length){var ti=De.data.slice(Sa);return Mt[De.index](ti)}}}return Mt[De.index](De.data)}).each(function(De){We.O5.setDataForElement(this,{getDisplayName:function(){return m.getLocalizedString("MiniToolbar_Line",De.displayName)},getRegionOutlines:function(){return is(De,r)}})}));var qa=o.mainGraphicsContext.selectAll(ss.selector).data(X.series,function(De){return De.identity.getKey()}).join(function(De){return De.append("g").classed(ss.class,!0)}),ta=qa.selectAll(Bs.selector).data(function(De){return De.lineStyle.strokeShow?De.data.filter(function(gt,Sa){return function(r,e){var t=r.data[e];if(null==t||null===t.value)return!1;var a=r.data[e-1],n=r.data[e+1];return!(null!=a&&null!==a.value||null!=n&&null!==n.value)}(De,Sa)}):[]},function(De){return De.key}).join(function(De){return De.append(zn).classed(Bs.class,!0).classed(We.cy,!0).attr(We.Ez,"lines").attr(We.Zx,"markers").attr(We.QZ,3)}).style("fill",function(De){return De.marker.color}).style("fill-opacity",function(De){return De.marker.show?0:(0,Da.eR)(De.selected,!1,Lt,!1,(0,mn.TD)(De.marker.transparency))}).each(function(){var gt=d3.select(this.parentNode).datum();We.O5.setDataForElement(this,{getDisplayName:function(){return m.getLocalizedString("MiniToolbar_Line",gt.displayName)},getRegionOutlines:function(){return is(gt,r)}})}),ei=ta.size(),ui=0;(e?ta.transition().duration(e):ta).attrs({cx:function(gt){return er(r,gt)},cy:function(gt){return Or(r,gt)},r:Rn(X.lineStyle)}).on("end",function(){++ui===ei&&Ua()}),e||Ua();var Na=qa.selectAll(zs.selector).data(function(De){return U?[]:_.filter(De.data,function(gt){return gt?.marker.perCategoryStyle&&null!=gt.value})},function(De){return De.key}).join(function(De){return De.append(Wr).classed(zs.class,!0).style("pointer-events","none")}).attrs({transform:function(gt){var Sa=N.lineChartMarkerRendering?gt.marker.size*dr.Wo.sizeRatio:5;return"translate(".concat(er(r,gt),", ").concat(Or(r,gt),") scale(").concat(2*Sa,")")},d:function(gt){return(0,dr.jM)(N.lineChartMarkerRendering?gt.marker.shape:Ma.ZO.circle,.5)}}).style("stroke-width",function(De){return N.lineChartMarkerRendering?2*(0,dr.F)(De.marker.shape)/20:0});(e?Na.transition().duration(e):Na).style("fill",function(De){return De.marker.color}).style("stroke",function(De){return De.marker.color});var hi,Ga=function(r){return function(e){var a=r.renderContext.mainGraphicsContext,i=_.flatten(_.map(r.activeData.series,function(l){return _.filter(l.data,function(u){return u?.selected&&null!==u.value})})),n=_.map(i,function(l){return l.seriesIndex}),s=a.selectAll(us.selector).selectAll(Wr).data(i,function(l){return l.key}).join(function(l){return l.append(Wr).attr("pointer-events","none")}).attr("d",function(l){return l.marker.show?(0,dr.jM)(l.marker.shape,l.marker.size*dr.Wo.sizeRatio):(0,dr.jM)(Ma.ZO.circle,l.marker.focusOnlySize)}).attr("transform",function(l){return"translate(".concat(er(r,l),",").concat(Or(r,l),")")}).style("stroke-width",function(l){return(0,dr.F)(l.marker.shape)}).style("stroke-opacity",1).style("stroke",function(l){return l.marker.focusOnlyColor}).style("fill",function(l){return l.marker.focusOnlyColor}),o=[];return a.selectAll(Sn.selector).each(function(l,u){o[u]=l.selected,l.selected=n.indexOf(l.index)>-1}).style("stroke-opacity",function(l,u){return(0,Da.eR)(l.selected,!1,e&&!o[u],!1,(0,mn.TD)(l.lineStyle.strokeTransparency))}),a.selectAll(xn.selector).style("fill-opacity",function(l){return(0,Da.eR)(l.selected,!1,e,!1,(0,mn.TD)(l.lineStyle.areaTransparency))}),a.selectAll(Bn.selector).style("opacity",(0,Da.eR)(!1,!1,e,!1)),(0,Ei.fM)(a.select(Ei.jx.selector),function(l,u){return(0,Da.eR)(l.selected||n.indexOf(l.index)>-1,!1,e&&!o[l.index],!1,null!=u?(0,mn.TD)(u):void 0)}),s}}(r);Ga(Lt),O&&(hi=Wn(r,r.focusedDatum));var ja=[],Bi=[];if(!(null===(i=X.dataLabelsSettings)||void 0===i)&&i.show&&(ja=ja.concat(function(r){var e,t=(0,nt.fI)(),a=r.activeData.series.map(function(i){var n,s,o=i.labelSettings||r.data.dataLabelsSettings;if(!o.show)return{labelDataPoints:[],maxNumberOfLabels:0};var l=100===o.labelDensity,u=(0,nt.SS)(r.currentViewport.width,o.labelDensity,4,Rs.v.estimatedLabelWidth),c=!l&&r.data.isScalar?u:i.data.length,v=i.isY2?r.y2AxisProperties:r.yAxisProperties,y=i.data.map(function(m,w){if(null!=m&&null!=m.value){var C=function(r,e,t,a,i,n,s,o){var l,u,c,v,F,U,y=r.isStackedArea,m=r.style,w=r.featureSwitches,C=i.fontProperties,D=e.isY2?null===(l=r.y2AxisProperties)||void 0===l?void 0:l.scale:r.yAxisProperties.scale,O=null!==(u=t.labelFill)&&void 0!==u?u:C.color,N=!1;i?.displayUnits===g.In&&(i.precision=void 0);var X=(0,nt.d6)(n,i);if(null!==(c=t.dynamicLabelValue)&&void 0!==c&&c.enabled)U=(0,Bt.nU)(t.dynamicLabelValue,s,i,X,e,"Value"),!w.labelEnhancementsM0&&w.measureDrivenDataLabels&&""===U&&(U=void 0);else{var pe=o&&!w.labelEnhancementsM0?g.L0:(t.labelSettings.displayUnits===g.In?t.labelSettings.valueCustomFormatString:void 0)??t.labelFormatString,q=s.getOrCreate(pe,i,X.units,X.getPrecision(!!pe,e.type)),ee=t.value;o&&(ee=t.originalValue),U=(0,nt.Bw)(q.format(ee))}var ue=(0,J.qk)(C,U);if(y){var ke=Math.max(t.stackedValue-t.value,D.domain()[0]),Ke=r.currentViewport.width,Re=void 0;switch(i?.position){case ka.h.insideCenter:Re=[1];break;case ka.h.insideEnd:Re=[4];break;default:Re=[1,4]}F={rect:{left:er(r,t)-Ke/2,top:D(Math.max(t.stackedValue,t.stackedValue-t.value)),width:Ke,height:Math.abs(D(t.stackedValue)-D(ke))},orientation:t.value>=0?1:2,validPositions:Re},N=!0}else{var Je=e.lineStyle.markerProperties;switch(Re=void 0,i?.position){case ka.h.above:Re=[1];break;case ka.h.under:Re=[2];break;default:Re=100===i.labelDensity?[1]:function(r,e){var t=r.data,s=t[e].value,o=t[e-1]&&t[e-1].value,l=t[e+1]&&t[e+1].value,u=1,c=1;if(null==o?u=0:o>s?u=3:o<s&&(u=2),null===l?c=0:l>s?c=3:l<s&&(c=2),0===e)return 3===c?[2,1]:[1,2];if(e===t.length-1)return 3===u?[2,1]:[1,2];switch(u){case 0:switch(c){case 0:return[1,2,8,4];case 1:case 2:return[1,2,4,8];case 3:return[2,1,4,8]}case 1:switch(c){case 0:case 1:case 2:return[1,2,8,4];case 3:return[2,1,8,4]}case 3:switch(c){case 0:case 3:return[2,1,8,4];case 1:return[2,1,4,8];case 2:return[1,2,8,4]}case 2:switch(c){case 0:case 3:case 2:return[1,2,8,4];case 1:return[1,2,4,8]}}}(e,a)}F={point:{x:er(r,t),y:D(t.value)},radius:Je.show?Je.size:0,validPositions:Re}}return{isPreferred:!1,text:U,textSize:{width:te.b.measureSvgTextWidth(ue)+g.TS,height:te.b.estimateSvgTextHeight(ue,!0)},outsideFill:O??Ue.v.getThemeColor(m,g.uQ),insideFill:O&&y?O:Ue.v.getThemeColor(m,g.pl),parentType:N?1:0,parentShape:F,fontProperties:C,identity:t.identity,key:t.key,hasBackground:i.enableBackground,backgroundColor:i.backgroundColor,backgroundTransparency:i.backgroundTransparency,transparency:i.transparency,leaderLine:(0,d.__assign)((0,d.__assign)({},i.leaderLine),{strokeColor:null!==(v=t?.leaderLineColor)&&void 0!==v?v:i.leaderLine.strokeColor})}}(r,i,m,w,o,v,t,r.isStacked100);return m.labelDataPointContainerEnabled?(0,qo.U)({seriesName:i.displayName,labelDataPoint:C,enableValueDataLabel:o.enableValueDataLabel,valueShowBlankAs:o.showBlankAs,cartesianDataPoint:m,isStacked100:r.isStacked100,percentOfTotal:m.value,formattersCache:t,currentSeries:i,currentAxisProperties:v,valueDataLabelSettings:o,getOutsideLabelFill:function(O){var F;return null!==(F=O.labelFill)&&void 0!==F?F:Ue.v.getThemeColor(r.style,g.uQ)},getInsideLabelFill:function(O){var F;return O.labelFill&&r.isStackedArea?null!==(F=O.labelFill)&&void 0!==F?F:O.labelSettings.fontProperties.color:Ue.v.getThemeColor(r.style,g.pl)}}):C}}).filter(function(m){return m});return{labelDataPoints:y,maxNumberOfLabels:c,enableLeaderLines:o?.leaderLine.strokeShow,offset:{min:null!==(n=o?.minimumOffset)&&void 0!==n?n:g.ki,max:null!==(s=o?.maximumOffset)&&void 0!==s?s:g.wh}}});return new Rs.v(a,r.activeData.series,r.currentViewport,r.yAxisProperties.scale,null===(e=r.y2AxisProperties)||void 0===e?void 0:e.scale).getSortedDataLabels()}(r))),null!==(n=X.seriesLabelSettings)&&void 0!==n&&n.show){var hr=X.seriesLabelSettings.position===Ie.M.right;Bi=Bi.concat(function(r,e,t){var a=r.isStackedArea,i=r.data.isScalar,n=te.b.estimateSvgTextHeight(g.bN),s=r.xAxisProperties.scale.domain()[0],o=r.xAxisProperties.scale.domain()[1];return r.activeData.series.map(function(l){var u,c=l.seriesLabelSettings||r.data.seriesLabelSettings;if(!c?.show)return{labelDataPoints:[],maxNumberOfLabels:0};var v=l.isY2?null===(u=r.y2AxisProperties)||void 0===u?void 0:u.scale:r.yAxisProperties.scale,y=v.domain()[0],m=v.domain()[1],w=c?c.fontProperties.size.px:0,C=!!c&&!!c.wordWrap,O=r.currentViewport.height-(w+n+(r.currentViewport.height-n-w)/2),F=[],N=function(Ke){var Re;if(null!=Ke){var Je=a?Ke.stackedValue:Ke.value;if(null!=Je&&Je>=y&&Je<=m){var Lt=(0,J.qk)(c.fontProperties,l.displayName);T.fF.assertValue(Ke.value,"seriesLabels - createLabelDataPoint called on a dataPoint with no value"),F.push({identity:Ke.identity,key:Ke.key,isPreferred:!1,text:l.displayName,textSize:{width:te.b.measureSvgTextWidth(Lt),height:te.b.estimateSvgTextHeight(Lt,!0)},outsideFill:null!==(Re=c.seriesColor)&&void 0!==Re?Re:Ue.v.getThemeColor(r.style,g.uQ),insideFill:c.seriesColor&&a?c.seriesColor:Ue.v.getThemeColor(r.style,g.pl),parentType:0,parentShape:{point:{x:e,y:Or(r,Ke)},radius:l.lineStyle.markerProperties.show?l.lineStyle.markerProperties.size:0,validPositions:[512]},fontProperties:c.fontProperties,wordBreak:C&&(0,nt.W1)(l.displayName,Lt,r.availableSeriesLabelWidth,O,void 0,!0,!0).length>1,hasBackground:c.enableBackground,backgroundColor:c.backgroundColor,backgroundTransparency:c.backgroundTransparency})}}},U=l.data;if(!_.isEmpty(U)&&l.displayName){var X=t?_.last(_.compact(U)):_.first(_.compact(U));if(i){for(var re=0;re<U.length;re++){var pe=U[re];if(null!=pe&&null!=pe.value&&pe){var q=Ts(r,pe);if(t?q>o:q>s){var ue=-1;t&&0<=re-1?ue=re-1:t||(ue=re),ue>=0&&N(U[ue]);break}}}re===U.length&&N(X)}else N(X)}return{labelDataPoints:F,maxNumberOfLabels:1}})}(r,hr?r.availableWidth:0,hr))}if(null!==(s=X.totalLabelsSettings)&&void 0!==s&&s.show&&w&&!C&&(ja=ja.concat(function(r){var e=r.style,t=(0,p.GN)(r.data.valuesMetadata),a=(0,I.EO)(t,K.p.general.formatString),i=r.activeData,n=(0,nt.fI)(),s=i.totalLabelsSettings,o=(0,nt.d6)(r.yAxisProperties,s),l=s.fontProperties,u=i.totals.filter(function(c){return 0!==c?.net}).map(function(c){var v,y,m,w,C=c.net,D=n.getOrCreate(c.dynamicFormatString||a,s,o.units,s.precision),O=(0,nt.Bw)(D.format(C)),F=(0,J.qk)(l,O),N=C>0?c.positive:c.negative,U={value:N,originalValue:void 0,stackedValue:N,categoryIndex:c.categoryIndex,categoryValue:c.categoryValue,labelSettings:void 0,key:void 0,identity:void 0,marker:void 0,seriesIndex:void 0,selected:!1},X=r.currentViewport.width;return{isPreferred:!1,text:O,textSize:{width:te.b.measureSvgTextWidth(F),height:te.b.estimateSvgTextHeight(F,!0)},outsideFill:null!==(y=null!==(v=c.labelFill)&&void 0!==v?v:l.color)&&void 0!==y?y:Ue.v.getThemeColor(e,g.uQ),insideFill:null!==(w=null!==(m=c.labelFill)&&void 0!==m?m:l.color)&&void 0!==w?w:Ue.v.getThemeColor(e,g.pl),parentType:1,parentShape:{rect:{left:er(r,U)-X/2,top:r.yAxisProperties.scale(N),width:X,height:0},orientation:C>=0?1:2,validPositions:[16]},identity:void 0,fontProperties:l,hasBackground:s.enableBackground,backgroundColor:s.backgroundColor,backgroundTransparency:s.backgroundTransparency,isTotal:!0}});return[{labelDataPoints:u,maxNumberOfLabels:i.totals.length}]}(r))),_.map(_.filter(pe,function(De){return De.uncertainty.labels.show}),function(De){return De.uncertainty.labels})&&(ja=ja.concat(function(r){var e=r.style,t=r.hostService,a=_.filter(r.activeData.series,function(n){var s,o;return(null===(s=n.uncertainty)||void 0===s?void 0:s.renderUncertainty)&&(null===(o=n.uncertainty)||void 0===o?void 0:o.labels.show)});if(0===a.length)return[];var i=(0,nt.fI)();return a.map(function(n){var o=n.uncertainty.labels,u=o.fontProperties,c=n.isY2?r.y2AxisProperties:r.yAxisProperties,v=(0,nt.d6)(c,o),y=c.scale,m=[];return n.data.forEach(function(w){if(null!=w&&null!=w.value&&null!=w.uncertainty){for(var C=[],D=(0,Pr.Ww)(w.value,w.uncertainty,o.errorFormat),O=[D.lower,D.upper],F=0;F<2;F++){var N=O[F],U=1===F,X=U?w.uncertainty.upper:w.uncertainty.lower;if(null!=X){var re=void 0;if(o.errorFormat===tn.K.relativePercentage)re=(0,Pr.O2)(N,t);else{var pe=w.labelFormatString,q=i.getOrCreate(pe,o,v.units,v.getPrecision(!!pe,n.type));re=(0,nt.Bw)(q.format(N))}T.fF.assertValue(re,"label has no value -- lineChart.createUncertaintyLabels");var ee=(0,J.qk)(u,re);C.push({isPreferred:!1,text:re,textSize:{width:te.b.measureSvgTextWidth(ee)+g.TS,height:te.b.estimateSvgTextHeight(ee,!0)},outsideFill:u.color?u.color:Ue.v.getThemeColor(e,g.uQ),insideFill:u.color?u.color:Ue.v.getThemeColor(e,g.pl),parentType:0,parentShape:{point:{x:er(r,w),y:y(X)},radius:0,validPositions:[U?1:2]},identity:void 0,fontProperties:u,hasBackground:o.enableBackground,backgroundColor:o.backgroundColor,backgroundTransparency:o.backgroundTransparency})}}_.isEmpty(C)||m.push.apply(m,C)}}),{labelDataPoints:m,maxNumberOfLabels:100}})}(r))),!F){var _i={availableHeight:r.availableHeight,availableWidth:r.availableWidth,isComboChart:U,activeData:r.activeData,interactivityLines:La,dots:ta,focusElement:hi,explicitDots:Na};u.removeTooltips(_i,c),r.tooltipsEnabled&&!t&&u.applyTooltips(_i,l,c)}(0,en.LL)(o.mainGraphicsContext,[xn,Ei.jx,Sn,Bn,ls,ss,us,Nn]);var qt,Si,xi,Ya=[];if(r.interactivityService&&!F){qt=[];for(var bi=0,Li=r.data.series;bi<Li.length;bi++){var Re;Ya.push(Re=Li[bi]);var vr=_.filter(Re.data,function(gt){return gt});qt.push.apply(qt,vr||[])}if(xi=[],In(X)){var ni=_.filter(X.anomalyDetections[0].anomalies,function(De){return De.isAnomaly});xi.push.apply(xi,ni||[])}Si={interactivityLines:La,root:o.mainGraphicsContext,focusMarker:hi,selectedMarkersCallback:Ga,dots:ta,areas:ea,hoverLineTooltipOverlay:u.hoverLineTooltipOverlay,isHoverLineTooltipActive:u.isHoverLineTooltipActive,getCategoryIndex:function(gt,Sa,ti){return l.getCategoryIndexFromSeriesAndPointX(gt,Sa,ti=ti&&!u.isHoverLineTooltipActive)},categoryIdentities:X.categoryIdentities,hitTester:new el({dataPoints:qt,isComboChart:U,isScalar:re,hasCategories:X.categoryIdentities.length>0}),onSelecting:m.onSelecting,anomalies:o.mainGraphicsSVG.selectAll(kn.ec.selector),anomalyNavigationHelper:r.anomalyNavigationHelper,onLineSubSelection:function(gt,Sa,ti,Zt,Ki){!function(r,e,t,a,i,n){var s,u,c,v,o=(0,za.bt)(),l=r.plotAreaHelper.getCategoryIndexFromSeriesAndPointX(e,t,!0);try{u=function(r,e,t){var a=r.renderContext.mainGraphicsSVG.node().getBoundingClientRect().left,i=_.find(e.data,function(n){return n&&n.categoryIndex===t});return Math.floor(Ms(r,i,a))}(r,e,l)}catch{return void T.fF.assertFail("Could not find data for categoryIndex in seriesData - getMarkerXPosition")}e.lineStyle.markerProperties.show&&Math.abs(u-o.x)<=e.lineStyle.markerProperties.size/2?(c="markers",v="MiniToolbar_Markers"):(c="lines",v="MiniToolbar_Line");var y=a.createVisualSubSelectionForSingleObject({objectName:c,subSelectionType:3,displayName:r.hostService.getLocalizedString(v,e.displayName),showUI:n,selectorsByColumn:null===(s=e.identity)||void 0===s?void 0:s.getSelectorsByColumn(),selectionOrigin:{x:i.clientX,y:i.clientY}});a.subSelect(y)}(r,gt,Sa,ti,Zt,Ki)},onDotSubSelection:function(gt,Sa,ti,Zt){!function(r,e,t,a,i){var n,s,o;e.lineStyle.markerProperties.show?(s="markers",o="MiniToolbar_Markers"):(s="lines",o="MiniToolbar_Line");var l=t.createVisualSubSelectionForSingleObject({objectName:s,subSelectionType:3,displayName:r.hostService.getLocalizedString(o,e.displayName),showUI:i,selectorsByColumn:null===(n=e.identity)||void 0===n?void 0:n.getSelectorsByColumn(),selectionOrigin:{x:a.clientX,y:a.clientY}});t.subSelect(l)}(r,gt,Sa,ti,Zt)},onAreaPointerMove:function(gt){!function(r,e){var t=new MouseEvent("pointerover",e),a=Gs.findSubSelectedAreaElement(r,{x:e.clientX,y:e.clientY});a?.dispatchEvent(t)}(r,gt)}}}return{dataPoints:qt?(0,d.__spreadArray)((0,d.__spreadArray)([],Ya,!0),qt,!0):void 0,behaviorOptions:F?void 0:Si,labelDataPoints:F?[]:null,labelsAreNumeric:!F||null,labelDataPointGroups:ja,labelDataPointSeriesGroups:Bi,animateLabels:!1,anomalies:xi,navigationOptions:r.navigationOptions}}function Ua(){F&&function(r){if(0===r.length)return!1;for(var e=0,t=r.length;e<t;e++)if(r[e].data.length>0)return!0;return!1}(X.series)&&c.selectColumn((0,p.Pg)(X.series),!0)}}(o,s,i);return(0,f.h8)(this.data.forecastLines,this.mainGraphicsSVG,this.xAxisProperties.scale,this.yAxisProperties.scale,s),(0,Fa.bL)(this.dataInitOptions),l},Object.defineProperty(e.prototype,"navigationOptions",{get:function(){if(this.interactivityService)return{helper:this,navigationStrategy:this.data.isScalar?j.jN.SeriesFirst:j.jN.CategoryFirst}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewModel",{get:function(){var a;return{currentViewport:this.currentViewport,activeData:this.activeData,data:this.data,horizontalOffset:this.horizontalOffset,isComboChart:this.isComboChart,lineType:this.lineChartType,margin:this.margin,tooltipsEnabled:this.tooltipsEnabled,xAxisProperties:this.xAxisProperties,yAxisProperties:this.yAxisProperties,y2AxisProperties:this.y2AxisProperties,focusedDatum:this.focusedDatum,style:this.style,renderContext:{mainGraphicsSVG:this.mainGraphicsSVG,mainGraphicsContext:this.mainGraphicsContext,svgDefs:this.svgDefs,mainGraphicsPositionOverlay:(null===(a=this.lineChartTooltipHelper)||void 0===a?void 0:a.hoverLineTooltipOverlay)||this.mainGraphicsPositionRect},isStackedArea:this.isStacked,isStacked100:this.isStacked100,availableWidth:this.availableWidth-this.availableSeriesLabelWidth,availableHeight:this.availableHeight,availableSeriesLabelWidth:this.availableSeriesLabelWidth,hostService:this.hostService,markerRenderer:this.markerRenderer,interactivityService:this.interactivityService,navigationOptions:this.navigationOptions,lineChartTooltipHelper:this.lineChartTooltipHelper,tooltipInteractivity:this,plotAreaHelper:this,anomalyNavigationHelper:this.anomalyNavigationHelper,featureSwitches:this.featureSwitches,mobileTileInteractive:this.mobileTileInteractive}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"availableSeriesLabelWidth",{get:function(){return(0,ce.lr)(this.activeData.seriesLabelSettings,this.availableWidth)},enumerable:!1,configurable:!0}),e.prototype.getFirstElement=function(t,a){var i;if(void 0===a&&(a=!1),null!=t){var s,n=a?_.findLast:_.find;return n(this.data.series,function(u){return s=n(u.data,function(c){return c&&c.categoryIndex===t&&null!=c.value})}),s&&-1===(null===(i=this.clippedData)||void 0===i?void 0:i.categories.indexOf(s.categoryValue))?{element:null,targetCategoryIndex:s.categoryIndex,targetSeriesIndex:s.seriesIndex}:s?(this.focusedDatum=s,{element:Wn(this.viewModel,s).node(),targetCategoryIndex:t,targetSeriesIndex:s.seriesIndex}):{element:null,targetCategoryIndex:t,targetSeriesIndex:a?this.data.series.length-1:0}}return{element:this.mainGraphicsContext.select(Nn.selector).node()}},e.prototype.getNextDataPoint=function(t,a,i){var n,s=this.focusedDatum;switch(i){case j.x0.NextCategory:case j.x0.PreviousCategory:var o=this.data.series[a];if(o){var l=o.data,u=_.findIndex(l,function(C){return C&&C.categoryIndex===t});s=this.pickNextAvailableIndex(l,u,a,i)}else s=void 0;break;case j.x0.NextSeries:case j.x0.PreviousSeries:var c=_.map(this.data.series,function(C){return _.find(C.data,function(D){return D&&D.categoryIndex===t})});s=this.pickNextAvailableIndex(c,a,t,i);break;default:T.fF.assertNever(i)}if(!s){var v=i===j.x0.NextSeries||i===j.x0.NextCategory?1:-1;t=e.incrementIndex(t,v,this.data.categories.length);var m=a;return(i===j.x0.NextSeries||i===j.x0.PreviousSeries)&&(m=v<0?this.data.series.length-1:0),{element:null,targetCategoryIndex:t,targetSeriesIndex:m}}return-1===(null===(n=this.clippedData)||void 0===n?void 0:n.categories.indexOf(s.categoryValue))?{element:null,targetCategoryIndex:s.categoryIndex,targetSeriesIndex:s.seriesIndex}:(this.focusedDatum=s,{element:Wn(this.viewModel,s).node(),targetCategoryIndex:s.categoryIndex,targetSeriesIndex:s.seriesIndex})},e.prototype.pickNextAvailableIndex=function(t,a,i,n){var s=n===j.x0.NextCategory||n===j.x0.PreviousCategory?this.rollToNextSeries:this.rollToNextCategory,o=n===j.x0.NextSeries||n===j.x0.NextCategory?1:-1,l=a;do{if((l+=o)>=t.length||l<0)return s.call(this,i,n);if(l===a)break}while(!t[l]||null==t[l].value);if(null!=t[l].value)return t[l]},e.prototype.rollToNextSeries=function(t,a){T.fF.assert(function(){return a===j.x0.PreviousCategory||a===j.x0.NextCategory},"expected a direction having to do with category");var n=a===j.x0.PreviousCategory?_.findLast:_.find;return t=e.incrementIndex(t,a===j.x0.PreviousCategory?-1:1,this.data.series.length),n(this.data.series[t].data,function(l){return l&&null!=l.value})},e.prototype.rollToNextCategory=function(t,a){T.fF.assert(function(){return a===j.x0.PreviousSeries||a===j.x0.NextSeries},"expected a direction having to do with series");var n=a===j.x0.PreviousSeries?_.findLast:_.find;t=e.incrementIndex(t,a===j.x0.PreviousSeries?-1:1,this.data.categories.length);var o=_.map(this.data.series,function(u){return _.find(u.data,function(c){return c&&c.categoryIndex===t})}),l=n(o,function(u){return u&&null!=u.value});return l||(l=n(o,function(u){return!!u})),l},e.incrementIndex=function(t,a,i){return(t+=a)>=i?t=0:t<0&&(t=i-1),t},e.prototype.getTooltipInfoForPoint=function(t,a){var i,n=t.data,s=this.getCategoryIndexFromSeriesAndPointX(n,a,!0,t.context);if(null!==(i=n?.data)&&void 0!==i&&i.length){var o=_.find(n.data,function(l){return l?.categoryIndex===s});if(o)return _.concat(o.tooltipInfo,o.additionalTooltipItems||[])}},e.isDataPointData=function(t){return t&&null!=t.categoryIndex},e.prototype.getCategoryIndexFromTooltipEvent=function(t,a){var i=t.data;if(!Ps(i))return e.isDataPointData(i)?i.categoryIndex:this.getCategoryIndexFromSeriesAndPointX(i,a,!1);T.fF.assertFail("should not receive pointer events for forecast lines")},e.prototype.getCategoryIndexFromSeriesAndPointX=function(t,a,i,n){var s=0,o=this.data.categoryData,l=this.xAxisProperties.scale;if(t&&!_.isEmpty(t.data)&&this.xAxisProperties){a=this.adjustPathXCoordinate(a,n);var c=cs(t,this.data.isScalar&&l.range()[1]<l.range()[0]);T.fF.assertValue(c,"If there is data on the tooltipEvent but no categoryIndex, there should always be two consecutive non-null values"),c&&(s=er(this.viewModel,c)),i&&(o=_.map(t.data,function(v){return Tt(v,void 0)}))}return e.findCategoryIndex({pointX:a,offsetX:s,categoryData:o,currentViewport:this.currentViewport,scale:l,categoryThickness:this.xAxisProperties.categoryThickness,isScalar:this.data.isScalar})},e.prototype.getYValueFromTooltipEvent=function(t,a){var i,n,u,c,s=null===(i=this.yAxisProperties)||void 0===i?void 0:i.scale,o=null===(n=this.y2AxisProperties)||void 0===n?void 0:n.scale,l=this.currentViewport.scale;if((0,E.GG)(l,1,1e-5)||(t/=l),!a.classList.contains(_s.class)&&!a.classList.contains(e.lineChartSVGClassName)&&(t+=a.getBBox().y),s){var v=s.domain();u={point:s.invert(t),threshold:.1*(v[1]-v[0])}}return o&&(v=o.domain(),c={point:o.invert(t),threshold:.1*(v[1]-v[0])}),{y:u,y2:c}},e.prototype.getVisualCategoryAxisIsScalar=function(){return!!this.data&&this.data.isScalar},e.prototype.getSupportedCategoryAxisType=function(){var t,a,i=!1,n=null===(a=null===(t=this.dataView)||void 0===t?void 0:t.categorical)||void 0===a?void 0:a.categories;return _.isEmpty(n)||(i=n.some(function(s){var o,l=null===(o=s.source)||void 0===o?void 0:o.type;if(l){var u=(0,oe.A8)(s);return!(0,Y.c$)(l)||u&&!_.isEmpty(u.values)}})),i?Ct.w.both:Ct.w.categorical},e.sliceSeries=function(t,a,i){var n;return null!==(n=t?.map(function(s){var o=(0,xe.ED)(s);return o.data=s.data.slice(a,i),o}))&&void 0!==n?n:[]},Object.defineProperty(e.prototype,"horizontalOffset",{get:function(){if(!this.data.isScalar){var a=this.xAxisProperties.scale;if((0,en._9)(a))return a.bandwidth()/2}return 0},enumerable:!1,configurable:!0}),e.prototype.getHoverLineDataForCategory=function(t){var a=this.createTooltipData(t);if(a)return dl.call(this,t,a.dataPoints),a},e.prototype.getHoverLineIdentities=function(t,a){var i,n,s,o,l,u,c,v,y=null===(l=null===(o=this.data)||void 0===o?void 0:o.categoryIdentities)||void 0===l?void 0:l[t],m=null===(c=null===(u=this.data)||void 0===u?void 0:u.multiplesCategoryIdentities)||void 0===c?void 0:c[t],w=[],C=null===(v=_.find(a??[],function(D){return D?.categoryIndex===t}))||void 0===v?void 0:v.identity;return C&&(m.exclude=((i={})[1]=!0,i[0]=!1,i),y.exclude=((n={})[1]=!0,n[0]=!1,n),C.exclude=((s={})[1]=!1,s[0]=!0,s),w.push(C)),(m||y)&&w.push(m??y),w},e.prototype.clearHoverLine=function(){hl.call(this)},e.prototype.selectColumn=function(t,a){if(void 0===a&&(a=!1),a||this.lastInteractiveSelectedColumnIndex!==t){this.lastInteractiveSelectedColumnIndex=t;var i=this.getChartX(t);this.setHoverLine(i,t);var n=this.createLegendDataPoints(t);n&&this.cartesianVisualHost.updateLegend(n)}},e.prototype.setHoverLine=function(t,a){fl.call(this,t,a)},e.prototype.getChartX=function(t){var a=0;this.data.isScalar?t>=0&&t<this.data.categoryData.length&&(a=Math.max(0,this.xAxisProperties.scale(this.data.categoryData[t].categoryValue))):a=Math.max(0,this.xAxisProperties.scale(t));var i=Math.max.apply(Math,this.xAxisProperties.scale.range());return a=Math.min(a,i),this.horizontalOffset+(isNaN(a)?0:a)},e.findCategoryIndex=function(t){var a=t.offsetX,i=t.categoryData,n=t.scale,s=t.pointX,o=t.currentViewport.scale;(0,E.GG)(o,1,1e-5)||(s/=o),a&&(s+=a);var l=P.invertScale(n,s,0,0,void 0).value;if(t.isScalar){var u=e.findClosestXAxisIndex(l,i,n);return u>=0?i[u].categoryIndex:-1}if(i[l]&&!i[l].hasData){for(var c=-1,v=l;v>0&&-1===c&&i[--v].hasData;)c=v;for(var y=-1,m=l,w=i.length-1;m<w&&-1===y&&i[++m].hasData;)y=m;var C=Math.abs(c-l),D=Math.abs(y-l);C<D?l=c:C>D?l=y:C===D&&(l=s>n(l)+t.categoryThickness/2?y:c)}return l},e.findClosestXAxisIndex=function(t,a,i){var n=i.domain(),s=[n[0],n[1]],o=-1;if(T.fF.assert(function(){return s[1]>=s[0]},"expected max extent to not be less than min"),s[0]>s[1])return o;var l=Number.MAX_VALUE;for(var u in a){var c=a[u].categoryValue;if(!(c<s[0]||c>s[1])){var v=Math.abs(t-c);v<l&&(l=v,o=parseInt(u,10))}}return o},e.prototype.findSubSelectedAreaElement=function(t){return Gs.findSubSelectedAreaElement(this.viewModel,t)},e.prototype.createTooltipData=function(t){var a=this.data;if(a&&0!==a.series.length&&a.categories&&a.categoryData){var i=[];T.fF.assert(function(){return t<a.categoryData.length},"category index out of range (categoryData)"),T.fF.assert(function(){return t<a.categories.length},"category index out of range (categories)");for(var l,n=a.categoryData[t],s=!1,o=a.multipleDisplayName,u=0,c=a.series;u<c.length;u++){var v=c[u],y=this.data.isScalar?n?v.data.filter(function(N){return N.categoryValue===n.categoryValue})[0]:void 0:v.data[t],m=y?.originalValue;if(null!=m){var w=(0,I.WU)(m,y.labelFormatString||(0,I.EO)(v.yCol,mr));i.push({category:(0,Ge.BJ)(n.hierarchyCategoryLevels),multipleDisplayName:o,measureDisplayName:v.displayName,measureActualDisplayName:v.measureDisplayName,formattedValue:this.isStacked100?"".concat(w," (").concat((0,I.WU)(y.value,this.hostService.getLocalizedString("Percentage")),")"):w,value:m,stackedValue:y.stackedValue,uncertainty:y.uncertainty,showHoverlineDots:!v.lineStyle.markerProperties.show,marker:(0,d.__assign)((0,d.__assign)({},(0,En.lw)(v.lineStyle.markerProperties,a.legendMarkerRendering,Ma.ZO.longDash)),{color:(0,En.XU)(v.lineStyle.markerProperties,v.lineStyle.strokeColor,a.legendMarkerRendering,a.matchLineColor)}),line:v.lineStyle,isY2:y.isY2,seriesDisplayName:a.hasDynamicSeries?a.seriesDisplayName:void 0,seriesName:a.hasDynamicSeries?v.displayName:void 0,additionalTooltipItems:a.hasDynamicSeries?y.additionalTooltipItems:void 0}),s||(s=!!y.uncertainty),!a.hasDynamicSeries&&!l&&(l=y.additionalTooltipItems)}}if(!_.isEmpty(a.forecastLines)&&n){v=_.head(a.series),T.fF.assertValue(v,"expected a line chart series when forecast is present");for(var C=0,D=a.forecastLines;C<D.length;C++){var O=D[C],F=_(O.points).filter(function(X){return X.point.x===n.categoryValue}).first();m=F?.point.y,null!=m&&i.push({category:(0,Ge.BJ)(n.hierarchyCategoryLevels),multipleDisplayName:o,measureDisplayName:O.displayName,measureActualDisplayName:this.originalData.valuesMetadata[0].displayName,formattedValue:(0,I.WU)(m,(0,I.EO)(v.yCol,mr)),value:m,additionalTooltipItems:[{displayName:this.localizer("Visual_Confidence_Band_Upper"),value:(0,I.WU)(F.upperBound.y,(0,I.EO)(v.yCol,mr))},{displayName:this.localizer("Visual_Confidence_Band_Lower"),value:(0,I.WU)(F.lowerBound.y,(0,I.EO)(v.yCol,mr))}],showHoverlineDots:!0,marker:{show:!0,color:O.stroke.strokeColor,shape:Ma.ZO.circle},line:void 0})}}return{dataPoints:i,additionalTooltipItems:l,legendMarkerRendering:a.legendMarkerRendering,hasUncertainty:s}}},e.prototype.createLegendDataPoints=function(t){var i,n,s,o,a=this,l=this.data;if(l&&l.series&&!(l.series.length<1)){var u,c=l.categoryData[t];this.mobileTileInteractive&&c&&(this.data.isScalar?(u=c.categoryValue,(0,Y.v9)(this.xAxisProperties.valueType)&&(u=Co.y3.fromTimeValue(u))):u=(0,p.dZ)(this.data,t,this.xAxisProperties.valueType,this.data.isScalar));var v=l.series.map(function(y,m){var C,w=y.data;if(a.mobileTileInteractive){var D=void 0;if(a.data.isScalar){if(c)for(var O=c.categoryValue,F=0,N=w;F<N.length;F++){var U=N[F];if(U.categoryValue===O){D=U;break}}}else D=w[t];C=D?.value}return{marker:{show:!0,shape:Ma.ZO.circle,color:y.lineStyle.strokeColor},label:(0,ye.TO)(y.yCol,a.dataView.categorical.values,mr),category:(0,I.WU)(u,(0,I.EO)(y.xCol,mr)),measure:(0,I.WU)(C,(0,I.EO)(y.yCol,mr)),identity:y.identity,selected:y.selected,index:m}});return(0,d.__assign)((0,d.__assign)({},(0,x.Fe)(this.style)),{title:(null===(o=null===(s=null===(n=null===(i=this.dataView)||void 0===i?void 0:i.categorical)||void 0===n?void 0:n.values)||void 0===s?void 0:s.source)||void 0===o?void 0:o.displayName)||"",dataPoints:v,grouped:l.hasDynamicSeries})}},e.prototype.adjustPathXCoordinate=function(t,a){It.M.isFirefox()&&null!=a&&(this.pathXAdjustment=this.getPathXAdjustmentForFirefox(a)),It.M.isInternetExplorerOrEdge()&&(this.pathXAdjustment=5);var i=this.currentViewport.scale;return t-this.pathXAdjustment*((0,E.GG)(i,1,1e-5)?1:i)},e.prototype.getPathXAdjustmentForFirefox=function(t){var a=t.getBoundingClientRect(),i=(0,Fa.jL)(t);if(i.height>0&&i.width>0)return(a.width/this.currentViewport.scale-i.width)/2},Object.defineProperty(e.prototype,"hasSingleStaticSeries",{get:function(){return this.data&&!this.data.hasDynamicSeries&&this.hasSingleSeriesPerValueAxis()},enumerable:!1,configurable:!0}),e.prototype.getCartesianVisualCapabilities=function(){var t=this.data,a=!this.isStacked||this.hasSingleStaticSeries;return{supportsHierarchicalCategoryAxis:!0,axesCapabilities:{categoryAxis:{domainAggregateRole:mi.R.Category,supportedDomainAggregates:t&&t.isScalar?t.scalarKeyCount?1:3:0},valueAxis:{domainAggregateRole:mi.R.Y,supportedDomainAggregates:a?3:1},secondaryValueAxis:this.haveY2Data()||this.isComboChart?{domainAggregateRole:mi.R.Y2,supportedDomainAggregates:a?3:1}:void 0}}},e.prototype.hasSingleSeriesPerValueAxis=function(){var t=this.data;if(!t||_.isEmpty(t.valuesMetadata))return!1;for(var a=!1,i=!1,n=0,s=t.valuesMetadata;n<s.length;n++){var l=s[n].roles;for(var u in l)if(l[u]){if(u===mi.R.Y){if(a)return!1;a=!0}if(u===mi.R.Y2){if(i)return!1;i=!0}}}return!0},e.prototype.getStaticSeriesRole=function(){return this.isComboChart?mi.R.Y2:mi.R.Y},e.prototype.haveY2Data=function(){var t;return _.some(null===(t=this.data)||void 0===t?void 0:t.series,function(a){return a?.isY2})},e.prototype.customizeLegendFormattingModelOptions=function(t){var a=this.originalData,i=a.legendMarkerRendering,n=i===nn._.markerCircleDefault;return(0,d.__assign)((0,d.__assign)({},t),{legendMarkerRendering:i,matchLineColor:i===nn._.markerOnly||n?a.matchLineColor:void 0})},e.prototype.getTelemetryInformation=function(){var t,i={};if(_.isEmpty(null===(t=this.data)||void 0===t?void 0:t.anomalyDetections)||(i.AnomalyDetections=!0),!_.isEmpty(i))return i},e.ClassName="lineChart",e.MainGraphicsContextClassName="mainGraphicsContext",e.lineChartSVGClassName="lineChartSVG",e.ScalarOuterPadding=10,e.DefaultZeroScalarDomain=[-1,1],e}(On),Ml=function(r){function e(t){var a=r.call(this,t)||this;return a.maxDataValue=Number.MIN_VALUE,a.newDataInterval=0,a.duration=3e5,a}return(0,d.__extends)(e,r),e.prototype.initData=function(t){r.prototype.initData.call(this,t),this.data=this.defaultData},e.prototype.initRenderer=function(t){r.prototype.initRenderer.call(this,t),this.svg.classed("realTimeLineChart",!0).classed("cartesianChart",!0);var a=this.mainGraphicsSVG=this.svg.append("svg");a.classed("mainGraphicsSVG",!0),this.mainGraphicsContext=a.append("g").classed("mainGraphicsContext",!0)},Object.defineProperty(e.prototype,"defaultData",{get:function(){return{series:[],totals:[],legendData:(0,x.Fe)(this.style),isScalar:!1,dataLabelsSettings:ts(this.style),hasDynamicSeries:!1,hasHighlights:!1,categories:[],categoryMetadata:void 0,valuesMetadata:[],categoryData:[],lineStyle:es(),layout:{seriesOrderReversed:!1}}},enumerable:!1,configurable:!0}),e.prototype.setData=function(t){var a;if(null!==(a=this.data)&&void 0!==a||(this.data=this.defaultData),!_.isEmpty(t)){var i=_.head(t);if(i.categorical){var s=p.Vk(i.metadata).duration;s&&(this.duration=s);var o=i.categorical;this.removeOldData();var l=o.categories,u=k.Ge.fromDescriptor({text:!0});l&&l.length>0&&l[0].source&&l[0].source.type&&(u=l[0].source.type);var c=(0,oe._K)(i.metadata?i.metadata.objects:null,He.zK.categoryAxis.axisType,u),v=Vs.convert({dataView:i,style:this.style,isComboChart:!1,isScalar:c,tooltipsEnabled:!1,supportsTotalLabels:!1,featureSwitches:this.featureSwitches});this.mergeNewData(v),this.removeOldData(this.newDataInterval)}}},e.prototype.hasLegend=function(){return this.data&&(this.data.hasDynamicSeries||!_.isEmpty(this.data.series))},e.prototype.calculateAxesProperties=function(t){var i,a=this;this.updateCurrentViewport(t);var n=t.categoryAxisOptions,s=t.valueAxisOptions;if(this.newAxisData&&(this.axisData=this.newAxisData),this.data){var o=this.getAxesDomains(!1,{categoryAxis:!0,valueAxis:!0}),l=function(c){var v="x"===c,y="y"===c,m=v?n:s,w=v?a.data.categoryMetadata:a.containsEmptySeries()?void 0:a.data.series[0].yCol,C=P.createAxis({pixelSpan:v?a.currentViewport.width:a.availableHeight,domainOptions:v?{domain:o.categoryAxis,type:0}:{domain:o.valueAxis,type:0},axisZoom:void 0,metaDataColumn:w,isScalar:!0,isCategoryAxis:v,isVertical:y,formatString:(0,I.EO)(w,K.p.general.formatString),outerPadding:v?10:0,useTickIntervalForDisplayUnits:!0,getValueFn:v?function(D,O){return p.dZ(a.data,D,O,!0)}:void 0,axis:na.AxisDataDefaults,margin:a.margin,preventNice:P.hasForcedDomain(m.includeDomain),categoryThickness:null});return y&&C.d3Axis.tickSize(-t.viewport.width),C};this.xAxisProperties=l("x"),this.yAxisProperties=l("y"),this.newAxisData={x:this.xAxisProperties,y1:this.yAxisProperties}}return null!==(i=this.axisData)&&void 0!==i||(this.axisData=this.newAxisData),[this.xAxisProperties,this.yAxisProperties]},e.prototype.getAxesDomains=function(t,a){var i,n,s,o={};if(!this.data)return o;var l=this.truncateSeries();if(_.isEmpty(l))return o;if(a.categoryAxis){var u=P.createDomain(l,null!==(s=null===(n=null===(i=this.data)||void 0===i?void 0:i.categoryMetadata)||void 0===n?void 0:n.type)&&void 0!==s?s:k.Ge.fromDescriptor({text:!0}),!0,[P.createScalarDomainOptions([this.getMinData()+this.newDataInterval,void 0],0,[!0,void 0])]);u&&(P.assertScalarDomain(u.domain),o.categoryAxis=u.domain)}return a.valueAxis&&(o.valueAxis=P.createValueDomain(l)),o},e.prototype.render=function(t){var a;if(!this.containsEmptySeries())return this.renderLines(),null===(a=this.animator)||void 0===a||a.refreshLastUpdate(),{dataPoints:[],behaviorOptions:{},labelDataPoints:[],labelsAreNumeric:!0,labelDataPointGroups:[],animateLabels:!1}},e.prototype.truncateSeries=function(){var t=this.getMinData(),a=this.data.series;return a?_.map(a,function(i){var n=(0,xe.ED)(i);n.data=(0,xe.ED)(n.data);var o=0;return _.findIndex(n.data,function(l){return l&&l.categoryValue>=t})>0&&o++,n.data=n.data.slice(o),n}):[]},e.prototype.removeOldData=function(t){if(void 0===t&&(t=0),!this.containsEmptySeries()){for(var a=this.getMinData(t),i=this.data,n=0,s=i.series;n<s.length;n++){var o=s[n],l=_.findIndex(o.data,function(c){return c&&c.categoryValue>a});l>0&&(o.data=o.data.slice(l))}var u=_.findIndex(i.categoryData,function(c){return c&&c.categoryValue>a});u>0&&(i.categoryData=this.data.categoryData.slice(u),i.categories=this.data.categories.slice(u))}},e.prototype.mergeNewData=function(t){if(T.fF.assertValue(t,"newData"),this.containsEmptySeries())return this.data=t,void(this.maxDataValue=this.getMaxData());this.data.series=e.mergeSeries(this.data.series,t.series,this.maxDataValue),e.mergeCategories(this.data,t,this.maxDataValue);var a=this.getMaxData();this.newDataInterval=this.maxDataValue&&a?a-this.maxDataValue:0,this.maxDataValue=a},e.prototype.getMaxData=function(){for(var t=0,a=0,i=this.data.series;a<i.length;a++){var n=i[a];n.data.length&&(t=Math.max(_.last(n.data).categoryValue,t))}return t},e.prototype.getMinData=function(t){return void 0===t&&(t=0),this.maxDataValue-this.duration-1.5*t},e.prototype.renderLines=function(){var t,a=this.axisData.x.scale,i=this.axisData.y1.scale,n=d3.line().x(function(s){return a(s.categoryValue)}).y(function(s){return i(s.value)});this.mainGraphicsSVG.attrs({x:0,height:this.availableHeight,width:this.availableWidth}),this.mainGraphicsContext.attr("transform",(0,Fa.Iu)(0,0)),this.mainGraphicsContext.selectAll(".line").data(this.data.series,function(s){return s.identity.getKey()}).join(function(s){return s.append("path").classed("line",!0)}).style("stroke",function(s){return s.lineStyle.strokeColor}).attr("d",function(s){return n(s.data)}),null===(t=this.animator)||void 0===t||t.animate({mainGraphicsContext:this.mainGraphicsContext,interactivityService:null,xTranslation:a(a.domain()[0]+this.newDataInterval)-a(a.domain()[0])})},e.prototype.containsEmptySeries=function(){return!this.data||_.isEmpty(this.data.series)},e.mergeCategories=function(t,a,i){T.fF.assertValue(t,"existingChartData"),T.fF.assertValue(a,"newChartData");var s=_.findIndex(a.categories,function(o){return o&&o.categoryValue>i});s>-1?(t.categories=t.categories.concat(a.categories.slice(s)),t.categoryData=t.categoryData.concat(a.categoryData.slice(s))):(t.categories=a.categories,t.categoryData=a.categoryData)},e.mergeSeries=function(t,a,i){T.fF.assertValue(t,"existingSeries"),T.fF.assertValue(a,"newSeries");for(var n=[],s=0,o=a;s<o.length;s++){var l=o[s],u=_.find(t,function(m){return m.identity.equals(l.identity)});if(u){n.push(u);for(var c=0,v=l.data;c<v.length;c++){var y=v[c];y.categoryValue>i&&u.data.push(y)}}else n.push(l)}return n},e.prototype.getCartesianVisualCapabilities=function(){return{supportsHierarchicalCategoryAxis:!1}},e.prototype.getStaticSeriesRole=function(){return"Y"},e}(ys),Tl=b(14577),Ol=b(67165),Cn=b(81551),Sr=b(15458),ds=b(79972),hs=b(56914),Fl=function(r){function e(t){return r.call(this,t)||this}return(0,d.__extends)(e,r),e.prototype.initRenderer=function(t){r.prototype.initRenderer.call(this,t),this.svg.classed("".concat(e.ClassName," ").concat(cr.qR),!0),this.renderer=new hs.WG(this,t.eventManager)},e.prototype.renderAtFrame=function(t){this.data=this.originalData=t,this.updateViewModelAdapterAndData(),this.cartesianVisualHost.triggerRender(!1)},e.prototype.setData=function(t){var i,n,s,a=this;if(this.data=ds.vN(this.style),!(null===(i=this.playAxis)||void 0===i)&&i.isCurrentlyPlaying()&&this.playAxis.stop(),t.length>0){var o=t[0]||t[1];if(o){this.categoryAxisProperties=(0,p.Vk)(o.metadata,!0),this.valueAxisProperties=(0,p.$w)(o.metadata,!0),this.dataView=o;var l={viewport:this.currentViewport,colors:this.style.colorPalette.dataColors,interactivityService:this.interactivityService,categoryAxisProperties:this.categoryAxisProperties,valueAxisProperties:this.valueAxisProperties,style:this.style,tooltipsEnabled:this.tooltipsEnabled,useMatrixDV:!0};if((0,cr.vH)(o)){this.playAxis||(this.playAxis=new cr.CT(this.interactivityService),this.dataView&&(0,cr.vH)(this.dataView)&&(T.fF.assertValue(this.playAxis,"playaxis"),this.playAxis.initData(this.dataInitOptions)));var u=this.playAxis.setData(o,function(v,y,m){return ds.OQ(v,(0,d.__assign)((0,d.__assign)({},l),{useMatrixDV:!1}),y,m)});this.mergeSizeRanges(u),this.data=u.chartData,this.playAxis.setRenderFunction(function(v){return a.renderAtFrame(v)})}else{null===(n=this.playAxis)||void 0===n||n.remove(),this.playAxis=null;var c=ds.OQ(o,l);c&&(this.data=c)}}}else null===(s=this.playAxis)||void 0===s||s.remove(),this.playAxis=null;this.originalData=this.data},e.prototype.mergeSizeRanges=function(t){var a,i;if(t?.chartData){for(var n=t.chartData.sizeRange,s=0,o=t.allChartData;s<o.length;s++){var u=o[s].sizeRange;null!=u.min&&(n.min=Math.min(null!==(a=n.min)&&void 0!==a?a:Number.POSITIVE_INFINITY,u.min)),null!=u.max&&(n.max=Math.max(null!==(i=n.max)&&void 0!==i?i:Number.NEGATIVE_INFINITY,u.max))}for(var c=0,v=t.allChartData;c<v.length;c++)v[c].sizeRange=n}},e.prototype.hasLegend=function(){var t;return null===(t=this.data)||void 0===t?void 0:t.hasDynamicSeries},e.prototype.enumerateObjectInstances=function(t,a){return Sr.qo.call(this,t,a)},e.prototype.resolveFormattingPlaceholder=function(t){return Sr.u$.call(this,t)},e.prototype.customizeFormattingCard=function(t){return Sr.aD.call(this,t)},e.prototype.getFormattingCards=function(t){return Sr.nZ.call(this,t)},e.prototype.supportsTrendLine=function(){var t=this.data;return!(!t||this.isXAxisCategorical()||this.playAxis)&&!t.size&&(t.hasCategory||t.hasDynamicSeries)&&!!t.xCol&&!!t.yCol},e.prototype.supportsStaticReferenceLines=function(){return this.data&&!this.isXAxisCategorical()},e.prototype.getAxisLocationForRole=function(t){return"X"===t?0:1},e.getExtents=function(t){var a,i={},n=t.dataPoints;if(_.isEmpty(n))return{minY:0,maxY:0,formatStringY:void 0,minX:0,maxX:0,formatStringX:void 0};var s=!!t.xGroupMetadata,o=s&&t.xGroupMetadata.isCategoricalAxis;return o||(i.minX=d3.min(n,function(l){return l.x}),i.maxX=d3.max(n,function(l){return l.x}),i.formatStringX=_.first(n).xFormatString),s&&!o&&(n=_.filter(n,function(l){return null!=l.x})),i.minY=d3.min(n,function(l){return l.y}),i.maxY=d3.max(n,function(l){return l.y}),i.formatStringY=null===(a=_.first(n))||void 0===a?void 0:a.yFormatString,i},e.prototype.calculateAxesProperties=function(t){var a=this;this.updateCurrentViewport(t);var i={minY:0,maxY:10,formatStringY:void 0,formatStringX:void 0,minX:0,maxX:10};this.playAxis?(i=this.playAxis.getCartesianExtents(i,e.getExtents),this.playAxisControlLayout=t.playAxisControlLayout):_.isEmpty(this.data.dataPoints)||(i=e.getExtents(this.data));var n=this.getAxesDomains(!1,{categoryAxis:!this.isXAxisCategorical(),valueAxis:!0}),s=function(l){var u,c,v,y,m="x"===l,w="y"===l,C=m?t.categoryAxisOptions:t.valueAxisOptions,D=m&&a.isXAxisCategorical(),O=D?{domain:_.uniq(_.map(a.data.dataPoints,function(X){return X.categoryIndex})),type:0}:P.mergeScalarAxisDomains(C.includeDomain,P.createScalarDomainOptions(m?n.categoryAxis:n.valueAxis,0)),F=m?a.data.xCol:a.data.yCol,N=D?(0,p.is)({availableWidth:a.availableWidth,categoryCount:_.size(_.uniqBy(a.data.dataPoints,function(X){return X.categoryIndex})),preferredCategoryWidth:(0,p.$K)((0,p.Vk)(a.dataView.metadata)),domain:O.domain,isScalar:!a.isXAxisCategorical(),cartesianOptions:a.options,trimOrdinalDataOnOverflow:t.trimOrdinalDataOnOverflow,outerPaddingRatio:t.outerPaddingRatio,innerPaddingRatio:t.innerPaddingRatio}):void 0,U=P.createAxis({pixelSpan:m?a.availableWidth:a.availableHeight,domainOptions:O,metaDataColumn:F,axisZoom:t.axisZoom,zeroScalarDomain:e.DefaultZeroScalarDomain,isScalar:w||!D,isCategoryAxis:m,isVertical:w,formatString:(m?i.formatStringX:i.formatStringY)||(0,I.EO)(F,Tl.il.general.formatString),outerPadding:null!==(u=N?.outerPaddingRatio)&&void 0!==u?u:0,categoryThickness:null!==(c=N?.categoryThickness)&&void 0!==c?c:void 0,innerPaddingRatio:null!==(v=N?.innerPaddingRatio)&&void 0!==v?v:void 0,outerPaddingRatio:null!==(y=N?.outerPaddingRatio)&&void 0!==y?y:void 0,forcedTickCount:t.forcedTickCount,useTickIntervalForDisplayUnits:!0,axis:C.axis,margin:a.margin,preventNice:D?void 0:P.hasForcedDomain(O),getValueFn:D?function(X,re){var pe=_.find(a.data.dataPoints,function(q){return q.categoryIndex===X});return pe?.formattedCategory.getValue()}:void 0});return U.axisLabel=a.data.axesLabels[l],m&&(U.d3Axis.tickSizeInner(-a.availableHeight).tickSizeOuter(0),D&&(U.categoryIdentities=a.data.categoryIdentities)),U};return this.xAxisProperties=s("x"),this.yAxisProperties=s("y"),[this.xAxisProperties,this.yAxisProperties]},e.prototype.getAxesDomains=function(t,a){var i={},n=this.data;if(!n)return i;var s={minY:0,maxY:10,formatStringY:void 0,formatStringX:void 0,minX:0,maxX:10};return this.playAxis?s=this.playAxis.getCartesianExtents(s,e.getExtents):_.isEmpty(n.dataPoints)||(s=e.getExtents(n)),a.categoryAxis&&!this.isXAxisCategorical()&&(i.categoryAxis=[s.minX,s.maxX]),a.valueAxis&&(i.valueAxis=[s.minY,s.maxY]),i},e.prototype.setFilteredData=function(t,a){if(this.isXAxisCategorical()){var i=this.data=(0,xe.ED)(this.originalData);i.dataPoints=_.filter(i.dataPoints,function(n){return n.categoryIndex>=t&&n.categoryIndex<a}),i.dataPointSeries=_.map(i.dataPointSeries,function(n){var s=(0,xe.ED)(n);return s.dataPoints=_.filter(n.dataPoints,function(o){return o.categoryIndex>=t&&o.categoryIndex<a}),s})}},e.prototype.shouldSuppressAnimation=function(){var t,a;return(null===(a=null===(t=this.data)||void 0===t?void 0:t.dataPoints)||void 0===a?void 0:a.length)>e.NoAnimationThreshold},e.prototype.render=function(t,a,i){var n,s,o,l,u,c,v;if(this.data){this.playAxis&&!this.playAxis.isRendererInitialized()&&this.playAxis.initRenderer({svg:this.svg});var O,y=this.data,m=(0,sa.Mb)(this.animator,t),w=!!this.data.size,C={data:this.data,allData:this.originalData,currentViewport:this.currentViewport,drawBubbles:w,isPlay:!!this.playAxis,hasCategoricalAxis:this.isXAxisCategorical(),xAxisProperties:this.xAxisProperties,yAxisProperties:this.yAxisProperties,plotArea:{width:this.availableWidth,height:this.availableHeight},margin:this.margin,hasSelection:null===(n=this.interactivityService)||void 0===n?void 0:n.hasSelection(),animation:null!==(s=this.playAxis)&&void 0!==s&&s.isCurrentlyPlaying()&&(this.mobileTileInteractive||m>0)?cr.Je:{duration:m,ease:d3.easeCubicInOut},animationOptions:this.animationOptions,fillMarkers:!w&&y.fillPointStyle===Ol.f.fillOnly,suppressDataPointRendering:1===a&&(null===(o=y.dataPoints)||void 0===o?void 0:o.length)>e.NoRenderResizeThreshold,supportsPlotAreaSymmetryShading:this.isPlotSymmetryShadingSupported()},D=this.renderer.render(C,this.interactivityService,this.hostService,i);if(this.mobileTileInteractive&&(D={data:D.data,dataPointsSelection:D.dataPointsSelection,eventGroup:D.eventGroup,root:D.root,host:this.cartesianVisualHost,mobileRoot:this.svg,visualDataInitOptions:this.dataInitOptions,xAxisProperties:this.xAxisProperties,yAxisProperties:this.yAxisProperties,background:d3.select(this.element.get(0)),visualInstanceId:D.visualInstanceId,eventManager:D.eventManager}),this.playAxis&&(T.fF.assertValue(this.playAxisControlLayout,"playAxisControlLayout"),this.playAxis.setPlayControlPosition(this.playAxisControlLayout),O=this.playAxis.render(C,this.currentViewport,this.margin),this.interactivityService&&(D.playOptions={traceLineRenderer:new hs.oz(O.viewModel,this)},null!==(l=this.interactivityService)&&void 0!==l&&l.hasSelection()))){var F=_.uniqBy(_.filter(O.allDataPoints,function(N){return N.selected}),function(N){return N.identity.getKey()});D.playOptions.traceLineRenderer.render(F,!t)}return{dataPoints:null!==(u=O?.allDataPoints)&&void 0!==u?u:y.dataPoints,behaviorOptions:D,navigationOptions:this.interactivityService?{helper:this.renderer,navigationStrategy:this.isXAxisCategorical()?j.jN.CategoryFirst:this.data.hasDynamicSeries?j.jN.SeriesFirst:j.jN.CategoryOnly}:void 0,labelDataPoints:null!==(c=y.dataLabelsSettings)&&void 0!==c&&c.show||null!==(v=y.dataLabelsSettings)&&void 0!==v&&v.showCategory?Vl(C,this.style):void 0,labelsAreNumeric:!1,animateLabels:!0}}},e.prototype.getCategoryValueType=function(){return P.getCategoryValueType(this.data.xCol)},e.prototype.getSupportedCategoryAxisType=function(){var t;return null!==(t=this.data)&&void 0!==t&&t.xGroupMetadata?this.data.xGroupMetadata.isScalarType?Ct.w.both:Ct.w.categorical:Ct.w.scalar},e.prototype.getVisualCategoryAxisIsScalar=function(){return!this.isXAxisCategorical()},e.prototype.getSubSelectionMetadata=function(t){return{visualObject:t}},e.prototype.getSubSelectionShortcuts=function(t){return Sr.yV.call(this,t)},e.prototype.getSubSelectionStyles=function(t){return Sr.mv.call(this,t)},e.prototype.getSubSelectionCustomOutlines=function(t){return Sr.PH.call(this,t)},e.prototype.getSelectorsByColumnFromSubselectedElement=function(t){return Sr.l5.call(this,t)},e.prototype.getDataViewObjectLayerChanges=function(t,a){return Sr.In.call(this,t,a)},e.prototype.getGroupBoundingRect=function(t,a,i){var n,s,o,l=(n=i.node().getBoundingClientRect()).left,u=n.top,c=(s=i.node().getBBox()).x,v=s.y,y=(o=t.reduce(function(ee,ue){var ke=ue.geometry,Ke=ke.size,Re=ke.x,Je=ke.y;return ee.xMin=Math.min(Re-Ke,ee.xMin),ee.yMin=Math.min(Je-Ke,ee.yMin),ee.xMax=Math.max(Re+Ke,ee.xMax),ee.yMax=Math.max(Je+Ke,ee.yMax),ee},{xMin:Number.MAX_SAFE_INTEGER,yMin:Number.MAX_SAFE_INTEGER,xMax:Number.MIN_SAFE_INTEGER,yMax:Number.MIN_SAFE_INTEGER})).xMin,m=o.yMin,F=(o.xMax-y)*a,N=Math.round((o.yMax-m)*a+10),U=Math.round(F+10),re=(y-c)*a,pe=Math.ceil((m-v)*a-5+u);return{x:Math.ceil(re-5+l),y:pe,height:N,width:U}},e.prototype.getCartesianVisualCapabilities=function(){return{supportsHierarchicalCategoryAxis:!1}},e.prototype.getStaticSeriesRole=function(){},e.prototype.isXAxisCategorical=function(){var t,a;return null===(a=null===(t=this.data)||void 0===t?void 0:t.xGroupMetadata)||void 0===a?void 0:a.isCategoricalAxis},e.prototype.isPlotSymmetryShadingSupported=function(){var t,a;return!(this.isXAxisCategorical()||null!==(t=this.valueAxisProperties)&&void 0!==t&&t.logAxisScale||null!==(a=this.categoryAxisProperties)&&void 0!==a&&a.logAxisScale)},e.ClassName="scatterChart",e.NoAnimationThreshold=1e3,e.NoRenderResizeThreshold=1e3,e.DefaultZeroScalarDomain=[-1,1],e}(On);function Vl(r,e){var t,a=r.data.dataLabelsSettings,i=a.fontProperties,n=null!==(t=function(r){var e=r.plotArea,t=e.width,a=e.height,i=new Cn.E(t/2,a/2),n=function(r,e){var t=r/4,a=e/4;return[new Cn.E(t,a),new Cn.E(3*t,a),new Cn.E(t,3*a),new Cn.E(3*t,3*a)]}(t,a);return function(r,e,t){for(var o,a=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],i=[],n=t.xAxisProperties.scale,s=t.yAxisProperties.scale,l=0,u=t.data.dataPoints;l<u.length;l++){var c=u[l],v=n(c.x),y=s(c.y),m=Il(v,y,r);t.drawBubbles?i[m]||(i[m]=c.identity):(o=Nl(e[m].x,e[m].y,v,y))<a[m]&&(i[m]=c.identity,a[m]=o)}return _.filter(i,function(w){return!!w}).map(function(w){return w.getKey()})}(i,n,r)}(r))&&void 0!==t?t:[],s=i.color||Ue.v.getThemeColor(e,g.uQ);return _.map(r.data.dataPoints,function(o){var l=o.formattedCategory.getValue(),u=(0,J.qk)(i,l);return{isPreferred:Bl(o.identity.getKey(),n),text:l,textSize:{width:te.b.measureSvgTextWidth(u),height:te.b.estimateSvgTextHeight(u)},outsideFill:s,insideFill:Ue.v.getThemeColor(e,g.pl),parentType:0,parentShape:{point:{x:r.xAxisProperties.scale(o.x),y:r.yAxisProperties.scale(o.y)},radius:hs.WG.calculateRadius(o.radius,r.data.sizeRange,r.plotArea,r.data.marker.rangeType,r.data.marker.multiplier),validPositions:[2,1,8,4,16,32,64,128]},identity:o.renderIdentity,fontProperties:i,leaderLine:{strokeColor:s,strokeWidth:1,strokeTransparency:50,strokePattern:L.Dv.solid,strokeShow:!0},hasBackground:a.enableBackground,backgroundColor:a.backgroundColor,backgroundTransparency:a.backgroundTransparency,isCategory:!0}})}function Il(r,e,t){return r>t.x&&e<=t.y?0:r<=t.x&&e<=t.y?1:r<=t.x&&e>t.y?2:3}function Nl(r,e,t,a){return Math.sqrt((r-t)*(r-t)+(e-a)*(e-a))}function Bl(r,e){return _.some(e,function(t){return 0===r.localeCompare(t)})}var fi=b(5616),zl=[ka.h.auto,ka.h.outsideEnd,ka.h.insideEnd,ka.h.insideCenter,ka.h.insideBase],Wl=1,Hl=20;function Ul(r){return{type:3,card:[Gl.call(this,r.categoryAxisData),jl.call(this),Yl.call(this)].filter(function(e){return e})}}function Gl(r){var e=this,t=fi.wW.sentimentColors,a=this.originalData,i=a.sentimentColors,n=new ge.CQ(new ge.lg("sentimentColors"),"Role_DisplayName_Columns",(0,d.__spreadArray)((0,d.__spreadArray)([],_.values(t),!0),[fi.wW.valueAxis.totalsEnabled,fi.wW.categoryAxis.innerPadding],!1),this.localizer);return n.addGroup("colors",function(s){s.withDisplayName("Visual_Colors").addSimpleSlice("increaseFill",new ge.BT({descriptor:t.increaseFill,value:{value:i.increaseFill.solid.color}}).build()).addSimpleSlice("decreaseFill",new ge.BT({descriptor:t.decreaseFill,value:{value:i.decreaseFill.solid.color}}).build()).addSimpleSlice("otherFill",new ge.BT({descriptor:t.otherFill,value:{value:i.otherFill.solid.color}}).build(),function(o){return o.withDisabled(!a.isBreakdown).withCustomDescription("Visual_Waterfall_Breakdown_OtherDescription")}),a.isBreakdown||s.addSimpleSlice("totalsEnabled",new ge.bd({descriptor:fi.wW.valueAxis.totalsEnabled,value:e.isTotalsEnabled()}).build(),function(o){return o.withCustomDisplayName("Visual_Axis_Total_Column")}),e.isTotalsEnabled()&&s.addSimpleSlice("totalFill",new ge.BT({descriptor:t.totalFill,value:{value:i.totalFill.solid.color}}).build())}),n.addGroup("spacing",function(s){s.withDisplayName("Visual_Spacing").addSimpleSlice("innerPadding",(0,ya.Gf)(r,e.localizer))}),n.build()}function jl(){var r=this,e=this.originalData,t=fi.wW.breakdown,a=new ge.CQ(new ge.lg("breakdown"),"Visual_Waterfall_Breakdown",t,this.localizer);return e.isBreakdown?(a.addGroup("breakdown",function(i){i.addSimpleSlice("maxBreakdowns",new ge.JN({descriptor:t.maxBreakdowns,value:e.numberOfBreakdowns,localize:r.localizer,options:{minValue:{type:0,value:Wl},maxValue:{type:1,value:Math.min(Hl,e.totalBreakdownCategories)}}}).build(),function(n){return n.withCustomDisplayName("Visual_Waterfall_MaximumBreakdown")})}),a.build()):(a.withDisabled(!0,"Visual_BreakdownCard_DisabledReason"),a.build())}function Yl(){var r,e,t=fi.wW.labels,a=this.originalData,i=this.data.dataLabelsSettings,n={dataLabelsSettings:a.dataLabelsSettings,positionObject:zl,show:!0,displayUnits:!0,precision:!0,fontSize:!0,fontFamily:!0,labelOrientation:!0,position:!0,enableBackground:i.enableBackground,backgroundColor:i.backgroundColor,backgroundTransparency:i.backgroundTransparency,style:this.style,bold:!0,italic:!0,underline:!0};i.position&&n.positionObject.indexOf(i.position)<0&&(i.position=ka.h.auto);var o={cardBuilder:new ge.CQ(new ge.lg("labels"),"Visual_DataPointsLabels",t,this.localizer),dataLabelsProps:t,featureSwitches:this.featureSwitches,hostServices:this.hostService,options:n,individualSelector:(0,G.WD)({featureSwitches:this.featureSwitches,hasCategories:null!=_.first(a.categories),hasDynamicSeries:!1,hasSeriesSelector:!1})};if(a.isBreakdown){var l=null===(e=_.first(null===(r=_.first(a.series))||void 0===r?void 0:r.data))||void 0===e?void 0:e.identity.getSelector();l&&(o.repetitionSelector={metadata:l.metadata})}return(0,G.XQ)(o)}function Kl(r,e){if(!e){var a=_.first(r).visualObjects;if(!(a.length>0))return;var n=this.localizer;switch(a[0].objectName){case"increase-fill":return Hn("Format_Increase_Fill",n);case"decrease-fill":return Hn("Format_Decrease_Fill",n);case"other-fill":return Hn("Format_Other_Fill",n);case"total-fill":return Hn("Format_Total_Fill",n);default:return}}}function Hn(r,e){var t=fi.wW.labels.show,a="".concat("Visual","-").concat("sentimentColors");return[{type:0,excludedResetFormattingIds:[t]},(0,d.__assign)((0,d.__assign)({type:2},t),{enabledLabel:e("Format_AddDataLabels")}),{type:1,destinationInfo:{cardUid:a},label:e(r)}]}function Xl(r){var t=_.first(r).visualObjects;if(t.length>0)switch(t[0].objectName){case"data-labels":return function(r){var e=fi.wW.labels;return(0,ne.Jf)({hostServices:r,omitSelectorForSingleSeries:!0,individualSelector:!0,selector:void 0,repetitionSelector:void 0},{fontFamilyReference:e.fontFamily,fontSizeReference:e.fontSize,boldReference:e.bold,italicReference:e.italic,underlineReference:e.underline,fontColorReference:e.color,displayUnitsReference:e.labelDisplayUnits,precisionReference:e.labelPrecision})}(this.hostService);case"increase-fill":return(0,ne.w3)(this.hostService,void 0,fi.wW.sentimentColors.increaseFill);case"decrease-fill":return(0,ne.w3)(this.hostService,void 0,fi.wW.sentimentColors.decreaseFill);case"other-fill":return(0,ne.w3)(this.hostService,void 0,fi.wW.sentimentColors.otherFill);case"total-fill":return(0,ne.w3)(this.hostService,void 0,fi.wW.sentimentColors.totalFill);default:return}}var js=(0,Z.CH)("waterfall-connector"),vs=(0,Z.CH)("column");function Jl(r,e){var t=this,a=this.clippedData.series[0].data,i=this.interactivityService&&this.interactivityService.hasSelection(),n=this.xAxisProperties.scale,s=this.yAxisProperties.scale,o=s.domain()[0],l=this.yAxisProperties.invertAxis,u=this.featureSwitches.onObject;this.mainGraphicsSVG.attr("height",this.availableHeight).attr("width",this.availableWidth),(0,ia.H4)(this.mainGraphicsSVG,this.clippedData.strokeSettings);var c=this.mainGraphicsContext.selectAll(vs.selector).data(a,function(C){return C.key}).join(function(C){return C.append("rect").classed(vs.class,!0).classed("highlight",function(D){return D.highlight})}).style("fill",function(C){return C.color}).style("fill-opacity",function(C){return 1===C.barType?Da.Ko:(0,Da.eR)(C.selected,C.highlight,i,t.data.hasHighlights)}).attr("width",this.layout.categoryWidth).attr("x",function(C){return n(C.categoryIndex)}).attr("y",function(C){if(l){var D;return D=C.position<o?Math.abs(s(o)-s(C.value)):Math.abs(s(C.position)-s(C.position+C.value)),Un(s,C.position,C.value)-D}return Un(s,C.position,C.value)}).attr("height",function(C){return C.position<o?Math.abs(s(o)-s(C.value)):Math.abs(s(C.position)-s(C.position+C.value))});this.interactivityService&&c.attrs({tabindex:0,focusable:!0,"aria-label":function(D){return(0,ii.X)(D.tooltipInfo())},role:"option","aria-selected":function(D){return D.selected}}).classed(Da.Pg,!It.M.isInternetExplorerOrEdge()),u&&c.classed(We.cy,!0).attr(We.Ez,function(C){return function(r){switch(r){case 1:return"decrease-fill";case 0:return"increase-fill";case 3:return"other-fill";case 2:return"total-fill";default:T.fF.assertNever(r)}}(C.sentimentColorType)}).attr(We.CK,function(C){return function(r){switch(r){case 1:return"Visual_DecreaseFill";case 0:return"Visual_IncreaseFill";case 3:return"Visual_OtherFill";case 2:return"Visual_TotalFill";default:T.fF.assertNever(r)}}(C.sentimentColorType)}).attr(We.QZ,3),this.mainGraphicsContext.selectAll(js.selector).data(a.slice(0,a.length-1),function(C){return C.key}).join(function(C){return C.append("line").classed(js.class,!0)}).style("stroke",Ue.v.getThemeColor(this.style,"foregroundNeutralTertiary")).attrs({x1:function(D){return n(D.categoryIndex)},y1:function(D){return s(D.position+D.value)},x2:function(D){return n(D.categoryIndex+1)+t.layout.categoryWidth},y2:function(D){return s(D.position+D.value)}}),this.tooltipsEnabled&&this.tooltipService.addTooltip(c,function(C){return C.data&&C.data.tooltipInfo()},function(C){return C.data&&C.data.identity&&[C.data.identity]});var m,w,v=this.data.dataLabelsSettings,y=[];return(v&&v.show||v.showCategory)&&(y=this.createLabelDataPoints()),this.interactivityService&&(w={navigationStrategy:j.jN.CategoryOnly,helper:this},m={root:this.mainGraphicsContext,bars:c,isBreakdown:this.data.isBreakdown,formatMode:e}),(0,Fa.bL)(this.animationOptions),{dataPoints:this.data.series[0].data,behaviorOptions:m,navigationOptions:w,labelDataPoints:y,labelsAreNumeric:!0,labelOrientation:v.labelOrientation,animateLabels:!r}}function Un(r,e,t){return t<0?r(e):r(e)-(r(0)-r(t))}function $l(r,e,t){return t<0?r(e)-(r(0)-r(t)):r(e)}var tu=function(r){function e(t){var a;return r.call(this,(0,d.__assign)((0,d.__assign)({},t),{tooltipsEnabled:null===(a=t.tooltipsEnabled)||void 0===a||a}))||this}return(0,d.__extends)(e,r),e.prototype.initRenderer=function(t){if(r.prototype.initRenderer.call(this,t),this.svg.classed(e.WaterfallClassName,!0),this.mainGraphicsSVG=this.svg.append("svg"),this.mainGraphicsContext=this.mainGraphicsSVG.append("g").classed(e.MainGraphicsContextClassName,!0),this.interactivityService){var a=It.M.isInternetExplorerOrEdge();this.mainGraphicsContext.attrs({tabindex:0,focusable:!0,role:"listbox","aria-multiselectable":!0,"aria-label":this.localizer("Visual_Plot")}).classed(Da.Pg,!a)}},e.getDefaultWaterfallLabelSettings=function(t,a,i,n){return void 0===a&&(a=!1),{show:a,labelOrientation:pt.B.Horizontal,position:ka.h.auto,displayUnits:0,precision:g.NZ,fontProperties:(0,G.bT)({style:t,textClassName:"smallLightLabel",labelColor:i,fontSize:n}).fontProperties,enableBackground:!1,bold:!1,italic:!1,underline:!1}},e.doesDataLabelFitInShape=function(t,a,i){if(null==t||null===t.value)return!1;var n={text:i.labelText(t),fontFamily:g.bN.fontFamily,fontSize:g.bN.fontSize,fontWeight:g.bN.fontWeight};if(Un(a.scale,t.position,t.value)-g.FJ>0)return!0;var o=te.b.measureSvgTextWidth(n),l=te.b.estimateSvgTextHeight(n),u=i.categoryWidth,c=Math.abs((0,Y.sc)(a.scale,Math.max(0,Math.abs(t.value)),0));return!(o>u||l>c)},e.prototype.setData=function(t){T.fF.assertValue(t,"dataViews");var a=this.getSentimentColorsFromObjects(null),i=e.DefaultBreakdowns,n=t.length>0?t[0]:void 0;if(this.data=this.originalData={series:[{data:[]}],categories:[],valuesMetadata:[],legendData:(0,x.Fe)(this.style),hasHighlights:!1,categoryMetadata:null,scalarCategoryAxis:!1,positionMax:0,positionMin:0,dataLabelsSettings:e.getDefaultWaterfallLabelSettings(this.style,!1,void 0),sentimentColors:a,axesLabels:{x:null,y:null},numberOfBreakdowns:i,totalBreakdownCategories:0,totalsEnabled:true},n){if(this.dataView=n,n.metadata&&n.metadata.objects){var s=n.metadata.objects,o=s.labels;o&&(0,G.ww)(o,this.data.dataLabelsSettings,!0,this.style),a=this.getSentimentColorsFromObjects(s),i=(0,A.NA)(s,fi.wW.breakdown.maxBreakdowns,e.DefaultBreakdowns)}(n.categorical||n.matrix)&&(this.data=this.originalData=it.convert({dataView:n,style:this.style,hostServices:this.hostService,dataLabelSettings:this.data.dataLabelsSettings,sentimentColors:a,interactivityService:this.interactivityService,tooltipsEnabled:this.tooltipsEnabled,numberOfBreakdowns:i}))}},e.prototype.getFormattingCards=function(t){return Ul.call(this,t)},e.prototype.getSubSelectionShortcuts=function(t,a){return Kl.call(this,t,a)},e.prototype.getSubSelectionStyles=function(t){return Xl.call(this,t)},e.prototype.isTotalsEnabled=function(){var t,a;return null!==(a=null===(t=this.data)||void 0===t?void 0:t.totalsEnabled)&&void 0!==a&&a},e.prototype.hasLegend=function(){return!0},e.createClippedDataIfOverflowed=function(t,a){T.fF.assertValue(t,"createClippedDataIfOverflowed");var i=t.series[0].data;if(a<i.length){var n=(0,xe.ED)(t);return n.series=[{data:i.slice(0,a)}],n.categories=t.categories.slice(0,a),n}return t},e.prototype.calculateAxesProperties=function(t){var i,a=this;this.updateCurrentViewport(t);var n=t.categoryAxisOptions,s=t.valueAxisOptions,o=this.clippedData=this.data,l=o.categories.length-(this.isTotalsEnabled()?0:1),u=this.getPreferredPlotArea({isScalar:!1,categoryCount:l,categoryThickness:p.jY,outerPaddingRatio:t.outerPaddingRatio}),c=(0,p.is)({availableWidth:u.width,categoryCount:l,preferredCategoryWidth:null!==(i=o?.preferredCategoryWidth)&&void 0!==i?i:null,domain:null,isScalar:!1,cartesianOptions:this.options,trimOrdinalDataOnOverflow:t.trimOrdinalDataOnOverflow,outerPaddingRatio:t.outerPaddingRatio,innerPaddingRatio:t.innerPaddingRatio});this.options.isScrollable||(o=this.clippedData=e.createClippedDataIfOverflowed(o,c.categoryCount));var v=P.createScalarDomainOptions(this.getAxesDomains(!1,{valueAxis:!0}).valueAxis,0);v=P.mergeScalarAxisDomains(s.includeDomain,v);var y=function(O){var F,N="x"===O,U="y"===O,X=N?n:s,re=P.createAxis({pixelSpan:N?u.width:u.height,domainOptions:N?P.createDomain(o.series,P.getCategoryValueType(o.categoryMetadata),!1,[n.includeDomain]):v,metaDataColumn:N?o.categoryMetadata:o.valuesMetadata,axisZoom:void 0,zeroScalarDomain:U?e.DefaultZeroScalarDomain:void 0,isScalar:U,isVertical:U,isCategoryAxis:N,formatString:null!==(F=P.getAxisFormatString(N?[]:a.data.series))&&void 0!==F?F:(0,I.EO)(N?o.categoryMetadata:o.valuesMetadata[0],K.p.general.formatString),outerPadding:U?0:c.categoryThickness*c.outerPaddingRatio,outerPaddingRatio:U?0:c.outerPaddingRatio,innerPaddingRatio:U?void 0:t.innerPaddingRatio,categoryThickness:U?void 0:c.categoryThickness,forcedTickCount:t.forcedTickCount,axis:(0,d.__assign)((0,d.__assign)({},X.axis),{invertAxis:X.axis.invertAxis&&U}),preventNice:P.hasForcedDomain(N?X.includeDomain:v),useTickIntervalForDisplayUnits:!!U||void 0,getValueFn:N?function(pe,q){return e.lookupXValue(o,pe,q)}:void 0});return N&&(re.outerPaddingRatio=c.outerPaddingRatio,o.categoryIdentities&&(re.categoryIdentities=o.categoryIdentities)),re};this.xAxisProperties=y("x"),this.yAxisProperties=y("y");var m=(0,nt.d6)(this.yAxisProperties,o.dataLabelsSettings),w=(0,G.fI)(),C=this.xAxisProperties.categoryThickness*(1-t.innerPaddingRatio);return this.layout={categoryCount:c.categoryCount,categoryThickness:c.categoryThickness,isScalar:c.isScalar,outerPaddingRatio:c.outerPaddingRatio,categoryWidth:C,labelText:function(O){var N=w.getOrCreate(O.labelFormatString,o.dataLabelsSettings,m.units,m.getPrecision(!!O.labelFormatString,o.series[O.seriesIndex].type));return(0,G.Gv)({label:N.format(O.value)})},labelLayout:e.getLabelLayoutXYForWaterfall(this.xAxisProperties,C,this.yAxisProperties,v?.domain),filter:function(O){return e.doesDataLabelFitInShape(O,a.yAxisProperties,a.layout)},style:{fill:function(O){return O.isLabelInside?Ue.v.getThemeColor(a.style,g.pl):O.labelFill}}},[this.xAxisProperties,this.yAxisProperties]},e.getLabelLayoutXYForWaterfall=function(t,a,i,n){return{x:function(o){return t.scale(o.categoryIndex)+a/2},y:function(o){return e.getWaterfallLabelYPosition(i.scale,o,n)}}},e.getWaterfallLabelYPosition=function(t,a,i){var n=t(0)-t(Math.abs(a.value)),s=t(a.position),o=t(i[0]),l=t(a.position+a.value);if(a.value<0){var c=s+n+te.b.estimateSvgTextHeight({text:a.labelText,fontFamily:g.bN.fontFamily,fontSize:g.bN.fontSize,fontWeight:g.bN.fontWeight});if(o>c)return c}else{var v=s-n-g.FJ;if(v>0)return v}return a.isLabelInside=!0,e.getWaterfallInsideLabelYPosition(s,l,o)},e.getWaterfallInsideLabelYPosition=function(t,a,i){return t=(t=t<0?0:t)>i?i:t,a=(a=a<0?0:a)>i?i:a,Math.abs(a-t)/2+Math.min(t,a)},e.prototype.getAxesDomains=function(t,a){var i={},n=this.activeData;return n&&a.valueAxis&&(i.valueAxis=[n.positionMin,n.positionMax]),i},e.lookupXValue=function(t,a,i){var n=t.series[0].data;return a===n.length-1?n[a].categoryValue:(0,p.dZ)(t,a,n[a].type||i,!1)},e.prototype.getVisualCategoryAxisIsScalar=function(){return!1},e.prototype.setFilteredData=function(t,a){var i=this.clippedData=(0,xe.ED)(this.data);i.series=[{data:i.series[0].data.slice(t,a)}],i.categories=i.categories.slice(t,a)},e.prototype.render=function(t,a,i){return Jl.call(this,t,i)},e.prototype.getSupportedCategoryAxisType=function(){return Ct.w.categorical},e.prototype.getFirstElement=function(){return _.isEmpty(this.clippedData.series)||_.isEmpty(this.clippedData.series[0].data)?{element:null}:{element:this.getHTMLElementFromCategoryIndex(this.clippedData.series[0].data[0].categoryIndex)}},e.prototype.getNextDataPoint=function(t,a,i){var s,n=t;do{switch(i){case j.x0.NextCategory:t+=1,((this.isTotalsEnabled()||this.data.isBreakdown)&&t>=this.data.categories.length||!this.isTotalsEnabled()&&!this.data.isBreakdown&&t>=this.data.categories.length-1)&&(t=0);break;case j.x0.PreviousCategory:(t-=1)<0&&(t=this.isTotalsEnabled()||this.data.isBreakdown?this.data.categories.length-1:this.data.categories.length-2);break;case j.x0.NextSeries:case j.x0.PreviousSeries:break;default:T.fF.assertNever(i)}s=this.data.series[a].data[t]}while(s&&0===s.value&&n!==t);return{element:this.getHTMLElementFromCategoryIndex(t),targetCategoryIndex:t}},e.prototype.getHTMLElementFromCategoryIndex=function(t){return this.mainGraphicsContext.selectAll(vs.selector).filter(function(a){return a.categoryIndex===t}).node()},e.prototype.getSentimentColorsFromObjects=function(t){var a=Ue.v.create(this.style);return{increaseFill:{solid:{color:a.getColorForPropertyWithDefaultColor(t,fi.wW.sentimentColors.increaseFill,Ue.v.getSentimentColor(this.style,"good"))}},decreaseFill:{solid:{color:a.getColorForPropertyWithDefaultColor(t,fi.wW.sentimentColors.decreaseFill,Ue.v.getSentimentColor(this.style,"bad"))}},totalFill:{solid:{color:a.getColorForPropertyWithDefaultColor(t,fi.wW.sentimentColors.totalFill,Ue.v.getDataColorByIndex(this.style,0))}},otherFill:{solid:{color:a.getColorForPropertyWithDefaultColor(t,fi.wW.sentimentColors.otherFill,Ue.v.getSentimentColor(this.style,"neutral"))}}}},e.prototype.createLabelDataPoints=function(){for(var t,a=[],i=this.data,n=this.xAxisProperties.scale,s=this.yAxisProperties.scale,o=this.yAxisProperties.invertAxis,l=s(0),u=i.series,c=(0,G.fI)(),v=i.dataLabelsSettings,y=(0,nt.d6)(this.yAxisProperties,v),m=0,w=u;m<w.length;m++)for(var C=w[m],D=0,O=C.data;D<O.length;D++){var F=O[D],N=F.labelFormatString,U=c.getOrCreate(N,this.data.dataLabelsSettings,y.units,y.getPrecision(!!N,C.type)),X=(0,Bt.Bw)(U.format(F.value)),re=v.fontProperties,pe=(0,J.qk)(re,X);a.push({isPreferred:!0,text:X,textSize:{width:te.b.measureSvgTextWidth(pe),height:te.b.estimateSvgTextHeight(pe,!0)},outsideFill:null!==(t=F.labelFill)&&void 0!==t?t:Ue.v.getThemeColor(this.style,g.uQ),insideFill:Ue.v.getThemeColor(this.style,g.pl),parentType:1,parentShape:{rect:{left:n(F.categoryIndex),top:o?$l(s,F.position,F.value):Un(s,F.position,F.value),width:this.layout.categoryWidth,height:Math.abs(l-s(Math.abs(F.value)))},orientation:F.value>=0?o?2:1:o?1:2,validPositions:e.getValidPositions(v.position,F.value)},fontProperties:re,identity:void 0,hasBackground:v.enableBackground,backgroundColor:v.backgroundColor,backgroundTransparency:v.backgroundTransparency})}return a},e.getValidPositions=function(t,a){if(0===a)return e.validZeroLabelPosition;switch(t){case ka.h.insideEnd:return[4];case ka.h.insideCenter:return[1];case ka.h.insideBase:return[2];case ka.h.outsideEnd:return[16];default:return[16,4,1,2]}},e.prototype.getCartesianVisualCapabilities=function(){return{supportsHierarchicalCategoryAxis:!1}},e.prototype.getStaticSeriesRole=function(){},e.DefaultZeroScalarDomain=[0,1],e.DefaultBreakdowns=5,e.WaterfallClassName="waterfallChart",e.MainGraphicsContextClassName="mainGraphicsContext",e.validZeroLabelPosition=[16,8],e}(On);function Gn(r,e){return{create:function(a){return r.viewModelAdapterFactory.createLayerAdapter(e,a)}}}var Ys=function(e){return new xo((0,d.__assign)((0,d.__assign)({},e),{columnChartType:function(t){switch(t){case 14:case 5:return 20;case 13:case 4:return 12;case 9:return 52;case 7:return 18;case 6:return 10;case 8:return 50;case 10:return 84;default:return T.fF.assertFail("Not supported"),20}}(e.chartType),isComboChart:(0,p.LQ)(e.chartType),viewModelAdapterFactory:Gn(e,4)}))},Ks=function(e){return new wl((0,d.__assign)((0,d.__assign)({},e),{lineChartType:function(t){switch(t){case 0:case 13:case 14:return 1;case 3:return 32;case 1:return 2;case 2:return 16;default:return T.fF.assertFail("Not supported"),1}}(e.chartType),isComboChart:(0,p.LQ)(e.chartType),viewModelAdapterFactory:Gn(e,0)}))},iu=b(42359),nu=new(function(){function r(){}return r.prototype.getDataBoundReferenceLines=function(e,t,a){var i=[],n=[];if(e)if(e.matrix&&e.matrix.valueSources){var s=e.matrix;if(s.valueSources&&n.push.apply(n,e.matrix.valueSources||[]),s.rows&&s.rows.levels)for(var o=0,l=s.rows.levels;o<l.length;o++)n.push.apply(n,l[o].sources||[])}else if(e.categorical&&e.categorical.values){var c=_.head(e.categorical.values.grouped());if(c)for(var v=0,y=c.values;v<y.length;v++)n.push(y[v].source)}for(var w=0;w<n.length;w++){var C=n[w],D=Ue.v.getDataColorByIndex(a,w,Le.fA),O=(0,A.AO)(C.objects,"referenceLine"),F=this.getCartesianRoleKind(C,t);i.push.apply(i,(0,At.UL)(O,D,"referenceLine",F,a,void 0,C)||[])}return i},r.prototype.getCartesianRoleKind=function(e,t){var a=e.roles;if(t.getAxisLocationForRole&&a)for(var i in a)if(a[i])return t.getAxisLocationForRole(i);return 1},r}()),su=function(){function r(){}return r.convert=function(e){var t,a=e.dataViews,i=e.layers,n=e.layerStyle,s=e.chartType,o=e.hasDataChanged,l=i.length>1&&!!(a[0]&&a[0].categorical&&a[0].categorical.values),u=n.colorPalette.dataColors;u.clearPreferredScale();for(var c=dt(a),v=_.filter(a,f.Aq),y=_.filter(a,rt.Qp),m=_.filter(a,W.Ik),w=[],C=[],D=[],O=0,F=i.length;O<F;O++){var N=c[O],U=N?[N]:[];if(null!=v[O]&&U.push(v[O]),null!=m[O]&&U.push(m[O]),i[O].setData(U,e.multipleInfo),D.push(uu(i[O],N,n,l,s)),C.push.apply(C,nu.getDataBoundReferenceLines(N,i[O],n)||[]),Ee(a,i,O)){var X=y[O];if(X){var pe=(0,rt.VP)(X,N,O>0,n);w.push.apply(w,pe||[])}}F>1&&u.rotateScale()}var ee,q=B.converter(_.head(a));if(_.isEmpty(a))ee=new na({style:n,chartType:s});else{var ue=a[0],ke=ue.metadata&&!_.isEmpty(null===(t=ue.categorical)||void 0===t?void 0:t.categories)&&!!(0,oe.A8)(ue.categorical.categories[0]),Ke=11===s;ee=new na({chartType:s,valueAxisProperties:(0,p.$w)(ue.metadata,Ke),y2AxisProperties:(0,p.$w)(ue.metadata,Ke,"y2Axis"),categoryAxisProperties:(0,p.Vk)(ue.metadata,ke||Ke),isValueAxisIrregular:Ye(a,i),style:n,hasY2Role:(0,V.c5)(ue,"Y2")||a[1]&&(0,V.c5)(a[1],"Y2"),forceShowY2:q.show&&q.showOnValueSecAxis||!_.isEmpty(e.multipleInfo)&&(0,p.LQ)(s),seriesLabelSettings:Et(i,s,n),featureSwitches:e.featureSwitches}),o&&function(r,e,t,a,i){if(r&&r.length>0){var s=r[0].metadata;if(s){var o=Me(r,a);e.push.apply(e,function(r,e,t,a){var i=Ue.v.getDataColorByIndex(e,0,Le.fA),n=[];if(t){var s=(0,A.AO)(r.objects,At.XC);n.push.apply(n,(0,At.UL)(s,i,At.XC,0,e,a,void 0)||[])}var o=(0,A.AO)(r.objects,At.Dk);return n.push.apply(n,(0,At.UL)(o,i,At.Dk,1,e)||[]),n}(s,t,o,i)||[])}}}(a,C,n,i,e.chartType)}return{legendData:(0,x.nh)(D,n),trendLines:w,referenceLines:C,axesData:ee,warningObjectCollection:new ze.tb,showIcon:!1,scrollbarOptions:{scrollbarWidth:Q.ScrollbarWidth},zoomData:q}},r}();function uu(r,e,t,a,i){var n=r.getLegendData();if(n?.dataPoints.length>1)return n;var s=(0,x.pq)({dataView:e,showByDefault:!0,staticSeriesRoleNames:[r.getStaticSeriesRole()],style:t,allowLegendWithNoSeries:a},function(r){return 4===r||6===r||5===r||7===r||9===r||8===r||11===r||10===r}(i));return!n||s?.isGradientLegend?s:n}var du=function(){function r(e){this.staticUpdateOptions=e}return r.prototype.create=function(e){return new hu(this.staticUpdateOptions,e)},r}(),hu=function(){function r(e,t){this.staticUpdateOptions=e,this.updateOptions=t}return r.prototype.apply=function(e,t){var a,m,i=this.staticUpdateOptions,n=i.layerInitDataOptions,s=i.updateGlobalAxesDomains,o=this.updateOptions,l=o.isSmallMultiples,u=o.reader,c=o.dataViews,v=o.updateOptions,y=o.requestedPerMultipleAxisDomains;if(l){m=(0,p.LQ)(t)?u.convertComboFrame(e.index):[u.convertFrame(e.index)];for(var w=void 0,C=0;C<m.length;C++){var D=m[C],O=(0,iu.eC)(D.metadata,la.e0.formatString,K.x.category,D.categorical,!!w);w?O.categorical.categories=w:w=null===(a=O.categorical)||void 0===a?void 0:a.categories,m[C]=O}}else m=c;e.hasInitializedData()||e.initData(n);var F=(0,d.__assign)((0,d.__assign)({},v),{dataViews:m,multipleInfo:l?this.buildMultipleInfo(e.index):void 0});e.update(F),y&&(y.categoryAxis||y.valueAxis||y.secondaryValueAxis)&&s(e.getAxesDomains(!0,y))},r.prototype.applySynchronizedAxes=function(e,t){var a=this.updateOptions.isSmallMultiples;T.fF.assert(function(){return a},"Should not apply synchronizedAxes to non-small multiples"),e.applySynchronizedDomains(t)},r.prototype.applyResize=function(e){e.resize(this.updateOptions.updateOptions.viewport)},r.prototype.buildMultipleInfo=function(e){var t=this;T.fF.assert(function(){return t.updateOptions.isSmallMultiples},"isSmallMultiples"),T.fF.assert(function(){return!!t.updateOptions.reader},"reader");var a=this.updateOptions.reader;if(a){var i=a.getFrameNode(e),n=a.getFrameSourceColumns().map(function(s,o){return{metadata:s,value:i.levelValues[o].value}});return{identity:i.identity,sources:n,isCoreMultiple:0===e}}},r}(),fs=function(){function r(e,t,a,i,n,s,o){this.smallMultiples=e,this.index=t,this.featureSwitches=a,this.layers=i,this.type=n,this.interactivityService=s,this.getLayerInitOptions=o,this.state=0}return r.create=function(e,t,a,i,n,s,o){return new r(e,t,a,n,s,i,o)},r.prototype.getDataPoint=function(){if(!this.dataPoint){var e=this.multipleInfo,t=_.first(e.sources).metadata.queryName,a=e.sources.map(function(n){return(0,z.Y)(n.metadata,n.value,e.identity)}),i=(new z.dw).withColumnIdentity(e.identity,t,a).createSelectionId();this.dataPoint={selected:!1,identity:i},this.interactivityService&&this.interactivityService.applySelectionStateToData([this.dataPoint])}return this.dataPoint},r.prototype.getIndex=function(){return this.index},r.prototype.isSelected=function(){return this.getDataPoint().selected},r.prototype.getState=function(){return this.state},r.prototype.initRenderer=function(e){var t=this;T.fF.assert(function(){return!(2&t.getState())},"`initRenderer` was called when there was already a renderer"),this.renderer=e;var a=this.getLayerInitOptions(e);this.layers.forEach(function(i){return i.initRenderer(a)}),this.state|=2},r.prototype.getRenderer=function(){var e=this;return T.fF.assert(function(){return!!(2&e.getState())},"`getRenderer` was called before a renderer was set"),this.renderer},r.prototype.initData=function(e){var t=this;T.fF.assert(function(){return!(1&t.getState())},"`initData` multiple times"),this.layers.forEach(function(a){var i;return null===(i=a.initData)||void 0===i?void 0:i.call(a,e)}),this.style=e.style,this.state|=1},r.prototype.update=function(e){var t=this;T.fF.assert(function(){return!!(1&t.getState())},"update was called before `initData`"),this.dataViews=e.dataViews,this.multipleInfo=e.multipleInfo,this.dataPoint=void 0,this.adapterFactory=e.adapterFactory;var a=this.layers;return this.responsiveData=void 0,this.data=su.convert({layerStyle:this.style,chartType:this.type,dataViews:e.dataViews,layers:a,featureSwitches:this.featureSwitches,hasDataChanged:null!=e.operationKind,multipleInfo:e.multipleInfo}),this.data},r.prototype.isVisible=function(){return!!(2&this.state)},r.prototype.hasInitializedData=function(){return!!(1&this.state)},r.prototype.getMultipleInfo=function(){return this.multipleInfo},r.prototype.applySynchronizedDomains=function(e){var t=this.data&&this.data.axesData;if(e&&t){var a=function(v,y){v&&y.includeDomains.push((0,P.createScalarDomainOptions)(v,1))},i=t.categoryAxis,n=t.valueAxis,s=t.secondaryValueAxis,l=e.valueAxis,u=e.secondaryValueAxis;a(e.categoryAxis,i),i&&n&&(i.sharedAxis||!i.scaleToFit)&&(n.sharedAxis||!n.scaleToFit)&&(a(l,n),a(u,s))}},r.prototype.resize=function(e){if(this.adapterFactory&&this.data){var a=this.adapterFactory.createCartesianAdapter({cartesianData:this.data,dataView:this.dataViews[0],viewport:e,isCoreMultiple:!this.multipleInfo||this.multipleInfo.isCoreMultiple});this.responsiveData=a.getData()}},r.prototype.getCapabilities=function(){var e={domainAggregateRoles:[],supportedDomainAggregates:void 0},t={domainAggregateRoles:[],supportedDomainAggregates:void 0},a={domainAggregateRoles:[],supportedDomainAggregates:void 0};return this.layers.forEach(function(i){var n=i.getCartesianVisualCapabilities();if(n.axesCapabilities){var s=n.axesCapabilities,o=s.categoryAxis,l=s.valueAxis,u=s.secondaryValueAxis,c=function(y,m){!y||!y.domainAggregateRole||(m.domainAggregateRoles.push(y.domainAggregateRole),void 0===m.supportedDomainAggregates?m.supportedDomainAggregates=y.supportedDomainAggregates:m.supportedDomainAggregates&=y.supportedDomainAggregates)};T.fF.assertValue(o,"layerCategoryAxisCapabilities"),c(o,e),c(l,t),c(u,a)}else T.fF.log("All small-multiples layers must provide `axesCapabilities`")}),{axesCapabilities:{categoryAxis:_.isEmpty(e.domainAggregateRoles)?void 0:(0,d.__assign)((0,d.__assign)({},e),{domainAggregateRoles:_.uniq(e.domainAggregateRoles)}),valueAxis:_.isEmpty(t.domainAggregateRoles)?void 0:(0,d.__assign)((0,d.__assign)({},t),{domainAggregateRoles:_.uniq(t.domainAggregateRoles)}),secondaryValueAxis:_.isEmpty(a.domainAggregateRoles)?void 0:(0,d.__assign)((0,d.__assign)({},a),{domainAggregateRoles:_.uniq(a.domainAggregateRoles)})}}},r.prototype.getAxesDomains=function(e,t){for(var a={},i=0;i<this.layers.length;i++){var n=this.layers[i];if(n.getAxesDomains){var s=n.getAxesDomains(e,t);s.categoryAxis&&(a.categoryAxis=(0,P.mergeDomains)(a.categoryAxis||p.be,s.categoryAxis)),s.valueAxis&&(i>0&&(0,p.LQ)(this.type)?a.secondaryValueAxis=(0,P.mergeDomains)(a.secondaryValueAxis||p.be,s.valueAxis):a.valueAxis=(0,P.mergeDomains)(a.valueAxis||p.be,s.valueAxis)),s.secondaryValueAxis&&(a.secondaryValueAxis=(0,P.mergeDomains)(a.secondaryValueAxis||p.be,s.secondaryValueAxis))}else T.fF.assertFail("getAxesDomains does not exist")}return a},r.prototype.getData=function(){return this.responsiveData||this.data},r.prototype.clearSelection=function(){for(var e=0,t=this.layers.length;e<t;e++)this.layers[e].onClearSelection()},r.prototype.updateLayers=function(){this.layers.forEach(function(e){return e.render(!0)})},r.prototype.destroy=function(){var e=this;this.renderer&&(T.fF.assert(function(){return!!(2&e.getState())},"`destroy` was called before we had a renderer"),this.renderer.destroy())},r}(),vu=b(54365),fu=function(){function r(e,t,a,i){this.type=e,this.featureSwitches=t,this.layerFactory=a,this.getLayerInitRendererOptions=i,this.multiples=[]}return r.prototype.init=function(e,t){var a=this;this.rowLoadMoreDataHandler=new Qe.J(e.host),this.updateFactory=new du({layerInitDataOptions:e,updateGlobalAxesDomains:function(n){return a.updateGlobalAxesDomains(n)}}),this.interactivityService=t,this.multiples=[]},r.prototype.getObjects=function(){return this.reader?this.reader.getObjects():void 0},r.prototype.getCoreMultiple=function(){return this.coreMultiple||(this.coreMultiple=fs.create(this,0,this.featureSwitches,this.interactivityService,this.layerFactory(),this.type,this.getLayerInitRendererOptions)),this.coreMultiple},r.prototype.getShouldResetRowMultipleScrollPosition=function(){return this.shouldResetRowMultipleScrollPosition},r.prototype.get=function(e){var t=this;if(T.fF.assert(function(){return t.isSmallMultiples()||0===e},"Non-small multiples only supports 0 index"),!this.isSmallMultiples())return this.getCoreMultiple();if(T.fF.assertValue(this.multipleUpdate,"Can not get multiple value before having an update"),null==this.multipleUpdate)return this.getCoreMultiple();var a=this.multiples[e];if(!a)for(var i=function(l){T.fF.assert(function(){return l===t.multiples.length},"Multiples should only be added to the end"),a=n.multiples[l]=fs.create(n,l,n.featureSwitches,n.interactivityService,n.layerFactory(),n.type,n.getLayerInitRendererOptions);var u=n.multipleUpdate;u.apply(a,n.type),n.isSmallMultiples()&&u.applySynchronizedAxes(a,n.axesDomains),u.applyResize(a)},n=this,s=this.multiples.length;s<=e;s++)i(s);return a},r.prototype.clear=function(){this.getMultiples(!0).forEach(function(e){return e.destroy()}),this.multiples=[],this.coreMultiple=void 0,this.axesDomains=void 0,this.shouldResetRowMultipleScrollPosition=void 0,this.multipleUpdate=void 0},r.prototype.resize=function(e){this.getMultiples(!0).forEach(function(t){return t.resize(e)})},r.prototype.update=function(e){var t=e.dataViews;this.updateOptions=e;var a,i=this.isSmallMultiples(t);this.shouldResetRowMultipleScrollPosition=!e.preserveScrollPosition;var n=this.getCoreMultiple();i?(this.reader=vu.p.create(t[0],la.e0.formatString),this.updateFactory.create({dataViews:e.dataViews,isSmallMultiples:i,reader:this.reader,requestedPerMultipleAxisDomains:void 0,updateOptions:e}).apply(n,this.type),(!e.preserveScrollPosition||e.formatMode)&&(this.lastUpdatedFrameIndex=0,this.axesDomains=void 0,this.requestPerMultipleAxisDomains=this.updateSynchronizedDomainsFromAggregates()),a=this.reader.getFrameCount(),this.rowLoadMoreDataHandler.updateDataView(e.dataViews[0]),this.rowLoadMoreDataHandler.onLoadMoreDataCompleted()):(this.reader=void 0,this.lastUpdatedFrameIndex=0,this.axesDomains=void 0,a=1,this.rowLoadMoreDataHandler.updateDataView(void 0),this.rowLoadMoreDataHandler.onLoadMoreDataCompleted()),this.multipleUpdate=this.updateFactory.create({dataViews:e.dataViews,isSmallMultiples:i,reader:this.reader,requestedPerMultipleAxisDomains:this.requestPerMultipleAxisDomains,updateOptions:e}),this.updateMultiples(a)},r.prototype.updateMultiples=function(e){for(var t=this,a=this.multiples,i=this.multipleUpdate,s=this.isSmallMultiples(this.updateOptions.dataViews),o=this.getCoreMultiple(),l=this.requestPerMultipleAxisDomains,u={startIndex:this.lastUpdatedFrameIndex,endIndex:e},c=function(w){var C=s?a[w]:o;!C&&l&&(T.fF.assert(function(){return w===a.length},"Multiples should only be added to the end"),C=a[w]=fs.create(v,w,v.featureSwitches,v.interactivityService,v.layerFactory(),v.type,v.getLayerInitRendererOptions)),C&&i.apply(C,v.type)},v=this,y=u.startIndex;y<u.endIndex;y++)c(y);this.getMultiples(!0).forEach(function(m){m&&(s&&i.applySynchronizedAxes(m,t.axesDomains),i.applyResize(m))}),this.lastUpdatedFrameIndex=u.endIndex},r.prototype.updateSynchronizedDomainsFromAggregates=function(){var e,v,t=this.getCoreMultiple(),i=t.getCapabilities().axesCapabilities,n=i.categoryAxis,s=i.valueAxis,o=i.secondaryValueAxis,l_categoryAxis=!!(2&n.supportedDomainAggregates),l_valueAxis=!!(2&s.supportedDomainAggregates),l_secondaryValueAxis=!!(o&&2&o.supportedDomainAggregates),u={categoryAxis:!!(1&n.supportedDomainAggregates),valueAxis:!!(1&s.supportedDomainAggregates),secondaryValueAxis:!!(o&&1&o.supportedDomainAggregates)};if(l_categoryAxis||l_valueAxis||l_secondaryValueAxis){var y=this.getTopLevelDomains(i);y&&(v={categoryAxis:l_categoryAxis?y.categoryAxis:void 0,valueAxis:l_valueAxis?y.valueAxis:void 0,secondaryValueAxis:l_secondaryValueAxis?y.secondaryValueAxis:void 0})}this.axesDomains=v;var m=null===(e=t.getData())||void 0===e?void 0:e.axesData,w=m&&!m.valueAxis.sharedAxis,C={categoryAxis:u.categoryAxis&&(!v||_.isEmpty(v.categoryAxis)),valueAxis:u.valueAxis&&(!v||_.isEmpty(v.valueAxis)||w),secondaryValueAxis:u.secondaryValueAxis&&(!v||_.isEmpty(v.secondaryValueAxis))};return _.every(C,function(D){return!D})?void 0:C},r.prototype.isSmallMultiples=function(e){return!(!e&&!this.updateOptions)&&(0,p.sI)(e=e||this.updateOptions.dataViews)},r.prototype.clearSelection=function(e){this.getMultiples(!0).forEach(function(t){return t.clearSelection()}),this.executeActionForMultiplesInRange(function(t){return t.updateLayers()},e,!1)},r.prototype.checkIfNoLabelsCanBeRendered=function(){return _.every(this.getMultiples(),function(e){return e.isVisible()&&e.getRenderer().noLabelsCanBeRendered})},r.prototype.scrollTo=function(e,t){this.executeActionForMultiplesInRange(function(a){return a.getRenderer().axesRenderer.scrollTo(e)},t,!1)},r.prototype.shouldScrollTo=function(e,t){return!!this.getValueForFirstMultipleInRange(function(a){return a.getRenderer().axesRenderer.shouldScrollTo(e)},t,!1)},r.prototype.scrollBy=function(e,t){this.executeActionForMultiplesInRange(function(a){return a.getRenderer().axesRenderer.scrollBy(e)},t,!1)},r.prototype.scrollDelta=function(e,t){this.executeActionForMultiplesInRange(function(a){return a.getRenderer().axesRenderer.scrollDelta(e)},t,!1)},r.prototype.clearRenderingTimeout=function(){this.getMultiples().forEach(function(e){return e.isVisible()&&e.getRenderer().axesRenderer.clearRenderingTimeout()})},r.prototype.updateScrollbarExtent=function(e,t){this.executeActionForMultiplesInRange(function(a){return a.getRenderer().axesRenderer.setExtent(e)},t,!1)},r.prototype.executeActionForMultiplesInRange=function(e,t,a){var i=this.getMultiples(a,t);_.isEmpty(i)||i.forEach(function(n){return e(n)})},r.prototype.getValueForFirstMultipleInRange=function(e,t,a){var i=this.getMultiples(a,t);if(!_.isEmpty(i))return e(i[0])},r.prototype.getFrameCount=function(){return this.isSmallMultiples()?this.reader.getFrameCount():1},r.prototype.updateGlobalAxesDomains=function(e){var t=this.axesDomains=this.axesDomains||{};e.categoryAxis&&(t.categoryAxis=(0,P.mergeDomains)(t.categoryAxis||p.be,e.categoryAxis)),e.valueAxis&&(t.valueAxis=(0,P.mergeDomains)(t.valueAxis||p.be,e.valueAxis)),e.secondaryValueAxis&&(t.secondaryValueAxis=(0,P.mergeDomains)(t.secondaryValueAxis||p.be,e.secondaryValueAxis))},r.prototype.getTopLevelDomains=function(e){var t=this.reader;T.fF.assertValue(t,"this.reader");var o,l,u,a=e.categoryAxis,i=e.valueAxis,n=e.secondaryValueAxis,s=function(w){var C=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(var D in w)for(var F=function(pe){var q=pe.min,ee=pe.max;if(!(_.isDate(q)||_.isNumber(q)&&isFinite(q))||!(_.isDate(ee)||_.isNumber(ee)&&isFinite(ee)))return"continue";T.fF.assert(function(){return!_.isDate(q)||(0,an.M4)(q)},"If min is a date, it should implement DateWithEpochValue"),T.fF.assert(function(){return!_.isDate(ee)||(0,an.M4)(ee)},"If max is a date, it should implement DateWithEpochValue"),(0,an.M4)(q)&&(0,an.M4)(ee)&&(q=q.epochTimeStamp,ee=ee.epochTimeStamp),C=(0,P.mergeDomains)(C,[+q,+ee])},N=0,U=w[D];N<U.length;N++)F(U[N]);return C};if(2&a.supportedDomainAggregates){var c=t.getTopLevelAggregates(a.domainAggregateRoles);o=c?s(c):void 0}if(2&i.supportedDomainAggregates){var v=t.getTopLevelAggregates(i.domainAggregateRoles);l=v?s(v):void 0}if(n&&2&n.supportedDomainAggregates){var y=n&&t.getTopLevelAggregates(n.domainAggregateRoles);u=y?s(y):void 0}return o||l||u?{categoryAxis:o,valueAxis:l,secondaryValueAxis:u}:void 0},r.prototype.getMultiples=function(e,t){void 0===e&&(e=!1);var a=[],i=this.isSmallMultiples();if(!i||e){var n=this.getCoreMultiple();n&&a.push(n)}if(i){var s=this.multiples;t&&(s=s.slice(t.startIndex,Math.min(t.endIndex,s.length))),a.push.apply(a,s)}return a},r}(),Ri=b(30053),gu_size=[{breakpoint:240,maxSizePt:9},{breakpoint:320,maxSizePt:12},{breakpoint:460,maxSizePt:16},{breakpoint:540,maxSizePt:24}],Hr=function(){function r(){this.lastViewportSeen=void 0,this.lastResolvedFontSizePt=void 0}return r.prototype.adjustFontSize=function(e,t){var a=this.resolveMaxFontSizePtForViewport(e);return a>=t.size.pt?t:this.copyWithNewFontSize(t,a)},r.prototype.getFontSizeSeriesLabelWarning=function(e,t){var a=this.getFontSizeLabelWarning(e.dataLabelsSettings,t.dataLabelsSettings);if(a)return a;if(e.series&&t.series){T.fF.assert(function(){return e.series.length===t.series.length},"Series are expected to be equal");for(var i=e.series,n=t.series,s=0;s<i.length;s++)if(a=this.getFontSizeLabelWarning(i[s].labelSettings,n[s].labelSettings))return a}},r.prototype.getFontSizeLabelWarning=function(e,t){if(e&&t){if(!_.isEqual(e.fontProperties.size,t.fontProperties.size))return{selector:null,warnings:[new ze.er]};T.fF.assert(function(){return e.labelOverflow===t.labelOverflow},"Overflow switch should remain as is if no changes in label font size")}else T.fF.assert(function(){return e===t},"It's expected that both settings would be undefined / null")},r.prototype.resolveMaxFontSizePtForViewport=function(e){if(this.lastViewportSeen===e)return this.lastResolvedFontSizePt;for(var t=Ne.PR,a=0,i=gu_size;a<i.length;a++){var n=i[a];if(e.height<n.breakpoint||e.width<n.breakpoint){t=n.maxSizePt;break}}return this.lastViewportSeen=e,this.lastResolvedFontSizePt=t,t},r.prototype.copyWithNewFontSize=function(e,t){var a=M.B.createFromPt(t);return(0,J.ED)(e,{size:a})},r}(),pu=function(){function r(e){this.responsiveFontHelper=new Hr,this.originalData=e.data,this.dataView=e.dataView,this.viewport=e.viewport}return r.prototype.getData=function(){var t,e=this.originalData;return t=Ri.a.shouldApplyResponsiveChanges(this.dataView,K.p)?this.applyResponsiveChanges(this.viewport,e):e,this.currentData=t,t},r.prototype.getCartesianChartLayerType=function(){return 4},r.prototype.addWarnings=function(e){var t=this.originalData,a=this.currentData;if(t&&a){var i=this.responsiveFontHelper.getFontSizeSeriesLabelWarning(t,a),n=this.responsiveFontHelper.getFontSizeLabelWarning(t.totalLabelsSettings,a.totalLabelsSettings);i&&e.addForVisualObject("labels",i),n&&e.addForVisualObject("totals",n)}},r.prototype.applyResponsiveChanges=function(e,t){var a=(0,xe.ED)(t);return this.applyDataLabelFontSizesChanges(e,a),this.applySeriesDataLabelFontSizeChanges(e,a),this.applyTotalLabelFontSizesChanges(e,a),a},r.prototype.applyDataLabelFontSizesChanges=function(e,t){t.dataLabelsSettings=(0,xe.ED)(t.dataLabelsSettings),this.updateLabelSettings(e,t.dataLabelsSettings)},r.prototype.applySeriesDataLabelFontSizeChanges=function(e,t){for(var a=t.series=(0,xe.ED)(t.series),i=0;i<a.length;i++)if(a[i].labelSettings){var n=a[i]=(0,xe.ED)(a[i]);n.labelSettings=(0,xe.ED)(n.labelSettings),this.updateLabelSettings(e,n.labelSettings)}},r.prototype.applyTotalLabelFontSizesChanges=function(e,t){t.totalLabelsSettings&&(t.totalLabelsSettings=(0,xe.ED)(t.totalLabelsSettings),this.updateLabelSettings(e,t.totalLabelsSettings))},r.prototype.updateLabelSettings=function(e,t){var a=t.fontProperties;t.fontProperties=this.responsiveFontHelper.adjustFontSize(e,t.fontProperties),a!==t.fontProperties&&(t.labelOverflow=!0)},r}(),yu=function(){function r(e){this.responsiveFontHelper=new Hr,this.originalData=e.data,this.viewport=e.viewport,this.dataView=e.dataView}return r.prototype.getData=function(){var t,e=this.originalData;return t=Ri.a.shouldApplyResponsiveChanges(this.dataView,K.p)?this.applyResponsiveChanges(this.viewport,e):e,this.currentData=t,t},r.prototype.getCartesianChartLayerType=function(){return 0},r.prototype.addWarnings=function(e){var t=this.originalData,a=this.currentData;if(t&&a){var i=this.responsiveFontHelper.getFontSizeSeriesLabelWarning(t,a),n=this.responsiveFontHelper.getFontSizeLabelWarning(t.totalLabelsSettings,a.totalLabelsSettings);i&&e.addForVisualObject("labels",i),n&&e.addForVisualObject("totals",n)}},r.prototype.applyResponsiveChanges=function(e,t){var a=(0,xe.ED)(t);return this.applyDataLabelFontSizesChanges(e,a),this.applySeriesDataLabelFontSizeChanges(e,a),this.applyTotalLabelFontSizesChanges(e,a),a},r.prototype.applyDataLabelFontSizesChanges=function(e,t){t.dataLabelsSettings=(0,xe.ED)(t.dataLabelsSettings),this.updateLabelSettings(e,t.dataLabelsSettings)},r.prototype.applySeriesDataLabelFontSizeChanges=function(e,t){for(var a=t.series=(0,xe.ED)(t.series),i=0;i<a.length;i++)if(a[i].labelSettings){var n=a[i]=(0,xe.ED)(a[i]);n.labelSettings=(0,xe.ED)(n.labelSettings),this.updateLabelSettings(e,n.labelSettings)}},r.prototype.applyTotalLabelFontSizesChanges=function(e,t){t.totalLabelsSettings&&(t.totalLabelsSettings=(0,xe.ED)(t.totalLabelsSettings),this.updateLabelSettings(e,t.totalLabelsSettings))},r.prototype.updateLabelSettings=function(e,t){t.fontProperties=this.responsiveFontHelper.adjustFontSize(e,t.fontProperties)},r}(),mu=function(){function r(e){this.responsiveFontHelper=new Hr,this.originalData=e.data,this.viewport=e.viewport,this.dataView=e.dataView}return r.prototype.getData=function(){var t,e=this.originalData;return t=Ri.a.shouldApplyResponsiveChanges(this.dataView,K.p)?this.applyResponsiveChanges(this.viewport,e):e,this.currentData=t,t},r.prototype.getCartesianChartLayerType=function(){return 2},r.prototype.addWarnings=function(e){var t=this.originalData,a=this.currentData;if(t&&a){var i=this.responsiveFontHelper.getFontSizeLabelWarning(t.dataLabelsSettings,a.dataLabelsSettings);i&&e.addForVisualObject("categoryLabels",i)}},r.prototype.applyResponsiveChanges=function(e,t){var a=(0,xe.ED)(t);return this.applyDataLabelFontSizesChanges(e,a),a},r.prototype.applyDataLabelFontSizesChanges=function(e,t){t.dataLabelsSettings=(0,xe.ED)(t.dataLabelsSettings),t.dataLabelsSettings.fontProperties=this.responsiveFontHelper.adjustFontSize(e,t.dataLabelsSettings.fontProperties)},r}(),Su=function(){function r(e){this.responsiveFontHelper=new Hr,this.originalData=e.data,this.viewport=e.viewport,this.dataView=e.dataView}return r.prototype.getData=function(){var t,e=this.originalData;return t=Ri.a.shouldApplyResponsiveChanges(this.dataView,K.p)?this.applyResponsiveChanges(this.viewport,e):e,this.currentData=t,t},r.prototype.getCartesianChartLayerType=function(){return 3},r.prototype.addWarnings=function(e){var t=this.originalData,a=this.currentData;if(t&&a){var i=this.responsiveFontHelper.getFontSizeLabelWarning(t.dataLabelsSettings,a.dataLabelsSettings);i&&e.addForVisualObject("labels",i)}},r.prototype.applyResponsiveChanges=function(e,t){var a=(0,xe.ED)(t);return this.applyDataLabelFontSizesChanges(e,a),a},r.prototype.applyDataLabelFontSizesChanges=function(e,t){t.dataLabelsSettings=(0,xe.ED)(t.dataLabelsSettings),t.dataLabelsSettings.fontProperties=this.responsiveFontHelper.adjustFontSize(e,t.dataLabelsSettings.fontProperties)},r}(),xu=function(){function r(e,t){switch(this.layerType=e,e){case 4:this.adapter=new pu(t);break;case 0:this.adapter=new yu(t);break;case 2:this.adapter=new mu(t);break;case 3:this.adapter=new Su(t);break;default:T.fF.assertFail("Unsupported chart type for view model adapter")}}return r.prototype.getData=function(){return this.adapter.getData()},r.prototype.getCartesianChartLayerType=function(){return this.layerType},r.prototype.addWarnings=function(e){return this.adapter.addWarnings(e)},r}(),Xs=b(70700),tr_legendWidth=76,tr_legendHeight=58,tr_axesTitleWidth=128,tr_axesTitleHeight=58,tr_axesHeight=58,tr_axesMedWidth=128,tr_axesWidth=76,tr_maxWidthForMediumFont=180,tr_maxWidthForSmallFont=128;function Zs(r,e){var t=r.warningObjectCollection,a={},i=r.legendData,n=e.legendData;if(r.showIcon)a.legend=new ze.ni,a.categoryAxis=new ze.Mk,a.valueAxis=new ze.Mk;else{i.show!==n.show?a.legend=new ze.ni:i.position!==n.position?a.legend=new ze.TS:_.isEqual(i.fontProperties.size,n.fontProperties.size)||(a.legend=new ze.p7("fontSize"));var s=r.axesData,o=e.axesData,l=s.categoryAxis,u=o.categoryAxis,c=!_.isEqual(l.labelFontProperties.size,u.labelFontProperties.size),v=!_.isEqual(l.titleFontProperties.size,u.titleFontProperties.size);l.show!==u.show?a.categoryAxis=new ze.Mk:l.showAxisTitle!==u.showAxisTitle?a.categoryAxis=new ze.fk:(c||v)&&(a.categoryAxis=new ze.Dr(c?"fontSize":"titleFontSize"));var y=s.valueAxis,m=o.valueAxis,w=!_.isEqual(y.labelFontProperties.size,m.labelFontProperties.size),C=!_.isEqual(y.titleFontProperties.size,m.titleFontProperties.size);y.show!==m.show?a.valueAxis=new ze.Mk:y.showAxisTitle!==m.showAxisTitle?a.valueAxis=new ze.fk:(w||C)&&(a.valueAxis=new ze.Dr(w?"fontSize":"titleFontSize"));var D=r.zoomData,O=e.zoomData;(D.showOnCategoryAxis!==O.showOnCategoryAxis||D.showOnValueAxis!==O.showOnValueAxis||D.showOnValueSecAxis!==O.showOnValueSecAxis)&&(a.zoom=new ze.JG)}for(var F in a)t.addForVisualObject(F,{selector:null,warnings:[a[F]]})}var Du=function(){function r(e){this.viewport=e.viewport,this.cartesianData=e.cartesianData,this.dataView=e.dataView,this.responsiveFontHelper=new Hr}return r.prototype.getData=function(){var e=Ri.a.getResponsiveVisualProperties(this.dataView,K.p),t=e.responsive,a=e.responsiveLegacy,i=this.cartesianData;return(t||a)&&(i=this.createResponsiveData(t,a)),i},r.prototype.getResponsiveSlice=function(e,t){var a=K.p.general,i=Ri.a.getResponsiveVisualProperties(e,K.p);return{item:new ge.vi({uidBuilder:new ge.IN(new ge.SS(new ge.lg("visualPlaceholderCard"),"visualPlaceholderGroup"),"responsive"),control:new ge.bd({descriptor:a.responsive,value:i.responsive}).build(),localize:t}).build(),revertToDefaultDescriptors:[a.responsive]}},r.prototype.createResponsiveData=function(e,t){var a=Ri.a.cloneData(this.cartesianData);return e?(this.applyIconResponsiveChanges(a),this.applyLegendResponsiveChanges(this.viewport,a.legendData.position,a),this.applyAxesResponsiveChanges(this.viewport,a),this.applyZoomSliderResponsiveChanges(this.viewport,a),this.applyFontSizesChanges(this.viewport,a),a.scrollbarOptions=r.ScrollbarOptions):t&&function(r,e){(function(r,e){var t=e.axesData;if(r.height<=tr_axesTitleHeight&&(t.x.showAxisTitle=!1,t.y.showAxisTitle=!1,t.y2.showAxisTitle=!1),r.width<=tr_axesTitleWidth&&(t.y.showAxisTitle=!1,t.y2.showAxisTitle=!1),r.height<=tr_axesHeight&&(t.x.show=!1),r.width<=tr_axesWidth&&(t.y.show=!1,t.y2.show=!1),r.width<=tr_axesMedWidth&&(0,aa.cB)(e.legendData.position)&&(t.y.show=!1,t.y2.show=!1),r.width<=tr_maxWidthForMediumFont){var a={x:{tickLabels:p.CI,title:p.CI},y:{tickLabels:p.lc,title:p.lc},y2:{tickLabels:p.lc,title:p.lc}};r.width<=tr_maxWidthForSmallFont&&(a.y.tickLabels=p.yo,a.y.title=p.yo,a.y2.tickLabels=p.yo,a.y2.title=p.yo),t.x.titleFontProperties=(0,J.ED)(t.x.titleFontProperties,{size:M.B.createFromPx(a.x.title)}),t.y.titleFontProperties=(0,J.ED)(t.y.titleFontProperties,{size:M.B.createFromPx(a.y.title)}),t.y2.titleFontProperties=(0,J.ED)(t.y2.titleFontProperties,{size:M.B.createFromPx(a.y2.title)}),t.x.labelFontProperties=(0,J.ED)(t.x.labelFontProperties,{size:M.B.createFromPx(a.x.tickLabels)}),t.y.labelFontProperties=(0,J.ED)(t.y.labelFontProperties,{size:M.B.createFromPx(a.y.tickLabels)}),t.y2.labelFontProperties=(0,J.ED)(t.y2.labelFontProperties,{size:M.B.createFromPx(a.y2.tickLabels)})}})(r,e),function(r,e){var t=e.legendData.position,a=r.width<=tr_legendWidth&&(0,aa.cB)(t),i=r.height<=tr_legendHeight&&(0,aa.s0)(t);if((a||i)&&(e.legendData.show=!1),r.width<=tr_maxWidthForMediumFont){var s,n=e.legendData.fontProperties.size.pt;s=r.width<=tr_maxWidthForSmallFont?Math.min(n,Pt.hD):Math.min(n,Pt.vs),e.legendData.fontProperties=(0,J.ED)(e.legendData.fontProperties,{size:M.B.createFromPt(s)})}}(r,e)}(this.viewport,a),Zs(a,this.cartesianData),a},r.prototype.applyIconResponsiveChanges=function(e){e.showIcon=this.viewport.height<=50||this.viewport.width<=50},r.prototype.applyLegendResponsiveChanges=function(e,t,a){(e.width<210||e.height<100)&&(0,aa.cB)(t)&&(a.legendData.position=Xs.tV.Top),(e.height<70||e.width<80)&&(a.legendData.show=!1),a.legendData.useLargeArrowHitArea=!0},r.prototype.applyAxesResponsiveChanges=function(e,t){e.height<100&&(t.axesData.x.show=!1),e.width<210&&(t.axesData.y.showAxisTitle=!1,t.axesData.y2.showAxisTitle=!1),e.width<100&&(t.axesData.y.show=!1,t.axesData.y2.show=!1),e.height<145&&(t.axesData.x.showAxisTitle=!1)},r.prototype.applyZoomSliderResponsiveChanges=function(e,t){(e.height<150||e.width<280)&&(t.zoomData.showOnCategoryAxis=!1,t.zoomData.showOnValueAxis=!1,t.zoomData.showOnValueSecAxis=!1)},r.prototype.applyFontSizesChanges=function(e,t){t.legendData&&t.legendData.fontProperties&&(t.legendData.fontProperties=this.responsiveFontHelper.adjustFontSize(e,t.legendData.fontProperties));var a=t.axesData;a.x.labelFontProperties=this.responsiveFontHelper.adjustFontSize(e,a.x.labelFontProperties),a.x.titleFontProperties=this.responsiveFontHelper.adjustFontSize(e,a.x.titleFontProperties),a.y.labelFontProperties=this.responsiveFontHelper.adjustFontSize(e,a.y.labelFontProperties),a.y.titleFontProperties=this.responsiveFontHelper.adjustFontSize(e,a.y.titleFontProperties),a.y2.labelFontProperties=this.responsiveFontHelper.adjustFontSize(e,a.y2.labelFontProperties),a.y2.titleFontProperties=this.responsiveFontHelper.adjustFontSize(e,a.y2.titleFontProperties)},r.ScrollbarOptions={scrollbarWidth:8,scrollbarRadius:4,scrollbarClass:"responsive"},r}(),_u=function(){function r(e,t){this.smallMultiplesOptions=t,this.cartesianData=e.cartesianData,this.dataView=e.dataView,this.isCoreMultiple=e.isCoreMultiple,this.responsiveFontHelper=new Hr}return r.prototype.getData=function(){var e=this.cartesianData;return this.smallMultiplesOptions.isSmallMultiples?(Ri.a.getResponsiveVisualProperties(this.dataView,K.p).responsive&&(e=this.applyResponsiveChanges(this.cartesianData,this.smallMultiplesOptions)),e):(T.fF.assertFail("Adapter does not support non-small multiples"),e)},r.prototype.getResponsiveSlice=function(e,t){},r.prototype.applyResponsiveChanges=function(e,t){var a=Ri.a.cloneData(e),i=function(r){var e=r.columns,t=r.rows;return{legendPositionHeight:120+30*t,legendPositionWidth:210+40*e,legendShowHeight:90+30*t,legendShowWidth:90+40*e,removeXAxisTitleHeight:165+30*t,removeXAxisHeight:120+30*t,removeYAxisTitleWidth:210+40*e,removeYAxisWidth:120+40*e}}(t),n=t.viewport;return this.applyAxesResponsiveChanges(i,n,a),this.applyLegendResponsiveChanges(i,n,a),this.applyFontSizeResponsiveChanges(n,a),this.isCoreMultiple&&Zs(a,e),a},r.prototype.applyAxesResponsiveChanges=function(e,t,a){var i=t.height,n=t.width;i<e.removeXAxisTitleHeight&&(a.axesData.x.showAxisTitle=!1),i<e.removeXAxisHeight&&(a.axesData.x.show=!1,a.axesData.x.showAxisTitle=!1),n<e.removeYAxisTitleWidth&&(a.axesData.y.showAxisTitle=!1,a.axesData.y2.showAxisTitle=!1),n<e.removeYAxisWidth&&(a.axesData.y.show=!1,a.axesData.y2.show=!1,a.axesData.y.showAxisTitle=!1,a.axesData.y2.showAxisTitle=!1)},r.prototype.applyLegendResponsiveChanges=function(e,t,a){if(a.legendData.show){var n=t.height,s=t.width;(n<e.legendPositionHeight||s<e.legendPositionWidth)&&(0,aa.cB)(a.legendData.position)&&(a.legendData.position=Xs.tV.Top),(n<e.legendShowHeight||s<e.legendShowWidth)&&(a.legendData.show=!1),a.legendData.useLargeArrowHitArea=!0}},r.prototype.applyFontSizeResponsiveChanges=function(e,t){t.legendData&&t.legendData.fontProperties&&(t.legendData.fontProperties=this.responsiveFontHelper.adjustFontSize(e,t.legendData.fontProperties));var a=t.axesData;a.x.labelFontProperties=this.responsiveFontHelper.adjustFontSize(e,a.x.labelFontProperties),a.x.titleFontProperties=this.responsiveFontHelper.adjustFontSize(e,a.x.titleFontProperties),a.y.labelFontProperties=this.responsiveFontHelper.adjustFontSize(e,a.y.labelFontProperties),a.y.titleFontProperties=this.responsiveFontHelper.adjustFontSize(e,a.y.titleFontProperties),a.y2.labelFontProperties=this.responsiveFontHelper.adjustFontSize(e,a.y2.labelFontProperties),a.y2.titleFontProperties=this.responsiveFontHelper.adjustFontSize(e,a.y2.titleFontProperties)},r}(),Lu=function(){function r(e,t){this.layerType=e,this.layerData=t.data}return r.prototype.getData=function(){return this.layerData},r.prototype.getCartesianChartLayerType=function(){return this.layerType},r.prototype.addWarnings=function(e){},r}(),Fr=120;function on(r,e,t){return T.fF.assert(function(){return r[0]>=r[1]},"breakpoints must be [max, min]"),T.fF.assert(function(){return e[0]>=e[1]},"outputRange must be [max, min]"),d3.scaleLinear().range(e).domain(r).clamp(!0)(t)}function qs(r){var e=r.rowCount,t=r.columnCount;return{showIconHeight:30*t,showIconWidth:40*e,showSubheaderHeight:80+50*e,gridlineRowUpperBreakpoint:Fr+52*e,gridlineRowLowerBreakpoint:Fr+32*e,gridlineColumnUpperBreakpoint:Fr+62*t,gridlineColumnLowerBreakpoint:Fr+42*t,removeGridLineHeight:32*e,removeGridLineWidth:42*t,paddingRowUpperBreakpoint:Fr+130*e,paddingRowLowerBreakpoint:Fr+30*e,paddingColumnUpperBreakpoint:Fr+140*t,paddingColumnLowerBreakpoint:Fr+40*t}}var Ru=function(){function r(e){this.multiplesLayout=e.multiplesLayout,this.multiplesSubheader=e.multiplesSubheader,this.dataView=e.dataView,this.viewport=e.viewport,this.responsiveFontHelper=new Hr}return r.prototype.getMultiplesLayout=function(e){var t=this.multiplesLayout;return Ri.a.getResponsiveVisualProperties(this.dataView,K.p).responsive&&(t=this.applyResponsiveChanges(this.viewport,this.multiplesLayout,e)),t},r.prototype.getMultiplesSubheader=function(e){var t=this.multiplesSubheader;return Ri.a.getResponsiveVisualProperties(this.dataView,K.p).responsive&&(t=this.applySubheaderResponsiveChanges(this.viewport,t,e)),t},r.prototype.getResponsiveSlice=function(e,t){var a=K.p.general,i=Ri.a.getResponsiveVisualProperties(e,K.p);return{item:new ge.vi({uidBuilder:new ge.IN(new ge.SS(new ge.lg("visualPlaceholderCard"),"visualPlaceholderGroup"),"responsive"),control:new ge.bd({descriptor:a.responsive,value:i.responsive}).build(),localize:t}).build(),revertToDefaultDescriptors:[a.responsive]}},r.prototype.applyResponsiveChanges=function(e,t,a){var i=Ri.a.cloneData(t),n=qs(i);return this.applyIconResponsiveChanges(n,e,i),this.applyGridlinesResponsiveChanges(n,e,i),this.applyPaddingResponsiveChanges(n,e,i),this.updateResponsiveWarnings(i,t,a),i},r.prototype.applyIconResponsiveChanges=function(e,t,a){(t.height<e.showIconHeight||t.width<e.showIconWidth)&&(a.showIcon=!0)},r.prototype.applyGridlinesResponsiveChanges=function(e,t,a){var i=a.gridline;if(null!=i?.strokeWidth){var n=i.strokeWidth,s=i.strokeWidth;if(t.height<e.removeGridLineHeight||t.width<e.removeGridLineWidth)return void(i.strokeWidth=0);if(t.height<=e.gridlineRowLowerBreakpoint||t.width<=e.gridlineColumnLowerBreakpoint)return void(i.strokeWidth=1);t.height<e.gridlineRowUpperBreakpoint&&(s=Math.ceil(on([e.gridlineRowUpperBreakpoint,e.gridlineRowLowerBreakpoint],[i.strokeWidth,1],t.height))),t.width<e.gridlineColumnUpperBreakpoint&&(n=Math.ceil(on([e.gridlineColumnUpperBreakpoint,e.gridlineColumnLowerBreakpoint],[i.strokeWidth,1],t.width))),i.strokeWidth=Math.min(n,s)}},r.prototype.applyPaddingResponsiveChanges=function(e,t,a){if(a.advancedPaddingOptions||0!==a.gridPadding){if(t.height<e.paddingRowUpperBreakpoint){var i=[e.paddingRowUpperBreakpoint,e.paddingRowLowerBreakpoint];a.rowPaddingOuter=a.rowPaddingOuter&&Math.ceil(on(i,[a.rowPaddingOuter,1],t.height)),a.rowPaddingInner=a.rowPaddingInner&&Math.ceil(on(i,[a.rowPaddingInner,1],t.height))}t.width<e.paddingColumnUpperBreakpoint&&(i=[e.paddingColumnUpperBreakpoint,e.paddingColumnLowerBreakpoint],a.columnPaddingOuter=a.columnPaddingOuter&&Math.ceil(on(i,[a.columnPaddingOuter,1],t.width)),a.columnPaddingInner=a.columnPaddingInner&&Math.ceil(on(i,[a.columnPaddingInner,1],t.width)))}},r.prototype.applySubheaderResponsiveChanges=function(e,t,a){var i=Ri.a.cloneData(t),n=qs(this.multiplesLayout);return e.height<n.showSubheaderHeight&&(i.show=!1),i.show&&i.fontProperties&&(i.fontProperties=this.responsiveFontHelper.adjustFontSize(e,i.fontProperties),i.height=i.fontProperties.size.px+i.margins.top+i.margins.bottom),this.updateSubheaderResponsiveWarnings(i,t,a),i},r.prototype.updateResponsiveWarnings=function(e,t,a){var i,n,s=a,o={};for(var l in e.showIcon?o.subheader=new ze.lC:((e.rowPaddingInner!==t.rowPaddingInner||e.rowPaddingOuter!==t.rowPaddingOuter||e.columnPaddingInner!==t.columnPaddingInner||e.columnPaddingOuter!==t.columnPaddingOuter)&&(o.smallMultiplesLayout=new ze.e),(null===(i=e.gridline)||void 0===i?void 0:i.strokeWidth)!==(null===(n=t.gridline)||void 0===n?void 0:n.strokeWidth)&&(o.smallMultiplesLayout=new ze.IX)),o)s.addForVisualObject(l,{selector:null,warnings:[o[l]]})},r.prototype.updateSubheaderResponsiveWarnings=function(e,t,a){var i=a,n={};for(var s in e.show!==t.show&&(n.subheader=new ze.lC),_.isEqual(e.fontProperties.size,t.fontProperties.size)||(n.subheader=new ze.W0),n)i.addForVisualObject(s,{selector:null,warnings:[n[s]]})},r}(),Iu=function(){function r(){}return r.prototype.createCartesianAdapter=function(e){return this.isSmallMultiples()?new _u(e,this.smallMultiplesOptions):new Du(e)},r.prototype.createLayerAdapter=function(e,t){return this.isSmallMultiples()?new Lu(e,t):new xu(e,t)},r.prototype.setSmallMultiplesOptions=function(e){this.smallMultiplesOptions=e},r.prototype.createSmallMultiplesAdapter=function(e){if(this.isSmallMultiples())return new Ru(e);T.fF.assertFail("Can not get SmallMultiplesAdapter for non-small multiples")},r.prototype.isSmallMultiples=function(){return this.smallMultiplesOptions&&this.smallMultiplesOptions.isSmallMultiples},r}(),Nu=function(){function r(e){var a,t=this;this.options=e,T.fF.assertValue(e,"CartesianConstructorOptions"),this.axes=new $t(null!==(a=e.isScrollable)&&void 0!==a&&a,Q.ScrollbarWidth,this.trimOrdinalDataOnOverflow),this.viewModelAdapterFactory=new Iu,this.layoutBuilder=new hn(e,this.axes,function(){return t.isPlayAxis()},function(){return t.smallMultiplesViewModelAdapter}),this.multiples=new fu(this.chartType,this.featureSwitches,function(){return function(r){switch(r.chartType){case 1:case 0:case 2:case 3:return[Ks(r)];case 15:return[new Ml((0,d.__assign)((0,d.__assign)({},r),{isScrollable:!1}))];case 11:return[new Fl((0,d.__assign)((0,d.__assign)({},r),{viewModelAdapterFactory:Gn(r,2)}))];case 12:return[new tu((0,d.__assign)((0,d.__assign)({},r),{viewModelAdapterFactory:Gn(r,3)}))];case 5:case 4:case 9:case 7:case 6:case 8:case 10:return[Ys(r)];case 13:case 14:return[Ys(r),Ks(r)];default:return T.fF.assertFail("Unknown CartesianChartType enum value"),[]}}((0,d.__assign)((0,d.__assign)({},t.options),{viewModelAdapterFactory:t.viewModelAdapterFactory,interactivityService:t.interactivityService}))},function(i){return t.getLayerRendererInitOptions(i)})}return Object.defineProperty(r.prototype,"featureSwitches",{get:function(){return this.options.featureSwitches||{}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"chartType",{get:function(){return this.options.chartType},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"trimOrdinalDataOnOverflow",{get:function(){var t;return null===(t=this.options.trimOrdinalDataOnOverflow)||void 0===t||t},enumerable:!1,configurable:!0}),r.prototype.init=function(e){var a,t=this;T.fF.assertValue(e,"CartesianChart.init(options)"),this.visualInitOptions=e;var i=e.element;this.currentViewport=e.viewport,this.hostServices=e.host,this.eventManager=new ot.B(d3.select(i.get(0))),this.categoryLoadMoreDataHandler=new to(null,this.hostServices),this.options.behaviorFactory&&(this.interactivityService=(0,j.ub)(this.hostServices,this.featureSwitches)),this.tooltipService=(0,vt.r)(e.host);var n=this.visualInitOptions.style,s=(0,xe.ED)(n);s.colorPalette=(0,xe.ED)(n.colorPalette),s.colorPalette.dataColors=new eo(n.colorPalette.dataColors),this.layerStyle=s;var o=new na({style:n,chartType:this.chartType});this.axisZoom=new B(i,this.hostServices,this.axes.isScrollable&&!!e.interactivity,this.featureSwitches),this.axes.init({axesData:o,axisZoom:this.axisZoom,interactivityService:this.interactivityService}),this.legend=(0,Pt.OG)(i,e.interactivity&&e.interactivity.mobileTileInteractive,12!==this.chartType?this.interactivityService:void 0,this.axes.isScrollable,void 0,n,this.hostServices);var l=(0,xe.ED)(e);if(l.style=s,l.services={tooltips:this.tooltipService},this.multiples.init(l,this.interactivityService),this.layoutBuilder.init(e,this.tooltipService,this.legend,o,this.interactivityService,this.layerStyle,this.multiples.rowLoadMoreDataHandler,this.eventManager),this.layout=this.layoutBuilder.create(this.visualInitOptions.element),this.isMobileChart=e.interactivity&&e.interactivity.mobileTileInteractive,this.featureSwitches.onObject){var c=(null===(a=this.hostServices)||void 0===a?void 0:a.getSubSelectionService())??kt.D.createWithDefaultHost();this.subSelectionHelper=We.O5.createHtmlSubselectionHelper({hostElement:i.get(0),hostServices:this.hostServices,renderer:c,targetSource:"format",scale:function(){return t.currentViewport.scale},selectorCallback:function(y){return t.getSelectorsByColumnSubSelection(y)},customOutlineCallback:function(y){return t.getSubSelectionCustomOutlines(y)},customElementCallback:function(y){return t.getSubSelectionCustomElements(y)},subSelectionMetadataCallback:function(y){return t.getSubSelectionMetadata(y)}}),this.interactivityService.setSubSelectionHelper(this.subSelectionHelper)}},r.prototype.isPlayAxis=function(){return!(!this.dataViews||!this.dataViews[0])&&11===this.chartType&&(this.options.animator||this.isMobileChart)&&(0,V.c5)(this.dataViews[0],"Play")},r.prototype.is100Stacked=function(){return 8===this.chartType||9===this.chartType||3===this.chartType},r.prototype.updateInternal=function(e,t){var a;return(0,d.__awaiter)(this,void 0,void 0,function(){var i,n,s,o,l,u,c,v,y,m,D,O,F,N,X,re,pe,q;return(0,d.__generator)(this,function(ee){switch(ee.label){case 0:return i=this.dataViews=e.dataViews,n=this.featureSwitches.onObject&&e.formatMode,s=e.operationKind===ve.su.Append||null!=e.resizeMode||n,this.currentViewport=e.viewport,i?(l=this.multiples.isSmallMultiples(i),(u=l&&i[0])?(y=(0,p.Zw)(c=u.metadata.objects,v=this.layerStyle),m=(0,p.yA)(c,v),this.viewModelAdapterFactory.setSmallMultiplesOptions({viewport:this.currentViewport,isSmallMultiples:l,columns:y.columnCount,rows:y.rowCount}),this.smallMultiplesViewModelAdapter=this.viewModelAdapterFactory.createSmallMultiplesAdapter({dataView:u,multiplesLayout:y,multiplesSubheader:m,viewport:this.currentViewport})):(this.viewModelAdapterFactory.setSmallMultiplesOptions({viewport:this.currentViewport,isSmallMultiples:l,columns:void 0,rows:void 0}),this.smallMultiplesViewModelAdapter=void 0),l!==this.multiples.isSmallMultiples()&&this.multiples.clear(),null!=t?(D=this.multiples.getCoreMultiple(),O=D.layers,_.isEmpty(i)||(F=dt(i),this.cartesianVisualCapabilities=r.getCartesianVisualCapabilities(O),l&&this.cartesianVisualCapabilities&&(this.cartesianVisualCapabilities.supportsHierarchicalCategoryAxis=!1),2===(o=this.categoryAxisRenderMode=r.getRenderMode(F,this.cartesianVisualCapabilities))&&(i=i.map(function(ue){return(0,Ge.Zy)(ue,K.p.general.formatString,K.x.category)}))),this.multiples.update({dataViews:i,operationKind:t,viewport:this.currentViewport,adapterFactory:this.viewModelAdapterFactory,preserveScrollPosition:s,formatMode:n}),this.cartesianData=this.originalCartesianData=D.getData()):(this.multiples.resize(this.currentViewport),this.cartesianData=this.multiples.getCoreMultiple().getData()),null==t&&this.cartesianData&&this.cartesianData.axesData?this.axes.updateResize(this.cartesianData.axesData,this.cartesianData.scrollbarOptions.scrollbarWidth):null!=t&&(_.isEmpty(i)||((N=i[0]).metadata&&(this.background={image:(0,A.NA)(N.metadata.objects,K.p.plotArea.image),transparency:(0,A.NA)(N.metadata.objects,K.p.plotArea.transparency,(0,St.x6)())}),this.categoryLoadMoreDataHandler.update(o,l),this.axes.update(N.categorical?N.categorical.categories:null,this.cartesianData.axesData,o,this.cartesianData.scrollbarOptions.scrollbarWidth)),this.categoryLoadMoreDataHandler.onLoadMoreDataCompleted()),this.cartesianData&&this.cartesianData.zoomData&&this.axisZoom.update({dataViews:i,zoomData:this.cartesianData.zoomData,hasSmallMultiples:l,hasScalarCategoryAxis:this.categoryAxisIsScalar().isScalar,hasYAxisCategorical:this.axes.isYAxisCategorical}),[4,this.render(!this.hasSetData||e.suppressAnimations||l,s,e.resizeMode)]):[2];case 1:return ee.sent(),this.isDestroyed||(this.hasSetData=this.hasSetData||!_.isEmpty(i),this.updateWarnings(null===(a=this.cartesianData)||void 0===a?void 0:a.warningObjectCollection),X=e.type&ve.EP.Data||e.type&ve.EP.ResizeEnd||e.type&ve.EP.FormattingSubSelectionChange,re=e.type&ve.EP.FormattingSubSelectionChange,this.subSelectionHelper&&X&&(this.subSelectionHelper.updateOutlinesFromSubSelections(e.subSelections,!0),this.hostServices.alertScreenReader&&re&&(pe=this.subSelectionHelper.getLabelsFromSubSelections(e.subSelections,["aria-label"]),(q=pe?.length&&pe.join(" "))&&this.hostServices.alertScreenReader(q)))),[2]}})})},r.getCartesianVisualCapabilities=function(e){for(var t,a=0,i=e.length;a<i;a++){var s=e[a].getCartesianVisualCapabilities();t?t.supportsHierarchicalCategoryAxis&&(t.supportsHierarchicalCategoryAxis=s.supportsHierarchicalCategoryAxis):t=(0,xe.ED)(s)}return t},r.getRenderMode=function(e,t){for(var a,i=0,n=e;i<n.length;i++){var s=n[i];if(null!=s){var o=new gs(s,t?.supportsHierarchicalCategoryAxis).getRenderModes();a=a?_.intersection(a,o):o,T.fF.assert(function(){return!_.isEmpty(a)},"Could not find a valid render mode for all layers")}}return _.head(a)},r.prototype.isSmallMultiples=function(){return(0,p.sI)(this.dataViews)},r.prototype.showSmallMultiplesCard=function(){return this.isSmallMultiples()},r.prototype.showSubheaderCard=function(){return this.isSmallMultiples()},Object.defineProperty(r.prototype,"hasHierarchicalAxisRenderMode",{get:function(){return 3===this.categoryAxisRenderMode},enumerable:!1,configurable:!0}),r.prototype.render=function(e,t,a){return(0,d.__awaiter)(this,void 0,void 0,function(){return(0,d.__generator)(this,function(i){return[2,this.layout.render(this.multiples,this.currentViewport,this.categoryLoadMoreDataHandler,this.background,this.axisZoom,this.trimOrdinalDataOnOverflow,e,this.hasHierarchicalAxisRenderMode,t,this.formatMode,this.subSelectionHelper,this.isSelected,a)]})})},r.prototype.updateWarnings=function(e){var t,a,i,n,s;if(!_.isEmpty(this.dataViews)&&e){var o=this.dataViews,l=(0,Ot.b)(o,!1,!1,!1,["Tooltips"],!0);if(_.isEmpty(l)||e.add.apply(e,l||[]),this.axes.addWarnings(e),this.multiples.checkIfNoLabelsCanBeRendered()){var u={selector:null,warnings:[new ze.we]};e.addForVisualObject("labels",u)}else{e.removeForVisualObject("labels");for(var v=0,y=null===(a=this.multiples.getCoreMultiple())||void 0===a?void 0:a.layers;v<y.length;v++){var m=y[v];null===(i=m.addWarnings)||void 0===i||i.call(m,e)}}for(var w=[],C=null===(n=this.cartesianVisualCapabilities)||void 0===n?void 0:n.supportsHierarchicalCategoryAxis,D=0,O=o;D<O.length;D++)new gs(O[D],C).addObjectWarnings(w);var N=function(X,re){var pe=(0,P.getMergedUserDomains)(X);pe[0]>=pe[1]&&e.addForVisualObject(re,{selector:null,warnings:[new ze.Dm]})};!(null===(s=this.originalCartesianData)||void 0===s)&&s.axesData&&(N(this.originalCartesianData.axesData.valueAxis,"valueAxis"),N(this.originalCartesianData.axesData.categoryAxis,"categoryAxis"),N(this.originalCartesianData.axesData.secondaryValueAxis,"y2Axis")),_.isEmpty(w)||(t=this.cartesianData.warningObjectCollection).addForVisualObject.apply(t,(0,d.__spreadArray)(["categoryAxis"],w||[],!1)),this.hostServices.setWarnings(this.cartesianData.warningObjectCollection.complete())}},r.prototype.update=function(e){return(0,d.__awaiter)(this,void 0,void 0,function(){return(0,d.__generator)(this,function(t){switch(t.label){case 0:return this.featureSwitches.onObject&&e.formatMode!==this.formatMode&&(this.subSelectionHelper.setFormatMode(e.formatMode),this.interactivityService.setFormatMode(e.formatMode),this.formatMode=e.formatMode),null==e.resizeMode?[3,2]:[4,this.updateInternal(e)];case 1:return t.sent(),[3,4];case 2:return[4,this.updateInternal(e,null!=e.operationKind?e.operationKind:ve.su.Create)];case 3:t.sent(),t.label=4;case 4:return[2]}})})},r.prototype.destroy=function(){this.isDestroyed=!0,this.multiples&&this.multiples.clear(),this.layout&&this.layout.destroy(),this.axisZoom&&(this.axisZoom.destroy(),this.axisZoom=void 0)},r.prototype.onViewModeChanged=function(e){this.layout.viewMode=e},r.prototype.onSelectionStateChanged=function(e){if(this.isSelected=e,this.cartesianData&&this.multiples&&this.dataViews){var t=!this.hasSetData||this.multiples.isSmallMultiples(this.dataViews);this.render(t,!0)}},r.prototype.scrollTo=function(e){var t=this.layout.getVisibleMultiples();this.multiples.scrollTo(e,t)},r.prototype.scrollRowsTo=function(e){this.layout.scrollRowsTo(e)},r.prototype.isComboChart=function(){return p.LQ(this.chartType)},r.prototype.enumerateObjectInstances=function(e){var t,a=new Vt.G,i=this.getLayers();if(e.objectName===At.XC){var n=this.categoryAxisIsScalar().isScalar;if(Me(this.dataViews,i)&&n){var s=p.RN(i);this.enumerateReferenceLines(a,e.objectName,s)}}else e.objectName===At.Dk?this.enumerateReferenceLines(a,e.objectName):"referenceLine"===e.objectName?function(r,e,t){return tt(function(a){return!a.isStacked},r,e,void 0)}(this.dataViews,i)&&this.enumerateReferenceLines(a,e.objectName):"trend"===e.objectName&&Ee(this.dataViews,i)&&(0,rt.md)(a,this.originalCartesianData.trendLines,this.layerStyle);for(var o=0,l=i;o<l.length;o++){var u=l[o];null===(t=u.enumerateObjectInstances)||void 0===t||t.call(u,a,e)}return a.complete()},r.prototype.getSelectorsByColumnSubSelection=function(e){for(var a=0,i=this.getLayers();a<i.length;a++){var n=i[a];if(n.getSelectorsByColumnFromSubselectedElement){var s=n.getSelectorsByColumnFromSubselectedElement(e);if(s)return s}}return{}},r.prototype.getSubSelectionCustomOutlines=function(e){return ya.PH.call(this,e)},r.prototype.getSubSelectionCustomElements=function(e){return ya.xm.call(this,e)},r.prototype.getSubSelectionMetadata=function(e){return ya.H_.call(this,e)},r.prototype.getSubSelectionStyles=function(e){return ya.mv.call(this,e)},r.prototype.getSubSelectionShortcuts=function(e,t){return ya.yV.call(this,e,t)},r.prototype.getSubSelectables=function(e){return ya.l$.call(this,e)},r.prototype.getNextSubSelectable=function(e,t){return this.subSelectionHelper.getNextSubSelectable(e,t)},r.prototype.getFormattingModel=function(){return ya.fI.call(this)},r.prototype.resolveFormattingPlaceholder=function(e){if((0,ge.n$)(e)){if("responsive"===e.name)return this.getResponsiveSlice();for(var a=0,i=this.getLayers();a<i.length;a++){var n=i[a],s=n.resolveFormattingPlaceholder&&n.resolveFormattingPlaceholder(e);if(s)return s}}},Object.defineProperty(r.prototype,"localizer",{get:function(){var t=this;return function(a){return t.hostServices.getLocalizedString(a)}},enumerable:!1,configurable:!0}),r.prototype.getResponsiveSlice=function(){var e=this.dataViews&&this.dataViews[0];if(e){if(this.smallMultiplesViewModelAdapter)return this.smallMultiplesViewModelAdapter.getResponsiveSlice(e,this.localizer);if(this.viewModelAdapterFactory)return this.viewModelAdapterFactory.createCartesianAdapter({cartesianData:void 0,dataView:e,viewport:void 0,isCoreMultiple:void 0}).getResponsiveSlice(e,this.localizer)}},r.prototype.getTelemetryInformation=function(){var e={};if(this.isSmallMultiples()){var t=(0,p.Zw)(this.dataViews[0].metadata.objects,this.layerStyle);T.fF.assertValue(t,"getTelemetryInformation - NULL layout"),e.smallMultiples={layout:{type:t.layoutType,rows:t.rowCount,columns:t.columnCount}}}for(var a=this.getLayers(),i=0;i<a.length;i++){var n=a[i];if(_.isFunction(n.getTelemetryInformation)){var s=n.getTelemetryInformation();s&&(e[i.toString()]=s)}}if(!_.isEmpty(e))return e},r.prototype.getLayers=function(){var e=this.multiples.getCoreMultiple();return 1&e.getState()?e.layers:[]},r.prototype.enumerateReferenceLines=function(e,t,a){var i,n;if(null!==(i=this.originalCartesianData)&&void 0!==i&&i.referenceLines&&null!==(n=this.originalCartesianData)&&void 0!==n&&n.axesData){var s=Ue.v.getDataColorByIndex(this.layerStyle,0,Le.fA),o=_.filter(this.originalCartesianData.referenceLines,function(l){return l.type===t});(0,At.Dr)(e,o,s,t,this.originalCartesianData.axesData.isValueAxisIrregular,a)}},r.prototype.shouldShowLegendCard=function(){var e,t;if(_.isEmpty(this.dataViews)||null===(e=this.cartesianData)||void 0===e||!e.legendData)return!1;if(this.cartesianData.legendData.isGradientLegend)return!0;var a=null===(t=this.multiples.getCoreMultiple())||void 0===t?void 0:t.layers;if(a&&this.dataViews)for(var i=a.length,n=0,s=0;s<i;s++){if(a[s].hasLegend())return!0;var o=this.dataViews[s];if(o&&o.categorical&&o.categorical.values&&o.categorical.values.length>0&&++n>1)return!0}return!1},r.prototype.isLogAxisScaleAllowed=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1);var a=this.axes.isYAxisCategorical;return this.axes.isLogScaleAllowed(e?a?0:t?2:1:a?1:0)},r.prototype.categoryAxisIsScalar=function(){var e;if(!this.originalCartesianData)return{isScalar:void 0,supportedType:void 0};var t=this.originalCartesianData.axesData.categoryAxis,a=this.hasHierarchicalAxisRenderMode?Ct.w.categorical:Ct.w.both,i=!1,n=null===(e=this.multiples.getCoreMultiple())||void 0===e?void 0:e.layers;return a===Ct.w.both&&n&&n[0].getSupportedCategoryAxisType&&((a=n[0].getSupportedCategoryAxisType())===Ct.w.scalar?i=!0:(i=p.qU(a===Ct.w.both,t))&&(i=n&&n[0].getVisualCategoryAxisIsScalar?n[0].getVisualCategoryAxisIsScalar():0===this.categoryAxisRenderMode)),{isScalar:i,supportedType:a}},r.prototype.onClearSelection=function(){this.hasSetData&&this.multiples.clearSelection(this.layout.getVisibleMultiples())},r.prototype.onRestoreSelection=function(e){return!!this.interactivityService&&this.interactivityService.restoreSelection(e.selection)},r.prototype.getLayerRendererInitOptions=function(e){var a,t=this;return{animator:null===(a=e.cartesianOptions)||void 0===a?void 0:a.animator,svg:e.axesRenderer.getLayerContainer(),cartesianHost:{updateLegend:function(n){return t.legend.drawLegend({data:n,parentViewport:t.currentViewport,isHierarchicalAxis:t.hasHierarchicalAxisRenderMode,onObject:t.featureSwitches.onObject,titleSliceUid:"".concat("legend","-").concat("title","-titleText")})},triggerRender:function(n){return t.render(n,!1)}},eventManager:this.eventManager,useManagedTabIndex:this.useManagedTabIndex()}},r.prototype.useManagedTabIndex=function(){return this.isSmallMultiples()},r.prototype.onDataViewObjectChanged=function(e,t){var c,a=(0,p.Zw)(this.dataViews[0].metadata.objects,this.layerStyle),i=p.Te(e,a);if(!this.featureSwitches.onObject||1!==t)return i;for(var s=[],o=0,l=this.getLayers();o<l.length;o++){var u=l[o];u.getDataViewObjectLayerChanges&&s.push(u.getDataViewObjectLayerChanges(i,t))}if(_.isEmpty(s))return i;if(s.length>1){for(var v=[],y=[],m=0;m<s.length;m++){y[m]=[];for(var w=0,C=s[m];w<C.length;w++){var D=C[w];D.required?v.push(D):y[m].push(D)}}for(var O=y[0],F=1;F<y.length;F++)O=_.intersectionWith(O,y[F],_.isEqual);c=$e.o.applyDataViewObjectsBehaviorChanges(e,(0,d.__spreadArray)((0,d.__spreadArray)([],O,!0),v,!0))}else c=$e.o.applyDataViewObjectsBehaviorChanges(i,_.first(s));return c},r}(),gs=function(){function r(e,t){this.processDataView(e,t)}return r.prototype.processDataView=function(e,t){if(this.renderModes=[],e&&e.metadata&&e.categorical&&!_.isEmpty(e.categorical.categories)){var a=e.metadata,i=e.categorical.categories,n=_.head(i),s=oe.A8(n),o=(0,Gt.n$)(e),l=oe.PX(a.objects,K.p.categoryAxis.axisType,n.source.type,s,o);if(o){var u=r.areNonLeafLevelsFilteredToUniqueValue(i),c=(0,A.NA)(a.objects,K.p.categoryAxis.concatenateLabels,p.SM);if(!u||!c&&t){var v=_.some(e.categorical.categories,function(m){return m.source&&m.source.identityExprs}),y=t&&!c&&v;this.renderModes.unshift(2),y&&this.renderModes.unshift(3),!c&&!v&&(this.warnings=[{selector:null,warnings:[new ze.Tr]}])}else this.renderModes.unshift(1);l&&this.renderModes.unshift(0)}else this.renderModes.unshift(1),l&&this.renderModes.unshift(0)}else this.renderModes.push(2)},r.prototype.getRenderMode=function(){return _.head(this.renderModes)},r.prototype.getRenderModes=function(){return this.renderModes},r.prototype.addObjectWarnings=function(e){T.fF.assertValue(e,"warnings"),this.warnings&&e.push.apply(e,this.warnings||[])},r.areNonLeafLevelsFilteredToUniqueValue=function(e){if(_.isEmpty(e))return!1;for(var t=e.length-1,a=0;a<t;a++){var i=e[a].source;if(!i||!(0,A.NA)(i.objects,K.p.filters.filteredToUniqueValue,!1))return!1}return!0},r}(),eo=function(){function r(e){this.palette=e,this.clearPreferredScale()}return r.prototype.getAllColors=function(){return this.palette.getAllColors()},r.prototype.getColorScaleByKey=function(e){return this.setPreferredScale(e),this.preferredScale},r.prototype.getNewColorScale=function(){return this.preferredScale},r.prototype.getColorByIndex=function(e){return this.palette.getColorByIndex(e)},r.prototype.getSentimentColors=function(){return this.palette.getSentimentColors()},r.prototype.getGradientColors=function(){return this.palette.getGradientColors()},r.prototype.getBasePickerColors=function(){return this.palette.getBasePickerColors()},r.prototype.clearPreferredScale=function(){this.preferredScale=this.palette.getNewColorScale(),this.rotated=!1},r.prototype.rotateScale=function(){this.preferredScale=this.preferredScale.clone(),this.preferredScale.clearAndRotateScale(),this.rotated=!0},r.prototype.setPreferredScale=function(e){this.rotated||(this.preferredScale=this.palette.getColorScaleByKey(e))},r}(),to=function(){function r(e,t){this.loadMoreThreshold=1,this.enabled=!1,T.fF.assertValue(t,"hostServices"),this.hostServices=t,this.setScale(e)}return r.prototype.update=function(e,t){this.enabled=!t&&0!==e},r.prototype.resetViewport=function(e){this.viewportDataRange={startIndex:0,endIndex:e}},r.prototype.setScale=function(e){var t=e&&e.domain&&e.domain().length;t&&(this.loadMoreThresholdIndex=t-1-this.loadMoreThreshold)},r.prototype.isLoadingMoreData=function(){return this.loadingMoreData},r.prototype.onLoadMoreDataCompleted=function(){this.loadingMoreData=!1},r.prototype.shouldLoadMoreData=function(){var e=this.viewportDataRange;return!(!this.enabled||!e||this.isLoadingMoreData())&&e.endIndex>=this.loadMoreThresholdIndex},r.prototype.loadMoreData=function(){var e=this;return T.fF.assert(function(){return e.shouldLoadMoreData()},"unexpected call to loadMoreData"),this.isLoadingMoreData()?Qe.G.WaitingForData:(this.loadingMoreData=!0,this.hostServices.loadMoreData(),Qe.G.TriggeredLoadMore)},r}()},34969:function(ci,va,b){"use strict";b.d(va,{$B:function(){return Ne},$K:function(){return W},$W:function(){return J},$w:function(){return H},Ao:function(){return L},Au:function(){return dt},CI:function(){return S},Fv:function(){return Ae},GN:function(){return Ee},JI:function(){return E},K8:function(){return ut},LK:function(){return ca},LQ:function(){return f},MH:function(){return Fe},MI:function(){return Ca},PC:function(){return p},Pg:function(){return Ce},QB:function(){return ra},RN:function(){return Ye},SM:function(){return Y},Sq:function(){return ae},T4:function(){return Z},Te:function(){return Ma},Vk:function(){return z},Zo:function(){return Me},Zw:function(){return $t},be:function(){return at},cI:function(){return be},dZ:function(){return G},eX:function(){return h},fw:function(){return Ie},is:function(){return Et},jY:function(){return se},lc:function(){return M},qE:function(){return ye},qU:function(){return Pe},rX:function(){return ia},rZ:function(){return ie},sI:function(){return tt},se:function(){return fe},u8:function(){return R},yA:function(){return Pa},yo:function(){return g},zn:function(){return te}});var d=b(81337),K=b(53197),oe=b(86946),Ue=b(48766),Ge=b(62458),$e=b(38265),Gt=b(72489),Ot=b(26543),Vt=b(28326),At=b(22733),We=b(38958),kt=b(41640),rt=b(14599),St=b(61297),Pt=b(91593),j=b(90120),vt=b(82755),Ct=b(32476),ze=b(49511),Le=b(47316),T=b(18664),xe=b(32105),ot=b(44783),ge=b(79154),Qe=b(18765),ve=b(92374),V=b(72902),A=b(76045),Z=0,te=75,Ne=.2,be=.6,Ie=1,J=1,P=36,ae="cartesianChart",Y=!0,se=20,Ae=2,fe=$e.Wn.regular.css,ie=8,ut=.4,at=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],B=2,S=9,g=9,M=11,h="foregroundNeutralSecondaryAlt",L="foregroundNeutralLight",E="foregroundNeutralTertiaryAlt";function R(){return{categoryCount:0,categoryThickness:se,outerPaddingRatio:0,innerPaddingRatio:0,isScalar:!1}}function z(de,je){var Be=je?{showAxisTitle:!0}:{};if(!de)return Be;var ht=de.objects;if(ht){var x=ht.categoryAxis;x&&((Be=_.clone(x)).showAxisTitle=x.showAxisTitle??je)}return Be}function H(de,je,Be){void 0===Be&&(Be="valueAxis");var ht=je?{showAxisTitle:!0}:{};if(!de)return ht;var x=de.objects;if(x){var k=x[Be];k&&((ht=_.clone(k)).showAxisTitle=k.showAxisTitle??je)}return ht}function ye(de){return void 0!==de.innerPadding?Math.round(100*de.innerPadding):void 0}function Pe(de,je){return!(!de||je&&je.axisType&&je.axisType!==Ue.w.scalar)}function p(de){return f(de)||0===de||1===de||2===de||3===de}function f(de){return 13===de||14===de}function W(de){var je=de.preferredCategoryWidth;return null==je?void 0:+je}function G(de,je,Be,ht){if(Ge.fF.assertValue(de,"data"),Ge.fF.assertValue(Be,"type"),ht)return(0,K.v9)(Be)?Vt.y3.fromTimeValue(je):je;if(Be.text)return Ge.fF.assert(function(){return je<de.categories.length},"category index out of range"),de.categories[je];if(de&&de.series&&de.series.length>0){var x=de.series[0];if(x){var k=x.data;if(k){de.hasHighlights&&(je*=2);var I=k[je];if(I)return(0,K.v9)(Be)&&null!=I.categoryValue?Vt.y3.fromTimeValue(I.categoryValue):I.categoryValue}}}return je}function Ce(de){if(_.isEmpty(de))return 0;for(var je=0,Be=0,ht=de;Be<ht.length;Be++){var x=ht[Be];_.isEmpty(x.data)||(je=Math.max(x.data[x.data.length-1].categoryIndex,je))}return je}function Fe(de,je){var Be;return Ot.dw.builder().withCategory([je],de,null===(Be=je?.source)||void 0===Be?void 0:Be.queryName,!0).createSelectionId()}function Me(de,je){var Be,x,ht=!1;if(je){var k=_.head(de.categories);Be=(ht=(x=(0,oe.A8)(k))&&!_.isEmpty(x.values))?k:_.last(de.categories)}else Be=_.isEmpty(de.categories)?{source:void 0,values:[(0,Gt.WU)(null)],identity:void 0}:_.last(de.categories);return{category:Be,useScalarKeys:ht,scalarKeys:x}}function Ee(de){return de[0]}function Ye(de){var je;return Ge.fF.assert(function(){return!_.isEmpty(de)},"getCategoryValueType layers"),null===(je=_.find(de,function(Be){return Be.getCategoryValueType&&Be.hasData()}))||void 0===je?void 0:je.getCategoryValueType()}function tt(de){var je,Be,ht,x,k;if(_.size(de)<1)return!1;var I=null===(k=null===(x=null===(ht=null===(Be=null===(je=de[0])||void 0===je?void 0:je.matrix)||void 0===Be?void 0:Be.rows)||void 0===ht?void 0:ht.levels)||void 0===x?void 0:x[0])||void 0===k?void 0:k.sources;return!(_.size(I)<1||_.isEmpty(de[0].matrix.rows.root.children))&&_.every(I,function(me){return(0,We.nu)(me,At.x.rows)})}function dt(de){switch(de){case 7:case 6:case 8:return!0}return!1}function Et(de){var je=de.categoryCount,Be=de.availableWidth,ht=de.isScalar,x=void 0!==ht&&ht,k=de.cartesianOptions,me=(void 0===k?{}:k).isScrollable,Te=function(de){var je=de.categoryCount,Be=de.availableWidth,ht=de.isScalar,x=de.preferredCategoryWidth,k=de.outerPaddingRatio,I=function(de){var je,Be,ht,qe,x=de.data,k=de.categoryCount,I=de.availableWidth,me=de.domain,Te=de.isScalar,Ve=de.trimOrdinalDataOnOverflow,we=de.outerPaddingRatio;if(k<2)qe=I*(1-we);else if(Te&&me&&me.length>1){var it=function(de){var je=Number.MAX_VALUE;if(de.length>0)for(var Be=de[0].data.filter(function(I){return!I.highlight}),ht=function(me,Te){var Ve=Be[me+1].categoryValue,we=Be[me].categoryValue;Ge.fF.assert(function(){return _.isNumber(Ve)},"nextValue"),Ge.fF.assert(function(){return _.isNumber(we)},"currentValue"),je=Math.min(je,Math.abs(Ve-we))},x=0,k=Be.length-1;x<k;x++)ht(x);return je}(null!==(je=x?.series)&&void 0!==je?je:[]);qe=I*(it/(me[me.length-1]-me[0]+it*we*2));var zt=null!==(ht=null===(Be=de.axisZoom)||void 0===Be?void 0:Be.getCategoryZoomFactor())&&void 0!==ht?ht:1;Ge.fF.assert(function(){return zt>=1},"zoomFactor must be >= 1"),qe=Math.max(qe*zt,B)}else qe=I/(k+2*we),Ve&&(qe=Math.max(qe,se));return qe=Math.min(qe,I/(3+2*we)),!Te&&k>=3&&Ve?Math.max(qe,se):qe}(de);if(ht||null==x||x<I)return{categoryThickness:I,outerPaddingRatio:k};var me=Math.floor((Be-x*k*2)/x);return me<=0?I=Be/(1+2*k):me<je?(k=(Be-x*me)/(2*x),I=x):I=Math.min(x,Be),{categoryThickness:I,outerPaddingRatio:k}}(de),Ve=Te.categoryThickness,we=Te.outerPaddingRatio,it=(0,kt.Uy)((Be-Ve*we*2)/Ve),ft=Math.min(it,je);return x||ft<je&&me||(we=Math.max(0,(Be-Ve*ft)/2/Ve),we=(0,kt.GG)(we,0)?0:we),{categoryCount:!x&&me?je:ft,categoryThickness:Ve,outerPaddingRatio:we,innerPaddingRatio:de.innerPaddingRatio,isScalar:x}}function ra(de,je){return{x:de.x.show,y:de.y.show,y2:de.y2.show||je&&!1!==de.y2.show}}function $t(de,je){var Be,ht,x=(0,vt.RK)(de,St.Xi),k=function(de){return{layoutType:de?.layoutType,rowCount:de?.rowCount,columnCount:de?.columnCount,backgroundColor:de?.backgroundColor,backgroundTransparency:de?.backgroundTransparency,gridPadding:de?.gridPadding,advancedPaddingOptions:de?.advancedPaddingOptions,columnPaddingInner:de?.columnPaddingInner,columnPaddingOuter:de?.columnPaddingOuter,rowPaddingInner:de?.rowPaddingInner,rowPaddingOuter:de?.rowPaddingOuter}}(x),I=function(de){return{layoutType:0,rowCount:St.UE,columnCount:St.ZO,backgroundColor:null,backgroundTransparency:0,gridline:{region:ze.o.none,strokeShow:!1,strokePattern:Le.kY.solid,strokeWidth:1,strokeColor:j.v.getThemeColor(de,ot.md),strokeTransparency:0},advancedPaddingOptions:!1,gridPadding:12,columnPaddingInner:12,columnPaddingOuter:12,rowPaddingInner:12,rowPaddingOuter:12}}(je),me=j.v.create(je),Te=x?.gridLineShow,Ve=null!==(Be=x?.gridLineType)&&void 0!==Be?Be:I.gridline.region;!1===Te?Ve=ze.o.none:!0===Te?(Ve===ze.o.none||!Ve)&&(Ve=ze.o.inner):null==Te&&(Te=Ve!==ze.o.none);var we=(0,d.__assign)((0,d.__assign)({},k?.layoutType===Pt.r.auto?{layoutType:0,rowCount:I.rowCount,columnCount:I.columnCount}:{layoutType:1,rowCount:k?.rowCount||I.rowCount,columnCount:k?.columnCount||I.columnCount}),{backgroundColor:me.getColorForPropertyNameWithDefaultColor(x,rt.e0.smallMultiplesBackgroundColor.propertyName,I.backgroundColor,!0),backgroundTransparency:null!==(ht=k?.backgroundTransparency)&&void 0!==ht?ht:I.backgroundTransparency,gridline:{region:Ve,strokeShow:Te,strokePattern:(0,A.N)(x,"gridLineStyle",I.gridline.strokePattern),strokeColor:me.getColorForPropertyNameWithDefaultColor(x,"gridLineColor",I.gridline.strokeColor),strokeWidth:(0,A.N)(x,"gridLineWidth",I.gridline.strokeWidth),strokeTransparency:(0,A.N)(x,"gridLineTransparency",I.gridline.strokeTransparency)}});return function(de,je,Be){de.gridPadding=je&&void 0!==je.gridPadding?je.gridPadding:Be.gridPadding,de.advancedPaddingOptions=je&&void 0!==je.advancedPaddingOptions?je.advancedPaddingOptions:Be.advancedPaddingOptions;var ht=je&&je.advancedPaddingOptions,x={gridPadding:de.gridPadding,gridLineRegion:de.gridline.region};de.columnPaddingInner=ht&&void 0!==je.columnPaddingInner?je.columnPaddingInner:Wa(x,1),ht&&void 0!==je.columnPaddingOuter?de.columnPaddingOuter=je.columnPaddingOuter:(x.defaultPadding=Be.columnPaddingOuter,de.columnPaddingOuter=Wa(x,0)),de.rowPaddingInner=ht&&void 0!==je.rowPaddingInner?je.rowPaddingInner:Wa(x,2),ht&&void 0!==je.rowPaddingOuter?de.rowPaddingOuter=je.rowPaddingOuter:(x.defaultPadding=Be.rowPaddingOuter,de.rowPaddingOuter=Wa(x,0))}(we,k,I),we}function Wa(de,je){var Be=de.gridPadding,ht=de.gridLineRegion,x=de.defaultPadding;switch(je){case 0:return Ct.Me.typeHasOuterGridLines(ht)?Be:x;case 1:return Ct.Me.typeHasVerticalGridLines(ht)?Be:Ea(Be);case 2:return Ct.Me.typeHasHorizontalGridLines(ht)?Be:Ea(Be);default:Ge.fF.assertNever(je)}}function Ea(de){return de%2==0?de/2:Math.ceil(de/2)}function Pa(de,je){var Be=(0,vt.RK)(de,"subheader"),ht=Bt(),x=j.v.create(je),k=(0,T.Zi)(Be,{family:"fontFamily",size:"fontSize",color:"fontColor",bold:"bold",italic:"italic",underline:"underline"},x,je,ht.ColorName,ht.TextClassName,{color:j.v.getThemeColor(je,ht.ColorName),size:xe.B.createFromPt(ht.FontPointSize),family:ht.FontFamily,weight:ge.AI,style:ge.AI,textDecoration:ge.zu}),I={top:0,bottom:2,left:5,right:0},me=k.size.px+I.top+I.bottom,Te=ht.Vertical,Ve=ht.Horizontal,we=ht.TitleWrap,qe=ht.Show,it=!1,ft=!1,xt=!1;if(Be){switch(Be.position){case Qe.cL.top:Te=0;break;case Qe.cL.bottom:Te=1}switch(Be.alignment){case ve.D.left:Ve=0;break;case ve.D.center:Ve=1;break;case ve.D.right:Ve=2}we=Be.titleWrap,void 0!==Be.show&&(qe=Be.show),void 0!==Be.bold&&(it=Be.bold),void 0!==Be.italic&&(ft=Be.italic),void 0!==Be.underline&&(xt=Be.underline)}return{fontProperties:k,show:qe,height:me,margins:I,vertical:Te,horizontal:Ve,titleWrap:we,labelBold:it,labelItalic:ft,labelUnderline:xt}}var Bt=function(){return{FontFamily:$e.Wn.regular.css,FontPointSize:8,ColorName:"foregroundNeutralSecondary",TextClassName:"title",Vertical:0,Horizontal:0,Show:!0,TitleWrap:!1,bold:!1,italic:!1,underline:!1}};function ia(){return{top:0,bottom:0,left:0,right:0}}function Ca(de,je){var Be=d3.select(de.get(0)),ht=Be.select("svg");ht.empty()&&((ht=Be.append("svg")).classed(ae,!0),ht.style("position","absolute"));var x=(0,V.EX)(ht);return je&&ht.attrs({width:je.width,height:je.height}),{element:ht,clearCatcher:x}}function Ma(de,je){if(de[0].objectName===St.Xi){var Be=rt.N_.smallMultiplesLayout.rowCount,ht=rt.N_.smallMultiplesLayout.columnCount,x=de[0].propertyValue;if(de[0].propertyName===Be.propertyName){var k=ca({rowCount:x,columnCount:je.columnCount});de.push({objectName:ht.objectName,propertyName:ht.propertyName,propertyValue:Math.min(k.maxColumnCount,je.columnCount),propertyType:{integer:!0}})}else de[0].propertyName===ht.propertyName&&(k=ca({rowCount:je.rowCount,columnCount:x}),de.push({objectName:Be.objectName,propertyName:Be.propertyName,propertyValue:Math.min(k.maxRowCount,je.rowCount),propertyType:{integer:!0}}))}return de}function ca(de){return{maxRowCount:Math.floor(P/de.columnCount),maxColumnCount:Math.floor(P/de.rowCount)}}},4405:function(ci,va,b){"use strict";b.r(va),b.d(va,{CartesianChart:function(){return d.CartesianChart},CartesianChartBehaviorFactory:function(){return We},ColumnChartAnimator:function(){return Ge},ColumnChartWebBehaviorFactory:function(){return vt},LineChartWebBehaviorFactory:function(){return ot},RealTimeLineChartAnimator:function(){return J},ScatterChartMobileBehaviorFactory:function(){return Oe},ScatterChartWebBehaviorFactory:function(){return Se},WaterfallChartWebBehaviorFactory:function(){return ut}});var d=b(63616),K=b(81337),oe=b(94478),Ue=b(3406),Ge=function(B){function S(g){var M=B.call(this,g)||this;return M.realTimeDashboard=!1,M.realTimeDashboard=g?.realTimeDashboard||!1,M}return(0,K.__extends)(S,B),S.prototype.animate=function(g){var M,h,L,E,R=g.chart.activeData;if(R.categories.length*R.series.length>oe.dt)return this.returnFailed(R);if(!this.realTimeDashboard&&this.previousViewModel&&this.previousViewModel.categories.length!==R.categories.length)return this.returnFailed(R);var z=(0,Ue.Gm)(g.chart,g.series,R),H=z.newShapes,ye=z.updatedShapes,Pe=z.removedShapes;if(this.realTimeDashboard)this.previousViewModel&&((0,Ue.Ls)(this.transition(ye),g.layout.shapeLayout,g),Pe.remove());else if(!R.hasHighlights||null!==(M=this.previousViewModel)&&void 0!==M&&M.hasHighlights)if(R.hasHighlights&&null!==(h=this.previousViewModel)&&void 0!==h&&h.hasHighlights)(0,Ue.Ls)(this.transition(ye),g.layout.shapeLayout,g),Pe.remove();else{if(R.hasHighlights||null===(L=this.previousViewModel)||void 0===L||!L.hasHighlights)return this.returnFailed(R);(0,Ue.Ls)(this.transition(ye),g.layout.shapeLayout,g);var p=null!==(E=g.interactivityService)&&void 0!==E&&E.hasSelection()?g.layout.zeroShapeLayout:g.layout.shapeLayoutWithoutHighlights;(0,Ue.Ls)(this.transition(Pe),p).remove()}else(0,Ue.Ls)(H,g.layout.shapeLayoutWithoutHighlights),(0,Ue.Ls)(this.transition(ye),g.layout.shapeLayout,g),Pe.remove();return this.previousViewModel=R,{failed:!1,shapes:ye,uncertaintyShapes:Ue.WR.call(g.chart,g)}},S.prototype.returnFailed=function(g){return this.previousViewModel=g,{failed:!0}},S.prototype.getEasing=function(){return this.realTimeDashboard?d3.easeLinear:d3.easeCubic},S.prototype.transition=function(g){return g.transition().ease(this.getEasing()).duration(this.animationDuration)},S}(oe.r5),$e=b(30237),Gt=b(62458),Ot=b(59107),Vt=b(11956),At={rectangle:{name:"rectangle",directionMode:0},centerBasedRectangle:{name:"centerBasedRectangle",directionMode:1},edgeBasedRectangle:{name:"edgeBasedRectangle",directionMode:2}},We=function(){function B(S,g){this.behaviorFactories=S,this.featureSwitches=g}return B.prototype.create=function(){var S=this.behaviorFactories.map(function(g){return g.create()});return new kt(S,this.featureSwitches)},B}(),kt=function(){function B(S,g){this.behaviors=S}return B.prototype.bindEvents=function(S,g,M,h){for(var L=this.behaviors,E=0,R=L.length;E<R;E++)L[E].bindEvents(S.layerOptions[E],g,M,h);this.axesLayout=S.axesLayout,this.categorySubRangeCount=S.categorySubRangeCount,this.verticalCategoryAxis=S.verticalCategoryAxis,this.selectionHandler=g,S.clearCatcher.on("click",h?null:function(){(0,$e.XM)(g)}),M&&(M.dataPointNavigationManager.isEmpty(M.pointSourceKey)||this.registerFocusKeyHandler(S.root,S.layerOptions))},B.prototype.renderSelection=function(S){for(var g=0,M=this.behaviors;g<M.length;g++)M[g].renderSelection(S)},B.prototype.renderFocus=function(S){for(var g=0,M=this.behaviors;g<M.length;g++)M[g].renderFocus(S)},B.prototype.lassoSelectRect=function(S,g){var M=[],h=this.getLassoSelectDirectionMode(),L=this.getScaledRegion(g,h);if(void 0!==h){for(var E=function(Pe){if(Pe.lassoSelectRectLayer&&Pe.getLassoSelectDirectionMode){var p=B.getRectResultKeys(Pe.getLassoSelectDirectionMode());Gt.fF.assert(function(){return 1===p.length},"Layers should not utilize selections from multiple rectangle types"),M.push.apply(M,Pe.lassoSelectRectLayer(L[p[0]]))}},R=0,z=this.behaviors;R<z.length;R++)E(z[R]);(0,$e.ct)(S,M,this.selectionHandler)}else Gt.fF.assertFail("Lasso select was triggered on a cartesian visual but no layers supplied a direction mode")},B.prototype.getLassoSelectDirectionMode=function(){for(var S=[],g=function(R){if(R.getLassoSelectDirectionMode){var z=R.getLassoSelectDirectionMode();_.some(S,function(H){return H===z})||S.push(z)}},M=0,h=this.behaviors;M<h.length;M++)g(h[M]);if(0!==S.length)return 1===S.length?S[0]:3},B.getRectResultKeys=function(S){return 0===S?[At.rectangle.name]:1===S?[At.centerBasedRectangle.name]:2===S?[At.edgeBasedRectangle.name]:[At.centerBasedRectangle.name,At.edgeBasedRectangle.name]},B.prototype.getScaledRegion=function(S,g){for(var h={},L=0,E=B.getRectResultKeys(g);L<E.length;L++){var R=E[L];h[R]={dataSpace:this.getScaledRegionInternal(S,At[R].directionMode),pixelValue:S}}return h},B.prototype.getScaledRegionInternal=function(S,g){var M=S.left-this.axesLayout.margin.left,h=S.top-this.axesLayout.margin.top,L=S.right-this.axesLayout.margin.left,E=S.bottom-this.axesLayout.margin.top,R=2===g?this.categorySubRangeCount:void 0,z=0===g||this.verticalCategoryAxis?0:-1,H=0===g||this.verticalCategoryAxis?0:1,ye=0!==g&&this.verticalCategoryAxis?-1:0,Pe=0!==g&&this.verticalCategoryAxis?1:0,p={left:this.axesLayout.axes.x.invertAxis?(0,Vt.invertScale)(this.axesLayout.axes.x.scale,L,H,g,R):(0,Vt.invertScale)(this.axesLayout.axes.x.scale,M,z,g,R),top:this.axesLayout.axes.y1.invertAxis?(0,Vt.invertScale)(this.axesLayout.axes.y1.scale,E,Pe,g,R):(0,Vt.invertScale)(this.axesLayout.axes.y1.scale,h,ye,g,R),right:this.axesLayout.axes.x.invertAxis?(0,Vt.invertScale)(this.axesLayout.axes.x.scale,M,z,g,R):(0,Vt.invertScale)(this.axesLayout.axes.x.scale,L,H,g,R),bottom:this.axesLayout.axes.y1.invertAxis?(0,Vt.invertScale)(this.axesLayout.axes.y1.scale,h,ye,g,R):(0,Vt.invertScale)(this.axesLayout.axes.y1.scale,E,Pe,g,R)};return this.axesLayout.axes.y2&&_.assign(p,{top2:this.axesLayout.axes.y2.invertAxis?(0,Vt.invertScale)(this.axesLayout.axes.y2.scale,E,Pe,g,R):(0,Vt.invertScale)(this.axesLayout.axes.y2.scale,h,ye,g,R),bottom2:this.axesLayout.axes.y2.invertAxis?(0,Vt.invertScale)(this.axesLayout.axes.y2.scale,h,ye,g,R):(0,Vt.invertScale)(this.axesLayout.axes.y2.scale,E,Pe,g,R)}),p},B.prototype.registerFocusKeyHandler=function(S,g){S.on("keydown.cartesian",function(){var M=d3.event;if(27===M.keyCode&&_.some(g,function(R){return $.contains(R.root.node(),M.target)})){M.preventDefault(),M.stopPropagation();var E=_.find(g,function(R){return $(R.root.node()).is(":tabbable")});Ot.M.focus(E.root.node())}})},B}(),rt=b(66232),St=b(60066),Pt=b(58691),j=b(65195),vt=function(){function B(){}return B.prototype.create=function(){return new Ct},B}(),Ct=function(){function B(){}return B.prototype.bindEvents=function(S,g,M,h){var L=this;this.options=S,this.hitTester=S.hitTester;var E=S.columnChartDrawInfo.eventGroup,R=S.root;if(h)E&&(E.on(j.G6,null),E.on("keydown.select",null),$e.Ku(E)),$e.FO(R);else{if(M){var z=M.dataPointNavigationManager,H=M.pointSourceKey;z.isEmpty(H)||($e.zV(R,S.visualInstanceId,H),$e.W3(R,z,H),$e.I8(R,z,H),$e.lt(R,g))}E.on(j.G6,function(){return L.handleSelection(g)}).on("keydown.select",function(){var Pe=d3.event.keyCode;(32===Pe||13===Pe)&&L.handleSelection(g)},!0),E.on("contextmenu",function(){var ye=d3.event;if(!Ot.M.isCtrlOrMeta(ye)){ye.preventDefault(),(0,rt.n)(ye);var Pe=$e.bt();$e.kW(function(p){return g.handleContextMenu(p,Pe)})}})}},B.prototype.renderSelection=function(S){var g,M=this.options,h=M.columnChartDrawInfo;null===(g=M.ribbonSeriesSelection)||void 0===g||g.style("fill-opacity",function(L){return(0,Ue.vA)(L.ribbonBands,S)}).style("stroke-opacity",function(L){return Ue.mM.opacity(L.ribbonBands.border,M.style,S)}),(0,Ue.pM)(h.shapesSelection,S,M.hasHighlights,M.style),(0,Pt.f)(h.uncertaintyShapes,S,M.hasHighlights)},B.prototype.renderFocus=function(S){var g="".concat(St.aY,"-").concat(this.options.visualInstanceId);if(this.options.root.select("#".concat(g)).attr("id",null),S){S.setAttribute("id",g);var M=this.options.root.select("#".concat(g));M.empty()||(M.attr("aria-label",function(h){return h.formattedTooltip}),Ot.M.focus(S))}},B.prototype.lassoSelectRectLayer=function(S){return this.hitTester.queryRegion(S)},B.prototype.getLassoSelectDirectionMode=function(){return 2},B.prototype.handleSelection=function(S){$e.kW(function(g){return $e.c8(g,S)},!this.options.useManagedTabIndex)},B}(),ze=b(42589),Le=b(63194),T=b(72902),xe=b(64067),ot=function(){function B(){}return B.prototype.create=function(){return new ge},B}(),ge=function(){function B(){}return B.prototype.bindEvents=function(S,g,M,h){var L=this,E=S.areas,R=S.focusMarker,z=S.interactivityLines,H=S.root,ye=S.hoverLineTooltipOverlay,Pe=this.dots=S.dots,p=S.onSelecting;this.anomalies=S.anomalies,this.anomalyNavigationHelper=S.anomalyNavigationHelper,this.selectedMarkersCallback=S.selectedMarkersCallback,this.hitTester=S.hitTester;var f=function(Fe){return L.getPointX(Fe)};if(h?(this.unbindEventsFormatMode(S),z.on(j.G6,function(Ce){V(S,f(this),Ce,g.getSubSelectionHelper(),!1)}),z.on("contextmenu",function(Ce){V(S,f(this),Ce,g.getSubSelectionHelper(),!0)}),Pe.on(j.G6,function(){var Ce=d3.select(this.parentNode).datum();A(S,Ce,g.getSubSelectionHelper(),!1)}),Pe.on("contextmenu",function(){var Ce=d3.select(this.parentNode).datum();A(S,Ce,g.getSubSelectionHelper(),!0)}),E.on("pointermove",function(){!function(B){B.onAreaPointerMove(d3.event),(0,rt.n)(d3.event)}(S)})):(z.on(j.G6,function(Ce){!function(B,S,g,M){var h=B.getCategoryIndex(M,g,!0),L=_.find(M.data,function(E){return E&&E.categoryIndex===h});L||(L={selected:M.selected,identity:M.identity,specificIdentity:B.categoryIdentities[h]}),$e.c8(L,S)}(S,g,f(this),Ce)}),z.on("contextmenu",function(Ce){!function(B,S,g,M){if(!Ot.M.isCtrlOrMeta(d3.event)){d3.event.preventDefault(),(0,rt.n)(d3.event);var h=$e.bt(),L=B.getCategoryIndex(M,g,!0),E=_.find(M.data,function(R){return R&&R.categoryIndex===L});E||(E={selected:M.selected,identity:M.identity,specificIdentity:B.categoryIdentities[L]}),S.handleContextMenu(E,h)}}(S,g,f(this),Ce)}),$e.a0(Pe,g),$e.lt(H,g),R&&(R.on(j.G6,function(Ce){var Fe=$e.Xt(Ce)?Ce.data:Ce;$e.c8(Fe,g)}),R.on("keydown.select",function(Ce){var Fe=d3.event,Me=Fe.keyCode;if(32===Me||13===Me){if(B.isAnomaly(Ce)){var Ee=L.anomalies.filter(function(tt){return tt.isAnomaly&&tt===Ce});(0,ze.rr)(Ee.node(),Ce,p)}else{var Ye=$e.Xt(Ce)?Ce.data:Ce;$e.c8(Ye,g)}Fe.preventDefault(),Fe.stopPropagation()}},!0),$e.OW(R,g)),ye&&S.isHoverLineTooltipActive&&(ye.style("pointer-events","all"),_.isEmpty(S.categoryIdentities)?ye.on(j.G6,function(){Ot.M.isCtrlOrMeta(d3.event)||g.handleClearSelection()}):(ye.on(j.G6,function(){var Ce=S.getCategoryIndex(void 0,f(this),!1);$e.c8({selected:!1,identity:void 0,specificIdentity:S.categoryIdentities[Ce]},g)}),ye.on("contextmenu",function(){var Ce=d3.event;if(!Ot.M.isCtrlOrMeta(Ce)){Ce.preventDefault(),(0,rt.n)(Ce);var Fe=$e.bt(),Me=S.getCategoryIndex(void 0,f(this),!1);g.handleContextMenu({selected:!1,identity:void 0,specificIdentity:S.categoryIdentities[Me]},Fe)}})))),M){var W=M.dataPointNavigationManager,G=M.pointSourceKey;W.isEmpty(G)||(("0"===H.attr("tabindex")||H.classed(Le.rG.class))&&this.registerEnterPlotAreaHandler(H,W,G),R&&this.registerDataPointNavigationHandler(R,W,G))}},B.prototype.unbindEventsFormatMode=function(S){var g=S.dots,M=S.focusMarker,h=S.hoverLineTooltipOverlay;M&&(M.on(j.G6,null),M.on("keydown.select",null),$e.Ku(M)),h&&(h.style("pointer-events","none"),$e.lq(h)),$e.FO(g)},B.prototype.registerEnterPlotAreaHandler=function(S,g,M){var h=this;S.on("keydown.enterPlotArea",function(){var L=d3.event,E=L.keyCode;if(E===j.Of.F1&&L.ctrlKey){L.preventDefault(),L.stopPropagation();var R=h.anomalyNavigationHelper.getFirstElement(0);R&&h.renderFocus(R.element)}else 13===E&&(L.preventDefault(),L.stopPropagation(),g.goToFirstElement(M))})},B.prototype.registerDataPointNavigationHandler=function(S,g,M){var h=this;S.on("keydown.dataPoint",function(){var L=d3.event,E=L.keyCode;(9===E||37===E||39===E||38===E||40===E||E===j.Of.F1&&Ot.M.isCtrlOrMeta(L))&&$e.kW(function(R){L.preventDefault(),L.stopPropagation();var z=$e.A$(R)?R.data:R;if(B.isAnomaly(z))h.handleAnomalyKeyDownEvent(z.categoryIndex,z.seriesIndex,E,Ot.M.isCtrlOrMeta(L),g,M);else if(E===j.Of.F1&&Ot.M.isCtrlOrMeta(L)){var H=h.anomalyNavigationHelper.getFirstElement(z.categoryIndex);H&&h.renderFocus(H.element)}else g.handleKeyDownEvent(M,z.categoryIndex,z.seriesIndex,E,L.shiftKey);d3.select(document.activeElement).dispatch("moveToolTipWithKeyboardAction",{bubbles:!0,cancelable:!1,detail:void 0})},void 0)},!0)},B.isAnomaly=function(S){return S.isAnomaly},B.prototype.handleAnomalyKeyDownEvent=function(S,g,M,h,L,E){var R;switch(M){case 37:return R=this.anomalyNavigationHelper.getNextDataPoint(S,g,T.x0.PreviousCategory),void this.renderFocus(R.element);case 39:return R=this.anomalyNavigationHelper.getNextDataPoint(S,g,T.x0.NextCategory),void this.renderFocus(R.element);case j.Of.F1:return void(h&&(S>0?L.handleKeyDownEvent(E,S-1,g,39,!1):L.goToFirstElement(E)));default:return}},B.prototype.renderSelection=function(S){var g;this.dots.style("fill-opacity",function(M){return M.marker.show?0:(0,St.eR)(M.selected,!1,S,!1,(0,xe.TD)(M.marker.transparency))}),null===(g=this.selectedMarkersCallback)||void 0===g||g.call(this,S)},B.prototype.renderFocus=function(S){S&&Ot.M.focus(S)},B.prototype.lassoSelectRectLayer=function(S){return this.hitTester.queryRegion(S)},B.prototype.getLassoSelectDirectionMode=function(){return 1},B.prototype.getPointX=function(S){for(var M,g=d3.event;M=g.sourceEvent;)g=M;var h=S.getBoundingClientRect();return g.clientX-h.left-S.clientLeft},B}();function V(B,S,g,M,h){B.onLineSubSelection(g,S,M,d3.event,h),(0,rt.n)(d3.event)}function A(B,S,g,M){B.onDotSubSelection(S,g,d3.event,M),(0,rt.n)(d3.event)}var te=b(34644),Ne=b(10389),J=function(B){function S(g){var M=B.call(this,g)||this;return M.lastUpdateTime=null,M}return(0,K.__extends)(S,B),S.prototype.refreshLastUpdate=function(){this.lastUpdateTime=Date.now()},S.prototype.getDuration=function(){if(this.lastUpdateTime){var g=Math.min(Date.now()-this.lastUpdateTime,250);return Math.max(this.animationDuration,g)}return this.animationDuration},S.prototype.getEasing=function(){return(0,te.Ad)("linear")},S.prototype.animate=function(g){var M=g.mainGraphicsContext,h=this.getDuration();return M.transition().duration(h).ease(this.getEasing()).attrTween("transform",function(){return function(L){return(0,Ne.Iu)(-g.xTranslation*L,0)}}),{failed:!1}},S}(oe.r5),ce=b(14577),ne=b(38400),P=b(79811),ae=b(79154),Y=b(38078),se=b(72489),Ae=b(26543),fe=b(56914),ie=b(61193),Se=function(){function B(){}return B.prototype.create=function(){return new le},B}(),le=function(){function B(){}return B.prototype.bindEvents=function(S,g,M,h){var L,E,R;null!==(L=S.playOptions)&&void 0!==L&&L.traceLineRenderer||null===(R=null===(E=this.playOptions)||void 0===E?void 0:E.traceLineRenderer)||void 0===R||R.remove();var z=S.data,H=S.eventGroup,ye=S.dataPointsSelection,Pe=S.visualInstanceId;this.bubbles=S.dataPointsSelection,this.playOptions=S.playOptions,this.shouldEnableFill=S.fillMarkers,this.colorBorder=z.colorBorder,this.hitTester=S.hitTester;var f,W,p=this.rootSelection=S.root;this.visualInstanceId=S.visualInstanceId,M&&(f=M.dataPointNavigationManager,W=M.pointSourceKey),$e.zV(p,Pe,W),this.selectionHandler=g,h?(H?$e.FW(S.eventManager,H):$e.FO(ye),ye.on("contextmenu",function(G){var Ce=d3.event;S.onMarkerSubSelection(this,G,g.getSubSelectionHelper(),Ce,!0),(0,rt.n)(Ce)}).on("click",function(G){var Ce=d3.event;S.onMarkerSubSelection(this,G,g.getSubSelectionHelper(),Ce,!1),(0,rt.n)(Ce)})):H?$e.US(S.eventManager,H,g):$e.a0(ye,g),f&&(f.isEmpty(W)||($e.W3(p,f,W),$e.I8(p,f,W),$e.lt(p,g)))},B.prototype.renderSelection=function(S){var g=this;if(this.bubbles.styles({"fill-opacity":function(E){return fe.WG.getMarkerFillOpacity(null!=E.marker.size,g.shouldEnableFill,S,E.selected)},"stroke-opacity":function(E){return fe.WG.getMarkerStrokeOpacity(null!=E.marker.size,g.colorBorder,S,E.selected)}}),this.playOptions&&this.bubbles){var M=this.bubbles.filter(function(L){return L.selected}).data(),h=this.playOptions.traceLineRenderer;M&&M.length>0&&null!=h?h.render(M,!0):h.remove()}},B.prototype.renderFocus=function(S){var g="".concat(St.aY,"-").concat(this.visualInstanceId);if(this.rootSelection.select("#".concat(g)).attr("id",null),S){this.bubbles.attr("aria-label",null);var M=d3.select(S).datum();M&&S.setAttribute("aria-label",(0,ne.X)(M.tooltipInfo())),S.setAttribute("id",g),Ot.M.focus(S)}},B.prototype.lassoSelectRectLayer=function(S){return this.hitTester.queryRegion(S)},B.prototype.getLassoSelectDirectionMode=function(){return 1},B}(),Oe=function(){function B(){}return B.prototype.create=function(){return new et},B}(),et=function(){function B(){}return B.prototype.bindEvents=function(S,g,M){this.setOptions(S),S.visualDataInitOptions&&S.visualDataInitOptions.interactivity.mobileTileInteractive&&(this.makeDataPointsSelectable(S.dataPointsSelection),this.makeRootSelectable(S.mobileRoot),this.makeDragable(S.mobileRoot),this.disableDefaultTouchInteractions(S.mobileRoot),this.selectRoot())},B.prototype.renderSelection=function(S){},B.prototype.setSelectionHandler=function(S){},B.prototype.makeDataPointsSelectable=function(){for(var S=this,g=[],M=0;M<arguments.length;M++)g[M]=arguments[M];for(var h=0,L=g.length;h<L;h++)g[h].on("click",function(R,z){S.select(z)})},B.prototype.makeRootSelectable=function(S){var g=this;S.on("click",function(){return g.selectRoot()})},B.prototype.makeDragable=function(){for(var S=this,g=[],M=0;M<arguments.length;M++)g[M]=arguments[M];for(var h=0,L=g.length;h<L;h++){var E=g[h],R=d3.drag().on("drag",function(){S.drag(0)}).on("end",function(){S.drag(1)});E.call(R)}},B.prototype.disableDefaultTouchInteractions=function(S){S.style("touch-action","none")},B.prototype.setOptions=function(S){this.data=S.data,this.mainGraphicsContext=S.root,this.xAxisProperties=S.xAxisProperties,this.yAxisProperties=S.yAxisProperties,this.host=S.host},B.prototype.select=function(S){this.selectDotByIndex(S)},B.prototype.selectRoot=function(){var S=(0,Y.BL)("selectRoot");this.onClick(),S()},B.prototype.drag=function(S){switch(S){case 0:this.onDrag();break;case 1:this.onClick();break;default:Gt.fF.assertFail("Unknown Drag Type")}},B.prototype.onDrag=function(){var S=this.getMouseCoordinates();this.moveCrosshairToXY(S.x,S.y);var g=this.findClosestDotIndex(S.x,S.y);this.selectDot(g),this.updateLegend(g)},B.prototype.onClick=function(){var S=this.getMouseCoordinates(),g=this.findClosestDotIndex(S.x,S.y);-1!==g&&this.selectDotByIndex(g)},B.prototype.getMouseCoordinates=function(){var S=this.mainGraphicsContext,g=0,M=parseInt(S.attr("height"),10);M=M||0;try{var h=d3.mouse(S.node());g=h[0],M=h[1]}catch{}return{x:g,y:M}},B.prototype.selectDotByIndex=function(S){this.selectDot(S),this.moveCrosshairToIndexDot(S),this.updateLegend(S)},B.prototype.selectDot=function(S){var g=this,M=this.mainGraphicsContext;M.selectAll(B.ScatterMarker.selector).classed("selected",!1).classed("notSelected",!0),M.selectAll(B.ScatterMarker.selector).filter(function(h){var L=g.data.dataPoints;Gt.fF.assert(function(){return L.length>S},"dataPoints length:".concat(L.length,"is smaller than index:").concat(S));var E=L[S];return h.x===E.x&&h.y===E.y}).classed("selected",!0).classed("notSelected",!1)},B.prototype.moveCrosshairToIndexDot=function(S){var g=this.data.dataPoints,M=this.mainGraphicsContext;Gt.fF.assert(function(){return g.length>S},"dataPoints length:".concat(g.length,"is smaller than index:").concat(S));var h=this.xAxisProperties.scale(g[S].x),L=this.yAxisProperties.scale(g[S].y);if(null==this.crosshair){var E=+M.attr("width"),R=+M.attr("height");this.crosshair=this.drawCrosshair(M,h,L,E,R),this.crosshairHorizontal=this.crosshair.select(B.Horizontal.selector),this.crosshairVertical=this.crosshair.select(B.Vertical.selector)}else this.moveCrosshairToXY(h,L)},B.prototype.moveCrosshairToXY=function(S,g){this.crosshairHorizontal.attrs({y1:g,y2:g}),this.crosshairVertical.attrs({x1:S,x2:S})},B.prototype.drawCrosshair=function(S,g,M,h,L){var E=S.append("g");return E.classed(B.CrosshairClassName,!0),E.append("line").classed(B.Horizontal.class,!0).attrs({x1:0,x2:h,y1:M,y2:M}),E.append("line").classed(B.Vertical.class,!0).attrs({x1:g,x2:g,y1:L,y2:0}),E},B.prototype.findClosestDotIndex=function(S,g){var M=-1,h=Number.MAX_VALUE,L=this.data.dataPoints,E=this.xAxisProperties.scale,R=this.yAxisProperties.scale;for(var z in L){var H=L[z],p=E(H.x)-S,f=R(H.y)-g,W=p*p+f*f;(h===Number.MAX_VALUE||h&&h>W)&&(M=z,h=W)}return M},B.prototype.updateLegend=function(S){if(null==this.lastDotIndex||this.lastDotIndex!==S){var g=this.createLegendDataPoints(S);this.host.updateLegend(g),this.lastDotIndex=S}},B.prototype.createLegendDataPoints=function(S){var g=ce.il.general.formatString,M=[],h=this.data;Gt.fF.assert(function(){return h.dataPoints.length>S},"dataPoints length:".concat(h.dataPoints.length,"is smaller than index:").concat(S));var L=h.dataPoints[S],E=(0,se.WU)(null),R=E,z=h.legendData;Gt.fF.assertValue(z,"legendData"),Gt.fF.assertValue(z.dataPoints,"legendData");var H=z.dataPoints,ye=L.formattedCategory.getValue();ye!==E?(R=ye,L.sourceGroupName&&(R+="; ".concat((0,se.WU)(L.sourceGroupName)))):L.sourceGroupName?R=(0,se.WU)(L.sourceGroupName):H.length>0&&H.length>=S&&H[S].label!==E&&(R=H[S].label);var Pe={show:!0,color:L.marker.color,shape:ie.ZO.circle};null!=h.xCol&&M.push({category:R,marker:Pe,identity:Ae.dw.builder().withMeasure(h.xCol.queryName).createSelectionId(),selected:L.selected,label:(0,se.WU)(this.data.axesLabels.x),measure:(0,se.WU)(L.x,(0,se.EO)(h.xCol,g)),iconOnlyOnLabel:!0,index:0}),null!=h.yCol&&M.push({category:R,marker:Pe,identity:Ae.dw.builder().withMeasure(h.yCol.queryName).createSelectionId(),selected:L.selected,label:(0,se.WU)(h.axesLabels.y),measure:(0,se.WU)(L.y,(0,se.EO)(h.yCol,g)),iconOnlyOnLabel:!0,index:1}),null!=h.size&&M.push({category:R,marker:Pe,identity:Ae.dw.builder().withMeasure(h.size.queryName).createSelectionId(),selected:L.selected,label:(0,se.WU)(h.size.displayName),measure:(0,se.WU)(L.radius,(0,se.EO)(h.size,g)),iconOnlyOnLabel:!0,index:2});var p=(0,P.Fe)();return p.dataPoints=M,p},B.CrosshairClassName="crosshair",B.ScatterMarker=(0,ae.CH)("scatterMarker"),B.Horizontal=(0,ae.CH)("horizontal"),B.Vertical=(0,ae.CH)("vertical"),B}(),ut=function(){function B(){}return B.prototype.create=function(){return new at},B}(),at=function(){function B(){}return B.prototype.bindEvents=function(S,g,M){var h=this,L=this.bars=S.bars,R=S.root;if(S.formatMode)L&&(L.on(j.G6,null),L.on("keydown.select",null),$e.Ku(L)),$e.FO(R);else{if(M){var z=M.dataPointNavigationManager,H=M.pointSourceKey;if(!z.isEmpty(H)){var ye=S.root;$e.W3(ye,z,H),$e.I8(ye,z,H),$e.lt(ye,g)}}L.on(j.G6,function(Pe){return h.handleSelection(Pe,g,S.isBreakdown)}).on("keydown",function(Pe){var p=d3.event,f=p.keyCode;(32===f||13===f)&&(p.preventDefault(),p.stopPropagation(),h.handleSelection(Pe,g,S.isBreakdown))}),L.on("contextmenu",function(Pe){var p=d3.event;if(!Ot.M.isCtrlOrMeta(p)&&(p.preventDefault(),(0,rt.n)(p),1!==Pe.barType)){var f=$e.bt();g.handleContextMenu(Pe,f)}})}},B.prototype.renderSelection=function(S){this.bars.attr("aria-selected",function(g){return g.selected}).style("fill-opacity",function(g){return 1===g.barType?St.Ko:(0,St.eR)(g.selected,g.highlight,S,!1)}).style("stroke-opacity",function(g){return 1===g.barType?St.Ko:(0,St.eR)(g.selected,g.highlight,S,!1)})},B.prototype.renderFocus=function(S){S&&Ot.M.focus(S)},B.prototype.handleSelection=function(S,g,M){if(1!==S.barType){var L,h=$e.bt();L=M?0:(0,Ot.D)(d3.event),g.handleSelection(S,L,h)}},B}()},3406:function(ci,va,b){"use strict";b.d(va,{mM:function(){return ve},bk:function(){return ge},Wv:function(){return te},hJ:function(){return ne},kC:function(){return Qe},WR:function(){return Ne},vA:function(){return ce},sY:function(){return xe},Gm:function(){return V},rT:function(){return be},Ls:function(){return A},pM:function(){return Z}});var d=b(72902),K=b(51995),oe=b(60066),Ue=b(52287),Ge=b(58691),$e=b(34021),Gt=b(10389),Ot=b(79154),Vt=b(59107),At=b(62458),We=b(64067),kt=b(26543),rt=b(34969),St=b(38859),Pt=b(80758),j=b(11956),vt=function(){function P(ae){At.fF.assert(function(){return ae.columnWidth>0},"Columns should have a width"),At.fF.assert(function(){return ae.categoryWidth>0},"Categories should have a width"),this.categoryAxisScale=ae.categoryAxisScale,this.categoryWidth=ae.categoryWidth,this.columnWidth=ae.columnWidth,this.dataPoints=ae.dataPoints,this.hasCategories=ae.hasCategories,this.isBar=ae.isBar,this.isClustered=ae.isClustered,this.isScalar=ae.isScalar,this.seriesLength=ae.seriesLength}return P.prototype.queryRegion=function(ae){var fe,ie,Se,le,Y=this,se=[],Ae=ae.dataSpace;return(this.isScalar||this.hasCategories&&!_.some([Ae.bottom,Ae.left,Ae.right,Ae.top],function(Oe){return void 0===Oe}))&&(this.isBar?(this.isScalar?(fe=Ae.bottom.value,ie=Ae.top.value):(fe=this.getAdjustedCategoryIndex(Ae.top.value,Ae.top.seriesIndex,this.seriesLength),ie=this.getAdjustedCategoryIndex(Ae.bottom.value,Ae.bottom.seriesIndex,this.seriesLength)),Se=Ae.left.value,le=Ae.right.value):(this.isScalar?(fe=Ae.left.value,ie=Ae.right.value):(fe=this.getAdjustedCategoryIndex(Ae.left.value,Ae.left.seriesIndex,this.seriesLength),ie=this.getAdjustedCategoryIndex(Ae.right.value,Ae.right.seriesIndex,this.seriesLength)),Se=Ae.bottom.value,le=Ae.top.value),se=_.filter(this.dataPoints,function(Oe){return 0!==Oe.valueAbsolute&&fe<=ie&&Se<=le&&(0,Pt.WN)(fe,ie,Y.getAreaCategoryBound(Oe,!1),Y.getAreaCategoryBound(Oe,!0))&&(0,Pt.WN)(Se,le,Y.getAreaValueLowerBound(Oe),Y.getAreaValueUpperBound(Oe))})),se},P.prototype.getAreaValueLowerBound=function(ae){return this.isClustered?Math.min(0,ae.value):ae.position-ae.valueAbsolute},P.prototype.getAreaValueUpperBound=function(ae){return this.isClustered?Math.max(0,ae.value):ae.position},P.prototype.getAreaCategoryBound=function(ae,Y){if(this.isScalar){this.isBar&&(Y=!Y);var se=Y?this.columnWidth:0,Ae=this.isClustered?ae.seriesIndex:0,fe=this.categoryAxisScale(ae.categoryValue)-this.categoryWidth/2;return(0,j.invertScale)(this.categoryAxisScale,fe+Ae*this.columnWidth+se,0,0,void 0).value}return this.getAdjustedCategoryIndex(ae.categoryIndex,ae.seriesIndex,this.seriesLength)},P.prototype.getAdjustedCategoryIndex=function(ae,Y,se){return this.isClustered?(At.fF.assert(function(){return void 0!==Y},"Series index should be present when getting adjusted category index for a clustered chart."),ae*se+Y):ae},P}(),Ct=(0,Ot.CH)("ribbonChartLayer"),ze=(0,Ot.CH)("ribbonChartDefs"),Le=(0,Ot.CH)("ribbonChartSeries"),T=(0,Ot.CH)("ribbonChartDataPoint");function xe(P,ae){var Y=this,se=this.drawColumns(!P),Ae=this.data,fe=this.xAxisProperties.isCategoryAxis&&0===this.xAxisProperties.innerPaddingRatio||this.yAxisProperties.isCategoryAxis&&0===this.yAxisProperties.innerPaddingRatio;this.mainGraphicsContext.attr("height",this.availableHeight).attr("width",this.availableWidth).classed("withCrispEdges",fe);var ie=function(){return Y.mainGraphicsContext.selectAll(T.selector)};this.tooltipsEnabled&&!ae?(this.tooltipService.addTooltip(se.eventGroup,function(B){var S;return null===(S=B.data)||void 0===S?void 0:S.tooltipInfo},function(B){var S;return(null===(S=B.data)||void 0===S?void 0:S.identity)&&[B.data.identity]}),this.hasRibbonBands&&this.tooltipService.addTooltip(ie(),function(B){var S;return null===(S=B.data)||void 0===S?void 0:S.tooltipInfo},function(){return[kt.l0.createNull()]})):(this.tooltipService.removeTooltips(se.eventGroup),this.hasRibbonBands&&this.tooltipService.removeTooltips(ie()));var le,Oe,Se=[];if(this.interactivityService){for(var et=0,ut=Ae.series;et<ut.length;et++)Se=Se.concat(ut[et].data);le={datapoints:Se,columnChartDrawInfo:se,hasHighlights:Ae.hasHighlights,root:this.mainGraphicsContext,showLabel:Ae.dataLabelsSettings.show,visualInstanceId:this.hostService.instanceId,hitTester:new vt({dataPoints:Se,isScalar:Ae.isScalar,hasCategories:!!Ae.categoryIdentities&&Ae.categoryIdentities.length>0,isBar:this.isBar,isClustered:this.isClustered,categoryAxisScale:this.categoryAxis.scale,columnWidth:this.columnWidth,categoryWidth:this.categoryWidth,seriesLength:Ae.series.length}),useManagedTabIndex:this.useManagedTabIndex,ribbonSeriesSelection:this.mainGraphicsContext.selectAll(Le.selector),style:this.style},Oe={navigationStrategy:Ae.series.length>1?d.jN.CategoryFirst:d.jN.CategoryOnly,helper:this}}return this.isMobileInteractiveLegend()&&ot.call(this,!0),(0,Gt.bL)(this.animationOptions),{dataPoints:Se,behaviorOptions:le,navigationOptions:Oe,labelDataPoints:[],labelDataPointGroups:se.labelDataPointGroups,labelsAreNumeric:!0,labelOrientation:Ae.dataLabelsSettings.labelOrientation,animateLabels:se.animateLabels,categorySubRangeCount:this.isClustered?this.data.series.length:1,verticalCategoryAxis:this.isBar}}function ot(P){void 0===P&&(P=!1);var Y=void 0===this.lastInteractiveSelectedColumnIndex?(0,rt.Pg)(this.data.series):this.lastInteractiveSelectedColumnIndex;this.selectColumn(Y,P)}function ge(P,ae){At.fF.assertValue(P,"columns"),ae&&P.attr("draggable","true").on("dragstart",ae)}function Qe(){var P=this;(0,$e.H4)(this.mainGraphicsContext,this.data.strokeSettings);var ae=this.mainGraphicsContext.selectAll(St.L0.selector);if(this.usesUngroupedRenderer()){var Y=_.flatten(this.activeData.series.map(function(se){return se.data}));return Y.sort(function(se,Ae){var fe=(se.highlight?1:0)-(Ae.highlight?1:0);if(fe)return fe;var ie=se.seriesPosition-Ae.seriesPosition;return P.activeData.layout.clusteredGapOverlapReverse&&(ie*=-1),ie}),ae.data([{data:Y}],function(se){return"*"}).join(function(se){return se.append("g").classed(St.L0.class,!0)})}return ae.data(this.activeData.series,function(se){return se.key}).join(function(se){return se.append("g").classed(St.L0.class,!0)}).styles({fill:function(Ae){return Ae.columnStyle.fillColor},"stroke-width":function(Ae){return ve.size(Ae.columnStyle.border,P.style)},stroke:function(Ae){return ve.color(Ae.columnStyle.border,P.style)}}).attr("role","listbox").attr("aria-label",function(se){return se.displayName})}var ve={opacity:function(ae,Y,se){return(0,We.TD)(Y.isHighContrast?0:ae.strokeTransparency)*(se?oe.eU:1)},size:function(ae,Y){return Y.isHighContrast?null:ae.strokeShow?2*ae.strokeWidth:0},color:function(ae,Y){return Y.isHighContrast?null:ae.strokeColor},optimized:function(ae,Y){return ae===Y?null:ae},rectClipPath:function(ae,Y,se){var Ae;return null!==(Ae=ae.columnStyle.border)&&void 0!==Ae&&Ae.strokeShow&&!Y.isHighContrast?"".concat(se?"fill-box ":"","inset(0px)"):null},strokePattern:function(ae,Y,se,Ae){var fe;if(null===(fe=ae.columnStyle.border)||void 0===fe||!fe.outlineOnly||ae.highlight)return null;var ie=se?[!1,!0,!1,!0]:[!0,!1,!0,!1],Se=ie[0],le=ie[1],Oe=ie[2],et=ie[3],ut=function(){se?Se=!0:le=!0},at=function(){se?Oe=!0:et=!0};ae.indexFromBottom===ae.countOfPointsInCategory-1?Ae?at():ut():0===ae.indexFromBottom&&(Ae?ut():at());var B=Y.shapeLayout.width(ae),S=Y.shapeLayout.height(ae),g="",M=function(L,E){g+=L?"".concat(E," 0 "):"0 ".concat(E," ")};return M(Se,B),M(le,S),M(Oe,B),M(et,S),g}};function V(P,ae,Y,se){void 0===se&&(se=!1);var Ae=ae.selectAll(P.CS.selector).data(function(ie){return se?_.filter(ie.data,function(Se){return!!Se.value}):ie.data},function(ie){return ie.key}),fe=Ae.enter().append("rect").classed(P.CS.class,!0).classed("highlight",function(ie){return!!ie.highlight}).styles({"clip-path":function(Se){return ve.rectClipPath(Se,P.style,!1)},"-webkit-clip-path":function(Se){return ve.rectClipPath(Se,P.style,!0)}});return P.featureSwitches.onObject&&fe.classed(Ue.cy,!0).attr(Ue.Ez,"columns").attr(Ue.QZ,3).each(function(ie,Se,le){Ue.O5.setDataForElement(le[Se],{outlineRestrictionOptions:{margin:P.scaledMargin},getDisplayName:function(){return P.hostService.getLocalizedString(P.isBar?"MiniToolbar_Bars":"MiniToolbar_Columns",Y.series[ie.seriesIndex].displayName)}})}),{newShapes:fe,updatedShapes:Ae.merge(fe).style("fill",function(ie){return ie.columnStyle.fillColor!==Y.series[ie.seriesIndex].columnStyle.fillColor||P.usesUngroupedRenderer()?ie.columnStyle.fillColor:null}).attr("aria-hidden",function(ie){return!!ie.highlight||null}).order(),removedShapes:Ae.exit()}}function A(P,ae,Y){return P.attrs({width:ae.width,height:ae.height,x:ae.x,y:ae.y}).styles({"fill-opacity":Y?function(se){var Ae;return Ie(se,null===(Ae=Y.interactivityService)||void 0===Ae?void 0:Ae.hasSelection(),Y.chart.activeData.hasHighlights)}:0,"stroke-opacity":Y?function(se){var Ae;return ve.opacity(se.columnStyle.border,Y.chart.style,(Y.chart.activeData.hasHighlights||(null===(Ae=Y.interactivityService)||void 0===Ae?void 0:Ae.hasSelection()))&&!se.highlight)}:0})}function Z(P,ae,Y,se){return P.attr("aria-selected",function(Ae){return Ae.selected}).style("fill-opacity",function(Ae){return Ie(Ae,ae,Y)}).style("stroke-opacity",function(Ae){return ve.opacity(Ae.columnStyle.border,se,(ae||Y)&&!Ae.selected)})}function te(P){var ae=this,Y=this.activeData,se=this.style,Ae=V(this,P,Y,!this.animator),fe=Ae.updatedShapes,ie=Ae.removedShapes;return fe.interrupt(),this.interactivityService&&fe.attrs({tabindex:0,focusable:!0,role:"option","aria-selected":function(le){return le.selected},"aria-label":function(le){return null!=le.value?le.value:"null"},"data-automation-type":"column-chart-rect"}).classed(oe.Pg,!Vt.M.isInternetExplorerOrEdge()),this.usesUngroupedRenderer()?fe.styles({"stroke-width":function(le){return ve.size(le.columnStyle.border,se)},stroke:function(le){return ve.color(le.columnStyle.border,se)},fill:function(le){return Y.series[le.seriesIndex].columnStyle.fillColor}}):fe.styles({"stroke-width":function(le){return ve.optimized(ve.size(le.columnStyle.border,se),ve.size(Y.series[le.seriesIndex].columnStyle.border,se))},stroke:function(le){return ve.optimized(ve.color(le.columnStyle.border,se),ve.color(Y.series[le.seriesIndex].columnStyle.border,se))}}),fe.styles({"stroke-dasharray":function(le){return ve.strokePattern(le,ae.layout,ae.isColumn,ae.valueAxis.invertAxis)},"clip-path":function(le){return ve.rectClipPath(le,se,!1)},"-webkit-clip-path":function(le){return ve.rectClipPath(le,se,!0)}}).attrs({"aria-setsize":Y.dataPointsCount,"aria-posinset":function(le){return le.posinset}}),A(fe,this.layout.shapeLayout,{chart:this,interactivityService:this.interactivityService}),ie.remove(),fe}function Ne(P){var Oe,et,ut,at,B,ae=P.isBar,Y=P.valueAxisProps,se=P.layout,Ae=P.columnWidth,fe=P.interactivityService,ie=this.activeData,le=ie.hasHighlights;if(void 0!==Y&&(et=_.filter(ie.series,function(Fe){return Fe.uncertainty.renderUncertainty}),Oe=!_.isEmpty(et)),Oe){var E,R,z,S=fe?.hasSelection(),g=Ae/2,M=Y.scale.range(),h=Y.scale,L=void 0;if(ae){var H=function(Me){return se.shapeLayout.y(Me)+g-(Me.drawThinner?g/2:0)};L=function(Me){return"translate(".concat(h(Me.value),", ").concat(H(Me),")")},E=d3.line().x(se.uncertaintyLayout.lower).y(H),R=d3.line().x(se.uncertaintyLayout.upper).y(H),z=M[1]<M[0]}else{var ye=function(Me){return se.shapeLayout.x(Me)+g-(Me.drawThinner?g/2:0)};L=function(Me){return"translate(".concat(ye(Me),", ").concat(h(Me.value),")")},E=d3.line().x(ye).y(se.uncertaintyLayout.lower),R=d3.line().x(ye).y(se.uncertaintyLayout.upper),z=M[1]>M[0]}E.defined(function(Fe){var Me;return null!=(null===(Me=Fe?.uncertainty)||void 0===Me?void 0:Me.lower)&&(!le||Fe.highlight)}),R.defined(function(Fe){var Me;return null!=(null===(Me=Fe?.uncertainty)||void 0===Me?void 0:Me.upper)&&(!le||Fe.highlight)});var Pe=(0,Ge.B9)(this.mainGraphicsContext);ut=(0,Ge.FZ)(Pe,et,function(Fe){return h},L,Math.min(10,Ae-2),le,S);var p=_.filter(et,function(Fe){return Fe.uncertainty.markers.show});if(_.isEmpty(p))Pe.selectAll(Ge.YU.selector).remove();else{var f=new K.Wo,W=this.mainGraphicsContext.selectAll("defs").data([1]).join("defs").attr("class",Ge.Ok.class),G=[];Oe&&(0,Ge.iD)(p,G),f.ensureMarkers(W,G);var Ce=(0,Ge.di)(Pe,et,R,E,z,f,S,le);at=Pe.selectAll(Ge.E6.selector),(B=function(Me,Ee){(0,Ge.xl)(Ce,R,E,z,f,Me,Ee)})(S,le)}}else(0,Ge.OY)(this.mainGraphicsContext);return{bars:ut,markerPaths:at,updateActiveHighlightMarkers:B}}function be(P,ae,Y,se,Ae){var fe=!Ae,ie=P.selectAll(St.L0.selector).selectAll("rect".concat(ae));ie.filter(function(le){return le.categoryIndex===Y}).interrupt().style("fill-opacity",function(le){return oe.Ko*(0,We.TD)(le.columnStyle.fillTransparency)});var Se=ie.filter(function(le){return(void 0===se||Ae||le.categoryIndex===se)&&le.categoryIndex!==Y});(fe?Se.transition():Se).style("fill-opacity",function(le){return oe.eU*(0,We.TD)(le.columnStyle.fillTransparency)})}function Ie(P,ae,Y){return(0,oe.eR)(P.selected,P.highlight,ae,Y,(0,We.TD)(P.columnStyle.fillTransparency))}function ce(P,ae){return(0,We.TD)(P.fillTransparency)*(ae?oe.eU:oe.Ko)}function ne(P,ae){var Y=this,se=this.style,Ae=this.scaledMargin,fe=this.ribbonGapSize,ie=this.layout,Se=this.mainGraphicsContext,le=this.isColumn,Oe=this.interactivityService,et=this.hostService,ut=this.hasRibbonBands?this.activeData.series:[],at=.7;P&&(P=null!=ae);var B=function(z){var H=function(P,ae,Y,se){var g,M,h,L,Ae=P.shapeLayout,fe=ae.d1,ie=ae.d2,Se=Ae.x(fe),le=Ae.y(fe),Oe=Ae.width(fe),et=Ae.height(fe),ut=Ae.x(ie),at=Ae.y(ie),B=Ae.width(ie),S=Ae.height(ie);if(se){var E=Se+Oe+Y,R=ut-Y;g={x:E,y:le},M={x:E,y:le+et},h={x:R,y:at},L={x:R,y:at+S}}else{var z=le-Y,H=at+S+Y;g={x:Se,y:z},M={x:Se+Oe,y:z},h={x:ut,y:H},L={x:ut+B,y:H}}return{bottomLeft:g,topLeft:M,bottomRight:h,topRight:L}}(ie,z,fe,le),ye=d3.interpolateNumber(H.bottomLeft.x,H.bottomRight.x),Pe=d3.interpolateNumber(H.bottomLeft.y,H.bottomRight.y),p="M".concat(H.bottomLeft.x,",").concat(H.bottomLeft.y);return p+=le?"C".concat(ye(at),",").concat(H.bottomLeft.y," ").concat(ye(1-at),",").concat(H.bottomRight.y," ").concat(H.bottomRight.x,",").concat(H.bottomRight.y):"C".concat(H.bottomLeft.x,",").concat(Pe(at)," ").concat(H.bottomRight.x,",").concat(Pe(1-at)," ").concat(H.bottomRight.x,",").concat(H.bottomRight.y),p+="L".concat(H.topRight.x,",").concat(H.topRight.y),ye=d3.interpolateNumber(H.topRight.x,H.topLeft.x),Pe=d3.interpolateNumber(H.topRight.y,H.topLeft.y),(p+=le?"C".concat(ye(at),",").concat(H.topRight.y," ").concat(ye(1-at),",").concat(H.topLeft.y," ").concat(H.topLeft.x,",").concat(H.topLeft.y):"C".concat(H.topRight.x,",").concat(Pe(at)," ").concat(H.topLeft.x,",").concat(Pe(1-at)," ").concat(H.topLeft.x,",").concat(H.topLeft.y))+"L".concat(H.bottomLeft.x,",").concat(H.bottomLeft.y,"Z")},S=Se.select(Ct.selector);S.empty()&&(S=Se.append("g").classed(Ct.class,!0));var g=Se.select(ze.selector);g.empty()&&(g=Se.append("defs").classed(ze.class,!0));var M=function(z){return"".concat(et.instanceId,"-").concat(z.d1.categoryIndex,"-").concat(z.d1.seriesIndex)},h=g.selectAll("clipPath").data(_.flatMap(ut,function(R){var z,H;return null!==(z=R.ribbonBands)&&void 0!==z&&z.border.strokeShow?null===(H=R.ribbonBands)||void 0===H?void 0:H.dataPoints:[]}),M),L=h.enter().append("clipPath").attr("id",M);L.append("path");var E=L.merge(h).select("path");(P?E.transition().duration(ae.getDuration()):E.interrupt()).attr("d",B),h.exit().remove(),S.selectAll(Le.selector).data(ut,function(R){return R.key}).join(function(R){return R.append("g").classed(Le.class,!0)}).styles({fill:function(z){return se.isHighContrast?se.colorPalette.backgroundNeutral.value:z.ribbonBands.fillColor},"fill-opacity":function(z){return ce(z.ribbonBands,Oe?.hasSelection())},stroke:function(z){return ve.color(z.ribbonBands.border,se)},"stroke-width":function(z){return ve.size(z.ribbonBands.border,se)},"stroke-opacity":function(z){return ve.opacity(z.ribbonBands.border,se,Oe?.hasSelection())}}).each(function(R,z,H){At.fF.assert(function(){return void 0!==R.ribbonBands},"ribbonBands must be defined.");var ye=R.ribbonBands.dataPoints;At.fF.assert(function(){return void 0!==ye},"dataPoints must be defined.");var Pe=d3.select(H[z]).selectAll(T.selector).data(ye,function(p){var f;return null!==(f=p.d1.pairKey)&&void 0!==f?f:p.d1.key}).join(function(p){return p.append("path").classed(T.class,!0)}).style("clip-path",function(p){return R.ribbonBands.border.strokeShow&&!se.isHighContrast?"url(#".concat(M(p),")"):null});Y.featureSwitches.onObject&&Pe.classed(Ue.cy,!0).attr(Ue.Ez,"ribbon").attr(Ue.QZ,3).each(function(){Ue.O5.setDataForElement(this,{outlineRestrictionOptions:{margin:Ae},getDisplayName:function(){return et.getLocalizedString("MiniToolbar_Ribbon",R.displayName)},getRegionOutlines:function(){return[]}})}),(P?Pe.transition().duration(ae.getDuration()):Pe.interrupt()).attr("d",B)})}},38859:function(ci,va,b){"use strict";b.d(va,{$3:function(){return et},C3:function(){return R},Ds:function(){return z},E5:function(){return se},EX:function(){return ut},G1:function(){return L},HQ:function(){return ne},L0:function(){return Z},L2:function(){return h},Q4:function(){return le},V5:function(){return Pe},VY:function(){return M},_f:function(){return ae},bS:function(){return ie},e3:function(){return E},fX:function(){return P},fl:function(){return ce},hg:function(){return H},iR:function(){return J},jL:function(){return Ae},nD:function(){return Y},nO:function(){return fe},o9:function(){return Se},t3:function(){return ye}});var d=b(44783),K=b(79154),oe=b(62458),Ue=b(41640),Ge=b(32041),$e=b(43286),Gt=b(72489),Ot=b(22733),Vt=b(90120),At=b(46769),We=b(21181),kt=b(18664),rt=b(12198),St=b(44196),Pt=b(77558),j=b(20624),vt=b(382),Ct=b(56707),ze=b(34519),Le=b(45028),T=b(33948),xe=b(93907),ot=b(63892),ge=b(47316),Qe=b(34969),ve=b(5381),V=[vt.h.auto,vt.h.outsideEnd,vt.h.insideEnd,vt.h.insideCenter,vt.h.insideBase],A=[vt.h.auto,vt.h.insideCenter,vt.h.insideEnd,vt.h.insideBase],Z=(0,K.CH)("series"),te=[16,4,1,2],Ne=[1,4,2],be=[16],Ie=4,J=[0,1],ce=0,ne={seriesOrderReversed:!1,seriesOrderSorted:!1,stackedGapSize:0,stackedGapExplodes:!1,clusteredGapSize:0,clusteredGapOverlaps:!1,clusteredGapOverlapReverse:!1,ribbonGapSize:0},P=0,ae=10,Y=5,se=75,Ae=100;function fe(f){return{strokeShow:!1,strokeColorMatch:!1,strokeTransparency:0,strokeWidth:1,strokeColor:Vt.v.getThemeColor(f,"foregroundNeutralSecondaryAlt"),strokePattern:ge.Dv.solid,outlineOnly:!1}}function ie(f){return{fillMatchColor:!0,fillColor:Vt.v.getThemeColor(f,"backgroundNeutral"),fillTransparency:30,border:fe(f)}}function Se(f,W){if(W.stackedGapExplodes&&W.stackedGapSize>0){oe.fF.assert(function(){return W.stackedGapExplodeStepSize>0},"stackedGapExplodeStepSize must be pre-computed via the converter.");var G=f.indexFromZeroValue*(f.value<0?-1:1)*W.stackedGapExplodeStepSize;f.position+=G,f.originalPosition+=G}}function le(f){var G,W=this,Ce=this.activeData;if(oe.fF.assertValue(Ce,"createLabelDataPoints this.activeData must be set"),null===(G=Ce.dataLabelsSettings)||void 0===G||!G.show)return[];var Fe=Ce.series,Me=(0,We.fI)(),Ee=Fe.map(function(Ye){var tt=Ye.labelSettings?Ye.labelSettings:Ce.dataLabelsSettings;if(!tt.show)return{labelDataPoints:[],maxNumberOfLabels:0};var Et=100!==tt.labelDensity&&Ce.isScalar?(0,ve.SS)(W.availableWidth,tt.labelDensity,Ie,rt.v.estimatedLabelWidth):Ye.data.length;return{labelDataPoints:Ye.data.filter(function(yt){return!(null==yt||null==yt.value||Ce.hasHighlights&&!yt.highlight)}).map(function(yt){var Tt=Oe.call(W,yt,tt,Me,f,Ye);return yt.labelDataPointContainerEnabled?(0,ze.U)({cartesianDataPoint:yt,currentAxisProperties:W.valueAxis,currentSeries:Ye,enableValueDataLabel:tt.enableValueDataLabel,formattersCache:Me,isStacked100:W.isStacked100,labelDataPoint:Tt,percentOfTotal:yt.value,seriesName:Ye.displayName,valueDataLabelSettings:tt,valueShowBlankAs:tt.showBlankAs,getOutsideLabelFill:function(Nt){return(0,T.j)(Nt.labelFill,!1,W.isComboChart,f)},getInsideLabelFill:function(Nt){return(0,T.j)(Nt.labelFill,!0,W.isComboChart,f)}}):Tt}),maxNumberOfLabels:Et}});return Ce.isScalar?new rt.v(Ee,Fe,{width:this.availableWidth,height:this.availableHeight},this.valueAxis.scale).getSortedDataLabels():Ee}function Oe(f,W,G,Ce,Fe){var Me,Ee;W?.displayUnits===Ct.In&&(W.precision=void 0);var Ye=(0,ve.d6)(this.valueAxis,W);if(null!==(Me=f.dynamicLabelValue)&&void 0!==Me&&Me.enabled)Ee=(0,At.nU)(f.dynamicLabelValue,G,W,Ye,Fe,"Value"),!this.featureSwitches.labelEnhancementsM0&&this.featureSwitches.measureDrivenDataLabels&&""===Ee&&(Ee=void 0);else{var tt=W?.displayUnits===Ct.In?W.valueCustomFormatString:void 0,dt=(0,$e.yE)(this.columnChartType,48)&&!this.featureSwitches.labelEnhancementsM0?Ct.L0:tt??f.labelFormatString,Et=G.getOrCreate(dt,W,Ye.units,Ye.getPrecision(!!dt,Fe.type)),ct=f.value;this.isStacked100&&this.featureSwitches.labelEnhancementsM0&&(ct=f.originalValue),Ee=(0,ve.Bw)(Et.format(ct))}var Rt,$t,yt=W.fontProperties,Tt=(0,kt.qk)(yt,Ee),ra=Ge.b.measureSvgTextWidth(Tt),Nt=Ge.b.estimateSvgTextHeight(Tt,!0);return Rt=this.isClusteredOptimized?function(f){switch(f){case vt.h.insideEnd:return[4];case vt.h.insideCenter:return[1];case vt.h.insideBase:return[2];case vt.h.outsideEnd:return[16];default:return te}}(W.position):function(f){switch(f){case vt.h.insideEnd:return[4];case vt.h.insideBase:return[2];case vt.h.insideCenter:return[1];default:return Ne}}(W.position),W.labelOverflow&&(Rt=function(f){var W=void 0,Ce=_.map(f,function(Fe){return function(Me){switch(Me){case 4:return 128;case 2:return 64;case 1:return 32;default:return W}}(Fe)}).filter(function(Fe){return Fe!==W});return f.concat(Ce)}(Rt)),$t=this.isBar?f.value>=0?this.valueAxis.invertAxis?4:3:this.valueAxis.invertAxis?3:4:f.value>=0?this.valueAxis.invertAxis?2:1:this.valueAxis.invertAxis?1:2,{isPreferred:!1,text:Ee,textSize:{width:ra,height:Nt},outsideFill:(0,T.j)(f.labelFill,!1,this.isComboChart,Ce),insideFill:(0,T.j)(f.labelFill,!0,this.isComboChart,Ce),parentType:1,parentShape:{rect:{left:this.layout.shapeLayout.x(f),top:this.layout.shapeLayout.y(f),width:this.layout.shapeLayout.width(f),height:this.layout.shapeLayout.height(f)},orientation:$t,validPositions:Rt},identity:f.identity,fontProperties:yt,hasBackground:W.enableBackground,backgroundColor:W.backgroundColor,backgroundTransparency:W.backgroundTransparency,transparency:W.transparency}}function et(f){var G,W=this,Ce=this.activeData;if(oe.fF.assertValue(Ce,"createTotalLabelDataPoints this.activeData must be set"),!this.isStackedOptimized||null===(G=Ce.totalLabelsSettings)||void 0===G||!G.show||this.isStacked100)return[];for(var Fe=(0,Qe.GN)(Ce.valuesMetadata),Me=(0,Gt.EO)(Fe,Ot.p.general.formatString),Ee=(0,We.fI)(),Ye=this.layout.shapeLayout,tt=Ce.totalLabelsSettings,dt=(0,ve.d6)(this.valueAxis,tt),Et=[],ct=function(Nt,Rt,$t){if(0!==Nt){var oa=Ce.totals[Rt],Wa=Ee.getOrCreate(oa.dynamicFormatString||Me,tt,dt.units,tt.precision),Ea=(0,ve.Bw)(Wa.format(Nt)),Pa=tt.fontProperties,Bt=(0,kt.qk)(Pa,Ea),ia=tt.showPositiveAndNegative?Nt:Nt>0?oa.positive:oa.negative,Ca={value:ia,position:ia<0?0:ia,valueAbsolute:Math.abs(ia),categoryIndex:oa.categoryIndex,categoryValue:oa.categoryValue,labelSettings:void 0,columnStyle:{fillColor:void 0,fillTransparency:0,border:fe(f)},originalValue:void 0,originalPosition:void 0,key:void 0,seriesIndex:void 0,selected:void 0,identity:void 0,labelDataPointContainerEnabled:!1,indexFromZeroValue:W.data.layout.stackedGapExplodes?(Nt>0?oa.positiveCount:oa.negativeCount)-1:0};Se(Ca,W.data.layout),Et.push({isPreferred:!1,text:Ea,textSize:{width:Ge.b.measureSvgTextWidth(Bt),height:Ge.b.estimateSvgTextHeight(Bt,!0)},outsideFill:(0,T.j)(oa?.labelFill,!1,W.isComboChart,f),insideFill:(0,T.j)(oa?.labelFill,!0,W.isComboChart,f),parentType:1,parentShape:{rect:{left:Ye.x(Ca),top:Ye.y(Ca),width:Ye.width(Ca),height:Ye.height(Ca)},orientation:W.isBar?Nt>=0?$t?4:3:$t?3:4:Nt>=0?$t?2:1:$t?1:2,validPositions:be},identity:void 0,fontProperties:Pa,hasBackground:tt.enableBackground,backgroundColor:tt.backgroundColor,backgroundTransparency:tt.backgroundTransparency,isTotal:!0})}},yt=0;yt<Ce.totals.length;yt++){var Tt=Ce.totals[yt];Tt&&(Ce.totalLabelsSettings.showPositiveAndNegative?(ct(Tt.positive,yt,this.valueAxis.invertAxis),ct(Tt.negative,yt,this.valueAxis.invertAxis)):ct(Tt.net,yt,this.valueAxis.invertAxis))}return[{labelDataPoints:Et,maxNumberOfLabels:2*Ce.totals.length,isTotal:!0}]}function ut(f){var W=this,G=this.activeData;if(oe.fF.assertValue(G,"createUncertaintyLabels this.activeData must be set"),this.isStackedOptimized||_.isEmpty(_.filter(this.activeData.series,function(tt){var dt;return null===(dt=tt.uncertainty)||void 0===dt?void 0:dt.labels.show})))return[];var Ce=(0,We.fI)(),Fe=this.layout.shapeLayout,Me=this.layout.uncertaintyLayout,Ee=this.columnWidth/2,Ye=Ee/2;return G.series.map(function(tt){var dt=tt.uncertainty;if(!dt||!dt.renderUncertainty||!dt.labels.show)return{labelDataPoints:[],maxNumberOfLabels:0};var Et=dt.labels,yt=Et.fontProperties,Tt=(0,ve.d6)(W.valueAxis,Et),ra=[];return tt.data.forEach(function(Nt){if(null!=Nt&&null!=Nt.value&&(!G.hasHighlights||Nt.highlight)&&null!=Nt.uncertainty){for(var Rt=[],$t=(0,St.Ww)(Nt.value,Nt.uncertainty,Et.errorFormat),oa=[$t.lower,$t.upper],Wa=0;Wa<2;Wa++){var Ea=oa[Wa],Pa=1===Wa;if(null!=(Pa?Nt.uncertainty.upper:Nt.uncertainty.lower)){var ia=void 0;if(Et.errorFormat===Pt.K.relativePercentage)ia=(0,St.O2)(Ea,W.hostService);else{var Ca=Nt.labelFormatString,Ma=Ce.getOrCreate(Ca,Et,Tt.units,Tt.getPrecision(!!Ca,tt.type));ia=(0,ve.Bw)(Ma.format(Ea))}oe.fF.assertValue(ia,"label has no value -- columnUtil.createUncertaintyLabels");var ca=(0,kt.qk)(yt,ia),de=void 0,je=void 0;W.isBar?(de={x:Pa?Me.upper(Nt):Me.lower(Nt),y:Fe.y(Nt)+(Nt.drawThinner?Ye:Ee)},je=[Pa?8:4]):(de={x:Fe.x(Nt)+(Nt.drawThinner?Ye:Ee),y:Pa?Me.upper(Nt):Me.lower(Nt)},je=[Pa?1:2]),Rt.push({isPreferred:!1,text:ia,textSize:{width:Ge.b.measureSvgTextWidth(ca)+Ct.TS,height:Ge.b.estimateSvgTextHeight(ca,!0)},outsideFill:yt.color?yt.color:Vt.v.getThemeColor(f,Ct.uQ),insideFill:yt.color?yt.color:Vt.v.getThemeColor(f,Ct.pl),parentType:0,parentShape:{point:de,radius:0,validPositions:je},identity:void 0,fontProperties:yt,hasBackground:Et.enableBackground,backgroundColor:Et.backgroundColor,backgroundTransparency:Et.backgroundTransparency})}}_.isEmpty(Rt)||ra.push.apply(ra,Rt)}}),{labelDataPoints:ra,maxNumberOfLabels:100}})}var g=1e-4;function M(f,W){if(0===f.length)return{min:0,max:10};var Ce=d3.min(f,function(Me){return d3.min(Me.data,function(Ee){return Ee.position-Ee.valueAbsolute})}),Fe=d3.max(f,function(Me){return d3.max(Me.data,function(Ee){return Ee.position})});return W&&(Ce=(0,Ue.W0)(Ce,g),Fe=(0,Ue.W0)(Fe,g)),{min:Ce,max:Fe}}function h(f,W,G,Ce,Fe){void 0===G&&(G=!1);var Me=(0,We.bT)({style:f,textClassName:"smallLightLabel",noColor:!0});return Me.position=null,Me.labelDensity=Ct.go,Me.labelOrientation=j.B.Horizontal,G?(Me.enableBackground=!0,Me.backgroundColor=Vt.v.getThemeColor(f,d.U),Me.backgroundTransparency=Ct.r_):Me.enableBackground=!1,Me.enableTitleDataLabel=!1,W?(Me.enableValueDataLabel=!1,Me.enableDetailDataLabel=!0,Me.detailContentType=xe.W.Percent):(Me.enableValueDataLabel=!0,Me.enableDetailDataLabel=!1),Me.labelContainerMaxWidth=Le.w9,Me.labelContentLayout=function(f,W){return f&&!H(f)&&(Pe(f)||R(f,W)||z(f))||ye(f)?ot.v.MultiLine:ot.v.SingleLine}(Ce,Fe),Me}function L(f,W){return!R(f,W)}function E(f,W){return L(f,W)?V:A}function R(f,W){return(0,$e.yE)(f,16)&&(1!==W||z(f))}function z(f){return(0,$e.yE)(f,48)}function H(f){return(0,$e.yE)(f,2)}function ye(f){return(0,$e.yE)(f,4)}function Pe(f){return(0,$e.yE)(f,8)}},88439:function(ci,va,b){"use strict";b.d(va,{GJ:function(){return Vt},on:function(){return Ot},pD:function(){return A}});var d=b(81337),K=b(84741),oe=b(61617),Ue=b(62458),Ge=b(56578),$e=b(32379),Gt=[[K.rJ.y,K.rJ.tooltips],[K.rJ.y2]];function Ot(){return Gt}function Vt(J,ce,ne){if(0===J.length)return[];var P,ae,Y;switch(ce){case 13:case 14:P=[4,0],ae=4;break;default:Ue.fF.assertFail("There is no support to merge formatting cards for this chart type (enum): ".concat(ce))}if(Y=function(J,ce){if(0!==ce.length){var ne={};J.forEach(function(fe){ne[fe.type]=fe.card});for(var P=[],ae=function(ie){ne[ie]&&ne[ie].forEach(function(Se){return P.push({card:Se,type:ie})})},Y=0,se=ce;Y<se.length;Y++)ae(se[Y]);return P}}(J,P),0===Y.length)return[];for(var se={},Ae=0,fe=Y;Ae<fe.length;Ae++){var ie=fe[Ae],Se=ie.card;se[Se.uid]=se[Se.uid]?{card:We(se[Se.uid].card,Se,se[Se.uid].type,ie.type,ne,ae),type:ie.type}:{card:Se,type:ie.type}}for(var le=[],Oe=0,et=_.values(se);Oe<et.length;Oe++)le.push(et[Oe].card);return le}function We(J,ce,ne,P,ae,Y){var se=Y===P?ce.topLevelToggle:J.topLevelToggle,Ae=(0,d.__assign)((0,d.__assign)({},J),{topLevelToggle:se}),fe={};ce.groups.forEach(function(at){fe[at.uid]=at}),J.groups.forEach(function(at,B){if((0,Ge.Qu)(at))Ue.fF.assertFail("Unsupported placeholder");else{var S=fe[at.uid];S&&(Ae.groups[B]=kt(at,S,ne,P,ae,"errorBars"===J.uid),delete fe[at.uid])}});for(var ie=0,Se=ce.groups;ie<Se.length;ie++){var le=Se[ie];if((0,Ge.Qu)(le))return void Ue.fF.assertFail("Unsupported placeholder");var Oe=fe[le.uid];Oe&&Ae.groups.push(Oe)}var et=_.unionWith(J.revertToDefaultDescriptors,ce.revertToDefaultDescriptors,_.isEqual),ut=K.OA;return Ae.revertToDefaultDescriptors=et.filter(function(at){return ut[at.objectName]&&ut[at.objectName][at.propertyName]}),Ae}function kt(J,ce,ne,P,ae,Y){var se=(0,d.__assign)({},ce),Ae=J.slices;Ue.fF.assert(function(){return!Ae||Ae.every(function(ie){return!(0,Ge.Qu)(ie)})},"Unexpected placeholder");var fe=ce.slices;return Ue.fF.assert(function(){return!fe||fe.every(function(ie){return!(0,Ge.Qu)(ie)})},"Unexpected placeholder"),se.slices=j(Ae,fe,ne,P,ae),se.container=J.container&&ce.container?function(J,ce,ne,P,ae,Y){var se,Ae=(0,d.__assign)({},ce);Ae.containerItems=[];var fe=(0,d.__spreadArray)([],J.containerItems,!0),ie=(0,d.__spreadArray)([],ce.containerItems,!0);if(Y)(se=Ae.containerItems).push.apply(se,(0,d.__spreadArray)((0,d.__spreadArray)([],ie,!1),fe,!1));else{var Se=void 0;Ue.fF.assert(function(){return fe[0].displayName===ie[0].displayName},"Trying to create a template from formattingContainerItems from items that are not equal"),J.containerItems.length>0&&ce.containerItems.length>0&&(Se=function(J,ce,ne,P,ae){var Y=(0,d.__assign)((0,d.__assign)({},ce),{groups:[],slices:[]}),se={};ce.groups.forEach(function(Se){se[Se.uid]=Se}),J.groups.forEach(function(Se,le){var Oe=se[Se.uid];Oe?(Y.groups[le]=kt(Se,Oe,ne,P,ae),delete se[Se.uid]):Y.groups[le]=Se});for(var Ae=0,fe=ce.groups;Ae<fe.length;Ae++){var ie=fe[Ae];se[ie.uid]&&Y.groups.push(se[ie.uid])}return Y.slices=j(J.slices,ce.slices,ne,P,ae),Y}(fe.shift(),ie.shift(),ne,P,ae)),Ae.containerItems.push(Se);for(var le=[],Oe=0,et=fe;Oe<et.length;Oe++)le.push({containerItem:et[Oe],layerType:ne});for(var at=0,B=ie;at<B.length;at++)le.push({containerItem:B[at],layerType:P});for(var g=0,M=le;g<M.length;g++){var h=M[g];Ae.containerItems.push(ze(Se,h.containerItem,h.layerType))}}return Ae}(J.container,ce.container,ne,P,ae,Y):J.container||ce.container,se}function St(J){return _.findIndex(J,function(ce){return!(0,Ge.IW)(ce)&&function(J){var ce=K.OA.labels.labelDensity,ne=J.control.properties.descriptor;return ne.objectName===ce.objectName&&ne.propertyName===ce.propertyName}(ce)})}function j(J,ce,ne,P,ae){var Y=[],se=St(J),Ae=J[se],fe=St(ce),ie=ce[fe];Ae&&ie&&(J=J.filter(function(g,M){return!(0,Ge.IW)(g)&&M!==se}),ce=ce.filter(function(g,M){return!(0,Ge.IW)(g)&&M!==fe}));var Se=K.OA,le={};ce.forEach(function(g){V(g,Se)&&(le[(0,oe.zU)(g,!1)]=g)}),J.forEach(function(g){if(V(g,Se)){var M=le[(0,oe.zU)(g,!1)],h=g.displayName;if(function(J,ce){return!(!ce||ce.control.type!==J.control.type||!function(J,ce){if(!(0,Ge.IW)(J)&&!(0,Ge.IW)(ce)){var ne=J.control.properties.descriptor,P=ce.control.properties.descriptor;if(_.isEqual(_.omit(P,["selector","instanceKind"]),_.omit(ne,["selector","instanceKind"]))){if($e.fS(P.selector,ne.selector))return!0;var se=void 0;if(null==P.selector&&(se=$e.N6(ne.selector)),null==ne.selector&&(se=$e.N6(P.selector)),se)return function(J,ce){var ne,P=J.control.properties.descriptor,ae=ce.control.properties.descriptor;P.instanceKind|=ae.instanceKind,null!==(ne=P.selector)&&void 0!==ne||(P.selector=ae.selector)}(J,ce),!0}return!1}return!0}(J,ce))&&("Dropdown"!==ce.control.type||!!ge(ce.control.properties,J.control.properties))}(g,M)){if((0,Ge.IW)(g)&&(0,Ge.IW)(M))for(var L in g.control.properties){var E=g.control.properties[L],R=M.control.properties[L];E&&R&&_.isEqual(E.descriptor,R.descriptor)&&(E.value=R.value)}else g.control.properties.value=M.control.properties.value;delete le[(0,oe.zU)(M,!1)]}else h=te(g.uid,ne,ae);Y.push((0,d.__assign)((0,d.__assign)({},g),{displayName:h}))}});for(var Oe=0,et=ce;Oe<et.length;Oe++){var ut=et[Oe],at=le[(0,oe.zU)(ut,!1)],B=Qe(ut.uid,P);if(at){var S=te(at.uid,P,ae);Y.push((0,d.__assign)((0,d.__assign)({},at),{displayName:S,uid:B}))}}return Ae&&ie&&function(J,ce,ne,P){J.control.properties.value=ce.control.properties.value;var ae=P("Visual_LabelDensity");ne.push((0,d.__assign)((0,d.__assign)({},J),{displayName:ae}))}(Ae,ie,Y,ae),Y}function ze(J,ce,ne){var P=(0,d.__assign)({},ce),ae={};return ce.groups.forEach(function(Y){ae[Ge.SS.getGroupUid(Y.uid)]=Y}),Ue.fF.assert(function(){return J.groups.length<=ce.groups.length},"template container item has more groups than created container item"),J.groups.forEach(function(Y,se){var Ae=Ge.SS.getGroupUid(Y.uid);if(ae[Ae]){var fe={};ae[Ae].slices.forEach(function(ie){fe[Ge.IN.getGroupAndSliceUid(ie.uid)]=ie}),P.groups[se].slices=[],Y.slices.forEach(function(ie){if((0,Ge.Qu)(ie))Ue.fF.assertFail("Unsupported placeholder");else{var Se=Ge.IN.getGroupAndSliceUid(ie.uid),le=fe[Se];if(le||(le=fe[function(J,ce){return J.replace("__".concat(ce,"__"),"")}(Se,ne)]),le)if("Dropdown"===le.control.type&&"Dropdown"===ie.control.type)if(ge(le.control.properties,ie.control.properties))le.displayName=ie.displayName,P.groups[se].slices.push(le);else{var ut=P.groups[se].uid;P.groups[se].slices.push((0,d.__assign)((0,d.__assign)({},ie),{uid:"".concat(ut).concat(ie.uid),displayName:ie.displayName,disabled:!0}))}else le.displayName=ie.displayName,P.groups[se].slices.push(le);else ut=P.groups[se].uid,P.groups[se].slices.push((0,d.__assign)((0,d.__assign)({},ie),{uid:"".concat(ut).concat(ie.uid),displayName:ie.displayName,disabled:!0}))}})}}),P}function ot(J){return void 0===J.items}function ge(J,ce){return!(!ot(J)||!ot(ce))&&_.isEqual(J.filterValues,ce.filterValues)}function Qe(J,ce){return"".concat(J,"__").concat(ce,"__")}function V(J,ce){if((0,Ge.IW)(J)){var ne=J.control.properties;return!!ne&&Object.keys(ne).every(function(ae){var Y=ne[ae],se=Y?.descriptor;return!se||!!(se&&ce[se.objectName]&&ce[se.objectName][se.propertyName])})}var P=J.control.properties.descriptor;return!!(P&&ce[P.objectName]&&ce[P.objectName][P.propertyName])}function A(J,ce){var ne=[];switch(ce){case 13:case 14:ne=["bars","lines","shadeArea","layout","markers","labels","seriesLabels","totals","errorBars"]}return function(J,ce){if(0===ce.length)return J;var ne={};J.forEach(function(Ae){ne[Ae.uid]=Ae});for(var P=[],ae=0,Y=ce;ae<Y.length;ae++){var se=Y[ae];ne[se]&&P.push(ne[se])}return P}(J,ne)}function te(J,ce,ne){var Y="Visual_Slice_Placeholder_"+function(J){for(var ne=0,P=Array.from(Ne.entries());ne<P.length;ne++){var ae=P[ne],se=ae[1];if(ae[0].includes(J))return se}return J}(Ge.IN.getSliceUid(J));return ne(Y,function(J,ce){switch(J){case 4:return ce("DisplayName_QuickCalc_PercentOfColumnTotal");case 0:return ce("Visual_Slice_PlaceholderChartType_Line");default:Ue.fF.assertFail("There is not support for merging this chart layer type for formattingCards yet")}}(ce,ne))}var Ne=new Map([[["detailLabelDisplayUnits","detailDisplayUnits","titleLabelDisplayUnits"],"displayUnits"],[["detailLabelPrecision","titleLabelPrecision"],"precision"]])},54365:function(ci,va,b){"use strict";b.d(va,{p:function(){return Pt}});var d=b(81337),K=b(53197),oe=b(62458),Ue=b(45034),Ge=b(6754),$e=b(78843),Gt=b(61289),Ot=b(82386),Vt=b(72489),At=b(94419),We=b(88439),kt=function(){function ze(){}return ze.prototype.ensureValueGroupAtSeriesIndex=function(Le,T,xe){if(!Le[T]){var ot=this.getValueGroupName(xe),ge={identity:this.getSeriesIdentity(xe),values:[],objects:this.getSeriesObjects(xe),name:ot};Le[T]=ge}return Le[T]},ze}(),rt=function(ze){function Le(T){var xe=ze.call(this)||this;return xe.matrix=T,xe}return(0,d.__extends)(Le,ze),Le.prototype.setSource=function(T){T.source=this.matrix.columns.levels[0].sources[0]},Le.prototype.getSeriesGroups=function(T,xe){return T&&_.map(T,function(ot){return _.isEmpty(ot.children)?1:ot.children.length})},Le.prototype.getSeriesDataPoints=function(T){return _.filter(this.matrix.columns.root.children,function(ot){return!ot.isSubtotal})},Le.prototype.getValueGroupName=function(T){return T.value||T.levelValues&&T.levelValues[0].value},Le.prototype.getSeriesObjects=function(T){return T.objects},Le.prototype.getSeriesIdentity=function(T){return T.identity},Le.prototype.getSeriesSourceColumn=function(T,xe){return void 0===xe&&(xe=null),_.create(T,{groupName:xe})},Le.prototype.createValueColumnForMeasure=function(T,xe,ot,ge,Qe){if(!xe[Qe]){var ve={identity:this.getSeriesIdentity(T),values:[],source:this.getSeriesSourceColumn(ot,ge),objects:void 0};xe[Qe]=ve}return xe[Qe]},Le}(kt),St=function(ze){function Le(T){return ze.call(this)||this}return(0,d.__extends)(Le,ze),Le.prototype.setSource=function(T){},Le.prototype.getSeriesGroups=function(T,xe){return xe?[xe]:[]},Le.prototype.getSeriesDataPoints=function(T){return T},Le.prototype.getValueGroupName=function(T){return T.displayName},Le.prototype.getSeriesObjects=function(T){return T.objects},Le.prototype.getSeriesIdentity=function(T){},Le.prototype.getSeriesSourceColumn=function(T,xe){return T},Le.prototype.createValueColumnForMeasure=function(T,xe,ot,ge,Qe){if(!xe[Qe]){var ve={identity:this.getSeriesIdentity(T),values:[],source:this.getSeriesSourceColumn(ot,ge),objects:[]};xe[Qe]=ve}return xe[Qe]},Le}(kt),Pt=function(){function ze(Le,T){var xe=this;this.sourceDataView=Le,this.formatStringPropId=T,oe.fF.assert(function(){return Le&&Le.metadata&&!!Le.matrix},"sourceDataView && sourceDataView.metadata && !!sourceDataView.matrix"),this.matrix=Le.matrix,this.hasRowChildren=!_.isEmpty(this.matrix.rows.root.children),this.hasColChildren=!_.isEmpty(this.matrix.columns.root.children),this.hasSeries=this.hasColChildren&&!_.isEmpty(this.matrix.columns.levels)&&_.every(this.matrix.columns.levels[0].sources,function(ge){return!ge.isMeasure}),this.hasCategories=this.matrix.rows.levels.length>1&&this.hasRowChildren,this.objects=Le.metadata.objects,this.frameCount=function(ze){return ze.rows.root.children?_.filter(ze.rows.root.children,function(Le){return!Le.isSubtotal}).length:0}(this.matrix),this._frameDisplayNames=new Ue.o(function(){return xe.getDisplayNameFromAllFrames()})}return ze.create=function(Le,T){return new ze(Le,T)},ze.prototype.getObjects=function(){return this.objects},ze.prototype.getFrameDisplayNames=function(){return this._frameDisplayNames.getValue()},ze.prototype.hasFrames=function(){return this.matrix&&this.frameCount>0&&!_.isEmpty(this.matrix.rows.levels)&&!!this.getFrameSourceColumns()},ze.prototype.getFrameCount=function(){return this.frameCount},ze.prototype.getFrameSourceColumns=function(){return this.matrix.rows.levels[0].sources},ze.prototype.getFrameNode=function(Le){return this.matrix.rows.root.children[Le]},ze.prototype.getValueSources=function(Le){return Le?(0,Ot.vC)(this.matrix.rows.levels[this.hasCategories?1:0]):this.matrix.valueSources},ze.prototype.buildCategoricals=function(Le,T,xe,ot,ge){var Qe=this,V=this.matrix.rows.root.children[Le];oe.fF.assert(function(){return!V.isSubtotal},"frame node should not be subtotal");var A=[];ge.forEach(function(ae,Y){A[Y]={shouldReadScopedValues:!ae&&Qe.hasSeries}});var Z=ge.map(function(ae){return Qe.hasSeries&&ae?new rt(Qe.matrix):new St(Qe.matrix)});A.forEach(function(ae){ae.allValueSources=Qe.getValueSources(ae.shouldReadScopedValues)});for(var te=0;te<Z.length;te++){var Ne=this.findUniqueFilteredValueSourcesAndIndices(A[te].allValueSources,ot&&ot[te]),be=Ne[0],Ie=Ne[1];A[te].requiredValueSources=be,A[te].requiredValueSourcesIndices=Ie,Z[te].setSource(T[te].values);var J=Z[te].getSeriesDataPoints(be);A[te].seriesNodes=J;var ce=Z[te].getSeriesGroups(J,Ie.length);A[te].seriesGroups=ce,A[te].valueGroups=Array(ce.length)}(0,Ot.y9)(this.hasCategories?V.children:[V],function(ae,Y,se){var Ae;if(!ae.isSubtotal){Qe.hasCategories&&function(ze,Le){oe.fF.assertNonEmpty(ze,"sourceCategoryHierarchicalGroupNodes"),oe.fF.assertNonEmpty(Le,"destinationCategories"),oe.fF.assert(function(){return _.every(ze,function(te){return 1===te.levelValues.length})&&ze.length===Le.length||1===ze.length&&ze[0].levelValues.length===Le.length},"pre-condition: there should be one category column per matrix row level/level source for Category.");var xe,ot,T=_.last(ze).objects,ge=ze[0];if(ze.length>1){(ot=new Array(ze.length))[0]=ge.levelValues[0].value;for(var Qe=ge.identity.expr,ve=1,V=ze.length;ve<V;ve++)ot[ve]=(ge=ze[ve]).levelValues[0].value,Qe=(0,At.xD)(Qe,ge.identity.expr);xe=(0,$e.TZ)(Qe)}else xe=ge.identity,ot=_.map(ge.levelValues,function(te){return te.value});for(var A=0,Z=Le.length;A<Z;A++)Le[A].identity.push(xe),Le[A].objects.push(T),Le[A].values.push(ot[A])}(se,xe);for(var fe=A.map(function(h){return h.shouldReadScopedValues?(0,Ot.Lr)(ae):ae.values}),ie=0;ie<A.length;ie++)for(var Se=A[ie],le=0;le<Se.seriesGroups.length;le++){for(var Oe=Se.seriesNodes&&Se.seriesNodes[le],et=Se.seriesGroups[le],ut=Z[ie].ensureValueGroupAtSeriesIndex(Se.valueGroups,le,Oe),at=[],B=0;B<et;B++){var S=le*et+B,g=Z[ie].createValueColumnForMeasure(Oe,T[ie].values,Se.requiredValueSources[Se.shouldReadScopedValues?S:B],ut.name,S);Qe.hasSeries||(S=Se.requiredValueSourcesIndices[S]);var M=null===(Ae=fe?.[ie])||void 0===Ae?void 0:Ae[S];_.isEmpty(Se.requiredValueSources)||Qe.readValues(M,g,Y),at.push(g)}ut.values=at}}});var P=this.hasSeries&&this.hasCategories&&_.isEmpty(A.filter(function(ae){return!_.isEmpty(ae.requiredValueSources)}));for(te=0;te<T.length;te++)(0,Ge.PO)(T[te].values,A[te].valueGroups),_.isEmpty(A[te].requiredValueSources)&&(ge[te]?P||(T[te].values=void 0):T[te]=void 0)},ze.prototype.findUniqueFilteredValueSourcesAndIndices=function(Le,T){if(_.isEmpty(Le))return[[],[]];for(var xe=[],ot=[],ge={},Qe=function(A){var Z=Le[A];if(!_.isEmpty(T)&&!_.some(T,function(te){return Z.roles[te]})||ge[Z.queryName])return"continue";xe.push(A),ot.push(Z),ge[Z.queryName]=!0},ve=0;ve<Le.length;ve++)Qe(ve);return[ot,xe]},ze.prototype.readCategories=function(){var Le=this.matrix.rows;if(oe.fF.assert(function(){return Le.levels.length<=1||2===Le.levels.length&&Le.levels[1].sources.length>=1||Le.levels.length>=2&&_.every(Le.levels,function(xe){return 1===xe.sources.length})},"Incorrect Levels/Sources count."),this.hasCategories){var T=[];return this.fillCategoriesMetadata(T),T}},ze.prototype.fillCategoriesMetadata=function(Le){var T=this;oe.fF.assert(function(){return T.hasCategories},"No categories");for(var xe=this.matrix.rows.levels,ot=1;ot<xe.length;ot++)for(var ge=0,Qe=xe[ot].sources;ge<Qe.length;ge++)Le.push({source:Qe[ge],values:[],identity:[],objects:[]})},ze.prototype.convertComboFrame=function(Le){var T=(0,We.on)();return this.convertFrameInternal(Le,T)},ze.prototype.createEmptyCategorical=function(Le){var T;return(T=Le.values).push.apply(T,function(ze){return _.isEmpty(ze)?[]:_.map(ze,function(Le){return{identity:void 0,values:[],source:Le,objects:[]}})}(this.matrix.valueSources)||[]),{metadata:this.sourceDataView.metadata,categorical:Le}},ze.prototype.convertFrame=function(Le){return this.convertFrameInternal(Le)[0]},ze.prototype.checkValueRolesInList=function(Le,T){for(var xe=function(A){if(_.some(Le,function(Z){return A.roles[Z]}))return{value:!0}},ot=0,ge=T;ot<ge.length;ot++){var ve=xe(ge[ot]);if("object"==typeof ve)return ve.value}return!1},ze.prototype.validateValueRoles=function(Le){if(!_.isEmpty(Le)){var T=this.checkValueRolesInList(Le,this.matrix.valueSources),xe=this.getValueSources(!0),ot=xe&&this.checkValueRolesInList(Le,xe);oe.fF.assert(function(){return!(T&&ot)},"valueRoles cannot exist in both")}},ze.prototype.isForColumnValues=function(Le){var T=(0,We.on)()[0];return _.isEmpty(Le)||_.intersection(Le,T).length>0},ze.prototype.convertFrameInternal=function(Le,T){var xe=this,ot=[],ge=this.matrix,Qe=[];_.isEmpty(T)?Qe.push(!0):T.forEach(function(ce){xe.validateValueRoles(ce),Qe.push(xe.isForColumnValues(ce))}),oe.fF.assert(function(){var ce;return _.size(null===(ce=ge?.rows)||void 0===ce?void 0:ce.levels)>=1},"matrix should have at least one level for Play fields");for(var ve=[],V=_.isEmpty(T)?1:T.length,A=0;A<V;A++)ve.push({categories:void 0,values:(0,Gt.Yv)()});if(!this.hasCategories){var Z=[],te=!0;for(A=0;A<ve.length;A++)if(Qe[A]){if(!_.isEmpty(ge.valueSources)&&this.hasRowChildren){te=!1;break}(this.hasSeries||1===ve.length)&&(Z[A]=this.createEmptyCategorical(ve[A]))}else if(!_.isEmpty(this.getValueSources(this.hasSeries))){te=!1;break}if(te)return Z}var Ne=this.readCategories();this.buildCategoricals(Le,ve,Ne,T,Qe);for(var be=0,Ie=ve;be<Ie.length;be++){var J=Ie[be];J&&(J.categories=Ne,ot.push({metadata:this.sourceDataView.metadata,categorical:J}))}return ot},ze.prototype.readValues=function(Le,T,xe){T.values||(T.values=[]),Le?(T.values[xe]=Le.value??null,void 0!==Le.highlight&&(T.highlights||(T.highlights=[]),T.highlights[xe]=Le.highlight),void 0!==Le.objects&&(T.objects||(T.objects=[]),T.objects[xe]=Le.objects),void 0!==Le.highlightObjects&&(T.highlightObjects||(T.highlightObjects=[]),T.highlightObjects[xe]=Le.highlightObjects)):T.values[xe]=null},ze.prototype.getDisplayNameFromAllFrames=function(){for(var Le=new Array(this.frameCount),T=0;T<this.frameCount;T++){var xe=this.getDisplayNameForFrame(T);Le[T]=xe}return Le},ze.prototype.getDisplayNameForFrame=function(Le){var T=this,xe=this.getFrameNode(Le),ot=this.getFrameSourceColumns(),ge=new Array(ot.length);return ot.forEach(function(Qe,ve){oe.fF.assertValue(xe.levelValues,"level values should be defined for non subTotal nodes");var V=xe.levelValues&&xe.levelValues[ve].value,A=new Vt.g({column:Qe,formatStringPropId:T.formatStringPropId,nullsAreBlank:!0,trailingZeroes:!0});ge[ve]=A.format(V)}),ge},ze.prototype.getSubtotals=function(){var Le=_.find(this.matrix.rows.root.children,function(Z){return Z.isSubtotal});if(Le){for(var T=_.size(Le.values),xe=_.size(this.matrix.valueSources),ot=T-xe,ge={},Qe=0;Qe<xe;Qe++){var ve=this.matrix.valueSources[Qe].roles,V=(0,K.eT)(Le.values[ot+Qe].value);for(var A in ve)ge[A]=V}return ge}},ze.prototype.getTopLevelAggregates=function(Le){for(var xe={},ot=0,ge=this.sourceDataView.metadata.columns;ot<ge.length;ot++){var Qe=ge[ot];if(Qe.roles&&Qe.aggregates)for(var ve=0,V=Le;ve<V.length;ve++){var A=V[ve];Qe.roles[A]&&(xe[A]=xe[A]||[]).push(Qe.aggregates)}}return _.isEmpty(xe)?void 0:xe},ze}()},67174:function(ci,va,b){"use strict";b.d(va,{CT:function(){return j},Je:function(){return ze},qR:function(){return Le},vH:function(){return ve}});var d=b(45863),oe=b(22733),Ue=b(14599),Ge=b(14577),$e=b(79154),Gt=b(62458),Ot=b(38265),Vt=b(32041),At=b(64329),We=b(66001),kt=b(42359),rt=b(72489),St=b(54365),j=function(){function V(A){A&&(this.interactivityService=A)}return V.prototype.initData=function(A){this.element=A.element,this.host=A.host,this.isMobileChart=A.interactivity&&A.interactivity.mobileTileInteractive},V.prototype.initRenderer=function(A){var Z=this;Gt.fF.assertValue(A,"options"),Gt.fF.assert(function(){return!Z.rendererInitialized},"renderer initialized multiple times"),this.svg=A.svg,this.interactivityService&&(this.playControl=new vt(this.element,function(te){return Z.moveToFrameAndRender(te)},this.isMobileChart),this.playControl.onPlay(function(){return Z.play()})),this.rendererInitialized=!0},V.prototype.isRendererInitialized=function(){return this.rendererInitialized},V.prototype.setData=function(A,Z){if(A){if(this.ridiculousFlagForPersistProperties&&A.metadata)return this.ridiculousFlagForPersistProperties=!1,this.playData;this.playData=A.matrix||A.categorical?function(V,A){var Z,te,Ie,J,Ne=[],be=[],ce=St.p.create(V,Ue.e0.formatString),ne=ce.getFrameCount(),P=ce.getSubtotals();if(ce.hasFrames()){var ae=ce.getFrameSourceColumns(),Y=(0,rt.EO)(J=ae&&ae[0],Ge.il.general.formatString),se=void 0;if(J.type.numeric){var Ae=null===(Z=ce.getFrameNode(ne-1))||void 0===Z?void 0:Z.value,fe=null===(te=ce.getFrameNode(0))||void 0===te?void 0:te.value,ie=Math.abs(Ae-fe);se=(0,rt.Ue)({format:Y,value:ie,value2:0,columnType:J.type})}else se=(0,rt.E3)(Y,!0);for(var Se=0,le=ne;Se<le;Se++){var Oe=ce.getFrameNode(Se);if(!Oe.isSubtotal){var et=se.format(Oe.value),ut=$("<div></div>").text(et).html();be.push({escapedText:ut,text:et}),Ie=A(T(Se,ce),{label:ut,column:J,identity:Oe.identity,value:Oe.value,formattedValue:et},P),Ne.push(Ie)}}}else Ie=A(T(0,ce),void 0,P),Ne.push(Ie);return{allChartData:Ne,chartData:Ie,frameData:be,currentFrameIndex:be.length-1,labelData:Qe(be,J)}}(A,Z):{frameData:[],allChartData:[],currentFrameIndex:0,chartData:void 0,labelData:{anyWordBreaks:!1,labelInfo:[]}}}else this.playData={frameData:[],allChartData:[],currentFrameIndex:0,chartData:void 0,labelData:{anyWordBreaks:!1,labelInfo:[]}};return this.lastViewport=void 0,this.playData},V.prototype.render=function(A,Z,te){var Ne,be,Ie=this.playData,J=!this.lastViewport||this.lastViewport.height!==Z.height||this.lastViewport.width!==Z.width;if(this.lastViewport=Z,J&&this.stop(),Ie)return null===(Ne=this.interactivityService)||void 0===Ne||Ne.applySelectionStateToData(Ie.chartData.dataPoints),this.updateCallout(Z,te),J&&(null===(be=this.playControl)||void 0===be||be.rebuild(Ie,Z,this.playControlWidth)),{allDataPoints:_.flatten(Ie.allChartData.map(function(ce){return ce.dataPoints})),viewModel:{data:this.playData,viewModel:A,viewport:Z}}},V.prototype.updateCallout=function(A,Z){var te=this.playData,Ne=te.frameData,be=te.currentFrameIndex,Ie=A.height,J=Ie-Z.top-Z.bottom,ce=A.width,ne=ce-Z.left-Z.right,P=0,ae=Math.min(Ie,1.3*ce),Y=Math.max(12,Math.round(ae/7));Y=Math.min(Y,70);var se=[];if(be<Ne.length&&be>=0){var Ae={fontSize:At.FP.toString(Y),text:Ne[be].text||"",fontFamily:Ot.Wn.regular.css};(P=Vt.b.estimateSvgTextHeight(Ae)-Vt.b.estimateSvgTextBaselineDelta(Ae))<J&&(se=[Vt.b.getTailoredTextOrDefault(Ae,ne-2*V.calloutOffsetMultiplier*P)])}this.svg.selectAll(V.PlayCallout.selector).data(se).join(function(le){return le.append("text").classed(V.PlayCallout.class,!0)}).text(function(le){return le}).attrs({x:ne-V.calloutOffsetMultiplier*P,y:function(){return P}}).styles({"font-size":"".concat(Y,"px"),"text-anchor":"end"})},V.prototype.play=function(){var A=this.playData;if(this.isPlaying)this.stop();else if(this.playControl){this.isPlaying=!0,this.playControl.play();var Z=this.playControl.getCurrentIndex();if(null==Z)return;Z=Math.round(Z),A.currentFrameIndex=Z>=A.allChartData.length-1?-1:Z-1,this.playNextFrame(A)}},V.prototype.playNextFrame=function(A,Z,te){var Ne=this;if(this.isPlaying){var be=A.currentFrameIndex+1;if(null!=Z&&null!=te&&(be=Math.abs(te-Z+1),Z=be),be<A.allChartData.length&&be>-1){var Ie=this.host.tooltips();Ie&&Ie.hide({immediately:!0,isTouchEvent:!1}),A.currentFrameIndex=be,A.chartData=A.allChartData[be],this.renderDelegate(A.chartData),this.playControl.setFrame(be),be<A.allChartData.length&&window.setTimeout(function(){Ne.playNextFrame(A,Z,te)},Ct)}else this.stop()}else this.stop()},V.prototype.stop=function(){var A;null===(A=this.playControl)||void 0===A||A.pause(),this.isPlaying=!1},V.prototype.remove=function(){var A;null===(A=this.playControl)||void 0===A||A.remove(),d3.selectAll(V.PlayCallout.selector).remove()},V.prototype.setRenderFunction=function(A){this.renderDelegate=A},V.prototype.getCartesianExtents=function(A,Z){return this.playData&&!_.isEmpty(this.playData.allChartData)&&!_.isEmpty(this.playData.frameData)&&function(V,A){for(var Z={},te=!1,Ne=0,be=V.allChartData||[];Ne<be.length;Ne++){var Ie=be[Ne];if(!_.isEmpty(Ie?.dataPoints)){te=!0;var J=A(Ie);Z={minY:d3.min([J.minY,Z.minY]),maxY:d3.max([J.maxY,Z.maxY]),minX:d3.min([J.minX,Z.minX]),maxX:d3.max([J.maxX,Z.maxX]),formatStringX:J.formatStringX||Z.formatStringX,formatStringY:J.formatStringY||Z.formatStringY}}}return te?Z:null}(this.playData,Z)||A},V.prototype.setPlayControlPosition=function(A){if(this.playControl){var Z=this.playControl.getContainer();Z.css("left",A.left?"".concat(A.left,"px"):""),Z.css("top",A.top?"".concat(A.top,"px"):""),Z.css("width",A.width?"".concat(A.width,"px"):""),this.playControlWidth=A.width}},V.prototype.moveToFrameAndRender=function(A){var Z=this.playData;if(this.isPlaying=!0,Z&&A>=0&&A<Z.allChartData.length&&A!==Z.currentFrameIndex){Z.currentFrameIndex=A;var te=Z.allChartData[A];Z.chartData=te,this.renderDelegate(te)}this.isPlaying=!1},V.prototype.isCurrentlyPlaying=function(){return this.isPlaying},V.PlayCallout=(0,$e.CH)("play-callout"),V.calloutOffsetMultiplier=.3,V}(),vt=function(){function V(A,Z,te){this.isMobileChart=te,this.createSliderDOM(A),this.renderDelegate=Z}return V.prototype.getContainer=function(){return this.playAxisContainer},V.prototype.remove=function(){this.playAxisContainer&&this.playAxisContainer.remove()},V.prototype.pause=function(){this.playButton.removeClass("pause").addClass("play")},V.prototype.play=function(){this.playButton.removeClass("play").addClass("pause")},V.prototype.getCurrentIndex=function(){if(this.noUiSlider)return Number(this.noUiSlider.get())},V.prototype.onPlay=function(A){this.playButtonCircle.off("click"),this.playButtonCircle.on("click",A)},V.prototype.setFrame=function(A){this.noUiSlider.set([A])},V.prototype.rebuild=function(A,Z,te){var Ne=this;this.noUiSlider&&this.noUiSlider.destroy();var be=A.labelData,Ie=V.calculateSliderSize(be,te),J=this.getContainer();Ie.marginLeft>V.SliderMarginLeft&&(J.css("padding-left","".concat(Ie.marginLeft-V.SliderMarginLeft,"px")),J.css("box-sizing","border-box"));var ce=this.updateSliderControl(A,Ie.width),ne=V.adjustWidthRegardingLastItem(be,ce,Ie.width);this.slider.css("width","".concat(ne,"px")),this.noUiSlider.on("slide",function(){var P=Ne.getCurrentIndex();Ne.renderDelegate(P)}),this.noUiSlider.on("update",function(){return $(".noUi-target").removeClass("noUi-state-tap")})},V.prototype.updateSliderControl=function(A,Z){var te=A.labelData,Ne=this.slider.get(0),be=A.frameData.length,Ie={start:be<=1?1:A.currentFrameIndex,step:1,range:{min:0,max:be<=1?1:be-1},animationDuration:Ct},J=null,ce=0;if(be>1){var ne=V.createPipsFilterFn(A,Z,te);ce=ne.skipStep,J={mode:"steps",density:Math.ceil(100/be),format:{to:function(ae){return A.frameData[ae].escapedText},from:function(ae){return _.findIndex(A.frameData,function(Y){return Y.escapedText===ae})}},filter:ne.filter}}return Ie.pips=J,(0,d.create)(Ne,Ie),this.noUiSlider=Ne.noUiSlider,ce},V.createPipsFilterFn=function(A,Z,te){var Ne=_.max(_.map(te.labelInfo,function(P){return P.labelWidth})),be=1,Ie=1,ce=Ne/(A.frameData.length>1?Z/(A.frameData.length-1):Z);return ce>1.25?(Ie=Math.ceil(ce),be=2):(ce>1||te.anyWordBreaks)&&(be=2),{filter:function(ae){return ae%Ie==0?be:0},skipStep:Ie}},V.adjustWidthRegardingLastItem=function(A,Z,te){if(_.isEmpty(A.labelInfo)||A.labelInfo.length<=1)return te;var Ne=A.labelInfo.length,be=Math.floor((Ne-1)/Z)*Z,ce=A.labelInfo[be].labelWidth/2-(te+V.SliderMarginRight-te/Ne*(be+1));if(ce>0){var ne=V.SliderMaxMargin-V.SliderMarginRight;return te-(ce>ne?ne:ce)}return te},V.prototype.createSliderDOM=function(A){this.playAxisContainer=$('<div class="play-axis-container"></div>').appendTo(A).css("height","".concat(V.PlayControlHeight,"px")),this.playButtonCircle=$('<div class="button-container"></div>').appendTo(this.playAxisContainer),this.isMobileChart&&this.playButtonCircle.addClass("mobile-button-container"),this.playButton=$('<div class="play"></div>').appendTo(this.playButtonCircle),this.slider=$('<div class="sliders"></div>').attr("drag-resize-disabled","true").attr("rtl",("rtl"===document.dir).toString()).appendTo(this.playAxisContainer)},V.calculateSliderSize=function(A,Z){var te=0;!_.isEmpty(A.labelInfo)&&A.labelInfo.length>1&&(te=_.head(A.labelInfo).labelWidth/2);var Ne=Math.max(te,V.SliderMarginLeft);return Ne=Math.min(V.SliderMaxMargin,Ne),{width:Math.max(Z-Ne-V.SliderMarginRight,1),marginLeft:Ne}},V.SliderMarginLeft=44,V.SliderMarginRight=20,V.SliderMaxMargin=100,V.PlayControlHeight=80,V}(),Ct=800,ze={duration:750,ease:d3.easeLinear},Le="playChart";function T(V,A){var Z=A.convertFrame(V);return(0,kt.eC)(Z.metadata,Ue.e0.formatString,oe.x.category,Z.categorical)}function Qe(V,A){return{labelInfo:V.map(function(Z){return{label:Z.escapedText,labelWidth:(0,We.bY)(Z.escapedText,Vt.b.measureSvgTextWidth,{fontFamily:Ot.Wn.regular.css,fontSize:At.FP.toString(14)})}}),anyWordBreaks:_.some(V,function(Z){return(0,We.r)(Z.escapedText)||Z.escapedText.indexOf("-")>-1}),labelFieldName:A?.displayName}}function ve(V,A){var Z,te,Ne,be,Ie,J,ce;return void 0===A&&(A="Play"),Gt.fF.assertValue(V,"dataView"),null===(ce=null===(J=null===(Ie=null===(be=null===(Ne=null===(te=null===(Z=V.matrix)||void 0===Z?void 0:Z.rows)||void 0===te?void 0:te.levels)||void 0===Ne?void 0:Ne[0])||void 0===be?void 0:be.sources)||void 0===Ie?void 0:Ie[0])||void 0===J?void 0:J.roles)||void 0===ce?void 0:ce[A]}},79972:function(ci,va,b){"use strict";b.d(va,{OQ:function(){return te},V2:function(){return Z},jI:function(){return A},vN:function(){return be}});var d=b(81337),K=b(22733),oe=b(14577),Ue=b(53197),Ge=b(90120),$e=b(95938),Gt=b(21181),Ot=b(52083),Vt=b(2241),At=b(86108),We=b(51129),kt=b(43906),rt=b(79811),St=b(11305),Pt=b(48766),j=b(67165),vt=b(94038),Ct=b(90700),ze=b(61193),Le=b(47316),T=b(44783),xe=b(62458),ot=b(45034),ge=b(38958),Qe=b(82755),ve=b(72489),V=b(26543),A=3500,Z=1e4;function te(h,L,E,R){var z;return L.useMatrixDV?function(h,L,E){var R,z,H,ye;if(h&&h.matrix&&(0!==_.size(h.matrix.valueSources)||0!==_.size(h.matrix.rows.levels))){for(var Pe=L.interactivityService,p=(0,Gt.vc)(L.style,"smallLightLabel"),f=et(null===(R=h?.metadata)||void 0===R?void 0:R.objects,p,L.style),W=function(h){var L,E,W,G,Ce,Ee,R=h.matrix,z=R.valueSources,H=!1,ye=!1,Pe=[_.findIndex(z,function(Rt){return(0,ge.nu)(Rt,"X")})],p=_.findIndex(z,function(Rt){return(0,ge.nu)(Rt,"Y")}),f=_.findIndex(z,function(Rt){return(0,ge.nu)(Rt,"Size")}),Fe="",Me="";(Pe[0]>=0?Fe=(W=z[Pe[0]]).displayName:(Ee=B(R.rows,oe.TL.x))&&(Pe=Ee.levelSourceIndices,Fe=(W=Ee.column).displayName,H=!0),p>=0)?Me=(G=z[p]).displayName:(Ee=B(R.rows,oe.TL.y))&&(p=Ee.levelSourceIndices[0],Me=(G=Ee.column).displayName,ye=!0);f>=0&&(Ce=z[f]);var tt,Ye=_.find(R.rows.levels,function(Rt){return!_.isEmpty(Rt.sources)&&(0,ge.nu)(Rt.sources[0],oe.TL.series)});Ye?tt=R.rows.root:(Ye=_.find(R.columns.levels,function(Rt){return!_.isEmpty(Rt.sources)&&(0,ge.nu)(Rt.sources[0],oe.TL.series)}))&&(tt=R.columns.root);var dt=null!==(E=null===(L=h?.metadata)||void 0===L?void 0:L.objects)&&void 0!==E?E:{},Et=!1,ct=!1;if(W){var yt=W.type;Et=_.size(Pe)<=1&&!(!yt.integer&&!yt.numeric),ct=(0,Qe.NA)(dt,K.p.categoryAxis.axisType)===Pt.w.categorical||!Et}if(H||ye){var ra=!!_.find(R.rows.levels,function(Rt){return(0,ge.nu)(Rt.sources[0],oe.TL.category)});xe.fF.assert(function(){return!ra},"not expecting to find category level with x/y grouping")}var Nt=H?oe.TL.x:ye?oe.TL.y:oe.TL.category;return{idx:{x:Pe,y:p,size:f},xCol:W,yCol:G,size:Ce,axesLabels:{x:Fe,y:Me},xGroupMetadata:H?{isCategoricalAxis:ct,isScalarType:Et}:void 0,yGroupMetadata:ye?{isCategoricalAxis:!1,isScalarType:!0}:void 0,seriesLevel:Ye,seriesNode:tt,categoryLevel:_.find(R.rows.levels,function(Rt){return(0,ge.nu)(Rt.sources[0],Nt)}),treatNullsAsZero:{x:(0,Qe.NA)(dt,oe.il.categoryAxis.treatNullsAsZero,!1),y:(0,Qe.NA)(dt,oe.il.valueAxis.treatNullsAsZero,!1)}}}(h),G=W.size,Ce=h.matrix.valueSources,Fe=[],Me=0;Me<Ce.length;Me++)(0,ge.nu)(Ce[Me],"Tooltips")&&Fe.push(Me);var Ee={colorHelper:Ge.v.create(L.style,oe.il.markers.color,(0,Qe.W7)(null===(z=h.metadata)||void 0===z?void 0:z.objects,oe.il.dataPoint.defaultColor),(0,Qe.W7)(null===(H=h.metadata)||void 0===H?void 0:H.objects,oe.il.markers.color)),metadata:W,hasDynamicSeries:(0,ge.c5)(h,"Series"),tooltipsEnabled:L.tooltipsEnabled,sizeRange:G?.aggregates?{min:G.aggregates.minLocal||G.aggregates.min||0,max:G.aggregates.maxLocal||G.aggregates.max}:{min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},dataLabelSettings:p,playFrameInfo:E,tooltipValuesIndices:Fe,gradientIndex:_.findIndex(Ce,function(ct){return(0,ge.nu)(ct,"Gradient")}),staticObjProps:f,categoryMap:{},categoryMapNextIndex:0,categoryIdentities:[]},Ye=function(h,L){var E,R,z,H,ye=[],Pe=h.matrix;if(!Pe.rows.root||0===_.size(Pe.rows.root.children))return{dataPointSeries:ye};var G,p=L.metadata,f=p.seriesNode,W=-1!==p.idx.size?Pe.valueSources[p.idx.size]:void 0,Ce=S(p);if(f){for(var Fe=function(Et){var ct=f.children[Et];if(ct.isSubtotal)return"continue";var yt=Object.create(L.staticObjProps.marker);yt.color=L.colorHelper.getColorForSeriesValue(ct.objects,f.childIdentityFields,ct.value,T.fA),xe.fF.assert(function(){return 1===_.size(p.seriesLevel.sources)},"Scatter should only have one series column");var Tt=p.seriesLevel.sources[0],ra=ct.levelValues.map(function(oa){return{expr:Tt.expr,formattedValue:ve.WU(oa.value,Tt.format),value:oa.value,identity:ct.identity}});L.staticObjProps.showSeries&&(yt.shape=(0,Qe.NA)(ct.objects,oe.il.markers.shape,yt.shape));var Nt={dataView:h,currentSeries:ct,converterContext:L,seriesMarker:yt,seriesIndex:Et,valueColumnIds:Ce},Rt={identityKey:null!==(z=null===(R=ct.identity)||void 0===R?void 0:R.key)&&void 0!==z?z:"",dataPoints:fe(Nt),marker:yt,identity:(new V.dw).withColumnIdentity(ct.identity,Tt.queryName,ra).createSelectionId(),name:ve.WU(ct.value,(0,Qe.NA)(Tt.objects,oe.il.general.formatString))};if(ye.push(Rt),!p.categoryLevel&&0===_.size(Rt.dataPoints)){var $t=le({seriesOptions:Nt,category:ct,categoryMetadataColumns:[Tt],categoryIdentityFields:ct.childIdentityFields,categoryFormatter:ie(void 0,Tt)});$t&&Rt.dataPoints.push($t)}},Me=0;Me<(null===(E=f.children)||void 0===E?void 0:E.length);Me++)Fe(Me);var Ee=h.matrix.rows.root.children,Ye=_.find(Ee,function(dt){return dt.isSubtotal});Ye&&(G=Ae(p,Ye))}else{var tt=Object.create(L.staticObjProps.marker);tt.color=L.colorHelper.getColorForMeasure(null,null!==(H=W?.queryName)&&void 0!==H?H:"",T.fA),ye.push({identityKey:"",dataPoints:fe({dataView:h,converterContext:L,currentSeries:Pe.rows.root,seriesMarker:tt,valueColumnIds:Ce}),marker:tt}),p.categoryLevel?(Ee=h.matrix.rows.root.children,(Ye=_.find(Ee,function(ct){return ct.isSubtotal}))&&(G=Ae(L.metadata,Ye))):!p.xGroupMetadata&&!p.yGroupMetadata&&(G=Ae(p,h.matrix.rows.root.children[0]))}return{dataPointSeries:ye,xSubtotal:G?.xSubtotal,ySubtotal:G?.ySubtotal}}(h,Ee),tt=ce(Ye.dataPointSeries,W),dt={dataView:h,colorHelper:Ee.colorHelper,style:L.style,formatStringProp:null,showByDefault:!0,markerShapePropIdentifier:oe.il.markers.shape,markerShowSeriesPropIdentifier:oe.il.bubbles.showSeries},Et=Ee.hasDynamicSeries?null!==(ye=Ee.metadata.xGroupMetadata)&&void 0!==ye&&ye.isCategoricalAxis?(0,rt.Lk)(dt):(0,rt.PP)(dt):(0,rt.Fe)(L.style);return Pe&&(Pe.applySelectionStateToData(tt),Pe.applySelectionStateToData(Et.dataPoints)),(0,d.__assign)((0,d.__assign)((0,d.__assign)({xCol:W.xCol,yCol:W.yCol,axesLabels:W.axesLabels,size:W.size,hasCategory:!!(W.xGroupMetadata||W.yGroupMetadata||W.categoryLevel),dataPoints:tt},Ye),{legendData:Et,categoryIdentities:Ee.categoryIdentities,sizeRange:Ee.sizeRange,dataLabelsSettings:p,hasDynamicSeries:Ee.hasDynamicSeries,xGroupMetadata:W.xGroupMetadata,yGroupMetadata:W.yGroupMetadata,treatNullsAsZero:W.treatNullsAsZero}),f)}}(h,L,E):null!==(z=h.categorical)&&void 0!==z&&z.values?function(h,L,E,R){var z,H,ye=(0,We.G)(h,{colorOptions:{valueRole:"Size",visualStyle:L.style},formatStringProp:oe.il.general.formatString}),Pe=L.style,p=L.interactivityService,f=L.categoryAxisProperties,W=L.valueAxisProperties,G=h.categorical,Ce=(0,Ot.Rr)(G),Fe=[null],Me=ve.E3(null);(null===(z=G.categories)||void 0===z?void 0:z.length)>0&&(Fe=G.categories[0].values,Me=ve.Ue({format:ve.EO(G.categories[0].source,oe.il.general.formatString),value:Fe[0],value2:Fe[Fe.length-1],columnType:ye.data.getCategoryType("Category")}));var Ee=G.values,Ye=!!Ee.source,tt=Ee.grouped(),dt=function(h){var z,H,ye,L=(0,ge.a2)(h,"X"),E=(0,ge.a2)(h,"Y"),R=(0,ge.a2)(h,"Size"),Pe="",p="";if(h&&h.length){var f=h[0];L>=0&&(z=f.values[L].source,Pe=f.values[L].source.displayName),E>=0&&(H=f.values[E].source,p=f.values[E].source.displayName),R>=0&&(ye=f.values[R].source)}return{idx:{x:[L],y:E,size:R},xCol:z,yCol:H,size:ye,axesLabels:{x:Pe,y:p}}}(tt),Et=(0,Gt.vc)(Pe,"smallLightLabel"),ct=et(null===(H=h?.metadata)||void 0===H?void 0:H.objects,Et,Pe),yt=function(h,L,E,R,z,H,ye,Pe,p,f,W,G){var Ce,Fe,Me,Ee,Ye,tt,dt=h.data.hasValues("X"),Et=h.data.hasValues("Y"),ct=R.categories;if(!dt&&!Et)return[];var yt=[],Tt=E.idx,ra=oe.il.general.formatString,Nt=L.source,Rt=L.grouped();xe.fF.assert(function(){return _.size(Tt.x)<=1},"Categorical X axis is not supported with categorical data view and hence there should not be more than 1 column on X role");for(var $t=_.isEmpty(ct)?null:ct[0],oa=S(E),Wa=function(ia,Ca){var Ma=Rt[ia],ca=Ma.values,de=M(Tt.size,ca),je=Object.create(f.marker);je.color=ye?h.colors.createBySeries(ia,void 0,T.fA):void 0,h.data.hasSeries()&&f.showSeries&&(je.shape=(0,Qe.NA)(h.objects.getSeriesDataObjects(ia),oe.il.markers.shape,je.shape));var Be={identityKey:null!==(Fe=null===(Ce=Ma?.identity)||void 0===Ce?void 0:Ce.key)&&void 0!==Fe?Fe:"",dataPoints:[],marker:je,identity:h.identities.createForSeries(ia,[oe.TL.size]),name:ye?ve.WU(h.data.getSeriesName(ia),h.objects.getSeriesFormatString()):void 0};yt.push(Be);for(var ht=function(me,Te){var Ve=dt?(0,Ue.eT)(h.data.getValue(oe.TL.x,me,ia)):0,we=Et?(0,Ue.eT)(h.data.getValue(oe.TL.y,me,ia)):0;if(null==Ve||null==we)return"continue";var qe=null!==(Me=R.originalCategories)&&void 0!==Me?Me:[$t],it=V.dw.builder().withCategory(qe,me,null===(Ee=$t?.source)||void 0===Ee?void 0:Ee.queryName,!0).withSeries(L,Ma,!0).withMeasures(oa),ft=void 0;W?(ft=it.clone()).withColumnIdentity(W.identity,W.column.queryName,[{expr:W.column.expr,formattedValue:W.formattedValue,identity:W.identity,value:W.value}]):ft=it;var zt=ft.createSelectionId(),bt=new St.Rm(h.columns,ra);if(G){var _t=(0,kt.F)(ra),Wt=(0,kt.S)(ra);bt.withColumnValueByIndex($t,me,!0,_t),ye&&bt.withColumnValue(Nt,Ma.name,void 0,!0,_t);var Ft=M(_.first(Tt.x),ca),mt=M(Tt.y,ca);bt.withColumnValueByIndex(Ft,me,!1,Wt).withColumnValueByIndex(mt,me,!1,Wt).withColumnValueByIndex(de,me,!1,Wt).withColumnValueByIndex(p,me,!1,Wt),W&&bt.withValue(W.column.displayName,W.label),bt.withAllValuesForRole("Tooltips",me,ia,!1,Wt)}var jt=Object.create(Be.marker);jt.size=(0,Ue.eT)(h.data.getValue(oe.TL.size,me,ia)),jt.color=f.colorByCategory&&!ye?h.colors.createByCategory(me,T.fA):h.colors.createBySeries(ia,me,T.fA),Be.dataPoints.push({x:Ve,y:we,xFormatString:dt?h.data.getFormatString(oe.TL.x,me,ia):void 0,yFormatString:Et?h.data.getFormatString(oe.TL.y,me,ia):void 0,marker:jt,radius:de?.values[me],sourceGroupName:null===(Ye=de?.source)||void 0===Ye?void 0:Ye.groupName,formattedCategory:new ot.o(function(){return H.format(null!=ct?z[me]:Ma.name)}),selected:!1,identity:zt,renderIdentity:null!==(tt=it?.createSelectionId())&&void 0!==tt?tt:zt,tooltipInfo:function(){return bt.getTooltipItems()},labelFill:Pe.fontProperties.color,categoryIndex:me,seriesIndex:ia})},x=0,k=z.length;x<k;x++)ht(x)},Ea=0,Pa=Rt.length;Ea<Pa;Ea++)Wa(Ea);return yt}(ye,Ee,dt,G,Fe,Me,Ye,Et,Ce,ct,E,L.tooltipsEnabled),Tt=ce(yt,dt),ra=Ye?(0,rt.pq)({dataView:h,style:Pe,showByDefault:!0,simpleMarkerProp:oe.il.markers.shape}):(0,rt.Fe)();return f&&null!==f.showAxisTitle&&!1===f.showAxisTitle&&(dt.axesLabels.x=null),W&&null!==W.showAxisTitle&&!1===W.showAxisTitle&&(dt.axesLabels.y=null),p&&(p.applySelectionStateToData(Tt),p.applySelectionStateToData(ra.dataPoints)),(0,d.__assign)({xCol:dt.xCol,yCol:dt.yCol,axesLabels:dt.axesLabels,size:dt.size,hasCategory:ye.data.hasCategories(),dataPoints:Tt,dataPointSeries:yt,legendData:ra,sizeRange:ae(tt,dt.idx.size),dataLabelsSettings:Et,hasDynamicSeries:Ye,xSubtotal:R?.[oe.TL.x],ySubtotal:R?.[oe.TL.y]},ct)}(h,L,E,R):void 0}var Ne="foregroundDark";function be(h){return{xCol:void 0,yCol:void 0,hasCategory:void 0,dataPoints:[],dataPointSeries:[],legendData:(0,rt.Fe)(h),axesLabels:{x:"",y:""},sizeRange:{min:void 0,max:void 0},dataLabelsSettings:(0,Gt.vc)(h,"smallLightLabel"),hasDynamicSeries:!1,plotAreaShadingSettings:{show:!1,upperShadingColor:{solid:{color:Ge.v.getDataColorByIndex(h,3)}},lowerShadingColor:{solid:{color:Ge.v.getDataColorByIndex(h,5)}},transparency:70},ratioLineSettings:{strokeShow:!1,strokeColor:h?Ge.v.getThemeColor(h,Ne):void 0,strokeTransparency:0,strokeWidth:3,strokePattern:Le.Dv.dashed,strokeDashArray:Le.YU,strokeDashCap:Le.xm,strokeAutoScale:!1},marker:{show:!0,shape:ze.ZO.circle,color:h.colorPalette.dataColors.getColorByIndex(0).value,transparency:0,rotation:0,stroke:{strokeShow:!1,strokeColor:h?Ge.v.getThemeColor(h,Ne):void 0,strokeTransparency:0,strokeWidth:1,strokePattern:Le.Dv.solid},rangeType:Ct.Dl.deprecated,multiplier:At.Kf.min},dataVolume:A,colorBorder:!1,colorByCategory:!1}}function ce(h,L){var E,R=_.reduce(h,function(z,H){return z.concat(H.dataPoints)},[]);return L.size&&!(null!==(E=L.xGroupMetadata)&&void 0!==E&&E.isCategoricalAxis)&&R.sort(ne),R}function ne(h,L){if(null!=h.radius&&null!=L.radius){var E=L.radius-h.radius;if(0!==E)return E}return L.identity.getKey().localeCompare(h.identity.getKey())}function ae(h,L){var E={};return h?.forEach(function(R){var H=function(h){var L={};return h&&(L.min=h.min??h.minLocal??d3.min(h.values),L.max=h.max??h.maxLocal??d3.max(h.values)),L}(M(L,R.values));(null==E.min||E.min>H.min)&&(E.min=H.min),(null==E.max||E.max<H.max)&&(E.max=H.max)}),E}function Ae(h,L){xe.fF.assert(function(){return!h.xGroupMetadata&&!h.yGroupMetadata},"Can not get subtotals when grouped on x/y");var E,R=h.idx.x,z=h.idx.y;xe.fF.assert(function(){return _.size(R)<=1},"Categorical X is not supported without X groups and hence there should only be 1 X column");var ye,H=_.first(R);return-1!==H&&(E=(0,Ue.eT)(L.values[H].value)),-1!==z&&(ye=(0,Ue.eT)(L.values[z].value)),{xSubtotal:E,ySubtotal:ye}}function fe(h){for(var L=[],E=function(h){var L,E,R,Pe,p,z=h.dataView,H=h.converterContext,ye=h.currentSeries,f=null!==(E=null===(L=H.metadata.seriesLevel)||void 0===L?void 0:L.sources[0])&&void 0!==E?E:void 0,W=ve.E3(null);if(null!==(R=H.metadata.xGroupMetadata)&&void 0!==R&&R.isCategoricalAxis){var G=z.matrix.rows;W=ie((Pe=G.root.children)[0],(p=G.levels[0].sources)[0])}else ye.children?(Pe=ye.children,p=z.matrix.rows.levels.length>0?z.matrix.rows.levels[Pe[0].level].sources:void 0,f&&(W=ie(Pe[0],p[0]))):f&&(0,ge.nu)(f,"Category")&&(W=ie((Pe=[ye])[0],(p=[f])[0]));return{categories:Pe,categoryMetadataColumns:p,categoryFormatter:W}}(h),z=E.categoryFormatter,H=E.categoryMetadataColumns,ye=0,Pe=E.categories??[];ye<Pe.length;ye++){var f=le({seriesOptions:h,category:Pe[ye],categoryMetadataColumns:H,categoryIdentityFields:h.currentSeries.childIdentityFields,categoryFormatter:z});f&&L.push(f)}return L}function ie(h,L){return h?.levelValues?ve.Ue({format:ve.EO(L,oe.il.general.formatString),value:h.levelValues[0],value2:h.levelValues[_.size(h.values)-1],columnType:null}):ve.E3(null)}function le(h){var L,E,R,z,H,ye;if(!h.category.isSubtotal){var ra,Pe=h.seriesOptions,f=Pe.converterContext,W=Pe.seriesIndex,G=Pe.currentSeries,Ce=Pe.seriesMarker,Fe=f.metadata,Me=Pe.dataView.matrix,Ee=Fe.idx.x,Ye=Fe.idx.y,tt=Fe.idx.size,dt=_.size(Me.valueSources),Et=Fe.xGroupMetadata,ct=Fe.yGroupMetadata,yt=_.first(Ee),Tt=0,Nt=oe.il.general.formatString;!Et&&-1!==yt&&(Tt=(0,Ue.eT)(h.category.values[yt].value),Tt=null!==(L=Fe.treatNullsAsZero)&&void 0!==L&&L.x&&null==Tt?0:Tt,ra=(0,Qe.NA)(h.category.values[yt].objects,Nt));var Rt=null==Tt?null:[Tt];Et&&(xe.fF.assert(function(){return-1!==yt},"a found grouped-X should not have an unknown index"),Rt=_.map(Ee,function(Aa){var Ut,Ra;return null!==(Ra=null===(Ut=h.category.levelValues[Aa])||void 0===Ut?void 0:Ut.value)&&void 0!==Ra?Ra:void 0}));var Wa,$t=0,oa=null===(E=Fe.xGroupMetadata)||void 0===E?void 0:E.isCategoricalAxis;if(ct||-1===Ye)ct&&(xe.fF.assert(function(){return-1!==Ye},"a found grouped-Y should not have an unknown index"),$t=h.category.levelValues[Ye].value);else{var Ea=Oe(oa,W,dt,Ye);$t=(0,Ue.eT)(h.category.values[Ea].value),$t=null!==(R=Fe.treatNullsAsZero)&&void 0!==R&&R.y&&null==$t?0:$t,Wa=(0,Qe.NA)(h.category.values[Ea].objects,Nt)}if(null!=Rt&&null!=$t){var Bt,Pa=Object.create(Ce);-1!==tt&&(Ea=Oe(oa,W,dt,tt),Pa.size=(0,Ue.eT)(h.category.values[Ea].value),Bt=(0,Qe.NA)(h.category.values[Ea].objects,Nt));var Ca,ia=V.dw.builder();if(!_.isEmpty(h.categoryMetadataColumns)){for(var Ma=_.last(h.categoryMetadataColumns),ca=[],de=0,je=h.category.levelValues;de<je.length;de++){var Be=je[de],ht=h.categoryMetadataColumns[Be.levelSourceIndex];ca.push({expr:ht.expr,formattedValue:ve.WU(Be.value,ht.format),value:Be.value,identity:h.category.identity})}ia.withColumnIdentity(h.category.identity,Ma.queryName,ca)}var x=null!==(H=null===(z=f.metadata.seriesLevel)||void 0===z?void 0:z.sources[0])&&void 0!==H?H:void 0;x&&(ca=G.levelValues.map(function(Ut){return{expr:x.expr,formattedValue:ve.WU(Ut.value,x.format),value:Ut.value,identity:G.identity}}),ia.withColumnIdentity(G.identity,x.queryName,ca));var k=h.seriesOptions.valueColumnIds;if(_.isEmpty(k)||ia.withMeasures(k),f.playFrameInfo){var I=f.playFrameInfo;Ca=ia.clone(),ia.withColumnIdentity(I.identity,I.column.queryName,[ca={expr:I.column.expr,formattedValue:I.formattedValue,identity:I.identity,value:I.value}])}var me=ia.createSelectionId(),Te=f.sizeRange;Te.min>Pa.size&&(Te.min=Pa.size),Te.max<Pa.size&&(Te.max=Pa.size),f.hasDynamicSeries||(f.staticObjProps.colorByCategory?Pa.color=f.colorHelper.getColorForSeriesValue(h.category.objects,h.categoryIdentityFields,h.category.value,T.fA):h.category.objects&&(Pa.color=f.colorHelper.getColorForMeasure(h.category.objects,null!=f.metadata.size?f.metadata.size.queryName:"",T.fA)));var we=(0,kt.F)(Nt),qe=function(){var Ut=h.category.levelValues;return _.isEmpty(Ut)?G.value:_.size(Ut)>1?(0,$e.ML)(_.map(Ut,function(Ra,Da){return we(Ra.value,h.categoryMetadataColumns[Da])})):Ut[0].value},it=new St.E4;if(f.tooltipsEnabled){var ft=(0,kt.S)(Nt),xt=h.category.levelValues,zt=_.size(h.categoryMetadataColumns)>1;!Et&&!ct&&(zt?it.withMultipleColumnAndValues(h.categoryMetadataColumns,_.map(xt,function(Ut){return Ut.value}),!0,we):xt&&it.withColumnValue(_.head(h.categoryMetadataColumns),xt[0].value,void 0,!0,we)),f.hasDynamicSeries&&it.withColumnValue(x,G.value,void 0,!0,we),Et&&f.metadata.xGroupMetadata.isCategoricalAxis?it.withMultipleColumnAndValues(h.categoryMetadataColumns,Rt,!0,we):it.withColumnValue(Fe.xCol,Rt[0],ra,!1,ft),it.withColumnValue(Fe.yCol,$t,Wa,!1,ft).withColumnValue(Fe.size,Pa.size,Bt,!1,ft);var bt=f.gradientIndex,_t=Me.valueSources;if(bt>=0){var Wt=(0,Qe.NA)(h.category.values[bt].objects,Nt);it.withColumnValue(_t[bt],h.category.values[bt].value,Wt,!1,ft)}(I=f.playFrameInfo)&&it.withValue(I.column.displayName,I.label);for(var Ft=0,mt=f.tooltipValuesIndices;Ft<mt.length;Ft++){var jt=mt[Ft],na=(Wt=(0,Qe.NA)(h.category.values[jt].objects,Nt),Oe(oa,W,dt,jt));it.withColumnValue(_t[jt],h.category.values[na].value,Wt,!1,ft)}}var ya=_.size(Rt)>1?Rt.join(" "):Rt[0],sa=oa?ya:qe(),fa=f.categoryMap,aa=String(sa),It=fa[aa];if(void 0===It){fa[aa]=It=f.categoryMapNextIndex,f.categoryMapNextIndex=It+1;var za=f.categoryIdentities;za&&(za[It]=function(){var Aa=V.dw.builder();if(!_.isEmpty(h.categoryMetadataColumns))for(var Ut=function(ii){var Ai=h.category.levelValues.map(function(Ia){return{expr:ii.expr,formattedValue:ve.WU(Ia.value,ii.format),value:Ia.value,identity:h.category.identity}});Aa.withColumnIdentity(h.category.identity,ii.queryName,Ai)},Ra=0,Da=h.categoryMetadataColumns;Ra<Da.length;Ra++)Ut(Da[Ra]);return Aa.withMeasures(k).createSelectionId()})}return{x:ya,y:$t,marker:Pa,radius:Pa.size,xFormatString:ra,yFormatString:Wa,formattedCategory:new ot.o(function(){return h.categoryFormatter.format(qe())}),selected:!1,identity:me,renderIdentity:null!==(ye=Ca?.createSelectionId())&&void 0!==ye?ye:me,tooltipInfo:function(){return it.getTooltipItems()},labelFill:f.dataLabelSettings.fontProperties.color,categoryIndex:It,seriesIndex:W||0}}}}function Oe(h,L,E,R){return h&&null!=L?L*E+R:R}function et(h,L,E){h??(h={});var R=Ge.v.create(E),z=be(E),H=(0,Qe.W7)(h,{objectName:"dataPoint",propertyName:"defaultColor"});H&&(z.marker.color=H);var ye=(0,vt.JO)(h,oe.il.markers,z.marker);ye.rangeType=(0,Qe.NA)(h,oe.il.markers.rangeType,z.marker.rangeType),ye.multiplier=(0,At.HN)((0,Qe.NA)(h,oe.il.bubbles.bubbleSize));var Pe={fillPointStyle:(0,Qe.NA)(h,oe.il.fillPoint.style,j.f.fillOnly),colorBorder:(0,Qe.NA)(h,oe.il.colorBorder.show,z.colorBorder),colorByCategory:(0,Qe.NA)(h,oe.il.colorByCategory.show,z.colorByCategory),marker:ye,plotAreaShadingSettings:{show:(0,Qe.NA)(h,oe.il.plotAreaShading.show,z.plotAreaShadingSettings.show),upperShadingColor:ut(R,h,oe.il.plotAreaShading.upperShadingColor,z.plotAreaShadingSettings.upperShadingColor),lowerShadingColor:ut(R,h,oe.il.plotAreaShading.lowerShadingColor,z.plotAreaShadingSettings.lowerShadingColor),transparency:(0,Qe.NA)(h,oe.il.plotAreaShading.transparency,z.plotAreaShadingSettings.transparency)},ratioLineSettings:(0,d.__assign)((0,d.__assign)({},(0,Vt.QI)(h,oe.il.ratioLine,z.ratioLineSettings)),{strokeColor:R.getColorForPropertyWithDefaultColor(h,oe.il.ratioLine.strokeColor,z.ratioLineSettings.strokeColor)}),dataVolume:(0,Qe.NA)(h,oe.il.general.dataVolume,A),showSeries:(0,Qe.NA)(h,oe.il.bubbles.showSeries,!0)},p=h.categoryLabels;return p&&L&&(0,Gt.ww)(p,L,void 0,E),Pe}function ut(h,L,E,R){return{solid:{color:h.getColorForPropertyWithDefaultColor(L,E,R?.solid.color)}}}function B(h,L){for(var E=0,R=h.levels.length;E<R;E++){var z=h.levels[E],H=_.chain(z.sources).map(function(ye,Pe){return{levelSource:ye,index:Pe}}).filter(function(ye){return(0,ge.nu)(ye.levelSource,L)}).map(function(ye){return ye.index}).value();if(!_.isEmpty(H))return{levelIndex:E,levelSourceIndices:H,column:z.sources[_.first(H)]}}}function S(h){var L=[];return!h.xGroupMetadata&&h.xCol&&L.push(h.xCol.queryName),!h.yGroupMetadata&&h.yCol&&L.push(h.yCol.queryName),h.size&&L.push(h.size.queryName),L}function M(h,L){return h>=0?L[h]:null}},15458:function(ci,va,b){"use strict";b.d(va,{In:function(){return Ae},PH:function(){return ce},aD:function(){return A},ke:function(){return ae},l5:function(){return se},mv:function(){return Qe},nZ:function(){return ot},qo:function(){return J},u$:function(){return ve},yV:function(){return Y}});var d=b(81337),K=b(14577),oe=b(14599),Ue=b(21181),Ge=b(80065),$e=b(86108),Gt=b(52287),Ot=b(23465),Vt=b(51650),At=b(57622),We=b(2241),kt=b(90700),rt=b(61193),St=b(67165),Pt=b(56578),j=b(32379),vt=b(82755),Ct=b(96915),ze=b(3128),Le=b(79972),T=7,xe=10;function ot(fe){var ie,Se;return{type:2,card:[ge.call(this,fe),this.isXAxisCategorical()?void 0:(0,Ue.Zu)({cardName:"Visual_CategoryLabel",dataLabelSettings:null!==(Se=null===(ie=this.data)||void 0===ie?void 0:ie.dataLabelsSettings)&&void 0!==Se?Se:null,isShowCategory:void 0,localize:this.localizer,props:K.CS.categoryLabels,revertToDefaultProps:K.CS.categoryLabels,showBackground:!0,showValueColor:!0,style:this.style})].filter(function(le){return le})}}function ge(fe){var Se,le,Oe,et,ie=this,ut=this.originalData;if(ut){var at=null!==(le=null===(Se=ut.dataPointSeries)||void 0===Se?void 0:Se.length)&&void 0!==le?le:0;if(0!==at){var B=(0,vt.NA)(null===(et=null===(Oe=this.dataView)||void 0===Oe?void 0:Oe.metadata)||void 0===et?void 0:et.objects,K.il.bubbles.showSeries,!0),S=new Pt.CQ(new Pt.lg("markers"),"Visual_Markers",Object.values(K.il.markers).concat([K.il.bubbles.bubbleSize,K.il.bubbles.showSeries,K.il.fillPoint.style,K.il.dataPoint.showAllDataPoints,K.il.dataPoint.defaultColor,K.il.colorByCategory.show,K.CS.categoryAxis.innerPadding,K.il.colorBorder.show]),this.localizer);return S.addGroup("applySettingsTo",function(g){return g.withContainerDisabled(!B).withDisplayName("Apply_Settings_To").withCollapsible(!1).addContainer("series",function(M){if(M.withDisplayName(at>1?"Series":"Visual_Categories").addContainerItem("all",ie.localizer("All"),function(f){Ie.call(ie,{containerItemBuilder:f,marker:ut.marker,selector:null,listType:"static"}),!B&&f.addSimpleSlice("showSeriesLink",function(){return new Pt.ob({descriptor:K.il.bubbles.showSeries,value:function(){},ariaLabel:"Enable_This_Setting",type:"SeriesDialogLink",resetToDefaultDescriptors:[K.il.markers.shape],warningIcon:!0}).build()},function(W){return W.withCustomDisplayName("Enable_This_Setting").withSuppressDisplayName(!0)})}),1===at){var h=ut.dataPoints.slice(0,ze.Rl);if(h.length<2)return;for(var L=function(W){var G=W.formattedCategory.getValue();M.addContainerItem(G,G,function(Ce){return Ie.call(ie,{containerItemBuilder:Ce,marker:W.marker,selector:(0,j.fd)(W.identity.getSelector()),listType:"perCategory"})})},E=0,R=h;E<R.length;E++)L(R[E])}if(at>1)for(var H=function(W){M.addContainerItem(W.name,W.name,function(G){return Ie.call(ie,{containerItemBuilder:G,marker:W.marker,selector:(0,j.fd)(W.identity.getSelector()),listType:"perSeries"})})},ye=0,Pe=ut.dataPointSeries;ye<Pe.length;ye++)H(Pe[ye])})}),this.isXAxisCategorical()&&S.addGroup("spacing",function(g){return g.withDisplayName("Visual_Spacing").addSimpleSlice("innerPadding",(0,ze.Gf)(fe.categoryAxisData,ie.localizer))}),S.build()}}}function Qe(fe){var le,Oe,Se=_.first(fe).visualObjects;if(Se.length>0){(le=Se[0])&&le.selectorsByColumn&&(Oe=(0,j.fd)((0,j.tV)(le.selectorsByColumn)));var et=this.originalData.fillPointStyle===St.f.fillOnly,ut=1===this.data.dataPointSeries.length;switch(le.objectName){case"markers":var at={data:[(0,Ct.Ue)(1)]};Oe=ut?at:Oe;var B=(0,d.__assign)((0,d.__assign)({},K.il.dataPoint.fill),{selector:Oe});return(0,Ge.w3)(this.hostService,et?void 0:B,et?B:void 0);case"category-labels":return(0,Ge.un)(this.hostService,{fontFamilyReference:K.CS.categoryLabels.fontFamily,fontSizeReference:K.CS.categoryLabels.fontSize,boldReference:K.CS.categoryLabels.bold,italicReference:K.CS.categoryLabels.italic,underlineReference:K.CS.categoryLabels.underline,fontColorReference:K.CS.categoryLabels.color,backgroundReference:K.CS.categoryLabels.backgroundColor});default:return}}}function ve(fe){if((0,Pt.n$)(fe)&&"dataVolume"===fe.name)return V.call(this)}function V(){if(this.originalData&&!this.playAxis&&!this.isXAxisCategorical())return{item:new Pt.vi({uidBuilder:new Pt.IN(new Pt.SS(new Pt.lg("visualPlaceholderCard"),"visualPlaceholderGroup"),"dataVolume"),control:new Pt.mu({descriptor:K.il.general.dataVolume,value:this.originalData.dataVolume,options:{minValue:{type:0,value:Le.jI},maxValue:{type:1,value:Le.V2}}}).build(),localize:this.localizer}).withCustomDisplayName("Visual_DataVolumeModern").build(),revertToDefaultDescriptors:[K.il.general.dataVolume]}}function A(fe){if(!(0,Pt.Qu)(fe)){if("categoryAxis"===fe.uid)return Z.call(this,fe);if("valueAxis"===fe.uid)return te.call(this,fe)}}function Z(fe){var ie=this,Se=(0,d.__spreadArray)([],fe.groups,!0);return Se.forEach(function(le,Oe){(0,Pt.Qu)(le)||le.uid==="".concat("categoryAxis","-").concat("valuesScalar")&&(Se[Oe]=Ne.call(ie,le,!0))}),(0,d.__assign)((0,d.__assign)({},fe),{revertToDefaultDescriptors:(0,d.__spreadArray)((0,d.__spreadArray)([],fe.revertToDefaultDescriptors,!0),[K.il.categoryAxis.treatNullsAsZero],!1),groups:Se})}function te(fe){var ie=this,Se=(0,d.__spreadArray)([],fe.groups,!0);return Se.forEach(function(le,Oe){(0,Pt.Qu)(le)||le.uid==="".concat("valueAxis","-").concat("values")&&(Se[Oe]=Ne.call(ie,le,!1))}),(0,d.__assign)((0,d.__assign)({},fe),{revertToDefaultDescriptors:(0,d.__spreadArray)((0,d.__spreadArray)([],fe.revertToDefaultDescriptors,!0),[K.il.valueAxis.treatNullsAsZero],!1),groups:Se})}function Ne(fe,ie){var Se=(0,d.__spreadArray)([],fe.slices,!0),le=(0,Pt.Qs)(fe),Oe=be.call(this,le,ie);return Oe&&Se.push(Oe),(0,d.__assign)((0,d.__assign)({},fe),{slices:Se})}function be(fe,ie){var Se,le,Oe=this.originalData;if(Oe&&!(ie?Oe.xGroupMetadata:Oe.yGroupMetadata))return new Pt.vi({control:{type:"ToggleSwitch",properties:{descriptor:(0,d.__assign)((0,d.__assign)({},ie?K.il.categoryAxis.treatNullsAsZero:K.il.valueAxis.treatNullsAsZero),{selector:null}),value:!!(ie?null!==(Se=Oe.treatNullsAsZero)&&void 0!==Se&&Se.x:null!==(le=Oe.treatNullsAsZero)&&void 0!==le&&le.y)}},localize:this.localizer,uidBuilder:fe.withSlice("showblankvalues")}).build()}function Ie(fe){var ie=this,Se=fe.selector,le=fe.marker,Oe=this.originalData,et=!!Oe.size,ut={get:this.localizer,getOptional:this.localizer,format:this.localizer},at=_.map(kt.Yu,function(B){return(0,d.__assign)((0,d.__assign)({},B),{displayName:B.displayName(ut)})});fe.containerItemBuilder.addGroup("shape",function(B){var S;return B.withDisplayName("Visual_Shape").addSimpleSlice("markerShape",new Pt.uY({descriptor:(0,d.__assign)((0,d.__assign)({},K.il.markers.shape),{selector:Se}),value:le.shape}).build(),function(g){return g.withDisabled("perCategory"===fe.listType)}).addSimpleSlice("fillStyle",new Pt.uY({descriptor:(0,d.__assign)((0,d.__assign)({},K.il.fillPoint.style),{selector:Se}),value:Oe.fillPointStyle}).build(),function(g){return g.withDisabled(et||"static"!==fe.listType).withHidden(ie.featureSwitches.newMarkerProperties).withCustomDescriptionIf(function(){return et||!!Se},"Visual_Scatter_Size_FormatOption_DisabledReason_FillPoint")}).addSimpleSlice("markerRangeType",new Pt.uY({descriptor:(0,d.__assign)((0,d.__assign)({},K.il.markers.rangeType),{selector:Se}),items:at,value:null!==(S=at.find(function(g){return g.value===Oe.marker.rangeType}))&&void 0!==S?S:{value:kt.Dl.deprecated,displayName:ie.localizer("Visual_MarkerRangeType_Deprecated")}}).build(),function(g){return g.withDisabled(!et||"static"!==fe.listType)}).addSimpleSlice("markerSize",new Pt.JN({descriptor:(0,d.__assign)((0,d.__assign)({},K.il.bubbles.bubbleSize),{selector:Se}),value:(0,$e.yn)(Oe.marker.multiplier),options:{minValue:{type:0,value:$e.Ad.min},maxValue:{type:1,value:$e.Ad.max}},localize:ie.localizer}).build(),function(g){return g.withDisabled("static"!==fe.listType)}).addSimpleSlice("markerRotation",Pt.JN.getRotationSliderBuilder({descriptor:(0,d.__assign)((0,d.__assign)({},K.il.markers.rotation),{selector:Se}),value:le.rotation,localize:ie.localizer}).build(),function(g){return g.withHidden(!ie.featureSwitches.newMarkerProperties||!(0,rt.Cd)(le.shape))})}).addGroup("colors",function(B){return B.withDisplayName("Generic_Color").addSimpleSlice("colorByCategory",new Pt.bd({descriptor:(0,d.__assign)((0,d.__assign)({},K.il.colorByCategory.show),{selector:null}),value:Oe.colorByCategory}).build(),function(S){return S.withCustomDisplayName("Visual_ColorByCategory").withHidden(Oe.hasDynamicSeries).withDisabled("static"!==fe.listType,"Visual_DisabledReason_AllSeriesOnly_Singular")}).addSimpleSlice("markerColor",new Pt.BT({descriptor:(0,d.__assign)((0,d.__assign)((0,d.__assign)({},K.il.markers.color),{selector:"static"===fe.listType?{data:[(0,Ct.Ue)(1)]}:Se,instanceKind:Oe.hasDynamicSeries||"perCategory"===fe.listType?1:3}),"static"===fe.listType&&{altConstantValueSelector:null}),value:{value:le.color}}).build(),function(S){return S.withCustomDisplayName("Generic_Color").withDisabled(Oe.hasDynamicSeries&&"static"===fe.listType,"Visual_Color_AllSeries_DisabledReason")}).addSimpleSlice("markerTransparency",Pt.JN.getTransparencySliderBuilder({descriptor:(0,d.__assign)((0,d.__assign)({},K.il.markers.transparency),{selector:Se}),value:le.transparency,localize:ie.localizer}).build(),function(S){return S.withDisabled(Oe.hasDynamicSeries&&"static"===fe.listType,"Visual_Color_AllSeries_DisabledReason").withHidden(!ie.featureSwitches.newMarkerProperties)})}).addGroup("border",function(B){B.withDisplayName("Visual_Border").withDisabled(!(0,rt.nK)(le.shape)),ie.featureSwitches.newMarkerProperties?B.withDisabled(!(0,rt.nK)(le.shape)||"static"!==fe.listType).addSlices((0,We.Iq)({containerItemBuilder:B,descriptors:oe.$9,strokeData:le?.stroke,selector:Se,featureSwitches:ie.featureSwitches,localize:ie.localizer}).map(function(S){return S.build()})):B.addSimpleSlice("colorBorder",new Pt.bd({descriptor:(0,d.__assign)((0,d.__assign)({},K.il.colorBorder.show),{selector:null}),value:Oe.colorBorder}).build(),function(S){return S.withCustomDisplayName("Visual_ColorBorder").withCustomDescriptionIf(function(){return!et},"Visual_Scatter_Size_FormatOption_DisabledReason").withDisabled(!et||"static"!==fe.listType).withHidden(ie.featureSwitches.newMarkerProperties)})})}function J(fe,ie){var Se,le,Oe=this.originalData;if(Oe)switch(ie.objectName){case"plotAreaShading":this.isPlotSymmetryShadingSupported()?fe.pushInstance({selector:null,objectName:"plotAreaShading",properties:{show:Oe.plotAreaShadingSettings.show,upperShadingColor:Oe.plotAreaShadingSettings.upperShadingColor,lowerShadingColor:Oe.plotAreaShadingSettings.lowerShadingColor,transparency:Oe.plotAreaShadingSettings.transparency}}):fe.pushInstance({selector:null,objectName:"plotAreaShading",properties:{},disabledReason:this.localizer("Visual_Scatter_SymmetryShadingNotSupported")});break;case"ratioLine":null!==(Se=Oe.xCol)&&void 0!==Se&&Se.isMeasure&&null!==(le=Oe.yCol)&&void 0!==le&&le.isMeasure&&fe.pushInstance({selector:null,objectName:"ratioLine",properties:(0,We.HM)(Oe.ratioLineSettings,oe.vi)});break;case"general":!this.playAxis&&!this.isXAxisCategorical()&&fe.pushInstance({selector:null,objectName:"general",properties:{dataVolume:Oe.dataVolume},validValues:{dataVolume:{numberRange:{min:Le.jI,max:Le.V2}}}})}}function ce(fe){for(var ie=fe.metadata,Se=[],le=0,Oe=fe.visualObjects;le<Oe.length;le++){var ut=Oe[le].objectName,at=ie?.visualObject;if(at&&"markers"===ut){var S=d3.select(at).datum(),g=this.data.dataPointSeries[S.seriesIndex];if(g.dataPoints.length<=T)return ne.call(this,g);var h=this.getGroupBoundingRect(g.dataPoints,this.currentViewport.scale,this.renderer.mainGraphicsContext),L=at.getBoundingClientRect(),E=Math.max(L.height,xe),R=Math.max(L.width,xe);Se.push(P([h,{x:L.x,y:L.y,height:E,width:R}],g.identityKey,this.renderer.mainGraphicsContext,this.currentViewport,this.margin))}}return Se}function ne(fe){var ie=[],Se=this.renderer.mainGraphicsContext,le=this.currentViewport.scale,Oe=Se.node().getBoundingClientRect(),et=Oe.left,ut=Oe.top,at=Se.node().getBBox(),B=at.x,S=at.y,g={type:1,x:et-B,y:ut-S,height:this.availableHeight*le,width:this.availableWidth*le},M=fe.dataPoints.map(function(L){var E=Math.max(2*L.geometry.size*le,xe);return{x:(L.geometry.x-B)*le-E/2+et,y:(L.geometry.y-S)*le-E/2+ut,width:E,height:E,type:1,clipPath:g}});return ie.push({id:fe.identityKey,outline:{type:0,outlines:M}}),ie}function P(fe,ie,Se,le,Oe){for(var et=Se.node().getBoundingClientRect(),ut=et.left,at=et.top,B=[],S=Se.node().getBBox(),h=le.scale,L={type:1,x:ut-S.x,y:at-S.y,height:(le.height-Oe.top-Oe.bottom)*h,width:(le.width-Oe.left-Oe.right)*h},E=0,R=fe;E<R.length;E++){var z=R[E];B.push({x:z.x,y:z.y,width:z.width,height:z.height,type:1,clipPath:L})}return{id:ie,outline:{type:0,outlines:B}}}function ae(fe){var ie,Se,le=fe.element,Oe=fe.series,et=fe.subSelectionHelper,ut=fe.d3Event,at=fe.hostServices,B=fe.showUI,S=null===(ie=Oe.identity)||void 0===ie?void 0:ie.getSelectorsByColumn(),M=at.getLocalizedString("MiniToolbar_Markers",null!==(Se=Oe.name)&&void 0!==Se?Se:at.getLocalizedString("All")),L=et.createVisualSubSelectionForSingleObject((0,d.__assign)({objectName:"markers",subSelectionType:3,displayName:M,showUI:B,selectorsByColumn:S,selectionOrigin:{x:ut.clientX,y:ut.clientY,offset:{x:15,y:15}}},le?{metadata:{visualObject:le}}:{}));et.subSelect(L)}function Y(fe){var le,et,Se=_.first(fe).visualObjects;if(Se.length>0)switch(le=Se[0],_.isEmpty(le.selectorsByColumn)||(et=(0,j.fd)((0,j.tV)(le.selectorsByColumn))),le.objectName){case"markers":return[{type:0,excludedResetFormattingIds:[K.CS.categoryLabels.show]},(0,d.__assign)((0,d.__assign)({type:2},K.CS.categoryLabels.show),{enabledLabel:this.localizer("Visual_Add_CategoryLabel")}),(0,d.__assign)((0,d.__assign)({type:3},K.il.markers.shape),{label:this.localizer("Visual_MarkerShape"),selector:et}),(0,d.__assign)((0,d.__assign)({type:3},K.il.fillPoint.style),{label:this.localizer("Visual_MarkerStyle"),selector:void 0}),{type:1,destinationInfo:(0,d.__assign)((0,d.__assign)({},K.il.markers.shape),{selector:et}),label:this.localizer("Format_Markers")}];case"category-labels":var ut="".concat("Visual","-").concat("categoryLabels");return[(0,d.__assign)((0,d.__assign)({type:2},K.CS.categoryLabels.show),{disabledLabel:this.localizer("Delete"),selector:void 0,keyboardShortcuts:[{key:"Delete",nextValue:!1}]}),{type:0,relatedResetFormattingIds:[K.CS.categoryLabels.enableBackground],excludedResetFormattingIds:[K.CS.categoryLabels.show]},{type:1,destinationInfo:{cardUid:ut,groupUid:"".concat("categoryLabels","-").concat("values")},label:this.localizer("Format_Category_Labels")}];default:return}}function se(fe){var ie;switch(d3.select(fe).attr(Gt.Ez)){case"markers":case"category-labels":var le=d3.select(fe).datum(),Oe=this.data.dataPointSeries[le.seriesIndex],et=null===(ie=Oe?.identity)||void 0===ie?void 0:ie.getSelectorsByColumn();if(et)return et}}function Ae(fe,ie){if(!this.featureSwitches.onObject||1!==ie)return[];var Oe=[Ot.$.create({objectName:"categoryLabels",propertyName:"backgroundColor"},this.data.dataLabelsSettings.enableBackground).onToggleEnabled(At.W.createBooleanDataViewObjectChange({objectName:"categoryLabels",propertyName:"enableBackground"},!0))];return Vt.o.getDataViewObjectsBehaviorChanges(fe,Oe)}},56914:function(ci,va,b){"use strict";b.d(va,{WG:function(){return ge},oz:function(){return Qe}});var d=b(51995),K=b(60066),oe=b(2241),Ue=b(52287),Ge=b(72902),$e=b(90700),Gt=b(64067),Ot=b(79154),Vt=b(62458),At=b(34644),We=b(59107),kt=b(10389),rt=b(67174),St=b(15458),Pt=b(11745),j=b(41640),vt=b(61193),Ct=b(80758),ze=b(92379),Le=function(){function ve(V){this.dataPoints=V.dataPoints,this.margin=V.margin}return ve.prototype.queryRegion=function(V){var A=this,Z=(0,Pt.g6)(V,!1);return this.adjustPositionRelativeToRoot(Z),_.filter(this.dataPoints,function(Ne){if(void 0===Ne.marker.size)return A.isPointInRect(Z,Ne.geometry);var be;switch(Ne.geometry.markerShape){case vt.ZO.circle:be=ze.m.circleRectangleOverlap(Z,{x:Ne.geometry.x,y:Ne.geometry.y},Ne.geometry.size);break;case vt.ZO.square:be=A.isSquareMarkerIntersect(Ne.geometry,Z);break;case vt.ZO.diamond:be=A.isDiamondMarkerIntersect(Ne.geometry,Z);break;case vt.ZO.triangle:be=A.isTriangleMarkerIntersect(Ne.geometry,Z);break;default:Vt.fF.assertFail("markers does not have this shape"),be=!1}return be})},ve.prototype.isSquareMarkerIntersect=function(V,A){var Z={left:V.x-V.size,right:V.x+V.size,top:V.y-V.size,bottom:V.y+V.size};return(0,Ct.WN)(Z.left,Z.right,A.left,A.right)&&(0,Ct.WN)(Z.top,Z.bottom,A.top,A.bottom)},ve.prototype.isDiamondMarkerIntersect=function(V,A){if(!this.isSquareMarkerIntersect(V,A))return!1;if(this.isPointInRect(A,V))return!0;for(var te=[{x:V.x-V.size,y:V.y},{x:V.x,y:V.y-V.size},{x:V.x+V.size,y:V.y},{x:V.x,y:V.y+V.size}],be=[{x:A.left,y:A.top},{x:A.right,y:A.top},{x:A.right,y:A.bottom},{x:A.left,y:A.bottom}],Ie=[[be[0],be[1]],[be[1],be[2]],[be[3],be[2]],[be[0],be[3]]],J=0,ce=[[te[0],te[1]],[te[1],te[2]],[te[0],te[3]],[te[3],te[2]]];J<ce.length;J++)for(var ne=ce[J],P=0,ae=Ie;P<ae.length;P++){var Y=ae[P];if(ze.m.linesIntersect(ne[0],ne[1],Y[0],Y[1],!1))return!0}return this.isLassoInShape(V,A)},ve.prototype.isPointInRect=function(V,A){return(0,j.bl)(V.left,A.x)&&(0,j.bl)(A.x,V.right)&&(0,j.bl)(V.top,A.y)&&(0,j.bl)(A.y,V.bottom)},ve.prototype.isLassoInShape=function(V,A){var Z={left:V.x-V.size,right:V.x+V.size,top:V.y-V.size,bottom:V.y+V.size};return(0,Ct.WN)(A.left,A.right,Z.left,Z.right)&&(0,Ct.WN)(A.top,A.bottom,Z.top,Z.bottom)},ve.prototype.isTriangleMarkerIntersect=function(V,A){if(!this.isSquareMarkerIntersect(V,A))return!1;if(this.isPointInRect(A,V))return!0;for(var te=[{x:V.x-V.size,y:V.y+V.size},{x:V.x,y:V.y-V.size},{x:V.x+V.size,y:V.y+V.size}],be=[{x:A.left,y:A.top},{x:A.right,y:A.top},{x:A.right,y:A.bottom},{x:A.left,y:A.bottom}],Ie=[[be[0],be[1]],[be[1],be[2]],[be[3],be[2]],[be[0],be[3]]],J=0,ce=[[te[0],te[1]],[te[1],te[2]],[te[0],te[2]]];J<ce.length;J++)for(var ne=ce[J],P=0,ae=Ie;P<ae.length;P++){var Y=ae[P];if(ze.m.linesIntersect(ne[0],ne[1],Y[0],Y[1],!1))return!0}return this.isLassoInShape(V,A)},ve.prototype.adjustPositionRelativeToRoot=function(V){V.left-=this.margin.left,V.top-=this.margin.top,V.right-=this.margin.left,V.bottom-=this.margin.top},ve}(),ge=function(){function ve(V,A){var Z=this;this.hostChart=V,this.eventManager=A,this.mainGraphicsG=this.hostChart.svg.append("g").classed(ve.MainGraphicsContext.class,!0).call(function(te){return V.mobileTileInteractive&&te.append("rect").classed("backgroundRect",!0).attrs({width:"100%",height:"100%"})}),this.mainGraphicsContext=this.mainGraphicsG.append("svg").attr("stroke-width","1").call(function(te){return Z.hostChart.interactivityService&&te.attrs({tabindex:0,role:"listbox","aria-multiselectable":"true",focusable:"true","aria-label":Z.hostChart.localizer("Visual_Plot")}).classed(K.Pg,!We.M.isInternetExplorerOrEdge())})}return ve.prototype.markerShapesHaveChanged=function(V){var A=_.map(V.data.dataPointSeries,function(be){return be.marker.shape}),Z=this.previousMarkers;if(Z)for(var te=0,Ne=Math.min(A.length,Z.length);te<Ne;te++)if(A[te]!==Z[te])return this.previousMarkers=A,!0;return this.previousMarkers=A,!1},ve.calculateRadius=function(V,A,Z,te,Ne){var be,Ie;void 0===Ne&&(Ne=1);var J=Math.min(Z.height,Z.width)/this.MarkerRefChartDim;if(null==V||null==A)return Ne*ve.MarkerRadiusDefault;if(te===$e.Dl.deprecated){var ce=J*J,ne={min:this.MarkerRefChartMinPixels*ce,max:this.MarkerRefChartMaxPixels*ce},P=(A={min:Math.min(A.min||0,0),max:Math.max(A.max||0,0)}).max-A.min,ae=ne.max-ne.min,Y=((V=Math.min(Math.max(V,A.min),A.max))-A.min)/(P||1);return Vt.fF.assert(function(){return Y>=0&&Y<=1},"valueRatio must be between 0 and 1"),Ne*Math.sqrt((ne.min+Y*ae)/Math.PI)}te===$e.Dl.auto&&(te=A.min>=0||A.max<=0?$e.Dl.magnitude:$e.Dl.dataRange),te===$e.Dl.magnitude&&(V&&(V=Math.abs(V)),A={min:0,max:Math.max(null!==(be=Math.abs(A.max))&&void 0!==be?be:0,null!==(Ie=Math.abs(A.min))&&void 0!==Ie?Ie:0)});var ie=((V=Math.min(Math.max(V,A.min),A.max))-A.min)/(A.max-A.min||1);return Vt.fF.assert(function(){return ie>=0&&ie<=1},"valueRatio must be between 0 and 1"),Ne*((ve.MarkerRadiusMax-ve.MarkerRadiusMin)*Math.sqrt(ie)+ve.MarkerRadiusMin)*J},ve.prototype.render=function(V,A,Z,te){var be,Ne=V.plotArea;if(this.mainGraphicsContext.attrs({width:Ne.width,height:Ne.height}).classed(K.Pg,!We.M.isInternetExplorerOrEdge()&&!!A),this.drawRatioLine(V),this.drawShadedBackground(V),V.suppressDataPointRendering)this.mainGraphicsContext.selectAll(ve.MarkerSeriesGroupCS.selector).remove(),be=this.mainGraphicsContext.selectAll(ve.MarkerCS.selector);else{var Ie=ve.getXOfFirstCategory(V),J=!this.markerShapesHaveChanged(V)&&V.animation.duration>0,ce=V.drawBubbles||J;be=this.mainGraphicsContext.selectAll(ve.MarkerSeriesGroupCS.selector).data(ce?[{identityKey:"",dataPoints:V.data.dataPoints,marker:{show:!0,color:void 0,shape:void 0}}]:V.data.dataPointSeries,function(ne){return ne.identityKey}).join(function(ne){return ne.append("g").classed(ve.MarkerSeriesGroupCS.class,!0).attr("role","group")}).styles(function(ne){return ce?{}:{"stroke-opacity":ve.getMarkerStrokeOpacity(!!V.data.size,V.data.colorBorder,V.hasSelection,!1),fill:ne.marker.color,"fill-opacity":ve.getMarkerFillOpacity(!!V.data.size,V.fillMarkers,V.hasSelection,!1)}}).selectAll(ve.MarkerCS.selector).data(function(ne){return ne.dataPoints},function(ne){return ne.renderIdentity.getKey()}).join(function(ne){var P;return ne.append("path").classed(ve.MarkerCS.class,!0).classed(K.Pg,!We.M.isInternetExplorerOrEdge()&&!!A).classed(Ue.cy,!0).attrs((P={},P[Ue.Ez]="markers",P[Ue.QZ]=3,P.transform=function(ae){var Y=V.xAxisProperties.scale(V.hasCategoricalAxis?ae.categoryIndex:ae.x)+Ie,se=V.yAxisProperties.scale(ae.y);return"translate(".concat(Y,",").concat(se,")")},P.tabindex=A?0:null,P.focusable=!!A||null,P.role="option",P)).style("opacity",0)},function(ne){return J?ne:ne.interrupt()},function(ne){return(J?ne.transition().ease(V.animation.ease).duration(V.animation.duration).style("opacity",0).attr("r",0):ne).remove()}).attrs(function(ne){return ve.updateMarkerGeometry(ne,V,Ie),{d:(0,d.jM)(ne.marker.shape,ne.geometry.size),transform:"translate(".concat(ne.geometry.x,",").concat(ne.geometry.y,")"),"aria-selected":ne.selected}}).styles({"stroke-opacity":function(P){return ve.getMarkerStrokeOpacity(null!=P.marker.size,V.data.colorBorder,V.hasSelection,P.selected)},stroke:function(P){return ve.getMarkerStrokeFill(P.marker,V.data.colorBorder)},fill:function(P,ae,Y){var se=d3.select(Y[ae].parentElement).datum();return ce||se.marker.color!==P.marker.color?P.marker.color:null},"fill-opacity":function(P){return ve.getMarkerFillOpacity(null!=P.marker.size,V.fillMarkers,V.hasSelection,P.selected)},opacity:J?void 0:null}).call(function(ne){return(J?ne.transition().ease(V.animation.ease).duration(V.animation.duration):ne).style("opacity",1)}).each(function(ne,P,ae){var Y,se;if(te){var Ae=Z.getLocalizedString("MiniToolbar_Markers",null!==(se=null===(Y=V.data.dataPointSeries[ne.seriesIndex])||void 0===Y?void 0:Y.name)&&void 0!==se?se:Z.getLocalizedString("All"));Ue.O5.setDataForElement(ae[P],{getDisplayName:function(){return Ae}})}})}return this.hostChart.tooltipsEnabled&&this.hostChart.tooltipService.addTooltip(this.mainGraphicsContext,function(ne){var P;return null===(P=ne.data)||void 0===P?void 0:P.tooltipInfo()},function(ne){var P;return(null===(P=ne.data)||void 0===P?void 0:P.identity)&&[ne.data.identity]}),(0,kt.bL)(V.animationOptions),Vt.fF.assert(function(){return null!=V.data.dataPointSeries},"dataPointSeries must be defined"),this.numSeries=V.data.dataPointSeries.length,this.scatterChartDataPoints=V.allData.dataPoints,{dataPointsSelection:be,eventGroup:this.mainGraphicsG,data:V.data,fillMarkers:V.fillMarkers,root:this.mainGraphicsContext,visualInstanceId:Z.instanceId,eventManager:this.eventManager,onMarkerSubSelection:function(P,ae,Y,se,Ae){(0,St.ke)({element:P,series:V.allData.dataPointSeries[ae.seriesIndex],subSelectionHelper:Y,d3Event:se,hostServices:Z,showUI:Ae})},hitTester:new Le({dataPoints:V.data.dataPoints,margin:V.margin})}},ve.prototype.getNextDataPoint=function(V,A,Z){var te,Ne,ne,P,be=this.mainGraphicsContext.selectAll(ve.MarkerCS.selector),Ie=this.scatterChartDataPoints,J=V,ce=A;switch(Z){case Ge.x0.PreviousCategory:case Ge.x0.NextCategory:P=Z===Ge.x0.PreviousCategory?-1:1,ne=_.sortBy(_.filter(Ie,function(se){return se.seriesIndex===A}),"categoryIndex");var ae=P+_.findIndex(ne,function(se){return se.categoryIndex===V});ae>=ne.length||ae<0?(te=this.rollToNextSeries(Ie,A,Z),J=te[0],ce=te[1]):J=ne[ae].categoryIndex;break;case Ge.x0.PreviousSeries:case Ge.x0.NextSeries:P=Z===Ge.x0.PreviousSeries?-1:1,ne=_.sortBy(_.filter(Ie,function(se){return se.categoryIndex===V}),"seriesIndex");var Y=P+_.findIndex(ne,function(se){return se.seriesIndex===A});Y>=ne.length||Y<0?(Ne=this.rollToNextCategory(Ie,V,Z),J=Ne[0],ce=Ne[1]):ce=ne[Y].seriesIndex}return{element:be.filter(function(se){return se.seriesIndex===ce&&se.categoryIndex===J}).node(),targetCategoryIndex:J}},ve.prototype.rollToNextSeries=function(V,A,Z){Vt.fF.assert(function(){return Z===Ge.x0.PreviousCategory||Z===Ge.x0.NextCategory},"expected a direction having to do with category");for(var be,te=Z===Ge.x0.PreviousCategory?-1:1,Ne=Z===Ge.x0.PreviousCategory?_.last:_.first;_.isEmpty(be);)(A+=te)>=this.numSeries?A=0:A<0&&(A=this.numSeries-1),be=_.sortBy(_.filter(V,function(J){return J.seriesIndex===A}),function(J){return J.categoryIndex});return[Ne(be).categoryIndex,A]},ve.prototype.rollToNextCategory=function(V,A,Z){Vt.fF.assert(function(){return Z===Ge.x0.PreviousSeries||Z===Ge.x0.NextSeries},"expected a direction having to do with series");for(var Ie,te=d3.max(V,function(ce){return ce.categoryIndex})+1,Ne=Z===Ge.x0.PreviousSeries?-1:1,be=Z===Ge.x0.PreviousSeries?_.last:_.first;_.isEmpty(Ie);)(A+=Ne)>=te?A=0:A<0&&(A=te-1),Ie=_.sortBy(_.filter(V,function(ce){return ce.categoryIndex===A}),function(ce){return ce.seriesIndex});var J=be(Ie).seriesIndex;return[A,J]},ve.prototype.getFirstElement=function(){return{element:this.mainGraphicsContext.selectAll(ve.MarkerCS.selector).node()}},ve.prototype.drawShadedBackground=function(V){var A=V.data.plotAreaShadingSettings,Z=A.show&&V.supportsPlotAreaSymmetryShading,te=this.hostChart.svg.selectAll(ve.PlotAreaShadingLayerCS.selector).data(Z?[1]:[]).join(function(Y){return Y.insert("svg",":first-child").classed(ve.PlotAreaShadingLayerCS.class,!0).style("pointer-events","none")}).attrs({height:V.plotArea.height,width:V.plotArea.width});if(Z){var Ne=V.xAxisProperties.scale,be=V.yAxisProperties.scale,Ie=Ne.domain(),J=be.domain(),ce=[Math.min(Ie[0],J[0]),Math.max(Ie[1],J[1])],ne=[{x:Ne(ce[0]),y:be(ce[0])},{x:Ne(ce[1]),y:be(ce[1])}];this.drawArea(ve.UpperShadingAreaCS,te,A.show?[[{x:ne[0].x,y:ne[0].y},{x:ne[0].x,y:ne[1].y}],[{x:ne[1].x,y:ne[1].y},{x:ne[1].x,y:ne[1].y}]]:[],A.upperShadingColor,A.transparency),this.drawArea(ve.LowerShadingAreaCS,te,A.show?[[{x:ne[0].x,y:ne[0].y},{x:ne[0].x,y:ne[0].y}],[{x:ne[1].x,y:ne[0].y},{x:ne[1].x,y:ne[1].y}]]:[],A.lowerShadingColor,A.transparency)}},ve.prototype.drawRatioLine=function(V){var A=V.data.ratioLineSettings,Z=this.hostChart.svg.selectAll(ve.RatioLineLayerCS.selector).data(A?.strokeShow?[1]:[]).join(function(Y){return Y.append("svg").classed(ve.RatioLineLayerCS.class,!0)}).attrs({height:V.plotArea.height,width:V.plotArea.width});if(A?.strokeShow){var te=V.xAxisProperties.scale,Ne=V.yAxisProperties.scale,be=te.domain(),Ie=Ne.domain(),J=V.data.xSubtotal,ce=V.data.ySubtotal,ne=[];if(_.isFinite(J)&&_.isFinite(ce))if(0!==J&&0!==ce){var P=ce/J;ne=[{x:te(be[0]),y:Ne(be[0]*P)},{x:te(be[1]),y:Ne(be[1]*P)}]}else 0!==ce?ne=[{x:te(0),y:Ne(Ie[0])},{x:te(0),y:Ne(Ie[1])}]:0!==J&&(ne=[{x:te(be[0]),y:Ne(0)},{x:te(be[1]),y:Ne(0)}]);var ae=d3.line().x(function(Y){return Y.x}).y(function(Y){return Y.y});Z.selectAll(ve.RatioLineCS.selector).data([ne]).join(function(Y){return Y.append("path").classed(ve.RatioLineCS.class,!0)}).attr("d",function(Y){return ae(Y)}).style("fill","none").styles((0,oe.bc)(A))}},ve.getXOfFirstCategory=function(V){if(V.hasCategoricalAxis){var A=V.xAxisProperties.scale;if((0,At._9)(A))return A.bandwidth()/2}return 0},ve.getMarkerFillOpacity=function(V,A,Z,te){return V||A?Z&&!te?.4:.85:0},ve.getMarkerStrokeOpacity=function(V,A,Z,te){return V&&A?1:Z&&!te?.4:.85},ve.getMarkerStrokeFill=function(V,A){if(null!=V.size&&A){var Z=(0,Gt.WV)(V.color);return Z?(0,Gt.Bx)((0,Gt._j)(Z,63.75)):V.color}return V.color},ve.updateMarkerGeometry=function(V,A,Z){V.geometry={size:ve.calculateRadius(V.radius,A.data.sizeRange,A.plotArea,A.data.marker.rangeType,A.data.marker.multiplier),markerShape:A.data.marker.shape,x:A.xAxisProperties.scale(A.hasCategoricalAxis?V.categoryIndex:V.x)+Z,y:A.yAxisProperties.scale(V.y)}},ve.prototype.drawArea=function(V,A,Z,te,Ne){var be=d3.area().x0(function(Ie){return Ie[0].x}).y0(function(Ie){return Ie[0].y}).x1(function(Ie){return Ie[1].x}).y1(function(Ie){return Ie[1].y});A.selectAll(V.selector).data([Z]).join(function(Ie){return Ie.append("path").classed(V.class,!0)}).attr("d",function(Ie){return be(Ie)}).styles({fill:te.solid.color,"fill-opacity":(0,Gt.TD)(Ne)})},ve.MarkerCS=(0,Ot.CH)("scatterMarker"),ve.MainGraphicsContext=(0,Ot.CH)("mainGraphicsContext"),ve.MarkerSeriesGroupCS=(0,Ot.CH)("scatterMarkerSeriesGroup"),ve.PlotAreaShadingLayerCS=(0,Ot.CH)("plotAreaShadingLayer"),ve.UpperShadingAreaCS=(0,Ot.CH)("upperShadingArea"),ve.LowerShadingAreaCS=(0,Ot.CH)("lowerShadingArea"),ve.RatioLineLayerCS=(0,Ot.CH)("ratioLineLayer"),ve.RatioLineCS=(0,Ot.CH)("ratioLine"),ve.MarkerRefChartDim=300,ve.MarkerRefChartMinPixels=4,ve.MarkerRefChartMaxPixels=3e3,ve.MarkerRadiusDefault=6,ve.MarkerRadiusMax=30,ve.MarkerRadiusMin=2,ve}(),Qe=function(){function ve(V,A){this.viewModel=V,this.hostChart=A}return ve.prototype.remove=function(){this.hostChart.svg.selectAll(ve.TraceLineCS.selector).remove(),this.hostChart.svg.selectAll(ve.TraceBubbleCS.selector).remove()},ve.prototype.render=function(V,A){var Z=this.viewModel,te=Z.viewModel,Ne=[];if(_.isEmpty(V)||te.suppressDataPointRendering)this.remove();else{for(var be=Z.data.currentFrameIndex,Ie=[],J=0,ce=V.length;J<ce;J++){Ne[J]=[],Ie[J]=!1;for(var ne=0,P=Z.data.allChartData.length;ne<P&&ne<=be;ne++){var ae=_.find(Z.data.allChartData[ne].dataPoints,function(g){var h=V[J];return h.renderIdentity?g.renderIdentity.getKey()===h.renderIdentity.getKey():g.identity.getKey()===V[J].identity.getKey()});null!=ae&&(ae.frameIndex=ne,Ne[J].push(ae),ne===be&&(Ie[J]=!0))}}var Y=te.xAxisProperties.scale,se=te.yAxisProperties.scale,Ae=d3.line().x(function(g){return Y(g.x)}).y(function(g){return se(g.y)}).defined(function(g){return null!==g.x&&null!==g.y}),fe=[],ie=[],Se=!1,le=this.hostChart.svg.selectAll(ve.TraceLineCS.selector).data(V,function(g){return g.renderIdentity.getKey()}).join(function(g){return g.append("path").classed(ve.TraceLineCS.class,!0)}).each(function(g,M,h){var L=h[M],E=L.hasAttribute("d")?L.getTotalLength():0;fe.push(E);var R=$("<svg><path></path></svg>"),z=$("path",R);z.attr("d",Ae(Ne[M]));var H=Ne[M].length>0?z.get()[0].getTotalLength():0;ie.push(H),Se||(Se=H<E)});Se?A?le.transition().ease(rt.Je.ease).duration(rt.Je.duration).attr("stroke-dashoffset",function(g,M){return fe[M]-ie[M]}).transition().ease(rt.Je.ease).duration(1).delay(0).style("stroke",function(g){return ge.getMarkerStrokeFill(g.marker,!0)}).attrs({d:function(M,h){return Ae(Ne[h])},"stroke-dasharray":function(M,h){return"".concat(ie[h]," ").concat(ie[h])},"stroke-dashoffset":0}):le.style("stroke",function(g){return ge.getMarkerStrokeFill(g.marker,!0)}).attrs({d:function(M,h){return Ae(Ne[h])},"stroke-dasharray":function(M,h){return"".concat(ie[h]," ").concat(ie[h])},"stroke-dashoffset":0}):le.style("stroke",function(g){return ge.getMarkerStrokeFill(g.marker,!0)}).attrs({d:function(M,h){return Ae(Ne[h])},"stroke-dasharray":function(M,h){return"".concat(ie[h]," ").concat(ie[h])},"stroke-dashoffset":function(M,h){return ie[h]-fe[h]}}).call(function(g){return A?g.transition().ease(rt.Je.ease).duration(rt.Je.duration):g}).attr("stroke-dashoffset",0);for(var Oe=[],et=0;et<Ne.length;et++){var ut=Ne[et],at=Ie[et]?ut.slice(0,ut.length-1):ut;Oe=Oe.concat(at)}var B=ge.getXOfFirstCategory(te),S=this.hostChart.svg.selectAll(ve.TraceBubbleCS.selector).data(Oe.sort(function(g,M){return M.marker.size-g.marker.size}),function(g){return g.renderIdentity.getKey()+g.x+g.y+g.marker.size}).join(function(g){return g.append("path").classed(ve.TraceBubbleCS.class,!0).style("opacity",0)},function(g){return g},function(g){return g.transition().ease(rt.Je.ease).duration(rt.Je.duration).style("opacity",0).remove()}).attrs(function(g){return ge.updateMarkerGeometry(g,te,B),{d:(0,d.jM)(g.marker.shape,g.geometry.size),transform:"translate(".concat(g.geometry.x,",").concat(g.geometry.y,")")}}).styles({"stroke-opacity":function(M){return M.selected?.85:.4},stroke:function(M){return ge.getMarkerStrokeFill(M.marker,Z.data.chartData.colorBorder)},fill:function(M){return M.marker.color},"fill-opacity":function(M){return null!=M.marker.size?.2+M.frameIndex/be*.6:0}}).call(function(g){return g.transition().ease(rt.Je.ease).duration(rt.Je.duration).style("opacity",1)});this.hostChart.tooltipsEnabled&&this.hostChart.tooltipService.addTooltip(S,function(g){var M;return null===(M=g.data)||void 0===M?void 0:M.tooltipInfo()},function(g){var M;return(null===(M=g.data)||void 0===M?void 0:M.identity)&&[g.data.identity]})}},ve.TraceLineCS=(0,Ot.CH)("traceLine"),ve.TraceBubbleCS=(0,Ot.CH)("traceBubble"),ve}()},58778:function(ci,va,b){"use strict";b.d(va,{B:function(){return Ge}});var d=b(62458),K=b(38078),oe="BubblingEventListeners",Ue="BubblingEventManager",Ge=function(){function kt(rt){this.root=rt,this.registeredBubblingEvents={},this.registeredCapturedEvents={},this.rootNode=rt.node(),(0,K.aT)(this.rootNode,Ue,this)}return kt.prototype.ensureEventRegistered=function(rt,St){var Pt=this,j=St?this.registeredCapturedEvents:this.registeredBubblingEvents;if(!j[rt]){j[rt]=!0;var vt=St?At:We,Ct="".concat(rt,".").concat(Ue);St&&(Ct+="Capture"),this.root.on(Ct,function(){vt(Pt.root)},St)}},kt.prototype.on=function(rt,St,Pt,j){var vt=function(kt){var rt=kt.indexOf(".");return-1===rt?kt:kt.substr(0,rt)}(St);this.ensureEventRegistered(vt,!!j);var Ct=Gt(rt,!0);if(Ct){var ze=Ct[vt];ze||(Ct[vt]=ze={bubbling:{},captured:{}}),(j?ze.captured:ze.bubbling)[St]=Pt}},kt}();function Gt(kt,rt){var St=(0,K.aT)(kt,oe);if(!St){if(!rt)return;(0,K.aT)(kt,oe,St={})}return St}function Ot(kt){for(var rt in kt){var St=kt[rt];St&&St()}}function Vt(kt,rt){for(var St=kt.node(),Pt=d3.event,j=Pt.target;j;){var vt=Gt(j,!1);if(vt){var Ct=vt[Pt.type];Ct&&rt(Ct)}if(j===St)break;d.fF.assert(function(){return!(0,K.aT)(j,Ue)},"BubblingEventManagers cannot overlap"),j=j.parentElement}}function At(kt){var rt=[];Vt(kt,function(Pt){var j=Pt.captured;j&&rt.push(j)});for(var St=rt.length;St-- >0;)Ot(rt[St])}function We(kt){Vt(kt,function(rt){var St=rt.bubbling;St&&Ot(St)})}},60810:function(ci,va,b){"use strict";b.d(va,{G:function(){return d},J:function(){return K}});var d=function(oe){return oe[oe.NoOperation=0]="NoOperation",oe[oe.WaitingForData=1]="WaitingForData",oe[oe.TriggeredLoadMore=2]="TriggeredLoadMore",oe}({}),K=function(){function oe(Ue){this.hostServices=Ue,this.waitingForData=!1}return oe.prototype.shouldLoadMoreData=function(){return this.shouldLoadMoreDataInternal()===d.TriggeredLoadMore},oe.prototype.isLoadingMoreData=function(){return this.waitingForData},oe.prototype.updateDataView=function(Ue){this.dataView=Ue},oe.prototype.loadMoreData=function(){var Ue=this.shouldLoadMoreDataInternal();return Ue===d.TriggeredLoadMore&&(this.hostServices.loadMoreData(),this.waitingForData=!0),Ue},oe.prototype.onLoadMoreDataCompleted=function(){this.waitingForData=!1},oe.prototype.shouldLoadMoreDataInternal=function(){if(!this.dataView)return d.NoOperation;var Ue=this.dataView.metadata;return this.waitingForData?d.WaitingForData:Ue&&Ue.segment?d.TriggeredLoadMore:d.NoOperation},oe}()},81551:function(ci,va,b){"use strict";b.d(va,{E:function(){return d}});var d=function(){return function(oe,Ue){this.x=oe||0,this.y=Ue||0}}()},34644:function(ci,va,b){"use strict";b.d(va,{Ad:function(){return K},LL:function(){return Ue},_9:function(){return oe}});var d=b(62458);function K(Ge){switch(Ge){case"linear":return d3.easeLinear;case"cubic-in-out":return d3.easeCubicInOut;case"cubic-out":return d3.easeCubicOut;case"back":return d3.easeBack;default:d.fF.assertNever(Ge)}return d3.easeCubicInOut}function oe(Ge){return!!Ge.bandwidth}function Ue(Ge,$e){var Gt=Ge.selectAll(_.map($e,function(Ot){return Ot.selector}).join(", ")).nodes();Gt.sort(function(Ot,Vt){for(var At=0,We=0;We<$e.length;We++)At+=+d3.select(Ot).classed($e[We].class)*We,At-=+d3.select(Vt).classed($e[We].class)*We;return At}),d3.selectAll(Gt).order()}}}]);