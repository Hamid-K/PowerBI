(self.webpackChunkdesktopDialogHost=self.webpackChunkdesktopDialogHost||[]).push([["slicer"],{45863:function(vt,Ue){var C,X;void 0!==(X="function"==typeof(C=function(){"use strict";var c="14.6.2";function ne(o){o.parentElement.removeChild(o)}function xe(o){return null!=o}function S(o){o.preventDefault()}function k(o){return"number"==typeof o&&!isNaN(o)&&isFinite(o)}function H(o,s,g){g>0&&(O(o,s),setTimeout(function(){oe(o,s)},g))}function j(o){return Math.max(Math.min(o,100),0)}function B(o){return Array.isArray(o)?o:[o]}function D(o){var s=(o=String(o)).split(".");return s.length>1?s[1].length:0}function O(o,s){o.classList&&!/\s/.test(s)?o.classList.add(s):o.className+=" "+s}function oe(o,s){o.classList&&!/\s/.test(s)?o.classList.remove(s):o.className=o.className.replace(new RegExp("(^|\\b)"+s.split(" ").join("|")+"(\\b|$)","gi")," ")}function be(o){var s=void 0!==window.pageXOffset,g="CSS1Compat"===(o.compatMode||"");return{x:s?window.pageXOffset:g?o.documentElement.scrollLeft:o.body.scrollLeft,y:s?window.pageYOffset:g?o.documentElement.scrollTop:o.body.scrollTop}}function ce(o,s){return 100/(s-o)}function M(o,s,g){return 100*s/(o[g+1]-o[g])}function Be(o,s){for(var g=1;o>=s[g];)g+=1;return g}function Ke(o,s,g){if(g>=o.slice(-1)[0])return 100;var m=Be(g,o),ee=s[m-1],le=s[m];return ee+function(o,s){return M(o,o[0]<0?s+Math.abs(o[0]):s-o[0],0)}([o[m-1],o[m]],g)/ce(ee,le)}function T(o,s,g,m){if(100===m)return m;var L=Be(m,o),q=o[L-1],ee=o[L];return g?m-q>(ee-q)/2?ee:q:s[L-1]?o[L-1]+function(o,s){return Math.round(o/s)*s}(m-o[L-1],s[L-1]):m}function Tt(o,s,g){var m;if("number"==typeof s&&(s=[s]),!Array.isArray(s))throw new Error("noUiSlider ("+c+"): 'range' contains invalid value.");if(!k(m="min"===o?0:"max"===o?100:parseFloat(o))||!k(s[0]))throw new Error("noUiSlider ("+c+"): 'range' value isn't numeric.");g.xPct.push(m),g.xVal.push(s[0]),m?g.xSteps.push(!isNaN(s[1])&&s[1]):isNaN(s[1])||(g.xSteps[0]=s[1]),g.xHighestCompleteStep.push(0)}function Ft(o,s,g){if(s){if(g.xVal[o]===g.xVal[o+1])return void(g.xSteps[o]=g.xHighestCompleteStep[o]=g.xVal[o]);g.xSteps[o]=M([g.xVal[o],g.xVal[o+1]],s,0)/ce(g.xPct[o],g.xPct[o+1]);var L=Math.ceil(Number(((g.xVal[o+1]-g.xVal[o])/g.xNumSteps[o]).toFixed(3))-1);g.xHighestCompleteStep[o]=g.xVal[o]+g.xNumSteps[o]*L}}function Oe(o,s,g){this.xPct=[],this.xVal=[],this.xSteps=[g||!1],this.xNumSteps=[!1],this.xHighestCompleteStep=[],this.snap=s;var m,L=[];for(m in o)o.hasOwnProperty(m)&&L.push([o[m],m]);for(L.sort(L.length&&"object"==typeof L[0][0]?function(q,ee){return q[0][0]-ee[0][0]}:function(q,ee){return q[0]-ee[0]}),m=0;m<L.length;m++)Tt(L[m][1],L[m][0],this);for(this.xNumSteps=this.xSteps.slice(0),m=0;m<this.xNumSteps.length;m++)Ft(m,this.xNumSteps[m],this)}Oe.prototype.getDistance=function(o){var s,g=[];for(s=0;s<this.xNumSteps.length-1;s++){var m=this.xNumSteps[s];if(m&&o/m%1!=0)throw new Error("noUiSlider ("+c+"): 'limit', 'margin' and 'padding' of "+this.xPct[s]+"% range must be divisible by step.");g[s]=M(this.xVal,o,s)}return g},Oe.prototype.getAbsoluteDistance=function(o,s,g){var m=0;if(o<this.xPct[this.xPct.length-1])for(;o>this.xPct[m+1];)m++;else o===this.xPct[this.xPct.length-1]&&(m=this.xPct.length-2);!g&&o===this.xPct[m+1]&&m++;var L,q=1,ee=s[m],le=0,K=0,me=0,ge=0;for(L=g?(o-this.xPct[m])/(this.xPct[m+1]-this.xPct[m]):(this.xPct[m+1]-o)/(this.xPct[m+1]-this.xPct[m]);ee>0;)le=this.xPct[m+1+ge]-this.xPct[m+ge],s[m+ge]*q+100-100*L>100?(K=le*L,q=(ee-100*L)/s[m+ge],L=1):(K=s[m+ge]*le/100*q,q=0),g?(me-=K,this.xPct.length+ge>=1&&ge--):(me+=K,this.xPct.length-ge>=1&&ge++),ee=s[m+ge]*q;return o+me},Oe.prototype.toStepping=function(o){return Ke(this.xVal,this.xPct,o)},Oe.prototype.fromStepping=function(o){return function(o,s,g){if(g>=100)return o.slice(-1)[0];var m=Be(g,s),ee=s[m-1];return function(o,s){return s*(o[1]-o[0])/100+o[0]}([o[m-1],o[m]],(g-ee)*ce(ee,s[m]))}(this.xVal,this.xPct,o)},Oe.prototype.getStep=function(o){return T(this.xPct,this.xSteps,this.snap,o)},Oe.prototype.getDefaultStep=function(o,s,g){var m=Be(o,this.xPct);return(100===o||s&&o===this.xPct[m-1])&&(m=Math.max(m-1,1)),(this.xVal[m]-this.xVal[m-1])/g},Oe.prototype.getNearbySteps=function(o){var s=Be(o,this.xPct);return{stepBefore:{startValue:this.xVal[s-2],step:this.xNumSteps[s-2],highestStep:this.xHighestCompleteStep[s-2]},thisStep:{startValue:this.xVal[s-1],step:this.xNumSteps[s-1],highestStep:this.xHighestCompleteStep[s-1]},stepAfter:{startValue:this.xVal[s],step:this.xNumSteps[s],highestStep:this.xHighestCompleteStep[s]}}},Oe.prototype.countStepDecimals=function(){var o=this.xNumSteps.map(D);return Math.max.apply(null,o)},Oe.prototype.convert=function(o){return this.getStep(this.toStepping(o))};var he={to:function(s){return void 0!==s&&s.toFixed(2)},from:Number},qe={target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",touchArea:"touch-area",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",textDirectionLtr:"txt-dir-ltr",textDirectionRtl:"txt-dir-rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"};function et(o){if(function(o){return"object"==typeof o&&"function"==typeof o.to&&"function"==typeof o.from}(o))return!0;throw new Error("noUiSlider ("+c+"): 'format' requires 'to' and 'from' methods.")}function mt(o,s){if(!k(s))throw new Error("noUiSlider ("+c+"): 'step' is not numeric.");o.singleStep=s}function We(o,s){if(!k(s))throw new Error("noUiSlider ("+c+"): 'keyboardPageMultiplier' is not numeric.");o.keyboardPageMultiplier=s}function St(o,s){if(!k(s))throw new Error("noUiSlider ("+c+"): 'keyboardDefaultStep' is not numeric.");o.keyboardDefaultStep=s}function De(o,s){if("object"!=typeof s||Array.isArray(s))throw new Error("noUiSlider ("+c+"): 'range' is not an object.");if(void 0===s.min||void 0===s.max)throw new Error("noUiSlider ("+c+"): Missing 'min' or 'max' in 'range'.");if(s.min===s.max)throw new Error("noUiSlider ("+c+"): 'range' 'min' and 'max' cannot be equal.");o.spectrum=new Oe(s,o.snap,o.singleStep)}function $e(o,s){if(s=B(s),!Array.isArray(s)||!s.length)throw new Error("noUiSlider ("+c+"): 'start' option is incorrect.");o.handles=s.length,o.start=s}function yt(o,s){if(o.snap=s,"boolean"!=typeof s)throw new Error("noUiSlider ("+c+"): 'snap' option must be a boolean.")}function tt(o,s){if(o.animate=s,"boolean"!=typeof s)throw new Error("noUiSlider ("+c+"): 'animate' option must be a boolean.")}function Ct(o,s){if(o.animationDuration=s,"number"!=typeof s)throw new Error("noUiSlider ("+c+"): 'animationDuration' option must be a number.")}function Ot(o,s){var m,g=[!1];if("lower"===s?s=[!0,!1]:"upper"===s&&(s=[!1,!0]),!0===s||!1===s){for(m=1;m<o.handles;m++)g.push(s);g.push(!1)}else{if(!Array.isArray(s)||!s.length||s.length!==o.handles+1)throw new Error("noUiSlider ("+c+"): 'connect' option doesn't match handle count.");g=s}o.connect=g}function it(o,s){switch(s){case"horizontal":o.ort=0;break;case"vertical":o.ort=1;break;default:throw new Error("noUiSlider ("+c+"): 'orientation' option is invalid.")}}function st(o,s){if(!k(s))throw new Error("noUiSlider ("+c+"): 'margin' option must be numeric.");0!==s&&(o.margin=o.spectrum.getDistance(s))}function Nt(o,s){if(!k(s))throw new Error("noUiSlider ("+c+"): 'limit' option must be numeric.");if(o.limit=o.spectrum.getDistance(s),!o.limit||o.handles<2)throw new Error("noUiSlider ("+c+"): 'limit' option is only supported on linear sliders with 2 or more handles.")}function ot(o,s){var g;if(!k(s)&&!Array.isArray(s))throw new Error("noUiSlider ("+c+"): 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(s)&&2!==s.length&&!k(s[0])&&!k(s[1]))throw new Error("noUiSlider ("+c+"): 'padding' option must be numeric or array of exactly 2 numbers.");if(0!==s){for(Array.isArray(s)||(s=[s,s]),o.padding=[o.spectrum.getDistance(s[0]),o.spectrum.getDistance(s[1])],g=0;g<o.spectrum.xNumSteps.length-1;g++)if(o.padding[0][g]<0||o.padding[1][g]<0)throw new Error("noUiSlider ("+c+"): 'padding' option must be a positive number(s).");if((s[0]+s[1])/(o.spectrum.xVal[o.spectrum.xVal.length-1]-o.spectrum.xVal[0])>1)throw new Error("noUiSlider ("+c+"): 'padding' option must not exceed 100% of the range.")}}function bt(o,s){switch(s){case"ltr":o.dir=0;break;case"rtl":o.dir=1;break;default:throw new Error("noUiSlider ("+c+"): 'direction' option was not recognized.")}}function lt(o,s){if("string"!=typeof s)throw new Error("noUiSlider ("+c+"): 'behaviour' must be a string containing options.");var g=s.indexOf("tap")>=0,m=s.indexOf("drag")>=0,L=s.indexOf("fixed")>=0,q=s.indexOf("snap")>=0,ee=s.indexOf("hover")>=0,le=s.indexOf("unconstrained")>=0;if(L){if(2!==o.handles)throw new Error("noUiSlider ("+c+"): 'fixed' behaviour must be used with 2 handles");st(o,o.start[1]-o.start[0])}if(le&&(o.margin||o.limit))throw new Error("noUiSlider ("+c+"): 'unconstrained' behaviour cannot be used with margin or limit");o.events={tap:g||q,drag:m,fixed:L,snap:q,hover:ee,unconstrained:le}}function ut(o,s){if(!1!==s)if(!0===s){o.tooltips=[];for(var g=0;g<o.handles;g++)o.tooltips.push(!0)}else{if(o.tooltips=B(s),o.tooltips.length!==o.handles)throw new Error("noUiSlider ("+c+"): must pass a formatter for all handles.");o.tooltips.forEach(function(m){if("boolean"!=typeof m&&("object"!=typeof m||"function"!=typeof m.to))throw new Error("noUiSlider ("+c+"): 'tooltips' must be passed a formatter or 'false'.")})}}function At(o,s){o.ariaFormat=s,et(s)}function b(o,s){o.format=s,et(s)}function f(o,s){if(o.keyboardSupport=s,"boolean"!=typeof s)throw new Error("noUiSlider ("+c+"): 'keyboardSupport' option must be a boolean.")}function I(o,s){o.documentElement=s}function y(o,s){if("string"!=typeof s&&!1!==s)throw new Error("noUiSlider ("+c+"): 'cssPrefix' must be a string or `false`.");o.cssPrefix=s}function R(o,s){if("object"!=typeof s)throw new Error("noUiSlider ("+c+"): 'cssClasses' must be an object.");if("string"==typeof o.cssPrefix)for(var g in o.cssClasses={},s)s.hasOwnProperty(g)&&(o.cssClasses[g]=o.cssPrefix+s[g]);else o.cssClasses=s}function W(o){var s={margin:0,limit:0,padding:0,animate:!0,animationDuration:300,ariaFormat:he,format:he},g={step:{r:!1,t:mt},keyboardPageMultiplier:{r:!1,t:We},keyboardDefaultStep:{r:!1,t:St},start:{r:!0,t:$e},connect:{r:!0,t:Ot},direction:{r:!0,t:bt},snap:{r:!1,t:yt},animate:{r:!1,t:tt},animationDuration:{r:!1,t:Ct},range:{r:!0,t:De},orientation:{r:!1,t:it},margin:{r:!1,t:st},limit:{r:!1,t:Nt},padding:{r:!1,t:ot},behaviour:{r:!0,t:lt},ariaFormat:{r:!1,t:At},format:{r:!1,t:b},tooltips:{r:!1,t:ut},keyboardSupport:{r:!0,t:f},documentElement:{r:!1,t:I},cssPrefix:{r:!0,t:y},cssClasses:{r:!0,t:R}},m={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses:qe,keyboardPageMultiplier:5,keyboardDefaultStep:10};o.format&&!o.ariaFormat&&(o.ariaFormat=o.format),Object.keys(g).forEach(function(K){if(!xe(o[K])&&void 0===m[K]){if(g[K].r)throw new Error("noUiSlider ("+c+"): '"+K+"' is required.");return!0}g[K].t(s,xe(o[K])?o[K]:m[K])}),s.pips=o.pips;var L=document.createElement("div");return s.transformRule=void 0!==L.style.transform?"transform":void 0!==L.style.msTransform?"msTransform":"webkitTransform",s.style=[["left","top"],["right","bottom"]][s.dir][s.ort],s}function Z(o,s,g){var le,K,me,ge,we,Le,u,m=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},q=window.CSS&&CSS.supports&&CSS.supports("touch-action","none")&&function(){var o=!1;try{var s=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("test",null,s)}catch{}return o}(),ee=o,ie=s.spectrum,Re=[],F=[],ae=[],Ve=0,Te={},je=o.ownerDocument,Xe=s.documentElement||je.documentElement,Ne=je.body,wt=-1,rt=0,ct=1,zt=2,vi="rtl"===je.dir||1===s.ort?0:100;function Ge(u,d){var p=je.createElement("div");return d&&O(p,d),u.appendChild(p),p}function xt(u,d){var p=Ge(u,s.cssClasses.origin),x=Ge(p,s.cssClasses.handle);return Ge(x,s.cssClasses.touchArea),x.setAttribute("data-handle",d),s.keyboardSupport&&(x.setAttribute("tabindex","0"),x.addEventListener("keydown",function(P){return function(u,d){if(_t()||Bt(d))return!1;var p=["Left","Right"],x=["Down","Up"],P=["PageDown","PageUp"],V=["Home","End"];s.dir&&!s.ort?p.reverse():s.ort&&!s.dir&&(x.reverse(),P.reverse());var Se,N=u.key.replace("Arrow",""),re=N===P[0],ue=N===P[1],pe=N===x[0]||N===p[0]||re,ve=N===x[1]||N===p[1]||ue,fe=N===V[1];if(!(pe||ve||N===V[0]||fe))return!0;if(u.preventDefault(),ve||pe){var Je=s.keyboardPageMultiplier,at=pe?0:1,ze=hi(d)[at];if(null===ze)return!1;!1===ze&&(ze=ie.getDefaultStep(F[d],pe,s.keyboardDefaultStep)),(ue||re)&&(ze*=Je),ze=Math.max(ze,1e-7),Se=Re[d]+(ze*=pe?-1:1)}else Se=fe?s.spectrum.xVal[s.spectrum.xVal.length-1]:s.spectrum.xVal[0];return Ye(d,ie.toStepping(Se),!0,!0),Pe("slide",d),Pe("update",d),Pe("change",d),Pe("set",d),!1}(P,d)})),x.setAttribute("role","slider"),x.setAttribute("aria-orientation",s.ort?"vertical":"horizontal"),0===d?O(x,s.cssClasses.handleLower):d===s.handles-1&&O(x,s.cssClasses.handleUpper),p}function Jt(u,d){return!!d&&Ge(u,s.cssClasses.connect)}function Zt(u,d){return!!s.tooltips[d]&&Ge(u.firstChild,s.cssClasses.tooltip)}function _t(){return ee.hasAttribute("disabled")}function Bt(u){return K[u].hasAttribute("disabled")}function Lt(){we&&(oi("update.tooltips"),we.forEach(function(u){u&&ne(u)}),we=null)}function qt(){Lt(),we=K.map(Zt),Ut("update.tooltips",function(u,d,p){if(we[d]){var x=u[d];!0!==s.tooltips[d]&&(x=s.tooltips[d].to(p[d])),we[d].innerHTML=x}})}function ti(u,d,p){var x=je.createElement("div"),P=[];P[rt]=s.cssClasses.valueNormal,P[ct]=s.cssClasses.valueLarge,P[zt]=s.cssClasses.valueSub;var V=[];V[rt]=s.cssClasses.markerNormal,V[ct]=s.cssClasses.markerLarge,V[zt]=s.cssClasses.markerSub;var N=[s.cssClasses.valueHorizontal,s.cssClasses.valueVertical],re=[s.cssClasses.markerHorizontal,s.cssClasses.markerVertical];function ue(ve,Fe){var fe=Fe===s.cssClasses.value;return Fe+" "+(fe?N:re)[s.ort]+" "+(fe?P:V)[ve]}return O(x,s.cssClasses.pips),O(x,0===s.ort?s.cssClasses.pipsHorizontal:s.cssClasses.pipsVertical),Object.keys(u).forEach(function(ve){!function(ve,Fe,fe){if((fe=d?d(Fe,fe):fe)!==wt){var Se=Ge(x,!1);Se.className=ue(fe,s.cssClasses.marker),Se.style[s.style]=ve+"%",fe>rt&&((Se=Ge(x,!1)).className=ue(fe,s.cssClasses.value),Se.setAttribute("data-value",Fe),Se.style[s.style]=ve+"%",Se.innerHTML=p.to(Fe))}}(ve,u[ve][0],u[ve][1])}),x}function dt(){ge&&(ne(ge),ge=null)}function kt(u){dt();var d=u.mode,x=u.filter||!1,re=function(u,d,p){function x(ve,Fe){return(ve+Fe).toFixed(7)/1}var P={},V=ie.xVal[0],N=ie.xVal[ie.xVal.length-1],re=!1,ue=!1,pe=0;return(p=function(o){return o.filter(function(s){return!this[s]&&(this[s]=!0)},{})}(p.slice().sort(function(ve,Fe){return ve-Fe})))[0]!==V&&(p.unshift(V),re=!0),p[p.length-1]!==N&&(p.push(N),ue=!0),p.forEach(function(ve,Fe){var fe,Se,Je,ze,Kt,Gt,Qt,Et,Xt,at=ve,Ze=p[Fe+1],pi="steps"===d;if(pi&&(fe=ie.xNumSteps[Fe]),fe||(fe=Ze-at),!1!==at)for(void 0===Ze&&(Ze=at),fe=Math.max(fe,1e-7),Se=at;Se<=Ze;Se=x(Se,fe)){for(Xt=(Kt=(ze=ie.toStepping(Se))-pe)/(Et=Math.round(Kt/u)),Je=1;Je<=Et;Je+=1)P[(Gt=pe+Je*Xt).toFixed(5)]=[ie.fromStepping(Gt),0];Qt=p.indexOf(Se)>-1?ct:pi?zt:rt,!Fe&&re&&Se!==Ze&&(Qt=0),Se===Ze&&ue||(P[ze.toFixed(5)]=[Se,Qt]),pe=ze}}),P}(u.density||1,d,function(u,d,p){if("range"===u||"steps"===u)return ie.xVal;if("count"===u){if(d<2)throw new Error("noUiSlider ("+c+"): 'values' (>= 2) required for mode 'count'.");var x=d-1,P=100/x;for(d=[];x--;)d[x]=x*P;d.push(100),u="positions"}return"positions"===u?d.map(function(V){return ie.fromStepping(p?ie.getStep(V):V)}):"values"===u?p?d.map(function(V){return ie.fromStepping(ie.getStep(ie.toStepping(V)))}):d:void 0}(d,u.values||!1,u.stepped||!1)),ue=u.format||{to:Math.round};return ge=ee.appendChild(ti(re,x,ue))}function ii(){var u=le.getBoundingClientRect(),d="offset"+["Width","Height"][s.ort];return 0===s.ort?u.width||le[d]:u.height||le[d]}function Ae(u,d,p,x){var P=function(re){if(!(re=function(u,d,p){var N,re,x=0===u.type.indexOf("touch"),P=0===u.type.indexOf("mouse"),V=0===u.type.indexOf("pointer");if(0===u.type.indexOf("MSPointer")&&(V=!0),"mousedown"===u.type&&!u.buttons&&!u.touches)return!1;if(x){var ue=function(fe){return fe.target===p||p.contains(fe.target)||fe.target.shadowRoot&&fe.target.shadowRoot.contains(p)};if("touchstart"===u.type){var pe=Array.prototype.filter.call(u.touches,ue);if(pe.length>1)return!1;N=pe[0].pageX,re=pe[0].pageY}else{var ve=Array.prototype.find.call(u.changedTouches,ue);if(!ve)return!1;N=ve.pageX,re=ve.pageY}}return d=d||be(je),(P||V)&&(N=u.clientX+d.x,re=u.clientY+d.y),u.pageOffset=d,u.points=[N,re],u.cursor=P||V,u}(re,x.pageOffset,x.target||d))||_t()&&!x.doNotReject||function(o,s){return o.classList?o.classList.contains(s):new RegExp("\\b"+s+"\\b").test(o.className)}(ee,s.cssClasses.tap)&&!x.doNotReject||u===m.start&&void 0!==re.buttons&&re.buttons>1||x.hover&&re.buttons)return!1;q||re.preventDefault(),re.calcPoint=re.points[s.ort],p(re,x)},V=[];return u.split(" ").forEach(function(N){var re=!!q&&{passive:!0};d.addEventListener(N,P,re),V.push([N,P,re])}),V}function ai(u){var p=100*(u-function(o,s){var g=o.getBoundingClientRect(),m=o.ownerDocument,L=m.documentElement,q=be(m);return/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(q.x=0),s?g.top+q.y-L.clientTop:g.left+q.x-L.clientLeft}(le,s.ort))/ii();return p=j(p),s.dir?100-p:p}function Ci(u,d){"mouseout"===u.type&&"HTML"===u.target.nodeName&&null===u.relatedTarget&&It(u,d)}function bi(u,d){if(-1===navigator.appVersion.indexOf("MSIE 9")&&0===u.buttons&&0!==d.buttonsProperty)return It(u,d);var p=(s.dir?-1:1)*(u.calcPoint-d.startCalcPoint);li(p>0,100*p/d.baseSize,d.locations,d.handleNumbers)}function It(u,d){d.handle&&(oe(d.handle,s.cssClasses.active),Ve-=1),d.listeners.forEach(function(p){Xe.removeEventListener(p[0],p[1],p[2])}),0===Ve&&(oe(ee,s.cssClasses.drag),Wt(),u.cursor&&(Ne.style.cursor="",Ne.removeEventListener("selectstart",S))),d.handleNumbers.forEach(function(p){Pe("change",p),Pe("set",p),Pe("end",p)})}function jt(u,d){if(d.handleNumbers.some(Bt))return!1;var p;1===d.handleNumbers.length&&(Ve+=1,O(p=K[d.handleNumbers[0]].children[0],s.cssClasses.active)),u.stopPropagation();var P=[],V=Ae(m.move,Xe,bi,{target:u.target,handle:p,listeners:P,startCalcPoint:u.calcPoint,baseSize:ii(),pageOffset:u.pageOffset,handleNumbers:d.handleNumbers,buttonsProperty:u.buttons,locations:F.slice()}),N=Ae(m.end,Xe,It,{target:u.target,handle:p,listeners:P,doNotReject:!0,handleNumbers:d.handleNumbers}),re=Ae("mouseout",Xe,Ci,{target:u.target,handle:p,listeners:P,doNotReject:!0,handleNumbers:d.handleNumbers});P.push.apply(P,V.concat(N,re)),u.cursor&&(Ne.style.cursor=getComputedStyle(u.target).cursor,K.length>1&&O(ee,s.cssClasses.drag),Ne.addEventListener("selectstart",S,!1)),d.handleNumbers.forEach(function(ue){Pe("start",ue)})}function wi(u){u.stopPropagation();var d=ai(u.calcPoint),p=function(u){var d=100,p=!1;return K.forEach(function(x,P){if(!Bt(P)){var V=F[P],N=Math.abs(V-u);(N<d||N<=d&&u>V||100===N&&100===d)&&(p=P,d=N)}}),p}(d);if(!1===p)return!1;s.events.snap||H(ee,s.cssClasses.tap,s.animationDuration),Ye(p,d,!0,!0),Wt(),Pe("slide",p,!0),Pe("update",p,!0),Pe("change",p,!0),Pe("set",p,!0),s.events.snap&&jt(u,{handleNumbers:[p]})}function ni(u){var d=ai(u.calcPoint),p=ie.getStep(d),x=ie.fromStepping(p);Object.keys(Te).forEach(function(P){"hover"===P.split(".")[0]&&Te[P].forEach(function(V){V.call(Le,x)})})}function Ut(u,d){Te[u]=Te[u]||[],Te[u].push(d),"update"===u.split(".")[0]&&K.forEach(function(p,x){Pe("update",x)})}function oi(u){var d=u&&u.split(".")[0],p=d&&u.substring(d.length);Object.keys(Te).forEach(function(x){var P=x.split(".")[0],V=x.substring(P.length);d&&d!==P||p&&p!==V||delete Te[x]})}function Pe(u,d,p){Object.keys(Te).forEach(function(x){var P=x.split(".")[0];u===P&&Te[x].forEach(function(V){V.call(Le,Re.map(s.format.to),d,Re.slice(),p||!1,F.slice(),Le)})})}function ht(u,d,p,x,P,V){var N;return K.length>1&&!s.events.unconstrained&&(x&&d>0&&(N=ie.getAbsoluteDistance(u[d-1],s.margin,0),p=Math.max(p,N)),P&&d<K.length-1&&(N=ie.getAbsoluteDistance(u[d+1],s.margin,1),p=Math.min(p,N))),K.length>1&&s.limit&&(x&&d>0&&(N=ie.getAbsoluteDistance(u[d-1],s.limit,0),p=Math.min(p,N)),P&&d<K.length-1&&(N=ie.getAbsoluteDistance(u[d+1],s.limit,1),p=Math.max(p,N))),s.padding&&(0===d&&(N=ie.getAbsoluteDistance(0,s.padding[0],0),p=Math.max(p,N)),d===K.length-1&&(N=ie.getAbsoluteDistance(100,s.padding[1],1),p=Math.min(p,N))),!((p=j(p=ie.getStep(p)))===u[d]&&!V)&&p}function Dt(u,d){var p=s.ort;return(p?d:u)+", "+(p?u:d)}function li(u,d,p,x){var P=p.slice(),V=[!u,u],N=[u,!u];x=x.slice(),u&&x.reverse(),x.length>1?x.forEach(function(ue,pe){var ve=ht(P,ue,P[ue]+d,V[pe],N[pe],!1);!1===ve?d=0:(d=ve-P[ue],P[ue]=ve)}):V=N=[!0];var re=!1;x.forEach(function(ue,pe){re=Ye(ue,p[ue]+d,V[pe],N[pe])||re}),re&&x.forEach(function(ue){Pe("update",ue),Pe("slide",ue)})}function ui(u,d){return s.dir?100-u-d:u}function Wt(){ae.forEach(function(u){K[u].style.zIndex=3+(K.length+(F[u]>50?-1:1)*u)})}function Ye(u,d,p,x,P){return P||(d=ht(F,u,d,p,x,!1)),!1!==d&&(function(u,d){F[u]=d,Re[u]=ie.fromStepping(d);var x="translate("+Dt(10*(ui(d,0)-vi)+"%","0")+")";K[u].style[s.transformRule]=x,ci(u),ci(u+1)}(u,d),!0)}function ci(u){if(me[u]){var d=0,p=100;0!==u&&(d=F[u-1]),u!==me.length-1&&(p=F[u]);var x=p-d,P="translate("+Dt(ui(d,x)+"%","0")+")",V="scale("+Dt(x/100,"1")+")";me[u].style[s.transformRule]=P+" "+V}}function di(u,d){return null===u||!1===u||void 0===u||("number"==typeof u&&(u=String(u)),u=s.format.from(u),!1===(u=ie.toStepping(u))||isNaN(u))?F[d]:u}function pt(u,d,p){var x=B(u);d=void 0===d||!!d,s.animate&&!(void 0===F[0])&&H(ee,s.cssClasses.tap,s.animationDuration),ae.forEach(function(N){Ye(N,di(x[N],N),!0,!1,p)});for(var V=1===ae.length?0:1;V<ae.length;++V)ae.forEach(function(N){Ye(N,F[N],!0,!0,p)});Wt(),ae.forEach(function(N){Pe("update",N),null!==x[N]&&d&&Pe("set",N)})}function $t(){var u=Re.map(s.format.to);return 1===u.length?u[0]:u}function hi(u){var d=F[u],p=ie.getNearbySteps(d),x=Re[u],P=p.thisStep.step,V=null;if(s.snap)return[x-p.stepBefore.startValue||null,p.stepAfter.startValue-x||null];!1!==P&&x+P>p.stepAfter.startValue&&(P=p.stepAfter.startValue-x),V=x>p.thisStep.startValue?p.thisStep.step:!1!==p.stepBefore.step&&x-p.stepBefore.highestStep,100===d?P=null:0===d&&(V=null);var N=ie.countStepDecimals();return null!==P&&!1!==P&&(P=Number(P.toFixed(N))),null!==V&&!1!==V&&(V=Number(V.toFixed(N))),[V,P]}return O(u=ee,s.cssClasses.target),O(u,0===s.dir?s.cssClasses.ltr:s.cssClasses.rtl),O(u,0===s.ort?s.cssClasses.horizontal:s.cssClasses.vertical),O(u,"rtl"===getComputedStyle(u).direction?s.cssClasses.textDirectionRtl:s.cssClasses.textDirectionLtr),le=Ge(u,s.cssClasses.base),function(u,d){var p=Ge(d,s.cssClasses.connects);K=[],(me=[]).push(Jt(p,u[0]));for(var x=0;x<s.handles;x++)K.push(xt(d,x)),ae[x]=x,me.push(Jt(p,u[x+1]))}(s.connect,le),function(u){u.fixed||K.forEach(function(d,p){Ae(m.start,d.children[0],jt,{handleNumbers:[p]})}),u.tap&&Ae(m.start,le,wi,{}),u.hover&&Ae(m.move,le,ni,{hover:!0}),u.drag&&me.forEach(function(d,p){if(!1!==d&&0!==p&&p!==me.length-1){var x=K[p-1],P=K[p],V=[d];O(d,s.cssClasses.draggable),u.fixed&&(V.push(x.children[0]),V.push(P.children[0])),V.forEach(function(N){Ae(m.start,N,jt,{handles:[x,P],handleNumbers:[p-1,p]})})}})}(s.events),pt(s.start),s.pips&&kt(s.pips),s.tooltips&&qt(),Ut("update",function(u,d,p,x,P){ae.forEach(function(V){var N=K[V],re=ht(F,V,0,!0,!0,!0),ue=ht(F,V,100,!0,!0,!0),pe=P[V];s.ariaFormat.to(p[V]),re=ie.fromStepping(re).toFixed(0),ue=ie.fromStepping(ue).toFixed(0),pe=ie.fromStepping(pe).toFixed(0),N.children[0].setAttribute("aria-valuemin",re),N.children[0].setAttribute("aria-valuemax",ue),N.children[0].setAttribute("aria-valuenow",pe)})}),Le={destroy:function(){for(var u in s.cssClasses)s.cssClasses.hasOwnProperty(u)&&oe(ee,s.cssClasses[u]);for(;ee.firstChild;)ee.removeChild(ee.firstChild);delete ee.noUiSlider},steps:function(){return ae.map(hi)},on:Ut,off:oi,get:$t,set:pt,setHandle:function(u,d,p,x){if(!((u=Number(u))>=0&&u<ae.length))throw new Error("noUiSlider ("+c+"): invalid handle number, got: "+u);Ye(u,di(d,u),!0,!0,x),Pe("update",u),p&&Pe("set",u)},reset:function(u){pt(s.start,u)},__moveHandles:function(d,p,x){li(d,p,F,x)},options:g,updateOptions:function(u,d){var p=$t(),x=["margin","limit","padding","range","animate","snap","step","format","pips","tooltips"];x.forEach(function(V){void 0!==u[V]&&(g[V]=u[V])});var P=W(g);x.forEach(function(V){void 0!==u[V]&&(s[V]=P[V])}),ie=P.spectrum,s.margin=P.margin,s.limit=P.limit,s.padding=P.padding,s.pips?kt(s.pips):dt(),s.tooltips?qt():Lt(),F=[],pt(u.start||p,d)},target:ee,removePips:dt,removeTooltips:Lt,getTooltips:function(){return we},getOrigins:function(){return K},pips:kt}}return{__spectrum:Oe,version:c,cssClasses:qe,create:function(o,s){if(!o||!o.nodeName)throw new Error("noUiSlider ("+c+"): create requires a single element, got: "+o);if(o.noUiSlider)throw new Error("noUiSlider ("+c+"): Slider was already initialized.");var m=Z(o,W(s),s);return o.noUiSlider=m,m}}})?C.apply(Ue,[]):C)&&(vt.exports=X)},87592:function(vt,Ue,C){"use strict";C.d(Ue,{VT:function(){return We},OQ:function(){return St}});var G=C(81337),X=C(9434),c=C(90120),de=C(18664),ne=C(32105),xe=C(40550),S=C(36265),ye=C(45296),Ce=C(62458),J=C(38265),k=C(48066),H=C(59694),j=C(82755),B=C(78843),D=C(72489),O=C(26543),oe=C(1629),se=C(95462),be=C(94419),Me=C(75074),Qe=C(45413),Ie=C(68447),ce=C(54522),M=function(){function b(f,I,y){this.columns=I,this.selectedDataPoints=y,this.column=f&&!_.isEmpty(f.categories)?f.categories[0]:null,this.column&&(this.objects=this.column.objects),this.count=this.column&&this.column.values?this.column.values.length:0,this.isImage=(0,ce.pt)(this.columns[0])}return b.prototype.getDataPointsCount=function(){return this.count},b.prototype.getMetadataColumn=function(){return this.column&&this.column.source||this.columns[0]},b.prototype.getDataViewDataPoint=function(f){var y,I=this;return Ce.fF.assert(function(){return f<=I.count},".getDataViewDataPoint index is out of bounds"),this.objects&&(y=(0,j.NA)(this.objects[f],X.gO.general.count,y)),{scopeId:this.column.identity[f],count:y,value:this.column.values[f],levelCount:this.count}},b.prototype.isImageData=function(){return this.isImage},b.prototype.getLevel=function(){return 0},b.prototype.hasCount=function(){return!_.isEmpty(this.objects)},b.prototype.getSelectedNodes=function(){return this.selectedDataPoints},b.prototype.getMetadataColumns=function(){return this.column&&[this.column.source]},b.prototype.getIdentityExprs=function(){return this.column&&this.column.identityFields&&[this.column.identityFields]},b}(),_e=C(62283),gt=C(93187),Be=function(){function b(f,I,y,R){this.matrix=f,this.metadataColumns=I,this.root=y,this.selectedDataPoints=R,this.root=y,this.level=y&&y.level+1||0,this.root||(this.root=f&&f.rows&&f.rows.root,!this.root||_.isEmpty(f.rows.levels))||(this.metadata=f.rows.levels[this.level].sources[0],this.metadata&&(this.isImageUrlColumn=(0,ce.pt)(this.metadata))),this.valueSources=f?.valueSources,this.count=this.root&&this.root.children&&this.root.children.length||0}return b.prototype.getDataPointsCount=function(){return this.count},b.prototype.getMetadataColumn=function(){return this.metadata||this.metadataColumns[this.level]},b.prototype.getDataViewDataPoint=function(f){var I=this;Ce.fF.assert(function(){return f<I.count&&f>=0},".getDataViewDataPoint index is out of bounds");var y,R=this.root.children[f];if(!R.isSubtotal){var Z;if(Ce.fF.assert(function(){return 1===R.levelValues.length},".getDataViewDataPoint does not expect levelValues to have more than one value."),_.some(R.children,function(L){return!L.isSubtotal})){var Y=_.find(this.selectedDataPoints,function(L){return(0,B.fS)(L.identity,R.identity)});Z=new b(this.matrix,this.metadataColumns,R,Y&&Y.children)}y=R.levelValues[0].value;var s,o=!_.isEmpty((0,j.NA)(R.objects,_e.yD.image.image,void 0,"default"));this.isImage=!o&&1===this.metadataColumns.length&&this.isImageUrlColumn,this.isImage&&(s=(0,D.WU)(y));var g=this.readTooltipInfo(R),m=this.count;return this.root&&this.root.children&&(m=_.filter(this.root.children,function(L){return!L.isSubtotal&&L.level===R.level}).length),{scopeId:R.identity,isCollapsed:R.isCollapsed,value:y,childrenReader:Z,tooltipInfo:g,imageUrl:s,label:this.readLabelValue(R.objects),objects:R.objects,levelCount:m}}},b.prototype.isImageData=function(){return this.isImage},b.prototype.getLevel=function(){return this.level},b.prototype.hasCount=function(){return!1},b.prototype.getSelectedNodes=function(){return this.selectedDataPoints},b.prototype.getMetadataColumns=function(){},b.prototype.getIdentityExprs=function(){return this.metadataColumns&&_.map(this.metadataColumns,function(f){return f.identityExprs})},b.prototype.readLabelValue=function(f){if(f)return(0,j.NA)(f,gt.OV.label.field)},b.prototype.readTooltipInfo=function(f){var I,y;if(!_.isEmpty(f.values))for(var R in f.values){var W=f.values[R],Z=null!==(I=W.valueSourceIndex)&&void 0!==I?I:0,Y=(0,j.NA)(W.objects,_e.yD.general.formatString),o=this.valueSources[Z];(y=y||[]).push({displayName:o.displayName,value:(0,ce.xq)(W.value,o,_e.yD.general.formatString,!1,Y)})}return y},b}(),Ke=function(){function b(f,I,y){this.dataView=f,this.listJoinSeparator=I,this.initMetadataColumns(),this.reader=f.categorical?new M(f.categorical,this.columns,y):new Be(f.matrix,this.columns,void 0,y)}return b.prototype.getIdentityFields=function(){var f=this.getMetadataColumns();return this.reader.getIdentityExprs()||_.map(f,function(I){return I.identityExprs})},b.prototype.getDataPointsReader=function(){return this.reader},b.prototype.hasGroupOnKeys=function(){var f=this.getMetadataColumns();if(_.isEmpty(f))return!1;for(var I=0,y=f;I<y.length;I++){var R=y[I];if(!_.isEmpty(R.identityExprs)&&!_.isEmpty(R.expr)&&(R.identityExprs.length>1||!(0,Qe.fS)(R.identityExprs[0],R.expr)))return!0}return!1},b.prototype.getQueryNamePerLevel=function(){var f=this.getMetadataColumns();return _.map(f,function(I){return I.queryName})},b.prototype.getDisplayNamePerLevel=function(){var f=this.getMetadataColumns();return _.map(f,function(I){return I.displayName})},b.prototype.getDisplayName=function(){var f=this.getDisplayNamePerLevel();return _.join(f,this.listJoinSeparator)},b.prototype.getColumns=function(){return this.columns},b.prototype.getMetadataColumnByLevel=function(f){return this.columns[f]},b.prototype.getMetadataColumns=function(){return this.reader.getMetadataColumns()||this.columns},b.prototype.initMetadataColumns=function(){this.columns=(0,Ie.zJ)(this.dataView.metadata.columns)},b}(),nt=C(74082),T=C(3222),Tt=C(18885),Ft=C(83611),Oe=function(){function b(f,I){this.hasMappedColumn=!1,this.filter=f.filter,this.isNotFilter=!1,this.analyze(f,I)}return b.prototype.analyze=function(f,I){var y=this;if(this.hasMappedColumn=(0,Ie.R6)({columns:f.columns}),this.isAnyFilter=se.yl.isAnyFilter(this.filter),!this.isAnyFilter){var R=f.fieldSQExprs;if(this.filter){var W=(0,oe.Gl)(this.filter,R);if(W){if(this.isNotFilter=_.some(W,function(m){return!m.selected}),this.hasMappedColumn){var Z=_.some(W,function(m){return y.isSQExprBlank(m)});(this.isNotFilter||Z)&&(this.isNotFilter=!1,this.filter=void 0)}this.selectedIdentities=W,this.isDefaultFilter=1===this.selectedIdentities.length&&(0,Tt.F)(this.selectedIdentities[0].identity.expr)}}if(this.defaultValueByLevel=this.getDataViewDefaultValuePerLevel(f.columns,f.defaultValuePropertyId),!_.isEmpty(_.compact(this.defaultValueByLevel))&&!I&&(this.filter||(this.filter=Ft.N.buildDefaultValueFilter(f.columns),this.selectedIdentities=(0,oe.Gl)(this.filter,R),this.isDefaultFilter=!0),this.isDefaultFilter&&!_.isEmpty(this.selectedIdentities)))for(var Y=this.selectedIdentities[0],o=0;Y;){var g=(0,B.TZ)((0,T.R)(R[o],this.defaultValueByLevel[o].identityFieldsValues));this.isNotFilter=!1,Y.identity=g,Ce.fF.assert(function(){return _.isEmpty(Y.children)||1===Y.children.length},"Default value filter can not have more than single node per level"),Y=_.isEmpty(Y.children)?void 0:Y.children[0],o++}}},b.prototype.isSQExprBlank=function(f){var I=f.identity.expr;return!!(0,nt.$Q)(I)&&(0,nt.WC)(I)},b.prototype.getDataViewDefaultValuePerLevel=function(f,I){if(!_.isEmpty(f))return _.map(f,function(y){return(0,j.NA)(y.objects,I)})},b}(),he="foregroundNeutralSecondaryAlt2",qe="foregroundNeutralSecondary",et="#C8C8C8",mt="#ffffff";function We(b){return{general:{outlineWeight:1,outlineColor:c.v.getThemeColor(b,he)},slicerText:{color:c.v.getThemeColor(b,qe),outlineStyle:xe.$m.Nil,textSize:10,fontFamily:J.Wn.regular.css,labelBold:!1,labelItalic:!1,labelUnderline:!1},selection:(0,Ie.Cq)(),search:{enabled:!1,outlineStyle:xe.$m.Bottom,borderColor:et,background:mt},expandCollapse:{indentation:15,visible:!0,toggleType:S.H.Chevron},items:{padding:void 0,accessibilityContrastProperties:!1}}}function St(b){var f=b.dataView,I=b.hostServices,y=b.selectionHandler;if(Ce.fF.assertValue(I,"hostServices"),f&&f.metadata&&!_.isEmpty(f.metadata.columns)){var R=I.getLocalizedString("ListJoin_Separator"),W=new Ke(f,I.getLocalizedString("ListJoin_Separator")),Z=W.getIdentityFields();if(!_.isEmpty(Z)){var Y=f.metadata&&f.metadata.objects&&(0,j.NA)(f.metadata.objects,X.gO.general.filter),o=W.getColumns(),g=new Oe({columns:o,defaultValuePropertyId:X.gO.general.defaultValue,filter:Y,fieldSQExprs:Z},I.ignoreDefaultFilter());_.isEmpty(g.selectedIdentities)||(W=new Ke(f,R,g.selectedIdentities));var m=g.hasMappedColumn&&!(0,Ie.Wm)({columns:o});(function(b,f,I,y,R){var W=f.filter,Z=I.isSelectionModeInverted();if(W&&!se.yl.isSameFilter(W,b)){I.handleClearSelection();var Y=X.gO.general.filter,o={};o[Y.propertyName]=f.filter,y.persistProperties({merge:[{objectName:Y.objectName,selector:void 0,properties:o}]})}R&&(Z||!se.yl.isSameFilter(W,b))&&(0,Ie.K5)(I,!1)})(Y,g,y,I,m),y.setColumns(W.getColumns()),y.setQueryNameByLevel(W.getQueryNamePerLevel());var L=function(b,f,I,y,R){var W=y.hostServices,Z=y.selectionHandler,Y=y.style,o=y.localizedSelectAllText,s=y.localizedDeselectAllText,g=y.isSlicer??!1,m=null!=Z&&Z.isSelectionModeInverted();m=b.filter?b.isAnyFilter?(0,j.NA)(f.objects,X.gO.data.isInvertedSelectionMode,m):b.isNotFilter:!b.hasMappedColumn&&(0,j.NA)(f.objects,X.gO.data.isInvertedSelectionMode,m);var L=function(b,f,I){var y=We(f),R=b.objects,W=c.v.create(f);if(R){y.items.accessibilityContrastProperties=(0,j.NA)(R,X.gO.items.accessibilityContrastProperties,!1);var Z="lightLabel",Y="foregroundNeutralSecondary";y.items.accessibilityContrastProperties&&0===I&&(Y="foreground",Z="largeLightLabel");var o=(0,de.Zi)((0,j.RK)(R,"items"),{color:"fontColor",family:"fontFamily",size:"textSize"},W,f,Y,Z,{color:y.slicerText.color,family:y.slicerText.fontFamily,size:ne.B.createFromPt(y.slicerText.textSize)},!0);y.slicerText.color=o.color,y.slicerText.fontFamily=o.family,y.slicerText.textSize=o.size.pt,y.items.accessibilityContrastProperties&&1===I&&(y.slicerText.outlineStyle=xe.$m.Top|xe.$m.Bottom|xe.$m.Left|xe.$m.Right),y.slicerText.outlineStyle=(0,j.NA)(R,X.gO.items.outlineStyle,y.slicerText.outlineStyle);var s=W.getColorForProperty(R,X.gO.items.background,void 0);s&&(y.slicerText.background=s),y.search.enabled=(0,j.NA)(R,X.gO.general.selfFilterEnabled,y.search.enabled),y.search.outlineStyle=(0,j.NA)(R,X.gO.searchBox.outlineStyle,y.search.outlineStyle),y.search.borderColor=W.getColorForPropertyWithDefaultColor(R,X.gO.searchBox.borderColor,y.search.borderColor);var g=W.getColorForProperty(R,X.gO.searchBox.background,void 0);y.search.background=g||y.slicerText.background||y.search.background,y.expandCollapse.toggleType=(0,j.NA)(R,X.gO.items.expandCollapseToggleType,y.expandCollapse.toggleType),y.expandCollapse.indentation=(0,j.NA)(R,X.gO.items.steppedLayoutIndentation,y.expandCollapse.indentation),y.general.outlineWeight=(0,j.NA)(R,X.gO.general.outlineWeight,y.general.outlineWeight),y.general.outlineColor=W.getColorForPropertyWithDefaultColor(R,X.gO.general.outlineColor,y.general.outlineColor),y.selection.selectAllCheckboxEnabled=(0,j.NA)(R,X.gO.selection.selectAllCheckboxEnabled,y.selection.selectAllCheckboxEnabled),y.selection.singleSelect=(0,j.NA)(R,X.gO.selection.singleSelect,y.selection.singleSelect),y.selection.strictSingleSelect=(0,j.NA)(R,X.gO.selection.strictSingleSelect,y.selection.strictSingleSelect),y.slicerText.labelBold=(0,j.NA)(R,X.gO.items.bold,!1),y.slicerText.labelItalic=(0,j.NA)(R,X.gO.items.italic,!1),y.slicerText.labelUnderline=(0,j.NA)(R,X.gO.items.underline,!1),y.items.padding=(0,j.NA)(R,X.gO.items.padding,void 0)}return y}(f,Y,y.slicerType);Z&&(Z.setSelectionModeInverted(m),Z.setDefaultValueMode(se.yl.isDefaultFilter(b.filter)));var q=I.getQueryNamePerLevel(),ee=W.getFilterExpressionMetadata(),K=[],me=[],ge=yt(I,I.getDataPointsReader(),K,me,W,q,ee,{calculatedIndex:0},void 0,b,y.featureSwitches,y.valueSettings,y.hideRetainedDataPoints);if(me.length>0){var we=_.chain(me).sort(lt).map(function(Le){return Le.dataPoint}).value();K=K.concat(we)}var ie=Z.toFilterExpressionMetadata(K);W.setFilterExpressionMetadata(ie);var Re=function(b){var f=(0,j.NA)(b.objects,X.gO.general.selfFilter,void 0);if(!f)return"";var I=f.conditions();Ce.fF.assert(function(){return 1===I.length},"There should be exactly 1 filter expression.");var y=I[0];if(y){var R=new ut;return y.accept(R),R.getValueForField()}}(f),F=L.selection,ae=F.strictSingleSelect;if(!ae&&g&&Z.isDisableMultipleSelectForMappedColumn()&&(ae=!0,L.selection.strictSingleSelect=!0),F.selectAllCheckboxEnabled&&!ae&&_.isEmpty(Re)){var Ve=R?W.getLocalizedString("DQP_Disabled_SelectAll"):o;ge.unshift({value:m&&s?s:o,tooltip:Ve,identity:O.l0.createWithMeasure(o),selected:!1,isSelectAllDataPoint:!0,partially:K.length>0,count:void 0,disabled:R,levelIndex:0,levelCount:void 0,index:0,id:"0:0"})}return Z&&Z.setStrictSingleSelect(ae,_.isEmpty(K)?ge:K),{categorySourceName:I.getDisplayName(),slicerSettings:L,slicerDataPoints:ge,defaultValueByLevel:b.defaultValueByLevel,searchKey:Re,restatement:st(W,K,m,I.getColumns()),warnings:new ye.tb,retainedDataPoints:K,queryNameByLevel:q,hasGroupOnKeys:I.hasGroupOnKeys()}}(g,f.metadata,W,b,m);return L.hasImages=_.some(L.slicerDataPoints,function(q){return q.isImage}),L}}}function yt(b,f,I,y,R,W,Z,Y,o,s,g,m,L){for(var q=f.getSelectedNodes(),ee=f.getDataPointsCount(),le=[],K=f.getMetadataColumn(),me=!!(g&&g.fieldParameters&&K.parameter&&2===K.parameter.kind),ge=(0,D.EO)(K,X.gO.general.formatString),we=f.getLevel(),ie=0,Re=0;Re<ee;Re++){var F=f.getDataViewDataPoint(Re);if(F){ie++,Y.calculatedIndex++;var Ve,ae=(0,Ie.X$)(F.scopeId,q);Ve=m?At(F.value,m,K):(0,D.WU)(F.value,ge);var Te=f.isImageData()&&(0,k.gU)(Ve),Le=Ve,je=!1,Xe=we+":"+ie;s?.hasMappedColumn&&null==F.value&&(je=!0,Le=R.getLocalizedString("DQP_Disabled_Blank"));var Ne={value:Ve,tooltip:Le,identity:null,selected:null!=ae&&ae.checked,partially:ae&&!_.isEmpty(ae.children),count:F.count,isImage:Te,level:we,parent:o,isCollapsed:F.isCollapsed,scopeIdentity:F.scopeId,levelIndex:ie,levelCount:F.levelCount,disabled:je,index:Y.calculatedIndex,id:o?o.id+","+Xe:Xe,tooltipInfo:F.tooltipInfo,imageUrl:F.imageUrl,label:F.label,objects:F.objects};if(ae&&ae.checked&&(me?y.push({dataPoint:Ne,selectionIndex:ae.index}):I.push(Ne)),le.push(Ne),o&&o.children.push(Ne),it(Ne,W),!F.isCollapsed&&F.childrenReader)Ne.children=[],le.push.apply(le,yt(b,F.childrenReader,I,y,R,W,Z,Y,Ne,void 0,g,void 0,L)||[]);else if(ae&&!_.isEmpty(ae.children)){var rt=we+1,ct=b.getMetadataColumnByLevel(rt);tt(rt,s,ae.children,W,Z&&Z.cachedValueItems,ct,b,f,Ne,le,I,y,!1,Y,g)}}}return _.isEmpty(q)||tt(we,s,q,W,Z&&Z.cachedValueItems,K,b,f,o,le,I,y,!(L||o&&!1!==o.isCollapsed),Y,g),le}function tt(b,f,I,y,R,W,Z,Y,o,s,g,m,L,q,ee){var le=ee&&ee.fieldParameters&&W.parameter&&2===W.parameter.kind,K=(0,D.EO)(W,X.gO.general.formatString);o&&(o.children=[]);for(var me=0,ge=I;me<ge.length;me++){var we=ge[me],ie=!1,Re=void 0,F=void 0;f&&f.isDefaultFilter&&!_.isEmpty(f.defaultValueByLevel)&&f.defaultValueByLevel[b]?Re=be.jz.getTextValue(f.defaultValueByLevel[b].value):(F=Ot(b,we,R),_.isEmpty(F)?(Re=(0,oe.Xz)(we.identity),ie=!0):Re=F[0].valueMap[b]),q.calculatedIndex++;var ae=(0,D.WU)(Re,K),Ve=Ct(we.checked,ae,Y.hasCount(),Y.isImageData(),b,we.identity,o,!_.isEmpty(we.children),y,q.calculatedIndex);if(Ve.isFilterIdentity=ie,L&&s.push(Ve),Ve.selected&&(le?m.push({dataPoint:Ve,selectionIndex:we.index}):g.push(Ve)),!_.isEmpty(we.children)){var Le=b+1,je=Z.getMetadataColumnByLevel(Le);tt(Le,f,we.children,y,F,je,Z,Y,Ve,s,g,m,L,q,ee)}}}function Ct(b,f,I,y,R,W,Z,Y,o,s){var g={value:f,tooltip:f,identity:null,selected:b,count:I?0:void 0,isImage:y,level:R,parent:Z,scopeIdentity:W,partially:Y,disabled:!1,index:s};return it(g,o),Z&&Z.children.push(g),g}function Ot(b,f,I){if(!_.isEmpty(I)){for(var y=[],R=0,W=I;R<W.length;R++){var Z=W[R];(0,B.fS)(Z.identities[b],f.identity)&&y.push(Z)}return y}}function it(b,f){for(var I=O.dw.builder(),y=b;y;)I.withColumnIdentity(y.scopeIdentity,f[b.level]),y=y.parent;b.identity=I.createSelectionId()}function st(b,f,I,y){if(_.isEmpty(f))return b.getLocalizedString("All");if(1===f.length&&!I){var R=f[0];if(null==R.parent)return R.value;for(var W=[],Z=b.getLocalizedString("MultiColumn_Join_Separator"),Y=b.getLocalizedString("NamePattern_Bracket");R;)W.unshift((0,H.W)(Y,R.value,y[R.level].displayName)),R=R.parent;return W.join(Z)}return b.getLocalizedString("Slicer_Restatement_Multiple")}function lt(b,f){Ce.fF.assert(function(){return null!=b.dataPoint.level&&null!=f.dataPoint.level},"level should not be nullish"),Ce.fF.assert(function(){return null!=b.selectionIndex&&null!=f.selectionIndex},"selectionIndex should not be nullish");var I=b.dataPoint.level-f.dataPoint.level;return 0!==I?I:(Ce.fF.assert(function(){return b.selectionIndex!==f.selectionIndex}),b.selectionIndex-f.selectionIndex)}var ut=function(b){function f(){return null!==b&&b.apply(this,arguments)||this}return(0,G.__extends)(f,b),f.prototype.visitConstant=function(I){I.type&&I.type.text&&(this.value=I.value)},f.prototype.visitContains=function(I){I.left.accept(this),I.right.accept(this)},f.prototype.visitOr=function(I){I.left.accept(this),I.right.accept(this)},f.prototype.visitColumnRef=function(I){this.fieldExpr=I},f.prototype.visitHierarchyLevel=function(I){this.fieldExpr=I},f.prototype.visitDefault=function(I){this.value=void 0,this.fieldExpr=void 0},f.prototype.getValueForField=function(){return this.fieldExpr&&this.value},f}(Me.vq);function At(b,f,I){if(null==b&&!_.isEmpty(f.showBlankAs))return f.showBlankAs;var y=f.labelDisplayUnits,R=-1===y,W=void 0;R&&!_.isEmpty(f.customFormatString)&&(W=f.customFormatString);var Y={};return null!=W&&(Y={general:{formatString:W}}),new D.g({column:I,formatStringPropId:X.gO.general.formatString,nullsAreBlank:!0,precision:R?void 0:f.labelPrecision,formatSingleValues:0===y,defaultPrecisionForScaledValues:!0,trailingZeroes:!0}).format(b,Y)}},36408:function(vt,Ue,C){"use strict";C.r(Ue),C.d(Ue,{ContainerClass:function(){return ji},ContentWrapperClass:function(){return Ui},Slicer:function(){return gr}});var G=C(81337),X=C(11034),c=C(9434),de=C(4308),ne=C(10034),xe=C(51129),S=C(20598),ye=C(3212),Ce=C(45296),J=C(38308),k=C(62458),H=C(56578),j=C(60810),B=C(46135),D=C(82755),O=C(90031),oe=C(17591),se=C(5342),be=C(45875),Me=C(59694),Qe=C(78107),Ie=C(94419),ce=C(28326),M=C(79154),Be=((0,M.CH)("date-slicer-datepicker"),(0,M.CH)("date-slicer-datepicker-wrapper"),(0,M.CH)("date-slicer-input")),Ke="drag-resize-disabled",nt=[S.e4,S.bb,S.vX],T=C(68447),Tt=function(){function a(e){e&&(this.preventVirtualKeyboardOnTheFirstTap=e.preventVirtualKeyboardOnTheFirstTap,this.featureSwitches=e.featureSwitches),this.culture=ce.dx.getCurrentCulture(),this.inputElements=[],this.eventsHelper=new T.PB;var t=this.hostServices=e.hostServices;this.startInputLabel=t.getLocalizedString("Slicer_StartLabel"),this.endInputLabel=t.getLocalizedString("Slicer_EndLabel")}return a.prototype.createRange=function(e){return new se.C0(e.bounds.min,e.bounds.max,e.value.min,e.value.max)},a.prototype.getSliderOptions=function(e,t){return{min:0,max:(0,oe.I)(e.bounds.max,e.bounds.min),step:1}},a.prototype.areEqual=function(e,t){return(0,oe.X)(e,t)},a.prototype.defaultValue=function(){return new Date(0)},a.prototype.startProperty=function(){return c.gO.data.startDate},a.prototype.endProperty=function(){return c.gO.data.endDate},a.prototype.formatValue=function(e,t){return ce.dx.formatValue(e,"d")},a.prototype.parseSingleSliderValue=function(e,t){return null},a.prototype.inputStyleProperties=function(){return{background:c.gO.date.background,fontColor:c.gO.date.fontColor,textSize:c.gO.date.textSize,fontFamily:c.gO.date.fontFamily,bold:c.gO.date.bold,italic:c.gO.date.italic,underline:c.gO.date.underline}},a.prototype.parseInput=function(e,t,i){return ce.dx.parseDate(e)},a.prototype.isInputValid=function(e,t,i,n){return!(null==e||0===i&&e>t.max||1===i&&e<t.min)},a.prototype.setRange=function(e,t,i,n,r,l){null==r?(this.featureSwitches.useModernDatePickerSlicer||(i.val(ce.dx.formatValue(e.min,"d")),n.val(ce.dx.formatValue(e.max,"d"))),i.attr("aria-label",(0,Me.W)(this.startInputLabel,ce.dx.formatValue(l.min,"d"),ce.dx.formatValue(e.max,"d"))),n.attr("aria-label",(0,Me.W)(this.endInputLabel,ce.dx.formatValue(e.min,"d"),ce.dx.formatValue(l.max,"d")))):0===r?(this.featureSwitches.useModernDatePickerSlicer||i.val(ce.dx.formatValue(e.min,"d")),i.attr("aria-label",(0,Me.W)(this.startInputLabel,ce.dx.formatValue(l.min,"d"),ce.dx.formatValue(l.max,"d")))):1===r&&(this.featureSwitches.useModernDatePickerSlicer||n.val(ce.dx.formatValue(e.max,"d")),n.attr("aria-label",(0,Me.W)(this.endInputLabel,ce.dx.formatValue(l.min,"d"),ce.dx.formatValue(l.max,"d"))))},a.prototype.enumerateObjectInstances=function(e,t,i){var n;if("date"===e.objectName&&t&&t.inputStyle){var r=c.gO.date;return[{selector:null,objectName:"date",properties:(n={fontColor:t.inputStyle.fontColor,background:t.inputStyle.background,textSize:t.inputStyle.textSize,fontFamily:t.inputStyle.fontFamily},n[r.bold.propertyName]=t.inputStyle.labelBold,n[r.italic.propertyName]=t.inputStyle.labelItalic,n[r.underline.propertyName]=t.inputStyle.labelUnderline,n)}]}},a.prototype.getValuesCard=function(e,t){var i=this,n=c.gO.date,r=new H.CQ(new H.lg("values"),"Role_DisplayName_Values",[n.fontFamily,n.textSize,n.fontColor,n.background,n.bold,n.italic,n.underline],function(v){return i.hostServices.getLocalizedString(v)}),h=(new H.UN).withFontFamily({descriptor:n.fontFamily,value:e.inputStyle.fontFamily}).withFontSizeProperties({descriptor:n.textSize,value:e.inputStyle.textSize}).withBold({descriptor:n.bold,value:e.inputStyle.labelBold}).withItalic({descriptor:n.italic,value:e.inputStyle.labelItalic}).withUnderline({descriptor:n.underline,value:e.inputStyle.labelUnderline}).build();return r.addGroup("values",function(v){v.withDisplayName("Role_DisplayName_Values"),v.addCompositeSlice("fontselector","Font",h),v.addSimpleSlice("color",new H.BT({descriptor:n.fontColor,value:{value:e.inputStyle.fontColor}}).build())}).addGroup("background",function(v){v.withDisplayName("Visual_Background").addSimpleSlice("color",new H.BT({descriptor:n.background,value:{value:e.inputStyle.background}}).build())}),r.build()},a.prototype.getDataPointsForSingleValueRange=function(e){return[]},a.prototype.createInputElement=function(e,t){var i=this,n=this.culture.calendar.patterns.d,r=(0,J.ze)().attr("type","text").attr(Ke,"true").prop("readonly",!!this.preventVirtualKeyboardOnTheFirstTap).attr("placeholder",n).addClass(Be.class).appendTo(e);e.attr("tabindex","0"),e.keydown(function(h){(13===h.keyCode||32===h.keyCode)&&r.focus()}),r.datepicker({showOtherMonths:!0,selectOtherMonths:!0,changeMonth:!0,changeYear:!0,nextText:"",prevText:"",firstDay:this.culture.calendar.firstDay,dayNamesMin:this.culture.calendar.days.namesAbbr,dateFormat:this.culture.calendar.patterns.d.replace("yyyy","yy").toLowerCase(),monthNamesShort:this.culture.calendar.months.names,onClose:function(){r.prop("readonly",!!i.preventVirtualKeyboardOnTheFirstTap)}}),r.on("click",function(h){i.preventVirtualKeyboardOnTheFirstTap&&r.is("[readonly]")&&(r.prop("readonly",!1),r.blur()),r.datepicker("show")}),this.preventVirtualKeyboardOnTheFirstTap&&r.on("touchstart",function(h){!r.is("[readonly]")&&!r.is(":focus")&&r.focus()});var l=r.datepicker("widget");return l.attr("prevent-focus-loss","false"),r.attr("prevent-focus-loss","false"),r.datepicker("option","beforeShow",function(){l.addClass("themeableElement"),i.unregisterPopupHideEvents=i.eventsHelper.onPopupHideEvent(function(h,v){i.onPopupHideEvent(h,v)},e.get(0)),i.fixLayout(l,r,1e3)}),this.inputElements.push(r),r},a.prototype.onPopupHideEvent=function(e,t){if("resize"!==e){var i=$(t);!i.hasClass("hasDatepicker")&&!i.hasClass("ui-datepicker")&&!i.hasClass("ui-icon")&&!$(i).closest(".ui-datepicker").length&&this.hideDatepicker()}else this.hideDatepicker()},a.prototype.hideDatepicker=function(){this.unbindPopupHideEventHandlers();for(var e=0,t=this.inputElements;e<t.length;e++){var i=t[e];i.datepicker("widget").is(":visible")&&i.datepicker("hide").blur()}},a.prototype.onDestroy=function(){this.hideDatepicker()},a.prototype.unbindPopupHideEventHandlers=function(){this.unregisterPopupHideEvents&&this.unregisterPopupHideEvents()},a.prototype.fixLayout=function(e,t,i){var n=this;setTimeout(function(){e.is(":visible")?(be.Ck.fixWidgetPosition(e,t,null,!0),e.find(".ui-datepicker-current-day").addClass("backgroundToForegroundColor")):i>0&&n.fixLayout(e,t,i-20)},20)},a.prototype.filterExpr=function(e){var t=(0,Qe.VM)(e);return{lower:(0,Ie.CQ)(t.min),upper:(0,Ie.CQ)(t.max)}},a.prototype.comparisonKind=function(){return{lower:2,upper:3}},a.prototype.addAriaDescription=function(e){var t=this.culture.calendar.patterns.d,i=ce.dx.format(this.hostServices.getLocalizedString("DateSlicer_InputTextHint"),[t]);e.attr("aria-description",i)},a}(),Ft=C(6450),Oe=C(65302),he=C(90120),qe=C(18664),et=C(32105),mt=C(44783),We=C(38265),St=C(59107),De=C(64329),$e=C(38078),tt="aria-expanded",Ct="focused",Ot=function(){function a(e,t){var i=this;this.DefaultRestatementColorName="foregroundDark",this.verticalSlicerRenderer=e,this.isDeferred=!0,this.popup=$("<div ></div>").addClass("slicer-dropdown-popup"),St.M.isIOSWebView()&&this.popup.addClass(T.M7.class),this.popup.on("slicer.dataPointSelected",function(n){i.strictSingleSelect&&(i.hidePopup(),n.stopPropagation())}),this.content=$("<div ></div>").addClass("slicer-dropdown-content"),this.loader=$("<div ></div>").addClass("slicer-dropdown-loader"),this.hostServices=t.hostServices,this.controlId="slicer-dropdown-popup-".concat($e.b$.generateGuid()),this.popup.addClass("visual").addClass("themeableElement").attr("focus-nav-mode","Group").attr("id",this.controlId).keydown(function(n){27!==n.keyCode||i.popup.is(":hidden")?9===n.keyCode&&!i.popup.is(":hidden")&&(i.hidePopup(),Oe.IK.focus(Ft.m.getFocusNextElement(!0,i.menu.get(0))),n.preventDefault(),n.stopPropagation()):(i.hidePopup(),i.menu.focus(),n.preventDefault(),n.stopPropagation())}),$("body").append(this.popup),this.popup.append(this.content),this.popup.append(this.loader),this.featureSwitches=t.featureSwitches,this.eventsHelper=new T.PB}return a.prototype.onClear=function(e){this.verticalSlicerRenderer.onClear(e)},a.prototype.onModeChange=function(e){this.popup.remove(),this.verticalSlicerRenderer.onModeChange(e)},a.prototype.onDataViewObjectChanged=function(e,t){var i=(0,T.tm)(e,t);return k.fF.assertNonEmpty(i,"There should be at least one save object"),i},a.prototype.hasSlider=function(){return!1},a.prototype.supportsOrientation=function(){return!1},a.prototype.enumerateObjectInstances=function(e){return this.verticalSlicerRenderer.enumerateObjectInstances(e,this.featureSwitches)},a.prototype.getValuesCard=function(){return this.verticalSlicerRenderer.getValuesCard(this.featureSwitches)},a.prototype.getSlicerSettingsCardOptions=function(e,t,i,n){return this.verticalSlicerRenderer.getSlicerSettingsCardOptions(e,t,i,n)},a.prototype.getAdditionalCards=function(){return this.verticalSlicerRenderer.getAdditionalCards()},a.prototype.init=function(e,t){return this.container=t,this.style=e.visualInitOptions.style,this.slicerSelectionHandler=this.verticalSlicerRenderer.init(e,this.content),this.slicerSelectionHandler},a.prototype.onDestroy=function(){this.verticalSlicerRenderer&&this.verticalSlicerRenderer.onDestroy(),this.unbindPopupHideEventHandlers(),this.popup.remove()},a.prototype.render=function(e){this.options=e,this.data=this.verticalSlicerRenderer.converter(this.options.dataView,this.options.isSlicer),this.slicerSelectionHandler.setSelected(this.data.retainedDataPoints);var t=!this.loadDataForGroupOnKeysIfNeeded();this.renderMenu(this.data.restatement,t),this.isExpanded?this.showPopup(this.setFocus,!0):this.hidePopup()},a.prototype.loadDataForGroupOnKeysIfNeeded=function(){if(!this.isExpanded&&this.data.hasGroupOnKeys){if(this.isDeferred&&!_.isEmpty(this.data.retainedDataPoints)&&_.some(this.data.retainedDataPoints,function(e){return e.isFilterIdentity}))return this.setShouldDeferData(!1),!0;this.setShouldDeferData(!0)}return!1},a.prototype.setShouldDeferData=function(e){this.isDeferred=e,this.hostServices.setShouldDeferData(e)},a.prototype.renderMenu=function(e,t){var i,n=this;if(this.menu||(this.menu=(0,J.hi)(),this.menu.addClass("slicer-dropdown-menu"),this.menu.attr(((i={role:"combobox","aria-haspopup":"listbox",tabindex:"0","aria-controls":this.controlId})[tt]="false",i[Ke]="true",i)),this.container.append(this.menu),this.menu.on("click touchstart keydown",function(v){n.focusEventType=v.type,v.preventDefault(),("click"===v.type||"touchstart"===v.type||40===v.keyCode&&!v.ctrlKey||38===v.keyCode&&!v.ctrlKey||32===v.keyCode||13===v.keyCode)&&n.onRenderMenuClick(v,!0)}),this.restatement=(0,J.hi)(),this.restatement.addClass("slicer-restatement"),this.menu.append(this.restatement),this.icon=$("<i ></i>").addClass("dropdown-chevron"),this.icon.appendTo(this.menu)),this.menu.attr({"aria-label":this.options.restatement}),this.icon.addClass("powervisuals-glyph"),this.icon.addClass("chevron-down"),this.settings=this.defaultRestatementSetting(),this.options.dataView.metadata&&this.options.dataView.metadata.objects){var r=this.options.dataView.metadata.objects,l=he.v.create(this.style),h=(0,qe.Zi)((0,D.RK)(r,"items"),{color:"fontColor",family:"fontFamily",size:"textSize"},l,this.style,"foregroundNeutralSecondary","lightLabel",{color:this.settings.fontColor,family:this.settings.fontFamily,size:et.B.createFromPt(this.settings.textSize)});this.settings.fontColor=h.color,this.settings.fontFamily=h.family,this.settings.textSize=h.size.pt,this.settings.background=l.getColorForPropertyWithDefaultColor(r,c.gO.items.background,this.settings.background),this.strictSingleSelect=(0,D.NA)(r,c.gO.selection.strictSingleSelect,this.strictSingleSelect)}t&&this.restatement.text(e),this.menu.css({"background-color":this.settings.background||"",color:this.settings.fontColor,"font-size":De.FP.fromPointToPixel(this.settings.textSize),"font-family":this.settings.fontFamily}),this.popup.css({"background-color":this.settings.background||""})},a.prototype.onRenderMenuClick=function(e,t){if(e.stopPropagation(),this.popup.is(":hidden"))return this.isExpanded=!0,this.setFocus=t,this.setShouldDeferData(!1),this.loader.css({"background-color":this.settings.background||""}),this.loader.show(),this.popup.addClass(Ct),void this.showPopup(!1,!1);this.popup.removeClass(Ct),this.hidePopup()},a.prototype.showPopup=function(e,t){var i=this;window.requestAnimationFrame(function(){if(i.popup){i.unbindPopupHideEventHandlers();var n=i.menu.width()+10;i.popup.css({width:n}),i.menu.attr(tt,"true"),i.icon.removeClass("chevron-down"),i.icon.addClass("chevron-up"),be.Ck.fixWidgetPosition(i.popup,i.menu,null,!0),t&&i.verticalSlicerRenderer.renderVerticalSlicer(i.data,i.options,function(){i.loader.hide(),i.focusCallbackTimeout&&window.clearTimeout(i.focusCallbackTimeout),i.focusCallbackTimeout=window.setTimeout(function(){e&&Oe.IK.focusChildInGroup(i.popup.get(0),"keydown"===i.focusEventType),i.focusCallbackTimeout=void 0,i.setFocus=!1,i.focusEventType=void 0},0)}),i.unregisterPopupHideEvents=i.eventsHelper.onPopupHideEvent(function(l,h){i.onPopupHideEvent(l,h)},i.menu.get(0),i.popup.get(0),!0),i.popup.show()}})},a.prototype.hidePopup=function(){this.popup&&(this.isResize=!1,this.isExpanded=!1,this.popup.hide(),this.setShouldDeferData(!0),this.menu.attr(tt,"false"),this.icon.removeClass("chevron-up"),this.icon.addClass("chevron-down"),this.unbindPopupHideEventHandlers())},a.prototype.onPopupHideEvent=function(e,t){if("resize"!==e){"focusin"===e&&(this.isResize=!1);var i=$(t);if(!(i.parents(".slicer-dropdown-popup").length||i.is(this.menu)||this.menu.find(i).length)){if("scroll"===e)return void be.Ck.fixWidgetPosition(this.popup,this.menu,null,!0);this.isResize||this.hidePopup()}}else this.isResize=!0},a.prototype.unbindPopupHideEventHandlers=function(){this.unregisterPopupHideEvents&&(this.unregisterPopupHideEvents(),this.unregisterPopupHideEvents=void 0)},a.prototype.defaultRestatementSetting=function(){return{textSize:10,fontFamily:We.Wn.regular.css,fontColor:he.v.getThemeColor(this.style,this.DefaultRestatementColorName),background:this.style.isHighContrast?he.v.getThemeColor(this.style,mt.U):void 0}},a}(),it=C(32041),st=C(66001),Nt=(0,M.CH)("horizontalSlicerContainer"),ot=(0,M.CH)("slicerItemsContainer"),bt=(0,M.CH)("navigationArrow"),lt=(0,M.CH)("left"),ut=(0,M.CH)("right"),At=(0,M.CH)("isMultiSelectEnabled"),b=(0,M.CH)("flexDisplay"),f=(0,M.CH)("canScrollRight"),I=(0,M.CH)("canScrollLeft"),y=(0,M.CH)("individualItemContainer"),R=(0,M.CH)("horizontalImageContainer"),W=(0,M.CH)("horizontalSlicerImage"),Z=(0,M.CH)("slicerCheckbox"),Y=C(87592),o=C(62224),s=C(83611),g=C(82085),K_label_marginRight=2,K_label_paddingLeft=8,K_label_paddingRight=8,we=function(){function a(e,t){this.viewModelAdapter=t,this.textProperties={fontFamily:We.Wn.regular.css,fontSize:"14px"},e&&(this.horizontalSlicerLayout=e.horizontalSlicerLayout,this.featureSwitches=e.featureSwitches),this.behavior=new o.wV,this.horizontalSlicerLayout||(this.horizontalSlicerLayout=new ie),this.domHelper=new T.gy,this.dataStartIndex=0,this.searchComponent=new g.v(e?.hostServices)}return a.prototype.hasSlider=function(){return!1},a.prototype.getDefaultValue=function(){if(this.data&&!_.isEmpty(this.data.defaultValueByLevel))return this.data.defaultValueByLevel[0].value},a.prototype.getIdentityFields=function(){return(0,T.nQ)(this.dataView)},a.prototype.supportsOrientation=function(){return!0},a.prototype.getSlicerSettings=function(e){var t=e&&e.slicerSettings;return t||(t=(0,Y.VT)(this.style)),t},a.prototype.enumerateObjectInstances=function(e){var t=this.originalData,i=this.getSlicerSettings(t);return(0,T.qo)(e,t,i,this.dataView,this.featureSwitches)},a.prototype.getValuesCard=function(){var e=this.originalData,t=this.getSlicerSettings(e);return(0,T.s9)(this.hostServices,e,t,this.featureSwitches)},a.prototype.getSlicerSettingsCardOptions=function(e,t,i,n){var r=this.originalData,l=r?r.slicerSettings:void 0;return l||(l=(0,Y.VT)(this.style)),(0,T.nD)({cardUidBuilder:e,currentSlicerSettings:l,data:r,dataView:this.dataView,hostServices:this.hostServices,orientation:t,activeMode:i,slicerModes:n,featureSwitches:this.featureSwitches})},a.prototype.getAdditionalCards=function(){var e=this.originalData,t=e?e.slicerSettings:void 0;return t||(t=(0,Y.VT)(this.style)),(0,T.oE)(this.hostServices,e,t,this.dataView)},a.prototype.onModeChange=function(e){(0,T.VD)(this.hostServices,e)},a.prototype.onDataViewObjectChanged=function(e,t){var i=(0,T.tm)(e,t);return k.fF.assertNonEmpty(i,"There should be at least one save object"),i},a.prototype.getRestatement=function(){return this.data&&this.data.restatement},a.prototype.onClear=function(e){(0,T.K5)(this.selectionHandler,e)},a.prototype.init=function(e,t){var i=this;this.element=t,this.currentViewport=e.visualInitOptions.viewport;var n=this.hostServices=e.visualInitOptions.host;this.style=e.visualInitOptions.style,this.behavior&&(this.selectionHandler=new s.N(n,this.behavior)),this.loadMoreData=function(){return e.loadMoreData()};var r=document.createElement("div");r.className=Nt.class;var l=this.container=d3.select(r);this.searchComponent.create(l);var h=this.body=l.append("div").classed(T.uT.class+" "+b.class,!0),v={color:he.v.getThemeColor(this.style,"foregroundNeutralSecondary")},w={color:he.v.getThemeColor(this.style,"foreground")};this.leftNavigationArrow=h.append("button").call(this.horizontalSlicerLayout.getNavigationArrowsClass,!0).attr("aria-label",this.hostServices.getLocalizedString("Previous_ButtonText")).attr("tabindex",-1).styles(v).on("pointerover",function(){return i.leftNavigationArrow.styles(w)}).on("pointerleave",function(){return i.leftNavigationArrow.styles(v)});var E=this.data&&this.data.slicerSettings.selection.strictSingleSelect;this.itemsContainer=h.append("div").classed(ot.class+" "+b.class,!0).attr("tabindex","0").attr("role","listbox").attr("aria-multiselectable",!E);var A=this.itemsContainer.node();return $(A).on("keydown",function(U){var z=U.keyCode,Q=39===z||40===z;!Q&&37!==z&&38!==z||(i.focusNextElement(Q),U.stopPropagation())}),this.rightNavigationArrow=h.append("button").call(this.horizontalSlicerLayout.getNavigationArrowsClass,!1).attr("aria-label",this.hostServices.getLocalizedString("Next_ButtonText")).attr("tabindex",-1).styles(v).on("pointerover",function(){return i.rightNavigationArrow.styles(w)}).on("pointerleave",function(){return i.rightNavigationArrow.styles(v)}),this.element.get(0).appendChild(r),this.bindNavigationEvents(),this.selectionHandler},a.prototype.render=function(e){this.hasSearchableData=e.hasSearchableData;var t=this.hostServices.getLocalizedString(T.vx),i=e.dataView;if(this.originalData=this.data=(0,Y.OQ)({dataView:i,localizedSelectAllText:t,selectionHandler:this.selectionHandler,hostServices:this.hostServices,style:this.style,isSlicer:e.isSlicer,featureSwitches:this.featureSwitches,slicerType:1}),this.viewModelAdapter&&(this.data=this.viewModelAdapter.applyChanges(e.viewport,this.originalData,i)),this.updateItemsContainerLabel(),this.updateStyle(this.hasSearchableData),!i||!this.data||_.isEmpty(this.data.slicerDataPoints))return this.itemsContainer.selectAll("*").remove(),void(this.itemsToDisplay=0);this.dataView=i,(!(this.currentViewport&&e.viewport&&(this.currentViewport.height!==e.viewport.height||this.currentViewport.width!==e.viewport.width))||this.isMaxDimensionsNeedsReCalculate())&&this.calculateAndSetMaxItemDimensions(),this.currentViewport=e.viewport,this.itemsToDisplay=this.horizontalSlicerLayout.calculateNumberOfItemsToDisplay(this.element,this.totalItemWidth,this.totalItemHeight,this.getDataPointsCount()),0!==this.itemsToDisplay&&this.renderCore()},a.prototype.renderCore=function(){this.horizontalSlicerLayout.renderCore&&this.horizontalSlicerLayout.renderCore(this.container);var e=this.data;if(e&&e.slicerDataPoints){this.normalizePosition();var t=this.getDataPointsCount(),i=this.itemsToDisplay,n=this.dataStartIndex,r=n+this.itemsToDisplay<=t-1,l=n>0,h=this.container.classed(f.class)&&!r&&document.activeElement===this.rightNavigationArrow.node(),v=this.container.classed(I.class)&&!l&&document.activeElement===this.leftNavigationArrow.node();(h||v)&&this.itemsContainer.node().focus(),this.container.classed(f.class,r),this.container.classed(I.class,l),this.renderItems(e.slicerSettings),this.bindInteractivityService(),n+i>=.8*t&&this.loadMoreData()}},a.prototype.updateStyle=function(e){var t=this.data,i=t&&t.slicerSettings,n=e&&i.search.enabled,r=g.v.fromSlicerSettings(i,t?.searchKey,n,!1,this.featureSwitches);this.searchComponent.update(r),i&&this.container.classed(At.class,!i.selection.singleSelect)},a.prototype.renderItems=function(e){var t=this,i=this.itemsToDisplay;k.fF.assert(function(){return i>0},"items to display should be greater than zero");var n=this.dataStartIndex,r=this.data.slicerDataPoints.slice(n,n+i),l=this.horizontalSlicerLayout.bindData(r,this.data,this.itemsContainer),h=l.enter().append("div").classed(y.class,!0).classed("containerBackground",!e.items.accessibilityContrastProperties).classed("containerBackgroundContrast",e.items.accessibilityContrastProperties).attr("role","option").attr("tabindex",0).each(function(E){var A=d3.select(this);if(E.isImage){var U=A.append("div").classed(R.class,!0);U.append("div").classed(Z.class,!0).append("input").attr("type","checkbox"),U.append("img").classed(W.class,!0)}else A.append("div").classed(T.NV.class,!0).classed(b.class,!0)}).merge(l),v=this;h.each(function(E){var A=d3.select(this);(0,T.hx)(A,E),A.attr("aria-label",(0,T.rX)(v.hostServices,E.tooltip)).attr("aria-setsize",-1).attr("aria-posinset",E.levelIndex?E.levelIndex:1)}),h.attr("aria-selected",function(E){return!0===E.selected}),h.order(),h.select(T.NV.selector).styles({"padding-left":De.FP.toString(K_label_paddingLeft),"padding-right":De.FP.toString(K_label_paddingRight)}),h.styles({"margin-right":function(A,U){return t.horizontalSlicerLayout.getDataPointRightMargin(U,t.itemsToDisplay)}}),this.domHelper.setSlicerTextStyle(h,e,this.featureSwitches),l.exit().remove(),this.animationFrameId&&window.cancelAnimationFrame(this.animationFrameId),this.animationFrameId=window.requestAnimationFrame(function(){h.select("img").attr("title",function(Q){return(0,T.rX)(t.hostServices,Q.tooltip)}).attr("src",function(Q){return Q.value}),h.select(T.NV.selector).attr("title",function(Q){return(0,T.rX)(t.hostServices,Q.tooltip)}).text(function(Q){return Q.value});var E=t.element.find(T.NV.selector),A=E.first(),U=A.height(),z=A.width();E.each(function(Q,te){it.b.wordBreakOverflowingText(te,z,U)})})},a.prototype.bindInteractivityService=function(){if(this.selectionHandler&&this.body){var i=this.body.selectAll(y.selector),n=this.data,r=this.searchComponent.input;if(!r.empty()){var l=r.node();(_.isEmpty(l.value)||_.isEmpty(n.searchKey))&&r.property("value",n.searchKey)}this.selectionHandler.bind(n.retainedDataPoints,{behaviorOptions:{slicerContainer:this.container,itemsContainer:i,settings:n.slicerSettings,searchInput:r,style:this.style},orientation:ye.i.Horizontal})}this.behavior.renderSelection()},a.prototype.normalizePosition=function(){var e=this.getDataPointsCount(),t=this.horizontalSlicerLayout.getLastStartIndex(this.itemsToDisplay,e);this.dataStartIndex=$e.b$.clampValue(this.dataStartIndex,0,t)},a.prototype.bindNavigationEvents=function(){this.registerMouseWheelScrollEvents(),this.registerMouseClickEvents()},a.prototype.registerMouseClickEvents=function(){var e=this,t=this.container.selectAll(ut.selector),i=this.container.selectAll(lt.selector);t.on("click",function(){e.scrollRight()}),i.on("click",function(){e.scrollLeft()})},a.prototype.registerMouseWheelScrollEvents=function(){var e=this,t=this.body.node();t.addEventListener("mousewheel",function(i){e.onMouseWheel(i.wheelDelta)}),t.addEventListener("DOMMouseScroll",function(i){e.onMouseWheel(i.detail)})},a.prototype.onMouseWheel=function(e){e<0?this.scrollRight():e>0&&this.scrollLeft()},a.prototype.scrollRight=function(){var e=this.horizontalSlicerLayout.getLastStartIndex(this.itemsToDisplay,this.getDataPointsCount());this.dataStartIndex!==e&&(this.dataStartIndex+=this.horizontalSlicerLayout.getScrollSize(this.itemsToDisplay),this.dataStartIndex=Math.min(this.dataStartIndex,e),this.renderCore())},a.prototype.scrollLeft=function(){0!==this.dataStartIndex&&(this.dataStartIndex-=this.horizontalSlicerLayout.getScrollSize(this.itemsToDisplay),this.dataStartIndex=Math.max(this.dataStartIndex,0),this.renderCore())},a.prototype.getScaledTextWidth=function(e){return e/De.Gj*80},a.prototype.isMaxDimensionsNeedsReCalculate=function(){if(!this.lastCalculatedProperties)return!0;var e=this.data.slicerSettings,i=e.slicerText,h=this.lastCalculatedProperties;return h.textSize!==i.textSize||h.fontFamily!==i.fontFamily||h.outlineStyle!==i.outlineStyle||h.outlineWeight!==e.general.outlineWeight||h.hasImage!==this.data.hasImages},a.prototype.calculateAndSetMaxItemDimensions=function(){var v,w,e=this.data,t=this.data.slicerSettings,i=this.getDataPointsCount(),n=0,r=0,l=t.slicerText.outlineStyle,h=t.general.outlineWeight;if(0===i)n=0,r=0;else if(e.hasImages)n=100,r=100;else{var E=e.slicerDataPoints,A=Math.min(i,50),U=jQuery.extend(!0,{},this.textProperties);w=t.slicerText.fontFamily,U.fontSize=De.FP.fromPoint(v=t.slicerText.textSize),U.fontFamily=w,U.text="Sample";for(var z=st.bY,Q=it.b.measureSvgTextHeight(U),te=0;te<A;te++){var Ee=E[te].value;U.text=Ee,n=Math.max(n,z(Ee,it.b.measureSvgTextWidth,U));var He=Math.min(2,(0,st.iD)(Ee));r=Math.max(r,Q*He)}n=Math.min(n,this.getScaledTextWidth(v))}var ke=K_label_paddingLeft+K_label_paddingRight+K_label_marginRight,Vt=this.domHelper.getRowsOutlineWidth(l,h);this.totalItemWidth=n+ke+Vt,this.totalItemHeight=r+ke+Vt;var Wi=this.horizontalSlicerLayout.calculateTotalItemDimensions(this.totalItemWidth,this.totalItemHeight);this.totalItemWidth=Wi.width,this.totalItemHeight=Wi.height,this.lastCalculatedProperties={outlineStyle:l,outlineWeight:h,textSize:v,fontFamily:w,hasImage:e.hasImages}},a.prototype.focusNextElement=function(e){var t=this.horizontalSlicerLayout.findNextElement(document.activeElement,e);if(!t){e?this.scrollRight():this.scrollLeft();var i=this.itemsContainer.node(),n=document.activeElement;i.contains(n)||(n=i),t=this.horizontalSlicerLayout.findNextElement(n,e)}t&&t.focus()},a.prototype.updateItemsContainerLabel=function(){var e;null!==(e=this.data)&&void 0!==e&&e.categorySourceName&&this.itemsContainer.attr("aria-label",this.data.categorySourceName),this.itemsContainer.attr("aria-multiselectable",!(this.data&&this.data.slicerSettings.selection.strictSingleSelect))},a.prototype.getDataPointsCount=function(){return _.size(this.data.slicerDataPoints)},a.prototype.addWarnings=function(e){(0,T.td)(this.data.warnings,e)},a}(),ie=function(){function a(){}return a.prototype.bindData=function(e,t,i){return i.selectAll(y.selector).data(e,function(r){return(0,T.fz)(r)})},a.prototype.calculateTotalItemDimensions=function(e,t){return{width:e,height:t}},a.prototype.calculateNumberOfItemsToDisplay=function(e,t,i,n){var l=e.find(T.uT.selector).width()-2*a.NavigationArrowWidth;if(0===t)return 0;var h=Math.round(l/t);return $e.b$.clampValue(h,1,n)},a.prototype.findNextElement=function(e,t){return $(e).hasClass(ot.class)?t?e.firstElementChild:void 0:t?e.nextElementSibling:e.previousElementSibling},a.prototype.getNavigationArrowsClass=function(e,t){t?e.classed(bt.class,!0).classed(lt.class,!0):e.classed(bt.class,!0).classed(ut.class,!0)},a.prototype.getScrollSize=function(e){return 1===e?e:e-1},a.prototype.getLastStartIndex=function(e,t){return t-e},a.prototype.getDataPointRightMargin=function(e,t){return this.isLastRowItem(e,t)?"0px":De.FP.toString(K_label_marginRight)},a.prototype.isLastRowItem=function(e,t){return e===t-1},a.NavigationArrowWidth=19,a}(),Re=C(68983),F=C(73508),ae=C(66486),Ve=C(38703),Te=C(95462),Le=function(){function a(){}return a.prototype.getVisualObjectInstance=function(e){return{selector:null,objectName:"dateRange",properties:{includeToday:e.includeToday,anchorDate:e.anchorDate}}},a.prototype.appendVisualSlices=function(e,t){null!=t.includeToday&&e.addSimpleSlice("includeToday",new H.bd({descriptor:c.gO.dateRange.includeToday,value:t.includeToday}).build()),e.addSimpleSlice("anchorDate",new H.hz({descriptor:c.gO.dateRange.anchorDate,value:t.anchorDate,placeholder:""}).build())},a.prototype.getMode=function(){return S.K8},a.prototype.getRelativePropertyId=function(){return c.gO.data.relativePeriod},a.prototype.getListOfOptions=function(){return F.GA.members()},a.prototype.getSelectedPeriodOption=function(e){return k.fF.assert(function(){return!(0,Me.g)(e.period)},"The period should be defined"),F.GA.members([e.period])[0]},a.prototype.getPeriods=function(e){var t=e.range!==ae.Vk?F.GA.members():F.J6.members();if(e.range===ae.Vk)switch(e.period){case F.qQ:e.period=F.P4;break;case F.ks:e.period=F.e7;break;case F.$G:e.period=F.gQ}return t},a}(),je=function(){function a(){}return a.prototype.getVisualObjectInstance=function(e){},a.prototype.appendVisualSlices=function(e,t){},a.prototype.getMode=function(){return S.GV},a.prototype.getRelativePropertyId=function(){return c.gO.data.relativeTimePeriod},a.prototype.getListOfOptions=function(){return F._k.members()},a.prototype.getSelectedPeriodOption=function(e){return k.fF.assert(function(){return!(0,Me.g)(e.period)},"The period should be defined"),F._k.members([e.period])[0]},a.prototype.getPeriods=function(e){return e.range!==ae.Vk?F._k.members():F.PN.members()},a}();function Xe(a){return k.fF.assertValue(a,"data"),{duration:a.duration,includeToday:a.includeToday,relativeUnit:Ne(a.period),relativeQualifier:wt(a.range),anchorDate:a.anchorDate}}function Ne(a){switch(a){case F.LK:return O.hU.Minute;case F.i4:return O.hU.Hour;case F.an:return O.hU.Day;case F.P4:return O.hU.Week;case F.qQ:return O.hU.CalendarWeek;case F.e7:return O.hU.Month;case F.ks:return O.hU.CalendarMonth;case F.gQ:return O.hU.Year;case F.$G:return O.hU.CalendarYear;default:return void k.fF.assertFail("Unsupported timePeriod: "+a)}}function wt(a){switch(a){case ae.Z$:return O.KO.Last;case ae.Vk:return O.KO.Current;case ae.lp:return O.KO.Next;default:return void k.fF.assertFail("Unsupported qualifier: "+a)}}var xt="slicer-select-menu",Zt=".ui-selectmenu-button";function mi(a){return{textSize:9,fontFamily:We.Wn.regular.css,fontColor:he.v.getThemeColor(a,"foregroundDark"),background:null,labelBold:!1,labelItalic:!1,labelUnderline:!1}}var ei=function(){function a(e,t){this.isRendered=!1,this.hostServices=e.hostServices,this.relativeSlicerComponent=function(a){switch(a){case O.wj.Time:return new je;case O.wj.Date:return new Le;default:return void k.fF.assertFail("Unsupported RelativeFilterType")}}(t)}return a.prototype.init=function(e,t){this.host=t,this.isRendered=!1,this.style=e.visualInitOptions.style,this.eventsHelper=new T.PB},a.prototype.onDestroy=function(){this.unregisterSelectMenuCloseEvents&&this.unregisterSelectMenuCloseEvents(),this.rangeSelectMenu&&this.rangeSelectMenu.destroy(),this.periodSelectMenu&&this.periodSelectMenu.destroy()},a.prototype.hasSlider=function(){return!1},a.prototype.supportsOrientation=function(){return!1},a.prototype.onClear=function(){this.data.range=ae.Z$,this.data.period=F.YP,this.data.duration=1,this.data.filter=null,this.renderInternal(),(0,T.VD)(this.hostServices,this.data.mode)},a.prototype.enumerateObjectInstances=function(e,t){var i,n=this.relativeSlicerComponent.getVisualObjectInstance(this.data);if("dateRange"===e.objectName&&n)return[n];if("numericInputStyle"===e.objectName){var r=c.gO.numericInputStyle;return[{selector:null,objectName:"numericInputStyle",properties:(i={fontColor:this.data.inputStyle.fontColor,background:this.data.inputStyle.background,textSize:this.data.inputStyle.textSize,fontFamily:this.data.inputStyle.fontFamily},i[r.bold.propertyName]=this.data.inputStyle.labelBold,i[r.italic.propertyName]=this.data.inputStyle.labelItalic,i[r.underline.propertyName]=this.data.inputStyle.labelUnderline,i)}]}},a.prototype.getValuesCard=function(e){var t=this,i=c.gO.numericInputStyle,n=new H.CQ(new H.lg("values"),"Role_DisplayName_Values",[i.fontFamily,i.textSize,i.fontColor,i.background,i.bold,i.italic,i.underline,c.gO.dateRange.includeToday,c.gO.dateRange.anchorDate],function(h){return t.hostServices.getLocalizedString(h)}),l=(new H.UN).withFontFamily({descriptor:i.fontFamily,value:this.data.inputStyle.fontFamily}).withFontSizeProperties({descriptor:i.textSize,value:this.data.inputStyle.textSize}).withBold({descriptor:i.bold,value:this.data.inputStyle.labelBold}).withItalic({descriptor:i.italic,value:this.data.inputStyle.labelItalic}).withUnderline({descriptor:i.underline,value:this.data.inputStyle.labelUnderline}).build();return n.addGroup("values",function(h){h.withDisplayName("Role_DisplayName_Values"),h.addCompositeSlice("fontselector","Font",l),h.addSimpleSlice("color",new H.BT({descriptor:i.fontColor,value:{value:t.data.inputStyle.fontColor}}).build()),t.relativeSlicerComponent.appendVisualSlices(h,t.data)}).addGroup("background",function(h){h.withDisplayName("Visual_Background").addSimpleSlice("color",new H.BT({descriptor:i.background,value:{value:t.data.inputStyle.background}}).build())}),n.build()},a.prototype.getSlicerSettingsCardOptions=function(e,t,i,n,r){return(0,T.nD)({cardUidBuilder:e,currentSlicerSettings:void 0,data:void 0,dataView:void 0,hostServices:this.hostServices,orientation:t,activeMode:i,slicerModes:n,featureSwitches:r})},a.prototype.getAdditionalCards=function(){},a.prototype.onModeChange=function(e){(0,T.VD)(this.hostServices,e)},a.prototype.onDataViewObjectChanged=function(e,t){var i=(0,T.tm)(e,t);return k.fF.assertNonEmpty(i,"There should be at least one save object"),i},a.converter=function(e,t,i,n){var r={mode:i,range:ae.Z$,period:F.YP,duration:1,includeToday:!0,identity:null,anchorDate:void 0,filter:null,inputStyle:mi(t)},l=e.columns.getMetadataColumns(c.CT.value);k.fF.assert(function(){return 1===l.length},"expect to have a metadataColumn"),r.identity=l[0].expr;var v=e.objects.getStaticObjects();if(v){var w=he.v.create(t);r.filter=(0,D.NA)(v,c.gO.general.filter,r.filter),r.range=(0,D.NA)(v,c.gO.data.relativeRange,r.range),r.period=(0,D.NA)(v,n,r.period),r.duration=Math.abs((0,D.NA)(v,c.gO.data.relativeDuration,r.duration)),r.includeToday=(0,D.NA)(v,c.gO.dateRange.includeToday,r.includeToday),r.anchorDate=(0,D.NA)(v,c.gO.dateRange.anchorDate,r.anchorDate);var E=(0,qe.Zi)((0,D.RK)(v,"numericInputStyle"),{color:"fontColor",family:"fontFamily",size:"textSize"},w,t,"foregroundDark","smallLabel",{color:r.inputStyle.fontColor,family:r.inputStyle.fontFamily,size:et.B.createFromPt(r.inputStyle.textSize)});r.inputStyle.fontColor=E.color,r.inputStyle.fontFamily=E.family,r.inputStyle.textSize=E.size.pt,r.inputStyle.background=w.getColorForPropertyWithDefaultColor(v,c.gO.numericInputStyle.background,r.inputStyle.background),r.inputStyle.labelBold=(0,D.NA)(v,c.gO.numericInputStyle.bold,r.inputStyle.labelBold),r.inputStyle.labelItalic=(0,D.NA)(v,c.gO.numericInputStyle.italic,r.inputStyle.labelItalic),r.inputStyle.labelUnderline=(0,D.NA)(v,c.gO.numericInputStyle.underline,r.inputStyle.labelUnderline)}return r},a.prototype.render=function(e){var t=this,i=(0,xe.G)(e.dataView);this.data=a.converter(i,this.style,this.relativeSlicerComponent.getMode(),this.relativeSlicerComponent.getRelativePropertyId()),this.isRendered||(this.initControls(),this.unregisterSelectMenuCloseEvents=this.eventsHelper.onPopupHideEvent(function(n,r){t.onSelectMenuClose(n,r)},this.selectionContainer.get(0))),this.updateProperties(this.data.range,this.data.period,this.data.duration),this.renderInternal()},a.prototype.onSelectMenuClose=function(e,t){!$(t).hasClass(xt)&&!$(t).closest(".".concat(xt)).length&&(this.rangeSelectMenu.close(),this.periodSelectMenu.close())},a.prototype.initControls=function(){var e=this;this.isRendered=!0,this.container=(0,J.hi)().addClass("relative-slicer").appendTo(this.host),this.selectionContainer=(0,J.hi)().addClass("selection-container").appendTo(this.container),this.selectionContainer.on("keyup keydown",function(r){9!==r.keyCode&&27!==r.keyCode&&r.stopPropagation()}),this.rangeSelectMenuContainer=(0,J.hi)().addClass("range-menu").appendTo(this.selectionContainer);var t={onChange:function(l){e.rangeChanged(l)},container:this.rangeSelectMenuContainer,options:this.getSelectMenuOptions(ae.dt.members()),className:xt,selectedValue:"Select",title:this.hostServices.getLocalizedString("Visual_Axis_Range")};this.rangeSelectMenu=new Re.S(t),this.rangeSelectMenu.update({selectedValue:ae.Z$}),this.durationInput=(0,J.ze)().attr("type","number").attr("min","1").attr("max",this.getDurationMax()).attr("drag-resize-disabled","true").addClass("duration-input").attr("aria-label",this.hostServices.getLocalizedString("Duration")).appendTo(this.selectionContainer),this.durationInput.val(this.data.duration.toString()),this.durationInput.on("change",_.debounce(function(r){e.durationChanged()},100)),this.periodSelectMenuContainer=(0,J.hi)().addClass("period-menu").appendTo(this.selectionContainer);var i=this.relativeSlicerComponent.getListOfOptions(),n={onChange:function(l){e.periodChanged(l)},container:this.periodSelectMenuContainer,options:this.getSelectMenuOptions(i),className:xt,title:this.hostServices.getLocalizedString("DaxTemplates_PeriodField")};this.periodSelectMenu=new Re.S(n),this.periodSelectMenu.disableOption(F.YP),this.updatePeriod(),this.restatementContainer=(0,J.hi)().addClass("restatement-container").appendTo(this.container),this.restatementIcon=$("<i ></i>").addClass("restatement-icon").addClass("pbi-glyph-datetime").appendTo(this.restatementContainer),this.restatement=(0,J.hi)().addClass("restatement").appendTo(this.restatementContainer),this.restatement.text(this.hostServices.getLocalizedString("ExportData_NoAppliedFiltersText"))},a.prototype.updatePeriod=function(){var e=this.relativeSlicerComponent.getPeriods(this.data);this.periodSelectMenu.update({options:this.getSelectMenuOptions(e),selectedValue:this.data.period})},a.prototype.rangeChanged=function(e){this.data.range=e,this.data.range===ae.Vk?(this.durationInput.attr("type","text"),this.durationInput.val("-"),this.durationInput.prop("disabled",!0),this.data.duration=0):("-"===this.durationInput.val()?(this.durationInput.attr("type","number"),this.durationInput.val("1"),this.data.duration=1):this.updateDuration(),this.durationInput.prop("disabled",!1)),this.updatePeriod();var t=this.updateProperties(this.data.range,this.data.period,this.data.duration);this.hostServices.persistProperties(t),this.renderInternal()},a.prototype.periodChanged=function(e){this.updateDuration();var t=this.updateProperties(this.data.range,e,this.data.duration);this.hostServices.persistProperties(t),this.renderInternal()},a.prototype.durationChanged=function(){this.updateDuration();var e=this.updateProperties(this.data.range,this.data.period,this.data.duration);this.hostServices.persistProperties(e),this.renderInternal()},a.prototype.renderInternal=function(){var e=this.relativeSlicerComponent.getSelectedPeriodOption(this.data),t=De.FP.fromPointToPixel(this.data.inputStyle.textSize),i={"font-size":t,"font-family":this.data.inputStyle.fontFamily,color:this.data.inputStyle.fontColor,"background-color":this.data.inputStyle.background?this.data.inputStyle.background:"","font-weight":this.data.inputStyle.labelBold?M.en:M.AI,"font-style":this.data.inputStyle.labelItalic?M.BF:M.AI,"text-decoration":this.data.inputStyle.labelUnderline?M.f0:M.zu};this.durationInput.css(i),i["font-size"]=t-1,this.restatement.css(i);var n=this.rangeSelectMenuContainer.find(Zt);n.css(i);var l=ae.dt.members([this.data.range])[0].displayName({get:this.hostServices.getLocalizedString.bind(this.hostServices)});n.attr("title",l);var h=this.periodSelectMenuContainer.find(Zt);h.css(i);var v=e.displayName({get:this.hostServices.getLocalizedString.bind(this.hostServices)});h.attr("title",v),this.rangeSelectMenu.update({selectedValue:this.data.range}),this.updatePeriod(),this.periodSelectMenu.disableOption(F.YP),0===this.data.duration?(this.durationInput.attr("type","text"),this.durationInput.val("-"),this.durationInput.prop("disabled",!0)):(this.durationInput.attr("type","number"),this.durationInput.prop("disabled",!1),this.durationInput.attr("max",this.getDurationMax()),this.durationInput.val(Math.abs(this.data.duration).toString())),this.setRestatement()},a.prototype.updateProperties=function(e,t,i){this.data.range=e;var n=this.data.period!==t;this.data.period=t,this.data.duration=i;var r,l=null;if(this.data.period!==F.YP&&(l=this.createFilter()),null!==l||!this.data.filter){var h=l?Te.yl.fromSQExpr(l):null;return(!Te.yl.isSameFilter(h,this.data.filter)||n)&&(r=this.createProperties(h),this.setRestatement()),r}this.onClear()},a.prototype.updateDuration=function(){this.data.range===ae.Vk?this.data.duration=0:this.isDurationValid()&&(this.data.duration=Math.min(parseInt(this.durationInput.val(),10),this.getDurationMax()))},a.prototype.isDurationValid=function(){var e=parseInt(this.durationInput.val(),10);return $.isNumeric(e)&&e>0},a.prototype.getDurationMax=function(){var e=this.data.period!==F.YP?this.data.period:F.an;return O.t0.getDurationMax(wt(this.data.range),Ne(e))},a.prototype.createFilter=function(){var e;if(this.data.identity){var t=Xe(this.data);e=(0,Ve.kW)({field:this.data.identity,options:t})}return e},a.prototype.getRelativePropertyName=function(){return this.relativeSlicerComponent.getRelativePropertyId().propertyName},a.prototype.createProperties=function(e){var t={merge:[],replace:[],remove:[]},i={objectName:"general",selector:null,properties:{}};null!==e?(i.properties[c.gO.general.filter.propertyName]=e,t.merge.push(i)):(i.properties[c.gO.general.filter.propertyName]=!0,t.remove.push(i));var n={objectName:"data",selector:null,properties:{}};if(null!=this.data.mode&&(n.properties[c.gO.data.mode.propertyName]=this.data.mode),null!=this.data.range&&(n.properties[c.gO.data.relativeRange.propertyName]=this.data.range),null!=this.data.duration&&(n.properties[c.gO.data.relativeDuration.propertyName]=this.data.duration),null!=this.data.period){var r=this.getRelativePropertyName();n.properties[r]=this.data.period}t.replace.push(n);var l={objectName:"dateRange",selector:null,properties:{}};return null!=this.data.includeToday&&(l.properties[c.gO.dateRange.includeToday.propertyName]=this.data.includeToday),this.data.anchorDate&&(l.properties[c.gO.dateRange.anchorDate.propertyName]=this.data.anchorDate),t.replace.push(l),this.hostServices.onSelect({type:0,visualObjects:[]}),t},a.prototype.setRestatement=function(){var t,i,n,e=this;if(this.data.period===F.YP)this.restatement.text(this.hostServices.getLocalizedString("ExportData_NoAppliedFiltersText"));else{var r=Xe(this.data),h=null===(i=null===(t=this.hostServices)||void 0===t?void 0:t.networkAvailability())||void 0===i?void 0:i.isNetworkAvailable();this.restatement.text(O.t0.getRestatement(r,h,function(w,E){return e.hostServices.getLocalizedString(w,E)},null===(n=this.hostServices.visualTimeSynchronization())||void 0===n?void 0:n.getAnchorTime()))}},a.prototype.getSelectMenuOptions=function(e){for(var t=[],i=0,n=e;i<n.length;i++){var r=n[i],l=r.displayName({get:this.hostServices.getLocalizedString.bind(this.hostServices)});t.push({text:l,value:r.value})}return t},a}(),ti=(0,C(28488).i)([{value:S.vX,displayName:function(e){return e.get("Visual_SliderMode_Between")}},{value:S.bb,displayName:function(e){return e.get("Visual_SliderMode_LessThanEqualLabel")}},{value:S.e4,displayName:function(e){return e.get("Visual_SliderMode_GreaterThanEqualLabel")}},{value:S.RB,displayName:function(e){return e.get("Visual_SliderMode_Basic")}},{value:S.j6,displayName:function(e){return e.get("Visual_SliderMode_Dropdown")}},{value:S.Zr,displayName:function(e){return e.get("Visual_SliderMode_SingleVal")}},{value:S.Ih,displayName:function(e){return e.get("Visual_SliderMode_VerticalList")}},{value:S.of,displayName:function(e){return e.get("Tile_Generic")}}]),dt=function(){function a(e){this.hostServices=e.hostServices,this.startInputLabel=this.hostServices.getLocalizedString("Slicer_StartTimeLabel"),this.endInputLabel=this.hostServices.getLocalizedString("Slicer_EndTimeLabel")}return a.prototype.createRange=function(e){return e.isSourceInteger?new se.BN(e.bounds.min,e.bounds.max,e.value.min,e.value.max):new se.mD(e.bounds.min,e.bounds.max,e.value.min,e.value.max)},a.prototype.areEqual=function(e,t){return e===t},a.prototype.defaultValue=function(){return 0},a.prototype.startProperty=function(){return c.gO.data.numericStart},a.prototype.endProperty=function(){return c.gO.data.numericEnd},a.prototype.parseSingleSliderValue=function(e,t){var i=t[e];return{min:i,max:i}},a.prototype.formatValue=function(e,t){return k.fF.assertValue(e,"value"),t?t.format(e):e.toString()},a.prototype.getSliderOptions=function(e,t){return t?{min:0,max:e.dataPoints.length-1,step:1}:e.isSourceInteger?{min:e.bounds.min,max:e.bounds.max,step:1}:{min:e.bounds.min,max:e.bounds.max,step:null}},a.prototype.inputStyleProperties=function(){return{background:c.gO.numericInputStyle.background,fontColor:c.gO.numericInputStyle.fontColor,textSize:c.gO.numericInputStyle.textSize,fontFamily:c.gO.numericInputStyle.fontFamily,bold:c.gO.numericInputStyle.bold,italic:c.gO.numericInputStyle.italic,underline:c.gO.numericInputStyle.underline}},a.prototype.parseInput=function(e,t,i){var n=parseFloat(e);return i&&$.isNumeric(n)?_.indexOf(t,n)>-1?n:this.findClosestPoint(n,t):n},a.prototype.findClosestPoint=function(e,t){for(var i=_.head(t),n=Math.abs(i-e),r=1;r<t.length;r++){var l=Math.abs(t[r]-e);l<n&&(n=l,i=t[r])}return i},a.prototype.isInputValid=function(e,t,i,n){return!(!$.isNumeric(e)||0===i&&e>t.max||1===i&&e<t.min||n&&e===t.min)},a.prototype.setRange=function(e,t,i,n,r,l){k.fF.assertValue(e.min,"value.min"),k.fF.assertValue(e.max,"value.max"),null==r?(i.val(t.format(e.min)),i.attr("aria-label",(0,Me.W)(this.startInputLabel,t.format(l.min),t.format(e.max))),n.val(t.format(e.max)),n.attr("aria-label",(0,Me.W)(this.endInputLabel,t.format(e.min),t.format(l.max)))):0===r?(i.val(t.format(e.min)),i.attr("aria-label",(0,Me.W)(this.startInputLabel,t.format(l.min),t.format(l.max)))):1===r&&(n.val(t.format(e.max)),n.attr("aria-label",(0,Me.W)(this.endInputLabel,t.format(l.min),t.format(l.max))))},a.prototype.createInputElement=function(e,t){return(0,J.ze)().attr("type","text").attr(Ke,"true").addClass(Be.class).appendTo(e)},a.prototype.enumerateObjectInstances=function(e,t,i){var n;if("numericInputStyle"===e.objectName&&t&&t.inputStyle){var r=c.gO.numericInputStyle;return[{selector:null,objectName:"numericInputStyle",properties:(n={fontColor:t.inputStyle.fontColor,background:t.inputStyle.background,textSize:t.inputStyle.textSize,fontFamily:t.inputStyle.fontFamily},n[r.bold.propertyName]=t.inputStyle.labelBold,n[r.italic.propertyName]=t.inputStyle.labelItalic,n[r.underline.propertyName]=t.inputStyle.labelUnderline,n)}]}},a.prototype.getValuesCard=function(e,t){var i=this,n=c.gO.numericInputStyle,r=new H.CQ(new H.lg("values"),"Role_DisplayName_Values",[n.fontFamily,n.textSize,n.fontColor,n.background,n.bold,n.italic,n.underline],function(h){return i.hostServices.getLocalizedString(h)}),l=(new H.UN).withFontFamily({descriptor:n.fontFamily,value:e.inputStyle.fontFamily}).withFontSizeProperties({descriptor:n.textSize,value:e.inputStyle.textSize}).withBold({descriptor:n.bold,value:e.inputStyle.labelBold}).withItalic({descriptor:n.italic,value:e.inputStyle.labelItalic}).withUnderline({descriptor:n.underline,value:e.inputStyle.labelUnderline});return r.addGroup("values",function(h){return h.withDisplayName("Role_DisplayName_Values").addCompositeSlice("fontselector","Font",l.build()).addSimpleSlice("color",new H.BT({descriptor:n.fontColor,value:{value:e.inputStyle.fontColor}}).build())}).addGroup("background",function(h){return h.withDisplayName("Visual_Background").addSimpleSlice("color",new H.BT({descriptor:n.background,value:{value:e.inputStyle.background}}).build())}),r.build()},a.prototype.getDataPointsForSingleValueRange=function(e){var t=e.categorical.categories[0],n=_.filter(t&&t.values||[],function(r){return $.isNumeric(r)});return n=_.sortBy(n,function(r){return r}),_.uniq(n)},a.prototype.filterExpr=function(e){return{lower:(0,Ie.tx)(e.min),upper:(0,Ie.tx)(e.max)}},a.prototype.comparisonKind=function(){return{lower:2,upper:4}},a}(),kt=C(45863),ii=C(56707),Ae=C(64067),ri=C(72489),It="Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif",jt=(0,M.CH)("date-slicer-range"),wi=(0,M.CH)("date-slicer"),ni=(0,M.CH)("date-slicer-head"),xi=(0,M.CH)("date-slicer-slider"),si=(0,M.CH)("date-slicer-control"),Ut=(0,M.CH)("roundHandles"),oi=(0,M.CH)("wrap"),Pe=(0,M.CH)("date-slicer-datepicker"),ht=(0,M.CH)("date-slicer-datepicker-wrapper"),Dt=(0,M.CH)("noUi-connect"),li=(0,M.CH)("noUi-connects"),ui=(0,M.CH)("noUi-background"),Rt=(0,M.CH)("noUi-handle"),Ye="foregroundNeutralSecondary";function ci(a){return{textSize:9,fontFamily:We.Wn.regular.css,fontColor:he.v.getThemeColor(a,"foregroundDark"),background:null,labelBold:!1,labelItalic:!1,labelUnderline:!1}}function di(a){return{color:he.v.getThemeColor(a,Ye),show:!0,drawRoundSliderHandles:!1,minSliderVisibilityHeight:0,minSliderVisibilityWidth:150,handleFillColor:he.v.getThemeColor(a,"background"),handleBorderColor:he.v.getThemeColor(a,Ye),primaryLineColor:he.v.getThemeColor(a,Ye),secondaryLineColor:he.v.getThemeColor(a,"foregroundNeutralLight")}}var pt=function(){function a(e,t,i,n,r){this.viewModelAdapter=r,this.isRendered=!1,e&&(this.hostServices=e.hostServices,this.preventTextSelection=e.preventTextSelection,this.featureSwitches=e.featureSwitches),this.rangeSlicerRenderer=t,this.singleValue=i,this.isCategorySourceNumeric=n,this.useModernDatePicker=!this.isCategorySourceNumeric&&this.featureSwitches.useModernDatePickerSlicer}return Object.defineProperty(a.prototype,"defaultSliderMode",{get:function(){return this.singleValue?S.Zr:S.vX},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"activeMode",{get:function(){return this.data.mode||this.defaultSliderMode},enumerable:!1,configurable:!0}),a.prototype.init=function(e,t){this.host=t,this.style=e.visualInitOptions.style,this.featureSwitches=e.visualInitOptions.featureSwitches},a.prototype.onModeChange=function(e){if(_.indexOf(nt,e)>-1){if(!this.data)return;this.updateMode(e)}else(0,T.VD)(this.hostServices,e)},a.prototype.onDataViewObjectChanged=function(e,t){if(0===t&&1===e.length&&e[0].objectName===c.gO.data.mode.objectName&&e[0].propertyName===c.gO.data.mode.propertyName){var n=e[0].propertyValue;return _.indexOf(nt,n)>-1?this.buildUpdatedPropertySaveObjects(n):(0,T.tm)(e,t)}return e},a.prototype.buildUpdatedPropertySaveObjects=function(e){var t=[];this.updateRangeSlicerState(e);var i=this.buildRangeSlicerProperties();this.data.properties.filter=i.filter,this.data.properties.bounds=i.bounds;var n=this.createFilter(i,e,this.data.state,this.data.identity);t.push({objectName:c.gO.general.filter.objectName,propertyName:c.gO.general.filter.propertyName,propertyValue:n,propertyType:{filter:{}}});var l=this.isCategorySourceNumeric?{numeric:!0}:{dateTime:!0},h=null;1&this.data.state&&null!==i.start&&(h=i.start);var v={objectName:this.rangeSlicerRenderer.startProperty().objectName,propertyName:this.rangeSlicerRenderer.startProperty().propertyName,propertyValue:h,propertyType:l};t.push(v);var w=null;2&this.data.state&&null!==i.end&&(w=i.end);var E={objectName:this.rangeSlicerRenderer.endProperty().objectName,propertyName:this.rangeSlicerRenderer.endProperty().propertyName,propertyValue:w,propertyType:l};return t.push(E),t.push({objectName:c.gO.data.mode.objectName,propertyName:c.gO.data.mode.propertyName,propertyValue:e,propertyType:{enumeration:S.dt}}),t},a.prototype.buildRangeSlicerProperties=function(){return{start:1&this.data.state?this.data.value.min:null,end:2&this.data.state?this.data.value.max:null,mode:this.data.mode,filter:{min:this.data.value.min,max:this.data.value.max},bounds:{min:this.data.bounds.min,max:this.data.bounds.max}}},a.prototype.onClear=function(){if(this.data&&this.data.initialValue){this.data.value=this.data.initialValue,this.data.state=0,this.updateProperties(),this.hostServices.triggerUpdate();var e=this.hostServices.getLocalizedString("Slicer_ClearSelectionsCleared");this.hostServices.alertWithDebounce("announce-clear-selection",e)}},a.prototype.render=function(e){if(_.isEmpty(e.dataView))this.hostServices.setWarnings([new Ce.L$]);else{if(this.dataView=e.dataView,this.reader=(0,xe.G)(this.dataView),this.originalData=this.data=this.converter(this.reader,e),!this.isMetaColumnsValid(this.reader))return this.hostServices.setWarnings([new Ce.L$]),void(this.isRendered&&this.disableSlicer());this.isRendered&&this.enableSlicer(),this.viewModelAdapter&&(this.data=this.viewModelAdapter.applyChanges(e.viewport,this.originalData,this.dataView)),this.isRendered||this.initControls(),this.rangeSlicerRenderer.setRange(this.data.value,this.data.formatter,this.start,this.end,null,this.data.bounds),this.range=this.rangeSlicerRenderer.createRange(this.data),this.updateInputControls(),this.updateSlider(this.activeMode),this.updateProperties(),this.isDataColumnsValid(this.reader)||(this.hostServices.setWarnings([new Ce.L$]),this.isRendered&&this.disableSlicer())}},a.prototype.hasSlider=function(){return!!this.data&&this.data.sliderSettings.show},a.prototype.supportsOrientation=function(){return!1},a.prototype.enumerateObjectInstances=function(e){var t=this.originalData;return"date"===e.objectName||"numericInputStyle"===e.objectName?this.rangeSlicerRenderer.enumerateObjectInstances(e,t,this.featureSwitches):"slider"===e.objectName&&t?[{selector:null,objectName:"slider",properties:{show:t.sliderSettings.show,color:t.sliderSettings.color},propertyInstanceKind:{color:3}}]:void 0},a.prototype.getSlicerSettingsCardOptions=function(e,t,i,n){return(0,T.nD)({cardUidBuilder:e,currentSlicerSettings:void 0,data:void 0,dataView:this.dataView,hostServices:this.hostServices,orientation:t,activeMode:i,slicerModes:n,featureSwitches:this.featureSwitches})},a.prototype.getValuesCard=function(){var e=this.originalData;if(e)return this.rangeSlicerRenderer.getValuesCard(e,this.featureSwitches)},a.prototype.getAdditionalCards=function(){var t,e=this,i=this.originalData;if(i){var n=c.gO.slider,r=[n.show,n.color,n.handleFillColor,n.handleBorderColor,n.secondaryLineColor],l=new H.CQ(new H.lg("slider"),"Slicer_Slider",r,function(h){return e.hostServices.getLocalizedString(h)});return l.addTopLevelToggle("show",function(){return new H.bd({descriptor:n.show,value:i.sliderSettings.show}).build()}),null!==(t=this.featureSwitches)&&void 0!==t&&t.slicerSliderColors?l.addGroup("handles",function(h){h.withDisplayName("Slicer_Handles"),e.data.sliderSettings.drawRoundSliderHandles?h.addSimpleSlice("fill",new H.BT({descriptor:n.handleFillColor,value:{value:i.sliderSettings.handleFillColor}}).build()).addSimpleSlice("border",new H.BT({descriptor:n.handleBorderColor,value:{value:i.sliderSettings.handleBorderColor}}).build()):h.addSimpleSlice("color",new H.BT({descriptor:n.handleBorderColor,value:{value:i.sliderSettings.handleBorderColor}}).build(),function(v){return v.withCustomDisplayName("Generic_Color")})}).addGroup("primaryLine",function(h){h.withDisplayName("Primary_Line").addSimpleSlice("primaryLineColor",new H.BT({descriptor:n.color,value:{value:i.sliderSettings.primaryLineColor}}).build(),function(v){return v.withCustomDisplayName("Generic_Color")})}).addGroup("secondaryLine",function(h){h.withDisplayName("Visual_Secondary_Line").addSimpleSlice("secondaryLineColor",new H.BT({descriptor:n.secondaryLineColor,value:{value:i.sliderSettings.secondaryLineColor}}).build())}):l.addGroup("colors",function(h){h.withDisplayName("Generic_Color").addSimpleSlice("color",new H.BT({descriptor:n.color,value:{value:i.sliderSettings.color}}).build())}),[l.build()]}},a.prototype.isDataColumnsValid=function(e){if(this.singleValue)return e.columns.getCategoryCount()>0;var t=e.columns.getMetadataColumns(c.CT.value);if(!_.isEmpty(t)){var i=t[0];if(i.aggregates&&null!=i.aggregates.min&&null!=i.aggregates.max)return!0}return!1},a.prototype.isMetaColumnsValid=function(e){var t=e.columns.getMetadataColumns(c.CT.value);return!_.isEmpty(t)},a.prototype.converter=function(e,t){var i,n,r={state:0,mode:null,formatter:null,identity:null,value:null,initialValue:null,bounds:null,filter:null,properties:{filter:null},sliderSettings:di(this.style),inputStyle:ci(this.style),dataPoints:null,wrapRangeBoxes:!1,isSourceInteger:!1,hideDatePickerButton:!0},h=e.columns.getMetadataColumns(c.CT.value)[0],v=(0,ri.EO)(h,c.gO.general.formatString);r.isSourceInteger=!0===h.type.integer,r.formatter=(0,ri.E3)(v),r.identity=h.expr;var w=this.rangeSlicerRenderer.defaultValue(),E=this.rangeSlicerRenderer.defaultValue();if(this.singleValue)r.dataPoints=this.rangeSlicerRenderer.getDataPointsForSingleValueRange(this.dataView),r.dataPoints.length>0&&(w=r.dataPoints[0],E=r.dataPoints[r.dataPoints.length-1]);else{var A=h.aggregates;null!=A.min&&(w=A.min),null!=A.max&&(E=A.max)}r.value={min:w,max:E},r.initialValue={min:w,max:E},r.bounds={min:r.value.min,max:r.value.max};var U=e.objects.getStaticObjects();if(U){r.filter=(0,D.NA)(U,c.gO.general.filter),r.properties.start=r.filter?(0,D.NA)(U,this.rangeSlicerRenderer.startProperty(),null):null,r.properties.end=r.filter?(0,D.NA)(U,this.rangeSlicerRenderer.endProperty(),null):null,r.properties.mode=(0,D.NA)(U,c.gO.data.mode,null),r.hideDatePickerButton=(0,D.NA)(U,c.gO.date.hideDatePickerButton,!0);var z=this.rangeSlicerRenderer.inputStyleProperties(),Q=he.v.create(this.style),te=(0,D.RK)(U,this.rangeSlicerRenderer instanceof dt?"numericInputStyle":"date"),Ee=(0,qe.Zi)(te,{color:"fontColor",family:"fontFamily",size:"textSize"},Q,this.style,"foregroundDark","smallLabel",{color:r.inputStyle.fontColor,family:r.inputStyle.fontFamily,size:et.B.createFromPt(r.inputStyle.textSize)});r.inputStyle.fontColor=Ee.color,r.inputStyle.fontFamily=Ee.family,r.inputStyle.textSize=Ee.size.pt,r.inputStyle.background=Q.getColorForPropertyWithDefaultColor(U,z.background,r.inputStyle.background),r.inputStyle.labelBold=(0,D.NA)(U,z.bold,r.inputStyle.labelBold),r.inputStyle.labelItalic=(0,D.NA)(U,z.italic,r.inputStyle.labelItalic),r.inputStyle.labelUnderline=(0,D.NA)(U,z.underline,r.inputStyle.labelUnderline),r.sliderSettings.color=Q.getColorForPropertyWithDefaultColor(U,c.gO.slider.color,r.sliderSettings.color),r.sliderSettings.show=(0,D.NA)(U,c.gO.slider.show,r.sliderSettings.show),!(null===(i=this.featureSwitches)||void 0===i)&&i.slicerSliderColors&&(r.sliderSettings.handleFillColor=Q.getColorForPropertyWithDefaultColor(U,c.gO.slider.handleFillColor,r.sliderSettings.handleFillColor),r.sliderSettings.primaryLineColor=Q.getColorForPropertyWithDefaultColor(U,c.gO.slider.color,r.sliderSettings.color),r.sliderSettings.handleBorderColor=Q.getColorForPropertyWithDefaultColor(U,c.gO.slider.handleBorderColor,r.sliderSettings.primaryLineColor),r.sliderSettings.secondaryLineColor=Q.getColorForPropertyWithDefaultColor(U,c.gO.slider.secondaryLineColor,r.sliderSettings.secondaryLineColor)),null!==r.properties.start&&(r.state|=1,r.value.min=r.properties.start,r.properties.start<r.bounds.min&&(r.bounds.min=r.properties.start)),null!==r.properties.end&&(r.state=r.state|=2,r.value.max=r.properties.end,r.properties.end>r.bounds.max&&(r.bounds.max=r.properties.end)),r.value.min>r.bounds.max&&(r.value.max=r.bounds.max=r.value.min),r.value.max<r.bounds.min&&(r.value.min=r.bounds.min=r.value.max),null!=r.properties.mode&&(r.mode=r.properties.mode),r.filter&&(r.properties.filter={min:r.value.min,max:r.value.max})}else r.state=0,r.properties.start=null,r.properties.end=null,r.properties.mode=null;var He=(0,Ae.WV)(null!==(n=this.featureSwitches)&&void 0!==n&&n.slicerSliderColors?r.sliderSettings.handleBorderColor:r.sliderSettings.color);return r.sliderSettings.activeColor=(0,Ae.jd)(He,.5,.2),r.sliderSettings.hoverColor=(0,Ae.Bx)((0,Ae._j)(He,100)),r.sliderSettings.label=t.restatement,r.properties.bounds={min:r.bounds.min,max:r.bounds.max},r},a.prototype.initControls=function(){this.isRendered=!0,this.createHtmlControls(),this.updateMode(this.data.mode)},a.prototype.createHtmlControls=function(){var e=this;this.container=(0,J.hi)().addClass(wi.class).appendTo(this.host),this.container.on("keyup keydown",function(r){9!==r.keyCode&&27!==r.keyCode&&r.stopPropagation()});var t=(0,J.hi)().addClass(ni.class).css(this.getFontStyles()).appendTo(this.container),i=(0,J.hi)().addClass(jt.class).appendTo(t);if(this.startContainer=(0,J.hi)().addClass(si.class).appendTo(i),this.endContainer=(0,J.hi)().addClass(si.class).appendTo(i),this.useModernDatePicker?(k.fF.assert(function(){return e.data.value.min instanceof Date},"Date required"),k.fF.assert(function(){return e.data.value.max instanceof Date},"Date required"),k.fF.assert(function(){return e.data.bounds.min instanceof Date},"Date required"),k.fF.assert(function(){return e.data.bounds.max instanceof Date},"Date required"),this.startComponentRef=this.hostServices.getUIComponentFactory().createDatePicker(this.startContainer.get(0),this.data.value.min,function(r){null!==r&&e.onRangeChange(0)},$e.b$.generateGuid(),this.data.bounds.min,this.data.bounds.max,this.data.hideDatePickerButton),this.endComponentRef=this.hostServices.getUIComponentFactory().createDatePicker(this.endContainer.get(0),this.data.value.max,function(r){null!==r&&e.onRangeChange(1)},$e.b$.generateGuid(),this.data.bounds.min,this.data.bounds.max,this.data.hideDatePickerButton),this.start=this.startComponentRef.datePickerElement.find(":input").first(),this.end=this.endComponentRef.datePickerElement.find(":input").first(),this.startButton=this.startComponentRef.datePickerElement.find(":button"),this.endButton=this.endComponentRef.datePickerElement.find(":button"),this.data.hideDatePickerButton?(this.start.addClass(Be.class),this.end.addClass(Be.class)):(this.start.addClass(Pe.class),this.startComponentRef.datePickerElement.addClass(ht.class),this.end.addClass(Pe.class),this.endComponentRef.datePickerElement.addClass(ht.class))):(this.start=this.rangeSlicerRenderer.createInputElement(this.startContainer,0),this.end=this.rangeSlicerRenderer.createInputElement(this.endContainer,1)),this.rangeSlicerRenderer.addAriaDescription&&(this.rangeSlicerRenderer.addAriaDescription(this.start),this.rangeSlicerRenderer.addAriaDescription(this.end)),(0,T.Id)()){var n=T.hY.class;this.start.addClass(n),this.end.addClass(n)}this.bindEventHandlersToInputElements(),this.sliderContainer=(0,J.hi)().addClass(xi.class).appendTo(this.container)},a.prototype.bindEventHandlersToInputElements=function(){var e=this;this.start.on("click touchend contextmenu",function(t){t.stopPropagation()}),this.end.on("click touchend contextmenu",function(t){t.stopPropagation()}),this.start.on("change",function(t){e.onRangeChange(0)}),this.start.on("keyup",function(t){13===t.which&&(e.start.blur(),e.start.focus())}),this.start.on("focus",function(t){(!e.singleValue||e.data.filter)&&(e.useModernDatePicker?(k.fF.assert(function(){return e.data.value.min instanceof Date},"Date required"),e.startComponentRef.writeValue(e.data.value.min)):e.start.val(e.rangeSlicerRenderer.formatValue(e.data.value.min,null))),e.preventTextSelection||e.start.select()}),this.start.on("blur",function(t){(!e.singleValue||e.data.filter)&&(e.useModernDatePicker?(k.fF.assert(function(){return e.data.value.min instanceof Date},"Date required"),e.startComponentRef.writeValue(e.data.value.min)):e.start.val(e.rangeSlicerRenderer.formatValue(e.data.value.min,e.data.formatter)))}),this.end.on("change",function(t){e.onRangeChange(1)}),this.end.on("keyup",function(t){13===t.which&&(e.end.blur(),e.end.focus())}),this.end.on("focus",function(t){e.useModernDatePicker?(k.fF.assert(function(){return e.data.value.max instanceof Date},"Date required"),e.endComponentRef.writeValue(e.data.value.max)):e.end.val(e.rangeSlicerRenderer.formatValue(e.data.value.max,null)),e.preventTextSelection||e.end.select()}),this.end.on("blur",function(t){e.useModernDatePicker?(k.fF.assert(function(){return e.data.value.max instanceof Date},"Date required"),e.endComponentRef.writeValue(e.data.value.max)):e.end.val(e.rangeSlicerRenderer.formatValue(e.data.value.max,e.data.formatter))})},a.prototype.onRangeChange=function(e){var t=this,i=0===e?this.start.val():this.end.val(),n=this.rangeSlicerRenderer.parseInput(i,this.data.dataPoints,this.singleValue);this.rangeSlicerRenderer.isInputValid(n,this.data.value,e,this.singleValue)?this.updateRange({min:n,max:n},e):(this.rangeSlicerRenderer.setRange(this.data.value,this.data.formatter,this.start,this.end,e,this.data.bounds),this.useModernDatePicker&&(k.fF.assert(function(){return t.data.value.min instanceof Date},"Date required"),k.fF.assert(function(){return t.data.value.max instanceof Date},"Date required"),this.startComponentRef.writeValue(this.data.value.min),this.endComponentRef.writeValue(this.data.value.max)))},a.prototype.onDestroy=function(){this.rangeSlicerRenderer.onDestroy&&this.rangeSlicerRenderer.onDestroy()},a.prototype.getFontStyles=function(){var e;return(e={})["font-size"]=De.FP.fromPointToPixel(9),e["font-family"]=It,e["font-weight"]=ii.bL.weight,e},a.prototype.updateSliderControl=function(){var t,i,e=this,n=this.createSliderOptions();if(this.slider){this.slider.updateOptions(n);var r=[];if(this.singleValue){var l=_.indexOf(this.data.dataPoints,this.data.value.min);r.push(l)}else{var h=this.range.getScaledValue();this.activeMode!==S.bb&&r.push(h.min),this.activeMode!==S.e4&&r.push(h.max)}this.slider.set(r)}else this.sliderOptions=n,this.slider&&(this.slider.destroy(),this.sliderContainer.empty()),this.sliderElement=(0,J.hi)().attr(Ke,"true").attr("rtl",("rtl"===document.dir).toString()).appendTo(this.sliderContainer),(0,kt.create)(this.sliderElement.get(0),this.sliderOptions),this.slider=this.sliderElement.get(0).noUiSlider,this.slider.on("slide",function(A,U,z){window.requestAnimationFrame(function(){var Q=e.parseSliderValue(z);e.rangeSlicerRenderer.setRange(Q,e.data.formatter,e.start,e.end,null,e.data.bounds),e.useModernDatePicker&&(k.fF.assert(function(){return Q.min instanceof Date},"Date required"),k.fF.assert(function(){return Q.max instanceof Date},"Date required"),e.startComponentRef.writeValue(Q.min),e.endComponentRef.writeValue(Q.max))})}),this.slider.on("change",_.debounce(function(A,U,z){var Q=e.parseSliderValue(z),te=e.getChangeType(e.activeMode,U);e.updateRange(Q,te)},100)),this.applyHandlesHoverState(this.sliderContainer.find(Rt.selector));this.updateAccessibilityAttributes(this.data,this.sliderContainer.find(Rt.selector),this.activeMode);var v=null!==(t=this.featureSwitches)&&void 0!==t&&t.slicerSliderColors?this.data.sliderSettings.handleBorderColor:this.data.sliderSettings.color,w=null!==(i=this.featureSwitches)&&void 0!==i&&i.slicerSliderColors?this.data.sliderSettings.primaryLineColor:this.data.sliderSettings.color;this.sliderContainer.find(Dt.selector).css({"background-color":w}),this.sliderContainer.find(li.selector).css({"background-color":this.data.sliderSettings.secondaryLineColor}),this.sliderContainer.find(Rt.selector).each(function(A,U){var z=$(U),Q=z.is(":hover")?e.data.sliderSettings.activeColor:v;e.setSliderHandleColor(z,Q)}),this.sliderContainer.find(Dt.selector).addClass("backgroundToSelectedBackgroundColor"),this.sliderContainer.find(ui.selector).addClass("backgroundToForegroundColor");var E=this.sliderContainer.find(Rt.selector);this.data.sliderSettings.drawRoundSliderHandles?(E.addClass("backgroundToSolidBackgroundColor"),E.addClass("highContrastSelectedBorderColor")):E.addClass("backgroundToSelectedBackgroundColor")},a.prototype.setSliderHandleColor=function(e,t){var i={"border-color":"","background-color":""};this.data.sliderSettings.drawRoundSliderHandles&&(i["background-color"]=this.data.sliderSettings.handleFillColor),i[this.data.sliderSettings.drawRoundSliderHandles?"border-color":"background-color"]=t,e.css(i)},a.prototype.disableSlicer=function(){this.disableSlider(),1&this.data.state||(this.useModernDatePicker?this.startComponentRef.writeValue():this.start.val(""),this.disableInput(this.start,this.data.inputStyle.fontColor,this.startButton)),2&this.data.state||(this.useModernDatePicker?this.endComponentRef.writeValue():this.end.val(""),this.disableInput(this.end,this.data.inputStyle.fontColor,this.endButton)),this.data.bounds.min=this.data.bounds.max=null,this.updateProperties()},a.prototype.disableSlider=function(){this.sliderElement&&this.sliderElement.get(0).setAttribute("disabled","true"),this.sliderContainer.css("opacity","0.1"),this.slider&&this.slider.set([0,100])},a.prototype.applyTooltip=function(e,t){var n,i=this;e.on("focus mouseenter",function(){n=i.renderTooltip(e.get(0),t)}),e.on("blur mouseleave",function(){n?.close(),n=null}),e.on("keydown",function(r){null!==n&&27===r.keyCode&&(r.stopPropagation(),r.preventDefault(),n.close(),n=null)})},a.prototype.renderTooltip=function(e,t){var i;return this.tooltip&&this.tooltip.close(),this.tooltip=null===(i=this.hostServices.getUIComponentFactory())||void 0===i?void 0:i.createTooltip(e,t),this.tooltip},a.prototype.enableSlicer=function(){this.sliderElement&&!this.rangeSlicerRenderer.areEqual(this.data.bounds.min,this.data.bounds.max)&&this.sliderElement.get(0).removeAttribute("disabled"),this.sliderContainer.css("opacity","1.0"),this.enableInput(this.start,this.startButton),this.enableInput(this.end,this.endButton)},a.prototype.applyHandlesHoverState=function(e){var t,i=!1,n=!1,r=this,l=null===(t=this.featureSwitches)||void 0===t?void 0:t.slicerSliderColors;e.on("mouseenter",function(){n=!0,!i&&r.setSliderHandleColor($(this),r.data.sliderSettings.hoverColor)}).on("mouseleave",function(){n=!1,!i&&r.setSliderHandleColor($(this),l?r.data.sliderSettings.handleBorderColor:r.data.sliderSettings.color)}).on("mousedown touchstart",function(){var h=this;i=!0,r.setSliderHandleColor($(this),r.data.sliderSettings.activeColor),$(document).on("mouseup touchEnd",function w(){$(document).off("mouseup touchEnd",w),i&&(i=!1,r.setSliderHandleColor($(h),l?r.data.sliderSettings.handleBorderColor:r.data.sliderSettings.color))})}).on("mouseup touchend",function(){i=!1,r.setSliderHandleColor($(this),n?r.data.sliderSettings.hoverColor:l?r.data.sliderSettings.handleBorderColor:r.data.sliderSettings.color)})},a.prototype.updateInputControls=function(){var t,i,e=this;this.singleValue&&!this.data.filter&&(this.useModernDatePicker?this.startComponentRef.writeValue():this.start.val(""));var n={fontSize:De.FP.fromPoint(this.data.inputStyle.textSize),fontFamily:this.data.inputStyle.fontFamily||It,fontWeight:this.data.inputStyle.labelBold?M.en:M.AI,fontStyle:this.data.inputStyle.labelItalic?M.BF:M.AI},r={"font-size":n.fontSize,"font-family":n.fontFamily,"font-weight":n.fontWeight,"font-style":n.fontStyle,"text-decoration":this.data.inputStyle.labelUnderline?M.f0:M.zu};this.start.parent().css(r),this.end.parent().css(r);var l={color:this.data.inputStyle.fontColor,"background-color":this.data.inputStyle.background?this.data.inputStyle.background:"","text-decoration":this.data.inputStyle.labelUnderline?M.f0:M.zu};this.start.css(l),this.end.css(l),this.startButton&&this.startButton.css(l),this.endButton&&this.endButton.css(l),this.useModernDatePicker&&this.startComponentRef&&this.endComponentRef&&(k.fF.assert(function(){return e.data.value.min instanceof Date},"Date required"),k.fF.assert(function(){return e.data.value.max instanceof Date},"Date required"),k.fF.assert(function(){return e.data.bounds.min instanceof Date},"Date required"),k.fF.assert(function(){return e.data.bounds.max instanceof Date},"Date required"),this.startComponentRef.updateDateRange(this.data.bounds.min,this.data.bounds.max),this.endComponentRef.updateDateRange(this.data.bounds.min,this.data.bounds.max),this.startComponentRef.writeValue(this.data.value.min),this.endComponentRef.writeValue(this.data.value.max),null===(t=this.startComponentRef.datePickerElement)||void 0===t||t.attr(Ke,"true"),null===(i=this.endComponentRef.datePickerElement)||void 0===i||i.attr(Ke,"true")),!this.isCategorySourceNumeric&&this.useModernDatePicker?(this.setInputWidth(this.start,n,this.data.value.min),this.setInputWidth(this.end,n,this.data.value.max)):(this.setInputWidth(this.start,n),this.setInputWidth(this.end,n))},a.prototype.setInputWidth=function(e,t,i){e.css("width","");var n=e.val();if(i&&i instanceof Date&&(n=ce.dx.formatValue(i,"d")),n){var r=n.toString(),l=it.b.measureSvgTextWidth(t,r),h=parseFloat(e.css("padding-left"))+parseFloat(e.css("padding-right")),v=2*parseFloat(e.css("border-width"));l=Math.ceil(l+h+v),e.outerWidth(!1)<l&&e.css({width:l})}},a.prototype.disableInput=function(e,t,i){var n=(0,Ae.WV)(t);n.A=.3,e.css({color:(0,Ae.U8)(n)}),e.prop("disabled",!0),i&&(i.css({color:(0,Ae.U8)(n)}),i.prop("disabled",!0))},a.prototype.enableInput=function(e,t){e.prop("disabled",!1),t?.prop("disabled",!1)},a.prototype.createSliderOptions=function(){var i,n,e=this.rangeSlicerRenderer.getSliderOptions(this.data,this.singleValue),t=this.range.getScaledValue();switch(this.activeMode){case S.bb:i=t.max,n=[!0,!1];break;case S.e4:i=t.min,n=[!1,!0];break;case S.vX:i=[t.min,t.max],n=!0;break;case S.Zr:i=_.indexOf(this.data.dataPoints,this.data.value.min),n=!1}return{connect:n,behaviour:"tap",range:{min:e.min===e.max?0:e.min,max:e.min===e.max?1:e.max},start:i,step:e.step}},a.prototype.parseSliderValue=function(e){if((this.data.isSourceInteger||this.singleValue)&&(e=_.map(e,function(i){return Math.round(i)})),this.singleValue)return this.rangeSlicerRenderer.parseSingleSliderValue(e[0],this.data.dataPoints);var t=this.range.getScaledValue();switch(this.activeMode){case S.bb:t.max=e[0];break;case S.e4:t.min=e[0];break;case S.vX:t.min=e[0],t.max=e[1]}return this.range.setScaledValue(t),this.range.getValue()},a.prototype.updateSlider=function(e){e===S.e4?(this.enableInput(this.start,this.startButton),this.disableInput(this.end,this.data.inputStyle.fontColor,this.endButton)):e===S.bb?(this.enableInput(this.end,this.endButton),this.disableInput(this.start,this.data.inputStyle.fontColor,this.startButton)):(this.enableInput(this.start,this.startButton),this.enableInput(this.end,this.endButton)),e===S.Zr?this.endContainer.hide():this.endContainer.show(),!this.data.sliderSettings.show||this.shouldHideSmallSlider()?this.sliderContainer.hide():(this.sliderContainer.show(),this.updateSliderControl()),this.sliderContainer.toggleClass(Ut.class,!!this.data.sliderSettings.drawRoundSliderHandles),this.container.find(ni.selector).toggleClass(oi.class,!!this.data.wrapRangeBoxes),this.rangeSlicerRenderer.areEqual(this.data.bounds.min,this.data.bounds.max)&&this.disableSlider()},a.prototype.updateMode=function(e){this.updateRangeSlicerState(e),this.updateProperties()},a.prototype.updateProperties=function(){var e=this.buildRangeSlicerProperties();if(this.requireToUpdate(e)){this.data.properties.filter=e.filter,this.data.properties.bounds=e.bounds;var t=this.createPersistProperties(e,this.data.identity,this.data.state);this.hostServices.persistProperties(t),this.hostServices.onSelect({type:0,visualObjects:[]})}},a.prototype.updateRangeSlicerState=function(e){var t=this.data.mode;null==e?e=this.defaultSliderMode:this.data.mode=e,e===S.bb?(t===S.e4&&1&this.data.state&&(this.data.value.max=this.data.value.min,this.data.value.min=this.data.bounds.min,this.data.state=2),this.data.state&=-2):e===S.e4&&(t===S.bb&&2&this.data.state&&(this.data.value.min=this.data.value.max,this.data.state=1),this.data.state&=-3)},a.prototype.getChangeType=function(e,t){var i=null;switch(e){case S.e4:case S.Zr:i=0;break;case S.bb:i=1;break;default:i=0===t?0:1}return i},a.prototype.createPersistProperties=function(e,t,i){var r=this.createFilter(e,e.mode??this.defaultSliderMode,i,t),l={merge:[{objectName:"general",selector:void 0,properties:{}}],replace:[{objectName:"data",selector:void 0,properties:{}}],remove:[{objectName:"data",selector:void 0,properties:{}},{objectName:"general",selector:void 0,properties:{}}]};return null!==r?l.merge[0].properties[c.gO.general.filter.propertyName]=r:l.remove[1].properties[c.gO.general.filter.propertyName]=!0,1&i&&null!==e.start?l.replace[0].properties[this.rangeSlicerRenderer.startProperty().propertyName]=e.start:null==e.start&&(l.remove[0].properties[this.rangeSlicerRenderer.startProperty().propertyName]=!0),2&i&&null!==e.end?l.replace[0].properties[this.rangeSlicerRenderer.endProperty().propertyName]=e.end:null==e.end&&(l.remove[0].properties[this.rangeSlicerRenderer.endProperty().propertyName]=!0),null!=e.mode&&(l.replace[0].properties[c.gO.data.mode.propertyName]=e.mode),l},a.prototype.updateRange=function(e,t){null==t?(this.data.value.min=e.min,this.data.value.max=e.max):0===t?(this.data.value.min=e.min,null===this.data.bounds.min||this.singleValue||!this.rangeSlicerRenderer.areEqual(this.data.value.min,this.data.bounds.min)||this.useModernDatePicker?this.data.state|=1:this.data.state&=-2):1===t&&(this.data.value.max=e.max,null!==this.data.bounds.max&&this.rangeSlicerRenderer.areEqual(this.data.value.max,this.data.bounds.max)&&!this.useModernDatePicker?this.data.state&=-3:this.data.state|=2),this.updateProperties()},a.prototype.createFilter=function(e,t,i,n){var r=null,h=null,v=this.rangeSlicerRenderer.filterExpr(e.filter);if(t===S.Zr)r=1&i?(0,Ie.qu)(0,n,v.lower):null;else{var w=this.rangeSlicerRenderer.comparisonKind();if(1&i&&2&i){var E=(0,Ie.qu)(w.lower,n,v.lower),A=(0,Ie.qu)(w.upper,n,v.upper);r=(0,Ie.xD)(E,A)}else 1&i?r=(0,Ie.qu)(w.lower,n,v.lower):2&i&&(r=(0,Ie.qu)(w.upper,n,v.upper))}return null!==r&&(h=Te.yl.fromSQExpr(r)),h},a.prototype.requireToUpdate=function(e){return!(null===this.data.properties.filter&&0===this.data.state&&(e.mode===this.data.properties.mode||e.mode===this.defaultSliderMode&&null===this.data.properties.mode)||null!=this.data.properties.filter&&e.mode===this.data.properties.mode&&this.rangeSlicerRenderer.areEqual(e.start,this.data.properties.start)&&this.rangeSlicerRenderer.areEqual(e.end,this.data.properties.end)&&this.rangeSlicerRenderer.areEqual(e.filter.min,this.data.properties.filter.min)&&this.rangeSlicerRenderer.areEqual(e.filter.max,this.data.properties.filter.max)&&this.rangeSlicerRenderer.areEqual(e.bounds.min,this.data.properties.bounds.min)&&this.rangeSlicerRenderer.areEqual(e.bounds.max,this.data.properties.bounds.max))},a.prototype.shouldHideSmallSlider=function(){var e=this.data.sliderSettings;if((this.container.width()||0)<=e.minSliderVisibilityWidth)return!0;if(e.minSliderVisibilityHeight>0){var t=this.endContainer.position().top+this.endContainer.outerHeight();if(this.container.parent().outerHeight()-t<e.minSliderVisibilityHeight)return!0}return!1},a.prototype.updateAccessibilityAttributes=function(e,t,i){var h,v,n=e.value.min,r=e.value.max,l=this.rangeSlicerRenderer instanceof dt;switch(i){case S.bb:h=(v=this.hostServices.getLocalizedString(l?"End_Time":"End_Date"))+" "+this.getRangeText(e.bounds.min,e.bounds.max),this.addAccessibilityAttributesToSliderHandle(t,h,r),this.applyTooltip(t,v);break;case S.e4:h=(v=this.hostServices.getLocalizedString(l?"Start_Time":"Start_Date"))+" "+this.getRangeText(e.bounds.min,e.bounds.max),this.addAccessibilityAttributesToSliderHandle(t,h,n),this.applyTooltip(t,v);break;case S.vX:h=(v=this.hostServices.getLocalizedString(l?"Start_Time":"Start_Date"))+" "+this.getRangeText(e.bounds.min,e.value.max),this.addAccessibilityAttributesToSliderHandle(t.first(),h,n),this.applyTooltip(t.first(),v),h=(v=this.hostServices.getLocalizedString(l?"End_Time":"End_Date"))+" "+this.getRangeText(e.value.min,e.bounds.max),this.addAccessibilityAttributesToSliderHandle(t.last(),h,r),this.applyTooltip(t.last(),v)}t.attr("aria-label",e.sliderSettings.label)},a.prototype.addAccessibilityAttributesToSliderHandle=function(e,t,i){e.attr("aria-valuetext",this.rangeSlicerRenderer.formatValue(i,this.data.formatter)).attr("aria-description",t)},a.prototype.getRangeText=function(e,t){return ce.dx.format(this.hostServices.getLocalizedString("Slicer_Range_Hint"),this.isCategorySourceNumeric?[e,t]:[ce.dx.formatValue(e,"d"),ce.dx.formatValue(t,"d")])},a}(),Ii=C(34021),Di=C(33024),$t=C(67922),Ri=C(40550),d="slicer-header-pending-icon",p="slicer-header-pending-icon-path",re="slicer-header-selectmenu",fe="foregroundNeutralSecondary",Je='<svg width="17" height="16" viewBox="0 0 17 16" class='.concat(d,' xmlns="https://www.w3.org/2000/svg">\n        <path class=\'').concat(p,' OfficeIconColors_HighContrast\' d="M8.00781 0C12.4261 0 16.0078 3.58172 16.0078 8C16.0078 12.4183 12.4261\n        16 8.00781 16C3.58953 16 0.0078125 12.4183 0.0078125 8C0.0078125 3.58172 3.58953 0 8.00781 0ZM7.50781 3C7.23167 3 7.00781 3.22386\n        7.00781 3.5V8.5L7.01587 8.58988C7.0582 8.82312 7.26235 9 7.50781 9H10.5078L10.5977 8.99194C10.8309 8.94961 11.0078 8.74546 11.0078\n        8.5C11.0078 8.22386 10.784 8 10.5078 8H8.00781V3.5L7.99976 3.41012C7.95742 3.17688 7.75327 3 7.50781 3Z" /></svg>'),ze=function(){function a(e,t,i,n){this.services=t,this.settings=e,this.style=i,this.originalData=this.data=a.DefaultData(this.style,e.text,this.services),this.featureSwitches=n,this.render()}return a.DefaultData=function(e,t,i){return{borderStyle:"solid",borderBottomWidth:1,show:!0,outlineStyle:Ri.$m.Nil,fontColor:he.v.getThemeColor(e,"foregroundDark"),textSize:9,fontFamily:We.Wn.regular.css,iconColor:he.v.getThemeColor(e,fe),iconHoverColor:he.v.getThemeColor(e,"foreground"),outlineColor:he.v.getThemeColor(e,"foregroundNeutralSecondaryAlt2"),outlineWeight:1,searchEnabled:!1,background:null,showRestatement:!1,menu:{fontColor:he.v.getThemeColor(e,fe)},warnings:new Ce.tb,text:t,labelBold:!1,labelItalic:!1,labelUnderline:!1,pendingChangesIcon:{show:!0,color:he.v.getThemeColor(e,fe),transparency:0,position:"right",size:12,showTooltip:!0,tooltipText:"",tooltipLabel:i.localize("Not_Yet_Applied_With_Parentheses")}}},a.InFocusModeData=function(e,t,i){var n=a.DefaultData(e,t,i);return n.borderStyle="none",n.background=he.v.getThemeColor(e,"foregroundNeutralLight"),n.textSize=De.FP.toPoint(13),n.fontColor=he.v.getThemeColor(e,"foregroundNeutralDark"),n.fontFamily=We.Wn.regular.css,n},a.prototype.destroy=function(){this.selectMenu&&this.selectMenu.destroy()},a.prototype.enumerateObjectInstances=function(e){var t=this.originalData;if(t){if("header"===e.objectName){var i={selector:null,objectName:"header",properties:{text:t.text,show:t.show,fontColor:t.fontColor,background:t.background,textSize:t.textSize,fontFamily:t.fontFamily,bold:t.labelBold,italic:t.labelItalic,underline:t.labelUnderline,outlineColor:t.outlineColor,outlineWeight:t.outlineWeight},propertyInstanceKind:{text:3,fontColor:3,background:3}};return i.properties.outlineStyle=t.outlineStyle,this.settings.supportsRestatement&&(i.properties.showRestatement=t.showRestatement),[i]}if("general"===e.objectName)return[{selector:null,objectName:"general",properties:{outlineColor:t.outlineColor,outlineWeight:t.outlineWeight}}]}},a.prototype.getSlicerHeaderCard=function(e){var t=this,i=this.originalData;if(i){var n=c.gO.header,r=c.gO.pendingChangesIcon,l=new H.CQ(new H.lg("slicerHeader"),"Slicer_Header",[n.text,n.fontFamily,n.textSize,n.bold,n.italic,n.underline,n.fontColor,n.showRestatement,n.outlineStyle,c.gO.general.outlineColor,c.gO.general.outlineWeight,n.background,n.show,r.show,r.color,r.position,r.transparency,r.size,r.showTooltip,r.tooltipText,r.tooltipLabel],function(w){return e.getLocalizedString(w)}),v=(new H.UN).withFontFamily({descriptor:n.fontFamily,value:i.fontFamily}).withFontSizeProperties({descriptor:n.textSize,value:i.textSize}).withBold({descriptor:n.bold,value:i.labelBold}).withItalic({descriptor:n.italic,value:i.labelItalic}).withUnderline({descriptor:n.underline,value:i.labelUnderline}).build();return l.addTopLevelToggle("show",function(){return new H.bd({descriptor:n.show,value:i.show}).build()}).addGroup("text",function(w){w.withDisplayName("Text").addSimpleSlice("title",new H.fq({descriptor:(0,G.__assign)((0,G.__assign)({},n.text),{instanceKind:3}),value:i.text,placeholder:""}).build()).addCompositeSlice("fontselector","Font",v).addSimpleSlice("color",new H.BT({descriptor:(0,G.__assign)((0,G.__assign)({},n.fontColor),{instanceKind:3}),value:{value:i.fontColor}}).build()),t.settings.supportsRestatement&&w.addSimpleSlice("labelContents",new H.bd({descriptor:n.showRestatement,value:i.showRestatement}).build())}).addGroup("border",function(w){w.withDisplayName("Visual_Border").addSimpleSlice("border position",new H.oM({descriptor:n.outlineStyle,value:i.outlineStyle}).build(),function(E){return E.withCustomDisplayName("Visual_Border_Position")}).addSimpleSlice("color",new H.BT({descriptor:(0,G.__assign)((0,G.__assign)({},c.gO.general.outlineColor),{instanceKind:3}),value:{value:i.outlineColor}}).build(),function(E){return E.withCustomDisplayName("Generic_Color")}).addSimpleSlice("lineWidth",new H.JN({descriptor:c.gO.general.outlineWeight,value:i.outlineWeight,options:{minValue:{type:0,value:1},maxValue:{type:1,value:10}},localize:function(A){return e.getLocalizedString(A)}}).build(),function(E){return E.withCustomDisplayName("Visual_Line_Width")})}).addGroup("background",function(w){w.withDisplayName("Visual_Background").addSimpleSlice("color",new H.BT({descriptor:(0,G.__assign)((0,G.__assign)({},n.background),{instanceKind:3}),value:{value:i.background}}).build(),function(E){return E.withCustomDisplayName("Generic_Color")})}),this.featureSwitches.applyAllSlicersButton&&l.addGroup("pendingChangesIcon",function(w){w.withDisplayName("PendingIcon").addTopLevelToggle("show",function(){return new H.bd({descriptor:r.show,value:i.pendingChangesIcon.show}).build()}).addSimpleSlice("pendingIconColor",new H.BT({descriptor:r.color,value:{value:i.pendingChangesIcon.color}}).build()).addSimpleSlice("pendingIconTransparency",H.JN.getTransparencySliderBuilder({descriptor:r.transparency,value:i.pendingChangesIcon.transparency,localize:function(A){return e.getLocalizedString(A)}}).build()).addSimpleSlice("pendingIconPosition",new H.uY({descriptor:r.position,value:i.pendingChangesIcon.position,filterValues:[$t.t$,$t.F2]}).build()).addSimpleSlice("pendingIconSize",function(){return new H.mu({descriptor:r.size,value:i.pendingChangesIcon.size,options:{minValue:{type:0,value:1},maxValue:{type:1,value:999},unitSymbol:Di.e_}}).build()}).addSimpleSlice("pendingIconTooltip",function(){return new H.bd({descriptor:r.showTooltip,value:i.pendingChangesIcon.showTooltip}).build()}).addSimpleSlice("pendingIconTooltipText",function(){return new H.Jr({descriptor:r.tooltipText,placeholder:"Slicer_PendingChanges",value:i.pendingChangesIcon.tooltipText,localize:function(A){return e.getLocalizedString(A)}}).build()}).addSimpleSlice("pendingIconLabelText",function(){return new H.Jr({descriptor:r.tooltipLabel,placeholder:"  ",value:i.pendingChangesIcon.tooltipLabel,localize:function(A){return"  "===A?A:e.getLocalizedString(A)}}).build()})}),l.build()}},a.prototype.update=function(e,t){k.fF.assertValue(e,"Reader"),$.extend(this.settings,t),this.settings.enableInFocusRenderers&&this.settings.isInFocus?this.data=a.InFocusModeData(this.style,t.text,this.services):(this.originalData=a.converter(e,this.style,t.text,this.services),this.data=this.services.applySlicerHeaderChanges(this.originalData)),this.addSlicerHelperTooltip(),this.maintainSelectMenu(),this.updateTitle()},a.prototype.setFilterRestatement=function(e,t){this.settings.restatement=e,this.settings.supportsRestatement=t,this.updateTitleText()},a.converter=function(e,t,i,n){k.fF.assertValue(e,"Reader");var r=a.DefaultData(t,i,n),l=e.objects.getStaticObjects(),h=he.v.create(t);if(l){var v=(0,qe.Zi)((0,D.RK)(l,"header"),{color:"fontColor",family:"fontFamily",size:"textSize"},h,t,"foregroundDark","title",{color:r.fontColor,family:r.fontFamily,size:et.B.createFromPt(r.textSize)});r.fontColor=v.color,r.fontFamily=v.family,r.textSize=v.size.pt,r.show=(0,D.NA)(l,c.gO.header.show,r.show),r.text=(0,D.NA)(l,c.gO.header.text,r.text),r.menu.fontColor=h.getColorForPropertyWithDefaultColor(l,c.gO.header.fontColor,r.menu.fontColor),r.background=h.getColorForPropertyWithDefaultColor(l,c.gO.header.background,r.background),r.outlineColor=h.getColorForPropertyWithDefaultColor(l,c.gO.general.outlineColor,r.outlineColor),r.outlineWeight=(0,D.NA)(l,c.gO.general.outlineWeight,r.outlineWeight),r.outlineStyle=(0,D.NA)(l,c.gO.header.outlineStyle,r.outlineStyle),r.searchEnabled=(0,D.NA)(l,c.gO.general.selfFilterEnabled,r.searchEnabled),r.showRestatement=(0,D.NA)(l,c.gO.header.showRestatement,r.showRestatement),r.labelBold=(0,D.NA)(l,c.gO.header.bold,r.labelBold),r.labelItalic=(0,D.NA)(l,c.gO.header.italic,r.labelItalic),r.labelUnderline=(0,D.NA)(l,c.gO.header.underline,r.labelUnderline),r.pendingChangesIcon.show=(0,D.NA)(l,c.gO.pendingChangesIcon.show,r.pendingChangesIcon.show),r.pendingChangesIcon.color=h.getColorForPropertyWithDefaultColor(l,c.gO.pendingChangesIcon.color,r.pendingChangesIcon.color),r.pendingChangesIcon.transparency=(0,D.NA)(l,c.gO.pendingChangesIcon.transparency,r.pendingChangesIcon.transparency),r.pendingChangesIcon.position=(0,D.NA)(l,c.gO.pendingChangesIcon.position,r.pendingChangesIcon.position),r.pendingChangesIcon.size=(0,D.NA)(l,c.gO.pendingChangesIcon.size,r.pendingChangesIcon.size),r.pendingChangesIcon.showTooltip=(0,D.NA)(l,c.gO.pendingChangesIcon.showTooltip,r.pendingChangesIcon.showTooltip),r.pendingChangesIcon.tooltipText=(0,D.NA)(l,c.gO.pendingChangesIcon.tooltipText,(0,$e.HZ)(r.pendingChangesIcon.tooltipText)),r.pendingChangesIcon.tooltipLabel=(0,D.NA)(l,c.gO.pendingChangesIcon.tooltipLabel,r.pendingChangesIcon.tooltipLabel)}return r},a.prototype.render=function(){this.header=(0,J.hi)().addClass("slicer-header").appendTo(this.settings.host),this.addTitle(),this.addSlicerHelperTooltip(),this.maintainSelectMenu()},a.prototype.maintainSelectMenu=function(){if((!this.featureSwitches.updateFormattingPaneObjects||!this.featureSwitches.moveSlicerTypeSelection)&&(this.selectMenu||0===this.services.getViewMode()?this.updateSelectMenu():this.addSelectMenu(),this.selectMenuContainer)){var e=this.data;this.selectMenuContainer.find("span.ui-icon").css("color",this.data.iconColor).hover(function(){$(this).css("color",e.iconHoverColor)},function(){$(this).css("color",e.iconColor)})}},a.prototype.addSelectMenu=function(){var e=this,t=this.services.localize("Slicer_SelectMenu_Tooltip");this.selectMenuContainer=(0,J.hi)().addClass(re).toggleClass(T.hY.class,(0,T.Id)()).appendTo(this.title),this.applyTooltip(this.selectMenuContainer,t,this.services.onRenderTooltip);var i={onChange:function(r){e.settings.onChange&&e.settings.onChange(r)},container:this.selectMenuContainer,options:this.getSelectMenuOptions(),selectedValue:this.settings.selectedValue,className:"slicer-select-menu",disabled:2===this.settings.visibilityState,title:t};this.selectMenu=new Re.S(i),a.addHoverInOut(this.settings.hoverContainer,function(){0!==e.services.getViewMode()&&(e.selectMenuContainer.css("visibility","visible"),e.selectMenuContainer.css("display","flex"))},function(){e.settings.areControlButtonsAlwaysVisible||(_.isEmpty(e.data.text)?e.selectMenuContainer.css("visibility","hidden"):e.selectMenuContainer.css("display","none"))})},a.prototype.addSlicerHelperTooltip=function(){var e=this;if(this.featureSwitches.updateFormattingPaneObjects&&this.featureSwitches.moveSlicerTypeSelection)if(0!==this.services.getViewMode())if(this.selectMenuContainer)this.selectMenuContainer.show();else{var t=this.services.localize("Slicer_Helper_Tooltip");this.selectMenuContainer=(0,J.hi)().addClass(re).toggleClass(T.hY.class,(0,T.Id)()).appendTo(this.title),this.helperTooltipButton=(0,J.yP)().addClass("slicer-helper-tooltip-button").attr("aria-label",t).attr("role","button").attr("tabindex","0"),this.applyTooltip(this.helperTooltipButton,t,this.services.onRenderTooltip),this.helperTooltipButton.appendTo(this.selectMenuContainer);var i=this.data;this.helperButtonIcon=(0,J.yP)().addClass("ui-icon").css("color",this.data.iconColor).hover(function(){$(this).css("color",i.iconHoverColor)},function(){$(this).css("color",i.iconColor)}),this.helperButtonIcon.appendTo(this.helperTooltipButton),a.addHoverInOut(this.settings.hoverContainer,function(){0!==e.services.getViewMode()&&(e.selectMenuContainer.css("visibility","visible"),e.selectMenuContainer.css("display","flex"))},function(){e.settings.areControlButtonsAlwaysVisible||(_.isEmpty(e.data.text)?e.selectMenuContainer.css("visibility","hidden"):e.selectMenuContainer.css("display","none"))})}else this.selectMenuContainer&&this.selectMenuContainer.hide()},a.prototype.addPendingChangesIcon=function(){this.pendingChangesIcon=$(Je).addClass(d).appendTo(this.title)},a.prototype.addPendingChangesText=function(){this.pendingChangesText=(0,J.hi)().append(this.data.pendingChangesIcon.tooltipLabel).addClass("slicer-header-pending-text").appendTo(this.title)},a.prototype.updatePendingChangesIcon=function(){var e=this.data.pendingChangesIcon;e.show&&this.settings.hasUnappliedFilters&&this.featureSwitches.applyAllSlicersButton?(this.pendingChangesIcon.css("display","block"),this.pendingChangesText.css("display","block")):(this.pendingChangesIcon.css("display","none"),this.pendingChangesText.css("display","none")),this.pendingChangesIcon.css("opacity","".concat((0,Ae.TD)(this.data.pendingChangesIcon.transparency)));var t=e.size.toString();this.pendingChangesIcon.attr("height","".concat(t)),this.pendingChangesIcon.attr("width","".concat(t)),this.pendingChangesIcon.attr("viewbox","0 0 ".concat(t," ").concat(t)),this.pendingChangesIcon.children(".".concat(p)).attr("fill",e.color),e.tooltipText&&this.applyTooltip(this.pendingChangesIcon,e.tooltipText,this.services.onRenderTooltip,e.showTooltip),this.pendingChangesText.text(e.tooltipLabel),e.tooltipLabel||this.pendingChangesText.css("display","none"),"left"===e.position?(this.pendingChangesIcon.css("order","1"),this.pendingChangesText.css("order","2"),this.textElement.css("order","3")):(this.pendingChangesText.css("order","1"),this.pendingChangesIcon.css("order","3"),this.textElement.css("order","2"))},a.prototype.addSpacer=function(){this.spacer=(0,J.hi)(),this.spacer.addClass("slicer-header-spacer").appendTo(this.title)},a.prototype.addTitle=function(){var e=this;this.title=(0,J.hi)(),this.title.addClass("slicer-header-title").appendTo(this.header);var t=this.services.localize("Slicer_Clear");this.clearButton=(0,J.yP)().addClass("slicer-header-clear").toggleClass(T.hY.class,(0,T.Id)()).attr("aria-label",t).attr("role","button").attr("tabindex","0").on("keydown",function(i){("Space"===i.key||"Enter"===i.key)&&e.settings.onClear&&(e.settings.onClear(),i.stopPropagation())}).appendTo(this.title),this.applyTooltip(this.clearButton,t,this.services.onRenderTooltip),this.clearButton.click(function(){e.settings.onClear&&e.settings.onClear()}),a.addHoverInOut(this.settings.hoverContainer,function(){e.settings.strictSingleSelect||(e.clearButton.css("visibility","visible"),e.clearButton.css("display","block"))},function(){e.settings.areControlButtonsAlwaysVisible||(_.isEmpty(e.data.text)?e.clearButton.css("visibility","hidden"):e.clearButton.css("display","none"))}),this.textElement=$("<h3></h3>").addClass("slicer-header-text").appendTo(this.title),this.addPendingChangesText(),this.addPendingChangesIcon(),this.addSpacer()},a.prototype.applyTooltip=function(e,t,i,n){void 0===n&&(n=!0);var r=null;if(!n)return r?.close(),void e.off("focus mouseenter blur mouseleave keydown");e.on("focus mouseenter",function(){r=i(e.get(0),t)}),e.on("blur mouseleave",function(){r?.close(),r=null}),e.on("keydown",function(l){null!==r&&"Escape"===l.key&&(l.stopPropagation(),l.preventDefault(),r.close(),r=null)})},a.prototype.updateTitle=function(){if(this.data.show){var e=De.FP.fromPoint(this.data.textSize),t=!1;if(this.settings.areControlButtonsAlwaysVisible&&(this.settings.strictSingleSelect||(this.clearButton.css("visibility","visible"),this.clearButton.css("display","block")),0!==this.services.getViewMode()&&this.selectMenuContainer&&(this.selectMenuContainer.css("visibility","visible"),this.selectMenuContainer.css("display","flex"))),this.data.searchEnabled){var i=a.DefaultData(this.style,this.settings.text,this.services);t=this.data.outlineStyle===i.outlineStyle&&this.data.outlineWeight===i.outlineWeight&&this.data.outlineColor===i.outlineColor}this.title.show(),this.title.css({"border-style":t?"none":this.data.borderStyle,"border-color":this.data.outlineColor,"border-width":(0,Ii.$b)(this.data.outlineStyle,this.data.outlineWeight),"background-color":_.isEmpty(this.data.background)?"":this.data.background,"font-size":e}),this.clearButton.css({"font-size":e}),this.updateTextElementStyle(this.textElement),this.updateTextElementStyle(this.pendingChangesText),this.updateTitleText();var r=this.data;this.clearButton.css("color",this.data.iconColor).hover(function(){$(this).css("color",r.iconHoverColor)},function(){$(this).css("color",r.iconColor)}),this.updatePendingChangesIcon()}else this.title.hide()},a.prototype.updateTextElementStyle=function(e){e?.css({"font-size":De.FP.fromPoint(this.data.textSize),"font-family":this.data.fontFamily,color:this.data.fontColor,"font-weight":this.data.labelBold?M.en:M.AI,"font-style":this.data.labelItalic?M.BF:M.AI,"text-decoration":this.data.labelUnderline?M.f0:M.zu})},a.prototype.updateTitleText=function(){var e=this.data.text;if(this.data.showRestatement&&this.settings.restatement){var t=this.services.localize("NamePattern_Colon");e=(0,Me.W)(t,e,this.settings.restatement)}this.textElement.text(e).attr("title",e).attr("aria-label",e)},a.prototype.updateSelectMenu=function(){this.selectMenu&&0===this.services.getViewMode()?this.selectMenuContainer.hide():this.selectMenu&&(this.selectMenuContainer.show(),this.selectMenu.update({options:this.getSelectMenuOptions(),selectedValue:this.settings.selectedValue,disabled:2===this.settings.visibilityState}))},a.prototype.getSelectMenuOptions=function(){for(var e=[],i=0,n=this.settings.slicerModeOptions;i<n.length;i++){var r=n[i],l=r.displayName({get:this.services.localize});e.push({text:l,value:r.value})}return e},a.prototype.addWarnings=function(e){(0,T.td)(this.data.warnings,e)},a.addHoverInOut=function(e,t,i){(0,T.Id)()&&e.hover(t,i)},a}(),Kt=C(41640),Gt=function(){function a(){}return a.prototype.renderCore=function(e){e.classed(Qt.class,!0)},a.prototype.bindData=function(e,t,i){return this.renderColumns(e,i).selectAll(y.selector).data(function(r){return r},function(r){return(0,T.fz)(r)})},a.prototype.renderColumns=function(e,t){var i=this.numberOfRows,n=_.chunk(e,i),r=t.selectAll(Pt.selector).style("height",null).data(n).join(function(l){return l.append("div").classed(Pt.class,!0)});return this.scaleLastColumnIfNeeded(i,n,t),r},a.prototype.scaleLastColumnIfNeeded=function(e,t,i){if(t&&_.last(t)){var r=_.last(t).length;if(r<e){var l=i.select(Pt.selector+":last-child"),h=(0,Kt.W0)(100*r/e,.01);l.style("height",h+"%")}}},a.prototype.findNextElement=function(e,t){return $(e).hasClass(ot.class)?t?e.firstElementChild.firstElementChild:e.lastElementChild.lastElementChild:t?!(n=e.nextElementSibling)&&(r=e.parentElement).nextElementSibling?r.nextElementSibling.firstElementChild:n:!(n=e.previousElementSibling)&&(r=e.parentElement).previousElementSibling?r.previousElementSibling.lastElementChild:n;var n,r},a.prototype.getScrollSize=function(e){return this.numberOfRows},a.prototype.getLastStartIndex=function(e,t){if(t<=e)return 0;var i=0,n=this.numberOfRows,r=t%n;return r>0&&(i=n-r),Math.max(t-e+i,0)},a.prototype.calculateTotalItemDimensions=function(e,t){return e=Math.max(e,a.MinItemWidth),t=Math.max(t,a.MinItemHeight),{width:e+=2*a.TabularMargin,height:t+=2*a.TabularMargin}},a.prototype.calculateNumberOfItemsToDisplay=function(e,t,i,n){var r=e.find(T.uT.selector),l=r.width()-2*a.NavigationArrowWidth,h=r.height();return this.calculateTableDimensions({height:h,width:l},{height:i,width:t},n)},a.prototype.calculateTableDimensions=function(e,t,i){var n=t.width,r=t.height,h=e.height;if(0===n)return 0;var v=Math.floor(e.width/n);this.numberOfRows=0===r?1:Math.floor(h/r),this.numberOfRows=$e.b$.clampValue(this.numberOfRows,1,i);var w=Math.ceil(Math.sqrt(i));return v>=w&&this.numberOfRows>=w?this.numberOfRows=v=w:this.numberOfRows>=i&&v>1&&(this.numberOfRows=Math.ceil(this.numberOfRows/v)),$e.b$.clampValue(this.numberOfRows*v,this.numberOfRows,i)},a.prototype.getNavigationArrowsClass=function(e,t){t?e.classed(Xt.class,!0).classed(lt.class,!0).classed(Et.class,!0).classed(pi.class,!0):e.classed(Xt.class,!0).classed(ut.class,!0).classed(Et.class,!0).classed($i.class,!0)},a.prototype.getDataPointRightMargin=function(e,t){return"0px"},a.MinItemWidth=40,a.MinItemHeight=40,a.TabularMargin=2,a.NavigationArrowWidth=19,a}(),Qt=(0,M.CH)("tabular"),Pt=(0,M.CH)("columnItemContainer"),Et=(0,M.CH)("powervisuals-glyph"),Xt=(0,M.CH)("tabularNavigationArrow"),pi=(0,M.CH)("left-nav-arrow"),$i=(0,M.CH)("right-nav-arrow"),Ki=C(57470),Ai=C(60066),Gi=C(97121),Mt=C(36265),zi=C(50550),Qi=C(88987),Xi=C(10389),Yi=C(92129),Ji=C(45413),Vi=function(){function a(e,t,i){void 0===i&&(i=!0),this.lockKeyboardNavigation=i,this.hasSearchableData=!1,this.scrollPositionStack=[],this.defaultMinWidth=50,this.shouldResetScrollPosition=!1,this.isCollapse=!1,this.expandable=!1,this.pendingFocusCall=!1,this.focusCallback=null,this.verticalSlicerStrategy=e,this.behavior=new o.wV,this.domHelper=new T.gy,this.hostServices=t.hostServices,t&&(this.featureSwitches=t.featureSwitches),this.factory=(0,Qi.p)(),this.searchComponent=new g.v(this.hostServices)}return a.prototype.hasSlider=function(){return!1},a.prototype.supportsOrientation=function(){return!this.dataView||!this.data||_.isEmpty(this.data.queryNameByLevel)||1===this.data.queryNameByLevel.length},a.prototype.enumerateObjectInstances=function(e){return(0,T.qo)(e,this.data,this.settings,this.dataView,this.featureSwitches)},a.prototype.getValuesCard=function(){return(0,T.s9)(this.hostServices,this.data,this.settings,this.featureSwitches)},a.prototype.getSlicerSettingsCardOptions=function(e,t,i,n){return(0,T.nD)({cardUidBuilder:e,currentSlicerSettings:this.settings,data:this.data,dataView:this.dataView,hostServices:this.hostServices,orientation:t,activeMode:i,slicerModes:n,featureSwitches:this.featureSwitches})},a.prototype.getAdditionalCards=function(){return(0,T.oE)(this.hostServices,this.data,this.settings,this.dataView)},a.prototype.onModeChange=function(e){(0,T.VD)(this.hostServices,e)},a.prototype.onDataViewObjectChanged=function(e,t){var i=(0,T.tm)(e,t);return k.fF.assertNonEmpty(i,"There should be at least one save object"),i},a.prototype.getRestatement=function(){return this.data&&this.data.restatement},a.prototype.onClear=function(e){(0,T.dq)(this.selectionHandler),(0,T.K5)(this.selectionHandler,e),this.searchComponent&&(this.searchComponent.input.node().value="")},a.prototype.init=function(e,t){var i=this;this.element=t,this.currentViewport=e.visualInitOptions.viewport;var r,n=this.hostServices=e.visualInitOptions.host;this.style=e.visualInitOptions.style,this.settings=(0,Y.VT)(this.style),this.behavior&&(r=new s.N(n,this.behavior));var l=document.createElement("div");l.className=sr.class;var h=this.container=d3.select(l);return this.searchComponent.create(h),this.verticalSlicerStrategy.hasClearSearchButton()&&this.searchComponent.addClearButton(),this.createBodyElement(),this.listView=(0,Gi.P)({rowHeight:void 0,enter:function(U){i.createDataPoints(U)},update:function(U){i.updateDataPoints(U,r)},loadMoreData:function(){return e.loadMoreData()},scrollEnabled:!0,viewport:this.currentViewport,baseContainer:this.body,isReadMode:function(){return 1!==i.hostServices.getViewMode()},scrollToFrame:e.enableMultiElementRows?function(A){return i.scrollToFrameForMultiElementRow(A)}:void 0}),this.element.get(0).appendChild(l),this.selectionHandler=r,r},a.prototype.onDestroy=function(){this.listView&&this.listView.destroy()},a.prototype.render=function(e){this.renderVerticalSlicer(this.converter(e.dataView,e.isSlicer),e)},a.prototype.renderVerticalSlicer=function(e,t,i){this.focusCallback&&(Ki.M.contains(this.container.node(),document.activeElement)||(this.focusCallback=void 0,this.listView&&this.listView.resetCallBacks())),this.currentViewport=t.viewport,this.hasSearchableData=t.hasSearchableData;var n=t.dataView,r=g.v.fromSlicerSettings(this.settings,e?.searchKey,this.verticalSlicerStrategy.shouldShowSearchHeader(this.settings,this.hasSearchableData),this.verticalSlicerStrategy.hasClearSearchButton(),this.featureSwitches);if(this.searchComponent.update(r),this.container.node().querySelector("input.searchInput")===document.activeElement&&t.isSearchMode&&this.announceSearchResults(e.slicerDataPoints.length),this.body.select(Li.selector).remove(),n&&this.data&&!_.isEmpty(this.data.slicerDataPoints))this.expandable=this.data.queryNameByLevel.length>1,this.setBodyRole(),this.setBodyAriaLabel(),this.updateSelectionStyle(),this.listView.viewport(this.currentViewport).data(this.data.slicerDataPoints,function(w){return(0,T.fz)(w)},t.resetScrollbarPosition&&this.shouldResetScrollPosition,i);else{if(this.listView&&(this.listView.empty(),this.verticalSlicerStrategy.shouldShowSearchHeader(this.settings,this.hasSearchableData))){var v=this.body.insert("p",".scroll-wrapper").classed(Li.class,!0).text(this.hostServices.getLocalizedString("ContentList_EmptySearchResults"));this.domHelper.setSlicerTextStyle(v,this.settings,this.featureSwitches)}i&&i()}},a.prototype.converter=function(e,t){void 0===t&&(t=!1);var i=this.hostServices.getLocalizedString(T.vx),n=(0,Y.OQ)({dataView:e,localizedSelectAllText:i,selectionHandler:this.selectionHandler,hostServices:this.hostServices,style:this.style,isSlicer:t,featureSwitches:this.featureSwitches,slicerType:0});return this.shouldResetScrollPosition=this.getShouldResetScrollPosition(e,n),this.data=n,this.isCollapse=!1,e&&this.data&&(this.settings=n.slicerSettings,this.dataView=e),n},a.prototype.hasSearchEnabled=function(){return this.verticalSlicerStrategy.shouldShowSearchHeader(this.settings,this.hasSearchableData)},a.prototype.updateSelectionStyle=function(){var e=this.settings;this.container.classed("isMultiSelectEnabled",e&&e.selection&&!e.selection.singleSelect)},a.prototype.createDataPoints=function(e){var t=this,i=this,n=this.settings,r=e.append("div").classed(Ti.class,!0),l=r.append("div").classed(fi.class,!0).attr("aria-hidden",!0);this.verticalSlicerStrategy.customizeInputElement(l,n);var h=this.selectionHandler.isSelectionModeInverted();r.on("contextmenu",function(w,E){d3.event.stopPropagation(),d3.event.preventDefault(),t.onContextMenu(w,{x:d3.event.clientX,y:d3.event.clientY})}),r.call(a.updateTabIndex);var v=this.getOptionRole();r.each(function(w,E){var A=this,U=d3.select(this);this.addEventListener("keydown",function(z){var Q=U.data();if(!_.isEmpty(Q)){var te=Q[0],Ee=function(Vt){z.preventDefault(),z.stopPropagation(),Vt()};if(39===z.keyCode&&!0===te.isCollapsed||37===z.keyCode&&!1===te.isCollapsed){var He=document.activeElement;z.stopPropagation(),i.expandCollapseNode(te),Ee(function(){return(0,G.__awaiter)(A,void 0,void 0,function(){return(0,G.__generator)(this,function(ke){return[2,i.focusRowAtIndex(He,i.getCurrentRowDataIndex(He),!1,!1,!1,!1,!1,!0)]})})})}else 39===z.keyCode&&te.children?Ee(function(){return(0,G.__awaiter)(A,void 0,void 0,function(){return(0,G.__generator)(this,function(ke){return[2,i.focusRowAtIndex(document.activeElement,te.children[0].index,!1,!0,!1,!1,!0,!1)]})})}):37===z.keyCode&&te.parent?Ee(function(){return(0,G.__awaiter)(A,void 0,void 0,function(){return(0,G.__generator)(this,function(ke){return[2,i.focusRowAtIndex(document.activeElement,te.parent.index,!1,!1,!0,!1,!0,!1)]})})}):39===z.keyCode||37===z.keyCode?z.stopPropagation():56===z.keyCode&&(z.stopPropagation(),i.expandCollapseAllNodesOnSameLevel(te))}}),i.updateItemState(U,w),i.setAccessibilityAttributes(w,U,v,h),U.attr("data-row-index",w.index).attr("data-row-id",w.id),null!=w.count&&U.append("span").classed(T.HR.class,!0).styles({"font-size":De.FP.fromPoint(n.slicerText.textSize),"font-family":n.slicerText.fontFamily})})},a.prototype.getUnusedAriaStatus=function(){return"aria-selected"},a.prototype.setAccessibilityAttributes=function(e,t,i,n){t.attr("role",i.role).attr(i.selected,(0,T.OO)(e,n)).attr("aria-setsize",e.levelCount||-1).attr("title",(0,T.rX)(this.hostServices,e.tooltip)).attr("aria-posinset",e.levelIndex?e.levelIndex:1)},a.updateTabIndex=function(e){var t,i=!1;e.each(function(n,r){var l=d3.select(this);0===r&&(t=l),i||"0"!==l.attr("tabindex")?i&&"0"===l.attr("tabindex")&&l.attr("tabindex",null):i=!0}),t&&!i&&t.attr("tabindex","0")},a.prototype.updateItemType=function(e,t){var i=e.select(T.Iy.selector),n=e.select(T.NV.selector);if(t.isImage)return n.remove(),i.empty()&&(i=e.append("img").classed(T.Iy.class,!0)),i.attr("src",t.value),void i.attr("role","none");n.empty()&&(i.remove(),n.empty()&&(n=e.append("span").classed(T.NV.class,!0))),n.text(t.value)},a.prototype.getOptionRole=function(){return{role:this.expandable?"treeitem":"option",selected:"aria-selected"}},a.prototype.updateDataPoints=function(e,t){var i=this.settings,n=this.data;if(n&&i){var r=this.domHelper,l=this.selectionHandler.isSelectionModeInverted();e.select(Ti.selector),e.select(fi.selector),e.select(Fi.selector),this.verticalSlicerStrategy.updateInputElement(e.selectAll(fi.selector),i);var h=e.selectAll(T.HR.selector);if(!h.empty()&&this.verticalSlicerStrategy.shouldShowCount()&&(e.select(or.selector),h.text(function(Ee){return Ee.count}),r.setSlicerTextStyle(h,i,this.featureSwitches)),t&&this.body){var v=this,w=this.body.attr("width",this.currentViewport.width),E=this.getOptionRole(),A=this.body.selectAll(Ti.selector);A.each(function(Ee,He){var ke=d3.select(this);v.updateItemState(ke,Ee),ke.node().hasAttribute("role")&&ke.attr(v.getUnusedAriaStatus(),null),v.setAccessibilityAttributes(Ee,ke,E,l),null!=i.items.padding&&(ke.style("padding-top","".concat(i.items.padding,"px")),ke.style("padding-bottom","".concat(i.items.padding,"px")))});var U=e.selectAll(T.NV.selector);this.verticalSlicerStrategy.setLabelTextStyle(r,U,i,this.style,this.featureSwitches),a.updateTabIndex(A);var z=w.selectAll(fi.selector);t.bind(n.retainedDataPoints,{behaviorOptions:{slicerContainer:this.container,itemContainers:A,itemInputs:z,settings:n.slicerSettings,searchInput:this.searchComponent.input,clearSearchTextButton:this.searchComponent.clear,style:this.style},orientation:ye.i.Vertical})}this.behavior.renderSelection()}},a.prototype.announceSearchResults=function(e){var t;t=0===e?this.hostServices.getLocalizedString("ContentList_EmptySearchResults"):1===e?this.hostServices.getLocalizedString("Count_SearchBox_Result_One"):this.hostServices.getLocalizedString("Count_SearchBox_Results").replace("{0}",e.toString()),this.hostServices.alertWithDebounce("announce-search",t)},a.prototype.getExpandParameters=function(e){k.fF.assert(function(){return void 0!==e.isCollapsed},".expandCollapseNode should not be called with un-expandable node"),this.isCollapse=!1===e.isCollapsed;var t=(0,T.No)(e,this.data.queryNameByLevel);return{dataRoles:[c.CT.value],data:t.selector,isCollapse:!e.isCollapsed,nodeIndex:t.path}},a.prototype.expandCollapseNode=function(e){var t=this.getExpandParameters(e);this.hostServices.setNodeExpansionState({dataRoles:t.dataRoles,data:t.data,isCollapse:t.isCollapse,nodeIndex:t.nodeIndex})},a.prototype.expandCollapseAllNodesOnSameLevel=function(e){var t=this.getExpandParameters(e);this.hostServices.setLevelExpansionState({dataRoles:t.dataRoles,data:t.data,isCollapse:t.isCollapse,nodeIndex:t.nodeIndex})},a.prototype.onContextMenu=function(e,t){var i=(0,T.No)(e,this.data.queryNameByLevel),r={nodeIndex:i.path,dataRoles:[c.CT.value],position:{x:d3.event.clientX,y:d3.event.clientY},data:[i.selector]};this.hostServices.onContextMenu(r)},a.prototype.getShouldResetScrollPosition=function(e,t){if(!this.dataView||!this.data||!e||!t||this.isCollapse)return!1;if(1===this.data.queryNameByLevel.length)return!(0,Yi.ih)(e,this.dataView);if((0,zi.s_)(this.data.queryNameByLevel,t.queryNameByLevel,function(l,h){return l===h})){if(!_.isEmpty(this.data.slicerDataPoints)&&!_.isEmpty(t.slicerDataPoints)&&this.data.slicerDataPoints.length>t.slicerDataPoints.length&&!this.isCollapse){var i=this.listView.getFirstVisibleRow();return!i||void 0!==i.levelIndex&&!_.some(t.slicerDataPoints,function(l){return l.identity.equals(i.identity)})}return!1}if(this.dataView.matrix&&this.dataView.matrix.rows&&e.matrix&&e.matrix.rows){var n=_.map(this.dataView.matrix.rows.levels,function(l){return l.sources[0].expr}),r=_.map(e.matrix.rows.levels,function(l){return l.sources[0].expr});return!(0,zi.s_)(n,r,Ji.fS)}return!0},a.prototype.updateExpansionState=function(e,t){var i=0;t.level>0&&(i=t.level*De.FP.fromPointToPixel(this.data.slicerSettings.expandCollapse.indentation)),e.styles({"margin-left":"".concat(i,"px")}),this.updateExpandButton(e,t)},a.prototype.updateExpandButton=function(e,t){var i=e.select(Fi.selector);this.expandable&&(i.empty()&&(i=this.createExpandButton(e)),e.attr("aria-expanded",void 0===t.isCollapsed?null:!t.isCollapsed),void 0!==t.level&&e.attr("aria-level",t.level+1));var r=De.FP.fromPoint(this.data.slicerSettings.slicerText.textSize);if(i.styles({"font-size":r,width:r}),i.attr("aria-hidden","true"),void 0!==t.isCollapsed){var l=this.data.slicerSettings.expandCollapse.toggleType;i.classed(Bi.class,!1),i.selectAll(".glyphicon").classed("pbi-glyph-chevrondownsmall",t.isCollapsed&&l===Mt.H.Chevron).classed("pbi-glyph-chevronupsmall",!t.isCollapsed&&l===Mt.H.Chevron).classed("pbi-glyph-explore-content-single",t.isCollapsed&&l===Mt.H.PlusMinus).classed("pbi-glyph-collapse-content-single",!t.isCollapsed&&l===Mt.H.PlusMinus).classed("pbi-glyph-caretright",t.isCollapsed&&l===Mt.H.Caret).classed("pbi-glyph-caretdownright",!t.isCollapsed&&l===Mt.H.Caret)}else this.expandable||i.empty()?i.classed(Bi.class,!0):i.remove()},a.prototype.createExpandButton=function(e){var t=this,i=e.insert("div",":first-child").classed(Fi.class,!0).on("click",function(n){d3.event.stopPropagation(),t.expandCollapseNode(n)});return i.append("i").classed("glyphicon",!0),i},a.prototype.scrollToFrameForMultiElementRow=function(e){var t=e.listView,i=e.loadMoreData,n=e.rowHeight,r=e.scrollTop,l=e.totalRows,h=e.visibleGroupContainer,v=e.baseContainer,w=0===r?0:Math.floor(r/n);if(!(this.currentRowPosition&&w===this.currentRowPosition||w<0)){var E=(0,Xi.O7)(0,w*n);h.styles({transform:function(z){return E},"-webkit-transform":E});var A=h.selectAll(".row").filter(function(){return""!==this.textContent});return void 0===this.currentRowPosition?(this.currentPosition=this.getInitialPosition(l,v),A&&A.node()&&(this.currentRowPosition=w)):(this.updateCurrentPosition(w,l,v,h,A),this.currentRowPosition=w),t.performScrollToFrame(this.currentPosition.startIndex,this.currentPosition.endIndex,l,this.currentPosition.endIndex-this.currentPosition.startIndex,i)}},a.prototype.getInitialPosition=function(e,t){var i=e,n=Math.ceil($(t.node()).outerHeight()/this.listView.getRowHeight())*Math.floor($(t.node()).outerWidth()/this.defaultMinWidth);return n>0&&(i=Math.min(e,n)),{startIndex:0,endIndex:i}},a.prototype.updateCurrentPosition=function(e,t,i,n,r){var l=Math.abs(e-this.currentRowPosition);if(e===this.currentRowPosition)this.currentPosition=this.scrollPositionStack.pop()||this.getInitialPosition(t,i);else if(e<this.currentRowPosition)for(;l>0;)this.currentPosition=this.scrollPositionStack.pop()||this.currentPosition,l--;else for(;l>0;){var h=Math.ceil($(i.node()).outerHeight()/$(r.node()).outerHeight());if(this.currentPosition.startIndex>=t-1)return;this.scrollPositionStack.push(this.currentPosition);var v=this.getElementsPerRow(n,h,r),w=this.currentPosition.startIndex+v[0];this.currentPosition={startIndex:w,endIndex:Math.min(t,w+_.sum(v)+this.getMaxElementsInRow(n,r))},l--}},a.prototype.getElementsPerRow=function(e,t,i){for(var n=[],r=i.node(),l=0;l<t&&null!==r;l++){n.push(0);for(var h=$(r).position().top;null!==r&&$(r).position().top<=h+5;)n[l]++,r=r.nextElementSibling}return n},a.prototype.getMaxElementsInRow=function(e,t){var i=t.node().getAttribute("min-width");return i?$(e.node()).outerWidth()/+i:Math.floor($(e.node()).outerWidth()/this.defaultMinWidth)},a.prototype.createBodyElement=function(){var e=this;this.body=this.container.append("div").classed(T.uT.class,!0);var t=this.searchComponent.input.node();this.body.on("wheel",function(){e.focusCallback=void 0,e.listView.resetCallBacks(),e.listView.onScroll()}),t.addEventListener("keydown",function(i){40===i.keyCode?(e.searchBarFocusNextElement(),i.preventDefault(),i.stopPropagation()):70===i.keyCode&&i.ctrlKey&&(e.searchBarFocusNextElement(),e.enableSearch(),i.preventDefault(),i.stopPropagation())}),this.body.on("keydown",function(){var i=d3.event,n=function(U){i.preventDefault(),i.stopPropagation(),e.pendingFocusCall||U()};if(40===i.keyCode){var r=document.activeElement,l=i.shiftKey;n(function(){return(0,G.__awaiter)(e,void 0,void 0,function(){return(0,G.__generator)(this,function(A){return[2,this.focusRowAtIndex(r,this.getCurrentRowDataIndex(document.activeElement)+2,!1,!0,!0,l,!1,!1)]})})})}else if(38===i.keyCode){var h=document.activeElement,v=i.shiftKey;e.settings.search.enabled&&0===e.getCurrentRowDataIndex(h)||e.settings.search.enabled&&1===e.getCurrentRowDataIndex(h)&&!e.settings.selection.selectAllCheckboxEnabled?(e.focusForJumpRow(t),n(function(){return(0,G.__awaiter)(e,void 0,void 0,function(){return(0,G.__generator)(this,function(A){return[2]})})})):n(function(){return(0,G.__awaiter)(e,void 0,void 0,function(){return(0,G.__generator)(this,function(A){return[2,this.focusRowAtIndex(h,this.getCurrentRowDataIndex(document.activeElement)-3,!1,!1,!0,v,!1,!1)]})})})}else if(9===i.keyCode)e.lockKeyboardNavigation&&e.body.node().focus();else if(35===i.keyCode)n(function(){return(0,G.__awaiter)(e,void 0,void 0,function(){return(0,G.__generator)(this,function(A){return[2,this.focusRowAtIndex(document.activeElement,this.data.slicerDataPoints.length,!1,!0,!1,!1,!1,!1)]})})});else if(36===i.keyCode)n(function(){return(0,G.__awaiter)(e,void 0,void 0,function(){return(0,G.__generator)(this,function(A){return[2,this.focusRowAtIndex(document.activeElement,1,!1,!1,!1,!1,!1,!1)]})})});else if(34===i.keyCode){var w=document.activeElement;n(function(){return(0,G.__awaiter)(e,void 0,void 0,function(){return(0,G.__generator)(this,function(A){return[2,this.focusRowAtIndex(w,this.getCurrentRowDataIndex(document.activeElement)+this.getRowsPerPage(),!0,!0,!1,!1,!1,!1)]})})})}else if(33===i.keyCode){var E=document.activeElement;n(function(){return(0,G.__awaiter)(e,void 0,void 0,function(){return(0,G.__generator)(this,function(A){return[2,this.focusRowAtIndex(E,Math.max(this.getCurrentRowDataIndex(document.activeElement)-this.getRowsPerPage(),1),!1,!1,!1,!1,!1,!1)]})})})}else 70===i.keyCode&&i.ctrlKey&&n(function(){return(0,G.__awaiter)(e,void 0,void 0,function(){return(0,G.__generator)(this,function(A){return[2,this.enableSearch()]})})})})},a.prototype.setBodyRole=function(){this.body.attr("role",this.expandable?"tree":"listbox"),this.body.attr("aria-multiselectable",!(this.data&&this.data.slicerSettings.selection.strictSingleSelect))},a.prototype.setBodyAriaLabel=function(){this.body.attr("aria-label",this.data.categorySourceName)},a.prototype.enableSearch=function(){var e;if(this.settings.search){this.settings.search.enabled=!this.settings.search.enabled;var t=g.v.fromSlicerSettings(this.settings,null===(e=this.data)||void 0===e?void 0:e.searchKey,this.verticalSlicerStrategy.shouldShowSearchHeader(this.settings,this.hasSearchableData),this.verticalSlicerStrategy.hasClearSearchButton(),this.featureSwitches);this.searchComponent.update(t)}},a.prototype.focusRowAtIndex=function(e,t,i,n,r,l,h,v){var w=this,E=this.factory.defer(),A=e.getAttribute("data-row-id"),U=d3.event;return this.focusCallback=void 0,this.listView.resetCallBacks(),this.pendingFocusCall?E.resolve(1):(this.pendingFocusCall=!0,this.focusCallback=function(){var z,Q,te=$(w.container.node()).find(".visibleGroup").get(0),Ee=$(te).find("[data-row-id='"+A+"']").get(0);if(Ee?Q=(e=Ee).parentElement:z=void 0,e&&w.removeFocusForJumpRow(e),v)e?w.focusForJumpRow(e):n||Q.previousElementSibling||e.addEventListener("blur",function Vt(){w.focusForJumpRow(e),e.removeEventListener("blur",Vt)});else if(r||h||!te?r&&!h&&Q?!z&&n&&Q.nextElementSibling?z=Q.nextElementSibling.firstElementChild:!z&&!n&&Q.previousElementSibling&&(z=Q.previousElementSibling.firstElementChild):h&&te&&(n?(z=w.selectItemFromRowId(d3.select(e).data()[0].children[0].id,te),z=w.adjustBottomRowToInViewRow(z,te)):(z=w.selectItemFromRowId(d3.select(e).data()[0].parent.id,te),z=w.adjustTopRowToInViewRow(z,te))):!z&&n?z=w.adjustBottomRowToInViewRow(z=te.lastElementChild.firstElementChild,te):!z&&!n&&(z=w.adjustTopRowToInViewRow(z=te.firstElementChild.firstElementChild,te)),z){if(w.focusForJumpRow(z),l&&w.pendingFocusCall){var He=w.settings;He.selection.singleSelect=He.selection.strictSingleSelect,o.wV.toggleItemSelectionFromExternal(U,d3.select(z).data()[0],w.selectionHandler,He),w.setAccessibilityAttributes(d3.select(z).data()[0],d3.select(z),w.getOptionRole(),w.selectionHandler.isSelectionModeInverted())}}else e&&w.focusForJumpRow(e);w.pendingFocusCall=!1,E.resolve(0)},this.listView.scrollRowIntoView(t-1,this.focusCallback)),E.promise},a.prototype.getCurrentRowDataIndex=function(e){if(e){var t=d3.select(e).data()[0];if(t)return t.index}return 1},a.prototype.adjustBottomRowToInViewRow=function(e,t){return e.getBoundingClientRect().y+e.getBoundingClientRect().height>this.container.node().getBoundingClientRect().y+this.container.node().getBoundingClientRect().height&&(e=t.lastElementChild.previousElementSibling.firstElementChild),e},a.prototype.adjustTopRowToInViewRow=function(e,t){return e.getBoundingClientRect().y<=t.getBoundingClientRect().y&&this.listView.canScrollTop()&&(e=t.firstElementChild.nextElementSibling.firstElementChild),e},a.prototype.getRowsPerPage=function(){return this.listView.getVisibleRowsWithoutPadding()},a.prototype.selectItemFromRowId=function(e,t){return d3.select(t).select("[data-row-id='"+e+"']").node()},a.prototype.searchBarFocusNextElement=function(){var e=$(this.container.node()).find(".visibleGroup").get(0);this.focusForJumpRow(e.firstElementChild.firstElementChild)},a.prototype.focusForJumpRow=function(e){e.setAttribute("tabindex","0"),e.setAttribute("focusable","true"),e.classList.add(Ai.Pg),St.M.focus(e,{preventScroll:!0})},a.prototype.removeFocusForJumpRow=function(e){e.setAttribute("tabindex","-1"),e.removeAttribute("focusable"),e.classList.remove(Ai.Pg)},a.prototype.updateItemState=function(e,t){this.updateExpansionState(e,t),this.updateItemType(e,t),(0,T.hx)(e,t)},a}(),Hi=function(){function a(){}return a.prototype.canShowSearchHeader=function(e,t){return!!t},a.prototype.hasClearSearchButton=function(){return!1},a.prototype.setLabelTextStyle=function(e,t,i,n,r){e.setSlicerTextStyle(t,i,r)},a.prototype.shouldShowSearchHeader=function(e,t){return this.strictSingleSelect=e.selection.strictSingleSelect,e.search.enabled&&this.canShowSearchHeader(e,t)},a.prototype.shouldShowCount=function(){return!0},a.prototype.updateInputElement=function(e,t){e.selectAll("span").style("font-size",De.FP.fromPoint(t.slicerText.textSize)).classed(this.strictSingleSelect?"radiobutton":"checkbox",!0).classed(this.strictSingleSelect?"checkbox":"radiobutton",!1)},a.prototype.customizeInputElement=function(e,t){e.append("span").style("font-size",De.FP.fromPoint(t.slicerText.textSize)).classed("glyphicon",!0).classed(this.strictSingleSelect?"radiobutton":"checkbox",!0).classed(t.items.accessibilityContrastProperties?"checkboxOutlineContrast":"checkboxOutline",!0)},a}(),ar=We.Wn.regular.css,nr=function(){function a(){}return a.prototype.hasClearSearchButton=function(){return!0},a.prototype.setLabelTextStyle=function(e,t,i,n,r){var l=(0,Y.VT)(n);l.slicerText.textSize=De.FP.toPoint(13),l.slicerText.fontFamily=ar,l.slicerText.color=he.v.getThemeColor(n,mt.fA),e.setSlicerTextStyle(t,l,r)},a.prototype.canShowSearchHeader=function(e,t){return e.search.enabled||t},a.prototype.shouldShowSearchHeader=function(e,t){return this.canShowSearchHeader(e,t)},a.prototype.updateInputElement=function(e){},a.prototype.shouldShowCount=function(){return!1},a.prototype.customizeInputElement=function(e){e.append("span").classed("powervisuals-glyph checkmark",!0)},a}(),sr=(0,M.CH)("slicerContainer"),Ti=(0,M.CH)("slicerItemContainer"),fi=(0,M.CH)("slicerCheckbox"),Fi=(0,M.CH)("expandButton"),Bi=(0,M.CH)("hidden"),or=(0,M.CH)("slicerCountText"),Li=(0,M.CH)("slicerEmptyResult"),ft=C(30053),Yt=C(39681),lr=function(){function a(){}return a.prototype.applyChanges=function(e,t,i){var n=t;return ft.a.shouldApplyResponsiveChanges(i,c.gO)&&(n=this.applyResponsiveSlicerChanges(e,n),this.updateWarnings(n,t)),n},a.prototype.applyResponsiveSlicerChanges=function(e,t){var i=(0,Yt.ED)(t);return this.applyFontSizeChanges(e,i),i},a.prototype.applyFontSizeChanges=function(e,t){var i=(0,be.Cd)(e,be.$O.horizontalSlicer.fontSize);t.slicerSettings.slicerText.textSize>i&&(t.slicerSettings=(0,Yt.ED)(t.slicerSettings),t.slicerSettings.slicerText=(0,Yt.ED)(t.slicerSettings.slicerText),t.slicerSettings.slicerText.textSize=i)},a.prototype.updateWarnings=function(e,t){if(e.slicerSettings.slicerText.textSize!==t.slicerSettings.slicerText.textSize){var i=new Ce.Yx;e.warnings.addForVisualObject("items",{selector:null,warnings:[i]})}},a}(),ki=function(){function a(){}return a.prototype.applyChanges=function(e,t,i){return ft.a.shouldApplyResponsiveChanges(i,c.gO)&&(t=this.applyResponsiveRangeSlicerChanges(e,t)),t},a.prototype.applyResponsiveRangeSlicerChanges=function(e,t){var i=(0,Yt.ED)(t);return this.applyRangeSlicerDataChanges(i),this.applySliderChanges(i),i},a.prototype.applySliderChanges=function(e){e.sliderSettings=(0,Yt.ED)(e.sliderSettings),e.sliderSettings.drawRoundSliderHandles=!0,e.sliderSettings.minSliderVisibilityHeight=a.MinSliderVisibilityHeight,e.sliderSettings.minSliderVisibilityWidth=a.MinSliderVisibilityWidth},a.prototype.applyRangeSlicerDataChanges=function(e){e.wrapRangeBoxes=!0},a.MinSliderVisibilityHeight=35,a.MinSliderVisibilityWidth=0,a}(),ur=function(){function a(){}return a.prototype.applySlicerChanges=function(e,t,i){return this.shouldApplyResponsiveChanges(i,t.mode,t.orientation)&&(t=this.applyResponsiveSlicerChanges(e,t)),t},a.prototype.applySlicerHeaderChanges=function(e,t,i,n,r){return t.show&&this.shouldApplyResponsiveChanges(i,n.mode,n.orientation)&&(t=this.applyResponsiveSlicerHeaderChanges(e,t,n,r)),t},a.prototype.enumerateObjectInstances=function(e,t,i,n,r){this.doesSlicerModeSupportsResponsive(n,r)&&"general"===e.objectName&&this.enumerateGeneral(i,t)},a.prototype.enumerateGeneral=function(e,t){k.fF.assert(function(){return null===t[0].selector},"objects[0].selector === null");var i=ft.a.getResponsiveVisualProperties(e,c.gO);_.merge(t[0],{selector:null,properties:{responsive:i.responsive},objectName:"general"})},a.prototype.getResponsiveSlice=function(e,t,i,n){if(this.doesSlicerModeSupportsResponsive(t,i)){var l=c.gO.general,h=ft.a.getResponsiveVisualProperties(e,c.gO);return{item:new H.vi({uidBuilder:new H.IN(new H.SS(new H.lg("visualPlaceholderCard"),"visualPlaceholderGroup"),"responsive"),control:new H.bd({descriptor:l.responsive,value:h.responsive}).build(),localize:n}).build(),revertToDefaultDescriptors:[l.responsive]}}},a.prototype.shouldApplyResponsiveChanges=function(e,t,i){return this.doesSlicerModeSupportsResponsive(t,i)&&ft.a.shouldApplyResponsiveChanges(e,c.gO)},a.prototype.doesSlicerModeSupportsResponsive=function(e,t){return a.isRangeSlicerMode(e)||a.isHorizontalSlicer(e,t)},a.prototype.applyResponsiveSlicerChanges=function(e,t){var i=ft.a.cloneData(t);return this.applyIconResponsiveChanges(e,i),this.applyResponsiveSlicerHorizontalChanges(i),i},a.prototype.applyResponsiveSlicerHeaderChanges=function(e,t,i,n){var r=ft.a.cloneData(t);return this.applyHeaderChanges(e,i,r,n),this.updateResponsiveHeaderWarnings(r,t),r},a.prototype.applyIconResponsiveChanges=function(e,t){var i;a.isRangeSlicerMode(t.mode)?i=be.$O.rangeSlicer.iconBreakpoints:a.isHorizontalSlicer(t.mode,t.orientation)?i=be.$O.horizontalSlicer.iconBreakpoints:k.fF.assertFail("not supported slicer (mode: ".concat(t.mode,", orientation: ").concat(t.orientation,") should never arrive this function.")),_.some(i,function(n){return e.height<=n.height&&e.width<=n.width})&&(t.showIcon=!0)},a.prototype.applyResponsiveSlicerHorizontalChanges=function(e){a.isHorizontalSlicer(e.mode,e.orientation)&&(e.showTabularSlicer=!0)},a.prototype.applyHeaderChanges=function(e,t,i,n){if(a.isRangeSlicerMode(t.mode)){var r=be.$O.rangeSlicer;i.show=n?e.height>=r.hideHeaderHeightSlider:e.height>=r.hideHeaderHeightNoSlider}else a.isHorizontalSlicer(t.mode,t.orientation)?i.show=e.height>=(r=be.$O.horizontalSlicer).hideHeaderHeight:k.fF.assertFail("not supported slicer (mode: ".concat(t.mode,", orientation: ").concat(t.orientation,") should never arrive this function."));var l=(0,be.Cd)(e,be.$O.slicerHeader.fontSize);i.textSize=Math.min(i.textSize,l)},a.prototype.updateResponsiveHeaderWarnings=function(e,t){var i;e.show!==t.show?i=new Ce.C_:e.textSize!==t.textSize&&(i=new Ce.Fy),i&&e.warnings.addForVisualObject("header",{selector:null,warnings:[i]})},a.isRangeSlicerMode=function(e){return(0,S.l6)(e)},a.isHorizontalSlicer=function(e,t){return e===S.RB&&t===ye.i.Horizontal},a}(),ji="slicer-container",Ui="slicer-content-wrapper",Oi="full-screen";function Ni(a){return S.dt.members(a?[S.Ih,S.of,S.j6]:[S.RB,S.j6])}var gr=function(){function a(e){this.areControlButtonsAlwaysVisible=!1,this.tooltip=null,this.enableInFocusRenderers=!1,this.enableMultiElementRows=!1,this.preventVirtualKeyboardOnTheFirstTap=!1,this.isInFocus=!1,this.hasSearchableData=!1,this.lockKeyboardNavigation=!0,this.isSlicer=!1,this.hasUnappliedFilters=!1,e&&(this.enableInFocusRenderers=e.enableInFocusRenderers,this.enableMultiElementRows=e.enableMultiElementRows,this.preventVirtualKeyboardOnTheFirstTap=e.preventVirtualKeyboardOnTheFirstTap,this.lockKeyboardNavigation=!1!==e.lockKeyboardNavigation,this.featureSwitches=e.featureSwitches,this.isSlicer=e.isSlicer),this.activeMode=S.RB,this.slicerOrientation=ye.i.Vertical,this.viewModelAdapter=new ur}return a.prototype.init=function(e){var t=this;this.initOptions=e,this.element=e.element,this.style=e.style,this.visibilityHelper=(0,ne.q)().visibilityHelper(this.element,"slicerResponsiveIcon"),this.currentViewport=e.viewport,this.hostServices=e.host,this.loadMoreHandler=new j.J(this.hostServices),this.container=(0,J.hi)().addClass(ji).appendTo(this.element),this.alert=(0,J.yP)().appendTo(this.container).attr("aria-live","polite").attr("role","status").hide(),this.headerContainer=(0,J.hi)().appendTo(this.container).addClass("slicer-header-wrapper"),this.slicerContainer=(0,J.hi)().appendTo(this.container).addClass(Ui),this.initializeSlicerRenderer(),this.container.on(X.BZ,function(){t.areControlButtonsAlwaysVisible=!0,t.container.addClass("focused"),t.alert.text(t.activeMode);var i=!!t.slicerRenderer&&t.slicerRenderer.hasSlider();t.updateSlicerHeader(i)}),this.container.on("focusin",function(){t.container.addClass("focused")})},a.prototype.destroy=function(){this.slicerRenderer.onDestroy&&this.slicerRenderer.onDestroy(),this.slicerHeader&&this.slicerHeader.destroy()},a.prototype.update=function(e){k.fF.assertValue(e,"options"),this.isInFocus=!!e.isInFocus,e.type&B.EP.Resize&&this.resizing(e.viewport),e.type&B.EP.FilterOptionsChange&&(this.hasUnappliedFilters=e.pendingChanges[0],this.updateSlicerHeader(this.slicerRenderer.hasSlider())),(!e.type||e.type&B.EP.Data)&&(k.fF.assertValue(e,"options"),this.dataChanged(e.dataViews,e.operationKind))},a.prototype.dataChanged=function(e,t){k.fF.assertValue(e,"dataViews"),_.isEmpty(e)||(this.dataView=e[0],this.render(t!==B.su.Append,!0))},a.prototype.resizing=function(e){this.currentViewport=e,this.render(!1)},a.prototype.enumerateObjectInstances=function(e){if(this.dataView)switch(e.objectName){case"header":case"modeSelection":return this.slicerHeader.enumerateObjectInstances(e);case"general":var t=this.slicerHeader.enumerateObjectInstances(e);return this.slicerRenderer&&this.slicerRenderer.supportsOrientation()&&(t[0].properties.orientation=this.data?this.data.orientation:ye.i.Vertical),this.viewModelAdapter&&this.viewModelAdapter.enumerateObjectInstances(e,t,this.dataView,this.activeMode,this.slicerOrientation),t;default:return this.slicerRenderer.enumerateObjectInstances(e,this.featureSwitches)}},a.prototype.onDataViewObjectChanged=function(e,t){if(this.featureSwitches.updateFormattingPaneObjects&&this.featureSwitches.moveSlicerTypeSelection){var i=this.slicerRenderer.onDataViewObjectChanged(e,t);return k.fF.assertNonEmpty(i,"There should be at least one object property to save"),i}return e},a.prototype.getFormattingModel=function(){var e=this;if(this.dataView)return new H.Nq(function(){return e.getSlicerSettingsCard()},function(){return e.slicerHeader.getSlicerHeaderCard(e.hostServices)},function(){return e.slicerRenderer.getValuesCard(e.featureSwitches)},function(){return e.slicerRenderer.getAdditionalCards()}).build()},a.prototype.getSlicerSettingsCard=function(){var e=this;if((0,S.Ek)(this.activeMode)||this.featureSwitches.updateFormattingPaneObjects||this.featureSwitches.moveSlicerTypeSelection){var i,t=new H.lg("slicerSettings");this.slicerRenderer&&this.slicerRenderer.supportsOrientation()&&(i=this.data?this.data.orientation:ye.i.Vertical);var n=this.data?this.data.activeOptions:Ni(this.featureSwitches.updateFormattingPaneObjects&&this.featureSwitches.moveSlicerTypeSelection);if(this.data.isCategorySourceNumeric){for(var r=[],l=0,h=this.data.activeOptions;l<h.length;l++)r.push(ti.members([h[l].value])[0]);n=(0,G.__spreadArray)([],r,!0)}var w=this.slicerRenderer.getSlicerSettingsCardOptions(t,i,this.activeMode,n,this.featureSwitches);if(w){var E=w.groups;return new H.CQ(t,"Slicer_Settings",w.revertToDefaultDescriptors,function(z){return e.hostServices.getLocalizedString(z)}).withGroups(E).build()}}},a.prototype.resolveFormattingPlaceholder=function(e){if((0,H.n$)(e)&&"responsive"===e.name)return this.getResponsiveSlice()},a.prototype.getResponsiveSlice=function(){var e=this;if(this.dataView&&this.viewModelAdapter)return this.viewModelAdapter.getResponsiveSlice(this.dataView,this.activeMode,this.slicerOrientation,function(n){return e.hostServices.getLocalizedString(n)})},a.prototype.loadMoreData=function(){return this.loadMoreHandler.updateDataView(this.dataView),this.loadMoreHandler.loadMoreData()},a.prototype.onClearSelection=function(){this.slicerRenderer&&this.slicerRenderer.onClear&&this.slicerRenderer.onClear()},a.converter=function(e,t,i){if(e){var v,n=t.updateFormattingPaneObjects&&t.moveSlicerTypeSelection,r=null,l=ye.i.Vertical,h=!1,w=!1,E=Ni(n),A=1,U=!1;if(e.metadata&&e.metadata.objects){var z=e.metadata.objects;l=(0,D.NA)(z,c.gO.general.orientation,l),h=(0,D.NA)(z,c.gO.selection.strictSingleSelect,h),r=(0,D.NA)(z,c.gO.data.mode,r)}if(e.metadata&&e.metadata.columns){var Q=(0,T.zJ)(e.metadata.columns);if(!_.isEmpty(Q)){var te=Q[0];r=(0,de.D_)(Q,r),v=_.join(_.map(Q,function(He){return He.displayName}),i),U=!_.some(Q,function(He){return!0!==He.type.text}),1===Q.length?(U=!0===te.type.text,w=!0===te.type.numeric,te.parameter&&1===te.parameter.kind?(E=_.union(Ni(n),S.dt.members([r])),h=h||!te.parameter.supportsMultipleValues):!0===te.type.dateTime?E=function(a){return S.dt.members(a?[S.Ih,S.of,S.j6,S.bb,S.e4,S.vX,S.K8,S.GV]:[S.RB,S.j6,S.bb,S.e4,S.vX,S.K8,S.GV])}(n):w&&(E=_.union(E,function(a){return S.dt.members(a?[S.Ih,S.of,S.j6,S.bb,S.e4,S.vX]:[S.RB,S.j6,S.bb,S.e4,S.vX])}(n)),te.parameter&&(E=_.union(E,S.dt.members([S.Zr]))))):(l=ye.i.Vertical,n&&(E=S.dt.members([S.Ih,S.j6]))),(0,S.Lw)(r)&&1===Q.length&&(A=te.aggregates&&null!=te.aggregates.min&&null!=te.aggregates.max?A:2)}}return{orientation:l,categorySourceName:v,isCategorySourceNumeric:w,mode:r||S.RB,switchMode:A,hasSearchableData:U,activeOptions:E,showIcon:!1,showTabularSlicer:!1,warningObjectCollection:new Ce.tb,strictSingleSelect:h}}},a.prototype.render=function(e,t){this.updateViewport(),this.previousData=this.data,this.data=this.originalData=a.converter(this.dataView,this.featureSwitches,this.hostServices.getLocalizedString("ListJoin_Separator")),this.featureSwitches.updateFormattingPaneObjects&&this.featureSwitches.moveSlicerTypeSelection&&this.clearSelectionIfNeeded(),this.viewModelAdapter&&this.dataView&&(this.data=this.viewModelAdapter.applySlicerChanges(this.currentViewport,this.originalData,this.dataView)),this.data&&(this.hasSearchableData=this.data.hasSearchableData),this.renderSlicer(e,t),this.visibilityHelper.updateVisibility(this.data&&this.data.showIcon?{showIcon:!0,viewport:this.currentViewport}:{showIcon:!1})},a.prototype.renderSlicer=function(e,t){this.updateSlicerRendererIfNeeded(),this.updateSlicerHeader(this.slicerRenderer.hasSlider()),this.slicerRenderer.render({dataView:this.dataView,viewport:this.currentViewport,resetScrollbarPosition:e,hasSearchableData:this.hasSearchableData,restatement:this.data&&this.data.categorySourceName,isSlicer:this.isSlicer,isSearchMode:!!this.selectionHandler&&this.selectionHandler.isSearchMode()});var i=null!=this.slicerRenderer.getRestatement;this.slicerHeader&&this.slicerHeader.setFilterRestatement(i?this.slicerRenderer.getRestatement():void 0,i),t&&this.loadMoreHandler.onLoadMoreDataCompleted(),this.updateWarnings()},a.prototype.updateSlicerRendererIfNeeded=function(){if(this.enableInFocusRenderers&&this.container.hasClass(Oi)!==this.isInFocus)return this.isInFocus?this.container.addClass(Oi):this.container.removeClass(Oi),void this.initializeSlicerRenderer();if(this.data){var t=this.data.mode||S.RB;this.activeMode!==t||(0,S.l6)(this.activeMode)&&this.previousData&&this.previousData.isCategorySourceNumeric!==this.data.isCategorySourceNumeric?(this.activeMode=t,this.initializeSlicerRenderer()):(this.slicerOrientation!==(this.data.orientation||ye.i.Vertical)||this.previousData&&this.previousData.showTabularSlicer!==this.data.showTabularSlicer)&&this.initializeSlicerRenderer()}},a.prototype.clearSelectionIfNeeded=function(){if(this.previousData&&this.data){var e=this.data.mode||S.RB;if(this.previousData.mode!==e||(0,S.l6)(e)&&this.previousData&&this.previousData.isCategorySourceNumeric!==this.data.isCategorySourceNumeric){this.hostServices.onSelect({type:0,visualObjects:[]});var t=this.hostServices.getLocalizedString("Slicer_ClearSelectionsCleared");this.hostServices.alertWithDebounce("announce-clear-selection",t)}}},a.prototype.updateViewport=function(){this.container.css({height:this.currentViewport.height})},a.prototype.updateSlicerHeader=function(e){var t=this;if(this.dataView){var i=(0,xe.y)(this.dataView);if(!this.slicerHeader){var n={onClear:function(){t.slicerRenderer&&t.slicerRenderer.onClear(!0)},onChange:function(h){t.slicerRenderer&&!t.featureSwitches.updateFormattingPaneObjects&&!t.featureSwitches.moveSlicerTypeSelection&&t.slicerRenderer.onModeChange(h)},host:this.headerContainer,visibilityState:this.data.switchMode,selectedValue:this.activeMode,hoverContainer:this.element,enableInFocusRenderers:this.enableInFocusRenderers,slicerModeOptions:this.slicerActiveOptions()},r={localize:this.hostServices.getLocalizedString.bind(this.hostServices),getViewMode:this.hostServices.getViewMode.bind(this.hostServices),applySlicerHeaderChanges:function(h){var v=h;return t.viewModelAdapter&&t.dataView&&t.data&&(v=t.viewModelAdapter.applySlicerHeaderChanges(t.currentViewport,h,t.dataView,t.data,e)),v},onRenderTooltip:function(h,v){return t.getTooltipComponent(h,v)}};this.slicerHeader=new ze(n,r,this.style,this.featureSwitches)}this.slicerHeader.update(i,{text:this.data.categorySourceName,restatement:this.slicerRenderer.getRestatement?this.slicerRenderer.getRestatement():void 0,selectedValue:this.activeMode,visibilityState:this.data.switchMode,isInFocus:this.isInFocus,slicerModeOptions:this.slicerActiveOptions(),areControlButtonsAlwaysVisible:this.areControlButtonsAlwaysVisible,strictSingleSelect:this.data.strictSingleSelect,hasUnappliedFilters:this.hasUnappliedFilters})}},a.prototype.getTooltipComponent=function(e,t){var i;return null!==this.tooltip&&this.tooltip.close(),this.tooltip=null===(i=this.hostServices.getUIComponentFactory())||void 0===i?void 0:i.createTooltip(e,t),this.tooltip},a.prototype.slicerActiveOptions=function(){if(this.data.isCategorySourceNumeric){for(var e=[],t=0,i=this.data.activeOptions;t<i.length;t++)e.push(ti.members([i[t].value])[0]);return e}return this.data.activeOptions},a.prototype.initializeSlicerRenderer=function(){switch(this.slicerRenderer&&this.slicerRenderer.onDestroy&&this.slicerRenderer.onDestroy(),this.slicerOrientation=this.data&&this.data.orientation||ye.i.Vertical,this.slicerContainer.empty(),this.activeMode){case S.RB:return void this.initializeBasicSlicer();case S.j6:return void this.initializeDropdownSlicer();case S.K8:return void this.initializeRelativeSlicer(O.wj.Date);case S.GV:return void this.initializeRelativeSlicer(O.wj.Time);case S.vX:case S.bb:case S.e4:return void this.initializeRangeSlicer(!1);case S.Zr:return void this.initializeRangeSlicer(!0);default:return k.fF.assertFail("initializeSlicerRenderer - Unexpected activeMode: "+this.activeMode),void this.initializeVerticalSlicer()}},a.prototype.initializeBasicSlicer=function(){if(this.enableInFocusRenderers&&this.isInFocus)this.initializeInFocusVerticalSlicer();else switch(this.slicerOrientation){case ye.i.Horizontal:this.initializeHorizontalOrTabularSlicer();break;case ye.i.Vertical:this.initializeVerticalSlicer()}},a.prototype.initializeInFocusVerticalSlicer=function(){this.hostServices.setShouldDeferData(!1);var e=this.slicerRenderer=new Vi(new nr,{hostServices:this.hostServices,featureSwitches:this.featureSwitches},this.lockKeyboardNavigation),t=this.createInitOptions();this.selectionHandler=e.init(t,this.slicerContainer)},a.prototype.initializeVerticalSlicer=function(){var e=this.slicerRenderer=new Vi(new Hi,{hostServices:this.hostServices,featureSwitches:this.featureSwitches},this.lockKeyboardNavigation),t=this.createInitOptions();this.selectionHandler=e.init(t,this.slicerContainer)},a.prototype.initializeRangeSlicer=function(e){if(this.data.isCategorySourceNumeric){var t=new ki,i=new dt({hostServices:this.hostServices});this.slicerRenderer=new pt({hostServices:this.hostServices,featureSwitches:this.featureSwitches},i,e,this.data.isCategorySourceNumeric,t)}else t=new ki,i=new Tt({preventVirtualKeyboardOnTheFirstTap:this.preventVirtualKeyboardOnTheFirstTap,hostServices:this.hostServices,featureSwitches:this.featureSwitches}),this.slicerRenderer=new pt({preventTextSelection:this.preventVirtualKeyboardOnTheFirstTap,hostServices:this.hostServices,featureSwitches:this.featureSwitches},i,e,this.data.isCategorySourceNumeric,t);var n=this.createInitOptions();this.selectionHandler=this.slicerRenderer.init(n,this.slicerContainer)},a.prototype.initializeHorizontalOrTabularSlicer=function(){var e;e=this.data&&this.data.showTabularSlicer?new Gt:new ie;var i=new lr,n=this.slicerRenderer=new we({hostServices:this.hostServices,horizontalSlicerLayout:e,featureSwitches:this.featureSwitches},i),r=this.createInitOptions();this.selectionHandler=n.init(r,this.slicerContainer)},a.prototype.initializeRelativeSlicer=function(e){var i=this.slicerRenderer=function(a,e){switch(a){case O.wj.Time:return new ei(e,O.wj.Time);case O.wj.Date:return new ei(e,O.wj.Date);default:return void k.fF.assertFail("Unsupported RelativeFilterType")}}(e,{hostServices:this.hostServices}),n=this.createInitOptions();this.selectionHandler=i.init(n,this.slicerContainer)},a.prototype.initializeDropdownSlicer=function(){if(this.enableInFocusRenderers&&this.isInFocus)this.initializeInFocusVerticalSlicer();else{var e={hostServices:this.hostServices,featureSwitches:this.featureSwitches},t=new Vi(new Hi,e);this.slicerRenderer=new Ot(t,e);var i=this.createInitOptions();this.selectionHandler=this.slicerRenderer.init(i,this.slicerContainer)}},a.prototype.createInitOptions=function(){var e=this;return{visualInitOptions:this.initOptions,loadMoreData:function(){return e.loadMoreData()},enableMultiElementRows:this.enableMultiElementRows}},a.prototype.updateWarnings=function(){this.data&&(this.slicerHeader.addWarnings(this.data.warningObjectCollection),this.slicerRenderer.addWarnings&&this.slicerRenderer.addWarnings(this.data.warningObjectCollection),this.hostServices.setWarnings(this.data.warningObjectCollection.complete()))},a}()},62224:function(vt,Ue,C){"use strict";C.d(Ue,{wV:function(){return J}});var G=C(9434),X=C(90120),c=C(3212),de=C(65195),ne=C(59107),xe=C(9795),S=C(68447),J=function(){function j(){}return j.prototype.bindEvents=function(B,D){this.behavior=this.createWebBehavior(B),this.behavior.bindEvents(B.behaviorOptions,D)},j.prototype.renderSelection=function(){this.behavior&&this.behavior.renderSelection()},j.bindSlicerEvents=function(B,D,O,oe){j.bindSlicerItemSelectionEvent(D,O,oe),B.searchInput&&j.bindSlicerSearchEvent(B.searchInput,B.clearSearchTextButton,O)},j.setSelectionOnSlicerItems=function(B,D,O){var oe=D.isSelectionModeInverted(),se=D.hasSelection();B.each(function(be,Me){var Ie=!!be.partially||be.isSelectAllDataPoint&&se,ce=!se&&oe||se&&!Ie&&(0,S.OO)(be,oe);if($(this).toggleClass("selected",ce),$(this).toggleClass("partiallySelected",!!Ie),O.isHighContrast){var M=this.getElementsByTagName("span")[0];if(ce){var _e=X.v.getThemeColor(O,"foregroundSelected");M&&(M.style.backgroundColor=_e,M.style.borderColor=_e)}else{var gt=X.v.getThemeColor(O,"foreground");M&&(M.style.backgroundColor="",M.style.borderColor=gt,M.style.boxShadow="none")}}var Be=this.getElementsByTagName("input")[0];Be&&(Be.checked=ce)})},j.bindSlicerItemSelectionEvent=function(B,D,O){var oe=this;B.on("keydown",function(se){var be=d3.event,Me=be.keyCode;32!==Me&&13!==Me||(32===Me&&be.preventDefault(),oe.toggleItemSelection(se,D,O))}).on("click",function(se){$(d3.event.target).trigger("slicer.dataPointSelected"),oe.toggleItemSelection(se,D,O)})},j.toggleItemSelection=function(B,D,O,oe){if(!B.disabled){var se=oe||d3.event;if(B.isSelectAllDataPoint)D.toggleSelectionModeInversion(),D.persistSelectionFilter(G.gO.general.filter);else{var be=j.isMultiSelect(B,se,O,D)?3:0;D.handleSelection(B,be,{x:se.clientX,y:se.clientY})&&D.persistSelectionFilter(G.gO.general.filter)}}},j.toggleItemSelectionFromExternal=function(B,D,O,oe){this.toggleItemSelection(D,O,oe,B)},j.bindSlicerSearchEvent=function(B,D,O){var oe=this;B.empty()||(B.on(de.n,function(){var se=d3.event;ne.M.isCtrlOrMeta(se)&&(0,xe.iZ)(se.keyCode)||(0,xe.Wl)(se.keyCode)||(0,xe.rH)(se.keyCode)?se.stopPropagation():27===se.keyCode?(oe.clearSearch(O,B),se.preventDefault()):13===se.keyCode&&(j.startSearch(B,O),se.stopPropagation())}).on(de.cp,function(){var se=d3.event;_.debounce(function(){9===se.keyCode||16===se.keyCode||j.startSearch(B,O)},j.searchInputTimeoutDuration)()}),D&&!D.empty()&&D.on(de.G6,function(){oe.clearSearch(O,B),d3.event.stopPropagation()}))},j.clearSearch=function(B,D){B.setSearchMode(!0),B.persistSelfFilter(G.gO.general.selfFilter,null),D.property("value","");var O=d3.select(S.s8.selector);(new S.gy).configureSearchBoxIcon(O,void 0)},j.startSearch=function(B,D){var O=B.node(),oe=O&&O.value;D.setSearchMode(!0),D.persistSelfFilter(G.gO.general.selfFilter,oe)},j.isMultiSelect=function(B,D,O,oe){return!O.selection.strictSingleSelect&&!oe.isDisableMultipleSelectForMappedColumn()&&(oe.isSelectionModeInverted()||!O.selection.singleSelect||ne.M.isCtrlOrMeta(D)||1===oe.getDataMultiSelectMode()||j.hasParentSelected(B))},j.hasParentSelected=function(B){for(;B.parent;){if(B.parent.selected)return!0;B=B.parent}},j.prototype.createWebBehavior=function(B){return B.orientation===c.i.Horizontal?new k:new H},j.searchInputTimeoutDuration=500,j}(),k=function(){function j(){}return j.prototype.bindEvents=function(B,D){this.selectionHandler=D,this.slicerSettings=B.settings,this.style=B.style,this.items=B.itemsContainer,J.bindSlicerEvents(B,this.items,D,this.slicerSettings)},j.prototype.renderSelection=function(){J.setSelectionOnSlicerItems(this.items,this.selectionHandler,this.style)},j}(),H=function(){function j(){}return j.prototype.bindEvents=function(B,D){this.itemContainers=B.itemContainers,this.itemInputs=B.itemInputs,this.selectionHandler=D,this.settings=B.settings,this.style=B.style,J.bindSlicerEvents(B,this.itemContainers,D,this.settings)},j.prototype.renderSelection=function(){J.setSelectionOnSlicerItems(this.itemInputs,this.selectionHandler,this.style)},j}()},82085:function(vt,Ue,C){"use strict";C.d(Ue,{v:function(){return c}});var G=C(64329),X=C(68447),c=function(){function de(ne){this.hostServices=ne,this.domHelper=new X.gy}return de.fromSlicerSettings=function(ne,xe,S,ye,Ce){var J,k,H,j,B,D;if(ne)return{isVisible:S,hasClearSearchButton:ye,searchKey:xe,style:{borderStyle:null===(J=ne.search)||void 0===J?void 0:J.outlineStyle,borderColor:null===(k=ne.search)||void 0===k?void 0:k.borderColor,background:null===(H=ne.search)||void 0===H?void 0:H.background,color:null===(j=ne.slicerText)||void 0===j?void 0:j.color,textSize:null===(B=ne.slicerText)||void 0===B?void 0:B.textSize,fontFamily:null===(D=ne.slicerText)||void 0===D?void 0:D.fontFamily}}},de.prototype.create=function(ne){this.container=this.domHelper.addSearch(this.hostServices,ne),this.input=this.container.select(X.Mj.selector)},de.prototype.addClearButton=function(){this.clear=this.domHelper.addClearSearchButton(this.hostServices,this.container)},de.prototype.clearSearchText=function(){this.container.select(X.Mj.selector).property("value","")},de.prototype.getHeight=function(ne){var xe=this.container.node();return $(xe).outerHeight(!0)},de.prototype.update=function(ne){if(!ne||!ne.isVisible)return this.container.classed(X.pD.class,!1),void this.container.classed(X.AM.class,!0);void 0!==ne.bottomMargin&&this.container.style("margin-bottom",ne.bottomMargin+"px");var xe=this.container.classed(X.pD.class);this.container.classed(X.pD.class,ne.isVisible),this.container.classed(X.AM.class,!ne.isVisible);var S=ne.style,ye=this.container.select(X.Mj.selector),Ce=this.container.select(X.uN.selector);if(ye.empty())ne.hasClearSearchButton&&this.domHelper.configureSearchBoxIcon(this.container,void 0);else{var J=ye.node(),k=J&&J.value;ne.hasClearSearchButton&&this.domHelper.configureSearchBoxIcon(this.container,k),(_.isEmpty(k)||_.isEmpty(ne.searchKey)&&ne.isVisible!==xe)&&ye.property("value",ne.searchKey);var H=Math.ceil(G.FP.fromPointToPixel(S.textSize));this.height=H,this.container.styles({color:S.color,"border-style":S.borderStyle,"border-color":S.borderColor,background:S.background,height:H+"px"}),ye.styles({background:S.background,color:S.color,"font-size":G.FP.fromPoint(S.textSize),"font-family":S.fontFamily}),Ce.styles({color:S.color})}},de}()},60810:function(vt,Ue,C){"use strict";C.d(Ue,{G:function(){return G},J:function(){return X}});var G=function(c){return c[c.NoOperation=0]="NoOperation",c[c.WaitingForData=1]="WaitingForData",c[c.TriggeredLoadMore=2]="TriggeredLoadMore",c}({}),X=function(){function c(de){this.hostServices=de,this.waitingForData=!1}return c.prototype.shouldLoadMoreData=function(){return this.shouldLoadMoreDataInternal()===G.TriggeredLoadMore},c.prototype.isLoadingMoreData=function(){return this.waitingForData},c.prototype.updateDataView=function(de){this.dataView=de},c.prototype.loadMoreData=function(){var de=this.shouldLoadMoreDataInternal();return de===G.TriggeredLoadMore&&(this.hostServices.loadMoreData(),this.waitingForData=!0),de},c.prototype.onLoadMoreDataCompleted=function(){this.waitingForData=!1},c.prototype.shouldLoadMoreDataInternal=function(){if(!this.dataView)return G.NoOperation;var de=this.dataView.metadata;return this.waitingForData?G.WaitingForData:de&&de.segment?G.TriggeredLoadMore:G.NoOperation},c}()}}]);