"use strict";(self.webpackChunkmobile=self.webpackChunkmobile||[]).push([["tile-host"],{64986:function(Qe,de,n){n.d(de,{D:function(){return Je}});var g=n(84436),l=n(67465),se=n(95194),Q=n(60756),e=n(33567),m=n(90047),T=n(82515),J=n(46544),re=n(82762),F=n(14172),H=n(81905),U=n(59822),p=n(59973),W=n(17653),S=n(50423),ne=n(87051),Re=n(18231),Ee=n(99868),ze=n(11547),je=n(59017),Ne=n(21860),$e=n(84916),xe=n(29866),Ke=function(){function j(B,G,Y){this.themeService=B,this.resourcePackagesService=G,this.visualPlugin=Y}return j.prototype.register=function(B){return _.isEmpty(B)||this.resourcePackagesService.registerPackages(B),(0,ze.of)(!0)},j.prototype.registerAndLoad=function(B,G){if(_.isEmpty(B))return(0,ze.of)(!0);for(var Y=[],pe=0,ge=B;pe<ge.length;pe++){var oe=ge[pe];if(this.isDashboardTheme(oe))Y.push((0,re.D)(this.themeService.loadTheme(G,oe)));else if(!this.resourcePackagesService.getPackageById(oe.id)){var Fe=(0,Ee.JZ)(oe);this.resourcePackagesService.registerPackages([oe]),Fe&&Y.push((0,re.D)(this.visualPlugin.ensurePlugin(oe,!1)))}}return _.isEmpty(Y)?(0,ze.of)(!0):(0,je.aj)(Y)},j.prototype.isDashboardTheme=function(B){return B&&1===B.type&&B.items&&1===B.items.length&&(B.items[0].type===Re.Ut.DashboardTheme||B.items[0].type===Re.Ut.DashboardBaseTheme)},j.\u0275fac=function(G){return new(G||j)(S.\u0275\u0275inject(Ne.d),S.\u0275\u0275inject($e.o),S.\u0275\u0275inject(xe.D))},j.\u0275prov=S.\u0275\u0275defineInjectable({token:j,factory:j.\u0275fac,providedIn:"root"}),j}(),X=n(79184),Ie=n(42594),Le=n(65472),we=function(){function j(B){this.hostService=B}return j.prototype.loadContract=function(B){var G=this;return(0,re.D)(this.hostService.invoke("SampleService","GetDashboard",{dashboardId:B})).pipe((0,F.U)(function(Y){Y.objectId=G.generateObjectId(B),Y.sampleId=B,Y.permissions=1;var pe=Y.tiles.map(function(ge){return ge.objectId=G.generateObjectId(ge.id),ge.$layoutConfig=(0,X.mf)(ge),ge});return Y.tiles=G.calculateLayout(pe),{dashboards:[Y],datasets:[],reports:[],tiles:[]}}))},j.prototype.generateObjectId=function(B){return"sample00-0000-0000-0000-".concat(_.pad(Math.abs(B).toString(16),12,"0"))},j.prototype.calculateLayout=function(B){var G=this,Y=Ie.u,pe=[];if(B.sort(function(x,M){return G.getLayoutPosition(x).x-G.getLayoutPosition(M).x}),B.length>0){var ge=this.getLayoutPosition(B[B.length-1]);Y=Math.max(Math.ceil(ge.x+ge.width-1),Ie.u)}for(var oe=0;oe<=Y;++oe)pe.push(1);B.sort(function(x,M){return G.getLayoutPosition(x).y-G.getLayoutPosition(M).y});for(var Fe=0,le=B;Fe<le.length;Fe++)this.fixPosition(le[Fe],pe);return B},j.prototype.fixPosition=function(B,G){for(var Y=this.getLayoutPosition(B),pe=1,ge=Y.x,oe=Y.x+Y.width;ge<oe;++ge){var Fe=G[ge];Fe>pe&&(pe=Fe)}var le=Y.y;for(Y.y=le<pe||le>Ie.ws?pe:Math.round(le),pe=Y.y+Y.height,B.row=Y.y,B.col=Y.x,ge=Y.x,oe=Y.x+Y.width;ge<oe;++ge)G[ge]=pe},j.prototype.getLayoutPosition=function(B){return B.$layoutConfig.layouts[0].position},j.\u0275fac=function(G){return new(G||j)(S.\u0275\u0275inject(Le.x))},j.\u0275prov=S.\u0275\u0275defineInjectable({token:j,factory:j.\u0275fac,providedIn:"root"}),j}(),Ue=n(85732),a=function(){function j(B,G,Y,pe,ge,oe,Fe){var le=this;this.networkAvailability=B,this.action$=G,this.dashboardCacheService=Y,this.dashboardResourcesService=pe,this.sampleService=ge,this.telemetryService=oe,this.store=Fe,this.loadDashboard$=(0,Q.GW)(function(){return le.action$.pipe((0,Q.l4)(l.L6),(0,F.U)(function(f){return f.payload}),(0,H.w)(function(f){return le.loadFromCache(f.id,f.workspaceId).pipe((0,H.w)(function(x){le.telemetryService.logEvent(g.L5,{dashboardId:f.id,groupId:f.workspaceId});var M=_.find(x.dashboards,function(V){return V.id===f.id}),D={workspaceId:f.workspaceId,container:x,dashboard:M};return[new m.kk(D),new l.Dd(D),le.networkAvailability.isNetworkAvailable()?new m.i(f):new l.I4(D)]}),(0,U.K)(function(x){return le.telemetryService.logEvent(g.fx,{dashboardId:f.id,groupId:f.workspaceId}),(0,re.D)([new l.ot(f.id),le.networkAvailability.isNetworkAvailable()?new m.i(f):new l.zd({dashboardId:f.id,error:new Error("Failed to load dashboard ".concat(f.id," from cache. Network unavailable."))})])}))}))}),this.loadSampleDashboard$=(0,Q.GW)(function(){return le.action$.pipe((0,Q.l4)(l.Cj),(0,F.U)(function(f){return f.payload}),(0,H.w)(function(f){return le.sampleService.loadContract(f.id).pipe((0,H.w)(function(x){var M=_.first(x.dashboards),D={container:x,dashboard:M};return[new m.kk(D),new T.Ph({id:f.workspaceId}),new m.Ph(M.objectId,!0),new l.nX(D)]}),(0,U.K)(function(x){return(0,re.D)([new l.zd({dashboardId:f.id,error:new Error("Failed to load sample dashboard ".concat(f.id,"."))})])}))}))}),this.reloadDashboard$=(0,Q.GW)(function(){return le.action$.pipe((0,Q.l4)(l.b4),(0,Q.IC)(function(){return le.store.select(se.P$)}),(0,F.U)(function(f){var M=f[1];return new m.i({id:M.dashboardId,workspaceId:M.workspaceId})}))}),this.loadCacheSuccess$=(0,Q.GW)(function(){return le.action$.pipe((0,Q.l4)(l.DY),(0,F.U)(function(f){return f.payload}),(0,H.w)(function(f){return le.dashboardResourcesService.register(f.container.resourcePackages||[]).pipe((0,H.w)(function(){return[new T.Ph({id:f.workspaceId}),new m.Ph(f.dashboard.objectId,!0)]}))}))}),this.loadOnlineSuccess$=(0,Q.GW)(function(){return le.action$.pipe((0,Q.l4)(m.jf),(0,F.U)(function(f){return f.payload}),(0,Q.IC)(function(){return le.store.select(se.P$)}),(0,p.h)(function(f){return 1===f[1].progress}),(0,H.w)(function(f){var x=f[0],D=x.workspaceId,V=x.dashboard.objectId;return le.dashboardResourcesService.registerAndLoad(x.container.resourcePackages||[],V).pipe((0,H.w)(function(){return[new T.Ph({id:D}),new m.Ph(V,!0),new l.Xt]}),(0,U.K)(function(){return(0,re.D)([new T.Ph({id:D}),new m.Ph(V,!0),new l.Xt])}))}))}),this.loadFail$=(0,Q.GW)(function(){return le.action$.pipe((0,Q.l4)(m.wx),(0,F.U)(function(f){return f.payload}),(0,Q.IC)(function(){return le.store.select(se.P$)}),(0,W.b)(function(f){le.telemetryService.logEvent(g.Ur,{dashboardId:f[0].dashboardId,groupId:f[1].workspaceId,errorMessage:"Failed to load dashboard from network"})}),(0,F.U)(function(f){return new l.zd(f[0])}))})}return j.prototype.loadFromCache=function(B,G){return(0,re.D)(this.dashboardCacheService.loadContract({dashboardId:B,groupId:G}))},j.\u0275fac=function(G){return new(G||j)(S.\u0275\u0275inject(e.SW),S.\u0275\u0275inject(Q.eX),S.\u0275\u0275inject(ne.H),S.\u0275\u0275inject(Ke),S.\u0275\u0275inject(we),S.\u0275\u0275inject(J.y0),S.\u0275\u0275inject(Ue.yh))},j.\u0275prov=S.\u0275\u0275defineInjectable({token:j,factory:j.\u0275fac}),j}(),q=n(77476),Se=function(){function j(){}return j.\u0275fac=function(G){return new(G||j)},j.\u0275mod=S.\u0275\u0275defineNgModule({type:j}),j.\u0275inj=S.\u0275\u0275defineInjector({}),j}(),We=n(63868),qe=function(){function j(){}return j.\u0275fac=function(G){return new(G||j)},j.\u0275mod=S.\u0275\u0275defineNgModule({type:j}),j.\u0275inj=S.\u0275\u0275defineInjector({imports:[Se,We.h]}),j}(),et=n(46055),ot=n(32288),ue=n(26409),Ye=n(43130),tt=n(37435),Je=function(){function j(B,G){32===B&&G.init()}return j.\u0275fac=function(G){return new(G||j)(S.\u0275\u0275inject(Ye.H),S.\u0275\u0275inject(tt.gX))},j.\u0275mod=S.\u0275\u0275defineNgModule({type:j}),j.\u0275inj=S.\u0275\u0275defineInjector({imports:[q.CommonModule,et.b,ot.J,qe,Ue.Aw.forFeature("dashboard-host",se.ll),Q.sQ.forFeature([a]),ue.z]}),j}()},90469:function(Qe,de,n){n.r(de),n.d(de,{TileHostModule:function(){return le}});var g=n(64986),l=n(81337),se=n(9947),Q=n(16054),e=n(50423),m=n(38823),T=n(26898),J=n(94717),re=n(88565),F=n(14463),H=n(57871),U=n(74804),p=n(58291),W=n(98306),S=n(98330),ne=n(39681),Re=n(29866),Ee=n(11547),ze=n(58417),je=new e.InjectionToken("TileHostDataProxyInjectionToken"),Ne=function(){function f(x,M,D,V,Z,he,ce){this.conceptualSchemaProxy=V,this.visualQueryGenerator=he,this.dataProxy=ce||(0,W.nW)(x.create(),Z,D,M)}return f.prototype.loadMoreData=function(x,M){return(0,Q.j)(x.$config.visualContainer)&&M?this.loadData(x.id,x.$config.visualContainer,M):(0,Ee.of)(void 0)},f.prototype.loadData=function(x,M,D){var V=this;return new ze.y(function(Z){(0,l.mG)(V,void 0,void 0,function(){var he,ce,_e,at,st,ut,N,I;return(0,l.Jh)(this,function(L){switch(L.label){case 0:return L.trys.push([0,7,,8]),[4,this.getRunQueryOptions(x,M,D)];case 1:return he=L.sent(),this.dataProxy.lastExecutedQuery()?(_e=(ce=Z).next,[4,this.runQuery(he,1)]):[3,3];case 2:return _e.apply(ce,[L.sent()]),[3,6];case 3:return st=(at=Z).next,[4,this.runQuery(he,2)];case 4:return st.apply(at,[L.sent()]),N=(ut=Z).next,[4,this.runQuery(he,1)];case 5:N.apply(ut,[L.sent()]),L.label=6;case 6:return Z.complete(),[3,8];case 7:return I=L.sent(),Z.error(I),[3,8];case 8:return[2]}})})})},f.prototype.getRunQueryOptions=function(x,M,D){return(0,l.mG)(this,void 0,void 0,function(){var V,Z,ce;return(0,l.Jh)(this,function(_e){switch(_e.label){case 0:return _e.trys.push([0,2,,3]),V=this.createDataSourceArray(x,M,D),[4,this.conceptualSchemaProxy.get(V)];case 1:return Z=_e.sent(),[2,{dataSources:V,schema:Z,config:M.$visualContainer.config.singleVisual,hostServices:this.createFilteringHostService(M.$visualContainer),visualQueryGenerator:this.visualQueryGenerator,executionType:1}];case 2:throw ce=_e.sent(),new Error("Error generating run query options '".concat(ce,"'"));case 3:return[2]}})})},f.prototype.runQuery=function(x,M){return(0,l.mG)(this,void 0,void 0,function(){var D,V,Z;return(0,l.Jh)(this,function(he){switch(he.label){case 0:D=(0,l.pi)((0,l.pi)({},x),{executionType:M}),he.label=1;case 1:return he.trys.push([1,3,,4]),[4,this.dataProxy.runQuery(D)];case 2:return V=he.sent(),[2,this.convertQueryExecutionResult(V,M)];case 3:throw Z=he.sent(),new Error("Failed runQuery for type ".concat(M," '").concat(Z,"'"));case 4:return[2]}})})},f.prototype.convertQueryExecutionResult=function(x,M){if(x&&x.dataReaderResult){var D=x.dataReaderResult.dataView;if(D)return{executionType:M,transforms:this.dataProxy.lastExecutedQuery().transforms,dataViewSource:x?.dataViewSource,segment:D}}},f.prototype.createFilteringHostService=function(x){return(0,ne.ED)((0,S.E)(),function(M){M.getFilters=function(D,V){return D.calculateVisualContainerFilter(null,null,x,V)}})},f.prototype.createDataSourceArray=function(x,M,D){var V=(0,U.CD)(D);return(0,U.yd)([V,{type:p.K,id:x,name:H.eM,extends:H.N8,exploration:{schemaName:H.eM,extends:H.N8,getModelExtensions:function(){return M.$modelExtensions},getDataSourceVariables:function(){return M.dataSourceVariables}}}])},f.\u0275fac=function(M){return new(M||f)(e.\u0275\u0275inject(m.U),e.\u0275\u0275inject(Re.D),e.\u0275\u0275inject(F.t),e.\u0275\u0275inject(T.i),e.\u0275\u0275inject(J.r),e.\u0275\u0275inject(re.S),e.\u0275\u0275inject(je,8))},f.\u0275prov=e.\u0275\u0275defineInjectable({token:f,factory:f.\u0275fac}),f}(),$e={provide:Ne,useClass:Ne,deps:[m.U,Re.D,F.t,T.i,J.r,re.S,[new e.Optional,je]]},xe=n(79021),Ke=n(89659),X=n(60661),Ie=n(81442),Le=n(73221),we=n(14172),Ue=n(15860),a=n(22318),q=n(83317),Se=n(23558),We=n(42195),qe=n(59822),et=n(19373),ot=n(83050),ue=n(65472),Ye=function(){function f(x){this.hostService=x,this.loadingAppFired=!1}return f.prototype.finishedLoadingAngularApp=function(){this.loadingAppFired||(this.loadingAppFired=!0,this.hostService.invokeAndForget("TileProgressNotificationService","FinishedLoadingAngularApp",{}))},f.\u0275fac=function(M){return new(M||f)(e.\u0275\u0275inject(ue.x))},f.\u0275prov=e.\u0275\u0275defineInjectable({token:f,factory:f.\u0275fac,providedIn:"root"}),f}(),tt=n(56672),Je=n(77476),j=function(x,M){return{"width.px":x,"height.px":M}};function B(f,x){if(1&f&&e.\u0275\u0275element(0,"tile-content",2),2&f){var M=e.\u0275\u0275nextContext().ngIf;e.\u0275\u0275property("ngStyle",e.\u0275\u0275pureFunction2(5,j,M.size.width,M.size.height))("contract",M.contract)("disableInteractions",!0)("isLargeHeader",!0)("mobileTileInteractive",M.isInteractive)}}function G(f,x){if(1&f&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,B,1,8,"tile-content",1),e.\u0275\u0275elementContainerEnd()),2&f){var M=x.ngIf;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",M)}}var Y=function(f){function x(M,D,V,Z,he){var ce=f.call(this)||this;return ce.syncListenerService=M,ce.tileHost=D,ce.tileProgressNotificationService=V,ce.visualHostServiceFactory=Z,ce.cd=he,ce}return(0,l.ZT)(x,f),Object.defineProperty(x.prototype,"updateTileContent",{set:function(D){var V=this;this.tileContent=D,D?(this.resizeObserver=new ResizeObserver(function(){D.refreshViewPortSize(),V.cd.detectChanges()}),this.resizeObserver.observe(D.elementRef.nativeElement)):this.disconnectResizeObserver()},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"tileContentViewRef",{set:function(D){this.loadMoreService=D?e.Injector.create({providers:[$e],parent:D.injector,name:"ScopedTileHostLoadMoreDataService"}).get(Ne,null):void 0},enumerable:!1,configurable:!0}),x.prototype.ngOnInit=function(){var M=this;this.request$=this.tileHost.renderTileRequest$.pipe((0,we.U)(function(D){if(!D)return null;var V=(0,l.pi)({},D.size);return V.height=V.height||window.innerHeight,V.width=V.width||window.innerWidth,(0,l.pi)((0,l.pi)({},D),{size:V})}),(0,Ue.a)(this.tileHost.viewport$.pipe((0,a.O)(null))),(0,we.U)(function(D){var V=D[0],Z=D[1];return V&&Z&&(V.size.height=Z.height,V.size.width=Z.width),V})),this.syncListenerService.subscribeOnce(),this.tileProgressNotificationService.finishedLoadingAngularApp(),this.visualHostServiceFactory.loadMoreDataRequest$.pipe((0,q.R)(this.onDestroy$),(0,Se.M)(this.request$),(0,We.zg)(function(D){var V,Z,ce=D[1];return null!==(Z=null===(V=M.loadMoreService)||void 0===V?void 0:V.loadMoreData(ce.contract,ce.model))&&void 0!==Z?Z:(0,Ee.of)(void 0)}),(0,qe.K)(function(D){return(0,Ee.of)(void 0)})).subscribe(function(D){var V=M.tileContent.visualDefinition;D&&V&&(M.onLoadMoreData(D,V),M.cd.markForCheck())})},x.prototype.ngOnDestroy=function(){return this.disconnectResizeObserver(),f.prototype.ngOnDestroy.call(this)},x.prototype.disconnectResizeObserver=function(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null)},x.prototype.onLoadMoreData=function(M,D){var V,Z;if(1===M.executionType){var he=null===(V=D.data)||void 0===V?void 0:V.dataView;(0,Ie.$n)(he,M.segment),Z={dataView:he,dataViewSource:M.dataViewSource,isFirstSegment:!1}}else{Z={dataView:M.segment,dataViewSource:M.dataViewSource};var ce=(0,X.A8)(M.segment);ce&&(Z.isFirstSegment=ce)}D.data=Z,D.dataTransforms=M.transforms},x.\u0275fac=function(D){return new(D||x)(e.\u0275\u0275directiveInject(et.M),e.\u0275\u0275directiveInject(ot.n),e.\u0275\u0275directiveInject(Ye),e.\u0275\u0275directiveInject(tt.a),e.\u0275\u0275directiveInject(e.ChangeDetectorRef))},x.\u0275cmp=e.\u0275\u0275defineComponent({type:x,selectors:[["tile-host"]],viewQuery:function(D,V){if(1&D&&(e.\u0275\u0275viewQuery(Ke.h,5),e.\u0275\u0275viewQuery(Ke.h,5,e.ViewContainerRef)),2&D){var Z=void 0;e.\u0275\u0275queryRefresh(Z=e.\u0275\u0275loadQuery())&&(V.updateTileContent=Z.first),e.\u0275\u0275queryRefresh(Z=e.\u0275\u0275loadQuery())&&(V.tileContentViewRef=Z.first)}},features:[e.\u0275\u0275ProvidersFeature([xe.a,se.jH]),e.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:[[4,"ngIf"],[3,"ngStyle","contract","disableInteractions","isLargeHeader","mobileTileInteractive",4,"ngIf"],[3,"ngStyle","contract","disableInteractions","isLargeHeader","mobileTileInteractive"]],template:function(D,V){1&D&&(e.\u0275\u0275template(0,G,2,1,"ng-container",0),e.\u0275\u0275pipe(1,"async")),2&D&&e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(1,1,V.request$))},dependencies:[Je.NgIf,Je.NgStyle,Ke.h,Je.AsyncPipe],styles:["[_nghost-%COMP%]{display:block;direction:ltr;height:100vh;width:100%}tile-content[_ngcontent-%COMP%]{display:block}"],changeDetection:0}),x}(Le.w),pe=n(9398),ge=n(63868),oe=n(12548),Fe=[{path:"",component:Y}],le=function(){function f(){}return f.\u0275fac=function(M){return new(M||f)},f.\u0275mod=e.\u0275\u0275defineNgModule({type:f}),f.\u0275inj=e.\u0275\u0275defineInjector({imports:[Je.CommonModule,pe.Bz.forChild(Fe),oe.Z,g.D,ge.h]}),f}()},89659:function(Qe,de,n){n.d(de,{h:function(){return Li}});var g=n(81337),l=n(49965),se=n(57541),Q=n(46391),e=n(50423),m=new e.InjectionToken("tileHeaderClickService"),T=n(81723),J=n(28726),re=n(76964),F=n(88940),H=n(70893),U=n(14463),p=n(50544),W=n(33318),S=n(65551),ne=n(79184),Re=n(38701),Ee=n(41288),ze=n(40093),je=n(36657),Ne=n(41114),$e="PBI.Dashboard.DashboardShouldRefreshTileData",xe=Ne.cx[$e]=(0,Ne.b1)($e),Ke="PBI.Dashboard.GetVisualDefinitionFailed",X=Ne.cx[Ke]=(0,Ne.b1)(Ke),Ie=n(8060),Le=n(58317),we=n(5708),Ue=n(2142),a=n(50600),q=n(47508),Se=n(79154),We=n(81331),qe=n(94573),et=n(4954),ot=n(73221),ue=n(46544),Ye=n(35563),tt=n(45665),Je=n(21429),j=n(33554),B=n(35510),G=n(59017),Y=n(11547),pe=n(48787),ge=n(59973),oe=n(14172),Fe=n(77526),le=n(42195),f=n(17653),x=n(57243),M=n(68549),D=n(6754),V=n(83317),Z=n(33567),he=n(43130),ce=n(9380),_e=n(29866),at=n(52121),st=n(84916),ut=n(22010),N=n(69071),I=n(67660),L=n(21860),ie=n(93425),ye=n(1731),be=n(88254),ve=n(65181),Ve=n(93205),Be=n(43025),Me=n(11494),Ze=n(14348),ke=n(66217),C=n(21976),v=n(5862),E=n(47644),A=n(3579),$=n(73192),Oe=function(){function r(o,t){this.explorationProxy=o,this.promiseFactory=t,this.explorationJobsQueue=[],this.inProgressJobsQueue=[]}return r.prototype.getExploration=function(o,t){var i=this.promiseFactory.defer();return this.explorationJobsQueue.push({reportId:o,sectionId:t,deferred:i}),this.scheduleLoadExploration(),i.promise},r.prototype.scheduleLoadExploration=function(){var o=this;this.delayTimeout&&clearTimeout(this.delayTimeout),this.delayTimeout=setTimeout(function(){o.loadExplorations()},10)},r.prototype.loadExplorations=function(){var o=this,t=this.explorationJobsQueue;if(!_.isEmpty(t)){var i=t.shift();this.inProgressJobsQueue.push(i);var s=this.shouldRequestForAllSection(i.reportId,i.sectionId),c=i.reportId,u=s?null:i.sectionId;s&&(this.inProgressJobsQueue=this.inProgressJobsQueue.concat(_.remove(t,function(z){return z.reportId===c})));var b={id:c,sectionId:u,allowResultFromClientCache:!0};this.explorationProxy.get(b).then(function(z){o.processResult(b.id,b.sectionId,z)},function(){o.processResult(b.id,b.sectionId,null)}),this.loadExplorations()}},r.prototype.shouldRequestForAllSection=function(o,t){if(null==t)return!0;var i=this.explorationJobsQueue;if(_.isEmpty(i))return!1;for(var s=0,c=0,u=i;c<u.length;c++){var b=u[c];if(b.reportId===o&&(null==b.sectionId||(b.sectionId!==t&&s++,s>=2)))return!0}return!1},r.prototype.processResult=function(o,t,i){for(var s=[],c=0,u=this.inProgressJobsQueue;c<u.length;c++){var b=u[c];b.reportId!==o||_.isNumber(t)&&t!==b.sectionId?s.push(b):i?b.deferred.resolve(i):b.deferred.reject(i)}this.inProgressJobsQueue=s},r.\u0275fac=function(t){return new(t||r)(e.\u0275\u0275inject($.u),e.\u0275\u0275inject(U.t))},r.\u0275prov=e.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac,providedIn:"root"}),r}(),rt=function(){function r(o,t,i){this.reportTileService=o,this.visualPlugins=t,this.tileConfig=i}return r.prototype.tileContainsScriptVisuals=function(o){return(0,g.mG)(this,void 0,void 0,function(){var t;return(0,g.Jh)(this,function(i){switch(i.label){case 0:return[4,this.countTileScriptVisuals(o)];case 1:return t=i.sent(),[2,this.isScriptVisualTile(o)||t.hasScriptVisuals]}})})},r.prototype.isScriptVisualTile=function(o){return o&&o.type===p.YU.composite&&this.visualPlugins.isScriptVisual((0,S.s)(o.$config))},r.prototype.countTileScriptVisuals=function(o){var t;return(0,g.mG)(this,void 0,void 0,function(){var i,s,c,u,b;return(0,g.Jh)(this,function(z){switch(z.label){case 0:return i=new ne.Us,o.type!==p.YU.report?[2,i]:[4,this.reportTileService.getExploration(o.reportId,o.sectionId)];case 1:if(s=z.sent().exploration,c=o&&o.type===p.YU.report&&s&&s.sections,o&&o.type===p.YU.report&&(u=o.$config?o.$config.visualContainer:null===(t=this.tileConfig.parseTileConfig(o))||void 0===t?void 0:t.visualContainer),!c||!u)return[2,i];if((b=(0,A.s)(u.$visualContainer))&&this.visualPlugins&&this.visualPlugins.isScriptVisual(b))switch((0,E.lX)(b)){case 0:i.rScriptCount++;break;case 1:i.pythonScriptCount++}return[2,i]}})})},r.\u0275fac=function(t){return new(t||r)(e.\u0275\u0275inject(Oe),e.\u0275\u0275inject(_e.D),e.\u0275\u0275inject(ie.A))},r.\u0275prov=e.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac,providedIn:"root"}),r}(),lt=n(70785),ft=n(85732),R=n(94420),h=function(){function r(o){this.telemetryService=o}return r.prototype.shouldRefreshData=function(o,t,i,s){if(s>=r.maxRetryRefreshTiles)return!1;var c=!t&&this.isDataStale(i?(0,we.ee)(i.lastRefreshTime).getTime():void 0,o),u=!t&&o.tileDataSet&&!o.tileDataIsVolatile&&(!o.tileData||c);return this.telemetryService.logEvent(xe,{hasQueryError:t,hasDataset:!!o.tileDataSet,tileDataIsVolatile:o.tileDataIsVolatile,hasTileData:!!o.tileData,isStaleData:c,tileObjectId:o.objectId,sholudRefreshTileData:u}),u},r.prototype.isDataStale=function(o,t){if(!o)return!1;var s=(0,we.ee)(t.tileDataUpdatedTime),c=s&&s.getTime();return!!c&&o-c>36e5},r.maxRetryRefreshTiles=1,r.\u0275fac=function(t){return new(t||r)(e.\u0275\u0275inject(ue.y0))},r.\u0275prov=e.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac,providedIn:"root"}),r}(),d=n(77476),O=n(67954),k=n(60016),K=n(28537),fe=n(12338),me=n(59968),Ae=n(50057),Ce=n(18460),nt=n(35756),it=n(28717),Ge=n(18942);function Xe(r,o){if(1&r&&(e.\u0275\u0275elementStart(0,"div",1),e.\u0275\u0275element(1,"img",2),e.\u0275\u0275elementEnd()),2&r){var t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("src",t.imageUrl,e.\u0275\u0275sanitizeUrl)}}var mt=function(){function r(o){this.sanitizer=o}return r.prototype.ngOnInit=function(){this.imageUrl=this.sanitizer.bypassSecurityTrustResourceUrl(it.yE)},r.\u0275fac=function(t){return new(t||r)(e.\u0275\u0275directiveInject(Ge.H7))},r.\u0275cmp=e.\u0275\u0275defineComponent({type:r,selectors:[["model-tile"]],decls:1,vars:1,consts:[["class","modelTile",4,"ngIf"],[1,"modelTile"],["alt","",1,"image",3,"src"]],template:function(t,i){1&t&&e.\u0275\u0275template(0,Xe,2,1,"div",0),2&t&&e.\u0275\u0275property("ngIf",i.imageUrl)},dependencies:[d.NgIf],styles:["[_nghost-%COMP%]   .modelTile[_ngcontent-%COMP%]{margin-right:2px;margin-left:2px;bottom:2px}[_nghost-%COMP%]   .modelTile[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;-webkit-transform:translateY(-50%) translateX(-50%);transform:translateY(-50%) translate(-50%);opacity:1;max-width:100%;max-height:100%}"]}),r}(),Rt=n(44088);function jt(r,o){1&r&&(e.\u0275\u0275elementStart(0,"div",4)(1,"div",5),e.\u0275\u0275element(2,"div",6),e.\u0275\u0275elementStart(3,"div",7)(4,"span",8),e.\u0275\u0275text(5," We couldn't load that image "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div")(7,"a",9),e.\u0275\u0275text(8," Learn more "),e.\u0275\u0275elementEnd()()()()())}function Bt(r,o){if(1&r){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",1)(1,"img",2),e.\u0275\u0275listener("load",function(){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(c.imageLoaded())})("error",function(){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(c.imageError())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(2,jt,9,0,"div",3),e.\u0275\u0275elementEnd()}if(2&r){var i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("src",i.imageUrl,e.\u0275\u0275sanitizeUrl)("alt",i.altText),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.imageloadUrlError)}}var At=function(){function r(){this.imageloadUrlError=!1}return r.prototype.imageLoaded=function(){this.imageloadUrlError=!1},r.prototype.imageError=function(){this.imageloadUrlError=!0},r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=e.\u0275\u0275defineComponent({type:r,selectors:[["image-tile"]],inputs:{imageUrl:"imageUrl",altText:"altText"},decls:1,vars:1,consts:[["class","imageTile",4,"ngIf"],[1,"imageTile"],[1,"image",3,"src","alt","load","error"],["class","errorPlaceholder",4,"ngIf"],[1,"errorPlaceholder"],[1,"errorContainer"],["title","We couldn't load that image",1,"errorPlaceholderIcon","glyphicon","pbi-glyph-error","glyph-med"],[1,"errorPlaceholderTextContainer"],[1,"errorPlaceholderText"],["href","https://go.microsoft.com/fwlink/?LinkID=690859&clcid=0x409","rel","noopener noreferrer","target","_blank","localize","LearnMore",1,"getDetailsText","clickAction"]],template:function(t,i){1&t&&e.\u0275\u0275template(0,Bt,3,3,"div",0),2&t&&e.\u0275\u0275property("ngIf",i.imageUrl)},dependencies:[d.NgIf,me.X],styles:['[_nghost-%COMP%]   .imageTile[_ngcontent-%COMP%]{margin-right:2px;margin-left:2px;bottom:2px}[_nghost-%COMP%]   .imageTile[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;-webkit-transform:translateY(-50%) translateX(-50%);transform:translateY(-50%) translate(-50%);opacity:1;max-width:100%;max-height:100%}[_nghost-%COMP%]   .errorContainer[_ngcontent-%COMP%]{display:table-cell;width:inherit;height:inherit;text-align:center;vertical-align:middle}[_nghost-%COMP%]   .errorContainer[_ngcontent-%COMP%]   .errorPlaceholderIcon[_ngcontent-%COMP%]{pointer-events:all;display:inline-block;vertical-align:middle;color:#666}[_nghost-%COMP%]   .errorContainer[_ngcontent-%COMP%]   .glyph-med[_ngcontent-%COMP%]{font-size:32px}[_nghost-%COMP%]   .errorContainer[_ngcontent-%COMP%]   .errorPlaceholder[_ngcontent-%COMP%]{display:table;background-color:#f4f4f4;color:#333;font-size:small;width:100%;height:100%;cursor:default;position:absolute}[_nghost-%COMP%]   .errorContainer[_ngcontent-%COMP%]   .errorPlaceholderTextContainer[_ngcontent-%COMP%]{display:block;text-align:center;padding:20px 20px 0}[_nghost-%COMP%]   .errorContainer[_ngcontent-%COMP%]   .errorPlaceholderTextContainer[_ngcontent-%COMP%]   .errorPlaceholderText[_ngcontent-%COMP%]{display:inline-block;text-align:center;vertical-align:middle;font:"Segoe UI",wf_segoe-ui_normal,helvetica,arial,sans-serif;font-size:14px;color:#333}[_nghost-%COMP%]   .errorContainer[_ngcontent-%COMP%]   .errorPlaceholderTextContainer[_ngcontent-%COMP%]   .getDetailsText[_ngcontent-%COMP%]{display:inline-block;text-align:center;vertical-align:middle;cursor:pointer;text-decoration:none;font-size:14px;color:#0645ad}']}),r}(),Nt=n(31639),Pt=n(65195),$t=["frame"];function Wt(r,o){if(1&r&&e.\u0275\u0275element(0,"iframe",4,5),2&r){var t=e.\u0275\u0275nextContext(2);e.\u0275\u0275propertyInterpolate("title",t.iFrameTitle),e.\u0275\u0275property("src",t.iframeUrl,e.\u0275\u0275sanitizeResourceUrl)}}function kt(r,o){if(1&r&&e.\u0275\u0275element(0,"iframe",6,5),2&r){var t=e.\u0275\u0275nextContext(2);e.\u0275\u0275propertyInterpolate("title",t.iFrameTitle),e.\u0275\u0275property("src",t.iframeUrl,e.\u0275\u0275sanitizeResourceUrl)}}function Ht(r,o){if(1&r&&(e.\u0275\u0275elementStart(0,"div",1),e.\u0275\u0275template(1,Wt,2,2,"iframe",2),e.\u0275\u0275template(2,kt,2,2,"iframe",3),e.\u0275\u0275elementEnd()),2&r){var t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==t.iframeTileSandboxOptions?null:t.iframeTileSandboxOptions.allowTopNavigationByUserActivation),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!(null!=t.iframeTileSandboxOptions&&t.iframeTileSandboxOptions.allowTopNavigationByUserActivation))}}var _t=window,Gt=function(){function r(o,t,i,s,c){this.sanitizer=o,this.networkAvailability=t,this.localizationService=i,this.featureSwitchService=s,this.iframeTileSandboxOptions=c,this.onTileError=new e.EventEmitter,this.sandboxOptions=["allow-scripts","allow-popups","allow-same-origin","allow-forms","allow-popups-to-escape-sandbox"],this.iframeUrl=this.sanitizer.bypassSecurityTrustResourceUrl(_t.embeddedWebContentIframeSource),this.loadAsync()}return r.prototype.ngOnInit=function(){this.iFrameTitle=this.viewModel&&this.viewModel.displayText?this.viewModel.displayText:this.localizationService.get("AddWidgetModal_IframeOption_Title")},r.prototype.loadAsync=function(){return(0,g.mG)(this,void 0,void 0,function(){return(0,g.Jh)(this,function(o){return this.iframeTileSandboxOptions&&this.iframeTileSandboxOptions.allowTopNavigationByUserActivation&&this.sandboxOptions.push("allow-top-navigation-by-user-activation"),this.sandbox=this.sandboxOptions.join(" "),[2]})})},r.prototype.ngOnChanges=function(o){this.iframe&&o.embedCode&&this.updateEmbedCode(this.embedCode)},r.prototype.ngAfterViewInit=function(){var o=this;if(this.networkAvailability.isNetworkAvailable())this.featureSwitchService.featureSwitches.webContentTilesTenantEnabled?(this.updateEmbedCode(this.embedCode),this.windowMessageHandler=function(i){i.data&&i.data.iframeLoaded&&o.iframe.nativeElement.contentWindow&&i.source===o.iframe.nativeElement.contentWindow&&(o.updateEmbedCode(o.viewModel.embedCode),window.removeEventListener(Pt.V,o.windowMessageHandler))},window.addEventListener(Pt.V,this.windowMessageHandler)):this.showWebContentDisabledMessage();else{var t=this.localizationService.get("Tile_ErrorText");this.onTileError.emit({error:t})}},r.prototype.updateEmbedCode=function(o){this.iframe&&this.iframe.nativeElement.contentWindow.postMessage({embedCode:o},"*")},r.prototype.showWebContentDisabledMessage=function(){var o=this.localizationService.get("Dashboard_WebContentTiles_Disabled"),t=this.localizationService.get("Dashboard_WebContentTiles_Disabled_ErrorText"),i=this.localizationService.get("ContactYourAdministratorForDetails");this.onTileError.emit({error:o,errorDetails:{message:o,displayableErrorInfo:[{errorInfoKey:t,errorInfoValue:i}],hideAdditionalErrorInfo:!0,hideGetHelpLink:!1,forceShowError:!0,helpLink:"https://go.microsoft.com/fwlink/?LinkID=690865"}})},r.prototype.ngOnDestroy=function(){window.removeEventListener(Pt.V,this.windowMessageHandler)},r.\u0275fac=function(t){return new(t||r)(e.\u0275\u0275directiveInject(Ge.H7),e.\u0275\u0275directiveInject(Z.SW),e.\u0275\u0275directiveInject(ve.o),e.\u0275\u0275directiveInject(ce.vZ),e.\u0275\u0275directiveInject(Nt.E,8))},r.\u0275cmp=e.\u0275\u0275defineComponent({type:r,selectors:[["iframe-tile"]],viewQuery:function(t,i){var s;(1&t&&e.\u0275\u0275viewQuery($t,5),2&t)&&(e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(i.iframe=s.first))},inputs:{viewModel:"viewModel",embeddedWebContentIframeSource:"embeddedWebContentIframeSource",embedCode:"embedCode"},outputs:{onTileError:"onTileError"},features:[e.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[["class","iframeTile","data-testid","iframe-Tile",4,"ngIf"],["data-testid","iframe-Tile",1,"iframeTile"],["class","iframeSelf","frameborder","0","allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture","allowfullscreen","","sandbox","allow-scripts allow-popups allow-same-origin allow-forms allow-popups-to-escape-sandbox allow-top-navigation-by-user-activation","scrolling","no","marginheight","0","marginwidth","0",3,"src","title",4,"ngIf"],["class","iframeSelf","frameborder","0","allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture","allowfullscreen","","sandbox","allow-scripts allow-popups allow-same-origin allow-forms allow-popups-to-escape-sandbox","scrolling","no","marginheight","0","marginwidth","0",3,"src","title",4,"ngIf"],["frameborder","0","allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture","allowfullscreen","","sandbox","allow-scripts allow-popups allow-same-origin allow-forms allow-popups-to-escape-sandbox allow-top-navigation-by-user-activation","scrolling","no","marginheight","0","marginwidth","0",1,"iframeSelf",3,"src","title"],["frame",""],["frameborder","0","allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture","allowfullscreen","","sandbox","allow-scripts allow-popups allow-same-origin allow-forms allow-popups-to-escape-sandbox","scrolling","no","marginheight","0","marginwidth","0",1,"iframeSelf",3,"src","title"]],template:function(t,i){1&t&&e.\u0275\u0275template(0,Ht,3,2,"div",0),2&t&&e.\u0275\u0275property("ngIf",!i.viewModel.isLoading&&i.sandbox)},dependencies:[d.NgIf]}),r}(),Qt=function(){function r(){}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=e.\u0275\u0275defineComponent({type:r,selectors:[["ssrs-tile"]],inputs:{imageUrl:"imageUrl"},decls:2,vars:1,consts:[[1,"ssrsTile"],["alt","",3,"src"]],template:function(t,i){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"img",1),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("src",i.imageUrl,e.\u0275\u0275sanitizeUrl))},styles:["[_nghost-%COMP%]   .ssrsTile[_ngcontent-%COMP%]{margin-right:2px;margin-left:2px;bottom:2px}[_nghost-%COMP%]   .ssrsTile[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;-webkit-transform:translateY(-50%) translateX(-50%);transform:translateY(-50%) translate(-50%);opacity:1;max-width:100%;max-height:100%}"]}),r}();function Jt(r,o){1&r&&e.\u0275\u0275element(0,"span",5)}function Kt(r,o){1&r&&e.\u0275\u0275element(0,"span",6)}var Yt=function(){function r(){}return r.prototype.ngAfterViewInit=function(){var o=this;setTimeout(function(){var t=document.getElementById("gridView");o.width=t.getBoundingClientRect().width,o.displayMode=o.width<200?0:o.width>400?1:2},0)},r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=e.\u0275\u0275defineComponent({type:r,selectors:[["permission-locked-tile"]],decls:7,vars:3,consts:[["id","gridView"],[3,"ngSwitch"],["data-testid","lock-icon",1,"glyphicon","glyph-small","pbi-glyph-lock"],["localize","PermissionCenter_LockedTile_Medium","data-testid","permission-center-locked-tile-medium",4,"ngSwitchCase"],["localize","PermissionCenter_LockedTile_Large",4,"ngSwitchCase"],["localize","PermissionCenter_LockedTile_Medium","data-testid","permission-center-locked-tile-medium"],["localize","PermissionCenter_LockedTile_Large"]],template:function(t,i){1&t&&(e.\u0275\u0275element(0,"div")(1,"div"),e.\u0275\u0275elementStart(2,"div",0)(3,"div",1),e.\u0275\u0275element(4,"div",2),e.\u0275\u0275template(5,Jt,1,0,"span",3),e.\u0275\u0275template(6,Kt,1,0,"span",4),e.\u0275\u0275elementEnd()()),2&t&&(e.\u0275\u0275advance(3),e.\u0275\u0275property("ngSwitch",i.displayMode),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngSwitchCase",1),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",2))},dependencies:[d.NgSwitch,d.NgSwitchCase,me.X],styles:["permission-locked-tile[_ngcontent-%COMP%]{color:var(--neutral-primary-color-alt2, #4a4a4a);font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif;font-size:12px;height:100%;line-height:16px;width:100%;display:block;background-color:var(--white-color, #FFF);overflow:hidden;text-decoration:none;cursor:pointer}permission-locked-tile[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-of-type{background:#D8D8D8;height:10px;margin:20px 0 8px 10px;width:40%}permission-locked-tile[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){background:var(--neutral-light-color, #EAEAEA);height:8px;width:25%;margin-left:10px}permission-locked-tile[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child{display:table;height:100%;margin-top:-26px;width:100%}permission-locked-tile[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child > div[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle;text-align:center}permission-locked-tile[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child > div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;padding-top:1px}"]}),r}(),Zt=n(22543),bt=n(57871),Xt=n(58291),qt=n(8590),en=n(82004),zt=n(42614),tn=n(78417),Mt=n(71216),nn=n(99826),on=n(11902),Lt=n(61903),rn=n(46616),an=n(50550),ct=n(62458),sn=n(99868),ln=n(3404),cn=n(90917),dn=n(48145),un=n(39503),pn=n(83008),hn=n(77200),vn=n(84281),fn=n(44294),mn=n(14839),gn=n(50911),yn=n(76072),Cn=n(2330),bn=n(73114);function Tn(r,o){if(1&r&&e.\u0275\u0275element(0,"exploration",4),2&r){var t=o.ngIf,i=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("viewModel",t)("disablePrint",!0)("shouldSetFocus",!0)("canvasOptions",i.canvasOptions)("useOnPushChangeDetection",!0)}}function Pn(r,o){if(1&r&&e.\u0275\u0275element(0,"error-placeholder",5),2&r){var t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("errorText",t.errorText)}}function Mn(r,o){if(1&r&&(e.\u0275\u0275elementStart(0,"div",1),e.\u0275\u0275template(1,Tn,1,5,"exploration",2),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275template(3,Pn,1,1,"error-placeholder",3),e.\u0275\u0275elementEnd()),2&r){var t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(2,2,t.explorationViewModel)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.isError)}}var In={type:1,name:"ReportVisualError"},Sn={type:1,name:"reloadEmptyVisuals"},xn=function(){function r(o,t,i,s,c,u,b,z,y,w,te,He,De,Te,Pe,pt,dt,vt,yt,It,St,xt,Ot,Dt,Et){this.explorationSerializer=o,this.explorationCapabilities=t,this.explorationNavigation=i,this.dataSources=s,this.localizationService=c,this.promiseFactory=u,this.reportTileService=b,this.viewModeState=z,this.undoRedo=y,this.resourceLoader=w,this.resourcePackagesService=te,this.featureSwitchService=He,this.themeService=De,this.visualPlugin=Te,this.telemetryService=Pe,this.trustedVisual=pt,this.eventBridge=dt,this.reportRefresh=vt,this.visualTimeSynchronizationService=yt,this.reportStore=It,this.datasetStore=St,this.globalEventBridge=xt,this.lazyProvider=Ot,this.publicCustomVisualService=Dt,this.moduleLoader=Et}return r.prototype.ngOnInit=function(){var o=this;ct.fF.assert(function(){return o.contract&&o.contract.type===p.YU.report}),this.viewModeState.setMode(0),this.viewModeState.updateConfig(function(i){i.displayOptions.hideNavigationPane=!0,i.displayOptions.hideOutspaceFormatting=!0,i.touchOptions.isCanvasSwipeable=!1}),this.undoRedo.setStrategy(new en.Z),this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager(),this.subscriptionManager.subscribe(Le.sc,function(){o.globalEventBridge.publishToChannel(je.z.tileVisualLoadedEventName,{objectId:o.contract.objectId})}).subscribe(qt.$$f,function(i,s){o.eventBridge.publishToChannel(In,s)}),this.jQueryUILoadedPromise=this.moduleLoader.require(rn.W).then(function(){return!0},function(){return!1}),this.explorationViewModel=this.populateReportTiles(),this.canvasOptions={autoLayoutVisualPadding:0,scrollbarOffset:0,disableFocusOnExploreCanvas:!0},this.explorationCapabilities.setCapabilities({showAppBar:!1,showTaskPane:!1,showVisualizationPane:!1,showNavContentPane:!0,visualContainerOptions:{showMenu:!1,showPin:!1,showContextMenu:!1,disablePin:!1,hideHeader:!0,useStylableHeader:!0},showBackButtonOnAppBar:!1,analysisVisuals:!0,qna:!0,azureMaps:!0,allowWebUrlVisualLinks:!0,disableCanvasTooltips:!0,disableDrillthroughText:!0,disableEnhancedTooltips:!0})},r.prototype.ngOnDestroy=function(){this.subscriptionManager.unsubscribeAll(),this.reportRefresh.destroy()},r.prototype.logEventForRealtimeTile=function(o){o&&(o.realTimeMode||o.pushDataVersion)&&this.telemetryService.logEvent(Ie.bm,{modelId:o.id,realtimeMode:o.realTimeMode||0,pushdataVersion:o.pushDataVersion||0,controller:"ReportTileController"})},r.prototype.reloadTrustedVisuals=function(o){_.isEmpty(o)||(this.visualPlugin.ensureTrustedVisualPlugins(o),this.eventBridge.publishToChannel(Sn,{visualTypes:o.map(function(t){return t.name})}))},r.prototype.populateExploration=function(o,t,i,s,c){return(0,g.mG)(this,void 0,void 0,function(){var b,z,y,w,te,He;return(0,g.Jh)(this,function(De){switch(De.label){case 0:return this.setDataSources(o,t),b=this.explorationSerializer.deepCopyExploration(t,{withData:!0,withQuery:!0}),z=r.mapCanvasSize(b,i),this.applySectionParameterFilters(z,i,s,c),y=r.getReferencedResourcePackages(z,i),w=null,this.featureSwitchService.featureSwitches.consumePublicCvsWithoutRps?[4,this.getResourcePackagesToRegister(y,z,i)]:[3,3];case 1:return te=De.sent(),[4,this.resolveExploration(te,z,i)];case 2:return w=De.sent(),[3,6];case 3:return[4,this.resolveExploration(y,z,i)];case 4:return w=De.sent(),[4,(0,nn.j)(t,this.trustedVisual)];case 5:He=De.sent(),this.reloadTrustedVisuals(He),De.label=6;case 6:return this.logEventForRealtimeTile(o),[2,w]}})})},r.prototype.resolveExploration=function(o,t,i){return(0,g.mG)(this,void 0,void 0,function(){var s;return(0,g.Jh)(this,function(u){switch(u.label){case 0:if(_.isEmpty(o))return[3,4];this.telemetryService.logEvent(Ie.eP,{resourcePackageLength:o.length,tileId:(s=this.contract)?s.id:-1,reportTileHasCustomVisual:!0}),this.resourcePackagesService.registerPackages(o),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,this.visualPlugin.ensurePlugins(o,!1)];case 2:case 3:return u.sent(),[3,4];case 4:return[2,this.createExplorationViewModel(t,i)]}})})},r.prototype.getResourcePackagesToRegister=function(o,t,i){return(0,g.mG)(this,void 0,void 0,function(){var s,c,u,b,z,y;return(0,g.Jh)(this,function(te){switch(te.label){case 0:return s=r.getReferencedVisualsInSection(t,i),[4,this.publicCustomVisualService.getPublicResourcePackages(_.keys(s))];case 1:for(c=te.sent(),u=c,b=function(De){_.find(c,function(Te){return Te.name===De.name})||u.push(De)},z=0,y=o;z<y.length;z++)b(y[z]);return[2,u]}})})},r.prototype.addODataFilterFromQuery=function(o,t){return(0,g.mG)(this,void 0,void 0,function(){var s,c,u;return(0,g.Jh)(this,function(z){switch(z.label){case 0:return[4,this.lazyProvider.get("@powerbi/ODataFilterParser/OData-Filter-Parser.module#ODataFilterParserModule","odataFilterParserService")];case 1:return[4,z.sent().tryGetFilters(t)];case 2:if(s=z.sent(),_.isEmpty(s))return[2];for(o.filters||(o.filters=[]),c=0,u=s;c<u.length;c++)o.filters.push(u[c]);return this.updateExplorationCacheCapabilities(!0,!1),[2]}})})},r.prototype.updateExplorationCacheCapabilities=function(o,t){var i=this.explorationCapabilities,s=i.getCapabilities();s.visualContainerOptions.disableQueryCacheUpdates=o,void 0!==t&&(s.persistentUserStateEnabled=t),i.setCapabilities(s)},r.prototype.applySectionParameterFilters=function(o,t,i,s){if(o&&o.sections){var c=(0,Mt.oS)(o,t),u=null!=c&&o.sections[c];if(u){zt.l.mergeExplorationSectionFilters(o,u);var b=(0,tn.SV)(o,i);zt.l.applySectionParameterFilters(u,null!=b&&o.pods[b],void 0,s)}}},r.prototype.populateReportTiles=function(){return(0,g.mG)(this,void 0,void 0,function(){var o,t,i,s,c,u,b,z,y,w,te,He;return(0,g.Jh)(this,function(Te){switch(Te.label){case 0:return this.isError=!1,ct.fF.assertValue(this.contract,"contract"),o=this.config,[4,this.reportStore.findById(t=this.contract.reportId)];case 1:return i=Te.sent(),s=this.contract.sectionId,i?[4,this.datasetStore.findDatasetById(i.modelId)]:(this.setErrorText(),[2]);case 2:c=Te.sent(),Te.label=3;case 3:return Te.trys.push([3,9,,10]),[4,this.reportTileService.getExploration(t,s)];case 4:return u=Te.sent().exploration,[4,this.initializeExplorationTheme(u)];case 5:if(Te.sent(),b=o&&o.reportTile&&o.reportTile.sectionId,z=u.sections,null==s&&null!=b&&null!=z&&b<z.length){if(!(y=u.sections[b]))return this.setErrorText(),[2];s=y.id}return w=null,te=null,o&&o.reportTile&&(w=o.reportTile.pod,o.reportTile.filters&&(He=[],te=this.explorationSerializer.deserializeFilterCollection(this.explorationSerializer.parseFilterCollectionConfig(o.reportTile.filters),He,!1),ct.fF.assert(function(){return _.isEmpty(He)},"Unexpected errors deserializing report tile filters"))),this.odataFilters?[4,this.addODataFilterFromQuery(u,this.odataFilters)]:[3,7];case 6:Te.sent(),Te.label=7;case 7:return[4,this.populateExploration(c,u,s,w,te)];case 8:return[2,Te.sent()];case 9:return Te.sent(),this.setErrorText(),[3,10];case 10:return[2]}})})},r.prototype.initializeExplorationTheme=function(o){return(0,g.mG)(this,void 0,void 0,function(){var t;return(0,g.Jh)(this,function(i){switch(i.label){case 0:return t=et.P.cloneThemeCollection(o.themeCollection),this.themeService.isLegacyThemeName(t.customTheme&&t.customTheme.name)&&delete t.customTheme,[4,et.P.loadThemeAndBaseTheme(this.promiseFactory,this.resourceLoader,this.themeService,o.resourcePackages,t)];case 1:return i.sent(),[2]}})})},r.prototype.createExplorationViewModel=function(o,t){this.explorationNavigation.loadExploration(o);var i=(0,Mt.gI)(o,t);if(i){this.explorationNavigation.goto(i);for(var s=new on.y(i),c=(0,an.UR)(),u=i.visualContainers.length,b=0;b<u;b++){var z=(0,Lt.Dz)(o,s.contract,i.visualContainers[b],0);z.allowDeferredRendering=!0,z.options=this.explorationCapabilities.getCapabilities().visualContainerOptions,c.push(z)}s.visualContainers=c,s.visualContainerGroups=(0,Lt.C)(i.visualContainerGroups,c,0);var y={contract:o,exploreCanvas:s,sections:[]};return this.featureSwitchService.featureSwitches.realTimeRefresh&&!this.featureSwitchService.featureSwitches.realTimeRefreshDisabled&&this.reportRefresh.init(),this.visualTimeSynchronizationService.setAnchorTimeToNow(),y}this.setErrorText()},r.prototype.setDataSources=function(o,t){ct.fF.assertValue(o,"model"),ct.fF.assertValue(t,"explorationContract");var i=t.dataSources.withId(o.id);if(!i){var s=bt.N8;t.dataSources.push(i={type:Ue.nKy,id:o.id,name:bt.N8,dsr:{schemaName:bt.N8,vsName:o.vsName,dbName:o.dbName,modelId:o.id}});var c=bt.eM;t.dataSources.push({type:Xt.K,id:t.id,name:c,extends:s,exploration:{schemaName:c,extends:s,getModelExtensions:function(){return t.modelExtensions},getDataSourceVariables:function(){return t.dataSourceVariables}}})}this.dataSources.set(t.dataSources)},r.prototype.setErrorText=function(){this.isError=!0,this.errorText=this.localizationService.get("ReportTile_DataUnavailable")},r.getReferencedResourcePackages=function(o,t){ct.fF.assertValue(o,"exploration");var i=r.getReferencedVisualsInSection(o,t);if(!_.isEmpty(i))return _.filter(o.resourcePackages,function(s){return(0,sn.JZ)(s)&&i[s.name]})},r.getReferencedVisualsInSection=function(o,t){ct.fF.assertValue(o,"exploration");var i=o.sections,s={};if(_.isEmpty(i))return s;for(var c=0,u=i;c<u.length;c++){var b=u[c];if(b.id===t){_.map(b.visualContainers,function(z){var y=z&&z.config&&z.config.singleVisual&&z.config.singleVisual.visualType;_.isEmpty(y)||(s[y]=!0)});break}}return s},r.mapCanvasSize=function(o,t){if(o){var i=(0,Mt.oS)(o,t);o.sections&&o.sections[i]&&void 0!==o.sections[i].size.displayOption&&(o.sections[i].size.displayOption=1)}return o},r.\u0275fac=function(t){return new(t||r)(e.\u0275\u0275directiveInject(ln.L),e.\u0275\u0275directiveInject(dn.U),e.\u0275\u0275directiveInject(un.z),e.\u0275\u0275directiveInject(pn.D),e.\u0275\u0275directiveInject(ve.o),e.\u0275\u0275directiveInject(U.t),e.\u0275\u0275directiveInject(Oe),e.\u0275\u0275directiveInject(hn.kc),e.\u0275\u0275directiveInject(vn.z),e.\u0275\u0275directiveInject(at.l6),e.\u0275\u0275directiveInject(st.o),e.\u0275\u0275directiveInject(ce.vZ),e.\u0275\u0275directiveInject(I.f),e.\u0275\u0275directiveInject(_e.D),e.\u0275\u0275directiveInject(ue.y0),e.\u0275\u0275directiveInject(N.t),e.\u0275\u0275directiveInject(Me.J),e.\u0275\u0275directiveInject(fn.F),e.\u0275\u0275directiveInject(cn.a),e.\u0275\u0275directiveInject(R.R),e.\u0275\u0275directiveInject(gn.s),e.\u0275\u0275directiveInject(Be.Z),e.\u0275\u0275directiveInject(yn.E),e.\u0275\u0275directiveInject(mn.B),e.\u0275\u0275directiveInject(Cn.m))},r.\u0275cmp=e.\u0275\u0275defineComponent({type:r,selectors:[["report-tile"]],inputs:{contract:"contract",config:"config",odataFilters:"odataFilters"},features:[e.\u0275\u0275ProvidersFeature((0,g.ev)([],Zt.u,!0))],decls:2,vars:3,consts:[["class","explorationContainer reportTile",4,"ngIf"],[1,"explorationContainer","reportTile"],[3,"viewModel","disablePrint","shouldSetFocus","canvasOptions","useOnPushChangeDetection",4,"ngIf"],[3,"errorText",4,"ngIf"],[3,"viewModel","disablePrint","shouldSetFocus","canvasOptions","useOnPushChangeDetection"],[3,"errorText"]],template:function(t,i){1&t&&(e.\u0275\u0275template(0,Mn,4,4,"div",0),e.\u0275\u0275pipe(1,"async")),2&t&&e.\u0275\u0275property("ngIf",i.contract&&e.\u0275\u0275pipeBind1(1,1,i.jQueryUILoadedPromise))},dependencies:[d.NgIf,bn.$,Rt.g,d.AsyncPipe],encapsulation:2}),r}(),On=n(77996),gt=n(55710),Dn=n(34763),En=n(63057),Ut=n(59787),wn=n(10367),Fn=n(17427),Rn=n(28894),zn=n(60473),Ln=n(44408);function Un(r,o){if(1&r&&e.\u0275\u0275element(0,"mat-icon",7),2&r){var t=e.\u0275\u0275nextContext();e.\u0275\u0275propertyInterpolate("fontIcon",t.menuIcon)}}function Vn(r,o){if(1&r&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&r){var t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.label)}}function jn(r,o){1&r&&e.\u0275\u0275element(0,"hr",16),2&r&&e.\u0275\u0275attribute("aria-hidden",!0)}function Bn(r,o){if(1&r){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",11)(1,"button",12),e.\u0275\u0275listener("click",function(){var b=e.\u0275\u0275restoreView(t).$implicit,z=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(z.clickHandler(b))}),e.\u0275\u0275element(2,"i",13),e.\u0275\u0275elementStart(3,"span",14),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(5,jn,1,1,"hr",15),e.\u0275\u0275elementEnd()}if(2&r){var i=o.$implicit,s=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("pbiTooltip",i.disabled?i.disabledTooltip:i.tooltip),e.\u0275\u0275advance(1),e.\u0275\u0275property("disabled",!!i.disabled),e.\u0275\u0275attribute("data-testid","tileMenuOptions."+i.iconClass),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",i.iconClass),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(i.text),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",s.isMobileDashboardHost)}}function An(r,o){if(1&r&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Bn,6,6,"div",10),e.\u0275\u0275elementContainerEnd()),2&r){var t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t.items)}}function Nn(r,o){1&r&&e.\u0275\u0275element(0,"spinner")}function $n(r,o){if(1&r&&(e.\u0275\u0275elementContainerStart(0,8),e.\u0275\u0275template(1,An,2,1,"ng-container",9),e.\u0275\u0275template(2,Nn,1,0,"spinner",9),e.\u0275\u0275elementContainerEnd()),2&r){var t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngSwitch",!!t.items&&t.items.length>0),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",!0),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",!1)}}var Wn=function(o,t){return{active:o,showOptions:t}},Vt=[10,7,1,13,3,12,14,11,4,0,2,6,5,8,9],kn=function(){function r(o,t,i,s,c){this.lazyScopedProvider=o,this.store=t,this.pbiFocusTrackerService=i,this.tileoptionsActionsService=s,this.hostEnv=c,this.currentMenuItemIdChange=new e.EventEmitter,this.executionRun=new e.EventEmitter,this.isMobileDashboardHost=!1,this.matMenuPanelClass="",this.subscription=new Dn.w}return r.prototype.ngOnInit=function(){return(0,g.mG)(this,void 0,void 0,function(){var o,t;return(0,g.Jh)(this,function(i){switch(i.label){case 0:return(0,Z.mv)(this.dashboard,"Dashboard cannot be null"),this.tileoptionsActionsService?[3,2]:(o=this,[4,this.lazyScopedProvider.get("TileoptionsActionsService")]);case 1:o.tileoptionsActionsService=i.sent(),i.label=2;case 2:return t=this,[4,this.tileoptionsActionsService.getMenuItems({artifact:this.dashboard,tileContract:this.tile,visualDefinition:this.visualDefinition},this.availableActions||Vt,this.callingContext)];case 3:return t.items=i.sent(),32===this.hostEnv&&(this.matMenuPanelClass="mobile-dashboard-menu",this.isMobileDashboardHost=!0),[2]}})})},r.prototype.ngOnChanges=function(o){var t;return(0,g.mG)(this,void 0,void 0,function(){var i;return(0,g.Jh)(this,function(s){switch(s.label){case 0:return this.tileoptionsActionsService&&o.tile&&o.tile.currentValue&&o.tile.currentValue.action!==(null===(t=o.tile.previousValue)||void 0===t?void 0:t.action)?(i=this,[4,this.tileoptionsActionsService.getMenuItems({artifact:this.dashboard,tileContract:o.tile.currentValue,visualDefinition:this.visualDefinition},this.availableActions||Vt,this.callingContext)]):[3,2];case 1:i.items=s.sent(),s.label=2;case 2:return[2]}})})},r.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},r.prototype.onMenuOpened=function(){var t,i,o=this;this.currentMenuItemId=(0,Fn.E)(this.dashboard),this.currentMenuItemIdChange.emit({id:this.currentMenuItemId,isOpen:!0}),null===(i=null===(t=this.tileoptionsActionsService)||void 0===t?void 0:t.onContextMenuOpened)||void 0===i||i.call(t,this.dashboard.id,this.tile.id),this.isMobileDashboardHost&&this.subscription.add((0,En.T)((0,Ut.R)(window,"resize"),(0,Ut.R)(window,"blur")).pipe((0,pe.q)(1)).subscribe(function(){return o.matMenuTrigger.closeMenu()}))},r.prototype.onMenuClosed=function(){this.currentMenuItemId=null,this.currentMenuItemIdChange.emit({id:this.currentMenuItemId,isOpen:!1});var o=this.pbiFocusTrackerService.getCurrentFocusedElement();o?.blur()},r.prototype.clickHandler=function(o){this.store.dispatch(new tt.Ph({id:this.tile.objectId})),o.execute(),this.executionRun.emit(o)},r.\u0275fac=function(t){return new(t||r)(e.\u0275\u0275directiveInject(Rn.H),e.\u0275\u0275directiveInject(ft.yh),e.\u0275\u0275directiveInject(zn.K),e.\u0275\u0275directiveInject(wn.y,8),e.\u0275\u0275directiveInject(he.H))},r.\u0275cmp=e.\u0275\u0275defineComponent({type:r,selectors:[["tileoptions-context-menu"]],viewQuery:function(t,i){var s;(1&t&&e.\u0275\u0275viewQuery(gt.D8,5),2&t)&&(e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(i.matMenuTrigger=s.first))},inputs:{menuIcon:"menuIcon",label:"label",ariaLabel:"ariaLabel",tooltip:"tooltip",dashboard:"dashboard",availableActions:"availableActions",callingContext:"callingContext",tile:"tile",visualDefinition:"visualDefinition",currentMenuItemId:"currentMenuItemId"},outputs:{currentMenuItemIdChange:"currentMenuItemIdChange",executionRun:"executionRun"},features:[e.\u0275\u0275NgOnChangesFeature],decls:7,vars:13,consts:[["mat-icon-button","","cdkMonitorElementFocus","","data-testid","tile-menu-options-btn","data-testid","more-options-menu-btn",1,"menuTrigger","tileoptionsMenuButton",3,"matMenuTriggerFor","ngClass","menuOpened","menuClosed","click"],["tileoptionsMenuTrigger","matMenuTrigger"],["class","glyph-small",3,"fontIcon",4,"ngIf"],[4,"ngIf"],["data-testid","tile-options-mat-menu","xPosition","after",3,"overlapTrigger"],["tileoptionsMenu","matMenu"],["matMenuContent",""],[1,"glyph-small",3,"fontIcon"],[3,"ngSwitch"],[4,"ngSwitchCase"],["class","tile-menu-item",3,"pbiTooltip",4,"ngFor","ngForOf"],[1,"tile-menu-item",3,"pbiTooltip"],["mat-menu-item","","data-testid","item.iconClass","role","menuitem",3,"disabled","click"],[1,"glyphicon","glyph-small","tile-menu-icon",3,"ngClass"],[1,"itemLabel"],["class","horizontal-line",4,"ngIf"],[1,"horizontal-line"]],template:function(t,i){if(1&t&&(e.\u0275\u0275elementStart(0,"button",0,1),e.\u0275\u0275listener("menuOpened",function(){return i.onMenuOpened()})("menuClosed",function(){return i.onMenuClosed()})("click",function(b){return b.stopPropagation()}),e.\u0275\u0275template(2,Un,1,1,"mat-icon",2),e.\u0275\u0275template(3,Vn,2,1,"span",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"mat-menu",4,5),e.\u0275\u0275template(6,$n,3,3,"ng-template",6),e.\u0275\u0275elementEnd()),2&t){var s=e.\u0275\u0275reference(1),c=e.\u0275\u0275reference(5);e.\u0275\u0275property("matMenuTriggerFor",c)("ngClass",e.\u0275\u0275pureFunction2(10,Wn,!0===s.menuOpen,!0===s.menuOpen)),e.\u0275\u0275attribute("aria-label",i.ariaLabel)("title",i.tooltip),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",i.menuIcon),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.label),e.\u0275\u0275advance(1),e.\u0275\u0275classMap("artifact-menu "+i.matMenuPanelClass),e.\u0275\u0275property("overlapTrigger",!1)}},dependencies:[d.NgClass,d.NgForOf,d.NgIf,d.NgSwitch,d.NgSwitchCase,gt.W0,gt.tN,gt.D8,gt.hd,Ln.Hw],styles:[".mat-menu-panel.artifact-menu{min-height:auto}.menuTrigger[_ngcontent-%COMP%]{background:none;border:none;padding:0;height:20px;width:36px}.menuTrigger[_ngcontent-%COMP%]:hover, .menuTrigger.active[_ngcontent-%COMP%], .menuTrigger.active[_ngcontent-%COMP%]:hover{background-color:transparent}.menuTrigger.cdk-keyboard-focused[_ngcontent-%COMP%], .menuTrigger.cdk-keyboard-focused[_ngcontent-%COMP%]:hover{background-color:var(--fluent-theme-neutral-quarter-alt-color, #E1DFDD)}.menuTrigger[_ngcontent-%COMP%]:focus, .menuTrigger.cdk-keyboard-focused[_ngcontent-%COMP%], .menuTrigger.cdk-program-focused[_ngcontent-%COMP%]{visibility:visible!important;outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color)}.menuTrigger[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{height:18px}.showOptions[_ngcontent-%COMP%]{visibility:visible}button.mat-menu-item[_ngcontent-%COMP%]{color:var(--fluent-theme-neutral-dark-color, #201F1E);height:36px;line-height:19px;padding:8px}button.mat-menu-item[_ngcontent-%COMP%]   .tile-menu-icon[_ngcontent-%COMP%]{vertical-align:middle;margin-right:8px}button.mat-menu-item[_ngcontent-%COMP%]:disabled{color:var(--fluent-theme-neutral-tertia-color, #A19F9D)}",".mobileDashboardConsumption[_nghost-%COMP%]   .menuTrigger[_ngcontent-%COMP%]:focus, .mobileDashboardConsumption   [_nghost-%COMP%]   .menuTrigger[_ngcontent-%COMP%]:focus, .mobileDashboardConsumption[_nghost-%COMP%]   .menuTrigger.cdk-keyboard-focused[_ngcontent-%COMP%], .mobileDashboardConsumption   [_nghost-%COMP%]   .menuTrigger.cdk-keyboard-focused[_ngcontent-%COMP%], .mobileDashboardConsumption[_nghost-%COMP%]   .menuTrigger.cdk-program-focused[_ngcontent-%COMP%], .mobileDashboardConsumption   [_nghost-%COMP%]   .menuTrigger.cdk-program-focused[_ngcontent-%COMP%]{visibility:visible!important;outline:none}  .mat-menu-panel.mobile-dashboard-menu{min-height:46px;background-color:inherit}  .mat-menu-panel.mobile-dashboard-menu .mat-menu-content{padding:8px 11px;background-color:var(--fluentThemeNeutralLighterAltColor)}  .mat-menu-panel.mobile-dashboard-menu .mat-menu-content .mat-menu-item{padding:0 10px;border:none;line-height:36px!important;height:36px!important}  .mat-menu-panel.mobile-dashboard-menu .mat-menu-content .mat-menu-item>*{line-height:36px}  .mat-menu-panel.mobile-dashboard-menu .mat-menu-content .mat-menu-item:hover:not([disabled]),   .mat-menu-panel.mobile-dashboard-menu .mat-menu-content .mat-menu-item.cdk-program-focused:not([disabled]),   .mat-menu-panel.mobile-dashboard-menu .mat-menu-content .mat-menu-item:focus{background-color:var(--fluentThemeNeutralLighterAltColor)}  .mat-menu-panel.mobile-dashboard-menu .mat-menu-content .mat-menu-item .itemLabel{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif;font-size:14px;color:var(--fluentThemeNeutralDarkColor)}  .mat-menu-panel.mobile-dashboard-menu .mat-menu-content .mat-menu-item .tile-menu-icon{color:var(--fluentThemeNeutralDarkColor);margin-right:10px!important;float:left;font-size:var(--lg-font-size, 16px);width:var(--lg-font-size, 16px);height:var(--lg-font-size, 16px)}  .mat-menu-panel.mobile-dashboard-menu .mat-menu-content .mat-menu-item .mat-icon{overflow:visible}  .mat-menu-panel.mobile-dashboard-menu .mat-menu-content .mat-menu-item .mat-icon.glyph-small{font-size:var(--lg-font-size, 16px);width:var(--lg-font-size, 16px);height:var(--lg-font-size, 16px)}  .mat-menu-panel.mobile-dashboard-menu .mat-menu-content .mat-menu-item .mat-icon.glyph-mini{font-size:var(--sm-font-size, 12px);width:var(--sm-font-size, 12px);height:var(--sm-font-size, 12px)}  .mat-menu-panel.mobile-dashboard-menu .mat-menu-content .mat-menu-item .mat-icon.mat-ligature-font[fontIcon]{overflow:auto}  .mat-menu-panel.mobile-dashboard-menu .mat-menu-content .tile-menu-item .horizontal-line{border:.5px solid var(--fluentThemeNeutralQuarterAltColor);display:inherit}  .mat-menu-panel.mobile-dashboard-menu .mat-menu-content .tile-menu-item:last-child .horizontal-line{display:none}"]}),r}(),Hn=n(86663),_n=function(){function r(){}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=e.\u0275\u0275defineComponent({type:r,selectors:[["loading-tile"]],inputs:{messageKey:"messageKey"},decls:3,vars:1,consts:[[1,"body"],["name","powerbi","size","large",1,"logo"],["for","message",3,"localize"]],template:function(t,i){1&t&&(e.\u0275\u0275elementStart(0,"section",0),e.\u0275\u0275element(1,"pbi-icon",1)(2,"label",2),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("localize",i.messageKey))},dependencies:[me.X,Hn._],styles:["[_nghost-%COMP%]{color:var(--neutral-primary-color-alt2, #4a4a4a);font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif;font-size:12px;height:100%;line-height:16px;width:100%;display:block;background-color:var(--white-color, #FFF);overflow:hidden;text-decoration:none}[_nghost-%COMP%]   .body[_ngcontent-%COMP%]{width:100%;height:calc(100% - 46px);display:flex;align-items:center;justify-content:center;flex-wrap:wrap;flex-direction:column}[_nghost-%COMP%]   .body[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{color:var(--neutral-tertiary-alt-color, #C8C8C8)}[_nghost-%COMP%]   .body[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;padding-top:1px}"],changeDetection:0}),r}(),Tt=n(22318),Qn=n(14181),Jn=function(){function r(){}return r.prototype.filterNotifications=function(o,t){return _.isEmpty(o)?[]:null==(t=t||this.tileId)?o:_.filter(o,function(i){var s=i.message,c=s.filterProperties&&s.filterProperties.TileId;if(_.isEmpty(c))return!1;var u=parseInt(c,10);return(2===i.action.actionType||3===i.action.actionType)&&u===t})},r.\u0275prov=e.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac=function(t){return new(t||r)},providedIn:"root"}),r}();function Kn(r,o){if(1&r&&e.\u0275\u0275element(0,"span",4),2&r){var t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275property("innerHtml",t.badgeValueSetter(),e.\u0275\u0275sanitizeHtml)}}function Yn(r,o){if(1&r){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",2),e.\u0275\u0275listener("click",function(c){e.\u0275\u0275restoreView(t);var u=e.\u0275\u0275nextContext().$implicit,b=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(b.onIconClick(u,c))}),e.\u0275\u0275element(1,"i"),e.\u0275\u0275template(2,Kn,1,1,"span",3),e.\u0275\u0275elementEnd()}if(2&r){var i=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275classMapInterpolate1("item-auto ",i.itemClass,""),e.\u0275\u0275propertyInterpolate("testid",i.itemClass),e.\u0275\u0275propertyInterpolate("title",i.tooltip()),e.\u0275\u0275advance(1),e.\u0275\u0275classMapInterpolate1("glyphicon glyph-small ",i.iconClass,""),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.hasBadge)}}function Zn(r,o){if(1&r&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Yn,3,9,"button",1),e.\u0275\u0275elementContainerEnd()),2&r){var t=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.show())}}var Xn=function(r){function o(t,i,s,c,u){var b=r.call(this)||this;return b.store=t,b.localizationService=i,b.userNotificationInfo=s,b.userNotificationTileFilterService=c,b.tileDisplayService=u,b}return(0,g.ZT)(o,r),o.prototype.ngOnInit=function(){var t=this,i=this.store.select(Ye.JW).pipe((0,V.R)(this.onDestroy$),(0,oe.U)(function(s){return!(!s||!s.some(function(c){var u;return c&&c.id===(null===(u=t.contract)||void 0===u?void 0:u.id)}))}));this.icons$=(0,G.aj)([this.changes$("contract").pipe((0,Tt.O)(this.contract)),this.changes$("tileHasWarning").pipe((0,Tt.O)(this.tileHasWarning)),this.changes$("warningMessage").pipe((0,Tt.O)(this.warningMessage)),i,this.getUnseenCount()]).pipe((0,oe.U)(function(s){var c=s[0],b=s[2];return{isTemporary:!(!c||!c.isTemporary),tileType:c&&c.type,warningToolTip:b&&b.tooltip,notificationsCount:s[4],isSpotlightSet:s[3],hasWarning:!!s[1]}}),(0,Fe.x)(function(s,c){return _.isEqual(s,c)}),(0,oe.U)(function(s){return t.getIcons(s)}))},o.prototype.getIcons=function(t){return function(r,o){ct.fF.assertValue(r,"createOptions");var t=r.localizationService;return[{iconClass:"pbi-glyph-securityalert",show:r.showWebContent,itemClass:"webContentIcon",tooltip:function(){return t.get("WebContentWarning_Widget")},action:2,hasBadge:!1},{iconClass:"pbi-glyph-warning",show:r.showWarning,itemClass:o?"showWarningIcon":"warningIcon",tooltip:r.warningToolTipSetter,action:1,hasBadge:!1},{iconClass:"pbi-glyph-bell",show:r.showNotifications,itemClass:"notifications",tooltip:function(){return t.get("Alerts_NotificationTooltip")},action:0,badgeValueSetter:r.badgeTextSetter,hasBadge:!0},{iconClass:"pbi-glyph-realtime",show:r.showRealTime,itemClass:"",tooltip:function(){return t.get("Realtime_IconHoverText")},hasBadge:!1}]}({badgeTextSetter:function(){return t.notificationsCount+""},localizationService:this.localizationService,showNotifications:function(){return t.notificationsCount>0},showWarning:function(){return t.hasWarning},showWebContent:function(){return t.tileType===p.YU.iframe&&!t.isTemporary},showRealTime:function(){return t.tileType===p.YU.realTime},warningToolTipSetter:function(){return t.warningToolTip}},t.isSpotlightSet)},o.prototype.getUnseenCount=function(){var i,t=this,s=null===(i=this.contract)||void 0===i?void 0:i.id,c=this.userNotificationInfo;return s&&c&&c.notifications$?c.notifications$.pipe((0,oe.U)(function(u){var b,z=null!==(b=u?.notifications)&&void 0!==b?b:[];return _.filter(t.userNotificationTileFilterService.filterNotifications(z,s),function(w){return!w.seen}).length},(0,Tt.O)(0))):(0,Y.of)(0)},o.prototype.onIconClick=function(t,i){if(i.stopPropagation&&i.stopPropagation(),i.preventDefault(),null!=t.action)switch(t.action){case 0:this.store.dispatch(new Qn.MM({sidePaneType:7}));break;case 2:this.tileDisplayService.onErrorIconClicked({message:t.tooltip()});break;case 1:this.tileDisplayService.onErrorIconClicked({isError:void 0,errorTitle:void 0,errorDetails:void 0,message:t.tooltip()});break;default:ct.fF.assertFail("Unrecognized/unsupported icon action.")}},o.\u0275fac=function(i){return new(i||o)(e.\u0275\u0275directiveInject(ft.yh),e.\u0275\u0275directiveInject(ve.o),e.\u0275\u0275directiveInject(Ve.r),e.\u0275\u0275directiveInject(Jn),e.\u0275\u0275directiveInject(lt.k))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["tile-icon"]],inputs:{contract:"contract",tileHasWarning:"tileHasWarning",warningMessage:"warningMessage"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:[[4,"ngFor","ngForOf"],[3,"testid","class","title","click",4,"ngIf"],[3,"testid","title","click"],["class","badge",3,"innerHtml",4,"ngIf"],[1,"badge",3,"innerHtml"]],template:function(i,s){1&i&&(e.\u0275\u0275template(0,Zn,2,1,"ng-container",0),e.\u0275\u0275pipe(1,"async")),2&i&&e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(1,1,s.icons$))},dependencies:[d.NgForOf,d.NgIf,d.AsyncPipe],styles:[".webContentIcon[_ngcontent-%COMP%]{left:4px;top:1px;z-index:2;color:var(--fluent-theme-neutral-secondary-alt-color, #767676)}.webContentCorner[_ngcontent-%COMP%]{display:block;position:absolute;background:var(--fluent-theme-white-color, #FFF);width:60px;height:60px;top:-30px;left:-30px;transform:rotate(45deg);z-index:1;border:1px solid var(--fluent-theme-neutral-light-color, #EDEBE9)}.warningIcon[_ngcontent-%COMP%]{color:var(--fluent-theme-primary-color, #F2C811);display:none}.warningIcon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--fluent-theme-primary-color, #F2C811)}.showWarningIcon[_ngcontent-%COMP%]{color:var(--fluent-theme-primary-color, #F2C811);display:block}.showWarningIcon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--fluent-theme-primary-color, #F2C811)}",".mobileDashboard.noTitle[_nghost-%COMP%]   .webContentIcon[_ngcontent-%COMP%], .mobileDashboard   .noTitle[_nghost-%COMP%]   .webContentIcon[_ngcontent-%COMP%]{left:4px;top:1px;z-index:2}.mobileDashboard[_nghost-%COMP%]   .webContentIcon[_ngcontent-%COMP%], .mobileDashboard   [_nghost-%COMP%]   .webContentIcon[_ngcontent-%COMP%]{color:var(--fluent-theme-neutral-secondary-alt-color, #767676);position:inherit}.mobileDashboard[_nghost-%COMP%]   .warningIcon[_ngcontent-%COMP%], .mobileDashboard   [_nghost-%COMP%]   .warningIcon[_ngcontent-%COMP%]{color:var(--fluent-theme-primary-color, #F2C811);display:block}.mobileDashboard[_nghost-%COMP%]   .warningIcon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .mobileDashboard   [_nghost-%COMP%]   .warningIcon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--fluent-theme-primary-color, #F2C811)}.mobileDashboard[_nghost-%COMP%]   .item-auto.notifications[_ngcontent-%COMP%], .mobileDashboard   [_nghost-%COMP%]   .item-auto.notifications[_ngcontent-%COMP%]{display:none}"],changeDetection:0}),o}(ot.w),qn=n(85102);function ei(r,o){1&r&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275element(1,"loading-tile",4),e.\u0275\u0275elementContainerEnd()),2&r&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("messageKey","PermissionCenter_LoadingTile"))}function ti(r,o){1&r&&e.\u0275\u0275element(0,"permission-locked-tile")}function ni(r,o){if(1&r&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,ei,2,1,"ng-container",2),e.\u0275\u0275template(2,ti,1,0,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementContainerEnd()),2&r){var t=e.\u0275\u0275reference(3),i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!i.isRefreshPermission())("ngIfElse",t)}}function ii(r,o){if(1&r&&e.\u0275\u0275element(0,"license-blocker",23),2&r){var t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("visualType",null==t.visualDefinition?null:t.visualDefinition.type)("tileObjectId",t.contract.objectId)}}function oi(r,o){if(1&r&&e.\u0275\u0275element(0,"license-environment-blocker",24),2&r){var t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("visualType",null==t.visualDefinition?null:t.visualDefinition.type)}}function ri(r,o){if(1&r){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"license-banner",25),e.\u0275\u0275listener("isAnimationDone",function(){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(c.licenseUIManager.clearBanner())}),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275elementEnd()}if(2&r){var i=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("featureBlockedTooltip",i.licenseUIManager.featureBlockedTooltip)("shouldStartBannerLeaveAnimation",e.\u0275\u0275pipeBind1(1,3,i.licenseUIManager.shouldStartBannerLeaveAnimation$))("visualType",null==i.visualDefinition?null:i.visualDefinition.type)}}function ai(r,o){if(1&r&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,ii,1,2,"license-blocker",20),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275template(3,oi,1,1,"license-environment-blocker",21),e.\u0275\u0275pipe(4,"async"),e.\u0275\u0275template(5,ri,2,5,"license-banner",22),e.\u0275\u0275pipe(6,"async"),e.\u0275\u0275elementContainerEnd()),2&r){var t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(2,3,t.licenseUIManager.shouldDisplayLicenseBlocker$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(4,5,t.licenseUIManager.shouldDisplayLicenseEnvironmentBlocker$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(6,7,t.licenseUIManager.shouldDisplayFeatureBlockedBanner$))}}function si(r,o){1&r&&(e.\u0275\u0275elementStart(0,"div",26),e.\u0275\u0275element(1,"div",27),e.\u0275\u0275elementStart(2,"button",28),e.\u0275\u0275element(3,"i",29),e.\u0275\u0275elementEnd()())}function li(r,o){1&r&&(e.\u0275\u0275elementStart(0,"span",30),e.\u0275\u0275text(1,"\u2022"),e.\u0275\u0275elementEnd())}function ci(r,o){if(1&r){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",31),e.\u0275\u0275listener("click",function(s){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(c.onSelectTileConversations(s))}),e.\u0275\u0275element(1,"i",32),e.\u0275\u0275elementEnd()}}var di=function(o){return{showUnpin:o}};function ui(r,o){if(1&r){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",35),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(c.onUnpinTileMobileView.emit(c.contract))}),e.\u0275\u0275pipe(1,"localize"),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275elementEnd()}if(2&r){var i=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(7,di,i.focusedTileObjId===(null==i.contract?null:i.contract.objectId)))("title",e.\u0275\u0275pipeBind1(2,5,"DashboardTile_unpinTile")),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(1,3,"DashboardTile_unpinTile"))}}function pi(r,o){if(1&r){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",36),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var s=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(s.onPinTileMobileView.emit(s.contract))}),e.\u0275\u0275pipe(1,"localize"),e.\u0275\u0275elementEnd()}2&r&&e.\u0275\u0275property("title",e.\u0275\u0275pipeBind1(1,1,"DashboardTile_ToggleVisibility"))}function hi(r,o){if(1&r&&(e.\u0275\u0275elementStart(0,"section"),e.\u0275\u0275template(1,ui,3,9,"button",33),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275template(3,pi,2,3,"button",34),e.\u0275\u0275pipe(4,"async"),e.\u0275\u0275elementEnd()),2&r){var t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!e.\u0275\u0275pipeBind1(2,2,t.isUnpinnedTileMobileView$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(4,4,t.isUnpinnedTileMobileView$))}}function vi(r,o){if(1&r){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tileoptions-context-menu",37),e.\u0275\u0275listener("currentMenuItemIdChange",function(c){e.\u0275\u0275restoreView(t);var u=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(u.onMenuItemChanged(c))}),e.\u0275\u0275pipe(1,"localize"),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275elementEnd()}if(2&r){var i=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("dashboard",i.dashboard)("tile",i.contract)("ariaLabel",e.\u0275\u0275pipeBind1(1,5,"Options_Menu"))("tooltip",e.\u0275\u0275pipeBind1(2,7,"Options_Menu"))("visualDefinition",i.visualDefinition)}}function fi(r,o){1&r&&(e.\u0275\u0275elementStart(0,"div",47),e.\u0275\u0275element(1,"div",48),e.\u0275\u0275elementEnd())}function mi(r,o){if(1&r){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"visual-modern",50),e.\u0275\u0275listener("click",function(c){e.\u0275\u0275restoreView(t);var u=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(u.onVisualModernClick(c))})("visualReady",function(){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(c.onVisualDataChanged())}),e.\u0275\u0275elementEnd()}if(2&r){var i=e.\u0275\u0275nextContext(4);e.\u0275\u0275property("viewModel",i.visualDefinition)("supportsScreenReader",!0)("allowDeferredRendering",i.allowDeferredRendering)("supportsKeyboardNavigation",!1)("useOnPushChangeDetection",!0)}}function gi(r,o){if(1&r&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,mi,1,5,"visual-modern",49),e.\u0275\u0275elementContainerEnd()),2&r){var t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.visualDefinition&&t.themeLoaded)}}function yi(r,o){if(1&r&&e.\u0275\u0275element(0,"image-tile",51),2&r){var t=e.\u0275\u0275nextContext().ngIf,i=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("imageUrl",null==t?null:t.imageUrl)("altText",i.getAltText(t))}}function Ci(r,o){if(1&r&&e.\u0275\u0275element(0,"ssrs-tile",52),2&r){var t=e.\u0275\u0275nextContext().ngIf;e.\u0275\u0275property("imageUrl",null==t?null:t.imageUrl)}}function bi(r,o){if(1&r&&e.\u0275\u0275element(0,"iframe-tile",53),2&r){var t=e.\u0275\u0275nextContext().ngIf;e.\u0275\u0275property("viewModel",t)("embedCode",t.embedCode)}}function Ti(r,o){1&r&&e.\u0275\u0275element(0,"model-tile")}function Pi(r,o){if(1&r&&e.\u0275\u0275element(0,"workbook-tile",54),2&r){var t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("viewModel",t.contract)("config",t.contract.$config)}}function Mi(r,o){if(1&r&&e.\u0275\u0275element(0,"pbi-lazy-load",56),2&r){var t=e.\u0275\u0275nextContext(4);e.\u0275\u0275property("modulePath",t.realTimeTileLazyPath)("componentId",t.RealTimeTileComponentId)("inputArgs",t.realTimeTileModernInputArgs)("outputArgs",t.realTimeOutputArgs)}}function Ii(r,o){if(1&r&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Mi,1,4,"pbi-lazy-load",55),e.\u0275\u0275elementContainerEnd()),2&r){var t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==t.realTimeTileModernInputArgs?null:t.realTimeTileModernInputArgs.initialVisual)}}function Si(r,o){if(1&r){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"report-tile",57),e.\u0275\u0275listener("click",function(c){e.\u0275\u0275restoreView(t);var u=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(u.onReportTileBodyClick(c))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&r){var i=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275property("contract",i.contract)("odataFilters",i.odataFilters)("config",i.contract.$config)}}function xi(r,o){if(1&r&&e.\u0275\u0275element(0,"error-placeholder",58),2&r){var t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("errorText",t.tileErrorDetails.message)("errorDetails",t.tileErrorDetails.showSeeDetails?t.tileErrorDetails:null)("tileType",t.contract.type)}}var Oi=function(o,t,i,s){return{interactionDisabled:o,paddedTile:t,textboxTile:i,"license-blockers-element-style":s}};function Di(r,o){if(1&r&&(e.\u0275\u0275elementStart(0,"div",38),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275template(3,fi,2,0,"div",39),e.\u0275\u0275elementContainerStart(4,40),e.\u0275\u0275template(5,gi,2,1,"ng-container",41),e.\u0275\u0275template(6,yi,1,2,"image-tile",42),e.\u0275\u0275template(7,Ci,1,1,"ssrs-tile",43),e.\u0275\u0275template(8,bi,1,2,"iframe-tile",44),e.\u0275\u0275template(9,Ti,1,0,"model-tile",41),e.\u0275\u0275template(10,Pi,1,2,"workbook-tile",45),e.\u0275\u0275template(11,Ii,2,1,"ng-container",41),e.\u0275\u0275template(12,Si,2,3,"ng-container",41),e.\u0275\u0275template(13,xi,1,3,"error-placeholder",46),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()),2&r){var t=e.\u0275\u0275nextContext(2);e.\u0275\u0275classProp("compositeTileBody",t.contract.type===t.tileType.composite),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction4(18,Oi,t.inEditMobileLayoutMode,t.contract.type===t.tileType.composite,(null==t.visualDefinition?null:t.visualDefinition.type)===t.plugins.textbox.name,e.\u0275\u0275pipeBind1(1,14,t.licenseUIManager.shouldDisplayLicenseBlocker$)||e.\u0275\u0275pipeBind1(2,16,t.licenseUIManager.shouldDisplayLicenseEnvironmentBlocker$))),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",t.contract.type===t.tileType.composite?t.isLoading||!t.themeLoaded:t.isLoading),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitch",t.contract.type),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",t.tileType.composite),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",t.tileType.image),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",t.tileType.ssrs),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",t.tileType.iframe),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",t.tileType.model),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",t.tileType.workbook),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",t.tileType.realTime),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",t.tileType.report),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.tileErrorDetails&&!t.shouldShowTileVisual(t.contract))}}function Ei(r,o){1&r&&(e.\u0275\u0275element(0,"div",59),e.\u0275\u0275pipe(1,"localize")),2&r&&e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(1,1,"New_Capitalized"))}var wi=function(o,t){return{sensitivityBanner:o,sensitivityBannerExpanded:t}},Fi=function(o){return{showOptions:o}};function Ri(r,o){if(1&r){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,ai,7,9,"ng-container",1),e.\u0275\u0275elementStart(2,"div",5),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275pipe(4,"async"),e.\u0275\u0275pipe(5,"async"),e.\u0275\u0275template(6,si,4,0,"div",6),e.\u0275\u0275pipe(7,"async"),e.\u0275\u0275elementStart(8,"header",7),e.\u0275\u0275listener("click",function(c){e.\u0275\u0275restoreView(t);var u=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(u.onTileHeaderClick(c))}),e.\u0275\u0275element(9,"tile-icon",8),e.\u0275\u0275elementStart(10,"div",9)(11,"section")(12,"div",10),e.\u0275\u0275pipe(13,"async"),e.\u0275\u0275text(14),e.\u0275\u0275pipe(15,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"div",11)(17,"span",12),e.\u0275\u0275pipe(18,"async"),e.\u0275\u0275text(19),e.\u0275\u0275pipe(20,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(21,li,2,0,"span",13),e.\u0275\u0275pipe(22,"async"),e.\u0275\u0275pipe(23,"async"),e.\u0275\u0275elementStart(24,"span",14),e.\u0275\u0275pipe(25,"async"),e.\u0275\u0275text(26),e.\u0275\u0275pipe(27,"async"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(28,ci,2,0,"button",15),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(29,hi,5,6,"section",1),e.\u0275\u0275elementStart(30,"div",16),e.\u0275\u0275template(31,vi,3,9,"tileoptions-context-menu",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(32,Di,14,23,"div",18),e.\u0275\u0275pipe(33,"async"),e.\u0275\u0275template(34,Ei,2,3,"div",19),e.\u0275\u0275pipe(35,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&r){var i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.licenseUIManager),e.\u0275\u0275advance(1),e.\u0275\u0275classProp("largeHeader",i.isLargeHeader)("noTitle",!e.\u0275\u0275pipeBind1(3,33,i.hasTitle$))("noSubtitle",!e.\u0275\u0275pipeBind1(4,35,i.hasSubtitle$)&&e.\u0275\u0275pipeBind1(5,37,i.hasTitle$)),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",(null==i.contract?null:i.contract.type)===i.tileType.iframe&&!e.\u0275\u0275pipeBind1(7,39,i.hasTitle$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(61,wi,i.hasSensitivityBanner&&!i.hasExpandSensitivityBanner,i.hasExpandSensitivityBanner)),e.\u0275\u0275advance(1),e.\u0275\u0275property("contract",i.contract)("tileHasWarning",i.tileHasWarning)("warningMessage",i.warning),e.\u0275\u0275advance(3),e.\u0275\u0275styleMap(i.tileHeaderStyle),e.\u0275\u0275property("title",e.\u0275\u0275pipeBind1(13,41,i.title$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(15,43,i.title$)),e.\u0275\u0275advance(3),e.\u0275\u0275styleMap(i.tileHeaderStyle),e.\u0275\u0275property("title",e.\u0275\u0275pipeBind1(18,45,i.subTitle$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(20,47,i.subTitle$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(22,49,i.subTitle$)&&e.\u0275\u0275pipeBind1(23,51,i.refreshTime$)),e.\u0275\u0275advance(3),e.\u0275\u0275styleMap(i.tileHeaderStyle),e.\u0275\u0275property("title",e.\u0275\u0275pipeBind1(25,53,i.refreshTime$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(27,55,i.refreshTime$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",i.showComments),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.inEditMobileLayoutMode),e.\u0275\u0275advance(1),e.\u0275\u0275styleMap(i.tileBackground),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(64,Fi,!i.isMouseoverSupported||i.focusedTileObjId===(null==i.contract?null:i.contract.objectId)||i.isMenuOpen)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.displayDashboardTileOpenOptions()&&!i.isLoading),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(33,57,i.viewModel$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(35,59,i.isNewMobileTile$))}}var zi=function(o,t,i){return{selectedTile:o,hideSpotlight:t,smallTitleWidth:i}},Li=function(r){function o(t,i,s,c,u,b,z,y,w,te,He,De,Te,Pe,pt,dt,vt,yt,It,St,xt,Ot,Dt,Et,Ui,Vi,ji,Bi,Ai,Ni,$i,Wi,ki){var wt,P=this;(P=r.call(this)||this).elementRef=t,P.featureSwitchService=i,P.visualPlugins=s,P.themeService=c,P.dashboardThemeService=u,P.ref=b,P.tileConfigService=z,P.tileDataService=y,P.shellCapabilities=w,P.localizationService=te,P.userNotificationInfo=He,P.promiseFactory=De,P.resourceLoader=Te,P.resourcePackagesService=Pe,P.globalEventBridge=pt,P.eventBridge=dt,P.licenseUIManagerFactory=vt,P.licenseEnforcementService=yt,P.userInfo=It,P.scriptVisuals=St,P.tileUtilService=xt,P.tileDisplayService=Ot,P.store=Dt,P.reportStore=Et,P.telemetryService=Ui,P.platformCapabilities=Vi,P.managedCustomVisualsService=ji,P.approvedResourceService=Bi,P.trustedVisual=Ai,P.networkAvailability=Ni,P.tileDataUtilsService=$i,P.hostEnv=Wi,P.tileHeaderClickService=ki,P.themeName=null,P.onSelectConverstations=new e.EventEmitter,P.onErrorAdd=new e.EventEmitter,P.onErrorRemove=new e.EventEmitter,P.onPinTileMobileView=new e.EventEmitter,P.onUnpinTileMobileView=new e.EventEmitter,P.currentRetry=0,P.plugins=q.L,P.tileType=p.YU,P.allowDeferredRendering=!1,P.isOnPushChangeDetection=!0,P.RealTimeTileComponentId="RealTimeTileComponentNewId",P.realTimeTileLazyPath="@powerbi/RealTime/real-time.module#RealTimeModule",P.isTileDisabledSubject=new j.t(1),P.isLoading=!0,P.themeLoaded=!1,P.isSmallTitleWidth=!1,P.visualDefChanged$=new j.t,P.visualDefDataError$=new B.X(null),P.isMenuOpen=!1,P.isExportError=!1,P.isMouseoverSupported=P.platformCapabilities.supportsMouseover;var Ft,Hi=Ee.s.parseQueryString(window.location.search);return P.disableSensitivityBanner="true"===Hi.disableSensitivityBanner,P.licenseUIManager=P.licenseUIManagerFactory.create(),P.globalSubscriptionManager=P.globalEventBridge.createChannelSubscriptionManager().subscribe(Le.lH,function(ht,Ct){P.handleSensitivity(Ct)}),P.globalSubscriptionManager.subscribe(Le.m,function(ht,Ct){P.contract.type===p.YU.composite&&_.find(Ct.modelIds,function(_i){return P.contract.modelId===_i})&&(P.tileErrorDetails={message:P.localizationService.get("Tile_RLS_NoAccess"),displayableErrorInfo:[]},P.isError=!0,P.visualDefinition=null,P.ref.markForCheck())}),null===(wt=P.eventBridge)||void 0===wt||wt.createChannelSubscriptionManager().subscribe(Le.OM,function(ht,Ct){P.refreshViewPortSize(Ct),P.ref.markForCheck()}),P.userNotificationInfo.registerNotificationsUpdatedListener&&P.userNotificationInfo.registerNotificationsUpdatedListener(function(){return P.onNotificationsUpdated()}).then(function(ht){Ft=ht}),P.onDestroy$.subscribe(function(){var ht;null===(ht=P.resizeObserver)||void 0===ht||ht.disconnect(),P.globalSubscriptionManager.unsubscribeAll(),Ft&&Ft()}),P.visualDefChanged$.next(!1),P}return(0,g.ZT)(o,r),o.prototype.onVisualDataChanged=function(){this.globalEventBridge.publishToChannel(je.z.tileVisualLoadedEventName,{objectId:this.contract.objectId})},o.prototype.isTileLocked=function(t){return 20===t},o.prototype.isRefreshPermission=function(){return this.userInfo.isUserMetadataRefreshed},o.prototype.refreshViewPortSize=function(t){var i;void 0===t&&(t=1);var s=this.elementRef.nativeElement.querySelector(".tile-body");s&&(this.viewPort={height:s.clientHeight,width:s.clientWidth,scale:t},this.visualDefinition&&this.contract.type!==p.YU.realTime?(this.visualDefinition.viewport=this.viewPort,this.allowDeferredRendering=!this.visualPlugins.isLightWeightRenderingVisual(this.visualDefinition.type)):(null===(i=this.contract)||void 0===i?void 0:i.type)===p.YU.realTime&&this.realTimeTileModernInputArgs&&this.realTimeTileModernInputArgs.initialVisual&&(this.realTimeTileModernInputArgs.initialVisual.viewport=this.viewPort))},o.prototype.refreshTileBodySize=function(){var t=this.elementRef.nativeElement.querySelector(".tile-body");!t||!this.tileBodyViewPort||(this.availableTileBodyHeight>this.tileBodyViewPort.height&&(t.style.height=this.tileBodyViewPort.height.toString()+"px"),this.availableTileBodyWidth>this.tileBodyViewPort.width&&(t.style.width=this.tileBodyViewPort.width.toString()+"px"),this.refreshViewPortSize())},o.prototype.ngOnInit=function(){var t=this;this.subscribeToTile(),this.onChanges$.subscribe(function(i){i.themeName&&i.themeName.currentValue!==i.themeName.previousValue&&t.applyTheme(),i.tileBodyViewPort&&i.tileBodyViewPort.currentValue!==i.tileBodyViewPort.previousValue&&t.refreshTileBodySize()})},o.prototype.ngAfterViewInit=function(){var t=this,i=this.elementRef.nativeElement.querySelector(".tile-body");i&&(this.availableTileBodyHeight=i.clientHeight,this.availableTileBodyWidth=i.clientWidth),this.refreshTileBodySize(),(this.inEditMobileLayoutMode||32===this.hostEnv)&&(this.resizeObserver=new ResizeObserver(function(){t.calculateSmallTileWidth(),t.ref.detectChanges()}),this.resizeObserver.observe(this.elementRef.nativeElement.querySelector(".tileLayout")),this.calculateSmallTileWidth(),this.ref.detectChanges())},o.prototype.displayDashboardTileOpenOptions=function(){return!this.disableInteractions&&(!!(0,ze.I$)()||(!this.isTileLocked(this.contract.errorCode)||!this.isReadOnly())&&this.contract&&!this.contract.isTemporary&&!this.inEditMobileLayoutMode)},o.prototype.isReadOnly=function(){return!(0,W.cl)(this.dashboard)||this.disableInteractions},o.prototype.applyTheme=function(){var t,i,s,c=null===(t=this.contract)||void 0===t?void 0:t.type;if(c===p.YU.composite&&this.visualDefinition){var u=this.visualDefinition.themeCollection,b=null===(i=u?.customTheme)||void 0===i?void 0:i.name;if(this.shouldOverrideCustomTheme||!this.isCustomThemeFromReport(b)){var z=null===(s=this.dashboard)||void 0===s?void 0:s.objectId,y=this.themeName||z&&this.dashboardThemeService.getDashboardThemeName(z);if(!y)return this.tileStyle=void 0,this.tileHeaderStyle=void 0,this.tileBackground=void 0,delete this.visualDefinition.themeCollection.customTheme,void(this.shouldOverrideCustomTheme?(this.visualDefinition.themeCollection.customTheme=(0,Re.Mi)(y,1),this.themeLoaded=!0):this.ensureThemeLoaded());this.tileStyle=this.dashboardThemeService.getTileStyles(y),this.tileHeaderStyle=_.pick(this.tileStyle,Se.dj),this.tileBackground=_.pick(this.tileStyle,Se.CB),this.visualDefinition.themeCollection.customTheme=(0,Re.Mi)(y,1),this.ensureThemeLoaded()}else this.ensureThemeLoaded()}else this.themeLoaded=!!this.visualDefinition||c!==p.YU.composite},o.prototype.updateVisualInteractivityOptions=function(t){if(t.type===p.YU.composite&&this.visualDefinition){var i=this.visualPlugins.getInteractivityOptions(this.visualDefinition.type);typeof i.mobileTileInteractive<"u"&&(i.mobileTileInteractive=i.mobileTileInteractive&&this.mobileTileInteractive),this.visualDefinition.interactivityOptions=i}},o.prototype.isCustomThemeFromReport=function(t){return t&&!this.dashboardThemeService.isBuiltInTheme(t)&&!this.dashboardThemeService.isLegacyThemeName(t)&&!this.dashboardThemeService.getTheme(t)},o.prototype.ensureThemeLoaded=function(){var t;this.dashboardThemeService&&this.dashboard&&this.dashboardThemeService.isDashboardThemeLoaded?this.dashboardThemeService.isDashboardThemeLoaded(null===(t=this.dashboard)||void 0===t?void 0:t.objectId)&&this.loadThemeAndBaseTheme():this.loadThemeAndBaseTheme()},o.prototype.loadThemeAndBaseTheme=function(){var t=this;if(32===this.hostEnv&&!this.networkAvailability.isNetworkAvailable())return this.themeLoaded=!0,void this.ref.markForCheck();et.P.loadThemeAndBaseTheme(this.promiseFactory,this.resourceLoader,this.themeService,this.resourcePackagesService.getAllPackages(),this.visualDefinition.themeCollection).finally(function(){t.themeLoaded=!0,t.ref.markForCheck()})},o.prototype.customVisualValidation=function(t,i){return(0,g.mG)(this,void 0,void 0,function(){var s,c,u,b,z=this;return(0,g.Jh)(this,function(y){switch(y.label){case 0:return t.type!==p.YU.composite?(this.isTileDisabledSubject.next(!1),[2]):(this.validateExportTileDisplayError(i),s=(0,S.s)(i),this.trustedVisual.isEsriVisual(s)&&(c=this.trustedVisual.validate(s))?(this.globalSubscriptionManager.subscribe(We.W,function(w,te){_.includes(te.visualTypes,s)&&(z.onClearTileError(),z.isTileDisabledSubject.next(!1))}),c.hideGetHelpLink=!1,c.showSeeDetails=!0,this.onTileError({error:c.message,errorDetails:c}),[2]):this.visualPlugins.getPlugin(s)&&!this.visualPlugins.isCustomVisual(s)?(this.isTileDisabledSubject.next(!1),[2]):[4,this.managedCustomVisualsService.isPublicManagedVisualByVisualType(s)]);case 1:return u=y.sent(),(b=(0,qe.jK)(this.featureSwitchService,s,this.approvedResourceService,!1,u))||(0,qe.qe)(s)?(this.validateVisualPluginHandler(s,b),[2]):(this.isTileDisabledSubject.next(!1),[2])}})})},o.prototype.validateVisualPluginHandler=function(t,i){var s=this;this.resourcePackagesService.getPackage(t)&&!this.visualPlugins.getPlugin(t)?this.globalSubscriptionManager.subscribe(We.W,function(c,u){_.includes(u.visualTypes,t)?s.validateVisualPlugin(t,i):s.isTileDisabledSubject.next(!1)}):this.validateVisualPlugin(t,i)},o.prototype.validateVisualPlugin=function(t,i){if(this.visualPlugins.isCustomVisual(t)){if(i)return void this.showCustomVisualDisabledMessage();if((0,qe.qe)(t)&&!this.resourcePackagesService.getPackage(t))return void this.showCustomVisualDeletedMessage()}this.isTileDisabledSubject.next(!1)},o.prototype.showCustomVisualDisabledMessage=function(){var t,i,s,c=this.localizationService.get("ContactYourAdministratorForDetails"),u=this.featureSwitchService.featureSwitches;u.customVisualsTenantSwitch&&!u.customVisualsTenantEnabled?(t=this.localizationService.get("VisualContainer_CustomVisualDisabledByAdmin"),i="https://go.microsoft.com/fwlink/?linkid=2100000",s=this.localizationService.get("VisualContainer_CustomVisualDisabledByAdmin_tileDetails")):(t=this.localizationService.get("VisualContainer_UncertifiedDisabledValue"),i="https://go.microsoft.com/fwlink/?linkid=2002010&clcid=0x409",s=this.localizationService.get("VisualContainer_UncertifiedDisabledValue_tileDetails"));var b={message:t,displayableErrorInfo:[{errorInfoKey:s,errorInfoValue:c}],hideAdditionalErrorInfo:!0,hideGetHelpLink:!1,helpLink:i,showSeeDetails:!0};this.visualDefinition=null,this.isTileDisabledSubject.next(!0),this.onTileError({error:s,errorDetails:b})},o.prototype.showCustomVisualDeletedMessage=function(){var t=this.localizationService.get("CustomVisualsAreNotAvailable"),i=this.localizationService.get("ServiceError_CannotLoadVisual"),c={message:t,displayableErrorInfo:[{errorInfoKey:i,errorInfoValue:this.localizationService.get("CustomVisualsAreNotAvailable")}],hideAdditionalErrorInfo:!0,hideGetHelpLink:!1,helpLink:"https://go.microsoft.com/fwlink/?LinkID=690865",showSeeDetails:!0};this.visualDefinition=null,this.isTileDisabledSubject.next(!0),this.onTileError({error:i,errorDetails:c})},o.prototype.validateExportTileDisplayError=function(t){var i=this.tileDisplayService.getTileDisplayErrorFromConfig(t);i&&(this.onTileError({error:i.errorTitle,errorDetails:{message:i.errorTitle,displayableErrorInfo:[{errorInfoKey:i.errorTitle,errorInfoValue:i.errorTitle}],hideAdditionalErrorInfo:!0,hideGetHelpLink:!0,helpLink:"",showSeeDetails:!1}}),this.isExportError=!0)},o.prototype.ensureTileConfig=function(t){t.$config||this.tileConfigService.parseTileConfig(t)},o.prototype.subscribeToTile=function(){var t=this,i=this.isTileDisabledSubject.pipe((0,pe.q)(1)),s=this.changes$("contract").pipe((0,ge.h)(function(y){return!!y}),(0,oe.U)(function(y){return t.ensureTileConfig(y),y})),c=s.pipe((0,Fe.x)(function(y,w){return t.isTileBodyEqual(y,w)}));this.title$=(0,G.aj)([s,this.visualDefChanged$]).pipe((0,oe.U)(function(y){var w=y[0];return t.tileConfigService.getDisplayText(w,w.$config,t.visualDefinition)})),this.hasTitle$=this.title$.pipe((0,oe.U)(function(y){var w,te;return!(null!==(te=null===(w=t.contract)||void 0===w?void 0:w.$config)&&void 0!==te&&te.hideTitle||!y)})),this.subTitle$=s.pipe((0,oe.U)(function(y){return t.tileConfigService.getSubDisplayText(y,y.$config)})),this.hasSubtitle$=this.subTitle$.pipe((0,oe.U)(function(y){var w,te=null===(w=t.contract)||void 0===w?void 0:w.$config;return!te?.hideTitle&&(!!y||te?.lastRefreshTimeEnabled)})),this.refreshTime$=s.pipe((0,le.zg)(function(y){var w=y.$config,te=w?.lastRefreshTimeEnabled;if(te){if(y.type!==p.YU.workbook){var He=(0,we.ee)(y.tileDataUpdatedTime);return He?(0,Y.of)((0,Q.g)(t.localizationService,He)):(0,G.aj)([t.store.select(J.e6,{modelId:y.modelId,packageId:y.packageId}),t.store.select(Ye.Yx)]).pipe((0,pe.q)(1),(0,oe.U)(function(De){var Te,Pe=De[0],pt=De[1];if(Pe)return t.getFormattedDateStringFromRefreshTime(Pe.lastRefreshTime);var dt=null===(Te=pt?.datasets)||void 0===Te?void 0:Te.find(function(vt){return vt.id===t.contract.modelId});return t.getFormattedDateStringFromRefreshTime(dt?.lastRefreshTime)}))}return t.store.select(re.Jh,{id:y.packageId}).pipe((0,pe.q)(1),(0,oe.U)(function(De){return De?t.getFormattedDateStringFromRefreshTime(De.lastRefreshTime):""}))}return(0,Y.of)("")}),(0,oe.U)(function(y){return y?t.localizationService.format("Refreshed",[y]):""})),s.pipe((0,pe.q)(1),(0,f.b)(function(y){y.type!==p.YU.composite?t.isTileDisabledSubject.next(!1):t.customVisualValidation(y,y.$config)})).subscribe(),this.viewModel$=c.pipe((0,oe.U)(function(y){return t.mapTile(y,y.$config)}),(0,f.b)(function(y){y.type===p.YU.realTime?(t.updateRealTimeInputandOutput(y),setTimeout(function(){t.isLoading=1===y.contract.publishState,t.refreshViewPortSize(),t.ref.markForCheck()},200)):y.type!==p.YU.composite&&(t.isLoading=1===y.contract.publishState),t.hasWarning().then(function(w){t.tileHasWarning=w,t.tileHasWarning&&t.onErrorAdd.emit({message:t.warning&&t.warning.tooltip,displayableErrorInfo:[]})}).catch(function(w){t.isError=!0})}),(0,x.d)(1));var u=this.viewModel$.pipe((0,M.o)(function(y){return y.type===p.YU.composite})),b=s.pipe((0,Fe.x)(function(y,w){return _.isEqual(y.tileDataBinaryBase64Encoded,w.tileDataBinaryBase64Encoded)&&_.isEqual(y.tileData,w.tileData)}));(0,G.aj)([u,i,this.visualDefDataError$.asObservable(),b]).pipe((0,D.b)(0),(0,f.b)(function(y){var w=y[0];y[1]||t.tileDataService.getVisualDefinitionData(y[3],w.initialVisual,w.config).then(function(Te){w.initialVisual.data=Te,t.visualDefinition=w.initialVisual,t.visualDefChanged$.next(!0),t.tileConfigService.vdCache[w.contract.objectId]=t.visualDefinition,t.updateVisualInteractivityOptions(w),t.applyTheme(),t.isLoading=1===w.contract.publishState,t.refreshViewPortSize(),setTimeout(function(){t.refreshViewPortSize(),t.ref.markForCheck()},200),t.isError=!1}).catch(function(Te){return(0,g.mG)(t,void 0,void 0,function(){var Pe=this;return(0,g.Jh)(this,function(pt){return this.isError=!0,this.store.select(J.e6,{modelId:this.contract.modelId,packageId:this.contract.packageId}).pipe((0,pe.q)(1)).subscribe(function(dt){var vt=!!Pe.contract.queryResultError;if(Pe.telemetryService.logEvent(X,{errorCode:Te.code,queryError:Pe.contract.queryResultError}),1048576!==Pe.hostEnv&&Pe.tileDataUtilsService.shouldRefreshData(Pe.contract,vt,dt,Pe.currentRetry)){Pe.currentRetry++;var yt=Pe.telemetryService.startEvent(Ie.Ys,{dashboardGuid:Pe.dashboard&&Pe.dashboard.objectId});Pe.store.dispatch(new tt.F0({telemetryEvent:yt,hideLoader:!0})),Pe.visualDefDataError$.next(Te)}else Pe.currentRetry=0,w.contract.queryResultError&&(Pe.tileErrorDetails=(0,ne.X7)(w.contract.queryResultError,Pe.localizationService)),Pe.visualDefinition=null,Pe.isLoading=!1,Pe.ref.markForCheck()}),[2]})})})})).subscribe();var z=this.store.select(Ye.aS).pipe((0,V.R)(this.onDestroy$),(0,oe.U)(function(y){return _.filter(y,function(w){return Je.kB(w)}).length>0}));this.isNewMobileTile$=this.inEditMobileLayoutMode?(0,G.aj)([s,z]).pipe((0,oe.U)(function(y){var w=y[0];if(w)return Je.$D(w,y[1])})):(0,Y.of)(!1),this.isUnpinnedTileMobileView$=this.inEditMobileLayoutMode?(0,G.aj)([s,this.isNewMobileTile$]).pipe((0,oe.U)(function(y){var w=y[0],te=y[1];if(w)return Je.lE(w)||te})):(0,Y.of)(!1)},o.prototype.getFormattedDateStringFromRefreshTime=function(t){var i=(0,we.ee)(t);return i?(0,Q.g)(this.localizationService,i):""},o.prototype.isTileBodyEqual=function(t,i){return!(!t||!i)&&_.isEqual(t.query,i.query)&&_.isEqual(t.tileData,i.tileData)&&t.publishState===i.publishState&&t.$config===i.$config&&t.config===i.config},o.prototype.mapTile=function(t,i){var c,u,s=this,z=t.type;return{config:i,type:z,contract:t,initialVisual:this.tileConfigService.getVisualDefintionFromConfig(t,i,{onNotifyLicense:function(te){return s.onNotifyLicense(te)},onClearLicenseNotification:function(){return s.onClearLicenseNotification()},onNotifyFeatureBlocked:function(te){return s.onNotifyFeatureBlocked(te)}}),embedCode:z===p.YU.iframe?null===(c=i?.iframe)||void 0===c?void 0:c.embedCode:null,imageUrl:z===p.YU.image?null===(u=i?.imageTile)||void 0===u?void 0:u.imageUrl:null}},o.prototype.onNotifyLicense=function(t){0!==t&&this.licenseUIManager.displayNotification(t)},o.prototype.onNotifyFeatureBlocked=function(t){this.licenseUIManager.displayFeatureBlockedBanner(t)},o.prototype.onClearLicenseNotification=function(){this.licenseUIManager.clearNotification()},o.prototype.onTileError=function(t){this.isError=!0;var i=this.contract.type===p.YU.image?this.localizationService.get("Tile_ImageErrorText"):t.error;this.tileErrorDetails=t.errorDetails||{message:i,displayableErrorInfo:[]},this.onErrorAdd.emit(this.tileErrorDetails)},o.prototype.onClearTileError=function(){this.isError&&this.tileErrorDetails&&(this.onErrorRemove.emit(this.tileErrorDetails),this.isError=!1)},o.prototype.onSelectTileConversations=function(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault(),this.onSelectConverstations.emit(this.contract)},o.prototype.onMenuItemChanged=function(t){this.isMenuOpen=t.isOpen},o.prototype.getAltText=function(t){return t.contract.displayText?t.contract.displayText:this.localizationService.get("Image")},o.prototype.handleSensitivity=function(t){t.artifactType===a.B.Tile&&(this.hasSensitivityBanner=t.hasSensitivity,this.hasExpandSensitivityBanner=t.isBannerExpanded,this.loadSensitivity=t.hasSensitivity&&!this.disableSensitivityBanner)},o.prototype.onNotificationsUpdated=function(){},o.prototype.onReportTileBodyClick=function(t){32!==this.hostEnv&&t.stopPropagation()},o.prototype.onVisualModernClick=function(t){var i=t.target.tagName;"a"===i?.toLowerCase()&&t.stopPropagation()},o.prototype.onTileHeaderClick=function(t){var i;this.tileHeaderClickService&&32===this.hostEnv&&this.contract.type===p.YU.report&&(t.stopPropagation(),null===(i=this.tileHeaderClickService)||void 0===i||i.onTileHeaderClick(this.contract))},o.prototype.hasWarning=function(){return(0,g.mG)(this,void 0,void 0,function(){var t,s;return(0,g.Jh)(this,function(c){switch(c.label){case 0:return this.isError&&this.contract.queryResultError&&this.isVisualSupportedInErrorState(this.contract)?(t=(0,ne.X7)(this.contract.queryResultError,this.localizationService),this.warning={tooltip:this.localizationService.format("DashboardAppBar_TileError_ErrorTooltip",[t.message])},[2,!0]):[4,this.hasLostReportConnection()];case 1:return c.sent()?(this.warning={tooltip:this.localizationService.get("Tile_LoseReportConnection")},[2,!0]):this.contract.errorCode?(this.warning={tooltip:this.getErrorLocId(this.contract.errorCode)},[2,!0]):[4,this.tileUtilService.tileContainsScriptVisuals(this.contract)];case 2:return c.sent()&&this.scriptVisuals.shouldBlockScriptVisual(0)?(s=this.userInfo&&!Array.isArray(this.userInfo)&&this.licenseEnforcementService.supportsScriptVisuals(),this.warning={tooltip:s&&this.localizationService.get("Tile_RVis_RefreshDisabled")||this.localizationService.get("Tile_RVis_RefreshDisabledForNonPro")},[2,!0]):[2,!1]}})})},o.prototype.hasLostReportConnection=function(){var t;return(0,g.mG)(this,void 0,void 0,function(){var i,s,c,u,b;return(0,g.Jh)(this,function(z){switch(z.label){case 0:return this.contract.type!==p.YU.composite?[2,!1]:(i="bingSocial",s=this.contract.$action,c=this.contract.action?JSON.parse(this.contract.action):null,u=null===(t=s||c)||void 0===t?void 0:t.action,[4,this.reportStore.findById(this.contract.reportId)]);case 1:return b=z.sent(),[2,u!==Ue.RCq&&(!u||u===Ue.$Ez&&!b)&&this.contract.name!==i&&!this.contract.$config.widget]}})})},o.prototype.shouldShowTileVisual=function(t){return!this.isExportError&&(!this.isError||this.isVisualSupportedInErrorState(t))},o.prototype.isVisualSupportedInErrorState=function(t){var s=t&&t.type===p.YU.realTime;return!(!t||t.type!==p.YU.composite||this.shouldShowCompositeTileError(t.queryResultError)||!this.visualDefinition||!this.visualDefinition.data)||!!(s&&this.realTimeTileModernInputArgs&&this.realTimeTileModernInputArgs.initialVisual&&this.realTimeTileModernInputArgs.initialVisual.data)},o.prototype.shouldShowCompositeTileError=function(t){var i=t&&(0,ne.X7)(t,this.localizationService);return!(!i||!i.message)},o.prototype.getErrorLocId=function(t){var i,s=[];switch(t){case 10:i="WorkbookTile_GeneralError";break;case 11:i="WorkbookTile_FileNotFound";break;case 12:i="WorkbookTile_ObjectNotFound",s=this.contract.$config.workbookTile?[this.contract.$config.workbookTile.item]:["pinned object"];break;case 14:i="WorkbookTile_LocalWorkbookUnsupported";break;case 13:i="WorkbookTile_Unauthorized";break;default:return""}return this.localizationService.format(i,s)},o.prototype.calculateSmallTileWidth=function(){var t=this.elementRef.nativeElement.querySelector(".tileLayout");this.isSmallTitleWidth=t?.clientWidth>0&&t?.clientWidth<=o.smallTitleWidth},o.prototype.updateRealTimeInputandOutput=function(t){var i=this;t.type===p.YU.realTime&&(this.visualDefinition=t.initialVisual,this.realTimeOutputArgs={onTileError:function(c){return i.onTileError(c)},onClearTileError:function(){return i.onClearTileError()}},this.realTimeTileModernInputArgs={isOnPushChangeDetection:this.isOnPushChangeDetection,initialVisual:t.initialVisual,contract:t.contract,config:t.config})},o.smallTitleWidth=160,o.\u0275fac=function(i){return new(i||o)(e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(ce.vZ),e.\u0275\u0275directiveInject(_e.D),e.\u0275\u0275directiveInject(I.f),e.\u0275\u0275directiveInject(L.d),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(ie.A),e.\u0275\u0275directiveInject(ye.v),e.\u0275\u0275directiveInject(be.d),e.\u0275\u0275directiveInject(ve.o),e.\u0275\u0275directiveInject(Ve.r),e.\u0275\u0275directiveInject(U.t),e.\u0275\u0275directiveInject(at.l6),e.\u0275\u0275directiveInject(st.o),e.\u0275\u0275directiveInject(Be.Z),e.\u0275\u0275directiveInject(Me.J,12),e.\u0275\u0275directiveInject(Ze.S),e.\u0275\u0275directiveInject(ke.E),e.\u0275\u0275directiveInject(C.a),e.\u0275\u0275directiveInject(v.k),e.\u0275\u0275directiveInject(rt),e.\u0275\u0275directiveInject(lt.k),e.\u0275\u0275directiveInject(ft.yh),e.\u0275\u0275directiveInject(R.R),e.\u0275\u0275directiveInject(ue.y0),e.\u0275\u0275directiveInject(T.E),e.\u0275\u0275directiveInject(H.D),e.\u0275\u0275directiveInject(ut.E),e.\u0275\u0275directiveInject(N.t),e.\u0275\u0275directiveInject(Z.SW),e.\u0275\u0275directiveInject(h),e.\u0275\u0275directiveInject(he.H,8),e.\u0275\u0275directiveInject(m,8))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["tile-content"]],inputs:{contract:"contract",showComments:"showComments",isSelected:"isSelected",hideBySpotlight:"hideBySpotlight",inEditMobileLayoutMode:"inEditMobileLayoutMode",shouldOverrideCustomTheme:"shouldOverrideCustomTheme",disableInteractions:"disableInteractions",focusedTileObjId:"focusedTileObjId",themeName:"themeName",mobileTileInteractive:"mobileTileInteractive",isLargeHeader:"isLargeHeader",tileBodyViewPort:"tileBodyViewPort",dashboard:"dashboard",odataFilters:"odataFilters"},outputs:{onSelectConverstations:"onSelectConverstations",onErrorAdd:"onErrorAdd",onErrorRemove:"onErrorRemove",onPinTileMobileView:"onPinTileMobileView",onUnpinTileMobileView:"onUnpinTileMobileView"},features:[e.\u0275\u0275ProvidersFeature((0,g.ev)((0,g.ev)([],F.H,!0),[l.W,se.u8],!1)),e.\u0275\u0275InheritDefinitionFeature],decls:3,vars:9,consts:[[1,"tileLayout",3,"ngClass"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["permissionLocked",""],[3,"messageKey"],[1,"tile","baseTile"],["class","item-auto",4,"ngIf"],[1,"flexbox",3,"ngClass","click"],["data-testid","tile-warning-icon",3,"contract","tileHasWarning","warningMessage"],["ng-non-bindable","",1,"headerText","unselectable"],["data-testid","tile-display-text",1,"displayText",3,"title"],[1,"flexbox","subDisplayTextWrapper"],["data-testid","tile-sub-display-text",1,"subDisplayText","item-auto",3,"title"],["class","subDisplayText item-auto",4,"ngIf"],["data-testid","tile-refresh-time",1,"subDisplayText","item-auto",3,"title"],["class","item-auto commentIndicator",3,"click",4,"ngIf"],["focus-nav-mode","Group","keyboard-shortcuts","alt-shift-F10 scoped",1,"moreOptions",3,"ngClass"],["menuIcon","pbi-glyph-more",3,"dashboard","tile","ariaLabel","tooltip","visualDefinition","currentMenuItemIdChange",4,"ngIf"],["class","tile-body",3,"compositeTileBody","ngClass",4,"ngIf"],["class","newBadgeContainer","localize","New_Capitalized",4,"ngIf"],[3,"visualType","tileObjectId",4,"ngIf"],[3,"visualType",4,"ngIf"],[3,"featureBlockedTooltip","shouldStartBannerLeaveAnimation","visualType","isAnimationDone",4,"ngIf"],[3,"visualType","tileObjectId"],[3,"visualType"],[3,"featureBlockedTooltip","shouldStartBannerLeaveAnimation","visualType","isAnimationDone"],[1,"item-auto"],[1,"webContentCorner"],["localizeTooltip","WebContentWarning_Widget",1,"webContentIcon"],[1,"glyphicon","pbi-glyph-securityalert","glyph-small"],[1,"subDisplayText","item-auto"],[1,"item-auto","commentIndicator",3,"click"],[1,"glyphicon","glyph-small","pbi-glyph-comment"],["data-testid","unpinTile-mobile-Layout","class","unpinTile glyphicon pbi-glyph-unpin glyph-small",3,"ngClass","title","click",4,"ngIf"],["class","unpinTile glyphicon pbi-glyph-pinned glyph-small showTileIcon","data-testid","unpin-tile-btn",3,"title","click",4,"ngIf"],["data-testid","unpinTile-mobile-Layout",1,"unpinTile","glyphicon","pbi-glyph-unpin","glyph-small",3,"ngClass","title","click"],["data-testid","unpin-tile-btn",1,"unpinTile","glyphicon","pbi-glyph-pinned","glyph-small","showTileIcon",3,"title","click"],["menuIcon","pbi-glyph-more",3,"dashboard","tile","ariaLabel","tooltip","visualDefinition","currentMenuItemIdChange"],[1,"tile-body",3,"ngClass"],["class","tileLoadingPlaceholder",4,"ngIf"],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"imageUrl","altText",4,"ngSwitchCase"],[3,"imageUrl",4,"ngSwitchCase"],[3,"viewModel","embedCode",4,"ngSwitchCase"],[3,"viewModel","config",4,"ngSwitchCase"],[3,"errorText","errorDetails","tileType",4,"ngIf"],[1,"tileLoadingPlaceholder"],[1,"tileLoadingPlaceholderText","glyphicon","pbi-glyph-powerbi","glyph-large"],[3,"viewModel","supportsScreenReader","allowDeferredRendering","supportsKeyboardNavigation","useOnPushChangeDetection","click","visualReady",4,"ngIf"],[3,"viewModel","supportsScreenReader","allowDeferredRendering","supportsKeyboardNavigation","useOnPushChangeDetection","click","visualReady"],[3,"imageUrl","altText"],[3,"imageUrl"],[3,"viewModel","embedCode"],[3,"viewModel","config"],[3,"modulePath","componentId","inputArgs","outputArgs",4,"ngIf"],[3,"modulePath","componentId","inputArgs","outputArgs"],[3,"contract","odataFilters","config","click"],[3,"errorText","errorDetails","tileType"],["localize","New_Capitalized",1,"newBadgeContainer"]],template:function(i,s){1&i&&(e.\u0275\u0275elementStart(0,"section",0),e.\u0275\u0275template(1,ni,4,2,"ng-container",1),e.\u0275\u0275template(2,Ri,36,66,"ng-container",1),e.\u0275\u0275elementEnd()),2&i&&(e.\u0275\u0275styleMap(s.tileStyle),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction3(5,zi,s.isSelected,s.hideBySpotlight,s.isSmallTitleWidth)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",s.isTileLocked(null==s.contract?null:s.contract.errorCode)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!s.isTileLocked(null==s.contract?null:s.contract.errorCode)))},dependencies:[d.NgClass,d.NgIf,d.NgSwitch,d.NgSwitchCase,O.o,k.H,K.$,fe.y,me.X,Ae.r,Ce.R,nt.q,mt,Rt.g,At,Gt,Qt,Yt,xn,On.o,kn,_n,Xn,d.AsyncPipe,qn.F],styles:["[_nghost-%COMP%]{height:100%;width:100%;list-style:none;position:relative;z-index:0}.tile-visual[_ngcontent-%COMP%]{height:100%;width:100%}.tileLayout[_ngcontent-%COMP%]{background-color:var(--fluent-theme-white-color, #FFF);box-sizing:border-box;height:100%;width:100%;display:flex;flex-direction:column;position:relative;cursor:pointer}.tile-body[_ngcontent-%COMP%]{top:50px;color:#fff;overflow:hidden;position:absolute;left:0;right:0;bottom:0;cursor:pointer;text-align:left;z-index:0}.tile-body.paddedTile[_ngcontent-%COMP%]{left:10px;right:10px;bottom:10px}.tile-body[_ngcontent-%COMP%]     iframe-tile{width:100%;height:100%}.tile-body[_ngcontent-%COMP%]     iframe-tile .iframeTile{width:100%;height:100%}.tile-body[_ngcontent-%COMP%]     iframe-tile .iframeTile iframe{width:100%;height:100%}.moreOptions[_ngcontent-%COMP%]{display:block;position:absolute;height:22px;right:12px;top:15px;list-style-type:none;padding:3px;opacity:.95;z-index:2;visibility:hidden;cursor:pointer;color:var(--neutral-tertiary-color, #A6A6A6);background-color:var(--white-color, #FFF)}.newBadgeContainer[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0;padding:0 7px;line-height:18px;background-color:var(--theme-lighter-color, #F2C811);color:var(--button-primary-content-color);font-family:wf_standard-font,helvetica,arial,sans-serif}section[_ngcontent-%COMP%]:hover   .moreOptions[_ngcontent-%COMP%]{visibility:visible}section[_ngcontent-%COMP%]:hover   .baseTile[_ngcontent-%COMP%]   button.unpinTile[_ngcontent-%COMP%]{visibility:visible}.tileLoadingPlaceholder[_ngcontent-%COMP%]{display:block;color:var(--fluent-theme-light-gray-color, #c8c8c8);top:10px;left:10px;right:10px;bottom:10px;overflow:hidden;position:absolute}.tileLoadingPlaceholder[_ngcontent-%COMP%]   .tileLoadingPlaceholderText[_ngcontent-%COMP%]{top:50%;position:absolute;margin-top:-20px;text-align:center;width:100%}.tile.noTitle[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{display:none}.tile.noTitle[_ngcontent-%COMP%]   div.tile-body[_ngcontent-%COMP%]{top:0}.tile.noTitle[_ngcontent-%COMP%]   div.compositeTileBody[_ngcontent-%COMP%]{top:10px}.largeHeader.tile[_ngcontent-%COMP%]   .tile-body[_ngcontent-%COMP%]{top:65px}.tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{padding:16px 10px 20px;box-sizing:border-box;height:50px;position:absolute;top:0;width:100%;z-index:1;transition:opacity .25s;align-items:flex-start;justify-content:flex-start}.largeHeader.tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{height:65px}.authoringDashboard[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%], .is-dynamic-layout[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{padding-top:10px;padding-left:10px;height:42px}.tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   button.commentIndicator[_ngcontent-%COMP%]{padding-left:12px;padding-right:30px;padding-bottom:16px}.tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   button.commentIndicator[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:active, .tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   button.commentIndicator[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{color:var(--neutral-secondary-alt-color3, #999999)}.tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   button.commentIndicator[_ngcontent-%COMP%]:focus{outline-color:transparent}html[data-focus-source=key][_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   button.commentIndicator[_ngcontent-%COMP%]:focus   .glyphicon[_ngcontent-%COMP%]{box-shadow:var(--focus-box-shadow-definition, 0 0 0 4px) var(--focus-box-shadow-white-color, #FFFFFF)!important;border:var(--focus-outline-definition, 2.5px solid) var(--focus-box-shadow-color, #000000)!important}.tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-of-type:not(.commentIndicator){padding-right:15px}.tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]{cursor:pointer;width:100%;min-width:0;flex:1 1 auto;display:inline-flex;padding-right:30px}.tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]   .headerTitleWrapper[_ngcontent-%COMP%]{max-width:100%}.tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{max-width:85%;flex:0 0 auto}.tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .displayText[_ngcontent-%COMP%]{font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif;font-size:15px;color:var(--neutral-primary-color, #333333);overflow:hidden;white-space:nowrap;text-overflow:ellipsis;height:20px;line-height:16px}.largeHeader.tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .displayText[_ngcontent-%COMP%]{height:22px;font-size:17px;padding-bottom:5px;padding-top:4px}.tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .subDisplayTextWrapper[_ngcontent-%COMP%]{justify-content:flex-start}.tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .subDisplayTextWrapper[_ngcontent-%COMP%]   .subDisplayText[_ngcontent-%COMP%]{font-family:wf_standard-font,helvetica,arial,sans-serif;font-size:12px;color:var(--neutral-secondary-color, #666666);overflow:hidden;white-space:nowrap;text-overflow:ellipsis;height:20px;text-transform:uppercase;letter-spacing:.5px;margin-right:10px;max-width:100%;line-height:12px}.largeHeader[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .subDisplayTextWrapper[_ngcontent-%COMP%]   .subDisplayText[_ngcontent-%COMP%]{height:22px;font-size:12px}.tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .subDisplayTextWrapper[_ngcontent-%COMP%]   .subDisplayText[_ngcontent-%COMP%]:empty{margin-right:0}.baseTile[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:var(--neutral-secondary-alt-color3, #999999);background-color:transparent;padding:3px;border:none;box-sizing:border-box;vertical-align:top}.baseTile[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active:hover{background-color:transparent}.baseTile[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:focus{background-color:transparent}.baseTile[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding:0;margin:0}.baseTile[_ngcontent-%COMP%]   button.unpinTile[_ngcontent-%COMP%]{display:block;visibility:hidden;position:absolute;height:32px;width:32px;right:6px;top:8px;list-style-type:none;padding:3px;transition:opacity .25s;z-index:3;background-color:#fff;border-radius:50%;color:#444}.baseTile[_ngcontent-%COMP%]   button.unpinTile[_ngcontent-%COMP%]:active:hover{background-color:var(--button-primary-hover-fill-color)}.baseTile[_ngcontent-%COMP%]   button.unpinTile[_ngcontent-%COMP%]:hover:focus{background-color:var(--button-primary-hover-fill-color)}.baseTile[_ngcontent-%COMP%]   button.unpinTile[_ngcontent-%COMP%]:hover{color:var(--button-primary-content-color);background-color:var(--theme-lighter-color, #F2C811)}.baseTile[_ngcontent-%COMP%]   button.unpinTile.showUnpin[_ngcontent-%COMP%]{visibility:visible}.baseTile[_ngcontent-%COMP%]   button.showTileIcon[_ngcontent-%COMP%]{height:28px;width:28px;border-radius:50%;visibility:visible}.baseTile[_ngcontent-%COMP%]   button.showTileIcon[_ngcontent-%COMP%]:hover{color:var(--button-primary-content-color);background-color:var(--theme-lighter-color, #F2C811)}.license-blockers-element-style[_ngcontent-%COMP%]{filter:blur(8px);-webkit-filter:blur(8px)}license-blocker[_ngcontent-%COMP%], license-environment-blocker[_ngcontent-%COMP%]{position:relative;top:0;left:0;z-index:2;width:100%;height:100%}license-banner[_ngcontent-%COMP%]{position:absolute;top:4px;right:4px;z-index:3;width:calc(100% - 4px);height:32px;pointer-events:none}.hideSpotlight[_ngcontent-%COMP%]{opacity:.45;pointer-events:none;transition:none}.showOptions[_ngcontent-%COMP%]{visibility:visible}.interactionDisabled[_ngcontent-%COMP%]{pointer-events:none}",".mobileDashboard[_nghost-%COMP%]   .tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%], .mobileDashboard   [_nghost-%COMP%]   .tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{cursor:default;background-color:transparent;padding-top:10px;height:42px}.mobileDashboard[_nghost-%COMP%]   .tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%], .mobileDashboard   [_nghost-%COMP%]   .tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]{cursor:default;padding-right:0}.mobileDashboard[_nghost-%COMP%]   .tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]   section[_ngcontent-%COMP%], .mobileDashboard   [_nghost-%COMP%]   .tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{width:auto}.mobileDashboard[_nghost-%COMP%]   .tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .displayText[_ngcontent-%COMP%], .mobileDashboard   [_nghost-%COMP%]   .tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .displayText[_ngcontent-%COMP%]{font-size:12px;line-height:13px;margin-bottom:-4px}.mobileDashboard[_nghost-%COMP%]   .tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .subDisplayText[_ngcontent-%COMP%], .mobileDashboard   [_nghost-%COMP%]   .tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .subDisplayText[_ngcontent-%COMP%]{font-size:11px;line-height:10px}.mobileDashboard[_nghost-%COMP%]   .moreOptions[_ngcontent-%COMP%], .mobileDashboard   [_nghost-%COMP%]   .moreOptions[_ngcontent-%COMP%]{right:0;top:6px;padding:0;visibility:visible;background-color:transparent}.mobileDashboardConsumption.nonInteractiveVisuals[_nghost-%COMP%]   .tile[_ngcontent-%COMP%]     .tile-body *, .mobileDashboardConsumption.nonInteractiveVisuals   [_nghost-%COMP%]   .tile[_ngcontent-%COMP%]     .tile-body *{pointer-events:none!important}.mobile-custom-layout-strategy[_nghost-%COMP%]   .tile[_ngcontent-%COMP%]   .tile-body[_ngcontent-%COMP%], .mobile-custom-layout-strategy   [_nghost-%COMP%]   .tile[_ngcontent-%COMP%]   .tile-body[_ngcontent-%COMP%]{top:42px;bottom:8px;cursor:none!important}.mobile-custom-layout-strategy[_nghost-%COMP%]   .tile.noTitle[_ngcontent-%COMP%]   div.tile-body[_ngcontent-%COMP%], .mobile-custom-layout-strategy   [_nghost-%COMP%]   .tile.noTitle[_ngcontent-%COMP%]   div.tile-body[_ngcontent-%COMP%]{top:10px}.mobile-custom-layout-strategy[_nghost-%COMP%]   .smallTitleWidth[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .displayText[_ngcontent-%COMP%], .mobile-custom-layout-strategy   [_nghost-%COMP%]   .smallTitleWidth[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .displayText[_ngcontent-%COMP%]{height:27px;white-space:normal;display:block;display:-webkit-box;letter-spacing:-.2px;word-wrap:break-word;-webkit-line-clamp:2;-webkit-box-orient:vertical}.mobile-custom-layout-strategy[_nghost-%COMP%]   .smallTitleWidth[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .subDisplayText[_ngcontent-%COMP%], .mobile-custom-layout-strategy   [_nghost-%COMP%]   .smallTitleWidth[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .subDisplayText[_ngcontent-%COMP%]{display:none}tile-host[_nghost-%COMP%]   .tile[_ngcontent-%COMP%]   .tile-body[_ngcontent-%COMP%], tile-host   [_nghost-%COMP%]   .tile[_ngcontent-%COMP%]   .tile-body[_ngcontent-%COMP%]{margin-top:10px;cursor:none!important}tile-host[_nghost-%COMP%]   .tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%], tile-host   [_nghost-%COMP%]   .tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{border-bottom:.5px solid #E1DFDD}tile-host[_nghost-%COMP%]   .tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]   .displayText[_ngcontent-%COMP%], tile-host   [_nghost-%COMP%]   .tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]   .displayText[_ngcontent-%COMP%]{color:#201f1e}tile-host[_nghost-%COMP%]   .tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]   .subDisplayText[_ngcontent-%COMP%], tile-host   [_nghost-%COMP%]   .tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]   .subDisplayText[_ngcontent-%COMP%]{color:#605e5c}tile-host[_nghost-%COMP%]   .tile[_ngcontent-%COMP%]   .moreOptions[_ngcontent-%COMP%], tile-host   [_nghost-%COMP%]   .tile[_ngcontent-%COMP%]   .moreOptions[_ngcontent-%COMP%]{display:none}"]}),o}(ot.w)},77996:function(Qe,de,n){n.d(de,{o:function(){return U}});var g=n(17254),l=n(50423),se=n(48066),Q=n(3826),e=n(9380),m=n(18942),T=n(77476);function J(p,W){if(1&p&&l.\u0275\u0275element(0,"iframe",4),2&p){var S=l.\u0275\u0275nextContext();l.\u0275\u0275property("src",S.workbookTileUrl,l.\u0275\u0275sanitizeResourceUrl)}}var re=function(W){return{backgroundOriginalSize:W}};function F(p,W){if(1&p){var S=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"img",5),l.\u0275\u0275listener("load",function(){l.\u0275\u0275restoreView(S);var Ee=l.\u0275\u0275nextContext();return l.\u0275\u0275resetView(Ee.onTileImageReady())}),l.\u0275\u0275elementEnd()}if(2&p){var ne=l.\u0275\u0275nextContext();l.\u0275\u0275property("src",ne.dynamicImageUrl,l.\u0275\u0275sanitizeUrl)("ngClass",l.\u0275\u0275pureFunction1(2,re,ne.keepOriginalContentSize))}}var H=function(){return{hasTitle:"title"}},U=function(){function p(W,S,ne){this.featureSwitch=W,this.sanitizer=S,this.workbookService=ne,this.useLiveEwaControl=!!this.featureSwitch.featureSwitches.liveWorkbookTiles}return p.prototype.ngOnInit=function(){this.initWorkbookTile()},p.prototype.updateDynamicImageUrl=function(){this.dynamicImageUrl=(0,g.A5)(this.viewModel,this.config,{x:this.viewModel.col,y:this.viewModel.row,width:this.viewModel.colSpan||Q.wS,height:this.viewModel.rowSpan||Q.e_})||this.previewImageUrl},p.prototype.ngOnChanges=function(W){W&&W.viewModel&&(this.updateDynamicImageUrl(),this.keepOriginalContentSize=this.config&&(0,g.FQ)(this.config))},p.prototype.shouldPreparePreviewImage=function(){return!this.previewImageUrl&&!this.viewModel.tileDataBinaryBase64Encoded&&!(0,g.f6)(this.config)},p.prototype.initWorkbookTile=function(){var W=this;this.isLoading=!0,this.keepOriginalContentSize=this.config&&(0,g.FQ)(this.config),this.shouldPreparePreviewImage()&&this.workbookService.getWorkbookTilePreviewImageUrl(this.viewModel).then(function(S){var ne=-1===S.indexOf("?")?"?":"&";W.previewImageUrl=S+ne+(new Date).getTime(),W.updateDynamicImageUrl()}).catch(function(S){}),this.useLiveEwaControl&&this.workbookService.getWorkbookEmbedAccessData(this.viewModel.workbookId,this.viewModel.packageId).then(function(S){if(S&&(0,se.HH)(S.url)){var ne=W.constructWorkbookWopiUrl(S.url,S.accessToken);W.workbookTileUrl=W.sanitizer.sanitize(l.SecurityContext.RESOURCE_URL,W.sanitizer.bypassSecurityTrustResourceUrl(ne))}}).catch(function(S){})},p.prototype.onTileImageReady=function(){this.isLoading=!1},p.prototype.constructWorkbookWopiUrl=function(W,S){if(this.config.workbookTile){var ne=W.replace(/ExcelJs.ashx/i,"xlEmbed.aspx");return ne+"&access_token="+S+"&item="+this.config.workbookTile.item+"&action=embedView"}return""},p.\u0275fac=function(S){return new(S||p)(l.\u0275\u0275directiveInject(e.vZ),l.\u0275\u0275directiveInject(m.H7),l.\u0275\u0275directiveInject(g.VB))},p.\u0275cmp=l.\u0275\u0275defineComponent({type:p,selectors:[["workbook-tile"]],inputs:{viewModel:"viewModel",config:"config"},features:[l.\u0275\u0275NgOnChangesFeature],decls:4,vars:7,consts:[[1,"workbookTile",3,"ngClass","ngSwitch"],["role","presentation",3,"src",4,"ngSwitchCase"],["alt","","class","workbookTileImage","disable-animation","true",3,"src","ngClass","load",4,"ngSwitchCase"],["name","internalWorkbookTileImage",1,"internalWorkbookTileImage",3,"src","hidden"],["role","presentation",3,"src"],["alt","","disable-animation","true",1,"workbookTileImage",3,"src","ngClass","load"]],template:function(S,ne){1&S&&(l.\u0275\u0275elementStart(0,"div",0),l.\u0275\u0275template(1,J,1,1,"iframe",1),l.\u0275\u0275template(2,F,1,4,"img",2),l.\u0275\u0275element(3,"img",3),l.\u0275\u0275elementEnd()),2&S&&(l.\u0275\u0275property("ngClass",l.\u0275\u0275pureFunction0(6,H))("ngSwitch",ne.useLiveEwaControl),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngSwitchCase",!0),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngSwitchCase",!1),l.\u0275\u0275advance(1),l.\u0275\u0275property("src",ne.previewImageUrl,l.\u0275\u0275sanitizeUrl)("hidden",!0))},dependencies:[T.NgClass,T.NgSwitch,T.NgSwitchCase],encapsulation:2}),p}()},63868:function(Qe,de,n){n.d(de,{h:function(){return ft}});var g=n(81337),l=n(32293),se=n(90047),Q=n(82515),e=n(74076),m=n(64115),T=n(34073),J=n(28726),re=n(76964),F=n(40521),H=n(50544),U=n(85947),p=n(80981),W=n(47644),S=n(8060),ne=n(2142),Re=n(7600),Ee=n(50600),ze=n(43286),je=n(46544),Ne=n(33554),$e=n(59017),xe=n(11547),Ke=n(41198),X=n(48787),Ie=n(42195),Le=n(14172),we=n(17653),Ue=n(59973),a=n(50423),q=n(85732),Se=n(65181),We=n(58938),qe=n(29866),et=n(9380),ot=n(48482),ue=n(3404),Ye=n(76072),tt=n(77326),Je=n(66531),j=n(21860),B=n(77476),G=n(17174),Y=n(59968),pe=n(50057),ge=n(11941),oe=n(39686),Fe=n(45074),le=n(82417),f=n(77274),x=n(33846),M=n(18460),D=n(54932),V=n(89659),Z=n(85102);function he(R,h){1&R&&(a.\u0275\u0275elementStart(0,"div",25),a.\u0275\u0275element(1,"span",26)(2,"span",27),a.\u0275\u0275elementEnd())}function ce(R,h){if(1&R&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275element(1,"tile-content",28),a.\u0275\u0275pipe(2,"async"),a.\u0275\u0275pipe(3,"async"),a.\u0275\u0275elementContainerEnd()),2&R){var d=a.\u0275\u0275nextContext();a.\u0275\u0275advance(1),a.\u0275\u0275property("disableInteractions","true")("shouldOverrideCustomTheme","true")("contract",a.\u0275\u0275pipeBind1(2,4,d.currentContract$))("themeName",a.\u0275\u0275pipeBind1(3,6,d.targetThemeName$))}}function _e(R,h){if(1&R){var d=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",29),a.\u0275\u0275element(1,"p",30),a.\u0275\u0275elementStart(2,"pbi-radio-group",31),a.\u0275\u0275listener("ngModelChange",function(K){a.\u0275\u0275restoreView(d);var fe=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(fe.themeTarget=K)})("ngModelChange",function(){a.\u0275\u0275restoreView(d);var K=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(K.onThemeTargetChange())}),a.\u0275\u0275elementStart(3,"pbi-radio-button",32),a.\u0275\u0275text(4),a.\u0275\u0275pipe(5,"localize"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(6,"pbi-radio-button",33),a.\u0275\u0275text(7),a.\u0275\u0275pipe(8,"localize"),a.\u0275\u0275elementEnd()()()}if(2&R){var O=a.\u0275\u0275nextContext();a.\u0275\u0275advance(2),a.\u0275\u0275property("ngModel",O.themeTarget),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind1(5,4,"ReportContainer_UseDashboardFormattingRadioText")," "),a.\u0275\u0275advance(2),a.\u0275\u0275property("checked",!0),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind1(8,6,"ReportContainer_RetainReportFormattingRadioText")," ")}}function at(R,h){if(1&R&&(a.\u0275\u0275elementStart(0,"mat-option",38),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&R){var d=h.$implicit;a.\u0275\u0275property("value",d.objectId),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",d.displayName,"")}}function st(R,h){if(1&R){var d=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"mat-select",36),a.\u0275\u0275listener("valueChange",function(K){a.\u0275\u0275restoreView(d);var fe=a.\u0275\u0275nextContext(2);return a.\u0275\u0275resetView(fe.selectedDashboardId=K)})("selectionChange",function(){a.\u0275\u0275restoreView(d);var K=a.\u0275\u0275nextContext(2);return a.\u0275\u0275resetView(K.onDashboardSelectionChanged())}),a.\u0275\u0275template(1,at,2,2,"mat-option",37),a.\u0275\u0275pipe(2,"async"),a.\u0275\u0275elementEnd()}if(2&R){var O=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("value",O.selectedDashboardId),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngForOf",a.\u0275\u0275pipeBind1(2,2,O.availableDashboards$))}}function ut(R,h){if(1&R&&(a.\u0275\u0275elementStart(0,"section"),a.\u0275\u0275element(1,"label",34),a.\u0275\u0275template(2,st,3,4,"mat-select",35),a.\u0275\u0275pipe(3,"async"),a.\u0275\u0275elementEnd()),2&R){var d=a.\u0275\u0275nextContext();a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",a.\u0275\u0275pipeBind1(3,1,d.availableDashboards$))}}function N(R,h){if(1&R){var d=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"pbi-form-field")(1,"label",39),a.\u0275\u0275text(2),a.\u0275\u0275pipe(3,"localize"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(4,"input",40),a.\u0275\u0275listener("ngModelChange",function(K){a.\u0275\u0275restoreView(d);var fe=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(fe.newDashboardName=K)}),a.\u0275\u0275elementEnd()()}if(2&R){var O=a.\u0275\u0275nextContext();a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate(a.\u0275\u0275pipeBind1(3,2,"SettingsBlade_DashboardName")),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngModel",O.newDashboardName)}}var I=function(h){return{viewModel:h}};function L(R,h){if(1&R&&(a.\u0275\u0275elementStart(0,"div",41),a.\u0275\u0275element(1,"pbi-lazy-load",42),a.\u0275\u0275elementEnd()),2&R){var d=a.\u0275\u0275nextContext();a.\u0275\u0275advance(1),a.\u0275\u0275property("modulePath",d.MessageBannerModulePath)("componentId","MessageBannerComponentId")("inputArgs",a.\u0275\u0275pureFunction1(3,I,d.liveReportBannerModel))}}function ie(R,h){if(1&R&&(a.\u0275\u0275elementStart(0,"div",43),a.\u0275\u0275element(1,"pbi-lazy-load",42),a.\u0275\u0275elementEnd()),2&R){var d=a.\u0275\u0275nextContext();a.\u0275\u0275advance(1),a.\u0275\u0275property("modulePath",d.MessageBannerModulePath)("componentId","MessageBannerComponentId")("inputArgs",a.\u0275\u0275pureFunction1(3,I,d.noReshareWarningBannerModel))}}function ye(R,h){if(1&R&&(a.\u0275\u0275elementStart(0,"div",44),a.\u0275\u0275element(1,"pbi-lazy-load",42),a.\u0275\u0275elementEnd()),2&R){var d=h.ngIf,O=a.\u0275\u0275nextContext();a.\u0275\u0275advance(1),a.\u0275\u0275property("modulePath",O.MessageBannerModulePath)("componentId","MessageBannerComponentId")("inputArgs",a.\u0275\u0275pureFunction1(3,I,d))}}var be=function(){function R(h,d,O,k,K,fe,me,Ae,Ce,nt,it,Ge,Xe){this.store=h,this.localizationService=d,this.dlgService=O,this.visualPlugin=k,this.featureSwitchService=K,this.usageMetricsReport=fe,this.explorationSerializer=me,this.lazyProvider=Ae,this.informationProtectionService=Ce,this.informationProtectionUIService=nt,this.telemetryService=it,this.config=Ge,this.dashboardThemeService=Xe,this.themeTarget="current",this.isThemeSwitcherAvailable=!1,this.isPinLiveReport=!1,this.isNotFullyResharable=!1,this.MessageBannerModulePath="@powerbi/UILibrary/message-banner/message-banner.module#MessageBannerModule",this.targetThemeName$=new Ne.t,this.initializeContract()}return R.prototype.ngOnInit=function(){var h=this;this.store.select(e.s4).pipe((0,Ke.n)(function(d){return!d}),(0,X.q)(1),(0,Ie.zg)(function(){return h.store.select(e.CW)})).subscribe(function(d){h.store.dispatch(new Q._S({groupObjectId:d,refreshIfStale:!1}))}),this.availableDashboards$=0===this.config.pinTileContext?(0,$e.aj)([this.store.select(m.W$),this.store.select(T.BJ)]).pipe((0,Le.U)(function(d){return h.filterDashboards(d[1],d[0])}),(0,we.b)(function(d){d?.length&&(h.selectedDashboardId=d[0].objectId)})):this.store.select(T.BJ).pipe((0,Le.U)(function(d){return h.filterDashboards(d)}),(0,we.b)(function(d){d?.length&&(h.selectedDashboardId=d[0].objectId)})),this.availableDashboardsSubscription=this.availableDashboards$.subscribe(function(d){h.hasAvailableDashboards=d?.length>0,h.pinMode=h.hasAvailableDashboards?"existing":"new"}),this.liveReportBannerModel={bannerType:0,iconName:"pbi-glyph-info",message:this.localizationService.get("PinLiveReport_RefreshMessage")},this.noReshareWarningBannerModel={bannerType:2,iconName:"pbi-glyph-info",message:this.localizationService.get("PinTile_Warning_NoResharePermission")},this.informationProtectionIUCWarning$=this.getInformationProtectionIUCWarning()},R.prototype.ngOnDestroy=function(){this.availableDashboardsSubscription&&this.availableDashboardsSubscription.unsubscribe()},R.prototype.onClose=function(){this.onCancelClick()},R.prototype.filterDashboards=function(h,d){var O=_.filter(h,function(K){return(0,ze.yE)(K.permissions,2)&&(!d||d.objectId!==K.objectId)});return _.sortBy(O,function(K){return K.displayName.toLowerCase()})},R.prototype.onDashboardSelectionChanged=function(){this.onThemeTargetChange()},R.prototype.onThemeTargetChange=function(){if("current"===this.themeTarget){if(this.config.pinData){var h=this.config.pinData,d=h.themeCollection&&h.themeCollection.customTheme;this.targetThemeName$.next(d?.name)}}else this.targetThemeName$.next(this.dashboardThemeService.getDashboardThemeName(this.selectedDashboardId))},R.prototype.onPinClick=function(){var h=this,d=this.getTelemetryEvent();(0,$e.aj)([this.currentContract$,d]).pipe((0,X.q)(1)).subscribe(function(O){var k,K,fe,Ae=O[1],Ce=_.cloneDeep(O[0]);"destination"===h.themeTarget&&!(null===(fe=null===(K=null===(k=Ce.$config)||void 0===k?void 0:k.visualContainer)||void 0===K?void 0:K.themeCollection)||void 0===fe)&&fe.customTheme&&(Ce.$config.visualContainer.themeCollection.customTheme.name=null),h.store.dispatch("existing"===h.pinMode?new se.Q6({dashboardId:h.selectedDashboardId,tile:Ce,telemetryEvent:Ae}):new se.G$({name:h.newDashboardName,tile:Ce,telemetryEvent:Ae})),h.dlgService.closeAll()})},R.prototype.getTelemetryEvent=function(){var h=this;if(this.config.pinEvent)return(0,xe.of)(this.config.pinEvent);if(this.config.pinData){var d=this.config.pinData,k=d.packageId,K=(O=d.modelId)?this.store.select(J.e6,{modelId:O,packageId:k}):(0,xe.of)(null),fe=k?this.store.select(re.Jh,{id:k}):(0,xe.of)(null);return(0,$e.aj)([K,fe]).pipe((0,Le.U)(function(Ae){var Ce=Ae[0],nt=Ae[1],it=(0,p.s_)(d),Ge=h.visualPlugin.isCustomVisual(it);return h.telemetryService.startEvent(S.Ul,{visualType:it,source:0===h.config.pinTileContext?"Dashboard":"Report",reason:"",unsupportedVisualPinned:!1,isCustomVisual:Ge,widgetType:"",reportPageContainsScriptVisuals:!1,sourceOrigin:h.getSourceOrigin(Ce?Ce.permissions:null,nt)})}))}if(this.config.pinReportPageArgs){var O,me=this.config.pinReportPageArgs;return k=me.packageId,K=(O=me.modelId)?this.store.select(J.e6,{modelId:O,packageId:k}):(0,xe.of)(null),fe=k?this.store.select(re.Jh,{id:k}):(0,xe.of)(null),(0,$e.aj)([K,fe]).pipe((0,Le.U)(function(Ge){var Xe=Ge[0],mt=Ge[1];return h.telemetryService.startEvent(S.Ul,{visualType:"reportPage",source:0===h.config.pinTileContext?"Dashboard":"Report",reason:"",unsupportedVisualPinned:!1,isCustomVisual:!1,widgetType:"",reportPageContainsScriptVisuals:h.isScriptVisualInLivePage(me.exploration),sourceOrigin:h.getSourceOrigin(Xe?Xe.permissions:null,mt)})}))}},R.prototype.onCancelClick=function(){this.dlgService.closeAll()},R.prototype.canPin=function(){var h;return"existing"===this.pinMode&&!!this.selectedDashboardId||"new"===this.pinMode&&!(null===(h=this.newDashboardName)||void 0===h||!h.trim())},R.prototype.getSourceOrigin=function(h,d){return d&&d.packageType===Re.yR.AppInstance?"App":h?1===h||5===h?"Shared":"Owned":"Unknown"},R.prototype.isScriptVisualInLivePage=function(h){return!!(h&&h.exploreCanvas&&h.exploreCanvas.visualContainers)&&(0,W.OV)(h.exploreCanvas.contract.visualContainers,this.visualPlugin)},R.prototype.initializeContract=function(){var h,d;if(this.config.tileContract){var O=this.config.tileContract.type;if(this.isPinLiveReport=O===H.YU.report,O===H.YU.composite){var K=null===(h=this.config.tileContract.$config.visualContainer)||void 0===h?void 0:h.themeCollection,fe=null===(d=K?.customTheme)||void 0===d?void 0:d.name;this.isThemeSwitcherAvailable=!!fe,this.isThemeSwitcherAvailable&&this.targetThemeName$.next(fe)}this.currentContract$=(0,xe.of)(this.config.tileContract)}else{if(this.config.pinData){var me=this.config.pinData,Ae=me.themeCollection&&me.themeCollection.customTheme;return this.isThemeSwitcherAvailable=!!Ae,this.isThemeSwitcherAvailable&&this.targetThemeName$.next(Ae.name),void this.updateContractFromPinData()}if(this.config.pinReportPageArgs)return this.isPinLiveReport=!0,void this.updateContractFromPinReportPageArgs()}},R.prototype.updateContractFromPinReportPageArgs=function(){var h=this,d=this.config.pinReportPageArgs,O=d.modelId,K=O?this.store.select(J.e6,{modelId:O,packageId:d.packageId}):(0,xe.of)(null),fe=d.reportId?this.store.select(F.yF,d.reportId).pipe((0,Ue.h)(function(Ce){return!!Ce})):(0,xe.of)(null),me=fe.pipe((0,Ie.zg)(function(Ce){return h.isUsageMetricsReport(Ce)})),Ae=me.pipe((0,Ie.zg)(function(Ce){return h.generateReportFilters(d,Ce)}));this.currentContract$=(0,$e.aj)([K,fe,me,Ae]).pipe((0,X.q)(1),(0,Le.U)(function(Ce){return h.getTileContractFromPinReportArgs(d,Ce[0],Ce[1],Ce[2],Ce[3])}))},R.prototype.getTileContractFromPinReportArgs=function(h,d,O,k,K){var fe=k&&!_.isEmpty(h.additionalODataFilter),me=h.section.size;return(0,U.r_)(h.reportId,O?O.modelId:void 0,h.packageId,h.section.id,h.displayText?h.displayText:O.displayName,h.subDisplayText?h.subDisplayText:h.section.displayName,h.action||{action:ne.$Ez,targetSlideId:h.section.name,filter:fe?h.additionalODataFilter:""},h.pod,K,h.utterance,me?me.width:void 0,me?me.height:void 0)},R.prototype.generateReportFilters=function(h,d){return(0,g.mG)(this,void 0,void 0,function(){var O,k,fe;return(0,g.Jh)(this,function(me){switch(me.label){case 0:return O=d&&!_.isEmpty(h.additionalODataFilter),k=h.filters||[],O?[4,this.lazyProvider.get("@powerbi/ODataFilterParser/OData-Filter-Parser.module#ODataFilterParserModule","odataFilterParserService")]:[3,3];case 1:return[4,me.sent().tryGetFilters(h.additionalODataFilter)];case 2:fe=me.sent(),k.push.apply(k,fe||[]),me.label=3;case 3:return k?[2,this.explorationSerializer.stringifyFilterCollectionConfig(this.explorationSerializer.serializeFilterCollection(k))]:[2]}})})},R.prototype.isUsageMetricsReport=function(h){return this.featureSwitchService.featureSwitches.usageMetricsEnabled&&h?this.usageMetricsReport.isUsageMetricsArtifactUsingReportContract(h):(0,xe.of)(!1)},R.prototype.updateContractFromPinData=function(){var h=this,d=this.config.pinData;this.isThemeSwitcherAvailable=!(!d.themeCollection||!d.themeCollection.customTheme);var k=(0,p.s_)(d),K=d.modelId,me=K?this.store.select(J.e6,{modelId:K,packageId:d.packageId}):(0,xe.of)(null),Ae=d.reportId?this.store.select(F.yF,d.reportId):(0,xe.of)(null);this.currentContract$=(0,$e.aj)([me,Ae]).pipe((0,X.q)(1),(0,Le.U)(function(Ce){var nt=Ce[0];return(0,U.O4)(d,h.visualPlugin.capabilities(k),nt)}))},R.prototype.getInformationProtectionIUCWarning=function(){var h=this;if(!this.informationProtectionService.isInformationProtectionEditEnabled())return(0,xe.of)(null);var d=0===this.config.pinTileContext;return this.currentContract$.pipe((0,Ie.zg)(function(O){return O.reportId?h.informationProtectionService.getOrLoadArtifactInformationProtection(Ee.B.Report,O.reportId,null,!0):O.modelId?h.informationProtectionService.getOrLoadArtifactInformationProtection(Ee.B.Model,O.modelId,null,!0):(0,xe.of)(null)}),(0,Le.U)(function(O){if(!O||O.isInvalid)return null;var k=h.informationProtectionUIService.getDisplayNameFromArtifactInformationProtection(O);return O.artifactType===Ee.B.Report?{bannerType:2,iconName:"pbi-glyph-info",message:h.localizationService.format(d?"PinTile_Warning_LabelInheritanceUponCreation_FromDashboard_ReportTile":"PinTile_Warning_LabelInheritanceUponCreation_FromReport",[k])}:O.artifactType===Ee.B.Model?{bannerType:2,iconName:"pbi-glyph-info",message:h.localizationService.format(d?"PinTile_Warning_LabelInheritanceUponCreation_FromDashboard_DatasetTile":"PinTile_Warning_LabelInheritanceUponCreation_FromDataset",[k])}:null}))},R.\u0275fac=function(d){return new(d||R)(a.\u0275\u0275directiveInject(q.yh),a.\u0275\u0275directiveInject(Se.o),a.\u0275\u0275directiveInject(We.x),a.\u0275\u0275directiveInject(qe.D),a.\u0275\u0275directiveInject(et.vZ),a.\u0275\u0275directiveInject(ot.m),a.\u0275\u0275directiveInject(ue.L),a.\u0275\u0275directiveInject(Ye.E),a.\u0275\u0275directiveInject(tt.u),a.\u0275\u0275directiveInject(Je.F),a.\u0275\u0275directiveInject(je.y0),a.\u0275\u0275directiveInject(l.WI),a.\u0275\u0275directiveInject(j.d))},R.\u0275cmp=a.\u0275\u0275defineComponent({type:R,selectors:[["pin-tile-dialog-new"]],decls:38,vars:32,consts:[[1,"pin-tile-dialog"],[1,"tile-container"],["data-testid","pin-tile-preview",1,"tile-preview"],["class","live-report-state",4,"ngIf"],[4,"ngIf"],["class","tile-theme-selector",4,"ngIf"],[1,"pin-modal-body"],[1,"close-container"],[1,"infonav-dialogCloseIcon","close-button",3,"click"],[1,"close","glyphicon","pbi-glyph-close","glyph-mini"],[1,"pin-modal-title"],["localize","ReportContainer_PinToDashboardTitle","localize-tooltip","ReportContainer_PinToDashboardTitle",1,"title","trimmedTextWithEllipsis"],["localize","ReportContainer_SelectExistingOrCreateNewDashboardMessage",1,"select-create-message"],["pbi-auto-focus","",1,"pin-modal-form"],["localize","ReportContainer_WhereToPinMessage",1,"pin-message"],[1,"pin-mode-radio",3,"ngModel","ngModelChange"],["data-testid","pin-existing-dashboard","value","existing",1,"existing-dashboard",3,"disabled","checked"],["value","new","data-testid","pin-new-dashboard",1,"new-dashboard",3,"checked"],[1,"warning-message-container"],["class","liveReport",4,"ngIf"],["class","noReshareWarning",4,"ngIf"],["class","informationProtectionWarning",4,"ngIf"],[1,"pin-modal-footer"],["data-testid","pin-btn",1,"pbi-fluent-button","primary",3,"disabled","click"],["data-testid","cancel-btn",1,"pbi-fluent-button",3,"click"],[1,"live-report-state"],["localize","PinLiveReport_Preview",1,"previewSection"],["localize","PinLiveReport_SavedState"],[3,"disableInteractions","shouldOverrideCustomTheme","contract","themeName"],[1,"tile-theme-selector"],["localize","ReportContainer_TileFormattingMessage",1,"theme-target-message"],[1,"theme-target-radio",3,"ngModel","ngModelChange"],["value","destination","data-testid","destination-theme",1,"destination-theme"],["value","current","data-testid","current-theme",1,"current-theme",3,"checked"],["localize","ReportContainer_SelectExistingDashboard","for","pinDialogDashboardSelect"],["pbiMatSelect","","class","pbi-modern-select","data-testid","selected-dashboard","panelClass","pbi-modern-select-panel themeableElement","name","dashboardPicker","aria-labelledby","pinDialogDashboardSelect",3,"value","valueChange","selectionChange",4,"ngIf"],["pbiMatSelect","","data-testid","selected-dashboard","panelClass","pbi-modern-select-panel themeableElement","name","dashboardPicker","aria-labelledby","pinDialogDashboardSelect",1,"pbi-modern-select",3,"value","valueChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["pbiLabel",""],["pbiInput","","ng-trim","false","min","1","maxlength","500","type","text","data-testid","pin-new-dashboard-name",1,"pbi-text-input",3,"ngModel","ngModelChange"],[1,"liveReport"],[3,"modulePath","componentId","inputArgs"],[1,"noReshareWarning"],[1,"informationProtectionWarning"]],template:function(d,O){1&d&&(a.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2),a.\u0275\u0275template(3,he,3,0,"div",3),a.\u0275\u0275template(4,ce,4,8,"ng-container",4),a.\u0275\u0275pipe(5,"async"),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(6,_e,9,8,"div",5),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(7,"div",6)(8,"div",7)(9,"button",8),a.\u0275\u0275listener("click",function(){return O.onClose()}),a.\u0275\u0275pipe(10,"localize"),a.\u0275\u0275element(11,"i",9),a.\u0275\u0275elementEnd()(),a.\u0275\u0275elementStart(12,"div",10),a.\u0275\u0275element(13,"h2",11)(14,"p",12),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(15,"div",13),a.\u0275\u0275element(16,"p",14),a.\u0275\u0275elementStart(17,"pbi-radio-group",15),a.\u0275\u0275listener("ngModelChange",function(K){return O.pinMode=K}),a.\u0275\u0275elementStart(18,"pbi-radio-button",16),a.\u0275\u0275text(19),a.\u0275\u0275pipe(20,"localize"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(21,"pbi-radio-button",17),a.\u0275\u0275text(22),a.\u0275\u0275pipe(23,"localize"),a.\u0275\u0275elementEnd()(),a.\u0275\u0275template(24,ut,4,3,"section",4),a.\u0275\u0275template(25,N,5,4,"pbi-form-field",4),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(26,"div",18),a.\u0275\u0275template(27,L,2,5,"div",19),a.\u0275\u0275template(28,ie,2,5,"div",20),a.\u0275\u0275template(29,ye,2,5,"div",21),a.\u0275\u0275pipe(30,"async"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(31,"div",22)(32,"button",23),a.\u0275\u0275listener("click",function(){return O.onPinClick()}),a.\u0275\u0275text(33),a.\u0275\u0275pipe(34,"localize"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(35,"button",24),a.\u0275\u0275listener("click",function(){return O.onCancelClick()}),a.\u0275\u0275text(36),a.\u0275\u0275pipe(37,"localize"),a.\u0275\u0275elementEnd()()()()),2&d&&(a.\u0275\u0275advance(3),a.\u0275\u0275property("ngIf",O.isPinLiveReport),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",a.\u0275\u0275pipeBind1(5,18,O.currentContract$)),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",O.isThemeSwitcherAvailable),a.\u0275\u0275advance(3),a.\u0275\u0275attribute("aria-label",a.\u0275\u0275pipeBind1(10,20,"Close")),a.\u0275\u0275advance(8),a.\u0275\u0275property("ngModel",O.pinMode),a.\u0275\u0275advance(1),a.\u0275\u0275property("disabled",!O.hasAvailableDashboards)("checked",O.hasAvailableDashboards),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind1(20,22,"ReportContainer_UseExistingDashboardRadioText")," "),a.\u0275\u0275advance(2),a.\u0275\u0275property("checked",!O.hasAvailableDashboards),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind1(23,24,"ReportContainer_UseNewDashboardRadioText")," "),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf","existing"===O.pinMode),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","new"===O.pinMode),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",O.isPinLiveReport),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",O.isNotFullyResharable),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",a.\u0275\u0275pipeBind1(30,26,"existing"!==O.pinMode&&O.informationProtectionIUCWarning$)),a.\u0275\u0275advance(3),a.\u0275\u0275property("disabled",!O.canPin()),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind1(34,28,O.isPinLiveReport?"PinLiveReport_PinLive":"ReportContainer_Pin")," "),a.\u0275\u0275advance(3),a.\u0275\u0275textInterpolate(a.\u0275\u0275pipeBind1(37,30,"PBI_Button_Label_Cancel")))},dependencies:[B.NgForOf,B.NgIf,G.Fj,G.JJ,G.nD,G.On,Y.X,pe.r,ge.o,oe.d,Fe.bP,Fe.ug,Fe.nm,le.x,f.x8,x.CK,M.R,D.r,V.h,B.AsyncPipe,Z.F],styles:["[_nghost-%COMP%]{padding:24px;display:flex;flex-direction:column;color:rgba(0,0,0,.87)}.tile-container[_ngcontent-%COMP%]{background-color:#f4f4f4;width:60%;margin:-24px 0 -24px -24px}.pin-tile-dialog[_ngcontent-%COMP%]{display:flex;height:100%}.live-report-state[_ngcontent-%COMP%]{display:flex;margin-left:5px;margin-bottom:4px;font-size:12px;width:270px;color:var(--fluent-theme-neutral-secondary-color, #605E5C)}.live-report-state[_ngcontent-%COMP%]   .previewSection[_ngcontent-%COMP%]{font-family:Segoe UI Bold,wf_segoe-ui_bold,helvetica,arial,sans-serif;margin-right:4px}.tile-preview[_ngcontent-%COMP%]{width:270px;height:180px;display:flex;margin-left:auto;margin-right:auto;margin-top:45px;flex-direction:column}.tile-theme-selector[_ngcontent-%COMP%]{margin-left:24px}.tile-theme-selector[_ngcontent-%COMP%]   .theme-target-message[_ngcontent-%COMP%]{font-family:Segoe UI Semibold,wf_segoe-ui_semibold,helvetica,arial,sans-serif;margin-bottom:0;margin-top:5px}.pin-modal-body[_ngcontent-%COMP%]{display:flex;width:50%;flex-direction:column;margin:0 20px 0 27px}.pin-modal-title[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:26px;font-weight:400;margin-bottom:4px;margin-top:0}.select-create-message[_ngcontent-%COMP%]{font-size:12px}pbi-radio-button[_ngcontent-%COMP%]{margin-bottom:10px;display:block}.pin-message[_ngcontent-%COMP%]{font-family:Segoe UI Semibold,wf_segoe-ui_semibold,helvetica,arial,sans-serif;margin-top:0;margin-bottom:4px}.pin-modal-footer[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:flex-end}.pin-modal-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:5px}.pin-modal-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif}.warning-message-container[_ngcontent-%COMP%]{margin-top:12px}.close-container[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;margin-right:-25px;margin-top:-10px}.close-container[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{padding:0;border:none;background:none;width:12px}"]}),R}(),ve=n(1731),Ve=n(44408),Be=n(55710),Me=n(67659),Ze=n(31),ke=n(46055),C=n(32288),v=n(26409),E=n(77906),A=n(95859),$=n(76966),ae=n(14525),ee=n(93367),Oe=n(17953),rt=n(59951),lt=[{componentType:be,componentIdentifier:"PinTileDialogComponentId"}],ft=function(){function R(){}return R.\u0275fac=function(d){return new(d||R)},R.\u0275mod=a.\u0275\u0275defineNgModule({type:R}),R.\u0275inj=a.\u0275\u0275defineInjector({providers:[ve.v],imports:[B.CommonModule,G.u5,Ze.Y,C.J,Be.jT,Ve.Ps,A.v,ke.b,ee.U,rt.v,ae.g,Oe.F,f.uw,v.z,E.N.withLazyScopedServices([{serviceName:"TileoptionsActionsService",modulePath:"@powerbi/TileoptionsActions/tileoptions-actions.module#TileoptionsActionsModule"}]),$.c.withManifest(lt),Me._]}),R}()},1731:function(Qe,de,n){n.d(de,{v:function(){return H}});var g=n(81337),l=n(50544),se=n(1316),Q=n(40093),e=n(59694),m=n(38078),T=n(46544),J=n(50423),re=n(49092),F=n(66977),H=function(){function U(p,W,S){this.dataProxy=p,this.visualPluginOps=W,this.telemetryService=S}return U.prototype.convertTileData=function(p,W){try{p.tileDataSet=this.parseTileData(p,W.tileDataType)}catch(S){throw this.telemetryService.logEvent(se.UH,{tileType:l.YU[l.YU.composite],message:(0,e.W)("DsrParseError:{0} with modelId:{1} and tileId:{2}",S.message,p.modelId.toString(),p.id.toString())}),m.b$.ensureError(S)}return p.tileDataSet},U.prototype.requiresData=function(p){var W=this.visualPluginOps;if(p){if(p&&p.type){if(!W)return!0;if(!W.isQueryVisual(p.type))return!1}return!0}},U.prototype.getVisualDefinitionData=function(p,W,S){return(0,g.mG)(this,void 0,void 0,function(){var Re;return(0,g.Jh)(this,function(Ee){switch(Ee.label){case 0:return p.type!==l.YU.composite?[2,null]:this.requiresData(W)?(Re=this.convertTileData(p,S),[4,this.readDataView(W,Re,!1)]):[2,{dataView:null}];case 1:return[2,Ee.sent()]}})})},U.prototype.readDataView=function(p,W,S){return(0,g.mG)(this,void 0,void 0,function(){var ne,Ee,ze;return(0,g.Jh)(this,function(Ne){switch(Ne.label){case 0:return Ee={type:W.type,query:{dataSources:null,command:W.data},allowResultFromClientCache:S,perfId:ne=p.type,kinds:this.visualPluginOps.dataViewKinds(ne)},[4,this.dataProxy.execute(Ee)];case 1:return[2,{dataView:(ze=Ne.sent())&&ze.dataReaderResult?ze.dataReaderResult.dataView:null,dataViewSource:ze&&ze.dataViewSource?ze.dataViewSource:null}]}})})},U.prototype.parseTileData=function(p,W){var ne,S=(0,m.BL)("Parse tile data");try{if(p.tileDataBinaryBase64Encoded){var Re=(0,Q.Wh)(p.tileDataBinaryBase64Encoded);ne=JSON.parse(Re)}else p.tileData&&(ne=JSON.parse(p.tileData));return{type:W,data:ne}}finally{S()}},U.\u0275fac=function(W){return new(W||U)(J.\u0275\u0275inject(re.d),J.\u0275\u0275inject(F.f),J.\u0275\u0275inject(T.y0))},U.\u0275prov=J.\u0275\u0275defineInjectable({token:U,factory:U.\u0275fac}),U}()},70785:function(Qe,de,n){n.d(de,{k:function(){return e}});var g=n(62458),l=n(50423),se=n(81213),e=function(){function m(T){this.errorService=T,g.fF.assertValue(T,"errorService")}return m.prototype.onErrorIconClicked=function(T){var J=T.errorTitle,re=T.errorTitle,F=T.errorDetails;if(T.isError&&J&&re){var H=F&&F.displayableErrorInfo;if(H){for(var U=0,p=H;U<p.length;U++){var W=p[U];if(W.errorInfoValue){J=W.errorInfoKey,re=W.errorInfoValue;break}}this.errorService.error(F.message,"Tile_FailedToDisplay",{source:F.source,errorDetails:F.message,displayableErrorInfo:F.displayableErrorInfo,debugErrorInfo:F.debugErrorInfo,helpLink:F.helpLink,hideErrorHelperText:F.hideErrorHelperText})}}},m.prototype.getTileDisplayError=function(T){return null},m.prototype.getTileDisplayErrorFromConfig=function(T){return null},m.prototype.isVisualSupportedInErrorState=function(T){var J=T.composite,re=T.realTime;return!(!J||this.shouldShowCompositeTileError(J)||!J.tileData||!J.tileData.data)||!!(re&&re.visual&&re.visual.data)},m.prototype.shouldShowCompositeTileError=function(T){return T.errorDetails&&T.errorDetails.forceShowError},m.\u0275fac=function(J){return new(J||m)(l.\u0275\u0275inject(se.T))},m.\u0275prov=l.\u0275\u0275defineInjectable({token:m,factory:m.\u0275fac,providedIn:"root"}),m}()},10367:function(Qe,de,n){n.d(de,{y:function(){return l}});var l=new(n(50423).InjectionToken)("TileOptionsActionsServiceInjectionToken")},82053:function(Qe,de,n){n.d(de,{U:function(){return e},d:function(){return Q}});var g=n(81337),l=n(50423),se=n(27119),Q=function(m){function T(J,re){void 0===J&&(J="Unknown");var F=m.call(this,re)||this;return F.operation=J,F}return(0,g.ZT)(T,m),T}(Error),e=function(){function m(T){this.storageUsageService=T}return Object.defineProperty(m.prototype,"quotaLimitInMB",{get:function(){return this.storageUsageService.quotaLimitInMB},enumerable:!1,configurable:!0}),m.prototype.getUsageModels=function(T,J){return this.storageUsageService.getUsageModels(T,J)},m.prototype.getUsage=function(){return this.storageUsageService.getUsage()},m.prototype.checkQuotaExceeded=function(T,J){return void 0===T&&(T="Unknown"),this.storageUsageService.checkQuotaExceeded(T,J)},m.prototype.showQuotaExceedDialog=function(){this.storageUsageService.showQuotaExceedDialog()},m.prototype.isInVisibleDashboard=function(T){return this.storageUsageService.isInVisibleDashboard(T)},m.\u0275fac=function(J){return new(J||m)(l.\u0275\u0275inject(se.m))},m.\u0275prov=l.\u0275\u0275defineInjectable({token:m,factory:m.\u0275fac,providedIn:"root"}),m}()},12548:function(Qe,de,n){n.d(de,{Z:function(){return ut}});var g=n(81337),l=n(45665),se=n(21429),Q=n(35563),e=n(60756),m=n(90047),T=n(34031),J=n(41134),re=n(3535),F=n(34073),H=n(74076),U=n(60134),p=n(64115),W=n(90807),S=n(81213),ne=n(14463),Re=n(26610),Ee=n(58317),ze=n(2142),je=n(50600),Ne=n(50550),$e=n(45034),xe=n(82053),Ke=n(46544),X=n(11547),Ie=n(9936),Le=n(59017),we=n(37272),Ue=n(82762),a=n(14172),q=n(42195),Se=n(48787),We=n(59822),qe=n(23558),et=n(81905),ot=n(64344),ue=n(50423),Ye=n(85732),tt=n(62458),Je=n(77326),j=n(66531),B=n(9380),G=function(){function N(I,L,ie){this.informationProtectionService=I,this.informationProtectionUIService=L,this.featureSwitchService=ie}return N.prototype.ensureMandatoryLabelPolicyOnArtifact=function(I,L,ie,ye,be,ve,Ve){return(0,g.mG)(this,void 0,void 0,function(){var Me,Ze,ke;return(0,g.Jh)(this,function(C){switch(C.label){case 0:if(!(I&&ye&&L&&ie&&be&&ve))return tt.fF.assertFail("ensureMandatoryLabelPolicyOnArtifact: missing required parameters"),[2,!0];C.label=1;case 1:return C.trys.push([1,5,,6]),[4,this.informationProtectionService.isLabelingRequiredForArtifact(ye,I,this.isDefaultLabelSupported(be)).toPromise()];case 2:return C.sent()?[4,this.informationProtectionUIService.showInformationProtectionSelectionDialog(be,ye,ve,null,Ve,null)]:[2,!0];case 3:return Me=C.sent(),_.isEmpty(Me)?[2,!1]:[4,this.informationProtectionService.upsertArtifactInformationProtection(Me,I,L,ie,ye).toPromise()];case 4:return(Ze=C.sent())&&Ze.isInvalid?[2,!1]:[2,!0];case 5:return ke=C.sent(),this.informationProtectionService.logMandatoryLabelingContinueDespiteFailure(ye,be,ve,ke.message),[2,!0];case 6:return[2]}})})},N.prototype.ensureMandatoryLabelPolicyOnNewArtifact=function(I,L,ie,ye){return(0,g.mG)(this,void 0,void 0,function(){var be,Ve,Be;return(0,g.Jh)(this,function(Me){switch(Me.label){case 0:be={canContinue:!0,selectedLabelId:null},Me.label=1;case 1:return Me.trys.push([1,4,,5]),[4,this.informationProtectionService.isLabelingRequired(I,ye??this.isDefaultLabelSupported(L)).toPromise()];case 2:return Me.sent()?[4,this.informationProtectionUIService.showInformationProtectionSelectionDialog(L,I,null,null,ie)]:[2,be];case 3:return[2,{canContinue:!!(Ve=Me.sent()),selectedLabelId:Ve}];case 4:return Be=Me.sent(),this.informationProtectionService.logMandatoryLabelingContinueDespiteFailure(I,L,null,Be.message),[2,be];case 5:return[2]}})})},N.prototype.ensureMandatoryLabelOnNewDashboard=function(I,L){return(0,g.mG)(this,void 0,void 0,function(){var ie,ye,be;return(0,g.Jh)(this,function(ve){switch(ve.label){case 0:ie={canContinue:!0,selectedLabelId:null},ve.label=1;case 1:return ve.trys.push([1,4,,5]),[4,this.informationProtectionService.getArtifactUpstreamLabel(I,L).toPromise()];case 2:return(ye=ve.sent())&&!ye.isInvalid?[2,ie]:[4,this.ensureMandatoryLabelPolicyOnNewArtifact(je.B.Dashboard,"NewDashboard","EimInformationProtection_SelectSensitivityLabelDialog_Message_NewDashboard")];case 3:return[2,ve.sent()];case 4:return be=ve.sent(),this.informationProtectionService.logMandatoryLabelingContinueDespiteFailure(je.B.Dashboard,"NewDashboard",null,be.message),[2,ie];case 5:return[2]}})})},N.prototype.ensureMandatoryLabelOnNewReport=function(I,L,ie){return(0,g.mG)(this,void 0,void 0,function(){return(0,g.Jh)(this,function(ye){return[2,this.ensureMandatoryLabelOnNewReportBase(0,I,L,ie??!0)]})})},N.prototype.ensureMandatoryLabelOnNewRdlReport=function(I,L){return(0,g.mG)(this,void 0,void 0,function(){return(0,g.Jh)(this,function(ie){return[2,this.ensureMandatoryLabelOnNewReportBase(1,I,L)]})})},N.prototype.ensureMandatoryLabelOnNewReportBase=function(I,L,ie,ye){return(0,g.mG)(this,void 0,void 0,function(){var be,ve,Ve,Be,Me,Ze;return(0,g.Jh)(this,function(ke){switch(ke.label){case 0:if(be={canContinue:!0,selectedLabelId:null},1===I)ve=je.B.RdlReport,Ve="NewRdlReport",Be=this.featureSwitchService.featureSwitches.EimInformationProtectionMandatoryLabelNewPaginatedReport;else{if(0!==I)return[2,be];ve=je.B.Report,Ve="NewReport",Be=!0}if(!Be)return[2,be];if(!L&&!ie)return tt.fF.assertFail("ensureMandatoryLabelOnNewReportBase: missing required parameters. Report type: "+I.toString()),[2,be];ke.label=1;case 1:return ke.trys.push([1,7,,8]),Me=void 0,ie?[4,this.informationProtectionService.getArtifactUpstreamLabel(ie,null).toPromise()]:[3,3];case 2:return Me=ke.sent(),[3,5];case 3:return[4,this.informationProtectionService.getArtifactUpstreamLabel(null,L).toPromise()];case 4:Me=ke.sent(),ke.label=5;case 5:return Me&&!Me.isInvalid?[2,be]:[4,this.ensureMandatoryLabelPolicyOnNewArtifact(ve,Ve,"EimInformationProtection_SelectSensitivityLabelDialog_Message_NewReport",ye)];case 6:return[2,ke.sent()];case 7:return Ze=ke.sent(),this.informationProtectionService.logMandatoryLabelingContinueDespiteFailure(ve,Ve,null,Ze.message),[2,be];case 8:return[2]}})})},N.prototype.isDefaultLabelSupported=function(I){switch(I){case"NewDashboard":case"NewReport":case"NewDataset":case"SaveEditedReport":return!0;default:return!1}},N.\u0275fac=function(L){return new(L||N)(ue.\u0275\u0275inject(Je.u),ue.\u0275\u0275inject(j.F),ue.\u0275\u0275inject(B.vZ))},N.\u0275prov=ue.\u0275\u0275defineInjectable({token:N,factory:N.\u0275fac,providedIn:"root"}),N}(),Y=n(65181),pe=n(44204),ge=n(76072),oe=n(43025),Fe=function(N){function I(){return null!==N&&N.apply(this,arguments)||this}return(0,g.ZT)(I,N),I}(Error),le=function(N){function I(){return null!==N&&N.apply(this,arguments)||this}return(0,g.ZT)(I,N),I}(Error),f=function(){function N(I,L,ie,ye,be,ve,Ve,Be,Me,Ze,ke){var C=this;this.action$=I,this.injector=L,this.store=ie,this.quotaService=ye,this.informationProtectionArtifactService=be,this.localizationService=ve,this.notificationToastService=Ve,this.telemetryService=Be,this.lazyProviderModern=Me,this.globalEventBridge=Ze,this.subfolderContextService=ke,this.addTemporaryTile$=(0,e.GW)(function(){return C.action$.pipe((0,e.l4)(m.pE),(0,a.U)(function(v){return v.payload}),(0,q.zg)(function(v){return(0,X.of)(new l.Ph({id:v.tile.objectId}))}))}),this.saveTile$=(0,e.GW)(function(){return C.action$.pipe((0,e.l4)(l.$f),(0,q.zg)(function(v){return(0,Ie.D)((0,X.of)(v.payload),C.store.select((0,Q.YH)({id:v.payload.tileId})).pipe((0,Se.q)(1)))}),(0,q.zg)(function(v){var E=v[0],A=v[1],$=E.prevTile,ae=C.telemetryService.startEvent(E.eventFactory,{readOnlyTileEdited:!1,titleEdited:A.displayText!==$.displayText,subTitleEdited:A.subDisplayText!==$.subDisplayText,actionEdited:A.action!==$.action,configEdited:A.config!==$.config});return C.saveTile($,A,ae.event).pipe((0,a.U)(function(){return ae.resolve(),new l.vy((0,g.pi)((0,g.pi)({},E),{tile:A}))}),(0,We.K)(function(ee){return 401===ee.status?(ae.event.info.readOnlyTileEdited=!0,ae.resolve()):ae.reject(),C.errorService.error(C.localizationService.get("TileEditor_UpdateFailed"),"TileEditor_UpdateFailed",{requestId:ee.requestId,statusCode:ee.status.toString()}),(0,X.of)(new l.XH(E))}))}))}),this.saveTileSuccess$=(0,e.GW)(function(){return C.action$.pipe((0,e.l4)(l.zl),(0,q.zg)(function(v){return(0,Ie.D)((0,X.of)(v.payload),C.store.select(F.ml).pipe((0,Se.q)(1)))}),(0,q.zg)(function(v){var E=v[0],A=v[1],$=[new l.zn];return A&&$.push(new T.lN({id:E.prevTile.dashboardId,typeOfContentPackItem:Re.m.Dashboard})),$}))}),this.pinToExistingDashboard$=(0,e.GW)(function(){return C.action$.pipe((0,e.l4)(m.r6),(0,a.U)(function(v){return v.payload}),(0,q.zg)(function(v){return(0,Le.aj)([(0,X.of)(v),C.store.select(p.l1,{id:v.dashboardId}),C.store.select(H.S6)]).pipe((0,Se.q)(1))}),(0,q.zg)(function(v){var E=v[0],A=v[1],ae=C.checkDashboardLabel(A,v[2].displayName);return(0,Le.aj)([(0,X.of)(E),(0,X.of)(A),ae]).pipe((0,Se.q)(1))}),(0,q.zg)(function(v){var E,A=v[0];return v[2]?C.addTile(v[1],A.tile,null===(E=A.telemetryEvent)||void 0===E?void 0:E.event).pipe((0,q.zg)(function(ee){return(0,X.of)(new m.JA({dashboardId:A.dashboardId,tile:A.tile,tileFromService:ee.data}))}),(0,We.K)(function(ee){var Oe;return"AddTileRequestTooLarge"===(null===(Oe=ee?.error)||void 0===Oe?void 0:Oe.code)&&C.errorService.error(C.localizationService.get("PinTile_Error_TooLargeDetails"),"PinTile_Error_TooLarge",{title:C.localizationService.get("PinTile_Error_TooLarge"),requestId:ee.requestId,statusCode:ee.status.toString(),showAdditionalErrorInfo:!1}),(0,X.of)(new m.oO({dashboardId:A.dashboardId,tileId:A.tile.objectId}))})):(0,we.c)()}))}),this.pinToExistingDashboardSuccess$=(0,e.GW)(function(){return C.action$.pipe((0,e.l4)(m.bI),(0,a.U)(function(v){return v.payload}),(0,q.zg)(function(v){return(0,Le.aj)([(0,X.of)(v),C.store.select((0,Q.Is)({objectId:v.dashboardId}))]).pipe((0,Se.q)(1))}),(0,q.zg)(function(v){var E=v[0];return v[1].some(function(ae){return C.hasLayoutDefinition(1,ae)})||C.loadMobileAuthoringService().then(function(){C.mobileAuthoringDialogService.showCreateMobileLayoutMessage(E.dashboardId)}),(0,we.c)()}))}),this.pinToNewDashboard$=(0,e.GW)(function(){return C.action$.pipe((0,e.l4)(m.C7),(0,a.U)(function(v){var E;if(null===(E=v.payload.name)||void 0===E||!E.trim())throw new le("name is empty");if(C.quotaService.checkQuotaExceeded("AddDashboard"))throw new xe.d("AddDashboard","dashboard quota exceeded");return v.payload}),(0,q.zg)(function(v){return(0,Ie.D)((0,X.of)(v),C.checkMandatoryLabel(v.tile).pipe((0,a.U)(function(E){if(!E.canContinue)throw new Fe("no mandatory label");return E})),C.store.select(H.S6).pipe((0,Se.q)(1)))}),(0,q.zg)(function(v){var E=v[0],A=E.name,$=E.tile,ae=E.telemetryEvent,ee=v[1],Oe=v[2];return(0,Ie.D)((0,X.of)({tile:$,telemetryEvent:ae,selectedGroup:Oe}),C.addDashboard(A,Oe.folderId,$.reportId,$.modelId,ee,ae),C.store.select(U.aR).pipe((0,Se.q)(1)))}),(0,q.zg)(function(v){var E=v[0],A=E.tile,$=E.telemetryEvent,ae=E.selectedGroup,ee=v[1],Oe=v[2];if(C.quotaService.checkQuotaExceeded("AddTile"))throw new xe.d("AddTile","tile quota exceeded");var rt=Object.assign({},ee.data,{permissions:7,ownerInfo:(0,re.I)(Oe,ae)});return C.addTile(rt,A,$?.event).pipe((0,q.zg)(function(lt){return C.loadMobileAuthoringService().then(function(){C.mobileAuthoringDialogService.showCreateMobileLayoutMessage(rt.objectId)}),(0,X.of)(new m.o7({dashboard:rt,tile:A,tileFromService:lt.data}))}))}),(0,We.K)(function(v){var E,A;if(v instanceof Error)return(0,X.of)(new m.Iz({message:v.message}));var $=v,ae=$.status.toString(),ee=$.requestId,Oe=null===(E=$.error)||void 0===E?void 0:E.message;return"AddTileRequestTooLarge"===(null===(A=v.error)||void 0===A?void 0:A.code)?C.errorService.error(C.localizationService.get("PinTile_Error_TooLargeDetails"),"PinTile_Error_TooLarge",{title:C.localizationService.get("PinTile_Error_TooLarge"),requestId:$.requestId,statusCode:$.status.toString(),showAdditionalErrorInfo:!1}):401!==v.status&&C.errorService.error(C.localizationService.get("Dashboard_FailToCreateDashboardMessage"),"Dashboard_FailToCreateDashboard",{requestId:$.requestId,statusCode:$.status.toString()}),(0,X.of)(new m.Iz({statusCode:ae,requestId:ee,message:Oe}))}))}),this.saveNewTile$=(0,e.GW)(function(){return C.action$.pipe((0,e.l4)(m.qV),(0,a.U)(function(v){return v.payload}),(0,q.zg)(function(v){return(0,Ie.D)((0,X.of)(v),C.store.select((0,Q.YH)({id:v.tileId})).pipe((0,Se.q)(1)))}),(0,q.zg)(function(v){var E,A=v[0],$=v[1];return $?C.addTile(A.dashboard,$,null===(E=A.telemetryEvent)||void 0===E?void 0:E.event).pipe((0,q.zg)(function(ae){return(0,X.of)(new m.ZC({dashboardId:A.dashboard.objectId,tile:$,tileFromService:ae.data}))}),(0,We.K)(function(ae){var ee,Oe;return 413===ae.status?(ee=C.localizationService.get("PinTile_Error_TooLarge"),Oe=C.localizationService.get("PinTile_Error_TooLargeDetails")):(ee=C.localizationService.get("PinTile_Error"),Oe=C.localizationService.get("PinTile_Error_DefaultDetails")),C.notificationToastService.notify({title:ee,message:Oe,notificationType:2}),(0,X.of)(new m.Nh({dashboardId:A.dashboard.objectId,tileId:$.objectId}))})):[]}))}),this.removeTile$=(0,e.GW)(function(){return C.action$.pipe((0,e.l4)(m.Fm),(0,a.U)(function(v){return v.payload}),(0,q.zg)(function(v){return(0,Ie.D)((0,X.of)(v),C.store.select((0,Q.YH)({id:v.tileId})).pipe((0,Se.q)(1)))}),(0,q.zg)(function(v){var E=v[0],A=v[1];return A?C.removeTile(A.id,E.telemetryEvent.event).pipe((0,q.zg)(function($){return(0,X.of)(new m.Rr({dashboardId:E.dashboardId,tileId:A.objectId}))}),(0,We.K)(function($){return(0,X.of)(new m.Jr({dashboardId:E.dashboardId,tileId:A.objectId}))})):[]}))}),this.updatePositionAndSize$=(0,e.GW)(function(){return C.action$.pipe((0,e.l4)(l._n),(0,a.U)(function(v){return v.payload}),(0,q.zg)(function(v){return(0,Ie.D)((0,X.of)(v),C.store.select(p.l1,{id:v.dashboardId}).pipe((0,Se.q)(1)),C.store.select(Q.yN).pipe((0,Se.q)(1)))}),(0,q.zg)(function(v){var E=v[0],A=v[1],ae=(0,se.zA)(E.updates,v[2],E.layoutStrategy);return C.updateSizeAndPositions(A,ae,E.telemetryEvent.event).pipe((0,q.zg)(function(){var ee;return null===(ee=E.telemetryEvent)||void 0===ee||ee.resolve(),(0,X.of)(new l.d$({dashboardId:E.dashboardId,updates:ae}))}),(0,We.K)(function(ee){return(0,X.of)(new l.ip({dashboardId:E.dashboardId,updates:ae}))}))}))}),this.ensureDashboard$=(0,e.GW)(function(){return C.action$.pipe((0,e.l4)(m.EC),(0,a.U)(function(v){return v.payload}),(0,qe.M)(C.store.select(p.AE)),(0,q.zg)(function(v){var $=v[1][v[0].id];return $?(0,X.of)(new m.i({id:$.id,workspaceId:$.workspaceId})):(0,we.c)()}))}),this.addOrUpdateTile$=(0,e.GW)(function(){return C.action$.pipe((0,e.l4)(l.ZV),(0,a.U)(function(v){return v.payload}),(0,q.zg)(function(v){return(0,Ie.D)((0,X.of)(v),C.store.select(p.W$).pipe((0,Se.q)(1)))}),(0,q.zg)(function(v){var E=v[0],A=v[1];return C.batchGetTiles(E.tileIds,E.dashboardId).pipe((0,q.zg)(function($){return(0,X.of)(new m.zA((0,g.pi)({dashboardObjectId:A.objectId,isDataChange:E.isDataChange},$)))}),(0,We.K)(function($){return(0,we.c)()}))}))}),this.RefreshTileData$=(0,e.GW)(function(){return C.action$.pipe((0,e.l4)(l.h1),(0,a.U)(function(v){return v.payload}),(0,q.zg)(function(v){return(0,Ie.D)((0,X.of)(v),C.store.select(p.W$).pipe((0,Se.q)(1)))}),(0,q.zg)(function(v){var E,ae,A=v[0],$=v[1];return A.hideLoader||(ae=C.notificationToastService.notify({message:C.localizationService.get("Dashboard_RefreshStart"),notificationType:3})),$?C.refreshTileData($,null===(E=A?.telemetryEvent)||void 0===E?void 0:E.event).pipe((0,q.zg)(function(ee){if(A.hideLoader||(C.notificationToastService.hide(ae),C.notificationToastService.notify({message:C.localizationService.get("Dashboard_RefreshCompletedSuccess"),notificationType:4})),ee&&ee.data&&!_.isEmpty(ee.data.tileErrors))for(var Oe=0,rt=ee.data.tileErrors;Oe<rt.length;Oe++){var lt=rt[Oe];lt.errorResponse.error.code===ze.Px$&&C.globalEventBridge.publishToChannel(Ee.m,{modelIds:lt.modelIds})}return(0,we.c)()}),(0,We.K)(function(ee){return C.notificationToastService.hide(ae),C.errorService.error(C.localizationService.get("Dashboard_RefreshCompletedFailure"),"Dashboard_RefreshCompletedFailure",{requestId:ee.requestId,statusCode:ee.status.toString()}),(0,we.c)()})):we.E}))}),this.refreshTileDataPermissionsUponLoad$=(0,e.GW)(function(){return C.action$.pipe((0,e.l4)(J.bu),(0,q.zg)(function(){return(0,X.of)(new l.r2)}))}),this.refreshTileDataPermissions$=(0,e.GW)(function(){return C.action$.pipe((0,e.l4)(l.zx),(0,e.IC)(function(){return C.store.select(p.W$).pipe((0,Se.q)(1))}),(0,q.zg)(function(v){var E=v[1];if(!_.isNil(E)){for(var A=[],$=0,ae=E.tiles;$<ae.length;$++){var ee=ae[$];20===ee.errorCode&&A.push(ee.id)}return _.isEmpty(A)?(0,we.c)():(0,X.of)(new l.en({dashboardId:E.id,tileIds:A}))}return(0,we.c)()}))}),this._errorService=new $e.o(function(){return C.injector.get(S.T)}),this._promiseFactory=new $e.o(function(){return C.injector.get(ne.t)}),this._dashboardHttpService=new $e.o(function(){return C.injector.get(W.f)})}return N.prototype.loadMobileAuthoringService=function(){return(0,g.mG)(this,void 0,void 0,function(){var I;return(0,g.Jh)(this,function(L){switch(L.label){case 0:return I=this,[4,this.lazyProviderModern.get("@powerbi/MobileDashboardAuthoring/module#MobileDashboardAuthoringModule","mobileAuthoringDialogService")];case 1:return I.mobileAuthoringDialogService=L.sent(),[2]}})})},N.prototype.addTile=function(I,L,ie){return(0,Ue.D)(this.dashboardHttpService.addTile(I,L,ie))},N.prototype.saveTile=function(I,L,ie){return(0,Ue.D)(this.dashboardHttpService.updateTile(I,L,ie))},N.prototype.removeTile=function(I,L){return(0,Ue.D)(this.dashboardHttpService.deleteTile(I,L))},N.prototype.addDashboard=function(I,L,ie,ye,be,ve){var Ve=this;return this.subfolderContextService.selectedSubfolderId$.pipe((0,Se.q)(1),(0,et.w)(function(Be){var Me=(0,re.J)(I,L,Be);return(0,Ue.D)(Ve.dashboardHttpService.addDashboard(Me,ve&&ve.event,ie,ye,be.selectedLabelId))}))},N.prototype.checkMandatoryLabel=function(I){return(0,Ue.D)(this.informationProtectionArtifactService.ensureMandatoryLabelOnNewDashboard(I.reportId,I.modelId))},N.prototype.checkDashboardLabel=function(I,L){return(0,Ue.D)(this.informationProtectionArtifactService.ensureMandatoryLabelPolicyOnArtifact(I.id,I.displayName,L,je.B.Dashboard,"AddTile",I.objectId,"EimInformationProtection_SelectSensitivityLabelDialog_Message_Dashboard_PinTile"))},N.prototype.updateSizeAndPositions=function(I,L,ie){var ye=this.dashboardHttpService.batchUpdateTileSizePosition(this.promiseFactory,I,L,ie);return ye?(0,Ue.D)(ye):(0,X.of)()},N.prototype.batchGetTiles=function(I,L){return(0,Ue.D)(this.dashboardHttpService.batchGetTiles(L,I,void 0,!0))},N.prototype.refreshTileData=function(I,L){return(0,Ue.D)(this.dashboardHttpService.refreshTileData(I.id,I.modelIds,L))},N.prototype.hasLayoutDefinition=function(I,L){var ie=L.$layoutConfig||L.layoutConfig&&JSON.parse(L.layoutConfig);return!!ie&&!!(0,Ne.Br)(ie.layouts).withId(I)},Object.defineProperty(N.prototype,"errorService",{get:function(){return this._errorService.getValue()},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"dashboardHttpService",{get:function(){return this._dashboardHttpService.getValue()},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"promiseFactory",{get:function(){return this._promiseFactory.getValue()},enumerable:!1,configurable:!0}),N.\u0275fac=function(L){return new(L||N)(ue.\u0275\u0275inject(e.eX),ue.\u0275\u0275inject(ue.Injector),ue.\u0275\u0275inject(Ye.yh),ue.\u0275\u0275inject(xe.U),ue.\u0275\u0275inject(G),ue.\u0275\u0275inject(Y.o),ue.\u0275\u0275inject(pe.Q),ue.\u0275\u0275inject(Ke.y0),ue.\u0275\u0275inject(ge.E),ue.\u0275\u0275inject(oe.Z),ue.\u0275\u0275inject(ot.Nz))},N.\u0275prov=ue.\u0275\u0275defineInjectable({token:N,factory:N.\u0275fac}),N}(),x=n(77476),M=n(40176),D=n(15466),V=n(76521),Z=n(38244),he=n(20092),ce=n(5334),_e=n(39195),at=n(70986),st=n(45125),ut=function(){function N(I){if(I)throw new Error("TilesMetadatModule was already loaded.  It should only be imported once in AppModule")}return N.\u0275fac=function(L){return new(L||N)(ue.\u0275\u0275inject(N,12))},N.\u0275mod=ue.\u0275\u0275defineNgModule({type:N}),N.\u0275inj=ue.\u0275\u0275defineInjector({imports:[x.CommonModule,Ye.Aw.forFeature("tiles",Q.F0),e.sQ.forFeature([f]),_e.Zz,D.y.forRoot(),V.A3,at.V.forRoot(),st.z,he.o,M.a,Z.f,ce.K]}),N}()},42594:function(Qe,de,n){n.d(de,{Q_:function(){return T},u:function(){return l},ws:function(){return Q}});var g=n(64069),l=5,Q=100,T=function(){function J(){this.gridItemPadding=5,this.gridItemWidth=260,this.gridItemHeight=180,this.gridItemSpacing=10,this.gridMinWidthOnResize=this.gridItemWidth-10,this.gridMinHeightOnResize=this.gridItemHeight-10,this.gridMaxWidthOnResize=7*this.gridItemWidth,this.isLayoutLocked=!1}return J.prototype.isItemInViewport=function(re,F){return(0,g.p)(re,F)},J}()},3826:function(Qe,de,n){n.d(de,{R_:function(){return se},Y9:function(){return Q},e_:function(){return l},wS:function(){return g}});var g=2,l=2,se=7,Q=6},64069:function(Qe,de,n){n.d(de,{H:function(){return l},p:function(){return e}});var g=n(3826);function l(m,T){if(m.x<=T.x&&T.x<m.x+m.width||T.x<=m.x&&m.x<T.x+T.width){if(m.y<=T.y&&T.y<m.y+m.height)return Math.min(m.y+m.height-T.y,T.height);if(T.y<=m.y&&m.y<T.y+T.height)return Math.min(T.y+T.height-m.y,m.height)}return 0}function e(m,T){return T&&function(m,T){return m.top<=T.bottom&&m.left<=T.right}(m,T)||function(m){var T=m.getGridLayout();return!!T&&T.x<=g.R_&&T.y<=g.Y9}(m)}},45074:function(Qe,de,n){n.d(de,{bP:function(){return re},nm:function(){return T},uC:function(){return J},ug:function(){return m}});var g=n(4437),l=n(50423),se=[[["","pbiLabel",""]],[["","pbiInput",""]],[["","pbiInputButton",""]],[["","pbiInputError",""]]],Q=["[pbiLabel]","[pbiInput]","[pbiInputButton]","[pbiInputError]"],e=0,m=function(){function F(H,U){this.elementRef=H,this.formField=U}return F.\u0275fac=function(U){return new(U||F)(l.\u0275\u0275directiveInject(l.ElementRef),l.\u0275\u0275directiveInject((0,l.forwardRef)(function(){return re})))},F.\u0275dir=l.\u0275\u0275defineDirective({type:F,selectors:[["","pbiInput",""]],hostAttrs:["autocomplete","off"],hostVars:3,hostBindings:function(U,p){2&U&&l.\u0275\u0275attribute("aria-required",p.required||null)("aria-describedby",null==p.formField.error?null:p.formField.error.id)("aria-invalid",p.formField.error?"true":"false")},inputs:{required:"required"}}),F}(),T=function(){function F(H,U){this.elementRef=H,this.formField=U}return F.\u0275fac=function(U){return new(U||F)(l.\u0275\u0275directiveInject(l.ElementRef),l.\u0275\u0275directiveInject((0,l.forwardRef)(function(){return re})))},F.\u0275dir=l.\u0275\u0275defineDirective({type:F,selectors:[["","pbiLabel",""]],hostVars:2,hostBindings:function(U,p){2&U&&l.\u0275\u0275classProp("pbi-label-required",null!=p.formField.input.required)}}),F}(),J=function(){function F(){this.id="pbi-input-error-id-".concat(e++)}return F.\u0275fac=function(U){return new(U||F)},F.\u0275dir=l.\u0275\u0275defineDirective({type:F,selectors:[["","pbiInputError",""]],hostVars:3,hostBindings:function(U,p){2&U&&(l.\u0275\u0275attribute("id",p.id),l.\u0275\u0275classProp("pbi-input-error",!0))}}),F}(),re=function(){function F(H){this.renderer=H,this._compact=!1}return Object.defineProperty(F.prototype,"compact",{get:function(){return this._compact},set:function(U){this._compact=(0,g.Ig)(U)},enumerable:!1,configurable:!0}),F.prototype.ngAfterContentInit=function(){if(this.input&&this.label){var H="pbi-input-id-".concat(e++);this.renderer.setAttribute(this.input.elementRef.nativeElement,"id",H),this.renderer.setAttribute(this.label.elementRef.nativeElement,"for",H)}},F.\u0275fac=function(U){return new(U||F)(l.\u0275\u0275directiveInject(l.Renderer2))},F.\u0275cmp=l.\u0275\u0275defineComponent({type:F,selectors:[["pbi-form-field"]],contentQueries:function(U,p,W){if(1&U&&(l.\u0275\u0275contentQuery(W,m,5),l.\u0275\u0275contentQuery(W,T,5),l.\u0275\u0275contentQuery(W,J,5)),2&U){var S=void 0;l.\u0275\u0275queryRefresh(S=l.\u0275\u0275loadQuery())&&(p.input=S.first),l.\u0275\u0275queryRefresh(S=l.\u0275\u0275loadQuery())&&(p.label=S.first),l.\u0275\u0275queryRefresh(S=l.\u0275\u0275loadQuery())&&(p.error=S.first)}},hostVars:2,hostBindings:function(U,p){2&U&&l.\u0275\u0275classProp("pbi-compact-form-field",p.compact)},inputs:{compact:"compact"},ngContentSelectors:Q,decls:5,vars:0,consts:[[1,"controls"]],template:function(U,p){1&U&&(l.\u0275\u0275projectionDef(se),l.\u0275\u0275projection(0),l.\u0275\u0275elementStart(1,"div",0),l.\u0275\u0275projection(2,1),l.\u0275\u0275projection(3,2),l.\u0275\u0275elementEnd(),l.\u0275\u0275projection(4,3))},styles:['[_nghost-%COMP%]{display:flex;flex-direction:column;--input-border-color: var(--gray-110);--input-foreground: var(--gray-140);--disabled-input-background: var(--gray-20);--disabled-input-border-color: var(--gray-60);--disabled-input-foreground: var(--gray-90);--focused-input-border-color: var(--gray-130);--focused-input-foreground: var(--gray-180);--error-color: var(--fluent-theme-error-dark-color)}[data-legacy-theming=false]   [_nghost-%COMP%]{--input-border-color: var(--colorNeutralStroke1);--input-foreground: var(--colorNeutralForeground1);--disabled-input-background: var(--colorNeutralBackgroundDisabled);--disabled-input-border-color: var(--colorNeutralStrokeDisabled);--disabled-input-foreground: var(--colorNeutralForegroundDisabled);--focused-input-border-color: var(--colorNeutralStrokeFocus2);--focused-input-foreground: var(--colorNeutralForeground1);--error-color: var(--fluent-theme-error-dark-color)}.pbi-form-field-inline[_nghost-%COMP%] {flex-direction:row;align-items:center;justify-content:space-between}.pbi-form-field-inline[_nghost-%COMP%]  label{margin:0 8px 0 0}.pbi-form-field-inline[_nghost-%COMP%]  .controls{flex-grow:1;justify-content:flex-end}.pbi-compact-form-field[_nghost-%COMP%]  label{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-regular, 400)}.pbi-compact-form-field[_nghost-%COMP%]  input{height:28px;padding:4px 6px}.pbi-compact-form-field[_nghost-%COMP%]  textarea{padding:4px 6px}[_nghost-%COMP%]  *{box-sizing:border-box}[_nghost-%COMP%]  label{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-semi-bold, 600);margin:0 0 4px}[_nghost-%COMP%]  label.pbi-label-required:after{content:"*";margin-left:4px;color:var(--error-color)}[_nghost-%COMP%]  .controls{display:flex}[_nghost-%COMP%]  .controls>*:not(:last-child){margin-right:8px}[_nghost-%COMP%]  input{height:32px}[_nghost-%COMP%]  textarea{resize:none}[_nghost-%COMP%]  input, [_nghost-%COMP%]  textarea{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);width:100%;border-radius:2px;border:1px solid var(--input-border-color);color:var(--input-foreground);outline:none;padding:8px 6px}[_nghost-%COMP%]  input[disabled], [_nghost-%COMP%]  textarea[disabled], [_nghost-%COMP%]  input[aria-disabled=true], [_nghost-%COMP%]  textarea[aria-disabled=true]{background-color:var(--disabled-input-background);border-color:var(--disabled-input-border-color);color:var(--disabled-input-foreground)}[_nghost-%COMP%]  input:focus, [_nghost-%COMP%]  textarea:focus{border-color:var(--focused-input-border-color);color:var(--focused-input-foreground)}[_nghost-%COMP%]  [pbiInput][aria-invalid=true]{border-color:var(--error-color)}[_nghost-%COMP%]  .pbi-input-error{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-regular, 400);margin:4px 0 0;color:var(--error-color)}'],changeDetection:0}),F}()},14525:function(Qe,de,n){n.d(de,{g:function(){return l}});var g=n(50423),l=function(){function se(){}return se.\u0275fac=function(e){return new(e||se)},se.\u0275mod=g.\u0275\u0275defineNgModule({type:se}),se.\u0275inj=g.\u0275\u0275defineInjector({}),se}()}}]);