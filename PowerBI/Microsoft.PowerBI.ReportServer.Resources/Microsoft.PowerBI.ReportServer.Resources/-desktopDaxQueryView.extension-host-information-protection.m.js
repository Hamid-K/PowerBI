"use strict";(self.webpackChunkdesktopDaxQueryView=self.webpackChunkdesktopDaxQueryView||[]).push([["extension-host-information-protection"],{2375:function(B,p,t){t.r(p),t.d(p,{ExtensionHostInformationProtectionModule:function(){return V}});var L=t(77476),g=t(60756),s=t(11547),S=t(59017),d=t(42195),P=t(48787),u=t(14172),y=t(59822),e=t(73471),j=t(60397),v=t(17899),E=t(69388),z=t(94771),f=t(50423),b=t(54323),C=function(){function o(m,l,h,x,$){var i=this;this.actions$=m,this.messageBroker=l,this.telemetryService=h,this.informationProtectionService=x,this.featureSwitchService=$,this.onGetInformationProtectionLabelsReceived$=(0,v.Av)(this.actions$,this.messageBroker,e.Vm.getInformationProtectionLabels,function(){return i.ensureInformationProtectionInitializedSuccessfully().pipe((0,d.zg)(function(r){if(r)return i.informationProtectionService.getLabelsList().pipe((0,P.q)(1),(0,u.U)(function(a){return e.Vm.getInformationProtectionLabels.resolve({labels:a})}),(0,y.K)(function(a){return(0,s.of)(e.Vm.getInformationProtectionLabels.reject({error:a}))}));var c="ensureInformationProtectionInitializedSuccessfully returned false";return i.telemetryService.logEvent({name:"ExtensionHostEffects.onGetInformationProtectionLabelsReceived",properties:{message:c}}),(0,s.of)(e.Vm.getInformationProtectionLabels.reject({error:c}))}))}),this.onGetInformationProtectionUserPolicySettingsReceived$=(0,v.Av)(this.actions$,this.messageBroker,e.Vm.getInformationProtectionUserPolicySettings,function(){return i.ensureInformationProtectionInitializedSuccessfully().pipe((0,d.zg)(function(r){if(r)return i.informationProtectionService.getUserPolicySettings().pipe((0,P.q)(1),(0,u.U)(function(a){return e.Vm.getInformationProtectionUserPolicySettings.resolve({settings:a})}));var c="ensureInformationProtectionInitializedSuccessfully returned false";return i.telemetryService.logEvent({name:"ExtensionHostEffects.onGetInformationProtectionUserPolicySettingsReceived",properties:{message:c}}),(0,s.of)(e.Vm.getInformationProtectionUserPolicySettings.reject({error:c}))}))}),this.onShouldShowInformationProtectionCreateComponentReceived$=(0,v.Av)(this.actions$,this.messageBroker,e.Vm.shouldShowInformationProtectionCreateComponent,function(){var r,c=(0,s.of)(null!==(r=i.featureSwitchService.featureSwitches.eimSensitivityDropdownCreateReactComponent)&&void 0!==r&&r),a=i.informationProtectionService.getUserPolicySettings().pipe((0,u.U)(function(n){return!0===n?.isLabelingRequired&&_.isEmpty(n?.defaultLabelId)}));return c.pipe((0,d.zg)(function(n){return n?(0,S.aj)([i.ensureInformationProtectionInitializedSuccessfully(),a]):(0,s.of)([!1,!1])}),(0,d.zg)(function(n){return(0,s.of)(e.Vm.shouldShowInformationProtectionCreateComponent.resolve({show:n[0]&&n[1]}))}))}),this.onGetLabelByArtifactObjectIdReceived$=(0,v.Av)(this.actions$,this.messageBroker,e.Vm.getLabelByArtifactObjectId,function(r){var c=r.artifactObjectId;return i.ensureInformationProtectionInitializedSuccessfully().pipe((0,d.zg)(function(a){if(a)return i.informationProtectionService.getOrLoadArtifactInformationProtection(E.Bz.Artifact,void 0,c).pipe((0,P.q)(1),(0,u.U)(function(I){return e.Vm.getLabelByArtifactObjectId.resolve({label:I})}),(0,y.K)(function(I){return(0,s.of)(e.Vm.getLabelByArtifactObjectId.reject({error:I}))}));var n="ensureInformationProtectionInitializedSuccessfully returned false";return i.telemetryService.logEvent({name:"ExtensionHostEffects.onGetLabelByArtifactObjectIdReceived",properties:{message:n}}),(0,s.of)(e.Vm.getLabelByArtifactObjectId.reject({error:n}))}))}),this.onInformationProtectionInitializationCheck$=(0,v.Av)(this.actions$,this.messageBroker,e.Vm.informationProtectionInitializationCheck,function(){return i.ensureInformationProtectionInitializedSuccessfully().pipe((0,u.U)(function(r){return e.Vm.informationProtectionInitializationCheck.resolve({isInitialized:r})}))})}return o.prototype.ensureInformationProtectionInitializedSuccessfully=function(){return(0,S.aj)([(0,s.of)(this.informationProtectionService.isInformationProtectionSupportedForTridentEnabled()),this.informationProtectionService.isLabelsListLoadingFailed()]).pipe((0,P.q)(1),(0,u.U)(function(m){return m[0]&&!m[1]}))},o.\u0275fac=function(l){return new(l||o)(f.\u0275\u0275inject(g.eX),f.\u0275\u0275inject(j.u),f.\u0275\u0275inject(b.t),f.\u0275\u0275inject(E.Gb),f.\u0275\u0275inject(z.V$))},o.\u0275prov=f.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac}),o}(),V=function(){function o(){}return o.\u0275fac=function(l){return new(l||o)},o.\u0275mod=f.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=f.\u0275\u0275defineInjector({imports:[L.CommonModule,g.sQ.forFeature([C])]}),o}()}}]);