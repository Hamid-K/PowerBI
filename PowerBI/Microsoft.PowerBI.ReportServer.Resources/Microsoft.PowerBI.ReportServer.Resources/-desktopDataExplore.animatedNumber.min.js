"use strict";(self.webpackChunkdesktopDataExplore=self.webpackChunkdesktopDataExplore||[]).push([["animatedNumber"],{58914:function(K,y,n){n.r(y),n.d(y,{AnimatedNumber:function(){return P}});var C=n(81337),E=n(94478),O=n(62458),P=function(D){function l(i,u){var a=D.call(this,"animatedNumber")||this;return i&&(a.svg=i),u&&(a.animator=u),a}return(0,C.__extends)(l,D),l.prototype.init=function(i){this.options=i,this.svg||(this.svg=d3.select(i.element.get(0)).append("svg")),this.currentViewport=i.viewport,this.hostServices=i.host,this.style=i.style,this.updateViewportDependantProperties()},l.prototype.updateViewportDependantProperties=function(){var i=this.currentViewport;this.svg.attr("width",i.width).attr("height",i.height)},l.prototype.update=function(i){O.fF.assertValue(i,"options"),this.currentViewport=i.viewport;var u=this.dataViews=i.dataViews;if(u&&u[0]){var a=u[0];this.updateViewportDependantProperties(),this.getMetaDataColumn(a),this.updateInternal(a&&a.single?a.single.value:0,i.suppressAnimations,!0,this.formatter)}},l.prototype.setFormatter=function(i){this.formatter=i},l.prototype.onDataChanged=function(i){this.update({dataViews:i.dataViews,suppressAnimations:i.suppressAnimations,viewport:this.currentViewport})},l.prototype.onResizing=function(i){this.update({dataViews:this.dataViews,suppressAnimations:!0,viewport:i})},l.prototype.canResizeTo=function(i){return!0},l.prototype.updateInternal=function(i,u,a,p){void 0===a&&(a=!1);var o=this.value,t=(0,E.Mb)(this.animator,u);this.doValueTransition(o,i,null,this.options.animation,t,a,p),this.value=i},l}(n(68193).V)},68193:function(K,y,n){n.d(y,{V:function(){return p}});var C=n(14599),E=n(53197),O=n(90120),T=n(38400),P=n(79154),D=n(62458),l=n(32041),i=n(64329),u=n(10389),a=n(72489),p=function(){function o(t){this.defaultTitleColor="#333333",this._animatedTextOptions={},this.mainText=(0,P.CH)("mainText"),this.name=t,this.visualConfiguration={maxFontSize:60}}return o.prototype.getMetaDataColumn=function(t){if(t&&t.metadata&&t.metadata.columns)for(var e=0,r=t.metadata.columns.length;e<r;e++){var s=t.metadata.columns[e];if(s.isMeasure){this.metaDataColumn=s;break}}},o.prototype.getAdjustedFontHeight=function(t,e,r){var s,h,f,m,d={fontFamily:null===(s=this._animatedTextOptions.textProperties)||void 0===s?void 0:s.fontFamily,fontWeight:null===(h=this._animatedTextOptions.textProperties)||void 0===h?void 0:h.fontWeight,fontStyle:null===(f=this._animatedTextOptions.textProperties)||void 0===f?void 0:f.fontStyle,textDecoration:null===(m=this._animatedTextOptions.textProperties)||void 0===m?void 0:m.textDecoration,text:e};return this.getAdjustedFontHeightCore(d,t,r,0)},o.prototype.getAdjustedFontHeightCore=function(t,e,r,s){return s>10?r:(t.fontSize=i.FP.toString(r),l.b.measureSvgTextWidth(t)<e?r:this.getAdjustedFontHeightCore(t,e,.9*r,s+1))},o.prototype.clear=function(){this.svg.select(this.mainText.selector).text("")},o.prototype.doValueTransition=function(t,e,r,s,h,f,m,d){var v,M,A,S;if(f||t!==e||null==e){t||(t=0),d||(d=this.getDefaultDatumTransform());var w=this.svg,I=this.currentViewport,W=I.height,U=I.width,L=this.getSeedFontHeight(U,W),H=this.getTranslateX(U),R=this.getTranslateY(L),g=this.metaDataColumn;m||(m=(0,a.Ue)({format:this.getFormatString(this.dataPointObjects,g),value:e,displayUnitSystemType:r,formatSingleValues:!0,allowFormatBeautification:!0,columnType:g?g.type:void 0}));var V=String(t),c=String(e);(_.isEmpty(e)||"string"!=typeof e)&&(c=m.format(e)),(_.isEmpty(t)||"string"!=typeof t)&&(V=m.format(t)),w.classed(this.name,!0);var j=[d.getDatum(e,c)],B=w.selectAll("text").data(j),x=B.enter().append("text").classed(this.mainText.class,!0).merge(B),F=this.getAdjustedFontHeight(U,c,L);if(R=this.getTranslateY(F+(W-F)/2),x.text(V).attr("text-anchor",this.getTextAnchor()).attr("font-size",F).attr("transform",(0,u.Iu)(H,R)).style("font-style",null===(v=this._animatedTextOptions.textProperties)||void 0===v?void 0:v.fontStyle).style("text-decoration",null===(M=this._animatedTextOptions.textProperties)||void 0===M?void 0:M.textDecoration).style("font-weight",null===(A=this._animatedTextOptions.textProperties)||void 0===A?void 0:A.fontWeight).style("font-family",null===(S=this._animatedTextOptions.textProperties)||void 0===S?void 0:S.fontFamily).style("fill",this.getTextColor()).call(T.Q,[V]),null==e||g&&(0,E.v9)(g.type)||"string"==typeof e||"string"==typeof t)x.text(c).call(T.Q,[c]);else{var b=t;x.transition().duration(h).tween("text",function(N){var Y=d.getValue(N),X=d3.interpolate(b,Y);return function(Q){var G=X(Q);this.textContent=m.format(G)}})}return(0,u.bL)(s,x),x}},o.prototype.getDefaultDatumTransform=function(){return{getDatum:function(e,r){return{value:e}},getValue:function(e){return e.value}}},Object.defineProperty(o.prototype,"animatedTextOptions",{get:function(){return this._animatedTextOptions},set:function(e){this._animatedTextOptions=e},enumerable:!1,configurable:!0}),o.prototype.getTextColor=function(){var t,e=this.style&&O.v.getThemeColor(this.style,"foreground");return(null===(t=this._animatedTextOptions)||void 0===t?void 0:t.titleColor)||e||this.defaultTitleColor},o.prototype.getSeedFontHeight=function(t,e){var r=Math.floor(.75*Math.min(t,e)),s=this.visualConfiguration.maxFontSize;return s?Math.min(s,r):r},o.prototype.getTranslateX=function(t){if(this.visualConfiguration)switch(this.visualConfiguration.align){case"left":return 0;case"right":return t}return t/2},o.prototype.getTranslateY=function(t){return t},o.prototype.getTextAnchor=function(){if(this.visualConfiguration)switch(this.visualConfiguration.align){case"left":return"start";case"right":return"end"}return"middle"},o.prototype.getFormatString=function(t,e){return D.fF.assertAnyValue(e,"column"),(0,a.eU)(t,e,C.e0.formatString)},o}()}}]);