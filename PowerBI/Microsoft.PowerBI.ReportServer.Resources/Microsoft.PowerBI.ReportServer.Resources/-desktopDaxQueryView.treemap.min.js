"use strict";(self.webpackChunkdesktopDaxQueryView=self.webpackChunkdesktopDaxQueryView||[]).push([["treemap"],{32860:function(Je,ce,g){g.r(ce),g.d(ce,{TreeMapHitTester:function(){return gt},Treemap:function(){return Ot},TreemapWebBehavior:function(){return vt},WebTreemapAnimator:function(){return ft},webAnimator:function(){return Gt},webBehavior:function(){return It}});var E=g(81337),O=g(94478),P=g(92947),ne=g(60066),x=g(32554),n=g(90120),u=g(54522),d=g(46769),v=g(21181),y=g(18664),b=g(52083),T=g(33777),f=g(49203),c=g(80065),M=g(11745),G=g(51660),U=g(86900),J=g(38400),S=g(70249),I=g(51129),z=g(79811),ee=g(86727),re=g(70569),Ft=g(77686),Ne=g(72902),Et=g(40739),xe=g(11305),ut=g(45296),Ze=g(62458),Rt=g(41640),ht=g(80758),jt=g(32041),$e=g(59107),Te=g(56578),dt=g(64329),qe=g(46135),ct=g(32379),zt=g(82755),At=g(96915),De=g(72489),Ve=g(26543),ft=function(i){function e(t){return i.call(this,t)||this}return(0,E.__extends)(e,i),e.prototype.animate=function(t){var a={failed:!0,shapes:null,highlightShapes:null,majorLabels:null,minorLabels:null},s=t.viewModel,r=this.previousViewModel;return r&&(s.hasHighlights&&!r.hasHighlights?a=this.animateNormalToHighlighted(t):s.hasHighlights&&r.hasHighlights?a=this.animateHighlightedToHighlighted(t):!s.hasHighlights&&r.hasHighlights&&(a=this.animateHighlightedToNormal(t))),this.previousViewModel=s,a},e.prototype.animateNormalToHighlighted=function(t){var a=t.interactivityService&&t.interactivityService.hasSelection(),s=!0,r=this.animateDefaultShapes(t.shapeGraphicsContext,t.nodes,a,s,t.layout),h=t.shapeGraphicsContext.selectAll("."+S.Sh.highlight).data(t.highlightNodes,function(w){return w.data.key+"highlight"}),o=h.enter().append("rect").attr("class",t.layout.highlightShapeClass).attrs(t.layout.shapeLayout),l=h.merge(o).style("fill",function(w){return(0,S._M)(w,!0)}).style("fill-opacity",function(w){return(0,S.eR)(w,a,s,!0)});return l.transition().duration(this.animationDuration).attrs(t.layout.highlightShapeLayout),h.exit().remove(),{failed:!1,shapes:r,highlightShapes:l,majorLabels:this.animateDefaultMajorLabels(t.labelGraphicsContext,t.majorLabeledNodes,t.categoryLabelSettings,t.layout),minorLabels:this.animateDefaultMinorLabels(t.labelGraphicsContext,t.minorLabeledNodes,t.dataLabelSettings,t.layout)}},e.prototype.animateHighlightedToHighlighted=function(t){var a=t.interactivityService&&t.interactivityService.hasSelection(),s=!0,r=this.animateDefaultShapes(t.shapeGraphicsContext,t.nodes,a,s,t.layout);return t.shapeGraphicsContext.selectAll("."+S.Sh.highlight).data(t.highlightNodes,function(p){return p.data.key+"highlight"}),{failed:!1,shapes:r,highlightShapes:this.animateDefaultHighlightShapes(t.shapeGraphicsContext,t.highlightNodes,a,s,t.layout),majorLabels:this.animateDefaultMajorLabels(t.labelGraphicsContext,t.majorLabeledNodes,t.categoryLabelSettings,t.layout),minorLabels:this.animateDefaultMinorLabels(t.labelGraphicsContext,t.minorLabeledNodes,t.dataLabelSettings,t.layout)}},e.prototype.animateHighlightedToNormal=function(t){var a=!!t.interactivityService&&t.interactivityService.hasSelection(),s=t.shapeGraphicsContext.selectAll("."+S.Sh.node).data(t.nodes,function(m){return m.data.key}),r=s.enter().append("rect").attr("class",t.layout.shapeClass),h=s.merge(r);h.transition().duration(this.animationDuration).style("fill",function(m){return(0,S._M)(m,!1)}).style("fill-opacity",function(m){return ne.eR(m.data.selected,!1,m.data.selected,!m.data.selected)}).attrs(t.layout.shapeLayout).transition().duration(0).style("fill-opacity",function(m){return ne.eR(m.data.selected,!1,a,!1)}),s.exit().remove();var o=t.shapeGraphicsContext.selectAll("."+S.Sh.highlight).data(t.nodes,function(m){return m.data.key+"highlight"}),l=o.enter().append("rect").attr("class",t.layout.highlightShapeClass),p=o.merge(l).style("fill",function(m){return(0,S._M)(m,!0)}).style("fill-opacity",function(m){return ne.eR(m.data.selected,!0,m.data.selected,!m.data.selected)});return p.transition().duration(this.animationDuration).attrs(a?t.layout.zeroShapeLayout:t.layout.shapeLayout).remove(),o.exit().remove(),{failed:!1,shapes:h,highlightShapes:p,majorLabels:this.animateDefaultMajorLabels(t.labelGraphicsContext,t.majorLabeledNodes,t.categoryLabelSettings,t.layout),minorLabels:this.animateDefaultMinorLabels(t.labelGraphicsContext,t.minorLabeledNodes,t.dataLabelSettings,t.layout)}},e.prototype.animateDefaultShapes=function(t,a,s,r,h){var o=!1,l=t.selectAll("."+S.Sh.node).data(a,function(w){return w.data.key}),p=l.enter().append("rect").attr("class",h.shapeClass),C=l.merge(p);return C.transition().duration(this.animationDuration).style("fill",function(w){return(0,S._M)(w,o)}).style("fill-opacity",function(w){return(0,S.eR)(w,s,r,o)}).attrs(h.shapeLayout),l.exit().remove(),C},e.prototype.animateDefaultHighlightShapes=function(t,a,s,r,h){var o=!0,l=t.selectAll("."+S.Sh.highlight).data(a,function(w){return w.data.key+"highlight"}),p=l.enter().append("rect").attr("class",h.highlightShapeClass),C=l.merge(p);return C.transition().duration(this.animationDuration).style("fill",function(w){return(0,S._M)(w,o)}).style("fill-opacity",function(w){return(0,S.eR)(w,s,r,o)}).attrs(h.highlightShapeLayout),l.exit().remove(),C},e.prototype.animateDefaultMajorLabels=function(t,a,s,r){var h=t.selectAll("."+S.Sh.major).data(a,function(p){return p.data.key}),o=h.enter().append("text").attr("class",r.majorLabelClass),l=h.merge(o).text(r.majorLabelText).styles(function(p){return(0,y.rL)(s.fontProperties,{color:p.data.categoryLabelFill})});return l.transition().duration(this.animationDuration).attrs(r.majorLabelLayout),h.exit().remove(),l},e.prototype.animateDefaultMinorLabels=function(t,a,s,r){var h=t.selectAll("."+S.Sh.minor).data(a,function(p){return p.data.key}),o=h.enter().append("text").attr("class",r.minorLabelClass),l=h.merge(o).text(r.minorLabelText).styles(function(p){return(0,y.rL)(s.fontProperties,{color:p.data.labelFill})});return l.transition().duration(this.animationDuration).attrs(r.minorLabelLayout),h.exit().remove(),l},e}(O.r5),Z=g(30237),vt=function(){function i(){}return i.prototype.bindEvents=function(e,t,a,s){this.root=e.root,this.shapes=e.shapes,this.highlightShapes=e.highlightShapes,this.hasHighlights=e.hasHighlights,this.visualInstanceId=e.visualInstanceId;var r=e.majorLabels,h=e.minorLabels;if(this.selectionHandler=t,this.hitTester=e.hitTester,s)(0,Z.FO)(this.shapes),this.highlightShapes&&(0,Z.FO)(this.highlightShapes),r&&(0,Z.FO)(r),h&&(0,Z.FO)(h);else{if((0,Z.a0)(this.shapes,t),this.highlightShapes&&(0,Z.a0)(this.highlightShapes,t),a){var o=a.dataPointNavigationManager,l=a.pointSourceKey;o.isEmpty(l)||((0,Z.lt)(this.root,t),(0,Z.I8)(this.shapes,o,l),(0,Z.W3)(this.root,o,l),(0,Z.zV)(this.root,e.visualInstanceId,l,"treeitem"))}r&&(0,Z.a0)(r,t),h&&(0,Z.a0)(h,t)}},i.prototype.lassoSelectRect=function(e,t){var a=this.hitTester.queryRegion(t);(0,Z.ct)(e,a,this.selectionHandler)},i.prototype.renderFocus=function(e){var t="".concat(ne.aY,"-").concat(this.visualInstanceId);this.root.select("#"+t).attr("id",null),e&&(e.setAttribute("id",t),$e.M.focus(e))},i.prototype.renderSelection=function(e){var t=this.hasHighlights;this.shapes.attr("aria-checked",function(a){return null===a.parent?null:a.data.selected}).style("fill",function(a){return(0,S._M)(a,!1)}).style("fill-opacity",function(a){return(0,S.eR)(a,e,t,!1)}).style("stroke-opacity",function(a){return(0,S.eR)(a,e,t,!1)}),this.highlightShapes.attr("aria-checked",function(a){return null===a.parent?null:a.data.selected}).style("fill",function(a){return(0,S._M)(a,!0)}).style("fill-opacity",function(a){return(0,S.eR)(a,e,t,!0)}).style("stroke-opacity",function(a){return(0,S.eR)(a,e,t,!0)})},i}(),le=g(56707),Ot=function(){function i(e){this.tooltipsEnabled=e&&e.tooltipsEnabled,this.cartesianConditionalFormatting=e&&e.cartesianConditionalFormatting,this.dataPointLassoSelect=e?.dataPointLassoSelect,e&&e.animator&&(this.animator=e.animator,this.isScrollable=!!e.isScrollable&&e.isScrollable,this.behavior=e.behavior)}return i.getLayout=function(e,t,a){var s=(0,v.fI)(),r=a.show,h=e.show;return{role:function(l){return i.getNodeAccesibilityRole(l)},ariaHidden:function(l){return i.isAriaHidden(l)},shapeClass:function(l){return i.getNodeClass(l,!1)},shapeLayout:i.createTreemapShapeLayout(!1),highlightShapeClass:function(l){return i.getNodeClass(l,!0)},highlightShapeLayout:i.createTreemapShapeLayout(!0),zeroShapeLayout:i.createTreemapZeroShapeLayout(),majorLabelClass:function(l){return S.Sh.major},majorLabelLayout:{x:function(l){return l.x0+i.TextMargin},y:function(l){return l.y0+i.TextMargin+a.fontProperties.size.px}},majorLabelText:function(l){return i.createMajorLabelText(l,a,t,s)},majorLabelFullText:function(l){return l.data.name},minorLabelClass:function(l){return S.Sh.minor},minorLabelLayout:{x:function(l){return l.x0+i.TextMargin},y:function(l){return l.y1-i.TextMargin}},minorLabelText:function(l){return i.createMinorLabelText(l,e,t,s,a)},areMajorLabelsEnabled:function(){return r},areMinorLabelsEnabled:function(){return h}}},i.prototype.init=function(e){var a,t=this;this.options=e,this.hostService=e.host,this.featureSwitches=e.featureSwitches||{},this.behavior&&(this.interactivityService=(0,Ne.ub)(this.hostService,this.featureSwitches));var s=e.element;if(s.empty(),this.style=e.style,this.svg=d3.select(s.get(0)).append("svg").style("position","absolute").classed(i.ClassName,!0),this.shapeGraphicsContext=this.svg.append("g").style("stroke",n.v.getThemeColor(this.style,S.oN)).classed(i.ShapesClassName,!0),this.interactivityService){var r=$e.M.isInternetExplorerOrEdge();this.shapeGraphicsContext.attr("tabindex",0).attr("focusable",!0).attr("aria-label",this.hostService.getLocalizedString("Visual_Plot")).attr("role","tree").classed(ne.Pg,!r)}if(this.labelGraphicsContext=this.svg.append("g").classed(i.LabelsGroupClassName,!0),this.currentViewport={height:e.viewport.height,width:e.viewport.width,scale:e.viewport.scale},this.treemap=d3.treemap().tile(d3.treemapResquarify).round(!1),this.legend=(0,re.OG)(s,!1,this.interactivityService,this.isScrollable,void 0,this.style,this.hostService),this.tooltipService=(0,Et.r)(this.hostService),this.dataPointLassoSelect){this.plotLassoManager=new M.oW(!1);var h=d3.select(this.svg.node());this.plotLassoManager.init([h],h,this.hostService,this.featureSwitches),this.lassoSelectionBehavior=new M.lk(this.behavior),this.plotLassoManager.behaviors.push(this.lassoSelectionBehavior),this.plotLassoManager.setUiScale(this.currentViewport.scale)}if(this.featureSwitches.onObject){var l=(null===(a=this.hostService)||void 0===a?void 0:a.getSubSelectionService())??U.D.createWithDefaultHost();this.subSelectionHelper=G.O5.createHtmlSubselectionHelper({hostElement:s.get(0),hostServices:this.hostService,renderer:l,targetSource:"format",scale:function(){return t.currentViewport.scale},selectorCallback:function(C){return t.getSelectorsByColumnSubSelection(C)}}),this.interactivityService.setSubSelectionHelper(this.subSelectionHelper)}},i.getDefaultTreemapDataLabelSettings=function(e){var t=n.v.getThemeColor(e,le.pl),a=(0,v.bT)({style:e,fontSize:dt.FP.toPoint(le.WP),fontFamily:le.Pq,labelColor:t,textClassName:"smallLightLabel"}).fontProperties;return a=(0,y.ED)(a,{color:t}),{show:!1,displayUnits:0,precision:le.NZ,fontProperties:a,minFontSize:le.LK,maxFontSize:le.N0,bold:!1,italic:!1,underline:!1}},i.getDefaultTreemapCategoryLabelSettings=function(e){var t=n.v.getThemeColor(e,le.pl),a=(0,v.bT)({style:e,fontSize:dt.FP.toPoint(le.XJ),fontFamily:le.Pq,labelColor:t,textClassName:"label"}).fontProperties;return{show:!0,fontProperties:a=(0,y.ED)(a,{color:t}),bold:!1,italic:!1,underline:!1}},i.converter=function(e){var t,a,s,r,h,o,l,p,C,w,m,Oe,D,Q,Ce,N=e.dataView,te=e.style,H=e.dataLabelSettings,V=e.categoryLabelSettings,B=e.interactivityService,fe=e.viewport,A=void 0===(t=e.tooltipsEnabled)||t,ie=e.treemap,ae=_.some(null!==(s=null===(a=N?.metadata)||void 0===a?void 0:a.columns)&&void 0!==s?s:[],function(lt){var ot;return null===(ot=lt?.roles)||void 0===ot?void 0:ot[P.A4.values]})?P.A4.values:P.A4.gradient,R=P._H.general.formatString,X=(0,I.G)(N,{staticSeriesRoleNames:[ae],formatStringProp:R}),k=X.data,Y=X.columns,Le={key:"root",name:"root",size:void 0,children:[],originalValue:void 0,selected:!1,highlightMultiplier:0,identity:Ve.l0.createNull(),color:void 0,categoryIndex:null,seriesIndex:null},Ge=[],_e=n.v.create(te,P._H.dataPoint.fill),yt=H.fontProperties.color,pt=V.fontProperties.color;if(N&&N.metadata&&N.metadata.objects){var St=(Ie=N.metadata.objects).labels;St&&H&&(0,v.ww)(St,H,void 0,te);var mt=Ie.categoryLabels;mt&&V&&(0,v.ww)(mt,V,void 0,te)}var Wt=k.hasSeries(),bt=k.hasCategories();if(k.hasValues(P.A4.values)||k.hasValues(P.A4.gradient)){var ve=N.categorical,We=ve.values.grouped();Q=k.hasHighlights();var Me=i.getValuesFromCategoricalDataView(N,Q,ae),we=Me.values,oe=Me.highlights;Me.highlightsOverflow&&(Q=!1,we=oe),Oe=Me.hasNegativeValues,D=Me.allValuesAreNegative;var xt=i.getCullableValue(Me.totalValue,fe),ge=Y.hasDynamicSeries();Ce=!1;var He=Y.getValueColumn(P.A4.gradient,0);if(null!=ve.categories||_.isEmpty(we)){if(ve.categories&&ve.categories.length>0){Ue=k.getSeriesCount();for(var Xe=!k.hasSeries(),K=ve.categories[0],Lt=(0,De.EO)(K.source,R),F=0,Yt=we.length;F<Yt;F++){var Ie,Ct=_e.getColorForSeriesValue(Ie=K.objects&&K.objects[F],K.identityFields,K.values[F]),ze=(0,d.t$)({defaultColor:yt,categoricalDataReader:X,categoryIndex:F}),Ae=(0,d.Sm)({defaultColor:pt,categoricalDataReader:X,categoryIndex:F}),Mt=(0,De.WU)(K.values[F],Lt),rt=we[F],ye=($=null===(r=rt[L=0])||void 0===r?void 0:r.value,q=null===(h=rt[L])||void 0===h?void 0:h.formatString,Q&&oe?oe[F][L].value:void 0),pe=Q&&oe?oe[F][L].formatString:void 0,it=void(W=void 0);if(A){(W=[]).push(it={displayName:K.source.displayName,value:Mt}),ge&&(Re=Y.getSeriesMetadataColumn(),at=k.getSeriesName(L),W.push({displayName:Re.displayName,value:(0,u.xq)(at,Re,R)}));var Ke=Y.getValueMetadataColumn(ae,L);null!=$&&W.push({displayName:Ke.displayName,value:(0,u.xq)($,Ke,R,!1,q)}),null!=ye&&W.push({displayName:xe.I6.localizationOptions.highlightedValueDisplayName,value:(0,u.xq)(ye,Ke,R,!1,pe)});var ke=He?He.source:void 0;if(Xe&&ke&&ke!==Ke&&null!=He.values[F]){var Xt=(0,zt.NA)(null===(o=He.objects)||void 0===o?void 0:o[F],R);W.push({displayName:ke.displayName,value:(0,u.xq)(He.values[F],ke,R,!1,Xt)})}(0,xe.VT)(X,W,F,L,R)}var wt=Y.getValueMetadataColumn(ae,L),st=(se=Y.getValueColumn(ae,L),Xe&&wt);if(Ee=Ve.dw.builder().withCategory([K],F,null===(l=K?.source)||void 0===l?void 0:l.queryName,!0).withMeasure(st?wt.queryName:void 0,st?se:void 0,st?F:void 0).createSelectionId(),tt=JSON.stringify({nodeKey:Ee.getKey(),depth:1}),je=1===Ue?(0,De.EO)(Y.getValueMetadataColumn(ae,L),R):Lt,j={key:tt,name:Mt,size:void 0,originalValue:void 0,color:Ct,selected:!1,identity:Ee,tooltipInfo:W,formattedTooltip:(0,J.X)(W),highlightedTooltipInfo:W,labelFormatString:q??je,categoryIndex:F,seriesIndex:L},Ae.color){j.categoryLabelFill=Ae.color;var Kt=(0,d.B8)(Ae)?Ae.color:pt;V.fontProperties=(0,d.Vv)(Kt,V.fontProperties)}if(ze.color){j.labelFill=ze.color;var kt=(0,d.B8)(ze)?ze.color:yt;H.fontProperties=(0,d.Vv)(kt,H.fontProperties)}Q&&(j.highlightMultiplier=0!==$?ye/$:0,j.highlightValue=D&&null!=ye?Math.abs(ye):ye,j.originalHighlightValue=ye,j.highlightLabelFormatString=pe??je);for(var me=0,Pt=0;L<Ue;L++){var Pe=Y.getValueColumn(ae,L),he=(et=We&&We[L],rt[L].value),Se=void 0;if(Ce=(Fe=i.checkValueForShape(he,xt,D,Ce)).dataWasCulled,Fe.validShape&&(me+=he,Q&&(Pt+=Se=oe[F][L].value),!Xe)){var nt;nt=Y.hasDynamicSeries()?(0,u.xq)(k.getSeriesName(L),Y.getSeriesMetadataColumn(),R):X.data.getSeriesName(L);var Qe=ve?ve.values:null,Qt=Pe.source.queryName,Nt=Ve.dw.builder().withCategory([K],F,null===(p=K?.source)||void 0===p?void 0:p.queryName,!0).withSeries(Qe,et,!0).withMeasure(Qt,Pe,F).createSelectionId(),Jt=JSON.stringify({nodeKey:Nt.getKey(),depth:2}),de=void(ue=Q&&0!==Se?Se:void 0);A&&((de=[]).push(it),ge&&(!K||K.source!==Qe.source)&&de.push({displayName:Qe.source.displayName,value:(0,u.xq)(k.getSeriesName(L),Qe.source,R)}),null!=he&&de.push({displayName:Pe.source.displayName,value:(0,u.xq)(he,Pe.source,R,!1,q)}),null!=ye&&de.push({displayName:xe.I6.localizationOptions.highlightedValueDisplayName,value:(0,u.xq)(ue,Pe.source,R,!1,pe)}),(0,xe.VT)(X,de,F,ge?L:void 0,R));var Tt=(0,De.EO)(Pe.source,R),be={key:Jt,name:nt,size:D?Math.abs(he):he,originalValue:he,color:Ct,selected:!1,identity:Nt,tooltipInfo:de,formattedTooltip:(0,J.X)(de),highlightedTooltipInfo:de,labelFormatString:q??Tt,categoryIndex:F,seriesIndex:L},Dt=(0,d.Sm)({defaultColor:Ae.color,categoricalDataReader:X,categoryIndex:F,seriesIndex:L}),Vt=(0,d.t$)({defaultColor:ze.color,categoricalDataReader:X,categoryIndex:F,seriesIndex:L});Dt.color&&(j.categoryLabelFill=Dt.color),Vt.color&&(be.labelFill=Vt.color),Q&&(be.highlightMultiplier=0!==he?Se/he:0,be.highlightValue=D&&null!=Se?Math.abs(Se):null,be.originalHighlightValue=Se,be.highlightLabelFormatString=pe??Tt),null==j.children&&(j.children=[]),j.children.push(be),Ge.push(be)}}me&&(Xe&&(j.size=D?Math.abs(me):me,j.originalValue=me),Le.children.push(j),Ge.push(j)),Q&&(j.highlightMultiplier=me?Pt/me:0)}}}else for(var L=0,Ue=Y.getSeriesCount();L<Ue;L++){var $,Fe,se=Y.getValueColumn(ae,L),et=We&&We[L],q=we[0][L].formatString;if(Ce=(Fe=i.checkValueForShape($=we[0][L].value,xt,D,Ce)).dataWasCulled,Fe.validShape){var Be;Be=ge?(0,u.xq)(Y.getSeriesValueColumnGroup(L).name,Y.getSeriesMetadataColumn(),R):X.columns.hasStaticSeries()?X.data.getSeriesName(L):X.data.getValueDisplayName(ae);var Ee,tt=(Ee=(new Ve.dw).withSeries(N.categorical.values,ge?et:void 0,!0).withMeasure(se.source.queryName,Y.getValueColumn(ae,L),-1).createSelectionId()).getKey(),Bt=ge?_e.getColorForSeriesValue(X.objects.getSeriesDataObjects(L),ve.values.identityFields,(0,u.Pl)(se.source)):_e.getColorForMeasure(se.source.objects,se.source.queryName),ue=Q?oe[0][L].value:void 0,Ye=Q?oe[0][L].formatString:void 0,W=void 0;if(A){if(W=[],ge){var Re=Y.getSeriesMetadataColumn(),at=k.getSeriesName(L);W.push({displayName:Re.displayName,value:(0,u.xq)(at,Re,R)})}null!=$&&W.push({displayName:se.source.displayName,value:(0,u.xq)($,se.source,R,!1,q)}),null!=ue&&W.push({displayName:xe.I6.localizationOptions.highlightedValueDisplayName,value:(0,u.xq)(ue,se.source,R,!1,Ye)}),(0,xe.VT)(X,W,0,ge?L:void 0,R)}var je=(0,De.EO)(se.source,R),j={key:tt,name:Be,size:D?Math.abs($):$,originalValue:$,color:Bt,selected:!1,identity:Ee,tooltipInfo:W,formattedTooltip:(0,J.X)(W),highlightedTooltipInfo:W,labelFormatString:q??je,categoryIndex:0,seriesIndex:L};Q&&oe&&(j.highlightMultiplier=0!==$?ue/$:0,j.highlightValue=D&&null!=ue?Math.abs(ue):ue,j.originalHighlightValue=ue,j.highlightLabelFormatString=Ye??je),Le.children.push(j),Ge.push(j)}}}var Ht=bt?(0,z.xw)({dataView:N,categoryRole:P.A4.group,valueRole:P.A4.values,showByDefault:!1,style:te}):(0,z.pq)({dataView:N,staticSeriesRoleNames:[P.A4.values],showByDefault:!1,style:te});return B&&(B.applySelectionStateToData(Ge),B.applySelectionStateToData(Ht.dataPoints)),{root:Le,flattenedViewModel:i.flattenViewModel(Le,ie),hasHighlights:Q,legendData:Ht,dataLabelSettings:H,categoryLabelSettings:V,legendObjectProperties:null!==(m=null===(w=null===(C=N.metadata)||void 0===C?void 0:C.objects)||void 0===w?void 0:w.legend)&&void 0!==m?m:null,dataWasCulled:Ce,hasNegativeValues:Oe,allValuesAreNegative:D,hasSeriesData:Wt,hasCategoryData:bt}},i.normalizedValue=function(e,t){return null==e||isNaN(e)?0:e===Number.POSITIVE_INFINITY?Number.MAX_VALUE:e===Number.NEGATIVE_INFINITY?-Number.MAX_VALUE:t?Math.abs(e):e<0?0:e},i.getValuesFromCategoricalDataView=function(e,t,a){for(var r=(0,I.G)(e,{staticSeriesRoleNames:[a],formatStringProp:P._H.general.formatString}).data,h=r.getCategoryCount()||1,o=r.getSeriesCount(),l=[],p=[],C=0,w=0;w<h;w++)l.push([]),t&&p.push([]);for(var m,N,te,H=0;H<o;H++)for(var V=0;V<h;V++){var B=r.getValue(a,V,H),fe=r.getFormatString(a,V,H);l[V].push({value:B,formatString:fe});var A=void 0;if(t){A=r.getHighlight(a,V,H);var ie=r.getHighlightFormatString(a,V,H);null==A&&(A=0),p[V].push({value:A,formatString:ie})}N=void 0===N?(!t||A<=0)&&B<=0:N&&(!t||A<=0)&&B<=0,m||(m=B<0||!!t&&A<0)}for(N=!!N,H=0;H<o;H++)for(V=0;V<h;V++)C+=B=i.normalizedValue(B=l[V][H].value,N),t&&(A=i.normalizedValue(A=p[V][H].value,N),!te&&(0,Rt.aP)(A,B)&&(te=!0));return{values:l,highlights:t?p:void 0,highlightsOverflow:t?te:void 0,totalValue:N?Math.abs(C):C,hasNegativeValues:m,allValuesAreNegative:N}},i.getCullableValue=function(e,t){return i.CullableArea/(t.width*t.height)*e},i.prototype.update=function(e){var t,a;Ze.fF.assertValue(e,"options"),this.featureSwitches.onObject&&e.formatMode!==this.formatMode&&(this.subSelectionHelper.setFormatMode(e.formatMode),this.interactivityService.setFormatMode(e.formatMode),this.formatMode=e.formatMode);var s=this.dataViews=e.dataViews;this.currentViewport=e.viewport,null===(t=this.plotLassoManager)||void 0===t||t.setUiScale(this.currentViewport.scale);var r=i.getDefaultTreemapDataLabelSettings(this.style),h=i.getDefaultTreemapCategoryLabelSettings(this.style);if(this.data=null!==(a=s?.[0])&&void 0!==a&&a.categorical?i.converter({dataView:s[0],style:this.style,dataLabelSettings:r,categoryLabelSettings:h,interactivityService:this.interactivityService,viewport:this.currentViewport,treemap:this.treemap,tooltipsEnabled:this.tooltipsEnabled,dataPointLassoSelect:this.dataPointLassoSelect}):{root:{key:"root",name:"root",originalValue:void 0,size:void 0,children:[],selected:!1,highlightMultiplier:0,identity:Ve.l0.createNull(),color:void 0,categoryIndex:null,seriesIndex:null},flattenedViewModel:[],hasHighlights:!1,legendData:(0,z.Fe)(this.style),dataLabelSettings:r,categoryLabelSettings:h,dataWasCulled:!1,hasNegativeValues:!1,allValuesAreNegative:!1},this.updateInternal(e.suppressAnimations),s){var o=(0,T.b)(s,!1,!1,!1,["Tooltips"]);this.data.allValuesAreNegative?o.push(new ut.fi):this.data.hasNegativeValues&&o.push(new ut.v3),this.hostService.setWarnings(o)}var p=e.type&qe.EP.FormattingSubSelectionChange;if(this.subSelectionHelper&&(e.type&qe.EP.Data||e.type&qe.EP.FormattingSubSelectionChange)&&(this.subSelectionHelper.updateOutlinesFromSubSelections(e.subSelections,!0),this.hostService.alertScreenReader&&p)){var C=this.subSelectionHelper.getLabelsFromSubSelections(e.subSelections,["aria-label"]),w=C?.length&&C.join(" ");w&&this.hostService.alertScreenReader(w)}},i.prototype.onDataChanged=function(e){this.update({suppressAnimations:e.suppressAnimations,dataViews:e.dataViews,viewport:this.currentViewport})},i.prototype.onResizing=function(e){this.update({suppressAnimations:!0,dataViews:this.dataViews,viewport:e})},i.prototype.onClearSelection=function(){this.interactivityService&&this.interactivityService.clearSelection()},i.prototype.onRestoreSelection=function(e){return!!this.interactivityService&&this.interactivityService.restoreSelection(e.selection)},i.prototype.getFormattingModel=function(){var e=this;if(this.data)return new Te.Nq(function(){return e.getLegendCard()},function(){return e.getDataPointCard(e.data)},function(){return e.getLabelsCard(e.data.dataLabelSettings,!0)},function(){return e.getCategoryLabelsCard(e.data.categoryLabelSettings,!1)}).build()},i.prototype.getDataPointCard=function(e){var t=this.dataViews&&this.dataViews.length>0&&this.dataViews[0],a=t&&this.dataViews[0].categorical,s=(0,b.Q1)(a),r=e.root.children;if(!_.isEmpty(r)&&!s){var h=!!(a&&a.values&&a.values.source),o=_.map(r,function(l){return{color:l.color,displayName:l.name,identity:l.identity}});return h||!this.cartesianConditionalFormatting?(0,x.xr)(o,this.hostService,this.featureSwitches):(0,x.k2)({dataView:t,style:this.style,categories:o,fillInstanceKind:2,hideShowAllToggle:!0,showAllDataPoints:!0,noDefaultFillColor:!0},this.featureSwitches,this.hostService)}},i.prototype.getLegendCard=function(){return(0,ee.ZF)({legendData:this.data.legendData},this.hostService,this.featureSwitches)},i.prototype.getLabelsCard=function(e,t){var s,r,a=this;if(!_.isEmpty(this.dataViews))return(0,v.XQ)({cardBuilder:new Te.CQ(new Te.lg("labels"),"Visual_DataPointsLabels",P._H.labels,function(h){return a.hostService.getLocalizedString(h)}),dataLabelsProps:P._H.labels,featureSwitches:this.featureSwitches,hostServices:this.hostService,options:{dataLabelsSettings:e,show:!0,displayUnits:t,precision:t,fontSize:!0,fontFamily:!0,fontSizeRange:!0,style:this.style,bold:!0,italic:!0,underline:!0},individualSelector:(0,v.WD)({featureSwitches:this.featureSwitches,hasCategories:this.data.hasCategoryData,hasDynamicSeries:!(null===(r=null===(s=_.first(this.dataViews).categorical)||void 0===s?void 0:s.values)||void 0===r||!r.source),hasSeriesSelector:!1})})},i.prototype.getCategoryLabelsCard=function(e,t){var s,r,h,o,a=this;return(0,v.XQ)({cardBuilder:new Te.CQ(new Te.lg("categoryLabels"),"Visual_CategoryLabels",P._H.categoryLabels,function(l){return a.hostService.getLocalizedString(l)}),dataLabelsProps:P._H.categoryLabels,featureSwitches:this.featureSwitches,hostServices:this.hostService,options:{dataLabelsSettings:e,show:!0,displayUnits:t,precision:t,fontSize:!0,fontFamily:!0,fontSizeRange:!0,style:this.style,bold:!0,italic:!0,underline:!0},individualSelector:(0,v.WD)({featureSwitches:this.featureSwitches,hasCategories:null===(s=this.data)||void 0===s?void 0:s.hasCategoryData,hasDynamicSeries:!(null===(o=null===(h=null===(r=_.first(this.dataViews))||void 0===r?void 0:r.categorical)||void 0===h?void 0:h.values)||void 0===o||!o.source),hasSeriesSelector:!1})})},i.checkValueForShape=function(e,t,a,s){var r;return e?(r=a?Math.abs(e)<t:e<t)?{validShape:!1,dataWasCulled:s=s||r}:{validShape:!0,dataWasCulled:s}:{validShape:!1,dataWasCulled:s}},i.prototype.calculateTreemapSize=function(){var e=this.legend.getMargins();return{height:this.currentViewport.height-e.height,width:this.currentViewport.width-e.width}},i.prototype.initViewportDependantProperties=function(e){void 0===e&&(e=0);var t=this.calculateTreemapSize();this.svg.attr("width",t.width).attr("height",t.height),(0,Ft.xz)(this.svg,this.legend)},i.canDisplayMajorLabel=function(e,t){return!(1!==e.depth||_.isEmpty(e.data.name)||e.x1-e.x0-2*i.TextMargin<i.MinTextWidthForMajorLabel||e.y1-e.y0<t.fontProperties.size.px+2*i.TextMargin)},i.canDisplayMinorLabel=function(e,t,a){if(e.depth<1||e.depth>2||1===e.depth&&(e.children||!t.show)||_.isEmpty(e.data.name))return!1;var r=e.y1-e.y0;if(e.x1-e.x0-2*i.TextMargin<i.MinTextWidthForMinorLabel)return!1;var o=t.fontProperties.size.px+2*i.TextMargin;if(r<o)return!1;if(1===e.depth){if(e.y0+r-(l=e.y0+a.fontProperties.size.px+2*i.TextMargin)<o)return!1}else if(2===e.depth){var l=Math.max(e.parent.y0+a.fontProperties.size.px+2*i.TextMargin,e.y0);if(e.y0+r-l<o)return!1}return!0},i.createMajorLabelText=function(e,t,a,s){var r=e.x1-e.x0-2*i.TextMargin,h=(0,y.qk)(t.fontProperties,e.data.name);return jt.b.getTailoredTextOrDefault(h,r)},i.createMinorLabelText=function(e,t,a,s,r){var h=e.x1-e.x0-2*i.TextMargin,o=e.data,l=o.name;if(t.show){var p=s.getOrCreate(o.labelFormatString,t,a),C=s.getOrCreate(o.highlightLabelFormatString,t,a);l=(0,v.Gv)({label:null!=o.originalHighlightValue?o.originalHighlightValue:o.originalValue,maxWidth:h,formatter:null!=o.originalHighlightValue?C:p,fontProperties:t.fontProperties}),r.show&&2===e.depth&&(l=(0,v.Gv)({label:o.name,maxWidth:h,fontProperties:t.fontProperties})+" "+l)}return(0,v.Gv)({label:l,maxWidth:h,fontProperties:t.fontProperties})},i.prototype.updateInternal=function(e){var t=this.data,a=t&&t.hasHighlights,s=t?t.dataLabelSettings:i.getDefaultTreemapDataLabelSettings(this.style),r=t?t.categoryLabelSettings:i.getDefaultTreemapCategoryLabelSettings(this.style),h=(0,O.Mb)(this.animator,e);!(this.options.interactivity&&this.options.interactivity.mobileTileInteractive)&&this.data&&this.renderLegend(),this.initViewportDependantProperties(h);var o=this.calculateTreemapSize();this.treemap=this.treemap.size([o.width,o.height]);var l=[];if(t&&t.root){var p=d3.hierarchy(t.root).sum(function(D){return D.size}).sort(function(D,Le){return Le.value-D.value});this.treemap(p).each(function(D){l.push(D)})}var w=l.filter(function(D){return null!=D.data.highlightMultiplier&&(!D.children||0===D.children.length)}),m=[],N=[],te=null;r.show&&(m=l.filter(function(D){return i.canDisplayMajorLabel(D,r)})),(s.show||r.show)&&(N=l.filter(function(D){return i.canDisplayMinorLabel(D,s,r)}),0===s.displayUnits&&(te=d3.max(N,function(D){return Math.abs(D.value)})));var V,B,fe,A,ie,H=i.getLayout(s,te,r);if(this.animator&&!e&&(V=(ie=this.animator.animate({viewModel:t,nodes:l,highlightNodes:w,majorLabeledNodes:m,minorLabeledNodes:N,shapeGraphicsContext:this.shapeGraphicsContext,labelGraphicsContext:this.labelGraphicsContext,interactivityService:this.interactivityService,layout:H,dataLabelSettings:s,categoryLabelSettings:r})).shapes,B=ie.highlightShapes,fe=ie.majorLabels,A=ie.minorLabels),!this.animator||e||ie.failed){var R=this.interactivityService&&this.interactivityService.hasSelection(),X=this.shapeGraphicsContext;V=i.drawDefaultShapes(X,l,a,H,this.interactivityService),B=i.drawDefaultHighlightShapes(X,w,R,a,H);var k=this.labelGraphicsContext;fe=i.drawDefaultMajorLabels(k,m,r,H),A=i.drawDefaultMinorLabels(k,N,s,H)}if(this.featureSwitches.onObject&&((0,S.rI)(V,this.hostService,H),(0,S.$s)(fe,"category-labels"),s.show?(0,S.$s)(A,"data-labels"):(0,S.Vi)(A)),this.interactivityService){this.navigationStrategy=!this.data.hasCategoryData&&this.data.hasSeriesData?Ne.jN.SeriesOnly:this.data.hasCategoryData&&this.data.hasSeriesData?Ne.jN.CategoryFirst:Ne.jN.CategoryOnly;var Y={navigationOptions:{navigationStrategy:this.navigationStrategy,helper:this},pointSourceKey:"treemap"},Oe={root:this.shapeGraphicsContext,shapes:V,highlightShapes:B,majorLabels:fe,minorLabels:A,nodes:l,hasHighlights:t.hasHighlights,visualInstanceId:this.hostService.instanceId,hitTester:new gt({nodes:l})};this.interactivityService.bind(_.map(l,function(D){return D.data}),this.behavior,Oe,Y)}this.tooltipsEnabled&&this.addTooltips(V,B)},i.prototype.getSelectorsByColumnSubSelection=function(e){if("category"===d3.select(e).attr(G.Ez)){var s=d3.select(e).datum().data.identity.getSelectorsByColumn();if(s)return s}return{}},i.prototype.getSubSelectionShortcuts=function(e,t){var a,s,h=_.first(e).visualObjects;if(h.length>0&&!_.isEmpty(h[0])){var l={key:"Delete",nextValue:!1};switch(h[0].objectName){case"legend-title":return(0,ee.tV)(this.hostService);case"legend-items":return(0,ee.tY)({hostServices:this.hostService,showSort:!1});case"category":var p=!(null===(s=null===(a=_.first(this.dataViews).categorical)||void 0===a?void 0:a.values)||void 0===s||!s.source);return[{type:0,excludedResetFormattingIds:[P._H.categoryLabels.show,P._H.labels.show]},(0,E.__assign)((0,E.__assign)({type:2},P._H.categoryLabels.show),{enabledLabel:this.hostService.getLocalizedString("Visual_Add_CategoryLabel")}),(0,E.__assign)((0,E.__assign)({type:2},P._H.labels.show),{enabledLabel:this.hostService.getLocalizedString("Format_AddDataLabels")}),{type:1,destinationInfo:{cardUid:"".concat("Visual","-").concat("colors"),groupUid:p||!this.cartesianConditionalFormatting?"".concat("colors","-").concat("default"):"".concat("colors","-").concat("colors")},label:this.hostService.getLocalizedString("Format_Categories")}];case"category-labels":return[(0,E.__assign)((0,E.__assign)({type:2},P._H.categoryLabels.show),{disabledLabel:this.hostService.getLocalizedString("Delete"),keyboardShortcuts:[l]}),{type:0,excludedResetFormattingIds:[P._H.categoryLabels.show]},{type:1,destinationInfo:{cardUid:"".concat("Visual","-").concat("categoryLabels"),groupUid:"".concat("categoryLabels","-").concat("values")},label:this.hostService.getLocalizedString("Format_Category_Labels")}];case"data-labels":return[(0,E.__assign)((0,E.__assign)({type:2},P._H.labels.show),{disabledLabel:this.hostService.getLocalizedString("Delete"),keyboardShortcuts:[l]}),{type:0,excludedResetFormattingIds:[P._H.labels.show]},{type:1,destinationInfo:{cardUid:"".concat("Visual","-").concat("labels")},label:this.hostService.getLocalizedString("Format_Data_Labels")}];default:return}}},i.prototype.getSubSelectionStyles=function(e){var t,a,h,o,r=_.first(e).visualObjects;if(r.length>0)switch((h=r[0])&&h.selectorsByColumn&&(o=(0,ct.fd)((0,ct.tV)(h.selectorsByColumn))),h.objectName){case"legend-title":return(0,ee.aJ)();case"legend-items":return(0,ee.Gh)(this.hostService);case"category":return(0,c.w3)(this.hostService,void 0,(0,E.__assign)({selector:o},P._H.dataPoint.fill));case"category-labels":var l=P._H.categoryLabels;return(0,c.un)(this.hostService,{fontFamilyReference:l.fontFamily,fontSizeReference:l.fontSize,boldReference:l.bold,italicReference:l.italic,underlineReference:l.underline,fontColorReference:(0,E.__assign)((0,E.__assign)({},l.color),{selector:{data:[(0,At.Ue)(1)]}})});case"data-labels":var p=P._H.labels,C={fontFamilyReference:p.fontFamily,fontSizeReference:p.fontSize,boldReference:p.bold,italicReference:p.italic,underlineReference:p.underline,fontColorReference:p.color,displayUnitsReference:p.labelDisplayUnits,precisionReference:p.labelPrecision};return(0,c.Jf)({hostServices:this.hostService,omitSelectorForSingleSeries:!1,individualSelector:(0,v.WD)({featureSwitches:this.featureSwitches,hasCategories:this.data.hasCategoryData,hasDynamicSeries:!(null===(a=null===(t=_.first(this.dataViews).categorical)||void 0===t?void 0:t.values)||void 0===a||!a.source),hasSeriesSelector:!1}),selector:void 0,repetitionSelector:void 0},C);default:return}},i.prototype.getNextSubSelectable=function(e,t){return this.subSelectionHelper.getNextSubSelectable(e,t)},i.prototype.getSubSelectables=function(e){return this.subSelectionHelper.getAllSubSelectables(e)},i.prototype.getFirstElement=function(){var e=this.data.flattenedViewModel;return _.isEmpty(e)?{element:null}:{element:this.findHTMLElement(e[0].categoryIndex,e[0].seriesIndex)}},i.prototype.getNextDataPoint=function(e,t,a){var s=(0,f.R)(this.data.flattenedViewModel,e,t,this.navigationStrategy,a);return{element:this.findHTMLElement(s.categoryIndex,s.seriesIndex)}},i.prototype.findHTMLElement=function(e,t){return this.shapeGraphicsContext.selectAll("."+(this.navigationStrategy===Ne.jN.CategoryFirst?i.NodeGroupClassName:i.ParentGroupClassName)).filter("."+S.Sh.node).filter(function(r){return r.data.categoryIndex===e&&r.data.seriesIndex===t}).node()},i.flattenViewModel=function(e,t){return t(d3.hierarchy(e).sum(function(r){return r.size}).sort(function(r,h){return h.value-r.value})).leaves().map(function(r){return{categoryIndex:r.data.categoryIndex,seriesIndex:r.data.seriesIndex}})},i.prototype.addTooltips=function(e,t){this.tooltipService.addTooltip(e,function(a){return a.data&&(a.data.data.highlightedTooltipInfo?a.data.data.highlightedTooltipInfo:a.data.data.tooltipInfo)},function(a){return a.data&&a.data.data.identity&&[a.data.data.identity]}),this.tooltipService.addTooltip(t,function(a){return a.data&&a.data.data.highlightedTooltipInfo},function(a){return a.data&&a.data.data.identity&&[a.data.data.identity]})},i.prototype.renderLegend=function(){var e=this.data.legendObjectProperties?this.data.legendData:(0,z.Fe)(this.style);null!=e.position&&this.legend.setPosition(e.position),this.legend.drawLegend({data:e,parentViewport:this.currentViewport,formatMode:this.formatMode,onObject:this.featureSwitches.onObject,titleSliceUid:"".concat("legend","-").concat("title","-titleText")})},i.getNodeClass=function(e,t){var a;switch(e.depth){case 1:a=i.ParentGroupClassName;break;case 2:a=i.NodeGroupClassName;break;case 0:a=i.RootNodeClassName;break;default:Ze.fF.assertFail("Treemap only supports 2 levels maxiumum")}return a+" "+(t?S.Sh.highlight:S.Sh.node)},i.isAriaHidden=function(e){return 0===e.depth},i.getNodeAccesibilityRole=function(e){switch(e.depth){case 1:return e.data.seriesIndex?"group":"treeitem";case 2:case 0:return"treeitem";default:Ze.fF.assertFail("Treemap only supports 2 levels maxiumum")}},i.createTreemapShapeLayout=function(e){return void 0===e&&(e=!1),e?{x:function(r){return r.x0+.2},y:function(r){return r.y0+(r.y1-r.y0)*(1-r.data.highlightMultiplier)},width:function(r){return Math.max(0,r.x1-r.x0-.4)},height:function(r){return Math.max(0,(r.y1-r.y0)*r.data.highlightMultiplier)},"stroke-dasharray":function(r){var h=r.x1-r.x0;return"0.6,"+(h-1.2)+","+(2*(r.y1-r.y0)+h)}}:{x:function(r){return r.x0},y:function(r){return r.y0},width:function(r){return Math.max(0,r.x1-r.x0)},height:function(r){return Math.max(0,r.y1-r.y0)},"stroke-dasharray":null}},i.createTreemapZeroShapeLayout=function(){return{x:function(t){return t.x0},y:function(t){return t.y1},width:function(t){return Math.max(0,t.x1-t.x0)},height:function(t){return 0}}},i.drawDefaultShapes=function(e,t,a,s,r){var h=!1,o=e.selectAll("."+S.Sh.node).data(t,function(m){return m.data.key}),l=$e.M.isInternetExplorerOrEdge(),p=r&&r.hasSelection(),C=o.enter().append("rect").attr("class",s.shapeClass),w=o.merge(C).style("fill",function(m){return(0,S._M)(m,h)}).style("fill-opacity",function(m){return(0,S.eR)(m,p,a,h)}).attr("aria-label",function(m){return m.data.formattedTooltip}).attr("role",s.role).attr("aria-hidden",s.ariaHidden).attr("aria-checked",function(m){return null===m.parent?null:m.data.selected}).attrs(s.shapeLayout);return r&&w.attr("tabindex",function(m){return null==m.value||s.ariaHidden(m)?null:0}).attr("focusable",function(m){return null!=m.value&&!s.ariaHidden(m)||null}).classed(ne.Pg,!l),o.exit().remove(),w},i.drawDefaultHighlightShapes=function(e,t,a,s,r){var h=!0,o=e.selectAll("."+S.Sh.highlight).data(t,function(C){return C.data.key+"highlight"}),l=o.enter().append("rect").attr("class",r.highlightShapeClass),p=o.merge(l).style("fill",function(C){return(0,S._M)(C,h)}).style("fill-opacity",function(C){return(0,S.eR)(C,a,s,h)}).attrs(r.highlightShapeLayout);return o.exit().remove(),p},i.drawDefaultMajorLabels=function(e,t,a,s){var r=e.selectAll("."+S.Sh.major).data(t,function(l){return l.data.key}),h=r.enter().append("text").attr("class",s.majorLabelClass),o=r.merge(h).attrs(s.majorLabelLayout).text(s.majorLabelText).styles(function(l){return(0,y.rL)(a.fontProperties,{color:l.data.categoryLabelFill})});return r.exit().remove(),o},i.drawDefaultMinorLabels=function(e,t,a,s){var r=e.selectAll("."+S.Sh.minor).data(t,function(l){return l.data.key}),h=r.enter().append("text").attr("class",s.minorLabelClass),o=r.merge(h).attrs(s.minorLabelLayout).text(s.minorLabelText).styles(function(l){return(0,y.rL)(a.fontProperties,{color:l.data.labelFill})});return r.exit().remove(),o},i.cleanMinorLabels=function(e){e.selectAll("."+i.LabelsGroupClassName).selectAll("."+S.Sh.minor).data([]).exit().remove()},i.ClassName="treemap",i.LabelsGroupClassName="labels",i.ShapesClassName="shapes",i.RootNodeClassName="rootNode",i.ParentGroupClassName="parentGroup",i.NodeGroupClassName="nodeGroup",i.MinTextWidthForMinorLabel=18,i.MinTextWidthForMajorLabel=22,i.TextMargin=5,i.CullableArea=9,i}(),gt=function(){function i(e){this.nodes=e.nodes}return i.prototype.queryRegion=function(e){return this.getSelectedDataPoints(this.nodes,e)},i.prototype.getSelectedDataPoints=function(e,t){for(var a=[],s=0,r=e;s<r.length;s++){var h=r[s];(!h.children||!h.children.length)&&this.isNodeOverlapingBounds(h,t)&&a.push(h.data)}return a},i.prototype.isNodeOverlapingBounds=function(e,t){var a=this.getNodeCoordinate(e);return(0,ht.WN)(a.left,a.right,t.left,t.right)&&(0,ht.WN)(a.top,a.bottom,t.top,t.bottom)},i.prototype.getNodeCoordinate=function(e){return{left:e.x0,right:e.x1,top:e.y0,bottom:e.y1}},i}();function Gt(){return new ft}function It(){return new vt}},79476:function(Je,ce,g){g.d(ce,{ao:function(){return T},fS:function(){return P},oY:function(){return b}});var E=g(19377);function P(f,c){return null!=f&&null!=c&&f.x===c.x&&f.y===c.y}function b(f,c,M){var G=(c.y-f.y)*(M.x-c.x)-(c.x-f.x)*(M.y-c.y);return 0===G?E.i.Colinear:G>0?E.i.Clockwise:E.i.Counterclockwise}function T(f,c,M){return M.x<=Math.max(f.x,c.x)&&M.x>=Math.min(f.x,c.x)&&M.y<=Math.max(f.y,c.y)&&M.y>=Math.min(f.y,c.y)}},92379:function(Je,ce,g){g.d(ce,{m:function(){return ne}});var E=g(19377),O=g(79476),P=g(80758),ne=function(){function x(n){n&&(this.polygonPoints=this.convertArrayPathToPoints(n))}return x.fromPolygonPoints=function(n){var u=new x(null);return u.polygonPoints=n,u},x.prototype.absoluteCentroid=function(){return null==this._absoluteCentroid&&(this._absoluteCentroid=this.calculatePolygonCentroid()),this._absoluteCentroid},x.prototype.absoluteBoundingRect=function(){return null==this._absoluteBoundingRect&&(this._absoluteBoundingRect=this.calculateBoundingRect()),this._absoluteBoundingRect},x.prototype.contains=function(n){var d={x:n.left+n.width,y:n.top},v={x:n.left,y:n.top+n.height},y={x:n.left+n.width,y:n.top+n.height};return this.inside({x:n.left,y:n.top})&&this.inside(d)&&this.inside(v)&&this.inside(y)},x.prototype.conflicts=function(n){if(!this.isConflictWithBoundingBox(n))return!1;var d={x:n.left+n.width/2,y:n.top},v={x:n.left+n.width,y:n.top},y={x:n.left,y:n.top+n.height},b={x:n.left+n.width/2,y:n.top+n.height},T={x:n.left+n.width,y:n.top+n.height},f={x:n.left,y:n.top+n.height/2},c={x:n.left+n.width,y:n.top+n.height/2};return this.inside({x:n.left,y:n.top})||this.inside(d)||this.inside(v)||this.inside(y)||this.inside(b)||this.inside(T)||this.inside(f)||this.inside(c)},x.prototype.lineIntersectionPoint=function(n,u){for(var d=0;d<this.polygonPoints.length;d++){var b=this.getLineIntersection(n,u,this.polygonPoints[d],d===this.polygonPoints.length-1?this.polygonPoints[0]:this.polygonPoints[d+1]);if(null!==b)return b}return null},x.calculateAbsolutePolygonArea=function(n){var u,d=1,v=0;for(u=0;u<n.length;u++)v+=n[u].x*n[d].y-n[d].x*n[u].y,d=(d+1)%n.length;return.5*v},x.prototype.overlapPath=function(n){if(this.inside({x:n[0],y:n[1]}))return!0;var u=new x(n);if(u.inside(this.polygonPoints[0]))return!0;for(var d=0;d<this.polygonPoints.length;d++)if(u.lineIntersectionPoint(this.polygonPoints[d],this.polygonPoints[(d+1)%this.polygonPoints.length]))return!0;return!1},x.prototype.inside=function(n){for(var u=n.x,d=n.y,v=!1,y=0,b=this.polygonPoints.length-1;y<this.polygonPoints.length;b=y++){var T=this.polygonPoints[y].x,f=this.polygonPoints[y].y,M=this.polygonPoints[b].y;f>d!=M>d&&u<(this.polygonPoints[b].x-T)*(d-f)/(M-f)+T&&(v=!v)}return v},x.translateX=function(n,u){for(var d=new Float64Array(2*n.polygonPoints.length),v=0;v<n.polygonPoints.length;v++)d[2*v]=n.polygonPoints[v].x+u,d[2*v+1]=n.polygonPoints[v].y;return new x(d)},x.polygonBoundsOverlap=function(n,u){var d=(0,P.WN)(x.getPolyBoundLeft(n),x.getPolyBoundRight(n),x.getPolyBoundLeft(u),x.getPolyBoundRight(u)),v=(0,P.WN)(x.getPolyBoundLower(n),x.getPolyBoundUpper(n),x.getPolyBoundLower(u),x.getPolyBoundUpper(u));return d&&v},x.circleRectangleOverlap=function(n,u,d){var v=Math.max(n.left,Math.min(u.x,n.right)),y=Math.min(n.bottom,Math.max(u.y,n.top)),b=v-u.x,T=y-u.y;return b*b+T*T<=d*d},x.linesIntersect=function(n,u,d,v,y){void 0===y&&(y=!0);var b=(0,O.oY)(n,u,d),T=(0,O.oY)(n,u,v),f=(0,O.oY)(d,v,n),c=(0,O.oY)(d,v,u);return b!==T&&f!==c||!!y&&!!(b===E.i.Colinear&&(0,O.ao)(n,u,d)||T===E.i.Colinear&&(0,O.ao)(n,u,v)||f===E.i.Colinear&&(0,O.ao)(d,v,n)||c===E.i.Colinear&&(0,O.ao)(d,v,u))},x.resize=function(n,u){if(0===u)return n;for(var d=x.calculateAbsolutePolygonArea(n.polygonPoints)>0,y=_.clone(u>0&&!0===d||u<0&&!1===d?n.polygonPoints.reverse():n.polygonPoints),b=n.absoluteCentroid(),T=[],f=0;f<y.length;f++){var c=y[f],M=y[(f+1)%y.length],G=M.y-c.y,U=void 0;0!==G&&(U=-(M.x-c.x)/G);var J=0;_.isUndefined(U)||(J=(c.y<M.y?-1:1)*Math.sqrt(u*u/(1+U*U)));var S=0;0===J?S=(c.x>M.x?-1:1)*u:_.isUndefined(U)||(S=U*J);var I={x:c.x+J,y:c.y+S},z={x:0,y:0};0===U?(z.x=I.x,z.y=I.y+10):_.isUndefined(U)||(z.x=I.x+10,z.y=I.y-10/U);var ee=(I.x-z.x)*(b.y-c.y)-(I.y-z.y)*(b.x-c.x);if(0!==ee){var re={x:((I.x*z.y-I.y*z.x)*(b.x-c.x)-(I.x-z.x)*(b.x*c.y-b.y*c.x))/ee,y:((I.x*z.y-I.y*z.x)*(b.y-c.y)-(I.y-z.y)*(b.x*c.y-b.y*c.x))/ee};isFinite(re.x)&&isFinite(re.y)&&T.push(re)}}return x.fromPolygonPoints(T)},x.getPolyBoundLeft=function(n){var u;return null===(u=_.minBy(n.polygonPoints,function(d){return d.x}))||void 0===u?void 0:u.x},x.getPolyBoundRight=function(n){var u;return null===(u=_.maxBy(n.polygonPoints,function(d){return d.x}))||void 0===u?void 0:u.x},x.getPolyBoundUpper=function(n){var u;return null===(u=_.maxBy(n.polygonPoints,function(d){return d.y}))||void 0===u?void 0:u.y},x.getPolyBoundLower=function(n){var u;return null===(u=_.minBy(n.polygonPoints,function(d){return d.y}))||void 0===u?void 0:u.y},x.prototype.isConflictWithBoundingBox=function(n){return(0,P.HL)(this.absoluteBoundingRect(),n)},x.prototype.calculatePolygonCentroid=function(){var n,u,d,v,y,b;for(n=x.calculateAbsolutePolygonArea(this.polygonPoints),d=v=0,b=1,y=0;y<this.polygonPoints.length;y++)d+=(this.polygonPoints[y].x+this.polygonPoints[b].x)*(u=this.polygonPoints[y].x*this.polygonPoints[b].y-this.polygonPoints[b].x*this.polygonPoints[y].y),v+=(this.polygonPoints[y].y+this.polygonPoints[b].y)*u,b=(b+1)%this.polygonPoints.length;return{x:d/=6*n,y:v/=6*n}},x.prototype.calculateBoundingRect=function(){for(var n=Number.POSITIVE_INFINITY,u=Number.POSITIVE_INFINITY,d=Number.NEGATIVE_INFINITY,v=Number.NEGATIVE_INFINITY,y=0,b=this.polygonPoints;y<b.length;y++){var T=b[y];T.x<n?n=T.x:T.x>d&&(d=T.x),T.y<u?u=T.y:T.y>v&&(v=T.y)}return{left:n,top:u,width:d-n,height:v-u}},x.prototype.getLineIntersection=function(n,u,d,v){var y=n.x,b=n.y,c=d.x,M=d.y,J=u.x-y,S=u.y-b,I=v.x-c,z=v.y-M,ee=(-S*(y-c)+J*(b-M))/(-I*S+J*z),re=(I*(b-M)-z*(y-c))/(-I*S+J*z);return ee>=0&&ee<=1&&re>=0&&re<=1?{x:y+re*J,y:b+re*S}:null},x.prototype.convertArrayPathToPoints=function(n){for(var u=[],d=0;d<n.length;d+=2)u.push({x:n[d],y:n[d+1]});return u},x}()},19377:function(Je,ce,g){g.d(ce,{i:function(){return E}});var E=function(O){return O[O.Clockwise=0]="Clockwise",O[O.Counterclockwise=1]="Counterclockwise",O[O.Colinear=2]="Colinear",O}({})}}]);