"use strict";(self.webpackChunkreportServerHostModern=self.webpackChunkreportServerHostModern||[]).push([["copilot-skills-common"],{46333:function(H,O,t){t.d(O,{w:function(){return E}});var P=t(81337),e=t(50423),S=t(35510),M=t(18503),U=t(74857),b=t(18950),L=t(65181),D=t(2851),I=t(77476),j=t(98885),h=t(46101),w=t(91781),x=t(74913),V=t(55490),A=t(59968),v=t(85102),F=["visualHostContainer"];function K(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){var l=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(l.title)}}function z(o,n){if(1&o&&e.\u0275\u0275element(0,"tri-svg-icon",10),2&o){var l=e.\u0275\u0275nextContext();e.\u0275\u0275property("triTooltip",l.componentConfig.titleTooltip)}}function W(o,n){1&o&&e.\u0275\u0275element(0,"tri-spinner",14),2&o&&e.\u0275\u0275property("delay",0)}function B(o,n){if(1&o&&e.\u0275\u0275element(0,"single-visual-host",15),2&o){var l=e.\u0275\u0275nextContext().ngIf,c=e.\u0275\u0275nextContext();e.\u0275\u0275property("visual",c.visualContainer)("config",c.singleVisualHostConfig)("themeCollection",c.theme.themeCollection)("visualViewport",l)("useOnPushChangeDetection",!0)}}function s(o,n){if(1&o){var l=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"canvas-visual-error-overlay",16),e.\u0275\u0275listener("showErrorDetails",function(){e.\u0275\u0275restoreView(l);var R=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(R.showErrorDetails())}),e.\u0275\u0275elementEnd()}if(2&o){var c=e.\u0275\u0275nextContext().ngIf,y=e.\u0275\u0275nextContext();e.\u0275\u0275property("errorInfo",y.error)("viewport",c)}}function f(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,W,1,1,"tri-spinner",11),e.\u0275\u0275template(2,B,1,5,"single-visual-host",12),e.\u0275\u0275template(3,s,1,2,"canvas-visual-error-overlay",13),e.\u0275\u0275elementContainerEnd()),2&o){var l=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",l.loading),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!l.error&&l.singleVisualHostConfig),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",l.error&&!l.loading)}}function d(o,n){if(1&o){var l=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",17),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(l);var y=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(y.onAddToPage.emit())}),e.\u0275\u0275pipe(1,"localize"),e.\u0275\u0275element(2,"tri-svg-icon",18)(3,"span",19),e.\u0275\u0275elementEnd()}2&o&&e.\u0275\u0275property("triTooltip",e.\u0275\u0275pipeBind1(1,1,"Insights_ExploreAddToPage"))}function p(o,n){1&o&&e.\u0275\u0275element(0,"span",23)}var g=function(n){return{withText:n}};function m(o,n){if(1&o){var l=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",20),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(l);var T=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(T.onExpand.emit())}),e.\u0275\u0275pipe(1,"localize"),e.\u0275\u0275element(2,"tri-svg-icon",21),e.\u0275\u0275template(3,p,1,0,"span",22),e.\u0275\u0275elementEnd()}if(2&o){var c=e.\u0275\u0275nextContext();e.\u0275\u0275property("triTooltip",e.\u0275\u0275pipeBind1(1,3,"ExpandView"))("ngClass",e.\u0275\u0275pureFunction1(5,g,!c.componentConfig.supportsAddToPage)),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!c.componentConfig.supportsAddToPage)}}function r(o,n){if(1&o){var l=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",17),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(l);var y=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(y.onExplore.emit())}),e.\u0275\u0275pipe(1,"localize"),e.\u0275\u0275element(2,"tri-svg-icon",24)(3,"span",25),e.\u0275\u0275elementEnd()}2&o&&e.\u0275\u0275property("triTooltip",e.\u0275\u0275pipeBind1(1,1,"Explore_This_Visual"))}var i=function(n){return{height:n}},a=function(n){return{"background-color":n}},u=function(n,l,c){return{color:n,fill:l,"justify-content":c}},C=function(n){return{alignRight:n}},E=function(){function o(n,l,c,y){this.changeDetectionRef=n,this.errorService=l,this.localizationService=c,this.singleVisualHostConfigBuilder=y,this.onAddToPage=new e.EventEmitter,this.onExpand=new e.EventEmitter,this.onExplore=new e.EventEmitter,this.viewport$=new S.X(void 0),this.loading=!0}return o.prototype.ngOnInit=function(){return(0,P.mG)(this,void 0,void 0,function(){var n,l=this;return(0,P.Jh)(this,function(c){switch(c.label){case 0:return[4,this.singleVisualHostConfigBuilder.getSingleVisualHostConfig(this.visualContainer)];case 1:return(n=c.sent()).notifyEnd=function(){return l.handleDoneLoading()},n.handleQueryErrors=function(y){return l.handleQueryErrors(y)},this.singleVisualHostConfig=n,this.changeDetectionRef.markForCheck(),[2]}})})},o.prototype.ngAfterViewInit=function(){var n=this;setTimeout(function(){n.viewport$.next({width:n.visualHostContainerElement.nativeElement.clientWidth,height:n.visualHostContainerElement.nativeElement.clientHeight,scale:1})})},o.prototype.ngOnChanges=function(n){this.changeDetectionRef.detectChanges()},o.prototype.showErrorDetails=function(){(0,U.aZ)(this.error,this.errorService,this.localizationService)},o.prototype.handleDoneLoading=function(){this.loading=!1,this.changeDetectionRef.markForCheck()},o.prototype.handleQueryErrors=function(n){if(!n.ignorable){var l=n.getDetails(this.localizationService),c=(0,M.fe)(n.code);this.error={details:l,code:n.code,fixableError:0,hideSeeDetails:(0,M.O6)(n.code),overlayType:c,requestId:n.requestId,source:l?.source||n.source||"PowerBI"},this.changeDetectionRef.markForCheck()}},o.\u0275fac=function(l){return new(l||o)(e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(b.T),e.\u0275\u0275directiveInject(L.o),e.\u0275\u0275directiveInject(D.k))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["copilot-visual-common"]],viewQuery:function(l,c){var y;(1&l&&e.\u0275\u0275viewQuery(F,5,e.ElementRef),2&l)&&(e.\u0275\u0275queryRefresh(y=e.\u0275\u0275loadQuery())&&(c.visualHostContainerElement=y.first))},inputs:{title:"title",theme:"theme",visualContainer:"visualContainer",componentConfig:"componentConfig",height:"height"},outputs:{onAddToPage:"onAddToPage",onExpand:"onExpand",onExplore:"onExplore"},features:[e.\u0275\u0275NgOnChangesFeature],decls:13,vars:23,consts:[[1,"copilotVisualCommon",3,"ngStyle"],[1,"visualHostAndTitleContainer",3,"ngStyle"],[1,"visualTitle",3,"ngStyle","triTooltip"],[4,"ngIf"],["name","info_20_regular",3,"triTooltip",4,"ngIf"],[1,"visualHostContainer"],["visualHostContainer",""],[1,"actionBar",3,"ngClass"],["tri-button","","size","small","class","pbi-fluent-button",3,"triTooltip","click",4,"ngIf"],["tri-button","","size","small","class","expandButton pbi-fluent-button",3,"triTooltip","ngClass","click",4,"ngIf"],["name","info_20_regular",3,"triTooltip"],["size","small",3,"delay",4,"ngIf"],[3,"visual","config","themeCollection","visualViewport","useOnPushChangeDetection",4,"ngIf"],[3,"errorInfo","viewport","showErrorDetails",4,"ngIf"],["size","small",3,"delay"],[3,"visual","config","themeCollection","visualViewport","useOnPushChangeDetection"],[3,"errorInfo","viewport","showErrorDetails"],["tri-button","","size","small",1,"pbi-fluent-button",3,"triTooltip","click"],["name","add_16_regular"],["localize","Insights_ExploreAddToPage",1,"tri-font-12-r"],["tri-button","","size","small",1,"expandButton","pbi-fluent-button",3,"triTooltip","ngClass","click"],["name","expand_up_right_16_regular"],["class","tri-font-12-r","localize","ExpandView",4,"ngIf"],["localize","ExpandView",1,"tri-font-12-r"],["sprite","trident-icons","name","binoculars_20_regular"],["localize","Explore_This_Visual",1,"tri-font-12-r"]],template:function(l,c){1&l&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"section",2),e.\u0275\u0275template(3,K,2,1,"span",3),e.\u0275\u0275template(4,z,1,1,"tri-svg-icon",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"section",5,6),e.\u0275\u0275template(7,f,4,3,"ng-container",3),e.\u0275\u0275pipe(8,"async"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"section",7),e.\u0275\u0275template(10,d,4,3,"button",8),e.\u0275\u0275template(11,m,4,7,"button",9),e.\u0275\u0275template(12,r,4,3,"button",8),e.\u0275\u0275elementEnd()()),2&l&&(e.\u0275\u0275property("ngStyle",e.\u0275\u0275pureFunction1(13,i,c.height+"px")),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngStyle",e.\u0275\u0275pureFunction1(15,a,c.theme.background)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngStyle",e.\u0275\u0275pureFunction3(17,u,c.theme.foreground,c.theme.foreground,c.title?"space-between":"flex-end"))("triTooltip",c.title),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",c.title),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",c.componentConfig.titleTooltip),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(8,11,c.viewport$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(21,C,"right"===c.componentConfig.actionAlignment)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",c.componentConfig.supportsAddToPage),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",c.componentConfig.supportsExpand),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",c.componentConfig.supportsExplore))},dependencies:[I.NgClass,I.NgIf,I.NgStyle,j.f,h.v,w.O,x.M,V.Z,A.X,I.AsyncPipe,v.F],styles:['.copilotVisualCommon[_ngcontent-%COMP%]{display:flex;flex-direction:column}.copilotVisualCommon[_ngcontent-%COMP%]   .visualHostAndTitleContainer[_ngcontent-%COMP%]{display:flex;flex-direction:column;border:solid 1px var(--colorNeutralStroke1);border-radius:var(--borderRadiusMedium);padding:var(--spacingVerticalS) var(--spacingHorizontalS);margin:0 0 var(--spacingVerticalM) 0;box-sizing:border-box;width:100%;flex:1}.copilotVisualCommon[_ngcontent-%COMP%]   .visualHostAndTitleContainer[_ngcontent-%COMP%]   .visualTitle[_ngcontent-%COMP%]{width:100%;display:flex;gap:8px}.copilotVisualCommon[_ngcontent-%COMP%]   .visualHostAndTitleContainer[_ngcontent-%COMP%]   .visualTitle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap;font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-semi-bold, 600);flex:1}.copilotVisualCommon[_ngcontent-%COMP%]   .visualHostAndTitleContainer[_ngcontent-%COMP%]   .visualHostContainer[_ngcontent-%COMP%]{flex:1;display:flex;overflow:hidden}.copilotVisualCommon[_ngcontent-%COMP%]   .visualHostAndTitleContainer[_ngcontent-%COMP%]   .visualHostContainer[_ngcontent-%COMP%]   tri-spinner[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%}.copilotVisualCommon[_ngcontent-%COMP%]   .visualHostAndTitleContainer[_ngcontent-%COMP%]   .visualHostContainer[_ngcontent-%COMP%]   single-visual-host[_ngcontent-%COMP%]{flex:1;display:block}.copilotVisualCommon[_ngcontent-%COMP%]   .actionBar[_ngcontent-%COMP%]{display:flex;gap:8px}.copilotVisualCommon[_ngcontent-%COMP%]   .actionBar.alignRight[_ngcontent-%COMP%]{justify-content:right}.copilotVisualCommon[_ngcontent-%COMP%]   .actionBar[_ngcontent-%COMP%]   .expandButton[_ngcontent-%COMP%]:not(.withText){padding:2px}']}),o}()},13531:function(H,O,t){t.r(O),t.d(O,{CopilotSkillsCommonModule:function(){return m}});var P=t(77476),e=t(76966),S=t(22824),M=t(33783),U=t(17177),b=t(8816),L=t(79061),D=t(81337),I=t(35510),j=t(66205),h=t(88940),w=t(14463),x=t(67489),V=t(9410),A=t(2851),v=t(50423),F=t(83008),K=t(40823),z=t(3404),W=t(52121),B=t(67660),s=t(96777),f=t(46333);function d(r,i){if(1&r){var a=v.\u0275\u0275getCurrentView();v.\u0275\u0275elementStart(0,"copilot-visual-common",2),v.\u0275\u0275listener("onAddToPage",function(){v.\u0275\u0275restoreView(a);var E=v.\u0275\u0275nextContext();return v.\u0275\u0275resetView(E.addToPage())}),v.\u0275\u0275pipe(1,"async"),v.\u0275\u0275elementEnd()}if(2&r){var u=v.\u0275\u0275nextContext();v.\u0275\u0275property("title",u.title)("theme",v.\u0275\u0275pipeBind1(1,5,u.theme$))("visualContainer",u.visualContainer)("height",456)("componentConfig",u.visualComponentConfig)}}var p=function(){function r(i,a,u,C,E,o,n){this.dataSourcesService=i,this.dataSourceSerializer=a,this.explorationSerializer=u,this.resourceLoader=C,this.templateDialogPayload=E,this.themeService=o,this.promiseFactory=n}return r.prototype.ngOnInit=function(){var i=this.templateDialogPayload.input;this.title=i.visualTitle,this.visualContainer=this.explorationSerializer.deserializeCanvasItem(i.visualContainer),this.visualComponentConfig={supportsAddToPage:i.supportsAddToPage,supportsExpand:!1,actionAlignment:"right",supportsExplore:!1};var a=this.dataSourceSerializer.deserializeDataSources(i.dataSources);this.dataSourcesService.set(a),V.P.loadThemeAndBaseTheme(this.promiseFactory,this.resourceLoader,this.themeService,i.resourcePackages,i.theme.themeCollection),this.theme$=new I.X(i.theme)},r.prototype.addToPage=function(){this.templateDialogPayload.closeDialogFromConsumer({closedWithAddAction:!0})},r.\u0275fac=function(a){return new(a||r)(v.\u0275\u0275directiveInject(F.D),v.\u0275\u0275directiveInject(K._),v.\u0275\u0275directiveInject(z.L),v.\u0275\u0275directiveInject(W.l6),v.\u0275\u0275directiveInject(x.x),v.\u0275\u0275directiveInject(B.f),v.\u0275\u0275directiveInject(w.t))},r.\u0275cmp=v.\u0275\u0275defineComponent({type:r,selectors:[["copilot-visual-dialog"]],features:[v.\u0275\u0275ProvidersFeature((0,D.ev)((0,D.ev)((0,D.ev)([],j.K,!0),h.H,!0),[A.k,x.x],!1))],decls:3,vars:3,consts:[[2,"height","auto"],[3,"title","theme","visualContainer","height","componentConfig","onAddToPage",4,"ngIf"],[3,"title","theme","visualContainer","height","componentConfig","onAddToPage"]],template:function(a,u){1&a&&(v.\u0275\u0275elementStart(0,"template-dialog",0),v.\u0275\u0275template(1,d,2,7,"copilot-visual-common",1),v.\u0275\u0275pipe(2,"async"),v.\u0275\u0275elementEnd()),2&a&&(v.\u0275\u0275advance(1),v.\u0275\u0275property("ngIf",u.visualContainer&&v.\u0275\u0275pipeBind1(2,1,u.theme$)))},dependencies:[P.NgIf,s.J,f.w,P.AsyncPipe],encapsulation:2}),r}(),g=t(35889),m=function(){function r(){}return r.\u0275fac=function(a){return new(a||r)},r.\u0275mod=v.\u0275\u0275defineNgModule({type:r}),r.\u0275inj=v.\u0275\u0275defineInjector({providers:[A.k],imports:[P.CommonModule,e.c.withManifest([{componentIdentifier:g.Tx,componentType:p}]),S.J,M.F,U.T6,b.w,L.v]}),r}()},2851:function(H,O,t){t.d(O,{k:function(){return g}});var P=t(81337),e=t(47245),S=t(74857),M=t(73058),U=t(11077),b=t(48501),L=t(39681),D=t(14463),I=t(8590),j=t(80318),h=t(50423),w=t(26898),x=t(83008),V=t(11494),A=t(79006),v=t(40956),F=t(58991),K=t(65181),z=t(2330),W=t(906),B=t(84281),s=t(27980),f=t(29866),d=t(80277),p=t(1599),g=function(){function m(r,i,a,u,C,E,o,n,l,c,y,T,R,N,Q,G,J){this.conceptualSchemaProxy=r,this.dataSources=i,this.eventBridge=a,this.expandCollapse=u,this.geocoder=C,this.geolocationService=E,this.localizationService=o,this.moduleLoader=n,this.sortService=l,this.undoRedoService=c,this.visualAuthoringOpService=y,this.visualPlugin=T,this.azureMapTokenCache=R,this.azureMapsEndpoint=N,this.geocoderIndexedDB=Q,this.promiseFactory=G,this.visualHostTooltipServiceFactory=J}return m.prototype.getSingleVisualHostConfig=function(r){return(0,P.mG)(this,void 0,void 0,function(){var i,a,u,C=this;return(0,P.Jh)(this,function(E){switch(E.label){case 0:return i=_.find(this.dataSources.get(),function(o){return o.type===M.nKy}),[4,this.conceptualSchemaProxy.get(this.dataSources.get())];case 1:return a=E.sent(),u=i&&a&&a.schema(i.name).capabilities,[2,{notifyStart:_.noop,notifyEnd:_.noop,clearQueryErrors:_.noop,handleQueryErrors:_.noop,handleQueryWarnings:_.noop,queryVisualHostServices:{getFilters:function(){return C.createVisualContainerFilters(r)},getDataSourceVariables:function(){},disableAnchorTime:!0},visualHostServices:(0,L.ED)((0,e.q)({geocoder:this.geocoder,geolocation:this.geolocationService,localizationService:this.localizationService,moduleLoader:this.moduleLoader,promiseFactory:this.promiseFactory,visualHostTooltipService:this.visualHostTooltipServiceFactory.createFromVisualContract(r),getAzureMapToken:function(){return C.azureMapTokenCache.getAzureMapToken()},azureMapsEndpoint:this.azureMapsEndpoint,geocoderIndexedDB:this.geocoderIndexedDB}),function(o){o.getLocalizedString=function(n){return C.localizationService.get(n)},o.onCustomSort=function(n){return C.onCustomSort(r,n.sortDescriptors)},o.canExpandCollapse=function(n){var l;return null!==(l=u?.supportsInstanceFilters)&&void 0!==l&&l},o.setNodeExpansionState=function(n){n.isCollapse?C.expandCollapse.collapseNode(r,n.dataRoles,n.data):C.expandCollapse.expandNode(r,n.dataRoles,n.data),C.eventBridge.publishToChannel(I.jCS,{affectContainer:function(c){return c.name===r.name}})}}),interactivityOptions:{selection:!0},additionalObjectUpdates:void 0,disableQueryCacheUpdates:!1,noLoadMore:!1}]}})})},m.prototype.createVisualContainerFilters=function(r){var i=new U.ME;_.forEach(r.filters,function(u){var C=u.filter;C&&i.addVisualFilter({filter:C})});var a=i.getFilters(!1);return{dataFilter:a.dataFilter,dataFiltersUnmerged:a.dataFiltersUnmerged,highlightFilter:void 0,highlightFiltersUnmerged:void 0}},m.prototype.onCustomSort=function(r,i){return(0,P.mG)(this,void 0,void 0,function(){var a;return(0,P.Jh)(this,function(u){switch(u.label){case 0:return[4,(0,S.Vq)(r,this.conceptualSchemaProxy,this.dataSources,this.sortService,this.undoRedoService,this.visualAuthoringOpService,this.visualPlugin)];case 1:return a=u.sent(),(0,S.fI)(r,a,i),[2]}})})},m.\u0275fac=function(i){return new(i||m)(h.\u0275\u0275inject(w.i),h.\u0275\u0275inject(x.D),h.\u0275\u0275inject(V.J),h.\u0275\u0275inject(A.v),h.\u0275\u0275inject(v.i),h.\u0275\u0275inject(b._1),h.\u0275\u0275inject(K.o),h.\u0275\u0275inject(z.m),h.\u0275\u0275inject(W.K),h.\u0275\u0275inject(B.z),h.\u0275\u0275inject(s.Q),h.\u0275\u0275inject(f.D),h.\u0275\u0275inject(d.o),h.\u0275\u0275inject(F.A),h.\u0275\u0275inject(p.W),h.\u0275\u0275inject(D.t),h.\u0275\u0275inject(j.A))},m.\u0275prov=h.\u0275\u0275defineInjectable({token:m,factory:m.\u0275fac}),m}()},74857:function(H,O,t){t.d(O,{D4:function(){return V},ET:function(){return D},Kt:function(){return v},Nj:function(){return h},Su:function(){return x},Vq:function(){return F},aZ:function(){return w},fI:function(){return K},y_:function(){return A}});var P=t(81337),e=t(62458),S=t(38701),M=t(60661),U=t(18503),b=t(50547),L=t(2240);function D(s){return{code:"qnaNotAllowedInIE",fixableError:0,hideSeeDetails:!0,details:{message:s.get("Qna_NotSupportedInIE"),displayableErrorInfo:void 0},source:"User"}}function h(s){if(s)return{Filters:_.map(s.filters,function(f){return{Restatement:f.Restatement,type:void 0}}),Select:_.map(s.selects,function(f){return{Restatement:f.restatement}})}}function w(s,f,d){e.fF.assertValue(s,"Expect this to be called only when the given error is defined.");var p=s.details;if(p){var g=(0,U.jx)(p),m=d.get("ServiceError_CannotLoadVisual"),r=p.message,i=[];if(g&&(m=p.displayableErrorInfo[0].errorInfoKey,r=p.displayableErrorInfo[0].errorInfoValue,p.displayableErrorInfo.length>1))for(var a=1;a<p.displayableErrorInfo.length;a++)i.push(p.displayableErrorInfo[a]);e.fF.assert(function(){return null!=s.source},"Expect error.source is not null."),f.error(r,s.code,{debugErrorInfo:p.debugErrorInfo,displayableErrorInfo:i,title:m,source:s.source,level:b.U.Error})}}function x(s,f){var d=s.getCurrentExploration(),p=d?.themeCollection;return _.isEmpty(p)?V(f):p}function V(s){return{baseTheme:(0,S.DC)(s)}}function A(s,f,d,p){return(0,P.mG)(this,void 0,void 0,function(){var g,m,r,i,a,u,C,E;return(0,P.Jh)(this,function(o){switch(o.label){case 0:return g=s?.command,m=g?.query,m?(r=m.select(),i=g.queryMetadata,a=_.map(i?.selects,function(n,l){return{expression:r[l].expr,type:n.type,isGroup:n.isGroup,defaultLabel:n.defaultLabel,isExplicitSortBy:n.isExplicitSortBy}}),u=i?.filters,[4,f.get(d.get())]):[2];case 1:return C=o.sent(),(E=p.recommendVisuals(m,C,{numberOfResults:1,visualType:_.first(g.suggestedVisualTypes),filterMetadata:u,exprMetadata:a,addDefaultFormatting:!0,allowTooltipMeasures:!0}))?(e.fF.assert(function(){return 1===_.size(E.visualContainers)},"Expected 1 result"),[2,E.visualContainers[0]]):[2]}})})}function v(s,f,d,p,g,m,r){return(0,P.mG)(this,void 0,void 0,function(){var i,a,u;return(0,P.Jh)(this,function(E){switch(E.label){case 0:return[4,f.get(d.get())];case 1:return i=E.sent(),a=(0,M.PQ)(s),u={multiAndLastValueConnectorSpecialResourceKey:"AndConjunction_MultiItemsAndOne",displayIndividualValuesLimitSetting:null!=r?{limit:r,limitedValueShownResourceKey:"AndOthers_SingleItem",multiLimitedValuesShownResourceKey:"AndOthers_MultipleItem"}:void 0},[2,p.getVisualTitle(a,i,g.capabilities(a.visualType),void 0,u,m)]}})})}function F(s,f,d,p,g,m,r){return(0,P.mG)(this,void 0,void 0,function(){var i,a;return(0,P.Jh)(this,function(u){switch(u.label){case 0:return[4,W(s,f,d,p)];case 1:return i=u.sent(),a={defaultSortBehavior:z(s,r),sortableFields:i?.sortableFields,sortGroups:i?.sortGroups},[2,new L.B(a,s,p,g,m)]}})})}function K(s,f,d){if(!_.isEmpty(d)){var p=(0,M.oJ)(s);_.isEmpty(p)||f.applySortByFields(d)}}function z(s,f){var d,p=(0,M.cj)(s,f);return!!p&&!(null===(d=p.sorting)||void 0===d||!d.default)}function W(s,f,d,p){return(0,P.mG)(this,void 0,void 0,function(){var g,m,r,i;return(0,P.Jh)(this,function(u){switch(u.label){case 0:if(!(g=d.get()))return[2];u.label=1;case 1:return u.trys.push([1,3,,4]),m=(0,M.PQ)(s),r=(0,M.Xf)(s),[4,f.get(g)];case 2:return i=u.sent(),[2,p.getSortableFields({query:r,schema:i,visualType:m.visualType,columnProperties:m.columnProperties,compiledMappings:[]})];case 3:return u.sent(),[3,4];case 4:return[2]}})})}}}]);