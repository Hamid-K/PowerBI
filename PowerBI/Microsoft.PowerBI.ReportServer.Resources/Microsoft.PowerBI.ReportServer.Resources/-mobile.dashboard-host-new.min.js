(self.webpackChunkmobile=self.webpackChunkmobile||[]).push([["dashboard-host-new"],{25335:function(){!function($e,Te){"use strict";if("IntersectionObserver"in $e&&"IntersectionObserverEntry"in $e&&"intersectionRatio"in $e.IntersectionObserverEntry.prototype)"isIntersecting"in $e.IntersectionObserverEntry.prototype||Object.defineProperty($e.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});else{var l=[];E.prototype.THROTTLE_TIMEOUT=100,E.prototype.POLL_INTERVAL=null,E.prototype.USE_MUTATION_OBSERVER=!0,E.prototype.observe=function(b){if(!this._observationTargets.some(function(x){return x.element==b})){if(!b||1!=b.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:b,entry:null}),this._monitorIntersections(),this._checkForIntersections()}},E.prototype.unobserve=function(b){this._observationTargets=this._observationTargets.filter(function(y){return y.element!=b}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},E.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},E.prototype.takeRecords=function(){var b=this._queuedEntries.slice();return this._queuedEntries=[],b},E.prototype._initThresholds=function(b){var y=b||[0];return Array.isArray(y)||(y=[y]),y.sort().filter(function(x,A,R){if("number"!=typeof x||isNaN(x)||x<0||x>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return x!==R[A-1]})},E.prototype._parseRootMargin=function(b){var x=(b||"0px").split(/\s+/).map(function(A){var R=/^(-?\d*\.?\d+)(px|%)$/.exec(A);if(!R)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(R[1]),unit:R[2]}});return x[1]=x[1]||x[0],x[2]=x[2]||x[0],x[3]=x[3]||x[1],x},E.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(i($e,"resize",this._checkForIntersections,!0),i(Te,"scroll",this._checkForIntersections,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in $e&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(Te,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},E.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,c($e,"resize",this._checkForIntersections,!0),c(Te,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},E.prototype._checkForIntersections=function(){var b=this._rootIsInDom(),y=b?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach(function(x){var A=x.element,R=f(A),ce=this._rootContainsTarget(A),K=x.entry,N=b&&ce&&this._computeTargetAndRootIntersection(A,y),X=x.entry=new M({time:$e.performance&&performance.now&&performance.now(),target:A,boundingClientRect:R,rootBounds:y,intersectionRect:N});K?b&&ce?this._hasCrossedThreshold(K,X)&&this._queuedEntries.push(X):K&&K.isIntersecting&&this._queuedEntries.push(X):this._queuedEntries.push(X)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},E.prototype._computeTargetAndRootIntersection=function(b,y){if("none"!=$e.getComputedStyle(b).display){for(var A=f(b),R=o(b),ce=!1;!ce;){var K=null,N=1==R.nodeType?$e.getComputedStyle(R):{};if("none"==N.display)return;if(R==this.root||R==Te?(ce=!0,K=y):R!=Te.body&&R!=Te.documentElement&&"visible"!=N.overflow&&(K=f(R)),K&&!(A=u(K,A)))break;R=o(R)}return A}},E.prototype._getRootRect=function(){var b;if(this.root)b=f(this.root);else{var y=Te.documentElement,x=Te.body;b={top:0,left:0,right:y.clientWidth||x.clientWidth,width:y.clientWidth||x.clientWidth,bottom:y.clientHeight||x.clientHeight,height:y.clientHeight||x.clientHeight}}return this._expandRectByRootMargin(b)},E.prototype._expandRectByRootMargin=function(b){var y=this._rootMarginValues.map(function(A,R){return"px"==A.unit?A.value:A.value*(R%2?b.width:b.height)/100}),x={top:b.top-y[0],right:b.right+y[1],bottom:b.bottom+y[2],left:b.left-y[3]};return x.width=x.right-x.left,x.height=x.bottom-x.top,x},E.prototype._hasCrossedThreshold=function(b,y){var x=b&&b.isIntersecting?b.intersectionRatio||0:-1,A=y.isIntersecting?y.intersectionRatio||0:-1;if(x!==A)for(var R=0;R<this.thresholds.length;R++){var ce=this.thresholds[R];if(ce==x||ce==A||ce<x!=ce<A)return!0}},E.prototype._rootIsInDom=function(){return!this.root||m(Te,this.root)},E.prototype._rootContainsTarget=function(b){return m(this.root||Te,b)},E.prototype._registerInstance=function(){l.indexOf(this)<0&&l.push(this)},E.prototype._unregisterInstance=function(){var b=l.indexOf(this);-1!=b&&l.splice(b,1)},$e.IntersectionObserver=E,$e.IntersectionObserverEntry=M}function M(b){this.time=b.time,this.target=b.target,this.rootBounds=b.rootBounds,this.boundingClientRect=b.boundingClientRect,this.intersectionRect=b.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0},this.isIntersecting=!!b.intersectionRect;var y=this.boundingClientRect,x=y.width*y.height,A=this.intersectionRect;this.intersectionRatio=x?A.width*A.height/x:this.isIntersecting?1:0}function E(b,y){var x=y||{};if("function"!=typeof b)throw new Error("callback must be a function");if(x.root&&1!=x.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=function(b,y){var x=null;return function(){x||(x=setTimeout(function(){b(),x=null},y))}}(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=b,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(x.rootMargin),this.thresholds=this._initThresholds(x.threshold),this.root=x.root||null,this.rootMargin=this._rootMarginValues.map(function(A){return A.value+A.unit}).join(" ")}function i(b,y,x,A){"function"==typeof b.addEventListener?b.addEventListener(y,x,A||!1):"function"==typeof b.attachEvent&&b.attachEvent("on"+y,x)}function c(b,y,x,A){"function"==typeof b.removeEventListener?b.removeEventListener(y,x,A||!1):"function"==typeof b.detatchEvent&&b.detatchEvent("on"+y,x)}function u(b,y){var x=Math.max(b.top,y.top),A=Math.min(b.bottom,y.bottom),R=Math.max(b.left,y.left),ce=Math.min(b.right,y.right),K=ce-R,N=A-x;return K>=0&&N>=0&&{top:x,bottom:A,left:R,right:ce,width:K,height:N}}function f(b){var y;try{y=b.getBoundingClientRect()}catch{}return y?(y.width&&y.height||(y={top:y.top,right:y.right,bottom:y.bottom,left:y.left,width:y.right-y.left,height:y.bottom-y.top}),y):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function m(b,y){for(var x=y;x;){if(x==b)return!0;x=o(x)}return!1}function o(b){var y=b.parentNode;return y&&11==y.nodeType&&y.host?y.host:y}}(window,document)},9567:function($e,Te){var l,E;l=function(){var Y={$el:null,conversationButton_HighlightArtifact:"HighlightArtifact",conversationButton_BookmarkArtifact:"BookmarkArtifact",commentsById:{},usersById:{},dataFetched:!1,currentSortKey:"",options:{},events:{click:"closeDropdowns","keydown [contenteditable]":"saveOnKeydown","focus [contenteditable]":"saveEditableContent","keyup [contenteditable]":"checkEditableContentForChange","paste [contenteditable]":"checkEditableContentForChange","input [contenteditable]":"checkEditableContentForChange","blur [contenteditable]":"checkEditableContentForChange","click .navigation li[data-sort-key]":"navigationElementClicked","click .navigation li.title":"toggleNavigationDropdown","click .previousnext-wrapper .next-button-wrapper":"navigateToNextComment","click .previousnext-wrapper .previous-button-wrapper":"navigateToPreviousComment","click .commenting-field.main .textarea":"showMainCommentingField","click .commenting-field.main .close":"onHideMainCommentingField","click .commenting-field .textarea":"increaseTextareaHeight","change .commenting-field .textarea":"increaseTextareaHeight textareaContentChanged","click .commenting-field:not(.main) .close":"removeCommentingField","click .commenting-field .send.enabled":"postComment","click .commenting-field .update.enabled":"putComment","click .commenting-field .delete.enabled":"deleteComment",'change .commenting-field .upload.enabled input[type="file"]':"fileInputChanged","click li.comment button.upvote":"upvoteComment","click li.comment button.delete.enabled":"deleteComment","click li.comment .hashtag":"hashtagClicked","click li.comment .ping":"pingClicked","click li.comment .reply":"replyButtonClicked","click li.comment button.edit":"editButtonClicked","click li.comment .send.enabled":"postComment","click li.comment .update.enabled":"putComment","click li.comment ul.child-comments .toggle-all.enabled":"toggleReplies",dragenter:"showDroppableOverlay","dragenter .droppable-overlay":"handleDragEnter","dragleave .droppable-overlay":"handleDragLeaveForOverlay","dragenter .droppable-overlay .droppable":"handleDragEnter","dragleave .droppable-overlay .droppable":"handleDragLeaveForDroppable","dragover .droppable-overlay":"handleDragOverForOverlay","drop .droppable-overlay":"handleDrop","click .dropdown.autocomplete":"stopPropagation","mousedown .dropdown.autocomplete":"stopPropagation","touchstart .dropdown.autocomplete":"stopPropagation","keydown .commenting-field .textarea":"verifyLength","paste .commenting-field .textarea":"verifyLength","click li.comment":"handleConversationClick"},intxnObserver:null,getDefaultOptions:function(){return{profilePictureURL:"",currentUserIsAdmin:!1,currentUserId:null,spinnerIconURL:"",upvoteIconURL:"",replyIconURL:"",uploadIconURL:"",attachmentIconURL:"",fileIconURL:"",noCommentsIconURL:"",textareaPlaceholderText:"Add a comment",textareaAriaLabelText:"",newestText:"Newest",oldestText:"Oldest",popularText:"Popular",attachmentsText:"Attachments",sendText:"Send",replyText:"Reply",editText:"Edit",editedText:"Edited",youText:"You",saveText:"Save",deleteText:"Delete",deleteLabelText:"Delete this comment",viewAllRepliesText:"View all __replyCount__ replies",hideRepliesText:"Hide replies",noAttachmentsText:"No attachments",attachmentDropText:"Drop files here",textFormatter:function(c){return c},deletedCommentAuthorText:"[Deleted]",deletedCommentContentText:"This comment was deleted.",getAllChildCommentsText:"View all replies",highlightArtifactText:"Highlight artifact tied to conversation",bookmarkArtifactText:"Bookmark artifact tied to the conversation",bookmarkArtifactTextSelected:"Comments_Report_Bookmark_Icon_Selected",noResultsText:"Sorry we could not find any results",noCommentsText:{headerText:"Start the conversation",subtitleText:"Share your feedback on dashboards or specific visuals.",description:"Grab people's attention with @mentions"},unknownUserText:"Unknown User",previousCommentText:"Previous",nextCommentText:"Next",enableReplying:!0,enableEditing:!0,enableUpvoting:!0,enableDeleting:!0,enableAttachments:!1,enableHashtags:!1,enablePinging:!1,enableDeletingCommentWithReplies:!1,enableNavigation:!0,enableCloseCommentButton:!0,postCommentOnEnter:!1,forceResponsive:!1,readOnly:!1,defaultNavigationSortKey:"newest",enableHidingMainControlRow:!0,enableBasicPingTagStyle:!1,highlightColor:"#2793e6",deleteButtonColor:"#C9302C",roundProfilePictures:!1,textareaRows:2,textareaRowsOnFocus:2,textareaMaxRows:5,maxRepliesVisible:2,commentMaxLength:1999,commentMentionCharacters:37,fieldMappings:{id:"id",parent:"parent",created:"created",modified:"modified",content:"content",file:"file",fileURL:"file_url",fileMimeType:"file_mime_type",pings:"pings",creator:"creator",fullname:"fullname",profileURL:"profileURL",profilePictureURL:"profilePictureURL",createdByAdmin:"createdByAdmin",createdByCurrentUser:"createdByCurrentUser",upvoteCount:"upvoteCount",userHasUpvoted:"userHasUpvoted",bookmark:"bookmark"},getUsers:function(c,u,f){u([])},getComments:function(c,u){c([])},postComment:function(c,u,f){u(c)},putComment:function(c,u,f){u(c)},deleteComment:function(c,u,f){u()},upvoteComment:function(c,u,f){u(c)},hashtagClicked:function(c){},pingClicked:function(c){},getAllChildComments:function(c,u,f){},uploadAttachments:function(c,u,f){u(c)},refresh:function(){},timeFormatter:function(c){return new Date(c).toLocaleDateString()},assertFail:function(c){},handleConversationClick:function(){},isPreviousNextNavigationEnabled:function(){},isHandleConversationClickEnabled:function(){},navigateToNextSection:function(){},navigateToPreviousSection:function(){},getInitialSelectionState:function(){},logNavigateToNextCommentEvent:function(){},logNavigateToPreviousCommentEvent:function(){}}},init:function(i,c){var u;this.$el=$(c),this.$el.addClass("jquery-comments"),this.undelegateEvents(),this.delegateEvents(),this.initIntersectionObserver(),u=navigator.userAgent||navigator.vendor||window.opera,(jQuery.browser=jQuery.browser||{}).mobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(u)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(u.substr(0,4)),$.browser.mobile&&this.$el.addClass("mobile"),this.options=$.extend(!0,{},this.getDefaultOptions(),i),this.options.readOnly&&this.$el.addClass("read-only"),this.currentSortKey=this.options.defaultNavigationSortKey,this.createCssDeclarations(),this.fetchDataAndRender()},delegateEvents:function(){this.bindEvents(!1)},undelegateEvents:function(){this.bindEvents(!0)},bindEvents:function(i){var c=i?"off":"on";for(var u in this.events){var f=u.split(" ")[0],h=u.split(" ").slice(1).join(" "),m=this.events[u].split(" ");for(var o in m)if(m.hasOwnProperty(o)){var b=this[m[o]];b=$.proxy(b,this),""==h?this.$el[c](f,b):this.$el[c](f,h,b)}}},initIntersectionObserver:function(){if(this.intxnObserver)this.intxnObserver.disconnect();else{var i=this;this.intxnObserver=new IntersectionObserver(function(c){i.intxnObserverCallback(c)})}},fetchDataAndRender:function(){var i=this;this.commentsById={},this.usersById={},this.$el.empty(),this.createHTML();var c=function(h){i.dataFetched=!0,i.render(h)};this.options.getComments(function(h,m){var o=h.map(function(b){return i.createCommentModel(b)});i.sortComments(o,"oldest"),$(o).each(function(b,y){i.addCommentToDataModel(y)}),c(m)},c)},fetchNext:function(){var i=this,c=this.createSpinner();this.$el.find("ul#comment-list").append(c),this.options.getComments(function(m){$(m).each(function(o,b){i.createComment(b)}),c.remove()},function(){c.remove()})},createCommentModel:function(i){this.appendUsersInfoToCache(i),this.updateCommentAtMentionsWithUserFullNames(i);var c=this.applyInternalMappings(i);return c.childs=[],c},addCommentToDataModel:function(i){!(i.id in this.commentsById)&&(this.commentsById[i.id]=i,i.parent)&&this.getOutermostParent(i.parent).childs.push(i.id)},updateCommentModel:function(i){var c=this.commentsById[i.id];$.extend(c,i),c.parent=i.parent,c.createdByCurrentUser=i.createdByCurrentUser,c.mentionedUsers=i.mentionedUsers,c.isDeleted=i.isDeleted,c.hasMoreComments=i.hasMoreComments},render:function(i){this.dataFetched&&(this.showActiveContainer(),this.createComments(),this.options.enableAttachments&&this.createAttachments(),this.renderDeepLink(i),this.$el.find("> .spinner").remove(),this.options.refresh())},renderDeepLink:function(i){if(i&&!i.errorMessage&&null!=i.commentId){var c=this.$el.find('li.comment[data-id="'+i.commentId+'"]');if(!c||!c.length)return void this.options.assertFail("deepLink commentId not found in DOM: "+i.commentId);if(c.hasClass("hidden-reply")){var u=c.siblings("li.toggle-all");u&&u.length&&this.toggleReplies({currentTarget:u})}this.selectComment(c),this.spotlightAndApplyBookmarkIfAny(c);var f=this.$el.find('[data-container="comments"]');f.scrollTop(c.offset().top-f.offset().top);var h=this.commentsById[i.commentId];if(!h)return void this.options.assertFail("deepLink commentId not found in this.commentsById: "+i.commentId);var o=null==h.parent?c.find(".wrapper").first():c.find(".comment-wrapper").first();return o.addClass("deep-link-comment-start"),void o.ready(function(){setTimeout(function(){o.addClass("deep-link-comment-end")},10)})}},showActiveContainer:function(){var c=this.$el.find(".navigation li[data-container-name].active").data("container-name"),u=this.$el.find('[data-container="'+c+'"]');u.siblings("[data-container]").hide(),u.show()},createComments:function(){var i=this;this.$el.find("#comment-list").remove();var c=$("<ul/>",{id:"comment-list",class:"main"}),u=[],f=[];$(this.getComments()).each(function(o,b){null==b.parent?u.push(b):f.push(b)});var h=this.options.getInitialSelectionState();this.sortComments(u,this.currentSortKey),u.reverse(),$(u).each(function(o,b){i.addComment(b,c,0===o&&"Last"===h||o===u.length-1&&"First"===h)}),this.sortComments(f,"oldest"),$(f).each(function(o,b){i.addComment(b,c)});var m=this.$el.find('[data-container="comments"]');m.prepend(c),"Last"===h&&$(m).scrollTop(c.height())},createAttachments:function(){var i=this;this.$el.find("#attachment-list").remove();var c=$("<ul/>",{id:"attachment-list",class:"main"}),u=this.getAttachments();this.sortComments(u,"newest"),u.reverse(),$(u).each(function(f,h){i.addAttachment(h,c)}),this.$el.find('[data-container="attachments"]').prepend(c)},addComment:function(i,c,u){c=c||this.$el.children(".data-container").find("#comment-list");var f=this.createCommentElement(i);if(u&&(this.selectComment(f),this.spotlightAndApplyBookmarkIfAny(f)),i.parent){var h=c.find('.comment[data-id="'+i.parent+'"]');this.reRenderCommentActionBar(i.parent);var m=h.parents(".comment").last();0==m.length&&(m=h);var o=m.find(".child-comments"),b=o.find(".commenting-field");if(b.data("commentId",i.id),b.length?b.before(f):o.append(f),0===m.find(".action.reply").length){var y=this.createReplyButton();m.find(".conversation-wrapper").first().append(y)}this.updateToggleAllButton(m,i)}else c.prepend(f)},createReplyButton:function(){return $("<div/>",{class:"action reply"}).append($("<button/>").append($("<i/>",{class:this.options.replyButtonClass})).append($("<span/>",{text:this.options.textFormatter(this.options.replyText)})))},addAttachment:function(i,c){c=c||this.$el.find("#attachment-list");var u=this.createCommentElement(i);c.prepend(u)},removeComment:function(i){var u=this.commentsById[i];if(u.parent){var f=this.getOutermostParent(u.parent),h=f.childs.indexOf(u.id);f.childs.splice(h,1)}delete this.commentsById[i];var m=this.$el.find('li.comment[data-id="'+i+'"]'),o=m.parents("li.comment").last();m.remove(),this.updateToggleAllButton(o,u)},removeChildComments:function(i){var c=this,u=this.commentsById[i],f=this.getChildComments(u.id);$(f).each(function(o,b){c.removeComment(b.id)});var m=this.$el.find('li.comment[data-id="'+i+'"]').parents("li.comment").last();this.updateToggleAllButton(m,u)},removeDescendantComments:function(i){var c=this,u=this.commentsById[i],f=u.childs;if(f&&f.length>0){var h=this.getLevelsByCommentIds(f),m=f.slice(0).sort(function(y,x){return h[x]-h[y]});$(m).each(function(y,x){c.removeComment(x)})}var b=this.$el.find('li.comment[data-id="'+i+'"]').parents("li.comment").last();this.updateToggleAllButton(b,u)},getLevelsByCommentIds:function(i){if(!i||!i.length)return{};var c=this,u={},f=function h(m,o){var b=o[m];if(void 0!==b)return b;var y=c.commentsById[m];if(null!=y.parent){var A,x=h(y.parent,o);return o[m]=A=x+1,A}return o[m]=A=0,A};return $(i).each(function(h,m){f(m,u)}),u},uploadAttachments:function(i,c){var u=this;c||(c=this.$el.find(".commenting-field.main"));var f=!c.hasClass("main"),h=i.length;if(h){var m=c.find(".upload"),o=c.find(".textarea");m.removeClass("enabled");var b=this.createSpinner(),y=this.createSpinner();this.$el.find("ul#attachment-list").prepend(b),f?c.before(y):this.$el.find("ul#comment-list").prepend(y);var R=[];$(i).each(function(ce,K){var N=u.createCommentJSON(o);N.id+="-"+ce,N.content="",N.file=K,N.fileURL="C:/fakepath/"+K.name,N.fileMimeType=K.type,N=u.applyExternalMappings(N),R.push(N)}),u.options.uploadAttachments(R,function(K){$(K).each(function(N,X){var ae=u.createCommentModel(X);u.addCommentToDataModel(ae),u.addComment(ae),u.addAttachment(ae)}),K.length==h&&0==u.getTextareaContent(o).length&&c.find(".close").trigger("click"),m.addClass("enabled"),y.remove(),b.remove()},function(){m.addClass("enabled"),y.remove(),b.remove()})}m.find("input").val("")},updateToggleAllButton:function(i,c){var u=i.find(".child-comments"),f=u.find(".comment"),h=u.find("li.toggle-all");f.removeClass("hidden-reply");var m=f.slice(0,-this.options.maxRepliesVisible);m.addClass("hidden-reply"),h.find("span.text").text()==this.options.textFormatter(this.options.hideRepliesText)&&m.addClass("visible");var o=c.parent&&this.getOutermostParent(c.parent)||c,b=o&&o.hasMoreComments;if(b||f.length>this.options.maxRepliesVisible){if(!h.length){h=$("<li/>",{class:"enabled toggle-all highlight-font-bold"});var y=$("<span/>",{class:"text"}),x=$("<i/>",{class:this.options.replyButtonCaretDownClass});h.data("commentId",c.id),h.append($("<button/>").append(x).append(y)),u.prepend(h)}this.setToggleAllButtonText(h,!1,b)}else h.remove()},sortComments:function(i,c){var u=this;i.sort("popularity"==c?function(f,h){var m=f.childs.length,o=h.childs.length;if(u.options.enableUpvoting&&(m+=f.upvoteCount,o+=h.upvoteCount),o!=m)return o-m;var b=new Date(f.created).getTime();return new Date(h.created).getTime()-b}:function(f,h){var m=new Date(f.created).getTime(),o=new Date(h.created).getTime();return"oldest"==c?m-o:o-m})},sortUsers:function(i){i.sort(function(c,u){var f=c.fullname?c.fullname.toLowerCase().trim():"",h=u.fullname?u.fullname.toLowerCase().trim():"";return f<h?-1:f>h?1:0})},sortAndReArrangeComments:function(i){var c=this.$el.find("#comment-list"),u=this.getComments().filter(function(f){return!f.parent});this.sortComments(u,i),$(u).each(function(f,h){var m=c.find("> li.comment[data-id="+h.id+"]");c.append(m)})},showActiveSort:function(){var i=this.$el.find('.navigation li[data-sort-key="'+this.currentSortKey+'"]');this.$el.find(".navigation li").removeClass("active"),i.addClass("active");var c=this.$el.find(".navigation .title");if("attachments"!=this.currentSortKey)c.addClass("active"),c.find("header").html(i.first().html());else{var u=this.$el.find(".navigation ul.dropdown").children().first();c.find("header").html(u.html())}this.showActiveContainer()},forceResponsive:function(){this.$el.addClass("responsive")},closeDropdowns:function(){this.$el.find(".dropdown").hide()},saveOnKeydown:function(i){13==i.keyCode&&(this.options.postCommentOnEnter||i.metaKey||i.ctrlKey)&&($(i.currentTarget).siblings(".control-row").find(".save").trigger("click"),i.stopPropagation(),i.preventDefault())},saveEditableContent:function(i){var c=$(i.currentTarget);c.data("before",c.html())},checkEditableContentForChange:function(i){var c=$(i.currentTarget);c.data("before")!=c.html()&&(c.data("before",c.html()),c.trigger("change"))},navigationElementClicked:function(i){var u=$(i.currentTarget).data().sortKey;"attachments"!=u&&this.sortAndReArrangeComments(u),this.currentSortKey=u,this.showActiveSort()},toggleNavigationDropdown:function(i){i.stopPropagation(),$(i.currentTarget).find("~ .dropdown").toggle()},showMainCommentingField:function(i){var c=$(i.currentTarget);c.siblings(".control-row").show(),this.options.enableCloseCommentButton&&c.parent().find(".close").show(),c.focus()},navigateToNextComment:function(i){this.options.logNavigateToNextCommentEvent();var c=this.$el.find("ul#comment-list > li.comment");if(c.length){var u=-1,f=0;if(c.each(function(h,m){if(f+=$(m).height(),$(m).find(".conversation-wrapper").first().hasClass("selected"))return u=h,!1}),-1==u)return this.selectComment(c[0]),void this.spotlightAndApplyBookmarkIfAny(c[0]);u!=c.length-1?($(this.$el.find(".data-container")).scrollTop(f),this.clearCommentSelection(c[u]),this.selectComment(c[u+1]),this.spotlightAndApplyBookmarkIfAny(c[u+1])):this.options.navigateToNextSection()}else this.options.navigateToNextSection()},navigateToPreviousComment:function(i){this.options.logNavigateToPreviousCommentEvent();var c=this.$el.find("ul#comment-list > li.comment"),u=this.$el.find("ul#comment-list"),f=this.$el.find(".data-container");if(c.length){var h=-1,m=0;if(c.each(function(b,y){if($(y).find(".conversation-wrapper").first().hasClass("selected"))return h=b,!1;m+=$(y).height()}),-1==h){var o=c.length-1;return this.selectComment(c[o]),this.spotlightAndApplyBookmarkIfAny(c[o]),void $(f).scrollTop(u.height())}0!=h?(this.clearCommentSelection(c[h]),this.selectComment(c[h-1]),$(f).scrollTop(m-$(c[h-1]).height()),this.spotlightAndApplyBookmarkIfAny(c[h-1])):this.options.navigateToPreviousSection()}else this.options.navigateToPreviousSection()},selectComment:function(i){$(i).find(".conversation-wrapper").first().addClass("selected")},clearCommentSelection:function(i){$(i).find(".conversation-wrapper").first().removeClass("selected")},onHideMainCommentingField:function(i){var c=$(i.currentTarget);this.hideMainCommentingField(c)},hideMainCommentingField:function(i){var c=this.$el.find(".commenting-field.main .textarea"),u=this.$el.find(".commenting-field.main .control-row");this.clearTextarea(c),this.adjustTextareaHeight(c,!1),this.options.enableHidingMainControlRow&&u.hide(),i&&i.hide(),c.blur()},increaseTextareaHeight:function(i){var c=$(i.currentTarget);this.adjustTextareaHeight(c,!0)},textareaContentChanged:function(i){var c=$(i.currentTarget),u=c.siblings(".control-row").find(".save");if(u.length||(u=c.parents("li.comment").first().find(".save")),!c.find(".reply-to.tag").length){var f=c.attr("data-comment");if(f){var h=c.parents("li.comment");if(h.length>1){var m=h.last().data("id");c.attr("data-parent",m)}}else m=c.parents("li.comment").last().data("id"),c.attr("data-parent",m)}var o=c.parents(".commenting-field").first();c[0].scrollHeight>c.outerHeight()?o.addClass("scrollable"):o.removeClass("scrollable");var b=!0,y=this.getTextareaContent(c,!0);if(f=c.attr("data-comment")){var A,x=y!=this.commentsById[f].content;this.commentsById[f].parent&&(A=this.commentsById[f].parent.toString());var R=c.attr("data-parent")!=A;b=x||R}y.length&&b?(u.addClass("enabled").removeAttr("disabled"),u.attr("tabindex","0")):(u.removeClass("enabled").attr("disabled"),u.attr("tabindex","-1"))},removeCommentingField:function(i){var c=$(i.currentTarget);c.siblings(".textarea").attr("data-comment")&&c.parents("li.comment").first().removeClass("edit"),c.parents(".commenting-field").first().remove()},postComment:function(i){var c=this,u=$(i.currentTarget),f=u.parents(".commenting-field").first();f.length||(f=u.parent().parent().find(".commenting-field").first());var h=f.find(".textarea");u.removeClass("enabled");var m=this.createCommentJSON(h);m=this.applyExternalMappings(m),this.options.postComment(m,function(x){if(c.createComment(x),f.hasClass("main")){c.hideMainCommentingField();var A=c.$el.find('[data-container="comments"]');A.scrollTop(c.$el.find("#comment-list").offset().top-A.offset().top)}else f.remove(),u.remove()},function(){u.addClass("enabled")})},appendUsersInfoToCache:function(i){this.usersById[i.creatorOid]||(this.usersById[i.creatorOid]={fullname:i.fullname,objectId:i.creatorOid,userPrincipalName:i.creatorPrincipalName});var c=i.mentionedUsers;if(c)for(var u=c.length,f=0;f<u;f++){var h=c[f];this.usersById[h.oid]||(this.usersById[h.oid]={fullname:h.fullname?h.fullname:h.userPrincipalName,objectId:h.oid,userPrincipalName:h.userPrincipalName})}},updateCommentAtMentionsWithUserFullNames:function(i){var c=i.content,u=this.getUserObjectIdsFromContent(c);if(u){for(var f=0;f<u.length;f++){var m=u[f].substr(1),o=this.usersById[m];o&&(c=c.replace(m,o.fullname))}i.content=c}},createComment:function(i){var c=this.createCommentModel(i);this.addCommentToDataModel(c),this.addComment(c)},putComment:function(i){var c=this,u=$(i.currentTarget),f=u.parents(".commenting-field").first(),h=f.find(".textarea");u.removeClass("enabled");var m=$.extend({},this.commentsById[h.attr("data-comment")]);$.extend(m,{parent:h.attr("data-parent")||null,content:this.getTextareaContent(h),pings:this.getPings(h),modified:(new Date).getTime()}),m=this.applyExternalMappings(m),this.options.putComment(m,function(x){var A=c.createCommentModel(x);delete A.childs,c.updateCommentModel(A),f.find(".close").trigger("click"),c.reRenderComment(A.id)},function(){u.addClass("enabled")})},deleteComment:function(i){i.stopPropagation();var c=this,u=$(i.currentTarget),f=u.parents(".comment").first(),h=$.extend({},this.commentsById[f.attr("data-id")]),m=h.id,o=h.parent;u.removeClass("enabled"),h=this.applyExternalMappings(h),this.options.deleteComment(h,function(A){var R=c.createCommentModel(A);c.updateCommentModel(R),c.removeChildComments(m),f.find(".action.reply").remove(),f.find(".commenting-field").remove(),c.reRenderComment(R.id),o&&c.reRenderCommentActionBar(o)},function(){u.addClass("enabled")})},hashtagClicked:function(i){var u=$(i.currentTarget).attr("data-value");this.options.hashtagClicked(u)},pingClicked:function(i){var u=$(i.currentTarget).attr("data-value");this.options.pingClicked(u)},fileInputChanged:function(i,u){u=i.currentTarget.files;var f=$(i.currentTarget).parents(".commenting-field").first();this.uploadAttachments(u,f)},upvoteComment:function(i){var m,c=this,f=$(i.currentTarget).parents("li.comment").first().data().model,h=f.upvoteCount;m=f.userHasUpvoted?h-1:h+1,f.userHasUpvoted=!f.userHasUpvoted,f.upvoteCount=m,this.reRenderUpvotes(f.id);var o=$.extend({},f);o=this.applyExternalMappings(o),this.options.upvoteComment(o,function(A){var R=c.createCommentModel(A);c.updateCommentModel(R),c.reRenderUpvotes(R.id)},function(){f.userHasUpvoted=!f.userHasUpvoted,f.upvoteCount=h,c.reRenderUpvotes(f.id)})},toggleReplies:function(i){var c=this,u=$(i.currentTarget),f=u.parents("ul.child-comments").first(),h=u.data("commentId"),m=this.commentsById[h];if(m){var o=m.parent&&c.getOutermostParent(m.parent)||m;m.hasMoreComments?(u.removeClass("enabled"),this.options.getAllChildComments(m.conversationId,function(A){c.toggleRepliesUpdateComments(o,A);var R=f.find("li.toggle-all");c.toggleRepliesUpdateVisibilityAndButtonText(R,!0),R.hasClass("enabled")||R.addClass("enabled")},function(){u.addClass("enabled")})):this.toggleRepliesUpdateVisibilityAndButtonText(u,!0,m.hasMoreComments)}else this.options.assertFail("Unexpected case: commentId "+h+" is no longer in this.commentsById")},toggleRepliesUpdateComments:function(i,c){if(this.removeDescendantComments(i.id),c&&c.length)for(var u=0,f=c.length;u<f;++u){var h=c[u];if(h.id===i.id){var m=this.createCommentModel(h);this.updateCommentModel(m),this.reRenderComment(m.id)}else this.createComment(h)}},toggleRepliesUpdateVisibilityAndButtonText:function(i,c,u){i.siblings(".hidden-reply").toggleClass("visible"),this.setToggleAllButtonText(i,c,u)},replyButtonClicked:function(i){var c=$(i.currentTarget),u=c.parents("li.comment").last(),f=c.parents(".comment").first().data().id,h=u.find(".child-comments > .commenting-field");h.length&&h.remove(),c.remove(),h=this.createCommentingFieldElement(f,void 0,u),u.find(".child-comments").append(h);var m=h.find(".textarea");this.moveCursorToEnd(m)},editButtonClicked:function(i){var u=$(i.currentTarget).parents("li.comment").first(),f=u.data().model;u.addClass("edit");var h=this.createCommentingFieldElement(f.parent,f.id,u);u.find(".comment-wrapper").first().append(h);var m=h.find(".textarea");m.attr("data-comment",f.id),m.append(this.getFormattedCommentContent(f,!0)),this.moveCursorToEnd(m)},showDroppableOverlay:function(i){this.options.enableAttachments&&(this.$el.find(".droppable-overlay").css("top",this.$el[0].scrollTop),this.$el.find(".droppable-overlay").show(),this.$el.addClass("drag-ongoing"))},handleDragEnter:function(i){var c=$(i.currentTarget).data("dnd-count")||0;c++,$(i.currentTarget).data("dnd-count",c),$(i.currentTarget).addClass("drag-over")},handleDragLeave:function(i,c){var u=$(i.currentTarget).data("dnd-count");u--,$(i.currentTarget).data("dnd-count",u),0==u&&($(i.currentTarget).removeClass("drag-over"),c&&c())},handleDragLeaveForOverlay:function(i){var c=this;this.handleDragLeave(i,function(){c.hideDroppableOverlay()})},handleDragLeaveForDroppable:function(i){this.handleDragLeave(i)},handleDragOverForOverlay:function(i){i.stopPropagation(),i.preventDefault(),i.originalEvent.dataTransfer.dropEffect="copy"},hideDroppableOverlay:function(){this.$el.find(".droppable-overlay").hide(),this.$el.removeClass("drag-ongoing")},handleDrop:function(i){i.preventDefault(),$(i.target).trigger("dragleave"),this.hideDroppableOverlay(),this.uploadAttachments(i.originalEvent.dataTransfer.files)},stopPropagation:function(i){i.stopPropagation()},createHTML:function(){if(this.options.isPreviousNextNavigationEnabled()){var c=this.createPreviousNextBarElement();this.$el.append(c)}var u=this.createCommentingFieldElement();u.addClass("main"),this.$el.append(u);var f=u.find(".control-row");this.options.enableHidingMainControlRow&&f.hide(),u.find(".close").hide(),this.options.enableNavigation&&(this.$el.append(this.createNavigationElement()),this.showActiveSort());var h=this.createSpinner();this.$el.append(h);var m=$("<div/>",{class:"data-container","data-container":"comments"});this.$el.append(m);var o=this.options.noCommentsText,b=$("<div/>",{class:"no-comments no-data"}),y=$("<p/>",{class:"header",text:this.options.textFormatter(o.headerText)}),x=$("<p/>",{class:"sub-title",text:this.options.textFormatter(o.subtitleText)}),A=$("<p/>",{class:"description",text:this.options.textFormatter(o.description)}),R=$("<i/>",{class:"fa fa-comments fa-2x"});if(this.options.noCommentsIconURL.length&&(R.css("background-image",'url("'+this.options.noCommentsIconURL+'")'),R.addClass("image")),b.prepend($("<br/>")).prepend(A).prepend(R).prepend(x).prepend(y),m.append(b),this.options.enableAttachments){var ce=$("<div/>",{class:"data-container","data-container":"attachments"});this.$el.append(ce);var K=$("<div/>",{class:"no-attachments no-data",text:this.options.textFormatter(this.options.noAttachmentsText)}),N=$("<i/>",{class:"fa fa-paperclip fa-2x"});this.options.attachmentIconURL.length&&(N.css("background-image",'url("'+this.options.attachmentIconURL+'")'),N.addClass("image")),K.prepend($("<br/>")).prepend(N),ce.append(K);var X=$("<div/>",{class:"droppable-overlay"}),ae=$("<div/>",{class:"droppable-container"}),xe=$("<div/>",{class:"droppable"}),Be=$("<i/>",{class:"fa fa-upload fa-4x"});this.options.uploadIconURL.length&&(Be.css("background-image",'url("'+this.options.uploadIconURL+'")'),Be.addClass("image"));var he=$("<div/>",{text:this.options.textFormatter(this.options.attachmentDropText)});xe.append(Be),xe.append(he),X.html(ae.html(xe)).hide(),this.$el.append(X)}},createProfilePictureElement:function(i,c){if(i){var u=$("<i/>",{class:this.options.profilePicturePlaceholderStyleClass,"data-src":i});this.intxnObserver.observe(u.get(0))}else void 0!==c&&this.options.getProfilePictureURL?(u=$("<i/>",{class:this.options.profilePicturePlaceholderStyleClass,"data-creatorOid":c}),this.intxnObserver.observe(u.get(0))):u=$("<i/>",{class:"fa fa-user"});return this.addClassToProfilePictureElement(u)},addClassToProfilePictureElement:function(i){return i.addClass("profile-picture"),this.options.roundProfilePictures&&i.addClass("round"),i},intxnObserverCallback:function(i){var c=this,u=function(h,m){var o=c.addClassToProfilePictureElement($("<img/>",{src:m,role:"presentation"}));$(h).replaceWith(o)};$(i).each(function(f,h){if(h.isIntersecting){var m=h.target;c.intxnObserver.unobserve(m);var o=m.getAttribute("data-src");if(o)return void u(m,o);var b=h.target.getAttribute("data-creatorOid"),y=c.options.getProfilePictureURL;if(b&&y)return void y(b,function(x){u(m,x)},function(){})}})},createPreviousNextBarElement:function(){var i=$("<div/>",{class:"previousnext-wrapper"}),c=$("<button/>",{class:"previous-button-wrapper"}),u=$("<i/>",{class:"glyphicon pbi-glyph-commentprevious glyph-mini"}),f=$("<span/>",{text:this.options.textFormatter(this.options.previousCommentText)});c.append(u),c.append(f),i.append(c);var h=$("<div/>",{class:"previousnext-divider"});i.append(h);var m=$("<button/>",{class:"next-button-wrapper"}),o=$("<i/>",{class:"glyphicon pbi-glyph-commentnext glyph-mini"}),b=$("<span/>",{text:this.options.textFormatter(this.options.nextCommentText)});return m.append(o),m.append(b),i.append(m),i},createCommentingFieldElement:function(i,c,u){var f=this,h=$("<div/>",{class:"commenting-field"});if(c)var m=this.commentsById[c],o=m.profilePictureURL,b=m.creatorOid;else o=this.options.profilePictureURL;var ce,y=this.createProfilePictureElement(o,b),x=$("<div/>",{class:"textarea-wrapper"}),A=$("<div/>",{class:"control-row"}),R=$("<div/>",{class:"textarea",role:"textbox","aria-label":this.options.textFormatter(this.options.textareaAriaLabelText),"aria-placeholder":this.options.textFormatter(this.options.textareaPlaceholderText),contenteditable:!0});if(this.adjustTextareaHeight(R,!1),f.options.enableCloseCommentButton&&(ce=$("<span/>",{class:"close"}).append($('<span class="left"/>')).append($('<span class="right"/>'))),c){var K=this.options.textFormatter(this.options.saveText),N=$("<span/>",{class:"delete",text:this.options.textFormatter(this.options.deleteText)}).css("background-color",this.options.deleteButtonColor);N.attr("aria-label",this.options.textFormatter(this.options.deleteLabelText)),A.append(N),this.isAllowedToDelete(c)&&N.addClass("enabled")}else if(K=this.options.textFormatter(this.options.sendText),this.options.enableAttachments){var X=$("<span/>",{class:"enabled upload"}),ae=$("<i/>",{class:"fa fa-upload"}),xe=$("<input/>",{type:"file","data-role":"none"});$.browser.mobile||xe.attr("multiple","multiple"),this.options.uploadIconURL.length&&(ae.css("background-image",'url("'+this.options.uploadIconURL+'")'),ae.addClass("image")),X.append(ae).append(xe),A.append(X)}var he=$("<button/>",{class:(c?"update":"send")+" save highlight-background",text:K,disabled:!0});if(A.prepend(he),u?(u.append(A),x.append(ce).append(R)):x.append(ce).append(R).append(A),h.append(y).append(x),i){R.attr("data-parent",i);var Se=this.commentsById[i];if(Se.creatorOid&&!Se.createdByCurrentUser){R.html("&nbsp;");var Le=this.usersById[Se.creatorOid],ct=Le?this.createTagElement("@"+Le.fullname,"ping",Le.objectId,Le.userPrincipalName):this.createTagElement("@"+Se.creatorOid,"ping",Se.creatorOid,Se.creatorOid);R.prepend(ct)}}return this.options.enablePinging&&R.textcomplete([{match:/(^|\s)@(([a-z\xe4\xf6\xfc\xdf!#$%&'*+\-/=?^_`{|}~.0-9]|\s)*)$/im,search:function(ke,S){ke=f.normalizeSpaces(ke);var Ie=f.getPings(R);f.getUsers(ke).then(function(Ue){var ht=Ue?Ue.filter(function(J){var Et=J.objectId==f.options.currentUserId,Ct=-1!=Ie.indexOf(J.objectId);return!Et&&!Ct}):[];f.sortUsers(ht),S(ht)})},template:function(ke){var Ie,S=$("<div/>");ke.profile_picture_url&&(Ie=$("<img/>",{src:ke.profile_picture_url,class:"profile-picture round",role:"presentation"}));var Ue=$("<div/>",{class:"details"}),ht=$("<div/>",{class:"name"}).html(ke.fullname),J=$("<div/>",{class:"email"}).html(ke.userPrincipalName||ke.email);return Ue.append(ht).append(J),S.append(Ie).append(Ue),S.html()},replace:function(ke){return" "+f.createTagElement("@"+ke.fullname,"ping",ke.objectId,ke.userPrincipalName)[0].outerHTML+" "}}],{appendTo:".jquery-comments",dropdownClassName:"dropdown autocomplete",noResultsMessage:this.options.textFormatter(this.options.noResultsText),debounce:250,maxCount:10}),h},createNavigationElement:function(){var i=$("<ul/>",{class:"navigation"}),c=$("<div/>",{class:"navigation-wrapper"});i.append(c);var u=$("<li/>",{text:this.options.textFormatter(this.options.newestText),"data-sort-key":"newest","data-container-name":"comments"}),f=$("<li/>",{text:this.options.textFormatter(this.options.oldestText),"data-sort-key":"oldest","data-container-name":"comments"}),h=$("<li/>",{text:this.options.textFormatter(this.options.popularText),"data-sort-key":"popularity","data-container-name":"comments"}),m=$("<li/>",{text:this.options.textFormatter(this.options.attachmentsText),"data-sort-key":"attachments","data-container-name":"attachments"}),o=$("<i/>",{class:"fa fa-paperclip"});this.options.attachmentIconURL.length&&(o.css("background-image",'url("'+this.options.attachmentIconURL+'")'),o.addClass("image")),m.prepend(o);var b=$("<div/>",{class:"navigation-wrapper responsive"}),y=$("<ul/>",{class:"dropdown"}),x=$("<li/>",{class:"title"}),A=$("<header/>");return x.append(A),b.append(x),b.append(y),i.append(b),c.append(u).append(f),y.append(u.clone()).append(f.clone()),(this.options.enableReplying||this.options.enableUpvoting)&&(c.append(h),y.append(h.clone())),this.options.enableAttachments&&(c.append(m),b.append(m.clone())),this.options.forceResponsive&&this.forceResponsive(),i},createSpinner:function(){var i=$("<div/>",{class:"spinner"}),c=$("<i/>",{class:"fa fa-spinner fa-spin"});return this.options.spinnerIconURL.length&&(c.css("background-image",'url("'+this.options.spinnerIconURL+'")'),c.addClass("image")),i.html(c),i},createCommentElement:function(i){var c=$("<li/>",{"data-id":i.id,class:"comment"}).data("model",i);i.createdByCurrentUser&&c.addClass("by-current-user"),i.createdByAdmin&&c.addClass("by-admin");var u=$("<ul/>",{class:"child-comments"}),f=this.createReplyButton(),h=this.createCommentWrapperElement(i),m=$("<div/>",{class:"conversation-wrapper"});return c.append(m),m.append(h),null==i.parent&&(m.append(u),i.isDeleted||m.append(f)),c},createCommentWrapperElement:function(i){var c=$("<div/>",{class:"comment-wrapper"}),u=$("<div/>",{class:"comment-info"}),f=this.createProfilePictureElement(i.profilePictureURL,i.creatorOid),h=this.createConversationButtons(i);u.append(f).append(h);var m=$("<time/>",{text:this.options.timeFormatter(i.created),"data-original":i.created}),o=i.fullname;i.isDeleted?o=this.options.textFormatter(this.options.deletedCommentAuthorText):i.fullname||(o=this.options.textFormatter(this.options.unknownUserText));var b=$("<div/>",{class:"name"});if(i.profileURL){var y=$("<a/>",{href:i.profileURL,text:o});b.html(y)}else b.text(o);if((i.createdByCurrentUser||i.createdByAdmin)&&b.addClass("highlight-font-bold"),i.parent){var x=this.commentsById[i.parent];if(x.parent){var A=$("<span/>",{class:"reply-to",text:x.fullname}),R=$("<i/>",{class:"fa fa-share"});this.options.replyIconURL.length&&(R.css("background-image",'url("'+this.options.replyIconURL+'")'),R.addClass("image")),A.prepend(R),b.append(A)}}var ce=$("<div/>",{class:"wrapper"}),K=$("<div/>",{class:"content"}),N=null!=i.fileURL;if(N){var X=null,ae=null;if(i.fileMimeType){var xe=i.fileMimeType.split("/");2==xe.length&&(X=xe[1],ae=xe[0])}if(y=$("<a/>",{class:"attachment",href:i.fileURL,target:"_blank"}),"image"==ae){var Be=$("<img/>",{src:i.fileURL});y.html(Be)}else if("video"==ae){var he=$("<video/>",{src:i.fileURL,type:i.fileMimeType,controls:"controls"});y.html(he)}else{var Se=["archive","audio","code","excel","image","movie","pdf","photo","picture","powerpoint","sound","video","word","zip"],Le="fa fa-file-o";Se.indexOf(X)>0?Le="fa fa-file-"+X+"-o":Se.indexOf(ae)>0&&(Le="fa fa-file-"+ae+"-o");var ct=$("<i/>",{class:Le});this.options.fileIconURL.length&&(ct.css("background-image",'url("'+this.options.fileIconURL+'")'),ct.addClass("image"));var it=i.fileURL.split("/"),ke=it[it.length-1];ke=ke.split("?")[0],ke=decodeURIComponent(ke),y.text(ke),y.prepend(ct)}K.html(y)}else K.html(this.getFormattedCommentContent(i));if(i.modified&&i.modified!=i.created){var S=this.options.timeFormatter(i.modified),Ie=$("<time/>",{class:"edited",text:this.options.textFormatter(this.options.editedText)+" "+S,"data-original":i.modified});K.append(Ie)}var Ue=$("<span/>",{class:"actions"}),ht=$("<span/>",{class:"separator",text:"\xb7"}),J=$("<i/>",{class:"fa fa-thumbs-up"});this.options.upvoteIconURL.length&&(J.css("background-image",'url("'+this.options.upvoteIconURL+'")'),J.addClass("image"));var Et=this.createUpvoteElement(i);if(this.options.enableUpvoting&&Ue.append(Et),this.isAllowedToDelete(i.id)){var Ct=!!this.options.deleteButtonClass,We=this.options.textFormatter(this.options.deleteText),bt=$("<button/>",{class:"action delete enabled "+this.options.deleteButtonClass,text:Ct?"":We,title:We});bt.attr("aria-label",this.options.textFormatter(this.options.deleteLabelText)),Ue.append(bt)}else if((i.createdByCurrentUser||this.options.currentUserIsAdmin)&&!N&&this.options.enableEditing){var Pe=$("<button/>",{class:"action edit",text:this.options.textFormatter(this.options.editText)});Ue.append(Pe)}return Ue.children().each(function(Ne,le){$(le).is(":last-child")||$(le).after(ht.clone())}),ce.append(b),ce.append(Ue),ce.append(m),ce.append(K),c.append(u).append(ce),c},createConversationButtons:function(i){var c=i.supportedConversationButtons,u=$();if(c&&c.length>0){if(-1!==c.indexOf(this.conversationButton_HighlightArtifact)){var f=$("<button/>",{class:"glyphicon pbi-glyph-barchart highlight-artifact",title:this.options.textFormatter(this.options.highlightArtifactText)});u=u.add(f)}if(-1!==c.indexOf(this.conversationButton_BookmarkArtifact)){var h=$("<button/>",{class:"glyphicon pbi-glyph-bookmark bookmark-artifact",title:this.options.textFormatter(this.options.bookmarkArtifactText)});u=u.add(h)}}return u},createUpvoteElement:function(i){var c=$("<i/>",{class:"fa fa-thumbs-up"});return this.options.upvoteIconURL.length&&(c.css("background-image",'url("'+this.options.upvoteIconURL+'")'),c.addClass("image")),$("<button/>",{class:"action upvote"+(i.userHasUpvoted?" highlight-font":"")}).append($("<span/>",{text:i.upvoteCount,class:"upvote-count"})).append(c)},createTagElement:function(i,c,u,f){var h=this.options.enableBasicPingTagStyle?"basic-tag":"tag",m=$("<span/>").addClass(h).text(i);return m.attr("contenteditable","false"),c&&m.addClass(c),f&&m.attr("title",f),m.attr("data-value",u),m},reRenderComment:function(i){var c=this.commentsById[i],u=this.$el.find('li.comment[data-id="'+c.id+'"]'),f=this;u.each(function(h,m){var o=f.createCommentWrapperElement(c);$(m).find(".comment-wrapper").first().replaceWith(o)})},reRenderCommentActionBar:function(i){var c=this.commentsById[i],u=this.$el.find('li.comment[data-id="'+c.id+'"]'),f=this;u.each(function(h,m){var o=f.createCommentWrapperElement(c);$(m).find(".actions").first().replaceWith(o.find(".actions"))})},reRenderUpvotes:function(i){var c=this.commentsById[i],u=this.$el.find('li.comment[data-id="'+c.id+'"]'),f=this;u.each(function(h,m){var o=f.createUpvoteElement(c);$(m).find(".upvote").first().replaceWith(o)})},createCssDeclarations:function(){$("head style.jquery-comments-css").remove(),this.createCss(".jquery-comments ul.navigation li.active:after {background: "+this.options.highlightColor+" !important;",NaN),this.createCss(".jquery-comments ul.navigation ul.dropdown li.active {background: "+this.options.highlightColor+" !important;",NaN),this.createCss(".jquery-comments .highlight-background {background: "+this.options.highlightColor+" !important;",NaN),this.createCss(".jquery-comments .highlight-font {color: "+this.options.highlightColor+" !important;}"),this.createCss(".jquery-comments .highlight-font-bold {color: "+this.options.highlightColor+" !important;font-weight: bold;}")},createCss:function(i){var c=$("<style/>",{type:"text/css",class:"jquery-comments-css",text:i});$("head").append(c)},getComments:function(){var i=this;return Object.keys(this.commentsById).map(function(c){return i.commentsById[c]})},getUsers:function(i){var c=this;return this.options.getUsers(i,function(m){$(m).each(function(o,b){c.usersById[b.objectId]=b}),c.usersFetched=m},function(){}).then(function(){return c.usersFetched})},getChildComments:function(i){return this.getComments().filter(function(c){return c.parent==i})},getAttachments:function(){return this.getComments().filter(function(i){return null!=i.fileURL})},getOutermostParent:function(i){var c=i;do{var u=this.commentsById[c];c=u.parent}while(null!=u.parent);return u},createCommentJSON:function(i){var c=(new Date).toISOString(),u=this.getTextareaContent(i);return{id:"c"+(this.getComments().length+1),parent:i.attr("data-parent")||null,created:c,modified:c,content:u,pings:this.getPings(i),fullname:this.options.textFormatter(this.options.youText),profilePictureURL:this.options.profilePictureURL,createdByCurrentUser:!0,upvoteCount:0,userHasUpvoted:!1,mentionedUsers:this.getMentionedUsers(u)}},getMentionedUsers:function(i){var c,u=this.getUserObjectIdsFromContent(i);if(u){c=[];for(var f=0;f<u.length;f++){var m=u[f].substr(1),o=this.usersById[m];o&&c.push({oid:m,fullname:o.fullname,userPrincipalName:o.userPrincipalName})}}return c},getUserObjectIdsFromContent:function(i){var c=new RegExp(/@[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}/g);return i&&i.match(c)},isAllowedToDelete:function(i){if(this.options.enableDeleting){var c=this.commentsById[i];if(c.isDeleted)return!1;var u=c.canDelete;return u&&!this.options.enableDeletingCommentWithReplies&&$(this.getComments()).each(function(f,h){h.parent==i&&(u=!1)}),u}return!1},setToggleAllButtonText:function(i,c,u){var f=this,h=i.find("span"),m=i.find("i"),o=function(){if(u){var A=f.options.textFormatter(f.options.getAllChildCommentsText);h.text(A)}else{A=f.options.textFormatter(f.options.viewAllRepliesText);var R=i.siblings(".comment").length;A=A.replace("__replyCount__",R),h.text(A)}},b=this.options.textFormatter(this.options.hideRepliesText),y=function(A,R,ce){A.removeClass(R),A.addClass(ce)};c?h.text()==b?(o(),y(m,this.options.replyButtonCaretUpClass,this.options.replyButtonCaretDownClass)):(h.text(b),y(m,this.options.replyButtonCaretDownClass,this.options.replyButtonCaretUpClass)):h.text()!=b&&(o(),y(m,this.options.replyButtonCaretUpClass,this.options.replyButtonCaretDownClass))},adjustTextareaHeight:function(i,c){i=$(i);var m=1==c?this.options.textareaRowsOnFocus:this.options.textareaRows;do{m++;var o=i[0].scrollHeight>i.outerHeight(),b=0!=this.options.textareaMaxRows&&m>this.options.textareaMaxRows}while(o&&!b)},clearTextarea:function(i){i.empty().trigger("input")},getTextareaContent:function(i,c){var u=i.clone();u.find(".reply-to.tag").remove(),u.find(".tag.hashtag").replaceWith(function(){return c?$(this).val():"#"+$(this).attr("data-value")}),u.find(this.options.enableBasicPingTagStyle?".basic-tag.ping":".tag.ping").replaceWith(function(){return c?$(this).val():"@"+$(this).attr("data-value")});var h=$("<pre/>").html(u.html());return h.find("div, p, br").replaceWith(function(){return"\n"+this.innerHTML}),h.text().replace(/^\s+/g,"")},getFormattedCommentContent:function(i,c){var u=this.options.textFormatter(this.options.deletedCommentContentText),h=this.escape(i.isDeleted?u:i.content);return h=this.linkify(h),h=this.highlightTags(i,h),c&&(h=h.replace(/(?:\n)/g,"<br>")),h},getPings:function(i){return $.map(i.find(".ping"),function(c){return $(c).attr("data-value")})},moveCursorToEnd:function(i){if(i=$(i)[0],$(i).trigger("input"),$(i).scrollTop(i.scrollHeight),typeof window.getSelection<"u"&&typeof document.createRange<"u"){var c=document.createRange();c.selectNodeContents(i),c.collapse(!1);var u=window.getSelection();u.removeAllRanges(),u.addRange(c)}else if(typeof document.body.createTextRange<"u"){var f=document.body.createTextRange();f.moveToElementText(i),f.collapse(!1),f.select()}i.focus()},escape:function(i){return $("<pre/>").text(this.normalizeSpaces(i)).html()},normalizeSpaces:function(i){return i.replace("\xa0"," ")},after:function(i,c){var u=this;return function(){if(0==--i)return c.apply(u,arguments)}},highlightTags:function(i,c){return this.options.enableHashtags&&(c=this.highlightHashtags(i,c)),this.options.enablePinging&&(c=this.highlightPings(i,c)),c},highlightHashtags:function(i,c){var u=this;if(-1!=c.indexOf("#")){c=c.replace(/(^|\s)#([a-z\xe4\xf6\xfc\xdf\d-_]+)/gim,function(m,o,b){return o+function(b){return(b=u.createTagElement("#"+b,"hashtag",b))[0].outerHTML}(b)})}return c},highlightPings:function(i,c){var u=this;if(-1!=c.indexOf("@")){var h=Array.prototype.concat(i.pings,$.map(i.mentionedUsers,function(m){if(m&&m.oid)return m.oid}));$(h).each(function(m,o){if(o in u.usersById){var b=u.usersById[o];c=c.replace("@"+b.fullname,function(o){return u.createTagElement("@"+o.fullname,"ping",o.oid,o.userPrincipalName)[0].outerHTML}(b))}})}return c},linkify:function(i){var c,u,f,h;if(c=(c=(c=i.replace(u=/(^|\s)((https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gim,'$1<a href="$2" target="_blank">$2</a>')).replace(f=/(^|\s)(www\.[\S]+(\b|$))/gim,'$1<a href="http://$2" target="_blank">$2</a>')).replace(h=/(^|\s)(([a-zA-Z0-9\-\_\.]+)@[a-zA-Z\_]+?(\.[a-zA-Z]{2,6})+)/gim,'$1<a href="mailto:$2">$2</a>'),(i.match(/<a href/g)||[]).length>0){for(var o=i.split(/(<\/a>)/g),b=0;b<o.length;b++)null==o[b].match(/<a href/g)&&(o[b]=o[b].replace(u,'<a href="$1" target="_blank">$1</a>').replace(f,'$1<a href="http://$2" target="_blank">$2</a>').replace(h,'<a href="mailto:$1">$1</a>'));return o.join("")}return c},waitUntil:function(i,c){var u=this;i()?c():setTimeout(function(){u.waitUntil(i,c)},100)},applyInternalMappings:function(i){var c={},u=this.options.fieldMappings;for(var f in u)u.hasOwnProperty(f)&&(c[u[f]]=f);return this.applyMappings(c,i)},applyExternalMappings:function(i){return this.applyMappings(this.options.fieldMappings,i)},applyMappings:function(i,c){var u={};for(var f in c)f in i&&(u[i[f]]=c[f]);return u},verifyLength:function(i){var c=this.getTextareaContent($(i.currentTarget)),u=this.getMentionedUsers(c),f=null!=u?u.length:0;if("keydown"==i.type){if(c.length-f*this.options.commentMentionCharacters>this.options.commentMaxLength){var h=i.keyCode;8==h||46==h||37==h||38==h||39==h||40==h||i.preventDefault()}}else"paste"==i.type&&c.length-f*this.options.commentMentionCharacters+i.originalEvent.clipboardData.getData("text").length>this.options.commentMaxLength&&i.preventDefault()},handleConversationClick:function(i){if(this.options.isHandleConversationClickEnabled()){var c=$(i.currentTarget).first();c.parents("#comment-list").find("li.comment > .conversation-wrapper").removeClass("selected"),this.selectComment(c);var u=c.find(".bookmark-artifact");u.removeAttr("title"),u.attr("title",this.options.textFormatter(this.options.bookmarkArtifactTextSelected)),this.getCommentModelFromElement(c).isDeleted||this.spotlightAndApplyBookmarkIfAny(c)}},spotlightAndApplyBookmarkIfAny:function(i){this.changeSelectedBookmarkIconIfExists($(i)),this.changeSelectedSpotlightIconIfExists($(i));var c=this.getCommentModelFromElement($(i));this.options.spotlightOrApplyBookmarkIfAny(c)},getCommentModelFromElement:function(i){var c=i.data("id");return this.commentsById[c]},changeSelectedBookmarkIconIfExists:function(i){i.parents("#comment-list").find(".bookmark-artifact-selected").removeClass("bookmark-artifact-selected"),i.find(".bookmark-artifact").addClass("bookmark-artifact-selected")},changeSelectedSpotlightIconIfExists:function(i){i.parents("#comment-list").find(".highlight-artifact-selected").removeClass("highlight-artifact-selected"),i.find(".highlight-artifact").addClass("highlight-artifact-selected")}};$.fn.comments=function(T){return this.each(function(){var i=Object.create(Y);$.data(this,"comments",i),i.init(T||{},this)})}},void 0!==(E=l.apply(Te,[]))&&($e.exports=E)},58392:function($e,Te){var l,E;l=function(){return function(){"use strict";var T=1;$.fn.textcomplete=function(i,c){var u=Array.prototype.slice.call(arguments);return this.each(function(){var h=$(this),m=h.data("textComplete");if(m||(c||(c={}),c._oid=T++,m=new $.fn.textcomplete.Completer(this,c),h.data("textComplete",m)),"string"==typeof i){if(!m)return;u.shift(),m[i].apply(m,u),"destroy"===i&&h.removeData("textComplete")}else $.each(i,function(o){$.each(["header","footer","placement","maxCount"],function(b){o[b]&&(m.option[b]=o[b],console,delete o[b])})}),m.register($.fn.textcomplete.Strategy.parse(i,{el:this,$el:h}))})}}(),function(){"use strict";var h,m,o,T=function(h){return"[object String]"===Object.prototype.toString.call(h)},i=0,c=[];function u(f,h){if(this.$el=$(f),this.id="textcomplete"+i++,this.strategies=[],this.views=[],this.option=$.extend({},u.defaults,h),!(this.$el.is("input[type=text]")||this.$el.is("input[type=search]")||this.$el.is("textarea")||f.isContentEditable||"true"==f.contentEditable))throw new Error("textcomplete must be called on a Textarea or a ContentEditable.");if(f===f.ownerDocument.activeElement)this.initialize();else{var m=this;this.$el.one("focus."+this.id,function(){m.initialize()}),(!this.option.adapter||"CKEditor"==this.option.adapter)&&typeof CKEDITOR<"u"&&this.$el.is("textarea")&&CKEDITOR.on("instanceReady",function(o){-1==$.inArray(o.editor.id,c)&&(c.push(o.editor.id),o.editor.on("focus",function(b){m.$el=$(o.editor.editable().$),m.option.adapter||(m.option.adapter=$.fn.textcomplete.CKEditor),m.option.ckeditor_instance=o.editor,m.initialize()}))})}}u.defaults={appendTo:"body",className:"",dropdownClassName:"dropdown-menu textcomplete-dropdown",maxCount:10,zIndex:"100",rightEdgeOffset:30},$.extend(u.prototype,{id:null,option:null,strategies:null,adapter:null,dropdown:null,$el:null,$iframe:null,initialize:function(){var o,b,h=this.$el.get(0);if(this.$el.prop("ownerDocument")!==document&&window.frames.length)for(var m=0;m<window.frames.length;m++)if(this.$el.prop("ownerDocument")===window.frames[m].document){this.$iframe=$(window.frames[m].frameElement);break}this.dropdown=new $.fn.textcomplete.Dropdown(h,this,this.option),this.option.adapter?o=this.option.adapter:(b=this.$el.is("textarea")||this.$el.is("input[type=text]")||this.$el.is("input[type=search]")?"number"==typeof h.selectionEnd?"Textarea":"IETextarea":"ContentEditable",o=$.fn.textcomplete[b]),this.adapter=new o(h,this,this.option)},destroy:function(){this.$el.off("."+this.id),this.adapter&&this.adapter.destroy(),this.dropdown&&this.dropdown.destroy(),this.$el=this.adapter=this.dropdown=null},deactivate:function(){this.dropdown&&this.dropdown.deactivate()},trigger:function(h,m){this.dropdown||this.initialize(),null!=h||(h=this.adapter.getTextFromHeadToCaret());var o=this._extractSearchQuery(h);if(o.length){var b=o[1];if(m&&this._term===b&&""!==b)return;this._term=b,this._search.apply(this,o)}else this._term=null,this.dropdown.deactivate()},fire:function(h){var m=Array.prototype.slice.call(arguments,1);return this.$el.trigger(h,m),this},register:function(h){Array.prototype.push.apply(this.strategies,h)},select:function(h,m,o){this._term=null,this.adapter.select(h,m,o),this.fire("change").fire("textComplete:select",h,m),this.adapter.focus()},_clearAtNext:!0,_term:null,_extractSearchQuery:function(h){for(var m=0;m<this.strategies.length;m++){var o=this.strategies[m],b=o.context(h);if(b||""===b){var y=$.isFunction(o.match)?o.match(h):o.match;T(b)&&(h=b);var x=h.match(y);if(x)return[o,x[o.index],x]}}return[]},_search:(h=function(f,h,m,o){var b=this;h.search(m,function(y,x){b.dropdown.shown||b.dropdown.activate(),b._clearAtNext&&(b.dropdown.clear(),b._clearAtNext=!1),b.dropdown.setPosition(b.adapter.getCaretPositionWithoutOverflow()),b.dropdown.render(b._zip(y,h,m)),x||(f(),b._clearAtNext=!0)},o)},function(){var b=Array.prototype.slice.call(arguments);if(m)o=b;else{m=!0;var y=this;b.unshift(function x(){if(o){var A=o;o=void 0,A.unshift(x),h.apply(y,A)}else m=!1}),h.apply(this,b)}}),_zip:function(h,m,o){return $.map(h,function(b){return{value:b,strategy:m,term:o}})}}),$.fn.textcomplete.Completer=u}(),function(){"use strict";var Y=$(window),T=function(h,m){var o,b,y=m.strategy.idProperty;for(o=0;o<h.length;o++)if((b=h[o]).strategy===m.strategy)if(y){if(b.value[y]===m.value[y])return!0}else if(b.value===m.value)return!0;return!1},i={};$(document).on("click",function(f){var h=f.originalEvent&&f.originalEvent.keepTextCompleteDropdown;$.each(i,function(m,o){m!==h&&o.deactivate()})});var c={SKIP_DEFAULT:0,KEY_UP:1,KEY_DOWN:2,KEY_ENTER:3,KEY_PAGEUP:4,KEY_PAGEDOWN:5,KEY_ESCAPE:6};function u(f,h,m){this.$el=u.createElement(m),this.completer=h,this.id=h.id+"dropdown",this._data=[],this.$inputEl=$(f),this.option=m,m.listPosition&&(this.setPosition=m.listPosition),m.height&&this.$el.height(m.height);var o=this;$.each(["maxCount","placement","footer","header","noResultsMessage","className"],function(b,y){null!=m[y]&&(o[y]=m[y])}),this._bindEvents(f),i[this.id]=this}$.extend(u,{createElement:function(h){var m=h.appendTo;return m instanceof $||(m=$(m)),$("<ul></ul>").addClass(h.dropdownClassName).attr("id","textcomplete-dropdown-"+h._oid).attr("aria-live","polite").css({display:"none",left:0,position:"absolute",zIndex:h.zIndex}).appendTo(m)}}),$.extend(u.prototype,{$el:null,$inputEl:null,completer:null,footer:null,header:null,id:null,maxCount:null,placement:"",shown:!1,data:[],className:"",destroy:function(){this.deactivate(),this.$el.off("."+this.id),this.$inputEl.off("."+this.id),this.clear(),this.$el.remove(),this.$el=this.$inputEl=this.completer=null,delete i[this.id]},render:function(h){var m=this._buildContents(h),o=$.map(h,function(y){return y.value});if(h.length){var b=h[0].strategy;b.id?this.$el.attr("data-strategy",b.id):this.$el.removeAttr("data-strategy"),this._renderHeader(o),this._renderFooter(o),m&&(this._renderContents(m),this._fitToBottom(),this._fitToRight(),this._activateIndexedItem()),this._setScroll()}else this.noResultsMessage?this._renderNoResultsMessage(o):this.shown&&this.deactivate()},setPosition:function(h){var m="absolute";return this.$inputEl.add(this.$inputEl.parents()).each(function(){return"absolute"!==$(this).css("position")&&("fixed"===$(this).css("position")?(h.top-=Y.scrollTop(),h.left-=Y.scrollLeft(),m="fixed",!1):void 0)}),this.$el.css(this._applyPlacement(h)),this.$el.css({position:m}),this},clear:function(){this.$el.html(""),this.data=[],this._index=0,this._$header=this._$footer=this._$noResultsMessage=null},activate:function(){return this.shown||(this.clear(),this.$el.show(),this.className&&this.$el.addClass(this.className),this.completer.fire("textComplete:show"),this.shown=!0),this},deactivate:function(){return this.shown&&(this.$el.hide(),this.className&&this.$el.removeClass(this.className),this.completer.fire("textComplete:hide"),this.shown=!1),this},isUp:function(h){return 38===h.keyCode||h.ctrlKey&&80===h.keyCode},isDown:function(h){return 40===h.keyCode||h.ctrlKey&&78===h.keyCode},isEnter:function(h){return!(h.ctrlKey||h.altKey||h.metaKey||h.shiftKey)&&(13===h.keyCode||9===h.keyCode||!0===this.option.completeOnSpace&&32===h.keyCode)},isPageup:function(h){return 33===h.keyCode},isPagedown:function(h){return 34===h.keyCode},isEscape:function(h){return 27===h.keyCode},_data:null,_index:null,_$header:null,_$noResultsMessage:null,_$footer:null,_bindEvents:function(){this.$el.on("mousedown."+this.id,".textcomplete-item",$.proxy(this._onClick,this)),this.$el.on("touchstart."+this.id,".textcomplete-item",$.proxy(this._onClick,this)),this.$el.on("mouseover."+this.id,".textcomplete-item",$.proxy(this._onMouseover,this)),this.$inputEl.on("keydown."+this.id,$.proxy(this._onKeydown,this))},_onClick:function(h){var m=$(h.target);h.preventDefault(),h.originalEvent.keepTextCompleteDropdown=this.id,m.hasClass("textcomplete-item")||(m=m.closest(".textcomplete-item"));var o=this.data[parseInt(m.data("index"),10)];this.completer.select(o.value,o.strategy,h);var b=this;setTimeout(function(){b.deactivate(),"touchstart"===h.type&&b.$inputEl.focus()},0)},_onMouseover:function(h){var m=$(h.target);h.preventDefault(),m.hasClass("textcomplete-item")||(m=m.closest(".textcomplete-item")),this._index=parseInt(m.data("index"),10),this._activateIndexedItem()},_onKeydown:function(h){var m;if(this.shown)switch($.isFunction(this.option.onKeydown)&&(m=this.option.onKeydown(h,c)),null==m&&(m=this._defaultKeydown(h)),m){case c.KEY_UP:h.preventDefault(),this._up();break;case c.KEY_DOWN:h.preventDefault(),this._down();break;case c.KEY_ENTER:h.preventDefault(),this._enter(h);break;case c.KEY_PAGEUP:h.preventDefault(),this._pageup();break;case c.KEY_PAGEDOWN:h.preventDefault(),this._pagedown();break;case c.KEY_ESCAPE:h.preventDefault(),this.deactivate()}},_defaultKeydown:function(h){return this.isUp(h)?c.KEY_UP:this.isDown(h)?c.KEY_DOWN:this.isEnter(h)?c.KEY_ENTER:this.isPageup(h)?c.KEY_PAGEUP:this.isPagedown(h)?c.KEY_PAGEDOWN:this.isEscape(h)?c.KEY_ESCAPE:void 0},_up:function(){0===this._index?this._index=this.data.length-1:this._index-=1,this._activateIndexedItem(),this._setScroll()},_down:function(){this._index===this.data.length-1?this._index=0:this._index+=1,this._activateIndexedItem(),this._setScroll()},_enter:function(h){var m=this.data[parseInt(this._getActiveElement().data("index"),10)];this.completer.select(m.value,m.strategy,h),this.deactivate()},_pageup:function(){var h=0,m=this._getActiveElement().position().top-this.$el.innerHeight();this.$el.children().each(function(o){if($(this).position().top+$(this).outerHeight()>m)return h=o,!1}),this._index=h,this._activateIndexedItem(),this._setScroll()},_pagedown:function(){var h=this.data.length-1,m=this._getActiveElement().position().top+this.$el.innerHeight();this.$el.children().each(function(o){if($(this).position().top>m)return h=o,!1}),this._index=h,this._activateIndexedItem(),this._setScroll()},_activateIndexedItem:function(){this.$el.find(".textcomplete-item.active").removeClass("active"),this._getActiveElement().addClass("active")},_getActiveElement:function(){return this.$el.children(".textcomplete-item:nth("+this._index+")")},_setScroll:function(){var h=this._getActiveElement(),m=h.position().top,o=h.outerHeight(),b=this.$el.innerHeight(),y=this.$el.scrollTop();0===this._index||this._index==this.data.length-1||m<0?this.$el.scrollTop(m+y):m+o>b&&this.$el.scrollTop(m+o+y-b)},_buildContents:function(h){var m,o,b,y="";for(o=0;o<h.length&&this.data.length!==this.maxCount;o++)!T(this.data,m=h[o])&&(b=this.data.length,this.data.push(m),y+='<li class="textcomplete-item" data-index="'+b+'"><a>',y+=m.strategy.template(m.value,m.term),y+="</a></li>");return y},_renderHeader:function(h){if(this.header){this._$header||(this._$header=$('<li class="textcomplete-header"></li>').prependTo(this.$el));var m=$.isFunction(this.header)?this.header(h):this.header;this._$header.html(m)}},_renderFooter:function(h){if(this.footer){this._$footer||(this._$footer=$('<li class="textcomplete-footer"></li>').appendTo(this.$el));var m=$.isFunction(this.footer)?this.footer(h):this.footer;this._$footer.html(m)}},_renderNoResultsMessage:function(h){if(this.noResultsMessage){this._$noResultsMessage||(this._$noResultsMessage=$('<li class="textcomplete-no-results-message"></li>').appendTo(this.$el));var m=$.isFunction(this.noResultsMessage)?this.noResultsMessage(h):this.noResultsMessage;this._$noResultsMessage.html(m)}},_renderContents:function(h){this._$footer?this._$footer.before(h):this.$el.append(h)},_fitToBottom:function(){var h=Y.scrollTop()+Y.height(),m=this.$el.height();this.$el.position().top+m>h&&(this.completer.$iframe||this.$el.offset({top:h-m}))},_fitToRight:function(){for(var o,h=this.option.rightEdgeOffset,m=this.$el.offset().left,b=this.$el.width(),y=Y.width()-h;m+b>y&&(this.$el.offset({left:m-h}),!((o=this.$el.offset().left)>=m));)m=o},_applyPlacement:function(h){return-1!==this.placement.indexOf("top")?h={top:"auto",bottom:this.$el.parent().height()-h.top+h.lineHeight,left:h.left}:(h.bottom="auto",delete h.lineHeight),-1!==this.placement.indexOf("absleft")?h.left=0:-1!==this.placement.indexOf("absright")&&(h.right=0,h.left="auto"),h}}),$.fn.textcomplete.Dropdown=u,$.extend($.fn.textcomplete,c)}(),function(){"use strict";function T(i){var c,u;$.extend(this,i),this.cache&&(this.search=(c=this.search,u={},function(f,h){u[f]?h(u[f]):c.call(this,f,function(m){u[f]=(u[f]||[]).concat(m),h.apply(null,arguments)})}))}T.parse=function(i,c){return $.map(i,function(u){var f=new T(u);return f.el=c.el,f.$el=c.$el,f})},$.extend(T.prototype,{match:null,replace:null,search:null,id:null,cache:!1,context:function(){return!0},index:2,template:function(c){return c},idProperty:null}),$.fn.textcomplete.Strategy=T}(),function(){"use strict";var Y=Date.now||function(){return(new Date).getTime()};function i(){}$.extend(i.prototype,{id:null,completer:null,el:null,$el:null,option:null,initialize:function(u,f,h){this.el=u,this.$el=$(u),this.id=f.id+this.constructor.name,this.completer=f,this.option=h,this.option.debounce&&(this._onKeyup=function(u,f){var h,m,o,b,y,x=function A(){var R=Y()-b;R<f?h=setTimeout(A,f-R):(h=null,y=u.apply(o,m),o=m=null)};return function(){return o=this,m=arguments,b=Y(),h||(h=setTimeout(x,f)),y}}(this._onKeyup,this.option.debounce)),this._bindEvents()},destroy:function(){this.$el.off("."+this.id),this.$el=this.el=this.completer=null},select:function(){throw new Error("Not implemented")},getCaretPositionWithoutOverflow:function(){var u=this._getCaretPosition(),f=this.option.appendTo;if(f){f instanceof $||(f=$(f));var h=f.width()-this.$el.width(),m=Math.min(h,u.left);u.left=m}return u},focus:function(){this.$el.focus()},_bindEvents:function(){this.$el.on("keyup."+this.id,$.proxy(this._onKeyup,this))},_getCaretPosition:function(){var u=this._getCaretRelativePosition(),f=this.$el.offset(),h=this.option.appendTo;if(h){h instanceof $||(h=$(h));var m=h.offsetParent().offset();f.top-=m.top,f.left-=m.left}return u.top+=f.top,u.left+=f.left,u},_onKeyup:function(u){this._skipSearch(u)||this.completer.trigger(this.getTextFromHeadToCaret(),!0)},_skipSearch:function(u){switch(u.keyCode){case 9:case 13:case 16:case 17:case 18:case 33:case 34:case 40:case 38:case 27:return!0}if(u.ctrlKey)switch(u.keyCode){case 78:case 80:return!0}}}),$.fn.textcomplete.Adapter=i}(),function(){"use strict";function Y(T,i,c){this.initialize(T,i,c)}$.extend(Y.prototype,$.fn.textcomplete.Adapter.prototype,{select:function(i,c,u){var o,f=this.getTextFromHeadToCaret(),h=this.el.value.substring(this.el.selectionEnd),m=c.replace(i,u);typeof m<"u"&&($.isArray(m)&&(h=m[1]+h,m=m[0]),o=$.isFunction(c.match)?c.match(f):c.match,f=f.replace(o,m),this.$el.val(f+h),this.el.selectionStart=this.el.selectionEnd=f.length)},getTextFromHeadToCaret:function(){return this.el.value.substring(0,this.el.selectionEnd)},_getCaretRelativePosition:function(){var i=$.fn.textcomplete.getCaretCoordinates(this.el,this.el.selectionStart);return{top:i.top+this._calculateLineHeight()-this.$el.scrollTop(),left:i.left-this.$el.scrollLeft(),lineHeight:this._calculateLineHeight()}},_calculateLineHeight:function(){var i=parseInt(this.$el.css("line-height"),10);if(isNaN(i)){var c=this.el.parentNode,u=document.createElement(this.el.nodeName),f=this.el.style;u.setAttribute("style","margin:0px;padding:0px;font-family:"+f.fontFamily+";font-size:"+f.fontSize),u.innerHTML="test",c.appendChild(u),i=u.clientHeight,c.removeChild(u)}return i}}),$.fn.textcomplete.Textarea=Y}(),function(){"use strict";function T(i,c,u){this.initialize(i,c,u),$("<span>\u5436</span>").css({position:"absolute",top:-9999,left:-9999}).insertBefore(i)}$.extend(T.prototype,$.fn.textcomplete.Textarea.prototype,{select:function(c,u,f){var b,h=this.getTextFromHeadToCaret(),m=this.el.value.substring(h.length),o=u.replace(c,f);if(typeof o<"u"){$.isArray(o)&&(m=o[1]+m,o=o[0]),b=$.isFunction(u.match)?u.match(h):u.match,h=h.replace(b,o),this.$el.val(h+m),this.el.focus();var y=this.el.createTextRange();y.collapse(!0),y.moveEnd("character",h.length),y.moveStart("character",h.length),y.select()}},getTextFromHeadToCaret:function(){this.el.focus();var c=document.selection.createRange();c.moveStart("character",-this.el.value.length);var u=c.text.split("\u5436");return 1===u.length?u[0]:u[1]}}),$.fn.textcomplete.IETextarea=T}(),function(){"use strict";function Y(T,i,c){this.initialize(T,i,c)}$.extend(Y.prototype,$.fn.textcomplete.Adapter.prototype,{select:function(i,c,u){var f=this.getTextFromHeadToCaret(),h=this.el.ownerDocument.getSelection(),m=h.getRangeAt(0),o=m.cloneRange();o.selectNodeContents(m.startContainer);var A,y=o.toString().substring(m.startOffset),x=c.replace(i,u);if(typeof x<"u"){$.isArray(x)&&(y=x[1]+y,x=x[0]),A=$.isFunction(c.match)?c.match(f):c.match,f=f.replace(A,x).replace(/ $/,"&nbsp"),m.selectNodeContents(m.startContainer),m.deleteContents();var R=this.el.ownerDocument.createElement("div");R.innerHTML=f;var ce=this.el.ownerDocument.createElement("div");ce.innerHTML=y;for(var N,X,K=this.el.ownerDocument.createDocumentFragment();N=R.firstChild;)X=K.appendChild(N);for(;N=ce.firstChild;)K.appendChild(N);m.insertNode(K),m.setStartAfter(X),m.collapse(!0),h.removeAllRanges(),h.addRange(m)}},_getCaretRelativePosition:function(){var i=this.el.ownerDocument.getSelection().getRangeAt(0).cloneRange(),c=i.endContainer.parentNode,u=this.el.ownerDocument.createElement("span");i.insertNode(u),i.selectNodeContents(u),i.deleteContents(),setTimeout(function(){c.normalize()},0);var f=$(u),h=f.offset();if(h.left-=this.$el.offset().left,h.top+=f.height()-this.$el.offset().top,h.lineHeight=f.height(),this.completer.$iframe){var m=this.completer.$iframe.offset();h.top+=m.top,h.left+=m.left,h.top-=$(this.completer.$iframe[0].contentWindow.document).scrollTop()}return f.remove(),h},getTextFromHeadToCaret:function(){var i=this.el.ownerDocument.getSelection().getRangeAt(0),c=i.cloneRange();return c.selectNodeContents(i.startContainer),c.toString().substring(0,i.startOffset)}}),$.fn.textcomplete.ContentEditable=Y}(),function(){"use strict";function Y(T,i,c){this.initialize(T,i,c)}$.extend(Y.prototype,$.fn.textcomplete.ContentEditable.prototype,{_bindEvents:function(){var i=this;this.option.ckeditor_instance.on("key",function(c){var u=c.data;if(i._onKeyup(u),i.completer.dropdown.shown&&i._skipSearch(u))return!1},null,null,1),this.$el.on("keyup."+this.id,$.proxy(this._onKeyup,this))}}),$.fn.textcomplete.CKEditor=Y}(),Y=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"],T=typeof window<"u",i=T&&null!=window.mozInnerScreenX,$.fn.textcomplete.getCaretCoordinates=function(u,f,h){if(!T)throw new Error("textarea-caret-position#getCaretCoordinates should only be called in a browser");var m=h&&h.debug||!1;if(m){var o=document.querySelector("#input-textarea-caret-position-mirror-div");o&&o.parentNode.removeChild(o)}var b=document.createElement("div");b.id="input-textarea-caret-position-mirror-div",document.body.appendChild(b);var y=b.style,x=window.getComputedStyle?getComputedStyle(u):u.currentStyle;y.whiteSpace="pre-wrap","INPUT"!==u.nodeName&&(y.wordWrap="break-word"),y.position="absolute",m||(y.visibility="hidden"),Y.forEach(function(ce){y[ce]=x[ce]}),i?u.scrollHeight>parseInt(x.height)&&(y.overflowY="scroll"):y.overflow="hidden",b.textContent=u.value.substring(0,f),"INPUT"===u.nodeName&&(b.textContent=b.textContent.replace(/\s/g,"\xa0"));var A=document.createElement("span");A.textContent=u.value.substring(f)||".",b.appendChild(A);var R={top:A.offsetTop+parseInt(x.borderTopWidth),left:A.offsetLeft+parseInt(x.borderLeftWidth)};return m?A.style.backgroundColor="#aaa":document.body.removeChild(b),R},$;var Y,T,i},void 0!==(E=l.apply(Te,[]))&&($e.exports=E)},63512:function($e,Te,l){"use strict";l.r(Te),l.d(Te,{DashboardHostNewModule:function(){return Ph}});var M=l(81337),E=l(13275),Y=l(13082),T=l(9947),i=l(71540),c=l(53463),u=l(36657),f=l(73221),h=l(35563),m=l(21429),o=l(50423),b=l(34763),y=l(59787),x=new o.InjectionToken("InViewportDirectiveOptions"),A=function(){function n(e,t){this.elementRef=e,this.viewPortChangedEvent=new o.EventEmitter,this.subscriptions=new b.w,this.options=t??{useWindowScroll:!1}}return n.prototype.ngOnInit=function(){this.emitViewportChanges()},n.prototype.ngAfterViewInit=function(){var e=this,t=this.options.useWindowScroll?window:this.elementRef.nativeElement;this.subscriptions.add((0,y.R)(t,"scroll").subscribe(function(r){e.emitViewportChanges()})),this.subscriptions.add((0,y.R)(window,"resize").subscribe(function(r){e.emitViewportChanges()}))},n.prototype.emitViewportChanges=function(){if(this.options.useWindowScroll){var e=window.visualViewport;this.viewPortChangedEvent.emit({bottom:e.pageTop+e.height,right:e.pageLeft+e.width})}else this.viewPortChangedEvent.emit({bottom:this.elementRef.nativeElement.scrollTop+this.elementRef.nativeElement.clientHeight,right:this.elementRef.nativeElement.scrollLeft+this.elementRef.nativeElement.clientWidth})},n.prototype.ngOnDestroy=function(){this.subscriptions.unsubscribe()},n.\u0275fac=function(t){return new(t||n)(o.\u0275\u0275directiveInject(o.ElementRef),o.\u0275\u0275directiveInject(x,8))},n.\u0275dir=o.\u0275\u0275defineDirective({type:n,selectors:[["","inViewport",""]],outputs:{viewPortChangedEvent:"viewPortChangedEvent"}}),n}(),R=l(59017),ce=l(82762),K=l(11547),N=l(59973),X=l(83317),ae=l(14172),xe=l(77526),Be=l(22318),he=l(48787),Se=l(23558),Le=l(59822),ct=l(8575),it=l(20958),ke=l(94938),S=l(43567),Ie=l(19373),Ue=l(42449),ht=l(75654),J=l(85732),Et=l(93425),Ct=l(45665),We=function(){function n(e){this.store=e}return n.prototype.isTileSpotlighted=function(e){return(0,M.mG)(this,void 0,void 0,function(){return(0,M.Jh)(this,function(r){switch(r.label){case 0:return[4,this.store.select(h.JW).pipe((0,he.q)(1)).toPromise()];case 1:return[2,r.sent().some(function(a){return a.id===e})]}})})},n.prototype.isSpotlightSet=function(){return this.store.select(h.JW).pipe((0,ae.U)(function(e){return e&&!!e.length}))},n.prototype.setSpotlight=function(e){this.store.dispatch(new Ct.A1({id:e}))},n.prototype.clearSpotlights=function(){this.store.dispatch(new Ct.AS)},n.\u0275fac=function(t){return new(t||n)(o.\u0275\u0275inject(J.yh))},n.\u0275prov=o.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n}(),bt=l(43025),Pe=l(77476),Ne=l(50544),le=l(33318),me=l(65551),ye=l(47508),we=l(50550);function gt(n,e){return e&&n>0?{bottom:e.bottom/n,right:e.right/n}:e}function He(n){return(0,we.Br)(n.data.contract.$layoutConfig.layouts).withId(1)}function Ze(n,e,t,r){var a=t??At(),s=r??Lt();if(a[n.type])return a[n.type];if(n.contract&&n.contract.$config){var d=(0,me.s)(n.contract.$config);if(s[d])return s[d]}return e}function dt(n,e,t,r,a){for(var s=r??At(),d=a??Lt(),g=[],w=1,D=0,V=(0,le.xT)(_.map(n,function(Z){return{pos:Z.layoutPosition,item:Z}}),!0);D<V.length;D++){var j=V[D],ne=Ze(j.data,t,s,d);g.push({layoutPosition:{x:1,y:w,width:e,height:ne},data:j.data,id:j.id}),w+=ne}return g}function At(){var n;return(n={})[Ne.YU.report]=6,n}function Lt(){var n;return(n={})[ye.L.card.name]=2,n[ye.L.animatedNumber.name]=2,n[ye.L.textbox.name]=2,n}var $t=l(64069),dn=function(){function n(e,t,r){void 0===r&&(r=!1),this.displayWidth=e,this.displayHeight=t,this.inViewportEnabled=r,this.className="mobile-custom-layout-strategy",this.gridItemPadding=4,this.gridItemWidth=52,this.gridItemHeight=58,this.gridItemSpacing=8,this.gridMinWidthOnResize=this.gridItemWidth-10,this.gridMinHeightOnResize=this.gridItemHeight-10,this.gridMaxWidthOnResize=6*this.gridItemWidth,this.gridMaxHeightOnResize=7*this.gridItemHeight,this.isStrictWidth=!0,this.targetScale=1,this.targetScale=this.displayWidth/320}return n.prototype.transformLayout=function(e){if(!function(n){for(var e=0,t=n;e<t.length;e++)if(He(t[e]))return!0;return!1}(e))return dt(e,6,3);for(var t=[],r=0,a=e;r<a.length;r++){var s=a[r],d=He(s);d?.position&&t.push({layoutPosition:_.cloneDeep(d.position),data:s.data,id:s.id})}return t},n.prototype.calculateStyle=function(e){return{overflow:"unset",transform:"scale("+this.targetScale+")",transformOrigin:"top left",width:this.displayWidth/this.targetScale+"px",height:this.displayHeight/this.targetScale+"px"}},n.prototype.isItemInViewport=function(e,t){if(!this.inViewportEnabled)return!0;var r=gt(this.targetScale,t);return(0,$t.p)(e,r)},n}(),tn=function(){function n(e,t,r,a,s,d){void 0===d&&(d=!1),this.displayWidth=e,this.displayHeight=t,this.minNumOfColumns=r,this.maxColumnsToDisplay=a,this.applySizeStyle=s,this.inViewportEnabled=d,this.gridItemPadding=5,this.gridItemWidth=260,this.gridItemHeight=180,this.gridItemSpacing=10,this.gridMinWidthOnResize=this.gridItemWidth-10,this.gridMinHeightOnResize=this.gridItemHeight-10,this.gridMaxWidthOnResize=7*this.gridItemWidth,this.gridMaxHeightOnResize=7*this.gridItemHeight,this.targetScale=1}return n.prototype.calculateStyle=function(e){var t=this.getDashboardSize(e),r=function(n,e){return e/n}(t.width,this.displayWidth);if(!(r<=0))return this.targetScale=r,this.applySizeStyle?{transform:"scale("+r+")",transformOrigin:"top left",width:t.width+"px",height:this.displayHeight/r+"px"}:{transform:"scale("+r+")",transformOrigin:"top left"}},n.prototype.getDashboardSize=function(e){var t=function(n){return _.maxBy(_.map(n,function(e){return e.layoutPosition.x-1+e.layoutPosition.width}))}(e),r=function(n){return _.maxBy(_.map(n,function(e){return e.layoutPosition.y-1+e.layoutPosition.height}))}(e);return t>this.maxColumnsToDisplay&&this.maxColumnsToDisplay>0&&(t=this.maxColumnsToDisplay+.2),t<this.minNumOfColumns&&(t=this.minNumOfColumns),{width:t*this.gridItemWidth+this.gridItemSpacing,height:r*this.gridItemHeight+this.gridItemSpacing}},n.prototype.isItemInViewport=function(e,t){if(!this.inViewportEnabled)return!0;var r=gt(this.targetScale,t);return(0,$t.p)(e,r)},n}(),sn=function(){function n(e,t){void 0===t&&(t=!1),this.displayWidth=e,this.inViewportEnabled=t,this.gridItemPadding=4,this.gridItemSpacing=10,this.tileTypeRowSpanMap={},this.visualTypeRowSpanMap={},this.gridItemWidth=this.displayWidth-this.gridItemSpacing,this.gridItemHeight=Math.round(.1111*this.gridItemWidth),this.gridMinWidthOnResize=this.gridItemWidth-10,this.gridMinHeightOnResize=this.gridItemHeight-10,this.gridMaxWidthOnResize=7*this.gridItemWidth,this.gridMaxHeightOnResize=7*this.gridItemHeight,this.tileTypeRowSpanMap[Ne.YU.report]=7,this.visualTypeRowSpanMap[ye.L.card.name]=4,this.visualTypeRowSpanMap[ye.L.animatedNumber.name]=4,this.visualTypeRowSpanMap[ye.L.textbox.name]=4}return n.prototype.transformLayout=function(e){return dt(e,1,6,this.tileTypeRowSpanMap,this.visualTypeRowSpanMap)},n.prototype.isItemInViewport=function(e,t){return!this.inViewportEnabled||(0,$t.p)(e,t)},n}(),q=l(41114),fe="PBI.Dashboard.Init",ee=q.cx[fe]=(0,q.b1)(fe),be="PBI.Dashboard.Destroy",Re=q.cx[be]=(0,q.b1)(be),Ke="PBI.Dashboard.Guard",Ge=(q.cx[Ke]=(0,q.b1)(Ke),"PBI.Dashboard.MalformedDashboardLoad"),Pt=(q.cx[Ge]=(0,q.b1)(Ge),"PBI.Dashboard.LockedTilesDisplayed"),at=q.cx[Pt]=(0,q.b1)(Pt),St="PBI.ExplorationDashboardAppBar.Action",B=(q.cx[St]=(0,q.b1)(St),"PBI.Theming.ImportTheme"),de=(q.cx[B]=(0,q.b1)(B),"PBI.Theming.ExportTheme"),Fe=(q.cx[de]=(0,q.b1)(de),"PBI.Dashboard.OpenDashboard"),Ae=q.cx[Fe]=(0,q.b1)(Fe,{shouldLogStartEnd:!0,logExpAssignment:!0}),pt="PBI.Dashboard.LoadDashboardTileVisual",Wt=q.cx[pt]=(0,q.b1)(pt),Ht="PBI.Dashboard.LoadTileVisualTimedOut",fn=q.cx[Ht]=(0,q.b1)(Ht),re="PBI.Dashboard.RegisterAndLoadResourcePackages",U=q.cx[re]=(0,q.b1)(re),F="PBI.Dashboard.OpenTile",Ce=(q.cx[F]=(0,q.b1)(F),l(76964)),Me=l(79184),ze=l(41288),je=l(8060),Qe=l(2142),Je=l(50600),Vt=l(65363),ut=l(46544),st=l(17653),pe=l(62458),vn=new o.InjectionToken("DashboardTrackAllTilesLoading"),So=function(){function n(e,t,r){this.store=e,this.globalEventBridge=t,this.trackAllTiles=r,this.objectIdsToWait=[],this.tileIdsAlreadyLoaded=[],this.timeOutMap={},this.registeredCallbacks=[],this.timedOutTiles=[],this.allTiles=[],this.tileLoadTimeoutInMilliseconds=2e4}return n.prototype.registerLoadingProgressFinalCallback=function(e,t){var r=this;pe.fF.assert(function(){return void 0===r.finalRegisteredCallback},"DashboardLoadingProgressTrackingServiceModern finalRegisteredCallback is already registered"),this.finalRegisteredCallback=e,t&&(this.tileLoadTimeoutInMilliseconds=t)},n.prototype.registerLoadingProgressCallback=function(e,t){this.registeredCallbacks.push(e),t&&(this.tileLoadTimeoutInMilliseconds=t)},n.prototype.unregisterLoadingProgressCallback=function(e){_.pull(this.registeredCallbacks,e)},n.prototype.shouldBeAwaited=function(e,t){return-1===this.objectIdsToWait.indexOf(e.objectId)&&(this.trackAllTiles?e.type===Ne.YU.composite||e.type===Ne.YU.report:(!t||-1!==t.indexOf(e.objectId))&&e.type===Ne.YU.composite&&e.tileDataSet&&e.tileDataSet.data&&!e.queryResultError)},n.prototype.startTracking=function(e){var t=this;e&&(this.unsubcribeModernTileRepeatFinishedEvent=this.globalEventBridge.createChannelSubscriptionManager().subscribe(u.z.modernDashboardTileRepeatFinished,function(r,a){return t.onDashboardTileRepeatFinishedEvent(a.ids)}),this.unsubscribeTileVisualLoadedEvent=this.globalEventBridge.createChannelSubscriptionManager().subscribe(u.z.tileVisualLoadedEventName,function(r,a){return t.onDashboardTileVisualLoadedEvent(r,a.objectId)}),this.dashboard=e,this.dashboardLoadingDeferred=new Vt.GG,this.dashboardLoadingDeferred.promise.catch(function(r){return r}))},n.prototype.cancelTracking=function(){this.dashboard&&this.completeTracking(this.dashboard,!0)},n.prototype.dashboardLoadingCompleted=function(){return this.dashboardLoadingDeferred&&this.dashboardLoadingDeferred.promise},n.prototype.onDashboardTileRepeatFinishedEvent=function(e){var t=this;this.dashboard&&(this.tileRepeatFinishedEventRaised||this.store.select(h.aS).pipe((0,he.q)(1),(0,st.b)(function(r){t.allTiles=r;for(var a=function(w){if(t.shouldBeAwaited(w,e)){var D=w.objectId;_.includes(t.tileIdsAlreadyLoaded,D)||(t.objectIdsToWait.push(D),t.cancelVisualLoadTimeout(D),t.timeOutMap[D]=setTimeout(function(){t.timeOutMap[D]&&t.timedOutTiles.push(w),t.removeTileIdFromWaitlist(D)},t.tileLoadTimeoutInMilliseconds))}},s=0,d=r;s<d.length;s++)a(d[s]);t.tileRepeatFinishedEventRaised=!0,_.isEmpty(t.objectIdsToWait)&&t.completeTracking(t.dashboard,!1)})).subscribe())},n.prototype.removeTileIdFromWaitlist=function(e){this.tileRepeatFinishedEventRaised?_.pull(this.objectIdsToWait,e):this.tileIdsAlreadyLoaded.push(e),this.tileRepeatFinishedEventRaised&&_.isEmpty(this.objectIdsToWait)&&this.completeTracking(this.dashboard,!1)},n.prototype.onDashboardTileVisualLoadedEvent=function(e,t){e.stopPropagation(),this.removeTileIdFromWaitlist(t),this.cancelVisualLoadTimeout(t)},n.prototype.cancelVisualLoadTimeout=function(e){var t=this.timeOutMap[e];t&&(clearTimeout(t),delete this.timeOutMap[e])},n.prototype.completeTracking=function(e,t){var r=this;this.unsubscribeEvents();var a={dashboard:e,tiles:this.allTiles,isCancelled:t,timedOutTiles:this.timedOutTiles};Promise.all(this.registeredCallbacks.map(function(s){return(0,M.mG)(r,void 0,void 0,function(){return(0,M.Jh)(this,function(d){switch(d.label){case 0:return[4,s(a)];case 1:return[2,d.sent()]}})})})).then(function(){r.finalRegisteredCallback&&r.finalRegisteredCallback(a)}),this.dashboardLoadingDeferred&&(t?this.dashboardLoadingDeferred.reject("cancelled"):this.dashboardLoadingDeferred.resolve(e.objectId)),this.initState()},n.prototype.initState=function(){this.objectIdsToWait=[],this.tileIdsAlreadyLoaded=[],this.timeOutMap={},this.timedOutTiles=[],this.tileRepeatFinishedEventRaised=!1,this.dashboardLoadingDeferred=null,this.dashboard=null,this.allTiles=[]},n.prototype.unsubscribeEvents=function(){this.unsubscribeTileVisualLoadedEvent&&(this.unsubscribeTileVisualLoadedEvent.unsubscribeAll(),this.unsubscribeTileVisualLoadedEvent=null),this.unsubcribeModernTileRepeatFinishedEvent&&(this.unsubcribeModernTileRepeatFinishedEvent.unsubscribeAll(),this.unsubcribeModernTileRepeatFinishedEvent=null)},n.\u0275fac=function(t){return new(t||n)(o.\u0275\u0275inject(J.yh),o.\u0275\u0275inject(bt.Z),o.\u0275\u0275inject(vn,8))},n.\u0275prov=o.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n}(),qt=l(9380),To=l(98873),Dn=l(87041),Io=l(94420),Cn=l(21976),wo=l(48482),Ci=l(86020),Jt=l(65181),xo=function(){function n(e,t,r,a,s,d,g,O,w,D,V,j){var ne=this;this.store=e,this.telemetryService=t,this.dashboardLoadingProgressTrackingService=r,this.globalEventBridge=a,this.featureSwitchService=s,this.folderService=d,this.permissionService=g,this.reportStore=O,this.userInfo=w,this.usageMetricsReport=D,this.artifactEndorsementService=V,this.localizationService=j,this.unsubcribeTileRepeatFinishedEvent=this.globalEventBridge.createChannelSubscriptionManager().subscribe(u.z.modernDashboardTileRepeatFinished,function(Z,W){ne.onDashboardTileRepeatFinishedEvent(W)})}return n.prototype.recordOpenDashboardEvent=function(e,t,r,a,s,d,g,O){var w=this;e&&(this.dashboard=e,this.store.select(h.aS).pipe((0,he.q)(1),(0,st.b)(function(D){var V=w.telemetryService.startActivity(null,Ae,{hasResourcePackages:!1,hasOnPremiseModel:w.dashboardHasOnPremModel(w.dashboard,D),compositeTilesCount:0,iframeTilesCount:0,imageTilesCount:0,modelTilesCount:0,ssrsTilesCount:0,workbookTilesCount:0,reportTilesCount:0,workbookTileNoImage:0,otherTileTypes:0,realTimeTilesCount:0,source:w.getDashboardOpenSource(),groupObjectId:r,isReadonlyGroup:s,permissions:e.permissions,usageMetricsTilesCount:0,CompoundTileTypesAndCounts:"{}",scrubUserInfo:d,isB2B:g,compositeTilesWithSystemErrorCount:0,endorsementStage:O,originalDashboardGuid:e.originalDashboardObjectId,appGuid:t,serviceAppObjectId:a,dashboardGuid:e.objectId});w.openDashboardEventCreated.resolve(V),_.isEmpty(D)&&w.resolveOpenDashboardTelemetry(D,!1)})).subscribe())},Object.defineProperty(n.prototype,"OpenDashboardEventCreated",{get:function(){return this.openDashboardEventCreated},enumerable:!1,configurable:!0}),n.prototype.getDashboardOpenSource=function(){var e=ze.s.getQueryStringValue("openDashboardSource");return e?je.ZP[e]||je.ZP.Invalid:je.ZP.Normal},n.prototype.onDashboardTileRepeatFinishedEvent=function(e){var t=this,r=e.ids;if(this.openDashboardEventCreated){var a=0;this.store.select(h.aS).pipe((0,he.q)(1),(0,st.b)(function(s){for(var d=0,g=s;d<g.length;d++){var O=g[d];-1!==r.indexOf(O.objectId)&&O.type===Ne.YU.composite&&O.queryResultError&&a++}})).subscribe(),this.openDashboardEventCreated.promise.then(function(s){t.loadDashboardTileTelemetryEvent=t.telemetryService.startChildEvent(s.event,Wt,{tileCount:a})})}},n.prototype.onDashboardLoadingCompleted=function(e){return(0,M.mG)(this,void 0,void 0,function(){var t,r,a;return(0,M.Jh)(this,function(d){switch(d.label){case 0:for(t=0,r=e.timedOutTiles;t<r.length;t++)this.telemetryService.logEvent(fn,{visualType:(a=r[t]).type===Ne.YU.composite&&a.$config&&a.$config.visualContainer.$visualContainer.config.singleVisual.visualType});return[4,this.resolveOpenDashboardTelemetry(e.tiles,e.isCancelled)];case 1:return d.sent(),this.recordLockedTilesDisplayedEvent(e.dashboard,e.tiles),[2]}})})},n.prototype.resolveOpenDashboardTelemetry=function(e,t){return(0,M.mG)(this,void 0,void 0,function(){var r;return(0,M.Jh)(this,function(a){switch(a.label){case 0:return this.openDashboardEventCreated?[4,this.countTileTypes(e)]:[2];case 1:return r=a.sent(),this.openDashboardEventCreated&&this.openDashboardEventCreated.promise.then(function(s){var d=s.event.info;d&&(d.compositeTilesWithSystemErrorCount=r.compositeWithSystemError,d.hasResourcePackages=r.hasResourcePackages,d.compositeTilesCount=r.composite,d.iframeTilesCount=r.iframe,d.imageTilesCount=r.image,d.modelTilesCount=r.model,d.ssrsTilesCount=r.ssrs,d.workbookTilesCount=r.workbook,d.reportTilesCount=r.report,d.workbookTileNoImage=r.workbookNoImage,d.otherTileTypes=r.unknown,d.realTimeTilesCount=r.realTime,d.usageMetricsTilesCount=r.usageMetrics,d.CompoundTileTypesAndCounts=JSON.stringify(r.CompoundTileTypesAndCounts),t&&(d.isCancelled=!0)),r.compositeWithSystemError>0&&r.compositeWithSystemError===r.composite?s.reject():s.resolve()}),this.loadDashboardTileTelemetryEvent&&this.loadDashboardTileTelemetryEvent.resolve(),this.openDashboardEventCreated=null,this.loadDashboardTileTelemetryEvent=null,this.dashboardLoadingProgressTrackingService.unregisterLoadingProgressCallback(this.dashboardLoadingProgressCallback),this.unsubcribeTileRepeatFinishedEvent.unsubscribeAll(),[2]}})})},n.prototype.countTileTypes=function(e){return(0,M.mG)(this,void 0,void 0,function(){var t,r,a,s;return(0,M.Jh)(this,function(d){switch(d.label){case 0:if(t={compositeWithSystemError:0,composite:0,iframe:0,image:0,model:0,realTime:0,ssrs:0,workbook:0,workbookNoImage:0,report:0,unknown:0,hasResourcePackages:!1,usageMetrics:0,CompoundTileTypesAndCounts:{}},_.isEmpty(e))return[2,t];r=0,a=e,d.label=1;case 1:return r<a.length?[4,this.incTileTypeCount(s=a[r],t)]:[3,4];case 2:d.sent(),!t.hasResourcePackages&&s&&!_.isEmpty(s.resourcePackageIds)&&(t.hasResourcePackages=!0),d.label=3;case 3:return r++,[3,1];case 4:return[2,t]}})})},n.prototype.incTileTypeCount=function(e,t){return(0,M.mG)(this,void 0,void 0,function(){var a,s;return(0,M.Jh)(this,function(d){switch(d.label){case 0:switch(e.type){case Ne.YU.composite:return[3,1];case Ne.YU.iframe:return[3,4];case Ne.YU.image:return[3,5];case Ne.YU.realTime:return[3,6];case Ne.YU.model:return[3,7];case Ne.YU.ssrs:return[3,8];case Ne.YU.workbook:return[3,9];case Ne.YU.report:return[3,10]}return[3,13];case 1:return t.composite++,e.type===Ne.YU.composite&&e.queryResultError&&(a=(0,Me.X7)(e.queryResultError,this.localizationService))&&"PowerBI"===a.source&&t.compositeWithSystemError++,e.reportId?[4,this.isUsageMetric(e.reportId)]:[3,3];case 2:d.sent()&&t.usageMetrics++,d.label=3;case 3:return s=this.getVisualType(e.$config),t.CompoundTileTypesAndCounts[s]||(t.CompoundTileTypesAndCounts[s]=0),t.CompoundTileTypesAndCounts[s]++,[3,14];case 4:return t.iframe++,[3,14];case 5:return t.image++,[3,14];case 6:return t.realTime++,[3,14];case 7:return t.model++,[3,14];case 8:return t.ssrs++,[3,14];case 9:return e.workbookId?t.workbookNoImage++:e.$config.workbookTile.images&&t.workbook++,[3,14];case 10:return t.report++,e.reportId?[4,this.isUsageMetric(e.reportId)]:[3,12];case 11:d.sent()&&t.usageMetrics++,d.label=12;case 12:return[3,14];case 13:return t.unknown++,[3,14];case 14:return[2]}})})},n.prototype.isUsageMetric=function(e){return(0,M.mG)(this,void 0,void 0,function(){var t;return(0,M.Jh)(this,function(r){switch(r.label){case 0:return[4,this.reportStore.findById(e)];case 1:return(t=r.sent())&&this.usageMetricsReport.isReportFromUsageMetrics(t)?[2,!0]:[2,!1]}})})},n.prototype.getVisualType=function(e){if(e){var t=e.visualContainer||e.realTimeVisual;return t&&t.$visualContainer?t.$visualContainer.config.singleVisual.visualType:"undefined"}},n.prototype.dashboardHasOnPremModel=function(e,t){var r,a,s=e.modelIds;if(_.isEmpty(s)||!t)return!1;for(var d={},g=0,O=t;g<O.length;g++){var w=O[g];if((null===(r=w.model)||void 0===r?void 0:r.vsName)===Qe.ly2){var D=null===(a=w.model)||void 0===a?void 0:a.id;null!=D&&(d[D]=D)}}for(var V=0,j=s;V<j.length;V++)if(d.count>0&&d[j[V]])return!0;return!1},n.prototype.recordLockedTilesDisplayedEvent=function(e,t){if(!_.isEmpty(e)&&t){var a=_.filter(t,function(s){return 20===s.errorCode});_.isEmpty(a)||this.telemetryService.logEvent(at,{dashboardObjectId:e.objectId,numberOfLockedTiles:a.length,numberOfAllTiles:t.length,objectIdsOfLockedTiles:JSON.stringify(_.map(a,function(s){return s.objectId}))})}},n.prototype.dashboardLoadingProgressTracking=function(e){var t=this;this.dashboardLoadingProgressTrackingService.cancelTracking(),!this.openDashboardEventCreated&&(this.dashboardLoadingProgressCallback=function(r){return(0,M.mG)(t,void 0,void 0,function(){return(0,M.Jh)(this,function(a){switch(a.label){case 0:return[4,this.onDashboardLoadingCompleted(r)];case 1:return a.sent(),[2]}})})},this.dashboardLoadingProgressTrackingService.registerLoadingProgressCallback(this.dashboardLoadingProgressCallback),this.dashboardLoadingProgressTrackingService.startTracking(e),this.openDashboardEventCreated=new Vt.GG,(0,R.aj)(this.featureSwitchService.featureSwitches$,this.store.select(Ce.zu)).pipe((0,he.q)(1)).subscribe(function(r){var O,a=r[0],d=_.find(r[1],function(w){return w.id===e.originalPackageId});a.trackUserInfo&&!a.usageMetricsTrackUserLevelInfoEnabled&&(O=!0),t.recordOpenDashboardTelemetry(e,a.artifactEndorsementFeatureUI,e.contentProviderId,e.appProviderKey,d&&d.serviceAppObjectId,O)}))},n.prototype.recordOpenDashboardTelemetry=function(e,t,r,a,s,d){var g=this;t&&r&&a?this.artifactEndorsementService.getArtifactEndorsement(r,a,Je.B.App,!1).pipe((0,he.q)(1)).subscribe(function(O){var w=g.artifactEndorsementService.getArtifactStageString(O.stage);g.recordOpenDashboardEvent(e,a,g.folderService.activeFolderObjectId,s,g.permissionService.isActiveWorkspaceIsReadOnlyLegacy,d,g.userInfo.isGuestUser,w)}):this.recordOpenDashboardEvent(e,a,this.folderService.activeFolderObjectId,s,this.permissionService.isActiveWorkspaceIsReadOnlyLegacy,d,this.userInfo.isGuestUser)},n.\u0275fac=function(t){return new(t||n)(o.\u0275\u0275inject(J.yh),o.\u0275\u0275inject(ut.y0),o.\u0275\u0275inject(So),o.\u0275\u0275inject(bt.Z),o.\u0275\u0275inject(qt.vZ),o.\u0275\u0275inject(To.s),o.\u0275\u0275inject(Dn.$A),o.\u0275\u0275inject(Io.R),o.\u0275\u0275inject(Cn.a),o.\u0275\u0275inject(wo.m),o.\u0275\u0275inject(Ci.n),o.\u0275\u0275inject(Jt.o))},n.\u0275prov=o.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n}(),bi=l(48117),Ao=l(3826),Eo=function(){function n(e){this.store=e}return n.prototype.connect=function(){var e=this;return this.store.select(h.aS).pipe((0,ae.U)(function(r){return e.mapTiles(r)}))},n.prototype.mapTiles=function(e){return e.map(function(t){t.$layoutConfig=(0,Me.mf)(t);var r=(0,bi.gq)(t);return{layoutPosition:{x:t.col,y:t.row,width:t.colSpan||r.width||Ao.wS,height:t.rowSpan||r.height||Ao.e_},id:t.objectId,data:{contract:t,type:t.type}}})},n}(),wt=l(60756),Do=l(90047),Dt=l(64115),yi=l(81331),ko=l(6754),bn=l(58938),Ro=l(14839),Jn=l(29866),Yn=l(69071),Pi=l(46241),Zn="[ConversationGroup] Load Report",yn="[ConversationGroup] Load Success",Bt="[ConversationGroup] Load Fail",Xn="[ConversationGroup] Select",Fo="[ConversationGroup] Select with deep link",Lo="[Annotations] Clear Store",_i=function(){return function(e){this.payload=e,this.type=yn}}(),Si=function(){return function(e){this.payload=e,this.type=Bt}}(),Pn=function(){return function(e){this.payload=e,this.type=Xn}}(),Ti=function(){return function(e){this.payload=e,this.type=Fo}}(),Ii=function(){return function(){this.type=Lo}}(),Vo="[Comment] Create",Mn="[Comment] Create Success",eo="[Comment] Create Failure",Bo="[Comment] Delete",to="[Comment] Delete Success",no="[Comment] Delete Failure",wi=function(){return function(e){this.payload=e,this.type=Vo}}(),xi=function(){return function(e){this.payload=e,this.type=Mn}}(),Ai=function(){return function(e){this.payload=e,this.type=eo}}(),Ei=function(){return function(e){this.payload=e,this.type=Bo}}(),On=function(){return function(e){this.payload=e,this.type=to}}(),Di=function(){return function(e){this.payload=e,this.type=no}}(),Uo="[Conversation] Delete (clear child comments)",oo="[Conversation] Load",kn="[Conversation] Load Failure",Rn="[Conversation] Load Success",jo="[Conversation] Remove child comment",ki=function(){return function(e){this.payload=e,this.type=Uo}}(),Ri=function(){return function(e){this.payload=e,this.type=oo}}(),Fi=function(){return function(e){this.payload=e,this.type=Rn}}(),Li=function(){return function(e){this.payload=e,this.type=kn}}(),Vi=function(){return function(e){this.payload=e,this.type=jo}}(),Tt=l(64539);function No(n,e,t,r,a,s,d){(0,Tt.hu)(function(){return null!=n},"pre-condition: commentContract != null"),(0,Tt.hu)(function(){return null!=e},"pre-condition: conversationId != null"),(0,Tt.hu)(function(){return null!=t},"pre-condition: currentUserObjectId != null"),(0,Tt.hu)(function(){return null!=r},"pre-condition: annotatedItemKey != null"),null!=d&&(0,Tt.hu)(function(){return 3===d.type},"Incorrect bookmark type. Expected to have bookmark type of type annotation");var g=n.creatorUser,O=_n(g),w=function(n){if(!_.isEmpty(n))return _.map(n,function(e){return{oid:e.oid,fullname:_n(e),userPrincipalName:e.userPrincipalName}})}(n.mentionedUsers),D=g&&g.oid,V=g&&g.userPrincipalName,j=D===t,ne=_.isNumber(a)?"".concat(a):void 0;return io((0,M.pi)({id:"".concat(n.id),conversationId:e,created:new Date(n.createdDate).toISOString(),parent:ne,createdByCurrentUser:j,hasMoreComments:s,mentionedUsers:w,supportedConversationButtons:zo(r,ne),fullname:O,content:n.body,bookmark:d,canDelete:Ni(n.permissions,1)||void 0},ro(n.isDeleted,n.body,D,V)))}var ji=function(n){return n.creatorOid="creatorOid",n.creatorPrincipalName="creatorPrincipalName",n.content="content",n.isDeleted="isDeleted",n}({});function io(n){return _.pickBy(n,function(e){return void 0!==e})}function ro(n,e,t,r){return n?{content:"",creatorOid:"",creatorPrincipalName:"",isDeleted:n}:{content:e,creatorOid:t,creatorPrincipalName:r}}function Ni(n,e){return(0,Tt.hu)(function(){return null!=e},"pre-condition: bitFlagToCheck != null"),null!=n&&(n&e)===e}function zo(n,e){if(null==e)switch(n.type){case"Tile":return["HighlightArtifact"];case"Section":case"VisualContainer":return["BookmarkArtifact"];default:return}}function _n(n){if(n){if(n.givenName)return n.familyName?"".concat(n.givenName," ").concat(n.familyName):n.givenName;if(n.familyName)return n.familyName}}var Sn=l(8894),Gt=(0,Sn.H)({selectId:function(e){return e.id},sortComparer:!1}),$o=Gt.getInitialState();function Wo(n,e,t){if(!n||n.isDeleted||_.isEmpty(n.comments))return[];var r=n.comments,a=_.head(r);return pe.fF.assertValue(a,"firstComment should be defined"),_.map(r,function(s,d){return 0===d?No(s,n.id,e,t,void 0,n.hasMoreComments,s.bookmark):(pe.fF.assert(function(){return s.id>a.id},"firstComment should always be the earliest comment"),No(s,n.id,e,t,a.id,n.hasMoreComments))})}var Yt=(0,Sn.H)({selectId:function(e){return e.id},sortComparer:!1}),Ho=Yt.getInitialState();function Go(n,e){var t={commentIds:_(e.comments).map(function(r){return"".concat(r.id)}).value(),id:e.id,annotatedItemKey:n,createDate:new Date(e.createDate)};return e.isDeleted&&(t.isDeleted=e.isDeleted),e.hasMoreComments&&(t.hasMoreComments=e.hasMoreComments),t}function nn(n){return n.type.toString()+"_"+n.id.toString()}function Ko(n,e,t){if((0,Tt.hu)(function(){return null!=e},"pre-condition: conversationId != null"),(0,Tt.hu)(function(){return null!=t},"pre-condition: commentId != null"),!_.isEmpty(n))for(var r=0,a=n;r<a.length;r++){var s=a[r],d=_.find(s.conversations,function(O){return O.id===e});if(d)return _.find(d.comments,function(O){return O.id===t})&&d&&s}}var Fn,Vn,Tn=(0,Sn.H)({selectId:function(e){return nn(e.annotatedItemKey)},sortComparer:!1}),Qo=Tn.getInitialState({ids:[],selectedConversationGroupKey:null,isLoaded:!1}),on=function(n){return n[n.Initial=0]="Initial",n[n.Error=1]="Error",n[n.CommentRetrieved=2]="CommentRetrieved",n[n.CommentNoLongerExists=3]="CommentNoLongerExists",n}({}),In={retrievalResult:on.Initial},qo="[Annotations Error] Dismiss",Xi=function(){return function(){this.type=qo}}(),ao={type:null},so={conversationGroups:Qo,conversations:Ho,comments:$o,deepLink:In,error:ao},nr={conversationGroups:function(n,e){switch(void 0===n&&(n=Qo),e.type){case yn:return function(n,e){var t=e.payload,a=t.rootArtifactObjectId,s=_.map(t.conversationGroups,function(g){return{conversationIds:_(g.conversations).filter(function(O){return!O.isDeleted}).map(function(O){return O.id}).value(),annotatedItemKey:g.annotatedItemKey}}),d=Tn.addMany(s,n);return(0,M.pi)((0,M.pi)({},d),{isLoaded:!0,rootArtifactObjectId:a})}(n,e);case Bt:return(0,M.pi)((0,M.pi)({},n),{isLoaded:!0,rootArtifactObjectId:e.payload.rootArtifactObjectId});case Xn:var t=e.payload;return(0,M.pi)((0,M.pi)({},n),{selectedConversationGroupKey:t});case Fo:var r=e.payload;return t=function(n,e,t){if(pe.fF.assertValue(t,"deepLinkCommentKey"),_.isEmpty(e))return n;var r=Ko(e,t.conversationId,t.commentId);return r?r.annotatedItemKey:n}(r.key,r.conversationGroups,r.deepLinkCommentKey),(0,M.pi)((0,M.pi)({},n),{selectedConversationGroupKey:t});case Mn:var g=e.payload,O=n.entities[nn(g.annotatedItemKey)];return O?_.includes(O.conversationIds,g.conversationId)?n:(O.conversationIds.push(g.conversationId),Tn.updateOne({id:nn(O.annotatedItemKey),changes:O},n)):Tn.addOne(O={annotatedItemKey:g.annotatedItemKey,conversationIds:[g.conversationId]},n);default:return n}},conversations:function(n,e){switch(void 0===n&&(n=Ho),e.type){case yn:for(var r=[],a=0,s=e.payload.conversationGroups;a<s.length;a++)for(var d=s[a],g=d.annotatedItemKey,O=0,w=d.conversations;O<w.length;O++)r.push(Go(g,D=w[O]));var V=Yt.updateMany(_.map(r,function(xt){return{id:xt.id,changes:xt}}),n);return Yt.addMany(r,V);case Mn:var j=e.payload,ne=j.comment,Z=j.conversationId;if(null==ne.parent)return Yt.addOne(D={id:Z,annotatedItemKey:j.annotatedItemKey,commentIds:[ne.id],createDate:new Date},n);var De=_.find(n.entities,function(xt){return _.includes(xt.commentIds,ne.parent)});return De.commentIds.push(ne.id),Yt.updateOne({id:De.id,changes:De},n);case Uo:var _e=e.payload;return Yt.updateOne({id:Z=_e.conversationId,changes:{isDeleted:!0,commentIds:[ft=_e.commentId]}},n);case jo:var Ft=e.payload,ft=Ft.commentId,It=(Z=Ft.conversationId,_.without(n.entities[Z].commentIds,ft));return Yt.updateOne({id:Z,changes:{commentIds:It}},n);case Rn:var D=Go(e.payload.annotatedItemKey,e.payload.conversation);return Yt.updateOne({id:D.id,changes:D},n);default:return n}},comments:function(n,e){switch(void 0===n&&(n=$o),e.type){case yn:for(var r=e.payload.currentUserObjectId,a=[],s=0,d=e.payload.conversationGroups;s<d.length;s++)for(var g=d[s],O=g.annotatedItemKey,w=0,D=g.conversations;w<D.length;w++){var j=Wo(D[w],r,O);a.push.apply(a,j||[])}if(_.isEmpty(a))return n;var ne=Gt.updateMany(_.map(a,function(lt){return{id:lt.id,changes:lt}}),n);return Gt.addMany(a,ne);case Mn:return Gt.addOne(e.payload.comment,n);case to:var Z=e.payload.comment,W=null==Z.parent,De=Gt.updateOne({id:Z.id,changes:Z},n);if(W){var _e=_(n.entities).filter(function(lt){return lt.parent===Z.id}).map(function(lt){return lt.id}).value();_.isEmpty(_e)||(De=Gt.removeMany(_e,De))}return De;case Rn:return function(n,e){var t=e.conversation,r=e.currentUserObjectId,a=e.successCallback;if(!t)return pe.fF.assertFail("Malformed argument: conversationActions.LoadSuccessPayload.conversation should not be falsy"),a&&a([]),n;if(t.isDeleted){var s=t.id,d=_(n.entities).filter(function(V){return V.conversationId===s}).map(function(V){return V.id}).value();return a&&a([],d),Gt.removeMany(d,n)}var g=_.head(t.comments),w=null!=g&&n.entities[g.id]?Wo(t,r,e.annotatedItemKey):[];if(a&&a(w),_.isEmpty(w))return n;var D=Gt.updateMany(_.map(w,function(V){return{id:V.id,changes:V}}),n);return Gt.addMany(w,D)}(n,e.payload);case kn:var ft=e.payload.errorCallback;return ft&&ft(),n;default:return n}},deepLink:function(n,e){var t;switch(void 0===n&&(n=In),e.type){case yn:t=function(n,e){var t=e.payload,r=t.deepLinkCommentKey;if(!r)return In;var s=Ko(t.conversationGroups,r.conversationId,r.commentId),d=s&&s.annotatedItemKey;return _.pickBy({retrievalResult:d?on.CommentRetrieved:on.CommentNoLongerExists,deepLinkCommentKey:r,matchingConversationGroupKey:d},function(O){return void 0!==O})}(0,e);break;case Bt:t=function(n,e){var t=e.payload.deepLinkCommentKey;return t?{retrievalResult:on.Error,deepLinkCommentKey:t}:In}(0,e);break;case Xn:case Rn:case kn:case Mn:case eo:case to:case no:t=In;break;default:t=n}return pe.fF.assert(function(){return t&&t.retrievalResult===on.CommentRetrieved==!!t.matchingConversationGroupKey},"post-condition: nextState.retrievalResult and nextState.matchingConversationGroupKey must be consistent"),t},error:function(n,e){switch(void 0===n&&(n=ao),e.type){case qo:return ao;case no:return(0,M.pi)((0,M.pi)({},n),{type:"Annotations_DeleteFail"});case eo:var t;return t="AnnotationsLimitReached"===e.payload.errorDetails.errorCode?e.payload.hasParent?"Annotations_CommentLimitReached":"Annotations_ConversationLimitReached":"Annotations_PostFail",(0,M.pi)((0,M.pi)({},n),{type:t});case kn:case Bt:return(0,M.pi)((0,M.pi)({},n),{type:"Annotations_LoadFail"});default:return n}}},wn=(0,J.ZF)("annotation"),Bn=(0,J.P1)(wn,function(n){return n.conversationGroups}),or=(0,J.P1)(wn,function(n){return n.conversations}),ir=(0,J.P1)(wn,function(n){return n.comments}),rr=(0,J.P1)(wn,function(n){return n.deepLink}),Jo=(0,J.P1)(wn,function(n){return n.error}),Yo=(Fn=Tn.getSelectors(Bn)).selectEntities,Un=Fn.selectAll,C=Yt.getSelectors(or).selectEntities,I=(Vn=Gt.getSelectors(ir)).selectEntities,k=Vn.selectAll,L=(0,J.P1)(Bn,function(e){return e.selectedConversationGroupKey}),G=(0,J.P1)(Bn,function(e){return e.isLoaded}),oe=((0,J.P1)(Bn,function(n){return n.rootArtifactObjectId}),l(89659)),Ee=l(70032),Mt=l(88254),ot=l(48313),Xe=l(30794),et=function(){function n(){this._tileErrorDetails=new Xe.xQ,this.tileErrors={},this.dashboardTileErrorCount=0}return n.prototype.tileErrorDetails=function(){return this._tileErrorDetails.asObservable()},n.prototype.getDashboardTileErrorCount=function(){return this.dashboardTileErrorCount},n.prototype.AddDashboardTileError=function(e,t){var r=t.message,a=this.tileErrors[r]?this.tileErrors[r].tileIds:null;a?a.indexOf(e.id)<0&&(a.push(e.id),this.dashboardTileErrorCount++):(this.tileErrors[r]={tileIds:[e.id],errorDetails:t},this.dashboardTileErrorCount++),this.tileErrors&&this._tileErrorDetails.next(this.tileErrors)},n.prototype.RemoveDashboardTileError=function(e,t){var r=t.message,a=this.tileErrors[r]?this.tileErrors[r].tileIds:null;if(!_.isEmpty(a)){var s=a.indexOf(e.id);s>=0&&(a.splice(s,1),this.dashboardTileErrorCount--,_.isEmpty(a)&&delete this.tileErrors[r])}this._tileErrorDetails.next(this.tileErrors)},n.\u0275prov=o.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac=function(t){return new(t||n)}}),n}(),Zt=function(n){function e(t,r,a,s,d){var g=n.call(this)||this;return g.elementRef=t,g.store=r,g.shellCapabilities=a,g.flyoutService=s,g.tileErrorsService=d,g.onUnpinTileMobileView=new o.EventEmitter,g.onTileInit=new o.EventEmitter,g.themeLoaded=!1,a.ensureCapabilitiesInitialized().then(function(){g.showCommentsFromDashboardSettings=a.getCapabilities().dashboardSettings.showComments}),g}return(0,M.ZT)(e,n),e.prototype.refreshViewPortSize=function(){var t;null===(t=this.tileContentComponent)||void 0===t||t.refreshViewPortSize()},e.prototype.ngOnInit=function(){this.subscribeToTile(),this.emitTileOnInit()},e.prototype.onErrorAdd=function(t){this.tileErrorsService.AddDashboardTileError(this.viewCollectionItemModel.contract,t)},e.prototype.onErrorRemove=function(t){this.tileErrorsService.RemoveDashboardTileError(this.viewCollectionItemModel.contract,t)},e.prototype.subscribeToTile=function(){var t=this;this.isSelected$=this.store.select(h.bX).pipe((0,X.R)(this.onDestroy$),(0,N.h)(function(r){return!!r}),(0,ae.U)(function(r){return r!==t.viewCollectionItemModel.contract.objectId})),this.hideBySpotlight$=this.store.select(h.JW).pipe((0,X.R)(this.onDestroy$),(0,Ee.g)(0),(0,ae.U)(function(r){return r&&!!r.length&&!_.find(r,function(a){return a&&a.objectId===t.viewCollectionItemModel.contract.objectId})})),this.showCommentTile$=this.store.select((0,J.P1)(Un,function(t){return _(t).filter(function(r){return!_.isEmpty(r.conversationIds)&&"Tile"===r.annotatedItemKey.type}).map(function(r){return r.annotatedItemKey.id}).value()})).pipe((0,X.R)(this.onDestroy$),(0,ae.U)(function(r){return r.some(function(a){return a===t.viewCollectionItemModel.contract.id})&&t.showCommentsFromDashboardSettings&&t.selectedDashboard&&t.selectedDashboard.annotationsEnabled})),this.tile$=this.store.select(h.YH({id:this.viewCollectionItemModel.contract.objectId})).pipe((0,X.R)(this.onDestroy$),(0,N.h)(function(r){return!!r}))},e.prototype.onSelectConverstations=function(){this.store.dispatch(new Pn({id:this.viewCollectionItemModel.contract.id,type:"Tile"})),this.flyoutService.expandFlyout()},e.prototype.emitTileOnInit=function(){var t=this;this.tile$.pipe((0,he.q)(1)).subscribe(function(r){return t.onTileInit.emit(r)})},e.\u0275fac=function(r){return new(r||e)(o.\u0275\u0275directiveInject(o.ElementRef),o.\u0275\u0275directiveInject(J.yh),o.\u0275\u0275directiveInject(Mt.d),o.\u0275\u0275directiveInject(ot.u),o.\u0275\u0275directiveInject(et))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["tile-new"]],viewQuery:function(r,a){var s;(1&r&&o.\u0275\u0275viewQuery(oe.h,5),2&r)&&(o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(a.tileContentComponent=s.first))},inputs:{viewCollectionItemModel:"viewCollectionItemModel",selectedDashboard:"selectedDashboard",themeName:"themeName",inEditMobileLayoutMode:"inEditMobileLayoutMode",disableInteractions:"disableInteractions",focusedTileObjId:"focusedTileObjId",tileBodyViewPort:"tileBodyViewPort",isLargeHeader:"isLargeHeader",odataFilters:"odataFilters"},outputs:{onUnpinTileMobileView:"onUnpinTileMobileView",onTileInit:"onTileInit"},features:[o.\u0275\u0275InheritDefinitionFeature],decls:5,vars:22,consts:[["data-testid","tile-content",3,"contract","isSelected","themeName","showComments","dashboard","inEditMobileLayoutMode","disableInteractions","hideBySpotlight","tileBodyViewPort","focusedTileObjId","isLargeHeader","odataFilters","onUnpinTileMobileView","onSelectConverstations","onErrorAdd","onErrorRemove"]],template:function(r,a){1&r&&(o.\u0275\u0275elementStart(0,"tile-content",0),o.\u0275\u0275listener("onUnpinTileMobileView",function(d){return a.onUnpinTileMobileView.emit(d)})("onSelectConverstations",function(){return a.onSelectConverstations()})("onErrorAdd",function(d){return a.onErrorAdd(d)})("onErrorRemove",function(d){return a.onErrorRemove(d)}),o.\u0275\u0275pipe(1,"async"),o.\u0275\u0275pipe(2,"async"),o.\u0275\u0275pipe(3,"async"),o.\u0275\u0275pipe(4,"async"),o.\u0275\u0275elementEnd()),2&r&&(o.\u0275\u0275property("contract",o.\u0275\u0275pipeBind1(1,14,a.tile$))("isSelected",o.\u0275\u0275pipeBind1(2,16,a.isSelected$))("themeName",a.themeName)("showComments",o.\u0275\u0275pipeBind1(3,18,a.showCommentTile$))("dashboard",a.selectedDashboard)("inEditMobileLayoutMode",a.inEditMobileLayoutMode)("disableInteractions",a.disableInteractions)("hideBySpotlight",o.\u0275\u0275pipeBind1(4,20,a.hideBySpotlight$))("tileBodyViewPort",a.tileBodyViewPort)("focusedTileObjId",a.focusedTileObjId)("isLargeHeader",a.isLargeHeader)("odataFilters",a.odataFilters),o.\u0275\u0275attribute("data-unique-id",a.viewCollectionItemModel.contract.objectId)("data-id",a.viewCollectionItemModel.contract.id))},dependencies:[oe.h,Pe.AsyncPipe],styles:["[_nghost-%COMP%]{height:100%;width:100%;list-style:none;position:relative;z-index:0}.tile-visual[_ngcontent-%COMP%]{height:100%;width:100%}.tileLayout[_ngcontent-%COMP%]{background-color:var(--fluent-theme-white-color, #FFF);box-sizing:border-box;height:100%;width:100%;display:flex;flex-direction:column;position:relative;cursor:pointer}.tile-body[_ngcontent-%COMP%]{top:50px;color:#fff;overflow:hidden;position:absolute;left:10px;right:10px;bottom:10px;cursor:pointer;text-align:left}.tile-body[_ngcontent-%COMP%]     iframe-tile{width:100%;height:100%}.tile-body[_ngcontent-%COMP%]     iframe-tile .iframeTile{width:100%;height:100%}.tile-body[_ngcontent-%COMP%]     iframe-tile .iframeTile iframe{width:100%;height:100%}.tile-body[_ngcontent-%COMP%]   image-tile[_ngcontent-%COMP%]{top:0;left:0;right:0;bottom:0;position:absolute}.moreOptions[_ngcontent-%COMP%]{display:block;position:absolute;height:22px;right:12px;top:15px;list-style-type:none;padding:3px;opacity:.95;z-index:2;visibility:hidden;cursor:pointer}section[_ngcontent-%COMP%]:hover   .moreOptions[_ngcontent-%COMP%]{visibility:visible}.tileLoadingPlaceholder[_ngcontent-%COMP%]{display:block;color:var(--fluent-theme-light-gray-color, #c8c8c8);top:10px;left:10px;right:10px;bottom:10px;overflow:hidden;position:absolute}.tileLoadingPlaceholder[_ngcontent-%COMP%]   .tileLoadingPlaceholderText[_ngcontent-%COMP%]{top:50%;position:absolute;margin-top:-20px;text-align:center;width:100%}.tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{padding:16px 10px 20px;box-sizing:border-box;height:50px;position:absolute;top:0;width:100%;z-index:1;transition:opacity .25s;align-items:flex-start;justify-content:flex-start}.largeHeader.tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{height:65px}.authoringDashboard[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%], .is-dynamic-layout[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{padding-top:10px;padding-left:10px;height:42px}.tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   button.commentIndicator[_ngcontent-%COMP%]{padding-left:12px;padding-right:30px;padding-bottom:16px}.tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   button.commentIndicator[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:active, .tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   button.commentIndicator[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{color:var(--neutral-secondary-alt-color3, #999999)}.tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   button.commentIndicator[_ngcontent-%COMP%]:focus{outline-color:transparent}html[data-focus-source=key][_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   button.commentIndicator[_ngcontent-%COMP%]:focus   .glyphicon[_ngcontent-%COMP%]{box-shadow:var(--focus-box-shadow-definition, 0 0 0 4px) var(--focus-box-shadow-white-color, #FFFFFF)!important;border:var(--focus-outline-definition, 2.5px solid) var(--focus-box-shadow-color, #000000)!important}.tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-of-type:not(.commentIndicator){padding-right:15px}.tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]{cursor:pointer;width:100%;min-width:0;flex:1 1 auto;display:inline-flex;padding-right:30px}.tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]   .headerTitleWrapper[_ngcontent-%COMP%]{max-width:100%}.tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{max-width:85%;flex:0 0 auto}.tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .displayText[_ngcontent-%COMP%]{font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif;font-size:15px;color:var(--neutral-primary-color, #333333);overflow:hidden;white-space:nowrap;text-overflow:ellipsis;height:20px;line-height:16px}.largeHeader.tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .displayText[_ngcontent-%COMP%]{height:22px;font-size:17px;padding-bottom:5px;padding-top:4px}.tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .subDisplayTextWrapper[_ngcontent-%COMP%]{justify-content:flex-start}.tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .subDisplayTextWrapper[_ngcontent-%COMP%]   .subDisplayText[_ngcontent-%COMP%]{font-family:wf_standard-font,helvetica,arial,sans-serif;font-size:12px;color:var(--neutral-secondary-color, #666666);overflow:hidden;white-space:nowrap;text-overflow:ellipsis;height:20px;text-transform:uppercase;letter-spacing:.5px;margin-right:10px;max-width:100%;line-height:12px}.largeHeader[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .subDisplayTextWrapper[_ngcontent-%COMP%]   .subDisplayText[_ngcontent-%COMP%]{height:22px;font-size:12px}.tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .subDisplayTextWrapper[_ngcontent-%COMP%]   .subDisplayText[_ngcontent-%COMP%]:empty{margin-right:0}.baseTile[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:var(--neutral-secondary-alt-color3, #999999);background-color:transparent;padding:3px;border:none;box-sizing:border-box;vertical-align:top}.baseTile[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active:hover{background-color:transparent}.baseTile[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:focus{background-color:transparent}.baseTile[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding:0;margin:0}license-blocker[_ngcontent-%COMP%], license-environment-blocker[_ngcontent-%COMP%]{position:relative;top:0;z-index:2;width:100%;height:100%}license-banner[_ngcontent-%COMP%]{position:absolute;top:4px;right:4px;z-index:3;width:calc(100% - 4px);height:32px;pointer-events:none}.hideSpotlight[_ngcontent-%COMP%]{opacity:.45;pointer-events:none;transition:none}"]}),e}(f.w),Nt=l(42594),rn=function(){function n(e,t,r,a,s){this.strategy=e,this.collectionUpdateCallback=t,this.gravityEnabled=r,this.gridSizeService=a,this.parentContainer=s,this.currentFocusId=null,this.flatItems=[],this.placeholder=null,this.offset=null,this.maxHeightPerColumn={}}return Object.defineProperty(n.prototype,"containerHeight",{get:function(){return this.gridSizeService?this.gridSizeService.containerHeight:this._containerHeight},set:function(t){this._containerHeight=t,this.gridSizeService&&(this.gridSizeService.containerHeight=t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"containerWidth",{get:function(){return this.gridSizeService?this.gridSizeService.containerWidth:this._containerWidth},set:function(t){this._containerWidth=t,this.gridSizeService&&(this.gridSizeService.containerWidth=t)},enumerable:!1,configurable:!0}),n.prototype.getHeight=function(){return this.containerHeight},n.prototype.getChangedItems=function(){return this.flatItems.map(function(e){return(0,M.pi)((0,M.pi)({},e.gridItem),{layoutPosition:e.currentLayoutPosition})})},n.prototype.getWidth=function(){return this.containerWidth},n.prototype.addGridLayoutItem=function(e){this.currentFocusId===e.gridItem.id&&(e.isDragging=!0),this.flatItems.push(e),this.triggerCollectionChanged()},n.prototype.triggerCollectionChanged=function(){this.collectionUpdateCallback&&this.collectionUpdateCallback()},n.prototype.removeItem=function(e){var t=this.flatItems.findIndex(function(r){return r===e});t>=0&&(this.flatItems.splice(t,1),this.triggerCollectionChanged())},n.prototype.setPlaceholder=function(e){var t;this.placeholder=e,null===(t=this.placeholder)||void 0===t||t.calculateLayout()},n.prototype.calculateWithOffset=function(e,t){var r;null===(r=this.placeholder)||void 0===r||r.move(e,t,!0),this.calculateLayout()},n.prototype.calculateWithGrigOffset=function(e,t,r){var a,s;void 0===r&&(r=!1),null===(a=this.placeholder)||void 0===a||a.moveByGrid(e,t),null===(s=this.placeholder)||void 0===s||s.snapToGrid(),this.calculateLayout(r)},n.prototype.calculateGridOnResize=function(e,t){var r;null===(r=this.placeholder)||void 0===r||r.resize(e,t,!0),this.calculateLayout()},n.prototype.calculateGridOnKeyboardResize=function(e,t,r){var a;void 0===r&&(r=!1),null===(a=this.placeholder)||void 0===a||a.resize(e,t),this.calculateLayout(r)},n.prototype.snapItemsToGrid=function(){this.flatItems.forEach(function(e){e.snapToGrid()})},n.prototype.shouldLoadItems=function(e){var t=this;this.offset=e,this.flatItems.forEach(function(r){t.setItemsInViewPort(r)})},n.prototype.setItemsInViewPort=function(e){e.isInViewPort=e.isInViewPort||this.strategy.isItemInViewport(e,this.offset)},n.prototype.calculateLayout=function(e){var t,r;if(void 0===e&&(e=!1),0!==this.flatItems.length){this.maxHeightPerColumn={},this.containerHeight=this.containerWidth=0;var a=this.flatItems.filter(function(Ot){return Ot.isNew()}),s=this.flatItems.filter(function(Ot){return!Ot.isDragging&&!Ot.isMovingWithKeyboard&&!Ot.isNew()}).reduce(function(Ot,qn){var Oo=qn.getGridLayout();return Ot[Oo.y]=Ot[Oo.y]||[],Ot[Oo.y].push(qn),Ot},{}),d=Object.keys(s).map(function(Ot){return Number(Ot)}),g=null===(t=this.placeholder)||void 0===t?void 0:t.getGridLayout();d.sort(function(Ot,qn){return Ot-qn});for(var O=!1,w=0,D=d;w<D.length;w++)for(var ne=0,Z=s[D[w]];ne<Z.length;ne++){var W=Z[ne],De=W.currentLayoutPosition,_e=this.getOffsetFromHit(De,g);if(_e>0)W.moveByGrid(0,_e),O=!0,e&&(W.snapToGrid(),W.calculateLayout());else{if(this.gravityEnabled){var ft=this.getTopOfColumn(W),lt=Object.assign({},De,{y:ft}),Ft=this.getOffsetFromHit(lt,g);O=O||Ft>0,W.top=(ft+Ft-1)*this.strategy.gridItemHeight,W.snapToGrid()}W.calculateLayout()}W.render(),this.updateMaxHeightPerColumn(W),this.setItemsInViewPort(W),this.updateContainerSize(W)}for(var vt=!1,It=0,xt=a;It<xt.length;It++){var Ut=xt[It];if(vt=!0,0===Object.keys(this.maxHeightPerColumn).map(function(Ot){return Number(Ot)}).length)Ut.currentLayoutPosition.x=1,Ut.currentLayoutPosition.y=1;else{var mi=this.calculateDefaultPosition(Ut);Ut.currentLayoutPosition.x=mi.x,Ut.currentLayoutPosition.y=mi.y}Ut.calculateLayout(),Ut.render(),this.updateMaxHeightPerColumn(Ut),this.setItemsInViewPort(Ut),this.updateContainerSize(Ut)}if(!O&&(this.stickPlaceholderIfGravity(),null===(r=this.placeholder)||void 0===r||r.renderToGrid(),this.gravityEnabled&&e&&this.placeholder)){var Mo=this.flatItems.find(function(Ot){return Ot.isDragging||Ot.isMovingWithKeyboard});Mo.currentLayoutPosition=(0,M.pi)({},this.placeholder.getGridLayout()),Mo.calculateLayout(),Mo.render()}return vt}},n.prototype.stickPlaceholderIfGravity=function(){if(this.placeholder&&this.gravityEnabled){var t=this.flatItems.find(function(g){return g.isDragging||g.isMovingWithKeyboard}).getGridLayout(),r=t.x;if(!this.maxHeightPerColumn[r]||this.maxHeightPerColumn[r]<=t.y){var d=this.getTopOfColumn(this.placeholder);this.placeholder.top=(d-1)*this.strategy.gridItemHeight}}},n.prototype.getTopOfColumn=function(e){for(var t=e.getGridLayout(),r=1,a=t.x,s=t.x+t.width;a<s;++a){var d=this.maxHeightPerColumn[a];d>r&&(r=d)}return r},n.prototype.calculateDefaultPosition=function(e){for(var t=e.currentLayoutPosition,r=1,a=Number.MAX_VALUE,s=1,d=Math.max(Nt.u,t.width)-t.width+1;s<=d;++s){for(var g=0,O=s,w=s+t.width;O<w;++O){var D=this.maxHeightPerColumn[O]||1;D>g&&(g=D)}g<a&&(a=g,r=s)}return{x:r,y:a}},n.prototype.getOffsetFromHit=function(e,t){var r=this;if(!t)return 0;var a=e,d=(0,$t.H)(a,t),g=function(D){for(var V=D,j=0,ne=V.x;ne<V.x+V.width;ne++)j=Math.max(j,r.maxHeightPerColumn[ne]||0);return Math.max(j-V.y,0)}(a);return 0===d&&t.y>=a.y+a.height?0:Math.max(d>0&&t.height>=d?t.y+t.height-a.y:d,g)},n.prototype.updateMaxHeightPerColumn=function(e){for(var t=e.getGridLayout(),r=t.y+t.height,a=t.x;a<t.x+t.width;a++)this.maxHeightPerColumn[a]=Math.max(this.maxHeightPerColumn[a]||1,r)},n.prototype.updateContainerSize=function(e){var t=e.top+e.height,r=e.left+e.width;t>this.containerHeight&&(this.containerHeight=t),r>this.containerWidth&&(this.containerWidth=r)},n}(),hn=function(){function n(e,t,r){this.gridItem=e,this.gridLayoutContainer=t,this.element=r,this.left=0,this.top=0,this.isInViewPort=!1,this.prevWidth=0,this.prevHeight=0;var a=t.strategy;this.minHeight=a.gridItemHeight,this.minWidth=a.gridItemWidth,this.gridMaxHeightOnResize=a.gridMaxHeightOnResize,this.gridMaxWidthOnResize=a.gridMaxWidthOnResize,this.isStrictWidth=a.isStrictWidth,this.currentLayoutPosition=(0,M.pi)({},e.layoutPosition)}return Object.defineProperty(n.prototype,"displayCol",{get:function(){return this.getLayoutPosition().x||1},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"displayRow",{get:function(){return this.getLayoutPosition().y||1},enumerable:!1,configurable:!0}),n.prototype.calculateLayout=function(){this.left=(this.displayCol-1)*this.minWidth,this.top=(this.displayRow-1)*this.minHeight,this.width=this.getLayoutPosition().width*this.minWidth,this.height=this.getLayoutPosition().height*this.minHeight},n.prototype.move=function(e,t,r){void 0===r&&(r=!1),this.left+e>=0&&this.enableMoveRight(e)&&(this.left+=e),this.top+t>=0&&(this.top+=t),r?this.renderToGrid():this.render()},n.prototype.moveByGrid=function(e,t){var a=(this.displayRow-1)*this.minHeight+t*this.minHeight;this.left=Math.max(0,(this.displayCol-1)*this.minWidth+e*this.minWidth),this.top=Math.max(0,a),this.render()},n.prototype.resize=function(e,t,r){void 0===r&&(r=!1),this.width+e>=this.minWidth&&this.enableMoveRight(e)&&(this.width+=e),this.height+t>=this.minHeight&&this.enableResizeHeight(t)&&(this.height+=t),r?this.renderToGrid():this.render()},n.prototype.onResizeMove=function(e,t){e+this.width<260||t+this.height<180||(this.width+=e,this.height+=t)},n.prototype.getLayoutPosition=function(){return this.currentLayoutPosition},n.prototype.getGridHeight=function(){return this.gridLayoutContainer.getHeight()},n.prototype.getGridWidth=function(){return this.gridLayoutContainer.getWidth()},n.prototype.getAlignedLeft=function(){return Math.round(this.left/this.minWidth)*this.minWidth},n.prototype.getAlignedTop=function(){return Math.round(this.top/this.minHeight)*this.minHeight},n.prototype.getAlignedWidth=function(){return Math.max(Math.round(this.width/this.minWidth),1)*this.minWidth},n.prototype.getAlignedHeight=function(){return Math.max(Math.round(this.height/this.minHeight),1)*this.minHeight},n.prototype.snapToGrid=function(){this.currentLayoutPosition=this.getGridLayout(),this.calculateLayout(),this.render()},n.prototype.isNew=function(){return void 0===this.currentLayoutPosition.x||void 0===this.currentLayoutPosition.y},n.prototype.getGridLayout=function(){return{x:Math.round(this.left/this.minWidth)+1,y:Math.round(this.top/this.minHeight)+1,width:Math.max(Math.round(this.width/this.minWidth),1),height:Math.max(Math.round(this.height/this.minHeight),1)}},n.prototype.render=function(){var e=this.element.style;e.webkitTransform=e.transform="translate("+this.left+"px, "+this.top+"px)",this.width!==this.prevWidth&&(e.width=this.width+"px",this.prevWidth=this.width),this.height!==this.prevHeight&&(e.height=this.height+"px",this.prevHeight=this.height)},n.prototype.renderToGrid=function(){var e=this.element.style;e.webkitTransform=e.transform="translate("+this.getAlignedLeft()+"px, "+this.getAlignedTop()+"px)",this.width!==this.prevWidth&&(e.width=this.getAlignedWidth()+"px",this.prevWidth=this.width),this.height!==this.prevHeight&&(e.height=this.getAlignedHeight()+"px",this.prevHeight=this.height)},n.prototype.getVerticalOffset=function(){return(this.displayRow-1)*this.minHeight-this.top},n.prototype.enableMoveRight=function(e){return!this.isStrictWidth||this.left+this.width+e<this.gridMaxWidthOnResize},n.prototype.enableResizeHeight=function(e){return!this.gridMaxHeightOnResize||this.height+e<this.gridMaxHeightOnResize},n}(),lo=l(33554),jn=function(){function n(){this.viewPortChanges=new Xe.xQ}return Object.defineProperty(n.prototype,"strategy",{get:function(){return this.layoutStrategy},set:function(t){this.layoutStrategy=t},enumerable:!1,configurable:!0}),n.\u0275prov=o.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac=function(t){return new(t||n)}}),n}(),co=function(){function n(e){this.elementRef=e,this.readonly=!1,this.sizeAndPosChanged=new o.EventEmitter,this.sizeChanging=new o.EventEmitter,this.moveStarted=new o.EventEmitter,this.moveEnded=new o.EventEmitter,this.onClick=new o.EventEmitter,this.noPropagateClickClass="no-propagate-click"}return n.prototype.ngOnInit=function(){this.gridLayoutItem=new hn(this.gridItem,this.container,this.elementRef.nativeElement),this.container.addGridLayoutItem(this.gridLayoutItem),this.gridLayoutItem.isNew()||(this.gridLayoutItem.calculateLayout(),this.container.setItemsInViewPort(this.gridLayoutItem),this.gridLayoutItem.render())},n.prototype.onFocus=function(e){e.stopImmediatePropagation(),!this.readonly&&(this.gridLayoutItem.isMovingWithKeyboard=!0,this.container.currentFocusId=this.gridLayoutItem.gridItem.id,this.moveStarted.emit(this.getUpdateGridItem()))},n.prototype.onFocusout=function(e){this.gridLayoutItem.isMovingWithKeyboard&&(e.stopImmediatePropagation(),!this.readonly&&(this.gridLayoutItem.isMovingWithKeyboard=!1,this.container.currentFocusId=null,this.moveEnded.emit()))},n.prototype.onKeydownHandler=function(e){if(this.gridLayoutItem.isMovingWithKeyboard){var t={x:0,y:0};switch(e.key){case"ArrowDown":t.y+=1;break;case"ArrowUp":t.y-=1;break;case"ArrowLeft":t.x-=1;break;case"ArrowRight":t.x+=1;break;default:return}this.gridLayoutItem.moveByGrid(t.x,t.y),this.container.calculateWithGrigOffset(t.x,t.y,!0),this.gridLayoutItem.snapToGrid(),this.sizeAndPosChanged.emit(this.getUpdateGridItem())}},n.prototype.keyboardResize=function(e){if(this.gridLayoutItem.isMovingWithKeyboard){var t={height:0,width:0};switch(e.key){case"ArrowDown":t.height+=180;break;case"ArrowUp":t.height-=180;break;case"ArrowLeft":t.width-=260;break;case"ArrowRight":t.width+=260;break;default:return}this.gridLayoutItem.onResizeMove(t.width,t.height),this.gridLayoutItem.snapToGrid(),this.container.calculateGridOnKeyboardResize(t.width,t.height,!0),this.sizeAndPosChanged.emit(this.getUpdateGridItem())}},n.prototype.ngAfterViewInit=function(){var t,e=this,r=this.elementRef.nativeElement,s="mobile-custom-layout-strategy"===this.container.strategy.className?null:null===(t=this.container.parentContainer)||void 0===t?void 0:t.nativeElement.querySelector(".gridLayoutContainer");if(this.readonly)this.clickInteractable=interact(r).on("click",this.onClickHandler.bind(this));else if(this.dragInteractable=interact(r).styleCursor(!1).ignoreFrom("[draggable=true], [drag-resize-disabled=true]").draggable({inertia:!1,autoScroll:{enabled:!!s,container:s},onstart:function(D){r.classList.add(e.noPropagateClickClass),e.gridLayoutItem.isDragging=!0,e.moveStarted.emit(e.getUpdateGridItem()),e.container.maxHeightPerColumn={}},onmove:function(D){e.gridLayoutItem.move(D.dx,D.dy),e.container.calculateWithOffset(D.dx,D.dy)},onend:function(D){e.gridLayoutItem.isDragging=!1,e.snapToGrid(),e.sizeAndPosChanged.emit(e.getUpdateGridItem()),e.moveEnded.emit()}}),s&&this.dragInteractable.restrict({drag:s}),this.dragInteractable.on("click",this.onClickHandler.bind(this)),this.resizeInteractable=interact(".resizeHandle",{context:r}).styleCursor(!1).ignoreFrom("[draggable=true], [drag-resize-disabled=true]").draggable({onstart:function(D){r.classList.add(e.noPropagateClickClass),e.gridLayoutItem.isDragging=!0,e.moveStarted.emit(e.getUpdateGridItem()),e.container.maxHeightPerColumn={}},onmove:function(D){e.gridLayoutItem.resize(D.dx,D.dy),e.container.calculateGridOnResize(D.dx,D.dy),e.sizeChanging.emit(e.getUpdateGridItem())},onend:function(){e.gridLayoutItem.isDragging=!1,e.snapToGrid(),e.sizeAndPosChanged.emit(e.getUpdateGridItem()),e.moveEnded.emit()}}),s){var g=0,O=0;this.autoScrollHandler=function(){var w=s.scrollTop||0,D=s.scrollLeft||0,V=D-O,j=w-g;(0!==V||0!==j)&&e.gridLayoutItem.isDragging&&(e.gridLayoutItem.move(V,j),e.container.calculateWithOffset(V,j)),g=w,O=D},this.scrollContainerInteractable=interact(s),this.scrollContainerInteractable.on("scroll",this.autoScrollHandler)}},n.prototype.onClickHandler=function(e){var t=this.elementRef.nativeElement;t.classList&&t.classList.contains(this.noPropagateClickClass)?t.classList.remove(this.noPropagateClickClass):this.onClick.emit(this.getUpdateGridItem())},n.prototype.snapToGrid=function(){this.container.snapItemsToGrid()},n.prototype.getUpdateGridItem=function(){return(0,M.pi)((0,M.pi)({},this.gridLayoutItem.gridItem),{layoutPosition:this.gridLayoutItem.currentLayoutPosition})},n.prototype.ngOnDestroy=function(){this.clickInteractable&&this.clickInteractable.unset(),this.dragInteractable&&this.dragInteractable.unset(),this.resizeInteractable&&this.resizeInteractable.unset(),this.scrollContainerInteractable&&(this.scrollContainerInteractable.unset(),this.scrollContainerInteractable.off("scroll",this.autoScrollHandler)),this.container.removeItem(this.gridLayoutItem)},n.\u0275fac=function(t){return new(t||n)(o.\u0275\u0275directiveInject(o.ElementRef))},n.\u0275dir=o.\u0275\u0275defineDirective({type:n,selectors:[["","pbi-grid-item",""]],hostBindings:function(t,r){1&t&&o.\u0275\u0275listener("focusin",function(s){return r.onFocus(s)})("focusout",function(s){return r.onFocusout(s)})("keydown.arrowup",function(s){return r.onKeydownHandler(s)},!1,o.\u0275\u0275resolveWindow)("keydown.arrowdown",function(s){return r.onKeydownHandler(s)},!1,o.\u0275\u0275resolveWindow)("keydown.arrowleft",function(s){return r.onKeydownHandler(s)},!1,o.\u0275\u0275resolveWindow)("keydown.arrowright",function(s){return r.onKeydownHandler(s)},!1,o.\u0275\u0275resolveWindow)("keydown.control.shift.arrowup",function(s){return r.keyboardResize(s)},!1,o.\u0275\u0275resolveWindow)("keydown.control.shift.arrowdown",function(s){return r.keyboardResize(s)},!1,o.\u0275\u0275resolveWindow)("keydown.control.shift.arrowleft",function(s){return r.keyboardResize(s)},!1,o.\u0275\u0275resolveWindow)("keydown.control.shift.arrowright",function(s){return r.keyboardResize(s)},!1,o.\u0275\u0275resolveWindow)},inputs:{readonly:"readonly",container:"container",gridItem:"gridItem"},outputs:{sizeAndPosChanged:"sizeAndPosChanged",sizeChanging:"sizeChanging",moveStarted:"moveStarted",moveEnded:"moveEnded",onClick:"onClick"}}),n}(),po=["gridPlaceholder"];function uo(n,e){if(1&n&&(o.\u0275\u0275elementStart(0,"li",6)(1,"div")(2,"P"),o.\u0275\u0275text(3,"Coordinates: "),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(4,"p"),o.\u0275\u0275text(5),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(6,"P"),o.\u0275\u0275text(7),o.\u0275\u0275elementEnd()()()),2&n){var t=o.\u0275\u0275nextContext();o.\u0275\u0275advance(5),o.\u0275\u0275textInterpolate2("TOP: ",t.currentTop,", Y: ",t.currentY,""),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate2("LEFT: ",t.currentLeft,", X: ",t.currentX,"")}}function ho(n,e){}var ar=function(e){return{item:e}};function sr(n,e){if(1&n&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275template(1,ho,0,0,"ng-template",10),o.\u0275\u0275elementContainerEnd()),2&n){var t=o.\u0275\u0275nextContext().$implicit,r=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("ngTemplateOutlet",r.itemTemplate)("ngTemplateOutletContext",o.\u0275\u0275pureFunction1(2,ar,t.data))}}function lr(n,e){1&n&&(o.\u0275\u0275elementStart(0,"div",11),o.\u0275\u0275element(1,"div",12),o.\u0275\u0275elementEnd())}var cr=function(e,t,r){return{selected:e,animated:t,"disable-events":r}};function dr(n,e){if(1&n){var t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"li",7),o.\u0275\u0275listener("sizeAndPosChanged",function(d){o.\u0275\u0275restoreView(t);var g=o.\u0275\u0275nextContext();return o.\u0275\u0275resetView(g.onSizeAndPosChanged(d))})("sizeChanging",function(d){o.\u0275\u0275restoreView(t);var g=o.\u0275\u0275nextContext();return o.\u0275\u0275resetView(g.onSizeChanging(d))})("moveStarted",function(d){o.\u0275\u0275restoreView(t);var g=o.\u0275\u0275nextContext();return o.\u0275\u0275resetView(g.onMoveStarted(d))})("onClick",function(d){o.\u0275\u0275restoreView(t);var g=o.\u0275\u0275nextContext();return o.\u0275\u0275resetView(g.onClick(d))})("moveEnded",function(){o.\u0275\u0275restoreView(t);var d=o.\u0275\u0275nextContext();return o.\u0275\u0275resetView(d.onMoveEnded())})("focus",function(){var g=o.\u0275\u0275restoreView(t).$implicit,O=o.\u0275\u0275nextContext();return o.\u0275\u0275resetView(O.onFocusGetId(g.id))})("focusout",function(){o.\u0275\u0275restoreView(t);var d=o.\u0275\u0275nextContext();return o.\u0275\u0275resetView(d.onFocusGetId(void 0))}),o.\u0275\u0275template(2,sr,2,4,"ng-container",8),o.\u0275\u0275template(3,lr,2,0,"div",9),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerEnd()}if(2&n){var r=e.$implicit,a=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275propertyInterpolate("tabindex",a.getTabindex(r)),o.\u0275\u0275property("ngClass",o.\u0275\u0275pureFunction3(8,cr,(null==a.gridPlaceHolderLayoutItem||null==a.gridPlaceHolderLayoutItem.gridItem?null:a.gridPlaceHolderLayoutItem.gridItem.id)===r.id,!!a.gridPlaceHolderLayoutItem&&a.gridPlaceHolderLayoutItem.gridItem.id!==r.id,a.gridPlaceHolderLayoutItem))("container",a.container)("gridItem",r)("readonly",a.readonly),o.\u0275\u0275attribute("data-grid-item-id",r.id),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",a.isInViewport(r.id)),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!a.readonly)}}var Zo=function(){function n(e,t,r){var a=this;this.ref=e,this.elementRef=t,this.gridSizeService=r,this.collectionChangedDebounceTimeMS=100,this.gridStrategyClass="",this.gridItemPadding="5px",this.gridCollectionChangedSubject=new lo.t,this.gridCollectionChanged$=this.gridCollectionChangedSubject.asObservable(),this.subs=new b.w,this.showPlaceHolder=!0,this.readonly=!1,this.disableKeyboardNav=!1,this.isDebugMode=!1,this.debugNode=null,this._layoutStrategy=new Nt.Q_,this.dataSourceChange=0,this.sizeAndPosChanged=new o.EventEmitter,this.sizeChanging=new o.EventEmitter,this.onGridItemClick=new o.EventEmitter,this.onItemsInit=new o.EventEmitter,this.onFocus=new o.EventEmitter,this.trackTilesBy=function(s,d){var g,O,w,D;return d?a.trackTilesByLayoutPosition?"".concat(a.dataSourceChange,"-").concat(d.id,"-").concat(null===(g=d.layoutPosition)||void 0===g?void 0:g.x,"-").concat(null===(O=d.layoutPosition)||void 0===O?void 0:O.y,"-").concat(null===(w=d.layoutPosition)||void 0===w?void 0:w.height,"-").concat(null===(D=d.layoutPosition)||void 0===D?void 0:D.width):"".concat(a.dataSourceChange,"-").concat(d.id):"".concat(a.dataSourceChange)}}return Object.defineProperty(n.prototype,"isGravityEnabled",{get:function(){return this._isGravityEnabled},set:function(t){this.container&&(this._isGravityEnabled=t,this.container.gravityEnabled=t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"layoutStrategy",{get:function(){return this._layoutStrategy},set:function(t){this._layoutStrategy!==t&&this.switchLayoutStrategy(t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dataSource",{get:function(){return this._dataSource},set:function(t){this._dataSource!==t&&this.switchDataSource(t)},enumerable:!1,configurable:!0}),n.prototype.ngOnInit=function(){var e=this;this.container=new rn(this._layoutStrategy,function(){return e.onGridItemCollectionChanged()},this.isGravityEnabled,this.gridSizeService,this.elementRef),this.gridSizeService&&this.subs.add(this.gridSizeService.viewPortChanges.subscribe(function(t){e.viewportChanged(t)}))},n.prototype.onSizeAndPosChanged=function(e){this.container&&this.sizeAndPosChanged.emit(this.container.getChangedItems())},n.prototype.getTabindex=function(e){var t,r;if(this.disableKeyboardNav)return 0;var a=null===(r=null===(t=this.container)||void 0===t?void 0:t.flatItems)||void 0===r?void 0:r.find(function(d){return d.gridItem.id===e.id});if(!a)return 1;var s=a.currentLayoutPosition;return 100*(s.y||1)+(s.x||1)},n.prototype.onSizeChanging=function(e){this.sizeChanging.emit(e)},n.prototype.switchDataSource=function(e){var r,t=this;this._dataSource=e,r=this._dataSource?function(n){return"connect"in n}(this._dataSource)?this._dataSource.connect():(0,K.of)(this._dataSource):(0,K.of)([]),this.items$=this._layoutStrategy.transformLayout?r.pipe((0,ae.U)(function(a){return t._layoutStrategy.transformLayout(a)})):r,this.gridStyles$=this._layoutStrategy.calculateStyle?r.pipe((0,ae.U)(function(a){return t._layoutStrategy.calculateStyle(a)})):(0,K.of)(void 0),this.container=new rn(this._layoutStrategy,function(){return t.onGridItemCollectionChanged()},this.isGravityEnabled,this.gridSizeService,this.elementRef),this.container.offset=this.viewPort,this.dataSourceChange++},n.prototype.onGridItemCollectionChanged=function(){this.gridCollectionChangedSubject.next()},n.prototype.switchLayoutStrategy=function(e){var t;this._layoutStrategy=e||new Nt.Q_,this.gridStrategyClass=null!==(t=this._layoutStrategy.className)&&void 0!==t?t:"",this.gridItemPadding=this._layoutStrategy.gridItemPadding+"px",this.gridSizeService.strategy=this._layoutStrategy,this.refreshGrid()},n.prototype.refreshGrid=function(){this.releasePlaceholder(),this.switchDataSource(this._dataSource)},n.prototype.onMoveStarted=function(e){this.gridPlaceHolderLayoutItem=new hn({id:e.id,data:{},layoutPosition:(0,M.pi)({},e.layoutPosition)},this.container,this.gridPlaceholder.nativeElement),this.container.setPlaceholder(this.gridPlaceHolderLayoutItem),this.gridPlaceHolderLayoutItem.calculateLayout(),this.isDebugMode&&(this.debugNode=this.container.flatItems.find(function(t){return t.isDragging}))},n.prototype.onMoveEnded=function(){this.releasePlaceholder(),this.container.calculateLayout()},n.prototype.debugMouseMove=function(){var e,t,r;this.currentTop=Math.round((null===(e=this.debugNode)||void 0===e?void 0:e.top)||0),this.currentLeft=Math.round((null===(t=this.debugNode)||void 0===t?void 0:t.left)||0);var a=null===(r=this.debugNode)||void 0===r?void 0:r.getGridLayout();this.currentX=a?.x||0,this.currentY=a?.y||0,this.ref.markForCheck()},n.prototype.ngAfterViewInit=function(){var t,e=this;this.isDebugMode&&this.elementRef.nativeElement.addEventListener("mousemove",function(){return e.debugMouseMove()}),null===(t=this.container)||void 0===t||t.calculateLayout();var r=this.container.flatItems.filter(function(a){return a.isInViewPort}).map(function(a){return a.gridItem.id});this.onItemsInit.emit(r),this.subs.add(this.gridCollectionChanged$.pipe((0,ko.b)(this.collectionChangedDebounceTimeMS)).subscribe(function(){var a;e.gridPlaceHolderLayoutItem&&e.releasePlaceholder(),(null===(a=e.container)||void 0===a?void 0:a.calculateLayout())&&e.container&&e.sizeAndPosChanged.emit(e.container.getChangedItems()),e.container.currentFocusId&&e.onFocusGetId(e.container.currentFocusId),e.ref.markForCheck()}))},n.prototype.onFocusGetId=function(e){this.showPlaceHolder=!e,this.onFocus.emit(e)},n.prototype.onClick=function(e){this.onGridItemClick.emit(e)},n.prototype.ngOnDestroy=function(){this.subs.unsubscribe()},n.prototype.releasePlaceholder=function(){var e;this.gridPlaceHolderLayoutItem=null,null===(e=this.container)||void 0===e||e.setPlaceholder(null)},n.prototype.viewportChanged=function(e){var t;this.viewPort=e,null===(t=this.container)||void 0===t||t.shouldLoadItems(e),this.ref.markForCheck()},n.prototype.isInViewport=function(e){var t;return null===(t=this.container.flatItems.find(function(r){return r.gridItem.id===e}))||void 0===t?void 0:t.isInViewPort},n.\u0275fac=function(t){return new(t||n)(o.\u0275\u0275directiveInject(o.ChangeDetectorRef),o.\u0275\u0275directiveInject(o.ElementRef),o.\u0275\u0275directiveInject(jn,8))},n.\u0275cmp=o.\u0275\u0275defineComponent({type:n,selectors:[["pbi-grid"]],contentQueries:function(t,r,a){var s;(1&t&&o.\u0275\u0275contentQuery(a,o.TemplateRef,5),2&t)&&(o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(r.itemTemplate=s.first))},viewQuery:function(t,r){var a;(1&t&&o.\u0275\u0275viewQuery(po,5),2&t)&&(o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(r.gridPlaceholder=a.first))},hostVars:2,hostBindings:function(t,r){2&t&&o.\u0275\u0275styleProp("--grid-item-padding",r.gridItemPadding)},inputs:{readonly:"readonly",disableKeyboardNav:"disableKeyboardNav",isDebugMode:"isDebugMode",trackTilesByLayoutPosition:"trackTilesByLayoutPosition",isGravityEnabled:"isGravityEnabled",layoutStrategy:"layoutStrategy",dataSource:"dataSource"},outputs:{sizeAndPosChanged:"sizeAndPosChanged",sizeChanging:"sizeChanging",onGridItemClick:"onGridItemClick",onItemsInit:"onItemsInit",onFocus:"onFocus"},decls:8,vars:13,consts:[["data-testid","pbi-grid-tile-container","inViewport","",1,"tileContainer","gridLayoutContainer",3,"ngClass","ngStyle","viewPortChangedEvent"],["class","debug-window",4,"ngIf"],["id","gridPlaceholder",1,"animated"],["gridPlaceholder",""],[1,"placeholder-body"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"debug-window"],["data-testid","pbi-grid-tile-item","pbi-grid-item","",1,"pbi-grid-item",3,"ngClass","container","gridItem","readonly","tabindex","sizeAndPosChanged","sizeChanging","moveStarted","onClick","moveEnded","focus","focusout"],[4,"ngIf"],["class","resizeHandle customHandle","data-direction","down-right",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["data-direction","down-right",1,"resizeHandle","customHandle"],[1,"bottomRightResizeHandle"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"ul",0),o.\u0275\u0275listener("viewPortChangedEvent",function(s){return r.viewportChanged(s)}),o.\u0275\u0275pipe(1,"async"),o.\u0275\u0275template(2,uo,8,4,"li",1),o.\u0275\u0275elementStart(3,"li",2,3),o.\u0275\u0275element(5,"div",4),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(6,dr,4,12,"ng-container",5),o.\u0275\u0275pipe(7,"async"),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275property("ngClass",r.gridStrategyClass)("ngStyle",o.\u0275\u0275pipeBind1(1,9,r.gridStyles$)),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",r.isDebugMode),o.\u0275\u0275advance(1),o.\u0275\u0275styleProp("display",r.gridPlaceHolderLayoutItem?"block":"none")("visibility",r.showPlaceHolder?"visible":"hidden"),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngForOf",o.\u0275\u0275pipeBind1(7,11,r.items$))("ngForTrackBy",r.trackTilesBy))},dependencies:[Pe.NgClass,Pe.NgForOf,Pe.NgIf,Pe.NgTemplateOutlet,Pe.NgStyle,co,A,Pe.AsyncPipe],styles:['.gridLayoutContainer[_ngcontent-%COMP%]{display:block;overflow:auto}.pbi-grid-item[_ngcontent-%COMP%], #gridPlaceholder[_ngcontent-%COMP%]{position:absolute;box-sizing:border-box;padding:var(--grid-item-padding, 5px);z-index:0}.selected[_ngcontent-%COMP%]{z-index:1!important}.pbi-grid-item[_ngcontent-%COMP%]:hover   .resizeHandle[_ngcontent-%COMP%]{visibility:visible}.resizeHandle[_ngcontent-%COMP%]{position:absolute;width:27px;height:27px;box-sizing:border-box;touch-action:none;visibility:hidden}.resizeHandle[data-direction=down-right][_ngcontent-%COMP%]{right:0;bottom:0;cursor:se-resize!important}.placeholder-body[_ngcontent-%COMP%]{width:100%;height:100%;background-color:rgba(0,0,0,.1)}.animated[_ngcontent-%COMP%]{transition:ease .3s}.bottomRightResizeHandle[_ngcontent-%COMP%]{border-width:0;border-right-width:2px;border-bottom-width:2px;border-style:solid;border-color:var(--fluent-theme-neutral-dark-alt-color, #333333);position:relative;display:block;top:8px;left:8px;content:"";width:5px;height:5px}.disable-events[_ngcontent-%COMP%]     iframe-tile{pointer-events:none}'],changeDetection:0}),n}();function ur(n,e){if(1&n&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275element(1,"tile-content",4),o.\u0275\u0275elementContainerEnd()),2&n){var t=o.\u0275\u0275nextContext().item,r=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("contract",t.contract)("themeName",r.themeName)("dashboard",r.dashboard)("inEditMobileLayoutMode",r.inEditMobileLayoutMode)("disableInteractions",r.disableInteractions)("focusedTileObjId",r.focusedTileObjId),o.\u0275\u0275attribute("data-unique-id",t.contract.objectId)("data-id",t.contract.id)}}function hr(n,e){if(1&n){var t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"tile-new",6),o.\u0275\u0275listener("onUnpinTileMobileView",function(d){o.\u0275\u0275restoreView(t);var g=o.\u0275\u0275nextContext(3);return o.\u0275\u0275resetView(g.onUnpinTileMobileView.emit(d))})("onTileInit",function(d){o.\u0275\u0275restoreView(t);var g=o.\u0275\u0275nextContext(3);return o.\u0275\u0275resetView(g.onTileInit.emit(d))}),o.\u0275\u0275elementEnd()}if(2&n){var r=o.\u0275\u0275nextContext(2).item,a=o.\u0275\u0275nextContext();o.\u0275\u0275property("themeName",a.themeName)("inEditMobileLayoutMode",a.inEditMobileLayoutMode)("viewCollectionItemModel",r)("disableInteractions",a.disableInteractions)("selectedDashboard",a.dashboard)("focusedTileObjId",a.focusedTileObjId)}}function Q(n,e){if(1&n&&o.\u0275\u0275template(0,hr,1,6,"tile-new",5),2&n){var t=o.\u0275\u0275nextContext().item;o.\u0275\u0275property("ngIf",t)}}function go(n,e){if(1&n&&(o.\u0275\u0275template(0,ur,2,8,"ng-container",2),o.\u0275\u0275template(1,Q,1,1,"ng-template",null,3,o.\u0275\u0275templateRefExtractor)),2&n){var t=o.\u0275\u0275reference(2),r=o.\u0275\u0275nextContext();o.\u0275\u0275property("ngIf",r.skipStoreSubscriptions)("ngIfElse",t)}}var Xo=function(n){function e(t){var r=n.call(this)||this;return r.globalEventBridge=t,r.onSizeAndPosTileChanged=new o.EventEmitter,r.onSizeTileChanging=new o.EventEmitter,r.onGridItemClick=new o.EventEmitter,r.onUnpinTileMobileView=new o.EventEmitter,r.onTileInit=new o.EventEmitter,r}return(0,M.ZT)(e,n),Object.defineProperty(e.prototype,"layoutStrategyParams",{set:function(r){this.layoutStrategy=function(n){var e,t;if(n){if(1===n.type)return new tn(n.width,n.height,2,0,null===(e=n.applySizeStyle)||void 0===e||e,n.inViewportEnabled);if(2===n.type)return n.hasCustomLayout?new dn(n.width,n.height,n.inViewportEnabled):new sn(n.width,n.inViewportEnabled);if(3===n.type)return new tn(n.width,n.height,3,7,null===(t=n.applySizeStyle)||void 0===t||t,n.inViewportEnabled)}}(r)},enumerable:!1,configurable:!0}),e.prototype.ngAfterViewInit=function(){var t=this;this.tiles.changes.subscribe(function(r){if(r?.length){var a=r.map(function(s){return s.viewCollectionItemModel.contract.objectId});t.globalEventBridge.publishToChannel(u.z.modernDashboardTileRepeatFinished,{ids:a})}})},e.prototype.sizeAndPosTileChanged=function(t){this.onSizeAndPosTileChanged.emit({tiles:this.tiles,gridItems:t})},e.prototype.sizeTileChanging=function(t){this.onSizeTileChanging.emit({tiles:this.tiles,gridItem:t})},e.prototype.gridItemClick=function(t){this.onGridItemClick.emit(t)},e.prototype.onItemsInit=function(t){this.globalEventBridge.publishToChannel(u.z.modernDashboardTileRepeatFinished,{ids:t})},e.prototype.onFocus=function(t){this.focusedTileObjId=t},e.\u0275fac=function(r){return new(r||e)(o.\u0275\u0275directiveInject(bt.Z))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["dashboard-base"]],viewQuery:function(r,a){var s;(1&r&&o.\u0275\u0275viewQuery(Zt,5),2&r)&&(o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(a.tiles=s))},inputs:{dashboard:"dashboard",themeName:"themeName",isReadonly:"isReadonly",skipStoreSubscriptions:"skipStoreSubscriptions",inEditMobileLayoutMode:"inEditMobileLayoutMode",isGravityEnabled:"isGravityEnabled",trackTilesByLayoutPosition:"trackTilesByLayoutPosition",disableInteractions:"disableInteractions",dataSource:"dataSource",layoutStrategyParams:"layoutStrategyParams"},outputs:{onSizeAndPosTileChanged:"onSizeAndPosTileChanged",onSizeTileChanging:"onSizeTileChanging",onGridItemClick:"onGridItemClick",onUnpinTileMobileView:"onUnpinTileMobileView",onTileInit:"onTileInit"},features:[o.\u0275\u0275InheritDefinitionFeature],decls:3,vars:5,consts:[[1,"dashboard"],["data-testid","dashboard-grid",3,"dataSource","readonly","layoutStrategy","trackTilesByLayoutPosition","isGravityEnabled","sizeChanging","sizeAndPosChanged","onGridItemClick","onItemsInit","onFocus"],[4,"ngIf","ngIfElse"],["tilenew",""],["data-testid","tile-content",3,"contract","themeName","dashboard","inEditMobileLayoutMode","disableInteractions","focusedTileObjId"],["class","dashboardTileLayout",3,"themeName","inEditMobileLayoutMode","viewCollectionItemModel","disableInteractions","selectedDashboard","focusedTileObjId","onUnpinTileMobileView","onTileInit",4,"ngIf"],[1,"dashboardTileLayout",3,"themeName","inEditMobileLayoutMode","viewCollectionItemModel","disableInteractions","selectedDashboard","focusedTileObjId","onUnpinTileMobileView","onTileInit"]],template:function(r,a){var s;(1&r&&(o.\u0275\u0275elementStart(0,"div",0)(1,"pbi-grid",1),o.\u0275\u0275listener("sizeChanging",function(g){return a.sizeTileChanging(g)})("sizeAndPosChanged",function(g){return a.sizeAndPosTileChanged(g)})("onGridItemClick",function(g){return a.gridItemClick(g)})("onItemsInit",function(g){return a.onItemsInit(g)})("onFocus",function(g){return a.onFocus(g)}),o.\u0275\u0275template(2,go,3,2,"ng-template"),o.\u0275\u0275elementEnd()()),2&r)&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("dataSource",a.dataSource)("readonly",a.isReadonly)("layoutStrategy",a.layoutStrategy)("trackTilesByLayoutPosition",a.trackTilesByLayoutPosition)("isGravityEnabled",null!==(s=a.isGravityEnabled)&&void 0!==s?s:null==a.dashboard?null:a.dashboard.gravityEnabled))},dependencies:[Pe.NgIf,Zo,oe.h,Zt],styles:["body.fullScreen[_ngcontent-%COMP%]   .dashboardContainerView[_ngcontent-%COMP%]   .dashboardSliderMain.errorBannerOn[_ngcontent-%COMP%], body.fullScreen[_ngcontent-%COMP%]   .dashboardContainerView[_ngcontent-%COMP%]   .dashboardSliderMain.errorBannerOff[_ngcontent-%COMP%]{margin-top:0}body.fullScreen[_ngcontent-%COMP%]   .dashboardContainerView[_ngcontent-%COMP%]   downgraded-flyout[_ngcontent-%COMP%], body.fullScreen[_ngcontent-%COMP%]   .dashboardContainerView[_ngcontent-%COMP%]   flyout[_ngcontent-%COMP%]{padding-top:0}body.fullScreen[_ngcontent-%COMP%]   .dashboard.fitToScreen[_ngcontent-%COMP%]{left:0;right:auto}.dashboardContainerView[_ngcontent-%COMP%]{display:block;height:100%;width:100%}.dashboardContainerView.qnaMode[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%], dashboard-edit-mobile-display.qnaMode[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]{background-color:var(--white-color, #FFF)}.dashboardContainerView.qnaMode[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardSliderMain[_ngcontent-%COMP%], dashboard-edit-mobile-display.qnaMode[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardSliderMain[_ngcontent-%COMP%]{margin-top:0}.dashboardContainerView.qnaMode[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardSliderMain[_ngcontent-%COMP%]   .dashboardModeView[_ngcontent-%COMP%], dashboard-edit-mobile-display.qnaMode[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardSliderMain[_ngcontent-%COMP%]   .dashboardModeView[_ngcontent-%COMP%]{visibility:hidden;opacity:0;display:none}.dashboardContainerView.qnaMode[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardSliderMain[_ngcontent-%COMP%]   .infoNavVisualizationModeView[_ngcontent-%COMP%], dashboard-edit-mobile-display.qnaMode[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardSliderMain[_ngcontent-%COMP%]   .infoNavVisualizationModeView[_ngcontent-%COMP%]{visibility:visible}.dashboardContainerView.qnaMode[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%], dashboard-edit-mobile-display.qnaMode[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{z-index:2}.dashboardContainerView.qnaMode[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%], dashboard-edit-mobile-display.qnaMode[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]{display:none}.dashboardContainerView.qnaMode[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   qna-dashboard-launcher[_ngcontent-%COMP%], dashboard-edit-mobile-display.qnaMode[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   qna-dashboard-launcher[_ngcontent-%COMP%]{display:flex}.dashboardContainerView.isMainContentDisabled[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(.dashboardSliderMain), dashboard-edit-mobile-display.isMainContentDisabled[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(.dashboardSliderMain), .dashboardContainerView.isMainContentDisabled[_ngcontent-%COMP%]   .dashboard[_ngcontent-%COMP%]   .tileGroup[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%], dashboard-edit-mobile-display.isMainContentDisabled[_ngcontent-%COMP%]   .dashboard[_ngcontent-%COMP%]   .tileGroup[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{pointer-events:none;opacity:.5}.dashboardContainerView.isMainContentDisabled[_ngcontent-%COMP%]   .tileContainer[_ngcontent-%COMP%]   li.dashboardTile[_ngcontent-%COMP%], dashboard-edit-mobile-display.isMainContentDisabled[_ngcontent-%COMP%]   .tileContainer[_ngcontent-%COMP%]   li.dashboardTile[_ngcontent-%COMP%]{opacity:.45;overflow:hidden!important;pointer-events:none}.dashboardContainerView.isMainContentDisabled[_ngcontent-%COMP%]   .tileContainer[_ngcontent-%COMP%]   li.dashboardTile[_ngcontent-%COMP%]   .tileBody[_ngcontent-%COMP%], dashboard-edit-mobile-display.isMainContentDisabled[_ngcontent-%COMP%]   .tileContainer[_ngcontent-%COMP%]   li.dashboardTile[_ngcontent-%COMP%]   .tileBody[_ngcontent-%COMP%]{pointer-events:none}.dashboardContainerView.isMainContentDisabled.isDashboardHeaderEnabled[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%], dashboard-edit-mobile-display.isMainContentDisabled.isDashboardHeaderEnabled[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{pointer-events:all;opacity:1}.dashboardContainerView.isMainContentDisabled.isDashboardHeaderEnabled[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%], dashboard-edit-mobile-display.isMainContentDisabled.isDashboardHeaderEnabled[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]{pointer-events:none;opacity:.5}.dashboardContainerView.isMainContentDisabled[_ngcontent-%COMP%]   downgraded-flyout[_ngcontent-%COMP%], dashboard-edit-mobile-display.isMainContentDisabled[_ngcontent-%COMP%]   downgraded-flyout[_ngcontent-%COMP%], .dashboardContainerView.isMainContentDisabled[_ngcontent-%COMP%]   flyout[_ngcontent-%COMP%], dashboard-edit-mobile-display.isMainContentDisabled[_ngcontent-%COMP%]   flyout[_ngcontent-%COMP%]{pointer-events:all!important;opacity:1!important}.dashboardContainerView.isSelectedTileHighlighted[_ngcontent-%COMP%]   .tileContainer[_ngcontent-%COMP%]   li.dashboardTile.selected[_ngcontent-%COMP%], dashboard-edit-mobile-display.isSelectedTileHighlighted[_ngcontent-%COMP%]   .tileContainer[_ngcontent-%COMP%]   li.dashboardTile.selected[_ngcontent-%COMP%]{opacity:1;pointer-events:all;transition:none}.dashboardContainerView.isSelectedTileHighlighted[_ngcontent-%COMP%]   .tileContainer[_ngcontent-%COMP%]   li.dashboardTile.selected[_ngcontent-%COMP%]   .warningIcon[_ngcontent-%COMP%], dashboard-edit-mobile-display.isSelectedTileHighlighted[_ngcontent-%COMP%]   .tileContainer[_ngcontent-%COMP%]   li.dashboardTile.selected[_ngcontent-%COMP%]   .warningIcon[_ngcontent-%COMP%]{display:block}.dashboardContainerView.isQuestionBoxHidden[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardSliderMain.errorBannerOff[_ngcontent-%COMP%], dashboard-edit-mobile-display.isQuestionBoxHidden[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardSliderMain.errorBannerOff[_ngcontent-%COMP%]{margin-top:50px}.dashboardContainerView.isQuestionBoxHidden[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardSliderMain.errorBannerOn[_ngcontent-%COMP%], dashboard-edit-mobile-display.isQuestionBoxHidden[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardSliderMain.errorBannerOn[_ngcontent-%COMP%]{margin-top:82px}.dashboardContainerView[_ngcontent-%COMP%]   .fluentTheme[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .fluentTheme[_ngcontent-%COMP%]{background-color:var(--fluent-theme-neutral-lighter-alt-color, #FAF9F8)}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0;transform-origin:0 0 0;transition:left .25s,right .25s,bottom .25s,transform .25s;display:flex}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{transition:transform .25s}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .qnaAppBar[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .qnaAppBar[_ngcontent-%COMP%]{background-color:var(--neutral-lighter-color, #F4F4F4);font-size:14px}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .qnaAppBar[_ngcontent-%COMP%]   .pbi-glyph-arrowleft[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .qnaAppBar[_ngcontent-%COMP%]   .pbi-glyph-arrowleft[_ngcontent-%COMP%]{font-size:10px}html[dir=rtl][_ngcontent-%COMP%]   .dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .qnaAppBar[_ngcontent-%COMP%]   .pbi-glyph-arrowleft[_ngcontent-%COMP%], html[dir=rtl] dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .qnaAppBar[_ngcontent-%COMP%]   .pbi-glyph-arrowleft[_ngcontent-%COMP%]{transform:rotate(-180deg)}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .qnaAppBar[_ngcontent-%COMP%]   .newExperienceToggle[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .qnaAppBar[_ngcontent-%COMP%]   .newExperienceToggle[_ngcontent-%COMP%]{align-items:center;margin:0 20px 0 10px}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .qnaAppBar[_ngcontent-%COMP%]   .newExperienceToggle[_ngcontent-%COMP%]   pbi-toggle[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .qnaAppBar[_ngcontent-%COMP%]   .newExperienceToggle[_ngcontent-%COMP%]   pbi-toggle[_ngcontent-%COMP%]{color:var(--neutral-primary-color, #333333);margin:0}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .qnaAppBar[_ngcontent-%COMP%]   .newExperienceToggle[_ngcontent-%COMP%]   pbi-toggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:not(.displayOnSmallScreen), dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .qnaAppBar[_ngcontent-%COMP%]   .newExperienceToggle[_ngcontent-%COMP%]   pbi-toggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:not(.displayOnSmallScreen){display:unset}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]{background-color:#fff}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .groupLabel[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .groupLabel[_ngcontent-%COMP%]{padding:0 8px 0 15px;font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif;font-size:14px}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .breadcrumbLabel[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .breadcrumbLabel[_ngcontent-%COMP%]{padding:0}html[dir=rtl][_ngcontent-%COMP%]   .dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .breadcrumbLabel[_ngcontent-%COMP%], html[dir=rtl] dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .breadcrumbLabel[_ngcontent-%COMP%]{transform:rotate(-180deg)}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .breadcrumbLabel[_ngcontent-%COMP%] > i[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .breadcrumbLabel[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{display:inline;line-height:37px;font-size:10px}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .activeDashboardLabel[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .activeDashboardLabel[_ngcontent-%COMP%]{font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif;font-size:14px;max-width:620px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .readonlyIcon[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .readonlyIcon[_ngcontent-%COMP%]{margin:0 0 0 5px!important;color:var(--neutral-secondary-color, #666666)}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:var(--neutral-secondary-color, #666666)}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:var(--focus-outline-definition, 2.5px solid) transparent}@media screen and (-ms-high-contrast: active){.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none}}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus, dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{background-color:transparent}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled), dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled), .dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus:hover:not(:disabled), dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus:hover:not(:disabled){background-color:var(--neutral-tertiary-alt-color, #C8C8C8)}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled, dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{color:var(--neutral-tertiary-alt-color, #C8C8C8)}html[data-focus-source=key][_ngcontent-%COMP%]   .dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus, html[data-focus-source=key] dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color)}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   i.glyphicon[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   i.glyphicon[_ngcontent-%COMP%]{margin:0}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   i.glyphicon.pbi-glyph-favoritestar[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   i.glyphicon.pbi-glyph-favoritestar[_ngcontent-%COMP%]{margin-right:5px}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   .dashboardTileErrors[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   .dashboardTileErrors[_ngcontent-%COMP%]{max-width:340px;position:relative;display:flex}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   .dashboardTileErrors[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   .dashboardTileErrors[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:100%;padding:0}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   .dashboardTileErrors[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   .dashboardTileErrors[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{cursor:pointer;position:absolute;display:block;width:12px;height:12px;line-height:12px;border-radius:50%;background-color:var(--theme-primary-color, #F2C811);color:var(--text-primary-content-color);top:10px;left:15px;text-align:center}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   .dashboardTileErrors[_ngcontent-%COMP%]   .errorToggle[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   .dashboardTileErrors[_ngcontent-%COMP%]   .errorToggle[_ngcontent-%COMP%]{color:var(--info-dark-color, #33669A);cursor:pointer;padding:0 0 0 5px}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{cursor:pointer;position:relative;display:block;width:12px;height:12px;line-height:12px;border-radius:50%;background-color:var(--theme-primary-color, #F2C811);color:var(--text-primary-content-color);top:7px;left:34px;text-align:center}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   .menuButton[_ngcontent-%COMP%]:before, dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   .menuButton[_ngcontent-%COMP%]:before{display:inline-block;font-family:PowrMDL2;font-size:16px;font-style:normal;margin-right:5px}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   .menuItemButton[_ngcontent-%COMP%]:hover, dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   .menuItemButton[_ngcontent-%COMP%]:hover{background-color:var(--neutral-tertiary-alt-color, #C8C8C8)!important}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardSliderMain[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardSliderMain[_ngcontent-%COMP%]{position:relative;width:100%;overflow:hidden}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardSliderMain.errorBannerOff[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardSliderMain.errorBannerOff[_ngcontent-%COMP%]{margin-top:90px}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardSliderMain.errorBannerOn[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardSliderMain.errorBannerOn[_ngcontent-%COMP%]{margin-top:122px}html[dir=rtl][_ngcontent-%COMP%]   .dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardSliderMain[_ngcontent-%COMP%], html[dir=rtl] dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardSliderMain[_ngcontent-%COMP%]{direction:rtl}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardSliderMain[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardSliderMain[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:absolute;width:100%}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardSliderMain[_ngcontent-%COMP%]   .dashboardModeView[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardSliderMain[_ngcontent-%COMP%]   .dashboardModeView[_ngcontent-%COMP%]{height:100%;opacity:1;transition:background-color .5s ease,opacity .5s ease}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardSliderMain[_ngcontent-%COMP%]   .infoNavVisualizationModeView[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardSliderMain[_ngcontent-%COMP%]   .infoNavVisualizationModeView[_ngcontent-%COMP%]{top:40px;bottom:0;visibility:hidden;transition:background-color .5s ease,opacity .5s ease}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   ul.tileContainer[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   ul.tileContainer[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:15px;right:0;margin:0;padding:0;list-style:none}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   ul.tileContainer[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   ul.tileContainer[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{list-style-type:none}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardViewSlider[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardViewSlider[_ngcontent-%COMP%]{position:absolute;left:0;right:0;top:0;bottom:0;overflow:hidden}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]{left:21px;position:absolute;width:100%}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   qna-dashboard-launcher[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   qna-dashboard-launcher[_ngcontent-%COMP%]{display:flex}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper.errorBannerOn[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper.errorBannerOn[_ngcontent-%COMP%]{top:82px}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper.errorBannerOff[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper.errorBannerOff[_ngcontent-%COMP%]{top:50px}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%] > .qnaQuestionBoxWrapper[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%] > .qnaQuestionBoxWrapper[_ngcontent-%COMP%], .dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .legacyQnaWrapper[_ngcontent-%COMP%] > .qnaQuestionBoxWrapper[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .legacyQnaWrapper[_ngcontent-%COMP%] > .qnaQuestionBoxWrapper[_ngcontent-%COMP%]{position:relative;width:650px;float:left}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%] > .qnaQuestionBoxWrapper[_ngcontent-%COMP%]   .qnaSpinner[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%] > .qnaQuestionBoxWrapper[_ngcontent-%COMP%]   .qnaSpinner[_ngcontent-%COMP%], .dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .legacyQnaWrapper[_ngcontent-%COMP%] > .qnaQuestionBoxWrapper[_ngcontent-%COMP%]   .qnaSpinner[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .legacyQnaWrapper[_ngcontent-%COMP%] > .qnaQuestionBoxWrapper[_ngcontent-%COMP%]   .qnaSpinner[_ngcontent-%COMP%]{z-index:1;position:absolute;right:10px;top:5px}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%] > .qnaQuestionBoxWrapper[_ngcontent-%COMP%]   .qnaStart[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%] > .qnaQuestionBoxWrapper[_ngcontent-%COMP%]   .qnaStart[_ngcontent-%COMP%], .dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .legacyQnaWrapper[_ngcontent-%COMP%] > .qnaQuestionBoxWrapper[_ngcontent-%COMP%]   .qnaStart[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .legacyQnaWrapper[_ngcontent-%COMP%] > .qnaQuestionBoxWrapper[_ngcontent-%COMP%]   .qnaStart[_ngcontent-%COMP%]{position:absolute;top:0;left:650px;width:200px;display:inline-block;margin:7px 0 0 12px;cursor:pointer}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%] > .qnaQuestionBoxWrapper[_ngcontent-%COMP%]   .qnaStart[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%] > .qnaQuestionBoxWrapper[_ngcontent-%COMP%]   .qnaStart[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .legacyQnaWrapper[_ngcontent-%COMP%] > .qnaQuestionBoxWrapper[_ngcontent-%COMP%]   .qnaStart[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .legacyQnaWrapper[_ngcontent-%COMP%] > .qnaQuestionBoxWrapper[_ngcontent-%COMP%]   .qnaStart[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--link-color, var(--theme-secondary-color, #000000));text-decoration:underline}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%] > .qnaQuestionBoxWrapper[_ngcontent-%COMP%]   .qnaStart[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%] > .qnaQuestionBoxWrapper[_ngcontent-%COMP%]   .qnaStart[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .legacyQnaWrapper[_ngcontent-%COMP%] > .qnaQuestionBoxWrapper[_ngcontent-%COMP%]   .qnaStart[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .legacyQnaWrapper[_ngcontent-%COMP%] > .qnaQuestionBoxWrapper[_ngcontent-%COMP%]   .qnaStart[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--neutral-secondary-color, #666666)}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .legacyQnaWrapper[_ngcontent-%COMP%] > .infoNavActions[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .legacyQnaWrapper[_ngcontent-%COMP%] > .infoNavActions[_ngcontent-%COMP%], .dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .infoNavActions[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .infoNavActions[_ngcontent-%COMP%]{display:none;white-space:nowrap}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .legacyQnaWrapper[_ngcontent-%COMP%] > .infoNavActions[_ngcontent-%COMP%]   .infoNavActionItem[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .legacyQnaWrapper[_ngcontent-%COMP%] > .infoNavActions[_ngcontent-%COMP%]   .infoNavActionItem[_ngcontent-%COMP%], .dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .infoNavActions[_ngcontent-%COMP%]   .infoNavActionItem[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .infoNavActions[_ngcontent-%COMP%]   .infoNavActionItem[_ngcontent-%COMP%]{display:inline-block}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .legacyQnaWrapper[_ngcontent-%COMP%] > .infoNavActions[_ngcontent-%COMP%]   .infoNavActionItem[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .legacyQnaWrapper[_ngcontent-%COMP%] > .infoNavActions[_ngcontent-%COMP%]   .infoNavActionItem[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .infoNavActions[_ngcontent-%COMP%]   .infoNavActionItem[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .infoNavActions[_ngcontent-%COMP%]   .infoNavActionItem[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--neutral-secondary-color, #666666);margin-left:10px;margin-top:7px;cursor:pointer;font-size:1.1em;vertical-align:bottom}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .legacyQnaWrapper[_ngcontent-%COMP%] > .infoNavActions[_ngcontent-%COMP%]   .infoNavActionItem[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover, dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .legacyQnaWrapper[_ngcontent-%COMP%] > .infoNavActions[_ngcontent-%COMP%]   .infoNavActionItem[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover, .dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .infoNavActions[_ngcontent-%COMP%]   .infoNavActionItem[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover, dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .infoNavActions[_ngcontent-%COMP%]   .infoNavActionItem[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:var(--neutral-primary-color, #333333)}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .legacyQnaWrapper[_ngcontent-%COMP%] > .infoNavActions[_ngcontent-%COMP%]   .infoNavActionItem.infoNavActionItemDisabled[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .legacyQnaWrapper[_ngcontent-%COMP%] > .infoNavActions[_ngcontent-%COMP%]   .infoNavActionItem.infoNavActionItemDisabled[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .infoNavActions[_ngcontent-%COMP%]   .infoNavActionItem.infoNavActionItemDisabled[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .infoNavActions[_ngcontent-%COMP%]   .infoNavActionItem.infoNavActionItemDisabled[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--neutral-tertiary-alt-color, #C8C8C8)}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .legacyQnaWrapper[_ngcontent-%COMP%] > .infoNavActions[_ngcontent-%COMP%]   .infoNavActionItem.infoNavActionItemDisabled[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover, dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .legacyQnaWrapper[_ngcontent-%COMP%] > .infoNavActions[_ngcontent-%COMP%]   .infoNavActionItem.infoNavActionItemDisabled[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover, .dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .infoNavActions[_ngcontent-%COMP%]   .infoNavActionItem.infoNavActionItemDisabled[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover, dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .infoNavActions[_ngcontent-%COMP%]   .infoNavActionItem.infoNavActionItemDisabled[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:var(--neutral-tertiary-alt-color, #C8C8C8)}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .legacyQnaWrapper[_ngcontent-%COMP%] > .infoNavActions[_ngcontent-%COMP%]   .infoNavActionItem[_ngcontent-%COMP%]   .pinButton[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .legacyQnaWrapper[_ngcontent-%COMP%] > .infoNavActions[_ngcontent-%COMP%]   .infoNavActionItem[_ngcontent-%COMP%]   .pinButton[_ngcontent-%COMP%], .dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .infoNavActions[_ngcontent-%COMP%]   .infoNavActionItem[_ngcontent-%COMP%]   .pinButton[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .infoNavActions[_ngcontent-%COMP%]   .infoNavActionItem[_ngcontent-%COMP%]   .pinButton[_ngcontent-%COMP%]{transform:rotate(-45deg)}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%] > button[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{vertical-align:top}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   downgraded-flyout[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   downgraded-flyout[_ngcontent-%COMP%], .dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   flyout[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   flyout[_ngcontent-%COMP%]{margin-top:40px;position:relative}dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardSliderMain[_ngcontent-%COMP%]{margin-top:0}.dashboardViewSlider[_ngcontent-%COMP%]   .dashboard[_ngcontent-%COMP%]{position:absolute;height:100%;width:100%;overflow:auto;right:0;-ms-overflow-style:scrollbar;transform-origin:0 0 0;transition:transform .5s}.dashboardViewSlider[_ngcontent-%COMP%]   .dashboard.transitioning[_ngcontent-%COMP%]   ul.tileContainer[_ngcontent-%COMP%] > li.dashboardTile[_ngcontent-%COMP%]{transition:none!important}.dashboardViewSlider[_ngcontent-%COMP%]   .dashboard[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{display:block;overflow:auto;height:100%;padding-top:250px;width:520px;margin:0 auto;text-align:center}.dashboardViewSlider[_ngcontent-%COMP%]   .dashboard[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:400}.dashboardViewSlider[_ngcontent-%COMP%]   .dashboard[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]   span.tileLoadErrorMessage[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{color:var(--data-color9, #3599B8);text-decoration:none}.dashboardViewSlider[_ngcontent-%COMP%]   .dashboard[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block;margin:25px auto}.duplicateDialog[_ngcontent-%COMP%]   .dashboardSaveAsName[_ngcontent-%COMP%]{width:100%;box-sizing:border-box;margin-top:10px;margin-bottom:20px;line-height:19px}.infonav-dialogActions[_ngcontent-%COMP%]   #duplicateDashboardBtn[_ngcontent-%COMP%]{background-color:var(--theme-primary-accessible-color, #FFE642);border-color:var(--theme-primary-accessible-color, #FFE642)}.infonav-dialogActions[_ngcontent-%COMP%]   #duplicateDashboardBtn[_ngcontent-%COMP%]:hover, .infonav-dialogActions[_ngcontent-%COMP%]   #duplicateDashboardBtn[_ngcontent-%COMP%]:focus{background-color:var(--theme-primary-color, #F2C811);border-color:inherit}.infonav-dialogActions[_ngcontent-%COMP%]   #duplicateCancelBtn[_ngcontent-%COMP%]{background-color:var(--neutral-light-color, #EAEAEA);border-color:var(--neutral-light-color, #EAEAEA)}.infonav-dialogActions[_ngcontent-%COMP%]   #duplicateCancelBtn[_ngcontent-%COMP%]:hover, .infonav-dialogActions[_ngcontent-%COMP%]   #duplicateCancelBtn[_ngcontent-%COMP%]:focus{background-color:var(--neutral-tertiary-alt-color, #C8C8C8);border-color:inherit}ul.additionalMenus[_ngcontent-%COMP%]{min-width:200px;border:none}ul.additionalMenus[_ngcontent-%COMP%]   button.dropdown-item[_ngcontent-%COMP%]{padding:10px 13px}ul.additionalMenus[_ngcontent-%COMP%]   button.dropdown-item[_ngcontent-%COMP%]:hover{background-color:var(--neutral-light-color, #EAEAEA)}ul.additionalMenus[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{padding:10px 13px}ul.additionalMenus[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover{background-color:var(--neutral-light-color, #EAEAEA)}ul.additionalMenus[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]   .dropdown-label[_ngcontent-%COMP%]{font-size:12px}",".dashboardTileLayout[_ngcontent-%COMP%]{display:block;width:100%;height:100%;position:relative;overflow:hidden;text-decoration:none;cursor:pointer}.dashboard[_ngcontent-%COMP%]{overflow:hidden!important}  .pbi-grid-item:focus-visible{outline:none}  .pbi-grid-item:focus-visible .dashboardTileLayout{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color)}",".mobileDashboardConsumption[_nghost-%COMP%]   .dashboard[_ngcontent-%COMP%], .mobileDashboardConsumption   [_nghost-%COMP%]   .dashboard[_ngcontent-%COMP%]{overflow:initial!important}.mobileDashboardConsumption[_nghost-%COMP%]   .dashboard[_ngcontent-%COMP%]     .gridLayoutContainer, .mobileDashboardConsumption   [_nghost-%COMP%]   .dashboard[_ngcontent-%COMP%]     .gridLayoutContainer{overflow:initial}.mobileDashboardConsumption[_nghost-%COMP%]   .dashboard[_ngcontent-%COMP%]     ul.tileContainer, .mobileDashboardConsumption   [_nghost-%COMP%]   .dashboard[_ngcontent-%COMP%]     ul.tileContainer{padding-left:4px;box-sizing:border-box}"]}),e}(f.w),mo=function(n){function e(t,r,a,s,d,g,O,w,D,V,j,ne,Z,W,De){var _e=n.call(this)||this;return _e.store=t,_e.dialogService=r,_e.localizationService=a,_e.action$=s,_e.telemetryService=d,_e.featureSwitchService=g,_e.tileConfigService=O,_e.publicCustomVisualService=w,_e.visualPlugin=D,_e.trustedVisualService=V,_e.globalEventBridge=j,_e.resourcePackageLoadService=ne,_e.dashboardLoadingProgressTrackingService=Z,_e.dashboardTelemetryService=W,_e.cd=De,_e.onTileClick=new o.EventEmitter,_e.onUnpinTileMobileView=new o.EventEmitter,_e.onTileInit=new o.EventEmitter,_e.isDashboardReadonly=!0,_e.tileConfigService.resetVdCache(),_e.init(),_e.dataSource=new Eo(t),_e.onDestroy$.subscribe(function(){_e.telemetryService.logEvent(Re),_e.dashboardLoadingProgressTrackingService.cancelTracking(),_e.tileConfigService.resetVdCache()}),_e}return(0,M.ZT)(e,n),e.prototype.ngOnInit=function(){this.setDashboardIsReadonly(),this.telemetryService.logEvent(ee,{isModern:!0})},e.prototype.ngAfterViewInit=function(){var t=this,r=this.store.select(h.aS).pipe((0,N.h)(function(a){return!!a}),(0,X.R)(this.onDestroy$));(0,R.aj)([r,this.featureSwitchService.featureSwitches$]).pipe((0,N.h)(function(a){return!!a[1]}),(0,xe.x)(_.isEqual),(0,st.b)(function(a){t.ensureVisuals(a[0],a[1])})).subscribe(),this.action$.pipe((0,X.R)(this.onDestroy$),(0,wt.l4)(Do.HW),(0,ko.b)(300)).subscribe(function(a){a.payload.isDataChange||(t.dataSource=new Eo(t.store),t.cd.detectChanges())})},e.prototype.ensureVisuals=function(t,r){return(0,M.mG)(this,void 0,void 0,function(){var a,s;return(0,M.Jh)(this,function(d){switch(d.label){case 0:return r.consumePublicCvsWithoutRps?[4,this.ensurePublicResourcePackages(t)]:[3,2];case 1:return a=d.sent(),[3,4];case 2:return[4,this.ensureTrustedVisuals(t)];case 3:a=d.sent(),d.label=4;case 4:return[4,this.ensureLoadResourcePackages(t)];case 5:return s=d.sent(),a=_.uniq(_.concat(a,s)),this.globalEventBridge.publishToChannel(yi.W,{visualTypes:a}),[2]}})})},e.prototype.getTilesVisualTypes=function(t){for(var r,a,s,d,g=[],O=0,w=t;O<w.length;O++){var D=w[O];if(D.type===Ne.YU.composite){var V,j=D.$config||this.tileConfigService.parseTileConfig(D);(V=null===(d=null===(s=null===(a=null===(r=j?.visualContainer)||void 0===r?void 0:r.$visualContainer)||void 0===a?void 0:a.config)||void 0===s?void 0:s.singleVisual)||void 0===d?void 0:d.visualType)&&g.push(V)}}return g},e.prototype.ensureTrustedVisuals=function(t){return(0,M.mG)(this,void 0,void 0,function(){var r,a,s,d=this;return(0,M.Jh)(this,function(g){switch(g.label){case 0:return r=this.getTilesVisualTypes(t),a=r.filter(function(O){return d.trustedVisualService.isTrustedVisual(O)}),[4,this.trustedVisualService.getConsentAndLoadVisuals(a)];case 1:return(s=g.sent())&&s.length?(this.visualPlugin.ensureTrustedVisualPlugins(s),[2,s.map(function(O){return O.name})]):[2,[]]}})})},e.prototype.ensureLoadResourcePackages=function(t){return(0,M.mG)(this,void 0,void 0,function(){var r,a,s;return(0,M.Jh)(this,function(d){switch(d.label){case 0:return r=_.flatten(_.map(t,function(g){return g.resourcePackageIds||[]})),a=[],r&&r.length>0?[4,this.resourcePackageLoadService.getAndLoadVisualPluginsForResourcePackageIds(r)]:[3,2];case 1:s=d.sent(),a=s||[],d.label=2;case 2:return this.telemetryService.logEvent(U,{resourcePackageLength:r?r.length:0,compositeTileHasCustomVisual:!!a.length}),[2,a]}})})},e.prototype.ensurePublicResourcePackages=function(t){return(0,M.mG)(this,void 0,void 0,function(){var r,a,s,d,g,O,w=this;return(0,M.Jh)(this,function(D){switch(D.label){case 0:r=this.getTilesVisualTypes(t),D.label=1;case 1:return D.trys.push([1,6,,7]),[4,this.ensureTrustedVisuals(t)];case 2:return a=D.sent(),s=r.filter(function(V){return!w.trustedVisualService.isTrustedVisual(V)}),[4,this.publicCustomVisualService.getPublicVisualTypes(s)];case 3:return d=D.sent(),[4,this.publicCustomVisualService.createPublicResourcePackagesByName(d)];case 4:return g=D.sent(),[4,this.visualPlugin.ensurePlugins(g)];case 5:return D.sent(),[2,_.uniq(_.concat(a,d))];case 6:return O=D.sent(),pe.fF.assertFail("failed to load public custom visuals:"+O),[3,7];case 7:return[2,[]]}})})},e.prototype.init=function(){var t=this;this.store.select(Dt.W$).pipe((0,N.h)(function(r){return!!r}),(0,xe.x)(_.isEqual),(0,X.R)(this.onDestroy$)).subscribe(function(r){var a;(null===(a=t.selectedDashboard)||void 0===a?void 0:a.id)!==r.id&&t.dashboardTelemetryService.dashboardLoadingProgressTracking(r),t.selectedDashboard=r,t.setDashboardIsReadonly()})},e.prototype.sizeAndPosTileChanged=function(t){var r;null===(r=t.tiles)||void 0===r||r.forEach(function(a){return a.refreshViewPortSize()}),this.dispatchTilesUpdate(t.gridItems)},e.prototype.sizeTileChanging=function(t){var r;null===(r=t.tiles)||void 0===r||r.filter(function(a){var s,d;return(null===(s=a.viewCollectionItemModel)||void 0===s?void 0:s.contract.objectId)===(null===(d=t.gridItem)||void 0===d?void 0:d.id)}).forEach(function(a){return a.refreshViewPortSize()})},e.prototype.tileClick=function(t){if(20!==t.data.contract.errorCode)this.onTileClick.emit(t);else{var r=this.localizationService.get("PermissionCenter_PermissionRequired_Title"),a=this.localizationService.get("PermissionCenter_PermissionRequired_Description"),s=this.localizationService.get("PBI_Button_Label_Close");this.dialogService.promptSimpleDialog(r,a,{},{url:"//go.microsoft.com/fwlink/?linkid=858549",text:"Generic_LearnMore"},s)}},e.prototype.dispatchTilesUpdate=function(t){if(this.isReadonly)pe.fF.assertFail("should not dispatch tiles update in readonly mode");else{var r=t.filter(function(O){return O.data.contract.isTemporary}),a=t.filter(function(O){return!O.data.contract.isTemporary}),s=function(n){return 2===n?.type&&n.hasCustomLayout?1:0}(this.layoutStrategyParams);if(r.length){var d=this.getTileLayoutDescriptor(r,s);this.store.dispatch(new Ct.d$({dashboardId:this.dashboardId,updates:d}))}else if(a.length){var g=this.telemetryService.startEvent(je.mw,{tilesChanged:1});this.store.dispatch(new Ct.No({dashboardId:this.dashboardId,updates:this.getTileLayoutDescriptor(a,s),telemetryEvent:g,layoutStrategy:s}))}}},e.prototype.getTileLayoutDescriptor=function(t,r){return t.map(function(a){var s=a.data.contract,d=a.layoutPosition,g=_.cloneDeep((0,Me.mf)(s));(0,Me.bQ)(g,d,r);var O=s.query,w=O&&(0,Me.HL)(O,d),D=null;O&&w&&(s.query.modelQuery.sq=JSON.stringify(w),D=JSON.stringify(s.query));var V=(0,Me._z)(s,g,O,D);return V.col=d.x,V.row=d.y,V.colSpan=d.width,V.rowSpan=d.height,V})},e.prototype.setDashboardIsReadonly=function(){this.isDashboardReadonly=!(0,le.cl)(this.selectedDashboard)||this.isReadonly},e.\u0275fac=function(r){return new(r||e)(o.\u0275\u0275directiveInject(J.yh),o.\u0275\u0275directiveInject(bn.x),o.\u0275\u0275directiveInject(Jt.o),o.\u0275\u0275directiveInject(wt.eX),o.\u0275\u0275directiveInject(ut.y0),o.\u0275\u0275directiveInject(qt.vZ),o.\u0275\u0275directiveInject(Et.A),o.\u0275\u0275directiveInject(Ro.B),o.\u0275\u0275directiveInject(Jn.D),o.\u0275\u0275directiveInject(Yn.t),o.\u0275\u0275directiveInject(bt.Z),o.\u0275\u0275directiveInject(Pi.G),o.\u0275\u0275directiveInject(So),o.\u0275\u0275directiveInject(xo),o.\u0275\u0275directiveInject(o.ChangeDetectorRef))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["dashboard-new"]],inputs:{dashboardId:"dashboardId",layoutStrategyParams:"layoutStrategyParams",themeName:"themeName",isReadonly:"isReadonly",inEditMobileLayoutMode:"inEditMobileLayoutMode",isGravityEnabled:"isGravityEnabled",trackTilesByLayoutPosition:"trackTilesByLayoutPosition",disableInteractions:"disableInteractions"},outputs:{onTileClick:"onTileClick",onUnpinTileMobileView:"onUnpinTileMobileView",onTileInit:"onTileInit"},features:[o.\u0275\u0275ProvidersFeature([xo]),o.\u0275\u0275InheritDefinitionFeature],decls:1,vars:9,consts:[[3,"dashboard","themeName","isReadonly","dataSource","layoutStrategyParams","inEditMobileLayoutMode","isGravityEnabled","trackTilesByLayoutPosition","disableInteractions","onSizeAndPosTileChanged","onSizeTileChanging","onGridItemClick","onUnpinTileMobileView","onTileInit"]],template:function(r,a){1&r&&(o.\u0275\u0275elementStart(0,"dashboard-base",0),o.\u0275\u0275listener("onSizeAndPosTileChanged",function(d){return a.sizeAndPosTileChanged(d)})("onSizeTileChanging",function(d){return a.sizeTileChanging(d)})("onGridItemClick",function(d){return a.tileClick(d)})("onUnpinTileMobileView",function(d){return a.onUnpinTileMobileView.emit(d)})("onTileInit",function(d){return a.onTileInit.emit(d)}),o.\u0275\u0275elementEnd()),2&r&&o.\u0275\u0275property("dashboard",a.selectedDashboard)("themeName",a.themeName)("isReadonly",a.isDashboardReadonly)("dataSource",a.dataSource)("layoutStrategyParams",a.layoutStrategyParams)("inEditMobileLayoutMode",a.inEditMobileLayoutMode)("isGravityEnabled",a.isGravityEnabled)("trackTilesByLayoutPosition",a.trackTilesByLayoutPosition)("disableInteractions",a.disableInteractions)},dependencies:[Xo],styles:["body.fullScreen[_ngcontent-%COMP%]   .dashboardContainerView[_ngcontent-%COMP%]   .dashboardSliderMain.errorBannerOn[_ngcontent-%COMP%], body.fullScreen[_ngcontent-%COMP%]   .dashboardContainerView[_ngcontent-%COMP%]   .dashboardSliderMain.errorBannerOff[_ngcontent-%COMP%]{margin-top:0}body.fullScreen[_ngcontent-%COMP%]   .dashboardContainerView[_ngcontent-%COMP%]   downgraded-flyout[_ngcontent-%COMP%], body.fullScreen[_ngcontent-%COMP%]   .dashboardContainerView[_ngcontent-%COMP%]   flyout[_ngcontent-%COMP%]{padding-top:0}body.fullScreen[_ngcontent-%COMP%]   .dashboard.fitToScreen[_ngcontent-%COMP%]{left:0;right:auto}.dashboardContainerView[_ngcontent-%COMP%]{display:block;height:100%;width:100%}.dashboardContainerView.qnaMode[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%], dashboard-edit-mobile-display.qnaMode[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]{background-color:var(--white-color, #FFF)}.dashboardContainerView.qnaMode[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardSliderMain[_ngcontent-%COMP%], dashboard-edit-mobile-display.qnaMode[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardSliderMain[_ngcontent-%COMP%]{margin-top:0}.dashboardContainerView.qnaMode[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardSliderMain[_ngcontent-%COMP%]   .dashboardModeView[_ngcontent-%COMP%], dashboard-edit-mobile-display.qnaMode[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardSliderMain[_ngcontent-%COMP%]   .dashboardModeView[_ngcontent-%COMP%]{visibility:hidden;opacity:0;display:none}.dashboardContainerView.qnaMode[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardSliderMain[_ngcontent-%COMP%]   .infoNavVisualizationModeView[_ngcontent-%COMP%], dashboard-edit-mobile-display.qnaMode[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardSliderMain[_ngcontent-%COMP%]   .infoNavVisualizationModeView[_ngcontent-%COMP%]{visibility:visible}.dashboardContainerView.qnaMode[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%], dashboard-edit-mobile-display.qnaMode[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{z-index:2}.dashboardContainerView.qnaMode[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%], dashboard-edit-mobile-display.qnaMode[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]{display:none}.dashboardContainerView.qnaMode[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   qna-dashboard-launcher[_ngcontent-%COMP%], dashboard-edit-mobile-display.qnaMode[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   qna-dashboard-launcher[_ngcontent-%COMP%]{display:flex}.dashboardContainerView.isMainContentDisabled[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(.dashboardSliderMain), dashboard-edit-mobile-display.isMainContentDisabled[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(.dashboardSliderMain), .dashboardContainerView.isMainContentDisabled[_ngcontent-%COMP%]   .dashboard[_ngcontent-%COMP%]   .tileGroup[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%], dashboard-edit-mobile-display.isMainContentDisabled[_ngcontent-%COMP%]   .dashboard[_ngcontent-%COMP%]   .tileGroup[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{pointer-events:none;opacity:.5}.dashboardContainerView.isMainContentDisabled[_ngcontent-%COMP%]   .tileContainer[_ngcontent-%COMP%]   li.dashboardTile[_ngcontent-%COMP%], dashboard-edit-mobile-display.isMainContentDisabled[_ngcontent-%COMP%]   .tileContainer[_ngcontent-%COMP%]   li.dashboardTile[_ngcontent-%COMP%]{opacity:.45;overflow:hidden!important;pointer-events:none}.dashboardContainerView.isMainContentDisabled[_ngcontent-%COMP%]   .tileContainer[_ngcontent-%COMP%]   li.dashboardTile[_ngcontent-%COMP%]   .tileBody[_ngcontent-%COMP%], dashboard-edit-mobile-display.isMainContentDisabled[_ngcontent-%COMP%]   .tileContainer[_ngcontent-%COMP%]   li.dashboardTile[_ngcontent-%COMP%]   .tileBody[_ngcontent-%COMP%]{pointer-events:none}.dashboardContainerView.isMainContentDisabled.isDashboardHeaderEnabled[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%], dashboard-edit-mobile-display.isMainContentDisabled.isDashboardHeaderEnabled[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{pointer-events:all;opacity:1}.dashboardContainerView.isMainContentDisabled.isDashboardHeaderEnabled[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%], dashboard-edit-mobile-display.isMainContentDisabled.isDashboardHeaderEnabled[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]{pointer-events:none;opacity:.5}.dashboardContainerView.isMainContentDisabled[_ngcontent-%COMP%]   downgraded-flyout[_ngcontent-%COMP%], dashboard-edit-mobile-display.isMainContentDisabled[_ngcontent-%COMP%]   downgraded-flyout[_ngcontent-%COMP%], .dashboardContainerView.isMainContentDisabled[_ngcontent-%COMP%]   flyout[_ngcontent-%COMP%], dashboard-edit-mobile-display.isMainContentDisabled[_ngcontent-%COMP%]   flyout[_ngcontent-%COMP%]{pointer-events:all!important;opacity:1!important}.dashboardContainerView.isSelectedTileHighlighted[_ngcontent-%COMP%]   .tileContainer[_ngcontent-%COMP%]   li.dashboardTile.selected[_ngcontent-%COMP%], dashboard-edit-mobile-display.isSelectedTileHighlighted[_ngcontent-%COMP%]   .tileContainer[_ngcontent-%COMP%]   li.dashboardTile.selected[_ngcontent-%COMP%]{opacity:1;pointer-events:all;transition:none}.dashboardContainerView.isSelectedTileHighlighted[_ngcontent-%COMP%]   .tileContainer[_ngcontent-%COMP%]   li.dashboardTile.selected[_ngcontent-%COMP%]   .warningIcon[_ngcontent-%COMP%], dashboard-edit-mobile-display.isSelectedTileHighlighted[_ngcontent-%COMP%]   .tileContainer[_ngcontent-%COMP%]   li.dashboardTile.selected[_ngcontent-%COMP%]   .warningIcon[_ngcontent-%COMP%]{display:block}.dashboardContainerView.isQuestionBoxHidden[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardSliderMain.errorBannerOff[_ngcontent-%COMP%], dashboard-edit-mobile-display.isQuestionBoxHidden[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardSliderMain.errorBannerOff[_ngcontent-%COMP%]{margin-top:50px}.dashboardContainerView.isQuestionBoxHidden[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardSliderMain.errorBannerOn[_ngcontent-%COMP%], dashboard-edit-mobile-display.isQuestionBoxHidden[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardSliderMain.errorBannerOn[_ngcontent-%COMP%]{margin-top:82px}.dashboardContainerView[_ngcontent-%COMP%]   .fluentTheme[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .fluentTheme[_ngcontent-%COMP%]{background-color:var(--fluent-theme-neutral-lighter-alt-color, #FAF9F8)}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0;transform-origin:0 0 0;transition:left .25s,right .25s,bottom .25s,transform .25s;display:flex}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{transition:transform .25s}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .qnaAppBar[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .qnaAppBar[_ngcontent-%COMP%]{background-color:var(--neutral-lighter-color, #F4F4F4);font-size:14px}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .qnaAppBar[_ngcontent-%COMP%]   .pbi-glyph-arrowleft[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .qnaAppBar[_ngcontent-%COMP%]   .pbi-glyph-arrowleft[_ngcontent-%COMP%]{font-size:10px}html[dir=rtl][_ngcontent-%COMP%]   .dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .qnaAppBar[_ngcontent-%COMP%]   .pbi-glyph-arrowleft[_ngcontent-%COMP%], html[dir=rtl] dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .qnaAppBar[_ngcontent-%COMP%]   .pbi-glyph-arrowleft[_ngcontent-%COMP%]{transform:rotate(-180deg)}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .qnaAppBar[_ngcontent-%COMP%]   .newExperienceToggle[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .qnaAppBar[_ngcontent-%COMP%]   .newExperienceToggle[_ngcontent-%COMP%]{align-items:center;margin:0 20px 0 10px}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .qnaAppBar[_ngcontent-%COMP%]   .newExperienceToggle[_ngcontent-%COMP%]   pbi-toggle[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .qnaAppBar[_ngcontent-%COMP%]   .newExperienceToggle[_ngcontent-%COMP%]   pbi-toggle[_ngcontent-%COMP%]{color:var(--neutral-primary-color, #333333);margin:0}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .qnaAppBar[_ngcontent-%COMP%]   .newExperienceToggle[_ngcontent-%COMP%]   pbi-toggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:not(.displayOnSmallScreen), dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .qnaAppBar[_ngcontent-%COMP%]   .newExperienceToggle[_ngcontent-%COMP%]   pbi-toggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:not(.displayOnSmallScreen){display:unset}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]{background-color:#fff}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .groupLabel[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .groupLabel[_ngcontent-%COMP%]{padding:0 8px 0 15px;font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif;font-size:14px}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .breadcrumbLabel[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .breadcrumbLabel[_ngcontent-%COMP%]{padding:0}html[dir=rtl][_ngcontent-%COMP%]   .dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .breadcrumbLabel[_ngcontent-%COMP%], html[dir=rtl] dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .breadcrumbLabel[_ngcontent-%COMP%]{transform:rotate(-180deg)}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .breadcrumbLabel[_ngcontent-%COMP%] > i[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .breadcrumbLabel[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{display:inline;line-height:37px;font-size:10px}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .activeDashboardLabel[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .activeDashboardLabel[_ngcontent-%COMP%]{font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif;font-size:14px;max-width:620px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .readonlyIcon[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .readonlyIcon[_ngcontent-%COMP%]{margin:0 0 0 5px!important;color:var(--neutral-secondary-color, #666666)}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:var(--neutral-secondary-color, #666666)}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:var(--focus-outline-definition, 2.5px solid) transparent}@media screen and (-ms-high-contrast: active){.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none}}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus, dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{background-color:transparent}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled), dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled), .dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus:hover:not(:disabled), dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus:hover:not(:disabled){background-color:var(--neutral-tertiary-alt-color, #C8C8C8)}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled, dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{color:var(--neutral-tertiary-alt-color, #C8C8C8)}html[data-focus-source=key][_ngcontent-%COMP%]   .dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus, html[data-focus-source=key] dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color)}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   i.glyphicon[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   i.glyphicon[_ngcontent-%COMP%]{margin:0}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   i.glyphicon.pbi-glyph-favoritestar[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   i.glyphicon.pbi-glyph-favoritestar[_ngcontent-%COMP%]{margin-right:5px}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   .dashboardTileErrors[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   .dashboardTileErrors[_ngcontent-%COMP%]{max-width:340px;position:relative;display:flex}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   .dashboardTileErrors[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   .dashboardTileErrors[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:100%;padding:0}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   .dashboardTileErrors[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   .dashboardTileErrors[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{cursor:pointer;position:absolute;display:block;width:12px;height:12px;line-height:12px;border-radius:50%;background-color:var(--theme-primary-color, #F2C811);color:var(--text-primary-content-color);top:10px;left:15px;text-align:center}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   .dashboardTileErrors[_ngcontent-%COMP%]   .errorToggle[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   .dashboardTileErrors[_ngcontent-%COMP%]   .errorToggle[_ngcontent-%COMP%]{color:var(--info-dark-color, #33669A);cursor:pointer;padding:0 0 0 5px}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{cursor:pointer;position:relative;display:block;width:12px;height:12px;line-height:12px;border-radius:50%;background-color:var(--theme-primary-color, #F2C811);color:var(--text-primary-content-color);top:7px;left:34px;text-align:center}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   .menuButton[_ngcontent-%COMP%]:before, dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   .menuButton[_ngcontent-%COMP%]:before{display:inline-block;font-family:PowrMDL2;font-size:16px;font-style:normal;margin-right:5px}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   .menuItemButton[_ngcontent-%COMP%]:hover, dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dashboardAppBar[_ngcontent-%COMP%]   .appBarSection[_ngcontent-%COMP%]   .menuItemButton[_ngcontent-%COMP%]:hover{background-color:var(--neutral-tertiary-alt-color, #C8C8C8)!important}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardSliderMain[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardSliderMain[_ngcontent-%COMP%]{position:relative;width:100%;overflow:hidden}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardSliderMain.errorBannerOff[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardSliderMain.errorBannerOff[_ngcontent-%COMP%]{margin-top:90px}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardSliderMain.errorBannerOn[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardSliderMain.errorBannerOn[_ngcontent-%COMP%]{margin-top:122px}html[dir=rtl][_ngcontent-%COMP%]   .dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardSliderMain[_ngcontent-%COMP%], html[dir=rtl] dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardSliderMain[_ngcontent-%COMP%]{direction:rtl}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardSliderMain[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardSliderMain[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:absolute;width:100%}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardSliderMain[_ngcontent-%COMP%]   .dashboardModeView[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardSliderMain[_ngcontent-%COMP%]   .dashboardModeView[_ngcontent-%COMP%]{height:100%;opacity:1;transition:background-color .5s ease,opacity .5s ease}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardSliderMain[_ngcontent-%COMP%]   .infoNavVisualizationModeView[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardSliderMain[_ngcontent-%COMP%]   .infoNavVisualizationModeView[_ngcontent-%COMP%]{top:40px;bottom:0;visibility:hidden;transition:background-color .5s ease,opacity .5s ease}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   ul.tileContainer[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   ul.tileContainer[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:15px;right:0;margin:0;padding:0;list-style:none}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   ul.tileContainer[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   ul.tileContainer[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{list-style-type:none}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardViewSlider[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardViewSlider[_ngcontent-%COMP%]{position:absolute;left:0;right:0;top:0;bottom:0;overflow:hidden}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]{left:21px;position:absolute;width:100%}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   qna-dashboard-launcher[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   qna-dashboard-launcher[_ngcontent-%COMP%]{display:flex}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper.errorBannerOn[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper.errorBannerOn[_ngcontent-%COMP%]{top:82px}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper.errorBannerOff[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper.errorBannerOff[_ngcontent-%COMP%]{top:50px}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%] > .qnaQuestionBoxWrapper[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%] > .qnaQuestionBoxWrapper[_ngcontent-%COMP%], .dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .legacyQnaWrapper[_ngcontent-%COMP%] > .qnaQuestionBoxWrapper[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .legacyQnaWrapper[_ngcontent-%COMP%] > .qnaQuestionBoxWrapper[_ngcontent-%COMP%]{position:relative;width:650px;float:left}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%] > .qnaQuestionBoxWrapper[_ngcontent-%COMP%]   .qnaSpinner[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%] > .qnaQuestionBoxWrapper[_ngcontent-%COMP%]   .qnaSpinner[_ngcontent-%COMP%], .dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .legacyQnaWrapper[_ngcontent-%COMP%] > .qnaQuestionBoxWrapper[_ngcontent-%COMP%]   .qnaSpinner[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .legacyQnaWrapper[_ngcontent-%COMP%] > .qnaQuestionBoxWrapper[_ngcontent-%COMP%]   .qnaSpinner[_ngcontent-%COMP%]{z-index:1;position:absolute;right:10px;top:5px}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%] > .qnaQuestionBoxWrapper[_ngcontent-%COMP%]   .qnaStart[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%] > .qnaQuestionBoxWrapper[_ngcontent-%COMP%]   .qnaStart[_ngcontent-%COMP%], .dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .legacyQnaWrapper[_ngcontent-%COMP%] > .qnaQuestionBoxWrapper[_ngcontent-%COMP%]   .qnaStart[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .legacyQnaWrapper[_ngcontent-%COMP%] > .qnaQuestionBoxWrapper[_ngcontent-%COMP%]   .qnaStart[_ngcontent-%COMP%]{position:absolute;top:0;left:650px;width:200px;display:inline-block;margin:7px 0 0 12px;cursor:pointer}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%] > .qnaQuestionBoxWrapper[_ngcontent-%COMP%]   .qnaStart[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%] > .qnaQuestionBoxWrapper[_ngcontent-%COMP%]   .qnaStart[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .legacyQnaWrapper[_ngcontent-%COMP%] > .qnaQuestionBoxWrapper[_ngcontent-%COMP%]   .qnaStart[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .legacyQnaWrapper[_ngcontent-%COMP%] > .qnaQuestionBoxWrapper[_ngcontent-%COMP%]   .qnaStart[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--link-color, var(--theme-secondary-color, #000000));text-decoration:underline}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%] > .qnaQuestionBoxWrapper[_ngcontent-%COMP%]   .qnaStart[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%] > .qnaQuestionBoxWrapper[_ngcontent-%COMP%]   .qnaStart[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .legacyQnaWrapper[_ngcontent-%COMP%] > .qnaQuestionBoxWrapper[_ngcontent-%COMP%]   .qnaStart[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .legacyQnaWrapper[_ngcontent-%COMP%] > .qnaQuestionBoxWrapper[_ngcontent-%COMP%]   .qnaStart[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--neutral-secondary-color, #666666)}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .legacyQnaWrapper[_ngcontent-%COMP%] > .infoNavActions[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .legacyQnaWrapper[_ngcontent-%COMP%] > .infoNavActions[_ngcontent-%COMP%], .dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .infoNavActions[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .infoNavActions[_ngcontent-%COMP%]{display:none;white-space:nowrap}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .legacyQnaWrapper[_ngcontent-%COMP%] > .infoNavActions[_ngcontent-%COMP%]   .infoNavActionItem[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .legacyQnaWrapper[_ngcontent-%COMP%] > .infoNavActions[_ngcontent-%COMP%]   .infoNavActionItem[_ngcontent-%COMP%], .dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .infoNavActions[_ngcontent-%COMP%]   .infoNavActionItem[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .infoNavActions[_ngcontent-%COMP%]   .infoNavActionItem[_ngcontent-%COMP%]{display:inline-block}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .legacyQnaWrapper[_ngcontent-%COMP%] > .infoNavActions[_ngcontent-%COMP%]   .infoNavActionItem[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .legacyQnaWrapper[_ngcontent-%COMP%] > .infoNavActions[_ngcontent-%COMP%]   .infoNavActionItem[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .infoNavActions[_ngcontent-%COMP%]   .infoNavActionItem[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .infoNavActions[_ngcontent-%COMP%]   .infoNavActionItem[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--neutral-secondary-color, #666666);margin-left:10px;margin-top:7px;cursor:pointer;font-size:1.1em;vertical-align:bottom}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .legacyQnaWrapper[_ngcontent-%COMP%] > .infoNavActions[_ngcontent-%COMP%]   .infoNavActionItem[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover, dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .legacyQnaWrapper[_ngcontent-%COMP%] > .infoNavActions[_ngcontent-%COMP%]   .infoNavActionItem[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover, .dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .infoNavActions[_ngcontent-%COMP%]   .infoNavActionItem[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover, dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .infoNavActions[_ngcontent-%COMP%]   .infoNavActionItem[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:var(--neutral-primary-color, #333333)}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .legacyQnaWrapper[_ngcontent-%COMP%] > .infoNavActions[_ngcontent-%COMP%]   .infoNavActionItem.infoNavActionItemDisabled[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .legacyQnaWrapper[_ngcontent-%COMP%] > .infoNavActions[_ngcontent-%COMP%]   .infoNavActionItem.infoNavActionItemDisabled[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .infoNavActions[_ngcontent-%COMP%]   .infoNavActionItem.infoNavActionItemDisabled[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .infoNavActions[_ngcontent-%COMP%]   .infoNavActionItem.infoNavActionItemDisabled[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--neutral-tertiary-alt-color, #C8C8C8)}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .legacyQnaWrapper[_ngcontent-%COMP%] > .infoNavActions[_ngcontent-%COMP%]   .infoNavActionItem.infoNavActionItemDisabled[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover, dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .legacyQnaWrapper[_ngcontent-%COMP%] > .infoNavActions[_ngcontent-%COMP%]   .infoNavActionItem.infoNavActionItemDisabled[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover, .dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .infoNavActions[_ngcontent-%COMP%]   .infoNavActionItem.infoNavActionItemDisabled[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover, dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .infoNavActions[_ngcontent-%COMP%]   .infoNavActionItem.infoNavActionItemDisabled[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:var(--neutral-tertiary-alt-color, #C8C8C8)}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .legacyQnaWrapper[_ngcontent-%COMP%] > .infoNavActions[_ngcontent-%COMP%]   .infoNavActionItem[_ngcontent-%COMP%]   .pinButton[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .legacyQnaWrapper[_ngcontent-%COMP%] > .infoNavActions[_ngcontent-%COMP%]   .infoNavActionItem[_ngcontent-%COMP%]   .pinButton[_ngcontent-%COMP%], .dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .infoNavActions[_ngcontent-%COMP%]   .infoNavActionItem[_ngcontent-%COMP%]   .pinButton[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%]   .infoNavActions[_ngcontent-%COMP%]   .infoNavActionItem[_ngcontent-%COMP%]   .pinButton[_ngcontent-%COMP%]{transform:rotate(-45deg)}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%] > button[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardControlsWrapper[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{vertical-align:top}.dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   downgraded-flyout[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   downgraded-flyout[_ngcontent-%COMP%], .dashboardContainerView[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   flyout[_ngcontent-%COMP%], dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   flyout[_ngcontent-%COMP%]{margin-top:40px;position:relative}dashboard-edit-mobile-display[_ngcontent-%COMP%]   .mainContent[_ngcontent-%COMP%]   .dashboardSliderMain[_ngcontent-%COMP%]{margin-top:0}.dashboardViewSlider[_ngcontent-%COMP%]   .dashboard[_ngcontent-%COMP%]{position:absolute;height:100%;width:100%;overflow:auto;right:0;-ms-overflow-style:scrollbar;transform-origin:0 0 0;transition:transform .5s}.dashboardViewSlider[_ngcontent-%COMP%]   .dashboard.transitioning[_ngcontent-%COMP%]   ul.tileContainer[_ngcontent-%COMP%] > li.dashboardTile[_ngcontent-%COMP%]{transition:none!important}.dashboardViewSlider[_ngcontent-%COMP%]   .dashboard[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{display:block;overflow:auto;height:100%;padding-top:250px;width:520px;margin:0 auto;text-align:center}.dashboardViewSlider[_ngcontent-%COMP%]   .dashboard[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:400}.dashboardViewSlider[_ngcontent-%COMP%]   .dashboard[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]   span.tileLoadErrorMessage[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{color:var(--data-color9, #3599B8);text-decoration:none}.dashboardViewSlider[_ngcontent-%COMP%]   .dashboard[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block;margin:25px auto}.duplicateDialog[_ngcontent-%COMP%]   .dashboardSaveAsName[_ngcontent-%COMP%]{width:100%;box-sizing:border-box;margin-top:10px;margin-bottom:20px;line-height:19px}.infonav-dialogActions[_ngcontent-%COMP%]   #duplicateDashboardBtn[_ngcontent-%COMP%]{background-color:var(--theme-primary-accessible-color, #FFE642);border-color:var(--theme-primary-accessible-color, #FFE642)}.infonav-dialogActions[_ngcontent-%COMP%]   #duplicateDashboardBtn[_ngcontent-%COMP%]:hover, .infonav-dialogActions[_ngcontent-%COMP%]   #duplicateDashboardBtn[_ngcontent-%COMP%]:focus{background-color:var(--theme-primary-color, #F2C811);border-color:inherit}.infonav-dialogActions[_ngcontent-%COMP%]   #duplicateCancelBtn[_ngcontent-%COMP%]{background-color:var(--neutral-light-color, #EAEAEA);border-color:var(--neutral-light-color, #EAEAEA)}.infonav-dialogActions[_ngcontent-%COMP%]   #duplicateCancelBtn[_ngcontent-%COMP%]:hover, .infonav-dialogActions[_ngcontent-%COMP%]   #duplicateCancelBtn[_ngcontent-%COMP%]:focus{background-color:var(--neutral-tertiary-alt-color, #C8C8C8);border-color:inherit}ul.additionalMenus[_ngcontent-%COMP%]{min-width:200px;border:none}ul.additionalMenus[_ngcontent-%COMP%]   button.dropdown-item[_ngcontent-%COMP%]{padding:10px 13px}ul.additionalMenus[_ngcontent-%COMP%]   button.dropdown-item[_ngcontent-%COMP%]:hover{background-color:var(--neutral-light-color, #EAEAEA)}ul.additionalMenus[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{padding:10px 13px}ul.additionalMenus[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover{background-color:var(--neutral-light-color, #EAEAEA)}ul.additionalMenus[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]   .dropdown-label[_ngcontent-%COMP%]{font-size:12px}"],changeDetection:0}),e}(f.w),kt=l(59968),xn=function(e){return{nonInteractiveVisuals:e}};function gr(n,e){if(1&n){var t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",5)(1,"dashboard-new",6),o.\u0275\u0275listener("onTileClick",function(g){o.\u0275\u0275restoreView(t);var O=o.\u0275\u0275nextContext(2);return o.\u0275\u0275resetView(O.onTileClick(g))}),o.\u0275\u0275pipe(2,"async"),o.\u0275\u0275pipe(3,"async"),o.\u0275\u0275elementEnd()()}if(2&n){var s,r=o.\u0275\u0275nextContext().ngIf,a=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("dashboardId",r.dashboardObjectId)("layoutStrategyParams",r.layoutStrategyParams)("isReadonly",!0)("isGravityEnabled",r.isGravityEnabled)("themeName",o.\u0275\u0275pipeBind1(2,8,a.theme$).name)("ngStyle",null==(s=o.\u0275\u0275pipeBind1(3,10,a.theme$))?null:s.styles)("ngClass",o.\u0275\u0275pureFunction1(12,xn,a.nonInteractiveVisuals))("disableInteractions",!1)}}function Ps(n,e){1&n&&(o.\u0275\u0275elementStart(0,"div",7),o.\u0275\u0275element(1,"i",8)(2,"div",9),o.\u0275\u0275elementEnd())}var Ms=function(e,t,r){return{"is-dynamic-layout":e,"tooltips-enabled":t,hasTileSpotlight:r}};function Os(n,e){if(1&n&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"div",1),o.\u0275\u0275element(2,"div",2),o.\u0275\u0275pipe(3,"async"),o.\u0275\u0275template(4,gr,4,14,"div",3),o.\u0275\u0275template(5,Ps,3,0,"div",4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerEnd()),2&n){var a,t=e.ngIf,r=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275classMapInterpolate1("mobileLayout ",r.hostType," fillAvailableSpace"),o.\u0275\u0275property("ngClass",o.\u0275\u0275pureFunction3(10,Ms,t.isDynamicLayout,!r.nonInteractiveVisuals,t.hasTileSpotlight)),o.\u0275\u0275advance(1),o.\u0275\u0275styleProp("--mobile-consumption-background-style",null==(a=o.\u0275\u0275pipeBind1(3,8,r.theme$))?null:a.background),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",t.dashboardObjectId&&!t.showNoPinnedTiles),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",t.showNoPinnedTiles)}}var Zr={dashboardObjectId:null,showNoPinnedTiles:!1,layoutStrategyParams:void 0,isDynamicLayout:!1,isGravityEnabled:!0,hasTileSpotlight:!1},_s=function(n){function e(t,r,a,s,d,g,O,w,D,V,j,ne,Z){var W=n.call(this)||this;return W.dashboardHostTileNewService=s,W.errorService=d,W.metaViewport=g,W.progressNotificationService=O,W.syncListenerService=w,W.store=D,W.tileConfigService=V,W.tileSpotlightService=j,W.globalEventBridge=ne,W.element=Z,W.hostType=r.toLowerCase(),W.nonInteractiveVisuals=!1===a.getQueryBooleanValue("tooltipsEnabled"),W.theme$=t.themeChanged$,W.dashboard$=W.store.select(c.$).pipe((0,N.h)(Boolean),(0,X.R)(W.onDestroy$),(0,ae.U)(function(De){return _.first(De.dashboards)})),W.state$=(0,R.aj)([t.viewport$,W.dashboard$,W.store.select(h.aS),W.tileSpotlightService.isSpotlightSet()]).pipe((0,ae.U)(function(De){var _e=De[0],ft=De[1],lt=De[2],Ft=De[3];if(null==ft)return Zr;lt=_.map(lt??[],function(xt){return xt.$config||W.tileConfigService.parseTileConfig(xt),xt});var vt=t.createLayoutStrategyParams(_e,lt),It=2===vt.type&&vt.hasCustomLayout;return{dashboardObjectId:ft.objectId,showNoPinnedTiles:W.showNoPinnedTiles(lt,It),layoutStrategyParams:vt,isDynamicLayout:It,isGravityEnabled:2===vt.type||!!ft.gravityEnabled,hasTileSpotlight:Ft}}),(0,xe.x)(function(De,_e){return _.isEqual(De,_e)}),(0,Be.O)(Zr)),t.spotlight$.pipe((0,X.R)(W.onDestroy$)).subscribe(function(De){De?(W.tileSpotlightService.setSpotlight(De.tileId),(0,E.pm)(u.z.modernDashboardTileRepeatFinished,W.globalEventBridge).then(function(){setTimeout(function(){return W.scrollToSpotlightTile()},200)})):W.tileSpotlightService.clearSpotlights()}),W}return(0,M.ZT)(e,n),e.prototype.ngOnInit=function(){this.metaViewport.isScalable=!0,this.progressNotificationService.finishedLoadingAngularApp(),this.syncListenerService.subscribeOnce()},e.prototype.ngOnDestroy=function(){return this.metaViewport.isScalable=!1,this.tileSpotlightService.clearSpotlights(),n.prototype.ngOnDestroy.call(this)},e.prototype.onTileClick=function(t){var r=this;this.lifecycleSubscriptions.add(this.store.select(h.YH({id:t.id})).pipe((0,he.q)(1),(0,Se.M)(this.dashboard$),(0,ae.U)(function(a){return(0,ce.D)(r.dashboardHostTileNewService.invokeOpenTile(a[0],a[1]))}),(0,Le.K)(function(a){return r.errorService.shipAssert("DashboardHostTileNewService","invokeOpenTile","invokeOpenTile is failed error: ".concat(a)),(0,K.of)("")})).subscribe())},e.prototype.showNoPinnedTiles=function(t,r){return!(_.isEmpty(t)||!r)&&m.vz(t)===t.length},e.prototype.scrollToSpotlightTile=function(){var t=this;this.lifecycleSubscriptions.add(this.store.select(h.Sv).pipe((0,he.q)(1)).subscribe(function(r){var a=_.isArray(r)?_.head(r):r,s=t.element.nativeElement.querySelector(".pbi-grid-item[data-grid-item-id='".concat(a,"']"));s&&(window.scrollTo(s.getBoundingClientRect().left,0),s.scrollIntoView())}))},e.\u0275fac=function(r){return new(r||e)(o.\u0275\u0275directiveInject(ct.O),o.\u0275\u0275directiveInject(Y.r),o.\u0275\u0275directiveInject(it.r),o.\u0275\u0275directiveInject(Ue.d),o.\u0275\u0275directiveInject(ke.s),o.\u0275\u0275directiveInject(S._),o.\u0275\u0275directiveInject(ht.l),o.\u0275\u0275directiveInject(Ie.M),o.\u0275\u0275directiveInject(J.yh),o.\u0275\u0275directiveInject(Et.A),o.\u0275\u0275directiveInject(We),o.\u0275\u0275directiveInject(bt.Z),o.\u0275\u0275directiveInject(o.ElementRef))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["dashboard-host-new"]],features:[o.\u0275\u0275ProvidersFeature([i.y,T.B,{provide:x,useValue:{useWindowScroll:!0}}]),o.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:[[4,"ngIf"],[3,"ngClass"],[1,"dashboardBackground"],["class","dashboardViewSlider",4,"ngIf"],["class","emptyStateLabel",4,"ngIf"],[1,"dashboardViewSlider"],[1,"mobileDashboard","mobileDashboardConsumption",3,"dashboardId","layoutStrategyParams","isReadonly","isGravityEnabled","themeName","ngStyle","ngClass","disableInteractions","onTileClick"],[1,"emptyStateLabel"],[1,"circle","glyphicon","pbi-glyph-pinned","glyph-reg"],["localize","Consumption_Dashboard_Empty_State_Label",1,"emptyStateTitle"]],template:function(r,a){1&r&&(o.\u0275\u0275template(0,Os,6,14,"ng-container",0),o.\u0275\u0275pipe(1,"async")),2&r&&o.\u0275\u0275property("ngIf",o.\u0275\u0275pipeBind1(1,1,a.state$))},dependencies:[Pe.NgClass,Pe.NgIf,Pe.NgStyle,mo,kt.X,Pe.AsyncPipe],styles:["[_nghost-%COMP%]{background-color:#f1f1f1;min-width:250px;min-height:250px;-webkit-touch-callout:none;-webkit-user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0);overflow:initial}  .dashboard::-webkit-scrollbar-thumb{background:none}.emptyStateLabel[_ngcontent-%COMP%]{width:80%;top:50vh;transform:translateY(-50%);margin-left:10%}.dashboardBackground[_ngcontent-%COMP%]{background:var(--mobile-consumption-background-style, #F4F4F4);background-repeat:no-repeat;background-size:cover;height:100vh;width:100vw;position:fixed}dashboard-new[_ngcontent-%COMP%]{direction:ltr}  [dir=rtl] .cdk-visually-hidden{left:auto;right:0}"],changeDetection:0}),e}(f.w),Ss=l(64986),mr=l(84436),Xr=l(70785),Ts=l(83027),ea=l(81213),Is=l(90247),ws=function(n){function e(t,r,a,s,d){var g=n.call(this,d)||this;return g.localizationService=t,g.errorOptionsHelper=r,g.telemetryService=a,g.hostModalDialogService=s,g}return(0,M.ZT)(e,n),e.prototype.onErrorIconClicked=function(t){var r;if(t.isError){if(!t.errorTitle)return;var a=t.errorTitle,s=t.errorTitle,d=null===(r=t.errorDetails)||void 0===r?void 0:r.displayableErrorInfo;if(d)for(var g=0,O=d;g<O.length;g++){var w=O[g];if(w.errorInfoValue){a=w.errorInfoKey,s=w.errorInfoValue;break}}var D=this.errorOptionsHelper.getErrorInfo({title:a}),V=_.filter(D,function(Z){return Z.errorInfoKey&&Z.errorInfoValue}),j={};_.forEach(V,function(Z){j[Z.errorInfoKey]=Z.errorInfoValue});var ne={title:a,message:s,infoItems:j,dialogType:"TileError"};this.telemetryService.logEvent(mr.j0,{type:"Error"}),this.hostModalDialogService.showModalDialog(ne)}else ne={title:this.localizationService.get("Details"),message:t.message,dialogType:"TileError"},this.telemetryService.logEvent(mr.j0,{type:"Warning"}),this.hostModalDialogService.showModalDialog(ne)},e.\u0275fac=function(r){return new(r||e)(o.\u0275\u0275inject(Jt.o),o.\u0275\u0275inject(Ts.H),o.\u0275\u0275inject(ut.y0),o.\u0275\u0275inject(Is.Q),o.\u0275\u0275inject(ea.T))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(Xr.k),xs={provide:Xr.k,useExisting:ws},As=l(10367),Es=l(65472),Ds=function(){function n(e,t,r,a){this.dashboardHostTileService=e,this.errorService=t,this.hostService=r,this.telemetryService=a}return n.prototype.getAction=function(e){this.errorService.shipAssert("MobileTileOptionsActionsService","getAction","not implemented")},n.prototype.getMenuItemAction=function(e){this.errorService.shipAssert("MobileTileOptionsActionsService","getMenuItemAction","not implemented")},n.prototype.getMenuItems=function(e,t,r){return(0,M.mG)(this,void 0,void 0,function(){var a,s,d,g,O,w,V=this;return(0,M.Jh)(this,function(j){switch(j.label){case 0:return[4,this.dashboardHostTileService.createOpenTileArgumentsContracts(e.tileContract,e.artifact,!1)];case 1:return a=j.sent(),[4,this.hostService.invoke("TileMenuActionsService","getActionsFromHost",a)];case 2:for(s=j.sent(),d=[],g=function(Z){d.push({text:Z.displayName,execute:function(){return V.execute(Z,e.tileContract,e.artifact)},iconClass:Z.icon,tooltip:Z.displayName})},O=0,w=s.actions;O<w.length;O++)g(w[O]);return[2,d]}})})},n.prototype.onContextMenuOpened=function(e,t){this.telemetryService.logEvent(mr.pj,{tileId:t,dashboardId:e,source:"click"})},n.prototype.execute=function(e,t,r){return(0,M.mG)(this,void 0,void 0,function(){var s;return(0,M.Jh)(this,function(d){switch(d.label){case 0:if(0!==e.argumentsType)throw pe.fF.assert(function(){return!1},"arguments type not supported - ".concat(e.argumentsType," , action: + ").concat(e.name)),new Error("arguments type not supported: ".concat(e.argumentsType));return s={actionName:e.name},[4,this.dashboardHostTileService.createOpenTileArgumentsContracts(t,r,!1)];case 1:return s.arguments=d.sent(),this.hostService.invokeAndForget("TileMenuActionsService","RunAction",s),[2,void 0]}})})},n.\u0275fac=function(t){return new(t||n)(o.\u0275\u0275inject(Ue.d),o.\u0275\u0275inject(ke.s),o.\u0275\u0275inject(Es.x),o.\u0275\u0275inject(ut.y0))},n.\u0275prov=o.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n}(),ks={provide:As.y,useExisting:Ds},ei=l(9398),fr=l(74804),vr=l(80981),Rs=l(60661),Cr=l(61903),Fs=l(95462);function Ls(n,e){var t={id:0,name:(0,Rs.yZ)(n.visualContainers),config:vr.d7,layouts:(0,we.Br)([{id:e,position:{x:0,y:0,width:1024,height:768}}])},r={visualContainer:(0,Cr.oj)(t,e),exploration:Vs(n)};r.exploration.contract.settings.allowChangeFilterTypes=!0;var a=r.visualContainer;return a.overridePosition={x:0,y:0,width:1024,height:768},a.allowDeferredRendering=!0,a.hostServices={getFilters:function(){for(var d=[],g=a.contract.filters||[],O=0,w=g=g.concat(n.filters||[]);O<w.length;O++){var V=w[O].filter;V&&d.push(V)}return{dataFilter:Fs.yl.merge(d),dataFiltersUnmerged:d.map(function(j){return{filter:j}}),highlightFilter:null}},getDataSourceVariables:function(){},getVisualRelationshipFilterAction:function(){return 0},selectDataPoint:function(){},setVisualRelationshipFilterAction:_.noop},r}function Vs(n){var e={dataSources:(0,fr.yd)(),sections:[n],themeCollection:{},settings:{}};return(0,Cr.vi)(e,0,void 0,void 0,void 0)}var Bs=l(46391),Us=l(22543),js=l(48706),Ns=l(85947),Nn=l(8590),zs=l(21728),$s=l(66794),na=l(34394),Ws=l(46616),zn=l(57871),Hs=l(58291),Qs=l(5708),$n=l(43286),oa=l(51291),qs=l(35510),Js=l(9936),An=l(42195),Ys=l(1731),Zs=l(3404),Xs=l(94717),el=l(72262),ia=l(83008),tl=l(59142),nl=l(48145),ra=l(77200),ol=l(57568),il=l(96321),rl=l(84916),aa="PBI.Navigation.RouteChange",sa=(q.cx[aa]=(0,q.b1)(aa,{logExpAssignment:!0}),"PBI.Breadcrumb.ErrorTrace"),la=(q.cx[sa]=(0,q.b1)(sa),"PBI.Breadcrumb.Error"),ca=(q.cx[la]=(0,q.b1)(la),"PBI.Navigation.ProlongedInfo"),da=(q.cx[ca]=(0,q.b1)(ca),"PBI.Navigation.Stats"),pa="PBI.Navigation.ToTab",ua=(q.cx[da]=(0,q.b1)(da),"PBI.Navigation.ODataSpecialChar"),al=q.cx[ua]=(0,q.b1)(ua),ti=(0,q.b1)(pa);q.cx[pa]=ti;var br="appid",ha="appInstanceId",yt="groups",Xt="me",an="apps",fo="workbooks",yr="shared-views",ma="gateways",gn="admin-portal";function ni(n){if(_.isEmpty(n.children))return n;for(var e=0,t=n.children;e<t.length;e++)return ni(t[e])}function Oe(n){return ni(function(n){return n.routerState.snapshot.root}(n))}function va(n,e,t,r,a,s,d){var g=Oe(n),O=g.paramMap.get(br),w=g.paramMap.get(ha);return w?"groups/me/apps/".concat(O,"/instances/").concat(w,"/").concat(d,"/").concat(a,"/tiles/").concat(t,"/infocus"):O?"groups/me/apps/".concat(O,"/").concat(d,"/").concat(a,"/tiles/").concat(t,"/infocus"):g.data.legacyInSharedWithMeView?"sharedwithme/".concat(d,"/").concat(r,"/tiles/").concat(e,"/infocus"):"groups/".concat(s,"/").concat(d,"/").concat(r,"/tiles/").concat(e,"/infocus")}var mt=l(33567),Kt=l(74076),vo=l(89424),Pr=l(43633),fl=l(49889),vl=l(48723),Cl=new o.InjectionToken("AppConsumptionConfigService"),bl=l(69712),yl=l(98775),Pl=l(4444),Ml=l(44527),Ca=l(59694),ba=window,Ol=function(){function n(e,t,r){void 0===r&&(r=!1),this.redirectPath=e,this.appSettings=t,this.useMsPbi=r}return n.webRedirectUrlHelper=function(e){return this._webRedirectUrlHelper||(this._webRedirectUrlHelper=new n("Redirect",e)),this._webRedirectUrlHelper},n.mobileRedirectUrlHelper=function(e){return this._mobileRedirectUrlHelper||(this._mobileRedirectUrlHelper=new n("MobileRedirect.html",e)),this._mobileRedirectUrlHelper},n.prototype.getAppRedirectUrl=function(e,t,r,a){return pe.fF.assertValue(t,"getAppRedirectUrl: appId"),this.getRedirectUrl({action:"OpenApp",groupObjectId:e,context:a,appId:t,ctid:r})},n.prototype.getDashboardRedirectUrl=function(e,t,r,a,s,d,g,O){return pe.fF.assert(function(){return"MSTeams"===g||"ChatInTeams"===g||!_.isEmpty(e)||!_.isEmpty(t)},"getDashboardRedirectUrl: groupId or appId shouldn't be null"),pe.fF.assertValue("MSTeams"===g||"ChatInTeams"===g||r,"getDashboardRedirectUrl: dashboardObjectId"),this.getRedirectUrl({action:"OpenDashboard",context:s,groupObjectId:e,appId:t,dashboardObjectId:r,ctid:a,tileId:d,pbi_source:g,openDashboardSource:O})},n.prototype.getReportRedirectUrl=function(e,t,r,a,s,d,g,O,w){pe.fF.assert(function(){return"MSTeams"===O||"ChatInTeams"===O||!_.isEmpty(e)||!_.isEmpty(t)},"getReportRedirectUrl: groupId or appId shouldn't be null"),pe.fF.assertValue("MSTeams"===O||"ChatInTeams"===O||r,"getReportRedirectUrl: reportObjectId");var D={action:1===g?"OpenRdlReport":"OpenReport",context:d,groupObjectId:e,appId:t,reportObjectId:r,ctid:s,pbi_source:O,bookmarkGuid:w};return _.isEmpty(a)||(D.reportPage=a),this.getRedirectUrl(D)},n.prototype.getDatasetRedirectUrl=function(e,t,r,a){return pe.fF.assert(function(){return"MSTeams"===a||"ChatInTeams"===a||!_.isEmpty(e)},"getDatasetRedirectUrl: groupId shouldn't be null"),pe.fF.assertValue("MSTeams"===a||"ChatInTeams"===a||t,"getDatasetRedirectUrl: datasetObjectId"),this.getRedirectUrl({action:"OpenDataset",context:r,groupObjectId:e,datasetObjectId:t,pbi_source:a})},n.prototype.getScorecardRedirectUrl=function(e,t,r,a,s){return this.getRedirectUrl({action:"OpenScorecard",groupObjectId:e,scorecardObjectId:t,ctid:r,context:a,pbi_source:s})},n.prototype.getWorkbookRedirectUrl=function(e,t,r,a,s){return pe.fF.assert(function(){return!_.isEmpty(e)||!_.isEmpty(t)},"getDashboardRedirectUrl: groupId or appId shouldn't be null"),pe.fF.assertValue(r,"getWorkbookRedirectUrl: workbookUniqueId"),this.getRedirectUrl({action:"OpenWorkbook",context:s,groupObjectId:e,appId:t,workbookUniqueId:r,ctid:a})},n.prototype.getTileRedirectUrl=function(e,t,r,a,s){return pe.fF.assert(function(){return!_.isEmpty(e)||!_.isEmpty(t)},"getDashboardRedirectUrl: groupId or appId shouldn't be null"),pe.fF.assertValue(r,"getDashboardRedirectUrl: dashboardObjectId"),pe.fF.assertValue(a,"getTileRedirectUrl: tileObjectId"),this.getRedirectUrl({action:"OpenTile",context:s,groupObjectId:e,appId:t,dashboardObjectId:r,tileObjectId:a})},n.prototype.getServiceAppInstallRedirectUrl=function(e,t,r,a){pe.fF.assertValue(e,"getAppRedirectUrl: appKey"),pe.fF.assertValue(t,"getAppRedirectUrl: packageKey");var s={action:"InstallApp",appId:e,packageKey:t.replace("=",""),ownerId:r};_.isEmpty(a)||(s.buildVersion=a);var g=(window.location.protocol+"//"+window.location.host).replace(ba.baseUrl,ba.feUrl);return this.getRedirectUrl(s,g)},n.prototype.getLineageViewRedirectUrl=function(e,t){return pe.fF.assert(function(){return!_.isEmpty(e)},"getLineageViewRedirectUrl: groupId or appId shouldn't be null"),pe.fF.assertValue(t,"getLineageViewRedirectUrl: reportObjectId"),this.getRedirectUrl({action:"OpenLineageView",groupObjectId:e,reportObjectId:t})},n.prototype.getRedirectUrl=function(e,t){if(pe.fF.assertValue(e,"getRedirectUrl: params"),this.useMsPbi){var r=e.action;return e=this.removeEmptyParams(e,this.useMsPbi),(0,Ca.W)("{0}/{1}?{2}","mspbi://app",r,$.param(e))}return e=this.removeEmptyParams(e),(0,Ca.W)("{0}/{1}?{2}",t||this.appSettings.baseUrl,this.redirectPath,$.param(e))},n.prototype.removeEmptyParams=function(e,t){void 0===t&&(t=!1);var r=[];return(_.isEmpty(e.groupObjectId)||e.groupObjectId===Qe.wku)&&r.push("groupObjectId"),_.isEmpty(e.appId)&&r.push("appId"),_.isEmpty(e.context)&&r.push("context"),_.isEmpty(e.reportObjectId)&&r.push("reportObjectId"),_.isEmpty(e.ctid)&&r.push("ctid"),_.isEmpty(e.openDashboardSource)&&r.push("openDashboardSource"),_.isEmpty(e.tileId)&&r.push("tileId"),_.isEmpty(e.dashboardObjectId)&&r.push("dashboardObjectId"),_.isEmpty(e.bookmarkGuid)&&r.push("bookmarkGuid"),_.isEmpty(e.pbi_source)&&r.push("pbi_source"),(_.isEmpty(e.action)||t)&&r.push("action"),r.length>0&&(e=_.omit(e,r)),e},n}(),ln=l(48066),Mr=l(38078),_l=l(67758),Or=l(88255),Sl=l(76746),Tl=function(){function n(){}return n.prototype.open=function(e){window.open(e,"_blank")},n.\u0275prov=o.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac=function(t){return new(t||n)},providedIn:"root"}),n}(),ya=window,Il=function(){function n(e,t,r,a,s,d,g,O,w,D,V,j,ne,Z,W){var De=this;this.activatedRoute=e,this.dialogService=t,this.featureSwitchService=r,this.localizationService=a,this.router=s,this.store=d,this.telemetryService=g,this.location=O,this.shellCapabilitiesService=w,this.appSettings=D,this.extensionManifestService=V,this.window=j,this.mobileUniversalLinkService=ne,this.mobileAgent=Z,this.appConsumptionConfigService=W,this.shellCapabilitiesService.getCapabilities$().subscribe(function(_e){return De.shellCapabilities=_e}),this.redirectUrlHelper=new Ol("RedirectPath",this.appSettings,!!Z),this.dashboardSegment="dashboards"}return n.prototype.navigateToReport=function(e,t,r){return(0,M.mG)(this,void 0,void 0,function(){var a;return(0,M.Jh)(this,function(s){switch(s.label){case 0:return(0,mt.mv)(e,"report navigation params"),[4,this.openInNewTab(r)];case 1:return a=s.sent(),[2,this.navigateToReportInternal(e,!1,void 0,a)]}})})},n.prototype.navigateToReportInternal=function(e,t,r,a,s){var d={},g="/groups/".concat(e.groupGUID,"/reports/").concat(e.reportGUID);e.appGUID?((0,mt.mv)(e.reportOriginalGUID,"report navigation params - reportOriginalGUID"),g=e.appInstanceId?"/groups/".concat(Xt,"/apps/").concat(e.appGUID,"/instances/").concat(e.appInstanceId,"/reports/").concat(e.reportOriginalGUID):"/groups/".concat(Xt,"/apps/").concat(e.appGUID,"/reports/").concat(e.reportOriginalGUID)):this.inSharedWithMeView()&&(g="/sharedwithme/reports/".concat(e.reportGUID)),e.reportPage&&(g+="/".concat(e.reportPage)),d.filter=e.filter,d.$filter=e.$filter,d.bookmarkGuid=e.bookmarkGuid,d.showInsights=e.showInsightsPane,d.instantiationMode=e.instantiationMode;var O={queryParamsHandling:"merge",queryParams:d};return r&&(O.state={reason:r}),this.showMobileView()&&!s?(this.telemetryService.logEvent(ti,{route:g,reason:"openUniversalLink"}),void this.openUniversalLink(g)):(e.subscriptionGUID||t?g+="/subscriptions/".concat(e.subscriptionGUID||""):_.isEmpty((0,ln.en)(this.location.path()).path.match(/\/share$/))?_.isEmpty((0,ln.en)(this.location.path()).path.match(/\/relatedContent$/))||(g+="/relatedContent"):g+="/share",a||e.fallbackToShared?(this.telemetryService.logEvent(ti,{route:g,reason:"fallback"}),void this.openUrlInNewTab(this.router.createUrlTree([g],O).toString())):(this.telemetryService.logEvent(ti,{route:g,navigationExtras:O,reason:"router navigation with navigationExtras"}),this.router.navigate([g],O)))},n.prototype.navigateToReportImmersiveCopilot=function(e){(0,mt.mv)(e,"navigateToReportImmersiveCopilot - params");var t="/copilot/groups/".concat(e.groupGUID,"/reports/").concat(e.reportGUID);return this.router.navigate([t],{queryParamsHandling:"preserve"})},n.prototype.navigateToReportAccessRequest=function(e,t,r){var a={},d="/groups/".concat(t,"/permission/report/").concat(2,"/").concat(e,"/pendingAccessRequests");return a.accessrequestuseroid=r,this.router.navigate([d],{queryParamsHandling:"merge",queryParams:a})},n.prototype.navigateToSupportPage=function(){this.openUrlInNewTab("https://powerbi.microsoft.com/en-us/support/pro/")},n.prototype.navigateToRdlReport=function(e,t,r,a){return(0,M.mG)(this,void 0,void 0,function(){var s;return(0,M.Jh)(this,function(d){switch(d.label){case 0:return(0,mt.mv)(e,"report navigation params"),[4,this.openInNewTab(r)];case 1:return s=d.sent(),[2,this.navigateToRdlReportInternal(e,!1,s,a)]}})})},n.prototype.navigateToRdlReportInternal=function(e,t,r,a){pe.fF.assertValue(e,"report navigation params"),pe.fF.assertValue(e.rdlReportGUID||e.appGUID&&e.rdlReportOriginalGUID,"report navigation params - rdlReportGUID or appGUID with rdlReportOriginalGUID");var s=e.groupGUID;s||this.store.select(Kt.CW).pipe((0,he.q)(1)).subscribe(function(O){return s=O});var d=[yt,s];e.appGUID?d.push(an,e.appGUID,"rdlreports",e.rdlReportOriginalGUID):d.push("rdlreports",e.rdlReportGUID),(t||e.subscriptionGUID)&&d.push("subscriptions",e.subscriptionGUID||"");var g="/groups/".concat(s,"/rdlreports/").concat(e.rdlReportGUID);if(e.appGUID?g=e.appInstanceId?"/groups/".concat(s,"/apps/").concat(e.appGUID,"/instances/").concat(e.appInstanceId,"/rdlreports/").concat(e.rdlReportGUID):"/groups/".concat(s,"/apps/").concat(e.appGUID,"/rdlreports/").concat(e.rdlReportGUID):this.inSharedWithMeView()&&(g="/groups/me/rdlreports/".concat(e.rdlReportGUID)),this.showMobileView())this.openUniversalLink(g);else{if(!r&&!e.fallbackToShared)return this.router.navigate(d,(0,M.pi)({queryParamsHandling:"preserve"},void 0!==a?.saveState?{state:{data:{saveState:a?.saveState}}}:{}));this.openUrlInNewTab(this.router.createUrlTree(d,{queryParamsHandling:"preserve"}).toString())}},n.prototype.navigateToFallbackState=function(){return(0,M.mG)(this,void 0,void 0,function(){return(0,M.Jh)(this,function(e){return this.router.navigate(["/"],{queryParamsHandling:"preserve"}),[2]})})},n.prototype.navigateToApps=function(){var e="/groups/".concat(Xt,"/apps");this.router.navigateByUrl(e,{})},n.prototype.navigateToApp=function(e,t,r){return(0,M.mG)(this,void 0,void 0,function(){var a;return(0,M.Jh)(this,function(d){switch(d.label){case 0:return a="/groups/".concat(Xt,"/apps/").concat(e),t&&(a="".concat(a,"/instances/").concat(t)),[4,this.openInNewTab(r)];case 1:return d.sent()?(this.openUrlInNewTab(this.router.createUrlTree([a],{queryParamsHandling:"preserve"}).toString()),[2]):this.showMobileView()?(this.openUniversalLink(a),[2]):[2,this.router.navigate([a],{queryParamsHandling:"preserve"})]}})})},n.prototype.toggleArchivedContent=function(e){void 0===e&&(e=null),ya.initialDashboardContainer&&(window.location.href=window.location.protocol+"//"+window.location.host+"?tenantId="+ya.initialDashboardContainer.previousTenantId)},n.prototype.insertGroupAndNavigateToDashboardByGUID=function(e,t,r){return(0,M.mG)(this,void 0,void 0,function(){var a,s,d;return(0,M.Jh)(this,function(g){switch(g.label){case 0:return a={queryParamsHandling:"preserve"},[4,this.openInNewTab(r)];case 1:return s=g.sent(),d="/groups/".concat(t,"/").concat(this.dashboardSegment,"/").concat(e),s?(this.openUrlInNewTab(this.router.createUrlTree(["/groups/".concat(t,"/").concat(this.dashboardSegment,"/").concat(e)],a).toString()),[2]):this.showMobileView()?(this.openUniversalLink(d),[2]):[2,this.router.navigate([d],a)]}})})},n.prototype.navigateToSharedDashboardByGUID=function(e,t){return(0,M.mG)(this,void 0,void 0,function(){var r;return(0,M.Jh)(this,function(s){switch(s.label){case 0:return r=this.showMobileView()?"/groups/me/".concat(this.dashboardSegment,"/").concat(e):"/sharedwithme/dashboards/".concat(e),[4,this.openInNewTab(t)];case 1:return s.sent()?(this.openUrlInNewTab(this.router.createUrlTree(["/sharedwithme/dashboards/".concat(e)],{queryParamsHandling:"preserve"}).toString()),[2]):this.showMobileView()?(this.openUniversalLink(r),[2]):[2,this.router.navigate([r],{queryParamsHandling:"preserve"})]}})})},n.prototype.insertGroupAndNavigateToWorkbookByUniqueId=function(e,t,r){return(0,M.mG)(this,void 0,void 0,function(){var a,s;return(0,M.Jh)(this,function(g){switch(g.label){case 0:return s=[yt,t],this.store.select(vo.Cu).pipe((0,he.q)(1)).subscribe(function(O){return a=O&&O.providerKey}),a&&s.push(an,a),s.push(fo,e),[4,this.openInNewTab(r)];case 1:return g.sent()?(this.openUrlInNewTab(this.router.createUrlTree(s,{queryParamsHandling:"preserve"}).toString()),[2]):this.showMobileView()?(this.openUniversalLink(this.router.createUrlTree(s,{queryParamsHandling:"preserve"}).toString(),!0),[2]):[2,this.router.navigate(s,{queryParamsHandling:"preserve"})]}})})},n.prototype.navigateToGroupByGUID=function(e){if(!this.showMobileView())return this.router.navigate([yt,e],{queryParamsHandling:"preserve"});var t=this.router.createUrlTree([yt,e],{queryParamsHandling:"preserve"}).toString();this.openUniversalLink(t,!0)},n.prototype.navigateToDashboardByGUID=function(e,t,r){return(0,M.mG)(this,void 0,void 0,function(){var a,s,d;return(0,M.Jh)(this,function(O){switch(O.label){case 0:return a=this.inSharedWithMePath()&&this.showMobileView()&&this.currentDashboardGUID===e?"/sharedwithme":"/groups/".concat(this.currentGroupGUID),s="".concat(a,"/").concat(this.dashboardSegment,"/").concat(e),d={queryParamsHandling:"preserve"},[4,this.openInNewTab(t)];case 1:return O.sent()||r?(this.openUrlInNewTab(this.router.createUrlTree([s],d).toString()),[2]):this.showMobileView()?(this.openUniversalLink(s),[2]):[2,this.router.navigate([s],d)]}})})},n.prototype.navigateToDashboardMobileAuthoringByGUID=function(e,t){return(0,M.mG)(this,void 0,void 0,function(){return(0,M.Jh)(this,function(a){switch(a.label){case 0:return[4,this.openInNewTab(t)];case 1:return a.sent()?(this.openUrlInNewTab(this.router.createUrlTree(["/groups/".concat(this.currentGroupGUID,"/").concat(this.dashboardSegment,"/").concat(e,"/mobileAuthoring")],{queryParamsHandling:"preserve"}).toString()),[2]):[2,this.router.navigate(["/groups/".concat(this.currentGroupGUID,"/").concat(this.dashboardSegment,"/").concat(e,"/mobileAuthoring")],{queryParamsHandling:"preserve"})]}})})},n.prototype.navigateToAppDashboardByGUID=function(e,t,r,a,s){return void 0===a&&(a=null),(0,M.mG)(this,void 0,void 0,function(){var d;return(0,M.Jh)(this,function(O){switch(O.label){case 0:return d="/groups/".concat(Xt,"/apps/").concat(r),a&&(d+="/instances/".concat(a)),d+="/".concat(this.dashboardSegment,"/").concat(t),[4,this.openInNewTab(s)];case 1:return O.sent()?(this.openUrlInNewTab(this.router.createUrlTree([d],{queryParamsHandling:"preserve"}).toString()),[2]):this.showMobileView()?(this.openUniversalLink(d),[2]):[2,this.router.navigate([d],{queryParamsHandling:"preserve"})]}})})},n.prototype.navigateToDashboardAnnotations=function(e,t,r){return(0,M.mG)(this,void 0,void 0,function(){var a,s,d,g,O;return(0,M.Jh)(this,function(D){switch(D.label){case 0:return a=e.conversationId,s=e.commentId,d=e.appGUID,g=_.isEmpty(d)?"/groups/".concat(e.groupGUID,"/").concat(this.dashboardSegment,"/").concat(e.artifactGUID):"/groups/".concat(Xt,"/apps/").concat(d,"/").concat(this.dashboardSegment,"/").concat(e.artifactOriginalGUID),O={queryParamsHandling:"merge",queryParams:{conversationId:a,commentId:s}},[4,this.openInNewTab(r)];case 1:return D.sent()?(this.openUrlInNewTab(this.router.createUrlTree([g],O).toString()),[2]):[2,this.router.navigate([g],O)]}})})},n.prototype.navigateToAppWorkbookByUniqueId=function(e,t,r,a){return(0,M.mG)(this,void 0,void 0,function(){var d;return(0,M.Jh)(this,function(g){switch(g.label){case 0:return[4,this.openInNewTab(a)];case 1:return g.sent()?(this.openUrlInNewTab(this.router.createUrlTree([yt,r||Xt,an,t,fo,e],{queryParamsHandling:"preserve"}).toString()),[2]):this.showMobileView()?(d=this.router.createUrlTree([yt,r||Xt,an,t,fo,e],{queryParamsHandling:"preserve"}).toString(),this.openUniversalLink(d,!0),[2]):[2,this.router.navigate([yt,r||Xt,an,t,fo,e],{queryParamsHandling:"preserve"})]}})})},n.prototype.navigateToDataset=function(e,t,r,a,s){return(0,M.mG)(this,void 0,void 0,function(){var d,O;return(0,M.Jh)(this,function(w){switch(w.label){case 0:return(0,mt.mv)(e,"dataset navigation params"),d="/groups/".concat(e.groupGuid,"/datasets/").concat(e.datasetDBName),null==s?[3,1]:(O=s,[3,3]);case 1:return[4,this.openInNewTab(r)];case 2:O=w.sent(),w.label=3;case 3:return O?(this.openUrlInNewTab(this.router.createUrlTree([d],{queryParamsHandling:"preserve"}).toString()),[2]):[2,this.router.navigate([d],{queryParamsHandling:"preserve",state:{data:{showNavPane:a},creationSource:e.reportCreationSource,creationMode:e.reportCreationMode,quickCreateFlowOperationId:e.quickCreateFlowOperationId,isNewDataset:!!e.isNewDataset}})]}})})},n.prototype.navigateToDatasetDetails=function(e,t,r,a){return(0,M.mG)(this,void 0,void 0,function(){var s;return(0,M.Jh)(this,function(g){switch(g.label){case 0:return s="/groups/".concat(e,"/datasets/").concat(t,"/details"),[4,this.openInNewTab(r)];case 1:return g.sent()?(this.openUrlInNewTab(this.router.createUrlTree([s],{queryParamsHandling:"preserve"}).toString()),[2]):[2,this.router.navigate([s],{queryParamsHandling:"preserve",state:{data:{showNavPane:a}}})]}})})},n.prototype.navigateToDatasetExploration=function(e,t,r,a){return(0,M.mG)(this,void 0,void 0,function(){var s;return(0,M.Jh)(this,function(g){switch(g.label){case 0:return s="/groups/".concat(e,"/datasets/").concat(t,"/explorations"),[4,this.openInNewTab(r)];case 1:return g.sent()?(this.openUrlInNewTab(this.router.createUrlTree([s],{queryParamsHandling:"preserve"}).toString()),[2]):[2,this.router.navigate([s],{queryParamsHandling:"preserve",state:{data:{showNavPane:a}}})]}})})},n.prototype.navigateToDatasetImmersiveCopilot=function(e){(0,mt.mv)(e,"navigateToDatasetImmersiveCopilot - params");var t="/copilot/groups/".concat(e.groupGuid,"/datasets/").concat(e.datasetDBName);return this.router.navigate([t],{queryParamsHandling:"preserve"})},n.prototype.navigateToDatasetModeling=function(e,t,r,a,s){return(0,M.mG)(this,void 0,void 0,function(){var d,O;return(0,M.Jh)(this,function(w){switch(w.label){case 0:return d="/groups/".concat(e,"/modeling/").concat(t,"/modelView"),null==s?[3,1]:(O=s,[3,3]);case 1:return[4,this.openInNewTab(r)];case 2:O=w.sent(),w.label=3;case 3:return O?(this.openUrlInNewTab(this.router.createUrlTree([d],{queryParamsHandling:"preserve"}).toString()),[2]):[2,this.router.navigate([d],{queryParamsHandling:"preserve",state:{data:{showNavPane:a}}})]}})})},n.prototype.navigateToDaxQueryView=function(e,t,r,a,s){return(0,M.mG)(this,void 0,void 0,function(){var d,O;return(0,M.Jh)(this,function(w){switch(w.label){case 0:return d="/groups/".concat(e,"/modeling/").concat(t,"/daxQueryView"),null==s?[3,1]:(O=s,[3,3]);case 1:return[4,this.openInNewTab(r)];case 2:O=w.sent(),w.label=3;case 3:return O?(this.openUrlInNewTab(this.router.createUrlTree([d],{queryParamsHandling:"preserve"}).toString()),[2]):[2,this.router.navigate([d],{queryParamsHandling:"preserve",state:{data:{showNavPane:a}}})]}})})},n.prototype.navigateToDatasetTable=function(e,t,r){return(0,M.mG)(this,void 0,void 0,function(){var a;return(0,M.Jh)(this,function(d){switch(d.label){case 0:return a="/groups/".concat(e,"/datasets/").concat(t,"/table"),[4,this.openInNewTab(r?.openInSameTab)];case 1:return d.sent()?(this.openUrlInNewTab(this.router.createUrlTree([a],{queryParamsHandling:"preserve"}).toString()),[2]):[2,this.router.navigate([a],{queryParamsHandling:"preserve",state:{data:{showNavPane:r?.showNavPane,sessionId:r?.sessionId,routingHint:r?.routingHint,hostMode:r?.hostMode,rdlWorkloadUri:r?.rdlWorkloadUri,authoringId:r?.authoringId,report:r?.report},ingressSource:r?.ingressSource}})]}})})},n.prototype.navigateToDatamart=function(e,t,r){return(0,M.mG)(this,void 0,void 0,function(){var a;return(0,M.Jh)(this,function(s){return a="/groups/".concat(e,"/").concat((0,vl.LC)(t),"/").concat(r),[2,this.router.navigate([a],{queryParamsHandling:"preserve"})]})})},n.prototype.navigateToFavorites=function(){return this.router.navigateByUrl("/favorites",{})},n.prototype.navigateToContentList=function(e,t,r,a,s,d){e||(e=this.currentGroupGUID);var g=this.getContentListPivot(t,r),O=!e||e===this.currentGroupGUID,w=!g;return this.inGroupWelcomeView()&&w&&O?this.router.navigate(["/","groups",e],{queryParamsHandling:"preserve"}):this.router.navigate(["/","groups",e],g?{queryParamsHandling:"preserve",state:{pivot:g}}:{queryParamsHandling:"merge",queryParams:{contentListTab:r,onlySharedWithMe:s,q:d},state:{pivot:g}})},n.prototype.getContentListPivot=function(e,t){switch(t){case 8:return"datasets";case 0:return"dashboards";case 2:return"reports";case 4:return"workbooks";case 256:return"dataflows"}if(e)return"dashboards"},n.prototype.navigateToSharedWithMe=function(e){this.router.navigateByUrl("/sharedwithme",{queryParamsHandling:"merge",queryParams:{q:e}})},n.prototype.navigateToDashboardSubscriptionsPane=function(e,t,r,a,s){return(0,M.mG)(this,void 0,void 0,function(){var d,g;return(0,M.Jh)(this,function(w){switch(w.label){case 0:return d=_.isEmpty(a)?"/groups/".concat(t,"/").concat(this.dashboardSegment,"/").concat(e,"/subscriptions"):"/groups/".concat(Xt,"/apps/").concat(a,"/").concat(this.dashboardSegment,"/").concat(r,"/subscriptions"),g={queryParamsHandling:"preserve"},[4,this.openInNewTab(s)];case 1:return w.sent()?(this.openUrlInNewTab(this.router.createUrlTree([d],g).toString()),[2]):[2,this.router.navigate([d],g)]}})})},n.prototype.navigateToRdlReportSubscriptionsPane=function(e,t){return(0,M.mG)(this,void 0,void 0,function(){var r;return(0,M.Jh)(this,function(a){switch(a.label){case 0:return[4,this.openInNewTab(t)];case 1:return r=a.sent(),this.navigateToRdlReportInternal(e,!0,r),[2]}})})},n.prototype.navigateToReportSubscriptionsPane=function(e,t){return(0,M.mG)(this,void 0,void 0,function(){var r;return(0,M.Jh)(this,function(a){switch(a.label){case 0:return[4,this.openInNewTab(t)];case 1:return r=a.sent(),[2,this.navigateToReportInternal(e,!0,void 0,r)]}})})},n.prototype.navigateToReportSharedViews=function(e,t,r){return(0,M.mG)(this,void 0,void 0,function(){var s=this;return(0,M.Jh)(this,function(d){switch(d.label){case 0:return[4,this.openInNewTab(r)];case 1:return d.sent()?(this.openUrlInNewTab(this.router.createUrlTree([yt,t,yr,"report",e],{queryParamsHandling:"preserve"}).toString()),[2]):[2,new Promise(function(g,O){s.router.navigate([yt,t,yr,"report",e],{queryParamsHandling:"preserve"}).then(function(w){return g()}).catch(function(w){return O(w)})})]}})})},n.prototype.navigateToReports=function(){this.navigateToContentList(this.currentGroupGUID,!0,2)},n.prototype.navigateToStreamingDatasets=function(e){this.navigateToContentList(this.currentGroupGUID,!0,8,e)},n.prototype.updateReportStateNoReload=function(e,t,r,a){return(0,M.mG)(this,void 0,void 0,function(){var s;return(0,M.Jh)(this,function(d){switch(d.label){case 0:return t?"saveAs"!==r?[3,2]:[4,this.openInNewTab(!0)]:[3,3];case 1:return s=d.sent(),[2,this.navigateToReportInternal(e,this.inDashboardSubscriptions()||this.inScorecardSubscriptionView()||this.inReportSubscriptionView()||a,r,s)];case 2:return[2];case 3:return[2,this.navigateToReportInternal(e,this.inDashboardSubscriptions()||this.inScorecardSubscriptionView()||this.inReportSubscriptionView()||a,"",!1,!0)]}})})},n.prototype.navigateToManageGateways=function(e){var t;e?t=e:this.store.select(Kt.CW).pipe((0,he.q)(1)).subscribe(function(r){return t=r}),this.router.navigate([yt,t,ma],{queryParamsHandling:"preserve"})},n.prototype.navigateToGatewayItem=function(e,t){var r;if(this.store.select(Kt.CW).pipe((0,he.q)(1)).subscribe(function(s){return r=s}),e){var a=[yt,r,ma,e];t&&a.push(t),this.router.navigate(a,{queryParamsHandling:"preserve",replaceUrl:!0})}else this.navigateToManageGateways(r)},n.prototype.navigateToDatasetSettings=function(e,t){this.showSettingsSlider(e,t)},n.prototype.navigateToAdminPortal=function(e){var t=[gn];switch(e){case 1:t.push("usageMetrics");break;case 2:t.push("users");break;case 3:t.push("auditLogs");break;case 4:t.push("tenantSettings");break;case 17:t.push("ppuTenantSettings");break;case 18:t.push("supportCenter");break;case 5:t.push("capacities");break;case 6:t.push("embedCodes");break;case 7:t.push("organizationVisuals");break;case 19:t.push("dataPolicies");break;case 20:t.push("fabricIdentities")}this.router.navigate(t,{queryParamsHandling:"preserve",state:{adminPortalSettingsTab:e}})},n.prototype.navigateToLicenseCapacities=function(e){var t=null;switch(e){case 0:t=Qe.ymx;break;case 1:t=Qe.I8X;break;case 2:t=Qe.Jam;break;case 3:t=Qe.eBl}this.router.navigate([gn,"capacities","capacitiesList",t],{queryParamsHandling:"preserve",state:{pivot:t,adminPortalSettingsTab:5}})},n.prototype.navigateToCapacityTabs=function(e,t){var r={capacityPivot:e,adminPortalSettingsTab:5},a=[gn,"capacities",t];"health"===e?a.push("health"):"delegatedSettings"===e&&a.push("delegatedSettings"),this.router.navigate(a,{queryParamsHandling:"preserve",state:r})},n.prototype.navigateToAdminPortalCapacity=function(e){var t={adminPortalSettingsTab:5,capacityPivot:null};this.featureSwitchService.featureSwitches.capacitySettingsTabs&&(t.capacityPivot="settings"),this.router.navigate([gn,"capacities",e],{queryParamsHandling:"preserve",state:t})},n.prototype.navigateToCapacityMetricDetail=function(e){this.router.navigate([gn,"capacities",e,"metricDetail"],{queryParamsHandling:"preserve",state:{adminPortalSettingsTab:5}})},n.prototype.navigateToAdminPortalCreateCapacity=function(){this.router.navigate([gn,"capacities","createCapacity"],{queryParamsHandling:"preserve",state:{adminPortalSettingsTab:5}})},n.prototype.navigateToAdminPortalNewWorkspace=function(){this.router.navigate([gn,"workspaces"],{queryParamsHandling:"preserve",state:{adminPortalSettingsTab:12}})},n.prototype.navigateToAdminPortalNewProtectionMetrics=function(){this.router.navigate([gn,"protectionMetrics"],{queryParamsHandling:"preserve",state:{adminPortalSettingsTab:14}})},n.prototype.navigateToWorkbookByUrlId=function(e,t,r,a){return void 0===r&&(r=!1),(0,M.mG)(this,void 0,void 0,function(){var s,d,g;return(0,M.Jh)(this,function(w){switch(w.label){case 0:return this.store.select(vo.Cu).pipe((0,he.q)(1)).subscribe(function(D){return s=D&&D.providerKey}),this.store.select(Kt.CW).pipe((0,he.q)(1)).subscribe(function(D){return d=D}),g=[yt,d],s?g.push(an,s):r&&(g=["sharedwithme"]),g.push(fo,e),[4,this.openInNewTab(a)];case 1:return w.sent()?(this.openUrlInNewTab(this.router.createUrlTree(g,{queryParamsHandling:"preserve"}).toString()),[2]):(this.router.navigate(g,{queryParamsHandling:"preserve"}),[2])}})})},n.prototype.navigateToDataflowGen2View=function(e,t,r){var a=this;this.store.select(fl.Gh,{id:t}).pipe((0,Or.P)()).subscribe(function(s){var d=s.ownerUser.oid,g=(0,Pl.bG)().uoid;(0,Mr.vr)(d,g)?a.router.navigate(["workloads","dataflows","author","capacityObjectId",r,"dataflowId",t,"extensionActionId",Mr.b$.generateGuid(),"workspaceObjectId",e],{queryParams:a.activatedRoute.snapshot.queryParams}):a.dialogService.showSimpleDialog(a.localizationService.get("CdsaModel_CantEditTitle"),a.localizationService.get("Dataflow_Gen2_CantEditMessage"))})},n.prototype.navigateToDatapoolView=function(e,t,r){if(this.featureSwitchService.featureSwitches.cDSAManagementEnabled){if(this.featureSwitchService.featureSwitches.cdsaFrontend){var a=[yt,e];return t?(a.push("dataflows",t),r&&a.push("query",r)):a.push("dataflowAuthoring"),void this.router.navigate(a,{queryParamsHandling:"preserve"})}}else this.dialogService.showSimpleDialog(this.localizationService.get("CDSA_ContentList_DisabledDatapools"),this.localizationService.get("CDSA_ContentList_OperationDisabled_CDSAOff"))},n.prototype.navigateToStreamingDataflow=function(e,t){this.featureSwitchService.featureSwitches.streamingDataflow&&this.router.navigate([yt,e,"streaming-dataflow",t],{queryParamsHandling:"preserve"})},n.prototype.navigateToAppPublish=function(e){var t;this.store.select(Kt.CW).pipe((0,he.q)(1)).subscribe(function(a){return t=a});var r=[yt,t,an,"publish"];e&&r.push(e),this.router.navigate(r,{queryParamsHandling:"preserve"})},n.prototype.navigateToRoot=function(){return this.router.navigate(["/"],{queryParamsHandling:"preserve"})},n.prototype.navigateToHome=function(){return this.router.navigate(["/home"],{queryParamsHandling:"preserve"})},n.prototype.navigateToArtifact=function(e,t,r,a){return(0,M.mG)(this,void 0,void 0,function(){var d,g;return(0,M.Jh)(this,function(O){switch(O.label){case 0:return g={},[4,this.extensionManifestService.getArtifactRouteNameFromType(t)];case 1:return g.routeName=O.sent(),d=this.extensionManifestService.getArtifactRoutePath(g,e,r),a?(this.openUrlInNewTab(this.router.createUrlTree([d]).toString()),[2]):(this.router.navigate([d],{queryParamsHandling:"preserve"}),[2])}})})},n.prototype.showQnaView=function(e){var r,a,t={q:e};"filter"in ze.s.parseQueryString()&&(t.filter=null),"$filter"in ze.s.parseQueryString()&&(t.$filter=null),this.store.select(Kt.CW).pipe((0,he.q)(1)).subscribe(function(w){return r=w}),this.store.select(Dt.W$).pipe((0,N.h)(function(w){return!!w}),(0,he.q)(1)).subscribe(function(w){return a=w});var s=[yt,r],d=Oe(this.router);if(this.inQnaModelView())s.push("datasets",d.paramMap.get("datasetDbName"),"qna");else if(this.inSharedWithMePath())s.push(yr,"dashboards",a.objectId,"qna");else{if(this.inAppInstanceView()){var g=d.paramMap.get(br),O=d.paramMap.get(ha);return void s.push(an,g,"instances",O,"dashboards",a.originalDashboardObjectId,"qna")}this.inAppView()?(g=d.paramMap.get(br),s.push(an,g,"dashboards",a.originalDashboardObjectId,"qna")):s.push("dashboards",a.objectId,"qna")}this.router.navigate(s,{queryParams:t,queryParamsHandling:"merge"})},n.prototype.showInsightsPanel=function(e,t){return(0,M.mG)(this,void 0,void 0,function(){var r;return(0,M.Jh)(this,function(s){switch(s.label){case 0:return r=[yt,e.groupGUID],e.appGUID&&r.push(an,e.appGUID),r.push("insights",e.dataGUID),[4,this.openInNewTab(t)];case 1:return s.sent()?(this.openUrlInNewTab(this.router.createUrlTree(r,{queryParamsHandling:"preserve"}).toString()),[2]):(this.router.navigate(r,{queryParamsHandling:"preserve"}),[2])}})})},n.prototype.navigateToDashboard=function(e,t){if(e&&e){var s,r=e.objectId,a=e.originalDashboardObjectId;a&&(s=this.currentAppGUID),s?this.navigateToAppDashboardByGUID(r,a,s,void 0,t):this.navigateToDashboardByGUID(r,t)}},n.prototype.navigateToReportHelper=function(e,t,r,a,s,d){if(e){var w,D,g=e.objectId,O=e.originalReportObjectId;this.store.select(Kt.CW).pipe((0,he.q)(1)).subscribe(function(V){return t=V}),O&&(w=this.currentAppGUID,D=this.currentAppInstanceId),1!==e.reportType?this.navigateToReport({appGUID:w,appInstanceId:D,reportGUID:g,reportOriginalGUID:O,groupGUID:t,reportPage:r,filter:a,bookmarkGuid:s},d):this.navigateToRdlReport({groupGUID:t,rdlReportGUID:g},d)}},n.prototype.showAlertsEditor=function(e,t,r,a,s){(0,mt.mv)(e,"tileGUID"),(0,mt.mv)(t,"alertId"),(0,mt.mv)(r,"dashboardGUID"),(0,mt.mv)(a,"groupGUID");var d="/groups/".concat(a).concat(null!=s?"/apps/"+s:"","/dashboards/").concat(r,"/tiles/").concat(e,"/alerts/").concat(t);return this.router.navigate([d],{queryParamsHandling:"preserve"})},n.prototype.showInFocusMode=function(e,t,r,a,s){(0,mt.mv)(e,"tileGUID"),(0,mt.mv)(r,"dashboardGUID");var d=va(this.router,e,t,r,a,s,this.dashboardSegment);return this.router.navigate([d],{queryParamsHandling:"preserve"})},n.prototype.showInsightsInFocusMode=function(e,t,r,a){(0,mt.mv)(e,"tileGUID"),(0,mt.mv)(r,"dashboardGUID");var s=Oe(this.router).paramMap.get("dashboardguid"),d=va(this.router,e,t,r,s,a,this.dashboardSegment)+"/insights";return this.router.navigate([d],{queryParamsHandling:"preserve"})},n.prototype.showSettingsSlider=function(e,t,r){var a;this.store.select(Kt.CW).pipe((0,he.q)(1)).subscribe(function(d){return a=d});var s=[yt,a,"settings",e];t&&s.push("".concat(t)),this.router.navigate(s,{queryParamsHandling:"preserve"})},n.prototype.showSettingsSliderByGroup=function(e,t,r,a){if((0,mt.mv)(t,"groupId should have a value"),t){var s=[yt,t,"settings",e];r&&s.push("".concat(r)),this.router.navigate(s,{queryParamsHandling:"preserve"})}else this.showSettingsSlider(e,r,a)},n.prototype.showRowLevelSecuritySlider=function(e,t){var r;t?r=t:this.store.select(Kt.CW).pipe((0,he.q)(1)).subscribe(function(a){return r=a}),this.router.navigate([yt,r,"rowlevelsecurity",e],{queryParamsHandling:"preserve"})},n.prototype.showGetDataSlider=function(e,t){var r;void 0===t&&(t=!0),this.store.select(Kt.CW).pipe((0,he.q)(1)).subscribe(function(s){return r=s});var a=[yt,r,e&&e.getDataView||"getdata"];e&&e.categoryName&&a.push(e.categoryName),e&&e.providerName&&a.push(e.providerName),this.router.navigate(a,{queryParamsHandling:"preserve"})},n.prototype.showManageStorageSlider=function(){var e;this.store.select(Kt.CW).pipe((0,he.q)(1)).subscribe(function(t){return e=t}),this.router.navigate([yt,e,"managestorage"],{queryParamsHandling:"preserve"})},n.prototype.navigateBack=function(e){void 0===e&&(e=-1),window.history.go(e)},n.prototype.canNavigateBack=function(){return window.history.length>1},n.prototype.navigateForward=function(){return this.location.forward()},n.prototype.inAppsDetailView=function(){return Oe(this.router).data.legacyIsInAppsView||this.inAppInstanceView()},n.prototype.inAppsView=function(){return Oe(this.router).data.legacyInAppsView||this.inAppInstanceView()},n.prototype.inCapacitySettingsView=function(){return Oe(this.router).data.legacyInAdminPortalCapacitiesView},n.prototype.inWorkbookView=function(){return Oe(this.router).data.legacyInWorkbookView},n.prototype.inSharingView=function(){return Oe(this.router).data.legacyInDashboardSharingView},n.prototype.inAlertsEditorView=function(){return Oe(this.router).data.legacyInDashboardAlertsView},n.prototype.inInFocusInsightsView=function(){return Oe(this.router).data.legacyInDashboardInsightsView},n.prototype.inInFocusView=function(){return Oe(this.router).data.legacyInDashboardInfocusView},n.prototype.inAppView=function(){var e,t=Oe(this.router);return t.data.legacyInAppView||(null===(e=this.appConsumptionConfigService)||void 0===e?void 0:e.isAppRoute(t))},n.prototype.inAppInstanceView=function(){return Oe(this.router).data.legacyInAppInstanceView},n.prototype.inAppArtifactView=function(){return(this.inAppView()||this.inAppInstanceView())&&!this.inAppDetailView()},n.prototype.inNewContentListView=function(){return Oe(this.router).data.legacyInNewContentListView},n.prototype.inAppDetailView=function(){var e=Oe(this.router);return e.data.legacyIsInAppView||e.data.legacyIsInAppInstanceView},n.prototype.inCreateCapacityView=function(){return Oe(this.router).data.legacyInCreateCapacityView},n.prototype.inSingleCapacitySettingsView=function(){var e=Oe(this.router),t=e.data.adminPortalNavigationState.capacityPivot||e.routeConfig.path;return e.data.legacyIsInCapacityView&&("settings"===t||""===t)},n.prototype.inSingleCapacityHealthView=function(){return"health"===Oe(this.router).data.adminPortalNavigationState.capacityPivot},n.prototype.inSingleCapacityDelegatedSettingsView=function(){var e=Oe(this.router);return"delegatedSettings"===(e.data.adminPortalNavigationState.capacityPivot||e.routeConfig.path)},n.prototype.inCapacityMetricDetailView=function(){return Oe(this.router).data.legacyInCapacityMetricDetailView},n.prototype.inInsightsView=function(){return Oe(this.router).data.legacyInInsightsView},n.prototype.inGroupWelcomeView=function(){return Oe(this.router).data.legacyIsInGroupWelcomeView},n.prototype.inQnaModelView=function(){return Oe(this.router).data.legacyInQnaModelView},n.prototype.inGroupView=function(){return Oe(this.router).data.legacyInGroupView},n.prototype.inQnaView=function(){return Oe(this.router).data.legacyInQnaView},n.prototype.inSharedWithMePath=function(){return Oe(this.router).data.legacyIsInSharedWithMeView},n.prototype.inSharedWithMeView=function(){return Oe(this.router).data.legacyInSharedWithMeView},n.prototype.inRecentlyViewedView=function(){return Oe(this.router).data.legacyInRecentlyViewedView},n.prototype.inLineageView=function(){return Oe(this.router).data.legacyInLineageView},n.prototype.inDashboardPath=function(){return Oe(this.router).data.legacyInDashboardsView},n.prototype.inDashboardSubscriptions=function(){return Oe(this.router).data.legacyInDashboardSubscriptions},n.prototype.inDashboardView=function(){var e=Oe(this.router);return e.data.legacyInDashboardsView&&!e.data.legacyInDashboardMobileAuthoringView},n.prototype.inReportView=function(){return this.inReportDetailView()},n.prototype.inScorecardView=function(){return this.inScorecardDetailView()},n.prototype.inScorecardDetailView=function(){return Oe(this.router).data.legacyInScorecardView},n.prototype.inReportDetailView=function(){return Oe(this.router).data.legacyInReportView},n.prototype.inRdlReportView=function(){return Oe(this.router).data.legacyInRdlReportView},n.prototype.inManagePermissionsView=function(){return Oe(this.router).data.legacyInManagePermissionsview},n.prototype.inFavoritesView=function(){return Oe(this.router).data.legacyInFavoritesView},n.prototype.inGetDataView=function(){return Oe(this.router).data.legacyInGetDataView},n.prototype.inGetDataCategoryProviderView=function(){return Oe(this.router).data.legacyInGetDataCategoryProviderView},n.prototype.inGetDataCategoryView=function(){return Oe(this.router).data.legacyInGetDataCategoryView},n.prototype.inAccept2017ProTrial=function(){return Oe(this.router).data.legacyInAccept2017ProTrial},n.prototype.inDatapoolView=function(){var e=Oe(this.router);return e.data.legacyInDatapoolView||e.data.legacyInDataflowAuthoringView},n.prototype.inDataflowAuthoringView=function(){return this.inDatapoolView()},n.prototype.inWebContentView=function(){return Oe(this.router).data.legacyInWebContentView},n.prototype.inSettingsGroup=function(){return Oe(this.router).data.legacyInSettingsGroup},n.prototype.inDatasetView=function(){return Oe(this.router).data.legacyInDatasetView},n.prototype.inReportSubscriptionView=function(){return Oe(this.router).data.legacyInReportPageSubscriptionView},n.prototype.inScorecardSubscriptionView=function(){return Oe(this.router).data.legacyInScorecardPageSubscriptionView},n.prototype.inRowLevelSecurityView=function(){return Oe(this.router).data.legacyInRowLevelSecurityView},n.prototype.navigateToAppArtifact=function(e,t,r){switch(e.type){case 1:return this.navigateToAppDashboardByGUID(e.objectId,e.originalObjectId,e.providerKey,e.instanceId,r);case 2:return this.navigateToReport({reportGUID:e.objectId,reportOriginalGUID:e.originalObjectId,groupGUID:Ml.fm1,appGUID:e.providerKey,appInstanceId:e.instanceId},r);case 4:return this.navigateToAppWorkbookByUniqueId(e.originalObjectId,e.providerKey,void 0,r);default:(0,mt.sr)("unsupported app navigation artifact type ".concat(e.type))}},n.prototype.openInNewTab=function(e){return(0,M.mG)(this,void 0,void 0,function(){return(0,M.Jh)(this,function(t){switch(t.label){case 0:return[4,this.shellCapabilitiesService.ensureCapabilitiesInitialized()];case 1:return t.sent(),[2,this.shellCapabilities.openArtifactsInNewTab&&!e]}})})},n.prototype.openUrlInNewTab=function(e,t){return void 0===t&&(t="noopener, noreferrer, resizable, scrollbars, status, toolbar, menubar, location"),this.window.open(e,"_blank",t)},Object.defineProperty(n.prototype,"currentGroupGUID",{get:function(){var t=Xt;return this.store.select(Kt.CW).pipe((0,he.q)(1)).subscribe(function(r){return t=r}),t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"currentDashboardGUID",{get:function(){var t;return this.store.select(Dt.uS).pipe((0,he.q)(1)).subscribe(function(r){return t=r}),t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"currentAppGUID",{get:function(){var t;return this.store.select(vo.Cu).pipe((0,he.q)(1)).subscribe(function(r){return t=r&&r.providerKey}),t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"currentAppInstanceId",{get:function(){var t=Oe(this.router);return parseInt(t.paramMap.get("appInstanceId"),10)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"currentReportGUID",{get:function(){var t;return this.store.select(Pr.iz).pipe((0,he.q)(1)).subscribe(function(r){return t=r}),t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"additionalODataFilter",{get:function(){var t=Oe(this.router),r=t.queryParamMap.get("filter"),a=t.queryParamMap.get("$filter"),s=r||a;if(s){var d=void 0;return s.indexOf("~~")>=0&&(s=s.replace("~~","~"),d="~~"),s.indexOf("~2F")>=0&&(s=s.replace("~2F","/"),d=void 0===d?"~2F":d+"~2F"),d&&this.telemetryService.logEvent(al,{char:d}),s}return s},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"currentAdminPortalSettingsTab",{get:function(){throw Error("WebNavigationService: using currentAdminPortalSettingsTab is deprecated")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"currentCapacityId",{get:function(){return Oe(this.router).paramMap.get("capacityId")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"pivot",{get:function(){var t=Oe(this.router);return t.data.adminPortalNavigationState.pivot||t.params.pivot},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"capacityPivot",{get:function(){var t=Oe(this.router);return t.data.adminPortalNavigationState.capacityPivot||t.routeConfig.path},enumerable:!1,configurable:!0}),n.prototype.showMobileView=function(){return!!this.mobileAgent&&this.featureSwitchService.featureSwitches.teamsMobileFormatting},n.prototype.openUniversalLink=function(e,t){var r=window.location.protocol+"//"+window.location.host+(t?e:this.router.createUrlTree([e],{queryParams:{pbi_source:"MSTeams"},queryParamsHandling:"merge"}));this.mobileUniversalLinkService.open(r)},n.\u0275fac=function(t){return new(t||n)(o.\u0275\u0275inject(ei.gz),o.\u0275\u0275inject(bn.x),o.\u0275\u0275inject(qt.vZ),o.\u0275\u0275inject(Jt.o),o.\u0275\u0275inject(ei.F0),o.\u0275\u0275inject(J.yh),o.\u0275\u0275inject(ut.y0),o.\u0275\u0275inject(Pe.Location),o.\u0275\u0275inject(Mt.d),o.\u0275\u0275inject(Sl.de),o.\u0275\u0275inject(_l.vC),o.\u0275\u0275inject(yl.L),o.\u0275\u0275inject(Tl),o.\u0275\u0275inject(bl.Z,8),o.\u0275\u0275inject(Cl,8))},n.\u0275prov=o.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n}(),wl=l(50911),Pa=l(26898),xl=l(60255),Al=l(2330),El=l(18405),Dl=l(97961),kl=l(8714),_r=l(70156),Ma=l(75563),Oa=l(18873),Rl=l(42731),oi=l(7600),Fl=function(){function n(e){this.store=e}return n.prototype.isResourceSharedWithMe=function(e){return e.contentTileType===oi.ty.Dashboard||e.contentTileType===oi.ty.Report?this.isResourceSharedWithMeReportDashboard(e.contract):e.contentTileType===oi.ty.Workbook?this.isResourceSharedWithMeWorkbook(e.contract):e.contentTileType===oi.ty.Dataset?this.isResourceSharedWithMeDataset(e.contract):(pe.fF.assertFail("cannot determine ownership of unsupported type of resource"),!1)},n.prototype.permissionsArePersonalized=function(e,t){var r=t?.permissions;return this.arePermissionsPersonalized(e,r)},n.prototype.arePermissionsPersonalized=function(e,t){return void 0===t?!(!(7&~e)||11&~e):!(!(7&~e)||1&~e||3&~t)},n.prototype.isResourceSharedWithMeReportDashboard=function(e){return 1===e.permissions||5===e.permissions},n.prototype.isResourceSharedWithMeWorkbook=function(e){return!(0,Rl.Mc)(e.permissions)&&!(0,$n.yE)(e.permissions,17)},n.prototype.isResourceSharedWithMeDataset=function(e){var t=this.findPackage(e.packageId);return this.permissionsArePersonalized(e.permissions,t)},n.prototype.findPackage=function(e){var t;return this.store.select(Ce.zu).pipe((0,he.q)(1)).subscribe(function(r){return t=r[e]}),t},n.\u0275fac=function(t){return new(t||n)(o.\u0275\u0275inject(J.yh))},n.\u0275prov=o.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n}(),Ll=l(82053),Vl=function(){function n(e,t,r,a,s,d,g,O,w,D){this.store=e,this.navigation=t,this.folderService=r,this.featureSwitchService=a,this.reportStore=s,this.permissionService=d,this.quotaService=g,this.usageMetricsReport=O,this.ownershipService=w,this.windowOpener=D}return n.prototype.openUrlTile=function(e,t){if(t)switch(t.navigationType){case _r.X8.Dashboard:t.navigationTargetAppGuid?this.navigation.navigateToAppDashboardByGUID(t.navigationTargetGuid,t.navigationTargetOriginalGuid,t.navigationTargetAppGuid,t.appInstance):this.navigation.navigateToDashboardByGUID(t.navigationTargetGuid,void 0,t.fallbackToShared);break;case _r.X8.Report:this.navigation.navigateToReport({appGUID:t.navigationTargetAppGuid,appInstanceId:t.appInstance,reportGUID:t.navigationTargetGuid,reportOriginalGUID:t.navigationTargetOriginalGuid,groupGUID:this.folderService.activeFolderObjectId,reportPage:t.navigationSubPage,filter:t.additionalODataFilter,fallbackToShared:t.fallbackToShared});break;case _r.X8.RdlReport:this.navigation.navigateToRdlReport({appGUID:t.navigationTargetAppGuid,appInstanceId:t.appInstance,rdlReportGUID:t.navigationTargetGuid,rdlReportOriginalGUID:t.navigationTargetOriginalGuid,groupGUID:this.folderService.activeFolderObjectId,reportPage:t.navigationSubPage,filter:t.additionalODataFilter,fallbackToShared:t.fallbackToShared});break;default:pe.fF.assertFail("Unknown intra-domain navigation type: "+t.navigationType)}else e&&e.targetUrl&&(0,ln.HH)(e.targetUrl,!1)&&this.windowOpener.open(e.targetUrl,e.openInSameTab?"_self":"_blank")},n.prototype.openReportTile=function(e){return(0,M.mG)(this,void 0,void 0,function(){var t,a,s,d,g,O,w,D;return(0,M.Jh)(this,function(j){switch(j.label){case 0:return[4,this.store.select(El.Ue,{id:e.modelId}).pipe((0,he.q)(1)).toPromise()];case 1:return t=j.sent(),this.canOpenReport(e,t)?[4,this.store.select(Dt.W$).pipe((0,he.q)(1)).toPromise()]:[2];case 2:return a=j.sent(),[4,this.reportStore.findById(e.reportId)];case 3:return s=j.sent(),d=a.permissions,g=this.permissionService.getModelEffectivePermissions(t),!s?.id&&(a.isHidden||2&~d||2&~g)?[2]:s?.id?[3,4]:(!this.quotaService.checkQuotaExceeded()&&!this.permissionService.isActiveWorkspaceIsReadOnlyLegacy&&this.navigation.navigateToDataset({groupGuid:this.folderService.activeFolderObjectId,datasetDBName:t.dbName,instantiationMode:2}),[3,7]);case 4:return O=void 0,w=void 0,e.action?(D=this.isModelType(e)?e.action:e.$action||JSON.parse(e.action),w=D.targetSlideId,this.featureSwitchService.featureSwitches.usageMetricsEnabled?[4,this.usageMetricsReport.isUsageMetricsArtifactUsingReportContract(s).toPromise()]:[3,6]):[3,6];case 5:j.sent()&&(O=D.filter),j.label=6;case 6:this.navigation.navigateToReportHelper(s,this.folderService.activeFolderObjectId,w,null,O,null),j.label=7;case 7:return[2]}})})},n.prototype.canOpenReport=function(e,t){return!!t&&null!=t&&null!=t.vsName&&null!=t.dbName&&2===e.publishState},n.prototype.openQna=function(e){this.navigation.showQnaView(e.query&&e.query.modelQuery&&e.query.modelQuery.utterance,!1)},n.prototype.openWorkbook=function(e){return(0,M.mG)(this,void 0,void 0,function(){var t,r,a,s,d;return(0,M.Jh)(this,function(g){switch(g.label){case 0:return[4,this.findWorkbook(e.workbookId,e.packageId)];case 1:if(t=g.sent(),r=(0,kl.E)(t),!(s=e.$config&&e.$config.workbookTile))throw new Error("no workbook config");return a=s.itemType===Ne.pF.NamedRange||s.itemType===Ne.pF.Table?s.item:s.activeSelection,d=this.ownershipService.isResourceSharedWithMeWorkbook(t),this.navigation.navigateToWorkbookByUrlId(r,a,d),[2]}})})},n.prototype.findWorkbook=function(e,t){var r="1_"+e+"_"+t;return this.store.select(Dl.VG).pipe((0,ae.U)(function(a){return a[r]}),(0,he.q)(1)).toPromise()},n.prototype.isModelType=function(e){return e.type===Ne.YU.model&&e.action===Qe.$Ez},n.prototype.openTile=function(e,t){var r=this;try{if(this.isModelType(e))return void this.openReportTile(e);var a=e.$action||JSON.parse(e.action);switch(a.action){case Qe.sVl:this.store.select(h.rc({id:e.objectId})).pipe((0,he.q)(1)).subscribe(function(s){r.openUrlTile(a,s)});break;case Qe.$Ez:this.openReportTile(e);break;case Qe.RCq:this.openQna(e);break;case Qe.KRp:this.openWorkbook(e)}t&&t.resolve()}catch{t&&t.reject()}},n.\u0275fac=function(t){return new(t||n)(o.\u0275\u0275inject(J.yh),o.\u0275\u0275inject(Oa.W),o.\u0275\u0275inject(To.s),o.\u0275\u0275inject(qt.vZ),o.\u0275\u0275inject(Io.R),o.\u0275\u0275inject(Dn.$A),o.\u0275\u0275inject(Ll.U),o.\u0275\u0275inject(wo.m),o.\u0275\u0275inject(Fl),o.\u0275\u0275inject(Ma.p))},n.\u0275prov=o.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n}(),Bl=l(18460),Ul=l(50057),jl=l(3892),Nl=l(78565),zl=l(77996),$l=l(95648),ii=l(55710);function Wl(n,e){if(1&n&&(o.\u0275\u0275elementStart(0,"div",14)(1,"span",15),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"span",16),o.\u0275\u0275text(4),o.\u0275\u0275elementEnd()()),2&n){var t=e.ngIf;o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate(t.displayText),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate(t.subDisplayText)}}function Hl(n,e){if(1&n){var t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",26),o.\u0275\u0275listener("click",function(){o.\u0275\u0275restoreView(t);var s=o.\u0275\u0275nextContext(2);return o.\u0275\u0275resetView(s.showInsights())}),o.\u0275\u0275element(1,"i",27),o.\u0275\u0275elementStart(2,"span",28),o.\u0275\u0275text(3),o.\u0275\u0275elementEnd()()}if(2&n){var r=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(3),o.\u0275\u0275textInterpolate(r.getRelatedInsightsText)}}function Gl(n,e){if(1&n){var t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",29),o.\u0275\u0275listener("click",function(){o.\u0275\u0275restoreView(t);var s=o.\u0275\u0275nextContext().ngIf,d=o.\u0275\u0275nextContext();return o.\u0275\u0275resetView(d.pinVisual(s))}),o.\u0275\u0275element(1,"i",30),o.\u0275\u0275elementStart(2,"span",28),o.\u0275\u0275text(3),o.\u0275\u0275elementEnd()()}if(2&n){var r=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(3),o.\u0275\u0275textInterpolate(r.pinVisualText)}}var Kl=function(e){return{active:e}};function Ql(n,e){if(1&n&&(o.\u0275\u0275elementStart(0,"div",17),o.\u0275\u0275element(1,"span",18),o.\u0275\u0275elementStart(2,"div",19)(3,"span",20),o.\u0275\u0275text(4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"span"),o.\u0275\u0275text(6),o.\u0275\u0275elementEnd()(),o.\u0275\u0275element(7,"div",6),o.\u0275\u0275template(8,Hl,4,1,"button",21),o.\u0275\u0275template(9,Gl,4,1,"button",22),o.\u0275\u0275elementStart(10,"button",23,24),o.\u0275\u0275element(12,"i",25),o.\u0275\u0275elementEnd()()),2&n){var t=e.ngIf,r=o.\u0275\u0275reference(11),a=o.\u0275\u0275nextContext(),s=o.\u0275\u0275reference(16);o.\u0275\u0275advance(4),o.\u0275\u0275textInterpolate(a.lastRefreshTimeInLocalWithLabel()),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate(a.formattedTime()),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",t.type===a.tileType.composite),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",a.showPinTile),o.\u0275\u0275advance(1),o.\u0275\u0275property("matMenuTriggerFor",s)("ngClass",o.\u0275\u0275pureFunction1(6,Kl,!0===r.menuOpen))}}function ql(n,e){if(1&n&&o.\u0275\u0275element(0,"insights-in-focus-pane-modern-lazy",43),2&n){var t=o.\u0275\u0275nextContext(3).ngIf,r=o.\u0275\u0275nextContext();o.\u0275\u0275property("model",t.dataSet)("visualContract",t.canvas.visualContainer.contract)("visualTitle",t.displayText+" "+t.subDisplayText)("parentEvent",r.openInFocusEvent)}}function Jl(n,e){if(1&n){var t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"exploration-host",37),o.\u0275\u0275template(1,ql,1,4,"insights-in-focus-pane-modern-lazy",38),o.\u0275\u0275elementStart(2,"div",39),o.\u0275\u0275element(3,"explore-canvas",40),o.\u0275\u0275elementStart(4,"div",41)(5,"button",42),o.\u0275\u0275listener("click",function(){o.\u0275\u0275restoreView(t);var d=o.\u0275\u0275nextContext(3);return o.\u0275\u0275resetView(d.openTile())}),o.\u0275\u0275text(6),o.\u0275\u0275elementEnd()()()()}if(2&n){var r=o.\u0275\u0275nextContext(2).ngIf,a=o.\u0275\u0275nextContext();o.\u0275\u0275property("viewModel",r),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",a.showInsightsInFocusPane),o.\u0275\u0275advance(2),o.\u0275\u0275property("viewModel",r.canvas.exploration.exploreCanvas),o.\u0275\u0275advance(3),o.\u0275\u0275textInterpolate(r.source)}}function Yl(n,e){if(1&n&&(o.\u0275\u0275elementStart(0,"section",35),o.\u0275\u0275template(1,Jl,7,4,"exploration-host",36),o.\u0275\u0275elementEnd()),2&n){var t=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",t.jQueryUILoaded)}}function Zl(n,e){if(1&n&&o.\u0275\u0275element(0,"workbook-tile",44),2&n){var t=o.\u0275\u0275nextContext().ngIf;o.\u0275\u0275property("viewModel",t.contract)("config",t.config)}}function Xl(n,e){if(1&n&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275element(1,"pbi-lazy-load",45),o.\u0275\u0275elementContainerEnd()),2&n){var t=o.\u0275\u0275nextContext().ngIf,r=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("modulePath",r.realTimeTileLazyPath)("componentId",r.RealTimeTileComponentId)("inputArgs",t.realtTimeArgs)("outputArgs",r.realTimeOutputArgs)}}function ec(n,e){if(1&n&&(o.\u0275\u0275elementContainerStart(0)(1,31),o.\u0275\u0275template(2,Yl,2,1,"section",32),o.\u0275\u0275template(3,Zl,1,2,"workbook-tile",33),o.\u0275\u0275template(4,Xl,2,4,"ng-container",34),o.\u0275\u0275elementContainerEnd()()),2&n){var t=e.ngIf,r=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("ngSwitch",t.type),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngSwitchCase",r.tileType.composite),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngSwitchCase",r.tileType.workbook),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngSwitchCase",r.tileType.realTime)}}function tc(n,e){if(1&n){var t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",46),o.\u0275\u0275listener("click",function(){o.\u0275\u0275restoreView(t);var a=o.\u0275\u0275nextContext();return o.\u0275\u0275resetView(a.qrCode())}),o.\u0275\u0275element(1,"span",47),o.\u0275\u0275elementEnd()}}function nc(n,e){if(1&n){var t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",46),o.\u0275\u0275listener("click",function(){o.\u0275\u0275restoreView(t);var a=o.\u0275\u0275nextContext();return o.\u0275\u0275resetView(a.export())}),o.\u0275\u0275element(1,"span",48),o.\u0275\u0275elementEnd()}}var Co,oc=function(n){function e(t,r,a,s,d,g,O,w,D,V,j,ne,Z,W,De,_e,ft,lt,Ft,vt,It,xt,Ut,Hr,mi,Mo,Ot,qn,Oo,Mh){var ue=n.call(this)||this;ue.elementRef=t,ue.activatedRoute=r,ue.store=a,ue.globalEventBridge=s,ue.tileConfigService=d,ue.tileDataService=g,ue.explorationSerializer=O,ue.explorationNavigation=w,ue.filterGenerator=D,ue.explorationCapabilities=V,ue.viewModeState=j,ue.selection=ne,ue.localizationService=Z,ue.visualPlugins=W,ue.dataSourceService=De,ue.telemetryService=_e,ue.navigation=ft,ue.datasetStore=lt,ue.shellCapabilites=Ft,ue.conceptualSchemaProxy=vt,ue.pinVisualService=It,ue.resourcePackages=xt,ue.pinTileService=Ut,ue.activeFolderId=Hr,ue.dlgService=mi,ue.exportData=Mo,ue.moduleLoader=Ot,ue.errorService=qn,ue.tileNavigationService=Oo,ue.featureSwitchService=Mh,ue.showInsightsInFocusPane=!1,ue.tileType=Ne.YU,ue.canExport=!1,ue.RealTimeTileComponentId="RealTimeTileComponentNewId",ue.realTimeTileLazyPath="@powerbi/RealTime/real-time.module#RealTimeModule",ue.insightsTileVisualSubject=new qs.X(null),ue.activatedRoute.paramMap.pipe((0,X.R)(ue.onDestroy$),(0,st.b)(function(cn){var en=cn.get("appid"),bs=cn.get("tileguid");en?ue.store.select(Dt.W$).pipe((0,N.h)(function(fi){return!!fi&&!!fi.tiles}),(0,he.q)(1)).subscribe(function(fi){var ys=_.find(fi.tiles,function(_h){return _h.originalTileObjectId===bs});ys&&ue.store.dispatch(new Ct.Ph({id:ys.objectId}))}):ue.store.dispatch(new Ct.Ph({id:bs}))})).subscribe(),ue.activatedRoute.data.pipe((0,X.R)(ue.onDestroy$),(0,st.b)(function(cn){ue.runScopedInsights=cn.runScopedInsights})).subscribe(),ue.pinVisualText=ue.localizationService.get("PinVisual_ToolTip"),ue.getRelatedInsightsText=ue.localizationService.get("Insights_GetRelatedInsights"),ue.inFocusExit=ue.localizationService.get("InFocus_ExitInFocus");var Oh=ue.globalEventBridge.createChannelSubscriptionManager().subscribe(Nn.mB3,function(){return ue.onCloseInsightsInFocusPane()}).subscribe(Nn.urK,function(cn,en){return ue.onInsightSelected({model:en.model,pinData:en.pinData,rerunInsights:en.rerunInsights})}).subscribe(Nn.aoT,function(cn,en){return ue.showVisualInFocus(en.pinData,{canPin:en.canPin},en.rerunInsights)});return ue.onDestroy$.subscribe(function(){Oh.unsubscribeAll()}),ue.viewModeState.setMode(0),ue.pinVisualService.setHandler({pinVisual:function(en){ue.pinVisualHandler(en)}}),ue.canGenerateQrCode$=ue.store.select(Dt.W$).pipe((0,ae.U)(function(cn){return!!cn})),ue}return(0,M.ZT)(e,n),e.prototype.ngOnInit=function(){return(0,M.mG)(this,void 0,void 0,function(){var t,r,a=this;return(0,M.Jh)(this,function(s){switch(s.label){case 0:return[4,this.shellCapabilites.ensureCapabilitiesInitialized()];case 1:return s.sent(),this.shellShowPinButton=this.shellCapabilites.getCapabilities().dashboardSettings.showPinButton,this.isPinReadable=this.featureSwitchService.featureSwitches.pinReadable,t=this.insightsTileVisualSubject.asObservable(),r=this.store.select(h.Js),this.inFocusModel$=(0,R.aj)([t,r]).pipe((0,X.R)(this.onDestroy$),(0,N.h)(function(d){return!(!d[0]&&!d[1])}),(0,An.zg)(function(d){var g=d[0],O=d[1];return(0,Js.D)([(0,K.of)(g||O),a.getDataSetForTile(g||O),a.store.select(Ce.Jh,{id:g?g.packageId:O.packageId}).pipe((0,he.q)(1))])}),(0,st.b)(function(d){var O=d[1];a.updateCanPin(d[0],O),a.tileDataset=O}),(0,ae.U)(function(d){var g=d[0],O=d[1],w=d[2];return g.type===Ne.YU.composite?a.getInfocusForComposite(g,O):g.type===Ne.YU.workbook?a.getInfocusForWorkbook(g,w,O?.lastRefreshTime):g.type===Ne.YU.realTime?a.getInfocusForRealTime(g):(a.errorService.warning(a.localizationService.format("Dashboard_UnsupportedInfocusTileType_WarningText",g.type)),null)}),(0,st.b)(function(){return(0,M.mG)(a,void 0,void 0,function(){return(0,M.Jh)(this,function(d){switch(d.label){case 0:return[4,this.updateCanExport()];case 1:return d.sent(),[2]}})})})),[2]}})})},e.prototype.updateCanPin=function(t,r){var a=this;t.type===Ne.YU.composite&&(this.shellShowPinButton?this.store.select(Dt.W$).pipe((0,he.q)(1)).subscribe(function(s){var d=a.openInsightArgs&&a.openInsightArgs.canPin;if(s){var g=a.isPinReadable?a.pinTileService.canPinTileModern(t,s,r):(0,le.cl)(s);a.showPinTile=g||d}else a.showPinTile=!0}):this.showPinTile=!1)},Object.defineProperty(e.prototype,"jQueryUILoaded",{get:function(){var r=this;return void 0===this.jQueryUILoadedPromise&&(this.jQueryUILoadedPromise=this.moduleLoader.require(Ws.W).then(function(){return r._jQueryUILoaded=!0},function(){return r._jQueryUILoaded=!1})),this._jQueryUILoaded},enumerable:!1,configurable:!0}),e.prototype.getInfocusForRealTime=function(t){var r=this.tileConfigService.parseTileConfig(t),a=this.tileConfigService.getVisualDefintionFromConfig(t,r);return a.viewport=this.getViewPort(),{config:r,contract:t,displayText:t.displayText,subDisplayText:t.subDisplayText,type:t.type,realtTimeArgs:{initialVisual:a,contract:t,config:r}}},e.prototype.getInfocusForWorkbook=function(t,r,a){this.telemetryService.logEvent(je.$9,{tileId:t.id,workbookId:t.workbookId,packageId:t.packageId});var s=this.tileConfigService.parseTileConfig(t);return this.lastRefreshTime=r?.lastRefreshTime||a,{displayText:t.displayText,subDisplayText:t.subDisplayText,contract:t,config:s,type:t.type}},e.prototype.getInfocusForComposite=function(t,r){var s,d,g,O,a=this,w=t.config?this.tileConfigService.parseTileConfig(t):t.$config;this.dataSourceService.set(function(n,e,t){if(!n)return(0,fr.yd)([]);var r=[],a=zn.N8;r.push({type:Qe.nKy,id:n.modelId,name:zn.N8,dsr:{schemaName:zn.N8,vsName:e,dbName:t,modelId:n.modelId}});var d=n.$config.visualContainer.$modelExtensions,g=n.$config.visualContainer.dataSourceVariables,O=zn.eM;return r.push({type:Hs.K,id:n.id,name:O,extends:a,exploration:{schemaName:O,extends:a,getModelExtensions:function(){return d},getDataSourceVariables:function(){return g}}}),(0,fr.yd)(r)}(t,r?.vsName,r?.dbName)),this.showInsightsInFocusPane=this.showInsightsInFocusPane||this.runScopedInsights;var D=this.initializeSection("InFocusSection","InFocusSection"),V=this.createInFocus(D,this.filterGenerator,0);V.dataSet=r,this.lastRefreshTime=t.tileDataUpdatedTime||r.lastRefreshTime,V.contract=t,V.type=t.type,V.displayText=t.displayText,V.subDisplayText=t.subDisplayText,V.source=this.localizationService.format("InFocus_SourceReport",[r.displayName]);var j=null===(O=null===(g=null===(d=null===(s=w.visualContainer)||void 0===s?void 0:s.$visualContainer)||void 0===d?void 0:d.config)||void 0===g?void 0:g.singleVisual)||void 0===O?void 0:O.visualType;if(j&&(this.visualPlugins.loadPluginByNameIfAny(j),V.displayText=this.tileConfigService.getDisplayText(t,w),V.subDisplayText=this.tileConfigService.getSubDisplayText(t,w),!this.openInFocusEvent)){var ne=this.telemetryService.startEvent(je.eZ,{tileType:"composite"});this.openInFocusEvent=ne.event}this.filterGenerator.clearCrossHighlight(V.canvas.exploration.contract.sections[0]);var Z=w.visualContainer,W=this.explorationSerializer.deserializeCanvasItem(this.explorationSerializer.serializeVisualContainer(Z.$visualContainer)),De=V.canvas,_e=De.exploration,ft=_e.contract,lt=_e.exploreCanvas,Ft=this.initializeSection("fakeSection","fakeSection");this.explorationNavigation.loadExploration(ft),ft.dataSourceVariables=w.visualContainer.dataSourceVariables,lt.contract=Ft,ft.themeCollection=Z.themeCollection,this.viewModeState.getViewState().preventSelectionClearing=!0,W.layouts=(0,we.Br)([{id:0,position:{x:0,y:0,width:Ft.size.width,height:Ft.size.height}}]);var vt=(0,Cr.Dz)(ft,_e.sections[0].contract,W,0);vt.disableResize=!0;var It=t.tileDataSet;(0,js.o3)(It)||(vt.dataViewSource=It);var xt=vt.contract.config.singleVisual.vcObjects||{};return vt.contract.config.singleVisual.vcObjects=xt,(0,$s._6)({replace:[{objectName:"title",properties:{show:!1},selector:void 0}]},vr.XW,xt),zs.UP.selectCanvasItem(vt.contract,this.selection),De.visualContainer=vt,lt.visualContainers[0]=vt,lt.visualContainers[0].options=this.explorationCapabilities.getCapabilities().visualContainerOptions,lt.visualContainerGroups=[lt.visualContainers[0]],this.explorationCapabilities.setCapabilities({showAppBar:!0,showTaskPane:!0,showVisualizationPane:!0,showNavContentPane:!0,visualContainerOptions:{showMenu:!1,showPin:!1,showContextMenu:!1,disablePin:!0,hideHeader:!0},showBackButtonOnAppBar:!1,disableEnhancedTooltips:!0}),V.showVisualEnabled=!0,V.config=w,this.currentInfocusModel=V,this.currentInfocusModel.datasetModel=r,this.explorationNavigation.registerExplorationViewModel(function(){return a.currentInfocusModel}),this.currentInfocusModel},e.prototype.onExitClick=function(){var t=this;this.store.select(Dt.W$).pipe((0,he.q)(1),(0,st.b)(function(r){r&&t.navigation.navigateToDashboard(r,!0)})).subscribe(),this.globalEventBridge.publishToChannel(Nn.mB3)},e.prototype.showInsights=function(){this.showInsightsInFocusPane=!0},e.prototype.qrCode=function(){var t=this,r=this.store.select(Dt.W$);(0,R.aj)([r,this.inFocusModel$]).pipe((0,he.q)(1),(0,st.b)(function(a){t.showQrCodeDialog(a[0],a[1])})).subscribe()},e.prototype.updateCanExport=function(){return(0,M.mG)(this,void 0,void 0,function(){var t,r,a,s,d;return(0,M.Jh)(this,function(g){switch(g.label){case 0:return this.currentInfocusModel?(a=this.tileConfigService.getVisualDefintionFromConfig(t=this.currentInfocusModel.contract,r=this.currentInfocusModel.config),s=this.tileDataService.convertTileData(t,r),d=this,[4,this.exportData.canExportTileData({contract:t,config:r,data:s,visual:a,folderObjectId:this.tileDataset.workspaceObjectId})]):(this.canExport=!1,[2]);case 1:return d.canExport=g.sent(),[2]}})})},e.prototype.showQrCodeDialog=function(t,r){this.dlgService.openHostDialog({bindings:{tile:r.contract,displayText:r.displayText,subDisplayText:r.subDisplayText,dashboard:t,groupObjectId:this.activeFolderId.activeFolderObjectId,appId:this.navigation.currentAppGUID,type:1},dialogName:"QRCodeDialog",componentName:"QRCodeDialogComponent",config:{panelClass:["no-border","transparent","legacy-dialog"]}})},e.prototype.export=function(){var t=this;if(this.currentInfocusModel){var r=this.currentInfocusModel.contract,a=this.currentInfocusModel.config,s=this.tileConfigService.getVisualDefintionFromConfig(r,a);this.tileDataService.getVisualDefinitionData(r,s,a).then(function(d){return s.data=d,t.exportData.exportTileDataToCsv({contract:r,config:a,visual:s,dataSet:t.currentInfocusModel.dataSet})}).catch(function(d){})}},e.prototype.onCloseInsightsInFocusPane=function(){this.showInsightsInFocusPane=!1},e.prototype.onInsightSelected=function(t){this.globalEventBridge.publishToChannel(Nn.aoT,{canPin:!1,pinData:t.pinData,rerunInsights:!0})},e.prototype.findModel=function(t,r){return(0,M.mG)(this,void 0,void 0,function(){var a,s;return(0,M.Jh)(this,function(d){switch(d.label){case 0:return[4,this.datasetStore.findAll(t,!0)];case 1:return a=d.sent(),_.isEmpty(a)?[2,void 0]:((s=_.find(a,function(g){return null==r||g.packageId===r}))||(s=_.find(a,function(g){return(0,$n.yE)(g.permissions,7)})),s||(s=_.first(a)),[2,s])}})})},e.prototype.showVisualInFocus=function(t,r,a){var s=this;pe.fF.assertValue(t,"pinData"),t&&(this.findModel(t.modelId,t.packageId).then(function(O){var w=(0,Ns.O4)(t,s.visualPlugins.capabilities((0,vr.s_)(t)),O);s.insightsTileVisualSubject.next(w)}),this.openInsightArgs=r)},e.prototype.createInFocus=function(t,r,a){return{canvas:Ls(t,a),visualizationPane:{sections:[],activeSection:na.G.Fields,pagePaneSections:[],activePageSection:na.W.Fields,title:"Format",visualPluginFilter:function(d){return!r.tryGetFilterPropertyIdentifier(d.capabilities)}},showVisualEnabled:!1,displayText:"",subDisplayText:"",source:"",showInsightsInFocusPane:!1}},e.prototype.pinVisual=function(t){var r=this,a=this.dataSourceService.get(),s=t.canvas.visualContainer;this.conceptualSchemaProxy.get(a).then(function(d){var g=s.hostServices.getFilters(r.filterGenerator,d);r.pinVisualService.getPinDataAsync(a,s.contract,g,s.themeCollection||{},r.resourcePackages.getAllPackages()).then(function(O){r.pinVisualHandler(O)})})},e.prototype.getViewPort=function(){var t=this.elementRef.nativeElement.querySelector(".tile-container");return{height:t?.clientHeight,width:t?.clientWidth,scale:1}},e.prototype.getDataSetForTile=function(t){return t.modelId?(0,ce.D)(this.findModel(t.modelId,t.packageId)):(0,K.of)(null)},e.prototype.pinVisualHandler=function(t){var r,a,s,d;return(0,M.mG)(this,void 0,void 0,function(){var g,O;return(0,M.Jh)(this,function(w){switch(w.label){case 0:return pe.fF.assertValue(t,"pinData"),t?(t.reportId=(g=this.currentInfocusModel.contract).reportId,(O=this.dataSourceService.get()).length>0&&(t.modelId=O[0].id,t.packageId=g.packageId),t.action=g.action&&JSON.parse(g.action),t.tileHeading=this.currentInfocusModel.displayText,t.tileSubDisplay=this.currentInfocusModel.subDisplayText,!(null===(a=null===(r=g.query)||void 0===r?void 0:r.modelQuery)||void 0===a)&&a.utterance&&(t.utterance=null===(d=null===(s=g.query)||void 0===s?void 0:s.modelQuery)||void 0===d?void 0:d.utterance),[4,this.pinTileService.pinVisual(t)]):[2];case 1:return w.sent(),[2]}})})},e.prototype.initializeSection=function(t,r){var a={name:t,displayName:r,size:{displayOption:0,width:zn.Z9,height:zn.LU},visualContainers:[],visualContainerGroups:[],filters:[]};return this.explorationNavigation.goto(a),a},e.prototype.openTile=function(){this.tileNavigationService.openTile(this.currentInfocusModel.contract)},e.prototype.lastRefreshTimeInLocalWithLabel=function(){return this.localizationService.format("InFocus_RefreshTime",[this.formattedTime()])},e.prototype.formattedTime=function(){var t;if(t=(0,Qs.ee)(this.lastRefreshTime))return(0,Bs.g)(this.localizationService,t)},e.\u0275fac=function(r){return new(r||e)(o.\u0275\u0275directiveInject(o.ElementRef),o.\u0275\u0275directiveInject(ei.gz),o.\u0275\u0275directiveInject(J.yh),o.\u0275\u0275directiveInject(bt.Z),o.\u0275\u0275directiveInject(Et.A),o.\u0275\u0275directiveInject(Ys.v),o.\u0275\u0275directiveInject(Zs.L),o.\u0275\u0275directiveInject(tl.I),o.\u0275\u0275directiveInject(Xs.r),o.\u0275\u0275directiveInject(nl.U),o.\u0275\u0275directiveInject(ra.kc),o.\u0275\u0275directiveInject(el.z),o.\u0275\u0275directiveInject(Jt.o),o.\u0275\u0275directiveInject(Jn.D),o.\u0275\u0275directiveInject(ia.D),o.\u0275\u0275directiveInject(ut.y0),o.\u0275\u0275directiveInject(Il),o.\u0275\u0275directiveInject(wl.s),o.\u0275\u0275directiveInject(Mt.d),o.\u0275\u0275directiveInject(Pa.i),o.\u0275\u0275directiveInject(ol.k),o.\u0275\u0275directiveInject(rl.o),o.\u0275\u0275directiveInject(oa.D),o.\u0275\u0275directiveInject(xl.j),o.\u0275\u0275directiveInject(bn.x),o.\u0275\u0275directiveInject(il.I),o.\u0275\u0275directiveInject(Al.m),o.\u0275\u0275directiveInject(ea.T),o.\u0275\u0275directiveInject(Vl),o.\u0275\u0275directiveInject(qt.vZ))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["infocus-tile-new"]],features:[o.\u0275\u0275ProvidersFeature([Us.u,oa.D]),o.\u0275\u0275InheritDefinitionFeature],decls:20,vars:15,consts:[["data-testid","in-focus-container",1,"inFocusContainer"],[1,"inFocusAppBar","appBar"],[1,"appBarSection","left"],["data-testid","exit-focus-mode-btn",1,"iconBox",3,"click"],[1,"glyphicon","pbi-glyph-arrowleft","glyph-small"],[1,"dashboardTitle","link","appBarMenuItem"],[1,"appBarDivider"],["class","titleBar",4,"ngIf"],["class","appBarSection right",4,"ngIf"],[1,"tile-container"],[4,"ngIf"],["xPosition","after",1,"pbi-mat-menu-panel","appThemeable","more-menu",3,"overlapTrigger"],["moreActionsMenu","matMenu"],["mat-menu-item","","class","appBarMatMenu menuOption",3,"click",4,"ngIf"],[1,"titleBar"],[1,"focusTitle","appBarTitle"],[1,"focusSubtitle","appBarText"],[1,"appBarSection","right"],[1,"rightFloatedItem"],[1,"lastRefreshTimestamp","appBarText","metadata"],[1,"caption"],["class","getRelatedInsightsBtn","localizeTooltip","Insights_GetRelatedInsights","data-testid","get-insights-btn",3,"click",4,"ngIf"],["class","pinBtn","localizeTooltip","PinVisual_ToolTip",3,"click",4,"ngIf"],["id","moreActionsBtn","localizeTooltip","Options_Menu","data-testid","more-actions-menu-btn",3,"matMenuTriggerFor","ngClass"],["moreActionsTrigger","matMenuTrigger"],[1,"glyphicon","pbi-glyph-more","glyph-small"],["localizeTooltip","Insights_GetRelatedInsights","data-testid","get-insights-btn",1,"getRelatedInsightsBtn",3,"click"],[1,"glyphicon","pbi-glyph-insight","glyph-small"],[1,"appBarMenuItem"],["localizeTooltip","PinVisual_ToolTip",1,"pinBtn",3,"click"],["data-testid","pin-visual-btn",1,"glyphicon","pbi-glyph-pinned","glyph-small"],[3,"ngSwitch"],["class","explorationContainer inFocus",4,"ngSwitchCase"],["class","explorationContainer inFocus",3,"viewModel","config",4,"ngSwitchCase"],[4,"ngSwitchCase"],[1,"explorationContainer","inFocus"],["class","explorationHost inFocusBody","id","inFocusExpHost",3,"viewModel",4,"ngIf"],["id","inFocusExpHost",1,"explorationHost","inFocusBody",3,"viewModel"],[3,"model","visualContract","visualTitle","parentEvent",4,"ngIf"],[1,"exploration"],[3,"viewModel"],[1,"sourceInfo"],[1,"sourceStyle",3,"click"],[3,"model","visualContract","visualTitle","parentEvent"],[1,"explorationContainer","inFocus",3,"viewModel","config"],[3,"modulePath","componentId","inputArgs","outputArgs"],["mat-menu-item","",1,"appBarMatMenu","menuOption",3,"click"],["localize","InFocus_GenerateQrCode",1,"trimmedTextWithEllipsis"],["localize","ExportData_MenuItem",1,"trimmedTextWithEllipsis"]],template:function(r,a){1&r&&(o.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),o.\u0275\u0275listener("click",function(){return a.onExitClick()}),o.\u0275\u0275element(4,"i",4),o.\u0275\u0275elementStart(5,"span",5),o.\u0275\u0275text(6),o.\u0275\u0275elementEnd()(),o.\u0275\u0275element(7,"div",6),o.\u0275\u0275template(8,Wl,5,2,"div",7),o.\u0275\u0275pipe(9,"async"),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(10,Ql,13,8,"div",8),o.\u0275\u0275pipe(11,"async"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(12,"div",9),o.\u0275\u0275template(13,ec,5,4,"ng-container",10),o.\u0275\u0275pipe(14,"async"),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementStart(15,"mat-menu",11,12),o.\u0275\u0275template(17,tc,2,0,"button",13),o.\u0275\u0275pipe(18,"async"),o.\u0275\u0275template(19,nc,2,0,"button",13),o.\u0275\u0275elementEnd()),2&r&&(o.\u0275\u0275advance(6),o.\u0275\u0275textInterpolate(a.inFocusExit),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",o.\u0275\u0275pipeBind1(9,7,a.inFocusModel$)),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",o.\u0275\u0275pipeBind1(11,9,a.inFocusModel$)),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",o.\u0275\u0275pipeBind1(14,11,a.inFocusModel$)),o.\u0275\u0275advance(2),o.\u0275\u0275property("overlapTrigger",!1),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",o.\u0275\u0275pipeBind1(18,13,a.canGenerateQrCode$)),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",a.canExport))},dependencies:[Pe.NgClass,Pe.NgIf,Pe.NgSwitch,Pe.NgSwitchCase,Bl.R,kt.X,Ul.r,jl.q,Nl.eP,zl.o,$l.O,ii.W0,ii.tN,ii.D8,Pe.AsyncPipe],styles:["body.fullScreen[_ngcontent-%COMP%]   .inFocusContainer[_ngcontent-%COMP%]   .pinBtn[_ngcontent-%COMP%], body.fullScreen[_ngcontent-%COMP%]   .inFocusContainer[_ngcontent-%COMP%]   .getRelatedInsightsBtn[_ngcontent-%COMP%]{display:none}.inFocusContainer[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:0;right:0}.inFocusContainer[_ngcontent-%COMP%]   .inFocusCenteredSpinner[_ngcontent-%COMP%]{z-index:101;position:absolute;top:50%;left:50%;margin-left:-20px;margin-top:-20px;pointer-events:none}.inFocusContainer[_ngcontent-%COMP%]   .inFocusAppBar.appBar[_ngcontent-%COMP%]{z-index:100}.inFocusContainer[_ngcontent-%COMP%]   .inFocusAppBar.appBar[_ngcontent-%COMP%]   .appBarDivider[_ngcontent-%COMP%]{min-width:1px;width:1px;height:30px;background-color:var(--neutral-secondary-alt-color3, #999999);margin-top:5px}.inFocusContainer[_ngcontent-%COMP%]   .inFocusAppBar.appBar[_ngcontent-%COMP%]   .appBarSection.left[_ngcontent-%COMP%]{flex:1 1 auto}.inFocusContainer[_ngcontent-%COMP%]   .inFocusAppBar.appBar[_ngcontent-%COMP%]   .appBarSection.right[_ngcontent-%COMP%]{flex-grow:0}.inFocusContainer[_ngcontent-%COMP%]   .inFocusAppBar.appBar[_ngcontent-%COMP%]   .readOnlyMode[_ngcontent-%COMP%]   .editBtn[_ngcontent-%COMP%], .inFocusContainer[_ngcontent-%COMP%]   .inFocusAppBar.appBar[_ngcontent-%COMP%]   .readOnlyMode[_ngcontent-%COMP%]   .saveBtn[_ngcontent-%COMP%], .inFocusContainer[_ngcontent-%COMP%]   .inFocusAppBar.appBar[_ngcontent-%COMP%]   .insights[_ngcontent-%COMP%]   .editBtn[_ngcontent-%COMP%], .inFocusContainer[_ngcontent-%COMP%]   .inFocusAppBar.appBar[_ngcontent-%COMP%]   .insights[_ngcontent-%COMP%]   .saveBtn[_ngcontent-%COMP%], .inFocusContainer[_ngcontent-%COMP%]   .inFocusAppBar.appBar[_ngcontent-%COMP%]   .insights[_ngcontent-%COMP%]   .moreOptionsItem[_ngcontent-%COMP%]{display:none}.inFocusContainer[_ngcontent-%COMP%]   .inFocusAppBar.appBar[_ngcontent-%COMP%]   .lastRefreshTimestamp[_ngcontent-%COMP%]{color:var(--neutral-secondary-color, #666666);padding-left:5px;padding-right:10px}.inFocusContainer[_ngcontent-%COMP%]   .inFocusAppBar.appBar[_ngcontent-%COMP%]   .lastRefreshTimestamp[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%]{margin-right:.5em}.inFocusContainer[_ngcontent-%COMP%]   .inFocusAppBar.appBar[_ngcontent-%COMP%]   .inEditMode.glyphicon[_ngcontent-%COMP%]{color:var(--neutral-tertiary-alt-color, #C8C8C8);cursor:default}.inFocusContainer[_ngcontent-%COMP%]   .inFocusAppBar.appBar[_ngcontent-%COMP%]   .refreshError[_ngcontent-%COMP%]{color:var(--theme-primary-color, #F2C811);padding:0;cursor:pointer}.inFocusContainer[_ngcontent-%COMP%]   .inFocusAppBar.appBar[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .iconBox[_ngcontent-%COMP%]{margin-bottom:1px;vertical-align:bottom}.inFocusContainer[_ngcontent-%COMP%]   .inFocusAppBar.appBar[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .pbi-glyph-arrowleft[_ngcontent-%COMP%]{font-size:10px}html[dir=rtl][_ngcontent-%COMP%]   .inFocusContainer[_ngcontent-%COMP%]   .inFocusAppBar.appBar[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .pbi-glyph-arrowleft[_ngcontent-%COMP%]{transform:rotate(-180deg)}.inFocusContainer[_ngcontent-%COMP%]   .inFocusAppBar.appBar[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .dashboardTitle[_ngcontent-%COMP%]{max-width:150px}.inFocusContainer[_ngcontent-%COMP%]   .inFocusAppBar.appBar[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .focusTitle[_ngcontent-%COMP%]{max-width:500px;padding-right:5px;padding-left:10px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.inFocusContainer[_ngcontent-%COMP%]   .inFocusAppBar.appBar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{align-items:center;background-color:transparent;border:none;display:flex;overflow:hidden;padding:0 10px}.inFocusContainer[_ngcontent-%COMP%]   .inFocusAppBar.appBar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{background-color:var(--neutral-tertiary-alt-color, #C8C8C8)}.inFocusContainer[_ngcontent-%COMP%]   .inFocusAppBar.appBar[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .inFocusContainer[_ngcontent-%COMP%]   .inFocusAppBar.appBar[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%]{color:var(--neutral-tertiary-alt-color, #C8C8C8)}.inFocusContainer[_ngcontent-%COMP%]   .inFocusAppBar.appBar[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]{color:var(--neutral-secondary-alt-color, #777777)}.inFocusContainer[_ngcontent-%COMP%]   .inFocusAppBar.appBar[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:hover, .inFocusContainer[_ngcontent-%COMP%]   .inFocusAppBar.appBar[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]:active{background:none}.inFocusContainer[_ngcontent-%COMP%]   .inFocusAppBar.appBar[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .inFocusContainer[_ngcontent-%COMP%]   .inFocusAppBar.appBar[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%]{color:inherit}.inFocusContainer[_ngcontent-%COMP%]   .inFocusAppBar.appBar[_ngcontent-%COMP%]   i.glyphicon[_ngcontent-%COMP%]{align-self:center;margin:0}.inFocusContainer[_ngcontent-%COMP%]   .inFocusAppBar.appBar[_ngcontent-%COMP%]   i.glyphicon[_ngcontent-%COMP%]:not(.pbi-glyph-chevrondownmedium):not(.pbi-glyph-more){margin-right:7px}.inFocusContainer[_ngcontent-%COMP%]   .inFocusAppBar.appBar[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{overflow:hidden;padding:1px;text-overflow:ellipsis;white-space:nowrap}.inFocusContainer[_ngcontent-%COMP%]   .inFocusAppBar.appBar[_ngcontent-%COMP%]   .titleBar[_ngcontent-%COMP%]{display:flex}.inFocusContainer[_ngcontent-%COMP%]   .inFocus[_ngcontent-%COMP%]{position:absolute;z-index:100;top:40px;bottom:0;left:0;right:0;background:var(--white-color, #FFF);overflow:hidden;width:auto!important;height:auto!important}.inFocusContainer[_ngcontent-%COMP%]   .inFocus[_ngcontent-%COMP%]   .inFocusBody[_ngcontent-%COMP%]{position:absolute;left:0;right:0;bottom:0;overflow:hidden}.inFocusContainer[_ngcontent-%COMP%]   .realTimeTile[_ngcontent-%COMP%]{padding:20px}[_nghost-%COMP%]     .explorationHost{top:0}[_nghost-%COMP%]     .explorationHost .exploration .exploreCanvas{top:40px;bottom:95px;left:20px;right:20px;padding:0}[_nghost-%COMP%]     .explorationHost .exploration .exploreCanvas .selected{outline:none;border:none}[_nghost-%COMP%]     .explorationHost .exploration .exploreCanvas .visualContainerHost{padding:0}[_nghost-%COMP%]     .explorationHost .exploration .exploreCanvas .visualContainerHost .visualContainer .vcBody{left:0;bottom:0}[_nghost-%COMP%]     .explorationHost .exploration .exploreCanvas .visualContainerHost .visualContainer:not(.invalid):hover{border:none}[_nghost-%COMP%]     .explorationHost .exploration .previousVisualButton{cursor:pointer;line-height:40px;margin-left:16px;color:var(--neutral-secondary-color, #666666);background-color:transparent;font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif}[_nghost-%COMP%]     .explorationHost .exploration .previousVisualButton span{margin-left:6px;font-size:12px;vertical-align:top}[_nghost-%COMP%]     .explorationHost .exploration .sourceInfo{height:20px;width:100%;bottom:66px;position:absolute;cursor:default}[_nghost-%COMP%]     .explorationHost .exploration .sourceInfo .sourceStyle{position:absolute;font-size:11px;font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif;color:var(--neutral-secondary-alt-color, #777777);display:inline;left:30px;cursor:pointer;background-color:inherit}[_nghost-%COMP%]     .explorationHost .exploration .sourceInfo a, [_nghost-%COMP%]     .explorationHost .exploration .sourceInfo button:hover{color:var(--neutral-secondary-alt-color, #777777)}.inFocusTransition.begin[_ngcontent-%COMP%]{position:absolute;background-color:var(--white-color, #FFF);z-index:9999;opacity:0}.tile-container[_ngcontent-%COMP%]{position:absolute;z-index:100;top:40px;bottom:0;left:0;right:0;background-color:var(--fluent-theme-white-color, #FFF)}.menuOption[_ngcontent-%COMP%]{padding:8px}"]}),e}(f.w),ic=function(){function n(e,t){this.store=e,this.featureSwitchService=t}return n.prototype.onAction=function(e){return(0,R.aj)([this.store.select(Dt.AE),this.featureSwitchService.featureSwitches$]).pipe((0,N.h)(function(t){return!!t[0]}),(0,ae.U)(function(t){var r,a;return{title:null!==(a=null===(r=t[0][e.id])||void 0===r?void 0:r.displayName)&&void 0!==a?a:""}}))},n.\u0275fac=function(t){return new(t||n)(o.\u0275\u0275inject(J.yh),o.\u0275\u0275inject(qt.vZ))},n.\u0275prov=o.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n}(),En=l(32293),rc=l(44408),_a=l(67659),Sa="Annotations",ac=((Co={}).Stage1={locKey:"Comments_StartConversation",timeout:7420},Co.Stage2={locKey:"Comments_SpecificVisuals",timeout:7280},Co.Stage3={locKey:"Comments_AtMention",timeout:9800},Co);function sc(n,e){if(1&n){var t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",4)(1,"div",5),o.\u0275\u0275element(2,"i",6),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(3,"span",7),o.\u0275\u0275elementStart(4,"div",8),o.\u0275\u0275listener("click",function(){o.\u0275\u0275restoreView(t);var s=o.\u0275\u0275nextContext(2);return o.\u0275\u0275resetView(s.dismiss())}),o.\u0275\u0275element(5,"i",9),o.\u0275\u0275elementEnd()()}if(2&n){var r=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(3),o.\u0275\u0275propertyInterpolate("localize",r.getLocMessageKey())}}function lc(n,e){if(1&n){var t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",10)(1,"div",11),o.\u0275\u0275element(2,"i",12),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(3,"span",7),o.\u0275\u0275elementStart(4,"div",8),o.\u0275\u0275listener("click",function(){o.\u0275\u0275restoreView(t);var s=o.\u0275\u0275nextContext(2);return o.\u0275\u0275resetView(s.dismiss())}),o.\u0275\u0275element(5,"i",9),o.\u0275\u0275elementEnd()()}if(2&n){var r=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(3),o.\u0275\u0275propertyInterpolate("localize",r.getLocMessageKey())}}function cc(n,e){if(1&n&&(o.\u0275\u0275elementStart(0,"div"),o.\u0275\u0275elementContainerStart(1,1),o.\u0275\u0275template(2,sc,6,1,"div",2),o.\u0275\u0275template(3,lc,6,1,"div",3),o.\u0275\u0275elementContainerEnd(),o.\u0275\u0275elementEnd()),2&n){var t=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("ngSwitch",t.getBannerType()),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngSwitchCase",t.bannerType.Error),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngSwitchCase",t.bannerType.Warning)}}var Tr=function(n){return n[n.Error=0]="Error",n[n.Warning=1]="Warning",n}({}),Ir=function(){function n(){this.onDismiss=new o.EventEmitter,this.bannerType=Tr,this.showBanner=!0}return n.prototype.getBannerType=function(){if(this.bannerViewModel)return this.bannerViewModel.type},n.prototype.getLocMessageKey=function(){if(this.bannerViewModel)return this.bannerViewModel.locMessageKey},n.prototype.dismiss=function(){this.showBanner=!1,this.onDismiss.emit()},n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.\u0275\u0275defineComponent({type:n,selectors:[["error-banner"]],inputs:{bannerViewModel:"bannerViewModel"},outputs:{onDismiss:"onDismiss"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"ngSwitch"],["class","error",4,"ngSwitchCase"],["class","warning",4,"ngSwitchCase"],[1,"error"],[1,"errorIcon"],[1,"glyphicon","pbi-glyph-error"],[3,"localize"],[1,"closeIcon",3,"click"],[1,"glyphicon","pbi-glyph-close"],[1,"warning"],[1,"warningIcon"],[1,"glyphicon","pbi-glyph-warning"]],template:function(t,r){1&t&&o.\u0275\u0275template(0,cc,4,3,"div",0),2&t&&o.\u0275\u0275property("ngIf",r.showBanner)},dependencies:[Pe.NgIf,Pe.NgSwitch,Pe.NgSwitchCase,kt.X],styles:[".error[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:baseline;background-color:#fde7e9}.error[_ngcontent-%COMP%]   .errorIcon[_ngcontent-%COMP%]{width:20px;font-size:14px;color:#a80000}.error[_ngcontent-%COMP%]   .errorIcon[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%]{font-size:12px}.error[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:4px;font-size:14px;color:#151515;font-family:Segoe UI}.warning[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:baseline;background-color:#fff4ce}.warning[_ngcontent-%COMP%]   .warningIcon[_ngcontent-%COMP%]{width:20px;font-size:14px;color:#323130}.warning[_ngcontent-%COMP%]   .warningIcon[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%]{font-size:12px}.warning[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:4px;font-size:14px;color:#323130;font-family:Segoe UI}.closeIcon[_ngcontent-%COMP%]{margin-right:4px;width:20px;color:var(--theme-secondary-color, #000000)}.closeIcon[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%]{font-size:9px}"]}),n}(),dc=(0,J.P1)(Jo,function(n){return n.type}),pc=(0,J.P1)(Jo,function(n){return!!n.type}),Wn_Comments_Loading_Failed="Comments_Loading_Failed",Wn_Comments_Post_Failed="Comments_Post_Failed",Wn_Comments_Delete_Failed="Comments_Delete_Failed",Wn_Comments_Limit_Reached="Comments_Limit_Reached",Wn_Conversations_Limit_Reached_Report="Conversations_Limit_Reached_Report",Wn_Conversations_Limit_Reached_Dashboard="Conversations_Limit_Reached_Dashboard";function hc(n,e){switch(n){case"Annotations_LoadFail":return Wn_Comments_Loading_Failed;case"Annotations_PostFail":return Wn_Comments_Post_Failed;case"Annotations_DeleteFail":return Wn_Comments_Delete_Failed;case"Annotations_CommentLimitReached":return Wn_Comments_Limit_Reached;case"Annotations_ConversationLimitReached":return 1===e?Wn_Conversations_Limit_Reached_Dashboard:Wn_Conversations_Limit_Reached_Report;default:pe.fF.assertFail("unexpected error type: ".concat(n))}}function gc(n){switch(n){case"Annotations_LoadFail":case"Annotations_PostFail":case"Annotations_DeleteFail":return Tr.Error;case"Annotations_CommentLimitReached":case"Annotations_ConversationLimitReached":return Tr.Warning;default:pe.fF.assertFail("unexpected error type: ".concat(n))}}var mc=l(79061),fc=l(17447),vc=l(6450),Cc=l(65302),wr=function(n){return n.None="None",n.First="First",n.Last="Last",n}({}),xr=function(){function n(e,t,r,a,s,d){this.areConversationsFiltered=e,this.getSelectedArtifact=t,this.getSelectedComments=r,this.store=a,this.flyoutService=s,this.tutorialDataStore=d}return n.prototype.ngOnInit=function(){var e=this;this.areConversationsFiltered$=this.store.select(this.areConversationsFiltered),this.isError$=this.store.select(pc),this.isLoaded$=this.store.select(G),this.initialSelectionState=wr.None,this.errorMessageSubscription=this.store.select(dc).subscribe(function(t){e.bannerViewModel=t?function(e,t){return{locMessageKey:hc(e,t),type:gc(e)}}(t,e.annotatedArtifactType):null}),this.initializeCommentData(),this.updateLastSeenAnnotationTimestamp()},n.prototype.ngOnDestroy=function(){this.unsubscribeAll(),this.resetSelection(),this.dismissError()},n.prototype.initializeCommentData=function(){var e=this;this.commentSubscription=(0,R.aj)(this.store.select(G),this.store.select(this.getSelectedComments),this.store.select(L),this.store.select(this.getSelectedArtifact)).subscribe(function(t){var a=t[1],s=t[2],d=t[3];if(t[0]&&d){var g=e.selectedConversationGroupKey!==s||(e.selectedArtifact&&e.selectedArtifact.objectId)!==d.objectId;g&&(e.selectedConversationGroupKey=s,e.selectedArtifact=d),s&&g&&(e.comments=a,e.setSpotlightOnArtifact())}})},n.prototype.updateLastSeenAnnotationTimestamp=function(){var e=this;(0,R.aj)(this.store.select(k),this.store.select(this.getSelectedArtifact)).pipe((0,he.q)(1)).subscribe(function(t){var r=t[0],a=t[1];if(!_.isEmpty(r)&&a){var s=_.maxBy(r,function(d){return new Date(d.created)});e.store.select(fc.$m).pipe((0,he.q)(1)).subscribe(function(d){var g=_.filter(d,function(O){return O.oid===a.objectId});_.isEmpty(g)||e.store.dispatch(new mc.BN({recent:Object.assign({},g[0],{lastan:s.created})}))})}})},n.prototype.dismissError=function(){this.store.dispatch(new Xi)},n.prototype.shouldShowTutorial=function(){return!this.tutorialDataStore.getKey(Sa)},n.prototype.closePane=function(){this.flyoutService.collapseFlyout()},n.prototype.unsubscribeAll=function(){this.commentSubscription&&this.commentSubscription.unsubscribe(),this.errorMessageSubscription&&this.errorMessageSubscription.unsubscribe()},n.prototype.allCommentsClick=function(e){var r=vc.m.getFocusNextElement(!1,e.target),a=r.classList.contains("cdk-focus-trap-anchor");pe.fF.assert(function(){return a},"element is focus trap"),this.resetSelection(),setTimeout(function(){return Cc.IK.getInstance().focusNextElement(r)})},n.prototype.resetSelection=function(){this.clearSpotlight()},n.prototype.clearSpotlight=function(){},n.prototype.setSpotlightOnArtifact=function(){},n.\u0275fac=function(t){o.\u0275\u0275invalidFactory()},n.\u0275dir=o.\u0275\u0275defineDirective({type:n}),n}(),bc=(0,J.P1)(L,function(n){return n&&"Tile"===n.type}),yc=(0,J.P1)(Yo,Dt.W$,L,function(n,e,t){if(t){pe.fF.assert(function(){return"Dashboard"===t.type||"Tile"===t.type},"getDashboardDisplayedConversationGroups is intended for use only in dashboards.\n        ".concat(t.type," AnnotatedItemType is selected"));var r=[],a=n[nn(t)];a&&r.push(a);var s="Dashboard"===t.type?e.tiles:[];if(_.isEmpty(s))return r;for(var d=0,g=s;d<g.length;d++){var w=n[nn({id:g[d].id,type:"Tile"})];w&&r.push(w)}return r}}),Pc=(0,J.P1)(yc,C,function(n,e){return _(n).map(function(t){return t.conversationIds}).flatten().map(function(t){return e[t]}).value()}),Mc=(0,J.P1)(Pc,function(n){return _(n).map(function(e){return e.commentIds}).flatten().map(function(e){return _.toNumber(e)}).value()}),Oc=(0,J.P1)(Mc,I,function(n,e){return _.map(n,function(t){return e[t]})}),ri=l(33794),_c=l(58317),Sc=function(){function n(e,t){this.store=e,this.globalEventBridge=t}return n.prototype.selectById=function(e){this.store.dispatch(new Ct.ku({id:e}))},n.prototype.selectByObjectId=function(e){this.store.dispatch(new Ct.Ph({id:e}))},n.prototype.clearSelected=function(){this.store.dispatch(new Ct.zn)},n.prototype.scrollToSelectedTile=function(){this.globalEventBridge.publishToChannel(_c.ii)},n.\u0275fac=function(t){return new(t||n)(o.\u0275\u0275inject(J.yh),o.\u0275\u0275inject(bt.Z))},n.\u0275prov=o.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n}(),Ar=l(73425),Er=l(54932),Dr=l(35756),Ta="PBI.Annotations.PostComment",Tc=q.cx[Ta]=(0,q.b1)(Ta,{logExpAssignment:!0}),Ia="PBI.Annotations.DeleteComment",Ic=q.cx[Ia]=(0,q.b1)(Ia),wa="PBI.Annotations.LoadFullConversation",wc=q.cx[wa]=(0,q.b1)(wa),xa="PBI.Annotations.LoadConvoGroup",Aa=q.cx[xa]=(0,q.b1)(xa),Ea="PBI.Annotations.TutorialDismiss",xc=q.cx[Ea]=(0,q.b1)(Ea),Da="PBI.Annotations.AutoShareArtifact",Ac=q.cx[Da]=(0,q.b1)(Da),ka="PBI.Annotations.NavigateToNextComment",Ec=q.cx[ka]=(0,q.b1)(ka),Ra="PBI.Annotations.NavigateToPreviousComment",Dc=q.cx[Ra]=(0,q.b1)(Ra),Fa="PBI.Annotations.OpenAnnotationsPane",kc=(q.cx[Fa]=(0,q.b1)(Fa),l(12913)),La=l(47754),Rc=l(18942),Va=l(76072);function Fc(n,e){1&n&&o.\u0275\u0275element(0,"i",10)}function Lc(n,e){if(1&n&&o.\u0275\u0275element(0,"img",11),2&n){var t=o.\u0275\u0275nextContext().$implicit;o.\u0275\u0275property("src",t.profilePictureUrl,o.\u0275\u0275sanitizeUrl)}}function Vc(n,e){if(1&n&&(o.\u0275\u0275elementStart(0,"div",4),o.\u0275\u0275elementContainerStart(1,5),o.\u0275\u0275template(2,Fc,1,0,"i",6),o.\u0275\u0275template(3,Lc,1,1,"img",7),o.\u0275\u0275elementContainerEnd(),o.\u0275\u0275elementStart(4,"div")(5,"span",8),o.\u0275\u0275text(6),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(7,"span",9),o.\u0275\u0275text(8),o.\u0275\u0275elementEnd()()()),2&n){var t=e.$implicit;o.\u0275\u0275advance(1),o.\u0275\u0275property("ngSwitch",!!t.profilePictureUrl),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngSwitchCase",!1),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngSwitchCase",!0),o.\u0275\u0275advance(3),o.\u0275\u0275textInterpolate(t.fullname),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate(t.userPrincipalName)}}var Bc=function(){function n(e,t,r,a,s,d,g){this.localizationService=e,this.profileImageService=t,this.dialog=r,this.telemetryService=s,this.sanitizer=d,this.lazyProvider=g,this.autoShareDialogParams=a,this.dialogUsers=this.autoShareDialogParams.usersToShareWith}return n.prototype.ngOnInit=function(){var e=this,t="";switch(this.autoShareDialogParams.artifactType){case 1:t=this.localizationService.get("ArtifactKind_Dashboard");break;case 2:t=this.localizationService.get("ArtifactKind_Report");break;default:pe.fF.assertFail("Annotations Autoshare dialog: Unsupported artifact type.")}this.dialogMessage=this.localizationService.format("AutoShare_Dialog_Message",[t]);for(var r=function(w){a.profileImageService.findOrGetUserPhoto(w.oid).then(function(D){w.profilePictureUrl=e.sanitizer.bypassSecurityTrustUrl(D)},function(){kc.f.warning("Failed to get user photo for ".concat(w.oid))})},a=this,s=0,d=this.dialogUsers;s<d.length;s++)r(d[s])},n.prototype.autoShareArtifact=function(e){var t=_.map(this.autoShareDialogParams.usersToShareWith,function(a){return a.oid});if(!0===e&&!_.isEmpty(t)){var r=this.telemetryService.logEvent(Ac,{commentCreatorOid:this.autoShareDialogParams.commentCreatorOid,usersToShareWithOids:t});switch(this.autoShareDialogParams.artifactType){case 1:this.shareDashboard(t,r);break;case 2:this.shareReport(t,r);break;default:pe.fF.assertFail("Annotations Autoshare dialog: Unsupported artifact type.")}}this.dialog.close(e)},n.prototype.shareDashboard=function(e,t){return(0,M.mG)(this,void 0,void 0,function(){return(0,M.Jh)(this,function(a){switch(a.label){case 0:return[4,this.lazyProvider.get("@powerbi/WebSharing/web-sharing.module#WebSharingModule","dashboardInvitationHttp")];case 1:return[4,a.sent().sendInvitation(this.autoShareDialogParams.artifactId,void 0,e,"",!1,!1,!1,!1,t)];case 2:return a.sent(),[2]}})})},n.prototype.shareReport=function(e,t){return(0,M.mG)(this,void 0,void 0,function(){return(0,M.Jh)(this,function(a){switch(a.label){case 0:return[4,this.lazyProvider.get("@powerbi/WebSharing/web-sharing.module#WebSharingModule","InvitationHttpService")];case 1:return a.sent().sendInvitation({artifactObjectId:this.autoShareDialogParams.artifactOid,artifactId:this.autoShareDialogParams.artifactId,artifactType:Je.B.Report,artifactDisplayName:"",emailAddresses:void 0,aadEntityIds:e,message:"",permissions:1,notifyViaEmail:!1},t),[2]}})})},n.\u0275fac=function(t){return new(t||n)(o.\u0275\u0275directiveInject(Jt.o),o.\u0275\u0275directiveInject(La.L),o.\u0275\u0275directiveInject(En.so),o.\u0275\u0275directiveInject(En.WI),o.\u0275\u0275directiveInject(ut.y0),o.\u0275\u0275directiveInject(Rc.H7),o.\u0275\u0275directiveInject(Va.E))},n.\u0275cmp=o.\u0275\u0275defineComponent({type:n,selectors:[["autoshare-dialog"]],decls:8,vars:2,consts:[["mat-dialog-title","","localize","AutoShare_Dialog_Title"],["class","user-list",4,"ngFor","ngForOf"],["localize","AutoShare_Dialog_PostBtn",1,"post-btn",3,"click"],["localize","Cancel_ButtonText",1,"cancel-btn",3,"click"],[1,"user-list"],[3,"ngSwitch"],["class","glyphicon pbi-glyph-user profile-picture",4,"ngSwitchCase"],["class","pbi-glyph-user profile-picture",3,"src",4,"ngSwitchCase"],[1,"user-name"],[1,"user-email"],[1,"glyphicon","pbi-glyph-user","profile-picture"],[1,"pbi-glyph-user","profile-picture",3,"src"]],template:function(t,r){1&t&&(o.\u0275\u0275element(0,"h1",0),o.\u0275\u0275elementStart(1,"mat-dialog-content")(2,"span"),o.\u0275\u0275text(3),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(4,Vc,9,5,"div",1),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"mat-dialog-actions")(6,"button",2),o.\u0275\u0275listener("click",function(){return r.autoShareArtifact(!0)}),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(7,"button",3),o.\u0275\u0275listener("click",function(){return r.autoShareArtifact(!1)}),o.\u0275\u0275elementEnd()()),2&t&&(o.\u0275\u0275advance(3),o.\u0275\u0275textInterpolate(r.dialogMessage),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",r.dialogUsers))},dependencies:[Pe.NgForOf,Pe.NgSwitch,Pe.NgSwitchCase,kt.X,En.uh,En.xY,En.H8],styles:[".mat-mdc-dialog-title[_ngcontent-%COMP%]{line-height:1;font-family:Segoe UI Semibold,wf_segoe-ui_semibold,helvetica,arial,sans-serif;color:var(--black-color, #000);padding-bottom:16px;margin:0}.mat-mdc-dialog-content[_ngcontent-%COMP%]{line-height:normal;font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif;padding:0;margin:0;font-size:14px;color:var(--black-color, #000);display:inline-grid}.mat-mdc-dialog-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-bottom:16px}.mat-mdc-dialog-content[_ngcontent-%COMP%]   .user-list[_ngcontent-%COMP%]{padding:1px 0;display:inline-flex}.mat-mdc-dialog-content[_ngcontent-%COMP%]   .user-list[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:0}.mat-mdc-dialog-content[_ngcontent-%COMP%]   .user-list[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:inline-grid;padding-left:7px}.mat-mdc-dialog-content[_ngcontent-%COMP%]   .user-list[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{font-family:Segoe UI Semibold,wf_segoe-ui_semibold,helvetica,arial,sans-serif;font-size:14px;color:var(--neutral-primary-color, #333333)!important}.mat-mdc-dialog-content[_ngcontent-%COMP%]   .user-list[_ngcontent-%COMP%]   .user-email[_ngcontent-%COMP%]{display:block;font-size:14px;font-family:Segoe UI Semilight,wf_segoe-ui_semilight,helvetica,arial,sans-serif;color:var(--neutral-secondary-color, #666666)}.mat-mdc-dialog-content[_ngcontent-%COMP%]   .user-list[_ngcontent-%COMP%]   .profile-picture[_ngcontent-%COMP%]{border-radius:50%;height:28px;width:28px;padding:5px 0;font-size:22px}.mat-mdc-dialog-actions[_ngcontent-%COMP%]{line-height:1;padding-top:38px;margin:0;color:var(--black-color, #000);display:flex;justify-content:flex-end}.mat-mdc-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-family:Segoe UI Semibold,wf_segoe-ui_semibold,helvetica,arial,sans-serif;font-size:14px;color:var(--black-color, #000);text-align:center;padding:5px 8px}.mat-mdc-dialog-actions[_ngcontent-%COMP%]   .post-btn[_ngcontent-%COMP%]{background-color:var(--button-primary-base-fill-color, #F2C811);color:var(--button-primary-content-color);border:var(--button-primary-base-fill-color, #F2C811) 2px solid;margin-right:16px}.mat-mdc-dialog-actions[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]{background-color:var(--neutral-lighter-color, #F4F4F4);border:var(--neutral-lighter-color, #F4F4F4) 2px solid}"]}),n}(),Qt=l(6426);var Nc={noCommentsIconURL:"".concat((0,Qt.Xr)(),"/images/noComments.png"),replyIconURL:"",spinnerIconURL:""},Wc=(0,M.pi)((0,M.pi)((0,M.pi)((0,M.pi)({},Nc),{enableReplying:!0,enableDeleting:!0,enableDeletingCommentWithReplies:!0,enableAttachments:!1,enableEditing:!1,enableHashtags:!1,enableNavigation:!1,enableUpvoting:!1,enableCloseCommentButton:!1,enableHidingMainControlRow:!1,enablePinging:!0,enableBasicPingTagStyle:!0}),{maxRepliesVisible:1,roundProfilePictures:!0}),{profilePicturePlaceholderStyleClass:"glyphicon pbi-glyph-user",deleteButtonClass:"glyphicon pbi-glyph-delete",replyButtonClass:"glyphicon pbi-glyph-reload",replyButtonCaretDownClass:"glyphicon pbi-glyph-chevrondownmedium",replyButtonCaretUpClass:"glyphicon pbi-glyph-chevronupmedium"});function Hc(n){switch(n){case 2:return"Comments_ShareFeedbackReport";case 1:return"Comments_ShareFeedbackDashboardsOrViz";default:pe.fF.assertFail("unknown annotatedArtifactType")}}var Kc=l(60134),Qc=l(69637),qc=l(15910),Jc=["commentsHost"],kr=function(){function n(e,t,r,a,s,d,g,O,w){this.dialogService=e,this.featureSwitchService=t,this.localizationService=r,this.telemetryService=a,this.store=s,this.profileImageService=d,this.lazyProvider=g,this.userInfo=O,this.userDirectoryHttpService=w,this.handleConversationSelect=new o.EventEmitter}return n.prototype.ngAfterViewInit=function(){this.initializeLibrary()},n.prototype.ngOnChanges=function(e){var t=e.comments;t.currentValue!==t.previousValue&&null!=t.previousValue&&this.initializeLibrary()},n.prototype.ngOnDestroy=function(){this.commentSubscription&&this.commentSubscription.unsubscribe()},n.prototype.initializeLibrary=function(){var e=this;(0,R.aj)(this.store.select(Kc.aR),this.store.select(rr)).pipe((0,he.q)(1)).subscribe(function(t){var r=t[0],a=t[1],s=function(n){var e=function(n,e,t){return{textareaPlaceholderText:"Comments_Textarea_Placeholder",textareaAriaLabelText:"Comments_Textarea_AriaLabel",sendText:"Comments_Post",replyText:"Reply",deleteText:"Delete",deleteLabelText:"Comments_Delete_Label",youText:"".concat(n," ").concat(e),viewAllRepliesText:"Chevron_ExpandDescription",hideRepliesText:"Chevron_CollapseDescription",highlightArtifactText:"Comments_Spotlight_Tile",bookmarkArtifactText:"Comments_Report_Bookmark_Icon",deletedCommentAuthorText:"Comments_Deleted_Author",deletedCommentContentText:"Comments_Deleted_Content",getAllChildCommentsText:"Chevron_ExpandDescription",noResultsText:"NoResultsText",noCommentsText:{headerText:"Comments_StartConversation",subtitleText:Hc(t),description:"Comments_AtMention"},unknownUserText:"UnknownUser",previousCommentText:"Previous_ButtonText",nextCommentText:"Next_ButtonText"}}(n.givenName,n.familyName,n.annotatedArtifactType);return(0,M.pi)((0,M.pi)((0,M.pi)({},Wc),e),{currentUserId:n.userId,fieldMappings:{conversationId:"conversationId",hasMoreComments:"hasMoreComments",mentionedUsers:"mentionedUsers",creatorOid:"creatorOid",supportedConversationButtons:"supportedConversationButtons",isDeleted:"isDeleted",canDelete:"canDelete",userPrincipalName:"userPrincipalName"}})}({givenName:r.givenName,familyName:r.familyName,userId:r.userId,annotatedArtifactType:e.annotatedArtifactType});e.deepLinkInfo=e.toDeepLinkInfo(a),$(e.host.nativeElement).comments((0,M.pi)((0,M.pi)({},s),{getComments:function(g,O){return e.getComments(g,O)},postComment:function(g,O,w){return e.postComment(g,O,w)},deleteComment:function(g,O,w){return e.deleteComment(g,O,w)},getUsers:function(g,O,w){return e.getUsers(g,O,w)},getAllChildComments:function(g,O,w){return e.getAllChildComments(g,O,w)},getProfilePictureURL:function(g,O,w){return e.getProfilePictureURL(g,O,w)},textFormatter:function(g){return e.textFormatter(g)},timeFormatter:function(g){return e.timeFormatter(g)},spotlightOrApplyBookmarkIfAny:function(g){return e.spotlightOrApplyBookmarkIfAny(g)},navigateToPreviousSection:function(){return e.navigateToPreviousSection()},navigateToNextSection:function(){return e.navigateToNextSection()},isPreviousNextNavigationEnabled:function(){return e.isPreviousNextNavigationEnabled()},isHandleConversationClickEnabled:function(){return e.isHandleConversationClickEnabled()},getInitialSelectionState:function(){return e.initialSelectionState},logNavigateToNextCommentEvent:function(){return e.logNavigateToNextCommentEvent()},logNavigateToPreviousCommentEvent:function(){return e.logNavigateToPreviousCommentEvent()},assertFail:mt.sr}))})},n.prototype.toDeepLinkInfo=function(e){var t;return e.retrievalResult===on.CommentRetrieved?t={commentId:e.deepLinkCommentKey.commentId}:e.retrievalResult===on.Error?t={errorMessage:this.textFormatter("Comments_DeepLink_CommentDeleted")}:e.retrievalResult===on.CommentNoLongerExists&&(t={errorMessage:this.textFormatter("Comments_DeepLink_GeneralError")}),t},n.prototype.textFormatter=function(e){var t=this.localizationService.getOptional(e);return _.isEmpty(t)?e:t},n.prototype.getComments=function(e,t){(0,mt.mv)(this.comments,"Comments should be defined"),e(this.comments,this.deepLinkInfo)},n.prototype.getAllChildComments=function(e,t,r){this.store.dispatch(new Ri({conversationId:e,successCallback:t,errorCallback:r}))},n.prototype.postComment=function(e,t,r){return(0,M.mG)(this,void 0,void 0,function(){var a,d,g,w=this;return(0,M.Jh)(this,function(D){switch(D.label){case 0:return null!=e.parent?[3,2]:[4,this.captureState()];case 1:null!=(a=D.sent())&&(e.bookmark={id:null,objectId:null,explorationState:a}),D.label=2;case 2:return this.featureSwitchService.featureSwitches.autoShareAnnotatedArtifact&&!_.isEmpty(e.mentionedUsers)&&this.commentingUserCanReshareArtifact()?[4,this.getUsersToShareWith(e.mentionedUsers)]:[3,4];case 3:if(d=D.sent(),!_.isEmpty(d))return g=this.setDialogParams(this.annotatedArtifactType,d),this.dialogService.open(Bc,{data:g,hasBackdrop:!0,maxWidth:368}).afterClosed().subscribe(function(V){V?w.dispatchPostComment(e,t,r):r()}),[2];D.label=4;case 4:return this.dispatchPostComment(e,t,r),[2]}})})},n.prototype.dispatchPostComment=function(e,t,r){this.store.dispatch(new wi({comment:e,successCallback:t,errorCallback:r}))},n.prototype.deleteComment=function(e,t,r){this.store.dispatch(new Ei({comment:e,successCallback:t,errorCallback:r}))},n.prototype.getUsers=function(e,t,r){return(0,M.mG)(this,void 0,void 0,function(){var a,d;return(0,M.Jh)(this,function(g){switch(g.label){case 0:return _.isEmpty(e)?[3,2]:[4,this.userDirectoryHttpService.findUsers(e,1,10,!1,!0).toPromise()];case 1:d=g.sent(),a=_.map(d.data,function(O){return{fullname:O.displayName?O.displayName:O.userPrincipalName,objectId:O.objectId,userPrincipalName:O.userPrincipalName}}),g.label=2;case 2:return t(a),[2]}})})},n.prototype.getProfilePictureURL=function(e,t,r){return(0,M.mG)(this,void 0,void 0,function(){var a;return(0,M.Jh)(this,function(d){switch(d.label){case 0:return d.trys.push([0,2,,3]),[4,this.profileImageService.findOrGetUserPhoto(e)];case 1:return(a=d.sent())?(t(a),[2]):[3,3];case 2:return d.sent(),[3,3];case 3:return r(),[2]}})})},n.prototype.timeFormatter=function(e){return(0,Qc.WQ)(new Date(e),this.localizationService)},n.prototype.commentingUserCanReshareArtifact=function(){return this.artifactContract&&(0,$n.yE)(this.artifactContract.permissions,4)},n.prototype.getUsersToShareWith=function(e){return(0,M.mG)(this,void 0,void 0,function(){var t,a;return(0,M.Jh)(this,function(s){switch(s.label){case 0:return this.artifactContract&&(0,$n.yE)(this.artifactContract.permissions,7)?(t=[],[4,this.lazyProvider.get("@powerbi/WebSharing/web-sharing.module#WebSharingModule","permissionData")]):[3,3];case 1:return[4,s.sent().getPermissionArtifactByObjectId(this.annotatedArtifactType,this.artifactContract.objectId)];case 2:return(a=s.sent())?(_.filter(e,function(d){_.some(a.members,function(g){return g.email===d.userPrincipalName&&(0,$n.yE)(g.permission,1)})||t.push(d)}),[2,t]):[2,e];case 3:return[2,e]}})})},n.prototype.setDialogParams=function(e,t){return{artifactType:e,artifactId:this.artifactContract.id,artifactOid:this.artifactContract.objectId,commentCreatorOid:this.userInfo.uoid,usersToShareWith:t}},n.prototype.spotlightOrApplyBookmarkIfAny=function(e){this.handleConversationSelect.emit(e)},n.prototype.isPreviousNextNavigationEnabled=function(){return this.featureSwitchService.featureSwitches.reportAnnotationsUI&&!this.areConversationsFiltered},n.prototype.isHandleConversationClickEnabled=function(){return this.featureSwitchService.featureSwitches.reportAnnotationsUI},n.prototype.logNavigateToNextCommentEvent=function(){this.telemetryService.logEvent(Ec)},n.prototype.logNavigateToPreviousCommentEvent=function(){this.telemetryService.logEvent(Dc)},n.\u0275fac=function(t){return new(t||n)(o.\u0275\u0275directiveInject(bn.x),o.\u0275\u0275directiveInject(qt.vZ),o.\u0275\u0275directiveInject(Jt.o),o.\u0275\u0275directiveInject(ut.y0),o.\u0275\u0275directiveInject(J.yh),o.\u0275\u0275directiveInject(La.L),o.\u0275\u0275directiveInject(Va.E),o.\u0275\u0275directiveInject(Cn.a),o.\u0275\u0275directiveInject(qc.W))},n.\u0275cmp=o.\u0275\u0275defineComponent({type:n,selectors:[["annotations-host"]],viewQuery:function(t,r){var a;(1&t&&o.\u0275\u0275viewQuery(Jc,5),2&t)&&(o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(r.host=a.first))},inputs:{comments:"comments",artifactContract:"artifactContract",annotatedArtifactType:"annotatedArtifactType",areConversationsFiltered:"areConversationsFiltered",initialSelectionState:"initialSelectionState",captureState:"captureState",navigateToPreviousSection:"navigateToPreviousSection",navigateToNextSection:"navigateToNextSection"},outputs:{handleConversationSelect:"handleConversationSelect"},features:[o.\u0275\u0275NgOnChangesFeature],decls:2,vars:0,consts:[["commentsHost",""]],template:function(t,r){1&t&&o.\u0275\u0275element(0,"article",null,0)},styles:["annotations-host{display:block;width:100%;height:100%;line-height:1;overflow-x:hidden;overflow-y:auto}annotations-host .jquery-comments{height:100%;display:flex;flex-direction:column}annotations-host .jquery-comments .commenting-field.main{flex:0 0 auto;margin-bottom:0;text-align:center;padding:24px}annotations-host .jquery-comments .commenting-field.main .textarea-wrapper{width:292px;max-width:100%;display:inline-block}annotations-host .jquery-comments .commenting-field .profile-picture{display:none}annotations-host .jquery-comments .commenting-field .textarea-wrapper{padding:0;border-bottom:1px solid var(--neutral-light-color, #EAEAEA)}annotations-host .jquery-comments .commenting-field .textarea-wrapper:before{display:none}annotations-host .jquery-comments .commenting-field .textarea-wrapper:after{display:none}annotations-host .jquery-comments .commenting-field .textarea-wrapper .textarea{text-align:left;padding:12px;font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif;color:var(--neutral-primary-color, #333333);font-size:14px;line-height:normal;border:none;box-shadow:0 2px 8px rgba(0,0,0,.05);word-break:break-word;word-wrap:break-word;-ms-overflow-style:scrollbar;min-height:43px;white-space:pre-wrap}annotations-host .jquery-comments .commenting-field .textarea-wrapper .textarea>p{line-height:.25em}annotations-host .jquery-comments li.comment .control-row,annotations-host .jquery-comments .textarea-wrapper .control-row{padding-top:8px;display:flex;justify-content:flex-end}annotations-host .jquery-comments li.comment .control-row .send,annotations-host .jquery-comments .textarea-wrapper .control-row .send{font-family:Segoe UI Semibold,wf_segoe-ui_semibold,helvetica,arial,sans-serif;background-color:var(--button-primary-base-fill-color, #F2C811)!important;border:var(--button-primary-base-fill-color, #F2C811) 2px solid;color:var(--button-primary-content-color, #000);opacity:1;font-size:14px;height:32px;width:84px;text-align:center;margin:0}annotations-host .jquery-comments li.comment .control-row .send:not(.enabled),annotations-host .jquery-comments .textarea-wrapper .control-row .send:not(.enabled){background-color:var(--neutral-lighter-color, #F4F4F4)!important;border:var(--neutral-lighter-color, #F4F4F4) 2px solid;color:var(--neutral-tertiary-color, #A6A6A6)}annotations-host .jquery-comments li.comment .control-row .enabled:hover,annotations-host .jquery-comments .textarea-wrapper .control-row .enabled:hover{background-color:var(--button-primary-hover-fill-color, #F2C811)!important;border:var(--button-primary-hover-fill-color, #F2C811) 2px solid}annotations-host .jquery-comments li.comment .control-row .enabled:focus,annotations-host .jquery-comments .textarea-wrapper .control-row .enabled:focus{outline-color:transparent}html[data-focus-source=key] annotations-host .jquery-comments li.comment .control-row .enabled:focus,html[data-focus-source=key] annotations-host .jquery-comments .textarea-wrapper .control-row .enabled:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color)}annotations-host .jquery-comments [contentEditable=true]:empty:not(:focus):before{color:var(--gray-140, #484644)}annotations-host .jquery-comments .data-container{flex:1;padding-bottom:24px;text-align:center}annotations-host .jquery-comments ul.main:empty~.no-comments{display:flex;flex-direction:column;align-items:center}annotations-host .jquery-comments ul.main:empty~.no-comments .header{font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif;font-weight:400;font-size:16px;color:var(--black-color, #000);margin:10px 0}annotations-host .jquery-comments ul.main:empty~.no-comments .sub-title{font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif;font-weight:400;font-size:16px;color:var(--neutral-secondary-color, #666666);margin:0;width:100%}annotations-host .jquery-comments ul.main:empty~.no-comments i{width:224px;height:141px;background-size:224px 141px;margin:30px 0}annotations-host .jquery-comments ul.main:empty~.no-comments .description{font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif;font-weight:400;font-size:14px;color:var(--neutral-secondary-color, #666666);margin:0 0 10px}annotations-host .jquery-comments .basic-tag.ping{color:var(--default-link-color, #1F3A93)!important;background:none;font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif;font-size:14px;line-height:inherit;cursor:text;-webkit-user-select:text;-ms-user-select:text;user-select:text;pointer-events:none}annotations-host .jquery-comments #comment-list{font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif;color:var(--neutral-primary-color, #333333);font-size:14px;display:inline-block;width:295px;max-width:100%;text-align:left}annotations-host .jquery-comments #comment-list li.comment{margin:0 0 20px}annotations-host .jquery-comments #comment-list li.comment .comment-wrapper{padding:12px 12px 10px;border-bottom:1px solid var(--neutral-light-color, #EAEAEA);display:flex;background:var(--white-color, #FFF)}annotations-host .jquery-comments #comment-list li.comment .comment-wrapper .wrapper{box-shadow:none!important;padding:0 0 0 7px}annotations-host .jquery-comments #comment-list li.comment .wrapper{padding:0}annotations-host .jquery-comments #comment-list li.comment .wrapper:hover .actions button{opacity:1}annotations-host .jquery-comments #comment-list li.comment .wrapper .actions{display:block;float:right;width:12px;height:12px;font-size:12px}annotations-host .jquery-comments #comment-list li.comment .wrapper .actions button{margin:0;opacity:0}annotations-host .jquery-comments #comment-list li.comment .wrapper .actions button:focus{outline-color:transparent;opacity:1}html[data-focus-source=key] annotations-host .jquery-comments #comment-list li.comment .wrapper .actions button:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color)}annotations-host .jquery-comments #comment-list li.comment .comment-info{max-width:28px;display:inline-block}annotations-host .jquery-comments #comment-list li.comment .comment-info .highlight-artifact{background-color:var(--white-color, #FFF);border-radius:12px;color:var(--neutral-primary-color, #333333);height:20px;width:20px;font-size:12px;padding-bottom:4px;margin:8px 0 0 4px;border:1px solid var(--neutral-primary-color, #333333)}annotations-host .jquery-comments #comment-list li.comment .comment-info .highlight-artifact.highlight-artifact-selected{background-color:var(--theme-primary-color, #F2C811);color:var(--text-primary-content-color);border:none}annotations-host .jquery-comments #comment-list li.comment .comment-info .highlight-artifact:focus{outline-color:transparent}html[data-focus-source=key] annotations-host .jquery-comments #comment-list li.comment .comment-info .highlight-artifact:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color)}annotations-host .jquery-comments #comment-list li.comment .comment-info .bookmark-artifact{background-color:var(--white-color, #FFF);border-radius:12px;color:var(--neutral-primary-color, #333333);height:20px;width:20px;font-size:12px;padding:4px .35px;margin:8px 0 0 4px;box-shadow:0 .3px .9px rgba(0,0,0,.12),0 1.6px 3.6px rgba(0,0,0,.3)}annotations-host .jquery-comments #comment-list li.comment .comment-info .bookmark-artifact.bookmark-artifact-selected{padding:4px 1.5px;background-color:var(--button-primary-base-fill-color, #F2C811);color:var(--button-primary-content-color);border:none}annotations-host .jquery-comments #comment-list li.comment .comment-info .bookmark-artifact:focus{outline-color:transparent}html[data-focus-source=key] annotations-host .jquery-comments #comment-list li.comment .comment-info .bookmark-artifact:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color)}annotations-host .jquery-comments #comment-list li.comment .action.reply{background-color:var(--neutral-lighter-color, #F4F4F4);box-shadow:0 2px 8px rgba(0,0,0,.05);border-bottom:1px solid var(--neutral-light-color, #EAEAEA);cursor:pointer;padding:8px}annotations-host .jquery-comments #comment-list li.comment .action.reply button{width:100%;text-align:left}annotations-host .jquery-comments #comment-list li.comment .action.reply button i{font-size:10px;color:var(--neutral-primary-color, #333333);padding-right:8px}annotations-host .jquery-comments #comment-list li.comment .action.reply button span{font-size:12px;color:var(--neutral-primary-color, #333333)}annotations-host .jquery-comments #comment-list li.comment .action.reply button:focus{outline-color:transparent}html[data-focus-source=key] annotations-host .jquery-comments #comment-list li.comment .action.reply button:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color)}annotations-host .jquery-comments #comment-list li.comment .child-comments>:before{display:none}annotations-host .jquery-comments #comment-list li.comment .child-comments li>button{vertical-align:middle}annotations-host .jquery-comments #comment-list li.comment .child-comments li>button:focus{outline-color:transparent}html[data-focus-source=key] annotations-host .jquery-comments #comment-list li.comment .child-comments li>button:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color)}annotations-host .jquery-comments #comment-list li.comment .child-comments li.comment{margin:0;border-bottom:1px solid var(--neutral-light-color, #EAEAEA)}annotations-host .jquery-comments #comment-list li.comment .child-comments .comment-wrapper{background-color:var(--neutral-lighter-color, #F4F4F4);padding:12px 12px 10px;box-shadow:0 2px 8px rgba(0,0,0,.05);border:none}annotations-host .jquery-comments #comment-list li.comment .child-comments .comment-wrapper.deep-link-comment-start{background-color:var(--theme-primary-color, #F2C811)}annotations-host .jquery-comments #comment-list li.comment .child-comments .comment-wrapper.deep-link-comment-start.deep-link-comment-end{background-color:var(--neutral-lighter-color, #F4F4F4);-webkit-transition:background-color 3s ease-out;-moz-transition:background-color 3s ease-out;-o-transition:background-color 3s ease-out;transition:background-color 3s ease-out}annotations-host .jquery-comments #comment-list li.comment .child-comments .wrapper{background-color:inherit;box-shadow:none!important;padding:0 0 0 7px}annotations-host .jquery-comments #comment-list li.comment .child-comments .comment-info{margin:0}annotations-host .jquery-comments #comment-list li.comment .child-comments .commenting-field{padding:0}annotations-host .jquery-comments #comment-list li.comment .child-comments .commenting-field .textarea-wrapper{padding:0;border-bottom:none}annotations-host .jquery-comments #comment-list li.comment .wrapper{background-color:var(--white-color, #FFF);padding:10px;box-shadow:0 2px 8px rgba(0,0,0,.05)!important;flex:1 1 auto}annotations-host .jquery-comments #comment-list li.comment .wrapper.deep-link-comment-start{background-color:var(--theme-primary-color, #F2C811)}annotations-host .jquery-comments #comment-list li.comment .wrapper.deep-link-comment-start.deep-link-comment-end{background-color:var(--white-color, #FFF);-webkit-transition:background-color 3s ease-out;-moz-transition:background-color 3s ease-out;-o-transition:background-color 3s ease-out;transition:background-color 3s ease-out}annotations-host .jquery-comments #comment-list li.comment .profile-picture{font-size:22px;width:28px;height:28px}annotations-host .jquery-comments #comment-list li.comment .name{display:inline;font-family:Segoe UI Semibold,wf_segoe-ui_semibold,helvetica,arial,sans-serif;font-size:14px;color:var(--neutral-primary-color, #333333)!important}annotations-host .jquery-comments #comment-list li.comment time{display:block;float:none;font-size:14px;font-family:Segoe UI Semilight,wf_segoe-ui_semilight,helvetica,arial,sans-serif;margin:0;padding-top:8px}annotations-host .jquery-comments #comment-list li.comment .content{padding:12px 0 0;text-align:left;font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif;color:var(--neutral-primary-color, #333333);font-size:14px;line-height:normal}annotations-host .jquery-comments #comment-list li.comment .actions .action{font-weight:400}annotations-host .jquery-comments #comment-list li.comment .toggle-all{padding:8px;border-bottom:1px solid var(--neutral-light-color, #EAEAEA);box-shadow:0 2px 8px rgba(0,0,0,.05);display:block;background-color:var(--neutral-lighter-color, #F4F4F4);font-weight:400;color:var(--default-link-color, #1F3A93)!important}annotations-host .jquery-comments #comment-list li.comment .toggle-all button i{font-size:10px;padding-right:8px;color:var(--neutral-primary-color, #333333)}annotations-host .jquery-comments #comment-list li.comment .toggle-all button span{font-size:12px;color:var(--neutral-primary-color, #333333)}annotations-host .jquery-comments .dropdown.autocomplete .textcomplete-item{color:var(--black-color, #000);background-color:var(--white-color, #FFF);padding:5px 20px}annotations-host .jquery-comments .dropdown.autocomplete .textcomplete-item:nth-child(2n){background:var(--neutral-lighter-color, #F4F4F4)}annotations-host .jquery-comments .dropdown.autocomplete .textcomplete-item.active{background-color:var(--theme-primary-color, #F2C811);color:var(--text-primary-content-color-hc)}annotations-host .jquery-comments .dropdown.autocomplete .textcomplete-item .details .name{font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif;font-weight:400;font-size:14px}annotations-host .jquery-comments .dropdown.autocomplete .textcomplete-no-results-message{color:var(--black-color, #000)}annotations-host .jquery-comments li,annotations-host .jquery-comments ol,annotations-host .jquery-comments ul{font-size:16px}annotations-host .jquery-comments i.glyphicon{padding:0;margin:0}\n",'.jquery-comments *{box-sizing:border-box;text-shadow:none}.jquery-comments a[href]{color:#2793e6;text-decoration:none}.jquery-comments a[href]:hover{text-decoration:underline}.jquery-comments .textarea,.jquery-comments span,.jquery-comments button{-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;vertical-align:top;border-radius:0;margin:0;padding:0;border:0;outline:0;background:rgba(0,0,0,0)}.jquery-comments button{vertical-align:inherit}.jquery-comments .tag{color:inherit;font-size:.9em;background:#ddd;border:1px solid #ccc;padding:.05em .4em;cursor:pointer;font-weight:400;border-radius:1em;transition:all .2s linear}.jquery-comments .tag:hover{text-decoration:none;background-color:#d8edf8;border-color:#2793e6}.jquery-comments [contentEditable=true]:empty:not(:focus):before{content:attr(aria-placeholder);color:#ccc;position:inherit}.jquery-comments i.fa{width:1em;height:1em;background-size:cover}.jquery-comments i.fa.image:before{content:""}.jquery-comments .spinner{font-size:2em;text-align:center;padding:.5em;color:#666}.jquery-comments ul{list-style:none;padding:0;margin:0}.jquery-comments .profile-picture{float:left;width:3.6rem;height:3.6rem;max-width:50px;max-height:50px}.jquery-comments i.profile-picture{font-size:3.4em;text-align:center}.jquery-comments .profile-picture.round{border-radius:50%}.jquery-comments .commenting-field.main{margin-bottom:.75em}.jquery-comments .commenting-field.main .profile-picture{margin-bottom:1rem}.jquery-comments .previousnext-wrapper{height:40px;background-color:#f4f4f4;display:flex;justify-content:flex-end}.jquery-comments .previousnext-wrapper button{margin:0 12px}html[data-focus-source=key] .jquery-comments .previousnext-wrapper button:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color)}.jquery-comments .previousnext-wrapper span{margin-left:6px;font-size:14px;color:#333}.jquery-comments .previousnext-wrapper .glyph-mini{color:#000}.jquery-comments .previousnext-wrapper .previousnext-divider{border-left:1px solid #A6A6A6;height:20px;align-self:center}.jquery-comments .textarea-wrapper{overflow:hidden;position:relative}.jquery-comments .textarea-wrapper:before{content:" ";position:absolute;border:5px solid #D5D5D5;left:5px;top:0;width:10px;height:10px;box-sizing:border-box;border-bottom-color:rgba(0,0,0,0);border-left-color:rgba(0,0,0,0)}.jquery-comments .textarea-wrapper:after{content:" ";position:absolute;border:7px solid #FFF;left:7px;top:1px;width:10px;height:10px;box-sizing:border-box;border-bottom-color:rgba(0,0,0,0);border-left-color:rgba(0,0,0,0)}.jquery-comments .textarea-wrapper .inline-button{cursor:pointer;right:0;z-index:10;position:absolute;border:.5em solid rgba(0,0,0,0);box-sizing:content-box;font-size:inherit;overflow:hidden;opacity:.5;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.jquery-comments .textarea-wrapper .inline-button:hover{opacity:1}.jquery-comments:not(.mobile) .scrollable .textarea-wrapper .inline-button{margin-right:15px}.jquery-comments .textarea-wrapper .upload.inline-button i{font-size:1.3em}.jquery-comments .textarea-wrapper .upload input{cursor:pointer;position:absolute;top:0;right:0;min-width:100%;height:100%;margin:0;padding:0;opacity:0}.jquery-comments .textarea-wrapper .close{width:1em;height:1em}.jquery-comments .textarea-wrapper .close span{background:#999;width:25%;left:37.5%;height:100%;position:absolute;-ms-transform:rotate(45deg);-webkit-transform:rotate(45deg);transform:rotate(45deg)}.jquery-comments .textarea-wrapper .close .right{-ms-transform:rotate(-45deg);-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}.jquery-comments .textarea-wrapper .textarea{margin:0;outline:0;overflow-y:auto;overflow-x:hidden;cursor:text;border:1px solid #CCC;background:#FFF;font-size:1em;padding:.25em 2em .25em .8em}html[data-focus-source=key] .jquery-comments .textarea-wrapper .textarea:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color);outline-offset:-1px}.jquery-comments .textarea-wrapper .control-row>span{float:right;color:#fff;padding:0 1em;font-size:1em;margin-top:.4em;border:1px solid rgba(0,0,0,0);opacity:.5}.jquery-comments .textarea-wrapper .control-row>span:not(:first-child){margin-right:.5em}.jquery-comments .textarea-wrapper .control-row>span.enabled{opacity:1;cursor:pointer}.jquery-comments .textarea-wrapper .control-row>span:not(.enabled){pointer-events:none}.jquery-comments .textarea-wrapper .control-row>span.enabled:hover{opacity:.9}.jquery-comments .textarea-wrapper .control-row>span.upload{position:relative;overflow:hidden;background-color:#999}.jquery-comments ul.navigation{clear:both;color:#ccc;border-bottom:2px solid #CCC;font-size:1em;margin-bottom:.5em}.jquery-comments ul.navigation .navigation-wrapper{position:relative}.jquery-comments ul.navigation li{display:inline-block;position:relative;padding:0 1em;cursor:pointer;font-weight:700;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.jquery-comments ul.navigation li.active,.jquery-comments ul.navigation li:hover{color:#000}.jquery-comments ul.navigation li.active:after{content:" ";display:block;right:0;height:2px;background:#000;position:absolute;bottom:-2px;left:0}.jquery-comments ul.navigation li[data-sort-key=attachments]{float:right}.jquery-comments ul.navigation li[data-sort-key=attachments] i{margin-right:.25em}.jquery-comments ul.navigation .navigation-wrapper.responsive{display:none}@media screen and (max-width: 600px){.jquery-comments ul.navigation .navigation-wrapper{display:none}.jquery-comments ul.navigation .navigation-wrapper.responsive{display:inline}}.jquery-comments.responsive ul.navigation .navigation-wrapper{display:none}.jquery-comments.responsive ul.navigation .navigation-wrapper.responsive{display:inline}.jquery-comments ul.navigation .navigation-wrapper.responsive li.title{padding:0 1.5em}.jquery-comments ul.navigation .navigation-wrapper.responsive li.title header:after{display:inline-block;content:"";border-left:.3em solid rgba(0,0,0,0)!important;border-right:.3em solid rgba(0,0,0,0)!important;border-top:.4em solid #CCC;margin-left:.5em;position:relative;top:-.1em}.jquery-comments ul.navigation .navigation-wrapper.responsive li.title.active header:after,.jquery-comments ul.navigation .navigation-wrapper.responsive li.title:hover header:after{border-top-color:#000}.jquery-comments ul.dropdown{display:none;position:absolute;background:#FFF;z-index:99;border:1px solid #CCC;box-shadow:0 6px 12px rgba(0,0,0,.176);-webkit-box-shadow:0 6px 12px rgba(0,0,0,.175);-moz-box-shadow:0 6px 12px rgba(0,0,0,.175);-ms-box-shadow:0 6px 12px rgba(0,0,0,.175)}.jquery-comments ul.dropdown.autocomplete{margin-top:.25em}.jquery-comments ul.dropdown li{display:block;white-space:nowrap;clear:both;padding:.5em 1em;font-weight:400;cursor:pointer}.jquery-comments ul.dropdown li.active{background:#EEE}.jquery-comments ul.dropdown li a{display:block;text-decoration:none;color:inherit}.jquery-comments ul.dropdown li .profile-picture{float:left;width:2.4em;height:2.4em;margin-right:.5em}.jquery-comments ul.dropdown li .details{display:inline-block}.jquery-comments ul.dropdown li .name{font-weight:700}.jquery-comments ul.dropdown li .email{color:#aaa;font-size:.95em;margin-top:.1em}.jquery-comments ul.navigation .navigation-wrapper.responsive ul.dropdown{left:0;width:100%}.jquery-comments ul.navigation .navigation-wrapper.responsive ul.dropdown li{color:#000}.jquery-comments ul.navigation .navigation-wrapper.responsive ul.dropdown li.active{color:#fff}.jquery-comments ul.navigation .navigation-wrapper.responsive ul.dropdown li:hover:not(.active){background:#F5F5F5}.jquery-comments ul.navigation .navigation-wrapper.responsive ul.dropdown li:after{display:none}.jquery-comments .no-data{display:none;margin:1em;text-align:center;font-size:1.5em;color:#ccc}.jquery-comments ul.main:empty~.no-comments{display:inherit}.jquery-comments ul#attachment-list:empty~.no-attachments{display:inherit}.jquery-comments ul.main li.comment{clear:both}.jquery-comments ul.main li.comment .conversation-wrapper.selected{border:1px solid var(--theme-primary-color)}.jquery-comments ul.main li.comment .comment-wrapper,.jquery-comments ul.main li.toggle-all,.jquery-comments ul.main li.comment .commenting-field{padding:.5em}.jquery-comments ul.main li.comment .comment-wrapper{border-top:1px solid #DDD;overflow:hidden}.jquery-comments ul.main>li.comment:first-child>.comment-wrapper{border-top:none}.jquery-comments ul.main li.comment .comment-wrapper>.profile-picture{margin-right:.5rem}.jquery-comments ul.main li.comment time{float:right;margin-left:.5em;font-size:.8em;color:#666}.jquery-comments ul.main li.comment .name{font-weight:700;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.jquery-comments ul.main li.comment .name a{color:inherit}.jquery-comments ul.main li.comment .name .reply-to{color:#999;font-size:.8em;font-weight:400;vertical-align:top}.jquery-comments ul.main li.comment .name .reply-to i{margin-left:.5em;margin-right:.25em}.jquery-comments ul.main li.comment .name .new{margin-left:.5em;background:#2793e6;font-size:.8em;padding:.2em .6em;color:#fff;font-weight:400;border-radius:1em;vertical-align:bottom}.jquery-comments ul.main li.comment .wrapper{overflow:hidden}.jquery-comments.mobile ul.main li.comment .child-comments li.comment .wrapper{overflow:visible}.jquery-comments ul.main li.comment .wrapper .content{white-space:pre-line;word-break:break-word;word-wrap:break-word}.jquery-comments ul.main li.comment .wrapper .content a.attachment i{margin-right:.5em}.jquery-comments ul.main li.comment .wrapper .content a.attachment>*{max-width:100%;max-height:200px;width:auto;height:auto;margin-top:.25em;margin-bottom:.25em}.jquery-comments ul.main li.comment .wrapper .content time.edited{float:inherit;margin:0;font-size:.9em;font-style:italic;color:#999}.jquery-comments ul.main li.comment .wrapper .content time.edited:before{content:" - "}.jquery-comments.mobile ul.main li.comment .actions{font-size:1em}.jquery-comments ul.main li.comment .actions>*{color:#999;font-weight:700}.jquery-comments ul.main li.comment .actions .action{display:inline-block;cursor:pointer;margin-left:1em;margin-right:1em;font-size:.9em}.jquery-comments ul.main li.comment .actions .action:first-child{margin-left:0}.jquery-comments ul.main li.comment .actions .action.upvote{cursor:inherit}.jquery-comments ul.main li.comment .actions .action.upvote .upvote-count{margin-right:.5em}.jquery-comments ul.main li.comment .actions .action.upvote .upvote-count:empty{display:none}.jquery-comments ul.main li.comment .actions .action.upvote i{cursor:pointer}.jquery-comments ul.main li.comment .actions .action:not(.upvote):hover,.jquery-comments ul.main li.comment .actions .action.upvote:not(.highlight-font) i:hover{color:#666}.jquery-comments ul.main li.comment .actions .action.delete{opacity:.5;pointer-events:none}.jquery-comments ul.main li.comment .actions .action.delete.enabled{opacity:1;pointer-events:auto}.jquery-comments ul#attachment-list li.comment .actions .action:not(.delete){display:none}.jquery-comments ul#attachment-list li.comment .actions .action.delete{margin:0}.jquery-comments ul#attachment-list li.comment .actions .separator{display:none}.jquery-comments ul.main li.comment .child-comments>*:before{content:"";height:1px;float:left;width:4.1em;max-width:50.5px}.jquery-comments ul.main li.comment .child-comments .profile-picture{width:2.4rem;height:2.4rem}.jquery-comments ul.main li.comment .child-comments i.profile-picture{font-size:2.4em}.jquery-comments ul.main li.comment .child-comments li.toggle-all{padding-top:0}.jquery-comments ul.main li.comment .child-comments li.toggle-all span:first-child{vertical-align:middle}.jquery-comments ul.main li.comment .child-comments li.toggle-all span:first-child:hover{cursor:pointer;text-decoration:underline}.jquery-comments ul.main li.comment .child-comments li.toggle-all .caret{display:inline-block;vertical-align:middle;width:0;height:0;margin-left:.5em;border:.3em solid;margin-top:.35em;border-left-color:rgba(0,0,0,0);border-bottom-color:rgba(0,0,0,0);border-right-color:rgba(0,0,0,0)}.jquery-comments ul.main li.comment .child-comments li.toggle-all .caret.up{border-top-color:rgba(0,0,0,0);border-bottom-color:inherit;margin-top:-.2em}.jquery-comments ul.main li.comment .child-comments .hidden-reply{display:none}.jquery-comments ul.main li.comment .child-comments .visible{display:inherit}.jquery-comments ul.main li.comment.edit>.comment-wrapper>*:not(.commenting-field){display:none}.jquery-comments ul.main li.comment.edit>.comment-wrapper .commenting-field{padding:0!important}.jquery-comments.drag-ongoing{overflow-y:hidden!important}.jquery-comments .droppable-overlay{display:table;position:fixed;z-index:99;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.3)}.jquery-comments .droppable-overlay .droppable-container{display:table-cell;vertical-align:middle;text-align:center}.jquery-comments .droppable-overlay .droppable-container .droppable{background:#FFF;color:#ccc;padding:6em}.jquery-comments .droppable-overlay .droppable-container .droppable.drag-over{color:#999}.jquery-comments .droppable-overlay .droppable-container .droppable i{margin-bottom:5px}.jquery-comments.read-only .commenting-field,.jquery-comments.read-only .actions{display:none}\n'],encapsulation:2}),n}(),Yc=["tutorialText"],Zc=["tutorialImage"],Rr=function(){function n(e,t,r){this.localizationService=e,this.tutorialDataStore=t,this.telemetryService=r}return n.prototype.ngOnInit=function(){var e=this;this.gifStage="Stage1";var t=$(this.tutorialImage.nativeElement),r=$(this.tutorialText.nativeElement);t.attr("src","".concat((0,Qt.Xr)(),"/images/annotationsTutorial.gif")).on("load",function(){return e.setRotatingText(r,!0)}).on("error",function(){return e.setRotatingText(r,!0)})},n.prototype.ngOnDestroy=function(){clearTimeout(this.timeoutKey)},n.prototype.dismiss=function(){var e=this.telemetryService.startEvent(xc);this.tutorialDataStore.setKey(Sa,!0,e)},n.prototype.setRotatingText=function(e,t){var r=this;switch(this.tutorialModel=ac[this.gifStage],this.gifStage){case"Stage1":this.gifStage="Stage2";break;case"Stage2":this.gifStage="Stage3";break;case"Stage3":this.gifStage="Stage1";break;default:(0,mt.sr)("unknown gif stage: ".concat(this.gifStage))}e.fadeOut(500,function(){e.text(r.localizationService.get(r.tutorialModel.locKey)).fadeIn(500)}),this.timeoutKey=setTimeout(function(){return requestAnimationFrame(function(){return r.setRotatingText(e)})},t?this.tutorialModel.timeout-500:this.tutorialModel.timeout)},n.\u0275fac=function(t){return new(t||n)(o.\u0275\u0275directiveInject(Jt.o),o.\u0275\u0275directiveInject(ri.R),o.\u0275\u0275directiveInject(ut.y0))},n.\u0275cmp=o.\u0275\u0275defineComponent({type:n,selectors:[["annotations-tutorial"]],viewQuery:function(t,r){if(1&t&&(o.\u0275\u0275viewQuery(Yc,7),o.\u0275\u0275viewQuery(Zc,7)),2&t){var a=void 0;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(r.tutorialText=a.first),o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(r.tutorialImage=a.first)}},decls:5,vars:0,consts:[["tutorialText",""],["role","presentation"],["tutorialImage",""],["localize","TutorialPopup_GotIt",3,"click"]],template:function(t,r){1&t&&(o.\u0275\u0275element(0,"h2",null,0)(2,"img",1,2),o.\u0275\u0275elementStart(4,"button",3),o.\u0275\u0275listener("click",function(){return r.dismiss()}),o.\u0275\u0275elementEnd())},dependencies:[kt.X],styles:['[_nghost-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;flex-grow:1;background-color:var(--neutral-light-color, #EAEAEA);min-height:300px;height:100%}h2[_ngcontent-%COMP%]{font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif;font-size:24px;font-weight:400;margin:0;min-height:24px;z-index:1;text-align:center;width:100%}img[_ngcontent-%COMP%]{border:none;width:285px;height:240px;min-width:200px;min-height:150px}button[_ngcontent-%COMP%]{background-color:var(--button-primary-base-fill-color, #F2C811);border:var(--button-primary-base-fill-color, #F2C811) 2px solid;color:var(--button-primary-content-color, #000);font-size:14px;height:32px;min-height:32px;width:120px;text-align:center;padding:0 10px;margin:0;z-index:1}button[_ngcontent-%COMP%]:hover{background-color:var(--button-primary-hover-fill-color, #CDA521);border:var(--button-primary-hover-fill-color, #CDA521) 2px solid}button[_ngcontent-%COMP%]:focus{outline-color:transparent}html[data-focus-source="key"][_nghost-%COMP%] button:focus, html[data-focus-source="key"]   [_nghost-%COMP%]   button[_ngcontent-%COMP%]:focus{box-shadow:var(--focus-box-shadow-definition, 0 0 0 4px) var(--focus-box-shadow-white-color, #FFFFFF)!important;border:var(--focus-outline-definition, 2.5px solid) var(--focus-box-shadow-color, #000000)!important}']}),n}();function Xc(n,e){1&n&&(o.\u0275\u0275elementStart(0,"section",7),o.\u0275\u0275element(1,"annotations-tutorial"),o.\u0275\u0275elementEnd())}function ed(n,e){if(1&n){var t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"error-banner",14),o.\u0275\u0275listener("onDismiss",function(){o.\u0275\u0275restoreView(t);var s=o.\u0275\u0275nextContext(3);return o.\u0275\u0275resetView(s.dismissError())}),o.\u0275\u0275elementEnd()}if(2&n){var r=o.\u0275\u0275nextContext(3);o.\u0275\u0275property("bannerViewModel",r.bannerViewModel)}}function td(n,e){if(1&n){var t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",17),o.\u0275\u0275listener("click",function(a){o.\u0275\u0275restoreView(t);var s=o.\u0275\u0275nextContext(4);return o.\u0275\u0275resetView(s.allCommentsClick(a))}),o.\u0275\u0275element(1,"i",18)(2,"span",19),o.\u0275\u0275elementEnd()}}function nd(n,e){if(1&n){var t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275template(1,td,3,0,"button",15),o.\u0275\u0275pipe(2,"async"),o.\u0275\u0275elementStart(3,"annotations-host",16),o.\u0275\u0275listener("handleConversationSelect",function(s){o.\u0275\u0275restoreView(t);var d=o.\u0275\u0275nextContext(3);return o.\u0275\u0275resetView(d.handleConversationSelect(s))}),o.\u0275\u0275pipe(4,"async"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerEnd()}if(2&n){var r=o.\u0275\u0275nextContext(3);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",o.\u0275\u0275pipeBind1(2,9,r.areConversationsFiltered$)),o.\u0275\u0275advance(2),o.\u0275\u0275property("comments",r.comments)("artifactContract",r.selectedArtifact)("annotatedArtifactType",r.annotatedArtifactType)("areConversationsFiltered",o.\u0275\u0275pipeBind1(4,11,r.areConversationsFiltered$))("initialSelectionState",r.initialSelectionState)("captureState",r.captureStateCallback)("navigateToPreviousSection",r.navigateToPreviousSectionCallback)("navigateToNextSection",r.navigateToNextSectionCallback)}}function od(n,e){if(1&n&&(o.\u0275\u0275elementStart(0,"div",11),o.\u0275\u0275template(1,ed,1,1,"error-banner",12),o.\u0275\u0275pipe(2,"async"),o.\u0275\u0275template(3,nd,5,13,"ng-container",13),o.\u0275\u0275elementEnd()),2&n){var t=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",o.\u0275\u0275pipeBind1(2,2,t.isError$)),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",!!t.comments)}}function id(n,e){1&n&&(o.\u0275\u0275elementStart(0,"div",20),o.\u0275\u0275element(1,"spinner",21)(2,"span",22),o.\u0275\u0275elementEnd()),2&n&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("delay",0))}function rd(n,e){if(1&n&&(o.\u0275\u0275elementStart(0,"section",8),o.\u0275\u0275pipe(1,"async"),o.\u0275\u0275template(2,od,4,4,"div",9),o.\u0275\u0275template(3,id,3,1,"div",10),o.\u0275\u0275elementEnd()),2&n){var t=o.\u0275\u0275nextContext();o.\u0275\u0275property("ngSwitch",o.\u0275\u0275pipeBind1(1,3,t.isLoaded$)),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngSwitchCase",!0),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngSwitchCase",!1)}}var ad=function(n){function e(t,r,a,s,d){var g=n.call(this,bc,Dt.W$,Oc,t,r,d)||this;return g.captureStateCallback=_.noop,g.navigateToNextSectionCallback=_.noop,g.navigateToPreviousSectionCallback=_.noop,g.annotatedArtifactType=1,g.tileSelection=a,g.tileSpotlight=s,g}return(0,M.ZT)(e,n),e.prototype.resetSelection=function(){n.prototype.resetSelection.call(this),(0,mt.mv)(this.selectedArtifact,"selectedArtifact"),this.store.dispatch(new Pn({id:this.selectedArtifact.id,type:"Dashboard"}))},e.prototype.handleConversationSelect=function(t){var r=this;this.store.select(C).pipe((0,he.q)(1)).subscribe(function(a){var d=a[t.conversationId].annotatedItemKey;"Tile"===d.type?r.setSpotlightOnTile(d.id):r.clearSpotlight()})},e.prototype.setSpotlightOnArtifact=function(){!this.selectedConversationGroupKey||"Tile"!==this.selectedConversationGroupKey.type||this.setSpotlightOnTile(this.selectedConversationGroupKey.id)},e.prototype.clearSpotlight=function(){this.tileSpotlight.clearSpotlights(),this.tileSelection.clearSelected()},e.prototype.setSpotlightOnTile=function(t){var r=this;this.tileSpotlight.isTileSpotlighted(t).then(function(a){a||(r.clearSpotlight(),r.tileSpotlight.setSpotlight(t),r.tileSelection.selectById(t),setTimeout(function(){return r.tileSelection.scrollToSelectedTile()}))})},e.\u0275fac=function(r){return new(r||e)(o.\u0275\u0275directiveInject(J.yh),o.\u0275\u0275directiveInject(ot.u),o.\u0275\u0275directiveInject(Sc),o.\u0275\u0275directiveInject(We),o.\u0275\u0275directiveInject(ri.R))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["annotations-dashboard-pane"]],features:[o.\u0275\u0275InheritDefinitionFeature],decls:10,vars:4,consts:[[1,"glyphicon","pbi-glyph-comment"],["localize","Comments"],[1,"comments-display-name"],[3,"ngSwitch"],["class","tutorialContainer",4,"ngSwitchCase"],["class","commentsContainer","data-testid","comments-container","keyboard-shortcuts","ctrl-F6",3,"ngSwitch",4,"ngSwitchCase"],["localize","Close","data-testid","close-pane-btn",3,"click"],[1,"tutorialContainer"],["data-testid","comments-container","keyboard-shortcuts","ctrl-F6",1,"commentsContainer",3,"ngSwitch"],["pbi-auto-focus","",4,"ngSwitchCase"],["class","loading",4,"ngSwitchCase"],["pbi-auto-focus",""],[3,"bannerViewModel","onDismiss",4,"ngIf"],[4,"ngIf"],[3,"bannerViewModel","onDismiss"],[3,"click",4,"ngIf"],[3,"comments","artifactContract","annotatedArtifactType","areConversationsFiltered","initialSelectionState","captureState","navigateToPreviousSection","navigateToNextSection","handleConversationSelect"],[3,"click"],[1,"caret","glyphicon","pbi-glyph-chevronleftmedium","glyph-mini"],["localize","AllComments"],[1,"loading"],["size","xlarge",3,"delay"],["localize","Comments_Loading"]],template:function(r,a){1&r&&(o.\u0275\u0275elementStart(0,"header"),o.\u0275\u0275element(1,"i",0)(2,"h2",1),o.\u0275\u0275elementStart(3,"p",2),o.\u0275\u0275text(4),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementContainerStart(5,3),o.\u0275\u0275template(6,Xc,2,0,"section",4),o.\u0275\u0275template(7,rd,4,5,"section",5),o.\u0275\u0275elementContainerEnd(),o.\u0275\u0275elementStart(8,"footer")(9,"button",6),o.\u0275\u0275listener("click",function(){return a.closePane()}),o.\u0275\u0275elementEnd()()),2&r&&(o.\u0275\u0275advance(4),o.\u0275\u0275textInterpolate(null==a.selectedArtifact?null:a.selectedArtifact.displayName),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngSwitch",a.shouldShowTutorial()),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngSwitchCase",!0),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngSwitchCase",!1))},dependencies:[Pe.NgIf,Pe.NgSwitch,Pe.NgSwitchCase,kt.X,Ar.O,Er.r,Dr.q,kr,Rr,Ir,Pe.AsyncPipe],styles:['[_nghost-%COMP%]{display:flex;flex-direction:column;min-height:100%;border-left:var(--neutral-tertiary-alt-color, #C8C8C8) 1px solid}header[_ngcontent-%COMP%]{padding:16px 24px;background-color:var(--white-color, #FFF);color:var(--neutral-primary-color, #333333);flex:0 0 auto}header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding-right:12px;font-size:16px}header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:Segoe UI Semilight,wf_segoe-ui_semilight,helvetica,arial,sans-serif;font-weight:400;font-size:22px;margin:0;display:inline-block}header[_ngcontent-%COMP%]   .comments-display-name[_ngcontent-%COMP%]{font-family:wf_standard-font,helvetica,arial,sans-serif;font-weight:400;font-size:14px;margin:0;text-transform:uppercase;padding-top:12px;overflow:hidden;text-overflow:ellipsis}.tutorialContainer[_ngcontent-%COMP%]{background-color:var(--neutral-light-color, #EAEAEA);flex:1;height:100%;overflow-y:auto;padding:10px}.commentsContainer[_ngcontent-%COMP%]{background-color:var(--neutral-light-color, #EAEAEA);flex:1;overflow:hidden}.commentsContainer[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{height:100%}.commentsContainer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;padding:12px;font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif;color:var(--neutral-primary-color, #333333);font-size:14px;background-color:var(--neutral-lighter-color, #F4F4F4);width:100%;text-align:left}.commentsContainer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-left:8px}.commentsContainer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline-color:transparent}html[data-focus-source="key"][_nghost-%COMP%]   .commentsContainer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus, html[data-focus-source="key"]   [_nghost-%COMP%]   .commentsContainer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{box-shadow:var(--focus-box-shadow-definition, 0 0 0 4px) var(--focus-box-shadow-white-color, #FFFFFF)!important;border:var(--focus-outline-definition, 2.5px solid) var(--focus-box-shadow-color, #000000)!important}.commentsContainer[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]{position:absolute;top:50%;text-align:center;width:100%;height:100%}.commentsContainer[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block}footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--neutral-light-color, #EAEAEA);border-color:var(--neutral-light-color, #EAEAEA);color:var(--black-color, #000);font-size:14px;height:32px;width:120px;margin:20px;padding:0 10px}footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--neutral-tertiary-alt-color, #C8C8C8);border-color:var(--neutral-tertiary-alt-color, #C8C8C8)}footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline-color:transparent}html[data-focus-source="key"][_nghost-%COMP%] footer button:focus, html[data-focus-source="key"]   [_nghost-%COMP%]   footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{box-shadow:var(--focus-box-shadow-definition, 0 0 0 4px) var(--focus-box-shadow-white-color, #FFFFFF)!important;border:var(--focus-outline-definition, 2.5px solid) var(--focus-box-shadow-color, #000000)!important}']}),e}(xr),sd=(0,J.P1)(L,function(n){return!1}),ld=(0,J.P1)(Yo,L,function(n,e){if(e){pe.fF.assert(function(){return"RdlReport"===e.type},"getReportDisplayedConversationGroups is intended for use only in paginated reports.\n            ".concat(e.type," AnnotatedItemType is selected"));var t=[],r=n[nn(e)];return r&&t.push(r),t}}),cd=(0,J.P1)(ld,C,function(n,e){return _(n).map(function(t){return t.conversationIds}).flatten().map(function(t){return e[t]}).value()}),dd=(0,J.P1)(cd,function(n){return _(n).map(function(e){return e.commentIds}).flatten().map(function(e){return _.toNumber(e)}).value()}),pd=(0,J.P1)(dd,I,function(n,e){return _.map(n,function(t){return e[t]})});function ud(n,e){1&n&&(o.\u0275\u0275elementStart(0,"section",7),o.\u0275\u0275element(1,"annotations-tutorial"),o.\u0275\u0275elementEnd())}function hd(n,e){if(1&n){var t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"error-banner",14),o.\u0275\u0275listener("onDismiss",function(){o.\u0275\u0275restoreView(t);var s=o.\u0275\u0275nextContext(3);return o.\u0275\u0275resetView(s.dismissError())}),o.\u0275\u0275elementEnd()}if(2&n){var r=o.\u0275\u0275nextContext(3);o.\u0275\u0275property("bannerViewModel",r.bannerViewModel)}}function gd(n,e){if(1&n){var t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",17),o.\u0275\u0275listener("click",function(a){o.\u0275\u0275restoreView(t);var s=o.\u0275\u0275nextContext(4);return o.\u0275\u0275resetView(s.allCommentsClick(a))}),o.\u0275\u0275element(1,"i",18)(2,"span",19),o.\u0275\u0275elementEnd()}}function md(n,e){if(1&n){var t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275template(1,gd,3,0,"button",15),o.\u0275\u0275pipe(2,"async"),o.\u0275\u0275elementStart(3,"annotations-host",16),o.\u0275\u0275listener("handleConversationSelect",function(s){o.\u0275\u0275restoreView(t);var d=o.\u0275\u0275nextContext(3);return o.\u0275\u0275resetView(d.handleConversationSelect(s))}),o.\u0275\u0275pipe(4,"async"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerEnd()}if(2&n){var r=o.\u0275\u0275nextContext(3);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",o.\u0275\u0275pipeBind1(2,9,r.areConversationsFiltered$)),o.\u0275\u0275advance(2),o.\u0275\u0275property("comments",r.comments)("artifactContract",r.selectedArtifact)("annotatedArtifactType",r.annotatedArtifactType)("areConversationsFiltered",o.\u0275\u0275pipeBind1(4,11,r.areConversationsFiltered$))("initialSelectionState",r.initialSelectionState)("captureState",r.captureStateCallback)("navigateToPreviousSection",r.navigateToPreviousSectionCallback)("navigateToNextSection",r.navigateToNextSectionCallback)}}function fd(n,e){if(1&n&&(o.\u0275\u0275elementStart(0,"div",11),o.\u0275\u0275template(1,hd,1,1,"error-banner",12),o.\u0275\u0275pipe(2,"async"),o.\u0275\u0275template(3,md,5,13,"ng-container",13),o.\u0275\u0275elementEnd()),2&n){var t=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",o.\u0275\u0275pipeBind1(2,2,t.isError$)),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",!!t.comments)}}function vd(n,e){1&n&&(o.\u0275\u0275elementStart(0,"div",20),o.\u0275\u0275element(1,"spinner",21)(2,"span",22),o.\u0275\u0275elementEnd()),2&n&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("delay",0))}function Cd(n,e){if(1&n&&(o.\u0275\u0275elementStart(0,"section",8),o.\u0275\u0275pipe(1,"async"),o.\u0275\u0275template(2,fd,4,4,"div",9),o.\u0275\u0275template(3,vd,3,1,"div",10),o.\u0275\u0275elementEnd()),2&n){var t=o.\u0275\u0275nextContext();o.\u0275\u0275property("ngSwitch",o.\u0275\u0275pipeBind1(1,3,t.isLoaded$)),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngSwitchCase",!0),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngSwitchCase",!1)}}var bd=function(n){function e(t,r,a){var s=n.call(this,sd,Pr.OX,pd,t,r,a)||this;return s.annotatedArtifactType=2,s.captureStateCallback=_.noop,s.navigateToNextSectionCallback=_.noop,s.navigateToPreviousSectionCallback=_.noop,s}return(0,M.ZT)(e,n),e.prototype.resetSelection=function(){n.prototype.resetSelection.call(this),(0,mt.mv)(this.selectedArtifact,"selectedArtifact"),this.store.dispatch(new Pn({id:this.selectedArtifact.id,type:"RdlReport"}))},e.\u0275fac=function(r){return new(r||e)(o.\u0275\u0275directiveInject(J.yh),o.\u0275\u0275directiveInject(ot.u),o.\u0275\u0275directiveInject(ri.R))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["annotations-paginated-report-pane"]],features:[o.\u0275\u0275InheritDefinitionFeature],decls:10,vars:4,consts:[[1,"glyphicon","pbi-glyph-comment"],["localize","Comments"],[1,"comments-display-name"],[3,"ngSwitch"],["class","tutorialContainer",4,"ngSwitchCase"],["class","commentsContainer","data-testid","comments-container","keyboard-shortcuts","ctrl-F6",3,"ngSwitch",4,"ngSwitchCase"],["localize","Close","data-testid","close-pane-btn",3,"click"],[1,"tutorialContainer"],["data-testid","comments-container","keyboard-shortcuts","ctrl-F6",1,"commentsContainer",3,"ngSwitch"],["pbi-auto-focus","",4,"ngSwitchCase"],["class","loading",4,"ngSwitchCase"],["pbi-auto-focus",""],[3,"bannerViewModel","onDismiss",4,"ngIf"],[4,"ngIf"],[3,"bannerViewModel","onDismiss"],[3,"click",4,"ngIf"],[3,"comments","artifactContract","annotatedArtifactType","areConversationsFiltered","initialSelectionState","captureState","navigateToPreviousSection","navigateToNextSection","handleConversationSelect"],[3,"click"],[1,"caret","glyphicon","pbi-glyph-chevronleftmedium","glyph-mini"],["localize","AllComments"],[1,"loading"],["size","xlarge",3,"delay"],["localize","Comments_Loading"]],template:function(r,a){1&r&&(o.\u0275\u0275elementStart(0,"header"),o.\u0275\u0275element(1,"i",0)(2,"h2",1),o.\u0275\u0275elementStart(3,"p",2),o.\u0275\u0275text(4),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementContainerStart(5,3),o.\u0275\u0275template(6,ud,2,0,"section",4),o.\u0275\u0275template(7,Cd,4,5,"section",5),o.\u0275\u0275elementContainerEnd(),o.\u0275\u0275elementStart(8,"footer")(9,"button",6),o.\u0275\u0275listener("click",function(){return a.closePane()}),o.\u0275\u0275elementEnd()()),2&r&&(o.\u0275\u0275advance(4),o.\u0275\u0275textInterpolate(null==a.selectedArtifact?null:a.selectedArtifact.displayName),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngSwitch",a.shouldShowTutorial()),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngSwitchCase",!0),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngSwitchCase",!1))},dependencies:[Pe.NgIf,Pe.NgSwitch,Pe.NgSwitchCase,kt.X,Ar.O,Er.r,Dr.q,kr,Rr,Ir,Pe.AsyncPipe],styles:['[_nghost-%COMP%]{display:flex;flex-direction:column;min-height:100%;border-left:var(--neutral-tertiary-alt-color, #C8C8C8) 1px solid}header[_ngcontent-%COMP%]{padding:16px 24px;background-color:var(--white-color, #FFF);color:var(--neutral-primary-color, #333333);flex:0 0 auto}header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding-right:12px;font-size:16px}header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:Segoe UI Semilight,wf_segoe-ui_semilight,helvetica,arial,sans-serif;font-weight:400;font-size:22px;margin:0;display:inline-block}header[_ngcontent-%COMP%]   .comments-display-name[_ngcontent-%COMP%]{font-family:wf_standard-font,helvetica,arial,sans-serif;font-weight:400;font-size:14px;margin:0;text-transform:uppercase;padding-top:12px;overflow:hidden;text-overflow:ellipsis}.tutorialContainer[_ngcontent-%COMP%]{background-color:var(--neutral-light-color, #EAEAEA);flex:1;height:100%;overflow-y:auto;padding:10px}.commentsContainer[_ngcontent-%COMP%]{background-color:var(--neutral-light-color, #EAEAEA);flex:1;overflow:hidden}.commentsContainer[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{height:100%}.commentsContainer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;padding:12px;font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif;color:var(--neutral-primary-color, #333333);font-size:14px;background-color:var(--neutral-lighter-color, #F4F4F4);width:100%;text-align:left}.commentsContainer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-left:8px}.commentsContainer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline-color:transparent}html[data-focus-source="key"][_nghost-%COMP%]   .commentsContainer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus, html[data-focus-source="key"]   [_nghost-%COMP%]   .commentsContainer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{box-shadow:var(--focus-box-shadow-definition, 0 0 0 4px) var(--focus-box-shadow-white-color, #FFFFFF)!important;border:var(--focus-outline-definition, 2.5px solid) var(--focus-box-shadow-color, #000000)!important}.commentsContainer[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]{position:absolute;top:50%;text-align:center;width:100%;height:100%}.commentsContainer[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block}footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--neutral-light-color, #EAEAEA);border-color:var(--neutral-light-color, #EAEAEA);color:var(--black-color, #000);font-size:14px;height:32px;width:120px;margin:20px;padding:0 10px}footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--neutral-tertiary-alt-color, #C8C8C8);border-color:var(--neutral-tertiary-alt-color, #C8C8C8)}footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline-color:transparent}html[data-focus-source="key"][_nghost-%COMP%] footer button:focus, html[data-focus-source="key"]   [_nghost-%COMP%]   footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{box-shadow:var(--focus-box-shadow-definition, 0 0 0 4px) var(--focus-box-shadow-white-color, #FFFFFF)!important;border:var(--focus-outline-definition, 2.5px solid) var(--focus-box-shadow-color, #000000)!important}',"i.glyphicon[_ngcontent-%COMP%]{margin:0}"]}),e}(xr),yd=(0,J.P1)(L,function(n){return n&&"VisualContainer"===n.type}),Od=function(e){return(0,J.P1)(function(e){return(0,J.P1)(function(e){return(0,J.P1)(Yo,L,function(t,r){if(r){pe.fF.assert(function(){return"Section"===r.type||"VisualContainer"===r.type},"getSectionReportDisplayedConversationGroups is intended for use only in reports with sections/visual containers.\n        ".concat(r.type," AnnotatedItemType is selected"));var a=[],s=t[nn(r)];if(s&&a.push(s),"VisualContainer"===r.type)return a;var d=e.getCurrentSection();pe.fF.assertValue(d.id===r.id,"selectedConvoGroupKey.id must refer to an existing section");var g=_.map(d.visualContainers,function(O){return{id:O.id,type:"VisualContainer"}});return a.push.apply(a,function(n,e){for(var t=[],r=0,a=n;r<a.length;r++){var d=e[nn(a[r])];d&&t.push(d)}return t}(g,t)||[]),a}})}(e),C,function(t,r){return _(t).map(function(a){return a.conversationIds}).flatten().map(function(a){return r[a]}).value()})}(e),function(t){return _(t).map(function(r){return r.commentIds}).flatten().map(function(r){return _.toNumber(r)}).value()})},Ba=l(47497),Td=l(26112),Id=l(11494),wd=l(39503),xd=l(15393),Ad=l(49080),Ed=l(28894);function Dd(n,e){1&n&&(o.\u0275\u0275elementStart(0,"section",7),o.\u0275\u0275element(1,"annotations-tutorial"),o.\u0275\u0275elementEnd())}function kd(n,e){if(1&n){var t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"error-banner",14),o.\u0275\u0275listener("onDismiss",function(){o.\u0275\u0275restoreView(t);var s=o.\u0275\u0275nextContext(3);return o.\u0275\u0275resetView(s.dismissError())}),o.\u0275\u0275elementEnd()}if(2&n){var r=o.\u0275\u0275nextContext(3);o.\u0275\u0275property("bannerViewModel",r.bannerViewModel)}}function Rd(n,e){if(1&n){var t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",17),o.\u0275\u0275listener("click",function(a){o.\u0275\u0275restoreView(t);var s=o.\u0275\u0275nextContext(4);return o.\u0275\u0275resetView(s.allCommentsClick(a))}),o.\u0275\u0275element(1,"i",18)(2,"span",19),o.\u0275\u0275elementEnd()}}function Fd(n,e){if(1&n){var t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275template(1,Rd,3,0,"button",15),o.\u0275\u0275pipe(2,"async"),o.\u0275\u0275elementStart(3,"annotations-host",16),o.\u0275\u0275listener("handleConversationSelect",function(s){o.\u0275\u0275restoreView(t);var d=o.\u0275\u0275nextContext(3);return o.\u0275\u0275resetView(d.handleConversationSelect(s))}),o.\u0275\u0275pipe(4,"async"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerEnd()}if(2&n){var r=o.\u0275\u0275nextContext(3);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",o.\u0275\u0275pipeBind1(2,9,r.areConversationsFiltered$)),o.\u0275\u0275advance(2),o.\u0275\u0275property("comments",r.comments)("artifactContract",r.selectedArtifact)("annotatedArtifactType",r.annotatedArtifactType)("areConversationsFiltered",o.\u0275\u0275pipeBind1(4,11,r.areConversationsFiltered$))("initialSelectionState",r.initialSelectionState)("captureState",r.captureStateCallback)("navigateToPreviousSection",r.navigateToPreviousSectionCallback)("navigateToNextSection",r.navigateToNextSectionCallback)}}function Ld(n,e){if(1&n&&(o.\u0275\u0275elementStart(0,"div",11),o.\u0275\u0275template(1,kd,1,1,"error-banner",12),o.\u0275\u0275pipe(2,"async"),o.\u0275\u0275template(3,Fd,5,13,"ng-container",13),o.\u0275\u0275elementEnd()),2&n){var t=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",o.\u0275\u0275pipeBind1(2,2,t.isError$)),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",!!t.comments)}}function Vd(n,e){1&n&&(o.\u0275\u0275elementStart(0,"div",20),o.\u0275\u0275element(1,"spinner",21)(2,"span",22),o.\u0275\u0275elementEnd()),2&n&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("delay",0))}function Bd(n,e){if(1&n&&(o.\u0275\u0275elementStart(0,"section",8),o.\u0275\u0275pipe(1,"async"),o.\u0275\u0275template(2,Ld,4,4,"div",9),o.\u0275\u0275template(3,Vd,3,1,"div",10),o.\u0275\u0275elementEnd()),2&n){var t=o.\u0275\u0275nextContext();o.\u0275\u0275property("ngSwitch",o.\u0275\u0275pipeBind1(1,3,t.isLoaded$)),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngSwitchCase",!0),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngSwitchCase",!1)}}var Ud=function(n){function e(t,r,a,s,d,g,O,w,D,V,j,ne,Z){var W=n.call(this,yd,Pr.OX,function(e){return(0,J.P1)(Od(e),I,function(t,r){return _.map(t,function(a){return r[a]})})}(d),t,r,a)||this;return W.eventBridge=s,W.explorationNavigation=d,W.explorationStateManager=g,W.conceptualSchemaProxy=O,W.dataSourcesService=w,W.featureSwitchService=D,W.scopedLazy=V,W.visibilityService=j,W.viewModeStateService=ne,W.visualPlugins=Z,W.annotatedArtifactType=2,W.captureStateCallback=function(){return W.captureState()},W.navigateToNextSectionCallback=function(){return W.navigateToSection(1,wr.First)},W.navigateToPreviousSectionCallback=function(){return W.navigateToSection(-1,wr.Last)},W.personalBookmarkServicePromise=W.scopedLazy.get("personalBookmarks"),W}return(0,M.ZT)(e,n),e.prototype.resetSelection=function(){n.prototype.resetSelection.call(this);var t=this.explorationNavigation.getCurrentSection();(0,mt.mv)(t,"currentSection"),this.store.dispatch(new Pn({id:t.id,type:"Section"}))},e.prototype.captureState=function(){return(0,M.mG)(this,void 0,void 0,function(){var t,r;return(0,M.Jh)(this,function(a){switch(a.label){case 0:return[4,this.conceptualSchemaProxy.get(this.dataSourcesService.get())];case 1:return t=a.sent(),r=this.explorationStateManager.capture(t,{captureAllSections:!1}),[2,JSON.stringify((0,Ba.qC)(r,this.featureSwitchService))]}})})},e.prototype.handleConversationSelect=function(t){this.applyBookmark(t)},e.prototype.applyBookmark=function(t){return(0,M.mG)(this,void 0,void 0,function(){var r,a,s,d;return(0,M.Jh)(this,function(g){switch(g.label){case 0:return pe.fF.assertValue(t,"comment should not be null"),pe.fF.assertValue(t.bookmark,"no bookmark on comment"),a={clearUnmatchedData:!0,suppressActiveSection:!0},s=(0,Ba.vB)((0,Td.K)((r=t.bookmark).explorationState),this.visualPlugins,this.featureSwitchService),d={objectId:r.objectId,type:r.type,explorationState:s},[4,this.personalBookmarkServicePromise];case 1:return g.sent().applyBookmark(d,a),[2]}})})},e.prototype.setSpotlightOnArtifact=function(){var t=this;if(this.selectedConversationGroupKey&&"VisualContainer"===this.selectedConversationGroupKey.type){var r=this.getSelectedVisualContainer();r&&(this.shouldReSpotlightCheck(r)?this.shouldReSpotlight=!0:(this.visibilityService.set(r,4),this.viewModeStateService.getViewState().preventSelectionClearing=!0),this.visibilityChangedSubscription&&this.visibilityChangedSubscription.unsubscribeAll(),this.visibilityChangedSubscription=this.eventBridge.createChannelSubscriptionManager().subscribe(Nn.y5h,function(a){t.visibilityChangedHandler()}))}},e.prototype.shouldReSpotlightCheck=function(t){if(1===t.visibility||2===t.visibility||8===t.visibility)return!0},e.prototype.getSelectedVisualContainer=function(){var t=this;if(this.selectedConversationGroupKey){var r=this.explorationNavigation.getCurrentSection().visualContainers;if(0!==r.length)return _.find(r,function(a){return a.id===t.selectedConversationGroupKey.id})}},e.prototype.visibilityChangedHandler=function(){var t=this.getSelectedVisualContainer();if(t){if(this.shouldReSpotlightCheck(t))return void(this.shouldReSpotlight=!0);this.shouldReSpotlight&&(this.visibilityService.set(t,4),this.viewModeStateService.getViewState().preventSelectionClearing=!0),0===t.visibility&&!this.shouldReSpotlight&&this.resetSelection(),this.shouldReSpotlight=!1}},e.prototype.unsubscribeAll=function(){n.prototype.unsubscribeAll.call(this),this.visibilityChangedSubscription&&(this.visibilityChangedSubscription.unsubscribeAll(),this.visibilityChangedSubscription=void 0)},e.prototype.clearSpotlight=function(){n.prototype.clearSpotlight.call(this),this.viewModeStateService.getViewState().preventSelectionClearing=!1,this.visibilityChangedSubscription&&(this.visibilityChangedSubscription.unsubscribeAll(),this.visibilityChangedSubscription=void 0);var t=this.getSelectedVisualContainer();t&&4===t.visibility&&this.visibilityService.set(t,0)},e.prototype.navigateToSection=function(t,r){var a=this,s=this.explorationNavigation.getAllSections();if(!(s.length<=1)){var g=this.explorationNavigation.getCurrentSection(),O=_.findIndex(s,function(V){return V.id===g.id});if(-1!==O){var w=(O+t+s.length)%s.length,D=s[w];(0,R.aj)(this.store.select(Un)).pipe((0,he.q)(1)).subscribe(function(V){var j=V[0];if(!_.isEmpty(j))for(;w!==O;){if(_.find(j,function(Z){return"Section"===Z.annotatedItemKey.type&&Z.annotatedItemKey.id===D.id||"VisualContainer"===Z.annotatedItemKey.type&&_.find(D.visualContainers,function(W){return Z.annotatedItemKey.id===W.id})})){a.initialSelectionState=r,a.explorationNavigation.updateActiveSection({targetSectionIndex:w,parentActivity:void 0});break}D=s[w=(w+t+s.length)%s.length]}})}}},e.\u0275fac=function(r){return new(r||e)(o.\u0275\u0275directiveInject(J.yh),o.\u0275\u0275directiveInject(ot.u),o.\u0275\u0275directiveInject(ri.R),o.\u0275\u0275directiveInject(Id.J),o.\u0275\u0275directiveInject(wd.z),o.\u0275\u0275directiveInject(Ad.J),o.\u0275\u0275directiveInject(Pa.i),o.\u0275\u0275directiveInject(ia.D),o.\u0275\u0275directiveInject(qt.vZ),o.\u0275\u0275directiveInject(Ed.H),o.\u0275\u0275directiveInject(xd.w),o.\u0275\u0275directiveInject(ra.kc),o.\u0275\u0275directiveInject(Jn.D))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["annotations-report-pane"]],features:[o.\u0275\u0275InheritDefinitionFeature],decls:10,vars:4,consts:[[1,"glyphicon","pbi-glyph-comment"],["localize","Comments"],[1,"comments-display-name"],[3,"ngSwitch"],["class","tutorialContainer",4,"ngSwitchCase"],["class","commentsContainer","data-testid","comments-container","keyboard-shortcuts","ctrl-F6",3,"ngSwitch",4,"ngSwitchCase"],["localize","Close","data-testid","close-pane-btn",3,"click"],[1,"tutorialContainer"],["data-testid","comments-container","keyboard-shortcuts","ctrl-F6",1,"commentsContainer",3,"ngSwitch"],["pbi-auto-focus","",4,"ngSwitchCase"],["class","loading",4,"ngSwitchCase"],["pbi-auto-focus",""],[3,"bannerViewModel","onDismiss",4,"ngIf"],[4,"ngIf"],[3,"bannerViewModel","onDismiss"],[3,"click",4,"ngIf"],[3,"comments","artifactContract","annotatedArtifactType","areConversationsFiltered","initialSelectionState","captureState","navigateToPreviousSection","navigateToNextSection","handleConversationSelect"],[3,"click"],[1,"caret","glyphicon","pbi-glyph-chevronleftmedium","glyph-mini"],["localize","AllComments"],[1,"loading"],["size","xlarge",3,"delay"],["localize","Comments_Loading"]],template:function(r,a){1&r&&(o.\u0275\u0275elementStart(0,"header"),o.\u0275\u0275element(1,"i",0)(2,"h2",1),o.\u0275\u0275elementStart(3,"p",2),o.\u0275\u0275text(4),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementContainerStart(5,3),o.\u0275\u0275template(6,Dd,2,0,"section",4),o.\u0275\u0275template(7,Bd,4,5,"section",5),o.\u0275\u0275elementContainerEnd(),o.\u0275\u0275elementStart(8,"footer")(9,"button",6),o.\u0275\u0275listener("click",function(){return a.closePane()}),o.\u0275\u0275elementEnd()()),2&r&&(o.\u0275\u0275advance(4),o.\u0275\u0275textInterpolate(null==a.selectedArtifact?null:a.selectedArtifact.displayName),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngSwitch",a.shouldShowTutorial()),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngSwitchCase",!0),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngSwitchCase",!1))},dependencies:[Pe.NgIf,Pe.NgSwitch,Pe.NgSwitchCase,kt.X,Ar.O,Er.r,Dr.q,kr,Rr,Ir,Pe.AsyncPipe],styles:['[_nghost-%COMP%]{display:flex;flex-direction:column;min-height:100%;border-left:var(--neutral-tertiary-alt-color, #C8C8C8) 1px solid}header[_ngcontent-%COMP%]{padding:16px 24px;background-color:var(--white-color, #FFF);color:var(--neutral-primary-color, #333333);flex:0 0 auto}header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding-right:12px;font-size:16px}header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:Segoe UI Semilight,wf_segoe-ui_semilight,helvetica,arial,sans-serif;font-weight:400;font-size:22px;margin:0;display:inline-block}header[_ngcontent-%COMP%]   .comments-display-name[_ngcontent-%COMP%]{font-family:wf_standard-font,helvetica,arial,sans-serif;font-weight:400;font-size:14px;margin:0;text-transform:uppercase;padding-top:12px;overflow:hidden;text-overflow:ellipsis}.tutorialContainer[_ngcontent-%COMP%]{background-color:var(--neutral-light-color, #EAEAEA);flex:1;height:100%;overflow-y:auto;padding:10px}.commentsContainer[_ngcontent-%COMP%]{background-color:var(--neutral-light-color, #EAEAEA);flex:1;overflow:hidden}.commentsContainer[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{height:100%}.commentsContainer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;padding:12px;font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif;color:var(--neutral-primary-color, #333333);font-size:14px;background-color:var(--neutral-lighter-color, #F4F4F4);width:100%;text-align:left}.commentsContainer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-left:8px}.commentsContainer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline-color:transparent}html[data-focus-source="key"][_nghost-%COMP%]   .commentsContainer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus, html[data-focus-source="key"]   [_nghost-%COMP%]   .commentsContainer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{box-shadow:var(--focus-box-shadow-definition, 0 0 0 4px) var(--focus-box-shadow-white-color, #FFFFFF)!important;border:var(--focus-outline-definition, 2.5px solid) var(--focus-box-shadow-color, #000000)!important}.commentsContainer[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]{position:absolute;top:50%;text-align:center;width:100%;height:100%}.commentsContainer[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block}footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--neutral-light-color, #EAEAEA);border-color:var(--neutral-light-color, #EAEAEA);color:var(--black-color, #000);font-size:14px;height:32px;width:120px;margin:20px;padding:0 10px}footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--neutral-tertiary-alt-color, #C8C8C8);border-color:var(--neutral-tertiary-alt-color, #C8C8C8)}footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline-color:transparent}html[data-focus-source="key"][_nghost-%COMP%] footer button:focus, html[data-focus-source="key"]   [_nghost-%COMP%]   footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{box-shadow:var(--focus-box-shadow-definition, 0 0 0 4px) var(--focus-box-shadow-white-color, #FFFFFF)!important;border:var(--focus-outline-definition, 2.5px solid) var(--focus-box-shadow-color, #000000)!important}',"i.glyphicon[_ngcontent-%COMP%]{margin:0}"]}),e}(xr),Fr=l(94853),Ua=l(73875),ai="/metadata/annotations",si=function(){function n(e){this.httpService=e}return n.prototype.getConversationGroups=function(e,t){var r="".concat(ai,"/").concat(e.type,"/").concat(e.id,"/conversationGroups");return null!=t&&(r+="?expandConversationId=".concat(t)),this.httpService.get(r)},n.prototype.getConversation=function(e,t){return this.httpService.get("".concat(ai,"/").concat(e.type,"/").concat(e.id,"/conversations/").concat(t))},n.prototype.postComment=function(e){return this.httpService.post("".concat(ai,"/comments"),e)},n.prototype.deleteComment=function(e,t){return this.httpService.delete("".concat(ai,"/").concat(e.type,"/").concat(e.id,"/comments/").concat(t))},n.\u0275fac=function(t){return new(t||n)(o.\u0275\u0275inject(Ua.O))},n.\u0275prov=o.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n}(),jd=function(){function n(e,t,r,a,s){var d=this;this.action$=e,this.annotationService=t,this.store=r,this.telemetry=a,this.userInfo=s,this.createComment$=(0,wt.GW)(function(){return d.action$.pipe((0,wt.l4)(Vo),(0,ae.U)(function(g){return g.payload}),(0,wt.IC)(function(){return[d.store.select(L),d.store.select(I),d.store.select(Un)]}),(0,An.zg)(function(g){var O=g[0],j=O.comment,ne=j.parent,Z=ne&&g[2][ne],W=Z&&Z.conversationId,De=d.getTargetAnnotatedItemKey(g[1],g[3],W),_e=d.createPostCommentRequest(j,De,W),ft=d.userInfo.uoid,lt=d.userInfo.name,Ft=d.startPostCommentTelemetryEvent(j,ft,_e.mentionedUserObjectIds,De,W);return d.annotationService.postComment(_e).pipe((0,An.zg)(function(vt){Ft.resolve();var It=vt.data,xt=function(n,e,t,r,a,s){return(0,Tt.hu)(function(){return null!=n},"pre-condition: postCommentInfo != null"),(0,Tt.hu)(function(){return null!=e},"pre-condition: conversationId != null"),(0,Tt.hu)(function(){return null!=t},"pre-condition: commentId != null"),(0,Tt.hu)(function(){return null!=r},"pre-condition: creatorOid != null"),(0,Tt.hu)(function(){return null!=s},"pre-condition: annotatedItemKey != null"),io((0,M.pi)({id:"".concat(t),conversationId:e,created:n.created,parent:n.parent,createdByCurrentUser:n.createdByCurrentUser,supportedConversationButtons:zo(s,n.parent),mentionedUsers:n.mentionedUsers,canDelete:!0,fullname:n.fullname,bookmark:n.bookmark},ro(!1,n.content,r,a)))}(j,It.conversationId,It.id,ft,lt,De);return O.successCallback(xt),(0,K.of)(new xi({annotatedItemKey:De,conversationId:It.conversationId,comment:xt}))}),(0,Le.K)(function(vt){var It=d.getErrorDetails(vt);return Ft.reject(It),O.errorCallback(),(0,K.of)(new Ai({errorDetails:It,hasParent:!!ne}))}))}))}),this.deleteComment$=(0,wt.GW)(function(){return d.action$.pipe((0,wt.l4)(Bo),(0,ae.U)(function(g){return g.payload}),(0,wt.IC)(function(){return[d.store.select(L),d.store.select(Un)]}),(0,An.zg)(function(g){var O=g[0],V=O.comment,j=d.getTargetAnnotatedItemKey(g[1],g[2],V&&V.conversationId),Z=d.telemetry.startEvent(Ic,{isRoot:null==V.parent,artifactType:j.type});return d.annotationService.deleteComment(j,V.id).pipe((0,An.zg)(function(){Z.resolve();var W=function(n){(0,Tt.hu)(function(){return null!=n},"pre-condition: comment != null");var e=_.omit(n,Object.keys(ji));delete e.canDelete;var t=ro(!0,n.content,n.creatorOid,n.creatorPrincipalName);return _.assign(e,t)}(V);O.successCallback(W);var De=[new On({annotatedItemKey:j,comment:W})];return De.push(null==V.parent?new ki({conversationId:V.conversationId,commentId:V.id}):new Vi({conversationId:V.conversationId,commentId:V.id})),De}),(0,Le.K)(function(W){O.errorCallback();var De=d.getErrorDetails(W);return Z.reject(De),(0,K.of)(new Di({errorDetails:De}))}))}))})}return n.prototype.getTargetAnnotatedItemKey=function(e,t,r){return(0,Tt.mv)(e,"selectedConvoGroup"),(0,Tt.mv)(t,"conversationGroups"),null==r?e:_(t).filter(function(a){return _.includes(a.conversationIds,r)}).map(function(a){return a.annotatedItemKey}).first()},n.prototype.createPostCommentRequest=function(e,t,r){(0,Tt.mv)(e,"comment"),(0,Tt.mv)(t,"targetAnnotatedItemKey");var a={annotatedItemKey:t,conversationId:r,body:e.content,mentionedUserObjectIds:_.map(e.mentionedUsers,function(s){return s.oid})};return e.bookmark&&(pe.fF.assert(function(){return"Section"===t.type||"VisualContainer"===t.type},"Bookmarks are only supported on Section or VisualContainer comments"),a.bookmark=e.bookmark.explorationState),a},n.prototype.startPostCommentTelemetryEvent=function(e,t,r,a,s){var d=_.size(e.content);return this.telemetry.startEvent(Tc,{commentLength:d,isNewConversation:!s,userOid:t,mentionedUserOids:r,artifactType:a.type})},n.prototype.getErrorDetails=function(e){return(0,Fr.GB)(e&&e.error,e&&e.status)},n.\u0275fac=function(t){return new(t||n)(o.\u0275\u0275inject(wt.eX),o.\u0275\u0275inject(si),o.\u0275\u0275inject(J.yh),o.\u0275\u0275inject(ut.y0),o.\u0275\u0275inject(Cn.a))},n.\u0275prov=o.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n}(),Nd=l(37272),zd=function(){function n(e,t,r,a,s){var d=this;this.action$=e,this.annotationService=t,this.userInfo=r,this.store=a,this.telemetry=s,this.loadConversation$=(0,wt.GW)(function(){return d.action$.pipe((0,wt.l4)(oo),(0,ae.U)(function(g){return g.payload}),(0,wt.IC)(function(){return d.store.select(C)}),(0,An.zg)(function(g){var O=g[0],D=O.conversationId,V=g[1][D];if(null==V)return(0,mt.sr)("Unexpected case: trying to get all comments of a conversation that no longer exists in the ngrx store"),(0,Nd.c)();var j=V.annotatedItemKey;return d.annotationService.getConversation(j,D).pipe((0,ae.U)(function(ne){var Z=ne.data;return d.logLoadConvoTelemetry(Z),new Fi({annotatedItemKey:j,conversation:Z,currentUserObjectId:d.userInfo.uoid,successCallback:O.successCallback})}),(0,Le.K)(function(ne){return(0,K.of)(new Li({errorDetails:d.getErrorDetails(ne),errorCallback:O.errorCallback}))}))}))})}return n.prototype.logLoadConvoTelemetry=function(e){var t=_.size(e.comments);this.telemetry.logEvent(wc,{numComments:t})},n.prototype.getErrorDetails=function(e){return(0,Fr.GB)(e&&e.error,e&&e.status)},n.\u0275fac=function(t){return new(t||n)(o.\u0275\u0275inject(wt.eX),o.\u0275\u0275inject(si),o.\u0275\u0275inject(Cn.a),o.\u0275\u0275inject(J.yh),o.\u0275\u0275inject(ut.y0))},n.\u0275prov=o.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n}(),$d=l(55433),ja=l(81905),Wd=function(){function n(e,t,r,a){var s=this;this.action$=e,this.annotationHttp=t,this.telemetry=r,this.userInfo=a,this.loadConversationGroups$=(0,wt.GW)(function(){return s.action$.pipe((0,wt.l4)("[ConversationGroup] Load Dashboard",Zn,"[ConversationGroup] Load RDL Report")).pipe((0,ja.w)(function(d){var g,j,O=d.payload.rootArtifactObjectId,w=(g=d.payload).key,D=g.deepLinkCommentKey,V=g.parentActivity;return j=V?s.telemetry.startChildEvent(V.event,Aa,{numGroups:0,convoMap:"",artifactType:w.type}):s.telemetry.startEvent(Aa,{numGroups:0,convoMap:"",artifactType:w.type}),(0,$d.z)((0,K.of)(new Ii),s.annotationHttp.getConversationGroups(w,D&&D.conversationId).pipe((0,An.zg)(function(ne){var Z=ne.data;s.updateLoadConvoGroupTelemetryEventWithResults(j,Z),j.resolve();var W=s.getSelectAction(d,Z);return[new _i({rootArtifactObjectId:O,conversationGroups:ne.data,key:w,currentUserObjectId:s.userInfo.uoid,deepLinkCommentKey:D}),W]}),(0,Le.K)(function(ne){var Z=s.getErrorDetails(ne);return j.reject(Z),(0,K.of)(new Si({rootArtifactObjectId:O,id:w.id,errorDetails:Z,deepLinkCommentKey:D}))})))}))})}return n.prototype.getSelectAction=function(e,t){var r,d,a=(r=e.payload).deepLinkCommentKey;return d=e.type===Zn?{id:e.payload.sectionId,type:"Section"}:r.key,e.payload.deepLinkCommentKey?new Ti({key:d,deepLinkCommentKey:a,conversationGroups:t}):new Pn(d)},n.prototype.updateLoadConvoGroupTelemetryEventWithResults=function(e,t){for(var r=_.size(t),a={},s=0,d=0,g=t;d<g.length;d++){var O=g[d],w=_.size(O.conversations);s+=w,a[O.annotatedItemKey.type]=(a[O.annotatedItemKey.type]||0)+w}e.event.info.numGroups=r,e.event.info.convoMap=s>0&&JSON.stringify(a)},n.prototype.getErrorDetails=function(e){return(0,Fr.GB)(e&&e.error,e&&e.status)},n.\u0275fac=function(t){return new(t||n)(o.\u0275\u0275inject(wt.eX),o.\u0275\u0275inject(si),o.\u0275\u0275inject(ut.y0),o.\u0275\u0275inject(Cn.a))},n.\u0275prov=o.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n}(),Hd=l(98632);function Gd(n){return function(e,t){switch(t.type){case Do.XD:if(e.conversationGroups.rootArtifactObjectId!==t.payload)return n(so,t);break;case Hd.XD:var r=t.payload;if(!r||e.conversationGroups.rootArtifactObjectId!==r.reportInfo.guid)return n(so,t);break;case Lo:return n(so,t)}return n(e,t)}}var Kd=l(52910),Na=l(32288),Qd=l(76521),za=l(77906),Lr=l(95859),$a=l(52950),Wa=l(47231),qd=(l(25335),l(9567),l(58392),[{type:ad,componentId:"DashboardPaneComponentId"},{type:bd,componentId:"PaginatedReportPaneComponentId"},{type:Ud,componentId:"ReportPaneComponentId"}]),Jd=function(){function n(){}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=o.\u0275\u0275defineInjector({providers:[si],imports:[Pe.CommonModule,Kd.O,za.N.withManifests(qd),Na.J,Qd.A3,Lr.v,En.Is,$a.g,J.Aw.forFeature("annotation",nr,{metaReducers:[Gd]}),wt.sQ.forFeature([jd,Wd,zd]),Wa.c,_a._]}),n}(),Yd=l(31),Zd=l(63868),Xd=l(69977),ep=l(27946),tp=l(23569),np=l(31109),op=l(46055),ip=l(80093),Ha=l(35497),rp=/^[\w-.]{79,82}$/;function Vr(n){return{applicationId:n.applicationId,title:n.applicationName,shortDescription:n.description,smallIconUri:n.iconUrl,largeIconUri:n.iconUrl,publisher:n.publishedBy,publishTime:n.publishTime,type:"Org App",stage:n.stage}}function Ga(n,e){if(0===n.length)return e;if(0===e.length)return n;for(var t=0,r=0,a=[];t<n.length&&r<e.length;)a.push(n[t]),t+1<n.length&&a.push(n[t+1]),a.push(e[r]),r++,t+=2;for(;r<e.length;)a.push(e[r]),r++;for(;t<n.length;)a.push(n[t]),t++;return a}var sp=["Service App","Visual"];function Ka(n,e){return null!=e||_.includes(sp,n)}var Qa=function(){function n(e){this.parsedUrl=ze.s.parseUrl(e.handOffUrl)}return Object.defineProperty(n.prototype,"appId",{get:function(){return this.parsedUrl.appId},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"buildVersion",{get:function(){return this.parsedUrl.buildVersion},enumerable:!1,configurable:!0}),n.fromApp=function(e){return new n(e)},n}(),li=(0,Sn.H)({selectId:function(e){return e.applicationId},sortComparer:!1});li.getInitialState({isOrgAppsLoaded:!1,isOrgContentPacksLoaded:!1});var gp=(0,J.ZF)("marketplaceOrgApps"),Br=(0,J.P1)(gp,function(n){return n.apps}),Ur=li.getSelectors(Br).selectAll,mp=(0,J.P1)(Ur,function(n){return _(n).filter(function(e){return 5===e.PBIContentProviderCategory}).sortBy("ranking").value()}),fp=(0,J.P1)(Ur,function(n){return _(n).filter(function(e){return 5===e.PBIContentProviderCategory||7===e.PBIContentProviderCategory}).sortBy("ranking").value()}),vp=(0,J.P1)(Ur,function(n){return _.filter(n,function(e){return 2===e.PBIContentProviderCategory||4===e.PBIContentProviderCategory})}),Cp=(0,J.P1)(Br,function(n){return n.isOrgAppsLoaded}),bp=(0,J.P1)(Br,function(n){return n.isOrgContentPacksLoaded}),Op=function(){return function(){this.type="[MarketplaceProducts] Ensure MarketplaceVisuals Loaded"}}(),Hn=(0,Sn.H)({selectId:function(e){return e.applicationId},sortComparer:!1});Hn.getInitialState({ids:[],isLoaded:!1}),Hn.getInitialState({ids:[],isLoaded:!1});var mn,tt,nt,yo,Kn,Qn,ui,Za=(0,J.ZF)("marketplaceProducts"),Xa=(0,J.P1)(Za,function(n){return n.apps}),es=(0,J.P1)(Za,function(n){return n.visuals}),bo=Hn.getSelectors(Xa).selectAll,ts=(0,J.P1)(Xa,function(n){return n.isLoaded}),Ip=(Hn.getSelectors(es),(0,J.P1)(es,function(n){return n.isLoaded}),(0,J.P1)(fp,bo,vo.V7,Ce.it,function(n,e,t,r){var a=_.map(n,function(O){return Vr(O)}),s=e,d=_.keyBy(t,function(O){return O.providerKey}),g=_.filter(a,function(O){return!d[O.applicationId]});return os(s,g,r)})),wp=((0,J.P1)(mp,bo,vo.V7,Ce.it,function(n,e,t,r){var a=_.slice(e,0,9),s=_.keyBy(t,function(g){return g.providerKey}),d=_(n).filter(function(g){return!s[g.applicationId]}).slice(0,9).map(function(g){return Vr(g)}).value();return os(a,d,r)}),(0,J.P1)(vp,bo,function(n,e){return Ga(_.map(n,function(a){return Vr(a)}),e)})),os=function(e,t,r){var a=_.filter(e,function(d){return!xp(d,r)}),s=_.difference(e,a);return Ga(t,_.concat(a,s))},xp=function(e,t){var r=Qa.fromApp(e).appId,a=_.filter(t,function(s){return s.serviceAppObjectId===r&&(0,$n.yE)(s.permissions,2)});return!_.isEmpty(a)},is="PBI.MarketplaceApps.Opened",Ap=q.cx[is]=(0,q.b1)(is),rs="PBI.MarketplaceApps.OpenedWithContentPack",Ep=q.cx[rs]=(0,q.b1)(rs),as="PBI.MarketplaceApps.ClosedWithoutAppAcquired",Dp=q.cx[as]=(0,q.b1)(as),ss="PBI.MarketplaceApps.OrgAppAcquired",kp=q.cx[ss]=(0,q.b1)(ss,{logExpAssignment:!0}),ls="PBI.MarketplaceApps.TemplateAppAcquired",Rp=q.cx[ls]=(0,q.b1)(ls),jr="PBI.MarketplaceVisuals.ClosedWithoutVisualAcquired",Fp=q.cx[jr]=(0,q.b1)(jr),Nr="PBI.MarketplaceVisuals.VisualAcquired",Lp=q.cx[Nr]=(0,q.b1)(Nr),zr="PBI.Marketplace.LeadsSentSuccessfully",Vp=q.cx[zr]=(0,q.b1)(zr),$r="PBI.Marketplace.LeadsSentFailed",Bp=q.cx[$r]=(0,q.b1)($r),Up=l(57672),jp=l(57603),Rt=function(n){return n[n.Popularity=0]="Popularity",n[n.Rating=1]="Rating",n[n.Name=2]="Name",n[n.Certified=3]="Certified",n[n.Recommended=4]="Recommended",n[n.Update=5]="Update",n}({}),Gn=function(n){return n[n.ServiceAppsAllTabs=0]="ServiceAppsAllTabs",n[n.VisualsAllTabs=1]="VisualsAllTabs",n[n.VisualsWithoutOrg=2]="VisualsWithoutOrg",n}({}),zt=function(n){return n[n.None=0]="None",n[n.AirGappedEnvironment=1]="AirGappedEnvironment",n[n.AllAppSourceVisualsAreOffByAdmin=2]="AllAppSourceVisualsAreOffByAdmin",n[n.CertifiedVisualsOnlyByAdmin=3]="CertifiedVisualsOnlyByAdmin",n}({}),cs=function(){function n(){}return n.MarketplaceProductsDialogComponent="MarketplaceProductsDialog",n.DefaultDialogContentHeight=750,n.DialogHeaderHeight=80,n.MarketplaceProductDialogComponent="MarketplaceProductDialog",n.TermsOfUseHeight=58,n.FilterWidthFactor=9,n.FilterWidth=241,n.SortWidthFactor=8,n.MarketplaceCategoryDescriptionAnchorElement=".marketplace-dropdown-item",n}(),ds=function(n){return n[n.InstallApp=0]="InstallApp",n[n.SelectApp=1]="SelectApp",n[n.GoBack=2]="GoBack",n}({}),Qp={imageUrl:"".concat((0,Qt.Xr)(),"/images/noOrgAppsExistLogo.png"),messageToLocalize:"ContentList_NoOrgAppsExist",switchToLink:{tabIndex:2,tabToSwitchLocalize:"ContentList_ViewTemplateApps"}},ps={tabIndex:1,tabToSwitchLocalize:"ContentList_ViewOrgApps"},qp={imageUrl:"".concat((0,Qt.Xr)(),"/images/noOrgAppsExistLogo.png"),messageToLocalize:"ContentList_NoTemplateAppsExist",switchToLink:ps},Jp={imageUrl:"".concat((0,Qt.Xr)(),"/images/noResultsLogo.png"),messageToLocalize:"ContentList_EmptySearchResults"},Po={title:"",subTitle:"",imageUrl:""},Yp={title:"AppsMarketplaceDialog_TemplateApps_title",subTitle:"AppsMarketplaceDialog_TemplateApps_subtitle",imageUrl:"".concat((0,Qt.Xr)(),"/images/templateAppsMarketplace.png")},iu=((mn={})[Rt.Popularity]={property:"popularity",displayString:"CustomVisuals_Sorting_Properties_Popularity"},mn[Rt.Rating]={property:"averageRating",displayString:"CustomVisuals_Sorting_Properties_Rating"},mn[Rt.Recommended]={property:"pbiRecommended",displayString:"CustomVisuals_Sorting_Properties_PBIRecommended"},mn[Rt.Name]={property:"title",displayString:"Name"},mn[Rt.Certified]={property:"pbiCertified",displayString:"Power_BI_Certified"},mn[Rt.Update]={property:"publishTime",displayString:"Updated"},{name:"AppsMarketplaceDialog_AllApps",type:0,banner:Po,filterProducts:function(e,t){return _.filter(e,function(r){return!t||"Org App"===r.type&&!!r.stage})},noMarketplaceProducts:Jp,showEndorsementFilterCheckbox:!0,showFilterByCategory:!1,showSortByKey:!1,endorsementFilterCheckboxText:"AppsMarketplaceDialog_ShowEndorsedApps"}),ru={name:"AppsMarketplaceDialog_OrgApps",type:1,banner:Po,filterProducts:function(e,t){return _.filter(e,function(r){return t?"Org App"===r.type&&!!r.stage:"Org App"===r.type})},noMarketplaceProducts:Qp,showEndorsementFilterCheckbox:!0,showFilterByCategory:!1,showSortByKey:!1,endorsementFilterCheckboxText:"AppsMarketplaceDialog_ShowEndorsedApps",learnHow:{imageUrl:"https://go.microsoft.com/fwlink/?linkid=2132820",textToLocalize:"ContentList_NoOrgAppsExist_LearnHowMessage"}},au={name:"TemplateApps",type:2,banner:Yp,filterProducts:function(e){return _.filter(e,function(t){return"Service App"===t.type})},noMarketplaceProducts:qp,showEndorsementFilterCheckbox:!1,showFilterByCategory:!0,showSortByKey:!0,endorsementFilterCheckboxText:""},Ru=((tt={})[0]={searchString:"",displayString:"All",displayDescription:"AppsMarketplaceDialog_Categories_All_Description"},tt[1]={searchString:"AppsMarketplaceDialog_Categories_AdvancedAnalytics",displayString:"AppsMarketplaceDialog_Categories_AdvancedAnalytics",displayDescription:"AppsMarketplaceDialog_Categories_AdvancedAnalytics_Description"},tt[2]={searchString:"VisualizationPane_Section_Analytics",displayString:"VisualizationPane_Section_Analytics",displayDescription:"AppsMarketplaceDialog_Categories_Analytics_Description"},tt[3]={searchString:"AppsMarketplaceDialog_Categories_AI_Search",displayString:"AppsMarketplaceDialog_Categories_AI_Display"},tt[4]={searchString:"AppsMarketplaceDialog_Categories_Change_Over_Time",displayString:"AppsMarketplaceDialog_Categories_Change_Over_Time",displayDescription:"AppsMarketplaceDialog_Categories_Change_Over_Time_Description"},tt[5]={searchString:"AppsMarketplaceDialog_Categories_Collaboration",displayString:"AppsMarketplaceDialog_Categories_Collaboration"},tt[6]={searchString:"AppsMarketplaceDialog_Categories_Comparison",displayString:"AppsMarketplaceDialog_Categories_Comparison",displayDescription:"AppsMarketplaceDialog_Categories_Comparison_Description"},tt[7]={searchString:"Insights_CorrelationGroup",displayString:"Insights_CorrelationGroup",displayDescription:"AppsMarketplaceDialog_Categories_Correlation_Description"},tt[8]={searchString:"AppsMarketplaceDialog_Categories_CustomerService",displayString:"AppsMarketplaceDialog_Categories_CustomerService"},tt[9]={searchString:"AppsMarketplaceDialog_Categories_Distribution",displayString:"AppsMarketplaceDialog_Categories_Distribution",displayDescription:"AppsMarketplaceDialog_Categories_Distribution_Description"},tt[10]={searchString:"Filters",displayString:"Filters",displayDescription:"AppsMarketplaceDialog_Categories_Filters_Description"},tt[11]={searchString:"AppsMarketplaceDialog_Categories_Finance",displayString:"AppsMarketplaceDialog_Categories_Finance"},tt[12]={searchString:"MobileFooter_Flow",displayString:"MobileFooter_Flow",displayDescription:"AppsMarketplaceDialog_Categories_Flow_Description"},tt[13]={searchString:"AppsMarketplaceDialog_Categories_Gauges",displayString:"AppsMarketplaceDialog_Categories_Gauges",displayDescription:"AppsMarketplaceDialog_Categories_Gauges_Description"},tt[14]={searchString:"AppsMarketplaceDialog_Categories_HumanResources",displayString:"AppsMarketplaceDialog_Categories_HumanResources"},tt[15]={searchString:"AppsMarketplaceDialog_Categories_Infographics",displayString:"AppsMarketplaceDialog_Categories_Infographics",displayDescription:"AppsMarketplaceDialog_Categories_Infographics_Description"},tt[16]={searchString:"AppsMarketplaceDialog_Categories_ITAdministration_Search",displayString:"AppsMarketplaceDialog_Categories_ITAdministration_Display"},tt[17]={searchString:"kpi_Tooltip",displayString:"kpi_Tooltip",displayDescription:"AppsMarketplaceDialog_Categories_KPI_Description"},tt[18]={searchString:"AppsMarketplaceDialog_Categories_Maps",displayString:"AppsMarketplaceDialog_Categories_Maps",displayDescription:"AppsMarketplaceDialog_Categories_Maps_Description"},tt[19]={searchString:"AppsMarketplaceDialog_Categories_Marketing",displayString:"AppsMarketplaceDialog_Categories_Marketing"},tt[20]={searchString:"AppsMarketplaceDialog_Categories_Narratives",displayString:"AppsMarketplaceDialog_Categories_Narratives",displayDescription:"AppsMarketplaceDialog_Categories_Narratives_Description"},tt[21]={searchString:"AppsMarketplaceDialog_Categories_OperationsSupplyChain_Search",displayString:"AppsMarketplaceDialog_Categories_OperationsSupplyChain_Display"},tt[22]={searchString:"GroupingDefinition_OtherGroupName",displayString:"GroupingDefinition_OtherGroupName",displayDescription:"AppsMarketplaceDialog_Categories_Other_Description"},tt[23]={searchString:"AppsMarketplaceDialog_Categories_Part_to_Whole",displayString:"AppsMarketplaceDialog_Categories_Part_to_Whole",displayDescription:"AppsMarketplaceDialog_Categories_Part_to_Whole_Description"},tt[24]={searchString:"AppsMarketplaceDialog_Categories_Productivity",displayString:"AppsMarketplaceDialog_Categories_Productivity"},tt[25]={searchString:"AppsMarketplaceDialog_Categories_R_Visuals",displayString:"AppsMarketplaceDialog_Categories_R_Visuals",displayDescription:"AppsMarketplaceDialog_Categories_R_Visuals_Description"},tt[26]={searchString:"AppsMarketplaceDialog_Categories_Sales",displayString:"AppsMarketplaceDialog_Categories_Sales"},{imageUrl:"".concat((0,Qt.Xr)(),"/images/noOrgAppsExistLogo.png"),messageToLocalize:"Marketplace_NoOrgVisuals"}),us={imageUrl:"".concat((0,Qt.Xr)(),"/images/noOrgAppsExistLogo.png"),messageToLocalize:"Marketplace_NoVisuals"},Bu=((nt={})[0]="All",nt[1]="Advanced Analytics",nt[2]="Analytics",nt[3]="AI",nt[4]="Change Over Time",nt[5]="Collaboration",nt[6]="Comparison",nt[7]="Correlation",nt[8]="Customer Service",nt[9]="Distribution",nt[10]="Filters",nt[11]="Finance",nt[12]="Flow",nt[13]="Gauges",nt[14]="Human Resources",nt[15]="Infographics",nt[16]="IT",nt[17]="KPI",nt[18]="Maps",nt[19]="Marketing",nt[20]="Narratives",nt[21]="Operations",nt[22]="Other",nt[23]="Part-to-Whole",nt[24]="Productivity",nt[25]="R Visuals",nt[26]="Sales",{name:"AllVisuals",type:3,banner:Po,filterProducts:function(e){var t=_.filter(e,function(a){return"Org Visual"===a.type&&!!a.orgManagedPublicId});return _.filter(e,function(a){return"Org Visual"===a.type||!_.find(t,function(s){return s.orgManagedPublicId===a.applicationId})})},noMarketplaceProducts:us,showEndorsementFilterCheckbox:!1,showFilterByCategory:!0,showSortByKey:!0,endorsementFilterCheckboxText:"",subTitle:{name:"Marketplace_All_Visuals_SubTitle",link:"https://go.microsoft.com/fwlink/?linkid=2100000"}}),hs={name:"AppsMarketplaceDialog_Visuals",type:5,banner:Po,filterProducts:function(e){return _.filter(e,function(t){return"Visual"===t.type})},noMarketplaceProducts:us,showEndorsementFilterCheckbox:!1,showFilterByCategory:!0,showSortByKey:!0,endorsementFilterCheckboxText:"",subTitle:{name:"Marketplace_Visuals_SubTitle",link:"https://go.microsoft.com/fwlink/?linkid=2100000"}},Uu={name:"OrganizationVisuals",type:4,banner:Po,filterProducts:function(e){return _.filter(e,function(t){return"Org Visual"===t.type})},noMarketplaceProducts:Ru,showEndorsementFilterCheckbox:!1,showFilterByCategory:!1,showSortByKey:!1,endorsementFilterCheckboxText:"",subTitle:{name:"Marketplace_Org_Visuals_SubTitle",link:"https://go.microsoft.com/fwlink/?linkid=2164962"},dataTestId:"organizational-visuals-tab"},ju=[0,2,3,5,8,11,14,16,19,21,24,26],Nu=[Rt.Popularity,Rt.Rating,Rt.Name,Rt.Recommended],$u=[0,4,6,7,9,10,12,15,17,18,20,22,23,25],Wu=[Rt.Popularity,Rt.Rating,Rt.Name,Rt.Recommended,Rt.Update,Rt.Certified],gs=[Bu,Uu,hs],Hu=[hs],Qu=((yo={})[Gn.ServiceAppsAllTabs]=[iu,ru,au],yo[Gn.VisualsAllTabs]=gs,yo[Gn.VisualsWithoutOrg]=Hu,{text:"CustomVisualMarketPlace_TermsOfUse",privacyLink:"https://privacy.microsoft.com/en-us/PrivacyStatement",privacyLabel:"PrivacyStatement",termsLink:"https://azure.microsoft.com/en-us/support/legal/marketplace-terms/",termsLabel:"CustomVisualMarketPlace_TermsOfUse_Terms"});_.map(gs,function(n){return n.type});var gi,n,t,ms={text:"Marketplace_AppSource_Dot_Com",url:"https://aka.ms/AppSourcePowerBiVisuals",openInNewTab:!0},hi={filterOutRestricted:function(e){return e},tabApplicability:[]},Yu=((Kn={})[zt.None]=hi,Kn[zt.AirGappedEnvironment]={filterOutRestricted:function(e){return _.filter(e,function(t){return!Ka(t.type,t.orgManagedPublicId)})},tabApplicability:[3,5,4],midPageMessage:{imageUrl:"".concat((0,Qt.Xr)(),"/images/noOrgAppsExistLogo.png"),messageToLocalize:"Marketplace_AppSource_Visuals_Not_Available_In_Cloud"}},Kn[zt.AllAppSourceVisualsAreOffByAdmin]={filterOutRestricted:function(e){return _.filter(e,function(t){return"Org Visual"===t.type})},tabApplicability:[3,5],midPageMessage:{imageUrl:"".concat((0,Qt.Xr)(),"/images/noOrgAppsExistLogo.png"),messageToLocalize:"Marketplace_All_AppSource_Visuals_Are_Off"},footer:{message:"Marketplace_All_AppSource_Visuals_Are_Off_Footer",navigateToLink:ms}},Kn[zt.CertifiedVisualsOnlyByAdmin]={filterOutRestricted:function(e){return _.filter(e,function(t){return"Org Visual"===t.type||t.pbiCertified})},tabApplicability:[3,5],midPageMessage:{imageUrl:"".concat((0,Qt.Xr)(),"/images/noOrgAppsExistLogo.png"),messageToLocalize:"Marketplace_All_AppSource_Visuals_Are_Off"},footer:{message:"Marketplace_Certified_Visuals_Only_Footer",navigateToLink:ms}},Kn),Zu=((Qn={})[zt.None]=hi,Qn[zt.AirGappedEnvironment]={filterOutRestricted:function(e){return _.filter(e,function(t){return!Ka(t.type,t.orgManagedPublicId)})},tabApplicability:[0,2],midPageMessage:{imageUrl:"".concat((0,Qt.Xr)(),"/images/noOrgAppsExistLogo.png"),messageToLocalize:"ContentList_NoTemplateAppsExist",switchToLink:ps}},Qn[zt.AllAppSourceVisualsAreOffByAdmin]=hi,Qn[zt.CertifiedVisualsOnlyByAdmin]=hi,Qn);(ui={})[0]=Zu,ui[1]=Yu,(n=gi||(gi={})).acquireAppEventName="acquireSaasMarketplaceApp",n.initSaasMarketplaceEventName="initSaasMarketplace",n.updateHostUrl="updateUrlForSaasMarketplaceApp",n.updateUrlAndAcquireApp="updateUrlAndAcquireApp",n.saasMarketplaceUrlOrigin="https://appsource.microsoft.com",n.updateUrlAndAcquireAppEvent={type:4,name:n.updateUrlAndAcquireApp},n.updateHostUrlEvent={type:4,name:n.updateHostUrl},(t=n.actionTypes||(n.actionTypes={})).acquireApp="acquireApp",t.externalRedirect="externalRedirect",t.updateUrl="updateUrl",t.closeSaasMarketplace="closeSaasMarketplace",t.finishedLoadingContentProviderList="contentProvidersLoaded";var Wr=l(41198),fs=l(67839),nh=window,oh=function(){function n(e,t,r,a,s,d,g,O,w){this.store=e,this.dialogService=t,this.navigationService=r,this.globalEventBridge=a,this.localizationService=s,this.telemetryService=d,this.certifiedEventsService=g,this.windowOpenerService=O,this.customVisualSettingService=w}return n.prototype.loadMarketplace=function(e,t,r,a,s){if(!this.marketplaceShowing)if(this.marketplaceShowing=!0,this.shouldLoadOrgApps=e,this.productId=r,this.shouldLoadOrgApps){var d=function(n,e){switch(n){case"apps":if("home"===e)return e;break;case"services":if("desktop"===e)return e;break;case"myorg":case"contentpacks":break;default:return""}return n}(a,s);this.telemetryService.logEvent(Ap,{referrer:d}),this.loadMarketplaceWithOrgApps(t)}else this.telemetryService.logEvent(Ep),this.loadMarketplaceWithOrgContentPacks(t)},n.prototype.loadVisualsMarketplace=function(e,t){return(0,M.mG)(this,void 0,void 0,function(){var a,s,d;return(0,M.Jh)(this,function(g){switch(g.label){case 0:return this.marketplaceShowing?[2,null]:(this.store.dispatch(new Op),this.marketplaceShowing=!0,[4,this.customVisualSettingService.shouldShowOrgGallery()]);case 1:return a=g.sent(),this.openMarketplaceEventStart=(new Date).toISOString(),[4,this.customVisualSettingService.shouldNotShowAnyCustomVisuals()];case 2:return s=g.sent(),[4,this.customVisualSettingService.shouldOnlyShowCertifiedVisuals()];case 3:return d=g.sent(),[4,this.showVisualsMarketplaceDialog(3,e,a,s,d,t)];case 4:return[2,g.sent()]}})})},n.prototype.loadMarketplaceWithOrgApps=function(e){var t=(0,R.aj)([this.store.select(Ip),this.store.select(Cp),this.store.select(ts)]).pipe((0,Wr.n)(function(r){return!r[1]||!r[0]||!r[2]}),(0,ae.U)(function(r){return r[0]}),(0,Or.P)());this.showMarketplaceDialog(t,e)},n.prototype.loadMarketplaceWithOrgContentPacks=function(e){var t=(0,R.aj)([this.store.select(wp),this.store.select(bp),this.store.select(ts)]).pipe((0,Wr.n)(function(r){return!r[1]||!r[0]||!r[2]}),(0,ae.U)(function(r){return r[0]}),(0,Or.P)());this.showMarketplaceDialog(t,e)},n.prototype.showMarketplaceDialog=function(e,t){return(0,M.mG)(this,void 0,void 0,function(){var s,d,g,O,w,D=this;return(0,M.Jh)(this,function(V){switch(V.label){case 0:return s=ju,d=Nu,g={products$:e,hideNavigationBar:!1,initialTab:t,appSourceUrl:this.getAppSourceUrl("power-bi"),productId:this.productId,isContentPack:!this.shouldLoadOrgApps,orgMgmt:!1,showOrgGallery:!0,tabsPreset:Gn.ServiceAppsAllTabs,title:"AppsMarketplaceDialog_Title",subTitle:"AppsMarketplaceDialog_SubTitle",categoriesArray:s,sortingCategories:d,productGroup:0,shoppingCartTooltip:"App_Shopping_Cart_Icon_Tooltip",dataRestriction:zt.None,isDescriptionDisplayed:!1},O=Cs(g),[4,this.dialogService.openHostDialog(O)];case 1:return(w=V.sent())&&w.afterClosed().subscribe(function(j){return(0,M.mG)(D,void 0,void 0,function(){var ne,Z;return(0,M.Jh)(this,function(W){return j?j.action===ds.InstallApp?(this.marketplaceShowing=!1,ne=j.product,"public"===j.category&&j.redirectUrl?(this.telemetryService.logEvent(Rp,{appObjectId:Qa.fromApp(ne).appId,tabState:this.convertMarketplaceProductsTabToString(j.tabState),searchNonEmpty:j.searchNonEmpty}),this.navigateToAppInstallation(j.redirectUrl)):(this.telemetryService.logEvent(kp,{appGuid:(Z={id:ne.applicationId,category:j.category}).id,tabState:this.convertMarketplaceProductsTabToString(j.tabState),searchNonEmpty:j.searchNonEmpty}),this.globalEventBridge.publishToChannel(gi.updateUrlAndAcquireAppEvent,Z))):pe.fF.assert(function(){return!0},"Unknown action sent from app page dialog"):this.closeDialog(),[2]})})}),[2]}})})},n.prototype.showVisualsMarketplaceDialog=function(e,t,r,a,s,d){return(0,M.mG)(this,void 0,void 0,function(){var g,O,w,D,V,j,ne;return(0,M.Jh)(this,function(Z){switch(Z.label){case 0:return g=!t&&r,O=function(n,e,t){return n?zt.None:e?zt.AllAppSourceVisualsAreOffByAdmin:t?zt.CertifiedVisualsOnlyByAdmin:zt.None}(t,a,s),w={products$:null,hideNavigationBar:!1,initialTab:g?e:5,appSourceUrl:this.getAppSourceUrl("power-bi-visuals"),productId:void 0,isContentPack:!1,orgMgmt:t,showOrgGallery:r,tabsPreset:g?Gn.VisualsAllTabs:Gn.VisualsWithoutOrg,title:"PowerBIVisuals_LowercaseV",categoriesArray:$u,sortingCategories:Wu,productGroup:1,shoppingCartTooltip:"CustomVisualMarketPlace_Shopping_Cart",dataRestriction:O,termsOfUse:Qu,telemetryEventStart:this.openMarketplaceEventStart,isDescriptionDisplayed:!0,publicVisualsOnly:d},D=Cs(w),[4,this.dialogService.openHostDialog(D)];case 1:return(V=Z.sent())?[4,V.afterClosed().toPromise()]:[3,3];case 2:if(j=Z.sent()){if(j.action===ds.InstallApp)return this.marketplaceShowing=!1,this.logMarketplaceVisualsVisualAcquiredEvents({adminPortal:t,orgVisual:"Org Visual"===(ne=j.product).type,publicOrgVisual:null!=ne.orgManagedPublicId,recommended:ne.pbiRecommended,searchNonEmpty:j.searchNonEmpty,tabState:this.convertMarketplaceProductsTabToString(j.tabState)},null!=ne.orgManagedPublicId?ne.orgManagedPublicId:ne.applicationId),[2,ne];pe.fF.assert(function(){return!0},"Unknown action sent from app page dialog")}else this.logMarketplaceVisualsClosedWithoutVisualAcquiredEvents(),this.marketplaceShowing=!1;Z.label=3;case 3:return[2,null]}})})},n.prototype.logMarketplaceVisualsClosedWithoutVisualAcquiredEvents=function(){this.telemetryService.logEvent(Fp),this.certifiedEventsService.logStandardizedFeatureEvent({activityName:jr})},n.prototype.logMarketplaceVisualsVisualAcquiredEvents=function(e,t){this.telemetryService.logEvent(Lp,(0,M.pi)((0,M.pi)({},e),{visualId:t})),this.certifiedEventsService.logStandardizedFeatureEvent({activityAttributes:(0,M.pi)({},e),activityName:Nr,assetId:t})},n.prototype.closeDialog=function(){this.telemetryService.logEvent(Dp),this.marketplaceShowing=!1,this.navigationService.canNavigateBack()?this.navigationService.navigateBack():this.navigationService.navigateToApps()},n.prototype.navigateToAppInstallation=function(e){var t=(0,ln.ZY)(e);t=function(n,e){void 0===e&&(e=!0);var t=n.appId,r=n.packageKey,a=n.ownerId;if(Ha.q.isGuid(t)&&r.match(rp)&&(!a||Ha.q.isGuid(a))){var s="/groups/me/apps/"+t+"/package/"+r+"/install";return e?(0,ln.fS)(s,a?{ownerId:a,referrer:"embed.appsource"}:{referrer:"embed.appsource"},!0):s}}((0,ln.mA)(t));var a=(0,ln.mA)(window.location.href);a&&(t=(0,ln.fS)(t,a,!0)),nh.inTeams&&(t="/teams".concat(t)),this.windowOpenerService.open(t,"_self")},n.prototype.convertMarketplaceProductsTabToString=function(e){switch(e){case 0:return"AllApps";case 1:return"Organizational";case 2:return"Template";case 3:return"AllVisuals";case 4:return"OrgVisuals";case 5:return"Visuals"}},n.prototype.getAppSourceUrl=function(e){var r=(0,jp.Kd)(this.localizationService.currentLanguageLocale);return Mr.b$.urlCombine(gi.saasMarketplaceUrlOrigin,"".concat("embed/").concat(r).concat("/product/").concat(e))},n.\u0275fac=function(t){return new(t||n)(o.\u0275\u0275inject(J.yh),o.\u0275\u0275inject(bn.x),o.\u0275\u0275inject(Oa.W),o.\u0275\u0275inject(bt.Z),o.\u0275\u0275inject(Jt.o),o.\u0275\u0275inject(ut.y0),o.\u0275\u0275inject(fs.R),o.\u0275\u0275inject(Ma.p),o.\u0275\u0275inject(Up.P))},n.\u0275prov=o.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n}();function vs(n,e,t){return Math.max(Math.min(e,t),n)}function Cs(n){return{bindings:n,config:{panelClass:["no-padding","marketplace-container"],width:vs(600,.9*window.outerWidth,1330)+"px",height:vs(510,.9*window.outerHeight,860)+"px"},uriAllowedForNavigation:"*",urlAllowedForPopup:"*",componentName:cs.MarketplaceProductsDialogComponent,dialogName:cs.MarketplaceProductsDialogComponent}}var ah=l(70562),lh=function(){function n(e,t,r,a){this.httpService=e,this.featureSwitchService=t,this.telemetryService=r,this.certifiedEventsService=a}return n.prototype.sendVisualLeads=function(e){var t=this;pe.fF.assert(function(){return null!=e?.assetId},"sendVisualLeads should be called with an assetId"),this.featureSwitchService.featureSwitches$.pipe((0,Wr.n)(function(r){return!r}),(0,ja.w)(function(r){if(r.MarketplaceLeads){var a=t.httpService.powerbiRequestOptions();return a.enableTelemetry=!0,a.retryCount=0,t.httpService.post("/publishrefresh/customVisuals/leads",e,a)}return(0,K.of)(null)}),(0,he.q)(1),(0,st.b)(function(r){var a;r&&(t.telemetryService.logEvent(Vp,{assetId:e.assetId,adminPortal:!!e.source}),t.certifiedEventsService.logStandardizedFeatureEvent({activityAttributes:{adminPortal:!!e.source},activityName:zr,activityStatus:"Succeeded",assetId:e.assetId,correlationId:t.telemetryService.root.id,resultCode:null===(a=r.status)||void 0===a?void 0:a.toString()}))}),(0,Le.K)(function(r){var a;return t.telemetryService.logEvent(Bp,{assetId:e.assetId,adminPortal:!!e.source,isError:!0,errorMessage:JSON.stringify(r.error)}),t.certifiedEventsService.logStandardizedFeatureEvent({activityAttributes:{adminPortal:!!e.source},activityName:$r,activityStatus:"Failed",assetId:e.assetId,correlationId:t.telemetryService.root.id,resultCode:null===(a=r.status)||void 0===a?void 0:a.toString()}),(0,K.of)(null)})).subscribe()},n.\u0275fac=function(t){return new(t||n)(o.\u0275\u0275inject(Ua.O),o.\u0275\u0275inject(qt.vZ),o.\u0275\u0275inject(ut.y0),o.\u0275\u0275inject(fs.R))},n.\u0275prov=o.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n}(),ch={provide:ah.G,useClass:lh},dh=function(){function n(){}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=o.\u0275\u0275defineInjector({providers:[oh,ch],imports:[Pe.CommonModule,J.Aw]}),n}(),ph=l(62662),uh=l(76966),hh=l(558),gh=function(){function n(){}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=o.\u0275\u0275defineInjector({imports:[Pe.CommonModule,hh._t]}),n}(),mh=l(93367),fh=l(45411),vh=[{type:Xo,componentId:"DashboardBaseComponentId"},{type:oc,componentId:"InFocusTileComponentId"}],Ch=function(){function n(){}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=o.\u0275\u0275defineInjector({providers:[et,jn,{provide:"DashboardOnInitHandler",useClass:ic}],imports:[Jd,Pe.CommonModule,Yd.Y,tp.A,ep.s,uh.c,$a.g,za.N.withManifests(vh),Lr.v,gh,Wa.c,Na.J,op.b,Zd.h,_a._,mh.U,fh.m,np.F,ip.InsightsUIModule,rc.Ps,ii.jT,En.Is,ph.Y,dh,Xd.Y.withConfiguration({enableSyncServiceMonitor:!0})]}),n}(),bh=l(12548),yh=[{path:"",component:_s}],Ph=function(){function n(){}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=o.\u0275\u0275defineInjector({providers:[xs,ks],imports:[Pe.CommonModule,ei.Bz.forChild(yh),Ss.D,Ch,Lr.v,bh.Z]}),n}()},64986:function($e,Te,l){"use strict";l.d(Te,{D:function(){return Ne}});var M=l(84436),E=l(67465),Y=l(95194),T=l(60756),i=l(33567),c=l(90047),u=l(82515),f=l(46544),h=l(82762),m=l(14172),o=l(81905),b=l(59822),y=l(59973),x=l(17653),A=l(50423),R=l(87051),ce=l(18231),K=l(99868),N=l(11547),X=l(59017),ae=l(21860),xe=l(84916),Be=l(29866),he=function(){function le(me,ye,we){this.themeService=me,this.resourcePackagesService=ye,this.visualPlugin=we}return le.prototype.register=function(me){return _.isEmpty(me)||this.resourcePackagesService.registerPackages(me),(0,N.of)(!0)},le.prototype.registerAndLoad=function(me,ye){if(_.isEmpty(me))return(0,N.of)(!0);for(var we=[],qe=0,Ye=me;qe<Ye.length;qe++){var Ve=Ye[qe];if(this.isDashboardTheme(Ve))we.push((0,h.D)(this.themeService.loadTheme(ye,Ve)));else if(!this.resourcePackagesService.getPackageById(Ve.id)){var gt=(0,K.JZ)(Ve);this.resourcePackagesService.registerPackages([Ve]),gt&&we.push((0,h.D)(this.visualPlugin.ensurePlugin(Ve,!1)))}}return _.isEmpty(we)?(0,N.of)(!0):(0,X.aj)(we)},le.prototype.isDashboardTheme=function(me){return me&&1===me.type&&me.items&&1===me.items.length&&(me.items[0].type===ce.Ut.DashboardTheme||me.items[0].type===ce.Ut.DashboardBaseTheme)},le.\u0275fac=function(ye){return new(ye||le)(A.\u0275\u0275inject(ae.d),A.\u0275\u0275inject(xe.o),A.\u0275\u0275inject(Be.D))},le.\u0275prov=A.\u0275\u0275defineInjectable({token:le,factory:le.\u0275fac,providedIn:"root"}),le}(),Se=l(79184),Le=l(42594),ct=l(65472),it=function(){function le(me){this.hostService=me}return le.prototype.loadContract=function(me){var ye=this;return(0,h.D)(this.hostService.invoke("SampleService","GetDashboard",{dashboardId:me})).pipe((0,m.U)(function(we){we.objectId=ye.generateObjectId(me),we.sampleId=me,we.permissions=1;var qe=we.tiles.map(function(Ye){return Ye.objectId=ye.generateObjectId(Ye.id),Ye.$layoutConfig=(0,Se.mf)(Ye),Ye});return we.tiles=ye.calculateLayout(qe),{dashboards:[we],datasets:[],reports:[],tiles:[]}}))},le.prototype.generateObjectId=function(me){return"sample00-0000-0000-0000-".concat(_.pad(Math.abs(me).toString(16),12,"0"))},le.prototype.calculateLayout=function(me){var ye=this,we=Le.u,qe=[];if(me.sort(function(Ze,dt){return ye.getLayoutPosition(Ze).x-ye.getLayoutPosition(dt).x}),me.length>0){var Ye=this.getLayoutPosition(me[me.length-1]);we=Math.max(Math.ceil(Ye.x+Ye.width-1),Le.u)}for(var Ve=0;Ve<=we;++Ve)qe.push(1);me.sort(function(Ze,dt){return ye.getLayoutPosition(Ze).y-ye.getLayoutPosition(dt).y});for(var gt=0,He=me;gt<He.length;gt++)this.fixPosition(He[gt],qe);return me},le.prototype.fixPosition=function(me,ye){for(var we=this.getLayoutPosition(me),qe=1,Ye=we.x,Ve=we.x+we.width;Ye<Ve;++Ye){var gt=ye[Ye];gt>qe&&(qe=gt)}var He=we.y;for(we.y=He<qe||He>Le.ws?qe:Math.round(He),qe=we.y+we.height,me.row=we.y,me.col=we.x,Ye=we.x,Ve=we.x+we.width;Ye<Ve;++Ye)ye[Ye]=qe},le.prototype.getLayoutPosition=function(me){return me.$layoutConfig.layouts[0].position},le.\u0275fac=function(ye){return new(ye||le)(A.\u0275\u0275inject(ct.x))},le.\u0275prov=A.\u0275\u0275defineInjectable({token:le,factory:le.\u0275fac,providedIn:"root"}),le}(),ke=l(85732),S=function(){function le(me,ye,we,qe,Ye,Ve,gt){var He=this;this.networkAvailability=me,this.action$=ye,this.dashboardCacheService=we,this.dashboardResourcesService=qe,this.sampleService=Ye,this.telemetryService=Ve,this.store=gt,this.loadDashboard$=(0,T.GW)(function(){return He.action$.pipe((0,T.l4)(E.L6),(0,m.U)(function(ge){return ge.payload}),(0,o.w)(function(ge){return He.loadFromCache(ge.id,ge.workspaceId).pipe((0,o.w)(function(Ze){He.telemetryService.logEvent(M.L5,{dashboardId:ge.id,groupId:ge.workspaceId});var dt=_.find(Ze.dashboards,function(Lt){return Lt.id===ge.id}),At={workspaceId:ge.workspaceId,container:Ze,dashboard:dt};return[new c.kk(At),new E.Dd(At),He.networkAvailability.isNetworkAvailable()?new c.i(ge):new E.I4(At)]}),(0,b.K)(function(Ze){return He.telemetryService.logEvent(M.fx,{dashboardId:ge.id,groupId:ge.workspaceId}),(0,h.D)([new E.ot(ge.id),He.networkAvailability.isNetworkAvailable()?new c.i(ge):new E.zd({dashboardId:ge.id,error:new Error("Failed to load dashboard ".concat(ge.id," from cache. Network unavailable."))})])}))}))}),this.loadSampleDashboard$=(0,T.GW)(function(){return He.action$.pipe((0,T.l4)(E.Cj),(0,m.U)(function(ge){return ge.payload}),(0,o.w)(function(ge){return He.sampleService.loadContract(ge.id).pipe((0,o.w)(function(Ze){var dt=_.first(Ze.dashboards),At={container:Ze,dashboard:dt};return[new c.kk(At),new u.Ph({id:ge.workspaceId}),new c.Ph(dt.objectId,!0),new E.nX(At)]}),(0,b.K)(function(Ze){return(0,h.D)([new E.zd({dashboardId:ge.id,error:new Error("Failed to load sample dashboard ".concat(ge.id,"."))})])}))}))}),this.reloadDashboard$=(0,T.GW)(function(){return He.action$.pipe((0,T.l4)(E.b4),(0,T.IC)(function(){return He.store.select(Y.P$)}),(0,m.U)(function(ge){var dt=ge[1];return new c.i({id:dt.dashboardId,workspaceId:dt.workspaceId})}))}),this.loadCacheSuccess$=(0,T.GW)(function(){return He.action$.pipe((0,T.l4)(E.DY),(0,m.U)(function(ge){return ge.payload}),(0,o.w)(function(ge){return He.dashboardResourcesService.register(ge.container.resourcePackages||[]).pipe((0,o.w)(function(){return[new u.Ph({id:ge.workspaceId}),new c.Ph(ge.dashboard.objectId,!0)]}))}))}),this.loadOnlineSuccess$=(0,T.GW)(function(){return He.action$.pipe((0,T.l4)(c.jf),(0,m.U)(function(ge){return ge.payload}),(0,T.IC)(function(){return He.store.select(Y.P$)}),(0,y.h)(function(ge){return 1===ge[1].progress}),(0,o.w)(function(ge){var Ze=ge[0],At=Ze.workspaceId,Lt=Ze.dashboard.objectId;return He.dashboardResourcesService.registerAndLoad(Ze.container.resourcePackages||[],Lt).pipe((0,o.w)(function(){return[new u.Ph({id:At}),new c.Ph(Lt,!0),new E.Xt]}),(0,b.K)(function(){return(0,h.D)([new u.Ph({id:At}),new c.Ph(Lt,!0),new E.Xt])}))}))}),this.loadFail$=(0,T.GW)(function(){return He.action$.pipe((0,T.l4)(c.wx),(0,m.U)(function(ge){return ge.payload}),(0,T.IC)(function(){return He.store.select(Y.P$)}),(0,x.b)(function(ge){He.telemetryService.logEvent(M.Ur,{dashboardId:ge[0].dashboardId,groupId:ge[1].workspaceId,errorMessage:"Failed to load dashboard from network"})}),(0,m.U)(function(ge){return new E.zd(ge[0])}))})}return le.prototype.loadFromCache=function(me,ye){return(0,h.D)(this.dashboardCacheService.loadContract({dashboardId:me,groupId:ye}))},le.\u0275fac=function(ye){return new(ye||le)(A.\u0275\u0275inject(i.SW),A.\u0275\u0275inject(T.eX),A.\u0275\u0275inject(R.H),A.\u0275\u0275inject(he),A.\u0275\u0275inject(it),A.\u0275\u0275inject(f.y0),A.\u0275\u0275inject(ke.yh))},le.\u0275prov=A.\u0275\u0275defineInjectable({token:le,factory:le.\u0275fac}),le}(),Ie=l(77476),Ue=function(){function le(){}return le.\u0275fac=function(ye){return new(ye||le)},le.\u0275mod=A.\u0275\u0275defineNgModule({type:le}),le.\u0275inj=A.\u0275\u0275defineInjector({}),le}(),ht=l(63868),J=function(){function le(){}return le.\u0275fac=function(ye){return new(ye||le)},le.\u0275mod=A.\u0275\u0275defineNgModule({type:le}),le.\u0275inj=A.\u0275\u0275defineInjector({imports:[Ue,ht.h]}),le}(),Et=l(46055),Ct=l(32288),We=l(26409),bt=l(43130),Pe=l(37435),Ne=function(){function le(me,ye){32===me&&ye.init()}return le.\u0275fac=function(ye){return new(ye||le)(A.\u0275\u0275inject(bt.H),A.\u0275\u0275inject(Pe.gX))},le.\u0275mod=A.\u0275\u0275defineNgModule({type:le}),le.\u0275inj=A.\u0275\u0275defineInjector({imports:[Ie.CommonModule,Et.b,Ct.J,J,ke.Aw.forFeature("dashboard-host",Y.ll),T.sQ.forFeature([S]),We.z]}),le}()},70562:function($e,Te,l){"use strict";l.d(Te,{G:function(){return E}});var E=new(l(50423).InjectionToken)("MarketplaceProductsLeadsService")},89659:function($e,Te,l){"use strict";l.d(Te,{h:function(){return Un}});var M=l(81337),E=l(49965),Y=l(57541),T=l(46391),i=l(50423),c=new i.InjectionToken("tileHeaderClickService"),u=l(81723),f=l(28726),h=l(76964),m=l(88940),o=l(70893),b=l(14463),y=l(50544),x=l(33318),A=l(65551),R=l(79184),ce=l(38701),K=l(41288),N=l(40093),X=l(36657),ae=l(41114),xe="PBI.Dashboard.DashboardShouldRefreshTileData",Be=ae.cx[xe]=(0,ae.b1)(xe),he="PBI.Dashboard.GetVisualDefinitionFailed",Se=ae.cx[he]=(0,ae.b1)(he),Le=l(8060),ct=l(58317),it=l(5708),ke=l(2142),S=l(50600),Ie=l(47508),Ue=l(79154),ht=l(81331),J=l(94573),Et=l(4954),Ct=l(73221),We=l(46544),bt=l(35563),Pe=l(45665),Ne=l(21429),le=l(33554),me=l(35510),ye=l(59017),we=l(11547),qe=l(48787),Ye=l(59973),Ve=l(14172),gt=l(77526),He=l(42195),ge=l(17653),Ze=l(57243),dt=l(68549),At=l(6754),Lt=l(83317),$t=l(33567),dn=l(43130),tn=l(9380),sn=l(29866),pn=l(52121),un=l(84916),q=l(22010),fe=l(69071),ee=l(67660),be=l(21860),Re=l(93425),Ke=l(1731),rt=l(88254),Ge=l(65181),_t=l(93205),Pt=l(43025),at=l(11494),jt=l(14348),St=l(66217),H=l(21976),B=l(5862),ie=l(47644),de=l(3579),ve=l(73192),pt=function(){function P(C,p){this.explorationProxy=C,this.promiseFactory=p,this.explorationJobsQueue=[],this.inProgressJobsQueue=[]}return P.prototype.getExploration=function(C,p){var v=this.promiseFactory.defer();return this.explorationJobsQueue.push({reportId:C,sectionId:p,deferred:v}),this.scheduleLoadExploration(),v.promise},P.prototype.scheduleLoadExploration=function(){var C=this;this.delayTimeout&&clearTimeout(this.delayTimeout),this.delayTimeout=setTimeout(function(){C.loadExplorations()},10)},P.prototype.loadExplorations=function(){var C=this,p=this.explorationJobsQueue;if(!_.isEmpty(p)){var v=p.shift();this.inProgressJobsQueue.push(v);var I=this.shouldRequestForAllSection(v.reportId,v.sectionId),k=v.reportId,L=I?null:v.sectionId;I&&(this.inProgressJobsQueue=this.inProgressJobsQueue.concat(_.remove(p,function(se){return se.reportId===k})));var G={id:k,sectionId:L,allowResultFromClientCache:!0};this.explorationProxy.get(G).then(function(se){C.processResult(G.id,G.sectionId,se)},function(){C.processResult(G.id,G.sectionId,null)}),this.loadExplorations()}},P.prototype.shouldRequestForAllSection=function(C,p){if(null==p)return!0;var v=this.explorationJobsQueue;if(_.isEmpty(v))return!1;for(var I=0,k=0,L=v;k<L.length;k++){var G=L[k];if(G.reportId===C&&(null==G.sectionId||(G.sectionId!==p&&I++,I>=2)))return!0}return!1},P.prototype.processResult=function(C,p,v){for(var I=[],k=0,L=this.inProgressJobsQueue;k<L.length;k++){var G=L[k];G.reportId!==C||_.isNumber(p)&&p!==G.sectionId?I.push(G):v?G.deferred.resolve(v):G.deferred.reject(v)}this.inProgressJobsQueue=I},P.\u0275fac=function(p){return new(p||P)(i.\u0275\u0275inject(ve.u),i.\u0275\u0275inject(b.t))},P.\u0275prov=i.\u0275\u0275defineInjectable({token:P,factory:P.\u0275fac,providedIn:"root"}),P}(),Wt=function(){function P(C,p,v){this.reportTileService=C,this.visualPlugins=p,this.tileConfig=v}return P.prototype.tileContainsScriptVisuals=function(C){return(0,M.mG)(this,void 0,void 0,function(){var p;return(0,M.Jh)(this,function(v){switch(v.label){case 0:return[4,this.countTileScriptVisuals(C)];case 1:return p=v.sent(),[2,this.isScriptVisualTile(C)||p.hasScriptVisuals]}})})},P.prototype.isScriptVisualTile=function(C){return C&&C.type===y.YU.composite&&this.visualPlugins.isScriptVisual((0,A.s)(C.$config))},P.prototype.countTileScriptVisuals=function(C){var p;return(0,M.mG)(this,void 0,void 0,function(){var v,I,k,L,G;return(0,M.Jh)(this,function(se){switch(se.label){case 0:return v=new R.Us,C.type!==y.YU.report?[2,v]:[4,this.reportTileService.getExploration(C.reportId,C.sectionId)];case 1:if(I=se.sent().exploration,k=C&&C.type===y.YU.report&&I&&I.sections,C&&C.type===y.YU.report&&(L=C.$config?C.$config.visualContainer:null===(p=this.tileConfig.parseTileConfig(C))||void 0===p?void 0:p.visualContainer),!k||!L)return[2,v];if((G=(0,de.s)(L.$visualContainer))&&this.visualPlugins&&this.visualPlugins.isScriptVisual(G))switch((0,ie.lX)(G)){case 0:v.rScriptCount++;break;case 1:v.pythonScriptCount++}return[2,v]}})})},P.\u0275fac=function(p){return new(p||P)(i.\u0275\u0275inject(pt),i.\u0275\u0275inject(sn.D),i.\u0275\u0275inject(Re.A))},P.\u0275prov=i.\u0275\u0275defineInjectable({token:P,factory:P.\u0275fac,providedIn:"root"}),P}(),Ht=l(70785),fn=l(85732),re=l(94420),U=function(){function P(C){this.telemetryService=C}return P.prototype.shouldRefreshData=function(C,p,v,I){if(I>=P.maxRetryRefreshTiles)return!1;var k=!p&&this.isDataStale(v?(0,it.ee)(v.lastRefreshTime).getTime():void 0,C),L=!p&&C.tileDataSet&&!C.tileDataIsVolatile&&(!C.tileData||k);return this.telemetryService.logEvent(Be,{hasQueryError:p,hasDataset:!!C.tileDataSet,tileDataIsVolatile:C.tileDataIsVolatile,hasTileData:!!C.tileData,isStaleData:k,tileObjectId:C.objectId,sholudRefreshTileData:L}),L},P.prototype.isDataStale=function(C,p){if(!C)return!1;var I=(0,it.ee)(p.tileDataUpdatedTime),k=I&&I.getTime();return!!k&&C-k>36e5},P.maxRetryRefreshTiles=1,P.\u0275fac=function(p){return new(p||P)(i.\u0275\u0275inject(We.y0))},P.\u0275prov=i.\u0275\u0275defineInjectable({token:P,factory:P.\u0275fac,providedIn:"root"}),P}(),F=l(77476),te=l(67954),Ce=l(60016),Me=l(28537),ze=l(12338),je=l(59968),Qe=l(50057),Je=l(18460),Vt=l(35756),ut=l(28717),st=l(18942);function pe(P,C){if(1&P&&(i.\u0275\u0275elementStart(0,"div",1),i.\u0275\u0275element(1,"img",2),i.\u0275\u0275elementEnd()),2&P){var p=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("src",p.imageUrl,i.\u0275\u0275sanitizeUrl)}}var vn=function(){function P(C){this.sanitizer=C}return P.prototype.ngOnInit=function(){this.imageUrl=this.sanitizer.bypassSecurityTrustResourceUrl(ut.yE)},P.\u0275fac=function(p){return new(p||P)(i.\u0275\u0275directiveInject(st.H7))},P.\u0275cmp=i.\u0275\u0275defineComponent({type:P,selectors:[["model-tile"]],decls:1,vars:1,consts:[["class","modelTile",4,"ngIf"],[1,"modelTile"],["alt","",1,"image",3,"src"]],template:function(p,v){1&p&&i.\u0275\u0275template(0,pe,2,1,"div",0),2&p&&i.\u0275\u0275property("ngIf",v.imageUrl)},dependencies:[F.NgIf],styles:["[_nghost-%COMP%]   .modelTile[_ngcontent-%COMP%]{margin-right:2px;margin-left:2px;bottom:2px}[_nghost-%COMP%]   .modelTile[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;-webkit-transform:translateY(-50%) translateX(-50%);transform:translateY(-50%) translate(-50%);opacity:1;max-width:100%;max-height:100%}"]}),P}(),_o=l(44088);function vi(P,C){1&P&&(i.\u0275\u0275elementStart(0,"div",4)(1,"div",5),i.\u0275\u0275element(2,"div",6),i.\u0275\u0275elementStart(3,"div",7)(4,"span",8),i.\u0275\u0275text(5," We couldn't load that image "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(6,"div")(7,"a",9),i.\u0275\u0275text(8," Learn more "),i.\u0275\u0275elementEnd()()()()())}function So(P,C){if(1&P){var p=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",1)(1,"img",2),i.\u0275\u0275listener("load",function(){i.\u0275\u0275restoreView(p);var k=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(k.imageLoaded())})("error",function(){i.\u0275\u0275restoreView(p);var k=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(k.imageError())}),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(2,vi,9,0,"div",3),i.\u0275\u0275elementEnd()}if(2&P){var v=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("src",v.imageUrl,i.\u0275\u0275sanitizeUrl)("alt",v.altText),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",v.imageloadUrlError)}}var qt=function(){function P(){this.imageloadUrlError=!1}return P.prototype.imageLoaded=function(){this.imageloadUrlError=!1},P.prototype.imageError=function(){this.imageloadUrlError=!0},P.\u0275fac=function(p){return new(p||P)},P.\u0275cmp=i.\u0275\u0275defineComponent({type:P,selectors:[["image-tile"]],inputs:{imageUrl:"imageUrl",altText:"altText"},decls:1,vars:1,consts:[["class","imageTile",4,"ngIf"],[1,"imageTile"],[1,"image",3,"src","alt","load","error"],["class","errorPlaceholder",4,"ngIf"],[1,"errorPlaceholder"],[1,"errorContainer"],["title","We couldn't load that image",1,"errorPlaceholderIcon","glyphicon","pbi-glyph-error","glyph-med"],[1,"errorPlaceholderTextContainer"],[1,"errorPlaceholderText"],["href","https://go.microsoft.com/fwlink/?LinkID=690859&clcid=0x409","rel","noopener noreferrer","target","_blank","localize","LearnMore",1,"getDetailsText","clickAction"]],template:function(p,v){1&p&&i.\u0275\u0275template(0,So,3,3,"div",0),2&p&&i.\u0275\u0275property("ngIf",v.imageUrl)},dependencies:[F.NgIf,je.X],styles:['[_nghost-%COMP%]   .imageTile[_ngcontent-%COMP%]{margin-right:2px;margin-left:2px;bottom:2px}[_nghost-%COMP%]   .imageTile[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;-webkit-transform:translateY(-50%) translateX(-50%);transform:translateY(-50%) translate(-50%);opacity:1;max-width:100%;max-height:100%}[_nghost-%COMP%]   .errorContainer[_ngcontent-%COMP%]{display:table-cell;width:inherit;height:inherit;text-align:center;vertical-align:middle}[_nghost-%COMP%]   .errorContainer[_ngcontent-%COMP%]   .errorPlaceholderIcon[_ngcontent-%COMP%]{pointer-events:all;display:inline-block;vertical-align:middle;color:#666}[_nghost-%COMP%]   .errorContainer[_ngcontent-%COMP%]   .glyph-med[_ngcontent-%COMP%]{font-size:32px}[_nghost-%COMP%]   .errorContainer[_ngcontent-%COMP%]   .errorPlaceholder[_ngcontent-%COMP%]{display:table;background-color:#f4f4f4;color:#333;font-size:small;width:100%;height:100%;cursor:default;position:absolute}[_nghost-%COMP%]   .errorContainer[_ngcontent-%COMP%]   .errorPlaceholderTextContainer[_ngcontent-%COMP%]{display:block;text-align:center;padding:20px 20px 0}[_nghost-%COMP%]   .errorContainer[_ngcontent-%COMP%]   .errorPlaceholderTextContainer[_ngcontent-%COMP%]   .errorPlaceholderText[_ngcontent-%COMP%]{display:inline-block;text-align:center;vertical-align:middle;font:"Segoe UI",wf_segoe-ui_normal,helvetica,arial,sans-serif;font-size:14px;color:#333}[_nghost-%COMP%]   .errorContainer[_ngcontent-%COMP%]   .errorPlaceholderTextContainer[_ngcontent-%COMP%]   .getDetailsText[_ngcontent-%COMP%]{display:inline-block;text-align:center;vertical-align:middle;cursor:pointer;text-decoration:none;font-size:14px;color:#0645ad}']}),P}(),To=l(31639),Dn=l(65195),Io=["frame"];function Cn(P,C){if(1&P&&i.\u0275\u0275element(0,"iframe",4,5),2&P){var p=i.\u0275\u0275nextContext(2);i.\u0275\u0275propertyInterpolate("title",p.iFrameTitle),i.\u0275\u0275property("src",p.iframeUrl,i.\u0275\u0275sanitizeResourceUrl)}}function wo(P,C){if(1&P&&i.\u0275\u0275element(0,"iframe",6,5),2&P){var p=i.\u0275\u0275nextContext(2);i.\u0275\u0275propertyInterpolate("title",p.iFrameTitle),i.\u0275\u0275property("src",p.iframeUrl,i.\u0275\u0275sanitizeResourceUrl)}}function Ci(P,C){if(1&P&&(i.\u0275\u0275elementStart(0,"div",1),i.\u0275\u0275template(1,Cn,2,2,"iframe",2),i.\u0275\u0275template(2,wo,2,2,"iframe",3),i.\u0275\u0275elementEnd()),2&P){var p=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",null==p.iframeTileSandboxOptions?null:p.iframeTileSandboxOptions.allowTopNavigationByUserActivation),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!(null!=p.iframeTileSandboxOptions&&p.iframeTileSandboxOptions.allowTopNavigationByUserActivation))}}var Jt=window,xo=function(){function P(C,p,v,I,k){this.sanitizer=C,this.networkAvailability=p,this.localizationService=v,this.featureSwitchService=I,this.iframeTileSandboxOptions=k,this.onTileError=new i.EventEmitter,this.sandboxOptions=["allow-scripts","allow-popups","allow-same-origin","allow-forms","allow-popups-to-escape-sandbox"],this.iframeUrl=this.sanitizer.bypassSecurityTrustResourceUrl(Jt.embeddedWebContentIframeSource),this.loadAsync()}return P.prototype.ngOnInit=function(){this.iFrameTitle=this.viewModel&&this.viewModel.displayText?this.viewModel.displayText:this.localizationService.get("AddWidgetModal_IframeOption_Title")},P.prototype.loadAsync=function(){return(0,M.mG)(this,void 0,void 0,function(){return(0,M.Jh)(this,function(C){return this.iframeTileSandboxOptions&&this.iframeTileSandboxOptions.allowTopNavigationByUserActivation&&this.sandboxOptions.push("allow-top-navigation-by-user-activation"),this.sandbox=this.sandboxOptions.join(" "),[2]})})},P.prototype.ngOnChanges=function(C){this.iframe&&C.embedCode&&this.updateEmbedCode(this.embedCode)},P.prototype.ngAfterViewInit=function(){var C=this;if(this.networkAvailability.isNetworkAvailable())this.featureSwitchService.featureSwitches.webContentTilesTenantEnabled?(this.updateEmbedCode(this.embedCode),this.windowMessageHandler=function(v){v.data&&v.data.iframeLoaded&&C.iframe.nativeElement.contentWindow&&v.source===C.iframe.nativeElement.contentWindow&&(C.updateEmbedCode(C.viewModel.embedCode),window.removeEventListener(Dn.V,C.windowMessageHandler))},window.addEventListener(Dn.V,this.windowMessageHandler)):this.showWebContentDisabledMessage();else{var p=this.localizationService.get("Tile_ErrorText");this.onTileError.emit({error:p})}},P.prototype.updateEmbedCode=function(C){this.iframe&&this.iframe.nativeElement.contentWindow.postMessage({embedCode:C},"*")},P.prototype.showWebContentDisabledMessage=function(){var C=this.localizationService.get("Dashboard_WebContentTiles_Disabled"),p=this.localizationService.get("Dashboard_WebContentTiles_Disabled_ErrorText"),v=this.localizationService.get("ContactYourAdministratorForDetails");this.onTileError.emit({error:C,errorDetails:{message:C,displayableErrorInfo:[{errorInfoKey:p,errorInfoValue:v}],hideAdditionalErrorInfo:!0,hideGetHelpLink:!1,forceShowError:!0,helpLink:"https://go.microsoft.com/fwlink/?LinkID=690865"}})},P.prototype.ngOnDestroy=function(){window.removeEventListener(Dn.V,this.windowMessageHandler)},P.\u0275fac=function(p){return new(p||P)(i.\u0275\u0275directiveInject(st.H7),i.\u0275\u0275directiveInject($t.SW),i.\u0275\u0275directiveInject(Ge.o),i.\u0275\u0275directiveInject(tn.vZ),i.\u0275\u0275directiveInject(To.E,8))},P.\u0275cmp=i.\u0275\u0275defineComponent({type:P,selectors:[["iframe-tile"]],viewQuery:function(p,v){var I;(1&p&&i.\u0275\u0275viewQuery(Io,5),2&p)&&(i.\u0275\u0275queryRefresh(I=i.\u0275\u0275loadQuery())&&(v.iframe=I.first))},inputs:{viewModel:"viewModel",embeddedWebContentIframeSource:"embeddedWebContentIframeSource",embedCode:"embedCode"},outputs:{onTileError:"onTileError"},features:[i.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[["class","iframeTile","data-testid","iframe-Tile",4,"ngIf"],["data-testid","iframe-Tile",1,"iframeTile"],["class","iframeSelf","frameborder","0","allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture","allowfullscreen","","sandbox","allow-scripts allow-popups allow-same-origin allow-forms allow-popups-to-escape-sandbox allow-top-navigation-by-user-activation","scrolling","no","marginheight","0","marginwidth","0",3,"src","title",4,"ngIf"],["class","iframeSelf","frameborder","0","allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture","allowfullscreen","","sandbox","allow-scripts allow-popups allow-same-origin allow-forms allow-popups-to-escape-sandbox","scrolling","no","marginheight","0","marginwidth","0",3,"src","title",4,"ngIf"],["frameborder","0","allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture","allowfullscreen","","sandbox","allow-scripts allow-popups allow-same-origin allow-forms allow-popups-to-escape-sandbox allow-top-navigation-by-user-activation","scrolling","no","marginheight","0","marginwidth","0",1,"iframeSelf",3,"src","title"],["frame",""],["frameborder","0","allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture","allowfullscreen","","sandbox","allow-scripts allow-popups allow-same-origin allow-forms allow-popups-to-escape-sandbox","scrolling","no","marginheight","0","marginwidth","0",1,"iframeSelf",3,"src","title"]],template:function(p,v){1&p&&i.\u0275\u0275template(0,Ci,3,2,"div",0),2&p&&i.\u0275\u0275property("ngIf",!v.viewModel.isLoading&&v.sandbox)},dependencies:[F.NgIf]}),P}(),bi=function(){function P(){}return P.\u0275fac=function(p){return new(p||P)},P.\u0275cmp=i.\u0275\u0275defineComponent({type:P,selectors:[["ssrs-tile"]],inputs:{imageUrl:"imageUrl"},decls:2,vars:1,consts:[[1,"ssrsTile"],["alt","",3,"src"]],template:function(p,v){1&p&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275element(1,"img",1),i.\u0275\u0275elementEnd()),2&p&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("src",v.imageUrl,i.\u0275\u0275sanitizeUrl))},styles:["[_nghost-%COMP%]   .ssrsTile[_ngcontent-%COMP%]{margin-right:2px;margin-left:2px;bottom:2px}[_nghost-%COMP%]   .ssrsTile[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;-webkit-transform:translateY(-50%) translateX(-50%);transform:translateY(-50%) translate(-50%);opacity:1;max-width:100%;max-height:100%}"]}),P}();function Ao(P,C){1&P&&i.\u0275\u0275element(0,"span",5)}function Eo(P,C){1&P&&i.\u0275\u0275element(0,"span",6)}var wt=function(){function P(){}return P.prototype.ngAfterViewInit=function(){var C=this;setTimeout(function(){var p=document.getElementById("gridView");C.width=p.getBoundingClientRect().width,C.displayMode=C.width<200?0:C.width>400?1:2},0)},P.\u0275fac=function(p){return new(p||P)},P.\u0275cmp=i.\u0275\u0275defineComponent({type:P,selectors:[["permission-locked-tile"]],decls:7,vars:3,consts:[["id","gridView"],[3,"ngSwitch"],["data-testid","lock-icon",1,"glyphicon","glyph-small","pbi-glyph-lock"],["localize","PermissionCenter_LockedTile_Medium","data-testid","permission-center-locked-tile-medium",4,"ngSwitchCase"],["localize","PermissionCenter_LockedTile_Large",4,"ngSwitchCase"],["localize","PermissionCenter_LockedTile_Medium","data-testid","permission-center-locked-tile-medium"],["localize","PermissionCenter_LockedTile_Large"]],template:function(p,v){1&p&&(i.\u0275\u0275element(0,"div")(1,"div"),i.\u0275\u0275elementStart(2,"div",0)(3,"div",1),i.\u0275\u0275element(4,"div",2),i.\u0275\u0275template(5,Ao,1,0,"span",3),i.\u0275\u0275template(6,Eo,1,0,"span",4),i.\u0275\u0275elementEnd()()),2&p&&(i.\u0275\u0275advance(3),i.\u0275\u0275property("ngSwitch",v.displayMode),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngSwitchCase",1),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngSwitchCase",2))},dependencies:[F.NgSwitch,F.NgSwitchCase,je.X],styles:["permission-locked-tile[_ngcontent-%COMP%]{color:var(--neutral-primary-color-alt2, #4a4a4a);font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif;font-size:12px;height:100%;line-height:16px;width:100%;display:block;background-color:var(--white-color, #FFF);overflow:hidden;text-decoration:none;cursor:pointer}permission-locked-tile[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-of-type{background:#D8D8D8;height:10px;margin:20px 0 8px 10px;width:40%}permission-locked-tile[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){background:var(--neutral-light-color, #EAEAEA);height:8px;width:25%;margin-left:10px}permission-locked-tile[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child{display:table;height:100%;margin-top:-26px;width:100%}permission-locked-tile[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child > div[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle;text-align:center}permission-locked-tile[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child > div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;padding-top:1px}"]}),P}(),Do=l(22543),Dt=l(57871),yi=l(58291),ko=l(8590),bn=l(82004),Ro=l(42614),Jn=l(78417),Yn=l(71216),Pi=l(99826),Mi=l(11902),Zn=l(61903),Oi=l(46616),yn=l(50550),Bt=l(62458),Xn=l(99868),Fo=l(3404),Lo=l(90917),Gr=l(48145),Kr=l(39503),Qr=l(83008),_i=l(77200),Si=l(84281),Pn=l(44294),Ti=l(14839),Ii=l(50911),Vo=l(76072),Mn=l(2330),eo=l(73114);function Bo(P,C){if(1&P&&i.\u0275\u0275element(0,"exploration",4),2&P){var p=C.ngIf,v=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("viewModel",p)("disablePrint",!0)("shouldSetFocus",!0)("canvasOptions",v.canvasOptions)("useOnPushChangeDetection",!0)}}function to(P,C){if(1&P&&i.\u0275\u0275element(0,"error-placeholder",5),2&P){var p=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("errorText",p.errorText)}}function no(P,C){if(1&P&&(i.\u0275\u0275elementStart(0,"div",1),i.\u0275\u0275template(1,Bo,1,5,"exploration",2),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275template(3,to,1,1,"error-placeholder",3),i.\u0275\u0275elementEnd()),2&P){var p=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(2,2,p.explorationViewModel)),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",p.isError)}}var wi={type:1,name:"ReportVisualError"},xi={type:1,name:"reloadEmptyVisuals"},Ai=function(){function P(C,p,v,I,k,L,G,se,z,oe,Ee,Mt,ot,Xe,et,Zt,Nt,rn,hn,lo,jn,co,po,uo,ho){this.explorationSerializer=C,this.explorationCapabilities=p,this.explorationNavigation=v,this.dataSources=I,this.localizationService=k,this.promiseFactory=L,this.reportTileService=G,this.viewModeState=se,this.undoRedo=z,this.resourceLoader=oe,this.resourcePackagesService=Ee,this.featureSwitchService=Mt,this.themeService=ot,this.visualPlugin=Xe,this.telemetryService=et,this.trustedVisual=Zt,this.eventBridge=Nt,this.reportRefresh=rn,this.visualTimeSynchronizationService=hn,this.reportStore=lo,this.datasetStore=jn,this.globalEventBridge=co,this.lazyProvider=po,this.publicCustomVisualService=uo,this.moduleLoader=ho}return P.prototype.ngOnInit=function(){var C=this;Bt.fF.assert(function(){return C.contract&&C.contract.type===y.YU.report}),this.viewModeState.setMode(0),this.viewModeState.updateConfig(function(v){v.displayOptions.hideNavigationPane=!0,v.displayOptions.hideOutspaceFormatting=!0,v.touchOptions.isCanvasSwipeable=!1}),this.undoRedo.setStrategy(new bn.Z),this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager(),this.subscriptionManager.subscribe(ct.sc,function(){C.globalEventBridge.publishToChannel(X.z.tileVisualLoadedEventName,{objectId:C.contract.objectId})}).subscribe(ko.$$f,function(v,I){C.eventBridge.publishToChannel(wi,I)}),this.jQueryUILoadedPromise=this.moduleLoader.require(Oi.W).then(function(){return!0},function(){return!1}),this.explorationViewModel=this.populateReportTiles(),this.canvasOptions={autoLayoutVisualPadding:0,scrollbarOffset:0,disableFocusOnExploreCanvas:!0},this.explorationCapabilities.setCapabilities({showAppBar:!1,showTaskPane:!1,showVisualizationPane:!1,showNavContentPane:!0,visualContainerOptions:{showMenu:!1,showPin:!1,showContextMenu:!1,disablePin:!1,hideHeader:!0,useStylableHeader:!0},showBackButtonOnAppBar:!1,analysisVisuals:!0,qna:!0,azureMaps:!0,allowWebUrlVisualLinks:!0,disableCanvasTooltips:!0,disableDrillthroughText:!0,disableEnhancedTooltips:!0})},P.prototype.ngOnDestroy=function(){this.subscriptionManager.unsubscribeAll(),this.reportRefresh.destroy()},P.prototype.logEventForRealtimeTile=function(C){C&&(C.realTimeMode||C.pushDataVersion)&&this.telemetryService.logEvent(Le.bm,{modelId:C.id,realtimeMode:C.realTimeMode||0,pushdataVersion:C.pushDataVersion||0,controller:"ReportTileController"})},P.prototype.reloadTrustedVisuals=function(C){_.isEmpty(C)||(this.visualPlugin.ensureTrustedVisualPlugins(C),this.eventBridge.publishToChannel(xi,{visualTypes:C.map(function(p){return p.name})}))},P.prototype.populateExploration=function(C,p,v,I,k){return(0,M.mG)(this,void 0,void 0,function(){var G,se,z,oe,Ee,Mt;return(0,M.Jh)(this,function(ot){switch(ot.label){case 0:return this.setDataSources(C,p),G=this.explorationSerializer.deepCopyExploration(p,{withData:!0,withQuery:!0}),se=P.mapCanvasSize(G,v),this.applySectionParameterFilters(se,v,I,k),z=P.getReferencedResourcePackages(se,v),oe=null,this.featureSwitchService.featureSwitches.consumePublicCvsWithoutRps?[4,this.getResourcePackagesToRegister(z,se,v)]:[3,3];case 1:return Ee=ot.sent(),[4,this.resolveExploration(Ee,se,v)];case 2:return oe=ot.sent(),[3,6];case 3:return[4,this.resolveExploration(z,se,v)];case 4:return oe=ot.sent(),[4,(0,Pi.j)(p,this.trustedVisual)];case 5:Mt=ot.sent(),this.reloadTrustedVisuals(Mt),ot.label=6;case 6:return this.logEventForRealtimeTile(C),[2,oe]}})})},P.prototype.resolveExploration=function(C,p,v){return(0,M.mG)(this,void 0,void 0,function(){var I;return(0,M.Jh)(this,function(L){switch(L.label){case 0:if(_.isEmpty(C))return[3,4];this.telemetryService.logEvent(Le.eP,{resourcePackageLength:C.length,tileId:(I=this.contract)?I.id:-1,reportTileHasCustomVisual:!0}),this.resourcePackagesService.registerPackages(C),L.label=1;case 1:return L.trys.push([1,3,,4]),[4,this.visualPlugin.ensurePlugins(C,!1)];case 2:case 3:return L.sent(),[3,4];case 4:return[2,this.createExplorationViewModel(p,v)]}})})},P.prototype.getResourcePackagesToRegister=function(C,p,v){return(0,M.mG)(this,void 0,void 0,function(){var I,k,L,G,se,z;return(0,M.Jh)(this,function(Ee){switch(Ee.label){case 0:return I=P.getReferencedVisualsInSection(p,v),[4,this.publicCustomVisualService.getPublicResourcePackages(_.keys(I))];case 1:for(k=Ee.sent(),L=k,G=function(ot){_.find(k,function(Xe){return Xe.name===ot.name})||L.push(ot)},se=0,z=C;se<z.length;se++)G(z[se]);return[2,L]}})})},P.prototype.addODataFilterFromQuery=function(C,p){return(0,M.mG)(this,void 0,void 0,function(){var I,k,L;return(0,M.Jh)(this,function(se){switch(se.label){case 0:return[4,this.lazyProvider.get("@powerbi/ODataFilterParser/OData-Filter-Parser.module#ODataFilterParserModule","odataFilterParserService")];case 1:return[4,se.sent().tryGetFilters(p)];case 2:if(I=se.sent(),_.isEmpty(I))return[2];for(C.filters||(C.filters=[]),k=0,L=I;k<L.length;k++)C.filters.push(L[k]);return this.updateExplorationCacheCapabilities(!0,!1),[2]}})})},P.prototype.updateExplorationCacheCapabilities=function(C,p){var v=this.explorationCapabilities,I=v.getCapabilities();I.visualContainerOptions.disableQueryCacheUpdates=C,void 0!==p&&(I.persistentUserStateEnabled=p),v.setCapabilities(I)},P.prototype.applySectionParameterFilters=function(C,p,v,I){if(C&&C.sections){var k=(0,Yn.oS)(C,p),L=null!=k&&C.sections[k];if(L){Ro.l.mergeExplorationSectionFilters(C,L);var G=(0,Jn.SV)(C,v);Ro.l.applySectionParameterFilters(L,null!=G&&C.pods[G],void 0,I)}}},P.prototype.populateReportTiles=function(){return(0,M.mG)(this,void 0,void 0,function(){var C,p,v,I,k,L,G,se,z,oe,Ee,Mt;return(0,M.Jh)(this,function(Xe){switch(Xe.label){case 0:return this.isError=!1,Bt.fF.assertValue(this.contract,"contract"),C=this.config,[4,this.reportStore.findById(p=this.contract.reportId)];case 1:return v=Xe.sent(),I=this.contract.sectionId,v?[4,this.datasetStore.findDatasetById(v.modelId)]:(this.setErrorText(),[2]);case 2:k=Xe.sent(),Xe.label=3;case 3:return Xe.trys.push([3,9,,10]),[4,this.reportTileService.getExploration(p,I)];case 4:return L=Xe.sent().exploration,[4,this.initializeExplorationTheme(L)];case 5:if(Xe.sent(),G=C&&C.reportTile&&C.reportTile.sectionId,se=L.sections,null==I&&null!=G&&null!=se&&G<se.length){if(!(z=L.sections[G]))return this.setErrorText(),[2];I=z.id}return oe=null,Ee=null,C&&C.reportTile&&(oe=C.reportTile.pod,C.reportTile.filters&&(Mt=[],Ee=this.explorationSerializer.deserializeFilterCollection(this.explorationSerializer.parseFilterCollectionConfig(C.reportTile.filters),Mt,!1),Bt.fF.assert(function(){return _.isEmpty(Mt)},"Unexpected errors deserializing report tile filters"))),this.odataFilters?[4,this.addODataFilterFromQuery(L,this.odataFilters)]:[3,7];case 6:Xe.sent(),Xe.label=7;case 7:return[4,this.populateExploration(k,L,I,oe,Ee)];case 8:return[2,Xe.sent()];case 9:return Xe.sent(),this.setErrorText(),[3,10];case 10:return[2]}})})},P.prototype.initializeExplorationTheme=function(C){return(0,M.mG)(this,void 0,void 0,function(){var p;return(0,M.Jh)(this,function(v){switch(v.label){case 0:return p=Et.P.cloneThemeCollection(C.themeCollection),this.themeService.isLegacyThemeName(p.customTheme&&p.customTheme.name)&&delete p.customTheme,[4,Et.P.loadThemeAndBaseTheme(this.promiseFactory,this.resourceLoader,this.themeService,C.resourcePackages,p)];case 1:return v.sent(),[2]}})})},P.prototype.createExplorationViewModel=function(C,p){this.explorationNavigation.loadExploration(C);var v=(0,Yn.gI)(C,p);if(v){this.explorationNavigation.goto(v);for(var I=new Mi.y(v),k=(0,yn.UR)(),L=v.visualContainers.length,G=0;G<L;G++){var se=(0,Zn.Dz)(C,I.contract,v.visualContainers[G],0);se.allowDeferredRendering=!0,se.options=this.explorationCapabilities.getCapabilities().visualContainerOptions,k.push(se)}I.visualContainers=k,I.visualContainerGroups=(0,Zn.C)(v.visualContainerGroups,k,0);var z={contract:C,exploreCanvas:I,sections:[]};return this.featureSwitchService.featureSwitches.realTimeRefresh&&!this.featureSwitchService.featureSwitches.realTimeRefreshDisabled&&this.reportRefresh.init(),this.visualTimeSynchronizationService.setAnchorTimeToNow(),z}this.setErrorText()},P.prototype.setDataSources=function(C,p){Bt.fF.assertValue(C,"model"),Bt.fF.assertValue(p,"explorationContract");var v=p.dataSources.withId(C.id);if(!v){var I=Dt.N8;p.dataSources.push(v={type:ke.nKy,id:C.id,name:Dt.N8,dsr:{schemaName:Dt.N8,vsName:C.vsName,dbName:C.dbName,modelId:C.id}});var k=Dt.eM;p.dataSources.push({type:yi.K,id:p.id,name:k,extends:I,exploration:{schemaName:k,extends:I,getModelExtensions:function(){return p.modelExtensions},getDataSourceVariables:function(){return p.dataSourceVariables}}})}this.dataSources.set(p.dataSources)},P.prototype.setErrorText=function(){this.isError=!0,this.errorText=this.localizationService.get("ReportTile_DataUnavailable")},P.getReferencedResourcePackages=function(C,p){Bt.fF.assertValue(C,"exploration");var v=P.getReferencedVisualsInSection(C,p);if(!_.isEmpty(v))return _.filter(C.resourcePackages,function(I){return(0,Xn.JZ)(I)&&v[I.name]})},P.getReferencedVisualsInSection=function(C,p){Bt.fF.assertValue(C,"exploration");var v=C.sections,I={};if(_.isEmpty(v))return I;for(var k=0,L=v;k<L.length;k++){var G=L[k];if(G.id===p){_.map(G.visualContainers,function(se){var z=se&&se.config&&se.config.singleVisual&&se.config.singleVisual.visualType;_.isEmpty(z)||(I[z]=!0)});break}}return I},P.mapCanvasSize=function(C,p){if(C){var v=(0,Yn.oS)(C,p);C.sections&&C.sections[v]&&void 0!==C.sections[v].size.displayOption&&(C.sections[v].size.displayOption=1)}return C},P.\u0275fac=function(p){return new(p||P)(i.\u0275\u0275directiveInject(Fo.L),i.\u0275\u0275directiveInject(Gr.U),i.\u0275\u0275directiveInject(Kr.z),i.\u0275\u0275directiveInject(Qr.D),i.\u0275\u0275directiveInject(Ge.o),i.\u0275\u0275directiveInject(b.t),i.\u0275\u0275directiveInject(pt),i.\u0275\u0275directiveInject(_i.kc),i.\u0275\u0275directiveInject(Si.z),i.\u0275\u0275directiveInject(pn.l6),i.\u0275\u0275directiveInject(un.o),i.\u0275\u0275directiveInject(tn.vZ),i.\u0275\u0275directiveInject(ee.f),i.\u0275\u0275directiveInject(sn.D),i.\u0275\u0275directiveInject(We.y0),i.\u0275\u0275directiveInject(fe.t),i.\u0275\u0275directiveInject(at.J),i.\u0275\u0275directiveInject(Pn.F),i.\u0275\u0275directiveInject(Lo.a),i.\u0275\u0275directiveInject(re.R),i.\u0275\u0275directiveInject(Ii.s),i.\u0275\u0275directiveInject(Pt.Z),i.\u0275\u0275directiveInject(Vo.E),i.\u0275\u0275directiveInject(Ti.B),i.\u0275\u0275directiveInject(Mn.m))},P.\u0275cmp=i.\u0275\u0275defineComponent({type:P,selectors:[["report-tile"]],inputs:{contract:"contract",config:"config",odataFilters:"odataFilters"},features:[i.\u0275\u0275ProvidersFeature((0,M.ev)([],Do.u,!0))],decls:2,vars:3,consts:[["class","explorationContainer reportTile",4,"ngIf"],[1,"explorationContainer","reportTile"],[3,"viewModel","disablePrint","shouldSetFocus","canvasOptions","useOnPushChangeDetection",4,"ngIf"],[3,"errorText",4,"ngIf"],[3,"viewModel","disablePrint","shouldSetFocus","canvasOptions","useOnPushChangeDetection"],[3,"errorText"]],template:function(p,v){1&p&&(i.\u0275\u0275template(0,no,4,4,"div",0),i.\u0275\u0275pipe(1,"async")),2&p&&i.\u0275\u0275property("ngIf",v.contract&&i.\u0275\u0275pipeBind1(1,1,v.jQueryUILoadedPromise))},dependencies:[F.NgIf,eo.$,_o.g,F.AsyncPipe],encapsulation:2}),P}(),Ei=l(77996),On=l(55710),Di=l(34763),Uo=l(63057),oo=l(59787),kn=l(10367),Rn=l(17427),jo=l(28894),ki=l(60473),Ri=l(44408);function Fi(P,C){if(1&P&&i.\u0275\u0275element(0,"mat-icon",7),2&P){var p=i.\u0275\u0275nextContext();i.\u0275\u0275propertyInterpolate("fontIcon",p.menuIcon)}}function Li(P,C){if(1&P&&(i.\u0275\u0275elementStart(0,"span"),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&P){var p=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate(p.label)}}function Vi(P,C){1&P&&i.\u0275\u0275element(0,"hr",16),2&P&&i.\u0275\u0275attribute("aria-hidden",!0)}function Tt(P,C){if(1&P){var p=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",11)(1,"button",12),i.\u0275\u0275listener("click",function(){var G=i.\u0275\u0275restoreView(p).$implicit,se=i.\u0275\u0275nextContext(3);return i.\u0275\u0275resetView(se.clickHandler(G))}),i.\u0275\u0275element(2,"i",13),i.\u0275\u0275elementStart(3,"span",14),i.\u0275\u0275text(4),i.\u0275\u0275elementEnd()(),i.\u0275\u0275template(5,Vi,1,1,"hr",15),i.\u0275\u0275elementEnd()}if(2&P){var v=C.$implicit,I=i.\u0275\u0275nextContext(3);i.\u0275\u0275property("pbiTooltip",v.disabled?v.disabledTooltip:v.tooltip),i.\u0275\u0275advance(1),i.\u0275\u0275property("disabled",!!v.disabled),i.\u0275\u0275attribute("data-testid","tileMenuOptions."+v.iconClass),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngClass",v.iconClass),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(v.text),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",I.isMobileDashboardHost)}}function No(P,C){if(1&P&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Tt,6,6,"div",10),i.\u0275\u0275elementContainerEnd()),2&P){var p=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",p.items)}}function Bi(P,C){1&P&&i.\u0275\u0275element(0,"spinner")}function Ui(P,C){if(1&P&&(i.\u0275\u0275elementContainerStart(0,8),i.\u0275\u0275template(1,No,2,1,"ng-container",9),i.\u0275\u0275template(2,Bi,1,0,"spinner",9),i.\u0275\u0275elementContainerEnd()),2&P){var p=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngSwitch",!!p.items&&p.items.length>0),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngSwitchCase",!0),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngSwitchCase",!1)}}var ji=function(C,p){return{active:C,showOptions:p}},io=[10,7,1,13,3,12,14,11,4,0,2,6,5,8,9],ro=function(){function P(C,p,v,I,k){this.lazyScopedProvider=C,this.store=p,this.pbiFocusTrackerService=v,this.tileoptionsActionsService=I,this.hostEnv=k,this.currentMenuItemIdChange=new i.EventEmitter,this.executionRun=new i.EventEmitter,this.isMobileDashboardHost=!1,this.matMenuPanelClass="",this.subscription=new Di.w}return P.prototype.ngOnInit=function(){return(0,M.mG)(this,void 0,void 0,function(){var C,p;return(0,M.Jh)(this,function(v){switch(v.label){case 0:return(0,$t.mv)(this.dashboard,"Dashboard cannot be null"),this.tileoptionsActionsService?[3,2]:(C=this,[4,this.lazyScopedProvider.get("TileoptionsActionsService")]);case 1:C.tileoptionsActionsService=v.sent(),v.label=2;case 2:return p=this,[4,this.tileoptionsActionsService.getMenuItems({artifact:this.dashboard,tileContract:this.tile,visualDefinition:this.visualDefinition},this.availableActions||io,this.callingContext)];case 3:return p.items=v.sent(),32===this.hostEnv&&(this.matMenuPanelClass="mobile-dashboard-menu",this.isMobileDashboardHost=!0),[2]}})})},P.prototype.ngOnChanges=function(C){var p;return(0,M.mG)(this,void 0,void 0,function(){var v;return(0,M.Jh)(this,function(I){switch(I.label){case 0:return this.tileoptionsActionsService&&C.tile&&C.tile.currentValue&&C.tile.currentValue.action!==(null===(p=C.tile.previousValue)||void 0===p?void 0:p.action)?(v=this,[4,this.tileoptionsActionsService.getMenuItems({artifact:this.dashboard,tileContract:C.tile.currentValue,visualDefinition:this.visualDefinition},this.availableActions||io,this.callingContext)]):[3,2];case 1:v.items=I.sent(),I.label=2;case 2:return[2]}})})},P.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},P.prototype.onMenuOpened=function(){var p,v,C=this;this.currentMenuItemId=(0,Rn.E)(this.dashboard),this.currentMenuItemIdChange.emit({id:this.currentMenuItemId,isOpen:!0}),null===(v=null===(p=this.tileoptionsActionsService)||void 0===p?void 0:p.onContextMenuOpened)||void 0===v||v.call(p,this.dashboard.id,this.tile.id),this.isMobileDashboardHost&&this.subscription.add((0,Uo.T)((0,oo.R)(window,"resize"),(0,oo.R)(window,"blur")).pipe((0,qe.q)(1)).subscribe(function(){return C.matMenuTrigger.closeMenu()}))},P.prototype.onMenuClosed=function(){this.currentMenuItemId=null,this.currentMenuItemIdChange.emit({id:this.currentMenuItemId,isOpen:!1});var C=this.pbiFocusTrackerService.getCurrentFocusedElement();C?.blur()},P.prototype.clickHandler=function(C){this.store.dispatch(new Pe.Ph({id:this.tile.objectId})),C.execute(),this.executionRun.emit(C)},P.\u0275fac=function(p){return new(p||P)(i.\u0275\u0275directiveInject(jo.H),i.\u0275\u0275directiveInject(fn.yh),i.\u0275\u0275directiveInject(ki.K),i.\u0275\u0275directiveInject(kn.y,8),i.\u0275\u0275directiveInject(dn.H))},P.\u0275cmp=i.\u0275\u0275defineComponent({type:P,selectors:[["tileoptions-context-menu"]],viewQuery:function(p,v){var I;(1&p&&i.\u0275\u0275viewQuery(On.D8,5),2&p)&&(i.\u0275\u0275queryRefresh(I=i.\u0275\u0275loadQuery())&&(v.matMenuTrigger=I.first))},inputs:{menuIcon:"menuIcon",label:"label",ariaLabel:"ariaLabel",tooltip:"tooltip",dashboard:"dashboard",availableActions:"availableActions",callingContext:"callingContext",tile:"tile",visualDefinition:"visualDefinition",currentMenuItemId:"currentMenuItemId"},outputs:{currentMenuItemIdChange:"currentMenuItemIdChange",executionRun:"executionRun"},features:[i.\u0275\u0275NgOnChangesFeature],decls:7,vars:13,consts:[["mat-icon-button","","cdkMonitorElementFocus","","data-testid","tile-menu-options-btn","data-testid","more-options-menu-btn",1,"menuTrigger","tileoptionsMenuButton",3,"matMenuTriggerFor","ngClass","menuOpened","menuClosed","click"],["tileoptionsMenuTrigger","matMenuTrigger"],["class","glyph-small",3,"fontIcon",4,"ngIf"],[4,"ngIf"],["data-testid","tile-options-mat-menu","xPosition","after",3,"overlapTrigger"],["tileoptionsMenu","matMenu"],["matMenuContent",""],[1,"glyph-small",3,"fontIcon"],[3,"ngSwitch"],[4,"ngSwitchCase"],["class","tile-menu-item",3,"pbiTooltip",4,"ngFor","ngForOf"],[1,"tile-menu-item",3,"pbiTooltip"],["mat-menu-item","","data-testid","item.iconClass","role","menuitem",3,"disabled","click"],[1,"glyphicon","glyph-small","tile-menu-icon",3,"ngClass"],[1,"itemLabel"],["class","horizontal-line",4,"ngIf"],[1,"horizontal-line"]],template:function(p,v){if(1&p&&(i.\u0275\u0275elementStart(0,"button",0,1),i.\u0275\u0275listener("menuOpened",function(){return v.onMenuOpened()})("menuClosed",function(){return v.onMenuClosed()})("click",function(G){return G.stopPropagation()}),i.\u0275\u0275template(2,Fi,1,1,"mat-icon",2),i.\u0275\u0275template(3,Li,2,1,"span",3),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"mat-menu",4,5),i.\u0275\u0275template(6,Ui,3,3,"ng-template",6),i.\u0275\u0275elementEnd()),2&p){var I=i.\u0275\u0275reference(1),k=i.\u0275\u0275reference(5);i.\u0275\u0275property("matMenuTriggerFor",k)("ngClass",i.\u0275\u0275pureFunction2(10,ji,!0===I.menuOpen,!0===I.menuOpen)),i.\u0275\u0275attribute("aria-label",v.ariaLabel)("title",v.tooltip),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",v.menuIcon),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",v.label),i.\u0275\u0275advance(1),i.\u0275\u0275classMap("artifact-menu "+v.matMenuPanelClass),i.\u0275\u0275property("overlapTrigger",!1)}},dependencies:[F.NgClass,F.NgForOf,F.NgIf,F.NgSwitch,F.NgSwitchCase,On.W0,On.tN,On.D8,On.hd,Ri.Hw],styles:[".mat-menu-panel.artifact-menu{min-height:auto}.menuTrigger[_ngcontent-%COMP%]{background:none;border:none;padding:0;height:20px;width:36px}.menuTrigger[_ngcontent-%COMP%]:hover, .menuTrigger.active[_ngcontent-%COMP%], .menuTrigger.active[_ngcontent-%COMP%]:hover{background-color:transparent}.menuTrigger.cdk-keyboard-focused[_ngcontent-%COMP%], .menuTrigger.cdk-keyboard-focused[_ngcontent-%COMP%]:hover{background-color:var(--fluent-theme-neutral-quarter-alt-color, #E1DFDD)}.menuTrigger[_ngcontent-%COMP%]:focus, .menuTrigger.cdk-keyboard-focused[_ngcontent-%COMP%], .menuTrigger.cdk-program-focused[_ngcontent-%COMP%]{visibility:visible!important;outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color)}.menuTrigger[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{height:18px}.showOptions[_ngcontent-%COMP%]{visibility:visible}button.mat-menu-item[_ngcontent-%COMP%]{color:var(--fluent-theme-neutral-dark-color, #201F1E);height:36px;line-height:19px;padding:8px}button.mat-menu-item[_ngcontent-%COMP%]   .tile-menu-icon[_ngcontent-%COMP%]{vertical-align:middle;margin-right:8px}button.mat-menu-item[_ngcontent-%COMP%]:disabled{color:var(--fluent-theme-neutral-tertia-color, #A19F9D)}",".mobileDashboardConsumption[_nghost-%COMP%]   .menuTrigger[_ngcontent-%COMP%]:focus, .mobileDashboardConsumption   [_nghost-%COMP%]   .menuTrigger[_ngcontent-%COMP%]:focus, .mobileDashboardConsumption[_nghost-%COMP%]   .menuTrigger.cdk-keyboard-focused[_ngcontent-%COMP%], .mobileDashboardConsumption   [_nghost-%COMP%]   .menuTrigger.cdk-keyboard-focused[_ngcontent-%COMP%], .mobileDashboardConsumption[_nghost-%COMP%]   .menuTrigger.cdk-program-focused[_ngcontent-%COMP%], .mobileDashboardConsumption   [_nghost-%COMP%]   .menuTrigger.cdk-program-focused[_ngcontent-%COMP%]{visibility:visible!important;outline:none}  .mat-menu-panel.mobile-dashboard-menu{min-height:46px;background-color:inherit}  .mat-menu-panel.mobile-dashboard-menu .mat-menu-content{padding:8px 11px;background-color:var(--fluentThemeNeutralLighterAltColor)}  .mat-menu-panel.mobile-dashboard-menu .mat-menu-content .mat-menu-item{padding:0 10px;border:none;line-height:36px!important;height:36px!important}  .mat-menu-panel.mobile-dashboard-menu .mat-menu-content .mat-menu-item>*{line-height:36px}  .mat-menu-panel.mobile-dashboard-menu .mat-menu-content .mat-menu-item:hover:not([disabled]),   .mat-menu-panel.mobile-dashboard-menu .mat-menu-content .mat-menu-item.cdk-program-focused:not([disabled]),   .mat-menu-panel.mobile-dashboard-menu .mat-menu-content .mat-menu-item:focus{background-color:var(--fluentThemeNeutralLighterAltColor)}  .mat-menu-panel.mobile-dashboard-menu .mat-menu-content .mat-menu-item .itemLabel{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif;font-size:14px;color:var(--fluentThemeNeutralDarkColor)}  .mat-menu-panel.mobile-dashboard-menu .mat-menu-content .mat-menu-item .tile-menu-icon{color:var(--fluentThemeNeutralDarkColor);margin-right:10px!important;float:left;font-size:var(--lg-font-size, 16px);width:var(--lg-font-size, 16px);height:var(--lg-font-size, 16px)}  .mat-menu-panel.mobile-dashboard-menu .mat-menu-content .mat-menu-item .mat-icon{overflow:visible}  .mat-menu-panel.mobile-dashboard-menu .mat-menu-content .mat-menu-item .mat-icon.glyph-small{font-size:var(--lg-font-size, 16px);width:var(--lg-font-size, 16px);height:var(--lg-font-size, 16px)}  .mat-menu-panel.mobile-dashboard-menu .mat-menu-content .mat-menu-item .mat-icon.glyph-mini{font-size:var(--sm-font-size, 12px);width:var(--sm-font-size, 12px);height:var(--sm-font-size, 12px)}  .mat-menu-panel.mobile-dashboard-menu .mat-menu-content .mat-menu-item .mat-icon.mat-ligature-font[fontIcon]{overflow:auto}  .mat-menu-panel.mobile-dashboard-menu .mat-menu-content .tile-menu-item .horizontal-line{border:.5px solid var(--fluentThemeNeutralQuarterAltColor);display:inherit}  .mat-menu-panel.mobile-dashboard-menu .mat-menu-content .tile-menu-item:last-child .horizontal-line{display:none}"]}),P}(),Ni=l(86663),zo=function(){function P(){}return P.\u0275fac=function(p){return new(p||P)},P.\u0275cmp=i.\u0275\u0275defineComponent({type:P,selectors:[["loading-tile"]],inputs:{messageKey:"messageKey"},decls:3,vars:1,consts:[[1,"body"],["name","powerbi","size","large",1,"logo"],["for","message",3,"localize"]],template:function(p,v){1&p&&(i.\u0275\u0275elementStart(0,"section",0),i.\u0275\u0275element(1,"pbi-icon",1)(2,"label",2),i.\u0275\u0275elementEnd()),2&p&&(i.\u0275\u0275advance(2),i.\u0275\u0275property("localize",v.messageKey))},dependencies:[je.X,Ni._],styles:["[_nghost-%COMP%]{color:var(--neutral-primary-color-alt2, #4a4a4a);font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif;font-size:12px;height:100%;line-height:16px;width:100%;display:block;background-color:var(--white-color, #FFF);overflow:hidden;text-decoration:none}[_nghost-%COMP%]   .body[_ngcontent-%COMP%]{width:100%;height:calc(100% - 46px);display:flex;align-items:center;justify-content:center;flex-wrap:wrap;flex-direction:column}[_nghost-%COMP%]   .body[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{color:var(--neutral-tertiary-alt-color, #C8C8C8)}[_nghost-%COMP%]   .body[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;padding-top:1px}"],changeDetection:0}),P}(),_n=l(22318),Gt=l(14181),$o=function(){function P(){}return P.prototype.filterNotifications=function(C,p){return _.isEmpty(C)?[]:null==(p=p||this.tileId)?C:_.filter(C,function(v){var I=v.message,k=I.filterProperties&&I.filterProperties.TileId;if(_.isEmpty(k))return!1;var L=parseInt(k,10);return(2===v.action.actionType||3===v.action.actionType)&&L===p})},P.\u0275prov=i.\u0275\u0275defineInjectable({token:P,factory:P.\u0275fac=function(p){return new(p||P)},providedIn:"root"}),P}();function zi(P,C){if(1&P&&i.\u0275\u0275element(0,"span",4),2&P){var p=i.\u0275\u0275nextContext(2).$implicit;i.\u0275\u0275property("innerHtml",p.badgeValueSetter(),i.\u0275\u0275sanitizeHtml)}}function $i(P,C){if(1&P){var p=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",2),i.\u0275\u0275listener("click",function(k){i.\u0275\u0275restoreView(p);var L=i.\u0275\u0275nextContext().$implicit,G=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(G.onIconClick(L,k))}),i.\u0275\u0275element(1,"i"),i.\u0275\u0275template(2,zi,1,1,"span",3),i.\u0275\u0275elementEnd()}if(2&P){var v=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275classMapInterpolate1("item-auto ",v.itemClass,""),i.\u0275\u0275propertyInterpolate("testid",v.itemClass),i.\u0275\u0275propertyInterpolate("title",v.tooltip()),i.\u0275\u0275advance(1),i.\u0275\u0275classMapInterpolate1("glyphicon glyph-small ",v.iconClass,""),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",v.hasBadge)}}function Wo(P,C){if(1&P&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,$i,3,9,"button",1),i.\u0275\u0275elementContainerEnd()),2&P){var p=C.$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",p.show())}}var Yt=function(P){function C(p,v,I,k,L){var G=P.call(this)||this;return G.store=p,G.localizationService=v,G.userNotificationInfo=I,G.userNotificationTileFilterService=k,G.tileDisplayService=L,G}return(0,M.ZT)(C,P),C.prototype.ngOnInit=function(){var p=this,v=this.store.select(bt.JW).pipe((0,Lt.R)(this.onDestroy$),(0,Ve.U)(function(I){return!(!I||!I.some(function(k){var L;return k&&k.id===(null===(L=p.contract)||void 0===L?void 0:L.id)}))}));this.icons$=(0,ye.aj)([this.changes$("contract").pipe((0,_n.O)(this.contract)),this.changes$("tileHasWarning").pipe((0,_n.O)(this.tileHasWarning)),this.changes$("warningMessage").pipe((0,_n.O)(this.warningMessage)),v,this.getUnseenCount()]).pipe((0,Ve.U)(function(I){var k=I[0],G=I[2];return{isTemporary:!(!k||!k.isTemporary),tileType:k&&k.type,warningToolTip:G&&G.tooltip,notificationsCount:I[4],isSpotlightSet:I[3],hasWarning:!!I[1]}}),(0,gt.x)(function(I,k){return _.isEqual(I,k)}),(0,Ve.U)(function(I){return p.getIcons(I)}))},C.prototype.getIcons=function(p){return function(P,C){Bt.fF.assertValue(P,"createOptions");var p=P.localizationService;return[{iconClass:"pbi-glyph-securityalert",show:P.showWebContent,itemClass:"webContentIcon",tooltip:function(){return p.get("WebContentWarning_Widget")},action:2,hasBadge:!1},{iconClass:"pbi-glyph-warning",show:P.showWarning,itemClass:C?"showWarningIcon":"warningIcon",tooltip:P.warningToolTipSetter,action:1,hasBadge:!1},{iconClass:"pbi-glyph-bell",show:P.showNotifications,itemClass:"notifications",tooltip:function(){return p.get("Alerts_NotificationTooltip")},action:0,badgeValueSetter:P.badgeTextSetter,hasBadge:!0},{iconClass:"pbi-glyph-realtime",show:P.showRealTime,itemClass:"",tooltip:function(){return p.get("Realtime_IconHoverText")},hasBadge:!1}]}({badgeTextSetter:function(){return p.notificationsCount+""},localizationService:this.localizationService,showNotifications:function(){return p.notificationsCount>0},showWarning:function(){return p.hasWarning},showWebContent:function(){return p.tileType===y.YU.iframe&&!p.isTemporary},showRealTime:function(){return p.tileType===y.YU.realTime},warningToolTipSetter:function(){return p.warningToolTip}},p.isSpotlightSet)},C.prototype.getUnseenCount=function(){var v,p=this,I=null===(v=this.contract)||void 0===v?void 0:v.id,k=this.userNotificationInfo;return I&&k&&k.notifications$?k.notifications$.pipe((0,Ve.U)(function(L){var G,se=null!==(G=L?.notifications)&&void 0!==G?G:[];return _.filter(p.userNotificationTileFilterService.filterNotifications(se,I),function(oe){return!oe.seen}).length},(0,_n.O)(0))):(0,we.of)(0)},C.prototype.onIconClick=function(p,v){if(v.stopPropagation&&v.stopPropagation(),v.preventDefault(),null!=p.action)switch(p.action){case 0:this.store.dispatch(new Gt.MM({sidePaneType:7}));break;case 2:this.tileDisplayService.onErrorIconClicked({message:p.tooltip()});break;case 1:this.tileDisplayService.onErrorIconClicked({isError:void 0,errorTitle:void 0,errorDetails:void 0,message:p.tooltip()});break;default:Bt.fF.assertFail("Unrecognized/unsupported icon action.")}},C.\u0275fac=function(v){return new(v||C)(i.\u0275\u0275directiveInject(fn.yh),i.\u0275\u0275directiveInject(Ge.o),i.\u0275\u0275directiveInject(_t.r),i.\u0275\u0275directiveInject($o),i.\u0275\u0275directiveInject(Ht.k))},C.\u0275cmp=i.\u0275\u0275defineComponent({type:C,selectors:[["tile-icon"]],inputs:{contract:"contract",tileHasWarning:"tileHasWarning",warningMessage:"warningMessage"},features:[i.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:[[4,"ngFor","ngForOf"],[3,"testid","class","title","click",4,"ngIf"],[3,"testid","title","click"],["class","badge",3,"innerHtml",4,"ngIf"],[1,"badge",3,"innerHtml"]],template:function(v,I){1&v&&(i.\u0275\u0275template(0,Wo,2,1,"ng-container",0),i.\u0275\u0275pipe(1,"async")),2&v&&i.\u0275\u0275property("ngForOf",i.\u0275\u0275pipeBind1(1,1,I.icons$))},dependencies:[F.NgForOf,F.NgIf,F.AsyncPipe],styles:[".webContentIcon[_ngcontent-%COMP%]{left:4px;top:1px;z-index:2;color:var(--fluent-theme-neutral-secondary-alt-color, #767676)}.webContentCorner[_ngcontent-%COMP%]{display:block;position:absolute;background:var(--fluent-theme-white-color, #FFF);width:60px;height:60px;top:-30px;left:-30px;transform:rotate(45deg);z-index:1;border:1px solid var(--fluent-theme-neutral-light-color, #EDEBE9)}.warningIcon[_ngcontent-%COMP%]{color:var(--fluent-theme-primary-color, #F2C811);display:none}.warningIcon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--fluent-theme-primary-color, #F2C811)}.showWarningIcon[_ngcontent-%COMP%]{color:var(--fluent-theme-primary-color, #F2C811);display:block}.showWarningIcon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--fluent-theme-primary-color, #F2C811)}",".mobileDashboard.noTitle[_nghost-%COMP%]   .webContentIcon[_ngcontent-%COMP%], .mobileDashboard   .noTitle[_nghost-%COMP%]   .webContentIcon[_ngcontent-%COMP%]{left:4px;top:1px;z-index:2}.mobileDashboard[_nghost-%COMP%]   .webContentIcon[_ngcontent-%COMP%], .mobileDashboard   [_nghost-%COMP%]   .webContentIcon[_ngcontent-%COMP%]{color:var(--fluent-theme-neutral-secondary-alt-color, #767676);position:inherit}.mobileDashboard[_nghost-%COMP%]   .warningIcon[_ngcontent-%COMP%], .mobileDashboard   [_nghost-%COMP%]   .warningIcon[_ngcontent-%COMP%]{color:var(--fluent-theme-primary-color, #F2C811);display:block}.mobileDashboard[_nghost-%COMP%]   .warningIcon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .mobileDashboard   [_nghost-%COMP%]   .warningIcon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--fluent-theme-primary-color, #F2C811)}.mobileDashboard[_nghost-%COMP%]   .item-auto.notifications[_ngcontent-%COMP%], .mobileDashboard   [_nghost-%COMP%]   .item-auto.notifications[_ngcontent-%COMP%]{display:none}"],changeDetection:0}),C}(Ct.w),Ho=l(85102);function Wi(P,C){1&P&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"loading-tile",4),i.\u0275\u0275elementContainerEnd()),2&P&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("messageKey","PermissionCenter_LoadingTile"))}function Go(P,C){1&P&&i.\u0275\u0275element(0,"permission-locked-tile")}function nn(P,C){if(1&P&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Wi,2,1,"ng-container",2),i.\u0275\u0275template(2,Go,1,0,"ng-template",null,3,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementContainerEnd()),2&P){var p=i.\u0275\u0275reference(3),v=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!v.isRefreshPermission())("ngIfElse",p)}}function Ko(P,C){if(1&P&&i.\u0275\u0275element(0,"license-blocker",23),2&P){var p=i.\u0275\u0275nextContext(3);i.\u0275\u0275property("visualType",null==p.visualDefinition?null:p.visualDefinition.type)("tileObjectId",p.contract.objectId)}}function Tn(P,C){if(1&P&&i.\u0275\u0275element(0,"license-environment-blocker",24),2&P){var p=i.\u0275\u0275nextContext(3);i.\u0275\u0275property("visualType",null==p.visualDefinition?null:p.visualDefinition.type)}}function Qo(P,C){if(1&P){var p=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"license-banner",25),i.\u0275\u0275listener("isAnimationDone",function(){i.\u0275\u0275restoreView(p);var k=i.\u0275\u0275nextContext(3);return i.\u0275\u0275resetView(k.licenseUIManager.clearBanner())}),i.\u0275\u0275pipe(1,"async"),i.\u0275\u0275elementEnd()}if(2&P){var v=i.\u0275\u0275nextContext(3);i.\u0275\u0275property("featureBlockedTooltip",v.licenseUIManager.featureBlockedTooltip)("shouldStartBannerLeaveAnimation",i.\u0275\u0275pipeBind1(1,3,v.licenseUIManager.shouldStartBannerLeaveAnimation$))("visualType",null==v.visualDefinition?null:v.visualDefinition.type)}}function Hi(P,C){if(1&P&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Ko,1,2,"license-blocker",20),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275template(3,Tn,1,1,"license-environment-blocker",21),i.\u0275\u0275pipe(4,"async"),i.\u0275\u0275template(5,Qo,2,5,"license-banner",22),i.\u0275\u0275pipe(6,"async"),i.\u0275\u0275elementContainerEnd()),2&P){var p=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(2,3,p.licenseUIManager.shouldDisplayLicenseBlocker$)),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(4,5,p.licenseUIManager.shouldDisplayLicenseEnvironmentBlocker$)),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(6,7,p.licenseUIManager.shouldDisplayFeatureBlockedBanner$))}}function Gi(P,C){1&P&&(i.\u0275\u0275elementStart(0,"div",26),i.\u0275\u0275element(1,"div",27),i.\u0275\u0275elementStart(2,"button",28),i.\u0275\u0275element(3,"i",29),i.\u0275\u0275elementEnd()())}function Ki(P,C){1&P&&(i.\u0275\u0275elementStart(0,"span",30),i.\u0275\u0275text(1,"\u2022"),i.\u0275\u0275elementEnd())}function Jr(P,C){if(1&P){var p=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",31),i.\u0275\u0275listener("click",function(I){i.\u0275\u0275restoreView(p);var k=i.\u0275\u0275nextContext(2);return i.\u0275\u0275resetView(k.onSelectTileConversations(I))}),i.\u0275\u0275element(1,"i",32),i.\u0275\u0275elementEnd()}}var Qi=function(C){return{showUnpin:C}};function qi(P,C){if(1&P){var p=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",35),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(p);var k=i.\u0275\u0275nextContext(3);return i.\u0275\u0275resetView(k.onUnpinTileMobileView.emit(k.contract))}),i.\u0275\u0275pipe(1,"localize"),i.\u0275\u0275pipe(2,"localize"),i.\u0275\u0275elementEnd()}if(2&P){var v=i.\u0275\u0275nextContext(3);i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction1(7,Qi,v.focusedTileObjId===(null==v.contract?null:v.contract.objectId)))("title",i.\u0275\u0275pipeBind1(2,5,"DashboardTile_unpinTile")),i.\u0275\u0275attribute("aria-label",i.\u0275\u0275pipeBind1(1,3,"DashboardTile_unpinTile"))}}function on(P,C){if(1&P){var p=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",36),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(p);var I=i.\u0275\u0275nextContext(3);return i.\u0275\u0275resetView(I.onPinTileMobileView.emit(I.contract))}),i.\u0275\u0275pipe(1,"localize"),i.\u0275\u0275elementEnd()}2&P&&i.\u0275\u0275property("title",i.\u0275\u0275pipeBind1(1,1,"DashboardTile_ToggleVisibility"))}function In(P,C){if(1&P&&(i.\u0275\u0275elementStart(0,"section"),i.\u0275\u0275template(1,qi,3,9,"button",33),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275template(3,on,2,3,"button",34),i.\u0275\u0275pipe(4,"async"),i.\u0275\u0275elementEnd()),2&P){var p=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!i.\u0275\u0275pipeBind1(2,2,p.isUnpinnedTileMobileView$)),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(4,4,p.isUnpinnedTileMobileView$))}}function Ji(P,C){if(1&P){var p=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tileoptions-context-menu",37),i.\u0275\u0275listener("currentMenuItemIdChange",function(k){i.\u0275\u0275restoreView(p);var L=i.\u0275\u0275nextContext(2);return i.\u0275\u0275resetView(L.onMenuItemChanged(k))}),i.\u0275\u0275pipe(1,"localize"),i.\u0275\u0275pipe(2,"localize"),i.\u0275\u0275elementEnd()}if(2&P){var v=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("dashboard",v.dashboard)("tile",v.contract)("ariaLabel",i.\u0275\u0275pipeBind1(1,5,"Options_Menu"))("tooltip",i.\u0275\u0275pipeBind1(2,7,"Options_Menu"))("visualDefinition",v.visualDefinition)}}function Yi(P,C){1&P&&(i.\u0275\u0275elementStart(0,"div",47),i.\u0275\u0275element(1,"div",48),i.\u0275\u0275elementEnd())}function Zi(P,C){if(1&P){var p=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"visual-modern",50),i.\u0275\u0275listener("click",function(k){i.\u0275\u0275restoreView(p);var L=i.\u0275\u0275nextContext(4);return i.\u0275\u0275resetView(L.onVisualModernClick(k))})("visualReady",function(){i.\u0275\u0275restoreView(p);var k=i.\u0275\u0275nextContext(4);return i.\u0275\u0275resetView(k.onVisualDataChanged())}),i.\u0275\u0275elementEnd()}if(2&P){var v=i.\u0275\u0275nextContext(4);i.\u0275\u0275property("viewModel",v.visualDefinition)("supportsScreenReader",!0)("allowDeferredRendering",v.allowDeferredRendering)("supportsKeyboardNavigation",!1)("useOnPushChangeDetection",!0)}}function qo(P,C){if(1&P&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Zi,1,5,"visual-modern",49),i.\u0275\u0275elementContainerEnd()),2&P){var p=i.\u0275\u0275nextContext(3);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",p.visualDefinition&&p.themeLoaded)}}function Xi(P,C){if(1&P&&i.\u0275\u0275element(0,"image-tile",51),2&P){var p=i.\u0275\u0275nextContext().ngIf,v=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("imageUrl",null==p?null:p.imageUrl)("altText",v.getAltText(p))}}function er(P,C){if(1&P&&i.\u0275\u0275element(0,"ssrs-tile",52),2&P){var p=i.\u0275\u0275nextContext().ngIf;i.\u0275\u0275property("imageUrl",null==p?null:p.imageUrl)}}function ao(P,C){if(1&P&&i.\u0275\u0275element(0,"iframe-tile",53),2&P){var p=i.\u0275\u0275nextContext().ngIf;i.\u0275\u0275property("viewModel",p)("embedCode",p.embedCode)}}function tr(P,C){1&P&&i.\u0275\u0275element(0,"model-tile")}function Fn(P,C){if(1&P&&i.\u0275\u0275element(0,"workbook-tile",54),2&P){var p=i.\u0275\u0275nextContext(3);i.\u0275\u0275property("viewModel",p.contract)("config",p.contract.$config)}}function Ln(P,C){if(1&P&&i.\u0275\u0275element(0,"pbi-lazy-load",56),2&P){var p=i.\u0275\u0275nextContext(4);i.\u0275\u0275property("modulePath",p.realTimeTileLazyPath)("componentId",p.RealTimeTileComponentId)("inputArgs",p.realTimeTileModernInputArgs)("outputArgs",p.realTimeOutputArgs)}}function Vn(P,C){if(1&P&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Ln,1,4,"pbi-lazy-load",55),i.\u0275\u0275elementContainerEnd()),2&P){var p=i.\u0275\u0275nextContext(3);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",null==p.realTimeTileModernInputArgs?null:p.realTimeTileModernInputArgs.initialVisual)}}function so(P,C){if(1&P){var p=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"report-tile",57),i.\u0275\u0275listener("click",function(k){i.\u0275\u0275restoreView(p);var L=i.\u0275\u0275nextContext(3);return i.\u0275\u0275resetView(L.onReportTileBodyClick(k))}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()}if(2&P){var v=i.\u0275\u0275nextContext(3);i.\u0275\u0275advance(1),i.\u0275\u0275property("contract",v.contract)("odataFilters",v.odataFilters)("config",v.contract.$config)}}function nr(P,C){if(1&P&&i.\u0275\u0275element(0,"error-placeholder",58),2&P){var p=i.\u0275\u0275nextContext(3);i.\u0275\u0275property("errorText",p.tileErrorDetails.message)("errorDetails",p.tileErrorDetails.showSeeDetails?p.tileErrorDetails:null)("tileType",p.contract.type)}}var wn=function(C,p,v,I){return{interactionDisabled:C,paddedTile:p,textboxTile:v,"license-blockers-element-style":I}};function Bn(P,C){if(1&P&&(i.\u0275\u0275elementStart(0,"div",38),i.\u0275\u0275pipe(1,"async"),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275template(3,Yi,2,0,"div",39),i.\u0275\u0275elementContainerStart(4,40),i.\u0275\u0275template(5,qo,2,1,"ng-container",41),i.\u0275\u0275template(6,Xi,1,2,"image-tile",42),i.\u0275\u0275template(7,er,1,1,"ssrs-tile",43),i.\u0275\u0275template(8,ao,1,2,"iframe-tile",44),i.\u0275\u0275template(9,tr,1,0,"model-tile",41),i.\u0275\u0275template(10,Fn,1,2,"workbook-tile",45),i.\u0275\u0275template(11,Vn,2,1,"ng-container",41),i.\u0275\u0275template(12,so,2,3,"ng-container",41),i.\u0275\u0275template(13,nr,1,3,"error-placeholder",46),i.\u0275\u0275elementContainerEnd(),i.\u0275\u0275elementEnd()),2&P){var p=i.\u0275\u0275nextContext(2);i.\u0275\u0275classProp("compositeTileBody",p.contract.type===p.tileType.composite),i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction4(18,wn,p.inEditMobileLayoutMode,p.contract.type===p.tileType.composite,(null==p.visualDefinition?null:p.visualDefinition.type)===p.plugins.textbox.name,i.\u0275\u0275pipeBind1(1,14,p.licenseUIManager.shouldDisplayLicenseBlocker$)||i.\u0275\u0275pipeBind1(2,16,p.licenseUIManager.shouldDisplayLicenseEnvironmentBlocker$))),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",p.contract.type===p.tileType.composite?p.isLoading||!p.themeLoaded:p.isLoading),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngSwitch",p.contract.type),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngSwitchCase",p.tileType.composite),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngSwitchCase",p.tileType.image),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngSwitchCase",p.tileType.ssrs),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngSwitchCase",p.tileType.iframe),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngSwitchCase",p.tileType.model),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngSwitchCase",p.tileType.workbook),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngSwitchCase",p.tileType.realTime),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngSwitchCase",p.tileType.report),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",p.tileErrorDetails&&!p.shouldShowTileVisual(p.contract))}}function or(P,C){1&P&&(i.\u0275\u0275element(0,"div",59),i.\u0275\u0275pipe(1,"localize")),2&P&&i.\u0275\u0275attribute("aria-label",i.\u0275\u0275pipeBind1(1,1,"New_Capitalized"))}var ir=function(C,p){return{sensitivityBanner:C,sensitivityBannerExpanded:p}},rr=function(C){return{showOptions:C}};function Jo(P,C){if(1&P){var p=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Hi,7,9,"ng-container",1),i.\u0275\u0275elementStart(2,"div",5),i.\u0275\u0275pipe(3,"async"),i.\u0275\u0275pipe(4,"async"),i.\u0275\u0275pipe(5,"async"),i.\u0275\u0275template(6,Gi,4,0,"div",6),i.\u0275\u0275pipe(7,"async"),i.\u0275\u0275elementStart(8,"header",7),i.\u0275\u0275listener("click",function(k){i.\u0275\u0275restoreView(p);var L=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(L.onTileHeaderClick(k))}),i.\u0275\u0275element(9,"tile-icon",8),i.\u0275\u0275elementStart(10,"div",9)(11,"section")(12,"div",10),i.\u0275\u0275pipe(13,"async"),i.\u0275\u0275text(14),i.\u0275\u0275pipe(15,"async"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(16,"div",11)(17,"span",12),i.\u0275\u0275pipe(18,"async"),i.\u0275\u0275text(19),i.\u0275\u0275pipe(20,"async"),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(21,Ki,2,0,"span",13),i.\u0275\u0275pipe(22,"async"),i.\u0275\u0275pipe(23,"async"),i.\u0275\u0275elementStart(24,"span",14),i.\u0275\u0275pipe(25,"async"),i.\u0275\u0275text(26),i.\u0275\u0275pipe(27,"async"),i.\u0275\u0275elementEnd()()(),i.\u0275\u0275template(28,Jr,2,0,"button",15),i.\u0275\u0275elementEnd()(),i.\u0275\u0275template(29,In,5,6,"section",1),i.\u0275\u0275elementStart(30,"div",16),i.\u0275\u0275template(31,Ji,3,9,"tileoptions-context-menu",17),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(32,Bn,14,23,"div",18),i.\u0275\u0275pipe(33,"async"),i.\u0275\u0275template(34,or,2,3,"div",19),i.\u0275\u0275pipe(35,"async"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()}if(2&P){var v=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",v.licenseUIManager),i.\u0275\u0275advance(1),i.\u0275\u0275classProp("largeHeader",v.isLargeHeader)("noTitle",!i.\u0275\u0275pipeBind1(3,33,v.hasTitle$))("noSubtitle",!i.\u0275\u0275pipeBind1(4,35,v.hasSubtitle$)&&i.\u0275\u0275pipeBind1(5,37,v.hasTitle$)),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngIf",(null==v.contract?null:v.contract.type)===v.tileType.iframe&&!i.\u0275\u0275pipeBind1(7,39,v.hasTitle$)),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction2(61,ir,v.hasSensitivityBanner&&!v.hasExpandSensitivityBanner,v.hasExpandSensitivityBanner)),i.\u0275\u0275advance(1),i.\u0275\u0275property("contract",v.contract)("tileHasWarning",v.tileHasWarning)("warningMessage",v.warning),i.\u0275\u0275advance(3),i.\u0275\u0275styleMap(v.tileHeaderStyle),i.\u0275\u0275property("title",i.\u0275\u0275pipeBind1(13,41,v.title$)),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(15,43,v.title$)),i.\u0275\u0275advance(3),i.\u0275\u0275styleMap(v.tileHeaderStyle),i.\u0275\u0275property("title",i.\u0275\u0275pipeBind1(18,45,v.subTitle$)),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(20,47,v.subTitle$)),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(22,49,v.subTitle$)&&i.\u0275\u0275pipeBind1(23,51,v.refreshTime$)),i.\u0275\u0275advance(3),i.\u0275\u0275styleMap(v.tileHeaderStyle),i.\u0275\u0275property("title",i.\u0275\u0275pipeBind1(25,53,v.refreshTime$)),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(27,55,v.refreshTime$)),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",v.showComments),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",v.inEditMobileLayoutMode),i.\u0275\u0275advance(1),i.\u0275\u0275styleMap(v.tileBackground),i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction1(64,rr,!v.isMouseoverSupported||v.focusedTileObjId===(null==v.contract?null:v.contract.objectId)||v.isMenuOpen)),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",v.displayDashboardTileOpenOptions()&&!v.isLoading),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(33,57,v.viewModel$)),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(35,59,v.isNewMobileTile$))}}var Yr=function(C,p,v){return{selectedTile:C,hideSpotlight:p,smallTitleWidth:v}},Un=function(P){function C(p,v,I,k,L,G,se,z,oe,Ee,Mt,ot,Xe,et,Zt,Nt,rn,hn,lo,jn,co,po,uo,ho,ar,sr,lr,cr,dr,pr,Zo,ur,hr){var go,Q=this;(Q=P.call(this)||this).elementRef=p,Q.featureSwitchService=v,Q.visualPlugins=I,Q.themeService=k,Q.dashboardThemeService=L,Q.ref=G,Q.tileConfigService=se,Q.tileDataService=z,Q.shellCapabilities=oe,Q.localizationService=Ee,Q.userNotificationInfo=Mt,Q.promiseFactory=ot,Q.resourceLoader=Xe,Q.resourcePackagesService=et,Q.globalEventBridge=Zt,Q.eventBridge=Nt,Q.licenseUIManagerFactory=rn,Q.licenseEnforcementService=hn,Q.userInfo=lo,Q.scriptVisuals=jn,Q.tileUtilService=co,Q.tileDisplayService=po,Q.store=uo,Q.reportStore=ho,Q.telemetryService=ar,Q.platformCapabilities=sr,Q.managedCustomVisualsService=lr,Q.approvedResourceService=cr,Q.trustedVisual=dr,Q.networkAvailability=pr,Q.tileDataUtilsService=Zo,Q.hostEnv=ur,Q.tileHeaderClickService=hr,Q.themeName=null,Q.onSelectConverstations=new i.EventEmitter,Q.onErrorAdd=new i.EventEmitter,Q.onErrorRemove=new i.EventEmitter,Q.onPinTileMobileView=new i.EventEmitter,Q.onUnpinTileMobileView=new i.EventEmitter,Q.currentRetry=0,Q.plugins=Ie.L,Q.tileType=y.YU,Q.allowDeferredRendering=!1,Q.isOnPushChangeDetection=!0,Q.RealTimeTileComponentId="RealTimeTileComponentNewId",Q.realTimeTileLazyPath="@powerbi/RealTime/real-time.module#RealTimeModule",Q.isTileDisabledSubject=new le.t(1),Q.isLoading=!0,Q.themeLoaded=!1,Q.isSmallTitleWidth=!1,Q.visualDefChanged$=new le.t,Q.visualDefDataError$=new me.X(null),Q.isMenuOpen=!1,Q.isExportError=!1,Q.isMouseoverSupported=Q.platformCapabilities.supportsMouseover;var mo,Xo=K.s.parseQueryString(window.location.search);return Q.disableSensitivityBanner="true"===Xo.disableSensitivityBanner,Q.licenseUIManager=Q.licenseUIManagerFactory.create(),Q.globalSubscriptionManager=Q.globalEventBridge.createChannelSubscriptionManager().subscribe(ct.lH,function(kt,xn){Q.handleSensitivity(xn)}),Q.globalSubscriptionManager.subscribe(ct.m,function(kt,xn){Q.contract.type===y.YU.composite&&_.find(xn.modelIds,function(gr){return Q.contract.modelId===gr})&&(Q.tileErrorDetails={message:Q.localizationService.get("Tile_RLS_NoAccess"),displayableErrorInfo:[]},Q.isError=!0,Q.visualDefinition=null,Q.ref.markForCheck())}),null===(go=Q.eventBridge)||void 0===go||go.createChannelSubscriptionManager().subscribe(ct.OM,function(kt,xn){Q.refreshViewPortSize(xn),Q.ref.markForCheck()}),Q.userNotificationInfo.registerNotificationsUpdatedListener&&Q.userNotificationInfo.registerNotificationsUpdatedListener(function(){return Q.onNotificationsUpdated()}).then(function(kt){mo=kt}),Q.onDestroy$.subscribe(function(){var kt;null===(kt=Q.resizeObserver)||void 0===kt||kt.disconnect(),Q.globalSubscriptionManager.unsubscribeAll(),mo&&mo()}),Q.visualDefChanged$.next(!1),Q}return(0,M.ZT)(C,P),C.prototype.onVisualDataChanged=function(){this.globalEventBridge.publishToChannel(X.z.tileVisualLoadedEventName,{objectId:this.contract.objectId})},C.prototype.isTileLocked=function(p){return 20===p},C.prototype.isRefreshPermission=function(){return this.userInfo.isUserMetadataRefreshed},C.prototype.refreshViewPortSize=function(p){var v;void 0===p&&(p=1);var I=this.elementRef.nativeElement.querySelector(".tile-body");I&&(this.viewPort={height:I.clientHeight,width:I.clientWidth,scale:p},this.visualDefinition&&this.contract.type!==y.YU.realTime?(this.visualDefinition.viewport=this.viewPort,this.allowDeferredRendering=!this.visualPlugins.isLightWeightRenderingVisual(this.visualDefinition.type)):(null===(v=this.contract)||void 0===v?void 0:v.type)===y.YU.realTime&&this.realTimeTileModernInputArgs&&this.realTimeTileModernInputArgs.initialVisual&&(this.realTimeTileModernInputArgs.initialVisual.viewport=this.viewPort))},C.prototype.refreshTileBodySize=function(){var p=this.elementRef.nativeElement.querySelector(".tile-body");!p||!this.tileBodyViewPort||(this.availableTileBodyHeight>this.tileBodyViewPort.height&&(p.style.height=this.tileBodyViewPort.height.toString()+"px"),this.availableTileBodyWidth>this.tileBodyViewPort.width&&(p.style.width=this.tileBodyViewPort.width.toString()+"px"),this.refreshViewPortSize())},C.prototype.ngOnInit=function(){var p=this;this.subscribeToTile(),this.onChanges$.subscribe(function(v){v.themeName&&v.themeName.currentValue!==v.themeName.previousValue&&p.applyTheme(),v.tileBodyViewPort&&v.tileBodyViewPort.currentValue!==v.tileBodyViewPort.previousValue&&p.refreshTileBodySize()})},C.prototype.ngAfterViewInit=function(){var p=this,v=this.elementRef.nativeElement.querySelector(".tile-body");v&&(this.availableTileBodyHeight=v.clientHeight,this.availableTileBodyWidth=v.clientWidth),this.refreshTileBodySize(),(this.inEditMobileLayoutMode||32===this.hostEnv)&&(this.resizeObserver=new ResizeObserver(function(){p.calculateSmallTileWidth(),p.ref.detectChanges()}),this.resizeObserver.observe(this.elementRef.nativeElement.querySelector(".tileLayout")),this.calculateSmallTileWidth(),this.ref.detectChanges())},C.prototype.displayDashboardTileOpenOptions=function(){return!this.disableInteractions&&(!!(0,N.I$)()||(!this.isTileLocked(this.contract.errorCode)||!this.isReadOnly())&&this.contract&&!this.contract.isTemporary&&!this.inEditMobileLayoutMode)},C.prototype.isReadOnly=function(){return!(0,x.cl)(this.dashboard)||this.disableInteractions},C.prototype.applyTheme=function(){var p,v,I,k=null===(p=this.contract)||void 0===p?void 0:p.type;if(k===y.YU.composite&&this.visualDefinition){var L=this.visualDefinition.themeCollection,G=null===(v=L?.customTheme)||void 0===v?void 0:v.name;if(this.shouldOverrideCustomTheme||!this.isCustomThemeFromReport(G)){var se=null===(I=this.dashboard)||void 0===I?void 0:I.objectId,z=this.themeName||se&&this.dashboardThemeService.getDashboardThemeName(se);if(!z)return this.tileStyle=void 0,this.tileHeaderStyle=void 0,this.tileBackground=void 0,delete this.visualDefinition.themeCollection.customTheme,void(this.shouldOverrideCustomTheme?(this.visualDefinition.themeCollection.customTheme=(0,ce.Mi)(z,1),this.themeLoaded=!0):this.ensureThemeLoaded());this.tileStyle=this.dashboardThemeService.getTileStyles(z),this.tileHeaderStyle=_.pick(this.tileStyle,Ue.dj),this.tileBackground=_.pick(this.tileStyle,Ue.CB),this.visualDefinition.themeCollection.customTheme=(0,ce.Mi)(z,1),this.ensureThemeLoaded()}else this.ensureThemeLoaded()}else this.themeLoaded=!!this.visualDefinition||k!==y.YU.composite},C.prototype.updateVisualInteractivityOptions=function(p){if(p.type===y.YU.composite&&this.visualDefinition){var v=this.visualPlugins.getInteractivityOptions(this.visualDefinition.type);typeof v.mobileTileInteractive<"u"&&(v.mobileTileInteractive=v.mobileTileInteractive&&this.mobileTileInteractive),this.visualDefinition.interactivityOptions=v}},C.prototype.isCustomThemeFromReport=function(p){return p&&!this.dashboardThemeService.isBuiltInTheme(p)&&!this.dashboardThemeService.isLegacyThemeName(p)&&!this.dashboardThemeService.getTheme(p)},C.prototype.ensureThemeLoaded=function(){var p;this.dashboardThemeService&&this.dashboard&&this.dashboardThemeService.isDashboardThemeLoaded?this.dashboardThemeService.isDashboardThemeLoaded(null===(p=this.dashboard)||void 0===p?void 0:p.objectId)&&this.loadThemeAndBaseTheme():this.loadThemeAndBaseTheme()},C.prototype.loadThemeAndBaseTheme=function(){var p=this;if(32===this.hostEnv&&!this.networkAvailability.isNetworkAvailable())return this.themeLoaded=!0,void this.ref.markForCheck();Et.P.loadThemeAndBaseTheme(this.promiseFactory,this.resourceLoader,this.themeService,this.resourcePackagesService.getAllPackages(),this.visualDefinition.themeCollection).finally(function(){p.themeLoaded=!0,p.ref.markForCheck()})},C.prototype.customVisualValidation=function(p,v){return(0,M.mG)(this,void 0,void 0,function(){var I,k,L,G,se=this;return(0,M.Jh)(this,function(z){switch(z.label){case 0:return p.type!==y.YU.composite?(this.isTileDisabledSubject.next(!1),[2]):(this.validateExportTileDisplayError(v),I=(0,A.s)(v),this.trustedVisual.isEsriVisual(I)&&(k=this.trustedVisual.validate(I))?(this.globalSubscriptionManager.subscribe(ht.W,function(oe,Ee){_.includes(Ee.visualTypes,I)&&(se.onClearTileError(),se.isTileDisabledSubject.next(!1))}),k.hideGetHelpLink=!1,k.showSeeDetails=!0,this.onTileError({error:k.message,errorDetails:k}),[2]):this.visualPlugins.getPlugin(I)&&!this.visualPlugins.isCustomVisual(I)?(this.isTileDisabledSubject.next(!1),[2]):[4,this.managedCustomVisualsService.isPublicManagedVisualByVisualType(I)]);case 1:return L=z.sent(),(G=(0,J.jK)(this.featureSwitchService,I,this.approvedResourceService,!1,L))||(0,J.qe)(I)?(this.validateVisualPluginHandler(I,G),[2]):(this.isTileDisabledSubject.next(!1),[2])}})})},C.prototype.validateVisualPluginHandler=function(p,v){var I=this;this.resourcePackagesService.getPackage(p)&&!this.visualPlugins.getPlugin(p)?this.globalSubscriptionManager.subscribe(ht.W,function(k,L){_.includes(L.visualTypes,p)?I.validateVisualPlugin(p,v):I.isTileDisabledSubject.next(!1)}):this.validateVisualPlugin(p,v)},C.prototype.validateVisualPlugin=function(p,v){if(this.visualPlugins.isCustomVisual(p)){if(v)return void this.showCustomVisualDisabledMessage();if((0,J.qe)(p)&&!this.resourcePackagesService.getPackage(p))return void this.showCustomVisualDeletedMessage()}this.isTileDisabledSubject.next(!1)},C.prototype.showCustomVisualDisabledMessage=function(){var p,v,I,k=this.localizationService.get("ContactYourAdministratorForDetails"),L=this.featureSwitchService.featureSwitches;L.customVisualsTenantSwitch&&!L.customVisualsTenantEnabled?(p=this.localizationService.get("VisualContainer_CustomVisualDisabledByAdmin"),v="https://go.microsoft.com/fwlink/?linkid=2100000",I=this.localizationService.get("VisualContainer_CustomVisualDisabledByAdmin_tileDetails")):(p=this.localizationService.get("VisualContainer_UncertifiedDisabledValue"),v="https://go.microsoft.com/fwlink/?linkid=2002010&clcid=0x409",I=this.localizationService.get("VisualContainer_UncertifiedDisabledValue_tileDetails"));var G={message:p,displayableErrorInfo:[{errorInfoKey:I,errorInfoValue:k}],hideAdditionalErrorInfo:!0,hideGetHelpLink:!1,helpLink:v,showSeeDetails:!0};this.visualDefinition=null,this.isTileDisabledSubject.next(!0),this.onTileError({error:I,errorDetails:G})},C.prototype.showCustomVisualDeletedMessage=function(){var p=this.localizationService.get("CustomVisualsAreNotAvailable"),v=this.localizationService.get("ServiceError_CannotLoadVisual"),k={message:p,displayableErrorInfo:[{errorInfoKey:v,errorInfoValue:this.localizationService.get("CustomVisualsAreNotAvailable")}],hideAdditionalErrorInfo:!0,hideGetHelpLink:!1,helpLink:"https://go.microsoft.com/fwlink/?LinkID=690865",showSeeDetails:!0};this.visualDefinition=null,this.isTileDisabledSubject.next(!0),this.onTileError({error:v,errorDetails:k})},C.prototype.validateExportTileDisplayError=function(p){var v=this.tileDisplayService.getTileDisplayErrorFromConfig(p);v&&(this.onTileError({error:v.errorTitle,errorDetails:{message:v.errorTitle,displayableErrorInfo:[{errorInfoKey:v.errorTitle,errorInfoValue:v.errorTitle}],hideAdditionalErrorInfo:!0,hideGetHelpLink:!0,helpLink:"",showSeeDetails:!1}}),this.isExportError=!0)},C.prototype.ensureTileConfig=function(p){p.$config||this.tileConfigService.parseTileConfig(p)},C.prototype.subscribeToTile=function(){var p=this,v=this.isTileDisabledSubject.pipe((0,qe.q)(1)),I=this.changes$("contract").pipe((0,Ye.h)(function(z){return!!z}),(0,Ve.U)(function(z){return p.ensureTileConfig(z),z})),k=I.pipe((0,gt.x)(function(z,oe){return p.isTileBodyEqual(z,oe)}));this.title$=(0,ye.aj)([I,this.visualDefChanged$]).pipe((0,Ve.U)(function(z){var oe=z[0];return p.tileConfigService.getDisplayText(oe,oe.$config,p.visualDefinition)})),this.hasTitle$=this.title$.pipe((0,Ve.U)(function(z){var oe,Ee;return!(null!==(Ee=null===(oe=p.contract)||void 0===oe?void 0:oe.$config)&&void 0!==Ee&&Ee.hideTitle||!z)})),this.subTitle$=I.pipe((0,Ve.U)(function(z){return p.tileConfigService.getSubDisplayText(z,z.$config)})),this.hasSubtitle$=this.subTitle$.pipe((0,Ve.U)(function(z){var oe,Ee=null===(oe=p.contract)||void 0===oe?void 0:oe.$config;return!Ee?.hideTitle&&(!!z||Ee?.lastRefreshTimeEnabled)})),this.refreshTime$=I.pipe((0,He.zg)(function(z){var oe=z.$config,Ee=oe?.lastRefreshTimeEnabled;if(Ee){if(z.type!==y.YU.workbook){var Mt=(0,it.ee)(z.tileDataUpdatedTime);return Mt?(0,we.of)((0,T.g)(p.localizationService,Mt)):(0,ye.aj)([p.store.select(f.e6,{modelId:z.modelId,packageId:z.packageId}),p.store.select(bt.Yx)]).pipe((0,qe.q)(1),(0,Ve.U)(function(ot){var Xe,et=ot[0],Zt=ot[1];if(et)return p.getFormattedDateStringFromRefreshTime(et.lastRefreshTime);var Nt=null===(Xe=Zt?.datasets)||void 0===Xe?void 0:Xe.find(function(rn){return rn.id===p.contract.modelId});return p.getFormattedDateStringFromRefreshTime(Nt?.lastRefreshTime)}))}return p.store.select(h.Jh,{id:z.packageId}).pipe((0,qe.q)(1),(0,Ve.U)(function(ot){return ot?p.getFormattedDateStringFromRefreshTime(ot.lastRefreshTime):""}))}return(0,we.of)("")}),(0,Ve.U)(function(z){return z?p.localizationService.format("Refreshed",[z]):""})),I.pipe((0,qe.q)(1),(0,ge.b)(function(z){z.type!==y.YU.composite?p.isTileDisabledSubject.next(!1):p.customVisualValidation(z,z.$config)})).subscribe(),this.viewModel$=k.pipe((0,Ve.U)(function(z){return p.mapTile(z,z.$config)}),(0,ge.b)(function(z){z.type===y.YU.realTime?(p.updateRealTimeInputandOutput(z),setTimeout(function(){p.isLoading=1===z.contract.publishState,p.refreshViewPortSize(),p.ref.markForCheck()},200)):z.type!==y.YU.composite&&(p.isLoading=1===z.contract.publishState),p.hasWarning().then(function(oe){p.tileHasWarning=oe,p.tileHasWarning&&p.onErrorAdd.emit({message:p.warning&&p.warning.tooltip,displayableErrorInfo:[]})}).catch(function(oe){p.isError=!0})}),(0,Ze.d)(1));var L=this.viewModel$.pipe((0,dt.o)(function(z){return z.type===y.YU.composite})),G=I.pipe((0,gt.x)(function(z,oe){return _.isEqual(z.tileDataBinaryBase64Encoded,oe.tileDataBinaryBase64Encoded)&&_.isEqual(z.tileData,oe.tileData)}));(0,ye.aj)([L,v,this.visualDefDataError$.asObservable(),G]).pipe((0,At.b)(0),(0,ge.b)(function(z){var oe=z[0];z[1]||p.tileDataService.getVisualDefinitionData(z[3],oe.initialVisual,oe.config).then(function(Xe){oe.initialVisual.data=Xe,p.visualDefinition=oe.initialVisual,p.visualDefChanged$.next(!0),p.tileConfigService.vdCache[oe.contract.objectId]=p.visualDefinition,p.updateVisualInteractivityOptions(oe),p.applyTheme(),p.isLoading=1===oe.contract.publishState,p.refreshViewPortSize(),setTimeout(function(){p.refreshViewPortSize(),p.ref.markForCheck()},200),p.isError=!1}).catch(function(Xe){return(0,M.mG)(p,void 0,void 0,function(){var et=this;return(0,M.Jh)(this,function(Zt){return this.isError=!0,this.store.select(f.e6,{modelId:this.contract.modelId,packageId:this.contract.packageId}).pipe((0,qe.q)(1)).subscribe(function(Nt){var rn=!!et.contract.queryResultError;if(et.telemetryService.logEvent(Se,{errorCode:Xe.code,queryError:et.contract.queryResultError}),1048576!==et.hostEnv&&et.tileDataUtilsService.shouldRefreshData(et.contract,rn,Nt,et.currentRetry)){et.currentRetry++;var hn=et.telemetryService.startEvent(Le.Ys,{dashboardGuid:et.dashboard&&et.dashboard.objectId});et.store.dispatch(new Pe.F0({telemetryEvent:hn,hideLoader:!0})),et.visualDefDataError$.next(Xe)}else et.currentRetry=0,oe.contract.queryResultError&&(et.tileErrorDetails=(0,R.X7)(oe.contract.queryResultError,et.localizationService)),et.visualDefinition=null,et.isLoading=!1,et.ref.markForCheck()}),[2]})})})})).subscribe();var se=this.store.select(bt.aS).pipe((0,Lt.R)(this.onDestroy$),(0,Ve.U)(function(z){return _.filter(z,function(oe){return Ne.kB(oe)}).length>0}));this.isNewMobileTile$=this.inEditMobileLayoutMode?(0,ye.aj)([I,se]).pipe((0,Ve.U)(function(z){var oe=z[0];if(oe)return Ne.$D(oe,z[1])})):(0,we.of)(!1),this.isUnpinnedTileMobileView$=this.inEditMobileLayoutMode?(0,ye.aj)([I,this.isNewMobileTile$]).pipe((0,Ve.U)(function(z){var oe=z[0],Ee=z[1];if(oe)return Ne.lE(oe)||Ee})):(0,we.of)(!1)},C.prototype.getFormattedDateStringFromRefreshTime=function(p){var v=(0,it.ee)(p);return v?(0,T.g)(this.localizationService,v):""},C.prototype.isTileBodyEqual=function(p,v){return!(!p||!v)&&_.isEqual(p.query,v.query)&&_.isEqual(p.tileData,v.tileData)&&p.publishState===v.publishState&&p.$config===v.$config&&p.config===v.config},C.prototype.mapTile=function(p,v){var k,L,I=this,se=p.type;return{config:v,type:se,contract:p,initialVisual:this.tileConfigService.getVisualDefintionFromConfig(p,v,{onNotifyLicense:function(Ee){return I.onNotifyLicense(Ee)},onClearLicenseNotification:function(){return I.onClearLicenseNotification()},onNotifyFeatureBlocked:function(Ee){return I.onNotifyFeatureBlocked(Ee)}}),embedCode:se===y.YU.iframe?null===(k=v?.iframe)||void 0===k?void 0:k.embedCode:null,imageUrl:se===y.YU.image?null===(L=v?.imageTile)||void 0===L?void 0:L.imageUrl:null}},C.prototype.onNotifyLicense=function(p){0!==p&&this.licenseUIManager.displayNotification(p)},C.prototype.onNotifyFeatureBlocked=function(p){this.licenseUIManager.displayFeatureBlockedBanner(p)},C.prototype.onClearLicenseNotification=function(){this.licenseUIManager.clearNotification()},C.prototype.onTileError=function(p){this.isError=!0;var v=this.contract.type===y.YU.image?this.localizationService.get("Tile_ImageErrorText"):p.error;this.tileErrorDetails=p.errorDetails||{message:v,displayableErrorInfo:[]},this.onErrorAdd.emit(this.tileErrorDetails)},C.prototype.onClearTileError=function(){this.isError&&this.tileErrorDetails&&(this.onErrorRemove.emit(this.tileErrorDetails),this.isError=!1)},C.prototype.onSelectTileConversations=function(p){p.stopPropagation&&p.stopPropagation(),p.preventDefault(),this.onSelectConverstations.emit(this.contract)},C.prototype.onMenuItemChanged=function(p){this.isMenuOpen=p.isOpen},C.prototype.getAltText=function(p){return p.contract.displayText?p.contract.displayText:this.localizationService.get("Image")},C.prototype.handleSensitivity=function(p){p.artifactType===S.B.Tile&&(this.hasSensitivityBanner=p.hasSensitivity,this.hasExpandSensitivityBanner=p.isBannerExpanded,this.loadSensitivity=p.hasSensitivity&&!this.disableSensitivityBanner)},C.prototype.onNotificationsUpdated=function(){},C.prototype.onReportTileBodyClick=function(p){32!==this.hostEnv&&p.stopPropagation()},C.prototype.onVisualModernClick=function(p){var v=p.target.tagName;"a"===v?.toLowerCase()&&p.stopPropagation()},C.prototype.onTileHeaderClick=function(p){var v;this.tileHeaderClickService&&32===this.hostEnv&&this.contract.type===y.YU.report&&(p.stopPropagation(),null===(v=this.tileHeaderClickService)||void 0===v||v.onTileHeaderClick(this.contract))},C.prototype.hasWarning=function(){return(0,M.mG)(this,void 0,void 0,function(){var p,I;return(0,M.Jh)(this,function(k){switch(k.label){case 0:return this.isError&&this.contract.queryResultError&&this.isVisualSupportedInErrorState(this.contract)?(p=(0,R.X7)(this.contract.queryResultError,this.localizationService),this.warning={tooltip:this.localizationService.format("DashboardAppBar_TileError_ErrorTooltip",[p.message])},[2,!0]):[4,this.hasLostReportConnection()];case 1:return k.sent()?(this.warning={tooltip:this.localizationService.get("Tile_LoseReportConnection")},[2,!0]):this.contract.errorCode?(this.warning={tooltip:this.getErrorLocId(this.contract.errorCode)},[2,!0]):[4,this.tileUtilService.tileContainsScriptVisuals(this.contract)];case 2:return k.sent()&&this.scriptVisuals.shouldBlockScriptVisual(0)?(I=this.userInfo&&!Array.isArray(this.userInfo)&&this.licenseEnforcementService.supportsScriptVisuals(),this.warning={tooltip:I&&this.localizationService.get("Tile_RVis_RefreshDisabled")||this.localizationService.get("Tile_RVis_RefreshDisabledForNonPro")},[2,!0]):[2,!1]}})})},C.prototype.hasLostReportConnection=function(){var p;return(0,M.mG)(this,void 0,void 0,function(){var v,I,k,L,G;return(0,M.Jh)(this,function(se){switch(se.label){case 0:return this.contract.type!==y.YU.composite?[2,!1]:(v="bingSocial",I=this.contract.$action,k=this.contract.action?JSON.parse(this.contract.action):null,L=null===(p=I||k)||void 0===p?void 0:p.action,[4,this.reportStore.findById(this.contract.reportId)]);case 1:return G=se.sent(),[2,L!==ke.RCq&&(!L||L===ke.$Ez&&!G)&&this.contract.name!==v&&!this.contract.$config.widget]}})})},C.prototype.shouldShowTileVisual=function(p){return!this.isExportError&&(!this.isError||this.isVisualSupportedInErrorState(p))},C.prototype.isVisualSupportedInErrorState=function(p){var I=p&&p.type===y.YU.realTime;return!(!p||p.type!==y.YU.composite||this.shouldShowCompositeTileError(p.queryResultError)||!this.visualDefinition||!this.visualDefinition.data)||!!(I&&this.realTimeTileModernInputArgs&&this.realTimeTileModernInputArgs.initialVisual&&this.realTimeTileModernInputArgs.initialVisual.data)},C.prototype.shouldShowCompositeTileError=function(p){var v=p&&(0,R.X7)(p,this.localizationService);return!(!v||!v.message)},C.prototype.getErrorLocId=function(p){var v,I=[];switch(p){case 10:v="WorkbookTile_GeneralError";break;case 11:v="WorkbookTile_FileNotFound";break;case 12:v="WorkbookTile_ObjectNotFound",I=this.contract.$config.workbookTile?[this.contract.$config.workbookTile.item]:["pinned object"];break;case 14:v="WorkbookTile_LocalWorkbookUnsupported";break;case 13:v="WorkbookTile_Unauthorized";break;default:return""}return this.localizationService.format(v,I)},C.prototype.calculateSmallTileWidth=function(){var p=this.elementRef.nativeElement.querySelector(".tileLayout");this.isSmallTitleWidth=p?.clientWidth>0&&p?.clientWidth<=C.smallTitleWidth},C.prototype.updateRealTimeInputandOutput=function(p){var v=this;p.type===y.YU.realTime&&(this.visualDefinition=p.initialVisual,this.realTimeOutputArgs={onTileError:function(k){return v.onTileError(k)},onClearTileError:function(){return v.onClearTileError()}},this.realTimeTileModernInputArgs={isOnPushChangeDetection:this.isOnPushChangeDetection,initialVisual:p.initialVisual,contract:p.contract,config:p.config})},C.smallTitleWidth=160,C.\u0275fac=function(v){return new(v||C)(i.\u0275\u0275directiveInject(i.ElementRef),i.\u0275\u0275directiveInject(tn.vZ),i.\u0275\u0275directiveInject(sn.D),i.\u0275\u0275directiveInject(ee.f),i.\u0275\u0275directiveInject(be.d),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(Re.A),i.\u0275\u0275directiveInject(Ke.v),i.\u0275\u0275directiveInject(rt.d),i.\u0275\u0275directiveInject(Ge.o),i.\u0275\u0275directiveInject(_t.r),i.\u0275\u0275directiveInject(b.t),i.\u0275\u0275directiveInject(pn.l6),i.\u0275\u0275directiveInject(un.o),i.\u0275\u0275directiveInject(Pt.Z),i.\u0275\u0275directiveInject(at.J,12),i.\u0275\u0275directiveInject(jt.S),i.\u0275\u0275directiveInject(St.E),i.\u0275\u0275directiveInject(H.a),i.\u0275\u0275directiveInject(B.k),i.\u0275\u0275directiveInject(Wt),i.\u0275\u0275directiveInject(Ht.k),i.\u0275\u0275directiveInject(fn.yh),i.\u0275\u0275directiveInject(re.R),i.\u0275\u0275directiveInject(We.y0),i.\u0275\u0275directiveInject(u.E),i.\u0275\u0275directiveInject(o.D),i.\u0275\u0275directiveInject(q.E),i.\u0275\u0275directiveInject(fe.t),i.\u0275\u0275directiveInject($t.SW),i.\u0275\u0275directiveInject(U),i.\u0275\u0275directiveInject(dn.H,8),i.\u0275\u0275directiveInject(c,8))},C.\u0275cmp=i.\u0275\u0275defineComponent({type:C,selectors:[["tile-content"]],inputs:{contract:"contract",showComments:"showComments",isSelected:"isSelected",hideBySpotlight:"hideBySpotlight",inEditMobileLayoutMode:"inEditMobileLayoutMode",shouldOverrideCustomTheme:"shouldOverrideCustomTheme",disableInteractions:"disableInteractions",focusedTileObjId:"focusedTileObjId",themeName:"themeName",mobileTileInteractive:"mobileTileInteractive",isLargeHeader:"isLargeHeader",tileBodyViewPort:"tileBodyViewPort",dashboard:"dashboard",odataFilters:"odataFilters"},outputs:{onSelectConverstations:"onSelectConverstations",onErrorAdd:"onErrorAdd",onErrorRemove:"onErrorRemove",onPinTileMobileView:"onPinTileMobileView",onUnpinTileMobileView:"onUnpinTileMobileView"},features:[i.\u0275\u0275ProvidersFeature((0,M.ev)((0,M.ev)([],m.H,!0),[E.W,Y.u8],!1)),i.\u0275\u0275InheritDefinitionFeature],decls:3,vars:9,consts:[[1,"tileLayout",3,"ngClass"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["permissionLocked",""],[3,"messageKey"],[1,"tile","baseTile"],["class","item-auto",4,"ngIf"],[1,"flexbox",3,"ngClass","click"],["data-testid","tile-warning-icon",3,"contract","tileHasWarning","warningMessage"],["ng-non-bindable","",1,"headerText","unselectable"],["data-testid","tile-display-text",1,"displayText",3,"title"],[1,"flexbox","subDisplayTextWrapper"],["data-testid","tile-sub-display-text",1,"subDisplayText","item-auto",3,"title"],["class","subDisplayText item-auto",4,"ngIf"],["data-testid","tile-refresh-time",1,"subDisplayText","item-auto",3,"title"],["class","item-auto commentIndicator",3,"click",4,"ngIf"],["focus-nav-mode","Group","keyboard-shortcuts","alt-shift-F10 scoped",1,"moreOptions",3,"ngClass"],["menuIcon","pbi-glyph-more",3,"dashboard","tile","ariaLabel","tooltip","visualDefinition","currentMenuItemIdChange",4,"ngIf"],["class","tile-body",3,"compositeTileBody","ngClass",4,"ngIf"],["class","newBadgeContainer","localize","New_Capitalized",4,"ngIf"],[3,"visualType","tileObjectId",4,"ngIf"],[3,"visualType",4,"ngIf"],[3,"featureBlockedTooltip","shouldStartBannerLeaveAnimation","visualType","isAnimationDone",4,"ngIf"],[3,"visualType","tileObjectId"],[3,"visualType"],[3,"featureBlockedTooltip","shouldStartBannerLeaveAnimation","visualType","isAnimationDone"],[1,"item-auto"],[1,"webContentCorner"],["localizeTooltip","WebContentWarning_Widget",1,"webContentIcon"],[1,"glyphicon","pbi-glyph-securityalert","glyph-small"],[1,"subDisplayText","item-auto"],[1,"item-auto","commentIndicator",3,"click"],[1,"glyphicon","glyph-small","pbi-glyph-comment"],["data-testid","unpinTile-mobile-Layout","class","unpinTile glyphicon pbi-glyph-unpin glyph-small",3,"ngClass","title","click",4,"ngIf"],["class","unpinTile glyphicon pbi-glyph-pinned glyph-small showTileIcon","data-testid","unpin-tile-btn",3,"title","click",4,"ngIf"],["data-testid","unpinTile-mobile-Layout",1,"unpinTile","glyphicon","pbi-glyph-unpin","glyph-small",3,"ngClass","title","click"],["data-testid","unpin-tile-btn",1,"unpinTile","glyphicon","pbi-glyph-pinned","glyph-small","showTileIcon",3,"title","click"],["menuIcon","pbi-glyph-more",3,"dashboard","tile","ariaLabel","tooltip","visualDefinition","currentMenuItemIdChange"],[1,"tile-body",3,"ngClass"],["class","tileLoadingPlaceholder",4,"ngIf"],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"imageUrl","altText",4,"ngSwitchCase"],[3,"imageUrl",4,"ngSwitchCase"],[3,"viewModel","embedCode",4,"ngSwitchCase"],[3,"viewModel","config",4,"ngSwitchCase"],[3,"errorText","errorDetails","tileType",4,"ngIf"],[1,"tileLoadingPlaceholder"],[1,"tileLoadingPlaceholderText","glyphicon","pbi-glyph-powerbi","glyph-large"],[3,"viewModel","supportsScreenReader","allowDeferredRendering","supportsKeyboardNavigation","useOnPushChangeDetection","click","visualReady",4,"ngIf"],[3,"viewModel","supportsScreenReader","allowDeferredRendering","supportsKeyboardNavigation","useOnPushChangeDetection","click","visualReady"],[3,"imageUrl","altText"],[3,"imageUrl"],[3,"viewModel","embedCode"],[3,"viewModel","config"],[3,"modulePath","componentId","inputArgs","outputArgs",4,"ngIf"],[3,"modulePath","componentId","inputArgs","outputArgs"],[3,"contract","odataFilters","config","click"],[3,"errorText","errorDetails","tileType"],["localize","New_Capitalized",1,"newBadgeContainer"]],template:function(v,I){1&v&&(i.\u0275\u0275elementStart(0,"section",0),i.\u0275\u0275template(1,nn,4,2,"ng-container",1),i.\u0275\u0275template(2,Jo,36,66,"ng-container",1),i.\u0275\u0275elementEnd()),2&v&&(i.\u0275\u0275styleMap(I.tileStyle),i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction3(5,Yr,I.isSelected,I.hideBySpotlight,I.isSmallTitleWidth)),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",I.isTileLocked(null==I.contract?null:I.contract.errorCode)),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!I.isTileLocked(null==I.contract?null:I.contract.errorCode)))},dependencies:[F.NgClass,F.NgIf,F.NgSwitch,F.NgSwitchCase,te.o,Ce.H,Me.$,ze.y,je.X,Qe.r,Je.R,Vt.q,vn,_o.g,qt,xo,bi,wt,Ai,Ei.o,ro,zo,Yt,F.AsyncPipe,Ho.F],styles:["[_nghost-%COMP%]{height:100%;width:100%;list-style:none;position:relative;z-index:0}.tile-visual[_ngcontent-%COMP%]{height:100%;width:100%}.tileLayout[_ngcontent-%COMP%]{background-color:var(--fluent-theme-white-color, #FFF);box-sizing:border-box;height:100%;width:100%;display:flex;flex-direction:column;position:relative;cursor:pointer}.tile-body[_ngcontent-%COMP%]{top:50px;color:#fff;overflow:hidden;position:absolute;left:0;right:0;bottom:0;cursor:pointer;text-align:left;z-index:0}.tile-body.paddedTile[_ngcontent-%COMP%]{left:10px;right:10px;bottom:10px}.tile-body[_ngcontent-%COMP%]     iframe-tile{width:100%;height:100%}.tile-body[_ngcontent-%COMP%]     iframe-tile .iframeTile{width:100%;height:100%}.tile-body[_ngcontent-%COMP%]     iframe-tile .iframeTile iframe{width:100%;height:100%}.moreOptions[_ngcontent-%COMP%]{display:block;position:absolute;height:22px;right:12px;top:15px;list-style-type:none;padding:3px;opacity:.95;z-index:2;visibility:hidden;cursor:pointer;color:var(--neutral-tertiary-color, #A6A6A6);background-color:var(--white-color, #FFF)}.newBadgeContainer[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0;padding:0 7px;line-height:18px;background-color:var(--theme-lighter-color, #F2C811);color:var(--button-primary-content-color);font-family:wf_standard-font,helvetica,arial,sans-serif}section[_ngcontent-%COMP%]:hover   .moreOptions[_ngcontent-%COMP%]{visibility:visible}section[_ngcontent-%COMP%]:hover   .baseTile[_ngcontent-%COMP%]   button.unpinTile[_ngcontent-%COMP%]{visibility:visible}.tileLoadingPlaceholder[_ngcontent-%COMP%]{display:block;color:var(--fluent-theme-light-gray-color, #c8c8c8);top:10px;left:10px;right:10px;bottom:10px;overflow:hidden;position:absolute}.tileLoadingPlaceholder[_ngcontent-%COMP%]   .tileLoadingPlaceholderText[_ngcontent-%COMP%]{top:50%;position:absolute;margin-top:-20px;text-align:center;width:100%}.tile.noTitle[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{display:none}.tile.noTitle[_ngcontent-%COMP%]   div.tile-body[_ngcontent-%COMP%]{top:0}.tile.noTitle[_ngcontent-%COMP%]   div.compositeTileBody[_ngcontent-%COMP%]{top:10px}.largeHeader.tile[_ngcontent-%COMP%]   .tile-body[_ngcontent-%COMP%]{top:65px}.tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{padding:16px 10px 20px;box-sizing:border-box;height:50px;position:absolute;top:0;width:100%;z-index:1;transition:opacity .25s;align-items:flex-start;justify-content:flex-start}.largeHeader.tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{height:65px}.authoringDashboard[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%], .is-dynamic-layout[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{padding-top:10px;padding-left:10px;height:42px}.tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   button.commentIndicator[_ngcontent-%COMP%]{padding-left:12px;padding-right:30px;padding-bottom:16px}.tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   button.commentIndicator[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:active, .tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   button.commentIndicator[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{color:var(--neutral-secondary-alt-color3, #999999)}.tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   button.commentIndicator[_ngcontent-%COMP%]:focus{outline-color:transparent}html[data-focus-source=key][_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   button.commentIndicator[_ngcontent-%COMP%]:focus   .glyphicon[_ngcontent-%COMP%]{box-shadow:var(--focus-box-shadow-definition, 0 0 0 4px) var(--focus-box-shadow-white-color, #FFFFFF)!important;border:var(--focus-outline-definition, 2.5px solid) var(--focus-box-shadow-color, #000000)!important}.tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-of-type:not(.commentIndicator){padding-right:15px}.tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]{cursor:pointer;width:100%;min-width:0;flex:1 1 auto;display:inline-flex;padding-right:30px}.tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]   .headerTitleWrapper[_ngcontent-%COMP%]{max-width:100%}.tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{max-width:85%;flex:0 0 auto}.tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .displayText[_ngcontent-%COMP%]{font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif;font-size:15px;color:var(--neutral-primary-color, #333333);overflow:hidden;white-space:nowrap;text-overflow:ellipsis;height:20px;line-height:16px}.largeHeader.tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .displayText[_ngcontent-%COMP%]{height:22px;font-size:17px;padding-bottom:5px;padding-top:4px}.tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .subDisplayTextWrapper[_ngcontent-%COMP%]{justify-content:flex-start}.tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .subDisplayTextWrapper[_ngcontent-%COMP%]   .subDisplayText[_ngcontent-%COMP%]{font-family:wf_standard-font,helvetica,arial,sans-serif;font-size:12px;color:var(--neutral-secondary-color, #666666);overflow:hidden;white-space:nowrap;text-overflow:ellipsis;height:20px;text-transform:uppercase;letter-spacing:.5px;margin-right:10px;max-width:100%;line-height:12px}.largeHeader[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .subDisplayTextWrapper[_ngcontent-%COMP%]   .subDisplayText[_ngcontent-%COMP%]{height:22px;font-size:12px}.tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .subDisplayTextWrapper[_ngcontent-%COMP%]   .subDisplayText[_ngcontent-%COMP%]:empty{margin-right:0}.baseTile[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:var(--neutral-secondary-alt-color3, #999999);background-color:transparent;padding:3px;border:none;box-sizing:border-box;vertical-align:top}.baseTile[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active:hover{background-color:transparent}.baseTile[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:focus{background-color:transparent}.baseTile[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding:0;margin:0}.baseTile[_ngcontent-%COMP%]   button.unpinTile[_ngcontent-%COMP%]{display:block;visibility:hidden;position:absolute;height:32px;width:32px;right:6px;top:8px;list-style-type:none;padding:3px;transition:opacity .25s;z-index:3;background-color:#fff;border-radius:50%;color:#444}.baseTile[_ngcontent-%COMP%]   button.unpinTile[_ngcontent-%COMP%]:active:hover{background-color:var(--button-primary-hover-fill-color)}.baseTile[_ngcontent-%COMP%]   button.unpinTile[_ngcontent-%COMP%]:hover:focus{background-color:var(--button-primary-hover-fill-color)}.baseTile[_ngcontent-%COMP%]   button.unpinTile[_ngcontent-%COMP%]:hover{color:var(--button-primary-content-color);background-color:var(--theme-lighter-color, #F2C811)}.baseTile[_ngcontent-%COMP%]   button.unpinTile.showUnpin[_ngcontent-%COMP%]{visibility:visible}.baseTile[_ngcontent-%COMP%]   button.showTileIcon[_ngcontent-%COMP%]{height:28px;width:28px;border-radius:50%;visibility:visible}.baseTile[_ngcontent-%COMP%]   button.showTileIcon[_ngcontent-%COMP%]:hover{color:var(--button-primary-content-color);background-color:var(--theme-lighter-color, #F2C811)}.license-blockers-element-style[_ngcontent-%COMP%]{filter:blur(8px);-webkit-filter:blur(8px)}license-blocker[_ngcontent-%COMP%], license-environment-blocker[_ngcontent-%COMP%]{position:relative;top:0;left:0;z-index:2;width:100%;height:100%}license-banner[_ngcontent-%COMP%]{position:absolute;top:4px;right:4px;z-index:3;width:calc(100% - 4px);height:32px;pointer-events:none}.hideSpotlight[_ngcontent-%COMP%]{opacity:.45;pointer-events:none;transition:none}.showOptions[_ngcontent-%COMP%]{visibility:visible}.interactionDisabled[_ngcontent-%COMP%]{pointer-events:none}",".mobileDashboard[_nghost-%COMP%]   .tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%], .mobileDashboard   [_nghost-%COMP%]   .tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{cursor:default;background-color:transparent;padding-top:10px;height:42px}.mobileDashboard[_nghost-%COMP%]   .tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%], .mobileDashboard   [_nghost-%COMP%]   .tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]{cursor:default;padding-right:0}.mobileDashboard[_nghost-%COMP%]   .tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]   section[_ngcontent-%COMP%], .mobileDashboard   [_nghost-%COMP%]   .tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{width:auto}.mobileDashboard[_nghost-%COMP%]   .tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .displayText[_ngcontent-%COMP%], .mobileDashboard   [_nghost-%COMP%]   .tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .displayText[_ngcontent-%COMP%]{font-size:12px;line-height:13px;margin-bottom:-4px}.mobileDashboard[_nghost-%COMP%]   .tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .subDisplayText[_ngcontent-%COMP%], .mobileDashboard   [_nghost-%COMP%]   .tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .subDisplayText[_ngcontent-%COMP%]{font-size:11px;line-height:10px}.mobileDashboard[_nghost-%COMP%]   .moreOptions[_ngcontent-%COMP%], .mobileDashboard   [_nghost-%COMP%]   .moreOptions[_ngcontent-%COMP%]{right:0;top:6px;padding:0;visibility:visible;background-color:transparent}.mobileDashboardConsumption.nonInteractiveVisuals[_nghost-%COMP%]   .tile[_ngcontent-%COMP%]     .tile-body *, .mobileDashboardConsumption.nonInteractiveVisuals   [_nghost-%COMP%]   .tile[_ngcontent-%COMP%]     .tile-body *{pointer-events:none!important}.mobile-custom-layout-strategy[_nghost-%COMP%]   .tile[_ngcontent-%COMP%]   .tile-body[_ngcontent-%COMP%], .mobile-custom-layout-strategy   [_nghost-%COMP%]   .tile[_ngcontent-%COMP%]   .tile-body[_ngcontent-%COMP%]{top:42px;bottom:8px;cursor:none!important}.mobile-custom-layout-strategy[_nghost-%COMP%]   .tile.noTitle[_ngcontent-%COMP%]   div.tile-body[_ngcontent-%COMP%], .mobile-custom-layout-strategy   [_nghost-%COMP%]   .tile.noTitle[_ngcontent-%COMP%]   div.tile-body[_ngcontent-%COMP%]{top:10px}.mobile-custom-layout-strategy[_nghost-%COMP%]   .smallTitleWidth[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .displayText[_ngcontent-%COMP%], .mobile-custom-layout-strategy   [_nghost-%COMP%]   .smallTitleWidth[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .displayText[_ngcontent-%COMP%]{height:27px;white-space:normal;display:block;display:-webkit-box;letter-spacing:-.2px;word-wrap:break-word;-webkit-line-clamp:2;-webkit-box-orient:vertical}.mobile-custom-layout-strategy[_nghost-%COMP%]   .smallTitleWidth[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .subDisplayText[_ngcontent-%COMP%], .mobile-custom-layout-strategy   [_nghost-%COMP%]   .smallTitleWidth[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .subDisplayText[_ngcontent-%COMP%]{display:none}tile-host[_nghost-%COMP%]   .tile[_ngcontent-%COMP%]   .tile-body[_ngcontent-%COMP%], tile-host   [_nghost-%COMP%]   .tile[_ngcontent-%COMP%]   .tile-body[_ngcontent-%COMP%]{margin-top:10px;cursor:none!important}tile-host[_nghost-%COMP%]   .tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%], tile-host   [_nghost-%COMP%]   .tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{border-bottom:.5px solid #E1DFDD}tile-host[_nghost-%COMP%]   .tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]   .displayText[_ngcontent-%COMP%], tile-host   [_nghost-%COMP%]   .tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]   .displayText[_ngcontent-%COMP%]{color:#201f1e}tile-host[_nghost-%COMP%]   .tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]   .subDisplayText[_ngcontent-%COMP%], tile-host   [_nghost-%COMP%]   .tile[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .headerText[_ngcontent-%COMP%]   .subDisplayText[_ngcontent-%COMP%]{color:#605e5c}tile-host[_nghost-%COMP%]   .tile[_ngcontent-%COMP%]   .moreOptions[_ngcontent-%COMP%], tile-host   [_nghost-%COMP%]   .tile[_ngcontent-%COMP%]   .moreOptions[_ngcontent-%COMP%]{display:none}"]}),C}(Ct.w)},77996:function($e,Te,l){"use strict";l.d(Te,{o:function(){return b}});var M=l(17254),E=l(50423),Y=l(48066),T=l(3826),i=l(9380),c=l(18942),u=l(77476);function f(y,x){if(1&y&&E.\u0275\u0275element(0,"iframe",4),2&y){var A=E.\u0275\u0275nextContext();E.\u0275\u0275property("src",A.workbookTileUrl,E.\u0275\u0275sanitizeResourceUrl)}}var h=function(x){return{backgroundOriginalSize:x}};function m(y,x){if(1&y){var A=E.\u0275\u0275getCurrentView();E.\u0275\u0275elementStart(0,"img",5),E.\u0275\u0275listener("load",function(){E.\u0275\u0275restoreView(A);var K=E.\u0275\u0275nextContext();return E.\u0275\u0275resetView(K.onTileImageReady())}),E.\u0275\u0275elementEnd()}if(2&y){var R=E.\u0275\u0275nextContext();E.\u0275\u0275property("src",R.dynamicImageUrl,E.\u0275\u0275sanitizeUrl)("ngClass",E.\u0275\u0275pureFunction1(2,h,R.keepOriginalContentSize))}}var o=function(){return{hasTitle:"title"}},b=function(){function y(x,A,R){this.featureSwitch=x,this.sanitizer=A,this.workbookService=R,this.useLiveEwaControl=!!this.featureSwitch.featureSwitches.liveWorkbookTiles}return y.prototype.ngOnInit=function(){this.initWorkbookTile()},y.prototype.updateDynamicImageUrl=function(){this.dynamicImageUrl=(0,M.A5)(this.viewModel,this.config,{x:this.viewModel.col,y:this.viewModel.row,width:this.viewModel.colSpan||T.wS,height:this.viewModel.rowSpan||T.e_})||this.previewImageUrl},y.prototype.ngOnChanges=function(x){x&&x.viewModel&&(this.updateDynamicImageUrl(),this.keepOriginalContentSize=this.config&&(0,M.FQ)(this.config))},y.prototype.shouldPreparePreviewImage=function(){return!this.previewImageUrl&&!this.viewModel.tileDataBinaryBase64Encoded&&!(0,M.f6)(this.config)},y.prototype.initWorkbookTile=function(){var x=this;this.isLoading=!0,this.keepOriginalContentSize=this.config&&(0,M.FQ)(this.config),this.shouldPreparePreviewImage()&&this.workbookService.getWorkbookTilePreviewImageUrl(this.viewModel).then(function(A){var R=-1===A.indexOf("?")?"?":"&";x.previewImageUrl=A+R+(new Date).getTime(),x.updateDynamicImageUrl()}).catch(function(A){}),this.useLiveEwaControl&&this.workbookService.getWorkbookEmbedAccessData(this.viewModel.workbookId,this.viewModel.packageId).then(function(A){if(A&&(0,Y.HH)(A.url)){var R=x.constructWorkbookWopiUrl(A.url,A.accessToken);x.workbookTileUrl=x.sanitizer.sanitize(E.SecurityContext.RESOURCE_URL,x.sanitizer.bypassSecurityTrustResourceUrl(R))}}).catch(function(A){})},y.prototype.onTileImageReady=function(){this.isLoading=!1},y.prototype.constructWorkbookWopiUrl=function(x,A){if(this.config.workbookTile){var R=x.replace(/ExcelJs.ashx/i,"xlEmbed.aspx");return R+"&access_token="+A+"&item="+this.config.workbookTile.item+"&action=embedView"}return""},y.\u0275fac=function(A){return new(A||y)(E.\u0275\u0275directiveInject(i.vZ),E.\u0275\u0275directiveInject(c.H7),E.\u0275\u0275directiveInject(M.VB))},y.\u0275cmp=E.\u0275\u0275defineComponent({type:y,selectors:[["workbook-tile"]],inputs:{viewModel:"viewModel",config:"config"},features:[E.\u0275\u0275NgOnChangesFeature],decls:4,vars:7,consts:[[1,"workbookTile",3,"ngClass","ngSwitch"],["role","presentation",3,"src",4,"ngSwitchCase"],["alt","","class","workbookTileImage","disable-animation","true",3,"src","ngClass","load",4,"ngSwitchCase"],["name","internalWorkbookTileImage",1,"internalWorkbookTileImage",3,"src","hidden"],["role","presentation",3,"src"],["alt","","disable-animation","true",1,"workbookTileImage",3,"src","ngClass","load"]],template:function(A,R){1&A&&(E.\u0275\u0275elementStart(0,"div",0),E.\u0275\u0275template(1,f,1,1,"iframe",1),E.\u0275\u0275template(2,m,1,4,"img",2),E.\u0275\u0275element(3,"img",3),E.\u0275\u0275elementEnd()),2&A&&(E.\u0275\u0275property("ngClass",E.\u0275\u0275pureFunction0(6,o))("ngSwitch",R.useLiveEwaControl),E.\u0275\u0275advance(1),E.\u0275\u0275property("ngSwitchCase",!0),E.\u0275\u0275advance(1),E.\u0275\u0275property("ngSwitchCase",!1),E.\u0275\u0275advance(1),E.\u0275\u0275property("src",R.previewImageUrl,E.\u0275\u0275sanitizeUrl)("hidden",!0))},dependencies:[u.NgClass,u.NgSwitch,u.NgSwitchCase],encapsulation:2}),y}()},63868:function($e,Te,l){"use strict";l.d(Te,{h:function(){return fn}});var M=l(81337),E=l(32293),Y=l(90047),T=l(82515),i=l(74076),c=l(64115),u=l(34073),f=l(28726),h=l(76964),m=l(40521),o=l(50544),b=l(85947),y=l(80981),x=l(47644),A=l(8060),R=l(2142),ce=l(7600),K=l(50600),N=l(43286),X=l(46544),ae=l(33554),xe=l(59017),Be=l(11547),he=l(41198),Se=l(48787),Le=l(42195),ct=l(14172),it=l(17653),ke=l(59973),S=l(50423),Ie=l(85732),Ue=l(65181),ht=l(58938),J=l(29866),Et=l(9380),Ct=l(48482),We=l(3404),bt=l(76072),Pe=l(77326),Ne=l(66531),le=l(21860),me=l(77476),ye=l(17174),we=l(59968),qe=l(50057),Ye=l(11941),Ve=l(39686),gt=l(45074),He=l(82417),ge=l(77274),Ze=l(33846),dt=l(18460),At=l(54932),Lt=l(89659),$t=l(85102);function dn(re,U){1&re&&(S.\u0275\u0275elementStart(0,"div",25),S.\u0275\u0275element(1,"span",26)(2,"span",27),S.\u0275\u0275elementEnd())}function tn(re,U){if(1&re&&(S.\u0275\u0275elementContainerStart(0),S.\u0275\u0275element(1,"tile-content",28),S.\u0275\u0275pipe(2,"async"),S.\u0275\u0275pipe(3,"async"),S.\u0275\u0275elementContainerEnd()),2&re){var F=S.\u0275\u0275nextContext();S.\u0275\u0275advance(1),S.\u0275\u0275property("disableInteractions","true")("shouldOverrideCustomTheme","true")("contract",S.\u0275\u0275pipeBind1(2,4,F.currentContract$))("themeName",S.\u0275\u0275pipeBind1(3,6,F.targetThemeName$))}}function sn(re,U){if(1&re){var F=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"div",29),S.\u0275\u0275element(1,"p",30),S.\u0275\u0275elementStart(2,"pbi-radio-group",31),S.\u0275\u0275listener("ngModelChange",function(Me){S.\u0275\u0275restoreView(F);var ze=S.\u0275\u0275nextContext();return S.\u0275\u0275resetView(ze.themeTarget=Me)})("ngModelChange",function(){S.\u0275\u0275restoreView(F);var Me=S.\u0275\u0275nextContext();return S.\u0275\u0275resetView(Me.onThemeTargetChange())}),S.\u0275\u0275elementStart(3,"pbi-radio-button",32),S.\u0275\u0275text(4),S.\u0275\u0275pipe(5,"localize"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(6,"pbi-radio-button",33),S.\u0275\u0275text(7),S.\u0275\u0275pipe(8,"localize"),S.\u0275\u0275elementEnd()()()}if(2&re){var te=S.\u0275\u0275nextContext();S.\u0275\u0275advance(2),S.\u0275\u0275property("ngModel",te.themeTarget),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",S.\u0275\u0275pipeBind1(5,4,"ReportContainer_UseDashboardFormattingRadioText")," "),S.\u0275\u0275advance(2),S.\u0275\u0275property("checked",!0),S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate1(" ",S.\u0275\u0275pipeBind1(8,6,"ReportContainer_RetainReportFormattingRadioText")," ")}}function pn(re,U){if(1&re&&(S.\u0275\u0275elementStart(0,"mat-option",38),S.\u0275\u0275text(1),S.\u0275\u0275elementEnd()),2&re){var F=U.$implicit;S.\u0275\u0275property("value",F.objectId),S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate1(" ",F.displayName,"")}}function un(re,U){if(1&re){var F=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"mat-select",36),S.\u0275\u0275listener("valueChange",function(Me){S.\u0275\u0275restoreView(F);var ze=S.\u0275\u0275nextContext(2);return S.\u0275\u0275resetView(ze.selectedDashboardId=Me)})("selectionChange",function(){S.\u0275\u0275restoreView(F);var Me=S.\u0275\u0275nextContext(2);return S.\u0275\u0275resetView(Me.onDashboardSelectionChanged())}),S.\u0275\u0275template(1,pn,2,2,"mat-option",37),S.\u0275\u0275pipe(2,"async"),S.\u0275\u0275elementEnd()}if(2&re){var te=S.\u0275\u0275nextContext(2);S.\u0275\u0275property("value",te.selectedDashboardId),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngForOf",S.\u0275\u0275pipeBind1(2,2,te.availableDashboards$))}}function q(re,U){if(1&re&&(S.\u0275\u0275elementStart(0,"section"),S.\u0275\u0275element(1,"label",34),S.\u0275\u0275template(2,un,3,4,"mat-select",35),S.\u0275\u0275pipe(3,"async"),S.\u0275\u0275elementEnd()),2&re){var F=S.\u0275\u0275nextContext();S.\u0275\u0275advance(2),S.\u0275\u0275property("ngIf",S.\u0275\u0275pipeBind1(3,1,F.availableDashboards$))}}function fe(re,U){if(1&re){var F=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"pbi-form-field")(1,"label",39),S.\u0275\u0275text(2),S.\u0275\u0275pipe(3,"localize"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(4,"input",40),S.\u0275\u0275listener("ngModelChange",function(Me){S.\u0275\u0275restoreView(F);var ze=S.\u0275\u0275nextContext();return S.\u0275\u0275resetView(ze.newDashboardName=Me)}),S.\u0275\u0275elementEnd()()}if(2&re){var te=S.\u0275\u0275nextContext();S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate(S.\u0275\u0275pipeBind1(3,2,"SettingsBlade_DashboardName")),S.\u0275\u0275advance(2),S.\u0275\u0275property("ngModel",te.newDashboardName)}}var ee=function(U){return{viewModel:U}};function be(re,U){if(1&re&&(S.\u0275\u0275elementStart(0,"div",41),S.\u0275\u0275element(1,"pbi-lazy-load",42),S.\u0275\u0275elementEnd()),2&re){var F=S.\u0275\u0275nextContext();S.\u0275\u0275advance(1),S.\u0275\u0275property("modulePath",F.MessageBannerModulePath)("componentId","MessageBannerComponentId")("inputArgs",S.\u0275\u0275pureFunction1(3,ee,F.liveReportBannerModel))}}function Re(re,U){if(1&re&&(S.\u0275\u0275elementStart(0,"div",43),S.\u0275\u0275element(1,"pbi-lazy-load",42),S.\u0275\u0275elementEnd()),2&re){var F=S.\u0275\u0275nextContext();S.\u0275\u0275advance(1),S.\u0275\u0275property("modulePath",F.MessageBannerModulePath)("componentId","MessageBannerComponentId")("inputArgs",S.\u0275\u0275pureFunction1(3,ee,F.noReshareWarningBannerModel))}}function Ke(re,U){if(1&re&&(S.\u0275\u0275elementStart(0,"div",44),S.\u0275\u0275element(1,"pbi-lazy-load",42),S.\u0275\u0275elementEnd()),2&re){var F=U.ngIf,te=S.\u0275\u0275nextContext();S.\u0275\u0275advance(1),S.\u0275\u0275property("modulePath",te.MessageBannerModulePath)("componentId","MessageBannerComponentId")("inputArgs",S.\u0275\u0275pureFunction1(3,ee,F))}}var rt=function(){function re(U,F,te,Ce,Me,ze,je,Qe,Je,Vt,ut,st,pe){this.store=U,this.localizationService=F,this.dlgService=te,this.visualPlugin=Ce,this.featureSwitchService=Me,this.usageMetricsReport=ze,this.explorationSerializer=je,this.lazyProvider=Qe,this.informationProtectionService=Je,this.informationProtectionUIService=Vt,this.telemetryService=ut,this.config=st,this.dashboardThemeService=pe,this.themeTarget="current",this.isThemeSwitcherAvailable=!1,this.isPinLiveReport=!1,this.isNotFullyResharable=!1,this.MessageBannerModulePath="@powerbi/UILibrary/message-banner/message-banner.module#MessageBannerModule",this.targetThemeName$=new ae.t,this.initializeContract()}return re.prototype.ngOnInit=function(){var U=this;this.store.select(i.s4).pipe((0,he.n)(function(F){return!F}),(0,Se.q)(1),(0,Le.zg)(function(){return U.store.select(i.CW)})).subscribe(function(F){U.store.dispatch(new T._S({groupObjectId:F,refreshIfStale:!1}))}),this.availableDashboards$=0===this.config.pinTileContext?(0,xe.aj)([this.store.select(c.W$),this.store.select(u.BJ)]).pipe((0,ct.U)(function(F){return U.filterDashboards(F[1],F[0])}),(0,it.b)(function(F){F?.length&&(U.selectedDashboardId=F[0].objectId)})):this.store.select(u.BJ).pipe((0,ct.U)(function(F){return U.filterDashboards(F)}),(0,it.b)(function(F){F?.length&&(U.selectedDashboardId=F[0].objectId)})),this.availableDashboardsSubscription=this.availableDashboards$.subscribe(function(F){U.hasAvailableDashboards=F?.length>0,U.pinMode=U.hasAvailableDashboards?"existing":"new"}),this.liveReportBannerModel={bannerType:0,iconName:"pbi-glyph-info",message:this.localizationService.get("PinLiveReport_RefreshMessage")},this.noReshareWarningBannerModel={bannerType:2,iconName:"pbi-glyph-info",message:this.localizationService.get("PinTile_Warning_NoResharePermission")},this.informationProtectionIUCWarning$=this.getInformationProtectionIUCWarning()},re.prototype.ngOnDestroy=function(){this.availableDashboardsSubscription&&this.availableDashboardsSubscription.unsubscribe()},re.prototype.onClose=function(){this.onCancelClick()},re.prototype.filterDashboards=function(U,F){var te=_.filter(U,function(Me){return(0,N.yE)(Me.permissions,2)&&(!F||F.objectId!==Me.objectId)});return _.sortBy(te,function(Me){return Me.displayName.toLowerCase()})},re.prototype.onDashboardSelectionChanged=function(){this.onThemeTargetChange()},re.prototype.onThemeTargetChange=function(){if("current"===this.themeTarget){if(this.config.pinData){var U=this.config.pinData,F=U.themeCollection&&U.themeCollection.customTheme;this.targetThemeName$.next(F?.name)}}else this.targetThemeName$.next(this.dashboardThemeService.getDashboardThemeName(this.selectedDashboardId))},re.prototype.onPinClick=function(){var U=this,F=this.getTelemetryEvent();(0,xe.aj)([this.currentContract$,F]).pipe((0,Se.q)(1)).subscribe(function(te){var Ce,Me,ze,Qe=te[1],Je=_.cloneDeep(te[0]);"destination"===U.themeTarget&&!(null===(ze=null===(Me=null===(Ce=Je.$config)||void 0===Ce?void 0:Ce.visualContainer)||void 0===Me?void 0:Me.themeCollection)||void 0===ze)&&ze.customTheme&&(Je.$config.visualContainer.themeCollection.customTheme.name=null),U.store.dispatch("existing"===U.pinMode?new Y.Q6({dashboardId:U.selectedDashboardId,tile:Je,telemetryEvent:Qe}):new Y.G$({name:U.newDashboardName,tile:Je,telemetryEvent:Qe})),U.dlgService.closeAll()})},re.prototype.getTelemetryEvent=function(){var U=this;if(this.config.pinEvent)return(0,Be.of)(this.config.pinEvent);if(this.config.pinData){var F=this.config.pinData,Ce=F.packageId,Me=(te=F.modelId)?this.store.select(f.e6,{modelId:te,packageId:Ce}):(0,Be.of)(null),ze=Ce?this.store.select(h.Jh,{id:Ce}):(0,Be.of)(null);return(0,xe.aj)([Me,ze]).pipe((0,ct.U)(function(Qe){var Je=Qe[0],Vt=Qe[1],ut=(0,y.s_)(F),st=U.visualPlugin.isCustomVisual(ut);return U.telemetryService.startEvent(A.Ul,{visualType:ut,source:0===U.config.pinTileContext?"Dashboard":"Report",reason:"",unsupportedVisualPinned:!1,isCustomVisual:st,widgetType:"",reportPageContainsScriptVisuals:!1,sourceOrigin:U.getSourceOrigin(Je?Je.permissions:null,Vt)})}))}if(this.config.pinReportPageArgs){var te,je=this.config.pinReportPageArgs;return Ce=je.packageId,Me=(te=je.modelId)?this.store.select(f.e6,{modelId:te,packageId:Ce}):(0,Be.of)(null),ze=Ce?this.store.select(h.Jh,{id:Ce}):(0,Be.of)(null),(0,xe.aj)([Me,ze]).pipe((0,ct.U)(function(st){var pe=st[0],vn=st[1];return U.telemetryService.startEvent(A.Ul,{visualType:"reportPage",source:0===U.config.pinTileContext?"Dashboard":"Report",reason:"",unsupportedVisualPinned:!1,isCustomVisual:!1,widgetType:"",reportPageContainsScriptVisuals:U.isScriptVisualInLivePage(je.exploration),sourceOrigin:U.getSourceOrigin(pe?pe.permissions:null,vn)})}))}},re.prototype.onCancelClick=function(){this.dlgService.closeAll()},re.prototype.canPin=function(){var U;return"existing"===this.pinMode&&!!this.selectedDashboardId||"new"===this.pinMode&&!(null===(U=this.newDashboardName)||void 0===U||!U.trim())},re.prototype.getSourceOrigin=function(U,F){return F&&F.packageType===ce.yR.AppInstance?"App":U?1===U||5===U?"Shared":"Owned":"Unknown"},re.prototype.isScriptVisualInLivePage=function(U){return!!(U&&U.exploreCanvas&&U.exploreCanvas.visualContainers)&&(0,x.OV)(U.exploreCanvas.contract.visualContainers,this.visualPlugin)},re.prototype.initializeContract=function(){var U,F;if(this.config.tileContract){var te=this.config.tileContract.type;if(this.isPinLiveReport=te===o.YU.report,te===o.YU.composite){var Me=null===(U=this.config.tileContract.$config.visualContainer)||void 0===U?void 0:U.themeCollection,ze=null===(F=Me?.customTheme)||void 0===F?void 0:F.name;this.isThemeSwitcherAvailable=!!ze,this.isThemeSwitcherAvailable&&this.targetThemeName$.next(ze)}this.currentContract$=(0,Be.of)(this.config.tileContract)}else{if(this.config.pinData){var je=this.config.pinData,Qe=je.themeCollection&&je.themeCollection.customTheme;return this.isThemeSwitcherAvailable=!!Qe,this.isThemeSwitcherAvailable&&this.targetThemeName$.next(Qe.name),void this.updateContractFromPinData()}if(this.config.pinReportPageArgs)return this.isPinLiveReport=!0,void this.updateContractFromPinReportPageArgs()}},re.prototype.updateContractFromPinReportPageArgs=function(){var U=this,F=this.config.pinReportPageArgs,te=F.modelId,Me=te?this.store.select(f.e6,{modelId:te,packageId:F.packageId}):(0,Be.of)(null),ze=F.reportId?this.store.select(m.yF,F.reportId).pipe((0,ke.h)(function(Je){return!!Je})):(0,Be.of)(null),je=ze.pipe((0,Le.zg)(function(Je){return U.isUsageMetricsReport(Je)})),Qe=je.pipe((0,Le.zg)(function(Je){return U.generateReportFilters(F,Je)}));this.currentContract$=(0,xe.aj)([Me,ze,je,Qe]).pipe((0,Se.q)(1),(0,ct.U)(function(Je){return U.getTileContractFromPinReportArgs(F,Je[0],Je[1],Je[2],Je[3])}))},re.prototype.getTileContractFromPinReportArgs=function(U,F,te,Ce,Me){var ze=Ce&&!_.isEmpty(U.additionalODataFilter),je=U.section.size;return(0,b.r_)(U.reportId,te?te.modelId:void 0,U.packageId,U.section.id,U.displayText?U.displayText:te.displayName,U.subDisplayText?U.subDisplayText:U.section.displayName,U.action||{action:R.$Ez,targetSlideId:U.section.name,filter:ze?U.additionalODataFilter:""},U.pod,Me,U.utterance,je?je.width:void 0,je?je.height:void 0)},re.prototype.generateReportFilters=function(U,F){return(0,M.mG)(this,void 0,void 0,function(){var te,Ce,ze;return(0,M.Jh)(this,function(je){switch(je.label){case 0:return te=F&&!_.isEmpty(U.additionalODataFilter),Ce=U.filters||[],te?[4,this.lazyProvider.get("@powerbi/ODataFilterParser/OData-Filter-Parser.module#ODataFilterParserModule","odataFilterParserService")]:[3,3];case 1:return[4,je.sent().tryGetFilters(U.additionalODataFilter)];case 2:ze=je.sent(),Ce.push.apply(Ce,ze||[]),je.label=3;case 3:return Ce?[2,this.explorationSerializer.stringifyFilterCollectionConfig(this.explorationSerializer.serializeFilterCollection(Ce))]:[2]}})})},re.prototype.isUsageMetricsReport=function(U){return this.featureSwitchService.featureSwitches.usageMetricsEnabled&&U?this.usageMetricsReport.isUsageMetricsArtifactUsingReportContract(U):(0,Be.of)(!1)},re.prototype.updateContractFromPinData=function(){var U=this,F=this.config.pinData;this.isThemeSwitcherAvailable=!(!F.themeCollection||!F.themeCollection.customTheme);var Ce=(0,y.s_)(F),Me=F.modelId,je=Me?this.store.select(f.e6,{modelId:Me,packageId:F.packageId}):(0,Be.of)(null),Qe=F.reportId?this.store.select(m.yF,F.reportId):(0,Be.of)(null);this.currentContract$=(0,xe.aj)([je,Qe]).pipe((0,Se.q)(1),(0,ct.U)(function(Je){var Vt=Je[0];return(0,b.O4)(F,U.visualPlugin.capabilities(Ce),Vt)}))},re.prototype.getInformationProtectionIUCWarning=function(){var U=this;if(!this.informationProtectionService.isInformationProtectionEditEnabled())return(0,Be.of)(null);var F=0===this.config.pinTileContext;return this.currentContract$.pipe((0,Le.zg)(function(te){return te.reportId?U.informationProtectionService.getOrLoadArtifactInformationProtection(K.B.Report,te.reportId,null,!0):te.modelId?U.informationProtectionService.getOrLoadArtifactInformationProtection(K.B.Model,te.modelId,null,!0):(0,Be.of)(null)}),(0,ct.U)(function(te){if(!te||te.isInvalid)return null;var Ce=U.informationProtectionUIService.getDisplayNameFromArtifactInformationProtection(te);return te.artifactType===K.B.Report?{bannerType:2,iconName:"pbi-glyph-info",message:U.localizationService.format(F?"PinTile_Warning_LabelInheritanceUponCreation_FromDashboard_ReportTile":"PinTile_Warning_LabelInheritanceUponCreation_FromReport",[Ce])}:te.artifactType===K.B.Model?{bannerType:2,iconName:"pbi-glyph-info",message:U.localizationService.format(F?"PinTile_Warning_LabelInheritanceUponCreation_FromDashboard_DatasetTile":"PinTile_Warning_LabelInheritanceUponCreation_FromDataset",[Ce])}:null}))},re.\u0275fac=function(F){return new(F||re)(S.\u0275\u0275directiveInject(Ie.yh),S.\u0275\u0275directiveInject(Ue.o),S.\u0275\u0275directiveInject(ht.x),S.\u0275\u0275directiveInject(J.D),S.\u0275\u0275directiveInject(Et.vZ),S.\u0275\u0275directiveInject(Ct.m),S.\u0275\u0275directiveInject(We.L),S.\u0275\u0275directiveInject(bt.E),S.\u0275\u0275directiveInject(Pe.u),S.\u0275\u0275directiveInject(Ne.F),S.\u0275\u0275directiveInject(X.y0),S.\u0275\u0275directiveInject(E.WI),S.\u0275\u0275directiveInject(le.d))},re.\u0275cmp=S.\u0275\u0275defineComponent({type:re,selectors:[["pin-tile-dialog-new"]],decls:38,vars:32,consts:[[1,"pin-tile-dialog"],[1,"tile-container"],["data-testid","pin-tile-preview",1,"tile-preview"],["class","live-report-state",4,"ngIf"],[4,"ngIf"],["class","tile-theme-selector",4,"ngIf"],[1,"pin-modal-body"],[1,"close-container"],[1,"infonav-dialogCloseIcon","close-button",3,"click"],[1,"close","glyphicon","pbi-glyph-close","glyph-mini"],[1,"pin-modal-title"],["localize","ReportContainer_PinToDashboardTitle","localize-tooltip","ReportContainer_PinToDashboardTitle",1,"title","trimmedTextWithEllipsis"],["localize","ReportContainer_SelectExistingOrCreateNewDashboardMessage",1,"select-create-message"],["pbi-auto-focus","",1,"pin-modal-form"],["localize","ReportContainer_WhereToPinMessage",1,"pin-message"],[1,"pin-mode-radio",3,"ngModel","ngModelChange"],["data-testid","pin-existing-dashboard","value","existing",1,"existing-dashboard",3,"disabled","checked"],["value","new","data-testid","pin-new-dashboard",1,"new-dashboard",3,"checked"],[1,"warning-message-container"],["class","liveReport",4,"ngIf"],["class","noReshareWarning",4,"ngIf"],["class","informationProtectionWarning",4,"ngIf"],[1,"pin-modal-footer"],["data-testid","pin-btn",1,"pbi-fluent-button","primary",3,"disabled","click"],["data-testid","cancel-btn",1,"pbi-fluent-button",3,"click"],[1,"live-report-state"],["localize","PinLiveReport_Preview",1,"previewSection"],["localize","PinLiveReport_SavedState"],[3,"disableInteractions","shouldOverrideCustomTheme","contract","themeName"],[1,"tile-theme-selector"],["localize","ReportContainer_TileFormattingMessage",1,"theme-target-message"],[1,"theme-target-radio",3,"ngModel","ngModelChange"],["value","destination","data-testid","destination-theme",1,"destination-theme"],["value","current","data-testid","current-theme",1,"current-theme",3,"checked"],["localize","ReportContainer_SelectExistingDashboard","for","pinDialogDashboardSelect"],["pbiMatSelect","","class","pbi-modern-select","data-testid","selected-dashboard","panelClass","pbi-modern-select-panel themeableElement","name","dashboardPicker","aria-labelledby","pinDialogDashboardSelect",3,"value","valueChange","selectionChange",4,"ngIf"],["pbiMatSelect","","data-testid","selected-dashboard","panelClass","pbi-modern-select-panel themeableElement","name","dashboardPicker","aria-labelledby","pinDialogDashboardSelect",1,"pbi-modern-select",3,"value","valueChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["pbiLabel",""],["pbiInput","","ng-trim","false","min","1","maxlength","500","type","text","data-testid","pin-new-dashboard-name",1,"pbi-text-input",3,"ngModel","ngModelChange"],[1,"liveReport"],[3,"modulePath","componentId","inputArgs"],[1,"noReshareWarning"],[1,"informationProtectionWarning"]],template:function(F,te){1&F&&(S.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2),S.\u0275\u0275template(3,dn,3,0,"div",3),S.\u0275\u0275template(4,tn,4,8,"ng-container",4),S.\u0275\u0275pipe(5,"async"),S.\u0275\u0275elementEnd(),S.\u0275\u0275template(6,sn,9,8,"div",5),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(7,"div",6)(8,"div",7)(9,"button",8),S.\u0275\u0275listener("click",function(){return te.onClose()}),S.\u0275\u0275pipe(10,"localize"),S.\u0275\u0275element(11,"i",9),S.\u0275\u0275elementEnd()(),S.\u0275\u0275elementStart(12,"div",10),S.\u0275\u0275element(13,"h2",11)(14,"p",12),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(15,"div",13),S.\u0275\u0275element(16,"p",14),S.\u0275\u0275elementStart(17,"pbi-radio-group",15),S.\u0275\u0275listener("ngModelChange",function(Me){return te.pinMode=Me}),S.\u0275\u0275elementStart(18,"pbi-radio-button",16),S.\u0275\u0275text(19),S.\u0275\u0275pipe(20,"localize"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(21,"pbi-radio-button",17),S.\u0275\u0275text(22),S.\u0275\u0275pipe(23,"localize"),S.\u0275\u0275elementEnd()(),S.\u0275\u0275template(24,q,4,3,"section",4),S.\u0275\u0275template(25,fe,5,4,"pbi-form-field",4),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(26,"div",18),S.\u0275\u0275template(27,be,2,5,"div",19),S.\u0275\u0275template(28,Re,2,5,"div",20),S.\u0275\u0275template(29,Ke,2,5,"div",21),S.\u0275\u0275pipe(30,"async"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(31,"div",22)(32,"button",23),S.\u0275\u0275listener("click",function(){return te.onPinClick()}),S.\u0275\u0275text(33),S.\u0275\u0275pipe(34,"localize"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(35,"button",24),S.\u0275\u0275listener("click",function(){return te.onCancelClick()}),S.\u0275\u0275text(36),S.\u0275\u0275pipe(37,"localize"),S.\u0275\u0275elementEnd()()()()),2&F&&(S.\u0275\u0275advance(3),S.\u0275\u0275property("ngIf",te.isPinLiveReport),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",S.\u0275\u0275pipeBind1(5,18,te.currentContract$)),S.\u0275\u0275advance(2),S.\u0275\u0275property("ngIf",te.isThemeSwitcherAvailable),S.\u0275\u0275advance(3),S.\u0275\u0275attribute("aria-label",S.\u0275\u0275pipeBind1(10,20,"Close")),S.\u0275\u0275advance(8),S.\u0275\u0275property("ngModel",te.pinMode),S.\u0275\u0275advance(1),S.\u0275\u0275property("disabled",!te.hasAvailableDashboards)("checked",te.hasAvailableDashboards),S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate1(" ",S.\u0275\u0275pipeBind1(20,22,"ReportContainer_UseExistingDashboardRadioText")," "),S.\u0275\u0275advance(2),S.\u0275\u0275property("checked",!te.hasAvailableDashboards),S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate1(" ",S.\u0275\u0275pipeBind1(23,24,"ReportContainer_UseNewDashboardRadioText")," "),S.\u0275\u0275advance(2),S.\u0275\u0275property("ngIf","existing"===te.pinMode),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","new"===te.pinMode),S.\u0275\u0275advance(2),S.\u0275\u0275property("ngIf",te.isPinLiveReport),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",te.isNotFullyResharable),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",S.\u0275\u0275pipeBind1(30,26,"existing"!==te.pinMode&&te.informationProtectionIUCWarning$)),S.\u0275\u0275advance(3),S.\u0275\u0275property("disabled",!te.canPin()),S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate1(" ",S.\u0275\u0275pipeBind1(34,28,te.isPinLiveReport?"PinLiveReport_PinLive":"ReportContainer_Pin")," "),S.\u0275\u0275advance(3),S.\u0275\u0275textInterpolate(S.\u0275\u0275pipeBind1(37,30,"PBI_Button_Label_Cancel")))},dependencies:[me.NgForOf,me.NgIf,ye.Fj,ye.JJ,ye.nD,ye.On,we.X,qe.r,Ye.o,Ve.d,gt.bP,gt.ug,gt.nm,He.x,ge.x8,Ze.CK,dt.R,At.r,Lt.h,me.AsyncPipe,$t.F],styles:["[_nghost-%COMP%]{padding:24px;display:flex;flex-direction:column;color:rgba(0,0,0,.87)}.tile-container[_ngcontent-%COMP%]{background-color:#f4f4f4;width:60%;margin:-24px 0 -24px -24px}.pin-tile-dialog[_ngcontent-%COMP%]{display:flex;height:100%}.live-report-state[_ngcontent-%COMP%]{display:flex;margin-left:5px;margin-bottom:4px;font-size:12px;width:270px;color:var(--fluent-theme-neutral-secondary-color, #605E5C)}.live-report-state[_ngcontent-%COMP%]   .previewSection[_ngcontent-%COMP%]{font-family:Segoe UI Bold,wf_segoe-ui_bold,helvetica,arial,sans-serif;margin-right:4px}.tile-preview[_ngcontent-%COMP%]{width:270px;height:180px;display:flex;margin-left:auto;margin-right:auto;margin-top:45px;flex-direction:column}.tile-theme-selector[_ngcontent-%COMP%]{margin-left:24px}.tile-theme-selector[_ngcontent-%COMP%]   .theme-target-message[_ngcontent-%COMP%]{font-family:Segoe UI Semibold,wf_segoe-ui_semibold,helvetica,arial,sans-serif;margin-bottom:0;margin-top:5px}.pin-modal-body[_ngcontent-%COMP%]{display:flex;width:50%;flex-direction:column;margin:0 20px 0 27px}.pin-modal-title[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:26px;font-weight:400;margin-bottom:4px;margin-top:0}.select-create-message[_ngcontent-%COMP%]{font-size:12px}pbi-radio-button[_ngcontent-%COMP%]{margin-bottom:10px;display:block}.pin-message[_ngcontent-%COMP%]{font-family:Segoe UI Semibold,wf_segoe-ui_semibold,helvetica,arial,sans-serif;margin-top:0;margin-bottom:4px}.pin-modal-footer[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:flex-end}.pin-modal-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:5px}.pin-modal-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif}.warning-message-container[_ngcontent-%COMP%]{margin-top:12px}.close-container[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;margin-right:-25px;margin-top:-10px}.close-container[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{padding:0;border:none;background:none;width:12px}"]}),re}(),Ge=l(1731),_t=l(44408),Pt=l(55710),at=l(67659),jt=l(31),St=l(46055),H=l(32288),B=l(26409),ie=l(77906),de=l(95859),ve=l(76966),Fe=l(14525),Ae=l(93367),pt=l(17953),Wt=l(59951),Ht=[{componentType:rt,componentIdentifier:"PinTileDialogComponentId"}],fn=function(){function re(){}return re.\u0275fac=function(F){return new(F||re)},re.\u0275mod=S.\u0275\u0275defineNgModule({type:re}),re.\u0275inj=S.\u0275\u0275defineInjector({providers:[Ge.v],imports:[me.CommonModule,ye.u5,jt.Y,H.J,Pt.jT,_t.Ps,de.v,St.b,Ae.U,Wt.v,Fe.g,pt.F,ge.uw,B.z,ie.N.withLazyScopedServices([{serviceName:"TileoptionsActionsService",modulePath:"@powerbi/TileoptionsActions/tileoptions-actions.module#TileoptionsActionsModule"}]),ve.c.withManifest(Ht),at._]}),re}()},1731:function($e,Te,l){"use strict";l.d(Te,{v:function(){return o}});var M=l(81337),E=l(50544),Y=l(1316),T=l(40093),i=l(59694),c=l(38078),u=l(46544),f=l(50423),h=l(49092),m=l(66977),o=function(){function b(y,x,A){this.dataProxy=y,this.visualPluginOps=x,this.telemetryService=A}return b.prototype.convertTileData=function(y,x){try{y.tileDataSet=this.parseTileData(y,x.tileDataType)}catch(A){throw this.telemetryService.logEvent(Y.UH,{tileType:E.YU[E.YU.composite],message:(0,i.W)("DsrParseError:{0} with modelId:{1} and tileId:{2}",A.message,y.modelId.toString(),y.id.toString())}),c.b$.ensureError(A)}return y.tileDataSet},b.prototype.requiresData=function(y){var x=this.visualPluginOps;if(y){if(y&&y.type){if(!x)return!0;if(!x.isQueryVisual(y.type))return!1}return!0}},b.prototype.getVisualDefinitionData=function(y,x,A){return(0,M.mG)(this,void 0,void 0,function(){var ce;return(0,M.Jh)(this,function(K){switch(K.label){case 0:return y.type!==E.YU.composite?[2,null]:this.requiresData(x)?(ce=this.convertTileData(y,A),[4,this.readDataView(x,ce,!1)]):[2,{dataView:null}];case 1:return[2,K.sent()]}})})},b.prototype.readDataView=function(y,x,A){return(0,M.mG)(this,void 0,void 0,function(){var R,K,N;return(0,M.Jh)(this,function(ae){switch(ae.label){case 0:return K={type:x.type,query:{dataSources:null,command:x.data},allowResultFromClientCache:A,perfId:R=y.type,kinds:this.visualPluginOps.dataViewKinds(R)},[4,this.dataProxy.execute(K)];case 1:return[2,{dataView:(N=ae.sent())&&N.dataReaderResult?N.dataReaderResult.dataView:null,dataViewSource:N&&N.dataViewSource?N.dataViewSource:null}]}})})},b.prototype.parseTileData=function(y,x){var R,A=(0,c.BL)("Parse tile data");try{if(y.tileDataBinaryBase64Encoded){var ce=(0,T.Wh)(y.tileDataBinaryBase64Encoded);R=JSON.parse(ce)}else y.tileData&&(R=JSON.parse(y.tileData));return{type:x,data:R}}finally{A()}},b.\u0275fac=function(x){return new(x||b)(f.\u0275\u0275inject(h.d),f.\u0275\u0275inject(m.f),f.\u0275\u0275inject(u.y0))},b.\u0275prov=f.\u0275\u0275defineInjectable({token:b,factory:b.\u0275fac}),b}()},70785:function($e,Te,l){"use strict";l.d(Te,{k:function(){return i}});var M=l(62458),E=l(50423),Y=l(81213),i=function(){function c(u){this.errorService=u,M.fF.assertValue(u,"errorService")}return c.prototype.onErrorIconClicked=function(u){var f=u.errorTitle,h=u.errorTitle,m=u.errorDetails;if(u.isError&&f&&h){var o=m&&m.displayableErrorInfo;if(o){for(var b=0,y=o;b<y.length;b++){var x=y[b];if(x.errorInfoValue){f=x.errorInfoKey,h=x.errorInfoValue;break}}this.errorService.error(m.message,"Tile_FailedToDisplay",{source:m.source,errorDetails:m.message,displayableErrorInfo:m.displayableErrorInfo,debugErrorInfo:m.debugErrorInfo,helpLink:m.helpLink,hideErrorHelperText:m.hideErrorHelperText})}}},c.prototype.getTileDisplayError=function(u){return null},c.prototype.getTileDisplayErrorFromConfig=function(u){return null},c.prototype.isVisualSupportedInErrorState=function(u){var f=u.composite,h=u.realTime;return!(!f||this.shouldShowCompositeTileError(f)||!f.tileData||!f.tileData.data)||!!(h&&h.visual&&h.visual.data)},c.prototype.shouldShowCompositeTileError=function(u){return u.errorDetails&&u.errorDetails.forceShowError},c.\u0275fac=function(f){return new(f||c)(E.\u0275\u0275inject(Y.T))},c.\u0275prov=E.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac,providedIn:"root"}),c}()},10367:function($e,Te,l){"use strict";l.d(Te,{y:function(){return E}});var E=new(l(50423).InjectionToken)("TileOptionsActionsServiceInjectionToken")},51291:function($e,Te,l){"use strict";l.d(Te,{D:function(){return ce}});var M=l(81337),E=l(3408),Y=l(18405),T=l(89424),i=l(50544),c=l(7600),u=l(43286),f=l(48787),h=l(14172),m=l(50423),o=l(85732),b=l(98873),y=l(87041),x=l(65692),A=l(58938),R=l(65181),ce=function(){function K(N,X,ae,xe,Be,he){this.store=N,this.folderService=X,this.permissionService=ae,this.dlgService=xe,this.packageStore=Be,this.localizationService=he,this.modalWidth="675px"}return K.prototype.showPinVisualFromWorkbookDialog=function(N,X,ae){return(0,M.mG)(this,void 0,void 0,function(){return(0,M.Jh)(this,function(xe){return this.showModernPinTileDlg({pinTileContext:2,tileContract:N,pinEvent:X,scenario:ae}),[2]})})},K.prototype.showPinVisualFromDashboardDialogModern=function(N,X){return(0,M.mG)(this,void 0,void 0,function(){return(0,M.Jh)(this,function(ae){return this.showModernPinTileDlg({pinTileContext:0,tileContract:N,pinEvent:X}),[2]})})},K.prototype.pinVisual=function(N){return(0,M.mG)(this,void 0,void 0,function(){return(0,M.Jh)(this,function(X){return this.showModernPinTileDlg({pinTileContext:1,pinData:N}),[2]})})},K.prototype.pinReportPage=function(N){return(0,M.mG)(this,void 0,void 0,function(){return(0,M.Jh)(this,function(X){return this.showModernPinTileDlg({pinReportPageArgs:N}),[2]})})},K.prototype.canPinReportPage=function(N){return!this.permissionService.isActiveWorkspaceIsReadOnlyLegacy&&this.canPinFromModel(N.model,N.modelId)},K.prototype.canPinTileModern=function(N,X,ae){return!this.permissionService.isActiveWorkspaceIsReadOnlyLegacy&&N.type!==i.YU.model&&(N.query&&!_.isEmpty(N.query.modelQuery)?_.isNumber(N.modelId)&&this.canPinFromModel(ae,N.modelId):!!_.isNumber(N.dashboardId)&&!!X&&(!X.originalPackageId||this.canPin(X.permissions,X.originalPackageId)))},K.prototype.canPinFromModel=function(N,X){var xe;return N?this.canPin(N.permissions,N.packageId):!!_.isNumber(X)&&(this.store.select(Y.vw).pipe((0,f.q)(1),(0,h.U)(function(Be){return Be[(0,E.EL)({id:X})]})).subscribe(function(Be){return xe=Be}),!!xe&&this.canPin(xe.permissions,xe.packageId))},K.prototype.canPin=function(N,X){return!(!(0,u.yE)(N,1)||(0,u.yE)(N,17)&&(!this.folderService.isMyWorkspace||(this.store.select(T.rT).pipe((0,f.q)(1),(0,h.U)(function(xe){return xe[X]})).subscribe(function(xe){return ae=xe}),!ae)));var ae},K.prototype.showModernPinTileDlg=function(N){var X={bindings:N,dialogName:"PinTileDialogComponentId",componentName:"PinTileDialogComponentId",config:{width:this.modalWidth,ariaLabel:this.localizationService.get("ReportContainer_PinToDashboardTitle")}};this.dlgService.openHostDialog(X)},K.prototype.getSourceOrigin=function(N,X){return(0,M.mG)(this,void 0,void 0,function(){var ae;return(0,M.Jh)(this,function(xe){return _.isNumber(X)&&(ae=this.packageStore.findById(X))&&ae.packageType===c.yR.AppInstance?[2,"App"]:N?1===N||5===N?[2,"Shared"]:[2,"Owned"]:[2,"Unknown"]})})},K.\u0275fac=function(X){return new(X||K)(m.\u0275\u0275inject(o.yh),m.\u0275\u0275inject(b.s),m.\u0275\u0275inject(y.$A),m.\u0275\u0275inject(A.x),m.\u0275\u0275inject(x.V),m.\u0275\u0275inject(R.o))},K.\u0275prov=m.\u0275\u0275defineInjectable({token:K,factory:K.\u0275fac,providedIn:"root"}),K}()},82053:function($e,Te,l){"use strict";l.d(Te,{U:function(){return i},d:function(){return T}});var M=l(81337),E=l(50423),Y=l(27119),T=function(c){function u(f,h){void 0===f&&(f="Unknown");var m=c.call(this,h)||this;return m.operation=f,m}return(0,M.ZT)(u,c),u}(Error),i=function(){function c(u){this.storageUsageService=u}return Object.defineProperty(c.prototype,"quotaLimitInMB",{get:function(){return this.storageUsageService.quotaLimitInMB},enumerable:!1,configurable:!0}),c.prototype.getUsageModels=function(u,f){return this.storageUsageService.getUsageModels(u,f)},c.prototype.getUsage=function(){return this.storageUsageService.getUsage()},c.prototype.checkQuotaExceeded=function(u,f){return void 0===u&&(u="Unknown"),this.storageUsageService.checkQuotaExceeded(u,f)},c.prototype.showQuotaExceedDialog=function(){this.storageUsageService.showQuotaExceedDialog()},c.prototype.isInVisibleDashboard=function(u){return this.storageUsageService.isInVisibleDashboard(u)},c.\u0275fac=function(f){return new(f||c)(E.\u0275\u0275inject(Y.m))},c.\u0275prov=E.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac,providedIn:"root"}),c}()},12548:function($e,Te,l){"use strict";l.d(Te,{Z:function(){return q}});var M=l(81337),E=l(45665),Y=l(21429),T=l(35563),i=l(60756),c=l(90047),u=l(34031),f=l(41134),h=l(3535),m=l(34073),o=l(74076),b=l(60134),y=l(64115),x=l(90807),A=l(81213),R=l(14463),ce=l(26610),K=l(58317),N=l(2142),X=l(50600),ae=l(50550),xe=l(45034),Be=l(82053),he=l(46544),Se=l(11547),Le=l(9936),ct=l(59017),it=l(37272),ke=l(82762),S=l(14172),Ie=l(42195),Ue=l(48787),ht=l(59822),J=l(23558),Et=l(81905),Ct=l(64344),We=l(50423),bt=l(85732),Pe=l(62458),Ne=l(77326),le=l(66531),me=l(9380),ye=function(){function fe(ee,be,Re){this.informationProtectionService=ee,this.informationProtectionUIService=be,this.featureSwitchService=Re}return fe.prototype.ensureMandatoryLabelPolicyOnArtifact=function(ee,be,Re,Ke,rt,Ge,_t){return(0,M.mG)(this,void 0,void 0,function(){var at,jt,St;return(0,M.Jh)(this,function(H){switch(H.label){case 0:if(!(ee&&Ke&&be&&Re&&rt&&Ge))return Pe.fF.assertFail("ensureMandatoryLabelPolicyOnArtifact: missing required parameters"),[2,!0];H.label=1;case 1:return H.trys.push([1,5,,6]),[4,this.informationProtectionService.isLabelingRequiredForArtifact(Ke,ee,this.isDefaultLabelSupported(rt)).toPromise()];case 2:return H.sent()?[4,this.informationProtectionUIService.showInformationProtectionSelectionDialog(rt,Ke,Ge,null,_t,null)]:[2,!0];case 3:return at=H.sent(),_.isEmpty(at)?[2,!1]:[4,this.informationProtectionService.upsertArtifactInformationProtection(at,ee,be,Re,Ke).toPromise()];case 4:return(jt=H.sent())&&jt.isInvalid?[2,!1]:[2,!0];case 5:return St=H.sent(),this.informationProtectionService.logMandatoryLabelingContinueDespiteFailure(Ke,rt,Ge,St.message),[2,!0];case 6:return[2]}})})},fe.prototype.ensureMandatoryLabelPolicyOnNewArtifact=function(ee,be,Re,Ke){return(0,M.mG)(this,void 0,void 0,function(){var rt,_t,Pt;return(0,M.Jh)(this,function(at){switch(at.label){case 0:rt={canContinue:!0,selectedLabelId:null},at.label=1;case 1:return at.trys.push([1,4,,5]),[4,this.informationProtectionService.isLabelingRequired(ee,Ke??this.isDefaultLabelSupported(be)).toPromise()];case 2:return at.sent()?[4,this.informationProtectionUIService.showInformationProtectionSelectionDialog(be,ee,null,null,Re)]:[2,rt];case 3:return[2,{canContinue:!!(_t=at.sent()),selectedLabelId:_t}];case 4:return Pt=at.sent(),this.informationProtectionService.logMandatoryLabelingContinueDespiteFailure(ee,be,null,Pt.message),[2,rt];case 5:return[2]}})})},fe.prototype.ensureMandatoryLabelOnNewDashboard=function(ee,be){return(0,M.mG)(this,void 0,void 0,function(){var Re,Ke,rt;return(0,M.Jh)(this,function(Ge){switch(Ge.label){case 0:Re={canContinue:!0,selectedLabelId:null},Ge.label=1;case 1:return Ge.trys.push([1,4,,5]),[4,this.informationProtectionService.getArtifactUpstreamLabel(ee,be).toPromise()];case 2:return(Ke=Ge.sent())&&!Ke.isInvalid?[2,Re]:[4,this.ensureMandatoryLabelPolicyOnNewArtifact(X.B.Dashboard,"NewDashboard","EimInformationProtection_SelectSensitivityLabelDialog_Message_NewDashboard")];case 3:return[2,Ge.sent()];case 4:return rt=Ge.sent(),this.informationProtectionService.logMandatoryLabelingContinueDespiteFailure(X.B.Dashboard,"NewDashboard",null,rt.message),[2,Re];case 5:return[2]}})})},fe.prototype.ensureMandatoryLabelOnNewReport=function(ee,be,Re){return(0,M.mG)(this,void 0,void 0,function(){return(0,M.Jh)(this,function(Ke){return[2,this.ensureMandatoryLabelOnNewReportBase(0,ee,be,Re??!0)]})})},fe.prototype.ensureMandatoryLabelOnNewRdlReport=function(ee,be){return(0,M.mG)(this,void 0,void 0,function(){return(0,M.Jh)(this,function(Re){return[2,this.ensureMandatoryLabelOnNewReportBase(1,ee,be)]})})},fe.prototype.ensureMandatoryLabelOnNewReportBase=function(ee,be,Re,Ke){return(0,M.mG)(this,void 0,void 0,function(){var rt,Ge,_t,Pt,at,jt;return(0,M.Jh)(this,function(St){switch(St.label){case 0:if(rt={canContinue:!0,selectedLabelId:null},1===ee)Ge=X.B.RdlReport,_t="NewRdlReport",Pt=this.featureSwitchService.featureSwitches.EimInformationProtectionMandatoryLabelNewPaginatedReport;else{if(0!==ee)return[2,rt];Ge=X.B.Report,_t="NewReport",Pt=!0}if(!Pt)return[2,rt];if(!be&&!Re)return Pe.fF.assertFail("ensureMandatoryLabelOnNewReportBase: missing required parameters. Report type: "+ee.toString()),[2,rt];St.label=1;case 1:return St.trys.push([1,7,,8]),at=void 0,Re?[4,this.informationProtectionService.getArtifactUpstreamLabel(Re,null).toPromise()]:[3,3];case 2:return at=St.sent(),[3,5];case 3:return[4,this.informationProtectionService.getArtifactUpstreamLabel(null,be).toPromise()];case 4:at=St.sent(),St.label=5;case 5:return at&&!at.isInvalid?[2,rt]:[4,this.ensureMandatoryLabelPolicyOnNewArtifact(Ge,_t,"EimInformationProtection_SelectSensitivityLabelDialog_Message_NewReport",Ke)];case 6:return[2,St.sent()];case 7:return jt=St.sent(),this.informationProtectionService.logMandatoryLabelingContinueDespiteFailure(Ge,_t,null,jt.message),[2,rt];case 8:return[2]}})})},fe.prototype.isDefaultLabelSupported=function(ee){switch(ee){case"NewDashboard":case"NewReport":case"NewDataset":case"SaveEditedReport":return!0;default:return!1}},fe.\u0275fac=function(be){return new(be||fe)(We.\u0275\u0275inject(Ne.u),We.\u0275\u0275inject(le.F),We.\u0275\u0275inject(me.vZ))},fe.\u0275prov=We.\u0275\u0275defineInjectable({token:fe,factory:fe.\u0275fac,providedIn:"root"}),fe}(),we=l(65181),qe=l(44204),Ye=l(76072),Ve=l(43025),gt=function(fe){function ee(){return null!==fe&&fe.apply(this,arguments)||this}return(0,M.ZT)(ee,fe),ee}(Error),He=function(fe){function ee(){return null!==fe&&fe.apply(this,arguments)||this}return(0,M.ZT)(ee,fe),ee}(Error),ge=function(){function fe(ee,be,Re,Ke,rt,Ge,_t,Pt,at,jt,St){var H=this;this.action$=ee,this.injector=be,this.store=Re,this.quotaService=Ke,this.informationProtectionArtifactService=rt,this.localizationService=Ge,this.notificationToastService=_t,this.telemetryService=Pt,this.lazyProviderModern=at,this.globalEventBridge=jt,this.subfolderContextService=St,this.addTemporaryTile$=(0,i.GW)(function(){return H.action$.pipe((0,i.l4)(c.pE),(0,S.U)(function(B){return B.payload}),(0,Ie.zg)(function(B){return(0,Se.of)(new E.Ph({id:B.tile.objectId}))}))}),this.saveTile$=(0,i.GW)(function(){return H.action$.pipe((0,i.l4)(E.$f),(0,Ie.zg)(function(B){return(0,Le.D)((0,Se.of)(B.payload),H.store.select((0,T.YH)({id:B.payload.tileId})).pipe((0,Ue.q)(1)))}),(0,Ie.zg)(function(B){var ie=B[0],de=B[1],ve=ie.prevTile,Fe=H.telemetryService.startEvent(ie.eventFactory,{readOnlyTileEdited:!1,titleEdited:de.displayText!==ve.displayText,subTitleEdited:de.subDisplayText!==ve.subDisplayText,actionEdited:de.action!==ve.action,configEdited:de.config!==ve.config});return H.saveTile(ve,de,Fe.event).pipe((0,S.U)(function(){return Fe.resolve(),new E.vy((0,M.pi)((0,M.pi)({},ie),{tile:de}))}),(0,ht.K)(function(Ae){return 401===Ae.status?(Fe.event.info.readOnlyTileEdited=!0,Fe.resolve()):Fe.reject(),H.errorService.error(H.localizationService.get("TileEditor_UpdateFailed"),"TileEditor_UpdateFailed",{requestId:Ae.requestId,statusCode:Ae.status.toString()}),(0,Se.of)(new E.XH(ie))}))}))}),this.saveTileSuccess$=(0,i.GW)(function(){return H.action$.pipe((0,i.l4)(E.zl),(0,Ie.zg)(function(B){return(0,Le.D)((0,Se.of)(B.payload),H.store.select(m.ml).pipe((0,Ue.q)(1)))}),(0,Ie.zg)(function(B){var ie=B[0],de=B[1],ve=[new E.zn];return de&&ve.push(new u.lN({id:ie.prevTile.dashboardId,typeOfContentPackItem:ce.m.Dashboard})),ve}))}),this.pinToExistingDashboard$=(0,i.GW)(function(){return H.action$.pipe((0,i.l4)(c.r6),(0,S.U)(function(B){return B.payload}),(0,Ie.zg)(function(B){return(0,ct.aj)([(0,Se.of)(B),H.store.select(y.l1,{id:B.dashboardId}),H.store.select(o.S6)]).pipe((0,Ue.q)(1))}),(0,Ie.zg)(function(B){var ie=B[0],de=B[1],Fe=H.checkDashboardLabel(de,B[2].displayName);return(0,ct.aj)([(0,Se.of)(ie),(0,Se.of)(de),Fe]).pipe((0,Ue.q)(1))}),(0,Ie.zg)(function(B){var ie,de=B[0];return B[2]?H.addTile(B[1],de.tile,null===(ie=de.telemetryEvent)||void 0===ie?void 0:ie.event).pipe((0,Ie.zg)(function(Ae){return(0,Se.of)(new c.JA({dashboardId:de.dashboardId,tile:de.tile,tileFromService:Ae.data}))}),(0,ht.K)(function(Ae){var pt;return"AddTileRequestTooLarge"===(null===(pt=Ae?.error)||void 0===pt?void 0:pt.code)&&H.errorService.error(H.localizationService.get("PinTile_Error_TooLargeDetails"),"PinTile_Error_TooLarge",{title:H.localizationService.get("PinTile_Error_TooLarge"),requestId:Ae.requestId,statusCode:Ae.status.toString(),showAdditionalErrorInfo:!1}),(0,Se.of)(new c.oO({dashboardId:de.dashboardId,tileId:de.tile.objectId}))})):(0,it.c)()}))}),this.pinToExistingDashboardSuccess$=(0,i.GW)(function(){return H.action$.pipe((0,i.l4)(c.bI),(0,S.U)(function(B){return B.payload}),(0,Ie.zg)(function(B){return(0,ct.aj)([(0,Se.of)(B),H.store.select((0,T.Is)({objectId:B.dashboardId}))]).pipe((0,Ue.q)(1))}),(0,Ie.zg)(function(B){var ie=B[0];return B[1].some(function(Fe){return H.hasLayoutDefinition(1,Fe)})||H.loadMobileAuthoringService().then(function(){H.mobileAuthoringDialogService.showCreateMobileLayoutMessage(ie.dashboardId)}),(0,it.c)()}))}),this.pinToNewDashboard$=(0,i.GW)(function(){return H.action$.pipe((0,i.l4)(c.C7),(0,S.U)(function(B){var ie;if(null===(ie=B.payload.name)||void 0===ie||!ie.trim())throw new He("name is empty");if(H.quotaService.checkQuotaExceeded("AddDashboard"))throw new Be.d("AddDashboard","dashboard quota exceeded");return B.payload}),(0,Ie.zg)(function(B){return(0,Le.D)((0,Se.of)(B),H.checkMandatoryLabel(B.tile).pipe((0,S.U)(function(ie){if(!ie.canContinue)throw new gt("no mandatory label");return ie})),H.store.select(o.S6).pipe((0,Ue.q)(1)))}),(0,Ie.zg)(function(B){var ie=B[0],de=ie.name,ve=ie.tile,Fe=ie.telemetryEvent,Ae=B[1],pt=B[2];return(0,Le.D)((0,Se.of)({tile:ve,telemetryEvent:Fe,selectedGroup:pt}),H.addDashboard(de,pt.folderId,ve.reportId,ve.modelId,Ae,Fe),H.store.select(b.aR).pipe((0,Ue.q)(1)))}),(0,Ie.zg)(function(B){var ie=B[0],de=ie.tile,ve=ie.telemetryEvent,Fe=ie.selectedGroup,Ae=B[1],pt=B[2];if(H.quotaService.checkQuotaExceeded("AddTile"))throw new Be.d("AddTile","tile quota exceeded");var Wt=Object.assign({},Ae.data,{permissions:7,ownerInfo:(0,h.I)(pt,Fe)});return H.addTile(Wt,de,ve?.event).pipe((0,Ie.zg)(function(Ht){return H.loadMobileAuthoringService().then(function(){H.mobileAuthoringDialogService.showCreateMobileLayoutMessage(Wt.objectId)}),(0,Se.of)(new c.o7({dashboard:Wt,tile:de,tileFromService:Ht.data}))}))}),(0,ht.K)(function(B){var ie,de;if(B instanceof Error)return(0,Se.of)(new c.Iz({message:B.message}));var ve=B,Fe=ve.status.toString(),Ae=ve.requestId,pt=null===(ie=ve.error)||void 0===ie?void 0:ie.message;return"AddTileRequestTooLarge"===(null===(de=B.error)||void 0===de?void 0:de.code)?H.errorService.error(H.localizationService.get("PinTile_Error_TooLargeDetails"),"PinTile_Error_TooLarge",{title:H.localizationService.get("PinTile_Error_TooLarge"),requestId:ve.requestId,statusCode:ve.status.toString(),showAdditionalErrorInfo:!1}):401!==B.status&&H.errorService.error(H.localizationService.get("Dashboard_FailToCreateDashboardMessage"),"Dashboard_FailToCreateDashboard",{requestId:ve.requestId,statusCode:ve.status.toString()}),(0,Se.of)(new c.Iz({statusCode:Fe,requestId:Ae,message:pt}))}))}),this.saveNewTile$=(0,i.GW)(function(){return H.action$.pipe((0,i.l4)(c.qV),(0,S.U)(function(B){return B.payload}),(0,Ie.zg)(function(B){return(0,Le.D)((0,Se.of)(B),H.store.select((0,T.YH)({id:B.tileId})).pipe((0,Ue.q)(1)))}),(0,Ie.zg)(function(B){var ie,de=B[0],ve=B[1];return ve?H.addTile(de.dashboard,ve,null===(ie=de.telemetryEvent)||void 0===ie?void 0:ie.event).pipe((0,Ie.zg)(function(Fe){return(0,Se.of)(new c.ZC({dashboardId:de.dashboard.objectId,tile:ve,tileFromService:Fe.data}))}),(0,ht.K)(function(Fe){var Ae,pt;return 413===Fe.status?(Ae=H.localizationService.get("PinTile_Error_TooLarge"),pt=H.localizationService.get("PinTile_Error_TooLargeDetails")):(Ae=H.localizationService.get("PinTile_Error"),pt=H.localizationService.get("PinTile_Error_DefaultDetails")),H.notificationToastService.notify({title:Ae,message:pt,notificationType:2}),(0,Se.of)(new c.Nh({dashboardId:de.dashboard.objectId,tileId:ve.objectId}))})):[]}))}),this.removeTile$=(0,i.GW)(function(){return H.action$.pipe((0,i.l4)(c.Fm),(0,S.U)(function(B){return B.payload}),(0,Ie.zg)(function(B){return(0,Le.D)((0,Se.of)(B),H.store.select((0,T.YH)({id:B.tileId})).pipe((0,Ue.q)(1)))}),(0,Ie.zg)(function(B){var ie=B[0],de=B[1];return de?H.removeTile(de.id,ie.telemetryEvent.event).pipe((0,Ie.zg)(function(ve){return(0,Se.of)(new c.Rr({dashboardId:ie.dashboardId,tileId:de.objectId}))}),(0,ht.K)(function(ve){return(0,Se.of)(new c.Jr({dashboardId:ie.dashboardId,tileId:de.objectId}))})):[]}))}),this.updatePositionAndSize$=(0,i.GW)(function(){return H.action$.pipe((0,i.l4)(E._n),(0,S.U)(function(B){return B.payload}),(0,Ie.zg)(function(B){return(0,Le.D)((0,Se.of)(B),H.store.select(y.l1,{id:B.dashboardId}).pipe((0,Ue.q)(1)),H.store.select(T.yN).pipe((0,Ue.q)(1)))}),(0,Ie.zg)(function(B){var ie=B[0],de=B[1],Fe=(0,Y.zA)(ie.updates,B[2],ie.layoutStrategy);return H.updateSizeAndPositions(de,Fe,ie.telemetryEvent.event).pipe((0,Ie.zg)(function(){var Ae;return null===(Ae=ie.telemetryEvent)||void 0===Ae||Ae.resolve(),(0,Se.of)(new E.d$({dashboardId:ie.dashboardId,updates:Fe}))}),(0,ht.K)(function(Ae){return(0,Se.of)(new E.ip({dashboardId:ie.dashboardId,updates:Fe}))}))}))}),this.ensureDashboard$=(0,i.GW)(function(){return H.action$.pipe((0,i.l4)(c.EC),(0,S.U)(function(B){return B.payload}),(0,J.M)(H.store.select(y.AE)),(0,Ie.zg)(function(B){var ve=B[1][B[0].id];return ve?(0,Se.of)(new c.i({id:ve.id,workspaceId:ve.workspaceId})):(0,it.c)()}))}),this.addOrUpdateTile$=(0,i.GW)(function(){return H.action$.pipe((0,i.l4)(E.ZV),(0,S.U)(function(B){return B.payload}),(0,Ie.zg)(function(B){return(0,Le.D)((0,Se.of)(B),H.store.select(y.W$).pipe((0,Ue.q)(1)))}),(0,Ie.zg)(function(B){var ie=B[0],de=B[1];return H.batchGetTiles(ie.tileIds,ie.dashboardId).pipe((0,Ie.zg)(function(ve){return(0,Se.of)(new c.zA((0,M.pi)({dashboardObjectId:de.objectId,isDataChange:ie.isDataChange},ve)))}),(0,ht.K)(function(ve){return(0,it.c)()}))}))}),this.RefreshTileData$=(0,i.GW)(function(){return H.action$.pipe((0,i.l4)(E.h1),(0,S.U)(function(B){return B.payload}),(0,Ie.zg)(function(B){return(0,Le.D)((0,Se.of)(B),H.store.select(y.W$).pipe((0,Ue.q)(1)))}),(0,Ie.zg)(function(B){var ie,Fe,de=B[0],ve=B[1];return de.hideLoader||(Fe=H.notificationToastService.notify({message:H.localizationService.get("Dashboard_RefreshStart"),notificationType:3})),ve?H.refreshTileData(ve,null===(ie=de?.telemetryEvent)||void 0===ie?void 0:ie.event).pipe((0,Ie.zg)(function(Ae){if(de.hideLoader||(H.notificationToastService.hide(Fe),H.notificationToastService.notify({message:H.localizationService.get("Dashboard_RefreshCompletedSuccess"),notificationType:4})),Ae&&Ae.data&&!_.isEmpty(Ae.data.tileErrors))for(var pt=0,Wt=Ae.data.tileErrors;pt<Wt.length;pt++){var Ht=Wt[pt];Ht.errorResponse.error.code===N.Px$&&H.globalEventBridge.publishToChannel(K.m,{modelIds:Ht.modelIds})}return(0,it.c)()}),(0,ht.K)(function(Ae){return H.notificationToastService.hide(Fe),H.errorService.error(H.localizationService.get("Dashboard_RefreshCompletedFailure"),"Dashboard_RefreshCompletedFailure",{requestId:Ae.requestId,statusCode:Ae.status.toString()}),(0,it.c)()})):it.E}))}),this.refreshTileDataPermissionsUponLoad$=(0,i.GW)(function(){return H.action$.pipe((0,i.l4)(f.bu),(0,Ie.zg)(function(){return(0,Se.of)(new E.r2)}))}),this.refreshTileDataPermissions$=(0,i.GW)(function(){return H.action$.pipe((0,i.l4)(E.zx),(0,i.IC)(function(){return H.store.select(y.W$).pipe((0,Ue.q)(1))}),(0,Ie.zg)(function(B){var ie=B[1];if(!_.isNil(ie)){for(var de=[],ve=0,Fe=ie.tiles;ve<Fe.length;ve++){var Ae=Fe[ve];20===Ae.errorCode&&de.push(Ae.id)}return _.isEmpty(de)?(0,it.c)():(0,Se.of)(new E.en({dashboardId:ie.id,tileIds:de}))}return(0,it.c)()}))}),this._errorService=new xe.o(function(){return H.injector.get(A.T)}),this._promiseFactory=new xe.o(function(){return H.injector.get(R.t)}),this._dashboardHttpService=new xe.o(function(){return H.injector.get(x.f)})}return fe.prototype.loadMobileAuthoringService=function(){return(0,M.mG)(this,void 0,void 0,function(){var ee;return(0,M.Jh)(this,function(be){switch(be.label){case 0:return ee=this,[4,this.lazyProviderModern.get("@powerbi/MobileDashboardAuthoring/module#MobileDashboardAuthoringModule","mobileAuthoringDialogService")];case 1:return ee.mobileAuthoringDialogService=be.sent(),[2]}})})},fe.prototype.addTile=function(ee,be,Re){return(0,ke.D)(this.dashboardHttpService.addTile(ee,be,Re))},fe.prototype.saveTile=function(ee,be,Re){return(0,ke.D)(this.dashboardHttpService.updateTile(ee,be,Re))},fe.prototype.removeTile=function(ee,be){return(0,ke.D)(this.dashboardHttpService.deleteTile(ee,be))},fe.prototype.addDashboard=function(ee,be,Re,Ke,rt,Ge){var _t=this;return this.subfolderContextService.selectedSubfolderId$.pipe((0,Ue.q)(1),(0,Et.w)(function(Pt){var at=(0,h.J)(ee,be,Pt);return(0,ke.D)(_t.dashboardHttpService.addDashboard(at,Ge&&Ge.event,Re,Ke,rt.selectedLabelId))}))},fe.prototype.checkMandatoryLabel=function(ee){return(0,ke.D)(this.informationProtectionArtifactService.ensureMandatoryLabelOnNewDashboard(ee.reportId,ee.modelId))},fe.prototype.checkDashboardLabel=function(ee,be){return(0,ke.D)(this.informationProtectionArtifactService.ensureMandatoryLabelPolicyOnArtifact(ee.id,ee.displayName,be,X.B.Dashboard,"AddTile",ee.objectId,"EimInformationProtection_SelectSensitivityLabelDialog_Message_Dashboard_PinTile"))},fe.prototype.updateSizeAndPositions=function(ee,be,Re){var Ke=this.dashboardHttpService.batchUpdateTileSizePosition(this.promiseFactory,ee,be,Re);return Ke?(0,ke.D)(Ke):(0,Se.of)()},fe.prototype.batchGetTiles=function(ee,be){return(0,ke.D)(this.dashboardHttpService.batchGetTiles(be,ee,void 0,!0))},fe.prototype.refreshTileData=function(ee,be){return(0,ke.D)(this.dashboardHttpService.refreshTileData(ee.id,ee.modelIds,be))},fe.prototype.hasLayoutDefinition=function(ee,be){var Re=be.$layoutConfig||be.layoutConfig&&JSON.parse(be.layoutConfig);return!!Re&&!!(0,ae.Br)(Re.layouts).withId(ee)},Object.defineProperty(fe.prototype,"errorService",{get:function(){return this._errorService.getValue()},enumerable:!1,configurable:!0}),Object.defineProperty(fe.prototype,"dashboardHttpService",{get:function(){return this._dashboardHttpService.getValue()},enumerable:!1,configurable:!0}),Object.defineProperty(fe.prototype,"promiseFactory",{get:function(){return this._promiseFactory.getValue()},enumerable:!1,configurable:!0}),fe.\u0275fac=function(be){return new(be||fe)(We.\u0275\u0275inject(i.eX),We.\u0275\u0275inject(We.Injector),We.\u0275\u0275inject(bt.yh),We.\u0275\u0275inject(Be.U),We.\u0275\u0275inject(ye),We.\u0275\u0275inject(we.o),We.\u0275\u0275inject(qe.Q),We.\u0275\u0275inject(he.y0),We.\u0275\u0275inject(Ye.E),We.\u0275\u0275inject(Ve.Z),We.\u0275\u0275inject(Ct.Nz))},fe.\u0275prov=We.\u0275\u0275defineInjectable({token:fe,factory:fe.\u0275fac}),fe}(),Ze=l(77476),dt=l(40176),At=l(15466),Lt=l(76521),$t=l(38244),dn=l(20092),tn=l(5334),sn=l(39195),pn=l(70986),un=l(45125),q=function(){function fe(ee){if(ee)throw new Error("TilesMetadatModule was already loaded.  It should only be imported once in AppModule")}return fe.\u0275fac=function(be){return new(be||fe)(We.\u0275\u0275inject(fe,12))},fe.\u0275mod=We.\u0275\u0275defineNgModule({type:fe}),fe.\u0275inj=We.\u0275\u0275defineInjector({imports:[Ze.CommonModule,bt.Aw.forFeature("tiles",T.F0),i.sQ.forFeature([ge]),sn.Zz,At.y.forRoot(),Lt.A3,pn.V.forRoot(),un.z,dn.o,dt.a,$t.f,tn.K]}),fe}()},42594:function($e,Te,l){"use strict";l.d(Te,{Q_:function(){return u},u:function(){return E},ws:function(){return T}});var M=l(64069),E=5,T=100,u=function(){function f(){this.gridItemPadding=5,this.gridItemWidth=260,this.gridItemHeight=180,this.gridItemSpacing=10,this.gridMinWidthOnResize=this.gridItemWidth-10,this.gridMinHeightOnResize=this.gridItemHeight-10,this.gridMaxWidthOnResize=7*this.gridItemWidth,this.isLayoutLocked=!1}return f.prototype.isItemInViewport=function(h,m){return(0,M.p)(h,m)},f}()},3826:function($e,Te,l){"use strict";l.d(Te,{R_:function(){return Y},Y9:function(){return T},e_:function(){return E},wS:function(){return M}});var M=2,E=2,Y=7,T=6},64069:function($e,Te,l){"use strict";l.d(Te,{H:function(){return E},p:function(){return i}});var M=l(3826);function E(c,u){if(c.x<=u.x&&u.x<c.x+c.width||u.x<=c.x&&c.x<u.x+u.width){if(c.y<=u.y&&u.y<c.y+c.height)return Math.min(c.y+c.height-u.y,u.height);if(u.y<=c.y&&c.y<u.y+u.height)return Math.min(u.y+u.height-c.y,c.height)}return 0}function i(c,u){return u&&function(c,u){return c.top<=u.bottom&&c.left<=u.right}(c,u)||function(c){var u=c.getGridLayout();return!!u&&u.x<=M.R_&&u.y<=M.Y9}(c)}},45074:function($e,Te,l){"use strict";l.d(Te,{bP:function(){return h},nm:function(){return u},uC:function(){return f},ug:function(){return c}});var M=l(4437),E=l(50423),Y=[[["","pbiLabel",""]],[["","pbiInput",""]],[["","pbiInputButton",""]],[["","pbiInputError",""]]],T=["[pbiLabel]","[pbiInput]","[pbiInputButton]","[pbiInputError]"],i=0,c=function(){function m(o,b){this.elementRef=o,this.formField=b}return m.\u0275fac=function(b){return new(b||m)(E.\u0275\u0275directiveInject(E.ElementRef),E.\u0275\u0275directiveInject((0,E.forwardRef)(function(){return h})))},m.\u0275dir=E.\u0275\u0275defineDirective({type:m,selectors:[["","pbiInput",""]],hostAttrs:["autocomplete","off"],hostVars:3,hostBindings:function(b,y){2&b&&E.\u0275\u0275attribute("aria-required",y.required||null)("aria-describedby",null==y.formField.error?null:y.formField.error.id)("aria-invalid",y.formField.error?"true":"false")},inputs:{required:"required"}}),m}(),u=function(){function m(o,b){this.elementRef=o,this.formField=b}return m.\u0275fac=function(b){return new(b||m)(E.\u0275\u0275directiveInject(E.ElementRef),E.\u0275\u0275directiveInject((0,E.forwardRef)(function(){return h})))},m.\u0275dir=E.\u0275\u0275defineDirective({type:m,selectors:[["","pbiLabel",""]],hostVars:2,hostBindings:function(b,y){2&b&&E.\u0275\u0275classProp("pbi-label-required",null!=y.formField.input.required)}}),m}(),f=function(){function m(){this.id="pbi-input-error-id-".concat(i++)}return m.\u0275fac=function(b){return new(b||m)},m.\u0275dir=E.\u0275\u0275defineDirective({type:m,selectors:[["","pbiInputError",""]],hostVars:3,hostBindings:function(b,y){2&b&&(E.\u0275\u0275attribute("id",y.id),E.\u0275\u0275classProp("pbi-input-error",!0))}}),m}(),h=function(){function m(o){this.renderer=o,this._compact=!1}return Object.defineProperty(m.prototype,"compact",{get:function(){return this._compact},set:function(b){this._compact=(0,M.Ig)(b)},enumerable:!1,configurable:!0}),m.prototype.ngAfterContentInit=function(){if(this.input&&this.label){var o="pbi-input-id-".concat(i++);this.renderer.setAttribute(this.input.elementRef.nativeElement,"id",o),this.renderer.setAttribute(this.label.elementRef.nativeElement,"for",o)}},m.\u0275fac=function(b){return new(b||m)(E.\u0275\u0275directiveInject(E.Renderer2))},m.\u0275cmp=E.\u0275\u0275defineComponent({type:m,selectors:[["pbi-form-field"]],contentQueries:function(b,y,x){if(1&b&&(E.\u0275\u0275contentQuery(x,c,5),E.\u0275\u0275contentQuery(x,u,5),E.\u0275\u0275contentQuery(x,f,5)),2&b){var A=void 0;E.\u0275\u0275queryRefresh(A=E.\u0275\u0275loadQuery())&&(y.input=A.first),E.\u0275\u0275queryRefresh(A=E.\u0275\u0275loadQuery())&&(y.label=A.first),E.\u0275\u0275queryRefresh(A=E.\u0275\u0275loadQuery())&&(y.error=A.first)}},hostVars:2,hostBindings:function(b,y){2&b&&E.\u0275\u0275classProp("pbi-compact-form-field",y.compact)},inputs:{compact:"compact"},ngContentSelectors:T,decls:5,vars:0,consts:[[1,"controls"]],template:function(b,y){1&b&&(E.\u0275\u0275projectionDef(Y),E.\u0275\u0275projection(0),E.\u0275\u0275elementStart(1,"div",0),E.\u0275\u0275projection(2,1),E.\u0275\u0275projection(3,2),E.\u0275\u0275elementEnd(),E.\u0275\u0275projection(4,3))},styles:['[_nghost-%COMP%]{display:flex;flex-direction:column;--input-border-color: var(--gray-110);--input-foreground: var(--gray-140);--disabled-input-background: var(--gray-20);--disabled-input-border-color: var(--gray-60);--disabled-input-foreground: var(--gray-90);--focused-input-border-color: var(--gray-130);--focused-input-foreground: var(--gray-180);--error-color: var(--fluent-theme-error-dark-color)}[data-legacy-theming=false]   [_nghost-%COMP%]{--input-border-color: var(--colorNeutralStroke1);--input-foreground: var(--colorNeutralForeground1);--disabled-input-background: var(--colorNeutralBackgroundDisabled);--disabled-input-border-color: var(--colorNeutralStrokeDisabled);--disabled-input-foreground: var(--colorNeutralForegroundDisabled);--focused-input-border-color: var(--colorNeutralStrokeFocus2);--focused-input-foreground: var(--colorNeutralForeground1);--error-color: var(--fluent-theme-error-dark-color)}.pbi-form-field-inline[_nghost-%COMP%] {flex-direction:row;align-items:center;justify-content:space-between}.pbi-form-field-inline[_nghost-%COMP%]  label{margin:0 8px 0 0}.pbi-form-field-inline[_nghost-%COMP%]  .controls{flex-grow:1;justify-content:flex-end}.pbi-compact-form-field[_nghost-%COMP%]  label{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-regular, 400)}.pbi-compact-form-field[_nghost-%COMP%]  input{height:28px;padding:4px 6px}.pbi-compact-form-field[_nghost-%COMP%]  textarea{padding:4px 6px}[_nghost-%COMP%]  *{box-sizing:border-box}[_nghost-%COMP%]  label{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-semi-bold, 600);margin:0 0 4px}[_nghost-%COMP%]  label.pbi-label-required:after{content:"*";margin-left:4px;color:var(--error-color)}[_nghost-%COMP%]  .controls{display:flex}[_nghost-%COMP%]  .controls>*:not(:last-child){margin-right:8px}[_nghost-%COMP%]  input{height:32px}[_nghost-%COMP%]  textarea{resize:none}[_nghost-%COMP%]  input, [_nghost-%COMP%]  textarea{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);width:100%;border-radius:2px;border:1px solid var(--input-border-color);color:var(--input-foreground);outline:none;padding:8px 6px}[_nghost-%COMP%]  input[disabled], [_nghost-%COMP%]  textarea[disabled], [_nghost-%COMP%]  input[aria-disabled=true], [_nghost-%COMP%]  textarea[aria-disabled=true]{background-color:var(--disabled-input-background);border-color:var(--disabled-input-border-color);color:var(--disabled-input-foreground)}[_nghost-%COMP%]  input:focus, [_nghost-%COMP%]  textarea:focus{border-color:var(--focused-input-border-color);color:var(--focused-input-foreground)}[_nghost-%COMP%]  [pbiInput][aria-invalid=true]{border-color:var(--error-color)}[_nghost-%COMP%]  .pbi-input-error{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-regular, 400);margin:4px 0 0;color:var(--error-color)}'],changeDetection:0}),m}()},14525:function($e,Te,l){"use strict";l.d(Te,{g:function(){return E}});var M=l(50423),E=function(){function Y(){}return Y.\u0275fac=function(i){return new(i||Y)},Y.\u0275mod=M.\u0275\u0275defineNgModule({type:Y}),Y.\u0275inj=M.\u0275\u0275defineInjector({}),Y}()}}]);