"use strict";(self.webpackChunkmobile=self.webpackChunkmobile||[]).push([["contact-list"],{92258:function(Nt,X,s){s.r(X),s.d(X,{ContactListModule:function(){return Kt}});var nt=function(){return function(a){this.payload=a,this.type="[App Contacts] Ensure Loaded"}}(),ct=function(){return function(a){this.payload=a,this.type="[App Contacts] Load"}}(),st=function(){return function(a){this.payload=a,this.type="[App Contacts] Load Success"}}(),it=function(){return function(a){this.payload=a,this.type="[App Contacts] Load Fail"}}(),e=s(81337),A={contacts:null,artifactId:null,loaded:!1,loading:!1},B=s(8894),m=(0,B.H)({selectId:function(a){return a.artifactId},sortComparer:!1}),J=m.getInitialState({}),b=(0,B.H)({selectId:function(a){return a.artifactId},sortComparer:!1}),Q=b.getInitialState({}),E=(0,B.H)({selectId:function(a){return a.artifactId},sortComparer:!1}),V=E.getInitialState({}),f=s(85732),O=s(89424),lt=s(64115),ft=s(43633),vt={appContacts:function(t,a){switch(void 0===t&&(t=J),a.type){case"[App Contacts] Load":return(r=t.entities[o=a.payload.appId]||(0,e.pi)((0,e.pi)({},A),{artifactId:o})).loaded||r.loading?t:m.upsertOne((0,e.pi)((0,e.pi)({},r),{loading:!0}),t);case"[App Contacts] Load Success":var r=t.entities[a.payload.artifactId]||(0,e.pi)((0,e.pi)({},A),{artifactId:a.payload.artifactId});return m.upsertOne((0,e.pi)((0,e.pi)({},r),{loading:!1,loaded:!0,contacts:a.payload.contacts}),t);case"[App Contacts] Load Fail":var o;return m.upsertOne((0,e.pi)((0,e.pi)({},r=t.entities[o=a.payload.appId]),{loading:!1,loaded:!0,contacts:[]}),t);default:return t}},dashboardContacts:function(t,a){switch(void 0===t&&(t=Q),a.type){case"[Dashboard Contacts] Load":return(r=t.entities[o=a.payload.dashboardId]||(0,e.pi)((0,e.pi)({},A),{artifactId:o})).loaded||r.loading?t:b.upsertOne((0,e.pi)((0,e.pi)({},r),{loading:!0}),t);case"[Dashboard Contacts] Load Success":var r=t.entities[a.payload.artifactId]||(0,e.pi)((0,e.pi)({},A),{artifactId:a.payload.artifactId});return b.upsertOne((0,e.pi)((0,e.pi)({},r),{loading:!1,loaded:!0,contacts:a.payload.contacts}),t);case"[Dashboard Contacts] Load Fail":return b.upsertOne((0,e.pi)((0,e.pi)({},r=t.entities[o=a.payload.dashboardId]),{loading:!1,loaded:!0,contacts:[]}),t);case"[Dashboard Contacts] Clear Contacts":var o;return b.upsertOne((0,e.pi)((0,e.pi)({},r=t.entities[o=a.payload.dashboardId]),{loading:!1,loaded:!1,contacts:[]}),t);default:return t}},reportContacts:function(t,a){switch(void 0===t&&(t=V),a.type){case"[Report Contacts] Load":return(r=t.entities[o=a.payload.reportId]||(0,e.pi)((0,e.pi)({},A),{artifactId:o})).loaded||r.loading?t:E.upsertOne((0,e.pi)((0,e.pi)({},r),{loading:!0}),t);case"[Report Contacts] Load Success":var r=t.entities[a.payload.artifactId]||(0,e.pi)((0,e.pi)({},A),{artifactId:a.payload.artifactId});return E.upsertOne((0,e.pi)((0,e.pi)({},r),{loading:!1,loaded:!0,contacts:a.payload.contacts}),t);case"[Report Contacts] Load Fail":return E.upsertOne((0,e.pi)((0,e.pi)({},r=t.entities[o=a.payload.reportId]),{loading:!1,loaded:!0,contacts:[]}),t);case"[Report Contacts] Clear Contacts":var o;return E.upsertOne((0,e.pi)((0,e.pi)({},r=t.entities[o=a.payload.reportId]),{loading:!1,loaded:!1,contacts:[]}),t);default:return t}}},T=(0,f.ZF)("contacts"),ht=(0,f.P1)(T,function(t){return t.appContacts}),Ct=(0,f.P1)(T,function(t){return t.dashboardContacts}),yt=(0,f.P1)(T,function(t){return t.reportContacts}),G=m.getSelectors(ht).selectEntities,H=b.getSelectors(Ct).selectEntities,w=E.getSelectors(yt).selectEntities,gt=(0,f.P1)(O.Cu,G,function(t,a){if(!t)return null;var o=a[t.providerId];return o&&o.contacts}),It=(0,f.P1)(lt.W$,H,function(t,a){if(!t)return null;var o=a[t.id];return o&&o.contacts}),St=(0,f.P1)(ft.OX,w,function(t,a){if(!t)return null;var o=a[t.id];return o&&o.contacts}),p=s(60756),y=s(50600),M=s(37272),W=s(11547),g=s(14172),R=s(42195),F=s(59822),d=s(50423),x=s(81213),K=s(65181),Z=s(41114),Y="PBI.GetContacts",Et=Z.cx[Y]=(0,Z.b1)(Y),Rt=s(94853),Dt=s(26112),mt=s(46544),jt=s(60225),k=s(73875),j=function(){function t(a,o){var c;this.httpService=a,this.telemetryService=o,this.reportBaseUri="/metadata/reports",this.dashboardsBaseUri="/metadata/dashboards",this.contentprovidersBaseUri="/metadata/contentproviders",this.artifactTypeToString=((c={})[y.B.Dashboard]="Dashboard",c[y.B.Report]="Report",c[y.B.App]="App",c)}return t.prototype.getContacts=function(a,o){var r,c=this,v=this.telemetryService.startEvent(Et,{artifactId:o,artifactType:this.artifactTypeToString[a]}),i=this.httpService.powerbiRequestOptions(v.event,"GetContacts");switch(a){case y.B.Report:r="".concat(this.reportBaseUri,"/").concat(o,"/contacts");break;case y.B.Dashboard:r="".concat(this.dashboardsBaseUri,"/").concat(o,"/contacts");break;case y.B.App:r="".concat(this.contentprovidersBaseUri,"/").concat(o,"/contacts")}return this.httpService.get(r,i).pipe((0,g.U)(function(n){return v.resolve(),n.data}),(0,F.K)(function(n){return c.handleError(n,v),(0,jt._)(n)}))},t.prototype.isArtifactContacts=function(a){return void 0!==a.contacts},t.prototype.getAppContactsSourceSetting=function(a){var o=(0,Dt.K)(a);if(o&&o.appSettings){var c=o.appSettings;if(c&&c.contactsSource)return c.contactsSource}return 0},t.prototype.handleError=function(a,o){var c=(0,Rt.GB)(a.error,a.status);o.reject(c)},t.\u0275fac=function(o){return new(o||t)(d.\u0275\u0275inject(k.O),d.\u0275\u0275inject(mt.y0))},t.\u0275prov=d.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t}(),Ft=function(){function t(a,o,c,r,v){var i=this;this.errorService=a,this.localizationService=o,this.action$=c,this.contactListService=r,this.store=v,this.ensureLoaded$=(0,p.GW)(function(){return i.action$.pipe((0,p.l4)("[App Contacts] Ensure Loaded"),(0,g.U)(function(n){return n.payload}),(0,p.IC)(function(){return i.store.select(G)}),(0,R.zg)(function(n){var u=n[0],l=n[1][u.appId];return l&&(l.loaded||l.loading)?M.E:[new ct(u)]}))}),this.loadContacts$=(0,p.GW)(function(){return i.action$.pipe((0,p.l4)("[App Contacts] Load"),(0,g.U)(function(n){return n.payload}),(0,R.zg)(function(n){var u=n.appId,h=u;return i.contactListService.getContacts(y.B.App,h).pipe((0,g.U)(function(C){return new st({artifactId:h,contacts:C.contacts})}),(0,F.K)(function(C){return i.errorService.error(i.localizationService.get("Contacts_UnknownHttpLoadFalure"),"Contacts_UnknownHttpLoadFalure",{requestId:C.requestId,statusCode:C.status.toString()}),(0,W.of)(new it({appId:u,httpResponse:C}))}))}))})}return t.\u0275fac=function(o){return new(o||t)(d.\u0275\u0275inject(x.T),d.\u0275\u0275inject(K.o),d.\u0275\u0275inject(p.eX),d.\u0275\u0275inject(j),d.\u0275\u0275inject(f.yh))},t.\u0275prov=d.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t}(),Ut=function(){return function(a){this.payload=a,this.type="[Dashboard Contacts] Clear Contacts"}}(),Bt=function(){return function(a){this.payload=a,this.type="[Dashboard Contacts] Ensure Loaded"}}(),q=function(){return function(a){this.payload=a,this.type="[Dashboard Contacts] Load"}}(),tt=function(){return function(a){this.payload=a,this.type="[Dashboard Contacts] Load Success"}}(),Ot=function(){return function(a){this.payload=a,this.type="[Dashboard Contacts] Load Fail"}}(),at=s(31683),$t=function(){function t(a,o,c,r,v){var i=this;this.errorService=a,this.localizationService=o,this.action$=c,this.contactListService=r,this.store=v,this.ensureLoaded$=(0,p.GW)(function(){return i.action$.pipe((0,p.l4)("[Dashboard Contacts] Ensure Loaded"),(0,g.U)(function(n){return n.payload}),(0,p.IC)(function(){return i.store.select(H)}),(0,R.zg)(function(n){var u=n[0],l=n[1][u.dashboardId];return l&&(l.loaded||l.loading)?M.E:[new q(u)]}))}),this.loadContacts$=(0,p.GW)(function(){return i.action$.pipe((0,p.l4)("[Dashboard Contacts] Load"),(0,g.U)(function(n){return n.payload}),(0,p.IC)(function(){return[i.store.select(at.nW),i.store.select(O.Cu)]}),(0,R.zg)(function(n){var u=n[0].dashboardId,l=n[2],C=_.find(n[1],function(I){return I.id===u}),S=i.contactListService.getAppContactsSourceSetting(l?.providerConfig),D=C&&2!==S;return i.contactListService.getContacts(D?y.B.App:y.B.Dashboard,D?C.contentProviderId:u).pipe((0,g.U)(function(I){return new tt({artifactId:u,contacts:I.contacts})}),(0,F.K)(function(I){return i.errorService.error(i.localizationService.get("Contacts_UnknownHttpLoadFalure"),"Contacts_UnknownHttpLoadFalure",{requestId:I.requestId,statusCode:I.status.toString()}),(0,W.of)(new Ot({dashboardId:u,httpResponse:I}))}))}))})}return t.\u0275fac=function(o){return new(o||t)(d.\u0275\u0275inject(x.T),d.\u0275\u0275inject(K.o),d.\u0275\u0275inject(p.eX),d.\u0275\u0275inject(j),d.\u0275\u0275inject(f.yh))},t.\u0275prov=d.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t}(),zt=function(){return function(a){this.payload=a,this.type="[Report Contacts] Clear Contacts"}}(),Pt=function(){return function(a){this.payload=a,this.type="[Report Contacts] Ensure Loaded"}}(),ot=function(){return function(a){this.payload=a,this.type="[Report Contacts] Load"}}(),et=function(){return function(a){this.payload=a,this.type="[Report Contacts] Load Success"}}(),Tt=function(){return function(a){this.payload=a,this.type="[Report Contacts] Load Fail"}}(),Gt=s(76964),Ht=function(){function t(a,o,c,r,v){var i=this;this.errorService=a,this.localizationService=o,this.action$=c,this.contactListService=r,this.store=v,this.ensureLoaded$=(0,p.GW)(function(){return i.action$.pipe((0,p.l4)("[Report Contacts] Ensure Loaded"),(0,g.U)(function(n){return n.payload}),(0,p.IC)(function(){return i.store.select(w)}),(0,R.zg)(function(n){var u=n[0],l=n[1][u.reportId];return l&&(l.loaded||l.loading)?M.E:[new ot(u)]}))}),this.loadContacts$=(0,p.GW)(function(){return i.action$.pipe((0,p.l4)("[Report Contacts] Load"),(0,g.U)(function(n){return n.payload}),(0,p.IC)(function(){return[i.store.select(at.sV),i.store.select(Gt.zu),i.store.select(O.Cu)]}),(0,R.zg)(function(n){var u=n[0].reportId,l=n[2],C=n[3],S=_.find(n[1],function(L){return L.id===u}),D=u,U=y.B.Report;if(S){S.originalReportId&&(D=S.originalReportId);var N=i.contactListService.getAppContactsSourceSetting(C?.providerConfig);S&&2!==N&&(D=l[S.packageId].contentProviderRefId,U=y.B.App)}return i.contactListService.getContacts(U,D).pipe((0,g.U)(function(L){return new et({artifactId:u,contacts:L.contacts})}),(0,F.K)(function(L){return i.errorService.error(i.localizationService.get("Contacts_UnknownHttpLoadFalure"),"Contacts_UnknownHttpLoadFalure",{requestId:L.requestId,statusCode:L.status.toString()}),(0,W.of)(new Tt({reportId:u,httpResponse:L}))}))}))})}return t.\u0275fac=function(o){return new(o||t)(d.\u0275\u0275inject(x.T),d.\u0275\u0275inject(K.o),d.\u0275\u0275inject(p.eX),d.\u0275\u0275inject(j),d.\u0275\u0275inject(f.yh))},t.\u0275prov=d.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t}(),rt=function(){function t(a){this.store=a}return t.prototype.clearDashboardContacts=function(a){return this.store.dispatch(new Ut({dashboardId:a}))},t.prototype.clearReportContacts=function(a){return this.store.dispatch(new zt({reportId:a}))},t.prototype.ensureAppContactsLoaded=function(a){this.store.dispatch(new nt({appId:a}))},t.prototype.ensureDashboardContactsLoaded=function(a){this.store.dispatch(new Bt({dashboardId:a}))},t.prototype.ensureReportContactsLoaded=function(a){this.store.dispatch(new Pt({reportId:a}))},t.prototype.getSelectedAppContacts=function(){return this.store.select(gt)},t.prototype.getSelectedDashboardContacts=function(){return this.store.select(It)},t.prototype.getSelectedReportContacts=function(){return this.store.select(St)},t.prototype.getAppContacts=function(a){return this.store.select(function(a){return(0,f.P1)(G,function(o){var c=o[a];return c&&c.contacts})}(a))},t.prototype.getDashboardContacts=function(a){return this.store.select(function(a){return(0,f.P1)(H,function(o){var c=o[a];return c&&c.contacts})}(a))},t.prototype.getReportContacts=function(a){return this.store.select(function(a){return(0,f.P1)(w,function(o){var c=o[a];return c&&c.contacts})}(a))},t.prototype.loadDashboardContacts=function(a){this.store.dispatch(new q({dashboardId:a}))},t.prototype.loadReportContacts=function(a){this.store.dispatch(new ot({reportId:a}))},t.prototype.updateDashboardContacts=function(a,o){this.store.dispatch(new tt((0,e.pi)((0,e.pi)({},o),{artifactId:a})))},t.prototype.updateReportContacts=function(a,o){this.store.dispatch(new et((0,e.pi)((0,e.pi)({},o),{artifactId:a})))},t.\u0275fac=function(o){return new(o||t)(d.\u0275\u0275inject(f.yh))},t.\u0275prov=d.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t}(),wt=s(77476),Mt=s(48741),Wt=s(33567),xt=s(77906),Kt=function(){function t(){}return t.forRoot=function(){return{ngModule:t,providers:[]}},t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=d.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=d.\u0275\u0275defineInjector({providers:[k.O,j,{provide:"ContactListService",useExisting:j},rt,{provide:"ContactsStoreService",useExisting:rt}],imports:[wt.CommonModule,Wt.gd,xt.N,Mt.JF,f.Aw.forFeature("contacts",vt),p.sQ.forFeature([$t,Ht,Ft])]}),t}()}}]);