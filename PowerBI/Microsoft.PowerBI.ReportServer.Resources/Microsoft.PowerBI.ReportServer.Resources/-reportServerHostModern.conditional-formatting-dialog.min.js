"use strict";(self.webpackChunkreportServerHostModern=self.webpackChunkreportServerHostModern||[]).push([["conditional-formatting-dialog","field-list"],{32441:function(ge,R,o){o.d(R,{u:function(){return h}});var v=o(50423),r=o(18460),w=function(F,s,l,S,C){return{formattingSources:F,indicatorEnabled:s,mobileFormatting:l,disabledCards:S,disabledSlices:C}},h=function(){function I(){var F=this;this.mobileFormatting=!1,this.propertyChanged=new v.EventEmitter,this.outputArgs={propertyChanged:function(l){return F.propertyChanged.emit(l)}},this.modulePath="@powerbi/ExploreUIAuthoring/lazy-modules/pane-formatting/pane-formatting.module#PaneFormattingModule",this.componentId="FormattingPaneComponentId"}return I.\u0275fac=function(s){return new(s||I)},I.\u0275cmp=v.\u0275\u0275defineComponent({type:I,selectors:[["formatting-pane-lazy"]],inputs:{formattingSources:"formattingSources",indicatorEnabled:"indicatorEnabled",mobileFormatting:"mobileFormatting",disabledCards:"disabledCards",disabledSlices:"disabledSlices"},outputs:{propertyChanged:"propertyChanged"},decls:1,vars:10,consts:[[3,"inputArgs","modulePath","outputArgs","componentId"]],template:function(s,l){1&s&&v.\u0275\u0275element(0,"pbi-lazy-load",0),2&s&&v.\u0275\u0275property("inputArgs",v.\u0275\u0275pureFunction5(4,w,l.formattingSources,l.indicatorEnabled,l.mobileFormatting,l.disabledCards,l.disabledSlices))("modulePath",l.modulePath)("outputArgs",l.outputArgs)("componentId",l.componentId)},dependencies:[r.R],encapsulation:2,changeDetection:0}),I}()},78633:function(ge,R,o){o.d(R,{a:function(){return h}});var v=o(50423),r=o(18460),w=function(F){return{colors:F}},h=function(){function I(){this.modulePath="@powerbi/ExploreUIAuthoring/lazy-modules/pane-formatting/pane-formatting.module#PaneFormattingModule",this.componentId="GradientBarComponentId"}return I.\u0275fac=function(s){return new(s||I)},I.\u0275cmp=v.\u0275\u0275defineComponent({type:I,selectors:[["gradient-bar-lazy"]],inputs:{colors:"colors"},decls:1,vars:5,consts:[[3,"inputArgs","modulePath","componentId"]],template:function(s,l){1&s&&v.\u0275\u0275element(0,"pbi-lazy-load",0),2&s&&v.\u0275\u0275property("inputArgs",v.\u0275\u0275pureFunction1(3,w,l.colors))("modulePath",l.modulePath)("componentId",l.componentId)},dependencies:[r.R],encapsulation:2,changeDetection:0}),I}()},92278:function(ge,R,o){o.d(R,{I:function(){return h}});var v=o(50423),r=o(18460),w=function(F,s,l,S,C){return{toggle:F,ariaLabelledby:s,ariaDescribedby:l,toggleLabel:S,isDisabled:C}},h=function(){function I(){var F=this;this.onToggleChange=new v.EventEmitter,this.modulePath="@powerbi/ExploreUIAuthoring/lazy-modules/pane-formatting/pane-formatting.module#PaneFormattingModule",this.componentId="ToggleSwitchModernComponentId",this.outputArgs={onToggleChange:function(l){return F.onToggleChange.emit(l)}}}return I.\u0275fac=function(s){return new(s||I)},I.\u0275cmp=v.\u0275\u0275defineComponent({type:I,selectors:[["toggle-switch-modern-lazy"]],inputs:{toggle:"toggle",ariaLabelledby:"ariaLabelledby",ariaDescribedby:"ariaDescribedby",toggleLabel:"toggleLabel",isDisabled:"isDisabled"},outputs:{onToggleChange:"onToggleChange"},decls:1,vars:10,consts:[[3,"inputArgs","modulePath","outputArgs","componentId"]],template:function(s,l){1&s&&v.\u0275\u0275element(0,"pbi-lazy-load",0),2&s&&v.\u0275\u0275property("inputArgs",v.\u0275\u0275pureFunction5(4,w,l.toggle,l.ariaLabelledby,l.ariaDescribedby,l.toggleLabel,l.isDisabled))("modulePath",l.modulePath)("outputArgs",l.outputArgs)("componentId",l.componentId)},dependencies:[r.R],encapsulation:2,changeDetection:0}),I}()},90094:function(ge,R,o){o.d(R,{l:function(){return h}});var v=o(50423),r=o(18460),w=function(F){return{warningMessage:F}},h=function(){function I(){this.modulePath="@powerbi/ExploreUIAuthoring/lazy-modules/pane-formatting/pane-formatting.module#PaneFormattingModule",this.componentId="WarningComponentId"}return I.\u0275fac=function(s){return new(s||I)},I.\u0275cmp=v.\u0275\u0275defineComponent({type:I,selectors:[["warning-eager"]],inputs:{warningMessage:"warningMessage"},decls:1,vars:5,consts:[[3,"inputArgs","modulePath","componentId"]],template:function(s,l){1&s&&v.\u0275\u0275element(0,"pbi-lazy-load",0),2&s&&v.\u0275\u0275property("inputArgs",v.\u0275\u0275pureFunction1(3,w,l.warningMessage))("modulePath",l.modulePath)("componentId",l.componentId)},dependencies:[r.R],encapsulation:2,changeDetection:0}),I}()},42101:function(ge,R,o){o.d(R,{p:function(){return M}});var v=o(9844),F=(o(32441),o(78633),o(92278),o(90094),o(77476)),s=o(9398),l=o(76072),S=o(82156),C=o(50423),y={loadChildren:function(){return Promise.all([o.e(5),o.e("pane-formatting")]).then(o.bind(o,53150)).then(function(L){return L.PaneFormattingModule})}};l.E.addLazyLoadForLegacyMapping("@powerbi/ExploreUIAuthoring/lazy-modules/pane-formatting/pane-formatting.module#PaneFormattingModule",y.loadChildren);var b=[{path:"dummy-pane-formatting-lazy",loadChildren:y.loadChildren}],M=function(){function x(){}return x.\u0275fac=function(ie){return new(ie||x)},x.\u0275mod=C.\u0275\u0275defineNgModule({type:x}),x.\u0275inj=C.\u0275\u0275defineInjector({imports:[F.CommonModule,v.j,S.N,s.Bz.forChild(b)]}),x}()},48311:function(ge,R,o){o.r(R),o.d(R,{ConditionalFormattingDialogModule:function(){return Nn}});var v=o(81337),r=o(42101),h=o(74082),I=function(){function a(i,t){this.options=i,this.featureSwitchService=t,this.ruleTemplateKind=i.ruleTemplateKind}return Object.defineProperty(a.prototype,"propertyType",{get:function(){return this.options.propertyType},enumerable:!1,configurable:!0}),a.prototype.isValid=function(){return this.lowerBound.isValid()},a.prototype.onColorChanged=function(i){i||(i={value:this.options.defaultYieldValue}),this.value=i.value},a.prototype.onIconChanged=function(i){this.value=i,this.options.onCaseIconChanged()},a}(),F=function(){function a(){}return a.Number={kind:"Number",displayNameKey:"ConditionalFormattingDialog_Number"},a.Text={kind:"Text",displayNameKey:"Text"},a.Percent={kind:"Percent",displayNameKey:"ConditionalFormattingDialog_Percent"},a}(),l=function(){function a(i){this.localizationService=i,this.equal=this._equal,this.isBlank=this._isBlank}return Object.defineProperty(a.prototype,"_equal",{get:function(){return{id:2,displayName:"=",disableOtherOperator:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"_isBlank",{get:function(){return{id:5,displayName:this.localizationService.get("FilterOperator_IsBlank"),disableOtherOperator:!0,disableInput:!0}},enumerable:!1,configurable:!0}),a}(),S=function(a){function i(t){var n=a.call(this,t)||this;return n.contains=n._contains,n.startsWith=n._startsWith,n.doesNotContain=n._doesNotContain,n.doesNotStartWith=n._doesNotStartWith,n.isNotBlank=n._isNotBlank,n.isEmpty=n._isEmpty,n.isNotEmpty=n._isNotEmpty,n.notEqual=n._notEqual,n.equal=n._textEqual,n.lowerBoundOptions=[n.contains,n.startsWith,n.doesNotContain,n.doesNotStartWith,n.equal,n.notEqual,n.isEmpty,n.isBlank,n.isNotEmpty,n.isNotBlank],n}return(0,v.ZT)(i,a),Object.defineProperty(i.prototype,"_textEqual",{get:function(){return{id:2,displayName:this.localizationService.get("FilterOperator_Is"),disableOtherOperator:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"_doesNotStartWith",{get:function(){return{id:9,displayName:this.localizationService.get("FilterOperator_DoesNotStartWith"),disableOtherOperator:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"_startsWith",{get:function(){return{id:8,displayName:this.localizationService.get("FilterOperator_StartsWith"),disableOtherOperator:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"_doesNotContain",{get:function(){return{id:7,displayName:this.localizationService.get("FilterOperator_DoesNotContain"),disableOtherOperator:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"_contains",{get:function(){return{id:6,displayName:this.localizationService.get("FilterOperator_Contains"),disableOtherOperator:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"_notEqual",{get:function(){return{id:13,displayName:this.localizationService.get("FilterOperator_IsNot"),disableOtherOperator:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"_isEmpty",{get:function(){return{id:11,displayName:this.localizationService.get("FilterOperator_IsEmptyString"),disableOtherOperator:!0,disableInput:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"_isNotEmpty",{get:function(){return{id:12,displayName:this.localizationService.get("FilterOperator_IsNotEmptyString"),disableOtherOperator:!0,disableInput:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"_isNotBlank",{get:function(){return{id:10,displayName:this.localizationService.get("FilterOperator_IsNotBlank"),disableOtherOperator:!0,disableInput:!0}},enumerable:!1,configurable:!0}),i}(l),C=function(a){function i(t){var n=a.call(this,t)||this;return n.greaterThan=n._greaterThan,n.greaterThanOrEqual=n._greaterThanOrEqual,n.lessThan=n._lessThan,n.lessThanOrEqual=n._lessThanOrEqual,n.lowerBoundOptions=[n.greaterThan,n.greaterThanOrEqual,n.equal,n.isBlank],n.upperBoundOptions=[n._lessThan,n._lessThanOrEqual],n}return(0,v.ZT)(i,a),Object.defineProperty(i.prototype,"_greaterThan",{get:function(){return{id:0,displayName:">"}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"_greaterThanOrEqual",{get:function(){return{id:1,displayName:">="}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"_lessThan",{get:function(){return{id:3,displayName:"<"}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"_lessThanOrEqual",{get:function(){return{id:4,displayName:"<="}},enumerable:!1,configurable:!0}),i}(l),y=o(45413),b=function(){return function(){}}(),g=o(62458),M=o(94419),x=function(a){function i(t,n,d,u){var m=a.call(this)||this;return m.part=t,m.isPercentEnabled=n,m.operatorOptions=d,m.featureSwitchService=u,m.onIsPercentEnabledChanged(n),m}return(0,v.ZT)(i,a),i.prototype.reset=function(){switch(this.part){case"LowerBound":this.operator=this.operatorOptions.greaterThanOrEqual;break;case"UpperBound":this.operator=this.operatorOptions.lessThan;break;default:g.fF.assertNever(this.part)}this.resetValue()},i.prototype.update=function(t){var d=t.right;this.operator=this.getOperatorOption(t.comparison,d),this.updateArgument(d)},i.prototype.onIsPercentEnabledChanged=function(t){this.isPercentEnabled=t,this.isPercentEnabled||(this.valueKind=F.Number)},i.prototype.updateToOpenEnded=function(){switch(this.part){case"LowerBound":return void this.reset();case"UpperBound":return this.operator=this.operatorOptions.lessThanOrEqual,void(this.isPercentEnabled?(this.value=100,this.valueKind=F.Percent):(this.value=null,this.valueKind=F.Number));default:g.fF.assertNever(this.part)}},i.prototype.isOpenEnded=function(){switch(this.part){case"LowerBound":return null===this.value&&this.valueKind===F.Number||0===this.value&&this.valueKind===F.Percent;case"UpperBound":return null===this.value&&this.valueKind===F.Number||100===this.value&&this.valueKind===F.Percent;default:g.fF.assertNever(this.part)}},i.prototype.isValid=function(){if(_.isEqual(this.operator,this.operatorOptions.isBlank))return!0;if(void 0===this.value)return!1;if(_.isEqual(this.operator,this.operatorOptions.equal)){if(null===this.value)return!1;switch(this.valueKind.kind){case"Percent":return this.value>=0&&this.value<=100;case"Number":return!0;case"Text":return!!this.featureSwitchService.featureSwitches.cfStrings;default:g.fF.assertNever(this.valueKind.kind)}}switch(this.valueKind.kind){case"Percent":if(null===this.value)return!1;switch(this.part){case"LowerBound":return this.value>=0&&this.value<100;case"UpperBound":return this.value>0&&this.value<=100;default:g.fF.assertNever(this.part)}case"Number":return!0;case"Text":return g.fF.assertFail("Text is not a valid value kind for numeric condition"),!1;default:g.fF.assertNever(this.valueKind.kind)}},i.prototype.getDefinition=function(t){var n=this;return g.fF.assert(function(){return n.isValid()},"getDefinition called for an invalid Condition"),_.isEqual(this.operator,this.operatorOptions.isBlank)?(0,M.qu)(0,t,(0,M.IF)()):!this.isOpenEnded()||this.operator.disableOtherOperator?(0,M.qu)(this.getComparisonKind(),t,this.getArgumentExpr(t)):void 0},i.prototype.resetValue=function(){switch(this.part){case"LowerBound":return void(this.isPercentEnabled?(this.value=0,this.valueKind=F.Percent):(this.value=null,this.valueKind=F.Number));case"UpperBound":return this.value=0,void(this.valueKind=F.Number);default:g.fF.assertNever(this.part)}},i.prototype.getOperatorOption=function(t,n){var d=this;switch(t){case 1:return g.fF.assert(function(){return"LowerBound"===d.part},"Unexpected condition"),this.operatorOptions.greaterThan;case 2:return g.fF.assert(function(){return"LowerBound"===d.part},"Unexpected condition"),this.operatorOptions.greaterThanOrEqual;case 0:return g.fF.assert(function(){return"LowerBound"===d.part},"Unexpected condition"),(0,y.fS)(n,(0,M.IF)())?this.operatorOptions.isBlank:this.operatorOptions.equal;case 3:return g.fF.assert(function(){return"UpperBound"===d.part},"Unexpected condition"),this.operatorOptions.lessThan;case 4:return g.fF.assert(function(){return"UpperBound"===d.part},"Unexpected condition"),this.operatorOptions.lessThanOrEqual;default:g.fF.assertNever(t)}},i.prototype.getComparisonKind=function(){switch(this.operator.id){case 5:case 2:return 0;case 0:return 1;case 1:return 2;case 3:return 3;case 4:return 4;case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:g.fF.assertFail("Unexpected operator");break;default:g.fF.assertNever(this.operator.id)}},i.prototype.updateArgument=function(t){if(_.isEqual(this.operator,this.operatorOptions.isBlank))this.resetValue();else{if((0,h.S9)(t))return this.value=M.jz.getNumericValue(t),void(this.valueKind=F.Number);if((0,h.YF)(t)){var n=t.decomposeOverRangePattern();if(n)return this.value=100*n.percent,this.value=parseFloat(this.value.toFixed(4)),void(this.valueKind=F.Percent)}g.fF.assertFail("numericConditionviewmode - updateArgument - Unrecognized comparison argument pattern")}},i.prototype.getArgumentExpr=function(t){switch(this.valueKind.kind){case"Number":return(0,M.tx)(this.value);case"Percent":return M.LE.overRangeOf(t,this.value/100);case"Text":g.fF.assertFail("Text argument is not supported");break;default:g.fF.assertNever(this.valueKind.kind)}},i}(b),L=function(a){function i(t,n,d){var u=a.call(this,t,n)||this;u.argumentKindOptions=[F.Number,F.Percent];var m=u.options,O=m.sqCase,B=m.disableAutoRange;return u.operatorOptions=new C(d),g.fF.assertAnyValue(O,"if sqCase is undefined, create a default Case (If value >= 0% AND < 0 THEN <Yield>)"),g.fF.assert(function(){return u.operatorOptions instanceof C},"operatorOptions should be NumericConditionalOperatorOptions"),u.isPercentEnabled=!B,u.lowerBound=new x("LowerBound",u.isPercentEnabled,u.operatorOptions,n),u.upperBound=new x("UpperBound",u.isPercentEnabled,u.operatorOptions,n),u.onIsPercentEnabledChanged(u.isPercentEnabled),u.initCase(O),u}return(0,v.ZT)(i,a),i.prototype.isValid=function(){if(!a.prototype.isValid.call(this))return!1;if(this.lowerBound.operator.disableOtherOperator)return!0;if(!this.upperBound.isValid())return!1;var t=!this.lowerBound.isOpenEnded(),n=!this.upperBound.isOpenEnded();return!t&&!n||!t||!n||this.lowerBound.valueKind!==this.upperBound.valueKind||this.upperBound.value>this.lowerBound.value},i.prototype.getDefinition=function(t){var n=this;g.fF.assert(function(){return n.isValid()},"Invalid case settings");var u=this.lowerBound.getDefinition(t),m=this.lowerBound.operator.disableOtherOperator?null:this.upperBound.getDefinition(t);return{condition:u||m?u&&m?(0,M.xD)(u,m):u||m:(0,M.O7)(!0),value:null==this.value?(0,M.IF)():(0,M.fL)(this.value)}},i.prototype.onIsPercentEnabledChanged=function(t){g.fF.assertValue(this.lowerBound,"lowerBound must be defined"),g.fF.assertValue(this.upperBound,"upperBound must be defined"),this.isPercentEnabled=t,this.lowerBound.onIsPercentEnabledChanged(this.isPercentEnabled),this.upperBound.onIsPercentEnabledChanged(this.isPercentEnabled)},i.prototype.initCase=function(t){if(!t)return this.lowerBound.reset(),this.upperBound.reset(),void(this.value=this.options.defaultYieldValue);(0,h.AW)(t.value)?this.value=M.jz.getTextValue(t.value):(0,h.uR)(t.value)?this.value=null:g.fF.assertFail("Unexpected Case yield value type");var n=t.condition;if((0,h.un)(n)){var d=n.left,u=n.right;(0,h.$Q)(d)&&(0,h.$Q)(u)?(this.lowerBound.update(d),this.upperBound.update(u)):g.fF.assertFail("Unexpected AND expr")}else if((0,h.IS)(n))this.lowerBound.reset(),this.upperBound.reset();else if((0,h.VC)(n)&&!0===n.value)this.lowerBound.updateToOpenEnded(),this.upperBound.updateToOpenEnded();else if((0,h.$Q)(n)){var m=n.comparison;switch(m){case 0:return this.lowerBound.update(n),void this.upperBound.reset();case 1:case 2:return this.lowerBound.update(n),void this.upperBound.updateToOpenEnded();case 3:case 4:return this.lowerBound.updateToOpenEnded(),void this.upperBound.update(n);default:g.fF.assertFail("Unexpected QueryComparisonKind: "+m)}}else g.fF.assertFail("Unexpected Case")},i}(I),ie=o(48676),G=function(a){function i(t,n){var d=a.call(this)||this;return d.part=t,d.operatorOptions=n,d}return(0,v.ZT)(i,a),i.prototype.reset=function(){this.operator=this.operatorOptions.equal,this.resetValue()},i.prototype.update=function(t){var n=(0,h.Ym)(t)?t.arg:t;if((0,h.IS)(n)||(0,h.f8)(n)||(0,h.$Q)(n)){var d=n.right;return this.operator=this.getOperatorOption(t),void this.updateArgument(d)}g.fF.assertFail("TextConditionViewMode - update - Unexpected condition expression")},i.prototype.isValid=function(){return this.valueKind!==F.Text?(g.fF.assertFail("TextConditionViewMode - isValid - Unexpected valueKind"),!1):!!(_.isEqual(this.operator,this.operatorOptions.isBlank)||_.isEqual(this.operator,this.operatorOptions.isNotBlank)||_.isEqual(this.operator,this.operatorOptions.isEmpty)||_.isEqual(this.operator,this.operatorOptions.isNotEmpty))||void 0!==this.value&&(_.isEqual(this.operator,this.operatorOptions.equal)||_.isEqual(this.operator,this.operatorOptions.notEqual)?null!==this.value:!_.isEmpty(this.value))},i.prototype.getDefinition=function(t){var d,n=this;g.fF.assert(function(){return n.isValid()},"TextConditionViewMode - getDefinition called for an invalid Condition");var u=null!==(d=t.getAnnotations())&&void 0!==d?d:{},m=this.operator;u[ie.L]=1,u[ie.Q]=m.id;var O=function(){return(0,M.qu)(0,t,(0,M.fL)(n.value),u)},B=function(){return(0,M.qu)(0,t,(0,M.IF)(),u)},U=function(){return(0,M.qu)(0,t,(0,M.$t)(),u)},E=function(){return(0,M.Ny)(t,(0,M.fL)(n.value),u)},te=function(){return(0,M.r3)(t,(0,M.fL)(n.value),u)};switch(m.id){case this.operatorOptions.isBlank.id:return B();case this.operatorOptions.isNotBlank.id:return(0,M.ff)(B());case this.operatorOptions.isEmpty.id:return U();case this.operatorOptions.isNotEmpty.id:return(0,M.ff)(U());case this.operatorOptions.contains.id:return te();case this.operatorOptions.doesNotContain.id:return(0,M.ff)(te());case this.operatorOptions.startsWith.id:return E();case this.operatorOptions.doesNotStartWith.id:return(0,M.ff)(E());case this.operatorOptions.equal.id:return O();case this.operatorOptions.notEqual.id:return(0,M.ff)(O());default:g.fF.assertFail("TextConditionViewMode - getDefinition - Unexpected operator: ConditionalOperatorOptionId ".concat(this.operator.id))}},i.prototype.getOperatorOption=function(t){var n=this;g.fF.assert(function(){return"LowerBound"===n.part},"TextConditionViewMode - getOperatorOption - Unexpected condition");var d=(0,h.Ym)(t),u=d?t.arg:t;if((0,h.$Q)(u)){if(0===u.comparison){var O=u.getAnnotations();if(null!=O)switch(O[ie.Q]){case this.operatorOptions.isNotBlank.id:return this.operatorOptions.isNotBlank;case this.operatorOptions.isBlank.id:return this.operatorOptions.isBlank;case this.operatorOptions.isEmpty.id:return this.operatorOptions.isEmpty;case this.operatorOptions.isNotEmpty.id:return this.operatorOptions.isNotEmpty}return d?this.operatorOptions.notEqual:this.operatorOptions.equal}}else{if((0,h.IS)(u))return d?this.operatorOptions.doesNotContain:this.operatorOptions.contains;if((0,h.f8)(u))return d?this.operatorOptions.doesNotStartWith:this.operatorOptions.startsWith}g.fF.assertFail("TextConditionViewMode - getOperatorOption - Unexpected argument expression")},i.prototype.updateArgument=function(t){if(!_.isEqual(this.operator,this.operatorOptions.isEmpty)&&!_.isEqual(this.operator,this.operatorOptions.isNotEmpty))return _.isEqual(this.operator,this.operatorOptions.isBlank)||_.isEqual(this.operator,this.operatorOptions.isNotBlank)?(this.value=null,void(this.valueKind=F.Text)):(0,h.AW)(t)?(this.value=M.jz.getTextValue(t),void(this.valueKind=F.Text)):void g.fF.assertFail("TextConditionViewMode - updateArgument - Unexpected argument expression");this.resetValue()},i.prototype.resetValue=function(){this.value="",this.valueKind=F.Text},i}(b),ue=function(a){function i(t,n,d){var u=a.call(this,t,n)||this,m=u.options.sqCase;return u.operatorOptions=new S(d),u.lowerBound=new G("LowerBound",u.operatorOptions),u.initCase(m),u}return(0,v.ZT)(i,a),i.prototype.getDefinition=function(t){var n=this;return g.fF.assert(function(){return n.isValid()},"TextCaseViewModel - getDefinition - Invalid case settings"),{condition:this.lowerBound.getDefinition(t)||(0,M.O7)(!0),value:null==this.value?(0,M.IF)():(0,M.fL)(this.value)}},i.prototype.initCase=function(t){if(!t)return this.lowerBound.reset(),void(this.value=this.options.defaultYieldValue);(0,h.AW)(t.value)?this.value=M.jz.getTextValue(t.value):(0,h.uR)(t.value)?this.value=null:g.fF.assertFail("Unexpected Case yield value type");var m,n=t.condition;(0,h.IS)(m=n)||(0,h.f8)(m)||(0,h.$Q)(m)||(0,h.Ym)(m)?this.lowerBound.update(n):(0,h.VC)(n)&&!0===n.value?this.lowerBound.reset():g.fF.assertFail("TextCaseViewModel - initCase - Unexpected Case condition type")},i}(I),he=function(){function a(i,t){this.featureSwitchService=i,this.localizationService=t}return a.prototype.create=function(i){switch(i.ruleTemplateKind){case"number":return new L(i,this.featureSwitchService,this.localizationService);case"text":return new ue(i,this.featureSwitchService,this.localizationService);default:g.fF.assertNever(i.ruleTemplateKind)}},a}(),q=o(84631),j=o(50550),ne=function(){function a(i,t,n,d,u,m,O,B){var U=this;switch(this.disableAutoRange=i,this.propertyType=t,this.defaultYieldValue=n,this.iconSets=u,this.caseTypeStore=new Map,g.fF.assertValue(d,"ConditionalViewModel - expr"),g.fF.assertValue(O,"ConditionalViewModel - ruleTemplateKind"),g.fF.assertNonEmpty(d.cases,"ConditionalViewModel - expr"),this.caseViewModelBuilder=new he(B,m),this.ruleTemplateKind=O,t){case"Color":this.reverseButtonLabelKey="ConditionalFormattingDialog_RuleBased_RulesReverseValues_Color";break;case"Icon":this.reverseButtonLabelKey="ConditionalFormattingDialog_RuleBased_RulesReverseValues_Icon";break;case"Text":case"WebUrl":case"DataBars":g.fF.assertFail("Rules support only Icons and Colors");break;case"Numeric":case"DateTime":break;default:g.fF.assertNever(t)}this.cases=_.chain(d.cases).reverse().map(function(E){return U.caseViewModelBuilder.create(U.getCurrentCaseViewModelOptions(E))}).value(),this.updateSelectedIconSet()}return a.prototype.onDisableAutoRangeChanged=function(i){if(this.disableAutoRange=i,!_.isEmpty(this.cases))for(var t=0,n=this.cases;t<n.length;t++){var d=n[t];d instanceof L?d.onIsPercentEnabledChanged(!i):g.fF.assertFail("ConditionalViewModel - onDisableAutoRangeChanged - caseViewModel is not NumericCaseViewModel")}},a.prototype.reinitializeSQConditionalExpr=function(i){g.fF.assertValue(i,"ConditionalViewModel - reinitializeSQConditionalExpr - newRuleTemplateKind");var t=this.cases;this.cases=[],this.caseTypeStore.set(this.ruleTemplateKind,t),this.ruleTemplateKind=i,this.cases=this.caseTypeStore.get(this.ruleTemplateKind)||[],0===this.cases.length&&this.addCase(),this.updateSelectedIconSet()},a.prototype.getCurrentCaseViewModelOptions=function(i){var t=this;return void 0===i&&(i=void 0),{disableAutoRange:this.disableAutoRange,propertyType:this.propertyType,defaultYieldValue:this.defaultYieldValue,onCaseIconChanged:function(){return t.updateSelectedIconSet()},sqCase:i,ruleTemplateKind:this.ruleTemplateKind}},a.prototype.addCase=function(){this.cases.push(this.caseViewModelBuilder.create(this.getCurrentCaseViewModelOptions()))},a.prototype.reverseCasesValue=function(){for(var i=this.cases.length,t=0;t<i/2;t++){var n=this.cases[t].value;this.cases[t].value=this.cases[i-t-1].value,this.cases[i-t-1].value=n}this.updateSelectedIconSet()},a.prototype.moveCaseUp=function(i){_.size(this.cases)>1&&i>0&&i<this.cases.length&&((0,j.LF)(this.cases,i,i-1),this.updateSelectedIconSet())},a.prototype.moveCaseDown=function(i){_.size(this.cases)>1&&i>=0&&i<this.cases.length-1&&((0,j.LF)(this.cases,i,i+1),this.updateSelectedIconSet())},a.prototype.deleteCase=function(i){_.size(this.cases)>1&&i>=0&&i<this.cases.length&&(this.cases.splice(i,1),this.updateSelectedIconSet())},a.prototype.onIconSetSelected=function(i,t){var n=this;(0,j.ZH)(this.cases);var d=this.createIconCases(i,this.iconSets[t]);this.cases=d.map(function(u){return n.caseViewModelBuilder.create(n.getCurrentCaseViewModelOptions(u))}),this.iconSetId=t},a.prototype.isValid=function(){return!_.isEmpty(this.cases)&&_.every(this.cases,function(i){return i.isValid()})},a.prototype.getDefinition=function(i){var t=this;return g.fF.assert(function(){return t.isValid()},"Invalid conditional settings"),(0,M.u7)(_.chain(this.cases).clone().reverse().map(function(n){return n.getDefinition(i)}).value())},a.prototype.createIconCases=function(i,t){var n=this,d=t.iconIds.length,u=[];switch(this.ruleTemplateKind){case"number":!function(){for(var U=n.disableAutoRange?q.MM:q.CZ,E=0;E<d;E++)u.push(U(i,Math.round(E/d*100),Math.round((E+1)/d*100),E+1===d,(0,M.fL)(t.iconIds[E])))}();break;case"text":!function(){for(var U=q._1,E=0;E<d;E++)u.push(U(i,(0,M.fL)(t.iconIds[E])))}();break;default:g.fF.assertNever(this.ruleTemplateKind)}return u},a.prototype.updateSelectedIconSet=function(){if("Icon"===this.propertyType&&(this.iconSetId&&(this.iconSetMatching(this.iconSets[this.iconSetId])||(this.iconSetId=void 0)),!this.iconSetId))for(var i in this.iconSets)if(this.iconSetMatching(this.iconSets[i]))return void(this.iconSetId=i)},a.prototype.iconSetMatching=function(i){if(i.iconIds.length!==this.cases.length)return!1;for(var t=0;t<this.cases.length;t++)if(this.cases[t].value!==i.iconIds[t])return!1;return!0},a}(),Y=o(26902),ee=o(87632),re=function(){function a(i,t,n,d){var u=this;this.localizationService=i,this.disableAutoRange=t,this.valueType=n,this.onOptionChanged=function(O){var B=O.id;switch(B){case 0:case 3:break;case 1:u.settings.minValue=void 0;break;case 2:u.settings.maxValue=void 0;break;default:g.fF.assertNever(B)}},this.tooltipConfig={tooltipDelay:100,tooltipLocalizeTitle:"Enter_A_Value",isTooltipForModalDialog:!0,tooltipArrowPosition:ee.xI.arrowTopLeft,tooltipShowOnFocus:!0},this.tooltipConfigDisabled={tooltipDisable:!0};var m={id:0,value:this.localizationService.get("Custom"),disableInput:!1};this.minimumSelectOptions=[{id:1,value:this.localizationService.get("ConditionalFormattingDialog_LowestValue"),disableInput:!0},m],this.maximumSelectOptions=[{id:2,value:this.localizationService.get("ConditionalFormattingDialog_HighestValue"),disableInput:!0},m],this.barDirectionSelectOptions=[{reverseDirection:!1,displayName:this.localizationService.get("LeftToRight")},{reverseDirection:!0,displayName:this.localizationService.get("RightToLeft")}],this.updateDataBarsPositiveColor=function(O){u.settings.positiveColor=u.getFillFromColor(O)},this.updateDataBarsNegativeColor=function(O){u.settings.negativeColor=u.getFillFromColor(O)},this.updateDataBarsAxisColor=function(O){u.settings.axisColor=u.getFillFromColor(O)},this.settings=d?(0,Y.L6)(d):this.getDefaultDataBarsSettings(),this.minimumSelectedOption=this.minimumSelectOptions[void 0!==this.settings.minValue||this.disableAutoRange?1:0],this.maximumSelectedOption=this.maximumSelectOptions[void 0!==this.settings.maxValue||this.disableAutoRange?1:0],this.barDirectionSelectedOption=this.barDirectionSelectOptions[this.settings.reverseDirection?1:0]}return a.prototype.getDefaultDataBarsSettings=function(){return{reverseDirection:!1,hideText:!1}},a.prototype.getFillFromColor=function(i){return{solid:{color:null==i?null:i.value}}},a.prototype.onDisableAutoRangeChanged=function(i){this.disableAutoRange=i,this.disableAutoRange?(this.minimumSelectedOption=this.minimumSelectOptions[1],this.maximumSelectedOption=this.maximumSelectOptions[1]):(this.minimumSelectedOption=this.minimumSelectOptions[0],this.maximumSelectedOption=this.maximumSelectOptions[0])},a.prototype.getDefinition=function(i,t,n){if(t.type.dataBars)return(0,Y.ac)((0,v.pi)((0,v.pi)({},this.settings),{totalMatchingOption:n}),this.valueType);g.fF.assertFail("Unsupported property type, expected dataBars, received ".concat(JSON.stringify(t.type)))},a}(),be=function(){function a(){}return a.prototype.getDefinition=function(i,t){switch(t){case"Color":return{solid:{color:i}};case"Icon":return{kind:"Icon",value:i};case"Text":case"WebUrl":case"Numeric":case"DateTime":return i;case"DataBars":return g.fF.assertFail("Data bars not supported for field value"),null;default:g.fF.assertNever(t)}g.fF.assertFail("Unsupported property type - expected color, icon, text, url, numeric, dateTime; received ".concat(t))},a}(),se=o(52083),ce=o(4829),Me=function(){function a(i,t,n,d){var u=this;this.localizationService=i,this.disableAutoRange=t,this.defaultGradientColors=n,this.onOptionChanged=function(O){var B=O.id;switch(B){case 0:break;case 1:u.settings.minValue=void 0;break;case 3:u.settings.midValue=void 0;break;case 2:u.settings.maxValue=void 0;break;default:g.fF.assertNever(B)}},this.onDivergingChanged=function(){u.updateGradientBar()},this.tooltipConfig={tooltipDelay:100,tooltipLocalizeTitle:"Enter_A_Value",isTooltipForModalDialog:!0,tooltipArrowPosition:ee.xI.arrowTopLeft,tooltipShowOnFocus:!0},this.tooltipConfigDisabled={tooltipDisable:!0};var m={id:0,value:this.localizationService.get("Custom"),disableInput:!1};switch(this.nullStrategyOptions=[{id:0,value:this.localizationService.get("ConditionalFormattingDialog_FormatNull_NoFormat"),disableInput:!0,stringValue:ce.TJ},{id:1,value:this.localizationService.get("ConditionalFormattingDialog_FormatNull_AsZero"),disableInput:!0,stringValue:ce.LX},{id:2,value:this.localizationService.get("ConditionalFormattingDialog_FormatNull_SpecificColor"),disableInput:!1,stringValue:ce.Sx}],this.updateNullStrategy=function(){u.settings.nullStrategy=u.nullStrategyOption.stringValue},this.updateGradientNullColor=function(O){u.settings.nullColor=O&&O.value},this.minimumSelectOptions=[{id:1,value:this.localizationService.get("ConditionalFormattingDialog_LowestValue"),disableInput:!0},m],this.updateGradientMinColor=function(O){u.settings.minColor=O&&O.value,u.updateGradientBar()},this.centerSelectOptions=[{id:3,value:this.localizationService.get("ConditionalFormattingDialog_MiddleValue"),disableInput:!0},m],this.updateGradientMidColor=function(O){u.settings.midColor=O&&O.value,u.updateGradientBar()},this.maximumSelectOptions=[{id:2,value:this.localizationService.get("ConditionalFormattingDialog_HighestValue"),disableInput:!0},m],this.updateGradientMaxColor=function(O){u.settings.maxColor=O&&O.value,u.updateGradientBar()},this.settings=d?(0,se.qG)(d.rule):(0,se.d9)(),this.minimumSelectedOption=this.minimumSelectOptions[void 0!==this.settings.minValue||this.disableAutoRange?1:0],this.centerSelectedOption=this.centerSelectOptions[void 0!==this.settings.midValue||this.disableAutoRange?1:0],this.maximumSelectedOption=this.maximumSelectOptions[void 0!==this.settings.maxValue||this.disableAutoRange?1:0],this.settings.nullStrategy){case ce.TJ:this.nullStrategyOption=this.nullStrategyOptions[0];break;case ce.Sx:this.nullStrategyOption=this.nullStrategyOptions[2];break;default:this.nullStrategyOption=this.nullStrategyOptions[1]}this.updateGradientBar()}return a.prototype.onDisableAutoRangeChanged=function(i){this.disableAutoRange=i,this.disableAutoRange?(this.minimumSelectedOption=this.minimumSelectOptions[1],this.centerSelectedOption=this.centerSelectOptions[1],this.maximumSelectedOption=this.maximumSelectOptions[1]):(this.minimumSelectedOption=this.minimumSelectOptions[0],this.centerSelectedOption=this.centerSelectOptions[0],this.maximumSelectedOption=this.maximumSelectOptions[0])},a.prototype.toggleDiverging=function(){this.settings.diverging=!this.settings.diverging,this.onDivergingChanged()},a.prototype.updateGradientBar=function(){this.gradientBarValue=(0,se.Kj)(this.settings,this.defaultGradientColors)},a.prototype.getDefinition=function(i,t){var n=t.type;if(n.fill&&n.fill.solid&&n.fill.solid.color)return{solid:{color:(0,q.xK)(i,this.settings)}};g.fF.assertFail("Unsupported property type, expected color, received ".concat(JSON.stringify(t.type)))},a}(),A=o(7956),me=o(95862),Se=o(88268),W=o(9754),le=o(68509),J=o(45334),X=o(80777),Oe=function(){function a(i,t,n,d,u){var m=this;this.services=i,this.dataSources=t,this.sourceField=n,this.visualCapabilities=d,this.expectedTypes=u,this.isSourceDisabled=function(O){if(!O)return!1;var B=O.getMetadata(m.schema);if(!B)return!1;switch(B.kind){case 1:return!X.Ge.isCompatibleTo(B.type,m.expectedTypes);case 0:return _.isEmpty(m.getSupportedAggregates(O));default:g.fF.assertFail("Unexpected FieldKind value "+B.kind)}},this.onSourceSelected=function(O,B){m.setSourceField(B)}}return a.prototype.init=function(){return(0,v.mG)(this,void 0,void 0,function(){var i,t,n,d;return(0,v.Jh)(this,function(u){switch(u.label){case 0:return i=this.services.dataSourceSerializer.deserializeDataSources(this.dataSources),this.services.dataSourcesService.set(i),t=this,[4,this.services.conceptualSchemaProxy.get(i)];case 1:return t.schema=u.sent(),(n=this.sourceField)&&(n=(0,W.H)(n),n=(0,Se.E)(n),(0,h.iV)(n)&&(d=n.func,n=this.sourceField=(0,le.n)(n,this.schema))),this.setSourceField(n,d),[2]}})})},a.prototype.onSourceExpectedTypeChange=function(i){this.expectedTypes=i,this.setSourceField(this.sourceField)},a.prototype.setSourceField=function(i,t){if(this.sourceField=i,this.updateSourceAggregateOptions(),_.isEmpty(this.aggregationOptions)){if(this.sourceField){var d=this.sourceField.getMetadata(this.schema);d&&1===d.kind&&!(0,h.jX)(this.sourceField)&&X.Ge.isCompatibleTo(d.type,this.expectedTypes)?(this.aggregationOption=null,this.setSourceAggregate()):(this.sourceField=void 0,this.fieldDisplayName=void 0)}}else{if(this.aggregationOption=_.find(this.aggregationOptions,function(u){return u.aggregate===t}),!this.aggregationOption){var n=this.services.aggrOps.defaultAggregate(i,this.schema,!0,this.expectedTypes);this.aggregationOption=_.find(this.aggregationOptions,function(u){return u.aggregate===n}),this.aggregationOption||(this.aggregationOption=_.head(this.aggregationOptions))}this.setSourceAggregate()}},a.prototype.updateSourceAggregateOptions=function(){for(var i=this.getSupportedAggregates(this.sourceField),t=this.aggregationOptions=[],n=0,d=i;n<d.length;n++){var u=d[n],m=(0,le.n)(this.sourceField,this.schema).getMetadata(this.schema),O=(0,A.z)(u,m);t.push({aggregate:u,displayName:this.services.localizationService.get("Aggregate_"+O)})}},a.prototype.getSupportedAggregates=function(i){return!i||J.m.discourageAggregation(i,this.schema)?[]:this.services.aggrOps.getSupportedAggregates(i,this.schema,this.expectedTypes)},a.prototype.setSourceAggregate=function(){this.sourceField&&(this.aggregationOption&&(this.sourceField=(0,me.k)(this.sourceField,this.aggregationOption.aggregate)),this.fieldDisplayName=this.services.displayNameService.getDisplayName(this.sourceField,this.schema,this.visualCapabilities,null,null,{includeDefaultAggregate:!0,includeHierarchyName:!0,includeVariationSource:!0}))},a}(),_e=function(){function a(i){switch(this.id=i,this.id){case 1:this.displayNameKey="ConditionalFormattingDialog_TotalMatching_ValuesOnly",this.disableAutoRange=!1;break;case 0:this.displayNameKey="ConditionalFormattingDialog_TotalMatching_ValuesAndTotals",this.disableAutoRange=!0;break;case 2:this.displayNameKey="ConditionalFormattingDialog_TotalMatching_TotalsOnly",this.disableAutoRange=!0}}return a.prototype.changeSelector=function(i){var t={data:[{dataViewWildcard:{matchingOption:this.id}}]};return i.id&&(t.id=i.id),i.metadata&&(t.metadata=i.metadata),t},a}(),Pe=o(77616),qe=o(54766),et=o(3468),Qe=o(58702),e=o(50423),tt=o(28199),pt=o(26898),nt=o(83008),$e=o(13702),it=o(40823),ot=o(83342),Je=o(65181),V=o(29866),z=function(){function a(i,t,n,d,u,m,O,B){this.aggrOps=i,this.conceptualSchemaProxy=t,this.dataSourcesService=n,this.displayNameService=d,this.featureSwitchService=u,this.localizationService=m,this.visualPlugin=O,this.dataSourceSerializer=B,this.modeInitialized=!1}return a.prototype.create=function(i,t,n,d,u,m,O,B,U,E,te){return(0,v.mG)(this,void 0,void 0,function(){var H,Fe,je,We,ut,He,K,ze,Ge;return(0,v.Jh)(this,function(Le){switch(Le.label){case 0:return H=(0,Pe.mc)(B),Fe=m?et.ib.deserializeExpr(m):null,[4,this.visualPlugin.ensureBuiltInPlugins()];case 1:return Le.sent(),je=this.visualPlugin.capabilities(d),We=this.dataSourceSerializer.deserializeDataSources(t),[4,this.conceptualSchemaProxy.get(We)];case 2:return ut=Le.sent(),He=this.getPropertyType(H.type),K={visualCapabilities:je,propertyDescriptor:H,propertyType:He,dialogTitle:B.displayName,subtitle:n,targetFieldExpr:Fe,disableAutoRange:!O,colorPickerType:{fill:{solid:{color:!0}}},modeSelectOptions:this.createModeSelectOptions(He,this.localizationService,this.featureSwitchService),schema:ut},this.initializePropertyDefinition(K,U),te&&(ze="DataBars"===He,g.fF.assert(function(){return ze||!_.isEmpty(E.data)&&1===E.data.length&&null!=E.data[0].dataViewWildcard},"allowOverrideTotalMatching is only supported for DataViewWildcard Selectors or static-bound dataBars"),K.totalMatchingOptions=[new _e(1),new _e(0),new _e(2)],Ge=ze?(0,Y.L6)(K.originalPropertyDefinition).totalMatchingOption:E.data[0].dataViewWildcard.matchingOption,K.totalMatchingOption=_.find(K.totalMatchingOptions,function(jt){return jt.id===Ge}),this.updateDisableAutoRange(K,O)),this.initializeExpectedSourceType(K),this.initializeSourceFieldSelector(K,t),[4,K.sourceSelector.init()];case 3:return Le.sent(),this.initializeMode(K,K.originalPropertyDefinition,i,u,this.localizationService,this.featureSwitchService),[2,K]}})})},a.prototype.updateDisableAutoRange=function(i,t){i.disableAutoRange=!t||i.totalMatchingOption.disableAutoRange},a.prototype.initializeExpectedSourceType=function(i){switch(g.fF.assertValue(i.mode,"mode required to be assigned to the view model before source type(s) can be initialized"),i.mode){case"gradient":case"dataBars":i.expectedSourceTypes=[{numeric:!0}];break;case"conditional":i.expectedSourceTypes=this.featureSwitchService.featureSwitches.cfStrings?[{numeric:!0},{text:!0}]:[{numeric:!0}];break;case"fieldValue":switch(i.propertyType){case"Numeric":i.expectedSourceTypes=[{numeric:!0}];break;case"DateTime":i.expectedSourceTypes=[{dateTime:!0}];break;default:i.expectedSourceTypes=[{text:!0}]}break;default:g.fF.assertNever(i.mode)}},a.prototype.initializeSourceFieldSelector=function(i,t){g.fF.assertValue(i.expectedSourceTypes,"expectedSourceTypes required to initialize source field selector"),i.sourceSelector=new Oe({aggrOps:this.aggrOps,conceptualSchemaProxy:this.conceptualSchemaProxy,dataSourcesService:this.dataSourcesService,displayNameService:this.displayNameService,featureSwitchService:this.featureSwitchService,localizationService:this.localizationService,dataSourceSerializer:this.dataSourceSerializer},t,i.originalSourceField,i.visualCapabilities,i.expectedSourceTypes)},a.prototype.getPropertyType=function(i){if(i.fill&&i.fill.solid&&i.fill.solid.color)return"Color";if(i.icon)return"Icon";if(i.dataBars)return"DataBars";var n=X.Ge.fromDescriptor(i);return n.text?n.misc&&n.misc.webUrl?"WebUrl":"Text":n.numeric?"Numeric":n.dateTime?"DateTime":void g.fF.assertFail("Unexpected property type")},a.prototype.createModeSelectOptions=function(i,t,n){var u={name:t.get("ConditionalFormattingDialogModern_Mode_ColorScale"),value:"gradient"},m={name:t.get("ConditionalFormattingDialog_RuleBased_RulesTitle"),value:"conditional"},O={name:t.get("ConditionalFormattingDialog_Mode_FieldValue"),value:"fieldValue"},B={name:t.get("Visual_ConditionalFormatting_DataBars"),value:"dataBars"};switch(i){case"Color":return[u,m,O];case"Icon":return[m,O];case"Text":case"WebUrl":case"Numeric":case"DateTime":return[O];case"DataBars":return[B];default:g.fF.assertNever(i)}return[]},a.prototype.getConditionalSourceExpr=function(i){g.fF.assertValue(i,"propDefn"),g.fF.assertNonEmpty(i.cases,"Empty conditional cases");var t=_.head(i.cases).condition;return(0,h.Ym)(t)&&(t=t.arg),(0,h.IS)(t)||(0,h.f8)(t)?t.left:((0,h.un)(t)&&(t=t.left),(0,h.$Q)(t)?t.left:void 0)},a.prototype.initializePropertyDefinition=function(i,t){var n,d;if(t){var u=(0,qe.PU)(t,i.propertyDescriptor,!0);switch(i.propertyType){case"Color":var m=u;g.fF.assert(function(){return(0,Qe.X2)(m)},"Expected a FillDefinition"),d=m&&m.solid&&m.solid.color;break;case"Icon":var B=u;g.fF.assert(function(){return(0,Qe.r)(B)},"Expected an IconDefinition"),d=B.value,g.fF.assert(function(){return(0,h.AW)(B.layout)},"Icon layout should be constant"),g.fF.assert(function(){return(0,h.AW)(B.verticalAlignment)},"Icon Vertical alignment should be constant"),i.iconLayout=M.jz.getTextValue(B.layout),i.iconVerticalAlignment=M.jz.getTextValue(B.verticalAlignment);break;case"DataBars":return i.mode="dataBars",i.originalSourceField=i.targetFieldExpr,void(i.originalPropertyDefinition=u);case"Text":case"WebUrl":case"Numeric":case"DateTime":d=u;break;default:g.fF.assertNever(i.propertyType)}}if(d&&!(0,h.VC)(d)&&!(0,h.wt)(d)&&((0,h.Tu)(d)?(i.mode="gradient",i.originalPropertyDefinition=d,i.originalSourceField=d.input):(0,h.Gs)(d)?(i.mode="conditional",i.originalPropertyDefinition=d,i.originalSourceField=this.getConditionalSourceExpr(d)):(0,h.kb)(d)||(0,h.iV)(d)?(i.mode="fieldValue",i.originalPropertyDefinition=d,i.originalSourceField=d):g.fF.assertFail("Unsupported property value, received ".concat(d))),!i.originalPropertyDefinition){if("text"===this.determineRuleTemplateKind(i,!1,i.targetFieldExpr)&&"Color"===i.propertyType){var E=i.modeSelectOptions.find(function(te){return"conditional"===te.value});i.mode=null!==(n=E?.value)&&void 0!==n?n:i.modeSelectOptions[0].value}else i.mode=i.modeSelectOptions[0].value;i.originalPropertyDefinition=void 0,"Icon"===i.propertyType&&(i.iconLayout=i.iconLayout||q.IA,i.iconVerticalAlignment=i.iconVerticalAlignment||q.QZ)}(!i.originalSourceField||(0,h.NH)(i.originalSourceField))&&(i.originalSourceField=i.targetFieldExpr)},a.prototype.initializeMode=function(i,t,n,d,u,m){g.fF.assertAnyValue(t,"If propertyDefinition is defined, the viewModel will be initialized with it, if not, it will be initialized with default settings"),this.initializeExpectedSourceType(i);var O=i.targetFieldExpr,B=n.dataColors;switch(i.mode){case"gradient":return t||(t=(0,q.vX)(O).solid.color),i.gradient=new Me(u,i.disableAutoRange,B.getGradientColors(),t),void(this.modeInitialized=!0);case"conditional":var U,E="number",te=!this.modeInitialized;switch(i.propertyType){case"Color":U=B.getGradientColors().minColor.value,E=this.determineRuleTemplateKind(i,te),t=this.determinePropertyDefinition(E,t,function(){return(0,q.yY)(O,U,E).solid.color});break;case"Icon":U=q.zB,E=this.determineRuleTemplateKind(i,te),t=this.determinePropertyDefinition(E,t,function(){return(0,q.XB)(O,E).value});break;default:g.fF.assertFail("Conditional mode supports only Color and Icon")}return i.conditional=new ne(i.disableAutoRange,i.propertyType,U,t,d,u,E,m),void(this.modeInitialized=!0);case"dataBars":var je=i.originalSourceField.getMetadata(i.schema).type;return i.dataBars=new re(u,i.disableAutoRange,je,t),void(this.modeInitialized=!0);case"fieldValue":i.fieldValue=new be,this.modeInitialized=!0;break;default:g.fF.assertNever(i.mode)}},a.prototype.determinePropertyDefinition=function(i,t,n){if(null==t)return n();var d=_.every(t.cases,function(O){var B=O.condition,te=((0,h.Ym)(B)?B.arg:B).getAnnotations();return!_.isEmpty(te)&&null!=te[ie.Q]});return"text"===i&&!d||"number"===i&&d?(g.fF.warn("The rule template kind does not match the existing property definition. Creating a new default property definition."),n()):t},a.prototype.retrieveSourceFieldFromViewModel=function(i){var t;return null===(t=i.sourceSelector)||void 0===t?void 0:t.sourceField},a.prototype.determineRuleTemplateKind=function(i,t,n){var d;if(void 0===t&&(t=!0),void 0===n&&(n=null),!this.featureSwitchService.featureSwitches.cfStrings||null==(n=n??this.retrieveSourceFieldFromViewModel(i)))return"number";var u=this.aggrOps.getMetadataForUnderlyingType(n,i.schema);if(t){var m=null===(d=i.sourceSelector)||void 0===d?void 0:d.aggregationOption;if(null!=m){var O=m?.aggregate,B=3===O||4===O||null==O;return u?.type.text&&B?"text":"number"}}return u?.type.text?"text":"number"},a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275inject(tt.C),e.\u0275\u0275inject(pt.i),e.\u0275\u0275inject(nt.D),e.\u0275\u0275inject($e.O),e.\u0275\u0275inject(ot.vZ),e.\u0275\u0275inject(Je.o),e.\u0275\u0275inject(V.D),e.\u0275\u0275inject(it._))},a.\u0275prov=e.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),Q=o(85287),T=o(17174),ae=o(59897),oe=o(25740),ye=o(44529),de=o(88315),pe=o(73221),fe=o(98665),Ae=o(83317),Ne=o(59973),Ee=o(14172),ke=o(4877),Ve=o(84144),Ke=o(67489),rt=o(83309),Ye=o(93215),Ze=o(23983),ft=o(83723),Mt=o(29524),Ot=o(88023),_t=o(72525),vt=o(86612),Re=o(77476),xt=o(96777),Ft=o(96295),Ce=o(93247),It=function(){function a(){var i=this;this.onClick=function(t){return i.onButtonClick(t)},this.onKeydown=function(t){return i.onButtonKeydown(t)},this.onDocumentMouseDown=function(t){i.popup.contains(t.target)||i.popupButton.contains(t.target)||i.close()}}return a.prototype.subscribe=function(i,t){this.popup=i,this.popupButton=t,this.popup.style.position="fixed",this.close(),this.popupButton.addEventListener("click",this.onClick),this.popupButton.addEventListener("keydown",this.onKeydown),document.addEventListener("mousedown",this.onDocumentMouseDown,!0)},a.prototype.unsubscribe=function(){this.popupButton.removeEventListener("click",this.onClick),this.popupButton.removeEventListener("keydown",this.onKeydown),document.removeEventListener("mousedown",this.onDocumentMouseDown,!0),this.close(),this.popup=void 0,this.popupButton=void 0},a.prototype.onButtonClick=function(i){this.togglePopup()},a.prototype.onButtonKeydown=function(i){switch(i.keyCode){case Ce.K5:this.open();break;case Ce.hY:this.close();break;default:return}i.preventDefault(),i.stopPropagation()},a.prototype.togglePopup=function(){this.closed?this.open():this.close()},a.prototype.open=function(){this.popup.style.display="block";var n,i=this.popup.getBoundingClientRect(),t=this.popupButton.getBoundingClientRect();this.popup.style.left=t.right-i.width+"px",n=t.bottom+i.height>window.innerHeight?Math.max(t.top-i.height,0):t.bottom,this.popup.style.top=n+"px",this.closed=!1},a.prototype.close=function(){this.popup.style.display="none",this.closed=!0},a}(),Dt=o(91615),yt=o(11494),Ct=o(45916),bt=o(85102),Pt=["button"],gt=["popup"],Tt=["noIcon"],wt=["icon"];function Et(a,i){if(1&a&&e.\u0275\u0275element(0,"img",14),2&a){var t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("src",t.selectedIcon.imageUrl,e.\u0275\u0275sanitizeUrl)}}function Bt(a,i){if(1&a&&e.\u0275\u0275element(0,"pbi-svg-use-symbol",15),2&a){var t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("symbolId",t.selectedIcon.svgId)}}function Lt(a,i){if(1&a&&(e.\u0275\u0275elementStart(0,"div",11),e.\u0275\u0275template(1,Et,1,1,"img",12),e.\u0275\u0275template(2,Bt,1,1,"pbi-svg-use-symbol",13),e.\u0275\u0275elementEnd()),2&a){var t=e.\u0275\u0275nextContext();e.\u0275\u0275attribute("aria-label",t.getIconDescription(t.selectedIcon)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!!t.selectedIcon.url),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!!t.selectedIcon.svgId)}}function At(a,i){if(1&a&&e.\u0275\u0275element(0,"img",14),2&a){var t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275property("src",t.imageUrl,e.\u0275\u0275sanitizeUrl)}}function Nt(a,i){if(1&a&&e.\u0275\u0275element(0,"pbi-svg-use-symbol",15),2&a){var t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275property("symbolId",t.svgId)}}function Vt(a,i){if(1&a){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",16,17),e.\u0275\u0275listener("click",function(){var B=e.\u0275\u0275restoreView(t).$implicit,U=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(U.onIconClick(B))})("keydown",function(O){var U=e.\u0275\u0275restoreView(t).$implicit,E=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(E.onIconKeydown(O,U))}),e.\u0275\u0275template(2,At,1,1,"img",12),e.\u0275\u0275template(3,Nt,1,1,"pbi-svg-use-symbol",13),e.\u0275\u0275elementEnd()}if(2&a){var n=i.$implicit,d=i.index,u=e.\u0275\u0275nextContext();e.\u0275\u0275property("title",u.getIconDescription(n)),e.\u0275\u0275attribute("key",d)("tabindex",0==d?0:-1)("aria-selected",u.selectedIconId===n.id)("aria-posinset",d+1)("aria-setsize",n.length)("data-unique-id","icon-"+n.id),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!!n.url),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!!n.svgId)}}var Ut=function(){function a(i,t,n){this.eventBridge=i,this.localizationService=t,this.itemPickerService=n,this.iconChanged=new e.EventEmitter,this.closed=new e.EventEmitter,this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager()}return a.prototype.ngOnInit=function(){var i=this;this.noIconLabel=this.localizationService.get("IconPicker_NoIcon"),this.subscriptionManager.subscribe(Dt.kx,function(){return i.onVisualThemeChanged()}),this.updateIcons(),this.selectedIcon=this.icons.find(function(t){return t.id===i.selectedIconId})},a.prototype.ngAfterViewInit=function(){this.popupHandler=new It,this.popupHandler.subscribe(this.popup.nativeElement,this.headerButton.nativeElement)},a.prototype.ngOnDestroy=function(){this.popupHandler.unsubscribe(),this.subscriptionManager.unsubscribeAll()},a.prototype.onIconClick=function(i){this.selectIcon(i)},a.prototype.onIconKeydown=function(i,t){switch(i.keyCode){case Ce.hY:this.popupHandler.close();break;case Ce.K5:this.selectIcon(t);break;case Ce.Mf:this.noIcon.nativeElement.focus();break;case Ce.LH:case Ce.JH:case Ce.oh:case Ce.SV:this.focusOnNextIcon(i.keyCode,this.icons.indexOf(t))}i.preventDefault(),i.stopPropagation()},a.prototype.onNoPickClick=function(){this.selectIcon(void 0)},a.prototype.onNoPickKeyDown=function(i){switch(i.keyCode){case Ce.Mf:var t;t=i.shiftKey?this.icons.length-1:0,this.iconElementRefs.map(function(n){return n.nativeElement}).find(function(n){return n.getAttribute("key")===t.toString()}).focus();break;case Ce.K5:this.selectIcon(void 0)}i.preventDefault(),i.stopPropagation()},a.prototype.getIconDescription=function(i){if(i.description){if("string"==typeof i.description)return i.description;if(i.description.resourceKey)return this.localizationService.get(i.description.resourceKey)}},a.prototype.onVisualThemeChanged=function(){this.updateIcons()},a.prototype.updateIcons=function(){var i=_.cloneDeep(this.itemPickerService.getIcons());for(var t in this.icons=[],i){var n=i[t];n.id=t,this.icons.push(n)}},a.prototype.selectIcon=function(i){this.selectedIcon=i,this.selectedIconId=i?i.id:void 0,this.popupHandler.close(),this.iconChanged.emit(this.selectedIconId)},a.prototype.focusOnNextIcon=function(i,t){var n=this.getNextIconIndex(i,t);this.focusOnIconByIndex(n)},a.prototype.focusOnIconByIndex=function(i){this.getElementFromIndex(i).focus()},a.prototype.getElementFromIndex=function(i){return this.iconElementRefs.map(function(t){return t.nativeElement}).find(function(t){return t.getAttribute("key")===i.toString()})},a.prototype.getNextIconIndex=function(i,t){var u,m,n=t%a.columnCount,d=Math.floor(t/a.columnCount);return i===Ce.LH||i===Ce.JH?(u=n,m=this.getNextIndex(this.getColumnItemCount(n),d,i)):(i===Ce.oh||i===Ce.SV)&&(u=this.getNextIndex(this.getRowItemCount(d),n,i),m=d),this.getIndexFromPosition(u,m)},a.prototype.getRowItemCount=function(i){var t=this.icons.length;return i<Math.floor(t/a.columnCount)?a.columnCount:t%a.columnCount},a.prototype.getColumnItemCount=function(i){var t=this.icons.length/a.columnCount,n=Math.floor(t);return i<(t-n)*a.columnCount-1&&n++,n},a.prototype.getNextIndex=function(i,t,n){return n===Ce.SV||n===Ce.JH?t=++t>=i?0:t:(n===Ce.oh||n===Ce.LH)&&(t=--t<0?i-1:t),t},a.prototype.getIndexFromPosition=function(i,t){return i+t*a.columnCount},a.columnCount=10,a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275directiveInject(yt.J),e.\u0275\u0275directiveInject(Je.o),e.\u0275\u0275directiveInject(ke.a))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["icon-picker"]],viewQuery:function(t,n){if(1&t&&(e.\u0275\u0275viewQuery(Pt,7),e.\u0275\u0275viewQuery(gt,7),e.\u0275\u0275viewQuery(Tt,7),e.\u0275\u0275viewQuery(wt,5)),2&t){var d=void 0;e.\u0275\u0275queryRefresh(d=e.\u0275\u0275loadQuery())&&(n.headerButton=d.first),e.\u0275\u0275queryRefresh(d=e.\u0275\u0275loadQuery())&&(n.popup=d.first),e.\u0275\u0275queryRefresh(d=e.\u0275\u0275loadQuery())&&(n.noIcon=d.first),e.\u0275\u0275queryRefresh(d=e.\u0275\u0275loadQuery())&&(n.iconElementRefs=d)}},inputs:{selectedIconId:"selectedIconId",labelId:"labelId"},outputs:{iconChanged:"iconChanged",closed:"closed"},decls:13,vars:7,consts:[["role","button","tabindex","0",1,"popoutButton"],["button",""],["class","icon",4,"ngIf"],[1,"glyphicon","pbi-glyph-flickup","glyph-micro","dropdown-icon"],[1,"popup"],["popup",""],["role","listbox",1,"icon-container"],[1,"icon-container-scroll"],["class","icon","role","option",3,"title","click","keydown",4,"ngFor","ngForOf"],["tabindex","0",1,"noIcon",3,"click","keydown"],["noIcon",""],[1,"icon"],["role","presentation",3,"src",4,"ngIf"],["sheet","conditionalFormattingDialogIcons",3,"symbolId",4,"ngIf"],["role","presentation",3,"src"],["sheet","conditionalFormattingDialogIcons",3,"symbolId"],["role","option",1,"icon",3,"title","click","keydown"],["icon",""]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"div",0,1),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275template(3,Lt,3,3,"div",2),e.\u0275\u0275element(4,"i",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"div",4,5)(7,"div",6)(8,"div",7),e.\u0275\u0275template(9,Vt,4,9,"div",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",9,10),e.\u0275\u0275listener("click",function(){return n.onNoPickClick()})("keydown",function(u){return n.onNoPickKeyDown(u)}),e.\u0275\u0275text(12),e.\u0275\u0275elementEnd()()()),2&t&&(e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(2,5,"Icon_Picker")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!!n.selectedIcon),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",n.icons),e.\u0275\u0275advance(1),e.\u0275\u0275attribute("aria-selected",void 0===n.selectedIconId),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.noIconLabel))},dependencies:[Re.NgForOf,Re.NgIf,Ct.R,bt.F],styles:["[_nghost-%COMP%]{display:flex;white-space:nowrap;-webkit-user-select:none;-ms-user-select:none;user-select:none}.popoutButton[_ngcontent-%COMP%]{display:flex;width:44px;height:28px;margin-left:4px;background-color:var(--white-color, #FFF);border:1px solid var(--fluent-theme-neutral-dark-color, #201F1E);box-sizing:border-box}.popoutButton[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{position:relative}.dropdown-icon[_ngcontent-%COMP%]{margin-left:6px;margin-top:6px}.popup[_ngcontent-%COMP%]{position:fixed;color:var(--fluent-theme-neutral-primary-alt-color, #3B3A39);background-color:var(--white-color, #FFF);box-shadow:0 4.8px 14.4px rgba(0,0,0,.11),0 25.6px 57.6px rgba(0,0,0,.13);font-size:12px;padding:5px;z-index:1}.icon-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.icon-container-scroll[_ngcontent-%COMP%]{overflow:auto;max-height:200px}.icon[_ngcontent-%COMP%]{margin-left:4px;margin-top:4px;width:16px;height:16px;float:left}.icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.noIcon[_ngcontent-%COMP%]{text-align:center}"],changeDetection:0}),a}(),Rt=o(59968),zt=o(22844),p=o(50057),c=o(78633),f=o(76492),D=o(58679),P=o(42189),Z=o(9529),k=o(56011),De=o(65005),N=o(45074),Be=o(36858),xe=o(57274);function Ue(a,i){if(1&a&&(e.\u0275\u0275elementStart(0,"pbi-dropdown-item",26),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){var t=i.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.name," ")}}function Te(a,i){if(1&a&&(e.\u0275\u0275elementStart(0,"pbi-dropdown-item",26),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275elementEnd()),2&a){var t=i.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(2,2,t.displayNameKey)," ")}}function at(a,i){if(1&a&&(e.\u0275\u0275elementStart(0,"fieldset",27),e.\u0275\u0275element(1,"legend",28),e.\u0275\u0275elementStart(2,"pbi-dropdown",29)(3,"pbi-dropdown-trigger"),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,Te,3,4,"pbi-dropdown-item",20),e.\u0275\u0275elementEnd()()),2&a){var t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(5,3,t.totalMatchingOption.value.displayNameKey)," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t.viewModel.totalMatchingOptions)("ngForTrackBy",t.trackBy.id)}}function lt(a,i){if(1&a&&(e.\u0275\u0275elementStart(0,"pbi-dropdown-item",26),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){var t=i.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",t.displayName," ")}}function st(a,i){if(1&a&&(e.\u0275\u0275elementStart(0,"pbi-dropdown-item",26),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){var t=i.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",t.value," ")}}var ve=function(i){return{value:i}},ht=function(i){return{visibility:i}};function ct(a,i){if(1&a){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"fieldset",30),e.\u0275\u0275element(1,"legend",31),e.\u0275\u0275elementStart(2,"section",32)(3,"pbi-dropdown",33)(4,"pbi-dropdown-trigger"),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,st,2,2,"pbi-dropdown-item",20),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"theme-color-input",34),e.\u0275\u0275listener("colorChanged",function(u){e.\u0275\u0275restoreView(t);var m=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(m.viewModel.gradient.updateGradientNullColor(u))}),e.\u0275\u0275elementEnd()()()}if(2&a){var n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275attribute("aria-label",n.defaultFormattingLabel),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.nullStrategyOption.value.value),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",n.viewModel.gradient.nullStrategyOptions)("ngForTrackBy",n.trackBy.id),e.\u0275\u0275advance(1),e.\u0275\u0275property("color",e.\u0275\u0275pureFunction1(9,ve,n.viewModel.gradient.settings.nullColor))("defaultColor",e.\u0275\u0275pureFunction1(11,ve,n.colorPalette.dataColors.getGradientColors().nullColor.value))("isNoFillItemSupported",n.isNoFillItemSupported)("buttonHeight",32)("ngStyle",e.\u0275\u0275pureFunction1(13,ht,n.viewModel.gradient.nullStrategyOption.disableInput?"hidden":"visible"))}}function Xe(a,i){if(1&a&&(e.\u0275\u0275elementStart(0,"pbi-dropdown-item",26),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){var t=i.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",t.displayName," ")}}function St(a,i){if(1&a&&(e.\u0275\u0275elementStart(0,"fieldset",35),e.\u0275\u0275element(1,"legend",36),e.\u0275\u0275elementStart(2,"pbi-dropdown",37)(3,"pbi-dropdown-trigger"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,Xe,2,2,"pbi-dropdown-item",20),e.\u0275\u0275elementEnd()()),2&a){var t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",t.barDirectionSelectedOption.value.displayName," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t.viewModel.dataBars.barDirectionSelectOptions)("ngForTrackBy",t.trackBy.reverseDirection)}}function Ie(a,i){if(1&a&&(e.\u0275\u0275elementStart(0,"pbi-dropdown-item",26),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){var t=i.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",t.value," ")}}function mt(a,i){if(1&a&&(e.\u0275\u0275elementStart(0,"pbi-dropdown-item",26),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){var t=i.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",t.value," ")}}function Gt(a,i){if(1&a){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"fieldset"),e.\u0275\u0275element(1,"legend",52),e.\u0275\u0275elementStart(2,"section",32)(3,"pbi-dropdown",53)(4,"pbi-dropdown-trigger"),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,mt,2,2,"pbi-dropdown-item",20),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"theme-color-input",42),e.\u0275\u0275listener("colorChanged",function(u){e.\u0275\u0275restoreView(t);var m=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(m.viewModel.gradient.updateGradientMidColor(u))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(8,"pbi-form-field"),e.\u0275\u0275element(9,"input",54),e.\u0275\u0275pipe(10,"localize"),e.\u0275\u0275pipe(11,"localize"),e.\u0275\u0275elementEnd()()}if(2&a){var n=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",n.centerSelectedOption.value.value," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",n.viewModel.gradient.centerSelectOptions)("ngForTrackBy",n.trackBy.id),e.\u0275\u0275advance(1),e.\u0275\u0275property("color",e.\u0275\u0275pureFunction1(15,ve,n.viewModel.gradient.settings.midColor))("defaultColor",e.\u0275\u0275pureFunction1(17,ve,n.colorPalette.dataColors.getGradientColors().midColor.value))("isNoFillItemSupported",n.isNoFillItemSupported)("buttonHeight",32),e.\u0275\u0275advance(2),e.\u0275\u0275property("placeholder",e.\u0275\u0275pipeBind1(10,11,"Enter_A_Value"))("pbiTooltip",null==n.viewModel.gradient.settings.midValue?e.\u0275\u0275pipeBind1(11,13,"Enter_A_Value"):void 0)("pbiTooltipShowDelay",n.viewModel.gradient.tooltipConfig.tooltipDelay)("pbiTooltipHideDelay",n.viewModel.gradient.tooltipConfig.tooltipDelay)}}function Qt(a,i){if(1&a&&(e.\u0275\u0275elementStart(0,"pbi-dropdown-item",26),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){var t=i.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",t.value," ")}}var $t=function(){return{name:"ConditionalFormattingDialogModern_Diverging","aria-label":"ConditionalFormattingDialogModern_Diverging"}};function Jt(a,i){if(1&a){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",38)(1,"section",39)(2,"fieldset"),e.\u0275\u0275element(3,"legend",40),e.\u0275\u0275elementStart(4,"section",32)(5,"pbi-dropdown",41)(6,"pbi-dropdown-trigger"),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,Ie,2,2,"pbi-dropdown-item",20),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"theme-color-input",42),e.\u0275\u0275listener("colorChanged",function(u){e.\u0275\u0275restoreView(t);var m=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(m.viewModel.gradient.updateGradientMinColor(u))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(10,"pbi-form-field"),e.\u0275\u0275element(11,"input",43),e.\u0275\u0275pipe(12,"localize"),e.\u0275\u0275pipe(13,"localize"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(14,Gt,12,19,"fieldset",44),e.\u0275\u0275elementStart(15,"fieldset"),e.\u0275\u0275element(16,"legend",45),e.\u0275\u0275elementStart(17,"section",32)(18,"pbi-dropdown",46)(19,"pbi-dropdown-trigger"),e.\u0275\u0275text(20),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(21,Qt,2,2,"pbi-dropdown-item",20),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"theme-color-input",42),e.\u0275\u0275listener("colorChanged",function(u){e.\u0275\u0275restoreView(t);var m=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(m.viewModel.gradient.updateGradientMaxColor(u))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(23,"pbi-form-field"),e.\u0275\u0275element(24,"input",47),e.\u0275\u0275pipe(25,"localize"),e.\u0275\u0275pipe(26,"localize"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(27,"section",48),e.\u0275\u0275element(28,"pbi-checkbox",49),e.\u0275\u0275pipe(29,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"section",50),e.\u0275\u0275element(31,"gradient-bar-lazy",51),e.\u0275\u0275elementEnd()()}if(2&a){var n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate(n.minimumSelectedOption.value.value),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",n.viewModel.gradient.minimumSelectOptions)("ngForTrackBy",n.trackBy.id),e.\u0275\u0275advance(1),e.\u0275\u0275property("color",e.\u0275\u0275pureFunction1(36,ve,n.viewModel.gradient.settings.minColor))("defaultColor",e.\u0275\u0275pureFunction1(38,ve,n.colorPalette.dataColors.getGradientColors().minColor.value))("isNoFillItemSupported",n.isNoFillItemSupported)("buttonHeight",32),e.\u0275\u0275advance(2),e.\u0275\u0275property("placeholder",e.\u0275\u0275pipeBind1(12,26,"Enter_A_Value"))("pbiTooltip",null==n.viewModel.gradient.settings.minValue?e.\u0275\u0275pipeBind1(13,28,"Enter_A_Value"):void 0)("pbiTooltipShowDelay",n.viewModel.gradient.tooltipConfig.tooltipDelay)("pbiTooltipHideDelay",n.viewModel.gradient.tooltipConfig.tooltipDelay),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",n.diverging.value),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate1(" ",n.maximumSelectedOption.value.value," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",n.viewModel.gradient.maximumSelectOptions)("ngForTrackBy",n.trackBy.id),e.\u0275\u0275advance(1),e.\u0275\u0275property("color",e.\u0275\u0275pureFunction1(40,ve,n.viewModel.gradient.settings.maxColor))("defaultColor",e.\u0275\u0275pureFunction1(42,ve,n.colorPalette.dataColors.getGradientColors().maxColor.value))("isNoFillItemSupported",n.isNoFillItemSupported)("buttonHeight",32),e.\u0275\u0275advance(2),e.\u0275\u0275property("placeholder",e.\u0275\u0275pipeBind1(25,30,"Enter_A_Value"))("pbiTooltip",null==n.viewModel.gradient.settings.maxValue?e.\u0275\u0275pipeBind1(26,32,"Enter_A_Value"):void 0)("pbiTooltipShowDelay",n.viewModel.gradient.tooltipConfig.tooltipDelay)("pbiTooltipHideDelay",n.viewModel.gradient.tooltipConfig.tooltipDelay),e.\u0275\u0275advance(4),e.\u0275\u0275property("label",e.\u0275\u0275pipeBind1(29,34,"ConditionalFormattingDialogModern_Diverging"))("localizeAttr",e.\u0275\u0275pureFunction0(44,$t)),e.\u0275\u0275advance(3),e.\u0275\u0275property("colors",n.viewModel.gradient.gradientBarValue)}}function Yt(a,i){if(1&a&&(e.\u0275\u0275elementStart(0,"pbi-dropdown-item",26),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){var t=i.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",t.value," ")}}function Zt(a,i){if(1&a&&(e.\u0275\u0275elementStart(0,"pbi-dropdown-item",26),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){var t=i.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",t.value," ")}}var Xt=function(){return{name:"DataBarsDialog_HideText","aria-label":"DataBarsDialog_HideText"}};function qt(a,i){if(1&a){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",38)(1,"section",39)(2,"fieldset"),e.\u0275\u0275element(3,"legend",40),e.\u0275\u0275elementStart(4,"section",32)(5,"pbi-dropdown",41)(6,"pbi-dropdown-trigger"),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,Yt,2,2,"pbi-dropdown-item",20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"pbi-form-field"),e.\u0275\u0275element(10,"input",55),e.\u0275\u0275pipe(11,"localize"),e.\u0275\u0275pipe(12,"localize"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(13,"fieldset"),e.\u0275\u0275element(14,"legend",45),e.\u0275\u0275elementStart(15,"section",32)(16,"pbi-dropdown",46)(17,"pbi-dropdown-trigger"),e.\u0275\u0275text(18),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(19,Zt,2,2,"pbi-dropdown-item",20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(20,"pbi-form-field"),e.\u0275\u0275element(21,"input",56),e.\u0275\u0275pipe(22,"localize"),e.\u0275\u0275pipe(23,"localize"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(24,"section",57)(25,"fieldset"),e.\u0275\u0275element(26,"legend",58),e.\u0275\u0275elementStart(27,"theme-color-input",59),e.\u0275\u0275listener("colorChanged",function(u){e.\u0275\u0275restoreView(t);var m=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(m.viewModel.dataBars.updateDataBarsPositiveColor(u))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(28,"fieldset"),e.\u0275\u0275element(29,"legend",60),e.\u0275\u0275elementStart(30,"theme-color-input",61),e.\u0275\u0275listener("colorChanged",function(u){e.\u0275\u0275restoreView(t);var m=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(m.viewModel.dataBars.updateDataBarsNegativeColor(u))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(31,"fieldset"),e.\u0275\u0275element(32,"legend",62),e.\u0275\u0275elementStart(33,"theme-color-input",63),e.\u0275\u0275listener("colorChanged",function(u){e.\u0275\u0275restoreView(t);var m=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(m.viewModel.dataBars.updateDataBarsAxisColor(u))}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(34,"section",48),e.\u0275\u0275element(35,"pbi-checkbox",64),e.\u0275\u0275pipe(36,"localize"),e.\u0275\u0275elementEnd()()}if(2&a){var n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate(n.minimumSelectedOption.value.value),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",n.viewModel.dataBars.minimumSelectOptions)("ngForTrackBy",n.trackBy.id),e.\u0275\u0275advance(2),e.\u0275\u0275property("placeholder",e.\u0275\u0275pipeBind1(11,26,"Enter_A_Value"))("pbiTooltip",null==n.viewModel.dataBars.settings.minValue?e.\u0275\u0275pipeBind1(12,28,"Enter_A_Value"):void 0)("pbiTooltipShowDelay",n.viewModel.dataBars.tooltipConfig.tooltipDelay)("pbiTooltipHideDelay",n.viewModel.dataBars.tooltipConfig.tooltipDelay),e.\u0275\u0275advance(8),e.\u0275\u0275textInterpolate1(" ",n.maximumSelectedOption.value.value," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",n.viewModel.dataBars.maximumSelectOptions)("ngForTrackBy",n.trackBy.id),e.\u0275\u0275advance(2),e.\u0275\u0275property("placeholder",e.\u0275\u0275pipeBind1(22,30,"Enter_A_Value"))("pbiTooltip",null==n.viewModel.dataBars.settings.maxValue?e.\u0275\u0275pipeBind1(23,32,"Enter_A_Value"):void 0)("pbiTooltipShowDelay",n.viewModel.dataBars.tooltipConfig.tooltipDelay)("pbiTooltipHideDelay",n.viewModel.dataBars.tooltipConfig.tooltipDelay),e.\u0275\u0275advance(6),e.\u0275\u0275property("color",e.\u0275\u0275pureFunction1(36,ve,null==n.viewModel.dataBars.settings.positiveColor?null:n.viewModel.dataBars.settings.positiveColor.solid.color))("defaultColor",e.\u0275\u0275pureFunction1(38,ve,n.colorPalette.dataColors.getGradientColors().maxColor.value))("buttonHeight",32),e.\u0275\u0275advance(3),e.\u0275\u0275property("color",e.\u0275\u0275pureFunction1(40,ve,null==n.viewModel.dataBars.settings.negativeColor?null:n.viewModel.dataBars.settings.negativeColor.solid.color))("defaultColor",e.\u0275\u0275pureFunction1(42,ve,n.colorPalette.dataColors.getGradientColors().minColor.value))("buttonHeight",32),e.\u0275\u0275advance(3),e.\u0275\u0275property("color",e.\u0275\u0275pureFunction1(44,ve,null==n.viewModel.dataBars.settings.axisColor?null:n.viewModel.dataBars.settings.axisColor.solid.color))("defaultColor",e.\u0275\u0275pureFunction1(46,ve,n.colorPalette.foreground.value))("buttonHeight",32)("isNoFillItemSupported",n.isNoFillItemSupported),e.\u0275\u0275advance(2),e.\u0275\u0275property("label",e.\u0275\u0275pipeBind1(36,34,"DataBarsDialog_HideText"))("localizeAttr",e.\u0275\u0275pureFunction0(48,Xt))}}function en(a,i){if(1&a&&(e.\u0275\u0275elementStart(0,"pbi-dropdown-item",26),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275elementEnd()),2&a){var t=i.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(2,2,t.displayNameKey)," ")}}function tn(a,i){if(1&a&&(e.\u0275\u0275elementStart(0,"pbi-dropdown-item",26),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275elementEnd()),2&a){var t=i.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(2,2,t.displayNameKey)," ")}}function nn(a,i){if(1&a&&(e.\u0275\u0275elementStart(0,"fieldset",73),e.\u0275\u0275element(1,"legend",74)(2,"icon-set-picker-input",75),e.\u0275\u0275elementEnd()),2&a){var t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(2),e.\u0275\u0275property("iconSetId",t.viewModel.conditional.iconSetId)("onIconSetSelected",t.onIconSetSelected)}}function on(a,i){if(1&a&&(e.\u0275\u0275elementStart(0,"section",65)(1,"fieldset",66),e.\u0275\u0275element(2,"legend",67),e.\u0275\u0275elementStart(3,"pbi-dropdown",68)(4,"pbi-dropdown-trigger"),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,en,3,4,"pbi-dropdown-item",7),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(8,"fieldset",69),e.\u0275\u0275element(9,"legend",70),e.\u0275\u0275elementStart(10,"pbi-dropdown",71)(11,"pbi-dropdown-trigger"),e.\u0275\u0275text(12),e.\u0275\u0275pipe(13,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(14,tn,3,4,"pbi-dropdown-item",7),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(15,nn,3,2,"fieldset",72),e.\u0275\u0275elementEnd()),2&a){var t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(6,5,t.iconLayout.value.displayNameKey)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t.iconLayoutOptions),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(13,7,t.iconVerticalAlignment.value.displayNameKey)," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t.iconVerticalAlignmentOptions),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isConditional&&t.isPropertyTypeIcon)}}function rn(a,i){if(1&a&&(e.\u0275\u0275elementStart(0,"pbi-dropdown-item",26),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){var t=i.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",t.displayName," ")}}function an(a,i){if(1&a&&(e.\u0275\u0275elementStart(0,"pbi-dropdown-item",26),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275elementEnd()),2&a){var t=i.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(2,2,t.displayNameKey)," ")}}function ln(a,i){if(1&a&&(e.\u0275\u0275elementStart(0,"pbi-dropdown-item",26),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){var t=i.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",t.displayName," ")}}function sn(a,i){if(1&a&&(e.\u0275\u0275elementStart(0,"pbi-dropdown-item",26),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275elementEnd()),2&a){var t=i.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(2,2,t.displayNameKey)," ")}}var dt=function(i){return{hiddenNoTransition:i}},cn=function(){return{placeholder:"Min"}},dn=function(){return{placeholder:"Max"}};function un(a,i){if(1&a&&(e.\u0275\u0275elementStart(0,"section")(1,"section"),e.\u0275\u0275element(2,"h2",100),e.\u0275\u0275elementStart(3,"pbi-dropdown",101)(4,"pbi-dropdown-trigger"),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,rn,2,2,"pbi-dropdown-item",20),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(7,"input",102),e.\u0275\u0275pipe(8,"localize"),e.\u0275\u0275elementStart(9,"pbi-dropdown",103)(10,"pbi-dropdown-trigger"),e.\u0275\u0275text(11),e.\u0275\u0275pipe(12,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(13,an,3,4,"pbi-dropdown-item",20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"section",104),e.\u0275\u0275element(15,"h2",105),e.\u0275\u0275elementStart(16,"pbi-dropdown",106)(17,"pbi-dropdown-trigger"),e.\u0275\u0275text(18),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(19,ln,2,2,"pbi-dropdown-item",20),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(20,"input",107),e.\u0275\u0275pipe(21,"localize"),e.\u0275\u0275elementStart(22,"pbi-dropdown",108)(23,"pbi-dropdown-trigger"),e.\u0275\u0275text(24),e.\u0275\u0275pipe(25,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(26,sn,3,4,"pbi-dropdown-item",20),e.\u0275\u0275elementEnd()()()),2&a){var t=e.\u0275\u0275nextContext().ngIf,n=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1("",t.lowerBound.operator.displayName," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t.operatorOptions.lowerBoundOptions)("ngForTrackBy",n.trackBy.id),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(27,dt,t.lowerBound.operator.disableInput))("localizeAttr",e.\u0275\u0275pureFunction0(29,cn))("pbiTooltip",e.\u0275\u0275pipeBind1(8,19,"Min")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(30,dt,t.lowerBound.operator.disableInput)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(12,21,t.lowerBound.valueKind.displayNameKey)," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t.argumentKindOptions)("ngForTrackBy",n.trackBy.kind),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(32,dt,t.lowerBound.operator.disableOtherOperator)),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1("",t.upperBound.operator.displayName," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t.operatorOptions.upperBoundOptions)("ngForTrackBy",n.trackBy.id),e.\u0275\u0275advance(1),e.\u0275\u0275property("localizeAttr",e.\u0275\u0275pureFunction0(34,dn))("pbiTooltip",e.\u0275\u0275pipeBind1(21,23,"Max")),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(25,25,t.upperBound.valueKind.displayNameKey)," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t.argumentKindOptions)("ngForTrackBy",n.trackBy.kind)}}function pn(a,i){if(1&a&&(e.\u0275\u0275elementStart(0,"pbi-dropdown-item",26),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){var t=i.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",t.displayName," ")}}var gn=function(){return{placeholder:"Text"}};function hn(a,i){if(1&a&&(e.\u0275\u0275elementStart(0,"section")(1,"section"),e.\u0275\u0275element(2,"h2",100),e.\u0275\u0275elementStart(3,"pbi-dropdown",101)(4,"pbi-dropdown-trigger"),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,pn,2,2,"pbi-dropdown-item",20),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(7,"input",109),e.\u0275\u0275pipe(8,"localize"),e.\u0275\u0275elementEnd()()),2&a){var t=e.\u0275\u0275nextContext().ngIf,n=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1("",t.lowerBound.operator.displayName," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t.operatorOptions.lowerBoundOptions)("ngForTrackBy",n.trackBy.id),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(8,dt,t.lowerBound.operator.disableInput))("localizeAttr",e.\u0275\u0275pureFunction0(10,gn))("pbiTooltip",e.\u0275\u0275pipeBind1(8,6,"ConditionalFormattingDialog_StringInput_TooltipText"))}}function mn(a,i){if(1&a){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"theme-color-input",42),e.\u0275\u0275listener("colorChanged",function(m){e.\u0275\u0275restoreView(t);var O=e.\u0275\u0275nextContext().ngIf;return e.\u0275\u0275resetView(O.onColorChanged(m))}),e.\u0275\u0275elementEnd()}if(2&a){var n=e.\u0275\u0275nextContext().ngIf,d=e.\u0275\u0275nextContext(4);e.\u0275\u0275property("color",e.\u0275\u0275pureFunction1(4,ve,n.value))("defaultColor",e.\u0275\u0275pureFunction1(6,ve,n.defaultValue||d.defaultColor))("isNoFillItemSupported",d.isNoFillItemSupported)("buttonHeight",32)}}function fn(a,i){if(1&a){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"icon-picker",110),e.\u0275\u0275listener("iconChanged",function(u){e.\u0275\u0275restoreView(t);var m=e.\u0275\u0275nextContext().ngIf;return e.\u0275\u0275resetView(m.onIconChanged(u))}),e.\u0275\u0275elementEnd()}if(2&a){var n=e.\u0275\u0275nextContext().ngIf;e.\u0275\u0275property("selectedIconId",n.value)}}var kt=function(i){return{disabled:i}};function vn(a,i){if(1&a){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0,90),e.\u0275\u0275template(1,un,27,35,"section",91),e.\u0275\u0275template(2,hn,9,11,"section",91),e.\u0275\u0275element(3,"h2",92),e.\u0275\u0275template(4,mn,1,8,"theme-color-input",93),e.\u0275\u0275template(5,fn,1,1,"icon-picker",94),e.\u0275\u0275elementStart(6,"section",95),e.\u0275\u0275element(7,"i",96),e.\u0275\u0275elementStart(8,"i",97),e.\u0275\u0275listener("keydown",function(E){e.\u0275\u0275restoreView(t);var te=e.\u0275\u0275nextContext().index,H=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(H.handleKeyDownCase(E,te,H.handleMoveCaseUp))})("click",function(E){e.\u0275\u0275restoreView(t);var te=e.\u0275\u0275nextContext().index,H=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(H.handleMoveCaseUp(te,E))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"i",98),e.\u0275\u0275listener("keydown",function(E){e.\u0275\u0275restoreView(t);var te=e.\u0275\u0275nextContext().index,H=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(H.handleKeyDownCase(E,te,H.handleMoveCaseDown))})("click",function(E){e.\u0275\u0275restoreView(t);var te=e.\u0275\u0275nextContext().index,H=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(H.handleMoveCaseDown(te,E))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"i",99),e.\u0275\u0275listener("keydown",function(E){e.\u0275\u0275restoreView(t);var te=e.\u0275\u0275nextContext().index,H=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(H.handleKeyDownCase(E,te,H.handleDeleteCase))})("click",function(E){e.\u0275\u0275restoreView(t);var te=e.\u0275\u0275nextContext().index,H=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(H.handleDeleteCase(te,E))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()}if(2&a){var n=i.ngIf,d=e.\u0275\u0275nextContext(),u=d.$implicit,m=d.first,O=d.last,B=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("formGroup",u)("ngSwitch",B.viewModel.conditional.ruleTemplateKind),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","number"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","text"),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf","Color"===n.propertyType),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Icon"===n.propertyType),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(15,dt,n.isValid())),e.\u0275\u0275attribute("tabindex",n.isValid()?-1:0)("aria-label",B.caseHasAnErrorMessage),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(17,kt,m)),e.\u0275\u0275attribute("tabindex",m?-1:0),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(19,kt,O)),e.\u0275\u0275attribute("tabindex",O?-1:0),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(21,kt,m&&O)),e.\u0275\u0275attribute("tabindex",m&&O?-1:0)}}function yn(a,i){if(1&a&&(e.\u0275\u0275elementStart(0,"section",88),e.\u0275\u0275template(1,vn,11,23,"ng-container",89),e.\u0275\u0275elementEnd()),2&a){var t=i.index,n=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.viewModel.conditional.cases[t])}}function Cn(a,i){if(1&a){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"section",76)(1,"section",77)(2,"div",78)(3,"button",79),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var u=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(u.reverseCasesValue())}),e.\u0275\u0275element(4,"i",80)(5,"span",81),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"button",79),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var u=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(u.addCase())}),e.\u0275\u0275element(7,"i",82)(8,"span",83),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(9,"legend",84),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"section",85),e.\u0275\u0275elementContainerStart(11,86),e.\u0275\u0275template(12,yn,2,1,"section",87),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()()}if(2&a){var n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(5),e.\u0275\u0275property("localize",n.viewModel.conditional.reverseButtonLabelKey)("localizeTooltip",n.viewModel.conditional.reverseButtonLabelKey),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngForOf",n.rulesFormArray.controls)}}function bn(a,i){if(1&a){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"form",1),e.\u0275\u0275element(1,"label",2),e.\u0275\u0275elementStart(2,"section",3)(3,"fieldset",4),e.\u0275\u0275element(4,"legend",5),e.\u0275\u0275elementStart(5,"pbi-dropdown",6)(6,"pbi-dropdown-trigger"),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,Ue,2,2,"pbi-dropdown-item",7),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(9,at,7,5,"fieldset",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"section",9)(11,"fieldset",10),e.\u0275\u0275element(12,"legend",11),e.\u0275\u0275elementStart(13,"pbi-dropdown",12,13)(15,"pbi-dropdown-trigger"),e.\u0275\u0275text(16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"div",14)(18,"pbi-field-list",15),e.\u0275\u0275listener("onNodeClick",function(u){e.\u0275\u0275restoreView(t);var m=e.\u0275\u0275reference(14),O=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(O.handleNodeSelect(u,m))})("onNodeCheck",function(u){e.\u0275\u0275restoreView(t);var m=e.\u0275\u0275reference(14),O=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(O.handleNodeSelect(u,m))}),e.\u0275\u0275pipe(19,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(20,"div",16),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(21,"fieldset",17),e.\u0275\u0275element(22,"legend",18),e.\u0275\u0275elementStart(23,"pbi-dropdown",19)(24,"pbi-dropdown-trigger"),e.\u0275\u0275text(25),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(26,lt,2,2,"pbi-dropdown-item",20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(27,ct,8,15,"fieldset",21),e.\u0275\u0275template(28,St,6,3,"fieldset",22),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(29,Jt,32,45,"div",23),e.\u0275\u0275template(30,qt,37,49,"div",23),e.\u0275\u0275template(31,on,16,9,"section",24),e.\u0275\u0275template(32,Cn,13,3,"section",25),e.\u0275\u0275elementEnd()}if(2&a){var n=e.\u0275\u0275nextContext();e.\u0275\u0275property("formGroup",n.conditionalFormattingForm),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate(n.formattingMode.value.name),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",n.viewModel.modeSelectOptions),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.viewModel.totalMatchingOptions),e.\u0275\u0275advance(4),e.\u0275\u0275property("options",n.dropdownOptions),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(n.viewModel.sourceSelector.fieldDisplayName),e.\u0275\u0275advance(2),e.\u0275\u0275property("fieldListTree",e.\u0275\u0275pipeBind1(19,20,n.fieldListTree$))("scrollSelectedItemIntoViewOnInit",!0)("hasHighlights",!1)("options",n.fieldListTreeOptions),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(22,dt,0==n.viewModel.sourceSelector.aggregationOptions.length)),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",null==n.sourceSummarization.value?null:n.sourceSummarization.value.displayName," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",n.viewModel.sourceSelector.aggregationOptions)("ngForTrackBy",n.trackBy.aggregate),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isGradient),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isDataBars),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isGradient),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isDataBars),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isPropertyTypeIcon),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isConditional)}}var Sn=function(a){function i(t,n,d,u,m,O,B,U,E,te,H,Fe,je,We,ut,He){var K=a.call(this)||this;return K.itemPicker=t,K.featureSwitchService=n,K.localizationService=d,K.screenReaderService=u,K.svgProvider=m,K.modelService=O,K.fieldListTreeService=B,K.captionSetting=U,K.draggableSetting=E,K.inlineItemsSetting=te,K.groupingDesignStateService=H,K.changeDetectorRef=Fe,K.templateDialogPayload=je,K.conditionalFormattingDialogViewModelService=We,K.enabledSetting=ut,K.telemetryService=He,K.formSubscriptions=[],K.conditionalFormSubscriptions=[],K.fieldListTreeOptions={editLabel:void 0},K.pbiTreeNodeSettingOptions={captionSetting:K.captionSetting,draggableSetting:K.draggableSetting,enabledSetting:K.enabledSetting,inlineItemsSetting:K.inlineItemsSetting,showMenuSetting:{canShowMenu:function(){return!1}}},K.defaultColor="#fff",K.fieldListTree$=K.fieldListTreeService.fieldListTree$,K.iconLayoutOptions=[{value:"Before",displayNameKey:"Visual_IconLayout_Before"},{value:"IconOnly",displayNameKey:"Visual_IconLayout_IconOnly"},{value:"After",displayNameKey:"Visual_IconLayout_After"}],K.iconVerticalAlignmentOptions=[{value:"Top",displayNameKey:"Top"},{value:"Middle",displayNameKey:"Middle"},{value:"Bottom",displayNameKey:"Bottom"}],K.trackBy={kind:function(Ge,Le){return Le.kind},id:function(Ge,Le){return Le.id},aggregate:function(Ge,Le){return Le.aggregate},reverseDirection:function(Ge,Le){return Le.reverseDirection}},K.dropdownOptions={dropdownHeight:312},K.onIconSetSelected=function(ze){K.viewModel.conditional.onIconSetSelected(K.viewModel.sourceSelector.sourceField,ze),K.resetRulesFormArray()},K.defaultFormattingLabel=K.localizationService.get("ConditionalFormattingDialog_FormatNull_Desc"),K.caseHasAnErrorMessage=K.localizationService.get("ConditionalFormattingDialog_RuleBased_ConditionError"),K.fieldListTreeService.modelToPbiTreeConverterOptions=K.pbiTreeNodeSettingOptions,K}return(0,v.ZT)(i,a),i.prototype.ngOnInit=function(){var t,n,d;return(0,v.mG)(this,void 0,void 0,function(){var u,m,O=this;return(0,v.Jh)(this,function(B){switch(B.label){case 0:return this.allowOverrideTotalMatching=(m=this.templateDialogPayload.input).allowOverrideTotalMatching,this.hasGrouping=m.hasGrouping,this.icons=m.icons,this.iconSets=m.iconSets,this.inDataSources=m.inDataSources,this.propertyDefinition=m.propertyDefinition,this.propertyDescriptor=m.propertyDescriptor,this.propertySelector=m.propertySelector,this.targetFieldDisplayName=m.targetFieldDisplayName,this.targetFieldExpr=m.targetFieldExpr,this.visualType=m.visualType,this.colorPalette=(0,oe.DP)(this.templateDialogPayload.input.colorPalette),this.itemPicker.setThemeItems(this.colorPalette.dataColors,this.icons,this.iconSets),this.propertyDescriptor.type.icon?[4,this.svgProvider.loadSheet("conditionalFormattingDialogIcons")]:[3,2];case 1:B.sent(),B.label=2;case 2:return this.propertyDescriptor.type.dataBars&&(this.allowOverrideTotalMatching=!0),u=this,[4,this.conditionalFormattingDialogViewModelService.create(this.colorPalette,this.inDataSources,this.targetFieldDisplayName,this.visualType,this.iconSets,this.targetFieldExpr,this.hasGrouping,this.propertyDescriptor,this.propertyDefinition,this.propertySelector,this.allowOverrideTotalMatching)];case 3:return u.viewModel=B.sent(),this.enabledSetting.isEnabled=function(U){if(U instanceof de.Xx){var E=(0,ye.Sd)(U,O.groupingDesignStateService);return!O.viewModel.sourceSelector.isSourceDisabled(E)}return!0},this.buildFormGroup(),!(null===(d=null===(n=null===(t=this.viewModel.colorPickerType)||void 0===t?void 0:t.fill)||void 0===n?void 0:n.solid)||void 0===d)&&d.color&&(this.isNoFillItemSupported=(0,ae.AG)(this.viewModel.colorPickerType.fill.solid.color)),this.templateDialogPayload.onOkButtonClick=function(){return(0,v.mG)(O,void 0,void 0,function(){return(0,v.Jh)(this,function(U){return[2,this.onSubmit()]})})},[4,this.buildFieldListTree()];case 4:return B.sent(),this.changeDetectorRef.markForCheck(),[2]}})})},i.prototype.ngOnDestroy=function(){this.removeConditionalSubscriptions(),a.prototype.ngOnDestroy.call(this)},i.prototype.buildFormGroup=function(){for(var t,n,d,u,O,B,m=this,U=0,E=this.formSubscriptions;U<E.length;U++)this.lifecycleSubscriptions.remove(E[U]);this.formSubscriptions=[],this.removeConditionalSubscriptions(),this.formattingMode=new T.p4(this.viewModel.modeSelectOptions.find(function(we){return we.value===m.viewModel.mode})),this.totalMatchingOption=new T.p4(this.viewModel.totalMatchingOption),this.sourceField=new T.p4(this.viewModel.sourceSelector.sourceField,T.kI.required),this.sourceSummarization=new T.p4(this.viewModel.sourceSelector.aggregationOption);var H={};if(this.isGradient&&(this.buildGradientFormControls(),(t={}).nullStrategyOption=this.nullStrategyOption,t.minimumSelectedOption=this.minimumSelectedOption,t.centerSelectedOption=this.centerSelectedOption,t.maximumSelectedOption=this.maximumSelectedOption,t.gradientMinValue=this.gradientMinValue,t.gradientMaxValue=this.gradientMaxValue,t.diverging=this.diverging,H=t,this.diverging.value&&(H.gradientMidValue=this.gradientMidValue)),this.isDataBars&&(this.buildDataBarsFormControls(),(n={}).barDirectionSelectedOption=this.barDirectionSelectedOption,n.minimumSelectedOption=this.minimumSelectedOption,n.maximumSelectedOption=this.maximumSelectedOption,n.dataBarsMinValue=this.dataBarsMinValue,n.dataBarsMaxValue=this.dataBarsMaxValue,n.hideText=this.hideText,H=n),this.isConditional){this.rulesFormArray=new T.vC([]);for(var Fe=0,je=this.viewModel.conditional.cases;Fe<je.length;Fe++)this.buildConditionalFormGroup(je[Fe]);(d={}).rules=this.rulesFormArray,H=d}if(this.isPropertyTypeIcon){var ut=null!==(O=this.iconLayoutOptions.find(function(we){return m.viewModel.iconLayout===we.value}))&&void 0!==O?O:this.iconLayoutOptions[0],He=null!==(B=this.iconVerticalAlignmentOptions.find(function(we){return m.viewModel.iconVerticalAlignment===we.value}))&&void 0!==B?B:this.iconVerticalAlignmentOptions[0];this.iconLayout=new T.p4(ut),this.iconVerticalAlignment=new T.p4(He);var K=this.iconLayout.valueChanges.subscribe(function(we){m.viewModel.iconLayout=we.value}),ze=this.iconVerticalAlignment.valueChanges.subscribe(function(we){m.viewModel.iconVerticalAlignment=we.value});this.formSubscriptions.push(K,ze),H.iconLayout=this.iconLayout,H.iconVerticalAlignment=this.iconVerticalAlignment}this.conditionalFormattingForm=new T.nJ((0,v.pi)(((u={}).formattingMode=this.formattingMode,u.totalMatchingOption=this.totalMatchingOption,u.sourceField=this.sourceField,u.sourceSummarization=this.sourceSummarization,u),H)),this.templateDialogPayload.setOkButtonState(this.conditionalFormattingForm.invalid);var Ge=this.formattingMode.valueChanges.subscribe(function(we){m.onModeChanged(we.value)}),Le=this.totalMatchingOption.valueChanges.subscribe(function(we){m.onTotalMatchingOptionChanged(we)}),jt=this.sourceSummarization.valueChanges.subscribe(function(we){m.onSummarizationOptionChanged(we)}),Vn=this.conditionalFormattingForm.valueChanges.subscribe(function(){m.templateDialogPayload.setOkButtonState(m.setOkButtonStatus())});this.formSubscriptions.push(Ge,Le,jt,Vn);for(var Kt=0,Ht=this.formSubscriptions;Kt<Ht.length;Kt++)this.lifecycleSubscriptions.add(Ht[Kt])},i.prototype.removeConditionalSubscriptions=function(){for(var t=0,n=this.conditionalFormSubscriptions;t<n.length;t++)n[t].forEach(function(u){return u.unsubscribe});this.conditionalFormSubscriptions=[]},i.prototype.buildGradientFormControls=function(){var t=this,n=this.viewModel.gradient;this.nullStrategyOption=new T.p4(n.nullStrategyOption),this.minimumSelectedOption=new T.p4({value:n.minimumSelectedOption,disabled:this.viewModel.disableAutoRange}),this.centerSelectedOption=new T.p4({value:n.centerSelectedOption,disabled:this.viewModel.disableAutoRange}),this.maximumSelectedOption=new T.p4({value:n.maximumSelectedOption,disabled:this.viewModel.disableAutoRange}),this.gradientMinValue=new T.p4({value:n.settings.minValue,disabled:n.minimumSelectedOption.disableInput},T.kI.required),this.gradientMidValue=new T.p4({value:n.settings.midValue,disabled:n.centerSelectedOption.disableInput},T.kI.required),this.gradientMaxValue=new T.p4({value:n.settings.maxValue,disabled:n.maximumSelectedOption.disableInput},T.kI.required),this.diverging=new T.p4(n.settings.diverging);var d=this.nullStrategyOption.valueChanges.subscribe(function(H){t.onNullStrategyOptionChanged(H)}),u=this.minimumSelectedOption.valueChanges.subscribe(function(H){t.onMinimumSelectedOptionChanged(H)}),m=this.centerSelectedOption.valueChanges.subscribe(function(H){t.onCenterSelectedOptionChanged(H)}),O=this.maximumSelectedOption.valueChanges.subscribe(function(H){t.onMaximumSelectedOptionChanged(H)}),B=this.gradientMaxValue.valueChanges.subscribe(function(H){t.viewModel.gradient.settings.maxValue=H}),U=this.gradientMinValue.valueChanges.subscribe(function(H){t.viewModel.gradient.settings.minValue=H}),E=this.gradientMidValue.valueChanges.subscribe(function(H){t.viewModel.gradient.settings.midValue=H}),te=this.diverging.valueChanges.subscribe(function(H){t.onDivergingChanged(H)});this.formSubscriptions.push(d,u,m,O,B,U,E,te)},i.prototype.buildDataBarsFormControls=function(){var t=this,n=this.viewModel.dataBars;this.minimumSelectedOption=new T.p4({value:n.minimumSelectedOption,disabled:this.viewModel.disableAutoRange}),this.maximumSelectedOption=new T.p4({value:n.maximumSelectedOption,disabled:this.viewModel.disableAutoRange}),this.barDirectionSelectedOption=new T.p4(n.barDirectionSelectedOption),this.dataBarsMinValue=new T.p4({value:n.settings.minValue,disabled:n.minimumSelectedOption.disableInput},T.kI.required),this.dataBarsMaxValue=new T.p4({value:n.settings.maxValue,disabled:n.maximumSelectedOption.disableInput},T.kI.required),this.hideText=new T.p4(n.settings.hideText);var d=this.minimumSelectedOption.valueChanges.subscribe(function(E){n.minimumSelectedOption=E,n.onOptionChanged(E),t.dataBarsMinValue.setValue(n.settings.minValue),n.minimumSelectedOption.disableInput?t.dataBarsMinValue.disable():t.dataBarsMinValue.enable()}),u=this.maximumSelectedOption.valueChanges.subscribe(function(E){n.maximumSelectedOption=E,n.onOptionChanged(E),t.dataBarsMaxValue.setValue(n.settings.maxValue),n.maximumSelectedOption.disableInput?t.dataBarsMaxValue.disable():t.dataBarsMaxValue.enable()}),m=this.barDirectionSelectedOption.valueChanges.subscribe(function(E){n.barDirectionSelectedOption=E,n.settings.reverseDirection=E.reverseDirection}),O=this.dataBarsMinValue.valueChanges.subscribe(function(E){t.viewModel.dataBars.settings.minValue=E}),B=this.dataBarsMaxValue.valueChanges.subscribe(function(E){t.viewModel.dataBars.settings.maxValue=E}),U=this.hideText.valueChanges.subscribe(function(E){t.viewModel.dataBars.settings.hideText=E});this.sourceField.disable(),this.sourceSummarization.disable(),this.formSubscriptions.push(m,d,u,O,B,U)},i.prototype.buildConditionalFormGroup=function(t){var n;switch(t.ruleTemplateKind){case"number":n=this.buildNumericConditionalFormGroup(t);break;case"text":n=this.buildStringConditionalFormGroup(t);break;default:g.fF.assertNever(t.ruleTemplateKind)}n.setValidators(this.caseValidator(t)),this.rulesFormArray.push(n)},i.prototype.buildNumericConditionalFormGroup=function(t){var n,d=this,u=new T.nJ(((n={}).lowerBoundOperator=new T.p4(t.lowerBound.operator),n.lowerBoundArgument=new T.p4(t.lowerBound.value),n.lowerBoundArgumentKind=new T.p4({value:t.lowerBound.valueKind,disabled:!t.isPercentEnabled}),n.upperBoundOperator=new T.p4(t.upperBound.operator),n.upperBoundArgument=new T.p4(t.upperBound.value),n.upperBoundArgumentKind=new T.p4({value:t.upperBound.valueKind,disabled:!t.isPercentEnabled}),n)),m=u.controls,O=m.lowerBoundOperator.valueChanges.subscribe(function(Fe){d.lowerBoundOperatorChanged(Fe,t)}),B=m.lowerBoundArgument.valueChanges.subscribe(function(Fe){d.lowerBoundArgumentChanged(Fe,t)}),U=m.lowerBoundArgumentKind.valueChanges.subscribe(function(Fe){d.lowerBoundArgumentKindChanged(Fe,t)}),E=m.upperBoundOperator.valueChanges.subscribe(function(Fe){d.upperBoundOperatorChanged(Fe,t)}),te=m.upperBoundArgument.valueChanges.subscribe(function(Fe){d.upperBoundArgumentChanged(Fe,t)}),H=m.upperBoundArgumentKind.valueChanges.subscribe(function(Fe){d.upperBoundArgumentKindChanged(Fe,t)});return this.conditionalFormSubscriptions.push([O,B,U,E,te,H]),u},i.prototype.buildStringConditionalFormGroup=function(t){var n,d=this,u=new T.nJ(((n={}).lowerBoundOperator=new T.p4(t.lowerBound.operator),n.lowerBoundArgument=new T.p4(t.lowerBound.value),n.lowerBoundArgumentKind=new T.p4({value:t.lowerBound.valueKind,disabled:!0}),n)),m=u.controls,O=m.lowerBoundOperator.valueChanges.subscribe(function(E){d.lowerBoundOperatorChanged(E,t)}),B=m.lowerBoundArgument.valueChanges.subscribe(function(E){d.lowerBoundArgumentChanged(E,t)}),U=m.lowerBoundArgumentKind.valueChanges.subscribe(function(E){d.lowerBoundArgumentKindChanged(E,t)});return this.conditionalFormSubscriptions.push([O,B,U]),u},Object.defineProperty(i.prototype,"exploreUIAuthoringModulePath",{get:function(){return"@powerbi/ExploreUIAuthoring/lazy-modules/explore-ui-authoring/explore-ui-authoring.module#ExploreUIAuthoringModule"},enumerable:!1,configurable:!0}),i.prototype.caseValidator=function(t){return function(n){var d=n.controls.lowerBoundArgument,u=t.isValid()?null:{caseInvalid:!0};d.setErrors(u),n.controls.upperBoundArgument&&n.controls.upperBoundArgument.setErrors(u)}},i.prototype.upperBoundOperatorChanged=function(t,n){n.upperBound.operator=t,this.screenReaderAlertIfInvalid()},i.prototype.upperBoundArgumentChanged=function(t,n){n.upperBound.value=t,this.screenReaderAlertIfInvalid()},i.prototype.upperBoundArgumentKindChanged=function(t,n){n.upperBound.valueKind=t,this.screenReaderAlertIfInvalid()},i.prototype.lowerBoundOperatorChanged=function(t,n){switch(n.ruleTemplateKind){case"number":case"text":n.lowerBound.operator=t;break;default:g.fF.assertNever(n.ruleTemplateKind)}this.screenReaderAlertIfInvalid()},i.prototype.lowerBoundArgumentChanged=function(t,n){switch(n.ruleTemplateKind){case"number":case"text":n.lowerBound.value=t;break;default:g.fF.assertNever(n.ruleTemplateKind)}this.screenReaderAlertIfInvalid()},i.prototype.lowerBoundArgumentKindChanged=function(t,n){n.lowerBound.valueKind=t,this.screenReaderAlertIfInvalid()},i.prototype.screenReaderAlertIfInvalid=function(){this.isConditional&&(this.viewModel.conditional.isValid()?this.screenReaderService.cancelDebounce("conditionalDialog"):this.screenReaderService.alertWithDebounce("conditionalDialog",this.caseHasAnErrorMessage))},i.prototype.handleKeyDownCase=function(t,n,d){var u=this,m=!1;switch(t.keyCode){case 32:case 13:g.fF.assert(function(){return u.isConditional},"Case control is only possible in conditional"),d.call(this,n),m=!0}m&&t.stopPropagation()},i.prototype.handleDeleteCase=function(t){1!==this.rulesFormArray.controls.length&&(this.viewModel.conditional.deleteCase(t),this.conditionalFormSubscriptions[t].forEach(function(n){return n.unsubscribe()}),this.conditionalFormSubscriptions=this.conditionalFormSubscriptions.filter(function(n,d){return t!==d}),this.rulesFormArray.removeAt(t))},i.prototype.handleMoveCaseDown=function(t){if(t!==this.rulesFormArray.controls.length-1){this.viewModel.conditional.moveCaseDown(t),(0,j.LF)(this.conditionalFormSubscriptions,t,t+1);var n=this.rulesFormArray.at(t);this.rulesFormArray.removeAt(t),this.rulesFormArray.insert(t+1,n)}},i.prototype.handleMoveCaseUp=function(t){if(0!==t){this.viewModel.conditional.moveCaseUp(t),(0,j.LF)(this.conditionalFormSubscriptions,t,t-1);var n=this.rulesFormArray.at(t);this.rulesFormArray.removeAt(t),this.rulesFormArray.insert(t-1,n)}},i.prototype.handleKeyDownDiverging=function(t){var n=this;g.fF.assert(function(){return n.isGradient},"Divergent is only possible in gradient");var d=!1;switch(t.keyCode){case 32:case 13:g.fF.assert(function(){return!!n.viewModel.gradient},"Gradient cannot be null"),this.viewModel.gradient.settings.diverging=!this.viewModel.gradient.settings.diverging,this.viewModel.gradient.onDivergingChanged(),d=!0}d&&t.stopPropagation()},Object.defineProperty(i.prototype,"isConditional",{get:function(){var n;return"conditional"===(null===(n=this.viewModel)||void 0===n?void 0:n.mode)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isFieldValue",{get:function(){var n;return"fieldValue"===(null===(n=this.viewModel)||void 0===n?void 0:n.mode)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isGradient",{get:function(){var n;return"gradient"===(null===(n=this.viewModel)||void 0===n?void 0:n.mode)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isDataBars",{get:function(){var n;return"dataBars"===(null===(n=this.viewModel)||void 0===n?void 0:n.mode)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isPropertyTypeIcon",{get:function(){var n;return"Icon"===(null===(n=this.viewModel)||void 0===n?void 0:n.propertyType)},enumerable:!1,configurable:!0}),i.prototype.onModeChanged=function(t){this.viewModel.mode=t,this.viewModel.gradient=void 0,this.viewModel.conditional=void 0,this.viewModel.fieldValue=void 0,this.conditionalFormattingDialogViewModelService.initializeMode(this.viewModel,null,this.colorPalette,this.iconSets,this.localizationService,this.featureSwitchService),this.viewModel.sourceSelector.onSourceExpectedTypeChange(this.viewModel.expectedSourceTypes),this.fieldListTreeService.refresh(),this.buildFormGroup()},i.prototype.onTotalMatchingOptionChanged=function(t){if(this.viewModel.totalMatchingOption=t,this.viewModel.gradient){this.conditionalFormattingDialogViewModelService.updateDisableAutoRange(this.viewModel,this.hasGrouping),this.viewModel.gradient.onDisableAutoRangeChanged(n=this.viewModel.disableAutoRange);var d=null!=this.gradientMinValue.value||null!=this.gradientMaxValue.value||null!=this.gradientMidValue.value;this.enforceGradientSelectionInputs(),n?this.setSelectedOptionsGradient([0]):d||this.setSelectedOptionsGradient([1,2,3])}if(this.viewModel.dataBars&&(this.conditionalFormattingDialogViewModelService.updateDisableAutoRange(this.viewModel,this.hasGrouping),this.viewModel.dataBars.onDisableAutoRangeChanged(n=this.viewModel.disableAutoRange),d=null!=this.dataBarsMinValue.value||null!=this.dataBarsMaxValue.value,this.enforceDataBarsSelectionInputs(),n?this.setSelectedOptionsDataBars([0]):d||this.setSelectedOptionsDataBars([1,2])),this.viewModel.conditional&&"number"===this.viewModel.conditional.ruleTemplateKind){var n;this.conditionalFormattingDialogViewModelService.updateDisableAutoRange(this.viewModel,this.hasGrouping),this.viewModel.conditional.onDisableAutoRangeChanged(n=this.viewModel.disableAutoRange);for(var u=0;u<this.rulesFormArray.controls.length;u++){var m=this.rulesFormArray.controls[u].controls;this.viewModel.conditional.cases[u].isPercentEnabled?(m.lowerBoundArgumentKind.enable(),m.upperBoundArgumentKind.enable()):(m.lowerBoundArgumentKind.disable(),m.upperBoundArgumentKind.disable())}}this.changeDetectorRef.markForCheck()},i.prototype.enforceGradientSelectionInputs=function(){var t=this.viewModel.gradient;t.minimumSelectedOption.disableInput?this.minimumSelectedOption.enable():(this.minimumSelectedOption.disable(),this.gradientMinValue.enable()),t.centerSelectedOption.disableInput?this.centerSelectedOption.enable():(this.centerSelectedOption.disable(),this.gradientMidValue.enable()),t.maximumSelectedOption.disableInput?this.maximumSelectedOption.enable():(this.maximumSelectedOption.disable(),this.gradientMaxValue.enable())},i.prototype.enforceDataBarsSelectionInputs=function(){var t=this.viewModel.dataBars;t.minimumSelectedOption.disableInput?this.minimumSelectedOption.enable():(this.minimumSelectedOption.disable(),this.dataBarsMinValue.enable()),t.maximumSelectedOption.disableInput?this.maximumSelectedOption.enable():(this.maximumSelectedOption.disable(),this.dataBarsMaxValue.enable())},i.prototype.setSelectedOptionsGradient=function(t){var n=this.viewModel.gradient,d=function(m,O){if(!_.isEmpty(m)){var B=_.first(m.filter(function(U){return t.includes(U.id)}));null!=B&&O.setValue(B)}};d(n.minimumSelectOptions,this.minimumSelectedOption),d(n.centerSelectOptions,this.centerSelectedOption),d(n.maximumSelectOptions,this.maximumSelectedOption)},i.prototype.setSelectedOptionsDataBars=function(t){var n=this.viewModel.dataBars,d=function(m,O){if(!_.isEmpty(m)){var B=_.first(m.filter(function(U){return t.includes(U.id)}));null!=B&&O.setValue(B)}};d(n.minimumSelectOptions,this.minimumSelectedOption),d(n.maximumSelectOptions,this.maximumSelectedOption)},i.prototype.isModelValid=function(){return!(!this.viewModel||!this.viewModel.sourceSelector||!this.viewModel.sourceSelector.sourceField||"conditional"===this.viewModel.mode&&!this.viewModel.conditional.isValid())},i.prototype.handleNodeSelect=function(t,n){var d=t.node;if(!d.disabled&&[0,2,4].includes(d.data.fieldType)){var m=d.data?(0,ye.Sd)(d.data,this.groupingDesignStateService):void 0;this.setSourceField(void 0,m),this.sourceSummarization.setValue(this.viewModel.sourceSelector.aggregationOption),this.sourceField.setValue(this.viewModel.sourceSelector.sourceField),n.closeDropdown()}},i.prototype.onSummarizationOptionChanged=function(t){var n;if(null!=t){var d=null===(n=this.viewModel.sourceSelector.aggregationOptions.find(function(m){return _.isEqual(m.aggregate,t.aggregate)}))||void 0===n?void 0:n.displayName;t.displayName=d??t.displayName,this.viewModel.sourceSelector.aggregationOption=t}if(this.featureSwitchService.featureSwitches.cfStrings&&"conditional"===this.viewModel.mode){var u=this.conditionalFormattingDialogViewModelService.determineRuleTemplateKind(this.viewModel);this.viewModel.conditional.reinitializeSQConditionalExpr(u),this.resetRulesFormArray(),this.buildFormGroup(),this.changeDetectorRef.markForCheck()}this.viewModel.sourceSelector.setSourceAggregate()},i.prototype.onNullStrategyOptionChanged=function(t){this.viewModel.gradient.nullStrategyOption=t,this.viewModel.gradient.updateNullStrategy()},i.prototype.onMaximumSelectedOptionChanged=function(t){this.viewModel.gradient.maximumSelectedOption=t,this.viewModel.gradient.onOptionChanged(t),this.gradientMaxValue.setValue(this.viewModel.gradient.settings.maxValue),this.viewModel.gradient.maximumSelectedOption.disableInput?this.gradientMaxValue.disable():this.gradientMaxValue.enable()},i.prototype.addCase=function(){this.viewModel.conditional.addCase();var t=this.viewModel.conditional.cases.slice(-1)[0];this.buildConditionalFormGroup(t)},i.prototype.reverseCasesValue=function(){this.viewModel.conditional.reverseCasesValue(),this.resetRulesFormArray()},i.prototype.resetRulesFormArray=function(){this.rulesFormArray=new T.vC([]),this.removeConditionalSubscriptions();for(var t=0,n=this.viewModel.conditional.cases;t<n.length;t++)this.buildConditionalFormGroup(n[t])},i.prototype.onCenterSelectedOptionChanged=function(t){this.viewModel.gradient.centerSelectedOption=t,this.viewModel.gradient.onOptionChanged(t),this.gradientMidValue.setValue(this.viewModel.gradient.settings.midValue),this.viewModel.gradient.centerSelectedOption.disableInput?this.gradientMidValue.disable():this.gradientMidValue.enable()},i.prototype.onMinimumSelectedOptionChanged=function(t){this.viewModel.gradient.minimumSelectedOption=t,this.viewModel.gradient.onOptionChanged(t),this.gradientMinValue.setValue(this.viewModel.gradient.settings.minValue),this.viewModel.gradient.minimumSelectedOption.disableInput?this.gradientMinValue.disable():this.gradientMinValue.enable()},i.prototype.onDivergingChanged=function(t){t?this.conditionalFormattingForm.addControl("gradientMidValue",this.gradientMidValue):this.conditionalFormattingForm.removeControl("gradientMidValue"),this.viewModel.gradient.settings.diverging=t,this.viewModel.gradient.onDivergingChanged()},i.prototype.setOkButtonStatus=function(){var t=this.conditionalFormattingForm.invalid;return this.featureSwitchService.featureSwitches.cfStrings&&"conditional"===this.viewModel.mode&&this.viewModel.sourceSelector.sourceField&&(t=!this.viewModel.conditional.isValid()),t},i.prototype.setSourceField=function(t,n){this.viewModel.sourceSelector.onSourceSelected(t,n)},i.prototype.buildFieldListTree=function(){return(0,v.mG)(this,void 0,void 0,function(){var t=this;return(0,v.Jh)(this,function(n){switch(n.label){case 0:return[4,this.modelService.update([])];case 1:return n.sent(),this.modelService.modelChange$.pipe((0,Ae.R)(this.onDestroy$),(0,Ne.h)(function(d){return!!d?.model}),(0,Ee.U)(function(d){return d.model})).subscribe(function(d){t.fieldListTreeService.setOrUpdateFieldListTreeModel(d,[])}),[2]}})})},i.prototype.onSubmit=function(){var n,d,u,t=this;g.fF.assert(function(){return t.isModelValid()},"Invalid Conditional Formatting model");var m,O=this.viewModel.sourceSelector.sourceField,B=this.viewModel.propertyDescriptor,U=this.viewModel.propertyType,E=this.viewModel.totalMatchingOption;switch(this.viewModel.mode){case"gradient":m=this.viewModel.gradient.getDefinition(O,B);break;case"conditional":var te=this.viewModel.conditional.getDefinition(O);switch(U){case"Color":m={solid:{color:te}};break;case"Icon":m={kind:"Icon",value:te};break;case"Text":case"WebUrl":case"Numeric":case"DateTime":case"DataBars":m=te;break;default:g.fF.assertNever(U)}break;case"dataBars":m=this.viewModel.dataBars.getDefinition(O,B,E.id);break;case"fieldValue":m=this.viewModel.fieldValue.getDefinition(O,U);break;default:g.fF.assertNever(this.viewModel.mode)}return"Icon"===U&&(m.layout=(0,M.fL)(this.viewModel.iconLayout),m.verticalAlignment=(0,M.fL)(this.viewModel.iconVerticalAlignment)),this.featureSwitchService.featureSwitches.cfStrings&&this.telemetryService.logEvent(Q.vB,{visualType:this.visualType,propertyType:this.viewModel.propertyType,conditionalFormattingMode:this.viewModel.mode,conditionalRuleTemplateKind:null===(n=this.viewModel.conditional)||void 0===n?void 0:n.ruleTemplateKind,numberOfRulesApplied:null===(u=null===(d=this.viewModel.conditional)||void 0===d?void 0:d.cases)||void 0===u?void 0:u.length}),{selector:E&&"dataBars"!==this.viewModel.mode?E.changeSelector(this.propertySelector):this.propertySelector,propertyDefinition:(0,qe.W7)(m,B,!0,this.featureSwitchService.featureSwitches.serializeSpaceOptimization)}},i.\u0275fac=function(n){return new(n||i)(e.\u0275\u0275directiveInject(ke.a),e.\u0275\u0275directiveInject(ot.vZ),e.\u0275\u0275directiveInject(Je.o),e.\u0275\u0275directiveInject(rt.g),e.\u0275\u0275directiveInject(Ve.g),e.\u0275\u0275directiveInject(Ye.b),e.\u0275\u0275directiveInject(ft.p),e.\u0275\u0275directiveInject(Mt.B),e.\u0275\u0275directiveInject(Ot.F),e.\u0275\u0275directiveInject(_t.wt),e.\u0275\u0275directiveInject(Ze.AA),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(Ke.x),e.\u0275\u0275directiveInject(z),e.\u0275\u0275directiveInject(vt.y),e.\u0275\u0275directiveInject(fe.y0))},i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["conditional-formatting-dialog"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:2,vars:1,consts:[[3,"formGroup",4,"ngIf"],[3,"formGroup"],["id","genericColor","localize","Generic_Color",1,"hidden"],[1,"flex","spaceBelow"],[1,"conditionalFormattingMode"],["id","formattingModeLabel","localize","ConditionalFormattingDialogModern_Mode_Label"],["id","formattingMode","name","formattingMode","formControlName","formattingMode","aria-labelledby","formattingModeLabel"],[3,"value",4,"ngFor","ngForOf"],["id","totalMatching",4,"ngIf"],[1,"flex","space-between"],[1,"sourceField"],["id","sourceFieldLabel","localize","ConditionalFormattingDialogModern_SourceFieldHeader"],["id","sourceFieldSelect","formControlName","sourceField","aria-labelledby","sourceFieldLabel","dropdown-type","field-list",3,"options"],["dropdownRef",""],[1,"conditionalFormattingFieldListContainer"],["focus-nav-mode","Browser",1,"fieldList","themeableElement",3,"fieldListTree","scrollSelectedItemIntoViewOnInit","hasHighlights","options","onNodeClick","onNodeCheck"],["tabindex","0",1,"container-stop-bottom"],[1,"sourceSummarization",3,"ngClass"],["id","sourceSummarizationLabel","localize","ConditionalFormattingDialog_SourceSummarizationHeader"],["id","sourceSummarization","formControlName","sourceSummarization","aria-labelledby","sourceSummarizationLabel"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],["class","nullColorStrategy",4,"ngIf"],["class","barDirection",4,"ngIf"],["class","spaceAbove",4,"ngIf"],["id","iconSettingsSection","class","flex spaceAbove",4,"ngIf"],["class","flex-column conditional spaceAbove",4,"ngIf"],[3,"value"],["id","totalMatching"],["id","totalMatchingOptionLabel","localize","ConditionalFormattingDialog_TotalMatching_Label"],["id","totalMatchingOption","formControlName","totalMatchingOption","aria-labelledby","totalMatchingOptionLabel"],[1,"nullColorStrategy"],["localize","ConditionalFormattingDialogModern_FormatNull"],[1,"colorSettings"],["formControlName","nullStrategyOption"],["tabindex","-1","labelId","genericColor",1,"whiteTheme",3,"color","defaultColor","isNoFillItemSupported","buttonHeight","ngStyle","colorChanged"],[1,"barDirection"],["id","barDirectionLabel","localize","DataBarsDialog_BarDirection"],["id","barDirectionSelectedOption","formControlName","barDirectionSelectedOption","aria-labelledby","barDirectionLabel"],[1,"spaceAbove"],[1,"sectionSettings"],["id","minimumSelectedOptionLabel","localize","ConditionalFormattingDialog_MinimumHeader","localizeTooltip","ConditionalFormattingDialog_MinimumHeader"],["formControlName","minimumSelectedOption","aria-labelledby","minimumSelectedOptionLabel"],["tabindex","-1","labelId","genericColor",1,"whiteTheme",3,"color","defaultColor","isNoFillItemSupported","buttonHeight","colorChanged"],["type","number","pbiInput","","formControlName","gradientMinValue","pbiTooltipPosition","below",1,"pbi-text-input",3,"placeholder","pbiTooltip","pbiTooltipShowDelay","pbiTooltipHideDelay"],[4,"ngIf"],["id","maximumSelectedOptionLabel","localize","ConditionalFormattingDialog_MaximumHeader","localizeTooltip","ConditionalFormattingDialog_MaximumHeader"],["formControlName","maximumSelectedOption","aria-labelledby","maximumSelectedOptionLabel"],["type","number","pbiInput","","formControlName","gradientMaxValue","pbiTooltipPosition","below",1,"pbi-text-input",3,"placeholder","pbiTooltip","pbiTooltipShowDelay","pbiTooltipHideDelay"],[1,"checkBoxSettings"],["id","diverging","formControlName","diverging","localizeTooltip","ConditionalFormattingDialogModern_Diverging",3,"label","localizeAttr"],["data-testid","gradient-value",1,"gradientValue"],[3,"colors"],["id","centerSelectedOptionLabel","localize","ConditionalFormattingDialog_CenterHeader","localizeTooltip","ConditionalFormattingDialog_CenterHeader"],["formControlName","centerSelectedOption","aria-labelledby","centerSelectedOptionLabel"],["type","number","pbiInput","","formControlName","gradientMidValue","pbiTooltipPosition","below",1,"pbi-text-input",3,"placeholder","pbiTooltip","pbiTooltipShowDelay","pbiTooltipHideDelay"],["type","number","pbiInput","","formControlName","dataBarsMinValue","pbiTooltipPosition","below",1,"pbi-text-input",3,"placeholder","pbiTooltip","pbiTooltipShowDelay","pbiTooltipHideDelay"],["type","number","pbiInput","","formControlName","dataBarsMaxValue","pbiTooltipPosition","below",1,"pbi-text-input",3,"placeholder","pbiTooltip","pbiTooltipShowDelay","pbiTooltipHideDelay"],[1,"sectionSettings","colorList"],["id","positiveColorLabel","localize","DataBarsDialog_PositiveBar"],["tabindex","-1","labelId","positiveColorLabel",1,"whiteTheme",3,"color","defaultColor","buttonHeight","colorChanged"],["id","negativeColorLabel","localize","DataBarsDialog_NegativeBar"],["tabindex","-1","labelId","negativeColorLabel",1,"whiteTheme",3,"color","defaultColor","buttonHeight","colorChanged"],["id","axisColorLabel","localize","DataBarsDialog_BarAxis"],["tabindex","-1","labelId","axisColorLabel",1,"whiteTheme",3,"color","defaultColor","buttonHeight","isNoFillItemSupported","colorChanged"],["id","diverging","formControlName","hideText","localizeTooltip","DataBarsDialog_HideText",3,"label","localizeAttr"],["id","iconSettingsSection",1,"flex","spaceAbove"],["id","iconLayout"],["id","iconLayoutLabel","localize","Visual_IconLayout","localizeTooltip","Visual_IconLayout"],["formControlName","iconLayout","aria-labelledby","iconLayoutLabel"],["id","iconVerticalAlignment"],["id","iconVerticalAlignmentLabel","localize","Visual_IconVerticalAlignment","localizeTooltip","Visual_IconVerticalAlignment"],["formControlName","iconVerticalAlignment","aria-labelledby","iconVerticalAlignmentLabel"],["id","iconSet",4,"ngIf"],["id","iconSet"],["localize","ConditionalFormattingDialog_RuleBased_IconStyleHeader","id","genericIconSet"],["tabindex","-1","labelId","genericIconSet",1,"whiteTheme",3,"iconSetId","onIconSetSelected"],[1,"flex-column","conditional","spaceAbove"],[1,"header"],["id","listActions"],["type","button",1,"pbi-fluent-small-button",3,"click"],[1,"glyphicon","pbi-glyph-sort","glyph-mini"],[3,"localize","localizeTooltip"],[1,"glyphicon","pbi-glyph-add","glyph-mini"],["localize","ConditionalFormattingDialog_RuleBased_RulesAdd","localizeTooltip","ConditionalFormattingDialog_RuleBased_RulesAdd"],["localize","ConditionalFormattingDialog_RuleBased_RulesTitle","localizeTooltip","ConditionalFormattingDialog_RuleBased_RulesTitle"],[1,"rulesContainer","spaceAbove"],["formArrayName","rules"],["class","ruleSettings",4,"ngFor","ngForOf"],[1,"ruleSettings"],[3,"formGroup","ngSwitch",4,"ngIf"],[3,"formGroup","ngSwitch"],[4,"ngSwitchCase"],["localize","ConditionalFormattingDialog_RuleBased_ConditionPostfix"],["class","whiteTheme","tabindex","-1","labelId","genericColor",3,"color","defaultColor","isNoFillItemSupported","buttonHeight","colorChanged",4,"ngIf"],["class","whiteTheme","labelId","genericIcon",3,"selectedIconId","iconChanged",4,"ngIf"],[1,"actionsContainer"],["localizeTooltip","ConditionalFormattingDialog_RuleBased_ConditionError",1,"glyphicon","glyph-small","pbi-glyph-info","error",3,"ngClass"],["role","button","localizeTooltip","ConditionalFormattingDialog_Case_Move_Up",1,"glyphicon","glyph-mini","pbi-glyph-drillup-nocircle",3,"ngClass","keydown","click"],["role","button","localizeTooltip","ConditionalFormattingDialog_Case_Move_Down",1,"glyphicon","glyph-mini","pbi-glyph-drilldowndisabled-nocircle",3,"ngClass","keydown","click"],["role","button","localizeTooltip","ConditionalFormattingDialog_Case_Delete",1,"glyphicon","glyph-mini","pbi-glyph-exit",3,"ngClass","keydown","click"],["localize","ConditionalFormattingDialog_RuleBased_ConditionPrefix"],["formControlName","lowerBoundOperator",1,"operator"],["formControlName","lowerBoundArgument","type","number","pbiTooltipPosition","below",1,"pbi-text-input","numeric-argument",3,"ngClass","localizeAttr","pbiTooltip"],["formControlName","lowerBoundArgumentKind",1,"argumentKind",3,"ngClass"],[3,"ngClass"],["localize","ConditionalFormattingDialog_RuleBased_ConditionSeparator"],["formControlName","upperBoundOperator",1,"operator"],["formControlName","upperBoundArgument","type","number","pbiTooltipPosition","below",1,"pbi-text-input","numeric-argument",3,"localizeAttr","pbiTooltip"],["formControlName","upperBoundArgumentKind",1,"argumentKind"],["formControlName","lowerBoundArgument","type","string","pbiTooltipPosition","below",1,"pbi-text-input","string-argument",3,"ngClass","localizeAttr","pbiTooltip"],["labelId","genericIcon",1,"whiteTheme",3,"selectedIconId","iconChanged"]],template:function(n,d){1&n&&(e.\u0275\u0275elementStart(0,"template-dialog"),e.\u0275\u0275template(1,bn,33,24,"form",0),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",d.viewModel))},dependencies:[Re.NgClass,Re.NgForOf,Re.NgIf,Re.NgStyle,Re.NgSwitch,Re.NgSwitchCase,xt.J,Ft.Z,Ut,T._Y,T.Fj,T.wV,T.JJ,T.JL,T.sg,T.u,T.CE,Rt.X,zt.b,p.r,c.a,f.H,D.I,P.r,Z._,f.T,k.v,De.l,N.bP,N.ug,Be.V,xe.oO,Re.AsyncPipe,bt.F],styles:["[_nghost-%COMP%]{--colorDialogForeground: var(--fluent-theme-neutral-primary-color);--colorDialogInputBorder: var(--fluent-theme-neutral-secondary-alt-color);--colorDialogInputBackground: var(--fluent-theme-white-color);--colorDialogInputBackgroundAlt: var(--fluent-theme-neutral-light-color);--colorDialogInputDisabled: var(--fluent-theme-neutral-tertiary-alt-color);--colorDialogInputError: var(--fluent-theme-error-dark-color);--colorDialogBackground: var(--globalColorWhite)}[data-legacy-theming=false]   [_nghost-%COMP%]{--colorDialogForeground: var(--colorNeutralForeground1);--colorDialogBackground: var(--colorNeutralBackground1);--colorDialogInputBorder: var(--colorNeutralStroke1);--colorDialogInputBackground: var(--colorNeutralBackground1);--colorDialogInputBackgroundAlt: var(--colorNeutralBackground2);--colorDialogInputDisabled: var(--colorNeutralForegroundDisabled);--colorDialogInputError: var(--colorDangerBorder2)}[_nghost-%COMP%]   .description[_ngcontent-%COMP%]{margin-top:0;font-size:var(--md-font-size, 14px);line-height:var(--md-font-size, 14px);color:var(--colorDialogForeground)}[_nghost-%COMP%]   h2[_ngcontent-%COMP%]{font-size:var(--sm-font-size, 12px);line-height:var(--sm-font-size, 12px);font-weight:400;color:var(--colorDialogForeground);margin-bottom:8px;margin-top:16px}[_nghost-%COMP%]   input[_ngcontent-%COMP%]{border:1px solid var(--colorDialogInputBorder);outline:0;padding:4px}[_nghost-%COMP%]   input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button, [_nghost-%COMP%]   input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;-moz-appearance:textfield;margin:0}[_nghost-%COMP%]   input[disabled][_ngcontent-%COMP%]:hover{border-color:var(--colorDialogInputBorder)}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]{border:0;margin:0;padding:0}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%]{font-size:var(--lg-font-size, 16px);margin-bottom:12px}[_nghost-%COMP%]   .sectionSettings[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:10px;margin-bottom:20px}[_nghost-%COMP%]   .sectionSettings[_ngcontent-%COMP%]   pbi-dropdown[_ngcontent-%COMP%]{margin-bottom:5px}[_nghost-%COMP%]   .sectionSettings[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:122px}[_nghost-%COMP%]   .checkBoxSettings[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]   .checkBoxSettings[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 5px 5px;font-size:var(--sm-font-size, 12px);cursor:pointer}[_nghost-%COMP%]   .checkBoxSettings[_ngcontent-%COMP%]   pbi-checkbox[_ngcontent-%COMP%]{margin-bottom:0;padding:2px}[_nghost-%COMP%]   theme-color-input[_ngcontent-%COMP%]{margin-left:4px}.conditionalFormattingFieldListContainer[_ngcontent-%COMP%]   pbi-field-list[_ngcontent-%COMP%]{width:264px;height:300px;background:var(--colorDialogInputBackground);border:1px solid var(--colorDialogInputBorder);padding:5px;position:absolute}[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;position:relative}[_nghost-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1;height:494px}[_nghost-%COMP%]   pbi-dropdown[_ngcontent-%COMP%]{width:276px}[_nghost-%COMP%]   .colorSettings[_ngcontent-%COMP%]   pbi-dropdown[_ngcontent-%COMP%]{width:224px}[_nghost-%COMP%]   section.flex[_ngcontent-%COMP%]{display:flex;flex-direction:row}[_nghost-%COMP%]   section.flex.space-between[_ngcontent-%COMP%]{justify-content:space-between}[_nghost-%COMP%]   section.flex[_ngcontent-%COMP%] > fieldset[_ngcontent-%COMP%]{margin-top:auto}[_nghost-%COMP%]   section.flex-column[_ngcontent-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   .spaceAbove[_ngcontent-%COMP%]{margin-top:12px}[_nghost-%COMP%]   .spaceBelow[_ngcontent-%COMP%]{margin-bottom:12px}[_nghost-%COMP%]   fieldset.conditionalFormattingMode[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset#totalMatching[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset.sourceField[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset.sourceSummarization[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset.nullColorStrategy[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset.barDirection[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset#iconLayout[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset#iconVerticalAlignment[_ngcontent-%COMP%]{position:relative;width:276px;margin-bottom:8px}[_nghost-%COMP%]   fieldset.conditionalFormattingMode[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset#totalMatching[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset.sourceField[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset.sourceSummarization[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset.nullColorStrategy[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset.barDirection[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset#iconLayout[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset#iconVerticalAlignment[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;margin-bottom:12px;display:block}[_nghost-%COMP%]   fieldset.conditionalFormattingMode[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset#totalMatching[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset.sourceField[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset.sourceSummarization[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset#iconLayout[_ngcontent-%COMP%], [_nghost-%COMP%]   fieldset#iconVerticalAlignment[_ngcontent-%COMP%]{margin-right:28px}[_nghost-%COMP%]   fieldset.nullColorStrategy[_ngcontent-%COMP%]{width:276px}[_nghost-%COMP%]   fieldset.nullColorStrategy[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{display:inline-flex;width:100%}[_nghost-%COMP%]   fieldset#iconSet[_ngcontent-%COMP%]{margin-bottom:12px}[_nghost-%COMP%]   .sectionSettings[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]{width:276px}[_nghost-%COMP%]   .sectionSettings[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{display:inline-flex;width:100%}[_nghost-%COMP%]   .sectionSettings[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]   input.ng-invalid[_ngcontent-%COMP%]{border:1px solid var(--colorDialogInputError)}[_nghost-%COMP%]   .sectionSettings.colorList[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%] > theme-color-input[_ngcontent-%COMP%]{margin:0}[_nghost-%COMP%]   section.gradientValue[_ngcontent-%COMP%]{border:1px solid var(--colorDialogInputBorder);display:block;height:25px;margin-top:20px;margin-right:8px}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.header[_ngcontent-%COMP%]{position:relative;height:35px;vertical-align:bottom}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.header[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%]{margin-bottom:0}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.header[_ngcontent-%COMP%]   #listActions[_ngcontent-%COMP%]{position:absolute;right:0;top:0;display:flex;flex-direction:row}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.header[_ngcontent-%COMP%]   #listActions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:80px;max-width:200px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;margin-right:8px;display:flex;align-items:center}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.header[_ngcontent-%COMP%]   #listActions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:5px}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.header[_ngcontent-%COMP%]   #listActions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-of-type{margin-right:0}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.rulesContainer[_ngcontent-%COMP%]{overflow-y:auto;overflow-x:hidden;font-size:12px;flex:1}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.rulesContainer[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.rulesContainer[_ngcontent-%COMP%]   section.ruleSettings[_ngcontent-%COMP%]:nth-of-type(odd){background:var(--colorDialogInputBackgroundAlt)}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.rulesContainer[_ngcontent-%COMP%]   section.ruleSettings[_ngcontent-%COMP%]{padding:3px 0}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.rulesContainer[_ngcontent-%COMP%]   section.ruleSettings[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:8px 4px}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.rulesContainer[_ngcontent-%COMP%]   section.ruleSettings[_ngcontent-%COMP%]   pbi-dropdown.operator[_ngcontent-%COMP%]{width:120px}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.rulesContainer[_ngcontent-%COMP%]   section.ruleSettings[_ngcontent-%COMP%]   input.numeric-argument[_ngcontent-%COMP%]{width:50px;margin-left:4px}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.rulesContainer[_ngcontent-%COMP%]   section.ruleSettings[_ngcontent-%COMP%]   input.string-argument[_ngcontent-%COMP%]{width:250px;margin-left:4px}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.rulesContainer[_ngcontent-%COMP%]   section.ruleSettings[_ngcontent-%COMP%]   pbi-dropdown.argumentKind[_ngcontent-%COMP%]{width:80px;margin-left:4px}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.rulesContainer[_ngcontent-%COMP%]   section.ruleSettings[_ngcontent-%COMP%]   input.argument.ng-invalid[_ngcontent-%COMP%]{border-color:var(--colorDialogInputError)}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.rulesContainer[_ngcontent-%COMP%]   section.ruleSettings[_ngcontent-%COMP%]   .colorpicker[_ngcontent-%COMP%]{background:white}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.rulesContainer[_ngcontent-%COMP%]   section.ruleSettings[_ngcontent-%COMP%]   section.actionsContainer[_ngcontent-%COMP%]{flex-grow:1;display:flex;justify-content:flex-end}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.rulesContainer[_ngcontent-%COMP%]   section.ruleSettings[_ngcontent-%COMP%]   section.actionsContainer[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin:6px 10px 6px 0;cursor:pointer}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.rulesContainer[_ngcontent-%COMP%]   section.ruleSettings[_ngcontent-%COMP%]   section.actionsContainer[_ngcontent-%COMP%]   i.disabled[_ngcontent-%COMP%]{color:var(--colorDialogInputDisabled);cursor:default}[_nghost-%COMP%]   section.conditional[_ngcontent-%COMP%]   section.rulesContainer[_ngcontent-%COMP%]   section.ruleSettings[_ngcontent-%COMP%]   section.actionsContainer[_ngcontent-%COMP%]   i.pbi-glyph-info.error[_ngcontent-%COMP%]{color:var(--colorDialogInputError)}.container-stop-bottom[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;pointer-events:none}"],changeDetection:0}),i}(pe.w),Mn=o(25835),On=o(22824),_n=o(88940),xn=o(82156),Fn=o(79061),Wt=o(78963),In=o(76966),Dn=o(16973),Pn=o(47913),Tn=o(6015),wn=o(63654),En=o(14525),Bn=o(16095),Ln=o(27037),An=o(52121),Nn=function(){function a(){}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=e.\u0275\u0275defineInjector({providers:(0,v.ev)((0,v.ev)([],_n.H,!0),[An.l6,z,nt.D,vt.y,yt.J,ft.p,Ze.AA,ke.a,Ye.b,{provide:Wt.W,useClass:Wt.w},Ke.x],!1),imports:[Re.CommonModule,In.c.withManifest([{componentIdentifier:"ConditionalFormattingDialog",componentType:Sn}]),On.J,Mn.FieldListModule,T.u5,T.UX,xn.N,Fn.v,r.p,Tn.C,Pn.V,wn.X,En.g,Bn.Z,Ln.b,Dn.e]}),a}()},85287:function(ge,R,o){o.d(R,{df:function(){return w},vB:function(){return I}});var v=o(41114),r="PBI.ExploreUIDialogs.SampleDatasetDialog",w=v.cx[r]=(0,v.b1)(r),h="PBI.EX.ApplyConditionalFormattingRules",I=v.cx[h]=(0,v.b1)(h)},25835:function(ge,R,o){o.r(R),o.d(R,{FieldListModule:function(){return zt}});var v=o(81337),r=o(22824),w=o(3468),h=o(70863),I=o(44529),F=o(59725),s=o(50423),l=o(23983),S=function(){function p(c){this.groupingDesignStateService=c}return p.prototype.dragStart=function(c){var f=c.flatNode.node;if(!(0,h.wb)(f.data)&&!(0,h.Ov)(f.data)){var D=(0,I.Sd)(f.data,this.groupingDesignStateService),P=w.ib.serializeExpr(D),Z=JSON.stringify({id:f.id,icon:f.icon,label:f.displayName,fieldExpr:P});c.sourceEvent.dataTransfer.setData(F.L$,Z)}},p.\u0275fac=function(f){return new(f||p)(s.\u0275\u0275inject(l.AA))},p.\u0275prov=s.\u0275\u0275defineInjectable({token:p,factory:p.\u0275fac}),p}(),C=o(40290),y=o(8590),b=o(21728),g=o(87879),M=o(94419),x=o(9738),L=o(58295),ie=o(88315),G=o(83342),ue=o(11494),he=o(83008),q=o(39503),j=o(72262),ne=o(28199),Y=o(93215),ee=o(10861),re=function(){function p(c,f,D,P,Z,k,De,N,Be,xe,Ue){var Te=this;this.featureSwitchService=c,this.eventBridge=f,this.aggrOpsService=D,this.dataSourcesService=P,this.modelService=Z,this.groupingDesignStateService=k,this.visualAuthoringService=De,this.explorationNavigationService=N,this.selectionService=Be,this.fieldListCheckedService=xe,this.modelingSelectionService=Ue,this.subscriptionManager=f.createChannelSubscriptionManager(),this.subscriptionManager.subscribe(y.oRp,function(){return Te.updateFieldListCheckFromSelectedVisual()}),this.subscriptionManager.subscribe(y.jCS,function(){return Te.updateFieldListCheckFromSelectedVisual()}),this.modelService.modelChange$.subscribe(function(){return Te.updateFieldListCheckFromSelectedVisual()}),this.subscriptionManager.subscribe(y.OPn,function(){return Te.modelingSelectionService.clear()}),this.subscriptionManager.subscribe(y.tRg,function(){Te.modelingSelectionService.clear(),Te.updateFieldListCheckFromSelectedVisual()}),this.subscriptionManager.subscribe(y.KD7,function(){Te.modelingSelectionService.clear(),Te.updateFieldListCheckFromSelectedVisual()})}return p.prototype.updateFieldListCheckFromSelectedVisual=function(){this.fieldListCheckedService.selectAll(this.getModelItemsFromSelectedVisual(this.modelService.model),!0)},p.prototype.addFieldToVisual=function(c){return(0,v.mG)(this,void 0,void 0,function(){var f,D,P;return(0,v.Jh)(this,function(Z){switch(Z.label){case 0:return f=this.getFieldExpr(c),(D=b.UP.getSelectedVisual(this.selectionService))?(P=16===D.visibility,[4,this.visualAuthoringService.addFieldToVisual(f,this.dataSourcesService.get(),D,"CheckboxTickedInFieldList",P)]):[3,2];case 1:return[2,Z.sent()];case 2:return this.eventBridge.publishToChannel(y.Tyr,{expr:f,allowAggregate:!0,telemetrySource:0}),[2,!0]}})})},p.prototype.removeField=function(c){this.visualAuthoringService.removeFieldFromAllRoles(this.dataSourcesService.get(),this.getFieldExpr(c))},p.prototype.addToDrillTrhough=function(c){this.visualAuthoringService.addDrillthroughFilter(this.getFieldExpr(c),{container:this.explorationNavigationService.getCurrentSection(),scopeType:1},this.dataSourcesService.get(),!0)},p.prototype.canAddToFilter=function(c){return!(0,h.kb)(c)||!this.castToConceptualItem(c).schema.capabilities.limitMultiColumnFiltersToQueryGroupColumns},p.prototype.addReportLevelFilter=function(c){this.visualAuthoringService.addFilter(this.getFieldExpr(c),{container:this.explorationNavigationService.getCurrentExploration(),scopeType:2},this.dataSourcesService.get())},p.prototype.addPageLevelFilter=function(c){this.visualAuthoringService.addFilter(this.getFieldExpr(c),{container:this.explorationNavigationService.getCurrentSection(),scopeType:1},this.dataSourcesService.get())},p.prototype.addVisualLevelFilter=function(c,f){this.visualAuthoringService.addFilter(this.getFieldExpr(c),{container:f,scopeType:0},this.dataSourcesService.get())},p.prototype.getTopNVisualFilters=function(c){return this.visualAuthoringService.createVisualFilters(this.explorationNavigationService.getCurrentSection(),c,this.dataSourcesService.get(),this.modelService.schema).filter(function(f){return f.contract&&f.contract.type===C.vA.TopN})},p.prototype.addToTopNFilterValue=function(c,f){var D=this.getFieldExpr(c),P=(0,L.k)(D)?D:(0,M.m_)(D,this.aggrOpsService.defaultAggregate(D,this.modelService.schema,!0));this.eventBridge.publishToChannel(g.d,{filterViewModel:f,orderByField:P})},p.prototype.getModelItemsFromSelectedVisual=function(c){if(!c)return[];var f=[],D=b.UP.getSelectedVisual(this.selectionService);if(D&&D.config.singleVisual&&D.config.singleVisual.query&&D.config.singleVisual.query.defn)if(this.featureSwitchService.featureSwitches.fieldParameters)for(var Z=0,k=D.config.singleVisual.query.getUniqueQueryFields();Z<k.length;Z++)f.push.apply(f,c.findItems(k[Z].expr));else for(var N=0,Be=D.config.singleVisual.query.defn.select();N<Be.length;N++)f.push.apply(f,c.findItems(Be[N].expr));return f},p.prototype.getFieldExpr=function(c){return(0,I.Sd)(this.castToConceptualItem(c),this.groupingDesignStateService)},p.prototype.castToConceptualItem=function(c){if(c instanceof ie.Xx)return c;throw Error("invalid type passed to toConceptualItem")},p.\u0275fac=function(f){return new(f||p)(s.\u0275\u0275inject(G.vZ),s.\u0275\u0275inject(ue.J),s.\u0275\u0275inject(ne.C),s.\u0275\u0275inject(he.D),s.\u0275\u0275inject(Y.b),s.\u0275\u0275inject(l.AA),s.\u0275\u0275inject(ee.$8),s.\u0275\u0275inject(q.z),s.\u0275\u0275inject(j.z),s.\u0275\u0275inject(x.fc),s.\u0275\u0275inject(x.W6))},p.\u0275prov=s.\u0275\u0275defineInjectable({token:p,factory:p.\u0275fac}),p}(),be=function(){function p(c){this.fieldListReportAuthoringService=c}return p.prototype.check=function(c){return(0,v.mG)(this,void 0,void 0,function(){var f;return(0,v.Jh)(this,function(D){switch(D.label){case 0:return c.checked?(f=c.flatNode.node,[4,this.fieldListReportAuthoringService.addFieldToVisual(c.flatNode.node.data)]):[3,2];case 1:return f.checked=D.sent(),[3,3];case 2:c.flatNode.node.checked=!1,this.fieldListReportAuthoringService.removeField(c.flatNode.node.data),D.label=3;case 3:return[2]}})})},p.\u0275fac=function(f){return new(f||p)(s.\u0275\u0275inject(re))},p.\u0275prov=s.\u0275\u0275defineInjectable({token:p,factory:p.\u0275fac}),p}(),se=o(64560),ce=function(p){return p.AddToDrillthrough="FieldListMenuItem_AddToDrillthrough",p}({}),A={items:[{id:ce.AddToDrillthrough,type:se.iB.Button,text:"FieldListMenuItem_AddToDrillthrough",tooltip:"FieldListMenuItem_AddToDrillthrough"}]},me=function(){function p(c){this.fieldListReportAuthoringService=c}return p.prototype.getHandler=function(c){var f=this;return[ce.AddToDrillthrough,{execute:function(){return f.fieldListReportAuthoringService.addToDrillTrhough(c)}}]},p.\u0275fac=function(f){return new(f||p)(s.\u0275\u0275inject(re))},p.\u0275prov=s.\u0275\u0275defineInjectable({token:p,factory:p.\u0275fac}),p}(),Se=function(p){return p.AddToFilters="FieldListMenuItem_AddToFilters",p.AddToReportLevelFilters="FieldListMenuItem_ReportLevelFilters",p.AddToPageLevelFilters="FieldListMenuItem_PageLevelFilters",p.AddToVisualLevelFilters="FieldListMenuItem_VisualLevelFilters",p}({}),Oe={items:[{id:Se.AddToFilters,type:se.iB.SubMenu,text:"FieldListMenuItem_AddToFilters",tooltip:"FieldListMenuItem_AddToFilters",menu:{items:[{id:Se.AddToVisualLevelFilters,type:se.iB.Button,text:"FieldListMenuItem_VisualLevelFilters",tooltip:"FieldListMenuItem_VisualLevelFilters"},{id:Se.AddToPageLevelFilters,type:se.iB.Button,text:"FieldListMenuItem_PageLevelFilters",tooltip:"FieldListMenuItem_PageLevelFilters"},{id:Se.AddToReportLevelFilters,type:se.iB.Button,text:"FieldListMenuItem_ReportLevelFilters",tooltip:"FieldListMenuItem_ReportLevelFilters"}]}}]},_e=function(p){return p.AddToTopNFilters="FieldListMenuItem_AddToTopNByValue",p.AddToTopNFilter="AddToTopNFilter",p}({}),qe={items:[{id:_e.AddToTopNFilters,type:se.iB.SubMenu,text:"FieldListMenuItem_AddToTopNByValue",tooltip:"FieldListMenuItem_AddToTopNByValue"}]},et=function(){function p(c,f){this.selectionService=c,this.fieldListReportAuthoringService=f}return p.prototype.getHandlers=function(c){var f=this;if(!this.fieldListReportAuthoringService.canAddToFilter(c))return[];var D=[[Se.AddToFilters,{execute:void 0}],[Se.AddToReportLevelFilters,{execute:function(){return f.fieldListReportAuthoringService.addReportLevelFilter(c)}}],[Se.AddToPageLevelFilters,{execute:function(){return f.fieldListReportAuthoringService.addPageLevelFilter(c)}}]],P=b.UP.getSelectedVisual(this.selectionService);return P&&(D.push([Se.AddToVisualLevelFilters,{execute:function(){return f.fieldListReportAuthoringService.addVisualLevelFilter(c,P)}}]),D.push([_e.AddToTopNFilters,{getSubItems:function(){return f.getTopNVisualFiltersMenuItems(P)},execute:void 0}]),D.push([_e.AddToTopNFilter,{execute:function(k){f.fieldListReportAuthoringService.addToTopNFilterValue(c,k.menuItem.data)}}])),D},p.prototype.getTopNVisualFiltersMenuItems=function(c){return this.fieldListReportAuthoringService.getTopNVisualFilters(c).sort(function(f,D){return f.displayName.localeCompare(D.displayName)}).map(function(f){return{id:_e.AddToTopNFilter,type:se.iB.Button,text:f.displayName,tooltip:f.displayName,data:f}})},p.\u0275fac=function(f){return new(f||p)(s.\u0275\u0275inject(j.z),s.\u0275\u0275inject(re))},p.\u0275prov=s.\u0275\u0275defineInjectable({token:p,factory:p.\u0275fac}),p}(),Qe=function(p){return p.AddToField="FieldListMenuItem_AddToField",p}({}),e={id:Qe.AddToField,type:se.iB.Button,text:"FieldListMenuItem_AddToField",tooltip:"FieldListMenuItem_AddToField"},tt=function(p){return p.Select="Select",p}({}),nt={items:[e,{id:tt.Select,type:se.iB.Button,text:"Select",tooltip:"Select",checkable:!1}]},$e=o(81141),it=function(){function p(c,f){this.fieldListReportAuthoringService=c,this.checkSettingStrategy=f}return p.prototype.getHandlers=function(c){var f=this;return this.canAddToField(c)?[[Qe.AddToField,{execute:function(P){return f.fieldListReportAuthoringService.addFieldToVisual(c)}}]]:[]},p.prototype.canAddToField=function(c){return!!this.checkSettingStrategy&&((0,h.t3)(c)||(0,h.kb)(c)||(0,h.y3)(c),this.checkSettingStrategy.isCheckable(c))},p.\u0275fac=function(f){return new(f||p)(s.\u0275\u0275inject(re),s.\u0275\u0275inject($e.x,8))},p.\u0275prov=s.\u0275\u0275defineInjectable({token:p,factory:p.\u0275fac}),p}(),Je=[et,me,it,function(){function p(c){this.modelingSelectionService=c}return p.prototype.getHandlers=function(c){var f=this;return[[tt.Select,{execute:function(P){return f.modelingSelectionService.select(P.flatNode.node.data,!0)}}]]},p.\u0275fac=function(f){return new(f||p)(s.\u0275\u0275inject(x.W6))},p.\u0275prov=s.\u0275\u0275defineInjectable({token:p,factory:p.\u0275fac}),p}(),S,be,re],V=function(p){return p.ExpandAll="ExpandAll",p.CollapseAll="CollapseAll",p}({}),T={items:[{id:V.CollapseAll,type:se.iB.Button,text:"FieldListMenuItem_CollapseAll",tooltip:"FieldListMenuItem_CollapseAll"},{id:V.ExpandAll,type:se.iB.Button,text:"FieldListMenuItem_ExpandAll",tooltip:"FieldListMenuItem_ExpandAll"}]},ae=o(34162),oe=o(83723),ye=function(){function p(c){this.fieldListTreeService=c}return p.prototype.getHandlers=function(){var c=this;return[[V.ExpandAll,{executeMany:function(D,P){P.tree.expandAll(),c.fieldListTreeService.update()}}],[V.CollapseAll,{executeMany:function(D,P){P.tree.collapseAll(),c.fieldListTreeService.update()}}]]},p.\u0275fac=function(f){return new(f||p)(s.\u0275\u0275inject(oe.p))},p.\u0275prov=s.\u0275\u0275defineInjectable({token:p,factory:p.\u0275fac}),p}(),de=[nt,T,Oe,A,qe],pe=function(){function p(c,f,D,P,Z){this.menuFactory=c,this.expandCollapseMenuItemHandlers=f,this.checkMenuItemHandler=D,this.addToFiltersMenuItemHandler=P,this.addToDrillthroughItemHandler=Z,this.menuMode=se.Kb.Compact,this.activeContextMenuRef=void 0}return p.prototype.menuClick=function(c){},p.prototype.menuOpen=function(c){this.activeContextMenuRef=c.menuRef},p.prototype.menuClose=function(c){this.activeContextMenuRef=void 0},p.prototype.closeActiveMenu=function(){void 0!==this.activeContextMenuRef&&this.activeContextMenuRef.close()},p.prototype.getMenu=function(c){var f;return this.menuFactory.getMenu(c,de,this.getItemMenuHandlers(null===(f=c.flatNode)||void 0===f?void 0:f.node.data))},p.prototype.menuItemClick=function(c){var f,D,P=this.getItemMenuHandlers(null===(f=c.flatNode)||void 0===f?void 0:f.node.data).get(c.menuItem.id);P.execute?P.execute(c):P.executeMany&&P.executeMany([null===(D=c.flatNode)||void 0===D?void 0:D.node.data],c)},p.prototype.getItemMenuHandlers=function(c){var f=[];return f.push.apply(f,this.expandCollapseMenuItemHandlers.getHandlers()),c&&(((0,h.t3)(c)||(0,h.kb)(c)||(0,h.y3)(c)||(0,h.ez)(c))&&f.push.apply(f,this.checkMenuItemHandler.getHandlers(c)),((0,h.t3)(c)||(0,h.kb)(c)||(0,h.ez)(c))&&(f.push.apply(f,this.addToFiltersMenuItemHandler.getHandlers(c)),f.push(this.addToDrillthroughItemHandler.getHandler(c)))),new Map(f)},p.\u0275fac=function(f){return new(f||p)(s.\u0275\u0275inject(ae.E),s.\u0275\u0275inject(ye),s.\u0275\u0275inject(it),s.\u0275\u0275inject(et),s.\u0275\u0275inject(me))},p.\u0275prov=s.\u0275\u0275defineInjectable({token:p,factory:p.\u0275fac}),p}(),fe=function(){function p(c){this.modelingSelectionService=c}return p.prototype.click=function(c){var f,D;c.sourceEvent.shiftKey?this.startRangeSelectionNode&&this.startRangeSelectionNode.parent===c.flatNode.node.parent&&this.modelingSelectionService.selectAll(this.findNodesRange(this.startRangeSelectionNode,c.flatNode.node,null===(D=null===(f=c?.tree)||void 0===f?void 0:f.search$)||void 0===D?void 0:D.value),!0):c.sourceEvent.ctrlKey?this.modelingSelectionService.isSelected(c.flatNode.node.data)?(this.startRangeSelectionNode=void 0,this.modelingSelectionService.deselect(c.flatNode.node.data)):(this.startRangeSelectionNode=c.flatNode.node,this.modelingSelectionService.select(c.flatNode.node.data,!1)):(this.startRangeSelectionNode=c.flatNode.node,this.modelingSelectionService.select(c.flatNode.node.data,!0))},p.prototype.findNodesRange=function(c,f,D){var P=c.parent.children.indexOf(c),Z=f.parent.children.indexOf(f),k=c.parent.children.slice(Math.min(P,Z),Math.max(P,Z)+1).filter(function(De){return!D||D.test(De.displayName)}).map(function(De){return De.data});return P<=Z?k:k.reverse()},p.\u0275fac=function(f){return new(f||p)(s.\u0275\u0275inject(x.W6))},p.\u0275prov=s.\u0275\u0275defineInjectable({token:p,factory:p.\u0275fac}),p}(),Ae=o(7779),Ne=o(34763),Ee=o(14172),ke=o(8538),Ve=o(29834),Ke=function(){function p(c,f){this.featureSwitchService=c,this.modelingSelectionService=f}return p.prototype.update=function(c,f,D){if(void 0===D&&(D=!0),c)if(_.isEmpty(f))this.modelingSelectionService.selection.length>0&&this.modelingSelectionService.selectAll(this.getUpdatedSelectionFromModelChange(c,f,this.modelingSelectionService.selection),!0);else{var P=void 0;D&&(P=this.getSelectionFromLastNewCalculation(c,f)),P?this.modelingSelectionService.select(P,!0):this.modelingSelectionService.selection.length>0&&this.modelingSelectionService.selectAll(this.getUpdatedSelectionFromModelChange(c,f,this.modelingSelectionService.selection),!0)}else this.modelingSelectionService.clear()},p.prototype.getSelectionFromLastNewCalculation=function(c,f){var D=this,P=f.filter(function(N){return N.newMeasureCreated||N.newCalculatedColumnCreated||N.measureMove||N.newCalculatedTableCreated||N.newBins||N.newGroups||N.setChangeDetectionMetadata||N.hierarchyCreate||N.relationshipCreate||D.featureSwitchService.featureSwitches.modelExplorer&&N.newCalculationItem}),Z=P.some(function(N){return!!N.setChangeDetectionMetadata});if(1===P.length||Z){var k=P[P.length-1];if(k.newMeasureCreated)return(0,h.yo)(c,k.newMeasureCreated.schema,k.newMeasureCreated.entity,k.newMeasureCreated.name);if(k.newCalculatedColumnCreated)return(0,h.Gz)(c,k.newCalculatedColumnCreated.schema,k.newCalculatedColumnCreated.entity,k.newCalculatedColumnCreated.name);if(k.newCalculatedTableCreated)return(0,h.AG)(c,k.newCalculatedTableCreated.entity);if(k.measureMove)return(0,h.yo)(c,k.measureMove.schema,k.measureMove.destination,k.measureMove.property);if(k.newBins)return(0,h.Gz)(c,k.newBins.schema,k.newBins.entity,k.newBins.name);if(k.newGroups)return(0,h.Gz)(c,k.newGroups.schema,k.newGroups.entity,k.newGroups.name);if(k.setChangeDetectionMetadata)return(0,h.yo)(c,k.setChangeDetectionMetadata.schema,k.setChangeDetectionMetadata.entity,k.setChangeDetectionMetadata.measureName);if(k.hierarchyCreate)return(0,h.ZG)(c,k.hierarchyCreate.schema,k.hierarchyCreate.entity,k.hierarchyCreate.name);if(k.relationshipCreate)return(0,h.gq)(c,k.relationshipCreate.fromColumns[0],k.relationshipCreate.toColumns[0]);if(k.newCalculationItem){var De=c.tables.findByUrn(k.newCalculationItem.modelObject);return(0,h.om)(c,c.editableSchemaName,De.name,k.newCalculationItem.name)}}},p.prototype.getUpdatedSelectionFromModelChange=function(c,f,D){for(var P=[],Z=[],k=0,De=D;k<De.length;k++){var N=De[k];if((0,h.wb)(N))(Be=(0,h.AG)(c,this.tryGetNewTableName(N,f)))&&P.push(Be);else if((0,h.t3)(N)){var xe=this.tryGetNewTableName(N.table,f),Ue=(0,h.Gz)(c,N.schemaName,xe,this.tryGetNewItemName(N,f));Ue?P.push(Ue):Z.push(xe)}else if((0,h.kb)(N)){xe=this.tryGetNewTableName(N.table,f);var Te=(0,h.yo)(c,N.schemaName,xe,this.tryGetNewItemName(N,f));Te?P.push(Te):Z.push(xe)}else if((0,h.y3)(N)){xe=this.tryGetNewTableName(N.table,f);var at=(0,h.ZG)(c,N.schemaName,xe,this.tryGetNewItemName(N,f));at?P.push(at):Z.push(xe)}else if((0,h.ez)(N)){xe=this.tryGetNewTableName(N.hierarchy.table,f),Z.push(xe);var lt=(0,h.xu)(c,N.schemaName,xe,N.hierarchy.name,this.tryGetNewHierarchyLevelName(N,f));lt&&P.push(lt)}else if((0,h.RF)(N)){xe=this.tryGetNewTableName(N.calculationGroup.table,f);var st=(0,h.om)(c,N.schemaName,xe,this.tryGetNewItemName(N,f));st?P.push(st):Z.push(xe)}else if((0,h.l2)(N)){var ve=f.filter(function(Ie){return!Ie.SetUsedFeatureModelTraitSchemaChange});if(ve.length){if((0,h.wb)(N.parent)&&ve.every(function(Ie){return Ie.setCalculationItemOrdinal})||ve.every(function(Ie,mt){return Ie.newCalculationItem&&0===mt})){var ht=(0,h.AG)(c,N.parent.name);N.parent=ht,P.push(N);continue}if((0,h.vP)(N.parent)){if(ve.every(function(Ie){return Ie.setCalculationGroupPrecedence})||ve.every(function(Ie,mt){return Ie.newCalculationGroup&&0===mt})){N.parent=c,P.push(N);continue}if(ve.every(function(Ie){return Ie.setDiscourageImplicitMeasures})){N.parent.discourageImplicitMeasures=c.discourageImplicitMeasures,P.push(N);continue}if(ve.every(function(Ie){return Ie.setDirectLakeBehavior})){N.parent.directLakeBehavior=c.directLakeBehavior,P.push(N);continue}if(ve.every(function(Ie){return Ie.setValueFilterBehavior})){N.parent.valueFilterBehavior=c.valueFilterBehavior,P.push(N);continue}if(ve.every(function(Ie){return Ie.setDescription})){N.parent.description=c.description,P.push(N);continue}}}}else if((0,h.Mx)(N)){var ct=(0,h.gq)(c,N.fromColumn.urn,N.toColumn.urn);ct&&P.push(ct)}}if(0===P.length&&Z.length>0)for(var Xe=0,St=Z;Xe<St.length;Xe++){var Be;if(Be=(0,h.AG)(c,xe=St[Xe])){P.push(Be);break}}return P},p.prototype.tryGetNewTableName=function(c,f){if(_.isEmpty(f))return c.name;var D=f.filter(function(P){return P.entityRename}).map(function(P){return P.entityRename}).find(function(P){return(0,h.pb)(P.schema,c.schemaName)&&P.before===c.name});return D?D.after:c.name},p.prototype.tryGetNewItemName=function(c,f){if(_.isEmpty(f))return c.name;var D=this.getPropertyRenamed(c,f);return D?D.after:c.name},p.prototype.tryGetNewHierarchyLevelName=function(c,f){if(_.isEmpty(f))return c.name;var D=this.getHierarchyLevelRenamed(c,f);return D?D.after:c.name},p.prototype.getPropertyRenamed=function(c,f){var D;return D=(0,h.RF)(c)?c.calculationGroup.table.name:c.table.name,f.filter(function(P){return P.propertyRename}).map(function(P){return P.propertyRename}).filter(function(P){return P.objectType===c.modelObjectType}).find(function(P){return(0,h.pb)(P.schema,c.schemaName)&&P.entity===D&&P.before===c.name})},p.prototype.getHierarchyLevelRenamed=function(c,f){return f.filter(function(D){return D.hierarchyLevelRename}).map(function(D){return D.hierarchyLevelRename}).find(function(D){return(0,h.pb)(D.schema,c.schemaName)&&D.hierarchy===c.hierarchy.name&&D.entity===c.hierarchy.table.name&&D.before===c.name})},p.\u0275fac=function(f){return new(f||p)(s.\u0275\u0275inject(G.vZ),s.\u0275\u0275inject(x.W6))},p.\u0275prov=s.\u0275\u0275defineInjectable({token:p,factory:p.\u0275fac}),p}(),rt=o(29524),Ye=o(88023),Ze=o(72193),ft=o(72525),Mt=o(412),Ot=o(17031),_t=o(65005),vt=o(58137),Re=o(68082),xt=o(74611),Ft=o(35510),Ce=o(77476),It=o(59968);function Dt(p,c){if(1&p){var f=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"div",1),s.\u0275\u0275element(1,"i",2),s.\u0275\u0275elementStart(2,"div",3),s.\u0275\u0275element(3,"span",4),s.\u0275\u0275elementStart(4,"button",5),s.\u0275\u0275listener("click",function(){s.\u0275\u0275restoreView(f);var P=s.\u0275\u0275nextContext();return s.\u0275\u0275resetView(P.getData())}),s.\u0275\u0275element(5,"div",6),s.\u0275\u0275elementEnd()()()}}var yt=function(){function p(c,f,D){this.gettingStartedService=c,this.commandStore=f,this.dataModelService=D,this.enabled=new Ft.X(void 0),this.enabled$=this.enabled.asObservable()}return p.prototype.ngOnInit=function(){var c=this;this.modelStateSubscription=this.gettingStartedService.currentState$.subscribe(function(f){return c.updateModelState(f)})},p.prototype.ngOnDestroy=function(){this.modelStateSubscription&&this.modelStateSubscription.unsubscribe()},p.prototype.getData=function(){this.commandStore.DataImport.Connect.execute()},p.prototype.updateModelState=function(c){return(0,v.mG)(this,void 0,void 0,function(){var f,D,P,Z;return(0,v.Jh)(this,function(k){switch(k.label){case 0:return this.dataModelService?[3,1]:(this.enabled.next(!1),[3,5]);case 1:return D=(f=this.enabled).next,(P=0===c)?(Z=xt.Ez,[4,this.dataModelService.getModelAuthoringCapabilities()]):[3,4];case 2:return[4,Z.apply(void 0,[k.sent()])];case 3:P=k.sent(),k.label=4;case 4:D.apply(f,[P]),k.label=5;case 5:return[2]}})})},p.\u0275fac=function(f){return new(f||p)(s.\u0275\u0275directiveInject(Ve.c),s.\u0275\u0275directiveInject(vt.D),s.\u0275\u0275directiveInject(Re.n,8))},p.\u0275cmp=s.\u0275\u0275defineComponent({type:p,selectors:[["field-list-watermark"]],decls:2,vars:3,consts:[["class","getDataHint",4,"ngIf"],[1,"getDataHint"],[1,"glyphicon","icon","glyph-med","pbi-glyph-table-group"],[1,"getDataText"],["id","dataNotLoadedYet","localize","Data_Not_Loaded_Yet"],["aria-labelledby","dataNotLoadedYet getDataLabel","tabindex","0",1,"pbi-internal-link",3,"click"],["id","getDataLabel","localize","GetDataMenu"]],template:function(f,D){1&f&&(s.\u0275\u0275template(0,Dt,6,0,"div",0),s.\u0275\u0275pipe(1,"async")),2&f&&s.\u0275\u0275property("ngIf",s.\u0275\u0275pipeBind1(1,1,D.enabled$))},dependencies:[Ce.NgIf,It.X,Ce.AsyncPipe],styles:['[_nghost-%COMP%]{--no-data-table-icon-color: var(--gray-180);--no-data-text-color: var(--gray-140)}[data-legacy-theming=false]   [_nghost-%COMP%]{--no-data-table-icon-color: var(--colorNeutralForeground1);--no-data-text-color: var(--colorNeutralForeground2)}.getDataHint[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;padding:0 10%}.getDataHint[_ngcontent-%COMP%]   i.pbi-glyph-table-group[_ngcontent-%COMP%]{color:var(--no-data-table-icon-color);margin-top:16px}.getDataHint[_ngcontent-%COMP%]   .getDataText[_ngcontent-%COMP%]{text-align:center;margin-top:8px}.getDataHint[_ngcontent-%COMP%]   .getDataText[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-regular, 400);color:var(--no-data-text-color)}.getDataHint[_ngcontent-%COMP%]   .getDataText[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-semi-bold, 600);background:transparent;padding-left:4px}.getDataHint[_ngcontent-%COMP%]   .getDataText[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{cursor:pointer}'],changeDetection:0}),p}(),Ct=function(){function p(c,f,D,P,Z,k,De,N,Be,xe,Ue,Te,at,lt,st,ve,ht,ct,Xe){this.modelService=f,this.modelingSelectionService=D,this.modelingCheckingService=P,this.modelChangeSelectionSynchronizer=Z,this.schemaItemActivationServiceSynchronizer=k,this.captionSetting=De,this.draggableSetting=N,this.hiddenSetting=Be,this.inlineItemsSetting=xe,this.checkableSetting=Ue,this.fieldListTreeService=Te,this.clickStrategy=at,this.menuStrategy=lt,this.checkStrategy=st,this.dragDropStrategy=ve,this.keyboardStrategy=ht,this.tooltipStrategy=ct,this.gettingStartedService=Xe,this.fieldListTree$=this.fieldListTreeService.fieldListTree$,this.fieldListOptions={click:this.clickStrategy,check:this.checkStrategy,menu:this.menuStrategy,dragDrop:this.dragDropStrategy,keyboard:this.keyboardStrategy,tooltip:this.tooltipStrategy},this.pbiTreeNodeSettingOptions={captionSetting:this.captionSetting,draggableSetting:this.draggableSetting,inlineItemsSetting:this.inlineItemsSetting,checkableSetting:this.checkableSetting,hiddenSetting:this.hiddenSetting},this.checkMode=F.kH.Multi,this.subscription=new Ne.w,this.fieldListTreeService.modelToPbiTreeConverterOptions=this.pbiTreeNodeSettingOptions,this.subscriptionManager=c.createChannelSubscriptionManager()}return p.prototype.ngOnInit=function(){var c=this;this.subscriptionManager.subscribe(y.LE3,function(){return c.modelService.update(void 0)}),this.subscription.add(this.modelService.modelChange$.subscribe(function(f){return c.onModelChange(f)})),this.subscription.add(this.modelingSelectionService.selectionChanged.subscribe(function(f){return c.updateSelection(f)})),this.subscription.add(this.modelingCheckingService.selectionChanged.subscribe(function(f){return c.fieldListTreeService.updateChecked(f)})),this.loading$=this.gettingStartedService.currentState$.pipe((0,Ee.U)(function(f){return 1===f})),this.emptyModel$=this.gettingStartedService.currentState$.pipe((0,Ee.U)(function(f){return 0===f})),this.schemaItemActivationServiceSynchronizer.initialize(),this.modelService.update(void 0)},p.prototype.ngOnDestroy=function(){this.subscriptionManager.unsubscribeAll(),this.subscription.unsubscribe()},p.prototype.updateSelection=function(c){this.closeActiveMenus(),this.fieldListTreeService.updateSelected(c)},p.prototype.closeActiveMenus=function(){this.menuStrategy&&this.menuStrategy.closeActiveMenu()},p.prototype.onModelChange=function(c){this.modelChangeSelectionSynchronizer.update(c.model,c.appliedChanges),this.fieldListTreeService.setOrUpdateFieldListTreeModel(c.model,this.modelingSelectionService.selection,this.modelingCheckingService.selection)},p.\u0275fac=function(f){return new(f||p)(s.\u0275\u0275directiveInject(ue.J),s.\u0275\u0275directiveInject(Y.b),s.\u0275\u0275directiveInject(x.W6),s.\u0275\u0275directiveInject(x.fc),s.\u0275\u0275directiveInject(Ke),s.\u0275\u0275directiveInject(ke.h),s.\u0275\u0275directiveInject(rt.B),s.\u0275\u0275directiveInject(Ye.F),s.\u0275\u0275directiveInject(Ze.J),s.\u0275\u0275directiveInject(ft.wt),s.\u0275\u0275directiveInject($e.x),s.\u0275\u0275directiveInject(oe.p),s.\u0275\u0275directiveInject(fe),s.\u0275\u0275directiveInject(pe),s.\u0275\u0275directiveInject(be),s.\u0275\u0275directiveInject(S),s.\u0275\u0275directiveInject(Mt.W),s.\u0275\u0275directiveInject(Ot.Z),s.\u0275\u0275directiveInject(Ve.c))},p.\u0275cmp=s.\u0275\u0275defineComponent({type:p,selectors:[["field-list-container"]],features:[s.\u0275\u0275ProvidersFeature((0,v.ev)((0,v.ev)((0,v.ev)([],Je,!0),Ae.r,!0),[fe,pe,ye,oe.p],!1))],decls:6,vars:11,consts:[[1,"container",3,"click"],["focus-nav-mode","Browser","fluent","true",3,"fieldListTree","scrollSelectedItemIntoViewOnInit","checkMode","options","loading"],[1,"pbi-field-list-watermark"]],template:function(f,D){1&f&&(s.\u0275\u0275elementStart(0,"div",0),s.\u0275\u0275listener("click",function(Z){return Z.stopPropagation()}),s.\u0275\u0275elementStart(1,"pbi-field-list",1),s.\u0275\u0275pipe(2,"async"),s.\u0275\u0275pipe(3,"async"),s.\u0275\u0275pipe(4,"async"),s.\u0275\u0275element(5,"field-list-watermark",2),s.\u0275\u0275elementEnd()()),2&f&&(s.\u0275\u0275advance(1),s.\u0275\u0275property("fieldListTree",s.\u0275\u0275pipeBind1(2,5,D.emptyModel$)?null:s.\u0275\u0275pipeBind1(3,7,D.fieldListTree$))("scrollSelectedItemIntoViewOnInit",!0)("checkMode",D.checkMode)("options",D.fieldListOptions)("loading",s.\u0275\u0275pipeBind1(4,9,D.loading$)))},dependencies:[_t.l,yt,Ce.AsyncPipe],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}pbi-field-list[_ngcontent-%COMP%]{flex:1;padding:0 4px}pbi-field-list[_ngcontent-%COMP%]     pbi-tree{margin-top:8px;padding-top:0!important}"],changeDetection:0}),p}(),bt=o(52910),Pt=o(82156),gt=o(79061),Tt=[Ke,{provide:x.W6,useClass:x.$x}],wt=function(){function p(){}return p.\u0275fac=function(f){return new(f||p)},p.\u0275mod=s.\u0275\u0275defineNgModule({type:p}),p.\u0275inj=s.\u0275\u0275defineInjector({imports:[Ce.CommonModule,gt.v]}),p}(),Et=o(41920),Bt=function(){function p(){}return p.\u0275fac=function(f){return new(f||p)},p.\u0275mod=s.\u0275\u0275defineNgModule({type:p}),p.\u0275inj=s.\u0275\u0275defineInjector({imports:[Ce.CommonModule,gt.v]}),p}(),Lt=o(72359),At=o(94785),Nt=o(63654),Vt=o(94841),Rt=[{type:Ct,componentId:"FieldListContainerComponentId"}],zt=function(){function p(){}return p.\u0275fac=function(f){return new(f||p)},p.\u0275mod=s.\u0275\u0275defineNgModule({type:p}),p.\u0275inj=s.\u0275\u0275defineInjector({providers:(0,v.ev)((0,v.ev)((0,v.ev)([],Tt,!0),Et.U,!0),[Ze.J],!1),imports:[Ce.CommonModule,bt.O,r.J,Pt.N.withManifests(Rt),gt.v,Vt.b,Lt.K,At.g,Nt.X,Bt,wt]}),p}()},412:function(ge,R,o){o.d(R,{W:function(){return F}});var v=o(93247),r=o(9738),w=o(70863),h=o(50423),I=o(33565),F=function(){function s(l,S){this.deleteModelItemService=l,this.modelingSelectionService=S}return s.prototype.treeNodeKeyDown=function(l){return this.handleKeyDownEvent(l.sourceEvent,l.tree)},s.prototype.backgroundKeyDown=function(l){this.handleKeyDownEvent(l.sourceEvent,l.tree)},s.prototype.handleKeyDownEvent=function(l,S){return l.keyCode===v.yY?!!this.deleteModelItemService&&(l.stopPropagation(),this.deleteModelItemService.deleteAllFromModel(this.modelingSelectionService.selection,!0),!0):l.keyCode===v.hY?(this.modelingSelectionService.clear(),!0):!(l.keyCode!==v.A||!l.ctrlKey||(l.preventDefault(),l.stopPropagation(),this.selectAll(S),0))},s.prototype.selectAll=function(l){this.modelingSelectionService.selectAll(l.treeControl.dataNodes.map(function(S){return S.node.data}).filter(function(S){return(0,w.wb)(S)}),!0)},s.\u0275fac=function(S){return new(S||s)(h.\u0275\u0275inject(I.c,8),h.\u0275\u0275inject(r.W6))},s.\u0275prov=h.\u0275\u0275defineInjectable({token:s,factory:s.\u0275fac}),s}()},34162:function(ge,R,o){o.d(R,{E:function(){return F}});var v=o(64560),r={type:v.iB.Divider},w=o(92882),h=o(50423),I=o(65181),F=function(){function s(l){this.localizationService=l}return s.prototype.getMenu=function(l,S,C){return{items:this.getMenuItems(l,S,C)}},s.prototype.getMenuItems=function(l,S,C){for(var y=[],b=0,g=S;b<g.length;b++){var x=this.getMenuSection(l,g[b],C);y.length>0&&x.length>0&&y.push(r),y.push.apply(y,x)}return y},s.prototype.getMenuSection=function(l,S,C){for(var y,b=[],g=0,M=S.items;g<M.length;g++){var x=M[g],L=C.get(x.id);if(L){var ie={id:x.id,type:x.type,text:this.localizationService.format(x.text),tooltip:this.localizationService.format(x.tooltip),disabled:L.enabled&&!L.enabled(l)};if(L.getIcon&&(ie.icon=L.getIcon(l)),x.type===v.iB.SubMenu){var G=ie;if(x.menu&&(0,w.Q)(x.menu)&&x.menu.items&&(G.menu={items:this.getMenuSection(l,{items:x.menu.items},C)}),L.getSubItems){var ue=L.getSubItems(l);ue.length>0&&(G.menu&&(0,w.Q)(G.menu)?(y=G.menu.items).push.apply(y,ue):G.menu={items:ue})}G.menu&&(0,w.Q)(G.menu)&&G.menu.items.length>0&&b.push(ie)}else b.push(ie)}}return b},s.\u0275fac=function(S){return new(S||s)(h.\u0275\u0275inject(I.o))},s.\u0275prov=h.\u0275\u0275defineInjectable({token:s,factory:s.\u0275fac}),s}()},17031:function(ge,R,o){o.d(R,{Z:function(){return C}});var v=o(14335),r=o(50423),w=o(77476);function h(y,b){1&y&&r.\u0275\u0275elementContainer(0)}var I=function(b){return{$implicit:b}};function F(y,b){if(1&y&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275template(1,h,1,0,"ng-container",2),r.\u0275\u0275elementContainerEnd()),2&y){var g=b.$implicit;r.\u0275\u0275nextContext();var M=r.\u0275\u0275reference(2);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngTemplateOutlet",M)("ngTemplateOutletContext",r.\u0275\u0275pureFunction1(2,I,g))}}function s(y,b){if(1&y&&(r.\u0275\u0275elementStart(0,"div",3)(1,"div",4),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"div",5),r.\u0275\u0275text(4),r.\u0275\u0275elementEnd()()),2&y){var g=b.$implicit;r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(g.title),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(g.value)}}var l=function(){function y(b){this.content=b,this.tooltipData=[],this.tooltipData=b}return y.\u0275fac=function(g){return new(g||y)(r.\u0275\u0275directiveInject(v.HK))},y.\u0275cmp=r.\u0275\u0275defineComponent({type:y,selectors:[["model-object-tooltip"]],decls:3,vars:1,consts:[[4,"ngFor","ngForOf"],["tooltipRow",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"tooltip-row"],[1,"tooltip-title-cell"],[1,"tooltip-value-cell"]],template:function(g,M){1&g&&(r.\u0275\u0275template(0,F,2,4,"ng-container",0),r.\u0275\u0275template(1,s,5,2,"ng-template",null,1,r.\u0275\u0275templateRefExtractor)),2&g&&r.\u0275\u0275property("ngForOf",M.tooltipData)},dependencies:[w.NgForOf,w.NgTemplateOutlet],styles:[".tooltip-row[_ngcontent-%COMP%]{display:table-row;font-size:12px}.tooltip-title-cell[_ngcontent-%COMP%]{display:table-cell;word-wrap:break-word;font-weight:var(--font-weight-regular, 400);max-width:260px;padding-top:1px;padding-bottom:1px;text-align:right}.tooltip-value-cell[_ngcontent-%COMP%]{display:table-cell;word-wrap:break-word;font-weight:var(--font-weight-semi-bold, 600);max-width:260px;padding-top:1px;padding-bottom:1px;padding-left:12px;text-align:left;white-space:break-spaces}"]}),y}(),S=o(65534),C=function(){function y(b){this.tooltipFactory=b,this.getTooltip=function(){return l}}return y.prototype.getTooltipComponentData=function(b){return this.tooltipFactory.getTooltipData(b.flatNode.node.data)},y.\u0275fac=function(g){return new(g||y)(r.\u0275\u0275inject(S.n))},y.\u0275prov=r.\u0275\u0275defineInjectable({token:y,factory:y.\u0275fac}),y}()},81141:function(ge,R,o){o.d(R,{x:function(){return w}});var v=o(70863),r=o(50423),w=function(){function h(){}return h.prototype.isCheckable=function(I){if(!v.wb(I))return!!(v.t3(I)||v.kb(I)||v.y3(I)||v.ez(I))},h.\u0275prov=r.\u0275\u0275defineInjectable({token:h,factory:h.\u0275fac=function(F){return new(F||h)}}),h}()},88023:function(ge,R,o){o.d(R,{F:function(){return w}});var v=o(70863),r=o(50423),w=function(){function h(){}return h.prototype.isDraggable=function(I){return!v.wb(I)&&!!(v.t3(I)||v.kb(I)||v.y3(I)||v.ez(I))},h.\u0275prov=r.\u0275\u0275defineInjectable({token:h,factory:h.\u0275fac=function(F){return new(F||h)}}),h}()},72525:function(ge,R,o){o.d(R,{VI:function(){return C},wt:function(){return S}});var v=o(81337),r=o(70863),w=o(59725),h=o(82332),I=o(50423),F=o(65181),S=function(){function y(b){this.localizationService=b,this.errorInlineItem={icon:{type:0,glyph:h.RB},label:this.localizationService.format("FieldListMenuItem_Error"),type:w.Q_.Icon,id:h.LA}}return y.prototype.getInlineItems=function(b){var g=[];return g.push.apply(g,this.getErrorInLineItem(b)),g},y.prototype.getErrorInLineItem=function(b){var g=[];return r.wb(b)&&b.isErrorState&&g.push(b.errorMessage?(0,v.pi)((0,v.pi)({},this.errorInlineItem),{label:b.errorMessage}):this.errorInlineItem),r.kb(b)&&b.isErrorState&&g.push((0,v.pi)((0,v.pi)({},this.errorInlineItem),{label:b.errorMessage})),r.t3(b)&&b.isErrorState&&g.push(this.errorInlineItem),g},y.\u0275fac=function(g){return new(g||y)(I.\u0275\u0275inject(F.o))},y.\u0275prov=I.\u0275\u0275defineInjectable({token:y,factory:y.\u0275fac}),y}(),C=function(){function y(b,g){this.localizationService=b,this.inlineItemSetting=g,this.hiddenInlineItem={icon:{type:0,glyph:h.cD},label:void 0,type:w.Q_.Button,id:h.zB},this.viewInlineItem={icon:{type:0,glyph:h.qV},label:void 0,type:w.Q_.Button,id:h.SO},this.hideInlineItemTooltip="Field_ShowInReportView",this.viewInlineItemTooltip="FieldListMenuItem_HideInReportViewTooltip"}return Object.defineProperty(y.prototype,"addHiddenItemsOnly",{set:function(g){this._addHiddenItemsOnly=g},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"hideInlineItemTooltip",{set:function(g){this.hiddenInlineItem.label=this.localizationService.format(g)},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"viewInlineItemTooltip",{set:function(g){this.viewInlineItem.label=this.localizationService.format(g)},enumerable:!1,configurable:!0}),y.prototype.getInlineItems=function(b){var g=[];return g.push.apply(g,this.inlineItemSetting.getInlineItems(b)),g.push.apply(g,this.getShowOrHideInLineItem(b)),g},y.prototype.getShowOrHideInLineItem=function(b){var g,M=[];if(r.Ov(b))return!(null===(g=b?.table)||void 0===g)&&g.isHidden&&M.push((0,v.pi)((0,v.pi)({},this.hiddenInlineItem),{type:w.Q_.Icon})),M;if(r.wb(b)||r.t3(b)||r.kb(b)||r.y3(b)){if(b.canEdit&&(0,r.uO)(b))b.isHidden?M.push(this.hiddenInlineItem):this._addHiddenItemsOnly||M.push((0,v.pi)((0,v.pi)({},this.viewInlineItem),{displayOnHover:!0}));else{var x=this.localizationService.get("FieldListMenuItem_ShowHideDisabledForItem");b.isHidden?M.push((0,v.pi)((0,v.pi)({},this.hiddenInlineItem),{type:w.Q_.Icon,label:x})):this._addHiddenItemsOnly||M.push((0,v.pi)((0,v.pi)({},this.viewInlineItem),{type:w.Q_.Icon,displayOnHover:!0,label:x}))}return M}return r.ez(b)&&b.hierarchy.isHidden&&M.push((0,v.pi)((0,v.pi)({},this.hiddenInlineItem),{type:w.Q_.Icon})),M},y.\u0275fac=function(g){return new(g||y)(I.\u0275\u0275inject(F.o),I.\u0275\u0275inject(S))},y.\u0275prov=I.\u0275\u0275defineInjectable({token:y,factory:y.\u0275fac}),y}()},65534:function(ge,R,o){o.d(R,{n:function(){return F}});var v=o(29524),r=o(69615),w=o(70863),h=o(50423),I=o(65181),F=function(){function s(l,S){this.localizationService=l,this.captionSettingStrategy=S}return s.prototype.getTooltipData=function(l){return(0,w.wb)(l)?this.populateTableTooltip(l):(0,w.t3)(l)?this.populateColumnTooltip(l):(0,w.kb)(l)?this.populateMeasureTooltip(l):(0,w.jz)(l)?this.populateKpiTooltip(l):(0,w.y3)(l)?this.populateHierarchyTooltip(l):(0,w.ez)(l)?this.populateHierarchyLevelTooltip(l):(0,w.Mx)(l)?this.populateRelationshipTooltip(l):(0,w.Ao)(l)?this.populatePerspectiveTooltip(l):(0,w.KF)(l)?this.populateCultureTooltip(l):(0,w.yR)(l)?this.populatePartitionTooltip(l):(0,w.RF)(l)?this.populateCalculationItemTooltip(l):(0,w.OP)(l)?this.populateModelRoleTooltip(l):(0,w.CV)(l)?this.populateCalendarTooltip(l):[]},s.prototype.populateTableTooltip=function(l){var S=[];S.push({title:this.localizationService.get("Name"),value:this.getTableCaption(l)});var C=this.storageMode(l);C&&S.push({title:this.localizationService.get("StorageModeLabel"),value:this.localizationService.get(C)}),l.island&&(this.shouldShowTypeDescription(l)&&S.push({title:this.localizationService.get("ServerError_PersonalGateway_DataSourceKindLabel"),value:l.island.typeDescription}),this.shouldShowServerName(l)&&S.push({title:this.localizationService.get("DirectQueryContentProvider_ServerName"),value:l.island.serverName},{title:this.localizationService.get("DirectQueryContentProvider_DatabaseName"),value:l.island.databaseName}),this.shouldShowIslandName(l)&&S.push({title:this.localizationService.get("AnalysisServer_ServerName"),value:l.island.name})),this.shouldShowRefreshedTime(l)&&S.push({title:this.localizationService.get("Data_Refreshed_Label"),value:this.refreshedTime(l)});var y=this.captionSettingStrategy?this.captionSettingStrategy.getDescription(l):l.description;return y&&S.push({title:this.localizationService.get("Description"),value:y}),S},s.prototype.populateColumnTooltip=function(l){var S=[],C=this.captionSettingStrategy?this.captionSettingStrategy.getCaption(l):l.name,y=this.captionSettingStrategy?this.captionSettingStrategy.getCaption(l.table):l.table.name;S.push({title:this.localizationService.get("Name"),value:y?"'".concat(y,"'[").concat(C,"]"):C});var b=this.captionSettingStrategy?this.captionSettingStrategy.getDescription(l):l.description;return b&&S.push({title:this.localizationService.get("Description"),value:b}),S},s.prototype.populateMeasureTooltip=function(l){var S=[],C=this.captionSettingStrategy?this.captionSettingStrategy.getCaption(l):l.name;S.push({title:this.localizationService.get("Name"),value:"[".concat(C,"]")});var y=this.captionSettingStrategy?this.captionSettingStrategy.getDescription(l):l.description;return y&&S.push({title:this.localizationService.get("Description"),value:y}),S},s.prototype.populateKpiTooltip=function(l){var S=[],C=this.captionSettingStrategy?this.captionSettingStrategy.getCaption(l):l.name,y=this.getTableCaption(l.table);S.push({title:this.localizationService.get("Name"),value:y?"'".concat(y,"'[").concat(C,"]"):C});var b=this.captionSettingStrategy?this.captionSettingStrategy.getDescription(l):l.description;return b&&S.push({title:this.localizationService.get("Description"),value:b}),S},s.prototype.populateHierarchyTooltip=function(l){var S=[];S.push({title:this.localizationService.get("Name"),value:this.captionSettingStrategy?this.captionSettingStrategy.getCaption(l):l.name});var C=this.captionSettingStrategy?this.captionSettingStrategy.getDescription(l):l.description;return C&&S.push({title:this.localizationService.get("Description"),value:C}),S},s.prototype.populateHierarchyLevelTooltip=function(l){var S=[],C=this.getTableCaption(l.hierarchy.table),y=this.captionSettingStrategy?this.captionSettingStrategy.getCaption(l):l.name,b=y;l.column&&(b=this.captionSettingStrategy?this.captionSettingStrategy.getCaption(l.column):l.column.name),S.push({title:this.localizationService.get("Name"),value:"'".concat(C,"'[").concat(y,"]")}),S.push({title:this.localizationService.get("Base_field"),value:"[".concat(b,"]")});var g=this.captionSettingStrategy?this.captionSettingStrategy.getCaption(l):l.description;return!g&&l.column&&(g=this.captionSettingStrategy?this.captionSettingStrategy.getDescription(l.column):l.column.description),g&&S.push({title:this.localizationService.get("Description"),value:g}),S},s.prototype.populateRelationshipTooltip=function(l){var S=[],C=this.captionSettingStrategy?this.captionSettingStrategy.getCaption(l):l.displayName;return S.push({title:this.localizationService.get("Name"),value:"[".concat(C,"]")}),S},s.prototype.populatePerspectiveTooltip=function(l){var S=[],C=this.captionSettingStrategy?this.captionSettingStrategy.getCaption(l):l.name;return S.push({title:this.localizationService.get("Name"),value:"[".concat(C,"]")}),S},s.prototype.populateCultureTooltip=function(l){var S=[],C=this.captionSettingStrategy?this.captionSettingStrategy.getCaption(l):l.name;return S.push({title:this.localizationService.get("Name"),value:"[".concat(C,"]")}),S},s.prototype.populatePartitionTooltip=function(l){var S=[],C=this.captionSettingStrategy?this.captionSettingStrategy.getCaption(l):l.name;return S.push({title:this.localizationService.get("Name"),value:"[".concat(C,"]")}),S},s.prototype.populateCalculationItemTooltip=function(l){var S=[],C=this.captionSettingStrategy?this.captionSettingStrategy.getCaption(l):l.name;return S.push({title:this.localizationService.get("Name"),value:"[".concat(C,"]")}),S},s.prototype.populateModelRoleTooltip=function(l){var S=[],C=this.captionSettingStrategy?this.captionSettingStrategy.getCaption(l):l.name;return S.push({title:this.localizationService.get("Name"),value:"[".concat(C,"]")}),S},s.prototype.populateCalendarTooltip=function(l){var S=[],C=this.captionSettingStrategy?this.captionSettingStrategy.getCaption(l):l.name;return S.push({title:this.localizationService.get("Name"),value:"[".concat(C,"]")}),S},s.prototype.shouldShowTypeDescription=function(l){return!l.island.isImportIsland},s.prototype.shouldShowServerName=function(l){return!l.island.isImportIsland&&!!l.island.serverName&&!!l.island.databaseName},s.prototype.shouldShowIslandName=function(l){return!(l.island.isImportIsland||l.island.serverName&&l.island.databaseName)},s.prototype.shouldShowRefreshedTime=function(l){return!!this.refreshedTime(l)},s.prototype.storageMode=function(l){return"Import"===l.storageMode?"StorageMode_Import":"DirectQuery"===l.storageMode?"StorageMode_DirectQuery":"Dual"===l.storageMode?"StorageMode_Dual":"DirectLake"===l.storageMode?"StorageMode_DirectLake":void 0},s.prototype.refreshedTime=function(l){if(l.refreshedTime)return(0,r.jC)(l.refreshedTime).toLocaleDateString(this.localizationService.currentLanguageLocale,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})},s.prototype.getTableCaption=function(l){return this.captionSettingStrategy?this.captionSettingStrategy.getCaption(l):l.name},s.\u0275fac=function(S){return new(S||s)(h.\u0275\u0275inject(I.o),h.\u0275\u0275inject(v.B,8))},s.\u0275prov=h.\u0275\u0275defineInjectable({token:s,factory:s.\u0275fac}),s}()},41920:function(ge,R,o){o.d(R,{U:function(){return y}});var v=o(81141),r=o(88023),w=o(72525),h=o(412),I=o(34162),F=o(65534),s=o(17031),l=o(29524),S=o(72193),C=o(9738),y=[v.x,r.F,w.wt,h.W,I.E,F.n,s.Z,l.B,S.J,{provide:C.fc,useClass:C.$x}]},33565:function(ge,R,o){o.d(R,{c:function(){return q}});var x,v=o(81337),r=o(68082),w=o(53439),h=o(50423),I=new h.InjectionToken("ViewScopedUserSettingsService"),l="hideDeleteRelationshipConfirmation",S=function(j){return j.DeleteModelItem="DeleteModelItem",j}({}),C=o(74611),y=o(50550),b=o(62458),g=o(65843),M=o(55375);!function(j){var ne="COMMANDS_DELETE_TABLE",Me="ListJoin_Separator";function $e(V,z){return(V=V.sort().map(function(Q){return'"'+Q+'"'})).join(z.get(Me))}j.getDeleteConfirmationText=function(V,z){var Q=(0,y.EB)(V.map(function(fe){return(0,C.cO)(fe)?(0,C.d3)(fe.fromTable.name,fe.fromColumn.name,fe.fromCardinality,fe.toTable.name,fe.toColumn.name,fe.toCardinality):fe.name})).join(z.get(Me)+" "),T=z.format("DeleteConfirmationMultiple",Q);1===V.length&&(T="Relationship"===V[0].objectType?z.get("DeleteRelationshipConfirmationMessage"):"Calendar"===V[0].objectType?z.get("DeleteCalendarConfirmationMessage"):z.format("DeleteMeasurePrompt",Q));var ae=function(V,z){for(var Q=(0,C.Y3)((0,C.L9)(V),z),T=0,ae=V;T<ae.length;T++){var oe=ae[T];if((0,C.t3)(oe)&&oe.table.refreshPolicy&&"DateTime"===oe.dataType){Q.push(z.get("IncrementalRefreshPolicy"));break}}return Q.filter(function(pe){return!V.find(function(fe){return fe.name===pe})})}(V,z);if(0!==ae.length){var oe=(0,y.EB)(ae).join(z.get(Me)+" ");T=z.format(1===ae.length?"DeleteConfirmationWithDependents":"DeleteConfirmationMultipleWithDependents",Q,oe)}var ye=function(V){for(var z=new Set,Q=0,T=V;Q<T.length;Q++){var ae=T[Q];if((0,C.t3)(ae)){var oe=ae,ye=oe.table.description,de=(0,C.aP)(oe.table,oe),pe=(0,C.q1)(oe.table,oe);(0,C.oQ)(oe.table,ye,de?.name,pe?.name)&&z.add(oe.table.name)}}return Array.from(z)}(V);if(0!==ye.length){var de=(0,y.EB)(ye).join(z.get(Me)+" ");T=T+"<br/><br/>"+z.format("DeleteConfirmationForCuration",de)}return T},j.showConfirmDialogToDeleteTableWithDependents=function(V,z,Q,T){return(0,v.mG)(this,void 0,void 0,function(){var ae;return(0,v.Jh)(this,function(de){switch(de.label){case 0:return ae=function(V,z,Q){for(var T=new Set,ae=0,oe=V;ae<oe.length;ae++)T.add(oe[ae].name);for(var de=[],pe=[],fe=0,Ae=Object.keys(z);fe<Ae.length;fe++)for(var Ne=Ae[fe],ke=!1,Ve=0,Ke=z[Ne];Ve<Ke.length;Ve++){var rt=Ke[Ve];T.has(rt)||(ke||(de.push(Ne),ke=!0),pe.push(rt))}if(0!==de.length){b.fF.assert(function(){return pe.length>0},"If some tables are remaining, there should have dependents remaining as well");var Ye=$e(pe,Q);if(1===de.length)return 1===pe.length?Q.format("DeleteQueryWithOneDependent",de[0],pe[0]):Q.format("DeleteQueryWithMultipleDependents",de[0],Ye);var Ze=$e(de,Q);return Q.format("DeleteQueriesWithMultipleDependents",Ze,Ye)}}(V,z,Q),ae?[4,M.Z.buildOKCancelDialogWithList(Q.get(ne),[ae],"deleteTableConfirmationDialog",Q.get("ReportModelTableLoadWillBeDisabled"),T,Q)]:[2,!0];case 1:return[4,de.sent().afterClosed().toPromise()];case 2:return[2,1===de.sent()]}})})},j.getQueryToDependents=function(V,z){for(var Q={},T={},ae=V.dataModelExtendedState.queryDependencyGraph,oe=0,ye=Object.keys(ae);oe<ye.length;oe++)for(var de=ye[oe],fe=0,Ae=ae[de];fe<Ae.length;fe++){var Ne=Ae[fe];T[Ne]||(T[Ne]=new Set),T[Ne].add(de)}for(var Ee=0,ke=z;Ee<ke.length;Ee++){var Ve=ke[Ee];T[Ve.name]&&(Q[Ve.name]=Array.from(T[Ve.name]))}return Q},j.reorderItemsToMinimizeDependencies=function(V,z,Q,T){for(var ae=function(V,z){for(var Q=[],T=V.length,ae=function(){var ye=V.length,de=new Set;V.forEach(function(pe){z[pe.name]&&z[pe.name].forEach(function(fe){return de.add(fe)})}),Q=Q.concat(V.filter(function(pe){return!de.has(pe.name)})),V=V.filter(function(pe){return de.has(pe.name)}),ye===V.length&&b.fF.assertFail("Unable to calculate table dependencies")};V.length>0;)ae();return T!==(Q=Q.reverse()).length&&b.fF.assertFail("ordered table number is not same as the origin number for deletion"),Q}(z,Q),oe=V.filter(function(fe){return!(0,C.wb)(fe)}),ye=[],de=function(){var Ae=new Set((0,C.Y3)((0,C.L9)(oe),T)),Ne=oe.filter(function(Ee){return!Ae.has(Ee.name)});ye=Ne.concat(ye),oe=oe.filter(function(Ee){return Ae.has(Ee.name)})};oe.length>0;)de();var pe=ye.concat(ae);return V.length!==pe.length&&b.fF.assertFail("ordered all item number is not same as the origin number for deletion"),pe},j.createDeleteSchemaChange=function(V){var z=V.objectType;if("Relationship"===z){var Q=V;return{relationshipDelete:{fromColumns:[g.X6.getColumnUrn(Q.fromTable.name,Q.fromColumn.name,Q.fromColumn.schemaName)],toColumns:[g.X6.getColumnUrn(Q.toTable.name,Q.toColumn.name,Q.toColumn.schemaName)]}}}if("Level"===z)return{hierarchyLevelDelete:{schema:V.schemaName,entity:V.hierarchy.table.name,hierarchy:V.hierarchy.name,hierarchyLevel:V.name}};if("Table"===z||"Expression"===z)return{itemDelete:{schema:V.schemaName,entity:V.name,objectType:V.objectType}};var ae=void 0;return"Column"===z||"Measure"===z||"Hierarchy"===z?ae=V:"CalculationItem"===z?ae=V.calculationGroup:"Calendar"===z?ae=V:b.fF.assertFail("This object type is not implemented "+z.toString()+"when create schemaChange"),{itemDelete:{schema:V.schemaName,entity:ae.table.name,objectType:V.objectType,property:V.name}}},j.getDeleteComfirmationTitle=function(V,z){if(1!==V.length)return z.get("ReportModelDeleteItemsTitle");switch(V[0].objectType){case"Table":return z.get(ne);case"Column":return z.get("DeleteColumnConfirmationTitle");case"Measure":return z.get("DeleteMeasurePromptTitle");case"Hierarchy":return z.get("DeleteHierarchyConfirmationTitle");case"Level":return z.get("DeleteHierarchyLevelConfirmationTitle");case"Relationship":return z.get("DeleteRelationshipConfirmationTitle");case"Calendar":return z.format("DeleteCalendarConfirmationTitle",V[0].name);default:b.fF.assertFail("Unexpected type being deleted")}},j.getDeleteConfirmationOkButtonText=function(V,z){if(1!==V.length)return z.get("Yes");switch(V[0].objectType){case"Table":case"Column":case"Measure":case"Hierarchy":case"Level":case"Relationship":return z.get("Yes");case"Calendar":return z.get("Delete");default:b.fF.assertFail("Unexpected type being deleted")}}}(x||(x={}));var L=o(70863),ie=o(58938),G=o(65181),ue=o(66339),q=function(){function j(ne,Y,ee,re,be,se){this.modelAuthoring=ne,this.dataModelService=Y,this.dialogService=ee,this.localizationService=re,this.telemetryService=be,this.viewScopedUserSettingsService=se}return j.prototype.deleteAllFromModel=function(ne,Y,ee){if(void 0===ee&&(ee=!1),ne.every(function(be){return!0===be.canDelete})){var re=this.createDeleteItems(ne,Y);return this.deleteModelItem(re,ee)}},j.prototype.createDeleteItems=function(ne,Y){var ee=[];if(!ne)return ee;var re=[],be=[],se=[],ce=[];ne.forEach(function(A){(0,L.wb)(A)?re.push(A):(0,L.y3)(A)?be.push(A):(0,L.ez)(A)?se.push(A):ce.push(A)});var Me=[];return se.forEach(function(A){if(be.every(function(Se){return Se.urn!==A.hierarchy.urn})&&re.every(function(Se){return Se.urn!==A.hierarchy.table.urn})){var me=Me.find(function(Se){return Se.hierarchy===A.hierarchy});me||Me.push(me={hierarchy:A.hierarchy,levelsToDelete:[]}),me.levelsToDelete.push(A)}}),Me.forEach(function(A){Y&&A.levelsToDelete.length===A.hierarchy.levels.length?be.push(A.hierarchy):ce.push.apply(ce,A.levelsToDelete||[])}),ce.forEach(function(A){(0,L.Mx)(A)?ee.push({itemName:A.name,schema:null,objectType:"Relationship"}):(0,L.ez)(A)?ee.push({schema:A.schemaName,tableName:A.hierarchy.table.name,itemName:A.hierarchy.name,subItemName:A.name,objectType:"Level"}):(0,L.kb)(A)||(0,L.jz)(A)?re.every(function(me){return me.urn!==A.table.urn})&&ee.push({schema:A.schemaName,tableName:A.table.name,itemName:A.name,objectType:"Measure"}):(0,L.t3)(A)?re.every(function(me){return me.urn!==A.table.urn})&&ee.push({schema:A.schemaName,tableName:A.table.name,itemName:A.name,objectType:"Column"}):(0,L.RF)(A)?re.every(function(me){return me.urn!==A.calculationGroup.table.urn})&&ee.push({schema:A.schemaName,tableName:A.calculationGroup.table.name,itemName:A.name,objectType:"CalculationItem"}):(0,L.CV)(A)&&re.every(function(me){return me.urn!==A.table.urn})&&ee.push({schema:A.schemaName,tableName:A.table.name,itemName:A.name,objectType:"Calendar"})}),be.forEach(function(A){re.every(function(me){return me.urn!==A.table.urn})&&ee.push({schema:A.schemaName,tableName:A.table.name,itemName:A.name,objectType:"Hierarchy"})}),re.forEach(function(A){ee.push({schema:A.schemaName,tableName:A.name,itemName:null,objectType:"Table"})}),ee},j.prototype.deleteModelItem=function(ne,Y){return(0,v.mG)(this,void 0,void 0,function(){var ee,re,be,se,ce,Me,me,Se,le,J;return(0,v.Jh)(this,function(X){switch(X.label){case 0:if(_.isEmpty(ne))return[2];for(ee=this.dataModelService.getClientDataModel(),re=[],be=0,se=ne;be<se.length;be++){if(!(Me=(0,C.Mf)(ee.dataModel,(ce=se[be]).objectType,ce.schema,ce.tableName,ce.itemName,ce.subItemName))||!Me.capabilities.canDelete)return[2];re.push(Me)}return Y||this.hasUserOptedOutOfConfirmation(re)?[3,2]:[4,this.confirmDeleteObjects(ee.dataModel,re,ne)];case 1:if(!X.sent())return[2];X.label=2;case 2:return me=re.filter(function(Oe){return(0,C.wb)(Oe)}),Se=x.getQueryToDependents(ee,me),[4,x.showConfirmDialogToDeleteTableWithDependents(me,Se,this.localizationService,this.dialogService)];case 3:return X.sent()?(le=x.reorderItemsToMinimizeDependencies(re,me,Se,this.localizationService),J=le.map(function(Oe){return x.createDeleteSchemaChange(Oe)}),J?.length>0?(this.telemetryService.logApplyChanges([S.DeleteModelItem]),[4,this.modelAuthoring.apply({changes:J})]):[3,5]):[2];case 4:X.sent(),X.label=5;case 5:return[2]}})})},j.prototype.hasUserOptedOutOfConfirmation=function(ne){return!(!this.viewScopedUserSettingsService||!this.everyItemIsRelationship(ne)||!this.viewScopedUserSettingsService.get(l))},j.prototype.confirmDeleteObjects=function(ne,Y,ee){return(0,v.mG)(this,void 0,void 0,function(){var re,be,ce;return(0,v.Jh)(this,function(Me){switch(Me.label){case 0:if(0===Y.length)return[2,!1];if(1===Y.length){if("CalculationItem"===Y[0].objectType)return[2,!0];if((re=(0,C.Lc)(ne,ee[0].schema,ee[0].tableName,ee[0].itemName))&&(0,C.e_)(re))return[2,!0]}return be=this.shouldIncludeDontAskAgainCheckbox(Y)?this.localizationService.get("Generic_DontShowThisAgain"):void 0,[4,M.Z.buildOKCancelDialog({title:x.getDeleteComfirmationTitle(Y,this.localizationService),message:x.getDeleteConfirmationText(Y,this.localizationService),doNotShowAgain:be},"deleteConfirmationDialog",this.dialogService,this.localizationService,x.getDeleteConfirmationOkButtonText(Y,this.localizationService))];case 1:return[4,Me.sent().afterClosed().toPromise()];case 2:return 5===(ce=Me.sent())?(this.handleDontAskAgainCheckbox(Y),[2,!1]):2===ce||3===ce?[2,!1]:4===ce?(this.handleDontAskAgainCheckbox(Y),[2,!0]):[2,1===ce]}})})},j.prototype.shouldIncludeDontAskAgainCheckbox=function(ne){return!!this.viewScopedUserSettingsService&&!!this.everyItemIsRelationship(ne)},j.prototype.handleDontAskAgainCheckbox=function(ne){this.viewScopedUserSettingsService&&this.everyItemIsRelationship(ne)&&this.viewScopedUserSettingsService.set(l,!0)},j.prototype.everyItemIsRelationship=function(ne){return ne.every(function(Y){return"Relationship"===Y.objectType})},j.\u0275fac=function(Y){return new(Y||j)(h.\u0275\u0275inject(w.S),h.\u0275\u0275inject(r.n),h.\u0275\u0275inject(ie.x),h.\u0275\u0275inject(G.o),h.\u0275\u0275inject(ue.L),h.\u0275\u0275inject(I,8))},j.\u0275prov=h.\u0275\u0275defineInjectable({token:j,factory:j.\u0275fac}),j}()},34145:function(ge,R,o){o.d(R,{q:function(){return r}});var r=new(o(50423).InjectionToken)("ModelService")},9738:function(ge,R,o){o.d(R,{$x:function(){return I},W6:function(){return w},fc:function(){return h}});var v=o(50423),r=o(30794),w=new v.InjectionToken("ModelingSelectionService"),h=new v.InjectionToken("ModelingCheckingService"),I=function(){function F(){this.notifcationsuspended=!1,this.selectedItems=new Set,this.selectionChanged=new r.xQ}return F.prototype.suspendNotification=function(){this.notifcationsuspended=!0},F.prototype.resumeNotification=function(){this.notifcationsuspended=!1,this.notifySelectionChanged()},F.prototype.select=function(s,l){this.selectAll([s],l)},F.prototype.deselect=function(s){this.selectedItems.delete(s),this.notifySelectionChanged()},F.prototype.selectAll=function(s,l){l&&this.selectedItems.clear();for(var S=0,C=s;S<C.length;S++)this.selectedItems.add(C[S]);this.notifySelectionChanged()},F.prototype.clear=function(){this.selectedItems.clear(),this.notifySelectionChanged()},F.prototype.isSelected=function(s){return this.selectedItems.has(s)},Object.defineProperty(F.prototype,"selection",{get:function(){return Array.from(this.selectedItems)},enumerable:!1,configurable:!0}),F.prototype.notifySelectionChanged=function(){this.notifcationsuspended||this.selectionChanged.next(this.selection)},F.\u0275prov=v.\u0275\u0275defineInjectable({token:F,factory:F.\u0275fac=function(l){return new(l||F)}}),F}()},49346:function(ge,R,o){o.d(R,{TM:function(){return y},Yk:function(){return I},Yt:function(){return s},g4:function(){return S}});var v=o(41114),r="ClientSystemErrorBase",h=(v.cx[r]=(0,v.b1)(r),"PBIModelingCommonApplyChange"),I=v.cx[h]=(0,v.b1)(h),F="PBIModelingCommonDataModelUpdated",s=v.cx[F]=(0,v.b1)(F),l="PBIExecuteDataQueryCacheEventName",S=v.cx[l]=(0,v.b1)(l),C="PBISortByColumnDataQueryValidationEventName",y=v.cx[C]=(0,v.b1)(C)},66339:function(ge,R,o){o.d(R,{L:function(){return s}});var v=o(34145),r=o(49346),w=o(68082),h=o(98665),I=o(34763),F=o(50423),s=function(){function l(S,C,y){var g,M,b=this;this.dataModelService=S,this.modelService=C,this.telemetryService=y,this.subscriptions=new I.w,this.telemetryService&&this.modelService&&this.dataModelService&&(this.subscriptions.add(null===(g=this.dataModelService.modelChanged$)||void 0===g?void 0:g.subscribe(function(){b.logModelUpdated()})),this.subscriptions.add(null===(M=this.dataModelService.modelLoaded$)||void 0===M?void 0:M.subscribe(function(){b.logModelUpdated()})))}return l.prototype.initialize=function(){},l.prototype.ngOnDestroy=function(){this.subscriptions.unsubscribe()},l.prototype.logModelUpdated=function(){var S,C,y=this.dataModelService.getDataModel();this.telemetryService.root&&this.telemetryService.logEvent(r.Yt,{modelVersion:this.dataModelService.version,tables:null===(S=y?.tables)||void 0===S?void 0:S.length,relationships:null===(C=y?.relationships)||void 0===C?void 0:C.length})},l.prototype.logApplyChanges=function(S){var C,y;this.telemetryService.root&&this.telemetryService.logEvent(r.Yk,{change:S.join(", "),modelVersion:null===(y=null===(C=this.modelService)||void 0===C?void 0:C.model)||void 0===y?void 0:y.version})},l.\u0275fac=function(C){return new(C||l)(F.\u0275\u0275inject(w.n,8),F.\u0275\u0275inject(v.q,8),F.\u0275\u0275inject(h.y0,8))},l.\u0275prov=F.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac}),l}()},55375:function(ge,R,o){o.d(R,{Z:function(){return r}});var v=o(81337),r=function(){function w(){}return w.buildOKCancelDialog=function(h,I,F,s,l,S){return void 0===l&&(l=s.get("Yes")),void 0===S&&(S=s.get("Cancel_ButtonText")),h=(0,v.pi)((0,v.pi)({},h),{okButtonText:l,cancelButtonText:S}),F.openHostDialog({dialogName:I,componentName:"SimpleConfirmationDialogComponent",bindings:h,config:{width:"500px",panelClass:["mat-dialog-content-nonextra-space"],ariaDescribedBy:"simple-dialog-content-id"}})},w.buildOKCancelDialogWithList=function(h,I,F,s,l,S){var C=I.join(" ");return this.buildOKCancelDialog({title:h,message:void 0,additionalMessages:[[C,{segmentStr:"",lineBreak:!0},{segmentStr:"",lineBreak:!0},s]]},F,l,S)},w.buildCancelDialog=function(h,I,F,s,l,S,C,y){var b={dialogName:F,componentName:"SimpleDialogComponent",bindings:{titleIcon:C,title:h,message:I,okButtonText:S||l.get("Close")},config:(0,v.pi)({width:"500px",panelClass:["mat-dialog-content-nonextra-space","legacy-dialog"],ariaDescribedBy:"simple-dialog-content-id"},y)};return s.openHostDialog(b)},w}()},7779:function(ge,R,o){o.d(R,{r:function(){return F}});var v=o(23983),r=o(29834),w=o(93215),h=o(8538),I=o(34145),F=[v.eE,r.c,w.b,h.h,{provide:I.q,useExisting:w.b}]},93215:function(ge,R,o){o.d(R,{b:function(){return C}});var v=o(81337),r=o(32518),w=o(8590),h=o(35510),I=o(50423),F=o(11494),s=o(83008),l=o(26898),S=o(65181),C=function(){function y(b,g,M,x){var L=this;this.conceptualSchemaProxy=g,this.dataSourcesService=M,this.localizationService=x,this.modelUpdates=new h.X({schema:void 0,model:void 0,appliedChanges:void 0}),this.subscriptionManager=b.createChannelSubscriptionManager(),this.subscriptionManager.subscribe(w.CCe,function(ie,G){return L.update(G.result.changes)})}return y.prototype.update=function(b,g,M){return void 0===g&&(g=!0),void 0===M&&(M=!1),(0,v.mG)(this,void 0,void 0,function(){var x,L;return(0,v.Jh)(this,function(G){switch(G.label){case 0:return this.dataSourcesService.get()?(g||this.conceptualSchemaProxy.clearCache(),[4,this.conceptualSchemaProxy.get(this.dataSourcesService.get())]):[3,2];case 1:(x=G.sent())&&(L=new r.O(this.localizationService).createModel(x,M)),G.label=2;case 2:return this.modelUpdates.next({schema:x,model:L,appliedChanges:b}),[2]}})})},Object.defineProperty(y.prototype,"modelChange$",{get:function(){return this.modelUpdates.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"model",{get:function(){return this.modelUpdates.value.model},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"schema",{get:function(){return this.modelUpdates.value.schema},enumerable:!1,configurable:!0}),y.\u0275fac=function(g){return new(g||y)(I.\u0275\u0275inject(F.J),I.\u0275\u0275inject(l.i),I.\u0275\u0275inject(s.D),I.\u0275\u0275inject(S.o))},y.\u0275prov=I.\u0275\u0275defineInjectable({token:y,factory:y.\u0275fac}),y}()},8538:function(ge,R,o){o.d(R,{h:function(){return g}});var v=o(70863);function r(M){return{schema:M.schemaName,entity:(0,v.wb)(M)?M.name:(0,v.Om)(M)?M.table.name:(0,v.ez)(M)?M.hierarchy.table.name:void 0,hierarchy:(0,v.y3)(M)?M.name:(0,v.ez)(M)?M.hierarchy.name:void 0,hierarchyLevel:(0,v.ez)(M)?M.name:void 0,property:(0,v.wb)(M)||(0,v.y3)(M)||(0,v.ez)(M)||(0,v.Ov)(M)?void 0:M.name}}var I=o(8590),F=o(62458),s=o(9738),l=o(34763),S=o(50423),C=o(11494),y=o(39833),b=o(93215),g=function(){function M(x,L,ie,G){this.schemaItemActivationService=L,this.modelService=ie,this.modelingSelectionService=G,this.subscription=new l.w,this.subscriptionManager=x.createChannelSubscriptionManager()}return M.prototype.initialize=function(){var x=this;this.subscriptionManager.subscribe(I.$Bd,function(){return x.onSchemaItemActivationChanged()}),this.subscription.add(this.modelingSelectionService.selectionChanged.subscribe(function(L){return x.onSelectionChanged(L)}))},M.prototype.onSelectionChanged=function(x){if(0===x.length)this.schemaItemActivationService.clearActiveItem();else{var L=x[x.length-1];x.length>1&&this.modelingSelectionService.select(L,!0),this.schemaItemActivationService.setActiveItem(r(L))}},M.prototype.onSchemaItemActivationChanged=function(){if(!function(M,x){if(!x&&0===M.length)return!0;if(1===M.length&&x){var L=r(M[0]);return x.schema===L.schema&&x.entity===L.entity&&x.property===L.property&&x.hierarchy===L.hierarchy&&x.hierarchyLevel===L.hierarchyLevel}return!1}(this.modelingSelectionService.selection,this.schemaItemActivationService.getActiveItem())){var x=this.schemaItemActivationService.getActiveItem();if(x){var L=function(M,x){return x.hierarchyLevel?(0,v.xu)(M,x.schema,x.entity,x.hierarchy,x.hierarchyLevel):x.hierarchy?(0,v.ZG)(M,x.schema,x.entity,x.hierarchy):x.property?(0,v.Gz)(M,x.schema,x.entity,x.property)||(0,v.yo)(M,x.schema,x.entity,x.property):(0,v.AG)(M,x.entity)}(this.modelService.model,x);L?this.modelingSelectionService.select(L,!0):F.fF.assert(function(){return!!L},"onSchemaItemActivationChanged item not found in model")}else this.modelingSelectionService.clear()}},M.prototype.ngOnDestroy=function(){this.subscriptionManager.unsubscribeAll(),this.subscription.unsubscribe()},M.\u0275fac=function(L){return new(L||M)(S.\u0275\u0275inject(C.J),S.\u0275\u0275inject(y.WK),S.\u0275\u0275inject(b.b),S.\u0275\u0275inject(s.W6))},M.\u0275prov=S.\u0275\u0275defineInjectable({token:M,factory:M.\u0275fac}),M}()},58679:function(ge,R,o){o.d(R,{I:function(){return x}});var v=o(65005),r=o(62458),w=o(9795),h=o(59017),I=o(59973),F=o(14172),s=o(81905),l=o(83317),S=o(48787),C=o(50423),y=o(84354),b=function(){function L(ie){this.pbiDropdownService=ie,this.isOpen$=this.pbiDropdownService.select$("open");var G=this.pbiDropdownService.select$("dropdownItems"),ue=this.pbiDropdownService.select$("overlayRef"),he=G.pipe((0,I.h)(function(j){return!!j}),(0,F.U)(function(j){return r.fF.assert(function(){return 1===j.length},"Expected 1 FieldListComponent"),j.first})),q=he.pipe((0,s.w)(function(j){return j.onFirstRenderComplete}));(0,h.aj)([this.isOpen$,ue,he,q]).pipe((0,l.R)(this.pbiDropdownService.onDestroy$),(0,I.h)(function(j){var Y=j[1],ee=j[2];return j[0]&&!!Y?.overlayRef.overlayElement&&!!ee})).subscribe(function(j){j[2].focusSearchBox()})}return L.prototype.buttonKeydown=function(ie){var G=this;this.isOpen$.pipe((0,S.q)(1)).subscribe(function(ue){ue||(0,w.Wl)(ie.keyCode)&&(G.pbiDropdownService.toggleOpenState(),ie.preventDefault())})},L.\u0275fac=function(G){return new(G||L)(C.\u0275\u0275inject(y.S))},L.\u0275prov=C.\u0275\u0275defineInjectable({token:L,factory:L.\u0275fac}),L}(),g=o(26333),M=o(31343),x=function(){function L(ie,G){this.pbiDropdownService=ie,this.strategy=G}return L.prototype.ngAfterViewInit=function(){var ie=this;(0,g.x)([{strategy:this.strategy,dropdownItems:this.dropdownItems}],M.N).subscribe(function(G){ie.pbiDropdownService.updateState(G)})},L.\u0275fac=function(G){return new(G||L)(C.\u0275\u0275directiveInject(y.S),C.\u0275\u0275directiveInject(b))},L.\u0275dir=C.\u0275\u0275defineDirective({type:L,selectors:[["pbi-dropdown","dropdown-type","field-list"]],contentQueries:function(G,ue,he){var q;(1&G&&C.\u0275\u0275contentQuery(he,v.l,5),2&G)&&(C.\u0275\u0275queryRefresh(q=C.\u0275\u0275loadQuery())&&(ue.dropdownItems=q))},features:[C.\u0275\u0275ProvidersFeature([b])]}),L}()},65005:function(ge,R,o){o.d(R,{l:function(){return Se}});var v=o(81337),r=o(50423),w=o(48787),h=o(30794),I=o(12179),F=[],s=o(77476),l=o(68070),S=o(89237);function C(W,le){1&W&&r.\u0275\u0275element(0,"div",7)}function y(W,le){1&W&&(r.\u0275\u0275elementStart(0,"div",8),r.\u0275\u0275element(1,"div",9)(2,"div",10),r.\u0275\u0275elementEnd())}function b(W,le){1&W&&(r.\u0275\u0275elementStart(0,"div",11),r.\u0275\u0275element(1,"div",12),r.\u0275\u0275elementStart(2,"div",13),r.\u0275\u0275element(3,"div",14)(4,"div",15),r.\u0275\u0275elementEnd()())}function g(W,le){if(1&W&&(r.\u0275\u0275elementContainerStart(0,3),r.\u0275\u0275template(1,C,1,0,"div",4),r.\u0275\u0275template(2,y,3,0,"div",5),r.\u0275\u0275template(3,b,5,0,"div",6),r.\u0275\u0275elementContainerEnd()),2&W){var J=le.$implicit,X=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("ngSwitch",J),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngSwitchCase",X.largeBarType),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngSwitchCase",X.multipleBarType),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngSwitchCase",X.multipleSmallLargeType)}}function M(W,le){if(1&W&&(r.\u0275\u0275elementStart(0,"div",1),r.\u0275\u0275template(1,g,4,4,"ng-container",2),r.\u0275\u0275elementEnd()),2&W){var J=r.\u0275\u0275nextContext();r.\u0275\u0275property("ngStyle",J.barsStyle),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",J.barsProperties.bars)}}var he=function(){function W(){this.largeBarType=0,this.multipleBarType=1,this.multipleSmallLargeType=2}return W.prototype.ngOnChanges=function(){this.barsProperties&&(this.barsStyle={height:"".concat((this.barsProperties.height+8)*this.barsProperties.bars.length,"px")})},W.\u0275fac=function(J){return new(J||W)},W.\u0275cmp=r.\u0275\u0275defineComponent({type:W,selectors:[["shimmering-bars"]],inputs:{barsProperties:"barsProperties"},features:[r.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[["class","bars",3,"ngStyle",4,"ngIf"],[1,"bars",3,"ngStyle"],[3,"ngSwitch",4,"ngFor","ngForOf"],[3,"ngSwitch"],["class","largerLoadingBar animate",4,"ngSwitchCase"],["class","multipleBars",4,"ngSwitchCase"],["class","multipleSmallLarge",4,"ngSwitchCase"],[1,"largerLoadingBar","animate"],[1,"multipleBars"],[1,"miniLoadingBar","animate"],[1,"smallerLoadingBar","animate"],[1,"multipleSmallLarge"],[1,"shimmerBox","animate"],[1,"smallLargeBarContainer"],[1,"upperLoadingBar","animate"],[1,"lowerLoadingBar","animate"]],template:function(J,X){1&J&&r.\u0275\u0275template(0,M,2,2,"div",0),2&J&&r.\u0275\u0275property("ngIf",X.barsProperties)},dependencies:[s.NgForOf,s.NgIf,s.NgStyle,s.NgSwitch,s.NgSwitchCase],styles:['[_nghost-%COMP%]{--shimmer-background-color: var(--gray-20);--shimmer-animate1: var(--gray-30);--shimmer-animate2: var(--gray-50)}[data-legacy-theming=false]   [_nghost-%COMP%]{--shimmer-background-color: var(--colorNeutralBackground3);--shimmer-animate1: var(--colorNeutralBackground3Hover);--shimmer-animate2: var(--colorNeutralBackground3Pressed)}.bars[_ngcontent-%COMP%]{display:flex;flex-direction:column}.largerLoadingBar[_ngcontent-%COMP%]{border-radius:2px;flex-grow:1;background:var(--shimmer-background-color)}html:not([dir="rtl"])[_nghost-%COMP%]   .largerLoadingBar[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .largerLoadingBar[_ngcontent-%COMP%]{margin:4px 8px}html[dir="rtl"][_nghost-%COMP%]   .largerLoadingBar[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .largerLoadingBar[_ngcontent-%COMP%]{margin:4px 8px}.multipleBars[_ngcontent-%COMP%]{display:flex;align-items:center;flex-grow:1}html:not([dir="rtl"])[_nghost-%COMP%]   .multipleBars[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .multipleBars[_ngcontent-%COMP%]{margin:4px 8px}html[dir="rtl"][_nghost-%COMP%]   .multipleBars[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .multipleBars[_ngcontent-%COMP%]{margin:4px 8px}.miniLoadingBar[_ngcontent-%COMP%]{border-radius:2px;height:60%;width:10%;background:var(--shimmer-background-color)}html:not([dir="rtl"])[_nghost-%COMP%]   .miniLoadingBar[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .miniLoadingBar[_ngcontent-%COMP%]{margin-right:4px}html[dir="rtl"][_nghost-%COMP%]   .miniLoadingBar[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .miniLoadingBar[_ngcontent-%COMP%]{margin-left:4px}.smallerLoadingBar[_ngcontent-%COMP%]{border-radius:2px;height:80%;width:100%;background:var(--shimmer-background-color)}html:not([dir="rtl"])[_nghost-%COMP%]   .smallerLoadingBar[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .smallerLoadingBar[_ngcontent-%COMP%]{margin-left:4px}html[dir="rtl"][_nghost-%COMP%]   .smallerLoadingBar[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .smallerLoadingBar[_ngcontent-%COMP%]{margin-right:4px}.multipleSmallLarge[_ngcontent-%COMP%]{display:flex;flex-grow:1;padding:10px 9px}html:not([dir="rtl"])[_nghost-%COMP%]   .multipleSmallLarge[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .multipleSmallLarge[_ngcontent-%COMP%]{margin:4px 8px}html[dir="rtl"][_nghost-%COMP%]   .multipleSmallLarge[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .multipleSmallLarge[_ngcontent-%COMP%]{margin:4px 8px}.upperLoadingBar[_ngcontent-%COMP%]{border-radius:2px;height:65%;width:49%;background:var(--shimmer-background-color)}html:not([dir="rtl"])[_nghost-%COMP%]   .upperLoadingBar[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .upperLoadingBar[_ngcontent-%COMP%]{margin:0 4px 11px 0}html[dir="rtl"][_nghost-%COMP%]   .upperLoadingBar[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .upperLoadingBar[_ngcontent-%COMP%]{margin:0 0 11px 4px}.lowerLoadingBar[_ngcontent-%COMP%]{border-radius:2px;height:65%;width:100%;background:var(--shimmer-background-color)}.shimmerBox[_ngcontent-%COMP%]{background:var(--shimmer-background-color);border-radius:2px;height:32px;width:32px}.smallLargeBarContainer[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;max-width:167px}html:not([dir="rtl"])[_nghost-%COMP%]   .smallLargeBarContainer[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .smallLargeBarContainer[_ngcontent-%COMP%]{margin:4px 0 2.42px 13px}html[dir="rtl"][_nghost-%COMP%]   .smallLargeBarContainer[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .smallLargeBarContainer[_ngcontent-%COMP%]{margin:4px 13px 2.42px 0}.animate[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_shimmer 5s infinite linear;background:linear-gradient(270deg,var(--shimmer-animate1) 0%,var(--shimmer-animate2) 50%,var(--shimmer-animate1) 100%);background-size:250% 100%}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:250% 0}to{background-position:-250% 0}}'],changeDetection:0}),W}(),q=o(85102),j=["pbiTree"];function ne(W,le){if(1&W){var J=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"tri-search-box",5),r.\u0275\u0275listener("value",function(_e){r.\u0275\u0275restoreView(J);var Pe=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(Pe.search$.next(_e))}),r.\u0275\u0275pipe(1,"localize"),r.\u0275\u0275pipe(2,"localize"),r.\u0275\u0275elementEnd()}if(2&W){var X=r.\u0275\u0275nextContext();r.\u0275\u0275property("currentInputValue",X.searchText||"")("placeholderText",r.\u0275\u0275pipeBind1(2,8,"SearchBox_Text"))("fluentTheme",!0)("compact",!0)("fullWidth",!0),r.\u0275\u0275attribute("aria-label",r.\u0275\u0275pipeBind1(1,6,"SearchBox_Text"))}}function Y(W,le){if(1&W){var J=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"pbi-search-box")(1,"input",6),r.\u0275\u0275listener("input",function(_e){r.\u0275\u0275restoreView(J);var Pe=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(Pe.search$.next(_e.target.value))}),r.\u0275\u0275pipe(2,"localize"),r.\u0275\u0275pipe(3,"localize"),r.\u0275\u0275elementEnd()()}if(2&W){var X=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("value",X.searchText||"")("placeholder",r.\u0275\u0275pipeBind1(3,5,"SearchBox_Text")),r.\u0275\u0275attribute("aria-label",r.\u0275\u0275pipeBind1(2,3,"SearchBox_Text"))}}function ee(W,le){if(1&W&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275element(1,"shimmering-bars",7),r.\u0275\u0275elementContainerEnd()),2&W){var J=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("barsProperties",J.shimmeringBars)}}function re(W,le){if(1&W){var J=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"pbi-tree",12,13),r.\u0275\u0275listener("onNodeClick",function(_e){r.\u0275\u0275restoreView(J);var Pe=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(Pe.onNodeClick.emit(_e))})("onNodeCheck",function(_e){r.\u0275\u0275restoreView(J);var Pe=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(Pe.onNodeCheck.emit(_e))})("onNodeExpansionToggle",function(_e){r.\u0275\u0275restoreView(J);var Pe=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(Pe.onNodeExpansionToggle.emit(_e))})("onFirstRender",function(){r.\u0275\u0275restoreView(J);var _e=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(_e.onFirstRender())}),r.\u0275\u0275pipe(2,"async"),r.\u0275\u0275elementEnd()}if(2&W){var X=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("tree",X.fieldListTree)("search",r.\u0275\u0275pipeBind1(2,5,X.search$))("hasHighlights",X.hasHighlights)("checkMode",X.checkMode)("options",X._options)}}function be(W,le){1&W&&r.\u0275\u0275projection(0,2)}function se(W,le){if(1&W&&(r.\u0275\u0275elementStart(0,"div",8),r.\u0275\u0275element(1,"div",9),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(2,re,3,7,"pbi-tree",10),r.\u0275\u0275template(3,be,1,0,"ng-template",null,11,r.\u0275\u0275templateRefExtractor)),2&W){var J=r.\u0275\u0275reference(4),X=r.\u0275\u0275nextContext();r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",X.fieldListTree)("ngIfElse",J)}}var ce=[[["",8,"pbi-field-list-perspective-header"]],[["",8,"pbi-field-list-header"]],[["",8,"pbi-field-list-watermark"]]],Me=[".pbi-field-list-perspective-header",".pbi-field-list-header",".pbi-field-list-watermark"],me={height:24,bars:[0,1,1,0,0]},Se=function(){function W(){this.hasHighlights=!1,this.loading=!1,this.shimmeringBars=me,this.defaultOptions={},this._options=this.defaultOptions,this.onNodeExpansionToggle=new r.EventEmitter,this.onNodeClick=new r.EventEmitter,this.onNodeCheck=new r.EventEmitter,this.onFirstRenderComplete=new r.EventEmitter,this.handleFieldListTreeHeightDiff=new r.EventEmitter,this.search$=new h.xQ}return Object.defineProperty(W.prototype,"options",{set:function(J){this._options=(0,v.pi)((0,v.pi)({},this.defaultOptions),J)},enumerable:!1,configurable:!0}),W.prototype.ngOnInit=function(){var le=this;this.focusSearchBoxOnFirstRenderComplete&&this.onFirstRenderComplete.pipe((0,w.q)(1)).subscribe(function(){return le.focusSearchBox()})},W.prototype.onFirstRender=function(){var le=this.getFieldListTreeHeightDiff();this.handleFieldListTreeHeightDiff.emit(le),this.scrollSelectedItemIntoViewOnInit&&this.pbiTree.scrollToFirstSelectedNode(),this.onFirstRenderComplete.emit()},W.prototype.focusSearchBox=function(){$(".field-list-search-container input").trigger("focus")},W.prototype.getFieldListTreeHeightDiff=function(){return this.pbiTree.getTreeHeight()+2-this.pbiTreeElementRef.nativeElement.getBoundingClientRect().height},W.\u0275fac=function(J){return new(J||W)},W.\u0275cmp=r.\u0275\u0275defineComponent({type:W,selectors:[["pbi-field-list"]],viewQuery:function(J,X){if(1&J&&(r.\u0275\u0275viewQuery(I.u,5),r.\u0275\u0275viewQuery(j,5,r.ElementRef)),2&J){var Oe=void 0;r.\u0275\u0275queryRefresh(Oe=r.\u0275\u0275loadQuery())&&(X.pbiTree=Oe.first),r.\u0275\u0275queryRefresh(Oe=r.\u0275\u0275loadQuery())&&(X.pbiTreeElementRef=Oe.first)}},inputs:{fieldListTree:"fieldListTree",scrollSelectedItemIntoViewOnInit:"scrollSelectedItemIntoViewOnInit",checkMode:"checkMode",hasHighlights:"hasHighlights",loading:"loading",searchText:"searchText",focusSearchBoxOnFirstRenderComplete:"focusSearchBoxOnFirstRenderComplete",fluent:"fluent",options:"options"},outputs:{onNodeExpansionToggle:"onNodeExpansionToggle",onNodeClick:"onNodeClick",onNodeCheck:"onNodeCheck",onFirstRenderComplete:"onFirstRenderComplete",handleFieldListTreeHeightDiff:"handleFieldListTreeHeightDiff"},features:[r.\u0275\u0275ProvidersFeature(F)],ngContentSelectors:Me,decls:8,vars:4,consts:[["data-tutorial-target","search-box",1,"field-list-search-container"],["data-testid","search-bar-input",3,"currentInputValue","placeholderText","fluentTheme","compact","fullWidth","value",4,"ngIf"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["loaded",""],["data-testid","search-bar-input",3,"currentInputValue","placeholderText","fluentTheme","compact","fullWidth","value"],["pbiSearchInput","","data-testid","search-bar-input",1,"pbi-focus-outline",3,"value","placeholder","input"],[3,"barsProperties"],[1,"tutorial-target-container"],["data-tutorial-target","data-tree"],["data-testid","data-tree",3,"tree","search","hasHighlights","checkMode","options","onNodeClick","onNodeCheck","onNodeExpansionToggle","onFirstRender",4,"ngIf","ngIfElse"],["watermark",""],["data-testid","data-tree",3,"tree","search","hasHighlights","checkMode","options","onNodeClick","onNodeCheck","onNodeExpansionToggle","onFirstRender"],["pbiTree",""]],template:function(J,X){if(1&J&&(r.\u0275\u0275projectionDef(ce),r.\u0275\u0275elementStart(0,"div",0),r.\u0275\u0275template(1,ne,3,10,"tri-search-box",1),r.\u0275\u0275template(2,Y,4,7,"pbi-search-box",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275projection(3),r.\u0275\u0275projection(4,1),r.\u0275\u0275template(5,ee,2,1,"ng-container",3),r.\u0275\u0275template(6,se,5,2,"ng-template",null,4,r.\u0275\u0275templateRefExtractor)),2&J){var Oe=r.\u0275\u0275reference(7);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",X.fluent),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!X.fluent),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngIf",X.loading)("ngIfElse",Oe)}},dependencies:[s.NgIf,l.a,l.p,S.U,I.u,he,s.AsyncPipe,q.F],styles:["[_nghost-%COMP%]{height:100%;display:flex;flex-direction:column}pbi-tree[_ngcontent-%COMP%]{margin-top:9px;height:100%;display:block;overflow:hidden}.tutorial-target-container[_ngcontent-%COMP%]{position:relative;visibility:hidden;height:0;width:0}.tutorial-target-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;top:20px;visibility:hidden;height:0;width:0}"],changeDetection:0}),W}()},45074:function(ge,R,o){o.d(R,{bP:function(){return S},ug:function(){return F}});var v=o(4437),r=o(50423),w=[[["","pbiLabel",""]],[["","pbiInput",""]],[["","pbiInputButton",""]],[["","pbiInputError",""]]],h=["[pbiLabel]","[pbiInput]","[pbiInputButton]","[pbiInputError]"],I=0,F=function(){function C(y,b){this.elementRef=y,this.formField=b}return C.\u0275fac=function(b){return new(b||C)(r.\u0275\u0275directiveInject(r.ElementRef),r.\u0275\u0275directiveInject((0,r.forwardRef)(function(){return S})))},C.\u0275dir=r.\u0275\u0275defineDirective({type:C,selectors:[["","pbiInput",""]],hostAttrs:["autocomplete","off"],hostVars:3,hostBindings:function(b,g){2&b&&r.\u0275\u0275attribute("aria-required",g.required||null)("aria-describedby",null==g.formField.error?null:g.formField.error.id)("aria-invalid",g.formField.error?"true":"false")},inputs:{required:"required"}}),C}(),s=function(){function C(y,b){this.elementRef=y,this.formField=b}return C.\u0275fac=function(b){return new(b||C)(r.\u0275\u0275directiveInject(r.ElementRef),r.\u0275\u0275directiveInject((0,r.forwardRef)(function(){return S})))},C.\u0275dir=r.\u0275\u0275defineDirective({type:C,selectors:[["","pbiLabel",""]],hostVars:2,hostBindings:function(b,g){2&b&&r.\u0275\u0275classProp("pbi-label-required",null!=g.formField.input.required)}}),C}(),l=function(){function C(){this.id="pbi-input-error-id-".concat(I++)}return C.\u0275fac=function(b){return new(b||C)},C.\u0275dir=r.\u0275\u0275defineDirective({type:C,selectors:[["","pbiInputError",""]],hostVars:3,hostBindings:function(b,g){2&b&&(r.\u0275\u0275attribute("id",g.id),r.\u0275\u0275classProp("pbi-input-error",!0))}}),C}(),S=function(){function C(y){this.renderer=y,this._compact=!1}return Object.defineProperty(C.prototype,"compact",{get:function(){return this._compact},set:function(b){this._compact=(0,v.Ig)(b)},enumerable:!1,configurable:!0}),C.prototype.ngAfterContentInit=function(){if(this.input&&this.label){var y="pbi-input-id-".concat(I++);this.renderer.setAttribute(this.input.elementRef.nativeElement,"id",y),this.renderer.setAttribute(this.label.elementRef.nativeElement,"for",y)}},C.\u0275fac=function(b){return new(b||C)(r.\u0275\u0275directiveInject(r.Renderer2))},C.\u0275cmp=r.\u0275\u0275defineComponent({type:C,selectors:[["pbi-form-field"]],contentQueries:function(b,g,M){if(1&b&&(r.\u0275\u0275contentQuery(M,F,5),r.\u0275\u0275contentQuery(M,s,5),r.\u0275\u0275contentQuery(M,l,5)),2&b){var x=void 0;r.\u0275\u0275queryRefresh(x=r.\u0275\u0275loadQuery())&&(g.input=x.first),r.\u0275\u0275queryRefresh(x=r.\u0275\u0275loadQuery())&&(g.label=x.first),r.\u0275\u0275queryRefresh(x=r.\u0275\u0275loadQuery())&&(g.error=x.first)}},hostVars:2,hostBindings:function(b,g){2&b&&r.\u0275\u0275classProp("pbi-compact-form-field",g.compact)},inputs:{compact:"compact"},ngContentSelectors:h,decls:5,vars:0,consts:[[1,"controls"]],template:function(b,g){1&b&&(r.\u0275\u0275projectionDef(w),r.\u0275\u0275projection(0),r.\u0275\u0275elementStart(1,"div",0),r.\u0275\u0275projection(2,1),r.\u0275\u0275projection(3,2),r.\u0275\u0275elementEnd(),r.\u0275\u0275projection(4,3))},styles:['[_nghost-%COMP%]{display:flex;flex-direction:column;--input-border-color: var(--gray-110);--input-foreground: var(--gray-140);--disabled-input-background: var(--gray-20);--disabled-input-border-color: var(--gray-60);--disabled-input-foreground: var(--gray-90);--focused-input-border-color: var(--gray-130);--focused-input-foreground: var(--gray-180);--error-color: var(--fluent-theme-error-dark-color)}[data-legacy-theming=false]   [_nghost-%COMP%]{--input-border-color: var(--colorNeutralStroke1);--input-foreground: var(--colorNeutralForeground1);--disabled-input-background: var(--colorNeutralBackgroundDisabled);--disabled-input-border-color: var(--colorNeutralStrokeDisabled);--disabled-input-foreground: var(--colorNeutralForegroundDisabled);--focused-input-border-color: var(--colorNeutralStrokeFocus2);--focused-input-foreground: var(--colorNeutralForeground1);--error-color: var(--fluent-theme-error-dark-color)}.pbi-form-field-inline[_nghost-%COMP%] {flex-direction:row;align-items:center;justify-content:space-between}.pbi-form-field-inline[_nghost-%COMP%]  label{margin:0 8px 0 0}.pbi-form-field-inline[_nghost-%COMP%]  .controls{flex-grow:1;justify-content:flex-end}.pbi-compact-form-field[_nghost-%COMP%]  label{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-regular, 400)}.pbi-compact-form-field[_nghost-%COMP%]  input{height:28px;padding:4px 6px}.pbi-compact-form-field[_nghost-%COMP%]  textarea{padding:4px 6px}[_nghost-%COMP%]  *{box-sizing:border-box}[_nghost-%COMP%]  label{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-semi-bold, 600);margin:0 0 4px}[_nghost-%COMP%]  label.pbi-label-required:after{content:"*";margin-left:4px;color:var(--error-color)}[_nghost-%COMP%]  .controls{display:flex}[_nghost-%COMP%]  .controls>*:not(:last-child){margin-right:8px}[_nghost-%COMP%]  input{height:32px}[_nghost-%COMP%]  textarea{resize:none}[_nghost-%COMP%]  input, [_nghost-%COMP%]  textarea{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);width:100%;border-radius:2px;border:1px solid var(--input-border-color);color:var(--input-foreground);outline:none;padding:8px 6px}[_nghost-%COMP%]  input[disabled], [_nghost-%COMP%]  textarea[disabled], [_nghost-%COMP%]  input[aria-disabled=true], [_nghost-%COMP%]  textarea[aria-disabled=true]{background-color:var(--disabled-input-background);border-color:var(--disabled-input-border-color);color:var(--disabled-input-foreground)}[_nghost-%COMP%]  input:focus, [_nghost-%COMP%]  textarea:focus{border-color:var(--focused-input-border-color);color:var(--focused-input-foreground)}[_nghost-%COMP%]  [pbiInput][aria-invalid=true]{border-color:var(--error-color)}[_nghost-%COMP%]  .pbi-input-error{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-regular, 400);margin:4px 0 0;color:var(--error-color)}'],changeDetection:0}),C}()},14525:function(ge,R,o){o.d(R,{g:function(){return r}});var v=o(50423),r=function(){function w(){}return w.\u0275fac=function(I){return new(I||w)},w.\u0275mod=v.\u0275\u0275defineNgModule({type:w}),w.\u0275inj=v.\u0275\u0275defineInjector({}),w}()},68070:function(ge,R,o){o.d(R,{a:function(){return ie},p:function(){return L}});var v=o(81337),r=o(50423),w=o(73221),h=o(35510),I=o(59017),F=o(63057),s=o(59787),l=o(58315),S=o(14172),C=o(77526),y=o(77476),b=function(){return{tooltipLocalizeTitle:"Clear",tooltipShowOnFocus:!0}};function g(G,ue){if(1&G){var he=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",2),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(he);var j=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(j.onCancelButtonClick())}),r.\u0275\u0275elementEnd()}2&G&&r.\u0275\u0275property("pbi-tooltip",r.\u0275\u0275pureFunction0(1,b))}var M=[[["input"]]],x=["input"],L=function(){function G(){}return G.\u0275fac=function(he){return new(he||G)},G.\u0275dir=r.\u0275\u0275defineDirective({type:G,selectors:[["","pbiSearchInput",""]]}),G}(),ie=function(G){function ue(he){var q=G.call(this)||this;return q.changeDetectorRef=he,q.searchCleared=new r.EventEmitter,q.onSearchTextChanged=new r.EventEmitter,q.emptyValue$=new h.X(void 0),q.hasInput=!1,q}return(0,v.ZT)(ue,G),ue.prototype.onCancelButtonClick=function(){this.clearSearchText(),this.input.nativeElement.focus()},ue.prototype.clearSearchText=function(){this.input.nativeElement.value="",this.hasInput=!1,this.changeDetectorRef.markForCheck(),this.emptyValue$.next(),this.searchCleared.emit()},ue.prototype.ngAfterViewInit=function(){var he=this;this.lifecycleSubscriptions.add((0,I.aj)([(0,F.T)((0,s.R)(this.input.nativeElement,"keyup"),(0,s.R)(this.input.nativeElement,"keydown")).pipe((0,l.b)(250)),this.emptyValue$]).pipe((0,S.U)(function(){return he.input.nativeElement.value}),(0,C.x)()).subscribe(function(q){return he.onSearchTextChanged.emit(q)})),setTimeout(function(){return he.onInputChanged(he.input.nativeElement.value)},0)},ue.prototype.onInputChanged=function(he){this.hasInput!==!!he&&(this.hasInput=!!he,this.changeDetectorRef.markForCheck())},ue.\u0275fac=function(q){return new(q||ue)(r.\u0275\u0275directiveInject(r.ChangeDetectorRef))},ue.\u0275cmp=r.\u0275\u0275defineComponent({type:ue,selectors:[["pbi-search-box"]],contentQueries:function(q,j,ne){var Y;(1&q&&r.\u0275\u0275contentQuery(ne,L,5,r.ElementRef),2&q)&&(r.\u0275\u0275queryRefresh(Y=r.\u0275\u0275loadQuery())&&(j.input=Y.first))},outputs:{searchCleared:"searchCleared",onSearchTextChanged:"onSearchTextChanged"},features:[r.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:x,decls:3,vars:1,consts:[[1,"pbi-search-box",3,"input"],["class","clearIcon pbi-borderless-button glyphicon pbi-glyph-clear glyph-mini searchbox-clear-icon",3,"pbi-tooltip","click",4,"ngIf"],[1,"clearIcon","pbi-borderless-button","glyphicon","pbi-glyph-clear","glyph-mini","searchbox-clear-icon",3,"pbi-tooltip","click"]],template:function(q,j){1&q&&(r.\u0275\u0275projectionDef(M),r.\u0275\u0275elementStart(0,"div",0),r.\u0275\u0275listener("input",function(Y){return j.onInputChanged(Y.target.value)}),r.\u0275\u0275projection(1),r.\u0275\u0275template(2,g,1,2,"button",1),r.\u0275\u0275elementEnd()),2&q&&(r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",j.hasInput))},dependencies:[y.NgIf],styles:['.pbi-search-box{--searchBox-colorEditLabelBorder: var(--gray-120);--searchBox-colorEditLabelBorderHover: var(--gray-160);--searchBox-colorEditLabelForeground: var(--gray-130);--searchBox-colorEditLabelPlaceholderForeground: var(--gray-140);--searchBox-colorEditLabelBackground: auto;--searchBox-colorEditLabelSelectedForeground: var(--text-primary-content-color);--searchBox-colorEditLabelSelectedBackground: var(--fluent-theme-primary-color)}[data-legacy-theming=false] .pbi-search-box{--searchBox-colorEditLabelBorder: var(--colorNeutralStroke1);--searchBox-colorEditLabelBorderHover: var(--colorNeutralStroke1);--searchBox-colorEditLabelForeground: var(--colorNeutralForeground1);--searchBox-colorEditLabelPlaceholderForeground: auto;--searchBox-colorEditLabelBackground: var(--colorNeutralBackground1);--searchBox-colorEditLabelSelectedForeground: var(--colorNeutralForegroundOnBrand);--searchBox-colorEditLabelSelectedBackground: var(--colorBrandBackground)}.pbi-search-box{display:block;width:100%;position:relative}.pbi-search-box:before{content:"\\e721"}.pbi-search-box:before{color:var(--searchBox-colorEditLabelForeground);display:inline-block;font-family:PowrMDL2;font-size:14px;position:absolute;top:6px;left:8px}.pbi-search-box input{padding:3px 28px;border-radius:2px;border:1px solid var(--searchBox-colorEditLabelBorder);color:var(--searchBox-colorEditLabelForeground);background-color:var(--searchBox-colorEditLabelBackground);outline:none;box-sizing:border-box;font-size:14px;width:100%}.pbi-search-box input:hover,.pbi-search-box input:focus{border-color:var(--searchBox-colorEditLabelBorderHover)}.pbi-search-box input::placeholder{color:var(--searchBox-colorEditLabelPlaceholderForeground)}.pbi-search-box input::selection{background:var(--searchBox-colorEditLabelSelectedBackground);color:var(--searchBox-colorEditLabelSelectedForeground)}.pbi-search-box .pbi-glyph-clear{background-color:transparent}.pbi-search-box .searchbox-clear-icon{color:var(--searchBox-colorEditLabelForeground);position:absolute;right:8px;top:7px;border:0px;padding:0}\n'],encapsulation:2,changeDetection:0}),ue}(w.w)}}]);