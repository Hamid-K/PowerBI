"use strict";(self.webpackChunkdesktopDialogHost=self.webpackChunkdesktopDialogHost||[]).push([["imageVisual"],{14021:function(v,m,a){a.r(m),a.d(m,{ImageVisual:function(){return y}});var h=a(83479),u=a(48966),p=a(59107),r=a(56578),f=a(38078),y=function(){function t(){this.scalingType=u.C.normal}return t.prototype.init=function(i){this.element=i.element,this.hostServices=i.host,this.featureSwitches=i.featureSwitches},t.prototype.enumerateObjectInstances=function(i){return"imageScaling"===i.objectName?this.enumerateImageScaling():null},t.prototype.getFormattingModel=function(){var i=this;return new r.Nq(function(){return i.getStyleCard()},function(){return i.getVisualLinkPlaceholder()}).build()},t.prototype.getStyleCard=function(){var s,i=this,l=h._g.imageScaling;return new r.CQ(new r.lg("style"),null!==(s=this.featureSwitches)&&void 0!==s&&s.onObject?"Visual_ImageStyle":"Style",[l.imageScalingType],function(g){return i.hostServices.getLocalizedString(g)}).addGroup("default",function(o){o.addSimpleSlice("scaling",new r.uY({descriptor:l.imageScalingType,value:i.scalingType}).build())}).build()},t.prototype.getVisualLinkPlaceholder=function(){return(0,r.UH)("actions")},t.prototype.enumerateImageScaling=function(){return[{selector:null,objectName:"imageScaling",properties:{imageScalingType:this.scalingType}}]},t.prototype.onViewModeChanged=function(i){this.updateVisualLinkProps()},t.prototype.update=function(i){var s=this,l=i.dataViews;if(l&&0!==l.length){var n=l[0].metadata.objects;if(n&&n.general){var e=this.imageBackgroundElement;e||((e=$("<div class='imageBackground' ></div>")).click(function(c){var d={type:0,visualObjects:[{objectName:"image",selectorsByColumn:{}}],isCtrlOrMetaKey:p.M.isCtrlOrMeta(c),isShiftKey:c.shiftKey,position:{x:c.clientX,y:c.clientY}};s.hostServices.onSelecting(d),1===d.action&&c.stopPropagation()}),this.imageBackgroundElement=e,this.imageBackgroundElement.appendTo(this.element));var o=i.viewport;e.css("height",o.height),e.css("width",o.width),this.scalingType=n.imageScaling?n.imageScaling.imageScalingType.toString():u.C.normal;var g=n.general.imageUrl;f.b$.isLocalUrl(g)&&e.css("backgroundImage","url("+g+")"),e.css("background-size",this.scalingType===u.C.fit?"100% 100%":this.scalingType===u.C.fill?"cover":"contain"),this.updateVisualLinkProps()}}},t.prototype.updateVisualLinkProps=function(){var i=this.hostServices.getVisualLinkProperties();i&&this.imageBackgroundElement&&this.imageBackgroundElement.css("cursor",i.hasVisualLink?"pointer":"inherit")},t}()}}]);