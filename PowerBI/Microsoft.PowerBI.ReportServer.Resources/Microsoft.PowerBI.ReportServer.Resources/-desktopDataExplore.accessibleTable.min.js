"use strict";(self.webpackChunkdesktopDataExplore=self.webpackChunkdesktopDataExplore||[]).push([["accessibleTable"],{35572:function(C,y,d){d.r(y),d.d(y,{AccessibleTable:function(){return R}});var g=d(38078),S=d(72489);function H(r,s,n){var l,t,e={root:null,leaves:[]};if(null!=n?(l=r.rows.root,t=r.rows.levels):(l=r.columns.root,t=r.columns.levels),l&&l.children){var u={index:0,indexInSiblings:0,parent:null,span:0,levelsSpan:1,id:null==n?"c":"r",text:"",level:-1,children:void 0};return m(l,u,e.leaves,t,s,r.valueSources,n),e.root=u,e}}function m(r,s,n,e,l,t,a){e[r.level]?s.text=function(r,s,n){var e=[],l=s.sources[r.levelSourceIndex||0];if(r.isSubtotal&&!l.isMeasure)return n.getLocalizedString("TableTotalLabel");if(r.levelValues)for(var t=0,a=r.levelValues;t<a.length;t++){var u=a[t];e.push(u.value?u.value.toString():n.getLocalizedString("NullValue"))}else e.push(l.displayName);return e.join(", ")}(r,e[r.level],l):r.level>-1&&(s.id=null);var u=e.length-1,o=null,p=r.children;if(_.isEmpty(p)){if(r.level<u&&(s.levelsSpan=u-r.level+1),s.span=1,n.push(s),r.values&&null!=a){s.values=[];for(var i=0;i<a;i++){var v=r.values[i];s.values.push(v&&null!=v.value?(0,S.WU)(v.value,t[v.valueSourceIndex||0].format):"&nbsp;")}}}else{s.levelsSpan=_.head(p).level-r.level,s.children=[],i=0;for(var b=p.length;i<b;i++){var f=p[i],c={index:0,span:0,levelsSpan:1,text:"",id:s.id+"-"+i,level:f.level,children:void 0,parent:s,indexInSiblings:i};c.index=o?o.index+o.span:s.index,o=c,m(f,c,n,e,l,t,a),s.span+=c.span,s.children.push(c)}}}var h="colHeader",x=function(){function r(s,n){this.element=s,this.hostServices=n}return r.prototype.render=function(s,n){var e=function(r,s){var n=H(r,s);return{columns:n,rows:H(r,s,n.root.span)}}(s,this.hostServices),l=[];l.push('<div class="accessibleTable-container" style="width: '.concat(n.width,"px; height: ").concat(n.height,'px">')),l.push('<table class="accessibleTable" tabindex="0">'),l.push(this.renderColumnHeaders(s,e)),l.push(this.renderRowHeaders(e)),l.push("</table>"),l.push("</div>"),this.element.innerHTML=l.join("");var t=$(this.element).find("table");this.hostServices.requestFocus(t[0])},r.prototype.clear=function(){this.element.innerHTML=""},r.prototype.renderColumnHeaders=function(s,n){for(var e=[],l=s.rows.levels.length,t=s.columns.levels.length,a=0;a<t;a++)if((u=e[a]=[]).push("<tr>"),0===l)u.push('<td class="'.concat(h,'">&nbsp;</td>'));else if(a<t-1){for(var o=0;o<l-1;o++)u.push('<td class="'.concat(h,'">&nbsp;</td>'));u.push('<th class="'.concat(h,' rowLeaf">')),u.push(r.getHierachyLevelDisplayName(s.columns.levels[a])),u.push("</th>")}else for(var p=0;p<l;p++)u.push('<th class="'.concat(h," columnLeaf")),p===l-1&&u.push(" rowLeaf"),u.push('">'),u.push(r.getHierachyLevelDisplayName(s.rows.levels[p])),u.push("</th>");var i=n.columns.root.children;if(i&&i.length>0){o=0;for(var b=i.length;o<b;o++)this.renderColumnHeader(e,i[o])}for(a=0;a<t;a++)e[a].push("</tr>");for(var f="",c=0,v=e;c<v.length;c++){var u;f+=(u=v[c]).join("")}return f},r.prototype.renderColumnHeader=function(s,n){var e=s[n.level],l=n.children;if(e.push('<th  id="'.concat(n.id,'" class="').concat(h)),n.children||e.push(" columnLeaf"),e.push('"'),n.span>1&&e.push(" colSpan="+n.span),n.levelsSpan>1&&e.push(" rowSpan="+n.levelsSpan),e.push(">"+(0,g.HZ)(n.text)+"</th>"),l)for(var t=0,a=l;t<a.length;t++)this.renderColumnHeader(s,a[t])},r.prototype.renderRowHeaders=function(s){var n=[],e=s.rows.root.children;if(e&&e.length>0)for(var l=0,t=e;l<t.length;l++){var a=t[l];n.push("<tr>"),n.push(this.renderRowHeader(a,s.columns.leaves)),n.push("</tr>")}return n.join("")},r.prototype.renderRowHeader=function(s,n){var e=[];if(e.push('<th id="'.concat(s.id,'" rowSpan="').concat(s.span,'"')),s.levelsSpan>1&&e.push(' colSpan = "'.concat(s.levelsSpan,'"')),e.push(' class="'.concat("rowHeader")),s.children||e.push(" rowLeaf"),e.push('">'),e.push((0,g.HZ)(s.text)),e.push("</th>"),s.children)for(var l=0,t=s.children;l<t.length;l++){var a=t[l];a===s.children[0]||e.push("</tr><tr>"),e.push(this.renderRowHeader(a,n))}else e.push(this.renderValues(s,n));return e.join("")},r.prototype.renderValues=function(s,n){if(!_.isEmpty(s.values)){for(var e=[],l=s.index%2==0,t=0,a=n.length;t<a;t++){var u=n[t],o=(0,g.HZ)(s.values[t],!1,!0);e.push('<td class="value'),e.push(l?" even":" odd");var p=r.getHeadersId(s);p.push.apply(p,r.getHeadersId(u)||[]),e.push('" headers="'+p.join(" ")+'"'),e.push(">"),e.push(o),e.push("</td>")}return e.join("")}},r.getHeadersId=function(s){for(var n=[],e=s;e.parent&&e.id;)n.splice(0,0,e.id),e=e.parent;return n},r.getHierachyLevelDisplayName=function(s){for(var n=[],e=0,l=s.sources;e<l.length;e++){var t=l[e];t.isMeasure||n.push((0,g.HZ)(t.displayName))}return n.join(",")},r}(),R=function(){function r(){}return r.prototype.init=function(s){this.renderer=new x(s.element.get(0),s.host)},r.prototype.update=function(s){var n;_.isEmpty(s.dataViews)||(n=s.dataViews[0]);var e=n&&n.matrix;e?this.renderer.render(e,s.viewport):this.renderer.clear()},r.prototype.enumerateObjectInstances=function(s){return[]},r}()}}]);