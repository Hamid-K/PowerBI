(self.webpackChunkdesktopDataExplore=self.webpackChunkdesktopDataExplore||[]).push([["cartesianChart"],{45863:function(vi,ma){var x,B;void 0!==(B="function"==typeof(x=function(){"use strict";var re="14.6.2";function Ue(p){p.parentElement.removeChild(p)}function Wt(p){return null!=p}function aa(p){p.preventDefault()}function Be(p){return"number"==typeof p&&!isNaN(p)&&isFinite(p)}function Vt(p,v,R){R>0&&(U(p,v),setTimeout(function(){dt(p,v)},R))}function ft(p){return Math.max(Math.min(p,100),0)}function Dt(p){return Array.isArray(p)?p:[p]}function Mt(p){var v=(p=String(p)).split(".");return v.length>1?v[1].length:0}function U(p,v){p.classList&&!/\s/.test(v)?p.classList.add(v):p.className+=" "+v}function dt(p,v){p.classList&&!/\s/.test(v)?p.classList.remove(v):p.className=p.className.replace(new RegExp("(^|\\b)"+v.split(" ").join("|")+"(\\b|$)","gi")," ")}function ze(p){var v=void 0!==window.pageXOffset,R="CSS1Compat"===(p.compatMode||"");return{x:v?window.pageXOffset:R?p.documentElement.scrollLeft:p.body.scrollLeft,y:v?window.pageYOffset:R?p.documentElement.scrollTop:p.body.scrollTop}}function ot(p,v){return 100/(v-p)}function ge(p,v,R){return 100*v/(p[R+1]-p[R])}function M(p,v){for(var R=1;p>=v[R];)R+=1;return R}function b(p,v,R){if(R>=p.slice(-1)[0])return 100;var N=M(R,p),Me=v[N-1],Ee=v[N];return Me+function(p,v){return ge(p,p[0]<0?v+Math.abs(p[0]):v-p[0],0)}([p[N-1],p[N]],R)/ot(Me,Ee)}function Z(p,v,R,N){if(100===N)return N;var Fe=M(N,p),Ve=p[Fe-1],Me=p[Fe];return R?N-Ve>(Me-Ve)/2?Me:Ve:v[Fe-1]?p[Fe-1]+function(p,v){return Math.round(p/v)*v}(N-p[Fe-1],v[Fe-1]):N}function Ne(p,v,R){var N;if("number"==typeof v&&(v=[v]),!Array.isArray(v))throw new Error("noUiSlider ("+re+"): 'range' contains invalid value.");if(!Be(N="min"===p?0:"max"===p?100:parseFloat(p))||!Be(v[0]))throw new Error("noUiSlider ("+re+"): 'range' value isn't numeric.");R.xPct.push(N),R.xVal.push(v[0]),N?R.xSteps.push(!isNaN(v[1])&&v[1]):isNaN(v[1])||(R.xSteps[0]=v[1]),R.xHighestCompleteStep.push(0)}function Se(p,v,R){if(v){if(R.xVal[p]===R.xVal[p+1])return void(R.xSteps[p]=R.xHighestCompleteStep[p]=R.xVal[p]);R.xSteps[p]=ge([R.xVal[p],R.xVal[p+1]],v,0)/ot(R.xPct[p],R.xPct[p+1]);var Fe=Math.ceil(Number(((R.xVal[p+1]-R.xVal[p])/R.xNumSteps[p]).toFixed(3))-1);R.xHighestCompleteStep[p]=R.xVal[p]+R.xNumSteps[p]*Fe}}function Re(p,v,R){this.xPct=[],this.xVal=[],this.xSteps=[R||!1],this.xNumSteps=[!1],this.xHighestCompleteStep=[],this.snap=v;var N,Fe=[];for(N in p)p.hasOwnProperty(N)&&Fe.push([p[N],N]);for(Fe.sort(Fe.length&&"object"==typeof Fe[0][0]?function(Ve,Me){return Ve[0][0]-Me[0][0]}:function(Ve,Me){return Ve[0]-Me[0]}),N=0;N<Fe.length;N++)Ne(Fe[N][1],Fe[N][0],this);for(this.xNumSteps=this.xSteps.slice(0),N=0;N<this.xNumSteps.length;N++)Se(N,this.xNumSteps[N],this)}Re.prototype.getDistance=function(p){var v,R=[];for(v=0;v<this.xNumSteps.length-1;v++){var N=this.xNumSteps[v];if(N&&p/N%1!=0)throw new Error("noUiSlider ("+re+"): 'limit', 'margin' and 'padding' of "+this.xPct[v]+"% range must be divisible by step.");R[v]=ge(this.xVal,p,v)}return R},Re.prototype.getAbsoluteDistance=function(p,v,R){var N=0;if(p<this.xPct[this.xPct.length-1])for(;p>this.xPct[N+1];)N++;else p===this.xPct[this.xPct.length-1]&&(N=this.xPct.length-2);!R&&p===this.xPct[N+1]&&N++;var Fe,Ve=1,Me=v[N],Ee=0,Ye=0,et=0,lt=0;for(Fe=R?(p-this.xPct[N])/(this.xPct[N+1]-this.xPct[N]):(this.xPct[N+1]-p)/(this.xPct[N+1]-this.xPct[N]);Me>0;)Ee=this.xPct[N+1+lt]-this.xPct[N+lt],v[N+lt]*Ve+100-100*Fe>100?(Ye=Ee*Fe,Ve=(Me-100*Fe)/v[N+lt],Fe=1):(Ye=v[N+lt]*Ee/100*Ve,Ve=0),R?(et-=Ye,this.xPct.length+lt>=1&&lt--):(et+=Ye,this.xPct.length-lt>=1&&lt++),Me=v[N+lt]*Ve;return p+et},Re.prototype.toStepping=function(p){return b(this.xVal,this.xPct,p)},Re.prototype.fromStepping=function(p){return function(p,v,R){if(R>=100)return p.slice(-1)[0];var N=M(R,v),Me=v[N-1];return function(p,v){return v*(p[1]-p[0])/100+p[0]}([p[N-1],p[N]],(R-Me)*ot(Me,v[N]))}(this.xVal,this.xPct,p)},Re.prototype.getStep=function(p){return Z(this.xPct,this.xSteps,this.snap,p)},Re.prototype.getDefaultStep=function(p,v,R){var N=M(p,this.xPct);return(100===p||v&&p===this.xPct[N-1])&&(N=Math.max(N-1,1)),(this.xVal[N]-this.xVal[N-1])/R},Re.prototype.getNearbySteps=function(p){var v=M(p,this.xPct);return{stepBefore:{startValue:this.xVal[v-2],step:this.xNumSteps[v-2],highestStep:this.xHighestCompleteStep[v-2]},thisStep:{startValue:this.xVal[v-1],step:this.xNumSteps[v-1],highestStep:this.xHighestCompleteStep[v-1]},stepAfter:{startValue:this.xVal[v],step:this.xNumSteps[v],highestStep:this.xHighestCompleteStep[v]}}},Re.prototype.countStepDecimals=function(){var p=this.xNumSteps.map(Mt);return Math.max.apply(null,p)},Re.prototype.convert=function(p){return this.getStep(this.toStepping(p))};var j={to:function(v){return void 0!==v&&v.toFixed(2)},from:Number},le={target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",touchArea:"touch-area",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",textDirectionLtr:"txt-dir-ltr",textDirectionRtl:"txt-dir-rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"};function ae(p){if(function(p){return"object"==typeof p&&"function"==typeof p.to&&"function"==typeof p.from}(p))return!0;throw new Error("noUiSlider ("+re+"): 'format' requires 'to' and 'from' methods.")}function D(p,v){if(!Be(v))throw new Error("noUiSlider ("+re+"): 'step' is not numeric.");p.singleStep=v}function ee(p,v){if(!Be(v))throw new Error("noUiSlider ("+re+"): 'keyboardPageMultiplier' is not numeric.");p.keyboardPageMultiplier=v}function I(p,v){if(!Be(v))throw new Error("noUiSlider ("+re+"): 'keyboardDefaultStep' is not numeric.");p.keyboardDefaultStep=v}function he(p,v){if("object"!=typeof v||Array.isArray(v))throw new Error("noUiSlider ("+re+"): 'range' is not an object.");if(void 0===v.min||void 0===v.max)throw new Error("noUiSlider ("+re+"): Missing 'min' or 'max' in 'range'.");if(v.min===v.max)throw new Error("noUiSlider ("+re+"): 'range' 'min' and 'max' cannot be equal.");p.spectrum=new Re(v,p.snap,p.singleStep)}function be(p,v){if(v=Dt(v),!Array.isArray(v)||!v.length)throw new Error("noUiSlider ("+re+"): 'start' option is incorrect.");p.handles=v.length,p.start=v}function de(p,v){if(p.snap=v,"boolean"!=typeof v)throw new Error("noUiSlider ("+re+"): 'snap' option must be a boolean.")}function q(p,v){if(p.animate=v,"boolean"!=typeof v)throw new Error("noUiSlider ("+re+"): 'animate' option must be a boolean.")}function ye(p,v){if(p.animationDuration=v,"number"!=typeof v)throw new Error("noUiSlider ("+re+"): 'animationDuration' option must be a number.")}function ne(p,v){var N,R=[!1];if("lower"===v?v=[!0,!1]:"upper"===v&&(v=[!1,!0]),!0===v||!1===v){for(N=1;N<p.handles;N++)R.push(v);R.push(!1)}else{if(!Array.isArray(v)||!v.length||v.length!==p.handles+1)throw new Error("noUiSlider ("+re+"): 'connect' option doesn't match handle count.");R=v}p.connect=R}function Le(p,v){switch(v){case"horizontal":p.ort=0;break;case"vertical":p.ort=1;break;default:throw new Error("noUiSlider ("+re+"): 'orientation' option is invalid.")}}function qe(p,v){if(!Be(v))throw new Error("noUiSlider ("+re+"): 'margin' option must be numeric.");0!==v&&(p.margin=p.spectrum.getDistance(v))}function ct(p,v){if(!Be(v))throw new Error("noUiSlider ("+re+"): 'limit' option must be numeric.");if(p.limit=p.spectrum.getDistance(v),!p.limit||p.handles<2)throw new Error("noUiSlider ("+re+"): 'limit' option is only supported on linear sliders with 2 or more handles.")}function tt(p,v){var R;if(!Be(v)&&!Array.isArray(v))throw new Error("noUiSlider ("+re+"): 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(v)&&2!==v.length&&!Be(v[0])&&!Be(v[1]))throw new Error("noUiSlider ("+re+"): 'padding' option must be numeric or array of exactly 2 numbers.");if(0!==v){for(Array.isArray(v)||(v=[v,v]),p.padding=[p.spectrum.getDistance(v[0]),p.spectrum.getDistance(v[1])],R=0;R<p.spectrum.xNumSteps.length-1;R++)if(p.padding[0][R]<0||p.padding[1][R]<0)throw new Error("noUiSlider ("+re+"): 'padding' option must be a positive number(s).");if((v[0]+v[1])/(p.spectrum.xVal[p.spectrum.xVal.length-1]-p.spectrum.xVal[0])>1)throw new Error("noUiSlider ("+re+"): 'padding' option must not exceed 100% of the range.")}}function De(p,v){switch(v){case"ltr":p.dir=0;break;case"rtl":p.dir=1;break;default:throw new Error("noUiSlider ("+re+"): 'direction' option was not recognized.")}}function Y(p,v){if("string"!=typeof v)throw new Error("noUiSlider ("+re+"): 'behaviour' must be a string containing options.");var R=v.indexOf("tap")>=0,N=v.indexOf("drag")>=0,Fe=v.indexOf("fixed")>=0,Ve=v.indexOf("snap")>=0,Me=v.indexOf("hover")>=0,Ee=v.indexOf("unconstrained")>=0;if(Fe){if(2!==p.handles)throw new Error("noUiSlider ("+re+"): 'fixed' behaviour must be used with 2 handles");qe(p,p.start[1]-p.start[0])}if(Ee&&(p.margin||p.limit))throw new Error("noUiSlider ("+re+"): 'unconstrained' behaviour cannot be used with margin or limit");p.events={tap:R||Ve,drag:N,fixed:Fe,snap:Ve,hover:Me,unconstrained:Ee}}function O(p,v){if(!1!==v)if(!0===v){p.tooltips=[];for(var R=0;R<p.handles;R++)p.tooltips.push(!0)}else{if(p.tooltips=Dt(v),p.tooltips.length!==p.handles)throw new Error("noUiSlider ("+re+"): must pass a formatter for all handles.");p.tooltips.forEach(function(N){if("boolean"!=typeof N&&("object"!=typeof N||"function"!=typeof N.to))throw new Error("noUiSlider ("+re+"): 'tooltips' must be passed a formatter or 'false'.")})}}function ve(p,v){p.ariaFormat=v,ae(v)}function y(p,v){p.format=v,ae(v)}function E(p,v){if(p.keyboardSupport=v,"boolean"!=typeof v)throw new Error("noUiSlider ("+re+"): 'keyboardSupport' option must be a boolean.")}function te(p,v){p.documentElement=v}function ce(p,v){if("string"!=typeof v&&!1!==v)throw new Error("noUiSlider ("+re+"): 'cssPrefix' must be a string or `false`.");p.cssPrefix=v}function Q(p,v){if("object"!=typeof v)throw new Error("noUiSlider ("+re+"): 'cssClasses' must be an object.");if("string"==typeof p.cssPrefix)for(var R in p.cssClasses={},v)v.hasOwnProperty(R)&&(p.cssClasses[R]=p.cssPrefix+v[R]);else p.cssClasses=v}function X(p){var v={margin:0,limit:0,padding:0,animate:!0,animationDuration:300,ariaFormat:j,format:j},R={step:{r:!1,t:D},keyboardPageMultiplier:{r:!1,t:ee},keyboardDefaultStep:{r:!1,t:I},start:{r:!0,t:be},connect:{r:!0,t:ne},direction:{r:!0,t:De},snap:{r:!1,t:de},animate:{r:!1,t:q},animationDuration:{r:!1,t:ye},range:{r:!0,t:he},orientation:{r:!1,t:Le},margin:{r:!1,t:qe},limit:{r:!1,t:ct},padding:{r:!1,t:tt},behaviour:{r:!0,t:Y},ariaFormat:{r:!1,t:ve},format:{r:!1,t:y},tooltips:{r:!1,t:O},keyboardSupport:{r:!0,t:E},documentElement:{r:!1,t:te},cssPrefix:{r:!0,t:ce},cssClasses:{r:!0,t:Q}},N={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses:le,keyboardPageMultiplier:5,keyboardDefaultStep:10};p.format&&!p.ariaFormat&&(p.ariaFormat=p.format),Object.keys(R).forEach(function(Ye){if(!Wt(p[Ye])&&void 0===N[Ye]){if(R[Ye].r)throw new Error("noUiSlider ("+re+"): '"+Ye+"' is required.");return!0}R[Ye].t(v,Wt(p[Ye])?p[Ye]:N[Ye])}),v.pips=p.pips;var Fe=document.createElement("div");return v.transformRule=void 0!==Fe.style.transform?"transform":void 0!==Fe.style.msTransform?"msTransform":"webkitTransform",v.style=[["left","top"],["right","bottom"]][v.dir][v.ort],v}function Pe(p,v,R){var Ee,Ye,et,lt,Ot,Qt,H,N=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},Ve=window.CSS&&CSS.supports&&CSS.supports("touch-action","none")&&function(){var p=!1;try{var v=Object.defineProperty({},"passive",{get:function(){p=!0}});window.addEventListener("test",null,v)}catch{}return p}(),Me=p,st=v.spectrum,pt=[],Lt=[],ra=[],Et=0,Ft={},oa=p.ownerDocument,Wa=v.documentElement||oa.documentElement,Ea=oa.body,Pa=-1,Rt=0,ia=1,Ca=2,Ma="rtl"===oa.dir||1===v.ort?0:100;function ca(H,oe){var Ae=oa.createElement("div");return oe&&U(Ae,oe),H.appendChild(Ae),Ae}function se(H,oe){var Ae=ca(H,v.cssClasses.origin),Ke=ca(Ae,v.cssClasses.handle);return ca(Ke,v.cssClasses.touchArea),Ke.setAttribute("data-handle",oe),v.keyboardSupport&&(Ke.setAttribute("tabindex","0"),Ke.addEventListener("keydown",function(rt){return function(H,oe){if(T()||F(oe))return!1;var Ae=["Left","Right"],Ke=["Down","Up"],rt=["PageDown","PageUp"],nt=["Home","End"];v.dir&&!v.ort?Ae.reverse():v.ort&&!v.dir&&(Ke.reverse(),rt.reverse());var Va,gt=H.key.replace("Arrow",""),it=gt===rt[0],fa=gt===rt[1],la=gt===Ke[0]||gt===Ae[0]||it,wa=gt===Ke[1]||gt===Ae[1]||fa,_a=gt===nt[1];if(!(la||wa||gt===nt[0]||_a))return!0;if(H.preventDefault(),wa||la){var ji=v.keyboardPageMultiplier,Lr=la?0:1,yi=ki(oe)[Lr];if(null===yi)return!1;!1===yi&&(yi=st.getDefaultStep(Lt[oe],la,v.keyboardDefaultStep)),(fa||it)&&(yi*=ji),yi=Math.max(yi,1e-7),Va=pt[oe]+(yi*=la?-1:1)}else Va=_a?v.spectrum.xVal[v.spectrum.xVal.length-1]:v.spectrum.xVal[0];return Ia(oe,st.toStepping(Va),!0,!0),Bt("slide",oe),Bt("update",oe),Bt("change",oe),Bt("set",oe),!1}(rt,oe)})),Ke.setAttribute("role","slider"),Ke.setAttribute("aria-orientation",v.ort?"vertical":"horizontal"),0===oe?U(Ke,v.cssClasses.handleLower):oe===v.handles-1&&U(Ke,v.cssClasses.handleUpper),Ae}function He(H,oe){return!!oe&&ca(H,v.cssClasses.connect)}function m(H,oe){return!!v.tooltips[oe]&&ca(H.firstChild,v.cssClasses.tooltip)}function T(){return Me.hasAttribute("disabled")}function F(H){return Ye[H].hasAttribute("disabled")}function pe(){Ot&&(Aa("update.tooltips"),Ot.forEach(function(H){H&&Ue(H)}),Ot=null)}function _e(){pe(),Ot=Ye.map(m),Ba("update.tooltips",function(H,oe,Ae){if(Ot[oe]){var Ke=H[oe];!0!==v.tooltips[oe]&&(Ke=v.tooltips[oe].to(Ae[oe])),Ot[oe].innerHTML=Ke}})}function at(H,oe,Ae){var Ke=oa.createElement("div"),rt=[];rt[Rt]=v.cssClasses.valueNormal,rt[ia]=v.cssClasses.valueLarge,rt[Ca]=v.cssClasses.valueSub;var nt=[];nt[Rt]=v.cssClasses.markerNormal,nt[ia]=v.cssClasses.markerLarge,nt[Ca]=v.cssClasses.markerSub;var gt=[v.cssClasses.valueHorizontal,v.cssClasses.valueVertical],it=[v.cssClasses.markerHorizontal,v.cssClasses.markerVertical];function fa(wa,Ja){var _a=Ja===v.cssClasses.value;return Ja+" "+(_a?gt:it)[v.ort]+" "+(_a?rt:nt)[wa]}return U(Ke,v.cssClasses.pips),U(Ke,0===v.ort?v.cssClasses.pipsHorizontal:v.cssClasses.pipsVertical),Object.keys(H).forEach(function(wa){!function(wa,Ja,_a){if((_a=oe?oe(Ja,_a):_a)!==Pa){var Va=ca(Ke,!1);Va.className=fa(_a,v.cssClasses.marker),Va.style[v.style]=wa+"%",_a>Rt&&((Va=ca(Ke,!1)).className=fa(_a,v.cssClasses.value),Va.setAttribute("data-value",Ja),Va.style[v.style]=wa+"%",Va.innerHTML=Ae.to(Ja))}}(wa,H[wa][0],H[wa][1])}),Ke}function ht(){lt&&(Ue(lt),lt=null)}function mt(H){ht();var oe=H.mode,Ke=H.filter||!1,it=function(H,oe,Ae){function Ke(wa,Ja){return(wa+Ja).toFixed(7)/1}var rt={},nt=st.xVal[0],gt=st.xVal[st.xVal.length-1],it=!1,fa=!1,la=0;return(Ae=function(p){return p.filter(function(v){return!this[v]&&(this[v]=!0)},{})}(Ae.slice().sort(function(wa,Ja){return wa-Ja})))[0]!==nt&&(Ae.unshift(nt),it=!0),Ae[Ae.length-1]!==gt&&(Ae.push(gt),fa=!0),Ae.forEach(function(wa,Ja){var _a,Va,ji,yi,cr,hn,vn,bt,Ei,Lr=wa,qi=Ae[Ja+1],en="steps"===oe;if(en&&(_a=st.xNumSteps[Ja]),_a||(_a=qi-Lr),!1!==Lr)for(void 0===qi&&(qi=Lr),_a=Math.max(_a,1e-7),Va=Lr;Va<=qi;Va=Ke(Va,_a)){for(Ei=(cr=(yi=st.toStepping(Va))-la)/(bt=Math.round(cr/H)),ji=1;ji<=bt;ji+=1)rt[(hn=la+ji*Ei).toFixed(5)]=[st.fromStepping(hn),0];vn=Ae.indexOf(Va)>-1?ia:en?Ca:Rt,!Ja&&it&&Va!==qi&&(vn=0),Va===qi&&fa||(rt[yi.toFixed(5)]=[Va,vn]),la=yi}}),rt}(H.density||1,oe,function(H,oe,Ae){if("range"===H||"steps"===H)return st.xVal;if("count"===H){if(oe<2)throw new Error("noUiSlider ("+re+"): 'values' (>= 2) required for mode 'count'.");var Ke=oe-1,rt=100/Ke;for(oe=[];Ke--;)oe[Ke]=Ke*rt;oe.push(100),H="positions"}return"positions"===H?oe.map(function(nt){return st.fromStepping(Ae?st.getStep(nt):nt)}):"values"===H?Ae?oe.map(function(nt){return st.fromStepping(st.getStep(st.toStepping(nt)))}):oe:void 0}(oe,H.values||!1,H.stepped||!1)),fa=H.format||{to:Math.round};return lt=Me.appendChild(at(it,Ke,fa))}function It(){var H=Ee.getBoundingClientRect(),oe="offset"+["Width","Height"][v.ort];return 0===v.ort?H.width||Ee[oe]:H.height||Ee[oe]}function St(H,oe,Ae,Ke){var rt=function(it){if(!(it=function(H,oe,Ae){var gt,it,Ke=0===H.type.indexOf("touch"),rt=0===H.type.indexOf("mouse"),nt=0===H.type.indexOf("pointer");if(0===H.type.indexOf("MSPointer")&&(nt=!0),"mousedown"===H.type&&!H.buttons&&!H.touches)return!1;if(Ke){var fa=function(_a){return _a.target===Ae||Ae.contains(_a.target)||_a.target.shadowRoot&&_a.target.shadowRoot.contains(Ae)};if("touchstart"===H.type){var la=Array.prototype.filter.call(H.touches,fa);if(la.length>1)return!1;gt=la[0].pageX,it=la[0].pageY}else{var wa=Array.prototype.find.call(H.changedTouches,fa);if(!wa)return!1;gt=wa.pageX,it=wa.pageY}}return oe=oe||ze(oa),(rt||nt)&&(gt=H.clientX+oe.x,it=H.clientY+oe.y),H.pageOffset=oe,H.points=[gt,it],H.cursor=rt||nt,H}(it,Ke.pageOffset,Ke.target||oe))||T()&&!Ke.doNotReject||function(p,v){return p.classList?p.classList.contains(v):new RegExp("\\b"+v+"\\b").test(p.className)}(Me,v.cssClasses.tap)&&!Ke.doNotReject||H===N.start&&void 0!==it.buttons&&it.buttons>1||Ke.hover&&it.buttons)return!1;Ve||it.preventDefault(),it.calcPoint=it.points[v.ort],Ae(it,Ke)},nt=[];return H.split(" ").forEach(function(gt){var it=!!Ve&&{passive:!0};oe.addEventListener(gt,rt,it),nt.push([gt,rt,it])}),nt}function Nt(H){var Ae=100*(H-function(p,v){var R=p.getBoundingClientRect(),N=p.ownerDocument,Fe=N.documentElement,Ve=ze(N);return/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(Ve.x=0),v?R.top+Ve.y-Fe.clientTop:R.left+Ve.x-Fe.clientLeft}(Ee,v.ort))/It();return Ae=ft(Ae),v.dir?100-Ae:Ae}function yt(H,oe){"mouseout"===H.type&&"HTML"===H.target.nodeName&&null===H.relatedTarget&&na(H,oe)}function Ht(H,oe){if(-1===navigator.appVersion.indexOf("MSIE 9")&&0===H.buttons&&0!==oe.buttonsProperty)return na(H,oe);var Ae=(v.dir?-1:1)*(H.calcPoint-oe.startCalcPoint);Za(Ae>0,100*Ae/oe.baseSize,oe.locations,oe.handleNumbers)}function na(H,oe){oe.handle&&(dt(oe.handle,v.cssClasses.active),Et-=1),oe.listeners.forEach(function(Ae){Wa.removeEventListener(Ae[0],Ae[1],Ae[2])}),0===Et&&(dt(Me,v.cssClasses.drag),Ai(),H.cursor&&(Ea.style.cursor="",Ea.removeEventListener("selectstart",aa))),oe.handleNumbers.forEach(function(Ae){Bt("change",Ae),Bt("set",Ae),Bt("end",Ae)})}function pa(H,oe){if(oe.handleNumbers.some(F))return!1;var Ae;1===oe.handleNumbers.length&&(Et+=1,U(Ae=Ye[oe.handleNumbers[0]].children[0],v.cssClasses.active)),H.stopPropagation();var rt=[],nt=St(N.move,Wa,Ht,{target:H.target,handle:Ae,listeners:rt,startCalcPoint:H.calcPoint,baseSize:It(),pageOffset:H.pageOffset,handleNumbers:oe.handleNumbers,buttonsProperty:H.buttons,locations:Lt.slice()}),gt=St(N.end,Wa,na,{target:H.target,handle:Ae,listeners:rt,doNotReject:!0,handleNumbers:oe.handleNumbers}),it=St("mouseout",Wa,yt,{target:H.target,handle:Ae,listeners:rt,doNotReject:!0,handleNumbers:oe.handleNumbers});rt.push.apply(rt,nt.concat(gt,it)),H.cursor&&(Ea.style.cursor=getComputedStyle(H.target).cursor,Ye.length>1&&U(Me,v.cssClasses.drag),Ea.addEventListener("selectstart",aa,!1)),oe.handleNumbers.forEach(function(fa){Bt("start",fa)})}function sa(H){H.stopPropagation();var oe=Nt(H.calcPoint),Ae=function(H){var oe=100,Ae=!1;return Ye.forEach(function(Ke,rt){if(!F(rt)){var nt=Lt[rt],gt=Math.abs(nt-H);(gt<oe||gt<=oe&&H>nt||100===gt&&100===oe)&&(Ae=rt,oe=gt)}}),Ae}(oe);if(!1===Ae)return!1;v.events.snap||Vt(Me,v.cssClasses.tap,v.animationDuration),Ia(Ae,oe,!0,!0),Ai(),Bt("slide",Ae,!0),Bt("update",Ae,!0),Bt("change",Ae,!0),Bt("set",Ae,!0),v.events.snap&&pa(H,{handleNumbers:[Ae]})}function va(H){var oe=Nt(H.calcPoint),Ae=st.getStep(oe),Ke=st.fromStepping(Ae);Object.keys(Ft).forEach(function(rt){"hover"===rt.split(".")[0]&&Ft[rt].forEach(function(nt){nt.call(Qt,Ke)})})}function Ba(H,oe){Ft[H]=Ft[H]||[],Ft[H].push(oe),"update"===H.split(".")[0]&&Ye.forEach(function(Ae,Ke){Bt("update",Ke)})}function Aa(H){var oe=H&&H.split(".")[0],Ae=oe&&H.substring(oe.length);Object.keys(Ft).forEach(function(Ke){var rt=Ke.split(".")[0],nt=Ke.substring(rt.length);oe&&oe!==rt||Ae&&Ae!==nt||delete Ft[Ke]})}function Bt(H,oe,Ae){Object.keys(Ft).forEach(function(Ke){var rt=Ke.split(".")[0];H===rt&&Ft[Ke].forEach(function(nt){nt.call(Qt,pt.map(v.format.to),oe,pt.slice(),Ae||!1,Lt.slice(),Qt)})})}function Ra(H,oe,Ae,Ke,rt,nt){var gt;return Ye.length>1&&!v.events.unconstrained&&(Ke&&oe>0&&(gt=st.getAbsoluteDistance(H[oe-1],v.margin,0),Ae=Math.max(Ae,gt)),rt&&oe<Ye.length-1&&(gt=st.getAbsoluteDistance(H[oe+1],v.margin,1),Ae=Math.min(Ae,gt))),Ye.length>1&&v.limit&&(Ke&&oe>0&&(gt=st.getAbsoluteDistance(H[oe-1],v.limit,0),Ae=Math.min(Ae,gt)),rt&&oe<Ye.length-1&&(gt=st.getAbsoluteDistance(H[oe+1],v.limit,1),Ae=Math.max(Ae,gt))),v.padding&&(0===oe&&(gt=st.getAbsoluteDistance(0,v.padding[0],0),Ae=Math.max(Ae,gt)),oe===Ye.length-1&&(gt=st.getAbsoluteDistance(100,v.padding[1],1),Ae=Math.min(Ae,gt))),!((Ae=ft(Ae=st.getStep(Ae)))===H[oe]&&!nt)&&Ae}function Da(H,oe){var Ae=v.ort;return(Ae?oe:H)+", "+(Ae?H:oe)}function Za(H,oe,Ae,Ke){var rt=Ae.slice(),nt=[!H,H],gt=[H,!H];Ke=Ke.slice(),H&&Ke.reverse(),Ke.length>1?Ke.forEach(function(fa,la){var wa=Ra(rt,fa,rt[fa]+oe,nt[la],gt[la],!1);!1===wa?oe=0:(oe=wa-rt[fa],rt[fa]=wa)}):nt=gt=[!0];var it=!1;Ke.forEach(function(fa,la){it=Ia(fa,Ae[fa]+oe,nt[la],gt[la])||it}),it&&Ke.forEach(function(fa){Bt("update",fa),Bt("slide",fa)})}function ur(H,oe){return v.dir?100-H-oe:H}function Ai(){ra.forEach(function(H){Ye[H].style.zIndex=3+(Ye.length+(Lt[H]>50?-1:1)*H)})}function Ia(H,oe,Ae,Ke,rt){return rt||(oe=Ra(Lt,H,oe,Ae,Ke,!1)),!1!==oe&&(function(H,oe){Lt[H]=oe,pt[H]=st.fromStepping(oe);var Ke="translate("+Da(10*(ur(oe,0)-Ma)+"%","0")+")";Ye[H].style[v.transformRule]=Ke,Fa(H),Fa(H+1)}(H,oe),!0)}function Fa(H){if(et[H]){var oe=0,Ae=100;0!==H&&(oe=Lt[H-1]),H!==et.length-1&&(Ae=Lt[H]);var Ke=Ae-oe,rt="translate("+Da(ur(oe,Ke)+"%","0")+")",nt="scale("+Da(Ke/100,"1")+")";et[H].style[v.transformRule]=rt+" "+nt}}function Di(H,oe){return null===H||!1===H||void 0===H||("number"==typeof H&&(H=String(H)),H=v.format.from(H),!1===(H=st.toStepping(H))||isNaN(H))?Lt[oe]:H}function Ui(H,oe,Ae){var Ke=Dt(H);oe=void 0===oe||!!oe,v.animate&&!(void 0===Lt[0])&&Vt(Me,v.cssClasses.tap,v.animationDuration),ra.forEach(function(gt){Ia(gt,Di(Ke[gt],gt),!0,!1,Ae)});for(var nt=1===ra.length?0:1;nt<ra.length;++nt)ra.forEach(function(gt){Ia(gt,Lt[gt],!0,!0,Ae)});Ai(),ra.forEach(function(gt){Bt("update",gt),null!==Ke[gt]&&oe&&Bt("set",gt)})}function Qa(){var H=pt.map(v.format.to);return 1===H.length?H[0]:H}function ki(H){var oe=Lt[H],Ae=st.getNearbySteps(oe),Ke=pt[H],rt=Ae.thisStep.step,nt=null;if(v.snap)return[Ke-Ae.stepBefore.startValue||null,Ae.stepAfter.startValue-Ke||null];!1!==rt&&Ke+rt>Ae.stepAfter.startValue&&(rt=Ae.stepAfter.startValue-Ke),nt=Ke>Ae.thisStep.startValue?Ae.thisStep.step:!1!==Ae.stepBefore.step&&Ke-Ae.stepBefore.highestStep,100===oe?rt=null:0===oe&&(nt=null);var gt=st.countStepDecimals();return null!==rt&&!1!==rt&&(rt=Number(rt.toFixed(gt))),null!==nt&&!1!==nt&&(nt=Number(nt.toFixed(gt))),[nt,rt]}return U(H=Me,v.cssClasses.target),U(H,0===v.dir?v.cssClasses.ltr:v.cssClasses.rtl),U(H,0===v.ort?v.cssClasses.horizontal:v.cssClasses.vertical),U(H,"rtl"===getComputedStyle(H).direction?v.cssClasses.textDirectionRtl:v.cssClasses.textDirectionLtr),Ee=ca(H,v.cssClasses.base),function(H,oe){var Ae=ca(oe,v.cssClasses.connects);Ye=[],(et=[]).push(He(Ae,H[0]));for(var Ke=0;Ke<v.handles;Ke++)Ye.push(se(oe,Ke)),ra[Ke]=Ke,et.push(He(Ae,H[Ke+1]))}(v.connect,Ee),function(H){H.fixed||Ye.forEach(function(oe,Ae){St(N.start,oe.children[0],pa,{handleNumbers:[Ae]})}),H.tap&&St(N.start,Ee,sa,{}),H.hover&&St(N.move,Ee,va,{hover:!0}),H.drag&&et.forEach(function(oe,Ae){if(!1!==oe&&0!==Ae&&Ae!==et.length-1){var Ke=Ye[Ae-1],rt=Ye[Ae],nt=[oe];U(oe,v.cssClasses.draggable),H.fixed&&(nt.push(Ke.children[0]),nt.push(rt.children[0])),nt.forEach(function(gt){St(N.start,gt,pa,{handles:[Ke,rt],handleNumbers:[Ae-1,Ae]})})}})}(v.events),Ui(v.start),v.pips&&mt(v.pips),v.tooltips&&_e(),Ba("update",function(H,oe,Ae,Ke,rt){ra.forEach(function(nt){var gt=Ye[nt],it=Ra(Lt,nt,0,!0,!0,!0),fa=Ra(Lt,nt,100,!0,!0,!0),la=rt[nt];v.ariaFormat.to(Ae[nt]),it=st.fromStepping(it).toFixed(0),fa=st.fromStepping(fa).toFixed(0),la=st.fromStepping(la).toFixed(0),gt.children[0].setAttribute("aria-valuemin",it),gt.children[0].setAttribute("aria-valuemax",fa),gt.children[0].setAttribute("aria-valuenow",la)})}),Qt={destroy:function(){for(var H in v.cssClasses)v.cssClasses.hasOwnProperty(H)&&dt(Me,v.cssClasses[H]);for(;Me.firstChild;)Me.removeChild(Me.firstChild);delete Me.noUiSlider},steps:function(){return ra.map(ki)},on:Ba,off:Aa,get:Qa,set:Ui,setHandle:function(H,oe,Ae,Ke){if(!((H=Number(H))>=0&&H<ra.length))throw new Error("noUiSlider ("+re+"): invalid handle number, got: "+H);Ia(H,Di(oe,H),!0,!0,Ke),Bt("update",H),Ae&&Bt("set",H)},reset:function(H){Ui(v.start,H)},__moveHandles:function(oe,Ae,Ke){Za(oe,Ae,Lt,Ke)},options:R,updateOptions:function(H,oe){var Ae=Qa(),Ke=["margin","limit","padding","range","animate","snap","step","format","pips","tooltips"];Ke.forEach(function(nt){void 0!==H[nt]&&(R[nt]=H[nt])});var rt=X(R);Ke.forEach(function(nt){void 0!==H[nt]&&(v[nt]=rt[nt])}),st=rt.spectrum,v.margin=rt.margin,v.limit=rt.limit,v.padding=rt.padding,v.pips?mt(v.pips):ht(),v.tooltips?_e():pe(),Lt=[],Ui(H.start||Ae,oe)},target:Me,removePips:ht,removeTooltips:pe,getTooltips:function(){return Ot},getOrigins:function(){return Ye},pips:mt}}return{__spectrum:Re,version:re,cssClasses:le,create:function(p,v){if(!p||!p.nodeName)throw new Error("noUiSlider ("+re+"): create requires a single element, got: "+p);if(p.noUiSlider)throw new Error("noUiSlider ("+re+"): Slider was already initialized.");var N=Pe(p,X(v),v);return p.noUiSlider=N,N}}})?x.apply(ma,[]):x)&&(vi.exports=B)},11956:function(vi,ma,x){"use strict";x.r(ma),x.d(ma,{DefaultInnerTickSize:function(){return ue},DefaultRotation:function(){return et},DefaultRotationForYAxisHierarchy:function(){return Ot},DefaultVerticalRotation:function(){return lt},Mockable:function(){return he},StackedAxisPadding:function(){return Qe},adjustDomainWithConstantPixelDifference:function(){return qe},assertScalarDomain:function(){return tt},axisFactory:function(){return W},createAxis:function(){return ve},createAxisLabel:function(){return ia},createD3Scale_Band:function(){return pt},createD3Scale_Numeric:function(){return ra},createDomain:function(){return ct},createFormatter:function(){return v},createScalarDomainOptions:function(){return Wa},createScale:function(){return Ge},createStackedD3Axis:function(){return Q},createUncertaintyAwareValueDomain:function(){return Ve},createValueDomain:function(){return Fe},defaultTickFormat:function(){return Z},emptyDomain:function(){return ze},ensureValuesInRange:function(){return De},extendCreateAxisOptions:function(){return y},generateScalarDomainSources:function(){return Ea},getAxisFormatString:function(){return Me},getBestNumberOfTicks:function(){return Ne},getCategoryThickness:function(){return ye},getCategoryValueType:function(){return Y},getHierStack:function(){return He},getMaxWidth:function(){return ut},getMergedUserDomains:function(){return Qt},getNumHierarchyLevels:function(){return Ie},getRecommendedNumberOfTicksForXAxis:function(){return M},getRecommendedNumberOfTicksForYAxis:function(){return b},getRecommendedTickValues:function(){return Se},getTickLabelMargins:function(){return I},hasForcedDomain:function(){return Rt},invertOrdinalScale:function(){return ne},invertOrdinalSimpleScaleWithDirection:function(){return Le},invertScale:function(){return de},isHierarchical:function(){return ca},isLogScaleAllowedFunc:function(){return Lt},isOrdinalAxisDomain:function(){return Ft},isScalarAxisDomain:function(){return Et},isStackedAxisProperties:function(){return se},mergeDomains:function(){return oa},mergeScalarAxisDomains:function(){return Pa},powerOfTen:function(){return Ma},rotate:function(){return st},scaleShouldClamp:function(){return Ca},shouldIncludeZero:function(){return O},willLabelsFit:function(){return Ee},willLabelsWordBreak:function(){return Ye}});var d=x(81337),B=x(62458),re=x(41640),Ze=x(68365),Ue=x(32041),Wt=x(64329),aa=x(66001),jt=x(41414),Jt=x(45059),Pt=x(72489),Be=x(28326),Vt=x(80777),ft=x(37274),Dt=x(54522),Mt=x(18664),U=x(44977),dt=x(53197),xt=x(34969),ze=[0,0],we=35,w=2,me=3,ot=10,ge=3,Qe=5,ue=6;function M(m){return m<300?3:m<500?5:8}function b(m){return m<150?3:m<300?5:8}function W(m,T){switch(T){case dt.Or.top:return d3.axisTop(m);case dt.Or.right:return d3.axisRight(m);case dt.Or.bottom:return d3.axisBottom(m);case dt.Or.left:return d3.axisLeft(m);default:B.fF.assertNever(T)}}function Z(m){return B.fF.warn('Using default (unformatted) tickFormat for value "'.concat(m,'"')),"".concat(m)}function Ne(m,T,F,pe,_e){var Te=m[0],Ce=m[1];return B.fF.assert(function(){return F>=0},"maxTickCount must be greater or equal to zero"),isNaN(Te)||isNaN(Ce)?me:Te===Ce?_e||pe?1:me:(B.fF.assert(function(){return Te<=Ce},"min value needs to be less or equal to max value"),F<=1||Ce<=1&&Te>=-1||T.some(function($e){return $e?.type&&!$e.type.integer})?F:Math.min(Ce-Te+1,F))}function Se(m,T){var F=m.axis,_e=(void 0===F?{}:F).logAxisScale,Te=m.isScalar,Ce=m.domainOptions,$e=m.isLogScaleAllowed,at=m.valueType,ht=m.minTickInterval,mt=T.scale,It=T.bestTickCount;if(T.isInvalidDomain)return[];if(Te&&!_.isEmpty(Ce?.domain)&&1===It)return[Ce?.domain[0]];if(!Te||(0,dt._9)(mt))return function(m,T){if(m<=0)return[];var F=T.length;if(m>F)return T;for(var pe=[],_e=0,Te=Math.ceil(F/m);_e<F;_e+=Te)pe.push(T[_e]);return pe}(It,mt.domain());if((0,dt.v9)(at))return function(m,T){if(0===T[0]&&0===T[1])return[];var pe=Jt.EP.calculate(Be.y3.fromTimeValue(T[0]),Be.y3.fromTimeValue(T[1]),m).sequence.map(function(_e){return _e.getTime()});return De(pe,T[0],T[1])}(It,mt.domain());var St=function(m,T,F,pe){if(!T.ticks)return B.fF.assertFail("must pass a quantitative scale to this method"),[];if(m<=1)return[];var Te=m,Ce=T.ticks(Te);if(Ce.length>m&&m>1){var $e=T.domain();Te=function(ht,mt,It){var St=(mt-ht)/It,At=Math.floor(Math.log(St)/Math.LN10),Nt=St/Math.pow(10,At);if(Nt>=Math.sqrt(50)){var Tt=Math.sqrt(2)*Math.pow(10,At+1);return Math.floor((mt-ht)/Tt)}if(Nt>=Math.sqrt(10)){var yt=Math.sqrt(50)*Math.pow(10,At);return Math.floor((mt-ht)/yt)}if(Nt>=Math.sqrt(2)){var Ht=Math.sqrt(10)*Math.pow(10,At);return Math.floor((mt-ht)/Ht)}var na=Math.sqrt(2)*Math.pow(10,At);return Math.floor((mt-ht)/na)}($e[0],$e[1],Ce.length),Ce=T.ticks(Te)}if(Ce.length<w&&(Ce=T.ticks(Te=m+1)),F&&Ce.length>1)for(var at=Ce[1]-Ce[0];at>0&&(0,re.Po)(at,F)&&Te>2;){if(Te--,(Ce=T.ticks(Te)).length<w){Ce=T.ticks(++Te);break}at=Ce[1]-Ce[0]}return Ce.length<=1?[]:(pe||(Ce=function(m,T){if(void 0===T&&(T=1e-5),!m||m.length<2)return m;var F=T*Math.abs(m[1]-m[0]);return m.map(function(pe){return Math.abs(pe)<=F?0:pe})}(Ce)),B.fF.assert(function(){return 0===Ce.length||(0,re.bA)(Ce[0],T.domain()[0],re.BM)&&(0,re.bl)(Ce[Ce.length-1],T.domain()[1],re.BM)},"getRecommendedTickValuesForAQuantitativeRange should not generate tick values outside the scale"),Ce)}(It,mt,ht,_e);if(_e&&$e)for(var At=0;St.length>10;)St=St.filter(function(Nt){return Ma(Nt,At)}),At++;return St}function D(m,T,F){var pe=10===T?.[0],_e=10===T?.[1],Te=_e&&pe&&m[0]>=m[1];(!pe||Te)&&(m[0]-=Math.abs(F[0]),T&&(T[0]=0)),(!_e||Te)&&(m[1]+=Math.abs(F[1]),T&&(T[1]=0))}function I(m){var T=m.plotArea,F=m.yMarginLimit,pe=m.textHeightMeasurer,_e=m.textWidthMeasurer,Te=m.axes,Ce=m.bottomMarginLimit,$e=m.axesFontProperties,at=m.rotate90,ht=m.showY1OnRight,mt=m.shouldRenderAxis,It=mt.x,St=mt.y,At=mt.y2,Nt=Ie(Te),Tt=null!=Nt&&Nt>0;B.fF.assertValue(T,"options.plotArea"),B.fF.assertValue(Te,"axes");var yt=Te.x,Ht=Te.y1,na=Te.y2;B.fF.assertValue(T,"plotArea"),B.fF.assertValue(_e,"textWidthMeasurer"),B.fF.assertValue(pe,"textHeightMeasurer"),B.fF.assertValue(yt,"xAxis"),B.fF.assertValue(Ht,"yAxis");var pa=yt.values,sa=0,va=0,ta=0,kt=0,Ba=0,Aa=0,Bt=0,Da=yt.categoryThickness?yt.categoryThickness*(null!=yt.innerPaddingRatio?.5-yt.innerPaddingRatio/2:0):0,Za=(0,dt._9)(yt.scale),ii=0;void 0!==yt.outerPadding?ii=yt.outerPadding:void 0!==yt.xLabelMaxWidth&&(ii=Math.max(0,(T.width-yt.xLabelMaxWidth*pa.length)/2));var Ia,Fa,Ai=It&&!_.isEmpty(pa);if(0!==M(T.width)||0!==b(T.height)){var Di=at||Tt&&yt.isCategoryAxis?lt:et;if(St){var wi,Ui=$e.y.tickLabels;Ht.categoryIdentities&&(Ui=(0,Mt.ED)(Ui,{weight:"700"})),Ba=(wi=he.getAxisTickLabelMargins(Ht,Ui,_e,pe)).maxWidth,ta=Math.max(ta,wi.overflow.top),kt=Math.max(kt,wi.overflow.bottom),Fa=wi.textHeight}na&&At&&(Aa=(wi=he.getAxisTickLabelMargins(na,$e.y2.tickLabels,_e,pe)).maxWidth,ta=Math.max(ta,wi.overflow.top),kt=Math.max(kt,wi.overflow.bottom));var $i=$e.x.tickLabels,Qa=(0,Mt.qk)($i),Gi=yt.scale,ki=Gi.domain();if(Ia=pe(Qa),Ai){var yr=Math.floor(Ce/Ia);yt.categoryIdentities&&!yt.willLabelsWordBreak&&(Qa.fontWeight="700");for(var ci=0,pi=pa.length;ci<pi;ci++){var H=void 0;Qa.text=pa[ci];var oe=_e(Qa);if(yt.willLabelsWordBreak){var Ae=_.isEmpty(yt.categoryLabelMaxWidths)?yt.xLabelMaxWidth:yt.categoryLabelMaxWidths[ci];H=(0,aa.ql)(Qa.text,Qa,_e,Ae,yr).length*Ia,oe=Ae}else if(!yt.willLabelsFit&&Za){var rt=$i.size.pt<=xt.rZ;H=oe*Di.sine+(rt?0:Ia*Di.cosine),oe=oe*Di.cosine+(rt?0:Ia*Di.sine)}else H=Ia+-5;if(0===ci){if(Za)sa=yt.willLabelsFit?oe/2-Da-ii:oe-Da-ii,sa=Math.max(sa,0);else if(ki.length>1){var it=0;it=oe/2-(fa=Gi(ki[yt.invertAxis?1:0])),it=Math.max(it,0),yt.invertAxis&&ht?va=it:sa=it}}else if(ci===pi-1)if(Za)(yt.willLabelsFit||yt.willLabelsWordBreak)&&(va=oe/2-Da-ii,va=Math.max(va,0));else if(ki.length>1){it=0;var fa=Gi(ki[yt.invertAxis?0:1]);it=oe/2-(T.width-fa),it=Math.max(it,0),yt.invertAxis&&ht?sa=it:va=it}Bt=Math.max(Bt,H)}sa=Math.min(sa,we),va=Math.min(va,we)}}var _a,la=0,wa=0,Ja=Math.min(Math.max(kt,Math.ceil(Bt)),Ce);if(ht?(wa=Math.min(Math.max(sa,Aa),F),la=Math.min(Math.max(va,Ba),F)):(wa=Math.min(Math.max(sa,Ba),F),la=Math.min(Math.max(va,Aa),F)),Tt){var Va=function(){return _a*(Nt-1)};yt.isCategoryAxis&&Ai?(_a=Ia+Qe,Ja+=Va()):Ht.isCategoryAxis&&St?(_a=Fa+Qe,ht?la+=Va():wa+=Va()):_a=0}return{yTop:Math.ceil(ta),yLeft:Math.ceil(wa),yBottom:Math.ceil(kt),yRight:Math.ceil(la),xMax:Math.ceil(Ja),stackHeight:_a,axesOverflow:{top:Math.ceil(ta),bottom:Math.ceil(kt),left:Math.ceil(sa),right:Math.ceil(va)}}}var he={getAxisTickLabelMargins:function(T,F,pe,_e){var Te,at,ht,Ce=T.scale,$e=T.d3Axis.tickValues();if(_.isEmpty($e))return{maxWidth:0,overflow:{top:0,bottom:0}};if((0,dt._9)(Ce))at=(Te=Ce.range())[0],ht=Te[1];else{var mt=Ce.range();at=_.head(mt),ht=_.last(mt)}var St,At,Nt,Tt,It=T.values;at<ht?(St=at,At=Ce(_.head($e)),Nt=ht,Tt=Ce(_.last($e))):(St=ht,At=Ce(_.last($e)),Nt=at,Tt=Ce(_.head($e)));for(var yt=(0,Mt.qk)(F,"".concat(_.head(It))),Ht=_e(yt),na=Math.max(0,-(At-Ht/2-St)),pa=Math.max(0,Tt+Ht/2-Nt),sa=0,va=0,ta=It.length;va<ta;va++)yt.text="".concat(It[va]),sa=Math.max(sa,pe(yt));return{maxWidth:sa,overflow:{top:na,bottom:pa},textHeight:Ht}}};function de(m,T,F,pe,_e){return(0,dt._9)(m)?0===F?{value:ne(m,T)}:Le(m,T,F,pe,_e):{value:m.invert(T)}}function q(m){return(0,dt._9)(m)?m.domain().map(function(T){return m(T)}):m.range()}function ye(m){var T=q(m);if(T.length<2){if((0,dt._9)(m)){var F=m.range();return F[1]-F[0]}B.fF.assertFail("Unsupported axis type")}return T[1]-T[0]}function ne(m,T){var F=m.bandwidth(),pe=q(m),_e=m.domain();return pe.length<2||pe[0]>T?_e[0]||0:_e[d3.bisect(pe,T+(pe[1]-pe[0]-F)/2)-1]}function Le(m,T,F,pe,_e){var Te=q(m),Ce=m.domain(),$e=_e||1,at=m.bandwidth()/$e;if(0!==Ce.length){B.fF.assert(function(){return!_.some(Ce,function(Ht,na){return 0!==na&&Ht!==Ce[na-1]+1})});var ht=1===pe?at/2:0;if(Te[0]+ht>T)return 1===F?void 0:{value:Ce[0],seriesIndex:0};if(!(T>Te[Te.length-1]+at*$e-ht&&-1===F)){var mt=ht*F*-1,It=Te[1]-Te[0]-at*$e;if($e>1){var St=d3.bisect(Te,T)-1,At=m(Ce[St]),Nt=_.map(d3.range($e),function(Ht){return Ht*at+At}),Tt=d3.bisect(Nt,T+mt)-1;return Tt<0?{value:Ce[St-1],seriesIndex:$e-1}:-1===F&&Tt===$e-1&&St!==Te.length-1&&T+mt+It>Te[St+1]?{value:Ce[St+1],seriesIndex:0}:{value:Ce[St],seriesIndex:Tt}}-1===F&&(mt+=It);var yt=d3.bisect(Te,T+mt)-1;return{value:Ce[yt],seriesIndex:0}}}}function qe(m,T,F,pe){if(F<m||pe>T){var _e=Math.abs(Math.min(F-m,0)),Te=Math.max(pe-T,0),Ce=T-m,at=m-_e*Math.pow(Ce,2)/((Ce-Te)*(Ce-_e)-_e*Te);return{domain:[at,T+Te*(T-at)/(Ce-Te)],adjusted:!0}}return{domain:void 0,adjusted:!1}}function ct(m,T,F,pe){if(F&&!(0,dt.c$)(T)){if(0===m.length)return;var Te=_.flatMap(m,function(It){return _.flatMap(It.data,function(St){return[St?.categoryValue]})});return Pa.apply(void 0,(0,d.__spreadArray)([Wa(d3.extent(Te),0)],pe||[],!1))}var Ce=[];if(!_.isEmpty(m))for(var at=0,ht=m[0].data;at<ht.length;at++){var mt=ht[at];mt.highlight||Ce.push(mt.categoryIndex)}return{domain:Ce,type:0}}function tt(m){if(2!==m.length&&!_.every(m,function(F){return null==F||_.isNumber(F)}))throw new Ze.wJ("CartesianAxisScalarDomain")}function De(m,T,F){B.fF.assert(function(){return T<=F},"min must be less or equal to max");var pe=m.filter(function(_e){return _e>=T&&_e<=F});return pe.length>=2?pe:[T,F]}function Y(m,T){return function(m){return m&&(m.bool||m.numeric||m.text||m.dateTime)}(m?.type)?m.type:Vt.Ge.fromDescriptor(T?{numeric:!0}:{text:!0})}function O(m){var T=m?.domain;if(!T||2!==T.length)return!0;var F=m.domainSources;return!((10===F[0]?T[0]:void 0)>0||(10===F[1]?T[1]:void 0)<0)}function ve(m){var T=E(m);return m.axisZoom&&!m.skipAxisZoomUpdate&&(m.axisZoom.updateAxisOptions(T,m),T=E(m)),T}function y(m){var T,F=m.isScalar,_e=m.axis.logAxisScale,Te=void 0!==_e&&_e,Ce=m.orientation,$e=void 0===Ce?m.isVertical?dt.Or.left:dt.Or.bottom:Ce,at=m.metaDataColumn,ht=m.outerPadding,mt=void 0===ht?0:ht,It=m.innerPaddingRatio,St=void 0===It?xt.$B:It,At=m.outerPaddingRatio,Nt=void 0===At?0:At,Tt=null===(T=m.domainOptions)||void 0===T?void 0:T.domain,Ht=Y(at instanceof Array?(0,xt.GN)(at):at,F),na=Lt(Tt,Ht);return(0,d.__assign)((0,d.__assign)((0,d.__assign)({},m),{isLogScaleAllowed:na,valueType:Ht,minTickInterval:F?N(m.formatString,Ht,m.is100Pct):void 0,hasDisallowedZeroInDomain:F&&!na&&Te,orientation:$e,innerPaddingRatio:St,outerPaddingRatio:Nt,outerPadding:0===mt&&F&&m.isVertical?1:mt}),m.isCategoryAxis&&function(m,T,F,pe){var _e;return!(!m||T&&"0"!==T&&"g"!==T&&"G"!==T||F&&1!==F||!(null!==(_e=m.temporal)&&void 0!==_e&&_e.year||m.integer&&2===pe?.length&&ce(pe[0])&&ce(pe[1])))}(Ht,m.formatString,m.axis.labelDisplayUnits,Tt)?{formatString:"0",useTickIntervalForDisplayUnits:!1}:{})}function E(m){var T,F=y(m),pe=F.domainOptions,Te=(void 0===pe?{}:pe).domain,Ce=Ge(F),$e=Ce.scale,at=Ce.bestTickCount,ht=$e.domain(),mt=m.categoryThickness;if(mt&&F.isScalar&&2===Te?.length){B.fF.assert(function(){return!(Te[0]instanceof Date)||Te[0]instanceof Be.y3},"The domain has to be a no-Date object or a PBIFormattingDate");var It=Te[1]-Te[0],St=ht[1]-ht[0];It>0&&St>0&&(mt=mt*It/St)}var yt,Ht,At=Se(F,Ce),Nt=v(Ce,F,At),Tt=W($e,F.orientation).tickSizeInner(ue).tickSizeOuter(0).ticks(at).tickValues(At);return!F.isScalar&&mt?yt=Math.max(1,mt-2*xt.Fv):At.length>1?(yt=function(m,T){return m&&!_.isEmpty(T)?Math.abs(m(T[1])-m(T[0])):1}($e,At),yt-=2*ge,F.margin&&(Ht=function(m,T,F,pe,_e){var Te=_.times(T.length,_.constant(_e)),Ce=F.left,$e=F.right,at=m(_.head(T)),ht=m(_.last(T)),mt=q(m),St=mt[1],At=2*(Math.abs(at-mt[0])+Ce+pe),Nt=2*(Math.abs(ht-St)+$e+pe);return Te[0]=Math.min(At,_e),Te[T.length-1]=Math.min(Nt,_e),Te}($e,At,F.margin,F.outerPadding,yt),yt=void 0)):yt=m.pixelSpan-2*ge,{scale:Ce.scale,isInvalidDomain:Ce.isInvalidDomain,d3Axis:Tt,formatter:Nt,values:_.isEmpty(F.metaDataColumn)?[]:R(Tt,At,Nt,F.valueType,F.getValueFn),axisLabel:(0,Dt.O1)(F.metaDataColumn),xLabelMaxWidth:yt,categoryLabelMaxWidths:Ht,categoryThickness:mt,valueType:F.valueType,isCategoryAxis:F.isCategoryAxis,outerPadding:F.outerPadding,outerPaddingRatio:F.outerPaddingRatio,innerPaddingRatio:F.innerPaddingRatio,isLogScaleAllowed:F.isLogScaleAllowed,dataDomain:null===(T=F.domainOptions)||void 0===T?void 0:T.domain,hasDisallowedZeroInDomain:F.hasDisallowedZeroInDomain,invertAxis:F.axis.invertAxis,orientation:F.orientation}}function ce(m){return _.isNumber(m)&&m===Math.floor(m)&&m>-1e4&&m<1e4}function Q(m){return B.fF.assertValue(m,"options is null or undefined"),B.fF.assertValue(m.d3axis,"options.axis is null or undefined"),B.fF.assertValue(m.scale,"options.scale is null or undefined"),B.fF.assertValue(m.tickFormat,"options.tickFormat is null or undefined"),W(m.scale,null!=m.orient?m.orient:dt.Or.bottom).tickSizeInner(m.innerTickSize||0).tickSizeOuter(m.outerTickSize||0).ticks(m.d3axis.tickArguments()).tickValues(m.d3axis.tickValues()).tickFormat(m.tickFormat)}function Ge(m){var T=m.pixelSpan,F=m.metaDataColumn,pe=m.outerPadding,_e=m.isScalar,Te=m.isVertical,Ce=m.forcedTickCount,$e=m.maxTickCount,at=m.allowSingleScalarTick,ht=m.includeZero,mt=m.domainOptions,It=m.zeroScalarDomain,St=m.minTickInterval,At=m.valueType,Nt=m.axis,Tt=Nt.logAxisScale,yt=Nt.invertAxis,Ht=m.domainOptions,na=mt?.domain;B.fF.assert(function(){return!at||at&&_e},"allowSingleScalarTick should only be true if the chart is scalar"),B.fF.assert(function(){return!ht||_e&&ht},"includeZero can only have an effect if the domain is scalar");var pa=F instanceof Array?F:[F];if(null==na||2===na.length&&null==na[0]&&null==na[1]||2!==na.length&&_e)return{isInvalidDomain:!0,scale:(0,dt.c$)(At)?pt(m,At.dateTime?ze:[]):ra(m,ze,Tt),bestTickCount:0};var sa=Te?b(T):M(T);$e&&(sa=Math.min(sa,$e));var Aa,va=sa,ta=m.axis.logAxisScale&&m.isLogScaleAllowed,kt=na?.slice();if(kt&&_e){if(ht){var Ba=ta?_.every(kt,function(Bt){return Bt>0})?1:-1:0;kt[0]=Math.min(Ba,kt[0]),kt[kt.length-1]=Math.max(Ba,kt[kt.length-1])}2===kt.length&&(tt(kt),va=void 0!==Ce?0!==sa?Ce:0:Ne(kt,pa,sa,At.dateTime,at),kt=function(m,T,F,pe){return isNaN(m[0])||isNaN(m[1])?ze:(m[0]===m[1]?null==F||.2*Math.abs(m[1])>=F?D(m,T,[.2*m[0],.2*m[1]]):0!==m[1]&&D(m,T,[F,F]):pe||Math.abs(m[0])<1e-4&&Math.abs(m[0]/(m[1]-m[0]))<1e-4&&10!==T?.[0]&&(m[0]=0),m)}(kt,Ht.domainSources,St,Tt))}return _e&&(At.numeric||At.dateTime)?(At.dateTime||(tt(kt),2===Ht.domain.length&&0===Ht.domain[0]&&0===Ht.domain[1]&&It&&(D(kt,Ht.domainSources,It),void 0===Ce&&(va=Ne(kt,pa,sa,At.dateTime,at)))),Aa=ra(m,kt,ta,va)):At.text||At.dateTime||At.numeric||At.bool?(Aa=pt(m,kt),va=0===sa?0:Math.min(kt.length,(T-2*pe)/xt.jY)):(B.fF.assertFail("unsupported dataType, something other than text or numeric"),B.fF.assert(function(){return!!Aa},"scale must be defined")),Te&&_e&&Aa.range(q(Aa).reverse()),yt&&Aa.range(Aa.range().reverse()),function(m){for(var T=m.domain(),F=0,pe=T.length;F<pe;++F)T[F]===Number.POSITIVE_INFINITY?T[F]=Number.MAX_VALUE:T[F]===Number.NEGATIVE_INFINITY&&(T[F]=-Number.MAX_VALUE);m.domain(T)}(Aa),{scale:Aa,bestTickCount:va}}function v(m,T,F){var _e=m.bestTickCount,Te=T.domainOptions,Ce=T.valueType,at=T.formatString,ht=T.useTickIntervalForDisplayUnits,mt=T.axis,It=mt.logAxisScale,St=mt.labelPrecision,At=mt.labelDisplayUnits;if(T.isScalar){if(Ce.dateTime){var Tt=m.scale.domain();return(0,Pt.Ue)({format:at,value:Be.y3.fromTimeValue(1===_e?Te.domain[0]:Tt[0]),value2:Be.y3.fromTimeValue(1===_e?Te.domain[0]:Tt[1]),tickCount:_e,columnType:Ce})}if(ht&&F.length>1){var yt=[F[0],F[1]];return It&&_.every(F,function(Ht){return Ht<=0})&&(yt=[F[F.length-2],F[F.length-1]]),(0,Pt.Ue)({format:at,value:At||yt[1]-yt[0],value2:0,allowFormatBeautification:!0,columnType:Ce,precision:St??(0,dt.Gv)(yt[0],yt[1],At,at)})}if(1===F.length)return(0,Pt.Ue)({format:at,value:At||(ht?_.head(F):0),allowFormatBeautification:!0,precision:St})}return(0,Pt.E3)(at,!0)}function R(m,T,F,pe,_e){return _e||(_e=function(Ce){return Ce}),F?(m.tickFormat(function(Te){return F.format(_e(Te,pe))}),T.map(function(Te){return F.format(_e(Te,pe))})):T.map(function(Te){return _e(Te,pe)})}function N(m,T,F){if(m&&!(0,Be.iH)(m)){var _e=(0,Be.rH)(m,!0).precision;return m.indexOf("%")>-1&&(_e+=2),Math.pow(10,-_e)}return F?.01:T.integer?1:0}function Fe(m,T){if(B.fF.assertValue(m,"data"),0===m.length)return null;var F=_.flatMap(m,function(pe){return _.flatMap(pe.data,function(_e){return[_e?.value]})});return T&&F.push(0),d3.extent(F)}function Ve(m,T){if(B.fF.assertValue(m,"data"),0===m.length)return null;if(!_.some(m,function(_e){var Te;return null===(Te=_e.uncertainty)||void 0===Te?void 0:Te.renderUncertainty}))return Fe(m,T);var F=d3.min(m,function(_e){var Te;return null!==(Te=_e.uncertainty)&&void 0!==Te&&Te.renderUncertainty?d3.min(_e.data,function(Ce){var $e;return Ce&&d3.min([Ce.value,null===($e=Ce.uncertainty)||void 0===$e?void 0:$e.lower])}):d3.min(_e.data,function(Ce){return Ce&&Ce.value})}),pe=d3.max(m,function(_e){var Te;return null!==(Te=_e.uncertainty)&&void 0!==Te&&Te.renderUncertainty?d3.max(_e.data,function(Ce){var $e;return Ce&&d3.max([Ce.value,null===($e=Ce.uncertainty)||void 0===$e?void 0:$e.upper])}):d3.max(_e.data,function(Ce){return Ce&&Ce.value})});return T&&(F=null==F?0:Math.min(F,0),pe=null==pe?0:Math.max(pe,0)),[F,pe]}function Me(m){if(B.fF.assertValue(m,"data"),m.length>=1)for(var T=0,F=m;T<F.length;T++){var _e=_.find(F[T].data,function(Te){return Te?.labelFormatString});if(_e)return _e.labelFormatString}}function Ee(m,T,F,pe){var _e=m.values;if(0===_e.length)return!1;var Te=void 0!==m.xLabelMaxWidth?m.xLabelMaxWidth:T/_e.length;return!_e.some(function(Ce){return pe.text=Ce,F(pe)>Te})}function Ye(m,T,F,pe,_e,Te,Ce){var $e=m.values,at=void 0!==m.xLabelMaxWidth?m.xLabelMaxWidth:F/$e.length,ht=T.bottom/et.sine,mt=_e(Ce),It=Math.max(1,Math.floor(T.bottom/mt));return 0!==$e.length&&!$e.some(function(Nt){return Ce.text=Nt,!(0,aa.r)(Nt)&&pe(Ce)>at})&&$e.filter(function(Nt,Tt){var na=Math.min((T.left+m.outerPadding+m.categoryThickness*(Tt+.5)-ot)/et.cosine,ht),pa=(0,aa.ql)(Nt,Ce,pe,at,It,Te).join(" ");Ce.text=Nt;var sa=Te(Ce,na);return(0,U.mC)(pa).length>=(0,U.mC)(sa).length}).length>=$e.length>>1}var et={sine:Math.sin(Math.PI*(35/180)),cosine:Math.cos(Math.PI*(35/180)),tangent:Math.tan(Math.PI*(35/180)),transform:"rotate(-35)",dy:"-0.5em",textAnchor:"end"},lt={sine:Math.sin(.5*Math.PI),cosine:Math.cos(.5*Math.PI),tangent:Math.tan(.5*Math.PI),transform:"rotate(-90)",dy:"-0.65em",textAnchor:"end"},Ot={sine:Math.sin(.5*Math.PI),cosine:Math.cos(.5*Math.PI),tangent:Math.tan(.5*Math.PI),transform:"rotate(-90)",dy:"-0.45em",textAnchor:"middle",x:0,y:0,dx:0};function st(m,T){var F=T.textTruncator,pe=T.textProperties,_e=T.needRotate,Te=T.needEllipsis,Ce=T.axisProperties,$e=T.margin,at=T.rotate90,ht=T.firstVisibleNode,mt=T.rotationPadding,It=void 0===mt?0:mt,St=T.dropLabelsOnOverlap,At=T.height,Nt=T.y1Hierarchy;if(_e){B.fF.assert(function(){return(0,dt._9)(Ce.scale)},"Rotating non-ordinal scales is currently not supported");var Ia,Fa,Tt=Nt?Ot:at?lt:et,yt=(0,re.GG)(Math.abs(Tt.cosine),0,1e-10),Ht=$e.left-(yt?ot:0),na=Wt.FP.fromPointToPixel(xt.rZ),sa=parseFloat(pe.fontSize),va=sa<=na,ta=Ue.b.estimateSvgTextHeight(pe),kt=Ce.scale,Ba=q(kt),Aa=ye(kt),Bt=ta*Tt.sine,Ra=yt?0:ta*Tt.cosine,Za=Bt/2,ur=(yt?0:Ra/Tt.tangent)+Za,ii=Za,Ai=!!ht;if(va)Ia=At/Tt.sine,Fa=-5.5;else{var Di=na/2;Fa=-(Di+Ra)*Tt.sine,Ia=_e?(At-Di-Ra-(!at||Ai?0:Di))/Tt.sine:void 0}var Qa,wi=kt.bandwidth()/2,$i=Aa/2;Qa=St?Ai?new ft._F(It+Ba[0]+wi-$i,ur,ii,ht,kt,$i,It):new ft.LO(It-(at?0:Ht),ur,ii):new ft.DR;var ki=-1;m.each(function(yr,ci){var pi=d3.select(this),H=Ba[ci]+wi;if(St&&Qa.willCollide(H))return Qa.skipItem(H),void pi.text(null);Qa.addItem(H);var Ae,oe=pi.text();if(pe.text=oe,yt)if(Nt&&at){if(!oe)return;var nt=Ce;ki=_.indexOf(nt.adjustedValues,oe,ki+1),Ae=nt.categoryLabelMaxWidths[ki],B.fF.assert(function(){return!isNaN(Ae)},"stacked group allowedLength should be a valid number")}else Ae=Ia;else Ae=((va?Ce.outerPadding+Ce.categoryThickness*(ci+.5):H)+Ht-Bt)/Tt.cosine;if(at||Te||Ae<Ia){var gt=F(pe,Math.min(Ae,Ia));gt!==oe&&pi.text(gt)}var it=pi.attr("x");pi.style("text-anchor",Tt.textAnchor).attrs({x:null!=Tt.x?Tt.x:it,y:null!=Tt.y?Tt.y:sa,dx:null!=Tt.dx?Tt.dx:Fa,dy:Tt.dy,transform:Tt.transform})})}else m.each(function(yr){var ci=d3.select(this),pi=ci.text();pe.text=pi;var H=ut(Ce,yr),oe=F(pe,H);oe!==pi&&ci.text(oe),ci.style("text-anchor","middle").attrs({dx:"0em",dy:"1em",transform:"rotate(0)"})})}function pt(m,T){var F,pe=m.categoryThickness?m.outerPadding/m.categoryThickness:0;return B.fF.assert(function(){return pe>=0&&pe<4},"outerPaddingRatio should be a value between zero and four"),d3.scaleBand().range([0,m.pixelSpan]).paddingInner(null!==(F=m.innerPaddingRatio)&&void 0!==F?F:xt.$B).paddingOuter(pe).domain(T)}function Lt(m,T){return null!=m&&!(0,dt.v9)(T)&&(m[0]>0&&m[1]>0||m[0]<0&&m[1]<0)}function ra(m,T,F,pe){var _e=(F?d3.scaleLog():d3.scaleLinear()).range([m.outerPadding,m.pixelSpan-m.outerPadding]).domain([T[0],T[1]]).clamp(F||m.shouldClamp);return!(0,dt.v9)(m.valueType)&&!m.preventNice&&!(m.allowSingleScalarTick&&2===T.length&&T[0]===T[1])&&T[0]!==-Number.MAX_VALUE&&T[1]!==Number.MAX_VALUE&&_e.nice(F?void 0:pe),_e}function Et(m){return 1===m?.type}function Ft(m){return 0===m?.type}function Qt(m){var T,F,pe=_.filter(m.includeDomains,function(_e){return _.includes(_e.domainSources,10)});return null!==(F=null===(T=Pa.apply(void 0,pe))||void 0===T?void 0:T.domain)&&void 0!==F?F:[void 0,void 0]}function oa(){for(var m=[],T=0;T<arguments.length;T++)m[T]=arguments[T];for(var F,pe,_e=0,Te=m;_e<Te.length;_e++){var Ce=Te[_e];if(Ce){var $e=Ce[0],at=Ce[1];null!=$e&&(F=Math.min($e,void 0===F?Number.POSITIVE_INFINITY:F)),null!=at&&(pe=Math.max(at,void 0===pe?Number.NEGATIVE_INFINITY:pe))}}return[F,pe]}function Wa(m,T,F){if(m){B.fF.assert(function(){return void 0===m[0]||void 0===m[1]||Number.isNaN(m[0])||Number.isNaN(m[1])||m[0]<=m[1]},"min should be less or equal to max");var pe={type:1,domain:m,domainSources:Ea(m,T),forced:F};return B.fF.assert(function(){return!_.includes(pe.domainSources,10)||!(!Rt(pe)||!pe.domain)},"For a user-set domain, `forced` must be true and `domain` must be set"),pe}}function Ea(m,T){return[null!=m[0]?T:void 0,null!=m[1]?T:void 0]}function Pa(){for(var m=[],T=0;T<arguments.length;T++)m[T]=arguments[T];var F={forced:!1,source:0},pe={forced:!1,source:0},_e={forced:!1,source:0,value:null},Te={forced:!1,source:0,value:null};function Ce(At,Nt){var Tt,yt,Ht,na,pa,sa,va="min"===Nt,ta=va?F:pe,kt=va?_e:Te,Ba=null!==(yt=null===(Tt=At.domainSources)||void 0===Tt?void 0:Tt[va?0:1])&&void 0!==yt?yt:0,Aa=null!==(na=null===(Ht=At.forced)||void 0===Ht?void 0:Ht[va?0:1])&&void 0!==na&&na,Bt=At.domain[va?0:1];if(null!=Bt){var Ra=function(Za){0===Ba&&(kt.value=Za,kt.forced=Aa)};null==kt.value&&Ra(Bt),Ba>ta.source?(ta.value=Bt,ta.source=Ba,ta.forced=Aa):Ba===ta.source&&(Aa&&!ta.forced?(ta.value=Bt,ta.forced=!0,Ra(Bt)):(Aa||!ta.forced)&&(ta.value=va?Math.min(Bt,null!==(pa=ta.value)&&void 0!==pa?pa:Number.POSITIVE_INFINITY):Math.max(Bt,null!==(sa=ta.value)&&void 0!==sa?sa:Number.NEGATIVE_INFINITY),Ra(ta.value)))}}for(var $e=0,at=m;$e<at.length;$e++){var ht=at[$e];!ht||!ht.domain||(Ce(ht,"min"),Ce(ht,"max"))}if(void 0!==F.value||void 0!==pe.value){var mt=null!=_e.value&&null!=Te.value&&(0===F.source||0===pe.source)&&(F.value>Te.value||pe.value<_e.value),It=mt?_e:F,St=mt?Te:pe;return{type:1,domain:[It.value,St.value],forced:[It.forced,St.forced],domainSources:[It.source,St.source]}}}function Rt(m){var T,F;return(null===(T=m?.forced)||void 0===T?void 0:T[0])||(null===(F=m?.forced)||void 0===F?void 0:F[1])}function ia(m,T,F,pe){void 0===pe&&(pe=!1);var _e=pe?"secAxisStyle":"axisStyle";return m?.[_e]?(0,jt.O1)(m[_e],T,F):T}function Ca(m,T){return!(!m||!T||m.length<2||T.length<2||m[0]===T[0]&&m[1]===T[1])}function Ma(m,T){void 0===T&&(T=0);var F=Math.abs(m),pe=Math.log(F)/Math.LN10;return pe=Math.ceil(pe-1e-12),F/Math.pow(10,pe)==1&&pe%Math.pow(2,T)==0}function ca(m){return!0===m.isHierarchical}function se(m){return!0===m.isStacked}function He(m){return ca(m.x)?m.x.hierStack:ca(m.y1)?m.y1.hierStack:[]}function Ie(m){return ca(m.x)?m.x.numHierarchyLevels:ca(m.y1)?m.y1.numHierarchyLevels:void 0}function ut(m,T){if(_.isEmpty(m.categoryLabelMaxWidths))return m.xLabelMaxWidth;if(se(m))return m.categoryLabelMaxWidths[T];var pe=m.d3Axis.tickValues().indexOf(T);return m.categoryLabelMaxWidths[pe]}},3128:function(vi,ma,x){"use strict";x.d(ma,{Rl:function(){return j},fI:function(){return le},Gf:function(){return de},l$:function(){return tt},xm:function(){return ne},PH:function(){return ye},H_:function(){return Le},yV:function(){return ct},mv:function(){return qe}});var d=x(81337),B=x(22733),re=x(14599),Ze=x(56707),Ue=x(80065),Wt=x(2241),aa=x(45545),jt=x(33024),Jt=x(86727),Pt=x(41414),Be=x(48766),Vt=x(92374),ft=x(18765),Dt=x(79154),Mt=x(62458),U=x(56578),dt=x(32379),xt=x(91059),ze=x(28326),we=x(11956),w=x(34969),me=x(3087),ot=function(Y,O,ve,y){var E,X,ce=B.p.valueAxis;return E=Y?{fontFamilyReference:(X=O?ce:B.p.y2Axis).secTitleFontFamily,fontSizeReference:X.secTitleFontSize,boldReference:X.secTitleBold,italicReference:X.secTitleItalic,underlineReference:X.secTitleUnderline,fontColorReference:X.secTitleColor}:{fontFamilyReference:(X=ve?B.p.categoryAxis:ce).titleFontFamily,fontSizeReference:X.titleFontSize,boldReference:X.titleBold,italicReference:X.titleItalic,underlineReference:X.titleUnderline,fontColorReference:X.titleColor},Mt.fF.assertValue(E,"getAxisTitleSubSelectionStyles titleReferences"),(0,Ue.un)(y,E)},ge=function(Y,O,ve,y){var E,X,ce=B.p.valueAxis;return E=Y?{fontFamilyReference:(X=O?ce:B.p.y2Axis).secFontFamily,fontSizeReference:X.secFontSize,boldReference:X.secBold,italicReference:X.secItalic,underlineReference:X.secUnderline,fontColorReference:X.secLabelColor,displayUnitsReference:X.secLabelDisplayUnits,precisionReference:X.secLabelPrecision}:{fontFamilyReference:(X=ve?B.p.categoryAxis:ce).fontFamily,fontSizeReference:X.fontSize,boldReference:X.bold,italicReference:X.italic,underlineReference:X.underline,fontColorReference:X.labelColor,displayUnitsReference:X.labelDisplayUnits,precisionReference:X.labelPrecision},(0,Ue.xs)(y,E)},Qe=function(Y,O,ve,y,E){var te=b(ve,Y,O),ce=te.axisTitleShow,Q=te.zoomAxisShow,X=[{type:1,destinationInfo:{cardUid:W(Y,ve),groupUid:Z(Y,ve,"title")},label:E.getLocalizedString("Format_AxisTitle")}];return M(ve,y)&&X.unshift((0,d.__assign)((0,d.__assign)({type:2},Q),{relatedToggledFormattingIds:[me.t.show],enabledLabel:E.getLocalizedString("Format_AddZoomSlider")})),X.unshift((0,d.__assign)((0,d.__assign)({type:2},ce),{disabledLabel:E.getLocalizedString("Delete"),keyboardShortcuts:[{key:"Delete",nextValue:!1}]}),{type:0,excludedResetFormattingIds:[ce,me.t.show,Q]}),X},ue=function(Y,O,ve,y,E,te){var ce=M(ve,y),Q=b(ve,Y,O),X=Q.axisShow,Pe=Q.axisTitleShow,Ge=Q.zoomAxisShow,p=[{type:1,destinationInfo:{cardUid:W(Y,ve),groupUid:Z(Y,ve,ve&&ce?"valuesScalar":"values")},label:te.getLocalizedString("Format_AxisValues")}];return ce||p.unshift({type:4,sortableField:{queryName:"",sortDirection:1},label:te.getLocalizedString("Format_SortAxis"),key:"Category"}),ve&&E===Be.w.both&&p.unshift((0,d.__assign)((0,d.__assign)({type:3},B.p.categoryAxis.axisType),{label:te.getLocalizedString("Format_Label_AxisType")})),ce&&p.unshift((0,d.__assign)((0,d.__assign)({type:2},Ge),{relatedToggledFormattingIds:[me.t.show],enabledLabel:te.getLocalizedString("Format_AddZoomSlider")})),p.unshift((0,d.__assign)((0,d.__assign)({type:2},Pe),{enabledLabel:te.getLocalizedString("Format_AddAxisTitle")})),p.unshift((0,d.__assign)((0,d.__assign)({type:2},X),{disabledLabel:te.getLocalizedString("Delete"),keyboardShortcuts:[{key:"Delete",nextValue:!1}]}),{type:0,excludedResetFormattingIds:[X,me.t.show,Ge]}),p},M=function(Y,O){return!Y||O},b=function(Y,O,ve){if(Y)return{axisShow:B.p.categoryAxis.show,axisTitleShow:B.p.categoryAxis.showAxisTitle,zoomAxisShow:me.t.showOnCategoryAxis};if(O){var y=ve?B.p.valueAxis:B.p.y2Axis;return{axisShow:y.show,axisTitleShow:y.secShowAxisTitle,zoomAxisShow:me.t.showOnValueSecAxis}}return{axisShow:B.p.valueAxis.show,axisTitleShow:B.p.valueAxis.showAxisTitle,zoomAxisShow:me.t.showOnValueAxis}},W=function(Y,O){return Y?"".concat("Visual","-").concat("y2Axis"):O?"".concat("Visual","-").concat("categoryAxis"):"".concat("Visual","-").concat("valueAxis")},Z=function(Y,O,ve){return Y?"".concat("y2Axis","-").concat(ve):O?"".concat("categoryAxis","-").concat(ve):"".concat("valueAxis","-").concat(ve)},Se=x(88439),Re=x(49511),j=60;function le(){for(var Y,O,ve,y,E,De=this,te=12!==this.chartType,Q=new U.Nq(function(){return q.call(De,ae.call(De))},function(){return q.call(De,D.call(De))},function(){return ee.call(De)},function(){return I.call(De)},function(){return be.call(De)},function(){return he.call(De)},function(){return De.axisZoom.getZoomCard(te)}).build(),X=[],Pe=0,Ge=this.getLayers();Pe<Ge.length;Pe++){var p=Ge[Pe];if(!p.getFormattingCards)return;X.push(p.getFormattingCards({categoryAxisData:null===(O=null===(Y=this.originalCartesianData)||void 0===Y?void 0:Y.axesData)||void 0===O?void 0:O.categoryAxis}))}if(Mt.fF.assert(function(){return De.isComboChart()||X.length<=1},"Formatting layer cards length is not as expected"),this.isComboChart()){var v=Se.pD(Se.GJ(X,this.chartType,function(N){for(var Fe=[],Ve=1;Ve<arguments.length;Ve++)Fe[Ve-1]=arguments[Ve];return De.hostServices.getLocalizedString(N,Fe)}),this.chartType);null===(ve=Q?.cards)||void 0===ve||ve.push.apply(ve,v)}else 1===X.length?null===(y=Q?.cards)||void 0===y||y.push.apply(y,X[0].card):Mt.fF.assert(function(){return 0===X.length},"Formatting cards for layer has unexpected length");var R=(0,aa._W)(this.background,this.localizer);return R&&(null===(E=Q?.cards)||void 0===E||E.push(R)),Q}function ae(){var Y,De=this,O=null===(Y=this.originalCartesianData)||void 0===Y?void 0:Y.axesData,ve=this.axes;if(ve.hasCategoryAxis()&&O){var y=B.p.categoryAxis,E=O.categoryAxis,te=ve.isYAxisCategorical,ce=te?"Visual_YAxis_Hyphen":"Visual_XAxis_Hyphen",Q=new U.CQ(new U.lg("categoryAxis"),ce,[y.show,y.axisType,y.start,y.end,y.fontFamily,y.fontSize,y.bold,y.italic,y.underline,y.labelColor,y.labelDisplayUnits,y.labelPrecision,y.maxMarginFactor,y.preferredCategoryWidth,y.showAxisTitle,y.titleText,y.axisStyle,y.titleFontFamily,y.titleFontSize,y.titleBold,y.titleItalic,y.titleUnderline,y.titleColor,y.concatenateLabels,y.show,y.invertAxis,y.logAxisScale,y.switchAxisPosition],this.localizer),X=this.categoryAxisIsScalar(),Pe=X.isScalar;X.supportedType===Be.w.both&&Q.addGroup("type",function(Ee){Ee.addSimpleSlice("type",new U.uY({descriptor:y.axisType,value:Pe?Be.w.scalar:Be.w.categorical}).build())}),Pe&&Q.addGroup("range",function(Ee){Ee.withDisplayName("Visual_Axis_Range");var Ye=(0,we.getMergedUserDomains)(E),et=Ye[0],lt=Ye[1];if(ve.isCategoryAxisDateTime()){var Ot=et&&ze.y3.fromTimeValue(et),st=lt&&ze.y3.fromTimeValue(lt);Ee.addSimpleSlice("min",new U.hz({descriptor:(0,d.__assign)((0,d.__assign)({},y.start),{propertyTypes:{dateTime:!0},instanceKind:3}),value:Ot,placeholder:"",validators:{max:{type:1,value:st}}}).build(),function(pt){return pt.withCustomDisplayName("Visual_Gradient_MinValue")}).addSimpleSlice("max",new U.hz({descriptor:(0,d.__assign)((0,d.__assign)({},y.end),{propertyTypes:{dateTime:!0},instanceKind:3}),value:st,placeholder:"",validators:{min:{type:0,value:Ot}}}).build(),function(pt){return pt.withCustomDisplayName("Visual_Gradient_MaxValue")})}else Ee.addSimpleSlice("min",new U.mu({descriptor:(0,d.__assign)((0,d.__assign)({},y.start),{propertyTypes:{numeric:!0},instanceKind:3}),value:et,options:{maxValue:{type:1,value:lt}}}).build(),function(pt){return pt.withCustomDisplayName("Visual_Gradient_MinValue")}).addSimpleSlice("max",new U.mu({descriptor:(0,d.__assign)((0,d.__assign)({},y.end),{propertyTypes:{numeric:!0},instanceKind:3}),value:lt,options:{minValue:{type:0,value:et}}}).build(),function(pt){return pt.withCustomDisplayName("Visual_Gradient_MaxValue")});Ee.addSimpleSlice("logAxisScale",new U.bd({descriptor:y.logAxisScale,value:E.logAxisScale}).build(),function(pt){return pt.withDisabled(!De.isLogAxisScaleAllowed(!1)).withCustomDescriptionIf(function(){return!De.isLogAxisScaleAllowed(!1)},"Visual_LogarithmicScaleDescription")}),Ee.addSimpleSlice("invertAxis",new U.bd({descriptor:y.invertAxis,value:E.invertAxis}).build(),function(pt){return pt.withCustomDisplayName("Visual_InvertRange")})});var p=E.labelFontProperties,v=E.titleFontProperties,R=(new U.UN).withFontFamily({descriptor:y.fontFamily,value:p.family}).withFontSizeProperties({descriptor:y.fontSize,value:p.size.pt}).withBold({descriptor:y.bold,value:p.weight===Dt.en}).withItalic({descriptor:y.italic,value:p.style===Dt.BF}).withUnderline({descriptor:y.underline,value:p.textDecoration===Dt.f0}),N=(new U.UN).withFontFamily({descriptor:y.titleFontFamily,value:v.family}).withFontSizeProperties({descriptor:y.titleFontSize,value:v.size.pt}).withBold({descriptor:y.titleBold,value:v.weight===Dt.en}).withItalic({descriptor:y.titleItalic,value:v.style===Dt.BF}).withUnderline({descriptor:y.titleUnderline,value:v.textDecoration===Dt.f0}),Fe=R.build(),Ve=N.build();return Q.addGroup(Pe?"valuesScalar":"values",function(Ee){var Ye;Ee.withDisplayName("Role_DisplayName_Values").addCompositeSlice("font","Font",Fe).addTopLevelToggle("show",function(){return new U.bd({descriptor:y.show,value:E.show}).build()}).addSimpleSlice("color",new U.BT({descriptor:(0,d.__assign)((0,d.__assign)({},y.labelColor),{instanceKind:3}),value:{value:p.color}}).build()),Pe?Ee.addSimpleSlice("displayUnits",new U.uY({descriptor:y.labelDisplayUnits,value:E.labelDisplayUnits}).build(),function(et){return et.withAliasName("Decimal")}).addSimpleSlice("precision",new U.mu({descriptor:y.labelPrecision,value:E.labelPrecision,options:{minValue:{type:0,value:0},maxValue:{type:1,value:Ze.vo}}}).build()):Ee.addSimpleSlice("maxMarginFactor",new U.JN({descriptor:y.maxMarginFactor,value:Math.round(100*E.maxMarginFactor),options:{minValue:{type:0,value:15},maxValue:{type:1,value:50},unitSymbol:jt.t2},localize:De.localizer}).build(),function(et){return et.withCustomDisplayName(te?"Visual_Max_Width":"Visual_Max_Height")}),te&&Ee.addSimpleSlice("switchAxisPosition",new U.bd({descriptor:y.switchAxisPosition,value:E.switchAxisPosition}).build(),function(et){return et.withCustomDisplayName("Visual_SwitchAxisPosition")}),null!==(Ye=De.cartesianVisualCapabilities)&&void 0!==Ye&&Ye.supportsHierarchicalCategoryAxis&&!Pe&&Ee.addSimpleSlice("concatenateLabels",new U.bd({descriptor:y.concatenateLabels,value:E.concatenateLabels}).build())}).addGroup("title",function(Ee){Ee.withDisplayName("Visual_Title").withInheritDisabled(!1).addTopLevelToggle("show",function(){return new U.bd({descriptor:y.showAxisTitle,value:E.showAxisTitle}).build()}).addSimpleSlice("text",new U.fq({descriptor:y.titleText,value:E.titleText,placeholder:""}).build(),function(Ye){return Ye.withCustomDisplayName("Visual_Title_Text")}).addSimpleSlice("style",function(){return new U.uY({descriptor:y.axisStyle,value:E.axisStyle,filterValues:ve.categoryAxisHasUnitType?[Pt.DO.showTitleOnly,Pt.DO.showUnitOnly,Pt.DO.showBoth]:[Pt.DO.showTitleOnly]}).build()}).addCompositeSlice("font","Font",Ve).addSimpleSlice("color",new U.BT({descriptor:(0,d.__assign)((0,d.__assign)({},y.titleColor),{instanceKind:3}),value:{value:v.color}}).build(),function(Ye){return Ye.withCustomDisplayName("Generic_Color")})}),Pe||Q.addGroup("layout",function(Ee){Ee.withDisplayName("Layout").withInheritDisabled(!1).addSimpleSlice("preferredCategoryWidth",new U.JN({descriptor:B.p.categoryAxis.preferredCategoryWidth,value:E.preferredCategoryWidth,options:{minValue:{type:0,value:20},maxValue:{type:1,value:180},unitSymbol:jt.e_},localize:De.localizer}).build(),function(Ye){return Ye.withCustomDisplayName(te?"Visual_Category_Height":"Visual_Category_Width").withCustomDescription(te?"Visual_Category_Height_Description":"Visual_Category_Width_Description").withHidden(Pe)})}),Q.build()}}function D(){var Y,De=this,O=null===(Y=this.originalCartesianData)||void 0===Y?void 0:Y.axesData;if(O?.isValueAxisSet){var ve=this.axes,y=B.p.valueAxis,E=O.valueAxis,te=ve.isYAxisCategorical,ce=te?"Visual_XAxis_Hyphen":"Visual_YAxis_Hyphen",Q=new U.CQ(new U.lg("valueAxis"),ce,[y.show,y.start,y.end,y.invertAxis,y.sharedAxis,y.scaleToFit,y.fontFamily,y.fontSize,y.bold,y.italic,y.underline,y.labelColor,y.labelDisplayUnits,y.labelPrecision,y.showAxisTitle,y.titleText,y.axisStyle,y.titleFontFamily,y.titleFontSize,y.titleBold,y.titleItalic,y.titleUnderline,y.titleColor,y.logAxisScale,y.switchAxisPosition],this.localizer),X=E.labelFontProperties,Pe=E.titleFontProperties,Ge=(new U.UN).withFontFamily({descriptor:y.fontFamily,value:X.family}).withFontSizeProperties({descriptor:y.fontSize,value:X.size.pt}).withBold({descriptor:y.bold,value:E.labelBold}).withItalic({descriptor:y.italic,value:E.labelItalic}).withUnderline({descriptor:y.underline,value:E.labelUnderline}),p=(new U.UN).withFontFamily({descriptor:y.titleFontFamily,value:Pe.family}).withFontSizeProperties({descriptor:y.titleFontSize,value:Pe.size.pt}).withBold({descriptor:y.titleBold,value:E.titleBold}).withItalic({descriptor:y.titleItalic,value:E.titleItalic}).withUnderline({descriptor:y.titleUnderline,value:E.titleUnderline}),v=Ge.build(),R=p.build();return Q.addGroup("range",function(N){var Fe=(0,we.getMergedUserDomains)(E),Ve=Fe[0],Me=Fe[1];N.withDisplayName("Visual_Axis_Range").withInheritDisabled(!1).addSimpleSlice("min",new U.mu({descriptor:(0,d.__assign)((0,d.__assign)({},y.start),{propertyTypes:{numeric:!0},instanceKind:3}),value:Ve,options:{maxValue:{type:1,value:Me}}}).build(),function(Ee){return Ee.withCustomDisplayName("Visual_Gradient_MinValue")}).addSimpleSlice("max",new U.mu({descriptor:(0,d.__assign)((0,d.__assign)({},y.end),{propertyTypes:{numeric:!0},instanceKind:3}),value:Me,options:{minValue:{type:0,value:Ve}}}).build(),function(Ee){return Ee.withCustomDisplayName("Visual_Gradient_MaxValue")}),12!==De.chartType&&N.addSimpleSlice("logAxisScale",new U.bd({descriptor:y.logAxisScale,value:E.logAxisScale}).build(),function(Ee){return Ee.withDisabled(!De.isLogAxisScaleAllowed(!0)).withCustomDescriptionIf(function(){return!De.isLogAxisScaleAllowed(!0)},"Visual_LogarithmicScaleDescription")}),N.addSimpleSlice("invertAxis",new U.bd({descriptor:y.invertAxis,value:E.invertAxis}).build(),function(Ee){return Ee.withCustomDisplayName("Visual_InvertRange")}),De.isSmallMultiples()&&N.addSimpleSlice("sharedAxis",new U.bd({descriptor:y.sharedAxis,value:E.sharedAxis}).build(),function(Ee){ve.isYAxisCategorical&&Ee.withCustomDisplayName("Visual_Shared_XAxis")}).addSimpleSlice("scaleToFit",new U.bd({descriptor:y.scaleToFit,value:E.scaleToFit}).build(),function(Ee){return Ee.withDisabled(E.sharedAxis)})}).addGroup("values",function(N){N.withDisplayName("Role_DisplayName_Values").addCompositeSlice("font","Font",v).addTopLevelToggle("show",function(){return new U.bd({descriptor:y.show,value:E.show}).build()}).addSimpleSlice("color",new U.BT({descriptor:(0,d.__assign)((0,d.__assign)({},y.labelColor),{instanceKind:3}),value:{value:X.color}}).build()),O.isValueAxisIrregular&&N.withDisabled(!0,"Visual_Axis_Disabled_IrregularAxis"),De.is100Stacked()||N.addSimpleSlice("displayUnits",new U.uY({descriptor:y.labelDisplayUnits,value:E.labelDisplayUnits}).build(),function(Fe){return Fe.withAliasName("Decimal")}).addSimpleSlice("precision",new U.mu({descriptor:y.labelPrecision,value:E.labelPrecision,options:{minValue:{type:0,value:0},maxValue:{type:1,value:Ze.vo}}}).build()),te||N.addSimpleSlice("switchAxisPosition",new U.bd({descriptor:y.switchAxisPosition,value:E.switchAxisPosition}).build(),function(Fe){return Fe.withCustomDisplayName("Visual_SwitchAxisPosition")})}).addGroup("title",function(N){N.withDisplayName("Visual_Title").withInheritDisabled(!1).addTopLevelToggle("show",function(){return new U.bd({descriptor:y.showAxisTitle,value:E.showAxisTitle}).build()}).addSimpleSlice("text",new U.fq({descriptor:y.titleText,value:E.titleText,placeholder:""}).build(),function(Fe){return Fe.withCustomDisplayName("Visual_Title_Text")}).addSimpleSlice("style",function(){return new U.uY({descriptor:y.axisStyle,value:E.axisStyle,filterValues:ve.valueAxisHasUnitType?[Pt.DO.showTitleOnly,Pt.DO.showUnitOnly,Pt.DO.showBoth]:[Pt.DO.showTitleOnly]}).build()}).addCompositeSlice("font","Font",R).addSimpleSlice("color",new U.BT({descriptor:(0,d.__assign)((0,d.__assign)({},y.titleColor),{instanceKind:3}),value:{value:Pe.color}}).build(),function(Fe){return Fe.withCustomDisplayName("Generic_Color")})}),Q.build()}}function ee(){var Y,De=this,O=null===(Y=this.originalCartesianData)||void 0===Y?void 0:Y.axesData;if(O?.isValueAxisSet&&!O.isValueAxisIrregular){var y,E,te;switch(this.chartType){case 0:case 1:y=!0,E=B.p.y2Axis.show,te=B.p.y2Axis;break;case 13:case 14:y=!0,E=B.p.valueAxis.secShow,te=B.p.valueAxis;break;default:y=!1}if(y){var ce=this.axes,Q=O,X=Q.y2,Ge=new U.CQ(new U.lg("y2Axis"),"Visual_Y2Axis_Hyphen",(0,d.__assign)((0,d.__assign)({},te),{alignZeros:B.p.valueAxis.alignZeros}),this.localizer),p=X.labelFontProperties,v=X.titleFontProperties,R=(new U.UN).withFontFamily({descriptor:te.secFontFamily,value:p.family}).withFontSizeProperties({descriptor:te.secFontSize,value:p.size.pt}).withBold({descriptor:te.secBold,value:X.labelBold}).withItalic({descriptor:te.secItalic,value:X.labelItalic}).withUnderline({descriptor:te.secUnderline,value:X.labelUnderline}),N=(new U.UN).withFontFamily({descriptor:te.secTitleFontFamily,value:v.family}).withFontSizeProperties({descriptor:te.secTitleFontSize,value:v.size.pt}).withBold({descriptor:te.secTitleBold,value:X.titleBold}).withItalic({descriptor:te.secTitleItalic,value:X.titleItalic}).withUnderline({descriptor:te.secTitleUnderline,value:X.titleUnderline}),Fe=R.build(),Ve=N.build();return Ge.addGroup("range",function(Me){var Ee=(0,we.getMergedUserDomains)(X),Ye=Ee[0],et=Ee[1];Me.withDisplayName("Visual_Axis_Range").addSimpleSlice("min",new U.mu({descriptor:(0,d.__assign)((0,d.__assign)({},te.secStart),{instanceKind:3}),value:Ye,options:{maxValue:{type:1,value:et}}}).build(),function(lt){return lt.withCustomDisplayName("Visual_Gradient_MinValue")}).addSimpleSlice("max",new U.mu({descriptor:(0,d.__assign)((0,d.__assign)({},te.secEnd),{instanceKind:3}),value:et,options:{minValue:{type:0,value:Ye}}}).build(),function(lt){return lt.withCustomDisplayName("Visual_Gradient_MaxValue")}),Me.addSimpleSlice("logAxisScale",new U.bd({descriptor:te.secLogAxisScale,value:X.logAxisScale}).build(),function(lt){return lt.withDisabled(!De.isLogAxisScaleAllowed(!0,!0)).withCustomDescriptionIf(function(){return!De.isLogAxisScaleAllowed(!0,!0)},"Visual_LogarithmicScaleDescription")}),De.isComboChart()&&Me.addSimpleSlice("alignZeroes",new U.bd({descriptor:B.p.valueAxis.alignZeros,value:Q.valueAxis.alignZeros}).build())}).addGroup("values",function(Me){Me.withDisplayName("Role_DisplayName_Values").addTopLevelToggle("show",function(){return new U.bd({descriptor:E,value:X.show}).build()}).addCompositeSlice("font","Font",Fe).addSimpleSlice("color",new U.BT({descriptor:te.secLabelColor,value:{value:p.color}}).build()),De.is100Stacked()||Me.addSimpleSlice("displayUnits",new U.uY({descriptor:te.secLabelDisplayUnits,value:X.labelDisplayUnits}).build(),function(Ee){return Ee.withAliasName("Decimal")}).addSimpleSlice("precision",new U.mu({descriptor:te.secLabelPrecision,value:X.labelPrecision,options:{minValue:{type:0,value:0},maxValue:{type:1,value:Ze.vo}}}).build())}).addGroup("title",function(Me){Me.withDisplayName("Visual_Title").withInheritDisabled(!1).addTopLevelToggle("show",function(){return new U.bd({descriptor:te.secShowAxisTitle,value:X.showAxisTitle}).build()}).addSimpleSlice("text",new U.fq({descriptor:te.secTitleText,value:X.titleText,placeholder:""}).build(),function(Ee){return Ee.withCustomDisplayName("Visual_Title_Text")}).addSimpleSlice("style",function(){return new U.uY({descriptor:te.secAxisStyle,value:X.axisStyle,filterValues:ce.valueAxisHasUnitType?[Pt.DO.showTitleOnly,Pt.DO.showUnitOnly,Pt.DO.showBoth]:[Pt.DO.showTitleOnly]}).build()}).addCompositeSlice("font","Font",Ve).addSimpleSlice("color",new U.BT({descriptor:te.secTitleColor,value:{value:v.color}}).build(),function(Ee){return Ee.withCustomDisplayName("Generic_Color")})}),Ge.build()}}}function I(){var De,Y=null===(De=this.originalCartesianData)||void 0===De?void 0:De.legendData;if(!_.isEmpty(this.dataViews)&&Y){for(var O={legendData:Y},y=0,E=this.getLayers();y<E.length;y++){var te=E[y];te.customizeLegendFormattingModelOptions&&(O=te.customizeLegendFormattingModelOptions(O))}var ce;return ce=this.featureSwitches.onObject?"Visual_LegendCard_DisabledReasonNew":13===this.chartType?"Visual_LegendCard_ComboLineClustered_DisabledReason":14===this.chartType?"Visual_LegendCard_ComboLineStacked_DisabledReason":"Visual_LegendCard_DisabledReason",(0,Jt.ZF)(O,this.hostServices,this.featureSwitches,!this.shouldShowLegendCard(),ce)}}function he(){var Y,De=this,O=null===(Y=this.originalCartesianData)||void 0===Y?void 0:Y.axesData;if(!_.isEmpty(this.dataViews)&&O){var te,ce,Q,X,ve=this.axes,y=ve.hasCategoryAxis(),E=ve.isYAxisCategorical,Ge=this.categoryAxisIsScalar().isScalar||this.hasHierarchicalAxisRenderMode;E?(te=B.p.categoryAxis,ce=O.categoryAxis,y&&(Q=B.p.valueAxis,X=O.valueAxis)):(te=B.p.valueAxis,ce=O.valueAxis,y&&12!==this.chartType&&(Q=B.p.categoryAxis,X=O.categoryAxis));var p=new U.CQ(new U.lg("gridlines"),"Visual_Gridline_Show",[B.p.categoryAxis.gridlineShow,B.p.categoryAxis.gridlineStyle,B.p.categoryAxis.gridlineColor,B.p.categoryAxis.gridlineTransparency,B.p.categoryAxis.gridlineThickness,B.p.categoryAxis.gridlineDashArray,B.p.categoryAxis.gridlineDashCap,B.p.categoryAxis.gridlineAutoScale,B.p.valueAxis.gridlineShow,B.p.valueAxis.gridlineStyle,B.p.valueAxis.gridlineColor,B.p.valueAxis.gridlineTransparency,B.p.valueAxis.gridlineThickness,B.p.valueAxis.gridlineDashArray,B.p.valueAxis.gridlineDashCap,B.p.valueAxis.gridlineAutoScale],this.localizer),v=function(N,Fe,Ve,Me){Fe&&N.withDisplayName(Me).addTopLevelToggle("show",function(){return new U.bd({descriptor:Fe.gridlineShow,value:!!Ve.show&&Ve.gridline.strokeShow}).build()},function(Ee){return Ee.withDisabled(!Ve.show)}).addSlices((0,Wt.Iq)({containerItemBuilder:N,descriptors:{strokePattern:Fe.gridlineStyle,strokeColor:Fe.gridlineColor,strokeTransparency:Fe.gridlineTransparency,strokeWidth:Fe.gridlineThickness,strokeDashArray:Fe.gridlineDashArray,strokeDashCap:Fe.gridlineDashCap,strokeAutoScale:Fe.gridlineAutoScale},strokeData:Ve.gridline,selector:void 0,featureSwitches:De.featureSwitches,localize:De.localizer,isSVGStroke:!0,colorInstanceKind:3,maxWidth:4}).map(function(Ee){return Ee.build()}))};return(ce&&!E||E&&Ge)&&p.addGroup("horizontal",function(R){return v(R,te,ce,"Visual_LabelOrientation_Horizontal")}),(Q&&X&&E||!E&&Ge)&&p.addGroup("vertical",function(R){return v(R,Q,X,"Visual_LabelOrientation_Vertical")}),p.build()}}function be(){var De=this;if(11!==this.chartType&&12!==this.chartType&&!_.isEmpty(this.dataViews)){var Y=re.N_.smallMultiplesLayout,O=re.N_.subheader,ve=new U.CQ(new U.lg("smallMultiples"),"Role_DisplayName_SmallMultiples",[Y.rowCount,Y.columnCount,Y.gridPadding,Y.advancedPaddingOptions,Y.columnPaddingInner,Y.columnPaddingOuter,Y.rowPaddingInner,Y.rowPaddingOuter,Y.gridLineType,Y.gridLineShow,Y.gridLineStyle,Y.gridLineColor,Y.gridLineTransparency,Y.gridLineWidth,Y.backgroundColor,Y.backgroundTransparency,O.show,O.fontFamily,O.fontSize,O.fontColor,O.underline,O.bold,O.italic,O.position,O.alignment,O.titleWrap],this.localizer);if(!this.showSmallMultiplesCard())return ve.withDisabled(!0,"Visual_SmallMultipleCard_DisabledReason"),ve.build();var y=(0,w.Zw)(this.dataViews[0].metadata.objects,this.layerStyle),E=(0,w.yA)(this.dataViews[0].metadata.objects,this.layerStyle),te=w.LK(y);return ve.withDescription("Small_Multiples_Layout_Description").addGroup("layout",function(ce){Mt.fF.assert(function(){return 0!==y.layoutType},"Unexpected auto layout"),ce.withDisplayName("Layout").addSimpleSlice("rowCount",new U.mu({descriptor:Y.rowCount,value:y.rowCount,options:{minValue:{type:0,value:w.$W},maxValue:{type:1,value:te.maxRowCount}}}).build()).addSimpleSlice("columnCount",new U.mu({descriptor:Y.columnCount,value:y.columnCount,options:{minValue:{type:0,value:w.fw},maxValue:{type:1,value:te.maxColumnCount}}}).build());var Q=y.advancedPaddingOptions,X={minValue:{type:0,value:0},maxValue:{type:1,value:40}};ce.addSimpleSlice("gridPadding",new U.mu({descriptor:Y.gridPadding,value:y.gridPadding,options:X}).build(),function(Pe){return Pe.withDisabled(Q).withCustomDisplayName("Small_Multiples_All_Padding")}).addSimpleSlice("advancedPadding",new U.bd({descriptor:Y.advancedPaddingOptions,value:y.advancedPaddingOptions}).build(),function(Pe){return Pe.withCustomDisplayName("Small_Multiples_Customize_Padding")}),Q&&ce.addSimpleSlice("columnPaddingInner",new U.JN({descriptor:Y.columnPaddingInner,value:y.columnPaddingInner,options:X,localize:De.localizer}).build()).addSimpleSlice("columnPaddingOuter",new U.JN({descriptor:Y.columnPaddingOuter,value:y.columnPaddingOuter,options:X,localize:De.localizer}).build()).addSimpleSlice("rowPaddingInner",new U.JN({descriptor:Y.rowPaddingInner,value:y.rowPaddingInner,options:X,localize:De.localizer}).build()).addSimpleSlice("rowPaddingOuter",new U.JN({descriptor:Y.rowPaddingOuter,value:y.rowPaddingOuter,options:X,localize:De.localizer}).build())}),ve.addGroup("border",function(ce){return ce.withDisplayName("Visual_Border").addSimpleSlice("gridLineType",new U.uY({descriptor:Y.gridLineType,value:y.gridline.region===Re.o.none?Re.o.inner:y.gridline.region}).build()).addSlices((0,Wt.Iq)({containerItemBuilder:ce,descriptors:{strokeShow:Y.gridLineShow,strokeColor:Y.gridLineColor,strokeTransparency:Y.gridLineTransparency,strokePattern:Y.gridLineStyle,strokeWidth:Y.gridLineWidth},strokeData:y.gridline,selector:void 0,featureSwitches:De.featureSwitches,localize:De.localizer}).map(function(Q){return Q.build()}))}),ve.addGroup("title",function(ce){ce.withDisplayName("Title"),ce.addTopLevelToggle("show",function(){return new U.bd({descriptor:O.show,value:!!De.showSubheaderCard()&&E.show}).build()});var Q=E.fontProperties,Pe=(new U.UN).withFontFamily({descriptor:O.fontFamily,value:Q.family}).withFontSizeProperties({descriptor:O.fontSize,value:Q.size.pt}).withBold({descriptor:O.bold,value:E.labelBold}).withItalic({descriptor:O.italic,value:E.labelItalic}).withUnderline({descriptor:O.underline,value:E.labelUnderline}).build();ce.addSimpleSlice("position",function(){var Ge;switch(E.vertical){default:case 0:Ge=ft.cL.top;break;case 1:Ge=ft.cL.bottom}return new U.uY({descriptor:O.position,value:Ge}).build()}).addCompositeSlice("font","Font",Pe).addSimpleSlice("color",new U.BT({descriptor:(0,d.__assign)((0,d.__assign)({},O.fontColor),{instanceKind:3,selector:{data:[(0,xt.Yp)([B.x.rows])]},altConstantValueSelector:null}),value:{value:Q.color}}).build()).addSimpleSlice("alignment",function(){var Ge;switch(E.horizontal){default:case 0:Ge=Vt.D.left;break;case 1:Ge=Vt.D.center;break;case 2:Ge=Vt.D.right}return new U.Gp({descriptor:O.alignment,value:Ge,mode:"horizontalAlignment"}).build()}),ce.addSimpleSlice("titleWrap",new U.bd({descriptor:O.titleWrap,value:E.titleWrap}).build(),function(Ge){return Ge.withCustomDisplayName("TextWrap")})}),ve.addGroup("background",function(ce){return ce.withDisplayName("Visual_Background").addSimpleSlice("color",new U.BT({descriptor:(0,d.__assign)((0,d.__assign)({},Y.backgroundColor),{selector:{data:[(0,xt.Yp)([B.x.rows])]},altConstantValueSelector:null,instanceKind:3}),value:{value:y.backgroundColor},isNoFillItemSupported:!0}).build(),function(Q){return Q.withCustomDisplayName("Generic_Color")}).addSimpleSlice("transparency",U.JN.getTransparencySliderBuilder({descriptor:Y.backgroundTransparency,value:y.backgroundTransparency,localize:De.localizer}).build(),function(Q){return Q.withCustomDisplayName("Transparency")})}),ve.build()}}function de(De,Y){return new U.JN({descriptor:B.p.categoryAxis.innerPadding,value:w.qE(De),options:{minValue:{type:0,value:w.T4},maxValue:{type:1,value:w.zn},unitSymbol:jt.t2},localize:Y}).build()}function q(De){if(De)for(var O=De,ve=0,y=this.getLayers();ve<y.length;ve++){var E=y[ve];return E.customizeFormattingCard&&(O=E.customizeFormattingCard(De)),O}}function ye(De){for(var O=0,ve=this.getLayers();O<ve.length;O++){var y=ve[O];if(y.getSubSelectionCustomOutlines){var E=y.getSubSelectionCustomOutlines(De);if(E)return E}}return[]}function ne(De){for(var O=0,ve=this.getLayers();O<ve.length;O++){var y=ve[O];if(y.getSubSelectionCustomElements){var E=y.getSubSelectionCustomElements(De);if(E)return E}}return[]}function Le(De){for(var O=0,ve=this.getLayers();O<ve.length;O++){var y=ve[O];if(y.getSubSelectionMetadata){var E=y.getSubSelectionMetadata(De);if(E)return E}}return null}function qe(De){if(this.featureSwitches.onObject){var ve,y,O=_.first(De).visualObjects;if(!(O.length>0))return;ve=O[0],ve?.selectorsByColumn&&(y=(0,dt.fd)((0,dt.tV)(ve.selectorsByColumn)));var E=1===this.getLayers().length&&this.cartesianData.legendData.dataPoints.length<=1,te=this.isComboChart();switch(ve.objectName){case"legend-title":return(0,Jt.aJ)();case"x-axis-zoom-slider":case"y1-axis-zoom-slider":case"y2-axis-zoom-slider":return;case"legend-items":return(0,Jt.Gh)(this.hostServices);case"horizontal-gridlines":return Ue.w3(this.hostServices,this.axes.isYAxisCategorical?B.p.categoryAxis.gridlineColor:B.p.valueAxis.gridlineColor);case"vertical-gridlines":return Ue.w3(this.hostServices,this.axes.isYAxisCategorical?B.p.valueAxis.gridlineColor:B.p.categoryAxis.gridlineColor);case"series-labels":var ce=E?void 0:y;return Ue.un(this.hostServices,{fontFamilyReference:(0,d.__assign)((0,d.__assign)({},re.N_.seriesLabels.seriesFontFamily),{selector:ce}),fontSizeReference:(0,d.__assign)((0,d.__assign)({},re.N_.seriesLabels.textSize),{selector:ce}),boldReference:(0,d.__assign)((0,d.__assign)({},re.N_.seriesLabels.bold),{selector:ce}),italicReference:(0,d.__assign)((0,d.__assign)({},re.N_.seriesLabels.italic),{selector:ce}),underlineReference:(0,d.__assign)((0,d.__assign)({},re.N_.seriesLabels.underline),{selector:ce}),fontColorReference:(0,d.__assign)((0,d.__assign)({},re.N_.seriesLabels.seriesColor),{selector:ce}),backgroundReference:(0,d.__assign)((0,d.__assign)({},re.N_.seriesLabels.backgroundColor),{selector:ce}),wordWrapReference:(0,d.__assign)((0,d.__assign)({},re.N_.seriesLabels.seriesWordWrap),{selector:ce})});case"x-axis-title":return ot(!1,te,!this.axes.isYAxisCategorical,this.hostServices);case"y1-axis-title":return ot(!1,te,this.axes.isYAxisCategorical,this.hostServices);case"y2-axis-title":return ot(!0,te,this.axes.isYAxisCategorical,this.hostServices);case"x-axis-values":return ge(!1,te,!this.axes.isYAxisCategorical,this.hostServices);case"y1-axis-values":return ge(!1,te,this.axes.isYAxisCategorical,this.hostServices);case"y2-axis-values":return ge(!0,te,this.axes.isYAxisCategorical,this.hostServices);case"grid-cell-subheader":var Q=re.N_.subheader;return Ue.un(this.hostServices,{fontFamilyReference:Q.fontFamily,fontSizeReference:Q.fontSize,boldReference:Q.bold,italicReference:Q.italic,underlineReference:Q.underline,fontColorReference:(0,d.__assign)((0,d.__assign)({},Q.fontColor),{selector:{data:[(0,xt.Yp)([B.x.rows])]}}),horizontalAlignmentReference:Q.alignment,wordWrapReference:Q.titleWrap});case"small-multiples-gridlines":var X=re.N_.smallMultiplesLayout;return Ue.w3(this.hostServices,X.gridLineColor,(0,d.__assign)((0,d.__assign)({},X.backgroundColor),{selector:{data:[(0,xt.Yp)([B.x.rows])]}}),this.localizer("Visual_Border"));default:for(var Pe=0,Ge=this.getLayers();Pe<Ge.length;Pe++){var p=Ge[Pe];if(p.getSubSelectionStyles){var v=p.getSubSelectionStyles(De);if(v)return v}}}}}function ct(De,Y){if(this.featureSwitches.onObject&&!Y){var y,ve=_.first(De).visualObjects;if(!(ve.length>0))return;y=ve[0];var X,E=this.getLayers(),te=this.isComboChart(),ce=E.length<=1&&this.cartesianData.legendData.dataPoints.length<=1,Q={key:"Delete",nextValue:!1};switch(!ce&&!_.isEmpty(y.selectorsByColumn)&&(X=(0,dt.fd)((0,dt.tV)(y.selectorsByColumn))),y.objectName){case"legend-title":return(0,Jt.tV)(this.hostServices);case"legend-items":return(0,Jt.tY)({hostServices:this.hostServices,showSort:!0});case"horizontal-gridlines":return[(0,d.__assign)((0,d.__assign)({type:2},(this.axes.isYAxisCategorical?B.p.categoryAxis:B.p.valueAxis).gridlineShow),{disabledLabel:this.localizer("Delete"),keyboardShortcuts:[Q]}),{type:0},{type:1,destinationInfo:{cardUid:"".concat("Visual","-").concat("gridlines"),groupUid:"".concat("gridlines","-").concat("horizontal")},label:this.localizer("Format_Gridlines")}];case"vertical-gridlines":return[(0,d.__assign)((0,d.__assign)({type:2},(this.axes.isYAxisCategorical?B.p.valueAxis:B.p.categoryAxis).gridlineShow),{disabledLabel:this.localizer("Delete"),keyboardShortcuts:[Q]}),{type:0},{type:1,destinationInfo:{cardUid:"".concat("Visual","-").concat("gridlines"),groupUid:"".concat("gridlines","-").concat("vertical")},label:this.localizer("Format_Gridlines")}];case"data-labels":var p=ce?re.N_.labels.show:re.N_.labels.showSeries;return[(0,d.__assign)((0,d.__assign)({type:2},p),{disabledLabel:this.localizer("Delete"),selector:X,keyboardShortcuts:[Q]}),{type:0,excludedResetFormattingIds:[(0,d.__assign)((0,d.__assign)({},p),{selector:X})],relatedResetFormattingIds:[(0,d.__assign)((0,d.__assign)({},re.N_.labels.enableBackground),{selector:X})]},{type:1,destinationInfo:(0,d.__assign)((0,d.__assign)({},re.N_.labels.labelPosition),{selector:X}),label:this.localizer("Format_Data_Labels")}];case"series-labels":return[(0,d.__assign)((0,d.__assign)({type:2},re.N_.seriesLabels.show),{disabledLabel:this.localizer("Delete"),selector:X,keyboardShortcuts:[Q]}),{type:0,relatedResetFormattingIds:[(0,d.__assign)((0,d.__assign)({},re.N_.seriesLabels.enableBackground),{selector:X})],excludedResetFormattingIds:[(0,d.__assign)((0,d.__assign)({},re.N_.seriesLabels.show),{selector:X})]},{type:1,destinationInfo:(0,d.__assign)((0,d.__assign)({},re.N_.seriesLabels.seriesPosition),{selector:X}),label:this.localizer("Format_Series_Labels")}];case"total-labels":return[(0,d.__assign)((0,d.__assign)({type:2},re.N_.totals.show),{disabledLabel:this.localizer("Delete"),keyboardShortcuts:[Q]}),{type:0,excludedResetFormattingIds:[re.N_.totals.show]},{type:1,destinationInfo:{cardUid:"".concat("Visual","-").concat("totals"),groupUid:"".concat("totals","-").concat("values")},label:this.localizer("Format_Total_Labels")}];case"x-axis-title":return Qe(!1,te,!this.axes.isYAxisCategorical,this.categoryAxisIsScalar().isScalar,this.hostServices);case"y1-axis-title":return Qe(!1,te,this.axes.isYAxisCategorical,this.categoryAxisIsScalar().isScalar,this.hostServices);case"y2-axis-title":return Qe(!0,te,this.axes.isYAxisCategorical,this.categoryAxisIsScalar().isScalar,this.hostServices);case"x-axis-values":return ue(!1,te,!this.axes.isYAxisCategorical,this.categoryAxisIsScalar().isScalar,this.categoryAxisIsScalar().supportedType,this.hostServices);case"y1-axis-values":return ue(!1,te,this.axes.isYAxisCategorical,this.categoryAxisIsScalar().isScalar,this.categoryAxisIsScalar().supportedType,this.hostServices);case"y2-axis-values":return ue(!0,te,this.axes.isYAxisCategorical,this.categoryAxisIsScalar().isScalar,this.categoryAxisIsScalar().supportedType,this.hostServices);case"grid-cell-subheader":return[(0,d.__assign)((0,d.__assign)({type:2},re.N_.subheader.show),{disabledLabel:this.localizer("Delete"),keyboardShortcuts:[Q]}),{type:0},{type:1,destinationInfo:{cardUid:"".concat("Visual","-").concat("smallMultiples"),groupUid:"".concat("smallMultiples","-").concat("title")},label:this.localizer("Format_Small_Multiples_Title")}];case"small-multiples-gridlines":return[{type:0},(0,d.__assign)((0,d.__assign)({type:3},re.N_.smallMultiplesLayout.gridLineType),{label:this.localizer("Small_Multiples_Gridlines_Style")}),{type:1,destinationInfo:{cardUid:"".concat("Visual","-").concat("smallMultiples"),groupUid:"".concat("smallMultiples","-").concat("border")},label:this.localizer("Format_Small_Multiples_Border")}];case"x-axis-zoom-slider":case"y1-axis-zoom-slider":case"y2-axis-zoom-slider":return[(0,d.__assign)((0,d.__assign)({type:2},"y2-axis-zoom-slider"===y.objectName?me.t.showOnValueSecAxis:!("x-axis-zoom-slider"!==y.objectName)==!!this.axes.isYAxisCategorical?me.t.showOnValueAxis:me.t.showOnCategoryAxis),{disabledLabel:this.localizer("Delete"),keyboardShortcuts:[Q]}),{type:0,excludedResetFormattingIds:[me.t.showOnValueSecAxis]},(0,d.__assign)((0,d.__assign)({type:2},me.t.showLabels),{enabledLabel:this.localizer("Format_AddSliderLabels")}),(0,d.__assign)((0,d.__assign)({type:2},me.t.showTooltip),{enabledLabel:this.localizer("Format_AddSliderTooltips")}),{type:1,destinationInfo:{cardUid:"".concat("Visual","-").concat("zoom"),groupUid:"".concat("zoom","-").concat("default")},label:this.localizer("Format_ZoomSlider")}];default:for(var Me=0,Ee=E;Me<Ee.length;Me++){var Ye=Ee[Me];if(Ye.getSubSelectionShortcuts){var et=Ye.getSubSelectionShortcuts(De,Y);if(et)return et}}}}}function tt(De){for(var Y=this.subSelectionHelper.getAllSubSelectables(De),ve=0,y=this.getLayers();ve<y.length;ve++){var E=y[ve];E.getDisambiguationSubSelectables&&Y.push.apply(Y,E.getDisambiguationSubSelectables(this.subSelectionHelper,De))}return Y}},63616:function(vi,ma,x){"use strict";x.r(ma),x.d(ma,{CartesianAxisRenderModeSelector:function(){return gs},CartesianCategoryLoadMoreDataHandler:function(){return to},CartesianChart:function(){return Nu},SharedColorPalette:function(){return eo}});var d=x(81337),B=x(22733),re=x(86946),Ze=x(90120),Ue=x(95938),Wt=x(51650),aa=x(95309),jt=x(33777),Jt=x(28579),Pt=x(47006),Be=x(52287),Vt=x(86900),ft=x(92783),Dt=x(45545),Mt=x(65741),U=x(72902),dt=x(40739),xt=x(48766),ze=x(45296),we=x(44783),w=x(62458),me=x(39681),ot=x(58778),ge=x(56578),Qe=x(60810),ue=x(46135),M=x(38958),b=x(82755),W=x(79154),Z=x(32041),Ne=x(64329),Se=x(3087),Re=x(38168),j=x(18664),le=x(95519),ae=x(80065),D=x(11956),ee=x(45863),I=x(53197),he=(0,W.CH)("noUi-target"),be=(0,W.CH)("noUi-base"),de=(0,W.CH)("noUi-value"),q=(0,W.CH)("noUi-handle"),Le=function(){function r(){}return r.createOrUpdateSliders=function(e){var a=e.axesData,i=e.zoomAxes,n=e.zoomData,s=e.zoomExtents,o=e.hasYAxisCategorical,l=e.yFlipped,u=e.maxLabelWidthLeft,c=e.maxLabelWidthRight,h=e.resetEventHandlers,f=e.hideSliders,g=e.visualHostServices,A=e.invertedState;e.containers.each(function(S){var P,V,C=r.getAxisType(S,l),L=!1;if("y2"===C?(P=i.valueSecAxis,V=s.valueSecExtent):"y1"===C&&o||"x"===C&&!o?(P=i.categoryAxis,V=s.categoryExtent):(P=i.valueAxis,V=s.valueExtent),P){var k=r.getAxisData(C,a),z=P.scale.domain(),J=P.d3Axis.tickValues(),fe=k.logAxisScale&&(0,D.isLogScaleAllowedFunc)(z),G=f?"none":r.getScaleType(z,fe);"none"!==G&&fe&&(V=r.calcLogSliderValues(V),z=r.calcLogSliderValues(z),J=r.calcLogSliderValues(J));var K=r.getFormatFn(P,G),ie=d3.select(this),Oe=ie.select(he.selector);r.wasInverted(C,a,A)&&(Oe.node()&&Oe.node().noUiSlider.destroy(),L=!0),Oe.node()&&!L?r.updateSlider({slider:Oe,axisType:C,axisData:k,zoomData:n,hasYAxisCategorical:o,extent:V,scaleDomain:z,labelValues:J,maxLabelWidth:"left"===S?u:c,scaleType:G,formatFn:K,resetEventHandlers:h,visualHostServices:g}):r.createSlider({container:ie,axisType:C,axisData:k,zoomData:n,hasYAxisCategorical:o,extent:V,scaleDomain:z,labelValues:J,maxLabelWidth:"left"===S?u:c,scaleType:G,formatFn:K,visualHostServices:g})}})},r.createSlider=function(e){var a=e.axisType,i=e.axisData,n=e.zoomData,s=e.hasYAxisCategorical,o=e.extent,l=e.scaleDomain,u=e.labelValues,c=e.maxLabelWidth,h=e.scaleType,f=e.formatFn,g=e.visualHostServices;if("none"!==h){var A=e.container.append("div").attr("rtl","rtl"===document.dir);(0,ee.create)(A.node(),{start:o,range:{min:l[0],max:l[1]},margin:.001*(l[1]-l[0]),connect:!0,behaviour:"tap-drag",orientation:"x"===a?"horizontal":"vertical",direction:"x"===a?i.invertAxis?"rtl":"ltr":i.invertAxis?"ltr":"rtl",tooltips:!!n.showTooltip&&[{to:f},{to:f}],pips:n.showLabels?{mode:"values",values:u,format:{to:f,from:void 0}}:void 0}),A.select(be.selector).attr("drag-resize-disabled",!0).on("keydown",function(){return d3.event.stopPropagation()}),this.applyVisualAxisStyles(A,a,i,c);var S=this.getAxisZoomPropertyNames(a,s);A.node().querySelectorAll(q.selector).forEach(function(C){C.setAttribute("aria-label",e.visualHostServices.getLocalizedString("Visual_ZoomSlider"))}),A.node().noUiSlider.on("slide",_.throttle(function(C,L,P){r.onSlide(S.min,S.max,S.size,P,this.options.range.min,this.options.range.max,h,g)},100)),this.convertSliderToSubSelectable(A,a)}},r.updateSlider=function(e){var t=e.slider,a=e.axisType,i=e.axisData,n=e.zoomData,s=e.hasYAxisCategorical,o=e.extent,l=e.scaleDomain,u=e.labelValues,c=e.maxLabelWidth,h=e.scaleType,f=e.formatFn,g=e.resetEventHandlers,A=e.visualHostServices;if("none"!==h){if(t.node().noUiSlider.updateOptions({start:o,range:{min:l[0],max:l[1]},margin:.001*(l[1]-l[0]),tooltips:!!n.showTooltip&&[{to:f},{to:f}],pips:n.showLabels?{mode:"values",values:u,format:{to:f,from:void 0}}:null},!1),this.applyVisualAxisStyles(t,a,i,c),g){var S=this.getAxisZoomPropertyNames(a,s);t.node().noUiSlider.off("slide"),t.node().noUiSlider.on("slide",_.throttle(function(C,L,P){r.onSlide(S.min,S.max,S.size,P,this.options.range.min,this.options.range.max,h,A)},100))}this.convertSliderToSubSelectable(t,a)}else t.node().noUiSlider.destroy()},r.convertSliderToSubSelectable=function(e,t){var a=this;e.classed(Be.cy,!0).attr(Be.Ez,this.getAxisZoomSliderSubSelectableRegionAttribute(t)).attr(Be.CK,"Visual_ZoomSlider").attr(Be.QZ,0);var i=e.node();Be.O5.setDataForElement(i,{getRegionOutlines:function(){return a.getSliderOutlines(i,t)}})},r.getSliderOutlines=function(e,t){var a=e.getBoundingClientRect(),i=e.querySelector(q.selector).getBoundingClientRect().width/2;return[{id:this.getAxisZoomSliderSubSelectableRegionAttribute(t),outline:{x:a.x-i,y:a.y-i,width:i+a.width+i,height:i+a.height+i,type:1}}]},r.getAxisZoomSliderSubSelectableRegionAttribute=function(e){switch(e){case"x":return"x-axis-zoom-slider";case"y1":return"y1-axis-zoom-slider";case"y2":return"y2-axis-zoom-slider";default:w.fF.assertFail("Unsupported axis type")}},r.destroySliders=function(e){var a=e.hasYAxisCategorical,i=e.yFlipped,n=e.visualHostServices;e.containers.each(function(s){var o=r.getAxisType(s,i);r.destroySlider({axisType:o,hasYAxisCategorical:a,visualHostServices:n})})},r.destroySlider=function(e){var i=e.visualHostServices,n=this.getAxisZoomPropertyNames(e.axisType,e.hasYAxisCategorical),s={};s[n.min]=!0,s[n.max]=!0,s[n.size]=!0,i.persistProperties({remove:[{objectName:"zoom",properties:s,selector:void 0}]},!0)},r.onSlide=function(e,t,a,i,n,s,o,l){var u={},c={};i=_.map(i,function(f){return r.calcOriginalValue(f,o)}),n=r.calcOriginalValue(n,o),s=r.calcOriginalValue(s,o);var h=i[1]-i[0];i[0]===n&&i[1]===s?(c[e]=!0,c[t]=!0,c[a]=!0):i[0]===n?(c[e]=!0,u[t]=1,u[a]=h):i[1]===s?(u[e]=1,c[t]=!0,u[a]=h):(u[e]=i[0],u[t]=i[1],c[a]=!0),l.persistProperties({merge:[{objectName:"zoom",properties:u,selector:void 0}],remove:[{objectName:"zoom",properties:c,selector:void 0}]},!0)},r.getAxisType=function(e,t){switch(e){case"bottom":return"x";case"left":return t?"y2":"y1";case"right":return t?"y1":"y2";default:w.fF.assertNever(e)}},r.getFormatFn=function(e,t){var a;if("none"!==t){var i=null!==(a=e.d3Axis.tickFormat())&&void 0!==a?a:D.defaultTickFormat;return function(n){return i(r.calcOriginalValue(n,t),0)}}},r.calcLogSliderValues=function(e){return _.map(e,function(t){return r.log10(Math.abs(t))})},r.calcOriginalValue=function(e,t){switch(t){case"linear":return e;case"log":return Math.pow(10,e);case"rLog":return-Math.pow(10,e);default:w.fF.assertNever(t)}},r.applyVisualAxisStyles=function(e,t,a,i){var n=a.labelFontProperties;e.selectAll(de.selector).styles((0,j.wB)(n)),"x"!==t&&e.selectAll(de.selector).call(I.oq,i,Z.b.svgEllipsis)},r.getAxisData=function(e,t){return t["y1"===e?"y":e]},r.getScaleType=function(e,t){return w.fF.assert(function(){return e[0]!==e[1]},"Scale domain should not have zero width"),t?(w.fF.assert(function(){return e[0]<0&&e[1]<0||e[0]>0&&e[1]>0},"Log scale domain should not cross or contain 0"),e[0]<0?"rLog":"log"):"linear"},r.log10=function(e){return Math.log(e)/Math.log(10)},r.wasInverted=function(e,t,a){return"x"===e&&a?.x!==t.x.invertAxis||"y1"===e&&a?.y!==t.y.invertAxis||"y2"===e&&a?.y2!==t.y2.invertAxis},r.getAxisZoomPropertyNames=function(e,t){return"y2"===e?{min:Se.t.valueSecMin.propertyName,max:Se.t.valueSecMax.propertyName,size:Se.t.valueSecSize.propertyName}:"y1"===e&&t||"x"===e&&!t?{min:Se.t.categoryMin.propertyName,max:Se.t.categoryMax.propertyName,size:Se.t.categorySize.propertyName}:{min:Se.t.valueMin.propertyName,max:Se.t.valueMax.propertyName,size:Se.t.valueSize.propertyName}},r}(),qe=(0,W.CH)("zoom"),De=function(){function r(e,t,a,i){this.hostServices=t,this.isScrollable=a,this.featureSwitches=i,this._zoomData=(0,d.__assign)({},r.DefaultOptions),this.axesLabels={},this.zoomContext=d3.select(e.get(0)).append("div").attr("class","axisZoom").style("position","absolute"),this.zoomAxes={categoryAxis:void 0,valueAxis:void 0,valueSecAxis:void 0},this.zoomExtents={categoryExtent:void 0,valueExtent:void 0,valueSecExtent:void 0}}return r.prototype.destroy=function(){this.zoomContext.selectAll(qe.selector).remove()},r.prototype.update=function(e){var t,a,i,n=e.dataViews,s=e.hasScalarCategoryAxis;if(this.hasSmallMultiples=e.hasSmallMultiples,this.hasYAxisCategorical=e.hasYAxisCategorical,this._zoomData=this.hasSmallMultiples||!this.isScrollable?(0,d.__assign)({},r.DefaultOptions):e.zoomData,s||(this._zoomData.showOnCategoryAxis=!1),this.hasValueAxis=!1,this.hasCategoryAxis=!1,this.hasY2Axis=!1,n){for(var o=0,l=n;o<l.length;o++){var u=l[o];this.hasCategoryAxis||(this.hasCategoryAxis=s&&((0,M.c5)(u,B.x.category)||(0,M.c5)(u,B.x.x))),this.hasValueAxis||(this.hasValueAxis=(0,M.c5)(u,B.x.y)),this.hasY2Axis||(this.hasY2Axis=(0,M.c5)(u,B.x.y2))}(t=this._zoomData).showOnValueAxis&&(t.showOnValueAxis=this.hasValueAxis),(a=this._zoomData).showOnValueSecAxis&&(a.showOnValueSecAxis=this.hasY2Axis),(i=this._zoomData).showOnCategoryAxis&&(i.showOnCategoryAxis=this.hasCategoryAxis)}},r.prototype.render=function(e){var t,i,n,s,a=this,o=(t=e.axesLayout).margin,l=t.shouldRenderAxis,u=e.axesData,c=(0,d.__assign)({},this.baseZoomAxesPosition);if(c.bottom){c.bottom.width-=o.left+o.right;var h=u?.showsSeriesLabels()?(0,le.lr)(u.seriesLabelSettings,c.bottom.width):0;c.bottom.width-=h,c.bottom.left+=o.left+(u.seriesLabelSettings.position===Re.M.left?h:0),!this.hasYAxisCategorical&&this.xOuterPadding&&(c.bottom.left+=this.xOuterPadding,c.bottom.width-=2*this.xOuterPadding)}c.left&&(c.left.top+=o.top,c.left.height-=o.top+o.bottom),c.right&&(c.right.top+=o.top,c.right.height-=o.top+o.bottom);var f=this.axesLabels,g=this.yFlipped,A=null===(i=this.zoomAxes.categoryAxis)||void 0===i?void 0:i.scale.domain(),S=null===(n=this.zoomAxes.valueAxis)||void 0===n?void 0:n.scale.domain(),C=null===(s=this.zoomAxes.valueSecAxis)||void 0===s?void 0:s.scale.domain(),P=!(l.x||l.y||l.y2)||A&&A[0]===A[1]||S&&S[0]===S[1]||C&&C[0]===C[1],V=this.featureSwitches&&this.featureSwitches.onObject,k=this;this.zoomContext.selectAll(qe.selector).style("top",function(z){return c[z].top?"".concat(c[z].top,"px"):null}).style("left",function(z){return c[z].left?"".concat(c[z].left,"px"):null}).style("width",function(z){return"".concat(c[z].width,"px")}).style("height",function(z){return"".concat(c[z].height,"px")}).call(function(z){return Le.createOrUpdateSliders({containers:z,axesData:u,zoomAxes:a.zoomAxes,zoomData:a.zoomData,zoomExtents:a.zoomExtents,hasYAxisCategorical:a.hasYAxisCategorical,yFlipped:a.yFlipped,maxLabelWidthLeft:a.maxZoomLabelWidthLeft,maxLabelWidthRight:a.maxZoomLabelWidthRight,resetEventHandlers:a.resetEventHandlers,hideSliders:P,visualHostServices:a.hostServices,invertedState:a.invertedState})}).each(function(z){var fe,J=d3.select(this);switch(z){case"bottom":fe="x";break;case"left":fe=g?"y2":"y";break;case"right":fe=g?"y":"y2";break;default:w.fF.assertFail(z)}var K,G=u[fe].titleFontProperties,ie=[];if(u[fe].showAxisTitle&&!P){var Oe=f[fe];w.fF.assertValue("axisZoom: axisLabel",Oe),!Oe&&e.showTitlePlaceholders&&V&&(Oe=k.hostServices.getLocalizedString("Format_AddAxisTitle"),K=!0),ie=[Oe]}J.selectAll(".title").data(ie,function(je){return je}).join(function(je){return je.append("span").attr("class","title")}).each(function(je){var Ut,ke=d3.select(this),Je=(0,j.qk)(G,je),Xe=c[z].height,wt=c[z].width,Yt=G.size.px;switch(z){case"bottom":Ut=wt,ke.style("top","".concat(Xe-Yt,"px")).style("left","50%").style("width","100%").style("transform","translateX(-50%)");break;case"left":Ut=Xe,ke.style("width","".concat(Xe,"px")).style("transform","translateX(-".concat(Xe/2,"px)rotate(-90deg)")).style("top","".concat(Xe/2-r.SliderHandleRadius,"px"));break;case"right":Ut=Xe,ke.style("width","".concat(Xe,"px")).style("transform","translateX(-".concat(Xe/2-8,"px)rotate(-90deg)")).style("top","".concat(Xe/2-r.SliderHandleRadius,"px")).style("left","".concat(wt-Yt,"px"));break;default:w.fF.assertNever(z)}if(ke.styles((0,j.wB)(G)).text(Z.b.getTailoredTextOrDefault(Je,Ut)),V){ke.classed(Be.cy,!0).attr(Be.CK,"Visual_Axis_Title").attr(Be.QZ,1);var Ct=void 0;switch(fe){case"x":ke.attr(Be.Ez,"x-axis-title"),Ct=(0,ae.s4)(u.categoryAxis===u.x?B.p.categoryAxis.titleText:B.p.valueAxis.titleText,f.x);break;case"y":ke.attr(Be.Ez,"y1-axis-title"),Ct=(0,ae.Mw)(u.categoryAxis===u.y?B.p.categoryAxis.titleText:B.p.valueAxis.titleText,f.y);break;case"y2":ke.attr(Be.Ez,"y2-axis-title"),Ct=(0,ae.Mw)(B.p.valueAxis.secTitleText,f.y2);break;default:w.fF.assertFail(fe)}K&&ke.classed(Be.Qh.class,!0),Ct&&ke.attr(Be.kv,JSON.stringify(Ct))}})}),this.invertedState={x:u.x.invertAxis,y:u.y.invertAxis,y2:u.y2.invertAxis}},r.prototype.renderContainers=function(e,t,a,i){var n,s=this;void 0===a&&(a=0),this.resetEventHandlers=void 0!==this.yFlipped&&t.y.switchAxisPosition!==this.yFlipped||void 0!==this.isLogScaleX&&t.x.logAxisScale!==this.isLogScaleX||void 0!==this.isLogScaleY1&&t.y.logAxisScale!==this.isLogScaleY1||void 0!==this.isLogScaleY2&&t.y2.logAxisScale!==this.isLogScaleY2,this.yFlipped=t.y.switchAxisPosition,this.isLogScaleX=t.x.logAxisScale,this.isLogScaleY1=t.y.logAxisScale,this.isLogScaleY2=t.y2.logAxisScale;var o={top:0,left:0,right:0,bottom:0},l=[];if(this.zoomData.show){var c=(n=this.zoomData).show,h=n.showOnCategoryAxis,f=n.showOnValueAxis,A=n.showLabels;if(c){var C=f&&!this.hasYAxisCategorical||h&&this.hasYAxisCategorical,L=n.showOnValueSecAxis;(h&&!this.hasYAxisCategorical||f&&this.hasYAxisCategorical)&&(o.bottom+=16,A&&(o.bottom+=t.x.labelFontProperties.size.px+r.StaticPadding),t.x.showAxisTitle&&(o.bottom+=t.x.titleFontProperties.size.px+r.StaticPadding),l.push("bottom")),(C&&!this.yFlipped||L&&this.yFlipped)&&(this.maxZoomLabelWidthLeft=this.getMaxYLabelWidth("left",this.yFlipped,t),o.left+=(A?16+this.maxZoomLabelWidthLeft+r.StaticPadding:16)+8,t.y.showAxisTitle&&!this.yFlipped?o.left+=t.y.titleFontProperties.size.px+r.StaticPadding:t.y2.showAxisTitle&&this.yFlipped&&(o.left+=t.y2.titleFontProperties.size.px+r.StaticPadding),l.push("left")),(L&&!this.yFlipped||C&&this.yFlipped)&&(this.maxZoomLabelWidthRight=this.getMaxYLabelWidth("right",this.yFlipped,t),o.right+=(A?16+this.maxZoomLabelWidthRight+r.StaticPadding:16)+8,t.y2.showAxisTitle&&!this.yFlipped?o.right+=t.y2.titleFontProperties.size.px+r.StaticPadding:t.y.showAxisTitle&&this.yFlipped&&(o.right+=t.y.titleFontProperties.size.px+r.StaticPadding),l.push("right"))}}this.baseZoomAxesPosition=this.calculateZoomAxesPositions(l,e,o,a);var V=this.zoomContext.selectAll(".zoom").data(l,function(J){return J});V.enter().append("div").attr("class",function(J){return"zoom zoom-".concat(J)}).attr("tabindex",0).attr("focus-nav-mode","Hierarchy").attr("role","group").attr("aria-label",this.hostServices.getLocalizedString("Slicer_Slider")).style("position","absolute");var k=V.exit();return this.resetEventHandlers||k.call(function(J){return Le.destroySliders({containers:J,hasYAxisCategorical:s.hasYAxisCategorical,yFlipped:s.yFlipped,visualHostServices:s.hostServices})}),k.remove(),_.some(o,function(J){return 0!==J})?o:void 0},r.prototype.updateShowAxisTitles=function(e){var t,a=(t=this.zoomData).show,i=t.showOnCategoryAxis,n=t.showOnValueAxis;return a?{x:e.x&&!(this.hasYAxisCategorical?n:i),y:e.y&&!(this.hasYAxisCategorical?i:n),y2:e.y2&&!t.showOnValueSecAxis}:e},r.prototype.updateAxisTitles=function(e){this.zoomData.show&&(this.axesLabels=(0,d.__assign)((0,d.__assign)({},this.axesLabels),e))},r.prototype.getCategoryZoomFactor=function(){var e,t=null===(e=this.zoomAxes.categoryAxis)||void 0===e?void 0:e.scale.domain(),a=this.zoomExtents.categoryExtent;if(_.isEmpty(t)||_.isEmpty(a))return 1;var i=Math.abs(t[1]-t[0]),n=Math.abs(a[1]-a[0]);return 0===n?1:Math.max(1,i/n)},r.prototype.updateAxisOptions=function(e,t){var a,i,n;if(t.isScalar&&this.zoomData.show){var s=function(c,h){if(t.domainOptions){var f=t.domainOptions.domain,g=e.scale.domain();c=[Math.max(c[0],Math.min(f[0],g[0])),Math.min(c[1],Math.max(f[1],g[1]))]}c[0]=Math.min(c[0],c[1]),t.domainOptions=(0,D.createScalarDomainOptions)(c),t.preventNice||(t.preventNice=h),t.includeZero&&(t.includeZero=!h)};if(t.isCategoryAxis){if(this.zoomData.showOnCategoryAxis){this.zoomAxes.categoryAxis=e;var o=(a=r.getAxisRange(e,this.zoomData.categoryMin,this.zoomData.categoryMax,this.zoomData.categorySize)).domain,l=a.force;this.zoomExtents.categoryExtent=o,s(o,l),this.hasYAxisCategorical||(this.xOuterPadding=e.outerPadding)}}else t.isSecValueAxis?this.zoomData.showOnValueSecAxis&&(this.zoomAxes.valueSecAxis=e,o=(i=r.getAxisRange(e,this.zoomData.valueSecMin,this.zoomData.valueSecMax,this.zoomData.valueSecSize)).domain,l=i.force,this.zoomExtents.valueSecExtent=o,s(o,l)):this.zoomData.showOnValueAxis&&(this.zoomAxes.valueAxis=e,o=(n=r.getAxisRange(e,this.zoomData.valueMin,this.zoomData.valueMax,this.zoomData.valueSize)).domain,l=n.force,this.zoomExtents.valueExtent=o,s(o,l))}},r.prototype.skipMergingValueAxisDomains=function(){return this.zoomData.show&&(this.zoomData.showOnValueAxis||this.zoomData.showOnValueSecAxis)},r.getAxisRange=function(e,t,a,i){var n=e.scale.domain(),s=[void 0,void 0];return null!=i?(w.fF.assert(function(){return t!==a},"axisZoom: only one of min/max should be set if size is set"),null!=a?(w.fF.assert(function(){return null==t},"axisZoom: if size and max is set, min should not (zooming linked to min extent)"),s=[n[0],Math.min(n[0]+i,n[1])]):(w.fF.assert(function(){return null==a},"axisZoom: if size and min is set, max should not (zooming linked to max extent)"),s=[Math.max(n[1]-i,n[0]),n[1]])):(s[0]=null!=t&&t>=n[0]&&t<n[1]?t:n[0],s[1]=null!=a&&a>n[0]&&a<=n[1]?a:n[1]),{domain:s,force:!(null==i&&null==a&&null==t||s[0]===n[0]&&s[1]===n[1])}},Object.defineProperty(r.prototype,"zoomData",{get:function(){return this._zoomData},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"context",{get:function(){return this.zoomContext},enumerable:!1,configurable:!0}),r.converter=function(e){var t,a=null===(t=e?.metadata)||void 0===t?void 0:t.objects;return{show:(0,b.NA)(a,Se.t.show,r.DefaultOptions.show),showOnValueAxis:(0,b.NA)(a,Se.t.showOnValueAxis,r.DefaultOptions.showOnValueAxis),valueMin:this.clampValue((0,b.NA)(a,Se.t.valueMin,null)),valueMax:this.clampValue((0,b.NA)(a,Se.t.valueMax,null)),valueSize:this.clampValue((0,b.NA)(a,Se.t.valueSize,null)),showOnCategoryAxis:(0,b.NA)(a,Se.t.showOnCategoryAxis,r.DefaultOptions.showOnCategoryAxis),categoryMin:this.clampValue((0,b.NA)(a,Se.t.categoryMin,null)),categoryMax:this.clampValue((0,b.NA)(a,Se.t.categoryMax,null)),categorySize:this.clampValue((0,b.NA)(a,Se.t.categorySize,null)),showOnValueSecAxis:(0,b.NA)(a,Se.t.showOnValueSecAxis,r.DefaultOptions.showOnValueSecAxis),valueSecMin:this.clampValue((0,b.NA)(a,Se.t.valueSecMin,null)),valueSecMax:this.clampValue((0,b.NA)(a,Se.t.valueSecMax,null)),valueSecSize:this.clampValue((0,b.NA)(a,Se.t.valueSecSize,null)),showLabels:(0,b.NA)(a,Se.t.showLabels,r.DefaultOptions.showLabels),showTooltip:(0,b.NA)(a,Se.t.showTooltip,r.DefaultOptions.showTooltip)}},r.clampValue=function(e){return isNaN(e)||"number"!=typeof e?null:e},r.prototype.getZoomCard=function(e){var t=this;if(!this.hasSmallMultiples&&e){var i=this.zoomData;return new ge.CQ(new ge.lg("zoom"),"Visual_ZoomSlider",[Se.t.show,Se.t.showOnCategoryAxis,Se.t.showOnValueAxis,Se.t.showOnValueSecAxis,Se.t.showLabels,Se.t.showTooltip],function(s){return t.hostServices.getLocalizedString(s)}).addTopLevelToggle("show",function(){return new ge.bd({descriptor:Se.t.show,value:i.show}).build()}).addGroup(void 0,function(n){t.hasCategoryAxis&&n.addSimpleSlice("categoryAxis",new ge.bd({descriptor:Se.t.showOnCategoryAxis,value:i.showOnCategoryAxis}).build(),function(s){return s.withCustomDisplayName(t.hasYAxisCategorical?"Visual_YAxis_Hyphen":"Visual_XAxis_Hyphen")}),t.hasValueAxis&&n.addSimpleSlice("valueAxis",new ge.bd({descriptor:Se.t.showOnValueAxis,value:i.showOnValueAxis}).build(),function(s){return s.withCustomDisplayName(t.hasYAxisCategorical?"Visual_XAxis_Hyphen":"Visual_YAxis_Hyphen")}),t.hasY2Axis&&n.addSimpleSlice("valueSecAxis",new ge.bd({descriptor:Se.t.showOnValueSecAxis,value:i.showOnValueSecAxis}).build(),function(s){return s.withCustomDisplayName("Visual_Y2Axis_Hyphen")}),n.addSimpleSlice("labels",new ge.bd({descriptor:Se.t.showLabels,value:i.showLabels}).build()).addSimpleSlice("tooltips",new ge.bd({descriptor:Se.t.showTooltip,value:i.showTooltip}).build())}).build()}},r.prototype.calculateZoomAxesPositions=function(e,t,a,i){void 0===i&&(i=0);for(var n={},s=t.height-a.bottom-i,o=t.width-a.right,l={height:s-a.top,width:o-a.left},u=r.SliderHandleRadius,c=0,h=e;c<h.length;c++){var f=h[c];switch(f){case"bottom":n.bottom={top:s,left:a.left-u,width:l.width+2*u,height:a.bottom};break;case"left":n.left={top:-u,left:null,width:a.left,height:l.height+2*u};break;case"right":n.right={top:-u,left:o,width:a.right,height:l.height+2*u};break;default:w.fF.assertNever(f)}}return n},r.prototype.getMaxYLabelWidth=function(e,t,a){if(!a)return 50;var i=this.getAxisType(e,t),s=a["y1"===i?"y":i].labelFontProperties,o={text:"1234567",fontFamily:s.family,fontSize:Ne.FP.toString(s.size.px),fontWeight:s.weight,fontStyle:s.style,fontVariant:s.variant,whiteSpace:s.whiteSpace};return Z.b.measureSvgTextWidth(o)},r.prototype.getAxisType=function(e,t){var a;switch(e){case"bottom":a="x";break;case"left":a=t?"y2":"y1";break;case"right":a=t?"y1":"y2";break;default:w.fF.assertNever(e)}return a},r.DefaultOptions={show:!1,showOnValueAxis:!0,showOnValueSecAxis:!1,showOnCategoryAxis:!0,showLabels:!1,showTooltip:!1},r.StaticPadding=5,r.SliderHandleRadius=8,r}(),Y=x(76045),O=x(56707),ve=x(32105),y=x(41414),E=x(47316),te=x(41640),ce=x(78843),Q=x(26543),X=x(26743),Pe=x(54522),Ge=x(39407),p=x(34969),v=x(82173),R=x(51490),N=x(21181),Fe=x(48708);function Me(r,e,t){return et(function(a){return!a.supportsStaticReferenceLines||a.supportsStaticReferenceLines()},r,e,t)}function Ee(r,e,t){return et(function(a){return a.supportsTrendLine&&a.supportsTrendLine()},r,e,t)}function Ye(r,e,t){return!et(function(a){return!a.getCartesianVisualCapabilities().isValueAxisIrregular},r,e,t)}function et(r,e,t,a){var i=lt(e);return!_.isEmpty(t)&&_.every(null==a?t:[t[a]],function(s,o){return!i[o]||r(s)})}function lt(r){return _.isEmpty(r)?[]:_.filter(r,function(e){return!(0,ft.Qp)(e)&&!(0,v.Aq)(e)&&!(0,R.Ik)(e)})}function Ot(r,e,t){return r&&(0,p.PC)(e)?function(r){if(r.length>1){var e=r[0].getSeriesLabelsSettings(),t=r[1].getSeriesLabelsSettings();return e.maxWidthPercentage>t.maxWidthPercentage?e:t}return r[0].getSeriesLabelsSettings()}(r):pt(t)}function pt(r){var e=Ze.v.getThemeColor(r||(0,Fe.Ue)(),O.uQ);return{show:!1,seriesColor:e,position:Re.M.right,fontProperties:(0,N.bT)({style:r,labelColor:e,textClassName:"smallLightLabel"}).fontProperties,wordWrap:!1,maxWidthPercentage:20,defaultSeriesWidth:20,showLabelPerSeries:!1,enableBackground:!1,bold:!1,italic:!1,underline:!1}}function Lt(r,e){if(r)return{categoryIndex:r.categoryIndex,categoryValue:r.categoryValue,hierarchyCategoryLevels:e,hasData:null!=r.value}}function ra(r,e){return r.map(function(t){return(0,Ue.BJ)(e.categoryData[t.categoryIndex].hierarchyCategoryLevels)})}var Qt=function(){function r(e,t,a){this.scrollbarWidth=t,this.isScrollable=e,this.trimOrdinalDataOnOverflow=a}return r.prototype.init=function(e){this.axesData=e.axesData,this.axisZoom=e.axisZoom,this.interactivityService=e.interactivityService},r.prototype.shouldShowY1OnRight=function(){return!0===this.axesData.y.switchAxisPosition},Object.defineProperty(r.prototype,"isYAxisCategorical",{get:function(){return(0,p.Au)(this.axesData.chartType)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"categoryAxis",{get:function(){return this.getAxis(this.isYAxisCategorical?1:0)},enumerable:!1,configurable:!0}),r.prototype.hasCategoryAxis=function(){return null!=this.categoryAxis},r.prototype.isCategoryAxisDateTime=function(){var e,t,a;return null!==(a=null===(t=null===(e=this.categoryAxis)||void 0===e?void 0:e.valueType)||void 0===t?void 0:t.dateTime)&&void 0!==a&&a},r.getLeafHeight=function(e,t,a){var i=t===I.Or.bottom?e.xMax:t===I.Or.right?e.yRight:e.yLeft,n=e.stackHeight;return w.fF.assertValue(i,"getLeafHeight: availableSpace"),w.fF.assertValue(n,"getLeafHeight: stackHeight"),w.fF.assertValue(a,"getLeafHeight: numStacks"),i-n*(a-1)+D.StackedAxisPadding+1},r.prototype.getYAxisPosition=function(e){return w.fF.assert(function(){return 0!==e},"cannot ask y-axis specific position for x-axis"),1===e?this.getY1AxisPosition():this.getY2AxisPosition()},r.prototype.getY1AxisPosition=function(){return this.axesData.y.switchAxisPosition?"right":"left"},r.prototype.getY2AxisPosition=function(){return this.axesData.y.switchAxisPosition?"left":"right"},r.prototype.update=function(e,t,a,i){this.categories=e,this.axesData=t,this.updateScrollbarWidthIfNeeded(i),this.isHierarchicalCategoryAxis=3===a},r.prototype.updateResize=function(e,t){this.axesData=e,this.updateScrollbarWidthIfNeeded(t)},r.prototype.addWarnings=function(e){var t=this.layout&&this.layout.axes;if(t&&t.x&&t.x.hasDisallowedZeroInDomain){var a={selector:null,warnings:[new ze.MX]};e.addForVisualObject(this.isYAxisCategorical?"valueAxis":"categoryAxis",a)}if(t&&(t.y1&&t.y1.hasDisallowedZeroInDomain||t.y2&&t.y2.hasDisallowedZeroInDomain)&&(a={selector:null,warnings:[new ze.MX]},e.addForVisualObject(this.isYAxisCategorical?"categoryAxis":"valueAxis",a)),this.alignZerosWithCustomDomainWarning){var n={selector:null,warnings:[new ze.rO]};e.addForVisualObject("valueAxis",n)}},r.prototype.getScrollbarWidth=function(){return this.scrollbarWidth},r.prototype.updateScrollbarWidthIfNeeded=function(e){null!=e&&(this.scrollbarWidth=e)},r.prototype.calculateAxes=function(e,t,a,i,n,s){var o,l,u,c=e.options,h=e.isScalar,f=e.isScrollVisible,g=c.layers,A=c.playAxisControlLayout;w.fF.assertValue(g,"layers");var S=r.shouldRenderAnyAxis(s)||h?p.K8:0,C=this.axesData.categoryAxis.innerPadding,L={x:null,y1:null},P=(o=this.axesData).categoryAxis,V=o.valueAxis,z=_.some(o.y2.includeDomains,function(di){return D.hasForcedDomain(di)}),J=this.axesData.isValueAxisSet&&!1===this.axesData.y2.show&&!z,fe=function(ja){return ja&&D.createScalarDomainOptions([ja.min,ja.max],0)},G=function(ja,zi){return{includeDomain:D.mergeScalarAxisDomains.apply(D,(0,d.__spreadArray)((0,d.__spreadArray)([],ja.includeDomains,!1),[fe(zi)],!1)),axis:ja}},K=G(P,c.ensureXDomain),ie=G(V,c.ensureYDomain),Oe={viewport:t,margin:a,categoryAxisOptions:K,forceMerge:J,trimOrdinalDataOnOverflow:this.trimOrdinalDataOnOverflow,outerPaddingRatio:S,innerPaddingRatio:C,playAxisControlLayout:A,valueAxisOptions:ie,axisZoom:this.axisZoom},je=this.axesData.isValueAxisSet&&this.axesData.y2.show,ke=this.axesData.isValueAxisSet&&this.axesData.y.alignZeros,Je=c.skipMergeValueAxes||!J&&(!0===je||z||void 0===je&&(ke||ie.includeDomain)),Xe=!1;if(oa(g)&&!Je){var wt=function(r,e){w.fF.assert(function(){return r.length<3},"merging of more than 2 layers is not supported");var t=void 0,a=function(){return{domain:void 0,merged:!1,tickCount:t}};if(r.length<2)return a();var i=(0,me.ED)(e);i.roleName="Y2";var n=r[0].calculateAxesProperties(e)[1],s=r[1].calculateAxesProperties(i)[1],o=n.scale.domain(),l=s.scale.domain();if(n.dataDomain&&s.dataDomain){var u=0===n.dataDomain[0]&&0===n.dataDomain[1],c=0===s.dataDomain[0]&&0===s.dataDomain[1];u&&!c?o=[0,0]:!u&&c&&(l=[0,0])}n.values&&n.values.length>0&&s.values&&s.values.length>0&&(t=Math.max(n.values.length,s.values.length));var h=Math.min(o[0],l[0]),f=Math.max(o[1],l[1]);if(e.forceMerge)return{domain:[h,f],merged:!0,tickCount:t};if(o[0]>l[1]||o[1]<l[0])return a();var g=f-h;if(0===g)return a();var A=Math.max(o[0],l[0]),S=Math.min(o[1],l[1]);return Math.abs((S-A)/g)<.1?a():{domain:[h,f],merged:!0,tickCount:t}}(g,Oe);(Xe=wt.merged)?ie.includeDomain=D.mergeScalarAxisDomains(ie.includeDomain,D.createScalarDomainOptions(wt.domain,0,[!0,!0])):Oe.forcedTickCount=wt.tickCount}var Yt=oa(g)?!Xe&&!1!==je||je:this.axesData.y2.hasY2Role;Yt=Yt||z,ke=ke&&Yt;var Ut=(0,me.ED)(Oe);if(Yt){var Ct=this.axesData.y2,Gt=Ut.valueAxisOptions=(0,d.__assign)((0,d.__assign)({},(0,me.ED)(ie)),{axis:(0,d.__assign)((0,d.__assign)({},Ct),{invertAxis:V.invertAxis}),includeDomain:D.mergeScalarAxisDomains.apply(D,(0,d.__spreadArray)((0,d.__spreadArray)([],Ct.includeDomains,!1),[fe(c.ensureY2Domain)],!1))});if(ke){var da=g[0].getAxesDomains(!0,{valueAxis:!0}),ua=D.mergeScalarAxisDomains.apply(D,(0,d.__spreadArray)([D.createScalarDomainOptions(da.valueAxis,0)],V.includeDomains,!1)),_t=g[1].getAxesDomains(!0,{valueAxis:!0}),qt=D.mergeScalarAxisDomains(D.createScalarDomainOptions(_t.valueAxis,0),Gt.includeDomain),ga=ua&&qt,Ta=ga&&(D.hasForcedDomain(ua)||D.hasForcedDomain(qt));if(L.alignZerosWithCustomDomainWarning=Ta,ga&&!Ta){var Ha=(l=function(r,e,t){w.fF.assert(function(){return r&&2===r.length},"domain1 length"),w.fF.assert(function(){return e&&2===e.length},"domain2 length"),w.fF.assert(function(){return!0},"bufferMultiplier should be between 0 and 0.15");var a=r.slice(),i=e.slice(),n=r[1]-r[0],s=e[1]-e[0];if(a[0]=a[0]-n*t,a[1]=a[1]+n*t,i[0]=i[0]-s*t,i[1]=i[1]+s*t,r[0]>=0&&e[0]>=0)a[0]=0,i[0]=0;else if(r[1]<=0&&e[1]<=0)a[1]=0,i[1]=0;else{var o=Ea(a),l=Ea(i);if(o.pos<o.neg&&l.pos<l.neg)o.pos<l.pos?a[1]=-l.pos*a[0]/(1-l.pos):i[1]=-o.pos*i[0]/(1-o.pos);else if(o.pos>o.neg&&l.pos>l.neg)o.neg<l.neg?a[0]=-l.neg*a[1]/(1-l.neg):i[0]=-o.neg*i[1]/(1-o.neg);else{var u=Math.max(Math.abs(a[0]),Math.abs(a[1])),c=Math.max(Math.abs(i[0]),Math.abs(i[1]));a=[-u,u],i=[-c,c]}}return[a,i]}(ua.domain,qt.domain,.05),l[0]),xa=l[1];ie.includeDomain=D.createScalarDomainOptions(Ha,0,[!0,!0]),Gt.includeDomain=D.createScalarDomainOptions(xa,0,[!0,!0])}else Gt.includeDomain=D.mergeScalarAxisDomains(Gt.includeDomain,qt)}else Xe||(Gt.includeDomain=this.axesData.isValueAxisSet&&Gt.includeDomain)}for(var $a=[Oe,Ut],li=oa(g)||this.axesData.y2.hasY2Role?2:1,Xa=0;Xa<li;Xa++){var La=$a[Xa],qa=null!==(u=g[Xa])&&void 0!==u?u:g[0];!Xe&&1===Xa&&(La.roleName="Y2"),w.fF.assertValue(La,"currentVisualOptions must be set");var ea=qa.calculateAxesProperties(La);0===Xa?(L.x=ea[0],L.y1=ea[1]):ea&&!L.y2&&(L.x.isInvalidDomain||_.isEmpty(L.x.dataDomain)?(L.x=ea[0],L.y1=ea[1]):(qa.overrideXAxis(L.x),!Xe&&!ea[1].isInvalidDomain&&!_.isEmpty(ea[1].values)&&(L.y2=ea[1])));var Ua=(0,j.qk)(c.axesFontProperties.x.tickLabels),ei=L.x;if(i&&i.x)ei.willLabelsFit=i.x.willLabelsFit,ei.willLabelsWordBreak=i.x.willLabelsWordBreak;else{var ui=t.width-(a.left+a.right);ei.willLabelsFit=D.willLabelsFit(ei,ui,Z.b.measureSvgTextWidth,Ua),ei.willLabelsWordBreak=!ei.willLabelsFit&&!f&&D.willLabelsWordBreak(L.x,a,ui,Z.b.measureSvgTextWidth,Z.b.estimateSvgTextHeight,Z.b.getTailoredTextOrDefault,Ua)}var Na=L.x.isCategoryAxis;if(this.isHierarchicalCategoryAxis&&(Na?this.axesData.x.show:this.axesData.y.show)){var Ga=Na?L.x:L.y1;Ga.isHierarchical=!0,Ga.rootNode=(0,Ge.J_)(this.categories),Ga.numHierarchyLevels=this.categories.length,n&&(Ga.hierStack=r.createStackedAxis(this.categories,Ga,n,Na?I.Or.bottom:this.axesData.y.switchAxisPosition?I.Or.right:I.Or.left))}}return this.finalizeAxisLabels(L,c.showAxisTitles),L},r.createStackedAxis=function(e,t,a,i){if(w.fF.assertValue(t,"axis"),!_.isEmpty(e)){for(var n=e.length,s=a.stackHeight,o=r.getLeafHeight(a,i,n),l=[],u=D.getCategoryThickness(t.scale),c=[],h=function(A){var S=A===n-1,C=n-A-1,L=e[A];S||(w.fF.assertValue(L.source.identityExprs,"levelCategory.source.identityExprs"),c.push.apply(c,L.source.identityExprs||[]));for(var P=[],V=[],k=[],z=[],J=[],fe=0,G=void 0,K=L.values.length,ie=function(Xe){var wt=S?L.identity[Xe]:r.getSpecificIdentityFromCompositeIdentity(L,Xe,c),Ut=(0,Pe.xq)(L.values[Xe],L.source,B.p.general.formatString);if(!S&&G&&(0,ce.fS)(G,wt))P[Xe]=I.Pt,fe++;else{if(fe>0&&!S){var Ct=Xe-fe;z[Ct]=r.getMaxCategoryWidth(fe,u),J[Ct]=r.getHierarchyLineStyleInfo({levelIndex:C,stackHeight:s,leafHeight:o,categorySpanCount:fe,categoryWidth:u,orientation:i})}fe=1,P[Xe]=Ut,V[Xe]=function(){return Q.dw.builder().withCategoryIdentity(L,Xe,wt).createSelectionId()},k[Xe]={categoryIndex:Xe,seriesIndex:A}}G=wt},Oe=0;Oe<K;Oe++)ie(Oe);if(fe>0&&!S){var je=K-fe;z[je]=r.getMaxCategoryWidth(fe,u),J[je]=r.getHierarchyLineStyleInfo({levelIndex:C,stackHeight:s,leafHeight:o,categorySpanCount:fe,categoryWidth:u,orientation:i})}var ke=(0,me.ED)(t);ke.isStacked=!0,ke.adjustedValues=P,t.categoryIdentities&&(ke.categoryIdentities=V,ke.categoryHierarchyPointers=k,w.fF.assert(function(){return V.length===k.length},"keep identities and pointers in sync")),ke.d3Axis=D.createStackedD3Axis({d3axis:ke.d3Axis,scale:ke.scale,tickFormat:function(Xe){return P[Xe]!==I.Pt?P[Xe]:null}}),ke.categoryThickness=u,ke.levelIndex=C,ke.lineStyleInfo=J,ke.values=P,ke.categoryLabelMaxWidths=z,S||(ke.willLabelsFit=!0,ke.willLabelsWordBreak=!1),l.unshift(ke)},f=0;f<n;f++)h(f);return l}},r.shouldRenderAnyAxis=function(e){return e&&(e.x||e.y)},r.getSpecificIdentityFromCompositeIdentity=function(e,t,a){var i=e.identity;w.fF.assertNonEmpty(i,"columnIdentities");var n=i[t];w.fF.assertValue(n,"identity");var s=(0,X.J2)(n.expr,a);return(0,ce.TZ)(s)},r.getCategorySpanSize=function(e,t){return e*t},r.getMaxCategoryWidth=function(e,t){return w.fF.assertValue(e,"categorySpanCount"),w.fF.assertAnyValue(t,"categoryWidth"),r.getCategorySpanSize(e,t)-2*p.Fv},r.getHierarchyLineStyleInfo=function(e){return w.fF.assertValue(e,"options"),w.fF.assertValue(e.levelIndex,"levelIndex"),w.fF.assertValue(e.stackHeight,"stackHeight"),w.fF.assertValue(e.leafHeight,"leafHeight"),w.fF.assertValue(e.categorySpanCount,"categorySpanCount"),w.fF.assertValue(e.categoryWidth,"categoryWidth"),e.orientation===I.Or.bottom?r.createXHierarchyLineStyleInfo(e):r.createYHierarchyLineStyleInfo(e)},r.createXHierarchyLineStyleInfo=function(e){var t=e.levelIndex,a=e.stackHeight,i=e.leafHeight;if(0!==t){var o=r.getCategorySpanSize(e.categorySpanCount,e.categoryWidth);return(0,d.__spreadArray)([{x1:-o/2,y1:a,x2:-o/2,y2:1===t?-i:0},{x1:o/2,y1:a,x2:o/2,y2:1===t?-i:0}],t>1?[{x1:-o/2,y1:0,x2:o/2,y2:0}]:[],!0)}},r.createYHierarchyLineStyleInfo=function(e){var t=e.levelIndex,a=e.stackHeight,i=e.leafHeight;if(0!==t){var o=r.getCategorySpanSize(e.categorySpanCount,e.categoryWidth);return(0,d.__spreadArray)([{x1:-a,x2:1===t?i:0,y1:-o/2,y2:-o/2},{x1:-a,x2:1===t?i:0,y1:o/2,y2:o/2}],t>1?[{x1:0,x2:0,y1:-o/2,y2:o/2}]:[],!0).map(function(l){return e.orientation===I.Or.right&&(l.x1=-l.x1-a,l.x2=-l.x2-a),l})}},r.prototype.negotiateAxes=function(e){var t,a,i,k,n=e.layers,s=e.padding,o=e.showAxisTitles,l=(0,me.ED)(r.MinimumMargin),u={left:0,top:0,bottom:0,right:0},c={left:0,top:0,bottom:0,right:0},h=this.axesData,f=(null===(t=h?.categoryAxis)||void 0===t?void 0:t.maxMarginFactor)||r.DefaultMaxMarginFactor,g=(0,me.ED)(e.parentViewport),A=g.width*f,C={left:A,right:A,top:0,bottom:Math.max(r.MinimumMargin.bottom,Math.ceil(g.height*f))},L=null===(i=null===(a=n?.[0])||void 0===a?void 0:a.getVisualCategoryAxisIsScalar)||void 0===i?void 0:i.call(a),P=this.calculateAxesRenderOptions({options:e,viewport:g,axesMargins:l,scrollHandleMargins:u,axesOverflow:c,isScalar:L,marginLimits:C,isScrollVisible:!1}),V=this.getAxesMarginFactors(P.axes);l=(P=this.calculateAxesRenderOptions({options:e,viewport:g,axesMargins:l,scrollHandleMargins:u,axesOverflow:c,isScalar:L,marginLimits:C,isScrollVisible:!1,axesRenderOptions:P})).axesMargins,e.rotateXTickLabels90=e.rotateXTickLabels90||!this.willAllCategoriesFitInPlotArea(P.plotArea,P.preferredPlotArea),this.shouldRecalculateRenderOptions(V,P.axes,e.rotateXTickLabels90)&&(l=(P=this.calculateAxesRenderOptions({options:e,viewport:g,axesMargins:l,axesOverflow:c,scrollHandleMargins:u,isScalar:L,marginLimits:C,isScrollVisible:e.rotateXTickLabels90,skipWordBreakUpdate:!0,axesRenderOptions:P})).axesMargins,!this.willAllCategoriesFitInPlotArea(P.plotArea,P.preferredPlotArea)&&(k=this.updateScrollMargins(P.axes,g,u),l=(P=this.calculateAxesRenderOptions({options:e,viewport:g,axesMargins:l,scrollHandleMargins:u,axesOverflow:c,isScalar:L,marginLimits:C,isScrollVisible:!0,skipWordBreakUpdate:!0,axesRenderOptions:P,skipTickMarginsUpdate:!0,isXScrollBarVisible:k.isXVisible,isYScrollBarVisible:k.isYVisible})).axesMargins));var J=P.axes;return this.layout={axes:J,axisLabels:{x:o.x&&J.x?J.x.axisLabel:null,y:o.y&&J.y1?J.y1.axisLabel:null,y2:o.y2&&J.y2?J.y2.axisLabel:null},margin:l,marginLimits:C,viewport:g,plotArea:P.plotArea,preferredPlotArea:P.preferredPlotArea,tickLabelMargins:P.tickLabelMargins,tickPadding:s,titleMargins:P.titleMargins,rotateXTickLabels90:e.rotateXTickLabels90,shouldRenderAxis:P.shouldRenderAxis,isXScrollBarVisible:k&&k.isXVisible,isYScrollBarVisible:k&&k.isYVisible,scrollHandleMargins:u},this.alignZerosWithCustomDomainWarning=J.alignZerosWithCustomDomainWarning,this.layout},r.prototype.updateScrollMargins=function(e,t,a){var i,n,s=!1,o=!1;return e.x.isCategoryAxis&&(s=!0,t.height-=this.scrollbarWidth,a.bottom=this.scrollbarWidth),e.y1.isCategoryAxis&&(o=!0,t.width-=this.scrollbarWidth,(null===(n=null===(i=this.axesData)||void 0===i?void 0:i.y)||void 0===n?void 0:n.switchAxisPosition)?a.right=this.scrollbarWidth:a.left=this.scrollbarWidth),{isXVisible:s,isYVisible:o}},r.prototype.shouldRecalculateRenderOptions=function(e,t,a){var i=this.getAxesMarginFactors(t);return!!(t.y1&&i.tickCountY1!==e.tickCountY1||t.y2&&i.tickCountY2!==e.tickCountY2||t.x&&i.willFitX!==e.willFitX||t.x&&i.willBreakX!==e.willBreakX||t.x&&i.xLabelMaxWidth!==e.xLabelMaxWidth||a||this.isHierarchicalCategoryAxis||t.x&&i.categoryThickness!==e.categoryThickness)},r.prototype.getAxesMarginFactors=function(e){return{tickCountY1:e.y1&&e.y1.values.length,tickCountY2:e.y2&&e.y2.values.length,willFitX:e.x&&e.x.willLabelsFit,willBreakX:e.x&&e.x.willLabelsWordBreak,xLabelMaxWidth:e.x&&e.x.xLabelMaxWidth,categoryThickness:e.x&&e.x.categoryThickness}},r.prototype.calculateAxesRenderOptions=function(e){var t,a,i,n,s,P,o=e.options,l=e.viewport,u=e.scrollHandleMargins,c=e.isScalar,h=e.marginLimits,f=e.axesRenderOptions,g=e.skipTickMarginsUpdate,A=e.axesMargins,S=e.axesOverflow,C=null!==(a=f?.shouldRenderAxis)&&void 0!==a?a:o.shouldRenderAxis,L=f?.axes,V={top:0,bottom:0,left:0,right:0};if(f){var k=this.shouldShowY1OnRight();P=g?f.tickLabelMargins:D.getTickLabelMargins({plotArea:f.plotArea,yMarginLimit:h.left,textWidthMeasurer:Z.b.measureSvgTextWidth,textHeightMeasurer:Z.b.estimateSvgTextHeight,axes:f.axes,bottomMarginLimit:h.bottom,axesFontProperties:o.axesFontProperties,rotate90:o.rotateXTickLabels90,showY1OnRight:k,shouldRenderAxis:f.shouldRenderAxis}),A=(t=this.updateAxisMargins(e,P,k)).axesMargins,V=t.titleMargins,S=P.axesOverflow}var z=o.calculatePlotArea({viewport:l,axesMargins:A,axesOverflow:S,titleMargins:V,shouldRenderAxis:C,axes:L,scrollHandleMargins:u,seriesLabelSettings:Ot(o.layers,this.axesData.chartType),showSeriesLabels:this.axesData.showsSeriesLabels()});return L=this.calculateAxes(e,this.calculateLayerViewport(z,A),A,e.skipWordBreakUpdate?L:null,P,C),{plotArea:z,preferredPlotArea:this.getPreferredPlotArea(L,o.layers,c),axes:L,axesMargins:A,titleMargins:V,shouldRenderAxis:{x:C.x&&!_.isEmpty(null===(i=L.x)||void 0===i?void 0:i.values),y:C.y&&!_.isEmpty(null===(n=L.y1)||void 0===n?void 0:n.values),y2:C.y2&&!_.isEmpty(null===(s=L.y2)||void 0===s?void 0:s.values)},tickLabelMargins:P}},r.prototype.getPreferredPlotArea=function(e,t,a){if(!a&&this.isScrollable&&!_.isEmpty(t)&&t[0].getPreferredPlotArea){var i=e.x.isCategoryAxis?e.x:e.y1;return t[0].getPreferredPlotArea({isScalar:a,categoryCount:i.dataDomain.length,categoryThickness:i.categoryThickness,outerPaddingRatio:i.outerPaddingRatio})}},r.prototype.calculateLayerViewport=function(e,t){return{width:e.width+t.left+t.right,height:e.height+t.top+t.bottom,scale:e.scale}},r.prototype.willAllCategoriesFitInPlotArea=function(e,t){return!(!this.isYAxisCategorical&&t&&(0,te.aP)(t.width,e.width)||this.isYAxisCategorical&&t&&(0,te.aP)(t.height,e.height))},r.prototype.updateAxisMargins=function(e,t,a){var i,n,s,o=e.isScalar,l=(i=e.axesRenderOptions).axes,u=i.shouldRenderAxis,c=(n=e.options).padding,h=n.showAxisTitles,f=n.axesFontProperties,g=n.forceMarginMin,A=n.interactivityRightMargin,S={top:0,bottom:0,left:0,right:0},C=a?t.yRight:t.yLeft,L=a?t.yLeft:t.yRight,P=t.xMax;if(u.y&&(C+=a?c.right:c.left),u.y2&&(L+=a?c.left:c.right),u.x&&(P+=c.bottom),null!=l.x.axisLabel&&h.x){var V=Z.b.estimateSvgTextHeight((0,j.qk)(f.x.title));S.bottom=V+r.XAxisLabelPadding+r.XAxisPaddingDeltaForTitle,P+=S.bottom}if(null!=l.y1.axisLabel&&h.y){var k=(V=Z.b.estimateSvgTextHeight((0,j.qk)(f.y.title)))+r.YAxisLabelPadding;a?S.right=k:S.left=k,C+=k}if(null!=(null===(s=l.y2)||void 0===s?void 0:s.axisLabel)&&h.y2){var z=(V=Z.b.estimateSvgTextHeight((0,j.qk)(f.y2.title)))+r.YAxisLabelPadding;a?S.left=z:S.right=z,L+=z}var J=(a?C:L)+(o?0:A);J=e.isYScrollBarVisible?Math.max(J,r.MinimumAxisMarginFromScrollbar):J;var fe=P;fe=e.isXScrollBarVisible?Math.max(fe,r.MinimumAxisMarginFromScrollbar):fe,t.axesOverflow.top=Math.max(t.yTop,r.MinimumMargin.top);var G={top:t.axesOverflow.top,left:a?L:C,right:J,bottom:fe};return g&&(G={top:Math.max(G.top,g.top),bottom:Math.max(G.bottom,g.bottom),left:Math.max(G.left,g.left),right:Math.max(G.right,g.right)}),{axesMargins:G,titleMargins:S}},r.prototype.getAxis=function(e){var t,a,i,n,s,o;switch(e){case 0:return null===(a=null===(t=this.layout)||void 0===t?void 0:t.axes)||void 0===a?void 0:a.x;case 1:return null===(n=null===(i=this.layout)||void 0===i?void 0:i.axes)||void 0===n?void 0:n.y1;case 2:return null===(o=null===(s=this.layout)||void 0===s?void 0:s.axes)||void 0===o?void 0:o.y2;default:w.fF.assertNever(e)}},r.prototype.isLogScaleAllowed=function(e){var t,a;return null!==(a=null===(t=this.getAxis(e))||void 0===t?void 0:t.isLogScaleAllowed)&&void 0!==a&&a},r.prototype.axesHaveTicks=function(e){if(!this.layout)return!1;var t=this.layout.margin,i=e.height-(t.top+t.bottom);return!(0===D.getRecommendedNumberOfTicksForXAxis(e.width-(t.left+t.right))&&0===D.getRecommendedNumberOfTicksForYAxis(i))},r.prototype.finalizeAxisLabels=function(e,t){var a,i,n,s;if(this.axesData.x.showAxisTitle||this.axesData.y.showAxisTitle||this.axesData.y2.showAxisTitle){var o={x:e.x?null!==(a=this.axesData.x.titleText)&&void 0!==a?a:e.x.axisLabel:void 0,y:e.y1?null!==(i=this.axesData.y.titleText)&&void 0!==i?i:e.y1.axisLabel:void 0,y2:e.y2?null!==(n=this.axesData.y2.titleText)&&void 0!==n?n:e.y2.axisLabel:void 0},l=r.getUnitType(e.x.formatter);e.x.isCategoryAxis?this.categoryAxisHasUnitType=null!=l:this.valueAxisHasUnitType=null!=l,o.x&&l&&(o.x=(0,y.O1)(this.axesData.x.axisStyle,o.x,l));var u=r.getUnitType(e.y1.formatter);if(e.y1.isCategoryAxis?this.categoryAxisHasUnitType=null!=u:this.valueAxisHasUnitType=null!=u,o.y&&u&&(o.y=(0,y.O1)(this.axesData.y.axisStyle,o.y,u)),e.y2){var c=r.getUnitType(e.y2.formatter);this.secondaryValueAxisHasUnitType=null!=c,o.y2&&c&&(o.y2=(0,y.O1)(this.axesData.y2.axisStyle,o.y2,c))}null===(s=this.axisZoom)||void 0===s||s.updateAxisTitles(o),e.x&&(e.x.axisLabel=t.x?o.x:null),e.y1&&(e.y1.axisLabel=t.y?o.y:null),e.y2&&(e.y2.axisLabel=t.y2?o.y2:null)}},r.getUnitType=function(e){var t;if((null===(t=e?.displayUnit)||void 0===t?void 0:t.value)>1)return e.displayUnit.title},r.YAxisLabelPadding=5,r.XAxisLabelPadding=3,r.XAxisPaddingDeltaForTitle=-6,r.DefaultMaxMarginFactor=.25,r.MinimumMargin={left:1,right:1,top:8,bottom:25},r.MinimumAxisMarginFromScrollbar=5,r}();function oa(r){return w.fF.assertValue(r,"layers"),r.length>1}function Ea(r){return w.fF.assert(function(){return 2===r.length},"domain length must be 2"),w.fF.assert(function(){return r[1]-r[0]!=0},"div by zero warning"),{pos:(r[1]-0)/(r[1]-r[0]),neg:(0-r[0])/(r[1]-r[0])}}var Rt=x(46769),ia=x(34021),Ca=x(11305),Ma=x(61193),ca=x(51129),se=x(45034),He=x(59694),Ie=x(32379),ut=x(94419),m=x(79811),T=x(80777),F=x(72489),Te="Waterfall_TotalLabel",Ce="Waterfall_OtherLabel",at=function(){function r(){}return r.convert=function(e){var t=e.dataView;if(t){if(t.categorical)return function(r){var e,t,a,i,z,fe,n=r.dataView,s=r.hostServices,o=r.dataLabelSettings,l=r.sentimentColors,u=r.interactivityService,c=r.tooltipsEnabled,h=B.p.general.formatString,f=(0,ca.G)(n,{formatStringProp:h}),g=f.data,A=(0,b.NA)(f.objects.getStaticObjects(),B.p.valueAxis.totalsEnabled,true),S=n.categorical.categories||[],C=s.getLocalizedString(Te),L={current:0,min:0,max:0,formatString:void 0},P=[],V=[],k=[],J=[];if(g.hasValues("Tooltips")&&(fe=f.columns.getAllValueMetadataColumnsForRole("Tooltips",void 0)),g.hasValues("Y")){var G=(J=[f.columns.getValueMetadataColumn("Y")])[0].format;if(_.isEmpty(S)){var K=g.getValue("Y",0),ie=g.getFormatString("Y",0);L={current:K,max:K,min:0,formatString:ie}}else{var Oe=S[0];z=Oe.source,(V=Oe.values.slice()).push(C);for(var je=null!==(e=n.categorical.originalCategories)&&void 0!==e?e:[Oe],ke=o.fontProperties.color,Je=function(Ct,Gt){var da=V[Ct],ua=g.getValue("Y",Ct)||0,_t=g.getFormatString("Y",Ct);void 0!==_t&&void 0===G&&(G=_t);var qt=Q.dw.builder().withCategory(je,Ct,null===(t=Oe?.source)||void 0===t?void 0:t.queryName,!0).withMeasure(J[0].queryName,f.columns.getValueColumn("Y"),Ct).createSelectionId(),ga=void 0;if(c){ga=St(z?[z]:null,J[0],[da],ua,_t,h);var Ta=g.getAllValuesForRole("Tooltips",Ct),Ha=g.getAllFormatStringsForRole("Tooltips",Ct);Ta&&fe&&Tt(Ta,Ha,ga,fe,h,s)}var xa=(0,Rt.t$)({defaultColor:ke,categoricalDataReader:f,categoryIndex:Ct}),$a=(0,Rt.B8)(xa)?xa.color:ke;o.fontProperties=(0,Rt.Vv)($a,o.fontProperties),P.push(At(ua,L.current,l,da,Ct,qt,ga,xa.color,_t||G,0)),k[Ct]=function(){return(0,p.MH)(Ct,Oe)},L=Nt(L,ua)},Xe=0,wt=g.getCategoryCount();Xe<wt;Xe++)Je(Xe)}var Yt=void 0;c&&(Yt=St(z?[z]:null,J[0],[C],L.current,G,h)),A&&P.push(At(L.current,0,l,C,g.getCategoryCount(),Q.l0.createNull(),Yt,o.fontProperties.color,G,1,{text:!0}))}return u&&u.applySelectionStateToData(P),{series:[{data:P,type:null===(a=J?.[0])||void 0===a?void 0:a.type,measureDisplayName:null===(i=J?.[0])||void 0===i?void 0:i.displayName}],categories:V,categoryIdentities:k,categoryMetadata:z,preferredCategoryWidth:(0,p.$K)((0,p.Vk)(n.metadata,void 0)),valuesMetadata:J,legendData:It(l,s,f.objects.getStaticObjects(),r.style,!1,A),hasHighlights:!1,positionMin:L.min,positionMax:L.max,dataLabelsSettings:o,sentimentColors:l,strokeSettings:(0,ia.kG)(r.style),totalsEnabled:A}}(e);if(t.matrix)return function(r){var e,t,a,i,n=r.dataView,s=r.hostServices,o=r.dataLabelSettings,l=r.sentimentColors,u=r.interactivityService,c=r.tooltipsEnabled,h=r.numberOfBreakdowns,f=n.matrix,g=!_.isEmpty(f.columns.levels)&&f.columns.levels[0].sources[0];w.fF.assert(function(){return!!g},"breakdown role should be defined when using matrix converter");var A=!_.isEmpty(f.rows.levels)&&f.rows.levels[0].sources,S=_.findIndex(f.valueSources,function(ya){return(0,M.nu)(ya,"Y")}),C=f.valueSources[S],L=_.filter(f.valueSources,function(ya){return(0,M.nu)(ya,"Tooltips")}),P=[],V=[],k={current:0,min:0,max:0},z=0,J=null===(t=n?.metadata)||void 0===t?void 0:t.objects;if(g&&A&&C){w.fF.assert(function(){return(0,M.nu)(g,"Breakdown")},"matrix column should have breakdown role"),w.fF.assert(function(){return _.every(A,function(ya){return(0,M.nu)(ya,"Category")})},"matrix row should have category role");var fe=new Ht(g,A,C),G=C.format,K=s.getLocalizedString(Ce),ie=B.p.general.formatString,Oe=f.rows.root.children,je=f.columns.root.children;if(!_.isEmpty(Oe)&&!_.isEmpty(je)){var ke=Oe.length,Je=je.length,Xe=0,wt=void 0,Yt=void 0,Ut=_.size(L)+1;ke>0&&(z=_.size(Oe[0].values)/Ut-1),h=Math.min(h,z);for(var Ct=0;Ct<ke;Ct++){for(var Gt=void 0,da=Oe[Ct],ua=Ct>0?Oe[Ct-1]:void 0,_t=_.map(da.levelValues,function(ya){return ya.value}),qt=_.map(_t,function(ya,Oa){return(0,Pe.xq)(ya,A[Oa],ie)}).join(" "),ga=fe.splitIdentity(da.identity.expr),Ta=[],Ha=_.size(da.values),xa=0;xa<Ha;xa+=Ut){for(var $a=void 0,li=void 0,Xa=void 0,La=void 0,qa=[],ea=[],Ua=0;Ua<Ut;Ua++)if(Ua===S){var ei=da.values[xa+Ua];$a=(0,I.eT)(ei.value),Xa=(0,b.NA)(ei.objects,ie),La=(0,Y.y)(null===(a=ei.objects)||void 0===a?void 0:a.labels,"color"),Gt||(Gt=Xa),li=ua&&(0,I.eT)(ua.values[xa+Ua].value)}else qa.push(da.values[xa+Ua].value),ea.push(ua&&ua.values[xa+Ua].value);Ta.push({key:xa,currentValue:$a,previousValue:li,difference:($a||0)-(li||0),column:je[xa/Ut],currentTooltipValues:qa,previousTooltipValues:ea,formatString:Xa,labelColor:La??void 0})}Ta=_.sortBy(Ta,function(ya){return-1*Math.abs(ya.difference)});var Na=_.chain(Ta).filter(function(ya){return!ya.column.isSubtotal}).take(h).sortBy(function(ya){return-1*ya.difference}).value(),Ga=_.find(Ta,function(ya){return ya.column.isSubtotal}),di=Ga.currentValue,ja=Ga.previousValue;if(ua){var zi=_.sumBy(Na,function(ya){return ya.currentValue}),hr=_.sumBy(Na,function(ya){return ya.previousValue}),ri=_.chain(Na).map(function(ya){return fe.splitIdentity(ya.column.identity.expr)}).flatten().value(),Ii=Je>h+1,_i=0,$t=void 0,Si=void 0;if(Ii){var xi=di-zi,Ya=ja-hr;if(_i=xi-Ya,$t=fe.createBreakdownOtherIdentity(ri,ga,Yt),c){Si=fe.createBreakdownTooltip(qt,wt,K,xi,Ya,_i,ie,s);for(var bi=[],Li=[],vr=function(Oa){var hi=Ga.currentTooltipValues[Oa],ba=Ga.previousTooltipValues[Oa];if(_.isNumber(hi)&&_.isNumber(ba)){var Ci=hi-_.sumBy(Na,function(Pi){return Pi.currentTooltipValues[Oa]}),ai=ba-_.sumBy(Na,function(Pi){return Pi.previousTooltipValues[Oa]});bi.push(Ci-ai),Li.push(ai)}},ni=0;ni<Ga.currentTooltipValues.length;ni++)vr(ni);Tt(bi,void 0,Si,L,ie,s,Li,qt,wt)}}for(var xe=!1,vt=function(Oa){Ii&&_i>Oa.difference&&!xe&&(xe=!0,P.push(At(_i,k.current,l,K,Xe++,$t,Si,o.fontProperties.color,G||Gt,3,{text:!0})),V.push(K),k=Nt(k,_i));var hi=(0,Pe.xq)(Oa.column.value,g,ie),ba=fe.splitIdentity(Oa.column.identity.expr);w.fF.assertValue(ba,"breakdown identity must be a compare expr");var Ci=fe.createBreakdownIdentity(ga,Yt,ba),ai=void 0;c&&(ai=fe.createBreakdownTooltip(qt,wt,hi,Oa.currentValue,Oa.previousValue,Oa.difference,ie,s),Tt(_.map(Oa.currentTooltipValues,function(ar,za){return _.isNumber(ar)?ar-Oa.previousTooltipValues[za]:ar}),void 0,ai,L,ie,s,Oa.previousTooltipValues,qt,wt)),P.push(At(Oa.difference,k.current,l,hi,Xe++,Ci,ai,null!==(i=Oa.labelColor)&&void 0!==i?i:o.fontProperties.color,Oa.formatString||G,0,{text:!0})),V.push(hi),k=Nt(k,Oa.difference)},Sa=0,ti=Na;Sa<ti.length;Sa++)vt(ti[Sa]);Ii&&!xe&&(xe=!0,P.push(At(_i,k.current,l,K,Xe++,$t,Si,o.fontProperties.color,G||Gt,3,{text:!0})),V.push(K),k=Nt(k,_i))}var Kt={dataMap:(e={},e[A[0].queryName]=[da.identity],e),metadata:[C.queryName]},Ki=void 0;c&&(Ki=St(A,C,_t,di,void 0,ie),Tt(Ga.currentTooltipValues,void 0,Ki,L,ie,s)),P.push(At(di,0,l,qt,Xe++,new Q.l0((0,Ie.tV)(Kt),!1,Kt),Ki,o.fontProperties.color,G||Gt,2,{text:!0})),V.push(qt),0===Ct&&(k={current:di,max:di,min:di}),wt=qt,Yt=ga}}}return u&&u.applySelectionStateToData(P),{series:[{data:P,type:C?.type,measureDisplayName:C?.displayName}],categories:V,categoryIdentities:_.map(P,function(ya){return function(){return ya.identity}}),categoryMetadata:A[0],preferredCategoryWidth:(0,p.$K)((0,p.Vk)(n.metadata,void 0)),valuesMetadata:f.valueSources,legendData:It(l,s,J,r.style,!0,!0),hasHighlights:!1,positionMin:k.min,positionMax:k.max,dataLabelsSettings:o,sentimentColors:l,isBreakdown:!0,numberOfBreakdowns:h,totalBreakdownCategories:z,strokeSettings:(0,ia.kG)(r.style),totalsEnabled:!0}}(e)}},r}();function It(r,e,t,a,i,n){var s=function(u,c,h,f){return{label:e.getLocalizedString(c),marker:{show:!0,color:u,shape:Ma.ZO.circle},identity:Q.dw.builder().withMeasure(h).createSelectionId(),selected:!1,index:f}},o=(0,d.__spreadArray)((0,d.__spreadArray)([s(r.increaseFill.solid.color,"Increase","increase",0),s(r.decreaseFill.solid.color,"Decrease","decrease",1)],i?[s(r.otherFill.solid.color,Ce,"other",3)]:[],!0),n?[s(r.totalFill.solid.color,Te,"total",2)]:[],!0);return(0,m.RS)(t,o,!0,"",!1,a)}function St(r,e,t,a,i,n){var s=new Ca.E4;return _.isEmpty(r)||s.withLazyValue(new se.o(function(){return{displayName:_.map(r,function(o){return o.displayName}).join(" "),value:_.map(t,function(o,l){return(0,Pe.xq)(o,r[l],n)}).join(" ")}})),null!=a&&e&&s.withLazyValue(new se.o(function(){return{displayName:e.displayName,value:(0,Pe.xq)(a,e,n,!1,i)}})),s}function At(r,e,t,a,i,n,s,o,l,u,c){var h,f;return 1===u||2===u?(h=t.totalFill,f=2):3===u?(h=t.otherFill,f=3):r>0?(h=t.increaseFill,f=0):(h=t.decreaseFill,f=1),{value:r,position:e,color:h.solid.color,sentimentColorType:f,categoryValue:a,categoryIndex:i,identity:n,seriesIndex:0,selected:!1,highlight:!1,key:n.getKey(),tooltipInfo:s&&function(){return s.getTooltipItems()},labelFill:o,labelFormatString:l,type:T.Ge.fromDescriptor(c),barType:u}}function Nt(r,e){var t=r.current+e;return{current:t,min:Math.min(r.min,t),max:Math.max(r.max,t)}}function Tt(r,e,t,a,i,n,s,o,l){if(!_.isEmpty(r)&&!_.isEmpty(a))for(var u=function(f){if(null!=r[f]&&a[f]){var g=a[f].displayName,A=(0,Pe.xq)(r[f],a[f],i,!1,e?.[f]);if(_.isEmpty(s))t.withLazyValue(new se.o(function(){return{displayName:g,value:A}}));else{var S=r[f],C=s[f];if(_.isNumber(S)&&_.isNumber(C))g=(0,He.W)(n.getLocalizedString("Waterfall_BreakdownDifferenceTooltip"),g),A=yt(A,S,C),t.withLazyValue(new se.o(function(){return{displayName:g,value:A}}));else{if(null!=C){var L=(0,Pe.xq)(C,a[f],i,!1);t.withLazyValue(new se.o(function(){return{displayName:"".concat(l," ").concat(g),value:L}}))}null!=S&&t.withLazyValue(new se.o(function(){return{displayName:"".concat(o," ").concat(g),value:A}}))}}}},c=0;c<r.length;c++)u(c)}function yt(r,e,t){if(!t)return r;var a=e/Math.abs(t),i=(0,F.Z)("Percentage"),n=(0,F.WU)(a,i);return"".concat(r," (").concat(n,")")}var Ht=function(){function r(e,t,a){this.breakdownMetadata=e,this.categoryMetadata=t,this.valueMetadata=a}return r.prototype.splitIdentity=function(e){return(0,X.Dh)(e)},r.prototype.createBreakdownIdentity=function(e,t,a){var i,n={dataMap:(i={},i[this.breakdownMetadata.queryName]=[(0,ce.TZ)((0,ut.Sh)((0,d.__spreadArray)((0,d.__spreadArray)([],_.map(e,function(o){return o.left}),!0),_.map(a,function(o){return o.left}),!0),[(0,d.__spreadArray)((0,d.__spreadArray)([],_.map(t,function(o){return o.right}),!0),_.map(a,function(o){return o.right}),!0),(0,d.__spreadArray)((0,d.__spreadArray)([],_.map(e,function(o){return o.right}),!0),_.map(a,function(o){return o.right}),!0)]))],i),metadata:[this.valueMetadata.queryName]},s=(0,Ie.tV)(n);return new Q.l0(s,!1,n)},r.prototype.createBreakdownOtherIdentity=function(e,t,a){var i,n={dataMap:(i={},i[this.breakdownMetadata.queryName]=[(0,ce.TZ)((0,ut.ff)((0,ut.Sh)([this.breakdownMetadata.expr],_.map(e,function(o){return[o.right]}))))],i),metadata:[this.valueMetadata.queryName]};n.dataMap[this.categoryMetadata[0].queryName]=[(0,ce.TZ)((0,ut.Sh)(_.map(t,function(o){return o.left}),[_.map(a,function(o){return o.right}),_.map(t,function(o){return o.right})]))];var s=(0,Ie.tV)(n);return new Q.l0(s,!1,n)},r.prototype.createBreakdownTooltip=function(e,t,a,i,n,s,o,l){var u=this,c=new Ca.E4;if(this.breakdownMetadata&&c.withLazyValue(new se.o(function(){return{displayName:u.breakdownMetadata.displayName,value:(0,Pe.xq)(a,u.breakdownMetadata,o)}})),this.valueMetadata&&(null!=n&&c.withLazyValue(new se.o(function(){return{displayName:"".concat(t," ").concat(u.valueMetadata.displayName),value:(0,Pe.xq)(n,u.valueMetadata,o,!1)}})),null!=i&&c.withLazyValue(new se.o(function(){return{displayName:"".concat(e," ").concat(u.valueMetadata.displayName),value:(0,Pe.xq)(i,u.valueMetadata,o,!1)}})),null!=s)){var h=(0,Pe.xq)(s,this.valueMetadata,o,!1);h=yt(h,s,n),c.withLazyValue(new se.o(function(){return{displayName:(0,He.W)(l.getLocalizedString("Waterfall_BreakdownDifferenceTooltip"),u.valueMetadata.displayName),value:h}}))}return c},r}(),na=function(){function r(e){var t=e.valueAxisProperties,a=e.y2AxisProperties,i=e.categoryAxisProperties,n=e.isValueAxisIrregular,s=void 0!==n&&n,o=e.style,l=e.hasY2Role,u=e.forceShowY2;this.chartType=e.chartType;var c=(0,p.Au)(this.chartType),h=11===this.chartType;w.fF.assert(function(){return!(c&&h)},"You can't have a categorical Y axis with a Scatter chart"),this.isCategoryAxisSet=!!i,this.isValueAxisSet=!!t,this.isValueAxisIrregular=s;var f=c?t:i,g=c?i:t,A=this.isComboChart?t:a,S=this.isRibbonChart?p.cI:p.$B,C=!this.isRibbonChart,L=(0,d.__assign)((0,d.__assign)({},r.AxisDataDefaults),{innerPadding:c||h?void 0:S});L.gridline.strokeShow=c||h;var P=(0,d.__assign)((0,d.__assign)({},r.AxisDataDefaults),{innerPadding:c?S:void 0,show:!!c||C});P.gridline.strokeShow=!c,this.x=r.createSingleAxisFromObject(f,L,o),this.y=r.createSingleAxisFromObject(g,P,o),this.categoryAxis=c?this.y:this.x,this.valueAxis=c?this.x:this.y,s&&(this.valueAxis.show=!1);var V=(0,d.__assign)((0,d.__assign)({},r.AxisDataDefaults),{show:u&&l||(this.isComboChart?void 0:l),labelFontProperties:(0,j.ED)(c?this.x.labelFontProperties:this.y.labelFontProperties,{weight:W.zu,style:W.zu,textDecoration:W.AI}),showAxisTitle:c?this.x.showAxisTitle:this.y.showAxisTitle,switchAxisPosition:!0});this.y2=(0,d.__assign)((0,d.__assign)({},r.createSingleAxisFromObject(A,V,o,!0,this.isComboChart)),{hasY2Role:l}),this.secondaryValueAxis=this.y2,this.seriesLabelSettings=e.seriesLabelSettings||{show:!1,maxWidthPercentage:0,defaultSeriesWidth:0,position:void 0},this.hasY2Role=l}return Object.defineProperty(r,"AxisDataDefaults",{get:function(){return{show:!0,alignZeros:!1,showAxisTitle:!1,includeDomains:[],axisType:void 0,axisStyle:y.DO.showTitleOnly,labelDisplayUnits:0,labelPrecision:O.NZ,titleText:void 0,preferredCategoryWidth:p.jY,maxMarginFactor:Qt.DefaultMaxMarginFactor,concatenateLabels:p.SM,labelFontProperties:{color:void 0,family:p.se,size:ve.B.createFromPt(p.rZ),style:void 0,variant:void 0,weight:void 0,whiteSpace:void 0,textDecoration:void 0},titleFontProperties:{family:p.se,size:ve.B.createFromPt(p.rZ)},axisLabel:void 0,logAxisScale:!1,gridline:{strokeShow:void 0,strokeColor:void 0,strokeTransparency:0,strokePattern:E.Dv.solid,strokeWidth:1,strokeDashArray:E.YU,strokeDashCap:E.xm,strokeAutoScale:!1},innerPadding:void 0,invertAxis:!1,sharedAxis:!0,scaleToFit:!1,totalsEnabled:true,switchAxisPosition:!1,labelBold:!1,labelItalic:!1,labelUnderline:!1,titleBold:!1,titleItalic:!1,titleUnderline:!1}},enumerable:!1,configurable:!0}),r.prototype.showsSeriesLabels=function(){var e;return(null===(e=this.seriesLabelSettings)||void 0===e?void 0:e.show)&&(!this.isComboChart||this.hasY2Role)},Object.defineProperty(r.prototype,"isComboChart",{get:function(){return(0,p.LQ)(this.chartType)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isRibbonChart",{get:function(){return 10===this.chartType},enumerable:!1,configurable:!0}),r.createSingleAxisFromObject=function(e,t,a,i,n){var s=i?function(z){return _.camelCase("sec ".concat(z.propertyName))}:function(z){return z.propertyName},o=B.p.valueAxis,l=Ze.v.create(a),u=function(J){return J>=1?J/100:J},h=(0,Y.N)(e,s(o.concatenateLabels),t.concatenateLabels),f=(0,Y.N)(e,s(o.gridlineStyle),t.gridline.strokePattern),g={family:s(o.fontFamily),size:s(o.fontSize),color:s(o.labelColor),sizeInPixels:!1,bold:s(o.bold),italic:s(o.italic),underline:s(o.underline)},A=(0,j.Zi)(e,g,l,a,t.labelFontProperties.color?void 0:p.eX,"smallLightLabel",t.labelFontProperties);g.family=s(o.titleFontFamily),g.size=s(o.titleFontSize),g.color=s(o.titleColor),g.bold=s(o.titleBold),g.italic=s(o.titleItalic),g.underline=s(o.titleUnderline);var J,S=(0,j.Zi)(e,g,l,a,void 0,"title",(0,j.ED)(t.titleFontProperties,{color:A.color,family:A.family,size:A.size,variant:A.variant,whiteSpace:A.whiteSpace})),C=(0,D.getMergedUserDomains)(t),L=(0,Y.N)(e,s(o.start),C[0]),P=(0,Y.N)(e,s(o.end),C[1]),V=void 0!==L,k=void 0!==P;return{show:(0,Y.N)(e,n?s(o.show):o.show.propertyName,t.show),alignZeros:(0,Y.N)(e,s(o.alignZeros),t.alignZeros),showAxisTitle:(0,Y.N)(e,s(o.showAxisTitle),t.showAxisTitle),includeDomains:V||k?[(0,D.createScalarDomainOptions)([L,P],10,[V,k])]:[],axisType:(0,Y.N)(e,s(o.axisType),t.axisType),axisStyle:(0,Y.N)(e,s(o.axisStyle),t.axisStyle),labelDisplayUnits:(0,Y.N)(e,s(o.labelDisplayUnits),t.labelDisplayUnits),labelPrecision:(J=(0,Y.N)(e,s(o.labelPrecision),t.labelPrecision),null==J||J<0?t.labelPrecision:J),titleText:(0,Y.N)(e,s(o.titleText),t.titleText),preferredCategoryWidth:(0,Y.N)(e,s(o.preferredCategoryWidth),t.preferredCategoryWidth),maxMarginFactor:u((0,Y.N)(e,s(B.p.categoryAxis.maxMarginFactor),t.maxMarginFactor)),concatenateLabels:h,labelFontProperties:A,titleFontProperties:S,axisLabel:(0,Y.N)(e,s(o.axisLabel)),logAxisScale:(0,Y.N)(e,s(o.logAxisScale),t.logAxisScale),gridline:{strokeShow:(0,Y.N)(e,s(o.gridlineShow),t.gridline.strokeShow||!1===h),strokeColor:l.getColorForPropertyName(e,s(o.gridlineColor),r.getGridlineDefaultColorFromGridlineStyle(f)),strokeTransparency:(0,Y.N)(e,s(o.gridlineTransparency),t.gridline.strokeTransparency),strokeWidth:(0,Y.N)(e,s(o.gridlineThickness),t.gridline.strokeWidth),strokePattern:f,strokeDashArray:(0,Y.N)(e,s(o.gridlineDashArray),t.gridline.strokeDashArray),strokeDashCap:(0,Y.N)(e,s(o.gridlineDashCap),t.gridline.strokeDashCap),strokeAutoScale:(0,Y.N)(e,s(o.gridlineAutoScale),t.gridline.strokeAutoScale)},innerPadding:u((0,Y.N)(e,s(B.p.categoryAxis.innerPadding),t.innerPadding)),invertAxis:(0,Y.N)(e,s(o.invertAxis),t.invertAxis),sharedAxis:(0,Y.N)(e,o.sharedAxis.propertyName,t.sharedAxis),scaleToFit:(0,Y.N)(e,o.scaleToFit.propertyName,t.scaleToFit),totalsEnabled:(0,Y.N)(e,s(o.totalsEnabled),t.totalsEnabled),labelBold:(0,Y.N)(e,s(o.bold),t.labelBold),labelItalic:(0,Y.N)(e,s(o.italic),t.labelItalic),labelUnderline:(0,Y.N)(e,s(o.underline),t.labelUnderline),titleBold:(0,Y.N)(e,s(o.titleBold),t.titleBold),titleItalic:(0,Y.N)(e,s(o.titleItalic),t.titleItalic),titleUnderline:(0,Y.N)(e,s(o.titleUnderline),t.titleUnderline),switchAxisPosition:(0,Y.N)(e,s(o.switchAxisPosition),t.switchAxisPosition)}},r.getGridlineDefaultColorFromGridlineStyle=function(e){switch(e){case E.Dv.dashed:case E.Dv.solid:case E.Dv.custom:return p.Ao;case E.Dv.dotted:return p.JI;default:return w.fF.assertFail("unknown gridline style: ".concat(e)),p.Ao}},r}(),pa=x(3128),sa=x(94478),va=x(10034),ta=x(77686),kt=x(59107),Ba=x(30237),Aa=function(){function r(){}return r.prototype.bindEvents=function(e,t,a,i){var s,n=this;if(e&&!i){if(this.ticks=e.ticks,a){var o=a.dataPointNavigationManager,l=a.pointSourceKey;o.isEmpty(l)||((0,Ba.W3)(e.root,o,l),(0,Ba.I8)(e.root,o,l),(0,Ba.lt)(e.root,t))}this.ticks.on("click.select",function(){return n.handleSelection(t)}).on("keydown.select",function(){var u=d3.event,c=u.keyCode;(32===c||13===c)&&(u.preventDefault(),u.stopPropagation(),n.handleSelection(t))})}else null===(s=this.ticks)||void 0===s||s.on("click.select",null).on("keydown.select",null)},r.prototype.renderSelection=function(e){var t;null===(t=this.ticks)||void 0===t||t.style("font-weight",function(a){return a.selected?"700":null}).select("text").attr("aria-selected",function(a){return e&&a.selected})},r.prototype.renderFocus=function(e){kt.M.focus(e)},r.prototype.handleSelection=function(e){(0,Ba.kW)(function(t){return(0,Ba.c8)(t,e)},!0)},r}(),Bt=x(70450),Ra=x(63194),Da=x(60066),Za=x(2241),ur=x(44977),ii=x(38400),Ai=x(41234),Ia=x(65195),Fa=x(10389);function Di(r){var e=r.viewport,t=r.margin;return{width:e.width-t.left-t.right,height:e.height-t.top-t.bottom}}var Ui={left:10,right:10,top:0,bottom:13};function $i(r){var e=r.rendererSettings,t=e.interactivity,a=e.axes,i=e.calculatePlotArea,n=e.cartesianOptions.chartType,s=r.axisZoom,o=r.axesData,l=r.layers,u=r.playAxesRect,h=r.trimOrdinalDataOnOverflow,f=r.viewport,g=r.rotateXTickLabels90,A=r.forceMarginMin,S=[],C=[],L=[];function P(V){var k=d3.extent(V);return{min:k[0],max:k[1]}}return(0,Pt.Lp)(r.referenceLines,S,C,L,(0,p.RN)(l)),a.negotiateAxes({layers:l,parentViewport:f,padding:(0,me.ED)(Ui),playAxisControlLayout:u,showAxisTitles:ki(o,s),shouldRenderAxis:(0,p.QB)(o,(0,p.LQ)(n)),axesFontProperties:Gi(o),interactivityRightMargin:t?.mobileTileInteractive&&!h?6:0,calculatePlotArea:i,skipMergeValueAxes:s?.skipMergingValueAxisDomains(),ensureXDomain:P(S),ensureYDomain:P(C),ensureY2Domain:P(L),rotateXTickLabels90:g,forceMarginMin:A})}function Qa(r){return r.isXScrollBarVisible||r.isYScrollBarVisible}function Gi(r){return{x:{tickLabels:r.x.labelFontProperties,title:r.x.titleFontProperties},y:{tickLabels:r.y.labelFontProperties,title:r.y.titleFontProperties},y2:{tickLabels:r.y2.labelFontProperties,title:r.y2.titleFontProperties}}}function ki(r,e){var t={x:r.x.showAxisTitle,y:r.y.showAxisTitle,y2:r.y2.showAxisTitle};return e&&(t=e.updateShowAxisTitles(t)),t}var yr=function(){function r(e){this.settings=e,this.axesData=e.data;var t=this.axesData.useManagedTabIndex,a=this.axisGraphicsContext=this.settings.container.append("g").attr(Be.CP,!0).classed(r.AxisGraphicsContext.class,!0);this.svgScrollable=this.settings.container.append("svg").classed("svgScrollable",!0).style("overflow","hidden");var i=this.axisGraphicsContextScrollable=this.svgScrollable.append("g").attr(Be.CP,!0).classed(r.AxisGraphicsContext.class,!0);this.labelBackgroundRegion=this.svgScrollable.append("g").classed(O.u9.class,!0),this.labelRegion=this.svgScrollable.append("g").classed(O.ZL.class,!0),this.labelContainerRegion=this.svgScrollable.append("g").classed(O.LV.class,!0).attr(Be.CP,!0),this.labelSeriesBackgroundRegion=this.svgScrollable.append("g").classed(O.pJ.class,!0),this.labelSeriesRegion=this.svgScrollable.append("g").classed(O.oA.class,!0),this.axes.isYAxisCategorical?(this.y1AxisGraphicsContext=i.append("g").attr("class","y axis").attr("data-automation-type","y axis").classed(Ra.rG.class,t).attr(Ia.Rh,t),this.y2AxisGraphicsContext=i.append("g").attr("class","y axis").attr("data-automation-type","y2 axis"),this.xAxisGraphicsContext=a.append("g").attr("class","x axis").attr("data-automation-type","x axis").attr(Be.CP,!0)):(this.y1AxisGraphicsContext=a.append("g").attr("class","y axis").attr("data-automation-type","y axis"),this.y2AxisGraphicsContext=a.append("g").attr("class","y axis").attr("data-automation-type","y2 axis"),this.xAxisGraphicsContext=i.append("g").attr("class","x axis").attr("data-automation-type","x axis").classed(Ra.rG.class,t).attr(Ia.Rh,t))}return Object.defineProperty(r.prototype,"axes",{get:function(){return this.settings.axes},enumerable:!1,configurable:!0}),r.prototype.getScrollableRegion=function(){return this.axisGraphicsContextScrollable},r.prototype.getLabelsRegion=function(){return this.labelRegion},r.prototype.getSeriesLabelsRegion=function(){return this.labelSeriesRegion},r.prototype.getLabelBackground=function(){return this.labelBackgroundRegion},r.prototype.getLabelsContainers=function(){return{foreground:this.labelRegion,background:this.labelBackgroundRegion}},r.prototype.getLabelContainerRegion=function(){return{foreground:this.labelContainerRegion}},r.prototype.getSeriesLabelsContainers=function(){return{seriesForeground:this.labelSeriesRegion,seriesBackground:this.labelSeriesBackgroundRegion}},r.prototype.update=function(e){this.axesData=e},Object.defineProperty(r.prototype,"featureSwitches",{get:function(){return this.settings.cartesianOptions.featureSwitches},enumerable:!1,configurable:!0}),r.updateTickTooltips=function(e,t){var a=t.d3Axis.tickValues(),i=r.getTickFormatter(t.d3Axis);e.selectAll(r.TickTextSelector).each(function(n){var s=d3.select(this),o=a.indexOf(n);o<0||s.append("title").text(i(n,o))})},r.getTickFormatter=function(e){return e.tickFormat()||D.defaultTickFormat},r.prototype.renderAxis=function(e){var t,a,i,n,s,o,u,c,h=e.axesLayout,f=e.isStacked,g=e.gridlineOptions,A=e.firstVisibleNode,S=0===e.location,C=1===e.location,L=!S,P=h.tickPadding,V=h.margin,k=h.marginLimits.left,z=h.tickLabelMargins,J=h.plotArea.width,fe=h.axes,G=this.getGraphicsElement(e),K=f?1:this.getAxisRenderMode(e);if(0!==K){var ie=r.getAxisProps(e),Oe=r.getAxisTickLabelFontProperties(e),je=!(0,I._9)(ie.scale),ke=!S&&"right"===this.axes.getYAxisPosition(e.location),Je=ke?P.right:P.left;if(_.isEmpty((0,D.getHierStack)(fe))||!ie.isCategoryAxis||f){G.selectAll(r.HierarchicalStackCS.selector).remove(),S?(ie.d3Axis.tickSizeInner(je?-h.plotArea.height:0).tickSizeOuter(0),!ie.willLabelsFit&&!je&&ie.d3Axis.tickPadding(r.TickPaddingRotatedX)):je?ie.d3Axis.tickSize(f?z.stackHeight:C?-J:r.Y2TickSize).tickPadding(Je):ie.d3Axis.tickSize(D.DefaultInnerTickSize),ie.d3Axis=r.orient(G,ie.d3Axis,S?"bottom":this.axes.getYAxisPosition(e.location));var Xe=(a=void 0===(t=e.cartesianOptions)?{}:t).animateCategoryAxis,wt=a.animateValueAxis,Yt=(n=void 0===(i=e.axesAnimationOptions)?{}:i).duration,Ut=n.ease,Ct=(s=e.axesLayout.axes).x.isCategoryAxis,Gt=s.y1.isCategoryAxis,da=(void 0===(o=s.y2)?{}:o).isCategoryAxis;w.fF.assert(function(){return!da},"Unit test scream check -  Y2 cannot be categorical, must be always numeric"),(Yt&&Ut&&(S?wt&&Ct:C?Xe&&Gt||wt&&!Gt:Xe&&da||wt&&!da)?G.transition().duration(Yt).ease(Ut):G).call(ie.d3Axis);var _t=G.selectAll(r.TickTextSelector).attr("style",null).styles((0,j.E_)(Oe)).style("visibility",null).style("fill",null!==(u=this.getAxisData(e.location).labelFontProperties.color)&&void 0!==u?u:null);if(G.selectAll("g.tick line").classed("zero-line",!1),je&&G.selectAll("g.tick").filter(function(Ta){return 0===Ta}).select("line").classed("zero-line",!0),G.classed("showLinesOnAxis",g.strokeShow).classed("hideLinesOnAxis",!g.strokeShow),G.selectAll("g.tick line:not(".concat(r.InteractivityGridlineClassSelector.selector,")")).styles((0,Za.bc)(g)),!(null===(c=this.featureSwitches)||void 0===c)&&c.onObject&&(this.convertAxisValuesToSubSelectable(e),this.renderInteractivityGridline(e)),2!==K){if(f){var qt=ie;G.selectAll("g.tick").filter(function(Ta){return qt.adjustedValues[Ta]===I.Pt}).selectAll("line").remove(),_.isEmpty(ie.categoryLabelMaxWidths)?G.selectAll("g.tick").selectAll("line").remove():(r.centerHierarchyTicks(G,qt),r.styleHierarchyTicks(G,qt,g),L&&_t.call(D.rotate,{textTruncator:Z.b.getTailoredTextOrDefault,textProperties:(0,j.qk)(Oe),needRotate:!0,needEllipsis:!0,axisProperties:ie,margin:V,rotate90:!0,firstVisibleNode:A,rotationPadding:p.Fv,height:e.height,y1Hierarchy:!0}))}S?ie.willLabelsWordBreak?r.xAxisWordBreak(_t,e):_t.call(D.rotate,{textTruncator:Z.b.getTailoredTextOrDefault,textProperties:(0,j.qk)(Oe),needRotate:!ie.willLabelsFit&&!je,needEllipsis:!0,axisProperties:ie,margin:V,rotate90:Qa(h)||!ie.willLabelsFit&&(!!f||h.rotateXTickLabels90),firstVisibleNode:A,rotationPadding:p.Fv,height:e.height}):(ke?z.yRight:z.yLeft)>=k&&(!f||_.isEmpty(ie.categoryLabelMaxWidths))&&G.selectAll(r.TickTextSelector).call(I.oq,k-Je,Z.b.svgEllipsis),r.updateTickTooltips(G,ie),(S||C)&&this.axes.interactivityService&&(C?this.axes.isYAxisCategorical:!this.axes.isYAxisCategorical)&&ie.categoryIdentities&&(je?this.removeFocusAbility(G):this.renderCategoricalInteractivity(e))}else g.strokeShow&&(G.selectAll(r.TickTextSelector).style("visibility","hidden"),this.removeFocusAbility(G))}else this.renderHierarchicalAxis(e)}else G.selectAll("*").remove()},r.prototype.renderHierarchicalAxis=function(e){var t,a=this,i=(t=e.axesLayout).axes,n=t.tickLabelMargins,s=this.getGraphicsElement(e),o=(0,D.getHierStack)(i);w.fF.assertValue(!_.isEmpty(o),"one of the axis must be hierarchical and have sub-axes");var l=i.x.isCategoryAxis;w.fF.assert(function(){return l||i.y1.isCategoryAxis},"renderHierarchicalAxis should only be called if one axis is categorical"),this.axisGraphicsContextScrollable.selectAll(".".concat(l?"x":"y",".axis > .tick")).remove(),(l?i.x:i.y1).categoryIdentities&&s.attr("tabindex",0).attr("focusable",!0).attr("aria-label",l?i.x.axisLabel:i.y1.axisLabel).attr("role","listbox").classed(Da.Pg,!kt.M.isInternetExplorerOrEdge());var u=l?I.Or.bottom:"left"===this.axes.getY1AxisPosition()?I.Or.left:I.Or.right,c=Qt.getLeafHeight(n,u,o.length);s.selectAll(r.HierarchicalStackCS.selector).data(o).join(function(h){return h.append("g").classed(r.HierarchicalStackCS.class,!0).classed("showLinesOnAxis",e.gridlineOptions.strokeShow).classed("hideLinesOnAxis",!e.gridlineOptions.strokeShow)}).each(function(h,f,g){var A=0,S=0,C=0===f;C||(u===I.Or.bottom?A=c+(f-1)*n.stackHeight:u===I.Or.left?S=-c-(f-1)*n.stackHeight:u===I.Or.right?S=c+f*n.stackHeight:w.fF.assertAnyValue(u,"AxisOrientation is not expected to be top.")),a.renderAxis((0,d.__assign)((0,d.__assign)({},e),{axisProps:h,graphicsElement:d3.select(g[f]).attr("transform",(0,Fa.Iu)(S,A)),isStacked:!0,firstVisibleNode:(0,Ge.y$)(h.rootNode,h.scale.domain()[0],o.length-f),useManagedTabIndex:!!l&&e.useManagedTabIndex,height:function(){if(!l)return 999;var L=r.getAxisTickLabelFontProperties(e);return C?L.size.pt<=p.rZ?e.axesLayout.marginLimits.bottom:c:n.stackHeight}()}))}),this.categoryAxisGraphicsContext=s},r.prototype.renderCategoricalInteractivity=function(e){var t=r.getAxisProps(e),a=this.getGraphicsElement(e),i=t.categoryIdentities;this.categoryAxisGraphicsContext=a;var n=(0,D.isStackedAxisProperties)(t);n||(a.attr("aria-label",t.axisLabel),e.useManagedTabIndex||a.attr("tabindex",0).attr("focusable",!0).attr("role","listbox").classed(Da.Pg,!kt.M.isInternetExplorerOrEdge()));for(var s=(0,D.isStackedAxisProperties)(t)?t.adjustedValues:t.values,o=(0,D.isStackedAxisProperties)(t)?t.categoryHierarchyPointers:[],l=_.map(t.d3Axis.tickValues(),function(A,S){var C,L,P;0===S&&!_.isEmpty(o)&&(P=A,A=_.findLastIndex(o,function(k){return!!k},A));var V=o[A];return{value:s[A],selected:!1,categoryIndex:null!==(C=V?.categoryIndex)&&void 0!==C?C:A,adjustedCategoryIndex:P,seriesIndex:null!==(L=V?.seriesIndex)&&void 0!==L?L:0,identity:i[A]?i[A]():void 0}}),u=0,c=0,h=i.length;c<h;c++){var f=l[u];if(f?.categoryIndex===c)f.value!==I.Pt&&this.categoryDataPoints.push(f),u++;else{var g=o[c];(!n||g)&&this.categoryDataPoints.push({value:void 0,categoryIndex:g?g.categoryIndex:c,seriesIndex:g?g.seriesIndex:0,selected:!1,identity:void 0})}}a.selectAll(".tick").data(l,function(A){var S,C,L,P;return null!==(P=null!==(C=null===(S=A.adjustedCategoryIndex)||void 0===S?void 0:S.toString())&&void 0!==C?C:null===(L=A.categoryIndex)||void 0===L?void 0:L.toString())&&void 0!==P?P:A.toString()}).select("text").each(function(A){A.value!==I.Pt&&d3.select(this).attr("tabindex",0).attr("focusable",!0).attr("role","option").attr("aria-selected",function(S){return S.selected}).attr("data-automation-type","axis-tick-text").classed(Da.Pg,!kt.M.isInternetExplorerOrEdge()).selectAll("tspan").datum(A)})},r.prototype.removeFocusAbility=function(e){e.attr("tabindex",null).attr("focusable",null)},r.prototype.getAxisData=function(e){return 0===e?this.axesData.x:1===e?this.axesData.y:this.axesData.y2},r.getAxisProps=function(e){var t,a=e.axesLayout.axes;return null!==(t=e.axisProps)&&void 0!==t?t:0===e.location?a.x:1===e.location?a.y1:a.y2},r.prototype.getGraphicsElement=function(e){var t,a=e.location;return null!==(t=e.graphicsElement)&&void 0!==t?t:0===a?this.xAxisGraphicsContext:1===a?this.y1AxisGraphicsContext:this.y2AxisGraphicsContext},r.getAxisTickLabelFontProperties=function(e){var t=e.location,a=e.axesFontProperties;return(0===t?a.x:1===t?a.y:a.y2).tickLabels},r.prototype.getAxisRenderMode=function(e){var t=e.location,a=e.axesLayout.shouldRenderAxis;return r.getAxisProps(e)?e.shouldRenderGridLinesOnly&&e.gridlineOptions.strokeShow?2:(0===t?a.x:1===t?a.y:a.y2)?1:0:0},r.prototype.convertAxisValuesToSubSelectable=function(e){var t=0===e.location?"x-axis-values":1===e.location?"y1-axis-values":"y2-axis-values",a=this.getGraphicsElement(e).selectAll(r.TickTextSelector).filter(function(){return"visible"===d3.select(this).style("visibility")}),i=a.nodes();_.isEmpty(i)||(a.classed(Be.cy,!0).attr(Be.Ez,t).attr(Be.CK,"Role_DisplayName_Values").attr(Be.QZ,2),i.forEach(function(n){return Be.O5.setDataForElement(n,{getRegionOutlines:function(){return r.getAxisValuesOutlines(i,t,e.multipleId)}})}))},r.getAxisValuesOutlines=function(e,t,a){for(var i,n=Number.MAX_SAFE_INTEGER,s=Number.MAX_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER,l=Number.MIN_SAFE_INTEGER,u=0,c=e;u<c.length;u++){var f=(i=c[u].getBoundingClientRect()).x,g=i.y,A=i.bottom,S=i.right;n=Math.min(n,f),s=Math.min(s,g),o=Math.max(o,A),l=Math.max(l,S)}return[{id:"".concat(t).concat(a??""),outline:{x:n,y:s,width:l-n,height:o-s,type:1}}]},r.prototype.renderAxes=function(e){var t,a,i,n;w.fF.assertValue(e.axesLayout,"axesLayout");var h,f,s=e.axesLayout,o=e.axesFontProperties,l=s.axes,u=!_.isEmpty((0,D.getHierStack)(l));this.categoryDataPoints=[],this.categoryAxisGraphicsContext=void 0,w.fF.assert(function(){return null!=l.x},"axes.x must be defined."),this.renderAxis((0,d.__assign)((0,d.__assign)({},e),{location:0,height:(h=o.x.tickLabels.size.pt<=p.rZ,f=h?s.marginLimits.bottom:s.margin.bottom,h||null==s.axisLabels.x?f:f-(Z.b.estimateSvgTextHeight((0,j.qk)(o.x.tickLabels))+Qt.XAxisLabelPadding)),gridlineOptions:(0,d.__assign)((0,d.__assign)({},null===(t=this.axesData)||void 0===t?void 0:t.x.gridline),{strokeShow:(!(0,I._9)(l.x.scale)||l.x.isCategoryAxis&&u)&&(null===(a=this.axesData)||void 0===a?void 0:a.x.gridline.strokeShow)})}));var c=(0,d.__assign)((0,d.__assign)({},null===(i=this.axesData)||void 0===i?void 0:i.y.gridline),{strokeShow:(!(0,I._9)(l.y1.scale)||l.y1.isCategoryAxis&&u)&&(null===(n=this.axesData)||void 0===n?void 0:n.y.gridline.strokeShow)});if(this.renderAxis((0,d.__assign)((0,d.__assign)({},e),{location:1,gridlineOptions:c})),this.renderAxis((0,d.__assign)((0,d.__assign)({},e),{location:2,gridlineOptions:c})),this.renderAxesTitles(e),this.valueGridlines=this.axisGraphicsContext.selectAll("g.tick line"),this.translateAxes(s),this.axes.interactivityService&&this.categoryAxisGraphicsContext)return{dataPoints:this.categoryDataPoints,behaviorOptions:{root:this.categoryAxisGraphicsContext,ticks:this.categoryAxisGraphicsContext.selectAll(".tick")},navigationOptions:{helper:this,navigationStrategy:u?U.jN.SeriesFirst:U.jN.CategoryOnly},animateLabels:!1,labelDataPointGroups:[],labelDataPoints:[],labelOrientation:void 0,labelsAreNumeric:void 0,labelDataPointSeriesGroups:[]}},r.prototype.renderInteractivityGridline=function(e){var t=e.location,a=e.multipleId,i=e.gridlineOptions,n=this.getGraphicsElement(e),s=0===t?"vertical-gridlines":1===t?"horizontal-gridlines":"secondary-horizontal-gridlines",o="vertical-gridlines"!==s,l=n.selectAll("g.tick line:not(".concat(r.InteractivityGridlineClassSelector.selector,")"));l.each(function(){var u,c=d3.select(this.parentNode),h=d3.select(this),f=h.node(),g=(u=f.getBoundingClientRect()).height,S=i.strokeShow&&(o&&u.width>0||!o&&g>0);c.selectAll(r.InteractivityGridlineClassSelector.selector).filter(function(C){return C===f}).data(function(){return S?[f]:[]}).join("line").attr("class",r.InteractivityGridlineClassSelector.class).classed(Be.cy,!0).style("stroke-width",r.interactivityGridlinePadding).style("stroke-linejoin",Ai.t.round).style("stroke-dasharray","none").attrs({x1:h.attr("x1"),y1:h.attr("y1"),x2:h.attr("x2"),y2:h.attr("y2")}).attr(Be.Ez,s).attr(Be.CK,o?"Visual_Gridline_Horizontal":"Visual_Gridline_Vertical").attr(Be.QZ,3).each(function(){Be.O5.setDataForElement(this,{getRegionOutlines:function(){var L=l.nodes();return r.getGridlinesOutlines(L,s,a)}})})})},r.prototype.getFirstElement=function(){var e;return{element:null===(e=this.categoryAxisGraphicsContext)||void 0===e?void 0:e.selectAll(r.TickTextSelector).node()}},r.prototype.getDataPointsAtSeries=function(e){return _.filter(this.categoryDataPoints,function(t){return t.seriesIndex===e})},r.prototype.getNextDataPoint=function(e,t,a){var i,n;if(_.isEmpty(this.categoryDataPoints))return{element:this.categoryAxisGraphicsContext.select(r.TickTextSelector).node(),targetCategoryIndex:0};switch(a){case U.x0.PreviousCategory:case U.x0.NextCategory:var s=a===U.x0.PreviousCategory?-1:1,o=this.getDataPointsAtSeries(t),l=s+_.findIndex(o,function(h){return h.categoryIndex===e});l>=o.length||l<0?(i=this.rollToNextSeries(t,a),e=i[0],t=i[1]):e=o[l].categoryIndex;break;case U.x0.PreviousSeries:case U.x0.NextSeries:s=a===U.x0.PreviousSeries?-1:1,o=_.filter(this.categoryDataPoints,function(g){return g.categoryIndex===e});var u=s+_.findIndex(o,function(g){return g.seriesIndex===t});u>=o.length||u<0?(n=this.findNearestSeries(e,t,a),e=n[0],t=n[1]):t=o[u].seriesIndex}return{element:this.categoryAxisGraphicsContext.selectAll(r.TickTextSelector).filter(function(h){return(!h.adjustedCategoryIndex||h.adjustedCategoryIndex===h.categoryIndex)&&h.categoryIndex===e&&h.seriesIndex===t}).node(),targetCategoryIndex:e}},r.getGridlinesOutlines=function(e,t,a){var n={type:0,outlines:e.map(function(s){var o=s.getBoundingClientRect(),l=o.x,u=o.y;return{points:[{x:l,y:u},{x:l+o.width,y:u+o.height}],type:2}})};return[{id:a?"".concat(t).concat(a):t,outline:n}]},r.prototype.rollToNextSeries=function(e,t){w.fF.assert(function(){return t===U.x0.PreviousCategory||t===U.x0.NextCategory},"expected a direction having to do with category");var a=t===U.x0.PreviousCategory?-1:1,i=t===U.x0.PreviousCategory?_.last:_.first,n=_.maxBy(this.categoryDataPoints,function(l){return l.seriesIndex}).seriesIndex+1;return(e+=a)>=n?e=0:e<0&&(e=n-1),[i(this.getDataPointsAtSeries(e)).categoryIndex,e]},r.prototype.findNearestSeries=function(e,t,a){w.fF.assert(function(){return a===U.x0.PreviousSeries||a===U.x0.NextSeries},"expected a direction having to do with series");var i=_.maxBy(this.categoryDataPoints,function(l){return l.seriesIndex}).seriesIndex+1;(t+=a===U.x0.PreviousSeries?-1:1)>=i&&(t=0),t<0&&(t=i-1);var s=this.getDataPointsAtSeries(t),o=_.sortedLastIndexBy(s,{categoryIndex:e},function(l){return l.categoryIndex})-1;return w.fF.assertValue(e=s[o].categoryIndex,"sortedLastIndexBy failed"),[e,t]},r.prototype.renderAxesTitles=function(e){var t,a=this;this.axisGraphicsContext.selectAll(".xAxisLabel").remove(),this.axisGraphicsContext.selectAll(".yAxisLabel").remove();var i=e.axesFontProperties,n=(t=e.axesLayout).axisLabels,s=t.viewport,o=t.margin,l=t.axes;if(w.fF.assertValue(s,"viewport"),w.fF.assertValue(n,"axisLabels"),(null!=n.x||null!=n.y||null!=n.y2)&&!e.shouldRenderGridLinesOnly){var c=s.width-(o.left+o.right),h=s.height-o.top,f=this.axes.shouldShowY1OnRight(),g=function(S){var C,L,P,V,k,z,J,fe,G=0===S,K=1===S,ie=2===S,Oe=G?n.x:K?n.y:n.y2,je=null===(C=G?i.x:K?i.y:i.y2)||void 0===C?void 0:C.title;if(null!=Oe&&je){var ke,Je;if(null!==(L=a.featureSwitches)&&void 0!==L&&L.onObject){var Xe=ie?B.p.valueAxis.secTitleText:G&&l.x.isCategoryAxis||K&&null!==(P=l.y1)&&void 0!==P&&P.isCategoryAxis?B.p.categoryAxis.titleText:B.p.valueAxis.titleText;(Je=G?(0,ae.s4)(Xe,Oe):(0,ae.Mw)(Xe,Oe))&&!Oe&&e.showTitlePlaceholders&&(ke=!0,Oe=a.settings.hostServices.getLocalizedString("Format_AddAxisTitle"))}if(Oe||!ie){var wt=(0,j.qk)(je,Oe),Yt=Z.b.estimateSvgTextBaselineDelta(wt),Ut=Z.b.estimateSvgTextHeight(wt),Gt=c+o.right-Ut-Qt.YAxisLabelPadding+3,da=-(o.left+3);a.axisGraphicsContext.append("text").attr("class",G?"xAxisLabel":"yAxisLabel").attr("transform",G?null:"rotate(-90)").attr("dy",G?null:"1em").attr("x",G?c/2:-(h-o.bottom)/2).attr("y",G?h-Yt:K?f?Gt:da:f?da:Gt).style("text-anchor","middle").styles((0,j.E_)(je)).style("fill",null!==(fe=null===(J=G?null===(V=a.axesData)||void 0===V?void 0:V.x:K?null===(k=a.axesData)||void 0===k?void 0:k.y:null===(z=a.axesData)||void 0===z?void 0:z.y2)||void 0===J?void 0:J.titleFontProperties.color)&&void 0!==fe?fe:null).text(Oe).call(I.oq,G?c:h-o.bottom,function(ua,_t){return Z.b.svgEllipsis(ua,_t,wt)}).call(ii.Q,[Oe]).filter(function(){var ua;return null===(ua=a.featureSwitches)||void 0===ua?void 0:ua.onObject}).classed(Be.cy,!0).classed(Be.Qh.class,ke).attr(Be.Ez,G?"x-axis-title":K?"y1-axis-title":"y2-axis-title").attr(Be.CK,"Visual_Axis_Title").attr(Be.QZ,1).filter(function(){return!!Je}).attr(Be.kv,JSON.stringify(Je))}}};g(0),g(1),g(2)}},r.prototype.translateAxes=function(e){var t,a=this,i=e.margin,n=(t=Di(e)).width,s=t.height,o=this.axesData.showsSeriesLabels()?(0,le.lr)(this.axesData.seriesLabelSettings,n):0,l=this.axesData.seriesLabelSettings.position===Re.M.right,u=l?i.left:i.left+o,c=l?0:o,h=this.axes.shouldShowY1OnRight();this.xAxisGraphicsContext.attr("transform",(0,Fa.Iu)(0,s)),this.y1AxisGraphicsContext.attr("transform",(0,Fa.Iu)(h?n:0,0)),this.y2AxisGraphicsContext.attr("transform",(0,Fa.Iu)(h?0:n,0)),this.svgScrollable.attrs({x:0,width:e.viewport.width,height:e.viewport.height}),this.axisGraphicsContext.attr("transform",(0,Fa.Iu)(i.left,i.top));var f=function(S){a.axisGraphicsContextScrollable.attr("transform",(0,Fa.Iu)(S,i.top)),a.labelRegion.attr("transform",(0,Fa.Iu)(S,i.top)),a.labelContainerRegion.attr("transform",(0,Fa.Iu)(S,i.top)),a.labelBackgroundRegion.attr("transform",(0,Fa.Iu)(S,i.top)),a.labelSeriesRegion.attr("transform",(0,Fa.Iu)(S,i.top)),a.labelSeriesBackgroundRegion.attr("transform",(0,Fa.Iu)(S,i.top))};f(u),e.isXScrollBarVisible?(this.svgScrollable.attrs({x:i.left,width:n}),f(c)):e.isYScrollBarVisible&&this.svgScrollable.attr("height",s+i.top),this.valueGridlines.attr("transform","translate(".concat(l?h?-o:0:h?0:o,")"))},r.centerHierarchyTicks=function(e,t){e.selectAll("g.tick").filter(function(a){return t.adjustedValues[a]!==I.Pt}).each(function(a){var i=d3.select(this),n=i.attr("transform"),s=(0,Fa.nd)(n);s&&+s.x>0&&i.attr("transform",(0,Fa.Iu)(+s.x+t.categoryLabelMaxWidths[a]/2-t.categoryThickness/2+p.Fv,+s.y)),s&&+s.y>0&&i.attr("transform",(0,Fa.Iu)(+s.x,+s.y+t.categoryLabelMaxWidths[a]/2-t.categoryThickness/2+p.Fv))})},r.xAxisWordBreak=function(e,t){var a=null;e.style("text-anchor","middle").attrs({dx:null,dy:null,transform:"rotate(0)",y:function(){if(null==a){var n=Z.b.getSvgMeasurementProperties(this),s=Z.b.estimateSvgTextHeight(n),o=Z.b.estimateSvgTextBaselineDelta(n);a=10+s-o}return"".concat(a,"px")}}).each(function(i){(0,ur.lM)(this,(0,D.getMaxWidth)(r.getAxisProps(t),i),t.height)})},r.orient=function(e,t,a){return delete e.node().__axis,(0,D.axisFactory)(t.scale(),I.Or[a]).tickArguments(t.tickArguments()).tickValues(t.tickValues()).tickFormat(t.tickFormat()).tickSize(t.tickSize()).tickSizeInner(t.tickSizeInner()).tickSizeOuter(t.tickSizeOuter()).tickPadding(t.tickPadding())},r.styleHierarchyTicks=function(e,t,a){e.selectAll("g.tick").filter(function(i){return t.adjustedValues[i]!==I.Pt}).selectAll("line").data(function(i){return t.lineStyleInfo[i]}).join(function(i){return i.append("line")}).attrs({x1:function(n){return n.x1},y1:function(n){return n.y1},x2:function(n){return n.x2},y2:function(n){return n.y2}}).styles((0,Za.bc)(a))},r.AxisGraphicsContext=(0,W.CH)("axisGraphicsContext"),r.HierarchicalStackCS=(0,W.CH)("stack"),r.InteractivityGridlineClassSelector=(0,W.CH)("interactivity-gridline"),r.TickTextSelector="g.tick > text",r.interactivityGridlinePadding=10,r.TickPaddingRotatedX=5,r.Y2TickSize=-6,r}(),ci=function(){function r(){this.navigationLayers=[],this.currentNavigationLayerIndex=0}return r.prototype.updateScrollCallbacks=function(e){this.scrollCallbacks=e},r.prototype.clearNavigationLayers=function(){this.navigationLayers=[]},r.prototype.addNavigationLayer=function(e){this.navigationLayers.push(e)},r.prototype.getFirstElement=function(){this.currentNavigationLayerIndex=0;var t,e=this.navigationLayers[this.currentNavigationLayerIndex].getFirstElement();return e&&(t=e.element?e.element:this.getNextDataPoint(e.targetCategoryIndex,e.targetSeriesIndex,U.x0.NextSeries).element),{element:t}},r.prototype.getNextDataPoint=function(e,t,a){var i=this.composeLayerPointInfo(e,t);return this.getNextDataPointWithStartData(i,a,i)},r.prototype.getNextDataPointWithStartData=function(e,t,a){var i=this,n=e.categoryIndex,s=e.seriesIndex,o=this.navigationLayers[this.currentNavigationLayerIndex],l=o.getNextDataPoint(n,s,t),u=l.targetCategoryIndex,c=t===U.x0.NextSeries||t===U.x0.NextCategory,h=this.navigationLayers.length;if(h>1&&l.targetCategoryIndex!==n){var f=n,g=0,A=c?1:-1;do{switch(t){case U.x0.NextSeries:case U.x0.PreviousSeries:this.currentNavigationLayerIndex+=A,this.layerRollOverCheck(this.currentNavigationLayerIndex,h)?(this.currentNavigationLayerIndex=this.currentNavigationLayerIndex<0?h-1:0,l=(o=this.navigationLayers[this.currentNavigationLayerIndex]).getFirstElement(u,!c),_.isFinite(l.targetCategoryIndex)&&(u=l.targetCategoryIndex),f=u,g++):l=(o=this.navigationLayers[this.currentNavigationLayerIndex]).getFirstElement(f,!c);break;case U.x0.NextCategory:case U.x0.PreviousCategory:g=h;break;default:w.fF.assertNever(t)}}while(!l.element&&g<h&&(!this.layerRollOverCheck(this.currentNavigationLayerIndex+A,h)||g<h-1))}if(!l.element&&null!=u&&this.shouldScroll(u)){this.getPendingFocusElement=function(){if(i.getPendingFocusElement=void 0,t===U.x0.NextSeries?i.currentNavigationLayerIndex=0:t===U.x0.PreviousSeries&&(i.currentNavigationLayerIndex=h-1),!(l=(o=i.navigationLayers[i.currentNavigationLayerIndex]).getNextDataPoint(n,s,t)).element){var L=i.currentNavigationLayerIndex;do{i.currentNavigationLayerIndex++,i.currentNavigationLayerIndex>=i.navigationLayers.length&&(i.currentNavigationLayerIndex=0),l=i.navigationLayers[i.currentNavigationLayerIndex].getNextDataPoint(n,s,t)}while(!l.element&&i.currentNavigationLayerIndex!==L)}if(i.shouldFindNextPoint(l,e,a,c)){var P=i.composeLayerPointInfo(l.targetCategoryIndex,l.targetSeriesIndex);return i.getNextDataPointWithStartData(P,t,a).element}return l.element};var S=u-n;S<0?this.scrollCallbacks.scrollTo(u):this.scrollCallbacks.scrollBy(S)}else if(this.shouldFindNextPoint(l,e,a,c)){var C=this.composeLayerPointInfo(l.targetCategoryIndex,l.targetSeriesIndex);return this.getNextDataPointWithStartData(C,t,a)}return l},r.prototype.shouldScroll=function(e){return!!this.scrollCallbacks&&this.scrollCallbacks.shouldScrollTo(e)},r.prototype.layerRollOverCheck=function(e,t){return e>=t||e<0},r.prototype.composeLayerPointInfo=function(e,t){return{categoryIndex:e,seriesIndex:t,layerIndex:this.currentNavigationLayerIndex}},r.prototype.shouldFindNextPoint=function(e,t,a,i){if((!e.element||e.noShape)&&null!==e.targetCategoryIndex&&null!==e.targetSeriesIndex){var s=this.composeLayerPointInfo(e.targetCategoryIndex,e.targetSeriesIndex);switch(this.compareLayerPointInfo(a,s,i)){case 1:if(this.compareLayerPointInfo(t,s,i)>=0&&this.compareLayerPointInfo(a,t,i)>0)return!1;break;case 0:return!1;case-1:if(this.compareLayerPointInfo(a,t,i)>0||this.compareLayerPointInfo(t,s,i)>=0)return!1;break;default:w.fF.assertFail("Unexpected result from compareLayerPointInfo")}return!0}return!1},r.prototype.compareLayerPointInfo=function(e,t,a){return e.categoryIndex>t.categoryIndex?a?1:-1:e.categoryIndex<t.categoryIndex?a?-1:1:e.seriesIndex>t.seriesIndex?a?1:-1:e.seriesIndex<t.seriesIndex?a?-1:1:e.layerIndex>t.layerIndex?a?1:-1:e.layerIndex<t.layerIndex?a?-1:1:0},r}(),pi=x(38078),H=function(){function r(e,t){this.options=e,this.scrollbar=t}return r.filterDataToViewport=function(e){var t,a=(t=e||{}).scrollScale,i=t.mainAxisScale,n=t.layers,s=t.axesLayout;if(e.scrollScale){var o=(0,D.invertOrdinalScale)(a,e.extent.start),l=o+e.visibleCategoryCount,c=a.domain().slice(o,l);if(!_.isEqual(c,i.domain())){if(c&&c.length>0){for(var h=0,f=n;h<f.length;h++)f[h].setFilteredData(c[0],c[c.length-1]+1);i.domain(c);var A=s.axes,S=s.isXScrollBarVisible?A.x:A.y1;S.d3Axis.scale(i),S.scale(i),S.d3Axis.ticks(c.length),S.d3Axis.tickValues(c);var C=yr.getTickFormatter(S.d3Axis);S.values=_.map(c,function(J){return C(J)});var L=(0,D.getHierStack)(A);if(!_.isEmpty(L))for(var P=A.x.isCategoryAxis?I.Or.bottom:s.axes.y1.orientation,V=Qt.getLeafHeight(e.axesLayout.tickLabelMargins,P,L.length),k=function(fe){var G=L[fe],K=(0,D.getCategoryThickness)(G.scale),ie=G.values,Oe=r.setLabelsAtEdges(c,ie);if(G.d3Axis.ticks(c.length).tickValues(c).tickFormat(function(ua){var _t=ie[Oe[c.indexOf(ua)]];return _t===I.Pt?"":"".concat(_t)}),0===fe)return"continue";for(var Xe,je=[],ke=[],Je=[],wt=function(_t){null!=Xe&&(je[Xe]=Qt.getMaxCategoryWidth(_t,K),ke[Xe]=Qt.getHierarchyLineStyleInfo({levelIndex:fe,stackHeight:s.tickLabelMargins.stackHeight,leafHeight:V,categorySpanCount:_t,categoryWidth:K,orientation:P}))},Yt=0;Yt<Oe.length;Yt++){var Ut=c[Yt],Ct=Oe[Yt];ie[Ct]!==I.Pt?(wt(Ut-Xe),Je[Ut]=ie[Ct],Xe=Ut):Je[Ut]=I.Pt}null!=Xe&&wt(c[Oe.length-1]-Xe+1),G.categoryLabelMaxWidths=je,G.lineStyleInfo=ke,G.adjustedValues=Je},z=0;z<L.length;z++)k(z)}return{startIndex:o,endIndex:l-1}}}},r.prototype.destroy=function(){this.scrollbar.remove()},r.prototype.render=function(e,t,a,i,n,s,o){var u,c,h,A,S,C,L,P,V,k,z,l=this,f=e.axesLayout,g=e.layers;if(this.axisScale=null,i||Qa(f))if(this.options.axes.isYAxisCategorical){this.axisScale=f.axes.y1.scale,A=f.viewport.width,S=f.margin.top,k=f.axes.y1.innerPaddingRatio;var ie=(P=f.axes.y1.categoryThickness)*(V=f.axes.y1.outerPaddingRatio);z=f.plotArea.height,L=Math.max(1,(0,te.Uy)((z-2*ie)/P)),C=z}else{this.axisScale=f.axes.x.scale,A=f.margin.left;var J=null===(u=this.options.cartesianOptions)||void 0===u?void 0:u.chartType,fe=!(0,p.LQ)(J)||n,G=Ot(g,J);if(G.position===Re.M.left&&fe){var K=Di(f).width;A+=(0,le.lr)(G,K)}S=f.viewport.height,k=f.axes.x.innerPaddingRatio,ie=(P=f.axes.x.categoryThickness)*(V=f.axes.x.outerPaddingRatio),z=f.plotArea.width,L=Math.max(1,(0,te.Uy)((z-2*ie)/P)),C=z}if(!Qa(f))return i&&(i.resetViewport(L),i.shouldLoadMoreData()&&i.loadMoreData()),this.scrollbar.remove(),void t((0,d.__assign)((0,d.__assign)({},e),{cartesianOptions:this.options.cartesianOptions}));var Oe=this.axisScale.copy();Oe.range([0,C]).paddingInner(.1).paddingOuter(0);var je=Oe(L-1)+Oe.bandwidth();this.scrollHandler=new oe({visibleScale:this.axisScale,fullScale:Oe,onScroll:function(Xe){var wt=Oe(Xe);l.scrollbar.setExtent({start:wt,end:null}),l.scrollbar.refreshExtentAndVisual()}}),this.axisScale.range([0,z]).paddingInner(k).paddingOuter(V),this.scrollbar.setOrientation(f.isXScrollBarVisible),this.scrollbar.setScale(Oe,this.options.suppressBrush),this.scrollbar.scrollBarLength=C,this.scrollbar.setExtentLength(je),a||this.scrollbar.setExtent({start:0,end:null});var ke={axesLayout:f,layers:g,categoryLoadMoreDataHandler:i,mainAxisScale:this.axisScale,renderDelegate:t,scrollScale:Oe,visibleCategoryCount:L,cartesianOptions:this.options.cartesianOptions,extent:this.scrollbar.getExtent()};this.scrollbar.render(A,S,function(){r.renderVisual((0,d.__assign)((0,d.__assign)({},ke),{suppressAnimations:!0,extent:l.scrollbar.getExtent()})),o?.addDirectEditPlaceholderOutlines(),o?.refreshOutlines()},s,o),a&&i?this.scrollTo(null!==(h=null===(c=i.viewportDataRange)||void 0===c?void 0:c.startIndex)&&void 0!==h?h:0):r.renderVisual((0,d.__assign)((0,d.__assign)({},ke),{extent:this.scrollbar.getExtent()}))},r.prototype.scrollDelta=function(e){this.scrollHandler.scrollDelta(e)},r.prototype.scrollTo=function(e){this.scrollHandler.scrollTo(e)},r.prototype.shouldScrollTo=function(e){if(!this.scrollHandler)return!1;var t=this.axisScale.domain();return!_.isEmpty(t)&&(e<t[0]||e>t[t.length-1])},r.prototype.setExtent=function(e){this.scrollbar.setExtent(e),this.scrollbar.refreshExtentAndVisual()},r.prototype.scrollBy=function(e){var t=this.axisScale.domain();_.isEmpty(t)||this.scrollHandler.scrollTo(t[0]+e)},r.prototype.clearRenderingTimeout=function(){this.scrollbar&&this.scrollbar.clearRenderingTimeout()},r.setLabelsAtEdges=function(e,t){if(e.length<=1||t[e[0]]!==I.Pt)return e;var a=e[0],i=e.slice();if(a<t.length&&a>=0){for(;t[a]===I.Pt&&a>=0;a--);i[0]=a}return i},r.renderVisual=function(e){var t=r.filterDataToViewport(e);if(t){if(e.categoryLoadMoreDataHandler){var a=e.categoryLoadMoreDataHandler;a.viewportDataRange=t,a.shouldLoadMoreData()&&a.loadMoreData()}e.renderDelegate(e)}},r.ScrollbarWidth=10,r}(),oe=function(){function r(e){w.fF.assertValue(e,"options must be set"),w.fF.assertValue(e.visibleScale,"options.visibleScale must be set"),w.fF.assertValue(e.fullScale,"options.fullScale must be set"),w.fF.assertValue(e.onScroll,"options.onScroll must be set"),this.visibleScale=e.visibleScale,this.fullScale=e.fullScale,this.onScroll=e.onScroll;var t=pi.b$.valueOrDefault(e.timeout,r.defaultTimeoutMs);this.extendScrollTimeout=_.debounce(this.onTimeout,t),this.totalScrollDistance=0}return r.prototype.scrollDelta=function(e){if(!_.isEmpty(this.visibleScale.domain())){this.totalScrollDistance<0&&e>0||this.totalScrollDistance>0&&e<0?this.totalScrollDistance=e:this.totalScrollDistance+=e;var t=r.getStepSize(this.visibleScale);if(Math.abs(this.totalScrollDistance)>=t){this.extendScrollTimeout&&this.extendScrollTimeout.cancel();var a=this.getNewStartIndex(this.totalScrollDistance);this.scrollTo(a),this.totalScrollDistance=0}else this.extendScrollTimeout()}},r.prototype.scrollTo=function(e){var t=this.clampIndex(e);this.onScroll(t)},r.getStepSize=function(e){var t=_.map(e.domain(),e);if(t.length>1)return t[1]-t[0];var a=e.range();return a[1]-a[0]},r.prototype.getNewStartIndex=function(e){var t=e>=0;e=t?e:-e;var a=this.visibleScale,i=_.map(a.domain(),a),n=a.domain(),s=n[0],l=i[0]+e;return(t?1:-1)*(l>a.range()[1]?n.length:(0,D.invertOrdinalScale)(a,l)-s)+s},r.prototype.clampIndex=function(e){var t=this.fullScale.domain(),a=_.head(t),i=_.last(t);return Math.max(a,Math.min(i,e))},r.prototype.onTimeout=function(){this.totalScrollDistance=0},r.defaultTimeoutMs=1e3,r}(),Ae=function(){function r(e){this.settings=e,this.svgAxes=new yr(e),this.navigationHelper=new ci}return r.prototype.destroy=function(){var e,t;null===(e=this.scrollableAxes)||void 0===e||e.destroy(),null===(t=this.svgScrollbar)||void 0===t||t.remove(),this.scrollableAxes=void 0,this.svgScrollbar=void 0},r.prototype.update=function(e,t){var a;null===(a=this.svgScrollbar)||void 0===a||a.updateScrollbarOptions(t),this.svgAxes.update(e)},r.prototype.render=function(e,t,a,i,n,s,o,l,u){var c=this,h=this.options=o,g=h.trimOrdinalDataOnOverflow,A=h.categoryLoadMoreDataHandler,S=h.suppressAnimations,C=h.isHierarchicalAxis,L=h.formatMode,P=h.isSelected,V=h.viewMode,k=h.subSelectionHelper,z=h.preserveScrollPosition,J=h.navigationScrollCallbacks,fe=this.options.multipleId||this.settings.multipleId;if(!u&&((u=$i({axesData:e,rendererSettings:this.settings,referenceLines:i,layers:a,viewport:n,playAxesRect:h.playAxesRect,trimOrdinalDataOnOverflow:g,axisZoom:t,rotateXTickLabels90:void 0})).plotArea.width<1||u.plotArea.height<1))return u;if(!this.settings.suppressBrush||!(n.height<1||n.width<1)){a.forEach(function(Oe,je){var ke,Je;0!==je&&u.axes.y2?Je=2:(Je=1,1===a.length&&u.axes.y2&&(Je|=2)),null===(ke=Oe.setAxesLayout)||void 0===ke||ke.call(Oe,{layout:u,trimOrdinalDataOnOverflow:g,axisType:Je})}),t?.render({axesLayout:u,axesData:e,showTitlePlaceholders:P&&1===V});var G=u.axes.x.isCategoryAxis?u.axes.x:u.axes.y1;A?.setScale(G.scale);var K=function(je){return c.renderAxes((0,d.__assign)((0,d.__assign)({},je),{isHierarchicalAxis:C}),o.axesAnimationOptions,Gi(e),s,l,P&&1===V,fe)};w.fF.assert(function(){return!c.svgScrollbar&&!c.scrollableAxes||!(!c.svgScrollbar||!c.scrollableAxes)},"Expect `svgScrollbar` and `scrollableAxes` to have the same state");var ie={axesLayout:u,layers:a,suppressAnimations:S,isHierarchicalAxis:C};return o.supportsScrolling?(this.svgScrollbar||(this.svgScrollbar=new Bt.x({scrollbarWidth:H.ScrollbarWidth,onExtentUpdate:this.settings.onExtentUpdate}),this.scrollableAxes=new H(this.settings,this.svgScrollbar),this.svgScrollbar.init(this.settings.container)),this.scrollableAxes.render(ie,K,z,A,e.hasY2Role,L,k)):(this.destroy(),K((0,d.__assign)((0,d.__assign)({},ie),{cartesianOptions:this.settings.cartesianOptions}))),this.navigationHelper.updateScrollCallbacks(o.supportsScrolling?J:void 0),this.eventsBoundForAxesLayout!==u&&(this.bindScrollWheelEvents(u,this.settings.container,L,k),this.bindTouchEvents(u,this.settings.container,L,k),this.eventsBoundForAxesLayout=u),u}},r.prototype.renderAxes=function(e,t,a,i,n,s,o){var l,u,c=this.svgAxes.renderAxes((0,d.__assign)((0,d.__assign)({},e),{axesAnimationOptions:t,axesFontProperties:a,shouldRenderGridLinesOnly:this.options.shouldRenderGridLinesOnly,useManagedTabIndex:n,showTitlePlaceholders:s,multipleId:o}));if(c?.navigationOptions&&this.settings.behavior){this.navigationHelper.clearNavigationLayers(),this.navigationHelper.addNavigationLayer(c.navigationOptions.helper);var h={isAxis:!0,navigationOptions:{helper:this.navigationHelper,navigationStrategy:c.navigationOptions.navigationStrategy,focusElement:null===(u=(l=this.navigationHelper).getPendingFocusElement)||void 0===u?void 0:u.call(l)},pointSourceKey:"cartesian-axis".concat(this.settings.multipleId||""),isHierarchicalAxis:e.isHierarchicalAxis};this.settings.interactivityService.bind(c.dataPoints,this.settings.behavior,c.behaviorOptions,h),this.settings.behavior.renderSelection(this.settings.interactivityService.hasSelection())}i(e)},r.prototype.getLayerContainer=function(){return this.svgAxes.getScrollableRegion()},r.prototype.getDataLabelContainers=function(){return this.svgAxes.getLabelsContainers()},r.prototype.getLabelContainerRegion=function(){return this.svgAxes.getLabelContainerRegion()},r.prototype.getSeriesLabelContainers=function(){return this.svgAxes.getSeriesLabelsContainers()},r.prototype.setExtent=function(e){var t;null===(t=this.scrollableAxes)||void 0===t||t.setExtent(e)},r.prototype.scrollDelta=function(e){var t;null===(t=this.scrollableAxes)||void 0===t||t.scrollDelta(e)},r.prototype.scrollTo=function(e){var t;null===(t=this.scrollableAxes)||void 0===t||t.scrollTo(e)},r.prototype.shouldScrollTo=function(e){var t;return null===(t=this.scrollableAxes)||void 0===t?void 0:t.shouldScrollTo(e)},r.prototype.scrollBy=function(e){var t;null===(t=this.scrollableAxes)||void 0===t||t.scrollBy(e)},r.prototype.clearRenderingTimeout=function(){var e;null===(e=this.scrollableAxes)||void 0===e||e.clearRenderingTimeout()},r.prototype.bindTouchEvents=function(e,t,a,i){var n=this,s={x:0,y:0};this.settings.eventManager.on(t.node(),"touchstart",function(){if(0===n.options.viewMode&&Qa(e)){var l=d3.event.changedTouches[0];s.x=l.pageX,s.y=l.pageY}}),this.settings.eventManager.on(t.node(),"touchmove",function(){var o,l,u=null===(o=n.settings.hostServices)||void 0===o?void 0:o.tooltips();if(0===n.options.viewMode&&Qa(e)&&!(u&&u.isTouchScreenOptimizedEnabled()&&u.visible())){a&&i?.onVisualScroll(),n.settings.tooltipService.hide();var c=d3.event,h=c.changedTouches[0],A=e.isXScrollBarVisible?s.x-h.pageX:s.y-h.pageY;n.settings.onScroll?n.settings.onScroll(A):null===(l=n.scrollableAxes)||void 0===l||l.scrollDelta(A),s.x=h.pageX,s.y=h.pageY,c.preventDefault()}})},r.prototype.bindScrollWheelEvents=function(e,t,a,i){var n=this;this.settings.eventManager.on(t.node(),"wheel",function(){var s;if(Qa(e)){a&&i?.onVisualScroll(),n.settings.tooltipService.hide();var o=d3.event,l=o.deltaX,u=o.deltaY,c=Math.abs(l)>Math.abs(u)?l:u;if(n.settings.onScroll){if(n.options.isSmallMultiples&&!o.shiftKey)return;n.settings.onScroll(c)}else null===(s=n.scrollableAxes)||void 0===s||s.scrollDelta(c);o.preventDefault()}})},r}(),Ke=x(58698),rt=x(11745),nt=x(63972),gt=x(20624),it=x(5381),fa=function(){function r(e,t,a,i,n,s,o,l,u,c,h){var f;this.cartesianOptions=e,this.visibilityHelper=t,this.chartAreaSvg=a,this.axesRenderer=i,this.element=n,this.hostServices=s,this.behavior=o,this.interactivityService=l,this.clearCatcher=u,this.initialViewportScale=h,this.dataPointNavigationHelper=new ci,null!==(f=this.cartesianOptions)&&void 0!==f&&f.dataPointLassoSelect&&!c&&(this.plotLassoManager=new rt.oW(!1),this.plotLassoManager.init([i.getLayerContainer(),u],a,this.hostServices,this.featureSwitches),this.lassoSelectionBehavior=new rt.lk(this.behavior),this.plotLassoManager.behaviors.push(this.lassoSelectionBehavior),this.plotLassoManager.setUiScale(this.initialViewportScale))}return Object.defineProperty(r.prototype,"featureSwitches",{get:function(){var t;return(null===(t=this.cartesianOptions)||void 0===t?void 0:t.featureSwitches)||{}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"chartType",{get:function(){var t;return null===(t=this.cartesianOptions)||void 0===t?void 0:t.chartType},enumerable:!1,configurable:!0}),r.prototype.attachToElement=function(e,t){this.element=e;var a=this.chartAreaSvg;a.attrs({width:t.width,height:t.height}),a.node().parentElement!==e.get(0)&&e.append(a.node())},r.prototype.render=function(e,t,a,i,n){var s;this.options=i,this.renderedPlotArea=a,this.cartesianData=t,this.layers=e,null===(s=this.plotLassoManager)||void 0===s||s.setUiScale(n),this.cartesianData&&(this.cartesianData.showIcon?this.visibilityHelper.updateVisibility({showIcon:this.cartesianData.showIcon,viewport:this.options.viewport}):(this.visibilityHelper.updateVisibility({showIcon:this.cartesianData.showIcon}),this.renderCartesianChart()))},r.prototype.destroy=function(){this.axesRenderer.destroy(),this.chartAreaSvg.html(null),(0,Dt.q5)(this.element)},r.prototype.renderCartesianChart=function(){var e=this,t=this.options,a=!this.renderedPlotArea||this.renderedPlotArea.height!==t.chartAreaViewport.height||this.renderedPlotArea.width!==t.chartAreaViewport.width;this.renderedPlotArea=t.chartAreaViewport,this.axesRenderer.render(this.cartesianData.axesData,this.options.axisZoom,this.layers,this.cartesianData.referenceLines,this.options.chartAreaViewport,function(s){return e.renderPlotArea((0,d.__assign)((0,d.__assign)({},s),{resizeMode:t.resizeMode}))},(0,d.__assign)((0,d.__assign)({},t),{suppressAnimations:t.suppressAnimations||a}),void 0,this.options.axesLayout),this.dataPointNavigationHelper.updateScrollCallbacks(t.supportsScrolling?t.navigationScrollCallbacks:void 0)},r.prototype.getPlotAreaRect=function(e){return{left:e.margin.left+this.options.chartAreaMargins.left,top:e.margin.top+this.options.chartAreaMargins.top,width:e.plotArea.width,height:e.plotArea.height}},r.prototype.renderPlotArea=function(e){var t=e.axesLayout;(0,Dt.Re)(this.options.background,this.element,this.getPlotAreaRect(t)),(0,Pt.xw)({graphicContext:this.axesRenderer.getLayerContainer(),axes:t.axes,viewport:t.plotArea,referenceLines:this.cartesianData.referenceLines}),this.renderLayers(e),(0,ft.Zb)(this.cartesianData.trendLines,this.axesRenderer.getLayerContainer(),t.axes,t.plotArea,this.featureSwitches.onObject)},r.prototype.getReferenceLineLabels=function(e,t){return(0,Pt.TY)({axes:e,viewport:t,referenceLines:this.cartesianData.referenceLines,hostServices:this.hostServices,style:this.options.layerStyle})},r.prototype.getDataLabelLayoutOptions=function(e){var t=(0,it.n8)(this.chartType);return t.allowLeaderLines=t.allowLeaderLines||e.some(function(a){return a.enableLeaderLines}),t.shrinkLeaderLinesForBestFit=11!==this.chartType,t.drawLeaderLinesIgnoreOffset=11!==this.chartType,t},r.prototype.renderDataLabels=function(e){var t=this.behavior?this.renderLabelsWithInteractiveBehavior(e):this.renderLabelsWithoutInteractiveBehavior(e);return!_.isEmpty(t)||_.every(e.labelDataPointGroups,function(a){return _.isEmpty(a.labelDataPoints)})},r.prototype.renderLabelsWithoutInteractiveBehavior=function(e){var t,s=new nt.nu({maximumOffset:O.wh,startingOffset:O.ki,attemptToMoveLabelsIntoViewport:!0}).layout(e.labelDataPointGroups,e.plotArea);return null!==(t=this.featureSwitches)&&void 0!==t&&t.labelEnhancementsM0?this.renderEnhancedLabels(s,e):this.drawLegacyLabelsAndBackgrounds(s,e),s},r.prototype.drawLegacyLabelsAndBackgrounds=function(e,t){var a=this.axesRenderer.getDataLabelContainers();return(0,it.gm)({labelContext:a.foreground,dataLabels:e,numeric:t.labelsAreNumeric,backgroundContext:a.background,formatMode:this.options.formatMode,onObject:this.featureSwitches.onObject})},r.prototype.drawLabelContainer=function(e,t){var a=t.labelsAreNumeric,i=this.axesRenderer.getLabelContainerRegion().foreground;return(0,it.AE)({labelGroupContext:i,labelContainers:e,numeric:a,formatMode:this.options.formatMode,onObject:this.featureSwitches.onObject})},r.prototype.renderEnhancedLabels=function(e,t){var o,a=this.labelInstanceTypeSplitter(e),i=a.labels,n=a.containers,s=this.axesRenderer.getLabelContainerRegion().foreground;return _.isEmpty(n)||(o=this.drawLabelContainer(n,t)),o=this.drawLegacyLabelsAndBackgrounds(i,t),_.isEmpty(n)&&((0,it.in)(s),(0,it.$J)(s)),o},r.prototype.renderLabelsWithInteractiveBehavior=function(e){var t,L,a=e.labelDataPointGroups,i=e.plotArea,n=e.suppressAnimations,s=e.animateLabels,o=e.labelsAreNumeric,l=this.options,u=l.formatMode,c=l.labelAnimationOptions,h=this.getDataLabelLayoutOptions(a),g=new nt.nu(h).layout(a,i),A=this.axesRenderer.getDataLabelContainers(),S=A.foreground,C=A.background,P=(0,Rt.ML)(g);if(this.renderLeaderLines(h,g),L=!P&&null!==(t=this.cartesianOptions)&&void 0!==t&&t.animator&&!n&&s?(0,it.Bf)({labelContext:S,dataLabels:g,duration:c.duration,numeric:o,easeType:c.ease,backgroundContext:C,formatMode:u,onObject:this.featureSwitches.onObject}):this.featureSwitches.labelEnhancementsM0?this.renderEnhancedLabels(g,e):this.drawLegacyLabelsAndBackgrounds(g,e),this.interactivityService&&(this.cartesianOptions.isLabelInteractivityEnabled||u)){var V={labelItems:L};this.interactivityService.bind(g,new Ke.c,V,{isLabels:!0,pointSourceKey:"data-labels",formatMode:u})}return g},r.prototype.labelInstanceTypeSplitter=function(e){for(var t=[],a=[],i=0,n=e;i<n.length;i++){var s=n[i];(0,Rt.CC)(s)?a.push(s):t.push(s)}return{labels:t,containers:a}},r.prototype.renderLeaderLines=function(e,t){var a=this.axesRenderer.getDataLabelContainers().foreground,i=e.allowLeaderLines?t.filter(function(n){return!_.isEmpty(n.leaderLinePoints)&&null!=n.identity}):[];(0,it.z8)(a,i,function(n){return n.identity.getKey()})},r.prototype.renderSeriesLabels=function(e,t,a,i,n){var s=this.axesRenderer.getSeriesLabelContainers(),o=s.seriesForeground,l=s.seriesBackground,u=new nt.nu({maximumOffset:O.wh,startingOffset:O.ki,attemptToMoveLabelsIntoViewport:!0});(0,it.Sw)({labelContext:o,dataLabels:u.layout(e,t),backgroundContext:l,availableChartWidth:i,seriesLabelsSettings:a,plotArea:t,formatMode:n,onObject:this.featureSwitches.onObject})},r.prototype.renderLayers=function(e){var t=e.layers,a=e.axesLayout,i=e.suppressAnimations,n=e.resizeMode;w.fF.assertValue(t,"layers");var c,A,S,s=[],o=[],l=[],u=[],h=!0,f=a.axes,g=a.plotArea;i=i||_.some(t,function(G){return G.shouldSuppressAnimation&&G.shouldSuppressAnimation()});for(var C=!0,L=function(K){var ie=K.render(i,n,P.options.formatMode);if(ie){if(ie.animateLabels||(C=!1),P.behavior&&(l=l.concat(ie.dataPoints),u.push(ie.behaviorOptions),ie.navigationOptions&&(c?c.navigationOptions.navigationStrategy=U.jN.CategoryFirst:(c={pointSourceKey:"cartesian-layer ".concat(P.options.multipleId||""),navigationOptions:{navigationStrategy:ie.navigationOptions.navigationStrategy,helper:P.dataPointNavigationHelper}},P.dataPointNavigationHelper.clearNavigationLayers()),c.isHierarchicalAxis=P.options.isHierarchicalAxis,P.dataPointNavigationHelper.addNavigationLayer(ie.navigationOptions.helper))),ie.labelDataPointGroups)for(var je=0,ke=ie.labelDataPointGroups;je<ke.length;je++)(Je=ke[je])&&s.push((0,d.__assign)((0,d.__assign)({},Je),{labelDataPoints:(0,it.R1)(Je.labelDataPoints||[]),labelOrientation:Je.isTotal?gt.B.Horizontal:ie.labelOrientation}));else{var Xe=ie.labelDataPoints||[];s.push((0,d.__assign)((0,d.__assign)({},Xe),{labelDataPoints:(0,it.R1)(Xe),maxNumberOfLabels:Xe.length,labelOrientation:ie.labelOrientation}))}if(ie.labelDataPointSeriesGroups)for(var wt=0,Yt=ie.labelDataPointSeriesGroups;wt<Yt.length;wt++){var Je;(Je=Yt[wt])&&o.push((0,d.__assign)((0,d.__assign)({},Je),{labelDataPoints:(0,it.R1)(Je.labelDataPoints||[]),labelOrientation:Je.isTotal?gt.B.Horizontal:ie.labelOrientation}))}h=h&&ie.labelsAreNumeric,P.lassoSelectionBehavior&&(void 0!==ie.categorySubRangeCount&&(void 0===A?A=ie.categorySubRangeCount:w.fF.assert(function(){return ie.categorySubRangeCount===A},"categorySubRangeCount should match between layers")),void 0!==ie.verticalCategoryAxis&&(void 0===S?S=ie.verticalCategoryAxis:w.fF.assert(function(){return ie.verticalCategoryAxis===S},"verticalCategoryAxis should match between layers")))}},P=this,V=0,k=t;V<k.length;V++)L(k[V]);var J=this.getReferenceLineLabels(f,g);_.isEmpty(J)||s.unshift({labelDataPoints:J,maxNumberOfLabels:J.length});var fe={labelDataPointGroups:s,labelsAreNumeric:h,plotArea:g,suppressAnimations:i,isCombo:(0,p.LQ)(this.chartType),animateLabels:C};this.noLabelsCanBeRendered=!this.renderDataLabels(fe),this.renderSeriesLabels(o,g,Ot(t,this.chartType),Di(a).width,this.options.formatMode),this.dataPointNavigationHelper.getPendingFocusElement&&c&&(c.navigationOptions.focusElement=this.dataPointNavigationHelper.getPendingFocusElement()),this.interactivityService&&this.interactivityService.bind(l,this.behavior,{layerOptions:u,clearCatcher:this.clearCatcher,root:this.chartAreaSvg,axesLayout:a,categorySubRangeCount:A,verticalCategoryAxis:S},c)},r}(),la=x(14599),wa=x(61297),Ja=x(32476),_a=x(66001),Va=function(){function r(){var e;this.unSyncedLayout=[],this.maxMargin={top:0,bottom:0,left:0,right:0},this.axesRenderersByPosition=((e={})[2]=[],e[0]=[],e[1]=[],e)}return r.prototype.update=function(e,t,a,i,n,s,o){this.settings=e,this.coreMultiple=o,this.renderOptions=a,this.maxMargin={bottom:0,left:0,right:0,top:0},this.unSyncedLayout=[];var l=_.clone(this.getCoreMultipleData()),u=this.coreMultiple.layers;if(!this.shouldShareAxis()){for(var c=0,h=t;c<h.length;c++){var f=h[c],g=f.getData(),A=f.layers;g.axesData.x.showAxisTitle=!1,g.axesData.y.showAxisTitle=!1,g.axesData.y2.showAxisTitle=!1,l.axesData.y.sharedAxis||(g.axesData.x.show=!1),l.axesData.x.sharedAxis||(g.axesData.y.show=!1);var S=$i({axesData:g.axesData,rendererSettings:this.settings,referenceLines:g.referenceLines,layers:A,viewport:i,playAxesRect:this.renderOptions.playAxesRect,trimOrdinalDataOnOverflow:this.renderOptions.trimOrdinalDataOnOverflow,axisZoom:void 0,rotateXTickLabels90:!0});this.unSyncedLayout.push(S),S.margin.left>=this.maxMargin.left&&(this.maxMargin.left=S.margin.left),S.margin.right>=this.maxMargin.right&&(this.maxMargin.right=S.margin.right),S.margin.top>=this.maxMargin.top&&(this.maxMargin.top=S.margin.top),S.margin.bottom>=this.maxMargin.bottom&&(this.maxMargin.bottom=S.margin.bottom)}(l=_.clone(t[0].getData())).axesData.x.showAxisTitle=this.getCoreMultipleData().axesData.x.showAxisTitle,l.axesData.y.showAxisTitle=this.getCoreMultipleData().axesData.y.showAxisTitle,l.axesData.y.sharedAxis||(l.axesData.x.show=this.getCoreMultipleData().axesData.x.show,l.axesData.y.show=!1,l.axesData.y2&&(l.axesData.y2.show=!1,l.axesData.y2.showAxisTitle=this.getCoreMultipleData().axesData.y.showAxisTitle)),l.axesData.x.sharedAxis||(l.axesData.x.show=!1,l.axesData.y.show=this.getCoreMultipleData().axesData.y.show)}return this.generateSharedAxisLayout(l,u,i,n,s),this.unSyncedLayout},r.prototype.generateSharedAxisLayout=function(e,t,a,i,n){this.layout=$i({axesData:e.axesData,rendererSettings:this.settings,referenceLines:e.referenceLines,layers:t,viewport:a,playAxesRect:this.renderOptions.playAxesRect,trimOrdinalDataOnOverflow:this.renderOptions.trimOrdinalDataOnOverflow,axisZoom:void 0,rotateXTickLabels90:!0,forceMarginMin:this.shouldShareAxis()?void 0:(0,d.__assign)({},this.maxMargin)}),this.clearUnusedRenderers(i,n,this.layout.shouldRenderAxis,this.layout)},r.prototype.getCoreMultipleData=function(){return this.coreMultiple.getData()},r.prototype.shouldShareAxis=function(){return this.getCoreMultipleData().axesData.x.sharedAxis&&this.getCoreMultipleData().axesData.y.sharedAxis},r.prototype.clearUnusedRenderers=function(e,t,a,i){this.destroyUnusedRenderers(e=a.x||i.isXScrollBarVisible?e:0,2);var n=a.y||i.isYScrollBarVisible?t:0,s=this.shouldRenderYAxis(0,this.settings.data.y.switchAxisPosition)?0:1;this.destroyUnusedRenderers(n,s),this.destroyUnusedRenderers(a.y2||i.isYScrollBarVisible?t:0,0===s?1:0)},r.prototype.destroyUnusedRenderers=function(e,t){var a=this.axesRenderersByPosition[t];_.isEmpty(a)||a.length<=e||(a.slice(e,a.length).forEach(function(i){return i.destroy()}),this.axesRenderersByPosition[t]=a.slice(0,e))},r.prototype.calculateAxesLayout=function(e){return this.shouldShareAxis()||void 0===e?this.calculateSynchronizedAxesLayout():void 0!==e?this.calculateUnSynchronizedAxesLayout(e):this.layout},r.prototype.calculateSynchronizedAxesLayout=function(){var e=_.cloneDeep(this.layout);return(0,me.Zx)(this.layout,e),e.axes.x.scale=this.layout.axes.x.scale.copy(),e.axes.y1.scale=this.layout.axes.y1.scale.copy(),e.axes.y2&&(e.axes.y2.scale=this.layout.axes.y2.scale.copy()),e},r.prototype.calculateUnSynchronizedAxesLayout=function(e){var t,a=_.cloneDeep(this.unSyncedLayout[e]);(0,me.Zx)(this.unSyncedLayout[e],a);var i=a.axes.x,n=a.axes.y1,s=a.plotArea=this.layout.plotArea,o=this.getCoreMultipleData().axesData,l=this.layout.tickLabelMargins.axesOverflow,u=a.tickLabelMargins.axesOverflow;if(!o.y.sharedAxis){i.outerPadding=this.layout.axes.x.outerPadding,i.outerPaddingRatio=this.layout.axes.x.outerPaddingRatio,i.xLabelMaxWidth=this.layout.axes.x.xLabelMaxWidth,i.categoryThickness=this.layout.axes.x.categoryThickness,a.isXScrollBarVisible=this.layout.isXScrollBarVisible;var c=l.bottom+l.top-(u.bottom+u.top);if((h=n.scale).range(n.invertAxis?[1,s.height+c-1]:[s.height+c-1,1]),i.scale=this.layout.axes.x.scale.copy(),a.axes.y2)a.axes.y2.scale.range(n.invertAxis?[1,s.height+c-1]:[s.height+c-1,1]);a.margin.left=Math.max(this.maxMargin.left,a.margin.left),a.margin.right=Math.max(this.maxMargin.right,a.margin.right)}if(!o.x.sharedAxis){n.outerPadding=this.layout.axes.y1.outerPadding,n.outerPaddingRatio=this.layout.axes.y1.outerPaddingRatio,n.xLabelMaxWidth=this.layout.axes.y1.xLabelMaxWidth,n.categoryThickness=this.layout.axes.y1.categoryThickness,a.isYScrollBarVisible=this.layout.isYScrollBarVisible;var h,g=l.left+l.right-(u.left+u.right);if(i.scale.range(i.invertAxis?[s.width+g-1,1]:[1,s.width+g-1]),!o.x.show)if((0,I._9)(h=n.scale))h.range([0,a.plotArea.height]),h.paddingOuter(n.outerPaddingRatio);else{var S=null!==(t=n.outerPadding)&&void 0!==t?t:0;h.range([a.plotArea.height-S,S])}a.margin.bottom=Math.max(this.maxMargin.bottom,a.margin.bottom),a.margin.top=Math.max(this.maxMargin.top,a.margin.top)}return a},r.prototype.renderAxes=function(e){if(!(e.viewport.height<1||e.viewport.width<1)){var t=(0,p.MI)(e.element,e.viewport),a=this.getCoreMultipleData();this.getAxesRenderer(t.element,e.position,e.index,a).render(a.axesData,void 0,this.coreMultiple.layers,a.referenceLines,e.viewport,function(){},(0,d.__assign)((0,d.__assign)({},this.renderOptions),{supportsScrolling:this.shouldSupportScrolling(a,e.position),formatMode:this.settings.formatMode,isSelected:this.settings.isSelected,subSelectionHelper:void 0,multipleId:void 0,playAxesRect:void 0}),this.renderOptions.isSmallMultiples,this.updateAxesLayoutByPosition(e))}},r.prototype.scrollDelta=function(e,t){this.updateScrollState(function(a){return a.scrollDelta(e)},t)},r.prototype.scrollTo=function(e,t){this.updateScrollState(function(a){return a.scrollTo(e)},t)},r.prototype.scrollBy=function(e,t){this.updateScrollState(function(a){return a.scrollBy(e)},t)},r.prototype.updateScrollbarExtent=function(e,t){this.updateScrollState(function(a){return a.setExtent(e)},t)},r.prototype.updateScrollState=function(e,t){var a=this.getCoreMultipleData(),i=this.getScrollablePosition(a);w.fF.assertValue(i,"scrollablePosition");var n=this.axesRenderersByPosition[i];2!==i&&_.isEmpty(t)||_.isEmpty(n)||n.forEach(function(s,o){2!==i&&(o<t.startIndex||o>t.endIndex)||e(s)})},r.prototype.updateAxesLayoutByPosition=function(e){var t=e.position,a=e.viewport,i=this.calculateAxesLayout(),n=i.scrollHandleMargins;i.viewport=n?{width:a.width-(n.left+n.right),height:a.height-(n.top+n.bottom),scale:a.scale}:a,i.preferredPlotArea={width:0,height:0};var s=this.getCoreMultipleData();return 2===t?(i.margin=this.getMarginByPosition(i.margin,t,i.tickLabelMargins.axesOverflow),!s.axesData.y.sharedAxis&&s.axesData.y.show&&(i.margin.left=this.layout.margin.left,i.shouldRenderAxis.y=!1),s.axesData.x.sharedAxis||(i.margin.bottom=this.layout.margin.bottom),this.shouldShareAxis()&&(i.shouldRenderAxis.y=!1),i.shouldRenderAxis.y2=!1,i.shouldRenderAxis.y=!1,i.axisLabels.y=null,i.axisLabels.y2=null,i.plotArea.height=0,i):(i.plotArea.width=0,i.margin=this.getMarginByPosition(i.margin,t,i.tickLabelMargins.axesOverflow),i.shouldRenderAxis.x=!1,i.axisLabels.x=null,this.shouldRenderYAxis(t,this.settings.data.y.switchAxisPosition)?(i.axisLabels.y2=null,i.shouldRenderAxis.y2=!1):(i.shouldRenderAxis.y=!1,i.axisLabels.y=null),i)},r.prototype.destroy=function(){var e=this;this.executeActionByPosition(this.axesRenderersByPosition,function(t,a){_.isEmpty(t)||(t.forEach(function(i){return i.destroy()}),e.axesRenderersByPosition[a]=[])})},r.prototype.executeActionByPosition=function(e,t){for(var a in this.axesRenderersByPosition)t(e[a],a)},r.prototype.clearRenderingTimeout=function(){this.executeActionByPosition(this.axesRenderersByPosition,function(e){_.isEmpty(e)||e.forEach(function(t){return t.clearRenderingTimeout()})})},r.prototype.shouldRenderYAxis=function(e,t){return 0===e&&!t||1===e&&t},r.prototype.getMarginByPosition=function(e,t,a){var i=(0,me.ED)(a);return 2===t?(i.bottom=e.bottom,i.top=0,i):(i.left=0,i.right=0,0===t?i.left=e.left:1===t&&(i.right=e.right),i)},r.prototype.getScrollablePosition=function(e){var t;return this.layout.isYScrollBarVisible?null!==(t=e.axesData.y)&&void 0!==t&&t.switchAxisPosition?1:0:this.layout.isXScrollBarVisible?2:void 0},r.prototype.shouldSupportScrolling=function(e,t){return this.getScrollablePosition(e)===t},r.prototype.getAxesRenderer=function(e,t,a,i){var n=$(e.node()),s=n.data("CartesianAxesRenderer");if(s)s.update(i.axesData,i.scrollbarOptions);else{var o=(0,d.__assign)((0,d.__assign)({},this.settings),{container:e,multipleId:"".concat(a),behavior:new Aa});o.data.useManagedTabIndex=!0,this.axesRenderersByPosition[t][a]=s=new Ae(o),n.data("CartesianAxesRenderer",s)}return s},r}(),ji=x(39071),qi="multiple",yi=function(){function r(e,t,a,i,n,s,o,l,u,c,h,f){var g,A;this.interactivityService=t,this.getLocalizedString=a,this.cartesianOptions=n,this.layerStyle=s,this.viewMode=o,this.buildPlotAreaLayout=l,this.renderMultiple=u,this.adapterFactory=c,this.visualInstanceId=h,this.sharedAxisLayout=new Va,this.gridLayout=new Ja.Me(e,function(){return i.loadMoreData()},null===(g=this.cartesianOptions)||void 0===g?void 0:g.isScrollable,t,f,qi,null===(A=this.cartesianOptions)||void 0===A?void 0:A.featureSwitches),this.visibilityHelper=(0,va.q)().visibilityHelper(e,r.IconClassName)}return r.prototype.render=function(e){var t=this;this.clearRenderingTimeout();var a=e.cartesianSmallMultipleFactory;this.options=e;var i=e.cartesianSmallMultipleFactory,n=this.adapterFactory(),s=n.getMultiplesSubheader(e.warnings);w.fF.assertValue(n,"smallMultipleAdapter");var l=this.multiplesLayout=n.getMultiplesLayout(e.warnings),u=l.showIcon;if(this.visibilityHelper.updateVisibility({showIcon:u,viewport:e.viewport}),!u){var h={categoryLoadMoreDataHandler:e.categoryLoadMoreDataHandler,playAxesRect:e.playAxesRect,trimOrdinalDataOnOverflow:e.trimOrdinalDataOnOverflow,suppressAnimations:e.suppressAnimations,resizeMode:e.resizeMode,rowCount:l.rowCount,columnCount:l.columnCount,getCellBackgroundColor:function(g){return t.getColorFromMultipleObjects(g,la.e0.smallMultiplesBackgroundColor,t.multiplesLayout.backgroundColor)},backgroundTransparency:l.backgroundTransparency,isHierarchicalAxis:e.isHierarchicalAxis,gridline:l.gridline,cellPadding:{top:l.rowPaddingInner,bottom:0,left:l.columnPaddingInner,right:0},outerPadding:{top:l.rowPaddingOuter,bottom:l.rowPaddingOuter,left:l.columnPaddingOuter,right:l.columnPaddingOuter}};return this.cellDimensions&&(this.cellDimensions.maxSubheaderHeight=void 0),this.renderGridLayout(a,e.viewport,function(g){return t.renderGridCell(i,g,e.background,e.playAxesRect,e.suppressAnimations,e.resizeMode,e.trimOrdinalDataOnOverflow,e.categoryLoadMoreDataHandler,e.isHierarchicalAxis,!0,e.formatMode)},function(g){return t.renderGridCellSubheader(g,i,s)},s,h,e.axisRendererSettings.axes.isYAxisCategorical)}},r.prototype.clearRenderingTimeout=function(){this.sharedAxisLayout.clearRenderingTimeout(),this.gridLayout.clearRenderingTimeout()},r.prototype.destroy=function(){this.gridLayout.destroy(),this.sharedAxisLayout.destroy()},r.prototype.onScroll=function(e){this.sharedAxisLayout.scrollDelta(e,this.gridLayout.getScrollPosition()),this.options.cartesianSmallMultipleFactory.scrollDelta(e,this.getVisibleMultiples())},r.prototype.onExtentUpdate=function(e){this.sharedAxisLayout.updateScrollbarExtent(e,this.gridLayout.getScrollPosition()),this.options.cartesianSmallMultipleFactory.updateScrollbarExtent(e,this.getVisibleMultiples())},r.prototype.scrollTo=function(e){this.sharedAxisLayout.scrollTo(e,this.gridLayout.getScrollPosition()),this.options.cartesianSmallMultipleFactory.scrollTo(e,this.getVisibleMultiples())},r.prototype.shouldScrollTo=function(e){return this.options.cartesianSmallMultipleFactory.shouldScrollTo(e,this.getVisibleMultiples())},r.prototype.scrollBy=function(e){this.sharedAxisLayout.scrollBy(e,this.gridLayout.getScrollPosition()),this.options.cartesianSmallMultipleFactory.scrollBy(e,this.getVisibleMultiples())},r.adjustAxesMarginsForShared=function(e,t,a){var i,n,s,o=e.axesMargins,l=e.titleMargins,u=e.scrollHandleMargins,c=e.shouldRenderAxis,h=e.axes;function f(L,P,V){return P||L&&null!=L.axisLabel&&V}var g=f(h?.y1,c.y,a.y),A=f(h?.y2,c.y2,a.y2),C={bottom:f(h?.x,c.x,a.x)?o.bottom:0,top:0,left:0,right:0};return t?(g&&(C.right=c.y?o.right:l.right),A&&(C.left=c.y2?o.left:l.left)):(g&&(C.left=c.y?o.left:l.left),A&&(C.right=c.y2?o.right:l.right)),{left:C.left+(null!==(i=u?.left)&&void 0!==i?i:0),right:C.right+(null!==(n=u?.right)&&void 0!==n?n:0),bottom:C.bottom+(null!==(s=u?.bottom)&&void 0!==s?s:0),top:0}},r.prototype.getVisibleMultiples=function(){var e=this.options.cartesianSmallMultipleFactory.getFrameCount(),t=this.gridLayout.getScrollPosition();return t?{startIndex:t.startIndex*this.multiplesLayout.columnCount,endIndex:Math.min(t.endIndex*this.multiplesLayout.columnCount,e)}:{startIndex:0,endIndex:0}},r.prototype.calculatePlotArea=function(e){var t,a,i=r.adjustAxesMarginsForShared(e,this.options.axesData.y.switchAxisPosition,ki(this.options.axesData,void 0));this.gridLayout.updateHeaderMargins(i);var n=null!==(a=null===(t=this.adapterFactory())||void 0===t?void 0:t.getMultiplesSubheader(this.options.warnings))&&void 0!==a?a:(0,p.yA)(this.options.cartesianSmallMultipleFactory.getObjects(),this.layerStyle),s=(0,d.__assign)({},e.axesOverflow);if((!this.options.axesData.y.sharedAxis||!this.options.axesData.x.sharedAxis)&&this.sharedAxisLayout.getCoreMultipleData().axesData.valueAxis.show){var o=e.axesMargins;this.options.axesData.y.sharedAxis||(s.left=Math.max(o.left,s.left),s.right=Math.max(o.right,s.right)),this.options.axesData.x.sharedAxis||(s.bottom=Math.max(o.bottom,s.bottom),s.top=Math.max(o.top,s.top))}return this.cellDimensions=this.gridLayout.calculateCellDimensions(s,{titleWrap:n.titleWrap,subheaders:n.titleWrap?this.getFrameDisplayNames():void 0,subheaderFontProperties:n.fontProperties,subheaderLineHeight:n.height,subheaderMargin:n.margins},e),this.cellDimensions.plotAreaViewport},r.prototype.scrollRowsTo=function(e){w.fF.assertValue(this.gridLayout,"grid layout"),this.gridLayout.scrollTo(e)},r.prototype.getFrameDisplayNames=function(){var e=this.getLocalizedString("ListJoin_Separator"),t=this.options.cartesianSmallMultipleFactory.reader.getFrameDisplayNames();return t&&t.map(function(a){return a.join(e)})},r.prototype.renderGridLayout=function(e,t,a,i,n,s,o){var l,u;return(0,d.__awaiter)(this,void 0,void 0,function(){var c,h,f,g,A,S,C,L,P,V,z,J,fe,G,K,ie,Oe=this;return(0,d.__generator)(this,function(je){return c=this.getAxesRenderOptions(s),h=e.getFrameCount(),f=e.getCoreMultiple(),g=e.getShouldResetRowMultipleScrollPosition(),C=s.getCellBackgroundColor,L=s.backgroundTransparency,P=s.cellPadding,V=s.outerPadding,J=n.show,fe=n.height+(z=n.margins).top+z.bottom,G={rowCount:A=s.rowCount,columnCount:S=s.columnCount,viewport:t,renderCell:function(Je){return(0,d.__awaiter)(Oe,void 0,void 0,function(){return(0,d.__generator)(this,function(Xe){return a(Je),[2,new Promise(function(wt){return wt()})]})})},renderCellSubheader:function(Je){return(0,d.__awaiter)(Oe,void 0,void 0,function(){return(0,d.__generator)(this,function(Xe){return i(Je),[2,new Promise(function(wt){return wt()})]})})},cellCount:h,headerMargins:(0,p.rX)(),renderHeader:function(){},subheaderShow:J,subheaderHeight:(null===(l=this.cellDimensions)||void 0===l?void 0:l.maxSubheaderHeight)||fe,subheaderLineHeight:n.height,subheaderPosition:1!==n.vertical?0:1,shouldResetScrollPosition:g,cellPadding:P,outerPadding:V,scrollPadding:5,getCellBackgroundColor:C,backgroundTransparency:L,gridLineSettings:s.gridline,getAllCells:function(){return e.multiples},manageTabIndexOnRowHeaderFooter:o,boldedSubheaders:n.labelBold},this.gridLayout.update(G),K=Math.ceil(h/S),this.sharedAxisLayout.update(this.options.axisRendererSettings,e.multiples,c,t,S,Math.max(K,A),f),G.renderHeader=function(ke){return Oe.sharedAxisLayout.renderAxes(ke)},G.headerMargins=this.cellDimensions.headerMargins,G.subheaderHeight=(null===(u=this.cellDimensions)||void 0===u?void 0:u.maxSubheaderHeight)||fe,this.gridLayout.update(G),ie=_.map(e.multiples,function(ke){return ke.getDataPoint()}),[2,this.gridLayout.render({calculatedCellDimensions:this.cellDimensions,dataToBind:ie,pointSourceKey:"multiples",visualInstanceId:this.visualInstanceId,formatMode:this.options.formatMode,subSelectionHelper:this.options.subSelectionHelper})]})})},r.prototype.renderGridCellSubheader=function(e,t,a){var i,n=e.element,s=e.index,o=e.viewport;if(!_.isUndefined(s)){var l=1===a.horizontal?"center":2===a.horizontal?"right":"left",u=this.getSubheaderFontProperties(s,a.fontProperties);n.css((0,j.wB)(u)),n.css({padding:"".concat(a.margins.top,"px ").concat(a.margins.right,"px ").concat(a.margins.bottom,"px ").concat(a.margins.left,"px "),"text-align":l});var c=this.getLocalizedString("ListJoin_Separator"),h=this.options.cartesianSmallMultipleFactory.reader.getDisplayNameForFrame(s),f=h&&h.join("".concat(c));if(n.attr("title",f),n.attr("id","".concat(this.visualInstanceId,"-").concat(s)),n.empty(),a.titleWrap&&(null===(i=this.cellDimensions)||void 0===i?void 0:i.maxSubheaderHeight)>a.height+a.margins.top+a.margins.bottom)for(var g=(0,j.qk)(u),S=(0,_a.ql)(f,g,Z.b.measureSvgTextWidth,o.width,Ja.ji,null,!0),C=0;C<S.length;C++){var L=S[C],P=$("<div/>").text(L);C===S.length-1&&P.addClass("truncate"),n.append(P)}else n.text(f);if(this.interactivityService){var V=t.get(s),k=n.closest(ji.bL.selector);e.styleSubheader(k,V,a.labelBold)}}},r.prototype.getSubheaderFontProperties=function(e,t){var a=this.getColorFromMultipleObjects(e,{objectName:wa.XG,propertyName:"fontColor"});return null==a?t:(0,j.ED)(t,{color:a})},r.prototype.getColorFromMultipleObjects=function(e,t,a){var i;if(null!=e){var n=null===(i=this.options.cartesianSmallMultipleFactory.reader.getFrameNode(e))||void 0===i?void 0:i.objects;if(n){var s=(0,b.W7)(n,t);if(s)return s}}return a},r.prototype.getAxesRenderOptions=function(e){var t=this;return(0,d.__assign)((0,d.__assign)({},e),{axesAnimationOptions:this.options.animationSettings,viewMode:this.viewMode,isSmallMultiples:!0,preserveScrollPosition:!0,navigationScrollCallbacks:{scrollTo:function(i){return t.scrollTo(i)},shouldScrollTo:function(i){return t.shouldScrollTo(i)},scrollBy:function(i){return t.scrollBy(i)}}})},r.prototype.renderGridCell=function(e,t,a,i,n,s,o,l,u,c,h){var f,g=t.viewport,A=e.get(t.index);if(2&A.getState())A.getRenderer().attachToElement(t.element,t.viewport);else{var S=(0,p.MI)(t.element,g),C=S.element,L=null===(f=this.cartesianOptions.behaviorFactory)||void 0===f?void 0:f.create();A.initRenderer(this.buildPlotAreaLayout(!0,C,S.clearCatcher,t.element,L))}if(this.interactivityService){var P=t.element.closest(ji.bL.selector);t.bindDataToGridCell(P,A,qi)}this.renderMultiple({multiple:A,viewport:g,background:a,axisZoom:void 0,chartAreaViewport:g,chartAreaMargins:(0,p.rX)(),renderedViewport:g,playAxesRect:i,suppressAnimations:n,resizeMode:s,trimOrdinalDataOnOverflow:o,categoryLoadMoreDataHandler:l,isSharedAxis:!0,isHierarchicalAxis:u,preserveScrollPosition:c,supportsScrolling:!0,axesLayout:this.sharedAxisLayout.calculateAxesLayout(A.index),formatMode:h})},r.IconClassName="cartesianChartResponsiveIcon",r}(),cr=x(67174),hn=function(){function r(e,t,a,i){this.options=e,this.axes=t,this.isPlayAxis=a,this.adapterFactory=i}return r.prototype.init=function(e,t,a,i,n,s,o,l){this.initOptions=e,this.tooltipService=t,this.legend=a,this.axesData=i,this.interactivityService=n,this.layerStyle=s,this.rowLoadMoreDataHandler=o,this.eventManager=l},r.prototype.create=function(e){var t=new Tn(this.options,this.axes,this.isPlayAxis,this.axesData,this.adapterFactory);return t.init(e,this.initOptions,this.tooltipService,this.legend,this.interactivityService,this.layerStyle,this.rowLoadMoreDataHandler,this.eventManager),t},r}(),vn=function(){function r(e,t,a,i,n){this.legend=e,this.data=t,this.viewport=a,this.interactivity=i,this.showTitlePlaceholder=n}return r.prototype.render=function(e,t,a){if(this.shouldRender()){var i=this.data;this.legend.setPosition(i.position),1===i.dataPoints.length&&!i.grouped&&((i=(0,me.ED)(i)).dataPoints=[]),this.legend.drawLegend({data:i,parentViewport:this.viewport,isHierarchicalAxis:e,formatMode:t,onObject:a,titleSliceUid:"".concat("legend","-").concat("title","-titleText"),showTitlePlaceholder:this.showTitlePlaceholder})}},r.prototype.shouldRender=function(){var e;return!(null!==(e=this.interactivity)&&void 0!==e&&e.mobileTileInteractive)},r.prototype.getMargin=function(){return this.legend.getMargins()},r.prototype.getPosition=function(){return this.legend.getPosition()},r.prototype.adjustChartArea=function(e){(0,ta.xz)(e,this.legend)},r.prototype.isRenderedLeftOrRight=function(){return this.legend.isVisible()&&(0,ta.cB)(this.legend.getPosition())},r}(),Tn=function(){function r(e,t,a,i,n){this.cartesianOptions=e,this.axes=t,this.isPlayAxis=a,this.axesData=i,this.adapterFactory=n,this.viewMode=0,w.fF.assertValue(e,"CartesianChartLayout.cartesianOptions")}return Object.defineProperty(r.prototype,"featureSwitches",{get:function(){return this.cartesianOptions.featureSwitches||{}},enumerable:!1,configurable:!0}),r.prototype.init=function(e,t,a,i,n,s,o,l){var u,c;this.options=t,this.tooltipService=a,this.legend=i,this.interactivityService=n,this.layerStyle=s,this.element=e,this.rowLoadMoreDataHandler=o,this.eventManager=l,this.hostServices=t.host,this.gridContainer=$(document.createElement("div")).appendTo(this.element),this.gridContainer.addClass(r.GridContainerClassName),this.behavior=null===(u=this.cartesianOptions.behaviorFactory)||void 0===u?void 0:u.create(),this.visibilityHelper=(0,va.q)().visibilityHelper(this.element,r.IconClassName);var h=d3.select(this.element.get(0)),f=this.chartAreaSvg=h.append("svg");f.classed(p.Sq,!0),f.attr("name",this.getCartesianChartName()),f.style("position","absolute"),!(null===(c=t.featureSwitches)||void 0===c)&&c.onObject&&f.attr(Be.oy,0),this.behavior&&(this.clearCatcher=(0,U.EX)(f),this.categoricalAxisBehavior=new Aa),this.viewMode=this.hostServices.getViewMode()},r.prototype.getCartesianChartName=function(){var e;switch(this.cartesianOptions.chartType){case 0:case 15:e="LineChart_ToolTip";break;case 1:e="AreaChart_ToolTip";break;case 2:e="StackedAreaChart_ToolTip";break;case 3:e="HundredPercentStackedAreaChart_ToolTip";break;case 4:e="ClusteredColumnChart_ToolTip";break;case 5:e="ColumnChart_ToolTip";break;case 6:e="ClusteredBarChart_ToolTip";break;case 7:e="BarChart_ToolTip";break;case 8:e="HundredPercentStackedBarChart_ToolTip";break;case 9:e="HundredPercentStackedColumnChart_ToolTip";break;case 10:e="RibbonChart_ToolTip";break;case 11:e="ScatterChart_ToolTip";break;case 12:e="WaterfallChart_ToolTip";break;case 13:e="LineClusteredColumnComboChart_ToolTip";break;case 14:e="LineStackedColumnComboChart_ToolTip";break;default:e="Chart"}return this.hostServices.getLocalizedString(e)},r.prototype.render=function(e,t,a,i,n,s,o,l,u,c,h,f,g){return(0,d.__awaiter)(this,void 0,void 0,function(){var A,S,L,P,V,k,z;return(0,d.__generator)(this,function(J){switch(J.label){case 0:return this.cartesianSmallMultipleFactory=e,this.viewportScale=t.scale,e.clearRenderingTimeout(),A=e.getCoreMultiple(),(S=A.getData())?(this.axesData=S.axesData,this.formatMode=c,this.isSelected=f,z=this.renderLegend(S.legendData,t,l,c,this.featureSwitches.onObject),P=z[1],this.chartAreaViewport={height:t.height-(L=z[0]).height,width:t.width-L.width,scale:t.scale},V=n.renderContainers(this.chartAreaViewport,this.axesData,this.isPlayAxis()?r.PlayAxisBottomMargin:0,this.featureSwitches),this.legendRenderer.adjustChartArea(n.context),this.positionChartArea(L,P,this.isPlayAxis(),V),k=this.calculatePlayAxisControlLayout(this.chartAreaViewport,L,this.legendRenderer.getPosition(),V),e.isSmallMultiples()?[3,1]:(this.cartesianSmallMultiplesLayout&&(this.cartesianSmallMultiplesLayout.destroy(),this.cartesianSmallMultiplesLayout=void 0),this.setGridContainerVisibility(!1),2&A.getState()||A.initRenderer(this.buildPlotAreaLayout(!1)),this.renderMultiple({multiple:A,viewport:t,background:i,axisZoom:n,chartAreaViewport:this.chartAreaViewport,chartAreaMargins:this.chartAreaMargins,renderedViewport:this.renderedPlotArea,playAxesRect:k,suppressAnimations:o,resizeMode:g,trimOrdinalDataOnOverflow:s,categoryLoadMoreDataHandler:a,isSharedAxis:!1,isHierarchicalAxis:l,preserveScrollPosition:u,supportsScrolling:!0,formatMode:c,isSelected:f,subSelectionHelper:h}),[3,3])):[2];case 1:return this.setGridContainerVisibility(!0),this.adjustGridContainer(this.chartAreaViewport),this.cartesianSmallMultiplesLayout=this.cartesianSmallMultiplesLayout||this.createSmallMultiplesLayout(),[4,this.cartesianSmallMultiplesLayout.render({viewport:this.chartAreaViewport,axisRendererSettings:this.getAxisRendererSettings(this.chartAreaSvg,!0,!1),cartesianSmallMultipleFactory:e,axesData:this.axesData,animationSettings:this.getAnimationOptions(!0),background:i,playAxesRect:k,suppressAnimations:!0,resizeMode:g,isHierarchicalAxis:l,trimOrdinalDataOnOverflow:s,categoryLoadMoreDataHandler:a,warnings:S.warningObjectCollection,formatMode:c,subSelectionHelper:h})];case 2:J.sent(),J.label=3;case 3:return this.featureSwitches.onObject&&h.addDirectEditPlaceholderOutlines(),[2]}})})},r.prototype.setGridContainerVisibility=function(e){this.gridContainer.css("display",e?"":"none")},r.prototype.scrollRowsTo=function(e){w.fF.assertValue(this.cartesianSmallMultiplesLayout,"multiple layout"),this.cartesianSmallMultiplesLayout.scrollRowsTo(e)},r.prototype.destroy=function(){this.cartesianSmallMultiplesLayout&&this.cartesianSmallMultiplesLayout.destroy()},r.prototype.positionChartArea=function(e,t,a,i){this.chartAreaMargins=(0,p.rX)(),(0,ta.nM)(t)&&(this.chartAreaMargins.left=e.width),(0,ta.RB)(t)&&(this.chartAreaMargins.top=e.height),a&&(this.chartAreaViewport.height-=r.PlayAxisBottomMargin),i&&(this.chartAreaViewport.height-=i.top+i.bottom,this.chartAreaViewport.width-=i.left+i.right,this.chartAreaMargins.left=(this.chartAreaMargins.left||0)+i.left,this.chartAreaMargins.top=(this.chartAreaMargins.top||0)+i.top),this.chartAreaSvg.attrs({width:this.chartAreaViewport.width,height:this.chartAreaViewport.height}).styles({"margin-top":this.chartAreaMargins.top?"".concat(this.chartAreaMargins.top,"px"):null,"margin-left":this.chartAreaMargins.left?"".concat(this.chartAreaMargins.left,"px"):null})},r.prototype.createSmallMultiplesLayout=function(){var e=this;return new yi(this.gridContainer,this.interactivityService,function(t){return e.hostServices.getLocalizedString(t)},this.rowLoadMoreDataHandler,this.cartesianOptions,this.layerStyle,this.viewMode,this.buildPlotAreaLayout.bind(this),this.renderMultiple.bind(this),this.adapterFactory,this.hostServices.instanceId,this.eventManager)},r.prototype.adjustGridContainer=function(e){this.gridContainer.css({width:e.width,height:e.height}),this.legendRenderer.adjustChartArea(d3.select(this.gridContainer.get(0)))},r.prototype.getVisibleMultiples=function(){return this.cartesianSmallMultiplesLayout?this.cartesianSmallMultiplesLayout.getVisibleMultiples():{startIndex:0,endIndex:1}},r.prototype.isSmallMultiples=function(){var e,t;return null!==(t=null===(e=this.cartesianSmallMultipleFactory)||void 0===e?void 0:e.isSmallMultiples())&&void 0!==t&&t},r.prototype.renderMultiple=function(e){var t=this,a=(0,d.__assign)((0,d.__assign)({},e),{axesLayout:void 0,labelAnimationOptions:this.getLabelAnimationOptions(e.suppressAnimations),axesAnimationOptions:this.getAnimationOptions(e.suppressAnimations),layerStyle:this.layerStyle,viewMode:this.viewMode,shouldRenderGridLinesOnly:!1,isSmallMultiples:this.isSmallMultiples(),multipleId:e.multiple.getIndex().toString(),navigationScrollCallbacks:{scrollTo:function(o){return t.scrollTo(o)},shouldScrollTo:function(o){return t.shouldScrollTo(o)},scrollBy:function(o){return t.scrollBy(o)}}}),i=e.multiple.getData();e.isSharedAxis&&this.adjustOptionsForSharedAxis(a,e.viewport,e.axesLayout,i);var n=e.multiple.getRenderer();n.axesRenderer.update(i.axesData,i.scrollbarOptions),n.render(e.multiple.layers,i,e.renderedViewport,a,this.viewportScale),this.renderedPlotArea=n.renderedPlotArea},r.prototype.scrollTo=function(e){this.isSmallMultiples()?this.cartesianSmallMultiplesLayout.scrollTo(e):this.cartesianSmallMultipleFactory.scrollTo(e,this.getVisibleMultiples())},r.prototype.shouldScrollTo=function(e){return this.isSmallMultiples()?this.cartesianSmallMultiplesLayout.shouldScrollTo(e):this.cartesianSmallMultipleFactory.shouldScrollTo(e,this.getVisibleMultiples())},r.prototype.scrollBy=function(e){this.isSmallMultiples()?this.cartesianSmallMultiplesLayout.scrollBy(e):this.cartesianSmallMultipleFactory.scrollBy(e,this.getVisibleMultiples())},r.prototype.getLabelAnimationOptions=function(e){return this.isPlayAxis()?cr.Je:this.getAnimationOptions(e)},r.prototype.getAnimationOptions=function(e){var t;return{ease:null===(t=this.cartesianOptions.animator)||void 0===t?void 0:t.getEasing(),duration:(0,sa.Mb)(this.cartesianOptions.animator,e)}},r.prototype.calculatePlotArea=function(e){if(this.isSmallMultiples()){var t=this.cartesianSmallMultiplesLayout.calculatePlotArea(e);return{width:t.width,height:t.height,scale:e.viewport.scale}}var a=e.viewport,i=e.axesMargins,n=a.width-(i.left+i.right);return{width:n-(e.showSeriesLabels?(0,le.lr)(e.seriesLabelSettings,n):0),height:a.height-(i.top+i.bottom),scale:a.scale}},r.prototype.adjustOptionsForSharedAxis=function(e,t,a,i){i.axesData.y.sharedAxis&&i.axesData.x.sharedAxis?(a.shouldRenderAxis.x=!1,a.shouldRenderAxis.y=!1,a.shouldRenderAxis.y2=!1,a.margin=a.tickLabelMargins.axesOverflow,e.shouldRenderGridLinesOnly=!0):e.shouldRenderGridLinesOnly=!this.axesData.valueAxis.show,a.viewport=t,e.axesLayout=a},r.prototype.getAxisRendererSettings=function(e,t,a){var i=this;return this.axesData.useManagedTabIndex=!1,{axes:this.axes,container:e,cartesianOptions:this.cartesianOptions,data:this.axesData,interactivity:this.options.interactivity,interactivityService:this.interactivityService,behavior:this.categoricalAxisBehavior,calculatePlotArea:function(s){return i.calculatePlotArea(s)},hostServices:this.hostServices,tooltipService:this.tooltipService,eventManager:this.eventManager,formatMode:this.formatMode,isSelected:this.isSelected,onScroll:t?function(n){return i.cartesianSmallMultiplesLayout.onScroll(n)}:void 0,onExtentUpdate:t?function(n){return i.cartesianSmallMultiplesLayout.onExtentUpdate(n)}:void 0,suppressBrush:t?a:void 0}},r.prototype.calculatePlayAxisControlLayout=function(e,t,a,i){var n;if(this.isPlayAxis()){var s=i?.left||0,o=i?.bottom||0;n={left:(0,ta.nM)(a)?t.width:0,top:(0,ta.RB)(a)?t.height+e.height+o:e.height+o,height:r.PlayAxisBottomMargin,width:e.width+s}}return n},r.prototype.renderLegend=function(e,t,a,i,n){return this.legendRenderer=new vn(this.legend,e,t,this.options.interactivity,n&&1===this.viewMode&&this.isSelected),this.legendRenderer.render(a,i,n),[this.legendRenderer.getMargin(),this.legendRenderer.getPosition()]},r.prototype.buildPlotAreaLayout=function(e,t,a,i,n){return t||(t=this.chartAreaSvg),new fa(this.cartesianOptions,this.visibilityHelper,t,new Ae(this.getAxisRendererSettings(t,e,e)),i||this.element,this.hostServices,n||this.behavior,this.interactivityService,a||this.clearCatcher,e,this.viewportScale)},r.IconClassName="cartesianChartResponsiveIcon",r.GridContainerClassName="cartesian-grid-container",r.PlayAxisBottomMargin=80,r}(),bt=x(47287),Ei=x(58691),en=x(34644),ys=function(){function r(e){var t;this.options=e,w.fF.assertValue(e,"options:CartesianVisualConstructorOptions"),this._tooltipsEnabled=null!==(t=e.tooltipsEnabled)&&void 0!==t&&t}return Object.defineProperty(r.prototype,"activeData",{get:function(){var t;return null!==(t=this.clippedData)&&void 0!==t?t:this.data},enumerable:!1,configurable:!0}),r.prototype.hasData=function(){return!!this.data},Object.defineProperty(r.prototype,"featureSwitches",{get:function(){return this.options.featureSwitches||{}},enumerable:!1,configurable:!0}),r.prototype.initData=function(e){w.fF.assertValue(e,"options:CartesianVisualInitDataOptions"),this._currentViewport=e.viewport,this.dataInitOptions=e},r.prototype.initRenderer=function(e){w.fF.assertValue(e?.svg,"options:CartesianVisualInitRendererOptions"),this.renderOptions=e},Object.defineProperty(r.prototype,"tooltipsEnabledSafe",{get:function(){var t,a=null===(t=this.hostService)||void 0===t?void 0:t.tooltips();return this.tooltipsEnabled&&(!a||a?.enabled())},enumerable:!1,configurable:!0}),r.prototype.updateCurrentViewport=function(e){this._currentViewport=e.viewport,this._margin=e.margin},r.prototype.getLegendData=function(){var e;return null===(e=this.data)||void 0===e?void 0:e.legendData},Object.defineProperty(r.prototype,"margin",{get:function(){return this._margin},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"style",{get:function(){return this.dataInitOptions.style},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"animationOptions",{get:function(){return this.dataInitOptions.animation},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"currentViewport",{get:function(){return this._currentViewport},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"hostService",{get:function(){return this.dataInitOptions.host},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tooltipService",{get:function(){var t;return null===(t=this.dataInitOptions.services)||void 0===t?void 0:t.tooltips},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tooltipsEnabled",{get:function(){return this._tooltipsEnabled},set:function(t){this._tooltipsEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"element",{get:function(){return this.dataInitOptions.element},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"cartesianVisualHost",{get:function(){return this.renderOptions.cartesianHost},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"animator",{get:function(){return this.renderOptions.animator},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"svg",{get:function(){return this.renderOptions.svg},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"availableWidth",{get:function(){return Math.max(0,this.currentViewport.width-(this.margin.left+this.margin.right))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"availableHeight",{get:function(){return Math.max(0,this.currentViewport.height-(this.margin.top+this.margin.bottom))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"interactivityService",{get:function(){return this.options.interactivityService},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mobileTileInteractive",{get:function(){var t,a;return null!==(a=null===(t=this.dataInitOptions.interactivity)||void 0===t?void 0:t.mobileTileInteractive)&&void 0!==a&&a},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isVisualInteractive",{get:function(){var t,a;return null!==(a=null===(t=this.dataInitOptions.interactivity)||void 0===t?void 0:t.isVisualInteractive)&&void 0!==a&&a},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dragDataPoint",{get:function(){var t;return null===(t=this.dataInitOptions.interactivity)||void 0===t?void 0:t.dragDataPoint},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isComboChart",{get:function(){return this.options.isComboChart},enumerable:!1,configurable:!0}),r.prototype.isYCategorical=function(){return!1},r.prototype.overrideXAxis=function(e){this.xAxisProperties=e},r.prototype.onClearSelection=function(){var e;null===(e=this.interactivityService)||void 0===e||e.clearSelection()},Object.defineProperty(r.prototype,"localizer",{get:function(){var t=this;return function(a){return t.hostService.getLocalizedString(a)}},enumerable:!1,configurable:!0}),r.prototype.getPreferredPlotArea=function(e){var n=e.outerPaddingRatio,o={height:this.availableHeight,width:this.availableWidth};if(this.options.isScrollable&&!e.isScalar){var l=e.categoryThickness*(e.categoryCount+2*(void 0===n?0:n));this.isYCategorical()?o.height=Math.max(l,o.height):o.width=Math.max(l,o.width)}return o},r}(),On=function(r){function e(t){var a=r.call(this,t)||this;return a.options=t,a.viewModelAdapterFactory=t.viewModelAdapterFactory,a}return(0,d.__extends)(e,r),e.prototype.updateCurrentViewport=function(t){r.prototype.updateCurrentViewport.call(this,t),this.updateViewModelAdapterAndData()},e.prototype.updateViewModelAdapterAndData=function(){this.viewModelAdapterFactory&&this.originalData&&(this.viewModelAdapter=this.viewModelAdapterFactory.create({data:this.originalData,dataView:this.dataView,viewport:this.currentViewport}),this.data=this.viewModelAdapter.getData())},e.prototype.addWarnings=function(t){var a;null===(a=this.viewModelAdapter)||void 0===a||a.addWarnings(t)},e}(ys),ms=x(52083),fn=x(7176),Pr=x(44196),Jn=x(43906),tn=x(77558),ka=x(382),an=x(6444),zt=x(38859),ao=function(){function r(e){var t;this.options=e,this.categories=[],this.existingTooltips=[],this.fillTransparency=zt.fl,w.fF.assertValue(e.dataView,"dataView"),w.fF.assertValue(e.style,"style"),this.reader=(0,ca.G)(e.dataView,{staticSeriesRoleNames:[B.x.y],colorOptions:{valueRole:B.x.y,visualStyle:e.style},formatStringProp:B.p.general.formatString,errorRangeProp:la.Qx.errorRange}),this.seriesCount=this.reader.data.hasValues(r.valueRoleName)?this.reader.data.getSeriesCount():void 0,this.isStacked=zt.C3(e.chartType,this.seriesCount);var a=(t=(0,Pe.xh)(e.dataView.categorical,bt.gE.general.formatString,void 0)).categories,i=t.categoryFormatter;this.categories=a,this.categoryFormatter=i}return Object.defineProperty(r.prototype,"displayNames",{get:function(){if(!this._displayNames){var t=this.options.hostServices;this._displayNames={negative:t.getLocalizedString("Visual_TotalTooltipNegative"),positive:t.getLocalizedString("Visual_TotalTooltipPositive"),net:t.getLocalizedString("Visual_TotalTooltipNet"),simple:t.getLocalizedString("Visual_Total")}}return this._displayNames},enumerable:!1,configurable:!0}),r.create=function(e){return new r(e)},r.convert=function(e){return new r(e).convert()},Object.defineProperty(r.prototype,"staticObjects",{get:function(){return this.reader.objects.getStaticObjects()},enumerable:!1,configurable:!0}),r.prototype.convert=function(){var e,t,a,i,n=(e=this.options).dataView,s=e.style,o=e.multipleInfo,l=e.chartType,u=e.interactivityService,c=e.hostServices,h=e.isComboChart,f=e.supportsTotalLabels,g=null!==(a=n.metadata)&&void 0!==a?a:null,A=84===l,S=zt.Ds(l),C=(0,p.Vk)(g,!1),L=(0,p.$K)(C),P=(0,p.qU)(null!==(i=this.options.isScalar)&&void 0!==i&&i,C),z=(0,p.Zo)(n.categorical,P).category.source,J=zt.L2(s,S,h,l,this.seriesCount);this.staticObjects&&(0,N.AR)(this.staticObjects.labels,J,!zt.hg(l),s,h);var fe=(0,d.__assign)((0,d.__assign)({},J),{show:!1});f&&this.staticObjects&&(0,N.ww)(this.staticObjects.totals,fe,!1,s,h),this.totalLabelsSettings=fe,this.color=(0,b.W7)(this.staticObjects,bt.gE.dataPoint.fill,s.colorPalette.dataColors.getColorByIndex(0).value),this.fillTransparency=(0,b.NA)(this.staticObjects,bt.gE.dataPoint.fillTransparency,zt.fl),this.borderSettings=this.readBorderSettings(this.staticObjects,(0,zt.nO)(s),this.color),this.ribbonBandSettings=(0,d.__assign)({show:(0,b.NA)(this.staticObjects,bt.gE.ribbonBands.show,A)},this.readRibbonSettings(void 0,this.color));var G=pt(s);this.staticObjects&&((0,N.FJ)(this.staticObjects.seriesLabels,G,s,h),G.defaultSeriesWidth=G.defaultSeriesWidth?-1:null,G.maxWidthPercentage=G.defaultSeriesWidth?-1:G.maxWidthPercentage),this.layout={seriesOrderReversed:(0,b.NA)(this.staticObjects,bt.gE.layout.seriesOrderReversed,zt.HQ.seriesOrderReversed),seriesOrderSorted:(0,b.NA)(this.staticObjects,bt.gE.layout.seriesOrderSorted,!!A||zt.HQ.seriesOrderSorted),stackedGapSize:(0,b.NA)(this.staticObjects,bt.gE.layout.stackedGapSize,zt.HQ.stackedGapSize),stackedGapExplodes:(0,b.NA)(this.staticObjects,bt.gE.layout.stackedGapExplodes,zt.HQ.stackedGapExplodes),clusteredGapSize:(0,b.NA)(this.staticObjects,bt.gE.layout.clusteredGapSize,zt.HQ.clusteredGapSize),clusteredGapOverlaps:(0,b.NA)(this.staticObjects,bt.gE.layout.clusteredGapOverlaps,zt.HQ.clusteredGapOverlaps),clusteredGapOverlapReverse:(0,b.NA)(this.staticObjects,bt.gE.layout.clusteredGapOverlapReverse,zt.HQ.clusteredGapOverlapReverse),ribbonGapSize:(0,b.NA)(this.staticObjects,bt.gE.layout.ribbonGapSize,zt.HQ.ribbonGapSize)},(h||S)&&(this.layout.stackedGapExplodes=!1),this.isStacked&&(this.layout.stackedGapSize=Math.min(this.layout.stackedGapSize,this.layout.stackedGapExplodes?zt._f:zt.nD)),this.isStacked||(this.layout.clusteredGapSize=Math.min(this.layout.clusteredGapSize,this.layout.clusteredGapOverlaps?zt.jL:zt.E5)),(!this.isStacked||this.layout.stackedGapSize>0)&&(this.borderSettings.outlineOnly=!1);var Oe=(t=this.getLegend()).legendData,je=t.seriesSources,ke=Oe.dataPoints,Je=this.createDataPoints({legend:ke,defaultDataLabelsSettings:J,defaultSeriesSettings:G,totalLabelsSettings:fe,isScalar:P,isCombo:!!h,categoryMetadata:z,multipleInfo:o}),Xe=Je.series,wt=Je.hasHighlights,Yt=Je.hasDynamicSeries,Ut=zt.e3(l,Xe.length);(null==J.position||!_.includes(Ut,J.position))&&(J.position=ka.h.auto);for(var Ct=[],Gt=0,da=ke.length;Gt<da;Gt++)Ct.push(je[Gt]);if((this.layout.seriesOrderSorted||this.isStacked&&this.layout.stackedGapSize>0||this.borderSettings.outlineOnly)&&function(r){for(var e=Array.from({length:r.categoryCount},function(){return[]}),t=Array.from({length:r.categoryCount},function(){return[]}),a=Array.from({length:r.categoryCount},function(){return 0}),i=r.isStacked&&r.layout.stackedGapSize>0&&!r.layout.seriesOrderSorted,n=function(A){for(var S=function(P){var V=A[P];if(V.highlight)return"continue";r.hasHighlights&&w.fF.assert(function(){return A[P+1].highlight},"next item must be a highlight data point"),(V.value>=0?e:t)[V.categoryIndex].push({data:V,dataHighlight:r.hasHighlights?A[P+1]:void 0}),V.value&&a[V.categoryIndex]++},C=0;C<A.length;C++)S(C)},s=0,o=r.series;s<o.length;s++)n(o[s].data);function u(g,A){var S;if(!(g.length<1)){g.sort(function(G,K){var ie,Oe;return Math.abs(null!==(ie=G.data.value)&&void 0!==ie?ie:0)-Math.abs(null!==(Oe=K.data.value)&&void 0!==Oe?Oe:0)}),r.layout.seriesOrderReversed&&g.reverse();for(var C=0,L=0,P=0;L<g.length;L++){var V=g[L],k=V.data,z=V.dataHighlight,J=C,fe=null!==(S=k.value)&&void 0!==S?S:0;k.indexFromZeroValue=P,z&&(z.indexFromZeroValue=P),fe&&P++,fe>0?(k.position=C+=fe,k.rank=g.length-L,k.seriesPosition=r.layout.seriesOrderReversed?A+L:g.length-L-1):(k.position=C,C+=fe,k.rank=A+L+1,k.seriesPosition=r.layout.seriesOrderReversed?g.length-L:A+L),k.originalPosition=k.position,z&&(z.rank=k.rank,z.seriesPosition=k.seriesPosition,z.position=fe>0?J+z.value:J,z.originalPosition=k.position)}}}function c(g){if(!(g.length<1))for(var A=0,S=0;A<g.length;A++){var C=g[A],L=C.data,P=C.dataHighlight;L.indexFromZeroValue=S,P&&(P.indexFromZeroValue=S),L.value&&S++}}for(var h=0;h<r.categoryCount;h++)i?(c(e[h]),c(t[h])):r.layout.seriesOrderSorted&&(u(e[h],t[h].length),u(t[h],e[h].length));var f=function(A){for(var S=a[A],C=0,L=function(fe){fe.countOfPointsInCategory=S,fe.value&&(fe.indexFromBottom=C,C++)},P=t[A].length-1;P>=0;P--)L(t[A][P].data);for(var V=0,k=e[A];V<k.length;V++)L(k[V].data)};for(h=0;h<r.categoryCount;h++)f(h)}({series:Xe,hasHighlights:wt,categoryCount:this.categories.length,layout:this.layout,isStacked:this.isStacked}),this.isStacked&&this.layout.stackedGapSize>0&&this.layout.stackedGapExplodes){for(var ua=0,_t=0,qt=Xe;_t<qt.length;_t++)for(var Ta=0,Ha=(ga=qt[_t]).data;Ta<Ha.length;Ta++)(xa=Ha[Ta]).highlight||(ua=Math.max(xa.valueAbsolute,ua));this.layout.stackedGapExplodeStepSize=ua*this.layout.stackedGapSize/100;for(var $a=0,li=Xe;$a<li.length;$a++)for(var Xa=0,La=(ga=li[$a]).data;Xa<La.length;Xa++){var xa;zt.o9(xa=La[Xa],this.layout)}}for(var qa=1,ea=0;ea<this.categories.length;ea++)for(var Ua=0,ei=Xe;Ua<ei.length;Ua++){var ga=ei[Ua];ga?.data[ea]&&(ga.data[ea].posinset=qa++)}if(this.ribbonBandSettings.show&&this.categories.length>=2&&function(r){for(var e=B.p.general.formatString,t=r.dataView.categorical.categories,a=zt.hg(r.chartType)&&!r.isScalar,i=function(u){var c=r.hasHighlights?_.filter(u.data,function(g){return g.highlight}):u.data;w.fF.assert(function(){return null!==u.ribbonBands},"ribbonBands must be created per each series in advance");for(var h=function(A){var S=c[A],C=c[A+1];if(!S.value||!C.value||S.categoryIndex!==C.categoryIndex-1)return"continue";if(a){var L=S;S=C,C=L}var P=[],V=r.reader.columns.getValueMetadataColumn(bt.au.y,u.index),k=(0,Ue.BJ)((0,Ue.AD)(t,S.categoryIndex,e)),z=(0,Ue.BJ)((0,Ue.AD)(t,C.categoryIndex,e)),J=function(Xe){return"".concat(Xe," ").concat(u.displayName).concat(r.hasDynamicSeries?" ".concat(V.displayName):"")};P.push({displayName:J(k),value:(0,Pe.xq)(S.value,V,e,!1)}),P.push({displayName:J(z),value:(0,Pe.xq)(C.value,V,e,!1)});var fe=C.value-S.value,G=(0,Pe.xq)(fe,V,e,!1),K=(0,F.Z)("Percentage"),Oe=(0,F.WU)(fe/S.value,K);if(P.push({displayName:"".concat(V.displayName," ").concat(r.hostServices.getLocalizedString("Change")),value:"".concat(G," (").concat(Oe,")")}),null!=S.rank&&null!=C.rank){P.push({displayName:"".concat(k," ").concat(u.displayName," ").concat(r.hostServices.getLocalizedString("RibbonChart_TooltipRank")),value:"".concat(S.rank)}),P.push({displayName:"".concat(z," ").concat(u.displayName," ").concat(r.hostServices.getLocalizedString("RibbonChart_TooltipRank")),value:"".concat(C.rank)});var je=C.rank-S.rank;if(0!==je){var ke=je>0?"\u25bc".concat(je):"\u25b2".concat(-je);P.push({displayName:"".concat(r.hostServices.getLocalizedString("RibbonChart_TooltipRank")," ").concat(r.hostServices.getLocalizedString("Change")),value:ke})}}u.ribbonBands.dataPoints.push({d1:S,d2:C,tooltipInfo:P})},f=0;f<c.length-1;f++)h(f)},n=0,s=r.series;n<s.length;n++)i(s[n])}({dataView:n,isScalar:P,chartType:l,series:Xe,hasHighlights:wt,hasDynamicSeries:Yt,reader:this.reader,hostServices:c}),u){for(var ui=0,Na=Xe;ui<Na.length;ui++)u.applySelectionStateToData((ga=Na[ui]).data);u.applySelectionStateToData(Oe.dataPoints)}return(0,d.__assign)((0,d.__assign)({},Je),{categories:this.categories,categoryFormatter:this.categoryFormatter,preferredCategoryWidth:L,hasY2Role:(0,M.c5)(n,"Y2"),valuesMetadata:Ct,legendData:Oe,categoryMetadata:z,isScalar:P,dataLabelsSettings:J,seriesLabelSettings:G,totalLabelsSettings:fe,columnStyle:{fillColor:this.color,fillTransparency:this.fillTransparency,border:this.borderSettings},layout:this.layout,ribbonBands:this.ribbonBandSettings,strokeSettings:(0,ia.kG)(s),dataPointsCount:qa})},r.prototype.createDataPoints=function(e){var t,i,n,s,o,l,u,c,h,f,g,A,S,C,L,a=this,P=(t=this.options).dataView,V=t.chartType,k=t.style,z=t.hostServices,J=zt.Ds(V),fe=e.multipleInfo,G=e.isCombo,K=e.defaultDataLabelsSettings,ie=e.defaultSeriesSettings,Oe=e.isScalar,je=this.seriesCount,ke=P.categorical,Je=B.p.general.formatString,Xe=null!==(n=null===(i=ke?.values)||void 0===i?void 0:i.grouped())&&void 0!==n?n:void 0,wt=this.categories.length,Yt=[],Ut=[],Ct=[];if(je<1||wt<1)return{series:Yt,totals:Ut,hasPositive:!1,hasNegative:!1,hasNetPositive:!1,hasNetNegative:!1,valuesMetadataBySeries:[],categoryIdentities:[],hasHighlights:!1,hasDynamicSeries:!1,multipleIdentity:void 0,categoryData:Ct};var da,Gt=ke.categories;da=_.isEmpty(Gt)?null:_.last(Gt).source;var li,Xa,La,ua=(0,D.getCategoryValueType)(da),_t=(0,I.v9)(ua),qt=[],ga=[],Ta=[],Ha=[],xa=[],$a=!(!ke.values||!ke.values.source);fe&&(Xa=_.first(fe.sources).metadata.queryName,La=fe.sources.map(function(vt){return(0,Q.Y)(vt.metadata,vt.value,fe.identity)}),li=(new Q.dw).withColumnIdentity(fe.identity,Xa,La).createSelectionId());for(var qa=!1,ea=this.reader.data.hasHighlights(),Ua=0;Ua<je;Ua++){for(var ei=[],ui=[],Na=0;Na<wt;Na++){var Ga=this.getValueBySeriesAndCategory(Ua,Na),di=this.getFormatStringBySeriesAndCategory(Ua,Na);if(ei[Na]={value:Ga,formatString:di},ea){var ja=this.getHighlightBySeriesAndCategory(Ua,Na),zi=this.getHighlightFormatStringBySeriesAndCategory(Ua,Na);ui[Na]={value:ja,formatString:zi},null!=Ga&&null!=ja&&!(Ga>=0&&ja>=0&&(0,te.bA)(Ga,ja)||Ga<=0&&ja<=0&&(0,te.bl)(Ga,ja))&&(qa=!0)}}qt.push(ei),ea&&ga.push(ui)}qa&&!zt.G1(V,je)&&(qa=!1,ea=!1,qt=ga);for(var hr=J?Ss(wt,je,function(vt,Sa){return qt[vt][Sa].value}):[],ri=K.fontProperties.color,Ii=this.totalLabelsSettings.fontProperties.color,_i=function(Sa){var ti=Sa,Kt=$t.layout.seriesOrderReversed?je-Sa-1:Sa,Ki=$t.reader.labels.dynamicLabelReader.areDynamicValueLabelsEnabled(null===(s=$t.options.featureSwitches)||void 0===s?void 0:s.labelEnhancementsM0,Kt,ea),ya=[],Oa=e.legend[Kt],hi=void 0,ba=(0,me.ED)(ie);if($t.reader.data.hasSeries()||G){var Ci,ai=(Ci=G&&!$t.reader.data.hasSeries()?$t.reader.objects.getValueMetadataObjects(r.valueRoleName,Kt):$t.reader.objects.getSeriesDataObjects(Kt))&&Ci.labels,Pi=Ci&&Ci.seriesLabels;(hi=(0,me.ED)(K)).show=K.show&&(null===(o=K.showByDefault)||void 0===o||o),ai&&(0,N.AR)(ai,hi,void 0,k,G),ba.show=ie.show&&(null===(l=ie.showByDefault)||void 0===l||l),Pi&&(0,N.FJ)(Pi,ba,k,G)}var ar=$t.reader.columns.getValueColumnBySeries(Kt),za=Ha[Kt]=$t.reader.columns.getValueMetadataColumn(r.valueRoleName,Kt),ir=_.findIndex(Ha,za);-1!==ir&&(xa[ir]?xa[ir].usedInSeriesIndices.push(Kt):xa[ir]={metadataColumn:za,usedInSeriesIndices:[Kt],valueSelector:(new Q.dw).withMeasure(za.queryName,ar).createSelectionId()});var ha=(0,fn.nC)($t.isStacked?{}:za.objects,k,Oa.marker.color,Kt,(0,d.__assign)((0,d.__assign)({},K),{show:!1}),{isCombo:G,hideBand:!0,valueAxisHorizontal:zt.hg(V),staticObjects:$t.staticObjects}),xr=ha.hasUncertainty,Vr=(0,d.__assign)((0,d.__assign)({displayName:Oa.label,key:"series".concat(Kt),index:Kt,data:ya,identity:Oa.identity,columnStyle:{fillColor:Oa.marker.color,fillTransparency:Oa.marker.transparency,border:Oa.marker.stroke}},$t.ribbonBandSettings.show&&{ribbonBands:(0,d.__assign)((0,d.__assign)({},$t.readRibbonSettings(Kt,Oa.marker.color)),{dataPoints:[]})}),{labelSettings:hi,uncertainty:ha,measureDisplayName:za.displayName,type:za.type,seriesLabelSettings:ba});Yt.push(Vr);for(var br=(0,ms.yj)(ke),Ur=(0,ms.Rr)(ke),si=(0,F.Z)("Percentage"),Cr=!1,ln=function(Xt){var Bi,kr,un=(Bi=qt[Kt][Xt]).value,gi=Bi.formatString,Ti=(0,I.eT)(un);if(null==Ti&&ti>0)return"continue";var Xi=$t.categories[Xt];if(_t&&null!=Xi&&!(Xi instanceof Date))return"continue";var Zi,Ar=void 0;if(Xi instanceof Date?(w.fF.assert(function(){return _t},"Metadata type and value type must match"),w.fF.assert(function(){return(0,an.M4)(Xi)},"originalCategoryValue"),Ar=Xi.epochTimeStamp):Ar=Xi,Oe&&(null==Ar||isNaN(Ar)))return"continue";xr&&(Zi=(0,fn.PT)($t.reader.data,Xt,Kt,Ti));var jr=Ti<0;null!==(u=Ut[Xt])&&void 0!==u||(Ut[Xt]={positive:0,positiveCount:0,negative:0,negativeCount:0,net:0,categoryValue:Ar,categoryIndex:Xt,dynamicFormatString:gi}),null!==(c=(C=Ut[Xt]).dynamicFormatString)&&void 0!==c||(C.dynamicFormatString=gi);var Yr=(0,Rt.AO)({defaultColor:Ii,categoricalDataReader:$t.reader,categoryIndex:Xt,seriesIndex:ti}),Xn=(0,Rt.B8)(Yr)?Yr.color:ri;$t.totalLabelsSettings.fontProperties=(0,Rt.Vv)(Xn,$t.totalLabelsSettings.fontProperties),Ut[Xt].labelFill=Yr.color;var Kr=null==Ti?null:Ti*(J?hr[Xt][jr?"neg":"pos"]:1),Oi=Math.abs(Kr),Dr=void 0;jr?(Dr=Ut[Xt].negative,isNaN(Oi)||(Ut[Xt].negative-=Oi,Ut[Xt].negativeCount++,Ut[Xt].net-=Oi)):(isNaN(Oi)||(Ut[Xt].positive+=Oi,Ut[Xt].positiveCount++,Ut[Xt].net+=Oi),Dr=Ut[Xt].positive);var Zn=Xe&&Xe.length>Kt&&Xe[Kt].values?Xe[Kt]:null,rr=_.isEmpty(ke.categories)?null:ke.categories[0],Dn=(kr=r.createIdentities(ke,rr,Xt,Zn,$t.reader.columns.getValueColumn(r.valueRoleName,Kt),za,fe,Xa,La)).identity,Zt=kr.identityKey;null!==(h=Ta[Xt])&&void 0!==h||(Ta[Xt]=function(){return(0,p.MH)(Xt,rr)});var Fi,Er,fr,cn,Wi=0===br?null:Ur;ea&&(Fi=$t.reader.data.getHighlight(r.valueRoleName,Xt,Kt),Er=$t.reader.data.getHighlightFormatString(r.valueRoleName,Xt,Kt),cn=Fi,null!==Fi&&(xr&&(fr=(0,fn.PT)($t.reader.data,Xt,Kt,Fi,!0)),J&&(Fi*=hr[Xt][jr?"neg":"pos"])));var Vi,Ni=rr?(0,Ue.AD)(P.categorical.categories,Xt,Je):void 0;$t.options.tooltipsEnabled&&(Vi=new Ca.E4).withLazyValues(function(){var or,oi=[];if(fe){var dn=(0,Ca.Q6)(fe.sources.map(function(Mn){return Mn.metadata}),fe.sources.map(function(Mn){return Mn.value}),!0,(0,Jn.F)(Je));dn&&oi.push(dn())}rr&&oi.push((0,Ue.bR)(Ni)),$a&&(!rr||rr.source!==ke.values.source)&&oi.push({displayName:ke.values.source.displayName,value:(0,Pe.xq)(Xe[Kt].name,ke.values.source,Je)});var Ir=function(ps){return(0,Pe.xq)(ps,za,Je,!1,gi)};if(null!=Ti){var Ln=Ir(Ti),Pn=J?"".concat(Ln," (").concat((0,F.WU)(Oi,si),")"):Ln,Jr={displayName:za.displayName,value:Pn},$r=ha.tooltips;if(xr&&!ea&&$r.show&&$r.format===tn.K.range){var Nr=(0,Pr.kS)(Zi,Kr,ha,Ir,z,{overrideDisplayName:za.displayName});w.fF.assert(function(){return void 0===Nr||1===Nr.length},"getUncertaintyTooltipItems() with 'range' format should return exactly one item"),_.isEmpty(Nr)||(Jr=Nr[0])}oi.push(Jr)}if(ea){var qr=void 0;if(null!==cn&&null!==Fi){var Hi=(0,F.WU)(Fi,si),_r=(0,Pe.xq)(cn,za,Je,!1,Er);qr=J?"".concat(_r," (").concat(Hi,")"):_r}if(Ir=function(ps){return(0,Pe.xq)(ps,za,Je,!1,Er)},qr)if($r=ha.tooltips,xr&&$r.show&&$r.format===tn.K.range){var Ji=(0,Pr.kS)(Zi,Kr,ha,Ir,z,{overrideDisplayName:Ca.I6.localizationOptions.highlightedValueDisplayName});w.fF.assert(function(){return void 0===Ji||1===Ji.length},"getUncertaintyTooltipItems() with 'range' format should return exactly one item"),_.isEmpty(Ji)?oi.push({displayName:Ca.I6.localizationOptions.highlightedValueDisplayName,value:qr}):oi.push(Ji[0])}else oi.push({displayName:Ca.I6.localizationOptions.highlightedValueDisplayName,value:qr})}if(xr&&ha.tooltips.format!==tn.K.range){var pr=ea?fr:Zi;pr&&oi.push.apply(oi,(0,Pr.kS)(pr,Ti,ha,Ir,z,{hideMarker:!0}))}Wi&&null!=Wi.values[Xt]&&oi.push({displayName:Wi.source.displayName,value:(0,Pe.xq)(Wi.values[Xt],Wi.source,Je,!1,(0,b.NA)(null===(or=Wi.objects)||void 0===or?void 0:or[Xt],Je))}),(0,Ca.VT)(a.reader,oi,Xt,$a?Kt:void 0,Je);var lr=a.getTotalTooltip(Kt,Xt,jr,Ut,Ha,Je);return lr&&oi.push(lr),oi});var Rr=null!==(f=Yt[ti].labelSettings)&&void 0!==f?f:K,Xr={defaultColor:ri,seriesColor:hi?.fontProperties.color,categoricalDataReader:$t.reader,categoryIndex:Xt,seriesIndex:Kt},nr=(0,Rt.t$)(Xr),sr={dataPointLabelSettings:Rr,defaultLabelSettings:K,categoricalDataReader:$t.reader,categoryIndex:Xt,seriesIndex:Kt,hasHighlights:ea,dynamicLabelsEnabledForSeries:Ki,featureSwitches:$t.options.featureSwitches},Zr=(0,Rt.Xc)((0,d.__assign)((0,d.__assign)({},sr),{dataLabelFillColorOptions:Xr,detailPropertyId:bt.mi.labels.dynamicLabelDetail,titlePropertyId:bt.mi.labels.dynamicLabelTitle})),Qr=(0,Rt.tI)((0,d.__assign)((0,d.__assign)({},sr),{valuePropertyId:bt.mi.labels.dynamicLabelValue}));if(!Cr&&null!==(g=$t.options.featureSwitches)&&void 0!==g&&g.labelEnhancementsM0&&!_.isEmpty(Zr)){var Qi=Zr&&(null===(A=Zr.find(function(or){return"Detail"===or.role}))||void 0===A?void 0:A.dynamicLabel),wn=Qi?.enabled&&null!=Qi?.value;if(wn){var Qn=zt.Ds(V);(0,Rt.hY)(z,Qn,Qr?.enabled,wn,Rr)}Cr=!0}var wr=(0,d.__assign)({categoryValue:Ar,position:Dr,categoryIndex:Xt,seriesIndex:ti,seriesPosition:Kt,labelSettings:Rr,columnStyle:function(){if(a.reader.columns.hasDynamicSeries()||a.reader.columns.hasStaticSeries()||!a.reader.columns.hasCategories()||null==Xt)return Vr.columnStyle;var or=a.reader.colors.createBySeries(Kt,Xt),oi=a.reader.objects.getCategoryDataObjects(Xt);return{fillColor:or,fillTransparency:(0,b.NA)(oi,bt.gE.dataPoint.fillTransparency,a.fillTransparency),border:a.readBorderSettings(oi,a.borderSettings,or)}}(),selected:!1,originalValue:Ti,originalPosition:Dr,labelFill:nr.color,dynamicLabelValue:Qr,value:Kr,valueAbsolute:Oi,indexFromZeroValue:$t.isStacked?ti:0,uncertainty:Zi,identity:Dn,key:Zt,labelFormatString:gi||za.format},$t.options.featureSwitches.labelEnhancementsM0&&{appendedLabelContents:Zr,labelDataPointContainerEnabled:!0});if(null!==(S=Ct[Xt])&&void 0!==S||(Ct[Xt]=Lt(wr,Ni)),Ct[Xt]&&((L=Ct[Xt]).hasData||(L.hasData=null!=wr.value)),ya.push((0,d.__assign)({get tooltipInfo(){return Vi?.getTooltipItems()},get formattedTooltip(){return Vi?.getFormattedTooltipItems()}},wr)),ea){var _n=null!==Fi?Math.abs(Fi):0,gr=Q.l0.createWithHighlight(Dn);ya.push((0,d.__assign)((0,d.__assign)({get tooltipInfo(){return Vi?.getTooltipItems()},get formattedTooltip(){return Vi&&Vi.getFormattedTooltipItems()}},wr),{value:Fi,position:io(Dr,Kr,Fi,Oi,_n),valueAbsolute:_n,uncertainty:fr,highlight:!0,drawThinner:qa,identity:gr,key:gr.getKey(),pairKey:Zt,labelFormatString:Er||za.format}))}},Gr=0;Gr<wt;Gr++)ln(Gr)},$t=this,Si=0;Si<je;Si++)_i(Si);for(var xi=!1,Ya=!1,bi=!1,Li=!1,vr=0,ni=Ut;vr<ni.length;vr++){var xe=ni[vr];xe&&(xi||(xi=xe.positive>0),Ya||(Ya=xe.negative<0),bi||(bi=xe.net>0),Li||(Li=xe.net<0))}return this.hasNetPositive=bi,this.hasNetNegative=Li,{series:Yt,totals:Ut,hasPositive:xi,hasNegative:Ya,hasNetPositive:bi,hasNetNegative:Li,valuesMetadataBySeries:xa,categoryIdentities:Ta,hasHighlights:ea,hasDynamicSeries:$a,multipleIdentity:li,categoryData:Ct}},r.createIdentities=function(e,t,a,i,n,s,o,l,u){var c,h=e.originalCategories||[t],f=Q.dw.builder().withCategory(h,a,null===(c=t?.source)||void 0===c?void 0:c.queryName,!0).withSeries(e.values,i,!0).withMeasure(s.queryName,n,a);o&&(f=f.withColumnIdentity(o.identity,l,u));var g=f.createSelectionId();return{identity:g,identityKey:g.getKey()}},r.prototype.getTotalTooltip=function(e,t,a,i,n,s){var o,l,u,c,h,f;if(this.options.tooltipsEnabled&&this.options.supportsTotalLabels&&this.totalLabelsSettings.show){if(null!==(o=(c=this.existingTooltips)[t])&&void 0!==o||(c[t]={}),this.totalLabelsSettings.showPositiveAndNegative){var g=a?"negative":"positive";return null!==(l=(h=this.existingTooltips[t])[g])&&void 0!==l||(h[g]={displayName:this.displayNames[g],value:(0,Pe.xq)(i[t][g],n[e],s,!1)}),this.existingTooltips[t][g]}return null!==(u=(f=this.existingTooltips[t]).net)&&void 0!==u||(f.net={displayName:this.hasNetPositive&&this.hasNetNegative?this.displayNames.net:this.displayNames.simple,value:(0,Pe.xq)(i[t].net,n[e],s,!1,i[t].dynamicFormatString)}),this.existingTooltips[t].net}},r.prototype.readRibbonSettings=function(e,t){var a=void 0===e,i=a?this.staticObjects:this.reader.objects.getSeriesDataObjects(e),n=a?zt.bS(this.options.style):this.ribbonBandSettings,s=(0,b.W7)(i,bt.gE.ribbonBands.fillColor,n.fillColor),o=(0,b.NA)(i,bt.gE.ribbonBands.fillMatchColor,n.fillMatchColor);return o&&t&&(s=t),{fillColor:s,fillMatchColor:o,fillTransparency:(0,b.NA)(i,bt.gE.ribbonBands.fillTransparency,n.fillTransparency),border:(0,Za.QI)(i,{strokeShow:bt.gE.ribbonBands.borderShow,strokeWidth:bt.gE.ribbonBands.borderSize,strokeColor:bt.gE.ribbonBands.borderColor,strokeColorMatch:bt.gE.ribbonBands.borderColorMatchFill,strokeTransparency:bt.gE.ribbonBands.borderTransparency},n.border,s)}},r.prototype.readBorderSettings=function(e,t,a){var i=(0,Za.QI)(e,{strokeShow:bt.gE.dataPoint.borderShow,strokeWidth:bt.gE.dataPoint.borderSize,strokeColor:bt.gE.dataPoint.borderColor,strokeColorMatch:bt.gE.dataPoint.borderColorMatchFill,strokeTransparency:bt.gE.dataPoint.borderTransparency},t,a);return i.outlineOnly=(0,b.NA)(e,bt.gE.dataPoint.borderOutlineOnly,t?.outlineOnly),i},r.prototype.getLegend=function(){var e,t,a,i,n,h,s=[],o=[],l=[],u=!1,c=null===(e=this.options.dataView)||void 0===e?void 0:e.categorical;if(c?.values){for(var f=this.reader.columns.getSeriesCount(B.x.y),g=0;g<f;g++){var A=this.reader.columns.getValueMetadataColumnBySeries(g),S=this.reader.objects.getSeriesDataObjects(g);o.push(A),l.push(S);var C=null!==(t=this.reader.colors.createBySeries(g))&&void 0!==t?t:this.color;s.push({marker:{show:!0,shape:Ma.ZO.circle,color:C,transparency:(0,b.NA)(S,bt.gE.dataPoint.fillTransparency,this.fillTransparency),stroke:this.readBorderSettings(S,this.borderSettings,C)},label:this.reader.data.hasSeries()?(0,F.WU)(this.reader.data.getSeriesName(g),this.reader.objects.getSeriesFormatString(g)):(0,Pe.TO)(A,c.values,B.p.general.formatString),identity:this.reader.data.hasSeries()?this.reader.identities.createForSeries(g):this.reader.identities.createForValue(0),selected:!1,index:g}),void 0!==A.groupName&&(u=!0)}h=null!==(n=null===(i=null===(a=c.values)||void 0===a?void 0:a.source)||void 0===i?void 0:i.displayName)&&void 0!==n?n:""}return{legendData:(0,m.RS)(this.staticObjects,s,!0,h,u,this.options.style,void 0),seriesSources:o,seriesObjects:l}},r.prototype.getValueBySeriesAndCategory=function(e,t){return this.reader.data.getValue("Y",t,e)},r.prototype.getHighlightBySeriesAndCategory=function(e,t){return this.reader.data.getHighlight("Y",t,e)},r.prototype.getFormatStringBySeriesAndCategory=function(e,t){return this.reader.data.getFormatString("Y",t,e)},r.prototype.getHighlightFormatStringBySeriesAndCategory=function(e,t){return this.reader.data.getHighlightFormatString("Y",t,e)},r.valueRoleName=B.x.y,r}();function io(r,e,t,a,i){return t>0?r-(a-i):(null===t||0===t)&&e>0?r-a:r}function Ss(r,e,t){for(var a=[],i=0;i<r;i++){for(var n=0,s=0,o=0;o<e;o++){var l=(0,I.eT)(t(o,i));l>0?n+=l:s-=l}var u=s+n;a[i]={pos:n?n/u/n:1,neg:s?s/u/s:1}}return a}var xs=x(84741),Mr=x(3665),Tr=x(23465),Ka=x(57622),$n=x(61617),gn=x(33024),bs=x(16122),pn=x(96915),qn=x(91059),so=0,oo=25;function lo(r){return{type:4,card:[co.call(this,r.categoryAxisData),uo.call(this,r.categoryAxisData),ho.call(this),vo.call(this),fo.call(this)].filter(function(e){return e})}}function Cs(r,e,t,a){var i=this,n=this.originalData;if(n&&this.dataView){var s=n.series.length,o=this.isClustered&&s>1,l=bt.gE.layout;r.addGroup("layout",function(u){u.withDisplayName("Layout"),a?u.withDisabled(a,"perCategory"===t?"Visual_DisabledReason_AllCategoriesOnly_Plural":"Visual_DisabledReason_AllSeriesOnly_Plural"):u.addSimpleSlice("seriesOrderReversed",new ge.bd({descriptor:l.seriesOrderReversed,value:n.layout.seriesOrderReversed}).build(),function(c){return c.withDisabled(s<2,"Visual_DisabledReason_MultiSeriesOnly_Singular")}).addSimpleSlice("seriesOrderSorted",new ge.bd({descriptor:l.seriesOrderSorted,value:n.layout.seriesOrderSorted}).build(),function(c){return c.withDisabled(s<2,"Visual_DisabledReason_MultiSeriesOnly_Singular")}).addSimpleSlice("innerPadding",(0,pa.Gf)(e,i.localizer)).addSimpleSlice("stackedGapSize",new ge.JN({descriptor:l.stackedGapSize,value:n.layout.stackedGapSize,options:{minValue:{type:0,value:zt.fX},maxValue:{type:1,value:n.layout.stackedGapExplodes?zt._f:zt.nD},unitSymbol:n.layout.stackedGapExplodes?gn.t2:gn.e_},localize:i.localizer}).build(),function(c){return c.withHidden(i.isClustered).withDisabled(s<2,"Visual_DisabledReason_MultiSeriesOnly_Singular")}).addSimpleSlice("stackedGapExplodes",new ge.bd({descriptor:l.stackedGapExplodes,value:n.layout.stackedGapExplodes}).build(),function(c){return c.withHidden(!i.supportsStackedGapExplode()).withCustomDescription("Visual_Spacing_Explode_Description_".concat(i.isColumn?"Columns":"Bars"))}).addSimpleSlice("clusteredGapSize",new ge.JN({descriptor:l.clusteredGapSize,value:n.layout.clusteredGapSize,options:{minValue:{type:0,value:0},maxValue:{type:1,value:n.layout.clusteredGapOverlaps?zt.jL:zt.E5},unitSymbol:gn.t2},localize:i.localizer}).build(),function(c){return c.withHidden(!o)}).addSimpleSlice("clusteredGapOverlaps",new ge.bd({descriptor:l.clusteredGapOverlaps,value:n.layout.clusteredGapOverlaps}).build(),function(c){return c.withHidden(!o)}).addSimpleSlice("clusteredGapOverlapReverse",new ge.bd({descriptor:l.clusteredGapOverlapReverse,value:n.layout.clusteredGapOverlapReverse}).build(),function(c){return c.withHidden(!o).withDisabled(!n.layout.clusteredGapOverlaps)})}).build()}}function uo(){var r=this;if(this.dataView&&!this.isClustered&&!this.isComboChart){var e=this.originalData;if(e&&0!==e.series.length){var a=bt.gE.ribbonBands,i=new ge.CQ(new ge.lg("ribbonChart"),"RibbonChart",[a.show,a.fillMatchColor,a.fillColor,a.fillTransparency,a.borderShow,a.borderColor,a.borderColorMatchFill,a.borderTransparency,a.borderSize,bt.gE.layout.ribbonGapSize],this.localizer),n=function(o,l){o.addGroup("layout",function(u){u.withDisplayName("Layout"),l?u.withDisabled(!0,"Visual_DisabledReason_AllSeriesOnly_Plural"):u.addSimpleSlice("ribbonGapSize",new ge.JN({descriptor:bt.gE.layout.ribbonGapSize,value:e.layout.ribbonGapSize,options:{minValue:{type:0,value:so},maxValue:{type:1,value:oo},unitSymbol:gn.t2},localize:r.localizer}).build())})};return i.withDescription("RibbonChart_Description").addTopLevelToggle("show",function(){var s;return new ge.bd({descriptor:a.show,value:null===(s=e.ribbonBands)||void 0===s?void 0:s.show}).build()}),this.hasRibbonBands&&e.ribbonBands&&i.addGroup("applySettingsTo",function(s){s.withContainerDisabled(!1).withDisplayName("Apply_Settings_To").withCollapsible(!1),s.addContainer("series",function(o){o.withDisplayName("Series"),o.addContainerItem("all",r.localizer("All"),function(f){var g={containerBuilder:f,props:a,selector:null,panelGroupType:"allSeries"};Fn.call(r,g,e.ribbonBands),Vn.call(r,g,e.ribbonBands.border,"Visual_MatchRibbonColor",!0),n(f)});for(var l=function(g){w.fF.assert(function(){return null!=g.ribbonBands},"series must have ribbonBands for ribbon charts"),o.addContainerItem(g.displayName,g.displayName,function(A){var S={containerBuilder:A,props:a,selector:(0,Ie.fd)(g.identity.getSelector()),panelGroupType:"perSeries"};Fn.call(r,S,g.ribbonBands),Vn.call(r,S,g.ribbonBands.border,"Visual_MatchRibbonColor",!0),n(A,!0)})},u=0,c=e.series;u<c.length;u++)l(c[u])})}),i.build()}}}function co(r){var e=this,t=this.originalData;if(t&&this.dataView){var a=t.series.length;if(0!==a){var i=bt.gE.dataPoint,n=bt.gE.layout;return new ge.CQ(new ge.lg("bars"),this.isColumn?"Role_DisplayName_Columns":"Visual_Bars_Title",[i.fill,i.fillTransparency,i.borderShow,i.borderColor,i.borderColorMatchFill,i.borderTransparency,i.borderSize,i.borderOutlineOnly,n.seriesOrderReversed,n.seriesOrderSorted,n.stackedGapSize,n.stackedGapExplodes,n.clusteredGapSize,n.clusteredGapOverlaps,n.clusteredGapOverlapReverse,B.p.categoryAxis.innerPadding],this.localizer).addGroup("applySettingsTo",function(s){return s.withContainerDisabled(!1).withDisplayName("Apply_Settings_To").withCollapsible(!1).addContainer("series",function(o){o.withDisplayName(a>1?"Series":"Visual_Categories");var l=e.isColumn?"Visual_MatchColumnColor":"Visual_MatchBarColor";o.addContainerItem("all",e.localizer("All"),function(P){var V={containerBuilder:P,props:i,selector:null,panelGroupType:1===t.series.length?"allCategories":"allSeries"};Fn.call(e,V,e.data.columnStyle),Vn.call(e,V,t.columnStyle.border,l),Cs.call(e,P,r,V.panelGroupType,!1)});var u=t.series,c="perSeries";if(1===u.length){var h=t.series[0],f=h.data.slice(0,pa.Rl);if(f.length<2)return;var g=ra(f,t);u=_.map(f,function(P,V){var k,z;return(0,d.__assign)((0,d.__assign)({},h),{identity:(null===(z=null===(k=t.categoryIdentities)||void 0===k?void 0:k[P.categoryIndex])||void 0===z?void 0:z.call(k))||P.identity,columnStyle:P.columnStyle,displayName:g[V]})}),c="perCategory"}for(var A=function(V){o.addContainerItem(V.displayName,V.displayName,function(k){var z=(0,Ie.fd)(V.identity.getSelector());if(z){"perCategory"===c&&t.multipleIdentity&&(z=(0,Ie.d9)(z),w.fF.assert(function(){return!!z.data},"expect categories to have some data identity"),z.data.unshift((0,qn.Yp)([bt.au.rows])));var J={containerBuilder:k,props:i,selector:z,panelGroupType:c};Fn.call(e,J,V.columnStyle),Vn.call(e,J,V.columnStyle.border,l),Cs.call(e,k,r,c,!0)}})},S=0,C=u;S<C.length;S++)A(C[S])})}).build()}}}function Fn(r,e){var t=this,i=r.props,n=r.selector,s=r.panelGroupType,o=null==e.fillMatchColor||null==i.fillMatchColor,l="allCategories"===s&&o,u="allSeries"===s&&o;r.containerBuilder.addGroup("colors",function(c){return c.withDisplayName("Generic_Color").addSimpleSlice("fillMatchColor",new ge.bd({descriptor:(0,d.__assign)((0,d.__assign)({},i.fillMatchColor),{selector:n}),value:e.fillMatchColor}).build(),function(h){return h.withHidden(o)}).addSimpleSlice("fillColor",new ge.BT({descriptor:(0,d.__assign)((0,d.__assign)((0,d.__assign)((0,d.__assign)({},i.fill||i.fillColor),{selector:(0,d.__assign)((0,d.__assign)({},n),l&&{data:[(0,pn.Ue)(1)]})}),l&&{altConstantValueSelector:null}),{instanceKind:l?3:1}),value:{value:e.fillColor}}).build(),function(h){return h.withDisabled(u||e.fillMatchColor,u?"Visual_Color_AllSeries_DisabledReason":"")}).addSimpleSlice("fillTransparency",ge.JN.getTransparencySliderBuilder({descriptor:(0,d.__assign)((0,d.__assign)({},i.fillTransparency),{selector:n}),value:e.fillTransparency,localize:t.localizer}).build())})}function Vn(r,e,t,a){var i=this,s=r.props,o=r.selector;void 0===a&&(a=!1),r.containerBuilder.addGroup("border",function(l){l.withDisplayName("Visual_Border").addSlices((0,Za.Iq)({containerItemBuilder:l,descriptors:{strokeShow:s.borderShow,strokeColorMatch:s.borderColorMatchFill,strokeColor:s.borderColor,strokeTransparency:s.borderTransparency,strokeWidth:s.borderSize},selector:o,strokeData:e,featureSwitches:i.featureSwitches,localize:i.localizer}).map(function(u){return(0,$n.cd)(u.getSimpleControlDescriptor(),s.borderColorMatchFill)&&u.withCustomDisplayName(t),u.build()})),a||l.addSimpleSlice("borderOutlineOnly",new ge.bd({descriptor:(0,d.__assign)((0,d.__assign)({},s.borderOutlineOnly),{selector:o}),value:e.outlineOnly}).build(),function(u){var c;return u.withHidden(i.isClustered||null!==o).withDisabled((null===(c=i.originalData)||void 0===c?void 0:c.layout.stackedGapSize)>0,"Visual_Border_OutlineOnly_DisabledReason")})}).build()}function ho(){var e,r=this,t=this.originalData,a=t.dataLabelsSettings,i=t.series.length,n=i>1||!t.categoryMetadata||this.isComboChart,s=t.dataLabelsSettings.position!==ka.h.outsideEnd,o=zt.e3(this.columnChartType,i);a.position&&o.indexOf(a.position)<0&&(a.position=ka.h.auto);var l=(0,d.__assign)((0,d.__assign)({},bt.mi.labels),{position:bt.mi.labels.labelPosition,precision:bt.mi.labels.labelPrecision,displayUnits:bt.mi.labels.labelDisplayUnits,labelBackgroundColor:bt.mi.labels.backgroundColor,labelBackgroundTransparency:bt.mi.labels.backgroundTransparency,showDynamicLabels:bt.mi.labels.showDynamicLabels,dynamicLabelValue:bt.mi.labels.dynamicLabelValue});this.isColumn||delete l.labelOrientation;var A,u=new ge.CQ(new ge.lg("labels"),"Visual_DataPointsLabels",l,this.localizer),c=(0,Rt.DU)(this.featureSwitches,t.hasDynamicSeries,n,i,this.isComboChart,!0),h=As.call(this,void 0,a,null,n,o,s,c),f=rn.call(this,!1),g={cardBuilder:u,dataLabelsProps:l,featureSwitches:this.featureSwitches,includeAltConstantValueSelector:!0,hostServices:this.hostService,options:h,individualSelector:f,showEnhancedLabelsFormattingOptions:!0,instanceId:"all"};if(null!==(e=this.featureSwitches)&&void 0!==e&&e.labelEnhancementsM0&&this.dataView){var S=(A=(0,ca.y)(this.dataView)).labels.dynamicLabelReader.getLabelFieldSourceTypes();Object.assign(g,{valueFieldSourceType:S.valueFieldSourceType,detailFieldSourceType:S.detailFieldSourceType,titleFieldSourceType:S.titleFieldSourceType,valueLabelPickerFallbackExpr:(0,Rt.WA)(t.valuesMetadataBySeries,i,t.hasDynamicSeries),dataLabelPickerSeriesType:(0,Rt.Nb)(i,t.hasDynamicSeries,this.isComboChart)})}return l.show&&u.addTopLevelToggle("show",function(){return new ge.bd({descriptor:l.show,value:h.dataLabelsSettings.show}).build()}),u.addGroup("applySettingsTo",function(V){V.withDisplayName("Apply_Settings_To").withCollapsible(!1).addContainer("series",function(k){var z,J;if(k.withDisplayName("Series"),k.addContainerItem("all",r.localizer("All"),function(je){return(0,N.WW)(g,je)}),n)for(var fe=0;fe<i;fe++){var G=t.series[fe],K=G.labelSettings?G.labelSettings:t.dataLabelsSettings;K.position&&o.indexOf(K.position)<0&&(K.position=ka.h.auto);var ie=G.identity.getSelector();if(Object.assign(g,{includeAltConstantValueSelector:!1,selector:t.hasDynamicSeries?(0,Ie.fd)(ie):ie,individualSelector:rn.call(r,!0),options:As.call(r,void 0,K,ie,void 0,o,s,t.hasDynamicSeries),displayDisabledSlices:(z={},z.labelOverflow=!0,z),instanceId:"sn-".concat(fe)}),null!==(J=r.featureSwitches)&&void 0!==J&&J.labelEnhancementsM0){var Oe=A?A.labels.dynamicLabelReader.getLabelFieldSourceTypes(fe):null;Object.assign(g,(0,d.__assign)((0,d.__assign)({},Oe?{valueFieldSourceType:Oe.valueFieldSourceType,detailFieldSourceType:Oe.detailFieldSourceType,titleFieldSourceType:Oe.titleFieldSourceType}:{}),{valueLabelPickerFallbackExpr:(0,Rt.CH)(t.valuesMetadataBySeries,fe),dataLabelPickerSeriesType:(0,Rt.aC)(i,t.hasDynamicSeries,r.isComboChart)}))}k.addContainerItem(G.displayName,G.displayName,function(je){return(0,N.WW)(g,je)})}})}),u.build()}function rn(r){return(0,N.WD)({featureSwitches:this.featureSwitches,hasCategories:null!=_.first(this.originalData.categories),hasDynamicSeries:this.originalData.hasDynamicSeries,hasSeriesSelector:r})}function vo(){var r,t=this.originalData.totalLabelsSettings;if(t&&!this.isClustered&&!this.isStacked100){var a=(0,d.__assign)((0,d.__assign)({},bt.mi.totals),{precision:bt.mi.totals.labelPrecision,displayUnits:bt.mi.totals.labelDisplayUnits}),i=new ge.CQ(new ge.lg("totals"),"Visual_DataTotalLabels",a,this.localizer);if(!this.supportsTotalLabels()){var n=!(null===(r=this.data)||void 0===r||!r.multipleIdentity);return i.withDisabled(!0,n?"Visual_Totals_DisabledReason_SmallMultiples":"Visual_Totals_DisabledReason"),i.addTopLevelToggle("show",function(){return new ge.bd({descriptor:a.show,value:!1}).build()}),i.build()}return(0,N.XQ)({cardBuilder:i,dataLabelsProps:a,featureSwitches:this.featureSwitches,hostServices:this.hostService,options:go.call(this,void 0,t),individualSelector:rn.call(this,!1),showEnhancedLabelsFormattingOptions:!1,instanceId:"all"})}}function fo(){var r=this;if(!this.isStacked){var e=this.originalData;if(e&&e.series&&0!==e.series.length)return new ge.CQ(new ge.lg("errorBars"),"Visual_Error_Bars",la.Qx,this.localizer,!0,!0).addGroup("applySettingsTo",function(t){return t.withDisplayName("Apply_Settings_To").withCollapsible(!1).addContainer("measure",function(a){a.withDisplayName("Series");for(var i=function(u){var c=_.first(u.usedInSeriesIndices);if(w.fF.assertValue(c,"lineChart - measure is not associated with any series"),null!=c&&null!==e.series[c]){var h=u.valueSelector.getSelector();a.addContainerItem(u.metadataColumn.queryName,u.metadataColumn.displayName,function(f){return(0,bs.f)({localize:r.localizer,uncertainty:e.series[c].uncertainty,targetMeasure:u.metadataColumn.expr,measureSelector:h,dataPointSelector:(0,d.__assign)((0,d.__assign)({},h),{data:[(0,pn.Ue)()],highlightMatching:1}),featureSwitches:r.featureSwitches,uncertaintyOptions:{isCombo:r.isComboChart,hideBand:!0}},f)})}},n=0,s=e.valuesMetadataBySeries;n<s.length;n++)i(s[n])})}).build()}}function As(r,e,t,a,i,n,s){var o,l=!!t;return{enumeration:r,dataLabelsSettings:e,show:!0,position:!_.isEmpty(i),positionObject:i,labelOrientation:!this.isBar&&!l,displayUnits:!this.isStacked100,precision:!0,selector:t,showAll:a,fontSize:!0,fontFamily:!0,labelDensity:null===(o=this.data)||void 0===o?void 0:o.isScalar,labelOverflow:!l&&n,enableBackground:e.enableBackground,backgroundColor:e.backgroundColor,backgroundTransparency:e.backgroundTransparency,style:this.style,bold:!0,italic:!0,underline:!0,enableDynamicLabelPickers:!s,isStacked100:this.isStacked100}}function go(r,e){return{enumeration:r,dataLabelsSettings:e,show:!0,displayUnits:!0,precision:!0,fontSize:!0,fontFamily:!0,showPositiveAndNegative:!0,enableBackground:e.enableBackground,backgroundColor:e.backgroundColor,backgroundTransparency:e.backgroundTransparency,style:this.style,bold:!0,italic:!0,underline:!0}}function po(r){var a,i,t=_.first(r).visualObjects;if(t.length>0){a=t[0],a?.selectorsByColumn&&(i=(0,Ie.fd)((0,Ie.tV)(a.selectorsByColumn)));var n=1===this.data.series.length;switch(a.objectName){case"columns":return n&&this.data.categoryMetadata&&!this.data.hasDynamicSeries&&(i={data:[(0,pn.Ue)(1)]}),(0,ae.w3)(this.hostService,(0,d.__assign)((0,d.__assign)({},bt.gE.dataPoint.borderColor),{selector:i}),(0,d.__assign)((0,d.__assign)({},bt.gE.dataPoint.fill),{selector:i}),this.hostService.getLocalizedString("Visual_Border"));case"ribbon":return n&&this.data.categoryMetadata&&!this.data.hasDynamicSeries&&(i={data:[(0,pn.Ue)(1)]}),(0,ae.w3)(this.hostService,(0,d.__assign)((0,d.__assign)({},bt.gE.ribbonBands.borderColor),{selector:i}),(0,d.__assign)((0,d.__assign)({},bt.gE.ribbonBands.fillColor),{selector:i}),this.hostService.getLocalizedString("Visual_Border"));case"data-labels":var s=this.data.series.find(function(h){var f;return(0,Ie.Ic)(null===(f=h?.identity)||void 0===f?void 0:f.getSelectorsByColumn(),a.selectorsByColumn)});if(!s)return;var o=bt.mi.labels,l=n?void 0:i,u={fontFamilyReference:(0,d.__assign)((0,d.__assign)({},o.fontFamily),{selector:l}),fontSizeReference:(0,d.__assign)((0,d.__assign)({},o.fontSize),{selector:l}),boldReference:(0,d.__assign)((0,d.__assign)({},o.bold),{selector:l}),italicReference:(0,d.__assign)((0,d.__assign)({},o.italic),{selector:l}),underlineReference:(0,d.__assign)((0,d.__assign)({},o.underline),{selector:l}),fontColorReference:(0,d.__assign)((0,d.__assign)({},o.color),{selector:l}),displayUnitsReference:(0,d.__assign)((0,d.__assign)({},o.labelDisplayUnits),{selector:l}),precisionReference:(0,d.__assign)((0,d.__assign)({},o.labelPrecision),{selector:l}),backgroundReference:(0,d.__assign)((0,d.__assign)({},o.backgroundColor),{selector:l})};return(0,ae.Jf)({hostServices:this.hostService,omitSelectorForSingleSeries:n,individualSelector:rn.call(this,!n),selector:i,repetitionSelector:void 0,subSelectionStylesOptions:{precision:{defaultPrecision:this.getLabelUnitsAndPrecision().getPrecision(!1,s.type)}}},u);case"total-labels":var c=bt.mi.totals;return(0,ae.Jf)({hostServices:this.hostService,omitSelectorForSingleSeries:n,individualSelector:rn.call(this,!n),selector:i,repetitionSelector:void 0},{fontFamilyReference:c.fontFamily,fontSizeReference:c.fontSize,boldReference:c.bold,italicReference:c.italic,underlineReference:c.underline,fontColorReference:(0,d.__assign)((0,d.__assign)({},c.color),{selector:(0,Rt.hm)(rn.call(this,!1),void 0,void 0)}),displayUnitsReference:c.labelDisplayUnits,precisionReference:c.labelPrecision,backgroundReference:c.backgroundColor});default:return}}}function yo(r,e){if(!e){var i,a=_.first(r).visualObjects;if(!(a.length>0))return;i=a[0];var s,n=!this.showLabelPerSeries();!n&&!_.isEmpty(i.selectorsByColumn)&&(s=(0,Ie.fd)((0,Ie.tV)(i.selectorsByColumn)));var o=n?bt.mi.labels.show:bt.mi.labels.showSeries;switch(i.objectName){case"columns":case"ribbon":var l="ribbon"===i.objectName,u=(0,d.__assign)({},l?bt.gE.ribbonBands.fillColor:bt.gE.dataPoint.fill),c=[{type:1,destinationInfo:(0,d.__assign)((0,d.__assign)({},u),{selector:this.data.series.length>1?s:void 0}),label:this.localizer(l?"Format_Ribbon":this.isBar?"Format_Bars":"Format_Columns")}];return this.supportsTotalLabels()&&c.unshift((0,d.__assign)((0,d.__assign)({type:2},bt.mi.totals.show),{enabledLabel:this.localizer("Format_AddTotalLabels")})),c.unshift({type:0,excludedResetFormattingIds:[bt.mi.totals.show,(0,d.__assign)((0,d.__assign)({},o),{selector:s})]},(0,d.__assign)((0,d.__assign)({type:2},o),{enabledLabel:this.localizer("Format_AddDataLabels"),selector:s})),c;default:return}}}function mo(r){switch(d3.select(r).attr(Be.Ez)){case"columns":var t=d3.select(r).datum();return Ds.call(this,t.seriesIndex);case"ribbon":return t=d3.select(r).datum(),Ds.call(this,t.d1.seriesIndex);case"data-labels":case"series-labels":var i=(0,Rt.wT)(r,this.data.series);if(i)return i;default:return}}function Ds(r){var e,t=this.data.series;if(!_.isEmpty(t)&&r>=0){var a=t[r];return null===(e=a?.identity)||void 0===e?void 0:e.getSelectorsByColumn()}}function So(r,e){var t=[];if(this.featureSwitches.onObject&&1===e){var a=this.isComboChart?xs.OA:bt.mi,i=this.data.series.map(function(s){var o;return{selector:s.identity.getSelector(),value:null===(o=s.labelSettings)||void 0===o?void 0:o.show}}),n=[Mr.v.create(a.labels.backgroundColor,this.data.dataLabelsSettings.enableBackground).onToggleEnabled(Ka.W.createBooleanDataViewObjectChange(a.labels.enableBackground,!0,{inheritSelector:!0})),Tr.$.create(a.labels.backgroundColor,this.data.dataLabelsSettings.enableBackground).onToggleEnabled(Ka.W.createBooleanDataViewObjectChange(a.labels.enableBackground,!0)),Mr.v.create(a.labels.showSeries,this.data.dataLabelsSettings.show,i).onToggleEnabled(Ka.W.createBooleanDataViewObjectChange(a.labels.showByDefault,!1),Ka.W.createBooleanDataViewObjectChange(a.labels.show,!0)).onToggleDisabled(Ka.W.createRevertToDefaultDataViewObjectChange("labels")),Tr.$.create(a.labels.show,this.data.dataLabelsSettings.show).onToggleDisabled(Ka.W.createRevertToDefaultDataViewObjectChange("labels")),Tr.$.create(a.totals.backgroundColor,this.data.totalLabelsSettings.enableBackground).onToggleEnabled(Ka.W.createBooleanDataViewObjectChange(a.totals.enableBackground,!0)).onToggleDisabled(Ka.W.createRevertToDefaultDataViewObjectChange("totals")),Mr.v.create(bt.gE.dataPoint.borderColor,this.data.columnStyle.border.strokeShow).onToggleEnabled(Ka.W.createBooleanDataViewObjectChange(bt.gE.dataPoint.borderShow,!0,{inheritSelector:!0,required:!0}))];t=(0,d.__spreadArray)((0,d.__spreadArray)([],t,!0),Wt.o.getDataViewObjectsBehaviorChanges(r,n),!0)}return t}var zr=x(3406),xo=function(r){function e(t){var a=r.call(this,t)||this;return a.options=t,w.fF.assertValue(t.columnChartType,"columnChartType"),a}return(0,d.__extends)(e,r),Object.defineProperty(e.prototype,"columnChartType",{get:function(){return this.options.columnChartType},enumerable:!1,configurable:!0}),e.prototype.initRenderer=function(t){r.prototype.initRenderer.call(this,t),this.svg.classed(e.ClassName,!0),this.unclippedGraphicsContext=this.svg.append("g").classed("columnChartUnclippedGraphicsContext",!0),this.mainGraphicsContext=this.unclippedGraphicsContext.append("svg").classed("mainGraphicsContext",!0),this.useManagedTabIndex=t.useManagedTabIndex,this.interactivityService&&(this.mainGraphicsContext.attrs({"aria-label":this.localizer("Visual_Plot"),"data-automation-type":"mainGraphicsContext",role:"group"}).classed(Da.Pg,!kt.M.isInternetExplorerOrEdge()),t.useManagedTabIndex?(this.mainGraphicsContext.classed(Ra.rG.class,!0),this.mainGraphicsContext.attr(Ia.Rh,!0)):this.mainGraphicsContext.attrs({tabindex:0,focusable:!0}))},Object.defineProperty(e.prototype,"isBar",{get:function(){return zt.hg(this.columnChartType)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isColumn",{get:function(){return zt.t3(this.columnChartType)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isStacked",{get:function(){var a;return zt.C3(this.columnChartType,null===(a=this.data)||void 0===a?void 0:a.series.length)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isStacked100",{get:function(){return zt.Ds(this.columnChartType)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isClustered",{get:function(){return zt.V5(this.columnChartType)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasRibbonBands",{get:function(){var a;return(null===(a=this.data.ribbonBands)||void 0===a?void 0:a.show)&&!this.isComboChart},enumerable:!1,configurable:!0}),e.prototype.isYCategorical=function(){return this.isBar},e.sliceSeries=function(t,a,i){void 0===i&&(i=0);var n=[];if(t&&t.length>0)for(var s=0,o=t.length;s<o;s++)n[s]=(0,me.ED)(t[s]),n[s].data=t[s].data.filter(function(l){return l.categoryIndex>=i&&l.categoryIndex<a});return n},e.getInteractiveColumnChartDomElement=function(t){return t.children("svg").get(0)},e.prototype.setData=function(t,a){w.fF.assertValue(t,"dataViews");var n=zt.L2(this.style,this.isStacked100);if(this.data=this.originalData={categories:[],categoryFormatter:null,series:[],totals:[],valuesMetadata:[],categoryData:[],legendData:null,hasHighlights:!1,categoryMetadata:null,isScalar:!1,dataLabelsSettings:n,titleDataLabelsSettings:n,detailDataLabelsSettings:n,seriesLabelSettings:pt(this.style),hasDynamicSeries:!1,columnStyle:{fillColor:void 0,fillTransparency:zt.fl,border:zt.nO(this.style)},layout:zt.HQ,ribbonBands:(0,d.__assign)({show:!1},zt.bS(this.style))},t.length>0){var s=this.dataView=t[0];if(s&&s.categorical){var o=s.categorical.categories,u=D.getCategoryValueType(o&&o.length>0?o[0].source:null),c=(0,aa.n$)(s),h=(0,re.PX)(s.metadata?s.metadata.objects:null,B.p.categoryAxis.axisType,u,void 0,c);this.converter=ao.create({dataView:s,style:this.style,isScalar:h,multipleInfo:a,chartType:this.columnChartType,interactivityService:this.interactivityService,tooltipsEnabled:this.tooltipsEnabled,hostServices:this.hostService,isComboChart:this.isComboChart,supportsTotalLabels:!a&&this.supportsTotalLabels(),featureSwitches:this.featureSwitches}),this.data=this.originalData=this.converter.convert()}}},e.prototype.hasLegend=function(){return this.data&&(this.data.hasDynamicSeries||this.data.series&&this.data.series.length>1)},e.prototype.getSeriesLabelsSettings=function(){return(0,me.ED)(this.data).seriesLabelSettings},e.prototype.getFormattingCards=function(t){return lo.call(this,t)},e.prototype.getSubSelectionStyles=function(t){return po.call(this,t)},e.prototype.getSubSelectionShortcuts=function(t,a){return yo.call(this,t,a)},e.prototype.getSelectorsByColumnFromSubselectedElement=function(t){return mo.call(this,t)},e.prototype.getDataViewObjectLayerChanges=function(t,a){return So.call(this,t,a)},e.prototype.showSeriesCard=function(){return!(this.isComboChart&&!this.data.hasY2Role)},e.prototype.showLabelPerSeries=function(){var t=this.originalData;return t.series.length>1||!t.categoryMetadata||this.isComboChart},e.prototype.calculateAxesProperties=function(t){var a,i,n,s,o,l,u,c,h;this.updateCurrentViewport(t);var f=null!==(n=null===(i=null===(a=this.data)||void 0===a?void 0:a.categories)||void 0===i?void 0:i.length)&&void 0!==n?n:0,g=this.data?(0,p.is)({data:this.data,availableWidth:Math.max(0,this.isBar?this.availableHeight:this.availableWidth),categoryCount:f,preferredCategoryWidth:null!==(o=null===(s=this.data)||void 0===s?void 0:s.preferredCategoryWidth)&&void 0!==o?o:null,domain:null===(u=D.createDomain(this.data.series,D.getCategoryValueType(null===(l=this.data)||void 0===l?void 0:l.categoryMetadata),this.getVisualCategoryAxisIsScalar(),[t.categoryAxisOptions.includeDomain]))||void 0===u?void 0:u.domain,isScalar:this.getVisualCategoryAxisIsScalar(),cartesianOptions:this.options,trimOrdinalDataOnOverflow:t.trimOrdinalDataOnOverflow,outerPaddingRatio:t.outerPaddingRatio,innerPaddingRatio:t.innerPaddingRatio,axisZoom:t.axisZoom}):(0,p.u8)(),A=this.adjustLayoutForScroll(this.data,f,t.trimOrdinalDataOnOverflow,g);this.updateCategoryLayout(g);var S=this.createCategoryAxis(t),C=this.createValueAxis(t),L=(null===(c=A.totalLabelsSettings)||void 0===c?void 0:c.show)&&this.supportsTotalLabels(),P=(null===(h=A.dataLabelsSettings)||void 0===h?void 0:h.show)&&this.isClusteredOptimized;if(L||P){var V=D.mergeScalarAxisDomains(D.createScalarDomainOptions(this.adjustDomainForLabels(C),0,[!0,!0]),t.valueAxisOptions.includeDomain,D.createScalarDomainOptions(C.scale.domain(),0));C=this.createValueAxis(t,V,!0)}return[this.isBar?C:S,this.isBar?S:C]},e.prototype.setAxesLayout=function(t){var a,i,n;this.updateCurrentViewport(t.layout),this.xAxisProperties=t.layout.axes.x,this.yAxisProperties=t.layout.axes.y1;var s=this.data?{categoryCount:_.isEmpty(this.categoryAxis.categoryIdentities)?0:this.categoryAxis.categoryIdentities.length,categoryThickness:this.categoryAxis.categoryThickness,outerPaddingRatio:this.categoryAxis.outerPaddingRatio,innerPaddingRatio:this.categoryAxis.innerPaddingRatio,isScalar:this.getVisualCategoryAxisIsScalar()}:(0,p.u8)();this.data=this.adjustLayoutForScroll(this.data,null!==(n=null===(i=null===(a=this.data)||void 0===a?void 0:a.categories)||void 0===i?void 0:i.length)&&void 0!==n?n:0,t.trimOrdinalDataOnOverflow,s),this.updateCategoryLayout(s)},e.prototype.getAxesDomains=function(t,a){var i,n,s={};if(!this.data)return s;if(a.categoryAxis&&this.data.isScalar){var o=D.createDomain(this.data.series,null!==(n=null===(i=this.data.categoryMetadata)||void 0===i?void 0:i.type)&&void 0!==n?n:T.Ge.fromDescriptor({text:!0}),this.data.isScalar,void 0);o&&(D.assertScalarDomain(o.domain),s.categoryAxis=[o.domain[0],o.domain[1]])}if(a.valueAxis){var l=void 0;if(this.isStacked){var u=zt.VY(this.data.series,this.isStacked100);l=[u.min,u.max]}else l=D.createUncertaintyAwareValueDomain(this.data.series,t)||D.emptyDomain;var c=l[0],h=l[1];void 0!==c&&void 0!==h&&(s.valueAxis=[c,h])}return s},e.prototype.updateCategoryLayout=function(t){var a;a=this.getPreferredPlotArea(t),this.height=a.height,this.width=a.width,this.categoryLayout=t,this.applyInteractivity(),this.categoryBandScale=d3.scaleBand().range([0,this.categoryWidth]),this.isClusteredOptimized?(this.activeData.layout.clusteredGapSize&&(this.activeData.layout.clusteredGapOverlaps?this.categoryBandScale=d3.scaleBand().range([0,this.categoryWidth*(1-this.activeData.layout.clusteredGapSize/100)]):this.categoryBandScale.paddingInner(this.activeData.layout.clusteredGapSize/100)),this.categoryBandScale.domain(this.activeData.series.map(function(i){return i.index.toString()}))):this.categoryBandScale.domain(["0"])},e.prototype.adjustLayoutForScroll=function(t,a,i,n){if(this.clippedData=void 0,t&&!n.isScalar&&!this.options.isScrollable&&i){var s=Math.min(a,n.categoryCount);if(s!==a){var o=(0,me.ED)(t);o.series=e.sliceSeries(o.series,s),o.categories=o.categories.slice(0,s),o.categoryIdentities&&(o.categoryIdentities=o.categoryIdentities.slice(0,s)),this.clippedData=o}}return t},e.prototype.getLabelUnitsAndPrecision=function(){return(0,it.d6)(this.xAxisProperties,this.data.dataLabelsSettings)},e.prototype.adjustDomainForLabels=function(t){var a=this.activeData,i=t.dataDomain;if(i&&null!=i[0]&&null!=i[1]){var n=i[0].toString(),s=i[1].toString(),o="";a.series.length>0&&a.series[0].data.length>0&&(o=a.series[0].data[0].labelFormatString);var l=(0,N.fI)(),u=(0,it.d6)(t,a.totalLabelsSettings),c=l.getOrCreate(o,a.totalLabelsSettings,u.units,a.totalLabelsSettings.precision),h=(0,it.Bw)(c.format(n)),f=(0,it.Bw)(c.format(s)),g=(0,j.qk)(a.totalLabelsSettings.fontProperties,h),A=(0,j.qk)(a.totalLabelsSettings.fontProperties,f),S=void 0,C=void 0,L=void 0;this.isBar?(S=Z.b.measureSvgTextWidth(g),C=Z.b.measureSvgTextWidth(A),L=t.invertAxis?-1:1):(S=Z.b.estimateSvgTextHeight(g),C=Z.b.estimateSvgTextHeight(A),L=t.invertAxis?1:-1);var P=t.scale,V=P(i[0])-L*(S+O.FJ),k=P(i[1])+L*(C+O.FJ),z=!1,J=!1;return a.totalLabelsSettings.showPositiveAndNegative?(z=a.hasPositive,J=a.hasNegative):(z=a.hasNetPositive,J=a.hasNetNegative),[J?P.invert(V):void 0,z?P.invert(k):void 0]}},e.prototype.isMobileInteractiveLegend=function(){return this.mobileTileInteractive&&!(this.data&&this.data.multipleIdentity)},e.prototype.getClosestColumnIndex=function(t){for(var a=0,i=Number.MAX_VALUE,n=this.getGlyphCenters(),s=0;s<n.length;s++){var o=Math.abs(t-n[s]);o<i&&(i=o,a=s)}return a},e.prototype.applyInteractivity=function(){var t=this;if(this.isMobileInteractiveLegend()){var a=function(){var o=d3.mouse(t.mainGraphicsContext.node()),c=t.getClosestColumnIndex(t.isColumn?o[0]:o[1]);t.selectColumn(c)},i=e.getInteractiveColumnChartDomElement(this.element);this.svg.on("click",a),d3.select(i).on("click",a).style("touch-action","none");var n=d3.drag().on("drag",a);this.svg.call(n),d3.select(i).call(n)}},e.prototype.selectColumn=function(t,a){void 0===a&&(a=!1),(a||this.lastInteractiveSelectedColumnIndex!==t)&&(zr.rT(this.mainGraphicsContext,this.CS.selector,t,this.lastInteractiveSelectedColumnIndex,a),this.moveHandle(t),this.cartesianVisualHost.updateLegend(this.createInteractiveLegendDataPoints(t)),this.lastInteractiveSelectedColumnIndex=t)},e.prototype.createInteractiveLegendDataPoints=function(t){var i,n,s,o,a=this,l=this.data;if(!l||_.isEmpty(l.series))return(0,m.Fe)(this.style);var u=B.p.general.formatString,c=null===(i=l.categories)||void 0===i?void 0:i[t],h=null!==(s=null===(n=l.categoryFormatter)||void 0===n?void 0:n.format(c))&&void 0!==s?s:c,f=null===(o=l.legendData)||void 0===o?void 0:o.dataPoints,g=l.series.map(function(A,S){var C,L=null===(C=a.converter)||void 0===C?void 0:C.getValueBySeriesAndCategory(S,t),P=l.valuesMetadata[S],V=f[S];return{marker:{show:!0,shape:Ma.ZO.circle,color:1===l.series.length?A.data.length>t&&A.data[t].columnStyle.fillColor:f.length>S&&V.marker.color,transparency:V.marker.transparency,stroke:V.marker.stroke},label:(0,Pe.TO)(P,a.dataView.categorical.values,u),category:h,measure:(0,F.WU)(L,(0,F.EO)(P,u)),identity:Q.l0.createNull(),selected:!1,index:S}});return(0,d.__assign)((0,d.__assign)({},(0,m.Fe)(this.style)),{dataPoints:g})},e.prototype.render=function(t,a,i){return zr.sY.call(this,t,i)},e.prototype.usesUngroupedRenderer=function(){return this.data.layout.clusteredGapOverlaps&&this.data.layout.clusteredGapSize>0},e.prototype.getFirstElement=function(t,a){void 0===a&&(a=!1);var i=this.activeData.series;if(_.isEmpty(i))return null;var o,l,n=t??i[0].data[0].categoryIndex,s=a?this.findSeriesIndex(i.length-1,n,!1):this.findSeriesIndex(0,n,!0);return s>=0?(o=this.data.series[s].data[n],l=this.getDataPointElement(s,n)):s=a?i.length-1:0,{element:l,targetCategoryIndex:n,targetSeriesIndex:s,noShape:o&&0===o.valueAbsolute}},e.prototype.getNextDataPoint=function(t,a,i){switch(i){case U.x0.NextCategory:t=e.findCategoryIndex(this.data.series[a].data,t,!0);break;case U.x0.PreviousCategory:t=e.findCategoryIndex(this.data.series[a].data,t,!1);break;case U.x0.NextSeries:(a=this.findSeriesIndex(a+1,t,!0))<0&&(t=e.loopIndex(t+1,this.data.categories.length),a=this.findSeriesIndex(0,t,!0));break;case U.x0.PreviousSeries:(a=a>0?this.findSeriesIndex(a-1,t,!1):-1)<0&&(t=e.loopIndex(t-1,this.data.categories.length),a=this.findSeriesIndex(this.data.series.length-1,t,!1))}var n,s;if(w.fF.assert(function(){return a>=0||t>=0},"We expect that categoryIndex or seriesIndex will always be valid."),a>=0&&t>=0){var o=this.data.series[a].data;this.data.hasHighlights&&(o=o.filter(function(l){return!l.highlight})),n=o[t],s=this.getDataPointElement(a,t)}else if(t<0)switch(i){case U.x0.NextCategory:t=e.loopIndex(t+1,this.data.categories.length);break;case U.x0.PreviousCategory:t=e.loopIndex(t-1,this.data.categories.length);break;default:w.fF.assertFail("categoryIndex should not be less than 0 unless we are navigating on categories.")}else switch(i){case U.x0.NextSeries:a=0;break;case U.x0.PreviousSeries:a=this.data.series.length-1;break;default:w.fF.assertFail("seriesIndex should be less than 0 unless we are navigating on series")}return this.isInViewport(s)?{element:s,targetCategoryIndex:t,targetSeriesIndex:a,noShape:n&&0===n.valueAbsolute}:this.getNextDataPoint(t,a,i)},e.prototype.validateDirection=function(t){return this.isBar&&!this.getVisualCategoryAxisIsScalar()&&(t===U.x0.NextSeries||t===U.x0.PreviousSeries)&&(t=t===U.x0.NextSeries?U.x0.PreviousSeries:U.x0.NextSeries),t},e.prototype.isInViewport=function(t){if(!t)return!0;var i=t.getBBox(),n=this.currentViewport;return i.y+i.height>0&&i.y<n.height&&i.x+i.width>0&&i.x<n.width},e.prototype.getDataPointElement=function(t,a){return this.mainGraphicsContext.selectAll(this.CS.selector).filter(function(n){return n.categoryIndex===a&&n.seriesIndex===t}).node()},e.prototype.findSeriesIndex=function(t,a,i){return(i?_.findIndex:_.findLastIndex)(this.data.series,function(s){return _.some(s.data,function(o){return o.categoryIndex===a&&null!=o.value})},t)},e.findCategoryIndex=function(t,a,i){var n=i?1:-1,s=_.findIndex(t,function(o){return o.categoryIndex===a});return s<0?s:t[s=e.loopIndex(s+n,t.length)].categoryIndex},e.loopIndex=function(t,a){return t>=a?0:t<0?a-1:t},e.prototype.getCategoryValueType=function(){return D.getCategoryValueType(this.data.categoryMetadata)},e.prototype.getVisualCategoryAxisIsScalar=function(){return!!this.data&&this.data.isScalar},e.prototype.getSupportedCategoryAxisType=function(){var t,a=D.getCategoryValueType(null===(t=this.data)||void 0===t?void 0:t.categoryMetadata);return(0,I.c$)(a)?xt.w.categorical:xt.w.both},e.prototype.setFilteredData=function(t,a){var i=(0,me.ED)(this.data);i.series=e.sliceSeries(i.series,a,t),i.categories=i.categories.slice(t,a),this.clippedData=i},e.prototype.supportsTotalLabels=function(){return!(this.data&&this.data.multipleIdentity)&&this.isStacked&&!this.isStacked100},e.prototype.supportsTrendLine=function(){if(this.data.multipleIdentity)return!1;var a=(0,ca.y)(this.dataView),i=this.getVisualCategoryAxisIsScalar();return 12===this.columnChartType&&i&&a.data.hasValues("Y")},e.prototype.supportsStaticReferenceLines=function(){return this.data&&!this.isValueAxisIrregular()},e.prototype.isValueAxisIrregular=function(){var t,a;return(null===(t=this.data)||void 0===t?void 0:t.layout.stackedGapSize)>0&&(null===(a=this.data)||void 0===a?void 0:a.layout.stackedGapExplodes)&&this.isStacked},e.prototype.supportsStackedGapExplode=function(){return this.isStacked&&!this.isStacked100&&!this.isComboChart},e.prototype.getCartesianVisualCapabilities=function(){var t;return{supportsHierarchicalCategoryAxis:!0,isValueAxisIrregular:this.isValueAxisIrregular(),axesCapabilities:{categoryAxis:{domainAggregateRole:bt.au.category,supportedDomainAggregates:null!==(t=this.data)&&void 0!==t&&t.isScalar?3:0},valueAxis:{domainAggregateRole:bt.au.y,supportedDomainAggregates:84===this.columnChartType||this.isStacked?1:3}}}},e.prototype.getStaticSeriesRole=function(){return"Y"},Object.defineProperty(e.prototype,"CS",{get:function(){return zt.t3(this.columnChartType)?{class:"column",selector:".column"}:{class:"bar",selector:".bar"}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"chartTypeOptimized",{get:function(){var a,i=this.columnChartType,n=zt.C3(i,null===(a=this.data)||void 0===a?void 0:a.series.length);return 18!==i||n?20!==i||n?i:12:10},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isStackedOptimized",{get:function(){return zt.C3(this.chartTypeOptimized,2)||this.hasRibbonBands},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isClusteredOptimized",{get:function(){return zt.V5(this.chartTypeOptimized)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"valueAxis",{get:function(){return this.isColumn?this.yAxisProperties:this.xAxisProperties},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"categoryAxis",{get:function(){return this.isColumn?this.xAxisProperties:this.yAxisProperties},enumerable:!1,configurable:!0}),e.prototype.createCategoryAxis=function(t,a){var i,n,s,o,l=this.activeData,u=(i=this.categoryLayout).isScalar,c=i.outerPaddingRatio,h=i.categoryThickness,f=t.axisZoom,g=t.innerPaddingRatio,A=(n=t.categoryAxisOptions).axis,S=n.includeDomain,C=D.createAxis({pixelSpan:this.isColumn?this.width:this.height,domainOptions:D.createDomain(l.series,null!==(o=null===(s=l.categoryMetadata)||void 0===s?void 0:s.type)&&void 0!==o?o:T.Ge.fromDescriptor({text:!0}),u,[a??S]),axisZoom:f,metaDataColumn:l.categoryMetadata,formatString:(0,F.EO)(l.categoryMetadata,B.p.general.formatString),outerPadding:h*c,outerPaddingRatio:c,isCategoryAxis:!0,isScalar:u,isVertical:this.isBar,categoryThickness:h,useTickIntervalForDisplayUnits:!0,getValueFn:function(P,V){return(0,p.dZ)(l,P,V,u)},axis:(0,d.__assign)((0,d.__assign)({},A),{invertAxis:A.invertAxis&&u}),margin:this.margin,allowSingleScalarTick:u,preventNice:D.hasForcedDomain(S),innerPaddingRatio:g,orientation:this.isColumn?I.Or.bottom:A.switchAxisPosition?I.Or.right:I.Or.left});return C.categoryIdentities=l.categoryIdentities,this.categoryLayout.categoryThickness=C.categoryThickness,C},e.prototype.createValueAxis=function(t,a,i){var s,h,n=this,o=t.axisZoom,l=t.forcedTickCount,u=t.valueAxisOptions,c=u.axis;if(w.fF.assert(function(){return!(n.isBar&&void 0!==l)},"Cannot have bar chart as combo chart."),w.fF.assert(function(){return!(n.isClusteredOptimized&&n.isStacked100)},"Cannot have 100% clustered chart."),a??(a=u.includeDomain),this.isClusteredOptimized)h=D.createUncertaintyAwareValueDomain(this.activeData.series)||D.emptyDomain;else{var f=zt.VY(this.activeData.series,this.isStacked100);h=[f.min,f.max]}var g=D.mergeScalarAxisDomains(a,D.createScalarDomainOptions(h,0)),A=D.createAxis({pixelSpan:this.isColumn?this.availableHeight:this.width,domainOptions:g,zeroScalarDomain:zt.iR,metaDataColumn:this.activeData.valuesMetadata,formatString:this.isStackedOptimized&&this.isStacked100?this.hostService.getLocalizedString("Percentage"):null!==(s=D.getAxisFormatString(this.activeData.series))&&void 0!==s?s:(0,F.EO)(this.activeData.valuesMetadata[0],B.p.general.formatString),outerPadding:0,isScalar:!0,isVertical:this.isColumn,useTickIntervalForDisplayUnits:!0,isCategoryAxis:!1,shouldClamp:D.scaleShouldClamp(g?.domain,h),preventNice:D.hasForcedDomain(g)||this.isValueAxisIrregular(),includeZero:D.shouldIncludeZero(g),axisZoom:o,forcedTickCount:l,axis:c,margin:this.margin,skipAxisZoomUpdate:i,is100Pct:this.isStackedOptimized&&this.isStacked100,orientation:this.isColumn?c.switchAxisPosition?I.Or.right:I.Or.left:I.Or.bottom});return A.isIrregular=this.isValueAxisIrregular(),this.isBar&&A.d3Axis.tickSizeInner(-this.availableHeight).tickSizeOuter(0),A},Object.defineProperty(e.prototype,"categoryWidth",{get:function(){return this.categoryLayout.categoryThickness*(1-this.categoryLayout.innerPaddingRatio)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"columnWidth",{get:function(){var a=this.activeData.series.length;return a>=2&&this.activeData.layout.clusteredGapSize>0&&this.activeData.layout.clusteredGapOverlaps?this.categoryWidth*(1+(a-1)*this.activeData.layout.clusteredGapSize/100)/a:this.categoryBandScale.bandwidth()},enumerable:!1,configurable:!0}),e.prototype.createLabelDataPoints=function(t){return zt.Q4.call(this,t)},e.prototype.createTotalLabelDataPoints=function(t){return zt.$3.call(this,t)},e.prototype.createUncertaintyLabels=function(t){return zt.EX.call(this,t)},Object.defineProperty(e.prototype,"ribbonGapSize",{get:function(){var a;return this.categoryLayout.categoryThickness*this.categoryLayout.innerPaddingRatio*(null!==(a=this.data.layout.ribbonGapSize)&&void 0!==a?a:0)/100},enumerable:!1,configurable:!0}),e.prototype.drawColumns=function(t){var a,i=this;w.fF.assertValue(this.activeData,"data should be defined"),this.glyphsCenters=null,this.layout=this.getColumnLayout();var o,l,c,s=!0,u=zr.kC.call(this);return this.animator&&t&&(o=(a=this.animator.animate({chart:this,series:u,valueAxisProps:this.isClusteredOptimized?this.valueAxis:void 0,isBar:this.isClusteredOptimized?this.isBar:void 0,columnWidth:this.isClusteredOptimized?this.columnWidth:void 0,layout:this.layout,interactivityService:this.interactivityService})).shapes,l=a.uncertaintyShapes,s=a.failed),s&&(l=zr.WR.call(this,{isBar:this.isBar,valueAxisProps:this.isStackedOptimized?void 0:this.valueAxis,layout:this.isStackedOptimized?void 0:this.layout,columnWidth:this.isStackedOptimized?void 0:this.columnWidth,interactivityService:this.isStackedOptimized?void 0:this.interactivityService}),o=zr.Wv.call(this,u),this.isClusteredOptimized&&(0,en.LL)(this.mainGraphicsContext,[zt.L0,Ei.jx])),zr.hJ.call(this,t,this.animator),this.dragDataPoint&&(c=function(f){f.identity&&i.hostService.onDragStart({event:d3.event,data:{data:f.identity.getSelector()}})}),zr.bk(o,c),{eventGroup:this.mainGraphicsContext,shapesSelection:o,uncertaintyShapes:this.isClusteredOptimized?l:void 0,labelDataPointGroups:(0,d.__spreadArray)((0,d.__spreadArray)((0,d.__spreadArray)([],this.createLabelDataPoints(this.style),!0),this.createUncertaintyLabels(this.style),!0),this.createTotalLabelDataPoints(this.style),!0),animateLabels:!s}},Object.defineProperty(e.prototype,"scaledMargin",{get:function(){var a,i=null!==(a=this.currentViewport.scale)&&void 0!==a?a:1;return{top:this.margin.top*i,right:this.margin.right*i,bottom:this.margin.bottom*i,left:this.margin.left*i}},enumerable:!1,configurable:!0}),e.prototype.getGlyphCenters=function(){var t=this;if(!this.glyphsCenters&&this.activeData.series.length>0){var a=0;this.categoryLayout.isScalar||(a=this.categoryWidth/2),this.glyphsCenters=this.activeData.series[0].data.map(function(n){return t.categoryAxis.scale(t.categoryLayout.isScalar?n.categoryValue:n.categoryIndex)+a})}return this.glyphsCenters},e.prototype.moveHandle=function(t){var a,i=this.getGlyphCenters(),n=d3.select(".interactive-hover-line");if(!n.empty()&&!this.columnSelectionLineHandle&&(this.columnSelectionLineHandle=d3.select(n.node().parentElement)),!i||i.length<=1)null===(a=this.columnSelectionLineHandle)||void 0===a||a.remove();else{var s=i[t];this.columnSelectionLineHandle?(this.columnSelectionLineHandle.select("line").attrs(this.isColumn?{x1:s,x2:s}:{y1:s,y2:s}),this.columnSelectionLineHandle.select("circle").attrs(this.isColumn?{cx:s}:{cy:s})):(this.columnSelectionLineHandle=this.unclippedGraphicsContext.append("g"),this.columnSelectionLineHandle.append("line").classed("interactive-hover-line",!0).attrs(this.isColumn?{x1:s,x2:s,y1:0,y2:this.height}:{y1:s,y2:s,x1:0,x2:this.width}),this.columnSelectionLineHandle.append("circle").classed("drag-handle",!0).attrs(this.isColumn?{cx:s,cy:this.height}:{cy:s,cx:0}).attr("r","6px"))}},e.prototype.getColumnLayout=function(){var t=this,a=this.columnWidth,i=this.categoryLayout.isScalar,n=this.valueAxis.invertAxis,s=this.valueAxis.scale,o=this.categoryAxis.scale,l=i?this.categoryWidth/2:0,u=function(K){var ie=K.catSize,Oe=K.catBase,je=K.valueSize,ke=K.valueBase;return t.isColumn?{width:ie,x:Oe,height:je,y:ke}:{height:ie,y:Oe,width:je,x:ke}};if(this.isStackedOptimized){var c={catSize:function(K){return a},catBase:function(K){return o(i?K.categoryValue:K.categoryIndex)-l}},h=function(K,ie){return K!==ie},f=function(K){return h(h(K,t.isBar),n)},g=this.data.layout.stackedGapExplodes?0:this.data.layout.stackedGapSize,A=function(K){return K.indexFromZeroValue>0?g:0},S=function(K){return Math.abs(s(K.originalPosition-Math.abs(K.originalValue))-s(K.originalPosition))},L=function(K,ie){void 0===ie&&(ie=!1);var Oe=ie?K.originalPosition:K.position,ke=Math.abs(s(Oe-Math.abs(ie?K.originalValue:K.value))-s(Oe)),Je=A(K);return 0===Je?ke:K.highlight?ke*(1-Math.min(1,Je/S(K))):Math.min(Math.max(1,ke-Je),ke)},P=function(K,ie){void 0===ie&&(ie=!1);var Oe=ie?K.originalPosition:K.position,je=ie?K.originalValue:K.value,ke=s(h(n,t.isColumn)?Oe:Oe-Math.abs(je)),Je=A(K);if(0===Je)return ke;if(!K.highlight||ie||f(je<0)){if(!f(je<0))return ke;ke+=Je}else{var Xe=function(K){return Math.abs(s(K.position-Math.abs(K.value))-s(K.position))}(K),wt=S(K);ke-=Je*((wt-Xe)/wt)}var Yt=s(h(n,t.isColumn)?K.originalPosition-Math.abs(K.originalValue):K.originalPosition);return Math.min(ke,Yt)};return{shapeLayout:u((0,d.__assign)((0,d.__assign)({},c),{valueSize:function(K){return L(K)},valueBase:function(K){return P(K)}})),shapeLayoutWithoutHighlights:u((0,d.__assign)((0,d.__assign)({},c),{valueSize:function(K){return L(K,!0)},valueBase:function(K){return P(K,!0)}})),zeroShapeLayout:u((0,d.__assign)((0,d.__assign)({},c),{valueSize:function(K){return 0},valueBase:function(K){return s(K.value>=0?K.position-K.valueAbsolute:K.position)}}))}}var V=.5*a,k=V/2,z=s(0),J=function(K){return z+(0,I.sc)(s,K,0)},fe=function(K){return o(i?K.categoryValue:K.categoryIndex)+t.categoryBandScale("".concat(K.seriesPosition))-l};return{shapeLayout:u({catSize:function(K){return K.drawThinner?V:a},catBase:function(K){return fe(K)+(K.drawThinner?k:0)},valueSize:function(K){return Math.abs((0,I.sc)(s,0,K.value))},valueBase:this.isColumn?function(G){return J(n?Math.min(0,G.value):Math.max(0,G.value))}:function(G){return J(n?Math.max(0,G.value):Math.min(0,G.value))}}),shapeLayoutWithoutHighlights:u({catSize:function(K){return a},catBase:function(K){return fe(K)},valueSize:function(K){return Math.abs((0,I.sc)(s,0,K.originalValue))},valueBase:this.isColumn?function(G){return J(n?Math.min(0,G.originalValue):Math.max(0,G.originalValue))}:function(G){return J(n?Math.max(0,G.originalValue):Math.min(0,G.originalValue))}}),zeroShapeLayout:u({catSize:function(K){return K.drawThinner?V:a},catBase:function(K){return fe(K)+(K.drawThinner?k:0)},valueSize:function(K){return 0},valueBase:this.isColumn?function(G){return z}:function(G){return J(n?Math.max(0,G.value):Math.min(0,G.value))}}),uncertaintyLayout:{lower:function(K){var ie,Oe;if(null!=(null===(ie=K.uncertainty)||void 0===ie?void 0:ie.lower))return s(null===(Oe=K.uncertainty)||void 0===Oe?void 0:Oe.lower)},upper:function(K){var ie,Oe;if(null!=(null===(ie=K.uncertainty)||void 0===ie?void 0:ie.upper))return s(null===(Oe=K.uncertainty)||void 0===Oe?void 0:Oe.upper)}}}},e.ClassName="columnChart",e}(On),We=x(69871),kn=x(42589),bo=x(40006),ws=x(80822),dr=x(51995),En=x(94038),nn=x(37865),Co=x(28326),mi=x(6714),yn=x(17772),Ao=x(45028),Do=x(66123),wo=x(92374),_o=x(63892),Lo=x(93907),_s=(0,W.CH)("tooltip-overlay"),Ls={min:1,max:20};function es(r){return void 0===r&&(r=!1),(0,d.__assign)({strokeShow:!0,strokeColor:void 0,strokeTransparency:0,strokeWidth:2,strokeLineJoin:Ai.t.round,strokePattern:E.Dv.solid,strokeDashArray:E.YU,strokeDashCap:E.xm,strokeAutoScale:!1,markerProperties:{show:!1,showMarkerByDefault:!0,shape:Ma.ZO.circle,size:Do.$V,color:void 0,transparency:0,rotation:0,stroke:{strokeShow:!0,strokePattern:E.Dv.solid,strokeColor:void 0,strokeTransparency:0,strokeWidth:void 0}},areaShow:r,areaColor:void 0,areaTransparency:60,areaMatchStrokeColor:!0},(0,yn.aQ)())}function Rn(r){return r.strokeWidth/2+3}function ts(r,e,t){void 0===e&&(e=!1),void 0===t&&(t=!1);var a=(0,N.bT)({style:r,labelColor:Ze.v.getThemeColor(r,O.uQ),textClassName:"smallLightLabel"}).fontProperties;return(0,d.__assign)((0,d.__assign)({show:!1,showByDefault:!0},a),{bold:!1,italic:!1,underline:!1,position:ka.h.auto,horizontalAlignment:wo.D.center,minimumOffset:void 0,maximumOffset:void 0,labelDensity:O.go,labelContainerMaxWidth:Ao.w9,labelContentLayout:_o.v.SingleLine,optimizeLabelDisplay:!1,enableValueDataLabel:!t,fontProperties:a,displayUnits:0,precision:O.NZ,valueCustomFormatString:O.M3,enableTitleDataLabel:!1,titleFontProperties:a,titleLabelDisplayUnits:0,titleLabelPrecision:O.NZ,titleCustomFormatString:O.M3,enableDetailDataLabel:t,detailFontProperties:a,detailLabelDisplayUnits:0,detailLabelPrecision:O.NZ,detailCustomFormatString:O.M3,detailContentType:t?Lo.W.Percent:void 0,leaderLine:(0,Rt.sW)(r),enableBackground:e,backgroundColor:e?Ze.v.getThemeColor(r,we.U):void 0,backgroundTransparency:e?O.r_:void 0})}function In(r){return _.some(r.anomalyDetections,function(e){return!_.isEmpty(e.anomaliesCategoryIndex)})}function as(r){return r.isAnomaly}function Ps(r){return r&&null!=r.points}function Ms(r,e,t){return Br.convertSvgXToClientX(er(r,e),r.currentViewport.scale,t)}var Br={convertSvgXToClientX:function(e,t,a){return e*t+a},convertSvgYToClientY:function(e,t,a){return e*t+a}};function Ts(r,e){return r.activeData.isScalar?e.categoryValue:e.categoryIndex}function er(r,e){return r.xAxisProperties.scale(Ts(r,e))+r.horizontalOffset}function Or(r,e){var t;return e.isY2?null===(t=r.y2AxisProperties)||void 0===t?void 0:t.scale(e.value):r.yAxisProperties.scale(r.isStackedArea?e.stackedValue:e.value)}function Os(r,e){var t,a;return e.isY2?null===(t=r.y2AxisProperties)||void 0===t?void 0:t.scale(e.uncertainty.lower):null===(a=r.yAxisProperties)||void 0===a?void 0:a.scale(e.uncertainty.lower)}function Fs(r,e){var t,a;return e.isY2?null===(t=r.y2AxisProperties)||void 0===t?void 0:t.scale(e.uncertainty.upper):null===(a=r.yAxisProperties)||void 0===a?void 0:a.scale(e.uncertainty.upper)}var Vs=function(){function r(e){this.options=e,w.fF.assertValue(e.dataView,"dataView"),w.fF.assertValue(e.style,"style");var t=e.dataView,a=(0,p.Vk)(t.metadata);this.isScalar=(0,p.qU)(this.options.isScalar,a);var i=(0,p.Zo)(t.categorical,this.isScalar).category;this.isDateTime=(0,I.v9)((0,D.getCategoryValueType)(i.source,this.isScalar)),this.reader=(0,ca.G)(t,{staticSeriesRoleNames:this.valueRoleNames,colorOptions:{visualStyle:e.style,valueRole:this.primaryValueRole,ignoreDefaultColor:e.isComboChart,ignoreDefaultCategoryColor:!0},formatStringProp:We.zK.general.formatString,errorRangeProp:la.Qx.errorRange})}return Object.defineProperty(r.prototype,"primaryValueRole",{get:function(){return this.options.isComboChart?mi.R.Y2:mi.R.Y},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"secondaryValueRole",{get:function(){return this.options.isComboChart?void 0:mi.R.Y2},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"valueRoleNames",{get:function(){return[this.primaryValueRole,this.secondaryValueRole].filter(function(t){return t})},enumerable:!1,configurable:!0}),r.convert=function(e){return new r(e).convert()},Object.defineProperty(r.prototype,"staticObjects",{get:function(){return this.reader.objects.getStaticObjects()},enumerable:!1,configurable:!0}),r.prototype.convert=function(){var e,t,a,i,n,s,o,l,u,c,h,f,g,A,S,C,L,P,V,k,z,J,fe,G,Ta,K=this.options,ie=K.dataView,Oe=K.style,je=K.interactivityService,ke=K.isStacked,Je=K.isStacked100,Xe=K.isComboChart,wt=K.anomalyDetectionDataView,Yt=K.tooltipsEnabled,Ut=void 0===Yt||Yt,Ct=K.multipleInfo,Gt=K.hostServices,da=(0,p.Vk)(ie.metadata),ua=(0,p.Zo)(ie.categorical,this.isScalar),_t=ua.category,qt=ua.useScalarKeys,ga=ua.scalarKeys;qt&&((Ta=(0,me.ED)(_t.source)).type={dateTime:!0});var ei,ui,Na,Ga,Ha=We.zK.general.formatString,xa=[],$a=[],li=[],Xa=[],La=ie.categorical.values,qa=!(!La||!La.source),ea=ts(Oe,Xe,Je),Ua=Ze.v.create(Oe);if(Ct){ei=_.first(Ct.sources).metadata.queryName,Ga=Ct.sources.map(function(za){return(0,Q.Y)(za.metadata,za.value,Ct.identity)}),ui=(new Q.dw).withColumnIdentity(Ct.identity,ei,Ga).createSelectionId();var di=(0,Jn.F)(Ha);Na=(0,Ue.ML)(_.map(Ct.sources,function(za){return di(za.value,za.metadata)}))}this.staticObjects&&(0,N.AR)(this.staticObjects.labels,ea,void 0,Oe,Xe);var ja=(0,d.__assign)((0,d.__assign)({},ea),{show:!1});this.options.supportsTotalLabels&&this.staticObjects&&(0,N.ww)(this.staticObjects.totals,ja,!1,Oe,Xe);var zi=null!==(e=La?.grouped())&&void 0!==e?e:void 0,hr=ke&&La?.length>0?_.times(La[0].values.length,function(){return 0}):[],ri=this.reader.data,Ii=this.reader.columns,_i=ri.hasCategories()?ri.getCategoryCount():1,$t=ri.getSeriesCount();this.seriesColors=this.allocateSeriesColors(),this.staticLineStyle=this.readLineStyleFromObjects(null,Oe);var Si=Ii.getAllValueMetadataColumnsForRole(this.primaryValueRole);this.secondaryValueRole&&(Si=(0,d.__spreadArray)((0,d.__spreadArray)([],Si||[],!0),Ii.getAllValueMetadataColumnsForRole(this.secondaryValueRole)||[],!0));var bi,xi=[],Ya=[];wt&&this.isScalar&&!ke&&!Xe&&(bi=(0,R.Eb)(wt,ie,Oe,Ha),w.fF.assert(function(){return bi.length===$t},"anomalyDetections length should be the same as series count"));var vt,Li=(0,b.NA)(this.staticObjects,We.zK.layout.seriesOrderReversed,zt.HQ.seriesOrderReversed),vr=this.getSeriesNames(),ni=pt(Oe),xe=!1;if(_.some(this.valueRoleNames,function(za){return ri.hasValues(za)})){var Sa=this.reader.columns.getSeriesCount(this.primaryValueRole);if(xe=!0,vt=qa?(0,Pe.xq)(ri.getSeriesDisplayName(),Ii.getSeriesMetadataColumn(),Ha):void 0,this.staticObjects){(0,N.FJ)(this.staticObjects.seriesLabels,ni,Oe,Xe);var Kt=function(r,e){var t=1;if(e)for(var a=e.length,i=0;i<a;i++){var n=O.bN,o={text:e[i],fontFamily:r.family,fontSize:Ne.FP.fromPoint(r.size.pt),fontWeight:n.fontWeight},l=Z.b.measureSvgTextWidth(o)+2*O.Bo;t=l>t?l:t}return t}(ni.fontProperties,vr);ni.defaultSeriesWidth=ni.defaultSeriesWidth?Kt:null,ni.maxWidthPercentage=ni.defaultSeriesWidth?Kt:ni.maxWidthPercentage}for(var Ki=[],ya=ea.fontProperties.color,Oa=Je?Ss(_i,$t,function(za,ir){return ri.getValueBySeries(ir,za)}):[],hi=function(ir){var ha=Li?$t-ir-1:ir,xr=ba.reader.labels.dynamicLabelReader.areDynamicValueLabelsEnabled(null===(t=ba.options.featureSwitches)||void 0===t?void 0:t.labelEnhancementsM0,ha),Vr=ha>=Sa,br=Ii.getValueColumnBySeries(ha),Ur=zi&&zi[ha],si=Ki[ha]=br.source,Cr=[],ln=Q.dw.builder().withSeries(La,Ur,!0).withMeasure(si.queryName).createSelectionId(),Gr=ln.getKey(),Mi=void 0,Xt=(0,me.ED)(ni);if(ba.reader.data.hasSeries()||Xe){var Bi=Xe&&!ba.reader.data.hasSeries()?ba.reader.objects.getValueMetadataObjectsBySeries(ha):ba.reader.objects.getSeriesDataObjects(ha),kr=Bi?.labels,un=Bi?.seriesLabels;(Mi=(0,me.ED)(ea)).show=ea.show&&(null===(a=ea.showByDefault)||void 0===a||a),kr&&(0,N.AR)(kr,Mi,void 0,Oe,Xe),Xt.show=ni.show&&(null===(i=ni.showByDefault)||void 0===i||i),un&&(0,N.FJ)(un,Xt,Oe,Xe)}for(var Oi,gi=(0,fn.nC)(si.objects,Oe,ba.seriesColors[ha],ha,(0,d.__assign)((0,d.__assign)({},ea),{show:!1}),{isCombo:Xe,staticObjects:ba.staticObjects}),Ti=gi.hasUncertainty,Xi=Mi??ea,Ar=(null===(n=br.highlights)||void 0===n?void 0:n.length)>0,Zi=ba.readLineStyleFromObjects(ha,Oe),jr=_.get(bi,ha),Yr=jr?new R.LO(Gt,jr,si,Ha):void 0,Xn=!1,Kr=function(Zt,Wi){var Fi=_t.values[Zt],Er=qt?null===(s=ga.values[Zt])||void 0===s?void 0:s.min:Fi,fr=(0,I.eT)(Ar?ri.getHighlightBySeries(Zt,ha):ri.getValueBySeries(Zt,ha)),cn=fr<0,Ni=Je?fr*Oa[Zt][cn?"neg":"pos"]:fr;if(ba.isScalar&&(null==Er||null==Ni)||ba.isDateTime&&null!=Fi&&!(Fi instanceof Date))return Oi=Wi,"continue";if(Wi++,null==Ni&&(Li?ha<$t-1:ha>0))return Oi=Wi,"continue";var Rr=Ar?ri.getHighlightFormatStringBySeries(Zt,ha):ri.getFormatStringBySeries(Zt,ha),Xr=Ti?(0,fn.PT)(ri,Zt,ha,Ni):void 0,nr=void 0,sr=void 0,Zr=_t.source?(0,Ue.AD)(ie.categorical.categories,Zt,Ha):void 0;if(Ut){if(nr=[],Ct){var Qr=new Ca.E4;Qr.withMultipleColumnAndValues(Ct.sources.map(function(Hi){return Hi.metadata}),Ct.sources.map(function(Hi){return Hi.value}),!0,(0,Jn.F)(Ha)),nr.push.apply(nr,Qr.getTooltipItems())}_t.source&&nr.push((0,Ue.bR)(Zr));var Qi=function(_r){return(0,Pe.xq)(_r,si,Ha,!1,Rr)};if(qa&&(!_t.source||_t.source!==La.source)&&nr.push({displayName:La.source.displayName,value:(0,Pe.xq)(zi[ha].name,La.source,Ha)}),null!=Ni){var wn={displayName:si.displayName,value:ba.options.isStacked100?"".concat(Qi(fr)," (").concat((0,F.WU)(Ni,(0,F.Z)("Percentage")),")"):Qi(fr)},Qn=gi.tooltips;if(Ti&&Qn.show&&Qn.format===tn.K.range){var wr=(0,Pr.kS)(Xr,Ni,gi,Qi,Gt,{overrideDisplayName:si.displayName});w.fF.assert(function(){return void 0===wr||1===wr.length},"getUncertaintyTooltipItems() with 'range' format should return exactly one item or undefined when when bounds have not been set yet"),_.isEmpty(wr)||(wn=wr[0])}nr.push(wn)}Ti&&(Xe&&gi.tooltips.format!==tn.K.range?nr.push.apply(nr,null!==(o=(0,Pr.kS)(Xr,Ni,gi,Qi,Gt,{hideMarker:!0}))&&void 0!==o?o:[]):(0,Pr.$w)(Xr,Ni,gi,Qi,Gt)),(0,Ca.VT)(ba.reader,sr=[],Zt,qa?ha:void 0,Ha);var _n=Yr?.getTooltipItems(Zt,Rr);_n&&sr.push.apply(sr,_n),sr=_.isEmpty(sr)?void 0:sr}var gr=new Q.dw,or=null!==(l=ie.categorical.originalCategories)&&void 0!==l?l:[_t];ri.hasCategories()&&(gr=gr.withCategory(or,Zt,null===(c=null===(u=Ii.getCategoryColumn("Category"))||void 0===u?void 0:u.source)||void 0===c?void 0:c.queryName,!0)),qa&&(gr=gr.withSeries(La,Ur,!0)),Ct&&(gr=gr.withColumnIdentity(Ct.identity,ei,Ga)),null!==(h=Ya[Zt])&&void 0!==h||(Ya[Zt]={positive:0,positiveCount:0,negative:0,negativeCount:0,net:0,categoryValue:ba.convertCategoryValue(Er,ba.isDateTime,qt),categoryIndex:Zt,dynamicFormatString:Rr});var oi=Math.abs(Ni);isNaN(oi)||(cn?(Ya[Zt].net-=oi,Ya[Zt].net<Ya[Zt].negative&&(Ya[Zt].negative=Ya[Zt].net,Ya[Zt].negativeCount++)):(Ya[Zt].net+=oi,Ya[Zt].net>Ya[Zt].positive&&(Ya[Zt].positive=Ya[Zt].net,Ya[Zt].positiveCount++)));var dn={defaultColor:ya,seriesColor:Mi?.fontProperties.color,categoricalDataReader:ba.reader,categoryIndex:Zt,seriesIndex:ha},Ir=(0,Rt.t$)(dn),Ln={dataPointLabelSettings:Xi,defaultLabelSettings:ea,categoricalDataReader:ba.reader,categoryIndex:Zt,seriesIndex:ha,dynamicLabelsEnabledForSeries:xr,featureSwitches:ba.options.featureSwitches},Pn=(0,Rt.Xc)((0,d.__assign)((0,d.__assign)({},Ln),{detailPropertyId:We.zK.labels.dynamicLabelDetail,titlePropertyId:We.zK.labels.dynamicLabelTitle,dataLabelFillColorOptions:dn})),Jr=(0,Rt.tI)((0,d.__assign)((0,d.__assign)({},Ln),{valuePropertyId:We.zK.labels.dynamicLabelValue}));if(!Xn&&null!==(f=ba.options.featureSwitches)&&void 0!==f&&f.labelEnhancementsM0){var $r=Pn&&(null===(g=_.first(Pn.filter(function(Hi){return"Detail"===Hi.role})))||void 0===g?void 0:g.dynamicLabel.enabled);(0,Rt.hY)(Gt,!1,Jr?.enabled,$r,Xi),Xn=!0}ke&&(hr[Zt]+=Ni);var Hi,_r,Ji,pr,lr,Nr=(0,d.__assign)({categoryValue:ba.convertCategoryValue(Er,ba.isDateTime,qt),value:Ni,originalValue:fr,categoryIndex:Zt,seriesIndex:ha,tooltipInfo:nr,selected:!1,identity:gr.withMeasure(si.queryName,Ii.getValueColumn(Vr?mi.R.Y2:mi.R.Y,ha),Zt).createSelectionId(),key:JSON.stringify({series:Gr,category:_t&&!_.isEmpty(_t.identity)&&_t.identity[Zt]?_t.identity[Zt].key:Zt}),labelFill:Ir.color,leaderLineColor:(0,Rt.Zj)(ea.leaderLine.strokeColor,Mi,dn,Ir),labelFormatString:Rr||si.format,labelSettings:Xi,uncertainty:Xr,additionalTooltipItems:sr,marker:(_r=We.zK.lineStyles.strokeColor,Ji=null===(Hi=_t.objects)||void 0===Hi?void 0:Hi[Zt],pr=Ji&&Ua.hasColorForProperty(Ji,_r),lr=Object.create(Zi.markerProperties),lr.perCategoryStyle=!!pr,lr.transparency=Zi.strokeTransparency,lr.color=pr?Ua.getColorForProperty(Ji,_r,void 0):Zi.strokeColor,lr.show=!!pr||!!lr.show,lr.focusOnlySize=Rn(Zi),lr.focusOnlyColor=Zi.strokeColor,lr),isY2:Vr,dynamicLabelValue:Jr,stackedValue:ke?hr[Zt]:void 0},(null===(A=ba.options.featureSwitches)||void 0===A?void 0:A.labelEnhancementsM0)&&{appendedLabelContents:Pn,labelDataPointContainerEnabled:!0});Cr[Wi]=Nr,null!==(S=xa[Zt])&&void 0!==S||(xa[Zt]=Lt(Nr,Zr)),xa[Zt]&&((G=xa[Zt]).hasData||(G.hasData=null!=Nr.value));var qr=function(_r){var Ji,pr=(new Q.dw).withCategory(or,Zt,null===(Ji=_t?.source)||void 0===Ji?void 0:Ji.queryName,!0);return!qa&&1===$t&&pr.withMeasure(si.queryName),_r&&Ct&&pr.withColumnIdentity(Ct.identity,ei,Ga),pr};ri.hasCategories()&&(null!==(C=$a[Zt])&&void 0!==C||($a[Zt]=qr(!1).createSelectionId()),null!==(L=li[Zt])&&void 0!==L||(li[Zt]=qr(!0).createSelectionId())),Oi=Wi},Dr=0,Zn=-1;Dr<_i;Dr++)Kr(Dr,Zn),Zn=Oi;var rr=_.findIndex(Si,si);-1!==rr&&(null!==(P=xi[rr])&&void 0!==P||(xi[rr]={metadataColumn:si,usedInSeriesIndices:[],valueSelector:(new Q.dw).withMeasure(si.queryName,br).createSelectionId()}),xi[rr].usedInSeriesIndices.push(ha)),je?.applySelectionStateToData(_.filter(Cr,function(Dn){return null!=Dn})),(Cr.length>0||Ct?.isCoreMultiple)&&Xa.push({displayName:vr[ha],key:Gr,index:ha,xCol:qt?Ta:_t.source,yCol:si,data:Cr,identity:ln,selected:!1,uncertainty:gi,labelSettings:Mi,seriesLabelSettings:Xt,type:si.type,measureDisplayName:si.displayName,lineStyle:Zi,isY2:Vr})},ba=this,Ci=0;Ci<$t;Ci++)hi(Ci);this.addTotalTooltips(Li,Xa,ja,Ya,Ki)}var ai=null===(k=null===(V=ie.metadata)||void 0===V?void 0:V.dataReduction)||void 0===k?void 0:k.categorical;je?.applySelectionStateToData(Xa);var Pi=(0,b.NA)(this.staticObjects,We.zK.legend.legendMarkerRendering,nn._.markerCircleDefault),ar=(0,b.NA)(this.staticObjects,We.zK.legend.matchLineColor,!0);return{series:Xa,totals:Ya,legendData:(0,m.pq)({dataView:ie,allowLegendWithNoSeries:Xe,showByDefault:!0,staticSeriesRoleNames:Xe?["Y2"]:["Y","Y2"],style:Oe,ignoreDefaultColor:Xe,ignoreDefaultCategoryColor:!0,lineAndMarkerOptions:{renderLineStyle:!0,legendMarkerRendering:Pi,matchSeriesColor:ar,defaultMarkerShape:Ma.ZO.longDash},featureSwitches:this.options.featureSwitches}),forecastLines:this.convertForecastLines(xa,qt,$a,li),anomalyDetections:bi,isScalar:this.isScalar,dataLabelsSettings:ea,totalLabelsSettings:ja,seriesLabelSettings:ni,hasDynamicSeries:qa,hasHighlights:!1,hasY2Role:(0,M.c5)(ie,"Y2"),categoryMetadata:_t.source,valuesMetadata:Si,valuesMetadataBySeries:xi,preferredCategoryWidth:(0,p.$K)(da),scalarMetadata:Ta,scalarKeyCount:qt?ga.values.length:void 0,categories:_t.values,categoryData:xa,seriesDisplayName:vt,hasValues:xe,categoryIdentities:$a,multiplesCategoryIdentities:li,lineStyle:this.staticLineStyle,binnedLineSamplingApplied:!!(null!==(z=ai?.metadata)&&void 0!==z&&z.binnedLineSample||null!==(J=ai?.categories)&&void 0!==J&&J.binnedLineSample||null!==(fe=ai?.values)&&void 0!==fe&&fe.binnedLineSample),legendMarkerRendering:Pi,matchLineColor:ar,multipleIdentity:ui,multipleDisplayName:Na,layout:{seriesOrderReversed:Li}}},r.prototype.addTotalTooltips=function(e,t,a,i,n){var s,o,l,u,c=this.options,h=c.hostServices,g=c.tooltipsEnabled;if(c.isStacked&&h&&(void 0===g||g)&&a.show)for(var S=this.reader.data.getSeriesCount(),C=a.fontProperties.color,L=[],P=0;P<S;P++){var V=e?S-P-1:P;if(t[V])for(var k=0,z=t[V].data;k<z.length;k++){var J=z[k];if(J){var fe=J.categoryIndex,G=(0,Rt.AO)({defaultColor:C,categoricalDataReader:this.reader,categoryIndex:fe,seriesIndex:V});i[fe].labelFill=G.color;var K=(0,Rt.B8)(G)?G.color:C;a.fontProperties=(0,Rt.Vv)(K,a.fontProperties),null!==(s=L[fe])&&void 0!==s||(L[fe]={net:{displayName:h.getLocalizedString("Visual_Total"),value:(0,Pe.xq)(i[fe].net,n[V],We.zK.general.formatString,!1)}});var ie=L[fe].net;null!==(o=J.tooltipInfo)&&void 0!==o||(J.tooltipInfo=[]),J.tooltipInfo.push(ie),null!==(l=(u=J).additionalTooltipItems)&&void 0!==l||(u.additionalTooltipItems=[]),J.additionalTooltipItems.push(ie)}}}},r.prototype.convertForecastLines=function(e,t,a,i){var n,s,o,l=this.options,u=l.dataView,g=l.forecastDataView;if(g&&this.isScalar&&!l.isStacked&&!l.isComboChart){for(var A=(0,v.XB)(g,u,l.style,this.staticLineStyle),S=_.last(e),C=0,L=A;C<L.length;C++)for(var V=S.categoryIndex,k=0,z=L[C].points;k<z.length;k++){var J=z[k];J.point.x=this.convertCategoryValue(J.point.x,this.isDateTime,t),J.upperBound.x=this.convertCategoryValue(J.upperBound.x,this.isDateTime,t),J.lowerBound.x=this.convertCategoryValue(J.lowerBound.x,this.isDateTime,t);var fe=J.point.x;fe<=S.categoryValue||(null!==(n=e[++V])&&void 0!==n||(e[V]={categoryIndex:V,categoryValue:fe,hasData:null!=J.point.y,hierarchyCategoryLevels:(0,Ue.AD)(u.categorical.categories,V,We.zK.general.formatString)}),null!==(s=a[V])&&void 0!==s||(a[V]=null),null!==(o=i[V])&&void 0!==o||(i[V]=null))}return A}},r.prototype.allocateSeriesColors=function(){for(var e=this.reader.data.getSeriesCount(),t=[],a=0;a<e;a++)t.push(this.reader.colors.createBySeries(a,void 0,we.fA));return t},r.prototype.getSeriesNames=function(){var e=this,t=this.reader.data.getSeriesCount();return _.range(t).map(function(a){return e.reader.columns.hasDynamicSeries()?(0,F.WU)(e.reader.data.getSeriesName(a),e.reader.objects.getSeriesFormatString(a)):e.reader.columns.hasStaticSeries()?e.reader.data.getSeriesName(a):e.reader.data.getValueDisplayName(e.primaryValueRole)})},r.prototype.convertCategoryValue=function(e,t,a){if(e&&(t||a)){var i=e;return w.fF.assert(function(){return(0,an.M4)(i)},"dateValue"),i.epochTimeStamp}return e},r.prototype.readLineStyleFromObjects=function(e,t){var a=We.zK.lineStyles,i=(0,b.NA)(this.staticObjects,We.zK.lineStyles.showSeries,!0),s=null!=e&&i?this.reader.objects.getSeriesDataObjects(e):this.staticObjects,o=this.staticLineStyle,l=o??es(this.options.isAreaChart);null!=e?w.fF.assert(function(){return null!=o},"If converting per-series line style, staticStyle must be defined"):w.fF.assert(function(){return null==o},"If converting static line style, staticStyle must be not-defined");var u=(0,d.__assign)((0,d.__assign)((0,d.__assign)({},(0,Za.QI)(s,a,l)),{markerProperties:null==e?(0,En.RZ)(s,t):(0,En.Yh)(this.reader,o.markerProperties,e,t,!i),areaShow:(0,b.NA)(s,a.areaShow,l.areaShow),areaColor:(0,b.W7)(s,a.areaColor,l.areaColor),areaTransparency:(0,b.NA)(s,a.areaTransparency,l.areaTransparency),areaMatchStrokeColor:(0,b.NA)(s,a.areaMatchStrokeColor,l.areaMatchStrokeColor)}),(0,yn.RN)(s,a,l));return null!==e&&(u.strokeColor=this.seriesColors[e]),null!=e&&u.areaShow&&(u.areaShow=o.areaShow),u.areaMatchStrokeColor&&(u.areaColor=u.strokeColor),u},r}(),To=x(67918),Oo=x(72250);function Fo(){return{type:0,card:[Io.call(this),Ro.call(this),Vo.call(this),ko.call(this),Eo.call(this),No.call(this),zo.call(this)].filter(function(r){return r})}}function Vo(){var e,t,r=this,a=this.originalData;if(a&&this.dataView){var i=a.series.length;if(0!==i){var n=(0,b.NA)(null===(t=null===(e=this.dataView)||void 0===e?void 0:e.metadata)||void 0===t?void 0:t.objects,We.qn.lineStyles.showSeries,!0);return new ge.CQ(new ge.lg("markers"),"Visual_Markers",Object.values(We.zK.markers).concat([We.zK.dataPoint.fill,We.zK.dataPoint.showAllDataPoints,We.zK.lineStyles.showSeries]),this.localizer).addTopLevelToggle("showMarkerTopLevel",function(){return new ge.bd({descriptor:We.qn.lineStyles.showMarker,value:a.lineStyle.markerProperties.show}).build()}).addGroup("applySettingsTo",function(s){return s.withContainerDisabled(!n).withDisplayName("Apply_Settings_To").withCollapsible(!1).addContainer("series",function(o){if(o.withDisplayName(i>1?"Series":"Visual_Categories").addContainerItem("all",r.localizer("All"),function(S){var C,L,P;if(rs.call(r,{containerItemBuilder:S,listType:i>1?"staticPerSeries":"staticPerCategories",markerStyle:(0,d.__assign)((0,d.__assign)({},a.lineStyle.markerProperties),{color:null!==(L=null!==(C=a.lineStyle.markerProperties.color)&&void 0!==C?C:a.lineStyle.strokeColor)&&void 0!==L?L:null===(P=a.series[0])||void 0===P?void 0:P.lineStyle.strokeColor})}),!n){var V=[We.qn.lineStyles.lineChartType,We.qn.lineStyles.lineStyle,We.qn.lineStyles.strokeWidth,We.qn.lineStyles.strokeLineJoin,We.qn.lineStyles.showMarker,We.qn.lineStyles.showMarkerByDefault,We.qn.lineStyles.markerShape,We.qn.lineStyles.markerSize,We.qn.lineStyles.markerColor,We.qn.dataPoint.showAllDataPoints,We.qn.dataPoint.fill];S.addSimpleSlice("showSeriesLink",function(){return new ge.ob({descriptor:We.qn.lineStyles.showSeries,value:function(){},ariaLabel:"Enable_This_Setting",type:"SeriesDialogLink",resetToDefaultDescriptors:V,warningIcon:!0}).build()},function(k){return k.withCustomDisplayName("Enable_This_Setting").withSuppressDisplayName(!0)})}}),1===i&&r.supportsPerCategoryMarker()){var l=function(r){for(var e=[],t=function(o){if(o&&r.categoryIdentities[o.categoryIndex])for(var l=0;l<r.series.length;l++){var c=_.findIndex(r.series[l].data,function(h){return h.categoryIndex===o.categoryIndex});if(c>=0){e.push({categoryIndex:o.categoryIndex,seriesIndex:l,dataPointIndex:c});break}}},a=0,i=r.categoryData;a<i.length;a++)t(i[a]);return e}(a),u=l.slice(0,pa.Rl);if(u.length<2)return;var c=ra(u,a);u.forEach(function(S,C){var L,P=S.categoryIndex,V=S.seriesIndex,k=S.dataPointIndex,z=(0,d.__assign)((0,d.__assign)({},_.cloneDeep(a.lineStyle.markerProperties)),{color:null!==(L=a.series[V].data[k].marker.color)&&void 0!==L?L:a.series[V].lineStyle.strokeColor}),fe=(0,Ie.fd)(a.categoryIdentities[P].getSelector());a.multipleIdentity&&(fe=(0,Ie.d9)(fe),w.fF.assert(function(){return!!fe.data},"expect categories to have some data identity"),fe.data.unshift((0,qn.Yp)([mi.R.Rows]))),o.addContainerItem(c[C],c[C],function(G){return rs.call(r,{containerItemBuilder:G,listType:"perCategory",markerStyle:z,selector:fe})})})}if(i>1)for(var h=function(C){var L=(0,Ie.fd)(C.identity.getSelector());if(!L)return"continue";o.addContainerItem(C.displayName,C.displayName,function(P){return rs.call(r,{containerItemBuilder:P,listType:"perSeries",markerStyle:C.lineStyle.markerProperties,selector:L})})},f=0,g=a.series;f<g.length;f++)h(g[f])})}).build()}}}function ko(){var e,r=this,t=this.originalData,a=t.dataLabelsSettings,i=t.series.length,n=i>1||!t.categoryMetadata||this.isComboChart,s=this.isStacked?[ka.h.auto,ka.h.insideCenter,ka.h.insideEnd]:[ka.h.auto,ka.h.above,ka.h.under];a.position&&s.indexOf(a.position)<0&&(a.position=ka.h.auto);var g,o=(0,d.__assign)((0,d.__assign)({},We.qn.labels),{position:We.qn.labels.labelPosition,precision:We.qn.labels.labelPrecision,displayUnits:We.qn.labels.labelDisplayUnits,labelBackgroundColor:We.qn.labels.backgroundColor,labelBackgroundTransparency:We.qn.labels.backgroundTransparency,showDynamicLabels:We.qn.labels.showDynamicLabels,dynamicLabelValue:We.qn.labels.dynamicLabelValue,leaderLines:We.qn.labels.leaderLines,maximumOffset:We.qn.labels.maximumOffset,minimumOffset:We.qn.labels.minimumOffset}),l=new ge.CQ(new ge.lg("labels"),"Visual_DataPointsLabels",o,this.localizer),u=(0,Rt.DU)(this.featureSwitches,t.hasDynamicSeries,n,i,this.isComboChart,!0),c=ks.call(this,void 0,a,null,n,s,u),h=this.isComboChart?void 0:sn.call(this,!1),f={cardBuilder:l,dataLabelsProps:o,featureSwitches:this.featureSwitches,hostServices:this.hostService,options:c,includeAltConstantValueSelector:!0,individualSelector:h,showEnhancedLabelsFormattingOptions:!0,instanceId:"all"};if(null!==(e=this.featureSwitches)&&void 0!==e&&e.labelEnhancementsM0&&this.dataView){var A=(g=(0,ca.y)(this.dataView)).labels.dynamicLabelReader.getLabelFieldSourceTypes();Object.assign(f,{valueFieldSourceType:A.valueFieldSourceType,detailFieldSourceType:A.detailFieldSourceType,titleFieldSourceType:A.titleFieldSourceType,valueLabelPickerFallbackExpr:(0,Rt.WA)(t.valuesMetadataBySeries,i,t.hasDynamicSeries),dataLabelPickerSeriesType:(0,Rt.Nb)(i,t.hasDynamicSeries,this.isComboChart)})}return l.withDescription("Visual_DataPointsLabelsDescription"),o.show&&l.addTopLevelToggle("show",function(){return new ge.bd({descriptor:o.show,value:c.dataLabelsSettings.show}).build()}),l.addGroup("applySettingsTo",function(P){return P.withDisplayName("Apply_Settings_To").withCollapsible(!1).addContainer("series",function(V){var k,z;if(V.withDisplayName("Series"),V.addContainerItem("all",r.localizer("All"),function(Oe){return(0,N.WW)(f,Oe)}),n)for(var J=0;J<i;J++){var fe=t.series[J],G=null!==(k=fe.labelSettings)&&void 0!==k?k:t.dataLabelsSettings;G.position&&s.indexOf(G.position)<0&&(G.position=ka.h.auto);var K=fe.identity.getSelector();if(Object.assign(f,{includeAltConstantValueSelector:!1,selector:t.hasDynamicSeries?(0,Ie.fd)(K):K,individualSelector:sn.call(r,!0),options:ks.call(r,void 0,G,K,void 0,s,t.hasDynamicSeries),instanceId:"sn-".concat(J)}),null!==(z=r.featureSwitches)&&void 0!==z&&z.labelEnhancementsM0){var ie=g?.labels.dynamicLabelReader.getLabelFieldSourceTypes(J);Object.assign(f,(0,d.__assign)((0,d.__assign)({},ie?{valueFieldSourceType:ie.valueFieldSourceType,detailFieldSourceType:ie.detailFieldSourceType,titleFieldSourceType:ie.titleFieldSourceType}:{}),{valueLabelPickerFallbackExpr:(0,Rt.CH)(t.valuesMetadataBySeries,J),dataLabelPickerSeriesType:(0,Rt.aC)(i,t.hasDynamicSeries,r.isComboChart)}))}V.addContainerItem(fe.displayName,fe.displayName,function(Oe){return(0,N.WW)(f,Oe)})}})}),l.build()}function Eo(){var r=this;if(this.showSeriesCard()){var e=this.originalData,t=e.seriesLabelSettings,a=this.showLabelPerSeries(),i=(0,d.__assign)((0,d.__assign)({},We.qn.seriesLabels),{show:{objectName:"seriesLabels",propertyName:"show"}}),n=new ge.CQ(new ge.lg("seriesLabels"),"Visual_SeriesLabels",i,this.localizer),s={cardBuilder:n,seriesLabelsProps:i,featureSwitches:this.featureSwitches,hostServices:this.hostService,seriesOptions:{enumeration:void 0,seriesLabelsSettings:t,selector:null,style:this.style,showAll:a}};return n.withDescription("Visual_SeriesDescription"),i.show&&n.addTopLevelToggle("show",function(){return new ge.bd({descriptor:i.show,value:s.seriesOptions.seriesLabelsSettings.show}).build()}),n.addGroup("applySettingsTo",function(o){return o.withDisplayName("Apply_Settings_To").withCollapsible(!1).addContainer("series",function(l){var u;if(l.withDisplayName("Series").addContainerItem("all",r.localizer("All"),function(A){return(0,le.eR)(s,A)}),r.showLabelPerSeries())for(var c=0,h=e.series;c<h.length;c++){var f=h[c],g=f.identity.getSelector();s.selector=e.hasDynamicSeries?(0,Ie.fd)(g):g,s.seriesOptions={enumeration:void 0,seriesLabelsSettings:null!==(u=f.seriesLabelSettings)&&void 0!==u?u:e.seriesLabelSettings,selector:g,style:r.style,showAll:void 0},l.addContainerItem(f.displayName,f.displayName,function(A){return(0,le.eR)(s,A)})}})}).build()}}function Ro(){var r=this,e=this.originalData;if(e&&e.series&&0!==e.series.length){var t=function(i){var n=i.lineStyle,s=i.selector;i.containerItemBuilder.addSimpleSlice("showSeries",new ge.bd({descriptor:(0,d.__assign)((0,d.__assign)({},We.qn.lineStyles.areaShow),{selector:s}),value:n.areaShow}).build(),function(o){return o.withDisabled(!s).withCustomDisplayName("Visual_Show_Data_Labels_PerSeries")}).addGroup("colors",function(o){return o.withDisplayName("Generic_Color").addSimpleSlice("shadeAreaMatchStrokeColor",new ge.bd({descriptor:(0,d.__assign)((0,d.__assign)({},We.qn.lineStyles.areaMatchStrokeColor),{selector:s}),value:n.areaMatchStrokeColor}).build()).addSimpleSlice("shadeAreaColor",new ge.BT({descriptor:(0,d.__assign)((0,d.__assign)({},We.qn.lineStyles.areaColor),{selector:s}),value:{value:n.areaColor}}).build(),function(l){return l.withDisabled(n.areaMatchStrokeColor)}).addSimpleSlice("shadeAreaTransparency",ge.JN.getTransparencySliderBuilder({descriptor:(0,d.__assign)((0,d.__assign)({},We.qn.dataPoint.transparency),{selector:s}),value:n.areaTransparency,localize:r.localizer}).build())})};return new ge.CQ(new ge.lg("shadeArea"),"Visual_Shapes_ShadeArea",[We.qn.lineStyles.areaShow,We.qn.dataPoint.transparency,We.qn.lineStyles.areaColor,We.qn.lineStyles.areaMatchStrokeColor],this.localizer).addTopLevelToggle("shadeAreaShow",function(){return new ge.bd({descriptor:We.qn.lineStyles.areaShow,value:r.data.lineStyle.areaShow}).build()}).addGroup("applySettingsTo",function(a){return a.withDisplayName("Apply_Settings_To").withCollapsible(!1).addContainer("series",function(i){if(i.withDisplayName("Series"),i.addContainerItem("all",r.localizer("All"),function(u){t.call(r,{containerItemBuilder:u,lineStyle:e.lineStyle})}),e.series.length>1)for(var n=function(c){i.addContainerItem(c.displayName,c.displayName,function(h){return t.call(r,{containerItemBuilder:h,lineStyle:c.lineStyle,selector:(0,Ie.fd)(c.identity.getSelector())})})},s=0,o=e.series;s<o.length;s++)n(o[s])})}).build()}}function Io(){var e,t,r=this,a=this.originalData;if(a&&a.series&&0!==a.series.length){var i=(0,b.NA)(null===(t=null===(e=this.dataView)||void 0===e?void 0:e.metadata)||void 0===t?void 0:t.objects,We.qn.lineStyles.showSeries,!0);return new ge.CQ(new ge.lg("lines"),"Visual_Lines",[We.qn.lineStyles.lineChartType,We.qn.lineStyles.interpolationStep,We.qn.lineStyles.interpolationSmooth,We.qn.lineStyles.interpolationSmoothParam,We.qn.lineStyles.strokeShow,We.qn.dataPoint.fill,We.qn.dataPoint.defaultColor,We.qn.lineStyles.lineStyle,We.qn.lineStyles.strokeWidth,We.qn.lineStyles.strokeLineJoin,We.qn.lineStyles.strokeTransparency,We.qn.lineStyles.strokeAutoScale,We.qn.lineStyles.strokeDashArray,We.qn.lineStyles.strokeDashCap,We.qn.layout.seriesOrderReversed],this.localizer).addGroup("applySettingsTo",function(n){return n.withDisplayName("Apply_Settings_To").withCollapsible(!1).withContainerDisabled(!i).addContainer("series",function(s){if(s.withDisplayName("Series").addContainerItem("all",r.localizer("All"),function(h){return Es.call(r,{containerItemBuilder:h,lineStyle:a.lineStyle})}),a.series.length>1)for(var o=function(f){s.addContainerItem(f.displayName,f.displayName,function(g){return Es.call(r,{containerItemBuilder:g,lineStyle:f.lineStyle,selector:(0,Ie.fd)(f.identity.getSelector())})})},l=0,u=a.series;l<u.length;l++)o(u[l])})}).build()}}function No(){if(this.supportsTotalLabels()){var e=this.originalData.totalLabelsSettings;if(e){var t=(0,d.__assign)((0,d.__assign)({},We.qn.totals),{precision:We.qn.totals.labelPrecision,displayUnits:We.qn.totals.labelDisplayUnits}),a=new ge.CQ(new ge.lg("totals"),"Visual_DataTotalLabels",t,this.localizer).withDescription("Visual_DataTotalLabelsDescription");return(0,N.XQ)({cardBuilder:a,dataLabelsProps:t,featureSwitches:this.featureSwitches,hostServices:this.hostService,options:Wo.call(this,void 0,e),individualSelector:sn.call(this,!1),showEnhancedLabelsFormattingOptions:!1})}}}function zo(){var r=this;if(!this.isAreaChart){var e=this.originalData;if(e&&e.series&&0!==e.series.length){var t=la.N_.error;return new ge.CQ(new ge.lg("errorBars"),"Visual_Error_Bars",[t.enabled,t.errorRange,t.barShow,t.barMatchSeriesColor,t.barColor,t.barWidth,t.barBorderColor,t.barBorderSize,t.shadeShow,t.shadeBandStyle,t.shadeColor,t.shadeMatchSeriesColor,t.shadeTransparency,t.labelShow,t.labelFontFamily,t.labelFontSize,t.labelBold,t.labelItalic,t.labelUnderline,t.labelColor,t.labelMatchSeriesColor,t.labelFormat,t.labelBackground,t.labelBackgroundColor,t.labelBackgroundTransparency,t.markerShape,t.markerShow,t.markerSize,t.showMarkerByDefault,t.tooltipShow,t.tooltipFormat],this.localizer,!0,!0).addGroup("applySettingsTo",function(a){return a.withDisplayName("Apply_Settings_To").withCollapsible(!1).addContainer("measure",function(i){i.withDisplayName("Series");for(var n=function(c){var h=_.first(c.usedInSeriesIndices);if(w.fF.assertValue(h,"lineChart - measure is not associated with any series"),null!=h){var f=c.metadataColumn,g=e.series[h];if(null==g)return"continue";var A=c.valueSelector.getSelector(),S=r.isComboChart?(0,qn.Yp)([mi.R.Rows,mi.R.Category]):(0,pn.Ue)(),C=(0,d.__assign)((0,d.__assign)({},A),{data:[S],highlightMatching:1});i.addContainerItem(f.queryName,f.displayName,function(L){return(0,bs.f)({localize:r.localizer,uncertainty:g.uncertainty,targetMeasure:c.metadataColumn.expr,measureSelector:A,dataPointSelector:C,featureSwitches:r.featureSwitches},L)})}},s=0,o=e.valuesMetadataBySeries;s<o.length;s++)n(o[s])})}).build()}}}function Bo(r,e){var t=this.originalData;if(t)switch(e.objectName){case v.Po:if(this.supportsForecast()){var a=void 0;_.isEmpty(t.anomalyDetections)||(a=this.localizer("Visual_AnomalyDetection_WarningMessage_NoWithForecast")),(0,v.$I)(r,t.forecastLines,this.style,a)}break;case ws.xn:this.supportsAnomalyDetection()&&(0,To.HL)(this.hostService,this.data,this.dataView,r,t.anomalyDetections,this.style,t.isScalar,e.selectors)}}function ks(r,e,t,a,i,n){return{enumeration:r,dataLabelsSettings:e,show:!0,position:!0,positionObject:i,displayUnits:!this.isStacked100,precision:!0,selector:t,showAll:a,fontSize:!0,fontFamily:!0,labelDensity:this.data.isScalar,enableBackground:e.enableBackground,backgroundColor:e.backgroundColor,backgroundTransparency:e.backgroundTransparency,style:this.style,bold:!0,italic:!0,underline:!0,enableDynamicLabelPickers:!n,isStacked100:this.isStacked100,leaderLines:!this.isStacked&&!this.isComboChart}}function Wo(r,e){return{enumeration:r,dataLabelsSettings:e,show:!0,displayUnits:!0,precision:!0,fontSize:!0,fontFamily:!0,enableBackground:e.enableBackground,backgroundColor:e.backgroundColor,backgroundTransparency:e.backgroundTransparency,style:this.style,bold:!0,italic:!0,underline:!0}}function Ho(r,e){var t;if(!this.data)return[];var a=[];if(void 0===e||3===e)for(var n=0,s=this.data.series;n<s.length;n++){var o=s[n];if(o.lineStyle.markerProperties.show){var l=null===(t=o?.identity)||void 0===t?void 0:t.getSelectorsByColumn(),u=this.hostService.getLocalizedString("MiniToolbar_Markers",o.displayName);a.push(r.createVisualSubSelectionForSingleObject({objectName:"markers",subSelectionType:3,displayName:u,showUI:!0,selectorsByColumn:l}))}}return a}function Uo(r){var e;switch(d3.select(r).attr(Be.Ez)){case"area":case"lines":var a=d3.select(r).datum(),i=null===(e=a?.identity)||void 0===e?void 0:e.getSelectorsByColumn();if(i)return i;break;case"data-labels":case"series-labels":var n=(0,Rt.wT)(r,this.data.series);if(n)return n;break;default:return}}function Go(r){var e,t,i=r.visualObjects[0].selectorsByColumn;if("markers"===r.visualObjects[0].objectName){var n=null===(e=this.activeData)||void 0===e?void 0:e.series;if(n)for(var s=0,o=n;s<o.length;s++){var l=o[s],u=null===(t=l.identity)||void 0===t?void 0:t.getSelectorsByColumn();if((0,Ie.Ic)(u,i))return is(l,this.viewModel)}}}function is(r,e){var t,a=e.renderContext.mainGraphicsPositionOverlay;if(a){var i=a.node();if(i){var n=i.getBoundingClientRect(),s=n.left,o=n.top,l=e.currentViewport,u=r.data,c=null!==(t=_.first(u))&&void 0!==t&&t.isY2?e.y2AxisProperties.scale:e.yAxisProperties.scale,h=l.scale,f=e.data.lineStyle.markerProperties.size*h,C=Math.max(f+1.2*f,10)*h;C%2==0&&++C;var L=1;if(u.length*C>l.width){var P=(0,it.SS)(l.width,50,4,C);L=Math.floor(u.length/P)}for(var V=[],k=0;k<u.length;k+=L){var z=u[k];z&&V.push({x:Math.floor(Ms(e,z,s)-C/2),y:Math.floor(Br.convertSvgYToClientY(c(z.value),h,o)-C/2),width:C,height:C,type:1})}var J=e.data.multipleDisplayName;return[{id:J?"".concat(r.key).concat(J):r.key,outline:{type:0,outlines:V,clipPath:{type:1,x:s,y:o,height:e.availableHeight*h,width:e.availableWidth*h}}}]}}return[]}function jo(r){if("area"===r.visualObjects[0].objectName){var t=this.findSubSelectedAreaElement({x:d3.event.clientX,y:d3.event.clientY});return t?[t]:void 0}}function Yo(r){var a,i,t=_.first(r).visualObjects;if(t.length>0){(a=t[0])&&a.selectorsByColumn&&(i=(0,Ie.fd)((0,Ie.tV)(a.selectorsByColumn)));var n=1===this.data.series.length;switch(a.objectName){case"lines":return i?(0,ae.w3)(this.hostService,(0,d.__assign)((0,d.__assign)({},We.zK.lineStyles.strokeColor),{selector:i}),null):void w.fF.assertFail("LineChart - line subselection should never have no selector");case"area":return i?(0,ae.w3)(this.hostService,void 0,(0,d.__assign)((0,d.__assign)({},We.zK.lineStyles.strokeColor),{selector:i})):void w.fF.assertFail("AreaChart - area subselection should never have no selector");case"markers":return i?(i=n?void 0:i,(0,ae.w3)(this.hostService,void 0,(0,d.__assign)((0,d.__assign)({},We.zK.markers.color),{selector:i}))):void w.fF.assertFail("LineChart - marker subselection should never have no selector");case"data-labels":var s=this.data.series.find(function(A){var S;return(0,Ie.Ic)(null===(S=A?.identity)||void 0===S?void 0:S.getSelectorsByColumn(),a.selectorsByColumn)});if(!s)return;var o=n?void 0:i,l=this.getSeriesAxisProperties(s),u=(0,it.d6)(l,this.data.dataLabelsSettings),c=We.qn.labels,h={fontFamilyReference:(0,d.__assign)((0,d.__assign)({},c.fontFamily),{selector:o}),fontSizeReference:(0,d.__assign)((0,d.__assign)({},c.fontSize),{selector:o}),boldReference:(0,d.__assign)((0,d.__assign)({},c.bold),{selector:o}),italicReference:(0,d.__assign)((0,d.__assign)({},c.italic),{selector:o}),underlineReference:(0,d.__assign)((0,d.__assign)({},c.underline),{selector:o}),fontColorReference:(0,d.__assign)((0,d.__assign)({},c.color),{selector:o}),displayUnitsReference:(0,d.__assign)((0,d.__assign)({},c.labelDisplayUnits),{selector:o}),precisionReference:(0,d.__assign)((0,d.__assign)({},c.labelPrecision),{selector:o}),backgroundReference:(0,d.__assign)((0,d.__assign)({},c.backgroundColor),{selector:o})};return(0,ae.Jf)({hostServices:this.hostService,omitSelectorForSingleSeries:n,individualSelector:sn.call(this,!n),selector:i,repetitionSelector:void 0,subSelectionStylesOptions:{precision:{defaultPrecision:u.getPrecision(!1,s.type)}}},h);case"total-labels":var g=We.qn.totals;return(0,ae.Jf)({hostServices:this.hostService,omitSelectorForSingleSeries:n,individualSelector:sn.call(this,!n),selector:i,repetitionSelector:void 0},{fontFamilyReference:g.fontFamily,fontSizeReference:g.fontSize,boldReference:g.bold,italicReference:g.italic,underlineReference:g.underline,fontColorReference:(0,d.__assign)((0,d.__assign)({},g.color),{selector:(0,Rt.hm)(sn.call(this,!1),void 0,void 0)}),displayUnitsReference:g.labelDisplayUnits,precisionReference:g.labelPrecision,backgroundReference:g.backgroundColor});default:return}}}function sn(r){return(0,N.WD)({featureSwitches:this.featureSwitches,hasCategories:null!=_.first(this.originalData.categories),hasDynamicSeries:this.originalData.hasDynamicSeries,hasSeriesSelector:r})}function Ko(r,e){if(!e){var i,n,a=_.first(r).visualObjects;if(!(a.length>0))return;i=a[0],_.isEmpty(i.selectorsByColumn)||(n=(0,Ie.fd)((0,Ie.tV)(i.selectorsByColumn)));var s={key:"Delete",nextValue:!1};switch(i.objectName){case"lines":case"area":return n?[{type:0,excludedResetFormattingIds:[We.qn.labels.show,(0,d.__assign)((0,d.__assign)({},We.qn.labels.showSeries),{selector:n}),(0,d.__assign)((0,d.__assign)({},We.qn.lineStyles.showMarker),{selector:n}),{objectName:"seriesLabels",propertyName:"show",selector:n}]},(0,d.__assign)((0,d.__assign)({type:2},We.qn.labels.showSeries),{enabledLabel:this.localizer("Format_AddDataLabels"),selector:n}),(0,d.__assign)((0,d.__assign)({type:2},We.qn.lineStyles.showMarker),{enabledLabel:this.localizer("Format_AddMarkers"),selector:n,keyboardShortcuts:[s]}),(0,d.__assign)((0,d.__assign)({type:2},{objectName:"seriesLabels",propertyName:"show"}),{enabledLabel:this.localizer("Format_AddSeriesLabel"),selector:n}),{type:1,destinationInfo:(0,d.__assign)((0,d.__assign)({},We.qn.lineStyles.lineStyle),{selector:this.data.series.length>1?n:void 0}),label:this.localizer("Format_Line")}]:void w.fF.assertFail("LineChart - line subselection should never have no selector");case"markers":return n?[(0,d.__assign)((0,d.__assign)({type:2},We.qn.lineStyles.showMarker),{disabledLabel:this.localizer("Delete"),selector:n,keyboardShortcuts:[s]}),{type:0,excludedResetFormattingIds:[(0,d.__assign)((0,d.__assign)({},We.qn.lineStyles.showMarker),{selector:n})]},{type:1,destinationInfo:(0,d.__assign)((0,d.__assign)({},We.qn.lineStyles.markerShape),{selector:this.data.series.length>1?n:void 0}),label:this.localizer("Format_Markers")}]:void w.fF.assertFail("LineChart - marker subselection should never have no selector");default:return}}}function Xo(r){var t,e=this,a=r.lineStyle,i=r.selector,n=r.containerItemBuilder,s=(0,Za.Iq)({containerItemBuilder:n,descriptors:{strokePattern:We.qn.lineStyles.lineStyle,strokeDashArray:We.qn.lineStyles.strokeDashArray,strokeAutoScale:We.qn.lineStyles.strokeAutoScale,strokeDashCap:We.qn.lineStyles.strokeDashCap,strokeLineJoin:We.qn.lineStyles.strokeLineJoin,strokeWidth:We.qn.lineStyles.strokeWidth},strokeData:a,selector:i,isSVGStroke:!0,featureSwitches:this.featureSwitches,localize:this.localizer});null===(t=s.find(function(o){return(0,$n.cd)(o.getSimpleControlDescriptor(),We.zK.lineStyles.strokeLineJoin)}))||void 0===t||t.withDisabled(!a.strokeShow||a.interpolation===Oo.Fu.smooth,"Visual_StrokeLineJoinDisabledReason"),n.addGroup("shape",function(o){return o.withDisplayName("Visual_Shape_Line").addSlices(s.map(function(l){return l.build()})).addSlices((0,yn.Ie)({containerItemBuilder:n,descriptors:(0,d.__assign)((0,d.__assign)({},We.qn.lineStyles),{interpolation:We.qn.lineStyles.lineChartType}),interpData:a,selector:i,localize:e.localizer,featureSwitches:e.featureSwitches,disabledIfHasSelector:!0}).map(function(l){return l.build()}))})}function Zo(r){var e,t,a,i=r.selector,n=r.lineStyle,s=r.containerItemBuilder,o=!i&&this.hasSingleStaticSeries,l=(0,Za.Iq)({containerItemBuilder:s,descriptors:{strokeColor:We.qn.dataPoint.fill,strokeTransparency:We.qn.lineStyles.strokeTransparency},strokeData:(0,d.__assign)((0,d.__assign)({},n),{strokeColor:o?null===(e=this.data.series[0])||void 0===e?void 0:e.lineStyle.strokeColor:n.strokeColor}),selector:i,colorSelector:o?(0,Ie.fd)(null===(t=this.data.series[0])||void 0===t?void 0:t.identity.getSelector()):i,featureSwitches:this.featureSwitches,localize:this.localizer});null===(a=l.find(function(u){return(0,$n.cd)(u.getSimpleControlDescriptor(),We.zK.lineStyles.strokeColor)}))||void 0===a||a.withDisabled(!this.hasSingleStaticSeries&&!i,"Visual_Color_AllSeries_DisabledReason"),s.addGroup("colors",function(u){return u.withDisplayName("Generic_Color").addSlices(l.map(function(c){return c.build()}))})}function Qo(r){var e=this;this.isStacked&&null==r.selector&&(this.originalData.hasDynamicSeries||this.originalData.series.length>1)&&r.containerItemBuilder.addGroup("layout",function(t){return t.withDisplayName("Layout").addSimpleSlice("seriesOrderReversed",new ge.bd({descriptor:We.qn.layout.seriesOrderReversed,value:e.data.layout.seriesOrderReversed}).build())})}function Es(r){var e=r.selector,t=r.lineStyle;r.containerItemBuilder.addSimpleSlice("showSeries",new ge.bd({descriptor:(0,d.__assign)((0,d.__assign)({},We.qn.lineStyles.strokeShow),{selector:e}),value:t.strokeShow}).build(),function(a){return a.withCustomDisplayName(e?"Visual_Show_Data_Labels_PerSeries":"Visual_ShowForAllSeries")}),Xo.call(this,r),Zo.call(this,r),Qo.call(this,r)}function rs(r){var e=this,t=r.markerStyle,a=r.selector,i=r.listType;r.containerItemBuilder.addSimpleSlice("showMarker",new ge.bd({descriptor:(0,d.__assign)((0,d.__assign)({},We.zK.markers.show),{selector:a}),value:t.show}).build(),function(n){return n.withDisabled(!a).withHidden("perCategory"===i||"staticPerCategories"===i)}).addGroup("markers",function(n){return n.withDisplayName("Visual_Shape").withDisabled(!t.show||"perCategory"===i).addSimpleSlice("markerShape",new ge.uY({descriptor:(0,d.__assign)((0,d.__assign)({},We.zK.markers.shape),{selector:a}),value:t.shape}).build()).addSimpleSlice("markerSize",new ge.mu({descriptor:(0,d.__assign)((0,d.__assign)({},We.zK.markers.size),{selector:a}),value:t.size,options:{minValue:{type:0,value:Ls.min},maxValue:{type:1,value:Ls.max},unitSymbol:gn.e_}}).build()).addSimpleSlice("markerRotation",ge.JN.getRotationSliderBuilder({descriptor:(0,d.__assign)((0,d.__assign)({},We.zK.markers.rotation),{selector:a}),value:t.rotation,localize:e.localizer}).build(),function(s){return s.withHidden(!e.featureSwitches.newMarkerProperties||!(0,Ma.Cd)(t.shape))})}).addGroup("colors",function(n){return n.withDisplayName("Generic_Color").withDisabled(!t.show).addSimpleSlice("markerColor",new ge.BT({descriptor:(0,d.__assign)((0,d.__assign)({},"perCategory"===i?(0,d.__assign)((0,d.__assign)({},We.zK.dataPoint.fill),{instanceKind:1}):We.zK.markers.color),{selector:a}),value:{value:t.color}}).build()).addSimpleSlice("markerTransparency",ge.JN.getTransparencySliderBuilder({descriptor:(0,d.__assign)((0,d.__assign)({},We.zK.markers.transparency),{selector:a}),value:t.transparency,localize:e.localizer}).build(),function(s){return s.withHidden(!e.featureSwitches.newMarkerProperties)})}),this.featureSwitches.newMarkerProperties&&r.containerItemBuilder.addGroup("border",function(n){return n.withDisplayName("Visual_Border").withDisabled(!(0,Ma.nK)(t.shape)||!t.show||"perCategory"===i).addSlices((0,Za.Iq)({containerItemBuilder:n,descriptors:la.$9,strokeData:t.stroke,selector:a,featureSwitches:e.featureSwitches,localize:e.localizer}).map(function(s){return s.build()}))})}function Jo(r,e){if(!this.featureSwitches.onObject||1!==e)return[];var t=this.isComboChart?xs.OA:We.qn,a=this.data.series.map(function(o){return{selector:o.identity.getSelector(),value:o.lineStyle.markerProperties.show}}),i=this.data.series.map(function(o){var l;return{selector:o.identity.getSelector(),value:null===(l=o.seriesLabelSettings)||void 0===l?void 0:l.show}}),n=this.data.series.map(function(o){var l;return{selector:o.identity.getSelector(),value:null===(l=o.labelSettings)||void 0===l?void 0:l.show}}),s=[Mr.v.create(t.lineStyles.showMarker,this.data.lineStyle.markerProperties.show,a).onToggleEnabled(Ka.W.createBooleanDataViewObjectChange(t.lineStyles.showMarkerByDefault,!1,{required:!0}),Ka.W.createBooleanDataViewObjectChange(t.lineStyles.showMarker,!0,{required:!0})).onToggleDisabled(Ka.W.createRevertToDefaultDataViewObjectChange("lineStyles",{required:!0})),Tr.$.create(t.lineStyles.showMarker,this.data.lineStyle.markerProperties.show).onToggleDisabled(Ka.W.createRevertToDefaultDataViewObjectChange("lineStyles",{required:!0})),Mr.v.create(We.qn.seriesLabels.backgroundColor,this.data.seriesLabelSettings.enableBackground).onToggleEnabled(Ka.W.createBooleanDataViewObjectChange(We.qn.seriesLabels.enableBackground,!0,{required:!0,inheritSelector:!0})),Tr.$.create(We.qn.seriesLabels.backgroundColor,this.data.seriesLabelSettings.enableBackground).onToggleEnabled(Ka.W.createBooleanDataViewObjectChange(We.qn.seriesLabels.enableBackground,!0,{required:!0})),Mr.v.create(We.qn.seriesLabels.show,this.data.seriesLabelSettings.show,i).onToggleEnabled(Ka.W.createBooleanDataViewObjectChange(We.qn.seriesLabels.showByDefault,!1,{required:!0}),Ka.W.createBooleanDataViewObjectChange(We.qn.seriesLabels.show,!0,{required:!0})).onToggleDisabled(Ka.W.createRevertToDefaultDataViewObjectChange("seriesLabels",{required:!0})),Tr.$.create(We.qn.seriesLabels.show,this.data.seriesLabelSettings.show).onToggleDisabled(Ka.W.createRevertToDefaultDataViewObjectChange("seriesLabels",{required:!0})),Mr.v.create(t.labels.backgroundColor,this.data.dataLabelsSettings.enableBackground).onToggleEnabled(Ka.W.createBooleanDataViewObjectChange(t.labels.enableBackground,!0,{inheritSelector:!0})),Tr.$.create(t.labels.backgroundColor,this.data.dataLabelsSettings.enableBackground).onToggleEnabled(Ka.W.createBooleanDataViewObjectChange(t.labels.enableBackground,!0)),Mr.v.create(t.labels.showSeries,this.data.dataLabelsSettings.show,n).onToggleEnabled(Ka.W.createBooleanDataViewObjectChange(t.labels.showByDefault,!1),Ka.W.createBooleanDataViewObjectChange(t.labels.show,!0)).onToggleDisabled(Ka.W.createRevertToDefaultDataViewObjectChange("labels")),Tr.$.create(t.labels.show,this.data.dataLabelsSettings.show).onToggleDisabled(Ka.W.createRevertToDefaultDataViewObjectChange("labels"))];return Wt.o.getDataViewObjectsBehaviorChanges(r,s)}var qo=x(34519),Rs=x(12198),mn=x(64067),el=function(){function r(e){this.dataPoints=e.dataPoints,this.isComboChart=e.isComboChart,this.isScalar=e.isScalar,this.hasCategories=e.hasCategories}return r.prototype.queryRegion=function(e){var t=this,a=[],i=e.dataSpace;return(this.isScalar||this.hasCategories&&void 0!==i.left&&void 0!==i.right)&&(a=_.filter(this.dataPoints,function(n){return(0,te.bl)(i.left.value,t.isScalar?n.categoryValue:n.categoryIndex)&&(0,te.bl)(t.isScalar?n.categoryValue:n.categoryIndex,i.right.value)&&(0,te.bl)(t.getBottom(i,n),n.value)&&(0,te.bl)(n.value,t.getTop(i,n))})),a},r.prototype.getBottom=function(e,t){return t.isY2||this.isComboChart&&e.bottom2?e.bottom2.value:e.bottom.value},r.prototype.getTop=function(e,t){return t.isY2||this.isComboChart&&e.top2?e.top2.value:e.top.value},r}(),Sn=(0,W.CH)("line"),Nn=(0,W.CH)("focus-element"),Ns=(0,W.CH)("position-rect"),ss=(0,W.CH)("cat"),xn=(0,W.CH)("catArea"),zs=(0,W.CH)("dot"),Bs=(0,W.CH)("point"),os=(0,W.CH)("circle-item"),zn=(0,W.CH)("marker-line"),ls=(0,W.CH)("interactivity-line"),us=(0,W.CH)("selected-markers"),Wr="path",Bn="circle",Ws=(0,W.CH)("selection-circle"),Hs=(0,W.CH)("selection-circles");function dl(r,e){var t=this,a=this.getChartX(r);e.length>0&&Us.call(this,a),this.hoverLineContext.selectAll(os.selector).data(_.filter(e,function(i){return i.showHoverlineDots&&null!=i.value})).join(function(i){return i.append(Bn).classed(os.class,!0)}).attr("fill",function(i){return i.marker.color}).attr("r",Rn(this.data.lineStyle)).attr("cx",a).attr("cy",function(i){return Or(t.viewModel,i)})}function hl(){this.hoverLine.style("opacity",Fa.OH),this.hoverLineContext.selectAll(os.selector).remove()}function vl(){this.hoverLineContext=this.mainGraphicsSVG.append("g").classed("hover-line",!0),this.hoverLine=this.hoverLineContext.append("line").classed("interactive",this.mobileTileInteractive).attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",0).style("opacity",Fa.OH).style("stroke",Ze.v.getThemeColor(this.style,"foregroundNeutralSecondary")),this.mobileTileInteractive&&(this.dragHandle=this.hoverLineContext.append("circle").attr("cx",0).attr("r","6px").classed("drag-handle",!0),this.hoverLineContext.append("g").classed(Hs.class,!0))}function Us(r){this.hoverLine.attr("x1",r=r||0).attr("x2",r).attr("y1",0).attr("y2",this.availableHeight).style("opacity",1)}function fl(r,e){var t=this;Us.call(this,r),this.mobileTileInteractive&&(this.dragHandle.attr("cx",r).attr("cy",this.availableHeight),this.hoverLineContext.select(Hs.selector).selectAll(Ws.selector).data(this.activeData.series,function(a){return a.identity.getKey()}).join(function(a){return a.append(Bn).classed(Ws.class,!0)}).attr("r",Rn(this.activeData.lineStyle)).attr("cx",r).attr("cy",function(a){return a.data[e]?Or(t.viewModel,a.data[e]):0}).style("opacity",function(a){return _.some(a.data,function(i){return!!i&&i.categoryIndex===e})?1:0}).style("fill",function(a){return a.lineStyle.strokeColor}))}function bn(r){return r&&null!==r.value}function cs(r,e){return(e?_.findLast:_.find)(r.data,function(a,i,n){var s=e?n[i-1]:n[i+1];return null!=a&&null!=a.value&&null!=s&&null!=s.value})}var Gs={findSubSelectedAreaElement:function(e,t){if(null!=e.renderContext.mainGraphicsSVG){var a=e.renderContext.mainGraphicsSVG.selectAll(Sn.selector).filter(function(n){return n.data.some(function(s){return bn(s)})}).nodes(),i=function(r,e,t){for(var a,i=Number.MAX_VALUE,s=r.renderContext.mainGraphicsSVG.node().getBoundingClientRect(),o=s.left,l=s.top,u=0;u<t.length;u++){var h=Cl(e.x,t[u],function(g){return Br.convertSvgXToClientX(g,r.currentViewport.scale,o)},function(g){return Br.convertSvgYToClientY(g,r.currentViewport.scale,l)}).y,f=e.y-h;f>=-4&&i>(f=Math.abs(f))&&(i=f,a=u)}return a}(e,t,a);if(null!=i)return e.renderContext.mainGraphicsSVG.selectAll(xn.selector).filter(function(n){return n.index===i}).node()}}};function Cl(r,e,t,a){for(var n,l,s=0,o=e.getTotalLength();n=e.getPointAtLength(l=s+o>>1),(0,Fa.lO)(n),t&&(n.x=t(n.x)),a&&(n.y=a(n.y)),l!==o&&l!==s||n.x===r;)if(n.x>r)o=l;else{if(!(n.x<r))break;s=l}return n}function Wn(r,e){return r.renderContext.mainGraphicsContext.selectAll(Nn.selector).data(e?[e]:[]).join(function(t){return t.append(Bn).attr("class",Nn.class).attr("tabindex",0).attr("focusable",!0).attr("role","option").classed(Da.Pg,!kt.M.isInternetExplorerOrEdge())}).attr("aria-selected",function(t){return t.selected}).attr("aria-label",function(t){var a,i;if(as(t))return r.hostService.getLocalizedString("Anomaly_ScreenReader_Hint");var n=!1;In(r.activeData)&&(n=_.some(r.activeData.anomalyDetections[0].anomaliesCategoryIndex,function(l){return l===t.categoryIndex}));var o=(0,ii.X)(t.tooltipInfo);return!(null===(a=t?.uncertainty)||void 0===a)&&a.upperTooltip&&(o+=" ".concat((0,ii.X)([t.uncertainty.upperTooltip]))),!(null===(i=t?.uncertainty)||void 0===i)&&i.lowerTooltip&&(o+=" ".concat((0,ii.X)([t.uncertainty.lowerTooltip]))),n&&(o+=" ".concat(r.hostService.getLocalizedString("AnomalyPoint_ScreenReader_Hint"))),o}).attr("cx",function(t){return er(r,t)}).attr("cy",function(t){return as(t)?(0,kn.v8)(t,r.yAxisProperties.scale,r.activeData.anomalyDetections[0].marker.size):Or(r,t)}).attr("r",function(t){return as(t)?(0,kn.bj)(r.activeData.anomalyDetections[0].marker.size):t.marker.show?t.marker.size*dr.Wo.sizeRatio:t.marker.focusOnlySize}).style("fill","none")}var Al=function(){function r(e,t,a){this.tooltipService=e,this.mainGraphicsSVG=t,this.supportsHoverLineTooltip=a,this.isHoverLineTooltipActive=!1,a&&(this.hoverLineTooltipOverlay=t.append("rect").classed(_s.class,!0))}return r.prototype.applyTooltips=function(e,t,a){!this.supportsHoverLineTooltip||e.activeData.binnedLineSamplingApplied&&e.activeData.hasDynamicSeries?this.applyPointTooltip(e,t,a):this.applyHoverLineTooltip(e,t,a)},r.prototype.removeTooltips=function(e,t){this.removePointTooltip(e),this.removeHoverLineTooltip(t)},r.prototype.applyHoverLineTooltip=function(e,t,a){this.removePointTooltip(e),this.hoverLineTooltipOverlay.attrs({x:0,width:e.availableWidth,height:e.availableHeight}),this.tooltipService.addTooltip(this.mainGraphicsSVG,function(s){var c,l=t.getCategoryIndexFromTooltipEvent(s,s.elementCoordinates[0]),u=a.getHoverLineDataForCategory(l);return u&&u.hasUncertainty&&(c=t.getYValueFromTooltipEvent(s.elementCoordinates[1],s.context)),r.getSeriesTooltipInfo(u,c)},function(n){return r.getCategoryIdentityForHoverLineTooltipEvent(t,a,n)},!0),this.mainGraphicsSVG.on("mouseout.hoverline",function(){return a.clearHoverLine()}),this.mainGraphicsSVG.on("touchmove.hoverline",function(){return a.clearHoverLine()}),this.setHoverLineTooltipActive(!0)},r.prototype.removeHoverLineTooltip=function(e){this.isHoverLineTooltipActive&&(e.clearHoverLine(),this.tooltipService.removeTooltips(this.mainGraphicsSVG),this.mainGraphicsSVG.on(".hoverline",null),this.setHoverLineTooltipActive(!1))},r.prototype.setHoverLineTooltipActive=function(e){this.isHoverLineTooltipActive=e},r.prototype.applyPointTooltip=function(e,t,a){this.removeHoverLineTooltip(a);var n=e.isComboChart?function(o){return r.getCategoryIdentityForHoverLineTooltipEvent(t,a,o)}:function(o){return o.data&&[o.data.identity]},s=function(l){var u;return null===(u=l.data)||void 0===u?void 0:u.tooltipInfo};this.tooltipService.addTooltip(e.interactivityLines,function(l){return t.getTooltipInfoForPoint(l,l.elementCoordinates[0])},n,!0),this.tooltipService.addTooltip(e.dots,s,n,!0),this.tooltipService.addTooltip(e.explicitDots,s,n,!0),this.tooltipService.addTooltip(e.focusElement,s,n,!0)},r.prototype.removePointTooltip=function(e){this.isHoverLineTooltipActive||(this.tooltipService.removeTooltips(e.interactivityLines),this.tooltipService.removeTooltips(e.dots),this.tooltipService.removeTooltips(e.explicitDots))},r.getCategoryIdentityForHoverLineTooltipEvent=function(e,t,a){var i;if(a){if(a.data&&Ps(a.data))return null;var s=e.getCategoryIndexFromTooltipEvent(a,a.elementCoordinates[0]);return t.getHoverLineIdentities(s,null===(i=a.data)||void 0===i?void 0:i.data)}},r.getSeriesTooltipInfo=function(e,t){var a,i,n,s,o;if(!e)return null;var l=e.dataPoints;if(_.isEmpty(l))return null;var u={show:!1,color:"#000000",transparency:100,shape:Ma.ZO.circle},c=!_.isEmpty(l)&&l[0].seriesDisplayName,h=[],f=function(Xe){return!(h.length>=r.MaxNumberOfItems||(h.push(Xe),0))},g=e.legendMarkerRendering,A=g!==nn._.markerOnly&&g!==nn._.markerCircleDefault,S=l[0].additionalTooltipItems,L=function(Xe){return A?Xe.line:void 0};if(l.every(function(Je){return _.isEqual(Je.additionalTooltipItems,S)})){var P=[];for(var V in l)if(null!=(k=l[V]).value){if(!f({header:k.category,subheader:k.multipleDisplayName,displayName:k.seriesName||k.measureDisplayName,value:null!==(n=null===(i=null===(a=k.uncertainty)||void 0===a?void 0:a.rangeTooltip)||void 0===i?void 0:i.value)&&void 0!==n?n:k.formattedValue,marker:k.marker,line:L(k)}))break;P.push(+V)}e.hasUncertainty&&(w.fF.assertValue(t,"expect to have VerticalPositionInfo if uncertainty information present"),h=function(r,e,t,a){w.fF.assert(function(){return r.length===t.length},"augmentTooltipInfoWitUncertainty -- expected length of tooltipItems and mapping array to be identical");for(var i=[],n=1/0,s=-1,o=0,l=t.length;o<l;o++)if((c=e[t[o]]).uncertainty)if(c.isY2)(h=Math.abs(c.value-a.y2.point))<a.y2.threshold?i.push(o):h<n&&(n=h,s=o);else{var h;(h=Math.abs(c.value-a.y.point))<a.y.threshold&&i.push(o),h<n&&(n=h,s=o)}var f=[];for(o=0,l=t.length;o<l;o++){var c=e[t[o]],g=r[o];if(_.includes(i,o)||s===o){var S=c.uncertainty;w.fF.assertValue(S,"added point as having error when no uncertainty info exists"),S.upperTooltip&&f.push((0,d.__assign)({header:c.category,subheader:c.multipleDisplayName},S.upperTooltip)),f.push(g),S.lowerTooltip&&f.push(S.lowerTooltip)}else f.push(g)}return f}(h,l,P,t));for(var z=0,J=S??[];z<J.length&&f({displayName:(fe=J[z]).displayName,value:fe.value,marker:u});z++);}else for(var G=0,K=l;G<K.length;G++){var k=K[G];if(h.length>=r.MaxNumberOfItems)break;if(null!=k.value){c&&f({header:k.category,subheader:k.multipleDisplayName,displayName:k.seriesDisplayName,value:k.seriesName,marker:k.marker,line:L(k)}),f({header:k.category,subheader:k.multipleDisplayName,displayName:c?k.measureActualDisplayName:k.measureDisplayName,value:k.formattedValue,marker:c?u:k.marker,line:c?void 0:L(k)});for(var ie=0,Oe=null!==(s=k.additionalTooltipItems)&&void 0!==s?s:[];ie<Oe.length&&f({header:k.category,subheader:k.multipleDisplayName,displayName:(fe=Oe[ie]).displayName,value:fe.value,marker:u});ie++);}}for(var je=0,ke=null!==(o=e.additionalTooltipItems)&&void 0!==o?o:[];je<ke.length;je++){var fe;if(!f({header:l[0].category,subheader:l[0].multipleDisplayName,displayName:(fe=ke[je]).displayName,value:fe.value,marker:u}))break}return 0===h.length?null:h},r.MaxNumberOfItems=15,r}(),mr=We.zK.general.formatString,wl=function(r){function e(t){var a=r.call(this,t)||this;return a.options=t,a.pathXAdjustment=0,a.deferDragMoveOperation=(0,pi.S5)(function(){if(a.lastDragMoveXPosition&&a.data&&a.margin){var i=e.findCategoryIndex({pointX:a.lastDragMoveXPosition-a.margin.left,offsetX:0,categoryData:a.data.categoryData,currentViewport:a.currentViewport,scale:a.xAxisProperties.scale,categoryThickness:a.xAxisProperties.categoryThickness,isScalar:a.data.isScalar});a.selectColumn(i),a.lastDragMoveXPosition=void 0}}),a.tooltipsEnabledOnHost=t.tooltipsEnabled,a.markerRenderer=new dr.Wo,a.anomalyNavigationHelper=new bo.B,a}return(0,d.__extends)(e,r),e.getInteractiveLineChartDomElement=function(t){return t.children("svg").get(0)},e.createStackedValueDomain=function(t,a){if(w.fF.assertValue(t,"data"),0===t.length)return null;var i=[d3.min(t,function(s){return d3.min(s.data,function(o){return o&&o.stackedValue})}),d3.max(t,function(s){return d3.max(s.data,function(o){return o&&o.stackedValue})})];if(a){var n=1e-4;i[0]=(0,te.W0)(i[0],n),i[1]=(0,te.W0)(i[1],n)}return i},Object.defineProperty(e.prototype,"lineChartType",{get:function(){return this.options.lineChartType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isAreaChart",{get:function(){return 2===this.lineChartType||16===this.lineChartType||32===this.lineChartType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isStacked",{get:function(){return 16===this.lineChartType||32===this.lineChartType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isStacked100",{get:function(){return 32===this.lineChartType},enumerable:!1,configurable:!0}),e.prototype.initRenderer=function(t){var a=this;if(r.prototype.initRenderer.call(this,t),this.svg.classed(e.ClassName,!0),this.mainGraphicsSVG=this.svg.append("svg").classed(e.lineChartSVGClassName,!0),this.svgDefs=this.mainGraphicsSVG.append("defs"),this.lineChartTooltipHelper=new Al(this.tooltipService,this.mainGraphicsSVG,!this.isComboChart&&!this.mobileTileInteractive),this.mainGraphicsContext=this.mainGraphicsSVG.append("g").attr("role","listbox").attr("aria-label",this.localizer("Visual_Plot")).attr("aria-live","polite").classed(e.MainGraphicsContextClassName,!0),this.mainGraphicsContext.append("g").attr("class",us.class),this.interactivityService&&(this.isComboChart?this.mainGraphicsContext.attr(Ia.Rh,!0):(t.useManagedTabIndex?this.mainGraphicsContext.classed(Ra.rG.class,!0).attr(Ia.Rh,!0):this.mainGraphicsContext.attr("tabindex",0).attr("focusable",!0),this.mainGraphicsContext.classed(Da.Pg,!kt.M.isInternetExplorerOrEdge()))),vl.call(this),this.xAxisProperties={d3Axis:null,scale:null,valueType:null,formatter:null,graphicsContext:null,values:[],axisLabel:null,isCategoryAxis:!0},this.mobileTileInteractive){var n=e.getInteractiveLineChartDomElement(this.element),s=function(){a.lastDragMoveXPosition=d3.mouse(n)[0],a.deferDragMoveOperation()},o=d3.drag().on("drag",s);d3.select(n).style("touch-action","none").call(o).on("click",s)}},e.prototype.setData=function(t,a){var i,n,s;if(this.data=this.originalData={series:[],totals:[],legendData:(0,m.Fe)(this.style),isScalar:!1,dataLabelsSettings:ts(this.style,this.isComboChart,this.isStacked100),seriesLabelSettings:pt(this.style),hasDynamicSeries:!1,hasHighlights:!1,categories:[],categoryMetadata:void 0,valuesMetadata:[],categoryData:[],categoryIdentities:[],lineStyle:es(),binnedLineSamplingApplied:!1,legendMarkerRendering:nn._.markerCircleDefault,matchLineColor:!1,layout:{seriesOrderReversed:!1}},this.focusedDatum=void 0,_.isEmpty(t))this.dataView=void 0;else{var o=_.first(t);if(o?.categorical){this.dataView=o;var c,l=o.categorical.categories,u={text:!0};l&&!_.isEmpty(l)&&(l[0].source&&l[0].source.type&&(u=l[0].source.type),c=(0,re.A8)(l[0]));var h=null===(i=this.hostService)||void 0===i?void 0:i.tooltips(),f=this.tooltipsEnabled=this.tooltipsEnabledOnHost&&(!h||h?.enabled());this.data=this.originalData=Vs.convert({dataView:o,style:this.style,isScalar:(0,re.PX)(null!==(s=null===(n=o.metadata)||void 0===n?void 0:n.objects)&&void 0!==s?s:null,We.zK.categoryAxis.axisType,u,c,(0,aa.n$)(o)),interactivityService:this.interactivityService,isComboChart:this.isComboChart,tooltipsEnabled:f,forecastDataView:_.find(t,function(C){return(0,v.Aq)(C)}),anomalyDetectionDataView:_.find(t,function(C){return(0,R.Ik)(C)}),isStacked:this.isStacked,isAreaChart:this.isAreaChart,isStacked100:this.isStacked100,multipleInfo:a,supportsTotalLabels:!a&&this.supportsTotalLabels(),featureSwitches:this.featureSwitches,hostServices:this.hostService});var A=this.data.categoryIdentities;this.suppressAnimation=e.shouldSuppressAnimations(this.previousCategoryIds,A),this.previousCategoryIds=A;var S=_.find(this.data.series,function(C){return C.data[0]});this.focusedDatum=S?.data[0]}}},e.shouldSuppressAnimations=function(t,a){var i;if(null!=t&&!(t.length>sa.dt||a.length>sa.dt))if(i=!1,0===t.length)i=!0;else for(var n=0,s=Math.min(t.length,a.length);n<s;n++)if(!Q.l0.isEqual(t[n],a[n])){i=!0;break}return i},e.prototype.getCategoryDomain=function(t){var a;return D.createDomain(t.series,this.getCategoryValueType(),t.isScalar,[D.createScalarDomainOptions(null===(a=e.getForecastDomain(t.forecastLines))||void 0===a?void 0:a.x,0)])},e.prototype.getAxesDomains=function(t,a){var i,n,s,o;if(!this.data)return{};var l=this.data,u={};if(a.categoryAxis&&l.isScalar){var c=this.getCategoryDomain(l);if(c){D.assertScalarDomain(c.domain);var h=(i=c.domain)[0],f=i[1];void 0!==h&&void 0!==f&&(u.categoryAxis=[h,f])}}if(a.valueAxis||a.secondaryValueAxis){var g=null===(o=e.getForecastDomain(l.forecastLines))||void 0===o?void 0:o.y;if(a.valueAxis){var A=this.getValueDataDomain(t,!1),S=(n=D.mergeDomains(g,A))[0],C=n[1];void 0!==S&&void 0!==C&&(u.valueAxis=[S,C])}if(a.secondaryValueAxis){var L=this.getValueDataDomain(t,!0),P=(s=D.mergeDomains(g,L))[0],V=s[1];void 0!==P&&void 0!==V&&(u.secondaryValueAxis=[P,V])}}return u},e.prototype.getValueDataDomain=function(t,a){var i=e.getDataForValueAxis(this.data,a).seriesData;return this.isStacked?e.createStackedValueDomain(i,this.isStacked100):D.createUncertaintyAwareValueDomain(i,t)},e.prototype.hasLegend=function(){return this.data&&(this.data.hasDynamicSeries||this.data.series&&(this.data.series.length>1||this.data.valuesMetadata.length>1))},e.prototype.setFilteredData=function(t,a){var i=(0,me.ED)(this.data);i.series=e.sliceSeries(i.series,t,a),i.categories=i.categories.slice(t,a),this.clippedData=i},e.getCategoryCount=function(t){var a;return(null===(a=t.series)||void 0===a?void 0:a.length)>0?t.series[0].data.length:0},e.prototype.getSeriesLabelsSettings=function(){return(0,me.ED)(this.data).seriesLabelSettings},e.getForecastDomain=function(t){if(!_.isEmpty(t)){for(var a=[],i=[],n=0,s=t;n<s.length;n++){var o=s[n];_.isEmpty(o.points)||(a.push.apply(a,_.map(o.points,function(l){return l.point.x})),i.push.apply(i,_.map(o.points,function(l){return l.point.y})),a.push.apply(a,_.map(o.points,function(l){return l.upperBound.x})),i.push.apply(i,_.map(o.points,function(l){return l.upperBound.y})),a.push.apply(a,_.map(o.points,function(l){return l.lowerBound.x})),i.push.apply(i,_.map(o.points,function(l){return l.lowerBound.y})))}return{x:d3.extent(a),y:d3.extent(i)}}},e.prototype.calculateAxesProperties=function(t){var i,n,s,o,l,a=this;this.updateCurrentViewport(t);var u=t.categoryAxisOptions,c=t.valueAxisOptions,h=e.getCategoryCount(this.data),f=this.data?(0,p.is)({data:this.data,availableWidth:this.availableWidth,categoryCount:h,preferredCategoryWidth:null!==(n=null===(i=this.data)||void 0===i?void 0:i.preferredCategoryWidth)&&void 0!==n?n:null,domain:null===(o=D.createDomain(this.data.series,D.getCategoryValueType(null===(s=this.data)||void 0===s?void 0:s.categoryMetadata),this.getVisualCategoryAxisIsScalar(),[t.categoryAxisOptions.includeDomain]))||void 0===o?void 0:o.domain,isScalar:this.getVisualCategoryAxisIsScalar(),cartesianOptions:this.options,trimOrdinalDataOnOverflow:t.trimOrdinalDataOnOverflow,outerPaddingRatio:t.outerPaddingRatio,innerPaddingRatio:t.innerPaddingRatio}):(0,p.u8)(),g=this.adjustLayoutForScroll(this.data,h,t.trimOrdinalDataOnOverflow,f),A=g.series,S=!1,C=this.data.valuesMetadata;if(_.some(A,function(Gt){return Gt.isY2})){var L=e.getDataForValueAxis(g,S=t.roleName===mi.R.Y2);A=L.seriesData,C=L.valuesMetadata}var P=!_.isEmpty(g.series)&&g.series[0].xCol,V=!_.isEmpty(A)&&A[0].yCol,k=this.getAxesDomains(!1,{categoryAxis:!0,valueAxis:!S,secondaryValueAxis:S}),z=D.getAxisFormatString(A),J=D.createScalarDomainOptions(S?k.secondaryValueAxis:k.valueAxis,0);J=D.mergeScalarAxisDomains(c.includeDomain,J);var fe=g.isScalar?D.mergeScalarAxisDomains(D.createScalarDomainOptions(k.categoryAxis,0),u.includeDomain):this.getCategoryDomain(g),G=this.getPreferredPlotArea(f),K=function(da){var ua,_t="x"===da,qt="y"===da,ga=_t?u:c;return{pixelSpan:_t?G.width:G.height,domainOptions:_t?fe:J,metaDataColumn:_t?P:C,axisZoom:t.axisZoom,isScalar:qt||g.isScalar,isVertical:qt,isCategoryAxis:_t,forcedTickCount:t.forcedTickCount,axis:(0,d.__assign)((0,d.__assign)({},ga.axis),{invertAxis:ga.axis.invertAxis&&(qt||g.isScalar)}),useTickIntervalForDisplayUnits:!0,margin:a.margin,includeZero:!!qt&&a.isStacked&&(null===(ua=a.data)||void 0===ua?void 0:ua.series.length)>1&&D.shouldIncludeZero(ga.includeDomain),zeroScalarDomain:e.DefaultZeroScalarDomain,formatString:_t?(0,F.EO)(P,mr):a.isStacked100?a.hostService.getLocalizedString("Percentage"):z??(0,F.EO)(V,mr),outerPadding:_t&&g.isScalar?e.ScalarOuterPadding:0,outerPaddingRatio:_t?f.outerPaddingRatio:0,categoryThickness:_t?f.categoryThickness:void 0,allowSingleScalarTick:!!_t&&g.isScalar,maxTickCount:_t?g.scalarKeyCount:void 0,preventNice:_t?!!g.isScalar&&D.hasForcedDomain(fe):D.hasForcedDomain(J),shouldClamp:!qt&&void 0,isSecValueAxis:qt?S||a.isComboChart:void 0,is100Pct:qt&&a.isStacked100,getValueFn:_t?function(Ta,Ha){return(0,p.dZ)(g,Ta,Ha,g.isScalar)}:void 0}},ie=D.createAxis(K("y")),Oe=!1,je=0,ke=!1;if(ie.dataDomain&&_.isNumber(ie.dataDomain[0])&&_.isNumber(ie.dataDomain[1])&&(Oe=(null===(l=g.totalLabelsSettings)||void 0===l?void 0:l.show)&&this.supportsTotalLabels(),je=e.getMaximumMarkerSize(g.series),ke=_.some(g.anomalyDetections,function(Gt){return-1!==Gt.highestAnomalyPointIndex||-1!==Gt.lowestAnomalyPointIndex})),Oe||je||ke){w.fF.assert(function(){return!!ie.dataDomain&&_.isNumber(ie.dataDomain[0])&&_.isNumber(ie.dataDomain[1])});var Je=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],Xe=!1,wt=function(da){Je=[Math.min(Je[0],da[0]),Math.max(Je[1],da[1])],Xe=!0};if(Oe){var Yt=e.adjustDomainForLabels(ie,g);Yt.adjusted&&wt(Yt.domain)}if(je){var Ut=e.adjustDomainCommon(ie,je);Ut.adjusted&&wt(Ut.domain)}ke&&wt((0,ws.LS)(ie.dataDomain,ie.scale,g.anomalyDetections)),Xe&&(ie=D.createAxis((0,d.__assign)((0,d.__assign)({},K("y")),{domainOptions:D.mergeScalarAxisDomains(c.includeDomain,J,D.createScalarDomainOptions(Je,0)),preventNice:!0})))}S?this.y2AxisProperties=ie:this.yAxisProperties=ie;var Ct=D.createAxis(K("x"));return this.interactivityService&&!this.data.isScalar&&(Ct.categoryIdentities=_.map(g.categoryIdentities,function(Gt){return function(){return Gt}})),[Ct,ie]},e.prototype.getCategoryValueType=function(){return D.getCategoryValueType(this.data.scalarMetadata||this.data.categoryMetadata)},e.getDataForValueAxis=function(t,a){var n=t.valuesMetadata,s=a?{roles:{Y2:!0}}:{roles:{Y:!0}};return{seriesData:_.filter(t.series,function(o){return o.isY2===a}),valuesMetadata:_.filter(n,s)}},e.prototype.adjustLayoutForScroll=function(t,a,i,n){if(this.clippedData=void 0,t&&!t.isScalar&&!this.options.isScrollable&&i){var s=Math.min(a,n.categoryCount);a!==s&&((t=this.clippedData=(0,me.ED)(t)).series=e.sliceSeries(t.series,0,s),t.categories=t.categories.slice(0,s),t.categoryIdentities&&(t.categoryIdentities=t.categoryIdentities.slice(0,s)))}return t},e.prototype.setAxesLayout=function(t){this.updateCurrentViewport(t.layout),this.xAxisProperties=t.layout.axes.x,2&t.axisType&&(this.isComboChart?this.yAxisProperties=t.layout.axes.y2:this.y2AxisProperties=t.layout.axes.y2),1&t.axisType&&(this.yAxisProperties=t.layout.axes.y1);var a=this.data?{categoryCount:this.xAxisProperties.values.length,categoryThickness:this.xAxisProperties.categoryThickness,outerPaddingRatio:this.xAxisProperties.outerPaddingRatio,innerPaddingRatio:this.xAxisProperties.innerPaddingRatio,isScalar:this.getVisualCategoryAxisIsScalar()}:(0,p.u8)();this.data=this.adjustLayoutForScroll(this.data,e.getCategoryCount(this.data),t.trimOrdinalDataOnOverflow,a)},e.adjustDomainForLabels=function(t,a){var i=e.getCategoryCount(a)?a.series[0].data[0].labelFormatString:"",n=(0,N.fI)(),s=(0,it.d6)(t,a.totalLabelsSettings),o=n.getOrCreate(i,a.totalLabelsSettings,s.units,a.totalLabelsSettings.precision),l=t.dataDomain[0].toString(),u=(0,it.Bw)(o.format(l)),c=(0,j.qk)(a.totalLabelsSettings.fontProperties,u),h=Z.b.estimateSvgTextHeight(c);return e.adjustDomainCommon(t,h+O.FJ)},e.getMaximumMarkerSize=function(t){return t.length>0?d3.max(t,function(a){return a.lineStyle.markerProperties.show?a.lineStyle.markerProperties.size:0})*dr.Wo.sizeRatio:0},e.adjustDomainCommon=function(t,a){var i=t.dataDomain,n=t.scale.domain(),s=t.scale,o=s(i[0])+a,l=s(i[1])-a,u=s.invert(o),c=s.invert(l);return D.adjustDomainWithConstantPixelDifference(n[0],n[1],u,c)},e.prototype.getFormattingCards=function(t){return Fo.call(this,t)},e.prototype.getDisambiguationSubSelectables=function(t,a){return Ho.call(this,t,a)},e.prototype.getSelectorsByColumnFromSubselectedElement=function(t){return Uo.call(this,t)},e.prototype.getSubSelectionCustomOutlines=function(t){return Go.call(this,t)},e.prototype.getSubSelectionCustomElements=function(t){return jo.call(this,t)},e.prototype.getSubSelectionStyles=function(t){return Yo.call(this,t)},e.prototype.getSubSelectionShortcuts=function(t,a){return Ko.call(this,t,a)},e.prototype.enumerateObjectInstances=function(t,a){return Bo.call(this,t,a)},e.prototype.getDataViewObjectLayerChanges=function(t,a){return Jo.call(this,t,a)},e.prototype.showSeriesCard=function(){return!(this.isComboChart&&!this.data.hasY2Role)},e.prototype.supportsTotalLabels=function(){return!(this.data&&this.data.multipleIdentity)&&16===this.lineChartType},e.prototype.supportsTrendLine=function(){return!this.data.multipleIdentity&&!this.isStacked&&this.getVisualCategoryAxisIsScalar()&&this.data.hasValues&&!(this.haveY2Data()&&!this.isComboChart)},e.prototype.supportsStaticReferenceLines=function(){return this.getVisualCategoryAxisIsScalar()},e.prototype.supportsForecast=function(){return!this.data.multipleIdentity&&!this.isStacked&&this.getVisualCategoryAxisIsScalar()&&this.data.hasValues&&1===this.data.series.length&&!this.hasLegend()},e.prototype.supportsAnomalyDetection=function(){return!this.data.multipleIdentity&&this.featureSwitches.daxTransformEnabled&&!this.isStacked&&this.data.hasValues},e.prototype.supportsPerCategoryMarker=function(){return!this.isComboChart},e.prototype.shouldSuppressAnimation=function(){return!!this.suppressAnimation},e.prototype.showLabelPerSeries=function(){var t=this.originalData;return t.series.length>1||!t.categoryMetadata||this.isComboChart},e.prototype.getSeriesAxisProperties=function(t){return t.isY2?this.y2AxisProperties:this.yAxisProperties},e.prototype.render=function(t,a,i){var n=this,s=this.suppressAnimation?0:(0,sa.Mb)(this.animator,t),o=this.viewModel;this.mainGraphicsPositionRect=this.mainGraphicsSVG.selectAll(Ns.selector).data(function(u){return!n.lineChartTooltipHelper.hoverLineTooltipOverlay&&i?[u]:[]}).join("rect").attrs({x:0,width:0,height:0}).style("pointer-events","none").classed(Ns.class,!0),(0,kn.WI)(this.data.anomalyDetections,this.mainGraphicsSVG,this.xAxisProperties.scale,this.yAxisProperties.scale,s,this.hostService,this.isVisualInteractive),this.anomalyNavigationHelper.update(In(this.data)?this.data.anomalyDetections[0].anomalies:[],this.clippedData,this.focusedDatum,function(u){return Wn(o,u)},this.mainGraphicsContext);var l=function(r,e,t){var a,i,n,s,o=r.renderContext,l=r.plotAreaHelper,u=r.lineChartTooltipHelper,c=r.tooltipInteractivity,h=r.markerRenderer,f=r.style,g=r.hostService,A=r.isStackedArea,S=r.isStacked100,C=r.currentViewport,L=r.interactivityService,P=r.mobileTileInteractive,V=r.featureSwitches,k=r.isComboChart,z=r.activeData;if(z){for(var J=z.isScalar,fe=_.filter(z.series,function(xe){var vt;return null===(vt=xe.uncertainty)||void 0===vt?void 0:vt.renderUncertainty}),G=!_.isEmpty(fe),K=!k,ie=[],Oe=0,je=z.series;Oe<je.length;Oe++)ie.push((ke=je[Oe]).lineStyle.markerProperties);G&&(0,Ei.iD)(z.series,ie),h.ensureMarkers(o.svgDefs,ie);var Je=r.yAxisProperties.scale,Xe=null===(a=r.y2AxisProperties)||void 0===a?void 0:a.scale,wt=L?.hasSelection(),Yt=_.filter(z.series,function(xe){return xe.lineStyle.areaShow}),Ut=Yt.length>0;(z.categories.length*z.series.length>sa.dt||kt.M.isInternetExplorerOrEdge()&&_.some(ie,function(xe){return xe.show})||Ut)&&(e=0);var Gt=function(vt){return er(r,vt)},da=function(vt){return Or(r,vt)},ua=A?function(xe){return Je(xe.stackedValue-xe.value)}:function(xe){return xe.isY2?Xe(0):Je(0)},_t=[];_.forEach(z.series,function(xe){_t[xe.index]=d3.line().x(Gt).y(da).defined(function(vt){return bn(vt)}).curve((0,yn.By)(xe.lineStyle))}),o.mainGraphicsContext.attr("aria-label","".concat(g.getLocalizedString("Visual_Plot")," ").concat(In(z)?g.getLocalizedString("Visual_Plot_ScreenReader_NavigateToAnomalies"):"").trim()),o.mainGraphicsSVG.attr("height",r.availableHeight).attr("width",r.availableWidth);var qt=o.mainGraphicsContext.selectAll(xn.selector).data(Yt,function(xe){return xe.identity.getKey()}).join(function(xe){return xe.append(Wr).classed(xn.class,!0)}).style("fill",function(xe){return f.isHighContrast?Ze.v.getThemeColor(f,we.U):xe.lineStyle.areaColor}).style("pointer-events",t&&K?"auto":null).classed(Be.cy,K).attr(Be.Ez,"area").attr(Be.QZ,3).each(function(xe){Be.O5.setDataForElement(this,{getDisplayName:function(){return g.getLocalizedString("MiniToolbar_Area",xe.displayName)},getRegionOutlines:function(){for(var Sa,Kt=o.mainGraphicsSVG.node().getBoundingClientRect(),Ki=Kt.left,ya=Kt.top,ai={type:1,x:Kt.x,y:Kt.y,height:Kt.height,width:Kt.width},Pi=C.scale,ar=Je.range(),za=_.min(ar),ir=_.max(ar),ha=[],xr=function(r){for(var e=r.length,t=[],a=[],i=0;i<e;i++){var n=r[i];bn(n)?(a.push(n),i===e-1&&t.push(a)):a.length>0&&(t.push(a),a=[])}return t}(xe.data),Vr=function(Mi){var Xt=Mi.map(function(gi){return{x:Br.convertSvgXToClientX(Gt(gi),Pi,Ki),y:Br.convertSvgYToClientY(da(gi),Pi,ya)}}),Bi=[];Xt.forEach(function(gi,Ti){var Xi=_.clamp(ua(Mi[Ti]),za,ir);Bi.unshift({x:gi.x,y:Br.convertSvgYToClientY(Xi,Pi,ya)})});var kr=(0,d.__spreadArray)((0,d.__spreadArray)([],Xt,!0),Bi,!0);ha.push({type:3,points:kr,clipPath:ai})},br=0,Ur=xr;br<Ur.length;br++)Vr(Ur[br]);return[{id:"".concat("area","-").concat(xe.index).concat(null!==(Sa=r.data.multipleDisplayName)&&void 0!==Sa?Sa:""),outline:{type:0,outlines:ha}}]}})}).interrupt();if((e?qt.transition().ease(d3.easeLinear).duration(e):qt).attr("d",function(xe){return d3.area().x(Gt).y0(ua).y1(da).defined(function(vt){return bn(vt)}).curve((0,yn.By)(xe.lineStyle))(xe.data)}),G){var ga=(0,Ei.B9)(o.mainGraphicsContext),Ta=d3.area().x(Gt).y0(function(xe){return null!=xe.uncertainty.lower?Os(r,xe):da(xe)}).y1(function(xe){return null!=xe.uncertainty.upper?Fs(r,xe):da(xe)}).defined(function(xe){var vt,Sa;return null!=(null===(vt=xe?.uncertainty)||void 0===vt?void 0:vt.upper)||null!=(null===(Sa=xe?.uncertainty)||void 0===Sa?void 0:Sa.lower)}),Ha=d3.line().x(Gt).y(function(xe){return Os(r,xe)}).defined(function(xe){var vt;return null!=(null===(vt=xe?.uncertainty)||void 0===vt?void 0:vt.lower)}),xa=d3.line().x(Gt).y(function(xe){return Fs(r,xe)}).defined(function(xe){var vt;return null!=(null===(vt=xe?.uncertainty)||void 0===vt?void 0:vt.upper)});(0,Ei.EC)(ga,fe,xa,Ha,Ta,function(xe,vt){return(0,Da.eR)(xe.selected,!1,wt,!1,(0,mn.TD)(vt))}),(0,Ei.FZ)(ga,fe,function(xe){return xe.isY2?Xe:Je},function(xe){return"translate(".concat(Gt(xe),", ").concat(xe.isY2?Xe(xe.value):Je(xe.value),")")},10),(0,Ei.di)(ga,fe,xa,Ha,Je.range()[1]>Je.range()[0],h),(0,Ei.DI)(ga)}else(0,Ei.OY)(o.mainGraphicsContext);var $a=o.mainGraphicsContext.selectAll(Sn.selector).data(_.filter(z.series,function(xe){return xe.lineStyle.strokeShow}),function(xe){return xe.identity.getKey()}).join(function(xe){return xe.append(Wr).classed(Sn.class,!0)}).styles(function(xe){return(0,Za.bc)(xe.lineStyle,f)}).interrupt();(e?$a.transition().ease(d3.easeLinear).duration(e):$a).attr("d",function(xe){return _t[xe.index](xe.data)});var La,li=o.mainGraphicsContext.selectAll(zn.selector).data(_.filter(z.series,function(xe){return xe.lineStyle.markerProperties.show}),function(xe){return xe.identity.getKey()}).join(function(xe){return xe.append(Wr).classed(zn.class,!0)}).style("stroke","#ffffff").style("stroke-width",2).style("stroke-opacity",0).attrs({"marker-start":function(vt){return h.getMarkerKey(vt.lineStyle.markerProperties)},"marker-mid":function(vt){return h.getMarkerKey(vt.lineStyle.markerProperties)},"marker-end":function(vt){return h.getMarkerKey(vt.lineStyle.markerProperties)}}).interrupt(),Xa=d3.line().x(Gt).y(da).defined(function(xe){return bn(xe)&&(!V.lineChartMarkerRendering||!xe.marker.perCategoryStyle)});(e?li.transition().ease(d3.easeLinear).duration(e):li).attr("d",function(xe){return Xa(xe.data)}).style("opacity",function(xe){return(0,Da.eR)(xe.selected,!1,wt,!1)}).style("pointer-events","none"),P||(La=o.mainGraphicsContext.selectAll(ls.selector).data(_.filter(z.series,function(xe){return cs(xe)}),function(xe){return xe.identity.getKey()}).join(function(xe){return xe.append(Wr).classed(ls.class,!0).style("stroke-width",10).style("stroke-linejoin",Ai.t.round).attr(Be.Ez,"lines").attr(Be.Zx,"markers").attr(Be.QZ,3).classed(Be.cy,!Ut||!K)}).attr("d",function(xe){if(!J){var vt=cs(xe);if(vt){var Sa=_.findIndex(xe.data,function(Kt){return Kt&&Kt.categoryIndex===vt.categoryIndex});if(Sa>0&&Sa<xe.data.length){var ti=xe.data.slice(Sa);return _t[xe.index](ti)}}}return _t[xe.index](xe.data)}).each(function(xe){Be.O5.setDataForElement(this,{getDisplayName:function(){return g.getLocalizedString("MiniToolbar_Line",xe.displayName)},getRegionOutlines:function(){return is(xe,r)}})}));var qa=o.mainGraphicsContext.selectAll(ss.selector).data(z.series,function(xe){return xe.identity.getKey()}).join(function(xe){return xe.append("g").classed(ss.class,!0)}),ea=qa.selectAll(zs.selector).data(function(xe){return xe.lineStyle.strokeShow?xe.data.filter(function(vt,Sa){return function(r,e){var t=r.data[e];if(null==t||null===t.value)return!1;var a=r.data[e-1],n=r.data[e+1];return!(null!=a&&null!==a.value||null!=n&&null!==n.value)}(xe,Sa)}):[]},function(xe){return xe.key}).join(function(xe){return xe.append(Bn).classed(zs.class,!0).classed(Be.cy,!0).attr(Be.Ez,"lines").attr(Be.Zx,"markers").attr(Be.QZ,3)}).style("fill",function(xe){return xe.marker.color}).style("fill-opacity",function(xe){return xe.marker.show?0:(0,Da.eR)(xe.selected,!1,wt,!1,(0,mn.TD)(xe.marker.transparency))}).each(function(){var vt=d3.select(this.parentNode).datum();Be.O5.setDataForElement(this,{getDisplayName:function(){return g.getLocalizedString("MiniToolbar_Line",vt.displayName)},getRegionOutlines:function(){return is(vt,r)}})}),ei=ea.size(),ui=0;(e?ea.transition().duration(e):ea).attrs({cx:function(vt){return er(r,vt)},cy:function(vt){return Or(r,vt)},r:Rn(z.lineStyle)}).on("end",function(){++ui===ei&&Ua()}),e||Ua();var Na=qa.selectAll(Bs.selector).data(function(xe){return k?[]:_.filter(xe.data,function(vt){return vt?.marker.perCategoryStyle&&null!=vt.value})},function(xe){return xe.key}).join(function(xe){return xe.append(Wr).classed(Bs.class,!0).style("pointer-events","none")}).attrs({transform:function(vt){var Sa=V.lineChartMarkerRendering?vt.marker.size*dr.Wo.sizeRatio:5;return"translate(".concat(er(r,vt),", ").concat(Or(r,vt),") scale(").concat(2*Sa,")")},d:function(vt){return(0,dr.jM)(V.lineChartMarkerRendering?vt.marker.shape:Ma.ZO.circle,.5)}}).style("stroke-width",function(xe){return V.lineChartMarkerRendering?2*(0,dr.F)(xe.marker.shape)/20:0});(e?Na.transition().duration(e):Na).style("fill",function(xe){return xe.marker.color}).style("stroke",function(xe){return xe.marker.color});var di,Ga=function(r){return function(e){var a=r.renderContext.mainGraphicsContext,i=_.flatten(_.map(r.activeData.series,function(l){return _.filter(l.data,function(u){return u?.selected&&null!==u.value})})),n=_.map(i,function(l){return l.seriesIndex}),s=a.selectAll(us.selector).selectAll(Wr).data(i,function(l){return l.key}).join(function(l){return l.append(Wr).attr("pointer-events","none")}).attr("d",function(l){return l.marker.show?(0,dr.jM)(l.marker.shape,l.marker.size*dr.Wo.sizeRatio):(0,dr.jM)(Ma.ZO.circle,l.marker.focusOnlySize)}).attr("transform",function(l){return"translate(".concat(er(r,l),",").concat(Or(r,l),")")}).style("stroke-width",function(l){return(0,dr.F)(l.marker.shape)}).style("stroke-opacity",1).style("stroke",function(l){return l.marker.focusOnlyColor}).style("fill",function(l){return l.marker.focusOnlyColor}),o=[];return a.selectAll(Sn.selector).each(function(l,u){o[u]=l.selected,l.selected=n.indexOf(l.index)>-1}).style("stroke-opacity",function(l,u){return(0,Da.eR)(l.selected,!1,e&&!o[u],!1,(0,mn.TD)(l.lineStyle.strokeTransparency))}),a.selectAll(xn.selector).style("fill-opacity",function(l){return(0,Da.eR)(l.selected,!1,e,!1,(0,mn.TD)(l.lineStyle.areaTransparency))}),a.selectAll(zn.selector).style("opacity",(0,Da.eR)(!1,!1,e,!1)),(0,Ei.fM)(a.select(Ei.jx.selector),function(l,u){return(0,Da.eR)(l.selected||n.indexOf(l.index)>-1,!1,e&&!o[l.index],!1,null!=u?(0,mn.TD)(u):void 0)}),s}}(r);Ga(wt),L&&(di=Wn(r,r.focusedDatum));var ja=[],zi=[];if(!(null===(i=z.dataLabelsSettings)||void 0===i)&&i.show&&(ja=ja.concat(function(r){var e,t=(0,it.fI)(),a=r.activeData.series.map(function(i){var n,s,o=i.labelSettings||r.data.dataLabelsSettings;if(!o.show)return{labelDataPoints:[],maxNumberOfLabels:0};var l=100===o.labelDensity,u=(0,it.SS)(r.currentViewport.width,o.labelDensity,4,Rs.v.estimatedLabelWidth),c=!l&&r.data.isScalar?u:i.data.length,h=i.isY2?r.y2AxisProperties:r.yAxisProperties,f=i.data.map(function(g,A){if(null!=g&&null!=g.value){var S=function(r,e,t,a,i,n,s,o){var l,u,c,h,P,k,f=r.isStackedArea,g=r.style,A=r.featureSwitches,S=i.fontProperties,C=e.isY2?null===(l=r.y2AxisProperties)||void 0===l?void 0:l.scale:r.yAxisProperties.scale,L=null!==(u=t.labelFill)&&void 0!==u?u:S.color,V=!1;i?.displayUnits===O.In&&(i.precision=void 0);var z=(0,it.d6)(n,i);if(null!==(c=t.dynamicLabelValue)&&void 0!==c&&c.enabled)k=(0,Rt.nU)(t.dynamicLabelValue,s,i,z,e,"Value"),!A.labelEnhancementsM0&&A.measureDrivenDataLabels&&""===k&&(k=void 0);else{var fe=o&&!A.labelEnhancementsM0?O.L0:(t.labelSettings.displayUnits===O.In?t.labelSettings.valueCustomFormatString:void 0)??t.labelFormatString,G=s.getOrCreate(fe,i,z.units,z.getPrecision(!!fe,e.type)),K=t.value;o&&(K=t.originalValue),k=(0,it.Bw)(G.format(K))}var ie=(0,j.qk)(S,k);if(f){var Oe=Math.max(t.stackedValue-t.value,C.domain()[0]),je=r.currentViewport.width,ke=void 0;switch(i?.position){case ka.h.insideCenter:ke=[1];break;case ka.h.insideEnd:ke=[4];break;default:ke=[1,4]}P={rect:{left:er(r,t)-je/2,top:C(Math.max(t.stackedValue,t.stackedValue-t.value)),width:je,height:Math.abs(C(t.stackedValue)-C(Oe))},orientation:t.value>=0?1:2,validPositions:ke},V=!0}else{var Je=e.lineStyle.markerProperties;switch(ke=void 0,i?.position){case ka.h.above:ke=[1];break;case ka.h.under:ke=[2];break;default:ke=100===i.labelDensity?[1]:function(r,e){var t=r.data,s=t[e].value,o=t[e-1]&&t[e-1].value,l=t[e+1]&&t[e+1].value,u=1,c=1;if(null==o?u=0:o>s?u=3:o<s&&(u=2),null===l?c=0:l>s?c=3:l<s&&(c=2),0===e)return 3===c?[2,1]:[1,2];if(e===t.length-1)return 3===u?[2,1]:[1,2];switch(u){case 0:switch(c){case 0:return[1,2,8,4];case 1:case 2:return[1,2,4,8];case 3:return[2,1,4,8]}case 1:switch(c){case 0:case 1:case 2:return[1,2,8,4];case 3:return[2,1,8,4]}case 3:switch(c){case 0:case 3:return[2,1,8,4];case 1:return[2,1,4,8];case 2:return[1,2,8,4]}case 2:switch(c){case 0:case 3:case 2:return[1,2,8,4];case 1:return[1,2,4,8]}}}(e,a)}P={point:{x:er(r,t),y:C(t.value)},radius:Je.show?Je.size:0,validPositions:ke}}return{isPreferred:!1,text:k,textSize:{width:Z.b.measureSvgTextWidth(ie)+O.TS,height:Z.b.estimateSvgTextHeight(ie,!0)},outsideFill:L??Ze.v.getThemeColor(g,O.uQ),insideFill:L&&f?L:Ze.v.getThemeColor(g,O.pl),parentType:V?1:0,parentShape:P,fontProperties:S,identity:t.identity,key:t.key,hasBackground:i.enableBackground,backgroundColor:i.backgroundColor,backgroundTransparency:i.backgroundTransparency,transparency:i.transparency,leaderLine:(0,d.__assign)((0,d.__assign)({},i.leaderLine),{strokeColor:null!==(h=t?.leaderLineColor)&&void 0!==h?h:i.leaderLine.strokeColor})}}(r,i,g,A,o,h,t,r.isStacked100);return g.labelDataPointContainerEnabled?(0,qo.U)({seriesName:i.displayName,labelDataPoint:S,enableValueDataLabel:o.enableValueDataLabel,valueShowBlankAs:o.showBlankAs,cartesianDataPoint:g,isStacked100:r.isStacked100,percentOfTotal:g.value,formattersCache:t,currentSeries:i,currentAxisProperties:h,valueDataLabelSettings:o,getOutsideLabelFill:function(L){var P;return null!==(P=L.labelFill)&&void 0!==P?P:Ze.v.getThemeColor(r.style,O.uQ)},getInsideLabelFill:function(L){var P;return L.labelFill&&r.isStackedArea?null!==(P=L.labelFill)&&void 0!==P?P:L.labelSettings.fontProperties.color:Ze.v.getThemeColor(r.style,O.pl)}}):S}}).filter(function(g){return g});return{labelDataPoints:f,maxNumberOfLabels:c,enableLeaderLines:o?.leaderLine.strokeShow,offset:{min:null!==(n=o?.minimumOffset)&&void 0!==n?n:O.ki,max:null!==(s=o?.maximumOffset)&&void 0!==s?s:O.wh}}});return new Rs.v(a,r.activeData.series,r.currentViewport,r.yAxisProperties.scale,null===(e=r.y2AxisProperties)||void 0===e?void 0:e.scale).getSortedDataLabels()}(r))),null!==(n=z.seriesLabelSettings)&&void 0!==n&&n.show){var hr=z.seriesLabelSettings.position===Re.M.right;zi=zi.concat(function(r,e,t){var a=r.isStackedArea,i=r.data.isScalar,n=Z.b.estimateSvgTextHeight(O.bN),s=r.xAxisProperties.scale.domain()[0],o=r.xAxisProperties.scale.domain()[1];return r.activeData.series.map(function(l){var u,c=l.seriesLabelSettings||r.data.seriesLabelSettings;if(!c?.show)return{labelDataPoints:[],maxNumberOfLabels:0};var h=l.isY2?null===(u=r.y2AxisProperties)||void 0===u?void 0:u.scale:r.yAxisProperties.scale,f=h.domain()[0],g=h.domain()[1],A=c?c.fontProperties.size.px:0,S=!!c&&!!c.wordWrap,L=r.currentViewport.height-(A+n+(r.currentViewport.height-n-A)/2),P=[],V=function(je){var ke;if(null!=je){var Je=a?je.stackedValue:je.value;if(null!=Je&&Je>=f&&Je<=g){var wt=(0,j.qk)(c.fontProperties,l.displayName);w.fF.assertValue(je.value,"seriesLabels - createLabelDataPoint called on a dataPoint with no value"),P.push({identity:je.identity,key:je.key,isPreferred:!1,text:l.displayName,textSize:{width:Z.b.measureSvgTextWidth(wt),height:Z.b.estimateSvgTextHeight(wt,!0)},outsideFill:null!==(ke=c.seriesColor)&&void 0!==ke?ke:Ze.v.getThemeColor(r.style,O.uQ),insideFill:c.seriesColor&&a?c.seriesColor:Ze.v.getThemeColor(r.style,O.pl),parentType:0,parentShape:{point:{x:e,y:Or(r,je)},radius:l.lineStyle.markerProperties.show?l.lineStyle.markerProperties.size:0,validPositions:[512]},fontProperties:c.fontProperties,wordBreak:S&&(0,it.W1)(l.displayName,wt,r.availableSeriesLabelWidth,L,void 0,!0,!0).length>1,hasBackground:c.enableBackground,backgroundColor:c.backgroundColor,backgroundTransparency:c.backgroundTransparency})}}},k=l.data;if(!_.isEmpty(k)&&l.displayName){var z=t?_.last(_.compact(k)):_.first(_.compact(k));if(i){for(var J=0;J<k.length;J++){var fe=k[J];if(null!=fe&&null!=fe.value&&fe){var G=Ts(r,fe);if(t?G>o:G>s){var ie=-1;t&&0<=J-1?ie=J-1:t||(ie=J),ie>=0&&V(k[ie]);break}}}J===k.length&&V(z)}else V(z)}return{labelDataPoints:P,maxNumberOfLabels:1}})}(r,hr?r.availableWidth:0,hr))}if(null!==(s=z.totalLabelsSettings)&&void 0!==s&&s.show&&A&&!S&&(ja=ja.concat(function(r){var e=r.style,t=(0,p.GN)(r.data.valuesMetadata),a=(0,F.EO)(t,B.p.general.formatString),i=r.activeData,n=(0,it.fI)(),s=i.totalLabelsSettings,o=(0,it.d6)(r.yAxisProperties,s),l=s.fontProperties,u=i.totals.filter(function(c){return 0!==c?.net}).map(function(c){var h,f,g,A,S=c.net,C=n.getOrCreate(c.dynamicFormatString||a,s,o.units,s.precision),L=(0,it.Bw)(C.format(S)),P=(0,j.qk)(l,L),V=S>0?c.positive:c.negative,k={value:V,originalValue:void 0,stackedValue:V,categoryIndex:c.categoryIndex,categoryValue:c.categoryValue,labelSettings:void 0,key:void 0,identity:void 0,marker:void 0,seriesIndex:void 0,selected:!1},z=r.currentViewport.width;return{isPreferred:!1,text:L,textSize:{width:Z.b.measureSvgTextWidth(P),height:Z.b.estimateSvgTextHeight(P,!0)},outsideFill:null!==(f=null!==(h=c.labelFill)&&void 0!==h?h:l.color)&&void 0!==f?f:Ze.v.getThemeColor(e,O.uQ),insideFill:null!==(A=null!==(g=c.labelFill)&&void 0!==g?g:l.color)&&void 0!==A?A:Ze.v.getThemeColor(e,O.pl),parentType:1,parentShape:{rect:{left:er(r,k)-z/2,top:r.yAxisProperties.scale(V),width:z,height:0},orientation:S>=0?1:2,validPositions:[16]},identity:void 0,fontProperties:l,hasBackground:s.enableBackground,backgroundColor:s.backgroundColor,backgroundTransparency:s.backgroundTransparency,isTotal:!0}});return[{labelDataPoints:u,maxNumberOfLabels:i.totals.length}]}(r))),_.map(_.filter(fe,function(xe){return xe.uncertainty.labels.show}),function(xe){return xe.uncertainty.labels})&&(ja=ja.concat(function(r){var e=r.style,t=r.hostService,a=_.filter(r.activeData.series,function(n){var s,o;return(null===(s=n.uncertainty)||void 0===s?void 0:s.renderUncertainty)&&(null===(o=n.uncertainty)||void 0===o?void 0:o.labels.show)});if(0===a.length)return[];var i=(0,it.fI)();return a.map(function(n){var o=n.uncertainty.labels,u=o.fontProperties,c=n.isY2?r.y2AxisProperties:r.yAxisProperties,h=(0,it.d6)(c,o),f=c.scale,g=[];return n.data.forEach(function(A){if(null!=A&&null!=A.value&&null!=A.uncertainty){for(var S=[],C=(0,Pr.Ww)(A.value,A.uncertainty,o.errorFormat),L=[C.lower,C.upper],P=0;P<2;P++){var V=L[P],k=1===P,z=k?A.uncertainty.upper:A.uncertainty.lower;if(null!=z){var J=void 0;if(o.errorFormat===tn.K.relativePercentage)J=(0,Pr.O2)(V,t);else{var fe=A.labelFormatString,G=i.getOrCreate(fe,o,h.units,h.getPrecision(!!fe,n.type));J=(0,it.Bw)(G.format(V))}w.fF.assertValue(J,"label has no value -- lineChart.createUncertaintyLabels");var K=(0,j.qk)(u,J);S.push({isPreferred:!1,text:J,textSize:{width:Z.b.measureSvgTextWidth(K)+O.TS,height:Z.b.estimateSvgTextHeight(K,!0)},outsideFill:u.color?u.color:Ze.v.getThemeColor(e,O.uQ),insideFill:u.color?u.color:Ze.v.getThemeColor(e,O.pl),parentType:0,parentShape:{point:{x:er(r,A),y:f(z)},radius:0,validPositions:[k?1:2]},identity:void 0,fontProperties:u,hasBackground:o.enableBackground,backgroundColor:o.backgroundColor,backgroundTransparency:o.backgroundTransparency})}}_.isEmpty(S)||g.push.apply(g,S)}}),{labelDataPoints:g,maxNumberOfLabels:100}})}(r))),!P){var _i={availableHeight:r.availableHeight,availableWidth:r.availableWidth,isComboChart:k,activeData:r.activeData,interactivityLines:La,dots:ea,focusElement:di,explicitDots:Na};u.removeTooltips(_i,c),r.tooltipsEnabled&&!t&&u.applyTooltips(_i,l,c)}(0,en.LL)(o.mainGraphicsContext,[xn,Ei.jx,Sn,zn,ls,ss,us,Nn]);var $t,Si,xi,Ya=[];if(r.interactivityService&&!P){$t=[];for(var bi=0,Li=r.data.series;bi<Li.length;bi++){var ke;Ya.push(ke=Li[bi]);var vr=_.filter(ke.data,function(vt){return vt});$t.push.apply($t,vr||[])}if(xi=[],In(z)){var ni=_.filter(z.anomalyDetections[0].anomalies,function(xe){return xe.isAnomaly});xi.push.apply(xi,ni||[])}Si={interactivityLines:La,root:o.mainGraphicsContext,focusMarker:di,selectedMarkersCallback:Ga,dots:ea,areas:qt,hoverLineTooltipOverlay:u.hoverLineTooltipOverlay,isHoverLineTooltipActive:u.isHoverLineTooltipActive,getCategoryIndex:function(vt,Sa,ti){return l.getCategoryIndexFromSeriesAndPointX(vt,Sa,ti=ti&&!u.isHoverLineTooltipActive)},categoryIdentities:z.categoryIdentities,hitTester:new el({dataPoints:$t,isComboChart:k,isScalar:J,hasCategories:z.categoryIdentities.length>0}),onSelecting:g.onSelecting,anomalies:o.mainGraphicsSVG.selectAll(kn.ec.selector),anomalyNavigationHelper:r.anomalyNavigationHelper,onLineSubSelection:function(vt,Sa,ti,Kt,Ki){!function(r,e,t,a,i,n){var s,u,c,h,o=(0,Ba.bt)(),l=r.plotAreaHelper.getCategoryIndexFromSeriesAndPointX(e,t,!0);try{u=function(r,e,t){var a=r.renderContext.mainGraphicsSVG.node().getBoundingClientRect().left,i=_.find(e.data,function(n){return n&&n.categoryIndex===t});return Math.floor(Ms(r,i,a))}(r,e,l)}catch{return void w.fF.assertFail("Could not find data for categoryIndex in seriesData - getMarkerXPosition")}e.lineStyle.markerProperties.show&&Math.abs(u-o.x)<=e.lineStyle.markerProperties.size/2?(c="markers",h="MiniToolbar_Markers"):(c="lines",h="MiniToolbar_Line");var f=a.createVisualSubSelectionForSingleObject({objectName:c,subSelectionType:3,displayName:r.hostService.getLocalizedString(h,e.displayName),showUI:n,selectorsByColumn:null===(s=e.identity)||void 0===s?void 0:s.getSelectorsByColumn(),selectionOrigin:{x:i.clientX,y:i.clientY}});a.subSelect(f)}(r,vt,Sa,ti,Kt,Ki)},onDotSubSelection:function(vt,Sa,ti,Kt){!function(r,e,t,a,i){var n,s,o;e.lineStyle.markerProperties.show?(s="markers",o="MiniToolbar_Markers"):(s="lines",o="MiniToolbar_Line");var l=t.createVisualSubSelectionForSingleObject({objectName:s,subSelectionType:3,displayName:r.hostService.getLocalizedString(o,e.displayName),showUI:i,selectorsByColumn:null===(n=e.identity)||void 0===n?void 0:n.getSelectorsByColumn(),selectionOrigin:{x:a.clientX,y:a.clientY}});t.subSelect(l)}(r,vt,Sa,ti,Kt)},onAreaPointerMove:function(vt){!function(r,e){var t=new MouseEvent("pointerover",e),a=Gs.findSubSelectedAreaElement(r,{x:e.clientX,y:e.clientY});a?.dispatchEvent(t)}(r,vt)}}}return{dataPoints:$t?(0,d.__spreadArray)((0,d.__spreadArray)([],Ya,!0),$t,!0):void 0,behaviorOptions:P?void 0:Si,labelDataPoints:P?[]:null,labelsAreNumeric:!P||null,labelDataPointGroups:ja,labelDataPointSeriesGroups:zi,animateLabels:!1,anomalies:xi,navigationOptions:r.navigationOptions}}function Ua(){P&&function(r){if(0===r.length)return!1;for(var e=0,t=r.length;e<t;e++)if(r[e].data.length>0)return!0;return!1}(z.series)&&c.selectColumn((0,p.Pg)(z.series),!0)}}(o,s,i);return(0,v.h8)(this.data.forecastLines,this.mainGraphicsSVG,this.xAxisProperties.scale,this.yAxisProperties.scale,s),(0,Fa.bL)(this.dataInitOptions),l},Object.defineProperty(e.prototype,"navigationOptions",{get:function(){if(this.interactivityService)return{helper:this,navigationStrategy:this.data.isScalar?U.jN.SeriesFirst:U.jN.CategoryFirst}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewModel",{get:function(){var a;return{currentViewport:this.currentViewport,activeData:this.activeData,data:this.data,horizontalOffset:this.horizontalOffset,isComboChart:this.isComboChart,lineType:this.lineChartType,margin:this.margin,tooltipsEnabled:this.tooltipsEnabled,xAxisProperties:this.xAxisProperties,yAxisProperties:this.yAxisProperties,y2AxisProperties:this.y2AxisProperties,focusedDatum:this.focusedDatum,style:this.style,renderContext:{mainGraphicsSVG:this.mainGraphicsSVG,mainGraphicsContext:this.mainGraphicsContext,svgDefs:this.svgDefs,mainGraphicsPositionOverlay:(null===(a=this.lineChartTooltipHelper)||void 0===a?void 0:a.hoverLineTooltipOverlay)||this.mainGraphicsPositionRect},isStackedArea:this.isStacked,isStacked100:this.isStacked100,availableWidth:this.availableWidth-this.availableSeriesLabelWidth,availableHeight:this.availableHeight,availableSeriesLabelWidth:this.availableSeriesLabelWidth,hostService:this.hostService,markerRenderer:this.markerRenderer,interactivityService:this.interactivityService,navigationOptions:this.navigationOptions,lineChartTooltipHelper:this.lineChartTooltipHelper,tooltipInteractivity:this,plotAreaHelper:this,anomalyNavigationHelper:this.anomalyNavigationHelper,featureSwitches:this.featureSwitches,mobileTileInteractive:this.mobileTileInteractive}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"availableSeriesLabelWidth",{get:function(){return(0,le.lr)(this.activeData.seriesLabelSettings,this.availableWidth)},enumerable:!1,configurable:!0}),e.prototype.getFirstElement=function(t,a){var i;if(void 0===a&&(a=!1),null!=t){var s,n=a?_.findLast:_.find;return n(this.data.series,function(u){return s=n(u.data,function(c){return c&&c.categoryIndex===t&&null!=c.value})}),s&&-1===(null===(i=this.clippedData)||void 0===i?void 0:i.categories.indexOf(s.categoryValue))?{element:null,targetCategoryIndex:s.categoryIndex,targetSeriesIndex:s.seriesIndex}:s?(this.focusedDatum=s,{element:Wn(this.viewModel,s).node(),targetCategoryIndex:t,targetSeriesIndex:s.seriesIndex}):{element:null,targetCategoryIndex:t,targetSeriesIndex:a?this.data.series.length-1:0}}return{element:this.mainGraphicsContext.select(Nn.selector).node()}},e.prototype.getNextDataPoint=function(t,a,i){var n,s=this.focusedDatum;switch(i){case U.x0.NextCategory:case U.x0.PreviousCategory:var o=this.data.series[a];if(o){var l=o.data,u=_.findIndex(l,function(S){return S&&S.categoryIndex===t});s=this.pickNextAvailableIndex(l,u,a,i)}else s=void 0;break;case U.x0.NextSeries:case U.x0.PreviousSeries:var c=_.map(this.data.series,function(S){return _.find(S.data,function(C){return C&&C.categoryIndex===t})});s=this.pickNextAvailableIndex(c,a,t,i);break;default:w.fF.assertNever(i)}if(!s){var h=i===U.x0.NextSeries||i===U.x0.NextCategory?1:-1;t=e.incrementIndex(t,h,this.data.categories.length);var g=a;return(i===U.x0.NextSeries||i===U.x0.PreviousSeries)&&(g=h<0?this.data.series.length-1:0),{element:null,targetCategoryIndex:t,targetSeriesIndex:g}}return-1===(null===(n=this.clippedData)||void 0===n?void 0:n.categories.indexOf(s.categoryValue))?{element:null,targetCategoryIndex:s.categoryIndex,targetSeriesIndex:s.seriesIndex}:(this.focusedDatum=s,{element:Wn(this.viewModel,s).node(),targetCategoryIndex:s.categoryIndex,targetSeriesIndex:s.seriesIndex})},e.prototype.pickNextAvailableIndex=function(t,a,i,n){var s=n===U.x0.NextCategory||n===U.x0.PreviousCategory?this.rollToNextSeries:this.rollToNextCategory,o=n===U.x0.NextSeries||n===U.x0.NextCategory?1:-1,l=a;do{if((l+=o)>=t.length||l<0)return s.call(this,i,n);if(l===a)break}while(!t[l]||null==t[l].value);if(null!=t[l].value)return t[l]},e.prototype.rollToNextSeries=function(t,a){w.fF.assert(function(){return a===U.x0.PreviousCategory||a===U.x0.NextCategory},"expected a direction having to do with category");var n=a===U.x0.PreviousCategory?_.findLast:_.find;return t=e.incrementIndex(t,a===U.x0.PreviousCategory?-1:1,this.data.series.length),n(this.data.series[t].data,function(l){return l&&null!=l.value})},e.prototype.rollToNextCategory=function(t,a){w.fF.assert(function(){return a===U.x0.PreviousSeries||a===U.x0.NextSeries},"expected a direction having to do with series");var n=a===U.x0.PreviousSeries?_.findLast:_.find;t=e.incrementIndex(t,a===U.x0.PreviousSeries?-1:1,this.data.categories.length);var o=_.map(this.data.series,function(u){return _.find(u.data,function(c){return c&&c.categoryIndex===t})}),l=n(o,function(u){return u&&null!=u.value});return l||(l=n(o,function(u){return!!u})),l},e.incrementIndex=function(t,a,i){return(t+=a)>=i?t=0:t<0&&(t=i-1),t},e.prototype.getTooltipInfoForPoint=function(t,a){var i,n=t.data,s=this.getCategoryIndexFromSeriesAndPointX(n,a,!0,t.context);if(null!==(i=n?.data)&&void 0!==i&&i.length){var o=_.find(n.data,function(l){return l?.categoryIndex===s});if(o)return _.concat(o.tooltipInfo,o.additionalTooltipItems||[])}},e.isDataPointData=function(t){return t&&null!=t.categoryIndex},e.prototype.getCategoryIndexFromTooltipEvent=function(t,a){var i=t.data;if(!Ps(i))return e.isDataPointData(i)?i.categoryIndex:this.getCategoryIndexFromSeriesAndPointX(i,a,!1);w.fF.assertFail("should not receive pointer events for forecast lines")},e.prototype.getCategoryIndexFromSeriesAndPointX=function(t,a,i,n){var s=0,o=this.data.categoryData,l=this.xAxisProperties.scale;if(t&&!_.isEmpty(t.data)&&this.xAxisProperties){a=this.adjustPathXCoordinate(a,n);var c=cs(t,this.data.isScalar&&l.range()[1]<l.range()[0]);w.fF.assertValue(c,"If there is data on the tooltipEvent but no categoryIndex, there should always be two consecutive non-null values"),c&&(s=er(this.viewModel,c)),i&&(o=_.map(t.data,function(h){return Lt(h,void 0)}))}return e.findCategoryIndex({pointX:a,offsetX:s,categoryData:o,currentViewport:this.currentViewport,scale:l,categoryThickness:this.xAxisProperties.categoryThickness,isScalar:this.data.isScalar})},e.prototype.getYValueFromTooltipEvent=function(t,a){var i,n,u,c,s=null===(i=this.yAxisProperties)||void 0===i?void 0:i.scale,o=null===(n=this.y2AxisProperties)||void 0===n?void 0:n.scale,l=this.currentViewport.scale;if((0,te.GG)(l,1,1e-5)||(t/=l),!a.classList.contains(_s.class)&&!a.classList.contains(e.lineChartSVGClassName)&&(t+=a.getBBox().y),s){var h=s.domain();u={point:s.invert(t),threshold:.1*(h[1]-h[0])}}return o&&(h=o.domain(),c={point:o.invert(t),threshold:.1*(h[1]-h[0])}),{y:u,y2:c}},e.prototype.getVisualCategoryAxisIsScalar=function(){return!!this.data&&this.data.isScalar},e.prototype.getSupportedCategoryAxisType=function(){var t,a,i=!1,n=null===(a=null===(t=this.dataView)||void 0===t?void 0:t.categorical)||void 0===a?void 0:a.categories;return _.isEmpty(n)||(i=n.some(function(s){var o,l=null===(o=s.source)||void 0===o?void 0:o.type;if(l){var u=(0,re.A8)(s);return!(0,I.c$)(l)||u&&!_.isEmpty(u.values)}})),i?xt.w.both:xt.w.categorical},e.sliceSeries=function(t,a,i){var n;return null!==(n=t?.map(function(s){var o=(0,me.ED)(s);return o.data=s.data.slice(a,i),o}))&&void 0!==n?n:[]},Object.defineProperty(e.prototype,"horizontalOffset",{get:function(){if(!this.data.isScalar){var a=this.xAxisProperties.scale;if((0,en._9)(a))return a.bandwidth()/2}return 0},enumerable:!1,configurable:!0}),e.prototype.getHoverLineDataForCategory=function(t){var a=this.createTooltipData(t);if(a)return dl.call(this,t,a.dataPoints),a},e.prototype.getHoverLineIdentities=function(t,a){var i,n,s,o,l,u,c,h,f=null===(l=null===(o=this.data)||void 0===o?void 0:o.categoryIdentities)||void 0===l?void 0:l[t],g=null===(c=null===(u=this.data)||void 0===u?void 0:u.multiplesCategoryIdentities)||void 0===c?void 0:c[t],A=[],S=null===(h=_.find(a??[],function(C){return C?.categoryIndex===t}))||void 0===h?void 0:h.identity;return S&&(g.exclude=((i={})[1]=!0,i[0]=!1,i),f.exclude=((n={})[1]=!0,n[0]=!1,n),S.exclude=((s={})[1]=!1,s[0]=!0,s),A.push(S)),(g||f)&&A.push(g??f),A},e.prototype.clearHoverLine=function(){hl.call(this)},e.prototype.selectColumn=function(t,a){if(void 0===a&&(a=!1),a||this.lastInteractiveSelectedColumnIndex!==t){this.lastInteractiveSelectedColumnIndex=t;var i=this.getChartX(t);this.setHoverLine(i,t);var n=this.createLegendDataPoints(t);n&&this.cartesianVisualHost.updateLegend(n)}},e.prototype.setHoverLine=function(t,a){fl.call(this,t,a)},e.prototype.getChartX=function(t){var a=0;this.data.isScalar?t>=0&&t<this.data.categoryData.length&&(a=Math.max(0,this.xAxisProperties.scale(this.data.categoryData[t].categoryValue))):a=Math.max(0,this.xAxisProperties.scale(t));var i=Math.max.apply(Math,this.xAxisProperties.scale.range());return a=Math.min(a,i),this.horizontalOffset+(isNaN(a)?0:a)},e.findCategoryIndex=function(t){var a=t.offsetX,i=t.categoryData,n=t.scale,s=t.pointX,o=t.currentViewport.scale;(0,te.GG)(o,1,1e-5)||(s/=o),a&&(s+=a);var l=D.invertScale(n,s,0,0,void 0).value;if(t.isScalar){var u=e.findClosestXAxisIndex(l,i,n);return u>=0?i[u].categoryIndex:-1}if(i[l]&&!i[l].hasData){for(var c=-1,h=l;h>0&&-1===c&&i[--h].hasData;)c=h;for(var f=-1,g=l,A=i.length-1;g<A&&-1===f&&i[++g].hasData;)f=g;var S=Math.abs(c-l),C=Math.abs(f-l);S<C?l=c:S>C?l=f:S===C&&(l=s>n(l)+t.categoryThickness/2?f:c)}return l},e.findClosestXAxisIndex=function(t,a,i){var n=i.domain(),s=[n[0],n[1]],o=-1;if(w.fF.assert(function(){return s[1]>=s[0]},"expected max extent to not be less than min"),s[0]>s[1])return o;var l=Number.MAX_VALUE;for(var u in a){var c=a[u].categoryValue;if(!(c<s[0]||c>s[1])){var h=Math.abs(t-c);h<l&&(l=h,o=parseInt(u,10))}}return o},e.prototype.findSubSelectedAreaElement=function(t){return Gs.findSubSelectedAreaElement(this.viewModel,t)},e.prototype.createTooltipData=function(t){var a=this.data;if(a&&0!==a.series.length&&a.categories&&a.categoryData){var i=[];w.fF.assert(function(){return t<a.categoryData.length},"category index out of range (categoryData)"),w.fF.assert(function(){return t<a.categories.length},"category index out of range (categories)");for(var l,n=a.categoryData[t],s=!1,o=a.multipleDisplayName,u=0,c=a.series;u<c.length;u++){var h=c[u],f=this.data.isScalar?n?h.data.filter(function(V){return V.categoryValue===n.categoryValue})[0]:void 0:h.data[t],g=f?.originalValue;if(null!=g){var A=(0,F.WU)(g,f.labelFormatString||(0,F.EO)(h.yCol,mr));i.push({category:(0,Ue.BJ)(n.hierarchyCategoryLevels),multipleDisplayName:o,measureDisplayName:h.displayName,measureActualDisplayName:h.measureDisplayName,formattedValue:this.isStacked100?"".concat(A," (").concat((0,F.WU)(f.value,this.hostService.getLocalizedString("Percentage")),")"):A,value:g,stackedValue:f.stackedValue,uncertainty:f.uncertainty,showHoverlineDots:!h.lineStyle.markerProperties.show,marker:(0,d.__assign)((0,d.__assign)({},(0,En.lw)(h.lineStyle.markerProperties,a.legendMarkerRendering,Ma.ZO.longDash)),{color:(0,En.XU)(h.lineStyle.markerProperties,h.lineStyle.strokeColor,a.legendMarkerRendering,a.matchLineColor)}),line:h.lineStyle,isY2:f.isY2,seriesDisplayName:a.hasDynamicSeries?a.seriesDisplayName:void 0,seriesName:a.hasDynamicSeries?h.displayName:void 0,additionalTooltipItems:a.hasDynamicSeries?f.additionalTooltipItems:void 0}),s||(s=!!f.uncertainty),!a.hasDynamicSeries&&!l&&(l=f.additionalTooltipItems)}}if(!_.isEmpty(a.forecastLines)&&n){h=_.head(a.series),w.fF.assertValue(h,"expected a line chart series when forecast is present");for(var S=0,C=a.forecastLines;S<C.length;S++){var L=C[S],P=_(L.points).filter(function(z){return z.point.x===n.categoryValue}).first();g=P?.point.y,null!=g&&i.push({category:(0,Ue.BJ)(n.hierarchyCategoryLevels),multipleDisplayName:o,measureDisplayName:L.displayName,measureActualDisplayName:this.originalData.valuesMetadata[0].displayName,formattedValue:(0,F.WU)(g,(0,F.EO)(h.yCol,mr)),value:g,additionalTooltipItems:[{displayName:this.localizer("Visual_Confidence_Band_Upper"),value:(0,F.WU)(P.upperBound.y,(0,F.EO)(h.yCol,mr))},{displayName:this.localizer("Visual_Confidence_Band_Lower"),value:(0,F.WU)(P.lowerBound.y,(0,F.EO)(h.yCol,mr))}],showHoverlineDots:!0,marker:{show:!0,color:L.stroke.strokeColor,shape:Ma.ZO.circle},line:void 0})}}return{dataPoints:i,additionalTooltipItems:l,legendMarkerRendering:a.legendMarkerRendering,hasUncertainty:s}}},e.prototype.createLegendDataPoints=function(t){var i,n,s,o,a=this,l=this.data;if(l&&l.series&&!(l.series.length<1)){var u,c=l.categoryData[t];this.mobileTileInteractive&&c&&(this.data.isScalar?(u=c.categoryValue,(0,I.v9)(this.xAxisProperties.valueType)&&(u=Co.y3.fromTimeValue(u))):u=(0,p.dZ)(this.data,t,this.xAxisProperties.valueType,this.data.isScalar));var h=l.series.map(function(f,g){var S,A=f.data;if(a.mobileTileInteractive){var C=void 0;if(a.data.isScalar){if(c)for(var L=c.categoryValue,P=0,V=A;P<V.length;P++){var k=V[P];if(k.categoryValue===L){C=k;break}}}else C=A[t];S=C?.value}return{marker:{show:!0,shape:Ma.ZO.circle,color:f.lineStyle.strokeColor},label:(0,Pe.TO)(f.yCol,a.dataView.categorical.values,mr),category:(0,F.WU)(u,(0,F.EO)(f.xCol,mr)),measure:(0,F.WU)(S,(0,F.EO)(f.yCol,mr)),identity:f.identity,selected:f.selected,index:g}});return(0,d.__assign)((0,d.__assign)({},(0,m.Fe)(this.style)),{title:(null===(o=null===(s=null===(n=null===(i=this.dataView)||void 0===i?void 0:i.categorical)||void 0===n?void 0:n.values)||void 0===s?void 0:s.source)||void 0===o?void 0:o.displayName)||"",dataPoints:h,grouped:l.hasDynamicSeries})}},e.prototype.adjustPathXCoordinate=function(t,a){kt.M.isFirefox()&&null!=a&&(this.pathXAdjustment=this.getPathXAdjustmentForFirefox(a)),kt.M.isInternetExplorerOrEdge()&&(this.pathXAdjustment=5);var i=this.currentViewport.scale;return t-this.pathXAdjustment*((0,te.GG)(i,1,1e-5)?1:i)},e.prototype.getPathXAdjustmentForFirefox=function(t){var a=t.getBoundingClientRect(),i=(0,Fa.jL)(t);if(i.height>0&&i.width>0)return(a.width/this.currentViewport.scale-i.width)/2},Object.defineProperty(e.prototype,"hasSingleStaticSeries",{get:function(){return this.data&&!this.data.hasDynamicSeries&&this.hasSingleSeriesPerValueAxis()},enumerable:!1,configurable:!0}),e.prototype.getCartesianVisualCapabilities=function(){var t=this.data,a=!this.isStacked||this.hasSingleStaticSeries;return{supportsHierarchicalCategoryAxis:!0,axesCapabilities:{categoryAxis:{domainAggregateRole:mi.R.Category,supportedDomainAggregates:t&&t.isScalar?t.scalarKeyCount?1:3:0},valueAxis:{domainAggregateRole:mi.R.Y,supportedDomainAggregates:a?3:1},secondaryValueAxis:this.haveY2Data()||this.isComboChart?{domainAggregateRole:mi.R.Y2,supportedDomainAggregates:a?3:1}:void 0}}},e.prototype.hasSingleSeriesPerValueAxis=function(){var t=this.data;if(!t||_.isEmpty(t.valuesMetadata))return!1;for(var a=!1,i=!1,n=0,s=t.valuesMetadata;n<s.length;n++){var l=s[n].roles;for(var u in l)if(l[u]){if(u===mi.R.Y){if(a)return!1;a=!0}if(u===mi.R.Y2){if(i)return!1;i=!0}}}return!0},e.prototype.getStaticSeriesRole=function(){return this.isComboChart?mi.R.Y2:mi.R.Y},e.prototype.haveY2Data=function(){var t;return _.some(null===(t=this.data)||void 0===t?void 0:t.series,function(a){return a?.isY2})},e.prototype.customizeLegendFormattingModelOptions=function(t){var a=this.originalData,i=a.legendMarkerRendering,n=i===nn._.markerCircleDefault;return(0,d.__assign)((0,d.__assign)({},t),{legendMarkerRendering:i,matchLineColor:i===nn._.markerOnly||n?a.matchLineColor:void 0})},e.prototype.getTelemetryInformation=function(){var t,i={};if(_.isEmpty(null===(t=this.data)||void 0===t?void 0:t.anomalyDetections)||(i.AnomalyDetections=!0),!_.isEmpty(i))return i},e.ClassName="lineChart",e.MainGraphicsContextClassName="mainGraphicsContext",e.lineChartSVGClassName="lineChartSVG",e.ScalarOuterPadding=10,e.DefaultZeroScalarDomain=[-1,1],e}(On),Ml=function(r){function e(t){var a=r.call(this,t)||this;return a.maxDataValue=Number.MIN_VALUE,a.newDataInterval=0,a.duration=3e5,a}return(0,d.__extends)(e,r),e.prototype.initData=function(t){r.prototype.initData.call(this,t),this.data=this.defaultData},e.prototype.initRenderer=function(t){r.prototype.initRenderer.call(this,t),this.svg.classed("realTimeLineChart",!0).classed("cartesianChart",!0);var a=this.mainGraphicsSVG=this.svg.append("svg");a.classed("mainGraphicsSVG",!0),this.mainGraphicsContext=a.append("g").classed("mainGraphicsContext",!0)},Object.defineProperty(e.prototype,"defaultData",{get:function(){return{series:[],totals:[],legendData:(0,m.Fe)(this.style),isScalar:!1,dataLabelsSettings:ts(this.style),hasDynamicSeries:!1,hasHighlights:!1,categories:[],categoryMetadata:void 0,valuesMetadata:[],categoryData:[],lineStyle:es(),layout:{seriesOrderReversed:!1}}},enumerable:!1,configurable:!0}),e.prototype.setData=function(t){var a;if(null!==(a=this.data)&&void 0!==a||(this.data=this.defaultData),!_.isEmpty(t)){var i=_.head(t);if(i.categorical){var s=p.Vk(i.metadata).duration;s&&(this.duration=s);var o=i.categorical;this.removeOldData();var l=o.categories,u=T.Ge.fromDescriptor({text:!0});l&&l.length>0&&l[0].source&&l[0].source.type&&(u=l[0].source.type);var c=(0,re._K)(i.metadata?i.metadata.objects:null,We.zK.categoryAxis.axisType,u),h=Vs.convert({dataView:i,style:this.style,isComboChart:!1,isScalar:c,tooltipsEnabled:!1,supportsTotalLabels:!1,featureSwitches:this.featureSwitches});this.mergeNewData(h),this.removeOldData(this.newDataInterval)}}},e.prototype.hasLegend=function(){return this.data&&(this.data.hasDynamicSeries||!_.isEmpty(this.data.series))},e.prototype.calculateAxesProperties=function(t){var i,a=this;this.updateCurrentViewport(t);var n=t.categoryAxisOptions,s=t.valueAxisOptions;if(this.newAxisData&&(this.axisData=this.newAxisData),this.data){var o=this.getAxesDomains(!1,{categoryAxis:!0,valueAxis:!0}),l=function(c){var h="x"===c,f="y"===c,g=h?n:s,A=h?a.data.categoryMetadata:a.containsEmptySeries()?void 0:a.data.series[0].yCol,S=D.createAxis({pixelSpan:h?a.currentViewport.width:a.availableHeight,domainOptions:h?{domain:o.categoryAxis,type:0}:{domain:o.valueAxis,type:0},axisZoom:void 0,metaDataColumn:A,isScalar:!0,isCategoryAxis:h,isVertical:f,formatString:(0,F.EO)(A,B.p.general.formatString),outerPadding:h?10:0,useTickIntervalForDisplayUnits:!0,getValueFn:h?function(C,L){return p.dZ(a.data,C,L,!0)}:void 0,axis:na.AxisDataDefaults,margin:a.margin,preventNice:D.hasForcedDomain(g.includeDomain),categoryThickness:null});return f&&S.d3Axis.tickSize(-t.viewport.width),S};this.xAxisProperties=l("x"),this.yAxisProperties=l("y"),this.newAxisData={x:this.xAxisProperties,y1:this.yAxisProperties}}return null!==(i=this.axisData)&&void 0!==i||(this.axisData=this.newAxisData),[this.xAxisProperties,this.yAxisProperties]},e.prototype.getAxesDomains=function(t,a){var i,n,s,o={};if(!this.data)return o;var l=this.truncateSeries();if(_.isEmpty(l))return o;if(a.categoryAxis){var u=D.createDomain(l,null!==(s=null===(n=null===(i=this.data)||void 0===i?void 0:i.categoryMetadata)||void 0===n?void 0:n.type)&&void 0!==s?s:T.Ge.fromDescriptor({text:!0}),!0,[D.createScalarDomainOptions([this.getMinData()+this.newDataInterval,void 0],0,[!0,void 0])]);u&&(D.assertScalarDomain(u.domain),o.categoryAxis=u.domain)}return a.valueAxis&&(o.valueAxis=D.createValueDomain(l)),o},e.prototype.render=function(t){var a;if(!this.containsEmptySeries())return this.renderLines(),null===(a=this.animator)||void 0===a||a.refreshLastUpdate(),{dataPoints:[],behaviorOptions:{},labelDataPoints:[],labelsAreNumeric:!0,labelDataPointGroups:[],animateLabels:!1}},e.prototype.truncateSeries=function(){var t=this.getMinData(),a=this.data.series;return a?_.map(a,function(i){var n=(0,me.ED)(i);n.data=(0,me.ED)(n.data);var o=0;return _.findIndex(n.data,function(l){return l&&l.categoryValue>=t})>0&&o++,n.data=n.data.slice(o),n}):[]},e.prototype.removeOldData=function(t){if(void 0===t&&(t=0),!this.containsEmptySeries()){for(var a=this.getMinData(t),i=this.data,n=0,s=i.series;n<s.length;n++){var o=s[n],l=_.findIndex(o.data,function(c){return c&&c.categoryValue>a});l>0&&(o.data=o.data.slice(l))}var u=_.findIndex(i.categoryData,function(c){return c&&c.categoryValue>a});u>0&&(i.categoryData=this.data.categoryData.slice(u),i.categories=this.data.categories.slice(u))}},e.prototype.mergeNewData=function(t){if(w.fF.assertValue(t,"newData"),this.containsEmptySeries())return this.data=t,void(this.maxDataValue=this.getMaxData());this.data.series=e.mergeSeries(this.data.series,t.series,this.maxDataValue),e.mergeCategories(this.data,t,this.maxDataValue);var a=this.getMaxData();this.newDataInterval=this.maxDataValue&&a?a-this.maxDataValue:0,this.maxDataValue=a},e.prototype.getMaxData=function(){for(var t=0,a=0,i=this.data.series;a<i.length;a++){var n=i[a];n.data.length&&(t=Math.max(_.last(n.data).categoryValue,t))}return t},e.prototype.getMinData=function(t){return void 0===t&&(t=0),this.maxDataValue-this.duration-1.5*t},e.prototype.renderLines=function(){var t,a=this.axisData.x.scale,i=this.axisData.y1.scale,n=d3.line().x(function(s){return a(s.categoryValue)}).y(function(s){return i(s.value)});this.mainGraphicsSVG.attrs({x:0,height:this.availableHeight,width:this.availableWidth}),this.mainGraphicsContext.attr("transform",(0,Fa.Iu)(0,0)),this.mainGraphicsContext.selectAll(".line").data(this.data.series,function(s){return s.identity.getKey()}).join(function(s){return s.append("path").classed("line",!0)}).style("stroke",function(s){return s.lineStyle.strokeColor}).attr("d",function(s){return n(s.data)}),null===(t=this.animator)||void 0===t||t.animate({mainGraphicsContext:this.mainGraphicsContext,interactivityService:null,xTranslation:a(a.domain()[0]+this.newDataInterval)-a(a.domain()[0])})},e.prototype.containsEmptySeries=function(){return!this.data||_.isEmpty(this.data.series)},e.mergeCategories=function(t,a,i){w.fF.assertValue(t,"existingChartData"),w.fF.assertValue(a,"newChartData");var s=_.findIndex(a.categories,function(o){return o&&o.categoryValue>i});s>-1?(t.categories=t.categories.concat(a.categories.slice(s)),t.categoryData=t.categoryData.concat(a.categoryData.slice(s))):(t.categories=a.categories,t.categoryData=a.categoryData)},e.mergeSeries=function(t,a,i){w.fF.assertValue(t,"existingSeries"),w.fF.assertValue(a,"newSeries");for(var n=[],s=0,o=a;s<o.length;s++){var l=o[s],u=_.find(t,function(g){return g.identity.equals(l.identity)});if(u){n.push(u);for(var c=0,h=l.data;c<h.length;c++){var f=h[c];f.categoryValue>i&&u.data.push(f)}}else n.push(l)}return n},e.prototype.getCartesianVisualCapabilities=function(){return{supportsHierarchicalCategoryAxis:!1}},e.prototype.getStaticSeriesRole=function(){return"Y"},e}(ys),Tl=x(14577),Ol=x(67165),Cn=x(81551),Sr=x(15458),ds=x(79972),hs=x(56914),Fl=function(r){function e(t){return r.call(this,t)||this}return(0,d.__extends)(e,r),e.prototype.initRenderer=function(t){r.prototype.initRenderer.call(this,t),this.svg.classed("".concat(e.ClassName," ").concat(cr.qR),!0),this.renderer=new hs.WG(this,t.eventManager)},e.prototype.renderAtFrame=function(t){this.data=this.originalData=t,this.updateViewModelAdapterAndData(),this.cartesianVisualHost.triggerRender(!1)},e.prototype.setData=function(t){var i,n,s,a=this;if(this.data=ds.vN(this.style),!(null===(i=this.playAxis)||void 0===i)&&i.isCurrentlyPlaying()&&this.playAxis.stop(),t.length>0){var o=t[0]||t[1];if(o){this.categoryAxisProperties=(0,p.Vk)(o.metadata,!0),this.valueAxisProperties=(0,p.$w)(o.metadata,!0),this.dataView=o;var l={viewport:this.currentViewport,colors:this.style.colorPalette.dataColors,interactivityService:this.interactivityService,categoryAxisProperties:this.categoryAxisProperties,valueAxisProperties:this.valueAxisProperties,style:this.style,tooltipsEnabled:this.tooltipsEnabled,useMatrixDV:!0};if((0,cr.vH)(o)){this.playAxis||(this.playAxis=new cr.CT(this.interactivityService),this.dataView&&(0,cr.vH)(this.dataView)&&(w.fF.assertValue(this.playAxis,"playaxis"),this.playAxis.initData(this.dataInitOptions)));var u=this.playAxis.setData(o,function(h,f,g){return ds.OQ(h,(0,d.__assign)((0,d.__assign)({},l),{useMatrixDV:!1}),f,g)});this.mergeSizeRanges(u),this.data=u.chartData,this.playAxis.setRenderFunction(function(h){return a.renderAtFrame(h)})}else{null===(n=this.playAxis)||void 0===n||n.remove(),this.playAxis=null;var c=ds.OQ(o,l);c&&(this.data=c)}}}else null===(s=this.playAxis)||void 0===s||s.remove(),this.playAxis=null;this.originalData=this.data},e.prototype.mergeSizeRanges=function(t){var a,i;if(t?.chartData){for(var n=t.chartData.sizeRange,s=0,o=t.allChartData;s<o.length;s++){var u=o[s].sizeRange;null!=u.min&&(n.min=Math.min(null!==(a=n.min)&&void 0!==a?a:Number.POSITIVE_INFINITY,u.min)),null!=u.max&&(n.max=Math.max(null!==(i=n.max)&&void 0!==i?i:Number.NEGATIVE_INFINITY,u.max))}for(var c=0,h=t.allChartData;c<h.length;c++)h[c].sizeRange=n}},e.prototype.hasLegend=function(){var t;return null===(t=this.data)||void 0===t?void 0:t.hasDynamicSeries},e.prototype.enumerateObjectInstances=function(t,a){return Sr.qo.call(this,t,a)},e.prototype.resolveFormattingPlaceholder=function(t){return Sr.u$.call(this,t)},e.prototype.customizeFormattingCard=function(t){return Sr.aD.call(this,t)},e.prototype.getFormattingCards=function(t){return Sr.nZ.call(this,t)},e.prototype.supportsTrendLine=function(){var t=this.data;return!(!t||this.isXAxisCategorical()||this.playAxis)&&!t.size&&(t.hasCategory||t.hasDynamicSeries)&&!!t.xCol&&!!t.yCol},e.prototype.supportsStaticReferenceLines=function(){return this.data&&!this.isXAxisCategorical()},e.prototype.getAxisLocationForRole=function(t){return"X"===t?0:1},e.getExtents=function(t){var a,i={},n=t.dataPoints;if(_.isEmpty(n))return{minY:0,maxY:0,formatStringY:void 0,minX:0,maxX:0,formatStringX:void 0};var s=!!t.xGroupMetadata,o=s&&t.xGroupMetadata.isCategoricalAxis;return o||(i.minX=d3.min(n,function(l){return l.x}),i.maxX=d3.max(n,function(l){return l.x}),i.formatStringX=_.first(n).xFormatString),s&&!o&&(n=_.filter(n,function(l){return null!=l.x})),i.minY=d3.min(n,function(l){return l.y}),i.maxY=d3.max(n,function(l){return l.y}),i.formatStringY=null===(a=_.first(n))||void 0===a?void 0:a.yFormatString,i},e.prototype.calculateAxesProperties=function(t){var a=this;this.updateCurrentViewport(t);var i={minY:0,maxY:10,formatStringY:void 0,formatStringX:void 0,minX:0,maxX:10};this.playAxis?(i=this.playAxis.getCartesianExtents(i,e.getExtents),this.playAxisControlLayout=t.playAxisControlLayout):_.isEmpty(this.data.dataPoints)||(i=e.getExtents(this.data));var n=this.getAxesDomains(!1,{categoryAxis:!this.isXAxisCategorical(),valueAxis:!0}),s=function(l){var u,c,h,f,g="x"===l,A="y"===l,S=g?t.categoryAxisOptions:t.valueAxisOptions,C=g&&a.isXAxisCategorical(),L=C?{domain:_.uniq(_.map(a.data.dataPoints,function(z){return z.categoryIndex})),type:0}:D.mergeScalarAxisDomains(S.includeDomain,D.createScalarDomainOptions(g?n.categoryAxis:n.valueAxis,0)),P=g?a.data.xCol:a.data.yCol,V=C?(0,p.is)({availableWidth:a.availableWidth,categoryCount:_.size(_.uniqBy(a.data.dataPoints,function(z){return z.categoryIndex})),preferredCategoryWidth:(0,p.$K)((0,p.Vk)(a.dataView.metadata)),domain:L.domain,isScalar:!a.isXAxisCategorical(),cartesianOptions:a.options,trimOrdinalDataOnOverflow:t.trimOrdinalDataOnOverflow,outerPaddingRatio:t.outerPaddingRatio,innerPaddingRatio:t.innerPaddingRatio}):void 0,k=D.createAxis({pixelSpan:g?a.availableWidth:a.availableHeight,domainOptions:L,metaDataColumn:P,axisZoom:t.axisZoom,zeroScalarDomain:e.DefaultZeroScalarDomain,isScalar:A||!C,isCategoryAxis:g,isVertical:A,formatString:(g?i.formatStringX:i.formatStringY)||(0,F.EO)(P,Tl.il.general.formatString),outerPadding:null!==(u=V?.outerPaddingRatio)&&void 0!==u?u:0,categoryThickness:null!==(c=V?.categoryThickness)&&void 0!==c?c:void 0,innerPaddingRatio:null!==(h=V?.innerPaddingRatio)&&void 0!==h?h:void 0,outerPaddingRatio:null!==(f=V?.outerPaddingRatio)&&void 0!==f?f:void 0,forcedTickCount:t.forcedTickCount,useTickIntervalForDisplayUnits:!0,axis:S.axis,margin:a.margin,preventNice:C?void 0:D.hasForcedDomain(L),getValueFn:C?function(z,J){var fe=_.find(a.data.dataPoints,function(G){return G.categoryIndex===z});return fe?.formattedCategory.getValue()}:void 0});return k.axisLabel=a.data.axesLabels[l],g&&(k.d3Axis.tickSizeInner(-a.availableHeight).tickSizeOuter(0),C&&(k.categoryIdentities=a.data.categoryIdentities)),k};return this.xAxisProperties=s("x"),this.yAxisProperties=s("y"),[this.xAxisProperties,this.yAxisProperties]},e.prototype.getAxesDomains=function(t,a){var i={},n=this.data;if(!n)return i;var s={minY:0,maxY:10,formatStringY:void 0,formatStringX:void 0,minX:0,maxX:10};return this.playAxis?s=this.playAxis.getCartesianExtents(s,e.getExtents):_.isEmpty(n.dataPoints)||(s=e.getExtents(n)),a.categoryAxis&&!this.isXAxisCategorical()&&(i.categoryAxis=[s.minX,s.maxX]),a.valueAxis&&(i.valueAxis=[s.minY,s.maxY]),i},e.prototype.setFilteredData=function(t,a){if(this.isXAxisCategorical()){var i=this.data=(0,me.ED)(this.originalData);i.dataPoints=_.filter(i.dataPoints,function(n){return n.categoryIndex>=t&&n.categoryIndex<a}),i.dataPointSeries=_.map(i.dataPointSeries,function(n){var s=(0,me.ED)(n);return s.dataPoints=_.filter(n.dataPoints,function(o){return o.categoryIndex>=t&&o.categoryIndex<a}),s})}},e.prototype.shouldSuppressAnimation=function(){var t,a;return(null===(a=null===(t=this.data)||void 0===t?void 0:t.dataPoints)||void 0===a?void 0:a.length)>e.NoAnimationThreshold},e.prototype.render=function(t,a,i){var n,s,o,l,u,c,h;if(this.data){this.playAxis&&!this.playAxis.isRendererInitialized()&&this.playAxis.initRenderer({svg:this.svg});var L,f=this.data,g=(0,sa.Mb)(this.animator,t),A=!!this.data.size,S={data:this.data,allData:this.originalData,currentViewport:this.currentViewport,drawBubbles:A,isPlay:!!this.playAxis,hasCategoricalAxis:this.isXAxisCategorical(),xAxisProperties:this.xAxisProperties,yAxisProperties:this.yAxisProperties,plotArea:{width:this.availableWidth,height:this.availableHeight},margin:this.margin,hasSelection:null===(n=this.interactivityService)||void 0===n?void 0:n.hasSelection(),animation:null!==(s=this.playAxis)&&void 0!==s&&s.isCurrentlyPlaying()&&(this.mobileTileInteractive||g>0)?cr.Je:{duration:g,ease:d3.easeCubicInOut},animationOptions:this.animationOptions,fillMarkers:!A&&f.fillPointStyle===Ol.f.fillOnly,suppressDataPointRendering:1===a&&(null===(o=f.dataPoints)||void 0===o?void 0:o.length)>e.NoRenderResizeThreshold,supportsPlotAreaSymmetryShading:this.isPlotSymmetryShadingSupported()},C=this.renderer.render(S,this.interactivityService,this.hostService,i);if(this.mobileTileInteractive&&(C={data:C.data,dataPointsSelection:C.dataPointsSelection,eventGroup:C.eventGroup,root:C.root,host:this.cartesianVisualHost,mobileRoot:this.svg,visualDataInitOptions:this.dataInitOptions,xAxisProperties:this.xAxisProperties,yAxisProperties:this.yAxisProperties,background:d3.select(this.element.get(0)),visualInstanceId:C.visualInstanceId,eventManager:C.eventManager}),this.playAxis&&(w.fF.assertValue(this.playAxisControlLayout,"playAxisControlLayout"),this.playAxis.setPlayControlPosition(this.playAxisControlLayout),L=this.playAxis.render(S,this.currentViewport,this.margin),this.interactivityService&&(C.playOptions={traceLineRenderer:new hs.oz(L.viewModel,this)},null!==(l=this.interactivityService)&&void 0!==l&&l.hasSelection()))){var P=_.uniqBy(_.filter(L.allDataPoints,function(V){return V.selected}),function(V){return V.identity.getKey()});C.playOptions.traceLineRenderer.render(P,!t)}return{dataPoints:null!==(u=L?.allDataPoints)&&void 0!==u?u:f.dataPoints,behaviorOptions:C,navigationOptions:this.interactivityService?{helper:this.renderer,navigationStrategy:this.isXAxisCategorical()?U.jN.CategoryFirst:this.data.hasDynamicSeries?U.jN.SeriesFirst:U.jN.CategoryOnly}:void 0,labelDataPoints:null!==(c=f.dataLabelsSettings)&&void 0!==c&&c.show||null!==(h=f.dataLabelsSettings)&&void 0!==h&&h.showCategory?Vl(S,this.style):void 0,labelsAreNumeric:!1,animateLabels:!0}}},e.prototype.getCategoryValueType=function(){return D.getCategoryValueType(this.data.xCol)},e.prototype.getSupportedCategoryAxisType=function(){var t;return null!==(t=this.data)&&void 0!==t&&t.xGroupMetadata?this.data.xGroupMetadata.isScalarType?xt.w.both:xt.w.categorical:xt.w.scalar},e.prototype.getVisualCategoryAxisIsScalar=function(){return!this.isXAxisCategorical()},e.prototype.getSubSelectionMetadata=function(t){return{visualObject:t}},e.prototype.getSubSelectionShortcuts=function(t){return Sr.yV.call(this,t)},e.prototype.getSubSelectionStyles=function(t){return Sr.mv.call(this,t)},e.prototype.getSubSelectionCustomOutlines=function(t){return Sr.PH.call(this,t)},e.prototype.getSelectorsByColumnFromSubselectedElement=function(t){return Sr.l5.call(this,t)},e.prototype.getDataViewObjectLayerChanges=function(t,a){return Sr.In.call(this,t,a)},e.prototype.getGroupBoundingRect=function(t,a,i){var n,s,o,l=(n=i.node().getBoundingClientRect()).left,u=n.top,c=(s=i.node().getBBox()).x,h=s.y,f=(o=t.reduce(function(K,ie){var Oe=ie.geometry,je=Oe.size,ke=Oe.x,Je=Oe.y;return K.xMin=Math.min(ke-je,K.xMin),K.yMin=Math.min(Je-je,K.yMin),K.xMax=Math.max(ke+je,K.xMax),K.yMax=Math.max(Je+je,K.yMax),K},{xMin:Number.MAX_SAFE_INTEGER,yMin:Number.MAX_SAFE_INTEGER,xMax:Number.MIN_SAFE_INTEGER,yMax:Number.MIN_SAFE_INTEGER})).xMin,g=o.yMin,P=(o.xMax-f)*a,V=Math.round((o.yMax-g)*a+10),k=Math.round(P+10),J=(f-c)*a,fe=Math.ceil((g-h)*a-5+u);return{x:Math.ceil(J-5+l),y:fe,height:V,width:k}},e.prototype.getCartesianVisualCapabilities=function(){return{supportsHierarchicalCategoryAxis:!1}},e.prototype.getStaticSeriesRole=function(){},e.prototype.isXAxisCategorical=function(){var t,a;return null===(a=null===(t=this.data)||void 0===t?void 0:t.xGroupMetadata)||void 0===a?void 0:a.isCategoricalAxis},e.prototype.isPlotSymmetryShadingSupported=function(){var t,a;return!(this.isXAxisCategorical()||null!==(t=this.valueAxisProperties)&&void 0!==t&&t.logAxisScale||null!==(a=this.categoryAxisProperties)&&void 0!==a&&a.logAxisScale)},e.ClassName="scatterChart",e.NoAnimationThreshold=1e3,e.NoRenderResizeThreshold=1e3,e.DefaultZeroScalarDomain=[-1,1],e}(On);function Vl(r,e){var t,a=r.data.dataLabelsSettings,i=a.fontProperties,n=null!==(t=function(r){var e=r.plotArea,t=e.width,a=e.height,i=new Cn.E(t/2,a/2),n=function(r,e){var t=r/4,a=e/4;return[new Cn.E(t,a),new Cn.E(3*t,a),new Cn.E(t,3*a),new Cn.E(3*t,3*a)]}(t,a);return function(r,e,t){for(var o,a=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],i=[],n=t.xAxisProperties.scale,s=t.yAxisProperties.scale,l=0,u=t.data.dataPoints;l<u.length;l++){var c=u[l],h=n(c.x),f=s(c.y),g=Il(h,f,r);t.drawBubbles?i[g]||(i[g]=c.identity):(o=Nl(e[g].x,e[g].y,h,f))<a[g]&&(i[g]=c.identity,a[g]=o)}return _.filter(i,function(A){return!!A}).map(function(A){return A.getKey()})}(i,n,r)}(r))&&void 0!==t?t:[],s=i.color||Ze.v.getThemeColor(e,O.uQ);return _.map(r.data.dataPoints,function(o){var l=o.formattedCategory.getValue(),u=(0,j.qk)(i,l);return{isPreferred:zl(o.identity.getKey(),n),text:l,textSize:{width:Z.b.measureSvgTextWidth(u),height:Z.b.estimateSvgTextHeight(u)},outsideFill:s,insideFill:Ze.v.getThemeColor(e,O.pl),parentType:0,parentShape:{point:{x:r.xAxisProperties.scale(o.x),y:r.yAxisProperties.scale(o.y)},radius:hs.WG.calculateRadius(o.radius,r.data.sizeRange,r.plotArea,r.data.marker.rangeType,r.data.marker.multiplier),validPositions:[2,1,8,4,16,32,64,128]},identity:o.renderIdentity,fontProperties:i,leaderLine:{strokeColor:s,strokeWidth:1,strokeTransparency:50,strokePattern:E.Dv.solid,strokeShow:!0},hasBackground:a.enableBackground,backgroundColor:a.backgroundColor,backgroundTransparency:a.backgroundTransparency,isCategory:!0}})}function Il(r,e,t){return r>t.x&&e<=t.y?0:r<=t.x&&e<=t.y?1:r<=t.x&&e>t.y?2:3}function Nl(r,e,t,a){return Math.sqrt((r-t)*(r-t)+(e-a)*(e-a))}function zl(r,e){return _.some(e,function(t){return 0===r.localeCompare(t)})}var fi=x(5616),Bl=[ka.h.auto,ka.h.outsideEnd,ka.h.insideEnd,ka.h.insideCenter,ka.h.insideBase],Wl=1,Hl=20;function Ul(r){return{type:3,card:[Gl.call(this,r.categoryAxisData),jl.call(this),Yl.call(this)].filter(function(e){return e})}}function Gl(r){var e=this,t=fi.wW.sentimentColors,a=this.originalData,i=a.sentimentColors,n=new ge.CQ(new ge.lg("sentimentColors"),"Role_DisplayName_Columns",(0,d.__spreadArray)((0,d.__spreadArray)([],_.values(t),!0),[fi.wW.valueAxis.totalsEnabled,fi.wW.categoryAxis.innerPadding],!1),this.localizer);return n.addGroup("colors",function(s){s.withDisplayName("Visual_Colors").addSimpleSlice("increaseFill",new ge.BT({descriptor:t.increaseFill,value:{value:i.increaseFill.solid.color}}).build()).addSimpleSlice("decreaseFill",new ge.BT({descriptor:t.decreaseFill,value:{value:i.decreaseFill.solid.color}}).build()).addSimpleSlice("otherFill",new ge.BT({descriptor:t.otherFill,value:{value:i.otherFill.solid.color}}).build(),function(o){return o.withDisabled(!a.isBreakdown).withCustomDescription("Visual_Waterfall_Breakdown_OtherDescription")}),a.isBreakdown||s.addSimpleSlice("totalsEnabled",new ge.bd({descriptor:fi.wW.valueAxis.totalsEnabled,value:e.isTotalsEnabled()}).build(),function(o){return o.withCustomDisplayName("Visual_Axis_Total_Column")}),e.isTotalsEnabled()&&s.addSimpleSlice("totalFill",new ge.BT({descriptor:t.totalFill,value:{value:i.totalFill.solid.color}}).build())}),n.addGroup("spacing",function(s){s.withDisplayName("Visual_Spacing").addSimpleSlice("innerPadding",(0,pa.Gf)(r,e.localizer))}),n.build()}function jl(){var r=this,e=this.originalData,t=fi.wW.breakdown,a=new ge.CQ(new ge.lg("breakdown"),"Visual_Waterfall_Breakdown",t,this.localizer);return e.isBreakdown?(a.addGroup("breakdown",function(i){i.addSimpleSlice("maxBreakdowns",new ge.JN({descriptor:t.maxBreakdowns,value:e.numberOfBreakdowns,localize:r.localizer,options:{minValue:{type:0,value:Wl},maxValue:{type:1,value:Math.min(Hl,e.totalBreakdownCategories)}}}).build(),function(n){return n.withCustomDisplayName("Visual_Waterfall_MaximumBreakdown")})}),a.build()):(a.withDisabled(!0,"Visual_BreakdownCard_DisabledReason"),a.build())}function Yl(){var r,e,t=fi.wW.labels,a=this.originalData,i=this.data.dataLabelsSettings,n={dataLabelsSettings:a.dataLabelsSettings,positionObject:Bl,show:!0,displayUnits:!0,precision:!0,fontSize:!0,fontFamily:!0,labelOrientation:!0,position:!0,enableBackground:i.enableBackground,backgroundColor:i.backgroundColor,backgroundTransparency:i.backgroundTransparency,style:this.style,bold:!0,italic:!0,underline:!0};i.position&&n.positionObject.indexOf(i.position)<0&&(i.position=ka.h.auto);var o={cardBuilder:new ge.CQ(new ge.lg("labels"),"Visual_DataPointsLabels",t,this.localizer),dataLabelsProps:t,featureSwitches:this.featureSwitches,hostServices:this.hostService,options:n,individualSelector:(0,N.WD)({featureSwitches:this.featureSwitches,hasCategories:null!=_.first(a.categories),hasDynamicSeries:!1,hasSeriesSelector:!1})};if(a.isBreakdown){var l=null===(e=_.first(null===(r=_.first(a.series))||void 0===r?void 0:r.data))||void 0===e?void 0:e.identity.getSelector();l&&(o.repetitionSelector={metadata:l.metadata})}return(0,N.XQ)(o)}function Kl(r,e){if(!e){var a=_.first(r).visualObjects;if(!(a.length>0))return;var n=this.localizer;switch(a[0].objectName){case"increase-fill":return Hn("Format_Increase_Fill",n);case"decrease-fill":return Hn("Format_Decrease_Fill",n);case"other-fill":return Hn("Format_Other_Fill",n);case"total-fill":return Hn("Format_Total_Fill",n);default:return}}}function Hn(r,e){var t=fi.wW.labels.show,a="".concat("Visual","-").concat("sentimentColors");return[{type:0,excludedResetFormattingIds:[t]},(0,d.__assign)((0,d.__assign)({type:2},t),{enabledLabel:e("Format_AddDataLabels")}),{type:1,destinationInfo:{cardUid:a},label:e(r)}]}function Xl(r){var t=_.first(r).visualObjects;if(t.length>0)switch(t[0].objectName){case"data-labels":return function(r){var e=fi.wW.labels;return(0,ae.Jf)({hostServices:r,omitSelectorForSingleSeries:!0,individualSelector:!0,selector:void 0,repetitionSelector:void 0},{fontFamilyReference:e.fontFamily,fontSizeReference:e.fontSize,boldReference:e.bold,italicReference:e.italic,underlineReference:e.underline,fontColorReference:e.color,displayUnitsReference:e.labelDisplayUnits,precisionReference:e.labelPrecision})}(this.hostService);case"increase-fill":return(0,ae.w3)(this.hostService,void 0,fi.wW.sentimentColors.increaseFill);case"decrease-fill":return(0,ae.w3)(this.hostService,void 0,fi.wW.sentimentColors.decreaseFill);case"other-fill":return(0,ae.w3)(this.hostService,void 0,fi.wW.sentimentColors.otherFill);case"total-fill":return(0,ae.w3)(this.hostService,void 0,fi.wW.sentimentColors.totalFill);default:return}}var js=(0,W.CH)("waterfall-connector"),vs=(0,W.CH)("column");function Jl(r,e){var t=this,a=this.clippedData.series[0].data,i=this.interactivityService&&this.interactivityService.hasSelection(),n=this.xAxisProperties.scale,s=this.yAxisProperties.scale,o=s.domain()[0],l=this.yAxisProperties.invertAxis,u=this.featureSwitches.onObject;this.mainGraphicsSVG.attr("height",this.availableHeight).attr("width",this.availableWidth),(0,ia.H4)(this.mainGraphicsSVG,this.clippedData.strokeSettings);var c=this.mainGraphicsContext.selectAll(vs.selector).data(a,function(S){return S.key}).join(function(S){return S.append("rect").classed(vs.class,!0).classed("highlight",function(C){return C.highlight})}).style("fill",function(S){return S.color}).style("fill-opacity",function(S){return 1===S.barType?Da.Ko:(0,Da.eR)(S.selected,S.highlight,i,t.data.hasHighlights)}).attr("width",this.layout.categoryWidth).attr("x",function(S){return n(S.categoryIndex)}).attr("y",function(S){if(l){var C;return C=S.position<o?Math.abs(s(o)-s(S.value)):Math.abs(s(S.position)-s(S.position+S.value)),Un(s,S.position,S.value)-C}return Un(s,S.position,S.value)}).attr("height",function(S){return S.position<o?Math.abs(s(o)-s(S.value)):Math.abs(s(S.position)-s(S.position+S.value))});this.interactivityService&&c.attrs({tabindex:0,focusable:!0,"aria-label":function(C){return(0,ii.X)(C.tooltipInfo())},role:"option","aria-selected":function(C){return C.selected}}).classed(Da.Pg,!kt.M.isInternetExplorerOrEdge()),u&&c.classed(Be.cy,!0).attr(Be.Ez,function(S){return function(r){switch(r){case 1:return"decrease-fill";case 0:return"increase-fill";case 3:return"other-fill";case 2:return"total-fill";default:w.fF.assertNever(r)}}(S.sentimentColorType)}).attr(Be.CK,function(S){return function(r){switch(r){case 1:return"Visual_DecreaseFill";case 0:return"Visual_IncreaseFill";case 3:return"Visual_OtherFill";case 2:return"Visual_TotalFill";default:w.fF.assertNever(r)}}(S.sentimentColorType)}).attr(Be.QZ,3),this.mainGraphicsContext.selectAll(js.selector).data(a.slice(0,a.length-1),function(S){return S.key}).join(function(S){return S.append("line").classed(js.class,!0)}).style("stroke",Ze.v.getThemeColor(this.style,"foregroundNeutralTertiary")).attrs({x1:function(C){return n(C.categoryIndex)},y1:function(C){return s(C.position+C.value)},x2:function(C){return n(C.categoryIndex+1)+t.layout.categoryWidth},y2:function(C){return s(C.position+C.value)}}),this.tooltipsEnabled&&this.tooltipService.addTooltip(c,function(S){return S.data&&S.data.tooltipInfo()},function(S){return S.data&&S.data.identity&&[S.data.identity]});var g,A,h=this.data.dataLabelsSettings,f=[];return(h&&h.show||h.showCategory)&&(f=this.createLabelDataPoints()),this.interactivityService&&(A={navigationStrategy:U.jN.CategoryOnly,helper:this},g={root:this.mainGraphicsContext,bars:c,isBreakdown:this.data.isBreakdown,formatMode:e}),(0,Fa.bL)(this.animationOptions),{dataPoints:this.data.series[0].data,behaviorOptions:g,navigationOptions:A,labelDataPoints:f,labelsAreNumeric:!0,labelOrientation:h.labelOrientation,animateLabels:!r}}function Un(r,e,t){return t<0?r(e):r(e)-(r(0)-r(t))}function $l(r,e,t){return t<0?r(e)-(r(0)-r(t)):r(e)}var tu=function(r){function e(t){var a;return r.call(this,(0,d.__assign)((0,d.__assign)({},t),{tooltipsEnabled:null===(a=t.tooltipsEnabled)||void 0===a||a}))||this}return(0,d.__extends)(e,r),e.prototype.initRenderer=function(t){if(r.prototype.initRenderer.call(this,t),this.svg.classed(e.WaterfallClassName,!0),this.mainGraphicsSVG=this.svg.append("svg"),this.mainGraphicsContext=this.mainGraphicsSVG.append("g").classed(e.MainGraphicsContextClassName,!0),this.interactivityService){var a=kt.M.isInternetExplorerOrEdge();this.mainGraphicsContext.attrs({tabindex:0,focusable:!0,role:"listbox","aria-multiselectable":!0,"aria-label":this.localizer("Visual_Plot")}).classed(Da.Pg,!a)}},e.getDefaultWaterfallLabelSettings=function(t,a,i,n){return void 0===a&&(a=!1),{show:a,labelOrientation:gt.B.Horizontal,position:ka.h.auto,displayUnits:0,precision:O.NZ,fontProperties:(0,N.bT)({style:t,textClassName:"smallLightLabel",labelColor:i,fontSize:n}).fontProperties,enableBackground:!1,bold:!1,italic:!1,underline:!1}},e.doesDataLabelFitInShape=function(t,a,i){if(null==t||null===t.value)return!1;var n={text:i.labelText(t),fontFamily:O.bN.fontFamily,fontSize:O.bN.fontSize,fontWeight:O.bN.fontWeight};if(Un(a.scale,t.position,t.value)-O.FJ>0)return!0;var o=Z.b.measureSvgTextWidth(n),l=Z.b.estimateSvgTextHeight(n),u=i.categoryWidth,c=Math.abs((0,I.sc)(a.scale,Math.max(0,Math.abs(t.value)),0));return!(o>u||l>c)},e.prototype.setData=function(t){w.fF.assertValue(t,"dataViews");var a=this.getSentimentColorsFromObjects(null),i=e.DefaultBreakdowns,n=t.length>0?t[0]:void 0;if(this.data=this.originalData={series:[{data:[]}],categories:[],valuesMetadata:[],legendData:(0,m.Fe)(this.style),hasHighlights:!1,categoryMetadata:null,scalarCategoryAxis:!1,positionMax:0,positionMin:0,dataLabelsSettings:e.getDefaultWaterfallLabelSettings(this.style,!1,void 0),sentimentColors:a,axesLabels:{x:null,y:null},numberOfBreakdowns:i,totalBreakdownCategories:0,totalsEnabled:true},n){if(this.dataView=n,n.metadata&&n.metadata.objects){var s=n.metadata.objects,o=s.labels;o&&(0,N.ww)(o,this.data.dataLabelsSettings,!0,this.style),a=this.getSentimentColorsFromObjects(s),i=(0,b.NA)(s,fi.wW.breakdown.maxBreakdowns,e.DefaultBreakdowns)}(n.categorical||n.matrix)&&(this.data=this.originalData=at.convert({dataView:n,style:this.style,hostServices:this.hostService,dataLabelSettings:this.data.dataLabelsSettings,sentimentColors:a,interactivityService:this.interactivityService,tooltipsEnabled:this.tooltipsEnabled,numberOfBreakdowns:i}))}},e.prototype.getFormattingCards=function(t){return Ul.call(this,t)},e.prototype.getSubSelectionShortcuts=function(t,a){return Kl.call(this,t,a)},e.prototype.getSubSelectionStyles=function(t){return Xl.call(this,t)},e.prototype.isTotalsEnabled=function(){var t,a;return null!==(a=null===(t=this.data)||void 0===t?void 0:t.totalsEnabled)&&void 0!==a&&a},e.prototype.hasLegend=function(){return!0},e.createClippedDataIfOverflowed=function(t,a){w.fF.assertValue(t,"createClippedDataIfOverflowed");var i=t.series[0].data;if(a<i.length){var n=(0,me.ED)(t);return n.series=[{data:i.slice(0,a)}],n.categories=t.categories.slice(0,a),n}return t},e.prototype.calculateAxesProperties=function(t){var i,a=this;this.updateCurrentViewport(t);var n=t.categoryAxisOptions,s=t.valueAxisOptions,o=this.clippedData=this.data,l=o.categories.length-(this.isTotalsEnabled()?0:1),u=this.getPreferredPlotArea({isScalar:!1,categoryCount:l,categoryThickness:p.jY,outerPaddingRatio:t.outerPaddingRatio}),c=(0,p.is)({availableWidth:u.width,categoryCount:l,preferredCategoryWidth:null!==(i=o?.preferredCategoryWidth)&&void 0!==i?i:null,domain:null,isScalar:!1,cartesianOptions:this.options,trimOrdinalDataOnOverflow:t.trimOrdinalDataOnOverflow,outerPaddingRatio:t.outerPaddingRatio,innerPaddingRatio:t.innerPaddingRatio});this.options.isScrollable||(o=this.clippedData=e.createClippedDataIfOverflowed(o,c.categoryCount));var h=D.createScalarDomainOptions(this.getAxesDomains(!1,{valueAxis:!0}).valueAxis,0);h=D.mergeScalarAxisDomains(s.includeDomain,h);var f=function(L){var P,V="x"===L,k="y"===L,z=V?n:s,J=D.createAxis({pixelSpan:V?u.width:u.height,domainOptions:V?D.createDomain(o.series,D.getCategoryValueType(o.categoryMetadata),!1,[n.includeDomain]):h,metaDataColumn:V?o.categoryMetadata:o.valuesMetadata,axisZoom:void 0,zeroScalarDomain:k?e.DefaultZeroScalarDomain:void 0,isScalar:k,isVertical:k,isCategoryAxis:V,formatString:null!==(P=D.getAxisFormatString(V?[]:a.data.series))&&void 0!==P?P:(0,F.EO)(V?o.categoryMetadata:o.valuesMetadata[0],B.p.general.formatString),outerPadding:k?0:c.categoryThickness*c.outerPaddingRatio,outerPaddingRatio:k?0:c.outerPaddingRatio,innerPaddingRatio:k?void 0:t.innerPaddingRatio,categoryThickness:k?void 0:c.categoryThickness,forcedTickCount:t.forcedTickCount,axis:(0,d.__assign)((0,d.__assign)({},z.axis),{invertAxis:z.axis.invertAxis&&k}),preventNice:D.hasForcedDomain(V?z.includeDomain:h),useTickIntervalForDisplayUnits:!!k||void 0,getValueFn:V?function(fe,G){return e.lookupXValue(o,fe,G)}:void 0});return V&&(J.outerPaddingRatio=c.outerPaddingRatio,o.categoryIdentities&&(J.categoryIdentities=o.categoryIdentities)),J};this.xAxisProperties=f("x"),this.yAxisProperties=f("y");var g=(0,it.d6)(this.yAxisProperties,o.dataLabelsSettings),A=(0,N.fI)(),S=this.xAxisProperties.categoryThickness*(1-t.innerPaddingRatio);return this.layout={categoryCount:c.categoryCount,categoryThickness:c.categoryThickness,isScalar:c.isScalar,outerPaddingRatio:c.outerPaddingRatio,categoryWidth:S,labelText:function(L){var V=A.getOrCreate(L.labelFormatString,o.dataLabelsSettings,g.units,g.getPrecision(!!L.labelFormatString,o.series[L.seriesIndex].type));return(0,N.Gv)({label:V.format(L.value)})},labelLayout:e.getLabelLayoutXYForWaterfall(this.xAxisProperties,S,this.yAxisProperties,h?.domain),filter:function(L){return e.doesDataLabelFitInShape(L,a.yAxisProperties,a.layout)},style:{fill:function(L){return L.isLabelInside?Ze.v.getThemeColor(a.style,O.pl):L.labelFill}}},[this.xAxisProperties,this.yAxisProperties]},e.getLabelLayoutXYForWaterfall=function(t,a,i,n){return{x:function(o){return t.scale(o.categoryIndex)+a/2},y:function(o){return e.getWaterfallLabelYPosition(i.scale,o,n)}}},e.getWaterfallLabelYPosition=function(t,a,i){var n=t(0)-t(Math.abs(a.value)),s=t(a.position),o=t(i[0]),l=t(a.position+a.value);if(a.value<0){var c=s+n+Z.b.estimateSvgTextHeight({text:a.labelText,fontFamily:O.bN.fontFamily,fontSize:O.bN.fontSize,fontWeight:O.bN.fontWeight});if(o>c)return c}else{var h=s-n-O.FJ;if(h>0)return h}return a.isLabelInside=!0,e.getWaterfallInsideLabelYPosition(s,l,o)},e.getWaterfallInsideLabelYPosition=function(t,a,i){return t=(t=t<0?0:t)>i?i:t,a=(a=a<0?0:a)>i?i:a,Math.abs(a-t)/2+Math.min(t,a)},e.prototype.getAxesDomains=function(t,a){var i={},n=this.activeData;return n&&a.valueAxis&&(i.valueAxis=[n.positionMin,n.positionMax]),i},e.lookupXValue=function(t,a,i){var n=t.series[0].data;return a===n.length-1?n[a].categoryValue:(0,p.dZ)(t,a,n[a].type||i,!1)},e.prototype.getVisualCategoryAxisIsScalar=function(){return!1},e.prototype.setFilteredData=function(t,a){var i=this.clippedData=(0,me.ED)(this.data);i.series=[{data:i.series[0].data.slice(t,a)}],i.categories=i.categories.slice(t,a)},e.prototype.render=function(t,a,i){return Jl.call(this,t,i)},e.prototype.getSupportedCategoryAxisType=function(){return xt.w.categorical},e.prototype.getFirstElement=function(){return _.isEmpty(this.clippedData.series)||_.isEmpty(this.clippedData.series[0].data)?{element:null}:{element:this.getHTMLElementFromCategoryIndex(this.clippedData.series[0].data[0].categoryIndex)}},e.prototype.getNextDataPoint=function(t,a,i){var s,n=t;do{switch(i){case U.x0.NextCategory:t+=1,((this.isTotalsEnabled()||this.data.isBreakdown)&&t>=this.data.categories.length||!this.isTotalsEnabled()&&!this.data.isBreakdown&&t>=this.data.categories.length-1)&&(t=0);break;case U.x0.PreviousCategory:(t-=1)<0&&(t=this.isTotalsEnabled()||this.data.isBreakdown?this.data.categories.length-1:this.data.categories.length-2);break;case U.x0.NextSeries:case U.x0.PreviousSeries:break;default:w.fF.assertNever(i)}s=this.data.series[a].data[t]}while(s&&0===s.value&&n!==t);return{element:this.getHTMLElementFromCategoryIndex(t),targetCategoryIndex:t}},e.prototype.getHTMLElementFromCategoryIndex=function(t){return this.mainGraphicsContext.selectAll(vs.selector).filter(function(a){return a.categoryIndex===t}).node()},e.prototype.getSentimentColorsFromObjects=function(t){var a=Ze.v.create(this.style);return{increaseFill:{solid:{color:a.getColorForPropertyWithDefaultColor(t,fi.wW.sentimentColors.increaseFill,Ze.v.getSentimentColor(this.style,"good"))}},decreaseFill:{solid:{color:a.getColorForPropertyWithDefaultColor(t,fi.wW.sentimentColors.decreaseFill,Ze.v.getSentimentColor(this.style,"bad"))}},totalFill:{solid:{color:a.getColorForPropertyWithDefaultColor(t,fi.wW.sentimentColors.totalFill,Ze.v.getDataColorByIndex(this.style,0))}},otherFill:{solid:{color:a.getColorForPropertyWithDefaultColor(t,fi.wW.sentimentColors.otherFill,Ze.v.getSentimentColor(this.style,"neutral"))}}}},e.prototype.createLabelDataPoints=function(){for(var t,a=[],i=this.data,n=this.xAxisProperties.scale,s=this.yAxisProperties.scale,o=this.yAxisProperties.invertAxis,l=s(0),u=i.series,c=(0,N.fI)(),h=i.dataLabelsSettings,f=(0,it.d6)(this.yAxisProperties,h),g=0,A=u;g<A.length;g++)for(var S=A[g],C=0,L=S.data;C<L.length;C++){var P=L[C],V=P.labelFormatString,k=c.getOrCreate(V,this.data.dataLabelsSettings,f.units,f.getPrecision(!!V,S.type)),z=(0,Rt.Bw)(k.format(P.value)),J=h.fontProperties,fe=(0,j.qk)(J,z);a.push({isPreferred:!0,text:z,textSize:{width:Z.b.measureSvgTextWidth(fe),height:Z.b.estimateSvgTextHeight(fe,!0)},outsideFill:null!==(t=P.labelFill)&&void 0!==t?t:Ze.v.getThemeColor(this.style,O.uQ),insideFill:Ze.v.getThemeColor(this.style,O.pl),parentType:1,parentShape:{rect:{left:n(P.categoryIndex),top:o?$l(s,P.position,P.value):Un(s,P.position,P.value),width:this.layout.categoryWidth,height:Math.abs(l-s(Math.abs(P.value)))},orientation:P.value>=0?o?2:1:o?1:2,validPositions:e.getValidPositions(h.position,P.value)},fontProperties:J,identity:void 0,hasBackground:h.enableBackground,backgroundColor:h.backgroundColor,backgroundTransparency:h.backgroundTransparency})}return a},e.getValidPositions=function(t,a){if(0===a)return e.validZeroLabelPosition;switch(t){case ka.h.insideEnd:return[4];case ka.h.insideCenter:return[1];case ka.h.insideBase:return[2];case ka.h.outsideEnd:return[16];default:return[16,4,1,2]}},e.prototype.getCartesianVisualCapabilities=function(){return{supportsHierarchicalCategoryAxis:!1}},e.prototype.getStaticSeriesRole=function(){},e.DefaultZeroScalarDomain=[0,1],e.DefaultBreakdowns=5,e.WaterfallClassName="waterfallChart",e.MainGraphicsContextClassName="mainGraphicsContext",e.validZeroLabelPosition=[16,8],e}(On);function Gn(r,e){return{create:function(a){return r.viewModelAdapterFactory.createLayerAdapter(e,a)}}}var Ys=function(e){return new xo((0,d.__assign)((0,d.__assign)({},e),{columnChartType:function(t){switch(t){case 14:case 5:return 20;case 13:case 4:return 12;case 9:return 52;case 7:return 18;case 6:return 10;case 8:return 50;case 10:return 84;default:return w.fF.assertFail("Not supported"),20}}(e.chartType),isComboChart:(0,p.LQ)(e.chartType),viewModelAdapterFactory:Gn(e,4)}))},Ks=function(e){return new wl((0,d.__assign)((0,d.__assign)({},e),{lineChartType:function(t){switch(t){case 0:case 13:case 14:return 1;case 3:return 32;case 1:return 2;case 2:return 16;default:return w.fF.assertFail("Not supported"),1}}(e.chartType),isComboChart:(0,p.LQ)(e.chartType),viewModelAdapterFactory:Gn(e,0)}))},iu=x(42359),nu=new(function(){function r(){}return r.prototype.getDataBoundReferenceLines=function(e,t,a){var i=[],n=[];if(e)if(e.matrix&&e.matrix.valueSources){var s=e.matrix;if(s.valueSources&&n.push.apply(n,e.matrix.valueSources||[]),s.rows&&s.rows.levels)for(var o=0,l=s.rows.levels;o<l.length;o++)n.push.apply(n,l[o].sources||[])}else if(e.categorical&&e.categorical.values){var c=_.head(e.categorical.values.grouped());if(c)for(var h=0,f=c.values;h<f.length;h++)n.push(f[h].source)}for(var A=0;A<n.length;A++){var S=n[A],C=Ze.v.getDataColorByIndex(a,A,we.fA),L=(0,b.AO)(S.objects,"referenceLine"),P=this.getCartesianRoleKind(S,t);i.push.apply(i,(0,Pt.UL)(L,C,"referenceLine",P,a,void 0,S)||[])}return i},r.prototype.getCartesianRoleKind=function(e,t){var a=e.roles;if(t.getAxisLocationForRole&&a)for(var i in a)if(a[i])return t.getAxisLocationForRole(i);return 1},r}()),su=function(){function r(){}return r.convert=function(e){var t,a=e.dataViews,i=e.layers,n=e.layerStyle,s=e.chartType,o=e.hasDataChanged,l=i.length>1&&!!(a[0]&&a[0].categorical&&a[0].categorical.values),u=n.colorPalette.dataColors;u.clearPreferredScale();for(var c=lt(a),h=_.filter(a,v.Aq),f=_.filter(a,ft.Qp),g=_.filter(a,R.Ik),A=[],S=[],C=[],L=0,P=i.length;L<P;L++){var V=c[L],k=V?[V]:[];if(null!=h[L]&&k.push(h[L]),null!=g[L]&&k.push(g[L]),i[L].setData(k,e.multipleInfo),C.push(uu(i[L],V,n,l,s)),S.push.apply(S,nu.getDataBoundReferenceLines(V,i[L],n)||[]),Ee(a,i,L)){var z=f[L];if(z){var fe=(0,ft.VP)(z,V,L>0,n);A.push.apply(A,fe||[])}}P>1&&u.rotateScale()}var K,G=De.converter(_.head(a));if(_.isEmpty(a))K=new na({style:n,chartType:s});else{var ie=a[0],Oe=ie.metadata&&!_.isEmpty(null===(t=ie.categorical)||void 0===t?void 0:t.categories)&&!!(0,re.A8)(ie.categorical.categories[0]),je=11===s;K=new na({chartType:s,valueAxisProperties:(0,p.$w)(ie.metadata,je),y2AxisProperties:(0,p.$w)(ie.metadata,je,"y2Axis"),categoryAxisProperties:(0,p.Vk)(ie.metadata,Oe||je),isValueAxisIrregular:Ye(a,i),style:n,hasY2Role:(0,M.c5)(ie,"Y2")||a[1]&&(0,M.c5)(a[1],"Y2"),forceShowY2:G.show&&G.showOnValueSecAxis||!_.isEmpty(e.multipleInfo)&&(0,p.LQ)(s),seriesLabelSettings:Ot(i,s,n),featureSwitches:e.featureSwitches}),o&&function(r,e,t,a,i){if(r&&r.length>0){var s=r[0].metadata;if(s){var o=Me(r,a);e.push.apply(e,function(r,e,t,a){var i=Ze.v.getDataColorByIndex(e,0,we.fA),n=[];if(t){var s=(0,b.AO)(r.objects,Pt.XC);n.push.apply(n,(0,Pt.UL)(s,i,Pt.XC,0,e,a,void 0)||[])}var o=(0,b.AO)(r.objects,Pt.Dk);return n.push.apply(n,(0,Pt.UL)(o,i,Pt.Dk,1,e)||[]),n}(s,t,o,i)||[])}}}(a,S,n,i,e.chartType)}return{legendData:(0,m.nh)(C,n),trendLines:A,referenceLines:S,axesData:K,warningObjectCollection:new ze.tb,showIcon:!1,scrollbarOptions:{scrollbarWidth:H.ScrollbarWidth},zoomData:G}},r}();function uu(r,e,t,a,i){var n=r.getLegendData();if(n?.dataPoints.length>1)return n;var s=(0,m.pq)({dataView:e,showByDefault:!0,staticSeriesRoleNames:[r.getStaticSeriesRole()],style:t,allowLegendWithNoSeries:a},function(r){return 4===r||6===r||5===r||7===r||9===r||8===r||11===r||10===r}(i));return!n||s?.isGradientLegend?s:n}var du=function(){function r(e){this.staticUpdateOptions=e}return r.prototype.create=function(e){return new hu(this.staticUpdateOptions,e)},r}(),hu=function(){function r(e,t){this.staticUpdateOptions=e,this.updateOptions=t}return r.prototype.apply=function(e,t){var a,g,i=this.staticUpdateOptions,n=i.layerInitDataOptions,s=i.updateGlobalAxesDomains,o=this.updateOptions,l=o.isSmallMultiples,u=o.reader,c=o.dataViews,h=o.updateOptions,f=o.requestedPerMultipleAxisDomains;if(l){g=(0,p.LQ)(t)?u.convertComboFrame(e.index):[u.convertFrame(e.index)];for(var A=void 0,S=0;S<g.length;S++){var C=g[S],L=(0,iu.eC)(C.metadata,la.e0.formatString,B.x.category,C.categorical,!!A);A?L.categorical.categories=A:A=null===(a=L.categorical)||void 0===a?void 0:a.categories,g[S]=L}}else g=c;e.hasInitializedData()||e.initData(n);var P=(0,d.__assign)((0,d.__assign)({},h),{dataViews:g,multipleInfo:l?this.buildMultipleInfo(e.index):void 0});e.update(P),f&&(f.categoryAxis||f.valueAxis||f.secondaryValueAxis)&&s(e.getAxesDomains(!0,f))},r.prototype.applySynchronizedAxes=function(e,t){var a=this.updateOptions.isSmallMultiples;w.fF.assert(function(){return a},"Should not apply synchronizedAxes to non-small multiples"),e.applySynchronizedDomains(t)},r.prototype.applyResize=function(e){e.resize(this.updateOptions.updateOptions.viewport)},r.prototype.buildMultipleInfo=function(e){var t=this;w.fF.assert(function(){return t.updateOptions.isSmallMultiples},"isSmallMultiples"),w.fF.assert(function(){return!!t.updateOptions.reader},"reader");var a=this.updateOptions.reader;if(a){var i=a.getFrameNode(e),n=a.getFrameSourceColumns().map(function(s,o){return{metadata:s,value:i.levelValues[o].value}});return{identity:i.identity,sources:n,isCoreMultiple:0===e}}},r}(),fs=function(){function r(e,t,a,i,n,s,o){this.smallMultiples=e,this.index=t,this.featureSwitches=a,this.layers=i,this.type=n,this.interactivityService=s,this.getLayerInitOptions=o,this.state=0}return r.create=function(e,t,a,i,n,s,o){return new r(e,t,a,n,s,i,o)},r.prototype.getDataPoint=function(){if(!this.dataPoint){var e=this.multipleInfo,t=_.first(e.sources).metadata.queryName,a=e.sources.map(function(n){return(0,Q.Y)(n.metadata,n.value,e.identity)}),i=(new Q.dw).withColumnIdentity(e.identity,t,a).createSelectionId();this.dataPoint={selected:!1,identity:i},this.interactivityService&&this.interactivityService.applySelectionStateToData([this.dataPoint])}return this.dataPoint},r.prototype.getIndex=function(){return this.index},r.prototype.isSelected=function(){return this.getDataPoint().selected},r.prototype.getState=function(){return this.state},r.prototype.initRenderer=function(e){var t=this;w.fF.assert(function(){return!(2&t.getState())},"`initRenderer` was called when there was already a renderer"),this.renderer=e;var a=this.getLayerInitOptions(e);this.layers.forEach(function(i){return i.initRenderer(a)}),this.state|=2},r.prototype.getRenderer=function(){var e=this;return w.fF.assert(function(){return!!(2&e.getState())},"`getRenderer` was called before a renderer was set"),this.renderer},r.prototype.initData=function(e){var t=this;w.fF.assert(function(){return!(1&t.getState())},"`initData` multiple times"),this.layers.forEach(function(a){var i;return null===(i=a.initData)||void 0===i?void 0:i.call(a,e)}),this.style=e.style,this.state|=1},r.prototype.update=function(e){var t=this;w.fF.assert(function(){return!!(1&t.getState())},"update was called before `initData`"),this.dataViews=e.dataViews,this.multipleInfo=e.multipleInfo,this.dataPoint=void 0,this.adapterFactory=e.adapterFactory;var a=this.layers;return this.responsiveData=void 0,this.data=su.convert({layerStyle:this.style,chartType:this.type,dataViews:e.dataViews,layers:a,featureSwitches:this.featureSwitches,hasDataChanged:null!=e.operationKind,multipleInfo:e.multipleInfo}),this.data},r.prototype.isVisible=function(){return!!(2&this.state)},r.prototype.hasInitializedData=function(){return!!(1&this.state)},r.prototype.getMultipleInfo=function(){return this.multipleInfo},r.prototype.applySynchronizedDomains=function(e){var t=this.data&&this.data.axesData;if(e&&t){var a=function(h,f){h&&f.includeDomains.push((0,D.createScalarDomainOptions)(h,1))},i=t.categoryAxis,n=t.valueAxis,s=t.secondaryValueAxis,l=e.valueAxis,u=e.secondaryValueAxis;a(e.categoryAxis,i),i&&n&&(i.sharedAxis||!i.scaleToFit)&&(n.sharedAxis||!n.scaleToFit)&&(a(l,n),a(u,s))}},r.prototype.resize=function(e){if(this.adapterFactory&&this.data){var a=this.adapterFactory.createCartesianAdapter({cartesianData:this.data,dataView:this.dataViews[0],viewport:e,isCoreMultiple:!this.multipleInfo||this.multipleInfo.isCoreMultiple});this.responsiveData=a.getData()}},r.prototype.getCapabilities=function(){var e={domainAggregateRoles:[],supportedDomainAggregates:void 0},t={domainAggregateRoles:[],supportedDomainAggregates:void 0},a={domainAggregateRoles:[],supportedDomainAggregates:void 0};return this.layers.forEach(function(i){var n=i.getCartesianVisualCapabilities();if(n.axesCapabilities){var s=n.axesCapabilities,o=s.categoryAxis,l=s.valueAxis,u=s.secondaryValueAxis,c=function(f,g){!f||!f.domainAggregateRole||(g.domainAggregateRoles.push(f.domainAggregateRole),void 0===g.supportedDomainAggregates?g.supportedDomainAggregates=f.supportedDomainAggregates:g.supportedDomainAggregates&=f.supportedDomainAggregates)};w.fF.assertValue(o,"layerCategoryAxisCapabilities"),c(o,e),c(l,t),c(u,a)}else w.fF.log("All small-multiples layers must provide `axesCapabilities`")}),{axesCapabilities:{categoryAxis:_.isEmpty(e.domainAggregateRoles)?void 0:(0,d.__assign)((0,d.__assign)({},e),{domainAggregateRoles:_.uniq(e.domainAggregateRoles)}),valueAxis:_.isEmpty(t.domainAggregateRoles)?void 0:(0,d.__assign)((0,d.__assign)({},t),{domainAggregateRoles:_.uniq(t.domainAggregateRoles)}),secondaryValueAxis:_.isEmpty(a.domainAggregateRoles)?void 0:(0,d.__assign)((0,d.__assign)({},a),{domainAggregateRoles:_.uniq(a.domainAggregateRoles)})}}},r.prototype.getAxesDomains=function(e,t){for(var a={},i=0;i<this.layers.length;i++){var n=this.layers[i];if(n.getAxesDomains){var s=n.getAxesDomains(e,t);s.categoryAxis&&(a.categoryAxis=(0,D.mergeDomains)(a.categoryAxis||p.be,s.categoryAxis)),s.valueAxis&&(i>0&&(0,p.LQ)(this.type)?a.secondaryValueAxis=(0,D.mergeDomains)(a.secondaryValueAxis||p.be,s.valueAxis):a.valueAxis=(0,D.mergeDomains)(a.valueAxis||p.be,s.valueAxis)),s.secondaryValueAxis&&(a.secondaryValueAxis=(0,D.mergeDomains)(a.secondaryValueAxis||p.be,s.secondaryValueAxis))}else w.fF.assertFail("getAxesDomains does not exist")}return a},r.prototype.getData=function(){return this.responsiveData||this.data},r.prototype.clearSelection=function(){for(var e=0,t=this.layers.length;e<t;e++)this.layers[e].onClearSelection()},r.prototype.updateLayers=function(){this.layers.forEach(function(e){return e.render(!0)})},r.prototype.destroy=function(){var e=this;this.renderer&&(w.fF.assert(function(){return!!(2&e.getState())},"`destroy` was called before we had a renderer"),this.renderer.destroy())},r}(),vu=x(54365),fu=function(){function r(e,t,a,i){this.type=e,this.featureSwitches=t,this.layerFactory=a,this.getLayerInitRendererOptions=i,this.multiples=[]}return r.prototype.init=function(e,t){var a=this;this.rowLoadMoreDataHandler=new Qe.J(e.host),this.updateFactory=new du({layerInitDataOptions:e,updateGlobalAxesDomains:function(n){return a.updateGlobalAxesDomains(n)}}),this.interactivityService=t,this.multiples=[]},r.prototype.getObjects=function(){return this.reader?this.reader.getObjects():void 0},r.prototype.getCoreMultiple=function(){return this.coreMultiple||(this.coreMultiple=fs.create(this,0,this.featureSwitches,this.interactivityService,this.layerFactory(),this.type,this.getLayerInitRendererOptions)),this.coreMultiple},r.prototype.getShouldResetRowMultipleScrollPosition=function(){return this.shouldResetRowMultipleScrollPosition},r.prototype.get=function(e){var t=this;if(w.fF.assert(function(){return t.isSmallMultiples()||0===e},"Non-small multiples only supports 0 index"),!this.isSmallMultiples())return this.getCoreMultiple();if(w.fF.assertValue(this.multipleUpdate,"Can not get multiple value before having an update"),null==this.multipleUpdate)return this.getCoreMultiple();var a=this.multiples[e];if(!a)for(var i=function(l){w.fF.assert(function(){return l===t.multiples.length},"Multiples should only be added to the end"),a=n.multiples[l]=fs.create(n,l,n.featureSwitches,n.interactivityService,n.layerFactory(),n.type,n.getLayerInitRendererOptions);var u=n.multipleUpdate;u.apply(a,n.type),n.isSmallMultiples()&&u.applySynchronizedAxes(a,n.axesDomains),u.applyResize(a)},n=this,s=this.multiples.length;s<=e;s++)i(s);return a},r.prototype.clear=function(){this.getMultiples(!0).forEach(function(e){return e.destroy()}),this.multiples=[],this.coreMultiple=void 0,this.axesDomains=void 0,this.shouldResetRowMultipleScrollPosition=void 0,this.multipleUpdate=void 0},r.prototype.resize=function(e){this.getMultiples(!0).forEach(function(t){return t.resize(e)})},r.prototype.update=function(e){var t=e.dataViews;this.updateOptions=e;var a,i=this.isSmallMultiples(t);this.shouldResetRowMultipleScrollPosition=!e.preserveScrollPosition;var n=this.getCoreMultiple();i?(this.reader=vu.p.create(t[0],la.e0.formatString),this.updateFactory.create({dataViews:e.dataViews,isSmallMultiples:i,reader:this.reader,requestedPerMultipleAxisDomains:void 0,updateOptions:e}).apply(n,this.type),(!e.preserveScrollPosition||e.formatMode)&&(this.lastUpdatedFrameIndex=0,this.axesDomains=void 0,this.requestPerMultipleAxisDomains=this.updateSynchronizedDomainsFromAggregates()),a=this.reader.getFrameCount(),this.rowLoadMoreDataHandler.updateDataView(e.dataViews[0]),this.rowLoadMoreDataHandler.onLoadMoreDataCompleted()):(this.reader=void 0,this.lastUpdatedFrameIndex=0,this.axesDomains=void 0,a=1,this.rowLoadMoreDataHandler.updateDataView(void 0),this.rowLoadMoreDataHandler.onLoadMoreDataCompleted()),this.multipleUpdate=this.updateFactory.create({dataViews:e.dataViews,isSmallMultiples:i,reader:this.reader,requestedPerMultipleAxisDomains:this.requestPerMultipleAxisDomains,updateOptions:e}),this.updateMultiples(a)},r.prototype.updateMultiples=function(e){for(var t=this,a=this.multiples,i=this.multipleUpdate,s=this.isSmallMultiples(this.updateOptions.dataViews),o=this.getCoreMultiple(),l=this.requestPerMultipleAxisDomains,u={startIndex:this.lastUpdatedFrameIndex,endIndex:e},c=function(A){var S=s?a[A]:o;!S&&l&&(w.fF.assert(function(){return A===a.length},"Multiples should only be added to the end"),S=a[A]=fs.create(h,A,h.featureSwitches,h.interactivityService,h.layerFactory(),h.type,h.getLayerInitRendererOptions)),S&&i.apply(S,h.type)},h=this,f=u.startIndex;f<u.endIndex;f++)c(f);this.getMultiples(!0).forEach(function(g){g&&(s&&i.applySynchronizedAxes(g,t.axesDomains),i.applyResize(g))}),this.lastUpdatedFrameIndex=u.endIndex},r.prototype.updateSynchronizedDomainsFromAggregates=function(){var e,h,t=this.getCoreMultiple(),i=t.getCapabilities().axesCapabilities,n=i.categoryAxis,s=i.valueAxis,o=i.secondaryValueAxis,l_categoryAxis=!!(2&n.supportedDomainAggregates),l_valueAxis=!!(2&s.supportedDomainAggregates),l_secondaryValueAxis=!!(o&&2&o.supportedDomainAggregates),u={categoryAxis:!!(1&n.supportedDomainAggregates),valueAxis:!!(1&s.supportedDomainAggregates),secondaryValueAxis:!!(o&&1&o.supportedDomainAggregates)};if(l_categoryAxis||l_valueAxis||l_secondaryValueAxis){var f=this.getTopLevelDomains(i);f&&(h={categoryAxis:l_categoryAxis?f.categoryAxis:void 0,valueAxis:l_valueAxis?f.valueAxis:void 0,secondaryValueAxis:l_secondaryValueAxis?f.secondaryValueAxis:void 0})}this.axesDomains=h;var g=null===(e=t.getData())||void 0===e?void 0:e.axesData,A=g&&!g.valueAxis.sharedAxis,S={categoryAxis:u.categoryAxis&&(!h||_.isEmpty(h.categoryAxis)),valueAxis:u.valueAxis&&(!h||_.isEmpty(h.valueAxis)||A),secondaryValueAxis:u.secondaryValueAxis&&(!h||_.isEmpty(h.secondaryValueAxis))};return _.every(S,function(C){return!C})?void 0:S},r.prototype.isSmallMultiples=function(e){return!(!e&&!this.updateOptions)&&(0,p.sI)(e=e||this.updateOptions.dataViews)},r.prototype.clearSelection=function(e){this.getMultiples(!0).forEach(function(t){return t.clearSelection()}),this.executeActionForMultiplesInRange(function(t){return t.updateLayers()},e,!1)},r.prototype.checkIfNoLabelsCanBeRendered=function(){return _.every(this.getMultiples(),function(e){return e.isVisible()&&e.getRenderer().noLabelsCanBeRendered})},r.prototype.scrollTo=function(e,t){this.executeActionForMultiplesInRange(function(a){return a.getRenderer().axesRenderer.scrollTo(e)},t,!1)},r.prototype.shouldScrollTo=function(e,t){return!!this.getValueForFirstMultipleInRange(function(a){return a.getRenderer().axesRenderer.shouldScrollTo(e)},t,!1)},r.prototype.scrollBy=function(e,t){this.executeActionForMultiplesInRange(function(a){return a.getRenderer().axesRenderer.scrollBy(e)},t,!1)},r.prototype.scrollDelta=function(e,t){this.executeActionForMultiplesInRange(function(a){return a.getRenderer().axesRenderer.scrollDelta(e)},t,!1)},r.prototype.clearRenderingTimeout=function(){this.getMultiples().forEach(function(e){return e.isVisible()&&e.getRenderer().axesRenderer.clearRenderingTimeout()})},r.prototype.updateScrollbarExtent=function(e,t){this.executeActionForMultiplesInRange(function(a){return a.getRenderer().axesRenderer.setExtent(e)},t,!1)},r.prototype.executeActionForMultiplesInRange=function(e,t,a){var i=this.getMultiples(a,t);_.isEmpty(i)||i.forEach(function(n){return e(n)})},r.prototype.getValueForFirstMultipleInRange=function(e,t,a){var i=this.getMultiples(a,t);if(!_.isEmpty(i))return e(i[0])},r.prototype.getFrameCount=function(){return this.isSmallMultiples()?this.reader.getFrameCount():1},r.prototype.updateGlobalAxesDomains=function(e){var t=this.axesDomains=this.axesDomains||{};e.categoryAxis&&(t.categoryAxis=(0,D.mergeDomains)(t.categoryAxis||p.be,e.categoryAxis)),e.valueAxis&&(t.valueAxis=(0,D.mergeDomains)(t.valueAxis||p.be,e.valueAxis)),e.secondaryValueAxis&&(t.secondaryValueAxis=(0,D.mergeDomains)(t.secondaryValueAxis||p.be,e.secondaryValueAxis))},r.prototype.getTopLevelDomains=function(e){var t=this.reader;w.fF.assertValue(t,"this.reader");var o,l,u,a=e.categoryAxis,i=e.valueAxis,n=e.secondaryValueAxis,s=function(A){var S=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(var C in A)for(var P=function(fe){var G=fe.min,K=fe.max;if(!(_.isDate(G)||_.isNumber(G)&&isFinite(G))||!(_.isDate(K)||_.isNumber(K)&&isFinite(K)))return"continue";w.fF.assert(function(){return!_.isDate(G)||(0,an.M4)(G)},"If min is a date, it should implement DateWithEpochValue"),w.fF.assert(function(){return!_.isDate(K)||(0,an.M4)(K)},"If max is a date, it should implement DateWithEpochValue"),(0,an.M4)(G)&&(0,an.M4)(K)&&(G=G.epochTimeStamp,K=K.epochTimeStamp),S=(0,D.mergeDomains)(S,[+G,+K])},V=0,k=A[C];V<k.length;V++)P(k[V]);return S};if(2&a.supportedDomainAggregates){var c=t.getTopLevelAggregates(a.domainAggregateRoles);o=c?s(c):void 0}if(2&i.supportedDomainAggregates){var h=t.getTopLevelAggregates(i.domainAggregateRoles);l=h?s(h):void 0}if(n&&2&n.supportedDomainAggregates){var f=n&&t.getTopLevelAggregates(n.domainAggregateRoles);u=f?s(f):void 0}return o||l||u?{categoryAxis:o,valueAxis:l,secondaryValueAxis:u}:void 0},r.prototype.getMultiples=function(e,t){void 0===e&&(e=!1);var a=[],i=this.isSmallMultiples();if(!i||e){var n=this.getCoreMultiple();n&&a.push(n)}if(i){var s=this.multiples;t&&(s=s.slice(t.startIndex,Math.min(t.endIndex,s.length))),a.push.apply(a,s)}return a},r}(),Ri=x(30053),gu_size=[{breakpoint:240,maxSizePt:9},{breakpoint:320,maxSizePt:12},{breakpoint:460,maxSizePt:16},{breakpoint:540,maxSizePt:24}],Hr=function(){function r(){this.lastViewportSeen=void 0,this.lastResolvedFontSizePt=void 0}return r.prototype.adjustFontSize=function(e,t){var a=this.resolveMaxFontSizePtForViewport(e);return a>=t.size.pt?t:this.copyWithNewFontSize(t,a)},r.prototype.getFontSizeSeriesLabelWarning=function(e,t){var a=this.getFontSizeLabelWarning(e.dataLabelsSettings,t.dataLabelsSettings);if(a)return a;if(e.series&&t.series){w.fF.assert(function(){return e.series.length===t.series.length},"Series are expected to be equal");for(var i=e.series,n=t.series,s=0;s<i.length;s++)if(a=this.getFontSizeLabelWarning(i[s].labelSettings,n[s].labelSettings))return a}},r.prototype.getFontSizeLabelWarning=function(e,t){if(e&&t){if(!_.isEqual(e.fontProperties.size,t.fontProperties.size))return{selector:null,warnings:[new ze.er]};w.fF.assert(function(){return e.labelOverflow===t.labelOverflow},"Overflow switch should remain as is if no changes in label font size")}else w.fF.assert(function(){return e===t},"It's expected that both settings would be undefined / null")},r.prototype.resolveMaxFontSizePtForViewport=function(e){if(this.lastViewportSeen===e)return this.lastResolvedFontSizePt;for(var t=Ne.PR,a=0,i=gu_size;a<i.length;a++){var n=i[a];if(e.height<n.breakpoint||e.width<n.breakpoint){t=n.maxSizePt;break}}return this.lastViewportSeen=e,this.lastResolvedFontSizePt=t,t},r.prototype.copyWithNewFontSize=function(e,t){var a=ve.B.createFromPt(t);return(0,j.ED)(e,{size:a})},r}(),pu=function(){function r(e){this.responsiveFontHelper=new Hr,this.originalData=e.data,this.dataView=e.dataView,this.viewport=e.viewport}return r.prototype.getData=function(){var t,e=this.originalData;return t=Ri.a.shouldApplyResponsiveChanges(this.dataView,B.p)?this.applyResponsiveChanges(this.viewport,e):e,this.currentData=t,t},r.prototype.getCartesianChartLayerType=function(){return 4},r.prototype.addWarnings=function(e){var t=this.originalData,a=this.currentData;if(t&&a){var i=this.responsiveFontHelper.getFontSizeSeriesLabelWarning(t,a),n=this.responsiveFontHelper.getFontSizeLabelWarning(t.totalLabelsSettings,a.totalLabelsSettings);i&&e.addForVisualObject("labels",i),n&&e.addForVisualObject("totals",n)}},r.prototype.applyResponsiveChanges=function(e,t){var a=(0,me.ED)(t);return this.applyDataLabelFontSizesChanges(e,a),this.applySeriesDataLabelFontSizeChanges(e,a),this.applyTotalLabelFontSizesChanges(e,a),a},r.prototype.applyDataLabelFontSizesChanges=function(e,t){t.dataLabelsSettings=(0,me.ED)(t.dataLabelsSettings),this.updateLabelSettings(e,t.dataLabelsSettings)},r.prototype.applySeriesDataLabelFontSizeChanges=function(e,t){for(var a=t.series=(0,me.ED)(t.series),i=0;i<a.length;i++)if(a[i].labelSettings){var n=a[i]=(0,me.ED)(a[i]);n.labelSettings=(0,me.ED)(n.labelSettings),this.updateLabelSettings(e,n.labelSettings)}},r.prototype.applyTotalLabelFontSizesChanges=function(e,t){t.totalLabelsSettings&&(t.totalLabelsSettings=(0,me.ED)(t.totalLabelsSettings),this.updateLabelSettings(e,t.totalLabelsSettings))},r.prototype.updateLabelSettings=function(e,t){var a=t.fontProperties;t.fontProperties=this.responsiveFontHelper.adjustFontSize(e,t.fontProperties),a!==t.fontProperties&&(t.labelOverflow=!0)},r}(),yu=function(){function r(e){this.responsiveFontHelper=new Hr,this.originalData=e.data,this.viewport=e.viewport,this.dataView=e.dataView}return r.prototype.getData=function(){var t,e=this.originalData;return t=Ri.a.shouldApplyResponsiveChanges(this.dataView,B.p)?this.applyResponsiveChanges(this.viewport,e):e,this.currentData=t,t},r.prototype.getCartesianChartLayerType=function(){return 0},r.prototype.addWarnings=function(e){var t=this.originalData,a=this.currentData;if(t&&a){var i=this.responsiveFontHelper.getFontSizeSeriesLabelWarning(t,a),n=this.responsiveFontHelper.getFontSizeLabelWarning(t.totalLabelsSettings,a.totalLabelsSettings);i&&e.addForVisualObject("labels",i),n&&e.addForVisualObject("totals",n)}},r.prototype.applyResponsiveChanges=function(e,t){var a=(0,me.ED)(t);return this.applyDataLabelFontSizesChanges(e,a),this.applySeriesDataLabelFontSizeChanges(e,a),this.applyTotalLabelFontSizesChanges(e,a),a},r.prototype.applyDataLabelFontSizesChanges=function(e,t){t.dataLabelsSettings=(0,me.ED)(t.dataLabelsSettings),this.updateLabelSettings(e,t.dataLabelsSettings)},r.prototype.applySeriesDataLabelFontSizeChanges=function(e,t){for(var a=t.series=(0,me.ED)(t.series),i=0;i<a.length;i++)if(a[i].labelSettings){var n=a[i]=(0,me.ED)(a[i]);n.labelSettings=(0,me.ED)(n.labelSettings),this.updateLabelSettings(e,n.labelSettings)}},r.prototype.applyTotalLabelFontSizesChanges=function(e,t){t.totalLabelsSettings&&(t.totalLabelsSettings=(0,me.ED)(t.totalLabelsSettings),this.updateLabelSettings(e,t.totalLabelsSettings))},r.prototype.updateLabelSettings=function(e,t){t.fontProperties=this.responsiveFontHelper.adjustFontSize(e,t.fontProperties)},r}(),mu=function(){function r(e){this.responsiveFontHelper=new Hr,this.originalData=e.data,this.viewport=e.viewport,this.dataView=e.dataView}return r.prototype.getData=function(){var t,e=this.originalData;return t=Ri.a.shouldApplyResponsiveChanges(this.dataView,B.p)?this.applyResponsiveChanges(this.viewport,e):e,this.currentData=t,t},r.prototype.getCartesianChartLayerType=function(){return 2},r.prototype.addWarnings=function(e){var t=this.originalData,a=this.currentData;if(t&&a){var i=this.responsiveFontHelper.getFontSizeLabelWarning(t.dataLabelsSettings,a.dataLabelsSettings);i&&e.addForVisualObject("categoryLabels",i)}},r.prototype.applyResponsiveChanges=function(e,t){var a=(0,me.ED)(t);return this.applyDataLabelFontSizesChanges(e,a),a},r.prototype.applyDataLabelFontSizesChanges=function(e,t){t.dataLabelsSettings=(0,me.ED)(t.dataLabelsSettings),t.dataLabelsSettings.fontProperties=this.responsiveFontHelper.adjustFontSize(e,t.dataLabelsSettings.fontProperties)},r}(),Su=function(){function r(e){this.responsiveFontHelper=new Hr,this.originalData=e.data,this.viewport=e.viewport,this.dataView=e.dataView}return r.prototype.getData=function(){var t,e=this.originalData;return t=Ri.a.shouldApplyResponsiveChanges(this.dataView,B.p)?this.applyResponsiveChanges(this.viewport,e):e,this.currentData=t,t},r.prototype.getCartesianChartLayerType=function(){return 3},r.prototype.addWarnings=function(e){var t=this.originalData,a=this.currentData;if(t&&a){var i=this.responsiveFontHelper.getFontSizeLabelWarning(t.dataLabelsSettings,a.dataLabelsSettings);i&&e.addForVisualObject("labels",i)}},r.prototype.applyResponsiveChanges=function(e,t){var a=(0,me.ED)(t);return this.applyDataLabelFontSizesChanges(e,a),a},r.prototype.applyDataLabelFontSizesChanges=function(e,t){t.dataLabelsSettings=(0,me.ED)(t.dataLabelsSettings),t.dataLabelsSettings.fontProperties=this.responsiveFontHelper.adjustFontSize(e,t.dataLabelsSettings.fontProperties)},r}(),xu=function(){function r(e,t){switch(this.layerType=e,e){case 4:this.adapter=new pu(t);break;case 0:this.adapter=new yu(t);break;case 2:this.adapter=new mu(t);break;case 3:this.adapter=new Su(t);break;default:w.fF.assertFail("Unsupported chart type for view model adapter")}}return r.prototype.getData=function(){return this.adapter.getData()},r.prototype.getCartesianChartLayerType=function(){return this.layerType},r.prototype.addWarnings=function(e){return this.adapter.addWarnings(e)},r}(),Xs=x(70700),tr_legendWidth=76,tr_legendHeight=58,tr_axesTitleWidth=128,tr_axesTitleHeight=58,tr_axesHeight=58,tr_axesMedWidth=128,tr_axesWidth=76,tr_maxWidthForMediumFont=180,tr_maxWidthForSmallFont=128;function Zs(r,e){var t=r.warningObjectCollection,a={},i=r.legendData,n=e.legendData;if(r.showIcon)a.legend=new ze.ni,a.categoryAxis=new ze.Mk,a.valueAxis=new ze.Mk;else{i.show!==n.show?a.legend=new ze.ni:i.position!==n.position?a.legend=new ze.TS:_.isEqual(i.fontProperties.size,n.fontProperties.size)||(a.legend=new ze.p7("fontSize"));var s=r.axesData,o=e.axesData,l=s.categoryAxis,u=o.categoryAxis,c=!_.isEqual(l.labelFontProperties.size,u.labelFontProperties.size),h=!_.isEqual(l.titleFontProperties.size,u.titleFontProperties.size);l.show!==u.show?a.categoryAxis=new ze.Mk:l.showAxisTitle!==u.showAxisTitle?a.categoryAxis=new ze.fk:(c||h)&&(a.categoryAxis=new ze.Dr(c?"fontSize":"titleFontSize"));var f=s.valueAxis,g=o.valueAxis,A=!_.isEqual(f.labelFontProperties.size,g.labelFontProperties.size),S=!_.isEqual(f.titleFontProperties.size,g.titleFontProperties.size);f.show!==g.show?a.valueAxis=new ze.Mk:f.showAxisTitle!==g.showAxisTitle?a.valueAxis=new ze.fk:(A||S)&&(a.valueAxis=new ze.Dr(A?"fontSize":"titleFontSize"));var C=r.zoomData,L=e.zoomData;(C.showOnCategoryAxis!==L.showOnCategoryAxis||C.showOnValueAxis!==L.showOnValueAxis||C.showOnValueSecAxis!==L.showOnValueSecAxis)&&(a.zoom=new ze.JG)}for(var P in a)t.addForVisualObject(P,{selector:null,warnings:[a[P]]})}var Du=function(){function r(e){this.viewport=e.viewport,this.cartesianData=e.cartesianData,this.dataView=e.dataView,this.responsiveFontHelper=new Hr}return r.prototype.getData=function(){var e=Ri.a.getResponsiveVisualProperties(this.dataView,B.p),t=e.responsive,a=e.responsiveLegacy,i=this.cartesianData;return(t||a)&&(i=this.createResponsiveData(t,a)),i},r.prototype.getResponsiveSlice=function(e,t){var a=B.p.general,i=Ri.a.getResponsiveVisualProperties(e,B.p);return{item:new ge.vi({uidBuilder:new ge.IN(new ge.SS(new ge.lg("visualPlaceholderCard"),"visualPlaceholderGroup"),"responsive"),control:new ge.bd({descriptor:a.responsive,value:i.responsive}).build(),localize:t}).build(),revertToDefaultDescriptors:[a.responsive]}},r.prototype.createResponsiveData=function(e,t){var a=Ri.a.cloneData(this.cartesianData);return e?(this.applyIconResponsiveChanges(a),this.applyLegendResponsiveChanges(this.viewport,a.legendData.position,a),this.applyAxesResponsiveChanges(this.viewport,a),this.applyZoomSliderResponsiveChanges(this.viewport,a),this.applyFontSizesChanges(this.viewport,a),a.scrollbarOptions=r.ScrollbarOptions):t&&function(r,e){(function(r,e){var t=e.axesData;if(r.height<=tr_axesTitleHeight&&(t.x.showAxisTitle=!1,t.y.showAxisTitle=!1,t.y2.showAxisTitle=!1),r.width<=tr_axesTitleWidth&&(t.y.showAxisTitle=!1,t.y2.showAxisTitle=!1),r.height<=tr_axesHeight&&(t.x.show=!1),r.width<=tr_axesWidth&&(t.y.show=!1,t.y2.show=!1),r.width<=tr_axesMedWidth&&(0,ta.cB)(e.legendData.position)&&(t.y.show=!1,t.y2.show=!1),r.width<=tr_maxWidthForMediumFont){var a={x:{tickLabels:p.CI,title:p.CI},y:{tickLabels:p.lc,title:p.lc},y2:{tickLabels:p.lc,title:p.lc}};r.width<=tr_maxWidthForSmallFont&&(a.y.tickLabels=p.yo,a.y.title=p.yo,a.y2.tickLabels=p.yo,a.y2.title=p.yo),t.x.titleFontProperties=(0,j.ED)(t.x.titleFontProperties,{size:ve.B.createFromPx(a.x.title)}),t.y.titleFontProperties=(0,j.ED)(t.y.titleFontProperties,{size:ve.B.createFromPx(a.y.title)}),t.y2.titleFontProperties=(0,j.ED)(t.y2.titleFontProperties,{size:ve.B.createFromPx(a.y2.title)}),t.x.labelFontProperties=(0,j.ED)(t.x.labelFontProperties,{size:ve.B.createFromPx(a.x.tickLabels)}),t.y.labelFontProperties=(0,j.ED)(t.y.labelFontProperties,{size:ve.B.createFromPx(a.y.tickLabels)}),t.y2.labelFontProperties=(0,j.ED)(t.y2.labelFontProperties,{size:ve.B.createFromPx(a.y2.tickLabels)})}})(r,e),function(r,e){var t=e.legendData.position,a=r.width<=tr_legendWidth&&(0,ta.cB)(t),i=r.height<=tr_legendHeight&&(0,ta.s0)(t);if((a||i)&&(e.legendData.show=!1),r.width<=tr_maxWidthForMediumFont){var s,n=e.legendData.fontProperties.size.pt;s=r.width<=tr_maxWidthForSmallFont?Math.min(n,Mt.hD):Math.min(n,Mt.vs),e.legendData.fontProperties=(0,j.ED)(e.legendData.fontProperties,{size:ve.B.createFromPt(s)})}}(r,e)}(this.viewport,a),Zs(a,this.cartesianData),a},r.prototype.applyIconResponsiveChanges=function(e){e.showIcon=this.viewport.height<=50||this.viewport.width<=50},r.prototype.applyLegendResponsiveChanges=function(e,t,a){(e.width<210||e.height<100)&&(0,ta.cB)(t)&&(a.legendData.position=Xs.tV.Top),(e.height<70||e.width<80)&&(a.legendData.show=!1),a.legendData.useLargeArrowHitArea=!0},r.prototype.applyAxesResponsiveChanges=function(e,t){e.height<100&&(t.axesData.x.show=!1),e.width<210&&(t.axesData.y.showAxisTitle=!1,t.axesData.y2.showAxisTitle=!1),e.width<100&&(t.axesData.y.show=!1,t.axesData.y2.show=!1),e.height<145&&(t.axesData.x.showAxisTitle=!1)},r.prototype.applyZoomSliderResponsiveChanges=function(e,t){(e.height<150||e.width<280)&&(t.zoomData.showOnCategoryAxis=!1,t.zoomData.showOnValueAxis=!1,t.zoomData.showOnValueSecAxis=!1)},r.prototype.applyFontSizesChanges=function(e,t){t.legendData&&t.legendData.fontProperties&&(t.legendData.fontProperties=this.responsiveFontHelper.adjustFontSize(e,t.legendData.fontProperties));var a=t.axesData;a.x.labelFontProperties=this.responsiveFontHelper.adjustFontSize(e,a.x.labelFontProperties),a.x.titleFontProperties=this.responsiveFontHelper.adjustFontSize(e,a.x.titleFontProperties),a.y.labelFontProperties=this.responsiveFontHelper.adjustFontSize(e,a.y.labelFontProperties),a.y.titleFontProperties=this.responsiveFontHelper.adjustFontSize(e,a.y.titleFontProperties),a.y2.labelFontProperties=this.responsiveFontHelper.adjustFontSize(e,a.y2.labelFontProperties),a.y2.titleFontProperties=this.responsiveFontHelper.adjustFontSize(e,a.y2.titleFontProperties)},r.ScrollbarOptions={scrollbarWidth:8,scrollbarRadius:4,scrollbarClass:"responsive"},r}(),_u=function(){function r(e,t){this.smallMultiplesOptions=t,this.cartesianData=e.cartesianData,this.dataView=e.dataView,this.isCoreMultiple=e.isCoreMultiple,this.responsiveFontHelper=new Hr}return r.prototype.getData=function(){var e=this.cartesianData;return this.smallMultiplesOptions.isSmallMultiples?(Ri.a.getResponsiveVisualProperties(this.dataView,B.p).responsive&&(e=this.applyResponsiveChanges(this.cartesianData,this.smallMultiplesOptions)),e):(w.fF.assertFail("Adapter does not support non-small multiples"),e)},r.prototype.getResponsiveSlice=function(e,t){},r.prototype.applyResponsiveChanges=function(e,t){var a=Ri.a.cloneData(e),i=function(r){var e=r.columns,t=r.rows;return{legendPositionHeight:120+30*t,legendPositionWidth:210+40*e,legendShowHeight:90+30*t,legendShowWidth:90+40*e,removeXAxisTitleHeight:165+30*t,removeXAxisHeight:120+30*t,removeYAxisTitleWidth:210+40*e,removeYAxisWidth:120+40*e}}(t),n=t.viewport;return this.applyAxesResponsiveChanges(i,n,a),this.applyLegendResponsiveChanges(i,n,a),this.applyFontSizeResponsiveChanges(n,a),this.isCoreMultiple&&Zs(a,e),a},r.prototype.applyAxesResponsiveChanges=function(e,t,a){var i=t.height,n=t.width;i<e.removeXAxisTitleHeight&&(a.axesData.x.showAxisTitle=!1),i<e.removeXAxisHeight&&(a.axesData.x.show=!1,a.axesData.x.showAxisTitle=!1),n<e.removeYAxisTitleWidth&&(a.axesData.y.showAxisTitle=!1,a.axesData.y2.showAxisTitle=!1),n<e.removeYAxisWidth&&(a.axesData.y.show=!1,a.axesData.y2.show=!1,a.axesData.y.showAxisTitle=!1,a.axesData.y2.showAxisTitle=!1)},r.prototype.applyLegendResponsiveChanges=function(e,t,a){if(a.legendData.show){var n=t.height,s=t.width;(n<e.legendPositionHeight||s<e.legendPositionWidth)&&(0,ta.cB)(a.legendData.position)&&(a.legendData.position=Xs.tV.Top),(n<e.legendShowHeight||s<e.legendShowWidth)&&(a.legendData.show=!1),a.legendData.useLargeArrowHitArea=!0}},r.prototype.applyFontSizeResponsiveChanges=function(e,t){t.legendData&&t.legendData.fontProperties&&(t.legendData.fontProperties=this.responsiveFontHelper.adjustFontSize(e,t.legendData.fontProperties));var a=t.axesData;a.x.labelFontProperties=this.responsiveFontHelper.adjustFontSize(e,a.x.labelFontProperties),a.x.titleFontProperties=this.responsiveFontHelper.adjustFontSize(e,a.x.titleFontProperties),a.y.labelFontProperties=this.responsiveFontHelper.adjustFontSize(e,a.y.labelFontProperties),a.y.titleFontProperties=this.responsiveFontHelper.adjustFontSize(e,a.y.titleFontProperties),a.y2.labelFontProperties=this.responsiveFontHelper.adjustFontSize(e,a.y2.labelFontProperties),a.y2.titleFontProperties=this.responsiveFontHelper.adjustFontSize(e,a.y2.titleFontProperties)},r}(),Lu=function(){function r(e,t){this.layerType=e,this.layerData=t.data}return r.prototype.getData=function(){return this.layerData},r.prototype.getCartesianChartLayerType=function(){return this.layerType},r.prototype.addWarnings=function(e){},r}(),Fr=120;function on(r,e,t){return w.fF.assert(function(){return r[0]>=r[1]},"breakpoints must be [max, min]"),w.fF.assert(function(){return e[0]>=e[1]},"outputRange must be [max, min]"),d3.scaleLinear().range(e).domain(r).clamp(!0)(t)}function qs(r){var e=r.rowCount,t=r.columnCount;return{showIconHeight:30*t,showIconWidth:40*e,showSubheaderHeight:80+50*e,gridlineRowUpperBreakpoint:Fr+52*e,gridlineRowLowerBreakpoint:Fr+32*e,gridlineColumnUpperBreakpoint:Fr+62*t,gridlineColumnLowerBreakpoint:Fr+42*t,removeGridLineHeight:32*e,removeGridLineWidth:42*t,paddingRowUpperBreakpoint:Fr+130*e,paddingRowLowerBreakpoint:Fr+30*e,paddingColumnUpperBreakpoint:Fr+140*t,paddingColumnLowerBreakpoint:Fr+40*t}}var Ru=function(){function r(e){this.multiplesLayout=e.multiplesLayout,this.multiplesSubheader=e.multiplesSubheader,this.dataView=e.dataView,this.viewport=e.viewport,this.responsiveFontHelper=new Hr}return r.prototype.getMultiplesLayout=function(e){var t=this.multiplesLayout;return Ri.a.getResponsiveVisualProperties(this.dataView,B.p).responsive&&(t=this.applyResponsiveChanges(this.viewport,this.multiplesLayout,e)),t},r.prototype.getMultiplesSubheader=function(e){var t=this.multiplesSubheader;return Ri.a.getResponsiveVisualProperties(this.dataView,B.p).responsive&&(t=this.applySubheaderResponsiveChanges(this.viewport,t,e)),t},r.prototype.getResponsiveSlice=function(e,t){var a=B.p.general,i=Ri.a.getResponsiveVisualProperties(e,B.p);return{item:new ge.vi({uidBuilder:new ge.IN(new ge.SS(new ge.lg("visualPlaceholderCard"),"visualPlaceholderGroup"),"responsive"),control:new ge.bd({descriptor:a.responsive,value:i.responsive}).build(),localize:t}).build(),revertToDefaultDescriptors:[a.responsive]}},r.prototype.applyResponsiveChanges=function(e,t,a){var i=Ri.a.cloneData(t),n=qs(i);return this.applyIconResponsiveChanges(n,e,i),this.applyGridlinesResponsiveChanges(n,e,i),this.applyPaddingResponsiveChanges(n,e,i),this.updateResponsiveWarnings(i,t,a),i},r.prototype.applyIconResponsiveChanges=function(e,t,a){(t.height<e.showIconHeight||t.width<e.showIconWidth)&&(a.showIcon=!0)},r.prototype.applyGridlinesResponsiveChanges=function(e,t,a){var i=a.gridline;if(null!=i?.strokeWidth){var n=i.strokeWidth,s=i.strokeWidth;if(t.height<e.removeGridLineHeight||t.width<e.removeGridLineWidth)return void(i.strokeWidth=0);if(t.height<=e.gridlineRowLowerBreakpoint||t.width<=e.gridlineColumnLowerBreakpoint)return void(i.strokeWidth=1);t.height<e.gridlineRowUpperBreakpoint&&(s=Math.ceil(on([e.gridlineRowUpperBreakpoint,e.gridlineRowLowerBreakpoint],[i.strokeWidth,1],t.height))),t.width<e.gridlineColumnUpperBreakpoint&&(n=Math.ceil(on([e.gridlineColumnUpperBreakpoint,e.gridlineColumnLowerBreakpoint],[i.strokeWidth,1],t.width))),i.strokeWidth=Math.min(n,s)}},r.prototype.applyPaddingResponsiveChanges=function(e,t,a){if(a.advancedPaddingOptions||0!==a.gridPadding){if(t.height<e.paddingRowUpperBreakpoint){var i=[e.paddingRowUpperBreakpoint,e.paddingRowLowerBreakpoint];a.rowPaddingOuter=a.rowPaddingOuter&&Math.ceil(on(i,[a.rowPaddingOuter,1],t.height)),a.rowPaddingInner=a.rowPaddingInner&&Math.ceil(on(i,[a.rowPaddingInner,1],t.height))}t.width<e.paddingColumnUpperBreakpoint&&(i=[e.paddingColumnUpperBreakpoint,e.paddingColumnLowerBreakpoint],a.columnPaddingOuter=a.columnPaddingOuter&&Math.ceil(on(i,[a.columnPaddingOuter,1],t.width)),a.columnPaddingInner=a.columnPaddingInner&&Math.ceil(on(i,[a.columnPaddingInner,1],t.width)))}},r.prototype.applySubheaderResponsiveChanges=function(e,t,a){var i=Ri.a.cloneData(t),n=qs(this.multiplesLayout);return e.height<n.showSubheaderHeight&&(i.show=!1),i.show&&i.fontProperties&&(i.fontProperties=this.responsiveFontHelper.adjustFontSize(e,i.fontProperties),i.height=i.fontProperties.size.px+i.margins.top+i.margins.bottom),this.updateSubheaderResponsiveWarnings(i,t,a),i},r.prototype.updateResponsiveWarnings=function(e,t,a){var i,n,s=a,o={};for(var l in e.showIcon?o.subheader=new ze.lC:((e.rowPaddingInner!==t.rowPaddingInner||e.rowPaddingOuter!==t.rowPaddingOuter||e.columnPaddingInner!==t.columnPaddingInner||e.columnPaddingOuter!==t.columnPaddingOuter)&&(o.smallMultiplesLayout=new ze.e),(null===(i=e.gridline)||void 0===i?void 0:i.strokeWidth)!==(null===(n=t.gridline)||void 0===n?void 0:n.strokeWidth)&&(o.smallMultiplesLayout=new ze.IX)),o)s.addForVisualObject(l,{selector:null,warnings:[o[l]]})},r.prototype.updateSubheaderResponsiveWarnings=function(e,t,a){var i=a,n={};for(var s in e.show!==t.show&&(n.subheader=new ze.lC),_.isEqual(e.fontProperties.size,t.fontProperties.size)||(n.subheader=new ze.W0),n)i.addForVisualObject(s,{selector:null,warnings:[n[s]]})},r}(),Iu=function(){function r(){}return r.prototype.createCartesianAdapter=function(e){return this.isSmallMultiples()?new _u(e,this.smallMultiplesOptions):new Du(e)},r.prototype.createLayerAdapter=function(e,t){return this.isSmallMultiples()?new Lu(e,t):new xu(e,t)},r.prototype.setSmallMultiplesOptions=function(e){this.smallMultiplesOptions=e},r.prototype.createSmallMultiplesAdapter=function(e){if(this.isSmallMultiples())return new Ru(e);w.fF.assertFail("Can not get SmallMultiplesAdapter for non-small multiples")},r.prototype.isSmallMultiples=function(){return this.smallMultiplesOptions&&this.smallMultiplesOptions.isSmallMultiples},r}(),Nu=function(){function r(e){var a,t=this;this.options=e,w.fF.assertValue(e,"CartesianConstructorOptions"),this.axes=new Qt(null!==(a=e.isScrollable)&&void 0!==a&&a,H.ScrollbarWidth,this.trimOrdinalDataOnOverflow),this.viewModelAdapterFactory=new Iu,this.layoutBuilder=new hn(e,this.axes,function(){return t.isPlayAxis()},function(){return t.smallMultiplesViewModelAdapter}),this.multiples=new fu(this.chartType,this.featureSwitches,function(){return function(r){switch(r.chartType){case 1:case 0:case 2:case 3:return[Ks(r)];case 15:return[new Ml((0,d.__assign)((0,d.__assign)({},r),{isScrollable:!1}))];case 11:return[new Fl((0,d.__assign)((0,d.__assign)({},r),{viewModelAdapterFactory:Gn(r,2)}))];case 12:return[new tu((0,d.__assign)((0,d.__assign)({},r),{viewModelAdapterFactory:Gn(r,3)}))];case 5:case 4:case 9:case 7:case 6:case 8:case 10:return[Ys(r)];case 13:case 14:return[Ys(r),Ks(r)];default:return w.fF.assertFail("Unknown CartesianChartType enum value"),[]}}((0,d.__assign)((0,d.__assign)({},t.options),{viewModelAdapterFactory:t.viewModelAdapterFactory,interactivityService:t.interactivityService}))},function(i){return t.getLayerRendererInitOptions(i)})}return Object.defineProperty(r.prototype,"featureSwitches",{get:function(){return this.options.featureSwitches||{}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"chartType",{get:function(){return this.options.chartType},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"trimOrdinalDataOnOverflow",{get:function(){var t;return null===(t=this.options.trimOrdinalDataOnOverflow)||void 0===t||t},enumerable:!1,configurable:!0}),r.prototype.init=function(e){var a,t=this;w.fF.assertValue(e,"CartesianChart.init(options)"),this.visualInitOptions=e;var i=e.element;this.currentViewport=e.viewport,this.hostServices=e.host,this.eventManager=new ot.B(d3.select(i.get(0))),this.categoryLoadMoreDataHandler=new to(null,this.hostServices),this.options.behaviorFactory&&(this.interactivityService=(0,U.ub)(this.hostServices,this.featureSwitches)),this.tooltipService=(0,dt.r)(e.host);var n=this.visualInitOptions.style,s=(0,me.ED)(n);s.colorPalette=(0,me.ED)(n.colorPalette),s.colorPalette.dataColors=new eo(n.colorPalette.dataColors),this.layerStyle=s;var o=new na({style:n,chartType:this.chartType});this.axisZoom=new De(i,this.hostServices,this.axes.isScrollable&&!!e.interactivity,this.featureSwitches),this.axes.init({axesData:o,axisZoom:this.axisZoom,interactivityService:this.interactivityService}),this.legend=(0,Mt.OG)(i,e.interactivity&&e.interactivity.mobileTileInteractive,12!==this.chartType?this.interactivityService:void 0,this.axes.isScrollable,void 0,n,this.hostServices);var l=(0,me.ED)(e);if(l.style=s,l.services={tooltips:this.tooltipService},this.multiples.init(l,this.interactivityService),this.layoutBuilder.init(e,this.tooltipService,this.legend,o,this.interactivityService,this.layerStyle,this.multiples.rowLoadMoreDataHandler,this.eventManager),this.layout=this.layoutBuilder.create(this.visualInitOptions.element),this.isMobileChart=e.interactivity&&e.interactivity.mobileTileInteractive,this.featureSwitches.onObject){var c=(null===(a=this.hostServices)||void 0===a?void 0:a.getSubSelectionService())??Vt.D.createWithDefaultHost();this.subSelectionHelper=Be.O5.createHtmlSubselectionHelper({hostElement:i.get(0),hostServices:this.hostServices,renderer:c,targetSource:"format",scale:function(){return t.currentViewport.scale},selectorCallback:function(f){return t.getSelectorsByColumnSubSelection(f)},customOutlineCallback:function(f){return t.getSubSelectionCustomOutlines(f)},customElementCallback:function(f){return t.getSubSelectionCustomElements(f)},subSelectionMetadataCallback:function(f){return t.getSubSelectionMetadata(f)}}),this.interactivityService.setSubSelectionHelper(this.subSelectionHelper)}},r.prototype.isPlayAxis=function(){return!(!this.dataViews||!this.dataViews[0])&&11===this.chartType&&(this.options.animator||this.isMobileChart)&&(0,M.c5)(this.dataViews[0],"Play")},r.prototype.is100Stacked=function(){return 8===this.chartType||9===this.chartType||3===this.chartType},r.prototype.updateInternal=function(e,t){var a;return(0,d.__awaiter)(this,void 0,void 0,function(){var i,n,s,o,l,u,c,h,f,g,C,L,P,V,z,J,fe,G;return(0,d.__generator)(this,function(K){switch(K.label){case 0:return i=this.dataViews=e.dataViews,n=this.featureSwitches.onObject&&e.formatMode,s=e.operationKind===ue.su.Append||null!=e.resizeMode||n,this.currentViewport=e.viewport,i?(l=this.multiples.isSmallMultiples(i),(u=l&&i[0])?(f=(0,p.Zw)(c=u.metadata.objects,h=this.layerStyle),g=(0,p.yA)(c,h),this.viewModelAdapterFactory.setSmallMultiplesOptions({viewport:this.currentViewport,isSmallMultiples:l,columns:f.columnCount,rows:f.rowCount}),this.smallMultiplesViewModelAdapter=this.viewModelAdapterFactory.createSmallMultiplesAdapter({dataView:u,multiplesLayout:f,multiplesSubheader:g,viewport:this.currentViewport})):(this.viewModelAdapterFactory.setSmallMultiplesOptions({viewport:this.currentViewport,isSmallMultiples:l,columns:void 0,rows:void 0}),this.smallMultiplesViewModelAdapter=void 0),l!==this.multiples.isSmallMultiples()&&this.multiples.clear(),null!=t?(C=this.multiples.getCoreMultiple(),L=C.layers,_.isEmpty(i)||(P=lt(i),this.cartesianVisualCapabilities=r.getCartesianVisualCapabilities(L),l&&this.cartesianVisualCapabilities&&(this.cartesianVisualCapabilities.supportsHierarchicalCategoryAxis=!1),2===(o=this.categoryAxisRenderMode=r.getRenderMode(P,this.cartesianVisualCapabilities))&&(i=i.map(function(ie){return(0,Ue.Zy)(ie,B.p.general.formatString,B.x.category)}))),this.multiples.update({dataViews:i,operationKind:t,viewport:this.currentViewport,adapterFactory:this.viewModelAdapterFactory,preserveScrollPosition:s,formatMode:n}),this.cartesianData=this.originalCartesianData=C.getData()):(this.multiples.resize(this.currentViewport),this.cartesianData=this.multiples.getCoreMultiple().getData()),null==t&&this.cartesianData&&this.cartesianData.axesData?this.axes.updateResize(this.cartesianData.axesData,this.cartesianData.scrollbarOptions.scrollbarWidth):null!=t&&(_.isEmpty(i)||((V=i[0]).metadata&&(this.background={image:(0,b.NA)(V.metadata.objects,B.p.plotArea.image),transparency:(0,b.NA)(V.metadata.objects,B.p.plotArea.transparency,(0,Dt.x6)())}),this.categoryLoadMoreDataHandler.update(o,l),this.axes.update(V.categorical?V.categorical.categories:null,this.cartesianData.axesData,o,this.cartesianData.scrollbarOptions.scrollbarWidth)),this.categoryLoadMoreDataHandler.onLoadMoreDataCompleted()),this.cartesianData&&this.cartesianData.zoomData&&this.axisZoom.update({dataViews:i,zoomData:this.cartesianData.zoomData,hasSmallMultiples:l,hasScalarCategoryAxis:this.categoryAxisIsScalar().isScalar,hasYAxisCategorical:this.axes.isYAxisCategorical}),[4,this.render(!this.hasSetData||e.suppressAnimations||l,s,e.resizeMode)]):[2];case 1:return K.sent(),this.isDestroyed||(this.hasSetData=this.hasSetData||!_.isEmpty(i),this.updateWarnings(null===(a=this.cartesianData)||void 0===a?void 0:a.warningObjectCollection),z=e.type&ue.EP.Data||e.type&ue.EP.ResizeEnd||e.type&ue.EP.FormattingSubSelectionChange,J=e.type&ue.EP.FormattingSubSelectionChange,this.subSelectionHelper&&z&&(this.subSelectionHelper.updateOutlinesFromSubSelections(e.subSelections,!0),this.hostServices.alertScreenReader&&J&&(fe=this.subSelectionHelper.getLabelsFromSubSelections(e.subSelections,["aria-label"]),(G=fe?.length&&fe.join(" "))&&this.hostServices.alertScreenReader(G)))),[2]}})})},r.getCartesianVisualCapabilities=function(e){for(var t,a=0,i=e.length;a<i;a++){var s=e[a].getCartesianVisualCapabilities();t?t.supportsHierarchicalCategoryAxis&&(t.supportsHierarchicalCategoryAxis=s.supportsHierarchicalCategoryAxis):t=(0,me.ED)(s)}return t},r.getRenderMode=function(e,t){for(var a,i=0,n=e;i<n.length;i++){var s=n[i];if(null!=s){var o=new gs(s,t?.supportsHierarchicalCategoryAxis).getRenderModes();a=a?_.intersection(a,o):o,w.fF.assert(function(){return!_.isEmpty(a)},"Could not find a valid render mode for all layers")}}return _.head(a)},r.prototype.isSmallMultiples=function(){return(0,p.sI)(this.dataViews)},r.prototype.showSmallMultiplesCard=function(){return this.isSmallMultiples()},r.prototype.showSubheaderCard=function(){return this.isSmallMultiples()},Object.defineProperty(r.prototype,"hasHierarchicalAxisRenderMode",{get:function(){return 3===this.categoryAxisRenderMode},enumerable:!1,configurable:!0}),r.prototype.render=function(e,t,a){return(0,d.__awaiter)(this,void 0,void 0,function(){return(0,d.__generator)(this,function(i){return[2,this.layout.render(this.multiples,this.currentViewport,this.categoryLoadMoreDataHandler,this.background,this.axisZoom,this.trimOrdinalDataOnOverflow,e,this.hasHierarchicalAxisRenderMode,t,this.formatMode,this.subSelectionHelper,this.isSelected,a)]})})},r.prototype.updateWarnings=function(e){var t,a,i,n,s;if(!_.isEmpty(this.dataViews)&&e){var o=this.dataViews,l=(0,jt.b)(o,!1,!1,!1,["Tooltips"],!0);if(_.isEmpty(l)||e.add.apply(e,l||[]),this.axes.addWarnings(e),this.multiples.checkIfNoLabelsCanBeRendered()){var u={selector:null,warnings:[new ze.we]};e.addForVisualObject("labels",u)}else{e.removeForVisualObject("labels");for(var h=0,f=null===(a=this.multiples.getCoreMultiple())||void 0===a?void 0:a.layers;h<f.length;h++){var g=f[h];null===(i=g.addWarnings)||void 0===i||i.call(g,e)}}for(var A=[],S=null===(n=this.cartesianVisualCapabilities)||void 0===n?void 0:n.supportsHierarchicalCategoryAxis,C=0,L=o;C<L.length;C++)new gs(L[C],S).addObjectWarnings(A);var V=function(z,J){var fe=(0,D.getMergedUserDomains)(z);fe[0]>=fe[1]&&e.addForVisualObject(J,{selector:null,warnings:[new ze.Dm]})};!(null===(s=this.originalCartesianData)||void 0===s)&&s.axesData&&(V(this.originalCartesianData.axesData.valueAxis,"valueAxis"),V(this.originalCartesianData.axesData.categoryAxis,"categoryAxis"),V(this.originalCartesianData.axesData.secondaryValueAxis,"y2Axis")),_.isEmpty(A)||(t=this.cartesianData.warningObjectCollection).addForVisualObject.apply(t,(0,d.__spreadArray)(["categoryAxis"],A||[],!1)),this.hostServices.setWarnings(this.cartesianData.warningObjectCollection.complete())}},r.prototype.update=function(e){return(0,d.__awaiter)(this,void 0,void 0,function(){return(0,d.__generator)(this,function(t){switch(t.label){case 0:return this.featureSwitches.onObject&&e.formatMode!==this.formatMode&&(this.subSelectionHelper.setFormatMode(e.formatMode),this.interactivityService.setFormatMode(e.formatMode),this.formatMode=e.formatMode),null==e.resizeMode?[3,2]:[4,this.updateInternal(e)];case 1:return t.sent(),[3,4];case 2:return[4,this.updateInternal(e,null!=e.operationKind?e.operationKind:ue.su.Create)];case 3:t.sent(),t.label=4;case 4:return[2]}})})},r.prototype.destroy=function(){this.isDestroyed=!0,this.multiples&&this.multiples.clear(),this.layout&&this.layout.destroy(),this.axisZoom&&(this.axisZoom.destroy(),this.axisZoom=void 0)},r.prototype.onViewModeChanged=function(e){this.layout.viewMode=e},r.prototype.onSelectionStateChanged=function(e){if(this.isSelected=e,this.cartesianData&&this.multiples&&this.dataViews){var t=!this.hasSetData||this.multiples.isSmallMultiples(this.dataViews);this.render(t,!0)}},r.prototype.scrollTo=function(e){var t=this.layout.getVisibleMultiples();this.multiples.scrollTo(e,t)},r.prototype.scrollRowsTo=function(e){this.layout.scrollRowsTo(e)},r.prototype.isComboChart=function(){return p.LQ(this.chartType)},r.prototype.enumerateObjectInstances=function(e){var t,a=new Jt.G,i=this.getLayers();if(e.objectName===Pt.XC){var n=this.categoryAxisIsScalar().isScalar;if(Me(this.dataViews,i)&&n){var s=p.RN(i);this.enumerateReferenceLines(a,e.objectName,s)}}else e.objectName===Pt.Dk?this.enumerateReferenceLines(a,e.objectName):"referenceLine"===e.objectName?function(r,e,t){return et(function(a){return!a.isStacked},r,e,void 0)}(this.dataViews,i)&&this.enumerateReferenceLines(a,e.objectName):"trend"===e.objectName&&Ee(this.dataViews,i)&&(0,ft.md)(a,this.originalCartesianData.trendLines,this.layerStyle);for(var o=0,l=i;o<l.length;o++){var u=l[o];null===(t=u.enumerateObjectInstances)||void 0===t||t.call(u,a,e)}return a.complete()},r.prototype.getSelectorsByColumnSubSelection=function(e){for(var a=0,i=this.getLayers();a<i.length;a++){var n=i[a];if(n.getSelectorsByColumnFromSubselectedElement){var s=n.getSelectorsByColumnFromSubselectedElement(e);if(s)return s}}return{}},r.prototype.getSubSelectionCustomOutlines=function(e){return pa.PH.call(this,e)},r.prototype.getSubSelectionCustomElements=function(e){return pa.xm.call(this,e)},r.prototype.getSubSelectionMetadata=function(e){return pa.H_.call(this,e)},r.prototype.getSubSelectionStyles=function(e){return pa.mv.call(this,e)},r.prototype.getSubSelectionShortcuts=function(e,t){return pa.yV.call(this,e,t)},r.prototype.getSubSelectables=function(e){return pa.l$.call(this,e)},r.prototype.getNextSubSelectable=function(e,t){return this.subSelectionHelper.getNextSubSelectable(e,t)},r.prototype.getFormattingModel=function(){return pa.fI.call(this)},r.prototype.resolveFormattingPlaceholder=function(e){if((0,ge.n$)(e)){if("responsive"===e.name)return this.getResponsiveSlice();for(var a=0,i=this.getLayers();a<i.length;a++){var n=i[a],s=n.resolveFormattingPlaceholder&&n.resolveFormattingPlaceholder(e);if(s)return s}}},Object.defineProperty(r.prototype,"localizer",{get:function(){var t=this;return function(a){return t.hostServices.getLocalizedString(a)}},enumerable:!1,configurable:!0}),r.prototype.getResponsiveSlice=function(){var e=this.dataViews&&this.dataViews[0];if(e){if(this.smallMultiplesViewModelAdapter)return this.smallMultiplesViewModelAdapter.getResponsiveSlice(e,this.localizer);if(this.viewModelAdapterFactory)return this.viewModelAdapterFactory.createCartesianAdapter({cartesianData:void 0,dataView:e,viewport:void 0,isCoreMultiple:void 0}).getResponsiveSlice(e,this.localizer)}},r.prototype.getTelemetryInformation=function(){var e={};if(this.isSmallMultiples()){var t=(0,p.Zw)(this.dataViews[0].metadata.objects,this.layerStyle);w.fF.assertValue(t,"getTelemetryInformation - NULL layout"),e.smallMultiples={layout:{type:t.layoutType,rows:t.rowCount,columns:t.columnCount}}}for(var a=this.getLayers(),i=0;i<a.length;i++){var n=a[i];if(_.isFunction(n.getTelemetryInformation)){var s=n.getTelemetryInformation();s&&(e[i.toString()]=s)}}if(!_.isEmpty(e))return e},r.prototype.getLayers=function(){var e=this.multiples.getCoreMultiple();return 1&e.getState()?e.layers:[]},r.prototype.enumerateReferenceLines=function(e,t,a){var i,n;if(null!==(i=this.originalCartesianData)&&void 0!==i&&i.referenceLines&&null!==(n=this.originalCartesianData)&&void 0!==n&&n.axesData){var s=Ze.v.getDataColorByIndex(this.layerStyle,0,we.fA),o=_.filter(this.originalCartesianData.referenceLines,function(l){return l.type===t});(0,Pt.Dr)(e,o,s,t,this.originalCartesianData.axesData.isValueAxisIrregular,a)}},r.prototype.shouldShowLegendCard=function(){var e,t;if(_.isEmpty(this.dataViews)||null===(e=this.cartesianData)||void 0===e||!e.legendData)return!1;if(this.cartesianData.legendData.isGradientLegend)return!0;var a=null===(t=this.multiples.getCoreMultiple())||void 0===t?void 0:t.layers;if(a&&this.dataViews)for(var i=a.length,n=0,s=0;s<i;s++){if(a[s].hasLegend())return!0;var o=this.dataViews[s];if(o&&o.categorical&&o.categorical.values&&o.categorical.values.length>0&&++n>1)return!0}return!1},r.prototype.isLogAxisScaleAllowed=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1);var a=this.axes.isYAxisCategorical;return this.axes.isLogScaleAllowed(e?a?0:t?2:1:a?1:0)},r.prototype.categoryAxisIsScalar=function(){var e;if(!this.originalCartesianData)return{isScalar:void 0,supportedType:void 0};var t=this.originalCartesianData.axesData.categoryAxis,a=this.hasHierarchicalAxisRenderMode?xt.w.categorical:xt.w.both,i=!1,n=null===(e=this.multiples.getCoreMultiple())||void 0===e?void 0:e.layers;return a===xt.w.both&&n&&n[0].getSupportedCategoryAxisType&&((a=n[0].getSupportedCategoryAxisType())===xt.w.scalar?i=!0:(i=p.qU(a===xt.w.both,t))&&(i=n&&n[0].getVisualCategoryAxisIsScalar?n[0].getVisualCategoryAxisIsScalar():0===this.categoryAxisRenderMode)),{isScalar:i,supportedType:a}},r.prototype.onClearSelection=function(){this.hasSetData&&this.multiples.clearSelection(this.layout.getVisibleMultiples())},r.prototype.onRestoreSelection=function(e){return!!this.interactivityService&&this.interactivityService.restoreSelection(e.selection)},r.prototype.getLayerRendererInitOptions=function(e){var a,t=this;return{animator:null===(a=e.cartesianOptions)||void 0===a?void 0:a.animator,svg:e.axesRenderer.getLayerContainer(),cartesianHost:{updateLegend:function(n){return t.legend.drawLegend({data:n,parentViewport:t.currentViewport,isHierarchicalAxis:t.hasHierarchicalAxisRenderMode,onObject:t.featureSwitches.onObject,titleSliceUid:"".concat("legend","-").concat("title","-titleText")})},triggerRender:function(n){return t.render(n,!1)}},eventManager:this.eventManager,useManagedTabIndex:this.useManagedTabIndex()}},r.prototype.useManagedTabIndex=function(){return this.isSmallMultiples()},r.prototype.onDataViewObjectChanged=function(e,t){var c,a=(0,p.Zw)(this.dataViews[0].metadata.objects,this.layerStyle),i=p.Te(e,a);if(!this.featureSwitches.onObject||1!==t)return i;for(var s=[],o=0,l=this.getLayers();o<l.length;o++){var u=l[o];u.getDataViewObjectLayerChanges&&s.push(u.getDataViewObjectLayerChanges(i,t))}if(_.isEmpty(s))return i;if(s.length>1){for(var h=[],f=[],g=0;g<s.length;g++){f[g]=[];for(var A=0,S=s[g];A<S.length;A++){var C=S[A];C.required?h.push(C):f[g].push(C)}}for(var L=f[0],P=1;P<f.length;P++)L=_.intersectionWith(L,f[P],_.isEqual);c=Wt.o.applyDataViewObjectsBehaviorChanges(e,(0,d.__spreadArray)((0,d.__spreadArray)([],L,!0),h,!0))}else c=Wt.o.applyDataViewObjectsBehaviorChanges(i,_.first(s));return c},r}(),gs=function(){function r(e,t){this.processDataView(e,t)}return r.prototype.processDataView=function(e,t){if(this.renderModes=[],e&&e.metadata&&e.categorical&&!_.isEmpty(e.categorical.categories)){var a=e.metadata,i=e.categorical.categories,n=_.head(i),s=re.A8(n),o=(0,aa.n$)(e),l=re.PX(a.objects,B.p.categoryAxis.axisType,n.source.type,s,o);if(o){var u=r.areNonLeafLevelsFilteredToUniqueValue(i),c=(0,b.NA)(a.objects,B.p.categoryAxis.concatenateLabels,p.SM);if(!u||!c&&t){var h=_.some(e.categorical.categories,function(g){return g.source&&g.source.identityExprs}),f=t&&!c&&h;this.renderModes.unshift(2),f&&this.renderModes.unshift(3),!c&&!h&&(this.warnings=[{selector:null,warnings:[new ze.Tr]}])}else this.renderModes.unshift(1);l&&this.renderModes.unshift(0)}else this.renderModes.unshift(1),l&&this.renderModes.unshift(0)}else this.renderModes.push(2)},r.prototype.getRenderMode=function(){return _.head(this.renderModes)},r.prototype.getRenderModes=function(){return this.renderModes},r.prototype.addObjectWarnings=function(e){w.fF.assertValue(e,"warnings"),this.warnings&&e.push.apply(e,this.warnings||[])},r.areNonLeafLevelsFilteredToUniqueValue=function(e){if(_.isEmpty(e))return!1;for(var t=e.length-1,a=0;a<t;a++){var i=e[a].source;if(!i||!(0,b.NA)(i.objects,B.p.filters.filteredToUniqueValue,!1))return!1}return!0},r}(),eo=function(){function r(e){this.palette=e,this.clearPreferredScale()}return r.prototype.getAllColors=function(){return this.palette.getAllColors()},r.prototype.getColorScaleByKey=function(e){return this.setPreferredScale(e),this.preferredScale},r.prototype.getNewColorScale=function(){return this.preferredScale},r.prototype.getColorByIndex=function(e){return this.palette.getColorByIndex(e)},r.prototype.getSentimentColors=function(){return this.palette.getSentimentColors()},r.prototype.getGradientColors=function(){return this.palette.getGradientColors()},r.prototype.getBasePickerColors=function(){return this.palette.getBasePickerColors()},r.prototype.clearPreferredScale=function(){this.preferredScale=this.palette.getNewColorScale(),this.rotated=!1},r.prototype.rotateScale=function(){this.preferredScale=this.preferredScale.clone(),this.preferredScale.clearAndRotateScale(),this.rotated=!0},r.prototype.setPreferredScale=function(e){this.rotated||(this.preferredScale=this.palette.getColorScaleByKey(e))},r}(),to=function(){function r(e,t){this.loadMoreThreshold=1,this.enabled=!1,w.fF.assertValue(t,"hostServices"),this.hostServices=t,this.setScale(e)}return r.prototype.update=function(e,t){this.enabled=!t&&0!==e},r.prototype.resetViewport=function(e){this.viewportDataRange={startIndex:0,endIndex:e}},r.prototype.setScale=function(e){var t=e&&e.domain&&e.domain().length;t&&(this.loadMoreThresholdIndex=t-1-this.loadMoreThreshold)},r.prototype.isLoadingMoreData=function(){return this.loadingMoreData},r.prototype.onLoadMoreDataCompleted=function(){this.loadingMoreData=!1},r.prototype.shouldLoadMoreData=function(){var e=this.viewportDataRange;return!(!this.enabled||!e||this.isLoadingMoreData())&&e.endIndex>=this.loadMoreThresholdIndex},r.prototype.loadMoreData=function(){var e=this;return w.fF.assert(function(){return e.shouldLoadMoreData()},"unexpected call to loadMoreData"),this.isLoadingMoreData()?Qe.G.WaitingForData:(this.loadingMoreData=!0,this.hostServices.loadMoreData(),Qe.G.TriggeredLoadMore)},r}()},34969:function(vi,ma,x){"use strict";x.d(ma,{$B:function(){return Ne},$K:function(){return R},$W:function(){return j},$w:function(){return X},Ao:function(){return E},Au:function(){return lt},CI:function(){return Y},Fv:function(){return be},GN:function(){return Ee},JI:function(){return te},K8:function(){return ct},LK:function(){return ca},LQ:function(){return v},MH:function(){return Ve},MI:function(){return Ca},PC:function(){return p},Pg:function(){return Fe},QB:function(){return ra},RN:function(){return Ye},SM:function(){return I},Sq:function(){return ee},T4:function(){return W},Te:function(){return Ma},Vk:function(){return Q},Zo:function(){return Me},Zw:function(){return Qt},be:function(){return tt},cI:function(){return Se},dZ:function(){return N},eX:function(){return y},fw:function(){return Re},is:function(){return Ot},jY:function(){return he},lc:function(){return ve},qE:function(){return Pe},qU:function(){return Ge},rX:function(){return ia},rZ:function(){return q},sI:function(){return et},se:function(){return de},u8:function(){return ce},yA:function(){return Pa},yo:function(){return O},zn:function(){return Z}});var d=x(81337),B=x(53197),re=x(86946),Ze=x(48766),Ue=x(62458),Wt=x(38265),aa=x(72489),jt=x(26543),Jt=x(28326),Pt=x(22733),Be=x(38958),Vt=x(41640),ft=x(14599),Dt=x(61297),Mt=x(91593),U=x(90120),dt=x(82755),xt=x(32476),ze=x(49511),we=x(47316),w=x(18664),me=x(32105),ot=x(44783),ge=x(79154),Qe=x(18765),ue=x(92374),M=x(72902),b=x(76045),W=0,Z=75,Ne=.2,Se=.6,Re=1,j=1,D=36,ee="cartesianChart",I=!0,he=20,be=2,de=Wt.Wn.regular.css,q=8,ct=.4,tt=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],De=2,Y=9,O=9,ve=11,y="foregroundNeutralSecondaryAlt",E="foregroundNeutralLight",te="foregroundNeutralTertiaryAlt";function ce(){return{categoryCount:0,categoryThickness:he,outerPaddingRatio:0,innerPaddingRatio:0,isScalar:!1}}function Q(se,He){var Ie=He?{showAxisTitle:!0}:{};if(!se)return Ie;var ut=se.objects;if(ut){var m=ut.categoryAxis;m&&((Ie=_.clone(m)).showAxisTitle=m.showAxisTitle??He)}return Ie}function X(se,He,Ie){void 0===Ie&&(Ie="valueAxis");var ut=He?{showAxisTitle:!0}:{};if(!se)return ut;var m=se.objects;if(m){var T=m[Ie];T&&((ut=_.clone(T)).showAxisTitle=T.showAxisTitle??He)}return ut}function Pe(se){return void 0!==se.innerPadding?Math.round(100*se.innerPadding):void 0}function Ge(se,He){return!(!se||He&&He.axisType&&He.axisType!==Ze.w.scalar)}function p(se){return v(se)||0===se||1===se||2===se||3===se}function v(se){return 13===se||14===se}function R(se){var He=se.preferredCategoryWidth;return null==He?void 0:+He}function N(se,He,Ie,ut){if(Ue.fF.assertValue(se,"data"),Ue.fF.assertValue(Ie,"type"),ut)return(0,B.v9)(Ie)?Jt.y3.fromTimeValue(He):He;if(Ie.text)return Ue.fF.assert(function(){return He<se.categories.length},"category index out of range"),se.categories[He];if(se&&se.series&&se.series.length>0){var m=se.series[0];if(m){var T=m.data;if(T){se.hasHighlights&&(He*=2);var F=T[He];if(F)return(0,B.v9)(Ie)&&null!=F.categoryValue?Jt.y3.fromTimeValue(F.categoryValue):F.categoryValue}}}return He}function Fe(se){if(_.isEmpty(se))return 0;for(var He=0,Ie=0,ut=se;Ie<ut.length;Ie++){var m=ut[Ie];_.isEmpty(m.data)||(He=Math.max(m.data[m.data.length-1].categoryIndex,He))}return He}function Ve(se,He){var Ie;return jt.dw.builder().withCategory([He],se,null===(Ie=He?.source)||void 0===Ie?void 0:Ie.queryName,!0).createSelectionId()}function Me(se,He){var Ie,m,ut=!1;if(He){var T=_.head(se.categories);Ie=(ut=(m=(0,re.A8)(T))&&!_.isEmpty(m.values))?T:_.last(se.categories)}else Ie=_.isEmpty(se.categories)?{source:void 0,values:[(0,aa.WU)(null)],identity:void 0}:_.last(se.categories);return{category:Ie,useScalarKeys:ut,scalarKeys:m}}function Ee(se){return se[0]}function Ye(se){var He;return Ue.fF.assert(function(){return!_.isEmpty(se)},"getCategoryValueType layers"),null===(He=_.find(se,function(Ie){return Ie.getCategoryValueType&&Ie.hasData()}))||void 0===He?void 0:He.getCategoryValueType()}function et(se){var He,Ie,ut,m,T;if(_.size(se)<1)return!1;var F=null===(T=null===(m=null===(ut=null===(Ie=null===(He=se[0])||void 0===He?void 0:He.matrix)||void 0===Ie?void 0:Ie.rows)||void 0===ut?void 0:ut.levels)||void 0===m?void 0:m[0])||void 0===T?void 0:T.sources;return!(_.size(F)<1||_.isEmpty(se[0].matrix.rows.root.children))&&_.every(F,function(pe){return(0,Be.nu)(pe,Pt.x.rows)})}function lt(se){switch(se){case 7:case 6:case 8:return!0}return!1}function Ot(se){var He=se.categoryCount,Ie=se.availableWidth,ut=se.isScalar,m=void 0!==ut&&ut,T=se.cartesianOptions,pe=(void 0===T?{}:T).isScrollable,_e=function(se){var He=se.categoryCount,Ie=se.availableWidth,ut=se.isScalar,m=se.preferredCategoryWidth,T=se.outerPaddingRatio,F=function(se){var He,Ie,ut,$e,m=se.data,T=se.categoryCount,F=se.availableWidth,pe=se.domain,_e=se.isScalar,Te=se.trimOrdinalDataOnOverflow,Ce=se.outerPaddingRatio;if(T<2)$e=F*(1-Ce);else if(_e&&pe&&pe.length>1){var at=function(se){var He=Number.MAX_VALUE;if(se.length>0)for(var Ie=se[0].data.filter(function(F){return!F.highlight}),ut=function(pe,_e){var Te=Ie[pe+1].categoryValue,Ce=Ie[pe].categoryValue;Ue.fF.assert(function(){return _.isNumber(Te)},"nextValue"),Ue.fF.assert(function(){return _.isNumber(Ce)},"currentValue"),He=Math.min(He,Math.abs(Te-Ce))},m=0,T=Ie.length-1;m<T;m++)ut(m);return He}(null!==(He=m?.series)&&void 0!==He?He:[]);$e=F*(at/(pe[pe.length-1]-pe[0]+at*Ce*2));var It=null!==(ut=null===(Ie=se.axisZoom)||void 0===Ie?void 0:Ie.getCategoryZoomFactor())&&void 0!==ut?ut:1;Ue.fF.assert(function(){return It>=1},"zoomFactor must be >= 1"),$e=Math.max($e*It,De)}else $e=F/(T+2*Ce),Te&&($e=Math.max($e,he));return $e=Math.min($e,F/(3+2*Ce)),!_e&&T>=3&&Te?Math.max($e,he):$e}(se);if(ut||null==m||m<F)return{categoryThickness:F,outerPaddingRatio:T};var pe=Math.floor((Ie-m*T*2)/m);return pe<=0?F=Ie/(1+2*T):pe<He?(T=(Ie-m*pe)/(2*m),F=m):F=Math.min(m,Ie),{categoryThickness:F,outerPaddingRatio:T}}(se),Te=_e.categoryThickness,Ce=_e.outerPaddingRatio,at=(0,Vt.Uy)((Ie-Te*Ce*2)/Te),ht=Math.min(at,He);return m||ht<He&&pe||(Ce=Math.max(0,(Ie-Te*ht)/2/Te),Ce=(0,Vt.GG)(Ce,0)?0:Ce),{categoryCount:!m&&pe?He:ht,categoryThickness:Te,outerPaddingRatio:Ce,innerPaddingRatio:se.innerPaddingRatio,isScalar:m}}function ra(se,He){return{x:se.x.show,y:se.y.show,y2:se.y2.show||He&&!1!==se.y2.show}}function Qt(se,He){var Ie,ut,m=(0,dt.RK)(se,Dt.Xi),T=function(se){return{layoutType:se?.layoutType,rowCount:se?.rowCount,columnCount:se?.columnCount,backgroundColor:se?.backgroundColor,backgroundTransparency:se?.backgroundTransparency,gridPadding:se?.gridPadding,advancedPaddingOptions:se?.advancedPaddingOptions,columnPaddingInner:se?.columnPaddingInner,columnPaddingOuter:se?.columnPaddingOuter,rowPaddingInner:se?.rowPaddingInner,rowPaddingOuter:se?.rowPaddingOuter}}(m),F=function(se){return{layoutType:0,rowCount:Dt.UE,columnCount:Dt.ZO,backgroundColor:null,backgroundTransparency:0,gridline:{region:ze.o.none,strokeShow:!1,strokePattern:we.kY.solid,strokeWidth:1,strokeColor:U.v.getThemeColor(se,ot.md),strokeTransparency:0},advancedPaddingOptions:!1,gridPadding:12,columnPaddingInner:12,columnPaddingOuter:12,rowPaddingInner:12,rowPaddingOuter:12}}(He),pe=U.v.create(He),_e=m?.gridLineShow,Te=null!==(Ie=m?.gridLineType)&&void 0!==Ie?Ie:F.gridline.region;!1===_e?Te=ze.o.none:!0===_e?(Te===ze.o.none||!Te)&&(Te=ze.o.inner):null==_e&&(_e=Te!==ze.o.none);var Ce=(0,d.__assign)((0,d.__assign)({},T?.layoutType===Mt.r.auto?{layoutType:0,rowCount:F.rowCount,columnCount:F.columnCount}:{layoutType:1,rowCount:T?.rowCount||F.rowCount,columnCount:T?.columnCount||F.columnCount}),{backgroundColor:pe.getColorForPropertyNameWithDefaultColor(m,ft.e0.smallMultiplesBackgroundColor.propertyName,F.backgroundColor,!0),backgroundTransparency:null!==(ut=T?.backgroundTransparency)&&void 0!==ut?ut:F.backgroundTransparency,gridline:{region:Te,strokeShow:_e,strokePattern:(0,b.N)(m,"gridLineStyle",F.gridline.strokePattern),strokeColor:pe.getColorForPropertyNameWithDefaultColor(m,"gridLineColor",F.gridline.strokeColor),strokeWidth:(0,b.N)(m,"gridLineWidth",F.gridline.strokeWidth),strokeTransparency:(0,b.N)(m,"gridLineTransparency",F.gridline.strokeTransparency)}});return function(se,He,Ie){se.gridPadding=He&&void 0!==He.gridPadding?He.gridPadding:Ie.gridPadding,se.advancedPaddingOptions=He&&void 0!==He.advancedPaddingOptions?He.advancedPaddingOptions:Ie.advancedPaddingOptions;var ut=He&&He.advancedPaddingOptions,m={gridPadding:se.gridPadding,gridLineRegion:se.gridline.region};se.columnPaddingInner=ut&&void 0!==He.columnPaddingInner?He.columnPaddingInner:Wa(m,1),ut&&void 0!==He.columnPaddingOuter?se.columnPaddingOuter=He.columnPaddingOuter:(m.defaultPadding=Ie.columnPaddingOuter,se.columnPaddingOuter=Wa(m,0)),se.rowPaddingInner=ut&&void 0!==He.rowPaddingInner?He.rowPaddingInner:Wa(m,2),ut&&void 0!==He.rowPaddingOuter?se.rowPaddingOuter=He.rowPaddingOuter:(m.defaultPadding=Ie.rowPaddingOuter,se.rowPaddingOuter=Wa(m,0))}(Ce,T,F),Ce}function Wa(se,He){var Ie=se.gridPadding,ut=se.gridLineRegion,m=se.defaultPadding;switch(He){case 0:return xt.Me.typeHasOuterGridLines(ut)?Ie:m;case 1:return xt.Me.typeHasVerticalGridLines(ut)?Ie:Ea(Ie);case 2:return xt.Me.typeHasHorizontalGridLines(ut)?Ie:Ea(Ie);default:Ue.fF.assertNever(He)}}function Ea(se){return se%2==0?se/2:Math.ceil(se/2)}function Pa(se,He){var Ie=(0,dt.RK)(se,"subheader"),ut=Rt(),m=U.v.create(He),T=(0,w.Zi)(Ie,{family:"fontFamily",size:"fontSize",color:"fontColor",bold:"bold",italic:"italic",underline:"underline"},m,He,ut.ColorName,ut.TextClassName,{color:U.v.getThemeColor(He,ut.ColorName),size:me.B.createFromPt(ut.FontPointSize),family:ut.FontFamily,weight:ge.AI,style:ge.AI,textDecoration:ge.zu}),F={top:0,bottom:2,left:5,right:0},pe=T.size.px+F.top+F.bottom,_e=ut.Vertical,Te=ut.Horizontal,Ce=ut.TitleWrap,$e=ut.Show,at=!1,ht=!1,mt=!1;if(Ie){switch(Ie.position){case Qe.cL.top:_e=0;break;case Qe.cL.bottom:_e=1}switch(Ie.alignment){case ue.D.left:Te=0;break;case ue.D.center:Te=1;break;case ue.D.right:Te=2}Ce=Ie.titleWrap,void 0!==Ie.show&&($e=Ie.show),void 0!==Ie.bold&&(at=Ie.bold),void 0!==Ie.italic&&(ht=Ie.italic),void 0!==Ie.underline&&(mt=Ie.underline)}return{fontProperties:T,show:$e,height:pe,margins:F,vertical:_e,horizontal:Te,titleWrap:Ce,labelBold:at,labelItalic:ht,labelUnderline:mt}}var Rt=function(){return{FontFamily:Wt.Wn.regular.css,FontPointSize:8,ColorName:"foregroundNeutralSecondary",TextClassName:"title",Vertical:0,Horizontal:0,Show:!0,TitleWrap:!1,bold:!1,italic:!1,underline:!1}};function ia(){return{top:0,bottom:0,left:0,right:0}}function Ca(se,He){var Ie=d3.select(se.get(0)),ut=Ie.select("svg");ut.empty()&&((ut=Ie.append("svg")).classed(ee,!0),ut.style("position","absolute"));var m=(0,M.EX)(ut);return He&&ut.attrs({width:He.width,height:He.height}),{element:ut,clearCatcher:m}}function Ma(se,He){if(se[0].objectName===Dt.Xi){var Ie=ft.N_.smallMultiplesLayout.rowCount,ut=ft.N_.smallMultiplesLayout.columnCount,m=se[0].propertyValue;if(se[0].propertyName===Ie.propertyName){var T=ca({rowCount:m,columnCount:He.columnCount});se.push({objectName:ut.objectName,propertyName:ut.propertyName,propertyValue:Math.min(T.maxColumnCount,He.columnCount),propertyType:{integer:!0}})}else se[0].propertyName===ut.propertyName&&(T=ca({rowCount:He.rowCount,columnCount:m}),se.push({objectName:Ie.objectName,propertyName:Ie.propertyName,propertyValue:Math.min(T.maxRowCount,He.rowCount),propertyType:{integer:!0}}))}return se}function ca(se){return{maxRowCount:Math.floor(D/se.columnCount),maxColumnCount:Math.floor(D/se.rowCount)}}},3406:function(vi,ma,x){"use strict";x.d(ma,{mM:function(){return ue},bk:function(){return ge},Wv:function(){return Z},hJ:function(){return ae},kC:function(){return Qe},WR:function(){return Ne},vA:function(){return le},sY:function(){return me},Gm:function(){return M},rT:function(){return Se},Ls:function(){return b},pM:function(){return W}});var d=x(72902),B=x(51995),re=x(60066),Ze=x(52287),Ue=x(58691),Wt=x(34021),aa=x(10389),jt=x(79154),Jt=x(59107),Pt=x(62458),Be=x(64067),Vt=x(26543),ft=x(34969),Dt=x(38859),Mt=x(80758),U=x(11956),dt=function(){function D(ee){Pt.fF.assert(function(){return ee.columnWidth>0},"Columns should have a width"),Pt.fF.assert(function(){return ee.categoryWidth>0},"Categories should have a width"),this.categoryAxisScale=ee.categoryAxisScale,this.categoryWidth=ee.categoryWidth,this.columnWidth=ee.columnWidth,this.dataPoints=ee.dataPoints,this.hasCategories=ee.hasCategories,this.isBar=ee.isBar,this.isClustered=ee.isClustered,this.isScalar=ee.isScalar,this.seriesLength=ee.seriesLength}return D.prototype.queryRegion=function(ee){var de,q,ye,ne,I=this,he=[],be=ee.dataSpace;return(this.isScalar||this.hasCategories&&!_.some([be.bottom,be.left,be.right,be.top],function(Le){return void 0===Le}))&&(this.isBar?(this.isScalar?(de=be.bottom.value,q=be.top.value):(de=this.getAdjustedCategoryIndex(be.top.value,be.top.seriesIndex,this.seriesLength),q=this.getAdjustedCategoryIndex(be.bottom.value,be.bottom.seriesIndex,this.seriesLength)),ye=be.left.value,ne=be.right.value):(this.isScalar?(de=be.left.value,q=be.right.value):(de=this.getAdjustedCategoryIndex(be.left.value,be.left.seriesIndex,this.seriesLength),q=this.getAdjustedCategoryIndex(be.right.value,be.right.seriesIndex,this.seriesLength)),ye=be.bottom.value,ne=be.top.value),he=_.filter(this.dataPoints,function(Le){return 0!==Le.valueAbsolute&&de<=q&&ye<=ne&&(0,Mt.WN)(de,q,I.getAreaCategoryBound(Le,!1),I.getAreaCategoryBound(Le,!0))&&(0,Mt.WN)(ye,ne,I.getAreaValueLowerBound(Le),I.getAreaValueUpperBound(Le))})),he},D.prototype.getAreaValueLowerBound=function(ee){return this.isClustered?Math.min(0,ee.value):ee.position-ee.valueAbsolute},D.prototype.getAreaValueUpperBound=function(ee){return this.isClustered?Math.max(0,ee.value):ee.position},D.prototype.getAreaCategoryBound=function(ee,I){if(this.isScalar){this.isBar&&(I=!I);var he=I?this.columnWidth:0,be=this.isClustered?ee.seriesIndex:0,de=this.categoryAxisScale(ee.categoryValue)-this.categoryWidth/2;return(0,U.invertScale)(this.categoryAxisScale,de+be*this.columnWidth+he,0,0,void 0).value}return this.getAdjustedCategoryIndex(ee.categoryIndex,ee.seriesIndex,this.seriesLength)},D.prototype.getAdjustedCategoryIndex=function(ee,I,he){return this.isClustered?(Pt.fF.assert(function(){return void 0!==I},"Series index should be present when getting adjusted category index for a clustered chart."),ee*he+I):ee},D}(),xt=(0,jt.CH)("ribbonChartLayer"),ze=(0,jt.CH)("ribbonChartDefs"),we=(0,jt.CH)("ribbonChartSeries"),w=(0,jt.CH)("ribbonChartDataPoint");function me(D,ee){var I=this,he=this.drawColumns(!D),be=this.data,de=this.xAxisProperties.isCategoryAxis&&0===this.xAxisProperties.innerPaddingRatio||this.yAxisProperties.isCategoryAxis&&0===this.yAxisProperties.innerPaddingRatio;this.mainGraphicsContext.attr("height",this.availableHeight).attr("width",this.availableWidth).classed("withCrispEdges",de);var q=function(){return I.mainGraphicsContext.selectAll(w.selector)};this.tooltipsEnabled&&!ee?(this.tooltipService.addTooltip(he.eventGroup,function(De){var Y;return null===(Y=De.data)||void 0===Y?void 0:Y.tooltipInfo},function(De){var Y;return(null===(Y=De.data)||void 0===Y?void 0:Y.identity)&&[De.data.identity]}),this.hasRibbonBands&&this.tooltipService.addTooltip(q(),function(De){var Y;return null===(Y=De.data)||void 0===Y?void 0:Y.tooltipInfo},function(){return[Vt.l0.createNull()]})):(this.tooltipService.removeTooltips(he.eventGroup),this.hasRibbonBands&&this.tooltipService.removeTooltips(q()));var ne,Le,ye=[];if(this.interactivityService){for(var qe=0,ct=be.series;qe<ct.length;qe++)ye=ye.concat(ct[qe].data);ne={datapoints:ye,columnChartDrawInfo:he,hasHighlights:be.hasHighlights,root:this.mainGraphicsContext,showLabel:be.dataLabelsSettings.show,visualInstanceId:this.hostService.instanceId,hitTester:new dt({dataPoints:ye,isScalar:be.isScalar,hasCategories:!!be.categoryIdentities&&be.categoryIdentities.length>0,isBar:this.isBar,isClustered:this.isClustered,categoryAxisScale:this.categoryAxis.scale,columnWidth:this.columnWidth,categoryWidth:this.categoryWidth,seriesLength:be.series.length}),useManagedTabIndex:this.useManagedTabIndex,ribbonSeriesSelection:this.mainGraphicsContext.selectAll(we.selector),style:this.style},Le={navigationStrategy:be.series.length>1?d.jN.CategoryFirst:d.jN.CategoryOnly,helper:this}}return this.isMobileInteractiveLegend()&&ot.call(this,!0),(0,aa.bL)(this.animationOptions),{dataPoints:ye,behaviorOptions:ne,navigationOptions:Le,labelDataPoints:[],labelDataPointGroups:he.labelDataPointGroups,labelsAreNumeric:!0,labelOrientation:be.dataLabelsSettings.labelOrientation,animateLabels:he.animateLabels,categorySubRangeCount:this.isClustered?this.data.series.length:1,verticalCategoryAxis:this.isBar}}function ot(D){void 0===D&&(D=!1);var I=void 0===this.lastInteractiveSelectedColumnIndex?(0,ft.Pg)(this.data.series):this.lastInteractiveSelectedColumnIndex;this.selectColumn(I,D)}function ge(D,ee){Pt.fF.assertValue(D,"columns"),ee&&D.attr("draggable","true").on("dragstart",ee)}function Qe(){var D=this;(0,Wt.H4)(this.mainGraphicsContext,this.data.strokeSettings);var ee=this.mainGraphicsContext.selectAll(Dt.L0.selector);if(this.usesUngroupedRenderer()){var I=_.flatten(this.activeData.series.map(function(he){return he.data}));return I.sort(function(he,be){var de=(he.highlight?1:0)-(be.highlight?1:0);if(de)return de;var q=he.seriesPosition-be.seriesPosition;return D.activeData.layout.clusteredGapOverlapReverse&&(q*=-1),q}),ee.data([{data:I}],function(he){return"*"}).join(function(he){return he.append("g").classed(Dt.L0.class,!0)})}return ee.data(this.activeData.series,function(he){return he.key}).join(function(he){return he.append("g").classed(Dt.L0.class,!0)}).styles({fill:function(be){return be.columnStyle.fillColor},"stroke-width":function(be){return ue.size(be.columnStyle.border,D.style)},stroke:function(be){return ue.color(be.columnStyle.border,D.style)}}).attr("role","listbox").attr("aria-label",function(he){return he.displayName})}var ue={opacity:function(ee,I,he){return(0,Be.TD)(I.isHighContrast?0:ee.strokeTransparency)*(he?re.eU:1)},size:function(ee,I){return I.isHighContrast?null:ee.strokeShow?2*ee.strokeWidth:0},color:function(ee,I){return I.isHighContrast?null:ee.strokeColor},optimized:function(ee,I){return ee===I?null:ee},rectClipPath:function(ee,I,he){var be;return null!==(be=ee.columnStyle.border)&&void 0!==be&&be.strokeShow&&!I.isHighContrast?"".concat(he?"fill-box ":"","inset(0px)"):null},strokePattern:function(ee,I,he,be){var de;if(null===(de=ee.columnStyle.border)||void 0===de||!de.outlineOnly||ee.highlight)return null;var q=he?[!1,!0,!1,!0]:[!0,!1,!0,!1],ye=q[0],ne=q[1],Le=q[2],qe=q[3],ct=function(){he?ye=!0:ne=!0},tt=function(){he?Le=!0:qe=!0};ee.indexFromBottom===ee.countOfPointsInCategory-1?be?tt():ct():0===ee.indexFromBottom&&(be?ct():tt());var De=I.shapeLayout.width(ee),Y=I.shapeLayout.height(ee),O="",ve=function(E,te){O+=E?"".concat(te," 0 "):"0 ".concat(te," ")};return ve(ye,De),ve(ne,Y),ve(Le,De),ve(qe,Y),O}};function M(D,ee,I,he){void 0===he&&(he=!1);var be=ee.selectAll(D.CS.selector).data(function(q){return he?_.filter(q.data,function(ye){return!!ye.value}):q.data},function(q){return q.key}),de=be.enter().append("rect").classed(D.CS.class,!0).classed("highlight",function(q){return!!q.highlight}).styles({"clip-path":function(ye){return ue.rectClipPath(ye,D.style,!1)},"-webkit-clip-path":function(ye){return ue.rectClipPath(ye,D.style,!0)}});return D.featureSwitches.onObject&&de.classed(Ze.cy,!0).attr(Ze.Ez,"columns").attr(Ze.QZ,3).each(function(q,ye,ne){Ze.O5.setDataForElement(ne[ye],{outlineRestrictionOptions:{margin:D.scaledMargin},getDisplayName:function(){return D.hostService.getLocalizedString(D.isBar?"MiniToolbar_Bars":"MiniToolbar_Columns",I.series[q.seriesIndex].displayName)}})}),{newShapes:de,updatedShapes:be.merge(de).style("fill",function(q){return q.columnStyle.fillColor!==I.series[q.seriesIndex].columnStyle.fillColor||D.usesUngroupedRenderer()?q.columnStyle.fillColor:null}).attr("aria-hidden",function(q){return!!q.highlight||null}).order(),removedShapes:be.exit()}}function b(D,ee,I){return D.attrs({width:ee.width,height:ee.height,x:ee.x,y:ee.y}).styles({"fill-opacity":I?function(he){var be;return Re(he,null===(be=I.interactivityService)||void 0===be?void 0:be.hasSelection(),I.chart.activeData.hasHighlights)}:0,"stroke-opacity":I?function(he){var be;return ue.opacity(he.columnStyle.border,I.chart.style,(I.chart.activeData.hasHighlights||(null===(be=I.interactivityService)||void 0===be?void 0:be.hasSelection()))&&!he.highlight)}:0})}function W(D,ee,I,he){return D.attr("aria-selected",function(be){return be.selected}).style("fill-opacity",function(be){return Re(be,ee,I)}).style("stroke-opacity",function(be){return ue.opacity(be.columnStyle.border,he,(ee||I)&&!be.selected)})}function Z(D){var ee=this,I=this.activeData,he=this.style,be=M(this,D,I,!this.animator),de=be.updatedShapes,q=be.removedShapes;return de.interrupt(),this.interactivityService&&de.attrs({tabindex:0,focusable:!0,role:"option","aria-selected":function(ne){return ne.selected},"aria-label":function(ne){return null!=ne.value?ne.value:"null"},"data-automation-type":"column-chart-rect"}).classed(re.Pg,!Jt.M.isInternetExplorerOrEdge()),this.usesUngroupedRenderer()?de.styles({"stroke-width":function(ne){return ue.size(ne.columnStyle.border,he)},stroke:function(ne){return ue.color(ne.columnStyle.border,he)},fill:function(ne){return I.series[ne.seriesIndex].columnStyle.fillColor}}):de.styles({"stroke-width":function(ne){return ue.optimized(ue.size(ne.columnStyle.border,he),ue.size(I.series[ne.seriesIndex].columnStyle.border,he))},stroke:function(ne){return ue.optimized(ue.color(ne.columnStyle.border,he),ue.color(I.series[ne.seriesIndex].columnStyle.border,he))}}),de.styles({"stroke-dasharray":function(ne){return ue.strokePattern(ne,ee.layout,ee.isColumn,ee.valueAxis.invertAxis)},"clip-path":function(ne){return ue.rectClipPath(ne,he,!1)},"-webkit-clip-path":function(ne){return ue.rectClipPath(ne,he,!0)}}).attrs({"aria-setsize":I.dataPointsCount,"aria-posinset":function(ne){return ne.posinset}}),b(de,this.layout.shapeLayout,{chart:this,interactivityService:this.interactivityService}),q.remove(),de}function Ne(D){var Le,qe,ct,tt,De,ee=D.isBar,I=D.valueAxisProps,he=D.layout,be=D.columnWidth,de=D.interactivityService,q=this.activeData,ne=q.hasHighlights;if(void 0!==I&&(qe=_.filter(q.series,function(Ve){return Ve.uncertainty.renderUncertainty}),Le=!_.isEmpty(qe)),Le){var te,ce,Q,Y=de?.hasSelection(),O=be/2,ve=I.scale.range(),y=I.scale,E=void 0;if(ee){var X=function(Me){return he.shapeLayout.y(Me)+O-(Me.drawThinner?O/2:0)};E=function(Me){return"translate(".concat(y(Me.value),", ").concat(X(Me),")")},te=d3.line().x(he.uncertaintyLayout.lower).y(X),ce=d3.line().x(he.uncertaintyLayout.upper).y(X),Q=ve[1]<ve[0]}else{var Pe=function(Me){return he.shapeLayout.x(Me)+O-(Me.drawThinner?O/2:0)};E=function(Me){return"translate(".concat(Pe(Me),", ").concat(y(Me.value),")")},te=d3.line().x(Pe).y(he.uncertaintyLayout.lower),ce=d3.line().x(Pe).y(he.uncertaintyLayout.upper),Q=ve[1]>ve[0]}te.defined(function(Ve){var Me;return null!=(null===(Me=Ve?.uncertainty)||void 0===Me?void 0:Me.lower)&&(!ne||Ve.highlight)}),ce.defined(function(Ve){var Me;return null!=(null===(Me=Ve?.uncertainty)||void 0===Me?void 0:Me.upper)&&(!ne||Ve.highlight)});var Ge=(0,Ue.B9)(this.mainGraphicsContext);ct=(0,Ue.FZ)(Ge,qe,function(Ve){return y},E,Math.min(10,be-2),ne,Y);var p=_.filter(qe,function(Ve){return Ve.uncertainty.markers.show});if(_.isEmpty(p))Ge.selectAll(Ue.YU.selector).remove();else{var v=new B.Wo,R=this.mainGraphicsContext.selectAll("defs").data([1]).join("defs").attr("class",Ue.Ok.class),N=[];Le&&(0,Ue.iD)(p,N),v.ensureMarkers(R,N);var Fe=(0,Ue.di)(Ge,qe,ce,te,Q,v,Y,ne);tt=Ge.selectAll(Ue.E6.selector),(De=function(Me,Ee){(0,Ue.xl)(Fe,ce,te,Q,v,Me,Ee)})(Y,ne)}}else(0,Ue.OY)(this.mainGraphicsContext);return{bars:ct,markerPaths:tt,updateActiveHighlightMarkers:De}}function Se(D,ee,I,he,be){var de=!be,q=D.selectAll(Dt.L0.selector).selectAll("rect".concat(ee));q.filter(function(ne){return ne.categoryIndex===I}).interrupt().style("fill-opacity",function(ne){return re.Ko*(0,Be.TD)(ne.columnStyle.fillTransparency)});var ye=q.filter(function(ne){return(void 0===he||be||ne.categoryIndex===he)&&ne.categoryIndex!==I});(de?ye.transition():ye).style("fill-opacity",function(ne){return re.eU*(0,Be.TD)(ne.columnStyle.fillTransparency)})}function Re(D,ee,I){return(0,re.eR)(D.selected,D.highlight,ee,I,(0,Be.TD)(D.columnStyle.fillTransparency))}function le(D,ee){return(0,Be.TD)(D.fillTransparency)*(ee?re.eU:re.Ko)}function ae(D,ee){var I=this,he=this.style,be=this.scaledMargin,de=this.ribbonGapSize,q=this.layout,ye=this.mainGraphicsContext,ne=this.isColumn,Le=this.interactivityService,qe=this.hostService,ct=this.hasRibbonBands?this.activeData.series:[],tt=.7;D&&(D=null!=ee);var De=function(Q){var X=function(D,ee,I,he){var O,ve,y,E,be=D.shapeLayout,de=ee.d1,q=ee.d2,ye=be.x(de),ne=be.y(de),Le=be.width(de),qe=be.height(de),ct=be.x(q),tt=be.y(q),De=be.width(q),Y=be.height(q);if(he){var te=ye+Le+I,ce=ct-I;O={x:te,y:ne},ve={x:te,y:ne+qe},y={x:ce,y:tt},E={x:ce,y:tt+Y}}else{var Q=ne-I,X=tt+Y+I;O={x:ye,y:Q},ve={x:ye+Le,y:Q},y={x:ct,y:X},E={x:ct+De,y:X}}return{bottomLeft:O,topLeft:ve,bottomRight:y,topRight:E}}(q,Q,de,ne),Pe=d3.interpolateNumber(X.bottomLeft.x,X.bottomRight.x),Ge=d3.interpolateNumber(X.bottomLeft.y,X.bottomRight.y),p="M".concat(X.bottomLeft.x,",").concat(X.bottomLeft.y);return p+=ne?"C".concat(Pe(tt),",").concat(X.bottomLeft.y," ").concat(Pe(1-tt),",").concat(X.bottomRight.y," ").concat(X.bottomRight.x,",").concat(X.bottomRight.y):"C".concat(X.bottomLeft.x,",").concat(Ge(tt)," ").concat(X.bottomRight.x,",").concat(Ge(1-tt)," ").concat(X.bottomRight.x,",").concat(X.bottomRight.y),p+="L".concat(X.topRight.x,",").concat(X.topRight.y),Pe=d3.interpolateNumber(X.topRight.x,X.topLeft.x),Ge=d3.interpolateNumber(X.topRight.y,X.topLeft.y),(p+=ne?"C".concat(Pe(tt),",").concat(X.topRight.y," ").concat(Pe(1-tt),",").concat(X.topLeft.y," ").concat(X.topLeft.x,",").concat(X.topLeft.y):"C".concat(X.topRight.x,",").concat(Ge(tt)," ").concat(X.topLeft.x,",").concat(Ge(1-tt)," ").concat(X.topLeft.x,",").concat(X.topLeft.y))+"L".concat(X.bottomLeft.x,",").concat(X.bottomLeft.y,"Z")},Y=ye.select(xt.selector);Y.empty()&&(Y=ye.append("g").classed(xt.class,!0));var O=ye.select(ze.selector);O.empty()&&(O=ye.append("defs").classed(ze.class,!0));var ve=function(Q){return"".concat(qe.instanceId,"-").concat(Q.d1.categoryIndex,"-").concat(Q.d1.seriesIndex)},y=O.selectAll("clipPath").data(_.flatMap(ct,function(ce){var Q,X;return null!==(Q=ce.ribbonBands)&&void 0!==Q&&Q.border.strokeShow?null===(X=ce.ribbonBands)||void 0===X?void 0:X.dataPoints:[]}),ve),E=y.enter().append("clipPath").attr("id",ve);E.append("path");var te=E.merge(y).select("path");(D?te.transition().duration(ee.getDuration()):te.interrupt()).attr("d",De),y.exit().remove(),Y.selectAll(we.selector).data(ct,function(ce){return ce.key}).join(function(ce){return ce.append("g").classed(we.class,!0)}).styles({fill:function(Q){return he.isHighContrast?he.colorPalette.backgroundNeutral.value:Q.ribbonBands.fillColor},"fill-opacity":function(Q){return le(Q.ribbonBands,Le?.hasSelection())},stroke:function(Q){return ue.color(Q.ribbonBands.border,he)},"stroke-width":function(Q){return ue.size(Q.ribbonBands.border,he)},"stroke-opacity":function(Q){return ue.opacity(Q.ribbonBands.border,he,Le?.hasSelection())}}).each(function(ce,Q,X){Pt.fF.assert(function(){return void 0!==ce.ribbonBands},"ribbonBands must be defined.");var Pe=ce.ribbonBands.dataPoints;Pt.fF.assert(function(){return void 0!==Pe},"dataPoints must be defined.");var Ge=d3.select(X[Q]).selectAll(w.selector).data(Pe,function(p){var v;return null!==(v=p.d1.pairKey)&&void 0!==v?v:p.d1.key}).join(function(p){return p.append("path").classed(w.class,!0)}).style("clip-path",function(p){return ce.ribbonBands.border.strokeShow&&!he.isHighContrast?"url(#".concat(ve(p),")"):null});I.featureSwitches.onObject&&Ge.classed(Ze.cy,!0).attr(Ze.Ez,"ribbon").attr(Ze.QZ,3).each(function(){Ze.O5.setDataForElement(this,{outlineRestrictionOptions:{margin:be},getDisplayName:function(){return qe.getLocalizedString("MiniToolbar_Ribbon",ce.displayName)},getRegionOutlines:function(){return[]}})}),(D?Ge.transition().duration(ee.getDuration()):Ge.interrupt()).attr("d",De)})}},38859:function(vi,ma,x){"use strict";x.d(ma,{$3:function(){return qe},C3:function(){return ce},Ds:function(){return Q},E5:function(){return he},EX:function(){return ct},G1:function(){return E},HQ:function(){return ae},L0:function(){return W},L2:function(){return y},Q4:function(){return ne},V5:function(){return Ge},VY:function(){return ve},_f:function(){return ee},bS:function(){return q},e3:function(){return te},fX:function(){return D},fl:function(){return le},hg:function(){return X},iR:function(){return j},jL:function(){return be},nD:function(){return I},nO:function(){return de},o9:function(){return ye},t3:function(){return Pe}});var d=x(44783),B=x(79154),re=x(62458),Ze=x(41640),Ue=x(32041),Wt=x(43286),aa=x(72489),jt=x(22733),Jt=x(90120),Pt=x(46769),Be=x(21181),Vt=x(18664),ft=x(12198),Dt=x(44196),Mt=x(77558),U=x(20624),dt=x(382),xt=x(56707),ze=x(34519),we=x(45028),w=x(33948),me=x(93907),ot=x(63892),ge=x(47316),Qe=x(34969),ue=x(5381),M=[dt.h.auto,dt.h.outsideEnd,dt.h.insideEnd,dt.h.insideCenter,dt.h.insideBase],b=[dt.h.auto,dt.h.insideCenter,dt.h.insideEnd,dt.h.insideBase],W=(0,B.CH)("series"),Z=[16,4,1,2],Ne=[1,4,2],Se=[16],Re=4,j=[0,1],le=0,ae={seriesOrderReversed:!1,seriesOrderSorted:!1,stackedGapSize:0,stackedGapExplodes:!1,clusteredGapSize:0,clusteredGapOverlaps:!1,clusteredGapOverlapReverse:!1,ribbonGapSize:0},D=0,ee=10,I=5,he=75,be=100;function de(v){return{strokeShow:!1,strokeColorMatch:!1,strokeTransparency:0,strokeWidth:1,strokeColor:Jt.v.getThemeColor(v,"foregroundNeutralSecondaryAlt"),strokePattern:ge.Dv.solid,outlineOnly:!1}}function q(v){return{fillMatchColor:!0,fillColor:Jt.v.getThemeColor(v,"backgroundNeutral"),fillTransparency:30,border:de(v)}}function ye(v,R){if(R.stackedGapExplodes&&R.stackedGapSize>0){re.fF.assert(function(){return R.stackedGapExplodeStepSize>0},"stackedGapExplodeStepSize must be pre-computed via the converter.");var N=v.indexFromZeroValue*(v.value<0?-1:1)*R.stackedGapExplodeStepSize;v.position+=N,v.originalPosition+=N}}function ne(v){var N,R=this,Fe=this.activeData;if(re.fF.assertValue(Fe,"createLabelDataPoints this.activeData must be set"),null===(N=Fe.dataLabelsSettings)||void 0===N||!N.show)return[];var Ve=Fe.series,Me=(0,Be.fI)(),Ee=Ve.map(function(Ye){var et=Ye.labelSettings?Ye.labelSettings:Fe.dataLabelsSettings;if(!et.show)return{labelDataPoints:[],maxNumberOfLabels:0};var Ot=100!==et.labelDensity&&Fe.isScalar?(0,ue.SS)(R.availableWidth,et.labelDensity,Re,ft.v.estimatedLabelWidth):Ye.data.length;return{labelDataPoints:Ye.data.filter(function(pt){return!(null==pt||null==pt.value||Fe.hasHighlights&&!pt.highlight)}).map(function(pt){var Lt=Le.call(R,pt,et,Me,v,Ye);return pt.labelDataPointContainerEnabled?(0,ze.U)({cartesianDataPoint:pt,currentAxisProperties:R.valueAxis,currentSeries:Ye,enableValueDataLabel:et.enableValueDataLabel,formattersCache:Me,isStacked100:R.isStacked100,labelDataPoint:Lt,percentOfTotal:pt.value,seriesName:Ye.displayName,valueDataLabelSettings:et,valueShowBlankAs:et.showBlankAs,getOutsideLabelFill:function(Et){return(0,w.j)(Et.labelFill,!1,R.isComboChart,v)},getInsideLabelFill:function(Et){return(0,w.j)(Et.labelFill,!0,R.isComboChart,v)}}):Lt}),maxNumberOfLabels:Ot}});return Fe.isScalar?new ft.v(Ee,Ve,{width:this.availableWidth,height:this.availableHeight},this.valueAxis.scale).getSortedDataLabels():Ee}function Le(v,R,N,Fe,Ve){var Me,Ee;R?.displayUnits===xt.In&&(R.precision=void 0);var Ye=(0,ue.d6)(this.valueAxis,R);if(null!==(Me=v.dynamicLabelValue)&&void 0!==Me&&Me.enabled)Ee=(0,Pt.nU)(v.dynamicLabelValue,N,R,Ye,Ve,"Value"),!this.featureSwitches.labelEnhancementsM0&&this.featureSwitches.measureDrivenDataLabels&&""===Ee&&(Ee=void 0);else{var et=R?.displayUnits===xt.In?R.valueCustomFormatString:void 0,lt=(0,Wt.yE)(this.columnChartType,48)&&!this.featureSwitches.labelEnhancementsM0?xt.L0:et??v.labelFormatString,Ot=N.getOrCreate(lt,R,Ye.units,Ye.getPrecision(!!lt,Ve.type)),st=v.value;this.isStacked100&&this.featureSwitches.labelEnhancementsM0&&(st=v.originalValue),Ee=(0,ue.Bw)(Ot.format(st))}var Ft,Qt,pt=R.fontProperties,Lt=(0,Vt.qk)(pt,Ee),ra=Ue.b.measureSvgTextWidth(Lt),Et=Ue.b.estimateSvgTextHeight(Lt,!0);return Ft=this.isClusteredOptimized?function(v){switch(v){case dt.h.insideEnd:return[4];case dt.h.insideCenter:return[1];case dt.h.insideBase:return[2];case dt.h.outsideEnd:return[16];default:return Z}}(R.position):function(v){switch(v){case dt.h.insideEnd:return[4];case dt.h.insideBase:return[2];case dt.h.insideCenter:return[1];default:return Ne}}(R.position),R.labelOverflow&&(Ft=function(v){var R=void 0,Fe=_.map(v,function(Ve){return function(Me){switch(Me){case 4:return 128;case 2:return 64;case 1:return 32;default:return R}}(Ve)}).filter(function(Ve){return Ve!==R});return v.concat(Fe)}(Ft)),Qt=this.isBar?v.value>=0?this.valueAxis.invertAxis?4:3:this.valueAxis.invertAxis?3:4:v.value>=0?this.valueAxis.invertAxis?2:1:this.valueAxis.invertAxis?1:2,{isPreferred:!1,text:Ee,textSize:{width:ra,height:Et},outsideFill:(0,w.j)(v.labelFill,!1,this.isComboChart,Fe),insideFill:(0,w.j)(v.labelFill,!0,this.isComboChart,Fe),parentType:1,parentShape:{rect:{left:this.layout.shapeLayout.x(v),top:this.layout.shapeLayout.y(v),width:this.layout.shapeLayout.width(v),height:this.layout.shapeLayout.height(v)},orientation:Qt,validPositions:Ft},identity:v.identity,fontProperties:pt,hasBackground:R.enableBackground,backgroundColor:R.backgroundColor,backgroundTransparency:R.backgroundTransparency,transparency:R.transparency}}function qe(v){var N,R=this,Fe=this.activeData;if(re.fF.assertValue(Fe,"createTotalLabelDataPoints this.activeData must be set"),!this.isStackedOptimized||null===(N=Fe.totalLabelsSettings)||void 0===N||!N.show||this.isStacked100)return[];for(var Ve=(0,Qe.GN)(Fe.valuesMetadata),Me=(0,aa.EO)(Ve,jt.p.general.formatString),Ee=(0,Be.fI)(),Ye=this.layout.shapeLayout,et=Fe.totalLabelsSettings,lt=(0,ue.d6)(this.valueAxis,et),Ot=[],st=function(Et,Ft,Qt){if(0!==Et){var oa=Fe.totals[Ft],Wa=Ee.getOrCreate(oa.dynamicFormatString||Me,et,lt.units,et.precision),Ea=(0,ue.Bw)(Wa.format(Et)),Pa=et.fontProperties,Rt=(0,Vt.qk)(Pa,Ea),ia=et.showPositiveAndNegative?Et:Et>0?oa.positive:oa.negative,Ca={value:ia,position:ia<0?0:ia,valueAbsolute:Math.abs(ia),categoryIndex:oa.categoryIndex,categoryValue:oa.categoryValue,labelSettings:void 0,columnStyle:{fillColor:void 0,fillTransparency:0,border:de(v)},originalValue:void 0,originalPosition:void 0,key:void 0,seriesIndex:void 0,selected:void 0,identity:void 0,labelDataPointContainerEnabled:!1,indexFromZeroValue:R.data.layout.stackedGapExplodes?(Et>0?oa.positiveCount:oa.negativeCount)-1:0};ye(Ca,R.data.layout),Ot.push({isPreferred:!1,text:Ea,textSize:{width:Ue.b.measureSvgTextWidth(Rt),height:Ue.b.estimateSvgTextHeight(Rt,!0)},outsideFill:(0,w.j)(oa?.labelFill,!1,R.isComboChart,v),insideFill:(0,w.j)(oa?.labelFill,!0,R.isComboChart,v),parentType:1,parentShape:{rect:{left:Ye.x(Ca),top:Ye.y(Ca),width:Ye.width(Ca),height:Ye.height(Ca)},orientation:R.isBar?Et>=0?Qt?4:3:Qt?3:4:Et>=0?Qt?2:1:Qt?1:2,validPositions:Se},identity:void 0,fontProperties:Pa,hasBackground:et.enableBackground,backgroundColor:et.backgroundColor,backgroundTransparency:et.backgroundTransparency,isTotal:!0})}},pt=0;pt<Fe.totals.length;pt++){var Lt=Fe.totals[pt];Lt&&(Fe.totalLabelsSettings.showPositiveAndNegative?(st(Lt.positive,pt,this.valueAxis.invertAxis),st(Lt.negative,pt,this.valueAxis.invertAxis)):st(Lt.net,pt,this.valueAxis.invertAxis))}return[{labelDataPoints:Ot,maxNumberOfLabels:2*Fe.totals.length,isTotal:!0}]}function ct(v){var R=this,N=this.activeData;if(re.fF.assertValue(N,"createUncertaintyLabels this.activeData must be set"),this.isStackedOptimized||_.isEmpty(_.filter(this.activeData.series,function(et){var lt;return null===(lt=et.uncertainty)||void 0===lt?void 0:lt.labels.show})))return[];var Fe=(0,Be.fI)(),Ve=this.layout.shapeLayout,Me=this.layout.uncertaintyLayout,Ee=this.columnWidth/2,Ye=Ee/2;return N.series.map(function(et){var lt=et.uncertainty;if(!lt||!lt.renderUncertainty||!lt.labels.show)return{labelDataPoints:[],maxNumberOfLabels:0};var Ot=lt.labels,pt=Ot.fontProperties,Lt=(0,ue.d6)(R.valueAxis,Ot),ra=[];return et.data.forEach(function(Et){if(null!=Et&&null!=Et.value&&(!N.hasHighlights||Et.highlight)&&null!=Et.uncertainty){for(var Ft=[],Qt=(0,Dt.Ww)(Et.value,Et.uncertainty,Ot.errorFormat),oa=[Qt.lower,Qt.upper],Wa=0;Wa<2;Wa++){var Ea=oa[Wa],Pa=1===Wa;if(null!=(Pa?Et.uncertainty.upper:Et.uncertainty.lower)){var ia=void 0;if(Ot.errorFormat===Mt.K.relativePercentage)ia=(0,Dt.O2)(Ea,R.hostService);else{var Ca=Et.labelFormatString,Ma=Fe.getOrCreate(Ca,Ot,Lt.units,Lt.getPrecision(!!Ca,et.type));ia=(0,ue.Bw)(Ma.format(Ea))}re.fF.assertValue(ia,"label has no value -- columnUtil.createUncertaintyLabels");var ca=(0,Vt.qk)(pt,ia),se=void 0,He=void 0;R.isBar?(se={x:Pa?Me.upper(Et):Me.lower(Et),y:Ve.y(Et)+(Et.drawThinner?Ye:Ee)},He=[Pa?8:4]):(se={x:Ve.x(Et)+(Et.drawThinner?Ye:Ee),y:Pa?Me.upper(Et):Me.lower(Et)},He=[Pa?1:2]),Ft.push({isPreferred:!1,text:ia,textSize:{width:Ue.b.measureSvgTextWidth(ca)+xt.TS,height:Ue.b.estimateSvgTextHeight(ca,!0)},outsideFill:pt.color?pt.color:Jt.v.getThemeColor(v,xt.uQ),insideFill:pt.color?pt.color:Jt.v.getThemeColor(v,xt.pl),parentType:0,parentShape:{point:se,radius:0,validPositions:He},identity:void 0,fontProperties:pt,hasBackground:Ot.enableBackground,backgroundColor:Ot.backgroundColor,backgroundTransparency:Ot.backgroundTransparency})}}_.isEmpty(Ft)||ra.push.apply(ra,Ft)}}),{labelDataPoints:ra,maxNumberOfLabels:100}})}var O=1e-4;function ve(v,R){if(0===v.length)return{min:0,max:10};var Fe=d3.min(v,function(Me){return d3.min(Me.data,function(Ee){return Ee.position-Ee.valueAbsolute})}),Ve=d3.max(v,function(Me){return d3.max(Me.data,function(Ee){return Ee.position})});return R&&(Fe=(0,Ze.W0)(Fe,O),Ve=(0,Ze.W0)(Ve,O)),{min:Fe,max:Ve}}function y(v,R,N,Fe,Ve){void 0===N&&(N=!1);var Me=(0,Be.bT)({style:v,textClassName:"smallLightLabel",noColor:!0});return Me.position=null,Me.labelDensity=xt.go,Me.labelOrientation=U.B.Horizontal,N?(Me.enableBackground=!0,Me.backgroundColor=Jt.v.getThemeColor(v,d.U),Me.backgroundTransparency=xt.r_):Me.enableBackground=!1,Me.enableTitleDataLabel=!1,R?(Me.enableValueDataLabel=!1,Me.enableDetailDataLabel=!0,Me.detailContentType=me.W.Percent):(Me.enableValueDataLabel=!0,Me.enableDetailDataLabel=!1),Me.labelContainerMaxWidth=we.w9,Me.labelContentLayout=function(v,R){return v&&!X(v)&&(Ge(v)||ce(v,R)||Q(v))||Pe(v)?ot.v.MultiLine:ot.v.SingleLine}(Fe,Ve),Me}function E(v,R){return!ce(v,R)}function te(v,R){return E(v,R)?M:b}function ce(v,R){return(0,Wt.yE)(v,16)&&(1!==R||Q(v))}function Q(v){return(0,Wt.yE)(v,48)}function X(v){return(0,Wt.yE)(v,2)}function Pe(v){return(0,Wt.yE)(v,4)}function Ge(v){return(0,Wt.yE)(v,8)}},88439:function(vi,ma,x){"use strict";x.d(ma,{GJ:function(){return Jt},on:function(){return jt},pD:function(){return b}});var d=x(81337),B=x(84741),re=x(61617),Ze=x(62458),Ue=x(56578),Wt=x(32379),aa=[[B.rJ.y,B.rJ.tooltips],[B.rJ.y2]];function jt(){return aa}function Jt(j,le,ae){if(0===j.length)return[];var D,ee,I;switch(le){case 13:case 14:D=[4,0],ee=4;break;default:Ze.fF.assertFail("There is no support to merge formatting cards for this chart type (enum): ".concat(le))}if(I=function(j,le){if(0!==le.length){var ae={};j.forEach(function(de){ae[de.type]=de.card});for(var D=[],ee=function(q){ae[q]&&ae[q].forEach(function(ye){return D.push({card:ye,type:q})})},I=0,he=le;I<he.length;I++)ee(he[I]);return D}}(j,D),0===I.length)return[];for(var he={},be=0,de=I;be<de.length;be++){var q=de[be],ye=q.card;he[ye.uid]=he[ye.uid]?{card:Be(he[ye.uid].card,ye,he[ye.uid].type,q.type,ae,ee),type:q.type}:{card:ye,type:q.type}}for(var ne=[],Le=0,qe=_.values(he);Le<qe.length;Le++)ne.push(qe[Le].card);return ne}function Be(j,le,ae,D,ee,I){var he=I===D?le.topLevelToggle:j.topLevelToggle,be=(0,d.__assign)((0,d.__assign)({},j),{topLevelToggle:he}),de={};le.groups.forEach(function(tt){de[tt.uid]=tt}),j.groups.forEach(function(tt,De){if((0,Ue.Qu)(tt))Ze.fF.assertFail("Unsupported placeholder");else{var Y=de[tt.uid];Y&&(be.groups[De]=Vt(tt,Y,ae,D,ee,"errorBars"===j.uid),delete de[tt.uid])}});for(var q=0,ye=le.groups;q<ye.length;q++){var ne=ye[q];if((0,Ue.Qu)(ne))return void Ze.fF.assertFail("Unsupported placeholder");var Le=de[ne.uid];Le&&be.groups.push(Le)}var qe=_.unionWith(j.revertToDefaultDescriptors,le.revertToDefaultDescriptors,_.isEqual),ct=B.OA;return be.revertToDefaultDescriptors=qe.filter(function(tt){return ct[tt.objectName]&&ct[tt.objectName][tt.propertyName]}),be}function Vt(j,le,ae,D,ee,I){var he=(0,d.__assign)({},le),be=j.slices;Ze.fF.assert(function(){return!be||be.every(function(q){return!(0,Ue.Qu)(q)})},"Unexpected placeholder");var de=le.slices;return Ze.fF.assert(function(){return!de||de.every(function(q){return!(0,Ue.Qu)(q)})},"Unexpected placeholder"),he.slices=U(be,de,ae,D,ee),he.container=j.container&&le.container?function(j,le,ae,D,ee,I){var he,be=(0,d.__assign)({},le);be.containerItems=[];var de=(0,d.__spreadArray)([],j.containerItems,!0),q=(0,d.__spreadArray)([],le.containerItems,!0);if(I)(he=be.containerItems).push.apply(he,(0,d.__spreadArray)((0,d.__spreadArray)([],q,!1),de,!1));else{var ye=void 0;Ze.fF.assert(function(){return de[0].displayName===q[0].displayName},"Trying to create a template from formattingContainerItems from items that are not equal"),j.containerItems.length>0&&le.containerItems.length>0&&(ye=function(j,le,ae,D,ee){var I=(0,d.__assign)((0,d.__assign)({},le),{groups:[],slices:[]}),he={};le.groups.forEach(function(ye){he[ye.uid]=ye}),j.groups.forEach(function(ye,ne){var Le=he[ye.uid];Le?(I.groups[ne]=Vt(ye,Le,ae,D,ee),delete he[ye.uid]):I.groups[ne]=ye});for(var be=0,de=le.groups;be<de.length;be++){var q=de[be];he[q.uid]&&I.groups.push(he[q.uid])}return I.slices=U(j.slices,le.slices,ae,D,ee),I}(de.shift(),q.shift(),ae,D,ee)),be.containerItems.push(ye);for(var ne=[],Le=0,qe=de;Le<qe.length;Le++)ne.push({containerItem:qe[Le],layerType:ae});for(var tt=0,De=q;tt<De.length;tt++)ne.push({containerItem:De[tt],layerType:D});for(var O=0,ve=ne;O<ve.length;O++){var y=ve[O];be.containerItems.push(ze(ye,y.containerItem,y.layerType))}}return be}(j.container,le.container,ae,D,ee,I):j.container||le.container,he}function Dt(j){return _.findIndex(j,function(le){return!(0,Ue.IW)(le)&&function(j){var le=B.OA.labels.labelDensity,ae=j.control.properties.descriptor;return ae.objectName===le.objectName&&ae.propertyName===le.propertyName}(le)})}function U(j,le,ae,D,ee){var I=[],he=Dt(j),be=j[he],de=Dt(le),q=le[de];be&&q&&(j=j.filter(function(O,ve){return!(0,Ue.IW)(O)&&ve!==he}),le=le.filter(function(O,ve){return!(0,Ue.IW)(O)&&ve!==de}));var ye=B.OA,ne={};le.forEach(function(O){M(O,ye)&&(ne[(0,re.zU)(O,!1)]=O)}),j.forEach(function(O){if(M(O,ye)){var ve=ne[(0,re.zU)(O,!1)],y=O.displayName;if(function(j,le){return!(!le||le.control.type!==j.control.type||!function(j,le){if(!(0,Ue.IW)(j)&&!(0,Ue.IW)(le)){var ae=j.control.properties.descriptor,D=le.control.properties.descriptor;if(_.isEqual(_.omit(D,["selector","instanceKind"]),_.omit(ae,["selector","instanceKind"]))){if(Wt.fS(D.selector,ae.selector))return!0;var he=void 0;if(null==D.selector&&(he=Wt.N6(ae.selector)),null==ae.selector&&(he=Wt.N6(D.selector)),he)return function(j,le){var ae,D=j.control.properties.descriptor,ee=le.control.properties.descriptor;D.instanceKind|=ee.instanceKind,null!==(ae=D.selector)&&void 0!==ae||(D.selector=ee.selector)}(j,le),!0}return!1}return!0}(j,le))&&("Dropdown"!==le.control.type||!!ge(le.control.properties,j.control.properties))}(O,ve)){if((0,Ue.IW)(O)&&(0,Ue.IW)(ve))for(var E in O.control.properties){var te=O.control.properties[E],ce=ve.control.properties[E];te&&ce&&_.isEqual(te.descriptor,ce.descriptor)&&(te.value=ce.value)}else O.control.properties.value=ve.control.properties.value;delete ne[(0,re.zU)(ve,!1)]}else y=Z(O.uid,ae,ee);I.push((0,d.__assign)((0,d.__assign)({},O),{displayName:y}))}});for(var Le=0,qe=le;Le<qe.length;Le++){var ct=qe[Le],tt=ne[(0,re.zU)(ct,!1)],De=Qe(ct.uid,D);if(tt){var Y=Z(tt.uid,D,ee);I.push((0,d.__assign)((0,d.__assign)({},tt),{displayName:Y,uid:De}))}}return be&&q&&function(j,le,ae,D){j.control.properties.value=le.control.properties.value;var ee=D("Visual_LabelDensity");ae.push((0,d.__assign)((0,d.__assign)({},j),{displayName:ee}))}(be,q,I,ee),I}function ze(j,le,ae){var D=(0,d.__assign)({},le),ee={};return le.groups.forEach(function(I){ee[Ue.SS.getGroupUid(I.uid)]=I}),Ze.fF.assert(function(){return j.groups.length<=le.groups.length},"template container item has more groups than created container item"),j.groups.forEach(function(I,he){var be=Ue.SS.getGroupUid(I.uid);if(ee[be]){var de={};ee[be].slices.forEach(function(q){de[Ue.IN.getGroupAndSliceUid(q.uid)]=q}),D.groups[he].slices=[],I.slices.forEach(function(q){if((0,Ue.Qu)(q))Ze.fF.assertFail("Unsupported placeholder");else{var ye=Ue.IN.getGroupAndSliceUid(q.uid),ne=de[ye];if(ne||(ne=de[function(j,le){return j.replace("__".concat(le,"__"),"")}(ye,ae)]),ne)if("Dropdown"===ne.control.type&&"Dropdown"===q.control.type)if(ge(ne.control.properties,q.control.properties))ne.displayName=q.displayName,D.groups[he].slices.push(ne);else{var ct=D.groups[he].uid;D.groups[he].slices.push((0,d.__assign)((0,d.__assign)({},q),{uid:"".concat(ct).concat(q.uid),displayName:q.displayName,disabled:!0}))}else ne.displayName=q.displayName,D.groups[he].slices.push(ne);else ct=D.groups[he].uid,D.groups[he].slices.push((0,d.__assign)((0,d.__assign)({},q),{uid:"".concat(ct).concat(q.uid),displayName:q.displayName,disabled:!0}))}})}}),D}function ot(j){return void 0===j.items}function ge(j,le){return!(!ot(j)||!ot(le))&&_.isEqual(j.filterValues,le.filterValues)}function Qe(j,le){return"".concat(j,"__").concat(le,"__")}function M(j,le){if((0,Ue.IW)(j)){var ae=j.control.properties;return!!ae&&Object.keys(ae).every(function(ee){var I=ae[ee],he=I?.descriptor;return!he||!!(he&&le[he.objectName]&&le[he.objectName][he.propertyName])})}var D=j.control.properties.descriptor;return!!(D&&le[D.objectName]&&le[D.objectName][D.propertyName])}function b(j,le){var ae=[];switch(le){case 13:case 14:ae=["bars","lines","shadeArea","layout","markers","labels","seriesLabels","totals","errorBars"]}return function(j,le){if(0===le.length)return j;var ae={};j.forEach(function(be){ae[be.uid]=be});for(var D=[],ee=0,I=le;ee<I.length;ee++){var he=I[ee];ae[he]&&D.push(ae[he])}return D}(j,ae)}function Z(j,le,ae){var I="Visual_Slice_Placeholder_"+function(j){for(var ae=0,D=Array.from(Ne.entries());ae<D.length;ae++){var ee=D[ae],he=ee[1];if(ee[0].includes(j))return he}return j}(Ue.IN.getSliceUid(j));return ae(I,function(j,le){switch(j){case 4:return le("DisplayName_QuickCalc_PercentOfColumnTotal");case 0:return le("Visual_Slice_PlaceholderChartType_Line");default:Ze.fF.assertFail("There is not support for merging this chart layer type for formattingCards yet")}}(le,ae))}var Ne=new Map([[["detailLabelDisplayUnits","detailDisplayUnits","titleLabelDisplayUnits"],"displayUnits"],[["detailLabelPrecision","titleLabelPrecision"],"precision"]])},54365:function(vi,ma,x){"use strict";x.d(ma,{p:function(){return Mt}});var d=x(81337),B=x(53197),re=x(62458),Ze=x(45034),Ue=x(6754),Wt=x(78843),aa=x(61289),jt=x(82386),Jt=x(72489),Pt=x(94419),Be=x(88439),Vt=function(){function ze(){}return ze.prototype.ensureValueGroupAtSeriesIndex=function(we,w,me){if(!we[w]){var ot=this.getValueGroupName(me),ge={identity:this.getSeriesIdentity(me),values:[],objects:this.getSeriesObjects(me),name:ot};we[w]=ge}return we[w]},ze}(),ft=function(ze){function we(w){var me=ze.call(this)||this;return me.matrix=w,me}return(0,d.__extends)(we,ze),we.prototype.setSource=function(w){w.source=this.matrix.columns.levels[0].sources[0]},we.prototype.getSeriesGroups=function(w,me){return w&&_.map(w,function(ot){return _.isEmpty(ot.children)?1:ot.children.length})},we.prototype.getSeriesDataPoints=function(w){return _.filter(this.matrix.columns.root.children,function(ot){return!ot.isSubtotal})},we.prototype.getValueGroupName=function(w){return w.value||w.levelValues&&w.levelValues[0].value},we.prototype.getSeriesObjects=function(w){return w.objects},we.prototype.getSeriesIdentity=function(w){return w.identity},we.prototype.getSeriesSourceColumn=function(w,me){return void 0===me&&(me=null),_.create(w,{groupName:me})},we.prototype.createValueColumnForMeasure=function(w,me,ot,ge,Qe){if(!me[Qe]){var ue={identity:this.getSeriesIdentity(w),values:[],source:this.getSeriesSourceColumn(ot,ge),objects:void 0};me[Qe]=ue}return me[Qe]},we}(Vt),Dt=function(ze){function we(w){return ze.call(this)||this}return(0,d.__extends)(we,ze),we.prototype.setSource=function(w){},we.prototype.getSeriesGroups=function(w,me){return me?[me]:[]},we.prototype.getSeriesDataPoints=function(w){return w},we.prototype.getValueGroupName=function(w){return w.displayName},we.prototype.getSeriesObjects=function(w){return w.objects},we.prototype.getSeriesIdentity=function(w){},we.prototype.getSeriesSourceColumn=function(w,me){return w},we.prototype.createValueColumnForMeasure=function(w,me,ot,ge,Qe){if(!me[Qe]){var ue={identity:this.getSeriesIdentity(w),values:[],source:this.getSeriesSourceColumn(ot,ge),objects:[]};me[Qe]=ue}return me[Qe]},we}(Vt),Mt=function(){function ze(we,w){var me=this;this.sourceDataView=we,this.formatStringPropId=w,re.fF.assert(function(){return we&&we.metadata&&!!we.matrix},"sourceDataView && sourceDataView.metadata && !!sourceDataView.matrix"),this.matrix=we.matrix,this.hasRowChildren=!_.isEmpty(this.matrix.rows.root.children),this.hasColChildren=!_.isEmpty(this.matrix.columns.root.children),this.hasSeries=this.hasColChildren&&!_.isEmpty(this.matrix.columns.levels)&&_.every(this.matrix.columns.levels[0].sources,function(ge){return!ge.isMeasure}),this.hasCategories=this.matrix.rows.levels.length>1&&this.hasRowChildren,this.objects=we.metadata.objects,this.frameCount=function(ze){return ze.rows.root.children?_.filter(ze.rows.root.children,function(we){return!we.isSubtotal}).length:0}(this.matrix),this._frameDisplayNames=new Ze.o(function(){return me.getDisplayNameFromAllFrames()})}return ze.create=function(we,w){return new ze(we,w)},ze.prototype.getObjects=function(){return this.objects},ze.prototype.getFrameDisplayNames=function(){return this._frameDisplayNames.getValue()},ze.prototype.hasFrames=function(){return this.matrix&&this.frameCount>0&&!_.isEmpty(this.matrix.rows.levels)&&!!this.getFrameSourceColumns()},ze.prototype.getFrameCount=function(){return this.frameCount},ze.prototype.getFrameSourceColumns=function(){return this.matrix.rows.levels[0].sources},ze.prototype.getFrameNode=function(we){return this.matrix.rows.root.children[we]},ze.prototype.getValueSources=function(we){return we?(0,jt.vC)(this.matrix.rows.levels[this.hasCategories?1:0]):this.matrix.valueSources},ze.prototype.buildCategoricals=function(we,w,me,ot,ge){var Qe=this,M=this.matrix.rows.root.children[we];re.fF.assert(function(){return!M.isSubtotal},"frame node should not be subtotal");var b=[];ge.forEach(function(ee,I){b[I]={shouldReadScopedValues:!ee&&Qe.hasSeries}});var W=ge.map(function(ee){return Qe.hasSeries&&ee?new ft(Qe.matrix):new Dt(Qe.matrix)});b.forEach(function(ee){ee.allValueSources=Qe.getValueSources(ee.shouldReadScopedValues)});for(var Z=0;Z<W.length;Z++){var Ne=this.findUniqueFilteredValueSourcesAndIndices(b[Z].allValueSources,ot&&ot[Z]),Se=Ne[0],Re=Ne[1];b[Z].requiredValueSources=Se,b[Z].requiredValueSourcesIndices=Re,W[Z].setSource(w[Z].values);var j=W[Z].getSeriesDataPoints(Se);b[Z].seriesNodes=j;var le=W[Z].getSeriesGroups(j,Re.length);b[Z].seriesGroups=le,b[Z].valueGroups=Array(le.length)}(0,jt.y9)(this.hasCategories?M.children:[M],function(ee,I,he){var be;if(!ee.isSubtotal){Qe.hasCategories&&function(ze,we){re.fF.assertNonEmpty(ze,"sourceCategoryHierarchicalGroupNodes"),re.fF.assertNonEmpty(we,"destinationCategories"),re.fF.assert(function(){return _.every(ze,function(Z){return 1===Z.levelValues.length})&&ze.length===we.length||1===ze.length&&ze[0].levelValues.length===we.length},"pre-condition: there should be one category column per matrix row level/level source for Category.");var me,ot,w=_.last(ze).objects,ge=ze[0];if(ze.length>1){(ot=new Array(ze.length))[0]=ge.levelValues[0].value;for(var Qe=ge.identity.expr,ue=1,M=ze.length;ue<M;ue++)ot[ue]=(ge=ze[ue]).levelValues[0].value,Qe=(0,Pt.xD)(Qe,ge.identity.expr);me=(0,Wt.TZ)(Qe)}else me=ge.identity,ot=_.map(ge.levelValues,function(Z){return Z.value});for(var b=0,W=we.length;b<W;b++)we[b].identity.push(me),we[b].objects.push(w),we[b].values.push(ot[b])}(he,me);for(var de=b.map(function(y){return y.shouldReadScopedValues?(0,jt.Lr)(ee):ee.values}),q=0;q<b.length;q++)for(var ye=b[q],ne=0;ne<ye.seriesGroups.length;ne++){for(var Le=ye.seriesNodes&&ye.seriesNodes[ne],qe=ye.seriesGroups[ne],ct=W[q].ensureValueGroupAtSeriesIndex(ye.valueGroups,ne,Le),tt=[],De=0;De<qe;De++){var Y=ne*qe+De,O=W[q].createValueColumnForMeasure(Le,w[q].values,ye.requiredValueSources[ye.shouldReadScopedValues?Y:De],ct.name,Y);Qe.hasSeries||(Y=ye.requiredValueSourcesIndices[Y]);var ve=null===(be=de?.[q])||void 0===be?void 0:be[Y];_.isEmpty(ye.requiredValueSources)||Qe.readValues(ve,O,I),tt.push(O)}ct.values=tt}}});var D=this.hasSeries&&this.hasCategories&&_.isEmpty(b.filter(function(ee){return!_.isEmpty(ee.requiredValueSources)}));for(Z=0;Z<w.length;Z++)(0,Ue.PO)(w[Z].values,b[Z].valueGroups),_.isEmpty(b[Z].requiredValueSources)&&(ge[Z]?D||(w[Z].values=void 0):w[Z]=void 0)},ze.prototype.findUniqueFilteredValueSourcesAndIndices=function(we,w){if(_.isEmpty(we))return[[],[]];for(var me=[],ot=[],ge={},Qe=function(b){var W=we[b];if(!_.isEmpty(w)&&!_.some(w,function(Z){return W.roles[Z]})||ge[W.queryName])return"continue";me.push(b),ot.push(W),ge[W.queryName]=!0},ue=0;ue<we.length;ue++)Qe(ue);return[ot,me]},ze.prototype.readCategories=function(){var we=this.matrix.rows;if(re.fF.assert(function(){return we.levels.length<=1||2===we.levels.length&&we.levels[1].sources.length>=1||we.levels.length>=2&&_.every(we.levels,function(me){return 1===me.sources.length})},"Incorrect Levels/Sources count."),this.hasCategories){var w=[];return this.fillCategoriesMetadata(w),w}},ze.prototype.fillCategoriesMetadata=function(we){var w=this;re.fF.assert(function(){return w.hasCategories},"No categories");for(var me=this.matrix.rows.levels,ot=1;ot<me.length;ot++)for(var ge=0,Qe=me[ot].sources;ge<Qe.length;ge++)we.push({source:Qe[ge],values:[],identity:[],objects:[]})},ze.prototype.convertComboFrame=function(we){var w=(0,Be.on)();return this.convertFrameInternal(we,w)},ze.prototype.createEmptyCategorical=function(we){var w;return(w=we.values).push.apply(w,function(ze){return _.isEmpty(ze)?[]:_.map(ze,function(we){return{identity:void 0,values:[],source:we,objects:[]}})}(this.matrix.valueSources)||[]),{metadata:this.sourceDataView.metadata,categorical:we}},ze.prototype.convertFrame=function(we){return this.convertFrameInternal(we)[0]},ze.prototype.checkValueRolesInList=function(we,w){for(var me=function(b){if(_.some(we,function(W){return b.roles[W]}))return{value:!0}},ot=0,ge=w;ot<ge.length;ot++){var ue=me(ge[ot]);if("object"==typeof ue)return ue.value}return!1},ze.prototype.validateValueRoles=function(we){if(!_.isEmpty(we)){var w=this.checkValueRolesInList(we,this.matrix.valueSources),me=this.getValueSources(!0),ot=me&&this.checkValueRolesInList(we,me);re.fF.assert(function(){return!(w&&ot)},"valueRoles cannot exist in both")}},ze.prototype.isForColumnValues=function(we){var w=(0,Be.on)()[0];return _.isEmpty(we)||_.intersection(we,w).length>0},ze.prototype.convertFrameInternal=function(we,w){var me=this,ot=[],ge=this.matrix,Qe=[];_.isEmpty(w)?Qe.push(!0):w.forEach(function(le){me.validateValueRoles(le),Qe.push(me.isForColumnValues(le))}),re.fF.assert(function(){var le;return _.size(null===(le=ge?.rows)||void 0===le?void 0:le.levels)>=1},"matrix should have at least one level for Play fields");for(var ue=[],M=_.isEmpty(w)?1:w.length,b=0;b<M;b++)ue.push({categories:void 0,values:(0,aa.Yv)()});if(!this.hasCategories){var W=[],Z=!0;for(b=0;b<ue.length;b++)if(Qe[b]){if(!_.isEmpty(ge.valueSources)&&this.hasRowChildren){Z=!1;break}(this.hasSeries||1===ue.length)&&(W[b]=this.createEmptyCategorical(ue[b]))}else if(!_.isEmpty(this.getValueSources(this.hasSeries))){Z=!1;break}if(Z)return W}var Ne=this.readCategories();this.buildCategoricals(we,ue,Ne,w,Qe);for(var Se=0,Re=ue;Se<Re.length;Se++){var j=Re[Se];j&&(j.categories=Ne,ot.push({metadata:this.sourceDataView.metadata,categorical:j}))}return ot},ze.prototype.readValues=function(we,w,me){w.values||(w.values=[]),we?(w.values[me]=we.value??null,void 0!==we.highlight&&(w.highlights||(w.highlights=[]),w.highlights[me]=we.highlight),void 0!==we.objects&&(w.objects||(w.objects=[]),w.objects[me]=we.objects),void 0!==we.highlightObjects&&(w.highlightObjects||(w.highlightObjects=[]),w.highlightObjects[me]=we.highlightObjects)):w.values[me]=null},ze.prototype.getDisplayNameFromAllFrames=function(){for(var we=new Array(this.frameCount),w=0;w<this.frameCount;w++){var me=this.getDisplayNameForFrame(w);we[w]=me}return we},ze.prototype.getDisplayNameForFrame=function(we){var w=this,me=this.getFrameNode(we),ot=this.getFrameSourceColumns(),ge=new Array(ot.length);return ot.forEach(function(Qe,ue){re.fF.assertValue(me.levelValues,"level values should be defined for non subTotal nodes");var M=me.levelValues&&me.levelValues[ue].value,b=new Jt.g({column:Qe,formatStringPropId:w.formatStringPropId,nullsAreBlank:!0,trailingZeroes:!0});ge[ue]=b.format(M)}),ge},ze.prototype.getSubtotals=function(){var we=_.find(this.matrix.rows.root.children,function(W){return W.isSubtotal});if(we){for(var w=_.size(we.values),me=_.size(this.matrix.valueSources),ot=w-me,ge={},Qe=0;Qe<me;Qe++){var ue=this.matrix.valueSources[Qe].roles,M=(0,B.eT)(we.values[ot+Qe].value);for(var b in ue)ge[b]=M}return ge}},ze.prototype.getTopLevelAggregates=function(we){for(var me={},ot=0,ge=this.sourceDataView.metadata.columns;ot<ge.length;ot++){var Qe=ge[ot];if(Qe.roles&&Qe.aggregates)for(var ue=0,M=we;ue<M.length;ue++){var b=M[ue];Qe.roles[b]&&(me[b]=me[b]||[]).push(Qe.aggregates)}}return _.isEmpty(me)?void 0:me},ze}()},67174:function(vi,ma,x){"use strict";x.d(ma,{CT:function(){return U},Je:function(){return ze},qR:function(){return we},vH:function(){return ue}});var d=x(45863),re=x(22733),Ze=x(14599),Ue=x(14577),Wt=x(79154),aa=x(62458),jt=x(38265),Jt=x(32041),Pt=x(64329),Be=x(66001),Vt=x(42359),ft=x(72489),Dt=x(54365),U=function(){function M(b){b&&(this.interactivityService=b)}return M.prototype.initData=function(b){this.element=b.element,this.host=b.host,this.isMobileChart=b.interactivity&&b.interactivity.mobileTileInteractive},M.prototype.initRenderer=function(b){var W=this;aa.fF.assertValue(b,"options"),aa.fF.assert(function(){return!W.rendererInitialized},"renderer initialized multiple times"),this.svg=b.svg,this.interactivityService&&(this.playControl=new dt(this.element,function(Z){return W.moveToFrameAndRender(Z)},this.isMobileChart),this.playControl.onPlay(function(){return W.play()})),this.rendererInitialized=!0},M.prototype.isRendererInitialized=function(){return this.rendererInitialized},M.prototype.setData=function(b,W){if(b){if(this.ridiculousFlagForPersistProperties&&b.metadata)return this.ridiculousFlagForPersistProperties=!1,this.playData;this.playData=b.matrix||b.categorical?function(M,b){var W,Z,Re,j,Ne=[],Se=[],le=Dt.p.create(M,Ze.e0.formatString),ae=le.getFrameCount(),D=le.getSubtotals();if(le.hasFrames()){var ee=le.getFrameSourceColumns(),I=(0,ft.EO)(j=ee&&ee[0],Ue.il.general.formatString),he=void 0;if(j.type.numeric){var be=null===(W=le.getFrameNode(ae-1))||void 0===W?void 0:W.value,de=null===(Z=le.getFrameNode(0))||void 0===Z?void 0:Z.value,q=Math.abs(be-de);he=(0,ft.Ue)({format:I,value:q,value2:0,columnType:j.type})}else he=(0,ft.E3)(I,!0);for(var ye=0,ne=ae;ye<ne;ye++){var Le=le.getFrameNode(ye);if(!Le.isSubtotal){var qe=he.format(Le.value),ct=$("<div></div>").text(qe).html();Se.push({escapedText:ct,text:qe}),Re=b(w(ye,le),{label:ct,column:j,identity:Le.identity,value:Le.value,formattedValue:qe},D),Ne.push(Re)}}}else Re=b(w(0,le),void 0,D),Ne.push(Re);return{allChartData:Ne,chartData:Re,frameData:Se,currentFrameIndex:Se.length-1,labelData:Qe(Se,j)}}(b,W):{frameData:[],allChartData:[],currentFrameIndex:0,chartData:void 0,labelData:{anyWordBreaks:!1,labelInfo:[]}}}else this.playData={frameData:[],allChartData:[],currentFrameIndex:0,chartData:void 0,labelData:{anyWordBreaks:!1,labelInfo:[]}};return this.lastViewport=void 0,this.playData},M.prototype.render=function(b,W,Z){var Ne,Se,Re=this.playData,j=!this.lastViewport||this.lastViewport.height!==W.height||this.lastViewport.width!==W.width;if(this.lastViewport=W,j&&this.stop(),Re)return null===(Ne=this.interactivityService)||void 0===Ne||Ne.applySelectionStateToData(Re.chartData.dataPoints),this.updateCallout(W,Z),j&&(null===(Se=this.playControl)||void 0===Se||Se.rebuild(Re,W,this.playControlWidth)),{allDataPoints:_.flatten(Re.allChartData.map(function(le){return le.dataPoints})),viewModel:{data:this.playData,viewModel:b,viewport:W}}},M.prototype.updateCallout=function(b,W){var Z=this.playData,Ne=Z.frameData,Se=Z.currentFrameIndex,Re=b.height,j=Re-W.top-W.bottom,le=b.width,ae=le-W.left-W.right,D=0,ee=Math.min(Re,1.3*le),I=Math.max(12,Math.round(ee/7));I=Math.min(I,70);var he=[];if(Se<Ne.length&&Se>=0){var be={fontSize:Pt.FP.toString(I),text:Ne[Se].text||"",fontFamily:jt.Wn.regular.css};(D=Jt.b.estimateSvgTextHeight(be)-Jt.b.estimateSvgTextBaselineDelta(be))<j&&(he=[Jt.b.getTailoredTextOrDefault(be,ae-2*M.calloutOffsetMultiplier*D)])}this.svg.selectAll(M.PlayCallout.selector).data(he).join(function(ne){return ne.append("text").classed(M.PlayCallout.class,!0)}).text(function(ne){return ne}).attrs({x:ae-M.calloutOffsetMultiplier*D,y:function(){return D}}).styles({"font-size":"".concat(I,"px"),"text-anchor":"end"})},M.prototype.play=function(){var b=this.playData;if(this.isPlaying)this.stop();else if(this.playControl){this.isPlaying=!0,this.playControl.play();var W=this.playControl.getCurrentIndex();if(null==W)return;W=Math.round(W),b.currentFrameIndex=W>=b.allChartData.length-1?-1:W-1,this.playNextFrame(b)}},M.prototype.playNextFrame=function(b,W,Z){var Ne=this;if(this.isPlaying){var Se=b.currentFrameIndex+1;if(null!=W&&null!=Z&&(Se=Math.abs(Z-W+1),W=Se),Se<b.allChartData.length&&Se>-1){var Re=this.host.tooltips();Re&&Re.hide({immediately:!0,isTouchEvent:!1}),b.currentFrameIndex=Se,b.chartData=b.allChartData[Se],this.renderDelegate(b.chartData),this.playControl.setFrame(Se),Se<b.allChartData.length&&window.setTimeout(function(){Ne.playNextFrame(b,W,Z)},xt)}else this.stop()}else this.stop()},M.prototype.stop=function(){var b;null===(b=this.playControl)||void 0===b||b.pause(),this.isPlaying=!1},M.prototype.remove=function(){var b;null===(b=this.playControl)||void 0===b||b.remove(),d3.selectAll(M.PlayCallout.selector).remove()},M.prototype.setRenderFunction=function(b){this.renderDelegate=b},M.prototype.getCartesianExtents=function(b,W){return this.playData&&!_.isEmpty(this.playData.allChartData)&&!_.isEmpty(this.playData.frameData)&&function(M,b){for(var W={},Z=!1,Ne=0,Se=M.allChartData||[];Ne<Se.length;Ne++){var Re=Se[Ne];if(!_.isEmpty(Re?.dataPoints)){Z=!0;var j=b(Re);W={minY:d3.min([j.minY,W.minY]),maxY:d3.max([j.maxY,W.maxY]),minX:d3.min([j.minX,W.minX]),maxX:d3.max([j.maxX,W.maxX]),formatStringX:j.formatStringX||W.formatStringX,formatStringY:j.formatStringY||W.formatStringY}}}return Z?W:null}(this.playData,W)||b},M.prototype.setPlayControlPosition=function(b){if(this.playControl){var W=this.playControl.getContainer();W.css("left",b.left?"".concat(b.left,"px"):""),W.css("top",b.top?"".concat(b.top,"px"):""),W.css("width",b.width?"".concat(b.width,"px"):""),this.playControlWidth=b.width}},M.prototype.moveToFrameAndRender=function(b){var W=this.playData;if(this.isPlaying=!0,W&&b>=0&&b<W.allChartData.length&&b!==W.currentFrameIndex){W.currentFrameIndex=b;var Z=W.allChartData[b];W.chartData=Z,this.renderDelegate(Z)}this.isPlaying=!1},M.prototype.isCurrentlyPlaying=function(){return this.isPlaying},M.PlayCallout=(0,Wt.CH)("play-callout"),M.calloutOffsetMultiplier=.3,M}(),dt=function(){function M(b,W,Z){this.isMobileChart=Z,this.createSliderDOM(b),this.renderDelegate=W}return M.prototype.getContainer=function(){return this.playAxisContainer},M.prototype.remove=function(){this.playAxisContainer&&this.playAxisContainer.remove()},M.prototype.pause=function(){this.playButton.removeClass("pause").addClass("play")},M.prototype.play=function(){this.playButton.removeClass("play").addClass("pause")},M.prototype.getCurrentIndex=function(){if(this.noUiSlider)return Number(this.noUiSlider.get())},M.prototype.onPlay=function(b){this.playButtonCircle.off("click"),this.playButtonCircle.on("click",b)},M.prototype.setFrame=function(b){this.noUiSlider.set([b])},M.prototype.rebuild=function(b,W,Z){var Ne=this;this.noUiSlider&&this.noUiSlider.destroy();var Se=b.labelData,Re=M.calculateSliderSize(Se,Z),j=this.getContainer();Re.marginLeft>M.SliderMarginLeft&&(j.css("padding-left","".concat(Re.marginLeft-M.SliderMarginLeft,"px")),j.css("box-sizing","border-box"));var le=this.updateSliderControl(b,Re.width),ae=M.adjustWidthRegardingLastItem(Se,le,Re.width);this.slider.css("width","".concat(ae,"px")),this.noUiSlider.on("slide",function(){var D=Ne.getCurrentIndex();Ne.renderDelegate(D)}),this.noUiSlider.on("update",function(){return $(".noUi-target").removeClass("noUi-state-tap")})},M.prototype.updateSliderControl=function(b,W){var Z=b.labelData,Ne=this.slider.get(0),Se=b.frameData.length,Re={start:Se<=1?1:b.currentFrameIndex,step:1,range:{min:0,max:Se<=1?1:Se-1},animationDuration:xt},j=null,le=0;if(Se>1){var ae=M.createPipsFilterFn(b,W,Z);le=ae.skipStep,j={mode:"steps",density:Math.ceil(100/Se),format:{to:function(ee){return b.frameData[ee].escapedText},from:function(ee){return _.findIndex(b.frameData,function(I){return I.escapedText===ee})}},filter:ae.filter}}return Re.pips=j,(0,d.create)(Ne,Re),this.noUiSlider=Ne.noUiSlider,le},M.createPipsFilterFn=function(b,W,Z){var Ne=_.max(_.map(Z.labelInfo,function(D){return D.labelWidth})),Se=1,Re=1,le=Ne/(b.frameData.length>1?W/(b.frameData.length-1):W);return le>1.25?(Re=Math.ceil(le),Se=2):(le>1||Z.anyWordBreaks)&&(Se=2),{filter:function(ee){return ee%Re==0?Se:0},skipStep:Re}},M.adjustWidthRegardingLastItem=function(b,W,Z){if(_.isEmpty(b.labelInfo)||b.labelInfo.length<=1)return Z;var Ne=b.labelInfo.length,Se=Math.floor((Ne-1)/W)*W,le=b.labelInfo[Se].labelWidth/2-(Z+M.SliderMarginRight-Z/Ne*(Se+1));if(le>0){var ae=M.SliderMaxMargin-M.SliderMarginRight;return Z-(le>ae?ae:le)}return Z},M.prototype.createSliderDOM=function(b){this.playAxisContainer=$('<div class="play-axis-container"></div>').appendTo(b).css("height","".concat(M.PlayControlHeight,"px")),this.playButtonCircle=$('<div class="button-container"></div>').appendTo(this.playAxisContainer),this.isMobileChart&&this.playButtonCircle.addClass("mobile-button-container"),this.playButton=$('<div class="play"></div>').appendTo(this.playButtonCircle),this.slider=$('<div class="sliders"></div>').attr("drag-resize-disabled","true").attr("rtl",("rtl"===document.dir).toString()).appendTo(this.playAxisContainer)},M.calculateSliderSize=function(b,W){var Z=0;!_.isEmpty(b.labelInfo)&&b.labelInfo.length>1&&(Z=_.head(b.labelInfo).labelWidth/2);var Ne=Math.max(Z,M.SliderMarginLeft);return Ne=Math.min(M.SliderMaxMargin,Ne),{width:Math.max(W-Ne-M.SliderMarginRight,1),marginLeft:Ne}},M.SliderMarginLeft=44,M.SliderMarginRight=20,M.SliderMaxMargin=100,M.PlayControlHeight=80,M}(),xt=800,ze={duration:750,ease:d3.easeLinear},we="playChart";function w(M,b){var W=b.convertFrame(M);return(0,Vt.eC)(W.metadata,Ze.e0.formatString,re.x.category,W.categorical)}function Qe(M,b){return{labelInfo:M.map(function(W){return{label:W.escapedText,labelWidth:(0,Be.bY)(W.escapedText,Jt.b.measureSvgTextWidth,{fontFamily:jt.Wn.regular.css,fontSize:Pt.FP.toString(14)})}}),anyWordBreaks:_.some(M,function(W){return(0,Be.r)(W.escapedText)||W.escapedText.indexOf("-")>-1}),labelFieldName:b?.displayName}}function ue(M,b){var W,Z,Ne,Se,Re,j,le;return void 0===b&&(b="Play"),aa.fF.assertValue(M,"dataView"),null===(le=null===(j=null===(Re=null===(Se=null===(Ne=null===(Z=null===(W=M.matrix)||void 0===W?void 0:W.rows)||void 0===Z?void 0:Z.levels)||void 0===Ne?void 0:Ne[0])||void 0===Se?void 0:Se.sources)||void 0===Re?void 0:Re[0])||void 0===j?void 0:j.roles)||void 0===le?void 0:le[b]}},79972:function(vi,ma,x){"use strict";x.d(ma,{OQ:function(){return Z},V2:function(){return W},jI:function(){return b},vN:function(){return Se}});var d=x(81337),B=x(22733),re=x(14577),Ze=x(53197),Ue=x(90120),Wt=x(95938),aa=x(21181),jt=x(52083),Jt=x(2241),Pt=x(86108),Be=x(51129),Vt=x(43906),ft=x(79811),Dt=x(11305),Mt=x(48766),U=x(67165),dt=x(94038),xt=x(90700),ze=x(61193),we=x(47316),w=x(44783),me=x(62458),ot=x(45034),ge=x(38958),Qe=x(82755),ue=x(72489),M=x(26543),b=3500,W=1e4;function Z(y,E,te,ce){var Q;return E.useMatrixDV?function(y,E,te){var ce,Q,X,Pe;if(y&&y.matrix&&(0!==_.size(y.matrix.valueSources)||0!==_.size(y.matrix.rows.levels))){for(var Ge=E.interactivityService,p=(0,aa.vc)(E.style,"smallLightLabel"),v=qe(null===(ce=y?.metadata)||void 0===ce?void 0:ce.objects,p,E.style),R=function(y){var E,te,R,N,Fe,Ee,ce=y.matrix,Q=ce.valueSources,X=!1,Pe=!1,Ge=[_.findIndex(Q,function(Ft){return(0,ge.nu)(Ft,"X")})],p=_.findIndex(Q,function(Ft){return(0,ge.nu)(Ft,"Y")}),v=_.findIndex(Q,function(Ft){return(0,ge.nu)(Ft,"Size")}),Ve="",Me="";(Ge[0]>=0?Ve=(R=Q[Ge[0]]).displayName:(Ee=De(ce.rows,re.TL.x))&&(Ge=Ee.levelSourceIndices,Ve=(R=Ee.column).displayName,X=!0),p>=0)?Me=(N=Q[p]).displayName:(Ee=De(ce.rows,re.TL.y))&&(p=Ee.levelSourceIndices[0],Me=(N=Ee.column).displayName,Pe=!0);v>=0&&(Fe=Q[v]);var et,Ye=_.find(ce.rows.levels,function(Ft){return!_.isEmpty(Ft.sources)&&(0,ge.nu)(Ft.sources[0],re.TL.series)});Ye?et=ce.rows.root:(Ye=_.find(ce.columns.levels,function(Ft){return!_.isEmpty(Ft.sources)&&(0,ge.nu)(Ft.sources[0],re.TL.series)}))&&(et=ce.columns.root);var lt=null!==(te=null===(E=y?.metadata)||void 0===E?void 0:E.objects)&&void 0!==te?te:{},Ot=!1,st=!1;if(R){var pt=R.type;Ot=_.size(Ge)<=1&&!(!pt.integer&&!pt.numeric),st=(0,Qe.NA)(lt,B.p.categoryAxis.axisType)===Mt.w.categorical||!Ot}if(X||Pe){var ra=!!_.find(ce.rows.levels,function(Ft){return(0,ge.nu)(Ft.sources[0],re.TL.category)});me.fF.assert(function(){return!ra},"not expecting to find category level with x/y grouping")}var Et=X?re.TL.x:Pe?re.TL.y:re.TL.category;return{idx:{x:Ge,y:p,size:v},xCol:R,yCol:N,size:Fe,axesLabels:{x:Ve,y:Me},xGroupMetadata:X?{isCategoricalAxis:st,isScalarType:Ot}:void 0,yGroupMetadata:Pe?{isCategoricalAxis:!1,isScalarType:!0}:void 0,seriesLevel:Ye,seriesNode:et,categoryLevel:_.find(ce.rows.levels,function(Ft){return(0,ge.nu)(Ft.sources[0],Et)}),treatNullsAsZero:{x:(0,Qe.NA)(lt,re.il.categoryAxis.treatNullsAsZero,!1),y:(0,Qe.NA)(lt,re.il.valueAxis.treatNullsAsZero,!1)}}}(y),N=R.size,Fe=y.matrix.valueSources,Ve=[],Me=0;Me<Fe.length;Me++)(0,ge.nu)(Fe[Me],"Tooltips")&&Ve.push(Me);var Ee={colorHelper:Ue.v.create(E.style,re.il.markers.color,(0,Qe.W7)(null===(Q=y.metadata)||void 0===Q?void 0:Q.objects,re.il.dataPoint.defaultColor),(0,Qe.W7)(null===(X=y.metadata)||void 0===X?void 0:X.objects,re.il.markers.color)),metadata:R,hasDynamicSeries:(0,ge.c5)(y,"Series"),tooltipsEnabled:E.tooltipsEnabled,sizeRange:N?.aggregates?{min:N.aggregates.minLocal||N.aggregates.min||0,max:N.aggregates.maxLocal||N.aggregates.max}:{min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},dataLabelSettings:p,playFrameInfo:te,tooltipValuesIndices:Ve,gradientIndex:_.findIndex(Fe,function(st){return(0,ge.nu)(st,"Gradient")}),staticObjProps:v,categoryMap:{},categoryMapNextIndex:0,categoryIdentities:[]},Ye=function(y,E){var te,ce,Q,X,Pe=[],Ge=y.matrix;if(!Ge.rows.root||0===_.size(Ge.rows.root.children))return{dataPointSeries:Pe};var N,p=E.metadata,v=p.seriesNode,R=-1!==p.idx.size?Ge.valueSources[p.idx.size]:void 0,Fe=Y(p);if(v){for(var Ve=function(Ot){var st=v.children[Ot];if(st.isSubtotal)return"continue";var pt=Object.create(E.staticObjProps.marker);pt.color=E.colorHelper.getColorForSeriesValue(st.objects,v.childIdentityFields,st.value,w.fA),me.fF.assert(function(){return 1===_.size(p.seriesLevel.sources)},"Scatter should only have one series column");var Lt=p.seriesLevel.sources[0],ra=st.levelValues.map(function(oa){return{expr:Lt.expr,formattedValue:ue.WU(oa.value,Lt.format),value:oa.value,identity:st.identity}});E.staticObjProps.showSeries&&(pt.shape=(0,Qe.NA)(st.objects,re.il.markers.shape,pt.shape));var Et={dataView:y,currentSeries:st,converterContext:E,seriesMarker:pt,seriesIndex:Ot,valueColumnIds:Fe},Ft={identityKey:null!==(Q=null===(ce=st.identity)||void 0===ce?void 0:ce.key)&&void 0!==Q?Q:"",dataPoints:de(Et),marker:pt,identity:(new M.dw).withColumnIdentity(st.identity,Lt.queryName,ra).createSelectionId(),name:ue.WU(st.value,(0,Qe.NA)(Lt.objects,re.il.general.formatString))};if(Pe.push(Ft),!p.categoryLevel&&0===_.size(Ft.dataPoints)){var Qt=ne({seriesOptions:Et,category:st,categoryMetadataColumns:[Lt],categoryIdentityFields:st.childIdentityFields,categoryFormatter:q(void 0,Lt)});Qt&&Ft.dataPoints.push(Qt)}},Me=0;Me<(null===(te=v.children)||void 0===te?void 0:te.length);Me++)Ve(Me);var Ee=y.matrix.rows.root.children,Ye=_.find(Ee,function(lt){return lt.isSubtotal});Ye&&(N=be(p,Ye))}else{var et=Object.create(E.staticObjProps.marker);et.color=E.colorHelper.getColorForMeasure(null,null!==(X=R?.queryName)&&void 0!==X?X:"",w.fA),Pe.push({identityKey:"",dataPoints:de({dataView:y,converterContext:E,currentSeries:Ge.rows.root,seriesMarker:et,valueColumnIds:Fe}),marker:et}),p.categoryLevel?(Ee=y.matrix.rows.root.children,(Ye=_.find(Ee,function(st){return st.isSubtotal}))&&(N=be(E.metadata,Ye))):!p.xGroupMetadata&&!p.yGroupMetadata&&(N=be(p,y.matrix.rows.root.children[0]))}return{dataPointSeries:Pe,xSubtotal:N?.xSubtotal,ySubtotal:N?.ySubtotal}}(y,Ee),et=le(Ye.dataPointSeries,R),lt={dataView:y,colorHelper:Ee.colorHelper,style:E.style,formatStringProp:null,showByDefault:!0,markerShapePropIdentifier:re.il.markers.shape,markerShowSeriesPropIdentifier:re.il.bubbles.showSeries},Ot=Ee.hasDynamicSeries?null!==(Pe=Ee.metadata.xGroupMetadata)&&void 0!==Pe&&Pe.isCategoricalAxis?(0,ft.Lk)(lt):(0,ft.PP)(lt):(0,ft.Fe)(E.style);return Ge&&(Ge.applySelectionStateToData(et),Ge.applySelectionStateToData(Ot.dataPoints)),(0,d.__assign)((0,d.__assign)((0,d.__assign)({xCol:R.xCol,yCol:R.yCol,axesLabels:R.axesLabels,size:R.size,hasCategory:!!(R.xGroupMetadata||R.yGroupMetadata||R.categoryLevel),dataPoints:et},Ye),{legendData:Ot,categoryIdentities:Ee.categoryIdentities,sizeRange:Ee.sizeRange,dataLabelsSettings:p,hasDynamicSeries:Ee.hasDynamicSeries,xGroupMetadata:R.xGroupMetadata,yGroupMetadata:R.yGroupMetadata,treatNullsAsZero:R.treatNullsAsZero}),v)}}(y,E,te):null!==(Q=y.categorical)&&void 0!==Q&&Q.values?function(y,E,te,ce){var Q,X,Pe=(0,Be.G)(y,{colorOptions:{valueRole:"Size",visualStyle:E.style},formatStringProp:re.il.general.formatString}),Ge=E.style,p=E.interactivityService,v=E.categoryAxisProperties,R=E.valueAxisProperties,N=y.categorical,Fe=(0,jt.Rr)(N),Ve=[null],Me=ue.E3(null);(null===(Q=N.categories)||void 0===Q?void 0:Q.length)>0&&(Ve=N.categories[0].values,Me=ue.Ue({format:ue.EO(N.categories[0].source,re.il.general.formatString),value:Ve[0],value2:Ve[Ve.length-1],columnType:Pe.data.getCategoryType("Category")}));var Ee=N.values,Ye=!!Ee.source,et=Ee.grouped(),lt=function(y){var Q,X,Pe,E=(0,ge.a2)(y,"X"),te=(0,ge.a2)(y,"Y"),ce=(0,ge.a2)(y,"Size"),Ge="",p="";if(y&&y.length){var v=y[0];E>=0&&(Q=v.values[E].source,Ge=v.values[E].source.displayName),te>=0&&(X=v.values[te].source,p=v.values[te].source.displayName),ce>=0&&(Pe=v.values[ce].source)}return{idx:{x:[E],y:te,size:ce},xCol:Q,yCol:X,size:Pe,axesLabels:{x:Ge,y:p}}}(et),Ot=(0,aa.vc)(Ge,"smallLightLabel"),st=qe(null===(X=y?.metadata)||void 0===X?void 0:X.objects,Ot,Ge),pt=function(y,E,te,ce,Q,X,Pe,Ge,p,v,R,N){var Fe,Ve,Me,Ee,Ye,et,lt=y.data.hasValues("X"),Ot=y.data.hasValues("Y"),st=ce.categories;if(!lt&&!Ot)return[];var pt=[],Lt=te.idx,ra=re.il.general.formatString,Et=E.source,Ft=E.grouped();me.fF.assert(function(){return _.size(Lt.x)<=1},"Categorical X axis is not supported with categorical data view and hence there should not be more than 1 column on X role");for(var Qt=_.isEmpty(st)?null:st[0],oa=Y(te),Wa=function(ia,Ca){var Ma=Ft[ia],ca=Ma.values,se=ve(Lt.size,ca),He=Object.create(v.marker);He.color=Pe?y.colors.createBySeries(ia,void 0,w.fA):void 0,y.data.hasSeries()&&v.showSeries&&(He.shape=(0,Qe.NA)(y.objects.getSeriesDataObjects(ia),re.il.markers.shape,He.shape));var Ie={identityKey:null!==(Ve=null===(Fe=Ma?.identity)||void 0===Fe?void 0:Fe.key)&&void 0!==Ve?Ve:"",dataPoints:[],marker:He,identity:y.identities.createForSeries(ia,[re.TL.size]),name:Pe?ue.WU(y.data.getSeriesName(ia),y.objects.getSeriesFormatString()):void 0};pt.push(Ie);for(var ut=function(pe,_e){var Te=lt?(0,Ze.eT)(y.data.getValue(re.TL.x,pe,ia)):0,Ce=Ot?(0,Ze.eT)(y.data.getValue(re.TL.y,pe,ia)):0;if(null==Te||null==Ce)return"continue";var $e=null!==(Me=ce.originalCategories)&&void 0!==Me?Me:[Qt],at=M.dw.builder().withCategory($e,pe,null===(Ee=Qt?.source)||void 0===Ee?void 0:Ee.queryName,!0).withSeries(E,Ma,!0).withMeasures(oa),ht=void 0;R?(ht=at.clone()).withColumnIdentity(R.identity,R.column.queryName,[{expr:R.column.expr,formattedValue:R.formattedValue,identity:R.identity,value:R.value}]):ht=at;var It=ht.createSelectionId(),St=new Dt.Rm(y.columns,ra);if(N){var At=(0,Vt.F)(ra),Nt=(0,Vt.S)(ra);St.withColumnValueByIndex(Qt,pe,!0,At),Pe&&St.withColumnValue(Et,Ma.name,void 0,!0,At);var Tt=ve(_.first(Lt.x),ca),yt=ve(Lt.y,ca);St.withColumnValueByIndex(Tt,pe,!1,Nt).withColumnValueByIndex(yt,pe,!1,Nt).withColumnValueByIndex(se,pe,!1,Nt).withColumnValueByIndex(p,pe,!1,Nt),R&&St.withValue(R.column.displayName,R.label),St.withAllValuesForRole("Tooltips",pe,ia,!1,Nt)}var Ht=Object.create(Ie.marker);Ht.size=(0,Ze.eT)(y.data.getValue(re.TL.size,pe,ia)),Ht.color=v.colorByCategory&&!Pe?y.colors.createByCategory(pe,w.fA):y.colors.createBySeries(ia,pe,w.fA),Ie.dataPoints.push({x:Te,y:Ce,xFormatString:lt?y.data.getFormatString(re.TL.x,pe,ia):void 0,yFormatString:Ot?y.data.getFormatString(re.TL.y,pe,ia):void 0,marker:Ht,radius:se?.values[pe],sourceGroupName:null===(Ye=se?.source)||void 0===Ye?void 0:Ye.groupName,formattedCategory:new ot.o(function(){return X.format(null!=st?Q[pe]:Ma.name)}),selected:!1,identity:It,renderIdentity:null!==(et=at?.createSelectionId())&&void 0!==et?et:It,tooltipInfo:function(){return St.getTooltipItems()},labelFill:Ge.fontProperties.color,categoryIndex:pe,seriesIndex:ia})},m=0,T=Q.length;m<T;m++)ut(m)},Ea=0,Pa=Ft.length;Ea<Pa;Ea++)Wa(Ea);return pt}(Pe,Ee,lt,N,Ve,Me,Ye,Ot,Fe,st,te,E.tooltipsEnabled),Lt=le(pt,lt),ra=Ye?(0,ft.pq)({dataView:y,style:Ge,showByDefault:!0,simpleMarkerProp:re.il.markers.shape}):(0,ft.Fe)();return v&&null!==v.showAxisTitle&&!1===v.showAxisTitle&&(lt.axesLabels.x=null),R&&null!==R.showAxisTitle&&!1===R.showAxisTitle&&(lt.axesLabels.y=null),p&&(p.applySelectionStateToData(Lt),p.applySelectionStateToData(ra.dataPoints)),(0,d.__assign)({xCol:lt.xCol,yCol:lt.yCol,axesLabels:lt.axesLabels,size:lt.size,hasCategory:Pe.data.hasCategories(),dataPoints:Lt,dataPointSeries:pt,legendData:ra,sizeRange:ee(et,lt.idx.size),dataLabelsSettings:Ot,hasDynamicSeries:Ye,xSubtotal:ce?.[re.TL.x],ySubtotal:ce?.[re.TL.y]},st)}(y,E,te,ce):void 0}var Ne="foregroundDark";function Se(y){return{xCol:void 0,yCol:void 0,hasCategory:void 0,dataPoints:[],dataPointSeries:[],legendData:(0,ft.Fe)(y),axesLabels:{x:"",y:""},sizeRange:{min:void 0,max:void 0},dataLabelsSettings:(0,aa.vc)(y,"smallLightLabel"),hasDynamicSeries:!1,plotAreaShadingSettings:{show:!1,upperShadingColor:{solid:{color:Ue.v.getDataColorByIndex(y,3)}},lowerShadingColor:{solid:{color:Ue.v.getDataColorByIndex(y,5)}},transparency:70},ratioLineSettings:{strokeShow:!1,strokeColor:y?Ue.v.getThemeColor(y,Ne):void 0,strokeTransparency:0,strokeWidth:3,strokePattern:we.Dv.dashed,strokeDashArray:we.YU,strokeDashCap:we.xm,strokeAutoScale:!1},marker:{show:!0,shape:ze.ZO.circle,color:y.colorPalette.dataColors.getColorByIndex(0).value,transparency:0,rotation:0,stroke:{strokeShow:!1,strokeColor:y?Ue.v.getThemeColor(y,Ne):void 0,strokeTransparency:0,strokeWidth:1,strokePattern:we.Dv.solid},rangeType:xt.Dl.deprecated,multiplier:Pt.Kf.min},dataVolume:b,colorBorder:!1,colorByCategory:!1}}function le(y,E){var te,ce=_.reduce(y,function(Q,X){return Q.concat(X.dataPoints)},[]);return E.size&&!(null!==(te=E.xGroupMetadata)&&void 0!==te&&te.isCategoricalAxis)&&ce.sort(ae),ce}function ae(y,E){if(null!=y.radius&&null!=E.radius){var te=E.radius-y.radius;if(0!==te)return te}return E.identity.getKey().localeCompare(y.identity.getKey())}function ee(y,E){var te={};return y?.forEach(function(ce){var X=function(y){var E={};return y&&(E.min=y.min??y.minLocal??d3.min(y.values),E.max=y.max??y.maxLocal??d3.max(y.values)),E}(ve(E,ce.values));(null==te.min||te.min>X.min)&&(te.min=X.min),(null==te.max||te.max<X.max)&&(te.max=X.max)}),te}function be(y,E){me.fF.assert(function(){return!y.xGroupMetadata&&!y.yGroupMetadata},"Can not get subtotals when grouped on x/y");var te,ce=y.idx.x,Q=y.idx.y;me.fF.assert(function(){return _.size(ce)<=1},"Categorical X is not supported without X groups and hence there should only be 1 X column");var Pe,X=_.first(ce);return-1!==X&&(te=(0,Ze.eT)(E.values[X].value)),-1!==Q&&(Pe=(0,Ze.eT)(E.values[Q].value)),{xSubtotal:te,ySubtotal:Pe}}function de(y){for(var E=[],te=function(y){var E,te,ce,Ge,p,Q=y.dataView,X=y.converterContext,Pe=y.currentSeries,v=null!==(te=null===(E=X.metadata.seriesLevel)||void 0===E?void 0:E.sources[0])&&void 0!==te?te:void 0,R=ue.E3(null);if(null!==(ce=X.metadata.xGroupMetadata)&&void 0!==ce&&ce.isCategoricalAxis){var N=Q.matrix.rows;R=q((Ge=N.root.children)[0],(p=N.levels[0].sources)[0])}else Pe.children?(Ge=Pe.children,p=Q.matrix.rows.levels.length>0?Q.matrix.rows.levels[Ge[0].level].sources:void 0,v&&(R=q(Ge[0],p[0]))):v&&(0,ge.nu)(v,"Category")&&(R=q((Ge=[Pe])[0],(p=[v])[0]));return{categories:Ge,categoryMetadataColumns:p,categoryFormatter:R}}(y),Q=te.categoryFormatter,X=te.categoryMetadataColumns,Pe=0,Ge=te.categories??[];Pe<Ge.length;Pe++){var v=ne({seriesOptions:y,category:Ge[Pe],categoryMetadataColumns:X,categoryIdentityFields:y.currentSeries.childIdentityFields,categoryFormatter:Q});v&&E.push(v)}return E}function q(y,E){return y?.levelValues?ue.Ue({format:ue.EO(E,re.il.general.formatString),value:y.levelValues[0],value2:y.levelValues[_.size(y.values)-1],columnType:null}):ue.E3(null)}function ne(y){var E,te,ce,Q,X,Pe;if(!y.category.isSubtotal){var ra,Ge=y.seriesOptions,v=Ge.converterContext,R=Ge.seriesIndex,N=Ge.currentSeries,Fe=Ge.seriesMarker,Ve=v.metadata,Me=Ge.dataView.matrix,Ee=Ve.idx.x,Ye=Ve.idx.y,et=Ve.idx.size,lt=_.size(Me.valueSources),Ot=Ve.xGroupMetadata,st=Ve.yGroupMetadata,pt=_.first(Ee),Lt=0,Et=re.il.general.formatString;!Ot&&-1!==pt&&(Lt=(0,Ze.eT)(y.category.values[pt].value),Lt=null!==(E=Ve.treatNullsAsZero)&&void 0!==E&&E.x&&null==Lt?0:Lt,ra=(0,Qe.NA)(y.category.values[pt].objects,Et));var Ft=null==Lt?null:[Lt];Ot&&(me.fF.assert(function(){return-1!==pt},"a found grouped-X should not have an unknown index"),Ft=_.map(Ee,function(Aa){var Bt,Ra;return null!==(Ra=null===(Bt=y.category.levelValues[Aa])||void 0===Bt?void 0:Bt.value)&&void 0!==Ra?Ra:void 0}));var Wa,Qt=0,oa=null===(te=Ve.xGroupMetadata)||void 0===te?void 0:te.isCategoricalAxis;if(st||-1===Ye)st&&(me.fF.assert(function(){return-1!==Ye},"a found grouped-Y should not have an unknown index"),Qt=y.category.levelValues[Ye].value);else{var Ea=Le(oa,R,lt,Ye);Qt=(0,Ze.eT)(y.category.values[Ea].value),Qt=null!==(ce=Ve.treatNullsAsZero)&&void 0!==ce&&ce.y&&null==Qt?0:Qt,Wa=(0,Qe.NA)(y.category.values[Ea].objects,Et)}if(null!=Ft&&null!=Qt){var Rt,Pa=Object.create(Fe);-1!==et&&(Ea=Le(oa,R,lt,et),Pa.size=(0,Ze.eT)(y.category.values[Ea].value),Rt=(0,Qe.NA)(y.category.values[Ea].objects,Et));var Ca,ia=M.dw.builder();if(!_.isEmpty(y.categoryMetadataColumns)){for(var Ma=_.last(y.categoryMetadataColumns),ca=[],se=0,He=y.category.levelValues;se<He.length;se++){var Ie=He[se],ut=y.categoryMetadataColumns[Ie.levelSourceIndex];ca.push({expr:ut.expr,formattedValue:ue.WU(Ie.value,ut.format),value:Ie.value,identity:y.category.identity})}ia.withColumnIdentity(y.category.identity,Ma.queryName,ca)}var m=null!==(X=null===(Q=v.metadata.seriesLevel)||void 0===Q?void 0:Q.sources[0])&&void 0!==X?X:void 0;m&&(ca=N.levelValues.map(function(Bt){return{expr:m.expr,formattedValue:ue.WU(Bt.value,m.format),value:Bt.value,identity:N.identity}}),ia.withColumnIdentity(N.identity,m.queryName,ca));var T=y.seriesOptions.valueColumnIds;if(_.isEmpty(T)||ia.withMeasures(T),v.playFrameInfo){var F=v.playFrameInfo;Ca=ia.clone(),ia.withColumnIdentity(F.identity,F.column.queryName,[ca={expr:F.column.expr,formattedValue:F.formattedValue,identity:F.identity,value:F.value}])}var pe=ia.createSelectionId(),_e=v.sizeRange;_e.min>Pa.size&&(_e.min=Pa.size),_e.max<Pa.size&&(_e.max=Pa.size),v.hasDynamicSeries||(v.staticObjProps.colorByCategory?Pa.color=v.colorHelper.getColorForSeriesValue(y.category.objects,y.categoryIdentityFields,y.category.value,w.fA):y.category.objects&&(Pa.color=v.colorHelper.getColorForMeasure(y.category.objects,null!=v.metadata.size?v.metadata.size.queryName:"",w.fA)));var Ce=(0,Vt.F)(Et),$e=function(){var Bt=y.category.levelValues;return _.isEmpty(Bt)?N.value:_.size(Bt)>1?(0,Wt.ML)(_.map(Bt,function(Ra,Da){return Ce(Ra.value,y.categoryMetadataColumns[Da])})):Bt[0].value},at=new Dt.E4;if(v.tooltipsEnabled){var ht=(0,Vt.S)(Et),mt=y.category.levelValues,It=_.size(y.categoryMetadataColumns)>1;!Ot&&!st&&(It?at.withMultipleColumnAndValues(y.categoryMetadataColumns,_.map(mt,function(Bt){return Bt.value}),!0,Ce):mt&&at.withColumnValue(_.head(y.categoryMetadataColumns),mt[0].value,void 0,!0,Ce)),v.hasDynamicSeries&&at.withColumnValue(m,N.value,void 0,!0,Ce),Ot&&v.metadata.xGroupMetadata.isCategoricalAxis?at.withMultipleColumnAndValues(y.categoryMetadataColumns,Ft,!0,Ce):at.withColumnValue(Ve.xCol,Ft[0],ra,!1,ht),at.withColumnValue(Ve.yCol,Qt,Wa,!1,ht).withColumnValue(Ve.size,Pa.size,Rt,!1,ht);var St=v.gradientIndex,At=Me.valueSources;if(St>=0){var Nt=(0,Qe.NA)(y.category.values[St].objects,Et);at.withColumnValue(At[St],y.category.values[St].value,Nt,!1,ht)}(F=v.playFrameInfo)&&at.withValue(F.column.displayName,F.label);for(var Tt=0,yt=v.tooltipValuesIndices;Tt<yt.length;Tt++){var Ht=yt[Tt],na=(Nt=(0,Qe.NA)(y.category.values[Ht].objects,Et),Le(oa,R,lt,Ht));at.withColumnValue(At[Ht],y.category.values[na].value,Nt,!1,ht)}}var pa=_.size(Ft)>1?Ft.join(" "):Ft[0],sa=oa?pa:$e(),va=v.categoryMap,ta=String(sa),kt=va[ta];if(void 0===kt){va[ta]=kt=v.categoryMapNextIndex,v.categoryMapNextIndex=kt+1;var Ba=v.categoryIdentities;Ba&&(Ba[kt]=function(){var Aa=M.dw.builder();if(!_.isEmpty(y.categoryMetadataColumns))for(var Bt=function(ii){var Ai=y.category.levelValues.map(function(Ia){return{expr:ii.expr,formattedValue:ue.WU(Ia.value,ii.format),value:Ia.value,identity:y.category.identity}});Aa.withColumnIdentity(y.category.identity,ii.queryName,Ai)},Ra=0,Da=y.categoryMetadataColumns;Ra<Da.length;Ra++)Bt(Da[Ra]);return Aa.withMeasures(T).createSelectionId()})}return{x:pa,y:Qt,marker:Pa,radius:Pa.size,xFormatString:ra,yFormatString:Wa,formattedCategory:new ot.o(function(){return y.categoryFormatter.format($e())}),selected:!1,identity:pe,renderIdentity:null!==(Pe=Ca?.createSelectionId())&&void 0!==Pe?Pe:pe,tooltipInfo:function(){return at.getTooltipItems()},labelFill:v.dataLabelSettings.fontProperties.color,categoryIndex:kt,seriesIndex:R||0}}}}function Le(y,E,te,ce){return y&&null!=E?E*te+ce:ce}function qe(y,E,te){y??(y={});var ce=Ue.v.create(te),Q=Se(te),X=(0,Qe.W7)(y,{objectName:"dataPoint",propertyName:"defaultColor"});X&&(Q.marker.color=X);var Pe=(0,dt.JO)(y,re.il.markers,Q.marker);Pe.rangeType=(0,Qe.NA)(y,re.il.markers.rangeType,Q.marker.rangeType),Pe.multiplier=(0,Pt.HN)((0,Qe.NA)(y,re.il.bubbles.bubbleSize));var Ge={fillPointStyle:(0,Qe.NA)(y,re.il.fillPoint.style,U.f.fillOnly),colorBorder:(0,Qe.NA)(y,re.il.colorBorder.show,Q.colorBorder),colorByCategory:(0,Qe.NA)(y,re.il.colorByCategory.show,Q.colorByCategory),marker:Pe,plotAreaShadingSettings:{show:(0,Qe.NA)(y,re.il.plotAreaShading.show,Q.plotAreaShadingSettings.show),upperShadingColor:ct(ce,y,re.il.plotAreaShading.upperShadingColor,Q.plotAreaShadingSettings.upperShadingColor),lowerShadingColor:ct(ce,y,re.il.plotAreaShading.lowerShadingColor,Q.plotAreaShadingSettings.lowerShadingColor),transparency:(0,Qe.NA)(y,re.il.plotAreaShading.transparency,Q.plotAreaShadingSettings.transparency)},ratioLineSettings:(0,d.__assign)((0,d.__assign)({},(0,Jt.QI)(y,re.il.ratioLine,Q.ratioLineSettings)),{strokeColor:ce.getColorForPropertyWithDefaultColor(y,re.il.ratioLine.strokeColor,Q.ratioLineSettings.strokeColor)}),dataVolume:(0,Qe.NA)(y,re.il.general.dataVolume,b),showSeries:(0,Qe.NA)(y,re.il.bubbles.showSeries,!0)},p=y.categoryLabels;return p&&E&&(0,aa.ww)(p,E,void 0,te),Ge}function ct(y,E,te,ce){return{solid:{color:y.getColorForPropertyWithDefaultColor(E,te,ce?.solid.color)}}}function De(y,E){for(var te=0,ce=y.levels.length;te<ce;te++){var Q=y.levels[te],X=_.chain(Q.sources).map(function(Pe,Ge){return{levelSource:Pe,index:Ge}}).filter(function(Pe){return(0,ge.nu)(Pe.levelSource,E)}).map(function(Pe){return Pe.index}).value();if(!_.isEmpty(X))return{levelIndex:te,levelSourceIndices:X,column:Q.sources[_.first(X)]}}}function Y(y){var E=[];return!y.xGroupMetadata&&y.xCol&&E.push(y.xCol.queryName),!y.yGroupMetadata&&y.yCol&&E.push(y.yCol.queryName),y.size&&E.push(y.size.queryName),E}function ve(y,E){return y>=0?E[y]:null}},15458:function(vi,ma,x){"use strict";x.d(ma,{In:function(){return be},PH:function(){return le},aD:function(){return b},ke:function(){return ee},l5:function(){return he},mv:function(){return Qe},nZ:function(){return ot},qo:function(){return j},u$:function(){return ue},yV:function(){return I}});var d=x(81337),B=x(14577),re=x(14599),Ze=x(21181),Ue=x(80065),Wt=x(86108),aa=x(52287),jt=x(23465),Jt=x(51650),Pt=x(57622),Be=x(2241),Vt=x(90700),ft=x(61193),Dt=x(67165),Mt=x(56578),U=x(32379),dt=x(82755),xt=x(96915),ze=x(3128),we=x(79972),w=7,me=10;function ot(de){var q,ye;return{type:2,card:[ge.call(this,de),this.isXAxisCategorical()?void 0:(0,Ze.Zu)({cardName:"Visual_CategoryLabel",dataLabelSettings:null!==(ye=null===(q=this.data)||void 0===q?void 0:q.dataLabelsSettings)&&void 0!==ye?ye:null,isShowCategory:void 0,localize:this.localizer,props:B.CS.categoryLabels,revertToDefaultProps:B.CS.categoryLabels,showBackground:!0,showValueColor:!0,style:this.style})].filter(function(ne){return ne})}}function ge(de){var ye,ne,Le,qe,q=this,ct=this.originalData;if(ct){var tt=null!==(ne=null===(ye=ct.dataPointSeries)||void 0===ye?void 0:ye.length)&&void 0!==ne?ne:0;if(0!==tt){var De=(0,dt.NA)(null===(qe=null===(Le=this.dataView)||void 0===Le?void 0:Le.metadata)||void 0===qe?void 0:qe.objects,B.il.bubbles.showSeries,!0),Y=new Mt.CQ(new Mt.lg("markers"),"Visual_Markers",Object.values(B.il.markers).concat([B.il.bubbles.bubbleSize,B.il.bubbles.showSeries,B.il.fillPoint.style,B.il.dataPoint.showAllDataPoints,B.il.dataPoint.defaultColor,B.il.colorByCategory.show,B.CS.categoryAxis.innerPadding,B.il.colorBorder.show]),this.localizer);return Y.addGroup("applySettingsTo",function(O){return O.withContainerDisabled(!De).withDisplayName("Apply_Settings_To").withCollapsible(!1).addContainer("series",function(ve){if(ve.withDisplayName(tt>1?"Series":"Visual_Categories").addContainerItem("all",q.localizer("All"),function(v){Re.call(q,{containerItemBuilder:v,marker:ct.marker,selector:null,listType:"static"}),!De&&v.addSimpleSlice("showSeriesLink",function(){return new Mt.ob({descriptor:B.il.bubbles.showSeries,value:function(){},ariaLabel:"Enable_This_Setting",type:"SeriesDialogLink",resetToDefaultDescriptors:[B.il.markers.shape],warningIcon:!0}).build()},function(R){return R.withCustomDisplayName("Enable_This_Setting").withSuppressDisplayName(!0)})}),1===tt){var y=ct.dataPoints.slice(0,ze.Rl);if(y.length<2)return;for(var E=function(R){var N=R.formattedCategory.getValue();ve.addContainerItem(N,N,function(Fe){return Re.call(q,{containerItemBuilder:Fe,marker:R.marker,selector:(0,U.fd)(R.identity.getSelector()),listType:"perCategory"})})},te=0,ce=y;te<ce.length;te++)E(ce[te])}if(tt>1)for(var X=function(R){ve.addContainerItem(R.name,R.name,function(N){return Re.call(q,{containerItemBuilder:N,marker:R.marker,selector:(0,U.fd)(R.identity.getSelector()),listType:"perSeries"})})},Pe=0,Ge=ct.dataPointSeries;Pe<Ge.length;Pe++)X(Ge[Pe])})}),this.isXAxisCategorical()&&Y.addGroup("spacing",function(O){return O.withDisplayName("Visual_Spacing").addSimpleSlice("innerPadding",(0,ze.Gf)(de.categoryAxisData,q.localizer))}),Y.build()}}}function Qe(de){var ne,Le,ye=_.first(de).visualObjects;if(ye.length>0){(ne=ye[0])&&ne.selectorsByColumn&&(Le=(0,U.fd)((0,U.tV)(ne.selectorsByColumn)));var qe=this.originalData.fillPointStyle===Dt.f.fillOnly,ct=1===this.data.dataPointSeries.length;switch(ne.objectName){case"markers":var tt={data:[(0,xt.Ue)(1)]};Le=ct?tt:Le;var De=(0,d.__assign)((0,d.__assign)({},B.il.dataPoint.fill),{selector:Le});return(0,Ue.w3)(this.hostService,qe?void 0:De,qe?De:void 0);case"category-labels":return(0,Ue.un)(this.hostService,{fontFamilyReference:B.CS.categoryLabels.fontFamily,fontSizeReference:B.CS.categoryLabels.fontSize,boldReference:B.CS.categoryLabels.bold,italicReference:B.CS.categoryLabels.italic,underlineReference:B.CS.categoryLabels.underline,fontColorReference:B.CS.categoryLabels.color,backgroundReference:B.CS.categoryLabels.backgroundColor});default:return}}}function ue(de){if((0,Mt.n$)(de)&&"dataVolume"===de.name)return M.call(this)}function M(){if(this.originalData&&!this.playAxis&&!this.isXAxisCategorical())return{item:new Mt.vi({uidBuilder:new Mt.IN(new Mt.SS(new Mt.lg("visualPlaceholderCard"),"visualPlaceholderGroup"),"dataVolume"),control:new Mt.mu({descriptor:B.il.general.dataVolume,value:this.originalData.dataVolume,options:{minValue:{type:0,value:we.jI},maxValue:{type:1,value:we.V2}}}).build(),localize:this.localizer}).withCustomDisplayName("Visual_DataVolumeModern").build(),revertToDefaultDescriptors:[B.il.general.dataVolume]}}function b(de){if(!(0,Mt.Qu)(de)){if("categoryAxis"===de.uid)return W.call(this,de);if("valueAxis"===de.uid)return Z.call(this,de)}}function W(de){var q=this,ye=(0,d.__spreadArray)([],de.groups,!0);return ye.forEach(function(ne,Le){(0,Mt.Qu)(ne)||ne.uid==="".concat("categoryAxis","-").concat("valuesScalar")&&(ye[Le]=Ne.call(q,ne,!0))}),(0,d.__assign)((0,d.__assign)({},de),{revertToDefaultDescriptors:(0,d.__spreadArray)((0,d.__spreadArray)([],de.revertToDefaultDescriptors,!0),[B.il.categoryAxis.treatNullsAsZero],!1),groups:ye})}function Z(de){var q=this,ye=(0,d.__spreadArray)([],de.groups,!0);return ye.forEach(function(ne,Le){(0,Mt.Qu)(ne)||ne.uid==="".concat("valueAxis","-").concat("values")&&(ye[Le]=Ne.call(q,ne,!1))}),(0,d.__assign)((0,d.__assign)({},de),{revertToDefaultDescriptors:(0,d.__spreadArray)((0,d.__spreadArray)([],de.revertToDefaultDescriptors,!0),[B.il.valueAxis.treatNullsAsZero],!1),groups:ye})}function Ne(de,q){var ye=(0,d.__spreadArray)([],de.slices,!0),ne=(0,Mt.Qs)(de),Le=Se.call(this,ne,q);return Le&&ye.push(Le),(0,d.__assign)((0,d.__assign)({},de),{slices:ye})}function Se(de,q){var ye,ne,Le=this.originalData;if(Le&&!(q?Le.xGroupMetadata:Le.yGroupMetadata))return new Mt.vi({control:{type:"ToggleSwitch",properties:{descriptor:(0,d.__assign)((0,d.__assign)({},q?B.il.categoryAxis.treatNullsAsZero:B.il.valueAxis.treatNullsAsZero),{selector:null}),value:!!(q?null!==(ye=Le.treatNullsAsZero)&&void 0!==ye&&ye.x:null!==(ne=Le.treatNullsAsZero)&&void 0!==ne&&ne.y)}},localize:this.localizer,uidBuilder:de.withSlice("showblankvalues")}).build()}function Re(de){var q=this,ye=de.selector,ne=de.marker,Le=this.originalData,qe=!!Le.size,ct={get:this.localizer,getOptional:this.localizer,format:this.localizer},tt=_.map(Vt.Yu,function(De){return(0,d.__assign)((0,d.__assign)({},De),{displayName:De.displayName(ct)})});de.containerItemBuilder.addGroup("shape",function(De){var Y;return De.withDisplayName("Visual_Shape").addSimpleSlice("markerShape",new Mt.uY({descriptor:(0,d.__assign)((0,d.__assign)({},B.il.markers.shape),{selector:ye}),value:ne.shape}).build(),function(O){return O.withDisabled("perCategory"===de.listType)}).addSimpleSlice("fillStyle",new Mt.uY({descriptor:(0,d.__assign)((0,d.__assign)({},B.il.fillPoint.style),{selector:ye}),value:Le.fillPointStyle}).build(),function(O){return O.withDisabled(qe||"static"!==de.listType).withHidden(q.featureSwitches.newMarkerProperties).withCustomDescriptionIf(function(){return qe||!!ye},"Visual_Scatter_Size_FormatOption_DisabledReason_FillPoint")}).addSimpleSlice("markerRangeType",new Mt.uY({descriptor:(0,d.__assign)((0,d.__assign)({},B.il.markers.rangeType),{selector:ye}),items:tt,value:null!==(Y=tt.find(function(O){return O.value===Le.marker.rangeType}))&&void 0!==Y?Y:{value:Vt.Dl.deprecated,displayName:q.localizer("Visual_MarkerRangeType_Deprecated")}}).build(),function(O){return O.withDisabled(!qe||"static"!==de.listType)}).addSimpleSlice("markerSize",new Mt.JN({descriptor:(0,d.__assign)((0,d.__assign)({},B.il.bubbles.bubbleSize),{selector:ye}),value:(0,Wt.yn)(Le.marker.multiplier),options:{minValue:{type:0,value:Wt.Ad.min},maxValue:{type:1,value:Wt.Ad.max}},localize:q.localizer}).build(),function(O){return O.withDisabled("static"!==de.listType)}).addSimpleSlice("markerRotation",Mt.JN.getRotationSliderBuilder({descriptor:(0,d.__assign)((0,d.__assign)({},B.il.markers.rotation),{selector:ye}),value:ne.rotation,localize:q.localizer}).build(),function(O){return O.withHidden(!q.featureSwitches.newMarkerProperties||!(0,ft.Cd)(ne.shape))})}).addGroup("colors",function(De){return De.withDisplayName("Generic_Color").addSimpleSlice("colorByCategory",new Mt.bd({descriptor:(0,d.__assign)((0,d.__assign)({},B.il.colorByCategory.show),{selector:null}),value:Le.colorByCategory}).build(),function(Y){return Y.withCustomDisplayName("Visual_ColorByCategory").withHidden(Le.hasDynamicSeries).withDisabled("static"!==de.listType,"Visual_DisabledReason_AllSeriesOnly_Singular")}).addSimpleSlice("markerColor",new Mt.BT({descriptor:(0,d.__assign)((0,d.__assign)((0,d.__assign)({},B.il.markers.color),{selector:"static"===de.listType?{data:[(0,xt.Ue)(1)]}:ye,instanceKind:Le.hasDynamicSeries||"perCategory"===de.listType?1:3}),"static"===de.listType&&{altConstantValueSelector:null}),value:{value:ne.color}}).build(),function(Y){return Y.withCustomDisplayName("Generic_Color").withDisabled(Le.hasDynamicSeries&&"static"===de.listType,"Visual_Color_AllSeries_DisabledReason")}).addSimpleSlice("markerTransparency",Mt.JN.getTransparencySliderBuilder({descriptor:(0,d.__assign)((0,d.__assign)({},B.il.markers.transparency),{selector:ye}),value:ne.transparency,localize:q.localizer}).build(),function(Y){return Y.withDisabled(Le.hasDynamicSeries&&"static"===de.listType,"Visual_Color_AllSeries_DisabledReason").withHidden(!q.featureSwitches.newMarkerProperties)})}).addGroup("border",function(De){De.withDisplayName("Visual_Border").withDisabled(!(0,ft.nK)(ne.shape)),q.featureSwitches.newMarkerProperties?De.withDisabled(!(0,ft.nK)(ne.shape)||"static"!==de.listType).addSlices((0,Be.Iq)({containerItemBuilder:De,descriptors:re.$9,strokeData:ne?.stroke,selector:ye,featureSwitches:q.featureSwitches,localize:q.localizer}).map(function(Y){return Y.build()})):De.addSimpleSlice("colorBorder",new Mt.bd({descriptor:(0,d.__assign)((0,d.__assign)({},B.il.colorBorder.show),{selector:null}),value:Le.colorBorder}).build(),function(Y){return Y.withCustomDisplayName("Visual_ColorBorder").withCustomDescriptionIf(function(){return!qe},"Visual_Scatter_Size_FormatOption_DisabledReason").withDisabled(!qe||"static"!==de.listType).withHidden(q.featureSwitches.newMarkerProperties)})})}function j(de,q){var ye,ne,Le=this.originalData;if(Le)switch(q.objectName){case"plotAreaShading":this.isPlotSymmetryShadingSupported()?de.pushInstance({selector:null,objectName:"plotAreaShading",properties:{show:Le.plotAreaShadingSettings.show,upperShadingColor:Le.plotAreaShadingSettings.upperShadingColor,lowerShadingColor:Le.plotAreaShadingSettings.lowerShadingColor,transparency:Le.plotAreaShadingSettings.transparency}}):de.pushInstance({selector:null,objectName:"plotAreaShading",properties:{},disabledReason:this.localizer("Visual_Scatter_SymmetryShadingNotSupported")});break;case"ratioLine":null!==(ye=Le.xCol)&&void 0!==ye&&ye.isMeasure&&null!==(ne=Le.yCol)&&void 0!==ne&&ne.isMeasure&&de.pushInstance({selector:null,objectName:"ratioLine",properties:(0,Be.HM)(Le.ratioLineSettings,re.vi)});break;case"general":!this.playAxis&&!this.isXAxisCategorical()&&de.pushInstance({selector:null,objectName:"general",properties:{dataVolume:Le.dataVolume},validValues:{dataVolume:{numberRange:{min:we.jI,max:we.V2}}}})}}function le(de){for(var q=de.metadata,ye=[],ne=0,Le=de.visualObjects;ne<Le.length;ne++){var ct=Le[ne].objectName,tt=q?.visualObject;if(tt&&"markers"===ct){var Y=d3.select(tt).datum(),O=this.data.dataPointSeries[Y.seriesIndex];if(O.dataPoints.length<=w)return ae.call(this,O);var y=this.getGroupBoundingRect(O.dataPoints,this.currentViewport.scale,this.renderer.mainGraphicsContext),E=tt.getBoundingClientRect(),te=Math.max(E.height,me),ce=Math.max(E.width,me);ye.push(D([y,{x:E.x,y:E.y,height:te,width:ce}],O.identityKey,this.renderer.mainGraphicsContext,this.currentViewport,this.margin))}}return ye}function ae(de){var q=[],ye=this.renderer.mainGraphicsContext,ne=this.currentViewport.scale,Le=ye.node().getBoundingClientRect(),qe=Le.left,ct=Le.top,tt=ye.node().getBBox(),De=tt.x,Y=tt.y,O={type:1,x:qe-De,y:ct-Y,height:this.availableHeight*ne,width:this.availableWidth*ne},ve=de.dataPoints.map(function(E){var te=Math.max(2*E.geometry.size*ne,me);return{x:(E.geometry.x-De)*ne-te/2+qe,y:(E.geometry.y-Y)*ne-te/2+ct,width:te,height:te,type:1,clipPath:O}});return q.push({id:de.identityKey,outline:{type:0,outlines:ve}}),q}function D(de,q,ye,ne,Le){for(var qe=ye.node().getBoundingClientRect(),ct=qe.left,tt=qe.top,De=[],Y=ye.node().getBBox(),y=ne.scale,E={type:1,x:ct-Y.x,y:tt-Y.y,height:(ne.height-Le.top-Le.bottom)*y,width:(ne.width-Le.left-Le.right)*y},te=0,ce=de;te<ce.length;te++){var Q=ce[te];De.push({x:Q.x,y:Q.y,width:Q.width,height:Q.height,type:1,clipPath:E})}return{id:q,outline:{type:0,outlines:De}}}function ee(de){var q,ye,ne=de.element,Le=de.series,qe=de.subSelectionHelper,ct=de.d3Event,tt=de.hostServices,De=de.showUI,Y=null===(q=Le.identity)||void 0===q?void 0:q.getSelectorsByColumn(),ve=tt.getLocalizedString("MiniToolbar_Markers",null!==(ye=Le.name)&&void 0!==ye?ye:tt.getLocalizedString("All")),E=qe.createVisualSubSelectionForSingleObject((0,d.__assign)({objectName:"markers",subSelectionType:3,displayName:ve,showUI:De,selectorsByColumn:Y,selectionOrigin:{x:ct.clientX,y:ct.clientY,offset:{x:15,y:15}}},ne?{metadata:{visualObject:ne}}:{}));qe.subSelect(E)}function I(de){var ne,qe,ye=_.first(de).visualObjects;if(ye.length>0)switch(ne=ye[0],_.isEmpty(ne.selectorsByColumn)||(qe=(0,U.fd)((0,U.tV)(ne.selectorsByColumn))),ne.objectName){case"markers":return[{type:0,excludedResetFormattingIds:[B.CS.categoryLabels.show]},(0,d.__assign)((0,d.__assign)({type:2},B.CS.categoryLabels.show),{enabledLabel:this.localizer("Visual_Add_CategoryLabel")}),(0,d.__assign)((0,d.__assign)({type:3},B.il.markers.shape),{label:this.localizer("Visual_MarkerShape"),selector:qe}),(0,d.__assign)((0,d.__assign)({type:3},B.il.fillPoint.style),{label:this.localizer("Visual_MarkerStyle"),selector:void 0}),{type:1,destinationInfo:(0,d.__assign)((0,d.__assign)({},B.il.markers.shape),{selector:qe}),label:this.localizer("Format_Markers")}];case"category-labels":var ct="".concat("Visual","-").concat("categoryLabels");return[(0,d.__assign)((0,d.__assign)({type:2},B.CS.categoryLabels.show),{disabledLabel:this.localizer("Delete"),selector:void 0,keyboardShortcuts:[{key:"Delete",nextValue:!1}]}),{type:0,relatedResetFormattingIds:[B.CS.categoryLabels.enableBackground],excludedResetFormattingIds:[B.CS.categoryLabels.show]},{type:1,destinationInfo:{cardUid:ct,groupUid:"".concat("categoryLabels","-").concat("values")},label:this.localizer("Format_Category_Labels")}];default:return}}function he(de){var q;switch(d3.select(de).attr(aa.Ez)){case"markers":case"category-labels":var ne=d3.select(de).datum(),Le=this.data.dataPointSeries[ne.seriesIndex],qe=null===(q=Le?.identity)||void 0===q?void 0:q.getSelectorsByColumn();if(qe)return qe}}function be(de,q){if(!this.featureSwitches.onObject||1!==q)return[];var Le=[jt.$.create({objectName:"categoryLabels",propertyName:"backgroundColor"},this.data.dataLabelsSettings.enableBackground).onToggleEnabled(Pt.W.createBooleanDataViewObjectChange({objectName:"categoryLabels",propertyName:"enableBackground"},!0))];return Jt.o.getDataViewObjectsBehaviorChanges(de,Le)}},56914:function(vi,ma,x){"use strict";x.d(ma,{WG:function(){return ge},oz:function(){return Qe}});var d=x(51995),B=x(60066),re=x(2241),Ze=x(52287),Ue=x(72902),Wt=x(90700),aa=x(64067),jt=x(79154),Jt=x(62458),Pt=x(34644),Be=x(59107),Vt=x(10389),ft=x(67174),Dt=x(15458),Mt=x(11745),U=x(41640),dt=x(61193),xt=x(80758),ze=x(92379),we=function(){function ue(M){this.dataPoints=M.dataPoints,this.margin=M.margin}return ue.prototype.queryRegion=function(M){var b=this,W=(0,Mt.g6)(M,!1);return this.adjustPositionRelativeToRoot(W),_.filter(this.dataPoints,function(Ne){if(void 0===Ne.marker.size)return b.isPointInRect(W,Ne.geometry);var Se;switch(Ne.geometry.markerShape){case dt.ZO.circle:Se=ze.m.circleRectangleOverlap(W,{x:Ne.geometry.x,y:Ne.geometry.y},Ne.geometry.size);break;case dt.ZO.square:Se=b.isSquareMarkerIntersect(Ne.geometry,W);break;case dt.ZO.diamond:Se=b.isDiamondMarkerIntersect(Ne.geometry,W);break;case dt.ZO.triangle:Se=b.isTriangleMarkerIntersect(Ne.geometry,W);break;default:Jt.fF.assertFail("markers does not have this shape"),Se=!1}return Se})},ue.prototype.isSquareMarkerIntersect=function(M,b){var W={left:M.x-M.size,right:M.x+M.size,top:M.y-M.size,bottom:M.y+M.size};return(0,xt.WN)(W.left,W.right,b.left,b.right)&&(0,xt.WN)(W.top,W.bottom,b.top,b.bottom)},ue.prototype.isDiamondMarkerIntersect=function(M,b){if(!this.isSquareMarkerIntersect(M,b))return!1;if(this.isPointInRect(b,M))return!0;for(var Z=[{x:M.x-M.size,y:M.y},{x:M.x,y:M.y-M.size},{x:M.x+M.size,y:M.y},{x:M.x,y:M.y+M.size}],Se=[{x:b.left,y:b.top},{x:b.right,y:b.top},{x:b.right,y:b.bottom},{x:b.left,y:b.bottom}],Re=[[Se[0],Se[1]],[Se[1],Se[2]],[Se[3],Se[2]],[Se[0],Se[3]]],j=0,le=[[Z[0],Z[1]],[Z[1],Z[2]],[Z[0],Z[3]],[Z[3],Z[2]]];j<le.length;j++)for(var ae=le[j],D=0,ee=Re;D<ee.length;D++){var I=ee[D];if(ze.m.linesIntersect(ae[0],ae[1],I[0],I[1],!1))return!0}return this.isLassoInShape(M,b)},ue.prototype.isPointInRect=function(M,b){return(0,U.bl)(M.left,b.x)&&(0,U.bl)(b.x,M.right)&&(0,U.bl)(M.top,b.y)&&(0,U.bl)(b.y,M.bottom)},ue.prototype.isLassoInShape=function(M,b){var W={left:M.x-M.size,right:M.x+M.size,top:M.y-M.size,bottom:M.y+M.size};return(0,xt.WN)(b.left,b.right,W.left,W.right)&&(0,xt.WN)(b.top,b.bottom,W.top,W.bottom)},ue.prototype.isTriangleMarkerIntersect=function(M,b){if(!this.isSquareMarkerIntersect(M,b))return!1;if(this.isPointInRect(b,M))return!0;for(var Z=[{x:M.x-M.size,y:M.y+M.size},{x:M.x,y:M.y-M.size},{x:M.x+M.size,y:M.y+M.size}],Se=[{x:b.left,y:b.top},{x:b.right,y:b.top},{x:b.right,y:b.bottom},{x:b.left,y:b.bottom}],Re=[[Se[0],Se[1]],[Se[1],Se[2]],[Se[3],Se[2]],[Se[0],Se[3]]],j=0,le=[[Z[0],Z[1]],[Z[1],Z[2]],[Z[0],Z[2]]];j<le.length;j++)for(var ae=le[j],D=0,ee=Re;D<ee.length;D++){var I=ee[D];if(ze.m.linesIntersect(ae[0],ae[1],I[0],I[1],!1))return!0}return this.isLassoInShape(M,b)},ue.prototype.adjustPositionRelativeToRoot=function(M){M.left-=this.margin.left,M.top-=this.margin.top,M.right-=this.margin.left,M.bottom-=this.margin.top},ue}(),ge=function(){function ue(M,b){var W=this;this.hostChart=M,this.eventManager=b,this.mainGraphicsG=this.hostChart.svg.append("g").classed(ue.MainGraphicsContext.class,!0).call(function(Z){return M.mobileTileInteractive&&Z.append("rect").classed("backgroundRect",!0).attrs({width:"100%",height:"100%"})}),this.mainGraphicsContext=this.mainGraphicsG.append("svg").attr("stroke-width","1").call(function(Z){return W.hostChart.interactivityService&&Z.attrs({tabindex:0,role:"listbox","aria-multiselectable":"true",focusable:"true","aria-label":W.hostChart.localizer("Visual_Plot")}).classed(B.Pg,!Be.M.isInternetExplorerOrEdge())})}return ue.prototype.markerShapesHaveChanged=function(M){var b=_.map(M.data.dataPointSeries,function(Se){return Se.marker.shape}),W=this.previousMarkers;if(W)for(var Z=0,Ne=Math.min(b.length,W.length);Z<Ne;Z++)if(b[Z]!==W[Z])return this.previousMarkers=b,!0;return this.previousMarkers=b,!1},ue.calculateRadius=function(M,b,W,Z,Ne){var Se,Re;void 0===Ne&&(Ne=1);var j=Math.min(W.height,W.width)/this.MarkerRefChartDim;if(null==M||null==b)return Ne*ue.MarkerRadiusDefault;if(Z===Wt.Dl.deprecated){var le=j*j,ae={min:this.MarkerRefChartMinPixels*le,max:this.MarkerRefChartMaxPixels*le},D=(b={min:Math.min(b.min||0,0),max:Math.max(b.max||0,0)}).max-b.min,ee=ae.max-ae.min,I=((M=Math.min(Math.max(M,b.min),b.max))-b.min)/(D||1);return Jt.fF.assert(function(){return I>=0&&I<=1},"valueRatio must be between 0 and 1"),Ne*Math.sqrt((ae.min+I*ee)/Math.PI)}Z===Wt.Dl.auto&&(Z=b.min>=0||b.max<=0?Wt.Dl.magnitude:Wt.Dl.dataRange),Z===Wt.Dl.magnitude&&(M&&(M=Math.abs(M)),b={min:0,max:Math.max(null!==(Se=Math.abs(b.max))&&void 0!==Se?Se:0,null!==(Re=Math.abs(b.min))&&void 0!==Re?Re:0)});var q=((M=Math.min(Math.max(M,b.min),b.max))-b.min)/(b.max-b.min||1);return Jt.fF.assert(function(){return q>=0&&q<=1},"valueRatio must be between 0 and 1"),Ne*((ue.MarkerRadiusMax-ue.MarkerRadiusMin)*Math.sqrt(q)+ue.MarkerRadiusMin)*j},ue.prototype.render=function(M,b,W,Z){var Se,Ne=M.plotArea;if(this.mainGraphicsContext.attrs({width:Ne.width,height:Ne.height}).classed(B.Pg,!Be.M.isInternetExplorerOrEdge()&&!!b),this.drawRatioLine(M),this.drawShadedBackground(M),M.suppressDataPointRendering)this.mainGraphicsContext.selectAll(ue.MarkerSeriesGroupCS.selector).remove(),Se=this.mainGraphicsContext.selectAll(ue.MarkerCS.selector);else{var Re=ue.getXOfFirstCategory(M),j=!this.markerShapesHaveChanged(M)&&M.animation.duration>0,le=M.drawBubbles||j;Se=this.mainGraphicsContext.selectAll(ue.MarkerSeriesGroupCS.selector).data(le?[{identityKey:"",dataPoints:M.data.dataPoints,marker:{show:!0,color:void 0,shape:void 0}}]:M.data.dataPointSeries,function(ae){return ae.identityKey}).join(function(ae){return ae.append("g").classed(ue.MarkerSeriesGroupCS.class,!0).attr("role","group")}).styles(function(ae){return le?{}:{"stroke-opacity":ue.getMarkerStrokeOpacity(!!M.data.size,M.data.colorBorder,M.hasSelection,!1),fill:ae.marker.color,"fill-opacity":ue.getMarkerFillOpacity(!!M.data.size,M.fillMarkers,M.hasSelection,!1)}}).selectAll(ue.MarkerCS.selector).data(function(ae){return ae.dataPoints},function(ae){return ae.renderIdentity.getKey()}).join(function(ae){var D;return ae.append("path").classed(ue.MarkerCS.class,!0).classed(B.Pg,!Be.M.isInternetExplorerOrEdge()&&!!b).classed(Ze.cy,!0).attrs((D={},D[Ze.Ez]="markers",D[Ze.QZ]=3,D.transform=function(ee){var I=M.xAxisProperties.scale(M.hasCategoricalAxis?ee.categoryIndex:ee.x)+Re,he=M.yAxisProperties.scale(ee.y);return"translate(".concat(I,",").concat(he,")")},D.tabindex=b?0:null,D.focusable=!!b||null,D.role="option",D)).style("opacity",0)},function(ae){return j?ae:ae.interrupt()},function(ae){return(j?ae.transition().ease(M.animation.ease).duration(M.animation.duration).style("opacity",0).attr("r",0):ae).remove()}).attrs(function(ae){return ue.updateMarkerGeometry(ae,M,Re),{d:(0,d.jM)(ae.marker.shape,ae.geometry.size),transform:"translate(".concat(ae.geometry.x,",").concat(ae.geometry.y,")"),"aria-selected":ae.selected}}).styles({"stroke-opacity":function(D){return ue.getMarkerStrokeOpacity(null!=D.marker.size,M.data.colorBorder,M.hasSelection,D.selected)},stroke:function(D){return ue.getMarkerStrokeFill(D.marker,M.data.colorBorder)},fill:function(D,ee,I){var he=d3.select(I[ee].parentElement).datum();return le||he.marker.color!==D.marker.color?D.marker.color:null},"fill-opacity":function(D){return ue.getMarkerFillOpacity(null!=D.marker.size,M.fillMarkers,M.hasSelection,D.selected)},opacity:j?void 0:null}).call(function(ae){return(j?ae.transition().ease(M.animation.ease).duration(M.animation.duration):ae).style("opacity",1)}).each(function(ae,D,ee){var I,he;if(Z){var be=W.getLocalizedString("MiniToolbar_Markers",null!==(he=null===(I=M.data.dataPointSeries[ae.seriesIndex])||void 0===I?void 0:I.name)&&void 0!==he?he:W.getLocalizedString("All"));Ze.O5.setDataForElement(ee[D],{getDisplayName:function(){return be}})}})}return this.hostChart.tooltipsEnabled&&this.hostChart.tooltipService.addTooltip(this.mainGraphicsContext,function(ae){var D;return null===(D=ae.data)||void 0===D?void 0:D.tooltipInfo()},function(ae){var D;return(null===(D=ae.data)||void 0===D?void 0:D.identity)&&[ae.data.identity]}),(0,Vt.bL)(M.animationOptions),Jt.fF.assert(function(){return null!=M.data.dataPointSeries},"dataPointSeries must be defined"),this.numSeries=M.data.dataPointSeries.length,this.scatterChartDataPoints=M.allData.dataPoints,{dataPointsSelection:Se,eventGroup:this.mainGraphicsG,data:M.data,fillMarkers:M.fillMarkers,root:this.mainGraphicsContext,visualInstanceId:W.instanceId,eventManager:this.eventManager,onMarkerSubSelection:function(D,ee,I,he,be){(0,Dt.ke)({element:D,series:M.allData.dataPointSeries[ee.seriesIndex],subSelectionHelper:I,d3Event:he,hostServices:W,showUI:be})},hitTester:new we({dataPoints:M.data.dataPoints,margin:M.margin})}},ue.prototype.getNextDataPoint=function(M,b,W){var Z,Ne,ae,D,Se=this.mainGraphicsContext.selectAll(ue.MarkerCS.selector),Re=this.scatterChartDataPoints,j=M,le=b;switch(W){case Ue.x0.PreviousCategory:case Ue.x0.NextCategory:D=W===Ue.x0.PreviousCategory?-1:1,ae=_.sortBy(_.filter(Re,function(he){return he.seriesIndex===b}),"categoryIndex");var ee=D+_.findIndex(ae,function(he){return he.categoryIndex===M});ee>=ae.length||ee<0?(Z=this.rollToNextSeries(Re,b,W),j=Z[0],le=Z[1]):j=ae[ee].categoryIndex;break;case Ue.x0.PreviousSeries:case Ue.x0.NextSeries:D=W===Ue.x0.PreviousSeries?-1:1,ae=_.sortBy(_.filter(Re,function(he){return he.categoryIndex===M}),"seriesIndex");var I=D+_.findIndex(ae,function(he){return he.seriesIndex===b});I>=ae.length||I<0?(Ne=this.rollToNextCategory(Re,M,W),j=Ne[0],le=Ne[1]):le=ae[I].seriesIndex}return{element:Se.filter(function(he){return he.seriesIndex===le&&he.categoryIndex===j}).node(),targetCategoryIndex:j}},ue.prototype.rollToNextSeries=function(M,b,W){Jt.fF.assert(function(){return W===Ue.x0.PreviousCategory||W===Ue.x0.NextCategory},"expected a direction having to do with category");for(var Se,Z=W===Ue.x0.PreviousCategory?-1:1,Ne=W===Ue.x0.PreviousCategory?_.last:_.first;_.isEmpty(Se);)(b+=Z)>=this.numSeries?b=0:b<0&&(b=this.numSeries-1),Se=_.sortBy(_.filter(M,function(j){return j.seriesIndex===b}),function(j){return j.categoryIndex});return[Ne(Se).categoryIndex,b]},ue.prototype.rollToNextCategory=function(M,b,W){Jt.fF.assert(function(){return W===Ue.x0.PreviousSeries||W===Ue.x0.NextSeries},"expected a direction having to do with series");for(var Re,Z=d3.max(M,function(le){return le.categoryIndex})+1,Ne=W===Ue.x0.PreviousSeries?-1:1,Se=W===Ue.x0.PreviousSeries?_.last:_.first;_.isEmpty(Re);)(b+=Ne)>=Z?b=0:b<0&&(b=Z-1),Re=_.sortBy(_.filter(M,function(le){return le.categoryIndex===b}),function(le){return le.seriesIndex});var j=Se(Re).seriesIndex;return[b,j]},ue.prototype.getFirstElement=function(){return{element:this.mainGraphicsContext.selectAll(ue.MarkerCS.selector).node()}},ue.prototype.drawShadedBackground=function(M){var b=M.data.plotAreaShadingSettings,W=b.show&&M.supportsPlotAreaSymmetryShading,Z=this.hostChart.svg.selectAll(ue.PlotAreaShadingLayerCS.selector).data(W?[1]:[]).join(function(I){return I.insert("svg",":first-child").classed(ue.PlotAreaShadingLayerCS.class,!0).style("pointer-events","none")}).attrs({height:M.plotArea.height,width:M.plotArea.width});if(W){var Ne=M.xAxisProperties.scale,Se=M.yAxisProperties.scale,Re=Ne.domain(),j=Se.domain(),le=[Math.min(Re[0],j[0]),Math.max(Re[1],j[1])],ae=[{x:Ne(le[0]),y:Se(le[0])},{x:Ne(le[1]),y:Se(le[1])}];this.drawArea(ue.UpperShadingAreaCS,Z,b.show?[[{x:ae[0].x,y:ae[0].y},{x:ae[0].x,y:ae[1].y}],[{x:ae[1].x,y:ae[1].y},{x:ae[1].x,y:ae[1].y}]]:[],b.upperShadingColor,b.transparency),this.drawArea(ue.LowerShadingAreaCS,Z,b.show?[[{x:ae[0].x,y:ae[0].y},{x:ae[0].x,y:ae[0].y}],[{x:ae[1].x,y:ae[0].y},{x:ae[1].x,y:ae[1].y}]]:[],b.lowerShadingColor,b.transparency)}},ue.prototype.drawRatioLine=function(M){var b=M.data.ratioLineSettings,W=this.hostChart.svg.selectAll(ue.RatioLineLayerCS.selector).data(b?.strokeShow?[1]:[]).join(function(I){return I.append("svg").classed(ue.RatioLineLayerCS.class,!0)}).attrs({height:M.plotArea.height,width:M.plotArea.width});if(b?.strokeShow){var Z=M.xAxisProperties.scale,Ne=M.yAxisProperties.scale,Se=Z.domain(),Re=Ne.domain(),j=M.data.xSubtotal,le=M.data.ySubtotal,ae=[];if(_.isFinite(j)&&_.isFinite(le))if(0!==j&&0!==le){var D=le/j;ae=[{x:Z(Se[0]),y:Ne(Se[0]*D)},{x:Z(Se[1]),y:Ne(Se[1]*D)}]}else 0!==le?ae=[{x:Z(0),y:Ne(Re[0])},{x:Z(0),y:Ne(Re[1])}]:0!==j&&(ae=[{x:Z(Se[0]),y:Ne(0)},{x:Z(Se[1]),y:Ne(0)}]);var ee=d3.line().x(function(I){return I.x}).y(function(I){return I.y});W.selectAll(ue.RatioLineCS.selector).data([ae]).join(function(I){return I.append("path").classed(ue.RatioLineCS.class,!0)}).attr("d",function(I){return ee(I)}).style("fill","none").styles((0,re.bc)(b))}},ue.getXOfFirstCategory=function(M){if(M.hasCategoricalAxis){var b=M.xAxisProperties.scale;if((0,Pt._9)(b))return b.bandwidth()/2}return 0},ue.getMarkerFillOpacity=function(M,b,W,Z){return M||b?W&&!Z?.4:.85:0},ue.getMarkerStrokeOpacity=function(M,b,W,Z){return M&&b?1:W&&!Z?.4:.85},ue.getMarkerStrokeFill=function(M,b){if(null!=M.size&&b){var W=(0,aa.WV)(M.color);return W?(0,aa.Bx)((0,aa._j)(W,63.75)):M.color}return M.color},ue.updateMarkerGeometry=function(M,b,W){M.geometry={size:ue.calculateRadius(M.radius,b.data.sizeRange,b.plotArea,b.data.marker.rangeType,b.data.marker.multiplier),markerShape:b.data.marker.shape,x:b.xAxisProperties.scale(b.hasCategoricalAxis?M.categoryIndex:M.x)+W,y:b.yAxisProperties.scale(M.y)}},ue.prototype.drawArea=function(M,b,W,Z,Ne){var Se=d3.area().x0(function(Re){return Re[0].x}).y0(function(Re){return Re[0].y}).x1(function(Re){return Re[1].x}).y1(function(Re){return Re[1].y});b.selectAll(M.selector).data([W]).join(function(Re){return Re.append("path").classed(M.class,!0)}).attr("d",function(Re){return Se(Re)}).styles({fill:Z.solid.color,"fill-opacity":(0,aa.TD)(Ne)})},ue.MarkerCS=(0,jt.CH)("scatterMarker"),ue.MainGraphicsContext=(0,jt.CH)("mainGraphicsContext"),ue.MarkerSeriesGroupCS=(0,jt.CH)("scatterMarkerSeriesGroup"),ue.PlotAreaShadingLayerCS=(0,jt.CH)("plotAreaShadingLayer"),ue.UpperShadingAreaCS=(0,jt.CH)("upperShadingArea"),ue.LowerShadingAreaCS=(0,jt.CH)("lowerShadingArea"),ue.RatioLineLayerCS=(0,jt.CH)("ratioLineLayer"),ue.RatioLineCS=(0,jt.CH)("ratioLine"),ue.MarkerRefChartDim=300,ue.MarkerRefChartMinPixels=4,ue.MarkerRefChartMaxPixels=3e3,ue.MarkerRadiusDefault=6,ue.MarkerRadiusMax=30,ue.MarkerRadiusMin=2,ue}(),Qe=function(){function ue(M,b){this.viewModel=M,this.hostChart=b}return ue.prototype.remove=function(){this.hostChart.svg.selectAll(ue.TraceLineCS.selector).remove(),this.hostChart.svg.selectAll(ue.TraceBubbleCS.selector).remove()},ue.prototype.render=function(M,b){var W=this.viewModel,Z=W.viewModel,Ne=[];if(_.isEmpty(M)||Z.suppressDataPointRendering)this.remove();else{for(var Se=W.data.currentFrameIndex,Re=[],j=0,le=M.length;j<le;j++){Ne[j]=[],Re[j]=!1;for(var ae=0,D=W.data.allChartData.length;ae<D&&ae<=Se;ae++){var ee=_.find(W.data.allChartData[ae].dataPoints,function(O){var y=M[j];return y.renderIdentity?O.renderIdentity.getKey()===y.renderIdentity.getKey():O.identity.getKey()===M[j].identity.getKey()});null!=ee&&(ee.frameIndex=ae,Ne[j].push(ee),ae===Se&&(Re[j]=!0))}}var I=Z.xAxisProperties.scale,he=Z.yAxisProperties.scale,be=d3.line().x(function(O){return I(O.x)}).y(function(O){return he(O.y)}).defined(function(O){return null!==O.x&&null!==O.y}),de=[],q=[],ye=!1,ne=this.hostChart.svg.selectAll(ue.TraceLineCS.selector).data(M,function(O){return O.renderIdentity.getKey()}).join(function(O){return O.append("path").classed(ue.TraceLineCS.class,!0)}).each(function(O,ve,y){var E=y[ve],te=E.hasAttribute("d")?E.getTotalLength():0;de.push(te);var ce=$("<svg><path></path></svg>"),Q=$("path",ce);Q.attr("d",be(Ne[ve]));var X=Ne[ve].length>0?Q.get()[0].getTotalLength():0;q.push(X),ye||(ye=X<te)});ye?b?ne.transition().ease(ft.Je.ease).duration(ft.Je.duration).attr("stroke-dashoffset",function(O,ve){return de[ve]-q[ve]}).transition().ease(ft.Je.ease).duration(1).delay(0).style("stroke",function(O){return ge.getMarkerStrokeFill(O.marker,!0)}).attrs({d:function(ve,y){return be(Ne[y])},"stroke-dasharray":function(ve,y){return"".concat(q[y]," ").concat(q[y])},"stroke-dashoffset":0}):ne.style("stroke",function(O){return ge.getMarkerStrokeFill(O.marker,!0)}).attrs({d:function(ve,y){return be(Ne[y])},"stroke-dasharray":function(ve,y){return"".concat(q[y]," ").concat(q[y])},"stroke-dashoffset":0}):ne.style("stroke",function(O){return ge.getMarkerStrokeFill(O.marker,!0)}).attrs({d:function(ve,y){return be(Ne[y])},"stroke-dasharray":function(ve,y){return"".concat(q[y]," ").concat(q[y])},"stroke-dashoffset":function(ve,y){return q[y]-de[y]}}).call(function(O){return b?O.transition().ease(ft.Je.ease).duration(ft.Je.duration):O}).attr("stroke-dashoffset",0);for(var Le=[],qe=0;qe<Ne.length;qe++){var ct=Ne[qe],tt=Re[qe]?ct.slice(0,ct.length-1):ct;Le=Le.concat(tt)}var De=ge.getXOfFirstCategory(Z),Y=this.hostChart.svg.selectAll(ue.TraceBubbleCS.selector).data(Le.sort(function(O,ve){return ve.marker.size-O.marker.size}),function(O){return O.renderIdentity.getKey()+O.x+O.y+O.marker.size}).join(function(O){return O.append("path").classed(ue.TraceBubbleCS.class,!0).style("opacity",0)},function(O){return O},function(O){return O.transition().ease(ft.Je.ease).duration(ft.Je.duration).style("opacity",0).remove()}).attrs(function(O){return ge.updateMarkerGeometry(O,Z,De),{d:(0,d.jM)(O.marker.shape,O.geometry.size),transform:"translate(".concat(O.geometry.x,",").concat(O.geometry.y,")")}}).styles({"stroke-opacity":function(ve){return ve.selected?.85:.4},stroke:function(ve){return ge.getMarkerStrokeFill(ve.marker,W.data.chartData.colorBorder)},fill:function(ve){return ve.marker.color},"fill-opacity":function(ve){return null!=ve.marker.size?.2+ve.frameIndex/Se*.6:0}}).call(function(O){return O.transition().ease(ft.Je.ease).duration(ft.Je.duration).style("opacity",1)});this.hostChart.tooltipsEnabled&&this.hostChart.tooltipService.addTooltip(Y,function(O){var ve;return null===(ve=O.data)||void 0===ve?void 0:ve.tooltipInfo()},function(O){var ve;return(null===(ve=O.data)||void 0===ve?void 0:ve.identity)&&[O.data.identity]})}},ue.TraceLineCS=(0,jt.CH)("traceLine"),ue.TraceBubbleCS=(0,jt.CH)("traceBubble"),ue}()},58778:function(vi,ma,x){"use strict";x.d(ma,{B:function(){return Ue}});var d=x(62458),B=x(38078),re="BubblingEventListeners",Ze="BubblingEventManager",Ue=function(){function Vt(ft){this.root=ft,this.registeredBubblingEvents={},this.registeredCapturedEvents={},this.rootNode=ft.node(),(0,B.aT)(this.rootNode,Ze,this)}return Vt.prototype.ensureEventRegistered=function(ft,Dt){var Mt=this,U=Dt?this.registeredCapturedEvents:this.registeredBubblingEvents;if(!U[ft]){U[ft]=!0;var dt=Dt?Pt:Be,xt="".concat(ft,".").concat(Ze);Dt&&(xt+="Capture"),this.root.on(xt,function(){dt(Mt.root)},Dt)}},Vt.prototype.on=function(ft,Dt,Mt,U){var dt=function(Vt){var ft=Vt.indexOf(".");return-1===ft?Vt:Vt.substr(0,ft)}(Dt);this.ensureEventRegistered(dt,!!U);var xt=aa(ft,!0);if(xt){var ze=xt[dt];ze||(xt[dt]=ze={bubbling:{},captured:{}}),(U?ze.captured:ze.bubbling)[Dt]=Mt}},Vt}();function aa(Vt,ft){var Dt=(0,B.aT)(Vt,re);if(!Dt){if(!ft)return;(0,B.aT)(Vt,re,Dt={})}return Dt}function jt(Vt){for(var ft in Vt){var Dt=Vt[ft];Dt&&Dt()}}function Jt(Vt,ft){for(var Dt=Vt.node(),Mt=d3.event,U=Mt.target;U;){var dt=aa(U,!1);if(dt){var xt=dt[Mt.type];xt&&ft(xt)}if(U===Dt)break;d.fF.assert(function(){return!(0,B.aT)(U,Ze)},"BubblingEventManagers cannot overlap"),U=U.parentElement}}function Pt(Vt){var ft=[];Jt(Vt,function(Mt){var U=Mt.captured;U&&ft.push(U)});for(var Dt=ft.length;Dt-- >0;)jt(ft[Dt])}function Be(Vt){Jt(Vt,function(ft){var Dt=ft.bubbling;Dt&&jt(Dt)})}},60810:function(vi,ma,x){"use strict";x.d(ma,{G:function(){return d},J:function(){return B}});var d=function(re){return re[re.NoOperation=0]="NoOperation",re[re.WaitingForData=1]="WaitingForData",re[re.TriggeredLoadMore=2]="TriggeredLoadMore",re}({}),B=function(){function re(Ze){this.hostServices=Ze,this.waitingForData=!1}return re.prototype.shouldLoadMoreData=function(){return this.shouldLoadMoreDataInternal()===d.TriggeredLoadMore},re.prototype.isLoadingMoreData=function(){return this.waitingForData},re.prototype.updateDataView=function(Ze){this.dataView=Ze},re.prototype.loadMoreData=function(){var Ze=this.shouldLoadMoreDataInternal();return Ze===d.TriggeredLoadMore&&(this.hostServices.loadMoreData(),this.waitingForData=!0),Ze},re.prototype.onLoadMoreDataCompleted=function(){this.waitingForData=!1},re.prototype.shouldLoadMoreDataInternal=function(){if(!this.dataView)return d.NoOperation;var Ze=this.dataView.metadata;return this.waitingForData?d.WaitingForData:Ze&&Ze.segment?d.TriggeredLoadMore:d.NoOperation},re}()},81551:function(vi,ma,x){"use strict";x.d(ma,{E:function(){return d}});var d=function(){return function(re,Ze){this.x=re||0,this.y=Ze||0}}()},34644:function(vi,ma,x){"use strict";x.d(ma,{Ad:function(){return B},LL:function(){return Ze},_9:function(){return re}});var d=x(62458);function B(Ue){switch(Ue){case"linear":return d3.easeLinear;case"cubic-in-out":return d3.easeCubicInOut;case"cubic-out":return d3.easeCubicOut;case"back":return d3.easeBack;default:d.fF.assertNever(Ue)}return d3.easeCubicInOut}function re(Ue){return!!Ue.bandwidth}function Ze(Ue,Wt){var aa=Ue.selectAll(_.map(Wt,function(jt){return jt.selector}).join(", ")).nodes();aa.sort(function(jt,Jt){for(var Pt=0,Be=0;Be<Wt.length;Be++)Pt+=+d3.select(jt).classed(Wt[Be].class)*Be,Pt-=+d3.select(Jt).classed(Wt[Be].class)*Be;return Pt}),d3.selectAll(aa).order()}}}]);