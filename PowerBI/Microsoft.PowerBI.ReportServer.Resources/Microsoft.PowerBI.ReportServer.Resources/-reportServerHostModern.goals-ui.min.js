(self.webpackChunkreportServerHostModern=self.webpackChunkreportServerHostModern||[]).push([["goals-ui"],{77489:function(ht){ht.exports=function(T,S){(null==S||S>T.length)&&(S=T.length);for(var M=0,e=new Array(S);M<S;M++)e[M]=T[M];return e},ht.exports.default=ht.exports,ht.exports.__esModule=!0},32878:function(ht){function wt(S,M){for(var e=0;e<M.length;e++){var U=M[e];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(S,U.key,U)}}ht.exports=function(S,M,e){return M&&wt(S.prototype,M),e&&wt(S,e),S},ht.exports.default=ht.exports,ht.exports.__esModule=!0},34850:function(ht,wt,T){var S=T(91052);ht.exports=function(e,U){var Ee=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(Ee)return(Ee=Ee.call(e)).next.bind(Ee);if(Array.isArray(e)||(Ee=S(e))||U&&e&&"number"==typeof e.length){Ee&&(e=Ee);var Fe=0;return function(){return Fe>=e.length?{done:!0}:{done:!1,value:e[Fe++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},ht.exports.default=ht.exports,ht.exports.__esModule=!0},12864:function(ht,wt,T){var S=T(74);ht.exports=function(e,U){e.prototype=Object.create(U.prototype),e.prototype.constructor=e,S(e,U)},ht.exports.default=ht.exports,ht.exports.__esModule=!0},74:function(ht){function wt(T,S){return ht.exports=wt=Object.setPrototypeOf||function(e,U){return e.__proto__=U,e},ht.exports.default=ht.exports,ht.exports.__esModule=!0,wt(T,S)}ht.exports=wt,ht.exports.default=ht.exports,ht.exports.__esModule=!0},91052:function(ht,wt,T){var S=T(77489);ht.exports=function(e,U){if(e){if("string"==typeof e)return S(e,U);var Ee=Object.prototype.toString.call(e).slice(8,-1);if("Object"===Ee&&e.constructor&&(Ee=e.constructor.name),"Map"===Ee||"Set"===Ee)return Array.from(e);if("Arguments"===Ee||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ee))return S(e,U)}},ht.exports.default=ht.exports,ht.exports.__esModule=!0},36444:function(ht,wt,T){var S=T(32878).default,M=T(12864).default,e=T(34850).default;function U(){"use strict";U=function(){return Fe};var Ee,Fe={},Pe=Object.prototype,Ye=Pe.hasOwnProperty,je=Object.defineProperty||function(ue,Ce,ge){ue[Ce]=ge.value},Ie="function"==typeof Symbol?Symbol:{},j=Ie.iterator||"@@iterator",qe=Ie.asyncIterator||"@@asyncIterator",Te=Ie.toStringTag||"@@toStringTag";function V(ue,Ce,ge){return Object.defineProperty(ue,Ce,{value:ge,enumerable:!0,configurable:!0,writable:!0}),ue[Ce]}try{V({},"")}catch{V=function(ge,fe,tt){return ge[fe]=tt}}function be(ue,Ce,ge,fe){var nt=Object.create((Ce&&Ce.prototype instanceof Mt?Ce:Mt).prototype),De=new gt(fe||[]);return je(nt,"_invoke",{value:K(ue,ge,De)}),nt}function Je(ue,Ce,ge){try{return{type:"normal",arg:ue.call(Ce,ge)}}catch(fe){return{type:"throw",arg:fe}}}Fe.wrap=be;var pe="suspendedStart",Le="suspendedYield",Be="executing",Ue="completed",X={};function Mt(){}function Ne(){}function Me(){}var Ae={};V(Ae,j,function(){return this});var Ze=Object.getPrototypeOf,$e=Ze&&Ze(Ze(bt([])));$e&&$e!==Pe&&Ye.call($e,j)&&(Ae=$e);var ie=Me.prototype=Mt.prototype=Object.create(Ae);function Ke(ue){["next","throw","return"].forEach(function(Ce){V(ue,Ce,function(ge){return this._invoke(Ce,ge)})})}function Y(ue,Ce){function ge(tt,nt,De,Wt){var E=Je(ue[tt],ue,nt);if("throw"!==E.type){var En=E.arg,kn=En.value;return kn&&"object"==typeof kn&&Ye.call(kn,"__await")?Ce.resolve(kn.__await).then(function(cn){ge("next",cn,De,Wt)},function(cn){ge("throw",cn,De,Wt)}):Ce.resolve(kn).then(function(cn){En.value=cn,De(En)},function(cn){return ge("throw",cn,De,Wt)})}Wt(E.arg)}var fe;je(this,"_invoke",{value:function(nt,De){function Wt(){return new Ce(function(E,En){ge(nt,De,E,En)})}return fe=fe?fe.then(Wt,Wt):Wt()}})}function K(ue,Ce,ge){var fe=pe;return function(tt,nt){if(fe===Be)throw new Error("Generator is already running");if(fe===Ue){if("throw"===tt)throw nt;return{value:Ee,done:!0}}for(ge.method=tt,ge.arg=nt;;){var De=ge.delegate;if(De){var Wt=ae(De,ge);if(Wt){if(Wt===X)continue;return Wt}}if("next"===ge.method)ge.sent=ge._sent=ge.arg;else if("throw"===ge.method){if(fe===pe)throw fe=Ue,ge.arg;ge.dispatchException(ge.arg)}else"return"===ge.method&&ge.abrupt("return",ge.arg);fe=Be;var E=Je(ue,Ce,ge);if("normal"===E.type){if(fe=ge.done?Ue:Le,E.arg===X)continue;return{value:E.arg,done:ge.done}}"throw"===E.type&&(fe=Ue,ge.method="throw",ge.arg=E.arg)}}}function ae(ue,Ce){var ge=Ce.method,fe=ue.iterator[ge];if(fe===Ee)return Ce.delegate=null,"throw"===ge&&ue.iterator.return&&(Ce.method="return",Ce.arg=Ee,ae(ue,Ce),"throw"===Ce.method)||"return"!==ge&&(Ce.method="throw",Ce.arg=new TypeError("The iterator does not provide a '"+ge+"' method")),X;var tt=Je(fe,ue.iterator,Ce.arg);if("throw"===tt.type)return Ce.method="throw",Ce.arg=tt.arg,Ce.delegate=null,X;var nt=tt.arg;return nt?nt.done?(Ce[ue.resultName]=nt.value,Ce.next=ue.nextLoc,"return"!==Ce.method&&(Ce.method="next",Ce.arg=Ee),Ce.delegate=null,X):nt:(Ce.method="throw",Ce.arg=new TypeError("iterator result is not an object"),Ce.delegate=null,X)}function re(ue){var Ce={tryLoc:ue[0]};1 in ue&&(Ce.catchLoc=ue[1]),2 in ue&&(Ce.finallyLoc=ue[2],Ce.afterLoc=ue[3]),this.tryEntries.push(Ce)}function rt(ue){var Ce=ue.completion||{};Ce.type="normal",delete Ce.arg,ue.completion=Ce}function gt(ue){this.tryEntries=[{tryLoc:"root"}],ue.forEach(re,this),this.reset(!0)}function bt(ue){if(ue||""===ue){var Ce=ue[j];if(Ce)return Ce.call(ue);if("function"==typeof ue.next)return ue;if(!isNaN(ue.length)){var ge=-1,fe=function tt(){for(;++ge<ue.length;)if(Ye.call(ue,ge))return tt.value=ue[ge],tt.done=!1,tt;return tt.value=Ee,tt.done=!0,tt};return fe.next=fe}}throw new TypeError(typeof ue+" is not iterable")}return Ne.prototype=Me,je(ie,"constructor",{value:Me,configurable:!0}),je(Me,"constructor",{value:Ne,configurable:!0}),Ne.displayName=V(Me,Te,"GeneratorFunction"),Fe.isGeneratorFunction=function(ue){var Ce="function"==typeof ue&&ue.constructor;return!!Ce&&(Ce===Ne||"GeneratorFunction"===(Ce.displayName||Ce.name))},Fe.mark=function(ue){return Object.setPrototypeOf?Object.setPrototypeOf(ue,Me):(ue.__proto__=Me,V(ue,Te,"GeneratorFunction")),ue.prototype=Object.create(ie),ue},Fe.awrap=function(ue){return{__await:ue}},Ke(Y.prototype),V(Y.prototype,qe,function(){return this}),Fe.AsyncIterator=Y,Fe.async=function(ue,Ce,ge,fe,tt){void 0===tt&&(tt=Promise);var nt=new Y(be(ue,Ce,ge,fe),tt);return Fe.isGeneratorFunction(Ce)?nt:nt.next().then(function(De){return De.done?De.value:nt.next()})},Ke(ie),V(ie,Te,"Generator"),V(ie,j,function(){return this}),V(ie,"toString",function(){return"[object Generator]"}),Fe.keys=function(ue){var Ce=Object(ue),ge=[];for(var fe in Ce)ge.push(fe);return ge.reverse(),function tt(){for(;ge.length;){var nt=ge.pop();if(nt in Ce)return tt.value=nt,tt.done=!1,tt}return tt.done=!0,tt}},Fe.values=bt,gt.prototype={constructor:gt,reset:function(Ce){if(this.prev=0,this.next=0,this.sent=this._sent=Ee,this.done=!1,this.delegate=null,this.method="next",this.arg=Ee,this.tryEntries.forEach(rt),!Ce)for(var ge in this)"t"===ge.charAt(0)&&Ye.call(this,ge)&&!isNaN(+ge.slice(1))&&(this[ge]=Ee)},stop:function(){this.done=!0;var Ce=this.tryEntries[0].completion;if("throw"===Ce.type)throw Ce.arg;return this.rval},dispatchException:function(Ce){if(this.done)throw Ce;var ge=this;function fe(En,kn){return De.type="throw",De.arg=Ce,ge.next=En,kn&&(ge.method="next",ge.arg=Ee),!!kn}for(var tt=this.tryEntries.length-1;tt>=0;--tt){var nt=this.tryEntries[tt],De=nt.completion;if("root"===nt.tryLoc)return fe("end");if(nt.tryLoc<=this.prev){var Wt=Ye.call(nt,"catchLoc"),E=Ye.call(nt,"finallyLoc");if(Wt&&E){if(this.prev<nt.catchLoc)return fe(nt.catchLoc,!0);if(this.prev<nt.finallyLoc)return fe(nt.finallyLoc)}else if(Wt){if(this.prev<nt.catchLoc)return fe(nt.catchLoc,!0)}else{if(!E)throw new Error("try statement without catch or finally");if(this.prev<nt.finallyLoc)return fe(nt.finallyLoc)}}}},abrupt:function(Ce,ge){for(var fe=this.tryEntries.length-1;fe>=0;--fe){var tt=this.tryEntries[fe];if(tt.tryLoc<=this.prev&&Ye.call(tt,"finallyLoc")&&this.prev<tt.finallyLoc){var nt=tt;break}}nt&&("break"===Ce||"continue"===Ce)&&nt.tryLoc<=ge&&ge<=nt.finallyLoc&&(nt=null);var De=nt?nt.completion:{};return De.type=Ce,De.arg=ge,nt?(this.method="next",this.next=nt.finallyLoc,X):this.complete(De)},complete:function(Ce,ge){if("throw"===Ce.type)throw Ce.arg;return"break"===Ce.type||"continue"===Ce.type?this.next=Ce.arg:"return"===Ce.type?(this.rval=this.arg=Ce.arg,this.method="return",this.next="end"):"normal"===Ce.type&&ge&&(this.next=ge),X},finish:function(Ce){for(var ge=this.tryEntries.length-1;ge>=0;--ge){var fe=this.tryEntries[ge];if(fe.finallyLoc===Ce)return this.complete(fe.completion,fe.afterLoc),rt(fe),X}},catch:function(Ce){for(var ge=this.tryEntries.length-1;ge>=0;--ge){var fe=this.tryEntries[ge];if(fe.tryLoc===Ce){var tt=fe.completion;if("throw"===tt.type){var nt=tt.arg;rt(fe)}return nt}}throw new Error("illegal catch attempt")},delegateYield:function(Ce,ge,fe){return this.delegate={iterator:bt(Ce),resultName:ge,nextLoc:fe},"next"===this.method&&(this.arg=Ee),X}},Fe}typeof self<"u"&&self,ht.exports=function(){var je,Ie,Ee={302:function(Ie,j,qe){var V;j.formatArgs=function(V){if(V[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+V[0]+(this.useColors?"%c ":" ")+"+"+Ie.exports.humanize(this.diff),this.useColors){var be="color: "+this.color;V.splice(1,0,be,"color: inherit");var Je=0,pe=0;V[0].replace(/%[a-zA-Z%]/g,function(Le){"%%"!==Le&&(Je++,"%c"===Le&&(pe=Je))}),V.splice(pe,0,be)}},j.save=function(V){try{V?j.storage.setItem("debug",V):j.storage.removeItem("debug")}catch{}},j.load=function(){var V;try{V=j.storage.getItem("debug")}catch{}return!V&&typeof process<"u"&&"env"in process&&(V=process.env.DEBUG),V},j.useColors=function(){return!(!(typeof window<"u"&&window.process)||"renderer"!==window.process.type&&!window.process.__nwjs)||!(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},j.storage=function(){try{return localStorage}catch{}}(),j.destroy=(V=!1,function(){V||(V=!0)}),j.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],j.log=console.debug||console.log||function(){},Ie.exports=qe(65)(j),Ie.exports.formatters.j=function(V){try{return JSON.stringify(V)}catch(be){return"[UnexpectedJSONParseError]: "+be.message}}},65:function(Ie,j,qe){Ie.exports=function(Te){function V(pe){var Le,Be,Ue,X=null;function Mt(){for(var Ne=arguments.length,Me=new Array(Ne),Ae=0;Ae<Ne;Ae++)Me[Ae]=arguments[Ae];if(Mt.enabled){var Ze=Mt,$e=Number(new Date);Ze.diff=$e-(Le||$e),Ze.prev=Le,Ze.curr=$e,Le=$e,Me[0]=V.coerce(Me[0]),"string"!=typeof Me[0]&&Me.unshift("%O");var Ke=0;Me[0]=Me[0].replace(/%([a-zA-Z%])/g,function(Y,K){if("%%"===Y)return"%";Ke++;var ae=V.formatters[K];return"function"==typeof ae&&(Y=ae.call(Ze,Me[Ke]),Me.splice(Ke,1),Ke--),Y}),V.formatArgs.call(Ze,Me),(Ze.log||V.log).apply(Ze,Me)}}return Mt.namespace=pe,Mt.useColors=V.useColors(),Mt.color=V.selectColor(pe),Mt.extend=be,Mt.destroy=V.destroy,Object.defineProperty(Mt,"enabled",{enumerable:!0,configurable:!1,get:function(){return null!==X?X:(Be!==V.namespaces&&(Be=V.namespaces,Ue=V.enabled(pe)),Ue)},set:function(Me){X=Me}}),"function"==typeof V.init&&V.init(Mt),Mt}function be(pe,Le){var Be=V(this.namespace+(void 0===Le?":":Le)+pe);return Be.log=this.log,Be}function Je(pe){return pe.toString().substring(2,pe.toString().length-2).replace(/\.\*\?$/,"*")}return V.debug=V,V.default=V,V.coerce=function(pe){return pe instanceof Error?pe.stack||pe.message:pe},V.disable=function(){var pe=[].concat(V.names.map(Je),V.skips.map(Je).map(function(Le){return"-"+Le})).join(",");return V.enable(""),pe},V.enable=function(pe){var Le;V.save(pe),V.namespaces=pe,V.names=[],V.skips=[];var Be=("string"==typeof pe?pe:"").split(/[\s,]+/),Ue=Be.length;for(Le=0;Le<Ue;Le++)Be[Le]&&("-"===(pe=Be[Le].replace(/\*/g,".*?"))[0]?V.skips.push(new RegExp("^"+pe.slice(1)+"$")):V.names.push(new RegExp("^"+pe+"$")))},V.enabled=function(pe){if("*"===pe[pe.length-1])return!0;var Le,Be;for(Le=0,Be=V.skips.length;Le<Be;Le++)if(V.skips[Le].test(pe))return!1;for(Le=0,Be=V.names.length;Le<Be;Le++)if(V.names[Le].test(pe))return!0;return!1},V.humanize=qe(247),V.destroy=function(){},Object.keys(Te).forEach(function(pe){V[pe]=Te[pe]}),V.names=[],V.skips=[],V.formatters={},V.selectColor=function(pe){for(var Le=0,Be=0;Be<pe.length;Be++)Le=(Le<<5)-Le+pe.charCodeAt(Be),Le|=0;return V.colors[Math.abs(Le)%V.colors.length]},V.enable(V.load()),V}},247:function(Ie){var j=1e3,qe=60*j,Te=60*qe,V=24*Te;function Le(Be,Ue,X,Mt){var Ne=Ue>=1.5*X;return Math.round(Be/X)+" "+Mt+(Ne?"s":"")}Ie.exports=function(Be,Ue){Ue=Ue||{};var X=typeof Be;if("string"===X&&Be.length>0)return function(Be){if(!((Be=String(Be)).length>100)){var Ue=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(Be);if(Ue){var X=parseFloat(Ue[1]);switch((Ue[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*X;case"weeks":case"week":case"w":return 6048e5*X;case"days":case"day":case"d":return X*V;case"hours":case"hour":case"hrs":case"hr":case"h":return X*Te;case"minutes":case"minute":case"mins":case"min":case"m":return X*qe;case"seconds":case"second":case"secs":case"sec":case"s":return X*j;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return X;default:return}}}}(Be);if("number"===X&&isFinite(Be))return Ue.long?function(Be){var Ue=Math.abs(Be);return Ue>=V?Le(Be,Ue,V,"day"):Ue>=Te?Le(Be,Ue,Te,"hour"):Ue>=qe?Le(Be,Ue,qe,"minute"):Ue>=j?Le(Be,Ue,j,"second"):Be+" ms"}(Be):function(Be){var Ue=Math.abs(Be);return Ue>=V?Math.round(Be/V)+"d":Ue>=Te?Math.round(Be/Te)+"h":Ue>=qe?Math.round(Be/qe)+"m":Ue>=j?Math.round(Be/j)+"s":Be+"ms"}(Be);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(Be))}}},Fe={};function Pe(je){var Ie=Fe[je];if(void 0!==Ie)return Ie.exports;var j=Fe[je]={exports:{}};return Ee[je](j,j.exports,Pe),j.exports}Ie=Object.getPrototypeOf?function(j){return Object.getPrototypeOf(j)}:function(j){return j.__proto__},Pe.t=function(j,qe){if(1&qe&&(j=this(j)),8&qe||"object"==typeof j&&j&&(4&qe&&j.__esModule||16&qe&&"function"==typeof j.then))return j;var Te=Object.create(null);Pe.r(Te);var V={};je=je||[null,Ie({}),Ie([]),Ie(Ie)];for(var be=2&qe&&j;"object"==typeof be&&!~je.indexOf(be);be=Ie(be))Object.getOwnPropertyNames(be).forEach(function(Je){return V[Je]=function(){return j[Je]}});return V.default=function(){return j},Pe.d(Te,V),Te},Pe.d=function(je,Ie){for(var j in Ie)Pe.o(Ie,j)&&!Pe.o(je,j)&&Object.defineProperty(je,j,{enumerable:!0,get:Ie[j]})},Pe.o=function(je,Ie){return Object.prototype.hasOwnProperty.call(je,Ie)},Pe.r=function(je){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(je,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(je,"__esModule",{value:!0})};var Ye={};return function(){"use strict";Pe.r(Ye),Pe.d(Ye,{ActionObjectType:function(){return Ce},ChannelType:function(){return $r},ChildAppWindow:function(){return Ml},DialogDimension:function(){return cn},ErrorCode:function(){return fe},FileOpenPreference:function(){return ue},FrameContexts:function(){return E},HostClientType:function(){return De},HostName:function(){return Wt},LiveShareHost:function(){return ya},NotificationTypes:function(){return Cr},ParentAppWindow:function(){return ys},SecondaryM365ContentIdName:function(){return ge},TaskModuleDimension:function(){return di},TeamType:function(){return En},UserSettingTypes:function(){return Vo},UserTeamRole:function(){return kn},ViewerActionTypes:function(){return oo},app:function(){return Hn},appEntity:function(){return er},appInitialization:function(){return lt},appInstallDialog:function(){return aa},authentication:function(){return gi},barCode:function(){return yr},calendar:function(){return Mr},call:function(){return Dr},chat:function(){return sa},clipboard:function(){return br},conversations:function(){return ro},dialog:function(){return Pn},enablePrintCapability:function(){return $n},executeDeepLink:function(){return Vr},externalAppAuthentication:function(){return Jo},externalAppCardActions:function(){return Xo},files:function(){return qo},geoLocation:function(){return ca},getAdaptiveCardSchemaVersion:function(){return _s},getContext:function(){return Ir},getMruTabInstances:function(){return Gr},getTabInstances:function(){return ho},initialize:function(){return wn},initializeWithFrameContext:function(){return Ca},liveShare:function(){return fo},location:function(){return jt},logs:function(){return ra},mail:function(){return ri},marketplace:function(){return Co},media:function(){return _i},meeting:function(){return Yn},meetingRoom:function(){return Zo},menus:function(){return Do},monetization:function(){return No},navigateBack:function(){return Ar},navigateCrossDomain:function(){return Si},navigateToTab:function(){return Rr},notifications:function(){return Yo},openFilePreview:function(){return yl},pages:function(){return Qt},people:function(){return zo},print:function(){return Hi},profile:function(){return Pt},registerAppButtonClickHandler:function(){return Fr},registerAppButtonHoverEnterHandler:function(){return Uo},registerAppButtonHoverLeaveHandler:function(){return go},registerBackButtonHandler:function(){return wi},registerBeforeUnloadHandler:function(){return Ui},registerChangeSettingsHandler:function(){return ji},registerCustomHandler:function(){return Ri},registerFocusEnterHandler:function(){return Kn},registerFullScreenHandler:function(){return Bi},registerOnLoadHandler:function(){return jo},registerOnThemeChangeHandler:function(){return Ln},registerUserSettingsChangeHandler:function(){return Js},remoteCamera:function(){return Ko},returnFocus:function(){return si},search:function(){return pa},secondaryBrowser:function(){return ua},sendCustomEvent:function(){return cs},sendCustomMessage:function(){return Qs},setFrameContext:function(){return va},settings:function(){return Wo},shareDeepLink:function(){return ma},sharing:function(){return ga},stageView:function(){return Ni},tasks:function(){return Qo},teams:function(){return tr},teamsCore:function(){return Wn},thirdPartyCloudStorage:function(){return zi},uploadCustomApp:function(){return _l},version:function(){return ko},videoEffects:function(){return bi},videoEffectsEx:function(){return nr},visualMedia:function(){return Er},webStorage:function(){return kr}});var Te,V,s,je=(0,Pe(302).debug)("teamsJs");function Ie(s){return je.extend(s)}function j(s,g){return s+"_"+g}function qe(s){return/^v\d+_[\w.]+$/.test(s)}(s=Te||(Te={})).V_0="v0",s.V_1="v1",s.V_2="v2",s.V_3="v3",function(s){s.App_GetContext="app.getContext",s.App_Initialize="app.initialize",s.App_NotifyAppLoaded="app.notifyAppLoaded",s.App_NotifyExpectedFailure="app.notifyExpectedFailure",s.App_NotifyFailure="app.notifyFailure",s.App_NotifySuccess="app.notifySuccess",s.App_OpenLink="app.openLink",s.App_RegisterOnThemeChangeHandler="app.registerOnThemeChangeHandler",s.AppEntity_SelectAppEntity="appEntity.selectAppEntity",s.BarCode_HasPermission="barCode.hasPermission",s.BarCode_RequestPermission="barCode.requestPermission",s.BarCode_ScanBarCode="barCode.scanBarCode",s.Calendar_ComposeMeeting="calendar.composeMeeting",s.Calendar_OpenCalendarItem="calendar.openCalendarItem",s.Call_StartCall="call.startCall",s.Clipboard_Read="clipboard.read",s.Clipboard_Write="clipboard.write",s.Dialog_AdaptiveCard_Bot_Open="dialog.adaptiveCard.bot.open",s.Dialog_AdaptiveCard_Open="dialog.adaptiveCard.open",s.Dialog_Update_Resize="dialog.update.resize",s.Dialog_Url_Bot_Open="dialog.url.bot.open",s.Dialog_Url_Open="dialog.url.open",s.Dialog_Url_Submit="dialog.url.submit",s.Dialog_Url_SendMessageToParentFromDialog="dialog.url.sendMessageToParentFromDialog",s.Dialog_Url_SendMessageToDialog="dialog.url.sendMessageToDialog",s.GeoLocation_GetCurrentLocation="geoLocation.getCurrentLocation",s.GeoLocation_HasPermission="geoLocation.hasPermission",s.GeoLocation_Map_ChooseLocation="geoLocation.map.chooseLocation",s.GeoLocation_RequestPermission="geoLocation.hasPermission",s.GeoLocation_ShowLocation="geoLocation.showLocation",s.Location_GetLocation="location.getLocation",s.Location_ShowLocation="location.showLocation",s.Mail_ComposeMail="mail.composeMail",s.Mail_OpenMailItem="mail.openMailItem",s.Marketplace_AddOrUpdateCartItems="marketplace.addOrUpdateCartItems",s.Marketplace_GetCart="marketplace.getCart",s.Marketplace_RemoveCardItems="marketplace.removeCartItems",s.Marketplace_UpdateCartStatus="marketplace.updateCartStatus",s.Media_CaptureImage="media.captureImage",s.Media_Controller="media.controller",s.Media_GetMedia="media.getMedia",s.Media_HasPermission="media.hasPermission",s.Media_RequestPermission="media.requestPermission",s.Media_ScanBarCode="media.scanBarCode",s.Media_SelectMedia="media.selectMedia",s.Media_ViewImages="media.viewImages",s.Navigation_NavigateBack="navigation.navigateBack",s.Navigation_NavigateCrossDomain="navigation.navigateCrossDomain",s.Navigation_NavigateToTab="navigation.navigateToTab",s.Navigation_ReturnFocus="navigation.returnFocus",s.Pages_AppButton_OnClick="pages.appButton.onClick",s.Pages_AppButton_OnHoverEnter="pages.appButton.onHoverEnter",s.Pages_AppButton_OnHoverLeave="pages.appButton.onHoverLeave",s.Pages_BackStack_NavigateBack="pages.backStack.navigateBack",s.Pages_BackStack_RegisterBackButtonHandler="pages.backStack.registerBackButtonHandler",s.Pages_Config_RegisterChangeConfigHandler="pages.config.registerChangeConfigHandler",s.Pages_Config_RegisterOnRemoveHandlerHelper="pages.config.registerOnRemoveHandlerHelper",s.Pages_Config_RegisterOnSaveHandlerHelper="pages.config.registerOnSaveHandlerHelper",s.Pages_Config_SetConfig="pages.config.setConfig",s.Pages_Config_SetValidityState="pages.config.setValidityState",s.Pages_CurrentApp_NavigateTo="pages.currentApp.navigateTo",s.Pages_CurrentApp_NavigateToDefaultPage="pages.currentApp.navigateToDefaultPage",s.Pages_FullTrust_EnterFullscreen="pages.fullTrust.enterFullscreen",s.Pages_FullTrust_ExitFullscreen="pages.fullTrust.exitFullscreen",s.Pages_GetConfig="pages.getConfig.",s.Pages_NavigateCrossDomain="pages.navigateCrossDomain",s.Pages_NavigateToApp="pages.navigateToApp",s.Pages_RegisterFocusEnterHandler="pages.registerFocusEnterHandler",s.Pages_RegisterFullScreenHandler="pages.registerFullScreenHandler",s.Pages_ReturnFocus="pages.returnFocus",s.Pages_SetCurrentFrame="pages.setCurrentFrame",s.Pages_ShareDeepLink="pages.shareDeepLink",s.Pages_Tabs_GetMruTabInstances="pages.tabs.getMruTabInstances",s.Pages_Tabs_GetTabInstances="pages.tabs.getTabInstances",s.Pages_Tabs_NavigateToTab="pages.tabs.navigateToTab",s.PublicAPIs_ExecuteDeepLink="executeDeepLink",s.PublicAPIs_GetContext="getContext",s.PublicAPIs_GetMruTabInstances="getMruTabInstances",s.PublicAPIs_GetTabInstances="getTabInstances",s.PublicAPIs_Initialize="initialize",s.PublicAPIs_RegisterAppButtonClickHandler="registerAppButtonClickHandler",s.PublicAPIs_RegisterAppButtonHoverEnterHandler="registerAppButtonHoverEnterHandler",s.PublicAPIs_RegisterAppButtonHoverLeaveHandler="registerAppButtonHoverLeaveHandler",s.PublicAPIs_RegisterBackButtonHandler="registerBackButtonHandler",s.PublicAPIs_RegisterChangeSettingsHandler="registerChangeSettingsHandler",s.PublicAPIs_RegisterFocusEnterHandler="registerFocusEnterHandler",s.PublicAPIs_RegisterFullScreenHandler="registerFullScreenHandler",s.PublicAPIs_RegisterOnLoadHandler="registerOnLoadHandler",s.PublicAPIs_RegisterOnThemeChangeHandlerHelper="registerOnThemeChangeHandlerHelper",s.PublicAPIs_SetFrameContext="setFrameContext",s.PublicAPIs_ShareDeepLink="shareDeepLink",s.RegisterHandler="registerHandler",s.RegisterOnThemeChangeHandler="registerOnThemeChangeHandler",s.Settings_Remove_Failure="settings.remove.failure",s.Settings_Remove_Success="settings.remove.success",s.Settings_Save_Failure="settings.save.failure",s.Settings_Save_Success="settings.save.success",s.Tasks_StartTask="tasks.startTask",s.Tasks_SubmitTask="tasks.submitTask",s.Tasks_UpdateTask="tasks.updateTask"}(V||(V={}));var be=JSON.parse('{"validOrigins":["teams.microsoft.com","teams.microsoft.us","gov.teams.microsoft.us","dod.teams.microsoft.us","int.teams.microsoft.com","teams.live.com","devspaces.skype.com","ssauth.skype.com","local.teams.live.com","local.teams.live.com:8080","local.teams.office.com","local.teams.office.com:8080","outlook.office.com","outlook-sdf.office.com","outlook.office365.com","outlook-sdf.office365.com","outlook.live.com","outlook-sdf.live.com","*.teams.microsoft.com","*.www.office.com","www.office.com","word.office.com","excel.office.com","powerpoint.office.com","www.officeppe.com","*.www.microsoft365.com","www.microsoft365.com","bing.com","edgeservices.bing.com","www.bing.com","www.staging-bing-int.com","teams.cloud.microsoft","outlook.cloud.microsoft","m365.cloud.microsoft","copilot.microsoft.com"]}'),Je="2.0.1",Be="1.8.0",Ue=Pe.t(be,2).validOrigins,X=new URL("https://res.cdn.office.net/teams-js/validDomains/json/validDomains.json"),Mt=/^https:\/\//,Ne="https",Me="teams.microsoft.com",Ae="The library has not yet been initialized",Ze="The runtime has not yet been initialized",$e="The runtime version is not supported",ie=function(){};ie.initializeCalled=!1,ie.initializeCompleted=!1,ie.additionalValidOrigins=[],ie.initializePromise=void 0,ie.isFramelessWindow=!1,ie.frameContext=void 0,ie.hostClientType=void 0,ie.printCapabilityEnabled=!1;var Y,Ke={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},K=new Uint8Array(16);function ae(){if(!Y&&!(Y=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Y(K)}for(var re=[],rt=0;rt<256;++rt)re.push((rt+256).toString(16).slice(1));var ue,Ce,ge,fe,tt,nt,De,Wt,E,En,kn,cn,bt=function(g,v,C){if(Ke.randomUUID&&!v&&!g)return Ke.randomUUID();var m=(g=g||{}).random||(g.rng||ae)();if(m[6]=15&m[6]|64,m[8]=63&m[8]|128,v){C=C||0;for(var w=0;w<16;++w)v[C+w]=m[w];return v}return function(s,g){return void 0===g&&(g=0),(re[s[g+0]]+re[s[g+1]]+re[s[g+2]]+re[s[g+3]]+"-"+re[s[g+4]]+re[s[g+5]]+"-"+re[s[g+6]]+re[s[g+7]]+"-"+re[s[g+8]]+re[s[g+9]]+"-"+re[s[g+10]]+re[s[g+11]]+re[s[g+12]]+re[s[g+13]]+re[s[g+14]]+re[s[g+15]]).toLowerCase()}(m)};(function(s){s.Inline="inline",s.Desktop="desktop",s.Web="web"})(ue||(ue={})),function(s){s.M365Content="m365content"}(Ce||(Ce={})),function(s){s.DriveId="driveId",s.GroupId="groupId",s.SiteId="siteId",s.UserId="userId"}(ge||(ge={})),function(s){s[s.NOT_SUPPORTED_ON_PLATFORM=100]="NOT_SUPPORTED_ON_PLATFORM",s[s.INTERNAL_ERROR=500]="INTERNAL_ERROR",s[s.NOT_SUPPORTED_IN_CURRENT_CONTEXT=501]="NOT_SUPPORTED_IN_CURRENT_CONTEXT",s[s.PERMISSION_DENIED=1e3]="PERMISSION_DENIED",s[s.NETWORK_ERROR=2e3]="NETWORK_ERROR",s[s.NO_HW_SUPPORT=3e3]="NO_HW_SUPPORT",s[s.INVALID_ARGUMENTS=4e3]="INVALID_ARGUMENTS",s[s.UNAUTHORIZED_USER_OPERATION=5e3]="UNAUTHORIZED_USER_OPERATION",s[s.INSUFFICIENT_RESOURCES=6e3]="INSUFFICIENT_RESOURCES",s[s.THROTTLE=7e3]="THROTTLE",s[s.USER_ABORT=8e3]="USER_ABORT",s[s.OPERATION_TIMED_OUT=8001]="OPERATION_TIMED_OUT",s[s.OLD_PLATFORM=9e3]="OLD_PLATFORM",s[s.FILE_NOT_FOUND=404]="FILE_NOT_FOUND",s[s.SIZE_EXCEEDED=1e4]="SIZE_EXCEEDED"}(fe||(fe={})),function(s){s.GeoLocation="geolocation",s.Media="media"}(tt||(tt={})),function(s){s.TextPlain="text/plain",s.TextHtml="text/html",s.ImagePNG="image/png",s.ImageJPEG="image/jpeg"}(nt||(nt={})),function(s){s.desktop="desktop",s.web="web",s.android="android",s.ios="ios",s.ipados="ipados",s.macos="macos",s.rigel="rigel",s.surfaceHub="surfaceHub",s.teamsRoomsWindows="teamsRoomsWindows",s.teamsRoomsAndroid="teamsRoomsAndroid",s.teamsPhones="teamsPhones",s.teamsDisplays="teamsDisplays"}(De||(De={})),function(s){s.office="Office",s.outlook="Outlook",s.outlookWin32="OutlookWin32",s.orange="Orange",s.places="Places",s.teams="Teams",s.teamsModern="TeamsModern"}(Wt||(Wt={})),function(s){s.settings="settings",s.content="content",s.authentication="authentication",s.remove="remove",s.task="task",s.sidePanel="sidePanel",s.stage="stage",s.meetingStage="meetingStage"}(E||(E={})),function(s){s[s.Standard=0]="Standard",s[s.Edu=1]="Edu",s[s.Class=2]="Class",s[s.Plc=3]="Plc",s[s.Staff=4]="Staff"}(En||(En={})),function(s){s[s.Admin=0]="Admin",s[s.User=1]="User",s[s.Guest=2]="Guest"}(kn||(kn={})),function(s){s.Large="large",s.Medium="medium",s.Small="small"}(cn||(cn={}));var $r,di=cn;!function(s){s.Regular="Regular",s.Private="Private",s.Shared="Shared"}($r||($r={}));var de={errorCode:fe.NOT_SUPPORTED_ON_PLATFORM},Xi={adaptiveCardSchemaVersion:{majorVersion:1,minorVersion:5}},Zl=new Error("Invalid input count: Must supply a valid image count (limit of 10)."),zn=new Error("Invalid response: Received more images than the specified max limit in the response.");function pi(s){return function(g,v){if(!g)throw new Error(s||v)}}function on(s,g){if("string"!=typeof s||"string"!=typeof g)return NaN;var v=s.split("."),C=g.split(".");function m(I){return/^\d+$/.test(I)}if(!v.every(m)||!C.every(m))return NaN;for(;v.length<C.length;)v.push("0");for(;C.length<v.length;)C.push("0");for(var w=0;w<v.length;++w)if(Number(v[w])!=Number(C[w]))return Number(v[w])>Number(C[w])?1:-1;return 0}function So(){return bt()}function Jr(s){return Object.keys(s).forEach(function(g){"object"==typeof s[g]&&Jr(s[g])}),Object.freeze(s)}function Zi(s,g){for(var v=arguments.length,C=new Array(v>2?v-2:0),m=2;m<v;m++)C[m-2]=arguments[m];var w=s.apply(void 0,C);return w.then(function(){g&&g(null)}).catch(function(I){g&&g(I)}),w}function Po(s){return!(on(s.majorVersion+"."+s.minorVersion,"1.5")>=0)}function xi(s){return"https:"===s.protocol}function Oi(s,g){return new Promise(function(v,C){s||C("MimeType cannot be null or empty."),g||C("Base64 string cannot be null or empty.");var m=atob(g);if(s.startsWith("image/")){for(var w=new Uint8Array(m.length),I=0;I<m.length;I++)w[I]=m.charCodeAt(I);v(new Blob([w],{type:s}))}v(new Blob([m],{type:s}))})}function Ki(s){return new Promise(function(g,v){0===s.size&&v(new Error("Blob cannot be empty."));var C=new FileReader;C.onloadend=function(){C.result?g(C.result.toString().split(",")[1]):v(new Error("Failed to read the blob"))},C.onerror=function(){v(C.error)},C.readAsDataURL(s)})}function $t(){if(qt())throw new Error("window object undefined at SSR check");return window}function qt(){return typeof window>"u"}var ei=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function zt(s){if(!ei.test(s))throw new Error("App ID is not valid. Must be GUID format. App ID: "+s)}var Cn=Ie("runtime"),un=3;function In(s){return s.apiVersion===un}var b={apiVersion:-1,supports:{}},qn={apiVersion:3,hostVersionsInfo:Xi,isLegacyTeams:!0,supports:{appInstallDialog:{},appEntity:{},call:{},chat:{},conversations:{},dialog:{card:{bot:{}},url:{bot:{}},update:{}},interactive:{},logs:{},meetingRoom:{},menus:{},monetization:{},notifications:{},pages:{config:{},backStack:{},fullTrust:{}},remoteCamera:{},teams:{fullTrust:{}},teamsCore:{},video:{sharedFrame:{}}}},_n=[De.desktop,De.web,De.rigel,De.surfaceHub,De.teamsRoomsWindows,De.teamsRoomsAndroid,De.teamsPhones,De.teamsDisplays],ar=[].concat(_n,[De.android,De.ios,De.ipados]);var xo=[{versionToUpgradeFrom:1,upgradeToNextVersion:function(g){var v;return{apiVersion:2,hostVersionsInfo:void 0,isLegacyTeams:g.isLegacyTeams,supports:Object.assign(Object.assign({},g.supports),{dialog:g.supports.dialog?{card:void 0,url:g.supports.dialog,update:null===(v=g.supports.dialog)||void 0===v?void 0:v.update}:void 0})}}},{versionToUpgradeFrom:2,upgradeToNextVersion:function(g){var m=function(g,v){var C={};for(var m in g)Object.prototype.hasOwnProperty.call(g,m)&&v.indexOf(m)<0&&(C[m]=g[m]);if(null!=g&&"function"==typeof Object.getOwnPropertySymbols){var w=0;for(m=Object.getOwnPropertySymbols(g);w<m.length;w++)v.indexOf(m[w])<0&&Object.prototype.propertyIsEnumerable.call(g,m[w])&&(C[m[w]]=g[m[w]])}return C}(g.supports,["appNotification"]);return Object.assign(Object.assign({},g),{apiVersion:3,supports:m})}}],Oo={"1.0.0":[{capability:{pages:{appButton:{},tabs:{}},stageView:{}},hostClientTypes:_n}],"1.9.0":[{capability:{location:{}},hostClientTypes:ar}],"2.0.0":[{capability:{people:{}},hostClientTypes:ar},{capability:{sharing:{}},hostClientTypes:[De.desktop,De.web]}],"2.0.1":[{capability:{teams:{fullTrust:{joinedTeams:{}}}},hostClientTypes:[De.android,De.desktop,De.ios,De.teamsRoomsAndroid,De.teamsPhones,De.teamsDisplays,De.web]},{capability:{webStorage:{}},hostClientTypes:[De.desktop]}],"2.0.5":[{capability:{webStorage:{}},hostClientTypes:[De.android,De.ios]}],"2.0.8":[{capability:{sharing:{}},hostClientTypes:[De.android,De.ios]}]},St=Cn.extend("generateBackCompatRuntimeConfig");function Xr(s,g){var v=Object.assign({},s);for(var C in g)Object.prototype.hasOwnProperty.call(g,C)&&("object"!=typeof g[C]||Array.isArray(g[C])?C in s||(v[C]=g[C]):v[C]=Xr(s[C]||{},g[C]));return v}function en(s,g,v){St("generating back compat runtime config for %s",s);var C=Object.assign({},g.supports);St("Supported capabilities in config before updating based on highestSupportedVersion: %o",C),Object.keys(v).forEach(function(w){on(s,w)>=0&&v[w].forEach(function(I){void 0!==ie.hostClientType&&I.hostClientTypes.includes(ie.hostClientType)&&(C=Xr(C,I.capability))})});var m={apiVersion:un,hostVersionsInfo:Xi,isLegacyTeams:!0,supports:C};return St("Runtime config after updating based on highestSupportedVersion: %o",m),m}var To=Cn.extend("applyRuntimeConfig");function Eo(s){"string"==typeof s.apiVersion&&(To("Trying to apply runtime with string apiVersion, processing as v1: %o",s),s=Object.assign(Object.assign({},s),{apiVersion:1})),To("Fast-forwarding runtime %o",s);var g=function(s){var g=s;if(g.apiVersion<un&&xo.forEach(function(v){g.apiVersion===v.versionToUpgradeFrom&&(g=v.upgradeToNextVersion(g))}),In(g))return g;throw new Error("Received a runtime that could not be upgraded to the latest version")}(s);To("Applying runtime %o",g),b=Jr(g)}var ko="2.19.0",Ht=Ie("internal"),Yl=Ht.extend("ensureInitializeCalled"),Fn=Ht.extend("ensureInitialized");function Zn(){if(!ie.initializeCalled)throw Yl(Ae),new Error(Ae)}function z(s){if(!ie.initializeCompleted)throw Fn("%s. initializeCalled: %s",Ae,ie.initializeCalled.toString()),new Error(Ae);for(var g=arguments.length,v=new Array(g>1?g-1:0),C=1;C<g;C++)v[C-1]=arguments[C];if(v&&v.length>0){for(var m=!1,w=0;w<v.length;w++)if(v[w]===ie.frameContext){m=!0;break}if(!m)throw new Error("This call is only allowed in following contexts: "+JSON.stringify(v)+'. Current context: "'+ie.frameContext+'".')}return function(s){if(In(s))return!0;throw-1===s.apiVersion?new Error(Ze):new Error($e)}(s)}function dn(s){void 0===s&&(s=Je);var g=on(ie.clientSupportedSDKVersion,s);return!isNaN(g)&&g>=0}function Ti(){return ie.hostClientType==De.android||ie.hostClientType==De.ios||ie.hostClientType==De.ipados}function lr(s){if(void 0===s&&(s=Je),!Ti())throw{errorCode:fe.NOT_SUPPORTED_ON_PLATFORM};if(!dn(s))throw{errorCode:fe.OLD_PLATFORM}}function Vt(s){return null==s}var gi,Ka=function(g,v,C,m){return new(C||(C=Promise))(function(I,G){function R(Q){try{k(m.next(Q))}catch(J){G(J)}}function F(Q){try{k(m.throw(Q))}catch(J){G(J)}}function k(Q){Q.done?I(Q.value):function(I){return I instanceof C?I:new C(function(G){G(I)})}(Q.value).then(R,F)}k((m=m.apply(g,v||[])).next())})},Ei=[],Rt=Ie("validateOrigin");function el(){return Ka(this,void 0,void 0,U().mark(function s(){return U().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",0!==Ei.length?Ei:qt()?(Ei=Ue,Ue):fetch(X).then(function(C){if(!C.ok)throw new Error("Invalid Response from Fetch Call");return C.json().then(function(m){if(qr(JSON.stringify(m)))return Ei=m.validOrigins;throw new Error("Valid Origins List Is Invalid")})}).catch(function(C){return Rt("validOrigins fetch call to CDN failed with error: %s. Defaulting to fallback list",C),Ei=Ue}));case 1:case"end":return v.stop()}},s)}))}function qr(s){var g=JSON.parse(s);try{g=JSON.parse(s)}catch{return!1}if(!g.validOrigins)return!1;for(var C,v=e(g.validOrigins);!(C=v()).done;){var m=C.value;try{new URL("https://"+m)}catch{return Rt("isValidOriginsFromCDN call failed to validate origin: %s",m),!1}}return!0}function ni(s,g){if("*."===s.substring(0,2)){var v=s.substring(1);if(g.length>v.length&&g.split(".").length===v.split(".").length&&g.substring(g.length-v.length)===v)return!0}else if(s===g)return!0;return!1}function sr(s){return el().then(function(g){if(!xi(s))return Rt("Origin %s is invalid because it is not using https protocol. Protocol being used: %s",s,s.protocol),!1;var v=s.host;if(g.some(function(I){return ni(I,v)}))return!0;for(var m,C=e(ie.additionalValidOrigins);!(m=C()).done;){var w=m.value;if(ni("https://"===w.substring(0,8)?w.substring(8):w,v))return!0}return Rt("Origin %s is invalid because it is not an origin approved by this library or included in the call to app.initialize.\nOrigins approved by this library: %o\nOrigins included in app.initialize: %o",s,g,ie.additionalValidOrigins),!1})}!function(s){var g,v,C,q;function w(q){return new Promise(function(Se,se){if(ie.hostClientType===De.desktop||ie.hostClientType===De.android||ie.hostClientType===De.ios||ie.hostClientType===De.ipados||ie.hostClientType===De.macos||ie.hostClientType===De.rigel||ie.hostClientType===De.teamsRoomsWindows||ie.hostClientType===De.teamsRoomsAndroid||ie.hostClientType===De.teamsPhones||ie.hostClientType===De.teamsDisplays||ie.hostClientType===De.surfaceHub){var he=document.createElement("a");he.href=q.url,Se(Rn("authentication.authenticate",[he.href,q.width,q.height,q.isExternal]).then(function(st){var yn=st[1];if(st[0])return yn;throw new Error(yn)}))}else g={success:Se,fail:se},function(q){R();var Se=q.width||600,se=q.height||400;Se=Math.min(Se,_e.currentWindow.outerWidth-400),se=Math.min(se,_e.currentWindow.outerHeight-200);var he=document.createElement("a");he.href=q.url.replace("{oauthRedirectMethod}","web");var st=void 0!==_e.currentWindow.screenLeft?_e.currentWindow.screenLeft:_e.currentWindow.screenX,Ct=void 0!==_e.currentWindow.screenTop?_e.currentWindow.screenTop:_e.currentWindow.screenY;_e.childWindow=_e.currentWindow.open(he.href,"_blank","toolbar=no, location=yes, status=no, menubar=no, scrollbars=yes, top="+(Ct+=_e.currentWindow.outerHeight/2-se/2)+", left="+(st+=_e.currentWindow.outerWidth/2-Se/2)+", width="+Se+", height="+se),_e.childWindow?(k(),v=_e.currentWindow.setInterval(function(){if(!_e.childWindow||_e.childWindow.closed)ye("CancelledByUser");else{var q=_e.childOrigin;try{_e.childOrigin="*",An("ping")}finally{_e.childOrigin=q}}},100),at("initialize",function(){return[E.authentication,ie.hostClientType]}),at("navigateCrossDomain",function(){return!1})):ye("FailedToOpenWindow")}(q)})}function R(){k();try{_e.childWindow&&_e.childWindow.close()}finally{_e.childWindow=null,_e.childOrigin=null}}function k(){v&&(clearInterval(v),v=0),pn("initialize"),pn("navigateCrossDomain")}function J(q){try{g&&g.success(q)}finally{g=void 0,R()}}function ye(q){try{g&&g.fail(new Error(q))}finally{g=void 0,R()}}function ut(q,Se,se){if(q){var he=document.createElement("a");he.href=decodeURIComponent(q),he.host&&he.host!==$t().location.host&&"outlook.office.com"===he.host&&he.search.indexOf("client_type=Win32_Outlook")>-1&&(Se&&"result"===Se&&(se&&(he.href=we(he.href,"result",se)),_e.currentWindow.location.assign(we(he.href,"authSuccess",""))),Se&&"reason"===Se&&(se&&(he.href=we(he.href,"reason",se)),_e.currentWindow.location.assign(we(he.href,"authFailure",""))))}}function we(q,Se,se){var he=q.indexOf("#"),st=-1===he?"#":q.substr(he);return st=st+"&"+Se+(""!==se?"="+se:""),(q=-1===he?q:q.substr(0,he))+st}s.initialize=function(){at("authentication.authenticate.success",J,!1),at("authentication.authenticate.failure",ye,!1)},s.registerAuthenticationHandlers=function(q){C=q},s.authenticate=function(q){var Se=void 0!==q,se=Se?q:C;if(!se)throw new Error("No parameters are provided for authentication");return z(b,E.content,E.sidePanel,E.settings,E.remove,E.task,E.stage,E.meetingStage),w(se).then(function(he){try{return se&&se.successCallback?(se.successCallback(he),""):he}finally{Se||(C=void 0)}}).catch(function(he){try{if(se&&se.failureCallback)return se.failureCallback(he.message),"";throw he}finally{Se||(C=void 0)}})},s.getAuthToken=function(q){return Zn(),function(q){return new Promise(function(Se){Se(Rn("authentication.getAuthToken",[q?.resources,q?.claims,q?.silent]))}).then(function(Se){var he=Se[1];if(Se[0])return he;throw new Error(he)})}(q).then(function(Se){return q&&q.successCallback?(q.successCallback(Se),""):Se}).catch(function(Se){if(q&&q.failureCallback)return q.failureCallback(Se.message),"";throw Se})},s.getUser=function(q){return Zn(),new Promise(function(q){q(Rn("authentication.getUser"))}).then(function(q){var se=q[1];if(q[0])return se;throw new Error(se)}).then(function(Se){return q&&q.successCallback?(q.successCallback(Se),null):Se}).catch(function(Se){if(q&&q.failureCallback)return q.failureCallback(Se.message),null;throw Se})},s.notifySuccess=function(q,Se){ut(Se,"result",q),z(b,E.authentication),ke("authentication.authenticate.success",[q]),na(_e.parentWindow,function(){return setTimeout(function(){return _e.currentWindow.close()},200)})},s.notifyFailure=function(q,Se){ut(Se,"reason",q),z(b,E.authentication),ke("authentication.authenticate.failure",[q]),na(_e.parentWindow,function(){return setTimeout(function(){return _e.currentWindow.close()},200)})},(q=s.DataResidency||(s.DataResidency={})).Public="public",q.EUDB="eudb",q.Other="other"}(gi||(gi={}));var Pn,Do,Ut=Te.V_2;function Gn(s,g){if(z(b,E.content,E.sidePanel,E.task,E.meetingStage),!Pn.update.isSupported())throw de;ft(s,"tasks.updateTask",[g])}function ii(s,g,v,C){if(z(b,E.content,E.sidePanel,E.meetingStage),!Pn.url.isSupported())throw de;C&&at("messageForParent",C),ft(s,"tasks.startTask",[Pn.url.getDialogInfoFromUrlDialogInfo(g)],function(m,w){v?.({err:m,result:w}),pn("messageForParent")})}function xt(s,g,v,C){if(z(b,E.content,E.sidePanel,E.meetingStage),!Pn.url.bot.isSupported())throw de;C&&at("messageForParent",C),ft(s,"tasks.startTask",[Pn.url.getDialogInfoFromBotUrlDialogInfo(g)],function(m,w){v?.({err:m,result:w}),pn("messageForParent")})}function tl(s,g,v){if(z(b,E.content,E.task),!Pn.url.isSupported())throw de;ft(s,"tasks.completeTask",[g,v?Array.isArray(v)?v:[v]:[]])}(function(s){var I,g=[];function v(I){ie.frameContext&&(ie.frameContext===E.task?g.push(I):pn("messageForChild"))}s.initialize=function(){at("messageForChild",v,!1)},function(I){function G(){return z(b)&&void 0!==(b.supports.dialog&&b.supports.dialog.url)}var k;function F(k){return{url:k.url,height:k.size?k.size.height:cn.Small,width:k.size?k.size.width:cn.Small,title:k.title,fallbackUrl:k.fallbackUrl}}I.open=function(k,Q,J){ii(j(Ut,V.Dialog_Url_Open),k,Q,J)},I.submit=function(k,Q){tl(j(Ut,V.Dialog_Url_Submit),k,Q)},I.sendMessageToParentFromDialog=function(k){if(z(b,E.task),!G())throw de;ft(j(Ut,V.Dialog_Url_SendMessageToParentFromDialog),"messageForParent",[k])},I.sendMessageToDialog=function(k){if(z(b,E.content,E.sidePanel,E.meetingStage),!G())throw de;ft(j(Ut,V.Dialog_Url_SendMessageToDialog),"messageForChild",[k])},I.registerOnMessageFromParent=function(k){if(z(b,E.task),!G())throw de;for(pn("messageForChild"),at("messageForChild",k),g.reverse();g.length>0;)k(g.pop())},I.isSupported=G,(k=I.bot||(I.bot={})).open=function(Q,J,ye){xt(j(Ut,V.Dialog_Url_Bot_Open),Q,J,ye)},k.isSupported=function(){return z(b)&&void 0!==(b.supports.dialog&&b.supports.dialog.url&&b.supports.dialog.url.bot)},I.getDialogInfoFromUrlDialogInfo=F,I.getDialogInfoFromBotUrlDialogInfo=function(k){var Q=F(k);return Q.completionBotId=k.completionBotId,Q}}(s.url||(s.url={})),s.isSupported=function(){return!(!z(b)||!b.supports.dialog)},(I=s.update||(s.update={})).resize=function(G){Gn(j(Ut,V.Dialog_Update_Resize),G)},I.isSupported=function(){return!(!z(b)||!b.supports.dialog||!b.supports.dialog.update)},function(I){function G(){var Q=b.hostVersionsInfo&&b.hostVersionsInfo.adaptiveCardSchemaVersion&&!Po(b.hostVersionsInfo.adaptiveCardSchemaVersion);return z(b)&&void 0!==(Q&&b.supports.dialog&&b.supports.dialog.card)}function F(Q){return{card:Q.card,height:Q.size?Q.size.height:cn.Small,width:Q.size?Q.size.width:cn.Small,title:Q.title}}I.open=function(Q,J){if(z(b,E.content,E.sidePanel,E.meetingStage),!G())throw de;var ye=F(Q);ft(j(Ut,V.Dialog_AdaptiveCard_Open),"tasks.startTask",[ye],function(ut,we){J?.({err:ut,result:we})})},I.isSupported=G,function(Q){function J(){var ye=b.hostVersionsInfo&&b.hostVersionsInfo.adaptiveCardSchemaVersion&&!Po(b.hostVersionsInfo.adaptiveCardSchemaVersion);return z(b)&&void 0!==(ye&&b.supports.dialog&&b.supports.dialog.card&&b.supports.dialog.card.bot)}Q.open=function(ye,ut){if(z(b,E.content,E.sidePanel,E.meetingStage),!J())throw de;var we=function(Q){var J=F(Q);return J.completionBotId=Q.completionBotId,J}(ye);ft(j(Ut,V.Dialog_AdaptiveCard_Bot_Open),"tasks.startTask",[we],function(q,Se){ut?.({err:q,result:Se})})},Q.isSupported=J}(I.bot||(I.bot={}))}(s.adaptiveCard||(s.adaptiveCard={}))})(Pn||(Pn={})),function(s){var C,m,w,k;function I(k){w&&w(k)||(z(b),ke("viewConfigItemPress",[k]))}function G(k){C&&C(k)||(z(b),ke("handleNavBarMenuItemPress",[k]))}function R(k){m&&m(k)||(z(b),ke("handleActionMenuItemPress",[k]))}function F(){return!(!z(b)||!b.supports.menus)}(k=s.DisplayMode||(s.DisplayMode={}))[k.ifRoom=0]="ifRoom",k[k.overflowOnly=1]="overflowOnly",s.MenuItem=function(){return function(){this.enabled=!0,this.selected=!1}}(),function(k){k.dropDown="dropDown",k.popOver="popOver"}(s.MenuListType||(s.MenuListType={})),s.initialize=function(){at("navBarMenuItemPress",G,!1),at("actionMenuItemPress",R,!1),at("setModuleView",I,!1)},s.setUpViews=function(k,Q){if(z(b),!F())throw de;w=Q,ke("setUpViews",[k])},s.setNavBarMenu=function(k,Q){if(z(b),!F())throw de;C=Q,ke("setNavBarMenu",[k])},s.showActionMenu=function(k,Q){if(z(b),!F())throw de;m=Q,ke("showActionMenu",[k])},s.isSupported=F}(Do||(Do={}));var hi=Te.V_2,ts=5e3,nl=Ie("app");function Zr(s,g){return qt()?(nl.extend("initialize")("window object undefined at initialization"),Promise.resolve()):function(s,g,v){return new Promise(function(C,m){var w=setTimeout(m,g,v);s().then(function(I){clearTimeout(w),C(I)}).catch(function(I){clearTimeout(w),m(I)})})}(function(){return function(s,g){return new Promise(function(v){ie.initializeCalled||(ie.initializeCalled=!0,Ot.initializeHandlers(),ie.initializePromise=function(s,g){var v=this;if(Bt.messageListener=function(m){return Io(v,void 0,void 0,U().mark(function w(){return U().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.next=2,ml(m);case 2:return G.abrupt("return",G.sent);case 3:case"end":return G.stop()}},w)}))},_e.currentWindow=_e.currentWindow||$t(),_e.parentWindow=_e.currentWindow.parent!==_e.currentWindow.self?_e.currentWindow.parent:_e.currentWindow.opener,(_e.parentWindow||s)&&_e.currentWindow.addEventListener("message",Bt.messageListener,!1),!_e.parentWindow){var C=_e.currentWindow;if(!C.nativeInterface)return Promise.reject(new Error("Initialization Failed. No Parent window found."));ie.isFramelessWindow=!0,C.onNativeMessage=fr}try{return _e.parentOrigin="*",Vn(g,"initialize",[ko,un]).then(function(m){return{context:m[0],clientType:m[1],runtimeConfig:m[2],clientSupportedSDKVersion:m[3]}})}finally{_e.parentOrigin=null}}(g,s).then(function(C){var w=C.clientType,I=C.runtimeConfig,G=C.clientSupportedSDKVersion,R=void 0===G?Je:G;ie.frameContext=C.context,ie.hostClientType=w,ie.clientSupportedSDKVersion=R;try{ki("Parsing %s",I);var F=JSON.parse(I);if(ki("Checking if %o is a valid runtime object",F??"null"),!F||!F.apiVersion)throw new Error("Received runtime config is invalid");I&&Eo(F)}catch(Q){if(!(Q instanceof SyntaxError))throw Q;try{ki("Attempting to parse %s as an SDK version",I),isNaN(on(I,Je))||(ie.clientSupportedSDKVersion=I);var k=JSON.parse(R);if(ki("givenRuntimeConfig parsed to %o",k??"null"),!k)throw new Error("givenRuntimeConfig string was successfully parsed. However, it parsed to value of null");Eo(k)}catch(J){if(!(J instanceof SyntaxError))throw J;Eo(en(ie.clientSupportedSDKVersion,qn,Oo))}}ie.initializeCompleted=!0}),gi.initialize(),Do.initialize(),Qt.config.initialize(),Pn.initialize()),Array.isArray(g)&&function(s){var g=ie.additionalValidOrigins.concat(s.filter(function(C){return"string"==typeof C&&Mt.test(C)})),v={};g=g.filter(function(C){return!v[C]&&(v[C]=!0,!0)}),ie.additionalValidOrigins=g}(g),void 0!==ie.initializePromise?v(ie.initializePromise):ki("GlobalVars.initializePromise is unexpectedly undefined")})}(s,g)},ts,new Error("SDK initialization timed out."))}var Hn,ki=nl.extend("initializeHelper");function il(s,g){!Vt(g)&&Zn(),function(s,g){Ot.themeChangeHandler=g,!Vt(g)&&ft(s,"registerHandler",["themeChange"])}(s,g)}function ol(s,g){return new Promise(function(v){z(b,E.content,E.sidePanel,E.settings,E.task,E.stage,E.meetingStage),v(Ci(s,"executeDeepLink",g))})}!function(s){var w,g=Ie("app");s.Messages={AppLoaded:"appInitialization.appLoaded",Success:"appInitialization.success",Failure:"appInitialization.failure",ExpectedFailure:"appInitialization.expectedFailure"},(w=s.FailedReason||(s.FailedReason={})).AuthFailed="AuthFailed",w.Timeout="Timeout",w.Other="Other",function(w){w.PermissionError="PermissionError",w.NotFound="NotFound",w.Throttling="Throttling",w.Offline="Offline",w.Other="Other"}(s.ExpectedFailureReason||(s.ExpectedFailureReason={})),s.isInitialized=function(){return ie.initializeCompleted},s.getFrameContext=function(){return ie.frameContext},function(){if(!qt()){var w=document.getElementsByTagName("script"),I=w&&w[w.length-1]&&w[w.length-1].src,G="Today, teamsjs can only be used from a single script or you may see undefined behavior. This log line is used to help detect cases where teamsjs is loaded multiple times -- it is always written. The presence of the log itself does not indicate a multi-load situation, but multiples of these log lines will. If you would like to use teamjs from more than one script at the same time, please open an issue at https://github.com/OfficeDev/microsoft-teams-library-js/issues";I&&0!==I.length?g("teamsjs is being used from %s. %s",I,G):g("teamsjs is being used from a script tag embedded directly in your html. %s",G)}}(),s.initialize=function(w){return function(){Ka(this,void 0,void 0,U().mark(function s(){return U().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,el();case 2:case"end":return v.stop()}},s)}))}(),Zr(j(hi,V.App_Initialize),w)},s._initialize=function(w){_e.currentWindow=w},s._uninitialize=function(){ie.initializeCalled&&(Ot.uninitializeHandlers(),ie.initializeCalled=!1,ie.initializeCompleted=!1,ie.initializePromise=void 0,ie.additionalValidOrigins=[],ie.frameContext=void 0,ie.hostClientType=void 0,ie.isFramelessWindow=!1,_e.currentWindow&&_e.currentWindow.removeEventListener("message",Bt.messageListener,!1),_e.currentWindow=null,_e.parentWindow=null,_e.parentOrigin=null,_e.childWindow=null,_e.childOrigin=null,Bt.parentMessageQueue=[],Bt.childMessageQueue=[],Bt.nextMessageId=0,Bt.callbacks={},Bt.promiseCallbacks={})},s.getContext=function(){return new Promise(function(w){Zn(),w(Ii(j(hi,V.App_GetContext),"getContext"))}).then(function(w){return function(s){var g;return{actionInfo:s.actionInfo,app:{locale:s.locale,sessionId:s.appSessionId?s.appSessionId:"",theme:s.theme?s.theme:"default",iconPositionVertical:s.appIconPosition,osLocaleInfo:s.osLocaleInfo,parentMessageId:s.parentMessageId,userClickTime:s.userClickTime,userFileOpenPreference:s.userFileOpenPreference,host:{name:s.hostName?s.hostName:Wt.teams,clientType:s.hostClientType?s.hostClientType:De.web,sessionId:s.sessionId?s.sessionId:"",ringId:s.ringId},appLaunchId:s.appLaunchId},page:{id:s.entityId,frameContext:s.frameContext?s.frameContext:ie.frameContext,subPageId:s.subEntityId,isFullScreen:s.isFullScreen,isMultiWindow:s.isMultiWindow,sourceOrigin:s.sourceOrigin},user:{id:null!==(g=s.userObjectId)&&void 0!==g?g:"",displayName:s.userDisplayName,isCallingAllowed:s.isCallingAllowed,isPSTNCallingAllowed:s.isPSTNCallingAllowed,licenseType:s.userLicenseType,loginHint:s.loginHint,userPrincipalName:s.userPrincipalName,tenant:s.tid?{id:s.tid,teamsSku:s.tenantSKU}:void 0},channel:s.channelId?{id:s.channelId,displayName:s.channelName,relativeUrl:s.channelRelativeUrl,membershipType:s.channelType,defaultOneNoteSectionId:s.defaultOneNoteSectionId,ownerGroupId:s.hostTeamGroupId,ownerTenantId:s.hostTeamTenantId}:void 0,chat:s.chatId?{id:s.chatId}:void 0,meeting:s.meetingId?{id:s.meetingId}:void 0,sharepoint:s.sharepoint,team:s.teamId?{internalId:s.teamId,displayName:s.teamName,type:s.teamType,groupId:s.groupId,templateId:s.teamTemplateId,isArchived:s.isTeamArchived,userRole:s.userTeamRole}:void 0,sharePointSite:s.teamSiteUrl||s.teamSiteDomain||s.teamSitePath||s.mySitePath||s.mySiteDomain?{teamSiteUrl:s.teamSiteUrl,teamSiteDomain:s.teamSiteDomain,teamSitePath:s.teamSitePath,teamSiteId:s.teamSiteId,mySitePath:s.mySitePath,mySiteDomain:s.mySiteDomain}:void 0}}(w)})},s.notifyAppLoaded=function(){Zn(),ft(j(hi,V.App_NotifyAppLoaded),s.Messages.AppLoaded,[ko])},s.notifySuccess=function(){Zn(),ft(j(hi,V.App_NotifySuccess),s.Messages.Success,[ko])},s.notifyFailure=function(w){Zn(),ft(j(hi,V.App_NotifyFailure),s.Messages.Failure,[w.reason,w.message])},s.notifyExpectedFailure=function(w){Zn(),ft(j(hi,V.App_NotifyExpectedFailure),s.Messages.ExpectedFailure,[w.reason,w.message])},s.registerOnThemeChangeHandler=function(w){il(j(hi,V.App_RegisterOnThemeChangeHandler),w)},s.openLink=function(w){return ol(j(hi,V.App_OpenLink),w)},function(w){w.registerBeforeSuspendOrTerminateHandler=function(I){if(!I)throw new Error("[app.lifecycle.registerBeforeSuspendOrTerminateHandler] Handler cannot be null");z(b),function(s){Ot.beforeSuspendOrTerminateHandler=s,!Vt(s)&&ke("registerHandler",["beforeUnload"])}(I)},w.registerOnResumeHandler=function(I){if(!I)throw new Error("[app.lifecycle.registerOnResumeHandler] Handler cannot be null");z(b),function(s){Ot.resumeHandler=s,!Vt(s)&&ke("registerHandler",["load"])}(I)}}(s.lifecycle||(s.lifecycle={}))}(Hn||(Hn={}));var Qt,It=Te.V_2;function cr(s,g){return new Promise(function(v){if(z(b,E.content,E.sidePanel,E.settings,E.remove,E.task,E.stage,E.meetingStage),!Qt.isSupported())throw de;v(gr(s,"navigateCrossDomain","Cross-origin navigation is only supported for URLs matching the pattern registered in the manifest.",g))})}function fi(s){return new Promise(function(g){if(z(b),!Qt.backStack.isSupported())throw de;g(gr(s,"navigateBack","Back navigation is not supported in the current client or context."))})}function rl(s,g){return new Promise(function(v){if(z(b),!Qt.tabs.isSupported())throw de;v(gr(s,"navigateToTab","Invalid internalTabInstanceId and/or channelId were/was provided",g))})}function al(s,g){if(z(b),!Qt.isSupported())throw de;ft(s,"returnFocus",[g])}function ll(s,g){return new Promise(function(v){if(z(b),!Qt.tabs.isSupported())throw de;v(Ii(s,"getTabInstances",g))})}function sl(s,g){return new Promise(function(v){if(z(b),!Qt.tabs.isSupported())throw de;v(Ii(s,"getMruTabInstances",g))})}function cl(s,g){if(z(b,E.content,E.sidePanel,E.meetingStage),!Qt.isSupported())throw de;ft(s,"shareDeepLink",[g.subPageId,g.subPageLabel,g.subPageWebUrl])}function mi(s,g){if(z(b,E.content),!Qt.isSupported())throw de;ft(s,"setFrameContext",[g])}!function(s){function g(F){mi(j(It,V.Pages_SetCurrentFrame),F)}function v(){return!(!z(b)||!b.supports.pages)}var F;s.returnFocus=function(F){al(j(It,V.Pages_ReturnFocus),F)},s.registerFocusEnterHandler=function(F){xn(j(It,V.Pages_RegisterFocusEnterHandler),"focusEnter",F,[],function(){if(!v())throw de})},s.setCurrentFrame=g,s.initializeWithFrameContext=function(F,k,Q){Hn.initialize(Q).then(function(){return k&&k()}),g(F)},s.getConfig=function(){return new Promise(function(F){if(z(b,E.content,E.settings,E.remove,E.sidePanel),!v())throw de;F(Ii(j(It,V.Pages_GetConfig),"settings.getSettings"))})},s.navigateCrossDomain=function(F){return cr(j(It,V.Pages_NavigateCrossDomain),F)},s.navigateToApp=function(F){return new Promise(function(k){if(z(b,E.content,E.sidePanel,E.settings,E.task,E.stage,E.meetingStage),!v())throw de;var Q=j(It,V.Pages_NavigateCrossDomain);k(b.isLegacyTeams?Ci(Q,"executeDeepLink",function(s){var g=new URL("https://teams.microsoft.com/l/entity/"+encodeURIComponent(s.appId)+"/"+encodeURIComponent(s.pageId));return s.webUrl&&g.searchParams.append("webUrl",s.webUrl),(s.channelId||s.subPageId)&&g.searchParams.append("context",JSON.stringify({channelId:s.channelId,subEntityId:s.subPageId})),g.toString()}(F)):Ci(Q,"pages.navigateToApp",F))})},s.shareDeepLink=function(F){return cl(j(It,V.Pages_ShareDeepLink),F)},s.registerFullScreenHandler=function(F){xn(j(It,V.Pages_RegisterFullScreenHandler),"fullScreenChange",F,[],function(){if(!Vt(F)&&!v())throw de})},s.isSupported=v,(F=s.tabs||(s.tabs={})).navigateToTab=function(k){return rl(j(It,V.Pages_Tabs_NavigateToTab),k)},F.getTabInstances=function(k){return ll(j(It,V.Pages_Tabs_GetTabInstances),k)},F.getMruTabInstances=function(k){return sl(j(It,V.Pages_Tabs_GetMruTabInstances),k)},F.isSupported=function(){return!(!z(b)||!b.supports.pages||!b.supports.pages.tabs)},function(F){var k,Q;function J(he,st){!Vt(he)&&z(b,E.settings),st&&st(),k=he,!Vt(he)&&ft(j(It,V.Pages_Config_RegisterOnSaveHandlerHelper),"registerHandler",["save"])}function ye(he,st){!Vt(he)&&z(b,E.remove,E.settings),st&&st(),Q=he,!Vt(he)&&ft(j(It,V.Pages_Config_RegisterOnRemoveHandlerHelper),"registerHandler",["remove"])}function ut(he){var st=new we(he);k?k(st):_e.childWindow?An("settings.save",[he]):st.notifySuccess()}F.initialize=function(){at("settings.save",ut,!1),at("settings.remove",q,!1)},F.setValidityState=function(he){if(z(b,E.settings,E.remove),!se())throw de;ft(j(It,V.Pages_Config_SetValidityState),"settings.setValidityState",[he])},F.setConfig=function(he){return new Promise(function(st){if(z(b,E.content,E.settings,E.sidePanel),!se())throw de;st(Ci(j(It,V.Pages_Config_SetConfig),"settings.setSettings",he))})},F.registerOnSaveHandler=function(he){J(he,function(){if(!Vt(he)&&!se())throw de})},F.registerOnSaveHandlerHelper=J,F.registerOnRemoveHandler=function(he){ye(he,function(){if(!Vt(he)&&!se())throw de})},F.registerOnRemoveHandlerHelper=ye,F.registerChangeConfigHandler=function(he){xn(j(It,V.Pages_Config_RegisterChangeConfigHandler),"changeSettings",he,[E.content],function(){if(!se())throw de})};var we=function(){function he(Ct){this.notified=!1,this.result=Ct||{}}var st=he.prototype;return st.notifySuccess=function(){this.ensureNotNotified(),ft(j(It,V.Settings_Save_Success),"settings.save.success"),this.notified=!0},st.notifyFailure=function(yn){this.ensureNotNotified(),ft(j(It,V.Settings_Save_Failure),"settings.save.failure",[yn]),this.notified=!0},st.ensureNotNotified=function(){if(this.notified)throw new Error("The SaveEvent may only notify success or failure once.")},he}();function q(){var he=new Se;Q?Q(he):_e.childWindow?An("settings.remove",[]):he.notifySuccess()}var Se=function(){function he(){this.notified=!1}var st=he.prototype;return st.notifySuccess=function(){this.ensureNotNotified(),ft(j(It,V.Settings_Remove_Success),"settings.remove.success"),this.notified=!0},st.notifyFailure=function(yn){this.ensureNotNotified(),ft(j(It,V.Settings_Remove_Failure),"settings.remove.failure",[yn]),this.notified=!0},st.ensureNotNotified=function(){if(this.notified)throw new Error("The removeEventType may only notify success or failure once.")},he}();function se(){return!(!z(b)||!b.supports.pages||!b.supports.pages.config)}F.isSupported=se}(s.config||(s.config={})),function(F){var k;function Q(){return fi(j(It,V.Pages_BackStack_NavigateBack))}function J(we,q,Se){!Vt(q)&&z(b),Se&&Se(),k=q,!Vt(q)&&ft(we,"registerHandler",["backButton"])}function ye(){k&&k()||(_e.childWindow?An("backButtonPress",[]):Q())}function ut(){return!(!z(b)||!b.supports.pages||!b.supports.pages.backStack)}F._initialize=function(){at("backButtonPress",ye,!1)},F.navigateBack=Q,F.registerBackButtonHandler=function(we){J(j(It,V.Pages_BackStack_RegisterBackButtonHandler),we,function(){if(!Vt(we)&&!ut())throw de})},F.registerBackButtonHandlerHelper=J,F.isSupported=ut}(s.backStack||(s.backStack={})),function(F){function k(){return!(!z(b)||!b.supports.pages||!b.supports.pages.fullTrust)}F.enterFullscreen=function(){if(z(b,E.content),!k())throw de;ft(j(It,V.Pages_FullTrust_EnterFullscreen),"enterFullscreen",[])},F.exitFullscreen=function(){if(z(b,E.content),!k())throw de;ft(j(It,V.Pages_FullTrust_ExitFullscreen),"exitFullscreen",[])},F.isSupported=k}(s.fullTrust||(s.fullTrust={})),function(F){function k(){return!(!z(b)||!b.supports.pages||!b.supports.pages.appButton)}F.onClick=function(Q){xn(j(It,V.Pages_AppButton_OnClick),"appButtonClick",Q,[E.content],function(){if(!k())throw de})},F.onHoverEnter=function(Q){xn(j(It,V.Pages_AppButton_OnHoverEnter),"appButtonHoverEnter",Q,[E.content],function(){if(!k())throw de})},F.onHoverLeave=function(Q){xn(j(It,V.Pages_AppButton_OnHoverLeave),"appButtonHoverLeave",Q,[E.content],function(){if(!k())throw de})},F.isSupported=k}(s.appButton||(s.appButton={})),function(F){function k(){return!(!z(b)||!b.supports.pages||!b.supports.pages.currentApp)}F.navigateTo=function(Q){return new Promise(function(J){if(z(b,E.content,E.sidePanel,E.settings,E.task,E.stage,E.meetingStage),!k())throw de;J(rn(j(It,V.Pages_CurrentApp_NavigateTo),"pages.currentApp.navigateTo",Q))})},F.navigateToDefaultPage=function(){return new Promise(function(Q){if(z(b,E.content,E.sidePanel,E.settings,E.task,E.stage,E.meetingStage),!k())throw de;Q(rn(j(It,V.Pages_CurrentApp_NavigateToDefaultPage),"pages.currentApp.navigateToDefaultPage"))})},F.isSupported=k}(s.currentApp||(s.currentApp={}))}(Qt||(Qt={}));var os=Ie("handlers"),Ot=function(){function s(){}return s.initializeHandlers=function(){s.handlers.themeChange=pl,s.handlers.load=vi,s.handlers.beforeUnload=no,Qt.backStack._initialize()},s.uninitializeHandlers=function(){s.handlers={},s.themeChangeHandler=null,s.loadHandler=null,s.beforeUnloadHandler=null,s.beforeSuspendOrTerminateHandler=null,s.resumeHandler=null},s}();Ot.handlers={},Ot.themeChangeHandler=null,Ot.loadHandler=null,Ot.beforeUnloadHandler=null,Ot.beforeSuspendOrTerminateHandler=null,Ot.resumeHandler=null;var dl=os.extend("callHandler");function Yr(s,g){var v=Ot.handlers[s];return v?(dl("Invoking the registered handler for message %s with arguments %o",s,g),[!0,v.apply(this,g)]):_e.childWindow?(An(s,g),[!1,void 0]):(dl("Handler for action message %s not found.",s),[!1,void 0])}function at(s,g,v,C){void 0===v&&(v=!0),void 0===C&&(C=[]),g?(Ot.handlers[s]=g,v&&ft(j(Te.V_0,V.RegisterHandler),"registerHandler",[s].concat(C))):delete Ot.handlers[s]}function pn(s){delete Ot.handlers[s]}function ur(s){return null!=Ot.handlers[s]}function xn(s,g,v,C,m){v&&z.apply(void 0,[b].concat(C)),m&&m(),at(g,v)}function pl(s){Ot.themeChangeHandler&&Ot.themeChangeHandler(s),_e.childWindow&&An("themeChange",[s])}function vi(s){Ot.resumeHandler?Ot.resumeHandler(s):Ot.loadHandler&&Ot.loadHandler(s),_e.childWindow&&An("load",[s])}function no(){var s=function(){ke("readyToUnload",[])};Ot.beforeSuspendOrTerminateHandler?(Ot.beforeSuspendOrTerminateHandler(),_e.childWindow?An("beforeUnload"):s()):Ot.beforeUnloadHandler&&Ot.beforeUnloadHandler(s)||(_e.childWindow?An("beforeUnload"):s())}var Io=function(g,v,C,m){return new(C||(C=Promise))(function(I,G){function R(Q){try{k(m.next(Q))}catch(J){G(J)}}function F(Q){try{k(m.throw(Q))}catch(J){G(J)}}function k(Q){Q.done?I(Q.value):function(I){return I instanceof C?I:new C(function(G){G(I)})}(Q.value).then(R,F)}k((m=m.apply(g,v||[])).next())})},Fo=Ie("communication"),_e=function(){},Bt=function(){};function Ii(s,g){for(var v=arguments.length,C=new Array(v>2?v-2:0),m=2;m<v;m++)C[m-2]=arguments[m];return Vn(s,g,C).then(function(w){return w[0]})}function pr(s){for(var g=arguments.length,v=new Array(g>1?g-1:0),C=1;C<g;C++)v[C-1]=arguments[C];return Rn(s,v).then(function(m){return m[0]})}function Ci(s,g){for(var v=arguments.length,C=new Array(v>2?v-2:0),m=2;m<v;m++)C[m-2]=arguments[m];return Vn(s,g,C).then(function(w){if(!w[0])throw new Error(w[1])})}function oi(s){for(var g=arguments.length,v=new Array(g>1?g-1:0),C=1;C<g;C++)v[C-1]=arguments[C];return Rn(s,v).then(function(m){if(!m[0])throw new Error(m[1])})}function gr(s,g,v){for(var C=arguments.length,m=new Array(C>3?C-3:0),w=3;w<C;w++)m[w-3]=arguments[w];return Vn(s,g,m).then(function(I){if(!I[0])throw new Error(I[1]||v)})}function rn(s,g){for(var v=arguments.length,C=new Array(v>2?v-2:0),m=2;m<v;m++)C[m-2]=arguments[m];return Vn(s,g,C).then(function(w){var I=w[0];if(I)throw I;return w[1]})}function et(s){for(var g=arguments.length,v=new Array(g>1?g-1:0),C=1;C<g;C++)v[C-1]=arguments[C];return Rn(s,v).then(function(m){var w=m[0];if(w)throw w;return m[1]})}function Vn(s,g,v){if(void 0===v&&(v=void 0),!qe(s))throw Error("apiVersionTag: "+s+" passed in doesn't follow the pattern starting with 'v' followed by digits, then underscore with words, please check.");return new Promise(function(C){C(Kr(Fi(s,g,v).id))})}function Rn(s,g){return void 0===g&&(g=void 0),new Promise(function(v){v(Kr(Fi(j(Te.V_0,"testing"),s,g).id))})}function Kr(s){return new Promise(function(g){Bt.promiseCallbacks[s]=g})}function ft(s,g,v,C){var m;if(v instanceof Function?C=v:v instanceof Array&&(m=v),!qe(s))throw Error("apiVersionTag: "+s+" passed in doesn't follow the pattern starting with 'v' followed by digits, then underscore with words, please check.");var w=Fi(s,g,m);C&&(Bt.callbacks[w.id]=C)}function ke(s,g,v){var C;g instanceof Function?v=g:g instanceof Array&&(C=g);var m=Fi(j(Te.V_0,"testing"),s,C);v&&(Bt.callbacks[m.id]=v)}Bt.parentMessageQueue=[],Bt.childMessageQueue=[],Bt.nextMessageId=0,Bt.callbacks={},Bt.promiseCallbacks={};var hl=Fo.extend("sendMessageToParentHelper");function Fi(s,g,v){var C=hl,m=_e.parentWindow,w=function(s,g,v){return{id:Bt.nextMessageId++,func:g,timestamp:Date.now(),args:v||[],apiversiontag:s}}(s,g,v);if(C("Message %i information: %o",w.id,{actionName:g,args:v}),ie.isFramelessWindow)_e.currentWindow&&_e.currentWindow.nativeInterface&&(C("Sending message %i to parent via framelessPostMessage interface",w.id),_e.currentWindow.nativeInterface.framelessPostMessage(JSON.stringify(w)));else{var I=Vi(m);m&&I?(C("Sending message %i to parent via postMessage",w.id),m.postMessage(w,I)):(C("Adding message %i to parent message queue",w.id),Gi(m).push(w))}return w}var fl=Fo.extend("processMessage");function ml(s){return Io(this,void 0,void 0,U().mark(function g(){var v,C;return U().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(s&&s.data&&"object"==typeof s.data){w.next=2;break}return w.abrupt("return",void fl("Unrecognized message format received by app, message being ignored. Message: %o",s));case 2:return w.abrupt("return",ea(v=s.source||s.originalEvent&&s.originalEvent.source,C=s.origin||s.originalEvent&&s.originalEvent.origin).then(function(I){I?(ta(v,C),v===_e.parentWindow?fr(s):v===_e.childWindow&&vr(s)):fl("Message being ignored by app because it is either coming from the current window or a different window with an invalid origin")}));case 4:case"end":return w.stop()}},g)}))}var vl=Fo.extend("shouldProcessMessage");function ea(s,g){return Io(this,void 0,void 0,U().mark(function v(){var C;return U().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(!_e.currentWindow||s!==_e.currentWindow){w.next=2;break}return w.abrupt("return",(vl("Should not process message because it is coming from the current window"),!1));case 2:if(!(_e.currentWindow&&_e.currentWindow.location&&g&&g===_e.currentWindow.location.origin)){w.next=4;break}return w.abrupt("return",!0);case 4:return w.next=6,sr(new URL(g));case 6:return w.abrupt("return",((C=w.sent)||vl("Message has an invalid origin of %s",g),C));case 8:case"end":return w.stop()}},v)}))}function ta(s,g){ie.isFramelessWindow||_e.parentWindow&&!_e.parentWindow.closed&&s!==_e.parentWindow?_e.childWindow&&!_e.childWindow.closed&&s!==_e.childWindow||(_e.childWindow=s,_e.childOrigin=g):(_e.parentWindow=s,_e.parentOrigin=g),_e.parentWindow&&_e.parentWindow.closed&&(_e.parentWindow=null,_e.parentOrigin=null),_e.childWindow&&_e.childWindow.closed&&(_e.childWindow=null,_e.childOrigin=null),Go(_e.parentWindow),Go(_e.childWindow)}var hr=Fo.extend("handleParentMessage");function fr(s){var g=hr;if("id"in s.data&&"number"==typeof s.data.id){var v=s.data,C=Bt.callbacks[v.id];g("Received a response from parent for message %i",v.id),C&&(g("Invoking the registered callback for message %i with arguments %o",v.id,v.args),C.apply(null,[].concat(v.args,[v.isPartialResponse])),function(s){return!0===s.data.isPartialResponse}(s)||(g("Removing registered callback for message %i",v.id),delete Bt.callbacks[v.id]));var m=Bt.promiseCallbacks[v.id];m&&(g("Invoking the registered promise callback for message %i with arguments %o",v.id,v.args),m(v.args),g("Removing registered promise callback for message %i",v.id),delete Bt.promiseCallbacks[v.id])}else if("func"in s.data&&"string"==typeof s.data.func){var w=s.data;g("Received an action message %s from parent",w.func),Yr(w.func,w.args)}else g("Received an unknown message: %O",s)}function vr(s){if("id"in s.data&&"func"in s.data){var g=s.data,v=Yr(g.func,g.args),m=v[1];v[0]&&void 0!==m?io(g.id,Array.isArray(m)?m:[m]):ke(g.func,g.args,function(){if(_e.childWindow){for(var w=arguments.length,I=new Array(w),G=0;G<w;G++)I[G]=arguments[G];var R=I.pop();io(g.id,I,R)}})}}function Gi(s){return s===_e.parentWindow?Bt.parentMessageQueue:s===_e.childWindow?Bt.childMessageQueue:[]}function Vi(s){return s===_e.parentWindow?_e.parentOrigin:s===_e.childWindow?_e.childOrigin:null}var ra,Cr,oo,Vo,ro,ss=Fo.extend("flushMessageQueue");function Go(s){for(var g=Vi(s),v=Gi(s),C=s==_e.parentWindow?"parent":"child";s&&g&&v.length>0;){var m=v.shift();ss("Flushing message %i from "+C+" message queue via postMessage.",m?.id),s.postMessage(m,g)}}function na(s,g){var v;v=_e.currentWindow.setInterval(function(){0===Gi(s).length&&(clearInterval(v),g())},100)}function io(s,g,v){var C=_e.childWindow,m=function(s,g,v){return{id:s,args:g||[],isPartialResponse:v}}(s,g,v),w=Vi(C);C&&w&&C.postMessage(m,w)}function An(s,g){var v=_e.childWindow,C=function(s,g){return{func:s,args:g||[]}}(s,g),m=Vi(v);v&&m?v.postMessage(C,m):Gi(v).push(C)}function _l(s,g){z(b),ke("uploadCustomApp",[s],g||pi())}function Qs(s,g,v){z(b),ke(s,g,v)}function cs(s,g){if(z(b),!_e.childWindow)throw new Error("The child window has not yet been initialized or is not present");An(s,g)}function Ri(s,g){var v=this;z(b),at(s,function(){for(var C=arguments.length,m=new Array(C),w=0;w<C;w++)m[w]=arguments[w];return g.apply(v,m)})}function Js(s,g){z(b),at("userSettingsChange",g,!0,[s])}function yl(s){z(b,E.content,E.task),ke("openFilePreview",[s.entityId,s.title,s.description,s.type,s.objectUrl,s.downloadUrl,s.webPreviewUrl,s.webEditUrl,s.baseUrl,s.editFile,s.subEntityId,s.viewerAction,s.fileOpenPreference,s.conversationId,s.sizeInBytes])}(function(s){function g(){return!(!z(b)||!b.supports.logs)}s.registerGetLogHandler=function(v){if(!Vt(v)&&z(b),!Vt(v)&&!g())throw de;v?at("log.request",function(){ke("log.receive",[v()])}):pn("log.request")},s.isSupported=g})(ra||(ra={})),function(s){s.fileDownloadStart="fileDownloadStart",s.fileDownloadComplete="fileDownloadComplete"}(Cr||(Cr={})),function(s){s.view="view",s.edit="edit",s.editNew="editNew"}(oo||(oo={})),function(s){s.fileOpenPreference="fileOpenPreference",s.theme="theme"}(Vo||(Vo={})),function(s){function g(){return!(!z(b)||!b.supports.conversations)}s.openConversation=function(v){return new Promise(function(C){if(z(b,E.content),!g())throw de;var m=oi("conversations.openConversation",{title:v.title,subEntityId:v.subEntityId,conversationId:v.conversationId,channelId:v.channelId,entityId:v.entityId});v.onStartConversation&&at("startConversation",function(w,I,G,R){var F;return null===(F=v.onStartConversation)||void 0===F?void 0:F.call(v,{subEntityId:w,conversationId:I,channelId:G,entityId:R})}),v.onCloseConversation&&at("closeConversation",function(w,I,G,R){var F;return null===(F=v.onCloseConversation)||void 0===F?void 0:F.call(v,{subEntityId:w,conversationId:I,channelId:G,entityId:R})}),C(m)})},s.closeConversation=function(){if(z(b,E.content),!g())throw de;ke("conversations.closeConversation"),pn("startConversation"),pn("closeConversation")},s.getChatMembers=function(){return new Promise(function(v){if(z(b),!g())throw de;v(pr("getChatMembers"))})},s.isSupported=g}(ro||(ro={}));var aa;function lo(s,g,v){if(0===s.length)throw new Error("Must have at least one user when creating a chat deep link");var C="users="+s.map(function(I){return encodeURIComponent(I)}).join(","),m=void 0===g?"":"&topicName="+encodeURIComponent(g),w=void 0===v?"":"&message="+encodeURIComponent(v);return Ne+"://"+Me+"/l/chat/0/0?"+C+m+w}!function(s){function g(){return!(!z(b)||!b.supports.appInstallDialog)}s.openAppInstallDialog=function(v){return new Promise(function(C){if(z(b,E.content,E.sidePanel,E.settings,E.task,E.stage,E.meetingStage),!g())throw new Error("Not supported");b.isLegacyTeams?C(oi("executeDeepLink",function(s){if(!s)throw new Error("App ID must be set when creating an app install dialog deep link");return Ne+"://"+Me+"/l/app/"+encodeURIComponent(s)}(v.appId))):(ke("appInstallDialog.openAppInstallDialog",[v]),C())})},s.isSupported=g}(aa||(aa={}));var _i,Un=Te.V_1,gs=Ie("media");function Ai(s,g){if(null==s||null==g||s.length<=0)return null;var v=null,C=1;return s.sort(function(m,w){return m.sequence>w.sequence?1:-1}),s.forEach(function(m){m.sequence==C&&(v=v?new Blob([v,m.file],{type:g}):new Blob([m.file],{type:g}),C++)}),v}function Ro(s,g){if(null==s||null==g)return null;for(var v=atob(s.chunk),C=new Array(v.length),m=0;m<v.length;m++)C[m]=v.charCodeAt(m);var w=new Uint8Array(C),I=new Blob([w],{type:g});return{sequence:s.chunkSequence,file:I}}function jn(s){!function(s){return!(!s||s.mediaType!=_i.MediaType.VideoAndImage&&!s.videoAndImageProps)}(s)?function(s){return!(!s||s.mediaType!=_i.MediaType.Video||!s.videoProps||s.videoProps.isFullScreenMode)}(s)?lr("2.0.3"):function(s){var g;return!(s?.mediaType!=_i.MediaType.Image||null===(g=s?.imageProps)||void 0===g||!g.imageOutputFormats)}(s)&&lr("2.0.4"):lr("2.0.2")}function bl(s){return!s||!(null===s.timeOutIntervalInSec||null!=s.timeOutIntervalInSec&&s.timeOutIntervalInSec<=0||null!=s.timeOutIntervalInSec&&s.timeOutIntervalInSec>60)}!function(s){var v,w,J;(J=s.FileFormat||(s.FileFormat={})).Base64="base64",J.ID="id";var R=function(){};function F(){return!(!z(b)||!b.supports.permissions)}s.File=R,s.captureImage=function(J){if(!J)throw new Error("[captureImage] Callback cannot be null");z(b,E.content,E.task),ie.isFramelessWindow?dn("1.7.0")?ft(j(Un,V.Media_CaptureImage),"captureImage",J):J({errorCode:fe.OLD_PLATFORM},[]):J({errorCode:fe.NOT_SUPPORTED_ON_PLATFORM},[])},s.hasPermission=function(){if(z(b,E.content,E.task),!F())throw de;var J=tt.Media;return new Promise(function(ye){ye(rn(j(Un,V.Media_HasPermission),"permissions.has",J))})},s.requestPermission=function(){if(z(b,E.content,E.task),!F())throw de;var J=tt.Media;return new Promise(function(ye){ye(rn(j(Un,V.Media_RequestPermission),"permissions.request",J))})};var k=function(J){function ye(we){var q;return q=J.call(this)||this,we&&(q.content=we.content,q.format=we.format,q.mimeType=we.mimeType,q.name=we.name,q.preview=we.preview,q.size=we.size),q}M(ye,J);var ut=ye.prototype;return ut.getMedia=function(q){if(!q)throw new Error("[get Media] Callback cannot be null");z(b,E.content,E.task),dn(Be)?function(s,g,v){return null!=s&&null!=g&&g==_i.FileFormat.ID&&null!=v}(this.mimeType,this.format,this.content)?dn("2.0.0")?this.getMediaViaCallback(q):this.getMediaViaHandler(q):q({errorCode:fe.INVALID_ARGUMENTS},new Blob):q({errorCode:fe.OLD_PLATFORM},new Blob)},ut.getMediaViaCallback=function(q){var Se={mediaMimeType:this.mimeType,assembleAttachment:[]},se=[this.content];ft(j(Un,V.Media_GetMedia),"getMedia",se,function(he){if(q)if(he&&he.error)q(he.error,new Blob);else if(he&&he.mediaChunk)if(he.mediaChunk.chunkSequence<=0){var st=Ai(Se.assembleAttachment,Se.mediaMimeType);q(he.error,st??new Blob)}else{var Ct=Ro(he.mediaChunk,Se.mediaMimeType);Ct?Se.assembleAttachment.push(Ct):gs("Received a null assemble attachment for when decoding chunk sequence "+he.mediaChunk.chunkSequence+"; not including the chunk in the assembled file.")}else q({errorCode:fe.INTERNAL_ERROR,message:"data received is null"},new Blob)})},ut.getMediaViaHandler=function(q){var Se=So(),se={mediaMimeType:this.mimeType,assembleAttachment:[]},he=[Se,this.content];this.content&&!Vt(q)&&ft(j(Un,V.Media_GetMedia),"getMedia",he),at("getMedia"+Se,function(st){if(q){var Ct=JSON.parse(st);if(Ct.error)q(Ct.error,new Blob),pn("getMedia"+Se);else if(Ct.mediaChunk)if(Ct.mediaChunk.chunkSequence<=0){var yn=Ai(se.assembleAttachment,se.mediaMimeType);q(Ct.error,yn??new Blob),pn("getMedia"+Se)}else{var an=Ro(Ct.mediaChunk,se.mediaMimeType);an&&se.assembleAttachment.push(an)}else q({errorCode:fe.INTERNAL_ERROR,message:"data received is null"},new Blob),pn("getMedia"+Se)}})},ye}(R);s.Media=k;var Q=function(){function J(ut){this.controllerCallback=ut}var ye=J.prototype;return ye.notifyEventToHost=function(we,q){z(b,E.content,E.task);try{lr("2.0.3")}catch(se){return void(q&&q(se))}var Se={mediaType:this.getMediaType(),mediaControllerEvent:we};ft(j(Un,V.Media_Controller),"media.controller",[Se],function(se){q&&q(se)})},ye.stop=function(we){this.notifyEventToHost(v.StopRecording,we)},J}();s.VideoController=function(J){function ye(){return J.apply(this,arguments)||this}M(ye,J);var ut=ye.prototype;return ut.getMediaType=function(){return w.Video},ut.notifyEventToApp=function(q){if(this.controllerCallback)switch(q){case v.StartRecording:if(this.controllerCallback.onRecordingStarted){this.controllerCallback.onRecordingStarted();break}}},ye}(Q),function(J){J[J.StartRecording=1]="StartRecording",J[J.StopRecording=2]="StopRecording"}(v=s.MediaControllerEvent||(s.MediaControllerEvent={})),function(J){J[J.Photo=1]="Photo",J[J.Document=2]="Document",J[J.Whiteboard=3]="Whiteboard",J[J.BusinessCard=4]="BusinessCard"}(s.CameraStartMode||(s.CameraStartMode={})),function(J){J[J.Camera=1]="Camera",J[J.Gallery=2]="Gallery"}(s.Source||(s.Source={})),function(J){J[J.Image=1]="Image",J[J.Video=2]="Video",J[J.VideoAndImage=3]="VideoAndImage",J[J.Audio=4]="Audio"}(w=s.MediaType||(s.MediaType={})),function(J){J[J.ID=1]="ID",J[J.URL=2]="URL"}(s.ImageUriType||(s.ImageUriType={})),function(J){J[J.IMAGE=1]="IMAGE",J[J.PDF=2]="PDF"}(s.ImageOutputFormats||(s.ImageOutputFormats={})),s.selectMedia=function(J,ye){if(!ye)throw new Error("[select Media] Callback cannot be null");if(z(b,E.content,E.task),dn(Be)){try{jn(J)}catch(Se){return void ye(Se,[])}if(function(s){return!(null==s||s.maxMediaCount>10)}(J)){var q=[J];ft(j(Un,V.Media_SelectMedia),"selectMedia",q,function(Se,se,he){var st,Ct;if(he)(function(s){return!(s.mediaType!=_i.MediaType.Video||!s.videoProps||!s.videoProps.videoController)})(J)&&(null===(Ct=null===(st=J?.videoProps)||void 0===st?void 0:st.videoController)||void 0===Ct||Ct.notifyEventToApp(he));else if(se){for(var Hr,yn=[],an=e(se);!(Hr=an()).done;)yn.push(new k(Hr.value));ye(Se,yn)}else ye(Se,[])})}else ye({errorCode:fe.INVALID_ARGUMENTS},[])}else ye({errorCode:fe.OLD_PLATFORM},[])},s.viewImages=function(J,ye){if(!ye)throw new Error("[view images] Callback cannot be null");if(z(b,E.content,E.task),dn(Be))if(function(s){return!(null==s||s.length<=0||s.length>10)}(J)){var ut=[J];ft(j(Un,V.Media_ViewImages),"viewImages",ut,ye)}else ye({errorCode:fe.INVALID_ARGUMENTS});else ye({errorCode:fe.OLD_PLATFORM})},s.scanBarCode=function(J,ye){if(!J)throw new Error("[media.scanBarCode] Callback cannot be null");z(b,E.content,E.task),ie.hostClientType!==De.desktop&&ie.hostClientType!==De.web&&ie.hostClientType!==De.rigel&&ie.hostClientType!==De.teamsRoomsWindows&&ie.hostClientType!==De.teamsRoomsAndroid&&ie.hostClientType!==De.teamsPhones&&ie.hostClientType!==De.teamsDisplays?dn("1.9.0")?bl(ye)?ft(j(Un,V.Media_ScanBarCode),"media.scanBarCode",[ye],J):J({errorCode:fe.INVALID_ARGUMENTS},""):J({errorCode:fe.OLD_PLATFORM},""):J({errorCode:fe.NOT_SUPPORTED_ON_PLATFORM},"")}}(_i||(_i={}));var yr,sa,la=Te.V_2;(function(s){function g(){return!!(z(b)&&b.supports.barCode&&b.supports.permissions)}s.scanBarCode=function(v){return new Promise(function(C){if(z(b,E.content,E.task),!g())throw de;if(!bl(v))throw{errorCode:fe.INVALID_ARGUMENTS};C(rn(j(la,V.BarCode_ScanBarCode),"media.scanBarCode",v))})},s.hasPermission=function(){if(z(b,E.content,E.task),!g())throw de;var v=tt.Media;return new Promise(function(C){C(rn(j(la,V.BarCode_HasPermission),"permissions.has",v))})},s.requestPermission=function(){if(z(b,E.content,E.task),!g())throw de;var v=tt.Media;return new Promise(function(C){C(rn(j(la,V.BarCode_RequestPermission),"permissions.request",v))})},s.isSupported=g})(yr||(yr={})),function(s){function g(C){return new Promise(function(m){if(z(b,E.content,E.task),!v())throw de;m(b.isLegacyTeams?oi("executeDeepLink",lo([C.user],void 0,C.message)):oi("chat.openChat",{members:[C.user],message:C.message}))})}function v(){return!(!z(b)||!b.supports.chat)}s.openChat=g,s.openGroupChat=function(C){return new Promise(function(m){if(C.users.length<1)throw Error("OpenGroupChat Failed: No users specified");if(1===C.users.length)m(g({user:C.users[0],message:C.message}));else{if(z(b,E.content,E.task),!v())throw de;m(b.isLegacyTeams?oi("executeDeepLink",lo(C.users,C.topic,C.message)):oi("chat.openChat",{members:C.users,message:C.message,topic:C.topic}))}})},s.isSupported=v}(sa||(sa={}));var br,wl=function(g,v,C,m){return new(C||(C=Promise))(function(I,G){function R(Q){try{k(m.next(Q))}catch(J){G(J)}}function F(Q){try{k(m.throw(Q))}catch(J){G(J)}}function k(Q){Q.done?I(Q.value):function(I){return I instanceof C?I:new C(function(G){G(I)})}(Q.value).then(R,F)}k((m=m.apply(g,v||[])).next())})},Sl=Te.V_2;!function(s){function g(){return!!(z(b)&&navigator&&navigator.clipboard&&b.supports.clipboard)}s.write=function(v){return wl(this,void 0,void 0,U().mark(function C(){var w;return U().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:if(z(b,E.content,E.meetingStage,E.task,E.settings,E.stage,E.sidePanel),g()){G.next=2;break}throw de;case 2:if(v.type&&Object.values(nt).includes(v.type)){G.next=4;break}throw new Error("Blob type "+v.type+" is not supported. Supported blob types are "+Object.values(nt));case 4:return G.next=6,Ki(v);case 6:return w={mimeType:v.type,content:G.sent},G.abrupt("return",rn(j(Sl,V.Clipboard_Write),"clipboard.writeToClipboard",w));case 9:case"end":return G.stop()}},C)}))},s.read=function(){return wl(this,void 0,void 0,U().mark(function v(){var C;return U().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(z(b,E.content,E.meetingStage,E.task,E.settings,E.stage,E.sidePanel),g()){w.next=2;break}throw de;case 2:if(!Ti()&&ie.hostClientType!==De.macos){w.next=9;break}return w.t0=JSON,w.next=6,et("clipboard.readFromClipboard");case 6:return w.t1=w.sent,C=w.t0.parse.call(w.t0,w.t1),w.abrupt("return",Oi(C.mimeType,C.content));case 9:return w.abrupt("return",rn(j(Sl,V.Clipboard_Read),"clipboard.readFromClipboard"));case 10:case"end":return w.stop()}},v)}))},s.isSupported=g}(br||(br={}));var ca,ua,co=Te.V_2;function _s(){return b.hostVersionsInfo?b.hostVersionsInfo.adaptiveCardSchemaVersion:void 0}!function(s){function g(){return!!(z(b)&&b.supports.geoLocation&&b.supports.permissions)}s.getCurrentLocation=function(){if(z(b,E.content,E.task),!g())throw de;return rn(j(co,V.GeoLocation_GetCurrentLocation),"location.getLocation",{allowChooseLocation:!1,showMap:!1})},s.hasPermission=function(){if(z(b,E.content,E.task),!g())throw de;var C=tt.GeoLocation;return new Promise(function(m){m(rn(j(co,V.GeoLocation_HasPermission),"permissions.has",C))})},s.requestPermission=function(){if(z(b,E.content,E.task),!g())throw de;var C=tt.GeoLocation;return new Promise(function(m){m(rn(j(co,V.GeoLocation_RequestPermission),"permissions.request",C))})},s.isSupported=g,function(C){function m(){return!!(z(b)&&b.supports.geoLocation&&b.supports.geoLocation.map&&b.supports.permissions)}C.chooseLocation=function(){if(z(b,E.content,E.task),!m())throw de;return rn(j(co,V.GeoLocation_Map_ChooseLocation),"location.getLocation",{allowChooseLocation:!0,showMap:!0})},C.showLocation=function(w){if(z(b,E.content,E.task),!m())throw de;if(!w)throw{errorCode:fe.INVALID_ARGUMENTS};return rn(j(co,V.GeoLocation_ShowLocation),"location.showLocation",w)},C.isSupported=m}(s.map||(s.map={}))}(ca||(ca={}));var Ml=function(){function s(){}var g=s.prototype;return g.postMessage=function(C,m){z(b),ke("messageForChild",[C],m||pi())},g.addEventListener=function(C,m){z(b),"message"===C&&at("messageForParent",m)},s}(),ys=function(){function s(){}var g=s.prototype;return g.postMessage=function(C,m){z(b,E.task),ke("messageForParent",[C],m||pi())},g.addEventListener=function(C,m){z(b,E.task),"message"===C&&at("messageForChild",m)},S(s,null,[{key:"Instance",get:function(){return this._instance||(this._instance=new this)}}]),s}();!function(s){function g(){return!(!z(b)||!b.supports.secondaryBrowser)}s.open=function(v){if(z(b,E.content),!g())throw de;if(!v||!xi(v))throw{errorCode:fe.INVALID_ARGUMENTS,message:"Invalid Url: Only https URL is allowed"};return et("secondaryBrowser.open",v.toString())},s.isSupported=g}(ua||(ua={}));var jt,Lo=Te.V_1;!function(s){function g(){return!(!z(b)||!b.supports.location)}s.getLocation=function(v,C){if(!C)throw new Error("[location.getLocation] Callback cannot be null");if(z(b,E.content,E.task),!dn("1.9.0"))throw{errorCode:fe.OLD_PLATFORM};if(!v)throw{errorCode:fe.INVALID_ARGUMENTS};if(!g())throw de;ft(j(Lo,V.Location_GetLocation),"location.getLocation",[v],C)},s.showLocation=function(v,C){if(!C)throw new Error("[location.showLocation] Callback cannot be null");if(z(b,E.content,E.task),!dn("1.9.0"))throw{errorCode:fe.OLD_PLATFORM};if(!v)throw{errorCode:fe.INVALID_ARGUMENTS};if(!g())throw de;ft(j(Lo,V.Location_ShowLocation),"location.showLocation",[v],C)},s.isSupported=g}(jt||(jt={}));var Yn,No,wr=function(g,v,C,m){return new(C||(C=Promise))(function(I,G){function R(Q){try{k(m.next(Q))}catch(J){G(J)}}function F(Q){try{k(m.throw(Q))}catch(J){G(J)}}function k(Q){Q.done?I(Q.value):function(I){return I instanceof C?I:new C(function(G){G(I)})}(Q.value).then(R,F)}k((m=m.apply(g,v||[])).next())})};(function(s){var g,w,k;function F(k,Q){z(b,E.sidePanel,E.meetingStage),ke("meeting.updateMicState",[k,Q])}(k=g||(g={}))[k.HostInitiated=0]="HostInitiated",k[k.AppInitiated=1]="AppInitiated",k[k.AppDeclinedToChange=2]="AppDeclinedToChange",k[k.AppFailedToChange=3]="AppFailedToChange",function(k){k.like="like",k.heart="heart",k.laugh="laugh",k.surprised="surprised",k.applause="applause"}(s.MeetingReactionType||(s.MeetingReactionType={})),function(k){k.Unknown="Unknown",k.Adhoc="Adhoc",k.Scheduled="Scheduled",k.Recurring="Recurring",k.Broadcast="Broadcast",k.MeetNow="MeetNow"}(s.MeetingType||(s.MeetingType={})),function(k){k.OneOnOneCall="oneOnOneCall",k.GroupCall="groupCall"}(s.CallType||(s.CallType={})),function(k){k.Collaborative="Collaborative",k.ScreenShare="ScreenShare"}(w=s.SharingProtocol||(s.SharingProtocol={})),s.getIncomingClientAudioState=function(k){if(!k)throw new Error("[get incoming client audio state] Callback cannot be null");z(b,E.sidePanel,E.meetingStage),ke("getIncomingClientAudioState",k)},s.toggleIncomingClientAudio=function(k){if(!k)throw new Error("[toggle incoming client audio] Callback cannot be null");z(b,E.sidePanel,E.meetingStage),ke("toggleIncomingClientAudio",k)},s.getMeetingDetails=function(k){if(!k)throw new Error("[get meeting details] Callback cannot be null");z(b,E.sidePanel,E.meetingStage,E.settings,E.content),ke("meeting.getMeetingDetails",k)},s.getAuthenticationTokenForAnonymousUser=function(k){if(!k)throw new Error("[get Authentication Token For AnonymousUser] Callback cannot be null");z(b,E.sidePanel,E.meetingStage,E.task),ke("meeting.getAuthenticationTokenForAnonymousUser",k)},s.getLiveStreamState=function(k){if(!k)throw new Error("[get live stream state] Callback cannot be null");z(b,E.sidePanel),ke("meeting.getLiveStreamState",k)},s.requestStartLiveStreaming=function(k,Q,J){if(!k)throw new Error("[request start live streaming] Callback cannot be null");z(b,E.sidePanel),ke("meeting.requestStartLiveStreaming",[Q,J],k)},s.requestStopLiveStreaming=function(k){if(!k)throw new Error("[request stop live streaming] Callback cannot be null");z(b,E.sidePanel),ke("meeting.requestStopLiveStreaming",k)},s.registerLiveStreamChangedHandler=function(k){if(!k)throw new Error("[register live stream changed handler] Handler cannot be null");z(b,E.sidePanel),at("meeting.liveStreamChanged",k)},s.shareAppContentToStage=function(k,Q,J){if(void 0===J&&(J={sharingProtocol:w.Collaborative}),!k)throw new Error("[share app content to stage] Callback cannot be null");z(b,E.sidePanel,E.meetingStage),ke("meeting.shareAppContentToStage",[Q,J],k)},s.getAppContentStageSharingCapabilities=function(k){if(!k)throw new Error("[get app content stage sharing capabilities] Callback cannot be null");z(b,E.sidePanel,E.meetingStage),ke("meeting.getAppContentStageSharingCapabilities",k)},s.stopSharingAppContentToStage=function(k){if(!k)throw new Error("[stop sharing app content to stage] Callback cannot be null");z(b,E.sidePanel,E.meetingStage),ke("meeting.stopSharingAppContentToStage",k)},s.getAppContentStageSharingState=function(k){if(!k)throw new Error("[get app content stage sharing state] Callback cannot be null");z(b,E.sidePanel,E.meetingStage),ke("meeting.getAppContentStageSharingState",k)},s.registerSpeakingStateChangeHandler=function(k){if(!k)throw new Error("[registerSpeakingStateChangeHandler] Handler cannot be null");z(b,E.sidePanel,E.meetingStage),at("meeting.speakingStateChanged",k)},s.registerRaiseHandStateChangedHandler=function(k){if(!k)throw new Error("[registerRaiseHandStateChangedHandler] Handler cannot be null");z(b,E.sidePanel,E.meetingStage),at("meeting.raiseHandStateChanged",k)},s.registerMeetingReactionReceivedHandler=function(k){if(!k)throw new Error("[registerMeetingReactionReceivedHandler] Handler cannot be null");z(b,E.sidePanel,E.meetingStage),at("meeting.meetingReactionReceived",k)},function(k){k.setOptions=function(Q){z(b,E.sidePanel),Q.contentUrl&&new URL(Q.contentUrl),ke("meeting.appShareButton.setOptions",[Q])}}(s.appShareButton||(s.appShareButton={})),s.requestAppAudioHandling=function(k,Q){if(!Q)throw new Error("[requestAppAudioHandling] Callback response cannot be null");if(!k.micMuteStateChangedCallback)throw new Error("[requestAppAudioHandling] Callback Mic mute state handler cannot be null");z(b,E.sidePanel,E.meetingStage),k.isAppHandlingAudio?function(k,Q){var J=this;ke("meeting.requestAppAudioHandling",[k.isAppHandlingAudio],function(ye,ut){if(ye&&null!=ut)throw new Error("[requestAppAudioHandling] Callback response - both parameters cannot be set");if(ye)throw new Error("[requestAppAudioHandling] Callback response - SDK error "+ye.errorCode+" "+ye.message);if("boolean"!=typeof ut)throw new Error("[requestAppAudioHandling] Callback response - isHostAudioless must be a boolean");at("meeting.micStateChanged",function(we){return wr(J,void 0,void 0,U().mark(function q(){var Se;return U().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:return he.prev=0,he.next=3,k.micMuteStateChangedCallback(we);case 3:F(Se=he.sent,Se.isMicMuted===we.isMicMuted?g.HostInitiated:g.AppDeclinedToChange),he.next=10;break;case 7:he.prev=7,he.t0=he.catch(0),F(we,g.AppFailedToChange);case 10:case"end":return he.stop()}},q,null,[[0,7]])}))}),at("meeting.audioDeviceSelectionChanged",function(we){var q;null===(q=k.audioDeviceSelectionChangedCallback)||void 0===q||q.call(k,we)}),Q(ut)})}(k,Q):function(k,Q){ke("meeting.requestAppAudioHandling",[k.isAppHandlingAudio],function(J,ye){if(J&&null!=ye)throw new Error("[requestAppAudioHandling] Callback response - both parameters cannot be set");if(J)throw new Error("[requestAppAudioHandling] Callback response - SDK error "+J.errorCode+" "+J.message);if("boolean"!=typeof ye)throw new Error("[requestAppAudioHandling] Callback response - isHostAudioless must be a boolean");ur("meeting.micStateChanged")&&pn("meeting.micStateChanged"),ur("meeting.audioDeviceSelectionChanged")&&pn("meeting.audioDeviceSelectionChanged"),Q(ye)})}(k,Q)},s.updateMicState=function(k){F(k,g.AppInitiated)}})(Yn||(Yn={})),function(s){function g(){return!(!z(b)||!b.supports.monetization)}s.openPurchaseExperience=function(v,C){var m,w;return"function"==typeof v?(m=v,w=C):w=v,z(b,E.content),function(s,g){for(var v=arguments.length,C=new Array(v>2?v-2:0),m=2;m<v;m++)C[m-2]=arguments[m];var w=s.apply(void 0,C);return w.then(function(I){g&&g(null,I)}).catch(function(I){g&&g(I,null)}),w}(function(){return new Promise(function(I){if(!g())throw de;I(et("monetization.openPurchaseExperience",w))})},m)},s.isSupported=g}(No||(No={}));var Mr,Sr=Te.V_2;!function(s){function g(){return!(!z(b)||!b.supports.calendar)}s.openCalendarItem=function(v){return new Promise(function(C){if(z(b,E.content),!g())throw new Error("Not supported");if(!v.itemId||!v.itemId.trim())throw new Error("Must supply an itemId to openCalendarItem");C(Ci(j(Sr,V.Calendar_OpenCalendarItem),"calendar.openCalendarItem",v))})},s.composeMeeting=function(v){return new Promise(function(C){if(z(b,E.content),!g())throw new Error("Not supported");C(b.isLegacyTeams?oi("executeDeepLink",function(s,g,v,C,m){var w=void 0===s?"":"attendees="+s.map(function(k){return encodeURIComponent(k)}).join(","),I=void 0===g?"":"&startTime="+encodeURIComponent(g),G=void 0===v?"":"&endTime="+encodeURIComponent(v),R=void 0===C?"":"&subject="+encodeURIComponent(C),F=void 0===m?"":"&content="+encodeURIComponent(m);return Ne+"://"+Me+"/l/meeting/new?"+w+I+G+R+F}(v.attendees,v.startTime,v.endTime,v.subject,v.content)):Ci(j(Sr,V.Calendar_ComposeMeeting),"calendar.composeMeeting",v))})},s.isSupported=g}(Mr||(Mr={}));var ri,Wn,zo,Pt,uo=Te.V_2;(function(s){function g(){return!(!z(b)||!b.supports.mail)}var C;s.openMailItem=function(C){return new Promise(function(m){if(z(b,E.content),!g())throw new Error("Not supported");if(!C.itemId||!C.itemId.trim())throw new Error("Must supply an itemId to openMailItem");m(Ci(j(uo,V.Mail_OpenMailItem),"mail.openMailItem",C))})},s.composeMail=function(C){return new Promise(function(m){if(z(b,E.content),!g())throw new Error("Not supported");m(Ci(j(uo,V.Mail_ComposeMail),"mail.composeMail",C))})},s.isSupported=g,(C=s.ComposeMailType||(s.ComposeMailType={})).New="new",C.Reply="reply",C.ReplyAll="replyAll",C.Forward="forward"})(ri||(ri={})),function(s){function g(){$t().print()}function v(w,I){!Vt(w)&&z(b),!Vt(w)&&I&&I(),function(s){Ot.loadHandler=s,!Vt(s)&&ft(j(Te.V_2,V.RegisterHandler),"registerHandler",["load"])}(w)}function C(w,I){!Vt(w)&&z(b),!Vt(w)&&I&&I(),function(s){Ot.beforeUnloadHandler=s,!Vt(s)&&ft(j(Te.V_2,V.RegisterHandler),"registerHandler",["beforeUnload"])}(w)}function m(){return!(!z(b)||!b.supports.teamsCore)}s.enablePrintCapability=function(){if(!ie.printCapabilityEnabled){if(z(b),!m())throw de;ie.printCapabilityEnabled=!0,document.addEventListener("keydown",function(w){(w.ctrlKey||w.metaKey)&&80===w.keyCode&&(g(),w.cancelBubble=!0,w.preventDefault(),w.stopImmediatePropagation())})}},s.print=g,s.registerOnLoadHandler=function(w){v(w,function(){if(!Vt(w)&&!m())throw de})},s.registerOnLoadHandlerHelper=v,s.registerBeforeUnloadHandler=function(w){C(w,function(){if(!Vt(w)&&!m())throw de})},s.registerBeforeUnloadHandlerHelper=C,s.isSupported=m}(Wn||(Wn={})),function(s){function g(C){return new Promise(function(m){if(!dn("2.0.0"))throw{errorCode:fe.OLD_PLATFORM};if(!function(s){return!(s&&(s.title&&"string"!=typeof s.title||s.setSelected&&"object"!=typeof s.setSelected||s.openOrgWideSearchInChatOrChannel&&"boolean"!=typeof s.openOrgWideSearchInChatOrChannel||s.singleSelect&&"boolean"!=typeof s.singleSelect))}(C))throw{errorCode:fe.INVALID_ARGUMENTS};if(!v())throw de;m(et("people.selectPeople",C))})}function v(){return!(!z(b)||!b.supports.people)}s.selectPeople=function(C,m){var w,I,G;return z(b,E.content,E.task,E.settings),"function"==typeof C?(I=(w=[C,m])[0],G=w[1]):G=C,function(s,g){for(var v=arguments.length,C=new Array(v>2?v-2:0),m=2;m<v;m++)C[m-2]=arguments[m];var w=s.apply(void 0,C);return w.then(function(I){g&&g(void 0,I)}).catch(function(I){g&&g(I)}),w}(g,I,G)},s.isSupported=v}(zo||(zo={})),function(s){s.showProfile=function(g){return z(b,E.content),new Promise(function(v){var C=function(s){return s?s.modality&&"string"!=typeof s.modality?[!1,"modality must be a string"]:s.targetElementBoundingRect&&"object"==typeof s.targetElementBoundingRect?s.triggerType&&"string"==typeof s.triggerType?function(s){return s?s.displayName&&"string"!=typeof s.displayName?[!1,"displayName must be a string"]:s.identifiers&&"object"==typeof s.identifiers?s.identifiers.AadObjectId||s.identifiers.Smtp||s.identifiers.Upn?s.identifiers.AadObjectId&&"string"!=typeof s.identifiers.AadObjectId?[!1,"AadObjectId identifier must be a string"]:s.identifiers.Smtp&&"string"!=typeof s.identifiers.Smtp?[!1,"Smtp identifier must be a string"]:s.identifiers.Upn&&"string"!=typeof s.identifiers.Upn?[!1,"Upn identifier must be a string"]:[!0,void 0]:[!1,"at least one valid identifier must be provided"]:[!1,"persona identifiers object must be provided"]:[!1,"persona object must be provided"]}(s.persona):[!1,"triggerType must be a valid string"]:[!1,"targetElementBoundingRect must be a DOMRect"]:[!1,"A request object is required"]}(g);if(!C[0])throw{errorCode:fe.INVALID_ARGUMENTS,message:C[1]};v(et("profile.showProfile",{modality:g.modality,persona:g.persona,triggerType:g.triggerType,targetRectangle:{x:g.targetElementBoundingRect.x,y:g.targetElementBoundingRect.y,width:g.targetElementBoundingRect.width,height:g.targetElementBoundingRect.height}}))})},s.isSupported=function(){return!(!z(b)||!b.supports.profile)}}(Pt||(Pt={}));var Li,yi=function(g,v,C,m){return new(C||(C=Promise))(function(I,G){function R(Q){try{k(m.next(Q))}catch(J){G(J)}}function F(Q){try{k(m.throw(Q))}catch(J){G(J)}}function k(Q){Q.done?I(Q.value):function(I){return I instanceof C?I:new C(function(G){G(I)})}(Q.value).then(R,F)}k((m=m.apply(g,v||[])).next())})};function Pl(s,g,v,C){var m,w;return yi(this,void 0,void 0,U().mark(function I(){var G;return U().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return G=Tl(),!qt()&&(null===(w=null===(m=window.chrome)||void 0===m?void 0:m.webview)||void 0===w||w.registerTextureStream(s,G)),F.t0=xr,F.next=5,Ol(s,v,C);case 5:F.t1=F.sent,F.t2=new da(v,g),F.t3=G.writable,(0,F.t0)(F.t1,F.t2,F.t3);case 9:case"end":return F.stop()}},I)}))}function xl(s,g,v,C){var m,w;return yi(this,void 0,void 0,U().mark(function I(){var G;return U().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return G=Tl(),!qt()&&(null===(w=null===(m=window.chrome)||void 0===m?void 0:m.webview)||void 0===w||w.registerTextureStream(s,G)),F.t0=xr,F.next=5,Ol(s,v,C);case 5:F.t1=F.sent,F.t2=new Ms(v,g),F.t3=G.writable,(0,F.t0)(F.t1,F.t2,F.t3);case 9:case"end":return F.stop()}},I)}))}function Ol(s,g,v){return yi(this,void 0,void 0,U().mark(function C(){var m,w;return U().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:if(!qt()){G.next=2;break}throw de;case 2:return m=$t().chrome,G.prev=3,v?.reportGettingTextureStream(s),G.next=7,m.webview.getTextureStream(s);case 7:if(0!==(w=G.sent.getVideoTracks()).length){G.next=10;break}throw new Error("No video track in stream "+s);case 10:return G.abrupt("return",(v?.reportTextureStreamAcquired(),w[0]));case 13:throw G.prev=13,G.t0=G.catch(3),g("Failed to get video track from stream "+s+", error: "+G.t0),new Error("Internal error: can't get video track from stream "+s);case 16:case"end":return G.stop()}},C,null,[[3,13]])}))}function Tl(){if(qt())throw de;var s=window.MediaStreamTrackGenerator;if(!s)throw de;return new s({kind:"video"})}function xr(s,g,v){new($t().MediaStreamTrackProcessor)({track:s}).readable.pipeThrough(new TransformStream(g)).pipeTo(v)}!function(s){s.TimestampIsNull="timestamp of the original video frame is null",s.UnsupportedVideoFramePixelFormat="Unsupported video frame pixel format"}(Li||(Li={}));var da=function(g,v){var C=this;this.notifyError=g,this.videoFrameHandler=v,this.transform=function(m,w){return yi(C,void 0,void 0,U().mark(function I(){var G,R,F;return U().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:if(null===(G=m.timestamp)){Q.next=15;break}return Q.prev=2,Q.next=5,this.videoFrameHandler({videoFrame:m});case 5:R=Q.sent,F=new VideoFrame(R,{timestamp:G}),w.enqueue(F),m.close(),R.close(),Q.next=13;break;case 10:Q.prev=10,Q.t0=Q.catch(2),m.close(),this.notifyError(Q.t0);case 13:Q.next=16;break;case 15:this.notifyError(Li.TimestampIsNull);case 16:case"end":return Q.stop()}},I,this,[[2,10]])}))}},ws=function(){function s(g,v){if(this.headerBuffer=g,this.notifyError=v,this.ONE_TEXTURE_INPUT_ID=1869900081,this.INVALID_HEADER_ERROR="Invalid video frame header",this.UNSUPPORTED_LAYOUT_ERROR="Unsupported texture layout",this.headerDataView=new Uint32Array(g),this.headerDataView.length<8)throw this.notifyError(this.INVALID_HEADER_ERROR),new Error(this.INVALID_HEADER_ERROR);if(this.headerDataView[0]!==this.ONE_TEXTURE_INPUT_ID)throw this.notifyError(this.UNSUPPORTED_LAYOUT_ERROR),new Error(this.UNSUPPORTED_LAYOUT_ERROR)}return S(s,[{key:"oneTextureLayoutId",get:function(){return this.headerDataView[0]}},{key:"version",get:function(){return this.headerDataView[1]}},{key:"frameRowOffset",get:function(){return this.headerDataView[2]}},{key:"frameFormat",get:function(){return this.headerDataView[3]}},{key:"frameWidth",get:function(){return this.headerDataView[4]}},{key:"frameHeight",get:function(){return this.headerDataView[5]}},{key:"multiStreamHeaderRowOffset",get:function(){return this.headerDataView[6]}},{key:"multiStreamCount",get:function(){return this.headerDataView[7]}}]),s}(),Ss=function(){function s(g,v){this.metadataMap=new Map,this.AUDIO_INFERENCE_RESULT_STREAM_ID=828664161;for(var C=new Uint32Array(g),m=0,w=0;m<v;m++){var I=C[w++],G=C[w++],R=C[w++],F=new Uint8Array(g,G,R);this.metadataMap.set(I,F)}}return S(s,[{key:"audioInferenceResult",get:function(){return this.metadataMap.get(this.AUDIO_INFERENCE_RESULT_STREAM_ID)}}]),s}(),Ms=function(g,v){var C=this;this.notifyError=g,this.videoFrameHandler=v,this.shouldDiscardAudioInferenceResult=!1,this.transform=function(m,w){return yi(C,void 0,void 0,U().mark(function I(){var G,R,F,k,J,ye,ut;return U().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:if(null===(G=m.timestamp)){q.next=22;break}return q.prev=2,q.next=5,this.extractVideoFrameAndMetadata(m);case 5:return F=(R=q.sent).videoFrame,J=(void 0===(k=R.metadata)?{}:k).audioInferenceResult,q.next=12,this.videoFrameHandler({videoFrame:F,audioInferenceResult:J});case 12:ye=q.sent,ut=new VideoFrame(ye,{timestamp:G}),w.enqueue(ut),F.close(),m.close(),ye.close(),q.next=20;break;case 17:q.prev=17,q.t0=q.catch(2),m.close(),this.notifyError(q.t0);case 20:q.next=23;break;case 22:this.notifyError(Li.TimestampIsNull);case 23:case"end":return q.stop()}},I,this,[[2,17]])}))},this.extractVideoFrameAndMetadata=function(m){return yi(C,void 0,void 0,U().mark(function w(){var I,G,R,F,k,Q;return U().wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:if(!qt()){ye.next=2;break}throw de;case 2:if("NV12"===m.format){ye.next=4;break}throw this.notifyError(Li.UnsupportedVideoFramePixelFormat),new Error(Li.UnsupportedVideoFramePixelFormat);case 4:return I={x:0,y:0,width:m.codedWidth,height:2},G=new ArrayBuffer(I.width*I.height*3/2),ye.next=7,m.copyTo(G,{rect:I});case 7:return R=new ws(G,this.notifyError),F={x:0,y:R.multiStreamHeaderRowOffset,width:m.codedWidth,height:m.codedHeight-R.multiStreamHeaderRowOffset},k=new ArrayBuffer(F.width*F.height*3/2),ye.next=10,m.copyTo(k,{rect:F});case 10:return Q=new Ss(k,R.multiStreamCount),ye.abrupt("return",{videoFrame:new VideoFrame(m,{timestamp:m.timestamp,visibleRect:{x:0,y:R.frameRowOffset,width:R.frameWidth,height:R.frameHeight}}),metadata:{audioInferenceResult:this.shouldDiscardAudioInferenceResult?void 0:Q.audioInferenceResult}});case 12:case"end":return ye.stop()}},w,this)}))},at("video.mediaStream.audioInferenceDiscardStatusChange",function(m){C.shouldDiscardAudioInferenceResult=m.discardAudioInferenceResult})};function ai(s,g){return function(v,C){g?.reportApplyingVideoEffect(v||"",C),s(v,C).then(function(){g?.reportVideoEffectChanged(v||"",C),ke("video.videoEffectReadiness",[!0,v,void 0,C])}).catch(function(m){ke("video.videoEffectReadiness",[!1,v,m in bi.EffectFailureReason?m:bi.EffectFailureReason.InitializationFailure,C])})}}var li=function(){function s(){}return s.setTimeout=function(v,C){var m=performance.now(),w=So();return s.setTimeoutCallbacks[w]={callback:v,timeoutInMs:C,startedAtInMs:m},w},s.clearTimeout=function(v){delete s.setTimeoutCallbacks[v]},s.setInterval=function(v,C){s.setTimeout(function m(){v(),s.setTimeout(m,C)},C)},s.tick=function(){var v=performance.now(),C=[];for(var m in s.setTimeoutCallbacks){var w=s.setTimeoutCallbacks[m];v-w.startedAtInMs>=w.timeoutInMs&&C.push(m)}for(var I=0,G=C;I<G.length;I++){var R=G[I];s.setTimeoutCallbacks[R].callback(),delete s.setTimeoutCallbacks[R]}},s}();li.setTimeoutCallbacks={};var Or=function(){function s(v,C){this.reportStatisticsResult=C,this.sampleCount=0,this.distributionBins=new Uint32Array(v)}var g=s.prototype;return g.processStarts=function(C,m,w,I){li.tick(),this.suitableForThisSession(C,m,w,I)||this.reportAndResetSession(this.getStatistics(),C,I,m,w),this.start()},g.processEnds=function(){var C=performance.now()-this.frameProcessingStartedAt,m=Math.floor(Math.max(0,Math.min(this.distributionBins.length-1,C)));this.distributionBins[m]+=1,this.sampleCount+=1},g.getStatistics=function(){return this.currentSession?{effectId:this.currentSession.effectId,effectParam:this.currentSession.effectParam,frameHeight:this.currentSession.frameHeight,frameWidth:this.currentSession.frameWidth,duration:performance.now()-this.currentSession.startedAtInMs,sampleCount:this.sampleCount,distributionBins:this.distributionBins.slice()}:null},g.start=function(){this.frameProcessingStartedAt=performance.now()},g.suitableForThisSession=function(C,m,w,I){return this.currentSession&&this.currentSession.effectId===C&&this.currentSession.effectParam===I&&this.currentSession.frameWidth===m&&this.currentSession.frameHeight===w},g.reportAndResetSession=function(C,m,w,I,G){var R=this;C&&this.reportStatisticsResult(C),this.resetCurrentSession(this.getNextTimeout(m,this.currentSession),m,w,I,G),this.timeoutId&&li.clearTimeout(this.timeoutId),this.timeoutId=li.setTimeout(function(){return R.reportAndResetSession(R.getStatistics(),m,w,I,G)}.bind(this),this.currentSession.timeoutInMs)},g.resetCurrentSession=function(C,m,w,I,G){this.currentSession={startedAtInMs:performance.now(),timeoutInMs:C,effectId:m,effectParam:w,frameWidth:I,frameHeight:G},this.sampleCount=0,this.distributionBins.fill(0)},g.getNextTimeout=function(C,m){return m&&m.effectId===C?Math.min(s.maxSessionTimeoutInMs,2*m.timeoutInMs):s.initialSessionTimeoutInMs},s}();Or.initialSessionTimeoutInMs=1e3,Or.maxSessionTimeoutInMs=3e4;var Tr=function(){function s(v){var C=this;this.reportPerformanceEvent=v,this.isFirstFrameProcessed=!1,this.frameProcessTimeLimit=100,this.frameProcessingStartedAt=0,this.frameProcessingTimeCost=0,this.processedFrameCount=0,this.performanceStatistics=new Or(s.distributionBinSize,function(m){return C.reportPerformanceEvent("video.performance.performanceDataGenerated",[m])})}var g=s.prototype;return g.startMonitorSlowFrameProcessing=function(){var C=this;li.setInterval(function(){if(0!==C.processedFrameCount){var m=C.frameProcessingTimeCost/C.processedFrameCount;m>C.frameProcessTimeLimit&&C.reportPerformanceEvent("video.performance.frameProcessingSlow",[m]),C.frameProcessingTimeCost=0,C.processedFrameCount=0}},s.calculateFPSInterval)},g.setFrameProcessTimeLimit=function(C){this.frameProcessTimeLimit=C},g.reportApplyingVideoEffect=function(C,m){var w,I;(null===(w=this.applyingEffect)||void 0===w?void 0:w.effectId)===C&&(null===(I=this.applyingEffect)||void 0===I?void 0:I.effectParam)===m||(this.applyingEffect={effectId:C,effectParam:m},this.appliedEffect=void 0)},g.reportVideoEffectChanged=function(C,m){void 0===this.applyingEffect||this.applyingEffect.effectId!==C&&this.applyingEffect.effectParam!==m||(this.appliedEffect={effectId:C,effectParam:m},this.applyingEffect=void 0,this.isFirstFrameProcessed=!1)},g.reportStartFrameProcessing=function(C,m){li.tick(),this.appliedEffect&&(this.frameProcessingStartedAt=performance.now(),this.performanceStatistics.processStarts(this.appliedEffect.effectId,C,m,this.appliedEffect.effectParam))},g.reportFrameProcessed=function(){var C;this.appliedEffect&&(this.processedFrameCount++,this.frameProcessingTimeCost+=performance.now()-this.frameProcessingStartedAt,this.performanceStatistics.processEnds(),this.isFirstFrameProcessed||(this.isFirstFrameProcessed=!0,this.reportPerformanceEvent("video.performance.firstFrameProcessed",[Date.now(),this.appliedEffect.effectId,null===(C=this.appliedEffect)||void 0===C?void 0:C.effectParam])))},g.reportGettingTextureStream=function(C){this.gettingTextureStreamStartedAt=performance.now(),this.currentStreamId=C},g.reportTextureStreamAcquired=function(){if(void 0!==this.gettingTextureStreamStartedAt){var C=performance.now()-this.gettingTextureStreamStartedAt;this.reportPerformanceEvent("video.performance.textureStreamAcquired",[this.currentStreamId,C])}},s}();Tr.distributionBinSize=1e3,Tr.calculateFPSInterval=1e3;var bi,pa,ga,Ni,ha=function(g,v,C,m){return new(C||(C=Promise))(function(I,G){function R(Q){try{k(m.next(Q))}catch(J){G(J)}}function F(Q){try{k(m.throw(Q))}catch(J){G(J)}}function k(Q){Q.done?I(Q.value):function(I){return I instanceof C?I:new C(function(G){G(I)})}(Q.value).then(R,F)}k((m=m.apply(g,v||[])).next())})};(function(s){var we,g=qt()?void 0:new Tr(ke);function I(we){ke("video.notifyError",[we])}function G(){return z(b)&&!!b.supports.video&&(!!b.supports.video.mediaStream||!!b.supports.video.sharedFrame)}function F(we,q){var Se=this;return function(se){return ha(Se,void 0,void 0,U().mark(function he(){var st,Ct;return U().wrap(function(an){for(;;)switch(an.prev=an.next){case 0:return st=se.videoFrame,q?.reportStartFrameProcessing(st.codedWidth,st.codedHeight),an.next=4,we(se);case 4:return Ct=an.sent,an.abrupt("return",(q?.reportFrameProcessed(),Ct));case 6:case"end":return an.stop()}},he)}))}}function k(we,q){if(z(b,E.sidePanel),!G()||!ut())throw de;at("video.newVideoFrame",function(Se){if(Se){var se=Se.timestamp;g?.reportStartFrameProcessing(Se.width,Se.height),we(function(we){if("videoFrameBuffer"in we)return we;var q=we.data,Se=function(g,v){var C={};for(var m in g)Object.prototype.hasOwnProperty.call(g,m)&&v.indexOf(m)<0&&(C[m]=g[m]);if(null!=g&&"function"==typeof Object.getOwnPropertySymbols){var w=0;for(m=Object.getOwnPropertySymbols(g);w<m.length;w++)v.indexOf(m[w])<0&&Object.prototype.propertyIsEnumerable.call(g,m[w])&&(C[m[w]]=g[m[w]])}return C}(we,["data"]);return Object.assign(Object.assign({},Se),{videoFrameBuffer:q})}(Se),function(){g?.reportFrameProcessed(),function(we){ke("video.videoFrameProcessed",[we])}(se)},I)}},!1),ke("video.registerForVideoFrame",[q])}function J(){var we;return z(b,E.sidePanel)&&function(){var we,q,Se,se;return!(null===(q=null===(we=$t().chrome)||void 0===we?void 0:we.webview)||void 0===q||!q.getTextureStream||null===(se=null===(Se=$t().chrome)||void 0===Se?void 0:Se.webview)||void 0===se||!se.registerTextureStream)}()&&!(null===(we=b.supports.video)||void 0===we||!we.mediaStream)}function ut(){var we;return z(b,E.sidePanel)&&!(null===(we=b.supports.video)||void 0===we||!we.sharedFrame)}(s.VideoFrameFormat||(s.VideoFrameFormat={})).NV12="NV12",(we=s.EffectChangeType||(s.EffectChangeType={})).EffectChanged="EffectChanged",we.EffectDisabled="EffectDisabled",function(we){we.InvalidEffectId="InvalidEffectId",we.InitializationFailure="InitializationFailure"}(s.EffectFailureReason||(s.EffectFailureReason={})),s.registerForVideoFrame=function(we){if(z(b,E.sidePanel),!G())throw de;if(!we.videoFrameHandler||!we.videoBufferHandler)throw new Error("Both videoFrameHandler and videoBufferHandler must be provided");if(at("video.setFrameProcessTimeLimit",function(q){return g?.setFrameProcessTimeLimit(q.timeLimit)},!1),J())!function(we,q){var Se=this;if(z(b,E.sidePanel),!G()||!J())throw de;at("video.startVideoExtensibilityVideoStream",function(se){return ha(Se,void 0,void 0,U().mark(function he(){var st,Ct;return U().wrap(function(an){for(;;)switch(an.prev=an.next){case 0:return st=se.streamId,Ct=F(we,g),an.next=3,Pl(st,Ct,I,g);case 3:case"end":return an.stop()}},he)}))},!1),ke("video.mediaStream.registerForVideoFrame",[q])}(we.videoFrameHandler,we.config);else{if(!ut())throw de;k(we.videoBufferHandler,we.config)}g?.startMonitorSlowFrameProcessing()},s.notifySelectedVideoEffectChanged=function(we,q){if(z(b,E.sidePanel),!G())throw de;ke("video.videoEffectChanged",[we,q])},s.registerForVideoEffect=function(we){if(z(b,E.sidePanel),!G())throw de;at("video.effectParameterChange",ai(we,g),!1),ke("video.registerForVideoEffect")},s.isSupported=G})(bi||(bi={})),function(s){var g="search.queryChange",v="search.queryClose",C="search.queryExecute";function m(){return!(!z(b)||!b.supports.search)}s.registerHandlers=function(w,I,G){if(z(b,E.content),!m())throw de;at(v,w),at(C,I),G&&at(g,G)},s.unregisterHandlers=function(){if(z(b,E.content),!m())throw de;ke("search.unregister"),pn(g),pn(v),pn(C)},s.isSupported=m,s.closeSearch=function(){return new Promise(function(w){if(z(b,E.content),!m())throw new Error("Not supported");w(oi("search.closeSearch"))})}}(pa||(pa={})),function(s){function g(I){return new Promise(function(G){if(!w())throw de;G(et(s.SharingAPIMessages.shareWebContent,I))})}function w(){return!(!z(b)||!b.supports.sharing)}s.SharingAPIMessages={shareWebContent:"sharing.shareWebContent"},s.shareWebContent=function(I,G){try{(function(I){if(!(I&&I.content&&I.content.length))throw{errorCode:fe.INVALID_ARGUMENTS,message:"Shared content is missing"}})(I),function(I){if(I.content.some(function(R){return!R.type}))throw{errorCode:fe.INVALID_ARGUMENTS,message:"Shared content type cannot be undefined"};if(I.content.some(function(R){return R.type!==I.content[0].type}))throw{errorCode:fe.INVALID_ARGUMENTS,message:"Shared content must be of the same type"}}(I),function(I){if("URL"!==I.content[0].type)throw{errorCode:fe.INVALID_ARGUMENTS,message:"Content type is unsupported"};if(I.content.some(function(R){return!R.url}))throw{errorCode:fe.INVALID_ARGUMENTS,message:"URLs are required for URL content types"}}(I)}catch(R){return Zi(function(){return Promise.reject(R)},G)}return z(b,E.content,E.sidePanel,E.task,E.stage,E.meetingStage),Zi(g,G,I)},s.isSupported=w}(ga||(ga={})),function(s){var C;function v(){return!(!z(b)||!b.supports.stageView)}(C=s.StageViewOpenMode||(s.StageViewOpenMode={})).modal="modal",C.popout="popout",C.popoutWithChat="popoutWithChat",s.open=function(C){return new Promise(function(m){if(z(b,E.content),!v())throw de;if(!C)throw new Error("[stageView.open] Stage view params cannot be null");m(et("stageView.open",C))})},s.isSupported=v}(Ni||(Ni={}));var Er,kr,fa=function(g,v,C,m){return new(C||(C=Promise))(function(I,G){function R(Q){try{k(m.next(Q))}catch(J){G(J)}}function F(Q){try{k(m.throw(Q))}catch(J){G(J)}}function k(Q){Q.done?I(Q.value):function(I){return I instanceof C?I:new C(function(G){G(I)})}(Q.value).then(R,F)}k((m=m.apply(g,v||[])).next())})};(function(s){var C,m;(m=s.CameraRestriction||(s.CameraRestriction={}))[m.FrontOrRear=1]="FrontOrRear",m[m.FrontOnly=2]="FrontOnly",m[m.RearOnly=3]="RearOnly",function(m){m[m.Camera=1]="Camera",m[m.Gallery=2]="Gallery"}(s.Source||(s.Source={})),s.hasPermission=function(){if(z(b,E.content,E.task),!C.isSupported())throw de;return et("permissions.has",tt.Media)},s.requestPermission=function(){if(z(b,E.content,E.task),!C.isSupported())throw de;return et("permissions.request",tt.Media)},function(m){function w(){return!!(z(b)&&b.supports.visualMedia&&b.supports.visualMedia.image&&b.supports.permissions)}function I(){if(!w())throw de}function G(F){if(!F||F.maxVisualMediaCount>10||F.maxVisualMediaCount<1)throw Zl}function R(F,k){if(k.length>F)throw zn}m.captureImages=function(F){return fa(this,void 0,void 0,U().mark(function k(){var Q;return U().wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:return z(b,E.content,E.task),I(),G(F),ye.next=3,et("visualMedia.image.captureImages",F);case 3:return ye.abrupt("return",(R(F.maxVisualMediaCount,Q=ye.sent),Q));case 5:case"end":return ye.stop()}},k)}))},m.retrieveImages=function(F){return fa(this,void 0,void 0,U().mark(function k(){var Q;return U().wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:return z(b,E.content,E.task),I(),G(F),ye.next=3,et("visualMedia.image.retrieveImages",F);case 3:return ye.abrupt("return",(R(F.maxVisualMediaCount,Q=ye.sent),Q));case 5:case"end":return ye.stop()}},k)}))},m.isSupported=w}(C=s.image||(s.image={}))})(Er||(Er={})),function(s){function g(){return!(!z(b)||!b.supports.webStorage)}s.isWebStorageClearedOnUserLogOut=function(){return z(b),g()},s.isSupported=g}(kr||(kr={}));var Dr,lt,Ho=Te.V_2;(function(s){var g,C;function v(){return!(!z(b)||!b.supports.call)}(C=g=s.CallModalities||(s.CallModalities={})).Unknown="unknown",C.Audio="audio",C.Video="video",C.VideoBasedScreenSharing="videoBasedScreenSharing",C.Data="data",s.startCall=function(C){var m=j(Ho,V.Call_StartCall);return new Promise(function(w){var I;if(z(b,E.content,E.task),!v())throw de;if(!b.isLegacyTeams)return ft(m,"call.startCall",[C],w);w(Ii(m,"executeDeepLink",function(s,g,v){if(0===s.length)throw new Error("Must have at least one target when creating a call deep link");var C="users="+s.map(function(I){return encodeURIComponent(I)}).join(","),m=void 0===g?"":"&withVideo="+encodeURIComponent(g),w=void 0===v?"":"&source="+encodeURIComponent(v);return Ne+"://"+Me+"/l/call/0/0?"+C+m+w}(C.targets,null===(I=C.requestedModalities)||void 0===I?void 0:I.includes(g.Video),C.source)).then(function(G){if(!G)throw new Error("The call was not properly started");return G}))})},s.isSupported=v})(Dr||(Dr={})),function(s){s.Messages=Hn.Messages,s.FailedReason=Hn.FailedReason,s.ExpectedFailureReason=Hn.ExpectedFailureReason,s.notifyAppLoaded=function(){Hn.notifyAppLoaded()},s.notifySuccess=function(){Hn.notifySuccess()},s.notifyFailure=function(g){Hn.notifyFailure(g)},s.notifyExpectedFailure=function(g){Hn.notifyExpectedFailure(g)}}(lt||(lt={}));var zi,Bo=Ie("thirdPartyCloudStorage");!function(s){var g=[],v={fileType:"",assembleAttachment:[]},C=!0,m=null;function w(G){if(m)if(G&&G.error)m([],G.error),m=null;else if(G&&G.fileChunk)try{C||0!==G.fileChunk.chunkSequence||(Bo("Last chunk is not received or 'endOfFile' value for previous chunk was not set to true"),C=!0,m([],{errorCode:fe.INTERNAL_ERROR,message:"error occurred while receiving data"}),g=[],m=null);var R=Ro(G.fileChunk,G.fileType);if(R?v.assembleAttachment.push(R):(Bo("Received a null assemble attachment for when decoding chunk sequence "+G.fileChunk.chunkSequence+"; not including the chunk in the assembled file."),m?m([],{errorCode:fe.INTERNAL_ERROR,message:"error occurred while receiving data"}):m=null,g=[],m=null,C=!0),C=G.fileChunk.endOfFile,G.fileChunk.endOfFile){var F=Ai(v.assembleAttachment,v.fileType);if(F){var k=new File([F],G.fileName,{type:F.type});g.push(k)}G.isLastFile&&m&&(m(g,G.error),g=[],m=null,C=!0),v={fileType:"",assembleAttachment:[]}}}catch(Q){m&&(m([],{errorCode:fe.INTERNAL_ERROR,message:Q}),g=[],m=null,C=!0)}else m([],{errorCode:fe.INTERNAL_ERROR,message:"data received is null"}),g=[],m=null,C=!0}function I(){return!(!z(b)||!b.supports.thirdPartyCloudStorage)}s.getDragAndDropFiles=function(G,R){if(!R)throw new Error("[getDragAndDropFiles] Callback cannot be null");if(G&&""!==G){if(z(b,E.content,E.task),!I())throw de;if(m)throw m=null,new Error("getDragAndDropFiles cannot be called twice");m=R,C=!0,ke("thirdPartyCloudStorage.getDragAndDropFiles",[G],w)}else R([],{errorCode:fe.INVALID_ARGUMENTS})},s.isSupported=I}(zi||(zi={}));var tn=Te.V_1;function wn(s,g){Zr(j(tn,V.PublicAPIs_Initialize),g).then(function(){s&&s()})}function $n(){Wn.enablePrintCapability()}function Hi(){Wn.print()}function Ir(s){Zn(),ft(j(tn,V.PublicAPIs_GetContext),"getContext",function(g){g.frameContext||(g.frameContext=ie.frameContext),s(g)})}function Ln(s){il(j(tn,V.PublicAPIs_RegisterOnThemeChangeHandlerHelper),s)}function Bi(s){xn(j(tn,V.PublicAPIs_RegisterFullScreenHandler),"fullScreenChange",s,[])}function Fr(s){xn(j(tn,V.PublicAPIs_RegisterAppButtonClickHandler),"appButtonClick",s,[E.content])}function Uo(s){xn(j(tn,V.PublicAPIs_RegisterAppButtonHoverEnterHandler),"appButtonHoverEnter",s,[E.content])}function go(s){xn(j(tn,V.PublicAPIs_RegisterAppButtonHoverLeaveHandler),"appButtonHoverLeave",s,[E.content])}function wi(s){Qt.backStack.registerBackButtonHandlerHelper(j(tn,V.PublicAPIs_RegisterBackButtonHandler),s)}function jo(s){Wn.registerOnLoadHandlerHelper(s)}function Ui(s){Wn.registerBeforeUnloadHandlerHelper(s)}function Kn(s){xn(j(tn,V.PublicAPIs_RegisterFocusEnterHandler),"focusEnter",s,[])}function ji(s){xn(j(tn,V.PublicAPIs_RegisterChangeSettingsHandler),"changeSettings",s,[E.content])}function ho(s,g){z(b),ll(j(tn,V.PublicAPIs_GetTabInstances),g).then(function(v){s(v)})}function Gr(s,g){z(b),sl(j(tn,V.PublicAPIs_GetMruTabInstances),g).then(function(v){s(v)})}function ma(s){cl(j(tn,V.PublicAPIs_ShareDeepLink),{subPageId:s.subEntityId,subPageLabel:s.subEntityLabel,subPageWebUrl:s.subEntityWebUrl})}function Vr(s,g){z(b,E.content,E.sidePanel,E.settings,E.task,E.stage,E.meetingStage);var v=g??pi();ol(j(tn,V.PublicAPIs_ExecuteDeepLink),s).then(function(){v(!0)}).catch(function(C){v(!1,C.message)})}function va(s){mi(j(tn,V.PublicAPIs_SetFrameContext),s)}function Ca(s,g,v){Zr(j(tn,V.PublicAPIs_Initialize),v).then(function(){return g&&g()}),mi(j(tn,V.PublicAPIs_SetFrameContext),s)}var Wo,Yt=Te.V_1;function si(s){al(j(Yt,V.Navigation_ReturnFocus),s)}function Rr(s,g){z(b);var v=g??pi();rl(j(Yt,V.Navigation_NavigateToTab),s).then(function(){v(!0)}).catch(function(C){v(!1,C.message)})}function Si(s,g){z(b,E.content,E.sidePanel,E.settings,E.remove,E.task,E.stage,E.meetingStage);var v=g??pi();cr(j(Yt,V.Navigation_NavigateCrossDomain),s).then(function(){v(!0)}).catch(function(C){v(!1,C.message)})}function Ar(s){z(b);var g=s??pi();fi(j(Yt,V.Navigation_NavigateBack)).then(function(){g(!0)}).catch(function(v){g(!1,v.message)})}!function(s){s.setValidityState=function(g){Qt.config.setValidityState(g)},s.getSettings=function(g){z(b,E.content,E.settings,E.remove,E.sidePanel),Qt.getConfig().then(function(v){g(v)})},s.setSettings=function(g,v){z(b,E.content,E.settings,E.sidePanel);var C=v??pi();Qt.config.setConfig(g).then(function(){C(!0)}).catch(function(m){C(!1,m.message)})},s.registerOnSaveHandler=function(g){Qt.config.registerOnSaveHandlerHelper(g)},s.registerOnRemoveHandler=function(g){Qt.config.registerOnRemoveHandlerHelper(g)}}(Wo||(Wo={}));var Qo,fo,$o=Te.V_1;(function(s){function C(m){return m.height=m.height?m.height:di.Small,m.width=m.width?m.width:di.Small,m}s.startTask=function(m,w){var I=j($o,V.Tasks_StartTask),G=w?function(R){var F,k;return w(null!==(F=R.err)&&void 0!==F?F:"",null!==(k=R.result)&&void 0!==k?k:"")}:void 0;return void 0===m.card&&void 0===m.url||m.card?(z(b,E.content,E.sidePanel,E.meetingStage),ft(I,"tasks.startTask",[m],w)):void 0!==m.completionBotId?xt(I,function(m){if(void 0===m.url||void 0===m.completionBotId)throw new Error("Both url "+m.url+" and completionBotId "+m.completionBotId+" are required for bot url dialog. At least one is undefined.");return{url:m.url,size:{height:m.height?m.height:di.Small,width:m.width?m.width:di.Small},title:m.title,fallbackUrl:m.fallbackUrl,completionBotId:m.completionBotId}}(m),G):ii(I,function(m){if(void 0===m.url)throw new Error("url property of taskInfo object can't be undefined");return{url:m.url,size:{height:m.height?m.height:di.Small,width:m.width?m.width:di.Small},title:m.title,fallbackUrl:m.fallbackUrl}}(m),G),new Ml},s.updateTask=function(m){var R=function(g,v){var C={};for(var m in g)Object.prototype.hasOwnProperty.call(g,m)&&v.indexOf(m)<0&&(C[m]=g[m]);if(null!=g&&"function"==typeof Object.getOwnPropertySymbols){var w=0;for(m=Object.getOwnPropertySymbols(g);w<m.length;w++)v.indexOf(m[w])<0&&Object.prototype.propertyIsEnumerable.call(g,m[w])&&(C[m[w]]=g[m[w]])}return C}(m=C(m),["width","height"]);if(Object.keys(R).length)throw new Error("resize requires a TaskInfo argument containing only width and height");Gn(j($o,V.Tasks_UpdateTask),m)},s.submitTask=function(m,w){tl(j($o,V.Tasks_SubmitTask),m,w)},s.getDefaultSizeIfNotProvided=C})(Qo||(Qo={})),function(s){var C;(C=s.UserMeetingRole||(s.UserMeetingRole={})).guest="Guest",C.attendee="Attendee",C.presenter="Presenter",C.organizer="Organizer",function(C){C.added="Added",C.alreadyExists="AlreadyExists",C.conflict="Conflict",C.notFound="NotFound"}(s.ContainerState||(s.ContainerState={})),s.isSupported=function(){return!(!z(b,E.meetingStage,E.sidePanel)||!b.supports.interactive)}}(fo||(fo={}));var ya=function(){function s(){}var g=s.prototype;return g.getFluidTenantInfo=function(){return Qn(),new Promise(function(C){C(et("interactive.getFluidTenantInfo"))})},g.getFluidToken=function(C){return Qn(),new Promise(function(m){m(et("interactive.getFluidToken",C))})},g.getFluidContainerId=function(){return Qn(),new Promise(function(C){C(et("interactive.getFluidContainerId"))})},g.setFluidContainerId=function(C){return Qn(),new Promise(function(m){m(et("interactive.setFluidContainerId",C))})},g.getNtpTime=function(){return Qn(),new Promise(function(C){C(et("interactive.getNtpTime"))})},g.registerClientId=function(C){return Qn(),new Promise(function(m){m(et("interactive.registerClientId",C))})},g.getClientRoles=function(C){return Qn(),new Promise(function(m){m(et("interactive.getClientRoles",C))})},g.getClientInfo=function(C){return Qn(),new Promise(function(m){m(et("interactive.getClientInfo",C))})},s.create=function(){return Qn(),new s},s}();function Qn(){if(!fo.isSupported())throw new Error("LiveShareHost Not supported")}var ba=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function mo(s){try{return s.cartItems=Lr(s.cartItems),s}catch{throw new Error("Error deserializing cart")}}function Lr(s){return s.map(function(g){if(g.imageURL){var v=new URL(g.imageURL);g.imageURL=v}return g.accessories&&(g.accessories=Lr(g.accessories)),g})}var Ma=function s(g){try{return g.map(function(v){var C=v.imageURL,m=v.accessories,w=function(g,v){var C={};for(var m in g)Object.prototype.hasOwnProperty.call(g,m)&&v.indexOf(m)<0&&(C[m]=g[m]);if(null!=g&&"function"==typeof Object.getOwnPropertySymbols){var w=0;for(m=Object.getOwnPropertySymbols(g);w<m.length;w++)v.indexOf(m[w])<0&&Object.prototype.propertyIsEnumerable.call(g,m[w])&&(C[m[w]]=g[m[w]])}return C}(v,["imageURL","accessories"]),I=Object.assign({},w);return C&&(I.imageURL=C.href),m&&(I.accessories=s(m)),I})}catch{throw new Error("Error serializing cart items")}};function xa(s){if(null!=s){if(!Array.isArray(s)||0===s.length)throw new Error("CartItem.accessories must be a non-empty array");for(var v,g=e(s);!(v=g()).done;){var C=v.value;if(C.accessories)throw new Error("Item in CartItem.accessories cannot have accessories");Nr(C)}}}function Nr(s){if(!s.id)throw new Error("cartItem.id must not be empty");if(!s.name)throw new Error("cartItem.name must not be empty");(function(s){if("number"!=typeof s||s<0)throw new Error("price "+s+" must be a number not less than 0");if(parseFloat(s.toFixed(3))!==s)throw new Error("price "+s+" must have at most 3 decimal places")})(s.price),function(s){if("number"!=typeof s||s<=0||parseInt(s.toString())!==s)throw new Error("quantity "+s+" must be an integer greater than 0")}(s.quantity)}function Wi(s){if(null!=s){if(!s)throw new Error("id must not be empty");if(!1===("string"==typeof(g=s)&&ba.test(g)))throw new Error("id must be a valid UUID")}var g}var Co,Jo,Xo,qo,Zo,Yo,Ko,vo=Te.V_2;(function(s){var m;function C(){return!(!z(b)||!b.supports.marketplace)}s.cartVersion={majorVersion:1,minorVersion:1},(m=s.Intent||(s.Intent={})).TACAdminUser="TACAdminUser",m.TeamsAdminUser="TeamsAdminUser",m.TeamsEndUser="TeamsEndUser",function(m){m.Open="Open",m.Processing="Processing",m.Processed="Processed",m.Closed="Closed",m.Error="Error"}(s.CartStatus||(s.CartStatus={})),s.getCart=function(){if(z(b,E.content,E.task),!C())throw de;return rn(j(vo,V.Marketplace_GetCart),"marketplace.getCart",s.cartVersion).then(mo)},s.addOrUpdateCartItems=function(m){if(z(b,E.content,E.task),!C())throw de;if(!m)throw new Error("addOrUpdateCartItemsParams must be provided");return Wi(m?.cartId),function(s){if(!Array.isArray(s)||0===s.length)throw new Error("cartItems must be a non-empty array");for(var v,g=e(s);!(v=g()).done;){var C=v.value;Nr(C),xa(C.accessories)}}(m?.cartItems),rn(j(vo,V.Marketplace_AddOrUpdateCartItems),"marketplace.addOrUpdateCartItems",Object.assign(Object.assign({},m),{cartItems:Ma(m.cartItems),cartVersion:s.cartVersion})).then(mo)},s.removeCartItems=function(m){if(z(b,E.content,E.task),!C())throw de;if(!m)throw new Error("removeCartItemsParams must be provided");if(Wi(m?.cartId),!Array.isArray(m?.cartItemIds)||0===m?.cartItemIds.length)throw new Error("cartItemIds must be a non-empty array");return rn(j(vo,V.Marketplace_RemoveCardItems),"marketplace.removeCartItems",Object.assign(Object.assign({},m),{cartVersion:s.cartVersion})).then(mo)},s.updateCartStatus=function(m){if(z(b,E.content,E.task),!C())throw de;if(!m)throw new Error("updateCartStatusParams must be provided");return Wi(m?.cartId),function(s){if(!Object.values(Co.CartStatus).includes(s))throw new Error("cartStatus "+s+" is not valid")}(m?.cartStatus),rn(j(vo,V.Marketplace_UpdateCartStatus),"marketplace.updateCartStatus",Object.assign(Object.assign({},m),{cartVersion:s.cartVersion})).then(mo)},s.isSupported=C})(Co||(Co={})),function(s){var v,m,G,g="Action.Execute";function w(G){if(G.requestType===v.ActionExecuteInvokeRequest){if(G.type!==g)throw{errorCode:m.INTERNAL_ERROR,message:"Invalid action type "+G.type+'. Action type must be "'+g+'"'}}else if(G.requestType===v.QueryMessageExtensionRequest){if(G.commandId.length>64)throw new Error("originalRequestInfo.commandId exceeds the maximum size of 64 characters");if(G.parameters.length>5)throw new Error("originalRequestInfo.parameters exceeds the maximum size of 5");for(var k,F=e(G.parameters);!(k=F()).done;){var Q=k.value;if(Q.name.length>64)throw new Error("originalRequestInfo.parameters.name exceeds the maximum size of 64 characters");if(Q.value.length>512)throw new Error("originalRequestInfo.parameters.value exceeds the maximum size of 512 characters")}}}function I(){return!(!z(b)||!b.supports.externalAppAuthentication)}(G=v=s.OriginalRequestType||(s.OriginalRequestType={})).ActionExecuteInvokeRequest="ActionExecuteInvokeRequest",G.QueryMessageExtensionRequest="QueryMessageExtensionRequest",function(G){G.ActionExecuteInvokeResponse="ActionExecuteInvokeResponse",G.QueryMessageExtensionResponse="QueryMessageExtensionResponse"}(s.InvokeResponseType||(s.InvokeResponseType={})),function(G){G.INTERNAL_ERROR="INTERNAL_ERROR"}(m=s.InvokeErrorCode||(s.InvokeErrorCode={})),s.authenticateAndResendRequest=function(G,R,F){if(z(b,E.content),!I())throw de;return zt(G),w(F),Rn("externalAppAuthentication.authenticateAndResendRequest",[G,F,R.url.href,R.width,R.height,R.isExternal]).then(function(k){var J=k[1];if(k[0]&&null!=J.responseType)return J;throw J})},s.authenticateWithSSO=function(G,R){if(z(b,E.content),!I())throw de;return zt(G),Rn("externalAppAuthentication.authenticateWithSSO",[G,R.claims,R.silent]).then(function(F){if(!F[0])throw F[1]})},s.authenticateWithSSOAndResendRequest=function(G,R,F){if(z(b,E.content),!I())throw de;return zt(G),w(F),Rn("externalAppAuthentication.authenticateWithSSOAndResendRequest",[G,F,R.claims,R.silent]).then(function(k){var J=k[1];if(k[0]&&null!=J.responseType)return J;throw J})},s.isSupported=I}(Jo||(Jo={})),function(s){var w;function m(){return!(!z(b)||!b.supports.externalAppCardActions)}(w=s.ActionOpenUrlType||(s.ActionOpenUrlType={})).DeepLinkDialog="DeepLinkDialog",w.DeepLinkOther="DeepLinkOther",w.DeepLinkStageView="DeepLinkStageView",w.GenericUrl="GenericUrl",function(w){w.INTERNAL_ERROR="INTERNAL_ERROR",w.INVALID_LINK="INVALID_LINK",w.NOT_SUPPORTED="NOT_SUPPORTED"}(s.ActionOpenUrlErrorCode||(s.ActionOpenUrlErrorCode={})),function(w){w.INTERNAL_ERROR="INTERNAL_ERROR"}(s.ActionSubmitErrorCode||(s.ActionSubmitErrorCode={})),s.processActionSubmit=function(w,I){if(z(b,E.content),!m())throw de;return zt(w),Rn("externalAppCardActions.processActionSubmit",[w,I]).then(function(G){if(!G[0])throw G[1]})},s.processActionOpenUrl=function(w,I){if(z(b,E.content),!m())throw de;return zt(w),Rn("externalAppCardActions.processActionOpenUrl",[w,I.href]).then(function(G){var R=G[0];if(R)throw R;return G[1]})},s.isSupported=m}(Xo||(Xo={})),function(s){var R;function G(R,F){return{errorCode:R,message:F}}(R=s.CloudStorageProvider||(s.CloudStorageProvider={})).Dropbox="DROPBOX",R.Box="BOX",R.Sharefile="SHAREFILE",R.GoogleDrive="GOOGLEDRIVE",R.Egnyte="EGNYTE",R.SharePoint="SharePoint",function(R){R[R.Sharepoint=0]="Sharepoint",R[R.WopiIntegration=1]="WopiIntegration",R[R.Google=2]="Google",R[R.OneDrive=3]="OneDrive",R[R.Recent=4]="Recent",R[R.Aggregate=5]="Aggregate",R[R.FileSystem=6]="FileSystem",R[R.Search=7]="Search",R[R.AllFiles=8]="AllFiles",R[R.SharedWithMe=9]="SharedWithMe"}(s.CloudStorageProviderType||(s.CloudStorageProviderType={})),function(R){R.ClassMaterials="classMaterials"}(s.SpecialDocumentLibraryType||(s.SpecialDocumentLibraryType={})),function(R){R.Readonly="readonly"}(s.DocumentLibraryAccessType||(s.DocumentLibraryAccessType={})),function(R){R.Downloaded="Downloaded",R.Downloading="Downloading",R.Failed="Failed"}(s.FileDownloadStatus||(s.FileDownloadStatus={})),function(R){R.Download="DOWNLOAD",R.Upload="UPLOAD",R.Delete="DELETE"}(s.CloudStorageProviderFileAction||(s.CloudStorageProviderFileAction={})),s.getCloudStorageFolders=function(R,F){if(z(b,E.content),!R||0===R.length)throw new Error("[files.getCloudStorageFolders] channelId name cannot be null or empty");if(!F)throw new Error("[files.getCloudStorageFolders] Callback cannot be null");ke("files.getCloudStorageFolders",[R],F)},s.addCloudStorageFolder=function(R,F){if(z(b,E.content),!R||0===R.length)throw new Error("[files.addCloudStorageFolder] channelId name cannot be null or empty");if(!F)throw new Error("[files.addCloudStorageFolder] Callback cannot be null");ke("files.addCloudStorageFolder",[R],F)},s.deleteCloudStorageFolder=function(R,F,k){if(z(b,E.content),!R)throw new Error("[files.deleteCloudStorageFolder] channelId name cannot be null or empty");if(!F)throw new Error("[files.deleteCloudStorageFolder] folderToDelete cannot be null or empty");if(!k)throw new Error("[files.deleteCloudStorageFolder] Callback cannot be null");ke("files.deleteCloudStorageFolder",[R,F],k)},s.getCloudStorageFolderContents=function(R,F,k){if(z(b,E.content),!R||!F)throw new Error("[files.getCloudStorageFolderContents] folder/providerCode name cannot be null or empty");if(!k)throw new Error("[files.getCloudStorageFolderContents] Callback cannot be null");if("isSubdirectory"in R&&!R.isSubdirectory)throw new Error("[files.getCloudStorageFolderContents] provided folder is not a subDirectory");ke("files.getCloudStorageFolderContents",[R,F],k)},s.openCloudStorageFile=function(R,F,k){if(z(b,E.content),!R||!F)throw new Error("[files.openCloudStorageFile] file/providerCode cannot be null or empty");if(R.isSubdirectory)throw new Error("[files.openCloudStorageFile] provided file is a subDirectory");ke("files.openCloudStorageFile",[R,F,k])},s.getExternalProviders=function(R,F){if(void 0===R&&(R=!1),z(b,E.content),!F)throw new Error("[files.getExternalProviders] Callback cannot be null");ke("files.getExternalProviders",[R],F)},s.copyMoveFiles=function(R,F,k,Q,J,ye){if(void 0===J&&(J=!1),z(b,E.content),!R||0===R.length)throw new Error("[files.copyMoveFiles] selectedFiles cannot be null or empty");if(!F)throw new Error("[files.copyMoveFiles] providerCode cannot be null or empty");if(!k)throw new Error("[files.copyMoveFiles] destinationFolder cannot be null or empty");if(!Q)throw new Error("[files.copyMoveFiles] destinationProviderCode cannot be null or empty");if(!ye)throw new Error("[files.copyMoveFiles] callback cannot be null");ke("files.copyMoveFiles",[R,F,k,Q,J],ye)},s.getFileDownloads=function(R){if(z(b,E.content),!R)throw new Error("[files.getFileDownloads] Callback cannot be null");ke("files.getFileDownloads",[],R)},s.openDownloadFolder=function(R,F){if(void 0===R&&(R=void 0),z(b,E.content),!F)throw new Error("[files.openDownloadFolder] Callback cannot be null");ke("files.openDownloadFolder",[R],F)},s.addCloudStorageProvider=function(R){if(z(b,E.content),!R)throw G(fe.INVALID_ARGUMENTS,"[files.addCloudStorageProvider] callback cannot be null");ke("files.addCloudStorageProvider",[],R)},s.removeCloudStorageProvider=function(R,F){if(z(b,E.content),!F)throw G(fe.INVALID_ARGUMENTS,"[files.removeCloudStorageProvider] callback cannot be null");if(!R||!R.content)throw G(fe.INVALID_ARGUMENTS,"[files.removeCloudStorageProvider] 3P cloud storage provider request content is missing");ke("files.removeCloudStorageProvider",[R],F)},s.addCloudStorageProviderFile=function(R,F){if(z(b,E.content),!F)throw G(fe.INVALID_ARGUMENTS,"[files.addCloudStorageProviderFile] callback cannot be null");if(!R||!R.content)throw G(fe.INVALID_ARGUMENTS,"[files.addCloudStorageProviderFile] 3P cloud storage provider request content is missing");ke("files.addCloudStorageProviderFile",[R],F)},s.renameCloudStorageProviderFile=function(R,F){if(z(b,E.content),!F)throw G(fe.INVALID_ARGUMENTS,"[files.renameCloudStorageProviderFile] callback cannot be null");if(!R||!R.content)throw G(fe.INVALID_ARGUMENTS,"[files.renameCloudStorageProviderFile] 3P cloud storage provider request content is missing");ke("files.renameCloudStorageProviderFile",[R],F)},s.deleteCloudStorageProviderFile=function(R,F){if(z(b,E.content),!F)throw G(fe.INVALID_ARGUMENTS,"[files.deleteCloudStorageProviderFile] callback cannot be null");if(!(R&&R.content&&R.content.itemList&&R.content.itemList.length>0))throw G(fe.INVALID_ARGUMENTS,"[files.deleteCloudStorageProviderFile] 3P cloud storage provider request content details are missing");ke("files.deleteCloudStorageProviderFile",[R],F)},s.downloadCloudStorageProviderFile=function(R,F){if(z(b,E.content),!F)throw G(fe.INVALID_ARGUMENTS,"[files.downloadCloudStorageProviderFile] callback cannot be null");if(!(R&&R.content&&R.content.itemList&&R.content.itemList.length>0))throw G(fe.INVALID_ARGUMENTS,"[files.downloadCloudStorageProviderFile] 3P cloud storage provider request content details are missing");ke("files.downloadCloudStorageProviderFile",[R],F)},s.uploadCloudStorageProviderFile=function(R,F){if(z(b,E.content),!F)throw G(fe.INVALID_ARGUMENTS,"[files.uploadCloudStorageProviderFile] callback cannot be null");if(!(R&&R.content&&R.content.itemList&&R.content.itemList.length>0))throw G(fe.INVALID_ARGUMENTS,"[files.uploadCloudStorageProviderFile] 3P cloud storage provider request content details are missing");if(!R.content.destinationFolder)throw G(fe.INVALID_ARGUMENTS,"[files.uploadCloudStorageProviderFile] Invalid destination folder details");ke("files.uploadCloudStorageProviderFile",[R],F)},s.registerCloudStorageProviderListChangeHandler=function(R){if(z(b),!R)throw new Error("[registerCloudStorageProviderListChangeHandler] Handler cannot be null");at("files.cloudStorageProviderListChange",R)},s.registerCloudStorageProviderContentChangeHandler=function(R){if(z(b),!R)throw new Error("[registerCloudStorageProviderContentChangeHandler] Handler cannot be null");at("files.cloudStorageProviderContentChange",R)}}(qo||(qo={})),function(s){function g(){return!(!z(b)||!b.supports.meetingRoom)}s.getPairedMeetingRoomInfo=function(){return new Promise(function(v){if(z(b),!g())throw de;v(et("meetingRoom.getPairedMeetingRoomInfo"))})},s.sendCommandToPairedMeetingRoom=function(v){return new Promise(function(C){if(!v||0==v.length)throw new Error("[meetingRoom.sendCommandToPairedMeetingRoom] Command name cannot be null or empty");if(z(b),!g())throw de;C(et("meetingRoom.sendCommandToPairedMeetingRoom",v))})},s.registerMeetingRoomCapabilitiesUpdateHandler=function(v){if(!v)throw new Error("[meetingRoom.registerMeetingRoomCapabilitiesUpdateHandler] Handler cannot be null");if(z(b),!g())throw de;at("meetingRoom.meetingRoomCapabilitiesUpdate",function(C){z(b),v(C)})},s.registerMeetingRoomStatesUpdateHandler=function(v){if(!v)throw new Error("[meetingRoom.registerMeetingRoomStatesUpdateHandler] Handler cannot be null");if(z(b),!g())throw de;at("meetingRoom.meetingRoomStatesUpdate",function(C){z(b),v(C)})},s.isSupported=g}(Zo||(Zo={})),function(s){function g(){return!(!z(b)||!b.supports.notifications)}s.showNotification=function(v){if(z(b,E.content),!g())throw de;ke("notifications.showNotification",[v])},s.isSupported=g}(Yo||(Yo={})),function(s){var w;function m(){return!(!z(b)||!b.supports.remoteCamera)}(w=s.ControlCommand||(s.ControlCommand={})).Reset="Reset",w.ZoomIn="ZoomIn",w.ZoomOut="ZoomOut",w.PanLeft="PanLeft",w.PanRight="PanRight",w.TiltUp="TiltUp",w.TiltDown="TiltDown",function(w){w[w.CommandResetError=0]="CommandResetError",w[w.CommandZoomInError=1]="CommandZoomInError",w[w.CommandZoomOutError=2]="CommandZoomOutError",w[w.CommandPanLeftError=3]="CommandPanLeftError",w[w.CommandPanRightError=4]="CommandPanRightError",w[w.CommandTiltUpError=5]="CommandTiltUpError",w[w.CommandTiltDownError=6]="CommandTiltDownError",w[w.SendDataError=7]="SendDataError"}(s.ErrorReason||(s.ErrorReason={})),function(w){w[w.None=0]="None",w[w.ControlDenied=1]="ControlDenied",w[w.ControlNoResponse=2]="ControlNoResponse",w[w.ControlBusy=3]="ControlBusy",w[w.AckTimeout=4]="AckTimeout",w[w.ControlTerminated=5]="ControlTerminated",w[w.ControllerTerminated=6]="ControllerTerminated",w[w.DataChannelError=7]="DataChannelError",w[w.ControllerCancelled=8]="ControllerCancelled",w[w.ControlDisabled=9]="ControlDisabled",w[w.ControlTerminatedToAllowOtherController=10]="ControlTerminatedToAllowOtherController"}(s.SessionTerminatedReason||(s.SessionTerminatedReason={})),s.getCapableParticipants=function(w){if(!w)throw new Error("[remoteCamera.getCapableParticipants] Callback cannot be null");if(z(b,E.sidePanel),!m())throw de;ke("remoteCamera.getCapableParticipants",w)},s.requestControl=function(w,I){if(!w)throw new Error("[remoteCamera.requestControl] Participant cannot be null");if(!I)throw new Error("[remoteCamera.requestControl] Callback cannot be null");if(z(b,E.sidePanel),!m())throw de;ke("remoteCamera.requestControl",[w],I)},s.sendControlCommand=function(w,I){if(!w)throw new Error("[remoteCamera.sendControlCommand] ControlCommand cannot be null");if(!I)throw new Error("[remoteCamera.sendControlCommand] Callback cannot be null");if(z(b,E.sidePanel),!m())throw de;ke("remoteCamera.sendControlCommand",[w],I)},s.terminateSession=function(w){if(!w)throw new Error("[remoteCamera.terminateSession] Callback cannot be null");if(z(b,E.sidePanel),!m())throw de;ke("remoteCamera.terminateSession",w)},s.registerOnCapableParticipantsChangeHandler=function(w){if(!w)throw new Error("[remoteCamera.registerOnCapableParticipantsChangeHandler] Handler cannot be null");if(z(b,E.sidePanel),!m())throw de;at("remoteCamera.capableParticipantsChange",w)},s.registerOnErrorHandler=function(w){if(!w)throw new Error("[remoteCamera.registerOnErrorHandler] Handler cannot be null");if(z(b,E.sidePanel),!m())throw de;at("remoteCamera.handlerError",w)},s.registerOnDeviceStateChangeHandler=function(w){if(!w)throw new Error("[remoteCamera.registerOnDeviceStateChangeHandler] Handler cannot be null");if(z(b,E.sidePanel),!m())throw de;at("remoteCamera.deviceStateChange",w)},s.registerOnSessionStatusChangeHandler=function(w){if(!w)throw new Error("[remoteCamera.registerOnSessionStatusChangeHandler] Handler cannot be null");if(z(b,E.sidePanel),!m())throw de;at("remoteCamera.sessionStatusChange",w)},s.isSupported=m}(Ko||(Ko={}));var er,tr,ka=Te.V_1;(function(s){function g(){return!(!z(b)||!b.supports.appEntity)}s.selectAppEntity=function(v,C,m,w){if(z(b,E.content),!g())throw de;if(!v||0==v.length)throw new Error("[appEntity.selectAppEntity] threadId name cannot be null or empty");if(!w)throw new Error("[appEntity.selectAppEntity] Callback cannot be null");ft(j(ka,V.AppEntity_SelectAppEntity),"appEntity.selectAppEntity",[v,C,m],w)},s.isSupported=g})(er||(er={})),function(s){var m;function C(){return!(!z(b)||!b.supports.teams)}(m=s.ChannelType||(s.ChannelType={}))[m.Regular=0]="Regular",m[m.Private=1]="Private",m[m.Shared=2]="Shared",s.getTeamChannels=function(m,w){if(z(b,E.content),!C())throw de;if(!m)throw new Error("[teams.getTeamChannels] groupId cannot be null or empty");if(!w)throw new Error("[teams.getTeamChannels] Callback cannot be null");ke("teams.getTeamChannels",[m],w)},s.refreshSiteUrl=function(m,w){if(z(b),!C())throw de;if(!m)throw new Error("[teams.refreshSiteUrl] threadId cannot be null or empty");if(!w)throw new Error("[teams.refreshSiteUrl] Callback cannot be null");ke("teams.refreshSiteUrl",[m],w)},s.isSupported=C,function(m){function I(){return!(!z(b)||!b.supports.teams||!b.supports.teams.fullTrust)}(function(G){function R(){return!!(z(b)&&b.supports.teams&&b.supports.teams.fullTrust&&b.supports.teams.fullTrust.joinedTeams)}G.getUserJoinedTeams=function(F){return new Promise(function(k){if(z(b),!R())throw de;if((ie.hostClientType===De.android||ie.hostClientType===De.teamsRoomsAndroid||ie.hostClientType===De.teamsPhones||ie.hostClientType===De.teamsDisplays)&&!dn("2.0.1"))throw new Error(JSON.stringify({errorCode:fe.OLD_PLATFORM}));k(pr("getUserJoinedTeams",F))})},G.isSupported=R})(m.joinedTeams||(m.joinedTeams={})),m.getConfigSetting=function(G){return new Promise(function(R){if(z(b),!I())throw de;R(pr("getConfigSetting",G))})},m.isSupported=I}(s.fullTrust||(s.fullTrust={}))}(tr||(tr={}));var nr,zr=function(g,v,C,m){return new(C||(C=Promise))(function(I,G){function R(Q){try{k(m.next(Q))}catch(J){G(J)}}function F(Q){try{k(m.throw(Q))}catch(J){G(J)}}function k(Q){Q.done?I(Q.value):function(I){return I instanceof C?I:new C(function(G){G(I)})}(Q.value).then(R,F)}k((m=m.apply(g,v||[])).next())})};!function(s){s.frameProcessingTimeoutInMs=2e3;var v,F,g=qt()?void 0:new Tr(ke);function C(){var F=setTimeout(function(){R("Frame not processed in "+s.frameProcessingTimeoutInMs+"ms",v.Warn)},s.frameProcessingTimeoutInMs);return function(){clearTimeout(F)}}function m(F,k){var Q=this;return function(J){return zr(Q,void 0,void 0,U().mark(function ye(){var ut,we,q;return U().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return k.reportStartFrameProcessing((ut=J.videoFrame).codedWidth,ut.codedHeight),we=C(),se.next=5,F(J);case 5:return q=se.sent,se.abrupt("return",(we(),k.reportFrameProcessed(),q));case 7:case"end":return se.stop()}},ye)}))}}function I(){return z(b),bi.isSupported()}function R(F,k){void 0===k&&(k=v.Warn),ke("video.notifyError",[F,k])}(F=v=s.ErrorLevel||(s.ErrorLevel={})).Fatal="fatal",F.Warn="warn",s.registerForVideoFrame=function(F){var Q,J,k=this;if(!I())throw de;if(!F.videoFrameHandler||!F.videoBufferHandler)throw new Error("Both videoFrameHandler and videoBufferHandler must be provided");if(z(b,E.sidePanel)){if(at("video.setFrameProcessTimeLimit",function(ye){return g?.setFrameProcessTimeLimit(ye)},!1),null===(Q=b.supports.video)||void 0===Q?void 0:Q.mediaStream)at("video.startVideoExtensibilityVideoStream",function(ye){return zr(k,void 0,void 0,U().mark(function ut(){var we,q,Se;return U().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:if(we=ye.streamId,q=ye.metadataInTexture,Se=g?m(F.videoFrameHandler,g):F.videoFrameHandler,!q){he.next=6;break}return he.next=4,xl(we,Se,R,g);case 4:he.next=8;break;case 6:return he.next=8,Pl(we,Se,R,g);case 8:case"end":return he.stop()}},ut)}))},!1),ke("video.mediaStream.registerForVideoFrame",[F.config]);else{if(null===(J=b.supports.video)||void 0===J||!J.sharedFrame)throw de;at("video.newVideoFrame",function(ye){if(ye){g?.reportStartFrameProcessing(ye.width,ye.height);var ut=C(),we=ye.timestamp;F.videoBufferHandler(function(F){return F.videoFrameBuffer=F.videoFrameBuffer||F.data,delete F.data,F}(ye),function(){ut(),g?.reportFrameProcessed(),function(F){ke("video.videoFrameProcessed",[F])}(we)},R)}},!1),ke("video.registerForVideoFrame",[F.config])}g?.startMonitorSlowFrameProcessing()}},s.notifySelectedVideoEffectChanged=function(F,k,Q){if(z(b,E.sidePanel),!I())throw de;ke("video.videoEffectChanged",[F,k,Q])},s.registerForVideoEffect=function(F){if(z(b,E.sidePanel),!I())throw de;at("video.effectParameterChange",ai(F,g),!1),ke("video.registerForVideoEffect")},s.updatePersonalizedEffects=function(F){if(z(b,E.sidePanel),!bi.isSupported())throw de;ke("video.personalizedEffectsChanged",[F])},s.isSupported=I,s.notifyFatalError=function(F){if(z(b),!bi.isSupported())throw de;R(F,v.Fatal)}}(nr||(nr={}))}(),Ye}()},78590:function(ht,wt,T){"use strict";T.d(wt,{w9:function(){return go},rP:function(){return El},Qo:function(){return M},Cq:function(){return Fr},Mw:function(){return e}});var M,r,e,U,Ee,Fe,Pe,Ye,je,Ie,j,qe,S={};T.r(S),T.d(S,{addQueryParameters:function(){return Hi},getOrigin:function(){return Ir},removeQueryAndFragment:function(){return $n}}),(r=M||(M={}))[r.ExistingPersistedMashup=0]="ExistingPersistedMashup",r[r.TransientMashup=1]="TransientMashup",r[r.TransientEmptyMashup=2]="TransientEmptyMashup",function(r){r.AddQueries="addQueries",r.BrowseMashup="BrowseMashup",r.ConnectToDataSource="ConnectToDataSource",r.CreateConnection="CreateConnection",r.DataPreview="DataPreview",r.DiagramView="DiagramView",r.EditConnection="EditConnection",r.EditDataflowComputeEngineSettings="EditDataflowComputeEngineSettings",r.EditCubeVariables="editCubeVariables",r.EditQuery="editQuery",r.EditQuickCreate="EditQuickCreate",r.ImportMashupTemplate="importMashupTemplate",r.IncrementalRefreshSettings="incrementalRefreshSettings",r.ManageConnections="manageConnections",r.ManageDataflowComputeEngine="manageDataflowComputeEngine",r.Navigate="navigate",r.QuickCreate="QuickCreate",r.RefreshSettings="refreshSettings",r.ResolveResourceChallenge="ResolveResourceChallenge",r.ShowRefreshHistory="showRefreshHistory"}(e||(e={})),function(r){r.Cancelled="Cancelled",r.CombineFiles="CombineFiles",r.CsvTextSettings="CsvTextSettings",r.DataDiscovery="DataDiscovery",r.DataSources="DataSources",r.DataSourceSettings="DataSourceSettings",r.FolderPreview="FolderPreview",r.IncrementalRefreshSettings="IncrementalRefreshSettings",r.Loading="Loading",r.MappingEditor="MappingEditor",r.Navigator="Navigator",r.QueryEditor="QueryEditor",r.QuickCreate="QuickCreate",r.RecentDataPreview="RecentDataPreview",r.RefreshSettings="RefreshSettings",r.TemplateCredentials="TemplateCredentials",r.TemplateParameters="TemplateParameters",r.TextByExample="TextByExample"}(U||(U={})),function(r){r.Attach="Attach"}(Ee||(Ee={})),function(r){r.Busy="Busy",r.Error="Error",r.Ready="Ready",r.Unknown="Unknown"}(Fe||(Fe={})),function(r){r.Editable="Editable",r.Hidden="Hidden",r.Readonly="Readonly"}(Pe||(Pe={})),function(r){r.Dataflow="Dataflow",r.Project="Project"}(Ye||(Ye={})),function(r){r.Definition="Definition",r.Instance="Instance"}(je||(je={})),function(r){r.DataSourceTemplateKind="DataSourceTemplateKind"}(Ie||(Ie={})),function(r){r.DataSourceTemplateKind="DataSourceTemplateKind",r.Navigation="Navigation"}(j||(j={})),function(r){r.Busy="Busy",r.Error="Error",r.Ready="Ready",r.Unknown="Unknown"}(qe||(qe={}));var wo,Xi,Te=T(90341);function X(r){throw new Error("Unexpected value: "+r)}function Y(r){switch(r.kind){case e.BrowseMashup:case e.ConnectToDataSource:case e.DataPreview:case e.DiagramView:case e.EditConnection:case e.EditCubeVariables:case e.EditDataflowComputeEngineSettings:case e.EditQuickCreate:case e.ImportMashupTemplate:case e.IncrementalRefreshSettings:case e.ManageConnections:case e.ManageDataflowComputeEngine:case e.Navigate:case e.QuickCreate:case e.RefreshSettings:case e.ShowRefreshHistory:return!0;case e.AddQueries:case e.CreateConnection:case e.EditQuery:case e.ResolveResourceChallenge:return!r.keepFlowRunningOnCommit;default:X(r)}}function K(r){switch(r.kind){case e.AddQueries:case e.BrowseMashup:case e.ConnectToDataSource:case e.CreateConnection:case e.DataPreview:case e.DiagramView:case e.EditConnection:case e.EditCubeVariables:case e.EditDataflowComputeEngineSettings:case e.EditQuery:case e.EditQuickCreate:case e.ImportMashupTemplate:case e.IncrementalRefreshSettings:case e.ManageConnections:case e.ManageDataflowComputeEngine:case e.Navigate:case e.QuickCreate:case e.RefreshSettings:case e.ShowRefreshHistory:return!0;case e.ResolveResourceChallenge:return!r.keepFlowRunningOnCancel;default:X(r)}}function de(r,d){return r.kind===d.kind}function zn(r){on(r)}function on(r,d){if(null==r)throw new Error(d?d():"Value should be defined");return r}!function(r){r.ClientInstanceId="clientInstanceId",r.ProtocolId="protocolId"}(wo||(wo={})),function(r){r.DataAutomationId="data-automation-id",r.DataIsAutoFocusable="data-is-autofocusable",r.DataIsFocusable="data-is-focusable"}(Xi||(Xi={}));var qi,Zi,Yi,Mo,Dn,Po,xi,Oi,Ki,$t,qt,ei,zt,Zt,Cn,un,In,Jr=function(){function r(h,f,O){this.iFrameElement=document.createElement("iframe"),this.iFrameElementOriginalDisplayValue=this.iFrameElement.style.display,this.iFrameElement.src=h,this.iFrameElement.title="Power Query",this.iFrameElement.allow="clipboard-read; clipboard-write",this.iFrameElement.setAttribute(Xi.DataIsFocusable,"true"),zn(f),this.container=f,O&&(this.iFrameElement.className=O),this.hide(),this.container.appendChild(this.iFrameElement),this.isDisposed=!1}var d=r.prototype;return d.addEventListener=function(f,O,A){this.isDisposed||(zn(this.iFrameElement.contentWindow),this.iFrameElement.contentWindow.addEventListener(f,O,A))},d.removeEventListener=function(f,O,A){this.isDisposed||(zn(this.iFrameElement.contentWindow),this.iFrameElement.contentWindow.removeEventListener(f,O,A))},d.postMessage=function(f,O,A){this.isDisposed||(zn(this.iFrameElement.contentWindow),this.iFrameElement.contentWindow.postMessage(f,O,A))},d.hide=function(){if(!this.isDisposed){var f=this.iFrameElement.style.display;"none"!==f&&(this.iFrameElementOriginalDisplayValue=f,this.iFrameElement.style.display="none")}},d.show=function(){this.isDisposed||(this.iFrameElement.style.display=this.iFrameElementOriginalDisplayValue)},d.dispose=function(){this.container.removeChild(this.iFrameElement),this.isDisposed=!0},r}();!function(r){r.GetEntityQueryScript="browseMashupCallbacks.getEntityQueryScript"}(qi||(qi={})),function(r){r.GetInitialComputeEngineSettings="computeEngineCallbacks.getInitialComputeEngineSettings"}(Zi||(Zi={})),function(r){r.OnStateChanged="createConnectionFlowClientCallbacks.onStateChanged"}(Yi||(Yi={})),function(r){r.OnSampleDataItemClick="dataDiscoveryFormCallbacks.onSampleDataItemClick"}(Mo||(Mo={})),function(r){r.OnEvaluationEnded="dataPreview.onEvaluationEnded",r.OnEvaluationStarted="dataPreview.onEvaluationStarted",r.OnQueryScriptChange="dataPreview.onQueryScriptChange",r.OnTableSelectionChanged="dataPreview.onTableSelectionChanged"}(Dn||(Dn={})),function(r){r.OnControlStateChanged="flowControlRpcMethodNames.onControlStateChanged"}(Po||(Po={})),function(r){r.OnCommandExecuted="hostCommandsCallbacks.onCommandExecuted"}(xi||(xi={})),function(r){r.GetLoginSuccessRedirectUri="hostPopupsCallbacks.getLoginSuccessRedirectUri",r.OpenHostPopup="hostPopupsCallbacks.openHostPopup"}(Oi||(Oi={})),function(r){r.OnUnlinkConnection="manageConnectionsFlowCallbacks.onUnlinkConnection"}(Ki||(Ki={})),function(r){r.GenerateNewEntityFieldNames="mappingEditorCallbacks.generateNewEntityFieldNames",r.GenerateNewEntityNames="mappingEditorCallbacks.generateNewEntityNames",r.GetEntities="mappingEditorCallbacks.getEntities",r.GetEntityFields="mappingEditorCallbacks.getEntityFields",r.GetEntityKeys="mappingEditorCallbacks.getEntityKeys",r.ValidateMappingEditorResult="mappingEditorCallbacks.validateMappingEditorResult"}($t||($t={})),function(r){r.GetEntityTypeFields="mappingCallbacks.getEntityTypeFields",r.GetEntityTypes="mappingCallbacks.getEntityTypes"}(qt||(qt={})),function(r){r.GetEntityDefinitionFromEntityPath="mappingCallbacksV2.getEntityDefinitionFromEntityPath",r.GetManifestDefinitionFromManifestPath="mappingCallbacksV2.getManifestDefinitionFromManifestPath",r.GetRootManifestDefinition="mappingCallbacksV2.getRootManifestDefinition"}(ei||(ei={})),function(r){r.GetMashupSensitivityLabel="mashupEditorClientCallbacks.getMashupSensitivityLabel",r.OnComputeEngineSettingsChanged="mashupEditorClientCallbacks.onComputeEngineSettingsChanged",r.OnEditingSessionMashupChanged="mashupEditorClientCallbacks.onEditingSessionMashupChanged",r.OnEditingSessionMashupInitialized="mashupEditorClientCallbacks.onEditingSessionMashupInitialized",r.OnMashupEditorClick="mashupEditorClientCallbacks.onMashupEditorClick",r.RenameMashup="mashupEditorClientCallbacks.renameMashup"}(zt||(zt={})),function(r){r.OnNewSqlQueryButtonClicked="powerBIDataMart.onNewSqlQueryButtonClicked",r.OnNewVisualQueryButtonClicked="powerBIDataMart.onNewVisualQueryButtonClicked",r.OnSaveAsViewButtonClicked="powerBIDataMart.onSaveAsViewButtonClicked",r.OnViewSqlButtonClicked="powerBIDataMart.onViewSqlButtonClicked",r.OnVisualizeResultButtonClicked="powerBIDataMart.onVisualizeResultButtonClicked"}(Zt||(Zt={})),function(r){r.OnDownloadExcelFileButtonClick="queryEditorPreviewButtonsCallbacks.onDownloadExcelFileButtonClick",r.OnSaveAsTableButtonClick="queryEditorPreviewButtonsCallbacks.onSaveAsTableButtonClick",r.OnSaveAsViewButtonClick="queryEditorPreviewButtonsCallbacks.onSaveAsViewButtonClick",r.OnVisualizeResultsButtonClick="queryEditorPreviewButtonsCallbacks.onVisualizeResultsButtonClick"}(Cn||(Cn={})),function(r){r.OnCommandBarPopupButtonClick="queryEditorCallbacks.onCommandBarPopupButtonClick",r.OnDiagramViewCommandBarPopupButtonClick="queryEditorCallbacks.onDiagramViewCommandBarPopupButtonClick",r.OnOpenInExcelButtonClick="queryEditorCallbacks.onOpenInExcelButtonClick",r.ValidateQuery="queryEditorCallbacks.validateQuery",r.ValidateQueryNameInteractive="queryEditorCallbacks.validateQueryNameInteractive"}(un||(un={})),function(r){r.GetUserSettings="userSettings.getUserSettings",r.SetUserSettings="userSettings.setUserSettings"}(In||(In={}));var b,Ya=function(){function r(h,f,O,A,ne){this.clientRpcChannel=h,this.clientRpcEndpointHost=f,this.client=O,this.configuration=A,this.clientStartTime=ne,this.registerRpcMethods()}var d=r.prototype;return d.dispose=function(){this.unregisterRpcMethods()},d.registerRpcMethods=function(){var O,A,ne,He,Ve,Ge,We,vt,Jt,nn,Sn,yt,dt,ln,gn,Tt,bn,On,hn,Gt,Jn,fn,Mi,Xn,Pi,Mn,sn,mn,B,D,L,Z,oe,ee,ze,it,pt,At,Ft,Lt,Ll,Ra,Aa,Nl,La,zl,Hl,Bl,Br,f=this;this.register("acquireToken",function(Et){return f.configuration.acquireToken(Et)}),this.register("getClientStartTime",function(){return f.clientStartTime}),this.register("getSettings",function(){return f.configuration.editorSettings}),this.register("getVersion",function(){return"22.28.0"}),this.register("hasMappingCallbacks",function(){return null!=f.configuration.mappingCallbacks}),this.register("hasMappingCallbacksV2",function(){return null!=f.configuration.mappingCallbacksV2}),this.register("onAppReady",function(){return f.clientRpcEndpointHost.onAppReady()}),this.register("onCancel",function(){return f.clientRpcEndpointHost.onCancelCurrentFlow()}),this.register("onCommit",function(){}),this.register("onCommit2",function(Et){return f.clientRpcEndpointHost.onCommitCurrentFlow(Et)}),this.register("onFlowReady",function(){return f.clientRpcEndpointHost.onCurrentFlowReady()}),!(null===(O=this.configuration.browseMashupCallbacks)||void 0===O)&&O.getEntityQueryScript&&this.register(qi.GetEntityQueryScript,this.configuration.browseMashupCallbacks.getEntityQueryScript),!(null===(A=this.configuration.computeEngineCallbacks)||void 0===A)&&A.getInitialComputeEngineSettings&&this.register(Zi.GetInitialComputeEngineSettings,this.configuration.computeEngineCallbacks.getInitialComputeEngineSettings),!(null===(ne=this.configuration.createConnectionFlowClientCallbacks)||void 0===ne)&&ne.onStateChanged&&this.register(Yi.OnStateChanged,this.configuration.createConnectionFlowClientCallbacks.onStateChanged),!(null===(He=this.configuration.dataPreviewCallbacks)||void 0===He)&&He.onEvaluationEnded&&this.register(Dn.OnEvaluationEnded,this.configuration.dataPreviewCallbacks.onEvaluationEnded),!(null===(Ve=this.configuration.dataPreviewCallbacks)||void 0===Ve)&&Ve.onEvaluationStarted&&this.register(Dn.OnEvaluationStarted,this.configuration.dataPreviewCallbacks.onEvaluationStarted),!(null===(Ge=this.configuration.dataPreviewCallbacks)||void 0===Ge)&&Ge.onQueryScriptChange&&this.register(Dn.OnQueryScriptChange,this.configuration.dataPreviewCallbacks.onQueryScriptChange),!(null===(We=this.configuration.dataPreviewCallbacks)||void 0===We)&&We.onTableSelectionChanged&&this.register(Dn.OnTableSelectionChanged,this.configuration.dataPreviewCallbacks.onTableSelectionChanged),!(null===(vt=this.configuration.flowControlCallbacks)||void 0===vt)&&vt.onControlStateChanged&&this.register(Po.OnControlStateChanged,function(){var Et;return null===(Et=f.configuration.flowControlCallbacks)||void 0===Et?void 0:Et.onControlStateChanged(f.client)}),!(null===(Jt=this.configuration.hostPopupsCallbacks)||void 0===Jt)&&Jt.getLoginSuccessRedirectUri&&this.register(Oi.GetLoginSuccessRedirectUri,this.configuration.hostPopupsCallbacks.getLoginSuccessRedirectUri),!(null===(nn=this.configuration.hostPopupsCallbacks)||void 0===nn)&&nn.openHostPopup&&this.register(Oi.OpenHostPopup,this.configuration.hostPopupsCallbacks.openHostPopup),!(null===(Sn=this.configuration.hostCommandsCallbacks)||void 0===Sn)&&Sn.onCommandExecuted&&this.register(xi.OnCommandExecuted,this.configuration.hostCommandsCallbacks.onCommandExecuted),!(null===(yt=this.configuration.manageConnectionsFlowCallbacks)||void 0===yt)&&yt.onUnlinkConnection&&this.register(Ki.OnUnlinkConnection,this.configuration.manageConnectionsFlowCallbacks.onUnlinkConnection),!(null===(dt=this.configuration.mappingEditorCallbacks)||void 0===dt)&&dt.generateNewEntityFieldNames&&this.register($t.GenerateNewEntityFieldNames,this.configuration.mappingEditorCallbacks.generateNewEntityFieldNames),!(null===(ln=this.configuration.mappingEditorCallbacks)||void 0===ln)&&ln.generateNewEntityNames&&this.register($t.GenerateNewEntityNames,this.configuration.mappingEditorCallbacks.generateNewEntityNames),!(null===(gn=this.configuration.mappingEditorCallbacks)||void 0===gn)&&gn.getEntities&&this.register($t.GetEntities,this.configuration.mappingEditorCallbacks.getEntities),!(null===(Tt=this.configuration.mappingEditorCallbacks)||void 0===Tt)&&Tt.getEntityFields&&this.register($t.GetEntityFields,this.configuration.mappingEditorCallbacks.getEntityFields),!(null===(bn=this.configuration.mappingEditorCallbacks)||void 0===bn)&&bn.getEntityKeys&&this.register($t.GetEntityKeys,this.configuration.mappingEditorCallbacks.getEntityKeys),!(null===(On=this.configuration.mappingEditorCallbacks)||void 0===On)&&On.validateMappingEditorResult&&this.register($t.ValidateMappingEditorResult,this.configuration.mappingEditorCallbacks.validateMappingEditorResult),!(null===(hn=this.configuration.mappingCallbacks)||void 0===hn)&&hn.getEntityTypeFields&&this.register(qt.GetEntityTypeFields,this.configuration.mappingCallbacks.getEntityTypeFields),!(null===(Gt=this.configuration.mappingCallbacks)||void 0===Gt)&&Gt.getEntityTypes&&this.register(qt.GetEntityTypes,null===(Jn=this.configuration.mappingCallbacks)||void 0===Jn?void 0:Jn.getEntityTypes),!(null===(fn=this.configuration.mappingCallbacksV2)||void 0===fn)&&fn.getEntityDefinitionFromEntityPath&&this.register(ei.GetEntityDefinitionFromEntityPath,this.configuration.mappingCallbacksV2.getEntityDefinitionFromEntityPath),!(null===(Mi=this.configuration.mappingCallbacksV2)||void 0===Mi)&&Mi.getManifestDefinitionFromManifestPath&&this.register(ei.GetManifestDefinitionFromManifestPath,this.configuration.mappingCallbacksV2.getManifestDefinitionFromManifestPath),!(null===(Xn=this.configuration.mappingCallbacksV2)||void 0===Xn)&&Xn.getRootManifestDefinition&&this.register(ei.GetRootManifestDefinition,null===(Pi=this.configuration.mappingCallbacksV2)||void 0===Pi?void 0:Pi.getRootManifestDefinition),!(null===(Mn=this.configuration.mashupEditorClientCallbacks)||void 0===Mn)&&Mn.getMashupSensitivityLabel&&this.register(zt.GetMashupSensitivityLabel,this.configuration.mashupEditorClientCallbacks.getMashupSensitivityLabel),!(null===(sn=this.configuration.mashupEditorClientCallbacks)||void 0===sn)&&sn.onComputeEngineSettingsChanged&&this.register(zt.OnComputeEngineSettingsChanged,this.configuration.mashupEditorClientCallbacks.onComputeEngineSettingsChanged),!(null===(mn=this.configuration.mashupEditorClientCallbacks)||void 0===mn)&&mn.onEditingSessionMashupChanged&&this.register(zt.OnEditingSessionMashupChanged,this.configuration.mashupEditorClientCallbacks.onEditingSessionMashupChanged),!(null===(B=this.configuration.mashupEditorClientCallbacks)||void 0===B)&&B.onEditingSessionMashupInitialized&&this.register(zt.OnEditingSessionMashupInitialized,this.configuration.mashupEditorClientCallbacks.onEditingSessionMashupInitialized),!(null===(D=this.configuration.mashupEditorClientCallbacks)||void 0===D)&&D.onMashupEditorClick&&this.register(zt.OnMashupEditorClick,null===(L=this.configuration.mashupEditorClientCallbacks)||void 0===L?void 0:L.onMashupEditorClick),!(null===(Z=this.configuration.mashupEditorClientCallbacks)||void 0===Z)&&Z.renameMashup&&this.register(zt.RenameMashup,this.configuration.mashupEditorClientCallbacks.renameMashup),!(null===(oe=this.configuration.powerBIDataMartCallbacks)||void 0===oe)&&oe.onNewSqlQueryButtonClicked&&this.register(Zt.OnNewSqlQueryButtonClicked,this.configuration.powerBIDataMartCallbacks.onNewSqlQueryButtonClicked),!(null===(ee=this.configuration.powerBIDataMartCallbacks)||void 0===ee)&&ee.onNewVisualQueryButtonClicked&&this.register(Zt.OnNewVisualQueryButtonClicked,this.configuration.powerBIDataMartCallbacks.onNewVisualQueryButtonClicked),!(null===(ze=this.configuration.powerBIDataMartCallbacks)||void 0===ze)&&ze.onSaveAsViewButtonClicked&&this.register(Zt.OnSaveAsViewButtonClicked,this.configuration.powerBIDataMartCallbacks.onSaveAsViewButtonClicked),!(null===(it=this.configuration.powerBIDataMartCallbacks)||void 0===it)&&it.onViewSqlButtonClicked&&this.register(Zt.OnViewSqlButtonClicked,this.configuration.powerBIDataMartCallbacks.onViewSqlButtonClicked),!(null===(pt=this.configuration.powerBIDataMartCallbacks)||void 0===pt)&&pt.onVisualizeResultButtonClicked&&this.register(Zt.OnVisualizeResultButtonClicked,this.configuration.powerBIDataMartCallbacks.onVisualizeResultButtonClicked),!(null===(At=this.configuration.queryEditorCallbacks)||void 0===At)&&At.onCommandBarPopupButtonClick&&this.register(un.OnCommandBarPopupButtonClick,function(){var Et;return on(null===(Et=f.configuration.queryEditorCallbacks)||void 0===Et?void 0:Et.onCommandBarPopupButtonClick)(f.client)}),!(null===(Ft=this.configuration.queryEditorCallbacks)||void 0===Ft)&&Ft.onDiagramViewCommandBarPopupButtonClick&&this.register(un.OnDiagramViewCommandBarPopupButtonClick,function(){var Et;return on(null===(Et=f.configuration.queryEditorCallbacks)||void 0===Et?void 0:Et.onDiagramViewCommandBarPopupButtonClick)(f.client)}),!(null===(Lt=this.configuration.queryEditorCallbacks)||void 0===Lt)&&Lt.onOpenInExcelButtonClick&&this.register(un.OnOpenInExcelButtonClick,function(Et){var kt;return on(null===(kt=f.configuration.queryEditorCallbacks)||void 0===kt?void 0:kt.onOpenInExcelButtonClick)(f.client,Et)}),!(null===(Ll=this.configuration.queryEditorCallbacks)||void 0===Ll)&&Ll.validateQuery&&this.register(un.ValidateQuery,function(Et){var kt;return on(null===(kt=f.configuration.queryEditorCallbacks)||void 0===kt?void 0:kt.validateQuery)(f.client,Et)}),!(null===(Ra=this.configuration.queryEditorCallbacks)||void 0===Ra)&&Ra.validateQueryNameInteractive&&this.register(un.ValidateQueryNameInteractive,function(Et){var kt;return on(null===(kt=f.configuration.queryEditorCallbacks)||void 0===kt?void 0:kt.validateQueryNameInteractive)(f.client,Et)}),!(null===(Aa=this.configuration.queryEditorPreviewButtonsCallbacks)||void 0===Aa)&&Aa.onDownloadExcelFileButtonClick&&this.register(Cn.OnDownloadExcelFileButtonClick,function(Et){var kt;return on(null===(kt=f.configuration.queryEditorPreviewButtonsCallbacks)||void 0===kt?void 0:kt.onDownloadExcelFileButtonClick)(Et)}),!(null===(Nl=this.configuration.queryEditorPreviewButtonsCallbacks)||void 0===Nl)&&Nl.onSaveAsTableButtonClick&&this.register(Cn.OnSaveAsTableButtonClick,function(Et){var kt;return on(null===(kt=f.configuration.queryEditorPreviewButtonsCallbacks)||void 0===kt?void 0:kt.onSaveAsTableButtonClick)(Et)}),!(null===(La=this.configuration.queryEditorPreviewButtonsCallbacks)||void 0===La)&&La.onSaveAsViewButtonClick&&this.register(Cn.OnSaveAsViewButtonClick,function(Et){var kt;return on(null===(kt=f.configuration.queryEditorPreviewButtonsCallbacks)||void 0===kt?void 0:kt.onSaveAsViewButtonClick)(Et)}),!(null===(zl=this.configuration.queryEditorPreviewButtonsCallbacks)||void 0===zl)&&zl.onVisualizeResultsButtonClick&&this.register(Cn.OnVisualizeResultsButtonClick,function(Et){var kt;return on(null===(kt=f.configuration.queryEditorPreviewButtonsCallbacks)||void 0===kt?void 0:kt.onVisualizeResultsButtonClick)(Et)}),!(null===(Hl=this.configuration.userSettingsStorageCallbacks)||void 0===Hl)&&Hl.getUserSettings&&this.register(In.GetUserSettings,this.configuration.userSettingsStorageCallbacks.getUserSettings),!(null===(Bl=this.configuration.userSettingsStorageCallbacks)||void 0===Bl)&&Bl.setUserSettings&&this.register(In.SetUserSettings,this.configuration.userSettingsStorageCallbacks.setUserSettings),null!==(Br=this.configuration.dataDiscoveryFormCallbacks)&&void 0!==Br&&Br.onSampleDataItemClick&&this.register(Mo.OnSampleDataItemClick,function(Et){var kt;return on(null===(kt=f.configuration.dataDiscoveryFormCallbacks)||void 0===kt?void 0:kt.onSampleDataItemClick)(Et)})},d.unregisterRpcMethods=function(){this.unregister("acquireToken"),this.unregister("getClientStartTime"),this.unregister("getSettings"),this.unregister("getVersion"),this.unregister("onAppReady"),this.unregister("onCancel"),this.unregister("onCommit"),this.unregister("onFlowReady"),this.unregister(qi.GetEntityQueryScript),this.unregister(Zi.GetInitialComputeEngineSettings),this.unregister(Yi.OnStateChanged),this.unregister(Dn.OnEvaluationEnded),this.unregister(Dn.OnEvaluationStarted),this.unregister(Dn.OnQueryScriptChange),this.unregister(Dn.OnTableSelectionChanged),this.unregister(Oi.GetLoginSuccessRedirectUri),this.unregister(Oi.OpenHostPopup),this.unregister(xi.OnCommandExecuted),this.unregister(Ki.OnUnlinkConnection),this.unregister($t.GenerateNewEntityFieldNames),this.unregister($t.GenerateNewEntityNames),this.unregister($t.GetEntities),this.unregister($t.GetEntityFields),this.unregister($t.GetEntityKeys),this.unregister($t.ValidateMappingEditorResult),this.unregister(qt.GetEntityTypeFields),this.unregister(qt.GetEntityTypes),this.unregister(ei.GetEntityDefinitionFromEntityPath),this.unregister(ei.GetManifestDefinitionFromManifestPath),this.unregister(ei.GetRootManifestDefinition),this.unregister(zt.GetMashupSensitivityLabel),this.unregister(zt.OnComputeEngineSettingsChanged),this.unregister(zt.OnEditingSessionMashupChanged),this.unregister(zt.OnEditingSessionMashupInitialized),this.unregister(zt.OnMashupEditorClick),this.unregister(zt.RenameMashup),this.unregister(Zt.OnNewSqlQueryButtonClicked),this.unregister(Zt.OnNewVisualQueryButtonClicked),this.unregister(Zt.OnSaveAsViewButtonClicked),this.unregister(Zt.OnViewSqlButtonClicked),this.unregister(Zt.OnVisualizeResultButtonClicked),this.unregister(un.OnCommandBarPopupButtonClick),this.unregister(un.OnDiagramViewCommandBarPopupButtonClick),this.unregister(un.OnOpenInExcelButtonClick),this.unregister(un.ValidateQuery),this.unregister(un.ValidateQueryNameInteractive),this.unregister(Cn.OnDownloadExcelFileButtonClick),this.unregister(Cn.OnSaveAsTableButtonClick),this.unregister(Cn.OnSaveAsViewButtonClick),this.unregister(Cn.OnVisualizeResultsButtonClick),this.unregister(In.GetUserSettings),this.unregister(In.SetUserSettings),this.unregister(Mo.OnSampleDataItemClick)},d.register=function(f,O){this.clientRpcChannel.register(f,O)},d.unregister=function(f){this.clientRpcChannel.unregister(f)},r}();!function(r){r.ActivateQuery="activateQuery",r.AddQuery="addQuery",r.CancelAddQueriesFlow="cancelAddQueriesFlow",r.ClickCancelButton="clickCancelButton",r.ClickCommitButton="clickCommitButton",r.ClickCustomButton="clickCustomButton",r.ClickNextStageButton="clickNextStageButton",r.ClickPreviousStageButton="clickPreviousStageButton",r.CreateConnectionFlow_Commit="createConnectionFlow_commit",r.DataPreview_CancelCurrentQueryEvaluation="dataPreview_cancelCurrentQueryEvaluation",r.DataPreview_SelectColumns="dataPreview_selectColumns",r.DeleteAllQueries="deleteAllQueries",r.DisposeService="disposeService",r.EndFlow="endFlow",r.GetActiveQueryName="getActiveQueryName",r.GetCancelButtonLabel="getCancelButtonLabel",r.GetCommitButtonLabel="getCommitButtonLabel",r.GetCommitResult="getCommitResult",r.GetComputeEngineSettings="getComputeEngineSettings",r.GetCurrentFlow="getCurrentFlow",r.GetCustomButtonLabel="getCustomButtonLabel",r.GetDataSourceQueryScript="getDataSourceQueryScript",r.GetDataWizardFooter_ClickCancelButton="getDataWizardFooter_clickCancelButton",r.GetDataWizardFooter_ClickCommitButton="getDataWizardFooter_clickCommitButton",r.GetDataWizardFooter_ClickCustomButton="getDataWizardFooter_clickCustomButton",r.GetDataWizardFooter_ClickNextStageButton="getDataWizardFooter_clickNextStageButton",r.GetDataWizardFooter_ClickPreviousStageButton="getDataWizardFooter_clickPreviousStageButton",r.GetEditingSessionId="getEditingSessionId",r.GetEditingSessionMashup="getEditingSessionMashup",r.GetFooterMessage="getFooterMessage",r.GetGetDataWizardFlowStage="getGetDataWizardFlowStage",r.GetIncrementalRefreshSettings="getIncrementalRefreshSettings",r.GetMashupGatewayVersion="getMashupGatewayVersion",r.GetNextStageButtonLabel="getNextStageButtonLabel",r.GetPreviousStageButtonLabel="getPreviousStageButtonLabel",r.GetQueriesInfo="getQueriesInfo",r.GetQueryEditorState="getQueryEditorState",r.GetQueryEditorStateOrThrow="getQueryEditorStateOrThrow",r.GetQueryNames="getQueryNames",r.GetQueryScript="getQueryScript",r.GetReadyState="getReadyState",r.GetRefreshSettings="getRefreshSettings",r.GetSelectedStepName="getSelectedStepName",r.GetUserSettings="getUserSettings",r.IsCancelButtonEnabled="isCancelButtonEnabled",r.IsCancelButtonVisible="isCancelButtonVisible",r.IsCommitButtonEnabled="isCommitButtonEnabled",r.IsCommitButtonVisible="isCommitButtonVisible",r.IsCustomButtonEnabled="isCustomButtonEnabled",r.IsCustomButtonVisible="isCustomButtonVisible",r.IsDialogVisible="isDialogVisible",r.IsFeatureSupported="isFeatureSupported",r.IsFooterOverlayVisible="isFooterOverlayVisible",r.IsNextStageButtonEnabled="isNextStageButtonEnabled",r.IsNextStageButtonVisible="isNextStageButtonVisible",r.IsPreviousStageButtonEnabled="isPreviousStageButtonEnabled",r.IsPreviousStageButtonVisible="isPreviousStageButtonVisible",r.LogXFramePerformanceMarks="logXFramePerformanceMarks",r.OnHostPopupCancelled="onHostPopupCancelled",r.RefreshActiveQueryResult="refreshActiveQueryResult",r.SetCommitButtonEnabledStatePolicy="setCommitButtonEnabledStatePolicy",r.SetUserSettings="setUserSettings",r.StartFlow="startFlow",r.TrySetQueryScript="trySetQueryScript"}(b||(b={}));var qn=function(){function r(h){this.clientRpcChannel=h}var d=r.prototype;return d.activateQuery=function(f){return this.clientRpcChannel.call(b.ActivateQuery,[f])},d.addQuery=function(f,O,A){return this.clientRpcChannel.call(b.AddQuery,[f,O,A])},d.endFlow=function(){return this.clientRpcChannel.callIfSupported(b.EndFlow)},d.cancelAddQueriesFlow=function(){return this.clientRpcChannel.call(b.CancelAddQueriesFlow)},d.clickCancelButton=function(){return this.clientRpcChannel.call(b.ClickCancelButton)},d.clickCommitButton=function(){return this.clientRpcChannel.call(b.ClickCommitButton)},d.clickCustomButton=function(){return this.clientRpcChannel.call(b.ClickCustomButton)},d.clickNextStageButton=function(){return this.clientRpcChannel.call(b.ClickNextStageButton)},d.clickPreviousStageButton=function(){return this.clientRpcChannel.call(b.ClickPreviousStageButton)},d.createConnectionFlow_commit=function(f){return this.clientRpcChannel.call(b.CreateConnectionFlow_Commit,[f])},d.dataPreview_cancelCurrentQueryEvaluation=function(){return this.clientRpcChannel.call(b.DataPreview_CancelCurrentQueryEvaluation)},d.dataPreview_selectColumns=function(f){return this.clientRpcChannel.callIfSupported(b.DataPreview_SelectColumns,[f])},d.deleteAllQueries=function(){return this.clientRpcChannel.callIfSupported(b.DeleteAllQueries)},d.disposeService=function(){return this.clientRpcChannel.callIfSupported(b.DisposeService)},d.getActiveQueryName=function(){return this.clientRpcChannel.call(b.GetActiveQueryName)},d.getCancelButtonLabel=function(){return this.clientRpcChannel.call(b.GetCancelButtonLabel)},d.getCommitButtonLabel=function(){return this.clientRpcChannel.call(b.GetCommitButtonLabel)},d.getCustomButtonLabel=function(){return this.clientRpcChannel.call(b.GetCustomButtonLabel)},d.getCommitResult=function(){return this.clientRpcChannel.call(b.GetCommitResult)},d.getComputeEngineSettings=function(){return this.clientRpcChannel.call(b.GetComputeEngineSettings)},d.getCurrentFlow=function(){return this.clientRpcChannel.callIfSupported(b.GetCurrentFlow)},d.getDataSourceQueryScript=function(f,O){return this.clientRpcChannel.call(b.GetDataSourceQueryScript,[f,O])},d.getDataWizardFooter_clickCancelButton=function(){return this.clientRpcChannel.call(b.GetDataWizardFooter_ClickCancelButton)},d.getDataWizardFooter_clickCommitButton=function(){return this.clientRpcChannel.call(b.GetDataWizardFooter_ClickCommitButton)},d.getDataWizardFooter_clickCustomButton=function(){return this.clientRpcChannel.call(b.GetDataWizardFooter_ClickCustomButton)},d.getDataWizardFooter_clickNextStageButton=function(){return this.clientRpcChannel.call(b.GetDataWizardFooter_ClickNextStageButton)},d.getDataWizardFooter_clickPreviousStageButton=function(){return this.clientRpcChannel.call(b.GetDataWizardFooter_ClickPreviousStageButton)},d.getEditingSessionId=function(){return this.clientRpcChannel.call(b.GetEditingSessionId)},d.getEditingSessionMashup=function(f){return this.clientRpcChannel.call(b.GetEditingSessionMashup,[f])},d.getFooterMessage=function(){return this.clientRpcChannel.call(b.GetFooterMessage)},d.getGetDataWizardFlowStage=function(){return this.clientRpcChannel.callIfSupported(b.GetGetDataWizardFlowStage)},d.getIncrementalRefreshSettings=function(){return this.clientRpcChannel.call(b.GetIncrementalRefreshSettings)},d.getMashupGatewayVersion=function(){return this.clientRpcChannel.call(b.GetMashupGatewayVersion)},d.getNextStageButtonLabel=function(){return this.clientRpcChannel.call(b.GetNextStageButtonLabel)},d.getPreviousStageButtonLabel=function(){return this.clientRpcChannel.call(b.GetPreviousStageButtonLabel)},d.getQueriesInfo=function(){return this.clientRpcChannel.call(b.GetQueriesInfo)},d.getQueryEditorState=function(){return this.clientRpcChannel.call(b.GetQueryEditorState)},d.getQueryEditorStateOrThrow=function(){return this.clientRpcChannel.call(b.GetQueryEditorStateOrThrow)},d.getQueryNames=function(){return this.clientRpcChannel.call(b.GetQueryNames)},d.getQueryScript=function(f){return this.clientRpcChannel.call(b.GetQueryScript,[f])},d.getReadyState=function(){return this.clientRpcChannel.call(b.GetReadyState)},d.getRefreshSettings=function(){return this.clientRpcChannel.callIfSupported(b.GetRefreshSettings)},d.getSelectedStepName=function(){return this.clientRpcChannel.call(b.GetSelectedStepName)},d.getUserSettings=function(){return this.clientRpcChannel.call(b.GetUserSettings)},d.isCancelButtonEnabled=function(){return this.clientRpcChannel.call(b.IsCancelButtonEnabled)},d.isCancelButtonVisible=function(){return this.clientRpcChannel.call(b.IsCancelButtonVisible)},d.isCommitButtonEnabled=function(){return this.clientRpcChannel.call(b.IsCommitButtonEnabled)},d.isCommitButtonVisible=function(){return this.clientRpcChannel.call(b.IsCommitButtonVisible)},d.isCustomButtonEnabled=function(){return this.clientRpcChannel.call(b.IsCustomButtonEnabled)},d.isCustomButtonVisible=function(){return this.clientRpcChannel.call(b.IsCustomButtonVisible)},d.isDialogVisible=function(){return this.clientRpcChannel.call(b.IsDialogVisible)},d.isFeatureSupported=function(f){return this.clientRpcChannel.call(b.IsFeatureSupported,[f])},d.isFooterOverlayVisible=function(){return this.clientRpcChannel.call(b.IsFooterOverlayVisible)},d.isNextStageButtonEnabled=function(){return this.clientRpcChannel.call(b.IsNextStageButtonEnabled)},d.isNextStageButtonVisible=function(){return this.clientRpcChannel.call(b.IsNextStageButtonVisible)},d.isPreviousStageButtonEnabled=function(){return this.clientRpcChannel.call(b.IsPreviousStageButtonEnabled)},d.isPreviousStageButtonVisible=function(){return this.clientRpcChannel.call(b.IsPreviousStageButtonVisible)},d.logXFramePerformanceMarks=function(f){return this.clientRpcChannel.call(b.LogXFramePerformanceMarks,[f])},d.onHostPopupCancelled=function(f){return this.clientRpcChannel.callIfSupported(b.OnHostPopupCancelled,[f])},d.refreshActiveQueryResult=function(){return this.clientRpcChannel.callIfSupported(b.RefreshActiveQueryResult)},d.setCommitButtonEnabledStatePolicy=function(f){return this.clientRpcChannel.call(b.SetCommitButtonEnabledStatePolicy,[f])},d.setUserSettings=function(f){return this.clientRpcChannel.callIfSupported(b.SetUserSettings,[f])},d.startFlow=function(f,O){return this.clientRpcChannel.callIfSupported(b.StartFlow,[f,O])},d.trySetQueryScript=function(f,O){return this.clientRpcChannel.call(b.TrySetQueryScript,[f,O])},r}(),_n=T(37419),xe=function(){function r(){var h=this;this.resolveMethod=function(f){},this.rejectMethod=function(f){},this.promise=new Promise(function(f,O){h.resolveMethod=f,h.rejectMethod=O})}r.createResolvedDeferred=function(){var f=new r;return f.resolve(),f};var d=r.prototype;return d.resolve=function(f){this.resolveMethod(f)},d.reject=function(f){this.rejectMethod(f)},r}(),Kt=T(11105);function Oo(){return Kt.Z()}function St(){St=function(){return d};var r,d={},h=Object.prototype,f=h.hasOwnProperty,O=Object.defineProperty||function(B,D,L){B[D]=L.value},A="function"==typeof Symbol?Symbol:{},ne=A.iterator||"@@iterator",He=A.asyncIterator||"@@asyncIterator",Ve=A.toStringTag||"@@toStringTag";function Ge(B,D,L){return Object.defineProperty(B,D,{value:L,enumerable:!0,configurable:!0,writable:!0}),B[D]}try{Ge({},"")}catch{Ge=function(L,Z,oe){return L[Z]=oe}}function We(B,D,L,Z){var ee=Object.create((D&&D.prototype instanceof ln?D:ln).prototype),ze=new sn(Z||[]);return O(ee,"_invoke",{value:Mi(B,L,ze)}),ee}function vt(B,D,L){try{return{type:"normal",arg:B.call(D,L)}}catch(Z){return{type:"throw",arg:Z}}}d.wrap=We;var Jt="suspendedStart",nn="suspendedYield",Sn="executing",yt="completed",dt={};function ln(){}function gn(){}function Tt(){}var bn={};Ge(bn,ne,function(){return this});var On=Object.getPrototypeOf,hn=On&&On(On(mn([])));hn&&hn!==h&&f.call(hn,ne)&&(bn=hn);var Gt=Tt.prototype=ln.prototype=Object.create(bn);function Jn(B){["next","throw","return"].forEach(function(D){Ge(B,D,function(L){return this._invoke(D,L)})})}function fn(B,D){function L(oe,ee,ze,it){var pt=vt(B[oe],B,ee);if("throw"!==pt.type){var At=pt.arg,Ft=At.value;return Ft&&"object"==typeof Ft&&f.call(Ft,"__await")?D.resolve(Ft.__await).then(function(Lt){L("next",Lt,ze,it)},function(Lt){L("throw",Lt,ze,it)}):D.resolve(Ft).then(function(Lt){At.value=Lt,ze(At)},function(Lt){return L("throw",Lt,ze,it)})}it(pt.arg)}var Z;O(this,"_invoke",{value:function(ee,ze){function it(){return new D(function(pt,At){L(ee,ze,pt,At)})}return Z=Z?Z.then(it,it):it()}})}function Mi(B,D,L){var Z=Jt;return function(oe,ee){if(Z===Sn)throw new Error("Generator is already running");if(Z===yt){if("throw"===oe)throw ee;return{value:r,done:!0}}for(L.method=oe,L.arg=ee;;){var ze=L.delegate;if(ze){var it=Xn(ze,L);if(it){if(it===dt)continue;return it}}if("next"===L.method)L.sent=L._sent=L.arg;else if("throw"===L.method){if(Z===Jt)throw Z=yt,L.arg;L.dispatchException(L.arg)}else"return"===L.method&&L.abrupt("return",L.arg);Z=Sn;var pt=vt(B,D,L);if("normal"===pt.type){if(Z=L.done?yt:nn,pt.arg===dt)continue;return{value:pt.arg,done:L.done}}"throw"===pt.type&&(Z=yt,L.method="throw",L.arg=pt.arg)}}}function Xn(B,D){var L=D.method,Z=B.iterator[L];if(Z===r)return D.delegate=null,"throw"===L&&B.iterator.return&&(D.method="return",D.arg=r,Xn(B,D),"throw"===D.method)||"return"!==L&&(D.method="throw",D.arg=new TypeError("The iterator does not provide a '"+L+"' method")),dt;var oe=vt(Z,B.iterator,D.arg);if("throw"===oe.type)return D.method="throw",D.arg=oe.arg,D.delegate=null,dt;var ee=oe.arg;return ee?ee.done?(D[B.resultName]=ee.value,D.next=B.nextLoc,"return"!==D.method&&(D.method="next",D.arg=r),D.delegate=null,dt):ee:(D.method="throw",D.arg=new TypeError("iterator result is not an object"),D.delegate=null,dt)}function Pi(B){var D={tryLoc:B[0]};1 in B&&(D.catchLoc=B[1]),2 in B&&(D.finallyLoc=B[2],D.afterLoc=B[3]),this.tryEntries.push(D)}function Mn(B){var D=B.completion||{};D.type="normal",delete D.arg,B.completion=D}function sn(B){this.tryEntries=[{tryLoc:"root"}],B.forEach(Pi,this),this.reset(!0)}function mn(B){if(B||""===B){var D=B[ne];if(D)return D.call(B);if("function"==typeof B.next)return B;if(!isNaN(B.length)){var L=-1,Z=function oe(){for(;++L<B.length;)if(f.call(B,L))return oe.value=B[L],oe.done=!1,oe;return oe.value=r,oe.done=!0,oe};return Z.next=Z}}throw new TypeError(typeof B+" is not iterable")}return gn.prototype=Tt,O(Gt,"constructor",{value:Tt,configurable:!0}),O(Tt,"constructor",{value:gn,configurable:!0}),gn.displayName=Ge(Tt,Ve,"GeneratorFunction"),d.isGeneratorFunction=function(B){var D="function"==typeof B&&B.constructor;return!!D&&(D===gn||"GeneratorFunction"===(D.displayName||D.name))},d.mark=function(B){return Object.setPrototypeOf?Object.setPrototypeOf(B,Tt):(B.__proto__=Tt,Ge(B,Ve,"GeneratorFunction")),B.prototype=Object.create(Gt),B},d.awrap=function(B){return{__await:B}},Jn(fn.prototype),Ge(fn.prototype,He,function(){return this}),d.AsyncIterator=fn,d.async=function(B,D,L,Z,oe){void 0===oe&&(oe=Promise);var ee=new fn(We(B,D,L,Z),oe);return d.isGeneratorFunction(D)?ee:ee.next().then(function(ze){return ze.done?ze.value:ee.next()})},Jn(Gt),Ge(Gt,Ve,"Generator"),Ge(Gt,ne,function(){return this}),Ge(Gt,"toString",function(){return"[object Generator]"}),d.keys=function(B){var D=Object(B),L=[];for(var Z in D)L.push(Z);return L.reverse(),function oe(){for(;L.length;){var ee=L.pop();if(ee in D)return oe.value=ee,oe.done=!1,oe}return oe.done=!0,oe}},d.values=mn,sn.prototype={constructor:sn,reset:function(D){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(Mn),!D)for(var L in this)"t"===L.charAt(0)&&f.call(this,L)&&!isNaN(+L.slice(1))&&(this[L]=r)},stop:function(){this.done=!0;var D=this.tryEntries[0].completion;if("throw"===D.type)throw D.arg;return this.rval},dispatchException:function(D){if(this.done)throw D;var L=this;function Z(At,Ft){return ze.type="throw",ze.arg=D,L.next=At,Ft&&(L.method="next",L.arg=r),!!Ft}for(var oe=this.tryEntries.length-1;oe>=0;--oe){var ee=this.tryEntries[oe],ze=ee.completion;if("root"===ee.tryLoc)return Z("end");if(ee.tryLoc<=this.prev){var it=f.call(ee,"catchLoc"),pt=f.call(ee,"finallyLoc");if(it&&pt){if(this.prev<ee.catchLoc)return Z(ee.catchLoc,!0);if(this.prev<ee.finallyLoc)return Z(ee.finallyLoc)}else if(it){if(this.prev<ee.catchLoc)return Z(ee.catchLoc,!0)}else{if(!pt)throw new Error("try statement without catch or finally");if(this.prev<ee.finallyLoc)return Z(ee.finallyLoc)}}}},abrupt:function(D,L){for(var Z=this.tryEntries.length-1;Z>=0;--Z){var oe=this.tryEntries[Z];if(oe.tryLoc<=this.prev&&f.call(oe,"finallyLoc")&&this.prev<oe.finallyLoc){var ee=oe;break}}ee&&("break"===D||"continue"===D)&&ee.tryLoc<=L&&L<=ee.finallyLoc&&(ee=null);var ze=ee?ee.completion:{};return ze.type=D,ze.arg=L,ee?(this.method="next",this.next=ee.finallyLoc,dt):this.complete(ze)},complete:function(D,L){if("throw"===D.type)throw D.arg;return"break"===D.type||"continue"===D.type?this.next=D.arg:"return"===D.type?(this.rval=this.arg=D.arg,this.method="return",this.next="end"):"normal"===D.type&&L&&(this.next=L),dt},finish:function(D){for(var L=this.tryEntries.length-1;L>=0;--L){var Z=this.tryEntries[L];if(Z.finallyLoc===D)return this.complete(Z.completion,Z.afterLoc),Mn(Z),dt}},catch:function(D){for(var L=this.tryEntries.length-1;L>=0;--L){var Z=this.tryEntries[L];if(Z.tryLoc===D){var oe=Z.completion;if("throw"===oe.type){var ee=oe.arg;Mn(Z)}return ee}}throw new Error("illegal catch attempt")},delegateYield:function(D,L,Z){return this.delegate={iterator:mn(D),resultName:L,nextLoc:Z},"next"===this.method&&(this.arg=r),dt}},d}var en="__SUPPORTS_METHOD__",To=function(){function r(h){var f=this;this.onMessageReceived=function(O){O.method?f.handleRequestMessageReceived(O):f.handleResponseMessageReceived(O)},this.options=h,this.ready=!1,this.methodCallbackMap=new Map,this.requestDeferredByMessageId=new Map,this.queuedRequestMessages=[],this.options.rpcWindow.addListener(this.onMessageReceived),this.internalRegister(en,function(O){return f.handleSupportsMethodMessage(O)})}var d=r.prototype;return d.call=function(f,O){return this.internalCall(r.normalizeMethodName(f),O)},d.callIfSupported=function(f,O){return function(r,d,h,f){return new(h||(h=Promise))(function(A,ne){function He(We){try{Ge(f.next(We))}catch(vt){ne(vt)}}function Ve(We){try{Ge(f.throw(We))}catch(vt){ne(vt)}}function Ge(We){We.done?A(We.value):function(A){return A instanceof h?A:new h(function(ne){ne(A)})}(We.value).then(He,Ve)}Ge((f=f.apply(r,d||[])).next())})}(this,void 0,void 0,St().mark(function A(){return St().wrap(function(Ve){for(;;)switch(Ve.prev=Ve.next){case 0:return Ve.next=2,this.supportsMethod(f);case 2:if(!Ve.sent){Ve.next=5;break}return Ve.abrupt("return",this.call(f,O));case 5:return Ve.abrupt("return",void 0);case 6:case"end":return Ve.stop()}},A,this)}))},d.dispose=function(){this.internalUnregister(en),this.requestDeferredByMessageId.forEach(function(f){return f.reject(function(r){var d=new Error("Rpc disposed");if(null!=d.stack)return d;try{throw d}catch(h){return h}}())}),this.requestDeferredByMessageId.clear(),this.options.rpcWindow.removeListener(this.onMessageReceived)},d.register=function(f,O){var A=this,ne=r.normalizeMethodName(f);this.internalRegister(ne,function(){for(var He,Ve,Ge=arguments.length,We=new Array(Ge),vt=0;vt<Ge;vt++)We[vt]=arguments[vt];return null===(Ve=(He=A.options).onMethodInvoked)||void 0===Ve||Ve.call(He,f,We),O.apply(void 0,We)})},d.supportsMethod=function(f){return this.internalCall(en,[f])},d.unregister=function(f){var O=r.normalizeMethodName(f);this.internalUnregister(O)},d.canPostMessage=function(f){return this.ready},d.internalCall=function(f,O){void 0===O&&(O=void 0);var A=Oo(),ne={id:A,method:f,params:O},He=new xe;return this.requestDeferredByMessageId.set(A,He),this.canPostMessage(ne)?this.tryPostMessage(ne):this.queuedRequestMessages.push(ne),He.promise},d.internalRegister=function(f,O){if(this.methodCallbackMap.has(f))throw new Error("Rpc method with name '"+f+"' already registered.");this.methodCallbackMap.set(f,O)},d.internalUnregister=function(f){this.methodCallbackMap.delete(f)},d.onReady=function(){this.ready=!0,this.flushRequestMessageQueue()},r.getResponseMessageError=function(f){return f instanceof Error?{message:f.message,name:f.name,stack:f.stack}:f},r.normalizeMethodName=function(f){return f.toUpperCase()},d.flushRequestMessageQueue=function(){var f=this;this.queuedRequestMessages.forEach(function(O){return f.tryPostMessage(O)}),this.queuedRequestMessages=[]},d.handleRequestMessageReceived=function(f){var O=this,A=this.methodCallbackMap.get(f.method);if(A){var ne={signature:f.signature,id:f.id};try{var He=A.apply(this,f.params);Promise.resolve(He).then(function(Ve){ne.result=Ve,O.postMessage(ne)}).catch(function(Ve){ne.error=r.getResponseMessageError(Ve),O.postMessage(ne)})}catch(Ve){ne.error=r.getResponseMessageError(Ve),this.postMessage(ne)}}},d.handleResponseMessageReceived=function(f){var O=f.id,A=this.requestDeferredByMessageId.get(O);A&&(f.error?A.reject(f.error):A.resolve(f.result),this.requestDeferredByMessageId.delete(O))},d.handleSupportsMethodMessage=function(f){return this.methodCallbackMap.has(r.normalizeMethodName(f))},d.postMessage=function(f){this.options.rpcWindow.postMessage(f)},d.tryPostMessage=function(f){try{this.postMessage(f)}catch(ne){if(ne instanceof Error){var O=f.id,A=this.requestDeferredByMessageId.get(O);A&&(A.reject(ne),this.requestDeferredByMessageId.delete(O))}}},(0,Te.Z)(r,[{key:"rpcHandshakeHandler",get:function(){return this.options.rpcHandshakeHandler}}]),r}(),Eo=function(r){function d(f){var O;return(O=r.call(this,f)||this).clientOptions=f,O.internalRegister(f.rpcHandshakeHandler.getReadyMessageMethod(),function(){return O.handleReadyMessage()}),O}return(0,_n.Z)(d,r),d.prototype.handleReadyMessage=function(){return this.internalUnregister(this.rpcHandshakeHandler.getReadyMessageMethod()),this.onReady(),this.clientOptions.onAck&&this.clientOptions.onAck(),this.rpcHandshakeHandler.createAckResponse()},d}(To);function da(r,d,h){var f;return r&&li(r)&&r.hasOwnProperty(d)&&null!==(f=r[d])&&void 0!==f?f:h}function li(r){return function(r){return null!==r&&"object"==typeof r}(r)&&!Array.isArray(r)&&r.constructor===Object}var Ni=function(){function r(h){this.signature=h}var d=r.prototype;return d.deserialize=function(f){var O=f.data;return li(O)?da(O,"data",O):O},d.serialize=function(f){return f.signature=this.signature,{id:f.id,kind:da(f,"method",r.emptyValue),signature:r.frameSignature,data:f}},r}();Ni.emptyValue="",Ni.frameSignature="FxFrameControl";var lt,Er=function(){function r(){}var d=r.prototype;return d.createAckResponse=function(){return"start"},d.getReadyMessageMethod=function(){return"ready"},d.isAckResponse=function(f){return"start"===f},r}(),kr=function(){function r(h){this.signature=h}var d=r.prototype;return d.deserialize=function(f){return f.data},d.serialize=function(f){return f.signature=this.signature,f},r}(),Ho="__PONG__",Dr=function(){function r(){}var d=r.prototype;return d.createAckResponse=function(){return Ho},d.getReadyMessageMethod=function(){return"__PING__"},d.isAckResponse=function(f){return f===Ho},r}();!function(r){r.Default="default",r.AzurePortal_v1_0_0="azureportal-v1.0.0"}(lt||(lt={}));var tn=function(){function r(h){zn(h.targetWindow),zn(h.sourceWindow),this.options=h,this.eventListeners=new Map}var d=r.prototype;return d.addListener=function(f){var O=this;if(this.eventListeners.has(f))throw new Error("Duplicate rpc listener added.");var A=function(He){return O.handleMessageReceived(He,f)};this.eventListeners.set(f,A),this.options.sourceWindow.addEventListener(r.eventTypeName,A)},d.postMessage=function(f){var O=this.options.targetOriginProvider.getTargetOrigin(f);this.options.targetWindow.postMessage(this.options.rpcMessageConverter.serialize(f),O)},d.removeListener=function(f){var O=this.eventListeners.get(f);O&&(this.options.sourceWindow.removeEventListener(r.eventTypeName,O),this.eventListeners.delete(f))},r.isMessageEvent=function(f){return!function(r){return null==r}(f.data)},d.canProcessMessage=function(f){return!!f&&f.signature===this.options.rpcMessageConverter.signature},d.handleMessageReceived=function(f,O){if(r.isMessageEvent(f)){var A=this.options.rpcMessageConverter.deserialize(f);this.canProcessMessage(A)&&this.options.allowedOrigins.some(function(ne){return function(r,d){if("*"===d)return!0;if(d.startsWith("https://*.")&&r.startsWith("https://")){var f=d.substring(9);return r.substring(8).endsWith(f)}return r===d}(f.origin,ne)})&&(this.options.targetOriginProvider.onMessageReceived(f.origin),O(A))}},r}();tn.eventTypeName="message";var wn=function(){function r(h){this.explicitTargetOrigin=h}var d=r.prototype;return d.getTargetOrigin=function(f){return this.explicitTargetOrigin},d.onMessageReceived=function(f){},r}();function $n(r){var d=r.indexOf("#"),h=d>=0?r.substring(0,d):r,f=r.indexOf("?");return f>=0?h.substring(0,f):h}function Hi(r){for(var h=r.indexOf("?")>-1?"&":"?",f=arguments.length,O=new Array(f>1?f-1:0),A=1;A<f;A++)O[A-1]=arguments[A];return""+r+h+O.map(function(He){return encodeURIComponent(He.name)+"="+encodeURIComponent(He.value)}).join("&")}function Ir(r){var d=r.indexOf("//");if(d>=0){var h=r.indexOf("/",d+=2);if(h>=0)return r.substring(0,h)}return r}function Ln(){Ln=function(){return d};var r,d={},h=Object.prototype,f=h.hasOwnProperty,O=Object.defineProperty||function(B,D,L){B[D]=L.value},A="function"==typeof Symbol?Symbol:{},ne=A.iterator||"@@iterator",He=A.asyncIterator||"@@asyncIterator",Ve=A.toStringTag||"@@toStringTag";function Ge(B,D,L){return Object.defineProperty(B,D,{value:L,enumerable:!0,configurable:!0,writable:!0}),B[D]}try{Ge({},"")}catch{Ge=function(L,Z,oe){return L[Z]=oe}}function We(B,D,L,Z){var ee=Object.create((D&&D.prototype instanceof ln?D:ln).prototype),ze=new sn(Z||[]);return O(ee,"_invoke",{value:Mi(B,L,ze)}),ee}function vt(B,D,L){try{return{type:"normal",arg:B.call(D,L)}}catch(Z){return{type:"throw",arg:Z}}}d.wrap=We;var Jt="suspendedStart",nn="suspendedYield",Sn="executing",yt="completed",dt={};function ln(){}function gn(){}function Tt(){}var bn={};Ge(bn,ne,function(){return this});var On=Object.getPrototypeOf,hn=On&&On(On(mn([])));hn&&hn!==h&&f.call(hn,ne)&&(bn=hn);var Gt=Tt.prototype=ln.prototype=Object.create(bn);function Jn(B){["next","throw","return"].forEach(function(D){Ge(B,D,function(L){return this._invoke(D,L)})})}function fn(B,D){function L(oe,ee,ze,it){var pt=vt(B[oe],B,ee);if("throw"!==pt.type){var At=pt.arg,Ft=At.value;return Ft&&"object"==typeof Ft&&f.call(Ft,"__await")?D.resolve(Ft.__await).then(function(Lt){L("next",Lt,ze,it)},function(Lt){L("throw",Lt,ze,it)}):D.resolve(Ft).then(function(Lt){At.value=Lt,ze(At)},function(Lt){return L("throw",Lt,ze,it)})}it(pt.arg)}var Z;O(this,"_invoke",{value:function(ee,ze){function it(){return new D(function(pt,At){L(ee,ze,pt,At)})}return Z=Z?Z.then(it,it):it()}})}function Mi(B,D,L){var Z=Jt;return function(oe,ee){if(Z===Sn)throw new Error("Generator is already running");if(Z===yt){if("throw"===oe)throw ee;return{value:r,done:!0}}for(L.method=oe,L.arg=ee;;){var ze=L.delegate;if(ze){var it=Xn(ze,L);if(it){if(it===dt)continue;return it}}if("next"===L.method)L.sent=L._sent=L.arg;else if("throw"===L.method){if(Z===Jt)throw Z=yt,L.arg;L.dispatchException(L.arg)}else"return"===L.method&&L.abrupt("return",L.arg);Z=Sn;var pt=vt(B,D,L);if("normal"===pt.type){if(Z=L.done?yt:nn,pt.arg===dt)continue;return{value:pt.arg,done:L.done}}"throw"===pt.type&&(Z=yt,L.method="throw",L.arg=pt.arg)}}}function Xn(B,D){var L=D.method,Z=B.iterator[L];if(Z===r)return D.delegate=null,"throw"===L&&B.iterator.return&&(D.method="return",D.arg=r,Xn(B,D),"throw"===D.method)||"return"!==L&&(D.method="throw",D.arg=new TypeError("The iterator does not provide a '"+L+"' method")),dt;var oe=vt(Z,B.iterator,D.arg);if("throw"===oe.type)return D.method="throw",D.arg=oe.arg,D.delegate=null,dt;var ee=oe.arg;return ee?ee.done?(D[B.resultName]=ee.value,D.next=B.nextLoc,"return"!==D.method&&(D.method="next",D.arg=r),D.delegate=null,dt):ee:(D.method="throw",D.arg=new TypeError("iterator result is not an object"),D.delegate=null,dt)}function Pi(B){var D={tryLoc:B[0]};1 in B&&(D.catchLoc=B[1]),2 in B&&(D.finallyLoc=B[2],D.afterLoc=B[3]),this.tryEntries.push(D)}function Mn(B){var D=B.completion||{};D.type="normal",delete D.arg,B.completion=D}function sn(B){this.tryEntries=[{tryLoc:"root"}],B.forEach(Pi,this),this.reset(!0)}function mn(B){if(B||""===B){var D=B[ne];if(D)return D.call(B);if("function"==typeof B.next)return B;if(!isNaN(B.length)){var L=-1,Z=function oe(){for(;++L<B.length;)if(f.call(B,L))return oe.value=B[L],oe.done=!1,oe;return oe.value=r,oe.done=!0,oe};return Z.next=Z}}throw new TypeError(typeof B+" is not iterable")}return gn.prototype=Tt,O(Gt,"constructor",{value:Tt,configurable:!0}),O(Tt,"constructor",{value:gn,configurable:!0}),gn.displayName=Ge(Tt,Ve,"GeneratorFunction"),d.isGeneratorFunction=function(B){var D="function"==typeof B&&B.constructor;return!!D&&(D===gn||"GeneratorFunction"===(D.displayName||D.name))},d.mark=function(B){return Object.setPrototypeOf?Object.setPrototypeOf(B,Tt):(B.__proto__=Tt,Ge(B,Ve,"GeneratorFunction")),B.prototype=Object.create(Gt),B},d.awrap=function(B){return{__await:B}},Jn(fn.prototype),Ge(fn.prototype,He,function(){return this}),d.AsyncIterator=fn,d.async=function(B,D,L,Z,oe){void 0===oe&&(oe=Promise);var ee=new fn(We(B,D,L,Z),oe);return d.isGeneratorFunction(D)?ee:ee.next().then(function(ze){return ze.done?ze.value:ee.next()})},Jn(Gt),Ge(Gt,Ve,"Generator"),Ge(Gt,ne,function(){return this}),Ge(Gt,"toString",function(){return"[object Generator]"}),d.keys=function(B){var D=Object(B),L=[];for(var Z in D)L.push(Z);return L.reverse(),function oe(){for(;L.length;){var ee=L.pop();if(ee in D)return oe.value=ee,oe.done=!1,oe}return oe.done=!0,oe}},d.values=mn,sn.prototype={constructor:sn,reset:function(D){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(Mn),!D)for(var L in this)"t"===L.charAt(0)&&f.call(this,L)&&!isNaN(+L.slice(1))&&(this[L]=r)},stop:function(){this.done=!0;var D=this.tryEntries[0].completion;if("throw"===D.type)throw D.arg;return this.rval},dispatchException:function(D){if(this.done)throw D;var L=this;function Z(At,Ft){return ze.type="throw",ze.arg=D,L.next=At,Ft&&(L.method="next",L.arg=r),!!Ft}for(var oe=this.tryEntries.length-1;oe>=0;--oe){var ee=this.tryEntries[oe],ze=ee.completion;if("root"===ee.tryLoc)return Z("end");if(ee.tryLoc<=this.prev){var it=f.call(ee,"catchLoc"),pt=f.call(ee,"finallyLoc");if(it&&pt){if(this.prev<ee.catchLoc)return Z(ee.catchLoc,!0);if(this.prev<ee.finallyLoc)return Z(ee.finallyLoc)}else if(it){if(this.prev<ee.catchLoc)return Z(ee.catchLoc,!0)}else{if(!pt)throw new Error("try statement without catch or finally");if(this.prev<ee.finallyLoc)return Z(ee.finallyLoc)}}}},abrupt:function(D,L){for(var Z=this.tryEntries.length-1;Z>=0;--Z){var oe=this.tryEntries[Z];if(oe.tryLoc<=this.prev&&f.call(oe,"finallyLoc")&&this.prev<oe.finallyLoc){var ee=oe;break}}ee&&("break"===D||"continue"===D)&&ee.tryLoc<=L&&L<=ee.finallyLoc&&(ee=null);var ze=ee?ee.completion:{};return ze.type=D,ze.arg=L,ee?(this.method="next",this.next=ee.finallyLoc,dt):this.complete(ze)},complete:function(D,L){if("throw"===D.type)throw D.arg;return"break"===D.type||"continue"===D.type?this.next=D.arg:"return"===D.type?(this.rval=this.arg=D.arg,this.method="return",this.next="end"):"normal"===D.type&&L&&(this.next=L),dt},finish:function(D){for(var L=this.tryEntries.length-1;L>=0;--L){var Z=this.tryEntries[L];if(Z.finallyLoc===D)return this.complete(Z.completion,Z.afterLoc),Mn(Z),dt}},catch:function(D){for(var L=this.tryEntries.length-1;L>=0;--L){var Z=this.tryEntries[L];if(Z.tryLoc===D){var oe=Z.completion;if("throw"===oe.type){var ee=oe.arg;Mn(Z)}return ee}}throw new Error("illegal catch attempt")},delegateYield:function(D,L,Z){return this.delegate={iterator:mn(D),resultName:L,nextLoc:Z},"next"===this.method&&(this.arg=r),dt}},d}var Uo,go,wi,jo,Ui,Kn,ji,ho,Gr,ma,Vr,va,Ca,Yt,si,Rr,Si,Ar,Wo,_a,$o,Qo,fo,ya,Qn,ba,wa,Sa,mo,Lr,Ma,Pa,xa,Nr,Wi,Oa,Ta,Ea,vo,Co,Jo,Xo,qo,Zo,Yo,Ko,ka,er,tr,nr,zr,s,g,v,C,m,w,I,G,R,F,k,Q,J,ye,ut,we,q,Se,se,he,st,Ct,yn,an,Hr,Da,El,Ps,kl,Dl,Il,Fl,xs,ci,_o,Gl,Os,Ts,Es,Ia,Fa,Ga,$i,ir,or,Va,Qi,Ji,Vl,Rl,Al,ks,Ds,Is,Fs,Gs,Vs,Rs,As,Ls,Bi=function(r,d,h,f){return new(h||(h=Promise))(function(A,ne){function He(We){try{Ge(f.next(We))}catch(vt){ne(vt)}}function Ve(We){try{Ge(f.throw(We))}catch(vt){ne(vt)}}function Ge(We){We.done?A(We.value):function(A){return A instanceof h?A:new h(function(ne){ne(A)})}(We.value).then(He,Ve)}Ge((f=f.apply(r,d||[])).next())})},Fr=function(){function r(h){var O,A,ne,f=this,He=new Date;this.instanceId=Oo(),this.configuration=h;var Ve=null!==(O=this.configuration.clientSettings.clientEnvironment)&&void 0!==O?O:this.createDefaultClientEnvironment(this.configuration.clientSettings.container,this.configuration.clientSettings.className),Ge=[{name:wo.ClientInstanceId,value:this.instanceId}];this.configuration.clientSettings.protocolId&&Ge.push({name:wo.ProtocolId,value:this.configuration.clientSettings.protocolId});var We=Hi.apply(S,[this.configuration.clientSettings.url].concat(Ge));this.appWindow=Ve.appWindowFactory(We);var vt=void 0!==this.configuration.clientSettings.allowedOrigin?this.configuration.clientSettings.allowedOrigin:"*",Jt=function(r,d){return d===lt.AzurePortal_v1_0_0?{rpcMessageConverter:new Ni(r),rpcHandshakeHandler:new Er}:{rpcMessageConverter:new kr(r),rpcHandshakeHandler:new Dr}}(function(r){return null==r?"mspq":"mspq-"+r}(this.instanceId),null!==(A=this.configuration.clientSettings.protocolId)&&void 0!==A?A:lt.Default);this.clientRpcChannel=new Eo({debugName:"MashupEditorClient.clientRpcChannel",enableDebugLogging:null!==(ne=this.configuration.clientSettings.enableDebugLogging)&&void 0!==ne&&ne,rpcHandshakeHandler:Jt.rpcHandshakeHandler,rpcWindow:new tn({allowedOrigins:[vt],rpcMessageConverter:Jt.rpcMessageConverter,sourceWindow:Ve.clientWindow,targetOriginProvider:new wn(vt),targetWindow:this.appWindow})}),this.clientRpcEndpoint=new Ya(this.clientRpcChannel,{onCancelCurrentFlow:function(){return f.onCancelCurrentFlow()},onCommitCurrentFlow:function(Sn){return f.onCommitCurrentFlow(Sn)},onCurrentFlowReady:function(){return f.onCurrentFlowReady()},onAppReady:function(){return f.appReady.resolve()}},this,h,He),this.serviceProxy=new qn(this.clientRpcChannel),this.appReady=new xe}var d=r.prototype;return d.activateQuery=function(f){return this.serviceProxy.activateQuery(f)},d.addQuery=function(f,O,A){return this.serviceProxy.addQuery(f,O,A)},d.deleteAllQueries=function(){return this.serviceProxy.deleteAllQueries()},d.onHostPopupCancelled=function(f){return this.serviceProxy.onHostPopupCancelled(f)},d.cancelAddQueriesFlow=function(){return this.serviceProxy.cancelAddQueriesFlow()},d.endFlow=function(){return this.appWindow.hide(),this.serviceProxy.endFlow()},d.getActiveQueryName=function(){return this.serviceProxy.getActiveQueryName()},d.getCommitResult=function(){return this.serviceProxy.getCommitResult()},d.getComputeEngineSettings=function(){return this.serviceProxy.getComputeEngineSettings()},d.getCurrentFlow=function(){return this.serviceProxy.getCurrentFlow()},d.getDataSourceQueryScript=function(f,O){return this.serviceProxy.getDataSourceQueryScript(f,O)},d.getEditingSessionId=function(){return this.serviceProxy.getEditingSessionId()},d.getEditingSessionMashup=function(f){return this.serviceProxy.getEditingSessionMashup(f)},d.getMashupGatewayVersion=function(){return this.serviceProxy.getMashupGatewayVersion()},d.getGetDataWizardFlowStage=function(){return this.serviceProxy.getGetDataWizardFlowStage()},d.getFooterMessage=function(){return this.serviceProxy.getFooterMessage()},d.getIncrementalRefreshSettings=function(){return this.serviceProxy.getIncrementalRefreshSettings()},d.getQueriesInfo=function(){return this.serviceProxy.getQueriesInfo()},d.getQueryEditorState=function(){return this.serviceProxy.getQueryEditorState()},d.getQueryEditorStateOrThrow=function(){return this.serviceProxy.getQueryEditorStateOrThrow()},d.getQueryNames=function(){return this.serviceProxy.getQueryNames()},d.getQueryScript=function(f){return this.serviceProxy.getQueryScript(f)},d.getReadyState=function(){return this.serviceProxy.getReadyState()},d.getRefreshSettings=function(){return this.serviceProxy.getRefreshSettings()},d.getSelectedStepName=function(){return this.serviceProxy.getSelectedStepName()},d.getUserSettings=function(){return this.serviceProxy.getUserSettings()},d.isDialogVisible=function(){return this.serviceProxy.isDialogVisible()},d.isFeatureSupported=function(f){return this.serviceProxy.isFeatureSupported(f)},d.isFooterOverlayVisible=function(){return this.serviceProxy.isFooterOverlayVisible()},d.logXFramePerformanceMarks=function(f){return this.serviceProxy.logXFramePerformanceMarks(f)},d.refreshActiveQueryResult=function(){return this.serviceProxy.refreshActiveQueryResult()},d.setCommitButtonEnabledStatePolicy=function(f){return this.serviceProxy.setCommitButtonEnabledStatePolicy(f)},d.setUserSettings=function(f){return this.serviceProxy.setUserSettings(f)},d.startFlow=function(f,O,A,ne){return Bi(this,void 0,void 0,Ln().mark(function He(){return Ln().wrap(function(We){for(;;)switch(We.prev=We.next){case 0:return We.next=2,this.ready;case 2:return We.next=4,this.getCurrentFlow();case 4:if(null==We.sent){We.next=7;break}throw Error("cannot start a new flow when an existing flow is running");case 7:return this.currentFlowConfiguration={flowReady:new xe,shouldEndFlowOnCommit:Y(f),shouldEndFlowOnCancel:K(f),onCommit:function(Jt,nn){if(de(nn,f))return O(Jt,nn);throw new Error("The flow "+f.kind+" returned the wrong type of result: "+nn.kind)},onCancel:A},this.appWindow.show(),this.serviceProxy.startFlow(f,ne),We.abrupt("return",this.currentFlowConfiguration.flowReady.promise);case 11:case"end":return We.stop()}},He,this)}))},d.dispose=function(){return Bi(this,void 0,void 0,Ln().mark(function f(){return Ln().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return this.appWindow.hide(),A.prev=1,A.next=4,this.serviceProxy.disposeService();case 4:return A.prev=4,this.clientRpcEndpoint.dispose(),this.clientRpcChannel.dispose(),this.appWindow.dispose(),A.finish(4);case 9:case"end":return A.stop()}},f,this,[[1,,4,9]])}))},d.trySetQueryScript=function(f,O){return this.serviceProxy.trySetQueryScript(f,O)},d.createDefaultClientEnvironment=function(f,O){return{clientWindow:window,appWindowFactory:function(ne){return new Jr(ne,f,O)}}},d.onCancelCurrentFlow=function(){return Bi(this,void 0,void 0,Ln().mark(function f(){return Ln().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(!this.configuration.onCancel){A.next=2;break}return A.abrupt("return",this.configuration.onCancel(this));case 2:return zn(this.currentFlowConfiguration),A.next=5,this.currentFlowConfiguration.onCancel(this);case 5:this.currentFlowConfiguration.shouldEndFlowOnCancel&&(this.appWindow.hide(),this.currentFlowConfiguration=void 0);case 6:case"end":return A.stop()}},f,this)}))},d.onCommitCurrentFlow=function(f){return Bi(this,void 0,void 0,Ln().mark(function O(){return Ln().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:if(!this.configuration.onCommit){ne.next=2;break}return ne.abrupt("return",this.configuration.onCommit(this));case 2:return zn(this.currentFlowConfiguration),ne.next=5,this.currentFlowConfiguration.onCommit(this,f);case 5:this.currentFlowConfiguration.shouldEndFlowOnCommit&&(this.appWindow.hide(),this.currentFlowConfiguration=void 0);case 6:case"end":return ne.stop()}},O,this)}))},d.onCurrentFlowReady=function(){zn(this.currentFlowConfiguration),this.currentFlowConfiguration.flowReady.resolve()},(0,Te.Z)(r,[{key:"dataPreview",get:function(){var f=this;return{cancelCurrentEvaluation:function(){return f.serviceProxy.dataPreview_cancelCurrentQueryEvaluation()},selectColumns:function(A){return f.serviceProxy.dataPreview_selectColumns(A)}}}},{key:"getDataWizardFooterCallbacks",get:function(){var f=this;return{clickCancelButton:function(){return f.serviceProxy.getDataWizardFooter_clickCancelButton()},clickCommitButton:function(){return f.serviceProxy.getDataWizardFooter_clickCommitButton()},clickCustomButton:function(){return f.serviceProxy.getDataWizardFooter_clickCustomButton()},clickNextStageButton:function(){return f.serviceProxy.getDataWizardFooter_clickNextStageButton()},clickPreviousStageButton:function(){return f.serviceProxy.getDataWizardFooter_clickPreviousStageButton()}}}},{key:"cancelButton",get:function(){var f=this;return{click:function(){return f.serviceProxy.clickCancelButton()},getLabel:function(){return f.serviceProxy.getCancelButtonLabel()},isEnabled:function(){return f.serviceProxy.isCancelButtonEnabled()},isVisible:function(){return f.serviceProxy.isCancelButtonVisible()}}}},{key:"commitButton",get:function(){var f=this;return{click:function(){return f.serviceProxy.clickCommitButton()},getLabel:function(){return f.serviceProxy.getCommitButtonLabel()},isEnabled:function(){return f.serviceProxy.isCommitButtonEnabled()},isVisible:function(){return f.serviceProxy.isCommitButtonVisible()}}}},{key:"customButton",get:function(){var f=this;return{click:function(){return f.serviceProxy.clickCustomButton()},getLabel:function(){return f.serviceProxy.getCustomButtonLabel()},isEnabled:function(){return f.serviceProxy.isCustomButtonEnabled()},isVisible:function(){return f.serviceProxy.isCustomButtonVisible()}}}},{key:"nextStageButton",get:function(){var f=this;return{click:function(){return f.serviceProxy.clickNextStageButton()},getLabel:function(){return f.serviceProxy.getNextStageButtonLabel()},isEnabled:function(){return f.serviceProxy.isNextStageButtonEnabled()},isVisible:function(){return f.serviceProxy.isNextStageButtonVisible()}}}},{key:"createConnectionFlowCallbacks",get:function(){var f=this;return{commit:function(A){return f.serviceProxy.createConnectionFlow_commit(A)}}}},{key:"previousStageButton",get:function(){var f=this;return{click:function(){return f.serviceProxy.clickPreviousStageButton()},getLabel:function(){return f.serviceProxy.getPreviousStageButtonLabel()},isEnabled:function(){return f.serviceProxy.isPreviousStageButtonEnabled()},isVisible:function(){return f.serviceProxy.isPreviousStageButtonVisible()}}}},{key:"ready",get:function(){return this.appReady.promise}}]),r}();!function(r){r.Success="Success",r.Error_EmptyName="Error_EmptyName",r.Error_InvalidCharacters="Error_InvalidCharacters",r.Error_NameAlreadyExists="Error_NameAlreadyExists",r.Error_NameTooLong="Error_NameTooLong"}(Uo||(Uo={})),function(r){r.Cancel="Cancel",r.Commit="Commit"}(go||(go={})),function(r){r.AlwaysCancel="AlwaysCancel",r.AlwaysCommit="AlwaysCommit",r.Ask="Ask"}(wi||(wi={})),function(r){r.BuiltInCommand="BuiltInCommand",r.HostCommand="HostCommand"}(jo||(jo={})),function(r){r.Kusto="kusto",r.Sql="sql"}(Ui||(Ui={})),function(r){r.StepLabel="StepLabel",r.StepName="StepName"}(Kn||(Kn={})),function(r){r.CalculatedEntity="CalculatedEntity",r.Default="Default",r.LinkedEntity="LinkedEntity",r.Parameter="Parameter",r.Visual="Visual"}(ji||(ji={})),function(r){r.Data="Data",r.Schema="Schema"}(ho||(ho={})),function(r){r.None="None",r.Query="Query",r.Step="Step"}(Gr||(Gr={})),function(r){r.Critical="Critical",r.Error="Error"}(ma||(ma={})),function(r){r.AlwaysDisabled="AlwaysDisabled",r.Default="Default"}(Vr||(Vr={})),function(r){r.Cancelled="Cancelled",r.Completed="Completed",r.Failed="Failed",r.NotStarted="NotStarted",r.Running="Running"}(va||(va={})),function(r){r.Access="Access",r.Access_Monocolor="Access_Monocolor",r.ActiveDirectory="ActiveDirectory",r.AddFuzzyClusterColumn="AddFuzzyClusterColumn",r.AddRankColumn="AddRankColumn",r.AdobeAnalytics="AdobeAnalytics",r.AIInsights="AIInsights",r.AllFilled="AllFilled",r.AllRegular="AllRegular",r.Alternates="Alternates",r.AnyType="AnyType",r.AppendQueries="AppendQueries",r.AppendQueriesAsNew="AppendQueriesAsNew",r.AzureAnalysisServices="AzureAnalysisServices",r.AzureBlobs="AzureBlobs",r.AzureFilled="AzureFilled",r.AzureHdInsightClusters="AzureHdInsightClusters",r.AzureRegular="AzureRegular",r.AzureSql="AzureSql",r.AzureSynapse="AzureSynapse",r.AzureTables="AzureTables",r.Binary="Binary",r.Blog="Blog",r.BlueLink="BlueLink",r.CalculatedEntity="CalculatedEntity",r.Calculator="Calculator",r.Cancel="Cancel",r.CancelRefresh="CancelRefresh",r.Cds="Cds",r.ChartClusteredBar="ChartClusteredBar",r.ChartClusteredColumn="ChartClusteredColumn",r.ChartLine="ChartLine",r.ChartPercentageStackedArea="ChartPercentageStackedArea",r.ChartPercentageStackedBar="ChartPercentageStackedBar",r.ChartPercentageStackedColumn="ChartPercentageStackedColumn",r.ChartStackedArea="ChartStackedArea",r.ChartStackedBar="ChartStackedBar",r.ChartStackedColumn="ChartStackedColumn",r.Checkmark="Checkmark",r.ChooseColumns="ChooseColumns",r.ClearFilter="ClearFilter",r.Close="Close",r.CloseAndLoad="CloseAndLoad",r.CloseAndLoadTo="CloseAndLoadTo",r.CloseRed="CloseRed",r.Column="Column",r.ColumnByExample="ColumnByExample",r.CombineFiles="CombineFiles",r.Community="Community",r.ConditionalColumn="ConditionalColumn",r.ConnectDatabase="ConnectDatabase",r.Copilot="Copilot",r.Copy="Copy",r.CountRows="CountRows",r.Cube="Cube",r.CubeAddAndExpandDimensionColumn="CubeAddAndExpandDimensionColumn",r.CubeCollapseAndRemoveColumns="CubeCollapseAndRemoveColumns",r.CubeDimension="CubeDimension",r.CubeDimensionAttribute="CubeDimensionAttribute",r.CubeDimensionHierarchy="CubeDimensionHierarchy",r.CubeMeasure="CubeMeasure",r.CubeServer="CubeServer",r.Currency="Currency",r.CustomColumn="CustomColumn",r.Cut="Cut",r.Database="Database",r.DatabaseClock="DatabaseClock",r.DatabaseDynamic="DatabaseDynamic",r.DatabaseFilled="DatabaseFilled",r.DatabaseLightning="DatabaseLightning",r.DatabaseOpaque="DatabaseOpaque",r.DatabaseRefresh="DatabaseRefresh",r.DatabaseRegular="DatabaseRegular",r.Databases="Databases",r.DatabaseUnknown="DatabaseUnknown",r.Dataflows="Dataflows",r.Dataverse="Dataverse",r.Date="Date",r.DateTime="DateTime",r.DateTimeZone="DateTimeZone",r.Delete="Delete",r.DeleteFile="DeleteFile",r.DemoteHeaders="DemoteHeaders",r.DetectDataType="DetectDataType",r.Diagram="Diagram",r.Documentation="Documentation",r.DragQueries="DragQueries",r.DragQueryGroups="DragQueryGroups",r.DuplicateColumn="DuplicateColumn",r.Duration="Duration",r.Dynamics365="Dynamics365",r.Empty="Empty",r.Entity="Entity",r.Error="Error",r.Excel="Excel",r.Excel_Monocolor="Excel_Monocolor",r.Exchange="Exchange",r.Exchange_Monocolor="Exchange_Monocolor",r.Expand="Expand",r.ExpandColumn="ExpandColumn",r.Fabric="Fabric",r.FabricFilled="FabricFilled",r.FabricRegular="FabricRegular",r.FastCopy="FastCopy",r.Feedback="Feedback",r.FeedbackExtremelyDissatisfied="FeedbackExtremelyDissatisfied",r.FeedbackExtremelySatisfied="FeedbackExtremelySatisfied",r.FeedbackSomewhatDissatisfied="FeedbackSomewhatDissatisfied",r.FeedbackSomewhatSatisfied="FeedbackSomewhatSatisfied",r.Fhir="Fhir",r.FileFilled="FileFilled",r.FileRegular="FileRegular",r.FillDown="FillDown",r.FillUp="FillUp",r.Filter="Filter",r.FitToView="FitToView",r.FluentView="FluentView",r.Folder="Folder",r.FormatText="FormatText",r.FullScreen="FullScreen",r.Function="Function",r.Gear="Gear",r.GetData="GetData",r.GoogleAnalytics="GoogleAnalytics",r.GoToColumn="GoToColumn",r.GridAutoFilter="GridAutoFilter",r.GridCombineFiles="GridCombineFiles",r.GridEditFilter="GridEditFilter",r.GridExpandColumn="GridExpandColumn",r.GridSortedAscending="GridSortedAscending",r.GridSortedDescending="GridSortedDescending",r.GroupBy="GroupBy",r.HorizontalLayout="HorizontalLayout",r.IndexColumn="IndexColumn",r.Info="Info",r.InsertColumnsLeft="InsertColumnsLeft",r.InsertColumnsRight="InsertColumnsRight",r.InsertRowsAbove="InsertRowsAbove",r.InsertRowsBelow="InsertRowsBelow",r.InvokeCustomFunction="InvokeCustomFunction",r.JoinKindFullOuter="JoinKindFullOuter",r.JoinKindInner="JoinKindInner",r.JoinKindLeftAnti="JoinKindLeftAnti",r.JoinKindLeftOuter="JoinKindLeftOuter",r.JoinKindRightAnti="JoinKindRightAnti",r.JoinKindRightOuter="JoinKindRightOuter",r.KeepBottomRows="KeepBottomRows",r.KeepDuplicates="KeepDuplicates",r.KeepErrors="KeepErrors",r.KeepRange="KeepRange",r.KeepTopRows="KeepTopRows",r.Key="Key",r.KeyboardShortcuts="KeyboardShortcuts",r.Kusto="Kusto",r.LightBulb="LightBulb",r.LinkedEntity="LinkedEntity",r.List="List",r.ListToTable="ListToTable",r.Load="Load",r.Logical="Logical",r.ManageConnections="ManageConnections",r.ManageDataSources="ManageDataSources",r.Map="Map",r.MapToEntity="MapToEntity",r.MashupGraphCollapse="MashupGraphCollapse",r.MashupGraphExpand="MashupGraphExpand",r.MashupGraphRelated="MashupGraphRelated",r.MathInfo="MathInfo",r.MergeColumns="MergeColumns",r.MergeQueries="MergeQueries",r.MergeQueriesAsNew="MergeQueriesAsNew",r.More="More",r.MoveColumns="MoveColumns",r.MoveColumnsLeft="MoveColumnsLeft",r.MoveColumnsRight="MoveColumnsRight",r.MoveColumnsToBeginning="MoveColumnsToBeginning",r.MoveColumnsToEnd="MoveColumnsToEnd",r.MoveDown="MoveDown",r.MoveLeft="MoveLeft",r.MoveRight="MoveRight",r.MoveUp="MoveUp",r.Neutral="Neutral",r.Number="Number",r.OData="OData",r.Odbc="Odbc",r.OnlineServicesFilled="OnlineServicesFilled",r.OnlineServicesRegular="OnlineServicesRegular",r.OtherFilled="OtherFilled",r.OtherRegular="OtherRegular",r.Parameter="Parameter",r.Parquet="Parquet",r.Parse="Parse",r.Paste="Paste",r.Pdf="Pdf",r.Pencil="Pencil",r.Percentage="Percentage",r.PivotColumn="PivotColumn",r.Plus="Plus",r.PowerBI="PowerBI",r.PowerBIReport="PowerBIReport",r.PowerPlatformFilled="PowerPlatformFilled",r.PowerPlatformRegular="PowerPlatformRegular",r.PowerQuery="PowerQuery",r.PrimitiveToList="PrimitiveToList",r.PrivacyBuffering="PrivacyBuffering",r.PromoteHeaders="PromoteHeaders",r.Properties="Properties",r.QuerySettings="QuerySettings",r.QuestionMark="QuestionMark",r.Record="Record",r.Reference="Reference",r.Refresh="Refresh",r.RemoveAlternateRows="RemoveAlternateRows",r.RemoveBlankRows="RemoveBlankRows",r.RemoveBottomRows="RemoveBottomRows",r.RemoveColumns="RemoveColumns",r.RemoveDuplicates="RemoveDuplicates",r.RemoveErrors="RemoveErrors",r.RemoveOtherColumns="RemoveOtherColumns",r.RemoveRows="RemoveRows",r.RemoveTopRows="RemoveTopRows",r.Rename="Rename",r.ReplaceErrors="ReplaceErrors",r.ReplaceValues="ReplaceValues",r.Reset="Reset",r.ReverseRows="ReverseRows",r.Rounding="Rounding",r.Salesforce="Salesforce",r.Save="Save",r.Scientific="Scientific",r.Script="Script",r.Sensitivity="Sensitivity",r.Settings="Settings",r.Share="Share",r.SharePoint="SharePoint",r.Sheet="Sheet",r.SheetAccess="SheetAccess",r.SheetCsv="SheetCsv",r.SheetDataflow="SheetDataflow",r.SheetExcel="SheetExcel",r.SheetHtml="SheetHtml",r.SheetJson="SheetJson",r.SheetSql="SheetSql",r.SheetText="SheetText",r.SheetXml="SheetXml",r.SortAscending="SortAscending",r.SortDescending="SortDescending",r.Spark="Spark",r.Sparkle="Sparkle",r.Sparkle_Monocolor="Sparkle_Monocolor",r.SplitColumn="SplitColumn",r.Standard="Standard",r.Statistics="Statistics",r.Success="Success",r.Suggestion="Suggestion",r.Support="Support",r.Table="Table",r.TableSchema="TableSchema",r.Template="Template",r.Text="Text",r.TextFile="TextFile",r.Time="Time",r.ToTable="ToTable",r.Transpose="Transpose",r.Trigonometry="Trigonometry",r.UnknownType="UnknownType",r.Unlink="Unlink",r.UnpivotColumns="UnpivotColumns",r.Vertica="Vertica",r.VerticalLayout="VerticalLayout",r.View="View",r.Visual="Visual",r.Wand="Wand",r.Warning="Warning",r.Web="Web",r.Website="Website",r.WholeNumber="WholeNumber",r.Worksheet="Worksheet"}(Ca||(Ca={})),function(r){r.FullRefresh="FullRefresh",r.IncrementalRefresh="IncrementalRefresh"}(Yt||(Yt={})),function(r){r.Days="Days",r.Months="Months",r.Quarters="Quarters",r.Years="Years"}(si||(si={})),function(r){r.Custom="Custom",r.Standard="Standard",r.System="System"}(Rr||(Rr={})),function(r){r.EvaluateTop1000Rows="EvaluateTop1000Rows",r.EvaluateEntireDataset="EvaluateEntireDataset"}(Si||(Si={})),function(r){r.Action="Action.Type",r.Any="Any.Type",r.Binary="Binary.Type",r.Byte="Byte.Type",r.Character="Character.Type",r.Currency="Currency.Type",r.Date="Date.Type",r.DateTime="DateTime.Type",r.DateTimeZone="DateTimeZone.Type",r.Decimal="Decimal.Type",r.Double="Double.Type",r.Duration="Duration.Type",r.Function="Function.Type",r.Int16="Int16.Type",r.Int32="Int32.Type",r.Int64="Int64.Type",r.Int8="Int8.Type",r.List="List.Type",r.Logical="Logical.Type",r.None="None.Type",r.Null="Null.Type",r.Number="Number.Type",r.Percentage="Percentage.Type",r.Record="Record.Type",r.Single="Single.Type",r.Table="Table.Type",r.Text="Text.Type",r.Time="Time.Type",r.Type="Type.Type"}(Ar||(Ar={})),function(r){r.MultiLine="MultiLine",r.SingleLine="SingleLine"}(Wo||(Wo={})),function(r){r.Always="Always",r.BasedOnProjectSettings="BasedOnProjectSettings",r.Never="Never"}(_a||(_a={})),function(r){r.Collapsed="Collapsed",r.Expanded="Expanded",r.Maximized="Maximized"}($o||($o={})),function(r){r.Host="Host",r.Initialization="Initialization",r.UserInteraction="UserInteraction"}(Qo||(Qo={})),function(r){r.Action="action",r.Any="any",r.AnyNonNull="anynonnull",r.Binary="binary",r.Currency="currency",r.Date="date",r.DateTime="datetime",r.DateTimeZone="datetimezone",r.Duration="duration",r.Exception="exception",r.Function="function",r.List="list",r.Logical="logical",r.None="none",r.Null="null",r.Number="number",r.Percentage="percentage",r.Record="record",r.Table="table",r.Text="text",r.Time="time",r.Type="type",r.WholeNumber="wholenumber"}(fo||(fo={})),function(r){r.Auto="Auto",r.Percent="Percent",r.Pixels="Pixels"}(ya||(ya={})),function(r){r.Cells="Cells",r.Columns="Columns",r.Rows="Rows"}(Qn||(Qn={})),function(r){r.Access="access",r.ActiveDirectory="activeDirectory",r.AdobeAnalytics="adobeAnalytics",r.AnalysisServices="analysisServices",r.AzureAnalysisServices="azureAnalysisServices",r.AzureBlobs="azureBlobs",r.AzureDataLake="azureDataLake",r.AzureHdInsightHdfs="azureHdInsightHdfs",r.AzureSql="azureSql",r.AzureSqlDw="azureSqlDW",r.AzureTables="azureTables",r.Blank="blank",r.Db2="db2",r.Dynamics365="dynamics365",r.EnterData="enterData",r.Excel="excel",r.ExchangeOnline="exchangeOnline",r.FolderContents="folderContents",r.FolderFiles="folderFiles",r.GoogleAnalytics="googleAnalytics",r.Json="json",r.MySql="mySql",r.Odata="odata",r.Odbc="odbc",r.Oracle="oracle",r.Parquet="parquet",r.Pdf="pdf",r.PostgreSql="postgreSql",r.SharepointFolder="sharepointFolder",r.SharepointList="sharepointList",r.SharepointOnlineList="sharepointOnlineList",r.SalesforceObjects="salesforceObjects",r.SalesforceReports="salesforceReports",r.SapBusinessWarehouseAppServer="SapBusinessWarehouseAppServer",r.SapBusinessWarehouseMessageServer="SapBusinessWarehouseMessageServer",r.SapHanaDatabase="SapHanaDatabase",r.Sql="sql",r.Sybase="sybase",r.Teradata="teradata",r.TextCsv="textCsv",r.Web="web",r.WebApi="webApi",r.Xml="xml"}(ba||(ba={})),function(r){r.Extension="extension"}(wa||(wa={})),function(r){r.Failed="Failed",r.Idle="Idle",r.InProgress="InProgress",r.Success="Success"}(Sa||(Sa={})),function(r){r.WaitingToStart="WaitingToStart",r.EvaluatingRelationships="EvaluatingRelationships",r.WaitingForOtherEntities="WaitingForOtherEntities",r.EvaluatingSchema="EvaluatingSchema",r.DeletingEntity="DeletingEntity",r.CreatingEntity="CreatingEntity",r.DeletingExistingData="DeletingExistingData",r.EvaluatingData="EvaluatingData",r.ProvisioningTempStorage="ProvisioningTempStorage",r.UploadingDataToTempStorage="UploadingDataToTempStorage",r.InitializingLoadSession="InitializingLoadSession",r.WaitingForLoadSessionToInitialize="WaitingForLoadSessionToInitialize",r.CreatingDefinitionGroup="CreatingDefinitionGroup",r.CreatingDefinitionGroupDetails="CreatingDefinitionGroupDetails",r.UploadingData="UploadingData",r.GeneratingFieldMapping="GeneratingFieldMapping",r.AutoSequencing="AutoSequencing",r.ExecutingLoad="ExecutingLoad",r.WaitingForLoadToComplete="WaitingForLoadToComplete",r.GeneratingExecutionErrors="GeneratingExecutionErrors",r.Success="Success",r.SignInRequired="SignInRequired",r.DeletingExistingDataFailed="DeletingExistingDataFailed",r.EvaluationFailed="EvaluationFailed",r.CreatingEntityFailed="CreatingEntityFailed",r.DeletingEntityFailed="DeletingEntityFailed",r.RetrievingEntityMetadataFailed="RetrievingEntityMetadataFailed",r.Canceled="Canceled",r.LoadToCdsPartiallySucceeded="LoadToCdsPartiallySucceeded",r.LoadToCdsFailed="LoadToCdsFailed",r.LoadFailedDueToErrorInOtherEntity="LoadFailedDueToErrorInOtherEntity",r.Unknown="Unknown"}(mo||(mo={})),function(r){r.Composition="Composition",r.Conditional="Conditional",r.CountDistinctValues="CountDistinctValues",r.CountValues="CountValues",r.Date_Age="Date_Age",r.Date_CombineWithTime="Date_CombineWithTime",r.Date_Day="Date_Day",r.Date_DayOfWeek="Date_DayOfWeek",r.Date_DayOfWeekName="Date_DayOfWeekName",r.Date_DayOfYear="Date_DayOfYear",r.Date_DaysInMonth="Date_DaysInMonth",r.Date_Earliest="Date_Earliest",r.Date_EndOfDay="Date_EndOfDay",r.Date_EndOfMonth="Date_EndOfMonth",r.Date_EndOfQuarter="Date_EndOfQuarter",r.Date_EndOfWeek="Date_EndOfWeek",r.Date_EndOfYear="Date_EndOfYear",r.Date_From="Date_From",r.Date_Latest="Date_Latest",r.Date_Month="Date_Month",r.Date_MonthName="Date_MonthName",r.Date_QuarterOfYear="Date_QuarterOfYear",r.Date_StartOfDay="Date_StartOfDay",r.Date_StartOfMonth="Date_StartOfMonth",r.Date_StartOfQuarter="Date_StartOfQuarter",r.Date_StartOfWeek="Date_StartOfWeek",r.Date_StartOfYear="Date_StartOfYear",r.Date_SubtractDays="Date_SubtractDays",r.Date_WeekOfMonth="Date_WeekOfMonth",r.Date_WeekOfYear="Date_WeekOfYear",r.Date_Year="Date_Year",r.DateTime_Earliest="DateTime_Earliest",r.DateTime_From="DateTime_From",r.DateTime_Latest="DateTime_Latest",r.DateTime_Subtract="DateTime_Subtract",r.DateTime_SubtractDays="DateTime_SubtractDays",r.DateTimeZone_Earliest="DateTimeZone_Earliest",r.DateTimeZone_From="DateTimeZone_From",r.DateTimeZone_Latest="DateTimeZone_Latest",r.DateTimeZone_Subtract="DateTimeZone_Subtract",r.DateTimeZone_SubtractDays="DateTimeZone_SubtractDays",r.DateTimeZone_ToLocal="DateTimeZone_ToLocal",r.Number_Abs="Number_Abs",r.Number_Acos="Number_Acos",r.Number_Asin="Number_Asin",r.Number_Atan="Number_Atan",r.Number_Average="Number_Average",r.Number_Cos="Number_Cos",r.Number_Cube="Number_Cube",r.Number_Divide="Number_Divide",r.Number_Exp="Number_Exp",r.Number_Factorial="Number_Factorial",r.Number_From="Number_From",r.Number_IntegerDivide="Number_IntegerDivide",r.Number_IsEven="Number_IsEven",r.Number_IsOdd="Number_IsOdd",r.Number_Ln="Number_Ln",r.Number_Log10="Number_Log10",r.Number_Maximum="Number_Maximum",r.Number_Median="Number_Median",r.Number_Minimum="Number_Minimum",r.Number_Modulo="Number_Modulo",r.Number_MultiplyColumnAndConstant="Number_MultiplyColumnAndConstant",r.Number_MultiplyColumns="Number_MultiplyColumns",r.Number_PercentOf="Number_PercentOf",r.Number_Power="Number_Power",r.Number_Range="Number_Range",r.Number_Round="Number_Round",r.Number_RoundDown="Number_RoundDown",r.Number_RoundUp="Number_RoundUp",r.Number_Sign="Number_Sign",r.Number_Sin="Number_Sin",r.Number_Sqrt="Number_Sqrt",r.Number_Square="Number_Square",r.Number_StandardDeviation="Number_StandardDeviation",r.Number_Subtract="Number_Subtract",r.Number_SumColumnAndConstant="Number_SumColumnAndConstant",r.Number_SumColumns="Number_SumColumns",r.Number_Tan="Number_Tan",r.Reference="Reference",r.Text_AfterDelimiter="Text_AfterDelimiter",r.Text_BeforeDelimiter="Text_BeforeDelimiter",r.Text_BetweenDelimiters="Text_BetweenDelimiters",r.Text_Combine="Text_Combine",r.Text_End="Text_End",r.Text_Length="Text_Length",r.Text_Literal="Text_Literal",r.Text_Middle="Text_Middle",r.Text_Reference="Text_Reference",r.Text_Remove="Text_Remove",r.Text_Replace="Text_Replace",r.Text_Select="Text_Select",r.Text_Start="Text_Start",r.Time_Earliest="Time_Earliest",r.Time_EndOfHour="Time_EndOfHour",r.Time_From="Time_From",r.Time_Hour="Time_Hour",r.Time_Latest="Time_Latest",r.Time_Minute="Time_Minute",r.Time_Second="Time_Second",r.Time_StartOfHour="Time_StartOfHour",r.Time_Subtract="Time_Subtract"}(Lr||(Lr={})),function(r){r.UnknownError="UnknownError",r.InvalidConnectionProvider="InvalidConnectionProvider"}(Ma||(Ma={})),function(r){r.Adf="Adf",r.CdsA="CdsA",r.Desktop="Desktop",r.DmtsPowerBi="DmtsPowerBi",r.DmtsSa="DmtsSa",r.None="None",r.PowerApps="PowerApps",r.SelfHosted="SelfHosted"}(Pa||(Pa={})),function(r){r.SqlDw="SqlDw",r.SynapseOnDemand="SynapseOnDemand"}(xa||(xa={})),function(r){r.Error="Error",r.Warning="Warning"}(Nr||(Nr={})),function(r){r[r.sunday=0]="sunday",r[r.monday=1]="monday",r[r.tuesday=2]="tuesday",r[r.wednesday=3]="wednesday",r[r.thursday=4]="thursday",r[r.friday=5]="friday",r[r.saturday=6]="saturday"}(Wi||(Wi={})),function(r){r.Boolean="Boolean",r.DateAndTime="DateAndTime",r.DateOnly="DateOnly",r.Decimal="Decimal",r.Double="Double",r.Integer="Integer",r.Lookup="Lookup",r.Memo="Memo",r.Money="Money",r.String="String"}(Oa||(Oa={})),function(r){r.Resource="Resource",r.Personal="Personal",r.VirtualNetwork="VirtualNetwork"}(Ta||(Ta={})),function(r){r[r.none=0]="none",r[r.fetchDataSourceDetails=1]="fetchDataSourceDetails",r[r.schemaRowsets=2]="schemaRowsets",r[r.mdDataset=4]="mdDataset",r[r.columnOrdinals=8]="columnOrdinals",r[r.statefulSessions=16]="statefulSessions",r[r.directQuerySingleSignOn_Kerberos=32]="directQuerySingleSignOn_Kerberos",r[r.mashupCustomConnectors=64]="mashupCustomConnectors",r[r.mashupCustomConnectorsForODG=128]="mashupCustomConnectorsForODG",r[r.sapHanaSSOManagedProvider=256]="sapHanaSSOManagedProvider",r[r.filteringMashupExtensionsOnODG=512]="filteringMashupExtensionsOnODG",r[r.certifiedConnectors=1024]="certifiedConnectors",r[r.mashupAzureConnectorsCachingPool=2048]="mashupAzureConnectorsCachingPool",r[r.skipTestConnection=4096]="skipTestConnection",r[r.encryptedConnectionOptionOverride=8192]="encryptedConnectionOptionOverride",r[r.mashupADONetProviderSSO=16384]="mashupADONetProviderSSO",r[r.authTypeSAS=32768]="authTypeSAS",r[r.powerQueryOnlineCachingPool=65536]="powerQueryOnlineCachingPool",r[r.ssoTestConnection=131072]="ssoTestConnection",r[r.mashupIgnorePreviouslyCachedData=262144]="mashupIgnorePreviouslyCachedData",r[r.mashupQueryStatus=524288]="mashupQueryStatus",r[r.multipleResults=1048576]="multipleResults",r[r.renewDiagnosticsStorageAccess=2097152]="renewDiagnosticsStorageAccess",r[r.oAuthResource=4194304]="oAuthResource",r[r.statefulDbConnection=8388608]="statefulDbConnection",r[r.discoverDatasourcesUsingMashupDSR=16777216]="discoverDatasourcesUsingMashupDSR"}(Ea||(Ea={})),function(r){r.Critical="Critical",r.Error="Error",r.Warning="Warning",r.Informational="Informational",r.Verbose="Verbose"}(vo||(vo={})),function(r){r[r.connectionNotFound=0]="connectionNotFound",r[r.failedToRefreshConnection=1]="failedToRefreshConnection",r[r.unauthorizedConnection=2]="unauthorizedConnection"}(Co||(Co={})),function(r){r.DifferentUser="DifferentUser",r.NoMatchingConnection="NoMatchingConnection",r.NonOAuthConnection="NonOAuthConnection ",r.NoToken="NoToken"}(Jo||(Jo={})),function(r){r.Active="ActivePowerAppsEnvironment",r.HardDeleted="HardDeletedPowerAppsEnvironment",r.SoftDeleted="SoftDeletedPowerAppsEnvironment",r.Unknown="UnknownPowerAppsEnvironment"}(Xo||(Xo={})),function(r){r.MappingEditorProperties="MappingEditorProperties"}(qo||(qo={})),function(r){r[r.day=0]="day",r[r.month=1]="month",r[r.quarter=2]="quarter",r[r.year=3]="year"}(Zo||(Zo={})),function(r){r.Minutes="Minutes",r.Hours="Hours",r.Days="Days",r.Weeks="Weeks",r.Months="Months"}(Yo||(Yo={})),function(r){r[r.uploadFileMalformedMultipartContent=1]="uploadFileMalformedMultipartContent",r[r.uploadFileUnsupportedFileExtension=2]="uploadFileUnsupportedFileExtension",r[r.oAuthStartLoginFailed=3]="oAuthStartLoginFailed",r[r.oAuthFinishLoginFailed=4]="oAuthFinishLoginFailed",r[r.normalizeResourceFailed=8]="normalizeResourceFailed",r[r.editVersionMismatch=9]="editVersionMismatch",r[r.updateGatewayVersion=10]="updateGatewayVersion",r[r.mashupTooLong=11]="mashupTooLong",r[r.gatewayBindingMultipleMatchingGatewayError=12]="gatewayBindingMultipleMatchingGatewayError",r[r.gatewayBindingNoMatchingDataSourceError=13]="gatewayBindingNoMatchingDataSourceError",r[r.gatewayBindingNoMatchingGatewayError=14]="gatewayBindingNoMatchingGatewayError"}(Ko||(Ko={})),function(r){r.NoTextExampleFound="NoTextExampleFound",r.NoTextProgramFound="NoTextProgramFound",r.NoTextProgramFoundBeforeCancellation="NoTextProgramFoundBeforeCancellation",r.NoTextProgramFoundBeforeTimeout="NoTextProgramFoundBeforeTimeout"}(ka||(ka={})),function(r){r.Successful="Successful",r.Failed="Failed",r.SessionExpired="SessionExpired"}(er||(er={})),function(r){r.AM="AM",r.PM="PM"}(tr||(tr={})),function(r){r[r.anonymous=1]="anonymous",r[r.basic=2]="basic",r[r.oAuth2=3]="oAuth2",r[r.windows=4]="windows",r[r.key=5]="key",r[r.sas=6]="sas",r[r.servicePrincipal=7]="servicePrincipal"}(nr||(nr={})),function(r){r.Access="access",r.ActiveDirectory="activeDirectory",r.AdobeAnalytics="adobeAnalytics",r.AnalysisServices="analysisServices",r.AzureAnalysisServices="azureAnalysisServices",r.AzureBlobs="azureBlobs",r.AzureDataLake="azureDataLake",r.AzureHdInsightHdfs="azureHdInsightHdfs",r.AzureSql="azureSql",r.AzureSqlDw="azureSqlDW",r.AzureTables="azureTables",r.Blank="blank",r.Db2="db2",r.Dynamics365="dynamics365",r.EnterData="enterData",r.Excel="excel",r.ExchangeOnline="exchangeOnline",r.FolderContents="folderContents",r.FolderFiles="folderFiles",r.GoogleAnalytics="googleAnalytics",r.Json="json",r.MySql="mySql",r.Odata="odata",r.Odbc="odbc",r.Oracle="oracle",r.Parquet="parquet",r.Pdf="pdf",r.PostgreSql="postgreSql",r.SharepointFolder="sharepointFolder",r.SharepointList="sharepointList",r.SharepointOnlineList="sharepointOnlineList",r.SalesforceObjects="salesforceObjects",r.SalesforceReports="salesforceReports",r.SapBusinessWarehouseAppServer="SapBusinessWarehouseAppServer",r.SapBusinessWarehouseMessageServer="SapBusinessWarehouseMessageServer",r.SapHanaDatabase="SapHanaDatabase",r.Sql="sql",r.Sybase="sybase",r.Teradata="teradata",r.TextCsv="textCsv",r.Web="web",r.WebApi="webApi",r.Xml="xml"}(zr||(zr={})),function(r){r.Automatic="Automatic",r.Explicit="Explicit",r.Fixed="Fixed"}(s||(s={})),function(r){r.Count="Count",r.ErrorCount="ErrorCount",r.NullCount="NullCount",r.DistinctCount="DistinctCount",r.UniqueCount="UniqueCount",r.Min="Min",r.Max="Max",r.ValueDistribution="ValueDistribution",r.Average="Average",r.EmptyStringCount="EmptyStringCount",r.TextLengthDistribution="TextLengthDistribution",r.NaNCount="NaNCount",r.ZeroCount="ZeroCount",r.EvenCount="EvenCount",r.OddCount="OddCount",r.StandardDeviation="StandardDeviation",r.SignDistribution="SignDistribution",r.ParityDistribution="ParityDistribution",r.TrueCount="TrueCount",r.FalseCount="FalseCount",r.YearDistribution="YearDistribution",r.MonthDistribution="MonthDistribution",r.DayDistribution="DayDistribution",r.WeekOfYearDistribution="WeekOfYearDistribution",r.DayOfWeekDistribution="DayOfWeekDistribution",r.AmPmDistribution="AmPmDistribution",r.HourDistribution="HourDistribution"}(g||(g={})),function(r){r.AccessPremiumConnectionNotAllowed="AccessPremiumConnectionNotAllowed",r.AdfConnectionEvaluationError="AdfConnectionEvaluationError",r.CdsaFeatureNotAvailableError="CdsaFeatureNotAvailableError",r.ConnectionApiPolicyViolation="ConnectionApiPolicyViolation",r.ConnectionCouldNotBeCreated="ConnectionCouldNotBeCreated",r.ConnectionCouldNotBeUpdated="ConnectionCouldNotBeUpdated",r.ConnectionKindNotSupported="ConnectionKindNotSupported",r.ConnectionNotFound="ConnectionNotFound",r.ConnectionShareNotAllowedInEnvironment="ConnectionShareNotAllowedInEnvironment",r.DataAccessError="DataAccessError",r.DataflowDatasourceIsReadOnly="DataflowDatasourceIsReadOnly",r.DataSourceUnreachableOrGatewayRequired="DataSourceUnreachableOrGatewayRequired",r.DuplicateDataSourceNameError="DuplicateDataSourceNameError",r.EncryptionNotSupportedForKindAndGateway="EncryptionNotSupportedForKindAndGateway",r.ExceededLimit="ExceededLimit",r.GatewayDetailsNotFound="GatewayDetailsNotFound",r.GatewayNotAuthorized="GatewayNotAuthorized",r.GatewayUnreachable="GatewayUnreachable",r.GatewayUnsupportedByLicense="GatewayUnsupportedByLicense",r.InvalidCredentials="InvalidCredentials",r.InvalidPath="InvalidPath",r.OAuthLoginFailed="OAuthLoginFailed",r.OboSignInError="OboSignInError",r.OboTokenAcquisitionFailed="OboTokenAcquisitionFailed",r.TooManyConnections="TooManyConnections",r.UnknownDmtsError="UnknownDmtsError",r.UnknownError="UnknownError",r.UnknownGatewayError="UnknownGatewayError",r.Unsupported="Unsupported"}(v||(v={})),function(r){r.AddStep="AddStep",r.CreateQuery="CreateQuery",r.DeleteQuery="DeleteQuery",r.ExplainQuery="ExplainQuery",r.ExplainStep="ExplainStep"}(C||(C={})),function(r){r.CouldNotExplainQuery="CouldNotExplainQuery",r.CouldNotGenerateQuery="CouldNotGenerateQuery",r.CouldNotGenerateStep="CouldNotGenerateStep",r.DataItemsMissing="DataItemsMissing",r.LanguageNotSupported="LanguageNotSupported",r.OutOfScope="OutOfScope",r.QueryNotFound="QueryNotFound",r.SkillNotFound="SkillNotFound",r.TableNotFound="TableNotFound",r.Unknown="Unknown"}(m||(m={})),function(r){r.Action="Action",r.Error="Error"}(w||(w={})),function(r){r.Automatic="Automatic",r.Explicit="Explicit",r.Fixed="Fixed"}(I||(I={})),function(r){r.Singleton="Singleton",r.Database="Database",r.Uri="Uri",r.Custom="Custom"}(G||(G={})),function(r){r.BuiltIn="BuiltIn",r.Extension="Extension"}(R||(R={})),function(r){r.JsonDsr="JsonDsr",r.MScript="MScript",r.QueryModel="QueryModel"}(F||(F={})),function(r){r.DSR="DSR",r.Reference="Reference",r.Script="Script"}(k||(k={})),function(r){r.Cluster="Cluster",r.Database="Database",r.Lakehouse="Lakehouse",r.Object="Object",r.Schema="Schema",r.Server="Server",r.Table="Table",r.Warehouse="Warehouse",r.Workspace="Workspace"}(Q||(Q={})),function(r){r.Constant="Constant",r.Duplicate="Duplicate",r.Empty="Empty",r.Index="Index"}(J||(J={})),function(r){r[r.false=0]="false",r[r.true=1]="true",r[r.notApplicable=2]="notApplicable",r[r.existingConnection=3]="existingConnection"}(ye||(ye={})),function(r){r.ApiHubTokenExchangeFailed="ApiHubTokenExchangeFailed",r.Cancelled="Cancelled",r.DuplicateEvaluationId="DuplicateEvaluationId",r.ErrorGettingPowerBIPrivateLinkConfig="ErrorGettingPowerBIPrivateLinkConfig",r.EvaluationAgentNotFound="EvaluationAgentNotFound",r.EvaluationQuotaReached="EvaluationQuotaReached",r.ExternalServiceError="ExternalServiceError",r.GatewayDetailsNotFound="GatewayDetailsNotFound",r.GatewayNeeded="GatewayNeeded",r.GatewayNotAuthorized="GatewayNotAuthorized",r.GatewayNotFound="GatewayNotFound",r.GatewayUnknownError="GatewayUnknownError",r.GatewayUnreachable="GatewayUnreachable",r.GatewayUpgradeRequired="GatewayUpgradeRequired",r.GatewayUserError="GatewayUserError",r.MashupEntityNotFound="MashupEntityNotFound",r.MaxConcurrentEvaluationsReached="MaxConcurrentEvaluationsReached",r.NetworkAccessDenied="NetworkAccessDenied",r.NoPowerBiClusterForTenant="NoPowerBiClusterForTenant",r.ParameterNotFound="ParameterNotFound",r.PowerAppsEnvironmentNotFound="PowerAppsEnvironmentNotFound",r.QueryNameAndQueryScriptBothSpecified="QueryNameAndQueryScriptBothSpecified",r.QueryNameAndQueryScriptNotSpecified="QueryNameAndQueryScriptNotSpecified",r.QueryNotFound="QueryNotFound",r.StepNotFound="StepNotFound",r.UnableToContactBackend="UnableToContactBackend",r.Unknown="Unknown",r.UnsupportedKind="UnsupportedKind",r.ValueTooComplex="ValueTooComplex"}(ut||(ut={})),function(r){r.Path="Path",r.QueryScript="QueryScript"}(we||(we={})),function(r){r.AutoFilterColumnValues="AutoFilterColumnValues",r.BinaryMetadata="BinaryMetadata",r.ConnectorRows="ConnectorRows",r.ConnectorSchema="ConnectorSchema",r.CubeAllowedValues="CubeAllowedValues",r.CubeDisplayFolders="CubeDisplayFolders",r.CubeParameters="CubeParameters",r.DataSourceQuery="DataSourceQuery",r.DetailsPreview="DetailsPreview",r.DetectTableHeaderAndColumnTypes="DetectTableHeaderAndColumnTypes",r.DsrDetailsFetching="DsrDetailsFetching",r.ExcelTableInferenceGetInferredTables="ExcelTableInferenceGetInferredTables",r.ExpandColumnNames="ExpandColumnNames",r.FunctionBrowser="FunctionBrowser",r.JsonTableInferenceGetJsonText="JsonTableInferenceGetJsonText",r.LoadToCdsCreateEntitiesRelationships="LoadToCdsCreateEntitiesRelationships",r.LoadToCdsRelationships="LoadToCdsRelationships",r.LoadToCdsSchema="LoadToCdsSchema",r.MappingEditorQueryProfiling="MappingEditorQueryProfiling",r.MappingEditorSchemaResult="MappingEditorSchemaResult",r.MappingEditorTypeMetadata="MappingEditorTypeMetadata",r.MashupLoad="MashupLoad",r.MergeMatchAnalysis="MergeMatchAnalysis",r.MergeQueriesPreview="MergeQueriesPreview",r.MergeQueriesSuggestionsLeftCandidatePreview="MergeQueriesSuggestionsLeftCandidatePreview",r.MergeQueriesSuggestionsRightCandidatePreview="MergeQueriesSuggestionsRightCandidatePreview",r.NaturalLanguageValidation="NaturalLanguageValidation",r.NavigatorCubeAllowedValues="NavigatorCubeAllowedValues",r.NavigatorCubeParameters="NavigatorCubeParameters",r.NavigatorCubePreview="NavigatorCubePreview",r.NavigatorDiscoverRelatedTables="NavigatorDiscoverRelatedTables",r.NavigatorPreview="NavigatorPreview",r.NavigatorTemporaryQueryForIndirectionNode="NavigatorTemporaryQueryForIndirectionNode",r.Preview="Preview",r.QueryAnalysis="QueryAnalysis",r.QueryPlan="QueryPlan",r.QuerySanitizer="QuerySanitizer",r.QuerySanitizerAnalysis="QuerySanitizerAnalysis",r.QuerySanitizerQueryAnalysis="QuerySanitizerQueryAnalysis",r.QueryScriptPreview="QueryScriptPreview",r.SemanticEntitySets="SemanticEntitySets",r.SemanticDataGetData="SemanticDataGetData",r.SemanticDataList="SemanticDataList",r.SemanticDataSearchInDataflow="SemanticDataSearchInDataflow",r.SplitColumnInferMultiplePositions="SplitColumnInferMultiplePositions",r.SplitColumnNumberOfColumns="SplitColumnNumberOfColumns",r.StepAnalysis="StepAnalysis",r.TableProfiler="TableProfiler",r.TextByExampleGetText="TextByExampleGetText",r.WebByExampleExecuteSelectors="WebByExampleExecuteSelectors",r.WebByExampleGetHtml="WebByExampleGetHtml"}(q||(q={})),function(r){r.None="None",r.Any="Any",r.Access="Access",r.Excel="Excel",r.Json="Json",r.TextCsv="TextCsv",r.Pdf="Pdf",r.Xml="Xml"}(Se||(Se={})),function(r){r.List="List"}(se||(se={})),function(r){r.MenuItem="MenuItem",r.Separator="Separator"}(he||(he={})),function(r){r.Max="Max",r.Mean="Mean",r.Min="Min",r.Mode="Mode",r.RoundedMean="RoundedMean"}(st||(st={})),function(r){r.Cancelled="Cancelled",r.CombineFiles="CombineFiles",r.CsvTextSettings="CsvTextSettings",r.DataDiscovery="DataDiscovery",r.DataSources="DataSources",r.DataSourceSettings="DataSourceSettings",r.FolderPreview="FolderPreview",r.IncrementalRefreshSettings="IncrementalRefreshSettings",r.Loading="Loading",r.MappingEditor="MappingEditor",r.Navigator="Navigator",r.QueryEditor="QueryEditor",r.QuickCreate="QuickCreate",r.RecentDataPreview="RecentDataPreview",r.RefreshSettings="RefreshSettings",r.TemplateCredentials="TemplateCredentials",r.TemplateParameters="TemplateParameters",r.TextByExample="TextByExample"}(Ct||(Ct={})),function(r){r.Database="Database",r.File="File"}(yn||(yn={})),function(r){r.AlwaysWhenInferringAllColumnTypes="AlwaysWhenInferringAllColumnTypes",r.BasedOnMetadata="BasedOnMetadata",r.Never="Never"}(an||(an={})),function(r){r.Always="Always",r.Never="Never",r.HasNewLoadableQueries="HasNewLoadableQueries",r.NumberOfQueries="NumberOfQueries"}(Hr||(Hr={})),function(r){r.Equals="Equals",r.GreaterThan="GreaterThan",r.GreaterThanOrEqual="GreaterThanOrEqual",r.LessThan="LessThan",r.LessThanOrEqual="LessThanOrEqual"}(Da||(Da={})),function(r){r.Adf="Adf",r.Athena="Athena",r.CdsA="CdsA",r.CdsLite="CdsLite",r.CdsT="CdsT",r.CdsV1="CdsAdHoc",r.CustomerInsights="CustomerInsights",r.CustomerInsightsPPDF="CustomerInsightsPPDF",r.D365TalentInsights="D365TalentInsights",r.DataIntegration="DataIntegration",r.DesktopBootstrap="DesktopBootstrap",r.DesktopUITester="DesktopUITester",r.DmtsPowerBiExperimental="DmtsPowerBiExperimental",r.DmtsSaExperimental="DmtsSaExperimental",r.ExcelDesktop="ExcelDesktop",r.ExcelOnline="ExcelOnline",r.ExcelOnlineDmtsPowerBi="ExcelOnlineDmtsPowerBi",r.Experimental="Experimental",r.Flow="Flow",r.IAPDataflowTemplateReferenceApp="IAPDataflowTemplateReferenceApp",r.IntelligentOrderManagement="IntelligentOrderManagement",r.InternalPortal="InternalPortal",r.KustoViewDesigner="KustoViewDesigner",r.MashupEditorBootstrap="MashupEditorBootstrap",r.PowerAppsTeams="PowerAppsTeams",r.PowerBIDataMart="PowerBIDataMart",r.PowerBIModeling="PowerBIModeling",r.PowerBIModelingDmtsPowerBi="PowerBIModelingDmtsPowerBi",r.PowerBIPaginatedReports="PowerBIPaginatedReports",r.PowerBIPPDF="PowerBIPPDF",r.PowerBIReportView="PowerBIReportView",r.PowerPlatformDataflowAdlsGen2="PowerPlatformDataflowAdlsGen2",r.PowerPlatformDataflowsBootstrap="PowerPlatformDataflowsBootstrap",r.PowerPlatformExperimental="PowerPlatformExperimental",r.PowerQueryDesktop="PowerQueryDesktop",r.ProcessAdvisor="ProcessAdvisor",r.SupplyChainVisibility="SupplyChainVisibility",r.SustainabilityCloud="SustainabilityCloud",r.Synapse="Synapse",r.TridentDataflow="TridentDataflow",r.TridentDataPipeline="TridentDataPipeline",r.TridentDataverseOneLake="TridentDataverseOneLake",r.TridentDataWarehouse="TridentDataWarehouse",r.TridentEventStream="TridentEventStream",r.TridentKusto="TridentKusto",r.TridentLakehouse="TridentLakehouse",r.TridentLakeWarehouse="TridentLakeWarehouse",r.TridentMountedDataWarehouse="TridentMountedDataWarehouse",r.TridentOneLake="TridentOneLake",r.TridentReplicator="TridentReplicator",r.TridentSynapseLink="TridentSynapseLink"}(El||(El={})),function(r){r.Boolean="Boolean"}(Ps||(Ps={})),function(r){r.NaN="NaN",r.NegativeInfinity="NegativeInfinity",r.PositiveInfinity="PositiveInfinity",r.FormattedNumber="FormattedNumber",r.Number="Number"}(kl||(kl={})),function(r){r.Access="Access",r.ActiveDirectory="ActiveDirectory",r.AdoDotNet="AdoDotNet",r.AdobeAnalytics="AdobeAnalytics",r.AnalysisServices="AnalysisServices",r.AzureBlobs="AzureBlobs",r.AzureDataLakeStorage="AzureDataLakeStorage",r.AzureTables="AzureTables",r.Cdpa="CDPA",r.CurrentWorkbook="CurrentWorkbook",r.DB2="DB2",r.Environment="Environment",r.Essbase="Essbase",r.Exchange="Exchange",r.File="File",r.Folder="Folder",r.Ftp="Ftp",r.GoogleAnalytics="GoogleAnalytics",r.HDInsight="HDInsight",r.Hdfs="Hdfs",r.Informix="Informix",r.MQ="MQ",r.MicrosoftInformationProtection="MicrosoftInformationProtection",r.MySql="MySql",r.OData="OData",r.Odbc="Odbc",r.OleDb="OleDb",r.Oracle="Oracle",r.PostgreSQL="PostgreSQL",r.PowerBIDataflow="PowerBI",r.Python="Python",r.R="R",r.Salesforce="Salesforce",r.SapBusinessWarehouse="SapBusinessWarehouse",r.SapHana="SapHana",r.SharePoint="SharePoint",r.Spark="Spark",r.Sql="SQL",r.Staging="Staging",r.Sybase="Sybase",r.Teradata="Teradata",r.Web="Web"}(Dl||(Dl={})),function(r){r.TemplateMetadata="Metadata.json",r.MashupDocument="MashupDocument.pq",r.MashupMetadata="MashupMetadata.json"}(Il||(Il={})),function(r){r.GroupNestingLimitReached="GroupNestingLimitReached",r.NullMashupXml="NullMashupXml",r.Unknown="Unknown"}(Fl||(Fl={})),function(r){r.CompletedSuccessfully="CompletedSuccessfully",r.CompletedWithExpectedError="CompletedWithExpectedError",r.CompletedWithUnexpectedError="CompletedWithUnexpectedError",r.Started="Started"}(xs||(xs={})),function(r){r.Above="Above",r.Below="Below"}(ci||(ci={})),function(r){r.ErrorInvokingOpenAiApi="ErrorInvokingOpenAiApi",r.NoProgramFound="NoProgramFound",r.OpenAiApiKeyNotProvided="OpenAiApiKeyNotProvided",r.RequestCanceled="RequestCanceled"}(_o||(_o={})),function(r){r.Ascii="Ascii",r.Utf8="Utf8",r.Utf16="Utf16",r.Windows="Windows"}(Gl||(Gl={})),function(r){r.Excel="Excel",r.Json="Json",r.Parquet="Parquet",r.Text="Text"}(Os||(Os={})),function(r){r.Colon="Colon",r.Comma="Comma",r.None="None",r.Semicolon="Semicolon",r.Space="Space",r.Tab="Tab"}(Ts||(Ts={})),function(r){r.Even="Even",r.Odd="Odd"}(Es||(Es={})),function(r){r.None="None",r.Private="Private",r.Organizational="Organizational",r.Public="Public"}(Ia||(Ia={})),function(r){r.ChangeModes="ChangeModes"}(Fa||(Fa={})),function(r){r.QueryNeedsToFold="QueryNeedsToFold"}(Ga||(Ga={})),function(r){r.AzureBlob="AzureBlob",r.Database="Database"}($i||($i={})),function(r){r.DynamicPlanFolded="DynamicPlanFolded",r.DynamicPlanMightFold="DynamicPlanMightFold",r.DynamicPlanNotFolded="DynamicPlanNotFolded",r.DynamicPlanOpaque="DynamicPlanOpaque",r.ErrorRetrievingPlan="ErrorRetrievingPlan",r.FoldedQueryNotImplemented="FoldedQueryNotImplemented",r.FoldedQueryNull="FoldedQueryNull",r.FoldedWithQuery="FoldedWithQuery",r.NotFolded="NotFolded",r.NotFoldedPrivacyBuffering="NotFoldedPrivacyBuffering",r.NotTable="NotTable",r.OpaqueConstant="OpaqueConstant",r.UnexpectedPlanKind="UnexpectedPlanKind"}(ir||(ir={})),function(r){r.ActiveDirectory="ActiveDirectory",r.AdobeAnalytics="AdobeAnalytics",r.AmazonRedshift="AmazonRedshift",r.AnalysisServices="AnalysisServices",r.AzureAnalysisServices="AzureAnalysisServices",r.AzureBlobs="AzureBlobs",r.AzureDataExplorer="AzureDataExplorer",r.AzureDataLakeStorage="AzureDataLakeStorage",r.AzureTables="AzureTables",r.AIFunctions="AIFunctions",r.AIInsights="AIInsights",r.AzureMLFunctions="AzureMLFunctions",r.AIInsightsInProc="AIInsightsInProc",r.Cds="Cds",r.CommonDataService="CommonDataService",r.DataLake="DataLake",r.Dataverse="Dataverse",r.DB2="DB2",r.ElasticSearch="ElasticSearch",r.Exchange="Exchange",r.Fhir="Fhir",r.File="File",r.Folder="Folder",r.GoogleAnalytics="GoogleAnalytics",r.GoogleBigQuery="GoogleBigQuery",r.HDInsight="HDInsight",r.Impala="Impala",r.Kusto="Kusto",r.Lakehouse="Lakehouse",r.MySql="MySql",r.OData="OData",r.Odbc="Odbc",r.Oracle="Oracle",r.OracleERP="OracleERP",r.PostgreSQL="PostgreSQL",r.PowerBI="PowerBI",r.PowerBIDatamarts="PowerBIDatamarts",r.PowerPlatformDataflows="PowerPlatformDataflows",r.PQGenericInvokeTestExtension="PQGenericInvokeTestExtension",r.Salesforce="Salesforce",r.SapBusinessWarehouse="SapBusinessWarehouse",r.SAPERP="SAPERP",r.SapHana="SapHana",r.SharePoint="SharePoint",r.Snowflake="Snowflake",r.Spark="Spark",r.SQL="SQL",r.Sybase="Sybase",r.Teradata="Teradata",r.Vertica="Vertica",r.Warehouse="Warehouse",r.Web="Web"}(or||(or={})),function(r){r.CompilationError="CompilationError",r.InvalidQueryName="InvalidQueryName",r.ParsingError="ParsingError",r.Success="Success",r.UnexpectedDocumentKind="UnexpectedDocumentKind"}(Va||(Va={})),function(r){r.Failure="Failure",r.Success="Success"}(Qi||(Qi={})),function(r){r[r.endpointNotAvailableInRegion=0]="endpointNotAvailableInRegion",r[r.httpError=1]="httpError",r[r.invalidInput=2]="invalidInput",r[r.maxRetriesReached=3]="maxRetriesReached",r[r.modelError=4]="modelError"}(Ji||(Ji={})),function(r){r.Error="Error",r.Ok="Ok"}(Vl||(Vl={})),function(r){r.Default="Default",r.FastCopy="FastCopy"}(Rl||(Rl={})),function(r){r.ConnectionsAuthorizationFailed="ConnectionsAuthorizationFailed",r.DuplicateQueryId="DuplicateQueryId",r.DuplicateQueryName="DuplicateQueryName",r.DuplicateStepName="DuplicateStepName",r.InvalidQueryName="InvalidQueryName",r.MashupDocumentNotASectionDocument="MashupDocumentNotASectionDocument",r.ParsingError="ParsingError",r.UnexpectedQueryIdFormat="UnexpectedQueryIdFormat"}(Al||(Al={})),function(r){r.Custom="Custom",r.DropColumn="DropColumn",r.DropBlankRows="DropBlankRows",r.DropDuplicates="DropDuplicates",r.FillColumn="FillColumn",r.SplitColumn="SplitColumn",r.UnpivotColumns="UnpivotColumns",r.UnpivotOtherColumns="UnpivotOtherColumns"}(ks||(ks={})),function(r){r.Column="Column",r.ColumnType="ColumnType",r.Count="Count",r.ErrorCount="ErrorCount",r.NullCount="NullCount",r.DistinctCount="DistinctCount",r.UniqueCount="UniqueCount",r.Min="Min",r.Max="Max",r.ValueDistribution="ValueDistribution",r.Average="Average",r.EmptyStringCount="EmptyStringCount",r.TextLengthDistribution="TextLengthDistribution",r.NaNCount="NaNCount",r.ZeroCount="ZeroCount",r.EvenCount="EvenCount",r.OddCount="OddCount",r.StandardDeviation="StandardDeviation",r.SignDistribution="SignDistribution",r.ParityDistribution="ParityDistribution",r.TrueCount="TrueCount",r.FalseCount="FalseCount",r.YearDistribution="YearDistribution",r.MonthDistribution="MonthDistribution",r.DayDistribution="DayDistribution",r.WeekOfYearDistribution="WeekOfYearDistribution",r.DayOfWeekDistribution="DayOfWeekDistribution",r.AmPmDistribution="AmPmDistribution",r.HourDistribution="HourDistribution"}(Ds||(Ds={})),function(r){r.AppendRows="AppendRows",r.ReplaceRows="ReplaceRows",r.UpsertRows="UpsertRows"}(Is||(Is={})),function(r){r.SelectRows="SelectRows",r.Sort="Sort",r.SelectColumns="SelectColumns",r.RenameColumns="RenameColumns",r.AddColumn="AddColumn",r.ReplaceColumns="ReplaceColumns",r.ReplaceRows="ReplaceRows",r.AddRows="AddRows",r.SplitColumn="SplitColumn",r.ReplaceTable="ReplaceTable"}(Fs||(Fs={})),function(r){r.InvocationPattern="InvocationPattern",r.Script="Script"}(Gs||(Gs={})),function(r){r.DataSourceTag="DataSourceTag",r.QueryEditorMessageBar="QueryEditorMessageBar",r.QuickCreateForm="QuickCreateForm",r.WebByExampleForm="WebByExampleForm"}(Vs||(Vs={})),function(r){r.Append="Append",r.Replace="Replace"}(Rs||(Rs={})),function(r){r.CompilationError="CompilationError",r.ParsingError="ParsingError",r.Success="Success",r.UnexpectedDocumentKind="UnexpectedDocumentKind"}(As||(As={})),function(r){r.Link="Link",r.Text="Text"}(Ls||(Ls={}))},69903:function(ht,wt,T){"use strict";T.d(wt,{p:function(){return Ye}});var S=T(37419),M=T(47875),e=T(96721),U={leading:!0,trailing:!1};function Ye(qe,Te,V){return void 0===Te&&(Te=e.P),void 0===V&&(V=U),function(be){return be.lift(new je(qe,Te,V.leading,V.trailing))}}var je=function(){function qe(V,be,Je,pe){this.duration=V,this.scheduler=be,this.leading=Je,this.trailing=pe}return qe.prototype.call=function(be,Je){return Je.subscribe(new Ie(be,this.duration,this.scheduler,this.leading,this.trailing))},qe}(),Ie=function(qe){function Te(be,Je,pe,Le,Be){var Ue;return(Ue=qe.call(this,be)||this).duration=Je,Ue.scheduler=pe,Ue.leading=Le,Ue.trailing=Be,Ue._hasTrailingValue=!1,Ue._trailingValue=null,Ue}(0,S.Z)(Te,qe);var V=Te.prototype;return V._next=function(Je){this.throttled?this.trailing&&(this._trailingValue=Je,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(j,this.duration,{subscriber:this})),this.leading?this.destination.next(Je):this.trailing&&(this._trailingValue=Je,this._hasTrailingValue=!0))},V._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},V.clearThrottle=function(){var Je=this.throttled;Je&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),Je.unsubscribe(),this.remove(Je),this.throttled=null)},Te}(M.L);function j(qe){qe.subscriber.clearThrottle()}},72330:function(ht,wt,T){"use strict";T.r(wt),T.d(wt,{GoalsUIModule:function(){return Um}});var S=T(81337),M=T(62458),e=T(50423),U=T(77476),Ee=T(36858),Fe=T(223),Pe=function(n){return{userEmail:n}};function Ye(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275element(1,"user-details-host",4),e.\u0275\u0275elementEnd()),2&o){var t=n.$implicit,i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("details",e.\u0275\u0275pureFunction1(4,Pe,t))("photoSize",i.photoSize)("showUserInfo",!1)("showTooltip",!0)}}function je(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",5)(1,"div",6),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&o){var t=e.\u0275\u0275nextContext(),i=e.\u0275\u0275reference(5);e.\u0275\u0275styleProp("width",t.photoSize,"px")("height",t.photoSize,"px"),e.\u0275\u0275property("pbiTooltip",i)("pbiTooltipCaretSize","small")("pbiTooltipPosition","below"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" +",t.emails.length-t.numUsersToShow," ")}}function Ie(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",9),e.\u0275\u0275listener("click",function(a){return a.stopPropagation()}),e.\u0275\u0275element(1,"user-details-host",10),e.\u0275\u0275elementEnd()),2&o){var t=n.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("details",e.\u0275\u0275pureFunction1(4,Pe,t))("showUserInfo",!0)("showOneLine",!1)("showTooltip",!1)}}function j(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",7),e.\u0275\u0275template(1,Ie,2,6,"div",8),e.\u0275\u0275pipe(2,"slice"),e.\u0275\u0275elementEnd()),2&o){var t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind2(2,1,t.emails,t.numUsersToShow))}}var qe=function(){function o(){this.emails=[],this.numAvatarsToShow=5,this.avatarSize="medium",this.rowStyle="spread",this.AvatarSizeMap={smallest:{photoSize:16,spreadSpacing:8,stackOverlap:2,stackOutline:2},small:{photoSize:20,spreadSpacing:10,stackOverlap:2,stackOutline:2},medium:{photoSize:24,spreadSpacing:10,stackOverlap:4,stackOutline:2}}}return o.prototype.ngOnInit=function(){this.setSize()},o.prototype.ngOnChanges=function(n){(n.emails||n.numAvatarsToShow)&&this.setUserCount(),(n.avatarSize||n.rowStyle)&&this.setSize()},o.prototype.setUserCount=function(){this.numUsersToShow=this.emails.length>this.numAvatarsToShow?this.numAvatarsToShow-1:this.numAvatarsToShow},o.prototype.setSize=function(){var n=this.AvatarSizeMap[this.avatarSize];M.fF.assertValue(n,"Invalid size ".concat(this.avatarSize," for AvatarRow.")),this.photoSize=n.photoSize;var t=0,i=0,a=0;"spread"===this.rowStyle?a=n.spreadSpacing:"stack"===this.rowStyle?(t=n.stackOutline,i=-n.stackOutline,a=-n.stackOutline-n.stackOverlap):M.fF.assertFail("Invalid style ".concat(this.rowStyle," for AvatarRow.")),this.styleVariables={"--avatar-left-margin":i+"px","--avatar-right-margin":a+"px","--avatar-outline":t+"px"}},o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["avatar-row"]],inputs:{emails:"emails",numAvatarsToShow:"numAvatarsToShow",avatarSize:"avatarSize",rowStyle:"rowStyle"},features:[e.\u0275\u0275NgOnChangesFeature],decls:6,vars:8,consts:[[1,"avatar-row-container"],[4,"ngFor","ngForOf"],["class","plus-number-container",3,"width","height","pbiTooltip","pbiTooltipCaretSize","pbiTooltipPosition",4,"ngIf"],["collapsedAvatars",""],[1,"user-details-host",3,"details","photoSize","showUserInfo","showTooltip"],[1,"plus-number-container",3,"pbiTooltip","pbiTooltipCaretSize","pbiTooltipPosition"],[1,"plus-number"],[1,"collapsed-avatar-list"],["class","collapsed-avatar",3,"click",4,"ngFor","ngForOf"],[1,"collapsed-avatar",3,"click"],[3,"details","showUserInfo","showOneLine","showTooltip"]],template:function(t,i){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275template(1,Ye,2,6,"div",1),e.\u0275\u0275pipe(2,"slice"),e.\u0275\u0275template(3,je,3,8,"div",2),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,j,3,4,"ng-template",null,3,e.\u0275\u0275templateRefExtractor)),2&t&&(e.\u0275\u0275styleMap(i.styleVariables),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind3(2,4,i.emails,0,i.numUsersToShow)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",i.emails.length>i.numUsersToShow))},dependencies:[U.NgForOf,U.NgIf,Ee.V,Fe.s,U.SlicePipe],styles:['.avatar-row-container[_ngcontent-%COMP%]{display:inline-flex;--avatar-outline-color: var(--fluent-theme-white-color)}.avatar-row-container[_ngcontent-%COMP%]   .user-details-host[_ngcontent-%COMP%]     .user-image{margin-left:var(--avatar-left-margin);margin-right:var(--avatar-right-margin)}.avatar-row-container[_ngcontent-%COMP%]   .user-details-host[_ngcontent-%COMP%]     .user-image>*{border:var(--avatar-outline) solid var(--avatar-outline-color)}.avatar-row-container[_ngcontent-%COMP%]   .plus-number-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;background-color:var(--fluent-theme-neutral-lighter-color, #F3F2F1);border-radius:50%;border:var(--avatar-outline) solid var(--avatar-outline-color)}.avatar-row-container[_ngcontent-%COMP%]   .plus-number-container[_ngcontent-%COMP%]   .plus-number[_ngcontent-%COMP%]{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--xs-font-size, 10px);font-weight:var(--font-weight-regular, 400);color:var(--fluent-theme-neutral-primary-color, #323130)}.collapsed-avatar-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:0 16px}.collapsed-avatar[_ngcontent-%COMP%]{display:flex;align-items:center;height:48px;white-space:nowrap;overflow:hidden}'],changeDetection:0}),o}(),Te=T(73221),V=T(77526),be=T(83317),Je=T(8297),pe=T(60042),Le=T(44603),Be=T(4444),Ue=T(38078),X=function(){function o(){}return o.isSampleScorecard=function(n){return"00000000-0000-0000-0000-000000000000"===n.id},o.getGoalCreateRequest=function(n){var t;return M.fF.assertValue(n,"goal"),{name:n.name,completionDate:n.completionDate,owner:n.owner,additionalOwners:n.additionalOwners,parentId:null!==(t=n.parentId)&&void 0!==t?t:null,startDate:n.startDate,unit:n.unit,datesFormatString:n.datesFormatString,valuesFormatString:n.valuesFormatString,valuesCategoryId:n.valuesCategoryId}},o.getGoalUpdateRequest=function(n){var t;return M.fF.assertValue(n,"goal"),{name:n.name,completionDate:n.completionDate,owner:n.owner,additionalOwners:n.additionalOwners,parentId:null!==(t=n.parentId)&&void 0!==t?t:null,startDate:n.startDate,unit:n.unit,datesFormatString:n.datesFormatString,valuesFormatString:n.valuesFormatString,description:n.description,cycle:n.cycle,cyclePeriod:n.cyclePeriod,valuesCategoryId:n.valuesCategoryId,metadata:n.metadata,cycleMetadata:n.cycleMetadata}},o.getGoalValueCreateRequest=function(n){return M.fF.assertValue(n,"goalValue"),{timestamp:n.timestamp,value:n.value,target:n.target,trend:n.trend,forecast:n.forecast,status:n.status}},o.getGoalValueUpdateRequest=function(n){return M.fF.assertValue(n,"goalValue"),{value:n.value,target:n.target,trend:n.trend,forecast:n.forecast,status:n.status}},o.getGoalStatusRulesUpdateRequest=function(n){M.fF.assertValue(n,"statusRules");var t=function(p){return{dateTime:p.dateTime,field:p.field,number:p.number,percentOf:p.percentOf?{field:p.percentOf.field,percent:p.percentOf.percent}:void 0}},i=function(p){return{field:p.field,operator:p.operator,value:t(p.value)}};return{rules:_.map(n.rules,function(u){return p=u,{conditions:_.map(p.conditions,function(y){return function(p){return{fieldComparison:i(p.fieldComparison),expression:p.expression}}(y)}),output:p.output};var p}),defaultOutput:n.defaultOutput}},o.isGoalMetadataUpdated=function(n,t){return!_.isEqual(o.getGoalUpdateRequest(n),o.getGoalUpdateRequest(t))},o.createNewGoal=function(n,t,i){M.fF.assertValue(n,"owner"),M.fF.assertValue(t,"scorecardId");var a=new Date,l=Le.E.getCurrentUTCDay().toISOString(),c=Le.E.getCurrentLocalDay();c.setMonth(c.getMonth()+1);var u=Le.E.treatAsUTCDate(c).toISOString();return{name:null,id:"new-".concat(Ue.b$.generateGuid()),scorecardId:t,createdTime:a.toISOString(),lastModifiedBy:n,lastModifiedTime:a.toISOString(),owner:n,additionalOwners:[],startDate:l,completionDate:u,unit:0,parentId:i??null,goalValues:[],subGoals:[],isNew:!0,state:"Editing",valuesCategoryId:null,isExpanded:!0}},o.getGoal=function(n,t){return this.findGoal(n,function(i){return i.id===t})},o.buildGoalTree=function(n){for(var t={},i=0,a=n;i<a.length;i++)t[(l=a[i]).id]=l;for(var c=[],u=0,p=n;u<p.length;u++){var l;if((l=p[u]).parentId&&t[l.parentId]){var y=t[l.parentId];y.subGoals?y.subGoals.push(l):y.subGoals=[l]}else c.push(l)}return c},o.findGoal=function(n,t){if(_.some(n)){var i=_.find(n,function(u){return t(u)});if(i)return i;for(var a=0,l=n;a<l.length;a++)if(i=this.findGoal(l[a].subGoals,t))return i}return null},o.forEachGoal=function(n,t){if(_.some(n))for(var i=0,a=n;i<a.length;i++){var l=a[i];t(l),this.forEachGoal(l?.subGoals,t)}},o.countSubGoals=function(n,t){var i=this;return void 0===t&&(t=function(){return!0}),_.isEmpty(n?.subGoals)?0:n.subGoals.filter(t).length+n.subGoals.reduce(function(l,c){return l+i.countSubGoals(c,t)},0)},o.flattenGoals=function(n){return function i(a){return _.flatMap(a,function(l){return(0,S.ev)([l],i(l.subGoals),!0)})}(n)},o.filterGoals=function(n,t){return _.filter(this.flattenGoals(n),t)},o.mapGoals=function(n,t){return _.map(this.flattenGoals(n),t)},o.anyGoals=function(n,t){var i;if(_.some(n))for(var a=0,l=n;a<l.length;a++){var c=l[a];if(t(c)||this.anyGoals(null!==(i=c.subGoals)&&void 0!==i?i:[],t))return!0}return!1},o.computeGoalHeight=function(n){return _.isEmpty(n?.subGoals)?0:Math.max.apply(Math,n.subGoals.map(function(t){return 1+o.computeGoalHeight(t)}))},o.computeGoalLevel=function(n,t){for(var i=0,a=t;a;)i++,a=a.parentId?o.getGoal(n,a.parentId):void 0;return i-1},o.filterGoalsAndReassignParents=function(n,t){var i=function a(l,c){var u=[],p=c;return t(l)&&(u.push((0,S.pi)((0,S.pi)({},l),{parentId:c})),p=l.id),_.concat(u,_.flatMap(l.subGoals,function(y){return a(y,p)}))};return _.flatMap(n,function(a){return i(a)})},o.isEditing=function(n){return!!o.findGoal(n?.goals,function(t){return!!t.isNew||"Editing"===t.state})},o.isDarkMode=function(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches},o.getCurrentUser=function(){var n;return null===(n=(0,Be.bG)())||void 0===n?void 0:n.name},o.isCurrentUser=function(n){var t=o.getCurrentUser();return t&&n&&(0,Ue.vr)(t,n)},o.compareGoalQueryConnections=function(n,t){return _.isEqual(n?.query,t?.query)&&_.isEqual(n?.datasetId,t?.datasetId)&&_.isEqual(n?.reportUrl,t?.reportUrl)},o.getGoalValueCategoriesCreateRequest=function(n){return M.fF.assertValue(!_.isEmpty(n),"getGoalValueCategoriesCreateRequest categoricalValues"),{name:"",categories:_.map(n,function(t,i){return{id:i,displayName:t}})}},o.getGoalValueCategoriesUpdateRequest=function(n){return M.fF.assertValue(n,"getGoalValueCategoriesUpdateRequest categoryList"),{name:n.name,categories:n.categories}},o.getGoalOwners=function(n){if(_.some(n)){var i={};return function a(l,c){if(_.some(l))for(var u=0,p=l;u<p.length;u++){var y=p[u];if(y.owner&&(c[y.owner]={displayName:void 0,userPrincipalName:y.owner,objectId:void 0,objectType:3,isSecurityGroup:void 0}),_.some(y.additionalOwners))for(var P=0,x=y.additionalOwners;P<x.length;P++){var N=x[P];N.userPrincipalName&&(c[N.userPrincipalName]={displayName:void 0,userPrincipalName:N.userPrincipalName,objectId:void 0,objectType:3,isSecurityGroup:void 0})}a(y.subGoals,c)}}(n,i),_.values(i)}return[]},o.observeAndRemoveFocusableAttributes=function(n){if(n){var t=new MutationObserver(function(i){_.some(i,function(l){var c;return(null===(c=l.addedNodes)||void 0===c?void 0:c.length)>0})&&function l(c){c&&(c.removeAttribute("tabindex"),c.removeAttribute("focusable"),_.forEach(c.children,l))}(n)});return t.observe(n,{attributeFilter:["tabindex","focusable"],characterData:!1,childList:!0,subtree:!0}),t}return null},o.getGoalsWithRollups=function(n,t,i){for(var l,a=[];t&&null!=(l=o.getGoal(n,t))&&!0!==l.isLinked&&(t=l.parentId,1===i&&null!=l.valueRollup||2===i&&null!=l.targetRollup);)a.push(l);return a},o}(),Mt=T(86940),Ne=T(25512),Me=T(35510),Ae=T(30794);function Ze(o){if(null==o)return 0;if("number"==typeof o)return o;if("string"==typeof o)switch(o.toString().trim().toLowerCase()){case"none":return 0;case"read":default:return 1;case"write":return 2;case"readwrite":return 3}return 0}var $e=T(125),ie=T(57535),Ke=function(){function o(){}return o.sortAndFilter=function(n,t,i,a){if(_.isEmpty(n))return n;var l=t.sortAscending?"asc":"desc",c=[this.sortingFunctions[t.sortBy]];return"Rank"===t.sortBy&&c.push(this.sortingFunctions.CreatedTime),c.push("Name"===t.sortBy?this.sortingFunctions.CreatedTime:this.sortingFunctions.Name),this.sortRecursive(n,l,c,i,a)},o.sort=function(n,t){return this.sortAndFilter(n,t,{},{})},o.toggleSort=function(n,t){return t?n.sortBy===t?n.sortAscending?{sortBy:n.sortBy,sortAscending:!1}:pe.Ij:{sortBy:t,sortAscending:!0}:n},o.sortRecursive=function(n,t,i,a,l){for(var c=0,u=n=_.orderBy(n,i,[t,"asc"]);c<u.length;c++){var p=u[c];_.isEmpty(p.subGoals)||(p.subGoals=this.sortRecursive(p.subGoals,t,i,a,l)),_.isNil(l)?(delete p.isFilterMatch,delete p.isHidden):(p.isFilterMatch=o.matchesFilter(p,a,l),p.isHidden=!p.isFilterMatch&&!_.some(p.subGoals,function(y){return!y.isHidden}))}return n},o.matchesFilter=function(n,t,i){var a,l,c,u,p;if(_.isNil(i)||n.isNew||"Editing"===n.state||"Saving"===n.state)return!0;var y=null!==(a=$e.r.buildCurrentGoalValue(n).status)&&void 0!==a?a:0,P=ie.p.getGoalStatusForScorecardId(y,n.scorecardId,t),x=!1,N=null===(l=i?.keyword)||void 0===l?void 0:l.toLocaleLowerCase();if(!_.isString(N)||_.isEmpty(N))x=!0;else if(!(null===(c=n.name)||void 0===c)&&c.toLocaleLowerCase().includes(N)&&(x=!0),i?.matchOwner&&!x&&((null===(u=n.ownerDisplayNames)||void 0===u?void 0:u.length)>=1?x=_.some(n.ownerDisplayNames,function(me){return me?.toLocaleLowerCase().includes(N)}):(x=null===(p=n.owner)||void 0===p?void 0:p.toLocaleLowerCase().includes(N))||(x=_.some(n.additionalOwners,function(me){var Oe,ve=null!==(Oe=me.userPrincipalName)&&void 0!==Oe?Oe:me.aadAppId;return ve?.toLocaleLowerCase().includes(N)}))),i?.matchStatus&&!x){var W=P.displayName;W?.toLocaleLowerCase().includes(N)&&(x=!0)}var te=!1;return(_.isNil(i?.statuses)||_.isEmpty(i?.statuses)||ie.p.listIncludesMatchingStatus(i.statuses,P))&&(te=!0),x&&te},o.sortingFunctions={Rank:function(t){return t.rank},CreatedTime:function(t){return t.createdTime},Name:function(t){var i;return null===(i=t.name)||void 0===i?void 0:i.trim().toLocaleLowerCase()},Owner:function(t){var i,a,l;return null===(l=null!==(a=null===(i=t.ownerDisplayNames)||void 0===i?void 0:i[0])&&void 0!==a?a:t.owner)||void 0===l?void 0:l.trim().toLocaleLowerCase()},Status:function(t){return($e.r.buildCurrentGoalValue(t).status+1)%6},Value:function(t){return $e.r.buildCurrentGoalValue(t).value},Change:function(t){return $e.r.calculateValueChange(t,!0).changeAmount},Milestone:function(t){return $e.r.buildCurrentGoalValue(t).nextTarget},Target:function(t){return $e.r.buildCurrentGoalValue(t).finalTarget},DueDate:function(t){return t.completionDate}},o}(),Y=T(558),K=function(){function o(){}return o.moveColumnSettingUp=function(n,t){if(!(_.size(n)<=1||0===t)){var i=n;return(0,S.ev)((0,S.ev)((0,S.ev)([],_.slice(i,0,t-1),!0),[i[t],i[t-1]],!1),_.slice(i,t+1),!0)}},o.moveColumnSettingDown=function(n,t){if(!(_.size(n)<=1||t===_.size(n)-1)){var i=n;return(0,S.ev)((0,S.ev)((0,S.ev)([],_.slice(i,0,t),!0),[i[t+1],i[t]],!1),_.slice(i,t+2),!0)}},o.canMoveLeft=function(n,t){if(t<=1)return!1;var i=_.slice(n,0,t);return _.findLastIndex(i,function(l){return l.show})>0},o.canMoveRight=function(n,t){return!(0===t||t>=n.length-1)&&_.findIndex(n,function(a){return a.show},t+1)>t},o.moveColumnLeft=function(n,t){var i=_.findIndex(n,function(c){return c.columnId===t}),a=_.slice(n,0,i),l=_.findLastIndex(a,function(c){return c.show});(0,Y.bA)(n,i,l)},o.moveColumnRight=function(n,t){var i=_.findIndex(n,function(l){return l.columnId===t}),a=_.findIndex(n,function(l){return l.show},i+1);(0,Y.bA)(n,i,a)},o.hideColumn=function(n,t){var i=_.findIndex(n,function(a){return a.columnId===t});i>=0&&(n[i].show=!1)},o.showColumn=function(n,t){var i=_.findIndex(n,function(a){return a.columnId===t});i>=0&&(n[i].show=!0)},o.isColumnVisible=function(n,t){var i=_.find(n,function(a){return a.columnId===t});return!!_.isUndefined(i?.show)||i.show},o.mergeColumns=function(n,t){for(var i=new Array,a=new Set(t.map(function(N){return N.columnId})),l=new Set,c=0,u=n;c<u.length;c++){var p=u[c];a.has(p.columnId)&&!l.has(p.columnId)&&(i.push(p),l.add(p.columnId))}for(var y=0,P=t;y<P.length;y++){var x=P[y];l.has(x.columnId)||i.push(x)}return i},o.removeColumnSettings=function(n,t){var i=new Set(t);_.remove(n,function(a){return i.has(a.columnId)})},o.adjustColumnSettings=function(n,t){n.featureSwitches.scorecardSplitColumns||(o.removeColumnSettings(t,[7,8,9]),o.isColumnVisible(t,3)||o.showColumn(t,3)),n.featureSwitches.scorecardCompactView||o.removeColumnSettings(t,[10])},o}(),ae=function(){function o(){}return o.ManuallyUpdatingConnectedGoalValueNotAllowed="ManuallyUpdatingConnectedGoalValueNotAllowed",o.ManuallyUpdatingConnectedMetricValueNotAllowed="ManuallyUpdatingConnectedMetricValueNotAllowed",o.MultiGeoNotSupported="MultiGeoNotSupported",o.InvalidScorecardColumnSetting="InvalidScorecardColumnSetting",o.CircularRelationshipsNotAllowed="CircularRelationshipsNotAllowed",o}(),re=T(11547),rt=T(18353),gt=T(42195),bt=T(70032),ue=T(48787),Ce=function(){function o(n){var t,i=this;this.scorecardService=n,this.MinPollingInterval=200,this.MaxPollingInterval=4e3,this.MaxPollingRequests=40,this.PollingDelay=function(a){return i.MinPollingInterval+(i.MaxPollingInterval-i.MinPollingInterval)*a/i.MaxPollingRequests},this.ConnectionTypeAsText=((t={})[1]="Current",t[2]="Target",t)}return o.prototype.startPollingAsync=function(n,t,i){return(0,S.mG)(this,void 0,void 0,function(){var a,c=this;return(0,S.Jh)(this,function(u){switch(u.label){case 0:if(this.setGoalRefreshState(n.id,t,!0),a=i?.lastRefreshTimestamp,null!=a)return[3,4];u.label=1;case 1:return u.trys.push([1,3,,4]),[4,this.getLastRefreshTimestamp(n.id,t)];case 2:return a=u.sent(),[3,4];case 3:return u.sent(),this.setGoalRefreshState(n.id,t,!1),[2];case 4:return(0,S.mG)(c,void 0,void 0,function(){var p,y,P,N,x=this;return(0,S.Jh)(this,function(W){switch(W.label){case 0:return W.trys.push([0,,9,10]),p=new Ae.xQ,(y=p.pipe((0,rt.R)(function(te){return te+1},-1),(0,gt.zg)(function(te){return(0,re.of)(void 0).pipe((0,bt.g)(x.PollingDelay(te)))}),(0,ue.q)(this.MaxPollingRequests))).subscribe(function(){return(0,S.mG)(x,void 0,void 0,function(){return(0,S.Jh)(this,function(te){switch(te.label){case 0:return[4,this.getLastRefreshTimestamp(n.id,t)];case 1:return P=te.sent(),a===P?p.next():(M.fF.assertValue(P>a,"Expected new refresh history count to be higher"),p.complete()),[2]}})})}),p.next(),[4,y.toPromise()];case 1:return W.sent(),i?.refreshGoal?[4,this.scorecardService.refreshGoal(n.id)]:[3,3];case 2:W.sent(),W.label=3;case 3:return i?.refreshGoalValues?[4,this.scorecardService.expandGoalValues(n.id,!0)]:[3,5];case 4:W.sent(),W.label=5;case 5:return i?.refreshRollups&&n.parentId?[4,this.startRollupPolling(n.parentId,t,P)]:[3,7];case 6:W.sent(),W.label=7;case 7:return[4,null===(N=i?.onComplete)||void 0===N?void 0:N.call(i,P)];case 8:return W.sent(),[3,10];case 9:return this.setGoalRefreshState(n.id,t,!1),[7];case 10:return[2]}})}),[2]}})})},o.prototype.refreshRollups=function(n,t){return(0,S.mG)(this,void 0,void 0,function(){var i,a,l,c,u,p,y,P,x;return(0,S.Jh)(this,function(te){switch(te.label){case 0:if(!n.parentId||null!=n.valuesCategoryId)return[3,2];if(i=[],a=this.scorecardService.getCurrentScorecard(),!(l=X.getGoal(a.goals,n.parentId)))return[3,2];for(c=!1,u=!1,p=function(Oe){var ve=new Date(Oe.timestamp).getTime(),Re=_.find(n.goalValues,function(Xe){return new Date(Xe.timestamp).getTime()===ve});if(y.isPartOfParentGoalRollup(l.valueRollup,Oe)&&(c||(c=Re?.value!==Oe.value)),y.isPartOfParentGoalRollup(l.targetRollup,Oe)&&(u||(u=Re?.target!==Oe.target)),c&&u)return"break"},y=this,P=0,x=t;P<x.length&&"break"!==p(x[P]);P++);return c&&i.push(this.startRollupPolling(n.parentId,1)),u&&i.push(this.startRollupPolling(n.parentId,2)),_.some(i)?[4,Promise.all(i)]:[3,2];case 1:te.sent(),te.label=2;case 2:return[2]}})})},o.prototype.refreshRollupsAfterMove=function(n){var t;return(0,S.mG)(this,void 0,void 0,function(){var i,l,c,u,p,y,P;return(0,S.Jh)(this,function(x){switch(x.label){case 0:return i=this.scorecardService.getCurrentScorecard(),null!=X.getGoal(i.goals,n.goalToMove.goalId).valuesCategoryId?[2]:(l=[],c=[],null!=n.goalToMove.currentParentId&&(l.push.apply(l,X.getGoalsWithRollups(i.goals,u=n.goalToMove.currentParentId,1)),c.push.apply(c,X.getGoalsWithRollups(i.goals,u,2))),null!=(null===(t=n.newParent)||void 0===t?void 0:t.goalId)&&(y=X.getGoalsWithRollups(i.goals,p=n.newParent.goalId,1),P=X.getGoalsWithRollups(i.goals,p,2),l=this.mergeParents(l,y),c=this.mergeParents(c,P)),[4,Promise.all([this.startRollupPollingForGoals(l,1),this.startRollupPollingForGoals(c,2)])]);case 1:return x.sent(),[2]}})})},o.prototype.refreshRollupsAfterGoalDelete=function(n){return(0,S.mG)(this,void 0,void 0,function(){var t,i,a,l,p=this;return(0,S.Jh)(this,function(y){switch(y.label){case 0:return n.parentId&&null==n.valuesCategoryId?(t=this.scorecardService.getCurrentScorecard(),(i=X.getGoal(t.goals,n.parentId))?(a=[],l=[],_.isNil(i.valueRollup)||_.some(n.goalValues,function(P){return!_.isNil(P.value)&&p.isPartOfParentGoalRollup(i.valueRollup,P)})&&a.push.apply(a,X.getGoalsWithRollups(t.goals,i.id,1)),_.isNil(i.targetRollup)||_.some(n.goalValues,function(P){return!_.isNil(P.target)&&p.isPartOfParentGoalRollup(i.targetRollup,P)})&&l.push.apply(l,X.getGoalsWithRollups(t.goals,i.id,2)),[4,Promise.all([this.startRollupPollingForGoals(a,1),this.startRollupPollingForGoals(l,2)])]):[3,2]):[3,2];case 1:y.sent(),y.label=2;case 2:return[2]}})})},o.prototype.refreshRollupsAfterGoalValueDelete=function(n,t){return(0,S.mG)(this,void 0,void 0,function(){var i,a,l,c;return(0,S.Jh)(this,function(y){switch(y.label){case 0:return n.parentId&&null==n.valuesCategoryId?(i=this.scorecardService.getCurrentScorecard(),(a=X.getGoal(i.goals,n.parentId))?(l=[],c=[],_.isNil(a.valueRollup)||!_.isNil(t.value)&&this.isPartOfParentGoalRollup(a.valueRollup,t)&&l.push.apply(l,X.getGoalsWithRollups(i.goals,a.id,1)),_.isNil(a.targetRollup)||!_.isNil(t.target)&&this.isPartOfParentGoalRollup(a.targetRollup,t)&&c.push.apply(c,X.getGoalsWithRollups(i.goals,a.id,2)),[4,Promise.all([this.startRollupPollingForGoals(l,1),this.startRollupPollingForGoals(c,2)])]):[3,2]):[3,2];case 1:y.sent(),y.label=2;case 2:return[2]}})})},o.prototype.isPartOfParentGoalRollup=function(n,t){return n&&(_.isNil(n.startDate)||new Date(t.timestamp).getTime()>=new Date(n.startDate).getTime())},o.prototype.startRollupPolling=function(n,t,i){return(0,S.mG)(this,void 0,void 0,function(){var a,l;return(0,S.Jh)(this,function(c){switch(c.label){case 0:return a=this.scorecardService.getCurrentScorecard(),l=X.getGoalsWithRollups(a.goals,n,t),[4,this.startRollupPollingForGoals(l,t,i)];case 1:return c.sent(),[2]}})})},o.prototype.startRollupPollingForGoals=function(n,t,i){return(0,S.mG)(this,void 0,void 0,function(){var a,l=this;return(0,S.Jh)(this,function(c){switch(c.label){case 0:return _.some(n)?(a=n.shift(),[4,this.startPollingAsync(a,t,{lastRefreshTimestamp:i,refreshGoal:!0,refreshGoalValues:!0,onComplete:function(p){return l.startRollupPollingForGoals(n,t,p)}})]):[3,2];case 1:c.sent(),c.label=2;case 2:return[2]}})})},o.prototype.getLastRefreshTimestamp=function(n,t){var i;return(0,S.mG)(this,void 0,void 0,function(){var a,l,c;return(0,S.Jh)(this,function(p){switch(p.label){case 0:return a=this.ConnectionTypeAsText[t],[4,this.scorecardService.getRefreshHistory(n)];case 1:return l=p.sent(),c=_.filter(l,function(y){return y.connectionType===t||y.connectionType===a}),[2,null===(i=_.maxBy(c,function(y){return y.timestamp}))||void 0===i?void 0:i.timestamp]}})})},o.prototype.mergeParents=function(n,t){if(!_.some(n))return t;var i=_.intersectionBy(n,t,function(u){return u.id});if(_.isEmpty(i))return(0,S.ev)((0,S.ev)([],n,!0),t,!0);for(var a=_.findIndex(t,function(u){return u.id===i[0].id}),l=[],c=0;c<a;c++)l.push(t[c]);return l.push.apply(l,n),l},o.prototype.setGoalRefreshState=function(n,t,i){this.scorecardService.setGoalRefreshState(n,t,i)},o}(),ge=T(41114),fe="PBI.Goal.ContextMenu.CreateAPowerAutomateFlow",nt=(ge.cx[fe]=(0,ge.b1)(fe),"PBI.Goal.TargetsEditor.Action.Opened"),De=ge.cx[nt]=(0,ge.b1)(nt),Wt="PBI.Goal.TargetsEditor.Action.Canceled",E=ge.cx[Wt]=(0,ge.b1)(Wt),En="PBI.Goal.TargetsEditor.Action.Done",kn=ge.cx[En]=(0,ge.b1)(En),cn="PBI.Goal.ValuesEditor.Action.Opened",$r=ge.cx[cn]=(0,ge.b1)(cn),di="PBI.Goal.ValuesEditor.Action.Canceled",de=ge.cx[di]=(0,ge.b1)(di),Qr="PBI.Goal.ValuesEditor.Action.Done",wo=ge.cx[Qr]=(0,ge.b1)(Qr),Xi="PBI.ScorecardHeader.LabelInlineEdit",Zl=ge.cx[Xi]=(0,ge.b1)(Xi),zn="PBI.ScorecardHeader.DescriptionInlineEdit",pi=ge.cx[zn]=(0,ge.b1)(zn),on=function(o){return o.Manual="Manual",o.Connect="Connect",o.Rollup="Rollup",o}({}),So="PBI.WebScorecard.SaveCurrentValueSelection",Jr=ge.cx[So]=(0,ge.b1)(So),qi="PBI.WebScorecard.SaveTargetValueSelection",Zi=ge.cx[qi]=(0,ge.b1)(qi),Yi="PBI.DatasetDetailsPage.GoalRollupsCoachmarkTriggered",Mo=ge.cx[Yi]=(0,ge.b1)(Yi),Dn="PBI.DatasetDetailsPage.GoalRollupsDetailsPaneCoachmarkTriggered",Po=ge.cx[Dn]=(0,ge.b1)(Dn),xi="PBI.Scorecard.ChangeViewType",Oi=ge.cx[xi]=(0,ge.b1)(xi),Ki="PBI.Scorecard.Hierarchies.Builder.Open",$t=ge.cx[Ki]=(0,ge.b1)(Ki),qt=function(){function o(){}return o.getGoalValueMap=function(n){var t=new Map;if(_.isEmpty(n))return t;for(var i=0,a=n;i<a.length;i++){var l=a[i];t.set(new Date(l.timestamp).getTime(),l)}return t},o.areGoalValuesEqual=function(n,t,i,a){return M.fF.assertValue(n,"goalValueOne"),M.fF.assertValue(t,"goalValueTwo"),!(!i&&n.value!==t.value||!a&&n.target!==t.target||n.trend!==t.trend||n.forecast!==t.forecast||n.status!==t.status)},o.diffGoalValues=function(n,t){M.fF.assertValue(n,"goalValueOne"),M.fF.assertValue(t,"goalValueTwo");var i={timestamp:n.timestamp,goalId:n.goalId,scorecardId:n.scorecardId,createdTime:n.createdTime,lastModifiedTime:n.lastModifiedTime};return n.value!==t.value&&(i.value=n.value),n.target!==t.target&&(i.target=n.target),n.trend!==t.trend&&(i.trend=n.trend),n.forecast!==t.forecast&&(i.forecast=n.forecast),n.status!==t.status&&(i.status=n.status),i},o.calculateGoalValueChanges=function(n,t){for(var i=[],a=new Map,l=0,c=n;l<c.length;l++){var u=c[l],p=new Date(u.timestamp).getTime();a.set(p,u.value)}for(var y=0,P=t;y<P.length;y++)u=P[y],p=new Date(u.timestamp).getTime(),a.has(p)?u.value!==a.get(p)&&i.push(u):i.push(u);for(var x=new Set,N=0,W=t;N<W.length;N++)u=W[N],p=new Date(u.timestamp).getTime(),x.add(p);for(var te=0,me=n;te<me.length;te++)u=me[te],p=new Date(u.timestamp).getTime(),x.has(p)||i.push({timestamp:u.timestamp,value:null});return i},o}(),ei=T(74076),zt=T(58614),Zt=new e.InjectionToken("ScorecardHostService"),Cn=new e.InjectionToken("ScorecardSettingsService"),un=T(10723),In=T(50547),ti=T(43286),Ya=T(91055),b=T(74466),qn=T(33554),_n=T(59017),xe=T(14172),ar=T(68549),Kt=T(81905),xo=T(58938),Oo=T(18950),St=T(65181),Xr=T(79685),en=T(83342),To=function(){function o(n,t){this.errorService=n,this.localizationService=t}return o.prototype.showUserError=function(n,t,i){var a;void 0===i&&(i="GenericErrorDescription"),this.errorService.error(this.localizationService.get(i),t,{requestId:n?.requestId,statusCode:null===(a=n?.status)||void 0===a?void 0:a.toString()})},o.prototype.showThrottlingError=function(){this.errorService.errorNoDefaultAdditionalErrorInfo(this.localizationService.get("You_Have_Exceeded_Limit_Try_Again_Later"),"throttling",{title:this.localizationService.get("Rate_Limit_Is_Exceeded"),level:In.U.Information,isDismissable:!0,showAdditionalErrorInfo:!1})},o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275inject(Oo.T),e.\u0275\u0275inject(St.o))},o.\u0275prov=e.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac}),o}(),Eo=T(96608),ko=T(85732),Ht=function(){function o(n,t,i,a,l,c,u,p,y,P,x,N,W){var me,Oe,te=this;this.goalsHttpService=n,this.userDetailsService=t,this.dialogService=i,this.errorService=a,this.localizationService=l,this.userInfo=c,this.featureSwitches=u,this.goalsErrorService=p,this.telemetryService=y,this.tabFacade=P,this.store=x,this.scorecardHost=N,this.scorecardSettings=W,this.scorecard=void 0,this._scorecard$=new qn.t(1),this._selectedGoalIds$=this._scorecard$.pipe((0,xe.U)(function(ve){return ve?.selectedGoalIds}),(0,V.x)(_.isEqual)),this._activeGoalId$=this._scorecard$.pipe((0,xe.U)(function(ve){return ve?.activeGoalId}),(0,V.x)()),this.isEditMode$=new Me.X(!1),this.loading$=new Me.X(0),this._viewType$=new Me.X("List"),this._scorecardSelectionMode$=new Me.X(null),this.switchingHierarchyPath$=new Me.X(!1),this.linkedScorecardsById={},this._goalStatusesByScorecardId$=new Me.X({}),this.onHierarchyNotFound$=new Ae.xQ,this.onDestroy$=new Ae.xQ,this.requestId=0,this.pollingService=new Ce(this),this.scorecardHost&&(this.getSelectedGoalsObservable().pipe((0,be.R)(this.onDestroy$)).subscribe(function(ve){te.scorecardHost.onSelectGoals(ve)}),this._scorecard$.pipe((0,xe.U)(function(ve){return ve.hierarchyPaths}),(0,V.x)(),(0,be.R)(this.onDestroy$)).subscribe(function(ve){te.scorecardHost.onChangeHierarchyPath(ve)})),this._scorecard$.pipe((0,V.x)(function(ve,Re){var Xe,ot;return _.isEqual(null===(Xe=ve?.goalStatuses)||void 0===Xe?void 0:Xe.statuses,null===(ot=Re?.goalStatuses)||void 0===ot?void 0:ot.statuses)&&ve?.linkedScorecards===Re?.linkedScorecards}),(0,xe.U)(function(ve){return ie.p.getGoalStatusesByScorecardId(ve)}),(0,be.R)(this.onDestroy$)).subscribe(this._goalStatusesByScorecardId$),(0,_n.aj)([this.isEditMode$,this.viewType$,null!==(Oe=null===(me=this.scorecardSettings)||void 0===me?void 0:me.settings)&&void 0!==Oe?Oe:(0,re.of)({})]).pipe((0,xe.U)(function(ve){var Re=ve[0],Xe=ve[1],ot=ve[2];return"tile"===ot?.displayMode?te.featureSwitches.featureSwitches.multipleGoalTilesVisual?"multiple":"single":ot?.useMultiselectMode?"multiple":"List"===Xe&&Re?"ctrl":null}),(0,V.x)(),(0,be.R)(this.onDestroy$)).subscribe(this._scorecardSelectionMode$)}return o.prototype.ngOnDestroy=function(){this.onDestroy$.next(!0),this.onDestroy$.complete()},o.prototype.loadScorecard=function(n,t,i,a){var l=this;if(X.isEditing(this.scorecard)&&!i)this.promptUserConfirmation({title:this.localizationService.get("MetricsUnsavedChangesTitle"),message:this.localizationService.get("MetricsUnsavedChangesDescription"),okButtonText:this.localizationService.get("Refresh"),panelClass:["updateConfirmationDialogPanel"],onConfirmation:function(){return(0,S.mG)(l,void 0,void 0,function(){return(0,S.Jh)(this,function(p){return[2,this.loadScorecard(n,t,!0,a)]})})}});else{this.loading$.next(this.loading$.value+1),this.requestId++;var c=this.requestId;this.goalsHttpService.getScorecard(n,t,!0,a).toPromise().then(function(u){l.loading$.next(l.loading$.value-1),!(c<l.requestId)&&(l.switchingHierarchyPath$.next(!1),l.setScorecardWithGoals(u))}).catch(function(u){if(l.loading$.next(l.loading$.value-1),!(c<l.requestId)){if(l.switchingHierarchyPath$.next(!1),_.isEmpty(a))l.scorecard=null;else if(l.goalsErrorService.showUserError(u,"LoadHierarchy","MetricsHierarchy_Loading_Error"),404===u?.status&&(l.setActiveHierarchy(void 0,!0),l.onHierarchyNotFound$.next(a),!l.scorecard))return;l.commit()}})}return this._scorecard$.asObservable()},o.prototype.setActiveHierarchy=function(n,t){return(0,S.mG)(this,void 0,void 0,function(){var i,a=this;return(0,S.Jh)(this,function(l){switch(l.label){case 0:return i=function(u,p){return _.isEmpty(u)&&_.isEmpty(p)||_.isEqual(u,p)},this.scorecard&&!i(this.scorecard.hierarchyPaths,n)?X.isEditing(this.scorecard)&&!t?[2,this.promptUserConfirmation({title:this.localizationService.get("MetricsUnsavedChangesTitle"),message:this.localizationService.get("MetricsUnsavedChangesDescription"),okButtonText:this.localizationService.get("ModalDialogButtonText_Continue"),panelClass:["updateConfirmationDialogPanel"],onConfirmation:function(){return(0,S.mG)(a,void 0,void 0,function(){return(0,S.Jh)(this,function(u){return[2,this.setActiveHierarchy(n,!0)]})})}})]:[3,1]:[3,3];case 1:return this.switchingHierarchyPath$.next(!0),[4,this.loadScorecard(this.scorecard.groupId,this.scorecard.id,!0,n).pipe((0,ar.o)(function(c){return!i(c.hierarchyPaths,n)},!0)).toPromise()];case 2:return[2,l.sent()];case 3:return[2]}})})},Object.defineProperty(o.prototype,"onHierarchyNotFound",{get:function(){return this.onHierarchyNotFound$},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isHierarchicalScorecard",{get:function(){var t;return!_.isEmpty(null===(t=this.scorecard)||void 0===t?void 0:t.hierarchyPaths)},enumerable:!1,configurable:!0}),o.prototype.assertNoActivehierarchy=function(n){return void 0===n&&(n=!1),!this.isHierarchicalScorecard||(n?this.dialogService.showSimpleDialog(this.localizationService.get("Coming_Soon"),this.localizationService.get("MetricsHierarchy_ComingSoon")):M.fF.assertFail("Cannot perform this operation on a hierarchical scorecard. ".concat((new Error).stack)),!1)},Object.defineProperty(o.prototype,"hierarchyPaths$",{get:function(){return this._scorecard$.pipe((0,xe.U)(function(t){return t?.hierarchyPaths}),(0,V.x)())},enumerable:!1,configurable:!0}),o.prototype.assertScorecardLoaded=function(n){return!(n.id!==this.scorecard.id||!_.isEqual(n.hierarchyPaths,this.scorecard.hierarchyPaths))||(M.fF.assertFail("Scorecard has changed. Active scorecard: ".concat(JSON.stringify(this.scorecard.hierarchyPaths),". Previous scorecard ").concat(JSON.stringify(n.hierarchyPaths))),!1)},o.prototype.isSwitchingHierarchyPath=function(){return this.switchingHierarchyPath$.asObservable()},o.prototype.saveGoal=function(n,t){var i,a,l,c,u,p;return(0,S.mG)(this,void 0,void 0,function(){var y,P,x,N,W,te,me,Oe=this;return(0,S.Jh)(this,function(ve){switch(ve.label){case 0:if(M.fF.assertValue(this.scorecard,"No scorecard loaded"),y=X.getGoal(this.scorecard.goals,n),M.fF.assertValue(y,"goal"),P=X.isGoalMetadataUpdated(y,t),!y.isNew&&!P)return[2,n];if(x=(null===(i=t.metadata)||void 0===i?void 0:i.showFinalTarget)!==(null===(a=y.metadata)||void 0===a?void 0:a.showFinalTarget)||(null===(l=t.metadata)||void 0===l?void 0:l.showPercentChange)!==(null===(c=y.metadata)||void 0===c?void 0:c.showPercentChange)||!_.isEqual(null!==(u=y.cycleMetadata)&&void 0!==u?u:{},null!==(p=t.cycleMetadata)&&void 0!==p?p:{}),!this.assertNoActivehierarchy(!0))return[2,n];ve.label=1;case 1:return ve.trys.push([1,9,,10]),N=this.scorecard,y.isNew?[4,this.goalsHttpService.createGoal(this.scorecard.groupId,this.scorecard.id,X.getGoalCreateRequest(t)).toPromise()]:[3,5];case 2:return W=ve.sent(),t.metadata?[4,this.goalsHttpService.updateGoal(this.scorecard.groupId,this.scorecard.id,W.id,{metadata:t.metadata}).toPromise()]:[3,4];case 3:W=ve.sent(),ve.label=4;case 4:return[3,7];case 5:return P?[4,this.goalsHttpService.updateGoal(this.scorecard.groupId,this.scorecard.id,y.id,X.getGoalUpdateRequest(t)).toPromise()]:[3,7];case 6:W=ve.sent(),ve.label=7;case 7:return this.assertScorecardLoaded(N)?[4,this.getOwnerDisplayNames(y)]:[2];case 8:return te=ve.sent(),this.scorecard=(0,b.Uy)(this.scorecard,function(Re){var Xe=X.getGoal(Re.goals,n);Oe.assignGoal(Xe,W),Xe.isNew=!1,Xe.ownerDisplayNames=te}),n=W.id,[3,10];case 9:throw me=ve.sent(),this.goalsErrorService.showUserError(me,"SaveGoalError"),me;case 10:return x?[4,this.refreshGoal(n)]:[3,12];case 11:return ve.sent(),[3,13];case 12:this.commit(),ve.label=13;case 13:return[2,n]}})})},o.prototype.moveGoal=function(n,t,i){var a;return(0,S.mG)(this,void 0,void 0,function(){var l,c,u,p,x,N;return(0,S.Jh)(this,function(W){switch(W.label){case 0:return M.fF.assertValue(this.scorecard,"No scorecard loaded"),M.fF.assertValue(this.scorecard.goals,"Scorecard should have at least one goal to move"),this.assertNoActivehierarchy()?(l=X.getGoal(this.scorecard.goals,n),M.fF.assertValue(l,"Source goal does not exist"),c=X.computeGoalHeight(l),u=i?X.getGoal(this.scorecard.goals,i):void 0,M.fF.assertValue(!i||u,"Destination parent goal does not exist"),p=u?X.computeGoalLevel(this.scorecard.goals,u):void 0,(_.isNil(p)?c:c+p+1)>pe.gT.MaxSubGoals?[4,this.dialogService.showSimpleInfoDialog({title:this.localizationService.get("MetricCannotBeMovedTitle"),message:this.localizationService.format("MetricCannotBeMovedMessage",pe.gT.MaxSubGoals)},{autoFocus:!0}).afterClosed().toPromise()]:[3,2]):[2];case 1:return W.sent(),[2];case 2:x={goalToMove:{goalId:n}},this.scorecard=(0,b.Uy)(this.scorecard,function(te){var me,Oe,ve,Re,Xe=X.getGoal(te.goals,n);x.goalToMove.currentParentId=null!==(me=Xe.parentId)&&void 0!==me?me:void 0;var ot=Xe.parentId?X.getGoal(te.goals,Xe.parentId):void 0;Xe.parentId&&!ot||_.remove(Xe.parentId?ot.subGoals:te.goals,function(_t){return _t.id===Xe.id});var ct=i?X.getGoal(te.goals,i):void 0;ct&&(x.newParent={goalId:ct.id,currentParentId:null!==(Oe=ct.parentId)&&void 0!==Oe?Oe:void 0});var mt=ct?ct.subGoals:te.goals;if(mt){var H=t?mt.findIndex(function(_t){return _t.id===t}):mt.length;M.fF.assertValue(-1!==H,"Destination next goal does not exist");var le=H-1>=0?mt[H-1]:void 0;le&&(x.newPrevious={goalId:le.id,currentParentId:null!==(ve=le.parentId)&&void 0!==ve?ve:void 0});var ce=H<mt.length?mt[H]:void 0;M.fF.assertValue(!ce||ce.parentId===i,"Destination next goal parent should be the same as the destination parent goal"),ce&&(x.newNext={goalId:ce.id,currentParentId:null!==(Re=ce.parentId)&&void 0!==Re?Re:void 0}),mt.splice(H,0,Xe);var Qe=0;mt.forEach(function(_t){_t.rank=Qe,Qe++})}else Xe.rank=0,ct.subGoals=[Xe];return Xe.parentId=i,Xe.state="Saving",te}),this.loading$.next(this.loading$.value+1),this.commit(),W.label=3;case 3:return W.trys.push([3,6,10,11]),[4,this.pollingService.refreshRollupsAfterMove(x)];case 4:return W.sent(),[4,this.goalsHttpService.moveGoal(this.scorecard.groupId,this.scorecard.id,x).toPromise()];case 5:return W.sent(),this.setGoalState(n,"Consumption"),[3,11];case 6:return N=W.sent(),(null===(a=N?.error)||void 0===a?void 0:a.code)!==ae.CircularRelationshipsNotAllowed?[3,8]:[4,this.loadScorecard(this.scorecard.groupId,this.scorecard.id,!0)];case 7:return W.sent(),this.dialogService.showSimpleDialog(this.localizationService.get("Unable_to_move_metric"),this.localizationService.get("Metrics_Circular_Relationships_Not_Allowed")),[3,9];case 8:throw this.goalsErrorService.showUserError(N,"MoveGoalError"),N;case 9:return[3,11];case 10:return this.loading$.next(this.loading$.value-1),[7];case 11:return[2]}})})},o.prototype.refreshGoal=function(n){return(0,S.mG)(this,void 0,void 0,function(){var t,i,a,l,c=this;return(0,S.Jh)(this,function(u){switch(u.label){case 0:M.fF.assertValue(this.scorecard,"No scorecard loaded"),u.label=1;case 1:return u.trys.push([1,4,,5]),t=this.scorecard,[4,this.goalsHttpService.getGoal(this.scorecard.groupId,this.scorecard.id,n,!1,this.scorecard.hierarchyPaths).toPromise()];case 2:return i=u.sent(),this.assertScorecardLoaded(t)?[4,this.getOwnerDisplayNames(i)]:[2];case 3:return a=u.sent(),this.scorecard=(0,b.Uy)(this.scorecard,function(p){var y=X.getGoal(p.goals,n);c.assignGoal(y,i),y.ownerDisplayNames=a}),[3,5];case 4:throw l=u.sent(),this.goalsErrorService.showUserError(l,"RefreshGoalError"),l;case 5:return this.commit(),[2]}})})},o.prototype.saveGoalValue=function(n,t){var i,a;return(0,S.mG)(this,void 0,void 0,function(){var l,c,u,p,y,P;return(0,S.Jh)(this,function(x){switch(x.label){case 0:return M.fF.assertValue(this.scorecard,"No scorecard loaded"),[4,this.expandGoalValues(n)];case 1:x.sent(),l=X.getGoal(this.scorecard.goals,n),M.fF.assertValue(l,"goal"),c=_.find(l.goalValues,function(N){return new Date(N.timestamp).getTime()===new Date(t.timestamp).getTime()}),M.fF.assert(function(){return!l.valueConnection||_.isNil(t.value)},"Value cannot be updated when it is connected to data"),M.fF.assert(function(){return!l.targetConnection||_.isNil(t.target)},"Target cannot be updated when it is connected to data"),l.hasStatusRules&&(t.status=null),x.label=2;case 2:return x.trys.push([2,9,15,16]),this.loading$.next(this.loading$.value+1),[4,this.pollingService.refreshRollups(l,[t])];case 3:return x.sent(),u=this.scorecard,c?[4,this.goalsHttpService.updateGoalValue(this.scorecard.groupId,this.scorecard.id,n,new Date(t.timestamp).toISOString(),X.getGoalValueUpdateRequest(t),this.scorecard.hierarchyPaths).toPromise()]:[3,5];case 4:return p=x.sent(),this.assertScorecardLoaded(u)?(this.scorecard=(0,b.Uy)(this.scorecard,function(N){var W=X.getGoal(N.goals,n);M.fF.assertValue(W,"Goal not found");var te=_.find(W.goalValues,function(me){return new Date(me.timestamp).getTime()===new Date(p.timestamp).getTime()});M.fF.assertValue(te,"Goal value not found"),Object.assign(te,p)}),[3,7]):[2];case 5:return[4,this.goalsHttpService.createGoalValue(this.scorecard.groupId,this.scorecard.id,n,X.getGoalValueCreateRequest(t),this.scorecard.hierarchyPaths).toPromise()];case 6:if(y=x.sent(),!this.assertScorecardLoaded(u))return[2];this.scorecard=(0,b.Uy)(this.scorecard,function(N){var W=X.getGoal(N.goals,n);M.fF.assertValue(W,"Goal not found"),W.goalValues?W.goalValues.push(y):W.goalValues=[y]}),x.label=7;case 7:return[4,this.refreshGoal(n)];case 8:return x.sent(),[3,16];case 9:if(P=x.sent(),(null===(i=P?.error)||void 0===i?void 0:i.code)!==ae.ManuallyUpdatingConnectedGoalValueNotAllowed&&(null===(a=P?.error)||void 0===a?void 0:a.code)!==ae.ManuallyUpdatingConnectedMetricValueNotAllowed)return[3,10];throw this.errorService.errorNoDefaultAdditionalErrorInfo(this.localizationService.get("Updating_Connected_MetricValue_Not_Allowed"),"Not_Allowed",{title:this.localizationService.get("Operation_Not_Allowed"),level:In.U.Information,isDismissable:!0,showAdditionalErrorInfo:!1}),P;case 10:return c||409!==P?.status?[3,13]:(this.errorService.errorNoDefaultAdditionalErrorInfo(this.localizationService.get("Metrics_Existing_Checkin_Found"),"Checkin_Exists",{title:this.localizationService.get("Metrics_Existing_Checkin_Found_Title"),level:In.U.Information,isDismissable:!0,showAdditionalErrorInfo:!1,hideGetHelpLink:!0}),[4,this.refreshGoal(n)]);case 11:return x.sent(),[4,this.expandGoalValues(n,!0)];case 12:return x.sent(),[3,14];case 13:throw this.goalsErrorService.showUserError(P,"SaveGoalValueError"),P;case 14:return[3,16];case 15:return this.loading$.next(this.loading$.value-1),[7];case 16:return this.commit(),[2]}})})},o.prototype.expandGoalValues=function(n,t){return void 0===t&&(t=!1),(0,S.mG)(this,void 0,void 0,function(){var i,a,l,c;return(0,S.Jh)(this,function(u){switch(u.label){case 0:if(M.fF.assertValue(this.scorecard,"No scorecard loaded"),this.scorecard.isSample)return[2];if(i=X.getGoal(this.scorecard.goals,n),M.fF.assertValue(i,"goal"),!i||i.isExpanded&&!t)return[2];u.label=1;case 1:return u.trys.push([1,3,4,5]),this.loading$.next(this.loading$.value+1),a=this.scorecard,[4,this.goalsHttpService.getGoalValues(this.scorecard.groupId,this.scorecard.id,i.id,!0,this.scorecard.hierarchyPaths).toPromise()];case 2:return l=u.sent(),this.assertScorecardLoaded(a)?(this.scorecard=(0,b.Uy)(this.scorecard,function(p){var y=X.getGoal(p.goals,n);M.fF.assertValue(y,"goal"),y.goalValues=l,y.isExpanded=!0}),this.commit(),[3,5]):[2];case 3:throw c=u.sent(),this.goalsErrorService.showUserError(c,"ExpandGoalValues"),c;case 4:return this.loading$.next(this.loading$.value-1),[7];case 5:return[2]}})})},o.prototype.upsertGoalValues=function(n,t){return(0,S.mG)(this,void 0,void 0,function(){var i,a,l;return(0,S.Jh)(this,function(c){switch(c.label){case 0:if(!this.assertNoActivehierarchy(!0))return[2];i=X.getGoal(this.scorecard.goals,n),M.fF.assertValue(i,"goal"),c.label=1;case 1:return c.trys.push([1,5,6,7]),this.loading$.next(this.loading$.value+1),[4,this.pollingService.refreshRollups(i,t)];case 2:return c.sent(),[4,this.goalsHttpService.upsertGoalValues(this.scorecard.groupId,this.scorecard.id,n,t).toPromise()];case 3:return a=c.sent(),[4,this.refreshGoal(n)];case 4:return c.sent(),this.scorecard=(0,b.Uy)(this.scorecard,function(u){var p=X.getGoal(u.goals,n);p.goalValues=a,p.isExpanded=!0}),this.commit(),[3,7];case 5:throw l=c.sent(),this.goalsErrorService.showUserError(l,"UpsertGoalValues"),l;case 6:return this.loading$.next(this.loading$.value-1),[7];case 7:return[2]}})})},o.prototype.overwriteMultipleGoalValues=function(n,t){var i,a;return(0,S.mG)(this,void 0,void 0,function(){var l,c,u,p,y;return(0,S.Jh)(this,function(P){switch(P.label){case 0:return this.assertNoActivehierarchy(!0)?[4,this.expandGoalValues(n)]:[2];case 1:return P.sent(),c=X.getGoal(this.scorecard.goals,n),u=null!==(a=null===(i=c.goalValues)||void 0===i?void 0:i.filter(function(x){return!_.isNil(x.value)}).map(function(x){return{timestamp:x.timestamp,value:x.value}}))&&void 0!==a?a:[],p=t.map(function(x){return{timestamp:x.timestamp,value:x.value}}),(l=qt.calculateGoalValueChanges(u,p)).length>0?(y=l.map(function(x){return{timestamp:x.timestamp,value:x.value}}),[4,this.upsertGoalValues(n,y)]):[3,3];case 2:P.sent(),P.label=3;case 3:return[2]}})})},o.prototype.overwriteGoalTargets=function(n,t){var i,a;return(0,S.mG)(this,void 0,void 0,function(){var l,c,u,p,y;return(0,S.Jh)(this,function(P){switch(P.label){case 0:return this.assertNoActivehierarchy(!0)?[4,this.expandGoalValues(n)]:[2];case 1:return P.sent(),l=X.getGoal(this.scorecard.goals,n),c=null!==(a=null===(i=l.goalValues)||void 0===i?void 0:i.filter(function(x){return!_.isNil(x.target)}).map(function(x){return{timestamp:x.timestamp,value:x.target}}))&&void 0!==a?a:[],u=t.map(function(x){return{timestamp:x.timestamp,value:x.target}}),(p=qt.calculateGoalValueChanges(c,u)).length>0?(y=p.map(function(x){return{timestamp:x.timestamp,target:x.value}}),[4,this.upsertGoalValues(n,y)]):[3,3];case 2:P.sent(),P.label=3;case 3:return[2]}})})},o.prototype.followGoal=function(n){return(0,S.mG)(this,void 0,void 0,function(){var t;return(0,S.Jh)(this,function(i){switch(i.label){case 0:if(!this.assertNoActivehierarchy(!0))return[2];if(X.isSampleScorecard(this.scorecard))return[2];M.fF.assertValue(this.scorecard,"No scorecard loaded"),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.goalsHttpService.followGoal(this.scorecard.groupId,this.scorecard.id,n).toPromise()];case 2:return i.sent(),this.scorecard=(0,b.Uy)(this.scorecard,function(a){var l=X.getGoal(a.goals,n);M.fF.assertValue(l,"Goal not found"),l.isFollowed=!0}),this.commit(),[3,4];case 3:throw t=i.sent(),this.goalsErrorService.showUserError(t,"Follow Metric Error"),t;case 4:return[2]}})})},o.prototype.unfollowGoal=function(n){return(0,S.mG)(this,void 0,void 0,function(){var t;return(0,S.Jh)(this,function(i){switch(i.label){case 0:if(!this.assertNoActivehierarchy(!0))return[2];if(X.isSampleScorecard(this.scorecard))return[2];M.fF.assertValue(this.scorecard,"No scorecard loaded"),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.goalsHttpService.unfollowGoal(this.scorecard.groupId,this.scorecard.id,n).toPromise()];case 2:return i.sent(),this.scorecard=(0,b.Uy)(this.scorecard,function(a){var l=X.getGoal(a.goals,n);M.fF.assertValue(l,"Goal not found"),l.isFollowed=!1}),this.commit(),[3,4];case 3:throw t=i.sent(),this.goalsErrorService.showUserError(t,"Unfollow Metric Error"),t;case 4:return[2]}})})},o.prototype.editNote=function(n,t,i,a){return(0,S.mG)(this,void 0,void 0,function(){var l,c,u;return(0,S.Jh)(this,function(p){switch(p.label){case 0:M.fF.assertValue(this.scorecard,"No scorecard loaded"),p.label=1;case 1:return p.trys.push([1,3,,4]),l=this.scorecard,[4,this.goalsHttpService.editNote(this.scorecard.groupId,this.scorecard.id,n,i,t,a,this.scorecard.hierarchyPaths).toPromise()];case 2:return c=p.sent(),this.assertScorecardLoaded(l)?(this.scorecard=(0,b.Uy)(this.scorecard,function(y){var P=X.getGoal(y.goals,n);M.fF.assertValue(P,"Goal not found");var x=_.find(P.goalValues,function(W){return new Date(W.timestamp).getTime()===new Date(t).getTime()});if(M.fF.assertValue(x,"Goal value not found"),!_.isEmpty(x)){var N=x.notes.findIndex(function(W){return W.id===i});M.fF.assertValue(x.notes,"Goal note not found"),x.notes[N]=c}}),this.commit(),[3,4]):[2];case 3:throw u=p.sent(),this.goalsErrorService.showUserError(u,"EditGoalNoteError"),u;case 4:return[2]}})})},o.prototype.insertNote=function(n,t,i){return(0,S.mG)(this,void 0,void 0,function(){var a,l,c;return(0,S.Jh)(this,function(u){switch(u.label){case 0:M.fF.assertValue(this.scorecard,"No scorecard loaded"),u.label=1;case 1:return u.trys.push([1,3,,4]),a=this.scorecard,[4,this.goalsHttpService.insertNote(this.scorecard.groupId,this.scorecard.id,n,t,i,this.scorecard.hierarchyPaths).toPromise()];case 2:return l=u.sent(),this.assertScorecardLoaded(a)?(this.scorecard=(0,b.Uy)(this.scorecard,function(p){var y=X.getGoal(p.goals,n);M.fF.assertValue(y,"Goal not found");var P=_.find(y.goalValues,function(x){return new Date(x.timestamp).getTime()===new Date(t).getTime()});M.fF.assertValue(P,"Goal value not found"),y.notesCount=_.isFinite(y.notesCount)?y.notesCount+1:1,P.notes=(0,S.ev)((0,S.ev)([],P.notes||[],!0),[l],!1)}),this.commit(),[3,4]):[2];case 3:throw c=u.sent(),this.goalsErrorService.showUserError(c,"InsertGoalNoteError"),c;case 4:return[2]}})})},o.prototype.getGoal=function(n){return M.fF.assertValue(this.scorecard,"No scorecard loaded"),this._scorecard$.pipe((0,xe.U)(function(t){return X.getGoal(t.goals,n)}),(0,V.x)())},o.prototype.getGoals=function(){return M.fF.assertValue(this.scorecard,"No scorecard loaded"),this._scorecard$.pipe((0,xe.U)(function(n){return n.goals}))},o.prototype.getActiveGoal=function(){var n=this;return this._activeGoalId$.pipe((0,Kt.w)(function(t){return t?n.getGoal(t):(0,re.of)(void 0)}))},o.prototype.getActiveGoalId=function(){return this._activeGoalId$},o.prototype.deleteNote=function(n){var t=this;return this.promptUserConfirmation({title:this.localizationService.get("ScorecardDialog_Delete_Note_Title"),message:this.localizationService.get("ScorecardDialog_Action_Cant_be_Undone"),panelClass:["updateDeleteNoteConfirmationDialogPanel"],onConfirmation:function(){return(0,S.mG)(t,void 0,void 0,function(){return(0,S.Jh)(this,function(a){switch(a.label){case 0:return[4,this.deleteNoteRequest(n)];case 1:return a.sent(),[2,!0]}})})}})},o.prototype.deleteNoteRequest=function(n){return(0,S.mG)(this,void 0,void 0,function(){var t,i;return(0,S.Jh)(this,function(a){switch(a.label){case 0:M.fF.assertValue(this.scorecard,"No scorecard loaded"),t=this.scorecard,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.goalsHttpService.deleteNote(this.scorecard.groupId,this.scorecard.id,n.goalId,n.id,n.valueTimestamp,this.scorecard.hierarchyPaths).toPromise()];case 2:return a.sent(),[3,4];case 3:if(i=a.sent(),404!==i?.status)throw this.goalsErrorService.showUserError(i,"DeleteGoalNoteError"),i;return[3,4];case 4:return this.assertScorecardLoaded(t)?(this.scorecard=(0,b.Uy)(this.scorecard,function(l){var c=X.getGoal(l.goals,n.goalId);if(M.fF.assertValue(c,"Goal not found"),!_.isEmpty(c.goalValues)){var u=_.find(c.goalValues,function(p){return new Date(p.timestamp).getTime()===new Date(n.valueTimestamp).getTime()});u.notes=_.filter(u.notes,function(p){return p.id!==n.id})}c.notesCount=null==c.notesCount?0:c.notesCount-1}),this.commit(),[2]):[2]}})})},o.prototype.deleteGoal=function(n){return(0,S.mG)(this,void 0,void 0,function(){var t,i,a,l,c=this;return(0,S.Jh)(this,function(u){switch(u.label){case 0:return this.assertNoActivehierarchy()?[4,this.getGoal(n).pipe((0,ue.q)(1)).toPromise()]:[2];case 1:return t=u.sent(),i=!_.isEmpty(t.subGoals),a=this.localizationService.get(t.isLinked?i?"ScorecardDialog_Delete_Metric_Title_Linked":"ScorecardDialog_Delete_Metric_Title_Linked_Submetrics":i?"ScorecardDialog_Delete_Metric_Title":"ScorecardDialog_Delete_Metric_Title_Submetrics"),l=t.isLinked?this.localizationService.get("ScorecardDialog_Delete_Metric_Message_Linked")+(i?this.localizationService.get("ScorecardDialog_Delete_Metric_Message_Linked_Submetrics"):""):this.localizationService.get("ScorecardDialog_Delete_Metric_Message_First_Line"),[2,this.promptUserConfirmation({title:a,message:l,panelClass:["updateConfirmationDialogPanel"],onConfirmation:function(){return(0,S.mG)(c,void 0,void 0,function(){return(0,S.Jh)(this,function(y){switch(y.label){case 0:return[4,this.pollingService.refreshRollupsAfterGoalDelete(t)];case 1:return y.sent(),[4,this.deleteGoalRequest(n)];case 2:return y.sent(),[2,!0]}})})}})]}})})},o.prototype.applySortAndFilter=function(n,t){return(0,S.mG)(this,void 0,void 0,function(){var i=this;return(0,S.Jh)(this,function(a){switch(a.label){case 0:return this.scorecard?[4,this.ensureUsersLoaded()]:[2];case 1:return a.sent(),this.scorecard=(0,b.Uy)(this.scorecard,function(l){l.goals=Ke.sortAndFilter(l.goals,n,i._goalStatusesByScorecardId$.value,t)}),this.commit(),[2]}})})},o.prototype.deleteGoalRequest=function(n){return(0,S.mG)(this,void 0,void 0,function(){var t,i;return(0,S.Jh)(this,function(a){switch(a.label){case 0:if(!this.assertNoActivehierarchy())return[2];if(M.fF.assertValue(this.scorecard,"No scorecard loaded"),t=X.getGoal(this.scorecard.goals,n),M.fF.assertValue(t,"Goal not found"),t.isNew)return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),this.setGoalState(n,"Deleting"),[4,this.goalsHttpService.deleteGoal(this.scorecard.groupId,this.scorecard.id,t.id).toPromise()];case 2:return a.sent(),[3,4];case 3:if(i=a.sent(),404!==i?.status)throw this.goalsErrorService.showUserError(i,"DeleteGoalError"),this.setGoalState(n,"Consumption"),i;return[3,4];case 4:return this.scorecard=(0,b.Uy)(this.scorecard,function(l){var c=X.getGoal(l.goals,t.parentId);c?.subGoals?c.subGoals=c.subGoals.filter(function(u){return u.id!==n}):l.goals&&(l.goals=l.goals.filter(function(u){return u.id!==n}))}),this.commit(),[2]}})})},o.prototype.deleteGoalValue=function(n){var t=this;return this.promptUserConfirmation({title:this.localizationService.get("ScorecardDialog_Delete_CheckIn_Message_title"),message:"".concat(this.localizationService.get("ScorecardDialog_Delete_CheckIn_Message_First_Line"),"\n\n            ").concat(this.localizationService.get("ScorecardDialog_Action_Cant_be_Undone")),panelClass:["updateDeleteCheckInConfirmationDialogPanel"],onConfirmation:function(){return(0,S.mG)(t,void 0,void 0,function(){var a;return(0,S.Jh)(this,function(l){switch(l.label){case 0:return[4,this.getGoal(n.goalId).pipe((0,ue.q)(1)).toPromise()];case 1:return a=l.sent(),[4,this.pollingService.refreshRollupsAfterGoalValueDelete(a,n)];case 2:return l.sent(),[4,this.deleteGoalValueRequest(n)];case 3:return l.sent(),[2,!0]}})})}})},o.prototype.deleteGoalValueRequest=function(n){return(0,S.mG)(this,void 0,void 0,function(){var t,i;return(0,S.Jh)(this,function(a){switch(a.label){case 0:M.fF.assertValue(this.scorecard,"No scorecard loaded"),t=this.scorecard,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.goalsHttpService.deleteGoalValue(this.scorecard.groupId,this.scorecard.id,n.goalId,n.timestamp,this.scorecard.hierarchyPaths).toPromise()];case 2:return a.sent(),[3,4];case 3:if(i=a.sent(),404!==i?.status)throw this.goalsErrorService.showUserError(i,"DeleteGoalValueError"),i;return[3,4];case 4:return this.assertScorecardLoaded(t)?(this.scorecard=(0,b.Uy)(this.scorecard,function(l){var c=X.getGoal(l.goals,n.goalId);M.fF.assertValue(c,"Goal not found"),c.goalValues=_.filter(c.goalValues,function(u){return u.timestamp!==n.timestamp})}),[4,this.refreshGoal(n.goalId)]):[2];case 5:return a.sent(),this.commit(),[2]}})})},o.prototype.updateGoalQueryConnection=function(n,t,i){return(0,S.mG)(this,void 0,void 0,function(){var a,c,u,p=this;return(0,S.Jh)(this,function(y){switch(y.label){case 0:if(M.fF.assertValue(this.scorecard,"No scorecard loaded"),a=X.getGoal(this.scorecard.goals,n),M.fF.assertValue(a,"goal"),X.compareGoalQueryConnections(1===t?a.valueConnection:a.targetConnection,i))return[2];if(!this.assertNoActivehierarchy())return[2];y.label=1;case 1:return y.trys.push([1,4,,5]),[4,this.pollingService.startPollingAsync(a,t,{refreshGoal:!0,refreshGoalValues:!0,refreshRollups:!0})];case 2:return y.sent(),[4,this.goalsHttpService.updateGoalQueryConnection(this.scorecard.groupId,this.scorecard.id,n,t,(0,S.pi)((0,S.pi)({},i),{userId:this.userInfo.uoid})).toPromise()];case 3:return c=y.sent(),this.scorecard=(0,b.Uy)(this.scorecard,function(P){a=X.getGoal(P.goals,n),p.assignGoal(a,c)}),this.commit(),[3,5];case 4:throw u=y.sent(),this.goalsErrorService.showUserError(u,"UpdateGoalQueryConnectionError"),u;case 5:return[2]}})})},o.prototype.deleteGoalQueryConnection=function(n,t){return(0,S.mG)(this,void 0,void 0,function(){var i=this;return(0,S.Jh)(this,function(a){return this.assertNoActivehierarchy()?[2,this.promptUserConfirmation({title:this.localizationService.get("ScorecardDialog_Delete_Metric_Query_Connection_Title"),message:"".concat(this.localizationService.format("ScorecardDialog_Delete_Metric_Query_Connection_Message_Line_1",[this.localizationService.get(1===t?"CurrentValue":"Target")]),"\n\n            ").concat(this.localizationService.get("ScorecardDialog_Action_Cant_be_Undone")),onConfirmation:function(){return(0,S.mG)(i,void 0,void 0,function(){var c,u,p=this;return(0,S.Jh)(this,function(y){switch(y.label){case 0:M.fF.assertValue(this.scorecard,"No scorecard loaded"),y.label=1;case 1:return y.trys.push([1,5,,6]),[4,this.goalsHttpService.deleteGoalQueryConnection(this.scorecard.groupId,this.scorecard.id,n,t).toPromise()];case 2:return c=y.sent(),this.scorecard=(0,b.Uy)(this.scorecard,function(P){var x=X.getGoal(P.goals,n);if(!x)throw"Goal not found";x.valueConnection=c.valueConnection,x.targetConnection=c.targetConnection,p.assignGoal(x,c)}),[4,this.refreshGoal(n)];case 3:return y.sent(),[4,this.expandGoalValues(n)];case 4:return y.sent(),this.commit(),[3,6];case 5:throw u=y.sent(),this.goalsErrorService.showUserError(u,"DeleteGoalQueryConnectionError"),u;case 6:return[2,!0]}})})}})]:[2]})})},o.prototype.takeOverGoalQueryConnection=function(n,t){return(0,S.mG)(this,void 0,void 0,function(){var i=this;return(0,S.Jh)(this,function(a){return this.assertNoActivehierarchy()?[2,this.promptUserConfirmation({title:this.localizationService.get("MetricsDetailsPane_ConnectionsTab_TakeOver_Confirmation_Title"),message:this.localizationService.get("MetricsDetailsPane_ConnectionsTab_TakeOver_Confirmation"),okButtonText:this.localizationService.get("MetricsDetailsPane_ConnectionsTab_TakeOver"),onConfirmation:function(){return(0,S.mG)(i,void 0,void 0,function(){var c,u,p=this;return(0,S.Jh)(this,function(y){switch(y.label){case 0:M.fF.assertValue(this.scorecard,"No scorecard loaded"),y.label=1;case 1:return y.trys.push([1,3,,4]),[4,this.goalsHttpService.takeOverGoalQueryConnection(this.scorecard.groupId,this.scorecard.id,n,t).toPromise()];case 2:return c=y.sent(),this.scorecard=(0,b.Uy)(this.scorecard,function(P){var x=X.getGoal(P.goals,n);p.assignGoal(x,c)}),this.commit(),[3,4];case 3:if(u=y.sent(),400!==u?.status)throw this.goalsErrorService.showUserError(u,"TakeOverGoalQueryConnectionError"),u;return this.errorService.errorNoDefaultAdditionalErrorInfo(this.localizationService.get("MetricsDetailsPane_ConnectionsTab_TakeOver_Error"),"TakeOverGoalQueryConnectionError",{title:this.localizationService.get("MetricsDetailsPane_ConnectionsTab_TakeOver_Error_Title"),level:In.U.Information}),[3,4];case 4:return[2]}})})}})]:[2]})})},o.prototype.getRefreshHistory=function(n){var t;return(0,S.mG)(this,void 0,void 0,function(){var a;return(0,S.Jh)(this,function(l){switch(l.label){case 0:if(M.fF.assertValue(this.scorecard,"No scorecard loaded"),this.scorecard.isSample)return[2,[]];if(!X.getGoal(null===(t=this.scorecard)||void 0===t?void 0:t.goals,n))return M.fF.assertFail("goal"),[2];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,this.goalsHttpService.getRefreshHistory(this.scorecard.groupId,this.scorecard.id,n).toPromise()];case 2:return[2,l.sent()];case 3:throw a=l.sent(),this.goalsErrorService.showUserError(a,"GetRefreshHistoryError"),a;case 4:return[2]}})})},o.prototype.refreshGoalValue=function(n,t){var i;return(0,S.mG)(this,void 0,void 0,function(){var a,l;return(0,S.Jh)(this,function(c){switch(c.label){case 0:if(M.fF.assertValue(this.scorecard,"No scorecard loaded"),!(a=X.getGoal(null===(i=this.scorecard)||void 0===i?void 0:i.goals,n)))return M.fF.assertFail("goal"),[2];if(1===t&&!a.valueConnection||2===t&&!a.targetConnection)return[2];c.label=1;case 1:return c.trys.push([1,4,,5]),[4,this.pollingService.startPollingAsync(a,t,{refreshGoal:!0,refreshGoalValues:!0,refreshRollups:!0})];case 2:return c.sent(),[4,this.goalsHttpService.refreshGoalValue(this.scorecard.groupId,this.scorecard.id,n,t).toPromise()];case 3:return c.sent(),this.showRefreshConfirmation(),[3,5];case 4:if(l=c.sent(),429===l?.status)return this.goalsErrorService.showThrottlingError(),this.setGoalRefreshState(n,t,!1),[2];throw this.goalsErrorService.showUserError(l,"RefreshGoalValue"),l;case 5:return[2]}})})},o.prototype.upsertGoalValueRollup=function(n,t,i){return(0,S.mG)(this,void 0,void 0,function(){var a,l,c,u,y,P=this;return(0,S.Jh)(this,function(x){switch(x.label){case 0:if(!this.assertNoActivehierarchy())return[2];M.fF.assertValue(this.scorecard,"No scorecard loaded"),a=X.getGoal(this.scorecard.goals,n),M.fF.assertValue(a,"goal"),x.label=1;case 1:return x.trys.push([1,10,,11]),c=void 0,u=Le.E.getCurrentLocalDay(),_.isEmpty(a.subGoals)?[3,3]:[4,this.pollingService.startPollingAsync(a,t,{refreshGoal:!0,refreshGoalValues:!0,refreshRollups:!0})];case 2:x.sent(),x.label=3;case 3:switch(c=$e.r.hasHistoricalGoalValue(a.goalValues,t)?{rollupType:i,startDate:u.toISOString()}:{rollupType:i},t){case 1:return[3,4];case 2:return[3,6]}return[3,8];case 4:return[4,this.goalsHttpService.upsertGoalCurrentValueRollup(this.scorecard.groupId,this.scorecard.id,n,c).toPromise()];case 5:return l=x.sent(),[3,9];case 6:return[4,this.goalsHttpService.upsertGoalTargetValueRollup(this.scorecard.groupId,this.scorecard.id,n,c).toPromise()];case 7:return l=x.sent(),[3,9];case 8:M.fF.assertNever(t),x.label=9;case 9:return this.scorecard=(0,b.Uy)(this.scorecard,function(N){a=X.getGoal(N.goals,n),P.assignGoal(a,l)}),this.commit(),[3,11];case 10:throw y=x.sent(),this.goalsErrorService.showUserError(y,"upsertGoalValueRollupError"),y;case 11:return[2]}})})},o.prototype.deleteGoalValueRollup=function(n,t){return(0,S.mG)(this,void 0,void 0,function(){var i,a,c,u=this;return(0,S.Jh)(this,function(p){switch(p.label){case 0:if(!this.assertNoActivehierarchy())return[2];M.fF.assertValue(this.scorecard,"No scorecard loaded"),i=X.getGoal(this.scorecard.goals,n),M.fF.assertValue(i,"goal"),p.label=1;case 1:switch(p.trys.push([1,8,,9]),t){case 1:return[3,2];case 2:return[3,4]}return[3,6];case 2:return[4,this.goalsHttpService.deleteGoalCurrentValueRollup(this.scorecard.groupId,this.scorecard.id,n).toPromise()];case 3:return a=p.sent(),[3,7];case 4:return[4,this.goalsHttpService.deleteGoalTargetValueRollup(this.scorecard.groupId,this.scorecard.id,n).toPromise()];case 5:return a=p.sent(),[3,7];case 6:M.fF.assertNever(t),p.label=7;case 7:return this.scorecard=(0,b.Uy)(this.scorecard,function(y){(i=X.getGoal(y.goals,n)).valueRollup=a.valueRollup,i.targetRollup=a.targetRollup,u.assignGoal(i,a)}),this.commit(),[3,9];case 8:throw c=p.sent(),this.goalsErrorService.showUserError(c,"deleteGoalValueRollupError"),c;case 9:return[2]}})})},o.prototype.getStatusRules=function(n){var t;return(0,S.mG)(this,void 0,void 0,function(){var i,a;return(0,S.Jh)(this,function(l){switch(l.label){case 0:if(M.fF.assertValue(this.scorecard,"No scorecard loaded"),this.scorecard.isSample)return[2,null];if(!(i=X.getGoal(null===(t=this.scorecard)||void 0===t?void 0:t.goals,n)))return M.fF.assertFail("goal"),[2];if(!i.hasStatusRules)return[2,null];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,this.goalsHttpService.getGoalStatusRules(this.scorecard.groupId,this.scorecard.id,n).toPromise()];case 2:return[2,l.sent()];case 3:throw a=l.sent(),this.goalsErrorService.showUserError(a,"GetStatusRulesError"),a;case 4:return[2]}})})},o.prototype.saveStatusRules=function(n,t){var i,a,l,c;return(0,S.mG)(this,void 0,void 0,function(){var u,p,y,P;return(0,S.Jh)(this,function(x){switch(x.label){case 0:return this.assertNoActivehierarchy()?(M.fF.assertValue(this.scorecard,"No scorecard loaded"),(u=X.getGoal(null===(i=this.scorecard)||void 0===i?void 0:i.goals,n))?!t||_.isEmpty(t.rules)?u.hasStatusRules?[4,this.goalsHttpService.deleteGoalStatusRules(this.scorecard.groupId,this.scorecard.id,n).toPromise()]:[3,4]:[3,5]:(M.fF.assertFail("goal"),[2])):[2,t];case 1:return x.sent(),this.scorecard=(0,b.Uy)(this.scorecard,function(N){(u=X.getGoal(N.goals,n)).hasStatusRules=!1}),this.commit(),[4,this.refreshGoal(n)];case 2:return x.sent(),[4,this.expandGoalValues(n,!0)];case 3:x.sent(),x.label=4;case 4:return[2];case 5:return x.trys.push([5,9,,10]),p=X.getGoalStatusRulesUpdateRequest(t),[4,this.goalsHttpService.upsertGoalStatusRules(this.scorecard.groupId,this.scorecard.id,n,p).toPromise()];case 6:return y=x.sent(),this.scorecard=(0,b.Uy)(this.scorecard,function(N){(u=X.getGoal(N.goals,n)).hasStatusRules=!0}),this.commit(),[4,this.refreshGoal(n)];case 7:return x.sent(),[4,this.expandGoalValues(n,!0)];case 8:return x.sent(),[2,y];case 9:throw P=x.sent(),400===P?.status?this.errorService.errorNoDefaultAdditionalErrorInfo(this.localizationService.get("MetricsDetailsPane_StatusRulesTab_SaveRulesError_Description"),"GetStatusRulesError",{title:this.localizationService.get("MetricsDetailsPane_StatusRulesTab_SaveRulesError"),level:In.U.Information,isDismissable:!0,showAdditionalErrorInfo:!0,errorDetails:null===(c=null===(l=null===(a=P?.error)||void 0===a?void 0:a.details)||void 0===l?void 0:l[0])||void 0===c?void 0:c.message}):this.goalsErrorService.showUserError(P,"GetStatusRulesError"),P;case 10:return[2]}})})},o.prototype.loadPrefetchedScorecard=function(n){return this.setScorecardWithGoals(n),this._scorecard$.asObservable()},o.prototype.addGoal=function(){var n=this;if(this.assertNoActivehierarchy()){M.fF.assertValue(this.scorecard,"No scorecard loaded"),M.fF.assert(function(){return n.userHasWritePermissions()},"has write permissions");var t=X.getCurrentUser(),i=X.createNewGoal(t,this.scorecard.id);return this.scorecard=(0,b.Uy)(this.scorecard,function(a){if(a.goals?a.goals.push(i):a.goals=[i],-1!==a.goals.findIndex(function(u){return!_.isNil(u.rank)})){var c=0;a.goals.forEach(function(u){u.rank=c,c++})}}),this.commit(),i.id}},o.prototype.addSubGoal=function(n,t){var i=this;void 0===t&&(t=!0),this.assertNoActivehierarchy()&&(M.fF.assertValue(this.scorecard,"No scorecard loaded"),this.scorecard=(0,b.Uy)(this.scorecard,function(a){var l=X.getGoal(a.goals,n);M.fF.assertValue(l,"Parent goal not found");var c=X.getCurrentUser(),u=X.createNewGoal(c,i.scorecard.id,l.id);if(l.subGoals?l.subGoals.push(u):l.subGoals=[u],t&&(a.activeGoalId=void 0,a.selectedGoalIds={}),!_.isNil(l.rank)||-1!==l.subGoals.findIndex(function(P){return!_.isNil(P.rank)})){var y=0;l.subGoals.forEach(function(P){P.rank=y,y++})}}),this.commit())},o.prototype.updateScorecard=function(n){return(0,S.mG)(this,void 0,void 0,function(){var t,i,a,l=this;return(0,S.Jh)(this,function(c){switch(c.label){case 0:return c.trys.push([0,4,,5]),t=void 0!==n.localTimeZoneId&&n.localTimeZoneId!==this.scorecard.localTimeZoneId,[4,this.goalsHttpService.updateScorecard(this.scorecard.groupId,this.scorecard.id,n).toPromise()];case 1:return i=c.sent(),n.name&&this.store.select(ei.iF).pipe((0,ue.q)(1)).subscribe(function(u){l.tabFacade.updateTab(u===l.scorecard.groupId?{id:"me##"+l.scorecard.id,title:n.name}:{id:l.scorecard.groupId+"##"+l.scorecard.id,title:n.name})}),this.scorecard=(0,b.Uy)(this.scorecard,function(u){for(var y=0,P=_.keys(n);y<P.length;y++){var x=P[y];u[x]=i[x]}}),this.commit(),t?[4,this.loadScorecard(this.scorecard.groupId,this.scorecard.id,!1,this.scorecard.hierarchyPaths)]:[3,3];case 2:c.sent(),c.label=3;case 3:return[3,5];case 4:throw a=c.sent(),this.goalsErrorService.showUserError(a,"UpdateScorecardError"),a;case 5:return[2]}})})},o.prototype.setGoalState=function(n,t){M.fF.assertValue(this.scorecard,"No scorecard loaded"),this.scorecard=(0,b.Uy)(this.scorecard,function(i){var a=X.getGoal(i.goals,n);M.fF.assertValue(a,"Goal not found"),a.state=t,("Editing"===a.state||"Deleting"===a.state)&&(i.selectedGoalIds[a.id]||i.activeGoalId===a.id)&&(i.activeGoalId=void 0,"Deleting"===a.state&&delete i.selectedGoalIds[a.id])}),this.commit()},o.prototype.cancelEditing=function(n){M.fF.assertValue(this.scorecard,"No scorecard loaded");var t=X.getGoal(this.scorecard.goals,n);M.fF.assertValue(t,"Goal not found"),t.isNew?this.deleteGoalRequest(n):this.setGoalState(n,"Consumption")},o.prototype.setViewType=function(n,t){var i=this;n!==this.viewType&&(X.isEditing(this.scorecard)&&!t?this.promptUserConfirmation({title:this.localizationService.get("MetricsUnsavedChangesTitle"),message:this.localizationService.get("MetricsUnsavedChangesDescription_SwitchView"),okButtonText:this.localizationService.get("ModalDialogButtonText_Continue"),panelClass:["updateConfirmationDialogPanel"],onConfirmation:function(){return(0,S.mG)(i,void 0,void 0,function(){var c=this;return(0,S.Jh)(this,function(u){return X.filterGoals(this.scorecard.goals,function(p){return!!p.isNew||"Editing"===p.state}).forEach(function(p){return c.cancelEditing(p.id)}),this.setViewType(n,!0),[2]})})}}):(this.telemetryService.logEvent(Oi,{viewType:n}),"Heatmap"===n&&this.setActiveHierarchy(void 0),this._viewType$.next(n)))},Object.defineProperty(o.prototype,"viewType",{get:function(){return this._viewType$.value},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"viewType$",{get:function(){return this._viewType$},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"scorecardSelectionMode",{get:function(){return this._scorecardSelectionMode$.value},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"scorecardSelectionMode$",{get:function(){return this._scorecardSelectionMode$},enumerable:!1,configurable:!0}),o.prototype.setEditMode=function(n){this.isEditMode$.next(n),!n&&this.scorecard&&_.some(this.scorecard.goals)&&(this.scorecard=(0,b.Uy)(this.scorecard,function(t){(function a(l,c){for(var u,p=function(W){W.isNew&&(l?l.subGoals=l.subGoals.filter(function(te){return te.id!==W.id}):t.goals=t.goals.filter(function(te){return te.id!==W.id})),W.state="Consumption",(null===(u=W.subGoals)||void 0===u?void 0:u.length)>0&&a(W,W.subGoals)},y=0,P=c;y<P.length;y++)p(P[y])})(null,t.goals),t.activeGoalId=void 0,t.selectedGoalIds={}}),this.commit())},o.prototype.isEditMode=function(){return this.isEditMode$.asObservable()},o.prototype.isLoading=function(){return this.loading$.pipe((0,xe.U)(function(n){return n>0}))},o.prototype.getColumnSettings=function(){return this._scorecard$.pipe((0,xe.U)(function(n){return n.columnSettings}))},o.prototype.setGoalRefreshState=function(n,t,i){this.scorecard=(0,b.Uy)(this.scorecard,function(a){var l=X.getGoal(a.goals,n);switch(t){case 1:l.currentRefreshInProgress=i;break;case 2:l.targetRefreshInProgress=i;break;default:M.fF.assertNever(t)}}),this.commit()},o.prototype.fetchUserDetails=function(n){return(0,S.mG)(this,void 0,void 0,function(){var t;return(0,S.Jh)(this,function(i){return t=_.chain(n).map(function(a){return _.concat(_.map(a.additionalOwners,function(l){var c;return null!==(c=l?.userPrincipalName)&&void 0!==c?c:l?.aadAppId}),a.owner)}).flattenDeep().filter(function(a){return!!a}).uniq().value(),[2,this.userDetailsService.getUserDetails(t).toPromise()]})})},o.prototype.populateUserDisplayNames=function(n,t){if(!_.isEmpty(n)&&!_.isEmpty(t)){for(var i={},a=0,l=n;a<l.length;a++){var c=l[a];i[c.userPrincipalName]=c,i[c.aadAppId]=c}for(var u=0,p=t;u<p.length;u++){var y=p[u],P=_.concat([y.owner],_.map(y.additionalOwners,function(x){var N;return null!==(N=x?.userPrincipalName)&&void 0!==N?N:x?.aadAppId}));y.ownerDisplayNames=_.map(P,function(x){return i[x]?i[x].displayName:x})}}},o.prototype.toggleSelectedGoal=function(n,t,i){var a=this;return void 0===t&&(t=!0),void 0===i&&(i=!1),M.fF.assertValue(this.scorecard,"No scorecard loaded"),this.scorecard=(0,b.Uy)(this.scorecard,function(l){var c,u=X.getGoal(l.goals,n);M.fF.assertValue(u,"Goal not found"),!u.isNew&&(l.activeGoalId=void 0,a.numberOfSelectedGoals()>1||i?(i||(t&&(l.activeGoalId=n),l.selectedGoalIds={}),l.selectedGoalIds[n]||"Deleting"===u.state?delete l.selectedGoalIds[n]:l.selectedGoalIds[n]=!0):l.selectedGoalIds[n]||"Deleting"===u.state?l.selectedGoalIds={}:(t&&(l.activeGoalId=n),l.selectedGoalIds=((c={})[n]=!0,c)))}),this.commit(),this.scorecard.selectedGoalIds[n]},o.prototype.setActiveGoal=function(n){M.fF.assertValue(this.scorecard,"No scorecard loaded"),this.scorecard=(0,b.Uy)(this.scorecard,function(t){t.activeGoalId=n}),this.commit()},o.prototype.selectGoal=function(n,t){void 0===t&&(t=!0),M.fF.assertValue(this.scorecard,"No scorecard loaded");var i=X.getGoal(this.scorecard.goals,n);M.fF.assertValue(i,"Goal not found"),!i.isNew&&!this.scorecard.selectedGoalIds[n]&&"Deleting"!==i.state&&(this.scorecard=(0,b.Uy)(this.scorecard,function(a){var l;t&&(a.activeGoalId=n),a.selectedGoalIds=((l={})[n]=!0,l)}),this.commit())},o.prototype.multiSelectGoal=function(n){M.fF.assertValue(this.scorecard,"No scorecard loaded");var t=X.getGoal(this.scorecard.goals,n);M.fF.assertValue(t,"Goal not found"),!t.isNew&&this.scorecard.selectedGoalIds[n]&&"Deleting"!==t.state&&(this.scorecard=(0,b.Uy)(this.scorecard,function(i){i.selectedGoalIds[n]=!0}),this.commit())},o.prototype.toggleSelectAllGoals=function(){var n=this;M.fF.assertValue(this.scorecard,"No scorecard loaded"),this.scorecard=(0,b.Uy)(this.scorecard,function(t){t.selectedGoalIds={};var i=X.filterGoals(t.goals,function(u){return!u.isNew&&(!n.scorecardHost||n.scorecardHost.canSelectGoal(u).enabled)});if(i.length!==n.numberOfSelectedGoals())for(var a=0,l=i;a<l.length;a++)t.selectedGoalIds[l[a].id]=!0}),this.commit()},o.prototype.unselectAllGoals=function(){M.fF.assertValue(this.scorecard,"No scorecard loaded"),this.scorecard=(0,b.Uy)(this.scorecard,function(n){n.activeGoalId=void 0,n.selectedGoalIds={}}),this.commit()},o.prototype.getSelectedGoalIdsObservable=function(){return this._selectedGoalIds$},o.prototype.getSelectedGoalsObservable=function(){var n=this;return this._selectedGoalIds$.pipe((0,xe.U)(function(t){return X.filterGoals(n.scorecard.goals,function(a){return t[a.id]&&!a.isNew})}))},o.prototype.getFirstSelectedGoalId=function(){if(this.numberOfSelectedGoals()>0)return Object.keys(this.scorecard.selectedGoalIds)[0]},o.prototype.numberOfSelectedGoals=function(){return _.isNil(this.scorecard.selectedGoalIds)?0:Object.keys(this.scorecard.selectedGoalIds).length},o.prototype.isCurrentlyInEditMode=function(){return this.isEditMode$.value},o.prototype.getCurrentScorecard=function(){return this.scorecard},o.prototype.getScorecard=function(){return this._scorecard$.asObservable()},o.prototype.flatten=function(){return X.flattenGoals(this.scorecard.goals)},o.prototype.getBoard=function(){return this._scorecard$.pipe((0,xe.U)(function(n){return n.board}))},o.prototype.addGroupToBoard=function(n,t){var i={id:n,name:t,goals:[]};this.scorecard=(0,b.Uy)(this.scorecard,function(a){_.isUndefined(a.board)&&(a.board={id:"",groups:[]}),a.board.id="boardVisual",a.board.groups.push(i)}),this.commit()},o.prototype.deleteGroupFromBoard=function(n){this.scorecard=(0,b.Uy)(this.scorecard,function(t){t.board.groups=t.board.groups.filter(function(i){return i.id!==n})}),this.commit()},o.prototype.isEditing=function(){return this._scorecard$.pipe((0,xe.U)(function(n){return X.isEditing(n)}))},o.prototype.ensureRolesLoaded=function(){return(0,S.mG)(this,void 0,void 0,function(){var n,t;return(0,S.Jh)(this,function(i){switch(i.label){case 0:if(M.fF.assertValue(this.scorecard,"No scorecard loaded"),!_.isEmpty(this.scorecard.roles))return[2];i.label=1;case 1:return i.trys.push([1,6,,7]),[4,this.goalsHttpService.getRoles(this.scorecard.groupId,this.scorecard.id).toPromise()];case 2:return n=i.sent(),_.isEmpty(n)?[4,this.initStartingRoles()]:[3,4];case 3:return i.sent(),[3,5];case 4:this.scorecard=(0,b.Uy)(this.scorecard,function(a){a.roles=n}),this.commit(),i.label=5;case 5:return[3,7];case 6:throw t=i.sent(),this.goalsErrorService.showUserError(t,"LoadRoles"),t;case 7:return[2]}})})},o.prototype.initStartingRoles=function(){return(0,S.mG)(this,void 0,void 0,function(){var n,t,i,a=this;return(0,S.Jh)(this,function(l){switch(l.label){case 0:M.fF.assertValue(this.scorecard,"No scorecard loaded"),l.label=1;case 1:return l.trys.push([1,3,,4]),n=[{name:this.localizationService.get("EditScorecardSettings_Role_Card_Default_Role_View_All"),isDefaultRole:!0,permissions:[{goalId:void 0,permissions:1,applyToChildGoals:!0}]},{name:this.localizationService.get("EditScorecardSettings_Role_Card_Default_Role_View_And_Update_All"),isDefaultRole:!1,permissions:[{goalId:void 0,permissions:27,applyToChildGoals:!0}]}],[4,Promise.all(n.map(function(c){return a.goalsHttpService.createRole(a.scorecard.groupId,a.scorecard.id,c).toPromise()}))];case 2:return t=l.sent(),this.scorecard=(0,b.Uy)(this.scorecard,function(c){var u;_.isEmpty(c.roles)?c.roles=t:(u=c.roles).push.apply(u,t)}),this.commit(),[2,t];case 3:throw i=l.sent(),this.goalsErrorService.showUserError(i,"InitStartingRolesError"),i;case 4:return[2]}})})},o.prototype.deleteRole=function(n){return(0,S.mG)(this,void 0,void 0,function(){var t=this;return(0,S.Jh)(this,function(i){switch(i.label){case 0:return[4,this.ensureRolesLoaded()];case 1:return i.sent(),[2,this.promptUserConfirmation({title:this.localizationService.get("ScorecardDialog_Delete_Role_Title"),message:"".concat(this.localizationService.get("ScorecardDialog_Delete_Role_Message_First_Line"),"\n\n            ").concat(this.localizationService.get("ScorecardDialog_Action_Cant_be_Undone")),panelClass:["updateConfirmationDialogPanel"],onConfirmation:function(){return(0,S.mG)(t,void 0,void 0,function(){var l,c,u;return(0,S.Jh)(this,function(p){switch(p.label){case 0:M.fF.assertValue(this.scorecard,"No scorecard loaded"),l=null===(u=this.scorecard.roles)||void 0===u?void 0:u.find(function(y){return y.id===n}),M.fF.assertValue(l,"Role not found"),p.label=1;case 1:return p.trys.push([1,3,,4]),[4,this.goalsHttpService.deleteRole(this.scorecard.groupId,this.scorecard.id,l.id).toPromise()];case 2:return p.sent(),[3,4];case 3:throw c=p.sent(),this.goalsErrorService.showUserError(c,"DeleteRoleError"),c;case 4:return this.scorecard=(0,b.Uy)(this.scorecard,function(y){y.roles=y.roles.filter(function(P){return P.id!==n})}),this.commit(),[2,!0]}})})}})]}})})},o.prototype.setAsDefaultRole=function(n){var t,i,a;return(0,S.mG)(this,void 0,void 0,function(){var l,c,u,p=this;return(0,S.Jh)(this,function(y){switch(y.label){case 0:return[4,this.ensureRolesLoaded()];case 1:return y.sent(),M.fF.assertValue(this.scorecard,"No scorecard loaded"),l=null===(t=this.scorecard.roles)||void 0===t?void 0:t.find(function(P){return P.id===n}),M.fF.assertValue(l,"Role not found"),c=null===(a=null===(i=this.scorecard.roles)||void 0===i?void 0:i.find(function(P){return P.isDefaultRole}))||void 0===a?void 0:a.name,u=l.name,[2,this.promptUserConfirmation({title:this.localizationService.get("EditScorecardSettings_Permission_Pane_Change_Default_Role_title"),message:_.isNil(c)?this.localizationService.format("EditScorecardSettings_Permission_Pane_Set_Default_Role_Message",[u]):this.localizationService.format("EditScorecardSettings_Permission_Pane_Change_Default_Role_Message",[c,u]),okButtonText:this.localizationService.get("ModalDialogButtonText_Continue"),panelClass:["updateRoleConfirmationDialogPanel"],onConfirmation:function(){return(0,S.mG)(p,void 0,void 0,function(){var x;return(0,S.Jh)(this,function(N){switch(N.label){case 0:return N.trys.push([0,2,,3]),[4,this.goalsHttpService.updateRole(this.scorecard.groupId,this.scorecard.id,l.id,{isDefaultRole:!0}).toPromise()];case 1:return N.sent(),[3,3];case 2:throw x=N.sent(),this.goalsErrorService.showUserError(x,"UpdateRoleError"),x;case 3:return this.scorecard=(0,b.Uy)(this.scorecard,function(W){W.roles.forEach(function(te){te.isDefaultRole=te.id===n})}),this.commit(),[2,!0]}})})}})]}})})},o.prototype.createRole=function(n){return(0,S.mG)(this,void 0,void 0,function(){var t,i;return(0,S.Jh)(this,function(a){switch(a.label){case 0:M.fF.assertValue(this.scorecard,"No scorecard loaded"),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.goalsHttpService.createRole(this.scorecard.groupId,this.scorecard.id,n).toPromise()];case 2:return t=a.sent(),this.scorecard=(0,b.Uy)(this.scorecard,function(l){_.isEmpty(l.roles)?l.roles=[t]:l.roles.push(t)}),this.commit(),[2,t];case 3:throw i=a.sent(),this.goalsErrorService.showUserError(i,"UpdateRoleError"),i;case 4:return[2]}})})},o.prototype.updateRole=function(n,t){var i;return(0,S.mG)(this,void 0,void 0,function(){var a,l,c;return(0,S.Jh)(this,function(u){switch(u.label){case 0:return[4,this.ensureRolesLoaded()];case 1:u.sent(),M.fF.assertValue(this.scorecard,"No scorecard loaded"),a=null===(i=this.scorecard.roles)||void 0===i?void 0:i.find(function(p){return p.id===n}),M.fF.assertValue(a,"Role not found"),u.label=2;case 2:return u.trys.push([2,4,,5]),[4,this.goalsHttpService.updateRole(this.scorecard.groupId,this.scorecard.id,n,t).toPromise()];case 3:return l=u.sent(),this.scorecard=(0,b.Uy)(this.scorecard,function(p){p.roles=p.roles.map(function(y){return y.id===n?l:y})}),this.commit(),[2,l];case 4:throw c=u.sent(),this.goalsErrorService.showUserError(c,"UpdateRoleError"),c;case 5:return[2]}})})},o.prototype.updateGoalValueConnectionSettings=function(n,t){return(0,S.mG)(this,void 0,void 0,function(){var i,a;return(0,S.Jh)(this,function(l){switch(l.label){case 0:M.fF.assertValue(this.scorecard,"No scorecard loaded"),i=X.getGoal(this.scorecard.goals,n),M.fF.assertValue(i,"Goal not found"),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,this.goalsHttpService.updateConnectionSettings(this.scorecard.groupId,this.scorecard.id,n,t).toPromise()];case 2:return l.sent(),this.scorecard=(0,b.Uy)(this.scorecard,function(c){var u=X.getGoal(c.goals,n);u.valueConnection&&1===t.connectionType?u.valueConnection=(0,S.pi)((0,S.pi)({},u.valueConnection),{shouldClearGoalValues:t.shouldClearGoalValues}):u.targetConnection&&2===t.connectionType&&(u.targetConnection=(0,S.pi)((0,S.pi)({},u.targetConnection),{shouldClearGoalValues:t.shouldClearGoalValues}))}),this.commit(),[3,4];case 3:throw a=l.sent(),this.goalsErrorService.showUserError(a,"UpdateGoalValueConnectionSettingsError"),a;case 4:return[2]}})})},o.prototype.setScorecardWithGoals=function(n){var t=this;this.linkedScorecardsById=_.keyBy(n.linkedScorecards,"id"),this.scorecard=(0,b.Uy)(n,function(i){var a,l;i.columnSettings=_.isEmpty(i.columnSettings)?pe.om:K.mergeColumns(i.columnSettings,pe.om),K.adjustColumnSettings(t.featureSwitches,i.columnSettings),t.featureSwitches.featureSwitches.goalsLinkedGoals?null===(a=i.goals)||void 0===a||a.forEach(function(c){return c.isLinked=$e.r.isLinked(c,i)}):i.goals=_.filter(i.goals,function(c){return c.scorecardId===i.id}),i.isSample=X.isSampleScorecard(n),_.some(i?.goals)&&(i.goals=Ke.sort(X.buildGoalTree(i.goals),pe.Ij)),(null===(l=t.scorecard)||void 0===l?void 0:l.id)===n.id?(i.activeGoalId=t.scorecard.activeGoalId,i.selectedGoalIds=t.scorecard.selectedGoalIds):i.selectedGoalIds={},i.showGoalTargetsInChart=!1}),this.commit()},o.prototype.commit=function(){this._scorecard$.next(this.scorecard)},o.prototype.ensureUsersLoaded=function(){return(0,S.mG)(this,void 0,void 0,function(){var n,t=this;return(0,S.Jh)(this,function(i){switch(i.label){case 0:return M.fF.assertValue(this.scorecard,"No scorecard loaded"),this.scorecard.usersLoaded?[2]:[4,this.fetchUserDetails(X.flattenGoals(this.scorecard.goals))];case 1:return n=i.sent(),this.scorecard=(0,b.Uy)(this.scorecard,function(a){t.populateUserDisplayNames(n,X.flattenGoals(a.goals)),a.usersLoaded=!0}),this.commit(),[2]}})})},o.prototype.showRefreshConfirmation=function(){this.dialogService.showSimpleDialog(this.localizationService.get("Refresh_Scheduled"),this.localizationService.get("Refresh_Scheduled_Data_Will_Be_Updated"))},o.prototype.promptUserConfirmation=function(n){var t,i;return(0,S.mG)(this,void 0,void 0,function(){return(0,S.Jh)(this,function(c){switch(c.label){case 0:return M.fF.assertValue(n,"args"),M.fF.assertValue(n.title,"args.title"),M.fF.assertValue(n.message,"args.message"),[4,this.dialogService.showConfirmationDialog({title:n.title,message:n.message,okButtonText:null!==(t=n.okButtonText)&&void 0!==t?t:this.localizationService.get("Delete"),cancelButtonText:null!==(i=n.cancelButtonText)&&void 0!==i?i:this.localizationService.get("Cancel_ButtonText")},{autoFocus:!0,panelClass:n.panelClass}).afterClosed().toPromise()];case 1:return 1===c.sent()&&n.onConfirmation?[4,n.onConfirmation()]:[3,3];case 2:return[2,c.sent()];case 3:return[2,void 0]}})})},o.prototype.assignGoal=function(n,t){var i=n.rank;M.fF.assertValue(n,"existingGoal"),M.fF.assertValue(t,"newGoal"),Object.assign(n,t),n.cycle=t.cycle,n.cyclePeriod=t.cyclePeriod,n.rank=i,n.valuesCategoryId=t.valuesCategoryId},o.prototype.createCategoryList=function(n){return(0,S.mG)(this,void 0,void 0,function(){var t,i;return(0,S.Jh)(this,function(a){switch(a.label){case 0:M.fF.assertValue(this.scorecard,"createCategoryList No scorecard loaded"),M.fF.assert(function(){return!_.isEmpty(n)},"createCategoryList Categorical values are empty"),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.goalsHttpService.createGoalValueCategories(this.scorecard.groupId,this.scorecard.id,X.getGoalValueCategoriesCreateRequest(n)).toPromise()];case 2:return t=a.sent(),this.scorecard=(0,b.Uy)(this.scorecard,function(l){_.isUndefined(l.goalValueCategories)&&(l.goalValueCategories=[]),l.goalValueCategories.push(t)}),[3,4];case 3:throw i=a.sent(),this.goalsErrorService.showUserError(i,"SaveGoalError"),i;case 4:return this.commit(),[2,t]}})})},o.prototype.updateCategoryList=function(n){return(0,S.mG)(this,void 0,void 0,function(){var t,i,a=this;return(0,S.Jh)(this,function(l){switch(l.label){case 0:M.fF.assertValue(this.scorecard,"updateCategoryList No scorecard loaded"),M.fF.assertValue(n,"updateCategoryList categoryList"),M.fF.assertValue(_.find(this.scorecard.goalValueCategories,function(c){return c.id===n.id}),"updateCategoryList No category list found to update"),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,this.goalsHttpService.updateGoalValueCategories(this.scorecard.groupId,this.scorecard.id,n.id,X.getGoalValueCategoriesUpdateRequest(n)).toPromise()];case 2:return t=l.sent(),this.scorecard=(0,b.Uy)(this.scorecard,function(c){var u=_.findIndex(a.scorecard.goalValueCategories,function(p){return p.id===t.id});c.goalValueCategories[u]=t}),[3,4];case 3:throw i=l.sent(),this.goalsErrorService.showUserError(i,"SaveGoalError"),i;case 4:return this.commit(),[2,t]}})})},o.prototype.deleteCategoryList=function(n){return(0,S.mG)(this,void 0,void 0,function(){var t;return(0,S.Jh)(this,function(i){switch(i.label){case 0:M.fF.assertValue(this.scorecard,"deleteCategoryList No scorecard loaded"),M.fF.assertValue(_.find(this.scorecard.goalValueCategories,function(a){return a.id===n}),"deleteCategoryList No category list found to delete."),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.goalsHttpService.deleteGoalValueCategories(this.scorecard.groupId,this.scorecard.id,n).toPromise()];case 2:return i.sent(),this.scorecard=(0,b.Uy)(this.scorecard,function(a){_.remove(a.goalValueCategories,function(l){return l.id===n})}),[3,4];case 3:throw t=i.sent(),this.goalsErrorService.showUserError(t,"SaveGoalError"),t;case 4:return this.commit(),[2]}})})},o.prototype.getGoalValueCategoryLists=function(n){var t,i;return M.fF.assertValue(this.scorecard,"No scorecard loaded"),n?null!==(t=this.getSourceScorecard(n).goalValueCategories)&&void 0!==t?t:[]:null!==(i=this.scorecard.goalValueCategories)&&void 0!==i?i:[]},o.prototype.getGoalValueCategories=function(n){var t,i;if(n.valuesCategoryId){var a=this.getGoalValueCategoryLists(n);return null!==(i=null===(t=_.find(a,function(l){return l.id===n.valuesCategoryId}))||void 0===t?void 0:t.categories)&&void 0!==i?i:[]}},Object.defineProperty(o.prototype,"goalStatusesByScorecardId$",{get:function(){return this._goalStatusesByScorecardId$},enumerable:!1,configurable:!0}),o.prototype.getGoalStatuses=function(n){var t,i,a,l;return M.fF.assertValue(this.scorecard,"No scorecard loaded"),n?null!==(i=null===(t=this.getSourceScorecard(n).goalStatuses)||void 0===t?void 0:t.statuses)&&void 0!==i?i:[]:null!==(l=null===(a=this.scorecard.goalStatuses)||void 0===a?void 0:a.statuses)&&void 0!==l?l:[]},o.prototype.userHasWritePermissions=function(){var n,t=Ze(null===(n=this.scorecard)||void 0===n?void 0:n.permissions);return(0,ti.yE)(t,2)},o.prototype.bulkDeleteGoalsPrompt=function(){return(0,S.mG)(this,void 0,void 0,function(){var n,t,i=this;return(0,S.Jh)(this,function(a){switch(a.label){case 0:return this.assertNoActivehierarchy(!0)?[4,this.getSelectedGoalsObservable().pipe((0,ue.q)(1)).toPromise()]:[2];case 1:return n=a.sent(),t=_.some(n,function(l){return l.isLinked}),[2,this.promptUserConfirmation({title:this.localizationService.format("ScorecardDialog_BulkDelete_Metric_Title",[this.numberOfSelectedGoals()]),message:this.localizationService.get(t?"ScorecardDialog_BulkDelete_Metric_Message_Linked":"ScorecardDialog_BulkDelete_Metric_Message_First_Line"),panelClass:["updateConfirmationDialogPanel"],onConfirmation:function(){return(0,S.mG)(i,void 0,void 0,function(){return(0,S.Jh)(this,function(c){switch(c.label){case 0:return[4,this.bulkDeleteGoals()];case 1:return c.sent(),[2,!0]}})})}})]}})})},o.prototype.bulkDeleteGoals=function(){return(0,S.mG)(this,void 0,void 0,function(){var n,t=this;return(0,S.Jh)(this,function(i){switch(i.label){case 0:return this.assertNoActivehierarchy(!0)?(M.fF.assertValue(this.scorecard,"No scorecard loaded"),n=X.filterGoals(this.scorecard.goals,function(a){return t.scorecard.selectedGoalIds[a.id]&&!a.isNew}),[4,this.bulkDeleteGoalsRequest(n)]):[2];case 1:return i.sent(),[2]}})})},o.prototype.bulkDeleteGoalsRequest=function(n){return(0,S.mG)(this,void 0,void 0,function(){var t,i,l,c;return(0,S.Jh)(this,function(u){switch(u.label){case 0:for(t=0,i=n;t<i.length;t++)this.setGoalState(i[t].id,"Deleting");u.label=1;case 1:return u.trys.push([1,4,,5]),l=_.map(n,"id"),_.isEmpty(l)?[3,3]:[4,this.goalsHttpService.bulkDeleteGoals(this.scorecard.groupId,this.scorecard.id,{goalIds:l}).toPromise()];case 2:u.sent(),u.label=3;case 3:return[3,5];case 4:if(c=u.sent(),404!==c?.status)throw this.goalsErrorService.showUserError(c,"BulkDeleteGoalError"),c;return[3,5];case 5:return this.scorecard=(0,b.Uy)(this.scorecard,function(p){for(var y=function(te){var me=X.getGoal(p.goals,te.parentId);me?.subGoals?me.subGoals=me.subGoals.filter(function(Oe){return Oe.id!==te.id}):p.goals&&(p.goals=p.goals.filter(function(Oe){return Oe.id!==te.id}))},P=0,x=n;P<x.length;P++)y(x[P])}),this.commit(),[2]}})})},o.prototype.bulkUpdateGoals=function(n){var t,i,a;return(0,S.mG)(this,void 0,void 0,function(){var l,c,u,p,P,x,N,W,te,me,Oe,ve,Re,Xe,ot,Dt,ct=this;return(0,S.Jh)(this,function(mt){switch(mt.label){case 0:if(!this.assertNoActivehierarchy(!0))return[2];if(M.fF.assertValue(this.scorecard,"No scorecard loaded"),M.fF.assertValue(n,"No bulk request"),(null===(t=n.goalIds)||void 0===t?void 0:t.length)<=0)return[2];for(l=n.target,delete n.target,c=0,u=n.goalIds;c<u.length;c++)this.setGoalState(ve=u[c],"Saving");return p=_.map(n.owners,function(H){var le;return null!==(le=H.userPrincipalName)&&void 0!==le?le:H.aadAppId}),_.isEmpty(n.owners)?[3,2]:[4,this.userDetailsService.getUserDetails(p).toPromise()];case 1:return P=mt.sent(),[3,3];case 2:P=[],mt.label=3;case 3:for(x={},N=0,W=P;N<W.length;N++)x[(te=W[N]).userPrincipalName]=te,x[te.aadAppId]=te;mt.label=4;case 4:if(mt.trys.push([4,10,,11]),_.isNil(l))return[3,8];me=0,Oe=n.goalIds,mt.label=5;case 5:return me<Oe.length?(Re=X.getGoal(this.scorecard.goals,ve=Oe[me]),Xe=null!==(a=null===(i=_.find(Re.aggregations,function(H){return"Target"===H.type}))||void 0===i?void 0:i.timestamp)&&void 0!==a?a:n.timestamp,[4,this.upsertGoalValues(ve,[{timestamp:Xe,target:l}])]):[3,8];case 6:mt.sent(),mt.label=7;case 7:return me++,[3,5];case 8:return[4,this.goalsHttpService.bulkUpdateGoals(this.scorecard.groupId,this.scorecard.id,n).toPromise()];case 9:return ot=mt.sent(),this.scorecard=(0,b.Uy)(this.scorecard,function(H){for(var le=0,ce=ot;le<ce.length;le++){var Qe=ce[le],_t=X.getGoal(H.goals,Qe.id),Nt=_t.additionalOwners;ct.assignGoal(_t,Qe),_.isEmpty(n.owners)?_t.additionalOwners=Nt:_t.ownerDisplayNames=_.map(p,function($s){var Xl,ql;return null!==(ql=null===(Xl=x[$s])||void 0===Xl?void 0:Xl.displayName)&&void 0!==ql?ql:$s}),_t.state="Consumption"}}),[3,11];case 10:throw Dt=mt.sent(),this.goalsErrorService.showUserError(Dt,"BulkUpdateGoalError"),Dt;case 11:return this.commit(),[2]}})})},o.prototype.toggleShowGoalTargetsInChart=function(n){this.scorecard=(0,b.Uy)(this.scorecard,function(t){t.showGoalTargetsInChart=n}),this.commit()},o.prototype.createLinkedGoals=function(n,t){return(0,S.mG)(this,void 0,void 0,function(){var i,a,l,c,u,p,y,P;return(0,S.Jh)(this,function(x){switch(x.label){case 0:if(_.isEmpty(n))return[2];i=new Set(X.mapGoals(this.scorecard.goals,function(N){return N.id})),a=new Set,(l=n.length)>1&&(c=this.dialogService.showSimpleWaitDialog(this.localizationService.format("Metrics_LinkedMetrics_Linking",l),l>100?this.localizationService.get("This_Might_Take_A_Moment"):"")),u=0,x.label=1;case 1:if(!(u<l))return[3,9];if(i.has((p=n[u]).id))return M.fF.assertFail("Selected goal to link already exists on this scorecard."),[3,8];(y=p.parentId)&&!a.has(y)&&(M.fF.assertFail("Attempting to link goal with parentId ".concat(y," without having linked parent.")),y=void 0),x.label=2;case 2:return x.trys.push([2,4,,8]),[4,this.goalsHttpService.createLinkedGoals(this.scorecard.groupId,this.scorecard.id,{goalIds:[p.id],scorecardId:p.scorecardId,parentGoalId:y??t}).toPromise()];case 3:return x.sent(),a.add(p.id),[3,8];case 4:return 429!==(P=x.sent()).status?[3,6]:[4,new Promise(function(N){return setTimeout(N,5e3)})];case 5:return x.sent(),u--,[3,7];case 6:return this.goalsErrorService.showUserError(P,"CreateLinkedGoalsError","Metrics_LinkedMetrics_Error"),[3,9];case 7:return[3,8];case 8:return u++,[3,1];case 9:return this.loadScorecard(this.scorecard.groupId,this.scorecard.id,!0,this.scorecard.hierarchyPaths),c?.close(),[2]}})})},o.prototype.getSourceScorecard=function(n){if(n.isLinked){var t=this.linkedScorecardsById[n.scorecardId];if(t)return t;M.fF.assertFail("No linked scorecard with id "+n.scorecardId)}return this.scorecard},o.prototype.openLinkedSourceScorecard=function(n){M.fF.assert(function(){return n.isLinked},"Goal is not linked");var t=this.getSourceScorecard(n);this.scorecardHost.openScorecard(t,n)},o.prototype.getOwnerDisplayNames=function(n){return(0,S.mG)(this,void 0,void 0,function(){var t,i,a;return(0,S.Jh)(this,function(l){switch(l.label){case 0:return t=_.concat([n.owner],_.map(n.additionalOwners,function(c){var u;return null!==(u=c?.userPrincipalName)&&void 0!==u?u:c?.aadAppId})),[4,this.userDetailsService.getUserDetails(t).toPromise()];case 1:return i=l.sent(),a=_.map(i,function(c){return c?.displayName}),[2,_.isEmpty(a)?t:a]}})})},o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275inject(zt.f),e.\u0275\u0275inject(un.K),e.\u0275\u0275inject(xo.x),e.\u0275\u0275inject(Oo.T),e.\u0275\u0275inject(St.o),e.\u0275\u0275inject(Xr.a),e.\u0275\u0275inject(en.vZ),e.\u0275\u0275inject(To),e.\u0275\u0275inject(Eo.y0),e.\u0275\u0275inject(Ya.SN),e.\u0275\u0275inject(ko.yh),e.\u0275\u0275inject(Zt,8),e.\u0275\u0275inject(Cn,8))},o.\u0275prov=e.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac}),o}(),Fn=T(57243),Zn=T(19178),dn=function(){function o(n){this.capability=n,this.capability||(this.capability={enabled:!0,disabledReasons:new Set})}return o.clone=function(n){return new o(_.cloneDeep(n))},o.prototype.disableIf=function(n,t,i){return n&&(this.capability.enabled=!1,this.capability.disabledReasons.add(t),i&&!this.capability.disabledMessageKey&&(this.capability.disabledMessageKey=i)),new o(this.capability)},o.prototype.disableWithMultiple=function(n){var t=this;return this.capability.enabled=!1,n.forEach(function(i){return t.capability.disabledReasons.add(i)}),new o(this.capability)},o.prototype.build=function(){return this.capability},o}();function Ti(o,n){return(0,ti.yE)(o,n)}var lr=["id","permissions","hierarchyPaths"],eo=function(){function o(n,t,i,a){var l=this;this.featureSwitchService=n,this.scorecardService=t,this.groupStore=i,this.scorecardHost=a,this.capabilityInputs$=new Me.X([void 0,"List",!1]);var c=this.scorecardService.getScorecard().pipe((0,V.x)(function(p,y){return!p&&!y||!!p&&!!y&&_.every(lr,function(P){return _.isEqual(p[P],y[P])})})),u=c.pipe((0,xe.U)(function(p){return p.groupId}),(0,V.x)(),(0,Kt.w)(function(p){return l.groupStore.getGroupById(p||"me")}),(0,xe.U)(function(p){return void 0!==p?.capacitySkuTier&&6!==p.capacitySkuTier}));this.inputSub=(0,_n.aj)([c,this.scorecardService.viewType$,u]).subscribe(this.capabilityInputs$),this.scorecardCapabilities$=this.capabilityInputs$.pipe((0,xe.U)(function(p){return l.calculateScorecardCapabilities(p)}),(0,Fn.d)(1))}return o.prototype.ngOnDestroy=function(){this.inputSub.unsubscribe()},o.prototype.getCurrentScorecardCapabilities=function(){return this.calculateScorecardCapabilities(this.capabilityInputs$.value)},o.prototype.getScorecardCapabilities=function(){return this.scorecardCapabilities$},o.prototype.getCurrentGoalCapabilities=function(n){return _.isNil(n)?{}:this.calculateGoalCapabilities(n,this.capabilityInputs$.value)},o.prototype.getGoalCapabilities=function(n){var t=this;return _.isNil(n)?(0,re.of)({}):this.capabilityInputs$.pipe((0,xe.U)(function(i){return t.calculateGoalCapabilities(n,i)}),(0,Fn.d)(1))},o.prototype.getMultipleGoalCapabilities=function(n){var t=this;return _.isEmpty(n)?(0,re.of)({}):this.capabilityInputs$.pipe((0,xe.U)(function(i){for(var a=_.map(n,function(x){return t.calculateGoalCapabilities(x,i)}),l=a[0],c={},u=function(N){var W=N,te=l[W];if("scorecardCapabilities"===W)c[W]=l.scorecardCapabilities;else if("boolean"==typeof te)c[W]=_.every(a,function(ot){return ot[W]});else if(function(o){return"enabled"in o}(te)){for(var me=new dn,Oe=0,ve=a;Oe<ve.length;Oe++){var Xe=ve[Oe][W];Xe.enabled||me.disableWithMultiple(Xe.disabledReasons)}c[W]=me.build()}else M.fF.assertFail("Unexpected type for key ".concat(W," when getting multiple goal capabilities"))},p=0,y=_.keys(l);p<y.length;p++)u(y[p]);return c}),(0,Fn.d)(1))},o.prototype.calculateScorecardCapabilities=function(n){var t=n[0],i=n[1],a=n[2],l={},c=Ti(Ze(t?.permissions),2),u=!_.isEmpty(t?.hierarchyPaths),p="List"===i;return l.customizeStatus=this.featureSwitchService.featureSwitches.goalsCustomizeStatus&&c,l.createGoal=(new dn).disableIf(!c,"NoWritePermission","Metrics_Tooltip_NoPermission").disableIf(u,"Hierarchical","Metrics_Tooltip_Create_Metric_Disabled_Hierarchical").disableIf(!p,"UnsupportedView","Metrics_Tooltip_Create_Metric_Disabled_UnsupportedView").build(),l.createLinkedGoal=(new dn).disableIf(!c,"NoWritePermission","Metrics_Tooltip_NoPermission").disableIf(u,"Hierarchical","Metrics_Tooltip_Create_Metric_Disabled_Hierarchical").disableIf("Heatmap"===i,"UnsupportedView","Metrics_Tooltip_Create_Metric_Disabled_UnsupportedView").build(),l.deleteGoal=c&&!u,l.reorderGoal=this.featureSwitchService.featureSwitches.powerBIGoalsDragAndDrop&&c&&!u&&p,l.editHierarchies=(new dn).disableIf(!c,"NoWritePermission","MetricsHierarchy_NoPermission").disableIf(!a&&this.featureSwitchService.featureSwitches.scorecardHierarchiesPremium,"NoPremiumWorkspace","MetricsHierarchy_NotAllowedInShared").build(),l.editHeatmap=c,l},o.prototype.calculateGoalCapabilities=function(n,t){var i,a,l={scorecardCapabilities:this.calculateScorecardCapabilities(t)},c=t[0],u=t[1],p=n.isNew?31:function(o){if(_.isNil(o))return 0;if(!isNaN(o))return Number(o);switch(o.toString().trim().toLowerCase()){case"none":return 0;case"view":return 1;case"updatecurrentvalue":return 3;case"updatetargetvalue":return 5;case"updatenotes":return 9;case"updatestatus":return 17;case"updatevalues":return 7;case"all":return 31;default:M.fF.assertValue(o,"can't cast GoalPermission value")}}(n.permissions),y=Ti(Ze(c?.permissions),2),P=!!n.valuesCategoryId,x=(null===(a=null===(i=n.aggregations)||void 0===i?void 0:i.find(function(Xe){return"NumberOfTargets"===Xe.type}))||void 0===a?void 0:a.value)>1,N=!_.isEmpty(c?.hierarchyPaths),W=X.isSampleScorecard(c),te=N&&n.isLinked,me="List"===u;l.selectGoal=this.scorecardHost?this.scorecardHost.canSelectGoal(n):{enabled:!0},l.editGoal=(new dn).disableIf(!y,"NoWritePermission","Metrics_Tooltip_NoPermission").disableIf(n.isLinked,"LinkedMetric","Metrics_Tooltip_Edit_Metric_Disabled_Linked").disableIf(!me,"UnsupportedView","Metrics_Tooltip_Edit_Metric_Disabled_UnsupportedView").build();var Oe=y&&!n.isLinked&&!N;l.editName=Oe,l.editStartDate=Oe,l.editDueDate=Oe,l.editStatusRules=Oe,l.editPeriodicity=Oe,l.connectCurrentValueToData=Oe,l.connectTargetValueToData=Oe,l.changeValueFormat=Oe,l.editOwners=Oe,l.deleteGoal=l.scorecardCapabilities.deleteGoal,l.createSubgoal=l.scorecardCapabilities.createGoal,l.editStatus=Ti(p,17)&&!te&&!n.hasStatusRules,l.addNotes=Ti(p,9)&&!te;var ve=Ti(p,3)&&!te&&!n.valueConnection&&!n.valueRollup;l.editCurrentValue=ve,l.editMultipleValues=ve&&!P&&!N&&!n.isLinked;var Re=Ti(p,5)&&!n.isLinked;return l.editTargetValue=Re&&!n.targetConnection&&!n.targetRollup&&!x,l.editMultipleTargets=Re&&(!!this.featureSwitchService.featureSwitches.goalsRollups||!n.targetConnection&&!n.targetRollup)&&(!P||x)&&!N,l.deleteCheckIn=y,l.followGoal=this.featureSwitchService.featureSwitches.goalsFavoriteGoals&&!W&&!N,l.useCategoricalValues=!!this.featureSwitchService.featureSwitches.goalsCategoricalValues&&(!x||P)&&!n.valueRollup&&!n.targetRollup&&!n.valueConnection&&!n.targetConnection,l.supportMultipleTargetsEditing=!!this.featureSwitchService.featureSwitches.powerBIGoalsMultipleTargets,l.supportMultipleValuesEditing=!!this.featureSwitchService.featureSwitches.goalsMultipleValuesEditor,l.supportsRollup=!!this.featureSwitchService.featureSwitches.goalsRollups,l.editCalculationType=Oe,l.usePickerRollup=l.editCalculationType&&!P,l},o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275inject(en.vZ),e.\u0275\u0275inject(Ht),e.\u0275\u0275inject(Zn.Y),e.\u0275\u0275inject(Zt,8))},o.\u0275prov=e.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac}),o}(),Vt=T(34071),Ka=T(98632),Ei=T(43633),Rt=T(59973),Kl=T(50911),es=T(94420),el=T(18942),qr=T(76746),ni=function(){function o(n,t,i,a,l,c,u){this.store=n,this.datasetStore=t,this.domSanitizer=i,this.groupStoreService=a,this.reportStore=l,this.appSettings=c,this.scorecardHost=u}return o.prototype.getConnectedReport=function(n){var t,i;M.fF.assertValue(n.reportUrl,"No connected report url");var a=null===(t=n.reportUrl.match(/\/reports\/([a-zA-Z0-9\-]+)/))||void 0===t?void 0:t[1],l=null===(i=n.reportUrl.match(/\/groups\/([a-zA-Z0-9\-]+)/))||void 0===i?void 0:i[1];return this.getReport(a,l)},o.prototype.getConnectedReportDisplayName=function(n){var t,i=null===(t=n.reportUrl.match(/\/apps\/([a-zA-Z0-9\-]+)/))||void 0===t?void 0:t[1];return this.getConnectedReport(n).pipe((0,xe.U)(function(a){return i?a.ownerFullname:a.displayName}))},o.prototype.goToConnectedReport=function(n){M.fF.assertValue(n.reportUrl,"No connected report url");var i,t=n.reportUrl.indexOf("?")>=0?"&":"?";if(i=this.appSettings.tenantId?"".concat(n.reportUrl).concat(t,"ctid=").concat(this.appSettings.tenantId):n.reportUrl,this.scorecardHost)this.scorecardHost.openReport(i);else{var a=new URL(i,window.location.origin).href;window.open(this.domSanitizer.sanitize(e.SecurityContext.URL,a),"_blank")}},o.prototype.getReport=function(n,t){return this.store.dispatch(new Ka.yi({reportObjectId:n,workspaceObjectId:t})),this.store.select(Ei.W4,{id:n}).pipe((0,Rt.h)(function(i){return!!i&&!i.loading}))},o.prototype.getConnectedGoalsWithoutBuildPermissions=function(n){var t,i;return(0,S.mG)(this,void 0,void 0,function(){var a,l,c,u,p,y,P;return(0,S.Jh)(this,function(x){switch(x.label){case 0:return a=[],[4,this.groupStoreService.ensureGroupArtifactsLoaded(Vt.fm,!0)];case 1:x.sent(),l=0,c=n,x.label=2;case 2:return l<c.length?(u=c[l]).valueConnection?[4,this.datasetStore.findDatasetByObjectId(u.valueConnection.datasetId)]:[3,5]:[3,9];case 3:return(!(p=x.sent())||!this.hasDatasetBuildPermission(p))&&a.push(u.name),M.fF.assertValue(u.valueConnection.reportUrl,"No value connected report url"),y=null===(t=u.valueConnection.reportUrl.match(/\/reports\/([a-zA-Z0-9\-]+)/))||void 0===t?void 0:t[1],[4,this.reportStore.findByObjectId(y)];case 4:(!(P=x.sent())||!this.hasReportReadPermission(P))&&a.push(u.name),x.label=5;case 5:return u.targetConnection?[4,this.datasetStore.findDatasetByObjectId(u.targetConnection.datasetId)]:[3,8];case 6:return(!(p=x.sent())||!this.hasDatasetBuildPermission(p))&&a.push(u.name),M.fF.assertValue(u.targetConnection.reportUrl,"No target connected report url"),y=null===(i=u.targetConnection.reportUrl.match(/\/reports\/([a-zA-Z0-9\-]+)/))||void 0===i?void 0:i[1],[4,this.reportStore.findByObjectId(y)];case 7:(!(P=x.sent())||!this.hasReportReadPermission(P))&&a.push(u.name),x.label=8;case 8:return l++,[3,2];case 9:return[2,_.uniq(a)]}})})},o.prototype.hasReportReadPermission=function(n){return(0,ti.yE)(n.permissions,1)},o.prototype.hasDatasetBuildPermission=function(n){return(0,ti.yE)(n?.permissions,3)||(0,ti.yE)(n?.permissions,9)||(0,ti.yE)(n?.userPermissions,9)||(0,ti.yE)(n?.userPermissions,3)},o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275inject(ko.yh),e.\u0275\u0275inject(Kl.s),e.\u0275\u0275inject(el.H7),e.\u0275\u0275inject(Zn.Y),e.\u0275\u0275inject(es.R),e.\u0275\u0275inject(qr.de),e.\u0275\u0275inject(Zt,8))},o.\u0275prov=e.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac}),o}(),sr=function(){function o(n,t){var i=this;this.scorecardService=n,this.featureSwitches=t,this._expansionMap$=new Me.X({}),this._expandableGoals$=new Me.X([]),this._showAllExpanded$=new Me.X(!1),this.onDestroy$=new Ae.xQ,this.expandByDefault=!this.featureSwitches.featureSwitches.collapseGoalsByDefault,this.scorecardService.getScorecard().pipe((0,xe.U)(function(a){return _.map(X.filterGoals(a.goals,function(l){return!_.isEmpty(l.subGoals)}),function(l){return l.id})}),(0,V.x)(_.isEqual),(0,be.R)(this.onDestroy$)).subscribe(this._expandableGoals$),this._expandableGoals$.pipe((0,be.R)(this.onDestroy$)).subscribe(function(a){var l=new Set(a),c=_.pickBy(i.expansionMap,function(p,y){return l.has(y)});if(i._expansionMap$.next(c),i.expandByDefault){var u=_.filter(a,function(p){return _.isNil(i.expansionMap[p])});i.setExpansion(u,!0)}}),this._expansionMap$.pipe((0,be.R)(this.onDestroy$)).subscribe(function(){var a=i.expandedGoalIds.length;0===a?i._showAllExpanded$.next(!1):a===i._expandableGoals$.value.length&&i._showAllExpanded$.next(!0)})}return Object.defineProperty(o.prototype,"expansionMap$",{get:function(){return this._expansionMap$},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"expansionMap",{get:function(){return this._expansionMap$.value},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"expandedGoalIds",{get:function(){return _.keys(_.pickBy(this.expansionMap,function(t){return t}))},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"showAllExpanded$",{get:function(){return this._showAllExpanded$},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"showAllExpanded",{get:function(){return this._showAllExpanded$.value},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"hasExpandableGoals$",{get:function(){return this._expandableGoals$.pipe((0,xe.U)(function(t){return!_.isEmpty(t)}))},enumerable:!1,configurable:!0}),o.prototype.ngOnDestroy=function(){this.onDestroy$.next(!0),this.onDestroy$.complete()},o.prototype.isExpanded=function(n){var t;return null!==(t=this.expansionMap[n])&&void 0!==t?t:this.expandByDefault},o.prototype.expandGoal=function(n){this.setExpansion([n],!0)},o.prototype.collapseGoal=function(n){this.setExpansion([n],!1)},o.prototype.expandGoals=function(n){this.setExpansion(n,!0)},o.prototype.collapseGoals=function(n){this.setExpansion(n,!1)},o.prototype.expandAllGoals=function(){this.setExpansion(this._expandableGoals$.value,!0)},o.prototype.collapseAllGoals=function(){this.setExpansion(this._expandableGoals$.value,!1)},o.prototype.toggleExpandAll=function(){this.showAllExpanded?this.collapseAllGoals():this.expandAllGoals()},o.prototype.setExpansion=function(n,t){var i=this;if(_.some(n,function(l){return i.expansionMap[l]!==t})){var a=(0,S.pi)({},this.expansionMap);_.forEach(n,function(l){a[l]=t}),this._expansionMap$.next(a)}},o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275inject(Ht),e.\u0275\u0275inject(en.vZ))},o.\u0275prov=e.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac}),o}(),gi=function(){function o(n,t,i,a,l,c){this.scorecardService=n,this.capabilityService=t,this.overlay=i,this.goalConnectionService=a,this.expansionService=l,this.featureSwitches=c,this.contextMenuOpenGoalId$=new Me.X(void 0),this.onDestroy$=new Ae.xQ}return o.prototype.ngOnDestroy=function(){this.onDestroy$.next(!0),this.onDestroy$.complete()},Object.defineProperty(o.prototype,"scorecardSelectionMode",{get:function(){return this.scorecardService.scorecardSelectionMode},enumerable:!1,configurable:!0}),o.prototype.capabilities=function(n){return this.capabilityService.getCurrentGoalCapabilities(n)},o.prototype.canSelectGoal=function(n){var t,i;return null===(i=null===(t=this.capabilities(n).selectGoal)||void 0===t?void 0:t.enabled)||void 0===i||i},o.prototype.isSelected=function(n){var t,i;return null===(i=null===(t=this.scorecardService.getCurrentScorecard())||void 0===t?void 0:t.selectedGoalIds)||void 0===i?void 0:i[n.id]},o.prototype.onRowClick=function(n,t){this.canSelectGoal(n)&&this.scorecardService.toggleSelectedGoal(n.id,!1,this.isClickMultiselect(t))},o.prototype.onNameClick=function(n,t){if(this.canSelectGoal(n))if((_.isNil(this.scorecardSelectionMode)||"ctrl"===this.scorecardSelectionMode)&&1===this.scorecardService.numberOfSelectedGoals()&&this.isSelected(n)&&_.isNil(this.scorecardService.getCurrentScorecard().activeGoalId))this.scorecardService.setActiveGoal(n.id);else{var i=this.isClickMultiselect(t);this.scorecardService.toggleSelectedGoal(n.id,!(i||"single"===this.scorecardSelectionMode),i)}t?.stopPropagation()},o.prototype.onCheckboxClick=function(n,t){this.canSelectGoal(n)&&this.scorecardService.toggleSelectedGoal(n.id,!1,"single"!==this.scorecardSelectionMode),t?.stopPropagation()},o.prototype.getGoalActionIcons=function(n,t,i){var a=this.getGoalActions(n);return _.map(_.filter(i?t?this.featureSwitches.featureSwitches.scorecardCompactView?[a.editGoal,a.openNotes,a.openContextMenu]:[a.openNotes,a.editGoal,a.openContextMenu]:this.featureSwitches.featureSwitches.scorecardCompactView?[a.goToReport,a.toggleFollow,a.openNotes]:[a.goToReport,a.openNotes,a.toggleFollow]:[a.openContextMenu],function(c){return!c.hidden}),function(c){return(0,S.pi)((0,S.pi)({},c),{onClick:function(p){c.onClick(),p.stopPropagation()}})})},o.prototype.getGoalMenuOptions=function(n,t,i){var a=this,l=this.getGoalActions(n),c=[];return t?(c=[l.goToReport,l.seeDetails,l.addSubGoal,l.toggleFollow,l.goToLinkedSource,l.deleteGoal],i||c.unshift(l.editGoal)):i?M.fF.assertFail("When action icons are shown, read mode has no context menu"):c=[l.goToReport,l.openNotes,l.toggleFollow],_.map(_.filter(c,function(u){return!u.hidden}),function(u){return(0,S.pi)((0,S.pi)({},u),{onClick:function(){u.onClick(),a.overlay.closeAll()}})})},o.prototype.onContextMenuClick=function(n,t,i,a,l){var c=this;this.overlay.isOverlayOpen&&this.overlay.closeAll();var u=this.getGoalMenuOptions(n,a,l),y=t.pointerType?{x:t.x,y:t.y}:i,P=this.overlay.open({component:Je.H,data:{goalActions:u},closeOnBackdropClick:!0,disableForwardClickOnBackdropClick:!0,hasCaret:!1,options:{hasBackdrop:!0,backdropClass:Mt.L,positionStrategy:this.overlay.position().flexibleConnectedTo(y).withPositions([(0,Ne.Iz)(),(0,Ne.Kb)(),(0,Ne.Zz)(),(0,Ne.J7)()]).withPush(!0).withGrowAfterOpen(!0)}});return this.contextMenuOpenGoalId$.next(n.id),P.onClose.subscribe(function(x){return c.contextMenuOpenGoalId$.next(void 0)}),t.stopPropagation(),P},o.prototype.getGoalActions=function(n){var i,a,l,c,t=this,u=this.capabilities(n);return{goToReport:{id:"goToReport",onClick:function(){return t.goalConnectionService.goToConnectedReport(n.valueConnection)},labelKey:"TileMenuOption_GoToReport",iconTooltipKey:"Metrics_Tooltip_Open_Report",iconName:"barchart",iconType:"pbi",hidden:_.isNil(n.valueConnection)},openNotes:{id:"openNotes",onClick:function(){t.canSelectGoal(n)&&t.scorecardService.setActiveGoal(n.id)},labelKey:"OpenNotes",iconTooltipKey:"Notes",iconName:"comment_16_regular",iconType:"tri"},seeDetails:{id:"seeDetails",onClick:function(){return t.scorecardService.setActiveGoal(n.id)},labelKey:"VisualContainer_ShowErrorDetails",iconName:"list",iconType:"pbi"},editGoal:{id:"editGoal",onClick:function(){return t.scorecardService.setGoalState(n.id,"Editing")},labelKey:"Metrics_Tooltip_Edit_Metric",iconName:"edit",iconType:"pbi",disabled:!(null!==(i=u?.editGoal)&&void 0!==i&&i.enabled),disabledTooltipKey:null===(a=u?.editGoal)||void 0===a?void 0:a.disabledMessageKey},toggleFollow:{id:"toggleFollow",onClick:function(){n.isFollowed?t.scorecardService.unfollowGoal(n.id):t.scorecardService.followGoal(n.id)},labelKey:n.isFollowed?"Metrics_Follow_Goals_Unfollow_This_Metric":"Metrics_Follow_Goals_Follow_This_Metric",iconName:n.isFollowed?"alert_16_filled":"alert_16_regular",iconType:"tri",hidden:!u.followGoal},addSubGoal:{id:"addSubGoal",onClick:function(){t.scorecardService.addSubGoal(n.id),t.expansionService.expandGoal(n.id)},labelKey:"NewSubmetric",iconName:"add-multiple",iconType:"pbi",hidden:X.computeGoalLevel(this.scorecardService.getCurrentScorecard().goals,n)>=pe.gT.MaxSubGoals,disabled:!(null!==(l=u.createSubgoal)&&void 0!==l&&l.enabled),disabledTooltipKey:null===(c=u.createSubgoal)||void 0===c?void 0:c.disabledMessageKey},deleteGoal:{id:"deleteGoal",onClick:function(){return t.scorecardService.deleteGoal(n.id)},labelKey:n.isLinked?"Metrics_LinkedMetrics_RemoveLinkedMetric":"Metrics_Tooltip_Delete_Metric",iconName:"delete",iconType:"pbi",hidden:!u.deleteGoal},goToLinkedSource:{id:"goToLinkedSource",onClick:function(){return t.scorecardService.openLinkedSourceScorecard(n)},labelKey:"Metrics_LinkedMetrics_GoToSource",iconName:"open_16_regular",iconType:"tri",hidden:!n.isLinked},openContextMenu:{id:"openContextMenu",onClick:function(){return M.fF.assertFail("OpenContextMenu must be set up in template")},labelKey:"Options_Menu",iconName:"pbi-glyph-more-vertical",iconType:"mat"}}},o.prototype.isClickMultiselect=function(n){switch(this.scorecardSelectionMode){case"multiple":return!0;case"ctrl":return n?.ctrlKey;default:return!1}},o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275inject(Ht),e.\u0275\u0275inject(eo),e.\u0275\u0275inject(Mt._),e.\u0275\u0275inject(ni),e.\u0275\u0275inject(sr),e.\u0275\u0275inject(en.vZ))},o.\u0275prov=e.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac}),o}(),Ut=T(44408),Gn=T(86663),ii=T(74913),xt=T(85102),tl=["*"],Pn=function(){function o(){this.disableTooltip=!1}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["tooltip-wrapper"]],inputs:{tooltipKey:"tooltipKey",disableTooltip:"disableTooltip"},ngContentSelectors:tl,decls:3,vars:4,consts:[[1,"tooltip-wrapper",3,"pbiTooltipDisabled","pbiTooltip"]],template:function(t,i){1&t&&(e.\u0275\u0275projectionDef(),e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275pipe(1,"localize"),e.\u0275\u0275projection(2),e.\u0275\u0275elementEnd()),2&t&&e.\u0275\u0275property("pbiTooltipDisabled",i.disableTooltip)("pbiTooltip",i.tooltipKey?e.\u0275\u0275pipeBind1(1,2,i.tooltipKey):void 0)},dependencies:[Ee.V,xt.F],styles:["[_nghost-%COMP%], .tooltip-wrapper[_ngcontent-%COMP%]{width:100%;height:100%;flex:1;display:flex}"],changeDetection:0}),o}();function Do(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"span",11),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){var t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.goal.notesCount," ")}}function hi(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",8),e.\u0275\u0275listener("click",function(u){e.\u0275\u0275restoreView(t);var p=e.\u0275\u0275nextContext().$implicit;return e.\u0275\u0275resetView(p.onClick(u))}),e.\u0275\u0275pipe(1,"localize"),e.\u0275\u0275element(2,"tri-svg-icon",9),e.\u0275\u0275template(3,Do,2,1,"span",10),e.\u0275\u0275elementEnd()}if(2&o){var l,i=e.\u0275\u0275nextContext().$implicit,a=e.\u0275\u0275nextContext(2);e.\u0275\u0275classProp("show-btn",a.goal.notesCount>0),e.\u0275\u0275property("pbiTooltip",e.\u0275\u0275pipeBind1(1,6,null!==(l=i.iconTooltipKey)&&void 0!==l?l:i.labelKey))("disabled",i.disabled),e.\u0275\u0275advance(2),e.\u0275\u0275property("name",i.iconName),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",a.goal.notesCount>0)}}function ts(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",12,13),e.\u0275\u0275listener("click",function(u){e.\u0275\u0275restoreView(t);var p=e.\u0275\u0275reference(1),y=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(y.onContextMenuClick(u,p))}),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275element(3,"mat-icon",14),e.\u0275\u0275elementEnd()}if(2&o){var l,i=e.\u0275\u0275nextContext().$implicit,a=e.\u0275\u0275nextContext(2);e.\u0275\u0275classProp("space-btn",a.goal.notesCount>0),e.\u0275\u0275property("pbiTooltip",e.\u0275\u0275pipeBind1(2,4,null!==(l=i.iconTooltipKey)&&void 0!==l?l:i.labelKey))("disabled",i.disabled)}}var nl=function(n){return{action:n}};function Zr(o,n){if(1&o&&e.\u0275\u0275elementContainer(0,15),2&o){var t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275nextContext(2);var i=e.\u0275\u0275reference(2);e.\u0275\u0275property("ngTemplateOutlet",i)("ngTemplateOutletContext",e.\u0275\u0275pureFunction1(2,nl,t))}}function ki(o,n){1&o&&(e.\u0275\u0275elementContainerStart(0,4),e.\u0275\u0275template(1,hi,4,8,"button",5),e.\u0275\u0275template(2,ts,4,6,"button",6),e.\u0275\u0275template(3,Zr,1,4,"ng-container",7),e.\u0275\u0275elementContainerEnd()),2&o&&(e.\u0275\u0275property("ngSwitch",n.$implicit.id),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","openNotes"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","openContextMenu"))}function ns(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",2),e.\u0275\u0275template(1,ki,4,3,"ng-container",3),e.\u0275\u0275elementEnd()),2&o){var t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t.actions)}}function il(o,n){if(1&o&&e.\u0275\u0275element(0,"mat-icon",21),2&o){var t=e.\u0275\u0275nextContext(2).action;e.\u0275\u0275property("fontIcon",t.iconName)}}function ol(o,n){if(1&o&&e.\u0275\u0275element(0,"pbi-icon",22),2&o){var t=e.\u0275\u0275nextContext(2).action;e.\u0275\u0275property("name",t.iconName)}}function Hn(o,n){if(1&o&&e.\u0275\u0275element(0,"tri-svg-icon",9),2&o){var t=e.\u0275\u0275nextContext(2).action;e.\u0275\u0275property("name",t.iconName)}}function is(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tooltip-wrapper",17)(1,"button",8),e.\u0275\u0275listener("click",function(c){e.\u0275\u0275restoreView(t);var u=e.\u0275\u0275nextContext().action;return e.\u0275\u0275resetView(u.onClick(c))}),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275template(3,il,1,1,"mat-icon",18),e.\u0275\u0275template(4,ol,1,1,"pbi-icon",19),e.\u0275\u0275template(5,Hn,1,1,"tri-svg-icon",20),e.\u0275\u0275elementEnd()()}if(2&o){var a,i=e.\u0275\u0275nextContext().action;e.\u0275\u0275property("tooltipKey",null==i?null:i.disabledTooltipKey),e.\u0275\u0275advance(1),e.\u0275\u0275property("pbiTooltip",e.\u0275\u0275pipeBind1(2,6,null!==(a=i.iconTooltipKey)&&void 0!==a?a:i.labelKey))("disabled",i.disabled),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf","mat"===i.iconType),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","pbi"===i.iconType),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","tri"===i.iconType)}}function It(o,n){1&o&&e.\u0275\u0275template(0,is,6,8,"tooltip-wrapper",16),2&o&&e.\u0275\u0275property("ngIf",n.action)}var cr=function(o){function n(t,i){var a=o.call(this)||this;return a.goalRowService=t,a.changeDetector=i,a.showActionIcons=!0,a.goalRowService.contextMenuOpenGoalId$.pipe((0,V.x)(),(0,be.R)(a.onDestroy$)).subscribe(function(l){a.contextMenuOpen=a.goal&&l===a.goal.id,a.changeDetector.markForCheck()}),a}return(0,S.ZT)(n,o),n.prototype.ngOnChanges=function(t){(t.goal||t.isEditMode||t.showActionIcons)&&(this.actions=this.goalRowService.getGoalActionIcons(this.goal,this.isEditMode,this.showActionIcons)),o.prototype.ngOnChanges.call(this,t)},n.prototype.onContextMenuClick=function(t,i){this.goalRowService.onContextMenuClick(this.goal,t,i,this.isEditMode,this.showActionIcons)},n.\u0275fac=function(i){return new(i||n)(e.\u0275\u0275directiveInject(gi),e.\u0275\u0275directiveInject(e.ChangeDetectorRef))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["goal-actions-cell"]],hostVars:2,hostBindings:function(i,a){2&i&&e.\u0275\u0275classProp("context-menu-open",a.contextMenuOpen)},inputs:{goal:"goal",isEditMode:"isEditMode",showActionIcons:"showActionIcons"},features:[e.\u0275\u0275InheritDefinitionFeature,e.\u0275\u0275NgOnChangesFeature],decls:3,vars:1,consts:[["class","goal-actions",4,"ngIf"],["actionIcon",""],[1,"goal-actions"],[3,"ngSwitch",4,"ngFor","ngForOf"],[3,"ngSwitch"],["class","action-btn","mat-icon-button","",3,"show-btn","pbiTooltip","disabled","click",4,"ngSwitchCase"],["class","action-btn context-menu-btn","mat-icon-button","",3,"space-btn","pbiTooltip","disabled","click",4,"ngSwitchCase"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngSwitchDefault"],["mat-icon-button","",1,"action-btn",3,"pbiTooltip","disabled","click"],["tri-svg-icon-16","",1,"tri-svg",3,"name"],["class","notes-count",4,"ngIf"],[1,"notes-count"],["mat-icon-button","",1,"action-btn","context-menu-btn",3,"pbiTooltip","disabled","click"],["contextMenuBtn",""],["fontIcon","pbi-glyph-more-vertical",1,"glyph-small"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"tooltipKey",4,"ngIf"],[3,"tooltipKey"],["class","glyphicon glyph-small",3,"fontIcon",4,"ngIf"],["size","small","class","icon",3,"name",4,"ngIf"],["tri-svg-icon-16","","class","tri-svg",3,"name",4,"ngIf"],[1,"glyphicon","glyph-small",3,"fontIcon"],["size","small",1,"icon",3,"name"]],template:function(i,a){1&i&&(e.\u0275\u0275template(0,ns,2,1,"div",0),e.\u0275\u0275template(1,It,1,1,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)),2&i&&e.\u0275\u0275property("ngIf","Saving"!==a.goal.state&&"Deleting"!==a.goal.state)},dependencies:[U.NgForOf,U.NgIf,U.NgTemplateOutlet,U.NgSwitch,U.NgSwitchCase,U.NgSwitchDefault,Ut.Hw,Gn._,Ee.V,ii.M,Pn,xt.F],styles:["[_nghost-%COMP%]{display:flex}[_nghost-%COMP%]   .goal-actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}[_nghost-%COMP%]   .goal-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{position:relative;padding:0;border:none;background:none;height:100%;width:32px}[_nghost-%COMP%]   .goal-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:rgba(0,0,0,.05);color:inherit}[_nghost-%COMP%]   .goal-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:before{vertical-align:middle}[_nghost-%COMP%]   .goal-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   tri-svg-icon[_ngcontent-%COMP%]{margin-top:-5px}[_nghost-%COMP%]   .goal-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   .notes-count[_ngcontent-%COMP%]{position:absolute;top:12px;right:0;border-radius:30px;padding:2px 4px;min-width:8px;min-height:8px;font-size:var(--xs-font-size);font-family:var(--fluent-font-family);font-weight:var(--font-weight-regular);background:var(--fluent-theme-primary-color);color:var(--text-primary-content-color-hc)}[_nghost-%COMP%]   .goal-actions[_ngcontent-%COMP%]   .action-btn.show-btn[_ngcontent-%COMP%]{display:block;visibility:visible}[_nghost-%COMP%]   .goal-actions[_ngcontent-%COMP%]   .action-btn.space-btn[_ngcontent-%COMP%]{display:block}.context-menu-open[_nghost-%COMP%]   .goal-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{display:block!important;visibility:visible!important}.context-menu-open[_nghost-%COMP%]   .goal-actions[_ngcontent-%COMP%]   .action-btn.context-menu-btn[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.05);color:inherit}"],changeDetection:0}),n}(Te.w),fi=T(82621);function rl(o,n){if(1&o&&e.\u0275\u0275element(0,"pbi-icon",6),2&o){var t=e.\u0275\u0275nextContext(2);e.\u0275\u0275classProp("rotate180",!t.valueChange.isIncrease),e.\u0275\u0275property("size",t.arrowSize)}}var al=function(){return{rounded:!0}};function ll(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",2),e.\u0275\u0275template(1,rl,1,3,"pbi-icon",3),e.\u0275\u0275elementStart(2,"div",4),e.\u0275\u0275elementContainer(3,5),e.\u0275\u0275elementEnd()()),2&o){var t=e.\u0275\u0275nextContext(),i=e.\u0275\u0275reference(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!!t.valueChange),e.\u0275\u0275advance(1),e.\u0275\u0275property("pbiTooltip",i),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngTemplateOutlet",i)("ngTemplateOutletContext",e.\u0275\u0275pureFunction0(4,al))}}function sl(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275elementEnd()),2&o){var t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.isCyclePeriodLabelLocalizable?e.\u0275\u0275pipeBind1(2,1,null==t.valueChange?null:t.valueChange.period):null==t.valueChange?null:t.valueChange.period," ")}}function cl(o,n){if(1&o&&(e.\u0275\u0275text(0),e.\u0275\u0275template(1,sl,3,3,"span",7)),2&o){var t=n.rounded,i=e.\u0275\u0275nextContext();e.\u0275\u0275textInterpolate1(" ",t?i.formattedChangeValue:i.formattedTooltipValue," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==i.valueChange?null:i.valueChange.period)}}var mi=function(){function o(n,t){this.featureSwitches=n,this.formatValuePipe=t,this.arrowSize="micro",this.nilDisplayString=""}return o.prototype.ngOnChanges=function(n){var t,i,a,l,c,u;if(n.goal){this.valueChange=$e.r.calculateValueChange(this.goal,this.featureSwitches.featureSwitches.goalsSparklineChangeAggregations);var p=null!==(t=this.valueChange)&&void 0!==t&&t.isPercentage?void 0:this.goal.valuesFormatString;this.formattedChangeValue=this.formatValuePipe.transform(null===(i=this.valueChange)||void 0===i?void 0:i.changeAmount,p,!0,this.nilDisplayString),this.formattedChangeValue=null!==(a=this.valueChange)&&void 0!==a&&a.isPercentage?this.formattedChangeValue+"%":this.formattedChangeValue,this.formattedTooltipValue=this.formatValuePipe.transform(null===(l=this.valueChange)||void 0===l?void 0:l.changeAmount,p,!1,this.nilDisplayString),this.formattedTooltipValue=null!==(c=this.valueChange)&&void 0!==c&&c.isPercentage?this.formattedTooltipValue+"%":this.formattedTooltipValue,this.isCyclePeriodLabelLocalizable=$e.r.isCyclePeriodLabelLocalizable(null===(u=this.valueChange)||void 0===u?void 0:u.period)}},o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(en.vZ),e.\u0275\u0275directiveInject(fi.c))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["goal-change-cell"]],inputs:{goal:"goal",arrowSize:"arrowSize",nilDisplayString:"nilDisplayString"},features:[e.\u0275\u0275NgOnChangesFeature],decls:3,vars:1,consts:[["class","delta",4,"ngIf"],["valueAndPeriod",""],[1,"delta"],["name","arrow",3,"size","rotate180",4,"ngIf"],[1,"change",3,"pbiTooltip"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["name","arrow",3,"size"],[4,"ngIf"]],template:function(t,i){1&t&&(e.\u0275\u0275template(0,ll,4,5,"div",0),e.\u0275\u0275template(1,cl,2,2,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)),2&t&&e.\u0275\u0275property("ngIf",!1!==(null==i.goal||null==i.goal.metadata?null:i.goal.metadata.showPercentChange)&&!(null!=i.goal&&i.goal.valuesCategoryId))},dependencies:[U.NgIf,U.NgTemplateOutlet,Gn._,Ee.V,xt.F],styles:["[_nghost-%COMP%]{--container-align-items: center;--arrow-margin: none;--arrow-font-weight: var(--font-weight-regular);--change-font-size: var(--sm-font-size);--change-font-weight: var(--font-weight-regular)}.delta[_ngcontent-%COMP%]{display:flex;align-items:var(--container-align-items);font-size:var(--change-font-size);font-weight:var(--change-font-weight);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.delta[_ngcontent-%COMP%]   pbi-icon[_ngcontent-%COMP%]{margin:var(--arrow-margin);font-weight:var(--arrow-font-weight)}.delta[_ngcontent-%COMP%]   .rotate180[_ngcontent-%COMP%]{transform:rotate(180deg)}.change[_ngcontent-%COMP%]{margin-left:4px;overflow:hidden;text-overflow:ellipsis}"],changeDetection:0}),o}();function Qt(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",2),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){var t=e.\u0275\u0275nextContext();e.\u0275\u0275property("pbiTooltip",t.completionDate),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.completionDate,"\n")}}function os(o,n){1&o&&(e.\u0275\u0275elementStart(0,"div",3),e.\u0275\u0275text(1,"\u2014"),e.\u0275\u0275elementEnd())}var Ot=function(){function o(n){this.localizationService=n,this.formatOptions={day:"numeric",month:"short",year:"numeric"}}return o.prototype.ngOnChanges=function(){if(this.goal.completionDate){var n=this.localizationService.currentLanguageLocale;this.completionDate=Le.E.treatAsLocalDate(new Date(this.goal.completionDate)).toLocaleDateString(n,this.formatOptions)}},o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(St.o))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["goal-due-date-cell"]],inputs:{goal:"goal",formatOptions:"formatOptions"},features:[e.\u0275\u0275NgOnChangesFeature],decls:3,vars:2,consts:[["class","completion-date",3,"pbiTooltip",4,"ngIf","ngIfElse"],["noValueDash",""],[1,"completion-date",3,"pbiTooltip"],[1,"no-value-dash"]],template:function(t,i){if(1&t&&(e.\u0275\u0275template(0,Qt,2,2,"div",0),e.\u0275\u0275template(1,os,2,0,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)),2&t){var a=e.\u0275\u0275reference(2);e.\u0275\u0275property("ngIf",i.completionDate)("ngIfElse",a)}},dependencies:[U.NgIf,Ee.V],styles:["[_nghost-%COMP%]   .completion-date[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .no-value-dash[_ngcontent-%COMP%]{font-size:var(--lg-font-size);font-weight:var(--font-weight-regular);overflow:hidden}"],changeDetection:0}),o}();function ul(o,n){if(1&o&&e.\u0275\u0275element(0,"pbi-icon",4),2&o){e.\u0275\u0275nextContext();var t=e.\u0275\u0275reference(6);e.\u0275\u0275property("pbiTooltip",t)}}function rs(o,n){1&o&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275elementEnd()),2&o&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"Metrics_Tooltip_LinkedHierarchical")," "))}function dl(o,n){1&o&&(e.\u0275\u0275elementStart(0,"div")(1,"span",9),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"localize"),e.\u0275\u0275elementEnd()),2&o&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,2,"CurrentValue")),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(5,4,"Metrics_Tooltip_ValueAddedManually")," "))}function Yr(o,n){1&o&&(e.\u0275\u0275elementStart(0,"div")(1,"span",9),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"localize"),e.\u0275\u0275elementEnd()),2&o&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,2,"Role_DisplayName_TargetValue")),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(5,4,"Metrics_Tooltip_ValueAddedManually")," "))}function at(o,n){if(1&o&&(e.\u0275\u0275template(0,dl,6,6,"div",8),e.\u0275\u0275template(1,Yr,6,6,"div",8)),2&o){var t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngIf",!t.goal.valueConnection),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.goal.targetConnection)}}function pn(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",5),e.\u0275\u0275template(1,rs,3,3,"div",6),e.\u0275\u0275template(2,at,2,2,"ng-template",null,7,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&o){var t=e.\u0275\u0275reference(3),i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.goal.isLinked)("ngIfElse",t)}}var ur=function(){function o(n,t){this.goalRowService=n,this.featureSwitches=t,this.boldName=!1,this.innerIndent=0}return o.prototype.ngOnChanges=function(n){var t;n.scorecard&&(this.showHierarchyTooltips=!_.isEmpty(null===(t=this.scorecard)||void 0===t?void 0:t.hierarchyPaths)&&!this.featureSwitches.featureSwitches.goalsHierarchiesHideInfoTooltips)},o.prototype.onNameClick=function(n){this.goalRowService.onNameClick(this.goal,n)},o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(gi),e.\u0275\u0275directiveInject(en.vZ))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["goal-name-cell"]],inputs:{goal:"goal",scorecard:"scorecard",boldName:"boldName",innerIndent:"innerIndent"},features:[e.\u0275\u0275NgOnChangesFeature],decls:7,vars:7,consts:[["data-testid","goal-name-box",1,"name-box",3,"pbiTooltip","click"],[1,"inner-indent"],["class","name-info","name","info","size","mini",3,"pbiTooltip",4,"ngIf"],["infoTooltip",""],["name","info","size","mini",1,"name-info",3,"pbiTooltip"],[1,"goal-info-tooltip"],[4,"ngIf","ngIfElse"],["manualTooltip",""],[4,"ngIf"],[1,"tooltip-value-label"]],template:function(t,i){1&t&&(e.\u0275\u0275elementStart(0,"button",0),e.\u0275\u0275listener("click",function(l){return i.onNameClick(l)}),e.\u0275\u0275element(1,"div",1),e.\u0275\u0275elementStart(2,"span"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,ul,1,1,"pbi-icon",2),e.\u0275\u0275template(5,pn,4,2,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275classProp("bold-name",i.boldName),e.\u0275\u0275property("pbiTooltip",i.goal.name),e.\u0275\u0275advance(1),e.\u0275\u0275styleProp("width",i.innerIndent+"px"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(i.goal.name),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.showHierarchyTooltips&&(i.goal.isLinked||!i.goal.valueConnection||!i.goal.targetConnection)))},dependencies:[U.NgIf,Gn._,Ee.V,xt.F],styles:["[_nghost-%COMP%]{display:flex;flex:1;height:100%;overflow:hidden}[_nghost-%COMP%]   .name-box[_ngcontent-%COMP%]{flex:1;border:none;padding:0;background-color:transparent;overflow:hidden;white-space:break-spaces;text-overflow:ellipsis;text-align:left}[_nghost-%COMP%]   .name-box[_ngcontent-%COMP%]:hover{text-decoration:underline}[_nghost-%COMP%]   .name-box.bold-name[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:var(--font-weight-semi-bold)}[_nghost-%COMP%]   .name-box[_ngcontent-%COMP%]   .name-info[_ngcontent-%COMP%]{margin:0 6px}[_nghost-%COMP%]   .name-box[_ngcontent-%COMP%]   .inner-indent[_ngcontent-%COMP%]{display:inline-block}"],changeDetection:0}),o}(),xn=function(n){return{userEmail:n}};function as(o,n){if(1&o&&e.\u0275\u0275element(0,"user-details-host",5),2&o){var t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("details",e.\u0275\u0275pureFunction1(3,xn,t.owners[0]))("showUserInfo",!0)("showTooltip",!0)}}function pl(o,n){if(1&o&&e.\u0275\u0275element(0,"avatar-row",6),2&o){var t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("emails",t.owners)("numAvatarsToShow",t.avatarRowCount)("rowStyle",t.rowStyle)("avatarSize",t.avatarSize)}}function ls(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",2),e.\u0275\u0275template(1,as,1,5,"user-details-host",3),e.\u0275\u0275template(2,pl,1,4,"ng-template",null,4,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&o){var t=e.\u0275\u0275reference(3),i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",1===i.owners.length&&!i.alwaysShowAvatarRow)("ngIfElse",t)}}function vi(o,n){1&o&&(e.\u0275\u0275elementStart(0,"div",2),e.\u0275\u0275text(1,"\u2014"),e.\u0275\u0275elementEnd())}var to=function(){function o(){this.rowStyle="spread",this.avatarSize="medium",this.avatarRowCount=4}return o.prototype.ngOnChanges=function(n){var t;n.goal&&(this.owners=this.goal.owner?[this.goal.owner]:[],this.goal.additionalOwners&&(t=this.owners).push.apply(t,this.goal.additionalOwners.map(function(i){return i.userPrincipalName})))},o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["goal-owners-cell"]],inputs:{goal:"goal",alwaysShowAvatarRow:"alwaysShowAvatarRow",rowStyle:"rowStyle",avatarSize:"avatarSize",avatarRowCount:"avatarRowCount"},features:[e.\u0275\u0275NgOnChangesFeature],decls:3,vars:2,consts:[["class","content",4,"ngIf","ngIfElse"],["emptyOwner",""],[1,"content"],[3,"details","showUserInfo","showTooltip",4,"ngIf","ngIfElse"],["hasMultipleOwners",""],[3,"details","showUserInfo","showTooltip"],[3,"emails","numAvatarsToShow","rowStyle","avatarSize"]],template:function(t,i){if(1&t&&(e.\u0275\u0275template(0,ls,4,2,"div",0),e.\u0275\u0275template(1,vi,2,0,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)),2&t){var a=e.\u0275\u0275reference(2);e.\u0275\u0275property("ngIf",(null==i.owners?null:i.owners.length)>0)("ngIfElse",a)}},dependencies:[U.NgIf,Fe.s,qe],styles:["[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{overflow:hidden}[_nghost-%COMP%]     .user-info{color:var(--scorecard-tableRowForegroundColor)!important;font-family:var(--scorecard-fontFamily)}"],changeDetection:0}),o}(),no=function(){function o(){}return o.buildSparklineValues=function(n,t,i){if(void 0===i&&(i=7),t&&n.aggregations)return _.chain(n.aggregations).filter(function(l){return"Sparkline"===l.type}).sortBy(function(l){return new Date(l.timestamp)}).takeRight(i).map(function(l){return{scorecardId:n.scorecardId,goalId:n.id,lastModifiedTime:l.maxLastModifiedTime,timestamp:l.timestamp,value:l.value,valueDisplayString:l.valueDisplayString,createdTime:l.calculationTime,lastModifiedBy:null}}).value();var a=_.sortBy(n.goalValues,function(l){return new Date(l.timestamp)});return _.takeRight(a.filter(function(l){return null!=l.value&&null!=l.timestamp}),i)},o.getSparklineOptions=function(n,t,i){var a,l,c,u,p,y,P,x=X.isDarkMode(),N=$e.r.buildCurrentGoalValue(n),W=ie.p.getGoalStatus(N?.status,t),te=ie.p.getGoalSparklineColor(W.color,null===(a=i?.scorecardDisplayOptions)||void 0===a?void 0:a.isMobileLayout,x);return{height:null!==(u=null===(c=null===(l=i?.scorecardDisplayOptions)||void 0===l?void 0:l.sparklineOptions)||void 0===c?void 0:c.height)&&void 0!==u?u:48,width:null!==(P=null===(y=null===(p=i?.scorecardDisplayOptions)||void 0===p?void 0:p.sparklineOptions)||void 0===y?void 0:y.width)&&void 0!==P?P:120,lineColor:te,dotColor:te,showMin:!1,showMax:!1}},o}(),dr=T(48501),gl=T(88940),Io=T(14463),Fo=T(66794),_e=T(47245),Bt=T(61036),Bn=T(29589),Di=T(47508),Ii=T(79154),pr=T(39681),Ci=T(32379),oi=T(78843),gr=T(61289),rn=T(26743),et=T(94419),Vn=T(80777),Rn=T(40956),Kr=T(2330),ft=T(29866),ke=T(98136),hl=T(232),Fi=T(698),fl=function(n){return{"hide-legend":n}};function ml(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",3)(1,"div",4),e.\u0275\u0275element(2,"div",5),e.\u0275\u0275elementStart(3,"span"),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"localize"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div",4),e.\u0275\u0275element(7,"div",6),e.\u0275\u0275elementStart(8,"span"),e.\u0275\u0275text(9),e.\u0275\u0275pipe(10,"localize"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(11,"div",4)(12,"div",7),e.\u0275\u0275element(13,"div",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"span"),e.\u0275\u0275text(15),e.\u0275\u0275pipe(16,"localize"),e.\u0275\u0275elementEnd()()()),2&o){var t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(12,fl,"Hidden"==t.legend)),e.\u0275\u0275advance(2),e.\u0275\u0275styleProp("background-color",t.color),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(5,6,"Progress")),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(10,8,"Milestones")),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(16,10,"Target_Final"))}}function vl(o,n){if(1&o&&e.\u0275\u0275element(0,"visual-modern",9),2&o){var t=e.\u0275\u0275nextContext();e.\u0275\u0275property("viewModel",t.visualDefinition)("useOnPushChangeDetection",!0)}}var ea="Time",ta="Value",hr="Targets",fr="Milestones",mr="FinalTarget",vr={xAxis:{show:!1},yAxis:{show:!1}},Gi=function(){function o(n,t,i,a,l,c,u,p){this.geocoder=n,this.geolocation=t,this.localizationService=i,this.moduleLoader=a,this.promiseFactory=l,this.visualPlugin=c,this.visualHostTooltipServiceFactory=u,this.changeDetector=p,this.showGoalTargets=!1,this.axesOptions={xAxis:{show:!0},yAxis:{show:!0}},this.legend="None",this.showZoom=!1,this.type="LineChart",this.targetLineColor=pe.gT.GoalTargetsLineColor,this.onSelected=new e.EventEmitter}return Object.defineProperty(o.prototype,"isComboChart",{get:function(){return"ComboChart"===this.type},enumerable:!1,configurable:!0}),o.prototype.ngOnInit=function(){var t,n=this;this.shadeCurrentArea=null!==(t=this.shadeCurrentArea)&&void 0!==t?t:this.isComboChart,this.visualPlugin.ensureBuiltInPlugins().then(function(){n.initializeVisual(),n.isLoaded=!0,n.changeDetector.detectChanges()})},o.prototype.ngOnChanges=function(n){(n.values||n.color||n.showGoalTargets||n.showAxis||n.targetLineColor||n.axesOptions||n.shadeCurrentArea)&&(this.generateDataView(),this.update())},o.prototype.initializeVisual=function(){var t,n=this,i=(0,pr.ED)((0,_e.q)({geocoder:this.geocoder,geolocation:this.geolocation,localizationService:this.localizationService,moduleLoader:this.moduleLoader,promiseFactory:this.promiseFactory,visualHostTooltipService:this.visualHostTooltipServiceFactory.create(),getAzureMapToken:void 0,azureMapsEndpoint:void 0,geocoderIndexedDB:void 0}),function(l){l.persistProperties=function(c,u){return n.persistProperties(c)},l.getLocalizedString=function(c){for(var u,p=[],y=1;y<arguments.length;y++)p[y-1]=arguments[y];return(u=n.localizationService).format.apply(u,(0,S.ev)([c],p||[],!1))},l.getViewMode=function(){return 0},l.locale=function(){return(0,Bt.uD)()},l.promiseFactory=function(){return n.promiseFactory},l.onSelect=function(c){var u;if(!_.isEmpty(c?.visualObjects)){var p=null===(u=_.first(c.visualObjects))||void 0===u?void 0:u.selectorsByColumn;if(p){var y=_.first(p.dataMap[ea]);if((0,Ci.yN)(y)){var P=(0,rn.KX)(y.expr),x=_.first(P);x&&x.value&&n.onSelected.emit(x.value)}else M.fF.assertFail("Unexpected selector")}}}}),a=Di.L.lineChart.name;"AreaChart"===this.type?a=Di.L.areaChart.name:"ColumnChart"===this.type?a=Di.L.columnChart.name:"ComboChart"===this.type&&(a=Di.L.lineClusteredColumnComboChart.name),this.visualDefinition={interactivityOptions:{},type:a,allowInvalidDataView:!0,themeCollection:void 0,viewport:null!==(t=this.viewportSize)&&void 0!==t?t:{height:100,width:100,scale:1},dataTransforms:void 0,hostServices:i,visualAdapterHostServices:{startProgressBar:_.noop,stopProgressBar:_.noop,getNextDataSegment:function(){return(0,S.mG)(n,void 0,void 0,function(){return(0,S.Jh)(this,function(c){return[2,{}]})})}},stylePresetName:void 0,additionalObjectUpdates:_.noop,visualPlugin:this.visualPlugin},this.update()},o.prototype.update=function(){var n,t;if(this.visualDefinition){var i={categoryAxis:[{properties:{show:(0,et.O7)(this.axesOptions.xAxis.show)}}],valueAxis:[{properties:{show:(0,et.O7)(this.axesOptions.yAxis.show)}}],dataPoint:[{selector:{metadata:ta},properties:{fill:{solid:{color:(0,et.fL)(this.color)}}}},{selector:{metadata:hr},properties:{fill:{solid:{color:(0,et.fL)(this.targetLineColor)}}}},{selector:{metadata:fr},properties:{fill:{solid:{color:(0,et.fL)(this.targetLineColor)}}}},{selector:{metadata:mr},properties:{fill:{solid:{color:(0,et.fL)(this.targetLineColor)}}}}],lineStyles:[{selector:{metadata:hr},properties:{lineStyle:(0,et.fL)("dashed"),strokeWidth:(0,et.cA)(1.5),showMarker:(0,et.O7)(!1)}},{selector:{metadata:fr},properties:{showMarker:(0,et.O7)(!0),markerSize:(0,et.cA)(5),markerShape:(0,et.fL)("circle"),strokeWidth:(0,et.cA)(0)}},{selector:{metadata:mr},properties:{showMarker:(0,et.O7)(!0),markerSize:(0,et.cA)(8),markerShape:(0,et.fL)("diamond"),strokeWidth:(0,et.cA)(0)}}],legend:[{properties:{show:(0,et.O7)(!1)}}],zoom:[{properties:{show:(0,et.O7)(this.showZoom),showOnValueAxis:(0,et.O7)(!1)}}]};if(this.isComboChart){for(var a=0,l=i.lineStyles;a<l.length;a++){var c=l[a];!_.isUndefined(c.selector)&&c.selector.metadata!==ta&&(c.properties.areaShow=(0,et.O7)(!1))}i.lineStyles.push({properties:{areaShow:(0,et.O7)(this.shadeCurrentArea)}})}this.setAxisFontProperties(i.categoryAxis[0].properties,null===(n=this.axesOptions)||void 0===n?void 0:n.xAxis.fontProperties),this.setAxisFontProperties(i.valueAxis[0].properties,null===(t=this.axesOptions)||void 0===t?void 0:t.yAxis.fontProperties),this.visualDefinition.dataTransforms={objects:i},this.applyDataTransformsForComboIfNeeded(),this.visualDefinition.data={dataView:this.dataView}}},o.prototype.setAxisFontProperties=function(n,t){t&&(t.color&&(n.labelColor={solid:{color:(0,et.fL)(t.color)}}),t.family&&(n.fontFamily=(0,et.fL)(t.family)),t.size&&(n.fontSize=(0,et.gH)(t.size.pt)),t.weight&&(n.bold=(0,et.O7)(t.weight===Ii.en)),t.style&&(n.italic=(0,et.O7)(t.style===Ii.BF)),t.textDecoration&&(n.underline=(0,et.O7)(t.textDecoration===Ii.f0)))},o.prototype.persistProperties=function(n){var t=_.isArray(n)?{merge:n}:n;this.visualDefinition&&this.checkAndApplyDataTransformPropertyChanges(t)},o.prototype.checkAndApplyDataTransformPropertyChanges=function(n){var t;if(t=this.isComboChart?Di.L.lineClusteredColumnComboChart.capabilities:Di.L.lineChart.capabilities,!_.isEmpty(n.merge)||!_.isEmpty(n.remove)){var a=t.objects;this.update(),(0,Fo._6)(n,a,this.visualDefinition.dataTransforms.objects),this.changeDetector.detectChanges()}},o.prototype.onResize=function(n){this.viewportSize={width:n.width,height:n.height,scale:1},this.visualDefinition&&(this.visualDefinition.viewport=this.viewportSize)},o.prototype.generateDataView=function(){var n,t,i,a,l,c,u,p,y,P,x=[{displayName:this.localizationService.get("Date"),queryName:ea,type:Vn.Ge.fromPrimitiveTypeAndCategory(6),roles:{Category:!0}},{displayName:this.localizationService.get("Role_DisplayName_Value"),queryName:ta,type:Vn.Ge.fromPrimitiveTypeAndCategory(3),roles:{Y:!0},index:0,objects:(n={},n[Bn.iu.objectName]=(t={},t[Bn.iu.propertyName]=this.formatString,t),n)}];this.showGoalTargets&&(x.push({displayName:this.localizationService.get("Target"),queryName:hr,type:Vn.Ge.fromPrimitiveTypeAndCategory(3),roles:{Y:!0},index:1,objects:(i={},i[Bn.iu.objectName]=(a={},a[Bn.iu.propertyName]=this.formatString,a),i)}),x.push({displayName:this.localizationService.get("Target_Milestone_Due"),queryName:fr,type:Vn.Ge.fromPrimitiveTypeAndCategory(3),roles:{Y:!0},index:2,objects:(l={},l[Bn.iu.objectName]=(c={},c[Bn.iu.propertyName]=this.formatString,c),l)}),x.push({displayName:this.localizationService.get("Target_Final_Due"),queryName:mr,type:Vn.Ge.fromPrimitiveTypeAndCategory(3),roles:{Y:!0},index:3,objects:(u={},u[Bn.iu.objectName]=(p={},p[Bn.iu.propertyName]=this.formatString,p),u)})),this.updateColumnsForComboIfNeeded(x);var N=(0,et.Oh)((0,et.fL)("Date"),"Date"),W=null!==(P=this.values)&&void 0!==P?P:[];W=W.filter(function(Qe){return!_.isNil(Qe.value)||!_.isNil(Qe.target)}),W=_.sortBy(W,function(Qe){return new Date(Qe.timestamp)});var te,me,Oe=[],ve=[],Re=[];if(this.showGoalTargets){te=[],me=[];for(var Xe=(y=function(){for(var Qe=W.length-1;Qe>=0;Qe--)if(!_.isNil(W[Qe].target))return[W[Qe].target,W[Qe].timestamp];return[void 0,void 0]}())[0],ot=y[1],Dt=function(_t){for(var Nt=_t+1;Nt<W.length&&_.isNil(W[Nt].target);)Nt++;return Nt<W.length?W[Nt].target:void 0},ct=0;ct<W.length;ct++){var mt=W[ct],H=Dt(ct);te.push(mt.timestamp),me.push(mt.value),Oe.push(mt.target!==H&&mt.timestamp!==ot?mt.target:void 0),ve.push(mt.timestamp===ot?mt.target:void 0),_.isNil(mt.target)?Re.push(0===ct?H:ct===W.length-1?Xe:void 0):(Re.push(mt.target),_.isNil(H)||(te.push(mt.timestamp),Re.push(H),me.push(void 0),Oe.push(void 0),ve.push(void 0)))}}else te=W.map(function(Qe){return Qe.timestamp}),me=W.map(function(Qe){return Qe.value});var le=[];le.push({source:x[1],values:me}),this.showGoalTargets&&(le.push({source:x[3],values:Oe}),le.push({source:x[4],values:ve}),le.push({source:x[2],values:Re}));var ce={metadata:{columns:x},categorical:{categories:[{source:x[0],values:_.map(te,function(Qe){var _t=new Date(Qe),Nt=Le.E.treatAsLocalDate(_t);return Nt.epochTimeStamp=_t.getTime(),Nt}),identity:_.map(te,function(Qe){return(0,oi.TZ)((0,et.Dg)(N,(0,et.fL)(Qe)))})}],values:(0,gr.Yv)(le)}};this.dataView=ce},o.prototype.updateColumnsForComboIfNeeded=function(n){if(this.isComboChart)for(var t=0,i=0,a=n;i<a.length;i++){var l=a[i];l.queryName!==ea&&(l.roles={Y2:!0}),l.index=t,t++}},o.prototype.applyDataTransformsForComboIfNeeded=function(){if(this.isComboChart){var n=this.dataView.metadata.columns.map(function(a){return{displayName:a.displayName,queryName:a.queryName,roles:a.roles}});this.visualDefinition.dataTransforms.selects=n;var t={};for(var i in n)t[i]=!0;this.visualDefinition.dataTransforms.splits=[{selects:void 0},{selects:t}]}},o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(Rn.i),e.\u0275\u0275directiveInject(dr._1),e.\u0275\u0275directiveInject(St.o),e.\u0275\u0275directiveInject(Kr.m),e.\u0275\u0275directiveInject(Io.t),e.\u0275\u0275directiveInject(ft.D),e.\u0275\u0275directiveInject(ke.q),e.\u0275\u0275directiveInject(e.ChangeDetectorRef))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["goal-history-chart"]],inputs:{values:"values",formatString:"formatString",color:"color",showGoalTargets:"showGoalTargets",axesOptions:"axesOptions",legend:"legend",showZoom:"showZoom",type:"type",shadeCurrentArea:"shadeCurrentArea",targetLineColor:"targetLineColor"},outputs:{onSelected:"onSelected"},features:[e.\u0275\u0275ProvidersFeature((0,S.ev)([],gl.H,!0)),e.\u0275\u0275NgOnChangesFeature],decls:3,vars:2,consts:[["class","legend",3,"ngClass",4,"ngIf"],[1,"linechart-wrapper",3,"on-resize"],["class","linechart",3,"viewModel","useOnPushChangeDetection",4,"ngIf"],[1,"legend",3,"ngClass"],[1,"label"],[1,"square"],[1,"circle","filled"],[1,"square","center-diamond"],[1,"diamond","filled"],[1,"linechart",3,"viewModel","useOnPushChangeDetection"]],template:function(t,i){1&t&&(e.\u0275\u0275template(0,ml,17,14,"div",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275listener("on-resize",function(l){return i.onResize(l)}),e.\u0275\u0275template(2,vl,1,2,"visual-modern",2),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("ngIf","None"!=i.legend),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",i.isLoaded&&!!i.viewportSize))},dependencies:[U.NgClass,U.NgIf,hl.y,Fi.O,xt.F],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   .linechart-wrapper[_ngcontent-%COMP%]{flex:1;position:relative}[_nghost-%COMP%]   .linechart-wrapper[_ngcontent-%COMP%]   .linechart[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;border-radius:4px}[_nghost-%COMP%]   .legend[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:8px}[_nghost-%COMP%]   .legend[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}[_nghost-%COMP%]   .legend[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%], [_nghost-%COMP%]   .legend[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{width:12px;height:12px}[_nghost-%COMP%]   .legend[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{border-radius:50%}[_nghost-%COMP%]   .legend[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   .center-diamond[_ngcontent-%COMP%]{display:flex;align-items:center}[_nghost-%COMP%]   .legend[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   .diamond[_ngcontent-%COMP%]{width:10px;height:10px;transform:rotate(45deg)}[_nghost-%COMP%]   .legend[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   .filled[_ngcontent-%COMP%]{background-color:#8a8886}[_nghost-%COMP%]   .hide-legend[_ngcontent-%COMP%]{visibility:hidden}"],changeDetection:0}),o}(),Vi=T(64929);function ss(o,n){if(1&o&&e.\u0275\u0275element(0,"goal-history-chart",1),2&o){var t=e.\u0275\u0275nextContext();e.\u0275\u0275styleProp("width",t.options.width+"px")("height",t.options.height+"px"),e.\u0275\u0275property("width",t.options.width)("height",t.options.height)("values",t.values)("formatString",t.goal.valuesFormatString)("color",t.options.lineColor)("showGoalTargets",!1)("axesOptions",t.axesOptions)("legend","None")}}var Go=function(){function o(n,t){this.scorecardService=n,this.scorecardConfigurationService=t,this.axesOptions=vr}return o.prototype.ngOnChanges=function(n){var i,a,l,t=this;if((n.goal||n.sparklineValues)&&(this.isCategorical=!_.isEmpty(this.scorecardService.getGoalValueCategories(this.goal)),this.values=null!==(i=this.sparklineValues)&&void 0!==i?i:no.buildSparklineValues(this.goal,!0).map(function(p){return{value:p.value,timestamp:p.timestamp}})),n.goal||n.height||n.width){var c=null!==(l=null===(a=this.scorecardConfigurationService)||void 0===a?void 0:a.getConfiguration())&&void 0!==l?l:{scorecardDisplayOptions:{isMobileLayout:!1}},u=(0,b.ZP)(c,function(p){p.scorecardDisplayOptions.sparklineOptions||(p.scorecardDisplayOptions.sparklineOptions={}),t.height&&(p.scorecardDisplayOptions.sparklineOptions.height=t.height),t.width&&(p.scorecardDisplayOptions.sparklineOptions.width=t.width)});this.options=no.getSparklineOptions(this.goal,this.scorecardService.getGoalStatuses(this.goal),u)}},o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(Ht),e.\u0275\u0275directiveInject(Vi.V,8))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["goal-sparkline-cell"]],inputs:{goal:"goal",sparklineValues:"sparklineValues",height:"height",width:"width"},features:[e.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[[3,"width","height","values","formatString","color","showGoalTargets","axesOptions","legend",4,"ngIf"],[3,"width","height","values","formatString","color","showGoalTargets","axesOptions","legend"]],template:function(t,i){1&t&&e.\u0275\u0275template(0,ss,1,12,"goal-history-chart",0),2&t&&e.\u0275\u0275property("ngIf",!i.isCategorical&&!i.goal.currentRefreshInProgress&&(null==i.values?null:i.values.length)>1&&i.options)},dependencies:[U.NgIf,Gi],changeDetection:0}),o}();function na(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",1)(1,"span",2),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&o){var t=e.\u0275\u0275nextContext();e.\u0275\u0275styleMap(t.style),e.\u0275\u0275advance(1),e.\u0275\u0275property("pbiTooltip",t.text),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.text)}}var io=function(){function o(n){this.localizationService=n,this.goalStatusHelper=new ie.p(this.localizationService)}return o.prototype.ngOnChanges=function(){this.configText(),this.configStyle()},o.prototype.configStyle=function(){if(this.outlineOnly){var n=ie.p.getGoalStatus(this.status,this.goalStatuses).color,t=ie.p.getGoalSparklineColor(n,this.isMobile,this.isDarkMode);this.style={color:void 0,"background-color":void 0,border:"1px solid ".concat(t)}}else{n=ie.p.getGoalStatus(this.status,this.goalStatuses).color;var i=ie.p.getGoalStatusTextColor(n,this.isMobile,this.isDarkMode),a=ie.p.getGoalStatusColor(n,this.isMobile,this.isDarkMode);this.style={color:i,"background-color":a,border:"none"},this.isMobile&&!this.text.trim().length&&(this.style.visibility="hidden")}},o.prototype.configText=function(){var n,t=null===(n=ie.p.getGoalStatus(this.status,this.goalStatuses))||void 0===n?void 0:n.displayName;this.text=this.goalStatusHelper.tryLocalizeDisplayName(t)},o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(St.o))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["status-icon"]],inputs:{goalStatuses:"goalStatuses",isDarkMode:"isDarkMode",isMobile:"isMobile",outlineOnly:"outlineOnly",status:"status"},features:[e.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[["class","status",3,"style",4,"ngIf"],[1,"status"],[3,"pbiTooltip"]],template:function(t,i){1&t&&e.\u0275\u0275template(0,na,3,4,"div",0),2&t&&e.\u0275\u0275property("ngIf",i.text)},dependencies:[U.NgIf,Ee.V],styles:[".status[_ngcontent-%COMP%]{height:24px;line-height:24px;padding-left:10px;padding-right:10px;border-radius:12px;white-space:nowrap;text-align:center;font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400)}.status[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{white-space:nowrap;text-overflow:ellipsis;overflow:hidden;max-width:-webkit-fill-available;display:inline-block}",'mobile-scorecard-container[_nghost-%COMP%]   .status[_ngcontent-%COMP%], mobile-scorecard-container   [_nghost-%COMP%]   .status[_ngcontent-%COMP%]{height:18px;line-height:18px;padding-left:10px;padding-right:10px;border-radius:12px;white-space:nowrap;text-align:center;font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-regular, 400);font-weight:500;text-overflow:ellipsis;overflow:hidden;min-width:35px}'],changeDetection:0}),o}(),An=function(){function o(n){this.scorecardService=n}return o.prototype.ngOnChanges=function(n){n.goal&&(this.status=$e.r.buildCurrentGoalValue(this.goal).status,this.goalStatuses=this.scorecardService.getGoalStatuses(this.goal))},o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(Ht))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["goal-status-cell"]],inputs:{goal:"goal"},features:[e.\u0275\u0275NgOnChangesFeature],decls:1,vars:2,consts:[[3,"status","goalStatuses"]],template:function(t,i){1&t&&e.\u0275\u0275element(0,"status-icon",0),2&t&&e.\u0275\u0275property("status",i.status)("goalStatuses",i.goalStatuses)},dependencies:[io],styles:["[_nghost-%COMP%]{display:flex;flex:1;height:100%;overflow:hidden;align-items:center;justify-content:center}"],changeDetection:0}),o}();function ia(o){if("number"==typeof o)return o;switch(o.toString().trim().toLowerCase()){case"sum":return 1;case"average":return 2;case"min":return 3;case"max":return 4;default:return void M.fF.assertNever(o)}}function Cl(o){var n;return(n={})[1]=o.get("Rollups_Submetrics_Sum"),n[2]=o.get("Rollups_Submetrics_Average"),n[3]=o.get("Rollups_Submetrics_Min"),n[4]=o.get("Rollups_Submetrics_Max"),n}function oa(o){if(o?.id){for(var n=[],t={hierarchyId:o.hierarchyId,levels:n};o;)n.push(o.value),o=o.parent;return n.reverse(),t}M.fF.assertFail("Invalid item")}function ra(o,n){for(var i,t=n,a=function(P){if(!(i=_.find(t,function(x){return x.value===P})))return M.fF.assertFail("Item not found for path"),{value:void 0};t=i.children},l=0,c=o;l<c.length;l++){var p=a(c[l]);if("object"==typeof p)return p.value}return i}function Cr(o,n){for(var t=[],i=0,a=o;i<a.length;i++){var l=a[i],c=ra(l.levels,n[l.hierarchyId]);c&&t.push(c)}return t}function oo(o){return _.map(_.filter(o,function(n){return!!n.id}),function(n){return oa(n)})}var Ri=T(3468);function ao(o){return(0,S.pi)((0,S.pi)({},o),{connections:_.map(o.connections,function(n){return function(o,n){var t={datasetId:o.datasetId,levels:_.map(n,function(i){return function(o){return{levelId:o.levelId,fieldExpr:o.field?Ri.ib.deserializeExpr(JSON.parse(o.field)):void 0,filter:o.fieldFilter?Ri.ib.deserializeFilter(JSON.parse(o.fieldFilter)):void 0}}(_.find(o.levels,function(l){return l.levelId===i.id})??{levelId:i.id,field:void 0})})};return o.ownerField&&(t.ownerFieldExpr=Ri.ib.deserializeExpr(JSON.parse(o.ownerField))),t}(n,o.levels)})})}function lo(o){return{id:o.id,levels:o.levels,name:o.name,scorecardId:o.scorecardId,owner:o.owner,connections:_.map(o.connections,function(n){return function(o){var n={datasetId:o.datasetId,levels:_.map(o.levels,function(t){return function(o){return{levelId:o.levelId,field:o.fieldExpr?JSON.stringify(Ri.ib.serializeExpr(o.fieldExpr)):void 0,fieldFilter:o.filter?JSON.stringify(Ri.ib.serializeFilter(o.filter)):void 0}}(t)})};return o.ownerFieldExpr&&(n.ownerField=JSON.stringify(Ri.ib.serializeExpr(o.ownerFieldExpr))),n}(n)})}}var Ai=T(72489),Ro=T(9936),jn=function(){function o(n,t,i){this.goalsHttpService=n,this.errorService=t,this.localization=i,this._hierarchies$=new Me.X(null),this._hierarchyItems$=new Me.X({}),this._hierarchyErrors$=new Me.X({}),this._isSaving$=new Me.X(!1),this.loadingHierarchyItems=new Set,this.isLoadingHierarchies=!1,this.isSaving$=this._isSaving$,this.hierarchies$=this._hierarchies$.pipe((0,V.x)()),this.hierarchyItems$=this._hierarchyItems$.pipe((0,Rt.h)(function(a){return!_.isEmpty(a)}),(0,V.x)()),this.hierarchyErrors$=this._hierarchyErrors$.pipe((0,V.x)()),this.hasHierarchies$=this.hierarchies$.pipe((0,Rt.h)(function(a){return!!a}),(0,xe.U)(function(a){return!_.isEmpty(a)}),(0,V.x)())}return Object.defineProperty(o.prototype,"hierarchies",{get:function(){return this._hierarchies$.value},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"hierarchyItems",{get:function(){return this._hierarchyItems$.value},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"hierarchyErrors",{get:function(){return this._hierarchyErrors$.value},enumerable:!1,configurable:!0}),o.prototype.setHierarchies=function(n){this._hierarchies$.next(n)},o.prototype.setHierarchyItems=function(n,t){var i=_.find(this.hierarchies,function(a){return a.id===n});M.fF.assertValue(i,"No hierarchies with id ".concat(n)),this._hierarchyItems$.next((0,b.Uy)(this.hierarchyItems,function(a){a[n]=t}))},o.prototype.setHierarchyErrors=function(n){this._hierarchyErrors$.next(n)},o.prototype.saveHierarchies=function(){var n;return(0,S.mG)(this,void 0,void 0,function(){var t,i,a,l,c,u,p,y,x,N,W,te,me,Oe,Re,Xe=this;return(0,S.Jh)(this,function(ot){switch(ot.label){case 0:if(!this.hierarchies||!this.scorecardId||this.isLoadingHierarchies)return M.fF.assertFail("Hierarchies not loaded"),[2];if(this._isSaving$.value)return M.fF.assertFail("Save already in progress"),[2];if(_.some(this.hierarchyErrors,function(Dt){return _.some(Dt,function(ct){return"Error"===ct.severity})}))return M.fF.assertFail("Save blocked by error"),[2];this._isSaving$.next(!0),ot.label=1;case 1:return ot.trys.push([1,11,12,13]),[4,this.goalsHttpService.getScorecardHierarchies(this.groupId,this.scorecardId).toPromise()];case 2:for(t=ot.sent(),i=_.filter(t,function(Dt){return!_.some(Xe.hierarchies,function(ct){return Dt.id===ct.id})}),a=[],l=_.filter(_.flatten(_.values(this.hierarchyErrors)),function(Dt){return"MetricsHierarchy_NoDatasetAccess"===Dt.code}),c=function(ct){var mt=_.find(u.hierarchies,function(le){return le.id===ct.hierarchyId});M.fF.assertValue(mt,"Hierarchy with id ".concat(ct.hierarchyId," not found to clear invalid mapping"));var H=_.find(mt.connections,function(le){return le.datasetId===ct.datasetId});M.fF.assertValue(H,"Connection with id ".concat(ct.datasetId," not found to clear invalid mapping")),H.levels.forEach(function(le){le.fieldExpr=void 0,le.filter=void 0})},u=this,p=0,y=l;p<y.length;p++)c(y[p]);x=function(ct){var mt,H,le,ce;return(0,S.Jh)(this,function(Qe){switch(Qe.label){case 0:return ct.isNew?_.some(ct.connections,function(_t){return _.some(_t?.levels,function(Nt){return!!Nt?.fieldExpr})})?(H=function(o){var n=lo(o);return{name:n.name,levels:n.levels,connections:n.connections}}(ct),[4,N.goalsHttpService.createScorecardHierarchy(N.groupId,N.scorecardId,H).toPromise()]):[3,2]:[3,3];case 1:le=Qe.sent(),ce=ao(le),a.push(ce),Qe.label=2;case 2:return[3,7];case 3:return(mt=_.find(t,function(_t){return _t.id===ct.id}))?[3,4]:(M.fF.assertFail("Cannot updated a deleted hierarchy"),[3,7]);case 4:return _.isEqual(lo(ao(mt)),lo(ct))?[3,6]:(H=function(o){return{hierarchy:lo(o)}}(ct),[4,N.goalsHttpService.updateScorecardHierarchy(N.groupId,N.scorecardId,ct.id,H).toPromise()]);case 5:return le=Qe.sent(),ce=ao(le),a.push(ce),[3,7];case 6:a.push(ct),Qe.label=7;case 7:return[2]}})},N=this,W=0,te=this.hierarchies,ot.label=3;case 3:return W<te.length?[5,x(te[W])]:[3,6];case 4:ot.sent(),ot.label=5;case 5:return W++,[3,3];case 6:me=0,Oe=i,ot.label=7;case 7:return me<Oe.length?[4,this.goalsHttpService.deleteScorecardHierarchy(this.groupId,this.scorecardId,Oe[me].id).toPromise()]:[3,10];case 8:ot.sent(),ot.label=9;case 9:return me++,[3,7];case 10:return this.setHierarchies(a),[3,13];case 11:throw Re=ot.sent(),this.errorService.error(this.localization.get("MetricsHierarchy_Cannot_Save_Hierarchies"),"GoalsCannotSaveHierarchies",{requestId:Re?.requestId,statusCode:null===(n=Re?.status)||void 0===n?void 0:n.toString()}),Re;case 12:return this._isSaving$.next(!1),[7];case 13:return[2]}})})},o.prototype.loadHierarchies=function(n,t,i){var a=this;return void 0===i&&(i=!0),this.scorecardId===t&&i&&this.hierarchies||this.scorecardId===t&&this.isLoadingHierarchies||(this.scorecardId=t,this.groupId=n,this.isLoadingHierarchies=!0,this.goalsHttpService.getScorecardHierarchies(n,this.scorecardId).toPromise().then(function(l){if(a.setHierarchies(function(o){return _.map(o,function(n){return ao(n)})}(l)),!i&&!_.isEmpty(a.hierarchyItems))for(var c in a.hierarchyItems)a.loadHierarchyItems(c,!1)}).catch(function(l){throw a.setHierarchies([]),l}).finally(function(){a.isLoadingHierarchies=!1,a.gc()})),this.hierarchies$},o.prototype.loadHierarchyItems=function(n,t){var i=this;return void 0===t&&(t=!0),M.fF.assertValue(this.scorecardId,"No scorecard loaded"),(!t||_.isEmpty(this.hierarchyItems[n])&&!this.loadingHierarchyItems.has(n))&&(this.loadingHierarchyItems.add(n),this.goalsHttpService.getScorecardHierarchyItems(this.groupId,this.scorecardId,n).toPromise().then(function(a){return i.setHierarchyItems(n,function(o){for(var n=_.cloneDeep(o),t=_.groupBy(n,function(p){return p.id}),i=[],a=0,l=n;a<l.length;a++){var c=l[a];if(c.parentHierarchyItemId){var u=_.first(t[c.parentHierarchyItemId]);c.parent=u,u?u.children?u.children.push(c):u.children=[c]:M.fF.assertFail("Parent item missing")}else i.push(c)}return i}(a))}).catch(function(a){var l;M.fF.assertFail("Error loading hierarchy items. "+(null===(l=a?.error)||void 0===l?void 0:l.message)),i.setHierarchyItems(n,[])}).finally(function(){return i.loadingHierarchyItems.delete(n)})),this.hierarchyItems$.pipe((0,xe.U)(function(a){return a[n]}),(0,V.x)())},o.prototype.getHierarchyItemsForPath=function(n){var t=this;return _.isEmpty(n)?(0,re.of)(null):(0,Ro.D)(_.map(n,function(i){return t.loadHierarchyItems(i.hierarchyId).pipe((0,Rt.h)(function(a){return!!a}),(0,ue.q)(1))})).pipe((0,xe.U)(function(){return Cr(n,t.hierarchyItems)}))},o.prototype.getHierarchyDisplayInfoObservable=function(n){var t=this;return(0,_n.aj)([n,this.hierarchies$]).pipe((0,xe.U)(function(i){return t.getHierarchyDisplayInfo(i[1],i[0])}),(0,Fn.d)({bufferSize:1,refCount:!0}))},o.prototype.getHierarchyDisplayInfo=function(n,t){var a,i=this.localization.get("All"),l=_.map(t,function(y){return(0,S.pi)((0,S.pi)({},y),{levels:y.levels.map(function(P){return(0,Ai.WU)(P)})})}),c=_.keyBy(l,function(y){return y.hierarchyId});if(!_.isEmpty(t)){var u=_.map(n,function(y){var P;return _.last(null===(P=c[y.id])||void 0===P?void 0:P.levels)});a=_.join(_.compact(u),", ")}var p=_.map(n,function(y){return _.has(c,y.id)?(0,S.pi)((0,S.pi)({},c[y.id]),{hierarchyName:y.name}):{hierarchyId:y.id,hierarchyName:y.name,levels:[i]}});return{showingAll:_.isEmpty(t),displayLabel:a,displayPaths:p}},o.prototype.formatHierarchyItemPath=function(n){var t;return(0,S.pi)((0,S.pi)({},n),{levels:n.levels.map(function(i){return(0,Ai.WU)(i)}),hierarchyName:null===(t=this.hierarchies.find(function(i){return i.id===n.hierarchyId}))||void 0===t?void 0:t.name})},o.prototype.getActiveHierarchies=function(n){return _.intersectionWith(this.hierarchies,n,function(t,i){return t.id===i.hierarchyId})},o.prototype.isDatasetMappedToHierarchyPath=function(n,t){if(_.isNil(n)||_.isEmpty(t))return M.fF.assertFail("Expected datasetId and hierarchyPaths to be defined"),!1;var i=this.getActiveHierarchies(t);return _.some(i,function(a){return _.some(a.connections,function(l){return l.datasetId===n&&_.some(l.levels,function(c){return!!c.fieldExpr})})})},o.prototype.isGoalOwnerMappedToHierarchy=function(n,t){if(!n.valueConnection&&!n.targetConnection||_.isEmpty(t))return!1;var i=this.getActiveHierarchies(t);return _.some(i,function(a){var l=_.find(a.connections,function(c){var u,p;return c.datasetId===(null===(u=n.valueConnection)||void 0===u?void 0:u.datasetId)||c.datasetId===(null===(p=n.targetConnection)||void 0===p?void 0:p.datasetId)});return!!l?.ownerFieldExpr})},o.prototype.gc=function(){var n=this,t=new Set(_.map(this.hierarchies,function(a){return a.id})),i=(0,b.Uy)(this.hierarchyItems,function(a){for(var l=0,c=Object.keys(n.hierarchyItems);l<c.length;l++){var u=c[l];t.has(u)||delete a[u]}});i!==this.hierarchyItems&&this._hierarchyItems$.next(i)},o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275inject(zt.f),e.\u0275\u0275inject(Oo.T),e.\u0275\u0275inject(St.o))},o.\u0275prov=e.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac}),o}(),so=T(24326),Ao=T(90127);function hs(o,n){1&o&&e.\u0275\u0275element(0,"pbi-spinner",4)}function _r(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",8),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"formatGoalValue"),e.\u0275\u0275elementEnd()),2&o){var t=e.\u0275\u0275nextContext(2),i=e.\u0275\u0275reference(4);e.\u0275\u0275property("pbiTooltip",i),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind3(2,2,null==t.currentValue?null:t.currentValue.value,t.categories,t.formatString)," ")}}function fs(o,n){1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275text(1,"/"),e.\u0275\u0275elementContainerEnd())}var ms=function(n){return{"combined-target":n}};function vs(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",9),e.\u0275\u0275template(1,fs,2,0,"ng-container",10),e.\u0275\u0275elementContainerStart(2),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"formatGoalValue"),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()),2&o){var t=e.\u0275\u0275nextContext(2),i=e.\u0275\u0275reference(6);e.\u0275\u0275property("pbiTooltip",i)("ngClass",e.\u0275\u0275pureFunction1(8,ms,t.showValueAndTargetCombined)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.showValueAndTargetCombined),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind3(4,4,t.showTarget?null==t.currentValue?null:t.currentValue.finalTarget:null==t.currentValue?null:t.currentValue.nextTarget,t.categories,t.formatString))}}var bl=function(n,t){return{categories:n,compact:t}};function Cs(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",5),e.\u0275\u0275template(1,_r,3,6,"div",6),e.\u0275\u0275template(2,vs,5,10,"div",7),e.\u0275\u0275elementEnd()),2&o){var t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(3,bl,!!t.categories,t.compact)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.showCurrent&&t.hasValueOrConnection),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(t.showTarget||t.showMilestone)&&t.hasTargetOrConnection)}}function la(o,n){1&o&&(e.\u0275\u0275elementStart(0,"div")(1,"span",15),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"localize"),e.\u0275\u0275elementEnd()),2&o&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,2,"CurrentValue")),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(5,4,"Metrics_Tooltip_ValueNotConnected")," "))}function yr(o,n){1&o&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275elementEnd()),2&o&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,"Rollups_Submetrics_Tooltip_Footer")))}function sa(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div")(1,"div",16),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"formatGoalValue"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,yr,3,3,"div",10),e.\u0275\u0275elementEnd()),2&o){var t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate2("",e.\u0275\u0275pipeBind4(3,3,null==t.currentValue?null:t.currentValue.value,t.categories,t.formatString,!1)," ",t.valueRollupsString,""),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!t.canViewAllGoals)}}function wl(o,n){if(1&o&&e.\u0275\u0275template(0,sa,5,8,"div",12),2&o){e.\u0275\u0275nextContext();var t=e.\u0275\u0275reference(5),i=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",(null==i.goal?null:i.goal.valueRollup)&&!(null!=i.goal&&i.goal.isLinked))("ngIfElse",t)}}function Sl(o,n){if(1&o&&(e.\u0275\u0275text(0),e.\u0275\u0275pipe(1,"formatGoalValue")),2&o){var t=e.\u0275\u0275nextContext(2);e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind4(1,1,null==t.currentValue?null:t.currentValue.value,t.categories,t.formatString,!1)," ")}}function br(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",11),e.\u0275\u0275template(1,la,6,6,"div",12),e.\u0275\u0275template(2,wl,1,2,"ng-template",null,13,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(4,Sl,2,6,"ng-template",null,14,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&o){var t=e.\u0275\u0275reference(3),i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.isCurrentValueNotConnectedToHierarchy)("ngIfElse",t)}}function co(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div")(1,"span",15),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"localize"),e.\u0275\u0275elementEnd()),2&o){var t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,2,t.showTarget?"Role_DisplayName_TargetValue":"Role_DisplayName_MilestoneValue")," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(5,4,"Metrics_Tooltip_ValueNotConnected")," ")}}function ca(o,n){1&o&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275elementEnd()),2&o&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,"Rollups_Submetrics_Tooltip_Footer")))}function ua(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div")(1,"div",16),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"formatGoalValue"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,ca,3,3,"div",10),e.\u0275\u0275elementEnd()),2&o){var t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate2(" ",e.\u0275\u0275pipeBind4(3,3,t.showTarget?null==t.currentValue?null:t.currentValue.finalTarget:null==t.currentValue?null:t.currentValue.nextTarget,t.categories,t.formatString,!1)," ",t.targetRollupsString," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!t.canViewAllGoals)}}function _s(o,n){if(1&o&&e.\u0275\u0275template(0,ua,5,8,"div",12),2&o){e.\u0275\u0275nextContext();var t=e.\u0275\u0275reference(5),i=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",(null==i.goal?null:i.goal.targetRollup)&&!(null!=i.goal&&i.goal.isLinked))("ngIfElse",t)}}function Ml(o,n){if(1&o&&(e.\u0275\u0275text(0),e.\u0275\u0275pipe(1,"localize"),e.\u0275\u0275elementStart(2,"div",20),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"formatGoalValue"),e.\u0275\u0275elementEnd()),2&o){var t=e.\u0275\u0275nextContext(2);e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(1,2,t.showTarget?"Target_Final":"Target_Next")," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind4(4,4,t.showTarget?null==t.currentValue?null:t.currentValue.finalTarget:null==t.currentValue?null:t.currentValue.nextTarget,t.categories,t.formatString,!1)," ")}}function ys(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",17),e.\u0275\u0275template(1,co,6,6,"div",12),e.\u0275\u0275template(2,_s,1,2,"ng-template",null,18,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(4,Ml,5,9,"ng-template",null,19,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&o){var t=e.\u0275\u0275reference(3),i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.isTargetValueNotConnectedToHierarchy)("ngIfElse",t)}}var Lo=function(){function o(n,t,i,a){var l=this;this.hierarchyService=n,this.localizationService=t,this.scorecardService=i,this.changeDetector=a,this.currentValue=null,this.canViewAllGoals=!0,this.metricRollups=Cl(this.localizationService),this.scorecardSubscription=this.scorecardService.getScorecard().subscribe(function(c){var u;l.scorecard=c,l.canViewAllGoals=3===Ze(null===(u=l.scorecard)||void 0===u?void 0:u.permissions),l.goal&&(l.setHierarchyTooltips(),l.categories=l.scorecardService.getGoalValueCategories(l.goal)),l.changeDetector.markForCheck()})}return o.prototype.ngOnChanges=function(n){var t=this;n.goal&&(this.formatString=this.goal.valuesFormatString,this.currentValue=$e.r.buildCurrentGoalValue(this.goal),this.hasValueOrConnection=!_.isNil(this.currentValue.value)||!_.isNil(this.goal.valueConnection),this.hasTargetOrConnection=!_.isNil(this.currentValue.finalTarget)||!_.isNil(this.currentValue.nextTarget)||!_.isNil(this.goal.targetConnection),_.isNil(this.goal.valueRollup)||(this.valueRollupsString=this.localizationService.format("Rollups_Submetrics_Tooltip_Header",[this.metricRollups[ia(this.goal.valueRollup.rollupType)]])),_.isNil(this.goal.targetRollup)||(this.targetRollupsString=this.localizationService.format("Rollups_Submetrics_Tooltip_Header",[this.metricRollups[ia(this.goal.targetRollup.rollupType)]])),this.categories=this.scorecardService.getGoalValueCategories(this.goal),this.setHierarchyTooltips()),(n.showCurrent||n.showTarget||n.showMilestone)&&(M.fF.assert(function(){return!(t.showTarget&&t.showMilestone)},"GoalValueCell can't show both target and milestone."),this.showValueAndTargetCombined=this.showCurrent&&(this.showTarget||this.showMilestone))},o.prototype.ngOnDestroy=function(){this.scorecardSubscription.unsubscribe()},o.prototype.setHierarchyTooltips=function(){var n,t=!_.isEmpty(null===(n=this.scorecard)||void 0===n?void 0:n.hierarchyPaths);this.isCurrentValueNotConnectedToHierarchy=t&&this.goal.valueConnection&&!this.hierarchyService.isDatasetMappedToHierarchyPath(this.goal.valueConnection.datasetId,this.scorecard.hierarchyPaths),this.isTargetValueNotConnectedToHierarchy=t&&this.goal.targetConnection&&!this.hierarchyService.isDatasetMappedToHierarchyPath(this.goal.targetConnection.datasetId,this.scorecard.hierarchyPaths)},o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(jn),e.\u0275\u0275directiveInject(St.o),e.\u0275\u0275directiveInject(Ht),e.\u0275\u0275directiveInject(e.ChangeDetectorRef))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["goal-value-cell"]],inputs:{goal:"goal",showCurrent:"showCurrent",showTarget:"showTarget",showMilestone:"showMilestone",compact:"compact"},features:[e.\u0275\u0275NgOnChangesFeature],decls:7,vars:2,consts:[["class","pbi-spinner-medium",4,"ngIf","ngIfElse"],["noRefresh",""],["valueTooltip",""],["targetTooltip",""],[1,"pbi-spinner-medium"],[1,"content",3,"ngClass"],["class","value",3,"pbiTooltip",4,"ngIf"],["class","target",3,"pbiTooltip","ngClass",4,"ngIf"],[1,"value",3,"pbiTooltip"],[1,"target",3,"pbiTooltip","ngClass"],[4,"ngIf"],[1,"goal-current-tooltip"],[4,"ngIf","ngIfElse"],["rollupsValueTooltip",""],["currentValueTooltip",""],[1,"no-hierarchy-label"],[1,"rollups"],[1,"goal-target-tooltip"],["rollupsTargetTooltip",""],["targetValueTooltip",""],[1,"target-value"]],template:function(t,i){if(1&t&&(e.\u0275\u0275template(0,hs,1,0,"pbi-spinner",0),e.\u0275\u0275template(1,Cs,3,6,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(3,br,6,2,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(5,ys,6,2,"ng-template",null,3,e.\u0275\u0275templateRefExtractor)),2&t){var a=e.\u0275\u0275reference(2);e.\u0275\u0275property("ngIf",!(null==i.goal||!i.goal.currentRefreshInProgress)||!(null==i.goal||!i.goal.targetRefreshInProgress))("ngIfElse",a)}},dependencies:[U.NgClass,U.NgIf,so.k,Ee.V,xt.F,Ao.D],styles:["pbi-spinner[_ngcontent-%COMP%]{display:flex;position:relative;top:3px;left:10px}.content[_ngcontent-%COMP%]{display:flex;overflow:hidden;white-space:nowrap;align-items:baseline;font-size:var(--lg-font-size);font-weight:var(--font-weight-regular)}.content[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   .target[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis}.content[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:var(--xxlg-font-size);font-weight:var(--font-weight-semi-bold)}.content[_ngcontent-%COMP%]   .combined-target[_ngcontent-%COMP%]{font-size:var(--md-font-size)}.content.categories[_ngcontent-%COMP%]{white-space:nowrap}.content.categories[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:var(--vlg-font-size)}.content.compact[_ngcontent-%COMP%], .content.compact[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:var(--md-font-size)}.no-hierarchy-label[_ngcontent-%COMP%]{font-weight:var(--font-weight-semi-bold)}.rollups[_ngcontent-%COMP%]{font-weight:var(--font-weight-regular)}.goal-target-tooltip[_ngcontent-%COMP%]{margin-left:4px;margin-right:4px}.goal-target-tooltip[_ngcontent-%COMP%]   .target-value[_ngcontent-%COMP%]{margin-top:4px;text-align:center}"],changeDetection:0}),o}(),jt=T(59968),Yn=T(17653),No=T(87088);function wr(o,n,t,i){t&&"function"!=typeof t&&(i=t);var a="function"==typeof t?t:void 0,l=new qn.t(o,n,i);return function(c){return(0,No.O)(function(){return l},a)(c)}}var Sr=T(46266),Mr=T(41819),uo=function(o){return o[o.Default=0]="Default",o[o.ShowCheckin=1]="ShowCheckin",o[o.ShowStatusRules=2]="ShowStatusRules",o}({}),ri=function(){function o(n,t,i){this.sideFlyoutService=n,this.scorecardHost=t,this.hierarchyService=i,this.destroy$=new qn.t(1)}return o.prototype.openGoalDetails=function(n,t,i,a){var l=this;n.selectGoal(t);var c=n.getCurrentScorecard(),u=X.getGoal(c.goals,t),p=n.getGoalValueCategoryLists(u),y=n.getGoalStatuses(u),P=this.traverse(n.getActiveGoal(),n).pipe((0,xe.U)(function(x){var N,W=null===(N=c.goals)||void 0===N?void 0:N.findIndex(function(te){return te.id===x});return pe.gT.ColorPalette[W>0?W%pe.gT.ColorPalette.length:0]}));this.destroy$&&(this.destroy$.next(!0),this.destroy$.complete()),this.destroy$=new qn.t(1),this.sideFlyoutService.show({componentManifest:{componentId:"GoalsDetailsPaneComponentId",modulePath:"@powerbi/GoalsDetailsPane/goals-details-pane.module#GoalsDetailsPaneModule",inputArgs:{goal$:n.getActiveGoal().pipe((0,Yn.b)(function(x){x&&n.expandGoalValues(x.id)}),wr(1),(0,Sr.x)(),(0,be.R)(this.destroy$)),scorecardHierarchyInfo$:this.hierarchyService?this.hierarchyService.getHierarchyDisplayInfoObservable(n.hierarchyPaths$):(0,re.of)({showingAll:!0}),openAction:i,scorecardConfiguration:a,goalPreviewColor$:P,goalValueCategories:p,goalStatuses:y,showGoalTargetsInChart$:n.getScorecard().pipe((0,xe.U)(function(x){return x.showGoalTargetsInChart})),close:function(){l.sideFlyoutService.hide(),n.unselectAllGoals()},saveGoalValue:function(N,W){return(0,S.mG)(l,void 0,void 0,function(){var te,me,Oe,ve;return(0,S.Jh)(this,function(Re){switch(Re.label){case 0:return[4,n.saveGoalValue(N,W)];case 1:return Re.sent(),te=n.getCurrentScorecard(),me=X.getGoal(te.goals,N),null===(Oe=this.scorecardHost)||void 0===Oe||Oe.onUpdateScorecard(te),null===(ve=this.scorecardHost)||void 0===ve||ve.updateCachedGoal(me),[2]}})})},insertNote:function(N,W,te){return n.insertNote(N,W,te)},deleteNote:function(N){return n.deleteNote(N)},editNote:function(N,W,te,me){return n.editNote(N,W,te,me)},deleteGoalValue:function(N){return n.deleteGoalValue(N)},saveGoal:function(N){return n.saveGoal(N.id,N)},deleteGoalQueryConnection:function(N,W){return n.deleteGoalQueryConnection(N,W)},getRefreshHistory:function(N){return n.getRefreshHistory(N)},refreshGoalValue:function(N,W){return n.refreshGoalValue(N,W)},isEditMode$:n.isEditMode(),columnSettings$:n.getColumnSettings(),saveStatusRules:function(N,W){return n.saveStatusRules(N,W)},getStatusRules:function(N){return n.getStatusRules(N)},updateGoalValueConnectionSettings:function(N,W){return n.updateGoalValueConnectionSettings(N,W)},takeOverConnection:function(N,W){return n.takeOverGoalQueryConnection(N,W)},toggleShowGoalTargets:function(N){return n.toggleShowGoalTargetsInChart(N)},followGoal:function(N){return n.followGoal(N)},unfollowGoal:function(N){return n.unfollowGoal(N)}}}})},o.prototype.openGoalStatusRulesPane=function(n,t,i,a){var l=this;this.sideFlyoutService.show({componentManifest:{componentId:"StatusRulesPaneComponentId",modulePath:"@powerbi/GoalsDetailsPane/goals-details-pane.module#GoalsDetailsPaneModule",inputArgs:{goal:t,goalStatuses:n,statusRules:i,close:function(){return l.sideFlyoutService.hide()},saveStatusRules:function(u){return(0,S.mG)(l,void 0,void 0,function(){return(0,S.Jh)(this,function(p){switch(p.label){case 0:return[4,a(u)];case 1:return p.sent(),this.sideFlyoutService.hide(),[2]}})})}}}})},o.prototype.openEditStatusesPane=function(n,t,i){var a=this;this.sideFlyoutService.show({componentManifest:{componentId:"EditStatusesPaneComponentId",modulePath:"@powerbi/GoalsDetailsPane/goals-details-pane.module#GoalsDetailsPaneModule",inputArgs:{goalStatuses$:n.getScorecard().pipe((0,xe.U)(function(l){return l.goalStatuses}),(0,V.x)()),onSave:t,close:function(){return a.sideFlyoutService.hide()},isReadOnly:i}}})},o.prototype.openScorecardSettingsPane=function(n,t,i){var a=this;this.sideFlyoutService.show({componentManifest:{componentId:"ScorecardSettingsPaneComponentId",modulePath:"@powerbi/GoalsDetailsPane/goals-details-pane.module#GoalsDetailsPaneModule",inputArgs:{scorecard$:n.getScorecard(),roles$:n.getScorecard().pipe((0,Yn.b)(function(l){n.ensureRolesLoaded()}),(0,xe.U)(function(l){return l.roles}),wr(1),(0,Sr.x)()),scorecardSettingsPaneTabIndex:i,onSave:t,close:function(){return a.sideFlyoutService.hide()},setAsDefaultRole:function(c){return n.setAsDefaultRole(c)},editRole:function(c){return a.openRoleSettingsPane(n,!1,c)},deleteRole:function(c){return n.deleteRole(c)},openRoleSettingsPaneWithNewRole:function(){return a.openRoleSettingsPane(n,!0)}}}})},o.prototype.openScorecardColumnSettingsPane=function(n){var t=this;this.sideFlyoutService.show({componentManifest:{componentId:"ScorecardColumnSettingsPaneComponentId",modulePath:"@powerbi/GoalsDetailsPane/goals-details-pane.module#GoalsDetailsPaneModule",inputArgs:{scorecardService:n,close:function(){return t.sideFlyoutService.hide()}}}})},o.prototype.openCategoryListsEditPane=function(n,t,i){var a=this;this.sideFlyoutService.show({componentManifest:{componentId:"CategoryListsEditPaneComponentId",modulePath:"@powerbi/GoalsDetailsPane/goals-details-pane.module#GoalsDetailsPaneModule",inputArgs:{scorecardService:n,creatingNewList:t,applyChanges:i,close:function(){return a.sideFlyoutService.hide()}}}})},o.prototype.openCategoricalValuesEditPane=function(n){this.sideFlyoutService.show({componentManifest:{componentId:"CategoricalValuesEditPaneComponentId",modulePath:"@powerbi/GoalsDetailsPane/goals-details-pane.module#GoalsDetailsPaneModule",inputArgs:{goalValueCategoryListsService:n}}})},o.prototype.openRoleSettingsPane=function(n,t,i){var a=this;this.sideFlyoutService.show({componentManifest:{componentId:"RoleSettingsPaneComponentId",modulePath:"@powerbi/GoalsDetailsPane/goals-details-pane.module#GoalsDetailsPaneModule",inputArgs:{scorecard$:n.getScorecard(),goals$:n.getGoals(),roles$:n.getScorecard().pipe((0,Yn.b)(function(l){n.ensureRolesLoaded()}),(0,xe.U)(function(l){return l.roles})),close:function(){return a.sideFlyoutService.hide()},cancel:function(){return a.openScorecardSettingsPane(n,function(c){return n.updateScorecard(c)},1)},createRole:function(c){return n.createRole(c)},updateRole:function(c,u){return n.updateRole(c,u)},setAsDefaultRole:function(c){return n.setAsDefaultRole(c)},deleteRole:function(c){return n.deleteRole(c)},addNewRole:t,selectedRoleId:i}},paneClass:"role-settings"})},o.prototype.openBulkEditingPane=function(n,t){var i=this,a=n.getGoalStatuses(),l=n.getGoalValueCategoryLists();this.sideFlyoutService.show({componentManifest:{componentId:"BulkEditingPaneComponentId",modulePath:"@powerbi/GoalsDetailsPane/goals-details-pane.module#GoalsDetailsPaneModule",inputArgs:{selectedGoalIds$:n.getSelectedGoalIdsObservable(),selectedGoals$:n.getSelectedGoalsObservable(),goalStatuses:a,goalValueCategories:l,onSave:t,close:function(){return i.sideFlyoutService.hide()}}}})},o.prototype.closeGoalDetails=function(){this.destroy$&&(this.destroy$.next(!0),this.destroy$.complete()),this.sideFlyoutService.hide()},o.prototype.traverse=function(n,t){var i=this;return n.pipe((0,gt.zg)(function(a){return a.parentId?i.traverse(t.getGoal(a.parentId),t):(0,re.of)(a.id)}))},o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275inject(Mr.p),e.\u0275\u0275inject(Zt,8),e.\u0275\u0275inject(jn,8))},o.\u0275prov=e.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac}),o}(),Wn=T(50057),zo=T(57746),Pt=T(55710),bs=function(n,t,i){return{hide:n,rotate180:t,"reserve-space":i}},Pr=function(){function o(){this.reserveSpaceWhenHidden=!0}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["sort-icon"]],inputs:{hidden:"hidden",upArrow:"upArrow",reserveSpaceWhenHidden:"reserveSpaceWhenHidden"},decls:1,vars:5,consts:[["fontIcon","pbi-glyph-sortup",1,"glyphicon","glyph-mini","sort-icon",3,"ngClass"]],template:function(t,i){1&t&&e.\u0275\u0275element(0,"mat-icon",0),2&t&&e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction3(1,bs,i.hidden,i.upArrow,i.reserveSpaceWhenHidden))},dependencies:[U.NgClass,Ut.Hw],styles:[".sort-icon[_ngcontent-%COMP%]{height:12px;width:12px;margin-left:12px}.sort-icon.rotate180[_ngcontent-%COMP%]{transform:rotate(180deg)}.sort-icon.hide[_ngcontent-%COMP%]{display:none}.sort-icon.hide.reserve-space[_ngcontent-%COMP%]{display:inline;visibility:hidden}"],changeDetection:0}),o}();function Li(o,n){if(1&o&&e.\u0275\u0275element(0,"sort-icon",24),2&o){var t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("upArrow",!t.sortType.sortAscending)}}function yi(o,n){1&o&&e.\u0275\u0275element(0,"pbi-icon",25)}function Pl(o,n){1&o&&e.\u0275\u0275element(0,"span",26)}function xl(o,n){1&o&&e.\u0275\u0275element(0,"span",27)}function Ol(o,n){1&o&&e.\u0275\u0275element(0,"span",28)}function Tl(o,n){1&o&&e.\u0275\u0275element(0,"span",29)}function xr(o,n){1&o&&e.\u0275\u0275element(0,"span")}function da(o,n){1&o&&e.\u0275\u0275element(0,"span",30)}function ws(o,n){1&o&&e.\u0275\u0275element(0,"span",31)}function Ss(o,n){1&o&&e.\u0275\u0275element(0,"span",32)}function Ms(o,n){1&o&&e.\u0275\u0275element(0,"span",33)}function ai(o,n){1&o&&e.\u0275\u0275element(0,"span")}function li(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"button",34),e.\u0275\u0275element(1,"span",35)(2,"pbi-icon",36),e.\u0275\u0275elementEnd()),2&o){e.\u0275\u0275nextContext();var t=e.\u0275\u0275reference(27);e.\u0275\u0275property("matMenuTriggerFor",t)}}function Or(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",37),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var a=e.\u0275\u0275nextContext().ngIf,l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.changeColumnSettings(l.moveColumnLeft,a))}),e.\u0275\u0275element(1,"span",38),e.\u0275\u0275elementEnd()}}function Tr(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",37),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var a=e.\u0275\u0275nextContext().ngIf,l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.changeColumnSettings(l.moveColumnRight,a))}),e.\u0275\u0275element(1,"span",39),e.\u0275\u0275elementEnd()}}function bi(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",37),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var a=e.\u0275\u0275nextContext().ngIf,l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.changeColumnSettings(l.hideColumn,a))}),e.\u0275\u0275element(1,"span",40),e.\u0275\u0275elementEnd()}}function pa(o,n){1&o&&e.\u0275\u0275elementContainer(0)}function ga(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",41),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.showHideColumns())}),e.\u0275\u0275element(1,"span",42),e.\u0275\u0275elementEnd()}}var Ni=function(n){return{hidden:n}};function ha(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"button",1),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275element(3,"span",2),e.\u0275\u0275pipe(4,"localize"),e.\u0275\u0275template(5,Li,1,1,"sort-icon",3),e.\u0275\u0275template(6,yi,1,0,"ng-template",null,4,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"mat-menu",5,6)(10,"button",7),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var P=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(P.sort(!0))}),e.\u0275\u0275element(11,"pbi-icon",8),e.\u0275\u0275template(12,Pl,1,0,"span",9),e.\u0275\u0275template(13,xl,1,0,"span",10),e.\u0275\u0275template(14,Ol,1,0,"span",11),e.\u0275\u0275template(15,Tl,1,0,"span",12),e.\u0275\u0275template(16,xr,1,0,"span",13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"button",7),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var P=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(P.sort(!1))}),e.\u0275\u0275element(18,"pbi-icon",8),e.\u0275\u0275template(19,da,1,0,"span",14),e.\u0275\u0275template(20,ws,1,0,"span",15),e.\u0275\u0275template(21,Ss,1,0,"span",16),e.\u0275\u0275template(22,Ms,1,0,"span",17),e.\u0275\u0275template(23,ai,1,0,"span",13),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(24,"mat-divider"),e.\u0275\u0275template(25,li,3,1,"button",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"mat-menu",19,20),e.\u0275\u0275template(28,Or,2,0,"button",21),e.\u0275\u0275template(29,Tr,2,0,"button",21),e.\u0275\u0275template(30,bi,2,0,"button",21),e.\u0275\u0275element(31,"mat-divider"),e.\u0275\u0275template(32,pa,1,0,"ng-container",22),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(33,ga,2,0,"ng-template",null,23,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementContainerEnd()}if(2&o){var i=n.ngIf,a=e.\u0275\u0275reference(7),l=e.\u0275\u0275reference(9),c=e.\u0275\u0275reference(27),u=e.\u0275\u0275reference(34),p=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("matMenuTriggerFor",p.column.canSort?l:c),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(2,26,p.column.name)),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("localize",p.column.name),e.\u0275\u0275property("pbiTooltip",e.\u0275\u0275pipeBind1(4,28,p.column.name)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",p.column.canSort&&p.sortType.sortBy===p.column.sortBy)("ngIfElse",a),e.\u0275\u0275advance(3),e.\u0275\u0275property("overlapTrigger",!1),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngSwitch",p.column.dataType),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(30,Ni,p.sortType.sortBy!==p.column.sortBy||!p.sortType.sortAscending)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","Date"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","Number"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","String"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","Status"),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngSwitch",p.column.dataType),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(32,Ni,p.sortType.sortBy!==p.column.sortBy||p.sortType.sortAscending)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","Date"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","Number"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","String"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","Status"),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",p.canMoveLeft(i)||p.canMoveRight(i)||p.column.canHide)("ngIfElse",u),e.\u0275\u0275advance(1),e.\u0275\u0275property("overlapTrigger",!1),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",p.canMoveLeft(i)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",p.canMoveRight(i)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",p.column.canHide),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngTemplateOutlet",u)}}var po=function(){function o(n,t){var i=this;this.detailsPaneLauncher=n,this.scorecardService=t,this.onSortColumn=new e.EventEmitter,this.moveColumnLeft=function(a){K.moveColumnLeft(a,i.column.id)},this.moveColumnRight=function(a){K.moveColumnRight(a,i.column.id)},this.hideColumn=function(a){K.hideColumn(a,i.column.id)}}return o.prototype.ngOnInit=function(){this.columnSettings$=this.scorecardService.getColumnSettings()},o.prototype.showHideColumns=function(){this.detailsPaneLauncher.openScorecardColumnSettingsPane(this.scorecardService)},o.prototype.changeColumnSettings=function(n,t){M.fF.assertValue(t,"columnSettingsAction columnSettings");var i=_.cloneDeep(t);n(i),this.scorecardService.updateScorecard({columnSettings:i})},o.prototype.canMoveLeft=function(n){return K.canMoveLeft(n,this.columnIndex)},o.prototype.canMoveRight=function(n){return K.canMoveRight(n,this.columnIndex)},o.prototype.sort=function(n){return(0,S.mG)(this,void 0,void 0,function(){var t=this;return(0,S.Jh)(this,function(i){return M.fF.assert(function(){return t.column.canSort},"Cannot sort this column."),this.onSortColumn.emit(this.sortType.sortBy!==this.column.sortBy||this.sortType.sortAscending!==n?{sortBy:this.column.sortBy,sortAscending:n}:pe.Ij),[2]})})},o.componentId="ScorecardColumnContextMenuComponentId",o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(ri),e.\u0275\u0275directiveInject(Ht))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["scorecard-column-context-menu"]],inputs:{column:"column",columnIndex:"columnIndex",sortType:"sortType"},outputs:{onSortColumn:"onSortColumn"},decls:2,vars:3,consts:[[4,"ngIf"],["mat-button","","cdkMonitorElementFocus","",1,"scorecard-column-menu-trigger",3,"matMenuTriggerFor"],[1,"column-name",3,"localize","pbiTooltip"],["class","sort-icon",3,"upArrow",4,"ngIf","ngIfElse"],["chevron",""],["xPosition","after",1,"scorecard-column-menu",3,"overlapTrigger"],["scorecardColumnMenu","matMenu"],["mat-menu-item","",3,"ngSwitch","click"],["size","small","name","checkmark",3,"ngClass"],["localize","Menu_OldestToNewest",4,"ngSwitchCase"],["localize","Menu_Ascending",4,"ngSwitchCase"],["localize","Menu_Sort_AZ",4,"ngSwitchCase"],["localize","Menu_Sort_FromLowPriority",4,"ngSwitchCase"],[4,"ngSwitchDefault"],["localize","Menu_NewestToOldest",4,"ngSwitchCase"],["localize","Menu_Descending",4,"ngSwitchCase"],["localize","Menu_Sort_ZA",4,"ngSwitchCase"],["localize","Menu_Sort_FromHighPriority",4,"ngSwitchCase"],["mat-menu-item","","class","customize-column-button","localizeTooltip","Scorecard_Column_Settings_CustomizeColumn",3,"matMenuTriggerFor",4,"ngIf","ngIfElse"],[1,"scorecard-column-settings-menu",3,"overlapTrigger"],["scorecardColumnSettingsMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngIf"],[4,"ngTemplateOutlet"],["columnSettingsButton",""],[1,"sort-icon",3,"upArrow"],["name","chevrondownsmall","size","small",1,"chevrondown"],["localize","Menu_OldestToNewest"],["localize","Menu_Ascending"],["localize","Menu_Sort_AZ"],["localize","Menu_Sort_FromLowPriority"],["localize","Menu_NewestToOldest"],["localize","Menu_Descending"],["localize","Menu_Sort_ZA"],["localize","Menu_Sort_FromHighPriority"],["mat-menu-item","","localizeTooltip","Scorecard_Column_Settings_CustomizeColumn",1,"customize-column-button",3,"matMenuTriggerFor"],["localize","Scorecard_Column_Settings_CustomizeColumn"],["name","chevronrightmedium","size","mini",1,"chevron-right"],["mat-menu-item","",3,"click"],["localize","Menu_MoveLeft","localizeTooltip","Menu_MoveLeft"],["localize","Menu_MoveRight","localizeTooltip","Menu_MoveRight"],["localize","Menu_HideThisColumn","localizeTooltip","Menu_HideThisColumn"],["mat-menu-item","",1,"column-settings-button",3,"click"],["localize","Scorecard_Column_Settings","localizeTooltip","Scorecard_Column_Settings"]],template:function(t,i){1&t&&(e.\u0275\u0275template(0,ha,35,34,"ng-container",0),e.\u0275\u0275pipe(1,"async")),2&t&&e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(1,1,i.columnSettings$))},dependencies:[U.NgClass,U.NgIf,U.NgTemplateOutlet,U.NgSwitch,U.NgSwitchCase,U.NgSwitchDefault,jt.X,Wn.r,zo.d,Pt.W0,Pt.tN,Pt.D8,Gn._,Ee.V,Pr,U.AsyncPipe,xt.F],styles:[".scorecard-column-menu-trigger[_ngcontent-%COMP%]{padding-left:0;width:100%;border:none;background:none;color:inherit;display:flex;flex-direction:row}.scorecard-column-menu-trigger[_ngcontent-%COMP%]   .column-name[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis}.scorecard-column-menu-trigger[_ngcontent-%COMP%]   pbi-icon[_ngcontent-%COMP%]{padding-left:4px;padding-top:4px}  .scorecard-column-menu-trigger .sort-icon .mat-icon{margin:0 4px}  .mat-menu-panel.scorecard-column-settings-menu{min-height:fit-content}  .scorecard-column-menu .mat-menu-item{padding-left:8px}  .scorecard-column-menu .mat-menu-item.column-settings-button{padding-left:32px}.mat-menu-item[_ngcontent-%COMP%]{color:var(--gray-180, #252423);display:flex;flex-direction:row;align-items:center;height:36px;padding-right:16px}.mat-menu-item[_ngcontent-%COMP%]   pbi-icon[_ngcontent-%COMP%]{display:flex;padding-right:8px}.mat-menu-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:inherit;display:flex;align-items:center}.mat-menu-item.customize-column-button[_ngcontent-%COMP%]{justify-content:space-between;padding-left:32px}.mat-menu-item.customize-column-button[_ngcontent-%COMP%]   .chevron-right[_ngcontent-%COMP%]{height:inherit;display:flex;align-items:center}"],changeDetection:0}),o}();function Er(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",2)(2,"scorecard-column-context-menu",3),e.\u0275\u0275listener("onSortColumn",function(l){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(c.sortColumn(l))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()}if(2&o){var i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("column",i.column)("columnIndex",i.index)("sortType",i.sort)}}function kr(o,n){if(1&o&&e.\u0275\u0275element(0,"sort-icon",7),2&o){var t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("reserveSpaceWhenHidden",t.reserveSpaceForSortIcon)("hidden",t.sort.sortBy!==t.column.sortBy)("upArrow",!t.sort.sortAscending)}}function fa(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",4),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.toggleSort(l.sort,l.column.sortBy))}),e.\u0275\u0275pipe(1,"localize"),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275element(3,"span",5),e.\u0275\u0275pipe(4,"localize"),e.\u0275\u0275template(5,kr,1,3,"sort-icon",6),e.\u0275\u0275elementEnd()}if(2&o){var i=e.\u0275\u0275nextContext();e.\u0275\u0275classProp("sort-col",i.column.canSort),e.\u0275\u0275attributeInterpolate2("aria-label","",e.\u0275\u0275pipeBind1(1,7,i.column.name)," ",e.\u0275\u0275pipeBind1(2,9,"Sort"),""),e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("localize",i.column.name),e.\u0275\u0275property("pbiTooltip",e.\u0275\u0275pipeBind1(4,11,i.column.name)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",i.column.canSort)}}var Ho=function(){function o(){this.onSortColumn=new e.EventEmitter,this.reserveSpaceForSortIcon=!0}return o.prototype.sortColumn=function(n){this.onSortColumn.emit(n)},o.prototype.toggleSort=function(n,t){var i=Ke.toggleSort(n,t);this.onSortColumn.emit(i)},o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["scorecard-column-header"]],inputs:{column:"column",index:"index",sort:"sort",isEditMode:"isEditMode",reserveSpaceForSortIcon:"reserveSpaceForSortIcon"},outputs:{onSortColumn:"onSortColumn"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["columnNameWithSortIcon",""],[1,"column-menu-sort"],[1,"scorecard-column-context-menu",3,"column","columnIndex","sortType","onSortColumn"],[1,"column-sort",3,"click"],[1,"column-name",3,"localize","pbiTooltip"],[3,"reserveSpaceWhenHidden","hidden","upArrow",4,"ngIf"],[3,"reserveSpaceWhenHidden","hidden","upArrow"]],template:function(t,i){if(1&t&&(e.\u0275\u0275template(0,Er,3,3,"ng-container",0),e.\u0275\u0275template(1,fa,6,13,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)),2&t){var a=e.\u0275\u0275reference(2);e.\u0275\u0275property("ngIf",i.isEditMode)("ngIfElse",a)}},dependencies:[U.NgIf,jt.X,Ee.V,po,Pr,xt.F],styles:["[_nghost-%COMP%]{width:100%}[_nghost-%COMP%]   .column-sort[_ngcontent-%COMP%]{padding-left:0;width:100%;border:none;background:none;color:inherit;display:flex;flex-direction:row;align-items:center;cursor:default}[_nghost-%COMP%]   .column-sort.sort-col[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   .column-sort.sort-col[_ngcontent-%COMP%]     sort-icon mat-icon.sort-icon{font-weight:var(--font-weight-semi-bold)}[_nghost-%COMP%]   .column-sort.sort-col[_ngcontent-%COMP%]:hover     sort-icon mat-icon.sort-icon.hide{display:inline;visibility:visible;color:var(--fluent-theme-neutral-tertia-color)}[_nghost-%COMP%]   .column-sort.sort-col[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .column-sort.sort-col[_ngcontent-%COMP%]:focus:hover, [_nghost-%COMP%]   .column-sort.sort-col[_ngcontent-%COMP%]:active, [_nghost-%COMP%]   .column-sort.sort-col[_ngcontent-%COMP%]:focus:hover:active{background-color:var(--fluent-theme-neutral-lighter-color)}[_nghost-%COMP%]   .column-sort[_ngcontent-%COMP%]   .column-name[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .column-menu-sort[_ngcontent-%COMP%]   .scorecard-column-context-menu[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .column-menu-sort[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .column-menu-sort[_ngcontent-%COMP%]:focus:hover, [_nghost-%COMP%]   .column-menu-sort[_ngcontent-%COMP%]:active, [_nghost-%COMP%]   .column-menu-sort[_ngcontent-%COMP%]:focus:hover:active{background-color:var(--fluent-theme-neutral-lighter-color)}[_nghost-%COMP%]   .column-menu-sort[_ngcontent-%COMP%]     sort-icon mat-icon.sort-icon.hide{color:transparent}"],changeDetection:0}),o}(),Dr=T(68233),lt=(0,S.pi)((0,S.pi)({},Dr._),{Default:0,XXXXMidLarge:1736}),Bo=(0,S.ev)([],Object.values(lt).sort(function(o,n){return n-o}),!0);function zi(o,n){for(var t=0,i=Bo;t<i.length;t++){var a=i[t];if(!_.isNil(o[a])&&n>=a)return o[a]}return o[lt.Default]}var wn,$n,Hi,Ir,Ln,Bi,Fr,Uo,go,wi,jo,Ui,Kn,ji,ho,Gr=((wn={})[0]=(($n={})[lt.XXXXXLarge]=584,$n[lt.XXXXMidLarge]=562,$n[lt.XXXXLarge]=516,$n[lt.XXLarge]=438,$n[lt.XLarge]=298,$n[lt.Large]=292,$n[lt.Medium]=258,$n[lt.Default]=184,$n),wn[1]=((Hi={})[lt.XXXXLarge]=98,Hi[lt.XXLarge]=74,Hi[lt.Default]=40,Hi),wn[2]=((Ir={})[lt.Default]=76,Ir),wn[3]=((Ln={})[lt.Default]=128,Ln),wn[10]=((Bi={})[lt.Default]=106,Bi),wn[7]=((Fr={})[lt.Default]=64,Fr),wn[8]=((Uo={})[lt.Default]=64,Uo),wn[9]=((go={})[lt.Default]=64,go),wn[4]=((wi={})[lt.XXXXXLarge]=156,wi[lt.XXXXLarge]=132,wi[lt.XXLarge]=100,wi[lt.Default]=60,wi),wn[5]=((jo={})[lt.Default]=62,jo),wn[6]={},wn),ma=((Ui={})[lt.XXXXXLarge]=32,Ui[lt.XXLarge]=24,Ui[lt.Default]=16,Ui),Vr=((Kn={})[lt.XXXXXLarge]=80,Kn[lt.XXXXMidLarge]=58,Kn[lt.XXXXLarge]=48,Kn[lt.XXLarge]=30,Kn[lt.XLarge]=26,Kn[lt.Default]=20,Kn),va=((ji={})[lt.XXXXLarge]={avatarRowSize:"medium",avatarRowCount:4},ji[lt.XXLarge]={avatarRowSize:"small",avatarRowCount:4},ji[lt.Default]={avatarRowSize:"small",avatarRowCount:2},ji),Ca=((ho={})[lt.XXLarge]=!0,ho[lt.Default]=!1,ho),Yt=T(21661),si=T(94585),Rr=T(15015),Si=T(22318),Ar=function(){function o(){this.columnResized=new e.EventEmitter}return o.prototype.onMouseDown=function(n){return this.isResizing=!0,this.pageX=n.pageX,this.initialWidth=n.target.parentElement.offsetWidth,document.body.style.cursor="col-resize",n.stopPropagation(),!1},o.prototype.onDragStart=function(){return!1},o.prototype.onMouseMove=function(n){return!this.isResizing||(this.columnResized.emit(Math.max(0,this.initialWidth+n.pageX-this.pageX)),n.stopPropagation(),!1)},o.prototype.onMouseLeave=function(n){return!this.isResizing||(this.isResizing=!1,document.body.style.cursor="",n.stopPropagation(),!1)},o.\u0275fac=function(t){return new(t||o)},o.\u0275dir=e.\u0275\u0275defineDirective({type:o,selectors:[["","resize-column",""]],hostBindings:function(t,i){1&t&&e.\u0275\u0275listener("mousedown",function(l){return i.onMouseDown(l)})("touchstart",function(l){return i.onMouseDown(l)})("dragstart",function(){return i.onDragStart()})("mousemove",function(l){return i.onMouseMove(l)},!1,e.\u0275\u0275resolveWindow)("touchmove",function(l){return i.onMouseMove(l)},!1,e.\u0275\u0275resolveWindow)("mouseup",function(l){return i.onMouseLeave(l)},!1,e.\u0275\u0275resolveWindow)("mouseleave",function(l){return i.onMouseLeave(l)},!1,e.\u0275\u0275resolveWindow)("touchend",function(l){return i.onMouseLeave(l)},!1,e.\u0275\u0275resolveWindow)},outputs:{columnResized:"columnResized"}}),o}(),Wo=["headers"];function _a(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",14),e.\u0275\u0275listener("click",function(l){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(c.onToggleExpandAll(l))}),e.\u0275\u0275pipe(1,"localize"),e.\u0275\u0275element(2,"mat-icon",15),e.\u0275\u0275elementEnd()}if(2&o){var i=e.\u0275\u0275nextContext(3);e.\u0275\u0275classProp("expanded",i.showAllExpanded),e.\u0275\u0275property("pbiTooltip",e.\u0275\u0275pipeBind1(1,3,i.showAllExpanded?"FieldListMenuItem_CollapseAll":"FieldListMenuItem_ExpandAll"))}}function $o(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,_a,3,5,"button",13),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementEnd()),2&o){var t=e.\u0275\u0275nextContext(2),i=e.\u0275\u0275reference(9);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(2,2,t.canExpandAll$))("ngIfElse",i)}}var Qo=function(n){return{column:n}};function fo(o,n){if(1&o&&e.\u0275\u0275elementContainer(0,16),2&o){var t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275property("ngTemplateOutlet",t.headerTemplate)("ngTemplateOutletContext",e.\u0275\u0275pureFunction1(2,Qo,t))}}function ya(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",17),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){var t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.name)}}function Qn(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",18),e.\u0275\u0275listener("columnResized",function(a){e.\u0275\u0275restoreView(t);var l=e.\u0275\u0275nextContext().index,c=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(c.onColumnResized(a,l))}),e.\u0275\u0275elementEnd()}}function ba(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",8),e.\u0275\u0275template(1,$o,3,4,"div",9),e.\u0275\u0275template(2,fo,1,4,"ng-container",10),e.\u0275\u0275template(3,ya,2,1,"ng-template",null,11,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(5,Qn,1,0,"div",12),e.\u0275\u0275elementEnd()),2&o){var t=n.$implicit,i=n.index,a=e.\u0275\u0275reference(4),l=e.\u0275\u0275nextContext();e.\u0275\u0275styleProp("width",t.width,"px"),e.\u0275\u0275classProp("sticky-left",l.stickyFirstColumn&&0===i),e.\u0275\u0275property("ngClass",t.class)("ngStyle",t.style),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0===i),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!!t.headerTemplate)("ngIfElse",a),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!1!==t.resizable)}}function wa(o,n){1&o&&e.\u0275\u0275elementContainer(0)}function Sa(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",24),e.\u0275\u0275listener("dblclick",function(c){return c.stopPropagation()})("click",function(c){e.\u0275\u0275restoreView(t);var u=e.\u0275\u0275nextContext(3).$implicit,p=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(p.onExpandNode(u,c))}),e.\u0275\u0275elementEnd()}if(2&o){var i=e.\u0275\u0275nextContext(3).$implicit,a=e.\u0275\u0275nextContext();e.\u0275\u0275classProp("expanded",a.treeControl.isExpanded(i))}}function mo(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",22),e.\u0275\u0275template(2,Sa,1,2,"button",23),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&o){var t=e.\u0275\u0275nextContext(2).$implicit,i=e.\u0275\u0275nextContext(),a=e.\u0275\u0275reference(9);e.\u0275\u0275advance(1),e.\u0275\u0275property("cdkTreeNodePaddingIndent",i.paddingIndent),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.expandable)("ngIfElse",a)}}var Lr=function(n,t){return{column:n,data:t}};function Ma(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",21),e.\u0275\u0275template(1,mo,3,3,"ng-container",9),e.\u0275\u0275elementContainer(2,16),e.\u0275\u0275elementEnd()),2&o){var t=n.$implicit,i=n.index,a=e.\u0275\u0275nextContext().$implicit,l=e.\u0275\u0275nextContext();e.\u0275\u0275styleProp("width",t.width,"px"),e.\u0275\u0275classProp("sticky-left",l.stickyFirstColumn&&0===i),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0===i),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngTemplateOutlet",t.cellTemplate)("ngTemplateOutletContext",e.\u0275\u0275pureFunction2(7,Lr,t,a))}}function Pa(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cdk-tree-node",19),e.\u0275\u0275listener("click",function(c){var p=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(p.onClick?p.onClick(c):void 0)}),e.\u0275\u0275template(1,Ma,3,10,"div",20),e.\u0275\u0275elementEnd()}if(2&o){var i=n.$implicit,a=e.\u0275\u0275nextContext();e.\u0275\u0275styleMap(i.style),e.\u0275\u0275classMap(i.class),e.\u0275\u0275styleProp("height",a.rowHeight,"px")("margin-bottom",a.rowSpacing,"px"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",a.columns)("ngForTrackBy",a.trackByColumn)}}function xa(o,n){1&o&&e.\u0275\u0275element(0,"div",25)}var Wi=function(){function o(){var n=this;this.minBufferPx=400,this.maxBufferPx=1e3,this.enableRowVirtualization=!0,this.onResizeTreeList=new e.EventEmitter,this.onResizeColumn=new e.EventEmitter,this.onExpansionChange=new e.EventEmitter,this.columns=[],this.expandedNodeIds=[],this.rowHeight=50,this.rowSpacing=10,this.paddingIndent=15,this.getChildren=function(t){return t.children},this.rowHash=function(t,i){return i.id},this.treeControl=new si.C2(function(t){return t.level},function(t){return t.expandable},{trackBy:function(i){return i.id}}),this.nodeFlatMapper=function(t,i){return(0,S.pi)((0,S.pi)({},t),{level:i,expandable:_.size(n.getChildren(t))>0})}}return o.prototype.ngAfterViewInit=function(){var n,t=this;this.treeFlattener=new Rr.JZ(this.nodeFlatMapper,function(i){return i.level},function(i){return i.expandable},this.getChildren),this.dataSource=new Rr.kc(this.treeControl,this.treeFlattener),this.allRows$=this.dataSource.connect(this.cdkTree).pipe((0,Fn.d)(1)),this.visibleItems$=this.allRows$.pipe((0,Kt.w)(function(i){return t.enableRowVirtualization?t.viewport.renderedRangeStream.pipe((0,Si.O)(t.viewport.getRenderedRange()),(0,xe.U)(function(a){return i.slice(a.start,a.end)})):(0,re.of)(i)})),this.dataSource.data=this.data,(n=this.treeControl.expansionModel).select.apply(n,this.expandedNodeIds),this.setShowExpandAll(),this.canExpandAll$=this.allRows$.pipe((0,xe.U)(function(i){return _.some(i,function(a){return a.expandable})})),this.expansionSub=this.treeControl.expansionModel.changed.subscribe(function(i){t.setShowExpandAll(),t.onExpansionChange.emit(i)})},o.prototype.ngOnChanges=function(n){n.data&&this.dataSource&&(this.dataSource.data=this.data,this.setShowExpandAll()),(n.rowHeight||n.rowSpacing)&&(this.totalRowHeight=this.rowHeight+this.rowSpacing)},o.prototype.ngOnDestroy=function(){var n;null===(n=this.expansionSub)||void 0===n||n.unsubscribe()},o.prototype.onExpandNode=function(n,t){this.treeControl.toggle(n),t.stopPropagation()},o.prototype.onToggleExpandAll=function(){var n;this.showAllExpanded?this.treeControl.collapseAll():(n=this.treeControl.expansionModel).select.apply(n,this.getExpandableNodeIds())},o.prototype.trackByColumn=function(n,t){return t.key},o.prototype.trackById=function(n,t){return t.id},o.prototype.scroll=function(){this.headers.nativeElement.scrollLeft=this.viewport.measureScrollOffset("left")},o.prototype.onTreeListResized=function(n){var t=this;requestAnimationFrame(function(){t.onResizeTreeList.emit(n)})},o.prototype.onColumnResized=function(n,t){var i=this;requestAnimationFrame(function(){i.onResizeColumn.emit({column:t,width:Math.max(60,n)})})},o.prototype.setShowExpandAll=function(){var n=this,t=_.filter(this.treeControl.dataNodes,function(a){return a.expandable&&n.treeControl.isExpanded(a)}).length,i=this.getExpandableNodeIds().length;0===t?this.showAllExpanded=!1:t===i&&(this.showAllExpanded=!0)},o.prototype.getExpandableNodeIds=function(){return _.map(_.filter(this.treeControl.dataNodes,function(n){return n.expandable}),function(n){return n.id})},o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["tree-list"]],viewQuery:function(t,i){if(1&t&&(e.\u0275\u0275viewQuery(si._0,7),e.\u0275\u0275viewQuery(Yt.N7,7),e.\u0275\u0275viewQuery(Wo,5)),2&t){var a=void 0;e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(i.cdkTree=a.first),e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(i.viewport=a.first),e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(i.headers=a.first)}},inputs:{columns:"columns",data:"data",expandedNodeIds:"expandedNodeIds",rowHeight:"rowHeight",rowSpacing:"rowSpacing",paddingIndent:"paddingIndent",getChildren:"getChildren",rowHash:"rowHash",stickyFirstColumn:"stickyFirstColumn"},outputs:{onResizeTreeList:"onResizeTreeList",onResizeColumn:"onResizeColumn",onExpansionChange:"onExpansionChange"},features:[e.\u0275\u0275NgOnChangesFeature],decls:10,vars:12,consts:[[1,"column-headers"],["headers",""],["class","header",3,"ngClass","ngStyle","sticky-left","width",4,"ngFor","ngForOf","ngForTrackBy"],["tabindex","-1",3,"itemSize","minBufferPx","maxBufferPx","scroll","on-resize"],[4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],[3,"dataSource","treeControl","trackBy"],["class","row",3,"class","style","height","margin-bottom","click",4,"cdkTreeNodeDef"],["expanderPlaceholder",""],[1,"header",3,"ngClass","ngStyle"],[4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf","ngIfElse"],["name",""],["class","resize-handle","resize-column","",3,"columnResized",4,"ngIf"],["tabindex","-1","class","expander expander-all",3,"pbiTooltip","expanded","click",4,"ngIf","ngIfElse"],["tabindex","-1",1,"expander","expander-all",3,"pbiTooltip","click"],["fontIcon","pbi-glyph-doublechevrondown",1,"glyphicon","glyph-mini"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"name"],["resize-column","",1,"resize-handle",3,"columnResized"],[1,"row",3,"click"],["class","cell","role","cell",3,"sticky-left","width",4,"ngFor","ngForOf","ngForTrackBy"],["role","cell",1,"cell"],["cdkTreeNodePadding","",1,"tree-node-padding",3,"cdkTreeNodePaddingIndent"],["tabindex","-1","class","glyphicon expander",3,"expanded","dblclick","click",4,"ngIf","ngIfElse"],["tabindex","-1",1,"glyphicon","expander",3,"dblclick","click"],[1,"expander-placeholder"]],template:function(t,i){1&t&&(e.\u0275\u0275elementStart(0,"div",0,1),e.\u0275\u0275template(2,ba,6,10,"div",2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"cdk-virtual-scroll-viewport",3),e.\u0275\u0275listener("scroll",function(){return i.scroll()})("on-resize",function(l){return i.onTreeListResized(l)}),e.\u0275\u0275template(4,wa,1,0,"ng-container",4),e.\u0275\u0275pipe(5,"async"),e.\u0275\u0275elementStart(6,"cdk-tree",5),e.\u0275\u0275template(7,Pa,2,10,"cdk-tree-node",6),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(8,xa,1,0,"ng-template",null,7,e.\u0275\u0275templateRefExtractor)),2&t&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",i.columns)("ngForTrackBy",i.trackByColumn),e.\u0275\u0275advance(1),e.\u0275\u0275property("itemSize",i.totalRowHeight)("minBufferPx",i.minBufferPx)("maxBufferPx",i.maxBufferPx),e.\u0275\u0275advance(1),e.\u0275\u0275property("cdkVirtualForOf",e.\u0275\u0275pipeBind1(5,10,i.allRows$))("cdkVirtualForTrackBy",i.trackById),e.\u0275\u0275advance(2),e.\u0275\u0275property("dataSource",i.visibleItems$)("treeControl",i.treeControl)("trackBy",i.rowHash))},dependencies:[U.NgClass,U.NgForOf,U.NgIf,U.NgTemplateOutlet,U.NgStyle,si.rO,si.XJ,si._0,si.Hs,Fi.O,Ut.Hw,Ee.V,Yt.xd,Yt.x0,Yt.N7,Ar,U.AsyncPipe,xt.F],styles:['[_nghost-%COMP%]{--headerHeight: 40px;--expanderWidth: 48px;--column-headers-backgroundColor: var(--fluent-theme-white-color);--column-headers-foregroundColor: var(--fluent-theme-neutral-primary-color);--row-backgroundColor: var(--fluent-theme-white-color);--row-foregroundColor: var(--fluent-theme-neutral-primary-color);display:flex;flex-direction:column}cdk-virtual-scroll-viewport[_ngcontent-%COMP%]{flex:1;width:100%;max-width:100%;display:block}cdk-virtual-scroll-viewport[_ngcontent-%COMP%]:focus{outline:none}cdk-tree-node[_ngcontent-%COMP%]{display:block}.column-headers[_ngcontent-%COMP%]{margin:0;display:flex;padding:8px 0;height:var(--headerHeight);box-sizing:border-box;align-items:center;background-color:var(--column-headers-backgroundColor);color:var(--column-headers-foregroundColor);width:100%;overflow:hidden;z-index:2}.column-headers[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--lg-font-size, 16px);font-weight:var(--font-weight-regular, 400);font-weight:550;position:relative;border-right:solid 1px var(--gray-70, #BEBBB8);box-sizing:border-box;display:flex;flex-grow:0;flex-shrink:0;overflow:hidden}.column-headers[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.column-headers[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .resize-handle[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;opacity:0;width:10px;cursor:col-resize}.sticky-left[_ngcontent-%COMP%]{position:sticky!important;left:0;z-index:1!important}.sticky-left.cell[_ngcontent-%COMP%]{background-color:var(--row-backgroundColor)}.sticky-left.header[_ngcontent-%COMP%]{background-color:var(--column-headers-backgroundColor)}.row[_ngcontent-%COMP%], .cell[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;flex-grow:0;flex-shrink:0;z-index:0;box-sizing:border-box}.row[_ngcontent-%COMP%]{background-color:var(--row-backgroundColor);color:var(--row-foregroundColor);width:fit-content}.cell[_ngcontent-%COMP%]{overflow:hidden;height:100%}.tree-node-padding[_ngcontent-%COMP%]{height:100%}.expander-placeholder[_ngcontent-%COMP%]{width:var(--expanderWidth);flex-shrink:0}.expander[_ngcontent-%COMP%]{color:var(--gray-180, #252423);transition:transform ease .15s;transform:rotate(-90deg);font-size:var(--sm-font-size, 12px);width:var(--expanderWidth);padding:0 16px;background:transparent;outline:none;display:inline-flex;align-items:center;justify-content:center;height:100%;border:none}.expander.glyphicon[_ngcontent-%COMP%]:before{content:"\\e70d"}.expander.expanded[_ngcontent-%COMP%]{transform:none}.expander[_ngcontent-%COMP%]:focus, .expander[_ngcontent-%COMP%]:hover, .expander[_ngcontent-%COMP%]:focus:hover{background:transparent}.expander[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{padding:2px;font-size:12px;height:unset}'],changeDetection:0}),o}(),Oa=["columnHeader"],Ta=["nameCell"],Ea=["ownersCell"],vo=["statusCell"],Co=["combinedValueTargetCell"],Jo=["changeCell"],Xo=["currentCell"],qo=["targetCell"],Zo=["milestoneCell"],Yo=["sparklineCell"],Ko=["dueDateCell"],ka=["blank"],er=function(n,t){return{"--column-spacing":n,"--border-left-width":t}};function tr(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tree-list",12),e.\u0275\u0275listener("onResizeColumn",function(l){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(c.onResizeColumn(l))})("onExpansionChange",function(l){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(c.onExpansionChange(l))})("onResizeTreeList",function(l){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(c.onResizeScorecard(l))}),e.\u0275\u0275elementEnd()}if(2&o){var i=e.\u0275\u0275nextContext();e.\u0275\u0275styleMap(e.\u0275\u0275pureFunction2(12,er,i.columnSpacing+"px",i.colorBorderWidth+"px")),e.\u0275\u0275classProp("hidden",!i.scorecardWidth),e.\u0275\u0275property("columns",i.columns)("data",i.goals)("expandedNodeIds",i.expandedGoalIds)("getChildren",i.getSubgoals)("rowHash",i.rowHash)("rowHeight",i.rowHeight)("rowSpacing",i.rowSpacing)("paddingIndent",0)}}function nr(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"scorecard-column-header",14),e.\u0275\u0275listener("onSortColumn",function(c){e.\u0275\u0275restoreView(t);var u=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(u.onSortColumn.emit(c))}),e.\u0275\u0275elementEnd()}if(2&o){var i=e.\u0275\u0275nextContext().column,a=e.\u0275\u0275nextContext();e.\u0275\u0275property("column",i)("index",i.index)("sort",a.sort)("isEditMode",a.isEditMode)("reserveSpaceForSortIcon",!1)}}function zr(o,n){if(1&o&&(e.\u0275\u0275template(0,nr,1,5,"scorecard-column-header",13),e.\u0275\u0275pipe(1,"async")),2&o){var t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",!e.\u0275\u0275pipeBind1(1,1,t.hideColumnHeaders$))}}function s(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",15),e.\u0275\u0275element(1,"goal-name-cell",16)(2,"div",17)(3,"goal-actions-cell",18),e.\u0275\u0275elementEnd()),2&o){var t=n.data,i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("goal",t)("scorecard",i.scorecard)("boldName",0===t.level)("innerIndent",t.innerIndent*i.innerIndentSpacing),e.\u0275\u0275advance(1),e.\u0275\u0275styleProp("width",i.columnSpacing,"px"),e.\u0275\u0275advance(1),e.\u0275\u0275property("goal",t)("isEditMode",i.isEditMode)("showActionIcons",i.showActionIcons)}}function g(o,n){if(1&o&&e.\u0275\u0275element(0,"goal-owners-cell",19),2&o){var t=n.data,i=e.\u0275\u0275nextContext();e.\u0275\u0275property("goal",t)("alwaysShowAvatarRow",!0)("rowStyle","stack")("avatarSize",i.avatarRowSize)("avatarRowCount",i.avatarRowCount)}}function v(o,n){1&o&&e.\u0275\u0275element(0,"goal-status-cell",20),2&o&&e.\u0275\u0275property("goal",n.data)}function C(o,n){if(1&o&&e.\u0275\u0275element(0,"goal-value-cell",21),2&o){var i,a,t=n.data;e.\u0275\u0275property("goal",t)("showCurrent",!0)("showTarget",null!==(i=null==t.metadata?null:t.metadata.showFinalTarget)&&void 0!==i?i:!t.targetConnection)("showMilestone",!(null!==(a=null==t.metadata?null:t.metadata.showFinalTarget)&&void 0!==a?a:!t.targetConnection))("compact",!0)}}function m(o,n){1&o&&e.\u0275\u0275element(0,"goal-change-cell",20),2&o&&e.\u0275\u0275property("goal",n.data)}function w(o,n){1&o&&e.\u0275\u0275element(0,"goal-value-cell",22),2&o&&e.\u0275\u0275property("goal",n.data)("showCurrent",!0)("compact",!0)}function I(o,n){1&o&&e.\u0275\u0275element(0,"goal-value-cell",23),2&o&&e.\u0275\u0275property("goal",n.data)("showTarget",!0)("compact",!0)}function G(o,n){1&o&&e.\u0275\u0275element(0,"goal-value-cell",24),2&o&&e.\u0275\u0275property("goal",n.data)("showMilestone",!0)("compact",!0)}function R(o,n){if(1&o&&e.\u0275\u0275element(0,"goal-sparkline-cell",25),2&o){var t=n.data,i=n.column,a=e.\u0275\u0275nextContext();e.\u0275\u0275property("goal",t)("height",a.rowHeight-10)("width",i.width-a.columnSpacing)}}function F(o,n){if(1&o&&e.\u0275\u0275element(0,"goal-due-date-cell",26),2&o){var t=n.data,i=e.\u0275\u0275nextContext();e.\u0275\u0275property("goal",t)("formatOptions",i.dateFormatOptions)}}var k=function(o){function n(t,i,a,l){var u,p,c=this;return(c=o.call(this)||this).goalRowService=t,c.expansionService=i,c.changeDetector=a,c.scorecardSettings=l,c.onSortColumn=new e.EventEmitter,c.getSubgoals=function(y){return c.getGoalNodes(y.subGoals,y)},c.rowHash=function(y,P){return JSON.stringify(P)},c.rowHeight=42,c.rowSpacing=0,c.dateFormatOptions={day:"numeric",month:"numeric",year:"2-digit"},c.colorBorderWidth=4,c.resizedColumns={},c.innerIndentSpacing=16,c.columnSpacing=20,c.showActionIcons=!1,c.avatarRowSize="smallest",c.avatarRowCount=2,c.hideColumnHeaders$=null===(p=null===(u=c.scorecardSettings)||void 0===u?void 0:u.settings)||void 0===p?void 0:p.pipe((0,xe.U)(function(y){return y?.hideColumnHeaders})),c}return(0,S.ZT)(n,o),n.prototype.ngAfterViewInit=function(){var t;this.columnTemplates=((t={})[0]=this.nameCell,t[1]=this.ownersCell,t[2]=this.statusCell,t[3]=this.combinedValueTargetCell,t[10]=this.changeCell,t[7]=this.currentCell,t[4]=this.sparklineCell,t[8]=this.targetCell,t[9]=this.milestoneCell,t[5]=this.dueDateCell,t[6]=null,t)},n.prototype.ngOnChanges=function(t){t.scorecard&&(this.goals=this.getGoalNodes(this.scorecard.goals),this.expandedGoalIds=this.expansionService.expandedGoalIds),(t.scorecard||t.viewSettings)&&this.columnTemplates&&this.recalculateColumnLayout(),o.prototype.ngOnChanges.call(this,t)},n.prototype.onGoalRowClick=function(t,i){this.goalRowService.onRowClick(t,i)},n.prototype.onExpansionChange=function(t){this.expansionService.expandGoals(t.added),this.expansionService.collapseGoals(t.removed)},n.prototype.onResizeScorecard=function(t){this.scorecardWidth=t.width,this.recalculateColumnLayout(),this.changeDetector.markForCheck()},n.prototype.onResizeColumn=function(t){var i=t.width,a=t.column;this.columns[a]&&(this.columns[a].width=i,this.resizedColumns[this.columns[a].id]=i-this.columnSpacing,this.recalculateColumnLayout(),this.changeDetector.markForCheck())},n.prototype.recalculateColumnLayout=function(){this.effectiveBreakpoint=this.getEffectiveBreakpoint(this.scorecardWidth);var t=this.calculateCutoffIndex(),i=this.calculateTotalWidth(this.effectiveBreakpoint,t);this.columns=this.getColumns(t,i),this.setResponsiveSettings()},n.prototype.getEffectiveBreakpoint=function(t){for(var i=0,a=Bo;i<a.length;i++){var l=a[i];if(this.calculateTotalWidth(l)<t)return l}return lt.Default},n.prototype.calculateCutoffIndex=function(){var t,i=this.scorecard.columnSettings.length;if(null!==(t=this.viewSettings)&&void 0!==t&&t.dropColumns&&this.effectiveBreakpoint===lt.Default)for(var a=this.colorBorderWidth,l=0;l<this.scorecard.columnSettings.length;l++)if(this.scorecard.columnSettings[l].show&&(a+=this.getBaseColumnWidth(this.scorecard.columnSettings[l].columnId,this.effectiveBreakpoint))>this.scorecardWidth){i=l||1;break}return i},n.prototype.calculateTotalWidth=function(t,i){var l,a=this;return this.colorBorderWidth+_.sumBy(_.filter(null===(l=this.scorecard)||void 0===l?void 0:l.columnSettings.slice(0,i),function(c){return c.show}),function(c){return a.getBaseColumnWidth(c.columnId,t)})},n.prototype.getBaseColumnWidth=function(t,i){var a;return(null!==(a=this.resizedColumns[t])&&void 0!==a?a:zi(Gr[t],i))+zi(Vr,i)},n.prototype.getColumns=function(t,i){var l,a=this,c=function(p){var y=a.getBaseColumnWidth(p,a.effectiveBreakpoint);return Math.max(Math.floor(y/i*a.scorecardWidth),y)};return _.map(_.filter(null===(l=this.scorecard)||void 0===l?void 0:l.columnSettings.slice(0,t),function(u){return u.show}),function(u,p){return(0,S.pi)((0,S.pi)({},pe.Ml[u.columnId]),{cellTemplate:a.columnTemplates[u.columnId],key:u.columnId.toString(),index:p,width:c(u.columnId),headerTemplate:a.columnHeader,resizable:!0})})},n.prototype.setResponsiveSettings=function(){var t=this;this.innerIndentSpacing=zi(ma,this.effectiveBreakpoint),this.columnSpacing=zi(Vr,this.effectiveBreakpoint),this.columns&&this.columns.forEach(function(i){return t.updateSettingsForColumn(i)})},n.prototype.getSettingsForColumn=function(t,i){return function(o,n,t){for(var i=function(y){if(M.fF.assert(function(){return!(!_.isNil(o[y])&&_.isNil(n[y]))},"Associated settings at ".concat(y," have no matching breakpoint in base settings and will not be triggered.")),n[y]<=t&&!_.isNil(o[y]))return{value:o[y]}},a=0,l=Bo;a<l.length;a++){var u=i(l[a]);if("object"==typeof u)return u.value}return o[lt.Default]}(i,Gr[t.id],t.width-this.columnSpacing)},n.prototype.updateSettingsForColumn=function(t){var i;switch(t.id){case 0:this.showActionIcons=this.getSettingsForColumn(t,Ca);break;case 1:i=this.getSettingsForColumn(t,va),this.avatarRowSize=i.avatarRowSize,this.avatarRowCount=i.avatarRowCount}},n.prototype.getGoalNodes=function(t,i){var a=this;return _.map(_.filter(t,function(l){return!l.isNew&&!l.isHidden}),function(l,c){var u=i?i.level+1:0,p=i?i.color:pe.gT.ColorPalette[c%pe.gT.ColorPalette.length],y=a.goalRowService.isSelected(l),P=[!1===l.isFilterMatch?"goal-not-match":"",y?"selected-goal":""].join(" ");return(0,S.pi)((0,S.pi)({},l),{level:u,color:p,innerIndent:u,style:{"border-left-color":p,"border-color":y?p:""},class:P,onClick:function(N){return a.goalRowService.onRowClick(l,N)}})})},n.\u0275fac=function(i){return new(i||n)(e.\u0275\u0275directiveInject(gi),e.\u0275\u0275directiveInject(sr),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(Cn,8))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["compact-scorecard"]],viewQuery:function(i,a){if(1&i&&(e.\u0275\u0275viewQuery(Oa,5),e.\u0275\u0275viewQuery(Ta,5),e.\u0275\u0275viewQuery(Ea,5),e.\u0275\u0275viewQuery(vo,5),e.\u0275\u0275viewQuery(Co,5),e.\u0275\u0275viewQuery(Jo,5),e.\u0275\u0275viewQuery(Xo,5),e.\u0275\u0275viewQuery(qo,5),e.\u0275\u0275viewQuery(Zo,5),e.\u0275\u0275viewQuery(Yo,5),e.\u0275\u0275viewQuery(Ko,5),e.\u0275\u0275viewQuery(ka,5)),2&i){var l=void 0;e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(a.columnHeader=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(a.nameCell=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(a.ownersCell=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(a.statusCell=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(a.combinedValueTargetCell=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(a.changeCell=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(a.currentCell=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(a.targetCell=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(a.milestoneCell=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(a.sparklineCell=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(a.dueDateCell=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(a.blankCell=l.first)}},inputs:{scorecard:"scorecard",isEditMode:"isEditMode",viewSettings:"viewSettings",sort:"sort"},outputs:{onSortColumn:"onSortColumn"},features:[e.\u0275\u0275InheritDefinitionFeature,e.\u0275\u0275NgOnChangesFeature],decls:23,vars:1,consts:[[3,"style","hidden","columns","data","expandedNodeIds","getChildren","rowHash","rowHeight","rowSpacing","paddingIndent","onResizeColumn","onExpansionChange","onResizeTreeList",4,"ngIf"],["columnHeader",""],["nameCell",""],["ownersCell",""],["statusCell",""],["combinedValueTargetCell",""],["changeCell",""],["currentCell",""],["targetCell",""],["milestoneCell",""],["sparklineCell",""],["dueDateCell",""],[3,"columns","data","expandedNodeIds","getChildren","rowHash","rowHeight","rowSpacing","paddingIndent","onResizeColumn","onExpansionChange","onResizeTreeList"],[3,"column","index","sort","isEditMode","reserveSpaceForSortIcon","onSortColumn",4,"ngIf"],[3,"column","index","sort","isEditMode","reserveSpaceForSortIcon","onSortColumn"],[1,"displayed-name-and-action-wrapper","compact-cell"],[3,"goal","scorecard","boldName","innerIndent"],[1,"actions-spacer"],[3,"goal","isEditMode","showActionIcons"],[1,"compact-cell",3,"goal","alwaysShowAvatarRow","rowStyle","avatarSize","avatarRowCount"],[1,"compact-cell",3,"goal"],[1,"compact-cell",3,"goal","showCurrent","showTarget","showMilestone","compact"],[1,"compact-cell",3,"goal","showCurrent","compact"],[1,"compact-cell",3,"goal","showTarget","compact"],[1,"compact-cell",3,"goal","showMilestone","compact"],[1,"compact-cell",3,"goal","height","width"],[1,"compact-cell",3,"goal","formatOptions"]],template:function(i,a){1&i&&(e.\u0275\u0275template(0,tr,1,15,"tree-list",0),e.\u0275\u0275template(1,zr,2,3,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(3,s,4,9,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(5,g,1,5,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(7,v,1,1,"ng-template",null,4,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(9,C,1,5,"ng-template",null,5,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(11,m,1,1,"ng-template",null,6,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(13,w,1,3,"ng-template",null,7,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(15,I,1,3,"ng-template",null,8,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(17,G,1,3,"ng-template",null,9,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(19,R,1,3,"ng-template",null,10,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(21,F,1,2,"ng-template",null,11,e.\u0275\u0275templateRefExtractor)),2&i&&e.\u0275\u0275property("ngIf",a.scorecard)},dependencies:[U.NgIf,mi,Wi,cr,Ot,ur,to,Go,An,Lo,Ho,U.AsyncPipe],styles:["[_nghost-%COMP%]{display:flex;flex:1}[_nghost-%COMP%]   tree-list[_ngcontent-%COMP%]{flex:1;overflow:hidden;--column-headers-backgroundColor: var(--scorecard-tableHeaderBackgroundColor);--column-headers-foregroundColor: var(--scorecard-tableHeaderForegroundColor);--row-backgroundColor: var(--scorecard-tableRowBackgroundColor);--row-foregroundColor: var(--scorecard-tableRowForegroundColor);--border-left-width: 4px;--expanderWidth: 44px}[_nghost-%COMP%]   tree-list[_ngcontent-%COMP%]     .row{width:100%;border:1px solid var(--fluent-theme-neutral-lighter-color);border-left-width:var(--border-left-width);border-right:none}[_nghost-%COMP%]   tree-list[_ngcontent-%COMP%]     .row.goal-not-match{opacity:50%}[_nghost-%COMP%]   tree-list[_ngcontent-%COMP%]     .row.selected-goal{border-right:1px solid}[_nghost-%COMP%]   tree-list[_ngcontent-%COMP%]     .row goal-actions-cell .action-btn, [_nghost-%COMP%]   tree-list[_ngcontent-%COMP%]     .row .actions-spacer{display:none;visibility:hidden}[_nghost-%COMP%]   tree-list[_ngcontent-%COMP%]     .row:hover goal-actions-cell .action-btn, [_nghost-%COMP%]   tree-list[_ngcontent-%COMP%]     .row:focus-within goal-actions-cell .action-btn, [_nghost-%COMP%]   tree-list[_ngcontent-%COMP%]     .row:hover .actions-spacer, [_nghost-%COMP%]   tree-list[_ngcontent-%COMP%]     .row:focus-within .actions-spacer{display:block;visibility:visible}[_nghost-%COMP%]   tree-list[_ngcontent-%COMP%]     .column-headers{border-left:var(--border-left-width) solid var(--column-headers-backgroundColor);border-bottom:1px solid var(--fluent-theme-neutral-lighter-color)}[_nghost-%COMP%]   tree-list[_ngcontent-%COMP%]     .column-headers .header{border-right:none!important}[_nghost-%COMP%]   tree-list[_ngcontent-%COMP%]     .column-headers .column-name{font-size:var(--md-font-size)}.compact-cell[_ngcontent-%COMP%]{width:100%;padding-right:var(--column-spacing);overflow:hidden}.displayed-name-and-action-wrapper[_ngcontent-%COMP%]{display:flex;height:100%}.displayed-name-and-action-wrapper[_ngcontent-%COMP%]   goal-name-cell[_ngcontent-%COMP%]{flex:1}.displayed-name-and-action-wrapper[_ngcontent-%COMP%]   goal-name-cell[_ngcontent-%COMP%]     .name-box{white-space:nowrap}goal-status-cell[_ngcontent-%COMP%]     status-icon{width:100%}goal-status-cell[_ngcontent-%COMP%]     status-icon .status{border-radius:4px;padding:0 2px}goal-due-date-cell[_ngcontent-%COMP%]{font-size:var(--md-font-size)}goal-change-cell[_ngcontent-%COMP%]{--change-font-size: var(--md-font-size)}"],changeDetection:0}),n}(Te.w),Q=T(50264);function J(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",12),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var a=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(a.onLinkToGoalClick())}),e.\u0275\u0275elementEnd()}}function ye(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,J,1,0,"button",11),e.\u0275\u0275elementContainerEnd()),2&o){var t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.canEdit)}}function ut(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275element(1,"div",4)(2,"div",5)(3,"div",6),e.\u0275\u0275elementStart(4,"button",7),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.onNewGoalClick())}),e.\u0275\u0275pipe(5,"localize"),e.\u0275\u0275element(6,"mat-icon",8)(7,"span",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,ye,2,1,"ng-container",10),e.\u0275\u0275elementContainerEnd()}if(2&o){var i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275property("disabled",!i.canEdit),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(5,3,"NewMetric")),e.\u0275\u0275advance(4),e.\u0275\u0275property("pbiFeatureSwitch","goalsLinkedGoals")}}function we(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",15),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.onCancelScorecard())}),e.\u0275\u0275element(1,"mat-icon",16),e.\u0275\u0275elementStart(2,"span"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"localize"),e.\u0275\u0275elementEnd()()}2&o&&(e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,1,"Metrics_LinkedMetrics_CancelSelectedScorecard")))}function q(o,n){if(1&o&&(e.\u0275\u0275element(0,"div",13),e.\u0275\u0275template(1,we,5,3,"button",14)),2&o){var t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.onCancelScorecard)}}var Se=function(){function o(n){this.onNewGoal=new e.EventEmitter,this.onLinkToGoal=new e.EventEmitter,this.onCancelScorecard=n?.onCancelSelectedScorecard?function(){return n.onCancelSelectedScorecard()}:void 0}return o.prototype.onNewGoalClick=function(){this.onNewGoal.emit()},o.prototype.onLinkToGoalClick=function(){this.onLinkToGoal.emit()},o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(Zt,8))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["empty-scorecard"]],inputs:{canEdit:"canEdit",isMetricsPicker:"isMetricsPicker"},outputs:{onNewGoal:"onNewGoal",onLinkToGoal:"onLinkToGoal"},decls:5,vars:2,consts:[[1,"empty-scorecard"],[1,"content"],[4,"ngIf","ngIfElse"],["metricsPickerView",""],[1,"icon"],["localize","ScorecardNoMetricsTitle",1,"title"],["localize","ScorecardNoMetricsDescription",1,"description"],[1,"pbi-fluent-button","primary","new-goal",3,"disabled","click"],["fontIcon","pbi-glyph-add",1,"glyphicon","glyph-small"],["localize","NewMetric"],[4,"pbiFeatureSwitch"],["class","link-to-goal","localize","Metrics_LinkedMetrics_Button_Preview",3,"click",4,"ngIf"],["localize","Metrics_LinkedMetrics_Button_Preview",1,"link-to-goal",3,"click"],["localize","ScorecardNoMetricsInfo",1,"title"],["class","cancel-scorecard-button pbi-fluent-button",3,"click",4,"ngIf"],[1,"cancel-scorecard-button","pbi-fluent-button",3,"click"],["fontIcon","pbi-glyph-chevronleftmedium",1,"glyphicon","glyph-mini"]],template:function(t,i){if(1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1),e.\u0275\u0275template(2,ut,9,5,"ng-container",2),e.\u0275\u0275template(3,q,2,1,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()()),2&t){var a=e.\u0275\u0275reference(4);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!i.isMetricsPicker)("ngIfElse",a)}},dependencies:[U.NgIf,jt.X,Ut.Hw,Q.P,xt.F],styles:["[_nghost-%COMP%]   .empty-scorecard[_ngcontent-%COMP%]{width:100%;height:100%;overflow:auto;display:flex}[_nghost-%COMP%]   .empty-scorecard[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin:auto;max-width:350px;text-align:center;display:flex;flex-direction:column;align-items:center}[_nghost-%COMP%]   .empty-scorecard[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQkAAADwCAMAAAAkXGEzAAADAFBMVEUAAAD50Rr2yhLzyhLzyhLzyRLzyRLzyRHzyBLzyRHzyRLyyRHzyRLzyRHyyRLzyRHyyBH/0hTzyhPyyRHzyRLyyBL0yRPzyRH0yxLzyRLyyRH1yxXzyRH4zRf/3CXzyRH0yhP/+UP0yhP0yRHzyRHzyhHzyRH0yRLyyRHxxxHwxhHvxRHtwxHswhHrwRHpwBHowBHvz0n777v99NDkuxHguBD99dPetRD89dT58tLcsxDnvhH89df2yhL99tn999v88cX55Y3555r44oH99939+OD66Zz444f9+OPzyxz22Fb56Z/++eT++eX9+ef56aL++un8+On9+uv78MD666v66qX+++3+++/+/PH666j99tf888z+++v+/PT+/Pb+/ff+/Pn//vr//vz+/f3u2X3asg/Sqg/Kow/huRDWrxDTrA/11UjyyRf0yxL00DP43m/333hZQD345pZPOxzzzSNWQiX////00j769Nn88sjzyRL++efz1FL222W6lA9FKwv///9PNBHwxhL////9/Pzuyzb04Y3x2G3tyCny1V7qwxv////atBb99dX///7kxELp0Gj67bTsxiDivzHny1jCvbLSy8DfuR7x4JbsxBj79dr58tb16r389+X////79d3279Tz7NT49OX69un////07tj28uT28dr18N/7+Ov//fjv6tr48MvX0Mj48936+O/s5tbz7uD++eT8/Pz29fP89+H69eHm4dPw7OH7+vb////5+Pjw7erby6D8+u/9/fvr59zm4c718+78+/j//Oz////6+fjz7+be2M739fH6+PL9+/Pu7Onr6OHz8u75+PX39evv7ej49vPr5dD+++n7+vnt6uT////8+/r////////////y7+ro49aNgWj9/Pvk3MX//O/////////WzsZPMxP////o5d/o49z////X0cXm4tv////9/f3h0ZX///7////6+ffx7+zn497t6eX39fTm4t3m493j39nz8e77+/r29fTm4dzz8e/5+Pfh3dfkktj7AAABAHRSTlMAEzZVa3yUprnN2d3n7PL7/w08s9XzTYEoYp8vxSAHikIDXHPiZr6b8P//////////////////////////HP//////////////////////////////////////////////////////////////RP///wT/CP8Pzv/+//X///+FFv83/8W3////////0f//1v///////xRA/////////9L//////9T/////////iSj/////6adb///////JlUxS////////48F///7///9z//7//////+3//9r/2dfc//8o5f/w391vIeH//+P9/ubq/+3p8+vx7ubq7fvz+PDaofzxuSMzYQAAH99JREFUeAHs04VhhTAQANCL4nC4u+4/YSeot0DyeTs8eDwet0Io40IapmU7rucHGPie69iWaUjBGSXwAsKIyzhJ8WNpEksehaApkuWxg9/hxHlGQC9FWdn4M3ZVFqAHwioXf8etGAHF1aIJ8C8EjagVPpHb+JfsXMknrUjw7yWiBaV0zMT/YrJOnRW9h//J69VYMsT4/+IBbm6cLDyHNY1wX9284HmWuYN76riL53J5d8cX64LnW9bbHWEOXsNhcCf1htfZargLsuO1dgJ3MPIDr3bw8Y26urqRIIihKLqqBMrLzGgoGGjOP66l72ay5sgRXOnJR+qu7qAJ9gaT3V1pf85LW9+AiHgAIprYw16qflRzBnXwL4M46c3JXwyESc6MXohX2xCCxfsQYm8heC88NYV91XoZp9AYYrPdDbTdTE8BpypPxLxBUwkJ291g2yCTS8CbUVlGA2K/342w90wwlX1VWEZziZCkIyRhagmFhZy8QTOSmOV5Wgy7PM+iEMzg7UR/Gf+QXSzzEcroGAHgcBbyfANtkKUaV6ISxh/u62A3bSAI47hAuaL9FBuCkMUh+NBzKkU9EAgJJG4CxLjN2nn/Fykbf6vS1lLxesct+YsDO8ffYeSBl0atfHyPA/z3EgjGLezKCEdITB3yKYFIfG/ehDgJCYQ3wpdnjBORQDyUhOj2cJzEzCHPEuh15SAGfZyQBPoDKYhLhWMl5ux2YbqaV3a1MN3ap3cJqEshCKC2xB1M99US9zDdiUgwEYqBqiGxZJRYVkYJ+5SQUAOBZdnHCUqg731tDnuoI7FilFhVRgn7FJFAb+j5gyrGiUog9vqJ1QnhJvEA02O1xCNMD8ISCDsej64INSWS1XsJJZJVYtv/3c/f35TgXEwC0djbGR6gtgSzEsn1V9NTYjuUYGISCHwd6SM4Szxbic8wVUk8y0tg5AdigsYS6+T6F4l1st7/KGFnghKY+IA4Vw4SG0aJzeZLKbE5jBL2KSmhzptDdGI4SGwZJbZbSmwPo4R9Skog7jSWCPAhJBBILIkaEi9/l3gRkBBYFV3lJpGm6S7d7VJKpOm0lODclO4okZr/+7mwhOq2uiSsRMYokWWUMLNv302bLKNExgQlmq+KAAISTzBN5SQEVsUETSVeYVpUSMzal8CkxSVhJbTWmf4pobMZJfZzK6EXML2amRaUaL4qxiHcJZiV0PNSwsxKibm2EprJSyB0u8UuICCR539I5FrnZt6CBC5cIIaqgUTOKJHnlDAzSuS5lWBtSKihwykewafE8neJ5T+RQFT/QD9DE4mCvZUSRUEJM6NEUZQSbwVrRQJndSE6n7xI/GDuPNjTRrYw7N7AlwMh7uVyl4V4+6Z3F8JiuT/YuLftBUxLYc1u2j+/YggayRmfkXQ0it/0Ht4HSTOfPh3v/9DgYHf3kH3nZuPnbrLvHu7uHrDv7Ptr4ka7QxNJIJk4coE/JiDpTMQ4fHoTqorf445MJD6xCZXF74QTEZ1ANHF8cnJ8cnx88uHbBifin9P58PPchOLid6eDK2iAauLEBdyE4uJ3wP6V9HP4pCaUF78/t73hiHtl4vTkVP98wkF+/pSbUF38jk+pXlRxE6fO4SbUF7+7bL4lgnQTP7qAm1Be/A5OqctnrG1lVyZYW5la/PYys4nFgQR7IT+5gL0Qn4rf8Zh3dSr0qYZ7Rz875ugee3NT684eFrD66Sa+ufPLsVMRx7/c+cZHE/02BmkAlZkvvr7962+/O+S3X29//cWMrOQ7l7t/PzfnRclXPsqjj25CPzz++PXPvxzx569/6AcHauIgk9cAbt0C0PKZA6qJPmlmB1TYyuib23/88ccd2+i/+fY3rXWR2MTcUgF0mAmdwtIczQTIcrxp8ETFF/qm6JuvbfONvtkyNlCiuvP9lAZN7t6FJlrqPqnuPC1ZVQ0CHeKmWmDiIA8t7t+HFvkDionBKUXb8fhZ+CwO9KCF1505c0UQmYCi0fl2U3fuVHS+PNP/9BmWH+LBKGbiVhHEJqB4i2ACPWdOgmsacz3DcDmTk+Cs7szJg4nHj8FE3vz7HJqAScRENyh7T7S1uTWRgstNQIpgohsxEQXaecI7E2mDAw3M7O+DGe0gbeDURJSwmBgEHBUmSmDh6VOwUHJvAkbc3xPuBSfMmGlrm7kcxMStApgoltPpchFMFG6JTdDuFw8ATv+Q+/VEpeJgPcGL3+kqcLRcs/id04BTXXRd/B5wfbvnv/htY3Q6y/PndkJ6bqLFEhi8mGv95NwLMFhadF93Hnd55ejRL7PXQY4wpH/50m5IbzWhgcHCosECGGhiE6SrxwSgJBvL08gAyBCH9K9e2QzprSZugUFthZtYqYHBLffF7wmxiPYQIETPWnOb4oDAQ3rEBBrSW4vfN8GgvGqiDAY33Re/Q+2O9xzBMeOQiiSjgMBDesQEFtJbS75bYLCwZmIBDLYIJd9ON49xjDF/4STIEIf0f/8tD+kFJvbAYNm+CeKDH0HACU7qIgYAhYf0D+5aP9/Xv2CfeUhvMbEJBmWziTIYbBJMBN2lVRMx2fuGHtJfLH7fB4PaBqNZ/K6BwX1B8Zu0zBwFKV1nIIMeTVtLvmsaGOSyBuar6Aal5Dvq7mmviV7fTWSXTAurbItz88oqKzdRH3ByohgAKfUAgPpJHFYTVZOI2a0sw7LaXrBhYmLMwYK7Heh4ZoIXv7NPC4aIZzWopbLZCzuw2W158Xvo8gr6xyuKoStmwqD0QcS2LkJndRUslPjvFJgwYuyuy1QMkVvaCmaSiE08LjREnG+nmQj45x8wo83ubOPF7/oEe7HjvVGbO/NrV8vEDifTELGjixCZyOxwxCaivWx5PDRRt/n4S9xTE7MuEJlg/KuLWKxBk40NMLG0g5tghLqQO1rxiyLCcLVM7JpIn+8aIqwmiov8dyF151DHEBbKW4l4a+KZC8QmGKZN+OGhScT+ri0TMIYEDhF6y0ypiSML6bzIRH7VbvF7oG6/fdbjrYk0ytNUmYfzN1vfEZjgZAoXTWjzO55U4HvIlw6CiSWAFy0BT4uYCc5sqeliexsaFF4/w4rfhGcnoz6amAcdbSvNeA0WE0jxO73wb6FpQsv/sIEXvwn3f64DGWFIb0xjMUifa9CgsP4hmrWG9Hjdefbm0dFmGq07O+U6fdeBmkDIm+5UzGkA1miaXvzGkO88OvwzwY6NIjTIzBZBYIJW/HZMh+00l2iCT2Nh32XHRnH59Ywh5GJITy9+U1LdLo9NrF5KHgAK88vLpQI0qVlDenrxm/a0YLfHJtYuIwM6r5d1yho0eLFgDWTpxW+UoOxGWI9PJs4LAFBbZmQaKgqZZasJevEb48Y12dKqV6WJar78bK1JjS0Ol5vMv2BvD6sJevEbo0/w5u8lN83k01lY+L6RYsfARoMM6JTWWyyUUvrX1pCeXvzG6ByRNc/6PTaR5WwBo7aZzc6xY2P9AtZAll78RojG2nolZfYBZSZ4Ter1fXZsVOUmRMXvN29sFr8RQuNs9A4abwdUmUgXQacABqV1qQlh8fvtW3vFb4T6kHBkeMDOPVHadBbjxs3rqpG01HLruXX9c67xLUM0nUVQ/H7+3F7xW/4Rkdp7sXujg96bYKRAJ5/L5VIvANixkfuI1u/Fn6auVEhPUwf7THH+SHdfEAwG6VtRuYktYEvrnM76aw0AyrmPQKazyLp7HJAw0NvNh8jGRvvql25GQx6b2Gmimd8GC0vFUk6AJZom9Dm7w92AEEq2iz+IWchiAtSYAJ1UTgJu4rPP7JoIywL6wAjbbIbgAkrfE7tNAOB1TgYSTXMDhPcEJx4WDekKqTxPcBP5PSl0E7bpbYtF4SL/UXrtOGoCxXW5CR7IKjcBk6PAEV47gmpMaNW9q2ViuE/WtYqDUxIhGyZSe65NDA2pMHGtLjiREvcdgS4b01m27CAM6bkBT02I3vsD1L1opIcJSWCTODa35GyeNKGZINBPzSeSseGJZKQrpGBOjb8m+oiZFWt/x3pUTGfx2UQvNcccFleS6CG93yZ6iC2rnpjoOQhKSC82EQ6rNjFMut8R6ookJ4ZjSY+nswhMJBKqTXSR7oElAqDTE3E+neXnn+2F9PyVqzbxPy/ui3YFnE9neYeH9P6biHhxrzyUcDyd5d07PKT33wSLcDh18Aw8pH//Hg/pfTcRihE6NZTpLO/f4yG97yYCynpW4pAeT+t5SO+/iQShe0eazvL8ORLSC1759LRiE0nCIEjSdJZKBQnpBSZiMcUmuukdXbkPMzduIGk9cHxfbQ8p623jM0lkr8h/E5OKuvzIK6OYYCaVcJ38fAfdBJ7Q89+PTfyhM0F+5oduAr9rw3+/34PIh67ue8Lnj/PSfpXPE/TIXb7/4gxcVRPEyB0nNEX8iJHqTYyM8N9PitxxJvBx4/ShVnQT9Tr//aTIHacHnzVAH3RGN8H/nJvInTaKIw4I5OF34TDFBD1yl8c0nKTS98TEBMEEIXLHiRNmYxKG3xFMECN3fF3l+4pCsYmPI3f300L71XuYman8n7azem5ch+LwZWZmJo3AjangLbezzOw8Xlpm5lUpUAos7x97dax4E9XXWo2n+p5D+ub8ZEUP55zlHCFkyZzmyt2s54LkVeseOMfQ9Q1jzsGHLRPvFz9NSL6wLgITcXvHGKVEgLn0UdyEveF5n1gXwTbOzJ47c2POYdIHBh/auFg18ZG+P6Y9E8QpdXqdlffNL5QqDqOgQxsXmybe+VHTFtIinNDor1CakIztnKzO1Zg2LjZNvPZCLm/ZNcGCrWG9HgJeFzcbF4Tsm9BPKXjVajho1L83NaHqUOIiw4Lsm3j3x3wTwzZNYOovxkvLy0tLoYKXjQslmCPrJn7X92C3GY4jK3G8YUMcx0tAng+Iy3FCOLJt4qS+L79VE6txL6oO1cdGgrllE+/8aGVWA8oizwmox0T//IhAsZFXHmUG+bBgwnhsxWvGK+dZsEJ6TkCpib6hxkiCgQ+3jxiYSH0XMvHFusx0QbBs0gvN0nkQcJRumEPhaIKBj4lIawIcSPdSdwEX36zLAH/ECaFM4HSATtEJtVqtWRHMCUpAhcolgYmWFGGi46+IpibyHaT+pe0CnTG1/GAmgl7eeO7cxNatO/fv29doNNy9e8eulr3/oXyZJnsfx/RIe0owqpLjo6rWhCqBYHDAGJu7ceace3UjK6DiU7WjV8G/YRyTStkzZN4hHMkT5l9Tz3iejlbXhFIIqYNKaWF+X/obSkIFKnLS1vOliQlW8hTCfM75FCcm+vr3TydodUgfS0cckj5F1TCw2lx1cueY8t0iSpgX3y+LTxdFnESl0JStRxjh8qx9VZow8OEGsDYohLNn14Qh619+RdEuVhpeWU8TS+HOgMGiMI0WoZfTtEJeXCZ8SqASYLJBJwzj+8p5Nbh3KKLZeCCg+Ig4WRT6D4VVrSzpgYdAnHA4YITDNuGvpI31Mz4yOkS9E0gEZffuZ8LQi/yuB36mKFASqbzTxpvFZs4iLkFdE/5KbMo+aQKzYGH7NiCrI+ujLUwQclyE4dIljQOQDaz4DPPMBVnzeEXeemRd/FRo6CznhBB5RCpiohE4siaCh9slGh+pjpZDCdko+/nnFEIvq2B77XO+JraUfTeblBAojGLTqX9dI5fOnan2MZqoSNMhNvgRIxIT8JYh9/r162BCrwOIA0YpK0sTOXWQAt8x3++oJrj4vgV5njl345EsDKQpiTx+fFORy6riN00eiVIV0oQJoyOjo25/xOBE6v/9WHSqETKyPjJC3COMUccNBfW6XgIw2lC3TPjV7Egj/W87tvEyJbhHxlvmA8s/6kkGrY0n5dkOYBd7ZmLUjMdX3CHfYdSJgge7d+xK0fgAHRM+ozSa6JjQOBCmgXDIV0xwQv1W7x9990yFysqQJWHO6917+bmGzGm5FTgU846JlomFx1euPHny9O8jflSpVv+j7D6Cm8jyOI5vjufd4942B5KM4uRxFRlkk4py6G4yN68LlzaizcGsYYpYkmVhtRVaXhyGccuaoDYSM0L2MJJzJme4n/f312vJHYRgv+QMH73/635NOnk24HYzh5dyHHDiHspygAy6uowGegTWGf3Fg5bEAZxeNBaaLQP/bs+r99r3tJMBCCzP907iBgao+PwVCdrq361Q0AcHv//Spe7Oo6cOEObFAyFRL2H2QEWPs07Mk/Nf+1BPT1UD9C46q5Ogl8paj+u4HqO0ZXz11R3Q19XJ+HvJAevz7w4LUTCJd19cMBj0eRhDdzgU+M06ym7fGQEFqttRIT3HhVW4XDnP7EMdHdUNWAd0Fw9cstnFzYDBtowftaBXl/jBdzWTAYjii3LWSlsFJDCFtS9IdYhCoTsmNcbjzXY7fR92e7g3EgqJCBgN6MXLw3XkV5BYZbW5XC6fD2/R66/jvQoItcV2WfFkR/tbTDUXcXwxYKhPSf97ubW19f/A+L5uMtjqXH+mZjW2CrrbfoEEGPr6otEwLYb+eLEmu339epvNZu8fGIxFEDiYhZbD7ca/9xZQ68SOhB3T2ulfCYuM3vN5fEEdAutN7cWDhuPCOu3RVrsw3m9ru/LBOWC8mkVLS+u3tJOBaG2uLW4Vf4bEhVpNG+jtkCyXGWJiY7yc3W5Dfh+X6B1Ock3iIDBEUarb3VAOEAAIIZm6WOPEQyCn9eIlU9AAhZ6ffuSTR1b98s/aZ8fsNGdeGLb2NvThRx8ff6WFAYjWT97TQqgz+mtsFbg0Q2KDriH8bPoYQzSUivOaVAlXQBm5ms5wPM/1Dw7CQpKk3RRJ1ImhUCRW7rT1iNPptDhOd7PCVBT19cnRqCdYNlj5oU/RNf6npeFYXbNTc7LVYVwjCerTz86/3AIOxz/+y/u6yXidTedpB50IILGlHH4uQ0WGcJh2Bt5Q3O/fh3n3pJTs9VySEwSB50azZQuqThJD4hhqbGyi3lSfgQXjFeqLBoMMAbEfG0QXzxxhz4DZzcQF/FTfqIThaUdtan/9/HJVixaC+Axf0WOGqH2dtgqa4a1qGzbIKkOYLQZTfhflH1NGE0wC8ckIs0il8M9ZSVIowmuyr2P5K0lI4T55iDHQiyDTjy3F3fazR1ZjCyvdTNRqj7YrFq6Orq52LQa2DB2FEeLylTbUYSMHVHKg+XwTE/krHCJUiEAAEGAwLAajhM/n57jMjS/yGUVQayqoFnv2psRIRD9PbKbtlST6B/rkDeptGBxi0ZiEF2Cvvf6kBbt56WaCHeZMC+NaT09Plx7jr+daqk1GG2pvv6ZbEIBAG7Y7LKtXWRy/K7aNIGLiWDP/4jx0DfR5lAyfHp9gEiy+P5sNFSSpXxIHs/xKY3YbOeBys1ePwFP9k1F5Q/E1YA79qp7ttIPmgz0JqWUZMYI9LJ3Fx60t1SaDILq6pnSTQWFJ/sNhcVoObt1BQSIyxlfPQ/cBnoAy7Z2e0UnAYpQsCoXQ8DA+UarOZiMKvL9bQ8BiEoHiWpRjMeZA+e2dR4/Q3Q4Nx0WMjgkDzXZ0dJgwsFdUm4x2gujp8BgWBCC21p6yWo4c3MBuA0IRkX9JQUj4+iRO8XpvpPNzgr5kIRvJZkducIyIPAJ+238om20bEIyNTsZkowMa8rtO0+0VnccdNkyO3oIw3p2an19YgIUO48oJJmGejE9LED1o0QSBdbnupLXm6JCbScQKL5eg+62xOcHrXVrKZwRjXGF4eHkkmYEFK+hyse3NJfPmINHHHFK8JrffVY9Fgd8H+KXlLI4vsDAuDECgBQ0GbRmfQ6LaZDCIjoUp/WQA4ne/27Hz6MGjfSLdJoqhWG8VBIGSg1Ryzuv15scnphXBFJdOLOfyyUyGExDvAQSj8FSSuNobQ8ah3ONxYVGswsltVc3OrciEMbS4ODs7a8Rov3kcElUmo4dBzM/LhgXxux3owLFDUdENCbcYG2iqosAkcBaRM/shodzIYTzMKcmldJpZKEKcdlgKp1nTcHDcxNXe8CAcDMX9Pl/9UTzX+BXuf7GXMwstxq1FilnQlDCMKydIovpkdBDE/KIJAm07dag7RPdFkhgZKFRjQIEgIGQsCTTzRX5O2Y/0EEom453LpXMTwODGyEGlaDQ4ZDL59O3JQTiYgsQb2ClWrT7yjx0IFiUMZnHn7r17zEKHcf+EEaJFe81gCwIQs7OLt/STQTXU+Q5NRkTcCuBOoHfYqKCLV3C1ww0x56VyNB4koRRjW6QCiWlaMROwSE5LnvKZ05cyOkzklhKjHMebk/GtsFM4Ldb68tFWMyV37iIDBqak7YFhSRiuGWwyAIFvde9OeUGUIBrqdnfe7gXFnj2SOJygNYufY5KDgiEFBQhCjgsC5mNuBuOhmMsk93vR/iQsIpc8JYmgW++Qz6UnuCQHCTO+Gxvzu2cdlpozbu0xX8W48xAxi3vaKfnoxPGWFv2KME5GGeLu3Tu6yQDE7t2pPZHEcEhK7e0vDCfSuaWZR48fPxpPmiAE1DiGmgXWI1xH93vNTe8X2Ecyue5L/tLJOxjQOCTJQYCWRkJDnwpCov6Y1fF3t/bZB7NwPwFEJYxPThiXRMXJYBB3H97ZsgLRQBD4Z2+FkYFsoQCI5afXH6OZmUfPbuSNEl7E45/tKhl5l7I5rB18xJCilH2ksN9DEpTMfrGqQ774zSDBEPQ1FQ9mZ48dtUsNSIfhfv7kSclCNyUf6ocDEB8YIOYZxD1A4Bs/cZODDmKvMJdIjIwsJxLXnz5dmpjzovyjcU7QxyTiTVzpE/mZ9Giymf7nHk7ReijllSLEG7shoT754cmTYw70NZiEokJDCFOZYRuSPFQ7VNt5+FSITrg6DPf/2jMP57SRL47//rtf90x6x0L7D1ydcvVdmXZtypVpxxV7gguTAGmgKyxIk2BBBBYeaTRzIj0B93o2Tn+r1RqMzFjp9ZO4t9Vnvu9p92l2BlUEZKCNcx+/3WXiXK/KQBFoYmaHEME95EbGK2ZzamosU8+qCggcQ9nKBHYRGXzkPDMx6rnox7eYD9+ELAsTo0eH+AgCW20Er9fzoBDw4XswpodXZdOuembO4An9X6e/m4sPisEHIkQgW8n4IVAcx37rCES3CPz5GRGInXiEjqcxC81GI1NXHeiAgK7KnUSj3ES/BBvYbkmJ9I8y+hn4NiJFqSQaBUYo9+vQz6f5AOJ0mYvwPYhMaFqtYhpNholvjZqMDDIT//rxUpbd1Pa1ZeycX1iY8elycTZw53jz3VOdIriHq20PMzOzOJHeuWPHYDydyjAM3QrUOgEwadAElaSOb9VNXeEn104XkZKXeQDAH0r/yiYQnL3YI6oKbECoU1NZFBCjUqWAWIbtsJbJfiaWy6fiI8n9+/dxGRhiFMGY2SIYbKfdZeLtj3/vVRkoAllYjOHGmlvIqhqBrSBQsTaZoL4JaCMZuiJ2pSIZ+KqMmR+NeneFyMTR46f/5c/D+mRHUTYsUFYQ00jT1i0CAtlmoYgwEbGIlsmOJ/ftR3K5EWR+ViBUeHgmLgTOHLituvD5RiC2EnFxabmA1LO6Bj0hUBXlQau1WtVyKGEmZOjAaxTRLhfMBLMQxZf0xNDxM2IOFKMSmmBRcFhBNJBps+Z0/1kXnUdjMZyOy3I+H0/mUEQynkjV6ys+S4K/BRcvfu5tJgI7zB++7NhNXd3sYeHiyuracjEpQW9EeQDDMnHJzYbhqlXLUgh0UHE9EwI/FdwEc9E/gcURYx7e///7fX2SVK04FuuNDFtVZNgCE93Isb6+WBnAC0X5SDKB8W0tI2uc1QCBnTbfY358vmdlLMwura07sD0EXMcTYWMRV+zmNF9+pWZRSsRN0GY7im6OaBInOs7mD+JZcl+spJvT/NeIKAQhoNYACJroi7LU5dFEOZspKoSwMFk3PRaRW7fWEUwGpmT19ifX32UmgiruBCpjhotYuLh8F8JAQK+xN25DAQa1dLPhXYdhurrioA8ghloNmohozAIjlRjeEBEbnqhPt1pjojf2gAB1KUix2I4RAC8UyVKyXoJtmL8WMCFaxVkUEagMZP5WBUKaIKxiHUODNkSruUbDw8ZqcQy3pnWrkJgJfziXjsd2+CIShUKGHV+3/7umUmaPGSMAfijcMEu+c52bCLaKb1gggiLmbxEgIVXk8bSeLga/3alWbK5juoWp2OxCkkaFiURieMAXsSNRSChyuD9bTAzuQGTgoSjqJoRZ8rU3ewy1z28tYn4RLAohlxQfGUnQHqugiorVMjXWmsaq3+Ri1FdTnhgeYNMwxmBGhXAQ0AppzESOgEejUVkHZ1sTFD4PmBCt4iTzgHR6YEDVCrkkJYEHdSAEeiKrLvbSZtPtVNGvSd64opgYHtyxlxMvQlgI5AupVKKoVy3qUHK3NW0Che1NzAsTwVbxWXcgPBWLQB0IAxpIDMSL26+CVI2m2qFC4iZG6+kBfmxABghQCEs0VcCm0mS3bts0p6Z0ICFMADPRo1X8tVkEZz30mggUC5lqqK7i2lq0DZ/mjie8URgnCZYF4YmUdHfd5r251YIAoU2IVjF50WNWML+4uL5MgEBItHoewiEmOzwTrDZoKhvH8Y9PDqo6gQeGUMui8CgmRKtYFawhyx7rQOBxQ8DiJhCmgpnQ8/FBfE4qAKISeHIIEz1bxe1uESu3nsR6LAKa3MbLRB73ybkjgpwCNQJPlu97mkAV8FQgugOS3Ia9r+SL7MTgUx5XwYEnzOSpY+La4RlBKgBylwk7K0SUS6XxYlMFAk+NZ2mCbjJBiVZnkSiXxt2ika/X63kC8CqYqIEit6Ga49j5bNYw8s1pD6NC4NUwYUHFAcQ7ON/VXdOYGrvXaqEDu3LXEhZeARNAwXQtx/IcsHNZc2yqhQ4cAs+Gf7zmNa95zTbcB561bL3JySyTAAAAAElFTkSuQmCC);background-position:center;background-repeat:no-repeat;background-size:contain;height:200px;width:220.83px;margin:0 auto}[_nghost-%COMP%]   .empty-scorecard[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:var(--vlg-font-size, 18px);font-weight:var(--font-weight-semi-bold, 600);margin-top:28px}[_nghost-%COMP%]   .empty-scorecard[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);margin-top:20px}[_nghost-%COMP%]   .empty-scorecard[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .new-goal[_ngcontent-%COMP%]{margin-top:28px;display:inline-flex;align-items:center}[_nghost-%COMP%]   .empty-scorecard[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .new-goal[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px;color:var(--text-primary-content-color-hc)}[_nghost-%COMP%]   .empty-scorecard[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .link-to-goal[_ngcontent-%COMP%]{background:transparent;border:none;text-decoration:underline;color:var(--fluent-theme-link-darker-color);font-size:var(--sm-font-size);font-weight:var(--font-weight-regular);margin-top:12px}[_nghost-%COMP%]   .empty-scorecard[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .cancel-scorecard-button[_ngcontent-%COMP%]{margin-top:28px;padding:6px;font-size:var(--md-font-size);font-weight:var(--font-weight-regular);display:flex;flex-direction:row;align-items:center}[_nghost-%COMP%]   .empty-scorecard[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .cancel-scorecard-button[_ngcontent-%COMP%]   pbi-icon[_ngcontent-%COMP%]{margin-left:-12px}[_nghost-%COMP%]   .empty-scorecard[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .cancel-scorecard-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:6px}[_nghost-%COMP%]   .mat-icon[_ngcontent-%COMP%]{overflow:visible}[_nghost-%COMP%]   .mat-icon.glyph-small[_ngcontent-%COMP%]{font-size:var(--lg-font-size, 16px);width:var(--lg-font-size, 16px);height:var(--lg-font-size, 16px)}[_nghost-%COMP%]   .mat-icon.glyph-mini[_ngcontent-%COMP%]{font-size:var(--sm-font-size, 12px);width:var(--sm-font-size, 12px);height:var(--sm-font-size, 12px)}[_nghost-%COMP%]   .mat-icon.mat-ligature-font[fontIcon][_ngcontent-%COMP%]{overflow:auto}"],changeDetection:0}),o}(),se=T(17174),he=T(87650),st=T(77274),Ct=T(33846),yn=["input"];function an(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"input",2,3),e.\u0275\u0275listener("focus",function(){e.\u0275\u0275restoreView(t);var l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.onInputFocus())})("blur",function(){e.\u0275\u0275restoreView(t);var l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.onInputBlur())})("keyup.enter",function(){e.\u0275\u0275restoreView(t);var l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.keyupEnter())})("ngModelChange",function(l){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(c.onInputChanged(l))}),e.\u0275\u0275elementEnd()}if(2&o){var i=e.\u0275\u0275nextContext();e.\u0275\u0275propertyInterpolate("type",i.inputType),e.\u0275\u0275property("disabled",i.isReadOnly)("placeholder",i.placeholder)("ngModel","text"==i.inputType?i.formattedValue:i.value),e.\u0275\u0275attribute("aria-label",i.placeholder)}}function Hr(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"mat-option",7),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){var t=n.$implicit;e.\u0275\u0275property("value",n.index),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.displayName," ")}}function Da(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-form-field",4)(1,"mat-select",5),e.\u0275\u0275listener("selectionChange",function(l){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(c.onSelectChanged(l))})("keyup.enter",function(){e.\u0275\u0275restoreView(t);var l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.keyupEnter())}),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275template(3,Hr,2,2,"mat-option",6),e.\u0275\u0275elementEnd()()}if(2&o){var i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("disabled",i.isReadOnly)("value",i.value)("placeholder",e.\u0275\u0275pipeBind1(2,4,"Generic_Select_Value")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",i.categories)}}var El=function(){function o(n,t){this.formatValuePipe=n,this.localizationService=t,this.placeholder="",this.type="number",this.onValueChanged=new e.EventEmitter,this.onInputKeyEnter=new e.EventEmitter,this.inputType="text",this.defaultDateFormat={day:"numeric",month:"short",year:"numeric"}}return o.prototype.ngOnInit=function(){this.categories||this.showFormattedValue()},o.prototype.onInputFocus=function(){this.inputType=this.type},o.prototype.onInputBlur=function(){this.showFormattedValue()},o.prototype.onInputChanged=function(n){this.value=n,this.formattedValue=this.formatValue(n),this.onValueChanged.emit(this.value)},o.prototype.onSelectChanged=function(n){this.value=n.value,this.onValueChanged.emit(this.value)},o.prototype.keyupEnter=function(){this.onInputKeyEnter&&this.onInputKeyEnter.emit()},o.prototype.focus=function(){var n,t;null===(t=null===(n=this.inputElement)||void 0===n?void 0:n.nativeElement)||void 0===t||t.focus()},o.prototype.showFormattedValue=function(){this.inputType="text",this.formattedValue=this.formatValue(this.value),"date"===this.type&&!this.formattedValue&&(this.inputType="date")},o.prototype.formatValue=function(n){var t;if("number"===this.type)return this.formatValuePipe.transform(n,this.formatString,!0,"");if(!n)return"";var i=this.localizationService.currentLanguageLocale;return Le.E.treatAsLocalDate(new Date(n)).toLocaleDateString(i,null!==(t=this.dateFormat)&&void 0!==t?t:this.defaultDateFormat)},o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(fi.c),e.\u0275\u0275directiveInject(St.o))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["formatted-input"]],viewQuery:function(t,i){var a;(1&t&&e.\u0275\u0275viewQuery(yn,5),2&t)&&(e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(i.inputElement=a.first))},inputs:{placeholder:"placeholder",value:"value",formatString:"formatString",isReadOnly:"isReadOnly",type:"type",dateFormat:"dateFormat",categories:"categories"},outputs:{onValueChanged:"onValueChanged",onInputKeyEnter:"onInputKeyEnter"},decls:3,vars:2,consts:[["class","input-value","step","any",3,"disabled","placeholder","type","ngModel","focus","blur","keyup.enter","ngModelChange",4,"ngIf","ngIfElse"],["categoricalTarget",""],["step","any",1,"input-value",3,"disabled","placeholder","type","ngModel","focus","blur","keyup.enter","ngModelChange"],["input",""],["appearance","none",1,"select-category"],["panelClass","goals-categorical-value-select",1,"number-select",3,"disabled","value","placeholder","selectionChange","keyup.enter"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,i){if(1&t&&(e.\u0275\u0275template(0,an,2,5,"input",0),e.\u0275\u0275template(1,Da,4,6,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)),2&t){var a=e.\u0275\u0275reference(2);e.\u0275\u0275property("ngIf",!i.categories)("ngIfElse",a)}},dependencies:[U.NgForOf,U.NgIf,se.Fj,se.JJ,se.On,he.v_,st.x8,Ct.CK,xt.F],styles:["[_ngcontent-%COMP%]::-webkit-outer-spin-button, [_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}input[_ngcontent-%COMP%], mat-form-field[_ngcontent-%COMP%]{width:100%}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}"],changeDetection:0}),o}(),Ps=["goal-edit-buttons-row",""],kl=function(){function o(){this.onSave=new e.EventEmitter,this.onCancel=new e.EventEmitter,this.COLSPAN=pe.gT.TotalNumberOfColumns}return o.prototype.onSaveClick=function(){this.onSave.emit()},o.prototype.onCancelClick=function(){this.onCancel.emit()},o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["","goal-edit-buttons-row",""]],inputs:{disableSave:"disableSave"},outputs:{onSave:"onSave",onCancel:"onCancel"},attrs:Ps,decls:6,vars:8,consts:[[1,"button-box"],["data-testid","button-save","localize","PBI_Button_Label_Save",1,"button-save","pbi-fluent-button","primary",3,"disabled","click"],["data-testid","button-cancel","localize","PBI_Button_Label_Cancel",1,"button-cancel","pbi-fluent-button",3,"click"]],template:function(t,i){1&t&&(e.\u0275\u0275elementStart(0,"td")(1,"div",0)(2,"button",1),e.\u0275\u0275listener("click",function(){return i.onSaveClick()}),e.\u0275\u0275pipe(3,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"button",2),e.\u0275\u0275listener("click",function(){return i.onCancelClick()}),e.\u0275\u0275pipe(5,"localize"),e.\u0275\u0275elementEnd()()()),2&t&&(e.\u0275\u0275attribute("colspan",i.COLSPAN),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",i.disableSave),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(3,4,"PBI_Button_Label_Save")),e.\u0275\u0275advance(2),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(5,6,"PBI_Button_Label_Cancel")))},dependencies:[jt.X,xt.F],styles:["[_nghost-%COMP%]   .button-box[_ngcontent-%COMP%]{float:right}[_nghost-%COMP%]   .button-save[_ngcontent-%COMP%]{margin-right:8px}"],changeDetection:0}),o}(),Dl=function(){function o(){}return o.GoalNameMaxLength=256,o.MaxGoalOwnerCount=5,o.ScorecardNameMaxCharacterLimit=250,o.ScorecardDescriptionMaxCharacterLimit=120,o.RoleDescriptionMaxCharacterLimit=512,o.RoleNameMaxCharacterLimit=128,o.ActiveStatusMaxCountLimit=12,o.HistoricalStatusMaxCountLimit=12,o.MaxStatusId=255,o.StatusMaxCharacterLimit=50,o.MaxNumberOfCategories=10,o.GoalValueCategoryMaxLength=40,o.GoalValueCategoryNameMaxLength=256,o.CycleCustomLabelMaxLength=32,o.CycleCustomDescriptionMaxLength=128,o.CycleMaxCustomDurationInDays=1e3,o}(),Il=function(){function o(){}return o.getPreviewValue=function(n){var t,i,a,l;if(null!==(t=n?.result)&&void 0!==t&&t[0]){var c=n.result[0],u=_.filter(n.columns,function(x){return x.isMeasure}),p=_.first(u),y=c[p.index],P=_.find(n.columns,function(x){return!!x.type&&!!x.type.dateTime});P&&(a=new Date(c[P.index])),l=(0,Ai.EO)(p,Bn.iu),_.isFinite(y)&&(i=y)}return{timestamp:a,value:i,formatString:l}},o}(),Fl=T(17085),xs=new e.InjectionToken("ConnectToDataDialogService"),ci=T(5432),_o=T(32293),Gl=T(78035),Os=T(3307),Ts=T(12587);function Fa(o,n,t){return(0,b.ZP)(o,function(i){-1===i.start.column&&(i.start.column=0,i.end.column=t-1),-1===i.start.row&&(i.start.row=0,i.end.row=n-1),i.start.row=Math.max(0,Math.min(i.start.row,n-1)),i.start.column=Math.max(0,Math.min(i.start.column,t-1)),i.end.row=Math.max(0,Math.min(i.end.row,n-1)),i.end.column=Math.max(0,Math.min(i.end.column,t-1))})}function Ga(o,n){switch(n){case"Date":if(o){_.isString(o)&&(o=o.replace(/\//g,"-"));var t=new Date(o);if(_.isFinite(t.getTime()))return t}return;case"Number":return _.isFinite(parseFloat(o))?parseFloat(o):void 0;default:return o}}(0,b.Fl)(!1);var $i=function(){function o(){this._columns$=new Me.X([]),this._rows$=new Me.X([])}return Object.defineProperty(o.prototype,"columns",{get:function(){return this._columns$.value},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"rows",{get:function(){return this._rows$.value},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"rows$",{get:function(){return this._rows$.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"columns$",{get:function(){return this._columns$.asObservable()},enumerable:!1,configurable:!0}),o.prototype.setColumns=function(n){this._columns$.next(n||[])},o.prototype.setRows=function(n){this._rows$.next(n||[])},o.prototype.appendRow=function(){this.ensureRows(this.rows.length+1)},o.prototype.ensureRows=function(n){var t=this.rows;n<=t.length||this.setRows((0,S.ev)((0,S.ev)([],t,!0),_.map(new Array(n-t.length),function(){return[]}),!0))},o.prototype.setCellData=function(n,t){if(this.isValidCell(n)){var i=this.rows,a=(0,S.ev)((0,S.ev)((0,S.ev)([],_.slice(i,0,n.row),!0),[(0,S.ev)([],i[n.row],!0)],!1),_.slice(i,n.row+1,i.length),!0);a[n.row][n.column]=t,this.setRows(a)}},o.prototype.deleteRows=function(n,t){var i=this.rows;this.setRows((0,S.ev)((0,S.ev)([],_.slice(i,0,n),!0),_.slice(i,n+t,i.length),!0))},o.prototype.emptyRange=function(n){var t=this;this.setRows((0,b.Uy)(this.rows,function(i){for(var a=(n=Fa(n,t.rows.length,t.columns.length)).start.row;a<=n.end.row;a++)for(var l=n.start.column;l<=n.end.column;l++)i[a][l]=null}))},o.prototype.isValidCell=function(n){return!(!_.isFinite(n.row)||!_.isFinite(n.column)||n.row>=this._rows$.value.length||n.column>=this._columns$.value.length||n.row<0||n.column<0)},o.\u0275prov=e.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac=function(t){return new(t||o)}}),o}(),ir=function(){function o(n){this.dataSource=n,this._editingCell$=new Me.X(void 0),this._isReadOnly$=new Me.X(!1),this.isReadOnly$=this._isReadOnly$.asObservable()}return Object.defineProperty(o.prototype,"isReadOnly",{get:function(){return!!this._isReadOnly$.value},enumerable:!1,configurable:!0}),o.prototype.setReadOnly=function(n){this.cancelEditing(),this._isReadOnly$.next(!!n)},Object.defineProperty(o.prototype,"editingCell$",{get:function(){return this._editingCell$.asObservable()},enumerable:!1,configurable:!0}),o.prototype.isEditing=function(){return!!this._editingCell$.value},o.prototype.isEditingCell=function(n){var t=this._editingCell$.value;return!!t&&!!n&&n.column===t.column&&n.row===t.row},o.prototype.tryEditCell=function(n,t){this.isEditingCell(n)||this.isReadOnly||this.editCell(n,t)},o.prototype.editCell=function(n,t){this.commitPendingEdit(),this.dataSource.isValidCell(n)&&this._editingCell$.next({column:n.column,row:n.row,data:_.isNil(t)?this.dataSource.rows[n.row][n.column]:t})},o.prototype.setEditingData=function(n){var t,i,a,l=void 0===(i=(t=this._editingCell$.value||{}).row)?0:i,c=void 0===(a=t.column)?0:a;this._editingCell$.next({data:n,row:l,column:c})},o.prototype.commitPendingEdit=function(){var n=this._editingCell$.value;n&&(this.dataSource.setCellData(n,n.data),this._editingCell$.next(void 0))},o.prototype.cancelEditing=function(){this._editingCell$.value&&this._editingCell$.next(void 0)},o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275inject($i))},o.\u0275prov=e.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac}),o}(),or=function(){function o(n){var t=this;this.dataStore=n,this.currentSelection$=new Me.X(void 0),this._enforceSelectingColumn=!1,this.normalizedSelection$=this.currentSelection$.pipe((0,xe.U)(function(i){return t.normalizeSelection(i)}),(0,Fn.d)({bufferSize:1,refCount:!0})),this.selectedCell$=this.currentSelection$.pipe((0,xe.U)(function(i){return i&&{column:i.start.column,row:i.start.row}}),(0,Fn.d)({bufferSize:1,refCount:!0}))}return Object.defineProperty(o.prototype,"selectedCell",{get:function(){var t;return this.selectedCell$.pipe((0,ue.q)(1)).subscribe(function(i){return t=i}),t},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"normalizedSelection",{get:function(){var t;return this.normalizedSelection$.pipe((0,ue.q)(1)).subscribe(function(i){return t=i}),t},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"selection",{get:function(){return this.currentSelection$.value},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"enforceSelectingColumn",{set:function(t){this._enforceSelectingColumn=t},enumerable:!1,configurable:!0}),o.prototype.setSelection=function(n){n&&(this._enforceSelectingColumn&&(n.start={row:-1,column:n.start.column},n.end={row:-1,column:n.start.column}),n.start=this.normalizeCell(n.start),n.end=this.normalizeCell(n.end)),this.currentSelection$.next(n),this.clearFocus()},o.prototype.setFocus=function(n,t){this.ensureRowIsInVirtualScroll(n.row);var i=t.querySelector('[data-row="'.concat(n.row,'"][data-column="').concat(n.column,'"]'));i&&(i.focus(),this.focusedCell=n)},o.prototype.clearFocus=function(){this.focusedCell=void 0},o.prototype.ensureRowIsInVirtualScroll=function(n){var t=this.virtualScroll.getRenderedRange();n>=0&&(t.start>n||t.end<n)&&this.virtualScroll.scrollToIndex(n)},o.prototype.selectCell=function(n){n=this.normalizeCell(n),this.setSelection({start:n,end:n})},o.prototype.setSelectionStart=function(n){n=this.normalizeCell(n);var t=this.currentSelection$.value;this.setSelection({start:n,end:t?.end||n})},o.prototype.setSelectionEnd=function(n){n=this.normalizeCell(n);var t=this.currentSelection$.value;this.setSelection({start:t?.start||n,end:n})},o.prototype.selectAll=function(){this.selectCell({row:-1,column:-1})},o.prototype.normalizeCell=function(n){var t=this.dataStore.rows.length,i=this.dataStore.columns.length;return{row:_.isFinite(n?.row)?Math.max(-1,Math.min(n.row,t-1)):-1,column:_.isFinite(n?.column)?Math.max(-1,Math.min(n.column,i-1)):-1}},o.prototype.normalizeSelection=function(n){if(!_.isNil(n))return{start:{row:Math.min(n.start.row,n.end.row),column:Math.min(n.start.column,n.end.column)},end:{row:Math.max(n.start.row,n.end.row),column:Math.max(n.start.column,n.end.column)}}},o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275inject($i))},o.\u0275prov=e.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac}),o}(),Va=function(){function o(n,t,i){this.selectionService=n,this.dataSource=t,this.cellEditingService=i}return o.prototype.canCopyCurrentSelection=function(){return!!this.selectionService.normalizedSelection},o.prototype.copyCurrentSelection=function(n){return void 0===n&&(n=!1),(0,S.mG)(this,void 0,void 0,function(){var t,u;return(0,S.Jh)(this,function(p){switch(p.label){case 0:return(t=this.selectionService.normalizedSelection)?(u=Fa({start:t.start||{row:0,column:0},end:t.end||{row:0,column:0}},this.dataSource.rows.length,this.dataSource.columns.length),[4,this.copy(u.start,u.end,!1,n)]):[2];case 1:return p.sent(),[2]}})})},o.prototype.copyAll=function(n){return(0,S.mG)(this,void 0,void 0,function(){return(0,S.Jh)(this,function(c){switch(c.label){case 0:return[4,this.copy({row:0,column:0},{row:this.dataSource.rows.length-1,column:this.dataSource.columns.length-1},n)];case 1:return c.sent(),[2]}})})},o.prototype.copy=function(n,t,i,a){void 0===a&&(a=!1);var c=_.map(_.slice(this.dataSource.rows,n.row,t.row+1),function(W){return _.slice(W,n.column,t.column+1)}),u=[];if(i){var p=_(this.dataSource.columns).map(function(W){return W.name}).slice(n.column,t.column+1).join("\t");u.push(p)}for(var y=0,P=c;y<P.length;y++){var N=_.join(P[y].map(function(W){return a?'"'+(W??"").toString().trimStart().replace(/"/g,'""'):(W??"").toString()}),"\t");u.push(N)}return navigator.clipboard.writeText(_.join(u,"\r\n"))},o.prototype.pasteOverSelection=function(){return(0,S.mG)(this,void 0,void 0,function(){var n,t,i,a,l,c;return(0,S.Jh)(this,function(u){switch(u.label){case 0:return!(n=this.selectionService.normalizedSelection)||this.cellEditingService.isReadOnly?[2]:[4,navigator.clipboard.readText()];case 1:return(t=u.sent())?(0===(i=_.map(t.split(/\n|\r\n/),function(p){return p.split(/\t/)})).length||(a=this.dataSource.columns,(l=n.start||{row:0,column:0}).row=Math.max(0,l.row),l.column=Math.max(0,l.column),this.dataSource.ensureRows(l.row+i.length),c=(0,b.ZP)(this.dataSource.rows,function(p){for(var y=0;y<i.length;y++)for(var P=l.column,x=0;P<a.length&&x<i[y].length;P++,x++){var N=Ga(i[y][x],a[P].type);N&&(p[l.row+y][P]=N)}}),this.dataSource.setRows(c),this.selectionService.setSelection({start:l,end:{row:l.row+i.length-1,column:l.column+i[0].length-1}})),[2]):[2]}})})},o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275inject(or),e.\u0275\u0275inject($i),e.\u0275\u0275inject(ir))},o.\u0275prov=e.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac}),o}(),Qi=function(o){return o.ArrowUp="ArrowUp",o.ArrowDown="ArrowDown",o.ArrowLeft="ArrowLeft",o.ArrowRight="ArrowRight",o}({}),Ji=function(o){return o.Enter="Enter",o.Tab="Tab",o.Escape="Escape",o.Delete="Delete",o.Backspace="Backspace",o.F2="F2",o.Space=" ",o}({}),Vl=function(){function o(n,t,i,a){this.cellEditing=n,this.selectionService=t,this.dataSource=i,this.clipboardService=a}return o.prototype.keydown=function(n,t,i){var a=!1;"c"===n.key&&n.ctrlKey&&!this.cellEditing.isEditing()?(this.clipboardService.copyCurrentSelection(),a=!0):"v"===n.key&&n.ctrlKey&&!this.cellEditing.isEditing()?(this.clipboardService.pasteOverSelection(),a=!0):"a"===n.key&&n.ctrlKey&&!this.cellEditing.isEditing()?(this.selectionService.selectAll(),a=!0):n.key.match(/^[a-z0-9]$/i)?a=this.handleAlphaNumeric(n.key):n.key in Qi?a=n.altKey?this.handleColumnResize(n.key):this.handleArrowKey(n.key,(n.shiftKey||n.ctrlKey)&&i,t):n.key===Ji.Enter?a=this.handleEnter(n):n.key===Ji.Tab?a=this.handleTab():n.key===Ji.Escape?a=this.handleEscape():n.key===Ji.Delete||n.key===Ji.Backspace?a=this.handleDelete():n.key===Ji.F2?a=this.handleF2():n.key===Ji.Space&&(a=this.handleSpace(n)),a&&(n.stopPropagation(),n.preventDefault())},o.prototype.handleF2=function(){var n=this.selectionService.selectedCell;return!(!n||this.cellEditing.isEditingCell(n)||this.cellEditing.isReadOnly||(this.cellEditing.tryEditCell(n),0))},o.prototype.handleAlphaNumeric=function(n){var t=this.selectionService.selectedCell;if(t&&!this.cellEditing.isEditingCell(t)&&!this.cellEditing.isReadOnly){var i=this.dataSource.columns[t.column];return this.cellEditing.tryEditCell(t,Ga(n,i?.type)),!0}return!1},o.prototype.handleColumnResize=function(n){var t,i,a=null===(t=this.selectionService.focusedCell)||void 0===t?void 0:t.column;if(void 0!==a&&-1!==a){var l=null!==(i=this.dataSource.columns[a].width)&&void 0!==i?i:50,u=this.dataSource.columns;switch(n){case Qi.ArrowLeft:u[a].width=Math.max(l-1,45),this.dataSource.setColumns(u);break;case Qi.ArrowRight:u[a].width=l+1,this.dataSource.setColumns(u)}}return!0},o.prototype.handleArrowKey=function(n,t,i){var a={row:-1,column:-1};if(this.selectionService.focusedCell)a={row:this.selectionService.focusedCell.row,column:this.selectionService.focusedCell.column};else{var l=this.selectionService.selection;l?.end&&t?a=(0,S.pi)({},l.end):l?.start&&(a=(0,S.pi)({},l.start))}switch(n){case Qi.ArrowUp:if(this.cellEditing.isEditing())return!1;a.row--;break;case Qi.ArrowDown:a.row++,this.cellEditing.isReadOnly||this.dataSource.ensureRows(a.row+1);break;case Qi.ArrowLeft:if(this.cellEditing.isEditing())return!1;a.column--;break;case Qi.ArrowRight:if(this.cellEditing.isEditing())return!1;a.column++}return t&&this.selectionService.setSelectionEnd(a),this.selectionService.setFocus(a,i),!0},o.prototype.handleTab=function(){return this.selectionService.clearFocus(),!1},o.prototype.handleEnter=function(n){var t,i,a=this.selectionService.focusedCell;if(a)return this.selectionService.selectCell(a),null===(t=n.target)||void 0===t||t.blur(),null===(i=n.currentTarget)||void 0===i||i.focus(),!0;var l=this.selectionService.selectedCell;if(l){if(this.cellEditing.isEditingCell(l)){var c={row:l.row+1,column:l.column};return this.dataSource.ensureRows(c.row+1),this.selectionService.selectCell(c),!0}if(!this.cellEditing.isReadOnly)return this.cellEditing.tryEditCell(l),!0}return!1},o.prototype.handleSpace=function(n){var t,i,a=this.selectionService.focusedCell;if(a)return this.selectionService.selectCell(a),null===(t=n.target)||void 0===t||t.blur(),null===(i=n.currentTarget)||void 0===i||i.focus(),!0;var l=this.selectionService.selectedCell;if(l){if(this.cellEditing.isEditingCell(l))return!1;if(!this.cellEditing.isReadOnly)return this.cellEditing.tryEditCell(l),!0}return!1},o.prototype.handleEscape=function(){return this.cellEditing.cancelEditing(),!0},o.prototype.handleDelete=function(){var n=this.selectionService.normalizedSelection;return!(!n||this.cellEditing.isEditing()||this.cellEditing.isReadOnly||(-1===n.start.column&&-1!==n.start.row?(this.dataSource.deleteRows(n.start.row,n.end.row-n.start.row+1),this.selectionService.selectCell({row:n.start.row,column:-1})):this.dataSource.emptyRange(n),0))},o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275inject(ir),e.\u0275\u0275inject(or),e.\u0275\u0275inject($i),e.\u0275\u0275inject(Va))},o.\u0275prov=e.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac}),o}(),Rl=T(74848),Al=function(){function o(n,t,i){this.cellEditing=n,this.selectionService=t,this.dataSource=i}return o.prototype.doubleClick=function(n,t){this.cellEditing.isEditingCell(t)||this.cellEditing.isReadOnly||(this.cellEditing.tryEditCell(t),n.preventDefault(),n.stopPropagation())},o.prototype.mouseDown=function(n,t,i){if(this._supportRightClickMenu&&n.button===Rl.tc.Secondary)return n.preventDefault(),void n.stopPropagation();this.cellEditing.isEditingCell(t)||(n.preventDefault(),n.stopPropagation(),$(n.currentTarget).trigger("focus"),n.shiftKey&&i?this.selectionService.setSelectionEnd(t):this.selectionService.selectCell(t),this.isSelecting=!0)},o.prototype.mouseOver=function(n,t,i){this.isSelecting&&i&&(n.preventDefault(),n.stopPropagation(),this.selectionService.setSelectionEnd(t))},o.prototype.mouseLeave=function(n){this.isSelecting&&(this.isSelecting=!1,n.preventDefault(),n.stopPropagation())},o.prototype.mouseUpInCell=function(n,t){var i,a;if(this.showRightClickMenu=!1,t&&!this.cellEditing.isEditingCell(t)&&this._supportRightClickMenu&&n.button===Rl.tc.Secondary){var l=null===(i=this.selectionService.normalizedSelection)||void 0===i?void 0:i.start,c=null===(a=this.selectionService.normalizedSelection)||void 0===a?void 0:a.end;if(!l||!c)return;return this.isInEffectiveRange(t,l,c)&&(this.showRightClickMenu=!0),n.preventDefault(),void n.stopPropagation()}},Object.defineProperty(o.prototype,"supportRightClickMenu",{set:function(t){this._supportRightClickMenu=t},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"showRightClickMenu",{get:function(){return this._showRightClickMenu},set:function(t){this._showRightClickMenu=t},enumerable:!1,configurable:!0}),o.prototype.isInEffectiveRange=function(n,t,i){var a,u=(a=Fa({start:t||{row:0,column:0},end:i||{row:0,column:0}},this.dataSource.rows.length,this.dataSource.columns.length)).start,p=a.end;return n.row>=u.row&&n.row<=p.row&&n.column>=u.column&&n.column<=p.column},o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275inject(ir),e.\u0275\u0275inject(or),e.\u0275\u0275inject($i))},o.\u0275prov=e.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac}),o}(),ks=new e.InjectionToken("ResizeService"),Ds=function(){function o(){}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["tri-cell"]],inputs:{data:"data"},decls:1,vars:1,template:function(t,i){1&t&&e.\u0275\u0275text(0),2&t&&e.\u0275\u0275textInterpolate(i.data)},styles:["[_nghost-%COMP%]{cursor:default;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}"],changeDetection:0}),o}(),Is=["editor"],Fs=function(){function o(){this.onDestroy$=new qn.t(1)}return o.prototype.ngOnInit=function(){var t,n=this;null===(t=this.focusEditor$)||void 0===t||t.pipe((0,be.R)(this.onDestroy$)).subscribe(function(){n.focusEditor()})},o.prototype.ngOnDestroy=function(){this.onDestroy$.next(),this.onDestroy$.complete()},o.prototype.ngOnChanges=function(n){if(n.data&&"Date"===this.column.type){var t=new Date(this.data);_.isFinite(t.getTime())&&(this.data=t.toISOString().slice(0,10))}if(n.column)switch(this.column.type){case"Date":this.type="date";break;case"Number":this.type="number";break;default:this.type="text"}},o.prototype.ngAfterViewInit=function(){this.focusEditor()},o.prototype.onDataChange=function(n){var t=Ga(n,this.column.type);_.isNil(t)||this.dataChange(t)},o.prototype.focusEditor=function(){var n;null===(n=this.editor.nativeElement)||void 0===n||n.focus()},o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["tri-cell-editor"]],viewQuery:function(t,i){var a;(1&t&&e.\u0275\u0275viewQuery(Is,5),2&t)&&(e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(i.editor=a.first))},inputs:{column:"column",data:"data",focusEditor$:"focusEditor$",dataChange:"dataChange"},features:[e.\u0275\u0275NgOnChangesFeature],decls:2,vars:3,consts:[["autofocus","",3,"type","ngModel","ngModelChange"],["editor",""]],template:function(t,i){1&t&&(e.\u0275\u0275elementStart(0,"input",0,1),e.\u0275\u0275listener("ngModelChange",function(l){return i.onDataChange(l)}),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("type",i.type)("ngModel",i.data),e.\u0275\u0275attribute("aria-label",i.data))},dependencies:[se.Fj,se.JJ,se.On],styles:["input[_ngcontent-%COMP%]{border:0;width:100%;background:transparent;padding:0;display:inline-flex;align-items:center}input[_ngcontent-%COMP%]:focus, input[_ngcontent-%COMP%]:hover, input[_ngcontent-%COMP%]:active, input[_ngcontent-%COMP%]:active:hover, input[_ngcontent-%COMP%]:focus:hover{outline:none}[_ngcontent-%COMP%]::-webkit-outer-spin-button, [_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{-webkit-appearance:textfield;appearance:textfield;-moz-appearance:textfield}"],changeDetection:0}),o}(),Gs=function(){function o(){this.columnResized=new e.EventEmitter}return o.prototype.onMouseDown=function(n){var t,i,a;return this.isResizing=!0,this.pageX=n.pageX,this.initialWidth=null!==(a=null===(i=null===(t=n.target)||void 0===t?void 0:t.parentElement)||void 0===i?void 0:i.offsetWidth)&&void 0!==a?a:0,document.body.style.cursor="col-resize",n.stopPropagation(),!1},o.prototype.onDragStart=function(){return!1},o.prototype.onMouseMove=function(n){return!this.isResizing||(this.columnResized.emit(Math.max(0,this.initialWidth+n.pageX-this.pageX)),n.stopPropagation(),!1)},o.prototype.onMouseLeave=function(n){return!this.isResizing||(this.isResizing=!1,document.body.style.cursor="",n.stopPropagation(),!1)},o.\u0275fac=function(t){return new(t||o)},o.\u0275dir=e.\u0275\u0275defineDirective({type:o,selectors:[["","triResizeColumn",""]],hostBindings:function(t,i){1&t&&e.\u0275\u0275listener("mousedown",function(l){return i.onMouseDown(l)})("touchstart",function(l){return i.onMouseDown(l)})("dragstart",function(){return i.onDragStart()})("mousemove",function(l){return i.onMouseMove(l)},!1,e.\u0275\u0275resolveWindow)("touchmove",function(l){return i.onMouseMove(l)},!1,e.\u0275\u0275resolveWindow)("mouseup",function(l){return i.onMouseLeave(l)},!1,e.\u0275\u0275resolveWindow)("mouseleave",function(l){return i.onMouseLeave(l)},!1,e.\u0275\u0275resolveWindow)("touchend",function(l){return i.onMouseLeave(l)},!1,e.\u0275\u0275resolveWindow)},outputs:{columnResized:"columnResized"}}),o}(),Vs=function(){function o(){}return o.prototype.transform=function(n,t,i){return!!n&&(-1===n.start.row||t>=n.start.row&&t<=n.end.row)&&(-1===n.start.column||i>=n.start.column&&i<=n.end.column)},o.\u0275fac=function(t){return new(t||o)},o.\u0275pipe=e.\u0275\u0275definePipe({name:"isSelected",type:o,pure:!0}),o}(),Rs=["headers"],As=["table"],Ls=["viewport"],r=["cellEditor"];function d(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",11),e.\u0275\u0275listener("focus",function(l){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(c.focusCell(l,{row:-1,column:-1}))}),e.\u0275\u0275element(1,"tri-svg-icon",12),e.\u0275\u0275elementEnd()}if(2&o){var i=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("tabindex",i.focusedCell?-1:0),e.\u0275\u0275attribute("data-row",-1)("data-column",-1),e.\u0275\u0275advance(1),e.\u0275\u0275property("name","table_20_regular")}}var h=function(n){return{headerName:n}};function f(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",13),e.\u0275\u0275listener("focus",function(p){var P=e.\u0275\u0275restoreView(t).index,x=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(x.focusCell(p,{row:-1,column:P}))}),e.\u0275\u0275pipe(1,"isSelected"),e.\u0275\u0275elementContainer(2,14),e.\u0275\u0275elementStart(3,"span",15),e.\u0275\u0275listener("columnResized",function(p){var P=e.\u0275\u0275restoreView(t).index,x=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(x.onColumnResized(p,P))}),e.\u0275\u0275elementEnd()()}if(2&o){var i=n.$implicit,a=n.index,l=e.\u0275\u0275nextContext(2),c=e.\u0275\u0275reference(9);e.\u0275\u0275styleProp("width",l.columnWidths[a]),e.\u0275\u0275classProp("selection-start",e.\u0275\u0275pipeBind3(1,9,l.selection,-1,a)),e.\u0275\u0275property("tabindex",l.focusedCell||l.rowHeaders||0!==a?-1:0),e.\u0275\u0275attribute("data-row",-1)("data-column",a),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngTemplateOutlet",i.headerTemplate||c)("ngTemplateOutletContext",e.\u0275\u0275pureFunction1(13,h,i.name))}}function O(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",23),e.\u0275\u0275listener("focus",function(c){e.\u0275\u0275restoreView(t);var u=e.\u0275\u0275nextContext().index,p=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(p.focusCell(c,{row:u,column:-1}))}),e.\u0275\u0275pipe(1,"isSelected"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()}if(2&o){var i=e.\u0275\u0275nextContext().index,a=e.\u0275\u0275nextContext(3);e.\u0275\u0275classProp("selection-start",e.\u0275\u0275pipeBind3(1,5,a.selection,i,-1)),e.\u0275\u0275attribute("data-row",i)("data-column",-1),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",i+a.rowIndexDisplayOffset," ")}}var A=function(n,t,i,a){return{column:n,data:t,dataChange:i,focusEditor$:a}};function ne(o,n){if(1&o&&e.\u0275\u0275elementContainer(0,14,27),2&o){var t=e.\u0275\u0275nextContext().$implicit,i=e.\u0275\u0275nextContext(4),a=e.\u0275\u0275reference(5);e.\u0275\u0275property("ngTemplateOutlet",t.editTemplate||a)("ngTemplateOutletContext",e.\u0275\u0275pureFunction4(2,A,t,i.editingCell.data,i.onEditCellDataChange.bind(i),i.focusEditor$))}}var He=function(n,t){return{column:n,data:t}};function Ve(o,n){if(1&o&&e.\u0275\u0275elementContainer(0,14),2&o){var t=e.\u0275\u0275nextContext(),i=t.$implicit,a=t.index,l=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275nextContext(3);var c=e.\u0275\u0275reference(7);e.\u0275\u0275property("ngTemplateOutlet",i.template||c)("ngTemplateOutletContext",e.\u0275\u0275pureFunction2(2,He,i,l[a]))}}function Ge(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",24),e.\u0275\u0275listener("focus",function(y){var x=e.\u0275\u0275restoreView(t).index,N=e.\u0275\u0275nextContext().index,W=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(W.focusCell(y,{row:N,column:x}))}),e.\u0275\u0275pipe(1,"isSelected"),e.\u0275\u0275template(2,ne,2,7,"ng-container",25),e.\u0275\u0275template(3,Ve,1,5,"ng-template",null,26,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()}if(2&o){var i=n.index,a=e.\u0275\u0275reference(4),l=e.\u0275\u0275nextContext().index;e.\u0275\u0275nextContext();var c=e.\u0275\u0275reference(1),u=e.\u0275\u0275nextContext(2);e.\u0275\u0275styleProp("width",u.columnWidths[i]),e.\u0275\u0275classProp("selected-top",l===(null==u.selection||null==u.selection.start?null:u.selection.start.row)||0===l&&-1===(null==u.selection||null==u.selection.start?null:u.selection.start.row))("selected-bottom",l===(null==u.selection||null==u.selection.end?null:u.selection.end.row)&&-1!==(null==u.selection||null==u.selection.start?null:u.selection.start.row)||l===u.dataSource.rows.length-1&&-1===(null==u.selection||null==u.selection.end?null:u.selection.end.row))("selected-left",i===(null==u.selection||null==u.selection.start?null:u.selection.start.column)||0===i&&-1===(null==u.selection||null==u.selection.start?null:u.selection.start.column))("selected-right",i===(null==u.selection||null==u.selection.end?null:u.selection.end.column)&&-1!==(null==u.selection||null==u.selection.start?null:u.selection.start.column)||i===u.dataSource.columns.length-1&&-1===(null==u.selection||null==u.selection.start?null:u.selection.start.column))("selected",e.\u0275\u0275pipeBind3(1,19,u.selection,l,i))("selection-start",u.selectedCell&&u.selectedCell.row===l&&u.selectedCell.column===i),e.\u0275\u0275attribute("data-row",l)("data-column",i)("aria-colindex",(c.getRenderedRange().start||0)+i+1),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",u.editingCell&&u.editingCell.row===l&&u.editingCell.column===i)("ngIfElse",a)}}function We(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",20),e.\u0275\u0275template(1,O,3,9,"div",21),e.\u0275\u0275template(2,Ge,5,23,"div",22),e.\u0275\u0275elementEnd()),2&o){var t=n.index,i=e.\u0275\u0275nextContext(2).$implicit,a=e.\u0275\u0275nextContext();e.\u0275\u0275attribute("aria-rowindex",t+1),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",a.rowHeaders),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",i)("ngForTrackBy",a.trackByColumn)}}function vt(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",31),e.\u0275\u0275listener("mousedown",function(){e.\u0275\u0275restoreView(t);var a=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(a.appendRow(-1))})("focus",function(a){e.\u0275\u0275restoreView(t);var l=e.\u0275\u0275nextContext(2).$implicit,c=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(c.focusCell(a,{row:l.length,column:-1}))}),e.\u0275\u0275text(1,"+"),e.\u0275\u0275elementEnd()}}function Jt(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",32),e.\u0275\u0275listener("mousedown",function(){var u=e.\u0275\u0275restoreView(t).index,p=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(p.appendRow(u))})("focus",function(c){var p=e.\u0275\u0275restoreView(t).index,y=e.\u0275\u0275nextContext(2).$implicit,P=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(P.focusCell(c,{row:y.length,column:p}))}),e.\u0275\u0275elementEnd()}if(2&o){var i=n.index,a=e.\u0275\u0275nextContext(4);e.\u0275\u0275styleProp("width",a.columnWidths[i])}}function nn(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",28),e.\u0275\u0275template(1,vt,2,0,"div",29),e.\u0275\u0275template(2,Jt,1,2,"div",30),e.\u0275\u0275elementEnd()),2&o){var t=e.\u0275\u0275nextContext(2).$implicit,i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.rowHeaders),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t)("ngForTrackBy",i.trackByColumn)}}function Sn(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cdk-virtual-scroll-viewport",16,17),e.\u0275\u0275listener("scroll",function(){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(c.scroll())}),e.\u0275\u0275template(2,We,3,4,"div",18),e.\u0275\u0275template(3,nn,3,3,"div",19),e.\u0275\u0275pipe(4,"async"),e.\u0275\u0275elementEnd()}if(2&o){var i=n.$implicit,a=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("itemSize",a.rowHeight),e.\u0275\u0275advance(2),e.\u0275\u0275property("cdkVirtualForOf",i)("cdkVirtualForTrackBy",a.trackByColumn)("cdkVirtualForTemplateCacheSize",100),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",a.showAppendRow&&!1===e.\u0275\u0275pipeBind1(4,5,a.isReadOnly$))}}function yt(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",6,7),e.\u0275\u0275template(3,d,2,4,"div",8),e.\u0275\u0275template(4,f,4,15,"div",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,Sn,5,7,"cdk-virtual-scroll-viewport",10),e.\u0275\u0275pipe(6,"async"),e.\u0275\u0275elementContainerEnd()),2&o){var t=n.$implicit,i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",i.rowHeaders),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t)("ngForTrackBy",i.trackByColumn),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(6,4,i.rows$))}}function dt(o,n){if(1&o&&e.\u0275\u0275element(0,"tri-cell-editor",33),2&o){var i=n.data,a=n.dataChange,l=n.focusEditor$;e.\u0275\u0275property("column",n.column)("data",i)("dataChange",a)("focusEditor$",l)}}function ln(o,n){1&o&&e.\u0275\u0275element(0,"tri-cell",34),2&o&&e.\u0275\u0275property("data",n.data)}function gn(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"span",35),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){var t=n.headerName;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t," ")}}var Tt=function(o){function n(t,i,a,l,c,u,p,y){var P=o.call(this)||this;return P.changeDetector=t,P.cellEditing=i,P.dataSource=a,P.selectionService=l,P.mouseEventHandler=c,P.keyboardEventHandler=u,P.clipboardService=p,P.resizeService=y,P.columnWidths=[],P.focusEditor$=new Ae.xQ,P.rowHeight=24,P.isReadOnly$=P.cellEditing.isReadOnly$,P.rowHeaders=!0,P.showAppendRow=!0,P.isReadOnly=!1,P.allowExpandSelection=!0,P.enforceSelectingColumn=!1,P.clearSelectionOnDataChange=!1,P.rowIndexDisplayOffset=0,P.supportRightClickMenu=!1,P.rowsChange=new e.EventEmitter,P.selectionChange=new e.EventEmitter,P.columnWidthChange=new e.EventEmitter,P.showRightClickMenu=new e.EventEmitter,P.columns$=P.dataSource.columns$,P.rows$=P.dataSource.rows$,P}return(0,S.ZT)(n,o),n.prototype.releaseMouse=function(t){this.mouseEventHandler.mouseLeave(t)},n.prototype.ngOnInit=function(){var t=this;this.changes$("isReadOnly").subscribe(function(i){return t.cellEditing.setReadOnly(i)}),this.changes$("columns").subscribe(function(i){t.columnWidths=_.map(i,function(a){return(_.isFinite(a.width)?a.width:50)+"px"}),t.dataSource.setColumns(i),t.clearSelectionOnDataChangeHandler()}),this.changes$("rows").subscribe(function(i){t.dataSource.setRows(i),t.clearSelectionOnDataChangeHandler()}),this.dataSource.rows$.pipe((0,be.R)(this.onDestroy$)).subscribe(function(i){t.rows!==i&&t.rowsChange.emit(i)}),this.dataSource.columns$.pipe((0,be.R)(this.onDestroy$)).subscribe(function(i){t.columnWidths=_.map(i,function(a){return(_.isFinite(a.width)?a.width:50)+"px"})}),this.cellEditing.editingCell$.pipe((0,Os.T)(1),(0,be.R)(this.onDestroy$),(0,Yn.b)(function(i){t.editingCell=i,t.changeDetector.markForCheck()}),(0,V.x)(function(i,a){return i?.row===a?.row&&i?.column===a?.column})).subscribe(function(){t.editingCell?setTimeout(function(){return t.focusEditor$.next()},0):setTimeout(function(){return t.table.nativeElement.focus()},0)}),this.selectionService.enforceSelectingColumn=this.enforceSelectingColumn,this.selectionService.selectedCell$.pipe((0,be.R)(this.onDestroy$),(0,Yn.b)(function(i){t.selectedCell=i,t.changeDetector.markForCheck()}),(0,Rt.h)(function(i){return!!i}),(0,V.x)(function(i,a){return i.row===a.row&&i.column===a.column})).subscribe(function(i){var a,l,c;t.cellEditing.isEditing()&&!t.cellEditing.isEditingCell(i)&&t.cellEditing.commitPendingEdit();var u=(null===(a=t.viewport.nativeElement)||void 0===a?void 0:a.scrollTop)/t.rowHeight,p=u+(null===(l=t.viewport.nativeElement)||void 0===l?void 0:l.offsetHeight)/t.rowHeight;i.row>=0&&(i.row<u||i.row>=p)&&(null===(c=t.viewportComponent)||void 0===c||c.scrollToIndex(i.row))}),this.selectionService.normalizedSelection$.pipe((0,be.R)(this.onDestroy$)).subscribe(function(i){t.selection=i,t.selectionChange.emit(i),t.changeDetector.markForCheck()}),this.resizeService&&this.resizeService.resize$.pipe((0,be.R)(this.onDestroy$)).subscribe(function(){t.viewportComponent.checkViewportSize()}),this.mouseEventHandler.supportRightClickMenu=this.supportRightClickMenu},n.prototype.ngAfterViewInit=function(){var t=this;this.table.nativeElement.style.setProperty("--row-height",this.rowHeight+"px"),this.keyboardEventHandler.parentElement=this.table.nativeElement,setTimeout(function(){t.changes$("nextSelectionInput").subscribe(function(i){t.scrollToSelectedColumn(i),t.selectionService.setSelection(i)})},0),this.selectionService.virtualScroll=this.viewportComponent},n.prototype.scrollToSelectedColumn=function(t){var i=this;if(t){var a=0;if(this.nextSelectionInputChangedFromSelection(t)&&this.columns&&this.columnWidths)for(var l=0;l<this.columns.length&&l<=t.start.column-1;l++)a+=this.substractWidh(this.columnWidths[l]);setTimeout(function(){var c,u;(null===(c=i.viewport)||void 0===c?void 0:c.nativeElement.clientWidth)<a&&(null===(u=i.viewport)||void 0===u||u.nativeElement.scroll(a,0))},300)}},n.prototype.nextSelectionInputChangedFromSelection=function(t){var i,a,l,c,u,p,y,P;return t.end.column!==(null===(a=null===(i=this.selection)||void 0===i?void 0:i.end)||void 0===a?void 0:a.column)||t.end.row!==(null===(c=null===(l=this.selection)||void 0===l?void 0:l.end)||void 0===c?void 0:c.row)||t.start.row!==(null===(p=null===(u=this.selection)||void 0===u?void 0:u.start)||void 0===p?void 0:p.row)||t.start.column!==(null===(P=null===(y=this.selection)||void 0===y?void 0:y.start)||void 0===P?void 0:P.column)},n.prototype.substractWidh=function(t){var i,a=null===(i=t?.match(/\d+(\.\d+)?/g))||void 0===i?void 0:i.map(Number);return a?a[0]:0},n.prototype.flushPendingChanges=function(){var t;return this.cellEditing.commitPendingEdit(),this.rows$.pipe((0,ue.q)(1)).subscribe(function(i){return t=i}),t},n.prototype.trackByColumn=function(t){return t},n.prototype.scroll=function(){this.headers.nativeElement.style.transform="translateX(".concat(-this.viewport.nativeElement.scrollLeft,"px)")},n.prototype.onColumnResized=function(t,i){this.columnWidths[i]=t+"px",this.columnWidthChange.emit({width:t,column:i})},n.prototype.onCellMouseDown=function(t){var i=this.getCell();i&&this.mouseEventHandler.mouseDown(t,i,this.allowExpandSelection)},n.prototype.onCellMouseUp=function(t){var i=this.getCell();this.mouseEventHandler.mouseUpInCell(t,i),this.mouseEventHandler.showRightClickMenu&&this.showRightClickMenu.emit({pageX:t.pageX,pageY:t.pageY})},n.prototype.onCellMouseOver=function(t){var i=this.getCell();i&&this.mouseEventHandler.mouseOver(t,i,this.allowExpandSelection)},n.prototype.onCellDoubleClick=function(t){var i=this.getCell();i&&this.mouseEventHandler.doubleClick(t,i)},n.prototype.onEditCellDataChange=function(t){this.cellEditing.setEditingData(t)},n.prototype.focusCell=function(t,i){this.selectionService.setFocus(i,this.table.nativeElement),this.scrollViewportHorizontally(t.target)},Object.defineProperty(n.prototype,"focusedCell",{get:function(){return this.selectionService.focusedCell},enumerable:!1,configurable:!0}),n.prototype.scrollViewportHorizontally=function(t){var i=this.viewport.nativeElement,a=t.offsetLeft;(i.scrollLeft+i.clientWidth<a||i.scrollLeft>a)&&(i.scrollLeft=a-(i.clientWidth-t.clientWidth)/2,this.viewport.nativeElement.scrollIntoView())},n.prototype.handleKeydown=function(t){this.keyboardEventHandler.keydown(t,this.table.nativeElement,this.allowExpandSelection)},n.prototype.getCell=function(){var t=$("[data-clickable]:hover").get(0);if(t){var i=t.getAttribute("data-row"),a=t.getAttribute("data-column");if(i&&a){var l=parseInt(i,10),c=parseInt(a,10);if(_.isFinite(l)&&_.isFinite(c))return{row:l,column:c}}}},n.prototype.appendRow=function(t){this.dataSource.appendRow(),this.selectionService.selectCell({row:this.dataSource.rows.length,column:t})},n.prototype.clearSelectionOnDataChangeHandler=function(){this.clearSelectionOnDataChange&&this.selectionService.setSelection(void 0)},n.\u0275fac=function(i){return new(i||n)(e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(ir),e.\u0275\u0275directiveInject($i),e.\u0275\u0275directiveInject(or),e.\u0275\u0275directiveInject(Al),e.\u0275\u0275directiveInject(Vl),e.\u0275\u0275directiveInject(Va),e.\u0275\u0275directiveInject(ks,8))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["tri-grid"]],viewQuery:function(i,a){if(1&i&&(e.\u0275\u0275viewQuery(Rs,5),e.\u0275\u0275viewQuery(As,5),e.\u0275\u0275viewQuery(Ls,5,e.ElementRef),e.\u0275\u0275viewQuery(Yt.N7,5),e.\u0275\u0275viewQuery(r,5)),2&i){var l=void 0;e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(a.headers=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(a.table=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(a.viewport=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(a.viewportComponent=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(a.cellEditor=l.first)}},hostBindings:function(i,a){1&i&&e.\u0275\u0275listener("mouseup",function(c){return a.releaseMouse(c)},!1,e.\u0275\u0275resolveWindow)("mouseleave",function(c){return a.releaseMouse(c)},!1,e.\u0275\u0275resolveWindow)},inputs:{columns:"columns",rows:"rows",rowHeaders:"rowHeaders",showAppendRow:"showAppendRow",isReadOnly:"isReadOnly",allowExpandSelection:"allowExpandSelection",enforceSelectingColumn:"enforceSelectingColumn",nextSelectionInput:"nextSelectionInput",clearSelectionOnDataChange:"clearSelectionOnDataChange",rowIndexDisplayOffset:"rowIndexDisplayOffset",supportRightClickMenu:"supportRightClickMenu"},outputs:{rowsChange:"rowsChange",selectionChange:"selectionChange",columnWidthChange:"columnWidthChange",showRightClickMenu:"showRightClickMenu"},features:[e.\u0275\u0275ProvidersFeature([or,ir,$i,Al,Vl,Va]),e.\u0275\u0275InheritDefinitionFeature],decls:10,vars:3,consts:[["tabindex","-1","role","table",1,"table",3,"keydown","mousedown","mouseover","mouseup","dblclick"],["table",""],[4,"ngIf"],["defaultCellEditor",""],["defaultViewCell",""],["defaultHeaderCell",""],["role","row",1,"headers"],["headers",""],["class","header selectable table-icon","role","columnheader","data-clickable","true",3,"tabindex","focus",4,"ngIf"],["class","header selectable","data-clickable","true","role","columnheader",3,"selection-start","tabindex","width","focus",4,"ngFor","ngForOf","ngForTrackBy"],[3,"itemSize","scroll",4,"ngIf"],["role","columnheader","data-clickable","true",1,"header","selectable","table-icon",3,"tabindex","focus"],["tri-svg-icon-20","",1,"table-svg-icon",3,"name"],["data-clickable","true","role","columnheader",1,"header","selectable",3,"tabindex","focus"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["triResizeColumn","",1,"resize-handle",3,"columnResized"],[3,"itemSize","scroll"],["viewport",""],["class","row","role","row",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy","cdkVirtualForTemplateCacheSize"],["class","row","role","row","tabindex","0",4,"ngIf"],["role","row",1,"row"],["class","cell row-header selectable","role","gridcell","tabindex","-1","data-clickable","true",3,"selection-start","focus",4,"ngIf"],["class","cell selectable","role","gridcell","tabindex","-1","data-clickable","true",3,"selected-top","selected-bottom","selected-left","selected-right","selected","selection-start","width","focus",4,"ngFor","ngForOf","ngForTrackBy"],["role","gridcell","tabindex","-1","data-clickable","true",1,"cell","row-header","selectable",3,"focus"],["role","gridcell","tabindex","-1","data-clickable","true",1,"cell","selectable",3,"focus"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf","ngIfElse"],["viewCell",""],["cellEditor",""],["role","row","tabindex","0",1,"row"],["class","cell row-header","role","gridcell","tabindex","-1",3,"mousedown","focus",4,"ngIf"],["tabindex","-1","class","cell","role","gridcell",3,"width","mousedown","focus",4,"ngFor","ngForOf","ngForTrackBy"],["role","gridcell","tabindex","-1",1,"cell","row-header",3,"mousedown","focus"],["tabindex","-1","role","gridcell",1,"cell",3,"mousedown","focus"],[3,"column","data","dataChange","focusEditor$"],[3,"data"],[1,"default-header-name"]],template:function(i,a){1&i&&(e.\u0275\u0275elementStart(0,"div",0,1),e.\u0275\u0275listener("keydown",function(c){return a.handleKeydown(c)})("mousedown",function(c){return a.onCellMouseDown(c)})("mouseover",function(c){return a.onCellMouseOver(c)})("mouseup",function(c){return a.onCellMouseUp(c)})("dblclick",function(c){return a.onCellDoubleClick(c)}),e.\u0275\u0275template(2,yt,7,6,"ng-container",2),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,dt,1,4,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(6,ln,1,1,"ng-template",null,4,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(8,gn,2,1,"ng-template",null,5,e.\u0275\u0275templateRefExtractor)),2&i&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(3,1,a.columns$)))},dependencies:[U.NgForOf,U.NgIf,U.NgTemplateOutlet,Yt.xd,Yt.x0,Yt.N7,ii.M,Ds,Fs,Gs,U.AsyncPipe,Vs],styles:['[_nghost-%COMP%]{height:100%;width:100%;display:flex;background:var(--colorNeutralBackground1);color:var(--colorNeutralForeground1);--row-height: $default-row-height}[_nghost-%COMP%]   *[_ngcontent-%COMP%]{box-sizing:border-box}[_nghost-%COMP%]   *[_ngcontent-%COMP%]:focus{outline:none}cdk-virtual-scroll-viewport[_ngcontent-%COMP%]{overflow-x:auto;height:calc(100% - var(--row-height));position:absolute;top:var(--row-height);bottom:0;width:100%;scrollbar-width:thin}[_ngcontent-%COMP%]::-webkit-scrollbar{width:5px;height:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border:1px solid var(--fluentThemeNeutralSecondaryAltColor, #767676);border-radius:20px;background-color:var(--fluentThemeNeutralSecondaryAltColor, #767676)}.table[_ngcontent-%COMP%]{height:100%;display:flex;position:relative;max-width:100%;overflow-x:hidden;width:max-content;padding-right:5px}.table[_ngcontent-%COMP%]   .headers[_ngcontent-%COMP%]{text-align:start;display:flex;flex-wrap:nowrap;height:var(--row-height);width:100%;border-left:1px solid var(--colorNeutralStroke2)}.table[_ngcontent-%COMP%]   .headers[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:inline-flex;position:relative;min-width:45px;height:var(--row-height);line-height:12px;margin:0;padding:3px 6px;background:var(--colorNeutralBackground2);flex-shrink:0;flex-grow:0;overflow:hidden;border-top:solid 1px var(--colorNeutralStroke2);border-bottom:solid 1px var(--colorNeutralStroke2);border-right:solid 1px var(--colorNeutralStroke2);font-family:var(--fluent-font-family, "Segoe UI");font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-regular, 400)}.table[_ngcontent-%COMP%]   .headers[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .default-header-name[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.table[_ngcontent-%COMP%]   .headers[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .resize-handle[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;opacity:0;width:10px;cursor:col-resize}.table[_ngcontent-%COMP%]   .headers[_ngcontent-%COMP%]   .header.selection-start[_ngcontent-%COMP%]{background:var(--colorNeutralBackground2Selected);border-bottom:2px solid var(--colorNeutralStrokeAccessibleSelected);color:var(--colorNeutralForeground1Selected);font-family:var(--fluent-font-family, "Segoe UI");font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-semi-bold, 600)}@media (forced-colors: active){.table[_ngcontent-%COMP%]   .headers[_ngcontent-%COMP%]   .header.selection-start[_ngcontent-%COMP%]{border-bottom:2px solid var(--globalColorhcHighlight)!important}}.table[_ngcontent-%COMP%]   .headers[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]:focus{border:2px solid var(--colorNeutralStrokeFocus2);border-radius:4px;padding:2px 4px}.table[_ngcontent-%COMP%]   .headers[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]:hover{background:var(--colorNeutralBackground2Hover);color:var(--colorNeutralForeground1Hover)}.table[_ngcontent-%COMP%]   .headers[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]:active{background:var(--colorNeutralBackground2Pressed);color:var(--colorNeutralForeground1Pressed)}.table[_ngcontent-%COMP%]   .headers[_ngcontent-%COMP%]   .header.table-icon[_ngcontent-%COMP%]{justify-content:center;align-items:center}.table[_ngcontent-%COMP%]   .headers[_ngcontent-%COMP%]   .header.table-icon[_ngcontent-%COMP%]:focus{padding:2px 5px 2px 4px}.table[_ngcontent-%COMP%]   .headers[_ngcontent-%COMP%]   .header.table-icon[_ngcontent-%COMP%]   .table-svg-icon[_ngcontent-%COMP%]{fill:var(--colorNeutralForeground2)}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;border-left:solid 1px var(--colorNeutralStroke2)}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .selectable[_ngcontent-%COMP%]:not(.selection-start):focus{border:2px solid var(--colorNeutralStrokeFocus2);border-radius:4px;padding:1.5px 4px}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]{cursor:default;position:relative;display:inline-flex;flex-grow:0;min-width:45px;height:var(--row-height);padding:3.5px 6px;align-items:center;overflow:hidden;border-bottom:solid 1px var(--colorNeutralStroke2);border-right:solid 1px var(--colorNeutralStroke2);background:var(--colorSubtleBackground);outline:none;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;font-family:var(--fluent-font-family, "Segoe UI");font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-regular, 400)}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.number-cell[_ngcontent-%COMP%]{text-align:right}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.row-header[_ngcontent-%COMP%]{background:var(--colorNeutralBackground2);justify-content:center;padding:3px 0 0}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.row-header.selection-start[_ngcontent-%COMP%]{background:var(--colorNeutralBackground2Selected);border-right:2px solid var(--colorNeutralStrokeAccessibleSelected);color:var(--colorNeutralForeground1Selected);font-family:var(--fluent-font-family, "Segoe UI");font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-semi-bold, 600)}@media (forced-colors: active){.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.row-header.selection-start[_ngcontent-%COMP%]{border-right:2px solid var(--globalColorhcHighlight)!important}}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.row-header[_ngcontent-%COMP%]:hover{background:var(--colorNeutralBackground2Hover);color:var(--colorNeutralForeground1Hover)}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.row-header[_ngcontent-%COMP%]:active{background:var(--colorNeutralBackground2Pressed);color:var(--colorNeutralForeground1Pressed)}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.row-header[_ngcontent-%COMP%]:focus{padding:1px 1px 0 0}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.selected[_ngcontent-%COMP%]{background:var(--colorSubtleBackgroundSelected)}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.selected.selected-top[_ngcontent-%COMP%]:not(.selected-bottom){padding-bottom:5px}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.selected.selected-bottom[_ngcontent-%COMP%]:not(.selected-top){padding-top:5px}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.selected.selected-top[_ngcontent-%COMP%]{border-top:2px solid var(--colorNeutralStrokeAccessibleSelected);padding-top:4px}@media (forced-colors: active){.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.selected.selected-top[_ngcontent-%COMP%]{border-top:2px solid var(--globalColorhcHighlight)!important}}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.selected.selected-top[_ngcontent-%COMP%]:before{border-top:1px solid var(--colorNeutralStrokeFocus1);top:0}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.selected.selected-bottom[_ngcontent-%COMP%]{border-bottom:2px solid var(--colorNeutralStrokeAccessibleSelected);padding-bottom:4px}@media (forced-colors: active){.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.selected.selected-bottom[_ngcontent-%COMP%]{border-bottom:2px solid var(--globalColorhcHighlight)!important}}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.selected.selected-bottom[_ngcontent-%COMP%]:before{border-bottom:1px solid var(--colorNeutralStrokeFocus1);bottom:0}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.selected.selected-left[_ngcontent-%COMP%]{border-left:2px solid var(--colorNeutralStrokeAccessibleSelected);padding-left:4px}@media (forced-colors: active){.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.selected.selected-left[_ngcontent-%COMP%]{border-left:2px solid var(--globalColorhcHighlight)!important}}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.selected.selected-left[_ngcontent-%COMP%]:before{border-left:1px solid var(--colorNeutralStrokeFocus1);left:0}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.selected.selected-right[_ngcontent-%COMP%]{border-right:2px solid var(--colorNeutralStrokeAccessibleSelected);padding-right:4px}@media (forced-colors: active){.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.selected.selected-right[_ngcontent-%COMP%]{border-right:2px solid var(--globalColorhcHighlight)!important}}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.selected.selected-right[_ngcontent-%COMP%]:before{border-right:1px solid var(--colorNeutralStrokeFocus1);right:0}'],changeDetection:0}),n}(Ts.w),bn=T(17177),hn=function(){function o(){}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=e.\u0275\u0275defineInjector({imports:[U.CommonModule,se.u5,Gl.Y,Yt.Cl,bn.T6]}),o}(),Gt=T(98665),Jn=["formatSwitchCell"];function fn(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"formatValue"),e.\u0275\u0275elementContainerEnd()),2&o){var t=e.\u0275\u0275nextContext(),i=t.data,a=t.column;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(2,1,i,a.formatString))}}function Mi(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"date"),e.\u0275\u0275elementContainerEnd()),2&o){var t=e.\u0275\u0275nextContext(),i=t.data,a=t.column;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind3(2,1,i,a.formatString||"shortDate","UTC"))}}function Xn(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275text(1),e.\u0275\u0275elementContainerEnd()),2&o){var t=e.\u0275\u0275nextContext().data;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t)}}function Pi(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275text(1),e.\u0275\u0275elementContainerEnd()),2&o){var t=e.\u0275\u0275nextContext().data;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t)}}function Mn(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0,1),e.\u0275\u0275template(1,fn,3,4,"ng-container",2),e.\u0275\u0275template(2,Mi,3,5,"ng-container",2),e.\u0275\u0275template(3,Xn,2,1,"ng-container",2),e.\u0275\u0275template(4,Pi,2,1,"ng-container",3),e.\u0275\u0275elementContainerEnd()),2&o){var t=n.column;e.\u0275\u0275property("ngSwitch",null==t?null:t.type),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","Number"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","Date"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","Text")}}var sn=function(){function o(){}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["format-switch-cell-template"]],viewQuery:function(t,i){var a;(1&t&&e.\u0275\u0275viewQuery(Jn,5),2&t)&&(e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(i.formatSwitchCell=a.first))},decls:2,vars:0,consts:[["formatSwitchCell",""],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"]],template:function(t,i){1&t&&e.\u0275\u0275template(0,Mn,5,4,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)},dependencies:[U.NgSwitch,U.NgSwitchCase,U.NgSwitchDefault,U.DatePipe,fi.c],changeDetection:0}),o}(),mn=T(44641),B=T(11941),D=T(39686);function L(o,n){if(1&o&&e.\u0275\u0275element(0,"message-banner",12),2&o){var t=e.\u0275\u0275nextContext();e.\u0275\u0275property("viewModel",t.messageBanner)}}function Z(o,n){1&o&&e.\u0275\u0275element(0,"mat-icon",13)}function oe(o,n){1&o&&e.\u0275\u0275element(0,"mat-icon",14)}function ee(o,n){1&o&&e.\u0275\u0275element(0,"pbi-spinner",15)}function ze(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",16)(1,"tri-grid",17,18),e.\u0275\u0275listener("rowsChange",function(l){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(c.onRowUpdate(l))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(3,"section")(4,"div",19),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"pbi-radio-group",20),e.\u0275\u0275listener("ngModelChange",function(l){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(c.showFinalTarget=l)}),e.\u0275\u0275elementStart(8,"pbi-radio-button",21),e.\u0275\u0275text(9),e.\u0275\u0275pipe(10,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"pbi-radio-button",21),e.\u0275\u0275text(12),e.\u0275\u0275pipe(13,"localize"),e.\u0275\u0275elementEnd()()()}if(2&o){var i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("rows",i.gridData)("columns",i.columnsConfig),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(6,8,"Metrics_Targets_Editor_Select_Target")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngModel",i.showFinalTarget),e.\u0275\u0275advance(1),e.\u0275\u0275property("value",!1),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(10,10,"Target_Next")),e.\u0275\u0275advance(2),e.\u0275\u0275property("value",!0),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(13,12,"Target_Final"))}}var it=function(){function o(n,t,i,a,l){this.dialogRef=n,this.localizationService=i,this.telemetryService=a,this.changeDetector=l,this.isFullScreen=!1,this.onDestroy$=new Ae.xQ,this.resultType=2,this.TargetColumnIndex=0,this.DueDateColumnIndex=1,this.telemetryService.logEvent(De),this.goal$=t.goal$,this.goalTargets$=t.goalTargets$,this.onDoneCallback=t.onDoneCallback,this.columnsConfig=[{name:this.localizationService.get("Target"),type:"Number",width:o.GridColumnWidthInPx},{name:this.localizationService.get("DueDate"),type:"Date",width:o.GridColumnWidthInPx}],this.DuplicateTargetDates={bannerType:1,iconName:o.ErrorIcon,message:this.localizationService.get("Metrics_Targets_Editor_Error_Duplicate_Target_Dates")},this.MissingTargetDate={bannerType:1,iconName:o.ErrorIcon,message:this.localizationService.get("Metrics_Targets_Editor_Error_Missing_Target_Date")},this.MissingTargetValue={bannerType:1,iconName:o.ErrorIcon,message:this.localizationService.get("Metrics_Targets_Editor_Error_Missing_Target_Value")}}return o.prototype.ngOnInit=function(){var n=this;this.goal$.pipe((0,ue.q)(1)).subscribe(function(t){var i,a;n.columnsConfig=[(0,S.pi)((0,S.pi)({},n.columnsConfig[n.TargetColumnIndex]),{formatString:t.valuesFormatString}),(0,S.pi)((0,S.pi)({},n.columnsConfig[n.DueDateColumnIndex]),{formatString:t.datesFormatString})],n.showFinalTarget=null!==(a=null===(i=t.metadata)||void 0===i?void 0:i.showFinalTarget)&&void 0!==a?a:!t.targetConnection}),this.goalTargets$.pipe((0,ue.q)(1)).subscribe(function(t){n.gridData=t.map(function(i){return[i.target,new Date(i.timestamp)]}),n.changeDetector.markForCheck()})},o.prototype.ngAfterViewInit=function(){var n=this;this.columnsConfig=_.map(this.columnsConfig,function(t){return t.template=n.formatSwitchCellTemplate.formatSwitchCell,t})},o.prototype.ngOnDestroy=function(){this.onDestroy$.next(),this.onDestroy$.complete()},o.prototype.onRowUpdate=function(n){this.gridData=n},o.prototype.toggleFullScreen=function(){this.isFullScreen?(this.dialogRef.updateSize("70%","80%"),this.isFullScreen=!1):(this.dialogRef.updateSize("100%","100%"),this.isFullScreen=!0)},o.prototype.close=function(){this.telemetryService.logEvent(E),this.dialogRef.close()},o.prototype.onDone=function(){return(0,S.mG)(this,void 0,void 0,function(){var n,t,i,a,l;return(0,S.Jh)(this,function(c){if(this.gridData=this.gridEditor.flushPendingChanges(),(n=this.gridData.filter(function(u){return!(_.isNil(u[0])&&_.isNil(u[1]))}).map(function(u){return{timestamp:_.isNil(u[1])?void 0:u[1],target:_.isNil(u[0])?void 0:u[0]}})).find(function(u){return _.isNil(u.timestamp)&&!_.isNil(u.target)}))return this.messageBanner=this.MissingTargetDate,[2];if(n.find(function(u){return!_.isNil(u.timestamp)&&_.isNil(u.target)}))return this.messageBanner=this.MissingTargetValue,[2];for(t=new Set,i=0,a=n;i<a.length;i++){if(t.has((l=a[i].timestamp).getTime()))return this.messageBanner=this.DuplicateTargetDates,[2];t.add(l.getTime())}return this.onDoneCallback(n.map(function(u){return{timestamp:u.timestamp.toISOString(),target:u.target}}),this.showFinalTarget,this.columnsConfig[this.TargetColumnIndex].formatString),this.telemetryService.logEvent(kn),this.dialogRef.close(),[2]})})},o.prototype.valueFormatStringChanged=function(n){this.columnsConfig=[(0,S.pi)((0,S.pi)({},this.columnsConfig[this.TargetColumnIndex]),{formatString:n}),this.columnsConfig[1]]},o.ErrorIcon="pbi-glyph-blocked2",o.GridColumnWidthInPx=200,o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(_o.so),e.\u0275\u0275directiveInject(_o.WI),e.\u0275\u0275directiveInject(St.o),e.\u0275\u0275directiveInject(Gt.y0),e.\u0275\u0275directiveInject(e.ChangeDetectorRef))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["goal-targets-editor"]],viewQuery:function(t,i){if(1&t&&(e.\u0275\u0275viewQuery(Tt,5),e.\u0275\u0275viewQuery(sn,5)),2&t){var a=void 0;e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(i.gridEditor=a.first),e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(i.formatSwitchCellTemplate=a.first)}},decls:27,vars:29,consts:[[3,"viewModel",4,"ngIf"],[1,"title"],["mat-icon-button","",1,"pbi-icon-button",3,"click"],["class","glyph-small","fontIcon","pbi-glyph-fullscreen",4,"ngIf"],["class","glyph-small","fontIcon","pbi-glyph-fullscreenexit",4,"ngIf"],[1,"targets-editor-value-formatting-box"],[1,"goals-value-formatting",3,"formatString","dataType","formatStringChange"],["class","pbi-spinner-large",4,"ngIf","ngIfElse"],["showGrid",""],[1,"actions"],[1,"pbi-fluent-button","primary",3,"disabled","click"],[1,"pbi-fluent-button","secondary",3,"click"],[3,"viewModel"],["fontIcon","pbi-glyph-fullscreen",1,"glyph-small"],["fontIcon","pbi-glyph-fullscreenexit",1,"glyph-small"],[1,"pbi-spinner-large"],[1,"grid-container"],[3,"rows","columns","rowsChange"],["gridEditor",""],[1,"displayed-target-title"],[1,"displayed-target-options",3,"ngModel","ngModelChange"],[3,"value"]],template:function(t,i){if(1&t&&(e.\u0275\u0275template(0,L,1,1,"message-banner",0),e.\u0275\u0275elementStart(1,"header")(2,"div",1),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"button",2),e.\u0275\u0275listener("click",function(){return i.toggleFullScreen()}),e.\u0275\u0275pipe(6,"localize"),e.\u0275\u0275template(7,Z,1,0,"mat-icon",3),e.\u0275\u0275template(8,oe,1,0,"mat-icon",4),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"section"),e.\u0275\u0275text(10),e.\u0275\u0275pipe(11,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",5)(13,"value-formatting",6),e.\u0275\u0275listener("formatStringChange",function(c){return i.valueFormatStringChanged(c)}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(14,ee,1,0,"pbi-spinner",7),e.\u0275\u0275template(15,ze,14,14,"ng-template",null,8,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275element(17,"format-switch-cell-template"),e.\u0275\u0275elementStart(18,"div",9)(19,"button",10),e.\u0275\u0275listener("click",function(){return i.onDone()}),e.\u0275\u0275pipe(20,"localize"),e.\u0275\u0275text(21),e.\u0275\u0275pipe(22,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"button",11),e.\u0275\u0275listener("click",function(){return i.close()}),e.\u0275\u0275pipe(24,"localize"),e.\u0275\u0275text(25),e.\u0275\u0275pipe(26,"localize"),e.\u0275\u0275elementEnd()()),2&t){var a=e.\u0275\u0275reference(16);e.\u0275\u0275property("ngIf",i.messageBanner),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,15,"Metrics_Targets_Editor_Title")),e.\u0275\u0275advance(2),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(6,17,"Fullscreen_Toggle")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!i.isFullScreen),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.isFullScreen),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(11,19,"Metrics_Targets_Editor_Description"),"\n"),e.\u0275\u0275advance(3),e.\u0275\u0275property("formatString",i.columnsConfig[0].formatString)("dataType",i.resultType),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!i.gridData)("ngIfElse",a),e.\u0275\u0275advance(5),e.\u0275\u0275property("disabled",!i.gridData),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(20,21,"Done_ButtonText")),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(22,23,"Done_ButtonText")," "),e.\u0275\u0275advance(2),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(24,25,"PBI_Button_Label_Cancel")),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(26,27,"PBI_Button_Label_Cancel")," ")}},dependencies:[U.NgIf,se.JJ,se.On,Ut.Hw,mn.A,B.o,D.d,so.k,ci.d,Tt,sn,xt.F],styles:['[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}[_nghost-%COMP%]     .targets-editor-value-formatting-box mat-select{height:28px;border:1px solid var(--gray-110, #8A8886);border-radius:2px}[_nghost-%COMP%]     .targets-editor-value-formatting-box mat-select .mat-select-value{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);color:var(--fluent-theme-neutral-primary-color, #323130);line-height:20px}[_nghost-%COMP%]     .targets-editor-value-formatting-box mat-select .mat-select-arrow{color:var(--gray-140, #484644);padding-right:14px}[_nghost-%COMP%]     .targets-editor-value-formatting-box num-up-down .inputRange{height:28px;border:1px solid var(--gray-110, #8A8886);border-radius:2px}[_nghost-%COMP%]     .targets-editor-value-formatting-box num-up-down .inputRange .inputUpDown{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);color:var(--fluent-theme-neutral-primary-color, #323130);line-height:20px}[_nghost-%COMP%]     .targets-editor-value-formatting-box num-up-down label{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);line-height:20px}[_nghost-%COMP%]     .targets-editor-value-formatting-box .valueFormatterToggleButtonsGroup .btn{background-color:transparent;border:none}[_nghost-%COMP%]     .targets-editor-value-formatting-box .valueFormatterToggleButtonsGroup .btn:hover{background-color:var(--fluent-theme-neutral-quarter-alt-color, #E1DFDD)}header[_ngcontent-%COMP%]{color:var(--fluent-theme-neutral-dark-color, #201F1E);display:flex;flex-direction:row;align-items:center;justify-content:space-between}header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--xlg-font-size, 20px);font-weight:var(--font-weight-semi-bold, 600)}header[_ngcontent-%COMP%], section[_ngcontent-%COMP%], tri-grid[_ngcontent-%COMP%], .targets-editor-value-formatting-box[_ngcontent-%COMP%], .displayed-target-title[_ngcontent-%COMP%]{margin-bottom:16px}.actions[_ngcontent-%COMP%]{display:flex;justify-content:end;gap:8px}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   pbi-spinner[_ngcontent-%COMP%]{margin:5px 5px 0 0}.pbi-spinner-large[_ngcontent-%COMP%]{height:100%}.displayed-target-title[_ngcontent-%COMP%]{font-size:var(--md-font-size, 14px)}.displayed-target-options[_ngcontent-%COMP%]{display:flex;gap:36px}.grid-container[_ngcontent-%COMP%]{flex-grow:1}'],changeDetection:0}),o}();function pt(o,n){if(1&o&&e.\u0275\u0275element(0,"message-banner",12),2&o){var t=e.\u0275\u0275nextContext();e.\u0275\u0275property("viewModel",t.messageBanner)}}function At(o,n){1&o&&e.\u0275\u0275element(0,"mat-icon",13)}function Ft(o,n){1&o&&e.\u0275\u0275element(0,"mat-icon",14)}function Lt(o,n){1&o&&e.\u0275\u0275element(0,"pbi-spinner",15)}function Ll(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",16)(1,"tri-grid",17,18),e.\u0275\u0275listener("rowsChange",function(l){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(c.onRowUpdate(l))}),e.\u0275\u0275elementEnd()()}if(2&o){var i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("rows",i.gridData)("columns",i.columnsConfig)}}var Ra=function(){function o(n,t,i,a,l){this.dialogRef=n,this.localizationService=i,this.telemetryService=a,this.changeDetector=l,this.isFullScreen=!1,this.onDestroy$=new Ae.xQ,this.resultType=2,this.ValueColumnIndex=0,this.DateAddedColumnIndex=1,this.telemetryService.logEvent($r),this.goal$=t.goal$,this.goalValues$=t.goalValues$,this.onDoneCallback=t.onDoneCallback,this.columnsConfig=[{name:this.localizationService.get("Visual_Tablix_Values"),type:"Number",width:o.GridColumnWidthInPx},{name:this.localizationService.get("Date"),type:"Date",width:o.GridColumnWidthInPx}],this.DuplicateCurrentValueDates={bannerType:1,iconName:o.ErrorIcon,message:this.localizationService.get("Metrics_Values_Editor_Error_Duplicate_Current_Value_Dates")},this.MissingCurrentValueDate={bannerType:1,iconName:o.ErrorIcon,message:this.localizationService.get("Metrics_Values_Editor_Error_Missing_Current_Value_Date")},this.MissingCurrentValue={bannerType:1,iconName:o.ErrorIcon,message:this.localizationService.get("Metrics_Values_Editor_Error_Missing_Current_Value")}}return o.prototype.ngOnInit=function(){var n=this;this.goal$.pipe((0,ue.q)(1)).subscribe(function(t){n.columnsConfig=[(0,S.pi)((0,S.pi)({},n.columnsConfig[n.ValueColumnIndex]),{formatString:t.valuesFormatString}),(0,S.pi)((0,S.pi)({},n.columnsConfig[n.DateAddedColumnIndex]),{formatString:t.datesFormatString})]}),this.goalValues$.pipe((0,ue.q)(1)).subscribe(function(t){n.gridData=t.map(function(i){return[i.value,new Date(i.timestamp)]}),n.changeDetector.markForCheck()})},o.prototype.ngAfterViewInit=function(){var n=this;this.columnsConfig=_.map(this.columnsConfig,function(t){return t.template=n.formatSwitchCellTemplate.formatSwitchCell,t})},o.prototype.ngOnDestroy=function(){this.onDestroy$.next(),this.onDestroy$.complete()},o.prototype.onRowUpdate=function(n){this.gridData=n},o.prototype.toggleFullScreen=function(){this.isFullScreen?(this.dialogRef.updateSize("70%","80%"),this.isFullScreen=!1):(this.dialogRef.updateSize("100%","100%"),this.isFullScreen=!0)},o.prototype.close=function(){this.telemetryService.logEvent(de),this.dialogRef.close()},o.prototype.onDone=function(){return(0,S.mG)(this,void 0,void 0,function(){var n,t,i,a,l;return(0,S.Jh)(this,function(c){if(this.gridData=this.gridEditor.flushPendingChanges(),(n=this.gridData.filter(function(u){return!(_.isNil(u[0])&&_.isNil(u[1]))}).map(function(u){return{timestamp:_.isNil(u[1])?void 0:u[1],value:_.isNil(u[0])?void 0:u[0]}})).find(function(u){return _.isNil(u.timestamp)&&!_.isNil(u.value)}))return this.messageBanner=this.MissingCurrentValueDate,[2];if(n.find(function(u){return!_.isNil(u.timestamp)&&_.isNil(u.value)}))return this.messageBanner=this.MissingCurrentValue,[2];for(t=new Set,i=0,a=n;i<a.length;i++){if(t.has((l=a[i].timestamp).getTime()))return this.messageBanner=this.DuplicateCurrentValueDates,[2];t.add(l.getTime())}return this.onDoneCallback(n.map(function(u){return{timestamp:u.timestamp.toISOString(),value:u.value}}),this.columnsConfig[this.ValueColumnIndex].formatString),this.telemetryService.logEvent(wo),this.dialogRef.close(),[2]})})},o.prototype.valueFormatStringChanged=function(n){this.columnsConfig=[(0,S.pi)((0,S.pi)({},this.columnsConfig[this.ValueColumnIndex]),{formatString:n}),this.columnsConfig[1]]},o.ErrorIcon="pbi-glyph-blocked2",o.GridColumnWidthInPx=200,o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(_o.so),e.\u0275\u0275directiveInject(_o.WI),e.\u0275\u0275directiveInject(St.o),e.\u0275\u0275directiveInject(Gt.y0),e.\u0275\u0275directiveInject(e.ChangeDetectorRef))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["goal-values-editor"]],viewQuery:function(t,i){if(1&t&&(e.\u0275\u0275viewQuery(Tt,5),e.\u0275\u0275viewQuery(sn,5)),2&t){var a=void 0;e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(i.gridEditor=a.first),e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(i.formatSwitchCellTemplate=a.first)}},decls:27,vars:29,consts:[[3,"viewModel",4,"ngIf"],[1,"title"],["mat-icon-button","",1,"pbi-icon-button",3,"click"],["class","glyph-small","fontIcon","pbi-glyph-fullscreen",4,"ngIf"],["class","glyph-small","fontIcon","pbi-glyph-fullscreenexit",4,"ngIf"],[1,"values-editor-value-formatting-box"],[1,"goals-value-formatting",3,"formatString","dataType","formatStringChange"],["class","pbi-spinner-large",4,"ngIf","ngIfElse"],["showGrid",""],[1,"actions"],[1,"pbi-fluent-button","primary",3,"disabled","click"],[1,"pbi-fluent-button","secondary",3,"click"],[3,"viewModel"],["fontIcon","pbi-glyph-fullscreen",1,"glyph-small"],["fontIcon","pbi-glyph-fullscreenexit",1,"glyph-small"],[1,"pbi-spinner-large"],[1,"grid-container"],[3,"rows","columns","rowsChange"],["gridEditor",""]],template:function(t,i){if(1&t&&(e.\u0275\u0275template(0,pt,1,1,"message-banner",0),e.\u0275\u0275elementStart(1,"header")(2,"div",1),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"button",2),e.\u0275\u0275listener("click",function(){return i.toggleFullScreen()}),e.\u0275\u0275pipe(6,"localize"),e.\u0275\u0275template(7,At,1,0,"mat-icon",3),e.\u0275\u0275template(8,Ft,1,0,"mat-icon",4),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"section"),e.\u0275\u0275text(10),e.\u0275\u0275pipe(11,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",5)(13,"value-formatting",6),e.\u0275\u0275listener("formatStringChange",function(c){return i.valueFormatStringChanged(c)}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(14,Lt,1,0,"pbi-spinner",7),e.\u0275\u0275template(15,Ll,3,2,"ng-template",null,8,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275element(17,"format-switch-cell-template"),e.\u0275\u0275elementStart(18,"div",9)(19,"button",10),e.\u0275\u0275listener("click",function(){return i.onDone()}),e.\u0275\u0275pipe(20,"localize"),e.\u0275\u0275text(21),e.\u0275\u0275pipe(22,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"button",11),e.\u0275\u0275listener("click",function(){return i.close()}),e.\u0275\u0275pipe(24,"localize"),e.\u0275\u0275text(25),e.\u0275\u0275pipe(26,"localize"),e.\u0275\u0275elementEnd()()),2&t){var a=e.\u0275\u0275reference(16);e.\u0275\u0275property("ngIf",i.messageBanner),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,15,"Metrics_Values_Editor_Title")),e.\u0275\u0275advance(2),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(6,17,"Fullscreen_Toggle")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!i.isFullScreen),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.isFullScreen),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(11,19,"Metrics_Values_Editor_Description"),"\n"),e.\u0275\u0275advance(3),e.\u0275\u0275property("formatString",i.columnsConfig[0].formatString)("dataType",i.resultType),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!i.gridData)("ngIfElse",a),e.\u0275\u0275advance(5),e.\u0275\u0275property("disabled",!i.gridData),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(20,21,"Done_ButtonText")),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(22,23,"Done_ButtonText")," "),e.\u0275\u0275advance(2),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(24,25,"PBI_Button_Label_Cancel")),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(26,27,"PBI_Button_Label_Cancel")," ")}},dependencies:[U.NgIf,Ut.Hw,mn.A,so.k,ci.d,Tt,sn,xt.F],styles:['[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}[_nghost-%COMP%]     .values-editor-value-formatting-box mat-select{height:28px;border:1px solid var(--gray-110, #8A8886);border-radius:2px}[_nghost-%COMP%]     .values-editor-value-formatting-box mat-select .mat-select-value{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);color:var(--fluent-theme-neutral-primary-color, #323130);line-height:20px}[_nghost-%COMP%]     .values-editor-value-formatting-box mat-select .mat-select-arrow{color:var(--gray-140, #484644);padding-right:14px}[_nghost-%COMP%]     .values-editor-value-formatting-box num-up-down .inputRange{height:28px;border:1px solid var(--gray-110, #8A8886);border-radius:2px}[_nghost-%COMP%]     .values-editor-value-formatting-box num-up-down .inputRange .inputUpDown{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);color:var(--fluent-theme-neutral-primary-color, #323130);line-height:20px}[_nghost-%COMP%]     .values-editor-value-formatting-box num-up-down label{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);line-height:20px}[_nghost-%COMP%]     .values-editor-value-formatting-box .valueFormatterToggleButtonsGroup .btn{background-color:transparent;border:none}[_nghost-%COMP%]     .values-editor-value-formatting-box .valueFormatterToggleButtonsGroup .btn:hover{background-color:var(--fluent-theme-neutral-quarter-alt-color, #E1DFDD)}header[_ngcontent-%COMP%]{color:var(--fluent-theme-neutral-dark-color, #201F1E);display:flex;flex-direction:row;align-items:center;justify-content:space-between}header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--xlg-font-size, 20px);font-weight:var(--font-weight-semi-bold, 600)}header[_ngcontent-%COMP%], section[_ngcontent-%COMP%], tri-grid[_ngcontent-%COMP%], .values-editor-value-formatting-box[_ngcontent-%COMP%]{margin-bottom:16px}.actions[_ngcontent-%COMP%]{display:flex;justify-content:end;gap:8px}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   pbi-spinner[_ngcontent-%COMP%]{margin:5px 5px 0 0}.pbi-spinner-large[_ngcontent-%COMP%]{height:100%}.grid-container[_ngcontent-%COMP%]{flex-grow:1}'],changeDetection:0}),o}(),Aa=function(){function o(n){this.dialogService=n}return o.prototype.launchTargetsEditor=function(n,t,i){this.dialogService.open(it,{width:"70%",height:"80%",maxWidth:"100%",maxHeight:"100%",autoFocus:!1,data:{goal$:(0,re.of)(n),goalTargets$:t,onDoneCallback:i}})},o.prototype.launchValuesEditor=function(n,t,i){this.dialogService.open(Ra,{width:"70%",height:"80%",maxWidth:"100%",maxHeight:"100%",autoFocus:!1,data:{goal$:(0,re.of)(n),goalValues$:t,onDoneCallback:i}})},o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275inject(xo.x))},o.\u0275prov=e.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac}),o}(),Nl=T(56083),La=function(){function o(n,t){this.localizationService=n,this.tutorialPopupService=t}return o.prototype.startFirstGoalTutorial=function(){this.tutorialPopupService.startTutorial(this.createFirstGoalTutorialModel())},o.prototype.createFirstGoalTutorialModel=function(){var n,t="ScorecardTutorialFirstGoalName",i="ScorecardTutorialFirstGoalCurrent",a="ScorecardTutorialFirstGoalTarget";return{isSequentialTutorial:!0,itemKeys:[t,i,a],items:(n={},n[t]={title:this.localizationService.get("ScorecardTutorial_MetricName_Title"),text:this.localizationService.get("ScorecardTutorial_MetricName_Text"),buttonLabel:this.localizationService.get("TutorialPopup_Next"),dataStoreKey:t,canShow:function(){return $(pe.gT.ScorecardTutorial_FirstGoalNameSelector).length>0},attachTo:function(){return $(pe.gT.ScorecardTutorial_FirstGoalNameSelector)},offset:{top:0,left:-10}},n[i]={title:this.localizationService.get("ScorecardTutorial_MetricCurrent_Title"),text:this.localizationService.get("ScorecardTutorial_MetricCurrent_Text"),buttonLabel:this.localizationService.get("TutorialPopup_Next"),dataStoreKey:i,canShow:function(){return $(pe.gT.ScorecardTutorial_FirstGoalCurrentSelector).length>0},attachTo:function(){return $(pe.gT.ScorecardTutorial_FirstGoalCurrentSelector)},offset:{top:0,left:-10}},n[a]={title:this.localizationService.get("ScorecardTutorial_MetricTarget_Title"),text:this.localizationService.get("ScorecardTutorial_MetricTarget_Text"),buttonLabel:this.localizationService.get("Done_ButtonText"),dataStoreKey:a,canShow:function(){return $(pe.gT.ScorecardTutorial_FirstGoalTargetSelector).length>0},attachTo:function(){return $(pe.gT.ScorecardTutorial_FirstGoalTargetSelector)},offset:{top:0,left:-10}},n)}},o.prototype.startGoalRollupsTutorial=function(){this.tutorialPopupService.startTutorial(this.createGoalRollupsTutorialModel())},o.prototype.createGoalRollupsTutorialModel=function(){var n,t="GoalRollupsTutorial",i=pe.gT.ScorecardTutorial_GoalRollupSelector;return{itemKeys:[t],items:(n={},n[t]={title:this.localizationService.get("TutorialPopup_MetricsRollupsTitle"),text:this.localizationService.get("TutorialPopup_MetricsRollupsContent"),buttonLabel:this.localizationService.get("TutorialPopup_GotIt"),dataStoreKey:t,canShow:function(){return!!$(i)},attachTo:function(){return $(i)},preferredOrientation:"bottom",telemetryEventArgs:[Mo],customClass:"goal-rollups-tutorial"},n)}},o.prototype.startGoalRollupsDetailsPaneTutorial=function(){this.tutorialPopupService.startTutorial(this.createGoalRollupsDetailsPaneTutorialModel())},o.prototype.createGoalRollupsDetailsPaneTutorialModel=function(){var n,t="GoalRollupsDetailsPaneTutorial",i=pe.gT.ScorecardTutorial_GoalRollupDetailsPaneSelector;return{itemKeys:[t],items:(n={},n[t]={title:this.localizationService.get("TutorialPopup_MetricsRollupsTitle_DetailsPane"),text:this.localizationService.get("TutorialPopup_MetricsRollupsContent_DetailsPane"),buttonLabel:this.localizationService.get("TutorialPopup_GotIt"),dataStoreKey:t,canShow:function(){return!!$(i)},attachTo:function(){return $(i)},learnMoreText:this.localizationService.get("LearnMore"),learnMoreUrl:"https://learn.microsoft.com/en-us/power-bi/create-reports/service-metrics-submetrics#get-started-creating-rollups",preferredOrientation:"right",telemetryEventArgs:[Po],customClass:"show-goal-rollups-coachmark"},n)}},o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275inject(St.o),e.\u0275\u0275inject(Nl.yU))},o.\u0275prov=e.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac}),o}(),zl=function(n){return{isNew:n}};function Hl(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"span",15),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){var t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(2,zl,t.goal.isNew&&!t.selectedValue)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.currentStatus)}}function Bl(o,n){1&o&&e.\u0275\u0275element(0,"tri-svg-icon",16),2&o&&e.\u0275\u0275property("name","link_20_regular")}var Br=function(n){return{selected:n}};function Et(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",6),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.onValueSelect(l.allGoalValueOptions[2].value))}),e.\u0275\u0275element(1,"tri-svg-icon",7),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()}if(2&o){var i=e.\u0275\u0275nextContext();e.\u0275\u0275property("disabled",!i.capabilities.selectMultiple)("ngClass",e.\u0275\u0275pureFunction1(5,Br,(null==i.selectedValue?null:i.selectedValue.type)===i.allGoalValueOptions[2].value.type)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",(null==i.selectedValue?null:i.selectedValue.type)===i.allGoalValueOptions[2].value.type?"show-checkmark":"hide-checkmark")("name","checkmark_20_regular"),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",i.allGoalValueOptions[2].displayName," ")}}function kt(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",17),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.onValueSelect(l.allGoalValueOptions[1].value))}),e.\u0275\u0275element(1,"tri-svg-icon",18),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"localize"),e.\u0275\u0275elementEnd()}if(2&o){var i=e.\u0275\u0275nextContext();e.\u0275\u0275property("disabled",!i.capabilities.selectConnect),e.\u0275\u0275advance(1),e.\u0275\u0275property("name","edit_20_regular"),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,3,"Rollups_Connect_Edit")," ")}}function pu(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",17),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.onValueSelect(l.allGoalValueOptions[2].value))}),e.\u0275\u0275element(1,"tri-svg-icon",18),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"localize"),e.\u0275\u0275elementEnd()}if(2&o){var i=e.\u0275\u0275nextContext();e.\u0275\u0275property("disabled",!i.capabilities.selectMultiple),e.\u0275\u0275advance(1),e.\u0275\u0275property("name","edit_20_regular"),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,3,i.isGoalCurrentValuePicker?"Rollups_Multiple_Values_Edit":"Rollups_Multiple_Targets_Edit")," ")}}function gu(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"button",17),e.\u0275\u0275listener("click",function(){var u=e.\u0275\u0275restoreView(t).$implicit,p=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(p.onSelectRollup(u))}),e.\u0275\u0275element(2,"tri-svg-icon",19),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&o){var i=n.$implicit,a=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("disabled",!a.capabilities.selectRollup),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",(null==a.selectedValue?null:a.selectedValue.rollupType)===i?"show-checkmark":"hide-checkmark")("name","checkmark_20_regular"),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",a.metricRollupDisplayNames[i]," ")}}var mc=function(){function o(n,t,i){this.localizationService=n,this.changeDetector=t,this.goalsTutorialService=i,this.onCurrentSelection=new e.EventEmitter,this.MetricRollupOptions=[1,2,4,3],this.isSelected=!1,this.isSubmetricSelected=!1,this.capabilities={},this.allGoalValueOptions=[],this.metricRollupDisplayNames={},this.setOptions()}return o.prototype.ngOnInit=function(){this.isGoalCurrentValuePicker=1===this.goalValueType},o.prototype.ngOnChanges=function(n){var t,i;if(n.goal&&(this.isCategorical=!!this.goal.valuesCategoryId,this.showGoalRollupsCoachmark&&this.goalsTutorialService.startGoalRollupsTutorial()),n.goalCapabilities&&(this.capabilities={editCalculation:this.goalCapabilities.editCalculationType,selectManual:!0,selectRollup:this.goalCapabilities.usePickerRollup,selectConnect:this.isGoalCurrentValuePicker?this.goalCapabilities.connectCurrentValueToData:this.goalCapabilities.connectTargetValueToData,selectMultiple:this.isGoalCurrentValuePicker?this.goalCapabilities.editMultipleValues:this.goalCapabilities.editMultipleTargets}),n.currentGoalValueTypeSelection){if(_.isUndefined(null===(i=null===(t=n.currentGoalValueTypeSelection)||void 0===t?void 0:t.currentValue)||void 0===i?void 0:i.rollupType))this.isSubmetricSelected=!1,this.selectedValue=n.currentGoalValueTypeSelection.currentValue,this.currentStatus=void 0===this.selectedValue?this.localizationService.get("Set_Up"):this.allGoalValueOptions[n.currentGoalValueTypeSelection.currentValue.type].buttonText;else{this.isSubmetricSelected=!0,this.selectedValue=n.currentGoalValueTypeSelection.currentValue;var a=ia(n.currentGoalValueTypeSelection.currentValue.rollupType);this.selectedValue.rollupType=a,this.currentStatus=void 0===this.selectedValue?this.localizationService.get("Set_Up"):this.metricRollupDisplayNames[a]}this.changeDetector.markForCheck()}},o.prototype.setOptions=function(){this.metricRollupDisplayNames=Cl(this.localizationService),this.allGoalValueOptions=[{displayName:this.localizationService.get("Rollups_Manual_Metric"),value:{type:0},buttonText:this.localizationService.get("Rollups_Manual")},{displayName:this.localizationService.get("Rollups_Connect_To_Data"),value:{type:1},buttonText:""},{displayName:this.localizationService.get("Rollups_Multiple_Targets"),value:{type:2},buttonText:this.localizationService.get("Rollups_Multiple")}]},o.prototype.onValueSelect=function(n){this.onCurrentSelection.emit(n)},o.prototype.onSelectRollup=function(n){this.onCurrentSelection.emit({type:4,rollupType:n})},o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(St.o),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(La))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["goal-value-type-picker"]],inputs:{goal:"goal",hasMultipleTargets:"hasMultipleTargets",goalValueType:"goalValueType",currentGoalValueTypeSelection:"currentGoalValueTypeSelection",goalCapabilities:"goalCapabilities",showGoalRollupsCoachmark:"showGoalRollupsCoachmark"},outputs:{onCurrentSelection:"onCurrentSelection"},features:[e.\u0275\u0275NgOnChangesFeature],decls:26,vars:35,consts:[["mat-button","","cdkMonitorElementFocus","","data-testid","goal-value-input-menu-btn",1,"goal-value-input-menu-trigger",3,"matMenuTriggerFor","disabled"],[3,"ngClass",4,"ngIf"],[3,"name",4,"ngIf"],[1,"chevron-down",3,"name"],["xPosition","before",1,"goal-value-input-menu",3,"overlapTrigger"],["goalValueInputMenu","matMenu"],["mat-menu-item","",3,"disabled","ngClass","click"],[1,"margin-right",3,"ngClass","name"],["mat-menu-item","",1,"goal-value-input-sub-menu-button","submetrics-menu-trigger",3,"disabled","matMenuTriggerFor"],["name","chevronrightmedium","size","mini"],["mat-menu-item","",3,"disabled","ngClass","click",4,"ngIf"],["mat-menu-item","",3,"disabled","click",4,"ngIf"],[1,"goal-value-input-sub-menu",3,"overlapTrigger"],["goalValueInputRollupsMenu","matMenu"],[4,"ngFor","ngForOf"],[3,"ngClass"],[3,"name"],["mat-menu-item","",3,"disabled","click"],[1,"margin-right",3,"name"],[1,"margin-right-sub-menu",3,"ngClass","name"]],template:function(t,i){if(1&t&&(e.\u0275\u0275elementStart(0,"button",0),e.\u0275\u0275pipe(1,"localize"),e.\u0275\u0275template(2,Hl,2,4,"span",1),e.\u0275\u0275template(3,Bl,1,1,"tri-svg-icon",2),e.\u0275\u0275element(4,"tri-svg-icon",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"mat-menu",4,5)(7,"button",6),e.\u0275\u0275listener("click",function(){return i.onValueSelect(i.allGoalValueOptions[0].value)}),e.\u0275\u0275element(8,"tri-svg-icon",7),e.\u0275\u0275text(9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"button",8)(11,"div"),e.\u0275\u0275element(12,"tri-svg-icon",7),e.\u0275\u0275text(13),e.\u0275\u0275pipe(14,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(15,"pbi-icon",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"button",6),e.\u0275\u0275listener("click",function(){return i.onValueSelect(i.allGoalValueOptions[1].value)}),e.\u0275\u0275element(17,"tri-svg-icon",7),e.\u0275\u0275text(18),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(19,Et,3,7,"button",10),e.\u0275\u0275element(20,"mat-divider"),e.\u0275\u0275template(21,kt,4,5,"button",11),e.\u0275\u0275template(22,pu,4,5,"button",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"mat-menu",12,13),e.\u0275\u0275template(25,gu,4,4,"ng-container",14),e.\u0275\u0275elementEnd()),2&t){var c,a=e.\u0275\u0275reference(6),l=e.\u0275\u0275reference(24);e.\u0275\u0275property("matMenuTriggerFor",a)("disabled",!i.capabilities.editCalculation),e.\u0275\u0275attribute("aria-label",null!==(c=i.currentStatus)&&void 0!==c?c:e.\u0275\u0275pipeBind1(1,27,"Set_Up")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",(null==i.selectedValue?null:i.selectedValue.type)!==i.allGoalValueOptions[1].value.type),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(null==i.selectedValue?null:i.selectedValue.type)===i.allGoalValueOptions[1].value.type),e.\u0275\u0275advance(1),e.\u0275\u0275property("name","chevron_down_20_regular"),e.\u0275\u0275advance(1),e.\u0275\u0275property("overlapTrigger",!1),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",!i.capabilities.selectManual||!i.isGoalCurrentValuePicker&&i.hasMultipleTargets)("ngClass",e.\u0275\u0275pureFunction1(31,Br,(null==i.selectedValue?null:i.selectedValue.type)===i.allGoalValueOptions[0].value.type)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",(null==i.selectedValue?null:i.selectedValue.type)===i.allGoalValueOptions[0].value.type?"show-checkmark":"hide-checkmark")("name","checkmark_20_regular"),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",i.allGoalValueOptions[0].displayName," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("disabled",!i.capabilities.selectRollup)("matMenuTriggerFor",l),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",i.isSubmetricSelected?"show-checkmark":"hide-checkmark")("name","checkmark_20_regular"),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(14,29,"Rollups_Use_Submetrics")),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",!i.capabilities.selectConnect)("ngClass",e.\u0275\u0275pureFunction1(33,Br,(null==i.selectedValue?null:i.selectedValue.type)===i.allGoalValueOptions[1].value.type)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",(null==i.selectedValue?null:i.selectedValue.type)===i.allGoalValueOptions[1].value.type?"show-checkmark":"hide-checkmark")("name","checkmark_20_regular"),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",i.allGoalValueOptions[1].displayName," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!i.isGoalCurrentValuePicker),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!!i.goal.valueConnection&&i.isGoalCurrentValuePicker||!!i.goal.targetConnection&&!i.isGoalCurrentValuePicker),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!i.isCategorical&&i.isGoalCurrentValuePicker&&(null==i.selectedValue?null:i.selectedValue.type)===i.allGoalValueOptions[0].value.type||!i.isGoalCurrentValuePicker&&(null==i.selectedValue?null:i.selectedValue.type)===i.allGoalValueOptions[2].value.type),e.\u0275\u0275advance(1),e.\u0275\u0275property("overlapTrigger",!1),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",i.MetricRollupOptions)}},dependencies:[U.NgClass,U.NgForOf,U.NgIf,zo.d,Pt.W0,Pt.tN,Pt.D8,Gn._,ii.M,xt.F],styles:['.goal-value-input-menu-trigger[_ngcontent-%COMP%]{padding:6px 8px;width:100%;background:none;border:1px solid var(--gray-110, #8A8886);border-radius:2px;display:flex;flex-direction:row}.goal-value-input-menu-trigger[_ngcontent-%COMP%]   pbi-icon[_ngcontent-%COMP%]{padding-left:4px;padding-top:4px}.goal-value-input-menu-trigger[_ngcontent-%COMP%]:active, .goal-value-input-menu-trigger[_ngcontent-%COMP%]:hover:not(:disabled){background-color:var(--gray-88, #E0E0E0)}.goal-value-input-menu-trigger[_ngcontent-%COMP%]:disabled{color:var(--gray-90, #A19F9D);background-color:var(--gray-20, #F3F2F1);border-color:var(--gray-20, #F3F2F1)}button[_ngcontent-%COMP%]{font-size:var(--md-font-size, 14px);color:var(--fluent-theme-neutral-primary-color, #323130);padding:6px 12px;height:32px}button[_ngcontent-%COMP%]   .isNew[_ngcontent-%COMP%]{color:var(--fluent-theme-link-darker-color, #005A9E)}button[_ngcontent-%COMP%]   tri-svg-icon.chevron-down[_ngcontent-%COMP%]{height:16px;width:16px;margin:2px;padding-left:4px}button[_ngcontent-%COMP%]   tri-svg-icon.margin-right[_ngcontent-%COMP%]{margin-right:8px}button[_ngcontent-%COMP%]   tri-svg-icon.margin-right-sub-menu[_ngcontent-%COMP%]{margin-right:6px}button[_ngcontent-%COMP%]   .show-checkmark[_ngcontent-%COMP%]{visibility:visible}button[_ngcontent-%COMP%]   .hide-checkmark[_ngcontent-%COMP%]{visibility:hidden}button[_ngcontent-%COMP%]:active, button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:var(--gray-96, #F5F5F5)}button[_ngcontent-%COMP%]:disabled   tri-svg-icon[_ngcontent-%COMP%]{opacity:50%}  .goal-value-input-menu-trigger .sort-icon .mat-icon{margin:0 4px}  .mat-menu-panel.goal-value-input-sub-menu{min-height:fit-content;transform:translateY(8px);width:100px;min-width:100px}  .goal-value-input-menu .mat-menu-item{padding-left:8px}  .goal-value-input-menu .mat-menu-content{width:190px;min-width:190px}  .goal-value-input-sub-menu .mat-menu-content{width:100px;min-width:100px}  .goal-value-input-sub-menu .mat-menu-content button{width:100px;min-width:100px}  .goal-rollups-tutorial.tutorial-popup .box{background-color:var(--gray-130, #605E5C)}  .goal-rollups-tutorial.tutorial-popup .box .arrow{background-color:var(--gray-130, #605E5C)}  .goal-rollups-tutorial.tutorial-popup .box .title{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--xlg-font-size, 20px);font-weight:var(--font-weight-semi-bold, 600)}  .goal-rollups-tutorial.tutorial-popup .box .text{margin:10px 10px 0;line-height:22px;font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-regular, 400)}.mat-menu-item[_ngcontent-%COMP%]{color:var(--gray-180, #252423);display:flex;flex-direction:row;align-items:center}.mat-menu-item[_ngcontent-%COMP%]   pbi-icon[_ngcontent-%COMP%]{display:flex}.mat-menu-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:inherit;display:flex;align-items:center}.mat-menu-item.goal-value-input-sub-menu-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.mat-menu-item[_ngcontent-%COMP%]:active, .mat-menu-item[_ngcontent-%COMP%]:hover{background-color:var(--gray-96, #F5F5F5)}.mat-menu-item[_ngcontent-%COMP%]:disabled{color:var(--gray-90, #A19F9D)}.selected[_ngcontent-%COMP%]{pointer-events:none;user-select:none;-webkit-user-select:none;-ms-user-select:none;-moz-user-select:none}'],changeDetection:0}),o}(),hu=["valueInput"],fu=["valueSelect"],mu=["targetInput"],vu=["targetSelect"],Cu=["valueFormattingTmpl"],_u=["valueFormatting"];function yu(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",13)(1,"button",14),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.openGoalValuesEditor())}),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"localize"),e.\u0275\u0275elementEnd()()}2&o&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,1,"Edit")))}function bu(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",15)(1,"input",16,17),e.\u0275\u0275listener("focus",function(){e.\u0275\u0275restoreView(t);var l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.onCurrentValueFocus())})("keyup.enter",function(){e.\u0275\u0275restoreView(t);var l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.save())})("ngModelChange",function(l){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(c.onCurrentValueChange(l))}),e.\u0275\u0275pipe(3,"localize"),e.\u0275\u0275pipe(4,"localize"),e.\u0275\u0275elementEnd()()}if(2&o){var i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate("type",i.valueInputType),e.\u0275\u0275property("readonly",!i.capabilities.editCurrentValue||i.isValueSubmetricsSelected)("ngModel",i.valueInputValue),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(3,5,"CurrentValue"))("placeholder",i.displayedGoal.valueConnection||i.displayedGoal.valueRollup||i.isValueSubmetricsSelected?"-":e.\u0275\u0275pipeBind1(4,7,"Enter_Value"))}}function wu(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"option",22),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){var t=n.$implicit;e.\u0275\u0275property("ngValue",n.index),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.displayName," ")}}function Su(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"select",18,19),e.\u0275\u0275listener("ngModelChange",function(l){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(c.valueSelected=l)}),e.\u0275\u0275element(2,"option",20),e.\u0275\u0275template(3,wu,2,2,"option",21),e.\u0275\u0275elementEnd()}if(2&o){var i=e.\u0275\u0275nextContext();e.\u0275\u0275property("disabled",!i.capabilities.editCurrentValue)("ngModel",i.valueSelected),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",null==i.goalValueCategoryLists[i.selectedCategoryListIndex]?null:i.goalValueCategoryLists[i.selectedCategoryListIndex].categories)}}function Mu(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"goal-value-type-picker",23),e.\u0275\u0275listener("onCurrentSelection",function(l){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(c.onCurrentSelectionCurrentValueChange(l))}),e.\u0275\u0275elementEnd()()}if(2&o){var i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("canCustomizeStatus",null==i.capabilities.scorecardCapabilities?null:i.capabilities.scorecardCapabilities.customizeStatus)("goal",i.displayedGoal)("currentGoalValueTypeSelection",i.currentGoalValueTypeSelection)("goalValueType",1)("goalCapabilities",i.capabilities)("showGoalRollupsCoachmark",(null==i.displayedGoal.subGoals?null:i.displayedGoal.subGoals.length)>0&&i.capabilities.usePickerRollup)}}function Pu(o,n){1&o&&e.\u0275\u0275element(0,"span",26)}function xu(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",13),e.\u0275\u0275template(1,Pu,1,0,"span",24),e.\u0275\u0275elementStart(2,"span"),e.\u0275\u0275text(3,"\xa0"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"button",25),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.onConnectCurrentToDataClick())}),e.\u0275\u0275elementEnd()()}if(2&o){var i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!i.displayedGoal.valueConnection),e.\u0275\u0275advance(3),e.\u0275\u0275property("localize",i.displayedGoal.valueConnection?"UpdateConnection":"ConnectToData")}}function Ou(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",13)(1,"button",14),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.openGoalTargetsEditor())}),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"localize"),e.\u0275\u0275elementEnd()()}2&o&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,1,"Edit")))}function Tu(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",15)(1,"input",27,28),e.\u0275\u0275listener("focus",function(){e.\u0275\u0275restoreView(t);var l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.onTargetValueFocus())})("keyup.enter",function(){e.\u0275\u0275restoreView(t);var l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.save())})("ngModelChange",function(l){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(c.onTargetValueChange(l))}),e.\u0275\u0275pipe(3,"localize"),e.\u0275\u0275pipe(4,"localize"),e.\u0275\u0275elementEnd()()}if(2&o){var i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate("type",i.targetInputType),e.\u0275\u0275property("readonly",!i.capabilities.editTargetValue||i.isTargetSubmetricsSelected)("ngModel",i.targetInputValue)("pbiTooltipDisabled",!(i.capabilities.supportMultipleTargetsEditing&&i.targetCount>1&&!i.displayedGoal.targetConnection&&!i.isTargetSubmetricsSelected))("pbiTooltipPosition","below"),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(3,7,"Target"))("placeholder",i.displayedGoal.targetConnection||i.displayedGoal.targetRollup||i.isTargetSubmetricsSelected?"-":e.\u0275\u0275pipeBind1(4,9,"Enter_A_Value"))}}function Eu(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"option",22),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){var t=n.$implicit;e.\u0275\u0275property("ngValue",n.index),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.displayName," ")}}function ku(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"select",29,30),e.\u0275\u0275listener("ngModelChange",function(l){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(c.targetSelected=l)}),e.\u0275\u0275element(2,"option",31),e.\u0275\u0275template(3,Eu,2,2,"option",21),e.\u0275\u0275elementEnd()}if(2&o){var i=e.\u0275\u0275nextContext();e.\u0275\u0275property("disabled",!i.capabilities.editTargetValue)("ngModel",i.targetSelected),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",null==i.goalValueCategoryLists[i.selectedCategoryListIndex]?null:i.goalValueCategoryLists[i.selectedCategoryListIndex].categories)}}function Du(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"goal-value-type-picker",32),e.\u0275\u0275listener("onCurrentSelection",function(l){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(c.onCurrentSelectionTargetChange(l))}),e.\u0275\u0275elementEnd()()}if(2&o){var i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("canCustomizeStatus",null==i.capabilities.scorecardCapabilities?null:i.capabilities.scorecardCapabilities.customizeStatus)("goal",i.displayedGoal)("hasMultipleTargets",i.targetCount>1)("currentGoalValueTypeSelection",i.targetGoalValueTypeSelection)("goalValueType",2)("goalCapabilities",i.capabilities)}}function Iu(o,n){1&o&&e.\u0275\u0275element(0,"span",26)}function Fu(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",13),e.\u0275\u0275template(1,Iu,1,0,"span",24),e.\u0275\u0275elementStart(2,"span"),e.\u0275\u0275text(3,"\xa0"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"button",25),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.onConnectTargetToDataClick())}),e.\u0275\u0275elementEnd()()}if(2&o){var i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!i.displayedGoal.targetConnection),e.\u0275\u0275advance(3),e.\u0275\u0275property("localize",i.displayedGoal.targetConnection?"UpdateConnection":"ConnectToData")}}function Gu(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",33,34)(2,"div",35),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"value-formatting",36),e.\u0275\u0275listener("formatStringChange",function(l){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(c.valueFormatStringChanged(l))})("onSelectedCategoryListChange",function(l){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(c.selectCategoryList(l))}),e.\u0275\u0275elementEnd()()}if(2&o){var i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(i.formattedValue),e.\u0275\u0275advance(1),e.\u0275\u0275property("formatString",i.formatString)("dataType",i.resultType)("supportCategoricalValues",i.capabilities.useCategoricalValues&&!i.isValueSubmetricsSelected&&!i.isTargetSubmetricsSelected)("goalValueCategoryLists",i.goalValueCategoryLists)("selectedCategoryListIndex",i.selectedCategoryListIndex)("launchCategoryListsEditPane",i.launchCategoryListsEditPane)}}var za,Ha,Ul,Ba,Ua,jl,ja,Nn=function(o){return o[o.None=0]="None",o[o.Value=1]="Value",o[o.Target=2]="Target",o}({}),Xs=function(){function o(n,t,i,a,l,c,u,p,y,P,x){var N=this;this.elementRef=n,this.pbiOverlay=t,this.changeDetector=i,this.formatValuePipe=a,this.localizationService=l,this.detailsPaneLauncher=c,this.goalValuesEditorLauncher=u,this.dialogService=p,this.scorecardService=y,this.connectToDataDialog=P,this.scorecardSettings=x,this.currentTargetChange=new e.EventEmitter,this.currentValueChange=new e.EventEmitter,this.targetsChange=new e.EventEmitter,this.valuesChange=new e.EventEmitter,this.valueRollupsChange=new e.EventEmitter,this.targetRollupsChange=new e.EventEmitter,this.onCategoryListIdChanged=new e.EventEmitter,this.onSave=new e.EventEmitter,this.onConnectionChanged=new e.EventEmitter,this.PaddingFromComponentToEditor=4,this.GoalEditValueTooltipId="goal-edit-value-formatting",this.resultType=2,this.formatNilReturn="",this.focusedInput=Nn.None,this.goalValueCategoryLists=[],this.isValueSubmetricsSelected=!1,this.isTargetSubmetricsSelected=!1,this.currentGoalValueTypeSelection=void 0,this.targetGoalValueTypeSelection=void 0,this.launchCategoryListsEditPane=function(W){N.overlayRef&&(N.overlayRef.close(),N.overlayRef=null),N.detailsPaneLauncher.openCategoryListsEditPane(N.scorecardService,W,function(Oe){_.isEmpty(N.goalValueCategoryLists)&&(N.formatString="");var ve=N.displayedGoal.valuesCategoryId;if(ve){var Re=_.findIndex(N.goalValueCategoryLists,function(Xe){return Xe.id===ve});Oe&&1===N.goalValueCategoryLists.length&&(Re=0),Re<0?(N.selectedCategoryListIndex=Re,N.onCategoryListIdChanged.emit(ve),N.formatGoalValues()):N.selectCategoryList(Re)}else N.selectCategoryList(Re=Oe&&1===N.goalValueCategoryLists.length?0:-1)})}}return o.prototype.ngOnInit=function(){var t,i,a,l,n=this;if(this.formatString=this.displayedGoal.valuesCategoryId?ci.d.CategoricalFormatString:this.displayedGoal.valuesFormatString,this.originalCurrentValue=this.currentValue.value,this.capabilities.useCategoricalValues&&(this.categoryListsSubscribe=this.scorecardService.getScorecard().pipe((0,V.x)(function(p,y){return _.isEqual(p.goalValueCategories,y.goalValueCategories)})).subscribe(function(){var p;n.goalValueCategoryLists=n.scorecardService.getGoalValueCategoryLists(n.displayedGoal),n.selectedCategoryListIndex=null!==(p=_.findIndex(n.goalValueCategoryLists,function(y){return y.id===n.displayedGoal.valuesCategoryId}))&&void 0!==p?p:-1})),this.capabilities.supportMultipleTargetsEditing&&!this.displayedGoal.targetConnection){var c;c=this.displayedGoal.isNew?0:null!==(a=null===(i=null===(t=this.displayedGoal.aggregations)||void 0===t?void 0:t.find(function(p){return"NumberOfTargets"===p.type}))||void 0===i?void 0:i.value)&&void 0!==a?a:0,this.targetCount=Math.max(c,1)}if(_.isUndefined(null===(l=this.displayedGoal.metadata)||void 0===l?void 0:l.showFinalTarget)&&this.capabilities.supportMultipleTargetsEditing){var u=!this.displayedGoal.targetConnection;this.displayedGoal.metadata?this.displayedGoal.metadata.showFinalTarget=u:this.displayedGoal.metadata={showFinalTarget:u}}this.formatGoalValues(),this.updateCurrentGoalValueTypeSelection(void 0,1),this.updateCurrentGoalValueTypeSelection(void 0,2)},o.prototype.save=function(){this.onSave.emit()},o.prototype.onCurrentSelectionCurrentValueChange=function(n){var t;return(0,S.mG)(this,void 0,void 0,function(){return(0,S.Jh)(this,function(i){return this.isValueSubmetricsSelected=null!==(t=!_.isUndefined(n.rollupType))&&void 0!==t&&t,1!==n.type&&this.displayedGoal.valueConnection&&(this.displayedGoal.valueConnection=void 0,this.onConnectionChanged.emit()),_.isUndefined(n.rollupType)?2===n.type?(this.displayedGoal.valueRollup=void 0,this.openGoalValuesEditor()):1===n.type?this.onConnectCurrentToDataClick():this.displayedGoal.valueRollup=void 0:(this.currentValue=(0,S.pi)((0,S.pi)({},this.currentValue),{value:null}),this.currentValueChange.emit(this.currentValue),this.formatGoalValues()),this.changeDetector.detectChanges(),this.valueRollupsChange.emit({rollupType:n.rollupType,type:n.type}),this.updateCurrentGoalValueTypeSelection(n,1),[2]})})},o.prototype.onCurrentSelectionTargetChange=function(n){var t;return(0,S.mG)(this,void 0,void 0,function(){return(0,S.Jh)(this,function(i){return this.isTargetSubmetricsSelected=null!==(t=!_.isUndefined(n.rollupType))&&void 0!==t&&t,1!==n.type&&this.displayedGoal.targetConnection&&(this.displayedGoal.targetConnection=void 0,this.onConnectionChanged.emit()),_.isUndefined(n.rollupType)?2===n.type?this.openGoalTargetsEditor():1===n.type?this.onConnectTargetToDataClick():this.displayedGoal.targetRollup=void 0:(this.currentTarget=(0,S.pi)((0,S.pi)({},this.currentTarget),{target:null}),this.currentTargetChange.emit(this.currentTarget),this.formatGoalValues()),this.changeDetector.detectChanges(),this.targetRollupsChange.emit({rollupType:n.rollupType,type:n.type}),this.updateCurrentGoalValueTypeSelection(n,2),[2]})})},o.prototype.updateCurrentGoalValueTypeSelection=function(n,t){var i,a,l,c,u,p;2===t?this.targetGoalValueTypeSelection=this.displayedGoal.targetConnection?{type:1}:this.isTargetSubmetricsSelected||_.isNil(n)&&!_.isNil(null===(i=this.displayedGoal)||void 0===i?void 0:i.targetRollup)?{type:4,rollupType:null!==(a=n?.rollupType)&&void 0!==a?a:null===(l=this.displayedGoal.targetRollup)||void 0===l?void 0:l.rollupType}:this.targetCount>1?{type:2}:this.displayedGoal.isNew&&void 0===n?void 0:{type:0}:this.currentGoalValueTypeSelection=this.displayedGoal.valueConnection?{type:1}:this.isValueSubmetricsSelected||_.isNil(n)&&!_.isNil(null===(c=this.displayedGoal)||void 0===c?void 0:c.valueRollup)?{type:4,rollupType:null!==(u=n?.rollupType)&&void 0!==u?u:null===(p=this.displayedGoal.valueRollup)||void 0===p?void 0:p.rollupType}:this.displayedGoal.isNew&&void 0===n?void 0:{type:0}},o.prototype.ngOnDestroy=function(){this.overlayRef&&(this.overlayRef.close(),this.overlayRef=null),this.connectToDataDialog.close(),this.categoryListsSubscribe&&this.categoryListsSubscribe.unsubscribe()},o.prototype.onConnectCurrentToDataClick=function(){var n=this;this.detailsPaneLauncher.closeGoalDetails(),this.getDialogConfig(1).then(function(t){n.connectToDataDialog.open(t).pipe((0,ue.q)(1)).subscribe(function(i){var a;if(i){var c=(0,S._T)(i,["previewResult"]);n.displayedGoal.valueConnection=c;var u=(a=Il.getPreviewValue(i.previewResult)).value;n.valueFormatStringChanged(a.formatString),n.currentValue=(0,S.pi)((0,S.pi)({},n.currentValue),{value:u}),n.currentValueChange.emit(n.currentValue),n.capabilities.supportMultipleValuesEditing&&(n.values=void 0,n.valuesChange.emit(n.values)),n.formatGoalValues(),n.updateCurrentGoalValueTypeSelection({type:1},1),n.onConnectionChanged.emit(),n.changeDetector.detectChanges()}})})},o.prototype.onConnectTargetToDataClick=function(){return(0,S.mG)(this,void 0,void 0,function(){var i=this;return(0,S.Jh)(this,function(a){switch(a.label){case 0:return this.detailsPaneLauncher.closeGoalDetails(),this.capabilities.supportMultipleTargetsEditing&&!this.displayedGoal.targetConnection&&(this.targetCount>1||null!=this.currentTarget.target)?[4,this.dialogService.showConfirmationDialog({title:this.localizationService.get("Metrics_Switch_To_Connected_Data"),message:this.localizationService.get("Metrics_Switch_To_Connected_Data_Multiple_Goal_Targets"),okButtonText:this.localizationService.get("ModalDialogButtonText_Continue")}).afterClosed().toPromise()]:[3,2];case 1:if(1!==a.sent())return[2];a.label=2;case 2:return this.getDialogConfig(2).then(function(l){i.connectToDataDialog.open(l).pipe((0,ue.q)(1)).subscribe(function(c){var u,p;if(c){var P=(0,S._T)(c,["previewResult"]);i.displayedGoal.targetConnection=P;var x=(u=Il.getPreviewValue(c.previewResult)).value;if(i.valueFormatStringChanged(u.formatString),i.currentTarget=(0,S.pi)((0,S.pi)({},i.currentTarget),{target:x}),i.currentTargetChange.emit(i.currentTarget),i.capabilities.supportMultipleTargetsEditing){i.targets=void 0,i.targetsChange.emit(i.targets),i.targetCount=void 0;var W=!1;null!==(p=i.displayedGoal)&&void 0!==p&&p.metadata?i.displayedGoal.metadata.showFinalTarget=W:i.displayedGoal.metadata={showFinalTarget:W}}i.formatGoalValues(),i.updateCurrentGoalValueTypeSelection({type:1},2),i.onConnectionChanged.emit(),i.changeDetector.detectChanges()}})}),[2]}})})},o.prototype.onCurrentValueFocus=function(){this.focusedInput!==Nn.Value&&(this.focusedInput=Nn.Value,this.formatGoalValues(),this.valueInput.nativeElement.click()),this.capabilities.changeValueFormat&&null==this.overlayRef&&this.openValueFormattingPane()},o.prototype.onTargetValueFocus=function(){this.focusedInput!==Nn.Target&&(this.focusedInput=Nn.Target,this.formatGoalValues(),this.targetInput.nativeElement.click()),this.capabilities.changeValueFormat&&null==this.overlayRef&&this.openValueFormattingPane()},o.prototype.valueFormatStringChanged=function(n){var t=this.formatString===ci.d.CategoricalFormatString;this.formatString=n,this.displayedGoal.valuesFormatString=n===ci.d.CategoricalFormatString?"":n??"",t&&this.formatString!==ci.d.CategoricalFormatString&&this.onCategoryListIdChanged.emit(null),this.formatGoalValues()},o.prototype.isCategoricalValue=function(n){var t,i;return this.isCategoricalFormat&&this.selectedCategoryListIndex>=0&&this.selectedCategoryListIndex<(null===(t=this.goalValueCategoryLists)||void 0===t?void 0:t.length)&&(null===(i=this.goalValueCategoryLists[this.selectedCategoryListIndex])||void 0===i?void 0:i.categories.length)>n},o.prototype.onCurrentValueChange=function(n){var t=this,i=_.isNil(n)||""===n?null:+n;this.currentValue=(0,S.pi)((0,S.pi)({},this.currentValue),{value:i}),this.currentValueChange.emit(this.currentValue),this.currentGoalValueTypeSelection={type:0},this.capabilities.supportMultipleValuesEditing&&this.values&&(this.values=(0,b.ZP)(this.values,function(a){var l=a.find(function(c){return new Date(c.timestamp).getTime()===new Date(t.currentValue.timestamp).getTime()});l?l.value=t.currentValue.value:a.push(t.currentValue)}),this.valuesChange.emit(this.values)),this.formatGoalValues()},o.prototype.onTargetValueChange=function(n){var t=this,i=_.isNil(n)||""===n?null:+n;this.currentTarget=(0,S.pi)((0,S.pi)({},this.currentTarget),{target:i}),this.currentTargetChange.emit(this.currentTarget),this.targetGoalValueTypeSelection={type:0},this.capabilities.supportMultipleTargetsEditing&&this.targets&&(M.fF.assert(function(){return t.targetCount<=1&&t.targets.length<=1},"Inline target editor should only be enabled if there's at most one target!"),this.targets=[this.currentTarget],this.targetsChange.emit(this.targets)),this.formatGoalValues()},o.prototype.openGoalTargetsEditor=function(){return(0,S.mG)(this,void 0,void 0,function(){var n,i=this;return(0,S.Jh)(this,function(a){return M.fF.assertValue(_.isNil(this.displayedGoal.targetConnection),"Targets can only be edited if there is no target connection"),n=this.getGoalTargets(),this.goalValuesEditorLauncher.launchTargetsEditor(this.displayedGoal,n,function(c,u,p){return(0,S.mG)(i,void 0,void 0,function(){var y,P;return(0,S.Jh)(this,function(x){return c.length>0?(c.sort(function(N,W){return new Date(N.timestamp).getTime()-new Date(W.timestamp).getTime()}),this.currentTarget=u?$e.r.calculateFinalTarget(c):$e.r.calculateNextTarget(c),this.targets=c):((y=Le.E.getCurrentLocalDay()).setMonth(y.getMonth()+1),this.currentTarget={timestamp:y.toISOString(),target:null},this.targets=[this.currentTarget]),this.currentTargetChange.emit(this.currentTarget),this.targetsChange.emit(this.targets),null!==(P=this.displayedGoal)&&void 0!==P&&P.metadata?this.displayedGoal.metadata.showFinalTarget=u:this.displayedGoal.metadata={showFinalTarget:u},this.targetCount=c.length,this.formatString=p,this.displayedGoal.valuesFormatString=p,this.formatGoalValues(),this.updateCurrentGoalValueTypeSelection({type:2},2),[2]})})}),[2]})})},o.prototype.openGoalValuesEditor=function(){return(0,S.mG)(this,void 0,void 0,function(){var n,i=this;return(0,S.Jh)(this,function(a){return M.fF.assertValue(_.isNil(this.displayedGoal.valueConnection),"Values can only be edited if there is no value connection"),n=this.getGoalValues(),this.goalValuesEditorLauncher.launchValuesEditor(this.displayedGoal,n,function(c,u){return(0,S.mG)(i,void 0,void 0,function(){return(0,S.Jh)(this,function(p){return c.length>0?(c.sort(function(y,P){return new Date(y.timestamp).getTime()-new Date(P.timestamp).getTime()}),this.currentValue=(0,S.pi)((0,S.pi)({},this.currentValue),{value:$e.r.calculateCurrentValue(c)}),this.values=c):(this.currentValue=(0,S.pi)((0,S.pi)({},this.currentValue),{value:null}),this.values=[this.currentValue]),this.currentValueChange.emit(this.currentValue),this.valuesChange.emit(this.values),this.formatString=u,this.displayedGoal.valuesFormatString=u,this.formatGoalValues(),this.updateCurrentGoalValueTypeSelection({type:0},1),[2]})})}),[2]})})},o.prototype.getGoalTargets=function(){var t,i,n=this;return this.displayedGoal.isNew||this.targets?i=(0,re.of)(null!==(t=this.targets)&&void 0!==t?t:[]):(this.scorecardService.expandGoalValues(this.displayedGoal.id,!1),i=this.scorecardService.getGoal(this.displayedGoal.id).pipe((0,Rt.h)(function(a){return a.isExpanded}),(0,xe.U)(function(a){var l;return null!==(l=a.goalValues)&&void 0!==l?l:[]}),(0,xe.U)(function(a){return a.filter(function(l){return!_.isNil(l.target)})}))),i.pipe((0,xe.U)(function(a){return(0,b.ZP)(a,function(l){if(!_.isNil(n.targetCount)&&n.targetCount<=1){M.fF.assert(function(){return l.length<=1},"Inline target editor should only be enabled if there's at most one target!");var c=l.find(function(u){return new Date(u.timestamp).getTime()===new Date(n.currentTarget.timestamp).getTime()});c?c.target=n.currentTarget.target:l.push(n.currentTarget)}})}),(0,xe.U)(function(a){return(0,b.ZP)(a,function(l){l.sort(function(c,u){return new Date(c.timestamp).getTime()-new Date(u.timestamp).getTime()})})}))},o.prototype.getGoalValues=function(){var t,i,n=this;return this.displayedGoal.isNew||this.values?i=(0,re.of)(null!==(t=this.values)&&void 0!==t?t:[]):(this.scorecardService.expandGoalValues(this.displayedGoal.id,!1),i=this.scorecardService.getGoal(this.displayedGoal.id).pipe((0,Rt.h)(function(a){return a.isExpanded}),(0,xe.U)(function(a){var l;return null!==(l=a.goalValues)&&void 0!==l?l:[]}),(0,xe.U)(function(a){return a.filter(function(l){return!_.isNil(l.value)})}))),i.pipe((0,xe.U)(function(a){return(0,b.ZP)(a,function(l){var c=l.find(function(u){return new Date(u.timestamp).getTime()===new Date(n.currentValue.timestamp).getTime()});c?c.value=n.currentValue.value:n.originalCurrentValue!==n.currentValue.value&&l.push(n.currentValue)})}),(0,xe.U)(function(a){return(0,b.ZP)(a,function(l){l.sort(function(c,u){return new Date(c.timestamp).getTime()-new Date(u.timestamp).getTime()})})}))},o.prototype.onMouseClick=function(n){var t,i,a,l,c,u,p,y,P=n?.target;return null!==(t=this.valueSelect)&&void 0!==t&&t.nativeElement.contains(P)?(this.focusedInput!==Nn.Value&&(this.focusedInput=Nn.Value,this.formatGoalValues()),void(this.overlayRef||this.openValueFormattingPane())):null!==(i=this.targetSelect)&&void 0!==i&&i.nativeElement.contains(P)?(this.focusedInput!==Nn.Target&&(this.focusedInput=Nn.Target,this.formatGoalValues()),void(this.overlayRef||this.openValueFormattingPane())):void(null!==(a=this.valueInput)&&void 0!==a&&a.nativeElement.contains(P)||null!==(l=this.targetInput)&&void 0!==l&&l.nativeElement.contains(P)||null!==(u=null===(c=this.valueFormatting)||void 0===c?void 0:c.nativeElement)&&void 0!==u&&u.contains(P)||P.classList.contains("mat-option-text")||P.classList.contains("pbi-menu-item")||null!==(p=this.valueInput)&&void 0!==p&&p.nativeElement.contains(document.activeElement)||null!==(y=this.targetInput)&&void 0!==y&&y.nativeElement.contains(document.activeElement)||(this.focusedInput!==Nn.None&&(this.focusedInput=Nn.None,this.formatGoalValues()),this.overlayRef&&(this.overlayRef.close(),this.overlayRef=null)))},o.prototype.selectCategoryList=function(n){var t;this.selectedCategoryListIndex=n,this.onCategoryListIdChanged.emit(null===(t=this.goalValueCategoryLists[this.selectedCategoryListIndex])||void 0===t?void 0:t.id),this.formatGoalValues()},Object.defineProperty(o.prototype,"valueSelected",{get:function(){return this.isCategoricalValue(this.currentValue.value)?this.currentValue.value:void 0},set:function(t){var i=this;this.currentValue=(0,S.pi)((0,S.pi)({},this.currentValue),{value:t}),this.currentValueChange.emit(this.currentValue),this.capabilities.supportMultipleValuesEditing&&this.values&&(this.values=(0,b.ZP)(this.values,function(a){var l=a.find(function(c){return new Date(c.timestamp).getTime()===new Date(i.currentValue.timestamp).getTime()});l?l.value=i.currentValue.value:a.push(i.currentValue)}),this.valuesChange.emit(this.values)),this.formatGoalValues()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"targetSelected",{get:function(){return this.isCategoricalValue(this.currentTarget.target)?this.currentTarget.target:void 0},set:function(t){var i=this,a=t;this.currentTarget=(0,S.pi)((0,S.pi)({},this.currentTarget),{target:a}),this.currentTargetChange.emit(this.currentTarget),this.capabilities.supportMultipleTargetsEditing&&this.targets&&(M.fF.assert(function(){return i.targetCount<=1&&i.targets.length<=1},"Inline target editor should only be enabled if there's at most one target!"),this.targets=[this.currentTarget],this.targetsChange.emit(this.targets)),this.formatGoalValues()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isCategoricalFormat",{get:function(){return this.formatString===ci.d.CategoricalFormatString},enumerable:!1,configurable:!0}),o.prototype.openValueFormattingPane=function(){var n=this.pbiOverlay.position().flexibleConnectedTo(this.elementRef.nativeElement).withPositions([(0,Ne.xe)(0,-this.PaddingFromComponentToEditor)]).withPush(!0).withGrowAfterOpen(!0);this.overlayRef=this.pbiOverlay.open({component:Fl.i,data:{id:this.GoalEditValueTooltipId,templateRef:this.valueFormattingTmpl},options:{positionStrategy:n,hasBackdrop:!1,disposeOnNavigation:!0},hasCaret:!1,focusElementOnClose:null,disableCloseOnEsc:!0,disableFocusTrapSetting:{disable:!0}}),this.overlayRef.componentRef.changeDetectorRef.detectChanges()},o.prototype.formatValue=function(n){var t,i;return this.formatString!==ci.d.CategoricalFormatString?this.formatValuePipe.transform(n,this.formatString,!0,this.formatNilReturn):this.isCategoricalValue(n)?null===(i=null===(t=this.goalValueCategoryLists[this.selectedCategoryListIndex])||void 0===t?void 0:t.categories[n])||void 0===i?void 0:i.displayName:void 0},o.prototype.formatGoalValues=function(){var n,t,i,a,l=this.focusedInput===Nn.Value&&this.capabilities.editCurrentValue,c=this.focusedInput===Nn.Target&&this.capabilities.editTargetValue;this.valueInputType=l?"number":"text",this.targetInputType=c?"number":"text",this.valueInputValue=l?null!==(t=null===(n=this.currentValue.value)||void 0===n?void 0:n.toString())&&void 0!==t?t:"":this.formatValue(this.currentValue.value),this.targetInputValue=c?null!==(a=null===(i=this.currentTarget.target)||void 0===i?void 0:i.toString())&&void 0!==a?a:"":this.formatValue(this.currentTarget.target),this.formattedValue="",this.focusedInput===Nn.Value&&(this.formattedValue=this.formatValue(this.currentValue.value)),this.focusedInput===Nn.Target&&(this.formattedValue=this.formatValue(this.currentTarget.target))},o.prototype.getDialogConfig=function(n){return(0,S.mG)(this,void 0,void 0,function(){var i,a;return(0,S.Jh)(this,function(c){switch(c.label){case 0:return i={data:{}},(a=1===n?this.displayedGoal.valueConnection:this.displayedGoal.targetConnection)&&(i.data.reportUrl=a.reportUrl,a.shouldClearGoalValues&&(i.data.banner={bannerType:2,iconName:"pbi-glyph-info",message:this.localizationService.get("Metric_Clear_Values_On_New_Connection_Warning")})),this.scorecardSettings?[4,this.scorecardSettings.settings.pipe((0,ue.q)(1)).toPromise()]:[2,i];case 1:return c.sent().alwaysMaximize&&(i.height="100%",i.width="100%",i.hideFullscreenToggle=!0),[2,i]}})})},o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(Mt._),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(fi.c),e.\u0275\u0275directiveInject(St.o),e.\u0275\u0275directiveInject(ri),e.\u0275\u0275directiveInject(Aa),e.\u0275\u0275directiveInject(xo.x),e.\u0275\u0275directiveInject(Ht),e.\u0275\u0275directiveInject(xs),e.\u0275\u0275directiveInject(Cn,8))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["goal-value-input"]],viewQuery:function(t,i){if(1&t&&(e.\u0275\u0275viewQuery(hu,5),e.\u0275\u0275viewQuery(fu,5),e.\u0275\u0275viewQuery(mu,5),e.\u0275\u0275viewQuery(vu,5),e.\u0275\u0275viewQuery(Cu,5,e.TemplateRef),e.\u0275\u0275viewQuery(_u,5)),2&t){var a=void 0;e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(i.valueInput=a.first),e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(i.valueSelect=a.first),e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(i.targetInput=a.first),e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(i.targetSelect=a.first),e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(i.valueFormattingTmpl=a.first),e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(i.valueFormatting=a.first)}},hostBindings:function(t,i){1&t&&e.\u0275\u0275listener("click",function(l){return i.onMouseClick(l)},!1,e.\u0275\u0275resolveDocument)},inputs:{displayedGoal:"displayedGoal",currentValue:"currentValue",capabilities:"capabilities",currentTarget:"currentTarget",targets:"targets",values:"values",goalStatuses:"goalStatuses"},outputs:{currentTargetChange:"currentTargetChange",currentValueChange:"currentValueChange",targetsChange:"targetsChange",valuesChange:"valuesChange",valueRollupsChange:"valueRollupsChange",targetRollupsChange:"targetRollupsChange",onCategoryListIdChanged:"onCategoryListIdChanged",onSave:"onSave",onConnectionChanged:"onConnectionChanged"},decls:24,vars:17,consts:[[1,"input-box-sm","right-padding","current"],[1,"value-input-title"],["localize","CurrentValue",1,"input-title"],["class","input-action-txt",4,"ngIf"],[1,"input"],["class","input-box right-margin",4,"ngIf","ngIfElse"],["selectCategoricalValue",""],[4,"ngIf"],[1,"input-box-sm","target"],[1,"target-input-title"],[1,"input-title"],["selectCategoricalTarget",""],["valueFormattingTmpl",""],[1,"input-action-txt"],[1,"link",3,"click"],[1,"input-box","right-margin"],["data-testid","current-value-input-box","step","any",3,"readonly","type","ngModel","focus","keyup.enter","ngModelChange"],["valueInput",""],["data-testid","select-categorical-value",1,"select-categorical-value",3,"disabled","ngModel","ngModelChange"],["valueSelect",""],["value","","selected","!valueSelected","hidden","!!valueSelected}}"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],[3,"canCustomizeStatus","goal","currentGoalValueTypeSelection","goalValueType","goalCapabilities","showGoalRollupsCoachmark","onCurrentSelection"],["localize","Logical_Or_Operator",4,"ngIf"],[1,"link",3,"localize","click"],["localize","Logical_Or_Operator"],["data-testid","target-value-input-box","step","any",3,"readonly","type","ngModel","pbiTooltipDisabled","pbiTooltipPosition","focus","keyup.enter","ngModelChange"],["targetInput",""],[1,"select-categorical-target",3,"disabled","ngModel","ngModelChange"],["targetSelect",""],["value","","selected","!targetSelected","hidden","!!targetSelected"],[3,"canCustomizeStatus","goal","hasMultipleTargets","currentGoalValueTypeSelection","goalValueType","goalCapabilities","onCurrentSelection"],["data-testid","value-formatting-box",1,"value-formatting-box"],["valueFormatting",""],[1,"result"],[1,"goals-value-formatting",3,"formatString","dataType","supportCategoricalValues","goalValueCategoryLists","selectedCategoryListIndex","launchCategoryListsEditPane","formatStringChange","onSelectedCategoryListChange"]],template:function(t,i){if(1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1),e.\u0275\u0275element(2,"div",2),e.\u0275\u0275template(3,yu,4,3,"div",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",4),e.\u0275\u0275template(5,bu,5,9,"div",5),e.\u0275\u0275template(6,Su,4,3,"ng-template",null,6,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(8,Mu,2,6,"div",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(9,xu,5,2,"div",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",8)(11,"div",9)(12,"div",10),e.\u0275\u0275text(13),e.\u0275\u0275pipe(14,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(15,Ou,4,3,"div",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"div",4),e.\u0275\u0275template(17,Tu,5,11,"div",5),e.\u0275\u0275template(18,ku,4,3,"ng-template",null,11,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(20,Du,2,6,"div",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(21,Fu,5,2,"div",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(22,Gu,5,7,"ng-template",null,12,e.\u0275\u0275templateRefExtractor)),2&t){var a=e.\u0275\u0275reference(7),l=e.\u0275\u0275reference(19);e.\u0275\u0275classProp("inner-input-box-with-rollups",i.capabilities.supportsRollup),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",i.capabilities.supportMultipleValuesEditing&&i.capabilities.editMultipleValues&&!i.capabilities.supportsRollup),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!i.isCategoricalFormat)("ngIfElse",a),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",i.capabilities.supportsRollup),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.capabilities.connectCurrentValueToData&&!i.capabilities.supportsRollup),e.\u0275\u0275advance(1),e.\u0275\u0275classProp("inner-input-box-with-rollups",i.capabilities.supportsRollup),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(14,15,i.capabilities.supportMultipleTargetsEditing?null!=i.displayedGoal.metadata&&i.displayedGoal.metadata.showFinalTarget?"Target_Final":"Target_Next":"Target")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",i.capabilities.supportMultipleTargetsEditing&&i.capabilities.editMultipleTargets&&!i.capabilities.supportsRollup),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!i.isCategoricalFormat)("ngIfElse",l),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",i.capabilities.supportsRollup),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.capabilities.connectTargetValueToData&&!i.capabilities.supportsRollup)}},dependencies:[U.NgForOf,U.NgIf,se.YN,se.Kr,se.Fj,se.EJ,se.JJ,se.On,jt.X,ci.d,mc,xt.F],styles:["[_nghost-%COMP%]{display:inline-flex}.inner-input-box-with-rollups[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:center}.right-padding[_ngcontent-%COMP%]{padding-right:8px}.right-margin[_ngcontent-%COMP%]{margin-right:4px}.select-categorical-value[_ngcontent-%COMP%], .select-categorical-target[_ngcontent-%COMP%]{width:100%;height:32px}.value-input-title[_ngcontent-%COMP%], .target-input-title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.edit-targets-title[_ngcontent-%COMP%]{padding-top:9px;padding-bottom:4px}.pbi-text-field-error-message[_ngcontent-%COMP%]{fill:var(--fluent-theme-error-dark-color, #A80000);color:var(--fluent-theme-error-dark-color, #A80000)}  #goal-edit-value-formatting{background-color:var(--fluent-theme-neutral-lighter-alt-color, #FAF9F8)}  #goal-edit-value-formatting .value-formatting-box .result{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);color:var(--gray-180, #252423);line-height:20px;height:20px;padding:12px 12px 8px;border-bottom:1px solid var(--fluent-theme-neutral-tertiary-alt-color, #C8C6C4)}  #goal-edit-value-formatting .value-formatting-box mat-select{height:28px;border:1px solid var(--gray-110, #8A8886);border-radius:2px}  #goal-edit-value-formatting .value-formatting-box mat-select .mat-select-value{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);color:var(--fluent-theme-neutral-primary-color, #323130);line-height:20px}  #goal-edit-value-formatting .value-formatting-box mat-select .mat-select-arrow{color:var(--gray-140, #484644);padding-right:14px}  #goal-edit-value-formatting .value-formatting-box num-up-down .inputRange{height:28px;border:1px solid var(--gray-110, #8A8886);border-radius:2px}  #goal-edit-value-formatting .value-formatting-box num-up-down .inputRange .inputUpDown{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);color:var(--fluent-theme-neutral-primary-color, #323130);line-height:20px}  #goal-edit-value-formatting .value-formatting-box num-up-down label{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);line-height:20px}  #goal-edit-value-formatting .value-formatting-box .valueFormatterToggleButtonsGroup .btn{background-color:transparent;border:none}  #goal-edit-value-formatting .value-formatting-box .valueFormatterToggleButtonsGroup .btn:hover{background-color:var(--fluent-theme-neutral-quarter-alt-color, #E1DFDD)}",".cell[_ngcontent-%COMP%]{border:none;box-sizing:border-box}.cell-indent[_ngcontent-%COMP%]{width:36px}.cell-left-edge[_ngcontent-%COMP%]{border-top-left-radius:4px;border-bottom-left-radius:4px}.cell-right-edge[_ngcontent-%COMP%]{border-top-right-radius:4px;border-bottom-right-radius:4px}.cell-box[_ngcontent-%COMP%]{display:flex;height:100%}.cell-box[_ngcontent-%COMP%]   .color-box[_ngcontent-%COMP%]{min-width:6px;width:6px;border-top-left-radius:4px;border-bottom-left-radius:4px}[_nghost-%COMP%]   td[_ngcontent-%COMP%]{height:100px}[_nghost-%COMP%]   .select-checkmark[_ngcontent-%COMP%]{margin-right:15px}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]{background-color:var(--scorecard-tableEditRowBackgroundColor);color:var(--scorecard-tableEditRowForegroundColor);border-top:1px solid var(--fluent-theme-neutral-light-color, #EDEBE9);border-bottom:1px solid var(--fluent-theme-neutral-light-color, #EDEBE9)}[_nghost-%COMP%]   .cell.cell-right-edge[_ngcontent-%COMP%]{border-right:1px solid var(--fluent-theme-neutral-light-color, #EDEBE9)}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]   .cell-box-with-rollups[_ngcontent-%COMP%]   .edit-row-content[_ngcontent-%COMP%]{padding-left:12px;padding-right:12px}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]   .cell-box-with-rollups[_ngcontent-%COMP%]   goal-value-input[_ngcontent-%COMP%]{flex:none;max-width:none;min-width:392px}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]   .cell-box-with-rollups[_ngcontent-%COMP%]   .inner-input-box-with-rollups[_ngcontent-%COMP%]{max-width:none}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]   .cell-box-with-rollups[_ngcontent-%COMP%]   .input-box-with-rollups[_ngcontent-%COMP%]{width:104px;max-width:104px;min-width:auto}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]   .cell-box-with-rollups[_ngcontent-%COMP%]   .input-box-with-rollups[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:4px 6px}[_nghost-%COMP%]:hover   .select-checkmark[_ngcontent-%COMP%], [_nghost-%COMP%]   .select-checkmark.box-checked[_ngcontent-%COMP%]{visibility:visible}[_nghost-%COMP%]   .checkmark-td[_ngcontent-%COMP%]{width:35px;max-width:35px}[_nghost-%COMP%]   .checkmark-td.bulk-editing-off[_ngcontent-%COMP%]{width:0px;max-width:0px}[_nghost-%COMP%]   .select-checkmark[_ngcontent-%COMP%]{visibility:hidden;margin-right:15px}[_nghost-%COMP%]   .select-checkmark[_ngcontent-%COMP%]     pbi-checkbox{margin-bottom:0}[_nghost-%COMP%]   .input-title[_ngcontent-%COMP%]{font-size:var(--lg-font-size, 16px);font-weight:var(--font-weight-semi-bold, 600);padding-top:9px;padding-bottom:4px}[_nghost-%COMP%]   .input-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{vertical-align:middle;padding:0}[_nghost-%COMP%]   .input-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{cursor:pointer}[_nghost-%COMP%]   .edit-row-content[_ngcontent-%COMP%]{display:flex;flex:1;padding-left:20px;padding-right:20px;width:1000px;min-width:1000px}[_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);height:32px;padding:6px 8px;box-sizing:border-box;color:var(--scorecard-tableInputForegroundColor);background:var(--scorecard-tableInputBackgroundColor);border:1px solid var(--gray-110, #8A8886);border-radius:2px}[_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{filter:brightness(90%)}[_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:invalid{border:2px solid var(--fluent-theme-error-dark-alt-color, #D83B01);outline-color:var(--fluent-theme-error-dark-alt-color, #D83B01)}[_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   input[readonly][_ngcontent-%COMP%]{filter:brightness(90%)}[_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-input-placeholder, [_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:-ms-input-placeholder, [_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::placeholder{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);color:var(--scorecard-tableInputForegroundColor)}[_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{padding:0;margin:0}[_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-outer-spin-button, [_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}[_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}[_nghost-%COMP%]   .right-padding[_ngcontent-%COMP%]{padding-right:8px}[_nghost-%COMP%]   .input-action-txt[_ngcontent-%COMP%]{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);color:var(--scorecard-tableEditRowForegroundColor);padding-top:4px}[_nghost-%COMP%]   .input-action-txt[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{color:var(--scorecard-tableRowLinkColor);cursor:pointer;text-decoration:none;background-color:transparent;border:none;padding:0}[_nghost-%COMP%]   .input-action-txt[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]:hover{color:var(--fluent-theme-link-darker-color, #005A9E)}[_nghost-%COMP%]   .input-action-txt[_ngcontent-%COMP%]   .link.inactive[_ngcontent-%COMP%]{color:var(--fluent-theme-neutral-tertia-color, #A19F9D);pointer-events:none}[_nghost-%COMP%]   .divider[_ngcontent-%COMP%]{padding-top:8px;padding-bottom:8px}[_nghost-%COMP%]   .divider[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:1px;height:100%;background-color:var(--gray-80, #B3B0AD);margin:0 12px}[_nghost-%COMP%]   .width-override[_ngcontent-%COMP%]{width:24px}[_nghost-%COMP%]     .mat-form-field{background:var(--scorecard-tableInputBackgroundColor)!important}[_nghost-%COMP%]     emails-list-modern.disabled .mat-form-field{filter:brightness(95%)}[_nghost-%COMP%]   .goal-owners-input[_ngcontent-%COMP%]{padding-bottom:9px}[_nghost-%COMP%]   goal-value-input[_ngcontent-%COMP%]{flex:1 0 260px;max-width:400px}[_nghost-%COMP%]   .input-box-xs[_ngcontent-%COMP%]{flex:1 1 100px;max-width:140px;min-width:110px}[_nghost-%COMP%]   .input-box-sm[_ngcontent-%COMP%]{flex:1 1 100px;max-width:200px;min-width:140px}[_nghost-%COMP%]   .input-box-md[_ngcontent-%COMP%]{flex:1 1 200px;max-width:300px;min-width:130px}[_nghost-%COMP%]   .input-box-lg[_ngcontent-%COMP%]{flex:1 1 250px;min-width:150px}[_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),o}(),vc="PBI.EmailsList.PasteInfo",Vu=ge.cx[vc]=(0,ge.b1)(vc),vn=T(93247),Na=T(90341),Cc=T(76920),yo=T(37419),Xt=T(48138),Tn=T(4437),qs=T(10519),rr=T(63057),Ur=T(51193),_c=T(94130),Ru=T(77445),yc=T(60733),bc=new e.InjectionToken("MatChipRemove"),wc=new e.InjectionToken("MatChipAvatar"),Sc=new e.InjectionToken("MatChipTrailingIcon"),Nu=(0,Xt.sb)((0,Xt.pj)((0,Xt.Kr)(function(n){this._elementRef=n}),"primary"),-1);(za=function(){}).\u0275fac=function(n){return new(n||za)},za.\u0275dir=e.\u0275\u0275defineDirective({type:za,selectors:[["mat-chip-avatar"],["","matChipAvatar",""]],hostAttrs:[1,"mat-chip-avatar"],features:[e.\u0275\u0275ProvidersFeature([{provide:wc,useExisting:za}])]});(Ha=function(){}).\u0275fac=function(n){return new(n||Ha)},Ha.\u0275dir=e.\u0275\u0275defineDirective({type:Ha,selectors:[["mat-chip-trailing-icon"],["","matChipTrailingIcon",""]],hostAttrs:[1,"mat-chip-trailing-icon"],features:[e.\u0275\u0275ProvidersFeature([{provide:Sc,useExisting:Ha}])]});var Wl=function(o){function n(i,a,l,c,u,p,y,P){var x;return(x=o.call(this,i)||this)._ngZone=a,x._changeDetectorRef=u,x._hasFocus=!1,x.chipListSelectable=!0,x._chipListMultiple=!1,x._chipListDisabled=!1,x.role="option",x._selected=!1,x._selectable=!0,x._disabled=!1,x._removable=!0,x._onFocus=new Ae.xQ,x._onBlur=new Ae.xQ,x.selectionChange=new e.EventEmitter,x.destroyed=new e.EventEmitter,x.removed=new e.EventEmitter,x._addHostClassName(),x._chipRippleTarget=p.createElement("div"),x._chipRippleTarget.classList.add("mat-chip-ripple"),x._elementRef.nativeElement.appendChild(x._chipRippleTarget),x._chipRipple=new Xt.IR((0,Cc.Z)(x),a,x._chipRippleTarget,l),x._chipRipple.setupTriggerEvents(i),x.rippleConfig=c||{},x._animationsDisabled="NoopAnimations"===y,x.tabIndex=null!=P&&parseInt(P)||-1,x}(0,yo.Z)(n,o);var t=n.prototype;return t._addHostClassName=function(){var a="mat-basic-chip",l=this._elementRef.nativeElement;l.hasAttribute(a)||l.tagName.toLowerCase()===a?l.classList.add(a):l.classList.add("mat-standard-chip")},t.ngOnDestroy=function(){this.destroyed.emit({chip:this}),this._chipRipple._removeTriggerEvents()},t.select=function(){this._selected||(this._selected=!0,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())},t.deselect=function(){this._selected&&(this._selected=!1,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())},t.selectViaInteraction=function(){this._selected||(this._selected=!0,this._dispatchSelectionChange(!0),this._changeDetectorRef.markForCheck())},t.toggleSelected=function(a){return void 0===a&&(a=!1),this._selected=!this.selected,this._dispatchSelectionChange(a),this._changeDetectorRef.markForCheck(),this.selected},t.focus=function(){this._hasFocus||(this._elementRef.nativeElement.focus(),this._onFocus.next({chip:this})),this._hasFocus=!0},t.remove=function(){this.removable&&this.removed.emit({chip:this})},t._handleClick=function(a){this.disabled&&a.preventDefault()},t._handleKeydown=function(a){if(!this.disabled)switch(a.keyCode){case vn.yY:case vn.ZH:this.remove(),a.preventDefault();break;case vn.L_:this.selectable&&this.toggleSelected(!0),a.preventDefault()}},t._blur=function(){var a=this;this._ngZone.onStable.pipe((0,ue.q)(1)).subscribe(function(){a._ngZone.run(function(){a._hasFocus=!1,a._onBlur.next({chip:a})})})},t._dispatchSelectionChange=function(a){void 0===a&&(a=!1),this.selectionChange.emit({source:this,isUserInput:a,selected:this._selected})},(0,Na.Z)(n,[{key:"rippleDisabled",get:function(){return this.disabled||this.disableRipple||this._animationsDisabled||!!this.rippleConfig.disabled}},{key:"selected",get:function(){return this._selected},set:function(a){var l=(0,Tn.Ig)(a);l!==this._selected&&(this._selected=l,this._dispatchSelectionChange())}},{key:"value",get:function(){return void 0!==this._value?this._value:this._elementRef.nativeElement.textContent},set:function(a){this._value=a}},{key:"selectable",get:function(){return this._selectable&&this.chipListSelectable},set:function(a){this._selectable=(0,Tn.Ig)(a)}},{key:"disabled",get:function(){return this._chipListDisabled||this._disabled},set:function(a){this._disabled=(0,Tn.Ig)(a)}},{key:"removable",get:function(){return this._removable},set:function(a){this._removable=(0,Tn.Ig)(a)}},{key:"ariaSelected",get:function(){return this.selectable&&(this._chipListMultiple||this.selected)?this.selected.toString():null}}]),n}(Nu);(Ul=Wl).\u0275fac=function(n){return new(n||Ul)(e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(e.NgZone),e.\u0275\u0275directiveInject(qs.t4),e.\u0275\u0275directiveInject(Xt.Y2,8),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(U.DOCUMENT),e.\u0275\u0275directiveInject(e.ANIMATION_MODULE_TYPE,8),e.\u0275\u0275injectAttribute("tabindex"))},Ul.\u0275dir=e.\u0275\u0275defineDirective({type:Ul,selectors:[["mat-basic-chip"],["","mat-basic-chip",""],["mat-chip"],["","mat-chip",""]],contentQueries:function(n,t,i){var a;1&n&&(e.\u0275\u0275contentQuery(i,wc,5),e.\u0275\u0275contentQuery(i,Sc,5),e.\u0275\u0275contentQuery(i,bc,5)),2&n&&(e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(t.avatar=a.first),e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(t.trailingIcon=a.first),e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(t.removeIcon=a.first))},hostAttrs:[1,"mat-chip","mat-focus-indicator"],hostVars:15,hostBindings:function(n,t){1&n&&e.\u0275\u0275listener("click",function(a){return t._handleClick(a)})("keydown",function(a){return t._handleKeydown(a)})("focus",function(){return t.focus()})("blur",function(){return t._blur()}),2&n&&(e.\u0275\u0275attribute("tabindex",t.disabled?null:t.tabIndex)("role",t.role)("disabled",t.disabled||null)("aria-disabled",t.disabled.toString())("aria-selected",t.ariaSelected),e.\u0275\u0275classProp("mat-chip-selected",t.selected)("mat-chip-with-avatar",t.avatar)("mat-chip-with-trailing-icon",t.trailingIcon||t.removeIcon)("mat-chip-disabled",t.disabled)("_mat-animation-noopable",t._animationsDisabled))},inputs:{color:"color",disableRipple:"disableRipple",tabIndex:"tabIndex",role:"role",selected:"selected",value:"value",selectable:"selectable",disabled:"disabled",removable:"removable"},outputs:{selectionChange:"selectionChange",destroyed:"destroyed",removed:"removed"},exportAs:["matChip"],features:[e.\u0275\u0275InheritDefinitionFeature]});var Zs=function(){function o(t,i){this._parentChip=t,"BUTTON"===i.nativeElement.nodeName&&i.nativeElement.setAttribute("type","button")}return o.prototype._handleClick=function(i){var a=this._parentChip;a.removable&&!a.disabled&&a.remove(),i.stopPropagation(),i.preventDefault()},o}();(Ba=Zs).\u0275fac=function(n){return new(n||Ba)(e.\u0275\u0275directiveInject(Wl),e.\u0275\u0275directiveInject(e.ElementRef))},Ba.\u0275dir=e.\u0275\u0275defineDirective({type:Ba,selectors:[["","matChipRemove",""]],hostAttrs:[1,"mat-chip-remove","mat-chip-trailing-icon"],hostBindings:function(n,t){1&n&&e.\u0275\u0275listener("click",function(a){return t._handleClick(a)})},features:[e.\u0275\u0275ProvidersFeature([{provide:bc,useExisting:Ba}])]});var xc=new e.InjectionToken("mat-chips-default-options"),zu=(0,Xt.FD)(function(){return function(n,t,i,a){this._defaultErrorStateMatcher=n,this._parentForm=t,this._parentFormGroup=i,this.ngControl=a,this.stateChanges=new Ae.xQ}}()),Hu=0,Bu=function(n,t){this.source=n,this.value=t},Ys=function(o){function n(i,a,l,c,u,p,y){var P;return(P=o.call(this,p,c,u,y)||this)._elementRef=i,P._changeDetectorRef=a,P._dir=l,P.controlType="mat-chip-list",P._lastDestroyedChipIndex=null,P._destroyed=new Ae.xQ,P._uid="mat-chip-list-"+Hu++,P._tabIndex=0,P._userTabIndex=null,P._onTouched=function(){},P._onChange=function(){},P._multiple=!1,P._compareWith=function(x,N){return x===N},P._disabled=!1,P.ariaOrientation="horizontal",P._selectable=!0,P.change=new e.EventEmitter,P.valueChange=new e.EventEmitter,P.ngControl&&(P.ngControl.valueAccessor=(0,Cc.Z)(P)),P}(0,yo.Z)(n,o);var t=n.prototype;return t.ngAfterContentInit=function(){var a=this;this._keyManager=new Ur.Em(this.chips).withWrap().withVerticalOrientation().withHomeAndEnd().withHorizontalOrientation(this._dir?this._dir.value:"ltr"),this._dir&&this._dir.change.pipe((0,be.R)(this._destroyed)).subscribe(function(l){return a._keyManager.withHorizontalOrientation(l)}),this._keyManager.tabOut.subscribe(function(){return a._allowFocusEscape()}),this.chips.changes.pipe((0,Si.O)(null),(0,be.R)(this._destroyed)).subscribe(function(){(a.disabled||!a.selectable)&&Promise.resolve().then(function(){a._syncChipsState()}),a._resetChips(),a._initializeSelection(),a._updateTabIndex(),a._updateFocusForDestroyedChips(),a.stateChanges.next()})},t.ngOnInit=function(){this._selectionModel=new Ru.Ov(this.multiple,void 0,!1),this.stateChanges.next()},t.ngDoCheck=function(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==this._disabled&&(this.disabled=!!this.ngControl.disabled))},t.ngOnDestroy=function(){var a;null==(a=this._keyManager)||a.destroy(),this._destroyed.next(),this._destroyed.complete(),this.stateChanges.complete(),this._dropSubscriptions()},t.registerInput=function(a){this._chipInput=a,this._elementRef.nativeElement.setAttribute("data-mat-chip-input",a.id)},t.setDescribedByIds=function(a){a.length?this._elementRef.nativeElement.setAttribute("aria-describedby",a.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")},t.writeValue=function(a){this.chips&&this._setSelectionByValue(a,!1)},t.registerOnChange=function(a){this._onChange=a},t.registerOnTouched=function(a){this._onTouched=a},t.setDisabledState=function(a){this.disabled=a,this.stateChanges.next()},t.onContainerClick=function(a){this._originatesFromChip(a)||this.focus()},t.focus=function(a){this.disabled||this._chipInput&&this._chipInput.focused||(this.chips.length>0?(this._keyManager.setFirstItemActive(),this.stateChanges.next()):(this._focusInput(a),this.stateChanges.next()))},t._focusInput=function(a){this._chipInput&&this._chipInput.focus(a)},t._keydown=function(a){var l=a.target;l&&l.classList.contains("mat-chip")&&(this._keyManager.onKeydown(a),this.stateChanges.next())},t._updateTabIndex=function(){this._tabIndex=this._userTabIndex||(0===this.chips.length?-1:0)},t._updateFocusForDestroyedChips=function(){if(null!=this._lastDestroyedChipIndex)if(this.chips.length){var a=Math.min(this._lastDestroyedChipIndex,this.chips.length-1);this._keyManager.setActiveItem(a)}else this.focus();this._lastDestroyedChipIndex=null},t._isValidIndex=function(a){return a>=0&&a<this.chips.length},t._setSelectionByValue=function(a,l){var c=this;if(void 0===l&&(l=!0),this._clearSelection(),this.chips.forEach(function(p){return p.deselect()}),Array.isArray(a))a.forEach(function(p){return c._selectValue(p,l)}),this._sortValues();else{var u=this._selectValue(a,l);u&&l&&this._keyManager.setActiveItem(u)}},t._selectValue=function(a,l){var c=this;void 0===l&&(l=!0);var u=this.chips.find(function(p){return null!=p.value&&c._compareWith(p.value,a)});return u&&(l?u.selectViaInteraction():u.select(),this._selectionModel.select(u)),u},t._initializeSelection=function(){var a=this;Promise.resolve().then(function(){(a.ngControl||a._value)&&(a._setSelectionByValue(a.ngControl?a.ngControl.value:a._value,!1),a.stateChanges.next())})},t._clearSelection=function(a){this._selectionModel.clear(),this.chips.forEach(function(l){l!==a&&l.deselect()}),this.stateChanges.next()},t._sortValues=function(){var a=this;this._multiple&&(this._selectionModel.clear(),this.chips.forEach(function(l){l.selected&&a._selectionModel.select(l)}),this.stateChanges.next())},t._propagateChanges=function(a){var l;l=Array.isArray(this.selected)?this.selected.map(function(c){return c.value}):this.selected?this.selected.value:a,this._value=l,this.change.emit(new Bu(this,l)),this.valueChange.emit(l),this._onChange(l),this._changeDetectorRef.markForCheck()},t._blur=function(){var a=this;this._hasFocusedChip()||this._keyManager.setActiveItem(-1),this.disabled||(this._chipInput?setTimeout(function(){a.focused||a._markAsTouched()}):this._markAsTouched())},t._markAsTouched=function(){this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next()},t._allowFocusEscape=function(){var a=this;-1!==this._tabIndex&&(this._tabIndex=-1,setTimeout(function(){a._tabIndex=a._userTabIndex||0,a._changeDetectorRef.markForCheck()}))},t._resetChips=function(){this._dropSubscriptions(),this._listenToChipsFocus(),this._listenToChipsSelection(),this._listenToChipsRemoved()},t._dropSubscriptions=function(){this._chipFocusSubscription&&(this._chipFocusSubscription.unsubscribe(),this._chipFocusSubscription=null),this._chipBlurSubscription&&(this._chipBlurSubscription.unsubscribe(),this._chipBlurSubscription=null),this._chipSelectionSubscription&&(this._chipSelectionSubscription.unsubscribe(),this._chipSelectionSubscription=null),this._chipRemoveSubscription&&(this._chipRemoveSubscription.unsubscribe(),this._chipRemoveSubscription=null)},t._listenToChipsSelection=function(){var a=this;this._chipSelectionSubscription=this.chipSelectionChanges.subscribe(function(l){l.source.selected?a._selectionModel.select(l.source):a._selectionModel.deselect(l.source),a.multiple||a.chips.forEach(function(c){!a._selectionModel.isSelected(c)&&c.selected&&c.deselect()}),l.isUserInput&&a._propagateChanges()})},t._listenToChipsFocus=function(){var a=this;this._chipFocusSubscription=this.chipFocusChanges.subscribe(function(l){var c=a.chips.toArray().indexOf(l.chip);a._isValidIndex(c)&&a._keyManager.updateActiveItem(c),a.stateChanges.next()}),this._chipBlurSubscription=this.chipBlurChanges.subscribe(function(){a._blur(),a.stateChanges.next()})},t._listenToChipsRemoved=function(){var a=this;this._chipRemoveSubscription=this.chipRemoveChanges.subscribe(function(l){var c=l.chip,u=a.chips.toArray().indexOf(l.chip);a._isValidIndex(u)&&c._hasFocus&&(a._lastDestroyedChipIndex=u)})},t._originatesFromChip=function(a){for(var l=a.target;l&&l!==this._elementRef.nativeElement;){if(l.classList.contains("mat-chip"))return!0;l=l.parentElement}return!1},t._hasFocusedChip=function(){return this.chips&&this.chips.some(function(a){return a._hasFocus})},t._syncChipsState=function(){var a=this;this.chips&&this.chips.forEach(function(l){l._chipListDisabled=a._disabled,l._chipListMultiple=a.multiple,l.chipListSelectable=a._selectable})},(0,Na.Z)(n,[{key:"selected",get:function(){var a,l;return this.multiple?(null==(a=this._selectionModel)?void 0:a.selected)||[]:null==(l=this._selectionModel)?void 0:l.selected[0]}},{key:"role",get:function(){return this._explicitRole?this._explicitRole:this.empty?null:"listbox"},set:function(a){this._explicitRole=a}},{key:"multiple",get:function(){return this._multiple},set:function(a){this._multiple=(0,Tn.Ig)(a),this._syncChipsState()}},{key:"compareWith",get:function(){return this._compareWith},set:function(a){this._compareWith=a,this._selectionModel&&this._initializeSelection()}},{key:"value",get:function(){return this._value},set:function(a){this.writeValue(a),this._value=a}},{key:"id",get:function(){return this._chipInput?this._chipInput.id:this._uid}},{key:"required",get:function(){var a,l,c;return null!=(a=null!=(l=this._required)?l:null==(c=this.ngControl)||null==(c=c.control)?void 0:c.hasValidator(se.kI.required))&&a},set:function(a){this._required=(0,Tn.Ig)(a),this.stateChanges.next()}},{key:"placeholder",get:function(){return this._chipInput?this._chipInput.placeholder:this._placeholder},set:function(a){this._placeholder=a,this.stateChanges.next()}},{key:"focused",get:function(){return this._chipInput&&this._chipInput.focused||this._hasFocusedChip()}},{key:"empty",get:function(){return(!this._chipInput||this._chipInput.empty)&&(!this.chips||0===this.chips.length)}},{key:"shouldLabelFloat",get:function(){return!this.empty||this.focused}},{key:"disabled",get:function(){return this.ngControl?!!this.ngControl.disabled:this._disabled},set:function(a){this._disabled=(0,Tn.Ig)(a),this._syncChipsState()}},{key:"selectable",get:function(){return this._selectable},set:function(a){this._selectable=(0,Tn.Ig)(a),this._syncChipsState()}},{key:"tabIndex",set:function(a){this._userTabIndex=a,this._tabIndex=a}},{key:"chipSelectionChanges",get:function(){return rr.T.apply(void 0,this.chips.map(function(a){return a.selectionChange}))}},{key:"chipFocusChanges",get:function(){return rr.T.apply(void 0,this.chips.map(function(a){return a._onFocus}))}},{key:"chipBlurChanges",get:function(){return rr.T.apply(void 0,this.chips.map(function(a){return a._onBlur}))}},{key:"chipRemoveChanges",get:function(){return rr.T.apply(void 0,this.chips.map(function(a){return a.destroyed}))}}]),n}(zu);(Ua=Ys).\u0275fac=function(n){return new(n||Ua)(e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(_c.Is,8),e.\u0275\u0275directiveInject(se.F,8),e.\u0275\u0275directiveInject(se.sg,8),e.\u0275\u0275directiveInject(Xt.rD),e.\u0275\u0275directiveInject(se.a5,10))},Ua.\u0275cmp=e.\u0275\u0275defineComponent({type:Ua,selectors:[["mat-chip-list"]],contentQueries:function(n,t,i){var a;1&n&&e.\u0275\u0275contentQuery(i,Wl,5),2&n&&e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(t.chips=a)},hostAttrs:["ngSkipHydration","",1,"mat-chip-list"],hostVars:14,hostBindings:function(n,t){1&n&&e.\u0275\u0275listener("focus",function(){return t.focus()})("blur",function(){return t._blur()})("keydown",function(a){return t._keydown(a)}),2&n&&(e.\u0275\u0275hostProperty("id",t._uid),e.\u0275\u0275attribute("tabindex",t.disabled?null:t._tabIndex)("aria-required",t.role?t.required:null)("aria-disabled",t.disabled.toString())("aria-invalid",t.errorState)("aria-multiselectable",t.multiple)("role",t.role)("aria-orientation",t.ariaOrientation),e.\u0275\u0275classProp("mat-chip-list-disabled",t.disabled)("mat-chip-list-invalid",t.errorState)("mat-chip-list-required",t.required))},inputs:{role:"role",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],errorStateMatcher:"errorStateMatcher",multiple:"multiple",compareWith:"compareWith",value:"value",required:"required",placeholder:"placeholder",disabled:"disabled",ariaOrientation:["aria-orientation","ariaOrientation"],selectable:"selectable",tabIndex:"tabIndex"},outputs:{change:"change",valueChange:"valueChange"},exportAs:["matChipList"],features:[e.\u0275\u0275ProvidersFeature([{provide:yc.Eo,useExisting:Ua}]),e.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:["*"],decls:2,vars:0,consts:[[1,"mat-chip-list-wrapper"]],template:function(n,t){1&n&&(e.\u0275\u0275projectionDef(),e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275projection(1),e.\u0275\u0275elementEnd())},styles:['.mat-chip{position:relative;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0);border:none;-webkit-appearance:none;-moz-appearance:none}.mat-chip::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-standard-chip{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:inline-flex;padding:7px 12px;border-radius:16px;align-items:center;cursor:default;min-height:32px;height:1px}.mat-standard-chip._mat-animation-noopable{transition:none !important;animation:none !important}.mat-standard-chip .mat-chip-remove{border:none;-webkit-appearance:none;-moz-appearance:none;padding:0;background:none}.mat-standard-chip .mat-chip-remove.mat-icon,.mat-standard-chip .mat-chip-remove .mat-icon{width:18px;height:18px;font-size:18px}.mat-standard-chip::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;opacity:0;content:"";pointer-events:none;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-standard-chip:hover::after{opacity:.12}.mat-standard-chip:focus{outline:none}.mat-standard-chip:focus::after{opacity:.16}.cdk-high-contrast-active .mat-standard-chip{outline:solid 1px}.cdk-high-contrast-active .mat-standard-chip.mat-chip-selected{outline-width:3px}.mat-standard-chip.mat-chip-disabled::after{opacity:0}.mat-standard-chip.mat-chip-disabled .mat-chip-remove,.mat-standard-chip.mat-chip-disabled .mat-chip-trailing-icon{cursor:default}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar,.mat-standard-chip.mat-chip-with-avatar{padding-top:0;padding-bottom:0}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-right:8px;padding-left:0}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-left:8px;padding-right:0}.mat-standard-chip.mat-chip-with-trailing-icon{padding-top:7px;padding-bottom:7px;padding-right:8px;padding-left:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon{padding-left:8px;padding-right:12px}.mat-standard-chip.mat-chip-with-avatar{padding-left:0;padding-right:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-avatar{padding-right:0;padding-left:12px}.mat-standard-chip .mat-chip-avatar{width:24px;height:24px;margin-right:8px;margin-left:4px}[dir=rtl] .mat-standard-chip .mat-chip-avatar{margin-left:8px;margin-right:4px}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{width:18px;height:18px;cursor:pointer}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-standard-chip .mat-chip-remove,[dir=rtl] .mat-standard-chip .mat-chip-trailing-icon{margin-right:8px;margin-left:0}.mat-chip-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit;overflow:hidden;transform:translateZ(0)}.mat-chip-list-wrapper{display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;margin:-4px}.mat-chip-list-wrapper input.mat-input-element,.mat-chip-list-wrapper .mat-standard-chip{margin:4px}.mat-chip-list-stacked .mat-chip-list-wrapper{flex-direction:column;align-items:flex-start}.mat-chip-list-stacked .mat-chip-list-wrapper .mat-standard-chip{width:100%}.mat-chip-avatar{border-radius:50%;justify-content:center;align-items:center;display:flex;overflow:hidden;object-fit:cover}input.mat-chip-input{width:150px;margin:4px;flex:1 0 150px}'],encapsulation:2,changeDetection:0});var Uu=0,Ns=function(){function o(t,i){this._elementRef=t,this.focused=!1,this._addOnBlur=!1,this.chipEnd=new e.EventEmitter,this.placeholder="",this.id="mat-chip-list-input-"+Uu++,this._disabled=!1,this.inputElement=this._elementRef.nativeElement,this.separatorKeyCodes=i.separatorKeyCodes}var n=o.prototype;return n.ngOnChanges=function(){this._chipList.stateChanges.next()},n.ngOnDestroy=function(){this.chipEnd.complete()},n.ngAfterContentInit=function(){this._focusLastChipOnBackspace=this.empty},n._keydown=function(i){if(i){if(i.keyCode===vn.Mf&&!(0,vn.Vb)(i,"shiftKey")&&this._chipList._allowFocusEscape(),i.keyCode===vn.ZH&&this._focusLastChipOnBackspace)return this._chipList._keyManager.setLastItemActive(),void i.preventDefault();this._focusLastChipOnBackspace=!1}this._emitChipEnd(i)},n._keyup=function(i){!this._focusLastChipOnBackspace&&i.keyCode===vn.ZH&&this.empty&&(this._focusLastChipOnBackspace=!0,i.preventDefault())},n._blur=function(){this.addOnBlur&&this._emitChipEnd(),this.focused=!1,this._chipList.focused||this._chipList._blur(),this._chipList.stateChanges.next()},n._focus=function(){this.focused=!0,this._focusLastChipOnBackspace=this.empty,this._chipList.stateChanges.next()},n._emitChipEnd=function(i){!this.inputElement.value&&i&&this._chipList._keydown(i),(!i||this._isSeparatorKey(i))&&(this.chipEnd.emit({input:this.inputElement,value:this.inputElement.value,chipInput:this}),i?.preventDefault())},n._onInput=function(){this._chipList.stateChanges.next()},n.focus=function(i){this.inputElement.focus(i)},n.clear=function(){this.inputElement.value="",this._focusLastChipOnBackspace=!0},n._isSeparatorKey=function(i){return!(0,vn.Vb)(i)&&new Set(this.separatorKeyCodes).has(i.keyCode)},(0,Na.Z)(o,[{key:"chipList",set:function(i){i&&(this._chipList=i,this._chipList.registerInput(this))}},{key:"addOnBlur",get:function(){return this._addOnBlur},set:function(i){this._addOnBlur=(0,Tn.Ig)(i)}},{key:"disabled",get:function(){return this._disabled||this._chipList&&this._chipList.disabled},set:function(i){this._disabled=(0,Tn.Ig)(i)}},{key:"empty",get:function(){return!this.inputElement.value}}]),o}();(jl=Ns).\u0275fac=function(n){return new(n||jl)(e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(xc))},jl.\u0275dir=e.\u0275\u0275defineDirective({type:jl,selectors:[["input","matChipInputFor",""]],hostAttrs:[1,"mat-chip-input","mat-input-element"],hostVars:5,hostBindings:function(n,t){1&n&&e.\u0275\u0275listener("keydown",function(a){return t._keydown(a)})("keyup",function(a){return t._keyup(a)})("blur",function(){return t._blur()})("focus",function(){return t._focus()})("input",function(){return t._onInput()}),2&n&&(e.\u0275\u0275hostProperty("id",t.id),e.\u0275\u0275attribute("disabled",t.disabled||null)("placeholder",t.placeholder||null)("aria-invalid",t._chipList&&t._chipList.ngControl?t._chipList.ngControl.invalid:null)("aria-required",t._chipList&&t._chipList.required||null))},inputs:{chipList:["matChipInputFor","chipList"],addOnBlur:["matChipInputAddOnBlur","addOnBlur"],separatorKeyCodes:["matChipInputSeparatorKeyCodes","separatorKeyCodes"],placeholder:"placeholder",id:"id",disabled:"disabled"},outputs:{chipEnd:"matChipInputTokenEnd"},exportAs:["matChipInput","matChipInputFor"],features:[e.\u0275\u0275NgOnChangesFeature]});var Oc=function(){};(ja=Oc).\u0275fac=function(n){return new(n||ja)},ja.\u0275mod=e.\u0275\u0275defineNgModule({type:ja}),ja.\u0275inj=e.\u0275\u0275defineInjector({providers:[Xt.rD,{provide:xc,useValue:{separatorKeyCodes:[vn.K5]}}],imports:[Xt.BQ]});var $l,jr,Ql,$a,Jl,Qa,Ja,ju=T(73058),Wu=T(40133),$u=T(58417),Ks=T(82762),Qu=T(37272),Xu=T(69903),qu=T(6663),Zu=T(59822),Tc=T(15910),Yu=T(59055),Ku=T(629),ed=function(){function o(n,t,i){this.promiseFactory=n,this.telemetryService=t,this.httpService=i}return o.prototype.emailIsInVerifiedDomain=function(n){return(0,S.mG)(this,void 0,void 0,function(){var t,i;return(0,S.Jh)(this,function(l){switch(l.label){case 0:t=this.promiseFactory.defer(),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,this.getVerifiedDomains()];case 2:return i=l.sent(),t.resolve(this.verifyEmailInGivenVerifiedDomains(n,i)),[3,4];case 3:return l.sent(),t.reject(),[3,4];case 4:return[2,t.promise]}})})},o.prototype.getVerifiedDomains=function(){return(0,S.mG)(this,void 0,void 0,function(){var n,t,i,a,l,c;return(0,S.Jh)(this,function(p){switch(p.label){case 0:return this.verifiedDomainsPromise?[2,this.verifiedDomainsPromise]:[3,1];case 1:n=this.promiseFactory.defer(),t=this.telemetryService.startEvent(Yu.f8),i=this.httpService.powerbiRequestOptions(t.event,"TenantVerifiedDomains"),p.label=2;case 2:return p.trys.push([2,4,,5]),[4,this.httpService.get("powerbi/invitation/verifiedDomains",i)];case 3:return a=p.sent(),l={verifiedDomains:{},blockedDomains:{}},(c=a.data).verifiedDomains&&c.verifiedDomains.map(function(y){var P=y.toUpperCase();return l.verifiedDomains[P]=P,P}),c.blockedDomains&&c.blockedDomains.map(function(y){var P=y.toUpperCase();return l.blockedDomains[P]=P,P}),n.resolve(l),t.resolve(),[3,5];case 4:return p.sent(),n.reject(),[3,5];case 5:return this.verifiedDomainsPromise=n.promise,[2,this.verifiedDomainsPromise]}})})},o.prototype.verifyEmailInGivenVerifiedDomains=function(n,t){var i=n.split("@");return!(!t||!_.isEmpty(t.verifiedDomains))||i.length>1&&t&&!!t.verifiedDomains[i[1].toUpperCase()]},o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275inject(Io.t),e.\u0275\u0275inject(Gt.y0),e.\u0275\u0275inject(Ku.M))},o.\u0275prov=e.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac,providedIn:"root"}),o}(),td=T(62661),Wa=T(59051),ui=T(26124),Ec=T(34763),nd=T(48636),ec=T(59787),id=T(22760),od=["panel"];function rd(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",0,1),e.\u0275\u0275listener("@panelAnimation.done",function(c){e.\u0275\u0275restoreView(t);var u=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(u._animationDone.next(c))}),e.\u0275\u0275projection(2),e.\u0275\u0275elementEnd()}if(2&o){var i=n.id,a=e.\u0275\u0275nextContext();e.\u0275\u0275property("id",a.id)("ngClass",a._classList)("@panelAnimation",a.isOpen?"visible":"hidden"),e.\u0275\u0275attribute("aria-label",a.ariaLabel||null)("aria-labelledby",a._getPanelAriaLabelledby(i))}}var ld=(0,ui.X$)("panelAnimation",[(0,ui.SB)("void, hidden",(0,ui.oB)({opacity:0,transform:"scaleY(0.8)"})),(0,ui.eR)(":enter, hidden => visible",[(0,ui.ru)([(0,ui.jt)("0.03s linear",(0,ui.oB)({opacity:1})),(0,ui.jt)("0.12s cubic-bezier(0, 0, 0.2, 1)",(0,ui.oB)({transform:"scaleY(1)"}))])]),(0,ui.eR)(":leave, visible => hidden",[(0,ui.jt)("0.075s linear",(0,ui.oB)({opacity:0}))])]),sd=0,cd=function(n,t){this.source=n,this.option=t},ud=(0,Xt.Kr)(function(){return function(){}}()),kc=new e.InjectionToken("mat-autocomplete-default-options",{providedIn:"root",factory:function(){return{autoActiveFirstOption:!1,autoSelectActiveOption:!1,hideSingleSelectionIndicator:!1,requireSelection:!1}}}),tc=function(o){(0,yo.Z)(t,o);var n=t.prototype;function t(i,a,l,c){var u;return(u=o.call(this)||this)._changeDetectorRef=i,u._elementRef=a,u._defaults=l,u._activeOptionChanges=Ec.w.EMPTY,u.showPanel=!1,u._isOpen=!1,u.displayWith=null,u.optionSelected=new e.EventEmitter,u.opened=new e.EventEmitter,u.closed=new e.EventEmitter,u.optionActivated=new e.EventEmitter,u._classList={},u.id="mat-autocomplete-"+sd++,u.inertGroups=c?.SAFARI||!1,u._autoActiveFirstOption=!!l.autoActiveFirstOption,u._autoSelectActiveOption=!!l.autoSelectActiveOption,u._requireSelection=!!l.requireSelection,u}return n._setColor=function(a){this._color=a,this._setThemeClasses(this._classList)},n.ngAfterContentInit=function(){var a=this;this._keyManager=new Ur.s1(this.options).withWrap().skipPredicate(this._skipPredicate),this._activeOptionChanges=this._keyManager.change.subscribe(function(l){a.isOpen&&a.optionActivated.emit({source:a,option:a.options.toArray()[l]||null})}),this._setVisibility()},n.ngOnDestroy=function(){var a;null==(a=this._keyManager)||a.destroy(),this._activeOptionChanges.unsubscribe()},n._setScrollTop=function(a){this.panel&&(this.panel.nativeElement.scrollTop=a)},n._getScrollTop=function(){return this.panel?this.panel.nativeElement.scrollTop:0},n._setVisibility=function(){this.showPanel=!!this.options.length,this._setVisibilityClasses(this._classList),this._changeDetectorRef.markForCheck()},n._emitSelectEvent=function(a){var l=new cd(this,a);this.optionSelected.emit(l)},n._getPanelAriaLabelledby=function(a){return this.ariaLabel?null:this.ariaLabelledby?(a?a+" ":"")+this.ariaLabelledby:a},n._setVisibilityClasses=function(a){a[this._visibleClass]=this.showPanel,a[this._hiddenClass]=!this.showPanel},n._setThemeClasses=function(a){a["mat-primary"]="primary"===this._color,a["mat-warn"]="warn"===this._color,a["mat-accent"]="accent"===this._color},n._skipPredicate=function(a){return a.disabled},(0,Na.Z)(t,[{key:"isOpen",get:function(){return this._isOpen&&this.showPanel}},{key:"autoActiveFirstOption",get:function(){return this._autoActiveFirstOption},set:function(a){this._autoActiveFirstOption=(0,Tn.Ig)(a)}},{key:"autoSelectActiveOption",get:function(){return this._autoSelectActiveOption},set:function(a){this._autoSelectActiveOption=(0,Tn.Ig)(a)}},{key:"requireSelection",get:function(){return this._requireSelection},set:function(a){this._requireSelection=(0,Tn.Ig)(a)}},{key:"classList",set:function(a){this._classList=a&&a.length?(0,Tn.du)(a).reduce(function(l,c){return l[c]=!0,l},{}):{},this._setVisibilityClasses(this._classList),this._setThemeClasses(this._classList),this._elementRef.nativeElement.className=""}}]),t}(ud);($l=tc).\u0275fac=function(n){return new(n||$l)(e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(kc),e.\u0275\u0275directiveInject(qs.t4))},$l.\u0275dir=e.\u0275\u0275defineDirective({type:$l,viewQuery:function(n,t){var i;1&n&&(e.\u0275\u0275viewQuery(e.TemplateRef,7),e.\u0275\u0275viewQuery(od,5)),2&n&&(e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(t.template=i.first),e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(t.panel=i.first))},inputs:{ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],displayWith:"displayWith",autoActiveFirstOption:"autoActiveFirstOption",autoSelectActiveOption:"autoSelectActiveOption",requireSelection:"requireSelection",panelWidth:"panelWidth",classList:["class","classList"]},outputs:{optionSelected:"optionSelected",opened:"opened",closed:"closed",optionActivated:"optionActivated"},features:[e.\u0275\u0275InheritDefinitionFeature]});var pd=function(o){function n(){var i,a;return(a=o.apply(this,arguments)||this)._visibleClass="mat-mdc-autocomplete-visible",a._hiddenClass="mat-mdc-autocomplete-hidden",a._animationDone=new e.EventEmitter,a._hideSingleSelectionIndicator=null!=(i=a._defaults.hideSingleSelectionIndicator)&&i,a}(0,yo.Z)(n,o);var t=n.prototype;return t._syncParentProperties=function(){if(this.options)for(var l,a=(0,td.Z)(this.options);!(l=a()).done;)l.value._changeDetectorRef.markForCheck()},t.ngOnDestroy=function(){o.prototype.ngOnDestroy.call(this),this._animationDone.complete()},t._skipPredicate=function(a){return!1},(0,Na.Z)(n,[{key:"hideSingleSelectionIndicator",get:function(){return this._hideSingleSelectionIndicator},set:function(a){this._hideSingleSelectionIndicator=(0,Tn.Ig)(a),this._syncParentProperties()}}]),n}(tc);(jr=pd).\u0275fac=function(){var o;return function(t){return(o||(o=e.\u0275\u0275getInheritedFactory(jr)))(t||jr)}}(),jr.\u0275cmp=e.\u0275\u0275defineComponent({type:jr,selectors:[["mat-autocomplete"]],contentQueries:function(n,t,i){var a;1&n&&(e.\u0275\u0275contentQuery(i,Xt.K7,5),e.\u0275\u0275contentQuery(i,Xt.ey,5)),2&n&&(e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(t.optionGroups=a),e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(t.options=a))},hostAttrs:["ngSkipHydration","",1,"mat-mdc-autocomplete"],inputs:{disableRipple:"disableRipple",hideSingleSelectionIndicator:"hideSingleSelectionIndicator"},exportAs:["matAutocomplete"],features:[e.\u0275\u0275ProvidersFeature([{provide:Xt.HF,useExisting:jr}]),e.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:["*"],decls:1,vars:0,consts:[["role","listbox",1,"mat-mdc-autocomplete-panel","mdc-menu-surface","mdc-menu-surface--open",3,"id","ngClass"],["panel",""]],template:function(n,t){1&n&&(e.\u0275\u0275projectionDef(),e.\u0275\u0275template(0,rd,3,5,"ng-template"))},dependencies:[U.NgClass],styles:["div.mat-mdc-autocomplete-panel{box-shadow:0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12);width:100%;max-height:256px;visibility:hidden;transform-origin:center top;overflow:auto;padding:8px 0;border-radius:4px;box-sizing:border-box;position:static;background-color:var(--mat-autocomplete-background-color)}.cdk-high-contrast-active div.mat-mdc-autocomplete-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-autocomplete-panel-above) div.mat-mdc-autocomplete-panel{border-top-left-radius:0;border-top-right-radius:0}.mat-mdc-autocomplete-panel-above div.mat-mdc-autocomplete-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:center bottom}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-visible{visibility:visible}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-hidden{visibility:hidden}mat-autocomplete{display:none}"],encapsulation:2,data:{animation:[ld]},changeDetection:0});var nc=function(n){this.elementRef=n};(Ql=nc).\u0275fac=function(n){return new(n||Ql)(e.\u0275\u0275directiveInject(e.ElementRef))},Ql.\u0275dir=e.\u0275\u0275defineDirective({type:Ql});var gd=function(o){function n(){return o.apply(this,arguments)||this}return(0,yo.Z)(n,o),n}(nc);($a=gd).\u0275fac=function(){var o;return function(t){return(o||(o=e.\u0275\u0275getInheritedFactory($a)))(t||$a)}}(),$a.\u0275dir=e.\u0275\u0275defineDirective({type:$a,selectors:[["","matAutocompleteOrigin",""]],exportAs:["matAutocompleteOrigin"],features:[e.\u0275\u0275InheritDefinitionFeature]});var hd={provide:se.JU,useExisting:(0,e.forwardRef)(function(){return Ic}),multi:!0},ic=new e.InjectionToken("mat-autocomplete-scroll-strategy"),Dc={provide:ic,deps:[Wa.aV],useFactory:function(o){return function(){return o.scrollStrategies.reposition()}}},oc=function(){function o(t,i,a,l,c,u,p,y,P,x,N){var W=this;this._element=t,this._overlay=i,this._viewContainerRef=a,this._zone=l,this._changeDetectorRef=c,this._dir=p,this._formField=y,this._document=P,this._viewportRuler=x,this._defaults=N,this._componentDestroyed=!1,this._autocompleteDisabled=!1,this._manuallyFloatingLabel=!1,this._viewportSubscription=Ec.w.EMPTY,this._canOpenOnNextFocus=!0,this._closeKeyEventStream=new Ae.xQ,this._windowBlurHandler=function(){W._canOpenOnNextFocus=W._document.activeElement!==W._element.nativeElement||W.panelOpen},this._onChange=function(){},this._onTouched=function(){},this.position="auto",this.autocompleteAttribute="off",this._overlayAttached=!1,this.optionSelections=(0,nd.P)(function(){var te=W.autocomplete?W.autocomplete.options:null;return te?te.changes.pipe((0,Si.O)(te),(0,Kt.w)(function(){return rr.T.apply(void 0,te.map(function(me){return me.onSelectionChange}))})):W._zone.onStable.pipe((0,ue.q)(1),(0,Kt.w)(function(){return W.optionSelections}))}),this._handlePanelKeydown=function(te){var me;(te.keyCode===vn.hY&&!(0,vn.Vb)(te)||te.keyCode===vn.LH&&(0,vn.Vb)(te,"altKey"))&&(W._pendingAutoselectedOption&&(W._updateNativeInputValue(null!=(me=W._valueBeforeAutoSelection)?me:""),W._pendingAutoselectedOption=null),W._closeKeyEventStream.next(),W._resetActiveItem(),te.stopPropagation(),te.preventDefault())},this._trackedModal=null,this._scrollStrategy=u}var n=o.prototype;return n.ngAfterViewInit=function(){var i=this,a=this._getWindow();typeof a<"u"&&this._zone.runOutsideAngular(function(){return a.addEventListener("blur",i._windowBlurHandler)})},n.ngOnChanges=function(i){i.position&&this._positionStrategy&&(this._setStrategyPositions(this._positionStrategy),this.panelOpen&&this._overlayRef.updatePosition())},n.ngOnDestroy=function(){var i=this._getWindow();typeof i<"u"&&i.removeEventListener("blur",this._windowBlurHandler),this._viewportSubscription.unsubscribe(),this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete(),this._clearFromModal()},n.openPanel=function(){this._attachOverlay(),this._floatLabel(),this._trackedModal&&(0,Ur.Zf)(this._trackedModal,"aria-owns",this.autocomplete.id)},n.closePanel=function(){var i=this;this._resetLabel(),this._overlayAttached&&(this.panelOpen&&this._zone.run(function(){i.autocomplete.closed.emit()}),this.autocomplete._isOpen=this._overlayAttached=!1,this._pendingAutoselectedOption=null,this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._updatePanelState(),this._componentDestroyed||this._changeDetectorRef.detectChanges(),this._trackedModal)&&(0,Ur.iD)(this._trackedModal,"aria-owns",this.autocomplete.id)},n.updatePosition=function(){this._overlayAttached&&this._overlayRef.updatePosition()},n._getOutsideClickStream=function(){var i=this;return(0,rr.T)((0,ec.R)(this._document,"click"),(0,ec.R)(this._document,"auxclick"),(0,ec.R)(this._document,"touchend")).pipe((0,Rt.h)(function(a){var l=(0,qs.sA)(a),c=i._formField?i._formField._elementRef.nativeElement:null,u=i.connectedTo?i.connectedTo.elementRef.nativeElement:null;return i._overlayAttached&&l!==i._element.nativeElement&&i._document.activeElement!==i._element.nativeElement&&(!c||!c.contains(l))&&(!u||!u.contains(l))&&!!i._overlayRef&&!i._overlayRef.overlayElement.contains(l)}))},n.writeValue=function(i){var a=this;Promise.resolve(null).then(function(){return a._assignOptionValue(i)})},n.registerOnChange=function(i){this._onChange=i},n.registerOnTouched=function(i){this._onTouched=i},n.setDisabledState=function(i){this._element.nativeElement.disabled=i},n._handleKeydown=function(i){var a=i.keyCode,l=(0,vn.Vb)(i);if(a===vn.hY&&!l&&i.preventDefault(),this.activeOption&&a===vn.K5&&this.panelOpen&&!l)this.activeOption._selectViaInteraction(),this._resetActiveItem(),i.preventDefault();else if(this.autocomplete){var c=this.autocomplete._keyManager.activeItem,u=a===vn.LH||a===vn.JH;a===vn.Mf||u&&!l&&this.panelOpen?this.autocomplete._keyManager.onKeydown(i):u&&this._canOpen()&&this.openPanel(),(u||this.autocomplete._keyManager.activeItem!==c)&&(this._scrollToOption(this.autocomplete._keyManager.activeItemIndex||0),this.autocomplete.autoSelectActiveOption&&this.activeOption&&(this._pendingAutoselectedOption||(this._valueBeforeAutoSelection=this._element.nativeElement.value),this._pendingAutoselectedOption=this.activeOption,this._assignOptionValue(this.activeOption.value)))}},n._handleInput=function(i){var a=i.target,l=a.value;"number"===a.type&&(l=""==l?null:parseFloat(l)),this._previousValue!==l&&(this._previousValue=l,this._pendingAutoselectedOption=null,(!this.autocomplete||!this.autocomplete.requireSelection)&&this._onChange(l),l||this._clearPreviousSelectedOption(null,!1),this._canOpen()&&this._document.activeElement===i.target&&this.openPanel())},n._handleFocus=function(){this._canOpenOnNextFocus?this._canOpen()&&(this._previousValue=this._element.nativeElement.value,this._attachOverlay(),this._floatLabel(!0)):this._canOpenOnNextFocus=!0},n._handleClick=function(){this._canOpen()&&!this.panelOpen&&this.openPanel()},n._floatLabel=function(i){void 0===i&&(i=!1),this._formField&&"auto"===this._formField.floatLabel&&(i?this._formField._animateAndLockLabel():this._formField.floatLabel="always",this._manuallyFloatingLabel=!0)},n._resetLabel=function(){this._manuallyFloatingLabel&&(this._formField&&(this._formField.floatLabel="auto"),this._manuallyFloatingLabel=!1)},n._subscribeToClosingActions=function(){var i=this,a=this._zone.onStable.pipe((0,ue.q)(1)),l=this.autocomplete.options.changes.pipe((0,Yn.b)(function(){return i._positionStrategy.reapplyLastPosition()}),(0,bt.g)(0));return(0,rr.T)(a,l).pipe((0,Kt.w)(function(){return i._zone.run(function(){var c=i.panelOpen;i._resetActiveItem(),i._updatePanelState(),i._changeDetectorRef.detectChanges(),i.panelOpen&&i._overlayRef.updatePosition(),c!==i.panelOpen&&(i.panelOpen?(i._captureValueOnAttach(),i._emitOpened()):i.autocomplete.closed.emit())}),i.panelClosingActions}),(0,ue.q)(1)).subscribe(function(c){return i._setValueAndClose(c)})},n._emitOpened=function(){this.autocomplete.opened.emit()},n._captureValueOnAttach=function(){this._valueOnAttach=this._element.nativeElement.value},n._destroyPanel=function(){this._overlayRef&&(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)},n._assignOptionValue=function(i){var a=this.autocomplete&&this.autocomplete.displayWith?this.autocomplete.displayWith(i):i;this._updateNativeInputValue(a??"")},n._updateNativeInputValue=function(i){this._formField?this._formField._control.value=i:this._element.nativeElement.value=i,this._previousValue=i},n._setValueAndClose=function(i){var a=this,l=this.autocomplete,c=i?i.source:this._pendingAutoselectedOption;c?(this._clearPreviousSelectedOption(c),this._assignOptionValue(c.value),this._onChange(c.value),l._emitSelectEvent(c),this._element.nativeElement.focus()):l.requireSelection&&this._element.nativeElement.value!==this._valueOnAttach&&(this._clearPreviousSelectedOption(null),this._assignOptionValue(null),l._animationDone?l._animationDone.pipe((0,ue.q)(1)).subscribe(function(){return a._onChange(null)}):this._onChange(null)),this.closePanel()},n._clearPreviousSelectedOption=function(i,a){var l;null==(l=this.autocomplete)||null==(l=l.options)||l.forEach(function(c){c!==i&&c.selected&&c.deselect(a)})},n._attachOverlay=function(){var a,c,i=this,l=this._overlayRef;l?(this._positionStrategy.setOrigin(this._getConnectedElement()),l.updateSize({width:this._getPanelWidth()})):(this._portal=new id.UE(this.autocomplete.template,this._viewContainerRef,{id:null==(c=this._formField)?void 0:c.getLabelId()}),l=this._overlay.create(this._getOverlayConfig()),this._overlayRef=l,this._viewportSubscription=this._viewportRuler.change().subscribe(function(){i.panelOpen&&l&&l.updateSize({width:i._getPanelWidth()})})),l&&!l.hasAttached()&&(l.attach(this._portal),this._closingActionsSubscription=this._subscribeToClosingActions());var u=this.panelOpen;this.autocomplete._isOpen=this._overlayAttached=!0,this.autocomplete._setColor(null==(a=this._formField)?void 0:a.color),this._updatePanelState(),this._applyModalPanelOwnership(),this._captureValueOnAttach(),this.panelOpen&&u!==this.panelOpen&&this._emitOpened()},n._updatePanelState=function(){if(this.autocomplete._setVisibility(),this.panelOpen){var i=this._overlayRef;this._keydownSubscription||(this._keydownSubscription=i.keydownEvents().subscribe(this._handlePanelKeydown)),this._outsideClickSubscription||(this._outsideClickSubscription=i.outsidePointerEvents().subscribe())}else{var a,l;null==(a=this._keydownSubscription)||a.unsubscribe(),null==(l=this._outsideClickSubscription)||l.unsubscribe(),this._keydownSubscription=this._outsideClickSubscription=null}},n._getOverlayConfig=function(){var i,a;return new Wa.X_({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getPanelWidth(),direction:null!=(i=this._dir)?i:void 0,panelClass:null==(a=this._defaults)?void 0:a.overlayPanelClass})},n._getOverlayPosition=function(){var i=this._overlay.position().flexibleConnectedTo(this._getConnectedElement()).withFlexibleDimensions(!1).withPush(!1);return this._setStrategyPositions(i),this._positionStrategy=i,i},n._setStrategyPositions=function(i){var u,a=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],l=this._aboveClass,c=[{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:l},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:l}];u="above"===this.position?c:"below"===this.position?a:[].concat(a,c),i.withPositions(u)},n._getConnectedElement=function(){return this.connectedTo?this.connectedTo.elementRef:this._formField?this._formField.getConnectedOverlayOrigin():this._element},n._getPanelWidth=function(){return this.autocomplete.panelWidth||this._getHostWidth()},n._getHostWidth=function(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width},n._resetActiveItem=function(){var i=this.autocomplete;if(i.autoActiveFirstOption){for(var a=-1,l=0;l<i.options.length;l++)if(!i.options.get(l).disabled){a=l;break}i._keyManager.setActiveItem(a)}else i._keyManager.setActiveItem(-1)},n._canOpen=function(){var i=this._element.nativeElement;return!i.readOnly&&!i.disabled&&!this._autocompleteDisabled},n._getWindow=function(){var i;return(null==(i=this._document)?void 0:i.defaultView)||window},n._scrollToOption=function(i){var a=this.autocomplete,l=(0,Xt.CB)(i,a.options,a.optionGroups);if(0===i&&1===l)a._setScrollTop(0);else if(a.panel){var c=a.options.toArray()[i];if(c){var u=c._getHostElement(),p=(0,Xt.jH)(u.offsetTop,u.offsetHeight,a._getScrollTop(),a.panel.nativeElement.offsetHeight);a._setScrollTop(p)}}},n._applyModalPanelOwnership=function(){var i=this._element.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(i){var a=this.autocomplete.id;this._trackedModal&&(0,Ur.iD)(this._trackedModal,"aria-owns",a),(0,Ur.Zf)(i,"aria-owns",a),this._trackedModal=i}},n._clearFromModal=function(){this._trackedModal&&((0,Ur.iD)(this._trackedModal,"aria-owns",this.autocomplete.id),this._trackedModal=null)},(0,Na.Z)(o,[{key:"autocompleteDisabled",get:function(){return this._autocompleteDisabled},set:function(i){this._autocompleteDisabled=(0,Tn.Ig)(i)}},{key:"panelOpen",get:function(){return this._overlayAttached&&this.autocomplete.showPanel}},{key:"panelClosingActions",get:function(){var i=this;return(0,rr.T)(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe((0,Rt.h)(function(){return i._overlayAttached})),this._closeKeyEventStream,this._getOutsideClickStream(),this._overlayRef?this._overlayRef.detachments().pipe((0,Rt.h)(function(){return i._overlayAttached})):(0,re.of)()).pipe((0,xe.U)(function(a){return a instanceof Xt.rN?a:null}))}},{key:"activeOption",get:function(){return this.autocomplete&&this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null}}]),o}();(Jl=oc).\u0275fac=function(n){return new(n||Jl)(e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(Wa.aV),e.\u0275\u0275directiveInject(e.ViewContainerRef),e.\u0275\u0275directiveInject(e.NgZone),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(ic),e.\u0275\u0275directiveInject(_c.Is,8),e.\u0275\u0275directiveInject(yc.G_,9),e.\u0275\u0275directiveInject(U.DOCUMENT,8),e.\u0275\u0275directiveInject(Yt.rL),e.\u0275\u0275directiveInject(kc,8))},Jl.\u0275dir=e.\u0275\u0275defineDirective({type:Jl,inputs:{autocomplete:["matAutocomplete","autocomplete"],position:["matAutocompletePosition","position"],connectedTo:["matAutocompleteConnectedTo","connectedTo"],autocompleteAttribute:["autocomplete","autocompleteAttribute"],autocompleteDisabled:["matAutocompleteDisabled","autocompleteDisabled"]},features:[e.\u0275\u0275NgOnChangesFeature]});var Wr,Xa,qa,Za,Ic=function(o){function n(){var t;return(t=o.apply(this,arguments)||this)._aboveClass="mat-mdc-autocomplete-panel-above",t}return(0,yo.Z)(n,o),n}(oc);function vd(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",0,1),e.\u0275\u0275projection(2),e.\u0275\u0275elementEnd()),2&o){var t=n.id,i=e.\u0275\u0275nextContext();e.\u0275\u0275property("id",i.id)("ngClass",i._classList),e.\u0275\u0275attribute("aria-label",i.ariaLabel||null)("aria-labelledby",i._getPanelAriaLabelledby(t))}}(Qa=Ic).\u0275fac=function(){var o;return function(t){return(o||(o=e.\u0275\u0275getInheritedFactory(Qa)))(t||Qa)}}(),Qa.\u0275dir=e.\u0275\u0275defineDirective({type:Qa,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-mdc-autocomplete-trigger"],hostVars:7,hostBindings:function(n,t){1&n&&e.\u0275\u0275listener("focusin",function(){return t._handleFocus()})("blur",function(){return t._onTouched()})("input",function(a){return t._handleInput(a)})("keydown",function(a){return t._handleKeydown(a)})("click",function(){return t._handleClick()}),2&n&&e.\u0275\u0275attribute("autocomplete",t.autocompleteAttribute)("role",t.autocompleteDisabled?null:"combobox")("aria-autocomplete",t.autocompleteDisabled?null:"list")("aria-activedescendant",t.panelOpen&&t.activeOption?t.activeOption.id:null)("aria-expanded",t.autocompleteDisabled?null:t.panelOpen.toString())("aria-controls",t.autocompleteDisabled||!t.panelOpen||null==t.autocomplete?null:t.autocomplete.id)("aria-haspopup",t.autocompleteDisabled?null:"listbox")},exportAs:["matAutocompleteTrigger"],features:[e.\u0275\u0275ProvidersFeature([hd]),e.\u0275\u0275InheritDefinitionFeature]}),(Ja=function(){}).\u0275fac=function(n){return new(n||Ja)},Ja.\u0275mod=e.\u0275\u0275defineNgModule({type:Ja}),Ja.\u0275inj=e.\u0275\u0275defineInjector({providers:[Dc],imports:[Wa.U8,Xt.Ng,Xt.BQ,U.CommonModule,Yt.ZD,Xt.Ng,Xt.BQ]});var Fc=function(o){function n(){var t;return(t=o.apply(this,arguments)||this)._visibleClass="mat-autocomplete-visible",t._hiddenClass="mat-autocomplete-hidden",t._animationDone=null,t}return(0,yo.Z)(n,o),n}(tc);(Wr=Fc).\u0275fac=function(){var o;return function(t){return(o||(o=e.\u0275\u0275getInheritedFactory(Wr)))(t||Wr)}}(),Wr.\u0275cmp=e.\u0275\u0275defineComponent({type:Wr,selectors:[["mat-autocomplete"]],contentQueries:function(n,t,i){var a;1&n&&(e.\u0275\u0275contentQuery(i,Xt.K7,5),e.\u0275\u0275contentQuery(i,Ct.CK,5)),2&n&&(e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(t.optionGroups=a),e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(t.options=a))},hostAttrs:["ngSkipHydration","",1,"mat-autocomplete"],inputs:{disableRipple:"disableRipple"},exportAs:["matAutocomplete"],features:[e.\u0275\u0275ProvidersFeature([{provide:Xt.HF,useExisting:Wr}]),e.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:["*"],decls:1,vars:0,consts:[["role","listbox",1,"mat-autocomplete-panel",3,"id","ngClass"],["panel",""]],template:function(n,t){1&n&&(e.\u0275\u0275projectionDef(),e.\u0275\u0275template(0,vd,3,4,"ng-template"))},dependencies:[U.NgClass],styles:[".mat-autocomplete-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;visibility:hidden;max-width:none;max-height:256px;position:relative;width:100%;border-bottom-left-radius:4px;border-bottom-right-radius:4px}.mat-autocomplete-panel.mat-autocomplete-visible{visibility:visible}.mat-autocomplete-panel.mat-autocomplete-hidden{visibility:hidden}.mat-autocomplete-panel-above .mat-autocomplete-panel{border-radius:0;border-top-left-radius:4px;border-top-right-radius:4px}.mat-autocomplete-panel .mat-divider-horizontal{margin-top:-1px}.cdk-high-contrast-active .mat-autocomplete-panel{outline:solid 1px}mat-autocomplete{display:none}"],encapsulation:2,changeDetection:0});var _d={provide:se.JU,useExisting:(0,e.forwardRef)(function(){return rc}),multi:!0},rc=function(o){function n(){var t;return(t=o.apply(this,arguments)||this)._aboveClass="mat-autocomplete-panel-above",t}return(0,yo.Z)(n,o),n}(oc);(Xa=rc).\u0275fac=function(){var o;return function(t){return(o||(o=e.\u0275\u0275getInheritedFactory(Xa)))(t||Xa)}}(),Xa.\u0275dir=e.\u0275\u0275defineDirective({type:Xa,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-autocomplete-trigger"],hostVars:7,hostBindings:function(n,t){1&n&&e.\u0275\u0275listener("focusin",function(){return t._handleFocus()})("blur",function(){return t._onTouched()})("input",function(a){return t._handleInput(a)})("keydown",function(a){return t._handleKeydown(a)})("click",function(){return t._handleClick()}),2&n&&e.\u0275\u0275attribute("autocomplete",t.autocompleteAttribute)("role",t.autocompleteDisabled?null:"combobox")("aria-autocomplete",t.autocompleteDisabled?null:"list")("aria-activedescendant",t.panelOpen&&t.activeOption?t.activeOption.id:null)("aria-expanded",t.autocompleteDisabled?null:t.panelOpen.toString())("aria-owns",t.autocompleteDisabled||!t.panelOpen||null==t.autocomplete?null:t.autocomplete.id)("aria-haspopup",t.autocompleteDisabled?null:"listbox")},exportAs:["matAutocompleteTrigger"],features:[e.\u0275\u0275ProvidersFeature([_d]),e.\u0275\u0275InheritDefinitionFeature]});var yd=function(o){function n(){return o.apply(this,arguments)||this}return(0,yo.Z)(n,o),n}(nc);(qa=yd).\u0275fac=function(){var o;return function(t){return(o||(o=e.\u0275\u0275getInheritedFactory(qa)))(t||qa)}}(),qa.\u0275dir=e.\u0275\u0275defineDirective({type:qa,selectors:[["","matAutocompleteOrigin",""]],exportAs:["matAutocompleteOrigin"],features:[e.\u0275\u0275InheritDefinitionFeature]});var Gc=function(){};(Za=Gc).\u0275fac=function(n){return new(n||Za)},Za.\u0275mod=e.\u0275\u0275defineNgModule({type:Za}),Za.\u0275inj=e.\u0275\u0275defineInjector({providers:[Dc],imports:[Wa.U8,Ct.Uc,Xt.BQ,U.CommonModule,Yt.ZD,Ct.Uc,Xt.BQ]});var bd=T(73425),wd=["emailsInput"],Sd=["emailsList"];function Md(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",14),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){var t=n.ngIf,i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",i.getSuggestionsText(t)," ")}}function Pd(o,n){if(1&o&&e.\u0275\u0275text(0),2&o){var t=e.\u0275\u0275nextContext();e.\u0275\u0275textInterpolate(t.inputLabel)}}function xd(o,n){if(1&o&&e.\u0275\u0275element(0,"pbi-icon",15),2&o){var t=e.\u0275\u0275nextContext();e.\u0275\u0275property("name",t.inputIcon)}}function Od(o,n){1&o&&e.\u0275\u0275element(0,"pbi-icon",21)}var Vc=function(n,t){return{userEmail:n,displayName:t}};function Td(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-chip",18),e.\u0275\u0275listener("removed",function(){var u=e.\u0275\u0275restoreView(t).$implicit,p=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(p.remove(u))}),e.\u0275\u0275element(1,"user-details-host",19),e.\u0275\u0275template(2,Od,1,0,"pbi-icon",20),e.\u0275\u0275elementEnd()}if(2&o){var i=n.$implicit,a=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("disabled",a.disabled),e.\u0275\u0275advance(1),e.\u0275\u0275property("details",e.\u0275\u0275pureFunction2(5,Vc,null==i?null:i.userPrincipalName,null==i?null:i.displayName))("forceShowDisplayNameInTooltip",!0)("coloredDefaultUserPhoto",a.coloredDefaultUserPhoto),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!(null!=a.ngControl&&a.ngControl.disabled))}}function Ed(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",16),e.\u0275\u0275template(1,Td,3,8,"mat-chip",17),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementEnd()),2&o){var t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(2,1,t.selectedUsers$))}}function kd(o,n){1&o&&(e.\u0275\u0275elementStart(0,"div",22),e.\u0275\u0275element(1,"spinner"),e.\u0275\u0275elementEnd())}function Dd(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"input",23,24),e.\u0275\u0275listener("matChipInputTokenEnd",function(u){e.\u0275\u0275restoreView(t);var p=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(p.add(u,2))})("paste",function(u){e.\u0275\u0275restoreView(t);var p=e.\u0275\u0275reference(2);return e.\u0275\u0275nextContext().onPaste(u),e.\u0275\u0275resetView(p.closePanel())})("blur",function(u){e.\u0275\u0275restoreView(t);var p=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(p.onBlur(u))})("focus",function(u){e.\u0275\u0275restoreView(t);var p=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(p.onFocus(u))})("keydown.escape",function(u){e.\u0275\u0275restoreView(t);var p=e.\u0275\u0275reference(2),y=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(y.onEscape(u,p))}),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275elementEnd()}if(2&o){var i=e.\u0275\u0275nextContext(),a=e.\u0275\u0275reference(13),l=e.\u0275\u0275reference(6);e.\u0275\u0275property("placeholder",e.\u0275\u0275pipeBind1(3,9,i.selectedUsers$).length>0?void 0:i.inputPlaceholder)("disabled",i.disabled)("formControl",i.emailsListControl)("matAutocomplete",a)("matChipInputFor",l)("matChipInputSeparatorKeyCodes",i.separatorKeysCodes),e.\u0275\u0275attribute("title",i.inputPlaceholder)("aria-label",i.inputAriaLabelledBy?void 0:i.inputPlaceholder)("aria-labelledby",i.inputAriaLabelledBy)}}function Id(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"mat-option",25),e.\u0275\u0275element(1,"user-details-host",26),e.\u0275\u0275elementEnd()),2&o){var t=n.$implicit,i=e.\u0275\u0275nextContext();e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275property("showOneLine",!1)("details",e.\u0275\u0275pureFunction2(6,Vc,i.getUserEmail(t),t.displayName))("forceShowDisplayNameInTooltip",!0)("coloredDefaultUserPhoto",i.coloredDefaultUserPhoto),e.\u0275\u0275attribute("data-testid",i.getUserEmail(t))}}function Fd(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",27),e.\u0275\u0275element(2,"message-banner",28),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&o){var t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("viewModel",t.messageBannerViewModel)}}var Rc=function(o){function n(t,i,a,l,c,u){var p=o.call(this)||this;return p.userDirectoryHttpService=t,p.localizationService=i,p.domainHelperService=a,p.telemetryService=l,p.cdr=c,p.ngControl=u,p.showRelevantUsers=!0,p.defaultSelectedUsers=[],p.coloredDefaultUserPhoto=!1,p.onInputFocus=new e.EventEmitter,p.awaitingRequestsCount=new Me.X(0),p.isBusy$=p.awaitingRequestsCount.pipe((0,xe.U)(function(y){return _.gt(y,0)}),(0,V.x)(),(0,Fn.d)(1)),p.separatorKeysCodes=[vn.K5],p.emailsListControl=new se.p4("",null,p.findUserValidator()),p.emailSuggestionResults=new Me.X([]),p.selectedUsers$=new Me.X([]),p.onSelectedUsersChange=function(){},p.onComponentBlur=function(){},p.ngControl&&(p.ngControl.valueAccessor=p),p}return(0,S.ZT)(n,o),n.prototype.ngOnInit=function(){var t=this;this.pasteHandler=new Ae.xQ,this.lifecycleSubscriptions.add(this.pasteHandler.pipe((0,Xu.p)(1e3),(0,Kt.w)(function(i){return(0,S.mG)(t,void 0,void 0,function(){var a,l,c,u,p,y;return(0,S.Jh)(this,function(P){switch(P.label){case 0:return this.emailsListControl.markAsPending(),a=i.clipboardData.getData("Text").split(/;|,|\n/).filter(function(x){return _.trim(x).length>0}),l=_.size(a)<=100,c=this.telemetryService.startEvent(Vu,{inputCount:_.size(a)}),[4,this.addUser(a,l,3)];case 1:return u=P.sent(),p=0===_.size(u),this.propagateSelectedUsersChange(p),this.emailsInput.nativeElement.value=_.join(u,","),(y=_.size(a)>100)&&this.emailsListControl.setErrors({TooManyUsers:_.size(a)}),(p||y)&&this.cdr.markForCheck(),c.resolve(),[2]}})})})).subscribe()),this.lifecycleSubscriptions.add(this.emailsListControl.statusChanges.pipe((0,Si.O)(this.emailsListControl.status),(0,V.x)(),(0,qu.G)(),(0,Rt.h)(function(i){return"PENDING"===i[0]})).subscribe(function(){return t.cdr.markForCheck()})),this.actions&&this.actions.pipe((0,be.R)(this.onDestroy$)).subscribe(function(i){0===i&&t.reset()}),this.applyDefaultSelectedUsers(),this.onChanges$.subscribe(function(i){t.onChanges(i)})},n.prototype.ngAfterViewInit=function(){this.notUseUnallowedAttributes()},n.prototype.onChanges=function(t){t.defaultSelectedUsers&&this.applyDefaultSelectedUsers()},n.prototype.applyDefaultSelectedUsers=function(){this.defaultSelectedUsers&&this.defaultSelectedUsers.length>0&&this.selectedUsers$.value&&0===this.selectedUsers$.value.length&&this.selectedUsers$.next(this.defaultSelectedUsers)},n.prototype.reset=function(){this.selectedUsers$.next([]),this.emailsListControl.setValue(null),this.emailsInput&&(this.emailsInput.nativeElement.value=""),this.propagateSelectedUsersChange(!0)},n.prototype.propagateSelectedUsersChange=function(t){t&&this.emailsListControl.setErrors(null),this.onSelectedUsersChange(this.selectedUsers$.value)},n.prototype.add=function(t,i){var a;return(0,S.mG)(this,void 0,void 0,function(){var l;return(0,S.Jh)(this,function(p){switch(p.label){case 0:return this.emailsListControl.invalid||this.emailsListControl.pending?[2]:(l=null===(a=t.chipInput)||void 0===a?void 0:a.inputElement,[4,this.addUser([t.value],!0,i)]);case 1:return 0===p.sent().length&&(l&&(l.value=""),this.propagateSelectedUsersChange(!0),this.emailsListControl.setValue(null)),[2]}})})},Object.defineProperty(n.prototype,"hasValidPendingInput",{get:function(){var i=this.emailsInput.nativeElement.value;return!!i&&dr.JJ.test(i)},enumerable:!1,configurable:!0}),n.prototype.addUser=function(t,i,a){return(0,S.mG)(this,void 0,void 0,function(){var l,c,u,p,y,P;return(0,S.Jh)(this,function(x){switch(x.label){case 0:l=[],c=0,u=t,x.label=1;case 1:return c<u.length?(p=u[c],(p=_.trim(p))?(y=void 0,i?[4,this.findUsers(p).pipe((0,xe.U)(function(N){return 1===N.length?N[0]:null})).toPromise()]:[3,3]):[3,6]):[3,7];case 2:y=x.sent(),x.label=3;case 3:return this.emailsListControl.value||1!==a?(P=void 0,y?[3,5]:[4,this.validateEmail(p,i&&this.checkValidOrgUser,!i||this.allowExternalUsers)]):[3,6];case 4:P=x.sent(),x.label=5;case 5:P?(this.emailsListControl.setErrors(P),l.push(p),this.cdr.markForCheck()):this.selectedUsers$.next(this.selectedUsers$.value.concat([y??this.getADUserMetadataFromEmail(p)])),x.label=6;case 6:return c++,[3,1];case 7:return[2,l]}})})},n.prototype.getADUserMetadataFromEmail=function(t){return{displayName:void 0,userPrincipalName:t,objectId:void 0,emailAddress:t,objectType:1,isSecurityGroup:!1}},n.prototype.remove=function(t){this.selectedUsers$.next(this.selectedUsers$.value.filter(function(i){return i!==t})),this.propagateSelectedUsersChange(!0)},n.prototype.select=function(t){this.selectedUsers$.next(this.selectedUsers$.value.concat([t.option.value])),this.propagateSelectedUsersChange(!0),this.emailsInput.nativeElement.value="",this.emailsListControl.setValue(null)},n.prototype.findUserValidator=function(){var t=this;return function(i){return(0,Wu.H)(500).pipe((0,Kt.w)(function(){var a=_.trim(i.value);return _.isString(i.value)&&a?t.findUsers(i.value).pipe((0,Yn.b)(function(c){return t.emailSuggestionResults.next(c)}),(0,gt.zg)(function(c){return _.isEmpty(c)?t.validateEmail(i.value,t.checkValidOrgUser,t.allowExternalUsers):(0,re.of)(null)})):(t.emailSuggestionResults.next([]),(0,re.of)(null))}))}},n.prototype.sendFindUsersRequest=function(t){var i=this;return function(o,n){return new $u.y(function(t){var i,a;try{i=o()}catch(u){return void t.error(u)}try{a=n()}catch(u){return void t.error(u)}var c=(a?(0,Ks.D)(a):Qu.E).subscribe(t);return function(){c.unsubscribe(),i&&i.unsubscribe()}})}(function(){return{unsubscribe:function(){return i.awaitingRequestsCount.next(i.awaitingRequestsCount.value-1)}}},function(){var l=i.allowAnyGroup||i.allowSecurityGroups||i.allowUnifiedGroups||i.allowEmailEnabledSecurityGroups?i.blockUsers?2:3:1;return i.awaitingRequestsCount.next(i.awaitingRequestsCount.value+1),i.userDirectoryHttpService.findUsers(t,l,ju.OsI,!!i.includeGuests,i.showRelevantUsers,i.allowAnyGroup,!0)})},n.prototype.findUsers=function(t){var i=this;return this.sendFindUsersRequest(t).pipe((0,xe.U)(function(a){return _.reduce(a.data,function(l,c){var u;if(i.isValidObjectType(c)&&-1===_.findIndex(i.selectedUsers$.value,function(N){return i.compareADEntities(c,N)})){var y=c.displayName&&c.displayName.toLocaleLowerCase()===t.toLocaleLowerCase(),P=null===(u=c.userPrincipalName)||void 0===u?void 0:u.split("@")[0],x=P&&P.toLocaleLowerCase()===t.toLocaleLowerCase();y||x?l.unshift(c):l.push(c)}return l},[])}),(0,Zu.K)(function(){return(0,re.of)([])}))},n.prototype.compareADEntities=function(t,i){return t.userPrincipalName&&i.userPrincipalName?t.userPrincipalName===i.userPrincipalName:!(!t.objectId||!i.objectId)&&t.objectId===i.objectId},n.prototype.writeValue=function(t){t&&this.selectedUsers$.next(t)},n.prototype.registerOnChange=function(t){this.onSelectedUsersChange=t},n.prototype.registerOnTouched=function(t){this.onComponentBlur=t},n.prototype.onPaste=function(t){t.preventDefault(),this.pasteHandler.next(t)},Object.defineProperty(n.prototype,"messageBannerViewModel",{get:function(){var i=this.localizationService.get("ClientError_UnknownClientErrorValue"),a=1;return this.emailsListControl.hasError("DuplicateEmail")||this.emailsListControl.hasError("InvalidEmail")?i=this.localizationService.get("Sharing_InvalidEmail"):this.emailsListControl.hasError("ExternalUser")?(i=this.localizationService.format("Sharing_ExternalOrganization",this.emailsListControl.getError("ExternalUser")),a=1):this.emailsListControl.hasError("InvalidOrgUser")?(i=this.localizationService.format("GrantAccessPane_InvalidEmails",this.emailsListControl.getError("InvalidOrgUser")),a=1):this.emailsListControl.hasError("TooManyUsers")&&(i=this.localizationService.format("TooManyUsers_BlockedEmails",this.emailsListControl.getError("TooManyUsers")),a=1),{bannerType:a,iconName:1===a?"pbi-glyph-error-circle-exclamation":"pbi-glyph-warning",message:i}},enumerable:!1,configurable:!0}),n.prototype.onBlur=function(t){return(0,S.mG)(this,void 0,void 0,function(){var i,a;return(0,S.Jh)(this,function(l){switch(l.label){case 0:return t.relatedTarget&&"MAT-OPTION"===t.relatedTarget.tagName?[2]:(this.onComponentBlur(this.selectedUsers$.value),this.addUserOnBlur?(i=this.emailsInput.nativeElement,this.emailsListControl.pending?[4,this.emailsListControl.statusChanges.pipe((0,Rt.h)(function(c){return"PENDING"!==c}),(0,ue.q)(1)).toPromise()]:[3,2]):[3,3]);case 1:l.sent(),l.label=2;case 2:return(a=_.trim(i.value))?[2,this.add({input:i,value:a,chipInput:new Ns(this.emailsInput,{separatorKeyCodes:[]})},1)]:[2];case 3:return[2]}})})},n.prototype.onEscape=function(t,i){var a;null!==(a=i?.autocomplete)&&void 0!==a&&a.isOpen&&(t?.stopPropagation(),i.closePanel())},n.prototype.onFocus=function(t){this.onInputFocus.emit(t)},n.prototype.validateEmail=function(t,i,a){return void 0===a&&(a=!1),(0,S.mG)(this,void 0,void 0,function(){var c;return(0,S.Jh)(this,function(u){switch(u.label){case 0:return dr.JJ.test(t)?-1!==_.findIndex(this.selectedUsers$.value,function(p){return p.userPrincipalName===t})?[2,{DuplicateEmail:!0}]:[4,this.domainHelperService.emailIsInVerifiedDomain(t)]:[3,2];case 1:return(c=u.sent())||a?c&&i?[2,{InvalidOrgUser:t}]:[2,null]:[2,{ExternalUser:t}];case 2:return[2,{InvalidEmail:!0}]}})})},n.prototype.isValidObjectType=function(t){return 2===t.objectType?!!this.allowAnyGroup||(t.isSecurityGroup?this.allowSecurityGroups||this.allowEmailEnabledSecurityGroups&&3===t.groupType:2===t.groupType?this.allowDistributionLists:this.allowUnifiedGroups):1===t.objectType&&t.aadAppId?this.allowServicePrincipals:(1===t.objectType||3===t.objectType)&&!this.blockUsers},n.prototype.getUserEmail=function(t){return t.userPrincipalName||t.emailAddress||(t.aadAppId?"AppID: "+t.aadAppId:null)},n.prototype.notUseUnallowedAttributes=function(){this.emailsList._multiple=void 0,this.emailsList.ariaOrientation=void 0},n.prototype.getSuggestionsText=function(t){return t>0?this.localizationService.format("Email_Address_Suggestion_Count_Text",[t]):""},n.\u0275fac=function(i){return new(i||n)(e.\u0275\u0275directiveInject(Tc.W),e.\u0275\u0275directiveInject(St.o),e.\u0275\u0275directiveInject(ed),e.\u0275\u0275directiveInject(Gt.y0),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(se.a5,10))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["emails-list-modern"]],viewQuery:function(i,a){if(1&i&&(e.\u0275\u0275viewQuery(wd,5),e.\u0275\u0275viewQuery(Sd,5)),2&i){var l=void 0;e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(a.emailsInput=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(a.emailsList=l.first)}},hostVars:4,hostBindings:function(i,a){2&i&&e.\u0275\u0275classProp("disabled",(null==a.ngControl?null:a.ngControl.disabled)||a.disabled)("invalid",(null==a.ngControl?null:a.ngControl.invalid)||a.emailsListControl.invalid)},inputs:{allowAnyGroup:"allowAnyGroup",allowSecurityGroups:"allowSecurityGroups",allowUnifiedGroups:"allowUnifiedGroups",allowEmailEnabledSecurityGroups:"allowEmailEnabledSecurityGroups",allowObjectIds:"allowObjectIds",blockUsers:"blockUsers",isRequired:"isRequired",includeGuests:"includeGuests",allowExternalUsers:"allowExternalUsers",allowDistributionLists:"allowDistributionLists",allowServicePrincipals:"allowServicePrincipals",inputLabel:"inputLabel",inputPlaceholder:"inputPlaceholder",inputIcon:"inputIcon",inputAriaLabelledBy:"inputAriaLabelledBy",disabled:"disabled",maxSelectableUsers:"maxSelectableUsers",hideChips:"hideChips",hideError:"hideError",hideInput:"hideInput",addUserOnBlur:"addUserOnBlur",checkValidOrgUser:"checkValidOrgUser",showRelevantUsers:"showRelevantUsers",actions:"actions",defaultSelectedUsers:"defaultSelectedUsers",coloredDefaultUserPhoto:"coloredDefaultUserPhoto"},outputs:{onInputFocus:"onInputFocus"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:17,vars:17,consts:[["id","emailsList","appearance","none","cdkScrollable","",1,"emails-list"],["class","x-screen-reader","aria-live","assertive",4,"ngIf"],[1,"email-list-input-wrapper"],[3,"ngIf"],["role","listbox",1,"chip-list",3,"required"],["emailsList",""],["class","inputIcon","size","small",3,"name",4,"ngIf"],["class","chips-wrapper",4,"ngIf"],["class","autoCompleteSpinner",4,"ngIf"],["matChipInput","","aria-owns","email-list-modern-suggestions","aria-controls","email-list-modern-suggestions","data-testid","emails-list-input","data-unique-id","EmailsListInput",3,"placeholder","disabled","formControl","matAutocomplete","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputTokenEnd","paste","blur","focus","keydown.escape",4,"ngIf"],["id","email-list-modern-suggestions","data-testid","email-sugessions-dropdown",3,"optionSelected"],["auto","matAutocomplete"],["data-automation-type","Suggestion",3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["aria-live","assertive",1,"x-screen-reader"],["size","small",1,"inputIcon",3,"name"],[1,"chips-wrapper"],["defaultTabIndex","0","tabindex","0","role","option",3,"disabled","removed",4,"ngFor","ngForOf"],["defaultTabIndex","0","tabindex","0","role","option",3,"disabled","removed"],[3,"details","forceShowDisplayNameInTooltip","coloredDefaultUserPhoto"],["name","close","size","mini","matChipRemove","",4,"ngIf"],["name","close","size","mini","matChipRemove",""],[1,"autoCompleteSpinner"],["matChipInput","","aria-owns","email-list-modern-suggestions","aria-controls","email-list-modern-suggestions","data-testid","emails-list-input","data-unique-id","EmailsListInput",3,"placeholder","disabled","formControl","matAutocomplete","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputTokenEnd","paste","blur","focus","keydown.escape"],["emailsInput","","trigger","matAutocompleteTrigger"],["data-automation-type","Suggestion",3,"value"],[3,"showOneLine","details","forceShowDisplayNameInTooltip","coloredDefaultUserPhoto"],["role","alert","aria-atomic","true"],[3,"viewModel"]],template:function(i,a){var l;(1&i&&(e.\u0275\u0275elementStart(0,"mat-form-field",0),e.\u0275\u0275template(1,Md,2,1,"div",1),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementStart(3,"label",2),e.\u0275\u0275template(4,Pd,1,1,"ng-template",3),e.\u0275\u0275elementStart(5,"mat-chip-list",4,5),e.\u0275\u0275template(7,xd,1,1,"pbi-icon",6),e.\u0275\u0275template(8,Ed,3,3,"div",7),e.\u0275\u0275template(9,kd,2,0,"div",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(10,Dd,4,11,"input",9),e.\u0275\u0275pipe(11,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"mat-autocomplete",10,11),e.\u0275\u0275listener("optionSelected",function(u){return a.select(u)}),e.\u0275\u0275template(14,Id,2,9,"mat-option",12),e.\u0275\u0275pipe(15,"async"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(16,Fd,3,1,"ng-container",13)),2&i)&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(l=e.\u0275\u0275pipeBind1(2,11,a.emailSuggestionResults))?null:l.length),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",a.inputLabel),e.\u0275\u0275advance(1),e.\u0275\u0275property("required",a.isRequired),e.\u0275\u0275attribute("aria-label",a.inputAriaLabelledBy?void 0:a.inputPlaceholder)("aria-labelledby",a.inputAriaLabelledBy),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!!a.inputIcon),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!a.hideChips),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",a.emailsListControl.pending),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!a.hideInput&&(!a.maxSelectableUsers||e.\u0275\u0275pipeBind1(11,13,a.selectedUsers$).length<a.maxSelectableUsers)),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(15,15,a.emailSuggestionResults)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",a.emailsListControl.invalid&&!a.hideError))},dependencies:[U.NgForOf,U.NgIf,Fc,rc,Yt.PQ,Ct.CK,Ys,Wl,Ns,Zs,he.v_,se.Fj,se.JJ,se.oH,Gn._,bd.O,mn.A,Fe.s,U.AsyncPipe],styles:['[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   input[_ngcontent-%COMP%]{border:0px solid;width:min-content;min-height:32px;padding:6px 8px!important;margin:0!important;box-sizing:border-box;caret-color:auto;line-height:1.4}[_nghost-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{display:block;line-height:1.125}[_nghost-%COMP%]   .chip-list[_ngcontent-%COMP%]{max-width:100%;display:flex}[_nghost-%COMP%]   .chip-list[_ngcontent-%COMP%]     .mat-chip-list-wrapper{max-width:100%;margin:0}[_nghost-%COMP%]   .chip-list[_ngcontent-%COMP%]   .chips-wrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;max-height:190px;overflow:auto}[_nghost-%COMP%]   .inputIcon[_ngcontent-%COMP%]{padding:0 8px}[_nghost-%COMP%]     .mat-chip{background-color:var(--fluent-theme-neutral-lighter-color, #F3F2F1);font-weight:400;padding:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;-o-text-overflow:ellipsis}[_nghost-%COMP%]     .mat-standard-chip{min-height:24px!important}[_nghost-%COMP%]     .mat-standard-chip.mat-chip-with-trailing-icon{padding:0 2px 0 0!important}[_nghost-%COMP%]     .mat-standard-chip .mat-chip-remove{height:12px!important}[_nghost-%COMP%]     .mat-form-field-appearance-standard, [_nghost-%COMP%]     .mat-form-field-wrapper, [_nghost-%COMP%]     .mat-form-field-flex{padding:0}[_nghost-%COMP%]     .mat-form-field-infix{border:0px;padding:0;width:min-content;min-height:32px}[_nghost-%COMP%]     .mat-form-field-appearance-standard .mat-form-field-flex, [_nghost-%COMP%]     .mat-chip-list-wrapper{padding-top:0!important;padding-bottom:0!important}[_nghost-%COMP%]     user-details-host{width:calc(100% - 24px)}[_nghost-%COMP%]     user-details{width:100%}[_nghost-%COMP%]     .user-info{width:calc(100% - 29px)}[_nghost-%COMP%]     .user-name, [_nghost-%COMP%]     .user-email{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;-o-text-overflow:ellipsis}[_nghost-%COMP%]   .email-list-input-wrapper[_ngcontent-%COMP%]{display:flex;flex-flow:wrap}[_nghost-%COMP%]   .email-list-input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400)}[_nghost-%COMP%]   .email-list-input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{opacity:1;color:var(--colorNeutralForeground4, #707070)}[_nghost-%COMP%]   .emails-list[_ngcontent-%COMP%]{border:1px solid var(--fluent-theme-neutral-tertia-color, #A19F9D);border-radius:2px;background-color:var(--fluent-theme-white-color, #FFF)}[_nghost-%COMP%]   .emails-list[_ngcontent-%COMP%]:hover{border-color:var(--fluent-theme-black-color, #000)}[_nghost-%COMP%]   .emails-list[_ngcontent-%COMP%]:focus-within{border:2px solid var(--colorNeutralStrokeFocus2)}[_nghost-%COMP%]   .autoCompleteSpinner[_ngcontent-%COMP%]{position:absolute;top:4px;right:6px;overflow:auto}.invalid[_nghost-%COMP%]   .emails-list[_ngcontent-%COMP%]{border-color:var(--fluent-theme-error-dark-color, #A80000)}.disabled[_nghost-%COMP%]   .emails-list[_ngcontent-%COMP%]{background-color:var(--fluent-theme-neutral-lighter-color, #F3F2F1)}.disabled[_nghost-%COMP%]   .emails-list[_ngcontent-%COMP%]   .chip-list[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{background-color:var(--fluent-theme-neutral-light-color, #EDEBE9)}.disabled[_nghost-%COMP%]   .emails-list[_ngcontent-%COMP%]   .chip-list[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]   pbi-icon[_ngcontent-%COMP%]{display:none}.disabled[_nghost-%COMP%]   .emails-list[_ngcontent-%COMP%]   .chip-list[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]   user-details-host[_ngcontent-%COMP%]{width:100%}html:not([dir="rtl"])   .disabled[_nghost-%COMP%]   .emails-list[_ngcontent-%COMP%]   .chip-list[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]   user-details-host[_ngcontent-%COMP%]{margin-right:12px}html[dir="rtl"]   .disabled[_nghost-%COMP%]   .emails-list[_ngcontent-%COMP%]   .chip-list[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]   user-details-host[_ngcontent-%COMP%]{margin-left:12px}.disabled[_nghost-%COMP%]   .emails-list[_ngcontent-%COMP%]   .chip-list[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:var(--colorNeutralForegroundDisabled, #bdbdbd)}user-details-host[_ngcontent-%COMP%]     .user-email, user-details-host[_ngcontent-%COMP%]     .user-name{line-height:16px}.mat-option.mat-active[_ngcontent-%COMP%]{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color)}.x-screen-reader[_ngcontent-%COMP%]{position:absolute!important;overflow:hidden!important;clip:rect(1px,1px,1px,1px)!important;width:1px!important;height:1px!important;border:0!important;padding:0!important;margin:0!important}'],changeDetection:0}),n}(Te.w),ac=T(56011),Gd=function(){function o(n){this.scorecardService=n}return Object.defineProperty(o.prototype,"scorecard",{get:function(){return this.scorecardService.getCurrentScorecard()},enumerable:!1,configurable:!0}),o.prototype.updateScorecardStatuses=function(n){return(0,S.mG)(this,void 0,void 0,function(){return(0,S.Jh)(this,function(t){switch(t.label){case 0:return o.isLocalScorecard?(this.scorecard.goalStatuses=n.goalStatuses,this.scorecard.goalStatuses.nextId=this.scorecard.goalStatuses.statuses.length,this.commit(),[3,3]):[3,1];case 1:return[4,this.scorecardService.updateScorecard(n)];case 2:t.sent(),t.label=3;case 3:return[2]}})})},o.prototype.createCategoryListHandler=function(n){return(0,S.mG)(this,void 0,void 0,function(){var t,i;return(0,S.Jh)(this,function(a){switch(a.label){case 0:return o.isLocalScorecard?(_.isUndefined(this.scorecard.goalValueCategories)&&(this.scorecard.goalValueCategories=[]),t=X.getGoalValueCategoriesCreateRequest(n),i={id:this.scorecard.goalValueCategories.length.toString(),scorecardId:"",name:"",categories:t.categories},this.scorecard.goalValueCategories.push(i),this.commit(),[2,i]):[3,1];case 1:return[4,this.scorecardService.createCategoryList(n)];case 2:return[2,a.sent()]}})})},o.prototype.updateCategoryListHandler=function(n){return(0,S.mG)(this,void 0,void 0,function(){var t;return(0,S.Jh)(this,function(i){switch(i.label){case 0:return o.isLocalScorecard?(t=_.findIndex(this.scorecard.goalValueCategories,function(a){return a.id===n.id}),this.scorecard.goalValueCategories[t]=n,this.commit(),[2,n]):[3,1];case 1:return[4,this.scorecardService.updateCategoryList(n)];case 2:return[2,i.sent()]}})})},o.prototype.deleteCategoryListHandler=function(n){return(0,S.mG)(this,void 0,void 0,function(){var t;return(0,S.Jh)(this,function(i){switch(i.label){case 0:return o.isLocalScorecard?(_.remove(this.scorecard.goalValueCategories,function(a){return a.id===n}),t=0,this.scorecard.goalValueCategories.forEach(function(a){a.id=t.toString(),t+=1}),this.commit(),[3,3]):[3,1];case 1:return[4,this.scorecardService.deleteCategoryList(n)];case 2:i.sent(),i.label=3;case 3:return[2]}})})},o.prototype.commit=function(){this.scorecardService.loadPrefetchedScorecard(this.scorecard)},o.isLocalScorecard=!1,o}(),Vd=["matSelect"];function Rd(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-option",6),e.\u0275\u0275listener("onSelectionChange",function(l){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(c.onValueSelect(l))}),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()}if(2&o){var i=n.$implicit;e.\u0275\u0275styleProp("background-color",i.color),e.\u0275\u0275property("value",i),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",i.displayName," ")}}function Ad(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"button",7),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.onEdit())}),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"localize"),e.\u0275\u0275elementEnd()()}2&o&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,1,"EditStatusRules_Button_Text")," "))}var Ac=function(){function o(n,t,i){this.detailsPaneLauncher=n,this.localizationService=t,this.scorecardService=i,this.canCustomizeStatus=!1,this.onSelect=new e.EventEmitter,this.createGoalHelper=new Gd(i),this.goalStatusHelper=new ie.p(this.localizationService),this.defaultColor=pe.xt.defaultColorPalette[0].backgroundColor,this.statusForm=new se.nJ({statusPicker:new se.p4(null)})}return o.prototype.focus=function(){this.matSelect._elementRef.nativeElement.focus()},o.prototype.onEdit=function(){var n=this;this.detailsPaneLauncher.openEditStatusesPane(this.scorecardService,function(t){return n.createGoalHelper.updateScorecardStatuses(t)},!this.canCustomizeStatus),this.matSelect.close()},o.prototype.ngOnInit=function(){this.displayGoalStatuses=this.configStatus(this.goalStatuses)},o.prototype.ngOnChanges=function(n){var t,i,a;n.goalStatuses&&(this.displayGoalStatuses=this.configStatus(this.goalStatuses)),n.isReadOnly&&(this.isReadOnly?null===(t=this.statusForm)||void 0===t||t.get("statusPicker").disable():null===(i=this.statusForm)||void 0===i||i.get("statusPicker").enable()),n.status&&(this.currentStatus=ie.p.getGoalStatus(this.status,this.goalStatuses),_.isNil(this.status)&&this.showUndefinedAsEmpty&&(this.currentStatus=void 0),null===(a=this.statusForm.get("statusPicker"))||void 0===a||a.setValue(this.currentStatus)),n.showUndefinedAsEmpty&&(this.defaultColor=this.showUndefinedAsEmpty?"transparent":pe.xt.defaultColorPalette[0].backgroundColor)},o.prototype.compareOptions=function(n,t){return n.id===t.id},o.prototype.onValueSelect=function(n){n.isUserInput&&(this.currentStatus=n.source.value,this.onSelect.emit(n.source.value))},o.prototype.configStatus=function(n){var t=[];if(!_.isEmpty(n))for(var i=0,a=n;i<a.length;i++){var l=a[i];if(!l.historical){var c={id:l.id,displayName:this.goalStatusHelper.tryLocalizeDisplayName(l.displayName),color:l.color,historical:l.historical,labelColor:l.labelColor};t.push(c)}}return t},o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(ri),e.\u0275\u0275directiveInject(St.o),e.\u0275\u0275directiveInject(Ht))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["status-picker"]],viewQuery:function(t,i){var a;(1&t&&e.\u0275\u0275viewQuery(Vd,5),2&t)&&(e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(i.matSelect=a.first))},inputs:{canCustomizeStatus:"canCustomizeStatus",goalStatuses:"goalStatuses",status:"status",isReadOnly:"isReadOnly",onSave:"onSave",showUndefinedAsEmpty:"showUndefinedAsEmpty"},outputs:{onSelect:"onSelect"},features:[e.\u0275\u0275NgOnChangesFeature],decls:7,vars:10,consts:[[3,"formGroup"],["appearance","none"],["pbiInput","","pbiMatSelect","","disableOptionCentering","","data-testid","goal-status-picker","panelClass","goal-status-panel","formControlName","statusPicker",1,"custom-mat-select",3,"placeholder","aria-label","compareWith"],["matSelect",""],["class","custom-mat-option",3,"background-color","value","onSelectionChange",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"custom-mat-option",3,"value","onSelectionChange"],[1,"editStatus",3,"click"]],template:function(t,i){var a;(1&t&&(e.\u0275\u0275elementStart(0,"form",0)(1,"mat-form-field",1)(2,"mat-select",2,3),e.\u0275\u0275pipe(4,"localize"),e.\u0275\u0275template(5,Rd,2,4,"mat-option",4),e.\u0275\u0275template(6,Ad,4,3,"div",5),e.\u0275\u0275elementEnd()()()),2&t)&&(e.\u0275\u0275property("formGroup",i.statusForm),e.\u0275\u0275advance(2),e.\u0275\u0275styleProp("background-color",null!==(a=null==i.currentStatus?null:i.currentStatus.color)&&void 0!==a?a:i.defaultColor),e.\u0275\u0275propertyInterpolate("aria-label",e.\u0275\u0275pipeBind1(4,8,"SelectStatus")),e.\u0275\u0275property("placeholder",null==i.currentStatus?null:i.currentStatus.displayName)("compareWith",i.compareOptions),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",i.displayGoalStatuses),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.canCustomizeStatus))},dependencies:[U.NgForOf,U.NgIf,se._Y,se.JJ,se.JL,he.v_,st.x8,Ct.CK,se.sg,se.u,xt.F],styles:['.custom-mat-option{height:24px!important;line-height:24px!important;margin:6px 32px 6px 8px;border-radius:12px}  .custom-mat-option span{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);color:var(--fluent-theme-neutral-primary-color, #323130);text-align:center}  .mat-option.mat-active{outline:2px solid var(--fluent-theme-neutral-dark-color, #201F1E)}  .editStatus{width:100%;background-color:transparent!important;border:none;border-top:1px solid var(--gray-60, #C8C6C4);font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);color:var(--fluent-theme-neutral-primary-color, #323130)}  .editStatus:hover,   .editStatus:active{background-color:transparent!important;border-top:1px solid var(--gray-60, #C8C6C4)!important}  .goal-status-panel{margin-top:42px;margin-bottom:42px;width:100%;max-width:100%!important;min-width:100%!important;margin-left:16px;box-shadow:var(--fluent-shadow-depth8, 0px 0px 2px var(--colorNeutralShadowAmbient), 0px 4px 8px var(--colorNeutralShadowKey))!important;border-radius:2px!important;position:relative;top:-12px}[_nghost-%COMP%]     mat-form-field{width:100%!important;border:1px solid var(--gray-110, #8A8886);box-sizing:border-box;border-radius:2px;height:32px;padding:2px}[_nghost-%COMP%]     mat-form-field mat-select{border-radius:24px}[_nghost-%COMP%]     .mat-select-trigger{height:24px!important;width:100%;display:flex;align-items:center}[_nghost-%COMP%]     .custom-mat-select .mat-select-value{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);color:var(--fluent-theme-neutral-primary-color, #323130);text-align:center;border-radius:12px;margin-left:8px;margin-right:8px;line-height:24px!important;height:24px!important}[_nghost-%COMP%]     .custom-mat-select .mat-select-arrow-wrapper{font-family:PowrMDL2;font-style:normal;font-size:32px;display:inline-block;font-size:12px;margin-right:8px;color:var(--gray-140, #484644)}[_nghost-%COMP%]     .custom-mat-select .mat-select-arrow-wrapper:before{content:"\\e70d"}[_nghost-%COMP%]     .custom-mat-select .mat-select-arrow-wrapper .mat-select-arrow{display:none}[_nghost-%COMP%]     .custom-mat-select.mat-select-disabled .mat-select-arrow-wrapper{display:none}[_nghost-%COMP%]     .custom-mat-select:focus{outline:2px solid var(--fluent-theme-neutral-dark-color, #201F1E)}[_nghost-%COMP%]     .mat-select-value{width:100%;max-width:100%}[_nghost-%COMP%]     .mat-select-placeholder{color:unset}[_nghost-%COMP%]     .mat-select-value-text{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);color:var(--fluent-theme-neutral-primary-color, #323130)}[_nghost-%COMP%]     .mat-form-field-wrapper{padding:0!important}[_nghost-%COMP%]     .mat-form-field-wrapper .mat-form-field-flex{height:unset!important}[_nghost-%COMP%]     .mat-form-field-wrapper .mat-form-field-infix{padding:0!important;border:none!important;top:1px}'],changeDetection:0}),o}(),Ld=["nameInput"],Nd=["goal-edit-row",""];function zd(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",16),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275elementStart(2,"pbi-checkbox",17),e.\u0275\u0275listener("onChange",function(){e.\u0275\u0275restoreView(t);var u=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(u.onSelectGoalCheckbox())}),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275elementEnd()()}if(2&o){var a,l,i=e.\u0275\u0275nextContext();e.\u0275\u0275classProp("box-checked",null==(a=e.\u0275\u0275pipeBind1(1,4,i.selectedGoalIds$))?null:a[i.displayedGoal.id]),e.\u0275\u0275advance(2),e.\u0275\u0275property("checked",null==(l=e.\u0275\u0275pipeBind1(3,6,i.selectedGoalIds$))?null:l[i.displayedGoal.id])("disabled",null==i.displayedGoal?null:i.displayedGoal.isNew)}}function Hd(o,n){1&o&&e.\u0275\u0275element(0,"td",18)}function Bd(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",13),e.\u0275\u0275element(2,"div"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",19),e.\u0275\u0275element(4,"div",20),e.\u0275\u0275elementStart(5,"div",21)(6,"emails-list-modern",22),e.\u0275\u0275listener("ngModelChange",function(l){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(c.selectedUsers=l)}),e.\u0275\u0275pipe(7,"localize"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd()}if(2&o){var i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(6),e.\u0275\u0275property("allowAnyGroup",!0)("maxSelectableUsers",i.maxGoalOwnerCount)("ngModel",i.selectedUsers)("addUserOnBlur",!0)("inputPlaceholder",e.\u0275\u0275pipeBind1(7,7,"Enter_Name"))("disabled",!i.capabilities.editOwners)("hideInput",!i.capabilities.editOwners)}}function Ud(o,n){1&o&&e.\u0275\u0275element(0,"span",31)}function jd(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",28),e.\u0275\u0275template(1,Ud,1,0,"span",29),e.\u0275\u0275elementStart(2,"span"),e.\u0275\u0275text(3,"\xa0"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"button",30),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var l=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(l.onUpdateStatusRules())}),e.\u0275\u0275elementEnd()()}if(2&o){var i=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!i.displayedGoal.hasStatusRules),e.\u0275\u0275advance(3),e.\u0275\u0275property("localize",i.displayedGoal.hasStatusRules?"UpdateMetricStatusRules":"SetupMetricStatusRules")}}function Wd(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",23),e.\u0275\u0275element(2,"div"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",24),e.\u0275\u0275element(4,"div",25),e.\u0275\u0275elementStart(5,"status-picker",26),e.\u0275\u0275listener("onSelect",function(l){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(c.onStatusChange(l))}),e.\u0275\u0275pipe(6,"async"),e.\u0275\u0275pipe(7,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,jd,5,2,"div",27),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&o){var i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(5),e.\u0275\u0275property("canCustomizeStatus",null==i.capabilities.scorecardCapabilities?null:i.capabilities.scorecardCapabilities.customizeStatus)("status",null==i.currentValue?null:i.currentValue.status)("goalStatuses",e.\u0275\u0275pipeBind1(6,7,i.goalStatuses$))("pbiTooltip",e.\u0275\u0275pipeBind1(7,9,"MetricStatus_ReadOnly"))("pbiTooltipDisabled",!i.displayedGoal.hasStatusRules)("isReadOnly",!i.capabilities.editStatus),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",i.showUpdateRules&&i.capabilities.editStatusRules)}}function $d(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",13),e.\u0275\u0275element(2,"div"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",32),e.\u0275\u0275element(4,"div",33),e.\u0275\u0275elementStart(5,"div",9)(6,"input",34),e.\u0275\u0275listener("ngModelChange",function(l){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(c.onStartDateChange(l))}),e.\u0275\u0275pipe(7,"localize"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(8,"div",35)(9,"div",36),e.\u0275\u0275text(10),e.\u0275\u0275pipe(11,"localize"),e.\u0275\u0275element(12,"i",37),e.\u0275\u0275pipe(13,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"div",9)(15,"input",38),e.\u0275\u0275listener("ngModelChange",function(l){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(c.onDueDateChange(l))}),e.\u0275\u0275pipe(16,"localize"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd()}if(2&o){var i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(6),e.\u0275\u0275property("min",i.SqlDateTimeMinValue)("max",i.SqlDateTimeMaxValue)("ngModel",i.startDateShort)("disabled",!i.capabilities.editStartDate),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(7,12,"Start_Date")),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(11,14,"DueDate")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("pbiTooltip",e.\u0275\u0275pipeBind1(13,16,"Metrics_Due_Date_Tooltip")),e.\u0275\u0275advance(3),e.\u0275\u0275property("min",i.SqlDateTimeMinValue)("max",i.SqlDateTimeMaxValue)("ngModel",i.completionDateShort)("disabled",!i.capabilities.editDueDate),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(16,18,"DueDate"))}}var Qd=function(){return[]},Lc=function(){function o(n,t,i,a,l,c,u,p){this.featureSwitches=n,this.scorecardService=t,this.scorecardConfigurationService=i,this.detailsPaneLauncher=a,this.capabilityService=l,this.telemetryService=c,this.scorecardHost=u,this.settingsService=p,this.TotalNumberOfColumns=pe.gT.TotalNumberOfColumns,this.GoalNameMaxLength=Dl.GoalNameMaxLength,this.maxGoalOwnerCount=1,this.currentValue={},this.supportMultipleTargets=!1,this.supportMultipleValuesEditing=!1,this.indentation=0,this.selectedUsers=[],this.showUpdateRules=!1,this.goalCurrentValueSelection=void 0,this.goalTargetValueSelection=void 0,this.SqlDateTimeMinValue=pe.gT.SqlDateTimeMinValue,this.SqlDateTimeMaxValue=pe.gT.SqlDateTimeMaxValue,this.isSingleGoalVisual=!1}return Object.defineProperty(o.prototype,"indent",{set:function(t){this.indentation=$e.r.getSafeIndentation(t)},enumerable:!1,configurable:!0}),o.prototype.ngOnInit=function(){var n,i,a,l,c,u,p,t=this;M.fF.assertValue(this.goal,"No goal to edit"),this.displayedGoal=_.cloneDeep(this.goal),this.startDateShort=null===(a=null===(i=this.displayedGoal)||void 0===i?void 0:i.startDate)||void 0===a?void 0:a.slice(0,10),this.completionDateShort=null===(c=null===(l=this.displayedGoal)||void 0===l?void 0:l.completionDate)||void 0===c?void 0:c.slice(0,10);var y=$e.r.buildCurrentGoalValue(this.goal);if(this.currentTarget={timestamp:y.timestamp,target:y.target},y.target=void 0,this.currentValue=y,this.supportMultipleValuesEditing=this.featureSwitches.featureSwitches.goalsMultipleValuesEditor,this.supportMultipleTargets=this.featureSwitches.featureSwitches.powerBIGoalsMultipleTargets,this.supportMultipleTargets&&(this.currentTarget=$e.r.getCurrentGoalTarget(this.displayedGoal),!this.currentTarget)){var P=Le.E.getCurrentUTCDay();P.setMonth(P.getMonth()+1),this.currentTarget={timestamp:P.toISOString()}}var x=this.displayedGoal.owner;this.selectedUsers=x?[{displayName:"",userPrincipalName:x,objectId:"",objectType:1,isSecurityGroup:!1}]:[];var N=this.displayedGoal.additionalOwners;_.isEmpty(N)||(n=this.selectedUsers).push.apply(n,N.filter(function(te){return te.userPrincipalName}).map(function(te){return{displayName:"",userPrincipalName:te.userPrincipalName,objectId:"",objectType:1,isSecurityGroup:!1}})),this.showUpdateRules=this.featureSwitches.featureSwitches.powerBIGoalsStatusRules,this.bulkDeleteEnabled=this.featureSwitches.featureSwitches.goalsBulkDelete,this.selectedGoalIds$=this.scorecardService.getSelectedGoalIdsObservable();var W=this.scorecardService.getColumnSettings();this.showDueDate$=W.pipe((0,V.x)(),(0,xe.U)(function(te){return K.isColumnVisible(te,5)})),this.showOwner$=W.pipe((0,V.x)(),(0,xe.U)(function(te){return K.isColumnVisible(te,1)})),this.showStatus$=W.pipe((0,V.x)(),(0,xe.U)(function(te){return K.isColumnVisible(te,2)})),this.maxGoalOwnerCount=this.featureSwitches.featureSwitches.powerBIGoalsMultipleGoalOwners?Dl.MaxGoalOwnerCount:1,null===(p=null===(u=this.settingsService)||void 0===u?void 0:u.settings)||void 0===p||p.pipe((0,ue.q)(1)).subscribe(function(te){var me;t.isSingleGoalVisual=!_.isNil(null===(me=_.first(te.filters))||void 0===me?void 0:me.goalId)}),this.goalStatuses$=this.scorecardService.goalStatusesByScorecardId$.pipe((0,xe.U)(function(te){return te[t.goal.scorecardId]})),this.updateCapabilities()},o.prototype.ngAfterViewInit=function(){this.displayedGoal.isNew&&this.nameInput.nativeElement.focus()},o.prototype.ngOnChanges=function(n){n.goal&&this.displayedGoal&&!this.goal.isNew&&(this.displayedGoal.hasStatusRules=this.goal.hasStatusRules,this.updateCapabilities(),this.displayedGoal.cycleMetadata=(0,S.pi)({},this.goal.cycleMetadata),this.displayedGoal.metadata=(0,S.pi)({},this.goal.metadata),this.displayedGoal.cycle=this.goal.cycle,this.displayedGoal.cyclePeriod=this.goal.cyclePeriod,this.displayedGoal.cycleRollingInterval=this.goal.cycleRollingInterval)},o.prototype.onSelectGoalCheckbox=function(){this.scorecardService.toggleSelectedGoal(this.displayedGoal.id,!1,!0)},o.prototype.onSave=function(){var n,t,i,a,l,c,u,p,y,P,x,N,W,te;return(0,S.mG)(this,void 0,void 0,function(){var ve,Re,Xe,ot,Dt,ct,mt,H;return(0,S.Jh)(this,function(ce){switch(ce.label){case 0:return _.isNil(this.goal.valueRollup)||_.isUndefined(this.goalCurrentValueSelection)||4===(null===(n=this.goalCurrentValueSelection)||void 0===n?void 0:n.type)?[3,2]:[4,this.scorecardService.deleteGoalValueRollup(this.displayedGoal.id,1)];case 1:ce.sent(),ce.label=2;case 2:return _.isNil(this.goal.targetRollup)||_.isUndefined(this.goalTargetValueSelection)||4===(null===(t=this.goalTargetValueSelection)||void 0===t?void 0:t.type)?[3,4]:[4,this.scorecardService.deleteGoalValueRollup(this.displayedGoal.id,2)];case 3:ce.sent(),ce.label=4;case 4:return!_.isUndefined(this.goalCurrentValueSelection)&&1!==(null===(i=this.goalCurrentValueSelection)||void 0===i?void 0:i.type)&&this.goal.valueConnection?[4,this.scorecardService.deleteGoalQueryConnection(this.displayedGoal.id,1)]:[3,6];case 5:if(!1===(null!==(a=ce.sent())&&void 0!==a&&a))return[2];ce.label=6;case 6:return!_.isUndefined(this.goalTargetValueSelection)&&1!==(null===(l=this.goalTargetValueSelection)||void 0===l?void 0:l.type)&&this.goal.targetConnection?[4,this.scorecardService.deleteGoalQueryConnection(this.displayedGoal.id,2)]:[3,8];case 7:if(!1===(null!==(c=ce.sent())&&void 0!==c&&c))return[2];ce.label=8;case 8:if(!$e.r.allGoalInputsValid(this.displayedGoal))return[2];_.isEmpty(this.selectedUsers)?(this.displayedGoal.owner="",this.displayedGoal.additionalOwners=[]):(this.displayedGoal.owner=this.selectedUsers[0].userPrincipalName||this.selectedUsers[0].emailAddress,ve=this.selectedUsers.slice(1).map(function(Qe){return{userPrincipalName:Qe.userPrincipalName||Qe.emailAddress}}),this.displayedGoal.additionalOwners=ve),ce.label=9;case 9:return ce.trys.push([9,31,,32]),this.scorecardService.setGoalState(this.displayedGoal.id,"Saving"),[4,this.scorecardService.saveGoal(this.displayedGoal.id,this.displayedGoal)];case 10:return Re=ce.sent(),this.displayedGoal.id=Re,Xe=_.cloneDeep(this.currentValue),ot=_.cloneDeep(this.currentTarget),(this.displayedGoal.valueConnection||!_.isNil(null===(u=this.displayedGoal)||void 0===u?void 0:u.valueRollup)||!_.isUndefined(null===(p=this.goalCurrentValueSelection)||void 0===p?void 0:p.rollupType))&&(Xe.value=void 0,this.values=void 0),(this.displayedGoal.targetConnection||!_.isNil(null===(y=this.displayedGoal)||void 0===y?void 0:y.targetRollup)||!_.isUndefined(null===(P=this.goalTargetValueSelection)||void 0===P?void 0:P.rollupType))&&(ot.target=void 0,this.targets=void 0),this.supportMultipleTargets||(Xe.target=ot.target),_.isEmpty(this.displayedGoal.goalValues)?[4,this.scorecardService.saveGoalValue(this.displayedGoal.id,Xe)]:[3,12];case 11:return ce.sent(),[3,14];case 12:return ct=$e.r.buildCurrentGoalValue(this.displayedGoal,!0),qt.areGoalValuesEqual(Xe,ct,!_.isNil(this.displayedGoal.valueConnection),this.supportMultipleTargets||!_.isNil(this.displayedGoal.targetConnection))?[3,14]:(Dt=qt.diffGoalValues(Xe,ct),[4,this.scorecardService.saveGoalValue(this.displayedGoal.id,Dt)]);case 13:ce.sent(),ce.label=14;case 14:return this.supportMultipleValuesEditing&&this.values?[4,this.scorecardService.overwriteMultipleGoalValues(this.displayedGoal.id,this.values)]:[3,16];case 15:ce.sent(),ce.label=16;case 16:return this.supportMultipleTargets?this.targets?[4,this.scorecardService.overwriteGoalTargets(this.displayedGoal.id,this.targets)]:[3,18]:[3,20];case 17:return ce.sent(),[3,20];case 18:return void 0===ot.target||(ct=$e.r.buildCurrentGoalValue(this.displayedGoal)).target===ot.target?[3,20]:[4,this.scorecardService.saveGoalValue(this.displayedGoal.id,ot)];case 19:ce.sent(),ce.label=20;case 20:return _.isUndefined(null===(x=this.goalCurrentValueSelection)||void 0===x?void 0:x.rollupType)?[3,22]:[4,this.scorecardService.upsertGoalValueRollup(this.displayedGoal.id,1,this.goalCurrentValueSelection.rollupType)];case 21:ce.sent(),ce.label=22;case 22:return _.isUndefined(null===(N=this.goalTargetValueSelection)||void 0===N?void 0:N.rollupType)?[3,24]:[4,this.scorecardService.upsertGoalValueRollup(this.displayedGoal.id,2,this.goalTargetValueSelection.rollupType)];case 23:ce.sent(),ce.label=24;case 24:return[4,this.scorecardService.updateGoalQueryConnection(this.displayedGoal.id,1,this.displayedGoal.valueConnection)];case 25:return ce.sent(),[4,this.scorecardService.updateGoalQueryConnection(this.displayedGoal.id,2,this.displayedGoal.targetConnection)];case 26:return ce.sent(),this.displayedGoal.isNew&&this.newGoalRules?[4,this.scorecardService.saveStatusRules(this.displayedGoal.id,this.newGoalRules)]:[3,28];case 27:ce.sent(),ce.label=28;case 28:return this.scorecardService.setGoalState(this.displayedGoal.id,"Consumption"),this.isSingleGoalVisual?(mt=this.scorecardService.getCurrentScorecard(),H=this,[4,this.scorecardService.getGoal(this.displayedGoal.id).pipe((0,Rt.h)(function(Qe){return!Qe.currentRefreshInProgress&&!Qe.targetRefreshInProgress}),(0,ue.q)(1)).toPromise()]):[3,30];case 29:H.displayedGoal=ce.sent(),this.scorecardHost.onUpdateScorecard(mt),this.scorecardHost.onSelectGoals([this.displayedGoal]),this.scorecardHost.showGoals(!1,mt,[this.displayedGoal]),ce.label=30;case 30:return _.isNil(null===(W=this.goalCurrentValueSelection)||void 0===W?void 0:W.type)||this.telemetryService.logEvent(Jr,{calculationType:this.getMetricCalculationType(this.goalCurrentValueSelection.type)}),_.isNil(null===(te=this.goalTargetValueSelection)||void 0===te?void 0:te.type)||this.telemetryService.logEvent(Zi,{calculationType:this.getMetricCalculationType(this.goalTargetValueSelection.type)}),[3,32];case 31:return ce.sent(),M.fF.assertFail("Could not save goal"),this.scorecardService.setGoalState(this.displayedGoal.id,"Editing"),[3,32];case 32:return[2]}})})},o.prototype.onUpdateStatusRules=function(){var n=this;this.displayedGoal.isNew?this.detailsPaneLauncher.openGoalStatusRulesPane(this.scorecardService.getGoalStatuses(this.displayedGoal),this.displayedGoal,this.newGoalRules,function(t){return(0,S.mG)(n,void 0,void 0,function(){return(0,S.Jh)(this,function(i){return t=_.some(t?.rules)?t:void 0,this.newGoalRules=t,this.displayedGoal.hasStatusRules=!!t,this.updateCapabilities(),[2,t]})})}):this.detailsPaneLauncher.openGoalDetails(this.scorecardService,this.goal.id,uo.ShowStatusRules,this.scorecardConfigurationService.getConfiguration())},o.prototype.onCancel=function(){this.scorecardService.cancelEditing(this.displayedGoal.id)},o.prototype.onStartDateChange=function(n){var t=new Date(n);_.isEmpty(n)||!_.isFinite(t.getTime())||(this.displayedGoal.startDate=t.toISOString(),this.startDateShort=n)},o.prototype.onDueDateChange=function(n){var t=new Date(n);_.isEmpty(n)||!_.isFinite(t.getTime())||(this.displayedGoal.completionDate=t.toISOString(),this.completionDateShort=n)},o.prototype.onSetCustomStatusesClick=function(){},o.prototype.onStatusChange=function(n){M.fF.assert(function(){return!!n},"status should not be null"),this.currentValue.status=n.id},o.prototype.allValid=function(){return $e.r.allGoalInputsValid(this.displayedGoal)},o.prototype.onCategoryListIdChanged=function(n){this.displayedGoal.valuesCategoryId=n,this.updateCapabilities()},o.prototype.onConnectionChanged=function(){this.updateCapabilities()},o.prototype.onTargetsChanged=function(n){this.updateCapabilities(n)},o.prototype.onValueRollupChanged=function(n){4!==n.type&&this.updateCapabilities(),this.goalCurrentValueSelection=n},o.prototype.onTargetRollupChanged=function(n){4!==n.type&&this.updateCapabilities(),this.goalTargetValueSelection=n},o.prototype.updateCapabilities=function(n){var t=this.displayedGoal;n&&(t=(0,S.pi)((0,S.pi)({},t),{aggregations:(0,S.ev)((0,S.ev)([],_.filter(t.aggregations,function(i){return"NumberOfTargets"!==i.type}),!0),[{type:"NumberOfTargets",value:n.length}],!1)})),this.capabilities=this.capabilityService.getCurrentGoalCapabilities(t),this.capabilities.useCategoricalValues=this.capabilities.useCategoricalValues&&!this.isSingleGoalVisual},o.prototype.getMetricCalculationType=function(n){switch(n){case 1:return on.Connect;case 4:return on.Rollup;case 0:case 2:return on.Manual;default:return void M.fF.assertNever(n)}},o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(en.vZ),e.\u0275\u0275directiveInject(Ht),e.\u0275\u0275directiveInject(Vi.V),e.\u0275\u0275directiveInject(ri),e.\u0275\u0275directiveInject(eo),e.\u0275\u0275directiveInject(Gt.y0),e.\u0275\u0275directiveInject(Zt,8),e.\u0275\u0275directiveInject(Cn,8))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["","goal-edit-row",""]],viewQuery:function(t,i){if(1&t&&(e.\u0275\u0275viewQuery(Ld,5),e.\u0275\u0275viewQuery(Xs,5)),2&t){var a=void 0;e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(i.nameInput=a.first),e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(i.valueInput=a.first)}},inputs:{color:"color",goal:"goal",indent:"indent"},features:[e.\u0275\u0275NgOnChangesFeature],attrs:Nd,decls:26,vars:42,consts:[[1,"checkmark-td"],["class","select-checkmark",3,"box-checked",4,"ngIf"],["class","cell cell-indent",4,"ngFor","ngForOf"],[1,"cell","cell-left-edge","cell-right-edge"],[1,"cell-box"],[1,"color-box"],[1,"edit-row-content"],[1,"input-box-lg","goal-name"],[1,"input-title",3,"localize"],[1,"input-box"],["data-testid","goal-name-input-box","type","text",3,"maxlength","ngModel","disabled","keyup.enter","ngModelChange"],["nameInput",""],[4,"ngIf"],[1,"divider"],[1,"inner-input-box-with-rollups",3,"displayedGoal","currentValue","currentTarget","values","targets","goalStatuses","capabilities","displayedGoalChange","currentValueChange","currentTargetChange","valuesChange","targetsChange","onCategoryListIdChanged","onConnectionChanged","valueRollupsChange","targetRollupsChange","onSave"],["valueInput",""],[1,"select-checkmark"],[3,"checked","disabled","onChange"],[1,"cell","cell-indent"],[1,"input-box-md"],["localize","Owners_Lowercase",1,"input-title"],["data-testid","goal-owners-input",1,"input-box","goal-owners-input"],[3,"allowAnyGroup","maxSelectableUsers","ngModel","addUserOnBlur","inputPlaceholder","disabled","hideInput","ngModelChange"],[1,"divider","width-override"],[1,"input-box-sm"],["localize","Status",1,"input-title"],[3,"canCustomizeStatus","status","goalStatuses","pbiTooltip","pbiTooltipDisabled","isReadOnly","onSelect"],["class","input-action-txt",4,"ngIf"],[1,"input-action-txt"],["localize","Logical_Or_Operator",4,"ngIf"],[1,"link",3,"localize","click"],["localize","Logical_Or_Operator"],[1,"input-box-xs","right-padding","input-box-with-rollups"],["localize","Start_Date",1,"input-title"],["data-testid","start-date-input","type","date",3,"min","max","ngModel","disabled","ngModelChange"],[1,"input-box-xs","input-box-with-rollups"],[1,"input-title"],[1,"glyphicon","glyph-small","pbi-glyph-info","icon",3,"pbiTooltip"],["data-testid","due-date-input","type","date",3,"min","max","ngModel","disabled","ngModelChange"]],template:function(t,i){var a;(1&t&&(e.\u0275\u0275elementStart(0,"td",0),e.\u0275\u0275template(1,zd,4,8,"div",1),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(2,Hd,1,0,"td",2),e.\u0275\u0275elementStart(3,"td",3),e.\u0275\u0275pipe(4,"async"),e.\u0275\u0275elementStart(5,"div",4),e.\u0275\u0275element(6,"div",5),e.\u0275\u0275elementStart(7,"div",6)(8,"div",7),e.\u0275\u0275element(9,"div",8),e.\u0275\u0275elementStart(10,"div",9)(11,"input",10,11),e.\u0275\u0275listener("keyup.enter",function(){return i.onSave()})("ngModelChange",function(c){return i.displayedGoal.name=c}),e.\u0275\u0275pipe(13,"localize"),e.\u0275\u0275pipe(14,"localize"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(15,Bd,8,9,"ng-container",12),e.\u0275\u0275pipe(16,"async"),e.\u0275\u0275elementStart(17,"div",13),e.\u0275\u0275element(18,"div"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"goal-value-input",14,15),e.\u0275\u0275listener("displayedGoalChange",function(c){return i.displayedGoal=c})("currentValueChange",function(c){return i.currentValue=c})("currentTargetChange",function(c){return i.currentTarget=c})("valuesChange",function(c){return i.values=c})("targetsChange",function(c){return i.targets=c})("onCategoryListIdChanged",function(c){return i.onCategoryListIdChanged(c)})("onConnectionChanged",function(){return i.onConnectionChanged()})("targetsChange",function(c){return i.onTargetsChanged(c)})("valueRollupsChange",function(c){return i.onValueRollupChanged(c)})("targetRollupsChange",function(c){return i.onTargetRollupChanged(c)})("onSave",function(){return i.onSave()}),e.\u0275\u0275pipe(21,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(22,Wd,9,11,"ng-container",12),e.\u0275\u0275pipe(23,"async"),e.\u0275\u0275template(24,$d,17,20,"ng-container",12),e.\u0275\u0275pipe(25,"async"),e.\u0275\u0275elementEnd()()()),2&t)&&(e.\u0275\u0275classProp("bulk-editing-off",!i.bulkDeleteEnabled),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.bulkDeleteEnabled),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pureFunction0(41,Qd).constructor(i.indentation)),e.\u0275\u0275advance(1),e.\u0275\u0275classProp("selected-goal",null==(a=e.\u0275\u0275pipeBind1(4,27,i.selectedGoalIds$))?null:a[i.displayedGoal.id]),e.\u0275\u0275attribute("colspan",i.TotalNumberOfColumns-i.indentation-1),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("cell-box-with-rollups",i.capabilities.supportsRollup),e.\u0275\u0275advance(1),e.\u0275\u0275styleProp("background-color",i.color),e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("localize",0===i.indentation?"MetricName":"SubmetricName"),e.\u0275\u0275advance(2),e.\u0275\u0275property("maxlength",i.GoalNameMaxLength)("ngModel",i.displayedGoal.name)("disabled",!i.capabilities.editName),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(13,29,0===i.indentation?"MetricName":"SubmetricName"))("placeholder",e.\u0275\u0275pipeBind1(14,31,"NameYourMetric")),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(16,33,i.showOwner$)),e.\u0275\u0275advance(4),e.\u0275\u0275property("displayedGoal",i.displayedGoal)("currentValue",i.currentValue)("currentTarget",i.currentTarget)("values",i.values)("targets",i.targets)("goalStatuses",e.\u0275\u0275pipeBind1(21,35,i.goalStatuses$))("capabilities",i.capabilities),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(23,37,i.showStatus$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(25,39,i.showDueDate$)))},dependencies:[U.NgForOf,U.NgIf,Rc,se.Fj,se.JJ,se.nD,se.On,jt.X,ac.v,Ee.V,Xs,Ac,U.AsyncPipe,xt.F],styles:[".cell[_ngcontent-%COMP%]{border:none;box-sizing:border-box}.cell-indent[_ngcontent-%COMP%]{width:36px}.cell-left-edge[_ngcontent-%COMP%]{border-top-left-radius:4px;border-bottom-left-radius:4px}.cell-right-edge[_ngcontent-%COMP%]{border-top-right-radius:4px;border-bottom-right-radius:4px}.cell-box[_ngcontent-%COMP%]{display:flex;height:100%}.cell-box[_ngcontent-%COMP%]   .color-box[_ngcontent-%COMP%]{min-width:6px;width:6px;border-top-left-radius:4px;border-bottom-left-radius:4px}[_nghost-%COMP%]   td[_ngcontent-%COMP%]{height:100px}[_nghost-%COMP%]   .select-checkmark[_ngcontent-%COMP%]{margin-right:15px}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]{background-color:var(--scorecard-tableEditRowBackgroundColor);color:var(--scorecard-tableEditRowForegroundColor);border-top:1px solid var(--fluent-theme-neutral-light-color, #EDEBE9);border-bottom:1px solid var(--fluent-theme-neutral-light-color, #EDEBE9)}[_nghost-%COMP%]   .cell.cell-right-edge[_ngcontent-%COMP%]{border-right:1px solid var(--fluent-theme-neutral-light-color, #EDEBE9)}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]   .cell-box-with-rollups[_ngcontent-%COMP%]   .edit-row-content[_ngcontent-%COMP%]{padding-left:12px;padding-right:12px}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]   .cell-box-with-rollups[_ngcontent-%COMP%]   goal-value-input[_ngcontent-%COMP%]{flex:none;max-width:none;min-width:392px}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]   .cell-box-with-rollups[_ngcontent-%COMP%]   .inner-input-box-with-rollups[_ngcontent-%COMP%]{max-width:none}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]   .cell-box-with-rollups[_ngcontent-%COMP%]   .input-box-with-rollups[_ngcontent-%COMP%]{width:104px;max-width:104px;min-width:auto}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]   .cell-box-with-rollups[_ngcontent-%COMP%]   .input-box-with-rollups[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:4px 6px}[_nghost-%COMP%]:hover   .select-checkmark[_ngcontent-%COMP%], [_nghost-%COMP%]   .select-checkmark.box-checked[_ngcontent-%COMP%]{visibility:visible}[_nghost-%COMP%]   .checkmark-td[_ngcontent-%COMP%]{width:35px;max-width:35px}[_nghost-%COMP%]   .checkmark-td.bulk-editing-off[_ngcontent-%COMP%]{width:0px;max-width:0px}[_nghost-%COMP%]   .select-checkmark[_ngcontent-%COMP%]{visibility:hidden;margin-right:15px}[_nghost-%COMP%]   .select-checkmark[_ngcontent-%COMP%]     pbi-checkbox{margin-bottom:0}[_nghost-%COMP%]   .input-title[_ngcontent-%COMP%]{font-size:var(--lg-font-size, 16px);font-weight:var(--font-weight-semi-bold, 600);padding-top:9px;padding-bottom:4px}[_nghost-%COMP%]   .input-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{vertical-align:middle;padding:0}[_nghost-%COMP%]   .input-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{cursor:pointer}[_nghost-%COMP%]   .edit-row-content[_ngcontent-%COMP%]{display:flex;flex:1;padding-left:20px;padding-right:20px;width:1000px;min-width:1000px}[_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);height:32px;padding:6px 8px;box-sizing:border-box;color:var(--scorecard-tableInputForegroundColor);background:var(--scorecard-tableInputBackgroundColor);border:1px solid var(--gray-110, #8A8886);border-radius:2px}[_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{filter:brightness(90%)}[_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:invalid{border:2px solid var(--fluent-theme-error-dark-alt-color, #D83B01);outline-color:var(--fluent-theme-error-dark-alt-color, #D83B01)}[_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   input[readonly][_ngcontent-%COMP%]{filter:brightness(90%)}[_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-input-placeholder, [_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:-ms-input-placeholder, [_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::placeholder{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);color:var(--scorecard-tableInputForegroundColor)}[_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{padding:0;margin:0}[_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-outer-spin-button, [_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}[_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}[_nghost-%COMP%]   .right-padding[_ngcontent-%COMP%]{padding-right:8px}[_nghost-%COMP%]   .input-action-txt[_ngcontent-%COMP%]{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);color:var(--scorecard-tableEditRowForegroundColor);padding-top:4px}[_nghost-%COMP%]   .input-action-txt[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{color:var(--scorecard-tableRowLinkColor);cursor:pointer;text-decoration:none;background-color:transparent;border:none;padding:0}[_nghost-%COMP%]   .input-action-txt[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]:hover{color:var(--fluent-theme-link-darker-color, #005A9E)}[_nghost-%COMP%]   .input-action-txt[_ngcontent-%COMP%]   .link.inactive[_ngcontent-%COMP%]{color:var(--fluent-theme-neutral-tertia-color, #A19F9D);pointer-events:none}[_nghost-%COMP%]   .divider[_ngcontent-%COMP%]{padding-top:8px;padding-bottom:8px}[_nghost-%COMP%]   .divider[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:1px;height:100%;background-color:var(--gray-80, #B3B0AD);margin:0 12px}[_nghost-%COMP%]   .width-override[_ngcontent-%COMP%]{width:24px}[_nghost-%COMP%]     .mat-form-field{background:var(--scorecard-tableInputBackgroundColor)!important}[_nghost-%COMP%]     emails-list-modern.disabled .mat-form-field{filter:brightness(95%)}[_nghost-%COMP%]   .goal-owners-input[_ngcontent-%COMP%]{padding-bottom:9px}[_nghost-%COMP%]   goal-value-input[_ngcontent-%COMP%]{flex:1 0 260px;max-width:400px}[_nghost-%COMP%]   .input-box-xs[_ngcontent-%COMP%]{flex:1 1 100px;max-width:140px;min-width:110px}[_nghost-%COMP%]   .input-box-sm[_ngcontent-%COMP%]{flex:1 1 100px;max-width:200px;min-width:140px}[_nghost-%COMP%]   .input-box-md[_ngcontent-%COMP%]{flex:1 1 200px;max-width:300px;min-width:130px}[_nghost-%COMP%]   .input-box-lg[_ngcontent-%COMP%]{flex:1 1 250px;min-width:150px}[_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),o}(),Jd=["chart"],Xd=["goal-row",""];function qd(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",5)(1,"pbi-checkbox",6),e.\u0275\u0275listener("onChange",function(){e.\u0275\u0275restoreView(t);var l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.onSelectGoalCheckbox())}),e.\u0275\u0275elementEnd()()}if(2&o){var i=e.\u0275\u0275nextContext();e.\u0275\u0275classProp("box-checked",null==i.scorecard||null==i.scorecard.selectedGoalIds?null:i.scorecard.selectedGoalIds[i.displayedGoal.id]),e.\u0275\u0275advance(1),e.\u0275\u0275property("checked",i.isChecked)}}function Zd(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",5)(1,"pbi-radio-button",7),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(t);var l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.onSelectGoalCheckbox())}),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275elementEnd()()}if(2&o){var i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("disabled",!i.canSelectGoal)("pbiTooltip",i.selectGoalDisabledTooltip?e.\u0275\u0275pipeBind1(2,5,i.selectGoalDisabledTooltip):"")("pbiTooltipDisabled",i.canSelectGoal)("isCompact",!0)("checked",i.isChecked)}}function Yd(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",5)(1,"pbi-checkbox",8),e.\u0275\u0275listener("onChange",function(){e.\u0275\u0275restoreView(t);var l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.onSelectGoalCheckbox())}),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275elementEnd()()}if(2&o){var i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("disabled",!i.canSelectGoal)("pbiTooltip",i.selectGoalDisabledTooltip?e.\u0275\u0275pipeBind1(2,4,i.selectGoalDisabledTooltip):"")("pbiTooltipDisabled",i.canSelectGoal)("checked",i.isChecked)}}function Kd(o,n){1&o&&e.\u0275\u0275element(0,"td",9)}function ep(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"button",29),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var l=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(l.onShowChildrenChange())}),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275pipe(3,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&o){var i=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(1),e.\u0275\u0275classProp("rotate90",!i.showChildren),e.\u0275\u0275property("pbiTooltip",e.\u0275\u0275pipeBind1(3,6,i.showChildren?"Collapse_Expand_Submetrics_Button_Functional_Description_Hide_Submetrics":"Collapse_Expand_Submetrics_Button_Functional_Description_Show_Submetrics")),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(2,4,i.showChildren?"Collapse_Expand_Submetrics_Button_Functional_Description_Hide_Submetrics":"Collapse_Expand_Submetrics_Button_Functional_Description_Show_Submetrics"))}}function tp(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",30),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(t);var l=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(l.onGoalRowClick(a))}),e.\u0275\u0275elementEnd()}}function np(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"td",21)(1,"div",22)(2,"div",23),e.\u0275\u0275listener("click",function(u){e.\u0275\u0275restoreView(t);var p=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(p.onGoalRowClick(u))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,ep,4,8,"ng-container",24),e.\u0275\u0275template(4,tp,1,0,"ng-template",null,25,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(6,"div",26),e.\u0275\u0275element(7,"goal-name-cell",27)(8,"goal-actions-cell",28),e.\u0275\u0275pipe(9,"async"),e.\u0275\u0275elementEnd()()()}if(2&o){var i=e.\u0275\u0275reference(5),a=e.\u0275\u0275nextContext(2).$implicit,l=e.\u0275\u0275nextContext();e.\u0275\u0275styleProp("--borderColor",l.color)("max-width",l.forceColumnMinWidths?l.ListViewCellMinWidths[a.columnId]+"px":void 0)("min-width",l.ListViewCellMinWidths[a.columnId],"px"),e.\u0275\u0275classProp("selected-goal",(null==l.scorecard||null==l.scorecard.selectedGoalIds?null:l.scorecard.selectedGoalIds[l.displayedGoal.id])||l.highlightRow),e.\u0275\u0275attribute("colspan",l.MAX_COLSPAN-l.indentation),e.\u0275\u0275advance(2),e.\u0275\u0275styleProp("background-color",l.color),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",l.hasVisibleChildren)("ngIfElse",i),e.\u0275\u0275advance(4),e.\u0275\u0275property("goal",l.displayedGoal)("scorecard",l.scorecard),e.\u0275\u0275advance(1),e.\u0275\u0275property("goal",l.displayedGoal)("isEditMode",e.\u0275\u0275pipeBind1(9,17,l.isEditMode$))}}function ip(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"td",31),e.\u0275\u0275listener("click",function(p){e.\u0275\u0275restoreView(t);var y=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(y.onGoalRowClick(p))}),e.\u0275\u0275element(1,"goal-owners-cell",32),e.\u0275\u0275elementEnd()}if(2&o){var i=e.\u0275\u0275nextContext(2),a=i.$implicit,l=i.last,c=e.\u0275\u0275nextContext();e.\u0275\u0275styleProp("max-width",c.forceColumnMinWidths?c.ListViewCellMinWidths[a.columnId]+"px":void 0)("min-width",c.ListViewCellMinWidths[a.columnId],"px")("--borderColor",c.color),e.\u0275\u0275classProp("selected-goal",(null==c.scorecard||null==c.scorecard.selectedGoalIds?null:c.scorecard.selectedGoalIds[c.displayedGoal.id])||c.highlightRow)("cell-right-edge",l),e.\u0275\u0275advance(1),e.\u0275\u0275property("goal",c.displayedGoal)}}function op(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"td",33),e.\u0275\u0275listener("click",function(p){e.\u0275\u0275restoreView(t);var y=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(y.onGoalRowClick(p))}),e.\u0275\u0275element(1,"status-icon",34),e.\u0275\u0275elementEnd()}if(2&o){var i=e.\u0275\u0275nextContext(2),a=i.$implicit,l=i.last,c=e.\u0275\u0275nextContext();e.\u0275\u0275styleProp("max-width",c.forceColumnMinWidths?c.ListViewCellMinWidths[a.columnId]+"px":void 0)("min-width",c.ListViewCellMinWidths[a.columnId],"px")("--borderColor",c.color),e.\u0275\u0275classProp("selected-goal",(null==c.scorecard||null==c.scorecard.selectedGoalIds?null:c.scorecard.selectedGoalIds[c.displayedGoal.id])||c.highlightRow)("cell-right-edge",l),e.\u0275\u0275advance(1),e.\u0275\u0275property("status",null==c.currentValue?null:c.currentValue.status)("goalStatuses",c.goalStatuses)}}function rp(o,n){if(1&o&&e.\u0275\u0275element(0,"goal-change-cell",32),2&o){var t=e.\u0275\u0275nextContext(4);e.\u0275\u0275property("goal",t.displayedGoal)}}function ap(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"td",35),e.\u0275\u0275listener("click",function(P){e.\u0275\u0275restoreView(t);var x=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(x.onGoalRowClick(P))}),e.\u0275\u0275element(1,"goal-value-cell",36),e.\u0275\u0275template(2,rp,1,1,"goal-change-cell",37),e.\u0275\u0275elementEnd()}if(2&o){var u,p,i=e.\u0275\u0275nextContext(2),a=i.$implicit,l=i.last,c=e.\u0275\u0275nextContext();e.\u0275\u0275styleProp("max-width",c.forceColumnMinWidths?c.ListViewCellMinWidths[a.columnId]+"px":void 0)("min-width",c.ListViewCellMinWidths[a.columnId],"px")("--borderColor",c.color),e.\u0275\u0275classProp("selected-goal",(null==c.scorecard||null==c.scorecard.selectedGoalIds?null:c.scorecard.selectedGoalIds[c.displayedGoal.id])||c.highlightRow)("cell-right-edge",l),e.\u0275\u0275advance(1),e.\u0275\u0275property("goal",c.displayedGoal)("showCurrent",!0)("showTarget",null!==(u=null==c.displayedGoal.metadata?null:c.displayedGoal.metadata.showFinalTarget)&&void 0!==u?u:!c.displayedGoal.targetConnection)("showMilestone",!(null!==(p=null==c.displayedGoal.metadata?null:c.displayedGoal.metadata.showFinalTarget)&&void 0!==p?p:!c.displayedGoal.targetConnection)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",c.isChangeVisible)}}function lp(o,n){if(1&o&&e.\u0275\u0275element(0,"goal-change-cell",32),2&o){var t=e.\u0275\u0275nextContext(4);e.\u0275\u0275property("goal",t.displayedGoal)}}function sp(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"td",38),e.\u0275\u0275listener("click",function(p){e.\u0275\u0275restoreView(t);var y=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(y.onGoalRowClick(p))}),e.\u0275\u0275element(1,"goal-value-cell",39),e.\u0275\u0275template(2,lp,1,1,"goal-change-cell",37),e.\u0275\u0275elementEnd()}if(2&o){var i=e.\u0275\u0275nextContext(2),a=i.$implicit,l=i.last,c=e.\u0275\u0275nextContext();e.\u0275\u0275styleProp("max-width",c.forceColumnMinWidths?c.ListViewCellMinWidths[a.columnId]+"px":void 0)("min-width",c.ListViewCellMinWidths[a.columnId],"px")("--borderColor",c.color),e.\u0275\u0275classProp("selected-goal",(null==c.scorecard||null==c.scorecard.selectedGoalIds?null:c.scorecard.selectedGoalIds[c.displayedGoal.id])||c.highlightRow)("cell-right-edge",l),e.\u0275\u0275advance(1),e.\u0275\u0275property("goal",c.displayedGoal)("showCurrent",!0),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",c.isChangeVisible)}}function cp(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"td",40),e.\u0275\u0275listener("click",function(p){e.\u0275\u0275restoreView(t);var y=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(y.onGoalRowClick(p))}),e.\u0275\u0275element(1,"goal-value-cell",41),e.\u0275\u0275elementEnd()}if(2&o){var i=e.\u0275\u0275nextContext(2),a=i.$implicit,l=i.last,c=e.\u0275\u0275nextContext();e.\u0275\u0275styleProp("max-width",c.forceColumnMinWidths?c.ListViewCellMinWidths[a.columnId]+"px":void 0)("min-width",c.ListViewCellMinWidths[a.columnId],"px")("--borderColor",c.color),e.\u0275\u0275classProp("selected-goal",(null==c.scorecard||null==c.scorecard.selectedGoalIds?null:c.scorecard.selectedGoalIds[c.displayedGoal.id])||c.highlightRow)("cell-right-edge",l),e.\u0275\u0275advance(1),e.\u0275\u0275property("goal",c.displayedGoal)("showTarget",!0)}}function up(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"td",42),e.\u0275\u0275listener("click",function(p){e.\u0275\u0275restoreView(t);var y=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(y.onGoalRowClick(p))}),e.\u0275\u0275element(1,"goal-value-cell",43),e.\u0275\u0275elementEnd()}if(2&o){var i=e.\u0275\u0275nextContext(2),a=i.$implicit,l=i.last,c=e.\u0275\u0275nextContext();e.\u0275\u0275styleProp("max-width",c.forceColumnMinWidths?c.ListViewCellMinWidths[a.columnId]+"px":void 0)("min-width",c.ListViewCellMinWidths[a.columnId],"px")("--borderColor",c.color),e.\u0275\u0275classProp("selected-goal",(null==c.scorecard||null==c.scorecard.selectedGoalIds?null:c.scorecard.selectedGoalIds[c.displayedGoal.id])||c.highlightRow)("cell-right-edge",l),e.\u0275\u0275advance(1),e.\u0275\u0275property("goal",c.displayedGoal)("showMilestone",!0)}}function dp(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"td",44,45),e.\u0275\u0275listener("click",function(p){e.\u0275\u0275restoreView(t);var y=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(y.onGoalRowClick(p))}),e.\u0275\u0275element(2,"goal-sparkline-cell",46),e.\u0275\u0275elementEnd()}if(2&o){var i=e.\u0275\u0275nextContext(2),a=i.$implicit,l=i.last,c=e.\u0275\u0275nextContext();e.\u0275\u0275styleProp("max-width",c.forceColumnMinWidths?c.ListViewCellMinWidths[a.columnId]+"px":void 0)("min-width",c.ListViewCellMinWidths[a.columnId],"px")("--borderColor",c.color),e.\u0275\u0275classProp("selected-goal",(null==c.scorecard||null==c.scorecard.selectedGoalIds?null:c.scorecard.selectedGoalIds[c.displayedGoal.id])||c.highlightRow)("cell-right-edge",l),e.\u0275\u0275advance(2),e.\u0275\u0275property("goal",c.displayedGoal)("sparklineValues",c.sparklineValues)}}function pp(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"td",47),e.\u0275\u0275listener("click",function(p){e.\u0275\u0275restoreView(t);var y=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(y.onGoalRowClick(p))}),e.\u0275\u0275element(1,"goal-due-date-cell",32),e.\u0275\u0275elementEnd()}if(2&o){var i=e.\u0275\u0275nextContext(2),a=i.$implicit,l=i.last,c=e.\u0275\u0275nextContext();e.\u0275\u0275styleProp("max-width",c.forceColumnMinWidths?c.ListViewCellMinWidths[a.columnId]+"px":void 0)("min-width",c.ListViewCellMinWidths[a.columnId],"px")("--borderColor",c.color),e.\u0275\u0275classProp("selected-goal",(null==c.scorecard||null==c.scorecard.selectedGoalIds?null:c.scorecard.selectedGoalIds[c.displayedGoal.id])||c.highlightRow)("cell-right-edge",l),e.\u0275\u0275advance(1),e.\u0275\u0275property("goal",c.displayedGoal)}}function gp(o,n){1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,np,10,19,"td",12),e.\u0275\u0275template(2,ip,2,11,"td",13),e.\u0275\u0275template(3,op,2,12,"td",14),e.\u0275\u0275template(4,ap,3,15,"td",15),e.\u0275\u0275template(5,sp,3,13,"td",16),e.\u0275\u0275template(6,cp,2,12,"td",17),e.\u0275\u0275template(7,up,2,12,"td",18),e.\u0275\u0275template(8,dp,3,12,"td",19),e.\u0275\u0275template(9,pp,2,11,"td",20),e.\u0275\u0275elementContainerEnd()),2&o&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",0),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",1),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",2),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",3),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",7),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",8),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",9),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",4),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",5))}function hp(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0,10),e.\u0275\u0275template(1,gp,10,9,"ng-container",11),e.\u0275\u0275elementContainerEnd()),2&o){var t=n.$implicit;e.\u0275\u0275property("ngSwitch",t.columnId),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.show)}}var fp=function(){return[]},Nc=function(){function o(n,t,i,a,l,c,u,p){this.elementRef=n,this.scorecardService=t,this.featureSwitches=i,this.localizationService=a,this.scorecardConfigurationService=l,this.capabilityService=c,this.hierarchyService=u,this.goalRowService=p,this.showChildren=!0,this.highlightRow=!1,this.showChildrenChange=new e.EventEmitter,this.tabIndex=0,this.MAX_COLSPAN=pe.gT.MaxSubGoals+1,this.ListViewCellMinWidths=pe.gT.ListViewCellMinWidths,this.currentValue=null,this.displayedGoal=null,this.indentation=0,this.canSelectGoal=!0,M.fF.assertValue(this.hierarchyService,"No hierarchy service")}return Object.defineProperty(o.prototype,"goal",{set:function(t){var i,a,l,c,u;if(this.displayedGoal=t,this.capabilities=this.capabilityService.getCurrentGoalCapabilities(t),this.sparklineValues=no.buildSparklineValues(t,this.featureSwitches.featureSwitches.goalsSparklineChangeAggregations).map(function(y){return{value:y.value,timestamp:y.timestamp}}),this.sparklineOptions=no.getSparklineOptions(t,this.scorecardService.getGoalStatuses(t),this.scorecardConfigurationService.getConfiguration()),this.currentValue=$e.r.buildCurrentGoalValue(t),this.valueChange=$e.r.calculateValueChange(t,this.featureSwitches.featureSwitches.goalsSparklineChangeAggregations),this.hasValueOrTarget=!_.isNil(this.currentValue.value)||!_.isNil(this.currentValue.finalTarget)||!_.isNil(this.currentValue.nextTarget),this.displayedGoal.completionDate){var p=this.localizationService.currentLanguageLocale;this.completionDate=Le.E.treatAsLocalDate(new Date(this.displayedGoal.completionDate)).toLocaleDateString(p,{day:"numeric",month:"short",year:"numeric"})}this.hasVisibleChildren=_.some(t.subGoals,function(y){return!y.isHidden}),this.canSelectGoal=null===(a=null===(i=this.capabilities.selectGoal)||void 0===i?void 0:i.enabled)||void 0===a||a,this.selectGoalDisabledTooltip=null===(l=this.capabilities.selectGoal)||void 0===l?void 0:l.disabledMessageKey,this.showDisabledGoalSelected=null===(u=null===(c=this.capabilities.selectGoal)||void 0===c?void 0:c.disabledReasons)||void 0===u?void 0:u.has("AlreadyLinked")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"indent",{set:function(t){this.indentation=$e.r.getSafeIndentation(t)},enumerable:!1,configurable:!0}),o.prototype.ngOnInit=function(){this.isEditMode$=this.scorecardService.isEditMode(),this.bulkDeleteEnabled=this.featureSwitches.featureSwitches.goalsBulkDelete},o.prototype.ngOnChanges=function(n){var t,i,a,l;if(n.scorecard){var c=this.scorecardConfigurationService.getConfiguration();!(null===(t=c?.scorecardDisplayOptions)||void 0===t)&&t.isMobileLayout||this.scorecard.activeGoalId===this.displayedGoal.id&&this.focus(),this.isChangeVisible=K.isColumnVisible(this.scorecard.columnSettings,10)}n.goal&&(this.formatString=n.goal.currentValue.valuesFormatString,this.isCyclePeriodLabelLocalizable=$e.r.isCyclePeriodLabelLocalizable(null===(i=this.valueChange)||void 0===i?void 0:i.period)),(n.scorecard||n.goal)&&(this.goalStatuses=this.scorecardService.getGoalStatuses(this.displayedGoal),this.categories=this.scorecardService.getGoalValueCategories(this.displayedGoal),this.isChecked=this.canSelectGoal?null===(l=null===(a=this.scorecard)||void 0===a?void 0:a.selectedGoalIds)||void 0===l?void 0:l[this.displayedGoal.id]:this.showDisabledGoalSelected)},o.prototype.ngAfterViewInit=function(){var n;this.lineChartChangeObserver=X.observeAndRemoveFocusableAttributes(null===(n=this.chart)||void 0===n?void 0:n.nativeElement)},o.prototype.ngOnDestroy=function(){var n;null===(n=this.lineChartChangeObserver)||void 0===n||n.disconnect()},o.prototype.onShowChildrenChange=function(){this.showChildrenChange&&this.showChildrenChange.emit(!this.showChildren)},o.prototype.onGoalRowClick=function(n){this.goalRowService.onRowClick(this.displayedGoal,n)},o.prototype.onSelectGoalCheckbox=function(){this.goalRowService.onCheckboxClick(this.displayedGoal)},o.prototype.focus=function(){var n;null===(n=this.elementRef)||void 0===n||n.nativeElement.focus()},o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(Ht),e.\u0275\u0275directiveInject(en.vZ),e.\u0275\u0275directiveInject(St.o),e.\u0275\u0275directiveInject(Vi.V),e.\u0275\u0275directiveInject(eo),e.\u0275\u0275directiveInject(jn),e.\u0275\u0275directiveInject(gi))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["","goal-row",""]],viewQuery:function(t,i){var a;(1&t&&e.\u0275\u0275viewQuery(Jd,5),2&t)&&(e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(i.chart=a.first))},hostVars:1,hostBindings:function(t,i){2&t&&e.\u0275\u0275attribute("tabindex",i.tabIndex)},inputs:{color:"color",showChildren:"showChildren",scorecard:"scorecard",columnSettings:"columnSettings",highlightRow:"highlightRow",scorecardSelectionMode:"scorecardSelectionMode",goal:"goal",indent:"indent",forceColumnMinWidths:"forceColumnMinWidths"},outputs:{showChildrenChange:"showChildrenChange"},features:[e.\u0275\u0275NgOnChangesFeature],attrs:Xd,decls:6,vars:10,consts:[[1,"checkmark-td"],["class","select-checkmark",3,"box-checked",4,"ngIf"],["class","select-checkmark",4,"ngIf"],["class","cell cell-indent",4,"ngFor","ngForOf"],[3,"ngSwitch",4,"ngFor","ngForOf"],[1,"select-checkmark"],[3,"checked","onChange"],["name","selectGoalInVisual",1,"select-goal-in-visual-radio",3,"disabled","pbiTooltip","pbiTooltipDisabled","isCompact","checked","change"],[3,"disabled","pbiTooltip","pbiTooltipDisabled","checked","onChange"],[1,"cell","cell-indent"],[3,"ngSwitch"],[4,"ngIf"],["class","cell cell-left-edge",3,"selected-goal","--borderColor","max-width","min-width",4,"ngSwitchCase"],["class","cell cell-owner",3,"max-width","min-width","selected-goal","cell-right-edge","--borderColor","click",4,"ngSwitchCase"],["class","cell cell-progress-icon",3,"max-width","min-width","selected-goal","cell-right-edge","--borderColor","click",4,"ngSwitchCase"],["class","cell cell-value-combined",3,"max-width","min-width","selected-goal","cell-right-edge","--borderColor","click",4,"ngSwitchCase"],["class","cell cell-value",3,"max-width","min-width","selected-goal","cell-right-edge","--borderColor","click",4,"ngSwitchCase"],["class","cell cell-target",3,"max-width","min-width","selected-goal","cell-right-edge","--borderColor","click",4,"ngSwitchCase"],["class","cell cell-milestone",3,"max-width","min-width","selected-goal","cell-right-edge","--borderColor","click",4,"ngSwitchCase"],["class","cell cell-sparkline",3,"max-width","min-width","selected-goal","cell-right-edge","--borderColor","click",4,"ngSwitchCase"],["class","cell cell-due-date",3,"max-width","min-width","selected-goal","cell-right-edge","--borderColor","click",4,"ngSwitchCase"],[1,"cell","cell-left-edge"],[1,"cell-box"],[1,"color-box",3,"click"],[4,"ngIf","ngIfElse"],["noChildren",""],[1,"displayed-name-and-action-wrapper"],[3,"goal","scorecard"],[3,"goal","isEditMode"],[1,"collapse-box","powervisuals-glyph","chevron-down",3,"pbiTooltip","click"],[1,"collapse-box",3,"click"],[1,"cell","cell-owner",3,"click"],[3,"goal"],[1,"cell","cell-progress-icon",3,"click"],[3,"status","goalStatuses"],[1,"cell","cell-value-combined",3,"click"],[3,"goal","showCurrent","showTarget","showMilestone"],[3,"goal",4,"ngIf"],[1,"cell","cell-value",3,"click"],[3,"goal","showCurrent"],[1,"cell","cell-target",3,"click"],[3,"goal","showTarget"],[1,"cell","cell-milestone",3,"click"],[3,"goal","showMilestone"],[1,"cell","cell-sparkline",3,"click"],["chart",""],[3,"goal","sparklineValues"],[1,"cell","cell-due-date",3,"click"]],template:function(t,i){1&t&&(e.\u0275\u0275elementStart(0,"td",0),e.\u0275\u0275template(1,qd,2,3,"div",1),e.\u0275\u0275template(2,Zd,3,7,"div",2),e.\u0275\u0275template(3,Yd,3,6,"div",2),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,Kd,1,0,"td",3),e.\u0275\u0275template(5,hp,2,2,"ng-container",4)),2&t&&(e.\u0275\u0275classProp("show-checkmark",!!i.scorecardSelectionMode)("show-on-hover-only","ctrl"===i.scorecardSelectionMode),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","ctrl"===i.scorecardSelectionMode),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","single"===i.scorecardSelectionMode),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","multiple"===i.scorecardSelectionMode),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pureFunction0(9,fp).constructor(i.indentation)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",i.columnSettings))},dependencies:[U.NgForOf,U.NgIf,U.NgSwitch,U.NgSwitchCase,ac.v,B.o,Ee.V,mi,io,cr,Ot,ur,to,Go,Lo,U.AsyncPipe,xt.F],styles:[".cell[_ngcontent-%COMP%]{border:none;box-sizing:border-box}.cell-indent[_ngcontent-%COMP%]{width:36px}.cell-left-edge[_ngcontent-%COMP%]{border-top-left-radius:4px;border-bottom-left-radius:4px}.cell-right-edge[_ngcontent-%COMP%]{border-top-right-radius:4px;border-bottom-right-radius:4px}.cell-box[_ngcontent-%COMP%]{display:flex;height:100%}.cell-box[_ngcontent-%COMP%]   .color-box[_ngcontent-%COMP%]{min-width:6px;width:6px;border-top-left-radius:4px;border-bottom-left-radius:4px}.dialog-config[_ngcontent-%COMP%]     .simpleConfirmationDialog.updateConfirmationDialogPanel{width:580px}.dialog-config[_ngcontent-%COMP%]     .simpleConfirmationDialog.updateConfirmationDialogPanel .mat-mdc-dialog-actions button{border-width:1px;height:32px;padding:0;width:80px;margin-left:8px}.dialog-config[_ngcontent-%COMP%]     .simpleConfirmationDialog.updateConfirmationDialogPanel .mat-mdc-dialog-content{padding-left:8px}[_nghost-%COMP%]   td[_ngcontent-%COMP%]{height:60px}[_nghost-%COMP%]   .checkmark-td[_ngcontent-%COMP%]{width:35px;max-width:35px}[_nghost-%COMP%]   .checkmark-td[_ngcontent-%COMP%]:not(.show-checkmark){width:0px;max-width:0px}[_nghost-%COMP%]   .checkmark-td[_ngcontent-%COMP%]:not(.show-checkmark)   .select-checkmark[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .show-on-hover-only[_ngcontent-%COMP%]   .select-checkmark[_ngcontent-%COMP%]{visibility:hidden}[_nghost-%COMP%]:hover   .show-on-hover-only[_ngcontent-%COMP%]   .select-checkmark[_ngcontent-%COMP%], [_nghost-%COMP%]   .show-on-hover-only[_ngcontent-%COMP%]   .select-checkmark.box-checked[_ngcontent-%COMP%]{visibility:visible}[_nghost-%COMP%]   .select-checkmark[_ngcontent-%COMP%]{margin-right:15px}[_nghost-%COMP%]   .select-checkmark[_ngcontent-%COMP%]     pbi-checkbox{margin-bottom:0}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]{background:var(--scorecard-tableRowBackgroundColor);padding-right:10px;border-top:1px solid var(--fluent-theme-neutral-light-color, #EDEBE9);border-bottom:1px solid var(--fluent-theme-neutral-light-color, #EDEBE9)}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]   .rotate90[_ngcontent-%COMP%]{transform:rotate(-90deg)}[_nghost-%COMP%]   .cell-box[_ngcontent-%COMP%]{font-size:var(--lg-font-size, 16px);font-weight:var(--font-weight-regular, 400)}[_nghost-%COMP%]   .cell-box[_ngcontent-%COMP%]   .collapse-box[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:48px;min-width:48px;background-color:transparent;border:none}[_nghost-%COMP%]   .cell-box[_ngcontent-%COMP%]   .pointer[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   .cell-box[_ngcontent-%COMP%]   .displayed-name-and-action-wrapper[_ngcontent-%COMP%]{display:flex;width:100%}[_nghost-%COMP%]   .cell-box[_ngcontent-%COMP%]   .displayed-name-and-action-wrapper[_ngcontent-%COMP%]   goal-name-cell[_ngcontent-%COMP%]{flex-grow:1;max-height:3.6em;line-height:1.8em}[_nghost-%COMP%]   .cell-box[_ngcontent-%COMP%]   .displayed-name-and-action-wrapper[_ngcontent-%COMP%]   goal-actions-cell[_ngcontent-%COMP%]{margin-right:10px}[_nghost-%COMP%]   .cell-owner[_ngcontent-%COMP%]{width:250px;max-width:300px}[_nghost-%COMP%]   .cell-progress-icon[_ngcontent-%COMP%]{width:220px;max-width:250px;text-align:center;padding-right:20px}[_nghost-%COMP%]   .cell-sparkline[_ngcontent-%COMP%]{width:150px;overflow:hidden}[_nghost-%COMP%]   .cell-due-date[_ngcontent-%COMP%]{width:150px}[_nghost-%COMP%]   .cell-context-menu[_ngcontent-%COMP%]{width:51px;text-align:center}[_nghost-%COMP%]   .cell-context-menu[_ngcontent-%COMP%]   .context-menu-icon[_ngcontent-%COMP%]{color:var(--gray-140, #484644);font-size:16px;cursor:pointer}[_nghost-%COMP%]   .cell-value-combined[_ngcontent-%COMP%]{width:220px}[_nghost-%COMP%]   .cell-value[_ngcontent-%COMP%]{width:92px}[_nghost-%COMP%]   .cell-milestone[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-target[_ngcontent-%COMP%]{width:72px}[_nghost-%COMP%]   .cell-value-combined[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-value[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-milestone[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-target[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{overflow:visible}[_nghost-%COMP%]   .cell-value-combined[_ngcontent-%COMP%]   .mat-icon.glyph-small[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-value[_ngcontent-%COMP%]   .mat-icon.glyph-small[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-milestone[_ngcontent-%COMP%]   .mat-icon.glyph-small[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-target[_ngcontent-%COMP%]   .mat-icon.glyph-small[_ngcontent-%COMP%]{font-size:var(--lg-font-size, 16px);width:var(--lg-font-size, 16px);height:var(--lg-font-size, 16px)}[_nghost-%COMP%]   .cell-value-combined[_ngcontent-%COMP%]   .mat-icon.glyph-mini[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-value[_ngcontent-%COMP%]   .mat-icon.glyph-mini[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-milestone[_ngcontent-%COMP%]   .mat-icon.glyph-mini[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-target[_ngcontent-%COMP%]   .mat-icon.glyph-mini[_ngcontent-%COMP%]{font-size:var(--sm-font-size, 12px);width:var(--sm-font-size, 12px);height:var(--sm-font-size, 12px)}[_nghost-%COMP%]   .cell-value-combined[_ngcontent-%COMP%]   .mat-icon.mat-ligature-font[fontIcon][_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-value[_ngcontent-%COMP%]   .mat-icon.mat-ligature-font[fontIcon][_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-milestone[_ngcontent-%COMP%]   .mat-icon.mat-ligature-font[fontIcon][_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-target[_ngcontent-%COMP%]   .mat-icon.mat-ligature-font[fontIcon][_ngcontent-%COMP%]{overflow:auto}[_nghost-%COMP%]   goal-actions-cell[_ngcontent-%COMP%]{visibility:hidden}[_nghost-%COMP%]:hover   goal-actions-cell[_ngcontent-%COMP%], [_nghost-%COMP%]:focus-within   goal-actions-cell[_ngcontent-%COMP%]{visibility:visible}[_nghost-%COMP%]   .selected-goal.cell[_ngcontent-%COMP%]{border-top:2px solid var(--borderColor);border-bottom:2px solid var(--borderColor)}[_nghost-%COMP%]   .selected-goal.cell-right-edge[_ngcontent-%COMP%]{border-right:2px solid var(--borderColor)}[_nghost-%COMP%]   .cell-right-edge[_ngcontent-%COMP%]{width:2px;border-right:1px solid var(--fluent-theme-neutral-light-color, #EDEBE9)}  .simpleConfirmationDialog.updateConfirmationDialogPanel{width:580px}  .simpleConfirmationDialog.updateConfirmationDialogPanel .mat-mdc-dialog-actions button{border-width:1px;height:32px;padding:0;width:80px;margin-left:8px}  .simpleConfirmationDialog.updateConfirmationDialogPanel .mat-mdc-dialog-content{padding-left:8px}"],changeDetection:0}),o}(),mp=["goal-group",""];function vp(o,n){1&o&&e.\u0275\u0275elementContainer(0)}function Cp(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"td",9),e.\u0275\u0275element(1,"div"),e.\u0275\u0275elementEnd()),2&o){var t=n.index,i=e.\u0275\u0275nextContext(4);e.\u0275\u0275classProp("goal-drag-placeholder-line",i.goalDragInfo&&t>=i.goalDragInfo.destGoalDropLevel)}}var _p=function(){return[]};function yp(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"tr"),e.\u0275\u0275element(1,"td",6),e.\u0275\u0275template(2,Cp,2,2,"td",7),e.\u0275\u0275elementStart(3,"td",8),e.\u0275\u0275element(4,"div"),e.\u0275\u0275elementEnd()()),2&o){var t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275classProp("bulk-editing-off",!t.bulkDeleteEnabled),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pureFunction0(4,_p).constructor(t.MaxSubGoals)),e.\u0275\u0275advance(1),e.\u0275\u0275attribute("colspan",50)}}function bp(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275element(1,"div",10),e.\u0275\u0275elementStart(2,"div",11),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()),2&o){var t=e.\u0275\u0275nextContext(2).goal,i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275styleProp("background-color",i.color),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.name)}}var wp=function(n,t){return{goal:n,level:t}};function Sp(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"tr",3),e.\u0275\u0275listener("showChildrenChange",function(p){e.\u0275\u0275restoreView(t);var y=e.\u0275\u0275nextContext().goal,P=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(P.onShowChildrenChange(y.id,p))})("cdkDragStarted",function(p){e.\u0275\u0275restoreView(t);var y=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(y.onDragStart(p))})("cdkDragMoved",function(p){e.\u0275\u0275restoreView(t);var y=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(y.onDragMove(p))}),e.\u0275\u0275elementContainerStart(2),e.\u0275\u0275template(3,yp,5,5,"tr",4),e.\u0275\u0275template(4,bp,4,3,"div",5),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&o){var i=e.\u0275\u0275nextContext(),a=i.goal,l=i.i,c=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275classProp("disabled","Saving"===a.state||"Deleting"===a.state)("goal-not-match",!1===a.isFilterMatch),e.\u0275\u0275property("scorecard",c.scorecard)("columnSettings",c.columnSettings)("goal",a)("indent",l)("color",c.color)("highlightRow",c.goalDragInfo&&a.id===c.goalDragInfo.destParentGoalId)("scorecardSelectionMode",c.scorecardSelectionMode)("showChildren",c.showChildren[a.id])("forceColumnMinWidths",c.forceColumnMinWidths)("cdkDragData",e.\u0275\u0275pureFunction2(16,wp,a,l))("cdkDragDisabled","Saving"===a.state||"Deleting"===a.state)("cdkDragStartDelay",c.goalDragStartDelayInMs)}}function Mp(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275element(1,"tr",12,13),e.\u0275\u0275elementStart(3,"tr",14),e.\u0275\u0275listener("onSave",function(){e.\u0275\u0275restoreView(t);var y=e.\u0275\u0275reference(2);return e.\u0275\u0275resetView(y.onSave())})("onCancel",function(){e.\u0275\u0275restoreView(t);var y=e.\u0275\u0275reference(2);return e.\u0275\u0275resetView(y.onCancel())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&o){var i=e.\u0275\u0275reference(2),a=e.\u0275\u0275nextContext(),l=a.goal,c=a.i,u=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275classProp("goal-not-match",!1===l.isFilterMatch),e.\u0275\u0275property("goal",l)("indent",c)("color",u.color),e.\u0275\u0275advance(2),e.\u0275\u0275property("id",l.id)("disableSave",!i.allValid())}}function Pp(o,n){1&o&&e.\u0275\u0275elementContainer(0)}var xp=function(n,t){return{goal:n,i:t}};function Op(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Pp,1,0,"ng-container",0),e.\u0275\u0275elementContainerEnd()),2&o){var t=e.\u0275\u0275nextContext().$implicit,i=e.\u0275\u0275nextContext(2).i;e.\u0275\u0275nextContext();var a=e.\u0275\u0275reference(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngTemplateOutlet",a)("ngTemplateOutletContext",e.\u0275\u0275pureFunction2(2,xp,t,i+1))}}function Tp(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Op,2,5,"ng-container",2),e.\u0275\u0275elementContainerEnd()),2&o){var t=n.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.isHidden)}}function Ep(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Tp,2,1,"ng-container",15),e.\u0275\u0275elementContainerEnd()),2&o){var t=e.\u0275\u0275nextContext().goal,i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t.subGoals)("ngForTrackBy",i.goalId)}}function kp(o,n){if(1&o&&(e.\u0275\u0275template(0,Sp,5,19,"ng-container",2),e.\u0275\u0275template(1,Mp,4,7,"ng-container",2),e.\u0275\u0275template(2,Ep,2,2,"ng-container",2)),2&o){var t=n.goal,i=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",null==t.state||"Consumption"===t.state||"Saving"===t.state||"Deleting"===t.state),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Editing"===t.state),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(null==t.subGoals?null:t.subGoals.length)>0&&i.showChildren[t.id]&&(null==i.goalDragInfo?null:i.goalDragInfo.sourceGoalId)!==t.id)}}var Dp=function(n){return{goal:n,i:0}},Ip=function(n){return{dragStartThreshold:n.featureSwitches.goalsDelayDragAndDrop?pe.gT.GoalDragStartThresholdInPx:pe.gT.DefaultDragThresholdInPx,pointerDirectionChangeThreshold:pe.gT.DefaultDragThresholdInPx}},zc=function(){function o(n){this.featureSwitches=n,this.showChildren={},this.goalDragInfo={},this.showChildrenChange=new e.EventEmitter,this.dragMoved=new e.EventEmitter,this.dragStarted=new e.EventEmitter,this.MaxSubGoals=pe.gT.MaxSubGoals,this.goalDragStartDelayInMs=0}return o.prototype.ngOnInit=function(){this.bulkDeleteEnabled=this.featureSwitches.featureSwitches.goalsBulkDelete,this.goalDragStartDelayInMs=this.featureSwitches.featureSwitches.goalsDelayDragAndDrop?pe.gT.GoalDragStartDelayInMs:0},o.prototype.goalId=function(n,t){return t.id},o.prototype.onShowChildrenChange=function(n,t){this.showChildrenChange.emit({id:n,value:t})},o.prototype.onDragMove=function(n){this.dragMoved.emit(n)},o.prototype.onDragStart=function(n){this.dragStarted.emit(n)},o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(en.vZ))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["","goal-group",""]],inputs:{scorecard:"scorecard",columnSettings:"columnSettings",goal:"goal",color:"color",showChildren:"showChildren",goalDragInfo:"goalDragInfo",scorecardSelectionMode:"scorecardSelectionMode",forceColumnMinWidths:"forceColumnMinWidths"},outputs:{showChildrenChange:"showChildrenChange",dragMoved:"dragMoved",dragStarted:"dragStarted"},features:[e.\u0275\u0275ProvidersFeature([{provide:Y.ni,useFactory:Ip,deps:[en.vZ]}])],attrs:mp,decls:3,vars:4,consts:[[4,"ngTemplateOutlet","ngTemplateOutletContext"],["goalWithChildrenTmpl",""],[4,"ngIf"],["goal-row","","cdkDrag","",1,"goal-row",3,"scorecard","columnSettings","goal","indent","color","highlightRow","scorecardSelectionMode","showChildren","forceColumnMinWidths","cdkDragData","cdkDragDisabled","cdkDragStartDelay","showChildrenChange","cdkDragStarted","cdkDragMoved"],[4,"cdkDragPlaceholder"],[4,"cdkDragPreview"],["colspan","1",1,"goal-placeholder-checkbox"],["class","cell cell-indent",3,"goal-drag-placeholder-line",4,"ngFor","ngForOf"],[1,"goal-drag-placeholder-line"],[1,"cell","cell-indent"],[1,"goal-drag-preview-accent"],[1,"goal-drag-preview-content"],["goal-edit-row","","data-testid","goal-edit-row",1,"goal-edit-row",3,"goal","indent","color"],["editRow",""],["goal-edit-buttons-row","",1,"button-row",3,"id","disableSave","onSave","onCancel"],[4,"ngFor","ngForOf","ngForTrackBy"]],template:function(t,i){if(1&t&&(e.\u0275\u0275template(0,vp,1,0,"ng-container",0),e.\u0275\u0275template(1,kp,3,3,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)),2&t){var a=e.\u0275\u0275reference(2);e.\u0275\u0275property("ngTemplateOutlet",a)("ngTemplateOutletContext",e.\u0275\u0275pureFunction1(2,Dp,i.goal))}},dependencies:[U.NgForOf,U.NgIf,U.NgTemplateOutlet,Y.Zt,Y.pV,Y.Hk,Nc,kl,Lc],styles:[".cell[_ngcontent-%COMP%]{border:none;box-sizing:border-box}.cell-indent[_ngcontent-%COMP%]{width:36px}.cell-left-edge[_ngcontent-%COMP%]{border-top-left-radius:4px;border-bottom-left-radius:4px}.cell-right-edge[_ngcontent-%COMP%]{border-top-right-radius:4px;border-bottom-right-radius:4px}.cell-box[_ngcontent-%COMP%]{display:flex;height:100%}.cell-box[_ngcontent-%COMP%]   .color-box[_ngcontent-%COMP%]{min-width:6px;width:6px;border-top-left-radius:4px;border-bottom-left-radius:4px}[_nghost-%COMP%]   .goal-edit-row[_ngcontent-%COMP%]{box-sizing:border-box;border:none;height:96px}[_nghost-%COMP%]   .goal-not-match[_ngcontent-%COMP%]{opacity:50%}[_nghost-%COMP%]   .button-row[_ngcontent-%COMP%]{height:32px;box-sizing:border-box;border:none}[_nghost-%COMP%]   .disabled[_ngcontent-%COMP%]{opacity:.4}.row[_ngcontent-%COMP%]{box-sizing:border-box;border:none}.goal-row[_ngcontent-%COMP%]{box-sizing:border-box;border:none;height:60px}.cdk-drag-placeholder[_ngcontent-%COMP%]{height:2px}.goal-drag-placeholder-line[_ngcontent-%COMP%]{background-color:var(--fluent-theme-black-color, #000)}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border:none;height:60px;display:flex;width:25%;opacity:.7;background-color:var(--scorecard-tableBackgroundColor);font-family:var(--scorecard-fontFamily)}.goal-drag-preview-accent[_ngcontent-%COMP%]{width:6px;border-radius:4px;margin-right:12px}.goal-drag-preview-content[_ngcontent-%COMP%]{display:inline-flex;align-items:center;min-width:fit-content;overflow:hidden;text-overflow:ellipsis}.goal-placeholder-checkbox[_ngcontent-%COMP%]{width:35px}.goal-placeholder-checkbox.bulk-editing-off[_ngcontent-%COMP%]{width:0px}"],changeDetection:0}),o}();function Fp(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"visual-modern",2),e.\u0275\u0275listener("on-resize",function(l){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(c.onResize(l))}),e.\u0275\u0275elementEnd()}if(2&o){var i=e.\u0275\u0275nextContext();e.\u0275\u0275property("viewModel",i.visualDefinition)("useOnPushChangeDetection",!0)}}var Hc=function(){function o(n,t,i,a,l,c,u,p){this.geocoder=n,this.geolocation=t,this.localizationService=i,this.moduleLoader=a,this.promiseFactory=l,this.visualPlugin=c,this.visualHostTooltipServiceFactory=u,this.changeDetector=p,this.initialVisualWidth=360,this.initialVisualHeight=172}return o.prototype.ngOnInit=function(){var n=this;this.visualPlugin.ensureBuiltInPlugins().then(function(){n.initializeVisual(),n.isLoaded=!0,n.changeDetector.detectChanges()})},o.prototype.ngOnChanges=function(n){n.values&&(this.generateDataView(),this.update())},o.prototype.initializeVisual=function(){var n=this,t=(0,pr.ED)((0,_e.q)({geocoder:this.geocoder,geolocation:this.geolocation,localizationService:this.localizationService,moduleLoader:this.moduleLoader,promiseFactory:this.promiseFactory,visualHostTooltipService:this.visualHostTooltipServiceFactory.create(),getAzureMapToken:void 0,azureMapsEndpoint:void 0,geocoderIndexedDB:void 0}),function(i){i.getLocalizedString=function(a){for(var l,c=[],u=1;u<arguments.length;u++)c[u-1]=arguments[u];return(l=n.localizationService).format.apply(l,(0,S.ev)([a],c||[],!1))},i.getViewMode=function(){return 0},i.locale=function(){return(0,Bt.uD)()},i.promiseFactory=function(){return n.promiseFactory}});this.visualDefinition={interactivityOptions:{},type:Di.L.kpi.name,allowInvalidDataView:!0,themeCollection:void 0,viewport:{height:this.initialVisualHeight,width:this.initialVisualWidth,scale:1},dataTransforms:void 0,hostServices:t,visualAdapterHostServices:{startProgressBar:_.noop,stopProgressBar:_.noop,getNextDataSegment:function(){return(0,S.mG)(n,void 0,void 0,function(){return(0,S.Jh)(this,function(a){return[2,{}]})})}},stylePresetName:void 0,additionalObjectUpdates:_.noop,visualPlugin:this.visualPlugin},this.generateDataView(),this.update()},o.prototype.update=function(){this.visualDefinition&&(this.visualDefinition.data={dataView:this.dataView})},o.prototype.onResize=function(n){this.visualDefinition&&(this.visualDefinition.viewport={width:n.width,height:n.height,scale:1})},o.prototype.generateDataView=function(){var n,t,i=((n={})[Bn.iu.objectName]=((t={})[Bn.iu.propertyName]=this.formatString,t),n),a=[{displayName:this.localizationService.get("Date"),type:Vn.Ge.fromPrimitiveTypeAndCategory(6),roles:{TrendLine:!0}},{displayName:this.localizationService.get("Value"),type:Vn.Ge.fromPrimitiveTypeAndCategory(3),roles:{Indicator:!0},index:0,objects:i},{displayName:this.localizationService.get("MetricsName_New_Singular"),type:Vn.Ge.fromPrimitiveTypeAndCategory(3),roles:{Goal:!0},index:0,objects:i}],c=(0,et.Oh)((0,et.fL)("Date"),"Date"),u=_.sortBy(this.values,function(y){return new Date(y.timestamp)}),p=_.findLast(u,function(y){return _.isFinite(y.target)});u=_.filter(u,function(y){return _.isFinite(y.value)}),p&&(_.some(u)?_.last(u).target=p.target:u=[p]),this.dataView={metadata:{columns:a,objects:{indicator:{showIcon:!1}}},categorical:{categories:[{source:a[0],values:_.map(u,function(y){return Le.E.treatAsLocalDate(new Date(y.timestamp))}),identity:_.map(u,function(y){return(0,oi.TZ)((0,et.Dg)(c,(0,et.fL)(y.timestamp)))})}],values:(0,gr.Yv)([{source:a[1],values:_.map(u,function(y){return y.value})},{source:a[2],values:_.map(u,function(y){return y.target})}])}}},o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(Rn.i),e.\u0275\u0275directiveInject(dr._1),e.\u0275\u0275directiveInject(St.o),e.\u0275\u0275directiveInject(Kr.m),e.\u0275\u0275directiveInject(Io.t),e.\u0275\u0275directiveInject(ft.D),e.\u0275\u0275directiveInject(ke.q),e.\u0275\u0275directiveInject(e.ChangeDetectorRef))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["goal-kpi"]],inputs:{values:"values",formatString:"formatString"},features:[e.\u0275\u0275ProvidersFeature((0,S.ev)([],gl.H,!0)),e.\u0275\u0275NgOnChangesFeature],decls:2,vars:1,consts:[[1,"kpi-wrapper"],["class","kpi",3,"viewModel","useOnPushChangeDetection","on-resize",4,"ngIf"],[1,"kpi",3,"viewModel","useOnPushChangeDetection","on-resize"]],template:function(t,i){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275template(1,Fp,1,2,"visual-modern",1),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.isLoaded))},dependencies:[U.NgIf,hl.y,Fi.O],styles:["[_nghost-%COMP%]{min-height:150px;display:flex;height:100%;width:100%}.kpi-wrapper[_ngcontent-%COMP%]{flex:1;position:relative}.kpi-wrapper[_ngcontent-%COMP%]   .kpi[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0}"],changeDetection:0}),o}();function Gp(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"table",1)(1,"tbody")(2,"tr")(3,"td",2)(4,"div",3),e.\u0275\u0275element(5,"div",4),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"td",5),e.\u0275\u0275element(7,"goal-value-cell",6)(8,"goal-change-cell",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"td",8),e.\u0275\u0275element(10,"goal-sparkline-cell",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(11,"td",9),e.\u0275\u0275elementEnd()()()),2&o){var i,a,t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275styleProp("--borderColor",t.color),e.\u0275\u0275advance(2),e.\u0275\u0275styleProp("background-color",t.color),e.\u0275\u0275advance(1),e.\u0275\u0275styleProp("--borderColor",t.color),e.\u0275\u0275advance(1),e.\u0275\u0275property("goal",t.goal)("showCurrent",!0)("showTarget",null!==(i=null==t.goal.metadata?null:t.goal.metadata.showFinalTarget)&&void 0!==i?i:!t.goal.targetConnection)("showMilestone",!(null!==(a=null==t.goal.metadata?null:t.goal.metadata.showFinalTarget)&&void 0!==a?a:!t.goal.targetConnection)),e.\u0275\u0275advance(1),e.\u0275\u0275property("goal",t.goal),e.\u0275\u0275advance(1),e.\u0275\u0275styleProp("--borderColor",t.color),e.\u0275\u0275advance(1),e.\u0275\u0275property("goal",t.goal),e.\u0275\u0275advance(1),e.\u0275\u0275styleProp("--borderColor",t.color)}}var Vp=function(){function o(){this.color=pe.gT.ColorPalette[0]}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["goal-row-preview"]],inputs:{goal:"goal",color:"color"},decls:1,vars:1,consts:[["class","scorecard-table2","width","100%",4,"ngIf"],["width","100%",1,"scorecard-table2"],[1,"cell","cell-left-edge"],[1,"cell-box"],[1,"color-box"],["colspan","2",1,"cell","cell-value"],[3,"goal","showCurrent","showTarget","showMilestone"],[3,"goal"],["colspan","2",1,"cell","cell-sparkline"],[1,"cell","cell-value","cell-right-edge"]],template:function(t,i){1&t&&e.\u0275\u0275template(0,Gp,12,16,"table",0),2&t&&e.\u0275\u0275property("ngIf",i.goal)},dependencies:[U.NgIf,mi,Go,Lo],styles:[".cell[_ngcontent-%COMP%]{border:none;box-sizing:border-box}.cell-indent[_ngcontent-%COMP%]{width:36px}.cell-left-edge[_ngcontent-%COMP%]{border-top-left-radius:4px;border-bottom-left-radius:4px}.cell-right-edge[_ngcontent-%COMP%]{border-top-right-radius:4px;border-bottom-right-radius:4px}.cell-box[_ngcontent-%COMP%]{display:flex;height:100%}.cell-box[_ngcontent-%COMP%]   .color-box[_ngcontent-%COMP%]{min-width:6px;width:6px;border-top-left-radius:4px;border-bottom-left-radius:4px}.dialog-config[_ngcontent-%COMP%]     .simpleConfirmationDialog.updateConfirmationDialogPanel{width:580px}.dialog-config[_ngcontent-%COMP%]     .simpleConfirmationDialog.updateConfirmationDialogPanel .mat-mdc-dialog-actions button{border-width:1px;height:32px;padding:0;width:80px;margin-left:8px}.dialog-config[_ngcontent-%COMP%]     .simpleConfirmationDialog.updateConfirmationDialogPanel .mat-mdc-dialog-content{padding-left:8px}[_nghost-%COMP%]   td[_ngcontent-%COMP%]{height:60px}[_nghost-%COMP%]   .checkmark-td[_ngcontent-%COMP%]{width:35px;max-width:35px}[_nghost-%COMP%]   .checkmark-td[_ngcontent-%COMP%]:not(.show-checkmark){width:0px;max-width:0px}[_nghost-%COMP%]   .checkmark-td[_ngcontent-%COMP%]:not(.show-checkmark)   .select-checkmark[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .show-on-hover-only[_ngcontent-%COMP%]   .select-checkmark[_ngcontent-%COMP%]{visibility:hidden}[_nghost-%COMP%]:hover   .show-on-hover-only[_ngcontent-%COMP%]   .select-checkmark[_ngcontent-%COMP%], [_nghost-%COMP%]   .show-on-hover-only[_ngcontent-%COMP%]   .select-checkmark.box-checked[_ngcontent-%COMP%]{visibility:visible}[_nghost-%COMP%]   .select-checkmark[_ngcontent-%COMP%]{margin-right:15px}[_nghost-%COMP%]   .select-checkmark[_ngcontent-%COMP%]     pbi-checkbox{margin-bottom:0}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]{background:var(--scorecard-tableRowBackgroundColor);padding-right:10px;border-top:1px solid var(--fluent-theme-neutral-light-color, #EDEBE9);border-bottom:1px solid var(--fluent-theme-neutral-light-color, #EDEBE9)}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]   .rotate90[_ngcontent-%COMP%]{transform:rotate(-90deg)}[_nghost-%COMP%]   .cell-box[_ngcontent-%COMP%]{font-size:var(--lg-font-size, 16px);font-weight:var(--font-weight-regular, 400)}[_nghost-%COMP%]   .cell-box[_ngcontent-%COMP%]   .collapse-box[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:48px;min-width:48px;background-color:transparent;border:none}[_nghost-%COMP%]   .cell-box[_ngcontent-%COMP%]   .pointer[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   .cell-box[_ngcontent-%COMP%]   .displayed-name-and-action-wrapper[_ngcontent-%COMP%]{display:flex;width:100%}[_nghost-%COMP%]   .cell-box[_ngcontent-%COMP%]   .displayed-name-and-action-wrapper[_ngcontent-%COMP%]   goal-name-cell[_ngcontent-%COMP%]{flex-grow:1;max-height:3.6em;line-height:1.8em}[_nghost-%COMP%]   .cell-box[_ngcontent-%COMP%]   .displayed-name-and-action-wrapper[_ngcontent-%COMP%]   goal-actions-cell[_ngcontent-%COMP%]{margin-right:10px}[_nghost-%COMP%]   .cell-owner[_ngcontent-%COMP%]{width:250px;max-width:300px}[_nghost-%COMP%]   .cell-progress-icon[_ngcontent-%COMP%]{width:220px;max-width:250px;text-align:center;padding-right:20px}[_nghost-%COMP%]   .cell-sparkline[_ngcontent-%COMP%]{width:150px;overflow:hidden}[_nghost-%COMP%]   .cell-due-date[_ngcontent-%COMP%]{width:150px}[_nghost-%COMP%]   .cell-context-menu[_ngcontent-%COMP%]{width:51px;text-align:center}[_nghost-%COMP%]   .cell-context-menu[_ngcontent-%COMP%]   .context-menu-icon[_ngcontent-%COMP%]{color:var(--gray-140, #484644);font-size:16px;cursor:pointer}[_nghost-%COMP%]   .cell-value-combined[_ngcontent-%COMP%]{width:220px}[_nghost-%COMP%]   .cell-value[_ngcontent-%COMP%]{width:92px}[_nghost-%COMP%]   .cell-milestone[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-target[_ngcontent-%COMP%]{width:72px}[_nghost-%COMP%]   .cell-value-combined[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-value[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-milestone[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-target[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{overflow:visible}[_nghost-%COMP%]   .cell-value-combined[_ngcontent-%COMP%]   .mat-icon.glyph-small[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-value[_ngcontent-%COMP%]   .mat-icon.glyph-small[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-milestone[_ngcontent-%COMP%]   .mat-icon.glyph-small[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-target[_ngcontent-%COMP%]   .mat-icon.glyph-small[_ngcontent-%COMP%]{font-size:var(--lg-font-size, 16px);width:var(--lg-font-size, 16px);height:var(--lg-font-size, 16px)}[_nghost-%COMP%]   .cell-value-combined[_ngcontent-%COMP%]   .mat-icon.glyph-mini[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-value[_ngcontent-%COMP%]   .mat-icon.glyph-mini[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-milestone[_ngcontent-%COMP%]   .mat-icon.glyph-mini[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-target[_ngcontent-%COMP%]   .mat-icon.glyph-mini[_ngcontent-%COMP%]{font-size:var(--sm-font-size, 12px);width:var(--sm-font-size, 12px);height:var(--sm-font-size, 12px)}[_nghost-%COMP%]   .cell-value-combined[_ngcontent-%COMP%]   .mat-icon.mat-ligature-font[fontIcon][_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-value[_ngcontent-%COMP%]   .mat-icon.mat-ligature-font[fontIcon][_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-milestone[_ngcontent-%COMP%]   .mat-icon.mat-ligature-font[fontIcon][_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-target[_ngcontent-%COMP%]   .mat-icon.mat-ligature-font[fontIcon][_ngcontent-%COMP%]{overflow:auto}[_nghost-%COMP%]   goal-actions-cell[_ngcontent-%COMP%]{visibility:hidden}[_nghost-%COMP%]:hover   goal-actions-cell[_ngcontent-%COMP%], [_nghost-%COMP%]:focus-within   goal-actions-cell[_ngcontent-%COMP%]{visibility:visible}[_nghost-%COMP%]   .selected-goal.cell[_ngcontent-%COMP%]{border-top:2px solid var(--borderColor);border-bottom:2px solid var(--borderColor)}[_nghost-%COMP%]   .selected-goal.cell-right-edge[_ngcontent-%COMP%]{border-right:2px solid var(--borderColor)}[_nghost-%COMP%]   .cell-right-edge[_ngcontent-%COMP%]{width:2px;border-right:1px solid var(--fluent-theme-neutral-light-color, #EDEBE9)}  .simpleConfirmationDialog.updateConfirmationDialogPanel{width:580px}  .simpleConfirmationDialog.updateConfirmationDialogPanel .mat-mdc-dialog-actions button{border-width:1px;height:32px;padding:0;width:80px;margin-left:8px}  .simpleConfirmationDialog.updateConfirmationDialogPanel .mat-mdc-dialog-content{padding-left:8px}"],changeDetection:0}),o}(),Rp={day:"numeric",month:"numeric",year:"2-digit"},Bc=function(){function o(){}return o.prototype.transform=function(n,t){return new Date(n).toLocaleDateString(t,Rp)},o.\u0275fac=function(t){return new(t||o)},o.\u0275pipe=e.\u0275\u0275definePipe({name:"formatDate",type:o,pure:!0}),o}(),Ap=["chart"];function Lp(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",25),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){var t=e.\u0275\u0275nextContext();e.\u0275\u0275property("pbiTooltip",null==t.goal?null:t.goal.scorecardName),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",null==t.goal?null:t.goal.scorecardName," ")}}function Np(o,n){1&o&&e.\u0275\u0275elementContainer(0)}function zp(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"span",31)(1,"span",32),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"formatGoalValue"),e.\u0275\u0275elementEnd()()),2&o){var t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("localize",t.periodLocalizeString),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.valueChange.isPercentage?t.valueChange.changeAmount+"%":e.\u0275\u0275pipeBind3(3,2,t.valueChange.changeAmount,t.categories,t.goal.valuesFormatString))}}function Hp(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"span",31)(1,"span",32),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"formatGoalValue"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"span",33),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()()),2&o){var t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("localize",t.periodLocalizeString),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.valueChange.isPercentage?t.valueChange.changeAmount+"%":e.\u0275\u0275pipeBind3(3,3,t.valueChange.changeAmount,t.categories,t.goal.valuesFormatString)),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.valueChange.period)}}function Bp(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",28)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,zp,4,6,"span",29),e.\u0275\u0275template(4,Hp,6,7,"ng-template",null,30,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(6,"span"),e.\u0275\u0275text(7,")"),e.\u0275\u0275elementEnd()()),2&o){var t=e.\u0275\u0275reference(5),i=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("(",i.valueChange.isIncrease?"\u2191":"\u2193",""),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.periodLocalizeString&&!i.periodLocalizeString.endsWith("Custom"))("ngIfElse",t)}}function Up(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Np,1,0,"ng-container",26),e.\u0275\u0275template(2,Bp,8,3,"div",27),e.\u0275\u0275elementContainerEnd()),2&o){var t=e.\u0275\u0275nextContext(),i=e.\u0275\u0275reference(22);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngTemplateOutlet",i),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.settings.showGoalVisualGrowth&&!(t.supportCategoricalValues&&null!=t.goal&&t.goal.valuesCategoryId)&&t.hasData&&t.valueChange)}}var jp=function(n){return{userEmail:n}};function Wp(o,n){if(1&o&&e.\u0275\u0275element(0,"user-details-host",37),2&o){var i,t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("details",e.\u0275\u0275pureFunction1(4,jp,t.owners[0]))("photoSize",null!==(i=t.settings.goalVisualOwnerPhotoSize)&&void 0!==i?i:20)("showUserInfo",t.showOwnerName)("showTooltip",!0)}}function $p(o,n){if(1&o&&e.\u0275\u0275element(0,"avatar-row",38),2&o){var t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("emails",t.owners)("numAvatarsToShow",t.OwnersToShow)}}function Qp(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",34),e.\u0275\u0275template(1,Wp,1,6,"user-details-host",35),e.\u0275\u0275template(2,$p,1,2,"ng-template",null,36,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&o){var t=e.\u0275\u0275reference(3),i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",1===i.owners.length)("ngIfElse",t)}}function Jp(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"h1",39),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){var t=e.\u0275\u0275nextContext();e.\u0275\u0275property("pbiTooltip",null==t.goal?null:t.goal.name),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",null==t.goal?null:t.goal.name," ")}}function Xp(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"section",41)(1,"div",42,43),e.\u0275\u0275element(3,"goal-history-chart",44),e.\u0275\u0275elementEnd()()),2&o){var i,t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275property("values",t.goal.goalValues)("formatString",t.goal.valuesFormatString)("color",null!==(i=null==t.settings.theme?null:t.settings.theme.goalVisualCurrentLineColor)&&void 0!==i?i:t.statusColor)("targetLineColor",null==t.settings.theme?null:t.settings.theme.goalVisualTargetLineColor)("showGoalTargets",t.supportMultipleTargets&&t.settings.showGoalVisualTargetLine)("legend",t.supportMultipleTargets&&t.settings.showGoalVisualLegends?"Visible":"None")("showZoom",!1)("shadeCurrentArea",t.shadeCurrentArea)("type","ComboChart")("axesOptions",t.axesOptions)}}function qp(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Xp,4,10,"section",40),e.\u0275\u0275elementContainerEnd()),2&o){var i,t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null===(i=t.settings.showVisualization)||void 0===i||i)}}function Zp(o,n){if(1&o&&e.\u0275\u0275element(0,"status-icon",45),2&o){var t=e.\u0275\u0275nextContext();e.\u0275\u0275property("status",null==t.currentValue?null:t.currentValue.status)("goalStatuses",t.goal.goalStatuses)}}function Yp(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275element(1,"label",46),e.\u0275\u0275elementStart(2,"span"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"formatDate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&o){var t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(4,1,t.goal.completionDate,t.locale),"")}}function Kp(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"span",50),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){var t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.goal.notesCount," ")}}function eg(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",47),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.openNotes())}),e.\u0275\u0275pipe(1,"localize"),e.\u0275\u0275element(2,"tri-svg-icon",48),e.\u0275\u0275template(3,Kp,2,1,"span",49),e.\u0275\u0275elementEnd()}if(2&o){var i=e.\u0275\u0275nextContext();e.\u0275\u0275property("pbiTooltip",e.\u0275\u0275pipeBind1(1,2,"Notes")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",i.goal.notesCount>0)}}function tg(o,n){1&o&&e.\u0275\u0275elementContainer(0)}function ng(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",51),e.\u0275\u0275template(1,tg,1,0,"ng-container",26),e.\u0275\u0275elementEnd()),2&o){e.\u0275\u0275nextContext();var t=e.\u0275\u0275reference(22);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngTemplateOutlet",t)}}function ig(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",52)(1,"div",53)(2,"div",54),e.\u0275\u0275pipe(3,"formatValue"),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"formatValue"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",55),e.\u0275\u0275pipe(7,"formatValue"),e.\u0275\u0275text(8),e.\u0275\u0275pipe(9,"formatValue"),e.\u0275\u0275elementEnd()()()),2&o){var t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("pbiTooltip",e.\u0275\u0275pipeBind3(3,4,t.currentValue.value,t.goal.valuesFormatString,!1)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(5,8,t.currentValue.value,t.goal.valuesFormatString)," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("pbiTooltip",e.\u0275\u0275pipeBind3(7,11,t.currentValue.target,t.goal.valuesFormatString,!1)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" /",e.\u0275\u0275pipeBind2(9,15,t.currentValue.target,t.goal.valuesFormatString)," ")}}function og(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"button",21),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.onEdit())}),e.\u0275\u0275element(2,"tri-svg-icon",22)(3,"span",56),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}2&o&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("name","edit_20_regular"))}var zs=function(){function o(n,t,i,a,l){this.appSettings=n,this.featureSwitches=t,this.localizationService=i,this.cd=a,this.scorecardHost=l,this.currentValue=null,this.showGrowth=!1,this.showOwnerName=!1,this.shadeCurrentArea=!0,this.owners=[],this.OwnersToShow=4,this.supportCategoricalValues=this.featureSwitches.featureSwitches.goalsCategoricalValues,this.supportMultipleTargets=this.featureSwitches.featureSwitches.powerBIGoalsMultipleTargets}return Object.defineProperty(o.prototype,"scorecardRoutePath",{get:function(){return"/groups/".concat(this.goal.groupId||"me","/scorecards/").concat(this.goal.scorecardId).toLowerCase()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"inServiceUrl",{get:function(){return"".concat(this.appSettings.baseUrl).concat(this.scorecardRoutePath,"?goal=").concat(this.goal.id)},enumerable:!1,configurable:!0}),o.prototype.ngOnInit=function(){var t,i,a,n=this;M.fF.assertValue(this.goal,"Missing goal"),this.setDisplayedVals(),this.locale=this.localizationService.currentLanguageLocale,this.supportCategoricalValues&&null!==(t=this.goal)&&void 0!==t&&t.valuesCategoryId&&(this.categories=null!==(a=null===(i=_.find(this.goal.goalValueCategories,function(l){return l.id===n.goal.valuesCategoryId}))||void 0===i?void 0:i.categories)&&void 0!==a?a:[])},o.prototype.ngOnChanges=function(n){var t,i,a,l,c,u,p,y;if(n.goal&&(this.setDisplayedVals(),this.supportCategoricalValues&&n.goal.currentValue.valuesCategoryId&&(this.categories=null!==(a=null===(i=_.find(this.goal.goalValueCategories,function(x){return x.id===n.goal.currentValue.valuesCategoryId}))||void 0===i?void 0:i.categories)&&void 0!==a?a:[]),this.owners=this.goal.owner?[this.goal.owner]:[],this.goal.additionalOwners&&(t=this.owners).push.apply(t,this.goal.additionalOwners.map(function(x){return x.userPrincipalName}))),n.settings){this.cd.markForCheck();var P=n.settings.currentValue;this.isEditMode=!P?.disableEdit,this.axesOptions={xAxis:{show:null===(l=P?.showGoalVisualXAxis)||void 0===l||l,fontProperties:null===(c=P?.theme)||void 0===c?void 0:c.goalVisualXAxis},yAxis:{show:null===(u=P?.showGoalVisualYAxis)||void 0===u||u,fontProperties:null===(p=P?.theme)||void 0===p?void 0:p.goalVisualYAxis}},this.shadeCurrentArea=null===(y=P?.currentAreaShaded)||void 0===y||y}},o.prototype.ngAfterViewInit=function(){var n;this.lineChartChangeObserver=X.observeAndRemoveFocusableAttributes(null===(n=this.chart)||void 0===n?void 0:n.nativeElement)},o.prototype.ngOnDestroy=function(){var n;null===(n=this.lineChartChangeObserver)||void 0===n||n.disconnect()},o.prototype.openNotes=function(){this.scorecardHost.openNotes(this.goal)},o.prototype.onEdit=function(){this.scorecardHost.editGoal()},o.prototype.onOpenInService=function(){this.scorecardHost.openLink(this.inServiceUrl)},o.prototype.setDisplayedVals=function(){var n;this.currentValue=$e.r.buildCurrentGoalValue(this.goal),this.valueChange=$e.r.calculateValueChange(this.goal,this.featureSwitches.featureSwitches.goalsSparklineChangeAggregations),this.periodLocalizeString=_.isNil(null===(n=this.valueChange)||void 0===n?void 0:n.period)?void 0:"PercentGrowth_"+this.getPeriodSuffix(this.valueChange.period);var i=ie.p.getGoalStatus(this.currentValue.status,this.goal.goalStatuses);this.statusColor=ie.p.getGoalSparklineColor(i.color),this.sparklineValues=no.buildSparklineValues(this.goal,this.featureSwitches.featureSwitches.goalsSparklineChangeAggregations),this.hasData=_.some(this.sparklineValues)},o.prototype.getPeriodSuffix=function(n){switch(n){case"Period_DoD":case"Period_MoM":case"Period_QoQ":case"Period_WoW":case"Period_YoY":return n;default:return"Period_Custom"}},o.componentId="GoalTileComponentId",o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(qr.de),e.\u0275\u0275directiveInject(en.vZ),e.\u0275\u0275directiveInject(St.o),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(Zt,8))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["goal-tile"]],viewQuery:function(t,i){var a;(1&t&&e.\u0275\u0275viewQuery(Ap,5),2&t)&&(e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(i.chart=a.first))},inputs:{goal:"goal",settings:"settings"},features:[e.\u0275\u0275NgOnChangesFeature],decls:32,vars:17,consts:[[1,"goal-tile"],[1,"header-container"],["class","scorecard-name",3,"pbiTooltip",4,"ngIf"],[1,"details"],[1,"value-and-growth"],[4,"ngIf"],["class","owners",4,"ngIf"],["class","goal-name",3,"pbiTooltip",4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"footer-container"],[1,"status-and-date"],[3,"status","goalStatuses",4,"ngIf"],[1,"target-date"],[1,"notes-and-menu"],["mat-icon-button","",3,"pbiTooltip","click",4,"ngIf"],["mat-icon-button","",3,"matMenuTriggerFor"],["fontIcon","pbi-glyph-more",1,"glyph-small"],["noChart",""],["valueAndTarget",""],[1,"context-menu-dropdown",3,"xPosition"],["contextMenu","matMenu"],["mat-menu-item","",1,"goal-tile-context-menu-item",3,"click"],["tri-svg-icon-16","",3,"name"],["localize","OpenScorecard"],["localize","OpenNotes"],[1,"scorecard-name",3,"pbiTooltip"],[4,"ngTemplateOutlet"],["class","growth",4,"ngIf"],[1,"growth"],["class","period","localize-fragments","",3,"localize",4,"ngIf","ngIfElse"],["customPeriod",""],["localize-fragments","",1,"period",3,"localize"],["fragment-index","0"],["fragment-index","1"],[1,"owners"],[3,"details","photoSize","showUserInfo","showTooltip",4,"ngIf","ngIfElse"],["hasMultipleOwners",""],[3,"details","photoSize","showUserInfo","showTooltip"],[3,"emails","numAvatarsToShow"],[1,"goal-name",3,"pbiTooltip"],["class","visual-container",4,"ngIf"],[1,"visual-container"],[1,"visual"],["chart",""],[3,"values","formatString","color","targetLineColor","showGoalTargets","legend","showZoom","shadeCurrentArea","type","axesOptions"],[3,"status","goalStatuses"],["localize","Due"],["mat-icon-button","",3,"pbiTooltip","click"],["tri-svg-icon-16","","name","comment_16_regular",1,"tri-svg"],["class","notes-count",4,"ngIf"],[1,"notes-count"],[1,"no-chart"],[1,"value-wrapper"],[1,"value-target"],[1,"value",3,"pbiTooltip"],[1,"target",3,"pbiTooltip"],["localize","Edit_Metric"]],template:function(t,i){if(1&t&&(e.\u0275\u0275elementStart(0,"section",0)(1,"section",1),e.\u0275\u0275template(2,Lp,2,2,"div",2),e.\u0275\u0275elementStart(3,"div",3)(4,"div",4),e.\u0275\u0275template(5,Up,3,2,"ng-container",5),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,Qp,4,2,"div",6),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,Jp,2,2,"h1",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,qp,2,1,"ng-container",8),e.\u0275\u0275elementStart(9,"section",9)(10,"div",10),e.\u0275\u0275template(11,Zp,1,2,"status-icon",11),e.\u0275\u0275elementStart(12,"div",12),e.\u0275\u0275template(13,Yp,5,4,"ng-container",5),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"div",13),e.\u0275\u0275template(15,eg,4,4,"button",14),e.\u0275\u0275elementStart(16,"button",15),e.\u0275\u0275pipe(17,"localize"),e.\u0275\u0275element(18,"mat-icon",16),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(19,ng,2,1,"ng-template",null,17,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(21,ig,10,18,"ng-template",null,18,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"mat-menu",19,20),e.\u0275\u0275template(25,og,4,1,"ng-container",5),e.\u0275\u0275elementStart(26,"button",21),e.\u0275\u0275listener("click",function(){return i.onOpenInService()}),e.\u0275\u0275element(27,"tri-svg-icon",22)(28,"span",23),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"button",21),e.\u0275\u0275listener("click",function(){return i.openNotes()}),e.\u0275\u0275element(30,"tri-svg-icon",22)(31,"span",24),e.\u0275\u0275elementEnd()()),2&t){var a=e.\u0275\u0275reference(20),l=e.\u0275\u0275reference(24);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",i.settings.showGoalVisualScorecardName),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",i.hasData),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.settings.showGoalVisualOwner&&i.owners.length>0),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.settings.showGoalVisualGoalName),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.hasData)("ngIfElse",a),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",i.settings.showGoalVisualStatus),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",i.settings.showGoalVisualDueDate&&(null==i.goal?null:i.goal.completionDate)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",i.settings.showGoalVisualNotes),e.\u0275\u0275advance(1),e.\u0275\u0275property("matMenuTriggerFor",l),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(17,15,"HotkeyDialog_Open_Context_Menu")),e.\u0275\u0275advance(7),e.\u0275\u0275property("xPosition","after"),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",i.isEditMode),e.\u0275\u0275advance(2),e.\u0275\u0275property("name","open_20_regular"),e.\u0275\u0275advance(3),e.\u0275\u0275property("name","note_20_regular")}},dependencies:[U.NgIf,U.NgTemplateOutlet,jt.X,Ut.Hw,Pt.W0,Pt.tN,Pt.D8,Ee.V,ii.M,Fe.s,qe,Gi,io,xt.F,Ao.D,fi.c,Bc],styles:['.goal-tile[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;width:100%;height:100%;color:var(--fluent-theme-neutral-primary-alt-color, #3B3A39);background-color:var(--scorecard-goalVisualBackgroundColor);font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-regular, 400);white-space:nowrap}.goal-tile[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;padding:4px 7px;color:var(--fluent-theme-black-color, #000)}.goal-tile[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .scorecard-name[_ngcontent-%COMP%]{margin:0 0 4px;color:var(--scorecard-goalVisualScorecardName-color);font-size:var(--scorecard-goalVisualScorecardName-size);font-family:var(--scorecard-goalVisualScorecardName-family);font-weight:var(--scorecard-goalVisualScorecardName-weight);font-style:var(--scorecard-goalVisualScorecardName-style);text-decoration:var(--scorecard-goalVisualScorecardName-textDecoration)}.goal-tile[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.goal-tile[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .value-and-growth[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:baseline}.goal-tile[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .value-and-growth[_ngcontent-%COMP%]   .value-target[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:var(--scorecard-goalVisualCurrentValue-color);font-size:var(--scorecard-goalVisualCurrentValue-size);font-family:var(--scorecard-goalVisualCurrentValue-family);font-weight:var(--scorecard-goalVisualCurrentValue-weight);font-style:var(--scorecard-goalVisualCurrentValue-style);text-decoration:var(--scorecard-goalVisualCurrentValue-textDecoration)}.goal-tile[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .value-and-growth[_ngcontent-%COMP%]   .value-target[_ngcontent-%COMP%]   .target[_ngcontent-%COMP%]{color:var(--scorecard-goalVisualTargetValue-color);font-size:var(--scorecard-goalVisualTargetValue-size);font-family:var(--scorecard-goalVisualTargetValue-family);font-weight:var(--scorecard-goalVisualTargetValue-weight);font-style:var(--scorecard-goalVisualTargetValue-style);text-decoration:var(--scorecard-goalVisualTargetValue-textDecoration)}.goal-tile[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .value-and-growth[_ngcontent-%COMP%]   .growth[_ngcontent-%COMP%]{display:flex;align-items:center;padding-left:6px;color:var(--scorecard-goalVisualGrowth-color);font-size:var(--scorecard-goalVisualGrowth-size);font-family:var(--scorecard-goalVisualGrowth-family);font-weight:var(--scorecard-goalVisualGrowth-weight);font-style:var(--scorecard-goalVisualGrowth-style);text-decoration:var(--scorecard-goalVisualGrowth-textDecoration)}.goal-tile[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .value-and-growth[_ngcontent-%COMP%]   .growth[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{height:8px;width:8px}.goal-tile[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .value-and-growth[_ngcontent-%COMP%]   .growth[_ngcontent-%COMP%]   .period[_ngcontent-%COMP%]{padding-left:4px}.goal-tile[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .owners[_ngcontent-%COMP%]{display:flex;align-items:center}.goal-tile[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .owners[_ngcontent-%COMP%]     .user-info{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400)}.goal-tile[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .owners[_ngcontent-%COMP%]     .user-image{margin:0}.goal-tile[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .goal-name[_ngcontent-%COMP%]{margin:4px 0;color:var(--scorecard-goalVisualGoalName-color);font-size:var(--scorecard-goalVisualGoalName-size);font-family:var(--scorecard-goalVisualGoalName-family);font-weight:var(--scorecard-goalVisualGoalName-weight);font-style:var(--scorecard-goalVisualGoalName-style);text-decoration:var(--scorecard-goalVisualGoalName-textDecoration)}.goal-tile[_ngcontent-%COMP%]   .visual-container[_ngcontent-%COMP%]{display:flex;flex-grow:1;padding:4px 7px}.goal-tile[_ngcontent-%COMP%]   .visual-container[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]{flex:1;display:flex}.goal-tile[_ngcontent-%COMP%]   .visual-container[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   goal-history-chart[_ngcontent-%COMP%]{width:100%;flex:1}.goal-tile[_ngcontent-%COMP%]   .no-chart[_ngcontent-%COMP%]{display:flex;flex-grow:1;padding:4px 7px}.goal-tile[_ngcontent-%COMP%]   .no-chart[_ngcontent-%COMP%]   .value-wrapper[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center;justify-content:center}.goal-tile[_ngcontent-%COMP%]   .no-chart[_ngcontent-%COMP%]   .value-wrapper[_ngcontent-%COMP%]   .value-target[_ngcontent-%COMP%]{margin:auto}.goal-tile[_ngcontent-%COMP%]   .no-chart[_ngcontent-%COMP%]   .value-wrapper[_ngcontent-%COMP%]   .value-target[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:34px}.goal-tile[_ngcontent-%COMP%]   .no-chart[_ngcontent-%COMP%]   .value-wrapper[_ngcontent-%COMP%]   .value-target[_ngcontent-%COMP%]   .target[_ngcontent-%COMP%]{font-size:22px}.goal-tile[_ngcontent-%COMP%]   .value-target[_ngcontent-%COMP%]{display:flex;align-items:baseline}.goal-tile[_ngcontent-%COMP%]   .footer-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:4px 7px}.goal-tile[_ngcontent-%COMP%]   .footer-container[_ngcontent-%COMP%]   .status-and-date[_ngcontent-%COMP%], .goal-tile[_ngcontent-%COMP%]   .footer-container[_ngcontent-%COMP%]   .notes-and-menu[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.goal-tile[_ngcontent-%COMP%]   .footer-container[_ngcontent-%COMP%]   .status-and-date[_ngcontent-%COMP%]   .target-date[_ngcontent-%COMP%]{white-space:nowrap;text-overflow:ellipsis;overflow:hidden;color:var(--scorecard-goalVisualDueDate-color);font-size:var(--scorecard-goalVisualDueDate-size);font-family:var(--scorecard-goalVisualDueDate-family);font-weight:var(--scorecard-goalVisualDueDate-weight);font-style:var(--scorecard-goalVisualDueDate-style);text-decoration:var(--scorecard-goalVisualDueDate-textDecoration)}.goal-tile[_ngcontent-%COMP%]   .footer-container[_ngcontent-%COMP%]   .status-and-date[_ngcontent-%COMP%]   status-icon[_ngcontent-%COMP%]{padding-right:10px}.goal-tile[_ngcontent-%COMP%]   .footer-container[_ngcontent-%COMP%]   .status-and-date[_ngcontent-%COMP%]   status-icon[_ngcontent-%COMP%]     .status{white-space:nowrap;text-overflow:ellipsis;overflow:hidden;height:14px;line-height:14px;font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-regular, 400)}.goal-tile[_ngcontent-%COMP%]   .footer-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:relative;padding:0;border:none;background:none;height:100%;width:32px}.goal-tile[_ngcontent-%COMP%]   .footer-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:before{vertical-align:middle}.goal-tile[_ngcontent-%COMP%]   .footer-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .notes[_ngcontent-%COMP%]{color:var(--scorecard-goalVisualNotes-color);font-size:var(--scorecard-goalVisualNotes-size)}.goal-tile[_ngcontent-%COMP%]   .footer-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .notes-count[_ngcontent-%COMP%]{position:absolute;font-size:9px;font-weight:600;top:-1px;right:3px;border-radius:30px;padding:1px 4px;background:var(--fluent-theme-primary-color, #F2C811);color:var(--text-primary-content-color-hc, #000)}  .context-menu-dropdown{min-height:unset}  .context-menu-dropdown .mat-menu-content{padding:4px!important}  .context-menu-dropdown .mat-menu-content .goal-tile-context-menu-item{display:flex;flex-direction:row;align-items:center;justify-content:flex-start;padding:0 8px!important;max-height:32px}  .context-menu-dropdown .mat-menu-content .goal-tile-context-menu-item tri-svg-icon{margin-right:4px}'],changeDetection:0}),o}();function rg(o,n){1&o&&e.\u0275\u0275elementContainer(0)}var Uc=function(){function o(){}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["goals-tooltip"]],inputs:{args:"args"},decls:2,vars:2,consts:[["role","tooltip",1,"pbi-goals-tooltip-content","themeableElement",3,"id"],[4,"ngTemplateOutlet"]],template:function(t,i){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275template(1,rg,1,0,"ng-container",1),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("id",i.args.id),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngTemplateOutlet",i.args.templateRef))},dependencies:[U.NgTemplateOutlet],styles:["@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;overflow:auto;border-radius:2px;border:1px solid var(--scorecard-backgroundColor);background-color:var(--scorecard-backgroundColor);color:var(--scorecard-neutralPrimaryColor);box-shadow:0 0 2px var(--colorNeutralShadowAmbient),0 8px 16px var(--colorNeutralShadowKey);animation:_ngcontent-%COMP%_fade-in .15s ease;font-size:var(--sm-font-size, 12px);word-break:break-word}.pbi-goals-tooltip-content[_ngcontent-%COMP%]{background-color:var(--scorecard-backgroundColor);z-index:1;padding:7px}"],changeDetection:0}),o}(),Hs=function(){function o(n,t,i,a){this.sideFlyoutService=n,this.scorecardService=t,this.hierarchyService=i,this.telemetryService=a,this._showHierarchiesPane$=new Me.X(!1),this._showHeatmapConfigurationPane$=new Me.X(!1),this._showHeatmapDisplaySettingsPane$=new Me.X(!1),this.showHierarchiesPane$=this._showHierarchiesPane$.asObservable(),this.showHeatmapConfigurationPane$=this._showHeatmapConfigurationPane$.asObservable(),this.showHeatmapDisplaySettingsPane$=this._showHeatmapDisplaySettingsPane$.asObservable()}return o.prototype.openHierarchiesBuilder=function(n){return(0,S.mG)(this,void 0,void 0,function(){var t,a,l=this;return(0,S.Jh)(this,function(c){switch(c.label){case 0:return this.telemetryService.logEvent($t,{entryPoint:n}),t=new qn.t(1),this.sideFlyoutService.show({componentManifest:{componentId:"HierarchyBuilderPaneComponentId",modulePath:"@powerbi/GoalsHierarchy/goals-hierarchy.module#GoalsHierarchyModule",inputArgs:{scorecard$:this.scorecardService.getScorecard(),close:function(p){l.sideFlyoutService.hide(),t.next(p),t.complete()},saveQueryHierarchyAsUser:function(p){l.scorecardService.updateScorecard({queryHierarchyAsUser:p})}}},paneClass:"hierarchy-builder"}),[4,t.toPromise()];case 1:return c.sent()&&(a=this.scorecardService.getCurrentScorecard(),this.scorecardService.setActiveHierarchy(void 0),this.hierarchyService.loadHierarchies(a.groupId,a.id,!1)),[2]}})})},o.prototype.showHierarchiesPane=function(){this._showHierarchiesPane$.next(!0)},o.prototype.hideHierarchiesPane=function(){this._showHierarchiesPane$.next(!1)},o.prototype.showHeatmapConfigurationPane=function(){this.hideHeatmapDisplaySettingsPane(),this._showHeatmapConfigurationPane$.next(!0)},o.prototype.hideHeatmapConfigurationPane=function(){this._showHeatmapConfigurationPane$.next(!1)},o.prototype.showHeatmapDisplaySettingsPane=function(){this.hideHeatmapConfigurationPane(),this._showHeatmapDisplaySettingsPane$.next(!0)},o.prototype.hideHeatmapDisplaySettingsPane=function(){this._showHeatmapDisplaySettingsPane$.next(!1)},o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275inject(Mr.p),e.\u0275\u0275inject(Ht),e.\u0275\u0275inject(jn),e.\u0275\u0275inject(Eo.y0))},o.\u0275prov=e.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac}),o}(),jc=function(){function o(n,t,i){this.goalsHttpService=n,this.scorecardService=t,this.goalsErrorService=i,this._viewsById$=new Me.X(null),this._isSaving$=new Me.X(!1),this._isLoading$=new Me.X(!1),this.isLoading$=this._isLoading$,this.isSaving$=this._isSaving$,this.views$=this._viewsById$.pipe((0,Rt.h)(function(a){return!!a}),(0,V.x)(),(0,xe.U)(function(a){return _.values(a)}),(0,Fn.d)({bufferSize:1,refCount:!0}))}return Object.defineProperty(o.prototype,"defaultListView",{get:function(){return _.find(this._viewsById$.value,function(t){return t.isDefault&&"List"===t.viewType})},enumerable:!1,configurable:!0}),o.prototype.getDefaultView=function(n){return this.views$.pipe((0,xe.U)(function(t){return _.find(t,function(i){return i.isDefault&&i.viewType===n})}))},o.prototype.loadViews=function(n){return void 0===n&&(n=!1),(0,S.mG)(this,void 0,void 0,function(){var t,i;return(0,S.Jh)(this,function(a){switch(a.label){case 0:if(t=this.scorecardService.getCurrentScorecard(),!n&&null!==this._viewsById$.value||this._isLoading$.value)return[2];this._isLoading$.next(!0),a.label=1;case 1:return a.trys.push([1,,3,4]),[4,this.goalsHttpService.getScorecardViews(t.groupId,t.id).toPromise()];case 2:return i=a.sent(),this._viewsById$.next(_.keyBy(i,function(l){return l.id})),[3,4];case 3:return this._isLoading$.next(!1),[7];case 4:return[2]}})})},o.prototype.saveView=function(n){return(0,S.mG)(this,void 0,void 0,function(){var t,i;return(0,S.Jh)(this,function(a){switch(a.label){case 0:return t=this.scorecardService.getCurrentScorecard(),[4,this.loadViews()];case 1:a.sent(),this._isSaving$.next(!0),a.label=2;case 2:return a.trys.push([2,8,9,10]),this._viewsById$.value[n.id]?[4,this.goalsHttpService.updateScorecardView(t.groupId,t.id,n).toPromise()]:[3,4];case 3:return a.sent(),[3,6];case 4:return[4,this.goalsHttpService.createScorecardView(t.groupId,t.id,n).toPromise()];case 5:a.sent(),a.label=6;case 6:return[4,this.loadViews(!0)];case 7:return a.sent(),[3,10];case 8:return i=a.sent(),this.goalsErrorService.showUserError(i,"SaveViewError"),[3,10];case 9:return this._isSaving$.next(!1),[7];case 10:return[2]}})})},o.prototype.clearCache=function(){this._viewsById$.next(null)},o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275inject(zt.f),e.\u0275\u0275inject(Ht),e.\u0275\u0275inject(To))},o.\u0275prov=e.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac}),o}(),lc=function(){function o(n,t,i,a,l){var c=this;this.scorecardService=n,this.hierarchyService=t,this.localizationService=i,this.viewsService=a,this.goalsHttpService=l,this._goalsByHierarchyItemId$=new Me.X({}),this._selectedHierarchyItems$=new Me.X([]),this._displaySettings$=new Me.X({}),this.onDestroy$=new Ae.xQ,this._isLoadingView$=new Me.X(!1),this.hierarchyService.hierarchyItems$.pipe((0,be.R)(this.onDestroy$)).subscribe(function(u){var p;if(c._selectedHierarchyItems$.value.length>1){for(var y=[],P=(0,S.pi)({},c._goalsByHierarchyItemId$.value),x=0,N=c._selectedHierarchyItems$.value;x<N.length;x++){var W=N[x];if(W.id){var me=null===(p=Cr([oa(W)],u))||void 0===p?void 0:p[0];if(me?.id&&me.id!==W.id){y.push(me),P[me.id]=P[W.id],delete P[W.id];continue}}y.push(W)}c._selectedHierarchyItems$.next(y),c._goalsByHierarchyItemId$.next(P)}}),this.totalItem={id:void 0,value:this.localizationService.get("Visual_Totals"),parent:void 0,parentHierarchyItemId:void 0,level:0},this._hasViewChanges$=(0,_n.aj)([this.selectedHierarchyItems$,this.viewsService.getDefaultView("Heatmap")]).pipe((0,xe.U)(function(u){var p=u[0],y=u[1];return y?!_.isEqual(oo(p),y.heatmapViewDetails.hierarchyItemPaths):_.size(p)>1}),(0,Fn.d)({bufferSize:1,refCount:!0})),this._hasSettingsChanges$=(0,_n.aj)([this._displaySettings$,this.viewsService.getDefaultView("Heatmap")]).pipe((0,xe.U)(function(u){var p,y=u[0],P=u[1],x=null!==(p=P?.heatmapViewDetails.heatmapDisplaySettings)&&void 0!==p?p:pe.rl;return!_.isEqual(y,x)}),(0,Fn.d)({bufferSize:1,refCount:!0}))}return o.prototype.ngOnDestroy=function(){this.onDestroy$.next(!0),this.onDestroy$.complete()},Object.defineProperty(o.prototype,"goalsByHierarchyItemId$",{get:function(){return this._goalsByHierarchyItemId$},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"selectedHierarchyItems$",{get:function(){return this._selectedHierarchyItems$},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"selectedHierarchyItems",{get:function(){return this._selectedHierarchyItems$.value},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"displaySettings$",{get:function(){return this._displaySettings$},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"hasViewChanges$",{get:function(){return this._hasViewChanges$},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"hasSettingsChanges$",{get:function(){return this._hasSettingsChanges$},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isSaving$",{get:function(){return this.viewsService.isSaving$},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isLoading$",{get:function(){return this._isLoadingView$},enumerable:!1,configurable:!0}),o.prototype.addHierarchyItem=function(n){return(0,S.mG)(this,void 0,void 0,function(){var t;return(0,S.Jh)(this,function(i){switch(i.label){case 0:return t=_.uniqBy((0,S.ev)((0,S.ev)([],this._selectedHierarchyItems$.value,!0),[n],!1),function(a){return a.id}),this._selectedHierarchyItems$.next(t),[4,this.loadGoalsForHierarchyItem(n)];case 1:return i.sent(),[2]}})})},o.prototype.removeHierarchyItem=function(n){n.id?this._selectedHierarchyItems$.next(_.filter(this._selectedHierarchyItems$.value,function(t){return t.id!==n.id})):M.fF.assertFail("Cannot remove totals")},o.prototype.setHierarchyItems=function(n){return(0,S.mG)(this,void 0,void 0,function(){var t,i,a,l;return(0,S.Jh)(this,function(u){switch(u.label){case 0:for(t=_.uniqBy((0,S.ev)([this.totalItem],n,!0),function(p){return p.id}),this._selectedHierarchyItems$.next(t),i=[],a=0,l=t;a<l.length;a++)i.push(this.loadGoalsForHierarchyItem(l[a]));return[4,Promise.all(i)];case 1:return u.sent(),[2]}})})},o.prototype.reset=function(n){void 0===n&&(n=!1),this._selectedHierarchyItems$.next([this.totalItem]),n&&this.clearCache()},o.prototype.refreshAll=function(){for(var n=0,t=this._selectedHierarchyItems$.value;n<t.length;n++)this.loadGoalsForHierarchyItem(t[n],!0)},o.prototype.clearCache=function(){this._goalsByHierarchyItemId$.next({})},o.prototype.loadDefaultView=function(n,t,i){var a,l;return(0,S.mG)(this,void 0,void 0,function(){var c,u,p;return(0,S.Jh)(this,function(y){switch(y.label){case 0:if(!n&&!t)return M.fF.assertFail("loadDefaultView called without restoring items or settings"),[2];this._isLoadingView$.next(!0),y.label=1;case 1:return y.trys.push([1,,8,9]),[4,this.viewsService.loadViews(!1)];case 2:return y.sent(),[4,this.viewsService.getDefaultView("Heatmap").pipe((0,ue.q)(1)).toPromise()];case 3:return c=y.sent(),t&&(u=null===(a=c?.heatmapViewDetails)||void 0===a?void 0:a.heatmapDisplaySettings,this.setDisplaySettings((0,S.pi)((0,S.pi)({},pe.rl),u))),n?(p=void 0,c?[4,this.hierarchyService.getHierarchyItemsForPath(null===(l=c?.heatmapViewDetails)||void 0===l?void 0:l.hierarchyItemPaths).pipe((0,ue.q)(1)).toPromise()]:[3,5]):[3,7];case 4:p=y.sent(),y.label=5;case 5:return[4,this.setHierarchyItems(p=p||i||[])];case 6:y.sent(),y.label=7;case 7:return[3,9];case 8:return this._isLoadingView$.next(!1),[7];case 9:return[2]}})})},o.prototype.saveView=function(n,t){return(0,S.mG)(this,void 0,void 0,function(){var i;return(0,S.Jh)(this,function(a){switch(a.label){case 0:return n||t?[4,this.viewsService.getDefaultView("Heatmap").pipe((0,ue.q)(1)).toPromise()]:(M.fF.assertFail("saveView called without saving items or settings"),[2]);case 1:return i=a.sent(),i=_.cloneDeep(i)||{isDefault:!0,name:"",viewType:"Heatmap",id:void 0,scorecardId:this.scorecardId,heatmapViewDetails:{heatmapDisplaySettings:void 0,hierarchyItemPaths:void 0}},n&&(i.heatmapViewDetails.hierarchyItemPaths=oo(this.selectedHierarchyItems)),t&&(i.heatmapViewDetails.heatmapDisplaySettings=this._displaySettings$.value),[4,this.viewsService.saveView(i)];case 2:return a.sent(),[2]}})})},o.prototype.loadGoalsForHierarchyItem=function(n,t){return void 0===t&&(t=!1),(0,S.mG)(this,void 0,void 0,function(){var i,a,l,c=this;return(0,S.Jh)(this,function(u){switch(u.label){case 0:return i=this.scorecardService.getCurrentScorecard(),M.fF.assertValue(i,"scorecard not loaded"),this.scorecardId!==i.id&&(this._goalsByHierarchyItemId$.next({}),this.scorecardId=i.id,t=!0),!t&&this._goalsByHierarchyItemId$.value[n?.id]?[2]:(this._goalsByHierarchyItemId$.next((0,S.pi)((0,S.pi)({},this._goalsByHierarchyItemId$.value),((l={})[n?.id]={},l))),a=n?.id?oo([n]):void 0,[4,this.goalsHttpService.getScorecard(i.groupId,i.id,!0,a).toPromise().then(function(p){var y,P=c.checkGoalsConnectedToHierarchy(a,p.goals),x=_.keyBy(P,"id");c._goalsByHierarchyItemId$.next((0,S.pi)((0,S.pi)({},c._goalsByHierarchyItemId$.value),((y={})[n?.id]=x,y)))}).catch(function(p){var y;M.fF.assertFail(p),c._goalsByHierarchyItemId$.next((0,S.pi)((0,S.pi)({},c._goalsByHierarchyItemId$.value),((y={})[n?.id]=null,y)))})]);case 1:return u.sent(),[2]}})})},o.prototype.setDisplaySettings=function(n){this._displaySettings$.next(n)},o.prototype.checkGoalsConnectedToHierarchy=function(n,t){var i=this;return _.map(t,function(a){var l,c,u=!_.isEmpty(n),p=u&&a.valueConnection&&!i.hierarchyService.isDatasetMappedToHierarchyPath(null===(l=a.valueConnection)||void 0===l?void 0:l.datasetId,n),y=u&&a.targetConnection&&!i.hierarchyService.isDatasetMappedToHierarchyPath(null===(c=a.targetConnection)||void 0===c?void 0:c.datasetId,n);return(0,S.pi)((0,S.pi)({},a),{isCurrentValueNotConnectedToHierarchy:p,isTargetValueNotConnectedToHierarchy:y})})},o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275inject(Ht),e.\u0275\u0275inject(jn),e.\u0275\u0275inject(St.o),e.\u0275\u0275inject(jc),e.\u0275\u0275inject(zt.f))},o.\u0275prov=e.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac}),o}(),Wc=T(18460);function ag(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",9),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"formatGoalValue"),e.\u0275\u0275elementEnd()),2&o){var t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("title",t.valueTooltip),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind3(2,2,t.currentValue.value,t.categories,t.formatString)," ")}}function lg(o,n){if(1&o&&e.\u0275\u0275element(0,"goal-change-cell",10),2&o){var t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("goal",t.goal)("arrowSize",t.changeArrowSize)("nilDisplayString","\u2014")}}function sg(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,ag,3,6,"div",7),e.\u0275\u0275template(2,lg,1,3,"goal-change-cell",8),e.\u0275\u0275elementContainerEnd()),2&o){var t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.displaySettings.showValueChange),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.displaySettings.showValueChange)}}function cg(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",11)(1,"span",12),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"formatGoalValue"),e.\u0275\u0275elementEnd()),2&o){var t=e.\u0275\u0275nextContext(2);e.\u0275\u0275classProp("targetOnly",!t.displaySettings.showCurrentValue),e.\u0275\u0275property("title",t.targetTooltip),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.displaySettings.showValueChange?"|":"/"),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind3(4,5,t.currentValue.target,t.categories,t.formatString)," ")}}function ug(o,n){if(1&o&&e.\u0275\u0275element(0,"status-icon",13,14),2&o){var t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("status",null==t.currentValue?null:t.currentValue.status)("goalStatuses",t.goalStatuses)}}function dg(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",2)(1,"div",3),e.\u0275\u0275template(2,sg,3,2,"ng-container",4),e.\u0275\u0275template(3,cg,5,9,"div",5),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,ug,2,2,"status-icon",6),e.\u0275\u0275elementEnd()),2&o){var t=e.\u0275\u0275nextContext();e.\u0275\u0275styleProp("background",t.backgroundColor),e.\u0275\u0275classProp("isSelected",t.isSelected),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.displaySettings.showCurrentValue),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.displaySettings.showTargetValue),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.displaySettings.showStatus)}}function pg(o,n){1&o&&e.\u0275\u0275element(0,"pbi-spinner",15)}var $c=function(){function o(n,t,i,a){this.localizationService=n,this.formatGoalValuePipe=t,this.featureSwitches=i,this.scorecardService=a,this.currentValue=null,this.changeArrowSize="mini"}return o.prototype.ngOnChanges=function(n){var t;if((n.goal||n.displaySettings)&&this.goal){this.currentValue=$e.r.buildCurrentGoalValue(this.goal),this.categories=this.scorecardService.getGoalValueCategories(this.goal),this.goalStatuses=this.scorecardService.getGoalStatuses(this.goal);var i=ie.p.getGoalStatus(this.currentValue.status,this.goalStatuses).color;this.backgroundColor=this.displaySettings.showStatusColor?ie.p.getGoalStatusColor(i,!1,!1):void 0,this.formatString=this.goal.valuesFormatString,this.valueTooltip=this.goal.isCurrentValueNotConnectedToHierarchy?"".concat(this.localizationService.get("CurrentValue")," ").concat(this.localizationService.get("Metrics_Tooltip_ValueNotConnected")):this.formatGoalValuePipe.transform(this.currentValue.value,this.categories,this.goal.valuesFormatString,!1),this.targetTooltip=this.goal.isTargetValueNotConnectedToHierarchy?"".concat(this.localizationService.get("Role_DisplayName_TargetValue")," ").concat(this.localizationService.get("Metrics_Tooltip_ValueNotConnected")):this.formatGoalValuePipe.transform(this.currentValue.target,this.categories,this.goal.valuesFormatString,!1),this.displaySettings.showValueChange&&(this.valueChange=$e.r.calculateValueChange(this.goal,this.featureSwitches.featureSwitches.goalsSparklineChangeAggregations),this.isCyclePeriodLabelLocalizable=$e.r.isCyclePeriodLabelLocalizable(null===(t=this.valueChange)||void 0===t?void 0:t.period))}},o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(St.o),e.\u0275\u0275directiveInject(Ao.D),e.\u0275\u0275directiveInject(en.vZ),e.\u0275\u0275directiveInject(Ht))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["hierarchy-goal-cell"]],inputs:{goal:"goal",scorecard:"scorecard",displaySettings:"displaySettings",isSelected:"isSelected"},features:[e.\u0275\u0275NgOnChangesFeature],decls:3,vars:2,consts:[["class","cell",3,"background","isSelected",4,"ngIf","ngIfElse"],["loading",""],[1,"cell"],[1,"content"],[4,"ngIf"],["class","target",3,"title","targetOnly",4,"ngIf"],[3,"status","goalStatuses",4,"ngIf"],["class","value",3,"title",4,"ngIf"],[3,"goal","arrowSize","nilDisplayString",4,"ngIf"],[1,"value",3,"title"],[3,"goal","arrowSize","nilDisplayString"],[1,"target",3,"title"],[1,"slash"],[3,"status","goalStatuses"],["statusCell",""],[1,"pbi-spinner-small"]],template:function(t,i){if(1&t&&(e.\u0275\u0275template(0,dg,5,7,"div",0),e.\u0275\u0275template(1,pg,1,0,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)),2&t){var a=e.\u0275\u0275reference(2);e.\u0275\u0275property("ngIf",i.goal)("ngIfElse",a)}},dependencies:[U.NgIf,so.k,mi,io,Ao.D],styles:["[_nghost-%COMP%]{flex:1;height:100%;display:flex;flex-direction:column;justify-content:center}.cell[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;justify-content:center;align-items:flex-start;border-bottom:4px solid transparent}.content[_ngcontent-%COMP%]{display:flex;align-items:baseline;justify-content:flex-start;box-sizing:border-box;white-space:nowrap;width:100%;padding:0 6px}.content[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   .target[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis}.content[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:var(--vlg-font-size, 18px);font-weight:var(--font-weight-semi-bold, 600)}.content[_ngcontent-%COMP%]   .target[_ngcontent-%COMP%]{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400)}.content[_ngcontent-%COMP%]   .target[_ngcontent-%COMP%]   .slash[_ngcontent-%COMP%]{margin:0 1px}.content[_ngcontent-%COMP%]   .target.targetOnly[_ngcontent-%COMP%]{font-size:var(--vlg-font-size, 18px);font-weight:var(--font-weight-semi-bold, 600)}.content[_ngcontent-%COMP%]   .target.targetOnly[_ngcontent-%COMP%]   .slash[_ngcontent-%COMP%]{display:none}.content[_ngcontent-%COMP%]   goal-change-cell[_ngcontent-%COMP%]{display:flex;overflow:hidden;--container-align-items: baseline;--arrow-margin: 0 4px;--change-font-size: var(--vlg-font-size);--change-font-weight: var(--font-weight-semi-bold)}status-icon[_ngcontent-%COMP%]{display:flex;justify-content:center}status-icon[_ngcontent-%COMP%]     .status{font-size:var(--sm-font-size, 12px);line-height:16px;height:16px;width:fit-content}.isSelected[_ngcontent-%COMP%]{border-color:var(--fluent-theme-neutral-secondary-color, #605E5C)}"],changeDetection:0}),o}(),gg=["nameCell"],hg=["hierarchyGoalCell"],fg=["columnHeader"];function mg(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tree-list",6),e.\u0275\u0275listener("onResizeColumn",function(l){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(c.onResizeColumn(l))})("onExpansionChange",function(l){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(c.onExpansionChange(l))}),e.\u0275\u0275elementEnd()}if(2&o){var i=e.\u0275\u0275nextContext();e.\u0275\u0275classMap(i.heatmapClassname),e.\u0275\u0275property("columns",i.columns)("data",i.goals)("expandedNodeIds",i.expandedGoalIds)("getChildren",i.getSubgoals)("rowHash",i.rowHash)("rowHeight",i.rowHeight)("rowSpacing",i.rowSpacing)("stickyFirstColumn",!0)}}function vg(o,n){if(1&o&&e.\u0275\u0275element(0,"pbi-icon",10),2&o){e.\u0275\u0275nextContext();var t=e.\u0275\u0275reference(5);e.\u0275\u0275property("pbiTooltip",t)}}function Cg(o,n){1&o&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275elementEnd()),2&o&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"Metrics_Tooltip_LinkedHierarchical")," "))}function _g(o,n){1&o&&(e.\u0275\u0275elementStart(0,"div")(1,"span",15),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"localize"),e.\u0275\u0275elementEnd()),2&o&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,2,"CurrentValue")),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(5,4,"Metrics_Tooltip_ValueAddedManually")," "))}function yg(o,n){1&o&&(e.\u0275\u0275elementStart(0,"div")(1,"span",15),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"localize"),e.\u0275\u0275elementEnd()),2&o&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,2,"Role_DisplayName_TargetValue")),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(5,4,"Metrics_Tooltip_ValueAddedManually")," "))}function bg(o,n){if(1&o&&(e.\u0275\u0275template(0,_g,6,6,"div",14),e.\u0275\u0275template(1,yg,6,6,"div",14)),2&o){var t=e.\u0275\u0275nextContext(2).data;e.\u0275\u0275property("ngIf",!t.valueConnection),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.targetConnection)}}function wg(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",11),e.\u0275\u0275template(1,Cg,3,3,"div",12),e.\u0275\u0275template(2,bg,2,2,"ng-template",null,13,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&o){var t=e.\u0275\u0275reference(3),i=e.\u0275\u0275nextContext().data;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.isLinked)("ngIfElse",t)}}function Sg(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",7),e.\u0275\u0275listener("click",function(){var c=e.\u0275\u0275restoreView(t).data,u=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(u.onGoalNameClicked(c))}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,vg,1,1,"pbi-icon",8),e.\u0275\u0275template(4,wg,4,2,"ng-template",null,9,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()}if(2&o){var i=n.data;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(i.name),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.isLinked||!i.valueConnection||!i.targetConnection)}}function Mg(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"hierarchy-goal-cell",17),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var p=e.\u0275\u0275nextContext(),y=p.data,P=p.column,x=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(x.openGoalDetails(y,P.data))}),e.\u0275\u0275elementEnd()}if(2&o){var i=e.\u0275\u0275nextContext(),a=i.column,l=i.data,c=e.\u0275\u0275nextContext();e.\u0275\u0275property("goal",null==c.goalsByHierarchyItemIds[a.data.id]?null:c.goalsByHierarchyItemIds[a.data.id][l.id])("scorecard",c.scorecard)("displaySettings",c.displaySettings)("isSelected",a.data.id===c.activeItemId&&l.id===c.scorecard.activeGoalId)}}function Pg(o,n){1&o&&e.\u0275\u0275template(0,Mg,1,4,"hierarchy-goal-cell",16),2&o&&e.\u0275\u0275property("ngIf",!n.data.isLinked||!n.column.data.id)}function xg(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div")(2,"span",29),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"span"),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()),2&o){var t=n.$implicit;e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.hierarchyName),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(": ",t.levels.join(" > "),"")}}function Og(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",29),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275elementEnd()),2&o&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,"Visual_Totals")))}function Tg(o,n){if(1&o&&(e.\u0275\u0275template(0,xg,6,2,"ng-container",12),e.\u0275\u0275template(1,Og,3,3,"ng-template",null,28,e.\u0275\u0275templateRefExtractor)),2&o){var t=e.\u0275\u0275reference(2),i=e.\u0275\u0275nextContext().column,a=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",a.hierarchyPathsByKey[i.key])("ngIfElse",t)}}function Eg(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",30),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var a=e.\u0275\u0275nextContext().column,l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.removeColumn(a.data))}),e.\u0275\u0275element(1,"pbi-icon",31)(2,"span",32),e.\u0275\u0275elementEnd()}}function kg(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",24),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var l=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(l.hierarchyPane.showHeatmapDisplaySettingsPane())}),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275element(2,"pbi-icon",33)(3,"span",34),e.\u0275\u0275elementEnd()}if(2&o){var i=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(1,1,i.hierarchyPane.showHeatmapDisplaySettingsPane$))}}function Dg(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",18)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"pbi-icon",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,Tg,3,2,"ng-template",null,20,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(6,"mat-menu",21,22),e.\u0275\u0275template(8,Eg,3,0,"button",23),e.\u0275\u0275elementStart(9,"button",24),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var p=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(p.hierarchyPane.showHeatmapConfigurationPane())}),e.\u0275\u0275pipe(10,"async"),e.\u0275\u0275element(11,"pbi-icon",25)(12,"span",26),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(13,kg,4,3,"button",27),e.\u0275\u0275pipe(14,"async"),e.\u0275\u0275elementEnd()}if(2&o){var i=n.column,a=e.\u0275\u0275reference(5),l=e.\u0275\u0275reference(7),c=e.\u0275\u0275nextContext();e.\u0275\u0275property("matMenuTriggerFor",l)("pbiTooltip",a),e.\u0275\u0275attribute("aria-label",i.name),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(i.name),e.\u0275\u0275advance(4),e.\u0275\u0275property("overlapTrigger",!1),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!!i.data.id),e.\u0275\u0275advance(1),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(10,8,c.hierarchyPane.showHeatmapConfigurationPane$)),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(14,10,c.canEditHeatmap$))}}function Ig(o,n){if(1&o&&e.\u0275\u0275element(0,"pbi-lazy-load",35),2&o){var t=e.\u0275\u0275nextContext();e.\u0275\u0275property("modulePath",t.hierarchyModulePath)("componentId",t.heatmapConfigurationComponentId)}}function Fg(o,n){if(1&o&&e.\u0275\u0275element(0,"pbi-lazy-load",36),2&o){var t=e.\u0275\u0275nextContext();e.\u0275\u0275property("modulePath",t.hierarchyModulePath)("componentId",t.heatmapDisplaySettingsComponentId)}}var Qc=function(o){return o.Name="name",o}({}),Bs="TOTAL";function Jc(o,n,t,i){void 0===i&&(i=0);for(var a=0,l=o;a<l.length;a++){var c=l[a];if(_.isEmpty(c.children)||Jc(c.children,n,t,i+1),n[c.id]&&(delete n[c.id],t.push((0,S.pi)((0,S.pi)({},c),{level:i}))),_.isEmpty(n))return}}var Xc=function(o){function n(t,i,a,l,c,u,p,y,P,x){var N=o.call(this)||this;return N.hierarchyPane=t,N.hierarchyService=i,N.detailsPaneLauncher=a,N.changeDetector=l,N.localization=c,N.heatmapService=u,N.scorecardService=p,N.scorecardConfigurationService=y,N.capabilityService=P,N.expansionService=x,N.columnsByKey={},N.hierarchyPathsByKey={},N.hierarchyModulePath="@powerbi/GoalsHierarchy/goals-hierarchy.module#GoalsHierarchyModule",N.heatmapConfigurationComponentId="HeatmapConfigurationPaneComponentId",N.heatmapDisplaySettingsComponentId="HeatmapDisplaySettingsPaneComponentId",N.getSubgoals=function(W){return N.getGoalNodes(W.subGoals,W)},N.rowHash=function(W,te){return JSON.stringify(te)},N.rowHeight=50,N.rowSpacing=8,N.canEditHeatmap$=N.capabilityService.getScorecardCapabilities().pipe((0,xe.U)(function(W){return W.editHeatmap})),N}return(0,S.ZT)(n,o),n.prototype.ngOnInit=function(){var t=this;this.hierarchyPane.showHeatmapConfigurationPane();var i=this.scorecardService.getCurrentScorecard().hierarchyPaths;this.hierarchyService.getHierarchyItemsForPath(i).pipe((0,ue.q)(1)).subscribe(function(a){return t.heatmapService.loadDefaultView(!0,!0,a)}),this.scorecardService.setActiveHierarchy(void 0),this.scorecardService.getScorecard().pipe((0,Yn.b)(function(a){t.scorecard=a,t.goals=t.getGoalNodes(a.goals),t.expandedGoalIds=t.expansionService.expandedGoalIds,t.changeDetector.markForCheck()}),(0,Kt.w)(function(a){return t.hierarchyService.getHierarchyItemsForPath(a.hierarchyPaths)}),(0,be.R)(this.onDestroy$)).subscribe(function(a){t.activeItemId=1===_.size(a)?a[0].id:void 0}),this.heatmapService.goalsByHierarchyItemId$.pipe((0,be.R)(this.onDestroy$)).subscribe(function(a){t.goalsByHierarchyItemIds=a,t.changeDetector.markForCheck()}),this.heatmapService.displaySettings$.pipe((0,be.R)(this.onDestroy$)).subscribe(function(a){t.displaySettings=a;var l="show-value-only";t.displaySettings.showCurrentValue&&t.displaySettings.showValueChange?l=t.displaySettings.showTargetValue?"show-change-target":"show-change-only":t.displaySettings.showCurrentValue&&t.displaySettings.showTargetValue&&(l="show-value-target"),t.heatmapClassname="heat-map "+l,t.changeDetector.markForCheck()})},n.prototype.ngAfterViewInit=function(){var t=this;this.updateColumns([]),this.heatmapService.selectedHierarchyItems$.pipe((0,be.R)(this.onDestroy$)).subscribe(function(i){t.updateColumns(i),t.changeDetector.markForCheck()})},n.prototype.getCachedColumn=function(t,i){return this.columnsByKey[t]||(this.columnsByKey[t]=i()),this.columnsByKey[t]},n.prototype.updateColumns=function(t){var i=this,a=_.flatMap(Object.values(this.hierarchyService.hierarchyItems)),l=_.keyBy(t,function(u){var p;return null!==(p=u.id)&&void 0!==p?p:Bs}),c=[];Jc(a,l,c,0),l[Bs]&&(c.unshift(l[Bs]),delete l[Bs]),c.push.apply(c,Object.values(l)),t=c,this.columns=(0,S.ev)([this.getCachedColumn(Qc.Name,function(){return{key:Qc.Name,name:i.localization.get("Name"),width:400,cellTemplate:i.nameCell}})],_.map(t,function(u){return i.getCachedColumn(u.id,function(){return{key:u.id,name:(0,Ai.WU)(u.value),class:"column-center-name",resizable:!1,headerTemplate:i.columnHeader,cellTemplate:i.hierarchyGoalCell,data:u}})}),!0),t.forEach(function(u){if(u.id&&!i.hierarchyPathsByKey[u.id]){var p=oa(u);i.hierarchyPathsByKey[u.id]=i.hierarchyService.formatHierarchyItemPath(p)}})},n.prototype.onGoalNameClicked=function(t){this.detailsPaneLauncher.openGoalDetails(this.scorecardService,t.id,uo.Default,this.scorecardConfigurationService.getConfiguration()),this.changeDetector.markForCheck()},n.prototype.openGoalDetails=function(t,i){var a;return(0,S.mG)(this,void 0,void 0,function(){return(0,S.Jh)(this,function(l){switch(l.label){case 0:return null!==(a=this.goalsByHierarchyItemIds[i?.id])&&void 0!==a&&a[t.id]?[4,this.scorecardService.setActiveHierarchy(i?.id?oo([i]):void 0)]:[3,2];case 1:l.sent(),this.detailsPaneLauncher.openGoalDetails(this.scorecardService,t.id,uo.Default,this.scorecardConfigurationService.getConfiguration()),this.changeDetector.markForCheck(),l.label=2;case 2:return[2]}})})},n.prototype.removeColumn=function(t){this.heatmapService.removeHierarchyItem(t)},n.prototype.onResizeColumn=function(t){this.columns[t.column].width=t.width},n.prototype.onExpansionChange=function(t){this.expansionService.expandGoals(t.added),this.expansionService.collapseGoals(t.removed)},n.prototype.getGoalNodes=function(t,i){return _.map(_.filter(t,function(a){return!a.isNew&&!a.isHidden}),function(a,l){return(0,S.pi)((0,S.pi)({},a),{style:i?i.style:{"border-color":pe.gT.ColorPalette[l%pe.gT.ColorPalette.length]},class:!1===a.isFilterMatch?"goal-not-match":""})})},n.\u0275fac=function(i){return new(i||n)(e.\u0275\u0275directiveInject(Hs),e.\u0275\u0275directiveInject(jn),e.\u0275\u0275directiveInject(ri),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(St.o),e.\u0275\u0275directiveInject(lc),e.\u0275\u0275directiveInject(Ht),e.\u0275\u0275directiveInject(Vi.V),e.\u0275\u0275directiveInject(eo),e.\u0275\u0275directiveInject(sr))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["heat-map"]],viewQuery:function(i,a){if(1&i&&(e.\u0275\u0275viewQuery(gg,5),e.\u0275\u0275viewQuery(hg,5),e.\u0275\u0275viewQuery(fg,5)),2&i){var l=void 0;e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(a.nameCell=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(a.hierarchyGoalCell=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(a.columnHeader=l.first)}},features:[e.\u0275\u0275InheritDefinitionFeature],decls:11,vars:7,consts:[[3,"class","columns","data","expandedNodeIds","getChildren","rowHash","rowHeight","rowSpacing","stickyFirstColumn","onResizeColumn","onExpansionChange",4,"ngIf"],["nameCell",""],["hierarchyGoalCell",""],["columnHeader",""],["class","configuration-pane",3,"modulePath","componentId",4,"ngIf"],["class","display-settings-pane",3,"modulePath","componentId",4,"ngIf"],[3,"columns","data","expandedNodeIds","getChildren","rowHash","rowHeight","rowSpacing","stickyFirstColumn","onResizeColumn","onExpansionChange"],[1,"name",3,"click"],["class","name-info","name","info","size","mini",3,"pbiTooltip",4,"ngIf"],["infoTooltip",""],["name","info","size","mini",1,"name-info",3,"pbiTooltip"],[1,"goal-info-tooltip"],[4,"ngIf","ngIfElse"],["manualTooltip",""],[4,"ngIf"],[1,"tooltip-value-label"],[3,"goal","scorecard","displaySettings","isSelected","click",4,"ngIf"],[3,"goal","scorecard","displaySettings","isSelected","click"],["mat-button","","cdkMonitorElementFocus","",1,"heatmap-column-header",3,"matMenuTriggerFor","pbiTooltip"],["name","chevrondownsmall","size","mini",1,"chevrondown"],["hierarchyPathTooltip",""],["xPosition","after",1,"heatmap-column-menu",3,"overlapTrigger"],["heatmapColumnMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"disabled","click"],["name","edit","size","small",1,"icon"],["localize","MetricsCustomizeHeatmap"],["mat-menu-item","",3,"disabled","click",4,"ngIf"],["total",""],[1,"tooltip-hierarchy-name"],["mat-menu-item","",3,"click"],["name","delete","size","small",1,"icon"],["localize","MetricsHierarchy_Builder_Remove_Level"],["name","settings","size","small",1,"icon"],["localize","DisplaySettings_Open"],[1,"configuration-pane",3,"modulePath","componentId"],[1,"display-settings-pane",3,"modulePath","componentId"]],template:function(i,a){1&i&&(e.\u0275\u0275template(0,mg,1,10,"tree-list",0),e.\u0275\u0275template(1,Sg,6,2,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(3,Pg,1,1,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(5,Dg,15,12,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(7,Ig,1,2,"pbi-lazy-load",4),e.\u0275\u0275pipe(8,"async"),e.\u0275\u0275template(9,Fg,1,2,"pbi-lazy-load",5),e.\u0275\u0275pipe(10,"async")),2&i&&(e.\u0275\u0275property("ngIf",a.scorecard),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(8,3,a.hierarchyPane.showHeatmapConfigurationPane$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(10,5,a.hierarchyPane.showHeatmapDisplaySettingsPane$)))},dependencies:[U.NgIf,Wc.R,jt.X,Pt.W0,Pt.tN,Pt.D8,Gn._,Ee.V,$c,Wi,U.AsyncPipe,xt.F],styles:["[_nghost-%COMP%]{display:flex;flex-direction:row}[_nghost-%COMP%]   .heat-map[_ngcontent-%COMP%]{flex:1;overflow:hidden;padding-left:30px;--column-headers-backgroundColor: var(--scorecard-tableBackgroundColor);--row-backgroundColor: var(--scorecard-tableRowBackgroundColor)}[_nghost-%COMP%]   .heat-map.show-value-only[_ngcontent-%COMP%]{--cell-width: 88px}[_nghost-%COMP%]   .heat-map.show-value-target[_ngcontent-%COMP%]{--cell-width: 152px}[_nghost-%COMP%]   .heat-map.show-change-only[_ngcontent-%COMP%]{--cell-width: 132px}[_nghost-%COMP%]   .heat-map.show-change-target[_ngcontent-%COMP%]{--cell-width: 208px}[_nghost-%COMP%]   .name[_ngcontent-%COMP%]{display:inline-block;white-space:nowrap;overflow:hidden;height:100%;display:flex;align-items:center;flex:1}[_nghost-%COMP%]   .name[_ngcontent-%COMP%]:hover{text-decoration:underline}[_nghost-%COMP%]   .name[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden}[_nghost-%COMP%]   .name[_ngcontent-%COMP%]   .name-info[_ngcontent-%COMP%]{margin:0 6px}[_nghost-%COMP%]   .heatmap-column-header[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;align-items:flex-start;justify-content:flex-start;padding:0;background:none;border:none}[_nghost-%COMP%]   .heatmap-column-header[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .heatmap-column-header[_ngcontent-%COMP%]:focus:hover, [_nghost-%COMP%]   .heatmap-column-header[_ngcontent-%COMP%]:active, [_nghost-%COMP%]   .heatmap-column-header[_ngcontent-%COMP%]:focus:hover:active{background-color:var(--fluent-theme-neutral-lighter-color, #F3F2F1)}[_nghost-%COMP%]   .heatmap-column-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-left:6px;overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .heatmap-column-header[_ngcontent-%COMP%]   pbi-icon[_ngcontent-%COMP%]{padding:6px}[_nghost-%COMP%]   .configuration-pane[_ngcontent-%COMP%]{border-left:1px solid var(--gray-50, #D2D0CE)}[_nghost-%COMP%]   .configuration-pane[_ngcontent-%COMP%]     pbi-side-pane{width:450px}[_nghost-%COMP%]     .column-center-name{justify-content:center}[_nghost-%COMP%]     .heat-map .column-headers{padding-left:6px}[_nghost-%COMP%]     .heat-map .column-headers .header{width:var(--cell-width)}[_nghost-%COMP%]     .row{border-left:6px solid transparent;border-radius:4px 8px 8px 4px;box-shadow:0 0 2px var(--colorNeutralShadowAmbient),0 2px 4px var(--colorNeutralShadowKey)}[_nghost-%COMP%]     .row.goal-not-match{opacity:50%}[_nghost-%COMP%]     .cell{width:var(--cell-width)}[_nghost-%COMP%]   hierarchy-goal-cell[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .name[_ngcontent-%COMP%]:hover{cursor:pointer;opacity:.7}.goal-info-tooltip[_ngcontent-%COMP%]   .tooltip-value-label[_ngcontent-%COMP%], .tooltip-hierarchy-name[_ngcontent-%COMP%]{font-weight:600}  .mat-menu-panel.heatmap-column-menu{min-height:fit-content;margin-top:4px}  .mat-menu-panel.heatmap-column-menu .mat-menu-content{padding:0}  .mat-menu-panel.heatmap-column-menu .mat-menu-item{color:var(--gray-180, #252423);display:flex;flex-direction:row;align-items:center;height:36px}  .mat-menu-panel.heatmap-column-menu .mat-menu-item:disabled{background:transparent;color:var(--gray-80, #B3B0AD)}  .mat-menu-panel.heatmap-column-menu .mat-menu-item pbi-icon{display:flex;padding-right:8px}"],changeDetection:0}),n}(Te.w),Gg=["chart"];function Vg(o,n){1&o&&e.\u0275\u0275elementContainer(0)}function Rg(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Vg,1,0,"ng-container",8),e.\u0275\u0275elementContainerEnd()),2&o){e.\u0275\u0275nextContext();var t=e.\u0275\u0275reference(11);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngTemplateOutlet",t)}}function Ag(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"span",20)(1,"span",21),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"formatGoalValue"),e.\u0275\u0275elementEnd()()),2&o){var t=e.\u0275\u0275nextContext(4);e.\u0275\u0275property("localize",t.periodLocalizeString),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.valueChange.isPercentage?t.valueChange.changeAmount+"%":e.\u0275\u0275pipeBind3(3,2,t.valueChange.changeAmount,t.categories,t.goal.valuesFormatString))}}function Lg(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"span",22)(1,"span",23),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"formatGoalValue"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"span",24),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()()),2&o){var t=e.\u0275\u0275nextContext(4);e.\u0275\u0275property("localize",t.periodLocalizeString),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.valueChange.isPercentage?t.valueChange.changeAmount+"%":e.\u0275\u0275pipeBind3(3,3,t.valueChange.changeAmount,t.categories,t.goal.valuesFormatString)),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.valueChange.period)}}function Ng(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",15),e.\u0275\u0275element(1,"mat-icon",16),e.\u0275\u0275elementStart(2,"div",17),e.\u0275\u0275template(3,Ag,4,6,"span",18),e.\u0275\u0275template(4,Lg,6,7,"ng-template",null,19,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()()),2&o){var t=e.\u0275\u0275reference(5),i=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275classProp("rotate180",!i.valueChange.isIncrease),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",i.periodLocalizeString&&!i.periodLocalizeString.endsWith("Custom"))("ngIfElse",t)}}function zg(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Ng,6,4,"div",11),e.\u0275\u0275elementStart(2,"div",12,13),e.\u0275\u0275element(4,"goal-history-chart",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&o){var t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.valueChange),e.\u0275\u0275advance(3),e.\u0275\u0275property("values",t.sparklineValues)("formatString",t.goal.valuesFormatString)("color",t.statusColor)("showGoalTargets",!1)("axesOptions",t.axesOptions)("legend","None")}}function Hg(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",9),e.\u0275\u0275template(1,zg,5,7,"ng-container",10),e.\u0275\u0275elementEnd()),2&o){var t=e.\u0275\u0275nextContext(),i=e.\u0275\u0275reference(11);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.hasData)("ngIfElse",i)}}function Bg(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",25),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"formatGoalValue"),e.\u0275\u0275elementEnd()),2&o){var t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind3(2,1,t.currentValue.value,t.categories,t.goal.valuesFormatString))}}function Ug(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",26)(1,"div",27)(2,"div",28),e.\u0275\u0275pipe(3,"formatValue"),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"formatValue"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",29),e.\u0275\u0275pipe(7,"formatValue"),e.\u0275\u0275text(8),e.\u0275\u0275pipe(9,"formatValue"),e.\u0275\u0275elementEnd()()()),2&o){var t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("pbiTooltip",e.\u0275\u0275pipeBind3(3,4,t.currentValue.value,t.goal.valuesFormatString,!1)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(5,8,t.currentValue.value,t.goal.valuesFormatString)," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("pbiTooltip",e.\u0275\u0275pipeBind3(7,11,t.currentValue.target,t.goal.valuesFormatString,!1)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" /",e.\u0275\u0275pipeBind2(9,15,t.currentValue.target,t.goal.valuesFormatString)," ")}}var sc=function(){function o(n,t){this.featureSwitches=n,this.localizationService=t,this.axesOptions=vr,this.currentValue=null,this.supportCategoricalValues=this.featureSwitches.featureSwitches.goalsCategoricalValues}return o.prototype.ngOnInit=function(){var t,i,n=this;M.fF.assertValue(this.goal,"Missing goal"),this.setDisplayedVals(),this.locale=this.localizationService.currentLanguageLocale,this.supportCategoricalValues&&this.goal.valuesCategoryId&&(this.categories=null!==(i=null===(t=_.find(this.goal.goalValueCategories,function(a){return a.id===n.goal.valuesCategoryId}))||void 0===t?void 0:t.categories)&&void 0!==i?i:[])},o.prototype.ngOnChanges=function(n){var t,i;n.goal&&(this.setDisplayedVals(),this.supportCategoricalValues&&n.goal.currentValue.valuesCategoryId&&(this.categories=null!==(i=null===(t=_.find(this.goal.goalValueCategories,function(a){return a.id===n.goal.currentValue.valuesCategoryId}))||void 0===t?void 0:t.categories)&&void 0!==i?i:[]))},o.prototype.ngAfterViewInit=function(){var n;this.lineChartChangeObserver=X.observeAndRemoveFocusableAttributes(null===(n=this.chart)||void 0===n?void 0:n.nativeElement)},o.prototype.ngOnDestroy=function(){var n;null===(n=this.lineChartChangeObserver)||void 0===n||n.disconnect()},o.prototype.setDisplayedVals=function(){var n;this.currentValue=$e.r.buildCurrentGoalValue(this.goal),this.valueChange=$e.r.calculateValueChange(this.goal,this.featureSwitches.featureSwitches.goalsSparklineChangeAggregations),this.periodLocalizeString=_.isNil(null===(n=this.valueChange)||void 0===n?void 0:n.period)?void 0:this.getPeriodSuffix(this.valueChange.period);var i=ie.p.getGoalStatus(this.currentValue.status,this.goalStatuses);this.statusColor=ie.p.getGoalSparklineColor(i.color),this.sparklineValues=no.buildSparklineValues(this.goal,this.featureSwitches.featureSwitches.goalsSparklineChangeAggregations),this.hasData=_.some(this.sparklineValues)},o.prototype.getPeriodSuffix=function(n){switch(n){case"Period_DoD":case"Period_MoM":case"Period_QoQ":case"Period_WoW":case"Period_YoY":return n;default:return"PercentGrowth_Period_Custom"}},o.componentId="RelevantGoalChartComponentId",o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(en.vZ),e.\u0275\u0275directiveInject(St.o))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["relevant-goal-chart"]],viewQuery:function(t,i){var a;(1&t&&e.\u0275\u0275viewQuery(Gg,5),2&t)&&(e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(i.chart=a.first))},inputs:{goal:"goal",goalStatuses:"goalStatuses"},features:[e.\u0275\u0275NgOnChangesFeature],decls:12,vars:7,consts:[[1,"relevant-goal"],[1,"title-and-value"],[4,"ngIf"],[1,"title",3,"pbiTooltip"],[3,"pbiTooltip"],["class","growth-and-visual",4,"ngIf","ngIfElse"],["useCategories",""],["valueAndTarget",""],[4,"ngTemplateOutlet"],[1,"growth-and-visual"],[4,"ngIf","ngIfElse"],["class","growth",4,"ngIf"],[1,"visual"],["chart",""],["type","AreaChart",3,"values","formatString","color","showGoalTargets","axesOptions","legend"],[1,"growth"],["fontIcon","pbi-glyph-arrow",1,"glyphicon","glyph-micro"],[1,"change"],["class","period","localize-fragments","",3,"localize",4,"ngIf","ngIfElse"],["customPeriod",""],["localize-fragments","",1,"period",3,"localize"],["fragment-index","0",1,"valueChangePeriod"],["localize-fragments","",3,"localize"],["fragment-index","0"],["fragment-index","1"],[1,"current-value"],[1,"value-wrapper"],[1,"value-target"],[1,"value",3,"pbiTooltip"],[1,"target",3,"pbiTooltip"]],template:function(t,i){if(1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1),e.\u0275\u0275template(2,Rg,2,1,"ng-container",2),e.\u0275\u0275elementStart(3,"span",3),e.\u0275\u0275text(4),e.\u0275\u0275elementStart(5,"span",4),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(7,Hg,2,2,"div",5),e.\u0275\u0275template(8,Bg,3,5,"ng-template",null,6,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(10,Ug,10,18,"ng-template",null,7,e.\u0275\u0275templateRefExtractor)),2&t){var a=e.\u0275\u0275reference(9);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",i.hasData&&!(i.supportCategoricalValues&&i.goal.valuesCategoryId)),e.\u0275\u0275advance(1),e.\u0275\u0275property("pbiTooltip",i.goal.scorecardName),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",i.goal.scorecardName," > "),e.\u0275\u0275advance(1),e.\u0275\u0275property("pbiTooltip",i.goal.name),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",i.goal.name,""),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!(i.supportCategoricalValues&&i.goal.valuesCategoryId))("ngIfElse",a)}},dependencies:[U.NgIf,U.NgTemplateOutlet,jt.X,Ut.Hw,Ee.V,Gi,Ao.D,fi.c],styles:['.relevant-goal[_ngcontent-%COMP%]{flex:1;width:284px;background-color:var(--fluent-theme-white-color, #FFF);border-radius:2px}.relevant-goal[_ngcontent-%COMP%]   .rotate180[_ngcontent-%COMP%]{transform:rotate(180deg);-webkit-transform:rotate(180deg)}.relevant-goal[_ngcontent-%COMP%]:hover, .relevant-goal[_ngcontent-%COMP%]:focus:hover{cursor:pointer}.relevant-goal[_ngcontent-%COMP%]   .title-and-value[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;height:66px;padding:0 16px}.relevant-goal[_ngcontent-%COMP%]   .title-and-value[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--lg-font-size, 16px);font-weight:var(--font-weight-regular, 400);line-height:20px;color:var(--fluent-theme-neutral-primary-color, #323130);white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.relevant-goal[_ngcontent-%COMP%]   .title-and-value[_ngcontent-%COMP%]   .value-target[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:18px}.relevant-goal[_ngcontent-%COMP%]   .title-and-value[_ngcontent-%COMP%]   .value-target[_ngcontent-%COMP%]   .target[_ngcontent-%COMP%]{font-size:14px}.relevant-goal[_ngcontent-%COMP%]   .growth-and-visual[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:168px}.relevant-goal[_ngcontent-%COMP%]   .growth-and-visual[_ngcontent-%COMP%]   .growth[_ngcontent-%COMP%]{display:flex;align-items:center;margin-top:1px;padding:7px 16px}.relevant-goal[_ngcontent-%COMP%]   .growth-and-visual[_ngcontent-%COMP%]   .growth[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{height:8px!important;width:8px!important}.relevant-goal[_ngcontent-%COMP%]   .growth-and-visual[_ngcontent-%COMP%]   .growth[_ngcontent-%COMP%]   .rotate180[_ngcontent-%COMP%]{transform:rotate(180deg)}.relevant-goal[_ngcontent-%COMP%]   .growth-and-visual[_ngcontent-%COMP%]   .growth[_ngcontent-%COMP%]   .change[_ngcontent-%COMP%]{font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-regular, 400);margin-left:4px}.relevant-goal[_ngcontent-%COMP%]   .growth-and-visual[_ngcontent-%COMP%]   .growth[_ngcontent-%COMP%]   .change[_ngcontent-%COMP%]   .valueChangePeriod[_ngcontent-%COMP%]{margin-right:4px}.relevant-goal[_ngcontent-%COMP%]   .growth-and-visual[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]{flex:1;display:flex;padding:7px 10px}.relevant-goal[_ngcontent-%COMP%]   .growth-and-visual[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   goal-history-chart[_ngcontent-%COMP%]{width:100%;flex:1}.relevant-goal[_ngcontent-%COMP%]   .growth-and-visual[_ngcontent-%COMP%]   .value-wrapper[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center;justify-content:center}.relevant-goal[_ngcontent-%COMP%]   .growth-and-visual[_ngcontent-%COMP%]   .value-wrapper[_ngcontent-%COMP%]   .value-target[_ngcontent-%COMP%]{margin:auto}.relevant-goal[_ngcontent-%COMP%]   .growth-and-visual[_ngcontent-%COMP%]   .value-wrapper[_ngcontent-%COMP%]   .value-target[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:34px}.relevant-goal[_ngcontent-%COMP%]   .growth-and-visual[_ngcontent-%COMP%]   .value-wrapper[_ngcontent-%COMP%]   .value-target[_ngcontent-%COMP%]   .target[_ngcontent-%COMP%]{font-size:22px}.relevant-goal[_ngcontent-%COMP%]   .current-value[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:168px;font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--pbi-font-32, 32px);font-weight:var(--font-weight-semi-bold, 600)}.relevant-goal[_ngcontent-%COMP%]   .value-target[_ngcontent-%COMP%]{display:flex;align-items:baseline}.relevant-goal[_ngcontent-%COMP%]   .value-target[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:var(--fluent-theme-neutral-primary-color, #323130);font-weight:var(--font-weight-semi-bold, 600)}.relevant-goal[_ngcontent-%COMP%]   .value-target[_ngcontent-%COMP%]   .target[_ngcontent-%COMP%]{color:var(--fluent-theme-neutral-primary-alt-color, #3B3A39)}.relevant-goal[_ngcontent-%COMP%]   .date-and-status[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:center;height:44px;padding:0 16px}.relevant-goal[_ngcontent-%COMP%]   .date-and-status[_ngcontent-%COMP%]   .target-date[_ngcontent-%COMP%]{display:flex;align-items:center;font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-regular, 400);font-size:14px;line-height:18px;color:var(--fluent-theme-neutral-secondary-color, #605E5C);white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.relevant-goal[_ngcontent-%COMP%]   .date-and-status[_ngcontent-%COMP%]   .target-date[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:4px}.relevant-goal[_ngcontent-%COMP%]   .date-and-status[_ngcontent-%COMP%]   status-icon[_ngcontent-%COMP%]{width:95px;margin-right:7px}.relevant-goal[_ngcontent-%COMP%]   .date-and-status[_ngcontent-%COMP%]   status-icon[_ngcontent-%COMP%]     .status{white-space:nowrap;text-overflow:ellipsis;overflow:hidden}'],changeDetection:0}),o}();function jg(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"goal-kpi",5),e.\u0275\u0275listener("onSelected",function(l){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(c.onPointSelected(l))}),e.\u0275\u0275elementEnd()}if(2&o){var i=e.\u0275\u0275nextContext();e.\u0275\u0275property("values",i.goal.goalValues)("formatString",i.goal.valuesFormatString)}}function Wg(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",6),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",7),e.\u0275\u0275element(4,"label",8),e.\u0275\u0275elementStart(5,"span"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()),2&o){var t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.goal.name),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" : ",t.completionDate,"")}}var cc=function(){function o(n){this.localizationService=n}return o.prototype.ngOnInit=function(){if(this.goal.completionDate){var n=this.localizationService.currentLanguageLocale;this.completionDate=new Date(this.goal.completionDate).toLocaleDateString(n,{day:"numeric",month:"short",year:"numeric"})}},o.componentId="RelevantGoalKpiComponentId",o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(St.o))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["relevant-goal-kpi"]],inputs:{goal:"goal"},decls:5,vars:2,consts:[[1,"relevant-goal","pbi-depth-1","pbi-depth-interactive"],[1,"relevant-goal-kpi"],[3,"values","formatString","onSelected",4,"ngIf"],[1,"relevant-goal-details"],[4,"ngIf"],[3,"values","formatString","onSelected"],[1,"title"],[1,"target-date"],["localize","KpiTargetDateFieldListDisplayName"]],template:function(t,i){1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1),e.\u0275\u0275template(2,jg,1,2,"goal-kpi",2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",3),e.\u0275\u0275template(4,Wg,7,2,"ng-container",4),e.\u0275\u0275elementEnd()()),2&t&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",i.goal),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",i.goal))},dependencies:[U.NgIf,jt.X,Hc],styles:['.relevant-goal[_ngcontent-%COMP%]{flex:1;height:262px;width:285px;background:var(--fluent-theme-white-color, #FFF);border-radius:2px}.relevant-goal[_ngcontent-%COMP%]:hover, .relevant-goal[_ngcontent-%COMP%]:focus:hover{cursor:pointer}.relevant-goal[_ngcontent-%COMP%]   .relevant-goal-details[_ngcontent-%COMP%]{border-top:1px solid var(--fluent-theme-neutral-light-color, #EDEBE9);padding:16px}.relevant-goal[_ngcontent-%COMP%]   .relevant-goal-details[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-semi-bold, 600);line-height:20px;color:var(--fluent-theme-neutral-primary-color, #323130);white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.relevant-goal[_ngcontent-%COMP%]   .relevant-goal-details[_ngcontent-%COMP%]   .target-date[_ngcontent-%COMP%]{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-regular, 400);line-height:16px;color:var(--fluent-theme-neutral-secondary-color, #605E5C);white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.relevant-goal[_ngcontent-%COMP%]   .relevant-goal-kpi[_ngcontent-%COMP%]{height:194px}.relevant-goal[_ngcontent-%COMP%]   .relevant-goal-kpi[_ngcontent-%COMP%]   visual-modern[_ngcontent-%COMP%]{border:none!important;padding:0!important}'],changeDetection:0}),o}(),bo=function(o){return o[o.None=0]="None",o[o.View=1]="View",o[o.TenantView=2]="TenantView",o[o.Favorite=3]="Favorite",o[o.Frequent=4]="Frequent",o[o.Promoted=5]="Promoted",o[o.Learning=6]="Learning",o[o.Discover=7]="Discover",o[o.Teams=8]="Teams",o[o.TeamAnalytics=9]="TeamAnalytics",o[o.PromotedSample=10]="PromotedSample",o}({});function Qg(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"span",7),e.\u0275\u0275element(1,"tri-svg-icon",8),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()),2&o){var t=e.\u0275\u0275nextContext();e.\u0275\u0275property("pbiTooltip",t.recommendationReason),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",t.recommendationReason,"")}}var uc=function(){function o(n){this.localizationService=n}return o.prototype.ngOnChanges=function(n){var t;(this.relevantMeasure||n.relevantMeasure)&&(this.recommendationReason=function(o,n){var t="";switch(o){case bo.View:t=n.format("Recommended_Reason_View");break;case bo.Favorite:t=n.get("Recommended_Reason_Favorite");break;case bo.Frequent:t=n.get("Recommended_Reason_Frequent");break;case bo.Promoted:t=n.format("Recommended_Reason_Featured");break;case bo.Learning:t=n.get("TopNav_HelpMenu_GettingStarted");break;case bo.Discover:t=n.get("Recommended_Reason_Discover");break;case bo.TeamAnalytics:t=n.get("Teams_Analyze_Usage");break;default:t=n.get("Recommended_Reason_None")}return t}(null===(t=this.relevantMeasure)||void 0===t?void 0:t.recommendationReason,this.localizationService))},o.componentId="RelevantMeasureComponentId",o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(St.o))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["relevant-measure"]],inputs:{relevantMeasure:"relevantMeasure"},features:[e.\u0275\u0275NgOnChangesFeature],decls:11,vars:4,consts:[[1,"relevant-measure"],[1,"measure"],[1,"title-and-value"],["class","title",3,"pbiTooltip",4,"ngIf"],[3,"pbiTooltip"],[1,"measure-report"],["fontIcon","pbi-glyph-barchart",1,"glyph-small"],[1,"title",3,"pbiTooltip"],["name","folder_open_20_regular","tri-svg-icon-16",""]],template:function(t,i){1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2),e.\u0275\u0275template(3,Qg,3,2,"span",3),e.\u0275\u0275elementStart(4,"div",4),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div",5)(7,"div"),e.\u0275\u0275element(8,"mat-icon",6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div"),e.\u0275\u0275text(10),e.\u0275\u0275elementEnd()()()()),2&t&&(e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!(null==i.relevantMeasure||!i.relevantMeasure.recommendationReason)),e.\u0275\u0275advance(1),e.\u0275\u0275property("pbiTooltip",null==i.relevantMeasure?null:i.relevantMeasure.name),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(null==i.relevantMeasure?null:i.relevantMeasure.name),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(null==i.relevantMeasure?null:i.relevantMeasure.value))},dependencies:[U.NgIf,Ut.Hw,Ee.V,ii.M],styles:['.relevant-measure[_ngcontent-%COMP%]{flex:1;width:284px;background-color:var(--fluent-theme-white-color, #FFF);border-radius:2px}.relevant-measure[_ngcontent-%COMP%]:hover, .relevant-measure[_ngcontent-%COMP%]:focus:hover{cursor:pointer}.relevant-measure[_ngcontent-%COMP%]   .title-and-value[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;height:66px;padding:0 16px}.relevant-measure[_ngcontent-%COMP%]   .title-and-value[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--lg-font-size, 16px);font-weight:var(--font-weight-regular, 400);line-height:20px;color:var(--fluent-theme-neutral-primary-color, #323130);white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.relevant-measure[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%]{height:100%}.relevant-measure[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%]   .measure-report[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:168px}.relevant-measure[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%]   .measure-report[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{height:48px!important;width:48px!important}.relevant-measure[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}'],changeDetection:0}),o}(),Jg=new e.InjectionToken("ScorecardActionsService"),Xg=T(74199);function qg(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"label"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275elementEnd()),2&o){var t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,t.labels[0]))}}function Zg(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"label"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"localizeFormat"),e.\u0275\u0275elementEnd()),2&o){var t=e.\u0275\u0275nextContext(2).ngIf,i=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(2,1,i.labels[1],t))}}function Yg(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",9),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var a=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(a.onDissmis())}),e.\u0275\u0275pipe(1,"localize"),e.\u0275\u0275element(2,"pbi-icon",10),e.\u0275\u0275elementEnd()}2&o&&e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(1,1,"Dismiss"))}function Kg(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",2),e.\u0275\u0275element(1,"i",3),e.\u0275\u0275elementStart(2,"div",4),e.\u0275\u0275template(3,qg,3,3,"label",5),e.\u0275\u0275template(4,Zg,3,4,"ng-template",null,6,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(6,"button",7),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var u=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(u.openSharingDialog())}),e.\u0275\u0275pipe(7,"localize"),e.\u0275\u0275text(8),e.\u0275\u0275pipe(9,"localize"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(10,Yg,3,3,"button",8),e.\u0275\u0275elementEnd()}if(2&o){var i=e.\u0275\u0275reference(5),a=e.\u0275\u0275nextContext().ngIf,l=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",1===a)("ngIfElse",i),e.\u0275\u0275advance(3),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(7,5,l.labels[2])),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(9,7,l.labels[2])),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",l.showDismiss)}}function eh(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Kg,11,9,"div",1),e.\u0275\u0275elementContainerEnd()),2&o){var t=n.ngIf;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t>0)}}function th(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,eh,2,1,"ng-container",0),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementContainerEnd()),2&o){var i,t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(i=e.\u0275\u0275pipeBind1(2,1,t.noAccessUsers$))?null:i.length)}}var qc=function(){function o(n,t){var i;this.goalsHttpService=n,this.scorecardActions=t,this.labels=["Member_No_Scorecard_Access","Members_No_Scorecard_Access","Manage_Scorecard_Access"],this.showDismiss=!0,this.userAccess={userPrincipalNames:{},aadAppIds:{},groupIds:{}},this.noAccessUsers$=new Me.X([]),this.show=!0,M.fF.assertValue(3===(null===(i=this.labels)||void 0===i?void 0:i.length),"Should only contain 3 labels")}return o.prototype.ngOnChanges=function(n){var t,i;(n.scorecard&&this.scorecard.reportId&&_.isNil(null===(t=n.scorecard.previousValue)||void 0===t?void 0:t.reportId)&&this.users||n.users&&null!==(i=this.scorecard)&&void 0!==i&&i.reportId)&&this.updateUserAccessInfo()},o.prototype.onDissmis=function(){this.show=!1},o.prototype.openSharingDialog=function(){return(0,S.mG)(this,void 0,void 0,function(){return(0,S.Jh)(this,function(n){switch(n.label){case 0:return[4,this.scorecardActions.share(this.scorecard,this.noAccessUsers$.value)];case 1:return n.sent(),[2]}})})},o.prototype.updateUserAccessInfo=function(){return(0,S.mG)(this,void 0,void 0,function(){var n,t;return(0,S.Jh)(this,function(a){switch(a.label){case 0:if(!_.some(this.users))return[3,5];if(n=this.getCheckScorecardAccessRequest(this.users),!(_.some(n.userPrincipalNames)||_.some(n.aadAppIds)||_.some(n.groupIds)))return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.goalsHttpService.checkAccess(this.scorecard.groupId,this.scorecard.id,n).toPromise()];case 2:return t=a.sent(),this.updateAcessInfo(t),[3,4];case 3:return a.sent(),this.noAccessUsers$.next([]),[3,4];case 4:return this.noAccessUsers$.next(this.countUsersWithNoAccess(this.users)),[3,6];case 5:this.noAccessUsers$.next([]),a.label=6;case 6:return[2]}})})},o.prototype.getCheckScorecardAccessRequest=function(n){for(var t={userPrincipalNames:[],aadAppIds:[],groupIds:[]},i=0,a=n;i<a.length;i++){var l=a[i];2===l.objectType?void 0===this.userAccess.groupIds[l.objectId]&&t.groupIds.push(l.objectId):l.userPrincipalName?void 0===this.userAccess.userPrincipalNames[l.userPrincipalName]&&t.userPrincipalNames.push(l.userPrincipalName):void 0===this.userAccess.aadAppIds[l.aadAppId]&&t.aadAppIds.push(l.aadAppId)}return t},o.prototype.countUsersWithNoAccess=function(n){for(var t=[],i=0,a=n;i<a.length;i++){var l=a[i];2===l.objectType?!0!==this.userAccess.groupIds[l.objectId]&&t.push(l):l.userPrincipalName?!0!==this.userAccess.userPrincipalNames[l.userPrincipalName]&&t.push(l):!0!==this.userAccess.aadAppIds[l.aadAppId]&&t.push(l)}return t},o.prototype.updateAcessInfo=function(n){for(var t=0,i=_.keys(n?.userPrincipalNames);t<i.length;t++)this.userAccess.userPrincipalNames[a=i[t]]=n.userPrincipalNames[a];for(var l=0,c=_.keys(n?.aadAppIds);l<c.length;l++)this.userAccess.aadAppIds[a=c[l]]=n.aadAppIds[a];for(var u=0,p=_.keys(n?.groupIds);u<p.length;u++){var a;this.userAccess.groupIds[a=p[u]]=n.groupIds[a]}},o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(zt.f),e.\u0275\u0275directiveInject(Jg))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["scorecard-access-banner"]],inputs:{scorecard:"scorecard",users:"users",labels:"labels",showDismiss:"showDismiss"},features:[e.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[[4,"ngIf"],["class","message-banner",4,"ngIf"],[1,"message-banner"],["aria-hidden","true",1,"glyphicon","pbi-glyph-info","glyph-small","message-banner-icon"],[1,"message-banner-text-container"],[4,"ngIf","ngIfElse"],["multiple",""],[3,"click"],["class","close",3,"click",4,"ngIf"],[1,"close",3,"click"],["name","close","size","mini"]],template:function(t,i){1&t&&e.\u0275\u0275template(0,th,3,3,"ng-container",0),2&t&&e.\u0275\u0275property("ngIf",i.show&&(null==i.scorecard?null:i.scorecard.reportId))},dependencies:[U.NgIf,Gn._,U.AsyncPipe,xt.F,Xg.j],styles:['[_nghost-%COMP%]{display:block;font-size:12px}[_nghost-%COMP%]   .message-banner[_ngcontent-%COMP%]{color:var(--gray-180, #252423);display:flex;padding:10px 12px;background-color:var(--gray-20, #F3F2F1);margin-bottom:10px}[_nghost-%COMP%]   .message-banner[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{margin:0 0 0 auto;border:0;padding:0;background-color:transparent;color:inherit;display:flex;align-items:center}[_nghost-%COMP%]   .message-banner[_ngcontent-%COMP%]   .message-banner-text-container[_ngcontent-%COMP%]{display:block;line-height:16px;-webkit-user-select:text;-ms-user-select:text;user-select:text}[_nghost-%COMP%]   .message-banner[_ngcontent-%COMP%]   .message-banner-text-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;background-color:transparent;margin:0;padding:0;align-self:flex-end;text-decoration:underline;color:var(--fluent-theme-link-darker-color, #005A9E)}[_nghost-%COMP%]   .message-banner[_ngcontent-%COMP%]   .message-banner-text-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .message-banner[_ngcontent-%COMP%]   .message-banner-text-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{color:var(--fluent-theme-link-alt-color, #004578)}[_nghost-%COMP%]   .message-banner[_ngcontent-%COMP%]   .message-banner-text-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:1px solid var(--gray-140, #484644)}[_nghost-%COMP%]   .message-banner[_ngcontent-%COMP%]   .message-banner-text-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus:not(:focus-visible){outline:none}[_nghost-%COMP%]   .message-banner[_ngcontent-%COMP%]   .message-banner-text-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{color:var(--gray-90, #A19F9D)}html:not([dir="rtl"])   [_nghost-%COMP%]   .message-banner[_ngcontent-%COMP%]   .message-banner-icon[_ngcontent-%COMP%]{margin-right:8px}html[dir="rtl"]   [_nghost-%COMP%]   .message-banner[_ngcontent-%COMP%]   .message-banner-icon[_ngcontent-%COMP%]{margin-left:8px}'],changeDetection:0}),o}();function nh(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"input",7),e.\u0275\u0275listener("ngModelChange",function(l){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(c.bucketId=l)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(2,"input",8),e.\u0275\u0275listener("ngModelChange",function(l){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(c.bucketName=l)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",9),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.addBucket())}),e.\u0275\u0275element(4,"mat-icon",10)(5,"span",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"button",9),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.deleteBucket())}),e.\u0275\u0275element(7,"mat-icon",12)(8,"span",13),e.\u0275\u0275elementEnd()()}if(2&o){var i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngModel",i.bucketId),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngModel",i.bucketName)}}function ih(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",14),e.\u0275\u0275listener("cdkDragEntered",function(c){e.\u0275\u0275restoreView(t);var u=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(u.dragEnteredGroup(c))}),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275elementStart(2,"label",15),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()}if(2&o){var i=n.$implicit,a=e.\u0275\u0275nextContext();e.\u0275\u0275property("cdkDragDisabled",!e.\u0275\u0275pipeBind1(1,2,a.isEditMode$)),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(i.name)}}function oh(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",16)(1,"goal-tile",17),e.\u0275\u0275listener("cdkDropListDropped",function(c){e.\u0275\u0275restoreView(t);var u=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(u.drop(c))}),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementEnd()()}if(2&o){var i=n.$implicit,a=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("goal",i)("goalStatuses",a.metricsGoalStatuses)("settings",a.boardSettings)("cdkDragDisabled",!e.\u0275\u0275pipeBind1(2,4,a.isEditMode$))}}var Zc=function(){function o(n){var t=this;this.scorecardService=n,this.bucketArr=[],this.bucketName="",this.bucketId="",this.boardGoals=[],this.boardGroups=[],this.isEditMode$=this.scorecardService.isEditMode(),this.scorecardBoard$=this.scorecardService.getBoard(),this.scorecardBoard$.pipe().subscribe(function(i){t.boardGroups=i?.groups}),this.boardGoals=this.scorecardService.flatten()}return o.prototype.addBucket=function(){""!==this.bucketName&&this.scorecardService.addGroupToBoard(this.bucketId,this.bucketName)},o.prototype.deleteBucket=function(){this.scorecardService.deleteGroupFromBoard(this.bucketId)},o.prototype.drop=function(n){n.previousContainer===n.container?(0,Y.bA)(n.container.data,n.previousIndex,n.currentIndex):(0,Y.EA)(n.previousContainer.data,n.container.data,n.previousIndex,n.currentIndex)},o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(Ht))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["scorecard-board-view"]],inputs:{boardSettings:"boardSettings",metricsGoalStatuses:"metricsGoalStatuses"},decls:8,vars:6,consts:[[4,"ngIf"],["cdkDropListGroup","",1,"group-container"],["cdkDropList","",1,"group-list",3,"cdkDropListData","cdkDropListDropped"],["cdkDropList","","class","group-box","cdkDrag","",3,"cdkDragDisabled","cdkDragEntered",4,"ngFor","ngForOf"],["cdkDropListGroup",""],[1,"metric-container"],["cdkDropList","",4,"ngFor","ngForOf"],["type","text","placeholder","id",3,"ngModel","ngModelChange"],["type","text","placeholder","name",3,"ngModel","ngModelChange"],[3,"click"],["fontIcon","pbi-glyph-add",1,"glyphicon","glyph-mini"],["localize","Add_Group_To_Board_Visual"],["fontIcon","pbi-glyph-delete",1,"glyphicon","glyph-mini"],["localize","Delete_Group_From_Board_Visual"],["cdkDropList","","cdkDrag","",1,"group-box",3,"cdkDragDisabled","cdkDragEntered"],[1,"group-name"],["cdkDropList",""],["cdkDrag","",1,"metric-tile",3,"goal","goalStatuses","settings","cdkDragDisabled","cdkDropListDropped"]],template:function(t,i){1&t&&(e.\u0275\u0275template(0,nh,9,2,"div",0),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275elementStart(2,"div",1)(3,"div",2),e.\u0275\u0275listener("cdkDropListDropped",function(l){return i.drop(l)}),e.\u0275\u0275template(4,ih,4,4,"div",3),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"div",4)(6,"div",5),e.\u0275\u0275template(7,oh,3,6,"div",6),e.\u0275\u0275elementEnd()()),2&t&&(e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(1,4,i.isEditMode$)),e.\u0275\u0275advance(3),e.\u0275\u0275property("cdkDropListData",i.boardGroups),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",i.boardGroups),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",i.boardGoals))},dependencies:[U.NgForOf,U.NgIf,Y.Wj,Y.Fd,Y.Zt,se.Fj,se.JJ,se.On,jt.X,Ut.Hw,zs,U.AsyncPipe],styles:[".metric-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;flex-direction:row;gap:20px;margin:30px}.metric-container[_ngcontent-%COMP%]   .metric-tile[_ngcontent-%COMP%]{width:250px;height:180px;display:flex}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:.3}.group-container[_ngcontent-%COMP%]{max-width:100%;margin:0 25px 25px 0;vertical-align:top}.group-container[_ngcontent-%COMP%]   .group-list[_ngcontent-%COMP%]{overflow:hidden;display:block}.group-container[_ngcontent-%COMP%]   .group-list[_ngcontent-%COMP%]   .group-box[_ngcontent-%COMP%]{padding:20px;margin:20px;background-color:#d3d3d3;border-radius:20px;min-height:250px;display:flex;flex-wrap:wrap;flex-direction:row;gap:20px}.delete-group-button[_ngcontent-%COMP%]{font-size:medium;margin-left:auto;padding:0;border:none;background:none}.group-name[_ngcontent-%COMP%]{font-weight:700}"]}),o}(),rh=function(n){return{action:n}};function ah(o,n){if(1&o&&e.\u0275\u0275elementContainer(0,5),2&o){var t=n.$implicit;e.\u0275\u0275nextContext(3);var i=e.\u0275\u0275reference(3);e.\u0275\u0275property("ngTemplateOutlet",i)("ngTemplateOutletContext",e.\u0275\u0275pureFunction1(2,rh,t))}}function lh(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,ah,1,4,"ng-container",4),e.\u0275\u0275elementContainerEnd()),2&o){var t=n.ngIf;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t)}}function sh(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",6),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.args.onAddNote())}),e.\u0275\u0275element(1,"pbi-icon",7)(2,"div",8),e.\u0275\u0275elementEnd()}}function ch(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",6),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.args.onEditCheckIn())}),e.\u0275\u0275element(1,"pbi-icon",9)(2,"div",10),e.\u0275\u0275elementEnd()}}function uh(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",6),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.args.onDeleteCheckIn())}),e.\u0275\u0275element(1,"pbi-icon",11)(2,"div",12),e.\u0275\u0275elementEnd()}}function dh(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",6),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.args.onEditNote())}),e.\u0275\u0275element(1,"pbi-icon",9)(2,"div",13),e.\u0275\u0275elementEnd()}}function ph(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",6),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.args.onDeleteNote())}),e.\u0275\u0275element(1,"pbi-icon",11)(2,"div",14),e.\u0275\u0275elementEnd()}}function gh(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,lh,2,1,"ng-container",1),e.\u0275\u0275template(2,sh,3,0,"button",3),e.\u0275\u0275template(3,ch,3,0,"button",3),e.\u0275\u0275template(4,uh,3,0,"button",3),e.\u0275\u0275template(5,dh,3,0,"button",3),e.\u0275\u0275template(6,ph,3,0,"button",3),e.\u0275\u0275elementContainerEnd()),2&o){var t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.args.goalActions),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.args.onAddNote),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.args.onEditCheckIn),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.args.onDeleteCheckIn),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.args.onEditNote),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.args.onDeleteNote)}}function hh(o,n){if(1&o&&e.\u0275\u0275element(0,"mat-icon",22),2&o){var t=e.\u0275\u0275nextContext(2).action;e.\u0275\u0275property("fontIcon",t.iconName)}}function fh(o,n){if(1&o&&e.\u0275\u0275element(0,"pbi-icon",23),2&o){var t=e.\u0275\u0275nextContext(2).action;e.\u0275\u0275property("name",t.iconName)}}function mh(o,n){if(1&o&&e.\u0275\u0275element(0,"tri-svg-icon",24),2&o){var t=e.\u0275\u0275nextContext(2).action;e.\u0275\u0275property("name",t.iconName)}}function vh(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tooltip-wrapper",16)(1,"button",17),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var l=e.\u0275\u0275nextContext().action;return e.\u0275\u0275resetView(l.onClick())}),e.\u0275\u0275template(2,hh,1,1,"mat-icon",18),e.\u0275\u0275template(3,fh,1,1,"pbi-icon",19),e.\u0275\u0275template(4,mh,1,1,"tri-svg-icon",20),e.\u0275\u0275element(5,"div",21),e.\u0275\u0275elementEnd()()}if(2&o){var i=e.\u0275\u0275nextContext().action;e.\u0275\u0275property("tooltipKey",null==i?null:i.disabledTooltipKey),e.\u0275\u0275advance(1),e.\u0275\u0275property("disabled",i.disabled),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","mat"===i.iconType),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","pbi"===i.iconType),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","tri"===i.iconType),e.\u0275\u0275advance(1),e.\u0275\u0275property("localize",i.labelKey)}}function Ch(o,n){1&o&&e.\u0275\u0275template(0,vh,6,6,"tooltip-wrapper",15),2&o&&e.\u0275\u0275property("ngIf",n.action)}var Yc=function(){function o(){}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["scorecard-context-menu"]],inputs:{args:"args"},decls:4,vars:1,consts:[[1,"context-menu"],[4,"ngIf"],["actionOption",""],["class","option",3,"click",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngFor","ngForOf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"option",3,"click"],["name","add","size","small",1,"icon"],["localize","MetricsDetailsPane_DetailsTab_Add_Note",1,"text"],["name","edit","size","small",1,"icon"],["localize","MetricsDetailsPane_DetailsTab_Edit_Check_In",1,"text"],["name","delete","size","small",1,"icon"],["localize","MetricsDetailsPane_DetailsTab_Delete_Check_In",1,"text"],["localize","MetricsDetailsPane_DetailsTab_Edit_Note",1,"text"],["localize","MetricsDetailsPane_DetailsTab_Delete_Note",1,"text"],[3,"tooltipKey",4,"ngIf"],[3,"tooltipKey"],["mat-icon-button","",1,"option",3,"disabled","click"],["class","glyphicon glyph-small icon",3,"fontIcon",4,"ngIf"],["size","small","class","icon",3,"name",4,"ngIf"],["tri-svg-icon-16","","class","tri-svg icon",3,"name",4,"ngIf"],[1,"text",3,"localize"],[1,"glyphicon","glyph-small","icon",3,"fontIcon"],["size","small",1,"icon",3,"name"],["tri-svg-icon-16","",1,"tri-svg","icon",3,"name"]],template:function(t,i){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275template(1,gh,7,6,"ng-container",1),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(2,Ch,1,1,"ng-template",null,2,e.\u0275\u0275templateRefExtractor)),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.args))},dependencies:[U.NgForOf,U.NgIf,U.NgTemplateOutlet,jt.X,Ut.Hw,Gn._,ii.M,Pn],styles:['[_nghost-%COMP%]   .context-menu[_ngcontent-%COMP%]{width:fit-content;padding:2px 0;background-color:#fff;border-radius:2px;box-sizing:border-box;box-shadow:0 3.2px 7.2px rgba(0,0,0,.13),0 .6px 1.8px rgba(0,0,0,.11)}[_nghost-%COMP%]   .option[_ngcontent-%COMP%]{height:36px;display:flex;align-items:center;cursor:pointer;background-color:transparent;border:none;min-width:-webkit-fill-available}[_nghost-%COMP%]   .option[_ngcontent-%COMP%]:disabled{cursor:default}[_nghost-%COMP%]   .option[_ngcontent-%COMP%]:disabled   .text[_ngcontent-%COMP%]{color:var(--gray-80)}[_nghost-%COMP%]   .option[_ngcontent-%COMP%]:hover{background:var(--gray-20, #F3F2F1)}[_nghost-%COMP%]   .icon[_ngcontent-%COMP%]{height:16px;width:16px;font-size:16px;display:inline-block;padding-left:8px;padding-right:8px}[_nghost-%COMP%]   .text[_ngcontent-%COMP%]{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);color:var(--gray-180, #252423);text-align:left;display:inline-block}'],changeDetection:0}),o}(),Us=function(){function o(){this.filterBy=new e.EventEmitter}return o.prototype.onFilterBy=function(n){this.filterBy.emit(n)},o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["scorecard-filter"]],inputs:{filterText:"filterText"},outputs:{filterBy:"filterBy"},decls:5,vars:7,consts:[[1,"toolbar-filter-glyph"],["fontIcon","pbi-glyph-search",1,"glyphicon","glyph-mini"],[3,"ngModel","ngModelChange"]],template:function(t,i){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"mat-icon",1),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(2,"input",2),e.\u0275\u0275listener("ngModelChange",function(l){return i.onFilterBy(l)}),e.\u0275\u0275pipe(3,"localize"),e.\u0275\u0275pipe(4,"localize"),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("ngModel",i.filterText),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(3,3,"Filter_By_Keyword"))("placeholder",e.\u0275\u0275pipeBind1(4,5,"Filter_By_Keyword")))},dependencies:[se.Fj,se.JJ,se.On,Ut.Hw,xt.F],styles:["[_nghost-%COMP%]{display:inline-block;margin-right:8px;align-items:center;vertical-align:top;height:32px;width:230px}[_nghost-%COMP%]   .toolbar-filter-glyph[_ngcontent-%COMP%]{display:inline-block;margin:0;padding:0;border:none;outline:none;height:32px;width:32px;color:var(--gray-180, #252423);background-color:var(--fluent-theme-neutral-lighter-color, #F3F2F1);border-top-left-radius:4px;border-bottom-left-radius:4px}[_nghost-%COMP%]   .toolbar-filter-glyph[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-top:10px;margin-left:10px;height:12px;width:12px}[_nghost-%COMP%]   input[_ngcontent-%COMP%]{display:inline-block;vertical-align:top;margin:0;padding:0;height:32px;width:198px;color:var(--gray-180, #252423);font-weight:400;font-size:14px;line-height:20px;border:0px;border-top-right-radius:4px;border-bottom-right-radius:4px;background-color:var(--fluent-theme-neutral-lighter-color, #F3F2F1)}[_nghost-%COMP%]   input[_ngcontent-%COMP%]:focus{border:0px;outline:none}"],changeDetection:0}),o}(),_h=function(n){return{active:n}};function yh(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"button",4,5),e.\u0275\u0275element(2,"mat-icon",6)(3,"span",7),e.\u0275\u0275elementEnd()),2&o){var t=e.\u0275\u0275reference(1),i=e.\u0275\u0275nextContext(),a=e.\u0275\u0275reference(2);e.\u0275\u0275property("matMenuTriggerFor",a)("ngClass",e.\u0275\u0275pureFunction1(4,_h,!0===t.menuOpen)),e.\u0275\u0275advance(2),e.\u0275\u0275property("fontIcon",i.selectedOption.icon),e.\u0275\u0275advance(1),e.\u0275\u0275property("localize",i.selectedOption.label)}}function bh(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",8),e.\u0275\u0275listener("click",function(){var u=e.\u0275\u0275restoreView(t).$implicit,p=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(p.onSwitchView(u.value))}),e.\u0275\u0275element(1,"mat-icon",6)(2,"span",9),e.\u0275\u0275elementEnd()}if(2&o){var i=n.$implicit,a=e.\u0275\u0275nextContext();e.\u0275\u0275property("disabled",a.viewType===i.value),e.\u0275\u0275advance(1),e.\u0275\u0275property("fontIcon",i.icon),e.\u0275\u0275advance(1),e.\u0275\u0275property("localize",i.label)("localizeTooltip",i.label)}}var dc=function(o){function n(t,i,a,l){var c=o.call(this)||this;c.scorecardService=t,c.hierarchyService=i,c.featureSwitches=a,c.changeDetector=l;var u=c.featureSwitches.featureSwitches.scorecardCompactView,p=c.featureSwitches.featureSwitches.metricsBoardView,y=c.hierarchyService.hasHierarchies$.pipe((0,xe.U)(function(P){return c.featureSwitches.featureSwitches.goalsHierarchies&&c.featureSwitches.featureSwitches.goalsHierarchiesHeatmap&&P}),(0,be.R)(c.onDestroy$));return(0,_n.aj)([c.scorecardService.viewType$,y]).pipe((0,be.R)(c.onDestroy$)).subscribe(function(P){c.updateViewOptions(P[0],u,P[1],p)}),c}return(0,S.ZT)(n,o),n.prototype.onSwitchView=function(t){this.scorecardService.setViewType(t)},n.prototype.updateViewOptions=function(t,i,a,l){var c=[{value:"List",label:"ListView",icon:"pbi-glyph-allapps"}];i&&c.push({value:"Compact",label:"Scorecard_CompactView_Preview",icon:"pbi-glyph-allapps"}),l&&c.push({value:"Board",label:"Display_Mode_Board_View",icon:"pbi-glyph-table"}),a&&c.push({value:"Heatmap",label:"MetricsHeatmap_Preview",icon:"pbi-glyph-table"}),this.options=c,this.showViewSwitcher=c.length>1,this.viewType=t,this.selectedOption=c.find(function(u){return u.value===t}),this.changeDetector.markForCheck()},n.\u0275fac=function(i){return new(i||n)(e.\u0275\u0275directiveInject(Ht),e.\u0275\u0275directiveInject(jn),e.\u0275\u0275directiveInject(en.vZ),e.\u0275\u0275directiveInject(e.ChangeDetectorRef))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["view-switcher"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:4,vars:3,consts:[["cdkMonitorElementFocus","","mat-button","","aria-expanded","viewSwitcherMenuTrigger.menuOpen === true","class","view-mode-picker pbi-fluent-button",3,"matMenuTriggerFor","ngClass",4,"ngIf"],[1,"view-mode-picker-menu",3,"overlapTrigger"],["viewSwitcherMenu","matMenu"],["mat-menu-item","","class","pbi-fluent-button",3,"disabled","click",4,"ngFor","ngForOf"],["cdkMonitorElementFocus","","mat-button","","aria-expanded","viewSwitcherMenuTrigger.menuOpen === true",1,"view-mode-picker","pbi-fluent-button",3,"matMenuTriggerFor","ngClass"],["viewSwitcherMenuTrigger","matMenuTrigger"],[1,"glyphicon","glyph-small",3,"fontIcon"],[3,"localize"],["mat-menu-item","",1,"pbi-fluent-button",3,"disabled","click"],[3,"localize","localizeTooltip"]],template:function(i,a){1&i&&(e.\u0275\u0275template(0,yh,4,6,"button",0),e.\u0275\u0275elementStart(1,"mat-menu",1,2),e.\u0275\u0275template(3,bh,3,4,"button",3),e.\u0275\u0275elementEnd()),2&i&&(e.\u0275\u0275property("ngIf",a.showViewSwitcher&&a.selectedOption),e.\u0275\u0275advance(1),e.\u0275\u0275property("overlapTrigger",!1),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",a.options))},dependencies:[U.NgClass,U.NgForOf,U.NgIf,jt.X,Wn.r,Ut.Hw,Pt.W0,Pt.tN,Pt.D8],styles:[".view-mode-picker[_ngcontent-%COMP%]{border:none;display:inline-flex;align-items:center;background-color:var(--fluent-theme-neutral-lighter-alt-color, #FAF9F8)}.view-mode-picker[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{overflow:visible}.view-mode-picker[_ngcontent-%COMP%]   .mat-icon.glyph-small[_ngcontent-%COMP%]{font-size:var(--lg-font-size, 16px);width:var(--lg-font-size, 16px);height:var(--lg-font-size, 16px)}.view-mode-picker[_ngcontent-%COMP%]   .mat-icon.glyph-mini[_ngcontent-%COMP%]{font-size:var(--sm-font-size, 12px);width:var(--sm-font-size, 12px);height:var(--sm-font-size, 12px)}.view-mode-picker[_ngcontent-%COMP%]   .mat-icon.mat-ligature-font[fontIcon][_ngcontent-%COMP%]{overflow:auto}.view-mode-picker[_ngcontent-%COMP%]:hover{background-color:var(--gray-20, #F3F2F1)}.view-mode-picker[_ngcontent-%COMP%]:active{background-color:var(--gray-30, #EDEBE9)}.view-mode-picker[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-weight:400;margin-right:8px;color:var(--fluent-theme-black-color, #000)}  .mat-menu-panel.view-mode-picker-menu .mat-menu-content{padding:0}.mat-menu-item[_ngcontent-%COMP%]{color:var(--gray-180, #252423);display:flex;flex-direction:row;align-items:center;height:36px;padding-right:16px}.mat-menu-item[_ngcontent-%COMP%]:disabled{background:transparent;color:var(--gray-80, #B3B0AD)}"],changeDetection:0}),n}(Te.w);function wh(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tooltip-wrapper",6)(1,"button",7),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.onLinkedMetricInit.emit())}),e.\u0275\u0275element(2,"span",11),e.\u0275\u0275elementEnd()()}if(2&o){var i=e.\u0275\u0275nextContext();e.\u0275\u0275property("tooltipKey",null==i.capabilities||null==i.capabilities.createLinkedGoal?null:i.capabilities.createLinkedGoal.disabledMessageKey),e.\u0275\u0275advance(1),e.\u0275\u0275property("disabled",!(null!=i.capabilities&&null!=i.capabilities.createLinkedGoal&&i.capabilities.createLinkedGoal.enabled))}}function Sh(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tooltip-wrapper",6)(1,"button",12),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.hierarchyPane.openHierarchiesBuilder("ScorecardNewButton"))}),e.\u0275\u0275element(2,"span",13),e.\u0275\u0275elementEnd()()}if(2&o){var i=e.\u0275\u0275nextContext();e.\u0275\u0275property("tooltipKey",null==i.capabilities||null==i.capabilities.editHierarchies?null:i.capabilities.editHierarchies.disabledMessageKey),e.\u0275\u0275advance(1),e.\u0275\u0275property("disabled",!(null!=i.capabilities&&null!=i.capabilities.editHierarchies&&i.capabilities.editHierarchies.enabled)),e.\u0275\u0275advance(1),e.\u0275\u0275property("localize",i.hasHierarchies?"MetricsManageHierarchies_Preview":"MetricsHierarchy_SetupHierarchy_Preview")}}var pc=function(){function o(n,t){var i=this;this.hierarchyPane=n,this.scorecardService=t,this.onNewGoal=new e.EventEmitter,this.onNewSubGoal=new e.EventEmitter,this.onLinkedMetricInit=new e.EventEmitter,this.connectedGoalSubscrition=this.scorecardService.getScorecard().pipe((0,xe.U)(function(a){return X.anyGoals(a.goals,function(l){return!!l.valueConnection||!!l.targetConnection})}),(0,V.x)()).subscribe(function(a){i.anyConnectedGoals=a,i.updateCapabilities()})}return o.prototype.ngOnChanges=function(n){(n.scorecardCapabilities||n.hasHierarchies||n.numberOfSelectedGoals)&&this.updateCapabilities()},o.prototype.ngOnDestroy=function(){this.connectedGoalSubscrition.unsubscribe()},o.prototype.updateCapabilities=function(){this.scorecardCapabilities&&(this.capabilities=(0,S.pi)({},this.scorecardCapabilities),this.capabilities.editHierarchies=dn.clone(this.scorecardCapabilities.editHierarchies).disableIf(!this.anyConnectedGoals&&!this.hasHierarchies,"NoConnections","MetricsHierarchy_No_Connections_Tooltip").build(),this.capabilities.createSubgoal=dn.clone(this.scorecardCapabilities.createGoal).disableIf(1!==this.numberOfSelectedGoals,"InvalidSelection").build())},o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(Hs),e.\u0275\u0275directiveInject(Ht))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["scorecard-new-button"]],inputs:{isEditMode:"isEditMode",scorecardCapabilities:"scorecardCapabilities",numberOfSelectedGoals:"numberOfSelectedGoals",hasHierarchies:"hasHierarchies"},outputs:{onNewGoal:"onNewGoal",onNewSubGoal:"onNewSubGoal",onLinkedMetricInit:"onLinkedMetricInit"},features:[e.\u0275\u0275NgOnChangesFeature],decls:15,vars:13,consts:[["mat-button-toggle","",1,"new-btn","pbi-fluent-button","pbi-focus-outline","primary",3,"matMenuTriggerFor","disabled"],[1,"glyphicon","pbi-glyph-add","glyph-small","icon"],["localize","New",1,"label"],[1,"glyphicon","pbi-glyph-chevrondownsmall","glyph-small","icon"],[1,"new-menu",3,"overlapTrigger"],["newBtnDropdownMenu","matMenu"],[3,"tooltipKey"],["mat-menu-item","",1,"pbi-fluent-button",3,"disabled","click"],["localize","NewMetric"],[3,"tooltipKey",4,"pbiFeatureSwitch"],["localize","AddSubmetric"],["localize","Metrics_LinkedMetrics_Button_Preview"],["mat-menu-item","",1,"pbi-fluent-button","manage-hierarchies-btn",3,"disabled","click"],[3,"localize"]],template:function(t,i){if(1&t&&(e.\u0275\u0275elementStart(0,"button",0),e.\u0275\u0275pipe(1,"localize"),e.\u0275\u0275element(2,"i",1)(3,"span",2)(4,"i",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"mat-menu",4,5)(7,"tooltip-wrapper",6)(8,"button",7),e.\u0275\u0275listener("click",function(){return i.onNewGoal.emit()}),e.\u0275\u0275element(9,"span",8),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(10,wh,3,2,"tooltip-wrapper",9),e.\u0275\u0275elementStart(11,"tooltip-wrapper",6)(12,"button",7),e.\u0275\u0275listener("click",function(){return i.onNewSubGoal.emit()}),e.\u0275\u0275element(13,"span",10),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(14,Sh,3,3,"tooltip-wrapper",9),e.\u0275\u0275elementEnd()),2&t){var a=e.\u0275\u0275reference(6);e.\u0275\u0275property("matMenuTriggerFor",a)("disabled",!i.isEditMode),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(1,11,"New"))("aria-expanded",!0===a.menuOpen),e.\u0275\u0275advance(5),e.\u0275\u0275property("overlapTrigger",!1),e.\u0275\u0275advance(2),e.\u0275\u0275property("tooltipKey",null==i.capabilities||null==i.capabilities.createGoal?null:i.capabilities.createGoal.disabledMessageKey),e.\u0275\u0275advance(1),e.\u0275\u0275property("disabled",!(null!=i.capabilities&&null!=i.capabilities.createGoal&&i.capabilities.createGoal.enabled)),e.\u0275\u0275advance(2),e.\u0275\u0275property("pbiFeatureSwitch","goalsLinkedGoals"),e.\u0275\u0275advance(1),e.\u0275\u0275property("tooltipKey",null==i.capabilities||null==i.capabilities.createSubgoal?null:i.capabilities.createSubgoal.disabledMessageKey),e.\u0275\u0275advance(1),e.\u0275\u0275property("disabled",!(null!=i.capabilities&&null!=i.capabilities.createSubgoal&&i.capabilities.createSubgoal.enabled)),e.\u0275\u0275advance(2),e.\u0275\u0275property("pbiFeatureSwitch","goalsHierarchies")}},dependencies:[jt.X,Pt.W0,Pt.tN,Pt.D8,Q.P,Pn,xt.F],styles:[".new-btn[_ngcontent-%COMP%]{display:flex;align-items:center;padding:6px 10px}.new-btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{margin:0 4px}.new-btn[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{padding:0 4px}.manage-hierarchies-btn[_ngcontent-%COMP%]{border-top:1px solid var(--gray-40, #E1DFDD)}.manage-hierarchies-btn[_ngcontent-%COMP%]:active, .manage-hierarchies-btn[_ngcontent-%COMP%]:focus{border-top:1px solid var(--gray-40, #E1DFDD)}  .mat-menu-panel.new-menu .mat-menu-content{padding:0}.mat-menu-item[_ngcontent-%COMP%]{color:var(--gray-180, #252423);display:flex;flex-direction:row;align-items:center;height:36px}.mat-menu-item[_ngcontent-%COMP%]:disabled{background:transparent;color:var(--gray-80, #B3B0AD)}"],changeDetection:0}),o}();function Mh(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",9),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.hierarchyPane.showHeatmapDisplaySettingsPane())}),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275element(2,"pbi-icon",13)(3,"span",14),e.\u0275\u0275elementEnd()}if(2&o){var i=e.\u0275\u0275nextContext();e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(1,1,i.hierarchyPane.showHeatmapDisplaySettingsPane$))}}var Kc=function(o){function n(t,i,a,l,c,u,p){var y=o.call(this)||this;return y.hierarchyPane=t,y.capabilityService=i,y.heatmapService=a,y.hierarchyService=l,y.localizationService=c,y.scorecardService=u,y.changeDetector=p,y.filterBy=new e.EventEmitter,y.isEditMode$=y.scorecardService.isEditMode(),y.scorecardCapabilities$=y.capabilityService.getScorecardCapabilities(),y.canEditHeatmap$=y.scorecardCapabilities$.pipe((0,xe.U)(function(P){return P.editHeatmap})),y.hasHierarchies$=y.hierarchyService.hasHierarchies$,y.heatmapService.selectedHierarchyItems$.subscribe(function(P){var x=P.length-1;y.dropdownLabel=x>0?y.localizationService.format("MetricsHeatmap_ComparingItems",x):y.localizationService.get("Add_Columns"),y.changeDetector.markForCheck()}),y}return(0,S.ZT)(n,o),n.\u0275fac=function(i){return new(i||n)(e.\u0275\u0275directiveInject(Hs),e.\u0275\u0275directiveInject(eo),e.\u0275\u0275directiveInject(lc),e.\u0275\u0275directiveInject(jn),e.\u0275\u0275directiveInject(St.o),e.\u0275\u0275directiveInject(Ht),e.\u0275\u0275directiveInject(e.ChangeDetectorRef))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["scorecard-heatmap-toolbar"]],inputs:{filterText:"filterText"},outputs:{filterBy:"filterBy"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:22,vars:22,consts:[[1,"scorecard-heatmap-toolbar"],[1,"left-actions"],["mat-button","","cdkMonitorElementFocus","",1,"heatmap-menu-button","pbi-fluent-button","pbi-icon-button","pbi-with-text",3,"matMenuTriggerFor"],["name","chevrondownsmall","size","mini",1,"chevrondown"],[1,"right-actions"],[3,"filterText","filterBy"],[3,"isEditMode","scorecardCapabilities","hasHierarchies"],["xPosition","after",1,"heatmap-menu",3,"overlapTrigger"],["heatmapMenu","matMenu"],["mat-menu-item","",3,"disabled","click"],["name","edit","size","small",1,"icon"],["localize","MetricsCustomizeHeatmap"],["mat-menu-item","",3,"disabled","click",4,"ngIf"],["name","settings","size","small",1,"icon"],["localize","DisplaySettings_Open"]],template:function(i,a){if(1&i&&(e.\u0275\u0275elementStart(0,"section",0)(1,"div",1)(2,"button",2),e.\u0275\u0275pipe(3,"localize"),e.\u0275\u0275elementStart(4,"span"),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(6,"pbi-icon",3),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"div",4)(8,"scorecard-filter",5),e.\u0275\u0275listener("filterBy",function(u){return a.filterBy.emit(u)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(9,"view-switcher")(10,"scorecard-new-button",6),e.\u0275\u0275pipe(11,"async"),e.\u0275\u0275pipe(12,"async"),e.\u0275\u0275pipe(13,"async"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"mat-menu",7,8)(16,"button",9),e.\u0275\u0275listener("click",function(){return a.hierarchyPane.showHeatmapConfigurationPane()}),e.\u0275\u0275pipe(17,"async"),e.\u0275\u0275element(18,"pbi-icon",10)(19,"span",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(20,Mh,4,3,"button",12),e.\u0275\u0275pipe(21,"async"),e.\u0275\u0275elementEnd()),2&i){var l=e.\u0275\u0275reference(15);e.\u0275\u0275advance(2),e.\u0275\u0275property("matMenuTriggerFor",l),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(3,10,"Add_Columns")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(a.dropdownLabel),e.\u0275\u0275advance(3),e.\u0275\u0275property("filterText",a.filterText),e.\u0275\u0275advance(2),e.\u0275\u0275property("isEditMode",e.\u0275\u0275pipeBind1(11,12,a.isEditMode$))("scorecardCapabilities",e.\u0275\u0275pipeBind1(12,14,a.scorecardCapabilities$))("hasHierarchies",e.\u0275\u0275pipeBind1(13,16,a.hasHierarchies$)),e.\u0275\u0275advance(4),e.\u0275\u0275property("overlapTrigger",!1),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(17,18,a.hierarchyPane.showHeatmapConfigurationPane$)),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(21,20,a.canEditHeatmap$))}},dependencies:[U.NgIf,jt.X,Pt.W0,Pt.tN,Pt.D8,Gn._,dc,Us,pc,U.AsyncPipe,xt.F],styles:[".scorecard-heatmap-toolbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;box-sizing:border-box;padding:0 30px 12px;width:100%;font-family:var(--scorecard-fontFamily);color:var(--scorecard-headerForegroundColor);background-color:var(--scorecard-headerBackgroundColor);border-bottom:1px solid rgba(0,0,0,.05);vertical-align:top}.scorecard-heatmap-toolbar[_ngcontent-%COMP%]   .right-actions[_ngcontent-%COMP%]{display:inline-flex}.scorecard-heatmap-toolbar[_ngcontent-%COMP%]   .right-actions[_ngcontent-%COMP%]   .hierarchies-btn[_ngcontent-%COMP%]{background-color:var(--fluent-theme-neutral-lighter-alt-color, #FAF9F8)}.pbi-fluent-button[_ngcontent-%COMP%]{border:none;display:inline-flex;align-items:center}.pbi-fluent-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{overflow:visible}.pbi-fluent-button[_ngcontent-%COMP%]   .mat-icon.glyph-small[_ngcontent-%COMP%]{font-size:var(--lg-font-size, 16px);width:var(--lg-font-size, 16px);height:var(--lg-font-size, 16px)}.pbi-fluent-button[_ngcontent-%COMP%]   .mat-icon.glyph-mini[_ngcontent-%COMP%]{font-size:var(--sm-font-size, 12px);width:var(--sm-font-size, 12px);height:var(--sm-font-size, 12px)}.pbi-fluent-button[_ngcontent-%COMP%]   .mat-icon.mat-ligature-font[fontIcon][_ngcontent-%COMP%]{overflow:auto}.pbi-fluent-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .pbi-fluent-button[_ngcontent-%COMP%]   pbi-icon[_ngcontent-%COMP%]{margin:0 8px}.heatmap-menu-button[_ngcontent-%COMP%]{padding:0 8px}  .mat-menu-panel.heatmap-menu{min-height:fit-content;margin-top:4px}  .mat-menu-panel.heatmap-menu .mat-menu-content{padding:0}  .mat-menu-panel.heatmap-menu .mat-menu-item{color:var(--gray-180, #252423);display:flex;flex-direction:row;align-items:center;height:36px}  .mat-menu-panel.heatmap-menu .mat-menu-item:disabled{background:transparent;color:var(--gray-80, #B3B0AD)}  .mat-menu-panel.heatmap-menu .mat-menu-item pbi-icon{display:flex;padding-right:8px}"],changeDetection:0}),n}(Te.w);function Ph(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div")(1,"span",13),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"span"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()),2&o){var t=n.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.hierarchyName),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(": ",t.levels.join(" > "),"")}}function xh(o,n){if(1&o&&e.\u0275\u0275template(0,Ph,5,2,"div",12),2&o){var t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275property("ngForOf",t.displayPaths)}}function Oh(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"span",10),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,xh,1,1,"ng-template",null,11,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementContainerEnd()),2&o){var t=n.$implicit,i=e.\u0275\u0275reference(5);e.\u0275\u0275advance(1),e.\u0275\u0275property("pbiTooltip",i)("pbiTooltipDisabled",t.showingAll),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.showingAll?e.\u0275\u0275pipeBind1(3,3,"MetricsHierarchy_SelectHierarchy"):t.displayLabel," ")}}function Th(o,n){1&o&&e.\u0275\u0275element(0,"span",14)}function Eh(o,n){1&o&&e.\u0275\u0275element(0,"pbi-spinner",15)}var kh=function(n){return{active:n}};function Dh(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"button",4,5),e.\u0275\u0275template(2,Oh,6,5,"ng-container",6),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275template(4,Th,1,0,"ng-template",null,7,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(6,Eh,1,0,"pbi-spinner",8),e.\u0275\u0275pipe(7,"async"),e.\u0275\u0275element(8,"pbi-icon",9),e.\u0275\u0275elementEnd()),2&o){var t=e.\u0275\u0275reference(1),i=e.\u0275\u0275reference(5),a=e.\u0275\u0275nextContext(),l=e.\u0275\u0275reference(3);e.\u0275\u0275property("matMenuTriggerFor",l)("ngClass",e.\u0275\u0275pureFunction1(9,kh,!0===t.menuOpen)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(3,5,a.hierarchyDisplayInfo$))("ngIfElse",i),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(7,7,a.isSwitchingPath$))}}function Ih(o,n){1&o&&e.\u0275\u0275element(0,"pbi-lazy-load",16)}var gc=function(){function o(n,t){this.hierarchyService=n,this.scorecardService=t,this.showButton$=this.hierarchyService.hasHierarchies$,this.hierarchyDisplayInfo$=this.hierarchyService.getHierarchyDisplayInfoObservable(this.scorecardService.hierarchyPaths$),this.isSwitchingPath$=this.scorecardService.isSwitchingHierarchyPath()}return o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(jn),e.\u0275\u0275directiveInject(Ht))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["scorecard-hierarchy-button"]],decls:5,vars:3,consts:[["cdkMonitorElementFocus","","mat-button","","aria-expanded","hierarchySlicerMenuTrigger.menuOpen === true","class","hierarchy-btn pbi-fluent-button pbi-icon-button pbi-with-text",3,"matMenuTriggerFor","ngClass",4,"ngIf"],["xPosition","after","yPosition","below",1,"hierarchy-slicer-menu"],["hierarchySlicerMenu","matMenu"],["matMenuContent",""],["cdkMonitorElementFocus","","mat-button","","aria-expanded","hierarchySlicerMenuTrigger.menuOpen === true",1,"hierarchy-btn","pbi-fluent-button","pbi-icon-button","pbi-with-text",3,"matMenuTriggerFor","ngClass"],["hierarchySlicerMenuTrigger","matMenuTrigger"],[4,"ngIf","ngIfElse"],["loadingHierarchies",""],["class","pbi-spinner-small",4,"ngIf"],["size","mini","name","chevrondownsmall","localizeTooltip","View_Options",1,"icon"],[3,"pbiTooltip","pbiTooltipDisabled"],["hierarchySlicerTooltip",""],[4,"ngFor","ngForOf"],[1,"hierarchy-name"],["localize","All"],[1,"pbi-spinner-small"],["modulePath","@powerbi/GoalsHierarchy/goals-hierarchy.module#GoalsHierarchyModule","componentId","HierarchySlicerComponentId"]],template:function(t,i){1&t&&(e.\u0275\u0275template(0,Dh,9,11,"button",0),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275elementStart(2,"mat-menu",1,2),e.\u0275\u0275template(4,Ih,1,0,"ng-template",3),e.\u0275\u0275elementEnd()),2&t&&e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(1,1,i.showButton$))},dependencies:[U.NgClass,U.NgForOf,U.NgIf,Wc.R,jt.X,Wn.r,Pt.W0,Pt.D8,Pt.hd,Gn._,so.k,Ee.V,U.AsyncPipe,xt.F],styles:['.hierarchy-btn[_ngcontent-%COMP%]{padding-left:8px;padding-right:8px;background-color:var(--fluent-theme-neutral-lighter-alt-color, #FAF9F8)}.hierarchy-btn[_ngcontent-%COMP%]   pbi-spinner[_ngcontent-%COMP%]{height:20px}html:not([dir="rtl"])[_nghost-%COMP%]   .hierarchy-btn[_ngcontent-%COMP%]   pbi-spinner[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .hierarchy-btn[_ngcontent-%COMP%]   pbi-spinner[_ngcontent-%COMP%]{margin-left:8px}html[dir="rtl"][_nghost-%COMP%]   .hierarchy-btn[_ngcontent-%COMP%]   pbi-spinner[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .hierarchy-btn[_ngcontent-%COMP%]   pbi-spinner[_ngcontent-%COMP%]{margin-right:8px}html:not([dir="rtl"])[_nghost-%COMP%]   .hierarchy-btn[_ngcontent-%COMP%]   pbi-icon[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .hierarchy-btn[_ngcontent-%COMP%]   pbi-icon[_ngcontent-%COMP%]{margin-left:8px}html[dir="rtl"][_nghost-%COMP%]   .hierarchy-btn[_ngcontent-%COMP%]   pbi-icon[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .hierarchy-btn[_ngcontent-%COMP%]   pbi-icon[_ngcontent-%COMP%]{margin-right:8px}.hierarchy-name[_ngcontent-%COMP%]{font-weight:var(--font-weight-semi-bold)}'],changeDetection:0}),o}(),Fh=T(24150);function Gh(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"input",7),e.\u0275\u0275listener("ngModelChange",function(l){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(c.scorecardName=l)}),e.\u0275\u0275elementEnd()}if(2&o){var i=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngModel",i.scorecardName)}}function Vh(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tri-svg-icon",8),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var l=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(l.onScorecardNameEdit())}),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275elementEnd()}if(2&o){var i=e.\u0275\u0275nextContext(2);e.\u0275\u0275classProp("can-display",e.\u0275\u0275pipeBind1(1,3,i.isEditMode$)),e.\u0275\u0275property("name","edit_20_regular")}}function Rh(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"input",7),e.\u0275\u0275listener("ngModelChange",function(l){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(c.scorecardDescription=l)}),e.\u0275\u0275elementEnd()}if(2&o){var i=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("ngModel",i.scorecardDescription)}}function Ah(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tri-svg-icon",11),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var l=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(l.onDescriptionEdit())}),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275elementEnd()}if(2&o){var i=e.\u0275\u0275nextContext(3);e.\u0275\u0275classProp("can-display",e.\u0275\u0275pipeBind1(1,3,i.isEditMode$)),e.\u0275\u0275property("name","edit_20_regular")}}function Lh(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"span",9),e.\u0275\u0275template(1,Rh,1,1,"input",4),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275template(3,Ah,2,5,"tri-svg-icon",10),e.\u0275\u0275elementEnd()),2&o){var t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("pbiEditableLabel",t.pbiEditableDescriptionOptions)("pbiEditableLabelValue",t.scorecardDescription)("pbiEditableLabelMode",e.\u0275\u0275pipeBind1(2,5,t.isEditMode$))("pbiEditableLabelEditable",t.isScorecardDescriptionEditable),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!t.isScorecardDescriptionEditable)}}function Nh(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"span",3),e.\u0275\u0275template(2,Gh,1,1,"input",4),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275template(4,Vh,2,5,"tri-svg-icon",5),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,Lh,4,7,"span",6),e.\u0275\u0275elementContainerEnd()),2&o){var t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("pbiEditableLabel",t.pbiEditableNameOptions)("pbiEditableLabelValue",t.scorecardName)("pbiEditableLabelMode",e.\u0275\u0275pipeBind1(3,6,t.isEditMode$))("pbiEditableLabelEditable",t.isScorecardNameEditable),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!t.isScorecardNameEditable),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!!t.scorecardDescription)}}function zh(o,n){1&o&&(e.\u0275\u0275elementStart(0,"div",15),e.\u0275\u0275text(1,"-"),e.\u0275\u0275elementEnd())}function Hh(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",12),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(2,zh,2,0,"div",13),e.\u0275\u0275elementStart(3,"div",14),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()),2&o){var t=e.\u0275\u0275nextContext();e.\u0275\u0275propertyInterpolate("title",t.scorecardName),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.scorecardName),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.showTitleDash),e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate("title",t.scorecardDescription),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.scorecardDescription)}}var js=function(){function o(n,t,i){this.changeDetector=n,this.scorecardService=t,this.telemetryService=i,this.isNewHeader=!0,this.isScorecardNameEditable=!1,this.isScorecardDescriptionEditable=!1,this.isEditMode$=this.scorecardService.isEditMode()}return o.prototype.ngOnInit=function(){var n=this;this.showTitleDash=void 0!==this.scorecardDescription&&""!==this.scorecardDescription&&this.isNewHeader;var t=this.scorecardName,i=this.scorecardDescription;this.pbiEditableNameOptions={disableClick:!0,customTooltip:!1,inputMatchLabelWidth:!1,onEdit:this.onScorecardNameEdit.bind(this),onBlur:function(){return(0,S.mG)(n,void 0,void 0,function(){return(0,S.Jh)(this,function(l){switch(l.label){case 0:return this.isScorecardNameEditable=!1,t===this.scorecardName?[2]:(this.telemetryService.logEvent(Zl),[4,this.updateScorecardDetails()]);case 1:return l.sent(),t=this.scorecardName,[2]}})})}},this.pbiEditableDescriptionOptions={disableClick:!0,customTooltip:!1,inputMatchLabelWidth:!1,onEdit:this.onDescriptionEdit.bind(this),onBlur:function(){return(0,S.mG)(n,void 0,void 0,function(){return(0,S.Jh)(this,function(l){switch(l.label){case 0:return this.isScorecardDescriptionEditable=!1,i===this.scorecardDescription?[2]:(this.telemetryService.logEvent(pi),[4,this.updateScorecardDetails()]);case 1:return l.sent(),i=this.scorecardDescription,[2]}})})}}},o.prototype.ngOnChanges=function(n){n.scorecardDescription&&(this.showTitleDash=void 0!==this.scorecardDescription&&""!==this.scorecardDescription)},o.prototype.onScorecardNameEdit=function(){this.isScorecardNameEditable=!0,this.changeDetector.markForCheck()},o.prototype.onDescriptionEdit=function(){this.isScorecardDescriptionEditable=!0,this.changeDetector.markForCheck()},o.prototype.updateScorecardDetails=function(){return this.scorecardService.updateScorecard({name:this.scorecardName,description:this.scorecardDescription})},o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(Ht),e.\u0275\u0275directiveInject(Gt.y0))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["scorecard-title"]],inputs:{scorecardName:"scorecardName",scorecardDescription:"scorecardDescription",isTitleEditable:"isTitleEditable",isNewHeader:"isNewHeader"},features:[e.\u0275\u0275NgOnChangesFeature],decls:4,vars:4,consts:[["data-testid","scorecard-title",1,"scorecard-title"],[4,"ngIf","ngIfElse"],["staticTitle",""],[1,"editableLabel"],[3,"ngModel","ngModelChange",4,"pbiEditableLabel","pbiEditableLabelValue","pbiEditableLabelMode","pbiEditableLabelEditable"],["tri-svg-icon-16","","class","tri-svg","data-testid","edit-scorecard-title",3,"name","can-display","click",4,"ngIf"],["class","editableDescription",4,"ngIf"],[3,"ngModel","ngModelChange"],["tri-svg-icon-16","","data-testid","edit-scorecard-title",1,"tri-svg",3,"name","click"],[1,"editableDescription"],["tri-svg-icon-16","","class","tri-svg",3,"name","can-display","click",4,"ngIf"],["tri-svg-icon-16","",1,"tri-svg",3,"name","click"],[1,"title",3,"title"],["class","dash",4,"ngIf"],[1,"subtitle",3,"title"],[1,"dash"]],template:function(t,i){if(1&t&&(e.\u0275\u0275elementStart(0,"section",0),e.\u0275\u0275template(1,Nh,6,8,"ng-container",1),e.\u0275\u0275template(2,Hh,5,5,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&t){var a=e.\u0275\u0275reference(3);e.\u0275\u0275classProp("old-header",!i.isNewHeader),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.isTitleEditable)("ngIfElse",a)}},dependencies:[U.NgIf,se.Fj,se.JJ,se.On,Fh.D,ii.M,U.AsyncPipe],styles:[".scorecard-title.old-header[_ngcontent-%COMP%]{display:block}.scorecard-title.old-header[_ngcontent-%COMP%]   .editableLabel[_ngcontent-%COMP%]     pbi-text-label{max-width:90%}.scorecard-title.old-header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-bottom:10px}.scorecard-title.old-header[_ngcontent-%COMP%]   .editableDescription[_ngcontent-%COMP%]     pbi-text-label{max-width:90%}.scorecard-title[_ngcontent-%COMP%]{display:flex;flex-direction:row;box-sizing:border-box;padding:12px 30px 6px;width:100%;background-color:var(--scorecard-headerBackgroundColor)}.scorecard-title[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:var(--scorecard-headerForegroundColor);font-family:var(--scorecard-fontFamily);font-size:var(--vlg-font-size, 18px);font-weight:var(--font-weight-semi-bold, 600)}.scorecard-title[_ngcontent-%COMP%]   .editableLabel[_ngcontent-%COMP%]{height:40px;display:flex;align-items:center;padding-bottom:0;margin-right:10px;color:var(--scorecard-headerForegroundColor);font-family:var(--scorecard-fontFamily);font-size:var(--vlg-font-size, 18px);font-weight:var(--font-weight-semi-bold, 600)}.scorecard-title[_ngcontent-%COMP%]   .editableLabel[_ngcontent-%COMP%]:hover   .tri-svg.can-display[_ngcontent-%COMP%]{visibility:visible}.scorecard-title[_ngcontent-%COMP%]   .editableDescription[_ngcontent-%COMP%]{flex-grow:100;display:flex;align-items:center;color:var(--scorecard-headerForegroundColor);opacity:.9;font-family:var(--scorecard-fontFamily);font-size:var(--lg-font-size, 16px);font-weight:var(--font-weight-regular, 400)}.scorecard-title[_ngcontent-%COMP%]   .editableDescription[_ngcontent-%COMP%]:hover   .tri-svg.can-display[_ngcontent-%COMP%]{visibility:visible}.scorecard-title[_ngcontent-%COMP%]   .tri-svg[_ngcontent-%COMP%]{height:16px;width:16px;margin-left:6px;margin-right:4px;visibility:hidden}.scorecard-title[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:6px 12px 6px 16px;box-sizing:border-box;border:2px solid #0F6CBD;border-radius:4px}.scorecard-title[_ngcontent-%COMP%]   .dash[_ngcontent-%COMP%]{padding:0 8px}.scorecard-title[_ngcontent-%COMP%]   .dash[_ngcontent-%COMP%], .scorecard-title[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:var(--scorecard-headerForegroundColor);opacity:.9;font-family:var(--scorecard-fontFamily);font-size:var(--lg-font-size, 16px);font-weight:var(--font-weight-regular, 400)}"],changeDetection:0}),o}();function Bh(o,n){if(1&o&&e.\u0275\u0275element(0,"scorecard-title",7),2&o){var t=e.\u0275\u0275nextContext();e.\u0275\u0275property("scorecardName",t.scorecard.name)("isTitleEditable",t.isTitleEditable)}}function Uh(o,n){1&o&&e.\u0275\u0275element(0,"scorecard-hierarchy-button")}function jh(o,n){1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Uh,1,0,"scorecard-hierarchy-button",8),e.\u0275\u0275elementContainerEnd()),2&o&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("pbiFeatureSwitch","goalsHierarchies"))}function Wh(o,n){1&o&&e.\u0275\u0275element(0,"scorecard-hierarchy-button")}function $h(o,n){1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Wh,1,0,"scorecard-hierarchy-button",8),e.\u0275\u0275elementContainerEnd()),2&o&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("pbiFeatureSwitch","goalsHierarchies"))}var eu=function(){function o(n,t){this.hierarchyService=n,this.featureSwitchService=t,this.filterBy=new e.EventEmitter,this.onLinkedMetricInit=new e.EventEmitter,this.onNewGoal=new e.EventEmitter,this.onNewSubGoal=new e.EventEmitter,this.isTitleEditable=this.featureSwitchService.featureSwitches.goalsSkipScorecardCreationPane}return o.prototype.ngOnInit=function(){this.hasHierarchies$=this.hierarchyService.hasHierarchies$},o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(jn),e.\u0275\u0275directiveInject(en.vZ))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["scorecard-list-toolbar"]],inputs:{isEditMode:"isEditMode",scorecard:"scorecard",scorecardCapabilities:"scorecardCapabilities",numberOfSelectedGoals:"numberOfSelectedGoals",filterText:"filterText",showTitle:"showTitle"},outputs:{filterBy:"filterBy",onLinkedMetricInit:"onLinkedMetricInit",onNewGoal:"onNewGoal",onNewSubGoal:"onNewSubGoal"},decls:10,vars:10,consts:[["data-testid","scorecard-list-toolbar",1,"scorecard-list-toolbar"],[1,"left-actions","actions-container"],[3,"scorecardName","isTitleEditable",4,"ngIf"],[4,"ngIf"],[1,"right-actions","actions-container"],[3,"filterText","filterBy"],[3,"isEditMode","scorecardCapabilities","numberOfSelectedGoals","hasHierarchies","onNewGoal","onNewSubGoal","onLinkedMetricInit"],[3,"scorecardName","isTitleEditable"],[4,"pbiFeatureSwitch"]],template:function(t,i){1&t&&(e.\u0275\u0275elementStart(0,"section",0)(1,"div",1),e.\u0275\u0275template(2,Bh,1,2,"scorecard-title",2),e.\u0275\u0275template(3,jh,2,1,"ng-container",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",4),e.\u0275\u0275template(5,$h,2,1,"ng-container",3),e.\u0275\u0275elementStart(6,"scorecard-filter",5),e.\u0275\u0275listener("filterBy",function(l){return i.filterBy.emit(l)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(7,"view-switcher"),e.\u0275\u0275elementStart(8,"scorecard-new-button",6),e.\u0275\u0275listener("onNewGoal",function(){return i.onNewGoal.emit()})("onNewSubGoal",function(){return i.onNewSubGoal.emit()})("onLinkedMetricInit",function(){return i.onLinkedMetricInit.emit()}),e.\u0275\u0275pipe(9,"async"),e.\u0275\u0275elementEnd()()()),2&t&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",i.showTitle),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!i.showTitle),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",i.showTitle),e.\u0275\u0275advance(1),e.\u0275\u0275property("filterText",i.filterText),e.\u0275\u0275advance(2),e.\u0275\u0275property("isEditMode",i.isEditMode)("scorecardCapabilities",i.scorecardCapabilities)("numberOfSelectedGoals",i.numberOfSelectedGoals)("hasHierarchies",e.\u0275\u0275pipeBind1(9,8,i.hasHierarchies$)))},dependencies:[U.NgIf,Q.P,dc,js,Us,gc,pc,U.AsyncPipe],styles:["[_nghost-%COMP%]{--toolbar-padding: 0px 30px 12px 30px}[_nghost-%COMP%]   .scorecard-list-toolbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap;box-sizing:border-box;padding:var(--toolbar-padding);width:100%;font-family:var(--scorecard-fontFamily);background-color:var(--scorecard-headerBackgroundColor);border-bottom:1px solid var(--fluent-theme-neutral-quarter-alt-color, #E1DFDD);vertical-align:top}[_nghost-%COMP%]   .scorecard-list-toolbar[_ngcontent-%COMP%]   .actions-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:8px}[_nghost-%COMP%]   .scorecard-list-toolbar[_ngcontent-%COMP%]     .no-line .mat-form-field-underline{display:none}[_nghost-%COMP%]   .scorecard-list-toolbar[_ngcontent-%COMP%]   .mat-form-field-infix[_ngcontent-%COMP%]{border-top:0px}[_nghost-%COMP%]   .scorecard-list-toolbar[_ngcontent-%COMP%]     .scorecard-title{padding:0}[_nghost-%COMP%]   .scorecard-list-toolbar[_ngcontent-%COMP%]     .scorecard-title .editableLabel{font-size:var(--lg-font-size)}"],changeDetection:0}),o}(),tu=function(){function o(){this.filterBy=new e.EventEmitter}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["scorecard-metric-picker-toolbar"]],inputs:{filterText:"filterText"},outputs:{filterBy:"filterBy"},decls:4,vars:1,consts:[[1,"scorecard-picker-toolbar"],[1,"left-actions"],[1,"right-actions"],[3,"filterText","filterBy"]],template:function(t,i){1&t&&(e.\u0275\u0275elementStart(0,"section",0),e.\u0275\u0275element(1,"div",1),e.\u0275\u0275elementStart(2,"div",2)(3,"scorecard-filter",3),e.\u0275\u0275listener("filterBy",function(l){return i.filterBy.emit(l)}),e.\u0275\u0275elementEnd()()()),2&t&&(e.\u0275\u0275advance(3),e.\u0275\u0275property("filterText",i.filterText))},dependencies:[Us],styles:[".scorecard-picker-toolbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;box-sizing:border-box;padding:0 30px 12px;width:100%;font-family:var(--scorecard-fontFamily);background-color:var(--scorecard-headerBackgroundColor);border-bottom:1px solid var(--fluent-theme-neutral-quarter-alt-color, #E1DFDD);vertical-align:top}"],changeDetection:0}),o}(),Ws=T(78181),Qh=T(69437),Jh=["scorecardStatusTiles"];function Xh(o,n){1&o&&e.\u0275\u0275element(0,"pbi-office-icon",11)}var qh=function(n){return{"background-color":n}};function Zh(o,n){if(1&o&&e.\u0275\u0275element(0,"div",12),2&o){var t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275styleMap(e.\u0275\u0275pureFunction1(2,qh,t.color))}}function Yh(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-button-toggle",5),e.\u0275\u0275listener("click",function(){var c=e.\u0275\u0275restoreView(t).$implicit,u=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(u.onStatusTileClicked(c))}),e.\u0275\u0275elementStart(1,"span",6),e.\u0275\u0275template(2,Xh,1,0,"pbi-office-icon",7),e.\u0275\u0275template(3,Zh,1,4,"div",8),e.\u0275\u0275elementStart(4,"div",9),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"span",10),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd()()}if(2&o){var i=n.$implicit;e.\u0275\u0275classProp("filtered-on",i.filteredOn)("hide",i.collapsed),e.\u0275\u0275property("checked",i.filteredOn),e.\u0275\u0275attribute("aria-label",i.displayName),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",i.filteredOn),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!i.filteredOn),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(i.displayName),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(i.count)}}function Kh(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",13),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.onCollapse())}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()}if(2&o){var i=e.\u0275\u0275nextContext();e.\u0275\u0275classProp("expanded",!i.collapsed),e.\u0275\u0275attribute("aria-label",i.collapseButtonAriaLabel),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(i.collapseButtonLabel)}}var nu=function(){function o(n,t){this.changeDetectorRef=n,this.localizationService=t,this.onStatusSelected=new e.EventEmitter,this.collapsed=!0,this.columnGap=8,this.enableCollapse=!1,this.tileMinWidth=140,this.tileMaxWidth=210,this.goalStatusHelper=new ie.p(this.localizationService)}return o.prototype.onResize=function(){this.updateGoalStatusTiles()},o.prototype.ngAfterViewInit=function(){this.updateGoalStatusTiles()},o.prototype.ngOnChanges=function(){this.updateGoalStatusTiles()},o.prototype.onStatusTileClicked=function(n){if(_.isNil(this.selectedStatuses)&&(this.selectedStatuses=[]),n.status){var t=_.find(this.selectedStatuses,function(i){return ie.p.statusesMatch(i,n.status)});t?this.selectedStatuses=_.without(this.selectedStatuses,t):this.selectedStatuses.push(n.status)}else this.selectedStatuses=[];this.updateGoalStatusTiles(),this.onStatusSelected.emit(this.selectedStatuses)},o.prototype.onCollapse=function(){this.collapsed=!this.collapsed,this.updateGoalStatusTiles()},o.prototype.updateGoalStatusTiles=function(){this.createStatusTiles(),this.calculateGrid(),this.collapseGrid(),this.changeDetectorRef.markForCheck()},o.prototype.createStatusTiles=function(){var n;if(this.goals&&0!==(null===(n=this.goals)||void 0===n?void 0:n.length)&&(1!==this.goals.length||!_.isNil(this.goals[0].name))){var t=X.flattenGoals(this.goals);this.statusTiles=[];var i=_.isEmpty(this.selectedStatuses);this.statusTiles.push({displayName:this.localizationService.get("MetricsName_New"),count:_.size(t),collapsed:!1,filteredOn:i});for(var a=_.filter(this.goalStatusList,function(N){return!N.historical}),c=0,u=ie.p.getDistinctStatuses(t,this.goalStatusesByScorecardId,a);c<u.length;c++){var p=u[c],y=this.goalStatusHelper.tryLocalizeDisplayName(p.displayName)||this.localizationService.get("NullValue"),P=ie.p.listIncludesMatchingStatus(this.selectedStatuses,p),x=ie.p.getGoalStatusIconColor(p.color);this.statusTiles.push({status:p,displayName:y,color:x,count:p.count,collapsed:!1,filteredOn:P})}}},o.prototype.calculateGrid=function(){var n,t;if(this.statusTiles&&0!==(null===(n=this.statusTiles)||void 0===n?void 0:n.length)&&null!==(t=this.scorecardStatusTiles)&&void 0!==t&&t.nativeElement){var i=this.statusTiles.length;if(this.availableSpace=this.scorecardStatusTiles.nativeElement.clientWidth,this.availableSpace<this.tileMinWidth)return this.gridLayout={numberOfRows:i,numberOfColumns:1},this.gridStyle={"column-gap":"".concat(this.columnGap,"px"),"grid-template-columns":"repeat(".concat(this.gridLayout.numberOfColumns,", 1fr)")},void(this.enableCollapse=!0);if(this.availableSpace>i*this.tileMaxWidth+(i-1)*this.columnGap)return this.gridLayout={numberOfRows:1,numberOfColumns:i},this.gridStyle={"column-gap":"".concat(this.columnGap,"px"),"grid-template-columns":"repeat(auto-fill, ".concat(this.tileMaxWidth,"px)")},void(this.enableCollapse=!1);for(var a=Math.floor((this.availableSpace-this.tileMinWidth)/(this.tileMinWidth+this.columnGap)+1),c=[];a>0&&(this.availableSpace-(a-1)*this.columnGap)/a<=this.tileMaxWidth;)c.push({numberOfRows:Math.ceil(this.statusTiles.length/a),numberOfColumns:a}),a-=1;switch(c.length){case 0:a=Math.floor((this.availableSpace-this.tileMinWidth)/(this.tileMinWidth+this.columnGap)+1),this.gridLayout={numberOfRows:Math.ceil(this.statusTiles.length/a),numberOfColumns:a};break;case 1:this.gridLayout=c[0];break;default:if(this.availableSpace>=768){this.gridLayout=c[c.length-1];break}if(this.availableSpace<=767&&this.availableSpace>480){this.gridLayout=c[Math.ceil(c.length/2)-1];break}if(this.availableSpace<=480){this.gridLayout=c[0];break}}this.gridStyle={"column-gap":"".concat(this.columnGap,"px"),"grid-template-columns":"repeat(".concat(this.gridLayout.numberOfColumns,", 1fr)")},this.enableCollapse=this.gridLayout.numberOfRows>1}},o.prototype.collapseGrid=function(){if(this.enableCollapse){if(!this.collapsed)return this.collapseButtonLabel=this.localizationService.get("Collapse"),void(this.collapseButtonAriaLabel=this.localizationService.get("CollapseStatuses"));for(var n=!0,t=this.gridLayout.numberOfColumns-1;t<this.statusTiles.length;t++)this.statusTiles[t].filteredOn&&(n=!1);n?this.standardCollapse():this.rearrangeCollapse(),this.collapseButtonLabel=this.localizationService.format("ShowXMore",[this.collapsedStatuses]),this.collapseButtonAriaLabel=this.localizationService.format("ShowMoreStatuses",[this.collapsedStatuses])}},o.prototype.standardCollapse=function(){for(var n=this.gridLayout.numberOfColumns-1;n<this.statusTiles.length;n++)this.statusTiles[n].collapsed=!0;this.collapsedStatuses=this.statusTiles.length-(this.gridLayout.numberOfColumns-1)},o.prototype.rearrangeCollapse=function(){var n=[this.statusTiles[0]],t=this.statusTiles.filter(function(l){return l.filteredOn&&l.status}),i=this.statusTiles.filter(function(l){return!l.filteredOn&&l.status});n=(n=n.concat(t)).concat(i),this.collapsedStatuses=0;for(var a=0;a<n.length;a++)!n[a].filteredOn&&a>this.gridLayout.numberOfColumns-2&&(n[a].collapsed=!0,this.collapsedStatuses+=1);this.statusTiles=n},o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(St.o))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["scorecard-status-tiles"]],viewQuery:function(t,i){var a;(1&t&&e.\u0275\u0275viewQuery(Jh,5),2&t)&&(e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(i.scorecardStatusTiles=a.first))},hostBindings:function(t,i){1&t&&e.\u0275\u0275listener("resize",function(l){return i.onResize(l)},!1,e.\u0275\u0275resolveWindow)},inputs:{goals:"goals",goalStatusesByScorecardId:"goalStatusesByScorecardId",goalStatusList:"goalStatusList",selectedStatuses:"selectedStatuses"},outputs:{onStatusSelected:"onStatusSelected"},features:[e.\u0275\u0275NgOnChangesFeature],decls:5,vars:4,consts:[[1,"scorecard-status-tiles"],["multiple","",1,"status-tiles-btn-group"],["scorecardStatusTiles",""],["class","status-tile",3,"checked","filtered-on","hide","click",4,"ngFor","ngForOf"],["class","status-tiles-collapse-btn",3,"expanded","click",4,"ngIf"],[1,"status-tile",3,"checked","click"],[1,"status-tile-flex-container"],["class","status-tile-icon","name","CheckmarkWithDynamicColor_16",4,"ngIf"],["class","status-tile-dot",3,"style",4,"ngIf"],[1,"status-tile-name"],[1,"status-tile-count"],["name","CheckmarkWithDynamicColor_16",1,"status-tile-icon"],[1,"status-tile-dot"],[1,"status-tiles-collapse-btn",3,"click"]],template:function(t,i){1&t&&(e.\u0275\u0275elementStart(0,"section",0)(1,"mat-button-toggle-group",1,2),e.\u0275\u0275template(3,Yh,8,10,"mat-button-toggle",3),e.\u0275\u0275template(4,Kh,3,4,"button",4),e.\u0275\u0275elementEnd()()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275styleMap(i.gridStyle),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",i.statusTiles),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.enableCollapse))},dependencies:[U.NgForOf,U.NgIf,Ws.A9,Ws.Yi,Qh.m],styles:[".scorecard-status-tiles[_ngcontent-%COMP%]{box-sizing:border-box;padding:0 30px;font-family:var(--scorecard-fontFamily);background-color:var(--scorecard-headerBackgroundColor);border-bottom:1px solid var(--fluent-theme-neutral-quarter-alt-color, #E1DFDD);width:100%}.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]{display:grid;row-gap:12px;grid-template-rows:repeat(auto-fill,40px);column-gap:8px;grid-template-columns:repeat(auto-fill,140px);padding:12px 0;width:100%;border:var(--focus-outline-definition, 2.5px solid) transparent}@media screen and (-ms-high-contrast: active){.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]{border:none}}.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tile[_ngcontent-%COMP%]{display:flex;box-sizing:border-box;justify-content:space-between;min-width:140px;max-width:210px;padding:0;box-shadow:none;border:1px solid var(--gray-30, #EDEBE9);border-radius:2px;background-color:var(--fluent-theme-white-color, #FFF)}.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tile.hide[_ngcontent-%COMP%]{display:none}.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tile[_ngcontent-%COMP%]:hover{background-color:var(--gray-20, #F3F2F1)}.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tile[_ngcontent-%COMP%]:active{background-color:var(--gray-30, #EDEBE9)}.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tile.filtered-on[_ngcontent-%COMP%]{border:1px solid var(--gray-140, #484644)}.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tile[_ngcontent-%COMP%]     .mat-button-toggle-button{width:100%;padding:10px 12px}.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tile[_ngcontent-%COMP%]     .mat-button-toggle-button .mat-button-toggle-label-content{display:flex;box-sizing:border-box;justify-content:space-between;max-height:20px;padding:0;line-height:20px}.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tile[_ngcontent-%COMP%]     .mat-button-toggle-button .mat-button-toggle-label-content .status-tile-flex-container{text-align:left;max-width:80%}.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tile[_ngcontent-%COMP%]     .mat-button-toggle-button .mat-button-toggle-label-content .status-tile-flex-container .status-tile-dot{display:inline-block;height:8px;width:8px;margin:6px 8px 6px 0;border-radius:50%;background-color:var(--fluent-theme-black-color, #000)}.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tile[_ngcontent-%COMP%]     .mat-button-toggle-button .mat-button-toggle-label-content .status-tile-flex-container .status-tile-icon{display:inline-block;vertical-align:top;height:16px;width:16px;margin:1px 4px 2px 0}.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tile[_ngcontent-%COMP%]     .mat-button-toggle-button .mat-button-toggle-label-content .status-tile-flex-container .status-tile-name{display:inline-block;width:100%;line-height:20px;font-family:var(--scorecard-fontFamily);font-size:var(--md-font-size, 14px);overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tile[_ngcontent-%COMP%]     .mat-button-toggle-button .mat-button-toggle-label-content .status-tile-count{max-width:20%;font-family:var(--scorecard-fontFamily);font-size:var(--md-font-size, 14px);text-align:right;line-height:20px}.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tiles-collapse-btn[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;margin:auto 0 auto auto;padding:0;color:var(--fluent-theme-link-darker-alt-color, #106EBE);background:transparent;border:var(--focus-outline-definition, 2.5px solid) transparent}@media screen and (-ms-high-contrast: active){.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tiles-collapse-btn[_ngcontent-%COMP%]{border:none}}.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tiles-collapse-btn[_ngcontent-%COMP%]:hover, .scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tiles-collapse-btn[_ngcontent-%COMP%]:active{border:var(--focus-outline-definition, 2.5px solid) transparent}@media screen and (-ms-high-contrast: active){.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tiles-collapse-btn[_ngcontent-%COMP%]:hover, .scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tiles-collapse-btn[_ngcontent-%COMP%]:active{border:none}}.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tiles-collapse-btn.expanded[_ngcontent-%COMP%]{flex-direction:row;margin:auto auto auto 12px}"],changeDetection:0}),o}(),ef=T(87582),tf=T(85928),nf=T(48741),hc=function(){function o(n,t,i,a){this.appSettings=n,this.mashupService=t,this.httpClient=i,this.goalsHttpService=a}return o.prototype.evaluateQuery=function(n){return(0,S.mG)(this,void 0,void 0,function(){var t,i,a;return(0,S.Jh)(this,function(u){switch(u.label){case 0:return[4,this.mashupService.getPQEndpoint().pipe((0,ue.q)(1)).toPromise()];case 1:return t=u.sent(),[4,this.mashupService.getPQToken("".concat(this.appSettings.powerQueryResourceName,"/.default")).pipe((0,ue.q)(1)).toPromise()];case 2:return i=u.sent(),a="".concat(t,"/api/evaluator/evaluate"),[4,this.httpClient.post(a,{mashupDocument:n,queryName:"Query",fastCombine:!0},{headers:{"x-ms-api-version":"2.0",authorization:"Bearer ".concat(i)}}).pipe((0,ue.q)(1)).toPromise()];case 3:return[2,u.sent()]}})})},o.prototype.importGoal=function(n,t,i,a,l){return(0,S.mG)(this,void 0,void 0,function(){var c,u,p,y,P,x,N,W,te,me,Oe,ve,Xe,ot;return(0,S.Jh)(this,function(Dt){switch(Dt.label){case 0:c=[],u=_.indexOf(a,"Name"),p=_.indexOf(a,"Owner"),y=_.indexOf(a,"Status"),P=_.indexOf(a,"Value"),x=_.indexOf(a,"Due Date"),N=_.indexOf(a,"Notes"),c.push(u,p,y,P,x,N),-1!==y&&(W=this.getStatus(i,y,l)),te=0,me=0,Oe=i.rows,Dt.label=1;case 1:return me<Oe.length?[4,this.goalsHttpService.createGoal(n,t,{name:(ve=Oe[me])[u],owner:ve[p],completionDate:ve[x]}).pipe().toPromise()]:[3,5];case 2:return Xe=Dt.sent(),ot={timestamp:"2:00",status:W[te]},te+=1,[4,this.goalsHttpService.createGoalValue(n,t,Xe.id,ot)];case 3:Dt.sent(),Dt.label=4;case 4:return me++,[3,1];case 5:return[2]}})})},o.prototype.getStatus=function(n,t,i){for(var l=[],c=0,u=n.rows;c<u.length;c++){var y=u[c][t].replace(/\s/g,"");l.push(y)}for(var P=[],x=0,N=l;x<N.length;x++){var te=ie.p.getGoalStatusId(N[x],i);P.push(te)}return P},o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275inject(qr.de),e.\u0275\u0275inject(tf.M),e.\u0275\u0275inject(nf.eN),e.\u0275\u0275inject(zt.f))},o.\u0275prov=e.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac}),o}();function of(o,n){if(1&o&&e.\u0275\u0275element(0,"message-banner",10),2&o){var t=e.\u0275\u0275nextContext();e.\u0275\u0275property("viewModel",t.messageBannerModelColumn)}}function rf(o,n){if(1&o&&e.\u0275\u0275element(0,"message-banner",10),2&o){var t=e.\u0275\u0275nextContext();e.\u0275\u0275property("viewModel",t.messageBannerModelEmpty)}}function af(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"option",15),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){var t=n.$implicit;e.\u0275\u0275property("value",n.index),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.sheetName)}}function lf(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",11),e.\u0275\u0275element(1,"p",12),e.\u0275\u0275elementStart(2,"select",13),e.\u0275\u0275listener("change",function(l){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(c.onSelectTable(l.target.value))}),e.\u0275\u0275template(3,af,2,2,"option",14),e.\u0275\u0275elementEnd()()}if(2&o){var i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",i.goalPreviewData)}}function sf(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"option",24),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){var t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t)}}function cf(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"th")(1,"div",19)(2,"div",20)(3,"select",21),e.\u0275\u0275listener("ngModelChange",function(u){var y=e.\u0275\u0275restoreView(t).index,P=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(P.matchedHeaderName[y]=u)}),e.\u0275\u0275text(4),e.\u0275\u0275template(5,sf,2,2,"option",22),e.\u0275\u0275element(6,"option"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"div",23),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd()()()}if(2&o){var i=n.index,a=n.$implicit,l=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275property("ngModel",l.matchedHeaderName[i]),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",l.matchedHeaderName[i]," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",l.scorecardAttributes),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(a)}}function uf(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){var t=n.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t)}}function df(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"tr"),e.\u0275\u0275template(1,uf,2,1,"td",18),e.\u0275\u0275elementEnd()),2&o){var t=n.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t)}}function pf(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",16)(1,"table",17)(2,"tr"),e.\u0275\u0275template(3,cf,9,4,"th",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,df,2,1,"tr",18),e.\u0275\u0275elementEnd()()),2&o){var t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",t.matchedHeaderName)("ngForOf",t.goalImportFileMetadata.tables[t.selectTable].column),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t.goalImportFileMetadata.tables[t.selectTable].rows)}}function gf(o,n){1&o&&e.\u0275\u0275element(0,"pbi-spinner",25)}function hf(o,n){1&o&&e.\u0275\u0275element(0,"span",32)}function ff(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"span",33),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){var t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.numGoals,"")}}function mf(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"section",26)(1,"div",27)(2,"button",28),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.importFromFile())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",29),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.close())}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(4,hf,1,0,"span",30),e.\u0275\u0275template(5,ff,2,1,"span",31),e.\u0275\u0275elementEnd()}if(2&o){var i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",i.hasDataLoaded),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.hasDataLoaded)}}var vf=function(){function o(n,t,i,a){this.data=n,this.mashupEvaluationService=t,this.localizationService=i,this.dialogService=a,this.selectTable=0,this.maxPercent=0,this.numGoals=0,this.emptyFile=!1,this.exceedsColumns=!1,this.hasDataLoaded=!1,this.messageBannerModelColumn={bannerType:0,iconName:"pbi-glyph-warning",message:this.localizationService.get("MetricsScorecard_Import_Error_Column_Num")},this.messageBannerModelEmpty={bannerType:0,iconName:"pbi-glyph-error",message:this.localizationService.get("MetricsScorecard_Import_Error_Empty_File")}}return o.prototype.ngOnInit=function(){var n=this;this.goalImportFileMetadata={file_name:"ExampleFile",tables:[]},this.goalPreviewData=this.goalImportFileMetadata.tables,this.scorecardAttributes=["Name","Owner","Status","Value","Progress","Due Date","Notes"],this.getAllTables().then(function(t){if(_.isEmpty(t))n.emptyFile=!0;else{for(var i=0,a=t;i<a.length;i++){var l=a[i];n.goalPreviewData.push({sheetName:l.sheetName,tableName:l.tableName,column:[],rows:[]})}n.onSelectTable(0)}})},o.prototype.onSelectTable=function(n){return(0,S.mG)(this,void 0,void 0,function(){var t,i;return(0,S.Jh)(this,function(a){switch(a.label){case 0:return this.selectTable=n,t=this.goalImportFileMetadata.tables[n],_.isEmpty(t.column)?(this.hasDataLoaded=!1,[4,this.evaluatePreviewTable(t.sheetName,t.tableName)]):[3,2];case 1:i=a.sent(),this.goalImportFileMetadata.tables[this.selectTable].column=i.columns,this.goalImportFileMetadata.tables[this.selectTable].rows=i.rows,a.label=2;case 2:return this.setHeaders(),this.numGoals=this.goalImportFileMetadata.tables[this.selectTable].rows.length,this.exceedsColumns=this.goalImportFileMetadata.tables[this.selectTable].column.length>=7,[2]}})})},o.prototype.setHeaders=function(){this.excelHeaders=this.goalImportFileMetadata.tables[this.selectTable].column;for(var n=[],t=0,i=this.excelHeaders;t<i.length;t++)this.stringSimilarity(i[t],this.scorecardAttributes),n.push(this.maxPercentHeader);this.matchedHeaderName=n,this.hasDataLoaded=!0},o.prototype.getAllTables=function(){return(0,S.mG)(this,void 0,void 0,function(){var n,t,i,a,l,c,u,p;return(0,S.Jh)(this,function(y){switch(y.label){case 0:return n=this.data.fileData,M.fF.assertValue(this.data.fileData,"Missing file data"),[4,this.mashupEvaluationService.evaluateQuery('section Section1; shared Query = let source = Excel.Workbook(Binary.FromText("'.concat(n,'")) in source;'))];case 1:for(t=y.sent(),i=[],a=_.indexOf(t.columns,"Name"),l=_.indexOf(t.columns,"Kind"),c=0,u=t.rows;c<u.length;c++)"Table"===(p=u[c])[l]&&i.push({sheetName:p[a],tableName:p[l],column:[],rows:[]});return[2,i]}})})},o.prototype.importFromFile=function(){var n;return(0,S.mG)(this,void 0,void 0,function(){var i;return(0,S.Jh)(this,function(a){switch(a.label){case 0:return[4,this.mashupEvaluationService.importGoal((i=this.data.scorecard).groupId,i.id,this.goalImportFileMetadata.tables[this.selectTable],this.matchedHeaderName,null===(n=i.goalStatuses)||void 0===n?void 0:n.statuses)];case 1:return a.sent(),this.close(),[2]}})})},o.prototype.evaluatePreviewTable=function(n,t){return(0,S.mG)(this,void 0,void 0,function(){return(0,S.Jh)(this,function(a){return[2,this.mashupEvaluationService.evaluateQuery('section Section1; shared Query = let source = Excel.Workbook(Binary.FromText("'.concat(this.data.fileData,'")){[Item="').concat(n,'",Kind="').concat(t,'"]}[Data] in source;'))]})})},o.prototype.stringSimilarity=function(n,t,i){function a(Xe,ot){Xe=" ".repeat(ot-1)+Xe.toLowerCase()+" ".repeat(ot-1);for(var Dt=new Array(Xe.length-ot+1),ct=0;ct<Dt.length;ct++)Dt[ct]=Xe.slice(ct,ct+ot);return Dt}void 0===i&&(i=2),this.maxPercent=0;for(var l=0,c=0,u=t;c<u.length;c++){var p=u[c];if(!n?.length||!p?.length)return 0;for(var P=n.length<p.length?p:n,x=a(n.length<p.length?n:p,i),N=a(P,i),W=new Set(x),te=N.length,me=0,Oe=0,ve=N;Oe<ve.length;Oe++)W.delete(ve[Oe])&&me++;(l=me/te)>this.maxPercent&&(this.maxPercent=l,this.maxPercentHeader=p)}},o.prototype.close=function(){this.dialogService.closeAll()},o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(_o.WI),e.\u0275\u0275directiveInject(hc),e.\u0275\u0275directiveInject(St.o),e.\u0275\u0275directiveInject(xo.x))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["import-dialog"]],features:[e.\u0275\u0275ProvidersFeature([hc])],decls:13,vars:9,consts:[[1,"header"],["mat-dialog-title","","localize","MetricsScorecard_Import_Dialog_Header"],[1,"title"],["mat-icon-button","",1,"close",3,"click"],["fontIcon","pbi-glyph-close",1,"glyph-mini"],["class","impact-margin",3,"viewModel",4,"ngIf"],["class","select",4,"ngIf"],["class","scroll",4,"ngIf"],["class","pbi-spinner-large",4,"ngIf"],["class","import",4,"ngIf"],[1,"impact-margin",3,"viewModel"],[1,"select"],["localize","MetricsScorecard_Import_Dialog_Description",1,"description"],[1,"select-table",3,"change"],["class","table-select",3,"value",4,"ngFor","ngForOf"],[1,"table-select",3,"value"],[1,"scroll"],["id","preview-table"],[4,"ngFor","ngForOf"],[1,"table-headers"],["id","left"],[1,"col-headers",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"right"],[3,"value"],[1,"pbi-spinner-large"],[1,"import"],[1,"dialog-buttons"],["localize","Import","localizeTooltip","Import",1,"pbi-fluent-button","primary",3,"click"],["localize","PBI_Button_Label_Cancel","localizeTooltip","PBI_Button_Label_Cancel",1,"pbi-fluent-button",3,"click"],["class","num-goals","localize","MetricsScorecard_Import_Dialog_Number_Metrics",4,"ngIf"],["class","number",4,"ngIf"],["localize","MetricsScorecard_Import_Dialog_Number_Metrics",1,"num-goals"],[1,"number"]],template:function(t,i){1&t&&(e.\u0275\u0275elementStart(0,"section",0),e.\u0275\u0275element(1,"h1",1)(2,"div",2),e.\u0275\u0275elementStart(3,"button",3),e.\u0275\u0275listener("click",function(){return i.close()}),e.\u0275\u0275pipe(4,"localize"),e.\u0275\u0275element(5,"mat-icon",4),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(6,of,1,1,"message-banner",5),e.\u0275\u0275template(7,rf,1,1,"message-banner",5),e.\u0275\u0275elementStart(8,"div"),e.\u0275\u0275template(9,lf,4,1,"div",6),e.\u0275\u0275template(10,pf,5,3,"div",7),e.\u0275\u0275template(11,gf,1,0,"pbi-spinner",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(12,mf,6,2,"section",9)),2&t&&(e.\u0275\u0275advance(3),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(4,7,"Close")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",i.exceedsColumns),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.emptyFile),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",(null==i.goalPreviewData?null:i.goalPreviewData.length)>0),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.hasDataLoaded),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!i.hasDataLoaded&&!i.emptyFile),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(null==i.goalPreviewData?null:i.goalPreviewData.length)>0))},dependencies:[U.NgForOf,U.NgIf,_o.uh,se.YN,se.Kr,se.EJ,se.JJ,se.On,jt.X,Wn.r,Ut.Hw,mn.A,so.k,xt.F],styles:[".header[_ngcontent-%COMP%]{flex:0 0 50px;display:flex;flex-direction:row;align-items:center}.header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{flex:1 1 auto}.header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:none;margin:0;background-color:transparent;border:0;padding:0}.header[_ngcontent-%COMP%]   button.close[_ngcontent-%COMP%]{flex:0 0 20px;align-self:flex-start}.select-table[_ngcontent-%COMP%]{border-bottom:revert;width:10%;margin-left:10px;height:32px;cursor:pointer;padding:0 8px;border-width:1px}div.scroll[_ngcontent-%COMP%]{height:55vh;overflow-y:scroll}.description[_ngcontent-%COMP%]{display:inline}.select[_ngcontent-%COMP%]{padding-bottom:15px}#preview-table[_ngcontent-%COMP%]{padding-top:15px;border-collapse:collapse;width:100%}#preview-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], #preview-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #bebebe;padding:4px}#preview-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding-top:4px;padding-bottom:4px;font-size:12px;text-align:left;background-color:#ccc}.col-headers[_ngcontent-%COMP%]{border-color:transparent;background-color:transparent;border-bottom:black;font-size:14px;text-overflow:ellipsis}.table-headers[_ngcontent-%COMP%]{display:flex;padding-left:10px;padding-right:8px}.right[_ngcontent-%COMP%]{font-weight:400;text-align:center;padding-left:4vh}.pbi-fluent-button[_ngcontent-%COMP%]{margin-left:8px}.pbi-spinner-large[_ngcontent-%COMP%]{top:50%;left:50%;position:absolute}.loading-spinner[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;opacity:0;animation-name:fade-in;animation-duration:.5s;animation-iteration-count:1;animation-timing-function:linear;animation-delay:1s;animation-fill-mode:forwards}.import[_ngcontent-%COMP%]{flex:0 0 55px;display:flex;bottom:13%;flex-direction:inherit;align-items:flex-end;padding-right:1%;position:fixed;display:-webkit-inline-box}.number[_ngcontent-%COMP%]{padding-left:1%;display:contents}.num-goals[_ngcontent-%COMP%]{margin-left:25px}"]}),o}(),Cf=new e.InjectionToken("LinkedMetricsLauncherService"),fc=T(23558),_f=["inputFile"],yf=["columnTable"],bf=function(){return["Metric_Owner_No_Scorecard_Access","Metric_Owners_No_Scorecard_Access","Share_Now"]};function wf(o,n){if(1&o&&(e.\u0275\u0275element(0,"scorecard-access-banner",8),e.\u0275\u0275pipe(1,"async")),2&o){var t=e.\u0275\u0275nextContext(2).ngIf,i=e.\u0275\u0275nextContext();e.\u0275\u0275property("scorecard",t)("users",e.\u0275\u0275pipeBind1(1,3,i.goalOwners$))("labels",e.\u0275\u0275pureFunction0(5,bf))}}function Sf(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"label",18)(1,"input",19,20),e.\u0275\u0275listener("change",function(a){e.\u0275\u0275restoreView(t);var l=e.\u0275\u0275nextContext(5);return e.\u0275\u0275resetView(l.onImportClick(a))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"span",21),e.\u0275\u0275elementEnd()}}function Mf(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"button",12),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var l=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(l.onNewGoalClick())}),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275element(3,"mat-icon",13)(4,"span",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"button",15),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var l=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(l.onNewSubGoalClick())}),e.\u0275\u0275pipe(6,"localize"),e.\u0275\u0275pipe(7,"async"),e.\u0275\u0275element(8,"span",16),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(9,Sf,4,0,"label",17),e.\u0275\u0275elementContainerEnd()}if(2&o){var i=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(1),e.\u0275\u0275classProp("primary",!i.toolbarNewLook),e.\u0275\u0275property("disabled",!i.scorecardCapabilities.createGoal.enabled),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(2,7,"NewMetric")),e.\u0275\u0275advance(4),e.\u0275\u0275property("disabled",!i.scorecardCapabilities.createGoal.enabled||1!==e.\u0275\u0275pipeBind1(7,11,i.numberOfSelectedGoals$)),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(6,9,"AddSubmetric")),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",i.showImportButton)}}var Pf=function(n){return{active:n}};function xf(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"button",32,33),e.\u0275\u0275element(2,"mat-icon",34)(3,"span",35)(4,"mat-icon",36),e.\u0275\u0275elementEnd()),2&o){var t=e.\u0275\u0275reference(1);e.\u0275\u0275nextContext();var i=e.\u0275\u0275reference(4),a=e.\u0275\u0275nextContext(4);e.\u0275\u0275property("matMenuTriggerFor",i)("ngClass",e.\u0275\u0275pureFunction1(5,Pf,!0===t.menuOpen)),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("fontIcon","List"===a.viewType?"pbi-glyph-list":"pbi-glyph-table"),e.\u0275\u0275advance(1),e.\u0275\u0275property("localize","View")("localizeTooltip","View")}}function Of(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",37),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var a=e.\u0275\u0275nextContext(5);return e.\u0275\u0275resetView(a.openHeatmapConfigurationPane())}),e.\u0275\u0275pipe(1,"localize"),e.\u0275\u0275element(2,"mat-icon",38)(3,"span",39),e.\u0275\u0275elementEnd()}2&o&&e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(1,1,"MetricsCustomizeHeatmap"))}function Tf(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",40),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var a=e.\u0275\u0275nextContext(5);return e.\u0275\u0275resetView(a.openHierarchiesBuilder())}),e.\u0275\u0275pipe(1,"localize"),e.\u0275\u0275element(2,"mat-icon",41)(3,"span",42),e.\u0275\u0275elementEnd()}2&o&&e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(1,1,"MetricsManageHierarchies"))}function Ef(o,n){1&o&&e.\u0275\u0275element(0,"scorecard-hierarchy-button")}function kf(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,xf,5,7,"button",22),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementStart(3,"mat-menu",23,24)(5,"button",25),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var l=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(l.onScorecardViewClick())}),e.\u0275\u0275element(6,"mat-icon",26)(7,"span",27),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"button",25),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var l=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(l.onHeatmapViewClick())}),e.\u0275\u0275element(9,"mat-icon",28)(10,"span",29),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(11,Of,4,3,"button",30),e.\u0275\u0275template(12,Tf,4,3,"button",31),e.\u0275\u0275template(13,Ef,1,0,"scorecard-hierarchy-button",7),e.\u0275\u0275elementContainerEnd()}if(2&o){var i=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(2,5,i.hasHierarchies$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("overlapTrigger",!1),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf","Heatmap"===i.viewType),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.isEditMode&&"Heatmap"===i.viewType),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","List"===i.viewType)}}function Df(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",9)(1,"div",10),e.\u0275\u0275template(2,Mf,10,13,"ng-container",7),e.\u0275\u0275element(3,"div",11),e.\u0275\u0275template(4,kf,14,7,"ng-container",7),e.\u0275\u0275elementEnd()()),2&o){var t=e.\u0275\u0275nextContext(3);e.\u0275\u0275classProp("new-look",t.toolbarNewLook),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",("List"===t.viewType||"Compact"===t.viewType)&&t.isEditMode),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.showHierarchies)}}function If(o,n){if(1&o&&e.\u0275\u0275element(0,"scorecard-title",43),2&o){var t=e.\u0275\u0275nextContext(2).ngIf,i=e.\u0275\u0275nextContext();e.\u0275\u0275property("scorecardName",t.name)("scorecardDescription",t.description)("isTitleEditable",i.isTitleEditable)}}function Ff(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"scorecard-metric-picker-toolbar",50),e.\u0275\u0275listener("filterBy",function(l){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext(5);return e.\u0275\u0275resetView(c.onFilterKeywordChange(l))}),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275elementEnd()}if(2&o){var i=e.\u0275\u0275nextContext(5);e.\u0275\u0275property("filterText",e.\u0275\u0275pipeBind1(1,1,i.filterBy$).keyword)}}function Gf(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"scorecard-list-toolbar",51),e.\u0275\u0275listener("filterBy",function(c){e.\u0275\u0275restoreView(t);var u=e.\u0275\u0275nextContext(5);return e.\u0275\u0275resetView(u.onFilterKeywordChange(c))})("onNewGoal",function(){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext(5);return e.\u0275\u0275resetView(c.onNewGoalClick(!1))})("onNewSubGoal",function(){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext(5);return e.\u0275\u0275resetView(c.onNewSubGoalClick())})("onLinkedMetricInit",function(){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext(5);return e.\u0275\u0275resetView(c.onLinkedMetricInit())}),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementEnd()}if(2&o){var i=e.\u0275\u0275nextContext(4).ngIf,a=e.\u0275\u0275nextContext();e.\u0275\u0275property("isEditMode",a.isEditMode)("scorecard",i)("scorecardCapabilities",a.scorecardCapabilities)("numberOfSelectedGoals",e.\u0275\u0275pipeBind1(1,6,a.numberOfSelectedGoals$))("filterText",e.\u0275\u0275pipeBind1(2,8,a.filterBy$).keyword)("showTitle","Compact"===a.viewType)}}function Vf(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Ff,2,3,"scorecard-metric-picker-toolbar",48),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275template(3,Gf,3,10,"ng-template",null,49,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementContainerEnd()),2&o){var t=e.\u0275\u0275reference(4),i=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(2,2,i.showPickerToolbar$))("ngIfElse",t)}}function Rf(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"scorecard-status-tiles",52),e.\u0275\u0275listener("onStatusSelected",function(c){e.\u0275\u0275restoreView(t);var u=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(u.onGoalsStatusTileSelectionChange(c))}),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementEnd()}if(2&o){var i=e.\u0275\u0275nextContext(3).ngIf,a=e.\u0275\u0275nextContext();e.\u0275\u0275property("goals",i.goals)("goalStatusesByScorecardId",e.\u0275\u0275pipeBind1(1,4,a.goalStatusesByScorecardId$))("goalStatusList",null==i.goalStatuses?null:i.goalStatuses.statuses)("selectedStatuses",e.\u0275\u0275pipeBind1(2,6,a.filterBy$).statuses)}}function Af(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",53)(1,"div"),e.\u0275\u0275element(2,"mat-icon",54),e.\u0275\u0275elementStart(3,"input",55),e.\u0275\u0275listener("ngModelChange",function(l){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(c.onFilterKeywordChange(l))}),e.\u0275\u0275pipe(4,"localize"),e.\u0275\u0275pipe(5,"localize"),e.\u0275\u0275pipe(6,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"mat-icon",56),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var l=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(l.toggleFilterRow())}),e.\u0275\u0275elementEnd()()()}if(2&o){var i=e.\u0275\u0275nextContext(4);e.\u0275\u0275classProp("toolbar-visible",i.isEditMode),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngModel",e.\u0275\u0275pipeBind1(6,9,i.filterBy$).keyword),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(4,5,"Filter_By_Keyword"))("placeholder",e.\u0275\u0275pipeBind1(5,7,"Filter_By_Keyword"))}}function Lf(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",63),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275elementStart(2,"pbi-checkbox",64),e.\u0275\u0275listener("onChange",function(l){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext(6);return e.\u0275\u0275resetView(c.onSelectAllGoals(l))}),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275pipe(4,"localize"),e.\u0275\u0275pipe(5,"localize"),e.\u0275\u0275elementEnd()()}if(2&o){var i=e.\u0275\u0275nextContext(6);e.\u0275\u0275classProp("box-checked",e.\u0275\u0275pipeBind1(1,5,i.allGoalsSelected$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("checked",e.\u0275\u0275pipeBind1(3,7,i.allGoalsSelected$))("pbiTooltip",e.\u0275\u0275pipeBind1(5,11,"Metrics_BulkEditing_SelectAllMetrics")),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(4,9,"Metrics_BulkEditing_SelectAllMetrics"))}}function Nf(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",73),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var l=e.\u0275\u0275nextContext(9);return e.\u0275\u0275resetView(l.onToggleExpandAllMetrics())}),e.\u0275\u0275pipe(1,"localize"),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275element(3,"mat-icon",74),e.\u0275\u0275pipe(4,"async"),e.\u0275\u0275elementEnd()}if(2&o){var i=e.\u0275\u0275nextContext(9);e.\u0275\u0275property("pbiTooltip",e.\u0275\u0275pipeBind1(1,2,e.\u0275\u0275pipeBind1(2,4,i.showAllChildren$)?"FieldListMenuItem_CollapseAll":"FieldListMenuItem_ExpandAll")),e.\u0275\u0275advance(3),e.\u0275\u0275property("fontIcon",e.\u0275\u0275pipeBind1(4,6,i.showAllChildren$)?"pbi-glyph-doublechevrondown":"pbi-glyph-doublechevronright")}}function zf(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",75),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);var l=e.\u0275\u0275nextContext(9);return e.\u0275\u0275resetView(l.toggleFilterRow())}),e.\u0275\u0275pipe(1,"localize"),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275pipe(3,"localize"),e.\u0275\u0275pipe(4,"async"),e.\u0275\u0275element(5,"mat-icon",76),e.\u0275\u0275elementEnd()}if(2&o){var i=e.\u0275\u0275nextContext(9);e.\u0275\u0275property("pbiTooltip",e.\u0275\u0275pipeBind1(3,6,e.\u0275\u0275pipeBind1(4,8,i.filterRowVisible$)?"Filters_Hide":"Filters_Show")),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(1,2,e.\u0275\u0275pipeBind1(2,4,i.filterRowVisible$)?"Filters_Hide":"Filters_Show"))}}function Hf(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"th",67)(1,"div",68),e.\u0275\u0275template(2,Nf,5,8,"button",69),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275template(4,zf,6,10,"button",70),e.\u0275\u0275elementStart(5,"div",71)(6,"scorecard-column-header",72),e.\u0275\u0275listener("onSortColumn",function(p){e.\u0275\u0275restoreView(t);var y=e.\u0275\u0275nextContext(8);return e.\u0275\u0275resetView(y.sortColumn(p))}),e.\u0275\u0275pipe(7,"async"),e.\u0275\u0275elementEnd()()()()}if(2&o){var i=e.\u0275\u0275nextContext(2),a=i.$implicit,l=i.index,c=e.\u0275\u0275nextContext(6);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",c.collapseGoalsByDefault&&e.\u0275\u0275pipeBind1(3,6,c.hasExpandableGoals$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!c.goalsNewHeaderEnabled),e.\u0275\u0275advance(2),e.\u0275\u0275property("column",c.ScorecardColumnConfigs[a.columnId])("index",l)("sort",e.\u0275\u0275pipeBind1(7,8,c.sort$))("isEditMode",c.isEditMode)}}function Bf(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"th",78)(1,"scorecard-column-header",72),e.\u0275\u0275listener("onSortColumn",function(p){e.\u0275\u0275restoreView(t);var y=e.\u0275\u0275nextContext(9);return e.\u0275\u0275resetView(y.sortColumn(p))}),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementEnd()()}if(2&o){var i=e.\u0275\u0275nextContext(3),a=i.$implicit,l=i.index,c=e.\u0275\u0275nextContext(6);e.\u0275\u0275advance(1),e.\u0275\u0275property("column",c.ScorecardColumnConfigs[a.columnId])("index",l)("sort",e.\u0275\u0275pipeBind1(2,4,c.sort$))("isEditMode",c.isEditMode)}}function Uf(o,n){if(1&o&&e.\u0275\u0275template(0,Bf,3,6,"th",77),2&o){var t=e.\u0275\u0275nextContext(2).$implicit,i=e.\u0275\u0275nextContext(6);e.\u0275\u0275property("ngIf",!i.ScorecardColumnConfigs[t.columnId].hideHeaderInListView)}}function jf(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Hf,8,10,"th",65),e.\u0275\u0275template(2,Uf,1,1,"ng-template",null,66,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementContainerEnd()),2&o){var t=e.\u0275\u0275reference(3),i=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0==i.columnId)("ngIfElse",t)}}function Wf(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,jf,4,2,"ng-container",7),e.\u0275\u0275elementContainerEnd()),2&o){var t=n.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.show)}}function $f(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"thead")(1,"tr",60)(2,"th",61),e.\u0275\u0275template(3,Lf,6,13,"div",62),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,Wf,2,1,"ng-container",59),e.\u0275\u0275elementEnd()()),2&o){var t=e.\u0275\u0275nextContext(5);e.\u0275\u0275advance(2),e.\u0275\u0275classProp("show-checkmark",!!t.scorecardSelectionMode)("show-on-hover-only","ctrl"===t.scorecardSelectionMode),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","single"!==t.scorecardSelectionMode),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t.columnSettings)("ngForTrackBy",t.columnSettingId)}}function Qf(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tbody",80),e.\u0275\u0275listener("showChildrenChange",function(y){e.\u0275\u0275restoreView(t);var P=e.\u0275\u0275nextContext(6);return e.\u0275\u0275resetView(P.onShowChildrenChange(y))})("dragStarted",function(y){e.\u0275\u0275restoreView(t);var P=e.\u0275\u0275nextContext(6);return e.\u0275\u0275resetView(P.onGoalDragStart(y))})("dragMoved",function(y){e.\u0275\u0275restoreView(t);var P=e.\u0275\u0275nextContext(6);return e.\u0275\u0275resetView(P.onGoalDragMove(y))}),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275elementEnd()}if(2&o){var i=e.\u0275\u0275nextContext(),a=i.$implicit,l=i.index,c=e.\u0275\u0275nextContext(4).ngIf,u=e.\u0275\u0275nextContext();e.\u0275\u0275property("scorecard",c)("columnSettings",u.columnSettings)("goal",a)("color",u.colorPalette[l%u.colorPalette.length])("showChildren",e.\u0275\u0275pipeBind1(1,8,u.showChildren$))("goalDragInfo",u.goalDragInfo)("scorecardSelectionMode",u.scorecardSelectionMode)("forceColumnMinWidths",u.forceColumnMinWidths)}}function Jf(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Qf,2,10,"tbody",79),e.\u0275\u0275elementContainerEnd()),2&o){var t=n.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.isHidden)}}function Xf(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"table",57,58),e.\u0275\u0275listener("cdkDropListDropped",function(l){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(c.onDropGoal(l))})("cdkDropListSorted",function(l){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(c.onGoalDropListSorted(l))}),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275template(3,$f,5,7,"thead",7),e.\u0275\u0275pipe(4,"async"),e.\u0275\u0275template(5,Jf,2,1,"ng-container",59),e.\u0275\u0275pipe(6,"async"),e.\u0275\u0275elementEnd()}if(2&o){var i=e.\u0275\u0275nextContext(4);e.\u0275\u0275styleProp("padding-left",i.scorecardTablePadding.left,"px")("padding-right",i.scorecardTablePadding.right,"px"),e.\u0275\u0275property("cdkDropListDisabled",!e.\u0275\u0275pipeBind1(2,8,i.canDragAndDrop$)),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(4,10,i.showHeaders$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(6,12,i.goals$))("ngForTrackBy",i.goalId)}}function qf(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"compact-scorecard",81),e.\u0275\u0275listener("onSortColumn",function(c){e.\u0275\u0275restoreView(t);var u=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(u.sortColumn(c))}),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275elementEnd()}if(2&o){var i=e.\u0275\u0275nextContext(3).ngIf,a=e.\u0275\u0275nextContext();e.\u0275\u0275property("scorecard",i)("isEditMode",a.isEditMode)("viewSettings",a.viewSettings)("sort",e.\u0275\u0275pipeBind1(1,4,a.sort$))}}function Zf(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Vf,5,4,"ng-container",7),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275template(4,Rf,3,8,"scorecard-status-tiles",44),e.\u0275\u0275pipe(5,"async"),e.\u0275\u0275pipe(6,"async"),e.\u0275\u0275pipe(7,"async"),e.\u0275\u0275template(8,Af,8,11,"div",45),e.\u0275\u0275pipe(9,"async"),e.\u0275\u0275template(10,Xf,7,14,"table",46),e.\u0275\u0275template(11,qf,2,6,"compact-scorecard",47),e.\u0275\u0275elementContainerEnd()),2&o){var t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.goalsNewHeaderEnabled&&!(e.\u0275\u0275pipeBind1(2,5,t.hideToolbar$)||e.\u0275\u0275pipeBind1(3,7,t.hideHeader$))),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",t.goalsNewHeaderEnabled&&e.\u0275\u0275pipeBind1(5,9,t.showStatus$)&&!(e.\u0275\u0275pipeBind1(6,11,t.hideCards$)||e.\u0275\u0275pipeBind1(7,13,t.hideHeader$))),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(9,15,t.filterRowVisible$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf","List"===t.viewType),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Compact"===t.viewType)}}function Yf(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"scorecard-heatmap-toolbar",50),e.\u0275\u0275listener("filterBy",function(l){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(c.onFilterKeywordChange(l))}),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275elementEnd()}if(2&o){var i=e.\u0275\u0275nextContext(4);e.\u0275\u0275property("filterText",e.\u0275\u0275pipeBind1(1,1,i.filterBy$).keyword)}}function Kf(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Yf,2,3,"scorecard-heatmap-toolbar",82),e.\u0275\u0275element(2,"heat-map",83),e.\u0275\u0275elementContainerEnd()),2&o){var t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.goalsNewHeaderEnabled)}}function em(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"scorecard-list-toolbar",84),e.\u0275\u0275listener("filterBy",function(c){e.\u0275\u0275restoreView(t);var u=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(u.onFilterKeywordChange(c))})("onNewGoal",function(){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(c.onNewGoalClick(!1))})("onNewSubGoal",function(){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(c.onNewSubGoalClick())})("onLinkedMetricInit",function(){e.\u0275\u0275restoreView(t);var c=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(c.onLinkedMetricInit())}),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"scorecard-board-view",85),e.\u0275\u0275elementContainerEnd()}if(2&o){var i=e.\u0275\u0275nextContext(2).ngIf,a=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("isEditMode",a.isEditMode)("scorecardCapabilities",a.scorecardCapabilities)("numberOfSelectedGoals",e.\u0275\u0275pipeBind1(2,6,a.numberOfSelectedGoals$))("filterText",e.\u0275\u0275pipeBind1(3,8,a.filterBy$).keyword),e.\u0275\u0275advance(3),e.\u0275\u0275property("boardSettings",a.boardSettings)("metricsGoalStatuses",null==i.goalStatuses?null:i.goalStatuses.statuses)}}function tm(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",3),e.\u0275\u0275listener("on-resize",function(){e.\u0275\u0275restoreView(t);var l=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(l.setVisibleColumns())}),e.\u0275\u0275template(2,wf,2,6,"scorecard-access-banner",4),e.\u0275\u0275template(3,Df,5,4,"div",5),e.\u0275\u0275pipe(4,"async"),e.\u0275\u0275pipe(5,"async"),e.\u0275\u0275template(6,If,1,3,"scorecard-title",6),e.\u0275\u0275pipe(7,"async"),e.\u0275\u0275pipe(8,"async"),e.\u0275\u0275template(9,Zf,12,17,"ng-container",7),e.\u0275\u0275template(10,Kf,3,1,"ng-container",7),e.\u0275\u0275template(11,em,5,10,"ng-container",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&o){var i=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275styleProp("overflow-x",null!=i.viewSettings&&i.viewSettings.dropColumns?"hidden":"auto"),e.\u0275\u0275classProp("heat-map-scroll","Heatmap"===i.viewType)("new-header",i.goalsNewHeaderEnabled)("compact","Compact"===i.viewType),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.showScorecardAccessBanner&&i.isEditMode),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!i.goalsNewHeaderEnabled&&(i.isEditMode||i.toolbarNewLook)&&!(e.\u0275\u0275pipeBind1(4,14,i.hideToolbar$)||e.\u0275\u0275pipeBind1(5,16,i.hideHeader$))),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",i.goalsNewHeaderEnabled&&!(e.\u0275\u0275pipeBind1(7,18,i.hideTitle$)||e.\u0275\u0275pipeBind1(8,20,i.hideHeader$))&&"Compact"!==i.viewType),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf","List"===i.viewType||"Compact"===i.viewType),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Heatmap"===i.viewType),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Board"===i.viewType)}}function nm(o,n){if(1&o){var t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"empty-scorecard",86),e.\u0275\u0275listener("onNewGoal",function(){e.\u0275\u0275restoreView(t);var l=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(l.onNewGoalClick(!0))})("onLinkToGoal",function(){e.\u0275\u0275restoreView(t);var l=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(l.onLinkedMetricInit())}),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementEnd()}if(2&o){var i=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("isMetricsPicker",e.\u0275\u0275pipeBind1(1,2,i.showPickerToolbar$))("canEdit",i.isEditMode&&e.\u0275\u0275pipeBind1(2,4,i.userHasEditPermissions$))}}function im(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,tm,12,22,"ng-container",0),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275template(3,nm,3,6,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementContainerEnd()),2&o){var t=e.\u0275\u0275reference(4),i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(2,2,i.hasGoals$))("ngIfElse",t)}}function om(o,n){1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275element(1,"span",89),e.\u0275\u0275elementContainerEnd())}function rm(o,n){1&o&&e.\u0275\u0275element(0,"span",90)}function am(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",87),e.\u0275\u0275template(1,om,2,0,"ng-container",0),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275template(3,rm,1,0,"ng-template",null,88,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&o){var t=e.\u0275\u0275reference(4),i=e.\u0275\u0275nextContext();e.\u0275\u0275classProp("border-top",i.toolbarNewLook),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null===e.\u0275\u0275pipeBind1(2,4,i.scorecard$))("ngIfElse",t)}}var iu=function(){function o(n,t,i,a,l,c,u,p,y,P,x,N,W,te,me,Oe){var ve=this;this.scorecardService=n,this.heatmapService=t,this.detailsPaneLauncher=i,this.hierarchyPane=a,this.changeDetectorRef=l,this.featureSwitchService=c,this.goalsTutorialService=u,this.hierarchyService=p,this.capabilityService=y,this.expansionService=P,this.scorecardElement=x,this.linkedMetricsLauncher=N,this.dialogService=W,this.viewsService=te,this.scorecardSettings=me,this.scorecardHost=Oe,this.colorPalette=pe.gT.ColorPalette,this.viewType="List",this.sort$=new Me.X((0,S.pi)({},pe.Ij)),this.filterRowVisible$=new Me.X(!1),this.filterBy$=new Me.X({}),this.onDestroy$=new qn.t(1),this.boardSettings={showGoalVisualGoalName:!0,showGoalVisualOwner:!0,showGoalVisualGrowth:!0,showGoalVisualScorecardName:!0,showVisualization:!0},this.goalDragInfo={},this.ScorecardColumnConfigs=pe.Ml,this.forceColumnMinWidths=!1,this.scorecardTablePadding=pe.gT.ScorecardTablePadding,this.sortColumn=function(Re){return ve.sort$.next(Re)},this.isExcelFile=!1}return o.prototype.goalId=function(n,t){return t.id},o.prototype.columnSettingId=function(n,t){return t.columnId},o.prototype.ngOnInit=function(){var t,i,a,l,c,u,p,y,P,x,N,W,te,me,Oe,ve,n=this;M.fF.assertValue(this.scorecardDetails$,"Scorecard details should be set at initialization time"),this.showImportButton=!!this.featureSwitchService.featureSwitches.goalsShowImportFromFileUI&&!!this.dialogService,this.showColumnSettingsMenu=!!this.featureSwitchService.featureSwitches.goalsColumnSettings,this.showHierarchies=!!this.featureSwitchService.featureSwitches.goalsHierarchies,this.toolbarNewLook=!!this.featureSwitchService.featureSwitches.goalsHierarchies,this.showScorecardAccessBanner=!!this.featureSwitchService.featureSwitches.goalsScorecardAccessBanner,this.bulkDeleteEnabled=!!this.featureSwitchService.featureSwitches.goalsBulkDelete,this.goalsNewHeaderEnabled=this.featureSwitchService.featureSwitches.goalsNewHeader,this.isTitleEditable=this.featureSwitchService.featureSwitches.goalsSkipScorecardCreationPane,this.collapseGoalsByDefault=!!this.featureSwitchService.featureSwitches.collapseGoalsByDefault,this.scorecard$=this.scorecardDetails$.pipe((0,V.x)(function(H,le){return!le.reload&&_.isEqual(H,le)}),(0,Kt.w)(function(H){if(!H)return(0,re.of)(void 0);if(!(H.groupId&&H.scorecardId||H.prefetchedScorecard))return(0,re.of)(null);var le;if(H.prefetchedScorecard)le=n.scorecardService.loadPrefetchedScorecard(H.prefetchedScorecard);else{var ce=n.showHierarchies?function(o){if(!_.isEmpty(o)){for(var t=[],i=0,a=_.split(o,";");i<a.length;i++){var l=a[i];if(!l.includes(":"))return;var c=_.split(l,":"),u=c[0],y=_.map(_.split(c[1],","),function(P){return decodeURIComponent(P)});t.push({hierarchyId:u,levels:y})}return _.isEmpty(t)?void 0:t}}(H.initialHierarchyPath):void 0;le=n.scorecardService.loadScorecard(H.groupId,H.scorecardId,!0,ce)}return H.reload?le:le.pipe((0,bt.g)(0),(0,Si.O)(void 0))}),(0,Fn.d)(1)),(0,_n.aj)([this.scorecardDetails$,this.scorecard$]).pipe((0,be.R)(this.onDestroy$)).subscribe(function(H){var le=H[0],ce=H[1];if(le&&le.onScorecardUpdated&&ce){var Qe=_.filter(ce.goals,function(Nt){return!Nt.isNew}),_t=X.flattenGoals(Qe);le.onScorecardUpdated((0,S.pi)((0,S.pi)({},ce),{goals:_t}))}}),(0,_n.aj)([this.scorecardDetails$,this.scorecard$]).pipe((0,V.x)(function(H,le){var ce=H[0],Qe=H[1],_t=le[0],Nt=le[1];return Qe?.id===Nt?.id&&ce?.initialSelectedGoalId===_t?.initialSelectedGoalId})).pipe((0,be.R)(this.onDestroy$)).subscribe(function(H){var le=H[0],ce=H[1];!_.isNil(le?.initialSelectedGoalId)&&!_.isNil(ce)&&n.detailsPaneLauncher.openGoalDetails(n.scorecardService,le?.initialSelectedGoalId,uo.Default)}),(0,_n.aj)([this.scorecardDetails$,this.scorecardService.isLoading()]).pipe((0,be.R)(this.onDestroy$),(0,Rt.h)(function(H){var le=H[0];return!!le?.onLoading})).subscribe(function(H){return H[0].onLoading(H[1])}),this.hasGoals$=this.scorecard$.pipe((0,xe.U)(function(H){var le;return(null===(le=H?.goals)||void 0===le?void 0:le.length)>0})),this.goals$=this.scorecard$.pipe((0,xe.U)(function(H){return H?.goals})),this.hasSavedGoals$=this.goals$.pipe((0,xe.U)(function(H){var le;return(null===(le=H?.filter(function(ce){return!ce?.isNew}))||void 0===le?void 0:le.length)>0})),null===(i=null===(t=this.scorecardSettings)||void 0===t?void 0:t.settings)||void 0===i||i.pipe().subscribe(function(H){n.boardSettings=H}),this.columnSettings$=this.scorecard$.pipe((0,V.x)(function(H,le){return _.isEqual(H?.columnSettings,le?.columnSettings)}),(0,xe.U)(function(H){return H?.columnSettings})),this.showStatus$=this.columnSettings$.pipe((0,xe.U)(function(H){return K.isColumnVisible(H,2)})),this.userHasEditPermissions$=this.scorecard$.pipe((0,xe.U)(function(H){return(0,ti.yE)(Ze(H?.permissions),2)}));var Re=this.scorecardDetails$.pipe((0,Rt.h)(function(H){return!!H?.settings$}),(0,Kt.w)(function(H){return H?.settings$}),(0,Si.O)(void 0));this.showHeaders$=(0,_n.aj)([this.scorecard$,Re]).pipe((0,xe.U)(function(H){var le=H[0],ce=H[1];return!ce?.hideColumnHeaders&&_.some(le?.goals,function(Qe){return null==Qe.state||"Consumption"===Qe.state})}));var Xe=this.scorecardService.isEditMode();Xe.pipe((0,be.R)(this.onDestroy$)).subscribe(function(H){n.isEditMode=H,n.changeDetectorRef.markForCheck()}),this.scorecardDetails$.pipe((0,Kt.w)(function(H){var le;return null!==(le=H?.isEditMode$)&&void 0!==le?le:(0,re.of)(!1)}),(0,be.R)(this.onDestroy$)).subscribe(function(H){return n.scorecardService.setEditMode(H)}),this.scorecardDetails$.pipe((0,Rt.h)(function(H){return!!H?.refresh$}),(0,Kt.w)(function(H){return H?.refresh$}),(0,fc.M)(this.scorecard$.pipe((0,Rt.h)(function(H){return!!H}))),(0,be.R)(this.onDestroy$)).subscribe(function(H){var ce=H[1];"Heatmap"===n.scorecardService.viewType?n.heatmapService.refreshAll():n.heatmapService.clearCache(),n.hierarchyService.loadHierarchies(ce.groupId,ce.id,!1),n.scorecardService.loadScorecard(ce.groupId,ce.id,!1,ce.hierarchyPaths)}),this.scorecardDetails$.pipe((0,Rt.h)(function(H){return!!H?.bulkEditingClearSelection$}),(0,Kt.w)(function(H){return H?.bulkEditingClearSelection$}),(0,be.R)(this.onDestroy$)).subscribe(function(){return n.scorecardService.unselectAllGoals()}),this.scorecardDetails$.pipe((0,Rt.h)(function(H){return!!H?.bulkEditingDelete$}),(0,Kt.w)(function(H){return H?.bulkEditingDelete$}),(0,be.R)(this.onDestroy$)).subscribe(function(){return n.scorecardService.bulkDeleteGoalsPrompt()}),this.scorecardDetails$.pipe((0,Rt.h)(function(H){return!!H?.bulkEditingUpdate$}),(0,Kt.w)(function(H){return H?.bulkEditingUpdate$}),(0,be.R)(this.onDestroy$)).subscribe(function(){return n.openBulkUpdatePane()}),this.selectedGoalIds$=this.scorecardService.getSelectedGoalIdsObservable(),this.numberOfSelectedGoals$=this.selectedGoalIds$.pipe((0,xe.U)(function(H){return _.isNil(H)?0:Object.keys(H).length})),this.numberOfSelectedGoals$.pipe((0,fc.M)(this.scorecardDetails$),(0,V.x)(function(H,le){return H[0]===le[0]})).subscribe(function(H){var le=H[0],ce=H[1];_.isFunction(ce?.onNumberOfSelectedGoalsChange)&&!_.isNil(le)&&ce.onNumberOfSelectedGoalsChange(le)});var ot=this.goals$.pipe((0,xe.U)(function(H){return X.flattenGoals(H)}));this.allGoalsSelected$=(0,_n.aj)([ot,this.selectedGoalIds$]).pipe((0,V.x)(function(H,le){var Nt=le[1];return H[0].length===le[0].length&&Object.keys(H[1]).length===Object.keys(Nt).length}),(0,xe.U)(function(H){var ce=H[1];return _.filter(H[0],function(_t){return!_t.isNew&&(!n.scorecardHost||n.scorecardHost.canSelectGoal(_t).enabled)}).length===Object.keys(ce).length})),this.scorecard$.pipe((0,ar.o)(function(H){return _.isNil(H)},!0)).subscribe(function(H){var le;!_.isNil(H)&&(_.isNil(H?.goals)||0===(null===(le=H?.goals)||void 0===le?void 0:le.length))&&n.scorecardService.userHasWritePermissions()&&n.onNewGoalClick(!0)});var Dt=this.scorecardService.isLoading(),ct=this.scorecardService.isEditing();this.showChildren$=this.expansionService.expansionMap$,this.showAllChildren$=this.expansionService.showAllExpanded$,this.hasExpandableGoals$=this.expansionService.hasExpandableGoals$;var mt=this.capabilityService.getScorecardCapabilities();mt.pipe((0,be.R)(this.onDestroy$)).subscribe(function(H){n.scorecardCapabilities=H,n.changeDetectorRef.markForCheck()}),this.canDragAndDrop$=(0,_n.aj)([Xe,this.filterBy$,this.sort$,Dt,ct,this.numberOfSelectedGoals$,mt]).pipe((0,xe.U)(function(H){var le,ce=(le=H)[0],Qe=le[1],_t=le[2],Nt=le[3],$s=le[4],Xl=le[5];return le[6].reorderGoal&&ce&&_.isEmpty(Qe.keyword)&&_.isEmpty(Qe.statuses)&&"Rank"===_t.sortBy&&!Nt&&!$s&&Xl<=1})),this.scorecardDetails$.pipe((0,Kt.w)(function(H){return H.filterBy$})).pipe((0,be.R)(this.onDestroy$)).subscribe(function(H){n.filterBy$.next(H)}),(0,_n.aj)([this.scorecardDetails$,this.filterBy$]).pipe((0,V.x)(function(H,le){var ce=H[1],Qe=le[1];return _.isEqual(ce?.keyword,Qe?.keyword)&&_.isEqual(ce?.statuses,Qe?.statuses)})).pipe((0,be.R)(this.onDestroy$)).subscribe(function(H){var le=H[0],ce=H[1];_.isFunction(le?.onFiltersUpdated)&&!_.isNil(ce)&&le.onFiltersUpdated(ce)}),(0,_n.aj)([this.sort$,this.filterBy$,this.filterRowVisible$,this.columnSettings$,this.scorecardService.viewType$]).pipe((0,be.R)(this.onDestroy$)).subscribe(function(H){var le=H[0],ce=H[1],Qe=H[2],_t=H[3],Nt=H[4];ce.matchStatus=K.isColumnVisible(_t,2),ce.matchOwner=K.isColumnVisible(_t,1),"Heatmap"===Nt?n.scorecardService.applySortAndFilter((0,S.pi)({},pe.Ij),n.goalsNewHeaderEnabled?{keyword:ce?.keyword}:{}):("List"===Nt||"Compact"===Nt)&&n.scorecardService.applySortAndFilter(le,n.goalsNewHeaderEnabled||Qe?ce:{statuses:ce?.statuses})}),this.goalOwners$=this.goals$.pipe((0,xe.U)(X.getGoalOwners)),this.scorecard$.pipe((0,Rt.h)(function(H){return!!H}),(0,V.x)(function(H,le){return H.id===le.id}),(0,be.R)(this.onDestroy$)).subscribe(function(H){n.hierarchyService.loadHierarchies(H.groupId,H.id)}),this.scorecardService.getActiveGoalId().pipe((0,be.R)(this.onDestroy$)).subscribe(function(H){_.isNil(H)?n.detailsPaneLauncher.closeGoalDetails():(n.detailsPaneLauncher.openGoalDetails(n.scorecardService,H,uo.Default),n.showChildrenForSelectedMetrics(H))}),this.goalStatusesByScorecardId$=this.scorecardService.goalStatusesByScorecardId$,this.hasHierarchies$=this.hierarchyService.hasHierarchies$,this.displayMode$=null===(l=null===(a=this.scorecardSettings)||void 0===a?void 0:a.settings)||void 0===l?void 0:l.pipe((0,xe.U)(function(H){return H?.displayMode})),this.hideHeader$=null===(u=null===(c=this.scorecardSettings)||void 0===c?void 0:c.settings)||void 0===u?void 0:u.pipe((0,xe.U)(function(H){return H?.hideScorecardHeader})),this.hideTitle$=null===(y=null===(p=this.scorecardSettings)||void 0===p?void 0:p.settings)||void 0===y?void 0:y.pipe((0,xe.U)(function(H){return H?.hideScorecardTitle})),this.hideToolbar$=null===(x=null===(P=this.scorecardSettings)||void 0===P?void 0:P.settings)||void 0===x?void 0:x.pipe((0,xe.U)(function(H){return H?.hideScorecardToolbar})),this.hideCards$=null===(W=null===(N=this.scorecardSettings)||void 0===N?void 0:N.settings)||void 0===W?void 0:W.pipe((0,xe.U)(function(H){return H?.hideGoalCards})),this.showPickerToolbar$=null===(me=null===(te=this.scorecardSettings)||void 0===te?void 0:te.settings)||void 0===me?void 0:me.pipe((0,xe.U)(function(H){return H?.showPickerToolbar})),this.scorecardService.scorecardSelectionMode$.pipe((0,be.R)(this.onDestroy$)).subscribe(function(H){return n.scorecardSelectionMode=H}),this.scorecardService.viewType$.pipe((0,be.R)(this.onDestroy$)).subscribe(function(H){return n.viewType=H}),null===(ve=null===(Oe=this.scorecardSettings)||void 0===Oe?void 0:Oe.settings)||void 0===ve||ve.pipe((0,ue.q)(1)).subscribe(function(H){var le,ce=null===(le=_.first(H.filters))||void 0===le?void 0:le.goalId;ce&&H.isEditingGoal&&n.scorecardService.setGoalState(ce,"Editing")}),this.columnSettings$.pipe((0,be.R)(this.onDestroy$)).subscribe(function(H){return n.columnSettings=H}),this.scorecard$.pipe((0,be.R)(this.onDestroy$)).subscribe(function(H){return n.visualScorecard=H}),this.featureSwitchService.featureSwitches.scorecardListViewSettings&&this.viewsService&&(this.viewsService.loadViews(!1),this.viewsService.getDefaultView("List").pipe((0,be.R)(this.onDestroy$)).subscribe(function(){n.viewSettings=n.viewsService.defaultListView?n.viewsService.defaultListView.listViewDetails:pe.lb,n.setVisibleColumns()}))},o.prototype.ngOnDestroy=function(){this.detailsPaneLauncher.closeGoalDetails(),this.onDestroy$.next(!0),this.onDestroy$.complete()},o.prototype.showChildrenForSelectedMetrics=function(n){var t=this.scorecardService.getCurrentScorecard(),i=X.getGoal(t?.goals,n);for(n=i.parentId;n&&null!=(i=X.getGoal(t?.goals,n));)this.expansionService.expandGoal(n),n=i.parentId},o.prototype.onShowChildrenChange=function(n){n.value?this.expansionService.expandGoal(n.id):this.expansionService.collapseGoal(n.id)},o.prototype.onToggleExpandAllMetrics=function(){this.expansionService.toggleExpandAll()},o.prototype.onNewGoalClick=function(n){this.scorecardService.setViewType("List"),this.scorecardService.addGoal(),n&&this.goalsTutorialService.startFirstGoalTutorial()},o.prototype.openHierarchiesBuilder=function(){return(0,S.mG)(this,void 0,void 0,function(){return(0,S.Jh)(this,function(n){switch(n.label){case 0:return[4,this.hierarchyPane.openHierarchiesBuilder("HeatmapHeader")];case 1:return n.sent(),[2]}})})},o.prototype.openHeatmapConfigurationPane=function(){this.hierarchyPane.showHeatmapConfigurationPane()},o.prototype.onScorecardViewClick=function(){this.scorecardService.setViewType("List")},o.prototype.onHeatmapViewClick=function(){this.scorecardService.setViewType("Heatmap")},o.prototype.onSelectAllGoals=function(){this.scorecardService.toggleSelectAllGoals()},o.prototype.openBulkUpdatePane=function(){var n=this;this.detailsPaneLauncher.openBulkEditingPane(this.scorecardService,function(t){return n.scorecardService.bulkUpdateGoals(t)})},o.prototype.onNewSubGoalClick=function(){if(1===this.scorecardService.numberOfSelectedGoals()){var n=this.scorecardService.getFirstSelectedGoalId();this.expansionService.expandGoal(n),this.scorecardService.addSubGoal(n)}},o.prototype.onImportClick=function(n){var t=this,i=n.target;if(this.isExcelFile=!!i.files[0].name.match(/(.xls|.xlsx)/),this.isExcelFile){var a=new FileReader;a.onload=function(l){var u=a.result.toString().replace(/^data:(.*,)?/,"");u.length%4>0&&(u+="=".repeat(4-u.length%4)),t.inputFile.nativeElement.value="",t.dialogService.open(vf,{width:"70%",height:"80%",data:{fileData:u,scorecard:t.visualScorecard}}).afterClosed().pipe((0,fc.M)(t.scorecard$)).subscribe(function(y){var x=y[1];t.scorecardService.loadScorecard(x.groupId,x.id)})},a.readAsDataURL(i.files[0])}},o.prototype.updateSorting=function(n,t){var i=Ke.toggleSort(n,t);this.sort$.next(i)},o.prototype.toggleFilterRow=function(){var n=!this.filterRowVisible$.value;this.filterRowVisible$.next(n),n||this.onFilterKeywordChange("")},o.prototype.onFilterKeywordChange=function(n){var t=(0,S.pi)((0,S.pi)({},this.filterBy$.value),{keyword:n});this.filterBy$.next(t)},o.prototype.onGoalsStatusTileSelectionChange=function(n){var t,i={keyword:null===(t=this.filterBy$.value)||void 0===t?void 0:t.keyword,statuses:n};this.filterBy$.next(i)},o.prototype.onGoalDragStart=function(n){var t=n.source.data.goal,i=n.source.data.level,a=n.source.dropContainer.getSortedItems(),l=a.findIndex(function(c){return c.data.goal.id===t.id});M.fF.assertValue(-1!==l,"Goal should exist in the drop list"),this.goalDragInfo=(0,b.ZP)(this.goalDragInfo,function(c){return c.sourceGoalId=t.id,c.rankOrderedPrevGoal=l>0?a[l-1].data:void 0,c.rankOrderedNextGoal=l<a.length-1?a[l+1].data:void 0,c.destParentGoalId=t.parentId,c.destGoalDropLevel=i,c}),this.changeDetectorRef.detectChanges()},o.prototype.onGoalDragMove=function(n){var t,i,a,l;if(this.goalDragInfo.rankOrderedPrevGoal||this.goalDragInfo.rankOrderedNextGoal){if(!this.goalDragInfo.rankOrderedPrevGoal)return void(this.goalDragInfo=(0,b.ZP)(this.goalDragInfo,function(ce){return ce.destParentGoalId=void 0,ce.destGoalDropLevel=0,ce}));var p,y,c=this.goalDragInfo.rankOrderedPrevGoal,u=c.level<pe.gT.MaxSubGoals;if(this.featureSwitchService.featureSwitches.goalsXAxisDragAndDrop){var x=n.source.getPlaceholderElement(),Dt=Array.from(x.querySelectorAll(".cell-indent")).map(function(_t){return _t.getBoundingClientRect().right});for(y=0;y<Dt.length&&Dt[y]<=n.pointerPosition.x;)y++;var Oe=null!==(l=null===(a=this.goalDragInfo.rankOrderedNextGoal)||void 0===a?void 0:a.level)&&void 0!==l?l:0,ct=c.level+(u?1:0);y=_.clamp(y,Oe,ct),p=ct}else{var N=(x=n.source.getPlaceholderElement()).getBoundingClientRect(),te=20+N.height,me=_.clamp(n.pointerPosition.y-(N.top-10),0,te-1),ve=(Oe=null!==(i=null===(t=this.goalDragInfo.rankOrderedNextGoal)||void 0===t?void 0:t.level)&&void 0!==i?i:0,c.level-Oe+1);u&&ve++;var Xe=Math.floor(me/(te/ve));y=(p=c.level+(u?1:0))-Xe}var H=this.scorecardService.getCurrentScorecard(),le=c.goal;for(u||(le=le.parentId?X.getGoal(H.goals,le.parentId):void 0);p>y;)le=le.parentId?X.getGoal(H.goals,le.parentId):void 0,p--;this.goalDragInfo=(0,b.ZP)(this.goalDragInfo,function(ce){return ce.destParentGoalId=le?.id,ce.destGoalDropLevel=y,ce})}},o.prototype.setVisibleColumns=function(){var n,t,i;if(this.columnSettings=this.visualScorecard.columnSettings,null!==(n=this.viewSettings)&&void 0!==n&&n.dropColumns){var a=(null===(t=this.scorecardElement)||void 0===t?void 0:t.nativeElement.offsetWidth)||0;((null===(i=this.columnTableElement)||void 0===i?void 0:i.nativeElement.offsetWidth)||0)>a&&(!1===this.forceColumnMinWidths&&(this.cutoffWidth=a),this.forceColumnMinWidths=!0);for(var c=pe.gT.ScorecardTablePadding.left+pe.gT.ScorecardTablePadding.right,u=0;u<this.visualScorecard.columnSettings.length;u++)if(this.visualScorecard.columnSettings[u].show&&(c+=pe.gT.ListViewCellMinWidths[this.visualScorecard.columnSettings[u].columnId]||0)>a){this.columnSettings=this.visualScorecard.columnSettings.slice(0,u||1);break}a>this.cutoffWidth&&(this.forceColumnMinWidths=!1)}else this.forceColumnMinWidths=!1;this.changeDetectorRef.markForCheck()},o.prototype.onGoalDropListSorted=function(n){return(0,S.mG)(this,void 0,void 0,function(){var t,i,a;return(0,S.Jh)(this,function(l){return M.fF.assertValue((t=n.item.data.goal.id)===this.goalDragInfo.sourceGoalId,"Dragged goal does not match."),i=n.container.getSortedItems(),a=i.map(function(c){return c.data}).filter(function(c){return c.goal.id!==t}),this.goalDragInfo=(0,b.ZP)(this.goalDragInfo,function(c){return c.rankOrderedNextGoal=n.currentIndex<a.length?a[n.currentIndex]:void 0,c.rankOrderedPrevGoal=n.currentIndex-1>=0?a[n.currentIndex-1]:void 0,c}),[2]})})},o.prototype.onDropGoal=function(n){return(0,S.mG)(this,void 0,void 0,function(){var t,i,a;return(0,S.Jh)(this,function(l){switch(l.label){case 0:return M.fF.assertValue((t=n.item.data.goal).id===this.goalDragInfo.sourceGoalId,"Dragged goal does not match."),this.goalDragInfo.rankOrderedNextGoal&&(a=this.goalDragInfo.rankOrderedNextGoal.goal,(this.goalDragInfo.destParentGoalId&&a.parentId===this.goalDragInfo.destParentGoalId||!a.parentId&&!this.goalDragInfo.destParentGoalId)&&(i=this.goalDragInfo.rankOrderedNextGoal.goal)),[4,this.scorecardService.moveGoal(t.id,i?.id,this.goalDragInfo.destParentGoalId)];case 1:return l.sent(),this.goalDragInfo=(0,b.ZP)(this.goalDragInfo,function(){return{}}),[2]}})})},o.prototype.onLinkedMetricInit=function(){return(0,S.mG)(this,void 0,void 0,function(){var n,t,a=this;return(0,S.Jh)(this,function(l){return this.linkedMetricsLauncher&&(n=_.map(X.flattenGoals(this.scorecardService.getCurrentScorecard().goals),"id"),t=this.scorecardDetails$.pipe((0,Kt.w)(function(c){var u;return null!==(u=c?.reportId$)&&void 0!==u?u:a.scorecard$.pipe((0,xe.U)(function(p){return p.reportId}))}),(0,V.x)()),this.linkedMetricsLauncher.launchLinkedMetrics(n,t).pipe((0,ue.q)(1)).subscribe(function(c){c?.length>=1&&a.scorecardService.createLinkedGoals(c)})),[2]})})},o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(Ht),e.\u0275\u0275directiveInject(lc),e.\u0275\u0275directiveInject(ri),e.\u0275\u0275directiveInject(Hs),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(en.vZ),e.\u0275\u0275directiveInject(La),e.\u0275\u0275directiveInject(jn),e.\u0275\u0275directiveInject(eo),e.\u0275\u0275directiveInject(sr),e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(Cf,8),e.\u0275\u0275directiveInject(xo.x),e.\u0275\u0275directiveInject(jc),e.\u0275\u0275directiveInject(Cn,8),e.\u0275\u0275directiveInject(Zt,8))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["scorecard"]],viewQuery:function(t,i){if(1&t&&(e.\u0275\u0275viewQuery(_f,5),e.\u0275\u0275viewQuery(yf,5)),2&t){var a=void 0;e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(i.inputFile=a.first),e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(i.columnTableElement=a.first)}},decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["noScorecard",""],["noGoals",""],[1,"scorecard",3,"on-resize"],[3,"scorecard","users","labels",4,"ngIf"],["class","toolbar",3,"new-look",4,"ngIf"],[3,"scorecardName","scorecardDescription","isTitleEditable",4,"ngIf"],[4,"ngIf"],[3,"scorecard","users","labels"],[1,"toolbar"],[1,"toolbar-btns"],[1,"spacer"],[1,"add-goal-btn","pbi-fluent-button",3,"disabled","click"],["fontIcon","pbi-glyph-add",1,"glyphicon","glyph-small"],["localize","NewMetric"],[1,"add-subgoal-btn","pbi-fluent-button",3,"disabled","click"],["localize","AddSubmetric"],["class","label pbi-fluent-button primary",4,"ngIf"],[1,"label","pbi-fluent-button","primary"],["type","file",3,"change"],["inputFile",""],["localize","Import"],["cdkMonitorElementFocus","","mat-button","","aria-expanded","viewSwitcherMenuTrigger.menuOpen === true","class","view-mode-picker-btn pbi-fluent-button",3,"matMenuTriggerFor","ngClass",4,"ngIf"],[1,"view-mode-picker-menu",3,"overlapTrigger"],["viewSwitcherMenu","matMenu"],["mat-menu-item","",1,"pbi-fluent-button",3,"click"],["fontIcon","pbi-glyph-list",1,"glyphicon","glyph-small"],["localize","Scorecard","localizeTooltip","Scorecard"],["fontIcon","pbi-glyph-table",1,"glyphicon","glyph-small"],["localize","MetricsHeatmap","localizeTooltip","MetricsHeatmap"],["class","customize-heatmap-btn pbi-fluent-button",3,"click",4,"ngIf"],["class","hierarchies-btn pbi-fluent-button",3,"click",4,"ngIf"],["cdkMonitorElementFocus","","mat-button","","aria-expanded","viewSwitcherMenuTrigger.menuOpen === true",1,"view-mode-picker-btn","pbi-fluent-button",3,"matMenuTriggerFor","ngClass"],["viewSwitcherMenuTrigger","matMenuTrigger"],[1,"glyph-small",3,"fontIcon"],[3,"localize","localizeTooltip"],["fontIcon","pbi-glyph-chevrondownsmall","localizeTooltip","View_Options",1,"glyph-mini","chevron-down"],[1,"customize-heatmap-btn","pbi-fluent-button",3,"click"],["fontIcon","pbi-glyph-barchartverticaledit",1,"glyphicon","glyph-small"],["localize","MetricsCustomizeHeatmap"],[1,"hierarchies-btn","pbi-fluent-button",3,"click"],["fontIcon","pbi-glyph-inline-drill-nocircle",1,"glyphicon","glyph-small"],["localize","MetricsManageHierarchies"],[3,"scorecardName","scorecardDescription","isTitleEditable"],[3,"goals","goalStatusesByScorecardId","goalStatusList","selectedStatuses","onStatusSelected",4,"ngIf"],["class","filter-row",3,"toolbar-visible",4,"ngIf"],["class","scorecard-table","cdkDropList","",3,"padding-left","padding-right","cdkDropListDisabled","cdkDropListDropped","cdkDropListSorted",4,"ngIf"],[3,"scorecard","isEditMode","viewSettings","sort","onSortColumn",4,"ngIf"],[3,"filterText","filterBy",4,"ngIf","ngIfElse"],["listToolbar",""],[3,"filterText","filterBy"],[3,"isEditMode","scorecard","scorecardCapabilities","numberOfSelectedGoals","filterText","showTitle","filterBy","onNewGoal","onNewSubGoal","onLinkedMetricInit"],[3,"goals","goalStatusesByScorecardId","goalStatusList","selectedStatuses","onStatusSelected"],[1,"filter-row"],["fontIcon","pbi-glyph-filter",1,"filter-icon","glyphicon","glyph-small"],[3,"ngModel","ngModelChange"],["fontIcon","pbi-glyph-close",1,"close-icon","glyphicon","glyph-small",3,"click"],["cdkDropList","",1,"scorecard-table",3,"cdkDropListDisabled","cdkDropListDropped","cdkDropListSorted"],["columnTable",""],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"scorecard-header"],["colspan","1",1,"checkmark-th"],["class","select-checkmark",3,"box-checked",4,"ngIf"],[1,"select-checkmark"],[3,"checked","pbiTooltip","onChange"],["colspan","5",4,"ngIf","ngIfElse"],["columnHeader",""],["colspan","5"],[1,"filter-btn-and-name"],["class","collapse-btn",3,"pbiTooltip","click",4,"ngIf"],["class","filter-btn",3,"pbiTooltip","click",4,"ngIf"],[1,"name-col","sort-col"],[3,"column","index","sort","isEditMode","onSortColumn"],[1,"collapse-btn",3,"pbiTooltip","click"],[1,"glyphicon","glyph-mini",3,"fontIcon"],[1,"filter-btn",3,"pbiTooltip","click"],["fontIcon","pbi-glyph-filter",1,"glyphicon","glyph-small"],["colspan","1","class","sort-col",4,"ngIf"],["colspan","1",1,"sort-col"],["goal-group","",3,"scorecard","columnSettings","goal","color","showChildren","goalDragInfo","scorecardSelectionMode","forceColumnMinWidths","showChildrenChange","dragStarted","dragMoved",4,"ngIf"],["goal-group","",3,"scorecard","columnSettings","goal","color","showChildren","goalDragInfo","scorecardSelectionMode","forceColumnMinWidths","showChildrenChange","dragStarted","dragMoved"],[3,"scorecard","isEditMode","viewSettings","sort","onSortColumn"],[3,"filterText","filterBy",4,"ngIf"],[1,"heat-map"],[3,"isEditMode","scorecardCapabilities","numberOfSelectedGoals","filterText","filterBy","onNewGoal","onNewSubGoal","onLinkedMetricInit"],[3,"boardSettings","metricsGoalStatuses"],[3,"isMetricsPicker","canEdit","onNewGoal","onLinkToGoal"],[1,"no-goals","center-text"],["loading",""],["localize","Scorecard_DoesNotExist"],["localize","Scorecard_Loading"]],template:function(t,i){if(1&t&&(e.\u0275\u0275template(0,im,5,4,"ng-container",0),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275template(2,am,5,6,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)),2&t){var a=e.\u0275\u0275reference(3);e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(1,2,i.scorecard$))("ngIfElse",a)}},dependencies:[U.NgClass,U.NgForOf,U.NgIf,Y.Wj,Fi.O,se.Fj,se.JJ,se.On,jt.X,Wn.r,Ut.Hw,Pt.W0,Pt.tN,Pt.D8,ac.v,Ee.V,Se,zc,Xc,qc,Zc,js,k,Ho,eu,tu,nu,Kc,gc,U.AsyncPipe,xt.F],styles:["[_nghost-%COMP%]{display:flex;flex-direction:row;height:100%}[_nghost-%COMP%]    {color:var(--scorecard-neutralPrimaryColor)}[_nghost-%COMP%]   .scorecard[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;flex:1}[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]{padding:20px 50px 0;width:100%;box-sizing:border-box}[_nghost-%COMP%]   .toolbar.new-look[_ngcontent-%COMP%]{padding:0 30px 4px;background-color:var(--scorecard-headerBackgroundColor);border-bottom:1px solid var(--gray-50, #D2D0CE);display:flex;flex-direction:column}[_nghost-%COMP%]   .toolbar.new-look[_ngcontent-%COMP%]   .pbi-fluent-button[_ngcontent-%COMP%]{border:none}[_nghost-%COMP%]   .toolbar.new-look[_ngcontent-%COMP%]   .pbi-fluent-button[_ngcontent-%COMP%]:disabled{background:transparent}[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]{display:inline-flex;width:100%}[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{overflow:visible}[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   .mat-icon.glyph-small[_ngcontent-%COMP%]{font-size:var(--lg-font-size, 16px);width:var(--lg-font-size, 16px);height:var(--lg-font-size, 16px)}[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   .mat-icon.glyph-mini[_ngcontent-%COMP%]{font-size:var(--sm-font-size, 12px);width:var(--sm-font-size, 12px);height:var(--sm-font-size, 12px)}[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   .mat-icon.mat-ligature-font[fontIcon][_ngcontent-%COMP%]{overflow:auto}[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:inline-flex;align-items:center}[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled   span[_ngcontent-%COMP%]{color:var(--gray-90, #A19F9D)}[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   .spacer[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   .add-goal-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   .hierarchies-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   .view-mode-picker-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   .customize-heatmap-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   .hierarchy-slicer-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px;color:var(--fluent-theme-black-color, #000)}[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   .view-mode-picker-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   .hierarchy-slicer-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin:0 8px}[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   .add-goal-btn[_ngcontent-%COMP%], [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   .add-subgoal-btn[_ngcontent-%COMP%], [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   .hierarchies-btn[_ngcontent-%COMP%], [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   .view-mode-picker-btn[_ngcontent-%COMP%], [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   .customize-heatmap-btn[_ngcontent-%COMP%], [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   .hierarchy-slicer-btn[_ngcontent-%COMP%]{margin-right:8px;background-color:var(--fluent-theme-neutral-lighter-alt-color, #FAF9F8)}[_nghost-%COMP%]   pbi-dropdown-trigger[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]   .filter-row[_ngcontent-%COMP%]{color:var(--scorecard-tableHeaderForegroundColor);background-color:rgba(0,0,0,.05);border-radius:4px;margin:10px 30px 0}[_nghost-%COMP%]   .filter-row[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::placeholder{color:var(--scorecard-tableHeaderForegroundColor)}[_nghost-%COMP%]   .filter-row.toolbar-visible[_ngcontent-%COMP%]{margin-top:20px}[_nghost-%COMP%]   .filter-row[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;align-items:center;height:45px;outline:none}[_nghost-%COMP%]   .filter-row[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .filter-icon[_ngcontent-%COMP%]{font-size:20px;margin-top:4px;margin-right:12px;padding-left:15px}[_nghost-%COMP%]   .filter-row[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{cursor:pointer;font-size:16px;margin-top:8px;margin-right:10px}[_nghost-%COMP%]   .filter-row[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:transparent;border:none;flex:1;font-size:var(--md-font-size, 14px);outline:none;padding-left:0}[_nghost-%COMP%]   .scorecard-table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0px 10px;empty-cells:hide;padding-top:0;padding-bottom:0;color:var(--scorecard-tableRowForegroundColor)}[_nghost-%COMP%]   .scorecard-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1;background:var(--scorecard-tableBackgroundColor);height:40px}[_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]{text-align:left}[_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:var(--lg-font-size, 16px);font-weight:var(--font-weight-regular, 400);color:var(--scorecard-tableHeaderForegroundColor);font-weight:500}[_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th.checkmark-th[_ngcontent-%COMP%]{width:35px;max-width:35px}[_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th.checkmark-th[_ngcontent-%COMP%]:not(.show-checkmark){width:0px;max-width:0px}[_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th.checkmark-th[_ngcontent-%COMP%]:not(.show-checkmark)   .select-checkmark[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th.show-on-hover-only[_ngcontent-%COMP%]   .select-checkmark[_ngcontent-%COMP%]{visibility:hidden}[_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th.show-on-hover-only[_ngcontent-%COMP%]:hover   .select-checkmark[_ngcontent-%COMP%], [_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th.show-on-hover-only[_ngcontent-%COMP%]   .select-checkmark.box-checked[_ngcontent-%COMP%]{visibility:visible}[_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .select-checkmark[_ngcontent-%COMP%]{margin-right:15px}[_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .select-checkmark[_ngcontent-%COMP%]     pbi-checkbox{margin-bottom:0}[_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th.dueDate[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}[_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .sort-col[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .filter-btn-and-name[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .filter-btn-and-name[_ngcontent-%COMP%]   .collapse-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;margin-left:6px;min-width:48px;width:48px;background-color:transparent;border:none;padding:2px}[_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .filter-btn-and-name[_ngcontent-%COMP%]   .collapse-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;height:unset}[_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .filter-btn-and-name[_ngcontent-%COMP%]   .filter-btn[_ngcontent-%COMP%]{background-color:transparent;border:none;font-size:20px;padding:0 12px;color:inherit}[_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .filter-btn-and-name[_ngcontent-%COMP%]   .filter-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;height:unset}[_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .filter-btn-and-name[_ngcontent-%COMP%]   .filter-btn[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .filter-btn-and-name[_ngcontent-%COMP%]   .filter-btn[_ngcontent-%COMP%]:focus:hover{background-color:var(--fluent-theme-neutral-lighter-color, #F3F2F1)}[_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .filter-btn-and-name[_ngcontent-%COMP%]   .filter-btn[_ngcontent-%COMP%]:active, [_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .filter-btn-and-name[_ngcontent-%COMP%]   .filter-btn.active[_ngcontent-%COMP%], [_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .filter-btn-and-name[_ngcontent-%COMP%]   .filter-btn[_ngcontent-%COMP%]:active:focus:hover{background-color:var(--fluent-theme-neutral-quarter-alt-color, #E1DFDD)}[_nghost-%COMP%]   .add-goal-btn-box[_ngcontent-%COMP%]{float:right}[_nghost-%COMP%]   .add-goal-btn-box[_ngcontent-%COMP%]   .add-goal-btn[_ngcontent-%COMP%]{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-semi-bold, 600);color:var(--gray-180, #252423);padding:6px 18px;box-sizing:border-box;border-radius:2px;height:32px;display:inline-block;cursor:pointer;background-color:var(--fluent-theme-primary-color, #F2C811)}[_nghost-%COMP%]   .center-text[_ngcontent-%COMP%]{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-semi-bold, 600);text-align:center}[_nghost-%COMP%]   .compact.scorecard[_ngcontent-%COMP%]{overflow:hidden;padding:0 20px}@media screen and (min-width: 1024px){[_nghost-%COMP%]   .compact.scorecard[_ngcontent-%COMP%]{padding:0 26px}}@media screen and (min-width: 1366px){[_nghost-%COMP%]   .compact.scorecard[_ngcontent-%COMP%]{padding:0 60px}}[_nghost-%COMP%]   .compact.scorecard[_ngcontent-%COMP%]   compact-scorecard[_ngcontent-%COMP%]{overflow:hidden}[_nghost-%COMP%]   .compact.scorecard[_ngcontent-%COMP%]   scorecard-list-toolbar[_ngcontent-%COMP%]{--toolbar-padding: 12px 0 12px 0}[_nghost-%COMP%]   .compact.scorecard[_ngcontent-%COMP%]     .scorecard-status-tiles{padding:0}label.label[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;top:-100%}.label[_ngcontent-%COMP%]{cursor:pointer;padding:5px 15px;display:inline-block}.no-goals[_ngcontent-%COMP%], empty-scorecard[_ngcontent-%COMP%]{color:var(--scorecard-tableHeaderForegroundColor);padding:20px;flex:1}.no-goals.border-top[_ngcontent-%COMP%], empty-scorecard.border-top[_ngcontent-%COMP%]{border-top:1px solid var(--gray-50, #D2D0CE)}.heat-map-scroll[_ngcontent-%COMP%]{overflow:hidden}.heat-map[_ngcontent-%COMP%]{flex:1;overflow:hidden;display:flex}.mat-menu-item[_ngcontent-%COMP%]{color:var(--gray-180, #252423);display:flex;flex-direction:row;align-items:center;height:36px;padding-right:16px}  .view-mode-picker-menu mat-icon{display:flex;align-items:center}  .view-mode-picker-menu .mat-icon{overflow:visible}  .view-mode-picker-menu .mat-icon.glyph-small{font-size:var(--lg-font-size, 16px);width:var(--lg-font-size, 16px);height:var(--lg-font-size, 16px)}  .view-mode-picker-menu .mat-icon.glyph-mini{font-size:var(--sm-font-size, 12px);width:var(--sm-font-size, 12px);height:var(--sm-font-size, 12px)}  .view-mode-picker-menu .mat-icon.mat-ligature-font[fontIcon]{overflow:auto}.new-header   scorecard[_nghost-%COMP%], scorecard   [_nghost-%COMP%]{display:block}  .hierarchy-slicer-menu .mat-menu-content{padding:0!important}"],changeDetection:0}),o}();function lm(o,n){if(1&o&&(e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(0,"path",4)),2&o){var t=e.\u0275\u0275nextContext();e.\u0275\u0275attribute("d",t.path)("stroke",t.settings.lineColor)("stroke-width",t.settings.lineWidth)}}function sm(o,n){if(1&o&&(e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(0,"circle")),2&o){var t=e.\u0275\u0275nextContext();e.\u0275\u0275attribute("cx",t.min.x)("cy",t.min.y)("r",t.settings.dotRadius)("fill",t.settings.dotFillColor)("stroke",t.settings.dotColor)("stroke-width",t.settings.dotStrokeWidth)}}function cm(o,n){if(1&o&&(e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(0,"circle")),2&o){var t=e.\u0275\u0275nextContext();e.\u0275\u0275attribute("cx",t.max.x)("cy",t.max.y)("r",t.settings.dotRadius)("fill",t.settings.dotFillColor)("stroke",t.settings.dotColor)("stroke-width",t.settings.dotStrokeWidth)}}function um(o,n){if(1&o&&(e.\u0275\u0275namespaceSVG(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(0,"div",5)(1,"table")(2,"tr")(3,"th",6),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"th",7),e.\u0275\u0275text(7),e.\u0275\u0275pipe(8,"formatValue"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"tr")(10,"th",6),e.\u0275\u0275text(11),e.\u0275\u0275pipe(12,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"th",7),e.\u0275\u0275text(14),e.\u0275\u0275pipe(15,"formatValue"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(16,"tr")(17,"th",6),e.\u0275\u0275text(18),e.\u0275\u0275pipe(19,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"th",7),e.\u0275\u0275text(21),e.\u0275\u0275elementEnd()()()()),2&o){var t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(5,6,"High")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(8,8,t.tooltip.high,t.formatString)),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(12,11,"Low")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(15,13,t.tooltip.low,t.formatString)),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(19,16,"Cycle")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.tooltip.cycle)}}var dm=function(){function o(n){this.localizationService=n,this.DefaultOptions={height:48,width:120,lineColor:"#5BD667",lineWidth:2,dotRadius:2,dotStrokeWidth:1,dotFillColor:"#161514",dotColor:"#5BD667",showMax:!0,showMin:!0,tension:.5},this.settings=Object.assign({},this.DefaultOptions)}return Object.defineProperty(o.prototype,"values",{set:function(t){this.sparklinePoints=t?.filter(function(i){return null!=i.value&&null!=i.timestamp}),this.update()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"options",{set:function(t){this.settings=Object.assign({},this.DefaultOptions,t),this.sparklinePoints&&this.update()},enumerable:!1,configurable:!0}),o.prototype.ngOnChanges=function(n){n.cycle&&(this.tooltip=Object.assign({},this.tooltip,{cycle:this.getCycleText()})),n.formatString&&this.update()},o.prototype.update=function(){var n;this.viewBox="0 0 ".concat(this.settings.width," ").concat(this.settings.height),(null===(n=this.sparklinePoints)||void 0===n?void 0:n.length)>=2?(this.points=o.calculatePoints(this.sparklinePoints,this.settings),this.path=o.calculatePath(this.points,this.settings),this.min=this.points.reduce(function(t,i){return t?.y<i.y?t:i}),this.max=this.points.reduce(function(t,i){return t?.y>i.y?t:i}),this.tooltip=this.getTooltipData(this.sparklinePoints)):(this.points=null,this.path=null,this.min=null,this.max=null)},o.calculatePoints=function(n,t){var i=n.map(function(me){return{value:me.value,timestamp:new Date(me.timestamp)}}),a=_.map(i,function(me){return me.value}),l=_.min(a),c=_.max(a),u=_.map(i,function(me){return me.timestamp.getTime()}),p=_.min(u),y=_.max(u),P=this.calculateSafeRange(c,l),x=this.calculateSafeRange(y,p),N=t.dotRadius+t.dotStrokeWidth+this.PaddingOnEdges,W=t.width-2*N,te=t.height-2*N;return i.map(function(me){return{x:(me.timestamp.getTime()-p)/x*W+N,y:(1-(me.value-l)/P)*te+N}})},o.calculatePath=function(n,t){for(var i="M ".concat(n[0].x,", ").concat(n[0].y),a=[],l=0;l<n.length;l++)if(0===l||l===n.length-1)a.push({x:0,y:0});else{var c=this.calculateDerivative(n[l-1],n[l+1]),u=Math.sqrt(1+c*c);a.push({x:1/u,y:c/u})}for(l=0;l<n.length-1;l++){var p=n[l],y=n[l+1],P=Math.abs(y.x-p.x),x=Math.abs(y.y-p.y),N=Math.min(P,x)*t.tension,te=p.y+N*a[l].y,me=y.x-N*a[l+1].x,Oe=y.y-N*a[l+1].y,ve="C ".concat(p.x+N*a[l].x,", ").concat(te," ").concat(me,", ").concat(Oe," ").concat(y.x,", ").concat(y.y);i+=" ".concat(ve)}return i},o.calculateDerivative=function(n,t){return t.x===n.x?0:(t.y-n.y)/(t.x-n.x)},o.calculateSafeRange=function(n,t){var i=n-t;return 0===i?1:i},o.prototype.getTooltipData=function(n){var t=_.map(n,function(l){return l.value}),i=_.min(t);return{high:_.max(t),low:i,cycle:this.getCycleText()}},o.prototype.getCycleText=function(){switch(this.cycle){case 1:return this.localizationService.get("SettingsDataset_ScheduleRefresh_RefreshFrequency_Daily");case 2:return this.localizationService.get("SettingsDataset_ScheduleRefresh_RefreshFrequency_Weekly");case 3:return this.localizationService.get("SettingsDataset_ScheduleRefresh_RefreshFrequency_Monthly");case 4:return this.localizationService.get("MetricsDetailsPane_TimePeriodTab_RadioButton_Quarterly");case 5:return this.localizationService.get("MetricsDetailsPane_TimePeriodTab_RadioButton_Yearly");default:return"-"}},o.PaddingOnEdges=1.5,o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(St.o))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["sparkline"]],inputs:{values:"values",options:"options",formatString:"formatString",cycle:"cycle"},features:[e.\u0275\u0275NgOnChangesFeature],decls:7,vars:11,consts:[["role","img",3,"aria-label","pbiTooltip","pbiTooltipDisabled"],["fill","transparent",4,"ngIf"],[4,"ngIf"],["tooltipTmpl",""],["fill","transparent"],[1,"sparkline-tooltip"],[1,"text"],[1,"value"]],template:function(t,i){if(1&t&&(e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(0,"svg",0),e.\u0275\u0275pipe(1,"localize"),e.\u0275\u0275template(2,lm,1,3,"path",1),e.\u0275\u0275template(3,sm,1,6,"circle",2),e.\u0275\u0275template(4,cm,1,6,"circle",2),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,um,22,18,"ng-template",null,3,e.\u0275\u0275templateRefExtractor)),2&t){var a=e.\u0275\u0275reference(6);e.\u0275\u0275property("aria-label",e.\u0275\u0275pipeBind1(1,9,"Metrics_Sparkline_AltText"))("pbiTooltip",a)("pbiTooltipDisabled",!i.tooltip),e.\u0275\u0275attribute("width",i.settings.width)("height",i.settings.height)("viewBox",i.viewBox),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",i.path),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.settings.showMin&&i.min),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.settings.showMax&&i.max)}},dependencies:[U.NgIf,Ee.V,xt.F,fi.c],styles:['[_nghost-%COMP%]   .sparkline[_ngcontent-%COMP%]{height:100%;width:100%}  .sparkline-tooltip{padding:5px 15px}  .sparkline-tooltip .text{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-semi-bold, 600);text-align:right;padding-right:8px}  .sparkline-tooltip .value{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);text-align:left}'],changeDetection:0}),o}(),pm=function(){function o(){this.mappings=[{key:"T",value:Math.pow(10,12)},{key:"B",value:Math.pow(10,9)},{key:"M",value:Math.pow(10,6)},{key:"K",value:Math.pow(10,3)}]}return o.prototype.transform=function(n,t){if(void 0===t&&(t=2),null==n||isNaN(n))return"\u2014";if(0===n)return"0";(null==t||t<0||isNaN(t))&&(t=2);for(var i=Math.pow(10,t),a=n<0?"-":"",l="",c=n=Math.abs(n),u=0,p=this.mappings;u<p.length;u++){var y=p[u],P=_.round(n*i/y.value)/i;if(P>=1){c=P,l=y.key;break}}return"".concat(a).concat(c).concat(l)},o.\u0275fac=function(t){return new(t||o)},o.\u0275pipe=e.\u0275\u0275definePipe({name:"shortNumber",type:o,pure:!0}),o}(),gm=T(52910),ou=(T(94120),T(82775),T(94785)),ru=T(52040),au=T(93367),lu=T(16095),mm=T(70137),su=T(88717),cu=T(76701),vm=T(47754),Cm=function(){function o(n,t){this.profileImageService=n,this.userHttpService=t,this.usersCache={}}return o.prototype.getUserPhoto=function(n){return(0,Ks.D)(this.profileImageService.getOtherUserPhoto(n))},o.prototype.getUserDetails=function(n){var t=this;n=_.filter(n,function(y){return!!y});var i=[],a=[];if(_.isEmpty(n))return(0,Ks.D)([]);for(var l=0,c=n;l<c.length;l++){var p=c[l].toLowerCase();this.usersCache[p]||(this.usersCache[p]=new qn.t(1),a.push(p)),i.push(this.usersCache[p])}return _.isEmpty(a)||this.userHttpService.getUserDetails(a).pipe((0,ue.q)(1)).subscribe(function(y){var P={};if(_.some(y?.data))for(var x=0,N=y?.data;x<N.length;x++){var me=(W=N[x]).userPrincipalName,Oe=W.objectId;t.upsert(W.emailAddress,W,P),t.upsert(me,W,P),t.upsert(Oe,W,P)}for(var Re=0,Xe=_.filter(a,function(ot){return!P[ot]});Re<Xe.length;Re++){var W;t.usersCache[W=Xe[Re]].next(void 0),t.usersCache[W].complete()}},function(){for(var y,P,x=0,N=a;x<N.length;x++){var W=N[x];null===(y=t.usersCache[W])||void 0===y||y.next(void 0),null===(P=t.usersCache[W])||void 0===P||P.complete(),delete t.usersCache[W]}}),(0,Ro.D)(i).pipe((0,xe.U)(function(y){return _.filter(y,function(P){return!!P})}))},o.prototype.findUsers=function(n,t){return this.userHttpService.findUsers(n,1,t,!0,!0).pipe((0,xe.U)(function(i){return i?.data}))},o.prototype.upsert=function(n,t,i){if(n){var a=n.toLowerCase();this.usersCache[a]||(this.usersCache[a]=new qn.t(1)),this.usersCache[a].next(t),this.usersCache[a].complete(),i[a]=!0}},o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275inject(vm.L),e.\u0275\u0275inject(Tc.W))},o.\u0275prov=e.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac,providedIn:"root"}),o}(),uu=T(79061),_m=function(){function o(){}return o.forRoot=function(){return{ngModule:o,providers:[]}},o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=e.\u0275\u0275defineInjector({}),o}(),du=function(){function o(){}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=e.\u0275\u0275defineInjector({providers:[{provide:un.K,useClass:Cm}],imports:[U.CommonModule,uu.v,_m,ou.g,su.R,cu.z]}),o}();function ym(o){return function(){return o.scrollStrategies.close()}}var bm=function(){function o(){}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=e.\u0275\u0275defineInjector({providers:[{provide:ic,deps:[Wa.aV],useFactory:ym}],imports:[U.CommonModule,Gc,Oc,he.wp,se.UX,Yt.Cl,cu.z,au.U,mm.F,ou.g,du,su.R,ru.x,lu.Z]}),o}(),wm=T(22824),Sm=T(82156),Mm=T(71328),Pm=T(76966),xm=T(47913),Om=T(6015),Tm=T(94770),Em=T(23612),km=T(45411),Dm=T(33766),Im=T(59951),Fm=T(16748),Gm=T(76777),Vm=T(44913),Rm=T(16622),Am=T(16434),Lm=T(8816),Nm=function(){function o(){}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=e.\u0275\u0275defineInjector({providers:[{provide:Am.E,useClass:Rm._}],imports:[U.CommonModule,Gl.Y,Pt.jT,Ws.vV,bn.T6,Lm.w]}),o}(),zm=T(54485),Hm=[{componentId:sc.componentId,type:sc},{componentId:cc.componentId,type:cc},{componentId:uc.componentId,type:uc},{componentId:ef.a.componentId,type:iu},{componentId:Je.H.componentId,type:Yc},{componentId:Fl.i.componentId,type:Uc},{componentId:po.componentId,type:po},{componentId:zs.componentId,type:zs}],Um=((0,S.ev)((0,S.ev)([],[qe,Se,El,mi,zs,zc,Gi,Hc,Nc,Vp,Uc,it,Ra,Xs,mc,Xc,$c,sc,cc,uc,qc,Zc,po,iu,Yc,Pr,dm,io,Ac,Wi,dc,js,sn],!0),[k,kl,Lc,cr,Ot,ur,to,Go,An,Lo,Ho,Us,eu,tu,nu,js,Kc,gc,pc,pm,Ar,Bc,Pn],!1),function(){function o(n){n.registerIcons(Dm.$.sprite)}return o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275inject(zm.u))},o.\u0275mod=e.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=e.\u0275\u0275defineInjector({providers:[ri,Aa,hc],imports:[U.CommonModule,si.nZ,Pm.c,gm.O,Y._t,wm.J,bm,se.u5,Sm.N.withManifests(Hm),uu.v,Mm.G,Ws.vV,zo.t,Ut.Ps,Pt.jT,st.uw,ru.x,xm.V,Om.C,Tm.f,Em.N,au.U,km.m,Im.v,Fm.H,lu.Z,se.UX,Yt.Cl,Vm.lK,Nm,bn.T6,du,Gm.H,hn]}),o}())},52349:function(ht,wt,T){"use strict";T.d(wt,{o:function(){return $e}});var S=T(81337),M={palette:{themeDarker:"#b1920b",themeDark:"#bc9a0a",themeDarkAlt:"#c5a20b",themePrimary:"#f2c811",themeSecondary:"#f2c811",themeTertiary:"#f7de72",themeLight:"#f9e48a",themeLighter:"#fbefba",themeLighterAlt:"#fdf6d7"},semanticColors:{primaryButton:{text:{default:"#333333"}},checkableInput:{text:{checked:"#333333"}},grid:{cell:{linkText:{default:"#7D6807",focused:"#5C4C05"}}}}},Ee=T(41114),Fe="PBI.MashupEditor.OnReadyError",Pe=Ee.cx[Fe]=(0,Ee.b1)(Fe),Ye="PBI.MashupEditor.OnTokenError",je=Ee.cx[Ye]=(0,Ee.b1)(Ye),Ie=T(48741),j=T(50423),qe=T(95281),Te=T(48501),V=T(73221),be=T(98665),Je=T(78590),pe=T(59017),Le=T(23558),Be=T(59973),Ue=T(83317),X=T(76746),Mt=T(85928),Ne=T(65181),Me=["mashupIframe"],Ze={readyState:0},$e=function(ie){function Ke(Y,K,ae,re,rt,gt){var bt=ie.call(this)||this;return bt.appSettings=Y,bt.ref=K,bt.mashupService=ae,bt.localizationService=re,bt.telemetryService=rt,bt.componentStore=gt,bt.onError=new j.EventEmitter,bt.onReady=new j.EventEmitter,bt.readyState$=bt.componentStore.select(function(ue){return ue.readyState}),bt.updateState=bt.componentStore.updater(function(ue,Ce){return(0,S.pi)((0,S.pi)({},ue),{readyState:Ce})}),bt}return(0,S.ZT)(Ke,ie),Ke.prototype.ngOnInit=function(){var K,ae,re,rt,Y=this;!this.theme&&!(null===(ae=null===(K=this.clientConfiguration)||void 0===K?void 0:K.editorSettings)||void 0===ae)&&ae.themeOverride&&(this.theme=null===(rt=null===(re=this.clientConfiguration)||void 0===re?void 0:re.editorSettings)||void 0===rt?void 0:rt.themeOverride),this.componentStore.setState(Ze),this.changes$("flow").pipe((0,Le.M)(this.readyState$),(0,Be.h)(function(gt){return!!gt[0]&&1!==gt[1]}),(0,Ue.R)(this.onDestroy$)).subscribe(function(gt){var ue=gt[1];return(0,S.mG)(Y,void 0,void 0,function(){return(0,S.Jh)(this,function(Ce){switch(Ce.label){case 0:return this.updateState(1),0===ue?[3,2]:[4,this.endFlow()];case 1:Ce.sent(),Ce.label=2;case 2:return this.startFlow(),[2]}})})})},Ke.prototype.ngAfterViewInit=function(){var Y=this;(0,Te.mv)(this.clientConfiguration,"clientConfiguration is required"),this.mashupService.getPQToken("".concat(this.appSettings.powerQueryResourceName,"/.default")).toPromise().catch(function(){}),this.mashupDataSubscription=(0,pe.aj)([this.mashupService.getPQEndpoint()]).pipe((0,Be.h)(function(K){return!!K[0]})).subscribe(function(K){Y.initMashupeditor(K[0])},function(K){Y.onError.emit(K)})},Ke.prototype.ngOnDestroy=function(){return this.mashupEditorClient&&this.mashupEditorClient.dispose(),this.mashupDataSubscription&&this.mashupDataSubscription.unsubscribe(),ie.prototype.ngOnDestroy.call(this)},Ke.prototype.setFocus=function(){var Y=this.mashupIframe.nativeElement.contentDocument||this.mashupIframe.nativeElement.contentWindow;Y?.focus()},Ke.prototype.activateQuery=function(Y){return this.mashupEditorClient.activateQuery(Y)},Ke.prototype.addQuery=function(Y,K){return this.mashupEditorClient.addQuery(Y,K)},Ke.prototype.cancelCurrentEvaluation=function(){return this.mashupEditorClient.dataPreview.cancelCurrentEvaluation()},Ke.prototype.getEditingSessionMashup=function(){return this.mashupEditorClient.getEditingSessionMashup()},Ke.prototype.getQueriesInfo=function(){return this.mashupEditorClient.getQueriesInfo()},Ke.prototype.getQueryScript=function(Y){return this.mashupEditorClient.getQueryScript(Y)},Ke.prototype.getDataSourceQueryScript=function(Y,K){return this.mashupEditorClient.getDataSourceQueryScript(Y,K)},Ke.prototype.setUserSettings=function(Y){return this.mashupEditorClient.setUserSettings(Y)},Ke.prototype.refreshActiveQueryResult=function(){return this.mashupEditorClient.refreshActiveQueryResult()},Ke.prototype.getSelectedStepName=function(){return this.mashupEditorClient.getSelectedStepName()},Ke.prototype.getActiveQueryName=function(){return this.mashupEditorClient.getActiveQueryName()},Ke.prototype.getClientSettings=function(Y){return{allowedOrigin:Y,container:this.mashupIframe.nativeElement,url:this.createMashupEditorUrl(Y),className:"mashup-editor-client-iframe"}},Ke.prototype.createMashupEditorUrl=function(Y){var K="".concat(Y,"/MashupEditor");if(this.mashupEditorFeatureFlags&&this.mashupEditorFeatureFlags.size>0){var ae=new Ie.LE;this.mashupEditorFeatureFlags.forEach(function(re,rt){ae=ae.set(rt,re)}),K=K+"?"+ae.toString()}return K},Ke.prototype.getEditorSettings=function(){var Y={cancelButtonLabel:this.localizationService.get("Cancel_ButtonText"),closeButtonSettings:{showConfirmationPrompt:!1,actionOnClick:Je.w9.Cancel},commitButtonLabel:this.localizationService.get("ModalDialog_Save"),enableAIInsights:!1,enableCalculatedEntities:!0,enableLinkedEntities:!0,enableMappingAsAStep:!1,returnQueryEditorResult:!1,showCancelButton:!0,useHostConnectionProvider:!1};return{addFocusTrapZone:!1,locale:this.localizationService.currentLanguageLocale,sessionId:this.telemetryService.sessionId,queryEditorSettings:Y,showCloseButton:!0,showHeader:!1,themeOverride:this.theme||M}},Ke.prototype.endFlow=function(){return(0,S.mG)(this,void 0,void 0,function(){var Y;return(0,S.Jh)(this,function(K){switch(K.label){case 0:if(!this.mashupEditorClient)return[2];K.label=1;case 1:return K.trys.push([1,3,,4]),[4,this.mashupEditorClient.endFlow()];case 2:return K.sent(),this.updateState(3),[3,4];case 3:return Y=K.sent(),this.onError.emit(Y),this.updateState(4),[3,4];case 4:return[2]}})})},Ke.prototype.startFlow=function(){var Y=this;!this.flow||!this.mashupEditorClient||this.mashupEditorClient.ready.then(function(){Y.mashupEditorClient.startFlow(Y.flow,Y.editorOnCommit,Y.editorOnCancel).then(function(){Y.updateState(2),Y.onReady.emit(),Y.ref.detectChanges()},function(K){Y.updateState(4)})},function(K){Y.onError.emit(K),Y.updateState(4),Y.telemetryService.logEvent(Pe,{reason:K?K+"":void 0})})},Ke.prototype.initMashupeditor=function(Y){var K=this,ae=this.getClientSettings(Y),re=this.getEditorSettings();this.mashupEditorClient=function(Ke){return new Je.Cq(Ke)}(_.merge({clientSettings:ae,editorSettings:re,acquireToken:function(gt){return K.mashupService.getPQToken("".concat(gt,"/.default")).toPromise().catch(function(bt){K.onError.emit(bt),K.telemetryService.logEvent(je,{reason:bt?bt.status+"":void 0})})}},this.clientConfiguration)),this.startFlow()},Ke.\u0275fac=function(K){return new(K||Ke)(j.\u0275\u0275directiveInject(X.de),j.\u0275\u0275directiveInject(j.ChangeDetectorRef),j.\u0275\u0275directiveInject(Mt.M),j.\u0275\u0275directiveInject(Ne.o),j.\u0275\u0275directiveInject(be.y0),j.\u0275\u0275directiveInject(qe.m1))},Ke.\u0275cmp=j.\u0275\u0275defineComponent({type:Ke,selectors:[["mashup-editor"]],viewQuery:function(K,ae){var re;(1&K&&j.\u0275\u0275viewQuery(Me,5),2&K)&&(j.\u0275\u0275queryRefresh(re=j.\u0275\u0275loadQuery())&&(ae.mashupIframe=re.first))},inputs:{clientConfiguration:"clientConfiguration",mashupEditorFeatureFlags:"mashupEditorFeatureFlags",flow:"flow",editorOnCommit:"editorOnCommit",editorOnCancel:"editorOnCancel",theme:"theme"},outputs:{onError:"onError",onReady:"onReady"},features:[j.\u0275\u0275ProvidersFeature([qe.m1]),j.\u0275\u0275InheritDefinitionFeature],decls:2,vars:0,consts:[["id","mashupIframe","pbi-auto-focus","","data-testid","mashup-iframe"],["mashupIframe",""]],template:function(K,ae){1&K&&j.\u0275\u0275element(0,"div",0,1)},styles:["[_nghost-%COMP%]{display:flex}#mashupIframe[_ngcontent-%COMP%]{background:var(--white-color, #FFF);display:flex;flex:1 1 auto;align-items:stretch;justify-content:center}#mashupIframe[_ngcontent-%COMP%]     .mashup-editor-client-iframe{border:none;width:100%;height:100%;display:block!important}"],changeDetection:0}),Ke}(V.w)},71328:function(ht,wt,T){"use strict";T.d(wt,{G:function(){return Mt}});var S=T(32293),M=T(50423),e=T(77476),U=T(52349);function Ee(Ne,Me){if(1&Ne){var Ae=M.\u0275\u0275getCurrentView();M.\u0275\u0275elementStart(0,"mashup-editor",1),M.\u0275\u0275listener("onError",function(){M.\u0275\u0275restoreView(Ae);var ie=M.\u0275\u0275nextContext();return M.\u0275\u0275resetView(ie.onError)}),M.\u0275\u0275elementEnd()}if(2&Ne){var Ze=M.\u0275\u0275nextContext();M.\u0275\u0275property("clientConfiguration",Ze.mashUpEditorInput.clientConfiguration)("editorOnCommit",Ze.onCommit)("editorOnCancel",Ze.onCancel)("flow",Ze.mashUpEditorInput.flow)}}var Fe=function(){function Ne(Me,Ae){var Ze=this;this.dialogRef=Me,this.onCommit=function($e,ie){Ze.mashUpEditorInput.editorOnCommit($e,ie),Ze.dialogRef.close(ie)},this.onCancel=function($e){Ze.mashUpEditorInput.editorOnCancel($e),Ze.dialogRef.close()},this.onError=function($e){Ze.mashUpEditorInput.onError($e)},this.mashUpEditorInput=Ae.input}return Ne.\u0275fac=function(Ae){return new(Ae||Ne)(M.\u0275\u0275directiveInject(S.so),M.\u0275\u0275directiveInject(S.WI))},Ne.\u0275cmp=M.\u0275\u0275defineComponent({type:Ne,selectors:[["mashup-editor-dialog"]],decls:1,vars:1,consts:[["pbi-auto-focus","","cdkFocusInitial","",3,"clientConfiguration","editorOnCommit","editorOnCancel","flow","onError",4,"ngIf"],["pbi-auto-focus","","cdkFocusInitial","",3,"clientConfiguration","editorOnCommit","editorOnCancel","flow","onError"]],template:function(Ae,Ze){1&Ae&&M.\u0275\u0275template(0,Ee,1,4,"mashup-editor",0),2&Ae&&M.\u0275\u0275property("ngIf",!!Ze.mashUpEditorInput.clientConfiguration)},dependencies:[e.NgIf,U.o],styles:["[_nghost-%COMP%]     mashup-editor{display:flex;width:80vw;height:80vh}[_nghost-%COMP%]{display:flex}"]}),Ne}(),Ye=new M.InjectionToken("MashUpEditorErrorHandler"),je=new M.InjectionToken("MashUpEditorLauncher"),Ie=T(78590),j=T(33554),qe=T(82762),Te=T(48787),V=T(42195),be=T(58938),Je=function(Ne){return Ne.OnCommit="OnCommit",Ne.OnCancel="OnCancel",Ne}({}),Le={provide:je,useClass:function(){function Ne(Me,Ae){this.dialogService=Me,this.errorHandler=Ae,this.lifeCycleEvent$=new j.t(1)}return Ne.prototype.editQueries=function(Me,Ae){return this.launchMashUpEditor(Ae.clientConfiguration,{kind:Ie.Mw.EditQuery,hostContext:Ae.hostContext||Me.hostContext,mashupDefinition:{editingSessionMashup:Me,kind:Ie.Qo.TransientMashup}})},Ne.prototype.addQueries=function(Me,Ae){var Ze=this.buildFlowForAddQueries(Me,Ae);return this.launchMashUpEditor(Ae.clientConfiguration,Ze)},Ne.prototype.manageDataSources=function(Me,Ae){return this.launchMashUpEditor(Ae.clientConfiguration,{kind:Ie.Mw.ManageConnections,hostContext:Ae.hostContext,connectionOverrides:Me.connectionOverrides})},Ne.prototype.buildFlowForAddQueries=function(Me,Ae){var Ze={kind:Ie.Mw.AddQueries,hostContext:Ae.hostContext||Me.hostContext};return function(Ne){return!_.has(Ne,"mashupDocument")||_.isNil(Ne.mashupDocument)}(Me)?(Ze.mashupTemplateImportAllowed=!0,Ze.mashupDefinition={editingSessionEmptyMashup:Me,kind:Ie.Qo.TransientEmptyMashup}):(Ze.mashupTemplateImportAllowed=!1,Ze.mashupDefinition={editingSessionMashup:Me,kind:Ie.Qo.TransientMashup}),Ze},Ne.prototype.launchMashUpEditor=function(Me,Ae){var Ze=this;return(0,qe.D)(this.dialogService.showTemplateDialog("MashUpEditorDialogComponentId",{title:"Mash Up Editor Dialog",input:{clientConfiguration:Me,flow:Ae,editorOnCommit:function(Ke,Y){return Ze.onCommit(Ke,Y)},editorOnCancel:function(Ke){return Ze.onCancel(Ke)},onError:function(Ke){var Y;return null===(Y=Ze.errorHandler)||void 0===Y?void 0:Y.handleError(Ke)}}})).pipe((0,Te.q)(1),(0,V.zg)(function(ie){return ie.afterClosed()})).toPromise()},Ne.prototype.onCommit=function(Me,Ae){this.lifeCycleEvent$.next({type:Je.OnCommit,payload:Ae})},Ne.prototype.onCancel=function(Me){this.lifeCycleEvent$.next({type:Je.OnCancel,payload:void 0})},Ne.\u0275fac=function(Ae){return new(Ae||Ne)(M.\u0275\u0275inject(be.x),M.\u0275\u0275inject(Ye,8))},Ne.\u0275prov=M.\u0275\u0275defineInjectable({token:Ne,factory:Ne.\u0275fac}),Ne}()},Be=T(79061),Ue=T(24495),Mt=function(){function Ne(){}return Ne.\u0275fac=function(Ae){return new(Ae||Ne)},Ne.\u0275mod=M.\u0275\u0275defineNgModule({type:Ne}),Ne.\u0275inj=M.\u0275\u0275defineInjector({providers:[Le],imports:[e.CommonModule,Be.v,Ue.z.withManifest([{componentIdentifier:"MashUpEditorDialogComponentId",componentType:Fe}])]}),Ne}()},85928:function(ht,wt,T){"use strict";T.d(wt,{M:function(){return Be}});var S=T(36444),M=T(48501),e=T(85732),U=(0,e.ZF)("urlConfiguration"),Ee=(0,e.P1)(U,function(Ue){return Ue.powerQueryHostUrl}),Fe=T(37263),Pe=T(59694),Ye=T(11547),je=T(82762),Ie=T(35510),j=T(42195),qe=T(14172),Te=T(17653),V=T(88255),be=T(50423),Je=T(62113),pe=T(73875),Le=window,Be=function(){function Ue(X,Mt,Ne,Me){var Ae=this;this.store=X,this.accessTokenProviderService=Mt,this.httpService=Ne,this.inTeams=Me,this.getAADToken$=function(Ze){return(0,Ye.of)(null).pipe((0,j.zg)(function(){if(Le.clientAuthEnabled)return(0,je.D)(Ae.accessTokenProviderService.acquireToken("MashupService",[Ze],!1)).pipe((0,qe.U)(function(Y){return Y.token}));if(Ae.inTeams){var $e=Ze.substring(0,Ze.lastIndexOf("/"));return S.authentication.initialize(),(0,je.D)(S.authentication.getAuthToken({resources:[$e],silent:!0}))}var ie=(0,Pe.W)("{0}/msal",Le.baseUrl||window.location.origin),Ke=Ae.httpService.powerbiRequestOptions();return Ke.params={scopes:Ze},Ae.httpService.get(ie,Ke).pipe((0,qe.U)(function(Y){return Y.data.AccessToken}))}),(0,Te.b)(function($e){var Ke=1e3*(0,M.oG)($e).exp;Ae.AADTokenCache$.next(new Map(Ae.AADTokenCache$.getValue()).set(Ze,{token:$e,expiration:Ke}))}))},this.AADTokenCache$=new Ie.X(new Map)}return Ue.prototype.getPQEndpoint=function(){return this.store.select(Ee).pipe((0,qe.U)(function(X){return(0,Pe.g)(X)?null:X.replace(/\/$/,"")}))},Ue.prototype.getPQToken=function(X){var Mt=this;return this.AADTokenCache$.pipe((0,V.P)(),(0,j.zg)(function(Ne){return!Ne.has(X)||Date.now()+3e5>Ne.get(X).expiration?Mt.getAADToken$(X):(0,Ye.of)(Ne.get(X).token)}))},Ue.\u0275fac=function(Mt){return new(Mt||Ue)(be.\u0275\u0275inject(e.yh),be.\u0275\u0275inject(Je.Q),be.\u0275\u0275inject(pe.O),be.\u0275\u0275inject(Fe.$,8))},Ue.\u0275prov=be.\u0275\u0275defineInjectable({token:Ue,factory:Ue.\u0275fac,providedIn:"root"}),Ue}()},5432:function(ht,wt,T){"use strict";T.d(wt,{d:function(){return Ke}});var S=T(81337),M=T(50423),e=T(3613),U=function(){function Y(K){this.cultureService=K,this.currencyRecentFormats=[]}return Y.prototype.getCurrencyGeneralFormat=function(){return this.currencyGeneralFormat||(this.currencyGeneralFormat={culture:null,displayLabel:this.localizationService.get("Format_Label_Currency_General"),symbol:"$",positivePattern:0,negativePattern:0,formatType:"CurrencyGeneral"}),this.currencyGeneralFormat},Y.prototype.getCurrencyCommonFormats=function(){if(!this.currencyCommonFormats){var K=_.filter(this.cultureService.getAllCurrencySymbolCustomFormatItemsInfo(),function(ae){return"en-US"===ae.culture||"en-GB"===ae.culture||"fr-CH"===ae.culture||null===ae.culture});this.currencyCommonFormats=_.flatten([this.getCurrencyGeneralFormat(),K.find(function(ae){return"en-US"===ae.culture}),K.find(function(ae){return"en-GB"===ae.culture}),K.filter(function(ae){return!ae.culture&&"\u20ac"===ae.symbol}),K.find(function(ae){return!ae.culture&&"\xa5"===ae.symbol}),K.find(function(ae){return"fr-CH"===ae.culture})])}return this.currencyCommonFormats},Y.prototype.getCurrencyAllFormats=function(){if(!this.currencyAllFormats){var K=this.cultureService.getAllCurrencySymbolCustomFormatItemsInfo();this.currencyAllFormats=(0,S.ev)([this.getCurrencyGeneralFormat()],K,!0)}return this.currencyAllFormats},Y.prototype.getCurrencyAllCultureFormats=function(){return this.cultureService.getAllCurrencySymbolCustomFormatItemsInfo()},Y.prototype.getCurrencyRecentFormats=function(){return this.currencyRecentFormats},Y.\u0275fac=function(ae){return new(ae||Y)(M.\u0275\u0275inject(e.h))},Y.\u0275prov=M.\u0275\u0275defineInjectable({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y}(),Ee=T(61353),Fe=T(98776),Pe=T(18967),Ye=T(62458),je=T(64560),Ie=T(65181),j=T(77476),qe=T(59968),Te=T(77274),V=T(33846),be=T(7970),Je=T(80357),pe=T(86663),Le=T(69437),Be=T(36858),Ue=T(85102);function X(Y,K){if(1&Y&&(M.\u0275\u0275elementStart(0,"mat-option",7),M.\u0275\u0275text(1),M.\u0275\u0275elementEnd()),2&Y){var ae=K.$implicit;M.\u0275\u0275property("value",ae.value)("pbiTooltip",ae.label),M.\u0275\u0275attribute("aria-label",ae.label),M.\u0275\u0275advance(1),M.\u0275\u0275textInterpolate1(" ",ae.label," ")}}var Mt=function(K){return{btnDisabled:K}},Ne=function(K){return{isToggled:K}};function Me(Y,K){if(1&Y){var ae=M.\u0275\u0275getCurrentView();M.\u0275\u0275elementContainerStart(0),M.\u0275\u0275elementStart(1,"div",8)(2,"div")(3,"button",9),M.\u0275\u0275listener("click",function(){M.\u0275\u0275restoreView(ae);var gt=M.\u0275\u0275nextContext();return M.\u0275\u0275resetView(gt.onCurrencyClicked())}),M.\u0275\u0275pipe(4,"localize"),M.\u0275\u0275pipe(5,"localize"),M.\u0275\u0275element(6,"pbi-office-icon",10),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(7,"button",11),M.\u0275\u0275listener("pbiMenuButtonClick",function(gt){M.\u0275\u0275restoreView(ae);var bt=M.\u0275\u0275nextContext();return M.\u0275\u0275resetView(bt.onCurrencyItemClicked(gt))}),M.\u0275\u0275pipe(8,"localize"),M.\u0275\u0275pipe(9,"localize"),M.\u0275\u0275element(10,"pbi-icon",12),M.\u0275\u0275elementEnd()(),M.\u0275\u0275elementStart(11,"button",13),M.\u0275\u0275listener("click",function(){M.\u0275\u0275restoreView(ae);var gt=M.\u0275\u0275nextContext();return M.\u0275\u0275resetView(gt.onChangePercentageToggle())}),M.\u0275\u0275pipe(12,"localize"),M.\u0275\u0275pipe(13,"localize"),M.\u0275\u0275element(14,"pbi-office-icon",14),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(15,"button",13),M.\u0275\u0275listener("click",function(){M.\u0275\u0275restoreView(ae);var gt=M.\u0275\u0275nextContext();return M.\u0275\u0275resetView(gt.onChangeThousandSeparatorToggle())}),M.\u0275\u0275pipe(16,"localize"),M.\u0275\u0275pipe(17,"localize"),M.\u0275\u0275element(18,"pbi-office-icon",15),M.\u0275\u0275elementEnd()(),M.\u0275\u0275elementStart(19,"div",16),M.\u0275\u0275pipe(20,"localize"),M.\u0275\u0275elementStart(21,"span",17),M.\u0275\u0275element(22,"pbi-office-icon",18),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(23,"num-up-down",19),M.\u0275\u0275listener("modelValueChange",function(gt){M.\u0275\u0275restoreView(ae);var bt=M.\u0275\u0275nextContext();return M.\u0275\u0275resetView(bt.onDecimalPlacesChanged(gt))}),M.\u0275\u0275elementEnd()(),M.\u0275\u0275elementContainerEnd()}if(2&Y){var re=M.\u0275\u0275nextContext();M.\u0275\u0275advance(3),M.\u0275\u0275property("disabled",!re.isNumericFormatEnabled())("pbiTooltip",M.\u0275\u0275pipeBind1(4,22,"Value_Formatting_Tooltip_Currency_Format")),M.\u0275\u0275attribute("aria-label",M.\u0275\u0275pipeBind1(5,24,"Value_Formatting_ARIA_Label_Currency_Format")),M.\u0275\u0275advance(4),M.\u0275\u0275property("ngClass",M.\u0275\u0275pureFunction1(40,Mt,!re.isNumericFormatEnabled()))("pbiMenu",re.currencyMenu)("pbiTooltip",M.\u0275\u0275pipeBind1(8,26,"Value_Formatting_Tooltip_Currency_Format"))("disabled",!re.isNumericFormatEnabled()),M.\u0275\u0275attribute("aria-label",M.\u0275\u0275pipeBind1(9,28,"Value_Formatting_ARIA_Label_Currency_Format")),M.\u0275\u0275advance(4),M.\u0275\u0275property("ngClass",M.\u0275\u0275pureFunction1(42,Ne,re.isPercentFormatterToggled()))("disabled",!re.isNumericFormatEnabled())("pbiTooltip",M.\u0275\u0275pipeBind1(12,30,"Value_Formatting_Tooltip_Percentage_Format")),M.\u0275\u0275attribute("aria-label",M.\u0275\u0275pipeBind1(13,32,"Value_Formatting_ARIA_Label_Percentage_Format")),M.\u0275\u0275advance(4),M.\u0275\u0275property("ngClass",M.\u0275\u0275pureFunction1(44,Ne,re.isThousandSeparatorToggled()))("disabled",!re.isNumericFormatEnabled(!0))("pbiTooltip",M.\u0275\u0275pipeBind1(16,34,"Ribbon_Tooltip_DataFormatDecimalPlaces")),M.\u0275\u0275attribute("aria-label",M.\u0275\u0275pipeBind1(17,36,"Value_Formatting_ARIA_Label_Thousands_Separator_Format")),M.\u0275\u0275advance(4),M.\u0275\u0275property("pbiTooltip",M.\u0275\u0275pipeBind1(20,38,"Ribbon_Tooltip_DataFormatDecimalPlaces")),M.\u0275\u0275advance(3),M.\u0275\u0275property("disabled",(null==re.formatInformation?null:re.formatInformation.format)===re.FormatNumberWhole),M.\u0275\u0275advance(1),M.\u0275\u0275property("options",re.options)("useModernStyles",!0)("modelValue",re.formatInformation&&re.formatInformation.accuracy)("isDisabled",!re.isNumericFormatEnabled()||(null==re.formatInformation?null:re.formatInformation.format)===re.FormatNumberWhole)}}function Ae(Y,K){if(1&Y&&(M.\u0275\u0275elementStart(0,"mat-option",7),M.\u0275\u0275text(1),M.\u0275\u0275elementEnd()),2&Y){var ae=K.index,re=M.\u0275\u0275nextContext(3);M.\u0275\u0275property("value",ae)("pbiTooltip",re.categoryListNames[ae]),M.\u0275\u0275advance(1),M.\u0275\u0275textInterpolate1(" ",re.categoryListNames[ae]," ")}}function Ze(Y,K){if(1&Y){var ae=M.\u0275\u0275getCurrentView();M.\u0275\u0275elementContainerStart(0),M.\u0275\u0275elementStart(1,"mat-select",21),M.\u0275\u0275listener("valueChange",function(gt){M.\u0275\u0275restoreView(ae);var bt=M.\u0275\u0275nextContext(2);return M.\u0275\u0275resetView(bt.selectedCategoryList=gt)}),M.\u0275\u0275pipe(2,"localize"),M.\u0275\u0275template(3,Ae,2,3,"mat-option",4),M.\u0275\u0275elementStart(4,"div",22)(5,"button",23),M.\u0275\u0275listener("click",function(){M.\u0275\u0275restoreView(ae);var gt=M.\u0275\u0275nextContext(2);return M.\u0275\u0275resetView(gt.launchCategoryListsEditPane(!1))}),M.\u0275\u0275pipe(6,"localize"),M.\u0275\u0275pipe(7,"localize"),M.\u0275\u0275element(8,"span",24),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(9,"button",25),M.\u0275\u0275listener("click",function(){M.\u0275\u0275restoreView(ae);var gt=M.\u0275\u0275nextContext(2);return M.\u0275\u0275resetView(gt.launchCategoryListsEditPane(!0))}),M.\u0275\u0275pipe(10,"localize"),M.\u0275\u0275pipe(11,"localize"),M.\u0275\u0275element(12,"span",26),M.\u0275\u0275elementEnd()()(),M.\u0275\u0275elementContainerEnd()}if(2&Y){var re=M.\u0275\u0275nextContext(2);M.\u0275\u0275advance(1),M.\u0275\u0275property("value",re.selectedCategoryList),M.\u0275\u0275attribute("aria-label",M.\u0275\u0275pipeBind1(2,7,"Value_Formatting_ARIA_Label_SelectCategoryListDropdown")),M.\u0275\u0275advance(2),M.\u0275\u0275property("ngForOf",re.goalValueCategoryLists),M.\u0275\u0275advance(2),M.\u0275\u0275property("pbiTooltip",M.\u0275\u0275pipeBind1(6,9,"Manage_Lists")),M.\u0275\u0275attribute("aria-label",M.\u0275\u0275pipeBind1(7,11,"Manage_Lists")),M.\u0275\u0275advance(4),M.\u0275\u0275property("pbiTooltip",M.\u0275\u0275pipeBind1(10,13,"Create_A_List")),M.\u0275\u0275attribute("aria-label",M.\u0275\u0275pipeBind1(11,15,"Create_A_List"))}}function $e(Y,K){if(1&Y&&M.\u0275\u0275template(0,Ze,13,17,"ng-container",20),2&Y){var ae=M.\u0275\u0275nextContext();M.\u0275\u0275property("ngIf",(null==ae.goalValueCategoryLists?null:ae.goalValueCategoryLists.length)>0)}}var ie=[{value:"General",label:"Format_Label_General"},{value:"CurrencyCustom",label:"Format_Label_Currency"},{value:"DateTimeGeneralPattern",label:"Format_Label_DateTime"},{value:"NumberDecimal",label:"DataType_Label_Number"},{value:"NumberWhole",label:"DataType_Label_WholeNumber"},{value:"Percentage",label:"Format_Label_Percentage"},{value:"Scientific",label:"Format_Label_Scientific"},{value:"Text",label:"Text"},{value:"Boolean",label:"DataType_Label_Boolean"},{value:"Binary",label:"DataType_Binary"},{value:"Custom",label:"DataType_Label_Categorical"}],Ke=function(){function Y(K,ae,re,rt){this.cultureService=K,this.currencyFormatService=ae,this.dateTimeFormatService=re,this.localizationService=rt,this.formatStringChange=new M.EventEmitter,this.onSelectedCategoryListChange=new M.EventEmitter,this.availableFormats=[],this.options={unitSymbol:"",minValue:0,maxValue:15},this.FormatNumberWhole="NumberWhole",this.formatUtils=new Fe.c(this.cultureService.getFormatInfo()),this.allCurrenciesOptions=K.getAllCurrencySymbolCustomFormatItemsInfo(),this.commonCurrenciesOptions=K.getAllCommonCurrencySymbolCustomFormatItemsInfo(),this.availableCurrencyFormats=this.generateCurrencyFormatInfoMapping(this.allCurrenciesOptions),this.currencyMenu=this.currencyFormatInfoToPbiMenuAdaptor(this.commonCurrenciesOptions,this.allCurrenciesOptions)}return Object.defineProperty(Y.prototype,"formatString",{set:function(ae){this.formatInformation=this.cultureService.tryParse(ae,this.dataType),ae===Y.CategoricalFormatString&&(this.formatInformation.format="Custom"),this.updateCompatibleFormats()},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"dataType",{get:function(){return this._dataType},set:function(ae){this._dataType=ae,this.formatInformation&&(this.isCategorical?this.formatInformation.format="Custom":this.formatInformation=this.cultureService.tryParse(this.formatInformation.formatString,ae)),this.updateCompatibleFormats()},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"goalValueCategoryLists",{get:function(){return this._goalValueCategoryLists},set:function(ae){var re=this;this.supportCategoricalValues&&(this._goalValueCategoryLists=ae,this.categoryListNames=ae.map(function(rt){return re.getCategoryListName(rt)}))},enumerable:!1,configurable:!0}),Y.prototype.ngOnInit=function(){this.updateCompatibleFormats()},Y.prototype.isNumericFormatEnabled=function(K){void 0===K&&(K=!1);var ae=this.dataType,re=this.formatInformation&&this.formatInformation.format;return(re&&K?this.isValidNumericFormat(re):"Custom"!==re)&&(2===ae||3===ae||4===ae||13===ae)},Y.prototype.isThousandSeparatorToggled=function(){return this.formatInformation&&this.formatInformation.thousandSeparator},Y.prototype.isPercentFormatterToggled=function(){return this.formatInformation&&"Percentage"===this.formatInformation.format},Y.prototype.onChangePercentageToggle=function(){var K;this.formatInformation=this.formatInformation&&"Percentage"===this.formatInformation.format?void 0:this.formatUtils.changeFormat(this.dataType,this.formatInformation,"Percentage"),this.formatStringChange.emit(null===(K=this.formatInformation)||void 0===K?void 0:K.formatString)},Y.prototype.onChangeThousandSeparatorToggle=function(){var K;this.formatInformation=this.formatUtils.toggleThousandsSeparator(this.dataType,this.formatInformation),this.formatStringChange.emit(null===(K=this.formatInformation)||void 0===K?void 0:K.formatString)},Y.prototype.onCurrencyClicked=function(){var K;this.formatInformation=this.formatUtils.changeFormat(this.dataType,this.formatInformation,"CurrencyCustom"),this.formatStringChange.emit(null===(K=this.formatInformation)||void 0===K?void 0:K.formatString)},Y.prototype.onCurrencyItemClicked=function(K){this.availableCurrencyFormats=this.generateCurrencyFormatInfoMapping(this.allCurrenciesOptions);var re=this.availableCurrencyFormats.get(K.text);this.formatInformation=this.formatUtils.changeFormat(this.dataType,this.formatInformation,"CurrencyCustom"),this.formatInformation=this.formatUtils.setCurrencyFormat(this.dataType,this.formatInformation,this.formatInformation.format,re.culture,re.symbol,re.positivePattern,re.negativePattern),this.formatStringChange.emit(this.formatInformation.formatString)},Y.prototype.onDecimalPlacesChanged=function(K){this.formatInformation=this.formatUtils.setAccuracy(this.dataType,this.formatInformation,K),this.formatStringChange.emit(this.formatInformation.formatString)},Object.defineProperty(Y.prototype,"selectedFormat",{get:function(){if(!this.formatInformation)return"General";var ae=this.formatInformation.format;switch(this.formatInformation.format){case"CurrencyCustom":ae="CurrencyCustom";break;case"DateTimeCustom":case"DateTimeGeneralPattern":this.formatInformation.dateTimeCustomFormat&&(ae=this.formatInformation.dateTimeCustomFormat.formatString)}return ae},set:function(ae){var re,rt;switch(ae){case"General":this.formatInformation=void 0;break;case"NumberDecimal":case"NumberWhole":case"Percentage":case"CurrencyCustom":case"Scientific":case"Binary":case"Boolean":case"Text":this.formatInformation=this.formatUtils.changeFormat(this.dataType,this.formatInformation,ae);break;case"Custom":this.formatInformation={format:ae,formatString:Y.CategoricalFormatString,thousandSeparator:void 0,currencyFormat:void 0,dateTimeCustomFormat:void 0},_.isEmpty(this.categoryListNames)?(this.selectedCategoryList=-1,this.formatStringChange.emit(null===(re=this.formatInformation)||void 0===re?void 0:re.formatString),this.launchCategoryListsEditPane(!0)):this.selectedCategoryList=0;break;default:var gt=this.dateTimeFormatService.getFormat(ae);this.formatInformation=this.formatUtils.setDateTimeFormat(this.dataType,this.formatInformation,gt.formatType,gt.pattern,gt.formatString)}this.formatStringChange.emit(null===(rt=this.formatInformation)||void 0===rt?void 0:rt.formatString)},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"selectedCategoryList",{get:function(){return this.selectedCategoryListIndex},set:function(ae){this.selectedCategoryListIndex=ae,this.onSelectedCategoryListChange.emit(ae)},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"isCategorical",{get:function(){var ae;return(null===(ae=this.formatInformation)||void 0===ae?void 0:ae.formatString)===Y.CategoricalFormatString},enumerable:!1,configurable:!0}),Y.prototype.currencyFormatInfoToPbiMenuAdaptor=function(K,ae){var re=this.buildCommonCurrencyPbiMenu(K);Ye.fF.assertValue(ae,"ICurrencyFormatInfo[] should not be null");var rt={type:je.iB.Header,text:this.localizationService.get("All_Currency_Symbols"),tooltip:this.localizationService.get("All_Currency_Symbols")};return re.items.push({type:je.iB.Divider}),re.items.push(rt),this.forgeMenuOptions(re,ae)},Y.prototype.buildCommonCurrencyPbiMenu=function(K){var ae={items:[]};Ye.fF.assertValue(K,"ICurrencyFormatInfo[] should not be null");var re={type:je.iB.Header,text:this.localizationService.get("Common_Currency_Symbols"),tooltip:this.localizationService.get("Common_Currency_Symbols")};return ae.items.push(re),this.forgeMenuOptions(ae,K)},Y.prototype.forgeMenuOptions=function(K,ae){for(var re=K,rt=0;rt<ae.length;rt++)re.items.push({id:rt,type:je.iB.Button,text:ae[rt].displayLabel,tooltip:ae[rt].displayLabel,disabled:!1});return re},Y.prototype.generateCurrencyFormatInfoMapping=function(K){var ae=new Map;Ye.fF.assertValue(K,"ICurrencyFormatInfo[] should not be null");for(var re=0,rt=K;re<rt.length;re++){var gt=rt[re];ae.set(gt.displayLabel,gt)}return ae},Y.prototype.isValidNumericFormat=function(K){return"General"===K||"CurrencyGeneral"===K||"CurrencyCustom"===K||"Scientific"===K||"Percentage"===K||"NumberDecimal"===K||"NumberWhole"===K||"Custom"===K},Y.prototype.getCompatibleFormats=function(K){switch(K){case 4:case 3:case 2:var ae=["General","NumberWhole","NumberDecimal","CurrencyCustom","Percentage","Scientific"];return this.supportCategoricalValues&&ae.push("Custom"),ae;case 6:case 7:case 9:return[];case 11:return["Binary"];case 5:return["Boolean"];case 1:case 13:return["Text"];default:return["General"]}},Y.prototype.updateCompatibleFormats=function(){var K=this;switch(this.dataType){case 6:this.availableFormats=_.map(this.dateTimeFormatService.getDateFormats(),function(re){return{value:re.formatString,label:re.displayLabel}});break;case 9:this.availableFormats=_.map(this.dateTimeFormatService.getTimeFormats(),function(re){return{value:re.formatString,label:re.displayLabel}});break;case 7:this.availableFormats=_.map(this.dateTimeFormatService.getCommonFormats(),function(re){return{value:re.formatString,label:re.displayLabel}});break;default:var ae=this.getCompatibleFormats(this.dataType);this.availableFormats=_.filter(_.map(ie,function(re){return{value:re.value,label:K.localizationService.get(re.label)}}),function(re){return _.some(ae,function(rt){return rt===re.value})})}},Y.prototype.getCategoryListName=function(K){if(_.isEmpty(K.name)){var ae=_.map(K.categories,function(re){return re.displayName});return _.join(ae,", ")}return K.name},Y.CategoricalFormatString="CategoricalFormatString",Y.\u0275fac=function(ae){return new(ae||Y)(M.\u0275\u0275directiveInject(e.h),M.\u0275\u0275directiveInject(U),M.\u0275\u0275directiveInject(Ee.u),M.\u0275\u0275directiveInject(Ie.o))},Y.\u0275cmp=M.\u0275\u0275defineComponent({type:Y,selectors:[["value-formatting"]],inputs:{formatString:"formatString",dataType:"dataType",supportCategoricalValues:"supportCategoricalValues",goalValueCategoryLists:"goalValueCategoryLists",selectedCategoryListIndex:"selectedCategoryListIndex",launchCategoryListsEditPane:"launchCategoryListsEditPane"},outputs:{formatStringChange:"formatStringChange",onSelectedCategoryListChange:"onSelectedCategoryListChange"},features:[M.\u0275\u0275ProvidersFeature([{provide:U,useClass:U},{provide:Pe.c,useClass:e.h},{provide:Ee.u,useClass:Ee.u}])],decls:10,vars:11,consts:[[1,"valueFormatterToolbarContainer"],[1,"valueFormatterDropdownGroup",3,"pbiTooltip"],["name","PBIDataFormat_16",1,"icon-format"],["pbiMatSelect","","panelClass","pbi-modern-select-panel","disableOptionCentering","","role","combobox",1,"pbi-modern-select","valueFormatDropdown",3,"value","disabled","valueChange"],[3,"value","pbiTooltip",4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],["categoryListsSelector",""],[3,"value","pbiTooltip"],[1,"valueFormatterToggleButtonsGroup"],[1,"btn","toggleBtn","icon","splitButtonText",3,"disabled","pbiTooltip","click"],["name","CurrencyFormat_16",1,"icon-currency"],[1,"btn","toggleBtn","icon","splitButton",3,"ngClass","pbiMenu","pbiTooltip","disabled","pbiMenuButtonClick"],["name","chevrondownsmall","size","mini",1,"chevrondown"],[1,"btn","toggleBtn","icon","focusOutline",3,"ngClass","disabled","pbiTooltip","click"],["name","Percentage_16"],["name","CommaFormat_16"],[1,"valueFormatterNumUpDownGroup",3,"pbiTooltip"],[1,"icon"],["name","DecreaseDecimals_16",1,"icon-decreaseDecimals",3,"disabled"],["attr.aria-label","'Value_Formatting_ARIA_Label_Decimal_Place_Format' | localize","placeholderText","Auto",1,"numUpDown",3,"options","useModernStyles","modelValue","isDisabled","modelValueChange"],[4,"ngIf"],["pbiMatSelect","","panelClass","pbi-modern-select-panel","disableOptionCentering","","role","combobox",1,"pbi-modern-select","select-category-list-dropdown",3,"value","valueChange"],[1,"edit-category-lists-in-dropdown"],[1,"btn","edit-category-lists-button",3,"pbiTooltip","click"],["localize","Manage_Lists"],[1,"btn","create-category-list-button",3,"pbiTooltip","click"],["localize","Create_A_List"]],template:function(ae,re){if(1&ae&&(M.\u0275\u0275elementStart(0,"div",0)(1,"div",1),M.\u0275\u0275pipe(2,"localize"),M.\u0275\u0275element(3,"pbi-office-icon",2),M.\u0275\u0275elementStart(4,"mat-select",3),M.\u0275\u0275listener("valueChange",function(bt){return re.selectedFormat=bt}),M.\u0275\u0275pipe(5,"localize"),M.\u0275\u0275template(6,X,2,4,"mat-option",4),M.\u0275\u0275elementEnd()(),M.\u0275\u0275template(7,Me,24,46,"ng-container",5),M.\u0275\u0275template(8,$e,1,1,"ng-template",null,6,M.\u0275\u0275templateRefExtractor),M.\u0275\u0275elementEnd()),2&ae){var rt=M.\u0275\u0275reference(9);M.\u0275\u0275advance(1),M.\u0275\u0275property("pbiTooltip",M.\u0275\u0275pipeBind1(2,7,"Value_Formatting_Tooltip_ComboBox")),M.\u0275\u0275advance(3),M.\u0275\u0275property("value",re.selectedFormat)("disabled",re.availableFormats.length<=1),M.\u0275\u0275attribute("aria-label",M.\u0275\u0275pipeBind1(5,9,"Value_Formatting_ARIA_Label_ComboBox")),M.\u0275\u0275advance(2),M.\u0275\u0275property("ngForOf",re.availableFormats),M.\u0275\u0275advance(1),M.\u0275\u0275property("ngIf",!re.isCategorical)("ngIfElse",rt)}},dependencies:[j.NgClass,j.NgForOf,j.NgIf,qe.X,Te.x8,V.CK,be.x4,Je.l8,pe._,Le.m,Be.V,Ue.F],styles:['.focusOutline[_ngcontent-%COMP%]{outline:1px solid var(--fluent-theme-neutral-primary-hover-color, #232322)}.valueFormatterToolbarContainer[_ngcontent-%COMP%]{background-color:inherit;border-top:inherit;display:flex;flex-direction:row;padding:8px 10px}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterDropdownGroup[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:row;padding-right:13px}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterDropdownGroup[_ngcontent-%COMP%]   .valueFormatDropdown[_ngcontent-%COMP%]{background-color:var(--fluent-theme-white-color, #FFF);border:1px solid var(--fluent-theme-neutral-tertiary-alt-color, #C8C6C4);display:table;height:24px;width:150px}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterDropdownGroup[_ngcontent-%COMP%]   .valueFormatDropdown[_ngcontent-%COMP%]     .mat-select-arrow{color:var(--fluent-theme-neutral-primary-color, #323130)}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterDropdownGroup[_ngcontent-%COMP%]   .valueFormatDropdown[_ngcontent-%COMP%]:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color);outline:1px solid var(--fluent-theme-neutral-primary-hover-color, #232322)}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterDropdownGroup[_ngcontent-%COMP%]   .valueFormatOptions[_ngcontent-%COMP%]{height:30px}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterDropdownGroup[_ngcontent-%COMP%]     .mat-select-disabled .mat-select-value{color:var(--fluent-theme-black-color, #000)!important;opacity:.38}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .select-category-list-dropdown[_ngcontent-%COMP%]{width:150px}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .edit-category-lists[_ngcontent-%COMP%]:hover, .valueFormatterToolbarContainer[_ngcontent-%COMP%]   .edit-category-lists[_ngcontent-%COMP%]:active{background-color:var(--fluent-theme-neutral-quarter-alt-color, #E1DFDD)}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterToggleButtonsGroup[_ngcontent-%COMP%]{display:flex;align-items:center}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterToggleButtonsGroup[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{box-shadow:unset;display:inline-block;height:24px;margin:0;outline:unset;padding:0;vertical-align:middle;width:24px}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterToggleButtonsGroup[_ngcontent-%COMP%]   .icon-arrowDown[_ngcontent-%COMP%]{font-size:xx-small}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterToggleButtonsGroup[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterToggleButtonsGroup[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:inherit}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterToggleButtonsGroup[_ngcontent-%COMP%]   .isToggled[_ngcontent-%COMP%]{background-color:var(--fluent-theme-primary-color, #F2C811)!important}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterToggleButtonsGroup[_ngcontent-%COMP%]   .isToggled[_ngcontent-%COMP%]   .pbi-office-icon[_ngcontent-%COMP%]{fill:var(--button-primary-content-color)}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterToggleButtonsGroup[_ngcontent-%COMP%]   .isToggled[_ngcontent-%COMP%]   .pbi-office-icon[_ngcontent-%COMP%]     svg>path.OfficeIconColors_m22{fill:var(--button-primary-content-color)}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterToggleButtonsGroup[_ngcontent-%COMP%]   .splitButton[_ngcontent-%COMP%]{text-align:center;vertical-align:bottom;width:15px}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterToggleButtonsGroup[_ngcontent-%COMP%]   .splitButton[_ngcontent-%COMP%]:focus:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color);outline:1px solid var(--fluent-theme-neutral-primary-hover-color, #232322)}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterToggleButtonsGroup[_ngcontent-%COMP%]   .splitButton[_ngcontent-%COMP%]   .chevrondown[_ngcontent-%COMP%]{display:flex;align-items:center}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterToggleButtonsGroup[_ngcontent-%COMP%]   .btnDisabled[_ngcontent-%COMP%]{cursor:default}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterToggleButtonsGroup[_ngcontent-%COMP%]   .splitButtonText[_ngcontent-%COMP%]{width:16px}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterToggleButtonsGroup[_ngcontent-%COMP%]   .splitButtonText[_ngcontent-%COMP%]:focus:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color);outline:1px solid var(--fluent-theme-neutral-primary-hover-color, #232322)}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterToggleButtonsGroup[_ngcontent-%COMP%]   .focusOutline[_ngcontent-%COMP%]:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color);outline:1px solid var(--fluent-theme-neutral-primary-hover-color, #232322)}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterNumUpDownGroup[_ngcontent-%COMP%]{display:flex;align-items:center}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterNumUpDownGroup[_ngcontent-%COMP%]   .numUpDown[_ngcontent-%COMP%]{margin-left:10px;width:82px}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterNumUpDownGroup[_ngcontent-%COMP%]   .numUpDown[_ngcontent-%COMP%]     .mat-form-field{width:100%}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterNumUpDownGroup[_ngcontent-%COMP%]   .numUpDown[_ngcontent-%COMP%]     .numUpDownWrapper.modern-styles .unit-numupdown{border:1px solid var(--fluent-theme-neutral-tertiary-alt-color, #C8C6C4);background:var(--fluent-theme-white-color, #FFF)}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterNumUpDownGroup[_ngcontent-%COMP%]   .numUpDown[_ngcontent-%COMP%]     .numUpDownWrapper.modern-styles .unit-numupdown .navigationButtons .buttonBox{color:var(--fluent-theme-neutral-primary-color, #323130)}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterNumUpDownGroup[_ngcontent-%COMP%]   .numUpDown[_ngcontent-%COMP%]     .numUpDownWrapper.modern-styles .unit-numupdown .navigationButtons .buttonBox:hover{background-color:transparent}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterNumUpDownGroup[_ngcontent-%COMP%]   .numUpDown[_ngcontent-%COMP%]     .mat-form-field._mat-animation-noopable .mat-form-field-label{height:26px;padding-left:7px}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterNumUpDownGroup[_ngcontent-%COMP%]   .numUpDown[_ngcontent-%COMP%]     input{caret-color:var(--fluent-theme-neutral-tertiary-alt-color, #C8C6C4)}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterNumUpDownGroup[_ngcontent-%COMP%]   .numUpDown[_ngcontent-%COMP%]     .mat-form-field-appearance-legacy .mat-form-field-label{top:12px;left:6.5px}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterNumUpDownGroup[_ngcontent-%COMP%]   .numUpDown[_ngcontent-%COMP%]     .mat-form-field.mat-focused .mat-form-field-label{color:var(--fluent-theme-black-color, #000);opacity:.54}.valueFormatterToolbarContainer[_ngcontent-%COMP%]     .pbi-office-icon{width:16px}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .icon-decreaseDecimals[_ngcontent-%COMP%]{padding-left:4px;padding-top:4px}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .icon-format[_ngcontent-%COMP%]{padding-right:10px;padding-top:2px}.edit-category-lists-in-dropdown[_ngcontent-%COMP%]{border-top:1px solid var(--gray-60, #C8C6C4);display:flex;flex-direction:column}.edit-category-lists-button[_ngcontent-%COMP%], .create-category-list-button[_ngcontent-%COMP%]{width:100%;background-color:transparent;border:none;font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);color:var(--fluent-theme-neutral-primary-color, #323130)}.edit-category-lists-button[_ngcontent-%COMP%]:hover, .create-category-list-button[_ngcontent-%COMP%]:hover, .edit-category-lists-button[_ngcontent-%COMP%]:active, .create-category-list-button[_ngcontent-%COMP%]:active{background-color:var(--fluent-theme-neutral-quarter-alt-color, #E1DFDD)}']}),Y}()},90127:function(ht,wt,T){"use strict";T.d(wt,{D:function(){return Ee}});var S=T(62458),M=T(50423),e=T(83342),U=T(82621),Ee=function(){function Fe(Pe,Ye){this.featureSwitchServices=Pe,this.formatValuePipe=Ye}return Fe.prototype.transform=function(Pe,Ye,je,Ie,j){var qe;return void 0===Ie&&(Ie=!0),void 0===j&&(j="\u2014"),this.featureSwitchServices.featureSwitches.goalsCategoricalValues&&Ye?_.isNil(Pe)?j:(S.fF.assert(function(){return _.isNumber(Pe)},"formatGoalValue transform value"),null===(qe=Ye[Pe])||void 0===qe?void 0:qe.displayName):this.formatValuePipe.transform(Pe,je,Ie,j)},Fe.\u0275fac=function(Ye){return new(Ye||Fe)(M.\u0275\u0275directiveInject(e.vZ,16),M.\u0275\u0275directiveInject(U.c,16))},Fe.\u0275pipe=M.\u0275\u0275definePipe({name:"formatGoalValue",type:Fe,pure:!0}),Fe}()},82621:function(ht,wt,T){"use strict";T.d(wt,{c:function(){return Ee}});var S=T(62458),M=T(58098),e=T(72489),U=T(50423),Ee=function(){function Fe(){}return Fe.prototype.transform=function(Pe,Ye,je,Ie){if(void 0===je&&(je=!0),void 0===Ie&&(Ie="\u2014"),S.fF.assert(function(){return _.isNil(Pe)||Fe.isPrimitiveValue(Pe)},"Should only use FormatValuePipe on PrimitiveValue type"),_.isNil(Pe)||!Fe.isPrimitiveValue(Pe))return Ie;Ye=Ye??Fe.getDefaultFormatString(Pe);var j=(0,e.Ue)({format:Ye,formatSingleValues:!0,columnType:void 0});return je&&_.isNumber(Pe)&&(j=(0,e.Ue)({format:Ye,value:_.isNumber(Pe)?Pe:0,precision:Number.NaN,displayUnitSystemType:M.V.WholeUnits,formatSingleValues:!1,allowFormatBeautification:!0,columnType:void 0})),j.format(Pe)},Fe.getDefaultFormatString=function(Pe){var Ye=Fe.valueTypeDescriptorFromPrimitiveValue(Pe);if(Ye.integer){if(Pe<Fe.MIN_INTEGER_VALUE_FOR_DISPLAY_UNITS)return Fe.INT_FORMAT_STRING_NO_DISPLAY_UNITS;var Ie=(0,e.Ue)({value:_.isNumber(Pe)?Pe:0}).displayUnit.project(Pe);return _.isInteger(Ie)?Fe.INT_FORMAT_STRING_NO_DISPLAY_UNITS:Fe.NUMERIC_FORMAT_STRING}return(0,e.v1)(Ye)},Fe.isPrimitiveValue=function(Pe){return!!(_.isString(Pe)||_.isNumber(Pe)||_.isBoolean(Pe)||_.isDate(Pe))},Fe.valueTypeDescriptorFromPrimitiveValue=function(Pe){return _.isDate(Pe)?{dateTime:!0}:_.isInteger(Pe)?{integer:!0}:_.isNumber(Pe)?{numeric:!0}:_.isBoolean(Pe)?{bool:!0}:_.isString(Pe)?{text:!0}:(S.fF.assert(function(){return!Pe},"Unsupported primitive value"),{none:!0})},Fe.INT_FORMAT_STRING_NO_DISPLAY_UNITS="#,0",Fe.NUMERIC_FORMAT_STRING="#,0.00",Fe.MIN_INTEGER_VALUE_FOR_DISPLAY_UNITS=1e3,Fe.\u0275fac=function(Ye){return new(Ye||Fe)},Fe.\u0275pipe=U.\u0275\u0275definePipe({name:"formatValue",type:Fe,pure:!0}),Fe}()},76777:function(ht,wt,T){"use strict";T.d(wt,{H:function(){return be}}),T(5432);var M=T(90127),e=T(82621),U=T(77476),Ee=T(77274),Fe=T(79061),Pe=T(91382),Ye=T(93367),je=T(94841),Ie=T(45411),j=T(16095),qe=T(50423),Te=T(54485),be=function(){function Je(pe){T.e("value-formatting").then(T.bind(T,24854)).then(function(Le){pe.registerIcons(Le.iconSpriteSheet.sprite)})}return Je.\u0275fac=function(Le){return new(Le||Je)(qe.\u0275\u0275inject(Te.u))},Je.\u0275mod=qe.\u0275\u0275defineNgModule({type:Je}),Je.\u0275inj=qe.\u0275\u0275defineInjector({providers:[M.D,e.c],imports:[U.CommonModule,Fe.v,Ee.uw,Pe.d,je.b,Ye.U,Ie.m,j.Z]}),Je}()},16622:function(ht,wt,T){"use strict";T.d(wt,{_:function(){return Ee},u:function(){return Fe}});var S=T(35510),M=T(17177),e=T(16434),U=T(50423),Ee=function(){function Pe(){}return Pe.prototype.getSvgSpriteSheet=function(Ye){return new S.X('\n            <svg id="'.concat(Ye,'">\n                <?xml version="1.0" encoding="utf-8"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><symbol viewBox="0 0 20 20" id="add_circle_20_filled" xmlns="http://www.w3.org/2000/svg"><path d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zM6 10c0 .28.22.5.5.5h3v3a.5.5 0 001 0v-3h3a.5.5 0 000-1h-3v-3a.5.5 0 00-1 0v3h-3a.5.5 0 00-.5.5z"/></symbol><symbol viewBox="0 0 20 20" id="add_circle_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M6 10c0-.28.22-.5.5-.5h3v-3a.5.5 0 011 0v3h3a.5.5 0 010 1h-3v3a.5.5 0 01-1 0v-3h-3A.5.5 0 016 10z"/><path d="M10 18a8 8 0 100-16 8 8 0 000 16zm0-1a7 7 0 110-14 7 7 0 010 14z"/></symbol><symbol viewBox="0 0 20 20" id="alert_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a5.92 5.92 0 015.98 5.36l.02.22v3.82l.92 2.22a1 1 0 01.06.17l.01.08.01.13a1 1 0 01-.75.97l-.11.02L16 15h-3.5v.17a2.5 2.5 0 01-5 0V15H4a1 1 0 01-.26-.03l-.13-.04a1 1 0 01-.6-1.05l.02-.13.05-.13L4 11.4V7.57A5.9 5.9 0 0110 2zm1.5 13h-3v.15a1.5 1.5 0 001.36 1.34l.14.01c.78 0 1.42-.6 1.5-1.36V15zM10 3a4.9 4.9 0 00-4.98 4.38L5 7.6v3.9l-.04.2L4 14h12l-.96-2.3-.04-.2V7.61A4.9 4.9 0 0010 3z"/></symbol><symbol viewBox="0 0 20 20" id="book_open_20_filled" xmlns="http://www.w3.org/2000/svg"><path d="M10 16.14c-.5.53-1.21.86-2 .86H3.75C2.78 17 2 16.22 2 15.25V4.75C2 3.78 2.78 3 3.75 3H8c.79 0 1.5.33 2 .86.5-.53 1.21-.86 2-.86h4.25c.97 0 1.75.78 1.75 1.75v10.5c0 .97-.78 1.75-1.75 1.75H12c-.79 0-1.5-.33-2-.86zM3.5 4.75v10.5c0 .14.11.25.25.25H8c.69 0 1.25-.56 1.25-1.25v-8.5c0-.69-.56-1.25-1.25-1.25H3.75a.25.25 0 00-.25.25zm7.25 9.5c0 .69.56 1.25 1.25 1.25h4.25c.14 0 .25-.11.25-.25V4.75a.25.25 0 00-.25-.25H12c-.69 0-1.25.56-1.25 1.25v8.5z"/></symbol><symbol viewBox="0 0 20 20" id="book_open_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M10 16c-.46.6-1.18 1-2 1H3.5A1.5 1.5 0 012 15.5v-11C2 3.67 2.67 3 3.5 3H8c.82 0 1.54.4 2 1 .46-.6 1.18-1 2-1h4.5c.83 0 1.5.67 1.5 1.5v11c0 .83-.67 1.5-1.5 1.5H12a2.5 2.5 0 01-2-1zM3 4.5v11c0 .28.22.5.5.5H8c.83 0 1.5-.67 1.5-1.5v-9C9.5 4.67 8.83 4 8 4H3.5a.5.5 0 00-.5.5zm7.5 10c0 .83.67 1.5 1.5 1.5h4.5a.5.5 0 00.5-.5v-11a.5.5 0 00-.5-.5H12c-.83 0-1.5.67-1.5 1.5v9z"/></symbol><symbol viewBox="0 0 20 20" id="checkbox_checked_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M13.85 7.85a.5.5 0 00-.7-.7L8.5 11.79l-1.65-1.64a.5.5 0 00-.7.7l2 2c.2.2.5.2.7 0l5-5z"/><path d="M5.68 3A2.68 2.68 0 003 5.68v8.64C3 15.8 4.2 17 5.68 17h8.64C15.8 17 17 15.8 17 14.32V5.68C17 4.2 15.8 3 14.32 3H5.68zM4 5.68C4 4.75 4.75 4 5.68 4h8.64c.93 0 1.68.75 1.68 1.68v8.64c0 .93-.75 1.68-1.68 1.68H5.68C4.75 16 4 15.25 4 14.32V5.68z"/></symbol><symbol viewBox="0 0 20 20" id="checkbox_unchecked_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M3 5c0-1.1.9-2 2-2h10a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2V5zm2-1a1 1 0 00-1 1v10a1 1 0 001 1h10a1 1 0 001-1V5a1 1 0 00-1-1H5z"/></symbol><symbol viewBox="0 0 20 20" id="checkmark_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M3.37 10.17a.5.5 0 00-.74.66l4 4.5c.19.22.52.23.72.02l10.5-10.5a.5.5 0 00-.7-.7L7.02 14.27l-3.65-4.1z"/></symbol><symbol viewBox="0 0 20 20" id="chevron_down_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M15.85 7.65c.2.2.2.5 0 .7l-5.46 5.49a.55.55 0 01-.78 0L4.14 8.35a.5.5 0 11.71-.7L10 12.8l5.15-5.16c.2-.2.5-.2.7 0z"/></symbol><symbol viewBox="0 0 20 20" id="chevron_left_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M12.35 15.85a.5.5 0 01-.7 0L6.16 10.4a.55.55 0 010-.78l5.49-5.47a.5.5 0 01.7.71L7.2 10l5.16 5.15c.2.2.2.5 0 .7z"/></symbol><symbol viewBox="0 0 20 20" id="chevron_right_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M7.65 4.15c.2-.2.5-.2.7 0l5.49 5.46c.21.22.21.57 0 .78l-5.49 5.46a.5.5 0 01-.7-.7L12.8 10 7.65 4.85a.5.5 0 010-.7z"/></symbol><symbol viewBox="0 0 20 20" id="chevron_up_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M4.15 12.35a.5.5 0 010-.7L9.6 6.16a.55.55 0 01.78 0l5.46 5.49a.5.5 0 01-.7.7L10 7.2l-5.15 5.16a.5.5 0 01-.7 0z"/></symbol><symbol viewBox="0 0 16 16" id="circle_16_filled" xmlns="http://www.w3.org/2000/svg"><path d="M8 14A6 6 0 108 2a6 6 0 000 12z"/></symbol><symbol viewBox="0 0 16 16" id="circle_16_regular" xmlns="http://www.w3.org/2000/svg"><path d="M8 14A6 6 0 108 2a6 6 0 000 12zm0-1A5 5 0 118 3a5 5 0 010 10z"/></symbol><symbol viewBox="0 0 20 20" id="circle_20_filled" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a8 8 0 100 16 8 8 0 000-16z"/></symbol><symbol viewBox="0 0 20 20" id="circle_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M10 3a7 7 0 100 14 7 7 0 000-14zm-8 7a8 8 0 1116 0 8 8 0 01-16 0z"/></symbol><symbol viewBox="0 0 20 20" id="clock_20_filled" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a8 8 0 110 16 8 8 0 010-16zm-.5 3a.5.5 0 00-.5.5v5.09a.5.5 0 00.5.41h3.09a.5.5 0 00-.09-1H10V5.41A.5.5 0 009.5 5z"/></symbol><symbol viewBox="0 0 20 20" id="clock_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a8 8 0 110 16 8 8 0 010-16zm0 1a7 7 0 100 14 7 7 0 000-14zm-.5 2a.5.5 0 01.5.41V10h2.5a.5.5 0 01.09 1H9.5a.5.5 0 01-.5-.41V5.5c0-.28.22-.5.5-.5z"/></symbol><symbol viewBox="0 0 20 20" id="database_20_filled" xmlns="http://www.w3.org/2000/svg"><path d="M10 8c3.31 0 6-1.34 6-3s-2.69-3-6-3-6 1.34-6 3 2.69 3 6 3zm4.69.02c.47-.24.93-.54 1.31-.9V15c0 1.66-2.69 3-6 3s-6-1.34-6-3V7.12c.38.36.84.66 1.31.9C6.56 8.64 8.22 9 10 9c1.78 0 3.44-.36 4.69-.98z"/></symbol><symbol viewBox="0 0 20 20" id="database_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M4 5c0-1 .88-1.76 1.9-2.22C6.98 2.28 8.43 2 10 2c1.57 0 3.02.29 4.1.78C15.12 3.24 16 3.99 16 5v10c0 1-.88 1.76-1.9 2.22-1.08.5-2.53.78-4.1.78-1.57 0-3.02-.29-4.1-.78C4.88 16.76 4 16.01 4 15V5zm1 0c0 .37.36.88 1.32 1.31.91.42 2.22.69 3.68.69s2.77-.27 3.68-.69C14.64 5.88 15 5.37 15 5c0-.37-.36-.88-1.32-1.31A9.19 9.19 0 0010 3c-1.46 0-2.77.27-3.68.69C5.36 4.12 5 4.63 5 5zm10 1.7c-.27.2-.58.38-.9.52-1.08.5-2.53.78-4.1.78-1.57 0-3.02-.29-4.1-.78A4.92 4.92 0 015 6.7V15c0 .37.36.88 1.32 1.31.91.42 2.22.69 3.68.69s2.77-.27 3.68-.69c.96-.43 1.32-.94 1.32-1.31V6.7z"/></symbol><symbol viewBox="0 0 16 16" id="document_16_regular" xmlns="http://www.w3.org/2000/svg"><path d="M5 1a2 2 0 00-2 2v10c0 1.1.9 2 2 2h6a2 2 0 002-2V5.41c0-.4-.16-.78-.44-1.06L9.65 1.44A1.5 1.5 0 008.59 1H5zM4 3a1 1 0 011-1h3v2.5C8 5.33 8.67 6 9.5 6H12v7a1 1 0 01-1 1H5a1 1 0 01-1-1V3zm7.8 2H9.5a.5.5 0 01-.5-.5V2.2L11.8 5z"/></symbol><symbol viewBox="0 0 20 20" id="filter_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M7.5 13h5a.5.5 0 01.09 1H7.5a.5.5 0 01-.09-1h5.09-5zm-2-4h9a.5.5 0 01.09 1H5.5a.5.5 0 01-.09-1h9.09-9zm-2-4h13a.5.5 0 01.09 1H3.5a.5.5 0 01-.09-1H16.5h-13z"/></symbol><symbol viewBox="0 0 20 20" id="folder_20_filled" xmlns="http://www.w3.org/2000/svg"><path d="M10.56 4.5h4.94a2.5 2.5 0 012.48 2.17l.01.17L18 7v7.5a2.5 2.5 0 01-2.34 2.5H4.5A2.5 2.5 0 012 14.66V7.5h5.22c.3-.04.6-.16.83-.36l.1-.1 2.41-2.54zM7.16 3c.28 0 .54.07.77.21l.14.09 1.31.99-1.95 2.05-.06.06a.5.5 0 01-.22.1H2v-1A2.5 2.5 0 014.34 3h2.83z"/></symbol><symbol viewBox="0 0 20 20" id="folder_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M7.17 3c.27 0 .53.07.76.21l.14.09 1.6 1.2h5.83a2.5 2.5 0 012.48 2.17l.01.17L18 7v7.5a2.5 2.5 0 01-2.34 2.5H4.5A2.5 2.5 0 012 14.66V5.5A2.5 2.5 0 014.34 3h2.83zm.99 4.03a1.5 1.5 0 01-.94.46l-.15.01H3v7c0 .78.6 1.42 1.36 1.5H15.5c.78 0 1.42-.6 1.5-1.36V7c0-.78-.6-1.42-1.36-1.5H9.62L8.16 7.03zM7.16 4H4.5c-.78 0-1.42.6-1.5 1.36V6.5h4.07a.5.5 0 00.3-.1l.06-.06L8.7 5.02 7.47 4.1a.5.5 0 00-.22-.1h-.08z"/></symbol><symbol viewBox="0 0 20 20" id="grid_dots_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M5.25 4a1.25 1.25 0 11-2.5 0 1.25 1.25 0 012.5 0zm12 12a1.25 1.25 0 11-2.5 0 1.25 1.25 0 012.5 0zM16 11.25a1.25 1.25 0 100-2.5 1.25 1.25 0 000 2.5zM17.25 4a1.25 1.25 0 11-2.5 0 1.25 1.25 0 012.5 0zM10 17.25a1.25 1.25 0 100-2.5 1.25 1.25 0 000 2.5zM11.25 10a1.25 1.25 0 11-2.5 0 1.25 1.25 0 012.5 0zM10 5.25a1.25 1.25 0 100-2.5 1.25 1.25 0 000 2.5zM5.25 16a1.25 1.25 0 11-2.5 0 1.25 1.25 0 012.5 0zM4 11.25a1.25 1.25 0 100-2.5 1.25 1.25 0 000 2.5z"/></symbol><symbol viewBox="0 0 20 20" id="home_20_filled" xmlns="http://www.w3.org/2000/svg"><path d="M11 2.39a1.5 1.5 0 00-2 0L3.5 7.33c-.32.28-.5.69-.5 1.12v7.05c0 .83.67 1.5 1.5 1.5h2c.83 0 1.5-.67 1.5-1.5v-4c0-.28.22-.5.5-.5h3c.28 0 .5.22.5.5v4c0 .83.67 1.5 1.5 1.5h2c.83 0 1.5-.67 1.5-1.5V8.45c0-.43-.18-.84-.5-1.12L11 2.39z"/></symbol><symbol viewBox="0 0 20 20" id="home_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M9 2.39a1.5 1.5 0 012 0l5.5 4.94c.32.28.5.69.5 1.12v7.05c0 .83-.67 1.5-1.5 1.5H13a1.5 1.5 0 01-1.5-1.5V12a.5.5 0 00-.5-.5H9a.5.5 0 00-.5.5v3.5c0 .83-.67 1.5-1.5 1.5H4.5A1.5 1.5 0 013 15.5V8.45c0-.43.18-.84.5-1.12L9 2.39zm1.33.74a.5.5 0 00-.66 0l-5.5 4.94a.5.5 0 00-.17.38v7.05c0 .28.22.5.5.5H7a.5.5 0 00.5-.5V12c0-.83.67-1.5 1.5-1.5h2c.83 0 1.5.67 1.5 1.5v3.5c0 .28.22.5.5.5h2.5a.5.5 0 00.5-.5V8.45a.5.5 0 00-.17-.38l-5.5-4.94z"/></symbol><symbol viewBox="0 0 20 20" id="megaphone_loud_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M14.16 1.03c.26.08.4.37.31.63l-.5 1.5a.5.5 0 01-.94-.32l.5-1.5a.5.5 0 01.63-.31zm3.7 1.82a.5.5 0 10-.71-.7l-2 2a.5.5 0 00.7.7l2-2zm-10.25.3a2 2 0 013.26-.52l6.58 6.98a2 2 0 01-.64 3.2l-3.94 1.74a3.5 3.5 0 01-6.34 2.8l-1.2.52a1.5 1.5 0 01-1.67-.3l-1.22-1.22a1.5 1.5 0 01-.3-1.7l5.47-11.5zm-.16 13.78a2.5 2.5 0 004.5-1.97l-4.5 1.97zm2.7-13.61a1 1 0 00-1.64.25l-5.46 11.5a.5.5 0 00.1.57l1.22 1.21a.5.5 0 00.55.1L16.4 11.9a1 1 0 00.33-1.6l-6.59-6.98zM17 6a.5.5 0 000 1h1.5a.5.5 0 100-1H17z"/></symbol><symbol viewBox="0 0 16 16" id="pause_16_regular" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 2C2.67 2 2 2.67 2 3.5v9c0 .83.67 1.5 1.5 1.5h2c.83 0 1.5-.67 1.5-1.5v-9C7 2.67 6.33 2 5.5 2h-2zm0 1h2c.28 0 .5.22.5.5v9a.5.5 0 01-.5.5h-2a.5.5 0 01-.5-.5v-9c0-.28.22-.5.5-.5zM10.5 2C9.67 2 9 2.67 9 3.5v9c0 .83.67 1.5 1.5 1.5h2c.83 0 1.5-.67 1.5-1.5v-9c0-.83-.67-1.5-1.5-1.5h-2zm0 1h2c.28 0 .5.22.5.5v9a.5.5 0 01-.5.5h-2a.5.5 0 01-.5-.5v-9c0-.28.22-.5.5-.5z"/></symbol><symbol viewBox="0 0 20 20" id="people_20_filled" xmlns="http://www.w3.org/2000/svg"><path d="M11 10a2 2 0 012 2v1.5c0 2.05-2.09 3.5-5.5 3.5S2 15.55 2 13.5V12c0-1.1.9-2 2-2h7zm5 0a2 2 0 012 2v.5c0 2.09-1.57 3.5-4.5 3.5l-.41-.01c.54-.63.85-1.39.9-2.25l.01-.24V12c0-.7-.23-1.33-.63-1.84l-.13-.16H16zM7.5 2a3.5 3.5 0 110 7 3.5 3.5 0 010-7zm7 2a2.5 2.5 0 110 5 2.5 2.5 0 010-5z"/></symbol><symbol viewBox="0 0 20 20" id="people_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M11 10a2 2 0 012 2v1.5c0 2.05-2.09 3.5-5.5 3.5S2 15.55 2 13.5V12c0-1.1.9-2 2-2h7zm0 1H4a1 1 0 00-1 1v1.5C3 14.9 4.58 16 7.5 16s4.5-1.1 4.5-2.5V12a1 1 0 00-1-1zm5-1a2 2 0 012 2v.5c0 2.09-1.57 3.5-4.5 3.5l-.41-.01c.2-.24.38-.5.52-.78l.1-.21h.03c2.24-.07 3.26-1.04 3.26-2.5V12a1 1 0 00-1-1h-2.17a3 3 0 00-.6-1H16zM7.5 2a3.5 3.5 0 110 7 3.5 3.5 0 010-7zm7 2a2.5 2.5 0 110 5 2.5 2.5 0 010-5zm-7-1a2.5 2.5 0 100 5 2.5 2.5 0 000-5zm7 2a1.5 1.5 0 100 3 1.5 1.5 0 000-3z"/></symbol><symbol viewBox="0 0 16 16" id="play_16_regular" xmlns="http://www.w3.org/2000/svg"><path d="M5.75 3.06A.5.5 0 005 3.5v9c0 .38.41.62.75.44l8-4.5a.5.5 0 000-.88l-8-4.5zM4 3.5a1.5 1.5 0 012.24-1.3l8 4.5a1.5 1.5 0 010 2.6l-8 4.5A1.5 1.5 0 014 12.5v-9z"/></symbol><symbol viewBox="0 0 20 20" id="premium_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M5.5 3a.5.5 0 00-.43.24l-3 5a.5.5 0 00.05.58l7.5 9a.5.5 0 00.76 0l7.5-9a.5.5 0 00.05-.58l-3-5A.5.5 0 0014.5 3h-9zM3.38 8l2.4-4h1.98l-1.6 4H3.38zm2.78 1l2.26 5.83L3.57 9h2.59zM10 16.12L7.23 9h5.54L10 16.12zM7.24 8l1.6-4h2.32l1.6 4H7.24zm6.6 0l-1.6-4h1.98l2.4 4h-2.78zm0 1h2.6l-4.86 5.83L13.84 9z"/></symbol><symbol viewBox="0 0 20 20" id="premium_person_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M5.5 3a.5.5 0 00-.43.24l-3 5a.5.5 0 00.05.58l7.49 9a.5.5 0 00.86-.13L13.84 9h3.9l.14-.18a.5.5 0 00.05-.58l-3-5A.5.5 0 0014.5 3h-9zm7.27 6L10 16.12 7.23 9h5.54zM3.38 8l2.4-4h1.98l-1.6 4H3.38zm2.78 1l2.26 5.83L3.57 9h2.59zm1.08-1l1.6-4h2.32l1.6 4H7.24zm6.6 0l-1.6-4h1.98l2.4 4h-2.78zm1.66 6a2 2 0 100-4 2 2 0 000 4zm0 5c2.5 0 3.5-1.25 3.5-2.5 0-.83-.67-1.5-1.5-1.5h-4c-.83 0-1.5.67-1.5 1.5 0 1.25 1 2.5 3.5 2.5z"/></symbol><symbol viewBox="0 0 20 20" id="question_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M10 3a4 4 0 00-4 4 .5.5 0 001 0 3 3 0 016 0c0 1.25-.7 1.86-1.58 2.62l-.03.03c-.86.73-1.89 1.62-1.89 3.35v.5a.5.5 0 001 0V13c0-1.25.7-1.86 1.58-2.62l.03-.03C12.97 9.62 14 8.73 14 7a4 4 0 00-4-4zM10 17a.75.75 0 100-1.5.75.75 0 000 1.5z"/></symbol><symbol viewBox="0 0 20 20" id="search_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M8.5 3a5.5 5.5 0 014.23 9.02l4.12 4.13a.5.5 0 01-.63.76l-.07-.06-4.13-4.12A5.5 5.5 0 118.5 3zm0 1a4.5 4.5 0 100 9 4.5 4.5 0 000-9z"/></symbol><symbol viewBox="0 0 20 20" id="settings_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M1.91 7.38A8.5 8.5 0 013.7 4.3a.5.5 0 01.54-.13l1.92.68a1 1 0 001.32-.76l.36-2a.5.5 0 01.4-.4 8.53 8.53 0 013.55 0c.2.04.35.2.38.4l.37 2a1 1 0 001.32.76l1.92-.68a.5.5 0 01.54.13 8.5 8.5 0 011.78 3.08c.06.2 0 .4-.15.54l-1.56 1.32a1 1 0 000 1.52l1.56 1.32a.5.5 0 01.15.54 8.5 8.5 0 01-1.78 3.08.5.5 0 01-.54.13l-1.92-.68a1 1 0 00-1.32.76l-.37 2a.5.5 0 01-.38.4 8.53 8.53 0 01-3.56 0 .5.5 0 01-.39-.4l-.36-2a1 1 0 00-1.32-.76l-1.92.68a.5.5 0 01-.54-.13 8.5 8.5 0 01-1.78-3.08.5.5 0 01.15-.54l1.56-1.32a1 1 0 000-1.52L2.06 7.92a.5.5 0 01-.15-.54zm1.06 0l1.3 1.1a2 2 0 010 3.04l-1.3 1.1c.3.79.71 1.51 1.25 2.16l1.6-.58a2 2 0 012.63 1.53l.3 1.67a7.56 7.56 0 002.5 0l.3-1.67a2 2 0 012.64-1.53l1.6.58a7.5 7.5 0 001.24-2.16l-1.3-1.1a2 2 0 010-3.04l1.3-1.1a7.5 7.5 0 00-1.25-2.16l-1.6.58a2 2 0 01-2.63-1.53l-.3-1.67a7.55 7.55 0 00-2.5 0l-.3 1.67A2 2 0 015.81 5.8l-1.6-.58a7.5 7.5 0 00-1.24 2.16zM7.5 10a2.5 2.5 0 115 0 2.5 2.5 0 01-5 0zm1 0a1.5 1.5 0 103 0 1.5 1.5 0 00-3 0z"/></symbol><symbol viewBox="0 0 20 20" id="stack_20_filled" xmlns="http://www.w3.org/2000/svg"><path d="M4 3a2 2 0 00-2 2v6c0 1.1.9 2 2 2h8a2 2 0 002-2V5a2 2 0 00-2-2H4zm.27 11c.34.6.99 1 1.73 1h6a4 4 0 004-4V7a2 2 0 00-1-1.73V11a3 3 0 01-3 3H4.27zm2 2c.34.6.99 1 1.73 1h4a6 6 0 006-6V9a2 2 0 00-1-1.73V11a5 5 0 01-5 5H6.27z"/></symbol><symbol viewBox="0 0 20 20" id="stack_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M2 5c0-1.1.9-2 2-2h8a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V5zm2-1a1 1 0 00-1 1v6a1 1 0 001 1h8a1 1 0 001-1V5a1 1 0 00-1-1H4zm2 11a2 2 0 01-1.73-1H12a3 3 0 003-3V5.27c.6.34 1 .99 1 1.73v4a4 4 0 01-4 4H6zm2 2a2 2 0 01-1.73-1H12a5 5 0 005-5V7.27c.6.34 1 .99 1 1.73v2a6 6 0 01-6 6H8z"/></symbol><symbol viewBox="0 0 20 20" id="star_20_filled" xmlns="http://www.w3.org/2000/svg"><path d="M9.1 2.9a1 1 0 011.8 0l1.93 3.91 4.31.63a1 1 0 01.56 1.7l-3.12 3.05.73 4.3a1 1 0 01-1.45 1.05L10 15.51l-3.86 2.03a1 1 0 01-1.45-1.05l.74-4.3L2.3 9.14a1 1 0 01.56-1.7l4.31-.63L9.1 2.9z"/></symbol><symbol viewBox="0 0 20 20" id="star_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M9.1 2.9a1 1 0 011.8 0l1.93 3.91 4.31.63a1 1 0 01.56 1.7l-3.12 3.05.73 4.3a1 1 0 01-1.45 1.05L10 15.51l-3.86 2.03a1 1 0 01-1.45-1.05l.74-4.3L2.3 9.14a1 1 0 01.56-1.7l4.31-.63L9.1 2.9zm.9.44L8.07 7.25a1 1 0 01-.75.55L3 8.43l3.12 3.04a1 1 0 01.3.89l-.75 4.3 3.87-2.03a1 1 0 01.93 0l3.86 2.03-.74-4.3a1 1 0 01.29-.89L17 8.43l-4.32-.63a1 1 0 01-.75-.55L10 3.35z"/></symbol></svg>\n            </svg>\n        '))},Pe.prototype.getSvgSpriteUrl=function(Ye){return"/images/".concat(Ye,".svg")},Pe.\u0275prov=U.\u0275\u0275defineInjectable({token:Pe,factory:Pe.\u0275fac=function(je){return new(je||Pe)},providedIn:"root"}),Pe}(),Fe=function(){function Pe(){}return Pe.\u0275fac=function(je){return new(je||Pe)},Pe.\u0275mod=U.\u0275\u0275defineNgModule({type:Pe}),Pe.\u0275inj=U.\u0275\u0275defineInjector({providers:[{provide:e.E,useClass:Ee}],imports:[M.T6]}),Pe}()},57746:function(ht,wt,T){"use strict";T.d(wt,{d:function(){return Pe},t:function(){return Ye}});var Ee,Fe,S=T(90341),M=T(50423),e=T(4437),U=T(48138),Pe=function(){function je(){this._vertical=!1,this._inset=!1}return(0,S.Z)(je,[{key:"vertical",get:function(){return this._vertical},set:function(j){this._vertical=(0,e.Ig)(j)}},{key:"inset",get:function(){return this._inset},set:function(j){this._inset=(0,e.Ig)(j)}}]),je}();(Ee=Pe).\u0275fac=function(Ie){return new(Ie||Ee)},Ee.\u0275cmp=M.\u0275\u0275defineComponent({type:Ee,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(Ie,j){2&Ie&&(M.\u0275\u0275attribute("aria-orientation",j.vertical?"vertical":"horizontal"),M.\u0275\u0275classProp("mat-divider-vertical",j.vertical)("mat-divider-horizontal",!j.vertical)("mat-divider-inset",j.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(Ie,j){},styles:[".mat-divider{--mat-divider-width:1px;display:block;margin:0;border-top-style:solid;border-top-color:var(--mat-divider-color);border-top-width:var(--mat-divider-width)}.mat-divider.mat-divider-vertical{border-top:0;border-right-style:solid;border-right-color:var(--mat-divider-color);border-right-width:var(--mat-divider-width)}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],encapsulation:2,changeDetection:0});var Ye=function(){};(Fe=Ye).\u0275fac=function(Ie){return new(Ie||Fe)},Fe.\u0275mod=M.\u0275\u0275defineNgModule({type:Fe}),Fe.\u0275inj=M.\u0275\u0275defineInjector({imports:[U.BQ,U.BQ]})}}]);