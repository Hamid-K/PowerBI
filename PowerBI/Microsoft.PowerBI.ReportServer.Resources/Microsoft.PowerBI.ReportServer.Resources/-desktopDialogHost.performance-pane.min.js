"use strict";(self.webpackChunkdesktopDialogHost=self.webpackChunkdesktopDialogHost||[]).push([["performance-pane"],{25468:function(Zt,W,i){i.r(W),i.d(W,{PerformancePaneModule:function(){return Xt}});var h,t,ue=i(13254),y=i(81337),e=i(50423),fe=i(34763),Y="__@ngrx/effects_create__",ve=function(){function t(r){this.instance=r,this.subscription=new fe.w;for(var n=function(t){return Object.getOwnPropertyNames(t).filter(function(n){return t[n]&&t[n].hasOwnProperty(Y)}).map(function(n){return(0,y.__assign)({propertyName:n},t[n][Y])})}(r),l=0,a=n.map(function(d){return r[d.propertyName]});l<a.length;l++)this.subscription.add(a[l].subscribe())}return t.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},t.\u0275fac=function(n){e.\u0275\u0275invalidFactory()},t.\u0275prov=e.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t}(),Z=new e.InjectionToken("SCOPED_EFFECT_TOKEN"),P=i(67902),$=i(72547),p=i(22433),q=i(86290),w=i(60756),V=i(91401),ee=i(8590),te=i(60661),z=i(10556),Ce=i(48699),ne=i(98665),ye=i(82762),H=i(11547),Pe=i(59973),M=i(14172),we=i(42195),B=i(17653),Me=i(24874),_e=i(81905),xe=i(59822),be=i(8898),Oe=i(29748),oe=i(26898),re=i(83008),Te=i(13702),ie=i(11494),J=i(39503),N=i(85732),Se=i(29866),Ee=function(){function t(r,n,o,l,a,c,d,C,b,S,I,O){var s=this;this.actions$=r,this.contextActivityService=n,this.conceptualSchemaProxy=o,this.dataSources=l,this.displayNameService=a,this.eventBridge=c,this.explorationNavigation=d,this.performanceAnalyzerService=C,this.store=b,this.telemetryService=S,this.visualPlugin=I,this.eventAggregationService=O,this.contextActivity$=(0,w.GW)(function(){return s.contextActivityService.getActivityStream().pipe((0,w.l4)(V.TV,V.Gb,V.xq,V.TH),(0,Pe.h)(function(m){var u=m.properties;return"Visual Container Lifecycle"===u.name||"Execute Change Detection"===u.name||"User Action"===u.name}),(0,M.U)(function(m){return m.properties}),(0,we.zg)(function(m){if((0,p.pK)(m)){var u=(0,p.ym)(m.visualContainerName,s.explorationNavigation);if(u){var v=(0,te.uo)(u,{dataSources:s.dataSources,displayNameService:s.displayNameService,visualPlugin:s.visualPlugin,conceptualSchemaProxy:s.conceptualSchemaProxy});return(0,ye.D)(v).pipe((0,M.U)(function(f){return(0,y.__assign)((0,y.__assign)({},m),{displayName:f})}))}}return(0,H.of)(m)}),(0,B.b)(function(m){s.performanceAnalyzerService.isRecording()&&s.store.dispatch(P.B7({log:m}))}))},{dispatch:!1}),this.copyQueryText$=(0,w.GW)(function(){return s.actions$.pipe((0,w.l4)(P.fc),(0,B.b)(function(m){var v=(0,p.N2)(m.log,function(g){return!(!g.metrics||!g.metrics.QueryText)},function(g,T){return g});if(v.length>0){s.copyPasteService||(s.copyPasteService=(0,Ce.Ue)());var f=_.reduce(v,function(g,T){var k;switch(T.name){case"Execute DAX Query":k="DAX Query";break;case"Execute Direct Query":k="Direct Query";break;default:k="Query"}return"".concat(g).concat(g?"\n\n":"","// ").concat(k,"\n").concat(T.metrics.QueryText,"\n")},"");s.copyPasteService.copyText(f)}s.telemetryService.logEvent(z.MMo)}),(0,M.U)(function(){return P.zq()}))}),this.inspectDaxQuery$=(0,w.GW)(function(){return s.actions$.pipe((0,w.l4)(P.PP),(0,B.b)(function(m){var u=m.log,v=(0,p.N2)(u,function(g){return!(!g.metrics||!g.metrics.QueryText||"Execute DAX Query"!==g.name)},function(g,T){return g});s.isValidQuery(u,v)&&(s.eventAggregationService.publish("InspectDaxQuery",{content:v[0].metrics.QueryText}),s.telemetryService.logEvent(z.Nsy))}))}),this.exportLogs$=(0,w.GW)(function(){return s.actions$.pipe((0,w.l4)(P.NP),(0,Me.b)(function(m){return(0,H.of)(m).pipe((0,w.IC)(function(){return s.store.select(q.LB)}),(0,M.U)(function(u){return u[1]}))}),(0,_e.w)(function(m){var u=s.telemetryService.startEvent(z.Im5,{numLogs:m.length});return(0,H.of)(m).pipe((0,M.U)(function(v){for(var f=[],g=function(A){if((0,p.pK)(A)){var D=A,Wt=(0,p.ym)(D.visualContainerName,s.explorationNavigation),de=(0,te.PQ)(Wt),Yt={status:D.status,visualTitle:D.displayName,visualId:D.visualContainerName,visualType:de&&de.visualType,initialLoad:D.initialLoad};f=f.concat((0,p.N2)(D,function(L){return!0},function(L,K){return s.generateLifecycleEventJson(L,K,Yt)}))}else if((0,p.n2)(A)){var me=A;f=f.concat((0,p.N2)(me,function(L){return!0},function(L,K){return s.generateLifecycleEventJson(L,K,me.metrics)}))}else f.push(s.generateUserActionEventJson(A))},T=0,k=v;T<k.length;T++)g(k[T]);return{version:"1.1.0",events:f,sessionId:s.telemetryService.sessionId}}),(0,B.b)(function(v){u.resolve(),s.eventBridge.publishToChannel(ee.TrJ,{isComplete:!0,isError:!1,format:"Json",fileName:"PowerBIPerformanceData.json",data:JSON.stringify(v)})}),(0,M.U)(function(){return P.FA()}),(0,xe.K)(function(v,f){return u.reject(v.message),f}))}))})}return t.prototype.isValidQuery=function(r,n){return!_.isEmpty(n)&&!_.isEmpty(n[0].metrics.QueryText)},t.prototype.generateLifecycleEventJson=function(r,n,o){return{name:r.name,component:r.component,start:new Date(r.start).toISOString(),end:r.end?new Date(r.end).toISOString():void 0,id:r.id,parentId:n?n.id:void 0,metrics:n?r.metrics:o}},t.prototype.generateUserActionEventJson=function(r){return{name:"User Action",component:$.I,start:new Date(r.time).toISOString(),id:r.id,metrics:{sourceLabel:r.sourceLabel}}},t.\u0275fac=function(n){return new(n||t)(e.\u0275\u0275inject(w.eX),e.\u0275\u0275inject(Oe.r),e.\u0275\u0275inject(oe.i),e.\u0275\u0275inject(re.D),e.\u0275\u0275inject(Te.O),e.\u0275\u0275inject(ie.J),e.\u0275\u0275inject(J.z),e.\u0275\u0275inject($.a),e.\u0275\u0275inject(N.yh),e.\u0275\u0275inject(ne.y0),e.\u0275\u0275inject(Se.D),e.\u0275\u0275inject(be.x))},t.\u0275prov=e.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t}(),ae=i(35510),le=i(59017),Ae=i(18353),Le=i(77526),Ve=i(57243),ze=i(44294),Be=i(21024),X=i(65181),Ne=i(39631),je=i(9380),x=i(77476),j=i(59968),R=i(50057),G=i(70410),E=i(44408),Re=i(54932),Qe=i(35756),Fe=i(21023),Ue=i(47808),$e=i(24548),He=i(30794),Je=i(63057),ce=i(83317),Xe=i(68082),Ge=i(21728),Q=i(62458),F=i(64560);(t=h||(h={})).createItemSeparator=function(){return{type:F.iB.Divider}},t.createPerformancePaneMenuItem=function(l,a,c,d){return void 0===d&&(d=!1),{text:c.getOptional(l)||l,id:a.action,type:F.iB.Button,checked:d,checkable:!0}},t.createPerformancePaneSubMenuItem=function(l,a,c){return{text:a.getOptional(l)||l,type:F.iB.SubMenu,menu:{items:c}}};var Ke=i(72262),We=i(5467),U=i(21661);function Ye(t,r){if(1&t&&e.\u0275\u0275element(0,"span",5),2&t){var n=e.\u0275\u0275nextContext();e.\u0275\u0275property("className",n.cssClass)}}function Ze(t,r){if(1&t&&(e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(0,"svg"),e.\u0275\u0275element(1,"use"),e.\u0275\u0275elementEnd()),2&t){var n=e.\u0275\u0275nextContext();e.\u0275\u0275styleProp("width",n.size+"px")("height",n.size+"px"),e.\u0275\u0275advance(1),e.\u0275\u0275attribute("href",n.svgId)("href",n.svgId,null,"xlink")}}function qe(t,r){if(1&t&&e.\u0275\u0275element(0,"img",6),2&t){var n=e.\u0275\u0275nextContext();e.\u0275\u0275property("src",n.imgSource,e.\u0275\u0275sanitizeUrl)}}function et(t,r){1&t&&e.\u0275\u0275element(0,"span",7)}var tt=function(){function t(){this.size=16,this.empty=!0,this.hidden=!1}return t.prototype.ngOnChanges=function(r){if(r.src)if(this.src){var n=this.src.toLowerCase();this.cssClass=n.endsWith(".css")?this.src.substr(0,this.src.length-4):null,this.svgId=n.endsWith(".svg")?"#"+this.src.substr(0,this.src.length-4):null,this.imgSource=n.endsWith(".png")||n.endsWith(".jpg")||n.endsWith(".gif")?this.src:null}else this.cssClass=this.svgId=this.imgSource=null;this.empty=!this.cssClass&&!this.svgId&&!this.imgSource},t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.\u0275\u0275defineComponent({type:t,selectors:[["icon"]],inputs:{src:"src",size:"size",hidden:"hidden"},features:[e.\u0275\u0275NgOnChangesFeature],decls:5,vars:10,consts:[[1,"icon-container"],[3,"className",4,"ngIf"],[3,"width","height",4,"ngIf"],[3,"src",4,"ngIf"],["class","icon-red-dot",4,"ngIf"],[3,"className"],[3,"src"],[1,"icon-red-dot"]],template:function(n,o){1&n&&(e.\u0275\u0275elementStart(0,"span",0),e.\u0275\u0275template(1,Ye,1,1,"span",1),e.\u0275\u0275template(2,Ze,2,6,"svg",2),e.\u0275\u0275template(3,qe,1,1,"img",3),e.\u0275\u0275template(4,et,1,0,"span",4),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275styleProp("opacity",o.hidden?0:1)("width",o.size+"px")("height",o.size+"px"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!o.hidden&&o.cssClass),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!o.hidden&&o.svgId),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!o.hidden&&o.imgSource),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!o.hidden&&o.empty))},dependencies:[x.NgIf],styles:[".icon-container[_ngcontent-%COMP%]{overflow:hidden}.icon-container.hidden[_ngcontent-%COMP%]{opacity:0}.icon-container[_ngcontent-%COMP%]   use[_ngcontent-%COMP%]{pointer-events:none}.icon-red-dot[_ngcontent-%COMP%]{background:#FF0000;border-radius:5px}"]}),t}(),nt=i(73425),ot=function(){function t(r){this.localizationService=r}return t.prototype.transform=function(r,n){return"".concat(this.localizationService.get("Name")," ").concat(this.localizationService.get(r),". ").concat(this.localizationService.get("Duration")," ").concat(n,".")},t.\u0275fac=function(n){return new(n||t)(e.\u0275\u0275directiveInject(X.o,16))},t.\u0275pipe=e.\u0275\u0275definePipe({name:"activityDurationAriaLabel",type:t,pure:!0}),t}();function rt(t,r){1&t&&e.\u0275\u0275element(0,"spinner",7),2&t&&e.\u0275\u0275property("delay",0)}function it(t,r){if(1&t&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){var n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.viewModel.totalTime.formattedTime)}}function at(t,r){1&t&&e.\u0275\u0275element(0,"spinner",7),2&t&&e.\u0275\u0275property("delay",0)}function lt(t,r){if(1&t&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){var n=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.viewModel.daxQueryTime.formattedTime)}}function ct(t,r){if(1&t&&(e.\u0275\u0275elementStart(0,"tr",15),e.\u0275\u0275pipe(1,"activityDurationAriaLabel"),e.\u0275\u0275elementStart(2,"td",10),e.\u0275\u0275element(3,"span",16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"td",4),e.\u0275\u0275template(5,at,1,1,"spinner",5),e.\u0275\u0275template(6,lt,2,1,"span",6),e.\u0275\u0275elementEnd()()),2&t){var n=e.\u0275\u0275nextContext(2);e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind2(1,3,"PerformanceAnalyzerPane_Dax_Query",null==n.viewModel.daxQueryTime?null:n.viewModel.daxQueryTime.formattedTime)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",!(null!=n.viewModel.daxQueryTime&&n.viewModel.daxQueryTime.formattedTime)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==n.viewModel.daxQueryTime?null:n.viewModel.daxQueryTime.formattedTime)}}function st(t,r){1&t&&e.\u0275\u0275element(0,"spinner",7),2&t&&e.\u0275\u0275property("delay",0)}function pt(t,r){if(1&t&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){var n=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.viewModel.directQueryTime.formattedTime)}}function dt(t,r){if(1&t&&(e.\u0275\u0275elementStart(0,"tr",15),e.\u0275\u0275pipe(1,"activityDurationAriaLabel"),e.\u0275\u0275elementStart(2,"td",10),e.\u0275\u0275element(3,"span",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"td",4),e.\u0275\u0275template(5,st,1,1,"spinner",5),e.\u0275\u0275template(6,pt,2,1,"span",6),e.\u0275\u0275elementEnd()()),2&t){var n=e.\u0275\u0275nextContext(2);e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind2(1,3,"PerformanceAnalyzerPane_Direct_Query",null==n.viewModel.directQueryTime?null:n.viewModel.directQueryTime.formattedTime)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",!(null!=n.viewModel.directQueryTime&&n.viewModel.directQueryTime.formattedTime)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==n.viewModel.directQueryTime?null:n.viewModel.directQueryTime.formattedTime)}}function mt(t,r){1&t&&e.\u0275\u0275element(0,"spinner",7),2&t&&e.\u0275\u0275property("delay",0)}function ut(t,r){if(1&t&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){var n=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.viewModel.resolveParametersTime.formattedTime)}}function ft(t,r){if(1&t&&(e.\u0275\u0275elementStart(0,"tr",15),e.\u0275\u0275pipe(1,"activityDurationAriaLabel"),e.\u0275\u0275elementStart(2,"td",10),e.\u0275\u0275element(3,"span",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"td",4),e.\u0275\u0275template(5,mt,1,1,"spinner",5),e.\u0275\u0275template(6,ut,2,1,"span",6),e.\u0275\u0275elementEnd()()),2&t){var n=e.\u0275\u0275nextContext(2);e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind2(1,3,"PerformanceAnalyzerPane_Resolve_Parameters",null==n.viewModel.resolveParametersTime?null:n.viewModel.resolveParametersTime.formattedTime)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",!(null!=n.viewModel.resolveParametersTime&&n.viewModel.resolveParametersTime.formattedTime)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==n.viewModel.resolveParametersTime?null:n.viewModel.resolveParametersTime.formattedTime)}}function gt(t,r){1&t&&e.\u0275\u0275element(0,"spinner",7),2&t&&e.\u0275\u0275property("delay",0)}function vt(t,r){if(1&t&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){var n=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.viewModel.visualRenderTime.formattedTime)}}function ht(t,r){if(1&t&&(e.\u0275\u0275elementStart(0,"tr",15),e.\u0275\u0275pipe(1,"activityDurationAriaLabel"),e.\u0275\u0275elementStart(2,"td",10),e.\u0275\u0275element(3,"span",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"td",4),e.\u0275\u0275template(5,gt,1,1,"spinner",5),e.\u0275\u0275template(6,vt,2,1,"span",6),e.\u0275\u0275elementEnd()()),2&t){var n=e.\u0275\u0275nextContext(2);e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind2(1,3,"PerformanceAnalyzerPane_Direct_Query",null==n.viewModel.visualRenderTime?null:n.viewModel.visualRenderTime.formattedTime)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",!(null!=n.viewModel.visualRenderTime&&n.viewModel.visualRenderTime.formattedTime)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==n.viewModel.visualRenderTime?null:n.viewModel.visualRenderTime.formattedTime)}}function Ct(t,r){1&t&&e.\u0275\u0275element(0,"spinner",7),2&t&&e.\u0275\u0275property("delay",0)}function yt(t,r){if(1&t&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){var n=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.viewModel.otherTime.formattedTime)}}function Pt(t,r){if(1&t&&(e.\u0275\u0275elementStart(0,"tr",15),e.\u0275\u0275pipe(1,"activityDurationAriaLabel"),e.\u0275\u0275elementStart(2,"td",10),e.\u0275\u0275element(3,"span",20),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"td",4),e.\u0275\u0275template(5,Ct,1,1,"spinner",5),e.\u0275\u0275template(6,yt,2,1,"span",6),e.\u0275\u0275elementEnd()()),2&t){var n=e.\u0275\u0275nextContext(2);e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind2(1,3,"GroupingDefinition_OtherGroupName",null==n.viewModel.otherTime?null:n.viewModel.otherTime.formattedTime)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",!(null!=n.viewModel.otherTime&&n.viewModel.otherTime.formattedTime)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==n.viewModel.otherTime?null:n.viewModel.otherTime.formattedTime)}}function wt(t,r){if(1&t){var n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr",9),e.\u0275\u0275listener("keydown.enter",function(){e.\u0275\u0275restoreView(n);var a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.onRunInDaxView.emit(a.viewModel.performanceLog))}),e.\u0275\u0275elementStart(1,"td",10)(2,"button",21),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);var a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.onRunInDaxView.emit(a.viewModel.performanceLog))}),e.\u0275\u0275element(3,"icon",22)(4,"span",23),e.\u0275\u0275elementEnd()()()}if(2&t){var o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",o.viewModel.performanceLog.status!==o.ResolvedActivityStatus||o.viewModel.daxQueryTime&&void 0===o.viewModel.daxQueryTime.numericTime)}}function Mt(t,r){if(1&t){var n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,ct,7,6,"tr",8),e.\u0275\u0275template(2,dt,7,6,"tr",8),e.\u0275\u0275template(3,ft,7,6,"tr",8),e.\u0275\u0275template(4,ht,7,6,"tr",8),e.\u0275\u0275template(5,Pt,7,6,"tr",8),e.\u0275\u0275elementStart(6,"tr",9),e.\u0275\u0275listener("keydown.enter",function(){e.\u0275\u0275restoreView(n);var a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.onCopy.emit(a.viewModel.performanceLog))}),e.\u0275\u0275elementStart(7,"td",10)(8,"button",11),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);var a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.onCopy.emit(a.viewModel.performanceLog))}),e.\u0275\u0275element(9,"mat-icon",12)(10,"span",13),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(11,"td",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(12,wt,5,1,"tr",14),e.\u0275\u0275elementContainerEnd()}if(2&t){var o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",void 0!==(null==o.viewModel.daxQueryTime?null:o.viewModel.daxQueryTime.numericTime)&&"-"!==(null==o.viewModel.daxQueryTime?null:o.viewModel.daxQueryTime.formattedTime)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",void 0!==(null==o.viewModel.directQueryTime?null:o.viewModel.directQueryTime.numericTime)&&"-"!==(null==o.viewModel.directQueryTime?null:o.viewModel.directQueryTime.formattedTime)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",void 0!==(null==o.viewModel.resolveParametersTime?null:o.viewModel.resolveParametersTime.numericTime)&&"-"!==(null==o.viewModel.resolveParametersTime?null:o.viewModel.resolveParametersTime.formattedTime)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",o.viewModel.visualRenderTime&&void 0!==(null==o.viewModel.visualRenderTime?null:o.viewModel.visualRenderTime.numericTime)&&"-"!==(null==o.viewModel.visualRenderTime?null:o.viewModel.visualRenderTime.formattedTime)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",void 0!==(null==o.viewModel.otherTime?null:o.viewModel.otherTime.numericTime)&&"-"!==(null==o.viewModel.otherTime?null:o.viewModel.otherTime.formattedTime)),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",o.viewModel.performanceLog.status!==o.ResolvedActivityStatus||o.viewModel.daxQueryTime&&void 0===o.viewModel.daxQueryTime.numericTime||o.hasBeenCopied),e.\u0275\u0275advance(1),e.\u0275\u0275property("fontIcon",o.hasBeenCopied?"pbi-glyph-checkmark":"pbi-glyph-copy"),e.\u0275\u0275advance(1),e.\u0275\u0275property("localize",o.hasBeenCopied?"PerformanceAnalyzerPane_Copied":"PerformanceAnalyzerPane_Copy_Details"),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",o.showRunInDaxView)}}var _t=function(r,n){return{itemExpanded:r,itemCollapsed:n,visualLifecycle:!0}},xt=function(){function t(){this.ResolvedActivityStatus=1,this.showRunInDaxView=!1,this.onClick=new e.EventEmitter,this.onCopy=new e.EventEmitter,this.onRunInDaxView=new e.EventEmitter}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.\u0275\u0275defineComponent({type:t,selectors:[["performance-lifecycle-activity"]],inputs:{viewModel:"viewModel",isExpanded:"isExpanded",hasBeenCopied:"hasBeenCopied",showRunInDaxView:"showRunInDaxView"},outputs:{onClick:"onClick",onCopy:"onCopy",onRunInDaxView:"onRunInDaxView"},decls:9,vars:11,consts:[["tabindex","0","role","treeitem button",3,"ngClass","keydown.arrowright","keydown.arrowleft","keydown.enter","keydown.space","click"],["tabindex","0",1,"nameCol"],["inline","true",1,"glyph-mini","performanceTableIcon",3,"fontIcon"],[1,"parentName"],[1,"durationCol"],["size","small",3,"delay",4,"ngIf"],[4,"ngIf"],["size","small",3,"delay"],["class","itemExpanded","role","treeitem","tabindex","0",4,"ngIf"],["tabindex","0","role","treeitem button",1,"itemExpanded",3,"keydown.enter"],[1,"nameCol"],["mat-flat-button","",1,"copyBtn",3,"disabled","click"],[1,"glyph-small",3,"fontIcon"],[1,"copyName",3,"localize"],["class","itemExpanded","tabindex","0","role","treeitem button",3,"keydown.enter",4,"ngIf"],["role","treeitem","tabindex","0",1,"itemExpanded"],["localize","PerformanceAnalyzerPane_Dax_Query","localizeTooltip","PerformanceAnalyzerPane_Dax_Query_Description",1,"childName"],["localize","PerformanceAnalyzerPane_Direct_Query","localizeTooltip","PerformanceAnalyzerPane_Direct_Query_Description",1,"childName"],["localize","PerformanceAnalyzerPane_Resolve_Parameters","localizeTooltip","PerformanceAnalyzerPane_Resolve_Parameters_Description",1,"childName"],["localize","PerformanceAnalyzerPane_Visual_Display","localizeTooltip","PerformanceAnalyzerPane_Visual_Display_Description",1,"childName"],["localize","GroupingDefinition_OtherGroupName","localizeTooltip","PerformanceAnalyzerPane_Other_Desc",1,"childName"],["mat-flat-button","",1,"runInDaxViewBtn",3,"disabled","click"],["src","view-daxEditor.svg","size","20",1,"viewDaxEditorIcon"],["localize","Dax_Query_View_RunIn",1,"runInDaxView"]],template:function(n,o){1&n&&(e.\u0275\u0275elementStart(0,"tr",0),e.\u0275\u0275listener("keydown.arrowright",function(a){return o.onClick.emit({event:a,log:o.viewModel.performanceLog,expandState:!0})})("keydown.arrowleft",function(a){return o.onClick.emit({event:a,log:o.viewModel.performanceLog,expandState:!1})})("keydown.enter",function(a){return o.onClick.emit({event:a,log:o.viewModel.performanceLog})})("keydown.space",function(a){return o.onClick.emit({event:a,log:o.viewModel.performanceLog})})("click",function(a){return o.onClick.emit({event:a,log:o.viewModel.performanceLog})}),e.\u0275\u0275elementStart(1,"td",1),e.\u0275\u0275element(2,"mat-icon",2),e.\u0275\u0275elementStart(3,"span",3),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"td",4),e.\u0275\u0275template(6,rt,1,1,"spinner",5),e.\u0275\u0275template(7,it,2,1,"span",6),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(8,Mt,13,9,"ng-container",6)),2&n&&(e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(8,_t,o.isExpanded,!o.isExpanded)),e.\u0275\u0275attribute("aria-expanded",o.isExpanded)("aria-label",o.viewModel.ariaLabel),e.\u0275\u0275advance(2),e.\u0275\u0275property("fontIcon",o.isExpanded?"pbi-glyph-collapse-content-single":"pbi-glyph-explore-content-single"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(o.viewModel.performanceLog.displayName),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!(null!=o.viewModel.totalTime&&o.viewModel.totalTime.formattedTime)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==o.viewModel.totalTime?null:o.viewModel.totalTime.formattedTime),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",o.isExpanded))},dependencies:[x.NgClass,x.NgIf,tt,j.X,R.r,G.eB,E.Hw,nt.O,ot],styles:['.textOverflowCommon[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}tr[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;justify-content:space-between}.itemExpanded[_ngcontent-%COMP%]{background-color:var(--neutral-primary-color, #333333)}.nameCol[_ngcontent-%COMP%]{height:16px;display:flex;align-items:center;min-width:45px;flex-grow:1;padding:2px}.nameCol[_ngcontent-%COMP%]   .actionName[_ngcontent-%COMP%], .nameCol[_ngcontent-%COMP%]   .parentName[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;min-width:20px;margin-left:4px}.nameCol[_ngcontent-%COMP%]   .actionName[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .nameCol[_ngcontent-%COMP%]   .parentName[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding-left:0}.nameCol[_ngcontent-%COMP%]   .interactName[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;min-width:20px;margin-left:24px}.nameCol[_ngcontent-%COMP%]   .interactName[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding-left:0}.nameCol[_ngcontent-%COMP%]   .childName[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;min-width:20px;margin-left:24px}.nameCol[_ngcontent-%COMP%]   .copyName[_ngcontent-%COMP%]{height:20px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.nameCol[_ngcontent-%COMP%]   .performanceTableIcon[_ngcontent-%COMP%]{font-family:PowrMDL2;display:flex;align-items:center;justify-content:center;height:20px;width:20px;min-width:20px}.visualLifecycle[_ngcontent-%COMP%]{cursor:pointer}.visualLifecycle[_ngcontent-%COMP%]:hover{background-color:var(--neutral-primary-color-alt3, #515151)}.durationCol[_ngcontent-%COMP%]{height:16px;min-width:94px;margin-right:4px;text-align:right;padding:2px}.line[_ngcontent-%COMP%]{height:0;border-bottom:1px solid var(--neutral-secondary-alt-color, #777777);flex-grow:1;margin-left:4px;margin-right:2px}.copyBtn[_ngcontent-%COMP%], .runInDaxViewBtn[_ngcontent-%COMP%]{color:var(--theme-primary-color, #F2C811);background-color:transparent;margin-left:22px;font-size:12px;min-width:20px}html[data-focus-source="key"][_nghost-%COMP%]   [_ngcontent-%COMP%]:focus, html[data-focus-source="key"]   [_nghost-%COMP%]   [_ngcontent-%COMP%]:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color);outline-offset:-1px}[_ngcontent-%COMP%]:focus{outline:none}[_nghost-%COMP%]  .mat-flat-button .mat-button-wrapper{height:20px;display:flex;align-items:center}[_nghost-%COMP%]  .mat-flat-button mat-icon{display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]  mat-icon{font-family:PowrMDL2;font-size:12px;height:20px;width:20px}.newPaneColors[_nghost-%COMP%], .newPaneColors   [_nghost-%COMP%]{--item-background-color: var(--gray-50, #D2D0CE);--link-color: var(--dark-blue, #2B579A);--item-background-hover-color: var(--gray-30, #EDEBE9);--border-color: var(--gray-40, #E1DFDD)}[data-legacy-theme=false]   .newPaneColors[_nghost-%COMP%], .newPaneColors   [_nghost-%COMP%]{--item-background-color: var(--colorNeutralBackground2);--link-color: var(--colorBrandForegroundLink);--item-background-hover-color: var(--colorNeutralBackground2Hover);--border-color: var(--colorNeutralStroke1)}.newPaneColors[_nghost-%COMP%]   .itemExpanded[_ngcontent-%COMP%], .newPaneColors   [_nghost-%COMP%]   .itemExpanded[_ngcontent-%COMP%]{background-color:var(--item-background-color)}.newPaneColors[_nghost-%COMP%]   .visualLifecycle[_ngcontent-%COMP%]:hover, .newPaneColors   [_nghost-%COMP%]   .visualLifecycle[_ngcontent-%COMP%]:hover{background-color:var(--item-background-hover-color)}.newPaneColors[_nghost-%COMP%]   .line[_ngcontent-%COMP%], .newPaneColors   [_nghost-%COMP%]   .line[_ngcontent-%COMP%]{border-color:var(--border-color)}.newPaneColors[_nghost-%COMP%]   .copyBtn[_ngcontent-%COMP%], .newPaneColors   [_nghost-%COMP%]   .copyBtn[_ngcontent-%COMP%], .newPaneColors[_nghost-%COMP%]   .runInDaxViewBtn[_ngcontent-%COMP%], .newPaneColors   [_nghost-%COMP%]   .runInDaxViewBtn[_ngcontent-%COMP%]{background-color:transparent;color:var(--link-color)}.newPaneColors[_nghost-%COMP%]   .copyBtn[_ngcontent-%COMP%]:disabled, .newPaneColors   [_nghost-%COMP%]   .copyBtn[_ngcontent-%COMP%]:disabled, .newPaneColors[_nghost-%COMP%]   .runInDaxViewBtn[_ngcontent-%COMP%]:disabled, .newPaneColors   [_nghost-%COMP%]   .runInDaxViewBtn[_ngcontent-%COMP%]:disabled{background-color:transparent;color:#767676}'],changeDetection:0}),t}();function bt(t,r){if(1&t&&(e.\u0275\u0275elementStart(0,"i"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){var n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" (",n.viewModel.startTime.formattedTime,")")}}var Ot=function(){function t(){this.startedMonitoringLabel="UserAction_StartedMonitoring"}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.\u0275\u0275defineComponent({type:t,selectors:[["user-action-activity"]],inputs:{viewModel:"viewModel"},decls:9,vars:5,consts:[["role","treeitem","tabindex","0"],[1,"nameCol"],[1,"glyph-mini","performanceTableIcon",3,"fontIcon"],[1,"actionName",3,"localizeTooltip"],[3,"localize"],[4,"ngIf"],[1,"line"],[1,"durationCol"]],template:function(n,o){1&n&&(e.\u0275\u0275elementStart(0,"tr",0)(1,"td",1),e.\u0275\u0275element(2,"mat-icon",2),e.\u0275\u0275elementStart(3,"span",3),e.\u0275\u0275element(4,"i",4),e.\u0275\u0275template(5,bt,2,1,"i",5),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(6,"span",6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"td",7),e.\u0275\u0275text(8,"-"),e.\u0275\u0275elementEnd()()),2&n&&(e.\u0275\u0275attribute("aria-label",o.viewModel.ariaLabel),e.\u0275\u0275advance(2),e.\u0275\u0275property("fontIcon",o.viewModel.icon),e.\u0275\u0275advance(1),e.\u0275\u0275property("localizeTooltip",o.viewModel.performanceLog.sourceLabel===o.startedMonitoringLabel?o.viewModel.performanceLog.sourceLabel:o.viewModel.performanceLog.sourceLabel+"_Description"),e.\u0275\u0275advance(1),e.\u0275\u0275property("localize",o.viewModel.performanceLog.sourceLabel),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(null==o.viewModel.startTime?null:o.viewModel.startTime.formattedTime)&&o.viewModel.performanceLog.sourceLabel===o.startedMonitoringLabel))},dependencies:[x.NgIf,j.X,R.r,E.Hw],styles:['.textOverflowCommon[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}tr[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;justify-content:space-between}.itemExpanded[_ngcontent-%COMP%]{background-color:var(--neutral-primary-color, #333333)}.nameCol[_ngcontent-%COMP%]{height:16px;display:flex;align-items:center;min-width:45px;flex-grow:1;padding:2px}.nameCol[_ngcontent-%COMP%]   .actionName[_ngcontent-%COMP%], .nameCol[_ngcontent-%COMP%]   .parentName[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;min-width:20px;margin-left:4px}.nameCol[_ngcontent-%COMP%]   .actionName[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .nameCol[_ngcontent-%COMP%]   .parentName[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding-left:0}.nameCol[_ngcontent-%COMP%]   .interactName[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;min-width:20px;margin-left:24px}.nameCol[_ngcontent-%COMP%]   .interactName[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding-left:0}.nameCol[_ngcontent-%COMP%]   .childName[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;min-width:20px;margin-left:24px}.nameCol[_ngcontent-%COMP%]   .copyName[_ngcontent-%COMP%]{height:20px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.nameCol[_ngcontent-%COMP%]   .performanceTableIcon[_ngcontent-%COMP%]{font-family:PowrMDL2;display:flex;align-items:center;justify-content:center;height:20px;width:20px;min-width:20px}.visualLifecycle[_ngcontent-%COMP%]{cursor:pointer}.visualLifecycle[_ngcontent-%COMP%]:hover{background-color:var(--neutral-primary-color-alt3, #515151)}.durationCol[_ngcontent-%COMP%]{height:16px;min-width:94px;margin-right:4px;text-align:right;padding:2px}.line[_ngcontent-%COMP%]{height:0;border-bottom:1px solid var(--neutral-secondary-alt-color, #777777);flex-grow:1;margin-left:4px;margin-right:2px}.copyBtn[_ngcontent-%COMP%], .runInDaxViewBtn[_ngcontent-%COMP%]{color:var(--theme-primary-color, #F2C811);background-color:transparent;margin-left:22px;font-size:12px;min-width:20px}html[data-focus-source="key"][_nghost-%COMP%]   [_ngcontent-%COMP%]:focus, html[data-focus-source="key"]   [_nghost-%COMP%]   [_ngcontent-%COMP%]:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color);outline-offset:-1px}[_ngcontent-%COMP%]:focus{outline:none}[_nghost-%COMP%]  .mat-flat-button .mat-button-wrapper{height:20px;display:flex;align-items:center}[_nghost-%COMP%]  .mat-flat-button mat-icon{display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]  mat-icon{font-family:PowrMDL2;font-size:12px;height:20px;width:20px}.newPaneColors[_nghost-%COMP%], .newPaneColors   [_nghost-%COMP%]{--item-background-color: var(--gray-50, #D2D0CE);--link-color: var(--dark-blue, #2B579A);--item-background-hover-color: var(--gray-30, #EDEBE9);--border-color: var(--gray-40, #E1DFDD)}[data-legacy-theme=false]   .newPaneColors[_nghost-%COMP%], .newPaneColors   [_nghost-%COMP%]{--item-background-color: var(--colorNeutralBackground2);--link-color: var(--colorBrandForegroundLink);--item-background-hover-color: var(--colorNeutralBackground2Hover);--border-color: var(--colorNeutralStroke1)}.newPaneColors[_nghost-%COMP%]   .itemExpanded[_ngcontent-%COMP%], .newPaneColors   [_nghost-%COMP%]   .itemExpanded[_ngcontent-%COMP%]{background-color:var(--item-background-color)}.newPaneColors[_nghost-%COMP%]   .visualLifecycle[_ngcontent-%COMP%]:hover, .newPaneColors   [_nghost-%COMP%]   .visualLifecycle[_ngcontent-%COMP%]:hover{background-color:var(--item-background-hover-color)}.newPaneColors[_nghost-%COMP%]   .line[_ngcontent-%COMP%], .newPaneColors   [_nghost-%COMP%]   .line[_ngcontent-%COMP%]{border-color:var(--border-color)}.newPaneColors[_nghost-%COMP%]   .copyBtn[_ngcontent-%COMP%], .newPaneColors   [_nghost-%COMP%]   .copyBtn[_ngcontent-%COMP%], .newPaneColors[_nghost-%COMP%]   .runInDaxViewBtn[_ngcontent-%COMP%], .newPaneColors   [_nghost-%COMP%]   .runInDaxViewBtn[_ngcontent-%COMP%]{background-color:transparent;color:var(--link-color)}.newPaneColors[_nghost-%COMP%]   .copyBtn[_ngcontent-%COMP%]:disabled, .newPaneColors   [_nghost-%COMP%]   .copyBtn[_ngcontent-%COMP%]:disabled, .newPaneColors[_nghost-%COMP%]   .runInDaxViewBtn[_ngcontent-%COMP%]:disabled, .newPaneColors   [_nghost-%COMP%]   .runInDaxViewBtn[_ngcontent-%COMP%]:disabled{background-color:transparent;color:#767676}'],changeDetection:0}),t}();function Tt(t,r){if(1&t&&e.\u0275\u0275element(0,"user-action-activity",14),2&t){var n=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275property("viewModel",n)}}function St(t,r){if(1&t){var n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"performance-lifecycle-activity",15),e.\u0275\u0275listener("onClick",function(c){e.\u0275\u0275restoreView(n);var d=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(d.onClickVisualLifecycle(c))})("onCopy",function(c){e.\u0275\u0275restoreView(n);var d=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(d.copyDetails(c))})("onRunInDaxView",function(c){e.\u0275\u0275restoreView(n);var d=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(d.runInDaxView(c))}),e.\u0275\u0275elementEnd()}if(2&t){var o=e.\u0275\u0275nextContext().$implicit,l=e.\u0275\u0275nextContext();e.\u0275\u0275property("viewModel",o)("isExpanded",l.expandedLogs[o.performanceLog.id])("hasBeenCopied",l.copiedLogs[o.performanceLog.id])("showRunInDaxView",l.supportDaxQueryView)}}function It(t,r){if(1&t){var n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"performance-lifecycle-activity",16),e.\u0275\u0275listener("onClick",function(c){e.\u0275\u0275restoreView(n);var d=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(d.onClickLifecycle(c))})("onCopy",function(c){e.\u0275\u0275restoreView(n);var d=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(d.copyDetails(c))}),e.\u0275\u0275elementEnd()}if(2&t){var o=e.\u0275\u0275nextContext().$implicit,l=e.\u0275\u0275nextContext();e.\u0275\u0275property("viewModel",o)("isExpanded",l.expandedLogs[o.performanceLog.id])("hasBeenCopied",l.copiedLogs[o.performanceLog.id])}}function kt(t,r){1&t&&(e.\u0275\u0275elementStart(0,"tr",17)(1,"td",18)(2,"span",19),e.\u0275\u0275element(3,"i",20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"td",21),e.\u0275\u0275text(5,"-"),e.\u0275\u0275elementEnd()())}function Dt(t,r){if(1&t&&(e.\u0275\u0275elementContainerStart(0)(1,9),e.\u0275\u0275template(2,Tt,1,1,"user-action-activity",10),e.\u0275\u0275template(3,St,1,4,"performance-lifecycle-activity",11),e.\u0275\u0275template(4,It,1,3,"performance-lifecycle-activity",12),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(5,kt,6,0,"tr",13),e.\u0275\u0275elementContainerEnd()),2&t){var n=r.$implicit,o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitch",n.logType),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",o.PerformanceLogType.UserAction),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",o.PerformanceLogType.VisualContainer),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",o.PerformanceLogType.UtilityQuery),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",o.showInteractMessage)}}var At=function(){function t(r,n,o,l,a,c,d,C,b){var S=this;this.conceptualSchemaProxy=r,this.dataSources=n,this.explorationNavigation=o,this.localizationService=l,this.pbiMenuService=a,this.selection=c,this.store=d,this.changeDetectorRef=C,this.dataModelService=b,this.sortUpdate=new e.EventEmitter,this.PerformanceLogType=p.n6,this.PerformanceSortDirection=p.wN,this.onDestroy$=new He.xQ,this.supportDaxQueryView=this.dataModelService.getModelAuthoringCapabilities().supportsDaxQueryView,this.dataModelService.modelChanged$.pipe((0,ce.R)(this.onDestroy$)).subscribe(function(I){var O=!!I?.modelAuthoringCapabilities.supportsDaxQueryView;O!==S.supportDaxQueryView&&(S.supportDaxQueryView=O,S.changeDetectorRef.markForCheck())})}return t.prototype.ngOnInit=function(){this.expandedLogs={},this.copiedLogs={},this.activeTimeouts={}},t.prototype.showContextMenu=function(r){return(0,y.__awaiter)(this,void 0,void 0,function(){var n,o,l,a,c=this;return(0,y.__generator)(this,function(d){switch(d.label){case 0:return r.stopPropagation(),n=this,[4,this.getDirectQueryMode()];case 1:return n.directQueryMode=d.sent(),o={element:r.currentTarget,x:r.pageX,y:r.pageY},l={menu:this.createMenuItems(),origin:o,menuMode:F.Kb.Compact},(a=this.pbiMenuService.open(l)).onButtonClick$.pipe((0,ce.R)((0,Je.T)(a.onClose$,this.onDestroy$))).subscribe(function(C){c.selectMenuItem(C.id),a.close()}),[2]}})})},t.prototype.getDirectQueryMode=function(){return(0,y.__awaiter)(this,void 0,void 0,function(){var r,n,o,l,c,d,C;return(0,y.__generator)(this,function(b){switch(b.label){case 0:return r=this.dataSources.get(),[4,this.conceptualSchemaProxy.get(r)];case 1:for(n=b.sent(),o=0,l=n.schemas;o<l.length;o++)for(c=0,d=l[o].entities;c<d.length;c++)if(1===(C=d[c]).source.mode||2===C.source.mode||4===C.source.mode)return[2,!0];return[2,!1]}})})},t.prototype.copyDetails=function(r){var n=this;if((0,p.pK)(r)||(0,p.n2)(r)){this.copiedLogs[r.id]=!0;var o=setTimeout(function(){n.copiedLogs[r.id]=!1,delete n.activeTimeouts[o]},8e3);this.activeTimeouts[o]=!0,this.store.dispatch(P.fc({log:r}))}else Q.fF.assertFail("Copy details should only be on visual container lifecycle or utility query lifecycle logs.")},t.prototype.runInDaxView=function(r){return(0,y.__awaiter)(this,void 0,void 0,function(){return(0,y.__generator)(this,function(n){return(0,p.pK)(r)?(this.store.dispatch(P.PP({log:r})),[2]):(Q.fF.assertFail("Copy details should only be on visual container lifecycle logs."),[2])})})},t.prototype.isItemCopied=function(r){return this.copiedLogs[r]},t.prototype.isItemExpanded=function(r){return this.expandedLogs[r]},t.prototype.onClickLifecycle=function(r){var n=r.event;this.setExpandState(r.log.id,r.expandState),n.stopPropagation()},t.prototype.onClickVisualLifecycle=function(r){var n=r.log;(0,p.pK)(n)&&(this.onClickLifecycle(r),this.selectVisualContainer(n.visualContainerName))},t.prototype.setExpandState=function(r,n){this.expandedLogs[r]=void 0===n?!this.expandedLogs[r]:n},t.prototype.selectVisualContainer=function(r){var o=this.explorationNavigation.getCurrentSection().visualContainers.find(function(c){return c.name===r});if(!o){var l=this.explorationNavigation.getAllSections(),a=l.findIndex(function(c){return c.visualContainers.find(function(d){return d.name===r})});a>-1&&(this.explorationNavigation.updateActiveSection({targetSectionIndex:a,parentActivity:void 0}),o=l[a].visualContainers.find(function(c){return c.name===r}))}this.selection.clearSelection(),o&&Ge.UP.selectCanvasItem(o,this.selection)},t.prototype.createMenuItems=function(){return{items:[h.createPerformancePaneMenuItem("DaxTemplates_AscendingDirection",{action:0},this.localizationService,this.sort.direction===p.wN.Ascending),h.createPerformancePaneMenuItem("DaxTemplates_DescendingDirection",{action:1},this.localizationService,this.sort.direction===p.wN.Descending),h.createItemSeparator(),h.createPerformancePaneSubMenuItem("MobileFooter_SortBy",this.localizationService,this.createChildrenItems())]}},t.prototype.createChildrenItems=function(){var r=[];return r.push(h.createPerformancePaneMenuItem("PerformanceAnalyzerPane_TotalTime",{action:5},this.localizationService,this.sort.type===p.aV.TotalTime)),r.push(h.createPerformancePaneMenuItem("PerformanceAnalyzerPane_ActionOrder",{action:2},this.localizationService,this.sort.type===p.aV.Chronological)),r.push(h.createPerformancePaneMenuItem("PerformanceAnalyzerPane_Dax_Query",{action:3},this.localizationService,this.sort.type===p.aV.DaxQuery)),this.directQueryMode&&r.push(h.createPerformancePaneMenuItem("PerformanceAnalyzerPane_Direct_Query",{action:4},this.localizationService,this.sort.type===p.aV.DirectQuery)),r.push(h.createPerformancePaneMenuItem("PerformanceAnalyzerPane_Resolve_Parameters",{action:7},this.localizationService,this.sort.type===p.aV.ResolveParameters)),r.push(h.createPerformancePaneMenuItem("PerformanceAnalyzerPane_Visual_Display",{action:6},this.localizationService,this.sort.type===p.aV.VisualRender)),r},t.prototype.selectMenuItem=function(r){switch(Q.fF.assertValue(r,"Expected a menu item."),r){case 0:this.sortUpdate.emit({direction:p.wN.Ascending,type:this.sort.type});break;case 1:this.sortUpdate.emit({direction:p.wN.Descending,type:this.sort.type});break;case 5:this.sortUpdate.emit({direction:this.sort.direction,type:p.aV.TotalTime});break;case 2:this.sortUpdate.emit({direction:this.sort.direction,type:p.aV.Chronological});break;case 3:this.sortUpdate.emit({direction:this.sort.direction,type:p.aV.DaxQuery});break;case 4:this.sortUpdate.emit({direction:this.sort.direction,type:p.aV.DirectQuery});break;case 7:this.sortUpdate.emit({direction:this.sort.direction,type:p.aV.ResolveParameters});break;case 6:this.sortUpdate.emit({direction:this.sort.direction,type:p.aV.VisualRender});break;default:Q.fF.assertNever(r)}},t.prototype.ngOnDestroy=function(){for(var r in this.onDestroy$.next(),this.onDestroy$.complete(),this.activeTimeouts)clearTimeout(+r)},t.\u0275fac=function(n){return new(n||t)(e.\u0275\u0275directiveInject(oe.i),e.\u0275\u0275directiveInject(re.D),e.\u0275\u0275directiveInject(J.z),e.\u0275\u0275directiveInject(X.o),e.\u0275\u0275directiveInject(We.o),e.\u0275\u0275directiveInject(Ke.z),e.\u0275\u0275directiveInject(N.yh),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(Xe.n))},t.\u0275cmp=e.\u0275\u0275defineComponent({type:t,selectors:[["performance-activity-timeline"]],inputs:{performanceLogsViewModel:"performanceLogsViewModel",showInteractMessage:"showInteractMessage",sort:"sort"},outputs:{sortUpdate:"sortUpdate"},decls:10,vars:2,consts:[["role","banner",1,"headerRow"],["localize","Name","role","heading","tabindex","0",1,"headerCol","item"],["localize","Duration_Ms","role","heading","tabindex","0",1,"headerCol","duration"],["tabindex","0","inline","true","localizeTooltip","Sort_ToolTip",1,"performancePaneContextMenuBtn",3,"click","keydown.enter"],[1,"glyph-mini",3,"fontIcon"],["tabindex","-1",1,"verticalSeparator"],["itemSize","20"],["role","tree"],[4,"cdkVirtualFor","cdkVirtualForOf"],[3,"ngSwitch"],[3,"viewModel",4,"ngSwitchCase"],[3,"viewModel","isExpanded","hasBeenCopied","showRunInDaxView","onClick","onCopy","onRunInDaxView",4,"ngSwitchCase"],[3,"viewModel","isExpanded","hasBeenCopied","onClick","onCopy",4,"ngSwitchCase"],["role","treeitem","tabindex","0",4,"ngIf"],[3,"viewModel"],[3,"viewModel","isExpanded","hasBeenCopied","showRunInDaxView","onClick","onCopy","onRunInDaxView"],[3,"viewModel","isExpanded","hasBeenCopied","onClick","onCopy"],["role","treeitem","tabindex","0"],[1,"nameCol"],[1,"interactName"],["localize","PerformanceAnalyzerPane_Interact"],[1,"durationCol"]],template:function(n,o){1&n&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"h6",1)(2,"h6",2),e.\u0275\u0275elementStart(3,"button",3),e.\u0275\u0275listener("click",function(a){return o.showContextMenu(a)})("keydown.enter",function(a){return o.showContextMenu(a)}),e.\u0275\u0275element(4,"mat-icon",4),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(5,"div",5),e.\u0275\u0275elementStart(6,"cdk-virtual-scroll-viewport",6)(7,"table")(8,"tbody",7),e.\u0275\u0275template(9,Dt,6,5,"ng-container",8),e.\u0275\u0275elementEnd()()()),2&n&&(e.\u0275\u0275advance(4),e.\u0275\u0275property("fontIcon",o.sort.direction===o.PerformanceSortDirection.Ascending?"pbi-glyph-sortdown":"pbi-glyph-sortup"),e.\u0275\u0275advance(5),e.\u0275\u0275property("cdkVirtualForOf",o.performanceLogsViewModel))},dependencies:[x.NgIf,x.NgSwitch,x.NgSwitchCase,j.X,R.r,E.Hw,U.xd,U.x0,U.N7,xt,Ot],styles:[".textOverflowCommon[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}[_nghost-%COMP%]{display:flex;padding-left:8px;padding-right:8px;padding-bottom:12px;flex-direction:column;flex-grow:1;flex-basis:0;position:relative;overflow:hidden}.headerRow[_ngcontent-%COMP%]{display:flex;align-items:center;height:20px;flex-shrink:0;border:1px solid var(--neutral-secondary-color, #666666);background:var(--neutral-secondary-alt-color, #777777);border-bottom:none}.headerRow[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{height:16px;width:16px}.headerCol[_ngcontent-%COMP%]{flex-grow:1;display:flex;align-items:center}.headerCol.item[_ngcontent-%COMP%]{padding-left:8px}.headerCol.duration[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;justify-content:left;max-width:74px}cdk-virtual-scroll-viewport[_ngcontent-%COMP%]{--viewport-border-color: var(--neutral-secondary-color, #666666);flex-grow:1;border:1px solid var(--viewport-border-color)}[data-legacy-theme=false] cdk-virtual-scroll-viewport[_ngcontent-%COMP%]{--viewport-border-color: var(--colorNeutralStroke1)}table[_ngcontent-%COMP%]{width:100%;table-layout:fixed}.verticalSeparator[_ngcontent-%COMP%]{position:absolute;top:22px;height:calc(100% - 34px);right:110px;z-index:1;background-color:transparent;border-left:1px solid var(--neutral-secondary-color, #666666)}.performancePaneContextMenuBtn[_ngcontent-%COMP%]{--icon-background-color: var(--theme-secondary-alt-color, #444444);display:flex;justify-content:center;align-items:center;height:16px;width:16px;background-color:var(--icon-background-color);margin-left:2px;margin-right:4px}[data-legacy-theme=false][_ngcontent-%COMP%]   .performancePaneContextMenuBtn[_ngcontent-%COMP%]{--icon-background-color: var(--colorNeutralBackground1)}.performancePaneContextMenuBtn[_ngcontent-%COMP%]:hover{cursor:pointer}.newPaneColors[_nghost-%COMP%], .newPaneColors   [_nghost-%COMP%]{--header-background-color: var(--gray-40, #E1DFDD);--header-row-border-color: var(--gray-60, #C8C6C4);--header-row-button-background-color: var(--gray-20, #F3F2F1)}[data-legacy-theme=false]   .newPaneColors[_nghost-%COMP%], .newPaneColors   [_nghost-%COMP%]{--header-background-color: var(--colorNeutralBackground1);--header-row-border-color: var(--colorNeutralStroke1);--header-row-button-background-color: var(--colorNeutralBackground2)}.newPaneColors[_nghost-%COMP%]   .headerRow[_ngcontent-%COMP%], .newPaneColors   [_nghost-%COMP%]   .headerRow[_ngcontent-%COMP%]{background:var(--header-background-color);border-color:var(--header-row-border-color)}.newPaneColors[_nghost-%COMP%]   cdk-virtual-scroll-viewport[_ngcontent-%COMP%], .newPaneColors   [_nghost-%COMP%]   cdk-virtual-scroll-viewport[_ngcontent-%COMP%]{border-color:var(--header-row-border-color)}.newPaneColors[_nghost-%COMP%]   .verticalSeparator[_ngcontent-%COMP%], .newPaneColors   [_nghost-%COMP%]   .verticalSeparator[_ngcontent-%COMP%]{border-color:var(--header-row-border-color)}.newPaneColors[_nghost-%COMP%]   .performancePaneContextMenuBtn[_ngcontent-%COMP%], .newPaneColors   [_nghost-%COMP%]   .performancePaneContextMenuBtn[_ngcontent-%COMP%]{background-color:var(--header-row-button-background-color)}",'.textOverflowCommon[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}tr[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;justify-content:space-between}.itemExpanded[_ngcontent-%COMP%]{background-color:var(--neutral-primary-color, #333333)}.nameCol[_ngcontent-%COMP%]{height:16px;display:flex;align-items:center;min-width:45px;flex-grow:1;padding:2px}.nameCol[_ngcontent-%COMP%]   .actionName[_ngcontent-%COMP%], .nameCol[_ngcontent-%COMP%]   .parentName[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;min-width:20px;margin-left:4px}.nameCol[_ngcontent-%COMP%]   .actionName[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .nameCol[_ngcontent-%COMP%]   .parentName[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding-left:0}.nameCol[_ngcontent-%COMP%]   .interactName[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;min-width:20px;margin-left:24px}.nameCol[_ngcontent-%COMP%]   .interactName[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding-left:0}.nameCol[_ngcontent-%COMP%]   .childName[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;min-width:20px;margin-left:24px}.nameCol[_ngcontent-%COMP%]   .copyName[_ngcontent-%COMP%]{height:20px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.nameCol[_ngcontent-%COMP%]   .performanceTableIcon[_ngcontent-%COMP%]{font-family:PowrMDL2;display:flex;align-items:center;justify-content:center;height:20px;width:20px;min-width:20px}.visualLifecycle[_ngcontent-%COMP%]{cursor:pointer}.visualLifecycle[_ngcontent-%COMP%]:hover{background-color:var(--neutral-primary-color-alt3, #515151)}.durationCol[_ngcontent-%COMP%]{height:16px;min-width:94px;margin-right:4px;text-align:right;padding:2px}.line[_ngcontent-%COMP%]{height:0;border-bottom:1px solid var(--neutral-secondary-alt-color, #777777);flex-grow:1;margin-left:4px;margin-right:2px}.copyBtn[_ngcontent-%COMP%], .runInDaxViewBtn[_ngcontent-%COMP%]{color:var(--theme-primary-color, #F2C811);background-color:transparent;margin-left:22px;font-size:12px;min-width:20px}html[data-focus-source="key"][_nghost-%COMP%]   [_ngcontent-%COMP%]:focus, html[data-focus-source="key"]   [_nghost-%COMP%]   [_ngcontent-%COMP%]:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color);outline-offset:-1px}[_ngcontent-%COMP%]:focus{outline:none}[_nghost-%COMP%]  .mat-flat-button .mat-button-wrapper{height:20px;display:flex;align-items:center}[_nghost-%COMP%]  .mat-flat-button mat-icon{display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]  mat-icon{font-family:PowrMDL2;font-size:12px;height:20px;width:20px}.newPaneColors[_nghost-%COMP%], .newPaneColors   [_nghost-%COMP%]{--item-background-color: var(--gray-50, #D2D0CE);--link-color: var(--dark-blue, #2B579A);--item-background-hover-color: var(--gray-30, #EDEBE9);--border-color: var(--gray-40, #E1DFDD)}[data-legacy-theme=false]   .newPaneColors[_nghost-%COMP%], .newPaneColors   [_nghost-%COMP%]{--item-background-color: var(--colorNeutralBackground2);--link-color: var(--colorBrandForegroundLink);--item-background-hover-color: var(--colorNeutralBackground2Hover);--border-color: var(--colorNeutralStroke1)}.newPaneColors[_nghost-%COMP%]   .itemExpanded[_ngcontent-%COMP%], .newPaneColors   [_nghost-%COMP%]   .itemExpanded[_ngcontent-%COMP%]{background-color:var(--item-background-color)}.newPaneColors[_nghost-%COMP%]   .visualLifecycle[_ngcontent-%COMP%]:hover, .newPaneColors   [_nghost-%COMP%]   .visualLifecycle[_ngcontent-%COMP%]:hover{background-color:var(--item-background-hover-color)}.newPaneColors[_nghost-%COMP%]   .line[_ngcontent-%COMP%], .newPaneColors   [_nghost-%COMP%]   .line[_ngcontent-%COMP%]{border-color:var(--border-color)}.newPaneColors[_nghost-%COMP%]   .copyBtn[_ngcontent-%COMP%], .newPaneColors   [_nghost-%COMP%]   .copyBtn[_ngcontent-%COMP%], .newPaneColors[_nghost-%COMP%]   .runInDaxViewBtn[_ngcontent-%COMP%], .newPaneColors   [_nghost-%COMP%]   .runInDaxViewBtn[_ngcontent-%COMP%]{background-color:transparent;color:var(--link-color)}.newPaneColors[_nghost-%COMP%]   .copyBtn[_ngcontent-%COMP%]:disabled, .newPaneColors   [_nghost-%COMP%]   .copyBtn[_ngcontent-%COMP%]:disabled, .newPaneColors[_nghost-%COMP%]   .runInDaxViewBtn[_ngcontent-%COMP%]:disabled, .newPaneColors   [_nghost-%COMP%]   .runInDaxViewBtn[_ngcontent-%COMP%]:disabled{background-color:transparent;color:#767676}'],changeDetection:0}),t}();function Lt(t,r){if(1&t){var n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"pbi-pane-section",24)(1,"div",25)(2,"div",7)(3,"button",26),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);var a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.clearPerformanceLogs())}),e.\u0275\u0275element(4,"mat-icon",27)(5,"span",28),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"button",29),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);var a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.exportPerformanceData())}),e.\u0275\u0275element(7,"mat-icon",30)(8,"span",31),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(9,"performance-activity-timeline",32),e.\u0275\u0275listener("sortUpdate",function(a){e.\u0275\u0275restoreView(n);var c=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(c.sortSubject.next(a))}),e.\u0275\u0275pipe(10,"async"),e.\u0275\u0275pipe(11,"async"),e.\u0275\u0275pipe(12,"async"),e.\u0275\u0275elementEnd()()}if(2&t){var o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(9),e.\u0275\u0275property("sort",e.\u0275\u0275pipeBind1(10,3,o.sortSubject))("performanceLogsViewModel",e.\u0275\u0275pipeBind1(11,5,o.performanceLogsViewModels$))("showInteractMessage",e.\u0275\u0275pipeBind1(12,7,o.showInteractMessage$))}}function Vt(t,r){1&t&&(e.\u0275\u0275elementStart(0,"pbi-pane-section",33),e.\u0275\u0275element(1,"span",34),e.\u0275\u0275elementEnd())}function zt(t,r){if(1&t){var n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"pbi-pane",1),e.\u0275\u0275listener("onCollapse",function(){e.\u0275\u0275restoreView(n);var c=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(c.onPaneCollapsed())})("onToggle",function(){e.\u0275\u0275restoreView(n);var c=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(c.togglePane())}),e.\u0275\u0275elementStart(1,"pbi-pane-section",2)(2,"div",3)(3,"button",4),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);var c=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(c.setMonitorState(!0))}),e.\u0275\u0275pipe(4,"async"),e.\u0275\u0275element(5,"mat-icon",5)(6,"span",6),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"div",7)(8,"button",8),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);var c=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(c.refreshReport())}),e.\u0275\u0275pipe(9,"async"),e.\u0275\u0275element(10,"mat-icon",9)(11,"span",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"button",11),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);var c=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(c.setMonitorState(!1))}),e.\u0275\u0275pipe(13,"async"),e.\u0275\u0275element(14,"mat-icon",12)(15,"span",13),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(16,"pbi-pane-divider"),e.\u0275\u0275elementStart(17,"pbi-pane-section",14),e.\u0275\u0275template(18,Lt,13,9,"pbi-pane-section",15),e.\u0275\u0275pipe(19,"async"),e.\u0275\u0275template(20,Vt,2,0,"pbi-pane-section",16),e.\u0275\u0275pipe(21,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(22,"pbi-pane-divider"),e.\u0275\u0275elementStart(23,"pbi-pane-section",17)(24,"div",18),e.\u0275\u0275element(25,"span",19)(26,"a",20)(27,"span",21)(28,"span",22)(29,"a",23)(30,"span",21),e.\u0275\u0275elementEnd()()()}if(2&t){var o=r.ngIf,l=e.\u0275\u0275nextContext();e.\u0275\u0275property("expanded",o.isPaneExpanded)("allowToggle",!l.onObject)("title",o.title)("optionsSetting",o.optionsSetting)("showCollapse",l.onObject),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(4,10,l.monitorActiveSubject)),e.\u0275\u0275advance(5),e.\u0275\u0275property("disabled",!e.\u0275\u0275pipeBind1(9,12,l.monitorActiveSubject)),e.\u0275\u0275advance(4),e.\u0275\u0275property("disabled",!e.\u0275\u0275pipeBind1(13,14,l.monitorActiveSubject)),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(19,16,l.tableVisible$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!e.\u0275\u0275pipeBind1(21,18,l.tableVisible$))}}var se=function(t){return{token:Z,providers:[t,{provide:Z,useClass:ve,deps:[t]}]}}(Ee),Bt=function(){function t(r,n,o,l,a,c,d,C,b,S,I){var O=this;this.eventBridge=r,this.explorationNavigation=n,this.panesVisibility=o,this.telemetryService=l,this.localizationService=a,this.pauseQueriesService=c,this.performanceAnalyzer=d,this.reportRefreshService=C,this.store=b,this.featureSwitchService=S,this.performanceAnalyzerEffects=I,this.viewModelBuilder=new p.YM(this.localizationService),this.monitorActiveSubject=new ae.X(!1),this.sortSubject=new ae.X({direction:p.wN.Ascending,type:p.aV.Chronological}),this.performanceLogsViewModels$=(0,le.aj)([this.store.select(q.LB).pipe((0,Ae.R)(function(s,m){return m.length>0?O.viewModelBuilder.logsUpdate(O.sortSubject.value,m,[]):[]},[])),this.sortSubject.pipe((0,Le.x)(function(s,m){return s.direction===m.direction&&s.type===m.type}))]).pipe((0,M.U)(function(s){return O.viewModelBuilder.sortUpdate(s[1],s[0])})),this.showInteractMessage$=this.performanceLogsViewModels$.pipe((0,M.U)(function(s){return s.length<1||1===s.length&&s[0].logType===p.n6.UserAction})),this.tableVisible$=(0,le.aj)([this.monitorActiveSubject,this.performanceLogsViewModels$]).pipe((0,M.U)(function(s){return s[0]||s[1].length>0}),(0,Ve.d)(1)),this.viewModel$=this.panesVisibility.getPanes$().pipe((0,M.U)(function(s){return s.performance}))}return Object.defineProperty(t.prototype,"onObject",{get:function(){return this.featureSwitchService.featureSwitches.onObject},enumerable:!1,configurable:!0}),t.prototype.setMonitorState=function(r){this.monitorActiveSubject.next(r),this.performanceAnalyzer.setRecording(r)},t.prototype.clearPerformanceLogs=function(){this.store.dispatch(P.Sv())},t.prototype.exportPerformanceData=function(){this.store.dispatch(P.NP())},t.prototype.refreshReport=function(){this.eventBridge.publishToChannel(ee.d8V,{source:"UserAction_Refresh"}),this.pauseQueriesService.isReportPaused()?this.pauseQueriesService.refreshVisuals():this.reportRefreshService.refreshData();var r=this.explorationNavigation.getCurrentSection().id,n=this.explorationNavigation.getCurrentExploration().reportId;this.telemetryService.logEvent(z.X9Z,{sectionId:r,reportId:n})},t.prototype.togglePane=function(){this.panesVisibility.togglePaneExpansion("performance")},t.prototype.onPaneCollapsed=function(){this.panesVisibility.setPaneExpansion("performance",!1)},t.prototype.ngOnDestroy=function(){this.performanceAnalyzer.setRecording(!1),this.clearPerformanceLogs()},t.\u0275fac=function(n){return new(n||t)(e.\u0275\u0275directiveInject(ie.J),e.\u0275\u0275directiveInject(J.z),e.\u0275\u0275directiveInject(Be.r),e.\u0275\u0275directiveInject(ne.y0),e.\u0275\u0275directiveInject(X.o),e.\u0275\u0275directiveInject(Ne.F),e.\u0275\u0275directiveInject($.a),e.\u0275\u0275directiveInject(ze.F),e.\u0275\u0275directiveInject(N.yh),e.\u0275\u0275directiveInject(je.vZ),e.\u0275\u0275directiveInject(se.token))},t.\u0275cmp=e.\u0275\u0275defineComponent({type:t,selectors:[["performance-pane"]],features:[e.\u0275\u0275ProvidersFeature((0,y.__spreadArray)([],se.providers,!0))],decls:2,vars:3,consts:[["class","performancePaneContainer","pbi-auto-focus","","focus-nav-mode","Group","role","application","keyboard-shortcuts","ctrl-F6","focus-priority","10","disableScroll","",3,"expanded","allowToggle","title","optionsSetting","showCollapse","onCollapse","onToggle",4,"ngIf"],["pbi-auto-focus","","focus-nav-mode","Group","role","application","keyboard-shortcuts","ctrl-F6","focus-priority","10","disableScroll","",1,"performancePaneContainer",3,"expanded","allowToggle","title","optionsSetting","showCollapse","onCollapse","onToggle"],[1,"monitorControlsContainer"],[1,"controlsLeft"],["mat-flat-button","","isFocusable","false","localizeTooltip","Start_Recording",1,"start",3,"disabled","click"],["fontIcon","pbi-glyph-circle-play",1,"glyph-small"],["localize","Start_Recording",1,"buttonText"],[1,"controlsRight"],["mat-flat-button","","isFocusable","false","localizeTooltip","Refresh_Visuals",1,"refresh",3,"disabled","click"],["fontIcon","pbi-glyph-refresh",1,"glyph-small"],["localize","Refresh_Visuals",1,"buttonText"],["mat-flat-button","","isFocusable","false","localizeTooltip","Stop",1,"stop",3,"disabled","click"],["fontIcon","pbi-glyph-circle-stop",1,"glyph-small"],["localize","Stop",1,"buttonText"],["noPadding","",1,"performancePaneContents"],["class","timelineControllerSection",4,"ngIf"],["class","performancePaneDesc",4,"ngIf"],[1,"performancePaneFooter"],[1,"performanceSupportSite"],["localize","PerformanceAnalyzerPane_Learn"],["localize","PerformanceAnalyzerPane_Link","target","_blank","tabindex","0","href","https://go.microsoft.com/fwlink/?linkid=2070556"],["localize","ScreenReader_Fullstop"],["localize","PerformanceAnalyzerPane_MVP"],["localize","PerformanceAnalyzerPane_MVP_Link","target","_blank","tabindex","0","href","https://go.microsoft.com/fwlink/?linkid=2094215"],[1,"timelineControllerSection"],[1,"timelineControlsContainer"],["mat-flat-button","","isFocusable","false","localizeTooltip","Clear",1,"clear",3,"click"],["fontIcon","pbi-glyph-eraser",1,"glyph-small"],["localize","Clear",1,"buttonText"],["mat-flat-button","","isFocusable","false","localizeTooltip","Export",1,"export",3,"click"],["fontIcon","pbi-glyph-export",1,"glyph-small"],["localize","Export",1,"buttonText"],[3,"sort","performanceLogsViewModel","showInteractMessage","sortUpdate"],[1,"performancePaneDesc"],["tabindex","0","localize","PerformanceAnalyzerPane_About",1,"startMonitoringText"]],template:function(n,o){1&n&&(e.\u0275\u0275template(0,zt,31,20,"pbi-pane",0),e.\u0275\u0275pipe(1,"async")),2&n&&e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(1,1,o.viewModel$))},dependencies:[x.NgIf,j.X,R.r,G.eB,E.Hw,Re.r,Qe.q,Fe.VO,Ue.P,$e.i,At,x.AsyncPipe],styles:['[_nghost-%COMP%], .performancePaneContainer[_ngcontent-%COMP%], .performancePaneContents[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1}.monitorControlsContainer[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-shrink:0;justify-content:space-between;min-width:180px;padding:3px 8px;box-sizing:border-box;padding:none}.timelineControllerSection[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column}.timelineControlsContainer[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-shrink:0;justify-content:flex-end;min-width:180px;padding:3px 8px;box-sizing:border-box}.controlsLeft[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;flex-shrink:2;min-width:40px}.controlsRight[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;flex-shrink:1;min-width:40px}.controlsRight[_ngcontent-%COMP%]   .refresh[_ngcontent-%COMP%], .controlsRight[_ngcontent-%COMP%]   .clear[_ngcontent-%COMP%]{margin-right:4px}.controlsRight[_ngcontent-%COMP%]   .stop[_ngcontent-%COMP%], .controlsRight[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]{margin-left:4px}[_nghost-%COMP%]  .mat-flat-button{--start-recording-button-background-color: var(--gray-20, #F3F2F1);--start-recording-button-background-hover-color: transparent;--start-recording-button-background-disabled-color: transparent;--start-recording-button-color: var(--fluent-theme-link-color);--start-recording-button-hover-color: var(--theme-primary-color, #F2C811);--start-recording-button-disabled-color: var(--gray-80, #B3B0AD);display:flex;align-items:center;min-width:40px;line-height:unset;height:24px;text-overflow:ellipsis;overflow:hidden;background-color:var(--start-recording-button-background-color);color:var(--start-recording-button-color);font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif;font-weight:400}[_nghost-%COMP%]  .mat-flat-button .mat-button-wrapper{display:flex;align-items:center;min-width:40px;height:24px}[_nghost-%COMP%]  .mat-flat-button .buttonText{height:20px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;padding-right:6px}[_nghost-%COMP%]  .mat-flat-button:hover, [_nghost-%COMP%]  .mat-flat-button:focus:hover, [_nghost-%COMP%]  .mat-flat-button:active:hover, [_nghost-%COMP%]  .mat-flat-button:active, [_nghost-%COMP%]  .mat-flat-button .mat-button-focus-overlay{background-color:var(--start-recording-button-background-hover-color);color:var(--start-recording-button-color)}[_nghost-%COMP%]  .mat-flat-button:disabled{background-color:transparent;color:#767676}[_nghost-%COMP%]  .mat-flat-button mat-icon{display:flex;align-items:center;justify-content:center;min-width:20px;font-family:PowrMDL2;font-size:14px}html[data-focus-source="key"][_nghost-%COMP%]     .mat-flat-button:focus, html[data-focus-source="key"]   [_nghost-%COMP%]     .mat-flat-button:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color);background-color:transparent}.paneSectionSeparator[_ngcontent-%COMP%]{flex-shrink:0;height:1px;background-color:var(--neutral-primary-color, #333333)}.performancePaneDesc[_ngcontent-%COMP%]   .startMonitoringText[_ngcontent-%COMP%]{display:block}.performanceSupportSite[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding-left:4px;color:var(--theme-primary-color, #F2C811)}html[data-legacy-theming="false"][_nghost-%COMP%]     .mat-flat-button, html[data-legacy-theming="false"]   [_nghost-%COMP%]     .mat-flat-button{--start-recording-button-background-color: var(--colorBrandBackground);--start-recording-button-color: var(--colorNeutralForegroundOnBrand);--start-recording-border-color: var(--colorBrandBackground);--start-recording-button-background-disabled-color: var(--colorNeutralBackgroundDisabled);--start-recording-button-background-hover-color: var(--colorBrandBackgroundHover);--start-recording-button-hover-color: var(--colorBrandForegroundLinkHover);--start-recording-button-disabled-color: var(--colorNeutralForegroundDisabled)}.newPaneColors[_nghost-%COMP%]  .mat-flat-button, .newPaneColors   [_nghost-%COMP%]  .mat-flat-button{background-color:var(--start-recording-button-background-color);color:var(--start-recording-button-color)}.newPaneColors[_nghost-%COMP%]  .mat-flat-button:hover, .newPaneColors   [_nghost-%COMP%]  .mat-flat-button:hover, .newPaneColors[_nghost-%COMP%]  .mat-flat-button:focus:hover, .newPaneColors   [_nghost-%COMP%]  .mat-flat-button:focus:hover, .newPaneColors[_nghost-%COMP%]  .mat-flat-button:active:hover, .newPaneColors   [_nghost-%COMP%]  .mat-flat-button:active:hover, .newPaneColors[_nghost-%COMP%]  .mat-flat-button:active, .newPaneColors   [_nghost-%COMP%]  .mat-flat-button:active, .newPaneColors[_nghost-%COMP%]  .mat-flat-button .mat-button-focus-overlay, .newPaneColors   [_nghost-%COMP%]  .mat-flat-button .mat-button-focus-overlay{color:var(--start-recording-button-color);background-color:var(--start-recording-button-background-hover-color)}.newPaneColors[_nghost-%COMP%]  .mat-flat-button:disabled, .newPaneColors   [_nghost-%COMP%]  .mat-flat-button:disabled{background-color:var(--start-recording-button-background-disabled-color);color:var(--start-recording-button-disabled-color)}.newPaneColors[_nghost-%COMP%], .newPaneColors   [_nghost-%COMP%]{--help-link-color: var(--fluent-theme-link-color)}[data-legacy-theming=false]   .newPaneColors[_nghost-%COMP%], .newPaneColors   [_nghost-%COMP%]{--help-link-color: var(--colorBrandForegroundLink)}.newPaneColors[_nghost-%COMP%]   .paneSectionSeparator[_ngcontent-%COMP%], .newPaneColors   [_nghost-%COMP%]   .paneSectionSeparator[_ngcontent-%COMP%]{background-color:var(--gray-40, #E1DFDD)}.newPaneColors[_nghost-%COMP%]   .performanceSupportSite[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .newPaneColors   [_nghost-%COMP%]   .performanceSupportSite[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--help-link-color)}'],changeDetection:0}),t}(),Nt=i(32208),jt=i(51837),Rt=i(67659),pe=i(18609),Qt=i(82156),Ft=i(79061),Ut=i(56545),$t=i(53188),Ht=i(11137),Jt=[{type:Bt,componentId:"PerformancePaneComponentId"}],Xt=function(){function t(){}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=e.\u0275\u0275defineInjector({imports:[x.CommonModule,Nt.J,Ht.Q,Ft.v,Qt.N.withManifests(Jt),jt.To,G.yu,E.Ps,Rt._,ue.x,$t.ym,U.Cl,N.Aw.forFeature(pe.Ag,pe.hC),Ut.g]}),t}()}}]);