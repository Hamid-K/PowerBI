"use strict";(self.webpackChunkmobile=self.webpackChunkmobile||[]).push([["field-picker-modern"],{13941:function(Me,Q,o){function f(P){return"add"===P.type}function r(P){return"delete"===P.type}function k(P){return"reorder"===P.type}function e(P){return"replace"===P.type}function F(P){return"rename"===P.type}function E(P){return"initialize"===P.type}o.d(Q,{H2:function(){return r},JB:function(){return f},V5:function(){return E},cA:function(){return e},cS:function(){return k},y$:function(){return F}})},30324:function(Me,Q,o){o.r(Q),o.d(Q,{FieldPickerModernModule:function(){return Dn}});var f=o(81337),r=o(77476),k=o(17174),e=o(83008),F=o(11494),E=o(77906),P=o(95859),p=o(41920),m=o(56598),D=o(6015),b=o(63654),M=o(94841),T=o(66972),W=o(16748),ee=o(16095),J=o(26368),Ce=o(17177),K=o(35510),pe=o(14463),he=function(){function c(){this.visibility$=new K.X(!1)}return c.prototype.setVisibility=function(a){this.visibility$.next(a)},c.prototype.getVisibility$=function(){return this.visibility$.asObservable()},c}(),N={provide:"fieldPickerFlyoutService",useFactory:function(c){var a=new he;return c.resolve(a)},deps:[pe.t]},t=o(50423),X=o(82762),te=o(59017),ae=o(14172),be=o(77526),Oe=o(81905),_e=o(48787),Pe=o(83317),I=o(4722),ue=o(67290),Ee=o(74804),w=o(62458),re=o(50550),j=o(45413),Z=o(45551),ve=o(44529),xe=o(88315),Te=o(32518),ze=o(94419),We=o(74082),Be=o(25512),Ue=o(64560),rt=o(8590),Ke=o(86940),at=o(88819),He=o(59725),lt=o(68509),et=o(73221),$e=o(3468),B=o(95862),R=o(45334),U=o(80777),Y=o(46135),ne=o(81141),oe=o(43505),me=o(72525),le=o(65534),de=o(17031),ge=o(78963),we=o(23983),Ie=o(86286),ke=o(70863);function Ae(c){var u,n=c.allowSelectEntities,i=c.groupingDesignStateService,d=c.flatNode.node.data;if(w.fF.assertValue(d,"flatNode.node.data"),!(0,ke.Ov)(d)){if(d instanceof xe.e){if(!n)return;u=(0,ze.nw)(d.contractSchema.name,d.contract.name)}else d instanceof xe.Xx?u=(0,ve.Sd)(d,i):w.fF.assertFail("Expect flatNode to be either FieldListConceptualEntity or FieldListConceptualItem");return{newSelection:u,action:0}}}var Le=function(){function c(a,n){this.overlayData=a,this.groupingDesignStateService=n}return c.prototype.check=function(a){var n=Ae({flatNode:a.flatNode,allowSelectEntities:this.overlayData.allowSelectEntities,groupingDesignStateService:this.groupingDesignStateService});n&&(a.checked?(a.flatNode.node.checked=!0,this.overlayData.handleCheckedField(n)):(a.flatNode.node.checked=!1,this.overlayData.handleUncheckedField(n)))},c.\u0275fac=function(n){return new(n||c)(t.\u0275\u0275inject(Ie.M),t.\u0275\u0275inject(we.AA))},c.\u0275prov=t.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac}),c}(),Qe=o(13702),Ge=o(65181),tt=o(59968),st=o(50057),pt=o(61310),ft=o(58679),vt=o(42189),ct=o(9529),dt=o(36858),Je=o(65005),ut=o(74913),g=o(85102),s=["fieldListDropdown"];function l(c,a){if(1&c){var n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",11),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(n);var u=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(u.createVisualCalc())}),t.\u0275\u0275element(1,"tri-svg-icon",12),t.\u0275\u0275elementEnd()}if(2&c){var i=t.\u0275\u0275nextContext();t.\u0275\u0275property("localizeTooltip",i.visualCalcCreationInfo.tooltip)}}function v(c,a){if(1&c&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",15),t.\u0275\u0275element(2,"span",16),t.\u0275\u0275elementStart(3,"p",17),t.\u0275\u0275element(4,"span",18),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementContainerEnd()),2&c){var n=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(4),t.\u0275\u0275property("innerHtml",n.perspectiveDoesNotExistsDescriptionHtml,t.\u0275\u0275sanitizeHtml)}}function C(c,a){if(1&c&&(t.\u0275\u0275element(0,"span",19),t.\u0275\u0275elementStart(1,"p",17),t.\u0275\u0275element(2,"span",18),t.\u0275\u0275elementEnd()),2&c){var n=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(2),t.\u0275\u0275property("innerHtml",n.perspectiveExistsDescriptionHtml,t.\u0275\u0275sanitizeHtml)}}function S(c,a){if(1&c&&(t.\u0275\u0275elementStart(0,"div",13),t.\u0275\u0275template(1,v,5,1,"ng-container",9),t.\u0275\u0275template(2,C,3,1,"ng-template",null,14,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementEnd()),2&c){var n=t.\u0275\u0275reference(3),i=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",i.perspectiveDoesNotExist)("ngIfElse",n)}}function O(c,a){if(1&c&&(t.\u0275\u0275elementStart(0,"span"),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&c){var n=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",n.selectedDisplayName," ")}}function G(c,a){1&c&&t.\u0275\u0275element(0,"span",32)}function z(c,a){if(1&c&&(t.\u0275\u0275elementStart(0,"pbi-dropdown-item",37),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&c){var n=a.$implicit;t.\u0275\u0275property("value",n),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",n.name," ")}}function se(c,a){if(1&c){var n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",33),t.\u0275\u0275element(1,"h2",34),t.\u0275\u0275elementStart(2,"pbi-dropdown",35),t.\u0275\u0275listener("valueChange",function(u){t.\u0275\u0275restoreView(n);var h=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(h.onAggregationChanged(u.property))}),t.\u0275\u0275pipe(3,"localize"),t.\u0275\u0275pipe(4,"localize"),t.\u0275\u0275elementStart(5,"pbi-dropdown-trigger")(6,"div",25)(7,"span"),t.\u0275\u0275text(8),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275template(9,z,2,2,"pbi-dropdown-item",36),t.\u0275\u0275elementEnd()()}if(2&c){var i=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275classProp("disabled",i.aggregationDropdown.isDisabled),t.\u0275\u0275advance(1),t.\u0275\u0275property("value",i.aggregationDropdown.selectedItem)("pbiTooltip",i.aggregationDropdown.isDisabled&&t.\u0275\u0275pipeBind1(3,8,"FieldPicker_AggregationsDisabled"))("aria-label",t.\u0275\u0275pipeBind1(4,10,"Summarization"))("isDisabled",i.aggregationDropdown.isDisabled),t.\u0275\u0275advance(6),t.\u0275\u0275textInterpolate(null==i.aggregationDropdown.selectedItem?null:i.aggregationDropdown.selectedItem.name),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",i.aggregationDropdown.items)}}function ye(c,a){if(1&c&&(t.\u0275\u0275elementStart(0,"pbi-dropdown-item",37),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&c){var n=a.$implicit;t.\u0275\u0275property("value",n),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",n.name," ")}}function De(c,a){if(1&c){var n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",38),t.\u0275\u0275element(1,"h2",39),t.\u0275\u0275elementStart(2,"pbi-dropdown",40),t.\u0275\u0275listener("valueChange",function(u){t.\u0275\u0275restoreView(n);var h=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(h.onVariationChanged(u.property))}),t.\u0275\u0275pipe(3,"localize"),t.\u0275\u0275elementStart(4,"pbi-dropdown-trigger")(5,"div",25)(6,"span"),t.\u0275\u0275text(7),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275template(8,ye,2,2,"pbi-dropdown-item",36),t.\u0275\u0275elementEnd()()}if(2&c){var i=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275classProp("disabled",i.variationsDropdown.isDisabled),t.\u0275\u0275advance(1),t.\u0275\u0275property("value",i.variationsDropdown.selectedItem)("aria-label",t.\u0275\u0275pipeBind1(3,7,"Date"))("isDisabled",i.variationsDropdown.isDisabled),t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate(null==i.variationsDropdown.selectedItem?null:i.variationsDropdown.selectedItem.name),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",i.variationsDropdown.items)}}function mt(c,a){if(1&c){var n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",20),t.\u0275\u0275element(2,"h2",21),t.\u0275\u0275elementStart(3,"pbi-dropdown",22,23),t.\u0275\u0275pipe(5,"localize"),t.\u0275\u0275elementStart(6,"pbi-dropdown-trigger",24)(7,"div",25),t.\u0275\u0275template(8,O,2,1,"span",26),t.\u0275\u0275template(9,G,1,0,"span",27),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(10,"pbi-field-list",28),t.\u0275\u0275listener("onNodeClick",function(u){t.\u0275\u0275restoreView(n);var h=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(h.onNodeClick(u))}),t.\u0275\u0275pipe(11,"async"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(12,"div",29),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(13,se,10,12,"div",30),t.\u0275\u0275template(14,De,9,9,"div",31),t.\u0275\u0275elementContainerEnd()}if(2&c){var i=t.\u0275\u0275nextContext();t.\u0275\u0275advance(3),t.\u0275\u0275property("aria-label",t.\u0275\u0275pipeBind1(5,12,"Field"))("options",i.fieldListDropdownOptions)("maxHeight",i.fieldListDropdownMaxHeight),t.\u0275\u0275advance(3),t.\u0275\u0275property("pbiTooltip",i.selectedItemTooltip),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",i.selectedDisplayName),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!i.selectedDisplayName),t.\u0275\u0275advance(1),t.\u0275\u0275property("fieldListTree",t.\u0275\u0275pipeBind1(11,14,i.fieldListTree$))("scrollSelectedItemIntoViewOnInit",i.openFieldDropdownOnInit)("hasHighlights",!1)("options",i.fieldListTreeOptions),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",i.aggregationDropdown),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",i.variationsDropdown&&!i.variationsDropdown.isDisabled)}}function Et(c,a){if(1&c){var n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"pbi-field-list",41),t.\u0275\u0275listener("onNodeClick",function(u){t.\u0275\u0275restoreView(n);var h=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(h.onMultiSelectNodeClick(u))})("handleFieldListTreeHeightDiff",function(u){t.\u0275\u0275restoreView(n);var h=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(h.handleFieldListTreeHeightDiff(u))}),t.\u0275\u0275pipe(1,"async"),t.\u0275\u0275elementEnd()}if(2&c){var i=t.\u0275\u0275nextContext();t.\u0275\u0275property("fieldListTree",t.\u0275\u0275pipeBind1(1,4,i.fieldListTree$))("options",i.fieldListTreeOptions)("checkMode",i.multiCheckMode)("focusSearchBoxOnFirstRenderComplete",!0)}}var It=function(c){function a(n,i,d,u,h,y,x,L,A,H,q){var V=c.call(this)||this;return V.overlayData=n,V.checkableSetting=i,V.checkStrategy=d,V.explorationDisplayNameService=u,V.fieldListTreeService=h,V.groupingDesignStateService=y,V.hideMenuSetting=x,V.inlineItemsExtendShowOrHideSettingStrategy=L,V.localizationService=A,V.overlayRef=H,V.tooltipStrategy=q,V.fieldListTree$=V.fieldListTreeService.fieldListTree$,V.defaultPerspective="",V.fieldListTreeOptions={check:V.checkStrategy,editLabel:null,tooltip:V.tooltipStrategy},V.multiCheckMode=He.kH.Multi,V}return(0,f.ZT)(a,c),a.prototype.ngOnInit=function(){var n,i=(n=this.overlayData).fieldListModel,d=n.allowSelectEntities,u=n.perspectiveDisplayName,h=n.schema,y=n.perspectiveDoesNotExist,x=n.openedByKeyboard,L=n.isAddingData;w.fF.assertValue(i,"fieldListModel"),this.perspectiveDoesNotExist=y,this.inNonDefaultPerspective=u&&u!==this.defaultPerspective,this.allowSelectEntities=d,this.perspectiveDoesNotExistsDescriptionHtml=this.localizationService.format("PersonalizeVisual_PerspectiveDescription_With_CubeNameError",u),this.perspectiveExistsDescriptionHtml=this.localizationService.format("PersonalizeVisual_PerspectiveDescription_V2",u),this.isAddingData=L,this.visualCalcCreationInfo=this.overlayData.visualCalcCreationInfo,this.initAggregationDropdown(),w.fF.assertValue(this.aggregationDropdown,"aggregationDropdown should be initialized"),this.initVariationDropdown(),this.openFieldDropdownOnInit=!L&&!x&&this.aggregationDropdown.isDisabled,h&&i&&this.initFieldList()},Object.defineProperty(a.prototype,"fieldListDropdownOptions",{get:function(){return{panelClass:this.overlayData.fieldListOverlayPanelClass}},enumerable:!1,configurable:!0}),a.prototype.ngAfterViewInit=function(){this.isAddingData||(this.fieldListDropdownMaxHeight=this.getFieldListDropdownMaxHeight(),this.openFieldDropdownOnInit&&this.fieldListDropdown.openDropdown())},a.prototype.getFieldListDropdownMaxHeight=function(){var n=this.fieldListDropdownElementRef.nativeElement.getBoundingClientRect(),d=document.documentElement.clientHeight-n.bottom;return Math.max(n.top,d)-4},a.prototype.onAggregationChanged=function(n){var i=this.aggregationDropdown.items.find(function(d){return d.property===n});w.fF.assertValue(i,"aggregationsDropdown.items should contain the selected item"),i&&(this.aggregationDropdown=(0,f.pi)((0,f.pi)({},this.aggregationDropdown),{selectedItem:i}),this.onDropdownItemSelected(i))},a.prototype.onVariationChanged=function(n){var i=this.variationsDropdown.items.find(function(d){return d.property===n});w.fF.assertValue(i,"variationsDropdown.items should contain the selected item"),i&&(this.variationsDropdown=(0,f.pi)((0,f.pi)({},this.variationsDropdown),{selectedItem:i}),this.onDropdownItemSelected(i))},a.prototype.onDropdownItemSelected=function(n){this.overlayData.onMenuItemSelected(n.property),this.closeOverlay()},a.prototype.initFieldList=function(){var n,i=(n=this.overlayData).visualCapabilities,d=n.fieldListModel,u=n.currentSelection,h=n.disabledCollection,y=n.schema;u=u??[],this.inlineItemsExtendShowOrHideSettingStrategy.addHiddenItemsOnly=!0,this.inlineItemsExtendShowOrHideSettingStrategy.hideInlineItemTooltip="Field_ShowHiddenFieldFromDataPane";var x=1===_.size(d.tables);this.fieldListTreeService.modelToPbiTreeConverterOptions={checkableSetting:this.checkableSetting,showMenuSetting:this.hideMenuSetting,expandedSetting:new Ft(x),inlineItemsSetting:this.inlineItemsExtendShowOrHideSettingStrategy};var L=_.flatMapDeep(u,function(q){return d.findItems(q,y,{excludeVariationSource:!0,excludeHierarchyLevels:!0})}),A=_.flatMapDeep(h,function(q){return d.findItems(q,y,{excludeVariationSource:!0,excludeHierarchyLevels:!0},{excludeHierarchy:!0,excludeVariationSource:!0})});this.fieldListTreeService.setOrUpdateFieldListTreeModel(d,L,void 0,A),w.fF.assert(function(){return u.length<=1},"Expected no more than 1 selection");var H=_.first(u);H&&(this.selectedDisplayName=this.explorationDisplayNameService.getDisplayName(H,y,i,void 0,void 0,{includeHierarchyName:!0,includeVariationSource:!0}),this.selectedItemTooltip=this.explorationDisplayNameService.getQualifiedDisplayName(H,y,i,{includeHierarchyName:!0,includeVariationSource:!0}))},a.prototype.initAggregationDropdown=function(){var i=this.initDropdown(this.overlayData.aggregationMenuItems);if(!i.selectedItem){var d=this.localizationService.get("Count_Visuals_0");i.selectedItem={name:d,property:d}}this.aggregationDropdown=i},a.prototype.initVariationDropdown=function(){var i=this.initDropdown(this.overlayData.variationsMenuItems);this.variationsDropdown=i},a.prototype.initDropdown=function(n){var i={items:[],isDisabled:!1};if(_.isEmpty(n))return i.isDisabled=!0,i;for(var d=0,u=n;d<u.length;d++){var h=u[d],y={name:h.text,property:h};h.checked&&(i.selectedItem=y),i.items.push(y)}return i},a.prototype.onNodeClick=function(n){var i=Ae({flatNode:n,allowSelectEntities:this.allowSelectEntities,groupingDesignStateService:this.groupingDesignStateService});i&&this.overlayRef.close(i)},a.prototype.onMultiSelectNodeClick=function(n){this.checkStrategy.check({flatNode:n,checked:!n.node.checked})},a.prototype.closeOverlay=function(){this.overlayRef.close()},a.prototype.createVisualCalc=function(){this.overlayRef.close({newSelection:void 0,action:2})},a.prototype.handleFieldListTreeHeightDiff=function(n){if(n>0){var i=this.overlayRef.overlayRef.overlayElement.getBoundingClientRect().height;this.overlayRef.overlayRef.updateSize({height:i+n})}},a.\u0275fac=function(i){return new(i||a)(t.\u0275\u0275directiveInject(Ie.M),t.\u0275\u0275directiveInject(ne.x),t.\u0275\u0275directiveInject(Le),t.\u0275\u0275directiveInject(Qe.O),t.\u0275\u0275directiveInject(oe.p),t.\u0275\u0275directiveInject(we.AA),t.\u0275\u0275directiveInject(ge.W),t.\u0275\u0275directiveInject(me.VI),t.\u0275\u0275directiveInject(Ge.o),t.\u0275\u0275directiveInject(Ie.w),t.\u0275\u0275directiveInject(de.Z))},a.\u0275cmp=t.\u0275\u0275defineComponent({type:a,selectors:[["field-picker-flyout"]],viewQuery:function(i,d){if(1&i&&(t.\u0275\u0275viewQuery(s,5),t.\u0275\u0275viewQuery(s,5,t.ElementRef)),2&i){var u=void 0;t.\u0275\u0275queryRefresh(u=t.\u0275\u0275loadQuery())&&(d.fieldListDropdown=u.first),t.\u0275\u0275queryRefresh(u=t.\u0275\u0275loadQuery())&&(d.fieldListDropdownElementRef=u.first)}},features:[t.\u0275\u0275ProvidersFeature([ne.x,Le,oe.p,we.AA,me.wt,me.VI,le.n,de.Z,{provide:ge.W,useClass:ge.w}]),t.\u0275\u0275InheritDefinitionFeature],decls:13,vars:7,consts:[["role","dialog","aria-labelledby","flyoutContainerTitle",1,"flyout-container"],[1,"header"],["id","flyoutContainerTitle","localize","TaskPane_Fields",1,"fluentTheme-lg-semiBold"],[1,"action-button-container"],["data-testid","create-visual-calc-button","tri-button","","size","small","appearance","subtle","class","increased-contrast",3,"localizeTooltip","click",4,"ngIf"],["localizeTooltip","Close",1,"glyphicon","glyph-mini","pbi-glyph-close","pbi-icon-button","pbi-focus-outline","close-button",3,"click"],[1,"field-list-container"],["class","pbi-field-list-perspective-header",4,"ngIf"],[1,"field-list-content"],[4,"ngIf","ngIfElse"],["multiSelectFieldList",""],["data-testid","create-visual-calc-button","tri-button","","size","small","appearance","subtle",1,"increased-contrast",3,"localizeTooltip","click"],["sprite","visual-calc-icons","name","data_histogram_function_20_regular"],[1,"pbi-field-list-perspective-header"],["showPerspectiveInfo",""],[1,"perspective-error"],["role","presentation",1,"glyphicon","glyph-small","pbi-glyph-error"],[1,"fluentTheme-sm-reg"],[3,"innerHtml"],["role","presentation",1,"glyphicon","glyph-small","pbi-glyph-info"],[1,"field-picker"],["localize","Field",1,"fluentTheme-sm-reg"],["size","xs","dropdown-type","field-list",1,"field-list-field",3,"aria-label","options","maxHeight"],["fieldListDropdown",""],[3,"pbiTooltip"],[1,"field-list-trigger","dropdown-trigger"],[4,"ngIf"],["localize","Select_A_Field",4,"ngIf"],["focus-nav-mode","Browser",1,"field-list-field-dropdown",3,"fieldListTree","scrollSelectedItemIntoViewOnInit","hasHighlights","options","onNodeClick"],["tabindex","0",1,"container-stop-bottom"],["class","aggregation-picker",4,"ngIf"],["class","variations-picker",4,"ngIf"],["localize","Select_A_Field"],[1,"aggregation-picker"],["localize","Summarization",1,"fluentTheme-sm-reg"],["size","xs",1,"field-list-aggregate",3,"value","pbiTooltip","aria-label","isDisabled","valueChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"variations-picker"],["localize","Date",1,"fluentTheme-sm-reg"],["size","xs",1,"field-list-variation",3,"value","aria-label","isDisabled","valueChange"],[1,"multi-select-field-list",3,"fieldListTree","options","checkMode","focusSearchBoxOnFirstRenderComplete","onNodeClick","handleFieldListTreeHeightDiff"]],template:function(i,d){if(1&i&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1),t.\u0275\u0275element(2,"h1",2),t.\u0275\u0275elementStart(3,"div",3),t.\u0275\u0275template(4,l,2,1,"button",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"button",5),t.\u0275\u0275listener("click",function(){return d.closeOverlay()}),t.\u0275\u0275pipe(6,"localize"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(7,"section",6),t.\u0275\u0275template(8,S,4,2,"div",7),t.\u0275\u0275elementStart(9,"div",8),t.\u0275\u0275template(10,mt,15,16,"ng-container",9),t.\u0275\u0275template(11,Et,2,6,"ng-template",null,10,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementEnd()()()),2&i){var u=t.\u0275\u0275reference(12);t.\u0275\u0275advance(4),t.\u0275\u0275property("ngIf",d.isAddingData&&d.visualCalcCreationInfo.supportVisualCalcCreation),t.\u0275\u0275advance(1),t.\u0275\u0275attribute("aria-label",t.\u0275\u0275pipeBind1(6,5,"Close")),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",d.inNonDefaultPerspective),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!d.isAddingData)("ngIfElse",u)}},dependencies:[r.NgForOf,r.NgIf,tt.X,st.r,pt.H,ft.I,vt.r,ct._,pt.T,dt.V,Je.l,ut.M,r.AsyncPipe,g.F],styles:['[_nghost-%COMP%]{height:100%;width:100%;background-color:var(--colorNeutralBackground3);border:1px solid var(--colorNeutralStroke3);border-radius:2px;color:var(--colorNeutralForeground1);padding:0;box-shadow:0 0 2px var(--colorNeutralShadowAmbient),0 4px 8px var(--colorNeutralShadowKey)}[_nghost-%COMP%]   .flyout-container[_ngcontent-%COMP%]{height:100%;width:100%;display:flex;flex-direction:column}[_nghost-%COMP%]   .flyout-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;align-items:center;margin:8px 8px 4px}[_nghost-%COMP%]   .flyout-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0}[_nghost-%COMP%]   .flyout-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .action-button-container[_ngcontent-%COMP%]{display:flex;flex:auto;justify-content:flex-end;margin-bottom:4px}[_nghost-%COMP%]   .flyout-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{width:24px;height:24px;color:var(--colorNeutralForeground1)}[_nghost-%COMP%]   .flyout-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]:hover{background-color:var(--colorNeutralBackground1Hover)}[_nghost-%COMP%]   .flyout-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]:active{background-color:var(--colorNeutralBackground1Pressed)}[_nghost-%COMP%]   .flyout-container[_ngcontent-%COMP%]   .field-list-container[_ngcontent-%COMP%]{margin:4px 8px 8px;height:100%}[_nghost-%COMP%]   .flyout-container[_ngcontent-%COMP%]   .field-list-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 4px}[_nghost-%COMP%]   .flyout-container[_ngcontent-%COMP%]   .field-list-container[_ngcontent-%COMP%]   .field-list-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}[_nghost-%COMP%]   .flyout-container[_ngcontent-%COMP%]   .field-list-container[_ngcontent-%COMP%]   .field-list-content[_ngcontent-%COMP%]   .field-picker[_ngcontent-%COMP%], [_nghost-%COMP%]   .flyout-container[_ngcontent-%COMP%]   .field-list-container[_ngcontent-%COMP%]   .field-list-content[_ngcontent-%COMP%]   .aggregation-picker[_ngcontent-%COMP%], [_nghost-%COMP%]   .flyout-container[_ngcontent-%COMP%]   .field-list-container[_ngcontent-%COMP%]   .field-list-content[_ngcontent-%COMP%]   .variations-picker[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:8px}[_nghost-%COMP%]   .flyout-container[_ngcontent-%COMP%]   .field-list-container[_ngcontent-%COMP%]   .field-list-content[_ngcontent-%COMP%]   .field-picker[_ngcontent-%COMP%]   pbi-dropdown[_ngcontent-%COMP%], [_nghost-%COMP%]   .flyout-container[_ngcontent-%COMP%]   .field-list-container[_ngcontent-%COMP%]   .field-list-content[_ngcontent-%COMP%]   .aggregation-picker[_ngcontent-%COMP%]   pbi-dropdown[_ngcontent-%COMP%], [_nghost-%COMP%]   .flyout-container[_ngcontent-%COMP%]   .field-list-container[_ngcontent-%COMP%]   .field-list-content[_ngcontent-%COMP%]   .variations-picker[_ngcontent-%COMP%]   pbi-dropdown[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .flyout-container[_ngcontent-%COMP%]   .field-list-container[_ngcontent-%COMP%]   .field-list-content[_ngcontent-%COMP%]   .field-picker[_ngcontent-%COMP%]   .dropdown-trigger[_ngcontent-%COMP%], [_nghost-%COMP%]   .flyout-container[_ngcontent-%COMP%]   .field-list-container[_ngcontent-%COMP%]   .field-list-content[_ngcontent-%COMP%]   .aggregation-picker[_ngcontent-%COMP%]   .dropdown-trigger[_ngcontent-%COMP%], [_nghost-%COMP%]   .flyout-container[_ngcontent-%COMP%]   .field-list-container[_ngcontent-%COMP%]   .field-list-content[_ngcontent-%COMP%]   .variations-picker[_ngcontent-%COMP%]   .dropdown-trigger[_ngcontent-%COMP%]{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-regular, 400);text-overflow:ellipsis;overflow:hidden;white-space:nowrap}[_nghost-%COMP%]   .flyout-container[_ngcontent-%COMP%]   .field-list-container[_ngcontent-%COMP%]   .field-list-content[_ngcontent-%COMP%]   .field-picker[_ngcontent-%COMP%]   h2.disabled[_ngcontent-%COMP%], [_nghost-%COMP%]   .flyout-container[_ngcontent-%COMP%]   .field-list-container[_ngcontent-%COMP%]   .field-list-content[_ngcontent-%COMP%]   .aggregation-picker[_ngcontent-%COMP%]   h2.disabled[_ngcontent-%COMP%], [_nghost-%COMP%]   .flyout-container[_ngcontent-%COMP%]   .field-list-container[_ngcontent-%COMP%]   .field-list-content[_ngcontent-%COMP%]   .variations-picker[_ngcontent-%COMP%]   h2.disabled[_ngcontent-%COMP%]{color:var(--colorNeutralForegroundDisabled)}[_nghost-%COMP%]   .flyout-container[_ngcontent-%COMP%]   button[tri-button].increased-contrast[_ngcontent-%COMP%]:hover{background-color:var(--colorNeutralBackground3Hover)}[_nghost-%COMP%]   .flyout-container[_ngcontent-%COMP%]   button[tri-button].increased-contrast[_ngcontent-%COMP%]:active:hover{background-color:var(--colorNeutralBackground3Pressed);color:var(--colorNeutralForeground2Pressed)}.pbi-overlay-caret-small.pbi-overlay-caret[_nghost-%COMP%]:after{background:var(--colorNeutralBackground3)!important;border-color:var(--colorNeutralStroke1Selected)}[_nghost-%COMP%]   .pbi-field-list-perspective-header[_ngcontent-%COMP%]{display:flex;margin:12px 0 4px}[_nghost-%COMP%]   .pbi-field-list-perspective-header[_ngcontent-%COMP%]   .pbi-glyph-error[_ngcontent-%COMP%]{color:var(--colorDangerForeground1)}[_nghost-%COMP%]   .pbi-field-list-perspective-header[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%]{margin:3px 8px 0 0}[_nghost-%COMP%]   .pbi-field-list-perspective-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--colorNeutralForeground1)}[_nghost-%COMP%]   .pbi-field-list-perspective-header[_ngcontent-%COMP%]   .perspective-error[_ngcontent-%COMP%]{background-color:var(--colorDangerBackground1);display:flex;padding:8px}.field-list-field-dropdown[_ngcontent-%COMP%]{padding:8px;height:380px}'],changeDetection:0}),a}(et.w),Ft=function(){function c(a){this.hasSingleTable=a}return c.prototype.isExpanded=function(a){return"Hierarchy"===a.modelObjectType||"Table"===a.modelObjectType&&this.hasSingleTable},c.prototype.isExpandedStateFixed=function(a){return"Hierarchy"===a.modelObjectType},c}(),kt=o(98476),nt=o(13941),yt=o(58609),Lt=o(28199),Bt=o(26898),Rt=o(61451),At=o(77200),Vt=o(27980),Nt=o(80357),jt=function(){function c(){}return c.prototype.transform=function(a,n){if(null!=a){var i=n.split(",").map(function(d){return Number(d)});return(0,I.X)(a,i)}},c.\u0275fac=function(n){return new(n||c)},c.\u0275pipe=t.\u0275\u0275definePipe({name:"itemAtPosition",type:c,pure:!0}),c}(),zt=["dragDropPickerRef"],Wt=["openFlyoutChevron"];function Ut(c,a){if(1&c&&(t.\u0275\u0275elementStart(0,"label",7),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&c){var n=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(n.label)}}var Kt=function(a){return{v2Design:a}};function Ht(c,a){if(1&c){var n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",8)(2,"button",9),t.\u0275\u0275listener("click",function(){var h=t.\u0275\u0275restoreView(n);return t.\u0275\u0275resetView(h.ngIf.handler())}),t.\u0275\u0275element(3,"tri-svg-icon",10),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementContainerEnd()}if(2&c){var i=a.ngIf,d=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(2),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(5,Kt,d.withFieldList)),t.\u0275\u0275attribute("aria-label",i.tooltip),t.\u0275\u0275advance(1),t.\u0275\u0275property("name",i.svgIconName)("sprite",i.svgIconSpriteName)("pbiTooltip",i.tooltip)}}function $t(c,a){if(1&c&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,Ht,4,7,"ng-container",1),t.\u0275\u0275pipe(2,"async"),t.\u0275\u0275elementContainerEnd()),2&c){var n=a.ngIf;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(2,1,n.promotedAction$))}}function Qt(c,a){if(1&c&&(t.\u0275\u0275template(0,$t,3,3,"ng-container",1),t.\u0275\u0275pipe(1,"itemAtPosition"),t.\u0275\u0275pipe(2,"async")),2&c){var n=a.position,i=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind2(1,1,t.\u0275\u0275pipeBind1(2,4,i.fieldsView$),n.join(",")))}}var Gt=function(a,n){return{v2Design:a,error:n}};function Jt(c,a){if(1&c&&t.\u0275\u0275element(0,"div",16),2&c){var n=t.\u0275\u0275nextContext(2).field,i=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction2(1,Gt,i.withFieldList,n.invalid))}}function Zt(c,a){if(1&c){var n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",17,18),t.\u0275\u0275listener("click",function(x){t.\u0275\u0275restoreView(n);var L=t.\u0275\u0275reference(1),A=t.\u0275\u0275nextContext(2).position,H=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(H.openFlyout({overlayOrigin:L.parentElement.parentElement,fromFieldPosition:A,openedByKeyboard:0===x.detail}))})("keydown.arrowLeft",function(){t.\u0275\u0275restoreView(n);var x=t.\u0275\u0275nextContext(4);return t.\u0275\u0275resetView(x.focusClearButton())}),t.\u0275\u0275pipe(2,"async"),t.\u0275\u0275elementEnd()}if(2&c){var i=t.\u0275\u0275nextContext(2),d=i.field,u=i.position,h=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("pbiTooltip",d.actionTooltip),t.\u0275\u0275attribute("aria-expanded",h.arePositionsEqual(t.\u0275\u0275pipeBind1(2,2,h.flyoutOpenPosition$),u))}}function Xt(c,a){if(1&c){var n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",19),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(n);var h=t.\u0275\u0275nextContext(2).position,y=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(y.directEditStrategy.onEdit(h))})("keydown.arrowLeft",function(){t.\u0275\u0275restoreView(n);var h=t.\u0275\u0275nextContext(4);return t.\u0275\u0275resetView(h.focusClearButton())}),t.\u0275\u0275element(1,"tri-svg-icon",20),t.\u0275\u0275elementEnd()}if(2&c){var i=t.\u0275\u0275nextContext(2).position,d=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("pbiTooltip",d.directEditStrategy.getActionTooltip())("disabled",d.directEditStrategy.isDisabled(i)),t.\u0275\u0275advance(1),t.\u0275\u0275property("name","edit_20_regular")}}function Yt(c,a){if(1&c){var n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",21),t.\u0275\u0275listener("pbiMenuButtonClick",function(h){t.\u0275\u0275restoreView(n);var y=t.\u0275\u0275nextContext(2).position,x=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(x.onMenuItemSelected(h,y))}),t.\u0275\u0275pipe(1,"localize"),t.\u0275\u0275elementEnd()}if(2&c){var i=t.\u0275\u0275nextContext(2).field,d=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("pbiTooltip",t.\u0275\u0275pipeBind1(1,4,"Options_Menu"))("pbiMenu",i.menu)("menuMode",d.CompactMenuMode)("pbiMenuActivation",d.pbiMenuActivation)}}function qt(c,a){if(1&c&&(t.\u0275\u0275elementStart(0,"div",8),t.\u0275\u0275template(1,Jt,1,4,"div",12),t.\u0275\u0275template(2,Zt,3,4,"button",13),t.\u0275\u0275template(3,Xt,2,3,"button",14),t.\u0275\u0275template(4,Yt,2,6,"button",15),t.\u0275\u0275elementEnd()),2&c){var n=t.\u0275\u0275nextContext(),i=n.position,d=n.field,u=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",u.withFieldList&&!u.disallowReplaceItems),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",u.withFieldList&&u.canOpenFlyout(i)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==u.directEditStrategy?null:u.directEditStrategy.shouldAllowDirectEdit(i)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!u.withFieldList&&!!d.menu)}}function en(c,a){1&c&&t.\u0275\u0275template(0,qt,5,4,"div",11),2&c&&t.\u0275\u0275property("ngIf",a.field)}function tn(c,a){if(1&c){var n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,Ut,2,1,"label",2),t.\u0275\u0275elementStart(2,"pbi-drag-drop-picker",3,4),t.\u0275\u0275listener("onChangeAdd",function(y){t.\u0275\u0275restoreView(n);var x=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(x.onPickerChangeAdd(y))})("onChangeRemove",function(y){t.\u0275\u0275restoreView(n);var x=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(x.onPickerChangeRemove(y))})("onChangeReorder",function(y){t.\u0275\u0275restoreView(n);var x=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(x.onPickerChangeReorder(y))})("onChangeReplace",function(y){t.\u0275\u0275restoreView(n);var x=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(x.onPickerChangeReplace(y))})("onChangeLabelUpdate",function(y){t.\u0275\u0275restoreView(n);var x=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(x.onPickerChangeRename(y))})("onCrossPickerDrop",function(y){t.\u0275\u0275restoreView(n);var x=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(x.onCrossPickerDrop.emit(y))})("onAddDataClick",function(y){t.\u0275\u0275restoreView(n);var x=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(!x.disabled&&x.openFlyout({overlayOrigin:y.overlayOrigin,openedByKeyboard:0===y.detail,isAddingData:!0}))})("onContentClick",function(y){t.\u0275\u0275restoreView(n);var x=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(x.onContentClickEvent(y))})("onMenuItemClick",function(y){t.\u0275\u0275restoreView(n);var x=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(x.onMenuItemSelected(y.menuButton,y.position))})("onClearButtonArrowRight",function(y){t.\u0275\u0275restoreView(n);var x=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(x.focusOpenFlyoutChevron(y))}),t.\u0275\u0275pipe(4,"async"),t.\u0275\u0275pipe(5,"async"),t.\u0275\u0275pipe(6,"localize"),t.\u0275\u0275template(7,Qt,3,6,"ng-template",null,5,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275template(9,en,1,1,"ng-template",null,6,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()}if(2&c){var i=t.\u0275\u0275reference(8),d=t.\u0275\u0275reference(10),u=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",u.label),t.\u0275\u0275advance(1),t.\u0275\u0275property("compact",u.compact)("ariaLabelledby",u.ariaLabelledby)("dataFormat",u.parameterPickerDataFormat)("disabled",t.\u0275\u0275pipeBind1(4,28,u.changes$("disabled")))("placeholder",t.\u0275\u0275pipeBind1(6,32,"FieldDropZone_AddFields"))("addDataLabelKey",u.addDataLabelKey)("addDataAriaLabelKey",u.addDataAriaLabelKey)("draggable",u.allowReorderItems)("allowEditingLabelsSetting",u.allowEditingLabelsSetting)("allowMultipleValues",u.allowMultipleValues)("allowClear",u.allowClear)("disableDropZoneIndicator",u.disableDropZoneIndicator)("disableContentClick",u.disallowReplaceItems)("pbiDragDropPickerActionsTemplate",d)("itemPromotedActionTemplate",i)("externalCrossPickerDragDropMonitor",u.externalCrossPickerDragDropMonitor)("v2Design",u.withFieldList)("menuMode",u.CompactMenuMode)("useCustomTooltip",u.useCustomTooltip)("tooltipPosition",u.tooltipPosition)("tooltipWithFlexiblePositions",u.tooltipWithFlexiblePositions)("disableAutoScroll",u.disableAutoScroll)("disableClearButtonTabNavigation",!0)("allowEmptyLabel",u.emptyFieldSetsDefaultLabel),t.\u0275\u0275attribute("aria-labelledby",u.ariaLabelledby)("aria-describedby",u.ariaDescribedby)("aria-disabled",t.\u0275\u0275pipeBind1(5,30,u.changes$("disabled")))}}var nn=function(a){return{value:a}},ln=function(c){function a(n,i,d,u,h,y,x,L,A,H,q,V,fe,Fe,Se){var ie=c.call(this)||this;return ie.aggrOps=n,ie.conceptualSchemaProxy=i,ie.dataSourcesService=d,ie.displayNameService=u,ie.eventBridge=h,ie.groupingDesignStateService=y,ie.injector=x,ie.localizationService=L,ie.pbiOverlay=A,ie.reportSettingsService=H,ie.viewModeState=q,ie.visualAuthoringOperationsService=V,ie.pbiOverlayFactory=fe,ie.visualActionContext=Fe,ie.hostOverlayRef=Se,ie.withFieldList=!1,ie.parameterPickerDataFormat=He.L$,ie.onExprChange=new t.EventEmitter,ie.onCrossPickerDrop=new t.EventEmitter,ie.flyoutOpenPosition$=new K.X(void 0),ie.pbiMenuActivation="both",ie.CompactMenuMode=Ue.Kb.Compact,ie.fieldsMetadataUpdate$=new K.X(void 0),ie.fieldsViewUpdate$=new K.X(void 0),ie}return(0,f.ZT)(a,c),a.prototype.ngOnInit=function(){var n=this;this.ensureStrategies(),this.changes$("enterExitFieldRename",!0).subscribe(function(i){!0===i?.modeOn?n.dragDropPickerRef.beginEditSection(i.fieldPosition):!1===i?.modeOn&&n.dragDropPickerRef.endEditSection(i.fieldPosition)}),this.lifecycleSubscriptions.add(this.eventBridge.on(rt.CCe).subscribe(function(){return(0,f.mG)(n,void 0,void 0,function(){return(0,f.Jh)(this,function(i){switch(i.label){case 0:return[4,this.resetFieldListTreeModel()];case 1:return i.sent(),[2]}})})})),this.changes$("initialExpr").pipe((0,ae.U)(function(i){if(n.allowMultipleValues||!_.isArray(i))return i&&!_.isEmpty(i)?(0,re.rY)(i):void 0;w.fF.assertFail("Expected initialExpr to be a single value when allowMultipleValues is false.")}),(0,be.x)(function(i,d){if(_.isEmpty(d)){var u=n.fieldsMetadataUpdate$.getValue();return _.isEmpty(u?.metadata)}return function(c,a){if(_.size(c)!==_.size(a))return!1;for(var n=function(x){if(!_.some(a,function(L){return(0,j.fS)(x,L)}))return{value:!1}},i=0,d=c??[];i<d.length;i++){var h=n(d[i]);if("object"==typeof h)return h.value}return!0}(_.map(i,function(h){return h.expr}),_.map(d,function(h){return h.expr}))}),(0,Oe.w)(function(i){return(0,X.D)(n.getSchema()).pipe((0,ae.U)(function(d){return{initialExprs:i,schema:d}}))})).subscribe(function(i){return n.updaterPickerWithInitialExprs(i.initialExprs,i.schema)}),this.lifecycleSubscriptions.add(this.fieldsMetadataUpdate$.subscribe(function(i){if(i&&(n.setFieldsViewUpdate(i),function(c){if(!c)return!1;var a=c.type;switch(a){case"add":case"delete":case"rename":case"reorder":case"replace":return!0;case"initialize":return!1;default:return w.fF.assertNever(a),!1}}(i.update))){var d=_.map(i.metadata,function(h){return{expr:h.expr,metadata:h.metadata}}),u=n.allowMultipleValues?d:_.first(d);n.onExprChange.emit({newExpr:u,fromUpdate:i.update})}})),this.lifecycleSubscriptions.add(this.fieldsViewUpdate$.subscribe(function(i){n.dragDropPickerRef&&i&&"delete"!==i.update.type&&(n.dragDropPickerRef.setAllData(_.map(i.view,function(u){return Dt(u)})),n.dragDropPickerRef.detectChanges())})),this.fieldsView$=this.fieldsViewUpdate$.pipe((0,ae.U)(function(i){return i?.view})),this.visualAuthoringOperationsService.setVisualActionContext(this.visualActionContext)},a.prototype.canOpenFlyout=function(n){var i;return!this.disallowReplaceItems&&(null===(i=this.flyoutFieldsStrategyEnsured)||void 0===i?void 0:i.canOpenFlyout(n))},Object.defineProperty(a.prototype,"allowEditingLabelsSetting",{get:function(){return"varyByItem"},enumerable:!1,configurable:!0}),a.prototype.onPickerChangeRemove=function(n){this.removeFieldMetadata(n.position)},a.prototype.onPickerChangeAdd=function(n){return(0,f.mG)(this,void 0,void 0,function(){return(0,f.Jh)(this,function(i){switch(i.label){case 0:return[4,this.onPickerChangeAddReplaceInternal({type:"add",data:n.data,position:n.position})];case 1:return i.sent(),[2]}})})},a.prototype.onPickerChangeReplace=function(n){return(0,f.mG)(this,void 0,void 0,function(){return(0,f.Jh)(this,function(i){switch(i.label){case 0:return[4,this.onPickerChangeAddReplaceInternal({type:"replace",data:n.data,position:n.position})];case 1:return i.sent(),[2]}})})},a.prototype.onPickerChangeReorder=function(n){this.reorderFieldMetadata(n.fromPosition,n.toPosition)},a.prototype.onPickerChangeRename=function(n){return(0,f.mG)(this,void 0,void 0,function(){var i,d,u,h,y=this;return(0,f.Jh)(this,function(x){return i=n.newLabel,d=n.position,u=(0,f.ev)([],this.fieldsMetadataUpdate$.value.metadata,!0),(0,I.ri)(u,d,function(L,A){var H=L[A];w.fF.assert(function(){return"varyByItem"===y.allowEditingLabelsSetting&&H.allowRename},"the item does not allow rename!"),L[A]=(0,f.pi)((0,f.pi)({},H),{displayName:{value:i,fromOverride:!0}})}),h=function(c,a){return{type:"rename",renamed:{position:c,newName:a}}}(d,i),this.updateFieldsMetadata(u,h),[2]})})},a.prototype.onPickerChangeAddReplaceInternal=function(n){var i,d;return(0,f.mG)(this,void 0,void 0,function(){var u,h,y,x,L,A,H,q,V,fe,Fe;return(0,f.Jh)(this,function(Se){switch(Se.label){case 0:return[4,this.getSchema()];case 1:return u=Se.sent(),w.fF.assertValue(h=n.data.fieldExpr,"expect change data has fieldExpr and value not null"),h?(y=$e.ib.deserializeExpr(h),[4,this.dropExprStrategyInternal.getDropExpr(y,u)]):[3,3];case 2:x=Se.sent(),Se.label=3;case 3:if(L=n.position,A="replace"===n.type,x)this.addReplaceFieldMetadata(x,y,L,A,u);else{if(!this.dragDropPickerRef)return[2];H=null===(i=this.fieldsViewUpdate$.value)||void 0===i?void 0:i.view,q=this.getEffectiveReplacementPosition(L,_.size(H),A),V=null!=q?(0,I.X)(H,q):void 0,fe=V?.pickerData,null==fe?(Fe="end"===L?[_.size(null===(d=this.fieldsViewUpdate$.value)||void 0===d?void 0:d.view)]:L,this.dragDropPickerRef.handleClear(Fe,!0)):this.dragDropPickerRef.replaceData((0,f.pi)((0,f.pi)({},fe),{allowEditLabel:V.allowRename,menu:V.menuFactory}),q),this.dragDropPickerRef.detectChanges()}return[2]}})})},a.prototype.onContentClickEvent=function(n){var i=n.overlayOrigin,d=n.position;this.canOpenFlyout(d)&&this.openFlyout({overlayOrigin:i,fromFieldPosition:d})},a.prototype.openFlyout=function(n){var i,d;return(0,f.mG)(this,void 0,void 0,function(){var u,h,y,x,A,H,q,V,fe,Fe,Se,ie,Ve,Ze,Xe,Ye,it,qe,Ot,St,ht=this;return(0,f.Jh)(this,function(Ne){switch(Ne.label){case 0:return u=n.overlayOrigin,h=n.fromFieldPosition,y=n.openedByKeyboard,x=n.isAddingData,this.shouldFieldListShowHiddenFields()===this.lastFieldListShowHiddenFields?[3,2]:[4,this.resetFieldListTreeModel()];case 1:Ne.sent(),Ne.label=2;case 2:return A=this.pbiOverlay.position().flexibleConnectedTo(u).withPositions([(0,Be.v3)(),(0,Be.J7)(),(0,Be.Zz)(),(0,Be.q6)(),(0,Be.Kb)(),(0,Be.Iz)()]).withFlexibleDimensions(!0).withPush(!0).withViewportMargin(4).withGrowAfterOpen(!0),null!=this.fieldListTreeModel?[3,4]:[4,this.resetFieldListTreeModel()];case 3:Ne.sent(),Ne.label=4;case 4:return H=null===(i=this.fieldsMetadataUpdate$.value)||void 0===i?void 0:i.metadata,w.fF.assert(function(){return _.size(h)<=2},"field-picker-modern right now only supports maximum 2-levels of fields."),q=null!=h?(0,I.X)(H,h):void 0,V=q?.expr,[4,this.getSchemaForFlyout()];case 5:if(fe=Ne.sent(),Fe=[],Se=[],q?.menu)for(ie=0,Ve=q.menu.items;ie<Ve.length;ie++)(Ze=Ve[ie]).type===Ue.iB.Button&&(Xe=Ze.data,Ye=Xe?.action,(4===Ye||2===Ye)&&Fe.push(Ze),128===Ye&&Se.push(Ze));return(qe=new WeakMap).set(yt.yk,this.visualActionContext),(null===(d=this.visualCalcFieldsStrategy)||void 0===d?void 0:d.isEditableVisualCalc(V))?[4,this.pbiOverlay.openWithFactoryLazy({modulePath:"@powerbi/ExploreUIAuthoring/lazy-modules/visual-calc-flyout/visual-calc-flyout.module#VisualCalcFlyoutModule",componentId:"VisualCalcFlyoutComponentId",data:{queryName:this.visualCalcFieldsStrategy.getQueryName(h)},options:{positionStrategy:A,hasBackdrop:!0,backdropClass:Ke.L,minWidth:150},closeOnBackdropClick:!0,hasCaret:!0,caretSize:0,injector:this.injector,providers:qe},this.pbiOverlayFactory)]:[3,7];case 6:return it=Ne.sent(),[3,9];case 7:return[4,this.flyoutFieldsStrategyEnsured.getVisualCalcCreationInfo(this.role)];case 8:Ot=Ne.sent(),St=x?this.hostOverlayRef?this.hostOverlayRef.overlayRef.overlayElement.getBoundingClientRect().height:500:void 0,it=this.pbiOverlay.openWithFactory({component:It,data:{isAddingData:x,visualCapabilities:this.visualCapabilities,schema:fe,fieldListModel:this.fieldListTreeModel,perspectiveDisplayName:this.perspectiveDisplayName,perspectiveDoesNotExist:this.perspectiveDoesNotExist,currentSelection:this.flyoutFieldsStrategyEnsured.getFieldsToSelectOnOpen(h,V),disabledCollection:this.flyoutFieldsStrategyEnsured.getFieldsToDisableOnOpen(h,V,this.fieldListTreeExprs,fe),allowSelectEntities:this.allowEntityField,aggregationMenuItems:Fe,variationsMenuItems:Se,onMenuItemSelected:function(je){return ht.onMenuItemSelected(je,h)},openedByKeyboard:y,fieldListOverlayPanelClass:this.fieldListOverlayPanelClass,role:this.role,handleCheckedField:function(je){return ht.handleCheckedField(je,h)},handleUncheckedField:function(je){return ht.handleUncheckedField(je)},visualCalcCreationInfo:Ot},options:{positionStrategy:A,hasBackdrop:!0,backdropClass:Ke.L,minWidth:206,minHeight:St},closeOnBackdropClick:!0,hasCaret:!0,caretSize:0,injector:this.injector,providers:qe},this.pbiOverlayFactory),Ne.label=9;case 9:return null!=h&&this.flyoutOpenPosition$.next(h),it.onClose.pipe((0,_e.q)(1)).subscribe(function(Re){return(0,f.mG)(ht,void 0,void 0,function(){var je,Ct;return(0,f.Jh)(this,function(ot){switch(ot.label){case 0:return null!=this.flyoutOpenPosition$.value&&this.flyoutOpenPosition$.next(void 0),Re?function(c){return 0===c.action||2===c.action}(Re)?0!==Re.action?[3,2]:[4,this.flyoutFieldsStrategyEnsured.handleSelectedField(Re.newSelection,h)]:[3,4]:[2];case 1:return ot.sent(),[3,4];case 2:return 2!==Re.action?[3,4]:[4,this.flyoutFieldsStrategyEnsured.onCloseWithCreateVisualCalc(this.role)];case 3:ot.sent(),ot.label=4;case 4:return function(c){return 1===c.action}(Re)?(w.fF.assertValue(je=Re.queryName,"queryName of the visual calc to be edit"),null==je?[2]:[4,null===(Ct=this.visualCalcFieldsStrategy)||void 0===Ct?void 0:Ct.onEditVisualCalc(Re.queryName)]):[3,6];case 5:ot.sent(),ot.label=6;case 6:return[2]}})})}),[2]}})})},a.prototype.onMenuItemSelected=function(n,i){var d;return(0,f.mG)(this,void 0,void 0,function(){var u,h,y,x,L,A,H=this;return(0,f.Jh)(this,function(q){switch(q.label){case 0:return[4,this.getSchema()];case 1:return u=q.sent(),(h=this.menuStrategyInternal.menuItemClickHandler(n,i,u))?(y=h.fromUpdate,x=null===(d=this.fieldsMetadataUpdate$.value)||void 0===d?void 0:d.metadata,L=(0,re.rY)(h.newExpr),A=_.map(L,function(V,fe){return H.createFieldMetadata(V,V.expr,[fe],u,y)}),A=_.map(A,function(V,fe){return Pt(V,[fe],A,x,y)}),this.updateFieldsMetadata(A,y),[2]):[2]}})})},a.prototype.handleCheckedField=function(n,i){this.flyoutFieldsStrategyEnsured.handleSelectedField(n.newSelection,i)},a.prototype.handleUncheckedField=function(n){this.flyoutFieldsStrategyEnsured.handleDeselectedField(n.newSelection)},a.prototype.focusOpenFlyoutChevron=function(n){this.openFlyoutChevronQueryList&&(this.previousFocusedClearButton=n.currentFocusedClearButton,this.openFlyoutChevronQueryList.get(n.topLevelIndex).nativeElement.focus())},a.prototype.arePositionsEqual=function(n,i){return _t(n,i)},a.prototype.focusClearButton=function(){this.previousFocusedClearButton&&this.previousFocusedClearButton.focus()},a.prototype.updaterPickerWithInitialExprs=function(n,i){var d=this,u={type:"initialize"};this.updateFieldsMetadata(_.map(n,function(h,y){return d.createFieldMetadata(h,h.expr,[y],i,u)}),u)},a.prototype.createFieldMetadata=function(n,i,d,u,h){var x,L,y=this,A=this.dropExprStrategyInternal.getDroppedExprChildren(n,d,u,h),H=h;return{expr:n.expr,metadata:n.metadata,pickerDataExpr:i,allowRename:this.nameStrategyInternal.isRenameAllowed(d,H),menu:this.menuStrategyInternal.getMenu(n.expr,d,u,h),displayName:{value:this.nameStrategyInternal.getDisplayName(n.expr,d,u,H),fromOverride:!1,pbiStyle:this.nameStrategyInternal.getDisplayNameStyle?this.nameStrategyInternal.getDisplayNameStyle(d,H):void 0},customTooltipContent:this.nameStrategyInternal.getCustomTooltipContent?this.nameStrategyInternal.getCustomTooltipContent(n.expr,u,d,H):void 0,children:_.isEmpty(A)?void 0:_.map(A,function(q,V){var fe=d.concat(V);return y.createFieldMetadata(q,q.expr,fe,u,h)}),promotedAction$:null===(x=this.promotedActionStrategy)||void 0===x?void 0:x.getAction(d,H),invalid:this.nameStrategyInternal.isFieldInvalid(d,H),actionTooltip:null!==(L=this.visualCalcFieldsStrategy)&&void 0!==L&&L.isEditableVisualCalc(n.expr)?this.localizationService.get("Calculation_Options"):this.localizationService.get("Data_Options")}},a.prototype.addReplaceFieldMetadata=function(n,i,d,u,h){var y;w.fF.assertValue(!u||"end"!==d,"expect position to be a valid ItemPosition when it is for replace");var x=null===(y=this.fieldsMetadataUpdate$.value)||void 0===y?void 0:y.metadata,L=this.getEffectiveReplacementPosition(d,_.size(x),u),A=null!=L,H=A?void 0:"end"===d?[_.size(x)]:d,q=A?(0,I.X)(x,L).metadata:void 0,V=A?xt(L,q):function(c,a,n){return{type:"add",added:{position:c,pickerOriginalExpr:a,metadata:n}}}(H,i,n.metadata),fe=A?L:H,Fe=this.createFieldMetadata(n,i,fe,h,V),Se=(0,f.ev)([],x||[],!0),ie=A?1:0;if(1===_.size(fe))Se.splice(fe[0],ie,Fe);else{var Ze=fe.slice(0,-1);(0,I.ri)(Se,Ze,function(Xe,Ye){var it=Xe[Ye],qe=(0,f.ev)([],it.children,!0),gt=_.last(fe);qe.splice(gt,ie,Fe),Xe[Ye]=(0,f.pi)((0,f.pi)({},it),{children:qe})})}this.updateFieldsMetadata(Se,V)},a.prototype.reorderFieldMetadata=function(n,i){var u,d=this;w.fF.assert(function(){return d.allowMultipleValues},"expect this to be called only when this allows multiple values");var h=n.slice(0,-1);w.fF.assert(function(){return _t(h,i.slice(0,-1))},"Expect reordering only among siblings. Add your implement for new scenario.");var y=null===(u=this.fieldsMetadataUpdate$.value)||void 0===u?void 0:u.metadata,x=_.isEmpty(h)?void 0:(0,I.X)(y,h),L=x?x.children:y,A=_.last(n),H=_.last(i),q=L[A];w.fF.assert(function(){return _.inRange(A,0,_.size(L))},"fromIndex value is invalid"),w.fF.assert(function(){return _.inRange(H,0,_.size(L)+1)},"toIndex value is invalid");var fe,V=(0,f.ev)([],L,!0);V[A]=void 0,V.splice(H,0,q),V=_.filter(V,function(Se){return!!Se}),x?(fe=(0,f.ev)([],y,!0),(0,I.ri)(fe,h,function(Se,ie){var Ve=Se[ie];Ve=(0,f.pi)((0,f.pi)({},Ve),{children:V}),Se.splice(ie,1,Ve)})):fe=V;var Fe=function(c,a,n){return{type:"reorder",reordered:{fromPosition:c,toPosition:a,originalMetadata:n}}}(n,i,q.metadata);this.updateFieldsMetadata(fe,Fe)},a.prototype.removeFieldMetadata=function(n){var i,d,h,u=(0,f.ev)([],null!==(d=null===(i=this.fieldsMetadataUpdate$.value)||void 0===i?void 0:i.metadata)&&void 0!==d?d:[],!0);if(1===_.size(n))h=u.splice(n[0],1)[0];else{var x=n.slice(0,-1);h=(0,I.ri)(u,x,function(A,H){var q=A[H],V=(0,f.ev)([],q.children,!0),fe=_.last(n),Fe=V.splice(fe,1)[0];return A[H]=(0,f.pi)((0,f.pi)({},q),{children:V}),Fe})}var L=function(c,a){return{type:"delete",deleted:{position:c,expr:a.expr,metadata:a.metadata}}}(n,h);this.updateFieldsMetadata(u,L)},a.prototype.updateFieldsMetadata=function(n,i){this.fieldsMetadataUpdate$.next({metadata:_.map(n,function(d){return{expr:d.expr,metadata:d.metadata,pickerDataExpr:d.pickerDataExpr,allowRename:d.allowRename,displayName:d.displayName,menu:d.menu,children:d.children,customTooltipContent:d.customTooltipContent,promotedAction$:d.promotedAction$,invalid:d.invalid,actionTooltip:d.actionTooltip}}),update:i})},a.prototype.setFieldsViewUpdate=function(n){w.fF.assertValue(n,"Expect fieldsMetadataUpdate to be defined");var i=_.map(n.metadata,function(d){return bt(d)});this.fieldsViewUpdate$.next({view:i,update:n.update})},a.prototype.ensureStrategies=function(){var n=this;(0,te.aj)([this.changes$("alwaysAllowAggregate",!0),this.changes$("aggregatesConstraint",!0),this.changes$("validators",!0)]).pipe((0,Pe.R)(this.onDestroy$)).subscribe(function(i){n.defaultStrategy=new sn(function(){var y;return null===(y=n.fieldsMetadataUpdate$.value)||void 0===y?void 0:y.metadata},function(){return n.dragDropPickerRef},i[0],i[1],i[2],n.aggrOps,n.conceptualSchemaProxy,n.dataSourcesService,n.displayNameService,n.localizationService)}),this.changes$("menuStrategy",!0).subscribe(function(i){n.menuStrategyInternal=i??n.defaultStrategy}),this.changes$("getDropExprStrategy",!0).subscribe(function(i){n.dropExprStrategyInternal=i??n.defaultStrategy}),this.changes$("displayNameStrategy",!0).subscribe(function(i){n.nameStrategyInternal=i??n.defaultStrategy,n.useCustomTooltip=!!n.nameStrategyInternal.getCustomTooltipContent}),this.changes$("flyoutFieldsStrategy",!0).subscribe(function(i){n.flyoutFieldsStrategyEnsured={getFieldsToSelectOnOpen:function(u,h){return i?.getFieldsToSelectOnOpen?i.getFieldsToSelectOnOpen(u,h):n.defaultStrategy.getFieldsToSelectOnOpen(u,h)},getFieldsToDisableOnOpen:function(u,h,y,x){return i?.getFieldsToDisableOnOpen?i.getFieldsToDisableOnOpen(u,h,y,x):n.defaultStrategy.getFieldsToDisableOnOpen(u,h,y,x)},handleSelectedField:function(u,h){return(0,f.mG)(n,void 0,void 0,function(){return(0,f.Jh)(this,function(y){switch(y.label){case 0:return i?.handleSelectedField?[4,i.handleSelectedField(u,h)]:[3,2];case 1:return y.sent(),[3,4];case 2:return[4,this.defaultStrategy.handleSelectedField(u,h)];case 3:y.sent(),y.label=4;case 4:return[2]}})})},handleDeselectedField:function(u){i?.handleDeselectedField?i.handleDeselectedField(u):n.defaultStrategy.handleDeselectedField(u)},onCloseWithCreateVisualCalc:function(u){return(0,f.mG)(n,void 0,void 0,function(){return(0,f.Jh)(this,function(h){switch(h.label){case 0:return i?.onCloseWithCreateVisualCalc?[4,i.onCloseWithCreateVisualCalc(u)]:[3,2];case 1:return h.sent(),[3,4];case 2:return[4,this.defaultStrategy.onCloseWithNewVisualCalc(u)];case 3:h.sent(),h.label=4;case 4:return[2]}})})},getVisualCalcCreationInfo:function(u){return(0,f.mG)(n,void 0,void 0,function(){return(0,f.Jh)(this,function(h){switch(h.label){case 0:return i?.getVisualCalcCreationInfo?[4,i.getVisualCalcCreationInfo(u)]:[3,2];case 1:return[2,h.sent()];case 2:return[2,this.defaultStrategy.getVisualCalcCreationInfo(u)]}})})},canOpenFlyout:function(u){return i?.canOpenFlyout?i.canOpenFlyout(u):n.defaultStrategy.canOpenFlyout(u)}}})},a.prototype.buildFieldListTreeModel=function(){return(0,f.mG)(this,void 0,void 0,function(){var n;return(0,f.Jh)(this,function(i){switch(i.label){case 0:return[4,this.getSchemaForFlyout()];case 1:return(n=i.sent())?(this.lastFieldListShowHiddenFields=this.shouldFieldListShowHiddenFields(),[2,new Te.O(this.localizationService).createModel(n,!1,!this.lastFieldListShowHiddenFields)]):[2]}})})},a.prototype.resetFieldListTreeModel=function(){return(0,f.mG)(this,void 0,void 0,function(){var n;return(0,f.Jh)(this,function(i){switch(i.label){case 0:return n=this,[4,this.buildFieldListTreeModel()];case 1:return n.fieldListTreeModel=i.sent(),this.setFieldListTreeExprs(),[2]}})})},a.prototype.shouldFieldListShowHiddenFields=function(){var n=this.viewModeState.getMode();return(1===n||2===n)&&this.reportSettingsService.getShowHiddenFields()},a.prototype.getSchemaForFlyout=function(){return(0,f.mG)(this,void 0,void 0,function(){var i;return(0,f.Jh)(this,function(d){switch(d.label){case 0:return d.trys.push([0,2,,3]),[4,this.conceptualSchemaProxy.get(this.getDataSourceForFlyout())];case 1:return[2,d.sent()];case 2:return(i=d.sent()).serviceError&&"CubeNameDoesNotExist"===i.serviceError.errorCode&&(this.perspectiveDoesNotExist=!0),[2];case 3:return[2]}})})},a.prototype.getDataSourceForFlyout=function(){var n=(0,Ee.yd)((0,f.ev)([],this.dataSourcesService.get(),!0));if(this.perspectiveDisplayName&&""!==this.perspectiveDisplayName){var i=n.findIndex(function(h){return"dsr"===h.type}),d=n[i];if(d){var u=(0,f.pi)((0,f.pi)({},d),{perspectiveId:this.perspectiveDisplayName});n[i]=u}}return n},a.prototype.getSchema=function(){return(0,f.mG)(this,void 0,void 0,function(){return(0,f.Jh)(this,function(i){switch(i.label){case 0:return[4,this.conceptualSchemaProxy.get(this.dataSourcesService.get())];case 1:return[2,i.sent()]}})})},a.prototype.getEffectiveReplacementPosition=function(n,i,d){return this.allowMultipleValues?(w.fF.assert(function(){return!d||"end"!==n},"an ItemPosition from replace should never be 'end'"),d?n:void 0):i>0&&("end"===n||1===_.size(n))?[0]:d?n:void 0},a.prototype.setFieldListTreeExprs=function(){var n=this;this.fieldListTreeModel&&(this.fieldListTreeExprs=[],_.forEach(this.fieldListTreeModel.entities,function(i){n.fieldListTreeExprs.push((0,ve.W4)(i));var d=_.map([i.columns,i.measures,i.kpis,i.hierarchies],function(h){return h.getItems()}),u=[].concat.apply([],d);_.forEach(u,function(h){var y=(0,ve.Sd)(h,n.groupingDesignStateService);n.fieldListTreeExprs.push(y)}),_.forEach(i.properties,function(h){_.forEach(h.properties,function(y){y instanceof xe.Jg&&(n.fieldListTreeExprs.push((0,ve.Sd)(y,n.groupingDesignStateService)),_.forEach(y.hierarchyLevels,function(x){n.fieldListTreeExprs.push((0,ve.Sd)(x,n.groupingDesignStateService))}))})}),_.forEach(i.hierarchies.getItems(),function(h){_.forEach(h.hierarchyLevels,function(y){var x=(0,ve.Sd)(y,n.groupingDesignStateService);n.fieldListTreeExprs.push(x)})})}))},a.\u0275fac=function(i){return new(i||a)(t.\u0275\u0275directiveInject(Lt.C),t.\u0275\u0275directiveInject(Bt.i),t.\u0275\u0275directiveInject(e.D),t.\u0275\u0275directiveInject(Qe.O),t.\u0275\u0275directiveInject(F.J),t.\u0275\u0275directiveInject(we.AA),t.\u0275\u0275directiveInject(t.Injector),t.\u0275\u0275directiveInject(Ge.o),t.\u0275\u0275directiveInject(Ke._),t.\u0275\u0275directiveInject(Rt.h),t.\u0275\u0275directiveInject(At.kc),t.\u0275\u0275directiveInject(Vt.Q),t.\u0275\u0275directiveInject(at.l),t.\u0275\u0275directiveInject(yt.yk),t.\u0275\u0275directiveInject(Ie.w,8))},a.\u0275cmp=t.\u0275\u0275defineComponent({type:a,selectors:[["field-picker-modern"]],viewQuery:function(i,d){if(1&i&&(t.\u0275\u0275viewQuery(zt,5),t.\u0275\u0275viewQuery(Wt,5)),2&i){var u=void 0;t.\u0275\u0275queryRefresh(u=t.\u0275\u0275loadQuery())&&(d.dragDropPickerRef=u.first),t.\u0275\u0275queryRefresh(u=t.\u0275\u0275loadQuery())&&(d.openFlyoutChevronQueryList=u)}},inputs:{initialExpr:"initialExpr",alwaysAllowAggregate:"alwaysAllowAggregate",aggregatesConstraint:"aggregatesConstraint",validators:"validators",allowReorderItems:"allowReorderItems",disallowReplaceItems:"disallowReplaceItems",allowMultipleValues:"allowMultipleValues",disableDropZoneIndicator:"disableDropZoneIndicator",disabled:"disabled",label:"label",addDataLabelKey:"addDataLabelKey",addDataAriaLabelKey:"addDataAriaLabelKey",ariaLabelledby:"ariaLabelledby",ariaDescribedby:"ariaDescribedby",withFieldList:"withFieldList",enterExitFieldRename:"enterExitFieldRename",allowEntityField:"allowEntityField",promotedActionStrategy:"promotedActionStrategy",getDropExprStrategy:"getDropExprStrategy",flyoutFieldsStrategy:"flyoutFieldsStrategy",directEditStrategy:"directEditStrategy",visualCalcFieldsStrategy:"visualCalcFieldsStrategy",menuStrategy:"menuStrategy",displayNameStrategy:"displayNameStrategy",externalCrossPickerDragDropMonitor:"externalCrossPickerDragDropMonitor",perspectiveDisplayName:"perspectiveDisplayName",tooltipPosition:"tooltipPosition",tooltipWithFlexiblePositions:"tooltipWithFlexiblePositions",disableAutoScroll:"disableAutoScroll",parameterPickerDataFormat:"parameterPickerDataFormat",visualCapabilities:"visualCapabilities",emptyFieldSetsDefaultLabel:"emptyFieldSetsDefaultLabel",role:"role",fieldListOverlayPanelClass:"fieldListOverlayPanelClass",allowClear:"allowClear",compact:"compact"},outputs:{onExprChange:"onExprChange",onCrossPickerDrop:"onCrossPickerDrop"},features:[t.\u0275\u0275InheritDefinitionFeature],decls:4,vars:5,consts:[["fieldPicker",""],[4,"ngIf"],["for","dragDropPickerRef","class","fluentTheme-sm-reg field-picker-label",4,"ngIf"],["id","dragDropPickerId",3,"compact","ariaLabelledby","dataFormat","disabled","placeholder","addDataLabelKey","addDataAriaLabelKey","draggable","allowEditingLabelsSetting","allowMultipleValues","allowClear","disableDropZoneIndicator","disableContentClick","pbiDragDropPickerActionsTemplate","itemPromotedActionTemplate","externalCrossPickerDragDropMonitor","v2Design","menuMode","useCustomTooltip","tooltipPosition","tooltipWithFlexiblePositions","disableAutoScroll","disableClearButtonTabNavigation","allowEmptyLabel","onChangeAdd","onChangeRemove","onChangeReorder","onChangeReplace","onChangeLabelUpdate","onCrossPickerDrop","onAddDataClick","onContentClick","onMenuItemClick","onClearButtonArrowRight"],["dragDropPickerRef",""],["promotedFieldActionTemplate",""],["pickerActionsTemplate",""],["for","dragDropPickerRef",1,"fluentTheme-sm-reg","field-picker-label"],[1,"pbi-drag-drop-picker-actions"],[1,"pbi-icon-button",3,"ngClass","click"],["tri-svg-icon-16","",3,"name","sprite","pbiTooltip"],["class","pbi-drag-drop-picker-actions",4,"ngIf"],["aria-hidden","true","class","button-divider",3,"ngClass",4,"ngIf"],["tabindex","-1","class","glyphicon pbi-glyph-chevronrightmedium glyph-mini pbi-focus-outline pbi-icon-button v2Design","aria-haspopup","true",3,"pbiTooltip","click","keydown.arrowLeft",4,"ngIf"],["class","pbi-focus-outline pbi-icon-button v2Design","tabindex","-1","aria-haspopup","true",3,"pbiTooltip","disabled","click","keydown.arrowLeft",4,"ngIf"],["class","glyphicon pbi-glyph-chevrondownsmall glyph-small pbi-focus-outline pbi-icon-button","aria-haspopup","true",3,"pbiTooltip","pbiMenu","menuMode","pbiMenuActivation","pbiMenuButtonClick",4,"ngIf"],["aria-hidden","true",1,"button-divider",3,"ngClass"],["tabindex","-1","aria-haspopup","true",1,"glyphicon","pbi-glyph-chevronrightmedium","glyph-mini","pbi-focus-outline","pbi-icon-button","v2Design",3,"pbiTooltip","click","keydown.arrowLeft"],["openFlyoutChevron",""],["tabindex","-1","aria-haspopup","true",1,"pbi-focus-outline","pbi-icon-button","v2Design",3,"pbiTooltip","disabled","click","keydown.arrowLeft"],["tri-svg-icon-16","",3,"name"],["aria-haspopup","true",1,"glyphicon","pbi-glyph-chevrondownsmall","glyph-small","pbi-focus-outline","pbi-icon-button",3,"pbiTooltip","pbiMenu","menuMode","pbiMenuActivation","pbiMenuButtonClick"]],template:function(i,d){1&i&&(t.\u0275\u0275elementStart(0,"div",null,0),t.\u0275\u0275template(2,tn,11,34,"ng-container",1),t.\u0275\u0275pipe(3,"async"),t.\u0275\u0275elementEnd()),2&i&&(t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",t.\u0275\u0275pureFunction1(3,nn,t.\u0275\u0275pipeBind1(3,1,d.fieldsView$))))},dependencies:[r.NgClass,r.NgIf,I.HV,Nt.l8,dt.V,ut.M,r.AsyncPipe,g.F,jt],styles:[".field-picker-label[_ngcontent-%COMP%]{display:inline-block;margin-bottom:4px}[_nghost-%COMP%]     .pbi-drag-drop-picker-actions button{height:fit-content;width:fit-content;margin-left:12px}[_nghost-%COMP%]     .pbi-drag-drop-picker-actions button.v2Design{margin-left:4px;border-radius:2px}[_nghost-%COMP%]     .pbi-drag-drop-picker-actions button:disabled tri-svg-icon{opacity:50%}[_nghost-%COMP%]     .pbi-drag-drop-picker-actions .button-divider{width:1px;background-color:var(--gray-130, #605E5C);margin-left:2px;margin-right:2px}[_nghost-%COMP%]     .pbi-drag-drop-picker-actions .button-divider.error{background-color:var(--globalColorCranberryShade10)}"],changeDetection:0}),a}(et.w),sn=function(){function c(a,n,i,d,u,h,y,x,L,A){this.getCurrentMetadata=a,this.getDragDropPickerRef=n,this.alwaysAllowAggregate=i,this.aggregatesConstraint=d,this.validators=u,this.aggrOps=h,this.conceptualSchemaProxy=y,this.dataSourcesService=x,this.displayNameService=L,this.localizationService=A}return c.prototype.getDropExpr=function(a,n){var i,d,u=a;if(this.shouldAggregate(a,n)){var h=null!=(null===(d=null===(i=this.validators)||void 0===i?void 0:i.field)||void 0===d?void 0:d.type)?[this.validators.field.type]:[];u=this.aggrOps.createExprWithAggregate(a,n,!0,h)}if(this.isValidDrop(u,n,!0))return Promise.resolve({expr:u})},c.prototype.getDroppedExprChildren=function(a,n,i,d){},c.prototype.getMenu=function(a,n,i,d){if(null!=a&&this.shouldShowPickerMenu(a,i)){var u={items:[]};if(this.shouldShowAggregationMenu(a,i)){var h=(0,ze._L)(a);u.items=this.createAggregateMenuItems(a,h,i)}else{var y=this.getVariations(a,i);_.isEmpty(y)||(u.items=this.createVariationMenuItems(y,a,i))}return u}},c.prototype.menuItemClickHandler=function(a,n,i){return this.onMenuItemSelected(a,n,i)},c.prototype.getDisplayName=function(a,n,i,d){return Mt(a,i,this.displayNameService)},c.prototype.isRenameAllowed=function(a){return!1},c.prototype.isFieldInvalid=function(a,n){return!1},c.prototype.getFieldsToSelectOnOpen=function(a,n){if(n)return[n]},c.prototype.getFieldsToDisableOnOpen=function(a,n,i,d){},c.prototype.handleSelectedField=function(a,n){var i,d,u;return(0,f.mG)(this,void 0,void 0,function(){var h,y,x=this;return(0,f.Jh)(this,function(L){switch(L.label){case 0:return w.fF.assertValue(a,"selectedField"),[4,this.conceptualSchemaProxy.get(this.dataSourcesService.get())];case 1:return h=L.sent(),y={fieldExpr:$e.ib.serializeExpr(a),label:Mt(a,h,this.displayNameService)},w.fF.assert(function(){return _.size(n)<=2},"field-picker-modern right now only supports maximum 2-levels of fields."),w.fF.assert(function(){return _.size(n)<2||(0,We.ez)((0,I.X)(x.getCurrentMetadata(),n).expr)},"field-picker-modern second-level field should only be hierarchy levels"),n?null===(i=this.getDragDropPickerRef())||void 0===i||i.handleReplace(y,[n[0]]):null===(d=this.getDragDropPickerRef())||void 0===d||d.handleAdd(y),null===(u=this.getDragDropPickerRef())||void 0===u||u.detectChanges(),[2]}})})},c.prototype.handleDeselectedField=function(a){w.fF.assertValue(a,"deselectedField");var n=this.getCurrentMetadata();if(!_.isEmpty(n)){var i=(0,kt.f)(a,n);if(!_.isEmpty(i)){var d=this.getDragDropPickerRef();d&&d.handleClear(i)}}},c.prototype.onCloseWithNewVisualCalc=function(a){return(0,f.mG)(this,void 0,void 0,function(){return(0,f.Jh)(this,function(n){return[2]})})},c.prototype.getVisualCalcCreationInfo=function(a){return(0,f.mG)(this,void 0,void 0,function(){return(0,f.Jh)(this,function(n){return[2,{supportVisualCalcCreation:!1}]})})},c.prototype.canOpenFlyout=function(a){return!0},c.prototype.rename=function(a,n){w.fF.assertFail("Expect this not to be called, rename is not allowed")},c.prototype.shouldAggregate=function(a,n){var i,d;return 1===(null===(d=null===(i=this.validators)||void 0===i?void 0:i.field)||void 0===d?void 0:d.kind)&&!R.m.discourageAggregation(a,n)},c.prototype.isValidDrop=function(a,n,i){var d;if(w.fF.assertValue(a,"expr"),!a)return!1;var u=a.getConceptualProperty(n),h=a.getMetadata(n);if(u?.kpiValue||!h)return!1;if(null!==(d=this.validators)&&void 0!==d&&d.field&&h?.kind!==this.validators.field.kind)return!1;var x=function(c){var a,n=null===(a=c?.field)||void 0===a?void 0:a.type;if(n)return n.variant||[n]}(this.validators);if(!_.isEmpty(x)&&!U.Ge.isCompatibleTo(h?.type,x,!0))return!1;if(i){var A=this.getCurrentMetadata();if(_.some(A,function(H){return(0,j.fS)(H.expr,a)}))return!1}return!0},c.prototype.shouldShowPickerMenu=function(a,n){return!!a&&!(0,We.kb)(a)&&(this.shouldShowAggregationMenu(a,n)||!_.isEmpty(this.getVariations(a,n)))},c.prototype.createAggregateMenuItems=function(a,n,i){var d,u,h=null!=(null===(u=null===(d=this.validators)||void 0===d?void 0:d.field)||void 0===u?void 0:u.type)?[this.validators.field.type]:[],x=(0,ue.Hh)(a,i,this.aggrOps,!1,this.alwaysAllowAggregate?Y.DW.GroupingOrMeasure:Y.DW.Measure,h,this.localizationService,void 0,void 0,this.aggregatesConstraint);return _.map(x,function(L){var A;return{text:L.text,type:Ue.iB.Button,data:L.key,checkable:!0,checked:(null===(A=L.key)||void 0===A?void 0:A.aggregate)===n}})},c.prototype.shouldShowAggregationMenu=function(a,n){return this.alwaysAllowAggregate&&!R.m.discourageAggregation(a,n)||this.shouldAggregate(a,n)},c.prototype.onMenuItemSelected=function(a,n,i){a.checked=!a.checked,w.fF.assert(function(){return 1===_.size(n)},"default field-picker creates menu only for first level of items");var L,d=n[0],u=this.getCurrentMetadata(),h=_.map(u,function(q){return q.expr}),y=h[d],x=u[d].metadata;if(a.data instanceof ze.Il)L=a.data;else{var A=a.data.aggregate;L=null==y?y:null==A?(0,lt.n)(y,i):(0,B.k)(y,A)}h[d]=L;var H=xt(n,x);return{newExpr:_.map(h,function(q,V){return{expr:q,metadata:u[V].metadata}}),fromUpdate:H}},c.prototype.getVariations=function(a,n){var i,d;if(0!==(null===(d=null===(i=this.validators)||void 0===i?void 0:i.field)||void 0===d?void 0:d.kind))return[];var u=a;if((0,We.ez)(a)&&!(u=(0,Z.ZB)(a)))return[];var h=(0,Z.wA)(n,u);if(!_.isArray(h)&&(0,j.fS)(h,u))return[];var y=(0,re.rY)(h),x=[];this.isValidDrop(u,n,!1)&&x.push(u);for(var L=0,A=y;L<A.length;L++){var H=A[L];this.isValidDrop(H,n,!1)&&x.push(H)}return 1===x.length&&((0,j.fS)(x[0],a)||(0,j.fS)(x[0],u))?[]:x},c.prototype.createVariationMenuItems=function(a,n,i){var d=this;return _.map(a,function(u){return{text:d.displayNameService.getDisplayName(u,i,null),type:Ue.iB.Button,data:u,checkable:!0,checked:(0,j.fS)(n,u)}})},c}();function bt(c){var a={fieldExpr:$e.ib.serializeExpr(c.pickerDataExpr),label:c.displayName.value,metadata:c.metadata,customTooltipContent:c.customTooltipContent,pbiStyle:c.displayName.pbiStyle,invalid:c.invalid},n=function(c){var a;return null!=c&&(c.invalid?a={type:1,sheet:"fluentui-icons",symbolId:"warning_20_regular",styles:{color:"var(--globalColorCranberryShade10)",fill:"currentColor"}}:(0,We.jX)(c.expr)&&(a={type:1,sheet:"visual-calc-icons",symbolId:"data_histogram_function_20_regular"})),a}(c);null!=n&&(a.icon=n);var i=c.menu,d=!_.isEmpty(i?.items);return{pickerData:a,allowRename:c.allowRename,menuFactory:d?i:void 0,children:_.map(c.children,function(u){return bt(u)}),promotedAction$:c.promotedAction$,actionTooltip:c.actionTooltip}}function Dt(c){return(0,f.pi)((0,f.pi)({},c.pickerData),{allowEditLabel:c.allowRename,menu:c.menuFactory,children:_.map(c.children,function(a){return Dt(a)}),actionTooltip:c.actionTooltip})}function Pt(c,a,n,i,d){var x,u=c.displayName,h=function(c,a,n){var i;if(1===c.length)i=a;else{var d=c.slice(0,-1);i=(0,I.X)(a,d).children}var y=function(c,a,n){if((0,nt.H2)(n))return c<_.last(n.deleted.position)?c:c+1;if((0,nt.JB)(n)){var i="end"===n.added.position?a-1:_.last(n.added.position);return c===i?void 0:c<i?c:c-1}if((0,nt.y$)(n))return c;if((0,nt.cS)(n)){var u=n.reordered.toPosition,h=_t(n.reordered.fromPosition.slice(0,-1),u.slice(0,-1));w.fF.assert(function(){return h},"Expect reordering only among siblings. Add your implementation for new scenario.");var y=_.last(n.reordered.fromPosition),x=_.last(n.reordered.toPosition);return c<y?c:y<=c&&c<x-1?c+1:c===x-1?y:c}if((0,nt.cA)(n))return c===_.last(n.replaced.position)?void 0:c;(0,nt.V5)(n)||w.fF.assertNever(n)}(_.last(c),_.size(i),n);if(null!=y)return c.slice(0,-1).concat(y)}(a,n,d);return null!=h&&(u=(0,I.X)(i,h).displayName),_.isEmpty(c.children)||(x=[],_.forEach(c.children,function(L,A){var H=Pt(L,a.concat(A),n,i,d);x.push(H)})),(0,f.pi)((0,f.pi)({},c),{displayName:u,children:x})}function _t(c,a){return _.size(c)===_.size(a)&&_.every(c,function(n,i){return n===a[i]})}function Mt(c,a,n){return n.getDisplayName(c,a,void 0,void 0,void 0,{includeVariationSource:!0})}function xt(c,a){return{type:"replace",replaced:{position:c,originalMetadata:a}}}var bn=[{type:ln,componentId:"FieldPickerComponentId"}],Dn=function(){function c(){}return c.\u0275fac=function(n){return new(n||c)},c.\u0275mod=t.\u0275\u0275defineNgModule({type:c}),c.\u0275inj=t.\u0275\u0275defineInjector({providers:(0,f.ev)((0,f.ev)([],p.U,!0),[e.D,F.J,N],!1),imports:[r.CommonModule,k.u5,E.N.withManifests(bn),P.v,m.K,D.C,M.b,T.N,W.H,ee.Z,J.J,b.X,k.UX,Ce.T6]}),c}()},98476:function(Me,Q,o){o.d(Q,{f:function(){return e}});var f=o(45413),r=o(74082);function k(F){return void 0!==F.pickerDataExpr}function e(F,E){for(var p,P=(0,r.ez)(F),m=E.length-1;m>=0;m--){var D=E[m],b=D.expr;if(P&&(0,r.y3)(b)){var T,M=m;if((T=k(D)?_.findIndex(D.children,function(W){return(0,f.fS)(W.expr,F)}):_.findIndex(D.hierarchyLevels,function(W){return(0,f.fS)(W.expr,F)}))>=0)return[M,T]}if((0,r.iV)(b)&&(b=b.arg),(0,f.fS)(b,F))return[m]}return p}},412:function(Me,Q,o){o.d(Q,{W:function(){return E}});var f=o(93247),r=o(9738),k=o(70863),e=o(50423),F=o(33565),E=function(){function P(p,m){this.deleteModelItemService=p,this.modelingSelectionService=m}return P.prototype.treeNodeKeyDown=function(p){return this.handleKeyDownEvent(p.sourceEvent,p.tree)},P.prototype.backgroundKeyDown=function(p){this.handleKeyDownEvent(p.sourceEvent,p.tree)},P.prototype.handleKeyDownEvent=function(p,m){return p.keyCode===f.yY?!!this.deleteModelItemService&&(p.stopPropagation(),this.deleteModelItemService.deleteAllFromModel(this.modelingSelectionService.selection,!0),!0):p.keyCode===f.hY?(this.modelingSelectionService.clear(),!0):!(p.keyCode!==f.A||!p.ctrlKey||(p.preventDefault(),p.stopPropagation(),this.selectAll(m),0))},P.prototype.selectAll=function(p){this.modelingSelectionService.selectAll(p.treeControl.dataNodes.map(function(m){return m.node.data}).filter(function(m){return(0,k.wb)(m)}),!0)},P.\u0275fac=function(m){return new(m||P)(e.\u0275\u0275inject(F.c,8),e.\u0275\u0275inject(r.W6))},P.\u0275prov=e.\u0275\u0275defineInjectable({token:P,factory:P.\u0275fac}),P}()},34162:function(Me,Q,o){o.d(Q,{E:function(){return E}});var f=o(64560),r={type:f.iB.Divider},k=o(92882),e=o(50423),F=o(65181),E=function(){function P(p){this.localizationService=p}return P.prototype.getMenu=function(p,m,D){return{items:this.getMenuItems(p,m,D)}},P.prototype.getMenuItems=function(p,m,D){for(var b=[],M=0,T=m;M<T.length;M++){var ee=this.getMenuSection(p,T[M],D);b.length>0&&ee.length>0&&b.push(r),b.push.apply(b,ee)}return b},P.prototype.getMenuSection=function(p,m,D){for(var b,M=[],T=0,W=m.items;T<W.length;T++){var ee=W[T],J=D.get(ee.id);if(J){var Ce={id:ee.id,type:ee.type,text:this.localizationService.format(ee.text),tooltip:this.localizationService.format(ee.tooltip),disabled:J.enabled&&!J.enabled(p)};if(J.getIcon&&(Ce.icon=J.getIcon(p)),ee.type===f.iB.SubMenu){var K=Ce;if(ee.menu&&(0,k.Q)(ee.menu)&&ee.menu.items&&(K.menu={items:this.getMenuSection(p,{items:ee.menu.items},D)}),J.getSubItems){var pe=J.getSubItems(p);pe.length>0&&(K.menu&&(0,k.Q)(K.menu)?(b=K.menu.items).push.apply(b,pe):K.menu={items:pe})}K.menu&&(0,k.Q)(K.menu)&&K.menu.items.length>0&&M.push(Ce)}else M.push(Ce)}}return M},P.\u0275fac=function(m){return new(m||P)(e.\u0275\u0275inject(F.o))},P.\u0275prov=e.\u0275\u0275defineInjectable({token:P,factory:P.\u0275fac}),P}()},17031:function(Me,Q,o){o.d(Q,{Z:function(){return D}});var f=o(14335),r=o(50423),k=o(77476);function e(b,M){1&b&&r.\u0275\u0275elementContainer(0)}var F=function(M){return{$implicit:M}};function E(b,M){if(1&b&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275template(1,e,1,0,"ng-container",2),r.\u0275\u0275elementContainerEnd()),2&b){var T=M.$implicit;r.\u0275\u0275nextContext();var W=r.\u0275\u0275reference(2);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngTemplateOutlet",W)("ngTemplateOutletContext",r.\u0275\u0275pureFunction1(2,F,T))}}function P(b,M){if(1&b&&(r.\u0275\u0275elementStart(0,"div",3)(1,"div",4),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"div",5),r.\u0275\u0275text(4),r.\u0275\u0275elementEnd()()),2&b){var T=M.$implicit;r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(T.title),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(T.value)}}var p=function(){function b(M){this.content=M,this.tooltipData=[],this.tooltipData=M}return b.\u0275fac=function(T){return new(T||b)(r.\u0275\u0275directiveInject(f.HK))},b.\u0275cmp=r.\u0275\u0275defineComponent({type:b,selectors:[["model-object-tooltip"]],decls:3,vars:1,consts:[[4,"ngFor","ngForOf"],["tooltipRow",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"tooltip-row"],[1,"tooltip-title-cell"],[1,"tooltip-value-cell"]],template:function(T,W){1&T&&(r.\u0275\u0275template(0,E,2,4,"ng-container",0),r.\u0275\u0275template(1,P,5,2,"ng-template",null,1,r.\u0275\u0275templateRefExtractor)),2&T&&r.\u0275\u0275property("ngForOf",W.tooltipData)},dependencies:[k.NgForOf,k.NgTemplateOutlet],styles:[".tooltip-row[_ngcontent-%COMP%]{display:table-row;font-size:12px}.tooltip-title-cell[_ngcontent-%COMP%]{display:table-cell;word-wrap:break-word;font-weight:var(--font-weight-regular, 400);max-width:260px;padding-top:1px;padding-bottom:1px;text-align:right}.tooltip-value-cell[_ngcontent-%COMP%]{display:table-cell;word-wrap:break-word;font-weight:var(--font-weight-semi-bold, 600);max-width:260px;padding-top:1px;padding-bottom:1px;padding-left:12px;text-align:left;white-space:break-spaces}"]}),b}(),m=o(65534),D=function(){function b(M){this.tooltipFactory=M,this.getTooltip=function(){return p}}return b.prototype.getTooltipComponentData=function(M){return this.tooltipFactory.getTooltipData(M.flatNode.node.data)},b.\u0275fac=function(T){return new(T||b)(r.\u0275\u0275inject(m.n))},b.\u0275prov=r.\u0275\u0275defineInjectable({token:b,factory:b.\u0275fac}),b}()},81141:function(Me,Q,o){o.d(Q,{x:function(){return k}});var f=o(70863),r=o(50423),k=function(){function e(){}return e.prototype.isCheckable=function(F){if(!f.wb(F))return!!(f.t3(F)||f.kb(F)||f.y3(F)||f.ez(F))},e.\u0275prov=r.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac=function(E){return new(E||e)}}),e}()},88023:function(Me,Q,o){o.d(Q,{F:function(){return k}});var f=o(70863),r=o(50423),k=function(){function e(){}return e.prototype.isDraggable=function(F){return!f.wb(F)&&!!(f.t3(F)||f.kb(F)||f.y3(F)||f.ez(F))},e.\u0275prov=r.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac=function(E){return new(E||e)}}),e}()},72525:function(Me,Q,o){o.d(Q,{VI:function(){return D},wt:function(){return m}});var f=o(81337),r=o(70863),k=o(59725),e=o(82332),F=o(50423),E=o(65181),m=function(){function b(M){this.localizationService=M,this.errorInlineItem={icon:{type:0,glyph:e.RB},label:this.localizationService.format("FieldListMenuItem_Error"),type:k.Q_.Icon,id:e.LA}}return b.prototype.getInlineItems=function(M){var T=[];return T.push.apply(T,this.getErrorInLineItem(M)),T},b.prototype.getErrorInLineItem=function(M){var T=[];return r.wb(M)&&M.isErrorState&&T.push(M.errorMessage?(0,f.pi)((0,f.pi)({},this.errorInlineItem),{label:M.errorMessage}):this.errorInlineItem),r.kb(M)&&M.isErrorState&&T.push((0,f.pi)((0,f.pi)({},this.errorInlineItem),{label:M.errorMessage})),r.t3(M)&&M.isErrorState&&T.push(this.errorInlineItem),T},b.\u0275fac=function(T){return new(T||b)(F.\u0275\u0275inject(E.o))},b.\u0275prov=F.\u0275\u0275defineInjectable({token:b,factory:b.\u0275fac}),b}(),D=function(){function b(M,T){this.localizationService=M,this.inlineItemSetting=T,this.hiddenInlineItem={icon:{type:0,glyph:e.cD},label:void 0,type:k.Q_.Button,id:e.zB},this.viewInlineItem={icon:{type:0,glyph:e.qV},label:void 0,type:k.Q_.Button,id:e.SO},this.hideInlineItemTooltip="Field_ShowInReportView",this.viewInlineItemTooltip="FieldListMenuItem_HideInReportViewTooltip"}return Object.defineProperty(b.prototype,"addHiddenItemsOnly",{set:function(T){this._addHiddenItemsOnly=T},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"hideInlineItemTooltip",{set:function(T){this.hiddenInlineItem.label=this.localizationService.format(T)},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"viewInlineItemTooltip",{set:function(T){this.viewInlineItem.label=this.localizationService.format(T)},enumerable:!1,configurable:!0}),b.prototype.getInlineItems=function(M){var T=[];return T.push.apply(T,this.inlineItemSetting.getInlineItems(M)),T.push.apply(T,this.getShowOrHideInLineItem(M)),T},b.prototype.getShowOrHideInLineItem=function(M){var T,W=[];if(r.Ov(M))return!(null===(T=M?.table)||void 0===T)&&T.isHidden&&W.push((0,f.pi)((0,f.pi)({},this.hiddenInlineItem),{type:k.Q_.Icon})),W;if(r.wb(M)||r.t3(M)||r.kb(M)||r.y3(M)){if(M.canEdit&&(0,r.uO)(M))M.isHidden?W.push(this.hiddenInlineItem):this._addHiddenItemsOnly||W.push((0,f.pi)((0,f.pi)({},this.viewInlineItem),{displayOnHover:!0}));else{var ee=this.localizationService.get("FieldListMenuItem_ShowHideDisabledForItem");M.isHidden?W.push((0,f.pi)((0,f.pi)({},this.hiddenInlineItem),{type:k.Q_.Icon,label:ee})):this._addHiddenItemsOnly||W.push((0,f.pi)((0,f.pi)({},this.viewInlineItem),{type:k.Q_.Icon,displayOnHover:!0,label:ee}))}return W}return r.ez(M)&&M.hierarchy.isHidden&&W.push((0,f.pi)((0,f.pi)({},this.hiddenInlineItem),{type:k.Q_.Icon})),W},b.\u0275fac=function(T){return new(T||b)(F.\u0275\u0275inject(E.o),F.\u0275\u0275inject(m))},b.\u0275prov=F.\u0275\u0275defineInjectable({token:b,factory:b.\u0275fac}),b}()},65534:function(Me,Q,o){o.d(Q,{n:function(){return E}});var f=o(29524),r=o(69615),k=o(70863),e=o(50423),F=o(65181),E=function(){function P(p,m){this.localizationService=p,this.captionSettingStrategy=m}return P.prototype.getTooltipData=function(p){return(0,k.wb)(p)?this.populateTableTooltip(p):(0,k.t3)(p)?this.populateColumnTooltip(p):(0,k.kb)(p)?this.populateMeasureTooltip(p):(0,k.jz)(p)?this.populateKpiTooltip(p):(0,k.y3)(p)?this.populateHierarchyTooltip(p):(0,k.ez)(p)?this.populateHierarchyLevelTooltip(p):(0,k.Mx)(p)?this.populateRelationshipTooltip(p):(0,k.Ao)(p)?this.populatePerspectiveTooltip(p):(0,k.KF)(p)?this.populateCultureTooltip(p):(0,k.yR)(p)?this.populatePartitionTooltip(p):(0,k.RF)(p)?this.populateCalculationItemTooltip(p):(0,k.OP)(p)?this.populateModelRoleTooltip(p):(0,k.CV)(p)?this.populateCalendarTooltip(p):[]},P.prototype.populateTableTooltip=function(p){var m=[];m.push({title:this.localizationService.get("Name"),value:this.getTableCaption(p)});var D=this.storageMode(p);D&&m.push({title:this.localizationService.get("StorageModeLabel"),value:this.localizationService.get(D)}),p.island&&(this.shouldShowTypeDescription(p)&&m.push({title:this.localizationService.get("ServerError_PersonalGateway_DataSourceKindLabel"),value:p.island.typeDescription}),this.shouldShowServerName(p)&&m.push({title:this.localizationService.get("DirectQueryContentProvider_ServerName"),value:p.island.serverName},{title:this.localizationService.get("DirectQueryContentProvider_DatabaseName"),value:p.island.databaseName}),this.shouldShowIslandName(p)&&m.push({title:this.localizationService.get("AnalysisServer_ServerName"),value:p.island.name})),this.shouldShowRefreshedTime(p)&&m.push({title:this.localizationService.get("Data_Refreshed_Label"),value:this.refreshedTime(p)});var b=this.captionSettingStrategy?this.captionSettingStrategy.getDescription(p):p.description;return b&&m.push({title:this.localizationService.get("Description"),value:b}),m},P.prototype.populateColumnTooltip=function(p){var m=[],D=this.captionSettingStrategy?this.captionSettingStrategy.getCaption(p):p.name,b=this.captionSettingStrategy?this.captionSettingStrategy.getCaption(p.table):p.table.name;m.push({title:this.localizationService.get("Name"),value:b?"'".concat(b,"'[").concat(D,"]"):D});var M=this.captionSettingStrategy?this.captionSettingStrategy.getDescription(p):p.description;return M&&m.push({title:this.localizationService.get("Description"),value:M}),m},P.prototype.populateMeasureTooltip=function(p){var m=[],D=this.captionSettingStrategy?this.captionSettingStrategy.getCaption(p):p.name;m.push({title:this.localizationService.get("Name"),value:"[".concat(D,"]")});var b=this.captionSettingStrategy?this.captionSettingStrategy.getDescription(p):p.description;return b&&m.push({title:this.localizationService.get("Description"),value:b}),m},P.prototype.populateKpiTooltip=function(p){var m=[],D=this.captionSettingStrategy?this.captionSettingStrategy.getCaption(p):p.name,b=this.getTableCaption(p.table);m.push({title:this.localizationService.get("Name"),value:b?"'".concat(b,"'[").concat(D,"]"):D});var M=this.captionSettingStrategy?this.captionSettingStrategy.getDescription(p):p.description;return M&&m.push({title:this.localizationService.get("Description"),value:M}),m},P.prototype.populateHierarchyTooltip=function(p){var m=[];m.push({title:this.localizationService.get("Name"),value:this.captionSettingStrategy?this.captionSettingStrategy.getCaption(p):p.name});var D=this.captionSettingStrategy?this.captionSettingStrategy.getDescription(p):p.description;return D&&m.push({title:this.localizationService.get("Description"),value:D}),m},P.prototype.populateHierarchyLevelTooltip=function(p){var m=[],D=this.getTableCaption(p.hierarchy.table),b=this.captionSettingStrategy?this.captionSettingStrategy.getCaption(p):p.name,M=b;p.column&&(M=this.captionSettingStrategy?this.captionSettingStrategy.getCaption(p.column):p.column.name),m.push({title:this.localizationService.get("Name"),value:"'".concat(D,"'[").concat(b,"]")}),m.push({title:this.localizationService.get("Base_field"),value:"[".concat(M,"]")});var T=this.captionSettingStrategy?this.captionSettingStrategy.getCaption(p):p.description;return!T&&p.column&&(T=this.captionSettingStrategy?this.captionSettingStrategy.getDescription(p.column):p.column.description),T&&m.push({title:this.localizationService.get("Description"),value:T}),m},P.prototype.populateRelationshipTooltip=function(p){var m=[],D=this.captionSettingStrategy?this.captionSettingStrategy.getCaption(p):p.displayName;return m.push({title:this.localizationService.get("Name"),value:"[".concat(D,"]")}),m},P.prototype.populatePerspectiveTooltip=function(p){var m=[],D=this.captionSettingStrategy?this.captionSettingStrategy.getCaption(p):p.name;return m.push({title:this.localizationService.get("Name"),value:"[".concat(D,"]")}),m},P.prototype.populateCultureTooltip=function(p){var m=[],D=this.captionSettingStrategy?this.captionSettingStrategy.getCaption(p):p.name;return m.push({title:this.localizationService.get("Name"),value:"[".concat(D,"]")}),m},P.prototype.populatePartitionTooltip=function(p){var m=[],D=this.captionSettingStrategy?this.captionSettingStrategy.getCaption(p):p.name;return m.push({title:this.localizationService.get("Name"),value:"[".concat(D,"]")}),m},P.prototype.populateCalculationItemTooltip=function(p){var m=[],D=this.captionSettingStrategy?this.captionSettingStrategy.getCaption(p):p.name;return m.push({title:this.localizationService.get("Name"),value:"[".concat(D,"]")}),m},P.prototype.populateModelRoleTooltip=function(p){var m=[],D=this.captionSettingStrategy?this.captionSettingStrategy.getCaption(p):p.name;return m.push({title:this.localizationService.get("Name"),value:"[".concat(D,"]")}),m},P.prototype.populateCalendarTooltip=function(p){var m=[],D=this.captionSettingStrategy?this.captionSettingStrategy.getCaption(p):p.name;return m.push({title:this.localizationService.get("Name"),value:"[".concat(D,"]")}),m},P.prototype.shouldShowTypeDescription=function(p){return!p.island.isImportIsland},P.prototype.shouldShowServerName=function(p){return!p.island.isImportIsland&&!!p.island.serverName&&!!p.island.databaseName},P.prototype.shouldShowIslandName=function(p){return!(p.island.isImportIsland||p.island.serverName&&p.island.databaseName)},P.prototype.shouldShowRefreshedTime=function(p){return!!this.refreshedTime(p)},P.prototype.storageMode=function(p){return"Import"===p.storageMode?"StorageMode_Import":"DirectQuery"===p.storageMode?"StorageMode_DirectQuery":"Dual"===p.storageMode?"StorageMode_Dual":"DirectLake"===p.storageMode?"StorageMode_DirectLake":void 0},P.prototype.refreshedTime=function(p){if(p.refreshedTime)return(0,r.jC)(p.refreshedTime).toLocaleDateString(this.localizationService.currentLanguageLocale,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})},P.prototype.getTableCaption=function(p){return this.captionSettingStrategy?this.captionSettingStrategy.getCaption(p):p.name},P.\u0275fac=function(m){return new(m||P)(e.\u0275\u0275inject(F.o),e.\u0275\u0275inject(f.B,8))},P.\u0275prov=e.\u0275\u0275defineInjectable({token:P,factory:P.\u0275fac}),P}()},41920:function(Me,Q,o){o.d(Q,{U:function(){return b}});var f=o(81141),r=o(88023),k=o(72525),e=o(412),F=o(34162),E=o(65534),P=o(17031),p=o(29524),m=o(72193),D=o(9738),b=[f.x,r.F,k.wt,e.W,F.E,E.n,P.Z,p.B,m.J,{provide:D.fc,useClass:D.$x}]},33565:function(Me,Q,o){o.d(Q,{c:function(){return ce}});var ee,f=o(81337),r=o(68082),k=o(53439),e=o(50423),F=new e.InjectionToken("ViewScopedUserSettingsService"),p="hideDeleteRelationshipConfirmation",m=function(N){return N.DeleteModelItem="DeleteModelItem",N}({}),D=o(74611),b=o(50550),M=o(62458),T=o(65843),W=o(55375);!function(N){var t="COMMANDS_DELETE_TABLE",Pe="ListJoin_Separator";function He(B,R){return(B=B.sort().map(function(U){return'"'+U+'"'})).join(R.get(Pe))}N.getDeleteConfirmationText=function(B,R){var U=(0,b.EB)(B.map(function(ge){return(0,D.cO)(ge)?(0,D.d3)(ge.fromTable.name,ge.fromColumn.name,ge.fromCardinality,ge.toTable.name,ge.toColumn.name,ge.toCardinality):ge.name})).join(R.get(Pe)+" "),Y=R.format("DeleteConfirmationMultiple",U);1===B.length&&(Y="Relationship"===B[0].objectType?R.get("DeleteRelationshipConfirmationMessage"):"Calendar"===B[0].objectType?R.get("DeleteCalendarConfirmationMessage"):R.format("DeleteMeasurePrompt",U));var ne=function(B,R){for(var U=(0,D.Y3)((0,D.L9)(B),R),Y=0,ne=B;Y<ne.length;Y++){var oe=ne[Y];if((0,D.t3)(oe)&&oe.table.refreshPolicy&&"DateTime"===oe.dataType){U.push(R.get("IncrementalRefreshPolicy"));break}}return U.filter(function(de){return!B.find(function(ge){return ge.name===de})})}(B,R);if(0!==ne.length){var oe=(0,b.EB)(ne).join(R.get(Pe)+" ");Y=R.format(1===ne.length?"DeleteConfirmationWithDependents":"DeleteConfirmationMultipleWithDependents",U,oe)}var me=function(B){for(var R=new Set,U=0,Y=B;U<Y.length;U++){var ne=Y[U];if((0,D.t3)(ne)){var oe=ne,me=oe.table.description,le=(0,D.aP)(oe.table,oe),de=(0,D.q1)(oe.table,oe);(0,D.oQ)(oe.table,me,le?.name,de?.name)&&R.add(oe.table.name)}}return Array.from(R)}(B);if(0!==me.length){var le=(0,b.EB)(me).join(R.get(Pe)+" ");Y=Y+"<br/><br/>"+R.format("DeleteConfirmationForCuration",le)}return Y},N.showConfirmDialogToDeleteTableWithDependents=function(B,R,U,Y){return(0,f.mG)(this,void 0,void 0,function(){var ne;return(0,f.Jh)(this,function(le){switch(le.label){case 0:return ne=function(B,R,U){for(var Y=new Set,ne=0,oe=B;ne<oe.length;ne++)Y.add(oe[ne].name);for(var le=[],de=[],ge=0,we=Object.keys(R);ge<we.length;ge++)for(var Ie=we[ge],Ae=!1,Le=0,Qe=R[Ie];Le<Qe.length;Le++){var Ge=Qe[Le];Y.has(Ge)||(Ae||(le.push(Ie),Ae=!0),de.push(Ge))}if(0!==le.length){M.fF.assert(function(){return de.length>0},"If some tables are remaining, there should have dependents remaining as well");var tt=He(de,U);if(1===le.length)return 1===de.length?U.format("DeleteQueryWithOneDependent",le[0],de[0]):U.format("DeleteQueryWithMultipleDependents",le[0],tt);var st=He(le,U);return U.format("DeleteQueriesWithMultipleDependents",st,tt)}}(B,R,U),ne?[4,W.Z.buildOKCancelDialogWithList(U.get(t),[ne],"deleteTableConfirmationDialog",U.get("ReportModelTableLoadWillBeDisabled"),Y,U)]:[2,!0];case 1:return[4,le.sent().afterClosed().toPromise()];case 2:return[2,1===le.sent()]}})})},N.getQueryToDependents=function(B,R){for(var U={},Y={},ne=B.dataModelExtendedState.queryDependencyGraph,oe=0,me=Object.keys(ne);oe<me.length;oe++)for(var le=me[oe],ge=0,we=ne[le];ge<we.length;ge++){var Ie=we[ge];Y[Ie]||(Y[Ie]=new Set),Y[Ie].add(le)}for(var ke=0,Ae=R;ke<Ae.length;ke++){var Le=Ae[ke];Y[Le.name]&&(U[Le.name]=Array.from(Y[Le.name]))}return U},N.reorderItemsToMinimizeDependencies=function(B,R,U,Y){for(var ne=function(B,R){for(var U=[],Y=B.length,ne=function(){var me=B.length,le=new Set;B.forEach(function(de){R[de.name]&&R[de.name].forEach(function(ge){return le.add(ge)})}),U=U.concat(B.filter(function(de){return!le.has(de.name)})),B=B.filter(function(de){return le.has(de.name)}),me===B.length&&M.fF.assertFail("Unable to calculate table dependencies")};B.length>0;)ne();return Y!==(U=U.reverse()).length&&M.fF.assertFail("ordered table number is not same as the origin number for deletion"),U}(R,U),oe=B.filter(function(ge){return!(0,D.wb)(ge)}),me=[],le=function(){var we=new Set((0,D.Y3)((0,D.L9)(oe),Y)),Ie=oe.filter(function(ke){return!we.has(ke.name)});me=Ie.concat(me),oe=oe.filter(function(ke){return we.has(ke.name)})};oe.length>0;)le();var de=me.concat(ne);return B.length!==de.length&&M.fF.assertFail("ordered all item number is not same as the origin number for deletion"),de},N.createDeleteSchemaChange=function(B){var R=B.objectType;if("Relationship"===R){var U=B;return{relationshipDelete:{fromColumns:[T.X6.getColumnUrn(U.fromTable.name,U.fromColumn.name,U.fromColumn.schemaName)],toColumns:[T.X6.getColumnUrn(U.toTable.name,U.toColumn.name,U.toColumn.schemaName)]}}}if("Level"===R)return{hierarchyLevelDelete:{schema:B.schemaName,entity:B.hierarchy.table.name,hierarchy:B.hierarchy.name,hierarchyLevel:B.name}};if("Table"===R||"Expression"===R)return{itemDelete:{schema:B.schemaName,entity:B.name,objectType:B.objectType}};var ne=void 0;return"Column"===R||"Measure"===R||"Hierarchy"===R?ne=B:"CalculationItem"===R?ne=B.calculationGroup:"Calendar"===R?ne=B:M.fF.assertFail("This object type is not implemented "+R.toString()+"when create schemaChange"),{itemDelete:{schema:B.schemaName,entity:ne.table.name,objectType:B.objectType,property:B.name}}},N.getDeleteComfirmationTitle=function(B,R){if(1!==B.length)return R.get("ReportModelDeleteItemsTitle");switch(B[0].objectType){case"Table":return R.get(t);case"Column":return R.get("DeleteColumnConfirmationTitle");case"Measure":return R.get("DeleteMeasurePromptTitle");case"Hierarchy":return R.get("DeleteHierarchyConfirmationTitle");case"Level":return R.get("DeleteHierarchyLevelConfirmationTitle");case"Relationship":return R.get("DeleteRelationshipConfirmationTitle");case"Calendar":return R.format("DeleteCalendarConfirmationTitle",B[0].name);default:M.fF.assertFail("Unexpected type being deleted")}},N.getDeleteConfirmationOkButtonText=function(B,R){if(1!==B.length)return R.get("Yes");switch(B[0].objectType){case"Table":case"Column":case"Measure":case"Hierarchy":case"Level":case"Relationship":return R.get("Yes");case"Calendar":return R.get("Delete");default:M.fF.assertFail("Unexpected type being deleted")}}}(ee||(ee={}));var J=o(70863),Ce=o(58938),K=o(65181),pe=o(66339),ce=function(){function N(t,X,te,ae,be,Oe){this.modelAuthoring=t,this.dataModelService=X,this.dialogService=te,this.localizationService=ae,this.telemetryService=be,this.viewScopedUserSettingsService=Oe}return N.prototype.deleteAllFromModel=function(t,X,te){if(void 0===te&&(te=!1),t.every(function(be){return!0===be.canDelete})){var ae=this.createDeleteItems(t,X);return this.deleteModelItem(ae,te)}},N.prototype.createDeleteItems=function(t,X){var te=[];if(!t)return te;var ae=[],be=[],Oe=[],_e=[];t.forEach(function(I){(0,J.wb)(I)?ae.push(I):(0,J.y3)(I)?be.push(I):(0,J.ez)(I)?Oe.push(I):_e.push(I)});var Pe=[];return Oe.forEach(function(I){if(be.every(function(Ee){return Ee.urn!==I.hierarchy.urn})&&ae.every(function(Ee){return Ee.urn!==I.hierarchy.table.urn})){var ue=Pe.find(function(Ee){return Ee.hierarchy===I.hierarchy});ue||Pe.push(ue={hierarchy:I.hierarchy,levelsToDelete:[]}),ue.levelsToDelete.push(I)}}),Pe.forEach(function(I){X&&I.levelsToDelete.length===I.hierarchy.levels.length?be.push(I.hierarchy):_e.push.apply(_e,I.levelsToDelete||[])}),_e.forEach(function(I){(0,J.Mx)(I)?te.push({itemName:I.name,schema:null,objectType:"Relationship"}):(0,J.ez)(I)?te.push({schema:I.schemaName,tableName:I.hierarchy.table.name,itemName:I.hierarchy.name,subItemName:I.name,objectType:"Level"}):(0,J.kb)(I)||(0,J.jz)(I)?ae.every(function(ue){return ue.urn!==I.table.urn})&&te.push({schema:I.schemaName,tableName:I.table.name,itemName:I.name,objectType:"Measure"}):(0,J.t3)(I)?ae.every(function(ue){return ue.urn!==I.table.urn})&&te.push({schema:I.schemaName,tableName:I.table.name,itemName:I.name,objectType:"Column"}):(0,J.RF)(I)?ae.every(function(ue){return ue.urn!==I.calculationGroup.table.urn})&&te.push({schema:I.schemaName,tableName:I.calculationGroup.table.name,itemName:I.name,objectType:"CalculationItem"}):(0,J.CV)(I)&&ae.every(function(ue){return ue.urn!==I.table.urn})&&te.push({schema:I.schemaName,tableName:I.table.name,itemName:I.name,objectType:"Calendar"})}),be.forEach(function(I){ae.every(function(ue){return ue.urn!==I.table.urn})&&te.push({schema:I.schemaName,tableName:I.table.name,itemName:I.name,objectType:"Hierarchy"})}),ae.forEach(function(I){te.push({schema:I.schemaName,tableName:I.name,itemName:null,objectType:"Table"})}),te},N.prototype.deleteModelItem=function(t,X){return(0,f.mG)(this,void 0,void 0,function(){var te,ae,be,Oe,_e,Pe,ue,Ee,re,j;return(0,f.Jh)(this,function(Z){switch(Z.label){case 0:if(_.isEmpty(t))return[2];for(te=this.dataModelService.getClientDataModel(),ae=[],be=0,Oe=t;be<Oe.length;be++){if(!(Pe=(0,D.Mf)(te.dataModel,(_e=Oe[be]).objectType,_e.schema,_e.tableName,_e.itemName,_e.subItemName))||!Pe.capabilities.canDelete)return[2];ae.push(Pe)}return X||this.hasUserOptedOutOfConfirmation(ae)?[3,2]:[4,this.confirmDeleteObjects(te.dataModel,ae,t)];case 1:if(!Z.sent())return[2];Z.label=2;case 2:return ue=ae.filter(function(ve){return(0,D.wb)(ve)}),Ee=ee.getQueryToDependents(te,ue),[4,ee.showConfirmDialogToDeleteTableWithDependents(ue,Ee,this.localizationService,this.dialogService)];case 3:return Z.sent()?(re=ee.reorderItemsToMinimizeDependencies(ae,ue,Ee,this.localizationService),j=re.map(function(ve){return ee.createDeleteSchemaChange(ve)}),j?.length>0?(this.telemetryService.logApplyChanges([m.DeleteModelItem]),[4,this.modelAuthoring.apply({changes:j})]):[3,5]):[2];case 4:Z.sent(),Z.label=5;case 5:return[2]}})})},N.prototype.hasUserOptedOutOfConfirmation=function(t){return!(!this.viewScopedUserSettingsService||!this.everyItemIsRelationship(t)||!this.viewScopedUserSettingsService.get(p))},N.prototype.confirmDeleteObjects=function(t,X,te){return(0,f.mG)(this,void 0,void 0,function(){var ae,be,_e;return(0,f.Jh)(this,function(Pe){switch(Pe.label){case 0:if(0===X.length)return[2,!1];if(1===X.length){if("CalculationItem"===X[0].objectType)return[2,!0];if((ae=(0,D.Lc)(t,te[0].schema,te[0].tableName,te[0].itemName))&&(0,D.e_)(ae))return[2,!0]}return be=this.shouldIncludeDontAskAgainCheckbox(X)?this.localizationService.get("Generic_DontShowThisAgain"):void 0,[4,W.Z.buildOKCancelDialog({title:ee.getDeleteComfirmationTitle(X,this.localizationService),message:ee.getDeleteConfirmationText(X,this.localizationService),doNotShowAgain:be},"deleteConfirmationDialog",this.dialogService,this.localizationService,ee.getDeleteConfirmationOkButtonText(X,this.localizationService))];case 1:return[4,Pe.sent().afterClosed().toPromise()];case 2:return 5===(_e=Pe.sent())?(this.handleDontAskAgainCheckbox(X),[2,!1]):2===_e||3===_e?[2,!1]:4===_e?(this.handleDontAskAgainCheckbox(X),[2,!0]):[2,1===_e]}})})},N.prototype.shouldIncludeDontAskAgainCheckbox=function(t){return!!this.viewScopedUserSettingsService&&!!this.everyItemIsRelationship(t)},N.prototype.handleDontAskAgainCheckbox=function(t){this.viewScopedUserSettingsService&&this.everyItemIsRelationship(t)&&this.viewScopedUserSettingsService.set(p,!0)},N.prototype.everyItemIsRelationship=function(t){return t.every(function(X){return"Relationship"===X.objectType})},N.\u0275fac=function(X){return new(X||N)(e.\u0275\u0275inject(k.S),e.\u0275\u0275inject(r.n),e.\u0275\u0275inject(Ce.x),e.\u0275\u0275inject(K.o),e.\u0275\u0275inject(pe.L),e.\u0275\u0275inject(F,8))},N.\u0275prov=e.\u0275\u0275defineInjectable({token:N,factory:N.\u0275fac}),N}()},34145:function(Me,Q,o){o.d(Q,{q:function(){return r}});var r=new(o(50423).InjectionToken)("ModelService")},9738:function(Me,Q,o){o.d(Q,{$x:function(){return F},W6:function(){return k},fc:function(){return e}});var f=o(50423),r=o(30794),k=new f.InjectionToken("ModelingSelectionService"),e=new f.InjectionToken("ModelingCheckingService"),F=function(){function E(){this.notifcationsuspended=!1,this.selectedItems=new Set,this.selectionChanged=new r.xQ}return E.prototype.suspendNotification=function(){this.notifcationsuspended=!0},E.prototype.resumeNotification=function(){this.notifcationsuspended=!1,this.notifySelectionChanged()},E.prototype.select=function(P,p){this.selectAll([P],p)},E.prototype.deselect=function(P){this.selectedItems.delete(P),this.notifySelectionChanged()},E.prototype.selectAll=function(P,p){p&&this.selectedItems.clear();for(var m=0,D=P;m<D.length;m++)this.selectedItems.add(D[m]);this.notifySelectionChanged()},E.prototype.clear=function(){this.selectedItems.clear(),this.notifySelectionChanged()},E.prototype.isSelected=function(P){return this.selectedItems.has(P)},Object.defineProperty(E.prototype,"selection",{get:function(){return Array.from(this.selectedItems)},enumerable:!1,configurable:!0}),E.prototype.notifySelectionChanged=function(){this.notifcationsuspended||this.selectionChanged.next(this.selection)},E.\u0275prov=f.\u0275\u0275defineInjectable({token:E,factory:E.\u0275fac=function(p){return new(p||E)}}),E}()},49346:function(Me,Q,o){o.d(Q,{TM:function(){return b},Yk:function(){return F},Yt:function(){return P},g4:function(){return m}});var f=o(41114),r="ClientSystemErrorBase",e=(f.cx[r]=(0,f.b1)(r),"PBIModelingCommonApplyChange"),F=f.cx[e]=(0,f.b1)(e),E="PBIModelingCommonDataModelUpdated",P=f.cx[E]=(0,f.b1)(E),p="PBIExecuteDataQueryCacheEventName",m=f.cx[p]=(0,f.b1)(p),D="PBISortByColumnDataQueryValidationEventName",b=f.cx[D]=(0,f.b1)(D)},66339:function(Me,Q,o){o.d(Q,{L:function(){return P}});var f=o(34145),r=o(49346),k=o(68082),e=o(46544),F=o(34763),E=o(50423),P=function(){function p(m,D,b){var T,W,M=this;this.dataModelService=m,this.modelService=D,this.telemetryService=b,this.subscriptions=new F.w,this.telemetryService&&this.modelService&&this.dataModelService&&(this.subscriptions.add(null===(T=this.dataModelService.modelChanged$)||void 0===T?void 0:T.subscribe(function(){M.logModelUpdated()})),this.subscriptions.add(null===(W=this.dataModelService.modelLoaded$)||void 0===W?void 0:W.subscribe(function(){M.logModelUpdated()})))}return p.prototype.initialize=function(){},p.prototype.ngOnDestroy=function(){this.subscriptions.unsubscribe()},p.prototype.logModelUpdated=function(){var m,D,b=this.dataModelService.getDataModel();this.telemetryService.root&&this.telemetryService.logEvent(r.Yt,{modelVersion:this.dataModelService.version,tables:null===(m=b?.tables)||void 0===m?void 0:m.length,relationships:null===(D=b?.relationships)||void 0===D?void 0:D.length})},p.prototype.logApplyChanges=function(m){var D,b;this.telemetryService.root&&this.telemetryService.logEvent(r.Yk,{change:m.join(", "),modelVersion:null===(b=null===(D=this.modelService)||void 0===D?void 0:D.model)||void 0===b?void 0:b.version})},p.\u0275fac=function(D){return new(D||p)(E.\u0275\u0275inject(k.n,8),E.\u0275\u0275inject(f.q,8),E.\u0275\u0275inject(e.y0,8))},p.\u0275prov=E.\u0275\u0275defineInjectable({token:p,factory:p.\u0275fac}),p}()},55375:function(Me,Q,o){o.d(Q,{Z:function(){return r}});var f=o(81337),r=function(){function k(){}return k.buildOKCancelDialog=function(e,F,E,P,p,m){return void 0===p&&(p=P.get("Yes")),void 0===m&&(m=P.get("Cancel_ButtonText")),e=(0,f.pi)((0,f.pi)({},e),{okButtonText:p,cancelButtonText:m}),E.openHostDialog({dialogName:F,componentName:"SimpleConfirmationDialogComponent",bindings:e,config:{width:"500px",panelClass:["mat-dialog-content-nonextra-space"],ariaDescribedBy:"simple-dialog-content-id"}})},k.buildOKCancelDialogWithList=function(e,F,E,P,p,m){var D=F.join(" ");return this.buildOKCancelDialog({title:e,message:void 0,additionalMessages:[[D,{segmentStr:"",lineBreak:!0},{segmentStr:"",lineBreak:!0},P]]},E,p,m)},k.buildCancelDialog=function(e,F,E,P,p,m,D,b){var M={dialogName:E,componentName:"SimpleDialogComponent",bindings:{titleIcon:D,title:e,message:F,okButtonText:m||p.get("Close")},config:(0,f.pi)({width:"500px",panelClass:["mat-dialog-content-nonextra-space","legacy-dialog"],ariaDescribedBy:"simple-dialog-content-id"},b)};return P.openHostDialog(M)},k}()},4722:function(Me,Q,o){o.d(Q,{HV:function(){return vt},X:function(){return ct},ri:function(){return Je}});var f=o(81337),r=o(64560),k=o(93247),e=o(50423),F=o(17174),E=o(62458),P=o(59694),p=o(14172),m=o(59973),D=o(22318),b=o(6663),M=o(35497),T=o(65181),W=o(77476),ee=o(23097),J=o(59968),Ce=o(44581),K=o(24150),pe=o(86663),he=o(80357),ce=o(45916),N=o(36858),t=o(85102),X=["dragDropPicker"],te=["clearButton"],ae=["contentLabel"],be=["listOfData"],Oe=function(){return[]},_e=function(s,l){return{nonEmptyDisplayDataList:s,isTopLevel:!0,rootToParentIndices:l}};function Pe(g,s){if(1&g&&e.\u0275\u0275elementContainer(0,7),2&g){var l=e.\u0275\u0275nextContext(),v=e.\u0275\u0275reference(5);e.\u0275\u0275property("ngTemplateOutlet",v)("ngTemplateOutletContext",e.\u0275\u0275pureFunction2(3,_e,l.listOfPbiDisplayData,e.\u0275\u0275pureFunction0(2,Oe)))}}function I(g,s){if(1&g){var l=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",8),e.\u0275\u0275listener("drop",function(C){e.\u0275\u0275restoreView(l);var S=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(S.handleDrop(C))})("dragover",function(C){e.\u0275\u0275restoreView(l);var S=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(!S.isItRedundantPositionToDropCurrentData("end")&&S.handleDragover(C))})("dragenter",function(){e.\u0275\u0275restoreView(l);var C=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(C.handleDragEnterListEndArea())})("dragleave",function(){e.\u0275\u0275restoreView(l);var C=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(C.handleDragLeaveListEndArea())}),e.\u0275\u0275elementEnd()}}var ue=function(s){return{highlight:s}};function Ee(g,s){if(1&g){var l=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",20),e.\u0275\u0275listener("dragenter",function(){e.\u0275\u0275restoreView(l);var S=e.\u0275\u0275nextContext().index,O=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(O.handleDragEnterPosition([S]))})("dragleave",function(){e.\u0275\u0275restoreView(l);var S=e.\u0275\u0275nextContext().index,O=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(O.handleDragLeavePosition([S]))})("dragover",function(S){e.\u0275\u0275restoreView(l);var O=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(!O.isItRedundantPositionToDrop()&&O.handleDragover(S))})("drop",function(S){e.\u0275\u0275restoreView(l);var O=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(O.handleDrop(S))}),e.\u0275\u0275elementEnd()}if(2&g){var v=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(1,ue,v.highlight))}}function w(g,s){1&g&&e.\u0275\u0275elementContainer(0)}function re(g,s){1&g&&e.\u0275\u0275elementContainer(0)}function j(g,s){1&g&&e.\u0275\u0275elementContainer(0)}var Z=function(s,l){return{nonEmptyDisplayDataList:s,isTopLevel:!1,rootToParentIndices:l}};function ve(g,s){if(1&g&&e.\u0275\u0275elementContainer(0,7),2&g){var l=e.\u0275\u0275nextContext(2),v=l.$implicit,C=l.index,S=e.\u0275\u0275nextContext().rootToParentIndices;e.\u0275\u0275nextContext();var O=e.\u0275\u0275reference(5);e.\u0275\u0275property("ngTemplateOutlet",O)("ngTemplateOutletContext",e.\u0275\u0275pureFunction2(2,Z,v.children,S.concat(C)))}}var xe=function(s,l,v){return{$implicit:s,position:l,field:v}};function Te(g,s){if(1&g&&e.\u0275\u0275elementContainer(0,7),2&g){var l=e.\u0275\u0275nextContext(2),v=l.index,C=l.$implicit,S=e.\u0275\u0275nextContext().rootToParentIndices,O=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngTemplateOutlet",O.pbiDragDropPickerActionsTemplate)("ngTemplateOutletContext",e.\u0275\u0275pureFunction3(2,xe,O.picker,S.concat(v),C))}}var ze=function(s){return{compact:s}},We=function(s,l,v,C){return{isTopLevel:s,displayData:l,allowDrag:v,position:C}},Be=function(s){return{position:s}};function Ue(g,s){if(1&g&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",21)(2,"div",22),e.\u0275\u0275template(3,w,1,0,"ng-container",23),e.\u0275\u0275template(4,re,1,0,"ng-container",23),e.\u0275\u0275template(5,j,1,0,"ng-container",23),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,ve,1,5,"ng-container",24),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,Te,1,6,"ng-container",24),e.\u0275\u0275elementContainerEnd()),2&g){var l=e.\u0275\u0275nextContext(),v=l.$implicit,C=l.index,S=e.\u0275\u0275reference(7),O=e.\u0275\u0275reference(11),G=e.\u0275\u0275nextContext(),z=G.isTopLevel,se=G.rootToParentIndices,ye=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(9,ze,ye.compact)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngTemplateOutlet",S)("ngTemplateOutletContext",e.\u0275\u0275pureFunction4(11,We,z,v,!v.isEditing&&(ye.draggable||!ye.allowMultipleValues)&&z,se.concat(C))),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngTemplateOutlet",ye.itemPromotedActionTemplate)("ngTemplateOutletContext",e.\u0275\u0275pureFunction3(16,xe,ye.picker,se.concat(C),v)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngTemplateOutlet",O)("ngTemplateOutletContext",e.\u0275\u0275pureFunction1(20,Be,se.concat(C))),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(null==v.children?null:v.children.length)>0),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",z)}}function rt(g,s){1&g&&e.\u0275\u0275elementContainer(0)}function Ke(g,s){1&g&&e.\u0275\u0275elementContainer(0)}function at(g,s){1&g&&e.\u0275\u0275elementContainer(0)}var He=function(s,l,v){return{isTopLevel:!0,displayData:s,allowDrag:l,position:v}};function lt(g,s){if(1&g&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,rt,1,0,"ng-container",23),e.\u0275\u0275template(2,Ke,1,0,"ng-container",23),e.\u0275\u0275template(3,at,1,0,"ng-container",23),e.\u0275\u0275elementContainerEnd()),2&g){var l=e.\u0275\u0275nextContext(),v=l.$implicit,C=l.index,S=e.\u0275\u0275reference(7),O=e.\u0275\u0275reference(11),G=e.\u0275\u0275nextContext().rootToParentIndices,z=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngTemplateOutlet",S)("ngTemplateOutletContext",e.\u0275\u0275pureFunction3(6,He,v,!v.isEditing&&(z.draggable||!z.allowMultipleValues),G.concat(C))),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngTemplateOutlet",z.pbiDragDropPickerActionsTemplate)("ngTemplateOutletContext",e.\u0275\u0275pureFunction3(10,xe,z.picker,G.concat(C),v)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngTemplateOutlet",O)("ngTemplateOutletContext",e.\u0275\u0275pureFunction1(14,Be,G.concat(C)))}}var et=function(s){return{width:s}};function $e(g,s){if(1&g&&e.\u0275\u0275element(0,"div",32),2&g){var l=e.\u0275\u0275nextContext().position;e.\u0275\u0275property("ngStyle",e.\u0275\u0275pureFunction1(1,et,8*(l.length-1)+"px"))}}function B(g,s){if(1&g&&e.\u0275\u0275element(0,"pbi-icon",33),2&g){var l=e.\u0275\u0275nextContext().displayData,v=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("name",l.icon.glyph)("size",v.smallIconSize)}}function R(g,s){if(1&g&&e.\u0275\u0275element(0,"pbi-svg-use-symbol",34),2&g){var l=e.\u0275\u0275nextContext().displayData;e.\u0275\u0275property("ngStyle",l.icon.styles)("sheet",l.icon.sheet)("symbolId",l.icon.symbolId)}}function U(g,s){if(1&g){var l=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"input",35),e.\u0275\u0275listener("ngModelChange",function(S){e.\u0275\u0275restoreView(l);var O=e.\u0275\u0275nextContext().displayData;return e.\u0275\u0275resetView(O.value=S)})("keydown",function(S){e.\u0275\u0275restoreView(l);var O=e.\u0275\u0275nextContext().position,G=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(G.handleKeyDown(S,O))})("blur",function(){e.\u0275\u0275restoreView(l);var S=e.\u0275\u0275nextContext().position,O=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(O.endEditSection(S))}),e.\u0275\u0275elementEnd()}if(2&g){var v=e.\u0275\u0275nextContext().displayData;e.\u0275\u0275property("ngModel",v.value)}}var Y=function(s,l){return{showHover:s,interactable:l}};function ne(g,s){if(1&g){var l=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",25,26),e.\u0275\u0275listener("singleClickAction",function(){var se=e.\u0275\u0275restoreView(l).position;e.\u0275\u0275nextContext();var ye=e.\u0275\u0275reference(3),De=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(De.v2Design&&!De.disableContentClick&&De.handleContentClick(ye,se))})("doubleClickAction",function(){var se=e.\u0275\u0275restoreView(l).position,ye=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(ye.beginEditSection(se))})("accessible-click",function(){var se=e.\u0275\u0275restoreView(l).position;e.\u0275\u0275nextContext();var ye=e.\u0275\u0275reference(3),De=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(De.v2Design&&!De.disableContentClick&&De.handleContentClick(ye,se))})("keydown.F2",function(){var z=e.\u0275\u0275restoreView(l),se=z.displayData,ye=z.position,De=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(se.allowEditing&&!se.isEditing?De.beginEditSection(ye):De.return)})("keydown.arrowRight",function(z){e.\u0275\u0275restoreView(l);var se=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(se.focusClearButton(z.target))})("contextmenu",function(z){e.\u0275\u0275restoreView(l);var se=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(se.onContextMenu(z))})("dragstart",function(z){var se=e.\u0275\u0275restoreView(l),ye=se.allowDrag,De=se.position,mt=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(ye&&mt.handleDragItemStart(z,De))})("dragend",function(){var se=e.\u0275\u0275restoreView(l).allowDrag,ye=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(se&&ye.handleDragItemEnd())})("dragover",function(z){var ye=e.\u0275\u0275restoreView(l).allowDrag,De=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(ye&&!De.allowMultipleValues?De.handleDragover(z):De.return)})("drop",function(z){var ye=e.\u0275\u0275restoreView(l).allowDrag,De=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(ye&&!De.allowMultipleValues?De.handleDrop(z):De.return)})("pbiMenuButtonClick",function(z){var ye=e.\u0275\u0275restoreView(l).position,De=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(De.handleMenuItemClick(z,ye))}),e.\u0275\u0275template(2,$e,1,3,"div",27),e.\u0275\u0275elementStart(3,"div",28),e.\u0275\u0275template(4,B,1,2,"pbi-icon",29),e.\u0275\u0275template(5,R,1,3,"pbi-svg-use-symbol",30),e.\u0275\u0275template(6,U,1,1,"input",31),e.\u0275\u0275elementEnd()()}if(2&g){var v=s.displayData,C=s.isTopLevel;e.\u0275\u0275nextContext();var S=e.\u0275\u0275reference(9),O=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("id","contentLabelId"+O.uid)("ngClass",e.\u0275\u0275pureFunction2(28,Y,v.interactionAvailable&&!v.isEditing&&!O.disableHover,v.interactionAvailable))("ngStyle",v.pbiStyle)("disabled",O.v2Design&&null==v.menu)("pbiMenu",O.v2Design?v.menu:null)("menuMode",null!=O.menuMode?O.menuMode:O.CompactMenuMode)("pbiMenuActivation",O.v2Design&&v.menu?"contextmenu":null)("draggable",!v.isEditing&&O.draggable&&!O.disabled)("singleClickDisabled",v.isEditing)("pbiTooltip",S)("pbiTooltipDisabled",O.disableHover)("pbiTooltipPosition",O.calculatedTooltipPosition)("pbiTooltipWithFlexiblePositions",O.tooltipWithFlexiblePositions)("doubleClickDisabled",!v.allowEditing||v.isEditing)("accessible-click-ignore-mouse",!0)("accessible-click-ignore-tabindex",!O.v2Design&&!v.allowEditing),e.\u0275\u0275attribute("role",O.v2Design?"button":null)("aria-haspopup",!!O.v2Design||null)("aria-labelledby",O.ariaLabelledby+" contentLabelId"+O.uid),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!C),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitch",null==v.icon?null:v.icon.type),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",O.PbiIconGlyphKind),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",O.PbiIconSvgKind),e.\u0275\u0275advance(1),e.\u0275\u0275property("pbiEditableLabel",O.editableLabelOptions)("pbiEditableLabelValue",v.value)("pbiEditableLabelMode",v.isEditing)("pbiEditableLabelEditable",v.isEditing)("pbiEditableLabelClasses",O.editableLabelClasses)}}function oe(g,s){if(1&g&&e.\u0275\u0275element(0,"div",38),2&g){var l=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275property("textContent",l.customTooltipContent.description)}}function me(g,s){if(1&g&&(e.\u0275\u0275element(0,"div",36),e.\u0275\u0275template(1,oe,1,1,"div",37)),2&g){var l=e.\u0275\u0275nextContext().$implicit,v=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("textContent",v.useCustomTooltip?null==l.customTooltipContent?null:l.customTooltipContent.title:l.value),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",v.useCustomTooltip&&(null==l.customTooltipContent?null:l.customTooltipContent.description))}}function le(g,s){if(1&g){var l=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",40,41),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(l);var O=e.\u0275\u0275nextContext().position,G=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(G.handleClear(O))})("keydown.arrowLeft",function(O){e.\u0275\u0275restoreView(l);var G=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(G.focusContentLabel(O.target))})("keydown.arrowRight",function(O){e.\u0275\u0275restoreView(l);var G=e.\u0275\u0275nextContext().position,z=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(z.handleClearButtonArrowRight(O.target,G))}),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275elementEnd()}if(2&g){var v=e.\u0275\u0275nextContext(2).$implicit,C=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("tabindex",C.disableClearButtonTabNavigation?-1:0)("pbiTooltip",e.\u0275\u0275pipeBind1(2,3,"FieldPicker_RemoveData"))("aria-label",v.removeDataAriaLabel)}}function de(g,s){if(1&g&&e.\u0275\u0275template(0,le,3,5,"button",39),2&g){var l=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("ngIf",l.allowClear&&!l.disabled)}}function ge(g,s){if(1&g&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Ee,1,3,"div",14),e.\u0275\u0275elementStart(2,"span",15,16),e.\u0275\u0275template(4,Ue,8,22,"ng-container",13),e.\u0275\u0275template(5,lt,4,16,"ng-container",13),e.\u0275\u0275template(6,ne,7,31,"ng-template",null,17,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(8,me,2,2,"ng-template",null,18,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(10,de,1,1,"ng-template",null,19,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&g){var l=s.$implicit,v=e.\u0275\u0275nextContext().isTopLevel,C=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",v),e.\u0275\u0275advance(1),e.\u0275\u0275classProp("error",l.invalid),e.\u0275\u0275attribute("role",C.v2Design?"listitem":null)("aria-level",C.v2Design?1:null)("aria-setsize",C.v2Design?1:null)("aria-posinset",C.v2Design?1:null),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",C.v2Design),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!C.v2Design)}}function we(g,s){if(1&g&&e.\u0275\u0275element(0,"div",42),2&g){var l=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(1,ue,l.shouldHighlightLastItemBottom))}}var Ie=function(s){return{showListEndDropZone:s}};function ke(g,s){if(1&g&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementContainer(1,7),e.\u0275\u0275elementContainerEnd()),2&g){var l=e.\u0275\u0275nextContext().nonEmptyDisplayDataList;e.\u0275\u0275nextContext();var v=e.\u0275\u0275reference(9);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngTemplateOutlet",v)("ngTemplateOutletContext",e.\u0275\u0275pureFunction1(2,Ie,l.length>0))}}var Ae=function(s){return{childrenContentContainer:s}};function Le(g,s){if(1&g&&(e.\u0275\u0275elementStart(0,"div",9,10),e.\u0275\u0275template(2,ge,12,9,"ng-container",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,we,1,3,"div",12),e.\u0275\u0275template(4,ke,2,4,"ng-container",13)),2&g){var l=s.nonEmptyDisplayDataList,v=s.isTopLevel,C=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(5,Ae,!v)),e.\u0275\u0275attribute("role",C.v2Design?"list":null),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",l),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!C.v2Design||!C.allowMultipleValues),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",C.v2Design&&C.allowMultipleValues&&v)}}function Qe(g,s){if(1&g){var l=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"span",44),e.\u0275\u0275listener("drop",function(S){e.\u0275\u0275restoreView(l);var O=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(O.handleDrop(S))})("dragover",function(S){e.\u0275\u0275restoreView(l);var O=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(O.handleDragover(S))}),e.\u0275\u0275elementStart(1,"label"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()}if(2&g){var v=e.\u0275\u0275nextContext(2);e.\u0275\u0275attribute("aria-label",v.placeholder),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(v.placeholder)}}function Ge(g,s){if(1&g&&e.\u0275\u0275template(0,Qe,3,2,"span",43),2&g){var l=e.\u0275\u0275nextContext(),v=e.\u0275\u0275reference(9);e.\u0275\u0275property("ngIf",!l.v2Design)("ngIfElse",v)}}function tt(g,s){if(1&g&&e.\u0275\u0275element(0,"div",50),2&g){var l=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(1,ue,l.shouldHighlightLastItemBottom))}}function st(g,s){if(1&g){var l=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"span",46,47),e.\u0275\u0275listener("accessible-click",function(G){e.\u0275\u0275restoreView(l);var z=e.\u0275\u0275reference(1),se=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(se.handleAddDataClick(G,z))})("drop",function(G){e.\u0275\u0275restoreView(l);var z=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(z.handleDrop(G))})("dragenter",function(){e.\u0275\u0275restoreView(l);var G=e.\u0275\u0275nextContext().showListEndDropZone,z=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(G?z.handleDragEnterListEndArea():z.return)})("dragleave",function(){e.\u0275\u0275restoreView(l);var G=e.\u0275\u0275nextContext().showListEndDropZone,z=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(G?z.handleDragLeaveListEndArea():z.return)})("dragover",function(G){e.\u0275\u0275restoreView(l);var z=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(z.handleDragOverAddDataArea(G))}),e.\u0275\u0275template(2,tt,1,3,"div",48),e.\u0275\u0275element(3,"label",49),e.\u0275\u0275pipe(4,"localize"),e.\u0275\u0275elementEnd()}if(2&g){var S,v=e.\u0275\u0275nextContext().showListEndDropZone,C=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(8,ze,C.compact)),e.\u0275\u0275attribute("aria-labelledby",C.ariaLabelledby+" addDataLabelId"+C.uid),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",v),e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate("localize",C.addDataLabelKey),e.\u0275\u0275property("id","addDataLabelId"+C.uid),e.\u0275\u0275attribute("aria-label",null!==(S=C.addDataAriaLabelKey)&&void 0!==S?S:e.\u0275\u0275pipeBind1(4,6,"Add_Data"))}}function pt(g,s){if(1&g&&e.\u0275\u0275template(0,st,5,10,"span",45),2&g){var l=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",l.v2Design)}}var ft=function(s,l,v,C,S){return{empty:s,disabled:l,v2Design:v,disableDropZoneIndicator:C,compact:S}},vt=function(){function g(s,l){this.changeDetectorRef=s,this.localizationService=l,this.CompactMenuMode=r.Kb.Compact,this.PbiIconGlyphKind=0,this.PbiIconSvgKind=1,this.listOfPbiDisplayData=[],this.smallIconSize="small",this.shouldHighlightLastItemBottom=!1,this.draggingToPosition="end",this.allowClear=!0,this.data=[],this.dataFormat="text",this.allowMultipleValues=!1,this.allowEditingLabelsSetting="allDisallow",this.v2Design=!1,this.onChangeAdd=new e.EventEmitter,this.onChangeRemove=new e.EventEmitter,this.onChangeReorder=new e.EventEmitter,this.onChangeReplace=new e.EventEmitter,this.onChangeLabelUpdate=new e.EventEmitter,this.onCrossPickerDrop=new e.EventEmitter,this.onAddDataClick=new e.EventEmitter,this.onContentClick=new e.EventEmitter,this.onMenuItemClick=new e.EventEmitter,this.onClearButtonArrowRight=new e.EventEmitter,this.editableLabelClasses=["fluentTheme-md-reg","trimmedTextWithEllipsis"],this.uid=M.q.generateShortId(4)}return g.prototype.ngOnInit=function(){var s,l;this.disableHover=!0,this.allowClear=null===(s=this.allowClear)||void 0===s||s,this.addDataLabelKey=null!==(l=this.addDataLabelKey)&&void 0!==l?l:"Plus_Add_Data",this.editableLabelClasses=this.v2Design?["fluentTheme-sm-reg","trimmedTextWithEllipsis"]:["fluentTheme-md-reg","trimmedTextWithEllipsis"],this.editableLabelOptions={customTooltip:!0,disableClick:!0,inputMatchLabelWidth:!1},this.calculatedTooltipPosition=this.tooltipPosition?this.tooltipPosition:this.allowMultipleValues?"before":"above"},g.prototype.ngAfterViewInit=function(){var s=this;this.dragDropPicker.nativeElement.addEventListener("mousemove",function v(){E.fF.assert(function(){return s.disableHover},"Expect hover is disabled"),s.disableHover=!1,s.dragDropPicker.nativeElement.removeEventListener("mousemove",v)}),!this.disableAutoScroll&&(this.scrollToViewSubscription=this.listOfDataAsQueryList.changes.pipe((0,p.U)(function(v){return v.toArray()}),(0,m.h)(function(){return s.allowMultipleValues}),(0,D.O)([]),(0,b.G)()).subscribe(function(v){var C=v[0],S=v[1];null!=s.scrollToIndex&&S?.length>0&&C.length<S.length&&S[s.scrollToIndex].nativeElement.scrollIntoView(),s.resetHighlight(),s.resetDraggingIndex(),s.scrollToIndex=null}))},g.prototype.ngOnDestroy=function(){var s;null===(s=this.scrollToViewSubscription)||void 0===s||s.unsubscribe()},g.prototype.endEditSection=function(s){var l=this.getDisplayDataAtPosition(s);if(l.allowEditing){if(!l.isEditing)return void E.fF.assertFail("Pbi-drag-drop-picker: Attempting to end editing when you are NOT in edit mode");l.isEditing=!1;var v=this.getDataAtPosition(s);E.fF.assertValue(v,"Expect data at the given position exists");var S,C=l.value;if("string"==typeof v){if((0,P.g)(l.value))return void(l.value=v);v!==C&&(S=C)}else{if(!this.allowEmptyLabel&&(0,P.g)(l.value))return void(l.value=v.label);v.label!==C&&(S=(0,f.pi)((0,f.pi)({},v),{label:C}))}S&&(this.setDataAtPosition(s,S),this.propagateChange&&this.propagateChange(this.data),this.onChangeLabelUpdate.emit({newLabel:C,position:s}))}},g.prototype.handleKeyDown=function(s,l){(s.keyCode===k.hY||s.keyCode===k.K5)&&!(0,k.Vb)(s)&&this.endEditSection(l),s.stopPropagation()},g.prototype.beginEditSection=function(s){var l=this.getDisplayDataAtPosition(s);if(l.allowEditing){if(l.isEditing)return void E.fF.assertFail("Pbi-drag-drop-picker: Attempting to edit when you are already in edit mode");l.isEditing=!0}},g.prototype.detectChanges=function(){this.changeDetectorRef.detectChanges()},g.prototype.writeValue=function(s){this.data=[],this.listOfPbiDisplayData=[];for(var l=0,v=s;l<v.length;l++)this.addData(v[l])},g.prototype.registerOnChange=function(s){this.propagateChange=s},g.prototype.registerOnTouched=function(s){},g.prototype.setDisabledState=function(s){this.disabled=s},g.prototype.handleDragItemStart=function(s,l){var v,C;if(this.draggable){this.disableHover=!0,this.draggingFromPosition=l;var S={fromGroupId:null===(v=this.externalCrossPickerDragDropMonitor)||void 0===v?void 0:v.groupId,fromComponentId:null===(C=this.externalCrossPickerDragDropMonitor)||void 0===C?void 0:C.componentId,fromPosition:l,data:this.getDataAtPosition(l)};s.dataTransfer.setData(this.dataFormat,JSON.stringify(S))}},g.prototype.handleDragItemEnd=function(){this.disableHover=!1,this.resetDraggingIndex()},g.prototype.handleDragover=function(s){s.preventDefault()},g.prototype.handleDragOverAddDataArea=function(s){var l;this.allowMultipleValues&&0!==this.listOfPbiDisplayData.length?(null===(l=this.draggingFromPosition)||void 0===l?void 0:l[0])!==this.listOfPbiDisplayData.length-1&&this.handleDragover(s):this.handleDragover(s)},g.prototype.handleDragLeavePosition=function(s){this.getDisplayDataAtPosition(s).highlight=!1},g.prototype.handleDragEnterPosition=function(s){this.draggable&&(this.draggingToPosition=s,!this.isItRedundantPositionToDrop(this.draggingFromPosition,s))&&(this.getDisplayDataAtPosition(s).highlight=!0)},g.prototype.handleAddDataClick=function(s,l){this.v2Design&&this.onAddDataClick.emit({type:s.type,overlayOrigin:l})},g.prototype.handleContentClick=function(s,l){var v=this;E.fF.assert(function(){return!v.disableContentClick},"Expect this not to be called if disableContentClick is true"),this.v2Design&&this.onContentClick.emit({overlayOrigin:s,position:l})},g.prototype.handleMenuItemClick=function(s,l){this.v2Design&&this.onMenuItemClick.emit({menuButton:s,position:l})},g.prototype.onContextMenu=function(s){s.stopPropagation(),s.preventDefault()},g.prototype.focusClearButton=function(s){if(this.clearButtonQueryList){var l=this.contentLabelQueryList.toArray().findIndex(function(v){return v.nativeElement===s});this.clearButtonQueryList.get(l).nativeElement.focus()}},g.prototype.focusContentLabel=function(s){if(this.contentLabelQueryList){var l=this.clearButtonQueryList.toArray().findIndex(function(v){return v.nativeElement===s});this.contentLabelQueryList.get(l).nativeElement.focus()}},g.prototype.handleClearButtonArrowRight=function(s,l){this.onClearButtonArrowRight.emit({currentFocusedClearButton:s,topLevelIndex:_.first(l)})},g.prototype.doesCurrentDragDropReorderItems=function(){return this.doesMoveLocationReorderItems(this.draggingFromPosition,this.draggingToPosition)},g.prototype.doesMoveLocationReorderItems=function(s,l){if(!s)return!1;E.fF.assert(function(){return 1===_.size(s)},"we ONLY handle drag-drop into first level position as of now. Add your implementation for new scenario."),E.fF.assert(function(){return"end"===l||1===_.size(l)},"we ONLY handle drag-drop into first level position as of now. Add your implementation for new scenario.");var v=s[0],C=_.isArray(l)?l[0]:l;return C!==v&&("end"===C?v!==_.size(this.data)-1:C-1!==v)},g.prototype.isItRedundantPositionToDrop=function(s,l){return!!s&&!this.doesMoveLocationReorderItems(s,l)},g.prototype.isItRedundantPositionToDropCurrentData=function(s){return this.isItRedundantPositionToDrop(this.draggingFromPosition,s)},g.prototype.resetHighlight=function(){if(this.draggingFromPosition){var s=this.getDisplayDataAtPosition(this.draggingFromPosition);s&&(s.highlight=!1)}if("end"!==this.draggingToPosition){var l=this.getDisplayDataAtPosition(this.draggingToPosition);l&&(l.highlight=!1)}this.shouldHighlightLastItemBottom=!1},g.prototype.reorderItemsInternal=function(s,l){var v=this;E.fF.assert(function(){return null!=s&&_.inRange(s,0,_.size(v.data))},"expect 0 <= fromIndex < itemsCount"),E.fF.assert(function(){return null!=l&&_.inRange(l,0,_.size(v.data)+1)},"expect 0 <= toIndex <= itemsCount"),s<l&&l--;var C=this.data.splice(s,1)[0];this.data.splice(l,0,C);var S=this.listOfPbiDisplayData.splice(s,1)[0];this.listOfPbiDisplayData.splice(l,0,S),this.propagateChange&&this.propagateChange(this.data)},g.prototype.resetDraggingIndex=function(){this.draggingFromPosition=void 0,this.draggingToPosition="end"},g.prototype.handleDragEnterListEndArea=function(){this.shouldHighlightLastItemBottom=null==this.draggingFromPosition||_.size(this.draggingFromPosition)>1||this.draggingFromPosition[0]!==this.data.length-1,this.draggingToPosition="end"},g.prototype.handleDragLeaveListEndArea=function(){this.shouldHighlightLastItemBottom=!1},g.prototype.handleDrop=function(s){if(s.preventDefault(),s.stopPropagation(),null==this.draggingFromPosition){var l=s.dataTransfer.types;E.fF.assert(function(){return _.size(l)<=1},"We set one drag data format at most in the dragstart event");var v=_.first(l),C=s.dataTransfer.getData(v);if(C){var S=void 0;try{S=JSON.parse(C)}catch{}var O=void 0;if("object"==typeof S)if(function(g){return!!g&&g.hasOwnProperty("fromGroupId")&&g.hasOwnProperty("fromComponentId")&&g.hasOwnProperty("fromPosition")&&g.hasOwnProperty("data")}(S)){if(O=S.data,this.externalCrossPickerDragDropMonitor&&(this.externalCrossPickerDragDropMonitor.groupId!==S.fromGroupId||this.externalCrossPickerDragDropMonitor.componentId!==S.fromComponentId))return this.onCrossPickerDrop.emit({fromGroupId:S.fromGroupId,fromComponentId:S.fromComponentId,fromPosition:S.fromPosition,toGroupId:this.externalCrossPickerDragDropMonitor.groupId,toComponentId:this.externalCrossPickerDragDropMonitor.componentId,toPosition:this.draggingToPosition}),void this.resetHighlight()}else O=S;else O=C;this.handleAdd(O,this.draggingToPosition)}}else this.handleReorder(this.draggingFromPosition,this.draggingToPosition)},g.prototype.handleClear=function(s,l){void 0===l&&(l=!1);var v=dt(this.data,s);dt(this.listOfPbiDisplayData,s),v?(this.propagateChange&&this.propagateChange(this.data),l||this.onChangeRemove.emit({data:v,position:s})):E.fF.assertFail("expect position to be valid")},g.prototype.handleAdd=function(s,l){void 0===l&&(l="end"),this.allowMultipleValues||_.isEmpty(this.data)||"end"!==l&&1!==l.length?(this.addReplaceDataInternal(s,l,!1),this.propagateChange&&this.propagateChange(this.data),this.onChangeAdd.emit({data:s,position:l})):this.handleReplace(s,[0])},g.prototype.handleReplace=function(s,l){this.addReplaceDataInternal(s,l,!0),this.propagateChange&&this.propagateChange(this.data),this.onChangeReplace.emit({data:s,position:l})},g.prototype.addData=function(s){this.addReplaceDataInternal(s,"end",!1)},g.prototype.replaceData=function(s,l){this.addReplaceDataInternal(s,l,!0)},g.prototype.setAllData=function(s){var l=[],v=[];if(!_.isEmpty(s)&&_.every(s,function(z){return!!z}))for(var C=0,S=s;C<S.length;C++){var O=S[C],G=this.getPbiDisplayData(O,this.allowEditingLabelsSetting);if(!G)return;l.push(O),v.push(G)}this.data=l,this.listOfPbiDisplayData=v},g.prototype.handleReorder=function(s,l){var v=this;E.fF.assert(function(){return 1===_.size(s)},"We ONLY support reordering in first-level right now. Add your implementation for new scenario."),E.fF.assert(function(){return"end"===l||1===_.size(l)},"We ONLY support reordering in first-level right now. Add your implementation for new scenario.");var C=s[0],S=_.isArray(l)?l[0]:l;if(E.fF.assert(function(){return null!=C&&_.inRange(C,0,_.size(v.data))},"expect fromIndex to be in valid range"),E.fF.assert(function(){return null!=S&&("end"===S||_.inRange(S,0,_.size(v.data)))},"expect toIndex to be in valid range"),this.resetHighlight(),this.doesMoveLocationReorderItems(s,l)){var O="end"!==S?S:_.size(this.data);this.reorderItemsInternal(C,O),this.onChangeReorder.emit({data:this.data[C],fromPosition:s,toPosition:[O]})}},g.prototype.addReplaceDataInternal=function(s,l,v){if(s){E.fF.assert(function(){return"end"===l||1===_.size(l)},"we ONLY handle add/replace first level position data as of now. Add your implementation for new scenario."),E.fF.assert(function(){return!v||"end"!==l[0]},"replacement index must be a valid number"),!this.allowMultipleValues&&!v&&(this.data.pop(),this.listOfPbiDisplayData.pop());var C=this.getPbiDisplayData(s,this.allowEditingLabelsSetting);if(C){this.resetHighlight();var S=v?1:0;if("end"!==l){var O=l[0];this.data.splice(O,S,s),this.listOfPbiDisplayData.splice(O,S,C),this.scrollToIndex=O}else this.data.push(s),this.scrollToIndex=this.data.length-1,this.listOfPbiDisplayData.push(C)}}},g.prototype.getDataAtPosition=function(s){return ct(this.data,s)},g.prototype.setDataAtPosition=function(s,l){Je(this.data,s,function(v,C){v[C]=l})},g.prototype.getDisplayDataAtPosition=function(s){return ct(this.listOfPbiDisplayData,s)},g.prototype.getPbiDisplayData=function(s,l){var C,v=this;if("string"==typeof s){if(""===s)return}else if(0===Object.keys(s).length)return;var S=(C="string"==typeof s?"allAllow"===l:"allAllow"===l||"varyByItem"===l&&!!s.allowEditLabel)||this.v2Design&&!this.disableContentClick||this.v2Design&&"string"!=typeof s&&!!s.menu;return"string"==typeof s?{value:s,allowEditing:C,isEditing:!1,highlight:!1,interactionAvailable:S}:{value:s.label,icon:s.icon,allowEditing:C,isEditing:!1,highlight:!1,interactionAvailable:S,menu:s.menu,customTooltipContent:s.customTooltipContent,children:_.isEmpty(s.children)?void 0:_.map(s.children,function(G){return v.getPbiDisplayData(G,l)}),actionTooltip:s.actionTooltip,removeDataAriaLabel:this.localizationService.format("FieldPicker_RemoveField",s.label),pbiStyle:s.pbiStyle,invalid:s.invalid}},g.\u0275fac=function(l){return new(l||g)(e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(T.o))},g.\u0275cmp=e.\u0275\u0275defineComponent({type:g,selectors:[["pbi-drag-drop-picker"]],viewQuery:function(l,v){if(1&l&&(e.\u0275\u0275viewQuery(X,5),e.\u0275\u0275viewQuery(te,5),e.\u0275\u0275viewQuery(ae,5),e.\u0275\u0275viewQuery(be,5)),2&l){var C=void 0;e.\u0275\u0275queryRefresh(C=e.\u0275\u0275loadQuery())&&(v.dragDropPicker=C.first),e.\u0275\u0275queryRefresh(C=e.\u0275\u0275loadQuery())&&(v.clearButtonQueryList=C),e.\u0275\u0275queryRefresh(C=e.\u0275\u0275loadQuery())&&(v.contentLabelQueryList=C),e.\u0275\u0275queryRefresh(C=e.\u0275\u0275loadQuery())&&(v.listOfDataAsQueryList=C)}},inputs:{pbiDragDropPickerActionsTemplate:"pbiDragDropPickerActionsTemplate",itemPromotedActionTemplate:"itemPromotedActionTemplate",externalCrossPickerDragDropMonitor:"externalCrossPickerDragDropMonitor",allowClear:"allowClear",data:"data",dataFormat:"dataFormat",disabled:"disabled",draggable:"draggable",placeholder:"placeholder",addDataLabelKey:"addDataLabelKey",addDataAriaLabelKey:"addDataAriaLabelKey",allowMultipleValues:"allowMultipleValues",allowEditingLabelsSetting:"allowEditingLabelsSetting",useCustomTooltip:"useCustomTooltip",tooltipPosition:"tooltipPosition",tooltipWithFlexiblePositions:"tooltipWithFlexiblePositions",disableAutoScroll:"disableAutoScroll",disableClearButtonTabNavigation:"disableClearButtonTabNavigation",allowEmptyLabel:"allowEmptyLabel",compact:"compact",disableDropZoneIndicator:"disableDropZoneIndicator",disableContentClick:"disableContentClick",v2Design:"v2Design",menuMode:"menuMode",ariaLabelledby:"ariaLabelledby"},outputs:{onChangeAdd:"onChangeAdd",onChangeRemove:"onChangeRemove",onChangeReorder:"onChangeReorder",onChangeReplace:"onChangeReplace",onChangeLabelUpdate:"onChangeLabelUpdate",onCrossPickerDrop:"onCrossPickerDrop",onAddDataClick:"onAddDataClick",onContentClick:"onContentClick",onMenuItemClick:"onMenuItemClick",onClearButtonArrowRight:"onClearButtonArrowRight"},features:[e.\u0275\u0275ProvidersFeature([{provide:F.JU,useExisting:(0,e.forwardRef)(function(){return g}),multi:!0}])],decls:10,vars:10,consts:[[1,"drag-drop-picker",3,"ngClass"],["dragDropPicker",""],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf","ngIfElse"],["class","dropArea unselectable",3,"drop","dragover","dragenter","dragleave",4,"ngIf"],["nonEmptyDisplayDataListTemplate",""],["showPlaceholder",""],["addData",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"dropArea","unselectable",3,"drop","dragover","dragenter","dragleave"],[3,"ngClass"],["listOfData",""],[4,"ngFor","ngForOf"],["class","dropBetween unselectable",3,"ngClass",4,"ngIf"],[4,"ngIf"],["class","dropBetween unselectable",3,"ngClass","dragenter","dragleave","dragover","drop",4,"ngIf"],[1,"content"],["contentContainer",""],["contentLabelTemplate",""],["tooltipTemplateRef",""],["clearButtonTemplate",""],[1,"dropBetween","unselectable",3,"ngClass","dragenter","dragleave","dragover","drop"],[1,"selfAndChildrenContent"],[1,"selfLevelContentContainer",3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],["customClick","","pbiTooltipAlwaysShow","true",1,"contentWithIndentationContainer",3,"id","ngClass","ngStyle","disabled","pbiMenu","menuMode","pbiMenuActivation","draggable","singleClickDisabled","pbiTooltip","pbiTooltipDisabled","pbiTooltipPosition","pbiTooltipWithFlexiblePositions","doubleClickDisabled","accessible-click-ignore-mouse","accessible-click-ignore-tabindex","singleClickAction","doubleClickAction","accessible-click","keydown.F2","keydown.arrowRight","contextmenu","dragstart","dragend","dragover","drop","pbiMenuButtonClick"],["contentLabel",""],["class","indentation",3,"ngStyle",4,"ngIf"],[1,"content-label",3,"ngSwitch"],[3,"name","size",4,"ngSwitchCase"],[3,"ngStyle","sheet","symbolId",4,"ngSwitchCase"],["class","editableLabel","spellcheck","false",3,"ngModel","ngModelChange","keydown","blur",4,"pbiEditableLabel","pbiEditableLabelValue","pbiEditableLabelMode","pbiEditableLabelEditable","pbiEditableLabelClasses"],[1,"indentation",3,"ngStyle"],[3,"name","size"],[3,"ngStyle","sheet","symbolId"],["spellcheck","false",1,"editableLabel",3,"ngModel","ngModelChange","keydown","blur"],[1,"tooltipTitle",3,"textContent"],["class","fieldTooltipDescription",3,"textContent",4,"ngIf"],[1,"fieldTooltipDescription",3,"textContent"],["class","glyphicon pbi-glyph-close glyph-mini content-clear pbi-focus-outline unselectable",3,"tabindex","pbiTooltip","aria-label","click","keydown.arrowLeft","keydown.arrowRight",4,"ngIf"],[1,"glyphicon","pbi-glyph-close","glyph-mini","content-clear","pbi-focus-outline","unselectable",3,"tabindex","pbiTooltip","aria-label","click","keydown.arrowLeft","keydown.arrowRight"],["clearButton",""],[1,"dropBetween","unselectable",3,"ngClass"],["class","placeholder","aria-readonly","true","tabIndex","0",3,"drop","dragover",4,"ngIf","ngIfElse"],["aria-readonly","true","tabIndex","0",1,"placeholder",3,"drop","dragover"],["data-testid","add-data-button","class","placeholder","tabIndex","0","role","button","aria-haspopup","true",3,"ngClass","accessible-click","drop","dragenter","dragleave","dragover",4,"ngIf"],["data-testid","add-data-button","tabIndex","0","role","button","aria-haspopup","true",1,"placeholder",3,"ngClass","accessible-click","drop","dragenter","dragleave","dragover"],["addDataButton",""],["class","dropBetween unselectable insidePlaceholder",3,"ngClass",4,"ngIf"],[1,"fluentTheme-sm-reg",3,"localize","id"],[1,"dropBetween","unselectable","insidePlaceholder",3,"ngClass"]],template:function(l,v){if(1&l&&(e.\u0275\u0275elementStart(0,"div",0,1),e.\u0275\u0275template(2,Pe,1,6,"ng-container",2),e.\u0275\u0275template(3,I,1,0,"div",3),e.\u0275\u0275template(4,Le,5,7,"ng-template",null,4,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(6,Ge,1,2,"ng-template",null,5,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(8,pt,1,1,"ng-template",null,6,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&l){var C=e.\u0275\u0275reference(7);e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction5(4,ft,v.listOfPbiDisplayData.length<1,v.disabled,v.v2Design,v.disableDropZoneIndicator,v.compact)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",v.listOfPbiDisplayData.length>0)("ngIfElse",C),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!v.v2Design&&v.allowMultipleValues&&v.listOfPbiDisplayData.length>0)}},dependencies:[W.NgClass,W.NgForOf,W.NgIf,W.NgTemplateOutlet,W.NgStyle,W.NgSwitch,W.NgSwitchCase,ee.f,F.Fj,F.JJ,F.On,J.X,Ce.t,K.D,pe._,he.l8,ce.R,N.V,t.F],styles:['[_nghost-%COMP%]{--contentBackgroundColor: var(--gray-30);--contentBorderColor: var(--gray-40);--colorActionButton: var(--gray-190);--colorItemHover: var(--gray-60);--grayBackgroundEmpty: var(--gray-20)}[data-legacy-theming=false]   [_nghost-%COMP%]{--contentBackgroundColor: var(--colorNeutralBackground3);--contentBorderColor: var(--colorNeutralStroke1);--colorActionButton: var(--colorNeutralForeground1);--colorItemHover: var(--colorNeutralBackground3Hover);--grayBackgroundEmpty: var(--colorNeutralBackground3)}.placeholder-gray-background[_nghost-%COMP%]   .drag-drop-picker.empty[_ngcontent-%COMP%]{background-color:var(--grayBackgroundEmpty);border:1px solid var(--grayBackgroundEmpty)}.pbi-drag-drop-picker-scrollbar[_nghost-%COMP%]   .drag-drop-picker[_ngcontent-%COMP%]{overflow-y:auto}.tooltipTitle[_ngcontent-%COMP%]{font-weight:700}.fieldTooltipDescription[_ngcontent-%COMP%]{max-width:240px;display:block;word-break:break-word;white-space:pre-wrap}.drag-drop-picker[_ngcontent-%COMP%]{display:flex;border:1px dashed var(--gray-130, #605E5C);border-radius:2px;flex-direction:column;--field-error-background-color: var(--globalColorCranberryTint60);--field-error-border-color: var(--globalColorCranberryShade10)}  [data-legacy-theming=false] .drag-drop-picker{--field-error-background-color: var(--colorDangerBackground1);--field-error-border-color: var(--colorDangerBorder1)}.drag-drop-picker.disabled[_ngcontent-%COMP%]{pointer-events:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.drag-drop-picker.v2Design[_ngcontent-%COMP%]{border:1px dashed var(--colorNeutralStrokeAccessible);background-color:var(--colorNeutralBackground1);height:100%;font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-regular, 400)}.drag-drop-picker.v2Design[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:0}.drag-drop-picker.v2Design[_ngcontent-%COMP%]   span.content[_ngcontent-%COMP%]{background-color:var(--colorNeutralBackground2);border-color:var(--colorNeutralStrokeAccessible);border-radius:3px;color:var(--colorNeutralForeground1);padding:2px;height:fit-content;display:flex;flex-direction:row;align-items:center}.drag-drop-picker.v2Design[_ngcontent-%COMP%]   span.content.error[_ngcontent-%COMP%]{border-color:var(--field-error-border-color);background-color:var(--field-error-background-color);color:var(--colorDangerForeground1)}.drag-drop-picker.v2Design[_ngcontent-%COMP%]   span.content[_ngcontent-%COMP%]   .selfAndChildrenContent[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;overflow-x:hidden}.drag-drop-picker.v2Design[_ngcontent-%COMP%]   span.content[_ngcontent-%COMP%]   .selfAndChildrenContent[_ngcontent-%COMP%]   .selfLevelContentContainer[_ngcontent-%COMP%]{display:flex;flex:1;flex-direction:row;align-items:center;box-sizing:border-box;height:24px}.drag-drop-picker.v2Design[_ngcontent-%COMP%]   span.content[_ngcontent-%COMP%]   .selfAndChildrenContent[_ngcontent-%COMP%]   .selfLevelContentContainer[_ngcontent-%COMP%]   .contentWithIndentationContainer[_ngcontent-%COMP%]{padding:0 2px}.drag-drop-picker.v2Design[_ngcontent-%COMP%]   span.content[_ngcontent-%COMP%]   .selfAndChildrenContent[_ngcontent-%COMP%]   .selfLevelContentContainer[_ngcontent-%COMP%]   .contentWithIndentationContainer.interactable[_ngcontent-%COMP%]{cursor:pointer}.drag-drop-picker.v2Design[_ngcontent-%COMP%]   span.content[_ngcontent-%COMP%]   .selfAndChildrenContent[_ngcontent-%COMP%]   .selfLevelContentContainer[_ngcontent-%COMP%]   .contentWithIndentationContainer.showHover[_ngcontent-%COMP%]:hover{background-color:var(--colorNeutralBackground3Hover)}.drag-drop-picker.v2Design[_ngcontent-%COMP%]   span.content[_ngcontent-%COMP%]   .selfAndChildrenContent[_ngcontent-%COMP%]   .selfLevelContentContainer[_ngcontent-%COMP%]   .content-clear[_ngcontent-%COMP%]{height:24px;width:24px;display:flex;align-items:center;justify-content:center;margin:0}.drag-drop-picker.v2Design[_ngcontent-%COMP%]   span.content[_ngcontent-%COMP%]   .selfAndChildrenContent[_ngcontent-%COMP%]   .selfLevelContentContainer[_ngcontent-%COMP%]   .content-clear[_ngcontent-%COMP%]:hover{background-color:var(--colorNeutralBackground3Hover)}.drag-drop-picker.v2Design[_ngcontent-%COMP%]   span.content[_ngcontent-%COMP%]   .selfAndChildrenContent[_ngcontent-%COMP%]   .selfLevelContentContainer.compact[_ngcontent-%COMP%]{height:16px}.drag-drop-picker.v2Design[_ngcontent-%COMP%]   span.content[_ngcontent-%COMP%]   .selfAndChildrenContent[_ngcontent-%COMP%]   .selfLevelContentContainer.compact[_ngcontent-%COMP%]   .content-clear[_ngcontent-%COMP%]{height:16px;width:16px}.drag-drop-picker.v2Design[_ngcontent-%COMP%]   span.content[_ngcontent-%COMP%]   .selfAndChildrenContent[_ngcontent-%COMP%]   .childrenContentContainer[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0}.drag-drop-picker.v2Design[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   .childrenContentContainer[_ngcontent-%COMP%]   span.content[_ngcontent-%COMP%]{border:none;padding:0;margin:0}.drag-drop-picker.v2Design[_ngcontent-%COMP%]   span.placeholder[_ngcontent-%COMP%]{background-color:var(--colorNeutralBackground1);color:var(--colorNeutralForeground1);display:flex;justify-content:center;cursor:pointer;padding:0;margin:4px;line-height:28px;box-sizing:border-box;position:relative;border:1px solid var(--colorNeutralStrokeAccessible)}.drag-drop-picker.v2Design[_ngcontent-%COMP%]   span.placeholder.compact[_ngcontent-%COMP%]{line-height:20px}.drag-drop-picker.v2Design[_ngcontent-%COMP%]   span.placeholder[_ngcontent-%COMP%]   .dropBetween.insidePlaceholder[_ngcontent-%COMP%]{pointer-events:none;position:absolute;top:0;left:0;width:calc(100% - 8px)}.drag-drop-picker.v2Design[_ngcontent-%COMP%]   span.placeholder[_ngcontent-%COMP%]:hover{background-color:var(--colorNeutralBackground1Hover)}.drag-drop-picker.v2Design[_ngcontent-%COMP%]   span.placeholder[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;cursor:pointer;pointer-events:none;display:flex;align-items:center;justify-content:center}.drag-drop-picker.v2Design.disabled[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{opacity:.5}.drag-drop-picker[_ngcontent-%COMP%]   div.dropBetween[_ngcontent-%COMP%]{height:4px;margin:0 4px}.drag-drop-picker[_ngcontent-%COMP%]   div.dropBetween.highlight[_ngcontent-%COMP%]{background-color:var(--theme-primary-color, #F2C811)}.drag-drop-picker[_ngcontent-%COMP%]   div.dropArea[_ngcontent-%COMP%]{flex:1;min-height:8px}.drag-drop-picker[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex:1;white-space:nowrap;overflow:hidden;padding:6px 8px;height:12px;border-radius:2px}.drag-drop-picker[_ngcontent-%COMP%]   span.placeholder[_ngcontent-%COMP%]{color:var(--gray-90, #A19F9D)}.drag-drop-picker[_ngcontent-%COMP%]   span.content[_ngcontent-%COMP%]{margin:0 4px;border:1px solid var(--contentBorderColor);background-color:var(--contentBackgroundColor)}.drag-drop-picker[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   pbi-icon[_ngcontent-%COMP%]{margin-right:8px;flex-shrink:0}.drag-drop-picker[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   pbi-svg-use-symbol[_ngcontent-%COMP%]{width:var(--lg-font-size, 16px);height:var(--lg-font-size, 16px);margin-right:8px;flex-shrink:0}.drag-drop-picker[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   .contentWithIndentationContainer[_ngcontent-%COMP%]{overflow:hidden;flex:1;display:flex;flex-direction:row}.drag-drop-picker[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   .contentWithIndentationContainer.showHover[_ngcontent-%COMP%]:hover{background-color:var(--colorItemHover)}.drag-drop-picker[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   .content-label[_ngcontent-%COMP%]{display:flex;text-overflow:ellipsis;overflow:hidden;align-items:center;padding:0;flex:1;color:var(--colorNeutralForeground1)}.drag-drop-picker[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   .content-clear[_ngcontent-%COMP%]{cursor:pointer;padding:0;border:0;background:transparent;margin-left:12px;color:var(--colorActionButton)}.drag-drop-picker[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   .contentWithIndentationContainer[_ngcontent-%COMP%], .drag-drop-picker[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   .content-clear[_ngcontent-%COMP%], .drag-drop-picker   span   [_nghost-%COMP%]     .pbi-drag-drop-picker-actions button{box-sizing:border-box;border:solid 2px transparent;border-radius:2px;outline:none}.drag-drop-picker[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   .contentWithIndentationContainer.pbi-focus-outline[_ngcontent-%COMP%]:focus-visible, .drag-drop-picker[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   .content-clear.pbi-focus-outline[_ngcontent-%COMP%]:focus-visible, .drag-drop-picker   span   [_nghost-%COMP%]     .pbi-drag-drop-picker-actions button.pbi-focus-outline:focus-visible{border-color:var(--gray-140, #484644)}.drag-drop-picker[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   .contentWithIndentationContainer[_ngcontent-%COMP%]   .content-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .drag-drop-picker[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   .contentWithIndentationContainer[_ngcontent-%COMP%]   .content-label[_ngcontent-%COMP%]   pbi-text-label[_ngcontent-%COMP%]{outline:none;border:none}.drag-drop-picker.disableDropZoneIndicator[_ngcontent-%COMP%]{border-style:solid}.drag-drop-picker.disableDropZoneIndicator[_ngcontent-%COMP%]   span.content[_ngcontent-%COMP%]{border-style:none}.drag-drop-picker.disableDropZoneIndicator[_ngcontent-%COMP%]   span.content[_ngcontent-%COMP%]   .selfAndChildrenContent[_ngcontent-%COMP%]   .selfLevelContentContainer[_ngcontent-%COMP%]{height:26px}.drag-drop-picker.disableDropZoneIndicator[_ngcontent-%COMP%]   span.content[_ngcontent-%COMP%]   .selfAndChildrenContent[_ngcontent-%COMP%]   .selfLevelContentContainer.compact[_ngcontent-%COMP%]{height:18px}.drag-drop-picker.disableDropZoneIndicator[_ngcontent-%COMP%]   span.placeholder[_ngcontent-%COMP%]{border-color:var(--colorNeutralStroke1)}[_nghost-%COMP%]     .pbi-drag-drop-picker-actions{align-self:stretch;display:flex;justify-content:space-evenly;align-items:center}[_nghost-%COMP%]     .pbi-drag-drop-picker-actions>*{color:var(--gray-190, #201F1E)}[_nghost-%COMP%]     .pbi-drag-drop-picker-actions button.v2Design{margin:0;border:0;height:24px;width:24px;color:var(--colorNeutralForeground1);fill:var(--colorNeutralForeground1)}[_nghost-%COMP%]     .pbi-drag-drop-picker-actions button.v2Design:hover{background-color:var(--colorNeutralBackground3Hover)}[_nghost-%COMP%]     .pbi-drag-drop-picker-actions .button-divider.v2Design{align-self:stretch;margin-top:4px;margin-bottom:4px;background-color:var(--colorNeutralStrokeAccessible)}[_nghost-%COMP%]     .compact button.v2Design{height:16px;width:16px}[_nghost-%COMP%]     .compact .button-divider.v2Design{margin-top:2px;margin-bottom:2px}[_nghost-%COMP%]     .content-label pbi-text-label{margin:0;padding:0;flex:1;overflow-x:hidden}[_nghost-%COMP%]     .content-label input{margin:0;padding:2px 0;width:100%}'],changeDetection:0}),g}();function ct(g,s){return Je(g,s,function(l,v){return l[v]})}function dt(g,s){return Je(g,s,function(l,v){return l.splice(v,1)[0]})}function Je(g,s,l){E.fF.assert(function(){return!_.isEmpty(s)},"the given position should contain at least one element");var v=s[0],C=_.nth(g,v);E.fF.assertAnyValue(C,"it is possible that currentLevelItem is undefined, e.g. when using this function to add an item after the last item in the collection at the lowest level of the position");var S=s.slice(1);return _.isEmpty(S)?l(g,v):C?"string"==typeof C?(E.fF.assertFail("string data should not have any child"),l(g,v)):Je(C.children,S,l):void E.fF.assertFail("trying to do something to a child of an item but the item does not exist")}},56598:function(Me,Q,o){o.d(Q,{K:function(){return M}});var f=o(67659),r=o(5806),k=o(94770),e=o(93367),F=o(94841),E=o(79725),P=o(16095),p=o(77476),m=o(17174),D=o(95859),b=o(50423),M=function(){function T(){}return T.\u0275fac=function(ee){return new(ee||T)},T.\u0275mod=b.\u0275\u0275defineNgModule({type:T}),T.\u0275inj=b.\u0275\u0275defineInjector({imports:[p.CommonModule,r.Y,m.u5,D.v,f._,k.f,e.U,F.b,E.j,P.Z,m.UX]}),T}()},58679:function(Me,Q,o){o.d(Q,{I:function(){return ee}});var f=o(65005),r=o(62458),k=o(9795),e=o(59017),F=o(59973),E=o(14172),P=o(81905),p=o(83317),m=o(48787),D=o(50423),b=o(84354),M=function(){function J(Ce){this.pbiDropdownService=Ce,this.isOpen$=this.pbiDropdownService.select$("open");var K=this.pbiDropdownService.select$("dropdownItems"),pe=this.pbiDropdownService.select$("overlayRef"),he=K.pipe((0,F.h)(function(N){return!!N}),(0,E.U)(function(N){return r.fF.assert(function(){return 1===N.length},"Expected 1 FieldListComponent"),N.first})),ce=he.pipe((0,P.w)(function(N){return N.onFirstRenderComplete}));(0,e.aj)([this.isOpen$,pe,he,ce]).pipe((0,p.R)(this.pbiDropdownService.onDestroy$),(0,F.h)(function(N){var X=N[1],te=N[2];return N[0]&&!!X?.overlayRef.overlayElement&&!!te})).subscribe(function(N){N[2].focusSearchBox()})}return J.prototype.buttonKeydown=function(Ce){var K=this;this.isOpen$.pipe((0,m.q)(1)).subscribe(function(pe){pe||(0,k.Wl)(Ce.keyCode)&&(K.pbiDropdownService.toggleOpenState(),Ce.preventDefault())})},J.\u0275fac=function(K){return new(K||J)(D.\u0275\u0275inject(b.S))},J.\u0275prov=D.\u0275\u0275defineInjectable({token:J,factory:J.\u0275fac}),J}(),T=o(26333),W=o(31343),ee=function(){function J(Ce,K){this.pbiDropdownService=Ce,this.strategy=K}return J.prototype.ngAfterViewInit=function(){var Ce=this;(0,T.x)([{strategy:this.strategy,dropdownItems:this.dropdownItems}],W.N).subscribe(function(K){Ce.pbiDropdownService.updateState(K)})},J.\u0275fac=function(K){return new(K||J)(D.\u0275\u0275directiveInject(b.S),D.\u0275\u0275directiveInject(M))},J.\u0275dir=D.\u0275\u0275defineDirective({type:J,selectors:[["pbi-dropdown","dropdown-type","field-list"]],contentQueries:function(K,pe,he){var ce;(1&K&&D.\u0275\u0275contentQuery(he,f.l,5),2&K)&&(D.\u0275\u0275queryRefresh(ce=D.\u0275\u0275loadQuery())&&(pe.dropdownItems=ce))},features:[D.\u0275\u0275ProvidersFeature([M])]}),J}()},65005:function(Me,Q,o){o.d(Q,{l:function(){return Ee}});var f=o(81337),r=o(50423),k=o(48787),e=o(30794),F=o(12179),E=[],P=o(77476),p=o(68070),m=o(89237);function D(w,re){1&w&&r.\u0275\u0275element(0,"div",7)}function b(w,re){1&w&&(r.\u0275\u0275elementStart(0,"div",8),r.\u0275\u0275element(1,"div",9)(2,"div",10),r.\u0275\u0275elementEnd())}function M(w,re){1&w&&(r.\u0275\u0275elementStart(0,"div",11),r.\u0275\u0275element(1,"div",12),r.\u0275\u0275elementStart(2,"div",13),r.\u0275\u0275element(3,"div",14)(4,"div",15),r.\u0275\u0275elementEnd()())}function T(w,re){if(1&w&&(r.\u0275\u0275elementContainerStart(0,3),r.\u0275\u0275template(1,D,1,0,"div",4),r.\u0275\u0275template(2,b,3,0,"div",5),r.\u0275\u0275template(3,M,5,0,"div",6),r.\u0275\u0275elementContainerEnd()),2&w){var j=re.$implicit,Z=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("ngSwitch",j),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngSwitchCase",Z.largeBarType),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngSwitchCase",Z.multipleBarType),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngSwitchCase",Z.multipleSmallLargeType)}}function W(w,re){if(1&w&&(r.\u0275\u0275elementStart(0,"div",1),r.\u0275\u0275template(1,T,4,4,"ng-container",2),r.\u0275\u0275elementEnd()),2&w){var j=r.\u0275\u0275nextContext();r.\u0275\u0275property("ngStyle",j.barsStyle),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",j.barsProperties.bars)}}var he=function(){function w(){this.largeBarType=0,this.multipleBarType=1,this.multipleSmallLargeType=2}return w.prototype.ngOnChanges=function(){this.barsProperties&&(this.barsStyle={height:"".concat((this.barsProperties.height+8)*this.barsProperties.bars.length,"px")})},w.\u0275fac=function(j){return new(j||w)},w.\u0275cmp=r.\u0275\u0275defineComponent({type:w,selectors:[["shimmering-bars"]],inputs:{barsProperties:"barsProperties"},features:[r.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[["class","bars",3,"ngStyle",4,"ngIf"],[1,"bars",3,"ngStyle"],[3,"ngSwitch",4,"ngFor","ngForOf"],[3,"ngSwitch"],["class","largerLoadingBar animate",4,"ngSwitchCase"],["class","multipleBars",4,"ngSwitchCase"],["class","multipleSmallLarge",4,"ngSwitchCase"],[1,"largerLoadingBar","animate"],[1,"multipleBars"],[1,"miniLoadingBar","animate"],[1,"smallerLoadingBar","animate"],[1,"multipleSmallLarge"],[1,"shimmerBox","animate"],[1,"smallLargeBarContainer"],[1,"upperLoadingBar","animate"],[1,"lowerLoadingBar","animate"]],template:function(j,Z){1&j&&r.\u0275\u0275template(0,W,2,2,"div",0),2&j&&r.\u0275\u0275property("ngIf",Z.barsProperties)},dependencies:[P.NgForOf,P.NgIf,P.NgStyle,P.NgSwitch,P.NgSwitchCase],styles:['[_nghost-%COMP%]{--shimmer-background-color: var(--gray-20);--shimmer-animate1: var(--gray-30);--shimmer-animate2: var(--gray-50)}[data-legacy-theming=false]   [_nghost-%COMP%]{--shimmer-background-color: var(--colorNeutralBackground3);--shimmer-animate1: var(--colorNeutralBackground3Hover);--shimmer-animate2: var(--colorNeutralBackground3Pressed)}.bars[_ngcontent-%COMP%]{display:flex;flex-direction:column}.largerLoadingBar[_ngcontent-%COMP%]{border-radius:2px;flex-grow:1;background:var(--shimmer-background-color)}html:not([dir="rtl"])[_nghost-%COMP%]   .largerLoadingBar[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .largerLoadingBar[_ngcontent-%COMP%]{margin:4px 8px}html[dir="rtl"][_nghost-%COMP%]   .largerLoadingBar[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .largerLoadingBar[_ngcontent-%COMP%]{margin:4px 8px}.multipleBars[_ngcontent-%COMP%]{display:flex;align-items:center;flex-grow:1}html:not([dir="rtl"])[_nghost-%COMP%]   .multipleBars[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .multipleBars[_ngcontent-%COMP%]{margin:4px 8px}html[dir="rtl"][_nghost-%COMP%]   .multipleBars[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .multipleBars[_ngcontent-%COMP%]{margin:4px 8px}.miniLoadingBar[_ngcontent-%COMP%]{border-radius:2px;height:60%;width:10%;background:var(--shimmer-background-color)}html:not([dir="rtl"])[_nghost-%COMP%]   .miniLoadingBar[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .miniLoadingBar[_ngcontent-%COMP%]{margin-right:4px}html[dir="rtl"][_nghost-%COMP%]   .miniLoadingBar[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .miniLoadingBar[_ngcontent-%COMP%]{margin-left:4px}.smallerLoadingBar[_ngcontent-%COMP%]{border-radius:2px;height:80%;width:100%;background:var(--shimmer-background-color)}html:not([dir="rtl"])[_nghost-%COMP%]   .smallerLoadingBar[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .smallerLoadingBar[_ngcontent-%COMP%]{margin-left:4px}html[dir="rtl"][_nghost-%COMP%]   .smallerLoadingBar[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .smallerLoadingBar[_ngcontent-%COMP%]{margin-right:4px}.multipleSmallLarge[_ngcontent-%COMP%]{display:flex;flex-grow:1;padding:10px 9px}html:not([dir="rtl"])[_nghost-%COMP%]   .multipleSmallLarge[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .multipleSmallLarge[_ngcontent-%COMP%]{margin:4px 8px}html[dir="rtl"][_nghost-%COMP%]   .multipleSmallLarge[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .multipleSmallLarge[_ngcontent-%COMP%]{margin:4px 8px}.upperLoadingBar[_ngcontent-%COMP%]{border-radius:2px;height:65%;width:49%;background:var(--shimmer-background-color)}html:not([dir="rtl"])[_nghost-%COMP%]   .upperLoadingBar[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .upperLoadingBar[_ngcontent-%COMP%]{margin:0 4px 11px 0}html[dir="rtl"][_nghost-%COMP%]   .upperLoadingBar[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .upperLoadingBar[_ngcontent-%COMP%]{margin:0 0 11px 4px}.lowerLoadingBar[_ngcontent-%COMP%]{border-radius:2px;height:65%;width:100%;background:var(--shimmer-background-color)}.shimmerBox[_ngcontent-%COMP%]{background:var(--shimmer-background-color);border-radius:2px;height:32px;width:32px}.smallLargeBarContainer[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;max-width:167px}html:not([dir="rtl"])[_nghost-%COMP%]   .smallLargeBarContainer[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .smallLargeBarContainer[_ngcontent-%COMP%]{margin:4px 0 2.42px 13px}html[dir="rtl"][_nghost-%COMP%]   .smallLargeBarContainer[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .smallLargeBarContainer[_ngcontent-%COMP%]{margin:4px 13px 2.42px 0}.animate[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_shimmer 5s infinite linear;background:linear-gradient(270deg,var(--shimmer-animate1) 0%,var(--shimmer-animate2) 50%,var(--shimmer-animate1) 100%);background-size:250% 100%}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:250% 0}to{background-position:-250% 0}}'],changeDetection:0}),w}(),ce=o(85102),N=["pbiTree"];function t(w,re){if(1&w){var j=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"tri-search-box",5),r.\u0275\u0275listener("value",function(xe){r.\u0275\u0275restoreView(j);var Te=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(Te.search$.next(xe))}),r.\u0275\u0275pipe(1,"localize"),r.\u0275\u0275pipe(2,"localize"),r.\u0275\u0275elementEnd()}if(2&w){var Z=r.\u0275\u0275nextContext();r.\u0275\u0275property("currentInputValue",Z.searchText||"")("placeholderText",r.\u0275\u0275pipeBind1(2,8,"SearchBox_Text"))("fluentTheme",!0)("compact",!0)("fullWidth",!0),r.\u0275\u0275attribute("aria-label",r.\u0275\u0275pipeBind1(1,6,"SearchBox_Text"))}}function X(w,re){if(1&w){var j=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"pbi-search-box")(1,"input",6),r.\u0275\u0275listener("input",function(xe){r.\u0275\u0275restoreView(j);var Te=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(Te.search$.next(xe.target.value))}),r.\u0275\u0275pipe(2,"localize"),r.\u0275\u0275pipe(3,"localize"),r.\u0275\u0275elementEnd()()}if(2&w){var Z=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("value",Z.searchText||"")("placeholder",r.\u0275\u0275pipeBind1(3,5,"SearchBox_Text")),r.\u0275\u0275attribute("aria-label",r.\u0275\u0275pipeBind1(2,3,"SearchBox_Text"))}}function te(w,re){if(1&w&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275element(1,"shimmering-bars",7),r.\u0275\u0275elementContainerEnd()),2&w){var j=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("barsProperties",j.shimmeringBars)}}function ae(w,re){if(1&w){var j=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"pbi-tree",12,13),r.\u0275\u0275listener("onNodeClick",function(xe){r.\u0275\u0275restoreView(j);var Te=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(Te.onNodeClick.emit(xe))})("onNodeCheck",function(xe){r.\u0275\u0275restoreView(j);var Te=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(Te.onNodeCheck.emit(xe))})("onNodeExpansionToggle",function(xe){r.\u0275\u0275restoreView(j);var Te=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(Te.onNodeExpansionToggle.emit(xe))})("onFirstRender",function(){r.\u0275\u0275restoreView(j);var xe=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(xe.onFirstRender())}),r.\u0275\u0275pipe(2,"async"),r.\u0275\u0275elementEnd()}if(2&w){var Z=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("tree",Z.fieldListTree)("search",r.\u0275\u0275pipeBind1(2,5,Z.search$))("hasHighlights",Z.hasHighlights)("checkMode",Z.checkMode)("options",Z._options)}}function be(w,re){1&w&&r.\u0275\u0275projection(0,2)}function Oe(w,re){if(1&w&&(r.\u0275\u0275elementStart(0,"div",8),r.\u0275\u0275element(1,"div",9),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(2,ae,3,7,"pbi-tree",10),r.\u0275\u0275template(3,be,1,0,"ng-template",null,11,r.\u0275\u0275templateRefExtractor)),2&w){var j=r.\u0275\u0275reference(4),Z=r.\u0275\u0275nextContext();r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",Z.fieldListTree)("ngIfElse",j)}}var _e=[[["",8,"pbi-field-list-perspective-header"]],[["",8,"pbi-field-list-header"]],[["",8,"pbi-field-list-watermark"]]],Pe=[".pbi-field-list-perspective-header",".pbi-field-list-header",".pbi-field-list-watermark"],ue={height:24,bars:[0,1,1,0,0]},Ee=function(){function w(){this.hasHighlights=!1,this.loading=!1,this.shimmeringBars=ue,this.defaultOptions={},this._options=this.defaultOptions,this.onNodeExpansionToggle=new r.EventEmitter,this.onNodeClick=new r.EventEmitter,this.onNodeCheck=new r.EventEmitter,this.onFirstRenderComplete=new r.EventEmitter,this.handleFieldListTreeHeightDiff=new r.EventEmitter,this.search$=new e.xQ}return Object.defineProperty(w.prototype,"options",{set:function(j){this._options=(0,f.pi)((0,f.pi)({},this.defaultOptions),j)},enumerable:!1,configurable:!0}),w.prototype.ngOnInit=function(){var re=this;this.focusSearchBoxOnFirstRenderComplete&&this.onFirstRenderComplete.pipe((0,k.q)(1)).subscribe(function(){return re.focusSearchBox()})},w.prototype.onFirstRender=function(){var re=this.getFieldListTreeHeightDiff();this.handleFieldListTreeHeightDiff.emit(re),this.scrollSelectedItemIntoViewOnInit&&this.pbiTree.scrollToFirstSelectedNode(),this.onFirstRenderComplete.emit()},w.prototype.focusSearchBox=function(){$(".field-list-search-container input").trigger("focus")},w.prototype.getFieldListTreeHeightDiff=function(){return this.pbiTree.getTreeHeight()+2-this.pbiTreeElementRef.nativeElement.getBoundingClientRect().height},w.\u0275fac=function(j){return new(j||w)},w.\u0275cmp=r.\u0275\u0275defineComponent({type:w,selectors:[["pbi-field-list"]],viewQuery:function(j,Z){if(1&j&&(r.\u0275\u0275viewQuery(F.u,5),r.\u0275\u0275viewQuery(N,5,r.ElementRef)),2&j){var ve=void 0;r.\u0275\u0275queryRefresh(ve=r.\u0275\u0275loadQuery())&&(Z.pbiTree=ve.first),r.\u0275\u0275queryRefresh(ve=r.\u0275\u0275loadQuery())&&(Z.pbiTreeElementRef=ve.first)}},inputs:{fieldListTree:"fieldListTree",scrollSelectedItemIntoViewOnInit:"scrollSelectedItemIntoViewOnInit",checkMode:"checkMode",hasHighlights:"hasHighlights",loading:"loading",searchText:"searchText",focusSearchBoxOnFirstRenderComplete:"focusSearchBoxOnFirstRenderComplete",fluent:"fluent",options:"options"},outputs:{onNodeExpansionToggle:"onNodeExpansionToggle",onNodeClick:"onNodeClick",onNodeCheck:"onNodeCheck",onFirstRenderComplete:"onFirstRenderComplete",handleFieldListTreeHeightDiff:"handleFieldListTreeHeightDiff"},features:[r.\u0275\u0275ProvidersFeature(E)],ngContentSelectors:Pe,decls:8,vars:4,consts:[["data-tutorial-target","search-box",1,"field-list-search-container"],["data-testid","search-bar-input",3,"currentInputValue","placeholderText","fluentTheme","compact","fullWidth","value",4,"ngIf"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["loaded",""],["data-testid","search-bar-input",3,"currentInputValue","placeholderText","fluentTheme","compact","fullWidth","value"],["pbiSearchInput","","data-testid","search-bar-input",1,"pbi-focus-outline",3,"value","placeholder","input"],[3,"barsProperties"],[1,"tutorial-target-container"],["data-tutorial-target","data-tree"],["data-testid","data-tree",3,"tree","search","hasHighlights","checkMode","options","onNodeClick","onNodeCheck","onNodeExpansionToggle","onFirstRender",4,"ngIf","ngIfElse"],["watermark",""],["data-testid","data-tree",3,"tree","search","hasHighlights","checkMode","options","onNodeClick","onNodeCheck","onNodeExpansionToggle","onFirstRender"],["pbiTree",""]],template:function(j,Z){if(1&j&&(r.\u0275\u0275projectionDef(_e),r.\u0275\u0275elementStart(0,"div",0),r.\u0275\u0275template(1,t,3,10,"tri-search-box",1),r.\u0275\u0275template(2,X,4,7,"pbi-search-box",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275projection(3),r.\u0275\u0275projection(4,1),r.\u0275\u0275template(5,te,2,1,"ng-container",3),r.\u0275\u0275template(6,Oe,5,2,"ng-template",null,4,r.\u0275\u0275templateRefExtractor)),2&j){var ve=r.\u0275\u0275reference(7);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",Z.fluent),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!Z.fluent),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngIf",Z.loading)("ngIfElse",ve)}},dependencies:[P.NgIf,p.a,p.p,m.U,F.u,he,P.AsyncPipe,ce.F],styles:["[_nghost-%COMP%]{height:100%;display:flex;flex-direction:column}pbi-tree[_ngcontent-%COMP%]{margin-top:9px;height:100%;display:block;overflow:hidden}.tutorial-target-container[_ngcontent-%COMP%]{position:relative;visibility:hidden;height:0;width:0}.tutorial-target-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;top:20px;visibility:hidden;height:0;width:0}"],changeDetection:0}),w}()},68070:function(Me,Q,o){o.d(Q,{a:function(){return Ce},p:function(){return J}});var f=o(81337),r=o(50423),k=o(73221),e=o(35510),F=o(59017),E=o(63057),P=o(59787),p=o(6754),m=o(14172),D=o(77526),b=o(77476),M=function(){return{tooltipLocalizeTitle:"Clear",tooltipShowOnFocus:!0}};function T(K,pe){if(1&K){var he=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",2),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(he);var N=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(N.onCancelButtonClick())}),r.\u0275\u0275elementEnd()}2&K&&r.\u0275\u0275property("pbi-tooltip",r.\u0275\u0275pureFunction0(1,M))}var W=[[["input"]]],ee=["input"],J=function(){function K(){}return K.\u0275fac=function(he){return new(he||K)},K.\u0275dir=r.\u0275\u0275defineDirective({type:K,selectors:[["","pbiSearchInput",""]]}),K}(),Ce=function(K){function pe(he){var ce=K.call(this)||this;return ce.changeDetectorRef=he,ce.searchCleared=new r.EventEmitter,ce.onSearchTextChanged=new r.EventEmitter,ce.emptyValue$=new e.X(void 0),ce.hasInput=!1,ce}return(0,f.ZT)(pe,K),pe.prototype.onCancelButtonClick=function(){this.clearSearchText(),this.input.nativeElement.focus()},pe.prototype.clearSearchText=function(){this.input.nativeElement.value="",this.hasInput=!1,this.changeDetectorRef.markForCheck(),this.emptyValue$.next(),this.searchCleared.emit()},pe.prototype.ngAfterViewInit=function(){var he=this;this.lifecycleSubscriptions.add((0,F.aj)([(0,E.T)((0,P.R)(this.input.nativeElement,"keyup"),(0,P.R)(this.input.nativeElement,"keydown")).pipe((0,p.b)(250)),this.emptyValue$]).pipe((0,m.U)(function(){return he.input.nativeElement.value}),(0,D.x)()).subscribe(function(ce){return he.onSearchTextChanged.emit(ce)})),setTimeout(function(){return he.onInputChanged(he.input.nativeElement.value)},0)},pe.prototype.onInputChanged=function(he){this.hasInput!==!!he&&(this.hasInput=!!he,this.changeDetectorRef.markForCheck())},pe.\u0275fac=function(ce){return new(ce||pe)(r.\u0275\u0275directiveInject(r.ChangeDetectorRef))},pe.\u0275cmp=r.\u0275\u0275defineComponent({type:pe,selectors:[["pbi-search-box"]],contentQueries:function(ce,N,t){var X;(1&ce&&r.\u0275\u0275contentQuery(t,J,5,r.ElementRef),2&ce)&&(r.\u0275\u0275queryRefresh(X=r.\u0275\u0275loadQuery())&&(N.input=X.first))},outputs:{searchCleared:"searchCleared",onSearchTextChanged:"onSearchTextChanged"},features:[r.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:ee,decls:3,vars:1,consts:[[1,"pbi-search-box",3,"input"],["class","clearIcon pbi-borderless-button glyphicon pbi-glyph-clear glyph-mini searchbox-clear-icon",3,"pbi-tooltip","click",4,"ngIf"],[1,"clearIcon","pbi-borderless-button","glyphicon","pbi-glyph-clear","glyph-mini","searchbox-clear-icon",3,"pbi-tooltip","click"]],template:function(ce,N){1&ce&&(r.\u0275\u0275projectionDef(W),r.\u0275\u0275elementStart(0,"div",0),r.\u0275\u0275listener("input",function(X){return N.onInputChanged(X.target.value)}),r.\u0275\u0275projection(1),r.\u0275\u0275template(2,T,1,2,"button",1),r.\u0275\u0275elementEnd()),2&ce&&(r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",N.hasInput))},dependencies:[b.NgIf],styles:['.pbi-search-box{--searchBox-colorEditLabelBorder: var(--gray-120);--searchBox-colorEditLabelBorderHover: var(--gray-160);--searchBox-colorEditLabelForeground: var(--gray-130);--searchBox-colorEditLabelPlaceholderForeground: var(--gray-140);--searchBox-colorEditLabelBackground: auto;--searchBox-colorEditLabelSelectedForeground: var(--text-primary-content-color);--searchBox-colorEditLabelSelectedBackground: var(--fluent-theme-primary-color)}[data-legacy-theming=false] .pbi-search-box{--searchBox-colorEditLabelBorder: var(--colorNeutralStroke1);--searchBox-colorEditLabelBorderHover: var(--colorNeutralStroke1);--searchBox-colorEditLabelForeground: var(--colorNeutralForeground1);--searchBox-colorEditLabelPlaceholderForeground: auto;--searchBox-colorEditLabelBackground: var(--colorNeutralBackground1);--searchBox-colorEditLabelSelectedForeground: var(--colorNeutralForegroundOnBrand);--searchBox-colorEditLabelSelectedBackground: var(--colorBrandBackground)}.pbi-search-box{display:block;width:100%;position:relative}.pbi-search-box:before{content:"\\e721"}.pbi-search-box:before{color:var(--searchBox-colorEditLabelForeground);display:inline-block;font-family:PowrMDL2;font-size:14px;position:absolute;top:6px;left:8px}.pbi-search-box input{padding:3px 28px;border-radius:2px;border:1px solid var(--searchBox-colorEditLabelBorder);color:var(--searchBox-colorEditLabelForeground);background-color:var(--searchBox-colorEditLabelBackground);outline:none;box-sizing:border-box;font-size:14px;width:100%}.pbi-search-box input:hover,.pbi-search-box input:focus{border-color:var(--searchBox-colorEditLabelBorderHover)}.pbi-search-box input::placeholder{color:var(--searchBox-colorEditLabelPlaceholderForeground)}.pbi-search-box input::selection{background:var(--searchBox-colorEditLabelSelectedBackground);color:var(--searchBox-colorEditLabelSelectedForeground)}.pbi-search-box .pbi-glyph-clear{background-color:transparent}.pbi-search-box .searchbox-clear-icon{color:var(--searchBox-colorEditLabelForeground);position:absolute;right:8px;top:7px;border:0px;padding:0}\n'],encapsulation:2,changeDetection:0}),pe}(k.w)}}]);