"use strict";(self.webpackChunkreportServerHostModern=self.webpackChunkreportServerHostModern||[]).push([["basicShape"],{27960:function(U,M,f){f.r(M),f.d(M,{BasicShape:function(){return z}});var p=f(32169),v=f(90120),N=f(30237),F=f(33024),y=f(83496),T=f(44783),X=f(62458),j=f(59107),g=f(82755);function S(a,e,t,r,s,n,i){var u={transform:"translate("+(i?i.translateX:0)+","+(i?i.translateY:0)+")",d:d3.line().x(function(d){return d.x}).y(function(d){return d.y}).curve(d3.curveLinear)(e)+" Z"};m(a,b(r,s,t,n,C(s,r,n)),"path",u)}function b(a,e,t,r,s){return t.append("div").styles({transform:"rotate("+r+"deg) scale("+s+")","transform-origin":"center","-webkit-transform":"rotate("+r+"deg) scale("+s+")","-webkit-transform-origin":"center",width:e+"px",height:a+"px"}).append("svg").attrs({width:e,height:a})}function m(a,e,t,r){e.append(t).attrs(r).styles({"vector-effect":"non-scaling-stroke","stroke-width":a.lineWeight+"px",stroke:a.lineColor,"stroke-opacity":(100-a.lineTransparency)/100,fill:a.fillColor,"fill-opacity":!0===a.showFill?(100-a.shapeTransparency)/100:0})}function C(a,e,t){var r=a,s=e,n=Math.atan2(e,a),i=Math.sqrt(Math.pow(e,2)+Math.pow(a,2)),l=t/180*Math.PI;return a>=e?(t<90?l+=n:t<180?l-=n:t<270?l+=n:l-=n,s/Math.abs(Math.sin(l))/i):(t<90?l-=n:t<180?l+=n:t<270?l-=n:l+=n,r/Math.abs(Math.cos(l))/i)}function A(a,e){return{deltaX:.5*a-.05*a,deltaY:.42*e-.016*e}}var V=y.C9,P="backgroundLight",k=!0,z=function(){function a(){}return Object.defineProperty(a.prototype,"shapeType",{get:function(){return this.data.shapeType},set:function(t){this.data.shapeType=t},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"lineColor",{get:function(){return this.data?this.data.lineColor:v.v.getDataColorByIndex(this.style,0,T.fA)},set:function(t){this.data.lineColor=t},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"lineTransparency",{get:function(){return this.data?this.data.lineTransparency:0},set:function(t){this.data.lineTransparency=t},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"lineWeight",{get:function(){return this.data?this.data.lineWeight:3},set:function(t){this.data.lineWeight=t},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"roundEdge",{get:function(){return this.data?this.data.roundEdge:0},set:function(t){this.data.roundEdge=t},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"showFill",{get:function(){return this.data?this.data.showFill:k},set:function(t){this.data.showFill=t},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"fillColor",{get:function(){return this.data?this.data.fillColor:v.v.getThemeColor(this.style,P)},set:function(t){this.data.fillColor=t},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"shapeTransparency",{get:function(){return this.data?this.data.shapeTransparency:0},set:function(t){this.data.shapeTransparency=t},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"angle",{get:function(){return this.data?this.data.angle:0},set:function(t){this.data.angle=this.scaleTo360Deg(t)},enumerable:!1,configurable:!0}),a.prototype.init=function(e){this.element=e.element,this.selection=d3.select(this.element[0]),this.currentViewport=e.viewport,this.hostServices=e.host,this.style=e.style},a.prototype.update=function(e){if(X.fF.assertValue(e,"options"),this.currentViewport=e.viewport,!_.isEmpty(e.dataViews)){var r=e.dataViews[0];r.metadata&&r.metadata.objects&&(this.data=this.getDataFromDataView(e.dataViews[0].metadata.objects),this.render())}},a.prototype.getDataFromDataView=function(e){if(e){var t=(0,g.NA)(e,p.O.general.shapeType,V),r=this.getDefaultsForShape(t),s=v.v.create(this.style);return{shapeType:t,lineColor:s.getColorForPropertyWithDefaultColor(e,p.O.line.lineColor,r.lineColor),lineTransparency:(0,g.NA)(e,p.O.line.transparency,r.lineTransparency),lineWeight:(0,g.NA)(e,p.O.line.weight,r.lineWeight),roundEdge:(0,g.NA)(e,p.O.line.roundEdge,r.roundEdge),shapeTransparency:(0,g.NA)(e,p.O.fill.transparency,r.shapeTransparency),fillColor:s.getColorForProperty(e,p.O.fill.fillColor,P),showFill:(0,g.NA)(e,p.O.fill.show,r.showFill),angle:this.scaleTo360Deg((0,g.NA)(e,p.O.rotation.angle,r.angle))}}return null},a.prototype.scaleTo360Deg=function(e){return 0!==e&&Math.abs(e)%360==0||(e=(360+(e%=360))%360),e},a.prototype.enumerateObjectInstances=function(e){var t=[];if(!this.data)return t;switch(e.objectName){case"line":var r={selector:null,properties:{lineColor:this.lineColor,transparency:this.lineTransparency,weight:this.lineWeight},objectName:e.objectName};return this.shapeType===y.C9&&(r.properties.roundEdge=this.roundEdge,r.validValues={roundEdge:{unitSymbol:F.e_,numberRange:{min:0,max:100}}}),t.push(r),t;case"fill":return this.shapeType!==y.jv&&t.push({selector:null,properties:{show:this.showFill,fillColor:this.fillColor,transparency:this.shapeTransparency},objectName:e.objectName}),t;case"rotation":return t.push({selector:null,properties:{angle:this.angle},objectName:e.objectName}),t}return null},a.prototype.onViewModeChanged=function(e){this.updateVisualLinkProps()},a.prototype.render=function(){var e=this;switch(this.selection.html(""),this.shapeType){case y.C9:!function(a,e,t,r,s){var l=.98*t-a.lineWeight,o=.98*e-a.lineWeight,c={x:.01*t+a.lineWeight/2,y:.01*e+a.lineWeight/2,width:l,height:o,rx:a.roundEdge,ry:a.roundEdge};m(a,b(e,t,r,s,C(l,o,s)),"rect",c)}(this.data,this.currentViewport.height,this.currentViewport.width,this.selection,this.angle);break;case y.BG:!function(a,e,t,r,s){var c={cx:(t/2).toString(),cy:(e/2).toString(),rx:t/2.2-a.lineWeight,ry:e/2.2-a.lineWeight};m(a,b(e,t,r,s,C(t,e,s)),"ellipse",c)}(this.data,this.currentViewport.height,this.currentViewport.width,this.selection,this.angle);break;case y.jv:!function(a,e,t,r,s){var n,i,l,o,h,c=t-10-10,u=e-10-10;s<=45?(n=t/2+c*(h=s/90),i=10,l=t/2-c*h,o=e-10):s<=135?(n=t-10,i=10+u*(h=(s-45)/90),l=10,o=e-10-u*h):s<=225?(n=t-10-c*(h=(s-135)/90),i=e-10,l=10+c*h,o=10):s<=315?(n=10,i=e-10-u*(h=(s-225)/90),l=t-10,o=10+u*h):s<=360&&(n=10+c*(h=(s-315)/90),i=10,l=t-10-c*h,o=e-10),r.append("svg").attrs({width:t,height:e}).append("line").attrs({x1:n,y1:i,x2:l,y2:o}).styles({"vector-effect":"non-scaling-stroke","stroke-width":a.lineWeight+"px","stroke-opacity":(100-a.lineTransparency)/100,stroke:a.lineColor})}(this.data,this.currentViewport.height,this.currentViewport.width,this.selection,this.angle);break;case y.x7:!function(a,e,t,r,s){var n=a.lineWeight,i=function(a,e,t){var r=A(a,e),i=Math.atan(r.deltaY/r.deltaX),l=Math.PI-i;return Math.sin(l/2)*t/Math.sin(i/2)}(t,e,n),l=function(a,e,t){var r=A(a,e),i=2*Math.atan(r.deltaX/r.deltaY),l=Math.PI-i,o=Math.sin(l/2)*t,c=Math.cos(l/2)*t;return o/Math.tan(i/2)+c+5}(t,e,n),o=t-i,c=e-l;S(a,[{x:.05*o,y:.42*c},{x:.5*o,y:.016*c},{x:.95*o,y:.42*c},{x:.764*o,y:.42*c},{x:.764*o,y:.993*c},{x:.246*o,y:.993*c},{x:.246*o,y:.42*c}],r,e,t,s,{translateX:i/2,translateY:l/2})}(this.data,this.currentViewport.height,this.currentViewport.width,this.selection,this.angle);break;case y.cP:!function(a,e,t,r,s){var n=a.lineWeight;n>3&&(n-=3);var i=.15*(t-n),o=.15*(e-n),c=.85*(t-n)<0?.85*t:.85*(t-n),h=(i+c)/2;i<10&&(i=10),o<10&&(o=10),S(a,[{x:i,y:e-10-n<0?e-10:e-10-n},{x:h,y:o},{x:c,y:e-10-n<0?e-10:e-n-10}],r,e,t,s,{translateX:n/2,translateY:n/2})}(this.data,this.currentViewport.height,this.currentViewport.width,this.selection,this.angle);break;case y.yX:!function(a,e,t,r,s){var i=b(e,t,r,s,C(t,e,s));i.attr("viewBox","5 5 26 26"),m(a,i,"path",{d:"M30,18.1c0,1.1-0.1,2.2-0.4,3.2s-0.7,2-1.2,2.9s-1.1,1.7-1.9,2.4S24.9,28,24,28.5s-1.8,0.9-2.9,1.2s-2.1,0.4-3.2,0.4 s-2.2-0.1-3.2-0.4s-2-0.7-2.9-1.2s-1.7-1.1-2.4-1.9s-1.4-1.5-1.9-2.4s-0.9-1.8-1.2-2.9S6,19.2,6,18.1s0.1-2.2,0.4-3.2 s0.7-2,1.2-2.9s1.1-1.7,1.9-2.4s1.5-1.4,2.4-1.9s1.8-0.9,2.9-1.2s2.1-0.4,3.2-0.4c1.1,0,2.2,0.1,3.2,0.4s2,0.7,2.9,1.2 s1.7,1.1,2.4,1.9s1.4,1.5,1.9,2.4s0.9,1.8,1.2,2.9S30,17,30,18.1z M7.5,18.1c0,1,0.1,1.9,0.4,2.8s0.6,1.7,1.1,2.5s1,1.5,1.6,2.1 s1.3,1.2,2.1,1.6s1.6,0.8,2.5,1.1s1.8,0.4,2.8,0.4c1,0,1.9-0.1,2.8-0.4s1.7-0.6,2.5-1.1s1.5-1,2.1-1.6s1.2-1.3,1.6-2.1 s0.8-1.6,1.1-2.5s0.4-1.8,0.4-2.8s-0.1-1.9-0.4-2.8s-0.6-1.7-1.1-2.5s-1-1.5-1.6-2.1S24,9.5,23.3,9S21.6,8.2,20.8,8 S18.9,7.6,18,7.6S16.1,7.7,15.2,8S13.5,8.6,12.7,9s-1.5,1-2.1,1.6S9.4,12,8.9,12.8s-0.8,1.6-1.1,2.5S7.5,17.1,7.5,18.1z M19.2,24.3 l-1.1,1.1l-7.3-7.3l7.3-7.3l1.1,1.1l-5.5,5.5l11.7,0v1.5l-11.7,0L19.2,24.3z"})}(this.data,this.currentViewport.height,this.currentViewport.width,this.selection,this.angle)}this.selection.on("click",function(){var t=d3.event,r={type:0,visualObjects:[{objectName:"basicShape",selectorsByColumn:{}}],isCtrlOrMetaKey:j.M.isCtrlOrMeta(t),isShiftKey:t.shiftKey,position:(0,N.bt)()};e.hostServices.onSelecting(r),1===r.action&&t.stopPropagation()}),this.updateVisualLinkProps(),function(e,t){var s,r=y.dt.members().filter(function(n){return n.value===e});r.length>0&&(s=r[0].displayName),t.setAriaMetadata({subtitleDisplayNameGetter:s})}(this.shapeType,this.hostServices)},a.prototype.updateVisualLinkProps=function(){var e=this.hostServices.getVisualLinkProperties();e&&this.selection.style("cursor",e.hasVisualLink?"pointer":"inherit")},a.prototype.getDefaultsForShape=function(e){var t={angle:0,fillColor:v.v.getThemeColor(this.style,P),lineColor:v.v.getDataColorByIndex(this.style,0,T.fA),lineTransparency:0,lineWeight:3,roundEdge:0,shapeTransparency:0,shapeType:V,showFill:k};if(e===y.yX){var r=_.clone(t);return r.lineWeight=0,r}return t},a}()}}]);