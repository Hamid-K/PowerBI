(self.webpackChunkdesktopDaxQueryView=self.webpackChunkdesktopDaxQueryView||[]).push([["slicer"],{45863:function(nt,We){var y,Z;void 0!==(Z="function"==typeof(y=function(){"use strict";var h="14.6.2";function ce(o){o.parentElement.removeChild(o)}function De(o){return null!=o}function w(o){o.preventDefault()}function U(o){return"number"==typeof o&&!isNaN(o)&&isFinite(o)}function b(o,s,x){x>0&&(m(o,s),setTimeout(function(){V(o,s)},x))}function c(o){return Math.max(Math.min(o,100),0)}function v(o){return Array.isArray(o)?o:[o]}function d(o){var s=(o=String(o)).split(".");return s.length>1?s[1].length:0}function m(o,s){o.classList&&!/\s/.test(s)?o.classList.add(s):o.className+=" "+s}function V(o,s){o.classList&&!/\s/.test(s)?o.classList.remove(s):o.className=o.className.replace(new RegExp("(^|\\b)"+s.split(" ").join("|")+"(\\b|$)","gi")," ")}function G(o){var s=void 0!==window.pageXOffset,x="CSS1Compat"===(o.compatMode||"");return{x:s?window.pageXOffset:x?o.documentElement.scrollLeft:o.body.scrollLeft,y:s?window.pageYOffset:x?o.documentElement.scrollTop:o.body.scrollTop}}function se(o,s){return 100/(s-o)}function T(o,s,x){return 100*s/(o[x+1]-o[x])}function ke(o,s){for(var x=1;o>=s[x];)x+=1;return x}function Qe(o,s,x){if(x>=o.slice(-1)[0])return 100;var I=ke(x,o),ae=s[I-1],pe=s[I];return ae+function(o,s){return T(o,o[0]<0?s+Math.abs(o[0]):s-o[0],0)}([o[I-1],o[I]],x)/se(ae,pe)}function z(o,s,x,I){if(100===I)return I;var W=ke(I,o),re=o[W-1],ae=o[W];return x?I-re>(ae-re)/2?ae:re:s[W-1]?o[W-1]+function(o,s){return Math.round(o/s)*s}(I-o[W-1],s[W-1]):I}function Tt(o,s,x){var I;if("number"==typeof s&&(s=[s]),!Array.isArray(s))throw new Error("noUiSlider ("+h+"): 'range' contains invalid value.");if(!U(I="min"===o?0:"max"===o?100:parseFloat(o))||!U(s[0]))throw new Error("noUiSlider ("+h+"): 'range' value isn't numeric.");x.xPct.push(I),x.xVal.push(s[0]),I?x.xSteps.push(!isNaN(s[1])&&s[1]):isNaN(s[1])||(x.xSteps[0]=s[1]),x.xHighestCompleteStep.push(0)}function Ft(o,s,x){if(s){if(x.xVal[o]===x.xVal[o+1])return void(x.xSteps[o]=x.xHighestCompleteStep[o]=x.xVal[o]);x.xSteps[o]=T([x.xVal[o],x.xVal[o+1]],s,0)/se(x.xPct[o],x.xPct[o+1]);var W=Math.ceil(Number(((x.xVal[o+1]-x.xVal[o])/x.xNumSteps[o]).toFixed(3))-1);x.xHighestCompleteStep[o]=x.xVal[o]+x.xNumSteps[o]*W}}function Ae(o,s,x){this.xPct=[],this.xVal=[],this.xSteps=[x||!1],this.xNumSteps=[!1],this.xHighestCompleteStep=[],this.snap=s;var I,W=[];for(I in o)o.hasOwnProperty(I)&&W.push([o[I],I]);for(W.sort(W.length&&"object"==typeof W[0][0]?function(re,ae){return re[0][0]-ae[0][0]}:function(re,ae){return re[0]-ae[0]}),I=0;I<W.length;I++)Tt(W[I][1],W[I][0],this);for(this.xNumSteps=this.xSteps.slice(0),I=0;I<this.xNumSteps.length;I++)Ft(I,this.xNumSteps[I],this)}Ae.prototype.getDistance=function(o){var s,x=[];for(s=0;s<this.xNumSteps.length-1;s++){var I=this.xNumSteps[s];if(I&&o/I%1!=0)throw new Error("noUiSlider ("+h+"): 'limit', 'margin' and 'padding' of "+this.xPct[s]+"% range must be divisible by step.");x[s]=T(this.xVal,o,s)}return x},Ae.prototype.getAbsoluteDistance=function(o,s,x){var I=0;if(o<this.xPct[this.xPct.length-1])for(;o>this.xPct[I+1];)I++;else o===this.xPct[this.xPct.length-1]&&(I=this.xPct.length-2);!x&&o===this.xPct[I+1]&&I++;var W,re=1,ae=s[I],pe=0,Y=0,we=0,xe=0;for(W=x?(o-this.xPct[I])/(this.xPct[I+1]-this.xPct[I]):(this.xPct[I+1]-o)/(this.xPct[I+1]-this.xPct[I]);ae>0;)pe=this.xPct[I+1+xe]-this.xPct[I+xe],s[I+xe]*re+100-100*W>100?(Y=pe*W,re=(ae-100*W)/s[I+xe],W=1):(Y=s[I+xe]*pe/100*re,re=0),x?(we-=Y,this.xPct.length+xe>=1&&xe--):(we+=Y,this.xPct.length-xe>=1&&xe++),ae=s[I+xe]*re;return o+we},Ae.prototype.toStepping=function(o){return Qe(this.xVal,this.xPct,o)},Ae.prototype.fromStepping=function(o){return function(o,s,x){if(x>=100)return o.slice(-1)[0];var I=ke(x,s),ae=s[I-1];return function(o,s){return s*(o[1]-o[0])/100+o[0]}([o[I-1],o[I]],(x-ae)*se(ae,s[I]))}(this.xVal,this.xPct,o)},Ae.prototype.getStep=function(o){return z(this.xPct,this.xSteps,this.snap,o)},Ae.prototype.getDefaultStep=function(o,s,x){var I=ke(o,this.xPct);return(100===o||s&&o===this.xPct[I-1])&&(I=Math.max(I-1,1)),(this.xVal[I]-this.xVal[I-1])/x},Ae.prototype.getNearbySteps=function(o){var s=ke(o,this.xPct);return{stepBefore:{startValue:this.xVal[s-2],step:this.xNumSteps[s-2],highestStep:this.xHighestCompleteStep[s-2]},thisStep:{startValue:this.xVal[s-1],step:this.xNumSteps[s-1],highestStep:this.xHighestCompleteStep[s-1]},stepAfter:{startValue:this.xVal[s],step:this.xNumSteps[s],highestStep:this.xHighestCompleteStep[s]}}},Ae.prototype.countStepDecimals=function(){var o=this.xNumSteps.map(d);return Math.max.apply(null,o)},Ae.prototype.convert=function(o){return this.getStep(this.toStepping(o))};var ge={to:function(s){return void 0!==s&&s.toFixed(2)},from:Number},qe={target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",touchArea:"touch-area",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",textDirectionLtr:"txt-dir-ltr",textDirectionRtl:"txt-dir-rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"};function et(o){if(function(o){return"object"==typeof o&&"function"==typeof o.to&&"function"==typeof o.from}(o))return!0;throw new Error("noUiSlider ("+h+"): 'format' requires 'to' and 'from' methods.")}function mt(o,s){if(!U(s))throw new Error("noUiSlider ("+h+"): 'step' is not numeric.");o.singleStep=s}function $e(o,s){if(!U(s))throw new Error("noUiSlider ("+h+"): 'keyboardPageMultiplier' is not numeric.");o.keyboardPageMultiplier=s}function St(o,s){if(!U(s))throw new Error("noUiSlider ("+h+"): 'keyboardDefaultStep' is not numeric.");o.keyboardDefaultStep=s}function Me(o,s){if("object"!=typeof s||Array.isArray(s))throw new Error("noUiSlider ("+h+"): 'range' is not an object.");if(void 0===s.min||void 0===s.max)throw new Error("noUiSlider ("+h+"): Missing 'min' or 'max' in 'range'.");if(s.min===s.max)throw new Error("noUiSlider ("+h+"): 'range' 'min' and 'max' cannot be equal.");o.spectrum=new Ae(s,o.snap,o.singleStep)}function Ge(o,s){if(s=v(s),!Array.isArray(s)||!s.length)throw new Error("noUiSlider ("+h+"): 'start' option is incorrect.");o.handles=s.length,o.start=s}function yt(o,s){if(o.snap=s,"boolean"!=typeof s)throw new Error("noUiSlider ("+h+"): 'snap' option must be a boolean.")}function tt(o,s){if(o.animate=s,"boolean"!=typeof s)throw new Error("noUiSlider ("+h+"): 'animate' option must be a boolean.")}function Ct(o,s){if(o.animationDuration=s,"number"!=typeof s)throw new Error("noUiSlider ("+h+"): 'animationDuration' option must be a number.")}function Ot(o,s){var I,x=[!1];if("lower"===s?s=[!0,!1]:"upper"===s&&(s=[!1,!0]),!0===s||!1===s){for(I=1;I<o.handles;I++)x.push(s);x.push(!1)}else{if(!Array.isArray(s)||!s.length||s.length!==o.handles+1)throw new Error("noUiSlider ("+h+"): 'connect' option doesn't match handle count.");x=s}o.connect=x}function it(o,s){switch(s){case"horizontal":o.ort=0;break;case"vertical":o.ort=1;break;default:throw new Error("noUiSlider ("+h+"): 'orientation' option is invalid.")}}function ot(o,s){if(!U(s))throw new Error("noUiSlider ("+h+"): 'margin' option must be numeric.");0!==s&&(o.margin=o.spectrum.getDistance(s))}function Nt(o,s){if(!U(s))throw new Error("noUiSlider ("+h+"): 'limit' option must be numeric.");if(o.limit=o.spectrum.getDistance(s),!o.limit||o.handles<2)throw new Error("noUiSlider ("+h+"): 'limit' option is only supported on linear sliders with 2 or more handles.")}function lt(o,s){var x;if(!U(s)&&!Array.isArray(s))throw new Error("noUiSlider ("+h+"): 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(s)&&2!==s.length&&!U(s[0])&&!U(s[1]))throw new Error("noUiSlider ("+h+"): 'padding' option must be numeric or array of exactly 2 numbers.");if(0!==s){for(Array.isArray(s)||(s=[s,s]),o.padding=[o.spectrum.getDistance(s[0]),o.spectrum.getDistance(s[1])],x=0;x<o.spectrum.xNumSteps.length-1;x++)if(o.padding[0][x]<0||o.padding[1][x]<0)throw new Error("noUiSlider ("+h+"): 'padding' option must be a positive number(s).");if((s[0]+s[1])/(o.spectrum.xVal[o.spectrum.xVal.length-1]-o.spectrum.xVal[0])>1)throw new Error("noUiSlider ("+h+"): 'padding' option must not exceed 100% of the range.")}}function bt(o,s){switch(s){case"ltr":o.dir=0;break;case"rtl":o.dir=1;break;default:throw new Error("noUiSlider ("+h+"): 'direction' option was not recognized.")}}function ut(o,s){if("string"!=typeof s)throw new Error("noUiSlider ("+h+"): 'behaviour' must be a string containing options.");var x=s.indexOf("tap")>=0,I=s.indexOf("drag")>=0,W=s.indexOf("fixed")>=0,re=s.indexOf("snap")>=0,ae=s.indexOf("hover")>=0,pe=s.indexOf("unconstrained")>=0;if(W){if(2!==o.handles)throw new Error("noUiSlider ("+h+"): 'fixed' behaviour must be used with 2 handles");ot(o,o.start[1]-o.start[0])}if(pe&&(o.margin||o.limit))throw new Error("noUiSlider ("+h+"): 'unconstrained' behaviour cannot be used with margin or limit");o.events={tap:x||re,drag:I,fixed:W,snap:re,hover:ae,unconstrained:pe}}function ct(o,s){if(!1!==s)if(!0===s){o.tooltips=[];for(var x=0;x<o.handles;x++)o.tooltips.push(!0)}else{if(o.tooltips=v(s),o.tooltips.length!==o.handles)throw new Error("noUiSlider ("+h+"): must pass a formatter for all handles.");o.tooltips.forEach(function(I){if("boolean"!=typeof I&&("object"!=typeof I||"function"!=typeof I.to))throw new Error("noUiSlider ("+h+"): 'tooltips' must be passed a formatter or 'false'.")})}}function At(o,s){o.ariaFormat=s,et(s)}function E(o,s){o.format=s,et(s)}function S(o,s){if(o.keyboardSupport=s,"boolean"!=typeof s)throw new Error("noUiSlider ("+h+"): 'keyboardSupport' option must be a boolean.")}function P(o,s){o.documentElement=s}function D(o,s){if("string"!=typeof s&&!1!==s)throw new Error("noUiSlider ("+h+"): 'cssPrefix' must be a string or `false`.");o.cssPrefix=s}function F(o,s){if("object"!=typeof s)throw new Error("noUiSlider ("+h+"): 'cssClasses' must be an object.");if("string"==typeof o.cssPrefix)for(var x in o.cssClasses={},s)s.hasOwnProperty(x)&&(o.cssClasses[x]=o.cssPrefix+s[x]);else o.cssClasses=s}function Q(o){var s={margin:0,limit:0,padding:0,animate:!0,animationDuration:300,ariaFormat:ge,format:ge},x={step:{r:!1,t:mt},keyboardPageMultiplier:{r:!1,t:$e},keyboardDefaultStep:{r:!1,t:St},start:{r:!0,t:Ge},connect:{r:!0,t:Ot},direction:{r:!0,t:bt},snap:{r:!1,t:yt},animate:{r:!1,t:tt},animationDuration:{r:!1,t:Ct},range:{r:!0,t:Me},orientation:{r:!1,t:it},margin:{r:!1,t:ot},limit:{r:!1,t:Nt},padding:{r:!1,t:lt},behaviour:{r:!0,t:ut},ariaFormat:{r:!1,t:At},format:{r:!1,t:E},tooltips:{r:!1,t:ct},keyboardSupport:{r:!0,t:S},documentElement:{r:!1,t:P},cssPrefix:{r:!0,t:D},cssClasses:{r:!0,t:F}},I={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses:qe,keyboardPageMultiplier:5,keyboardDefaultStep:10};o.format&&!o.ariaFormat&&(o.ariaFormat=o.format),Object.keys(x).forEach(function(Y){if(!De(o[Y])&&void 0===I[Y]){if(x[Y].r)throw new Error("noUiSlider ("+h+"): '"+Y+"' is required.");return!0}x[Y].t(s,De(o[Y])?o[Y]:I[Y])}),s.pips=o.pips;var W=document.createElement("div");return s.transformRule=void 0!==W.style.transform?"transform":void 0!==W.style.msTransform?"msTransform":"webkitTransform",s.style=[["left","top"],["right","bottom"]][s.dir][s.ort],s}function ie(o,s,x){var pe,Y,we,xe,Ee,je,u,I=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},re=window.CSS&&CSS.supports&&CSS.supports("touch-action","none")&&function(){var o=!1;try{var s=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("test",null,s)}catch{}return o}(),ae=o,oe=s.spectrum,Re=[],B=[],ue=[],Te=0,Oe={},Ke=o.ownerDocument,Xe=s.documentElement||Ke.documentElement,ze=Ke.body,xt=-1,rt=0,dt=1,zt=2,vi="rtl"===Ke.dir||1===s.ort?0:100;function _e(u,p){var g=Ke.createElement("div");return p&&m(g,p),u.appendChild(g),g}function wt(u,p){var g=_e(u,s.cssClasses.origin),R=_e(g,s.cssClasses.handle);return _e(R,s.cssClasses.touchArea),R.setAttribute("data-handle",p),s.keyboardSupport&&(R.setAttribute("tabindex","0"),R.addEventListener("keydown",function(O){return function(u,p){if(Zt()||Ht(p))return!1;var g=["Left","Right"],R=["Down","Up"],O=["PageDown","PageUp"],A=["Home","End"];s.dir&&!s.ort?g.reverse():s.ort&&!s.dir&&(R.reverse(),O.reverse());var Ie,L=u.key.replace("Arrow",""),le=L===O[0],fe=L===O[1],me=L===R[0]||L===g[0]||le,ye=L===R[1]||L===g[1]||fe,Se=L===A[1];if(!(me||ye||L===A[0]||Se))return!0;if(u.preventDefault(),ye||me){var Je=s.keyboardPageMultiplier,at=me?0:1,He=hi(p)[at];if(null===He)return!1;!1===He&&(He=oe.getDefaultStep(B[p],me,s.keyboardDefaultStep)),(fe||le)&&(He*=Je),He=Math.max(He,1e-7),Ie=Re[p]+(He*=me?-1:1)}else Ie=Se?s.spectrum.xVal[s.spectrum.xVal.length-1]:s.spectrum.xVal[0];return Ye(p,oe.toStepping(Ie),!0,!0),Pe("slide",p),Pe("update",p),Pe("change",p),Pe("set",p),!1}(O,p)})),R.setAttribute("role","slider"),R.setAttribute("aria-orientation",s.ort?"vertical":"horizontal"),0===p?m(R,s.cssClasses.handleLower):p===s.handles-1&&m(R,s.cssClasses.handleUpper),g}function Yt(u,p){return!!p&&_e(u,s.cssClasses.connect)}function Jt(u,p){return!!s.tooltips[p]&&_e(u.firstChild,s.cssClasses.tooltip)}function Zt(){return ae.hasAttribute("disabled")}function Ht(u){return Y[u].hasAttribute("disabled")}function Lt(){Ee&&(oi("update.tooltips"),Ee.forEach(function(u){u&&ce(u)}),Ee=null)}function qt(){Lt(),Ee=Y.map(Jt),Ut("update.tooltips",function(u,p,g){if(Ee[p]){var R=u[p];!0!==s.tooltips[p]&&(R=s.tooltips[p].to(g[p])),Ee[p].innerHTML=R}})}function ti(u,p,g){var R=Ke.createElement("div"),O=[];O[rt]=s.cssClasses.valueNormal,O[dt]=s.cssClasses.valueLarge,O[zt]=s.cssClasses.valueSub;var A=[];A[rt]=s.cssClasses.markerNormal,A[dt]=s.cssClasses.markerLarge,A[zt]=s.cssClasses.markerSub;var L=[s.cssClasses.valueHorizontal,s.cssClasses.valueVertical],le=[s.cssClasses.markerHorizontal,s.cssClasses.markerVertical];function fe(ye,Ne){var Se=Ne===s.cssClasses.value;return Ne+" "+(Se?L:le)[s.ort]+" "+(Se?O:A)[ye]}return m(R,s.cssClasses.pips),m(R,0===s.ort?s.cssClasses.pipsHorizontal:s.cssClasses.pipsVertical),Object.keys(u).forEach(function(ye){!function(ye,Ne,Se){if((Se=p?p(Ne,Se):Se)!==xt){var Ie=_e(R,!1);Ie.className=fe(Se,s.cssClasses.marker),Ie.style[s.style]=ye+"%",Se>rt&&((Ie=_e(R,!1)).className=fe(Se,s.cssClasses.value),Ie.setAttribute("data-value",Ne),Ie.style[s.style]=ye+"%",Ie.innerHTML=g.to(Ne))}}(ye,u[ye][0],u[ye][1])}),R}function ht(){xe&&(ce(xe),xe=null)}function kt(u){ht();var p=u.mode,R=u.filter||!1,le=function(u,p,g){function R(ye,Ne){return(ye+Ne).toFixed(7)/1}var O={},A=oe.xVal[0],L=oe.xVal[oe.xVal.length-1],le=!1,fe=!1,me=0;return(g=function(o){return o.filter(function(s){return!this[s]&&(this[s]=!0)},{})}(g.slice().sort(function(ye,Ne){return ye-Ne})))[0]!==A&&(g.unshift(A),le=!0),g[g.length-1]!==L&&(g.push(L),fe=!0),g.forEach(function(ye,Ne){var Se,Ie,Je,He,$t,Gt,Qt,Rt,_t,at=ye,Ze=g[Ne+1],pi="steps"===p;if(pi&&(Se=oe.xNumSteps[Ne]),Se||(Se=Ze-at),!1!==at)for(void 0===Ze&&(Ze=at),Se=Math.max(Se,1e-7),Ie=at;Ie<=Ze;Ie=R(Ie,Se)){for(_t=($t=(He=oe.toStepping(Ie))-me)/(Rt=Math.round($t/u)),Je=1;Je<=Rt;Je+=1)O[(Gt=me+Je*_t).toFixed(5)]=[oe.fromStepping(Gt),0];Qt=g.indexOf(Ie)>-1?dt:pi?zt:rt,!Ne&&le&&Ie!==Ze&&(Qt=0),Ie===Ze&&fe||(O[He.toFixed(5)]=[Ie,Qt]),me=He}}),O}(u.density||1,p,function(u,p,g){if("range"===u||"steps"===u)return oe.xVal;if("count"===u){if(p<2)throw new Error("noUiSlider ("+h+"): 'values' (>= 2) required for mode 'count'.");var R=p-1,O=100/R;for(p=[];R--;)p[R]=R*O;p.push(100),u="positions"}return"positions"===u?p.map(function(A){return oe.fromStepping(g?oe.getStep(A):A)}):"values"===u?g?p.map(function(A){return oe.fromStepping(oe.getStep(oe.toStepping(A)))}):p:void 0}(p,u.values||!1,u.stepped||!1)),fe=u.format||{to:Math.round};return xe=ae.appendChild(ti(le,R,fe))}function ii(){var u=pe.getBoundingClientRect(),p="offset"+["Width","Height"][s.ort];return 0===s.ort?u.width||pe[p]:u.height||pe[p]}function Be(u,p,g,R){var O=function(le){if(!(le=function(u,p,g){var L,le,R=0===u.type.indexOf("touch"),O=0===u.type.indexOf("mouse"),A=0===u.type.indexOf("pointer");if(0===u.type.indexOf("MSPointer")&&(A=!0),"mousedown"===u.type&&!u.buttons&&!u.touches)return!1;if(R){var fe=function(Se){return Se.target===g||g.contains(Se.target)||Se.target.shadowRoot&&Se.target.shadowRoot.contains(g)};if("touchstart"===u.type){var me=Array.prototype.filter.call(u.touches,fe);if(me.length>1)return!1;L=me[0].pageX,le=me[0].pageY}else{var ye=Array.prototype.find.call(u.changedTouches,fe);if(!ye)return!1;L=ye.pageX,le=ye.pageY}}return p=p||G(Ke),(O||A)&&(L=u.clientX+p.x,le=u.clientY+p.y),u.pageOffset=p,u.points=[L,le],u.cursor=O||A,u}(le,R.pageOffset,R.target||p))||Zt()&&!R.doNotReject||function(o,s){return o.classList?o.classList.contains(s):new RegExp("\\b"+s+"\\b").test(o.className)}(ae,s.cssClasses.tap)&&!R.doNotReject||u===I.start&&void 0!==le.buttons&&le.buttons>1||R.hover&&le.buttons)return!1;re||le.preventDefault(),le.calcPoint=le.points[s.ort],g(le,R)},A=[];return u.split(" ").forEach(function(L){var le=!!re&&{passive:!0};p.addEventListener(L,O,le),A.push([L,O,le])}),A}function ai(u){var g=100*(u-function(o,s){var x=o.getBoundingClientRect(),I=o.ownerDocument,W=I.documentElement,re=G(I);return/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(re.x=0),s?x.top+re.y-W.clientTop:x.left+re.x-W.clientLeft}(pe,s.ort))/ii();return g=c(g),s.dir?100-g:g}function Ci(u,p){"mouseout"===u.type&&"HTML"===u.target.nodeName&&null===u.relatedTarget&&It(u,p)}function bi(u,p){if(-1===navigator.appVersion.indexOf("MSIE 9")&&0===u.buttons&&0!==p.buttonsProperty)return It(u,p);var g=(s.dir?-1:1)*(u.calcPoint-p.startCalcPoint);li(g>0,100*g/p.baseSize,p.locations,p.handleNumbers)}function It(u,p){p.handle&&(V(p.handle,s.cssClasses.active),Te-=1),p.listeners.forEach(function(g){Xe.removeEventListener(g[0],g[1],g[2])}),0===Te&&(V(ae,s.cssClasses.drag),Wt(),u.cursor&&(ze.style.cursor="",ze.removeEventListener("selectstart",w))),p.handleNumbers.forEach(function(g){Pe("change",g),Pe("set",g),Pe("end",g)})}function jt(u,p){if(p.handleNumbers.some(Ht))return!1;var g;1===p.handleNumbers.length&&(Te+=1,m(g=Y[p.handleNumbers[0]].children[0],s.cssClasses.active)),u.stopPropagation();var O=[],A=Be(I.move,Xe,bi,{target:u.target,handle:g,listeners:O,startCalcPoint:u.calcPoint,baseSize:ii(),pageOffset:u.pageOffset,handleNumbers:p.handleNumbers,buttonsProperty:u.buttons,locations:B.slice()}),L=Be(I.end,Xe,It,{target:u.target,handle:g,listeners:O,doNotReject:!0,handleNumbers:p.handleNumbers}),le=Be("mouseout",Xe,Ci,{target:u.target,handle:g,listeners:O,doNotReject:!0,handleNumbers:p.handleNumbers});O.push.apply(O,A.concat(L,le)),u.cursor&&(ze.style.cursor=getComputedStyle(u.target).cursor,Y.length>1&&m(ae,s.cssClasses.drag),ze.addEventListener("selectstart",w,!1)),p.handleNumbers.forEach(function(fe){Pe("start",fe)})}function xi(u){u.stopPropagation();var p=ai(u.calcPoint),g=function(u){var p=100,g=!1;return Y.forEach(function(R,O){if(!Ht(O)){var A=B[O],L=Math.abs(A-u);(L<p||L<=p&&u>A||100===L&&100===p)&&(g=O,p=L)}}),g}(p);if(!1===g)return!1;s.events.snap||b(ae,s.cssClasses.tap,s.animationDuration),Ye(g,p,!0,!0),Wt(),Pe("slide",g,!0),Pe("update",g,!0),Pe("change",g,!0),Pe("set",g,!0),s.events.snap&&jt(u,{handleNumbers:[g]})}function ni(u){var p=ai(u.calcPoint),g=oe.getStep(p),R=oe.fromStepping(g);Object.keys(Oe).forEach(function(O){"hover"===O.split(".")[0]&&Oe[O].forEach(function(A){A.call(je,R)})})}function Ut(u,p){Oe[u]=Oe[u]||[],Oe[u].push(p),"update"===u.split(".")[0]&&Y.forEach(function(g,R){Pe("update",R)})}function oi(u){var p=u&&u.split(".")[0],g=p&&u.substring(p.length);Object.keys(Oe).forEach(function(R){var O=R.split(".")[0],A=R.substring(O.length);p&&p!==O||g&&g!==A||delete Oe[R]})}function Pe(u,p,g){Object.keys(Oe).forEach(function(R){var O=R.split(".")[0];u===O&&Oe[R].forEach(function(A){A.call(je,Re.map(s.format.to),p,Re.slice(),g||!1,B.slice(),je)})})}function pt(u,p,g,R,O,A){var L;return Y.length>1&&!s.events.unconstrained&&(R&&p>0&&(L=oe.getAbsoluteDistance(u[p-1],s.margin,0),g=Math.max(g,L)),O&&p<Y.length-1&&(L=oe.getAbsoluteDistance(u[p+1],s.margin,1),g=Math.min(g,L))),Y.length>1&&s.limit&&(R&&p>0&&(L=oe.getAbsoluteDistance(u[p-1],s.limit,0),g=Math.min(g,L)),O&&p<Y.length-1&&(L=oe.getAbsoluteDistance(u[p+1],s.limit,1),g=Math.max(g,L))),s.padding&&(0===p&&(L=oe.getAbsoluteDistance(0,s.padding[0],0),g=Math.max(g,L)),p===Y.length-1&&(L=oe.getAbsoluteDistance(100,s.padding[1],1),g=Math.min(g,L))),!((g=c(g=oe.getStep(g)))===u[p]&&!A)&&g}function Dt(u,p){var g=s.ort;return(g?p:u)+", "+(g?u:p)}function li(u,p,g,R){var O=g.slice(),A=[!u,u],L=[u,!u];R=R.slice(),u&&R.reverse(),R.length>1?R.forEach(function(fe,me){var ye=pt(O,fe,O[fe]+p,A[me],L[me],!1);!1===ye?p=0:(p=ye-O[fe],O[fe]=ye)}):A=L=[!0];var le=!1;R.forEach(function(fe,me){le=Ye(fe,g[fe]+p,A[me],L[me])||le}),le&&R.forEach(function(fe){Pe("update",fe),Pe("slide",fe)})}function ui(u,p){return s.dir?100-u-p:u}function Wt(){ue.forEach(function(u){Y[u].style.zIndex=3+(Y.length+(B[u]>50?-1:1)*u)})}function Ye(u,p,g,R,O){return O||(p=pt(B,u,p,g,R,!1)),!1!==p&&(function(u,p){B[u]=p,Re[u]=oe.fromStepping(p);var R="translate("+Dt(10*(ui(p,0)-vi)+"%","0")+")";Y[u].style[s.transformRule]=R,ci(u),ci(u+1)}(u,p),!0)}function ci(u){if(we[u]){var p=0,g=100;0!==u&&(p=B[u-1]),u!==we.length-1&&(g=B[u]);var R=g-p,O="translate("+Dt(ui(p,R)+"%","0")+")",A="scale("+Dt(R/100,"1")+")";we[u].style[s.transformRule]=O+" "+A}}function di(u,p){return null===u||!1===u||void 0===u||("number"==typeof u&&(u=String(u)),u=s.format.from(u),!1===(u=oe.toStepping(u))||isNaN(u))?B[p]:u}function ft(u,p,g){var R=v(u);p=void 0===p||!!p,s.animate&&!(void 0===B[0])&&b(ae,s.cssClasses.tap,s.animationDuration),ue.forEach(function(L){Ye(L,di(R[L],L),!0,!1,g)});for(var A=1===ue.length?0:1;A<ue.length;++A)ue.forEach(function(L){Ye(L,B[L],!0,!0,g)});Wt(),ue.forEach(function(L){Pe("update",L),null!==R[L]&&p&&Pe("set",L)})}function Kt(){var u=Re.map(s.format.to);return 1===u.length?u[0]:u}function hi(u){var p=B[u],g=oe.getNearbySteps(p),R=Re[u],O=g.thisStep.step,A=null;if(s.snap)return[R-g.stepBefore.startValue||null,g.stepAfter.startValue-R||null];!1!==O&&R+O>g.stepAfter.startValue&&(O=g.stepAfter.startValue-R),A=R>g.thisStep.startValue?g.thisStep.step:!1!==g.stepBefore.step&&R-g.stepBefore.highestStep,100===p?O=null:0===p&&(A=null);var L=oe.countStepDecimals();return null!==O&&!1!==O&&(O=Number(O.toFixed(L))),null!==A&&!1!==A&&(A=Number(A.toFixed(L))),[A,O]}return m(u=ae,s.cssClasses.target),m(u,0===s.dir?s.cssClasses.ltr:s.cssClasses.rtl),m(u,0===s.ort?s.cssClasses.horizontal:s.cssClasses.vertical),m(u,"rtl"===getComputedStyle(u).direction?s.cssClasses.textDirectionRtl:s.cssClasses.textDirectionLtr),pe=_e(u,s.cssClasses.base),function(u,p){var g=_e(p,s.cssClasses.connects);Y=[],(we=[]).push(Yt(g,u[0]));for(var R=0;R<s.handles;R++)Y.push(wt(p,R)),ue[R]=R,we.push(Yt(g,u[R+1]))}(s.connect,pe),function(u){u.fixed||Y.forEach(function(p,g){Be(I.start,p.children[0],jt,{handleNumbers:[g]})}),u.tap&&Be(I.start,pe,xi,{}),u.hover&&Be(I.move,pe,ni,{hover:!0}),u.drag&&we.forEach(function(p,g){if(!1!==p&&0!==g&&g!==we.length-1){var R=Y[g-1],O=Y[g],A=[p];m(p,s.cssClasses.draggable),u.fixed&&(A.push(R.children[0]),A.push(O.children[0])),A.forEach(function(L){Be(I.start,L,jt,{handles:[R,O],handleNumbers:[g-1,g]})})}})}(s.events),ft(s.start),s.pips&&kt(s.pips),s.tooltips&&qt(),Ut("update",function(u,p,g,R,O){ue.forEach(function(A){var L=Y[A],le=pt(B,A,0,!0,!0,!0),fe=pt(B,A,100,!0,!0,!0),me=O[A];s.ariaFormat.to(g[A]),le=oe.fromStepping(le).toFixed(0),fe=oe.fromStepping(fe).toFixed(0),me=oe.fromStepping(me).toFixed(0),L.children[0].setAttribute("aria-valuemin",le),L.children[0].setAttribute("aria-valuemax",fe),L.children[0].setAttribute("aria-valuenow",me)})}),je={destroy:function(){for(var u in s.cssClasses)s.cssClasses.hasOwnProperty(u)&&V(ae,s.cssClasses[u]);for(;ae.firstChild;)ae.removeChild(ae.firstChild);delete ae.noUiSlider},steps:function(){return ue.map(hi)},on:Ut,off:oi,get:Kt,set:ft,setHandle:function(u,p,g,R){if(!((u=Number(u))>=0&&u<ue.length))throw new Error("noUiSlider ("+h+"): invalid handle number, got: "+u);Ye(u,di(p,u),!0,!0,R),Pe("update",u),g&&Pe("set",u)},reset:function(u){ft(s.start,u)},__moveHandles:function(p,g,R){li(p,g,B,R)},options:x,updateOptions:function(u,p){var g=Kt(),R=["margin","limit","padding","range","animate","snap","step","format","pips","tooltips"];R.forEach(function(A){void 0!==u[A]&&(x[A]=u[A])});var O=Q(x);R.forEach(function(A){void 0!==u[A]&&(s[A]=O[A])}),oe=O.spectrum,s.margin=O.margin,s.limit=O.limit,s.padding=O.padding,s.pips?kt(s.pips):ht(),s.tooltips?qt():Lt(),B=[],ft(u.start||g,p)},target:ae,removePips:ht,removeTooltips:Lt,getTooltips:function(){return Ee},getOrigins:function(){return Y},pips:kt}}return{__spectrum:Ae,version:h,cssClasses:qe,create:function(o,s){if(!o||!o.nodeName)throw new Error("noUiSlider ("+h+"): create requires a single element, got: "+o);if(o.noUiSlider)throw new Error("noUiSlider ("+h+"): Slider was already initialized.");var I=ie(o,Q(s),s);return o.noUiSlider=I,I}}})?y.apply(We,[]):y)&&(nt.exports=Z)},87592:function(nt,We,y){"use strict";y.d(We,{VT:function(){return $e},OQ:function(){return St}});var X=y(81337),Z=y(9434),h=y(90120),ve=y(18664),ce=y(32105),De=y(40550),w=y(36265),he=y(45296),Ce=y(62458),J=y(38265),U=y(48066),b=y(59694),c=y(82755),v=y(78843),d=y(72489),m=y(26543),V=y(1629),H=y(95462),G=y(24653),ee=y(75074),be=y(45413),de=y(68447),se=y(54522),T=function(){function E(S,P,D){this.columns=P,this.selectedDataPoints=D,this.column=S&&!_.isEmpty(S.categories)?S.categories[0]:null,this.column&&(this.objects=this.column.objects),this.count=this.column&&this.column.values?this.column.values.length:0,this.isImage=(0,se.pt)(this.columns[0])}return E.prototype.getDataPointsCount=function(){return this.count},E.prototype.getMetadataColumn=function(){return this.column&&this.column.source||this.columns[0]},E.prototype.getDataViewDataPoint=function(S){var D,P=this;return Ce.fF.assert(function(){return S<=P.count},".getDataViewDataPoint index is out of bounds"),this.objects&&(D=(0,c.NA)(this.objects[S],Z.gO.general.count,D)),{scopeId:this.column.identity[S],count:D,value:this.column.values[S],levelCount:this.count}},E.prototype.isImageData=function(){return this.isImage},E.prototype.getLevel=function(){return 0},E.prototype.hasCount=function(){return!_.isEmpty(this.objects)},E.prototype.getSelectedNodes=function(){return this.selectedDataPoints},E.prototype.getMetadataColumns=function(){return this.column&&[this.column.source]},E.prototype.getIdentityExprs=function(){return this.column&&this.column.identityFields&&[this.column.identityFields]},E}(),Fe=y(62283),gt=y(93187),ke=function(){function E(S,P,D,F){this.matrix=S,this.metadataColumns=P,this.root=D,this.selectedDataPoints=F,this.root=D,this.level=D&&D.level+1||0,this.root||(this.root=S&&S.rows&&S.rows.root,!this.root||_.isEmpty(S.rows.levels))||(this.metadata=S.rows.levels[this.level].sources[0],this.metadata&&(this.isImageUrlColumn=(0,se.pt)(this.metadata))),this.valueSources=S?.valueSources,this.count=this.root&&this.root.children&&this.root.children.length||0}return E.prototype.getDataPointsCount=function(){return this.count},E.prototype.getMetadataColumn=function(){return this.metadata||this.metadataColumns[this.level]},E.prototype.getDataViewDataPoint=function(S){var P=this;Ce.fF.assert(function(){return S<P.count&&S>=0},".getDataViewDataPoint index is out of bounds");var D,F=this.root.children[S];if(!F.isSubtotal){var ie;if(Ce.fF.assert(function(){return 1===F.levelValues.length},".getDataViewDataPoint does not expect levelValues to have more than one value."),_.some(F.children,function(W){return!W.isSubtotal})){var te=_.find(this.selectedDataPoints,function(W){return(0,v.fS)(W.identity,F.identity)});ie=new E(this.matrix,this.metadataColumns,F,te&&te.children)}D=F.levelValues[0].value;var s,o=!_.isEmpty((0,c.NA)(F.objects,Fe.yD.image.image,void 0,"default"));this.isImage=!o&&1===this.metadataColumns.length&&this.isImageUrlColumn,this.isImage&&(s=(0,d.WU)(D));var x=this.readTooltipInfo(F),I=this.count;return this.root&&this.root.children&&(I=_.filter(this.root.children,function(W){return!W.isSubtotal&&W.level===F.level}).length),{scopeId:F.identity,isCollapsed:F.isCollapsed,value:D,childrenReader:ie,tooltipInfo:x,imageUrl:s,label:this.readLabelValue(F.objects),objects:F.objects,levelCount:I}}},E.prototype.isImageData=function(){return this.isImage},E.prototype.getLevel=function(){return this.level},E.prototype.hasCount=function(){return!1},E.prototype.getSelectedNodes=function(){return this.selectedDataPoints},E.prototype.getMetadataColumns=function(){},E.prototype.getIdentityExprs=function(){return this.metadataColumns&&_.map(this.metadataColumns,function(S){return S.identityExprs})},E.prototype.readLabelValue=function(S){if(S)return(0,c.NA)(S,gt.OV.label.field)},E.prototype.readTooltipInfo=function(S){var P,D;if(!_.isEmpty(S.values))for(var F in S.values){var Q=S.values[F],ie=null!==(P=Q.valueSourceIndex)&&void 0!==P?P:0,te=(0,c.NA)(Q.objects,Fe.yD.general.formatString),o=this.valueSources[ie];(D=D||[]).push({displayName:o.displayName,value:(0,se.xq)(Q.value,o,Fe.yD.general.formatString,!1,te)})}return D},E}(),Qe=function(){function E(S,P,D){this.dataView=S,this.listJoinSeparator=P,this.initMetadataColumns(),this.reader=S.categorical?new T(S.categorical,this.columns,D):new ke(S.matrix,this.columns,void 0,D)}return E.prototype.getIdentityFields=function(){var S=this.getMetadataColumns();return this.reader.getIdentityExprs()||_.map(S,function(P){return P.identityExprs})},E.prototype.getDataPointsReader=function(){return this.reader},E.prototype.hasGroupOnKeys=function(){var S=this.getMetadataColumns();if(_.isEmpty(S))return!1;for(var P=0,D=S;P<D.length;P++){var F=D[P];if(!_.isEmpty(F.identityExprs)&&!_.isEmpty(F.expr)&&(F.identityExprs.length>1||!(0,be.fS)(F.identityExprs[0],F.expr)))return!0}return!1},E.prototype.getQueryNamePerLevel=function(){var S=this.getMetadataColumns();return _.map(S,function(P){return P.queryName})},E.prototype.getDisplayNamePerLevel=function(){var S=this.getMetadataColumns();return _.map(S,function(P){return P.displayName})},E.prototype.getDisplayName=function(){var S=this.getDisplayNamePerLevel();return _.join(S,this.listJoinSeparator)},E.prototype.getColumns=function(){return this.columns},E.prototype.getMetadataColumnByLevel=function(S){return this.columns[S]},E.prototype.getMetadataColumns=function(){return this.reader.getMetadataColumns()||this.columns},E.prototype.initMetadataColumns=function(){this.columns=(0,de.zJ)(this.dataView.metadata.columns)},E}(),st=y(74082),z=y(3222),Tt=y(18885),Ft=y(83611),Ae=function(){function E(S,P){this.hasMappedColumn=!1,this.filter=S.filter,this.isNotFilter=!1,this.analyze(S,P)}return E.prototype.analyze=function(S,P){var D=this;if(this.hasMappedColumn=(0,de.R6)({columns:S.columns}),this.isAnyFilter=H.yl.isAnyFilter(this.filter),!this.isAnyFilter){var F=S.fieldSQExprs;if(this.filter){var Q=(0,V.Gl)(this.filter,F);if(Q){if(this.isNotFilter=_.some(Q,function(I){return!I.selected}),this.hasMappedColumn){var ie=_.some(Q,function(I){return D.isSQExprBlank(I)});(this.isNotFilter||ie)&&(this.isNotFilter=!1,this.filter=void 0)}this.selectedIdentities=Q,this.isDefaultFilter=1===this.selectedIdentities.length&&(0,Tt.F)(this.selectedIdentities[0].identity.expr)}}if(this.defaultValueByLevel=this.getDataViewDefaultValuePerLevel(S.columns,S.defaultValuePropertyId),!_.isEmpty(_.compact(this.defaultValueByLevel))&&!P&&(this.filter||(this.filter=Ft.N.buildDefaultValueFilter(S.columns),this.selectedIdentities=(0,V.Gl)(this.filter,F),this.isDefaultFilter=!0),this.isDefaultFilter&&!_.isEmpty(this.selectedIdentities)))for(var te=this.selectedIdentities[0],o=0;te;){var x=(0,v.TZ)((0,z.R)(F[o],this.defaultValueByLevel[o].identityFieldsValues));this.isNotFilter=!1,te.identity=x,Ce.fF.assert(function(){return _.isEmpty(te.children)||1===te.children.length},"Default value filter can not have more than single node per level"),te=_.isEmpty(te.children)?void 0:te.children[0],o++}}},E.prototype.isSQExprBlank=function(S){var P=S.identity.expr;return!!(0,st.$Q)(P)&&(0,st.WC)(P)},E.prototype.getDataViewDefaultValuePerLevel=function(S,P){if(!_.isEmpty(S))return _.map(S,function(D){return(0,c.NA)(D.objects,P)})},E}(),ge="foregroundNeutralSecondaryAlt2",qe="foregroundNeutralSecondary",et="#C8C8C8",mt="#ffffff";function $e(E){return{general:{outlineWeight:1,outlineColor:h.v.getThemeColor(E,ge)},slicerText:{color:h.v.getThemeColor(E,qe),outlineStyle:De.$m.Nil,textSize:10,fontFamily:J.Wn.regular.css,labelBold:!1,labelItalic:!1,labelUnderline:!1},selection:(0,de.Cq)(),search:{enabled:!1,outlineStyle:De.$m.Bottom,borderColor:et,background:mt},expandCollapse:{indentation:15,visible:!0,toggleType:w.H.Chevron},items:{padding:void 0,accessibilityContrastProperties:!1}}}function St(E){var S=E.dataView,P=E.hostServices,D=E.selectionHandler;if(Ce.fF.assertValue(P,"hostServices"),S&&S.metadata&&!_.isEmpty(S.metadata.columns)){var F=P.getLocalizedString("ListJoin_Separator"),Q=new Qe(S,P.getLocalizedString("ListJoin_Separator")),ie=Q.getIdentityFields();if(!_.isEmpty(ie)){var te=S.metadata&&S.metadata.objects&&(0,c.NA)(S.metadata.objects,Z.gO.general.filter),o=Q.getColumns(),x=new Ae({columns:o,defaultValuePropertyId:Z.gO.general.defaultValue,filter:te,fieldSQExprs:ie},P.ignoreDefaultFilter());_.isEmpty(x.selectedIdentities)||(Q=new Qe(S,F,x.selectedIdentities));var I=x.hasMappedColumn&&!(0,de.Wm)({columns:o});(function(E,S,P,D,F){var Q=S.filter,ie=P.isSelectionModeInverted();if(Q&&!H.yl.isSameFilter(Q,E)){P.handleClearSelection();var te=Z.gO.general.filter,o={};o[te.propertyName]=S.filter,D.persistProperties({merge:[{objectName:te.objectName,selector:void 0,properties:o}]})}F&&(ie||!H.yl.isSameFilter(Q,E))&&(0,de.K5)(P,!1)})(te,x,D,P,I),D.setColumns(Q.getColumns()),D.setQueryNameByLevel(Q.getQueryNamePerLevel());var W=function(E,S,P,D,F){var Q=D.hostServices,ie=D.selectionHandler,te=D.style,o=D.localizedSelectAllText,s=D.localizedDeselectAllText,x=D.isSlicer??!1,I=null!=ie&&ie.isSelectionModeInverted();I=E.filter?E.isAnyFilter?(0,c.NA)(S.objects,Z.gO.data.isInvertedSelectionMode,I):E.isNotFilter:!E.hasMappedColumn&&(0,c.NA)(S.objects,Z.gO.data.isInvertedSelectionMode,I);var W=function(E,S,P){var D=$e(S),F=E.objects,Q=h.v.create(S);if(F){D.items.accessibilityContrastProperties=(0,c.NA)(F,Z.gO.items.accessibilityContrastProperties,!1);var ie="lightLabel",te="foregroundNeutralSecondary";D.items.accessibilityContrastProperties&&0===P&&(te="foreground",ie="largeLightLabel");var o=(0,ve.Zi)((0,c.RK)(F,"items"),{color:"fontColor",family:"fontFamily",size:"textSize"},Q,S,te,ie,{color:D.slicerText.color,family:D.slicerText.fontFamily,size:ce.B.createFromPt(D.slicerText.textSize)},!0);D.slicerText.color=o.color,D.slicerText.fontFamily=o.family,D.slicerText.textSize=o.size.pt,D.items.accessibilityContrastProperties&&1===P&&(D.slicerText.outlineStyle=De.$m.Top|De.$m.Bottom|De.$m.Left|De.$m.Right),D.slicerText.outlineStyle=(0,c.NA)(F,Z.gO.items.outlineStyle,D.slicerText.outlineStyle);var s=Q.getColorForProperty(F,Z.gO.items.background,void 0);s&&(D.slicerText.background=s),D.search.enabled=(0,c.NA)(F,Z.gO.general.selfFilterEnabled,D.search.enabled),D.search.outlineStyle=(0,c.NA)(F,Z.gO.searchBox.outlineStyle,D.search.outlineStyle),D.search.borderColor=Q.getColorForPropertyWithDefaultColor(F,Z.gO.searchBox.borderColor,D.search.borderColor);var x=Q.getColorForProperty(F,Z.gO.searchBox.background,void 0);D.search.background=x||D.slicerText.background||D.search.background,D.expandCollapse.toggleType=(0,c.NA)(F,Z.gO.items.expandCollapseToggleType,D.expandCollapse.toggleType),D.expandCollapse.indentation=(0,c.NA)(F,Z.gO.items.steppedLayoutIndentation,D.expandCollapse.indentation),D.general.outlineWeight=(0,c.NA)(F,Z.gO.general.outlineWeight,D.general.outlineWeight),D.general.outlineColor=Q.getColorForPropertyWithDefaultColor(F,Z.gO.general.outlineColor,D.general.outlineColor),D.selection.selectAllCheckboxEnabled=(0,c.NA)(F,Z.gO.selection.selectAllCheckboxEnabled,D.selection.selectAllCheckboxEnabled),D.selection.singleSelect=(0,c.NA)(F,Z.gO.selection.singleSelect,D.selection.singleSelect),D.selection.strictSingleSelect=(0,c.NA)(F,Z.gO.selection.strictSingleSelect,D.selection.strictSingleSelect),D.slicerText.labelBold=(0,c.NA)(F,Z.gO.items.bold,!1),D.slicerText.labelItalic=(0,c.NA)(F,Z.gO.items.italic,!1),D.slicerText.labelUnderline=(0,c.NA)(F,Z.gO.items.underline,!1),D.items.padding=(0,c.NA)(F,Z.gO.items.padding,void 0)}return D}(S,te,D.slicerType);ie&&(ie.setSelectionModeInverted(I),ie.setDefaultValueMode(H.yl.isDefaultFilter(E.filter)));var re=P.getQueryNamePerLevel(),ae=Q.getFilterExpressionMetadata(),Y=[],we=[],xe=yt(P,P.getDataPointsReader(),Y,we,Q,re,ae,{calculatedIndex:0},void 0,E,D.featureSwitches,D.valueSettings,D.hideRetainedDataPoints);if(we.length>0){var Ee=_.chain(we).sort(ut).map(function(je){return je.dataPoint}).value();Y=Y.concat(Ee)}var oe=ie.toFilterExpressionMetadata(Y);Q.setFilterExpressionMetadata(oe);var Re=function(E){var S=(0,c.NA)(E.objects,Z.gO.general.selfFilter,void 0);if(!S)return"";var P=S.conditions();Ce.fF.assert(function(){return 1===P.length},"There should be exactly 1 filter expression.");var D=P[0];if(D){var F=new ct;return D.accept(F),F.getValueForField()}}(S),B=W.selection,ue=B.strictSingleSelect;if(!ue&&x&&ie.isDisableMultipleSelectForMappedColumn()&&(ue=!0,W.selection.strictSingleSelect=!0),B.selectAllCheckboxEnabled&&!ue&&_.isEmpty(Re)){var Te=F?Q.getLocalizedString("DQP_Disabled_SelectAll"):o;xe.unshift({value:I&&s?s:o,tooltip:Te,identity:m.l0.createWithMeasure(o),selected:!1,isSelectAllDataPoint:!0,partially:Y.length>0,count:void 0,disabled:F,levelIndex:0,levelCount:void 0,index:0,id:"0:0"})}return ie&&ie.setStrictSingleSelect(ue,_.isEmpty(Y)?xe:Y),{categorySourceName:P.getDisplayName(),slicerSettings:W,slicerDataPoints:xe,defaultValueByLevel:E.defaultValueByLevel,searchKey:Re,restatement:ot(Q,Y,I,P.getColumns()),warnings:new he.tb,retainedDataPoints:Y,queryNameByLevel:re,hasGroupOnKeys:P.hasGroupOnKeys()}}(x,S.metadata,Q,E,I);return W.hasImages=_.some(W.slicerDataPoints,function(re){return re.isImage}),W}}}function yt(E,S,P,D,F,Q,ie,te,o,s,x,I,W){for(var re=S.getSelectedNodes(),ae=S.getDataPointsCount(),pe=[],Y=S.getMetadataColumn(),we=!!(x&&x.fieldParameters&&Y.parameter&&2===Y.parameter.kind),xe=(0,d.EO)(Y,Z.gO.general.formatString),Ee=S.getLevel(),oe=0,Re=0;Re<ae;Re++){var B=S.getDataViewDataPoint(Re);if(B){oe++,te.calculatedIndex++;var Te,ue=(0,de.X$)(B.scopeId,re);Te=I?At(B.value,I,Y):(0,d.WU)(B.value,xe);var Oe=S.isImageData()&&(0,U.gU)(Te),je=Te,Ke=!1,Xe=Ee+":"+oe;s?.hasMappedColumn&&null==B.value&&(Ke=!0,je=F.getLocalizedString("DQP_Disabled_Blank"));var ze={value:Te,tooltip:je,identity:null,selected:null!=ue&&ue.checked,partially:ue&&!_.isEmpty(ue.children),count:B.count,isImage:Oe,level:Ee,parent:o,isCollapsed:B.isCollapsed,scopeIdentity:B.scopeId,levelIndex:oe,levelCount:B.levelCount,disabled:Ke,index:te.calculatedIndex,id:o?o.id+","+Xe:Xe,tooltipInfo:B.tooltipInfo,imageUrl:B.imageUrl,label:B.label,objects:B.objects};if(ue&&ue.checked&&(we?D.push({dataPoint:ze,selectionIndex:ue.index}):P.push(ze)),pe.push(ze),o&&o.children.push(ze),it(ze,Q),!B.isCollapsed&&B.childrenReader)ze.children=[],pe.push.apply(pe,yt(E,B.childrenReader,P,D,F,Q,ie,te,ze,void 0,x,void 0,W)||[]);else if(ue&&!_.isEmpty(ue.children)){var rt=Ee+1,dt=E.getMetadataColumnByLevel(rt);tt(rt,s,ue.children,Q,ie&&ie.cachedValueItems,dt,E,S,ze,pe,P,D,!1,te,x)}}}return _.isEmpty(re)||tt(Ee,s,re,Q,ie&&ie.cachedValueItems,Y,E,S,o,pe,P,D,!(W||o&&!1!==o.isCollapsed),te,x),pe}function tt(E,S,P,D,F,Q,ie,te,o,s,x,I,W,re,ae){var pe=ae&&ae.fieldParameters&&Q.parameter&&2===Q.parameter.kind,Y=(0,d.EO)(Q,Z.gO.general.formatString);o&&(o.children=[]);for(var we=0,xe=P;we<xe.length;we++){var Ee=xe[we],oe=!1,Re=void 0,B=void 0;S&&S.isDefaultFilter&&!_.isEmpty(S.defaultValueByLevel)&&S.defaultValueByLevel[E]?Re=G.jz.getTextValue(S.defaultValueByLevel[E].value):(B=Ot(E,Ee,F),_.isEmpty(B)?(Re=(0,V.Xz)(Ee.identity),oe=!0):Re=B[0].valueMap[E]),re.calculatedIndex++;var ue=(0,d.WU)(Re,Y),Te=Ct(Ee.checked,ue,te.hasCount(),te.isImageData(),E,Ee.identity,o,!_.isEmpty(Ee.children),D,re.calculatedIndex);if(Te.isFilterIdentity=oe,W&&s.push(Te),Te.selected&&(pe?I.push({dataPoint:Te,selectionIndex:Ee.index}):x.push(Te)),!_.isEmpty(Ee.children)){var je=E+1,Ke=ie.getMetadataColumnByLevel(je);tt(je,S,Ee.children,D,B,Ke,ie,te,Te,s,x,I,W,re,ae)}}}function Ct(E,S,P,D,F,Q,ie,te,o,s){var x={value:S,tooltip:S,identity:null,selected:E,count:P?0:void 0,isImage:D,level:F,parent:ie,scopeIdentity:Q,partially:te,disabled:!1,index:s};return it(x,o),ie&&ie.children.push(x),x}function Ot(E,S,P){if(!_.isEmpty(P)){for(var D=[],F=0,Q=P;F<Q.length;F++){var ie=Q[F];(0,v.fS)(ie.identities[E],S.identity)&&D.push(ie)}return D}}function it(E,S){for(var P=m.dw.builder(),D=E;D;)P.withColumnIdentity(D.scopeIdentity,S[E.level]),D=D.parent;E.identity=P.createSelectionId()}function ot(E,S,P,D){if(_.isEmpty(S))return E.getLocalizedString("All");if(1===S.length&&!P){var F=S[0];if(null==F.parent)return F.value;for(var Q=[],ie=E.getLocalizedString("MultiColumn_Join_Separator"),te=E.getLocalizedString("NamePattern_Bracket");F;)Q.unshift((0,b.W)(te,F.value,D[F.level].displayName)),F=F.parent;return Q.join(ie)}return E.getLocalizedString("Slicer_Restatement_Multiple")}function ut(E,S){Ce.fF.assert(function(){return null!=E.dataPoint.level&&null!=S.dataPoint.level},"level should not be nullish"),Ce.fF.assert(function(){return null!=E.selectionIndex&&null!=S.selectionIndex},"selectionIndex should not be nullish");var P=E.dataPoint.level-S.dataPoint.level;return 0!==P?P:(Ce.fF.assert(function(){return E.selectionIndex!==S.selectionIndex}),E.selectionIndex-S.selectionIndex)}var ct=function(E){function S(){return null!==E&&E.apply(this,arguments)||this}return(0,X.__extends)(S,E),S.prototype.visitConstant=function(P){P.type&&P.type.text&&(this.value=P.value)},S.prototype.visitContains=function(P){P.left.accept(this),P.right.accept(this)},S.prototype.visitOr=function(P){P.left.accept(this),P.right.accept(this)},S.prototype.visitColumnRef=function(P){this.fieldExpr=P},S.prototype.visitHierarchyLevel=function(P){this.fieldExpr=P},S.prototype.visitDefault=function(P){this.value=void 0,this.fieldExpr=void 0},S.prototype.getValueForField=function(){return this.fieldExpr&&this.value},S}(ee.vq);function At(E,S,P){if(null==E&&!_.isEmpty(S.showBlankAs))return S.showBlankAs;var D=S.labelDisplayUnits,F=-1===D,Q=void 0;F&&!_.isEmpty(S.customFormatString)&&(Q=S.customFormatString);var te={};return null!=Q&&(te={general:{formatString:Q}}),new d.g({column:P,formatStringPropId:Z.gO.general.formatString,nullsAreBlank:!0,precision:F?void 0:S.labelPrecision,formatSingleValues:0===D,defaultPrecisionForScaledValues:!0,trailingZeroes:!0}).format(E,te)}},36408:function(nt,We,y){"use strict";y.r(We),y.d(We,{ContainerClass:function(){return ji},ContentWrapperClass:function(){return Ui},Slicer:function(){return gr}});var X=y(81337),Z=y(11034),h=y(9434),ve=y(4308),ce=y(10034),De=y(51129),w=y(20598),he=y(3212),Ce=y(45296),J=y(38308),U=y(62458),b=y(56578),c=y(60810),v=y(46135),d=y(82755),m=y(90031),V=y(17591),H=y(5342),G=y(45875),ee=y(59694),be=y(78107),de=y(24653),se=y(28326),T=y(79154),ke=((0,T.CH)("date-slicer-datepicker"),(0,T.CH)("date-slicer-datepicker-wrapper"),(0,T.CH)("date-slicer-input")),Qe="drag-resize-disabled",st=[w.e4,w.bb,w.vX],z=y(68447),Tt=function(){function a(e){e&&(this.preventVirtualKeyboardOnTheFirstTap=e.preventVirtualKeyboardOnTheFirstTap,this.featureSwitches=e.featureSwitches),this.culture=se.dx.getCurrentCulture(),this.inputElements=[],this.eventsHelper=new z.PB;var t=this.hostServices=e.hostServices;this.startInputLabel=t.getLocalizedString("Slicer_StartLabel"),this.endInputLabel=t.getLocalizedString("Slicer_EndLabel")}return a.prototype.createRange=function(e){return new H.C0(e.bounds.min,e.bounds.max,e.value.min,e.value.max)},a.prototype.getSliderOptions=function(e,t){return{min:0,max:(0,V.I)(e.bounds.max,e.bounds.min),step:1}},a.prototype.areEqual=function(e,t){return(0,V.X)(e,t)},a.prototype.defaultValue=function(){return new Date(0)},a.prototype.startProperty=function(){return h.gO.data.startDate},a.prototype.endProperty=function(){return h.gO.data.endDate},a.prototype.formatValue=function(e,t){return se.dx.formatValue(e,"d")},a.prototype.parseSingleSliderValue=function(e,t){return null},a.prototype.inputStyleProperties=function(){return{background:h.gO.date.background,fontColor:h.gO.date.fontColor,textSize:h.gO.date.textSize,fontFamily:h.gO.date.fontFamily,bold:h.gO.date.bold,italic:h.gO.date.italic,underline:h.gO.date.underline}},a.prototype.parseInput=function(e,t,i){return se.dx.parseDate(e)},a.prototype.isInputValid=function(e,t,i,n){return!(null==e||0===i&&e>t.max||1===i&&e<t.min)},a.prototype.setRange=function(e,t,i,n,r,l){null==r?(this.featureSwitches.useModernDatePickerSlicer||(i.val(se.dx.formatValue(e.min,"d")),n.val(se.dx.formatValue(e.max,"d"))),i.attr("aria-label",(0,ee.W)(this.startInputLabel,se.dx.formatValue(l.min,"d"),se.dx.formatValue(e.max,"d"))),n.attr("aria-label",(0,ee.W)(this.endInputLabel,se.dx.formatValue(e.min,"d"),se.dx.formatValue(l.max,"d")))):0===r?(this.featureSwitches.useModernDatePickerSlicer||i.val(se.dx.formatValue(e.min,"d")),i.attr("aria-label",(0,ee.W)(this.startInputLabel,se.dx.formatValue(l.min,"d"),se.dx.formatValue(l.max,"d")))):1===r&&(this.featureSwitches.useModernDatePickerSlicer||n.val(se.dx.formatValue(e.max,"d")),n.attr("aria-label",(0,ee.W)(this.endInputLabel,se.dx.formatValue(l.min,"d"),se.dx.formatValue(l.max,"d"))))},a.prototype.enumerateObjectInstances=function(e,t,i){var n;if("date"===e.objectName&&t&&t.inputStyle){var r=h.gO.date;return[{selector:null,objectName:"date",properties:(n={fontColor:t.inputStyle.fontColor,background:t.inputStyle.background,textSize:t.inputStyle.textSize,fontFamily:t.inputStyle.fontFamily},n[r.bold.propertyName]=t.inputStyle.labelBold,n[r.italic.propertyName]=t.inputStyle.labelItalic,n[r.underline.propertyName]=t.inputStyle.labelUnderline,n)}]}},a.prototype.getValuesCard=function(e,t){var i=this,n=h.gO.date,r=new b.CQ(new b.lg("values"),"Role_DisplayName_Values",[n.fontFamily,n.textSize,n.fontColor,n.background,n.bold,n.italic,n.underline],function(C){return i.hostServices.getLocalizedString(C)}),f=(new b.UN).withFontFamily({descriptor:n.fontFamily,value:e.inputStyle.fontFamily}).withFontSizeProperties({descriptor:n.textSize,value:e.inputStyle.textSize}).withBold({descriptor:n.bold,value:e.inputStyle.labelBold}).withItalic({descriptor:n.italic,value:e.inputStyle.labelItalic}).withUnderline({descriptor:n.underline,value:e.inputStyle.labelUnderline}).build();return r.addGroup("values",function(C){C.withDisplayName("Role_DisplayName_Values"),C.addCompositeSlice("fontselector","Font",f),C.addSimpleSlice("color",new b.BT({descriptor:n.fontColor,value:{value:e.inputStyle.fontColor}}).build())}).addGroup("background",function(C){C.withDisplayName("Visual_Background").addSimpleSlice("color",new b.BT({descriptor:n.background,value:{value:e.inputStyle.background}}).build())}),r.build()},a.prototype.getDataPointsForSingleValueRange=function(e){return[]},a.prototype.createInputElement=function(e,t){var i=this,n=this.culture.calendar.patterns.d,r=(0,J.ze)().attr("type","text").attr(Qe,"true").prop("readonly",!!this.preventVirtualKeyboardOnTheFirstTap).attr("placeholder",n).addClass(ke.class).appendTo(e);e.attr("tabindex","0"),e.keydown(function(f){(13===f.keyCode||32===f.keyCode)&&r.focus()}),r.datepicker({showOtherMonths:!0,selectOtherMonths:!0,changeMonth:!0,changeYear:!0,nextText:"",prevText:"",firstDay:this.culture.calendar.firstDay,dayNamesMin:this.culture.calendar.days.namesAbbr,dateFormat:this.culture.calendar.patterns.d.replace("yyyy","yy").toLowerCase(),monthNamesShort:this.culture.calendar.months.names,onClose:function(){r.prop("readonly",!!i.preventVirtualKeyboardOnTheFirstTap)}}),r.on("click",function(f){i.preventVirtualKeyboardOnTheFirstTap&&r.is("[readonly]")&&(r.prop("readonly",!1),r.blur()),r.datepicker("show")}),this.preventVirtualKeyboardOnTheFirstTap&&r.on("touchstart",function(f){!r.is("[readonly]")&&!r.is(":focus")&&r.focus()});var l=r.datepicker("widget");return l.attr("prevent-focus-loss","false"),r.attr("prevent-focus-loss","false"),r.datepicker("option","beforeShow",function(){l.addClass("themeableElement"),i.unregisterPopupHideEvents=i.eventsHelper.onPopupHideEvent(function(f,C){i.onPopupHideEvent(f,C)},e.get(0)),i.fixLayout(l,r,1e3)}),this.inputElements.push(r),r},a.prototype.onPopupHideEvent=function(e,t){if("resize"!==e){var i=$(t);!i.hasClass("hasDatepicker")&&!i.hasClass("ui-datepicker")&&!i.hasClass("ui-icon")&&!$(i).closest(".ui-datepicker").length&&this.hideDatepicker()}else this.hideDatepicker()},a.prototype.hideDatepicker=function(){this.unbindPopupHideEventHandlers();for(var e=0,t=this.inputElements;e<t.length;e++){var i=t[e];i.datepicker("widget").is(":visible")&&i.datepicker("hide").blur()}},a.prototype.onDestroy=function(){this.hideDatepicker()},a.prototype.unbindPopupHideEventHandlers=function(){this.unregisterPopupHideEvents&&this.unregisterPopupHideEvents()},a.prototype.fixLayout=function(e,t,i){var n=this;setTimeout(function(){e.is(":visible")?(G.Ck.fixWidgetPosition(e,t,null,!0),e.find(".ui-datepicker-current-day").addClass("backgroundToForegroundColor")):i>0&&n.fixLayout(e,t,i-20)},20)},a.prototype.filterExpr=function(e){var t=(0,be.VM)(e);return{lower:(0,de.CQ)(t.min),upper:(0,de.CQ)(t.max)}},a.prototype.comparisonKind=function(){return{lower:2,upper:3}},a.prototype.addAriaDescription=function(e){var t=this.culture.calendar.patterns.d,i=se.dx.format(this.hostServices.getLocalizedString("DateSlicer_InputTextHint"),[t]);e.attr("aria-description",i)},a}(),Ft=y(6450),Ae=y(65302),ge=y(90120),qe=y(18664),et=y(32105),mt=y(44783),$e=y(38265),St=y(59107),Me=y(64329),Ge=y(38078),tt="aria-expanded",Ct="focused",Ot=function(){function a(e,t){var i=this;this.DefaultRestatementColorName="foregroundDark",this.verticalSlicerRenderer=e,this.isDeferred=!0,this.popup=$("<div ></div>").addClass("slicer-dropdown-popup"),St.M.isIOSWebView()&&this.popup.addClass(z.M7.class),this.popup.on("slicer.dataPointSelected",function(n){i.strictSingleSelect&&(i.hidePopup(),n.stopPropagation())}),this.content=$("<div ></div>").addClass("slicer-dropdown-content"),this.loader=$("<div ></div>").addClass("slicer-dropdown-loader"),this.hostServices=t.hostServices,this.controlId="slicer-dropdown-popup-".concat(Ge.b$.generateGuid()),this.popup.addClass("visual").addClass("themeableElement").attr("focus-nav-mode","Group").attr("id",this.controlId).keydown(function(n){27!==n.keyCode||i.popup.is(":hidden")?9===n.keyCode&&!i.popup.is(":hidden")&&(i.hidePopup(),Ae.IK.focus(Ft.m.getFocusNextElement(!0,i.menu.get(0))),n.preventDefault(),n.stopPropagation()):(i.hidePopup(),i.menu.focus(),n.preventDefault(),n.stopPropagation())}),$("body").append(this.popup),this.popup.append(this.content),this.popup.append(this.loader),this.featureSwitches=t.featureSwitches,this.eventsHelper=new z.PB}return a.prototype.onClear=function(e){this.verticalSlicerRenderer.onClear(e)},a.prototype.onModeChange=function(e){this.popup.remove(),this.verticalSlicerRenderer.onModeChange(e)},a.prototype.onDataViewObjectChanged=function(e,t){var i=(0,z.tm)(e,t);return U.fF.assertNonEmpty(i,"There should be at least one save object"),i},a.prototype.hasSlider=function(){return!1},a.prototype.supportsOrientation=function(){return!1},a.prototype.enumerateObjectInstances=function(e){return this.verticalSlicerRenderer.enumerateObjectInstances(e,this.featureSwitches)},a.prototype.getValuesCard=function(){return this.verticalSlicerRenderer.getValuesCard(this.featureSwitches)},a.prototype.getSlicerSettingsCardOptions=function(e,t,i,n){return this.verticalSlicerRenderer.getSlicerSettingsCardOptions(e,t,i,n)},a.prototype.getAdditionalCards=function(){return this.verticalSlicerRenderer.getAdditionalCards()},a.prototype.init=function(e,t){return this.container=t,this.style=e.visualInitOptions.style,this.slicerSelectionHandler=this.verticalSlicerRenderer.init(e,this.content),this.slicerSelectionHandler},a.prototype.onDestroy=function(){this.verticalSlicerRenderer&&this.verticalSlicerRenderer.onDestroy(),this.unbindPopupHideEventHandlers(),this.popup.remove()},a.prototype.render=function(e){this.options=e,this.data=this.verticalSlicerRenderer.converter(this.options.dataView,this.options.isSlicer),this.slicerSelectionHandler.setSelected(this.data.retainedDataPoints);var t=!this.loadDataForGroupOnKeysIfNeeded();this.renderMenu(this.data.restatement,t),this.isExpanded?this.showPopup(this.setFocus,!0):this.hidePopup()},a.prototype.loadDataForGroupOnKeysIfNeeded=function(){if(!this.isExpanded&&this.data.hasGroupOnKeys){if(this.isDeferred&&!_.isEmpty(this.data.retainedDataPoints)&&_.some(this.data.retainedDataPoints,function(e){return e.isFilterIdentity}))return this.setShouldDeferData(!1),!0;this.setShouldDeferData(!0)}return!1},a.prototype.setShouldDeferData=function(e){this.isDeferred=e,this.hostServices.setShouldDeferData(e)},a.prototype.renderMenu=function(e,t){var i,n=this;if(this.menu||(this.menu=(0,J.hi)(),this.menu.addClass("slicer-dropdown-menu"),this.menu.attr(((i={role:"combobox","aria-haspopup":"listbox",tabindex:"0","aria-controls":this.controlId})[tt]="false",i[Qe]="true",i)),this.container.append(this.menu),this.menu.on("click touchstart keydown",function(C){n.focusEventType=C.type,C.preventDefault(),("click"===C.type||"touchstart"===C.type||40===C.keyCode&&!C.ctrlKey||38===C.keyCode&&!C.ctrlKey||32===C.keyCode||13===C.keyCode)&&n.onRenderMenuClick(C,!0)}),this.restatement=(0,J.hi)(),this.restatement.addClass("slicer-restatement"),this.menu.append(this.restatement),this.icon=$("<i ></i>").addClass("dropdown-chevron"),this.icon.appendTo(this.menu)),this.menu.attr({"aria-label":this.options.restatement}),this.icon.addClass("powervisuals-glyph"),this.icon.addClass("chevron-down"),this.settings=this.defaultRestatementSetting(),this.options.dataView.metadata&&this.options.dataView.metadata.objects){var r=this.options.dataView.metadata.objects,l=ge.v.create(this.style),f=(0,qe.Zi)((0,d.RK)(r,"items"),{color:"fontColor",family:"fontFamily",size:"textSize"},l,this.style,"foregroundNeutralSecondary","lightLabel",{color:this.settings.fontColor,family:this.settings.fontFamily,size:et.B.createFromPt(this.settings.textSize)});this.settings.fontColor=f.color,this.settings.fontFamily=f.family,this.settings.textSize=f.size.pt,this.settings.background=l.getColorForPropertyWithDefaultColor(r,h.gO.items.background,this.settings.background),this.strictSingleSelect=(0,d.NA)(r,h.gO.selection.strictSingleSelect,this.strictSingleSelect)}t&&this.restatement.text(e),this.menu.css({"background-color":this.settings.background||"",color:this.settings.fontColor,"font-size":Me.FP.fromPointToPixel(this.settings.textSize),"font-family":this.settings.fontFamily}),this.popup.css({"background-color":this.settings.background||""})},a.prototype.onRenderMenuClick=function(e,t){if(e.stopPropagation(),this.popup.is(":hidden"))return this.isExpanded=!0,this.setFocus=t,this.setShouldDeferData(!1),this.loader.css({"background-color":this.settings.background||""}),this.loader.show(),this.popup.addClass(Ct),void this.showPopup(!1,!1);this.popup.removeClass(Ct),this.hidePopup()},a.prototype.showPopup=function(e,t){var i=this;window.requestAnimationFrame(function(){if(i.popup){i.unbindPopupHideEventHandlers();var n=i.menu.width()+10;i.popup.css({width:n}),i.menu.attr(tt,"true"),i.icon.removeClass("chevron-down"),i.icon.addClass("chevron-up"),G.Ck.fixWidgetPosition(i.popup,i.menu,null,!0),t&&i.verticalSlicerRenderer.renderVerticalSlicer(i.data,i.options,function(){i.loader.hide(),i.focusCallbackTimeout&&window.clearTimeout(i.focusCallbackTimeout),i.focusCallbackTimeout=window.setTimeout(function(){e&&Ae.IK.focusChildInGroup(i.popup.get(0),"keydown"===i.focusEventType),i.focusCallbackTimeout=void 0,i.setFocus=!1,i.focusEventType=void 0},0)}),i.unregisterPopupHideEvents=i.eventsHelper.onPopupHideEvent(function(l,f){i.onPopupHideEvent(l,f)},i.menu.get(0),i.popup.get(0),!0),i.popup.show()}})},a.prototype.hidePopup=function(){this.popup&&(this.isResize=!1,this.isExpanded=!1,this.popup.hide(),this.setShouldDeferData(!0),this.menu.attr(tt,"false"),this.icon.removeClass("chevron-up"),this.icon.addClass("chevron-down"),this.unbindPopupHideEventHandlers())},a.prototype.onPopupHideEvent=function(e,t){if("resize"!==e){"focusin"===e&&(this.isResize=!1);var i=$(t);if(!(i.parents(".slicer-dropdown-popup").length||i.is(this.menu)||this.menu.find(i).length)){if("scroll"===e)return void G.Ck.fixWidgetPosition(this.popup,this.menu,null,!0);this.isResize||this.hidePopup()}}else this.isResize=!0},a.prototype.unbindPopupHideEventHandlers=function(){this.unregisterPopupHideEvents&&(this.unregisterPopupHideEvents(),this.unregisterPopupHideEvents=void 0)},a.prototype.defaultRestatementSetting=function(){return{textSize:10,fontFamily:$e.Wn.regular.css,fontColor:ge.v.getThemeColor(this.style,this.DefaultRestatementColorName),background:this.style.isHighContrast?ge.v.getThemeColor(this.style,mt.U):void 0}},a}(),it=y(32041),ot=y(66001),Nt=(0,T.CH)("horizontalSlicerContainer"),lt=(0,T.CH)("slicerItemsContainer"),bt=(0,T.CH)("navigationArrow"),ut=(0,T.CH)("left"),ct=(0,T.CH)("right"),At=(0,T.CH)("isMultiSelectEnabled"),E=(0,T.CH)("flexDisplay"),S=(0,T.CH)("canScrollRight"),P=(0,T.CH)("canScrollLeft"),D=(0,T.CH)("individualItemContainer"),F=(0,T.CH)("horizontalImageContainer"),Q=(0,T.CH)("horizontalSlicerImage"),ie=(0,T.CH)("slicerCheckbox"),te=y(87592),o=y(62224),s=y(83611),x=y(82085),Y_label_marginRight=2,Y_label_paddingLeft=8,Y_label_paddingRight=8,Ee=function(){function a(e,t){this.viewModelAdapter=t,this.textProperties={fontFamily:$e.Wn.regular.css,fontSize:"14px"},e&&(this.horizontalSlicerLayout=e.horizontalSlicerLayout,this.featureSwitches=e.featureSwitches),this.behavior=new o.wV,this.horizontalSlicerLayout||(this.horizontalSlicerLayout=new oe),this.domHelper=new z.gy,this.dataStartIndex=0,this.searchComponent=new x.v(e?.hostServices)}return a.prototype.hasSlider=function(){return!1},a.prototype.getDefaultValue=function(){if(this.data&&!_.isEmpty(this.data.defaultValueByLevel))return this.data.defaultValueByLevel[0].value},a.prototype.getIdentityFields=function(){return(0,z.nQ)(this.dataView)},a.prototype.supportsOrientation=function(){return!0},a.prototype.getSlicerSettings=function(e){var t=e&&e.slicerSettings;return t||(t=(0,te.VT)(this.style)),t},a.prototype.enumerateObjectInstances=function(e){var t=this.originalData,i=this.getSlicerSettings(t);return(0,z.qo)(e,t,i,this.dataView,this.featureSwitches)},a.prototype.getValuesCard=function(){var e=this.originalData,t=this.getSlicerSettings(e);return(0,z.s9)(this.hostServices,e,t,this.featureSwitches)},a.prototype.getSlicerSettingsCardOptions=function(e,t,i,n){var r=this.originalData,l=r?r.slicerSettings:void 0;return l||(l=(0,te.VT)(this.style)),(0,z.nD)({cardUidBuilder:e,currentSlicerSettings:l,data:r,dataView:this.dataView,hostServices:this.hostServices,orientation:t,activeMode:i,slicerModes:n,featureSwitches:this.featureSwitches})},a.prototype.getAdditionalCards=function(){var e=this.originalData,t=e?e.slicerSettings:void 0;return t||(t=(0,te.VT)(this.style)),(0,z.oE)(this.hostServices,e,t,this.dataView)},a.prototype.onModeChange=function(e){(0,z.VD)(this.hostServices,e)},a.prototype.onDataViewObjectChanged=function(e,t){var i=(0,z.tm)(e,t);return U.fF.assertNonEmpty(i,"There should be at least one save object"),i},a.prototype.getRestatement=function(){return this.data&&this.data.restatement},a.prototype.onClear=function(e){(0,z.K5)(this.selectionHandler,e)},a.prototype.init=function(e,t){var i=this;this.element=t,this.currentViewport=e.visualInitOptions.viewport;var n=this.hostServices=e.visualInitOptions.host;this.style=e.visualInitOptions.style,this.behavior&&(this.selectionHandler=new s.N(n,this.behavior)),this.loadMoreData=function(){return e.loadMoreData()};var r=document.createElement("div");r.className=Nt.class;var l=this.container=d3.select(r);this.searchComponent.create(l);var f=this.body=l.append("div").classed(z.uT.class+" "+E.class,!0),C={color:ge.v.getThemeColor(this.style,"foregroundNeutralSecondary")},M={color:ge.v.getThemeColor(this.style,"foreground")};this.leftNavigationArrow=f.append("button").call(this.horizontalSlicerLayout.getNavigationArrowsClass,!0).attr("aria-label",this.hostServices.getLocalizedString("Previous_ButtonText")).attr("tabindex",-1).styles(C).on("pointerover",function(){return i.leftNavigationArrow.styles(M)}).on("pointerleave",function(){return i.leftNavigationArrow.styles(C)});var N=this.data&&this.data.slicerSettings.selection.strictSingleSelect;this.itemsContainer=f.append("div").classed(lt.class+" "+E.class,!0).attr("tabindex","0").attr("role","listbox").attr("aria-multiselectable",!N);var k=this.itemsContainer.node();return $(k).on("keydown",function(K){var j=K.keyCode,q=39===j||40===j;!q&&37!==j&&38!==j||(i.focusNextElement(q),K.stopPropagation())}),this.rightNavigationArrow=f.append("button").call(this.horizontalSlicerLayout.getNavigationArrowsClass,!1).attr("aria-label",this.hostServices.getLocalizedString("Next_ButtonText")).attr("tabindex",-1).styles(C).on("pointerover",function(){return i.rightNavigationArrow.styles(M)}).on("pointerleave",function(){return i.rightNavigationArrow.styles(C)}),this.element.get(0).appendChild(r),this.bindNavigationEvents(),this.selectionHandler},a.prototype.render=function(e){this.hasSearchableData=e.hasSearchableData;var t=this.hostServices.getLocalizedString(z.vx),i=e.dataView;if(this.originalData=this.data=(0,te.OQ)({dataView:i,localizedSelectAllText:t,selectionHandler:this.selectionHandler,hostServices:this.hostServices,style:this.style,isSlicer:e.isSlicer,featureSwitches:this.featureSwitches,slicerType:1}),this.viewModelAdapter&&(this.data=this.viewModelAdapter.applyChanges(e.viewport,this.originalData,i)),this.updateItemsContainerLabel(),this.updateStyle(this.hasSearchableData),!i||!this.data||_.isEmpty(this.data.slicerDataPoints))return this.itemsContainer.selectAll("*").remove(),void(this.itemsToDisplay=0);this.dataView=i,(!(this.currentViewport&&e.viewport&&(this.currentViewport.height!==e.viewport.height||this.currentViewport.width!==e.viewport.width))||this.isMaxDimensionsNeedsReCalculate())&&this.calculateAndSetMaxItemDimensions(),this.currentViewport=e.viewport,this.itemsToDisplay=this.horizontalSlicerLayout.calculateNumberOfItemsToDisplay(this.element,this.totalItemWidth,this.totalItemHeight,this.getDataPointsCount()),0!==this.itemsToDisplay&&this.renderCore()},a.prototype.renderCore=function(){this.horizontalSlicerLayout.renderCore&&this.horizontalSlicerLayout.renderCore(this.container);var e=this.data;if(e&&e.slicerDataPoints){this.normalizePosition();var t=this.getDataPointsCount(),i=this.itemsToDisplay,n=this.dataStartIndex,r=n+this.itemsToDisplay<=t-1,l=n>0,f=this.container.classed(S.class)&&!r&&document.activeElement===this.rightNavigationArrow.node(),C=this.container.classed(P.class)&&!l&&document.activeElement===this.leftNavigationArrow.node();(f||C)&&this.itemsContainer.node().focus(),this.container.classed(S.class,r),this.container.classed(P.class,l),this.renderItems(e.slicerSettings),this.bindInteractivityService(),n+i>=.8*t&&this.loadMoreData()}},a.prototype.updateStyle=function(e){var t=this.data,i=t&&t.slicerSettings,n=e&&i.search.enabled,r=x.v.fromSlicerSettings(i,t?.searchKey,n,!1,this.featureSwitches);this.searchComponent.update(r),i&&this.container.classed(At.class,!i.selection.singleSelect)},a.prototype.renderItems=function(e){var t=this,i=this.itemsToDisplay;U.fF.assert(function(){return i>0},"items to display should be greater than zero");var n=this.dataStartIndex,r=this.data.slicerDataPoints.slice(n,n+i),l=this.horizontalSlicerLayout.bindData(r,this.data,this.itemsContainer),f=l.enter().append("div").classed(D.class,!0).classed("containerBackground",!e.items.accessibilityContrastProperties).classed("containerBackgroundContrast",e.items.accessibilityContrastProperties).attr("role","option").attr("tabindex",0).each(function(N){var k=d3.select(this);if(N.isImage){var K=k.append("div").classed(F.class,!0);K.append("div").classed(ie.class,!0).append("input").attr("type","checkbox"),K.append("img").classed(Q.class,!0)}else k.append("div").classed(z.NV.class,!0).classed(E.class,!0)}).merge(l),C=this;f.each(function(N){var k=d3.select(this);(0,z.hx)(k,N),k.attr("aria-label",(0,z.rX)(C.hostServices,N.tooltip)).attr("aria-setsize",-1).attr("aria-posinset",N.levelIndex?N.levelIndex:1)}),f.attr("aria-selected",function(N){return!0===N.selected}),f.order(),f.select(z.NV.selector).styles({"padding-left":Me.FP.toString(Y_label_paddingLeft),"padding-right":Me.FP.toString(Y_label_paddingRight)}),f.styles({"margin-right":function(k,K){return t.horizontalSlicerLayout.getDataPointRightMargin(K,t.itemsToDisplay)}}),this.domHelper.setSlicerTextStyle(f,e,this.featureSwitches),l.exit().remove(),this.animationFrameId&&window.cancelAnimationFrame(this.animationFrameId),this.animationFrameId=window.requestAnimationFrame(function(){f.select("img").attr("title",function(q){return(0,z.rX)(t.hostServices,q.tooltip)}).attr("src",function(q){return q.value}),f.select(z.NV.selector).attr("title",function(q){return(0,z.rX)(t.hostServices,q.tooltip)}).text(function(q){return q.value});var N=t.element.find(z.NV.selector),k=N.first(),K=k.height(),j=k.width();N.each(function(q,ne){it.b.wordBreakOverflowingText(ne,j,K)})})},a.prototype.bindInteractivityService=function(){if(this.selectionHandler&&this.body){var i=this.body.selectAll(D.selector),n=this.data,r=this.searchComponent.input;if(!r.empty()){var l=r.node();(_.isEmpty(l.value)||_.isEmpty(n.searchKey))&&r.property("value",n.searchKey)}this.selectionHandler.bind(n.retainedDataPoints,{behaviorOptions:{slicerContainer:this.container,itemsContainer:i,settings:n.slicerSettings,searchInput:r,style:this.style},orientation:he.i.Horizontal})}this.behavior.renderSelection()},a.prototype.normalizePosition=function(){var e=this.getDataPointsCount(),t=this.horizontalSlicerLayout.getLastStartIndex(this.itemsToDisplay,e);this.dataStartIndex=Ge.b$.clampValue(this.dataStartIndex,0,t)},a.prototype.bindNavigationEvents=function(){this.registerMouseWheelScrollEvents(),this.registerMouseClickEvents()},a.prototype.registerMouseClickEvents=function(){var e=this,t=this.container.selectAll(ct.selector),i=this.container.selectAll(ut.selector);t.on("click",function(){e.scrollRight()}),i.on("click",function(){e.scrollLeft()})},a.prototype.registerMouseWheelScrollEvents=function(){var e=this,t=this.body.node();t.addEventListener("mousewheel",function(i){e.onMouseWheel(i.wheelDelta)}),t.addEventListener("DOMMouseScroll",function(i){e.onMouseWheel(i.detail)})},a.prototype.onMouseWheel=function(e){e<0?this.scrollRight():e>0&&this.scrollLeft()},a.prototype.scrollRight=function(){var e=this.horizontalSlicerLayout.getLastStartIndex(this.itemsToDisplay,this.getDataPointsCount());this.dataStartIndex!==e&&(this.dataStartIndex+=this.horizontalSlicerLayout.getScrollSize(this.itemsToDisplay),this.dataStartIndex=Math.min(this.dataStartIndex,e),this.renderCore())},a.prototype.scrollLeft=function(){0!==this.dataStartIndex&&(this.dataStartIndex-=this.horizontalSlicerLayout.getScrollSize(this.itemsToDisplay),this.dataStartIndex=Math.max(this.dataStartIndex,0),this.renderCore())},a.prototype.getScaledTextWidth=function(e){return e/Me.Gj*80},a.prototype.isMaxDimensionsNeedsReCalculate=function(){if(!this.lastCalculatedProperties)return!0;var e=this.data.slicerSettings,i=e.slicerText,f=this.lastCalculatedProperties;return f.textSize!==i.textSize||f.fontFamily!==i.fontFamily||f.outlineStyle!==i.outlineStyle||f.outlineWeight!==e.general.outlineWeight||f.hasImage!==this.data.hasImages},a.prototype.calculateAndSetMaxItemDimensions=function(){var C,M,e=this.data,t=this.data.slicerSettings,i=this.getDataPointsCount(),n=0,r=0,l=t.slicerText.outlineStyle,f=t.general.outlineWeight;if(0===i)n=0,r=0;else if(e.hasImages)n=100,r=100;else{var N=e.slicerDataPoints,k=Math.min(i,50),K=jQuery.extend(!0,{},this.textProperties);M=t.slicerText.fontFamily,K.fontSize=Me.FP.fromPoint(C=t.slicerText.textSize),K.fontFamily=M,K.text="Sample";for(var j=ot.bY,q=it.b.measureSvgTextHeight(K),ne=0;ne<k;ne++){var Ve=N[ne].value;K.text=Ve,n=Math.max(n,j(Ve,it.b.measureSvgTextWidth,K));var Le=Math.min(2,(0,ot.iD)(Ve));r=Math.max(r,q*Le)}n=Math.min(n,this.getScaledTextWidth(C))}var Ue=Y_label_paddingLeft+Y_label_paddingRight+Y_label_marginRight,Vt=this.domHelper.getRowsOutlineWidth(l,f);this.totalItemWidth=n+Ue+Vt,this.totalItemHeight=r+Ue+Vt;var Wi=this.horizontalSlicerLayout.calculateTotalItemDimensions(this.totalItemWidth,this.totalItemHeight);this.totalItemWidth=Wi.width,this.totalItemHeight=Wi.height,this.lastCalculatedProperties={outlineStyle:l,outlineWeight:f,textSize:C,fontFamily:M,hasImage:e.hasImages}},a.prototype.focusNextElement=function(e){var t=this.horizontalSlicerLayout.findNextElement(document.activeElement,e);if(!t){e?this.scrollRight():this.scrollLeft();var i=this.itemsContainer.node(),n=document.activeElement;i.contains(n)||(n=i),t=this.horizontalSlicerLayout.findNextElement(n,e)}t&&t.focus()},a.prototype.updateItemsContainerLabel=function(){var e;null!==(e=this.data)&&void 0!==e&&e.categorySourceName&&this.itemsContainer.attr("aria-label",this.data.categorySourceName),this.itemsContainer.attr("aria-multiselectable",!(this.data&&this.data.slicerSettings.selection.strictSingleSelect))},a.prototype.getDataPointsCount=function(){return _.size(this.data.slicerDataPoints)},a.prototype.addWarnings=function(e){(0,z.td)(this.data.warnings,e)},a}(),oe=function(){function a(){}return a.prototype.bindData=function(e,t,i){return i.selectAll(D.selector).data(e,function(r){return(0,z.fz)(r)})},a.prototype.calculateTotalItemDimensions=function(e,t){return{width:e,height:t}},a.prototype.calculateNumberOfItemsToDisplay=function(e,t,i,n){var l=e.find(z.uT.selector).width()-2*a.NavigationArrowWidth;if(0===t)return 0;var f=Math.round(l/t);return Ge.b$.clampValue(f,1,n)},a.prototype.findNextElement=function(e,t){return $(e).hasClass(lt.class)?t?e.firstElementChild:void 0:t?e.nextElementSibling:e.previousElementSibling},a.prototype.getNavigationArrowsClass=function(e,t){t?e.classed(bt.class,!0).classed(ut.class,!0):e.classed(bt.class,!0).classed(ct.class,!0)},a.prototype.getScrollSize=function(e){return 1===e?e:e-1},a.prototype.getLastStartIndex=function(e,t){return t-e},a.prototype.getDataPointRightMargin=function(e,t){return this.isLastRowItem(e,t)?"0px":Me.FP.toString(Y_label_marginRight)},a.prototype.isLastRowItem=function(e,t){return e===t-1},a.NavigationArrowWidth=19,a}(),Re=y(68983),B=y(73508),ue=y(66486),Te=y(38703),Oe=y(95462),je=function(){function a(){}return a.prototype.getVisualObjectInstance=function(e){return{selector:null,objectName:"dateRange",properties:{includeToday:e.includeToday,anchorDate:e.anchorDate}}},a.prototype.appendVisualSlices=function(e,t){null!=t.includeToday&&e.addSimpleSlice("includeToday",new b.bd({descriptor:h.gO.dateRange.includeToday,value:t.includeToday}).build()),e.addSimpleSlice("anchorDate",new b.hz({descriptor:h.gO.dateRange.anchorDate,value:t.anchorDate,placeholder:""}).build())},a.prototype.getMode=function(){return w.K8},a.prototype.getRelativePropertyId=function(){return h.gO.data.relativePeriod},a.prototype.getListOfOptions=function(){return B.GA.members()},a.prototype.getSelectedPeriodOption=function(e){return U.fF.assert(function(){return!(0,ee.g)(e.period)},"The period should be defined"),B.GA.members([e.period])[0]},a.prototype.getPeriods=function(e){var t=e.range!==ue.Vk?B.GA.members():B.J6.members();if(e.range===ue.Vk)switch(e.period){case B.qQ:e.period=B.P4;break;case B.ks:e.period=B.e7;break;case B.$G:e.period=B.gQ}return t},a}(),Ke=function(){function a(){}return a.prototype.getVisualObjectInstance=function(e){},a.prototype.appendVisualSlices=function(e,t){},a.prototype.getMode=function(){return w.GV},a.prototype.getRelativePropertyId=function(){return h.gO.data.relativeTimePeriod},a.prototype.getListOfOptions=function(){return B._k.members()},a.prototype.getSelectedPeriodOption=function(e){return U.fF.assert(function(){return!(0,ee.g)(e.period)},"The period should be defined"),B._k.members([e.period])[0]},a.prototype.getPeriods=function(e){return e.range!==ue.Vk?B._k.members():B.PN.members()},a}();function Xe(a){return U.fF.assertValue(a,"data"),{duration:a.duration,includeToday:a.includeToday,relativeUnit:ze(a.period),relativeQualifier:xt(a.range),anchorDate:a.anchorDate}}function ze(a){switch(a){case B.LK:return m.hU.Minute;case B.i4:return m.hU.Hour;case B.an:return m.hU.Day;case B.P4:return m.hU.Week;case B.qQ:return m.hU.CalendarWeek;case B.e7:return m.hU.Month;case B.ks:return m.hU.CalendarMonth;case B.gQ:return m.hU.Year;case B.$G:return m.hU.CalendarYear;default:return void U.fF.assertFail("Unsupported timePeriod: "+a)}}function xt(a){switch(a){case ue.Z$:return m.KO.Last;case ue.Vk:return m.KO.Current;case ue.lp:return m.KO.Next;default:return void U.fF.assertFail("Unsupported qualifier: "+a)}}var wt="slicer-select-menu",Jt=".ui-selectmenu-button";function mi(a){return{textSize:9,fontFamily:$e.Wn.regular.css,fontColor:ge.v.getThemeColor(a,"foregroundDark"),background:null,labelBold:!1,labelItalic:!1,labelUnderline:!1}}var ei=function(){function a(e,t){this.isRendered=!1,this.hostServices=e.hostServices,this.relativeSlicerComponent=function(a){switch(a){case m.wj.Time:return new Ke;case m.wj.Date:return new je;default:return void U.fF.assertFail("Unsupported RelativeFilterType")}}(t)}return a.prototype.init=function(e,t){this.host=t,this.isRendered=!1,this.style=e.visualInitOptions.style,this.eventsHelper=new z.PB},a.prototype.onDestroy=function(){this.unregisterSelectMenuCloseEvents&&this.unregisterSelectMenuCloseEvents(),this.rangeSelectMenu&&this.rangeSelectMenu.destroy(),this.periodSelectMenu&&this.periodSelectMenu.destroy()},a.prototype.hasSlider=function(){return!1},a.prototype.supportsOrientation=function(){return!1},a.prototype.onClear=function(){this.data.range=ue.Z$,this.data.period=B.YP,this.data.duration=1,this.data.filter=null,this.renderInternal(),(0,z.VD)(this.hostServices,this.data.mode)},a.prototype.enumerateObjectInstances=function(e,t){var i,n=this.relativeSlicerComponent.getVisualObjectInstance(this.data);if("dateRange"===e.objectName&&n)return[n];if("numericInputStyle"===e.objectName){var r=h.gO.numericInputStyle;return[{selector:null,objectName:"numericInputStyle",properties:(i={fontColor:this.data.inputStyle.fontColor,background:this.data.inputStyle.background,textSize:this.data.inputStyle.textSize,fontFamily:this.data.inputStyle.fontFamily},i[r.bold.propertyName]=this.data.inputStyle.labelBold,i[r.italic.propertyName]=this.data.inputStyle.labelItalic,i[r.underline.propertyName]=this.data.inputStyle.labelUnderline,i)}]}},a.prototype.getValuesCard=function(e){var t=this,i=h.gO.numericInputStyle,n=new b.CQ(new b.lg("values"),"Role_DisplayName_Values",[i.fontFamily,i.textSize,i.fontColor,i.background,i.bold,i.italic,i.underline,h.gO.dateRange.includeToday,h.gO.dateRange.anchorDate],function(f){return t.hostServices.getLocalizedString(f)}),l=(new b.UN).withFontFamily({descriptor:i.fontFamily,value:this.data.inputStyle.fontFamily}).withFontSizeProperties({descriptor:i.textSize,value:this.data.inputStyle.textSize}).withBold({descriptor:i.bold,value:this.data.inputStyle.labelBold}).withItalic({descriptor:i.italic,value:this.data.inputStyle.labelItalic}).withUnderline({descriptor:i.underline,value:this.data.inputStyle.labelUnderline}).build();return n.addGroup("values",function(f){f.withDisplayName("Role_DisplayName_Values"),f.addCompositeSlice("fontselector","Font",l),f.addSimpleSlice("color",new b.BT({descriptor:i.fontColor,value:{value:t.data.inputStyle.fontColor}}).build()),t.relativeSlicerComponent.appendVisualSlices(f,t.data)}).addGroup("background",function(f){f.withDisplayName("Visual_Background").addSimpleSlice("color",new b.BT({descriptor:i.background,value:{value:t.data.inputStyle.background}}).build())}),n.build()},a.prototype.getSlicerSettingsCardOptions=function(e,t,i,n,r){return(0,z.nD)({cardUidBuilder:e,currentSlicerSettings:void 0,data:void 0,dataView:void 0,hostServices:this.hostServices,orientation:t,activeMode:i,slicerModes:n,featureSwitches:r})},a.prototype.getAdditionalCards=function(){},a.prototype.onModeChange=function(e){(0,z.VD)(this.hostServices,e)},a.prototype.onDataViewObjectChanged=function(e,t){var i=(0,z.tm)(e,t);return U.fF.assertNonEmpty(i,"There should be at least one save object"),i},a.converter=function(e,t,i,n){var r={mode:i,range:ue.Z$,period:B.YP,duration:1,includeToday:!0,identity:null,anchorDate:void 0,filter:null,inputStyle:mi(t)},l=e.columns.getMetadataColumns(h.CT.value);U.fF.assert(function(){return 1===l.length},"expect to have a metadataColumn"),r.identity=l[0].expr;var C=e.objects.getStaticObjects();if(C){var M=ge.v.create(t);r.filter=(0,d.NA)(C,h.gO.general.filter,r.filter),r.range=(0,d.NA)(C,h.gO.data.relativeRange,r.range),r.period=(0,d.NA)(C,n,r.period),r.duration=Math.abs((0,d.NA)(C,h.gO.data.relativeDuration,r.duration)),r.includeToday=(0,d.NA)(C,h.gO.dateRange.includeToday,r.includeToday),r.anchorDate=(0,d.NA)(C,h.gO.dateRange.anchorDate,r.anchorDate);var N=(0,qe.Zi)((0,d.RK)(C,"numericInputStyle"),{color:"fontColor",family:"fontFamily",size:"textSize"},M,t,"foregroundDark","smallLabel",{color:r.inputStyle.fontColor,family:r.inputStyle.fontFamily,size:et.B.createFromPt(r.inputStyle.textSize)});r.inputStyle.fontColor=N.color,r.inputStyle.fontFamily=N.family,r.inputStyle.textSize=N.size.pt,r.inputStyle.background=M.getColorForPropertyWithDefaultColor(C,h.gO.numericInputStyle.background,r.inputStyle.background),r.inputStyle.labelBold=(0,d.NA)(C,h.gO.numericInputStyle.bold,r.inputStyle.labelBold),r.inputStyle.labelItalic=(0,d.NA)(C,h.gO.numericInputStyle.italic,r.inputStyle.labelItalic),r.inputStyle.labelUnderline=(0,d.NA)(C,h.gO.numericInputStyle.underline,r.inputStyle.labelUnderline)}return r},a.prototype.render=function(e){var t=this,i=(0,De.G)(e.dataView);this.data=a.converter(i,this.style,this.relativeSlicerComponent.getMode(),this.relativeSlicerComponent.getRelativePropertyId()),this.isRendered||(this.initControls(),this.unregisterSelectMenuCloseEvents=this.eventsHelper.onPopupHideEvent(function(n,r){t.onSelectMenuClose(n,r)},this.selectionContainer.get(0))),this.updateProperties(this.data.range,this.data.period,this.data.duration),this.renderInternal()},a.prototype.onSelectMenuClose=function(e,t){!$(t).hasClass(wt)&&!$(t).closest(".".concat(wt)).length&&(this.rangeSelectMenu.close(),this.periodSelectMenu.close())},a.prototype.initControls=function(){var e=this;this.isRendered=!0,this.container=(0,J.hi)().addClass("relative-slicer").appendTo(this.host),this.selectionContainer=(0,J.hi)().addClass("selection-container").appendTo(this.container),this.selectionContainer.on("keyup keydown",function(r){9!==r.keyCode&&27!==r.keyCode&&r.stopPropagation()}),this.rangeSelectMenuContainer=(0,J.hi)().addClass("range-menu").appendTo(this.selectionContainer);var t={onChange:function(l){e.rangeChanged(l)},container:this.rangeSelectMenuContainer,options:this.getSelectMenuOptions(ue.dt.members()),className:wt,selectedValue:"Select",title:this.hostServices.getLocalizedString("Visual_Axis_Range")};this.rangeSelectMenu=new Re.S(t),this.rangeSelectMenu.update({selectedValue:ue.Z$}),this.durationInput=(0,J.ze)().attr("type","number").attr("min","1").attr("max",this.getDurationMax()).attr("drag-resize-disabled","true").addClass("duration-input").attr("aria-label",this.hostServices.getLocalizedString("Duration")).appendTo(this.selectionContainer),this.durationInput.val(this.data.duration.toString()),this.durationInput.on("change",_.debounce(function(r){e.durationChanged()},100)),this.periodSelectMenuContainer=(0,J.hi)().addClass("period-menu").appendTo(this.selectionContainer);var i=this.relativeSlicerComponent.getListOfOptions(),n={onChange:function(l){e.periodChanged(l)},container:this.periodSelectMenuContainer,options:this.getSelectMenuOptions(i),className:wt,title:this.hostServices.getLocalizedString("DaxTemplates_PeriodField")};this.periodSelectMenu=new Re.S(n),this.periodSelectMenu.disableOption(B.YP),this.updatePeriod(),this.restatementContainer=(0,J.hi)().addClass("restatement-container").appendTo(this.container),this.restatementIcon=$("<i ></i>").addClass("restatement-icon").addClass("pbi-glyph-datetime").appendTo(this.restatementContainer),this.restatement=(0,J.hi)().addClass("restatement").appendTo(this.restatementContainer),this.restatement.text(this.hostServices.getLocalizedString("ExportData_NoAppliedFiltersText"))},a.prototype.updatePeriod=function(){var e=this.relativeSlicerComponent.getPeriods(this.data);this.periodSelectMenu.update({options:this.getSelectMenuOptions(e),selectedValue:this.data.period})},a.prototype.rangeChanged=function(e){this.data.range=e,this.data.range===ue.Vk?(this.durationInput.attr("type","text"),this.durationInput.val("-"),this.durationInput.prop("disabled",!0),this.data.duration=0):("-"===this.durationInput.val()?(this.durationInput.attr("type","number"),this.durationInput.val("1"),this.data.duration=1):this.updateDuration(),this.durationInput.prop("disabled",!1)),this.updatePeriod();var t=this.updateProperties(this.data.range,this.data.period,this.data.duration);this.hostServices.persistProperties(t),this.renderInternal()},a.prototype.periodChanged=function(e){this.updateDuration();var t=this.updateProperties(this.data.range,e,this.data.duration);this.hostServices.persistProperties(t),this.renderInternal()},a.prototype.durationChanged=function(){this.updateDuration();var e=this.updateProperties(this.data.range,this.data.period,this.data.duration);this.hostServices.persistProperties(e),this.renderInternal()},a.prototype.renderInternal=function(){var e=this.relativeSlicerComponent.getSelectedPeriodOption(this.data),t=Me.FP.fromPointToPixel(this.data.inputStyle.textSize),i={"font-size":t,"font-family":this.data.inputStyle.fontFamily,color:this.data.inputStyle.fontColor,"background-color":this.data.inputStyle.background?this.data.inputStyle.background:"","font-weight":this.data.inputStyle.labelBold?T.en:T.AI,"font-style":this.data.inputStyle.labelItalic?T.BF:T.AI,"text-decoration":this.data.inputStyle.labelUnderline?T.f0:T.zu};this.durationInput.css(i),i["font-size"]=t-1,this.restatement.css(i);var n=this.rangeSelectMenuContainer.find(Jt);n.css(i);var l=ue.dt.members([this.data.range])[0].displayName({get:this.hostServices.getLocalizedString.bind(this.hostServices)});n.attr("title",l);var f=this.periodSelectMenuContainer.find(Jt);f.css(i);var C=e.displayName({get:this.hostServices.getLocalizedString.bind(this.hostServices)});f.attr("title",C),this.rangeSelectMenu.update({selectedValue:this.data.range}),this.updatePeriod(),this.periodSelectMenu.disableOption(B.YP),0===this.data.duration?(this.durationInput.attr("type","text"),this.durationInput.val("-"),this.durationInput.prop("disabled",!0)):(this.durationInput.attr("type","number"),this.durationInput.prop("disabled",!1),this.durationInput.attr("max",this.getDurationMax()),this.durationInput.val(Math.abs(this.data.duration).toString())),this.setRestatement()},a.prototype.updateProperties=function(e,t,i){this.data.range=e;var n=this.data.period!==t;this.data.period=t,this.data.duration=i;var r,l=null;if(this.data.period!==B.YP&&(l=this.createFilter()),null!==l||!this.data.filter){var f=l?Oe.yl.fromSQExpr(l):null;return(!Oe.yl.isSameFilter(f,this.data.filter)||n)&&(r=this.createProperties(f),this.setRestatement()),r}this.onClear()},a.prototype.updateDuration=function(){this.data.range===ue.Vk?this.data.duration=0:this.isDurationValid()&&(this.data.duration=Math.min(parseInt(this.durationInput.val(),10),this.getDurationMax()))},a.prototype.isDurationValid=function(){var e=parseInt(this.durationInput.val(),10);return $.isNumeric(e)&&e>0},a.prototype.getDurationMax=function(){var e=this.data.period!==B.YP?this.data.period:B.an;return m.t0.getDurationMax(xt(this.data.range),ze(e))},a.prototype.createFilter=function(){var e;if(this.data.identity){var t=Xe(this.data);e=(0,Te.kW)({field:this.data.identity,options:t})}return e},a.prototype.getRelativePropertyName=function(){return this.relativeSlicerComponent.getRelativePropertyId().propertyName},a.prototype.createProperties=function(e){var t={merge:[],replace:[],remove:[]},i={objectName:"general",selector:null,properties:{}};null!==e?(i.properties[h.gO.general.filter.propertyName]=e,t.merge.push(i)):(i.properties[h.gO.general.filter.propertyName]=!0,t.remove.push(i));var n={objectName:"data",selector:null,properties:{}};if(null!=this.data.mode&&(n.properties[h.gO.data.mode.propertyName]=this.data.mode),null!=this.data.range&&(n.properties[h.gO.data.relativeRange.propertyName]=this.data.range),null!=this.data.duration&&(n.properties[h.gO.data.relativeDuration.propertyName]=this.data.duration),null!=this.data.period){var r=this.getRelativePropertyName();n.properties[r]=this.data.period}t.replace.push(n);var l={objectName:"dateRange",selector:null,properties:{}};return null!=this.data.includeToday&&(l.properties[h.gO.dateRange.includeToday.propertyName]=this.data.includeToday),this.data.anchorDate&&(l.properties[h.gO.dateRange.anchorDate.propertyName]=this.data.anchorDate),t.replace.push(l),this.hostServices.onSelect({type:0,visualObjects:[]}),t},a.prototype.setRestatement=function(){var t,i,n,e=this;if(this.data.period===B.YP)this.restatement.text(this.hostServices.getLocalizedString("ExportData_NoAppliedFiltersText"));else{var r=Xe(this.data),f=null===(i=null===(t=this.hostServices)||void 0===t?void 0:t.networkAvailability())||void 0===i?void 0:i.isNetworkAvailable();this.restatement.text(m.t0.getRestatement(r,f,function(M,N){return e.hostServices.getLocalizedString(M,N)},null===(n=this.hostServices.visualTimeSynchronization())||void 0===n?void 0:n.getAnchorTime()))}},a.prototype.getSelectMenuOptions=function(e){for(var t=[],i=0,n=e;i<n.length;i++){var r=n[i],l=r.displayName({get:this.hostServices.getLocalizedString.bind(this.hostServices)});t.push({text:l,value:r.value})}return t},a}(),ti=(0,y(28488).i)([{value:w.vX,displayName:function(e){return e.get("Visual_SliderMode_Between")}},{value:w.bb,displayName:function(e){return e.get("Visual_SliderMode_LessThanEqualLabel")}},{value:w.e4,displayName:function(e){return e.get("Visual_SliderMode_GreaterThanEqualLabel")}},{value:w.RB,displayName:function(e){return e.get("Visual_SliderMode_Basic")}},{value:w.j6,displayName:function(e){return e.get("Visual_SliderMode_Dropdown")}},{value:w.Zr,displayName:function(e){return e.get("Visual_SliderMode_SingleVal")}},{value:w.Ih,displayName:function(e){return e.get("Visual_SliderMode_VerticalList")}},{value:w.of,displayName:function(e){return e.get("Tile_Generic")}}]),ht=function(){function a(e){this.hostServices=e.hostServices,this.startInputLabel=this.hostServices.getLocalizedString("Slicer_StartTimeLabel"),this.endInputLabel=this.hostServices.getLocalizedString("Slicer_EndTimeLabel")}return a.prototype.createRange=function(e){return e.isSourceInteger?new H.BN(e.bounds.min,e.bounds.max,e.value.min,e.value.max):new H.mD(e.bounds.min,e.bounds.max,e.value.min,e.value.max)},a.prototype.areEqual=function(e,t){return e===t},a.prototype.defaultValue=function(){return 0},a.prototype.startProperty=function(){return h.gO.data.numericStart},a.prototype.endProperty=function(){return h.gO.data.numericEnd},a.prototype.parseSingleSliderValue=function(e,t){var i=t[e];return{min:i,max:i}},a.prototype.formatValue=function(e,t){return U.fF.assertValue(e,"value"),t?t.format(e):e.toString()},a.prototype.getSliderOptions=function(e,t){return t?{min:0,max:e.dataPoints.length-1,step:1}:e.isSourceInteger?{min:e.bounds.min,max:e.bounds.max,step:1}:{min:e.bounds.min,max:e.bounds.max,step:null}},a.prototype.inputStyleProperties=function(){return{background:h.gO.numericInputStyle.background,fontColor:h.gO.numericInputStyle.fontColor,textSize:h.gO.numericInputStyle.textSize,fontFamily:h.gO.numericInputStyle.fontFamily,bold:h.gO.numericInputStyle.bold,italic:h.gO.numericInputStyle.italic,underline:h.gO.numericInputStyle.underline}},a.prototype.parseInput=function(e,t,i){var n=parseFloat(e);return i&&$.isNumeric(n)?_.indexOf(t,n)>-1?n:this.findClosestPoint(n,t):n},a.prototype.findClosestPoint=function(e,t){for(var i=_.head(t),n=Math.abs(i-e),r=1;r<t.length;r++){var l=Math.abs(t[r]-e);l<n&&(n=l,i=t[r])}return i},a.prototype.isInputValid=function(e,t,i,n){return!(!$.isNumeric(e)||0===i&&e>t.max||1===i&&e<t.min||n&&e===t.min)},a.prototype.setRange=function(e,t,i,n,r,l){U.fF.assertValue(e.min,"value.min"),U.fF.assertValue(e.max,"value.max"),null==r?(i.val(t.format(e.min)),i.attr("aria-label",(0,ee.W)(this.startInputLabel,t.format(l.min),t.format(e.max))),n.val(t.format(e.max)),n.attr("aria-label",(0,ee.W)(this.endInputLabel,t.format(e.min),t.format(l.max)))):0===r?(i.val(t.format(e.min)),i.attr("aria-label",(0,ee.W)(this.startInputLabel,t.format(l.min),t.format(l.max)))):1===r&&(n.val(t.format(e.max)),n.attr("aria-label",(0,ee.W)(this.endInputLabel,t.format(l.min),t.format(l.max))))},a.prototype.createInputElement=function(e,t){return(0,J.ze)().attr("type","text").attr(Qe,"true").addClass(ke.class).appendTo(e)},a.prototype.enumerateObjectInstances=function(e,t,i){var n;if("numericInputStyle"===e.objectName&&t&&t.inputStyle){var r=h.gO.numericInputStyle;return[{selector:null,objectName:"numericInputStyle",properties:(n={fontColor:t.inputStyle.fontColor,background:t.inputStyle.background,textSize:t.inputStyle.textSize,fontFamily:t.inputStyle.fontFamily},n[r.bold.propertyName]=t.inputStyle.labelBold,n[r.italic.propertyName]=t.inputStyle.labelItalic,n[r.underline.propertyName]=t.inputStyle.labelUnderline,n)}]}},a.prototype.getValuesCard=function(e,t){var i=this,n=h.gO.numericInputStyle,r=new b.CQ(new b.lg("values"),"Role_DisplayName_Values",[n.fontFamily,n.textSize,n.fontColor,n.background,n.bold,n.italic,n.underline],function(f){return i.hostServices.getLocalizedString(f)}),l=(new b.UN).withFontFamily({descriptor:n.fontFamily,value:e.inputStyle.fontFamily}).withFontSizeProperties({descriptor:n.textSize,value:e.inputStyle.textSize}).withBold({descriptor:n.bold,value:e.inputStyle.labelBold}).withItalic({descriptor:n.italic,value:e.inputStyle.labelItalic}).withUnderline({descriptor:n.underline,value:e.inputStyle.labelUnderline});return r.addGroup("values",function(f){return f.withDisplayName("Role_DisplayName_Values").addCompositeSlice("fontselector","Font",l.build()).addSimpleSlice("color",new b.BT({descriptor:n.fontColor,value:{value:e.inputStyle.fontColor}}).build())}).addGroup("background",function(f){return f.withDisplayName("Visual_Background").addSimpleSlice("color",new b.BT({descriptor:n.background,value:{value:e.inputStyle.background}}).build())}),r.build()},a.prototype.getDataPointsForSingleValueRange=function(e){var t=e.categorical.categories[0],n=_.filter(t&&t.values||[],function(r){return $.isNumeric(r)});return n=_.sortBy(n,function(r){return r}),_.uniq(n)},a.prototype.filterExpr=function(e){return{lower:(0,de.tx)(e.min),upper:(0,de.tx)(e.max)}},a.prototype.comparisonKind=function(){return{lower:2,upper:4}},a}(),kt=y(45863),ii=y(56707),Be=y(64067),ri=y(72489),It="Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif",jt=(0,T.CH)("date-slicer-range"),xi=(0,T.CH)("date-slicer"),ni=(0,T.CH)("date-slicer-head"),wi=(0,T.CH)("date-slicer-slider"),si=(0,T.CH)("date-slicer-control"),Ut=(0,T.CH)("roundHandles"),oi=(0,T.CH)("wrap"),Pe=(0,T.CH)("date-slicer-datepicker"),pt=(0,T.CH)("date-slicer-datepicker-wrapper"),Dt=(0,T.CH)("noUi-connect"),li=(0,T.CH)("noUi-connects"),ui=(0,T.CH)("noUi-background"),Et=(0,T.CH)("noUi-handle"),Ye="foregroundNeutralSecondary";function ci(a){return{textSize:9,fontFamily:$e.Wn.regular.css,fontColor:ge.v.getThemeColor(a,"foregroundDark"),background:null,labelBold:!1,labelItalic:!1,labelUnderline:!1}}function di(a){return{color:ge.v.getThemeColor(a,Ye),show:!0,drawRoundSliderHandles:!1,minSliderVisibilityHeight:0,minSliderVisibilityWidth:150,handleFillColor:ge.v.getThemeColor(a,"background"),handleBorderColor:ge.v.getThemeColor(a,Ye),primaryLineColor:ge.v.getThemeColor(a,Ye),secondaryLineColor:ge.v.getThemeColor(a,"foregroundNeutralLight")}}var ft=function(){function a(e,t,i,n,r){this.viewModelAdapter=r,this.isRendered=!1,e&&(this.hostServices=e.hostServices,this.preventTextSelection=e.preventTextSelection,this.featureSwitches=e.featureSwitches),this.rangeSlicerRenderer=t,this.singleValue=i,this.isCategorySourceNumeric=n,this.useModernDatePicker=!this.isCategorySourceNumeric&&this.featureSwitches.useModernDatePickerSlicer}return Object.defineProperty(a.prototype,"defaultSliderMode",{get:function(){return this.singleValue?w.Zr:w.vX},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"activeMode",{get:function(){return this.data.mode||this.defaultSliderMode},enumerable:!1,configurable:!0}),a.prototype.init=function(e,t){this.host=t,this.style=e.visualInitOptions.style,this.featureSwitches=e.visualInitOptions.featureSwitches},a.prototype.onModeChange=function(e){if(_.indexOf(st,e)>-1){if(!this.data)return;this.updateMode(e)}else(0,z.VD)(this.hostServices,e)},a.prototype.onDataViewObjectChanged=function(e,t){if(0===t&&1===e.length&&e[0].objectName===h.gO.data.mode.objectName&&e[0].propertyName===h.gO.data.mode.propertyName){var n=e[0].propertyValue;return _.indexOf(st,n)>-1?this.buildUpdatedPropertySaveObjects(n):(0,z.tm)(e,t)}return e},a.prototype.buildUpdatedPropertySaveObjects=function(e){var t=[];this.updateRangeSlicerState(e);var i=this.buildRangeSlicerProperties();this.data.properties.filter=i.filter,this.data.properties.bounds=i.bounds;var n=this.createFilter(i,e,this.data.state,this.data.identity);t.push({objectName:h.gO.general.filter.objectName,propertyName:h.gO.general.filter.propertyName,propertyValue:n,propertyType:{filter:{}}});var l=this.isCategorySourceNumeric?{numeric:!0}:{dateTime:!0},f=null;1&this.data.state&&null!==i.start&&(f=i.start);var C={objectName:this.rangeSlicerRenderer.startProperty().objectName,propertyName:this.rangeSlicerRenderer.startProperty().propertyName,propertyValue:f,propertyType:l};t.push(C);var M=null;2&this.data.state&&null!==i.end&&(M=i.end);var N={objectName:this.rangeSlicerRenderer.endProperty().objectName,propertyName:this.rangeSlicerRenderer.endProperty().propertyName,propertyValue:M,propertyType:l};return t.push(N),t.push({objectName:h.gO.data.mode.objectName,propertyName:h.gO.data.mode.propertyName,propertyValue:e,propertyType:{enumeration:w.dt}}),t},a.prototype.buildRangeSlicerProperties=function(){return{start:1&this.data.state?this.data.value.min:null,end:2&this.data.state?this.data.value.max:null,mode:this.data.mode,filter:{min:this.data.value.min,max:this.data.value.max},bounds:{min:this.data.bounds.min,max:this.data.bounds.max}}},a.prototype.onClear=function(){if(this.data&&this.data.initialValue){this.data.value=this.data.initialValue,this.data.state=0,this.updateProperties(),this.hostServices.triggerUpdate();var e=this.hostServices.getLocalizedString("Slicer_ClearSelectionsCleared");this.hostServices.alertWithDebounce("announce-clear-selection",e)}},a.prototype.render=function(e){if(_.isEmpty(e.dataView))this.hostServices.setWarnings([new Ce.L$]);else{if(this.dataView=e.dataView,this.reader=(0,De.G)(this.dataView),this.originalData=this.data=this.converter(this.reader,e),!this.isMetaColumnsValid(this.reader))return this.hostServices.setWarnings([new Ce.L$]),void(this.isRendered&&this.disableSlicer());this.isRendered&&this.enableSlicer(),this.viewModelAdapter&&(this.data=this.viewModelAdapter.applyChanges(e.viewport,this.originalData,this.dataView)),this.isRendered||this.initControls(),this.rangeSlicerRenderer.setRange(this.data.value,this.data.formatter,this.start,this.end,null,this.data.bounds),this.range=this.rangeSlicerRenderer.createRange(this.data),this.updateInputControls(),this.updateSlider(this.activeMode),this.updateProperties(),this.isDataColumnsValid(this.reader)||(this.hostServices.setWarnings([new Ce.L$]),this.isRendered&&this.disableSlicer())}},a.prototype.hasSlider=function(){return!!this.data&&this.data.sliderSettings.show},a.prototype.supportsOrientation=function(){return!1},a.prototype.enumerateObjectInstances=function(e){var t=this.originalData;return"date"===e.objectName||"numericInputStyle"===e.objectName?this.rangeSlicerRenderer.enumerateObjectInstances(e,t,this.featureSwitches):"slider"===e.objectName&&t?[{selector:null,objectName:"slider",properties:{show:t.sliderSettings.show,color:t.sliderSettings.color},propertyInstanceKind:{color:3}}]:void 0},a.prototype.getSlicerSettingsCardOptions=function(e,t,i,n){return(0,z.nD)({cardUidBuilder:e,currentSlicerSettings:void 0,data:void 0,dataView:this.dataView,hostServices:this.hostServices,orientation:t,activeMode:i,slicerModes:n,featureSwitches:this.featureSwitches})},a.prototype.getValuesCard=function(){var e=this.originalData;if(e)return this.rangeSlicerRenderer.getValuesCard(e,this.featureSwitches)},a.prototype.getAdditionalCards=function(){var t,e=this,i=this.originalData;if(i){var n=h.gO.slider,r=[n.show,n.color,n.handleFillColor,n.handleBorderColor,n.secondaryLineColor],l=new b.CQ(new b.lg("slider"),"Slicer_Slider",r,function(f){return e.hostServices.getLocalizedString(f)});return l.addTopLevelToggle("show",function(){return new b.bd({descriptor:n.show,value:i.sliderSettings.show}).build()}),null!==(t=this.featureSwitches)&&void 0!==t&&t.slicerSliderColors?l.addGroup("handles",function(f){f.withDisplayName("Slicer_Handles"),e.data.sliderSettings.drawRoundSliderHandles?f.addSimpleSlice("fill",new b.BT({descriptor:n.handleFillColor,value:{value:i.sliderSettings.handleFillColor}}).build()).addSimpleSlice("border",new b.BT({descriptor:n.handleBorderColor,value:{value:i.sliderSettings.handleBorderColor}}).build()):f.addSimpleSlice("color",new b.BT({descriptor:n.handleBorderColor,value:{value:i.sliderSettings.handleBorderColor}}).build(),function(C){return C.withCustomDisplayName("Generic_Color")})}).addGroup("primaryLine",function(f){f.withDisplayName("Primary_Line").addSimpleSlice("primaryLineColor",new b.BT({descriptor:n.color,value:{value:i.sliderSettings.primaryLineColor}}).build(),function(C){return C.withCustomDisplayName("Generic_Color")})}).addGroup("secondaryLine",function(f){f.withDisplayName("Visual_Secondary_Line").addSimpleSlice("secondaryLineColor",new b.BT({descriptor:n.secondaryLineColor,value:{value:i.sliderSettings.secondaryLineColor}}).build())}):l.addGroup("colors",function(f){f.withDisplayName("Generic_Color").addSimpleSlice("color",new b.BT({descriptor:n.color,value:{value:i.sliderSettings.color}}).build())}),[l.build()]}},a.prototype.isDataColumnsValid=function(e){if(this.singleValue)return e.columns.getCategoryCount()>0;var t=e.columns.getMetadataColumns(h.CT.value);if(!_.isEmpty(t)){var i=t[0];if(i.aggregates&&null!=i.aggregates.min&&null!=i.aggregates.max)return!0}return!1},a.prototype.isMetaColumnsValid=function(e){var t=e.columns.getMetadataColumns(h.CT.value);return!_.isEmpty(t)},a.prototype.converter=function(e,t){var i,n,r={state:0,mode:null,formatter:null,identity:null,value:null,initialValue:null,bounds:null,filter:null,properties:{filter:null},sliderSettings:di(this.style),inputStyle:ci(this.style),dataPoints:null,wrapRangeBoxes:!1,isSourceInteger:!1,hideDatePickerButton:!0},f=e.columns.getMetadataColumns(h.CT.value)[0],C=(0,ri.EO)(f,h.gO.general.formatString);r.isSourceInteger=!0===f.type.integer,r.formatter=(0,ri.E3)(C),r.identity=f.expr;var M=this.rangeSlicerRenderer.defaultValue(),N=this.rangeSlicerRenderer.defaultValue();if(this.singleValue)r.dataPoints=this.rangeSlicerRenderer.getDataPointsForSingleValueRange(this.dataView),r.dataPoints.length>0&&(M=r.dataPoints[0],N=r.dataPoints[r.dataPoints.length-1]);else{var k=f.aggregates;null!=k.min&&(M=k.min),null!=k.max&&(N=k.max)}r.value={min:M,max:N},r.initialValue={min:M,max:N},r.bounds={min:r.value.min,max:r.value.max};var K=e.objects.getStaticObjects();if(K){r.filter=(0,d.NA)(K,h.gO.general.filter),r.properties.start=r.filter?(0,d.NA)(K,this.rangeSlicerRenderer.startProperty(),null):null,r.properties.end=r.filter?(0,d.NA)(K,this.rangeSlicerRenderer.endProperty(),null):null,r.properties.mode=(0,d.NA)(K,h.gO.data.mode,null),r.hideDatePickerButton=(0,d.NA)(K,h.gO.date.hideDatePickerButton,!0);var j=this.rangeSlicerRenderer.inputStyleProperties(),q=ge.v.create(this.style),ne=(0,d.RK)(K,this.rangeSlicerRenderer instanceof ht?"numericInputStyle":"date"),Ve=(0,qe.Zi)(ne,{color:"fontColor",family:"fontFamily",size:"textSize"},q,this.style,"foregroundDark","smallLabel",{color:r.inputStyle.fontColor,family:r.inputStyle.fontFamily,size:et.B.createFromPt(r.inputStyle.textSize)});r.inputStyle.fontColor=Ve.color,r.inputStyle.fontFamily=Ve.family,r.inputStyle.textSize=Ve.size.pt,r.inputStyle.background=q.getColorForPropertyWithDefaultColor(K,j.background,r.inputStyle.background),r.inputStyle.labelBold=(0,d.NA)(K,j.bold,r.inputStyle.labelBold),r.inputStyle.labelItalic=(0,d.NA)(K,j.italic,r.inputStyle.labelItalic),r.inputStyle.labelUnderline=(0,d.NA)(K,j.underline,r.inputStyle.labelUnderline),r.sliderSettings.color=q.getColorForPropertyWithDefaultColor(K,h.gO.slider.color,r.sliderSettings.color),r.sliderSettings.show=(0,d.NA)(K,h.gO.slider.show,r.sliderSettings.show),!(null===(i=this.featureSwitches)||void 0===i)&&i.slicerSliderColors&&(r.sliderSettings.handleFillColor=q.getColorForPropertyWithDefaultColor(K,h.gO.slider.handleFillColor,r.sliderSettings.handleFillColor),r.sliderSettings.primaryLineColor=q.getColorForPropertyWithDefaultColor(K,h.gO.slider.color,r.sliderSettings.color),r.sliderSettings.handleBorderColor=q.getColorForPropertyWithDefaultColor(K,h.gO.slider.handleBorderColor,r.sliderSettings.primaryLineColor),r.sliderSettings.secondaryLineColor=q.getColorForPropertyWithDefaultColor(K,h.gO.slider.secondaryLineColor,r.sliderSettings.secondaryLineColor)),null!==r.properties.start&&(r.state|=1,r.value.min=r.properties.start,r.properties.start<r.bounds.min&&(r.bounds.min=r.properties.start)),null!==r.properties.end&&(r.state=r.state|=2,r.value.max=r.properties.end,r.properties.end>r.bounds.max&&(r.bounds.max=r.properties.end)),r.value.min>r.bounds.max&&(r.value.max=r.bounds.max=r.value.min),r.value.max<r.bounds.min&&(r.value.min=r.bounds.min=r.value.max),null!=r.properties.mode&&(r.mode=r.properties.mode),r.filter&&(r.properties.filter={min:r.value.min,max:r.value.max})}else r.state=0,r.properties.start=null,r.properties.end=null,r.properties.mode=null;var Le=(0,Be.WV)(null!==(n=this.featureSwitches)&&void 0!==n&&n.slicerSliderColors?r.sliderSettings.handleBorderColor:r.sliderSettings.color);return r.sliderSettings.activeColor=(0,Be.jd)(Le,.5,.2),r.sliderSettings.hoverColor=(0,Be.Bx)((0,Be._j)(Le,100)),r.sliderSettings.label=t.restatement,r.properties.bounds={min:r.bounds.min,max:r.bounds.max},r},a.prototype.initControls=function(){this.isRendered=!0,this.createHtmlControls(),this.updateMode(this.data.mode)},a.prototype.createHtmlControls=function(){var e=this;this.container=(0,J.hi)().addClass(xi.class).appendTo(this.host),this.container.on("keyup keydown",function(r){9!==r.keyCode&&27!==r.keyCode&&r.stopPropagation()});var t=(0,J.hi)().addClass(ni.class).css(this.getFontStyles()).appendTo(this.container),i=(0,J.hi)().addClass(jt.class).appendTo(t);if(this.startContainer=(0,J.hi)().addClass(si.class).appendTo(i),this.endContainer=(0,J.hi)().addClass(si.class).appendTo(i),this.useModernDatePicker?(U.fF.assert(function(){return e.data.value.min instanceof Date},"Date required"),U.fF.assert(function(){return e.data.value.max instanceof Date},"Date required"),U.fF.assert(function(){return e.data.bounds.min instanceof Date},"Date required"),U.fF.assert(function(){return e.data.bounds.max instanceof Date},"Date required"),this.startComponentRef=this.hostServices.getUIComponentFactory().createDatePicker(this.startContainer.get(0),this.data.value.min,function(r){null!==r&&e.onRangeChange(0)},Ge.b$.generateGuid(),this.data.bounds.min,this.data.bounds.max,this.data.hideDatePickerButton),this.endComponentRef=this.hostServices.getUIComponentFactory().createDatePicker(this.endContainer.get(0),this.data.value.max,function(r){null!==r&&e.onRangeChange(1)},Ge.b$.generateGuid(),this.data.bounds.min,this.data.bounds.max,this.data.hideDatePickerButton),this.start=this.startComponentRef.datePickerElement.find(":input").first(),this.end=this.endComponentRef.datePickerElement.find(":input").first(),this.startButton=this.startComponentRef.datePickerElement.find(":button"),this.endButton=this.endComponentRef.datePickerElement.find(":button"),this.data.hideDatePickerButton?(this.start.addClass(ke.class),this.end.addClass(ke.class)):(this.start.addClass(Pe.class),this.startComponentRef.datePickerElement.addClass(pt.class),this.end.addClass(Pe.class),this.endComponentRef.datePickerElement.addClass(pt.class))):(this.start=this.rangeSlicerRenderer.createInputElement(this.startContainer,0),this.end=this.rangeSlicerRenderer.createInputElement(this.endContainer,1)),this.rangeSlicerRenderer.addAriaDescription&&(this.rangeSlicerRenderer.addAriaDescription(this.start),this.rangeSlicerRenderer.addAriaDescription(this.end)),(0,z.Id)()){var n=z.hY.class;this.start.addClass(n),this.end.addClass(n)}this.bindEventHandlersToInputElements(),this.sliderContainer=(0,J.hi)().addClass(wi.class).appendTo(this.container)},a.prototype.bindEventHandlersToInputElements=function(){var e=this;this.start.on("click touchend contextmenu",function(t){t.stopPropagation()}),this.end.on("click touchend contextmenu",function(t){t.stopPropagation()}),this.start.on("change",function(t){e.onRangeChange(0)}),this.start.on("keyup",function(t){13===t.which&&(e.start.blur(),e.start.focus())}),this.start.on("focus",function(t){(!e.singleValue||e.data.filter)&&(e.useModernDatePicker?(U.fF.assert(function(){return e.data.value.min instanceof Date},"Date required"),e.startComponentRef.writeValue(e.data.value.min)):e.start.val(e.rangeSlicerRenderer.formatValue(e.data.value.min,null))),e.preventTextSelection||e.start.select()}),this.start.on("blur",function(t){(!e.singleValue||e.data.filter)&&(e.useModernDatePicker?(U.fF.assert(function(){return e.data.value.min instanceof Date},"Date required"),e.startComponentRef.writeValue(e.data.value.min)):e.start.val(e.rangeSlicerRenderer.formatValue(e.data.value.min,e.data.formatter)))}),this.end.on("change",function(t){e.onRangeChange(1)}),this.end.on("keyup",function(t){13===t.which&&(e.end.blur(),e.end.focus())}),this.end.on("focus",function(t){e.useModernDatePicker?(U.fF.assert(function(){return e.data.value.max instanceof Date},"Date required"),e.endComponentRef.writeValue(e.data.value.max)):e.end.val(e.rangeSlicerRenderer.formatValue(e.data.value.max,null)),e.preventTextSelection||e.end.select()}),this.end.on("blur",function(t){e.useModernDatePicker?(U.fF.assert(function(){return e.data.value.max instanceof Date},"Date required"),e.endComponentRef.writeValue(e.data.value.max)):e.end.val(e.rangeSlicerRenderer.formatValue(e.data.value.max,e.data.formatter))})},a.prototype.onRangeChange=function(e){var t=this,i=0===e?this.start.val():this.end.val(),n=this.rangeSlicerRenderer.parseInput(i,this.data.dataPoints,this.singleValue);this.rangeSlicerRenderer.isInputValid(n,this.data.value,e,this.singleValue)?this.updateRange({min:n,max:n},e):(this.rangeSlicerRenderer.setRange(this.data.value,this.data.formatter,this.start,this.end,e,this.data.bounds),this.useModernDatePicker&&(U.fF.assert(function(){return t.data.value.min instanceof Date},"Date required"),U.fF.assert(function(){return t.data.value.max instanceof Date},"Date required"),this.startComponentRef.writeValue(this.data.value.min),this.endComponentRef.writeValue(this.data.value.max)))},a.prototype.onDestroy=function(){this.rangeSlicerRenderer.onDestroy&&this.rangeSlicerRenderer.onDestroy()},a.prototype.getFontStyles=function(){var e;return(e={})["font-size"]=Me.FP.fromPointToPixel(9),e["font-family"]=It,e["font-weight"]=ii.bL.weight,e},a.prototype.updateSliderControl=function(){var t,i,e=this,n=this.createSliderOptions();if(this.slider){this.slider.updateOptions(n);var r=[];if(this.singleValue){var l=_.indexOf(this.data.dataPoints,this.data.value.min);r.push(l)}else{var f=this.range.getScaledValue();this.activeMode!==w.bb&&r.push(f.min),this.activeMode!==w.e4&&r.push(f.max)}this.slider.set(r)}else this.sliderOptions=n,this.slider&&(this.slider.destroy(),this.sliderContainer.empty()),this.sliderElement=(0,J.hi)().attr(Qe,"true").attr("rtl",("rtl"===document.dir).toString()).appendTo(this.sliderContainer),(0,kt.create)(this.sliderElement.get(0),this.sliderOptions),this.slider=this.sliderElement.get(0).noUiSlider,this.slider.on("slide",function(k,K,j){window.requestAnimationFrame(function(){var q=e.parseSliderValue(j);e.rangeSlicerRenderer.setRange(q,e.data.formatter,e.start,e.end,null,e.data.bounds),e.useModernDatePicker&&(U.fF.assert(function(){return q.min instanceof Date},"Date required"),U.fF.assert(function(){return q.max instanceof Date},"Date required"),e.startComponentRef.writeValue(q.min),e.endComponentRef.writeValue(q.max))})}),this.slider.on("change",_.debounce(function(k,K,j){var q=e.parseSliderValue(j),ne=e.getChangeType(e.activeMode,K);e.updateRange(q,ne)},100)),this.applyHandlesHoverState(this.sliderContainer.find(Et.selector));this.updateAccessibilityAttributes(this.data,this.sliderContainer.find(Et.selector),this.activeMode);var C=null!==(t=this.featureSwitches)&&void 0!==t&&t.slicerSliderColors?this.data.sliderSettings.handleBorderColor:this.data.sliderSettings.color,M=null!==(i=this.featureSwitches)&&void 0!==i&&i.slicerSliderColors?this.data.sliderSettings.primaryLineColor:this.data.sliderSettings.color;this.sliderContainer.find(Dt.selector).css({"background-color":M}),this.sliderContainer.find(li.selector).css({"background-color":this.data.sliderSettings.secondaryLineColor}),this.sliderContainer.find(Et.selector).each(function(k,K){var j=$(K),q=j.is(":hover")?e.data.sliderSettings.activeColor:C;e.setSliderHandleColor(j,q)}),this.sliderContainer.find(Dt.selector).addClass("backgroundToSelectedBackgroundColor"),this.sliderContainer.find(ui.selector).addClass("backgroundToForegroundColor");var N=this.sliderContainer.find(Et.selector);this.data.sliderSettings.drawRoundSliderHandles?(N.addClass("backgroundToSolidBackgroundColor"),N.addClass("highContrastSelectedBorderColor")):N.addClass("backgroundToSelectedBackgroundColor")},a.prototype.setSliderHandleColor=function(e,t){var i={"border-color":"","background-color":""};this.data.sliderSettings.drawRoundSliderHandles&&(i["background-color"]=this.data.sliderSettings.handleFillColor),i[this.data.sliderSettings.drawRoundSliderHandles?"border-color":"background-color"]=t,e.css(i)},a.prototype.disableSlicer=function(){this.disableSlider(),1&this.data.state||(this.useModernDatePicker?this.startComponentRef.writeValue():this.start.val(""),this.disableInput(this.start,this.data.inputStyle.fontColor,this.startButton)),2&this.data.state||(this.useModernDatePicker?this.endComponentRef.writeValue():this.end.val(""),this.disableInput(this.end,this.data.inputStyle.fontColor,this.endButton)),this.data.bounds.min=this.data.bounds.max=null,this.updateProperties()},a.prototype.disableSlider=function(){this.sliderElement&&this.sliderElement.get(0).setAttribute("disabled","true"),this.sliderContainer.css("opacity","0.1"),this.slider&&this.slider.set([0,100])},a.prototype.applyTooltip=function(e,t){var n,i=this;e.on("focus mouseenter",function(){n=i.renderTooltip(e.get(0),t)}),e.on("blur mouseleave",function(){n?.close(),n=null}),e.on("keydown",function(r){null!==n&&27===r.keyCode&&(r.stopPropagation(),r.preventDefault(),n.close(),n=null)})},a.prototype.renderTooltip=function(e,t){var i;return this.tooltip&&this.tooltip.close(),this.tooltip=null===(i=this.hostServices.getUIComponentFactory())||void 0===i?void 0:i.createTooltip(e,t),this.tooltip},a.prototype.enableSlicer=function(){this.sliderElement&&!this.rangeSlicerRenderer.areEqual(this.data.bounds.min,this.data.bounds.max)&&this.sliderElement.get(0).removeAttribute("disabled"),this.sliderContainer.css("opacity","1.0"),this.enableInput(this.start,this.startButton),this.enableInput(this.end,this.endButton)},a.prototype.applyHandlesHoverState=function(e){var t,i=!1,n=!1,r=this,l=null===(t=this.featureSwitches)||void 0===t?void 0:t.slicerSliderColors;e.on("mouseenter",function(){n=!0,!i&&r.setSliderHandleColor($(this),r.data.sliderSettings.hoverColor)}).on("mouseleave",function(){n=!1,!i&&r.setSliderHandleColor($(this),l?r.data.sliderSettings.handleBorderColor:r.data.sliderSettings.color)}).on("mousedown touchstart",function(){var f=this;i=!0,r.setSliderHandleColor($(this),r.data.sliderSettings.activeColor),$(document).on("mouseup touchEnd",function M(){$(document).off("mouseup touchEnd",M),i&&(i=!1,r.setSliderHandleColor($(f),l?r.data.sliderSettings.handleBorderColor:r.data.sliderSettings.color))})}).on("mouseup touchend",function(){i=!1,r.setSliderHandleColor($(this),n?r.data.sliderSettings.hoverColor:l?r.data.sliderSettings.handleBorderColor:r.data.sliderSettings.color)})},a.prototype.updateInputControls=function(){var t,i,e=this;this.singleValue&&!this.data.filter&&(this.useModernDatePicker?this.startComponentRef.writeValue():this.start.val(""));var n={fontSize:Me.FP.fromPoint(this.data.inputStyle.textSize),fontFamily:this.data.inputStyle.fontFamily||It,fontWeight:this.data.inputStyle.labelBold?T.en:T.AI,fontStyle:this.data.inputStyle.labelItalic?T.BF:T.AI},r={"font-size":n.fontSize,"font-family":n.fontFamily,"font-weight":n.fontWeight,"font-style":n.fontStyle,"text-decoration":this.data.inputStyle.labelUnderline?T.f0:T.zu};this.start.parent().css(r),this.end.parent().css(r);var l={color:this.data.inputStyle.fontColor,"background-color":this.data.inputStyle.background?this.data.inputStyle.background:"","text-decoration":this.data.inputStyle.labelUnderline?T.f0:T.zu};this.start.css(l),this.end.css(l),this.startButton&&this.startButton.css(l),this.endButton&&this.endButton.css(l),this.useModernDatePicker&&this.startComponentRef&&this.endComponentRef&&(U.fF.assert(function(){return e.data.value.min instanceof Date},"Date required"),U.fF.assert(function(){return e.data.value.max instanceof Date},"Date required"),U.fF.assert(function(){return e.data.bounds.min instanceof Date},"Date required"),U.fF.assert(function(){return e.data.bounds.max instanceof Date},"Date required"),this.startComponentRef.updateDateRange(this.data.bounds.min,this.data.bounds.max),this.endComponentRef.updateDateRange(this.data.bounds.min,this.data.bounds.max),this.startComponentRef.writeValue(this.data.value.min),this.endComponentRef.writeValue(this.data.value.max),null===(t=this.startComponentRef.datePickerElement)||void 0===t||t.attr(Qe,"true"),null===(i=this.endComponentRef.datePickerElement)||void 0===i||i.attr(Qe,"true")),!this.isCategorySourceNumeric&&this.useModernDatePicker?(this.setInputWidth(this.start,n,this.data.value.min),this.setInputWidth(this.end,n,this.data.value.max)):(this.setInputWidth(this.start,n),this.setInputWidth(this.end,n))},a.prototype.setInputWidth=function(e,t,i){e.css("width","");var n=e.val();if(i&&i instanceof Date&&(n=se.dx.formatValue(i,"d")),n){var r=n.toString(),l=it.b.measureSvgTextWidth(t,r),f=parseFloat(e.css("padding-left"))+parseFloat(e.css("padding-right")),C=2*parseFloat(e.css("border-width"));l=Math.ceil(l+f+C),e.outerWidth(!1)<l&&e.css({width:l})}},a.prototype.disableInput=function(e,t,i){var n=(0,Be.WV)(t);n.A=.3,e.css({color:(0,Be.U8)(n)}),e.prop("disabled",!0),i&&(i.css({color:(0,Be.U8)(n)}),i.prop("disabled",!0))},a.prototype.enableInput=function(e,t){e.prop("disabled",!1),t?.prop("disabled",!1)},a.prototype.createSliderOptions=function(){var i,n,e=this.rangeSlicerRenderer.getSliderOptions(this.data,this.singleValue),t=this.range.getScaledValue();switch(this.activeMode){case w.bb:i=t.max,n=[!0,!1];break;case w.e4:i=t.min,n=[!1,!0];break;case w.vX:i=[t.min,t.max],n=!0;break;case w.Zr:i=_.indexOf(this.data.dataPoints,this.data.value.min),n=!1}return{connect:n,behaviour:"tap",range:{min:e.min===e.max?0:e.min,max:e.min===e.max?1:e.max},start:i,step:e.step}},a.prototype.parseSliderValue=function(e){if((this.data.isSourceInteger||this.singleValue)&&(e=_.map(e,function(i){return Math.round(i)})),this.singleValue)return this.rangeSlicerRenderer.parseSingleSliderValue(e[0],this.data.dataPoints);var t=this.range.getScaledValue();switch(this.activeMode){case w.bb:t.max=e[0];break;case w.e4:t.min=e[0];break;case w.vX:t.min=e[0],t.max=e[1]}return this.range.setScaledValue(t),this.range.getValue()},a.prototype.updateSlider=function(e){e===w.e4?(this.enableInput(this.start,this.startButton),this.disableInput(this.end,this.data.inputStyle.fontColor,this.endButton)):e===w.bb?(this.enableInput(this.end,this.endButton),this.disableInput(this.start,this.data.inputStyle.fontColor,this.startButton)):(this.enableInput(this.start,this.startButton),this.enableInput(this.end,this.endButton)),e===w.Zr?this.endContainer.hide():this.endContainer.show(),!this.data.sliderSettings.show||this.shouldHideSmallSlider()?this.sliderContainer.hide():(this.sliderContainer.show(),this.updateSliderControl()),this.sliderContainer.toggleClass(Ut.class,!!this.data.sliderSettings.drawRoundSliderHandles),this.container.find(ni.selector).toggleClass(oi.class,!!this.data.wrapRangeBoxes),this.rangeSlicerRenderer.areEqual(this.data.bounds.min,this.data.bounds.max)&&this.disableSlider()},a.prototype.updateMode=function(e){this.updateRangeSlicerState(e),this.updateProperties()},a.prototype.updateProperties=function(){var e=this.buildRangeSlicerProperties();if(this.requireToUpdate(e)){this.data.properties.filter=e.filter,this.data.properties.bounds=e.bounds;var t=this.createPersistProperties(e,this.data.identity,this.data.state);this.hostServices.persistProperties(t),this.hostServices.onSelect({type:0,visualObjects:[]})}},a.prototype.updateRangeSlicerState=function(e){var t=this.data.mode;null==e?e=this.defaultSliderMode:this.data.mode=e,e===w.bb?(t===w.e4&&1&this.data.state&&(this.data.value.max=this.data.value.min,this.data.value.min=this.data.bounds.min,this.data.state=2),this.data.state&=-2):e===w.e4&&(t===w.bb&&2&this.data.state&&(this.data.value.min=this.data.value.max,this.data.state=1),this.data.state&=-3)},a.prototype.getChangeType=function(e,t){var i=null;switch(e){case w.e4:case w.Zr:i=0;break;case w.bb:i=1;break;default:i=0===t?0:1}return i},a.prototype.createPersistProperties=function(e,t,i){var r=this.createFilter(e,e.mode??this.defaultSliderMode,i,t),l={merge:[{objectName:"general",selector:void 0,properties:{}}],replace:[{objectName:"data",selector:void 0,properties:{}}],remove:[{objectName:"data",selector:void 0,properties:{}},{objectName:"general",selector:void 0,properties:{}}]};return null!==r?l.merge[0].properties[h.gO.general.filter.propertyName]=r:l.remove[1].properties[h.gO.general.filter.propertyName]=!0,1&i&&null!==e.start?l.replace[0].properties[this.rangeSlicerRenderer.startProperty().propertyName]=e.start:null==e.start&&(l.remove[0].properties[this.rangeSlicerRenderer.startProperty().propertyName]=!0),2&i&&null!==e.end?l.replace[0].properties[this.rangeSlicerRenderer.endProperty().propertyName]=e.end:null==e.end&&(l.remove[0].properties[this.rangeSlicerRenderer.endProperty().propertyName]=!0),null!=e.mode&&(l.replace[0].properties[h.gO.data.mode.propertyName]=e.mode),l},a.prototype.updateRange=function(e,t){null==t?(this.data.value.min=e.min,this.data.value.max=e.max):0===t?(this.data.value.min=e.min,null===this.data.bounds.min||this.singleValue||!this.rangeSlicerRenderer.areEqual(this.data.value.min,this.data.bounds.min)||this.useModernDatePicker?this.data.state|=1:this.data.state&=-2):1===t&&(this.data.value.max=e.max,null!==this.data.bounds.max&&this.rangeSlicerRenderer.areEqual(this.data.value.max,this.data.bounds.max)&&!this.useModernDatePicker?this.data.state&=-3:this.data.state|=2),this.updateProperties()},a.prototype.createFilter=function(e,t,i,n){var r=null,f=null,C=this.rangeSlicerRenderer.filterExpr(e.filter);if(t===w.Zr)r=1&i?(0,de.qu)(0,n,C.lower):null;else{var M=this.rangeSlicerRenderer.comparisonKind();if(1&i&&2&i){var N=(0,de.qu)(M.lower,n,C.lower),k=(0,de.qu)(M.upper,n,C.upper);r=(0,de.xD)(N,k)}else 1&i?r=(0,de.qu)(M.lower,n,C.lower):2&i&&(r=(0,de.qu)(M.upper,n,C.upper))}return null!==r&&(f=Oe.yl.fromSQExpr(r)),f},a.prototype.requireToUpdate=function(e){return!(null===this.data.properties.filter&&0===this.data.state&&(e.mode===this.data.properties.mode||e.mode===this.defaultSliderMode&&null===this.data.properties.mode)||null!=this.data.properties.filter&&e.mode===this.data.properties.mode&&this.rangeSlicerRenderer.areEqual(e.start,this.data.properties.start)&&this.rangeSlicerRenderer.areEqual(e.end,this.data.properties.end)&&this.rangeSlicerRenderer.areEqual(e.filter.min,this.data.properties.filter.min)&&this.rangeSlicerRenderer.areEqual(e.filter.max,this.data.properties.filter.max)&&this.rangeSlicerRenderer.areEqual(e.bounds.min,this.data.properties.bounds.min)&&this.rangeSlicerRenderer.areEqual(e.bounds.max,this.data.properties.bounds.max))},a.prototype.shouldHideSmallSlider=function(){var e=this.data.sliderSettings;if((this.container.width()||0)<=e.minSliderVisibilityWidth)return!0;if(e.minSliderVisibilityHeight>0){var t=this.endContainer.position().top+this.endContainer.outerHeight();if(this.container.parent().outerHeight()-t<e.minSliderVisibilityHeight)return!0}return!1},a.prototype.updateAccessibilityAttributes=function(e,t,i){var f,C,n=e.value.min,r=e.value.max,l=this.rangeSlicerRenderer instanceof ht;switch(i){case w.bb:f=(C=this.hostServices.getLocalizedString(l?"End_Time":"End_Date"))+" "+this.getRangeText(e.bounds.min,e.bounds.max),this.addAccessibilityAttributesToSliderHandle(t,f,r),this.applyTooltip(t,C);break;case w.e4:f=(C=this.hostServices.getLocalizedString(l?"Start_Time":"Start_Date"))+" "+this.getRangeText(e.bounds.min,e.bounds.max),this.addAccessibilityAttributesToSliderHandle(t,f,n),this.applyTooltip(t,C);break;case w.vX:f=(C=this.hostServices.getLocalizedString(l?"Start_Time":"Start_Date"))+" "+this.getRangeText(e.bounds.min,e.value.max),this.addAccessibilityAttributesToSliderHandle(t.first(),f,n),this.applyTooltip(t.first(),C),f=(C=this.hostServices.getLocalizedString(l?"End_Time":"End_Date"))+" "+this.getRangeText(e.value.min,e.bounds.max),this.addAccessibilityAttributesToSliderHandle(t.last(),f,r),this.applyTooltip(t.last(),C)}t.attr("aria-label",e.sliderSettings.label)},a.prototype.addAccessibilityAttributesToSliderHandle=function(e,t,i){e.attr("aria-valuetext",this.rangeSlicerRenderer.formatValue(i,this.data.formatter)).attr("aria-description",t)},a.prototype.getRangeText=function(e,t){return se.dx.format(this.hostServices.getLocalizedString("Slicer_Range_Hint"),this.isCategorySourceNumeric?[e,t]:[se.dx.formatValue(e,"d"),se.dx.formatValue(t,"d")])},a}(),Ii=y(34021),Di=y(33024),Kt=y(67922),Ei=y(40550),p="slicer-header-pending-icon",g="slicer-header-pending-icon-path",le="slicer-header-selectmenu",Se="foregroundNeutralSecondary",Je='<svg width="17" height="16" viewBox="0 0 17 16" class='.concat(p,' xmlns="https://www.w3.org/2000/svg">\n        <path class=\'').concat(g,' OfficeIconColors_HighContrast\' d="M8.00781 0C12.4261 0 16.0078 3.58172 16.0078 8C16.0078 12.4183 12.4261\n        16 8.00781 16C3.58953 16 0.0078125 12.4183 0.0078125 8C0.0078125 3.58172 3.58953 0 8.00781 0ZM7.50781 3C7.23167 3 7.00781 3.22386\n        7.00781 3.5V8.5L7.01587 8.58988C7.0582 8.82312 7.26235 9 7.50781 9H10.5078L10.5977 8.99194C10.8309 8.94961 11.0078 8.74546 11.0078\n        8.5C11.0078 8.22386 10.784 8 10.5078 8H8.00781V3.5L7.99976 3.41012C7.95742 3.17688 7.75327 3 7.50781 3Z" /></svg>'),He=function(){function a(e,t,i,n){this.services=t,this.settings=e,this.style=i,this.originalData=this.data=a.DefaultData(this.style,e.text,this.services),this.featureSwitches=n,this.render()}return a.DefaultData=function(e,t,i){return{borderStyle:"solid",borderBottomWidth:1,show:!0,outlineStyle:Ei.$m.Nil,fontColor:ge.v.getThemeColor(e,"foregroundDark"),textSize:9,fontFamily:$e.Wn.regular.css,iconColor:ge.v.getThemeColor(e,Se),iconHoverColor:ge.v.getThemeColor(e,"foreground"),outlineColor:ge.v.getThemeColor(e,"foregroundNeutralSecondaryAlt2"),outlineWeight:1,searchEnabled:!1,background:null,showRestatement:!1,menu:{fontColor:ge.v.getThemeColor(e,Se)},warnings:new Ce.tb,text:t,labelBold:!1,labelItalic:!1,labelUnderline:!1,pendingChangesIcon:{show:!0,color:ge.v.getThemeColor(e,Se),transparency:0,position:"right",size:12,showTooltip:!0,tooltipText:"",tooltipLabel:i.localize("Not_Yet_Applied_With_Parentheses")}}},a.InFocusModeData=function(e,t,i){var n=a.DefaultData(e,t,i);return n.borderStyle="none",n.background=ge.v.getThemeColor(e,"foregroundNeutralLight"),n.textSize=Me.FP.toPoint(13),n.fontColor=ge.v.getThemeColor(e,"foregroundNeutralDark"),n.fontFamily=$e.Wn.regular.css,n},a.prototype.destroy=function(){this.selectMenu&&this.selectMenu.destroy()},a.prototype.enumerateObjectInstances=function(e){var t=this.originalData;if(t){if("header"===e.objectName){var i={selector:null,objectName:"header",properties:{text:t.text,show:t.show,fontColor:t.fontColor,background:t.background,textSize:t.textSize,fontFamily:t.fontFamily,bold:t.labelBold,italic:t.labelItalic,underline:t.labelUnderline,outlineColor:t.outlineColor,outlineWeight:t.outlineWeight},propertyInstanceKind:{text:3,fontColor:3,background:3}};return i.properties.outlineStyle=t.outlineStyle,this.settings.supportsRestatement&&(i.properties.showRestatement=t.showRestatement),[i]}if("general"===e.objectName)return[{selector:null,objectName:"general",properties:{outlineColor:t.outlineColor,outlineWeight:t.outlineWeight}}]}},a.prototype.getSlicerHeaderCard=function(e){var t=this,i=this.originalData;if(i){var n=h.gO.header,r=h.gO.pendingChangesIcon,l=new b.CQ(new b.lg("slicerHeader"),"Slicer_Header",[n.text,n.fontFamily,n.textSize,n.bold,n.italic,n.underline,n.fontColor,n.showRestatement,n.outlineStyle,h.gO.general.outlineColor,h.gO.general.outlineWeight,n.background,n.show,r.show,r.color,r.position,r.transparency,r.size,r.showTooltip,r.tooltipText,r.tooltipLabel],function(M){return e.getLocalizedString(M)}),C=(new b.UN).withFontFamily({descriptor:n.fontFamily,value:i.fontFamily}).withFontSizeProperties({descriptor:n.textSize,value:i.textSize}).withBold({descriptor:n.bold,value:i.labelBold}).withItalic({descriptor:n.italic,value:i.labelItalic}).withUnderline({descriptor:n.underline,value:i.labelUnderline}).build();return l.addTopLevelToggle("show",function(){return new b.bd({descriptor:n.show,value:i.show}).build()}).addGroup("text",function(M){M.withDisplayName("Text").addSimpleSlice("title",new b.fq({descriptor:(0,X.__assign)((0,X.__assign)({},n.text),{instanceKind:3}),value:i.text,placeholder:""}).build()).addCompositeSlice("fontselector","Font",C).addSimpleSlice("color",new b.BT({descriptor:(0,X.__assign)((0,X.__assign)({},n.fontColor),{instanceKind:3}),value:{value:i.fontColor}}).build()),t.settings.supportsRestatement&&M.addSimpleSlice("labelContents",new b.bd({descriptor:n.showRestatement,value:i.showRestatement}).build())}).addGroup("border",function(M){M.withDisplayName("Visual_Border").addSimpleSlice("border position",new b.oM({descriptor:n.outlineStyle,value:i.outlineStyle}).build(),function(N){return N.withCustomDisplayName("Visual_Border_Position")}).addSimpleSlice("color",new b.BT({descriptor:(0,X.__assign)((0,X.__assign)({},h.gO.general.outlineColor),{instanceKind:3}),value:{value:i.outlineColor}}).build(),function(N){return N.withCustomDisplayName("Generic_Color")}).addSimpleSlice("lineWidth",new b.JN({descriptor:h.gO.general.outlineWeight,value:i.outlineWeight,options:{minValue:{type:0,value:1},maxValue:{type:1,value:10}},localize:function(k){return e.getLocalizedString(k)}}).build(),function(N){return N.withCustomDisplayName("Visual_Line_Width")})}).addGroup("background",function(M){M.withDisplayName("Visual_Background").addSimpleSlice("color",new b.BT({descriptor:(0,X.__assign)((0,X.__assign)({},n.background),{instanceKind:3}),value:{value:i.background}}).build(),function(N){return N.withCustomDisplayName("Generic_Color")})}),this.featureSwitches.applyAllSlicersButton&&l.addGroup("pendingChangesIcon",function(M){M.withDisplayName("PendingIcon").addTopLevelToggle("show",function(){return new b.bd({descriptor:r.show,value:i.pendingChangesIcon.show}).build()}).addSimpleSlice("pendingIconColor",new b.BT({descriptor:r.color,value:{value:i.pendingChangesIcon.color}}).build()).addSimpleSlice("pendingIconTransparency",b.JN.getTransparencySliderBuilder({descriptor:r.transparency,value:i.pendingChangesIcon.transparency,localize:function(k){return e.getLocalizedString(k)}}).build()).addSimpleSlice("pendingIconPosition",new b.uY({descriptor:r.position,value:i.pendingChangesIcon.position,filterValues:[Kt.t$,Kt.F2]}).build()).addSimpleSlice("pendingIconSize",function(){return new b.mu({descriptor:r.size,value:i.pendingChangesIcon.size,options:{minValue:{type:0,value:1},maxValue:{type:1,value:999},unitSymbol:Di.e_}}).build()}).addSimpleSlice("pendingIconTooltip",function(){return new b.bd({descriptor:r.showTooltip,value:i.pendingChangesIcon.showTooltip}).build()}).addSimpleSlice("pendingIconTooltipText",function(){return new b.Jr({descriptor:r.tooltipText,placeholder:"Slicer_PendingChanges",value:i.pendingChangesIcon.tooltipText,localize:function(k){return e.getLocalizedString(k)}}).build()}).addSimpleSlice("pendingIconLabelText",function(){return new b.Jr({descriptor:r.tooltipLabel,placeholder:"  ",value:i.pendingChangesIcon.tooltipLabel,localize:function(k){return"  "===k?k:e.getLocalizedString(k)}}).build()})}),l.build()}},a.prototype.update=function(e,t){U.fF.assertValue(e,"Reader"),$.extend(this.settings,t),this.settings.enableInFocusRenderers&&this.settings.isInFocus?this.data=a.InFocusModeData(this.style,t.text,this.services):(this.originalData=a.converter(e,this.style,t.text,this.services),this.data=this.services.applySlicerHeaderChanges(this.originalData)),this.addSlicerHelperTooltip(),this.maintainSelectMenu(),this.updateTitle()},a.prototype.setFilterRestatement=function(e,t){this.settings.restatement=e,this.settings.supportsRestatement=t,this.updateTitleText()},a.converter=function(e,t,i,n){U.fF.assertValue(e,"Reader");var r=a.DefaultData(t,i,n),l=e.objects.getStaticObjects(),f=ge.v.create(t);if(l){var C=(0,qe.Zi)((0,d.RK)(l,"header"),{color:"fontColor",family:"fontFamily",size:"textSize"},f,t,"foregroundDark","title",{color:r.fontColor,family:r.fontFamily,size:et.B.createFromPt(r.textSize)});r.fontColor=C.color,r.fontFamily=C.family,r.textSize=C.size.pt,r.show=(0,d.NA)(l,h.gO.header.show,r.show),r.text=(0,d.NA)(l,h.gO.header.text,r.text),r.menu.fontColor=f.getColorForPropertyWithDefaultColor(l,h.gO.header.fontColor,r.menu.fontColor),r.background=f.getColorForPropertyWithDefaultColor(l,h.gO.header.background,r.background),r.outlineColor=f.getColorForPropertyWithDefaultColor(l,h.gO.general.outlineColor,r.outlineColor),r.outlineWeight=(0,d.NA)(l,h.gO.general.outlineWeight,r.outlineWeight),r.outlineStyle=(0,d.NA)(l,h.gO.header.outlineStyle,r.outlineStyle),r.searchEnabled=(0,d.NA)(l,h.gO.general.selfFilterEnabled,r.searchEnabled),r.showRestatement=(0,d.NA)(l,h.gO.header.showRestatement,r.showRestatement),r.labelBold=(0,d.NA)(l,h.gO.header.bold,r.labelBold),r.labelItalic=(0,d.NA)(l,h.gO.header.italic,r.labelItalic),r.labelUnderline=(0,d.NA)(l,h.gO.header.underline,r.labelUnderline),r.pendingChangesIcon.show=(0,d.NA)(l,h.gO.pendingChangesIcon.show,r.pendingChangesIcon.show),r.pendingChangesIcon.color=f.getColorForPropertyWithDefaultColor(l,h.gO.pendingChangesIcon.color,r.pendingChangesIcon.color),r.pendingChangesIcon.transparency=(0,d.NA)(l,h.gO.pendingChangesIcon.transparency,r.pendingChangesIcon.transparency),r.pendingChangesIcon.position=(0,d.NA)(l,h.gO.pendingChangesIcon.position,r.pendingChangesIcon.position),r.pendingChangesIcon.size=(0,d.NA)(l,h.gO.pendingChangesIcon.size,r.pendingChangesIcon.size),r.pendingChangesIcon.showTooltip=(0,d.NA)(l,h.gO.pendingChangesIcon.showTooltip,r.pendingChangesIcon.showTooltip),r.pendingChangesIcon.tooltipText=(0,d.NA)(l,h.gO.pendingChangesIcon.tooltipText,(0,Ge.HZ)(r.pendingChangesIcon.tooltipText)),r.pendingChangesIcon.tooltipLabel=(0,d.NA)(l,h.gO.pendingChangesIcon.tooltipLabel,r.pendingChangesIcon.tooltipLabel)}return r},a.prototype.render=function(){this.header=(0,J.hi)().addClass("slicer-header").appendTo(this.settings.host),this.addTitle(),this.addSlicerHelperTooltip(),this.maintainSelectMenu()},a.prototype.maintainSelectMenu=function(){if((!this.featureSwitches.updateFormattingPaneObjects||!this.featureSwitches.moveSlicerTypeSelection)&&(this.selectMenu||0===this.services.getViewMode()?this.updateSelectMenu():this.addSelectMenu(),this.selectMenuContainer)){var e=this.data;this.selectMenuContainer.find("span.ui-icon").css("color",this.data.iconColor).hover(function(){$(this).css("color",e.iconHoverColor)},function(){$(this).css("color",e.iconColor)})}},a.prototype.addSelectMenu=function(){var e=this,t=this.services.localize("Slicer_SelectMenu_Tooltip");this.selectMenuContainer=(0,J.hi)().addClass(le).toggleClass(z.hY.class,(0,z.Id)()).appendTo(this.title),this.applyTooltip(this.selectMenuContainer,t,this.services.onRenderTooltip);var i={onChange:function(r){e.settings.onChange&&e.settings.onChange(r)},container:this.selectMenuContainer,options:this.getSelectMenuOptions(),selectedValue:this.settings.selectedValue,className:"slicer-select-menu",disabled:2===this.settings.visibilityState,title:t};this.selectMenu=new Re.S(i),a.addHoverInOut(this.settings.hoverContainer,function(){0!==e.services.getViewMode()&&(e.selectMenuContainer.css("visibility","visible"),e.selectMenuContainer.css("display","flex"))},function(){e.settings.areControlButtonsAlwaysVisible||(_.isEmpty(e.data.text)?e.selectMenuContainer.css("visibility","hidden"):e.selectMenuContainer.css("display","none"))})},a.prototype.addSlicerHelperTooltip=function(){var e=this;if(this.featureSwitches.updateFormattingPaneObjects&&this.featureSwitches.moveSlicerTypeSelection)if(0!==this.services.getViewMode())if(this.selectMenuContainer)this.selectMenuContainer.show();else{var t=this.services.localize("Slicer_Helper_Tooltip");this.selectMenuContainer=(0,J.hi)().addClass(le).toggleClass(z.hY.class,(0,z.Id)()).appendTo(this.title),this.helperTooltipButton=(0,J.yP)().addClass("slicer-helper-tooltip-button").attr("aria-label",t).attr("role","button").attr("tabindex","0"),this.applyTooltip(this.helperTooltipButton,t,this.services.onRenderTooltip),this.helperTooltipButton.appendTo(this.selectMenuContainer);var i=this.data;this.helperButtonIcon=(0,J.yP)().addClass("ui-icon").css("color",this.data.iconColor).hover(function(){$(this).css("color",i.iconHoverColor)},function(){$(this).css("color",i.iconColor)}),this.helperButtonIcon.appendTo(this.helperTooltipButton),a.addHoverInOut(this.settings.hoverContainer,function(){0!==e.services.getViewMode()&&(e.selectMenuContainer.css("visibility","visible"),e.selectMenuContainer.css("display","flex"))},function(){e.settings.areControlButtonsAlwaysVisible||(_.isEmpty(e.data.text)?e.selectMenuContainer.css("visibility","hidden"):e.selectMenuContainer.css("display","none"))})}else this.selectMenuContainer&&this.selectMenuContainer.hide()},a.prototype.addPendingChangesIcon=function(){this.pendingChangesIcon=$(Je).addClass(p).appendTo(this.title)},a.prototype.addPendingChangesText=function(){this.pendingChangesText=(0,J.hi)().append(this.data.pendingChangesIcon.tooltipLabel).addClass("slicer-header-pending-text").appendTo(this.title)},a.prototype.updatePendingChangesIcon=function(){var e=this.data.pendingChangesIcon;e.show&&this.settings.hasUnappliedFilters&&this.featureSwitches.applyAllSlicersButton?(this.pendingChangesIcon.css("display","block"),this.pendingChangesText.css("display","block")):(this.pendingChangesIcon.css("display","none"),this.pendingChangesText.css("display","none")),this.pendingChangesIcon.css("opacity","".concat((0,Be.TD)(this.data.pendingChangesIcon.transparency)));var t=e.size.toString();this.pendingChangesIcon.attr("height","".concat(t)),this.pendingChangesIcon.attr("width","".concat(t)),this.pendingChangesIcon.attr("viewbox","0 0 ".concat(t," ").concat(t)),this.pendingChangesIcon.children(".".concat(g)).attr("fill",e.color),e.tooltipText&&this.applyTooltip(this.pendingChangesIcon,e.tooltipText,this.services.onRenderTooltip,e.showTooltip),this.pendingChangesText.text(e.tooltipLabel),e.tooltipLabel||this.pendingChangesText.css("display","none"),"left"===e.position?(this.pendingChangesIcon.css("order","1"),this.pendingChangesText.css("order","2"),this.textElement.css("order","3")):(this.pendingChangesText.css("order","1"),this.pendingChangesIcon.css("order","3"),this.textElement.css("order","2"))},a.prototype.addSpacer=function(){this.spacer=(0,J.hi)(),this.spacer.addClass("slicer-header-spacer").appendTo(this.title)},a.prototype.addTitle=function(){var e=this;this.title=(0,J.hi)(),this.title.addClass("slicer-header-title").appendTo(this.header);var t=this.services.localize("Slicer_Clear");this.clearButton=(0,J.yP)().addClass("slicer-header-clear").toggleClass(z.hY.class,(0,z.Id)()).attr("aria-label",t).attr("role","button").attr("tabindex","0").on("keydown",function(i){("Space"===i.key||"Enter"===i.key)&&e.settings.onClear&&(e.settings.onClear(),i.stopPropagation())}).appendTo(this.title),this.applyTooltip(this.clearButton,t,this.services.onRenderTooltip),this.clearButton.click(function(){e.settings.onClear&&e.settings.onClear()}),a.addHoverInOut(this.settings.hoverContainer,function(){e.settings.strictSingleSelect||(e.clearButton.css("visibility","visible"),e.clearButton.css("display","block"))},function(){e.settings.areControlButtonsAlwaysVisible||(_.isEmpty(e.data.text)?e.clearButton.css("visibility","hidden"):e.clearButton.css("display","none"))}),this.textElement=$("<h3></h3>").addClass("slicer-header-text").appendTo(this.title),this.addPendingChangesText(),this.addPendingChangesIcon(),this.addSpacer()},a.prototype.applyTooltip=function(e,t,i,n){void 0===n&&(n=!0);var r=null;if(!n)return r?.close(),void e.off("focus mouseenter blur mouseleave keydown");e.on("focus mouseenter",function(){r=i(e.get(0),t)}),e.on("blur mouseleave",function(){r?.close(),r=null}),e.on("keydown",function(l){null!==r&&"Escape"===l.key&&(l.stopPropagation(),l.preventDefault(),r.close(),r=null)})},a.prototype.updateTitle=function(){if(this.data.show){var e=Me.FP.fromPoint(this.data.textSize),t=!1;if(this.settings.areControlButtonsAlwaysVisible&&(this.settings.strictSingleSelect||(this.clearButton.css("visibility","visible"),this.clearButton.css("display","block")),0!==this.services.getViewMode()&&this.selectMenuContainer&&(this.selectMenuContainer.css("visibility","visible"),this.selectMenuContainer.css("display","flex"))),this.data.searchEnabled){var i=a.DefaultData(this.style,this.settings.text,this.services);t=this.data.outlineStyle===i.outlineStyle&&this.data.outlineWeight===i.outlineWeight&&this.data.outlineColor===i.outlineColor}this.title.show(),this.title.css({"border-style":t?"none":this.data.borderStyle,"border-color":this.data.outlineColor,"border-width":(0,Ii.$b)(this.data.outlineStyle,this.data.outlineWeight),"background-color":_.isEmpty(this.data.background)?"":this.data.background,"font-size":e}),this.clearButton.css({"font-size":e}),this.updateTextElementStyle(this.textElement),this.updateTextElementStyle(this.pendingChangesText),this.updateTitleText();var r=this.data;this.clearButton.css("color",this.data.iconColor).hover(function(){$(this).css("color",r.iconHoverColor)},function(){$(this).css("color",r.iconColor)}),this.updatePendingChangesIcon()}else this.title.hide()},a.prototype.updateTextElementStyle=function(e){e?.css({"font-size":Me.FP.fromPoint(this.data.textSize),"font-family":this.data.fontFamily,color:this.data.fontColor,"font-weight":this.data.labelBold?T.en:T.AI,"font-style":this.data.labelItalic?T.BF:T.AI,"text-decoration":this.data.labelUnderline?T.f0:T.zu})},a.prototype.updateTitleText=function(){var e=this.data.text;if(this.data.showRestatement&&this.settings.restatement){var t=this.services.localize("NamePattern_Colon");e=(0,ee.W)(t,e,this.settings.restatement)}this.textElement.text(e).attr("title",e).attr("aria-label",e)},a.prototype.updateSelectMenu=function(){this.selectMenu&&0===this.services.getViewMode()?this.selectMenuContainer.hide():this.selectMenu&&(this.selectMenuContainer.show(),this.selectMenu.update({options:this.getSelectMenuOptions(),selectedValue:this.settings.selectedValue,disabled:2===this.settings.visibilityState}))},a.prototype.getSelectMenuOptions=function(){for(var e=[],i=0,n=this.settings.slicerModeOptions;i<n.length;i++){var r=n[i],l=r.displayName({get:this.services.localize});e.push({text:l,value:r.value})}return e},a.prototype.addWarnings=function(e){(0,z.td)(this.data.warnings,e)},a.addHoverInOut=function(e,t,i){(0,z.Id)()&&e.hover(t,i)},a}(),$t=y(41640),Gt=function(){function a(){}return a.prototype.renderCore=function(e){e.classed(Qt.class,!0)},a.prototype.bindData=function(e,t,i){return this.renderColumns(e,i).selectAll(D.selector).data(function(r){return r},function(r){return(0,z.fz)(r)})},a.prototype.renderColumns=function(e,t){var i=this.numberOfRows,n=_.chunk(e,i),r=t.selectAll(Mt.selector).style("height",null).data(n).join(function(l){return l.append("div").classed(Mt.class,!0)});return this.scaleLastColumnIfNeeded(i,n,t),r},a.prototype.scaleLastColumnIfNeeded=function(e,t,i){if(t&&_.last(t)){var r=_.last(t).length;if(r<e){var l=i.select(Mt.selector+":last-child"),f=(0,$t.W0)(100*r/e,.01);l.style("height",f+"%")}}},a.prototype.findNextElement=function(e,t){return $(e).hasClass(lt.class)?t?e.firstElementChild.firstElementChild:e.lastElementChild.lastElementChild:t?!(n=e.nextElementSibling)&&(r=e.parentElement).nextElementSibling?r.nextElementSibling.firstElementChild:n:!(n=e.previousElementSibling)&&(r=e.parentElement).previousElementSibling?r.previousElementSibling.lastElementChild:n;var n,r},a.prototype.getScrollSize=function(e){return this.numberOfRows},a.prototype.getLastStartIndex=function(e,t){if(t<=e)return 0;var i=0,n=this.numberOfRows,r=t%n;return r>0&&(i=n-r),Math.max(t-e+i,0)},a.prototype.calculateTotalItemDimensions=function(e,t){return e=Math.max(e,a.MinItemWidth),t=Math.max(t,a.MinItemHeight),{width:e+=2*a.TabularMargin,height:t+=2*a.TabularMargin}},a.prototype.calculateNumberOfItemsToDisplay=function(e,t,i,n){var r=e.find(z.uT.selector),l=r.width()-2*a.NavigationArrowWidth,f=r.height();return this.calculateTableDimensions({height:f,width:l},{height:i,width:t},n)},a.prototype.calculateTableDimensions=function(e,t,i){var n=t.width,r=t.height,f=e.height;if(0===n)return 0;var C=Math.floor(e.width/n);this.numberOfRows=0===r?1:Math.floor(f/r),this.numberOfRows=Ge.b$.clampValue(this.numberOfRows,1,i);var M=Math.ceil(Math.sqrt(i));return C>=M&&this.numberOfRows>=M?this.numberOfRows=C=M:this.numberOfRows>=i&&C>1&&(this.numberOfRows=Math.ceil(this.numberOfRows/C)),Ge.b$.clampValue(this.numberOfRows*C,this.numberOfRows,i)},a.prototype.getNavigationArrowsClass=function(e,t){t?e.classed(_t.class,!0).classed(ut.class,!0).classed(Rt.class,!0).classed(pi.class,!0):e.classed(_t.class,!0).classed(ct.class,!0).classed(Rt.class,!0).classed(Ki.class,!0)},a.prototype.getDataPointRightMargin=function(e,t){return"0px"},a.MinItemWidth=40,a.MinItemHeight=40,a.TabularMargin=2,a.NavigationArrowWidth=19,a}(),Qt=(0,T.CH)("tabular"),Mt=(0,T.CH)("columnItemContainer"),Rt=(0,T.CH)("powervisuals-glyph"),_t=(0,T.CH)("tabularNavigationArrow"),pi=(0,T.CH)("left-nav-arrow"),Ki=(0,T.CH)("right-nav-arrow"),$i=y(57470),Ai=y(60066),Gi=y(97121),Pt=y(36265),zi=y(50550),Qi=y(88987),_i=y(10389),Xi=y(92129),Yi=y(45413),Vi=function(){function a(e,t,i){void 0===i&&(i=!0),this.lockKeyboardNavigation=i,this.hasSearchableData=!1,this.scrollPositionStack=[],this.defaultMinWidth=50,this.shouldResetScrollPosition=!1,this.isCollapse=!1,this.expandable=!1,this.pendingFocusCall=!1,this.focusCallback=null,this.verticalSlicerStrategy=e,this.behavior=new o.wV,this.domHelper=new z.gy,this.hostServices=t.hostServices,t&&(this.featureSwitches=t.featureSwitches),this.factory=(0,Qi.p)(),this.searchComponent=new x.v(this.hostServices)}return a.prototype.hasSlider=function(){return!1},a.prototype.supportsOrientation=function(){return!this.dataView||!this.data||_.isEmpty(this.data.queryNameByLevel)||1===this.data.queryNameByLevel.length},a.prototype.enumerateObjectInstances=function(e){return(0,z.qo)(e,this.data,this.settings,this.dataView,this.featureSwitches)},a.prototype.getValuesCard=function(){return(0,z.s9)(this.hostServices,this.data,this.settings,this.featureSwitches)},a.prototype.getSlicerSettingsCardOptions=function(e,t,i,n){return(0,z.nD)({cardUidBuilder:e,currentSlicerSettings:this.settings,data:this.data,dataView:this.dataView,hostServices:this.hostServices,orientation:t,activeMode:i,slicerModes:n,featureSwitches:this.featureSwitches})},a.prototype.getAdditionalCards=function(){return(0,z.oE)(this.hostServices,this.data,this.settings,this.dataView)},a.prototype.onModeChange=function(e){(0,z.VD)(this.hostServices,e)},a.prototype.onDataViewObjectChanged=function(e,t){var i=(0,z.tm)(e,t);return U.fF.assertNonEmpty(i,"There should be at least one save object"),i},a.prototype.getRestatement=function(){return this.data&&this.data.restatement},a.prototype.onClear=function(e){(0,z.dq)(this.selectionHandler),(0,z.K5)(this.selectionHandler,e),this.searchComponent&&(this.searchComponent.input.node().value="")},a.prototype.init=function(e,t){var i=this;this.element=t,this.currentViewport=e.visualInitOptions.viewport;var r,n=this.hostServices=e.visualInitOptions.host;this.style=e.visualInitOptions.style,this.settings=(0,te.VT)(this.style),this.behavior&&(r=new s.N(n,this.behavior));var l=document.createElement("div");l.className=sr.class;var f=this.container=d3.select(l);return this.searchComponent.create(f),this.verticalSlicerStrategy.hasClearSearchButton()&&this.searchComponent.addClearButton(),this.createBodyElement(),this.listView=(0,Gi.P)({rowHeight:void 0,enter:function(K){i.createDataPoints(K)},update:function(K){i.updateDataPoints(K,r)},loadMoreData:function(){return e.loadMoreData()},scrollEnabled:!0,viewport:this.currentViewport,baseContainer:this.body,isReadMode:function(){return 1!==i.hostServices.getViewMode()},scrollToFrame:e.enableMultiElementRows?function(k){return i.scrollToFrameForMultiElementRow(k)}:void 0}),this.element.get(0).appendChild(l),this.selectionHandler=r,r},a.prototype.onDestroy=function(){this.listView&&this.listView.destroy()},a.prototype.render=function(e){this.renderVerticalSlicer(this.converter(e.dataView,e.isSlicer),e)},a.prototype.renderVerticalSlicer=function(e,t,i){this.focusCallback&&($i.M.contains(this.container.node(),document.activeElement)||(this.focusCallback=void 0,this.listView&&this.listView.resetCallBacks())),this.currentViewport=t.viewport,this.hasSearchableData=t.hasSearchableData;var n=t.dataView,r=x.v.fromSlicerSettings(this.settings,e?.searchKey,this.verticalSlicerStrategy.shouldShowSearchHeader(this.settings,this.hasSearchableData),this.verticalSlicerStrategy.hasClearSearchButton(),this.featureSwitches);if(this.searchComponent.update(r),this.container.node().querySelector("input.searchInput")===document.activeElement&&t.isSearchMode&&this.announceSearchResults(e.slicerDataPoints.length),this.body.select(Li.selector).remove(),n&&this.data&&!_.isEmpty(this.data.slicerDataPoints))this.expandable=this.data.queryNameByLevel.length>1,this.setBodyRole(),this.setBodyAriaLabel(),this.updateSelectionStyle(),this.listView.viewport(this.currentViewport).data(this.data.slicerDataPoints,function(M){return(0,z.fz)(M)},t.resetScrollbarPosition&&this.shouldResetScrollPosition,i);else{if(this.listView&&(this.listView.empty(),this.verticalSlicerStrategy.shouldShowSearchHeader(this.settings,this.hasSearchableData))){var C=this.body.insert("p",".scroll-wrapper").classed(Li.class,!0).text(this.hostServices.getLocalizedString("ContentList_EmptySearchResults"));this.domHelper.setSlicerTextStyle(C,this.settings,this.featureSwitches)}i&&i()}},a.prototype.converter=function(e,t){void 0===t&&(t=!1);var i=this.hostServices.getLocalizedString(z.vx),n=(0,te.OQ)({dataView:e,localizedSelectAllText:i,selectionHandler:this.selectionHandler,hostServices:this.hostServices,style:this.style,isSlicer:t,featureSwitches:this.featureSwitches,slicerType:0});return this.shouldResetScrollPosition=this.getShouldResetScrollPosition(e,n),this.data=n,this.isCollapse=!1,e&&this.data&&(this.settings=n.slicerSettings,this.dataView=e),n},a.prototype.hasSearchEnabled=function(){return this.verticalSlicerStrategy.shouldShowSearchHeader(this.settings,this.hasSearchableData)},a.prototype.updateSelectionStyle=function(){var e=this.settings;this.container.classed("isMultiSelectEnabled",e&&e.selection&&!e.selection.singleSelect)},a.prototype.createDataPoints=function(e){var t=this,i=this,n=this.settings,r=e.append("div").classed(Ti.class,!0),l=r.append("div").classed(fi.class,!0).attr("aria-hidden",!0);this.verticalSlicerStrategy.customizeInputElement(l,n);var f=this.selectionHandler.isSelectionModeInverted();r.on("contextmenu",function(M,N){d3.event.stopPropagation(),d3.event.preventDefault(),t.onContextMenu(M,{x:d3.event.clientX,y:d3.event.clientY})}),r.call(a.updateTabIndex);var C=this.getOptionRole();r.each(function(M,N){var k=this,K=d3.select(this);this.addEventListener("keydown",function(j){var q=K.data();if(!_.isEmpty(q)){var ne=q[0],Ve=function(Vt){j.preventDefault(),j.stopPropagation(),Vt()};if(39===j.keyCode&&!0===ne.isCollapsed||37===j.keyCode&&!1===ne.isCollapsed){var Le=document.activeElement;j.stopPropagation(),i.expandCollapseNode(ne),Ve(function(){return(0,X.__awaiter)(k,void 0,void 0,function(){return(0,X.__generator)(this,function(Ue){return[2,i.focusRowAtIndex(Le,i.getCurrentRowDataIndex(Le),!1,!1,!1,!1,!1,!0)]})})})}else 39===j.keyCode&&ne.children?Ve(function(){return(0,X.__awaiter)(k,void 0,void 0,function(){return(0,X.__generator)(this,function(Ue){return[2,i.focusRowAtIndex(document.activeElement,ne.children[0].index,!1,!0,!1,!1,!0,!1)]})})}):37===j.keyCode&&ne.parent?Ve(function(){return(0,X.__awaiter)(k,void 0,void 0,function(){return(0,X.__generator)(this,function(Ue){return[2,i.focusRowAtIndex(document.activeElement,ne.parent.index,!1,!1,!0,!1,!0,!1)]})})}):39===j.keyCode||37===j.keyCode?j.stopPropagation():56===j.keyCode&&(j.stopPropagation(),i.expandCollapseAllNodesOnSameLevel(ne))}}),i.updateItemState(K,M),i.setAccessibilityAttributes(M,K,C,f),K.attr("data-row-index",M.index).attr("data-row-id",M.id),null!=M.count&&K.append("span").classed(z.HR.class,!0).styles({"font-size":Me.FP.fromPoint(n.slicerText.textSize),"font-family":n.slicerText.fontFamily})})},a.prototype.getUnusedAriaStatus=function(){return"aria-selected"},a.prototype.setAccessibilityAttributes=function(e,t,i,n){t.attr("role",i.role).attr(i.selected,(0,z.OO)(e,n)).attr("aria-setsize",e.levelCount||-1).attr("title",(0,z.rX)(this.hostServices,e.tooltip)).attr("aria-posinset",e.levelIndex?e.levelIndex:1)},a.updateTabIndex=function(e){var t,i=!1;e.each(function(n,r){var l=d3.select(this);0===r&&(t=l),i||"0"!==l.attr("tabindex")?i&&"0"===l.attr("tabindex")&&l.attr("tabindex",null):i=!0}),t&&!i&&t.attr("tabindex","0")},a.prototype.updateItemType=function(e,t){var i=e.select(z.Iy.selector),n=e.select(z.NV.selector);if(t.isImage)return n.remove(),i.empty()&&(i=e.append("img").classed(z.Iy.class,!0)),i.attr("src",t.value),void i.attr("role","none");n.empty()&&(i.remove(),n.empty()&&(n=e.append("span").classed(z.NV.class,!0))),n.text(t.value)},a.prototype.getOptionRole=function(){return{role:this.expandable?"treeitem":"option",selected:"aria-selected"}},a.prototype.updateDataPoints=function(e,t){var i=this.settings,n=this.data;if(n&&i){var r=this.domHelper,l=this.selectionHandler.isSelectionModeInverted();e.select(Ti.selector),e.select(fi.selector),e.select(Fi.selector),this.verticalSlicerStrategy.updateInputElement(e.selectAll(fi.selector),i);var f=e.selectAll(z.HR.selector);if(!f.empty()&&this.verticalSlicerStrategy.shouldShowCount()&&(e.select(or.selector),f.text(function(Ve){return Ve.count}),r.setSlicerTextStyle(f,i,this.featureSwitches)),t&&this.body){var C=this,M=this.body.attr("width",this.currentViewport.width),N=this.getOptionRole(),k=this.body.selectAll(Ti.selector);k.each(function(Ve,Le){var Ue=d3.select(this);C.updateItemState(Ue,Ve),Ue.node().hasAttribute("role")&&Ue.attr(C.getUnusedAriaStatus(),null),C.setAccessibilityAttributes(Ve,Ue,N,l),null!=i.items.padding&&(Ue.style("padding-top","".concat(i.items.padding,"px")),Ue.style("padding-bottom","".concat(i.items.padding,"px")))});var K=e.selectAll(z.NV.selector);this.verticalSlicerStrategy.setLabelTextStyle(r,K,i,this.style,this.featureSwitches),a.updateTabIndex(k);var j=M.selectAll(fi.selector);t.bind(n.retainedDataPoints,{behaviorOptions:{slicerContainer:this.container,itemContainers:k,itemInputs:j,settings:n.slicerSettings,searchInput:this.searchComponent.input,clearSearchTextButton:this.searchComponent.clear,style:this.style},orientation:he.i.Vertical})}this.behavior.renderSelection()}},a.prototype.announceSearchResults=function(e){var t;t=0===e?this.hostServices.getLocalizedString("ContentList_EmptySearchResults"):1===e?this.hostServices.getLocalizedString("Count_SearchBox_Result_One"):this.hostServices.getLocalizedString("Count_SearchBox_Results").replace("{0}",e.toString()),this.hostServices.alertWithDebounce("announce-search",t)},a.prototype.getExpandParameters=function(e){U.fF.assert(function(){return void 0!==e.isCollapsed},".expandCollapseNode should not be called with un-expandable node"),this.isCollapse=!1===e.isCollapsed;var t=(0,z.No)(e,this.data.queryNameByLevel);return{dataRoles:[h.CT.value],data:t.selector,isCollapse:!e.isCollapsed,nodeIndex:t.path}},a.prototype.expandCollapseNode=function(e){var t=this.getExpandParameters(e);this.hostServices.setNodeExpansionState({dataRoles:t.dataRoles,data:t.data,isCollapse:t.isCollapse,nodeIndex:t.nodeIndex})},a.prototype.expandCollapseAllNodesOnSameLevel=function(e){var t=this.getExpandParameters(e);this.hostServices.setLevelExpansionState({dataRoles:t.dataRoles,data:t.data,isCollapse:t.isCollapse,nodeIndex:t.nodeIndex})},a.prototype.onContextMenu=function(e,t){var i=(0,z.No)(e,this.data.queryNameByLevel),r={nodeIndex:i.path,dataRoles:[h.CT.value],position:{x:d3.event.clientX,y:d3.event.clientY},data:[i.selector]};this.hostServices.onContextMenu(r)},a.prototype.getShouldResetScrollPosition=function(e,t){if(!this.dataView||!this.data||!e||!t||this.isCollapse)return!1;if(1===this.data.queryNameByLevel.length)return!(0,Xi.ih)(e,this.dataView);if((0,zi.s_)(this.data.queryNameByLevel,t.queryNameByLevel,function(l,f){return l===f})){if(!_.isEmpty(this.data.slicerDataPoints)&&!_.isEmpty(t.slicerDataPoints)&&this.data.slicerDataPoints.length>t.slicerDataPoints.length&&!this.isCollapse){var i=this.listView.getFirstVisibleRow();return!i||void 0!==i.levelIndex&&!_.some(t.slicerDataPoints,function(l){return l.identity.equals(i.identity)})}return!1}if(this.dataView.matrix&&this.dataView.matrix.rows&&e.matrix&&e.matrix.rows){var n=_.map(this.dataView.matrix.rows.levels,function(l){return l.sources[0].expr}),r=_.map(e.matrix.rows.levels,function(l){return l.sources[0].expr});return!(0,zi.s_)(n,r,Yi.fS)}return!0},a.prototype.updateExpansionState=function(e,t){var i=0;t.level>0&&(i=t.level*Me.FP.fromPointToPixel(this.data.slicerSettings.expandCollapse.indentation)),e.styles({"margin-left":"".concat(i,"px")}),this.updateExpandButton(e,t)},a.prototype.updateExpandButton=function(e,t){var i=e.select(Fi.selector);this.expandable&&(i.empty()&&(i=this.createExpandButton(e)),e.attr("aria-expanded",void 0===t.isCollapsed?null:!t.isCollapsed),void 0!==t.level&&e.attr("aria-level",t.level+1));var r=Me.FP.fromPoint(this.data.slicerSettings.slicerText.textSize);if(i.styles({"font-size":r,width:r}),i.attr("aria-hidden","true"),void 0!==t.isCollapsed){var l=this.data.slicerSettings.expandCollapse.toggleType;i.classed(Hi.class,!1),i.selectAll(".glyphicon").classed("pbi-glyph-chevrondownsmall",t.isCollapsed&&l===Pt.H.Chevron).classed("pbi-glyph-chevronupsmall",!t.isCollapsed&&l===Pt.H.Chevron).classed("pbi-glyph-explore-content-single",t.isCollapsed&&l===Pt.H.PlusMinus).classed("pbi-glyph-collapse-content-single",!t.isCollapsed&&l===Pt.H.PlusMinus).classed("pbi-glyph-caretright",t.isCollapsed&&l===Pt.H.Caret).classed("pbi-glyph-caretdownright",!t.isCollapsed&&l===Pt.H.Caret)}else this.expandable||i.empty()?i.classed(Hi.class,!0):i.remove()},a.prototype.createExpandButton=function(e){var t=this,i=e.insert("div",":first-child").classed(Fi.class,!0).on("click",function(n){d3.event.stopPropagation(),t.expandCollapseNode(n)});return i.append("i").classed("glyphicon",!0),i},a.prototype.scrollToFrameForMultiElementRow=function(e){var t=e.listView,i=e.loadMoreData,n=e.rowHeight,r=e.scrollTop,l=e.totalRows,f=e.visibleGroupContainer,C=e.baseContainer,M=0===r?0:Math.floor(r/n);if(!(this.currentRowPosition&&M===this.currentRowPosition||M<0)){var N=(0,_i.O7)(0,M*n);f.styles({transform:function(j){return N},"-webkit-transform":N});var k=f.selectAll(".row").filter(function(){return""!==this.textContent});return void 0===this.currentRowPosition?(this.currentPosition=this.getInitialPosition(l,C),k&&k.node()&&(this.currentRowPosition=M)):(this.updateCurrentPosition(M,l,C,f,k),this.currentRowPosition=M),t.performScrollToFrame(this.currentPosition.startIndex,this.currentPosition.endIndex,l,this.currentPosition.endIndex-this.currentPosition.startIndex,i)}},a.prototype.getInitialPosition=function(e,t){var i=e,n=Math.ceil($(t.node()).outerHeight()/this.listView.getRowHeight())*Math.floor($(t.node()).outerWidth()/this.defaultMinWidth);return n>0&&(i=Math.min(e,n)),{startIndex:0,endIndex:i}},a.prototype.updateCurrentPosition=function(e,t,i,n,r){var l=Math.abs(e-this.currentRowPosition);if(e===this.currentRowPosition)this.currentPosition=this.scrollPositionStack.pop()||this.getInitialPosition(t,i);else if(e<this.currentRowPosition)for(;l>0;)this.currentPosition=this.scrollPositionStack.pop()||this.currentPosition,l--;else for(;l>0;){var f=Math.ceil($(i.node()).outerHeight()/$(r.node()).outerHeight());if(this.currentPosition.startIndex>=t-1)return;this.scrollPositionStack.push(this.currentPosition);var C=this.getElementsPerRow(n,f,r),M=this.currentPosition.startIndex+C[0];this.currentPosition={startIndex:M,endIndex:Math.min(t,M+_.sum(C)+this.getMaxElementsInRow(n,r))},l--}},a.prototype.getElementsPerRow=function(e,t,i){for(var n=[],r=i.node(),l=0;l<t&&null!==r;l++){n.push(0);for(var f=$(r).position().top;null!==r&&$(r).position().top<=f+5;)n[l]++,r=r.nextElementSibling}return n},a.prototype.getMaxElementsInRow=function(e,t){var i=t.node().getAttribute("min-width");return i?$(e.node()).outerWidth()/+i:Math.floor($(e.node()).outerWidth()/this.defaultMinWidth)},a.prototype.createBodyElement=function(){var e=this;this.body=this.container.append("div").classed(z.uT.class,!0);var t=this.searchComponent.input.node();this.body.on("wheel",function(){e.focusCallback=void 0,e.listView.resetCallBacks(),e.listView.onScroll()}),t.addEventListener("keydown",function(i){40===i.keyCode?(e.searchBarFocusNextElement(),i.preventDefault(),i.stopPropagation()):70===i.keyCode&&i.ctrlKey&&(e.searchBarFocusNextElement(),e.enableSearch(),i.preventDefault(),i.stopPropagation())}),this.body.on("keydown",function(){var i=d3.event,n=function(K){i.preventDefault(),i.stopPropagation(),e.pendingFocusCall||K()};if(40===i.keyCode){var r=document.activeElement,l=i.shiftKey;n(function(){return(0,X.__awaiter)(e,void 0,void 0,function(){return(0,X.__generator)(this,function(k){return[2,this.focusRowAtIndex(r,this.getCurrentRowDataIndex(document.activeElement)+2,!1,!0,!0,l,!1,!1)]})})})}else if(38===i.keyCode){var f=document.activeElement,C=i.shiftKey;e.settings.search.enabled&&0===e.getCurrentRowDataIndex(f)||e.settings.search.enabled&&1===e.getCurrentRowDataIndex(f)&&!e.settings.selection.selectAllCheckboxEnabled?(e.focusForJumpRow(t),n(function(){return(0,X.__awaiter)(e,void 0,void 0,function(){return(0,X.__generator)(this,function(k){return[2]})})})):n(function(){return(0,X.__awaiter)(e,void 0,void 0,function(){return(0,X.__generator)(this,function(k){return[2,this.focusRowAtIndex(f,this.getCurrentRowDataIndex(document.activeElement)-3,!1,!1,!0,C,!1,!1)]})})})}else if(9===i.keyCode)e.lockKeyboardNavigation&&e.body.node().focus();else if(35===i.keyCode)n(function(){return(0,X.__awaiter)(e,void 0,void 0,function(){return(0,X.__generator)(this,function(k){return[2,this.focusRowAtIndex(document.activeElement,this.data.slicerDataPoints.length,!1,!0,!1,!1,!1,!1)]})})});else if(36===i.keyCode)n(function(){return(0,X.__awaiter)(e,void 0,void 0,function(){return(0,X.__generator)(this,function(k){return[2,this.focusRowAtIndex(document.activeElement,1,!1,!1,!1,!1,!1,!1)]})})});else if(34===i.keyCode){var M=document.activeElement;n(function(){return(0,X.__awaiter)(e,void 0,void 0,function(){return(0,X.__generator)(this,function(k){return[2,this.focusRowAtIndex(M,this.getCurrentRowDataIndex(document.activeElement)+this.getRowsPerPage(),!0,!0,!1,!1,!1,!1)]})})})}else if(33===i.keyCode){var N=document.activeElement;n(function(){return(0,X.__awaiter)(e,void 0,void 0,function(){return(0,X.__generator)(this,function(k){return[2,this.focusRowAtIndex(N,Math.max(this.getCurrentRowDataIndex(document.activeElement)-this.getRowsPerPage(),1),!1,!1,!1,!1,!1,!1)]})})})}else 70===i.keyCode&&i.ctrlKey&&n(function(){return(0,X.__awaiter)(e,void 0,void 0,function(){return(0,X.__generator)(this,function(k){return[2,this.enableSearch()]})})})})},a.prototype.setBodyRole=function(){this.body.attr("role",this.expandable?"tree":"listbox"),this.body.attr("aria-multiselectable",!(this.data&&this.data.slicerSettings.selection.strictSingleSelect))},a.prototype.setBodyAriaLabel=function(){this.body.attr("aria-label",this.data.categorySourceName)},a.prototype.enableSearch=function(){var e;if(this.settings.search){this.settings.search.enabled=!this.settings.search.enabled;var t=x.v.fromSlicerSettings(this.settings,null===(e=this.data)||void 0===e?void 0:e.searchKey,this.verticalSlicerStrategy.shouldShowSearchHeader(this.settings,this.hasSearchableData),this.verticalSlicerStrategy.hasClearSearchButton(),this.featureSwitches);this.searchComponent.update(t)}},a.prototype.focusRowAtIndex=function(e,t,i,n,r,l,f,C){var M=this,N=this.factory.defer(),k=e.getAttribute("data-row-id"),K=d3.event;return this.focusCallback=void 0,this.listView.resetCallBacks(),this.pendingFocusCall?N.resolve(1):(this.pendingFocusCall=!0,this.focusCallback=function(){var j,q,ne=$(M.container.node()).find(".visibleGroup").get(0),Ve=$(ne).find("[data-row-id='"+k+"']").get(0);if(Ve?q=(e=Ve).parentElement:j=void 0,e&&M.removeFocusForJumpRow(e),C)e?M.focusForJumpRow(e):n||q.previousElementSibling||e.addEventListener("blur",function Vt(){M.focusForJumpRow(e),e.removeEventListener("blur",Vt)});else if(r||f||!ne?r&&!f&&q?!j&&n&&q.nextElementSibling?j=q.nextElementSibling.firstElementChild:!j&&!n&&q.previousElementSibling&&(j=q.previousElementSibling.firstElementChild):f&&ne&&(n?(j=M.selectItemFromRowId(d3.select(e).data()[0].children[0].id,ne),j=M.adjustBottomRowToInViewRow(j,ne)):(j=M.selectItemFromRowId(d3.select(e).data()[0].parent.id,ne),j=M.adjustTopRowToInViewRow(j,ne))):!j&&n?j=M.adjustBottomRowToInViewRow(j=ne.lastElementChild.firstElementChild,ne):!j&&!n&&(j=M.adjustTopRowToInViewRow(j=ne.firstElementChild.firstElementChild,ne)),j){if(M.focusForJumpRow(j),l&&M.pendingFocusCall){var Le=M.settings;Le.selection.singleSelect=Le.selection.strictSingleSelect,o.wV.toggleItemSelectionFromExternal(K,d3.select(j).data()[0],M.selectionHandler,Le),M.setAccessibilityAttributes(d3.select(j).data()[0],d3.select(j),M.getOptionRole(),M.selectionHandler.isSelectionModeInverted())}}else e&&M.focusForJumpRow(e);M.pendingFocusCall=!1,N.resolve(0)},this.listView.scrollRowIntoView(t-1,this.focusCallback)),N.promise},a.prototype.getCurrentRowDataIndex=function(e){if(e){var t=d3.select(e).data()[0];if(t)return t.index}return 1},a.prototype.adjustBottomRowToInViewRow=function(e,t){return e.getBoundingClientRect().y+e.getBoundingClientRect().height>this.container.node().getBoundingClientRect().y+this.container.node().getBoundingClientRect().height&&(e=t.lastElementChild.previousElementSibling.firstElementChild),e},a.prototype.adjustTopRowToInViewRow=function(e,t){return e.getBoundingClientRect().y<=t.getBoundingClientRect().y&&this.listView.canScrollTop()&&(e=t.firstElementChild.nextElementSibling.firstElementChild),e},a.prototype.getRowsPerPage=function(){return this.listView.getVisibleRowsWithoutPadding()},a.prototype.selectItemFromRowId=function(e,t){return d3.select(t).select("[data-row-id='"+e+"']").node()},a.prototype.searchBarFocusNextElement=function(){var e=$(this.container.node()).find(".visibleGroup").get(0);this.focusForJumpRow(e.firstElementChild.firstElementChild)},a.prototype.focusForJumpRow=function(e){e.setAttribute("tabindex","0"),e.setAttribute("focusable","true"),e.classList.add(Ai.Pg),St.M.focus(e,{preventScroll:!0})},a.prototype.removeFocusForJumpRow=function(e){e.setAttribute("tabindex","-1"),e.removeAttribute("focusable"),e.classList.remove(Ai.Pg)},a.prototype.updateItemState=function(e,t){this.updateExpansionState(e,t),this.updateItemType(e,t),(0,z.hx)(e,t)},a}(),Bi=function(){function a(){}return a.prototype.canShowSearchHeader=function(e,t){return!!t},a.prototype.hasClearSearchButton=function(){return!1},a.prototype.setLabelTextStyle=function(e,t,i,n,r){e.setSlicerTextStyle(t,i,r)},a.prototype.shouldShowSearchHeader=function(e,t){return this.strictSingleSelect=e.selection.strictSingleSelect,e.search.enabled&&this.canShowSearchHeader(e,t)},a.prototype.shouldShowCount=function(){return!0},a.prototype.updateInputElement=function(e,t){e.selectAll("span").style("font-size",Me.FP.fromPoint(t.slicerText.textSize)).classed(this.strictSingleSelect?"radiobutton":"checkbox",!0).classed(this.strictSingleSelect?"checkbox":"radiobutton",!1)},a.prototype.customizeInputElement=function(e,t){e.append("span").style("font-size",Me.FP.fromPoint(t.slicerText.textSize)).classed("glyphicon",!0).classed(this.strictSingleSelect?"radiobutton":"checkbox",!0).classed(t.items.accessibilityContrastProperties?"checkboxOutlineContrast":"checkboxOutline",!0)},a}(),ar=$e.Wn.regular.css,nr=function(){function a(){}return a.prototype.hasClearSearchButton=function(){return!0},a.prototype.setLabelTextStyle=function(e,t,i,n,r){var l=(0,te.VT)(n);l.slicerText.textSize=Me.FP.toPoint(13),l.slicerText.fontFamily=ar,l.slicerText.color=ge.v.getThemeColor(n,mt.fA),e.setSlicerTextStyle(t,l,r)},a.prototype.canShowSearchHeader=function(e,t){return e.search.enabled||t},a.prototype.shouldShowSearchHeader=function(e,t){return this.canShowSearchHeader(e,t)},a.prototype.updateInputElement=function(e){},a.prototype.shouldShowCount=function(){return!1},a.prototype.customizeInputElement=function(e){e.append("span").classed("powervisuals-glyph checkmark",!0)},a}(),sr=(0,T.CH)("slicerContainer"),Ti=(0,T.CH)("slicerItemContainer"),fi=(0,T.CH)("slicerCheckbox"),Fi=(0,T.CH)("expandButton"),Hi=(0,T.CH)("hidden"),or=(0,T.CH)("slicerCountText"),Li=(0,T.CH)("slicerEmptyResult"),vt=y(30053),Xt=y(39681),lr=function(){function a(){}return a.prototype.applyChanges=function(e,t,i){var n=t;return vt.a.shouldApplyResponsiveChanges(i,h.gO)&&(n=this.applyResponsiveSlicerChanges(e,n),this.updateWarnings(n,t)),n},a.prototype.applyResponsiveSlicerChanges=function(e,t){var i=(0,Xt.ED)(t);return this.applyFontSizeChanges(e,i),i},a.prototype.applyFontSizeChanges=function(e,t){var i=(0,G.Cd)(e,G.$O.horizontalSlicer.fontSize);t.slicerSettings.slicerText.textSize>i&&(t.slicerSettings=(0,Xt.ED)(t.slicerSettings),t.slicerSettings.slicerText=(0,Xt.ED)(t.slicerSettings.slicerText),t.slicerSettings.slicerText.textSize=i)},a.prototype.updateWarnings=function(e,t){if(e.slicerSettings.slicerText.textSize!==t.slicerSettings.slicerText.textSize){var i=new Ce.Yx;e.warnings.addForVisualObject("items",{selector:null,warnings:[i]})}},a}(),ki=function(){function a(){}return a.prototype.applyChanges=function(e,t,i){return vt.a.shouldApplyResponsiveChanges(i,h.gO)&&(t=this.applyResponsiveRangeSlicerChanges(e,t)),t},a.prototype.applyResponsiveRangeSlicerChanges=function(e,t){var i=(0,Xt.ED)(t);return this.applyRangeSlicerDataChanges(i),this.applySliderChanges(i),i},a.prototype.applySliderChanges=function(e){e.sliderSettings=(0,Xt.ED)(e.sliderSettings),e.sliderSettings.drawRoundSliderHandles=!0,e.sliderSettings.minSliderVisibilityHeight=a.MinSliderVisibilityHeight,e.sliderSettings.minSliderVisibilityWidth=a.MinSliderVisibilityWidth},a.prototype.applyRangeSlicerDataChanges=function(e){e.wrapRangeBoxes=!0},a.MinSliderVisibilityHeight=35,a.MinSliderVisibilityWidth=0,a}(),ur=function(){function a(){}return a.prototype.applySlicerChanges=function(e,t,i){return this.shouldApplyResponsiveChanges(i,t.mode,t.orientation)&&(t=this.applyResponsiveSlicerChanges(e,t)),t},a.prototype.applySlicerHeaderChanges=function(e,t,i,n,r){return t.show&&this.shouldApplyResponsiveChanges(i,n.mode,n.orientation)&&(t=this.applyResponsiveSlicerHeaderChanges(e,t,n,r)),t},a.prototype.enumerateObjectInstances=function(e,t,i,n,r){this.doesSlicerModeSupportsResponsive(n,r)&&"general"===e.objectName&&this.enumerateGeneral(i,t)},a.prototype.enumerateGeneral=function(e,t){U.fF.assert(function(){return null===t[0].selector},"objects[0].selector === null");var i=vt.a.getResponsiveVisualProperties(e,h.gO);_.merge(t[0],{selector:null,properties:{responsive:i.responsive},objectName:"general"})},a.prototype.getResponsiveSlice=function(e,t,i,n){if(this.doesSlicerModeSupportsResponsive(t,i)){var l=h.gO.general,f=vt.a.getResponsiveVisualProperties(e,h.gO);return{item:new b.vi({uidBuilder:new b.IN(new b.SS(new b.lg("visualPlaceholderCard"),"visualPlaceholderGroup"),"responsive"),control:new b.bd({descriptor:l.responsive,value:f.responsive}).build(),localize:n}).build(),revertToDefaultDescriptors:[l.responsive]}}},a.prototype.shouldApplyResponsiveChanges=function(e,t,i){return this.doesSlicerModeSupportsResponsive(t,i)&&vt.a.shouldApplyResponsiveChanges(e,h.gO)},a.prototype.doesSlicerModeSupportsResponsive=function(e,t){return a.isRangeSlicerMode(e)||a.isHorizontalSlicer(e,t)},a.prototype.applyResponsiveSlicerChanges=function(e,t){var i=vt.a.cloneData(t);return this.applyIconResponsiveChanges(e,i),this.applyResponsiveSlicerHorizontalChanges(i),i},a.prototype.applyResponsiveSlicerHeaderChanges=function(e,t,i,n){var r=vt.a.cloneData(t);return this.applyHeaderChanges(e,i,r,n),this.updateResponsiveHeaderWarnings(r,t),r},a.prototype.applyIconResponsiveChanges=function(e,t){var i;a.isRangeSlicerMode(t.mode)?i=G.$O.rangeSlicer.iconBreakpoints:a.isHorizontalSlicer(t.mode,t.orientation)?i=G.$O.horizontalSlicer.iconBreakpoints:U.fF.assertFail("not supported slicer (mode: ".concat(t.mode,", orientation: ").concat(t.orientation,") should never arrive this function.")),_.some(i,function(n){return e.height<=n.height&&e.width<=n.width})&&(t.showIcon=!0)},a.prototype.applyResponsiveSlicerHorizontalChanges=function(e){a.isHorizontalSlicer(e.mode,e.orientation)&&(e.showTabularSlicer=!0)},a.prototype.applyHeaderChanges=function(e,t,i,n){if(a.isRangeSlicerMode(t.mode)){var r=G.$O.rangeSlicer;i.show=n?e.height>=r.hideHeaderHeightSlider:e.height>=r.hideHeaderHeightNoSlider}else a.isHorizontalSlicer(t.mode,t.orientation)?i.show=e.height>=(r=G.$O.horizontalSlicer).hideHeaderHeight:U.fF.assertFail("not supported slicer (mode: ".concat(t.mode,", orientation: ").concat(t.orientation,") should never arrive this function."));var l=(0,G.Cd)(e,G.$O.slicerHeader.fontSize);i.textSize=Math.min(i.textSize,l)},a.prototype.updateResponsiveHeaderWarnings=function(e,t){var i;e.show!==t.show?i=new Ce.C_:e.textSize!==t.textSize&&(i=new Ce.Fy),i&&e.warnings.addForVisualObject("header",{selector:null,warnings:[i]})},a.isRangeSlicerMode=function(e){return(0,w.l6)(e)},a.isHorizontalSlicer=function(e,t){return e===w.RB&&t===he.i.Horizontal},a}(),ji="slicer-container",Ui="slicer-content-wrapper",Oi="full-screen";function Ni(a){return w.dt.members(a?[w.Ih,w.of,w.j6]:[w.RB,w.j6])}var gr=function(){function a(e){this.areControlButtonsAlwaysVisible=!1,this.tooltip=null,this.enableInFocusRenderers=!1,this.enableMultiElementRows=!1,this.preventVirtualKeyboardOnTheFirstTap=!1,this.isInFocus=!1,this.hasSearchableData=!1,this.lockKeyboardNavigation=!0,this.isSlicer=!1,this.hasUnappliedFilters=!1,e&&(this.enableInFocusRenderers=e.enableInFocusRenderers,this.enableMultiElementRows=e.enableMultiElementRows,this.preventVirtualKeyboardOnTheFirstTap=e.preventVirtualKeyboardOnTheFirstTap,this.lockKeyboardNavigation=!1!==e.lockKeyboardNavigation,this.featureSwitches=e.featureSwitches,this.isSlicer=e.isSlicer),this.activeMode=w.RB,this.slicerOrientation=he.i.Vertical,this.viewModelAdapter=new ur}return a.prototype.init=function(e){var t=this;this.initOptions=e,this.element=e.element,this.style=e.style,this.visibilityHelper=(0,ce.q)().visibilityHelper(this.element,"slicerResponsiveIcon"),this.currentViewport=e.viewport,this.hostServices=e.host,this.loadMoreHandler=new c.J(this.hostServices),this.container=(0,J.hi)().addClass(ji).appendTo(this.element),this.alert=(0,J.yP)().appendTo(this.container).attr("aria-live","polite").attr("role","status").hide(),this.headerContainer=(0,J.hi)().appendTo(this.container).addClass("slicer-header-wrapper"),this.slicerContainer=(0,J.hi)().appendTo(this.container).addClass(Ui),this.initializeSlicerRenderer(),this.container.on(Z.BZ,function(){t.areControlButtonsAlwaysVisible=!0,t.container.addClass("focused"),t.alert.text(t.activeMode);var i=!!t.slicerRenderer&&t.slicerRenderer.hasSlider();t.updateSlicerHeader(i)}),this.container.on("focusin",function(){t.container.addClass("focused")})},a.prototype.destroy=function(){this.slicerRenderer.onDestroy&&this.slicerRenderer.onDestroy(),this.slicerHeader&&this.slicerHeader.destroy()},a.prototype.update=function(e){U.fF.assertValue(e,"options"),this.isInFocus=!!e.isInFocus,e.type&v.EP.Resize&&this.resizing(e.viewport),e.type&v.EP.FilterOptionsChange&&(this.hasUnappliedFilters=e.pendingChanges[0],this.updateSlicerHeader(this.slicerRenderer.hasSlider())),(!e.type||e.type&v.EP.Data)&&(U.fF.assertValue(e,"options"),this.dataChanged(e.dataViews,e.operationKind))},a.prototype.dataChanged=function(e,t){U.fF.assertValue(e,"dataViews"),_.isEmpty(e)||(this.dataView=e[0],this.render(t!==v.su.Append,!0))},a.prototype.resizing=function(e){this.currentViewport=e,this.render(!1)},a.prototype.enumerateObjectInstances=function(e){if(this.dataView)switch(e.objectName){case"header":case"modeSelection":return this.slicerHeader.enumerateObjectInstances(e);case"general":var t=this.slicerHeader.enumerateObjectInstances(e);return this.slicerRenderer&&this.slicerRenderer.supportsOrientation()&&(t[0].properties.orientation=this.data?this.data.orientation:he.i.Vertical),this.viewModelAdapter&&this.viewModelAdapter.enumerateObjectInstances(e,t,this.dataView,this.activeMode,this.slicerOrientation),t;default:return this.slicerRenderer.enumerateObjectInstances(e,this.featureSwitches)}},a.prototype.onDataViewObjectChanged=function(e,t){if(this.featureSwitches.updateFormattingPaneObjects&&this.featureSwitches.moveSlicerTypeSelection){var i=this.slicerRenderer.onDataViewObjectChanged(e,t);return U.fF.assertNonEmpty(i,"There should be at least one object property to save"),i}return e},a.prototype.getFormattingModel=function(){var e=this;if(this.dataView)return new b.Nq(function(){return e.getSlicerSettingsCard()},function(){return e.slicerHeader.getSlicerHeaderCard(e.hostServices)},function(){return e.slicerRenderer.getValuesCard(e.featureSwitches)},function(){return e.slicerRenderer.getAdditionalCards()}).build()},a.prototype.getSlicerSettingsCard=function(){var e=this;if((0,w.Ek)(this.activeMode)||this.featureSwitches.updateFormattingPaneObjects||this.featureSwitches.moveSlicerTypeSelection){var i,t=new b.lg("slicerSettings");this.slicerRenderer&&this.slicerRenderer.supportsOrientation()&&(i=this.data?this.data.orientation:he.i.Vertical);var n=this.data?this.data.activeOptions:Ni(this.featureSwitches.updateFormattingPaneObjects&&this.featureSwitches.moveSlicerTypeSelection);if(this.data.isCategorySourceNumeric){for(var r=[],l=0,f=this.data.activeOptions;l<f.length;l++)r.push(ti.members([f[l].value])[0]);n=(0,X.__spreadArray)([],r,!0)}var M=this.slicerRenderer.getSlicerSettingsCardOptions(t,i,this.activeMode,n,this.featureSwitches);if(M){var N=M.groups;return new b.CQ(t,"Slicer_Settings",M.revertToDefaultDescriptors,function(j){return e.hostServices.getLocalizedString(j)}).withGroups(N).build()}}},a.prototype.resolveFormattingPlaceholder=function(e){if((0,b.n$)(e)&&"responsive"===e.name)return this.getResponsiveSlice()},a.prototype.getResponsiveSlice=function(){var e=this;if(this.dataView&&this.viewModelAdapter)return this.viewModelAdapter.getResponsiveSlice(this.dataView,this.activeMode,this.slicerOrientation,function(n){return e.hostServices.getLocalizedString(n)})},a.prototype.loadMoreData=function(){return this.loadMoreHandler.updateDataView(this.dataView),this.loadMoreHandler.loadMoreData()},a.prototype.onClearSelection=function(){this.slicerRenderer&&this.slicerRenderer.onClear&&this.slicerRenderer.onClear()},a.converter=function(e,t,i){if(e){var C,n=t.updateFormattingPaneObjects&&t.moveSlicerTypeSelection,r=null,l=he.i.Vertical,f=!1,M=!1,N=Ni(n),k=1,K=!1;if(e.metadata&&e.metadata.objects){var j=e.metadata.objects;l=(0,d.NA)(j,h.gO.general.orientation,l),f=(0,d.NA)(j,h.gO.selection.strictSingleSelect,f),r=(0,d.NA)(j,h.gO.data.mode,r)}if(e.metadata&&e.metadata.columns){var q=(0,z.zJ)(e.metadata.columns);if(!_.isEmpty(q)){var ne=q[0];r=(0,ve.D_)(q,r),C=_.join(_.map(q,function(Le){return Le.displayName}),i),K=!_.some(q,function(Le){return!0!==Le.type.text}),1===q.length?(K=!0===ne.type.text,M=!0===ne.type.numeric,ne.parameter&&1===ne.parameter.kind?(N=_.union(Ni(n),w.dt.members([r])),f=f||!ne.parameter.supportsMultipleValues):!0===ne.type.dateTime?N=function(a){return w.dt.members(a?[w.Ih,w.of,w.j6,w.bb,w.e4,w.vX,w.K8,w.GV]:[w.RB,w.j6,w.bb,w.e4,w.vX,w.K8,w.GV])}(n):M&&(N=_.union(N,function(a){return w.dt.members(a?[w.Ih,w.of,w.j6,w.bb,w.e4,w.vX]:[w.RB,w.j6,w.bb,w.e4,w.vX])}(n)),ne.parameter&&(N=_.union(N,w.dt.members([w.Zr]))))):(l=he.i.Vertical,n&&(N=w.dt.members([w.Ih,w.j6]))),(0,w.Lw)(r)&&1===q.length&&(k=ne.aggregates&&null!=ne.aggregates.min&&null!=ne.aggregates.max?k:2)}}return{orientation:l,categorySourceName:C,isCategorySourceNumeric:M,mode:r||w.RB,switchMode:k,hasSearchableData:K,activeOptions:N,showIcon:!1,showTabularSlicer:!1,warningObjectCollection:new Ce.tb,strictSingleSelect:f}}},a.prototype.render=function(e,t){this.updateViewport(),this.previousData=this.data,this.data=this.originalData=a.converter(this.dataView,this.featureSwitches,this.hostServices.getLocalizedString("ListJoin_Separator")),this.featureSwitches.updateFormattingPaneObjects&&this.featureSwitches.moveSlicerTypeSelection&&this.clearSelectionIfNeeded(),this.viewModelAdapter&&this.dataView&&(this.data=this.viewModelAdapter.applySlicerChanges(this.currentViewport,this.originalData,this.dataView)),this.data&&(this.hasSearchableData=this.data.hasSearchableData),this.renderSlicer(e,t),this.visibilityHelper.updateVisibility(this.data&&this.data.showIcon?{showIcon:!0,viewport:this.currentViewport}:{showIcon:!1})},a.prototype.renderSlicer=function(e,t){this.updateSlicerRendererIfNeeded(),this.updateSlicerHeader(this.slicerRenderer.hasSlider()),this.slicerRenderer.render({dataView:this.dataView,viewport:this.currentViewport,resetScrollbarPosition:e,hasSearchableData:this.hasSearchableData,restatement:this.data&&this.data.categorySourceName,isSlicer:this.isSlicer,isSearchMode:!!this.selectionHandler&&this.selectionHandler.isSearchMode()});var i=null!=this.slicerRenderer.getRestatement;this.slicerHeader&&this.slicerHeader.setFilterRestatement(i?this.slicerRenderer.getRestatement():void 0,i),t&&this.loadMoreHandler.onLoadMoreDataCompleted(),this.updateWarnings()},a.prototype.updateSlicerRendererIfNeeded=function(){if(this.enableInFocusRenderers&&this.container.hasClass(Oi)!==this.isInFocus)return this.isInFocus?this.container.addClass(Oi):this.container.removeClass(Oi),void this.initializeSlicerRenderer();if(this.data){var t=this.data.mode||w.RB;this.activeMode!==t||(0,w.l6)(this.activeMode)&&this.previousData&&this.previousData.isCategorySourceNumeric!==this.data.isCategorySourceNumeric?(this.activeMode=t,this.initializeSlicerRenderer()):(this.slicerOrientation!==(this.data.orientation||he.i.Vertical)||this.previousData&&this.previousData.showTabularSlicer!==this.data.showTabularSlicer)&&this.initializeSlicerRenderer()}},a.prototype.clearSelectionIfNeeded=function(){if(this.previousData&&this.data){var e=this.data.mode||w.RB;if(this.previousData.mode!==e||(0,w.l6)(e)&&this.previousData&&this.previousData.isCategorySourceNumeric!==this.data.isCategorySourceNumeric){this.hostServices.onSelect({type:0,visualObjects:[]});var t=this.hostServices.getLocalizedString("Slicer_ClearSelectionsCleared");this.hostServices.alertWithDebounce("announce-clear-selection",t)}}},a.prototype.updateViewport=function(){this.container.css({height:this.currentViewport.height})},a.prototype.updateSlicerHeader=function(e){var t=this;if(this.dataView){var i=(0,De.y)(this.dataView);if(!this.slicerHeader){var n={onClear:function(){t.slicerRenderer&&t.slicerRenderer.onClear(!0)},onChange:function(f){t.slicerRenderer&&!t.featureSwitches.updateFormattingPaneObjects&&!t.featureSwitches.moveSlicerTypeSelection&&t.slicerRenderer.onModeChange(f)},host:this.headerContainer,visibilityState:this.data.switchMode,selectedValue:this.activeMode,hoverContainer:this.element,enableInFocusRenderers:this.enableInFocusRenderers,slicerModeOptions:this.slicerActiveOptions()},r={localize:this.hostServices.getLocalizedString.bind(this.hostServices),getViewMode:this.hostServices.getViewMode.bind(this.hostServices),applySlicerHeaderChanges:function(f){var C=f;return t.viewModelAdapter&&t.dataView&&t.data&&(C=t.viewModelAdapter.applySlicerHeaderChanges(t.currentViewport,f,t.dataView,t.data,e)),C},onRenderTooltip:function(f,C){return t.getTooltipComponent(f,C)}};this.slicerHeader=new He(n,r,this.style,this.featureSwitches)}this.slicerHeader.update(i,{text:this.data.categorySourceName,restatement:this.slicerRenderer.getRestatement?this.slicerRenderer.getRestatement():void 0,selectedValue:this.activeMode,visibilityState:this.data.switchMode,isInFocus:this.isInFocus,slicerModeOptions:this.slicerActiveOptions(),areControlButtonsAlwaysVisible:this.areControlButtonsAlwaysVisible,strictSingleSelect:this.data.strictSingleSelect,hasUnappliedFilters:this.hasUnappliedFilters})}},a.prototype.getTooltipComponent=function(e,t){var i;return null!==this.tooltip&&this.tooltip.close(),this.tooltip=null===(i=this.hostServices.getUIComponentFactory())||void 0===i?void 0:i.createTooltip(e,t),this.tooltip},a.prototype.slicerActiveOptions=function(){if(this.data.isCategorySourceNumeric){for(var e=[],t=0,i=this.data.activeOptions;t<i.length;t++)e.push(ti.members([i[t].value])[0]);return e}return this.data.activeOptions},a.prototype.initializeSlicerRenderer=function(){switch(this.slicerRenderer&&this.slicerRenderer.onDestroy&&this.slicerRenderer.onDestroy(),this.slicerOrientation=this.data&&this.data.orientation||he.i.Vertical,this.slicerContainer.empty(),this.activeMode){case w.RB:return void this.initializeBasicSlicer();case w.j6:return void this.initializeDropdownSlicer();case w.K8:return void this.initializeRelativeSlicer(m.wj.Date);case w.GV:return void this.initializeRelativeSlicer(m.wj.Time);case w.vX:case w.bb:case w.e4:return void this.initializeRangeSlicer(!1);case w.Zr:return void this.initializeRangeSlicer(!0);default:return U.fF.assertFail("initializeSlicerRenderer - Unexpected activeMode: "+this.activeMode),void this.initializeVerticalSlicer()}},a.prototype.initializeBasicSlicer=function(){if(this.enableInFocusRenderers&&this.isInFocus)this.initializeInFocusVerticalSlicer();else switch(this.slicerOrientation){case he.i.Horizontal:this.initializeHorizontalOrTabularSlicer();break;case he.i.Vertical:this.initializeVerticalSlicer()}},a.prototype.initializeInFocusVerticalSlicer=function(){this.hostServices.setShouldDeferData(!1);var e=this.slicerRenderer=new Vi(new nr,{hostServices:this.hostServices,featureSwitches:this.featureSwitches},this.lockKeyboardNavigation),t=this.createInitOptions();this.selectionHandler=e.init(t,this.slicerContainer)},a.prototype.initializeVerticalSlicer=function(){var e=this.slicerRenderer=new Vi(new Bi,{hostServices:this.hostServices,featureSwitches:this.featureSwitches},this.lockKeyboardNavigation),t=this.createInitOptions();this.selectionHandler=e.init(t,this.slicerContainer)},a.prototype.initializeRangeSlicer=function(e){if(this.data.isCategorySourceNumeric){var t=new ki,i=new ht({hostServices:this.hostServices});this.slicerRenderer=new ft({hostServices:this.hostServices,featureSwitches:this.featureSwitches},i,e,this.data.isCategorySourceNumeric,t)}else t=new ki,i=new Tt({preventVirtualKeyboardOnTheFirstTap:this.preventVirtualKeyboardOnTheFirstTap,hostServices:this.hostServices,featureSwitches:this.featureSwitches}),this.slicerRenderer=new ft({preventTextSelection:this.preventVirtualKeyboardOnTheFirstTap,hostServices:this.hostServices,featureSwitches:this.featureSwitches},i,e,this.data.isCategorySourceNumeric,t);var n=this.createInitOptions();this.selectionHandler=this.slicerRenderer.init(n,this.slicerContainer)},a.prototype.initializeHorizontalOrTabularSlicer=function(){var e;e=this.data&&this.data.showTabularSlicer?new Gt:new oe;var i=new lr,n=this.slicerRenderer=new Ee({hostServices:this.hostServices,horizontalSlicerLayout:e,featureSwitches:this.featureSwitches},i),r=this.createInitOptions();this.selectionHandler=n.init(r,this.slicerContainer)},a.prototype.initializeRelativeSlicer=function(e){var i=this.slicerRenderer=function(a,e){switch(a){case m.wj.Time:return new ei(e,m.wj.Time);case m.wj.Date:return new ei(e,m.wj.Date);default:return void U.fF.assertFail("Unsupported RelativeFilterType")}}(e,{hostServices:this.hostServices}),n=this.createInitOptions();this.selectionHandler=i.init(n,this.slicerContainer)},a.prototype.initializeDropdownSlicer=function(){if(this.enableInFocusRenderers&&this.isInFocus)this.initializeInFocusVerticalSlicer();else{var e={hostServices:this.hostServices,featureSwitches:this.featureSwitches},t=new Vi(new Bi,e);this.slicerRenderer=new Ot(t,e);var i=this.createInitOptions();this.selectionHandler=this.slicerRenderer.init(i,this.slicerContainer)}},a.prototype.createInitOptions=function(){var e=this;return{visualInitOptions:this.initOptions,loadMoreData:function(){return e.loadMoreData()},enableMultiElementRows:this.enableMultiElementRows}},a.prototype.updateWarnings=function(){this.data&&(this.slicerHeader.addWarnings(this.data.warningObjectCollection),this.slicerRenderer.addWarnings&&this.slicerRenderer.addWarnings(this.data.warningObjectCollection),this.hostServices.setWarnings(this.data.warningObjectCollection.complete()))},a}()},62224:function(nt,We,y){"use strict";y.d(We,{wV:function(){return J}});var X=y(9434),Z=y(90120),h=y(3212),ve=y(65195),ce=y(59107),De=y(9795),w=y(68447),J=function(){function c(){}return c.prototype.bindEvents=function(v,d){this.behavior=this.createWebBehavior(v),this.behavior.bindEvents(v.behaviorOptions,d)},c.prototype.renderSelection=function(){this.behavior&&this.behavior.renderSelection()},c.bindSlicerEvents=function(v,d,m,V){c.bindSlicerItemSelectionEvent(d,m,V),v.searchInput&&c.bindSlicerSearchEvent(v.searchInput,v.clearSearchTextButton,m)},c.setSelectionOnSlicerItems=function(v,d,m){var V=d.isSelectionModeInverted(),H=d.hasSelection();v.each(function(G,ee){var de=!!G.partially||G.isSelectAllDataPoint&&H,se=!H&&V||H&&!de&&(0,w.OO)(G,V);if($(this).toggleClass("selected",se),$(this).toggleClass("partiallySelected",!!de),m.isHighContrast){var T=this.getElementsByTagName("span")[0];if(se){var Fe=Z.v.getThemeColor(m,"foregroundSelected");T&&(T.style.backgroundColor=Fe,T.style.borderColor=Fe)}else{var gt=Z.v.getThemeColor(m,"foreground");T&&(T.style.backgroundColor="",T.style.borderColor=gt,T.style.boxShadow="none")}}var ke=this.getElementsByTagName("input")[0];ke&&(ke.checked=se)})},c.bindSlicerItemSelectionEvent=function(v,d,m){var V=this;v.on("keydown",function(H){var G=d3.event,ee=G.keyCode;32!==ee&&13!==ee||(32===ee&&G.preventDefault(),V.toggleItemSelection(H,d,m))}).on("click",function(H){$(d3.event.target).trigger("slicer.dataPointSelected"),V.toggleItemSelection(H,d,m)})},c.toggleItemSelection=function(v,d,m,V){if(!v.disabled){var H=V||d3.event;if(v.isSelectAllDataPoint)d.toggleSelectionModeInversion(),d.persistSelectionFilter(X.gO.general.filter);else{var G=c.isMultiSelect(v,H,m,d)?3:0;d.handleSelection(v,G,{x:H.clientX,y:H.clientY})&&d.persistSelectionFilter(X.gO.general.filter)}}},c.toggleItemSelectionFromExternal=function(v,d,m,V){this.toggleItemSelection(d,m,V,v)},c.bindSlicerSearchEvent=function(v,d,m){var V=this;v.empty()||(v.on(ve.n,function(){var H=d3.event;ce.M.isCtrlOrMeta(H)&&(0,De.iZ)(H.keyCode)||(0,De.Wl)(H.keyCode)||(0,De.rH)(H.keyCode)?H.stopPropagation():27===H.keyCode?(V.clearSearch(m,v),H.preventDefault()):13===H.keyCode&&(c.startSearch(v,m),H.stopPropagation())}).on(ve.cp,function(){var H=d3.event;_.debounce(function(){9===H.keyCode||16===H.keyCode||c.startSearch(v,m)},c.searchInputTimeoutDuration)()}),d&&!d.empty()&&d.on(ve.G6,function(){V.clearSearch(m,v),d3.event.stopPropagation()}))},c.clearSearch=function(v,d){v.setSearchMode(!0),v.persistSelfFilter(X.gO.general.selfFilter,null),d.property("value","");var m=d3.select(w.s8.selector);(new w.gy).configureSearchBoxIcon(m,void 0)},c.startSearch=function(v,d){var m=v.node(),V=m&&m.value;d.setSearchMode(!0),d.persistSelfFilter(X.gO.general.selfFilter,V)},c.isMultiSelect=function(v,d,m,V){return!m.selection.strictSingleSelect&&!V.isDisableMultipleSelectForMappedColumn()&&(V.isSelectionModeInverted()||!m.selection.singleSelect||ce.M.isCtrlOrMeta(d)||1===V.getDataMultiSelectMode()||c.hasParentSelected(v))},c.hasParentSelected=function(v){for(;v.parent;){if(v.parent.selected)return!0;v=v.parent}},c.prototype.createWebBehavior=function(v){return v.orientation===h.i.Horizontal?new U:new b},c.searchInputTimeoutDuration=500,c}(),U=function(){function c(){}return c.prototype.bindEvents=function(v,d){this.selectionHandler=d,this.slicerSettings=v.settings,this.style=v.style,this.items=v.itemsContainer,J.bindSlicerEvents(v,this.items,d,this.slicerSettings)},c.prototype.renderSelection=function(){J.setSelectionOnSlicerItems(this.items,this.selectionHandler,this.style)},c}(),b=function(){function c(){}return c.prototype.bindEvents=function(v,d){this.itemContainers=v.itemContainers,this.itemInputs=v.itemInputs,this.selectionHandler=d,this.settings=v.settings,this.style=v.style,J.bindSlicerEvents(v,this.itemContainers,d,this.settings)},c.prototype.renderSelection=function(){J.setSelectionOnSlicerItems(this.itemInputs,this.selectionHandler,this.style)},c}()},82085:function(nt,We,y){"use strict";y.d(We,{v:function(){return h}});var X=y(64329),Z=y(68447),h=function(){function ve(ce){this.hostServices=ce,this.domHelper=new Z.gy}return ve.fromSlicerSettings=function(ce,De,w,he,Ce){var J,U,b,c,v,d;if(ce)return{isVisible:w,hasClearSearchButton:he,searchKey:De,style:{borderStyle:null===(J=ce.search)||void 0===J?void 0:J.outlineStyle,borderColor:null===(U=ce.search)||void 0===U?void 0:U.borderColor,background:null===(b=ce.search)||void 0===b?void 0:b.background,color:null===(c=ce.slicerText)||void 0===c?void 0:c.color,textSize:null===(v=ce.slicerText)||void 0===v?void 0:v.textSize,fontFamily:null===(d=ce.slicerText)||void 0===d?void 0:d.fontFamily}}},ve.prototype.create=function(ce){this.container=this.domHelper.addSearch(this.hostServices,ce),this.input=this.container.select(Z.Mj.selector)},ve.prototype.addClearButton=function(){this.clear=this.domHelper.addClearSearchButton(this.hostServices,this.container)},ve.prototype.clearSearchText=function(){this.container.select(Z.Mj.selector).property("value","")},ve.prototype.getHeight=function(ce){var De=this.container.node();return $(De).outerHeight(!0)},ve.prototype.update=function(ce){if(!ce||!ce.isVisible)return this.container.classed(Z.pD.class,!1),void this.container.classed(Z.AM.class,!0);void 0!==ce.bottomMargin&&this.container.style("margin-bottom",ce.bottomMargin+"px");var De=this.container.classed(Z.pD.class);this.container.classed(Z.pD.class,ce.isVisible),this.container.classed(Z.AM.class,!ce.isVisible);var w=ce.style,he=this.container.select(Z.Mj.selector),Ce=this.container.select(Z.uN.selector);if(he.empty())ce.hasClearSearchButton&&this.domHelper.configureSearchBoxIcon(this.container,void 0);else{var J=he.node(),U=J&&J.value;ce.hasClearSearchButton&&this.domHelper.configureSearchBoxIcon(this.container,U),(_.isEmpty(U)||_.isEmpty(ce.searchKey)&&ce.isVisible!==De)&&he.property("value",ce.searchKey);var b=Math.ceil(X.FP.fromPointToPixel(w.textSize));this.height=b,this.container.styles({color:w.color,"border-style":w.borderStyle,"border-color":w.borderColor,background:w.background,height:b+"px"}),he.styles({background:w.background,color:w.color,"font-size":X.FP.fromPoint(w.textSize),"font-family":w.fontFamily}),Ce.styles({color:w.color})}},ve}()},83611:function(nt,We,y){"use strict";y.d(We,{N:function(){return U}});var X=y(9434),Z=y(72902),h=y(62458),ve=y(32379),ce=y(82755),De=y(26743),w=y(95462),he=y(24653),Ce=y(3222),J=y(68447),U=function(){function b(c,v){this.hostService=c,this.behavior=v,this.isInvertedSelectionMode=!1,this.isSearchUpdateMode=!1,this.selected=[]}return b.buildDefaultValueFilter=function(c,v){var d,m;void 0===v&&(v=!1),h.fF.assertNonEmpty(c,".buildDefaultValueFilter columns should not be empty");for(var V=[],H=[],G=v?V:H,ee=0,be=c;ee<be.length;ee++){var de=be[ee],se=1===(null===(d=de.parameter)||void 0===d?void 0:d.kind),T=!(null===(m=de.parameter)||void 0===m||!m.supportsSelectAll),Fe=null!=(0,ce.NA)(de.objects,X.gO.general.defaultValue);se&&T||Fe?G.push.apply(G,b.getMetadataColumnIdentityExprs(de)):G=V}if(!_.isEmpty(V)||!_.isEmpty(H))return w.yl.getDefaultAnyValueFilter(H,V)},b.getMetadataColumnIdentityExprs=function(c){return _.isEmpty(c.identityExprs)?[c.expr]:c.identityExprs},b.prototype.setDefaultValueMode=function(c){this.useDefaultValue=c},b.prototype.bind=function(c,v){this.selected=_.filter(c,function(d){return d.selected}),this.behavior.bindEvents(v,this),this.behavior.renderSelection()},b.prototype.setSelected=function(c){this.selected=_.isEmpty(c)?[]:_.filter(c,function(v){return v.selected})},b.prototype.setSelectionModeInverted=function(c){this.previousInversionMode=this.isInvertedSelectionMode,this.isInvertedSelectionMode=c},b.prototype.setColumns=function(c){this.columns=c,this.columnExprs=_.map(c,function(v){return v.expr}),this.supportsDefaultValueByLevel=_.map(c,function(v){return null!=(0,ce.NA)(v.objects,X.gO.general.defaultValue)})},b.prototype.hasSelection=function(){return!_.isEmpty(this.selected)},b.prototype.isSelectionModeInverted=function(){return this.isInvertedSelectionMode},b.prototype.setQueryNameByLevel=function(c){this.queryNameByLevel=c},b.prototype.persistSelfFilter=function(c,v){var d=(0,J.H4)(this.columnExprs,v);this.hostService.persistProperties(b.createChangeForProperty(c,d))},b.prototype.setSearchMode=function(c){this.isSearchUpdateMode=c},b.prototype.isSearchMode=function(){return this.isSearchUpdateMode},b.prototype.handleClearSelection=function(){if(this.previouslySelected=this.selected.slice(),this.previousInversionMode=this.isInvertedSelectionMode,this.isInvertedSelectionMode=!1,!(1===this.selected.length&&this.isStrictSingleSelect||this.hasDefaultValue()&&this.useDefaultValue)){var c=this.hostService.getLocalizedString("Slicer_ClearSelectionsCleared");this.hostService.alertWithDebounce("announce-clear-selection",c),this.useDefaultValue=!0,this.resetSelected(),this.behavior.renderSelection()}},b.prototype.persistSelectionFilter=function(c,v,d,m){void 0===v&&(v=!1),void 0===m&&(m=!1);var V=this.getFilterFromDataPoints();if(V&&!_.isEmpty(this.selected)){var H=this.toFilterExpressionMetadata(this.selected);this.hostService.setFilterExpressionMetadata(H)}var G=b.createChangeForProperty(c,V),be=b.createChangeForProperty(X.gO.data.isInvertedSelectionMode,!(v||!this.isInvertedSelectionMode)||null);if(m){var de=b.createChangeForProperty(X.gO.general.selfFilter,null);this.mergeObjectInstancesToPersist(G,de)}G=this.mergeObjectInstancesToPersist(G,be),this.hostService.persistProperties(G,d),this.sendSelectionToHost()},b.prototype.getDataMultiSelectMode=function(){return this.hostService.dataMultiSelectMode()},b.prototype.sendSelectionToHost=function(){if(this.hostService.onSelect){var c=_.isEmpty(this.selected)?[]:_.map(this.selected,function(H){return H.identity}),v=Z.Bt.createSelectEventArgs(c,0),d=_.isEmpty(this.previouslySelected)?[]:_.map(this.previouslySelected,function(H){return H.identity}),m=Z.Bt.createSelectEventArgs(d,0),V=_.size(v.visualObjects)!==_.size(m.visualObjects)||_.some(v.visualObjects,function(H,G){return!(0,ve.Ic)(H.selectorsByColumn,m.visualObjects[G].selectorsByColumn)});v.fireDataSelectedEvent=V||this.isInvertedSelectionMode!==this.previousInversionMode,this.hostService.onSelect(v)}},b.prototype.handleSelection=function(c,v,d){if(this.onSelecting(c,d))return!1;var m=c.partially,V=c.selected;this.useDefaultValue=!1,this.previouslySelected=this.selected.slice(),0===v||this.isStrictSingleSelect?this.resetSelected():this.clearDataPointState(c);var H=this.getDataPointSelectedState(c,v,m,V);return this.updateSelectedState(c,H),this.behavior.renderSelection(),!0},b.prototype.getDataPointSelectedState=function(c,v,d,m){return d?(0,J.OO)(c,this.isInvertedSelectionMode)?c.selected:!c.selected:!!this.isStrictSingleSelect||(0===v?!m||this.selected.length>1:!m)},b.prototype.onSelecting=function(c,v){var d=(0,J.No)(c,this.queryNameByLevel),m={type:0,visualObjects:[{objectName:Z.Bt.dataPointObjectName,selectorsByColumn:d.selector}],position:v};return this.hostService.onSelecting(m),0!==m.action&&null!=m.action},b.prototype.updateSelectedState=function(c,v){var d=c.selected;c.selected=v,d!==v&&(this.clearDataPointState(c,!0),this.updateParentState(c)),c.selected?this.selected.push(c):d&&!c.selected&&_.remove(this.selected,c)},b.prototype.setStrictSingleSelect=function(c,v){this.isStrictSingleSelect=c,this.adjustStrictSingleSelectSelection(v)},b.prototype.resetSelected=function(){_.isEmpty(this.selected)||_.each(this.selected,function(c){return c.selected=!1}),this.selected=[]},b.prototype.clearDataPointState=function(c,v){if(void 0===v&&(v=!1),v||(c.selected&&_.remove(this.selected,c),c.selected=!1),!_.isEmpty(c.children)&&c.partially){c.partially=!1;for(var d=0,m=c.children;d<m.length;d++)this.clearDataPointState(m[d])}},b.prototype.updateParentState=function(c){if(c.parent)for(var v=c.parent;v;)v.partially=!!c.selected||_.some(v.children,function(d){return d.selected}),v=v.parent},b.prototype.mergeObjectInstancesToPersist=function(c,v){var d,m,V={};return V.merge=c.merge,V.remove=c.remove,_.isEmpty(v.merge)||(V.merge=V.merge||[],(d=V.merge).push.apply(d,v.merge||[])),_.isEmpty(v.remove)||(V.remove=V.remove||[],(m=V.remove).push.apply(m,v.remove||[])),V},b.prototype.toFilterExpressionMetadata=function(c){if(!_.isEmpty(c)){for(var v={expressions:this.columnExprs,cachedValueItems:[]},d=0,m=0,V=c;m<V.length;m++){for(var G=V[m],ee={identities:[],valueMap:{}};G;)ee.identities.unshift(G.scopeIdentity),ee.valueMap[G.level]=G.value,d=Math.max(d,G.level),G=G.parent;v.cachedValueItems.push(ee)}return v.expressions=this.columnExprs.slice(0,d+1),v}},b.prototype.isDisableMultipleSelectForMappedColumn=function(){return _.some(this.columns,function(v){var d,m;return 1===(null===(d=v.parameter)||void 0===d?void 0:d.kind)&&!(null!==(m=v.parameter)&&void 0!==m&&m.supportsMultipleValues)})},b.prototype.toggleSelectionModeInversion=function(c){return void 0===c&&(c=!1),this.previouslySelected=this.selected.slice(),this.useDefaultValue=!1,this.previousInversionMode=this.isInvertedSelectionMode,this.isInvertedSelectionMode=!this.isInvertedSelectionMode,this.resetSelected(),c&&this.hostService.persistProperties(b.createChangeForProperty(X.gO.data.isInvertedSelectionMode,!!this.isInvertedSelectionMode||null)),this.behavior.renderSelection(),this.isInvertedSelectionMode},b.prototype.getFilterFromDataPoints=function(){var c=(0,J.R6)({columns:this.columns});if(_.isEmpty(this.selected)&&(this.hasDefaultValue()||this.isInvertedSelectionMode&&c))return b.buildDefaultValueFilter(this.columns,!this.useDefaultValue||c);var d=this.buildSelectorsByLevel();if(d){var m=b.buildExprForHierarchyFilter(d.selected,d.unselected,c);return m=this.ensureAnyFilter(m,d.maxLevel),w.yl.fromSQExpr(m)}},b.buildExprForHierarchyFilter=function(c,v,d){var m=b.buildExprsFromSelectorsByLevel(c),V=b.buildExprForUnselectedState(v,!d);return m&&V?m=(0,he.xD)(m,V):V&&(m=V),m},b.prototype.ensureAnyFilter=function(c,v){var d=v+1;if(d<this.columns.length){for(var m=(0,he.n7)(),V=[],H=d;H<this.columns.length;H++)this.supportsDefaultValueByLevel[H]&&V.push.apply(V,b.getMetadataColumnIdentityExprs(this.columns[H]));if(!_.isEmpty(V)){var G=Array.apply(null,Array(V.length)).map(function(){return m});c=(0,he.xD)(c,(0,Ce.R)(V,G))}}return c},b.getInExprByLevel=function(c){for(var d,m=0,V=(0,ve.Li)(c);m<V.length;m++){var H=V[m],G=(0,De.FD)(H);d=d?(0,he.or)(d,G):G||H}return d},b.prototype.hasDefaultValue=function(){if(!_.isEmpty(this.columns))return null!=(0,ce.NA)(this.columns[0].objects,X.gO.general.defaultValue)},b.buildExprsFromSelectorsByLevel=function(c,v){var d;for(var m in void 0===v&&(v=!1),c){var V=b.getInExprByLevel(c[m]);d=d?(0,he.or)(d,V):V}return v&&d&&(d=(0,he.ff)(d)),d},b.prototype.buildSelectorsByLevel=function(){if(!_.isEmpty(this.selected)){for(var c={},v={},d={},m=0,V=0,H=this.selected;V<H.length;V++){for(var G=H[V],ee=-1,be=G,de={data:[]};be;)de.data.unshift(be.scopeIdentity),be=be.parent,ee++;if(m=Math.max(m,ee),(0,J.OO)(G,this.isInvertedSelectionMode)){var se=this.getFirstUnselectedParent(G,this.isInvertedSelectionMode),T=c;se&&(T=(Fe=this.ensureState(se,d)).selectedChildren),T[ee]=T[ee]||[],T[ee].push(de)}else{var Fe;(Fe=this.ensureState(G,d)).selector=de,v[ee]=v[ee]||[],v[ee].push(Fe)}}return{selected:c,unselected:v,maxLevel:m}}},b.buildExprForUnselectedState=function(c,v){var d,m={};for(var V in c){for(var G=[],ee=[],be=0,de=c[V];be<de.length;be++){var se=de[be];_.isEmpty(se.selectedChildren)?ee.push(se.selector):G.push(se)}if(_.isEmpty(ee)||(m[V]=ee),!_.isEmpty(G)){var T=b.getExprForUnselectedStateWithSelection(G);d=d?(0,he.xD)(T,d):T}}var Fe=b.buildExprsFromSelectorsByLevel(m,v);return d?(0,he.xD)(Fe,d):Fe},b.getExprForUnselectedStateWithSelection=function(c){for(var v,d=0,m=c;d<m.length;d++){var V=m[d],H=b.buildExprsFromSelectorsByLevel(V.selectedChildren),G=(0,he.ff)(b.getInExprByLevel([V.selector])),ee=(0,he.or)(H,G);v=v?(0,he.xD)(ee,v):ee}return v},b.prototype.ensureState=function(c,v){var d=v[c.identity.getKey()];return d||(d={selector:{},selectedChildren:{}},v[c.identity.getKey()]=d),d},b.prototype.getFirstUnselectedParent=function(c,v){for(;c;){if(c.selected&&!(0,J.OO)(c,v))return c;c=c.parent}},b.createChangeForProperty=function(c,v){var d={},m={objectName:c.objectName,selector:void 0,properties:d};return null==v?(d[c.propertyName]={},{remove:[m]}):(d[c.propertyName]=v,{merge:[m]})},b.prototype.adjustStrictSingleSelectSelection=function(c){if(this.isStrictSingleSelect&&!_.isEmpty(c)&&(1!==_.filter(c,function(se){return se.selected}).length||this.isInvertedSelectionMode)){var d;if(c.length>1){for(var m=0,V=c;m<V.length;m++){var H=V[m];if(H.selected&&!this.isInvertedSelectionMode||!H.selected&&this.isInvertedSelectionMode){d=H;break}}if(!d)if((0,J.R6)({columns:this.columns}))for(var ee=0,be=c;ee<be.length;ee++){var de=be[ee];if(!de.disabled){d=de;break}}else d=c[0]}this.isInvertedSelectionMode&&this.toggleSelectionModeInversion(null==d),d&&(d.selected=!0,this.selected=[d],this.persistSelectionFilter(X.gO.general.filter,void 0,!0))}},b}()},60810:function(nt,We,y){"use strict";y.d(We,{G:function(){return X},J:function(){return Z}});var X=function(h){return h[h.NoOperation=0]="NoOperation",h[h.WaitingForData=1]="WaitingForData",h[h.TriggeredLoadMore=2]="TriggeredLoadMore",h}({}),Z=function(){function h(ve){this.hostServices=ve,this.waitingForData=!1}return h.prototype.shouldLoadMoreData=function(){return this.shouldLoadMoreDataInternal()===X.TriggeredLoadMore},h.prototype.isLoadingMoreData=function(){return this.waitingForData},h.prototype.updateDataView=function(ve){this.dataView=ve},h.prototype.loadMoreData=function(){var ve=this.shouldLoadMoreDataInternal();return ve===X.TriggeredLoadMore&&(this.hostServices.loadMoreData(),this.waitingForData=!0),ve},h.prototype.onLoadMoreDataCompleted=function(){this.waitingForData=!1},h.prototype.shouldLoadMoreDataInternal=function(){if(!this.dataView)return X.NoOperation;var ve=this.dataView.metadata;return this.waitingForData?X.WaitingForData:ve&&ve.segment?X.TriggeredLoadMore:X.NoOperation},h}()}}]);