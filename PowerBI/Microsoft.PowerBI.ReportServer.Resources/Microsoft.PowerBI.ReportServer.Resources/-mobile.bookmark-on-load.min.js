"use strict";(self.webpackChunkmobile=self.webpackChunkmobile||[]).push([["bookmark-on-load"],{28052:function(Q,k,t){t.r(k),t.d(k,{BookmarkOnLoadModule:function(){return W}});var c=t(81337),M=t(17966),x=t(19276),D=t(26898),P=t(83008),F=t(39445),C=t(49080),j=t(62890),I=t(9380),T=t(14463),N=t(60661),z=t(10556),U=t(62458),E=t(46544),V={provide:"bookmarkOnLoad",useFactory:function(e,o,r,p,u,d,l,s,i){var a=new Z(e,o,r,p,u,d,l,i);return s.resolve(a)},deps:[M.F,D.i,P.D,F.H,C.J,I.vZ,x.j,T.t,E.y0]},Z=function(){function e(o,r,p,u,d,l,s,i){this.bookmarkService=o,this.conceptualSchemaProxy=r,this.dataSources=p,this.explorationStateService=u,this.stateManager=d,this.featureSwitchService=l,this.explorationStateApplierService=s,this.telemetryService=i}return e.prototype.applyBookmarkOnLoad=function(o,r,p,u,d){return(0,c.mG)(this,void 0,void 0,function(){var l,s,i,a,h,O,n,v,g,B,L,y,S;return(0,c.Jh)(this,function(m){switch(m.label){case 0:return l=this.dataSources.get(),s=this.conceptualSchemaProxy.get(l),i=[s],p&&i.push(p),[4,Promise.allSettled(i)];case 1:m.sent(),a=o.bookmark,U.fF.assert(function(){return!!a},"a valid bookmark must be present"),m.label=2;case 2:return m.trys.push([2,4,,5]),n={clearUnmatchedData:!1},a.options&&(n.suppressData=(v=a.options).suppressData,n.suppressActiveSection=v.suppressActiveSection,n.suppressDisplay=v.suppressDisplay,v.applyOnlyToTargetVisuals&&(n.targetVisualNames=v.targetVisualNames)),B=(g=this.explorationStateService).apply,L=[a.explorationState,r],[4,s];case 3:if(h=B.apply(g,L.concat([m.sent(),(0,c.pi)((0,c.pi)({},n),{suppressActiveSection:!!u,applyPresentationChanges:!0,isPersistentState:1!==o.resolution})])),this.explorationStateApplierService.syncFilterState(h),1===o.resolution&&this.bookmarkService.setActiveBookmark(a),!h)return[2];if(O=(0,j.z)(h),!this.featureSwitchService.featureSwitches.bookmarkInitRefactor){y=this.stateManager.createApplyBookmarkActivity("ApplyBookmarkOnLoad",d);try{this.stateManager.applyImpact(O,r,(0,c.pi)((0,c.pi)({},n),{suppressActiveSection:!0,suppressDisplay:!0}),y),y.resolve()}catch(K){y.reject(K)}}return(0,N.oU)(r),[3,5];case 4:return S=m.sent(),this.telemetryService.logEvent(z.WZm,{bookmarkType:1===o.resolution?-1:a.type,bookmarkObjectId:a.name,errorCode:"ApplyError",pbi_source:S.stack,stack:S.message}),[3,5];case 5:return[2,h]}})})},e}(),b=t(77476),G=t(52910),H=t(77906),f=t(50423),W=function(){function e(){}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=f.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=f.\u0275\u0275defineInjector({providers:[V],imports:[b.CommonModule,G.O,H.N]}),e}()}}]);