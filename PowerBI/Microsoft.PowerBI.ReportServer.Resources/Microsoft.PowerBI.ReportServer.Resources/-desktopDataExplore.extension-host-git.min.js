"use strict";(self.webpackChunkdesktopDataExplore=self.webpackChunkdesktopDataExplore||[]).push([["extension-host-git"],{19828:function(It,at,a){a.d(at,{X:function(){return K}});var s=a(37419),r=a(47875);function K(u){return void 0===u&&(u=-1),function(O){return O.lift(new c(u,O))}}var c=function(){function u(A,M){this.count=A,this.source=M}return u.prototype.call=function(M,V){return V.subscribe(new N(M,this.count,this.source))},u}(),N=function(u){function O(M,V,f){var L;return(L=u.call(this,M)||this).count=V,L.source=f,L}return(0,s.Z)(O,u),O.prototype.error=function(V){if(!this.isStopped){var f=this.source,L=this.count;if(0===L)return u.prototype.error.call(this,V);L>-1&&(this.count=L-1),f.subscribe(this._unsubscribeAndRecycle())}},O}(r.L)},18176:function(It,at,a){a.d(at,{Ug:function(){return Z},su:function(){return A},ce:function(){return V},Kl:function(){return f},i:function(){return L},bE:function(){return P},xU:function(){return st},aw:function(){return o},Zt:function(){return z},P9:function(){return _t},mK:function(){return ct},ZH:function(){return it},WV:function(){return J},nD:function(){return Q},Jv:function(){return gt},h_:function(){return mt}});var s=a(60225),r=a(19828),K=a(14172),c=a(59822),N=a(68698),u=a(50423),O=function(){function v(I){this.httpService=I}return v.prototype.getData=function(I){var T=this.createNoRetriesRequestOptions();return this.httpService.get(I,T).pipe((0,r.X)(0),(0,K.U)(function(U){return U.data}))},v.prototype.postData=function(I,T){var U=this.createNoRetriesRequestOptions();return this.httpService.post(I,T,U).pipe(this.retryWithTransform(),(0,K.U)(function(b){return b.data}))},v.prototype.deleteData=function(I){var T=this.createNoRetriesRequestOptions();return this.httpService.delete(I,T).pipe((0,r.X)(0),(0,K.U)(function(U){return U.data}))},v.prototype.createNoRetriesRequestOptions=function(){var I=this.httpService.powerbiRequestOptions();return I.disableRetriesOnServerError=!0,I.retryCount=0,I.signInOnConditionalAccessErrors=!1,I},v.prototype.retryWithTransform=function(){return function(I){return I.pipe((0,r.X)(0),(0,c.K)(function(T){return(0,s._)(T)}),(0,K.U)(function(T){return{data:T.data}}))}},v.\u0275fac=function(T){return new(T||v)(u.\u0275\u0275inject(N.s))},v.\u0275prov=u.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac,providedIn:"root"}),v}(),A=function(){function v(I){this.httpUtils=I}return v.prototype.branchOut=function(I,T){return this.httpUtils.postData("metadata/git/workspaces/".concat(I,"/branchOut"),T)},v.\u0275fac=function(T){return new(T||v)(u.\u0275\u0275inject(O))},v.\u0275prov=u.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac}),v}(),M=a(81337),V=function(){function v(I){this.httpUtils=I}return v.prototype.commitArtifacts=function(I,T){return this.httpUtils.postData("metadata/git/workspaces/".concat(I,"/commitToGit?skipHeadValidation=true"),T).pipe((0,K.U)(function(U){return(0,M.__assign)((0,M.__assign)({},U),{responseDate:new Date(Date.now())})}))},v.\u0275fac=function(T){return new(T||v)(u.\u0275\u0275inject(O))},v.\u0275prov=u.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac}),v}(),f=function(){function v(I){this.httpUtils=I}return v.prototype.postConfigureCredentials=function(I,T){return this.httpUtils.postData("/metadata/git/workspaces/".concat(I,"/configureCredentials"),T)},v.prototype.deleteConfiguredCredentials=function(I){return this.httpUtils.deleteData("/metadata/git/workspaces/".concat(I,"/configureCredentials"))},v.\u0275fac=function(T){return new(T||v)(u.\u0275\u0275inject(O))},v.\u0275prov=u.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac,providedIn:"root"}),v}(),L=function(){function v(I){this.httpUtils=I}return v.prototype.getGitConnectionDetails=function(I){return this.httpUtils.getData("/metadata/git/workspaces/".concat(I,"/connection"))},v.prototype.setGitConnectionDetails=function(I,T){return this.httpUtils.postData("/metadata/git/workspaces/".concat(I,"/connection"),T)},v.prototype.checkoutBranch=function(I,T){return this.httpUtils.postData("/metadata/git/workspaces/".concat(I,"/checkoutBranch"),T)},v.prototype.deleteGitConnectionDetails=function(I){return this.httpUtils.deleteData("/metadata/git/workspaces/".concat(I,"/connection"))},v.\u0275fac=function(T){return new(T||v)(u.\u0275\u0275inject(O))},v.\u0275prov=u.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac}),v}(),R=a(18016),P=function(){function v(I){this.httpUtils=I}return v.prototype.getOrganizations=function(I,T){return this.httpUtils.getData("/metadata/git/organizations?gitProviderType=".concat(R.IS[I],"&workspaceId=").concat(T))},v.prototype.getProjects=function(I,T,U){return this.httpUtils.getData("/metadata/git/projects?gitProviderType=".concat(R.IS[I],"&organizationName=").concat(T,"&workspaceId=").concat(U))},v.prototype.getRepositories=function(I,T,U,b){return this.httpUtils.getData("/metadata/git/repositories?gitProviderType=".concat(R.IS[I],"&organizationName=").concat(T,"&projectName=").concat(U,"&workspaceId=").concat(b))},v.prototype.getBranches=function(I,T,U,b,H,w){var G="/metadata/git/branches?workspaceId=".concat(I,"&gitProviderType=").concat(R.IS[T],"&organizationName=").concat(U,"&repositoryName=").concat(b);return H&&(G+="&projectName=".concat(H)),w&&(G+="&datasourceOID=".concat(w)),this.httpUtils.getData(G)},v.prototype.createBranch=function(I){return this.httpUtils.postData("/metadata/git/branches",I)},v.prototype.createDirectory=function(I){return this.httpUtils.postData("/metadata/git/directory",I)},v.prototype.getRelatedWorkspaces=function(I){return this.httpUtils.getData("/metadata/git/workspaces/".concat(I,"/relatedWorkspaces"))},v.\u0275fac=function(T){return new(T||v)(u.\u0275\u0275inject(O))},v.\u0275prov=u.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac,providedIn:"root"}),v}(),o=function(){function v(I){this.httpUtils=I}return v.prototype.createDatasource=function(I){return this.httpUtils.postData("/v2.0/myorg/me/gatewayClusterCloudDatasource",I)},v.prototype.discoverDatasources=function(){return this.httpUtils.postData("/v2.0/myorg/me/gatewayClusterDatasources",{datasourceTypes:["Extension"]})},v.prototype.getDatasource=function(I){var T="/v2.0/myorg/me/gatewayClusterDatasources/".concat(I);return this.httpUtils.getData(T)},v.\u0275fac=function(T){return new(T||v)(u.\u0275\u0275inject(O))},v.\u0275prov=u.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac,providedIn:"root"}),v}(),z=function(){function v(I){this.httpUtils=I}return v.prototype.initializeGitConnection=function(I,T){return this.httpUtils.postData("/metadata/git/workspaces/".concat(I,"/connection/initialize"),T)},v.\u0275fac=function(T){return new(T||v)(u.\u0275\u0275inject(O))},v.\u0275prov=u.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac}),v}(),ct=function(){function v(I){this.httpUtils=I}return v.prototype.getUncommittedChanges=function(I){return this.getData(I,"uncommittedChanges")},v.prototype.getIncomingChanges=function(I){return this.getData(I,"incomingChanges")},v.prototype.getGitStatus=function(I){return this.getData(I,"gitStatus")},v.prototype.getData=function(I,T){var U="metadata/git/workspaces/".concat(I,"/").concat(T);return this.httpUtils.getData(U)},v.\u0275fac=function(T){return new(T||v)(u.\u0275\u0275inject(O))},v.\u0275prov=u.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac}),v}(),J=function(){function v(I){this.httpUtils=I}return v.prototype.getlatestGitOperation=function(I){return this.httpUtils.getData("metadata/git/workspaces/".concat(I,"/latestGitOperationV2"))},v.\u0275fac=function(T){return new(T||v)(u.\u0275\u0275inject(O))},v.\u0275prov=u.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac}),v}(),it=function(){function v(I){this.httpUtils=I}return v.prototype.switchBranch=function(I,T){return this.httpUtils.postData("/metadata/git/workspaces/".concat(I,"/switchBranch"),T)},v.\u0275fac=function(T){return new(T||v)(u.\u0275\u0275inject(O))},v.\u0275prov=u.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac}),v}(),Q=function(){function v(I){this.httpUtils=I}return v.prototype.undoCommitArtifacts=function(I,T){return this.httpUtils.postData("metadata/git/workspaces/".concat(I,"/undo"),T)},v.\u0275fac=function(T){return new(T||v)(u.\u0275\u0275inject(O))},v.\u0275prov=u.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac}),v}(),gt=function(){function v(I){this.httpUtils=I}return v.prototype.UpdateArtifactsFromGit=function(I,T){return this.httpUtils.postData("metadata/git/workspaces/".concat(I,"/updateFromGit"),T).pipe((0,K.U)(function(U){return(0,M.__assign)((0,M.__assign)({},U),{responseDate:new Date(Date.now())})}))},v.\u0275fac=function(T){return new(T||v)(u.\u0275\u0275inject(O))},v.\u0275prov=u.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac}),v}(),_t=function(){function v(I){this.httpUtils=I}return v.prototype.gitRepairItems=function(I,T){return this.httpUtils.postData("metadata/git/workspaces/".concat(I,"/repairGitItems"),T).pipe((0,K.U)(function(U){return(0,M.__assign)({},U)}))},v.\u0275fac=function(T){return new(T||v)(u.\u0275\u0275inject(O))},v.\u0275prov=u.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac}),v}();function mt(v){return v&&"string"==typeof v.extensionDataSourceKind&&"string"==typeof v.extensionDataSourcePath}var st=function(v){return v[v.Undefined=0]="Undefined",v[v.Completed=1]="Completed",v[v.UpdateFromGitRequired=2]="UpdateFromGitRequired",v[v.CommitToGitRequired=3]="CommitToGitRequired",v[v.Failed=100]="Failed",v}({}),ft=a(77476),Z=function(){function v(){}return v.forRoot=function(){return{ngModule:v,providers:[]}},v.\u0275fac=function(T){return new(T||v)},v.\u0275mod=u.\u0275\u0275defineNgModule({type:v}),v.\u0275inj=u.\u0275\u0275defineInjector({providers:[A,V,f,L,P,o,O,z,ct,J,it,Q,gt,_t],imports:[ft.CommonModule]}),v}()},70628:function(It,at,a){a.d(at,{CmZ:function(){return Q},DAQ:function(){return Rn},j3q:function(){return ht},f$Z:function(){return We},iAv:function(){return uo},REK:function(){return Wn},gCl:function(){return ro},F8e:function(){return je},pPx:function(){return Ir},CCT:function(){return Yn},Gui:function(){return J},ND3:function(){return ft},x6e:function(){return u},V_q:function(){return Ut}});var s=a(60756),r=a(85732),K=a(18176),c=a(81337),N=a(8894),u=(0,r.PH)("[GitStatus] Load Uncommitted Changes",(0,r.Ky)()),O=(0,r.PH)("[GitStatus] Load Uncommitted Changes Success",(0,r.Ky)()),A=(0,r.PH)("[GitStatus] Load Uncommitted Changes Failure",(0,r.Ky)()),M=(0,r.PH)("[GitStatus] Load Incoming Changes",(0,r.Ky)()),V=(0,r.PH)("[GitStatus] Load Incoming Changes Success",(0,r.Ky)()),f=(0,r.PH)("[GitStatus] Load Incoming Changes Failure",(0,r.Ky)()),L=(0,r.PH)("[GitStatus] set selection of artifact in changes tab",(0,r.Ky)()),R=(0,r.PH)("[GitStatus] clear selection of artifact in changes tab",(0,r.Ky)()),P=(0,r.PH)("[GitConnection] Invalidate Git status",(0,r.Ky)()),o=(0,r.PH)("[GitStatus] Load Git Status",(0,r.Ky)()),z=(0,r.PH)("[GitStatus] Load Git Status Success",(0,r.Ky)()),ct=(0,r.PH)("[GitStatus] Load Git Status Failure",(0,r.Ky)()),J=function(t){return t[t.Initial=0]="Initial",t[t.Loading=1]="Loading",t[t.Loaded=2]="Loaded",t}({}),Q=function(t){return t[t.Initial=0]="Initial",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t}({}),gt=function(t){return t[t.Initial=0]="Initial",t[t.Committing=1]="Committing",t[t.Committed=2]="Committed",t}({}),_t=function(t){return t[t.Initial=0]="Initial",t[t.Undoing=1]="Undoing",t[t.Undone=2]="Undone",t}({}),mt=function(t){return t[t.Initial=0]="Initial",t[t.Updating=1]="Updating",t[t.Updated=2]="Updated",t}({}),st=function(t){return t[t.None=0]="None",t[t.CommitFlowInProgress=1]="CommitFlowInProgress",t[t.CommitInitialFlowInProgress=2]="CommitInitialFlowInProgress",t[t.UpdateFlowInProgress=3]="UpdateFlowInProgress",t[t.UpdateInitialFlowInProgress=4]="UpdateInitialFlowInProgress",t[t.UndoFlowInProgress=5]="UndoFlowInProgress",t[t.CheckoutBranchFlowInProgress=6]="CheckoutBranchFlowInProgress",t[t.SwitchBranchFlowInProgress=7]="SwitchBranchFlowInProgress",t}({}),ft=function(t){return t[t.Initial=0]="Initial",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t}({}),Z=function(t){return t[t.Initial=0]="Initial",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t}({}),ht=function(t){return t[t.Initial=0]="Initial",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t}({}),v=function(t){return t[t.Initial=0]="Initial",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t}({}),T=(0,N.H)({selectId:function(e){return e.workspaceId}}),U=(0,c.__assign)({},T.getInitialState()),b=(0,r.Lq)(U,(0,r.on)(o,function(t,e){return T.upsertOne({workspaceId:e.workspaceId,statusCallState:J.Loading},t)}),(0,r.on)(z,function(t,e){return T.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitStatus),{statusCallState:J.Loaded}),t)}),(0,r.on)(ct,function(t,e){return T.upsertOne({workspaceId:e.workspaceId,statusCallState:e.error},t)}),(0,r.on)(u,function(t,e){return T.upsertOne({workspaceId:e.workspaceId,uncommittedChangesCallState:J.Loading},t)}),(0,r.on)(O,function(t,e){var i,n,d,_,y,C=e.gitStatus;return T.upsertOne({workspaceId:C.workspaceId,head:C.head,gitChanges:(0,c.__spreadArray)((0,c.__spreadArray)([],null!==(d=null===(n=null===(i=t.entities[C.workspaceId])||void 0===i?void 0:i.gitChanges)||void 0===n?void 0:n.filter(function(S){return S.remoteChange}))&&void 0!==d?d:[],!0),null!==(_=C?.gitChanges)&&void 0!==_?_:[],!0),incomingChangesCommitHash:null===(y=t.entities[C.workspaceId])||void 0===y?void 0:y.incomingChangesCommitHash,uncommittedChangesCallState:J.Loaded},t)}),(0,r.on)(A,function(t,e){return T.upsertOne({workspaceId:e.workspaceId,uncommittedChangesCallState:e.error},t)}),(0,r.on)(M,function(t,e){return T.upsertOne({workspaceId:e.workspaceId,incomingChangesCallState:J.Loading},t)}),(0,r.on)(V,function(t,e){var i,n,d,_,y=e.gitStatus;return T.upsertOne({workspaceId:y.workspaceId,head:y.head,gitChanges:(0,c.__spreadArray)((0,c.__spreadArray)([],null!==(d=null===(n=null===(i=t.entities[y.workspaceId])||void 0===i?void 0:i.gitChanges)||void 0===n?void 0:n.filter(function(C){return C.workspaceChange}))&&void 0!==d?d:[],!0),null!==(_=y?.gitChanges)&&void 0!==_?_:[],!0),incomingChangesCommitHash:y.incomingChangesCommitHash,incomingChangesCallState:J.Loaded},t)}),(0,r.on)(f,function(t,e){return T.upsertOne({workspaceId:e.workspaceId,incomingChangesCallState:e.error},t)}),(0,r.on)(L,function(t,e){var i,n,d=e.workspaceId,_=e.artifactId,y=e.logicalId,S=(null===(n=null===(i=t.entities[d])||void 0===i?void 0:i.uncommittedChangesArtifactSelectionState)||void 0===n?void 0:n.selectedArtifacts)||[],E=e.isChecked?S.concat({artifactId:_,logicalId:y}):S.filter(function(B){return B.artifactId!==_||B.logicalId!==y});return T.upsertOne({workspaceId:d,uncommittedChangesArtifactSelectionState:{selectedArtifacts:E}},t)}),(0,r.on)(R,function(t,e){return T.updateOne({id:e.workspaceId,changes:{uncommittedChangesArtifactSelectionState:{selectedArtifacts:[]}}},t)}),(0,r.on)(P,function(t,e){return T.removeOne(e.workspaceId,t)})),w=a(18016),G=(0,r.PH)("[GitConnection] Initialize Git connection",(0,r.Ky)()),m=(0,r.PH)("[GitConnection] Initialize Git connection success",(0,r.Ky)()),h=(0,r.PH)("[GitConnection] Initialize Git connection failure",(0,r.Ky)()),l=(0,r.PH)("[GitConnection] Invalidate Git connection initialization",(0,r.Ky)()),D=(0,r.PH)("[GitConnection] Load Git Connection",(0,r.Ky)()),k=(0,r.PH)("[GitConnection] Load Git Connection Success",(0,r.Ky)()),X=(0,r.PH)("[GitConnection] Load Git Connection Failure",(0,r.Ky)()),q=(0,r.PH)("[GitConnection] Ensure Git Connection",(0,r.Ky)()),rt=(0,r.PH)("[GitConnection] Save Git Connection",(0,r.Ky)()),tt=(0,r.PH)("[GitConnection] Save Git Connection Success",(0,r.Ky)()),St=(0,r.PH)("[GitConnection] Save Git Connection Failure",(0,r.Ky)()),Ot=(0,r.PH)("[GitConnection] Delete Git Connection",(0,r.Ky)()),g=(0,r.PH)("[GitConnection] Delete Git Connection Success",(0,r.Ky)()),j=(0,r.PH)("[GitConnection] Delete Git Connection Failure",(0,r.Ky)()),ot=(0,r.PH)("[GitConnection] Git Checkout Branch",(0,r.Ky)()),Et=(0,r.PH)("[GitConnection] Git Checkout Branch Success",(0,r.Ky)()),Mt=(0,r.PH)("[GitConnection] Git Checkout Branch Failure",(0,r.Ky)()),Ut=(0,r.PH)("[GitConnection] Update datasource in GitConnection",(0,r.Ky)()),bt=(0,r.PH)("[GitSync] Get latest git alm operation",(0,r.Ky)()),Bt=(0,r.PH)("[GitSync] Get latest git alm operation Success",(0,r.Ky)()),xt=(0,r.PH)("[GitSync] Get latest git alm operation Failure",(0,r.Ky)()),Tt=(0,r.PH)("[GitConnection] Invalidate Git sync",(0,r.Ky)()),Kt=(0,r.PH)("[GitSwitchBranch] Git Switch Branch",(0,r.Ky)()),Rt=(0,r.PH)("[GitSwitchBranch] Git Switch Branch Success",(0,r.Ky)()),et=(0,r.PH)("[GitSwitchBranch] Git Switch Branch In Progress",(0,r.Ky)()),W=(0,r.PH)("[GitSwitchBranch] Git Switch Branch Failure server error",(0,r.Ky)()),lt=(0,r.PH)("[GitSwitchBranch] Git Switch Branch Failure",(0,r.Ky)()),Gt=(0,r.PH)("[GitBranchOut] Branch Out",(0,r.Ky)()),At=(0,r.PH)("[GitBranchOut] Branch Out success",(0,r.Ky)()),Ft=(0,r.PH)("[GitBranchOut] Branch Out failure",(0,r.Ky)()),Dt=(0,r.PH)("[GitBranchOut] Branch Out requires to sync folder into store",(0,r.Ky)()),se=(0,r.PH)("[GitBranchOut] Branch Out completed",(0,r.Ky)()),le=(0,r.PH)("[GitBranchOut] Branch Out requires to sync folder into store without update",(0,r.Ky)()),Wi=(0,r.PH)("[GitBranchOut] Branch Out store invalidate",(0,r.Ky)()),wt=(0,N.H)({selectId:function(e){return e.workspaceId}}),ge=(0,c.__assign)({},wt.getInitialState()),$i=(0,r.Lq)(ge,(0,r.on)(D,Ot,function(t,e){return wt.upsertOne({workspaceId:e.workspaceId,callState:Q.InProgress},t)}),(0,r.on)(rt,function(t,e){return wt.upsertOne({workspaceId:e.gitConnection.workspaceId,callState:Q.InProgress},t)}),(0,r.on)(ot,function(t,e){return wt.upsertOne({workspaceId:e.gitCheckoutBranchState.workspaceId,callState:Q.InProgress},t)}),(0,r.on)(k,tt,function(t,e){return wt.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitConnection),{callState:Q.Completed}),t)}),(0,r.on)(Et,function(t,e){var i,n=e.gitCheckoutBranchState,d=n.workspaceId,_=null===(i=t.entities[d])||void 0===i?void 0:i.gitConnectionDetails;return wt.updateOne({id:d,changes:{gitConnectionDetails:(0,c.__assign)((0,c.__assign)({},_),{branchName:n.request.branchName}),callState:Q.Completed}},t)}),(0,r.on)(et,function(t,e){var i,n=e.gitSwitchBranchState,d=n.workspaceId;return void 0!==(null===(i=n?.request)||void 0===i?void 0:i.targetBranchName)?function(t,e,i){var n,d=null===(n=t.entities[e])||void 0===n?void 0:n.gitConnectionDetails;return wt.updateOne({id:e,changes:{gitConnectionDetails:(0,c.__assign)((0,c.__assign)({},d),{branchName:i}),callState:Q.Completed}},t)}(t,d,n.request.targetBranchName):t}),(0,r.on)(Ut,function(t,e){var i,n=e.workspaceId,d=e.datasourceOID,_=null===(i=t.entities[n])||void 0===i?void 0:i.gitConnectionDetails;return wt.updateOne({id:n,changes:{gitConnectionDetails:(0,c.__assign)((0,c.__assign)({},_),{datasourceOID:d}),callState:Q.Completed}},t)}),(0,r.on)(g,function(t,e){return wt.removeOne(e.workspaceId,t)}),(0,r.on)(X,j,Mt,function(t,e){return wt.updateOne({id:e.workspaceId,changes:{callState:e.error}},t)}),(0,r.on)(St,function(t,e){return wt.updateOne({id:e.gitConnection.workspaceId,changes:{callState:e.error}},t)}),(0,r.on)(m,function(t,e){var i,n,d=e.gitInitializationStateWithResponse,_=d.workspaceId,y=null===(i=t.entities[_])||void 0===i?void 0:i.gitConnectionDetails;return wt.updateOne({id:_,changes:{gitConnectionDetails:(0,c.__assign)((0,c.__assign)({},y),{isInitialized:!0,head:null===(n=d.response)||void 0===n?void 0:n.head})}},t)}),(0,r.on)(At,function(t,e){var i,n,d,_,y,C,S=e.gitBranchOutState;if(void 0===(null===(i=S.response)||void 0===i?void 0:i.folder))return t;var E=null===(d=null===(n=S.response)||void 0===n?void 0:n.folder)||void 0===d?void 0:d.objectId,F=null===(_=t.entities[S.workspaceId])||void 0===_?void 0:_.gitConnectionDetails,x=(0,c.__assign)((0,c.__assign)({},F),{head:null===(C=null===(y=S.response)||void 0===y?void 0:y.initializeConnectionStatus)||void 0===C?void 0:C.head,branchName:S.request.targetBranchName});return wt.upsertOne((0,c.__assign)((0,c.__assign)({},x),{workspaceId:E,callState:Q.Completed}),t)}),(0,r.on)(O,V,z,function(t,e){var i,n,d,_=e.gitStatus,y=_.workspaceId,C=null===(i=t.entities[y])||void 0===i?void 0:i.gitConnectionDetails;return _.head&&_.head!==(null===(d=null===(n=t.entities[_.workspaceId])||void 0===n?void 0:n.gitConnectionDetails)||void 0===d?void 0:d.head)?wt.updateOne({id:y,changes:{gitConnectionDetails:(0,c.__assign)((0,c.__assign)({},C),{head:_.head})}},t):t}),(0,r.on)(Bt,function(t,e){var i,n,d=e.gitSyncState,_=d.workspaceId,y=null===(i=t.entities[_])||void 0===i?void 0:i.gitConnectionDetails;return d.gitOperationStatus!==w.wM.Successful?t:wt.updateOne({id:_,changes:{gitConnectionDetails:(0,c.__assign)((0,c.__assign)({},y),{lastSyncTime:null===(n=d.lastUpdatedTime)||void 0===n?void 0:n.toString()})}},t)})),de=(0,r.PH)("[CommitToGit] Commit Changes To Git",(0,r.Ky)()),te=(0,r.PH)("[CommitToGit] Commit Changes To Git inProgress",(0,r.Ky)()),fe=(0,r.PH)("[CommitToGit] Commit Changes To Git success",(0,r.Ky)()),he=(0,r.PH)("[CommitToGit] Commit Changes To Git failure server error ",(0,r.Ky)()),me=(0,r.PH)("[CommitToGit] Commit Changes To Git failure ",(0,r.Ky)()),Lt=(0,N.H)({selectId:function(e){return e.workspaceId}}),Ge=(0,c.__assign)({},Lt.getInitialState()),Xi=(0,r.Lq)(Ge,(0,r.on)(de,function(t,e){return Lt.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitCommitState),{callState:gt.Committing}),t)}),(0,r.on)(te,function(t,e){return Lt.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitCommitState),{callState:gt.Committing}),t)}),(0,r.on)(fe,function(t,e){return Lt.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitCommitStateWithResponse),{callState:gt.Committed,notificationId:void 0}),t)}),(0,r.on)(he,function(t,e){return Lt.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitCommitState),{callState:gt.Committed,notificationId:void 0}),t)}),(0,r.on)(me,function(t,e){var n=e.error;return Lt.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitCommitState),{callState:n,notificationId:void 0}),t)}),(0,r.on)(l,function(t,e){return Lt.removeOne(e.workspaceId,t)})),ee=(0,r.PH)("[UpdateFromGit] Update Changes From Git",(0,r.Ky)()),ie=(0,r.PH)("[UpdateFromGit] Update Changes From Git InProgress",(0,r.Ky)()),Se=(0,r.PH)("[UpdateFromGit] Update Changes From Git success",(0,r.Ky)()),Ie=(0,r.PH)("[UpdateFromGit] Update Changes From Git failure ",(0,r.Ky)()),ye=(0,r.PH)("[UpdateFromGit] Update Changes From Git failure server error",(0,r.Ky)()),Ht=(0,N.H)({selectId:function(e){return e.workspaceId}}),Ce=(0,c.__assign)({},Ht.getInitialState()),Zi=(0,r.Lq)(Ce,(0,r.on)(ee,function(t,e){return Ht.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitUpdateState),{callState:mt.Updating}),t)}),(0,r.on)(ie,function(t,e){return Ht.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitUpdateState),{callState:mt.Updating}),t)}),(0,r.on)(Se,function(t,e){return Ht.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitUpdateStateWithResponse),{callState:mt.Updated,notificationId:void 0}),t)}),(0,r.on)(ye,function(t,e){var n=e.error;return Ht.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitUpdateState),{callState:n,notificationId:void 0}),t)}),(0,r.on)(Ie,function(t,e){var n=e.error;return Ht.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitUpdateState),{callState:n,notificationId:void 0}),t)}),(0,r.on)(l,function(t,e){return Ht.removeOne(e.workspaceId,t)})),Qt=(0,N.H)({selectId:function(e){return e.workspaceId}}),Ee=(0,c.__assign)({},Qt.getInitialState()),qi=(0,r.Lq)(Ee,(0,r.on)(G,function(t,e){return Qt.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitInitializationState),{callState:Q.InProgress}),t)}),(0,r.on)(m,function(t,e){return Qt.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitInitializationStateWithResponse),{callState:Q.Completed}),t)}),(0,r.on)(h,function(t,e){var n=e.error;return Qt.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitInitializationState),{callState:n}),t)}),(0,r.on)(l,function(t,e){return Qt.removeOne(e.workspaceId,t)})),Xt=(0,N.H)({selectId:function(e){return e.workspaceId}}),Te=(0,c.__assign)({},Xt.getInitialState()),er=(0,r.Lq)(Te,(0,r.on)(bt,function(t,e){return Xt.upsertOne({workspaceId:e.workspaceId,isValid:!0,isInitial:!!e.isInitial,callState:Q.InProgress},t)}),(0,r.on)(Bt,function(t,e){return Xt.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitSyncState),{callState:Q.Completed}),t)}),(0,r.on)(xt,function(t,e){return Xt.updateOne({id:e.workspaceId,changes:{callState:e.error,isValid:!1}},t)}),(0,r.on)(Tt,function(t,e){return Xt.removeOne(e.workspaceId,t)})),ue=(0,r.PH)("[undoFromGit] Undo changes From Git",(0,r.Ky)()),re=(0,r.PH)("[undoFromGit] Undo changes From Git inProgress",(0,r.Ky)()),De=(0,r.PH)("[undoFromGit] Undo changes From Git success",(0,r.Ky)()),we=(0,r.PH)("[undoFromGit] Undo changes From Git failure server error ",(0,r.Ky)()),Oe=(0,r.PH)("[undoFromGit] Undo changes From Git failure ",(0,r.Ky)()),Wt=(0,N.H)({selectId:function(e){return e.workspaceId}}),Be=(0,c.__assign)({},Wt.getInitialState()),rr=(0,r.Lq)(Be,(0,r.on)(ue,function(t,e){return Wt.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitUndoState),{callState:_t.Undoing}),t)}),(0,r.on)(re,function(t,e){return Wt.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitUndoState),{callState:_t.Undoing}),t)}),(0,r.on)(De,function(t,e){return Wt.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitUndoStateWithResponse),{callState:_t.Undone,notificationId:void 0}),t)}),(0,r.on)(we,function(t,e){var n=e.error;return Wt.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitUndoState),{callState:n,notificationId:void 0}),t)}),(0,r.on)(Oe,function(t,e){var n=e.error;return Wt.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitUndoState),{callState:n,notificationId:void 0}),t)}),(0,r.on)(l,function(t,e){return Wt.removeOne(e.workspaceId,t)})),ut=function(t){return t[t.None=0]="None",t[t.GitActionStart=1]="GitActionStart",t[t.GitActionInProgress=2]="GitActionInProgress",t[t.GitActionDone=3]="GitActionDone",t[t.GitSyncStart=4]="GitSyncStart",t[t.GitSyncInProgress=5]="GitSyncInProgress",t[t.GitSyncDone=6]="GitSyncDone",t}({}),Pt=function(t){return t[t.None=0]="None",t[t.Commit=1]="Commit",t[t.Update=2]="Update",t[t.Undo=3]="Undo",t[t.CheckoutBranch=4]="CheckoutBranch",t[t.SwitchBranch=5]="SwitchBranch",t}({}),vt=(0,N.H)({selectId:function(e){return e.workspaceId}}),Fe=(0,c.__assign)({},vt.getInitialState()),or=(0,r.Lq)(Fe,(0,r.on)(de,function(t,e){return vt.upsertOne({workspaceId:e.gitCommitState.workspaceId,activeFlowName:Pt.Commit,progressState:ut.GitActionStart,activeFlowState:e.isInitialSync?st.CommitInitialFlowInProgress:st.CommitFlowInProgress,isIntermidiateStep:!1},t)}),(0,r.on)(te,function(t,e){var i=e.gitCommitState,n=t.entities[i.workspaceId];return n&&pe(Pt.Commit,n)?vt.upsertOne((0,c.__assign)((0,c.__assign)({},n),{progressState:ut.GitActionInProgress}),t):vt.upsertOne({workspaceId:i.workspaceId,activeFlowName:Pt.Commit,progressState:ut.GitActionInProgress,activeFlowState:st.CommitFlowInProgress,isIntermidiateStep:!1},t)}),(0,r.on)(fe,function(t,e){var n=t.entities[e.gitCommitStateWithResponse.workspaceId];return n?vt.upsertOne((0,c.__assign)((0,c.__assign)({},n),{progressState:ut.GitActionDone}),t):t}),(0,r.on)(me,he,function(t,e){var n=t.entities[e.gitCommitState.workspaceId];return n?vt.upsertOne((0,c.__assign)((0,c.__assign)({},n),{activeFlowState:st.None,progressState:ut.None,isIntermidiateStep:!1}),t):t}),(0,r.on)(ue,function(t,e){return vt.upsertOne({workspaceId:e.gitUndoState.workspaceId,activeFlowName:Pt.Undo,activeFlowState:st.UndoFlowInProgress,isIntermidiateStep:!1,progressState:ut.GitActionStart},t)}),(0,r.on)(re,function(t,e){var i=e.gitUndoState,n=t.entities[i.workspaceId];return n&&pe(Pt.Undo,n)?vt.upsertOne((0,c.__assign)((0,c.__assign)({},n),{progressState:ut.GitActionInProgress}),t):vt.upsertOne({workspaceId:i.workspaceId,activeFlowName:Pt.Undo,progressState:ut.GitActionInProgress,activeFlowState:st.UndoFlowInProgress,isIntermidiateStep:!1},t)}),(0,r.on)(De,function(t,e){var n=t.entities[e.gitUndoStateWithResponse.workspaceId];return n?vt.upsertOne((0,c.__assign)((0,c.__assign)({},n),{progressState:ut.GitActionDone}),t):t}),(0,r.on)(Oe,we,function(t,e){var n=t.entities[e.gitUndoState.workspaceId];return n?vt.upsertOne((0,c.__assign)((0,c.__assign)({},n),{activeFlowState:st.None,progressState:ut.None,isIntermidiateStep:!1}),t):t}),(0,r.on)(Kt,function(t,e){return vt.upsertOne({workspaceId:e.gitSwitchBranchState.workspaceId,activeFlowName:Pt.SwitchBranch,activeFlowState:st.SwitchBranchFlowInProgress,isIntermidiateStep:!1,progressState:ut.GitActionStart},t)}),(0,r.on)(et,function(t,e){var i=e.gitSwitchBranchState,n=t.entities[i.workspaceId];return n&&pe(Pt.SwitchBranch,n)?vt.upsertOne((0,c.__assign)((0,c.__assign)({},n),{progressState:ut.GitActionInProgress}),t):vt.upsertOne({workspaceId:i.workspaceId,activeFlowName:Pt.SwitchBranch,progressState:ut.GitActionInProgress,activeFlowState:st.SwitchBranchFlowInProgress,isIntermidiateStep:!1},t)}),(0,r.on)(Rt,function(t,e){var n=t.entities[e.gitSwitchBranchState.workspaceId];return n?vt.upsertOne((0,c.__assign)((0,c.__assign)({},n),{progressState:ut.GitActionDone}),t):t}),(0,r.on)(lt,W,function(t,e){var n=t.entities[e.gitSwitchBranchState.workspaceId];return n?vt.upsertOne((0,c.__assign)((0,c.__assign)({},n),{activeFlowState:st.None,progressState:ut.None,isIntermidiateStep:!1}),t):t}),(0,r.on)(ee,function(t,e){return vt.upsertOne({workspaceId:e.gitUpdateState.workspaceId,activeFlowName:Pt.Update,activeFlowState:e.isInitialSync?st.UpdateInitialFlowInProgress:st.UpdateFlowInProgress,isIntermidiateStep:!1,progressState:ut.GitActionStart},t)}),(0,r.on)(ie,function(t,e){var i=e.gitUpdateState,n=t.entities[i.workspaceId];return n&&pe(Pt.Update,n)?vt.upsertOne((0,c.__assign)((0,c.__assign)({},n),{progressState:ut.GitActionInProgress}),t):vt.upsertOne({workspaceId:i.workspaceId,activeFlowName:Pt.Update,progressState:ut.GitActionInProgress,activeFlowState:st.UpdateFlowInProgress,isIntermidiateStep:!1},t)}),(0,r.on)(Se,function(t,e){var n=t.entities[e.gitUpdateStateWithResponse.workspaceId];return n?vt.upsertOne((0,c.__assign)((0,c.__assign)({},n),{progressState:ut.GitActionDone}),t):t}),(0,r.on)(Ie,ye,function(t,e){var n=t.entities[e.gitUpdateState.workspaceId];return n?vt.upsertOne((0,c.__assign)((0,c.__assign)({},n),{activeFlowState:st.None,progressState:ut.None,isIntermidiateStep:!1}),t):t}),(0,r.on)(M,u,o,function(t,e){var d=t.entities[e.workspaceId];return e.isTriggeredByGitAction&&d?.progressState===ut.GitActionDone?vt.upsertOne((0,c.__assign)((0,c.__assign)({},d),{isIntermidiateStep:!0,progressState:ut.GitSyncStart}),t):t}),(0,r.on)(O,V,z,function(t,e){var n=t.entities[e.gitStatus.workspaceId];return n?.isIntermidiateStep&&n?.progressState===ut.GitSyncStart?vt.upsertOne((0,c.__assign)((0,c.__assign)({},n),{activeFlowState:st.None,progressState:ut.GitSyncDone,isIntermidiateStep:!1}),t):t}),(0,r.on)(A,f,ct,function(t,e){var n=t.entities[e.workspaceId];return n?.isIntermidiateStep?vt.upsertOne((0,c.__assign)((0,c.__assign)({},n),{progressState:ut.None,isIntermidiateStep:!1}),t):t}),(0,r.on)(ot,function(t,e){return vt.upsertOne({workspaceId:e.gitCheckoutBranchState.workspaceId,activeFlowName:Pt.CheckoutBranch,activeFlowState:st.CheckoutBranchFlowInProgress,isIntermidiateStep:!1,progressState:ut.GitActionStart},t)}),(0,r.on)(Et,function(t,e){var n=t.entities[e.gitCheckoutBranchState.workspaceId];return n?vt.upsertOne((0,c.__assign)((0,c.__assign)({},n),{progressState:ut.GitActionDone}),t):t}),(0,r.on)(Mt,function(t,e){var n=t.entities[e.workspaceId];return n?vt.upsertOne((0,c.__assign)((0,c.__assign)({},n),{activeFlowState:st.None,progressState:ut.None,isIntermidiateStep:!1}),t):t}));function pe(t,e){return e.activeFlowName===t&&(e.progressState===ut.GitActionStart||e.progressState===ut.GitActionInProgress)}var $t=(0,N.H)({selectId:function(e){return e.workspaceId}}),Pe=(0,c.__assign)({},$t.getInitialState()),cr=(0,r.Lq)(Pe,(0,r.on)(Kt,function(t,e){return $t.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitSwitchBranchState),{response:void 0,callState:ft.InProgress}),t)}),(0,r.on)(et,function(t,e){return $t.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitSwitchBranchState),{callState:ft.InProgress}),t)}),(0,r.on)(Rt,function(t,e){var i=e.gitSwitchBranchState;return $t.upsertOne((0,c.__assign)((0,c.__assign)({},i),{callState:ft.Completed,response:i.response,notificationId:void 0}),t)}),(0,r.on)(W,function(t,e){return $t.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitSwitchBranchState),{callState:ft.Completed,notificationId:void 0}),t)}),(0,r.on)(lt,function(t,e){var n=e.error;return $t.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitSwitchBranchState),{callState:n,notificationId:void 0}),t)}),(0,r.on)(l,function(t,e){return $t.removeOne(e.workspaceId,t)})),Xe=(0,r.PH)("[GitSessionStorage] select Git provider type",(0,r.Ky)()),Je=(0,r.PH)("[GitSessionStorage] select datasource",(0,r.Ky)()),Ze=(0,r.PH)("[GitSessionStorage] select temp datasource",(0,r.Ky)()),Ye=(0,r.PH)("[GitSessionStorage] set datasource url",(0,r.Ky)()),qe=(0,r.PH)("[GitSessionStorage] reset datasource url",(0,r.Ky)()),ti=(0,r.PH)("[GitSessionStorage] select organization",(0,r.Ky)()),ei=(0,r.PH)("[GitSessionStorage] select repository",(0,r.Ky)()),ii=(0,r.PH)("[GitSessionStorage] select branch",(0,r.Ky)()),ri=(0,r.PH)("[GitSessionStorage] select directory",(0,r.Ky)()),ni=(0,r.PH)("[GitSessionStorage] select userAccount",(0,r.Ky)()),oi=(0,r.PH)("[GitSessionStorage] configure credentials",(0,r.Ky)()),ai=(0,r.PH)("[GitSessionStorage] delete credentials",(0,r.Ky)()),ci=(0,r.PH)("[GitSessionStorage] select workspace capacity",(0,r.Ky)()),yt=(0,N.H)({selectId:function(e){return e.workspaceId}}),ke=(0,c.__assign)({},yt.getInitialState()),lr=(0,r.Lq)(ke,(0,r.on)(Xe,function(t,e){return yt.upsertOne({workspaceId:e.workspaceId,selectedGitProviderType:e.gitProviderType},t)}),(0,r.on)(Je,function(t,e){var i=e.workspaceId,n=e.datasourceOID,d=t.entities[i];return d&&d.selectedDatasourceOID===n?t:yt.upsertOne({workspaceId:i,selectedDatasourceOID:n},t)}),(0,r.on)(Ze,function(t,e){return yt.upsertOne({workspaceId:e.workspaceId,selectedTempDatasourceOID:e.datasourceOID},t)}),(0,r.on)(ti,function(t,e){var n=e.organization;return yt.upsertOne({workspaceId:e.workspaceId,selectedOrganization:n?{name:n,setByDatasource:!1}:void 0},t)}),(0,r.on)(ei,function(t,e){var n=e.repository;return yt.upsertOne({workspaceId:e.workspaceId,selectedRepository:n?{name:n,setByDatasource:!1}:void 0},t)}),(0,r.on)(ii,function(t,e){return yt.upsertOne({workspaceId:e.workspaceId,selectedBranch:e.branch},t)}),(0,r.on)(ri,function(t,e){return yt.upsertOne({workspaceId:e.workspaceId,selectedDirectory:e.directory},t)}),(0,r.on)(Ye,function(t,e){return yt.upsertOne({workspaceId:e.workspaceId,selectedOrganization:{name:e.organization,setByDatasource:!0},selectedRepository:{name:e.repository,setByDatasource:!0}},t)}),(0,r.on)(qe,function(t,e){return yt.upsertOne({workspaceId:e.workspaceId,selectedOrganization:void 0,selectedRepository:void 0},t)}),(0,r.on)(ni,function(t,e){return yt.upsertOne({workspaceId:e.workspaceId,selectedUserAccount:e.userAccount},t)}),(0,r.on)(oi,function(t,e){return yt.upsertOne({workspaceId:e.workspaceId,isConfigured:!0},t)}),(0,r.on)(ai,function(t,e){return yt.updateOne({id:e.workspaceId,changes:{selectedUserAccount:void 0,isConfigured:!1}},t)}),(0,r.on)(k,function(t,e){var i,n,d,_=e.gitConnection;return yt.upsertOne({workspaceId:_.workspaceId,selectedGitProviderType:null===(i=_.gitConnectionDetails)||void 0===i?void 0:i.gitProviderType,selectedDatasourceOID:null===(n=_.gitConnectionDetails)||void 0===n?void 0:n.datasourceOID,isConfigured:void 0!==(null===(d=_.gitConnectionDetails)||void 0===d?void 0:d.datasourceOID)},t)}),(0,r.on)(g,function(t,e){return yt.updateOne({id:e.workspaceId,changes:{selectedBranch:void 0,selectedDatasourceOID:void 0,selectedTempDatasourceOID:void 0,selectedGitProviderType:void 0,selectedDirectory:void 0,selectedOrganization:void 0,selectedRepository:void 0,selectedUserAccount:void 0,isConfigured:void 0}},t)}),(0,r.on)(ci,function(t,e){return yt.upsertOne({workspaceId:e.workspaceId,isWorkspaceOnCapaity:e.isWorkspaceOnCapacity},t)})),jt=(0,N.H)({selectId:function(e){return e.workspaceId}}),Me=(0,c.__assign)({},jt.getInitialState()),ur=(0,r.Lq)(Me,(0,r.on)(Gt,function(t,e){return jt.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitBranchOutState),{response:void 0,callState:Z.InProgress}),t)}),(0,r.on)(At,function(t,e){var i=e.gitBranchOutState;return jt.upsertOne((0,c.__assign)((0,c.__assign)({},i),{callState:Z.InProgress,response:i.response}),t)}),(0,r.on)(Dt,function(t,e){var i=e.gitBranchOutState;return jt.upsertOne((0,c.__assign)((0,c.__assign)({},i),{callState:Z.InProgress,response:i.response}),t)}),(0,r.on)(le,function(t,e){var i=e.gitBranchOutState;return jt.upsertOne((0,c.__assign)((0,c.__assign)({},i),{callState:Z.Completed,response:i.response}),t)}),(0,r.on)(se,function(t,e){var i=e.gitBranchOutState;return jt.upsertOne((0,c.__assign)((0,c.__assign)({},i),{callState:Z.Completed,response:i.response}),t)}),(0,r.on)(Ft,function(t,e){var n=e.error;return jt.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitBranchOutState),{callState:n}),t)}),(0,r.on)(Wi,function(t,e){return jt.removeOne(e.gitBranchOutState.workspaceId,t)})),_e=(0,r.PH)("[GitDatasources] Load Datasources",(0,r.Ky)()),si=(0,r.PH)("[GitDatasources] Load Datasources Success",(0,r.Ky)()),Ae=(0,r.PH)("[GitDatasources] Load Datasources Failure",(0,r.Ky)()),Ue=(0,r.PH)("[GitDatasources] Create Datasource",(0,r.Ky)()),_r=(0,r.PH)("[GitDatasources] Create Datasource Success",(0,r.Ky)()),Ne=(0,r.PH)("[GitDatasources] Create Datasource Failure",(0,r.Ky)()),Jt=(0,N.H)({selectId:function(e){return e.workspaceId}}),be=(0,c.__assign)({},Jt.getInitialState()),vr=(0,r.Lq)(be,(0,r.on)(_e,function(t,e){return Jt.upsertOne({workspaceId:e.gitDatasourceRequest.workspaceId,callState:ht.InProgress},t)}),(0,r.on)(si,function(t,e){return Jt.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitDatasourcesState),{callState:ht.Completed}),t)}),(0,r.on)(Ae,Ne,function(t,e){return Jt.updateOne({id:e.workspaceId,changes:{callState:e.error}},t)}),(0,r.on)(Ue,function(t,e){return Jt.upsertOne({workspaceId:e.request.workspaceId,callState:ht.InProgress},t)})),li=(0,r.PH)("[GitRepairItems] Repair Items in Git",(0,r.Ky)()),fr=(0,r.PH)("[GitRepairItems] Repair Items in Git inProgress",(0,r.Ky)()),di=(0,r.PH)("[GitRepairItems] Repair Items in Git success",(0,r.Ky)()),ui=(0,r.PH)("[GitRepairItems] Repair Items in Git failure ",(0,r.Ky)()),ne=(0,N.H)({selectId:function(e){return e.workspaceId}}),Ke=(0,c.__assign)({},ne.getInitialState()),hr=(0,r.Lq)(Ke,(0,r.on)(li,fr,function(t,e){return ne.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitRepairState),{callState:v.InProgress}),t)}),(0,r.on)(di,function(t,e){var i=e.gitRepairStateWithResponse;return ne.upsertOne((0,c.__assign)((0,c.__assign)({},i),{response:i.response,callState:v.Completed}),t)}),(0,r.on)(ui,function(t,e){var n=e.error;return ne.upsertOne((0,c.__assign)((0,c.__assign)({},e.gitRepairState),{callState:n,notificationId:void 0}),t)})),Gr={gitStatus:function(t,e){return b(t,e)},gitConnection:function(t,e){return $i(t,e)},gitCommit:function(t,e){return Xi(t,e)},gitUpdate:function(t,e){return Zi(t,e)},gitInitialization:function(t,e){return qi(t,e)},gitSync:function(t,e){return er(t,e)},gitUndo:function(t,e){return rr(t,e)},gitProgressIndicator:function(t,e){return or(t,e)},gitSwitchBranch:function(t,e){return cr(t,e)},gitSessionStorage:function(t,e){return lr(t,e)},gitBranchOut:function(t,e){return ur(t,e)},gitDatasources:function(t,e){return vr(t,e)},gitRepair:function(t,e){return hr(t,e)}},kt=(0,r.ZF)("git"),pt=a(11547),$=a(14172),nt=a(81905),Ct=a(59822),Zt=a(67758),Nt=a(65232),Sr=a(12315),Ir=function(t){return t[t.SingleCall=0]="SingleCall",t[t.SeparateCalls=1]="SeparateCalls",t}({});function yr(t){var e=Sr.RG,i=e.includes(t);if(i)return t;if(!i){var n=e.findIndex(function(d){return t.toLowerCase()===d.toLowerCase()});if(n>=0)return e[n]}throw Error("Invalid ArtifactType: "+t)}function Cr(t,e){return{artifact:(0,c.__assign)((0,c.__assign)({},t.artifact),{artifactType:e.getFrontendArtifactType(t.artifact.artifactType)}),remoteChange:{displayName:t.artifact.displayName,changeType:t.gitChangeType},syncStatus:0}}function _i(t,e){var i=e.getFrontendArtifactType(t.artifact.artifactType);return{artifact:(0,c.__assign)((0,c.__assign)({},t.artifact),{artifactType:yr(i)}),workspaceChange:{displayName:t.artifact.displayName,changeType:t.gitChangeType},syncStatus:0}}function xe(t,e,i,n){return{workspaceId:t,head:e,gitChanges:i,incomingChangesCommitHash:n||void 0}}var p=a(50423),wr=function(){function t(e,i,n,d){var _=this;this.actions$=e,this.gitStatusClient=i,this.gitErrorService=n,this.extensionManifestService=d,this.loadUncommittedChanges$=(0,s.GW)(function(){return _.actions$.pipe((0,s.l4)(u),(0,$.U)(function(y){return y.workspaceId}),(0,nt.w)(function(y){return _.gitStatusClient.getUncommittedChanges(y).pipe((0,$.U)(function(C){return _.updateGitStatusWithUncommittedChanges(y,C)}),(0,$.U)(function(C){return O({gitStatus:C})}),(0,Ct.K)(function(C){var S=_.gitErrorService.makeGitErrorFromHttpResponse("Git_Status_Failed",C);return(0,pt.of)(A({workspaceId:y,error:S}))}))}))}),this.loadIncomingChanges$=(0,s.GW)(function(){return _.actions$.pipe((0,s.l4)(M),(0,$.U)(function(y){return y.workspaceId}),(0,nt.w)(function(y){return _.gitStatusClient.getIncomingChanges(y).pipe((0,$.U)(function(C){return _.updateGitStatusWithIncomingChanges(y,C)}),(0,$.U)(function(C){return V({gitStatus:C})}),(0,Ct.K)(function(C){var S=_.gitErrorService.makeGitErrorFromHttpResponse("Git_Status_Failed",C);return(0,pt.of)(f({workspaceId:y,error:S}))}))}))}),this.loadGitStatus$=(0,s.GW)(function(){return _.actions$.pipe((0,s.l4)(o),(0,$.U)(function(y){return y.workspaceId}),(0,nt.w)(function(y){return _.gitStatusClient.getGitStatus(y).pipe((0,$.U)(function(C){return _.gitStatusContractToModel(y,C)}),(0,$.U)(function(C){return z({gitStatus:C})}),(0,Ct.K)(function(C){var S=_.gitErrorService.makeGitErrorFromHttpResponse("Git_Status_Failed",C);return(0,pt.of)(ct({workspaceId:y,error:S}))}))}))})}return t.prototype.updateGitStatusWithIncomingChanges=function(e,i){var n=function(t,e){for(var i=[],n=0,d=t.changes;n<d.length;n++)i.push(Cr(d[n],e));return i}(i,this.extensionManifestService);return xe(e,i.head,n,i.targetCommit.commitId)},t.prototype.updateGitStatusWithUncommittedChanges=function(e,i){var n=function(t,e){for(var i=[],n=0,d=t.changes;n<d.length;n++)i.push(_i(d[n],e));return i}(i,this.extensionManifestService);return xe(e,i.head,n)},t.prototype.gitStatusContractToModel=function(e,i){var n,d=function(t,e){var i=[];if(null==t.changes)return i;for(var n=0,d=t.changes;n<d.length;n++){var _=d[n],y=_;y.artifact.artifactType=e.getFrontendArtifactType(_.artifact.artifactType),i.push(y)}return i}(i,this.extensionManifestService);return xe(e,i.head,d,null===(n=i.targetCommit)||void 0===n?void 0:n.commitId)},t.\u0275fac=function(i){return new(i||t)(p.\u0275\u0275inject(s.eX),p.\u0275\u0275inject(K.mK),p.\u0275\u0275inject(Nt.jR),p.\u0275\u0275inject(Zt.vC))},t.\u0275prov=p.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t}(),vi=a(37272),zt=a(12385),oe=a(94771),gi=(0,r.P1)(kt,function(t){return t?.gitConnection||ge}),fi=wt.getSelectors(),Or=fi.selectAll,Br=fi.selectEntities,hi=((0,r.P1)(gi,function(t){return Or(t)}),(0,r.P1)(gi,function(t){return Br(t)})),Re=function(e){return(0,r.P1)(hi,function(i){return i[e]})};function ae(t,e,i){return i?[o({workspaceId:t,isTriggeredByGitAction:e})]:[M({workspaceId:t,isTriggeredByGitAction:e}),u({workspaceId:t,isTriggeredByGitAction:e})]}var Fr=function(){function t(e,i,n,d,_,y,C){var S=this;this.actions$=e,this.gitConnectionDetailsClient=i,this.gitErrorService=n,this.gitNotificationService=d,this.extensionManifestService=_,this.store=y,this.featureSwitchService=C,this.ensureGitConnection$=(0,s.GW)(function(){return S.actions$.pipe((0,s.l4)(q),(0,$.U)(function(E){return E.workspaceId}),(0,s.IC)(function(E){return S.store.select(Re(E))}),(0,nt.w)(function(E){var B=E[0],F=E[1];return F?.gitConnectionDetails&&F.callState===Q.Completed||!F?.gitConnectionDetails&&(0,w.pb)(F?.callState)?vi.E:(0,pt.of)(D({workspaceId:B}))}))}),this.loadGitConnection$=(0,s.GW)(function(){return S.actions$.pipe((0,s.l4)(D),(0,$.U)(function(E){return E.workspaceId}),(0,nt.w)(function(E){return S.gitConnectionDetailsClient.getGitConnectionDetails(E).pipe((0,$.U)(function(B){return S.gitConnectionContractToModel(E,B)}),(0,$.U)(function(B){return k({gitConnection:B})}),(0,Ct.K)(function(B){var F=S.gitErrorService.makeGitErrorFromHttpResponse("Git_Connect_Failed",B);return(0,pt.of)(X({workspaceId:E,error:F}))}))}))}),this.saveGitConnection$=(0,s.GW)(function(){return S.actions$.pipe((0,s.l4)(rt),(0,$.U)(function(E){return E.gitConnection}),(0,nt.w)(function(E){if(!E.gitConnectionDetails){var B=S.gitErrorService.makeClientSideGitError("Git_Invalid_Connection_Details");return S.gitNotificationService.showErrorNotification(B,"Trident_Git_Error_Git_Invalid_Connection_Details_Title"),(0,pt.of)(St({gitConnection:E,error:B}))}var F=S.gitNotificationService.showLoadingNotification("Trident_Git_Toast_Connect_Loading");return S.gitConnectionDetailsClient.setGitConnectionDetails(E.workspaceId,E.gitConnectionDetails).pipe((0,$.U)(function(){return S.gitNotificationService.showSuccessNotification("Trident_Git_Toast_Connect_Success",F),tt({gitConnection:E})}),(0,Ct.K)(function(x){var Y=S.gitErrorService.makeGitErrorFromHttpResponse("Git_Connect_Failed",x);return(0,w.yG)(Y)?S.gitNotificationService.hideCurrentNotification():S.gitNotificationService.showErrorNotification(Y,"Trident_Git_Error_Git_Invalid_Connection_Details_Title",F),(0,pt.of)(St({gitConnection:E,error:Y}))}))}))}),this.gitCheckoutBranch$=(0,s.GW)(function(){return S.actions$.pipe((0,s.l4)(ot),(0,$.U)(function(E){return E.gitCheckoutBranchState}),(0,nt.w)(function(E){return S.gitConnectionDetailsClient.checkoutBranch(E.workspaceId,E.request).pipe((0,nt.w)(function(){var B;return S.gitNotificationService.showSuccessNotification("Trident_Git_Toast_CheckoutBranch_Success"),(0,c.__spreadArray)([Et({gitCheckoutBranchState:E}),bt({workspaceId:E.workspaceId})],ae(E.workspaceId,!0,null!==(B=S.featureSwitchService.featureSwitches.tridentGitStatusAPI)&&void 0!==B&&B),!0)}),(0,Ct.K)(function(B){var F=S.gitErrorService.makeGitErrorFromHttpResponse("Git_Checkout_Branch_Failed",B);return(0,w.xT)(F,"Git_BranchNameAlreadyExists")||S.gitNotificationService.showErrorNotification(F,"Trident_Git_Error_Git_Checkout_Branch_Failed_Title"),(0,pt.of)(Mt({workspaceId:E.workspaceId,error:F}))}))}))}),this.deleteGitConnection$=(0,s.GW)(function(){return S.actions$.pipe((0,s.l4)(Ot),(0,$.U)(function(E){return E.workspaceId}),(0,nt.w)(function(E){var B=S.gitNotificationService.showLoadingNotification("Trident_Git_Toast_Disconnect_Loading_Title","Trident_Git_Toast_Disconnect_Loading_Message");return S.gitConnectionDetailsClient.deleteGitConnectionDetails(E).pipe((0,nt.w)(function(){return S.gitNotificationService.showSuccessNotification("Trident_Git_Toast_Disconnect_Success",B),[g({workspaceId:E}),l({workspaceId:E}),Tt({workspaceId:E}),P({workspaceId:E})]}),(0,Ct.K)(function(F){var x=S.gitErrorService.makeGitErrorFromHttpResponse("Git_Connect_Failed",F);return S.gitNotificationService.showErrorNotification(x,"Trident_Git_Error_Git_Disconnect_Failed_Title",B),(0,pt.of)(j({workspaceId:E,error:x}))}))}))})}return t.prototype.gitConnectionContractToModel=function(e,i){var Y=i.datasourceOID;return{workspaceId:e,gitConnectionDetails:{gitProviderType:i.gitProviderType,organizationName:i.organizationName,projectName:i.projectName,repositoryName:i.repositoryName,branchName:i.branchName,rootDirectory:i.rootDirectory,head:i.head,isInitialized:!!i.isInitialized,lastSyncTime:i.lastSyncTime,supportedArtifactTypeNames:this.ConvertArtifactNamesBackendToFrontEnd(i.supportedArtifactTypeNames),datasourceOID:Y}}},t.prototype.ConvertArtifactNamesBackendToFrontEnd=function(e){var i=this;if(e)return e.map(function(n){return i.extensionManifestService.getFrontendArtifactType(n)})},t.\u0275fac=function(i){return new(i||t)(p.\u0275\u0275inject(s.eX),p.\u0275\u0275inject(K.i),p.\u0275\u0275inject(Nt.jR),p.\u0275\u0275inject(zt.mn),p.\u0275\u0275inject(Zt.vC),p.\u0275\u0275inject(r.yh),p.\u0275\u0275inject(oe.V$))},t.\u0275prov=p.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t}(),Pr=a(59017),ce=a(59973),Vt=a(48787),mi=(0,r.P1)(kt,function(t){return t?.gitStatus||U}),Gi=T.getSelectors(),kr=Gi.selectAll,Mr=Gi.selectEntities,Si=((0,r.P1)(mi,function(t){return kr(t)}),(0,r.P1)(mi,function(t){return Mr(t)})),Yt=function(e){return(0,r.P1)(Si,function(i){return i[e]})},je=function(){function t(e){this.store=e}return t.prototype.getGitStatus=function(e){return this.store.select(Yt(e))},t.prototype.loadGitStatus=function(e){return this.store.dispatch(o({workspaceId:e})),this.getGitStatus(e)},t.prototype.getStatusLoadingState=function(e){return this.store.select(Yt(e)).pipe((0,$.U)(function(i){var n;return null!==(n=i?.statusCallState)&&void 0!==n?n:J.Initial}))},t.prototype.getAllChanges=function(e){return this.getGitStatus(e).pipe((0,$.U)(function(i){var n;return null!==(n=i?.gitChanges)&&void 0!==n?n:[]}))},t.prototype.getUncommittedChanges=function(e){return this.getGitStatus(e).pipe((0,$.U)(function(i){var n,d;return null!==(d=null===(n=i?.gitChanges)||void 0===n?void 0:n.filter(function(_){return _.workspaceChange}))&&void 0!==d?d:[]}))},t.prototype.loadUncommittedChanges=function(e){return this.store.dispatch(u({workspaceId:e})),this.getUncommittedChanges(e)},t.prototype.getUncommittedChangesLoadingState=function(e){return this.store.select(Yt(e)).pipe((0,$.U)(function(i){return i&&i.uncommittedChangesCallState||J.Initial}))},t.prototype.getUncommittedArtifactsSelectionState=function(e){return this.store.select(Yt(e)).pipe((0,$.U)(function(i){return i&&i.uncommittedChangesArtifactSelectionState||{selectedArtifacts:[]}}))},t.prototype.setChangesArtifactSelection=function(e,i,n,d){this.store.dispatch(L({workspaceId:e,artifactId:i,logicalId:n,isChecked:d}))},t.prototype.clearChangesArtifactSelection=function(e){this.store.dispatch(R({workspaceId:e}))},t.prototype.getIncomingChanges=function(e){return this.getGitStatus(e).pipe((0,$.U)(function(i){var n,d;return null!==(d=null===(n=i?.gitChanges)||void 0===n?void 0:n.filter(function(_){return _.remoteChange}))&&void 0!==d?d:[]}))},t.prototype.loadIncomingChanges=function(e){return this.store.dispatch(M({workspaceId:e})),this.getIncomingChanges(e)},t.prototype.getIncomingChangesLoadingState=function(e){return this.store.select(Yt(e)).pipe((0,$.U)(function(i){return i&&i.incomingChangesCallState||J.Initial}))},t.prototype.getIncomingChangesCommitId=function(e){return this.store.select(Yt(e)).pipe((0,$.U)(function(i){return i?.incomingChangesCommitHash}))},t.\u0275fac=function(i){return new(i||t)(p.\u0275\u0275inject(r.yh))},t.\u0275prov=p.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),Ii=(0,r.P1)(kt,function(t){return t?.gitCommit||Ge}),yi=Lt.getSelectors(),Ur=yi.selectAll,Nr=yi.selectEntities,br=((0,r.P1)(Ii,function(t){return Ur(t)}),(0,r.P1)(Ii,function(t){return Nr(t)})),xr=function(){function t(e,i,n,d,_,y,C,S){var E=this;this.actions$=e,this.gitCommitClient=i,this.gitErrorService=n,this.gitNotificationService=d,this.extensionManifestService=_,this.gitStatusFacade=y,this.store=C,this.featureSwitchService=S,this.commitToGit$=(0,s.GW)(function(){return E.actions$.pipe((0,s.l4)(de),(0,$.U)(function(B){var F=B.gitCommitState,x=B.isInitialSync,Y=E.gitNotificationService.showLoadingNotification(x?"Trident_Git_Toast_Initial_Commit_Loading":"Trident_Git_Toast_Commit_Loading_Title",x?void 0:"Trident_Git_Toast_Commit_Loading_Message");return(0,c.__assign)((0,c.__assign)({},F),{isInitialSync:x,notificationId:Y})}),(0,nt.w)(function(B){return(0,Pr.aj)([E.gitCommitClient.commitArtifacts(B.workspaceId,E.fromGitCommitContractToGitCommitRequest(B.request))]).pipe((0,nt.w)(function(F){var x=F[0],Y=(0,c.__assign)((0,c.__assign)({},B),{response:{almAction:x.almOperation,responseDate:x.responseDate}});return[te({gitCommitState:Y})]}),(0,Ct.K)(function(F){var x=E.gitErrorService.makeGitErrorFromHttpResponse(" Git_Commit_Invalid_Request",F);return B?.notificationId&&(E.gitNotificationService.showErrorNotification(x,"Trident_Git_Error_Unable_To_Commit_Title",B.notificationId),E.gitErrorService.showErrorHandlingDialog(x)),(0,pt.of)(me({gitCommitState:B,error:x}))}))}))}),this.getLatestGitAlmOperationSuccess$=(0,s.GW)(function(){return E.actions$.pipe((0,s.l4)(Bt),(0,$.U)(function(B){return B.gitSyncState}),(0,ce.h)(function(B){return E.isLatestOpValid(B)}),(0,nt.w)(function(B){return E.store.select(function(e){return(0,r.P1)(br,function(i){return i[e]})}(B.workspaceId)).pipe((0,Vt.q)(1),(0,nt.w)(function(F){return E.getActions(B,F)}))}))})}return t.prototype.isLatestOpValid=function(e){return!!e?.isValid&&e.gitOperationType===w.u9.Commit},t.prototype.getActions=function(e,i){var n,d=i&&i.workspaceId===e.workspaceId?{workspaceId:i.workspaceId,request:i.request,response:i?.response,isInitialSync:i?.isInitialSync,notificationId:i?.notificationId}:{workspaceId:e.workspaceId,request:void 0};switch(e.gitOperationStatus){case w.wM.Successful:return i?.notificationId&&this.gitNotificationService.showSuccessNotification(i?.isInitialSync?"Trident_Git_Toast_Initial_Action_Success":"Trident_Git_Toast_Commit_Success",i.notificationId),this.gitStatusFacade.clearChangesArtifactSelection(d.workspaceId),(0,c.__spreadArray)((0,c.__spreadArray)([fe({gitCommitStateWithResponse:d})],ae(d.workspaceId,!0,null!==(n=this.featureSwitchService.featureSwitches.tridentGitStatusAPI)&&void 0!==n&&n),!0),[Tt({workspaceId:d.workspaceId})],!1);case w.wM.InProgress:return[te({gitCommitState:d})];case w.wM.Failed:var _=this.gitErrorService.handleAlmGitError("AlmOperationFailed_CommitToGit",e);return i?.notificationId&&(this.gitNotificationService.showErrorNotification(_,"Trident_Git_Error_Unable_To_Commit_Title",i.notificationId),this.gitErrorService.showErrorHandlingDialog(_)),[he({gitCommitState:d}),Tt({workspaceId:d.workspaceId})]}return[te({gitCommitState:d})]},t.prototype.fromGitCommitContractToGitCommitRequest=function(e){var i=this;return{artifacts:e.artifacts.map(function(d){return i.fromGitArtifactChangeToArtifactSelector(d)}),workspaceHead:e.workspaceHead,comment:e.comment}},t.prototype.fromGitArtifactChangeToArtifactSelector=function(e){var i=e.artifact;return{artifactType:this.extensionManifestService.getBackendArtifactType(i.artifactType),etag:i.etag,objectId:i.objectId,logicalId:i.logicalId,changeType:e.workspaceChange.changeType}},t.\u0275fac=function(i){return new(i||t)(p.\u0275\u0275inject(s.eX),p.\u0275\u0275inject(K.ce),p.\u0275\u0275inject(Nt.jR),p.\u0275\u0275inject(zt.mn),p.\u0275\u0275inject(Zt.vC),p.\u0275\u0275inject(je),p.\u0275\u0275inject(r.yh),p.\u0275\u0275inject(oe.V$))},t.\u0275prov=p.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t}(),Rr=a(32980),Ci=(a(17177),a(94228),a(14977),a(95228),a(32293)),jr=a(41838),qt=function(t){return t[t.CommitToGit=100]="CommitToGit",t[t.UpdateFromGit=101]="UpdateFromGit",t[t.InitializeWorkspaceGitConnection=102]="InitializeWorkspaceGitConnection",t[t.Undo=103]="Undo",t[t.CheckoutBranch=104]="CheckoutBranch",t[t.SwitchBranch=105]="SwitchBranch",t}({}),ze=function(t){return t[t.NonFinalBase=0]="NonFinalBase",t[t.FinalBase=1001]="FinalBase",t[t.FinalSuccessBase=1001]="FinalSuccessBase",t[t.FinalErrorBase=2001]="FinalErrorBase",t[t.Created=0]="Created",t[t.Approval_Pending=10]="Approval_Pending",t[t.Execution_Pending=20]="Execution_Pending",t[t.Executing_Running=30]="Executing_Running",t[t.Succeeded=1001]="Succeeded",t[t.SucceededWithWarning_RefreshSkipped=1011]="SucceededWithWarning_RefreshSkipped",t[t.SucceededWithWarning_MissingCredentials=1012]="SucceededWithWarning_MissingCredentials",t[t.Failed_GenericError=2001]="Failed_GenericError",t[t.Failed_GenericDryRunError=2006]="Failed_GenericDryRunError",t[t.Approval_Abandoned=2011]="Approval_Abandoned",t[t.Approval_Rejected=2012]="Approval_Rejected",t[t.Execution_Cancelled=2021]="Execution_Cancelled",t[t.Execution_UnsupportedOperationType=2031]="Execution_UnsupportedOperationType",t[t.Execution_UnsupportedStepType=2032]="Execution_UnsupportedStepType",t[t.Execution_NoSteps=2033]="Execution_NoSteps",t}({}),zr=function(t){return t[t.SingleOption=0]="SingleOption",t[t.None=1]="None",t}({}),ve=a(77476),Lr=a(95825),Hr=a(74913),Wr=a(64266),$r=a(94243),Vr=a(10965),Qr=a(37350),Xr=a(89330),Jr=a(55334);function Zr(t,e){1&t&&p.\u0275\u0275element(0,"tri-svg-icon",16)}function Yr(t,e){if(1&t&&(p.\u0275\u0275elementStart(0,"tri-pivot-item",11)(1,"span",12),p.\u0275\u0275template(2,Zr,1,0,"tri-svg-icon",13),p.\u0275\u0275elementEnd(),p.\u0275\u0275element(3,"tri-svg-icon",14),p.\u0275\u0275elementStart(4,"span",15),p.\u0275\u0275text(5),p.\u0275\u0275elementEnd()()),2&t){var d,_,i=e.$implicit,n=p.\u0275\u0275nextContext();p.\u0275\u0275property("value",i),p.\u0275\u0275advance(2),p.\u0275\u0275property("ngIf",n.isArtifactOptionSelected(i)),p.\u0275\u0275advance(1),p.\u0275\u0275property("sprite",null==(d=n.localGetArtifactIconFromDict(n.getArtifactType(i)))?null:d.sprite)("name",null==(_=n.localGetArtifactIconFromDict(n.getArtifactType(i)))?null:_.name),p.\u0275\u0275advance(1),p.\u0275\u0275attribute("aria-label",null==i.failedArtifactMetadata?null:i.failedArtifactMetadata.artifactDisplayName),p.\u0275\u0275advance(1),p.\u0275\u0275textInterpolate1(" ",null==i.failedArtifactMetadata?null:i.failedArtifactMetadata.artifactDisplayName," ")}}function qr(t,e){if(1&t){var i=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementContainerStart(0,19),p.\u0275\u0275elementStart(1,"tri-checkbox",20),p.\u0275\u0275listener("onChange",function(){p.\u0275\u0275restoreView(i);var _=p.\u0275\u0275nextContext(2);return p.\u0275\u0275resetView(_.checkBoxSelectionChanged(_.getSingleOption(_.displayError)))}),p.\u0275\u0275text(2),p.\u0275\u0275pipe(3,"localize"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementContainerEnd()}if(2&t){var n=p.\u0275\u0275nextContext(2);p.\u0275\u0275advance(1),p.\u0275\u0275property("checked",n.isArtifactOptionSelected(n.displayError)),p.\u0275\u0275advance(1),p.\u0275\u0275textInterpolate1(" ",p.\u0275\u0275pipeBind1(3,2,n.getSingleOptionMessageKey(n.displayError))," ")}}function tn(t,e){if(1&t){var i=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"tri-radio-button",22),p.\u0275\u0275listener("change",function(){var C=p.\u0275\u0275restoreView(i).$implicit,S=p.\u0275\u0275nextContext(3);return p.\u0275\u0275resetView(S.radioButtonSelectionChanged(C))}),p.\u0275\u0275text(1),p.\u0275\u0275pipe(2,"localize"),p.\u0275\u0275elementEnd()}if(2&t){var n=e.$implicit,d=p.\u0275\u0275nextContext(3);p.\u0275\u0275property("value",n.OptionKey)("checked",d.isArtifactOptionSelected(d.displayError,n)),p.\u0275\u0275attribute("role","radio"),p.\u0275\u0275advance(1),p.\u0275\u0275textInterpolate1(" ",p.\u0275\u0275pipeBind1(2,4,n.OptionMessageKey)," ")}}function en(t,e){if(1&t&&(p.\u0275\u0275elementStart(0,"tri-radio-group"),p.\u0275\u0275template(1,tn,3,6,"tri-radio-button",21),p.\u0275\u0275elementEnd()),2&t){var i=p.\u0275\u0275nextContext(2);p.\u0275\u0275advance(1),p.\u0275\u0275property("ngForOf",null==i.displayError.interactiveOperationInfo?null:i.displayError.interactiveOperationInfo.options)}}function rn(t,e){if(1&t&&(p.\u0275\u0275elementContainerStart(0),p.\u0275\u0275template(1,qr,4,4,"ng-container",17),p.\u0275\u0275template(2,en,2,1,"ng-template",null,18,p.\u0275\u0275templateRefExtractor),p.\u0275\u0275elementContainerEnd()),2&t){var i=p.\u0275\u0275reference(3),n=p.\u0275\u0275nextContext();p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",1===n.displayErrorOptionsListSize)("ngIfElse",i)}}var nn=function(){function t(e,i,n){var d,_;this.extensionManifestService=e,this.dialogRef=i,this.data=n,this.localGetArtifactIconFromDict=jr.zp,this.enabledOptions=new Map,this.displayError=(0,w.lz)(this.data.errors),this.displayErrorOptionsListSize=null!==(_=null===(d=this.displayError.interactiveOperationInfo)||void 0===d?void 0:d.options.length)&&void 0!==_?_:0,this.InteractionType=zr}return t.prototype.buttonClicked=function(e){if(e===this.data.buttons[0].name)return this.dialogRef.close(this.getInteractiveOperationsOptions(this.enabledOptions));this.dialogRef.close()},t.prototype.getInteractiveOperationsOptions=function(e){var i=[];return e.forEach(function(n,d){i.push({artifactLogicalId:d,optionName:n})}),{optionPerArtifactList:i}},t.prototype.convertDialogData=function(e){return{title:e.title,buttons:e.buttons}},t.prototype.onArtifactSelectionChange=function(e){var i,n;this.displayError=e,this.displayErrorOptionsListSize=null!==(n=null===(i=this.displayError.interactiveOperationInfo)||void 0===i?void 0:i.options.length)&&void 0!==n?n:0},t.prototype.radioButtonSelectionChanged=function(e){var i;this.enabledOptions.set(null===(i=this.displayError.failedArtifactMetadata)||void 0===i?void 0:i.artifactLogicalId,e.OptionKey),this.data.buttons[0].disabled=this.enabledOptions.size!==this.data.errors.errorsDetails.length},t.prototype.checkBoxSelectionChanged=function(e){var i,n,d;this.enabledOptions.has(null===(i=this.displayError.failedArtifactMetadata)||void 0===i?void 0:i.artifactLogicalId)?this.enabledOptions.delete(null===(n=this.displayError.failedArtifactMetadata)||void 0===n?void 0:n.artifactLogicalId):this.enabledOptions.set(null===(d=this.displayError.failedArtifactMetadata)||void 0===d?void 0:d.artifactLogicalId,e.OptionKey),this.data.buttons[0].disabled=this.enabledOptions.size!==this.data.errors.errorsDetails.length},t.prototype.getOptionsListSize=function(e){var i,n;return null!==(n=null===(i=e.interactiveOperationInfo)||void 0===i?void 0:i.options.length)&&void 0!==n?n:0},t.prototype.getSingleOption=function(e){var i;return null===(i=e.interactiveOperationInfo)||void 0===i?void 0:i.options[0]},t.prototype.getSingleOptionMessageKey=function(e){var i;return null===(i=e.interactiveOperationInfo)||void 0===i?void 0:i.options[0].OptionMessageKey},t.prototype.isArtifactOptionSelected=function(e,i){var n,d=null===(n=e.failedArtifactMetadata)||void 0===n?void 0:n.artifactLogicalId;return i?this.enabledOptions.has(d)&&this.enabledOptions.get(d)===i.OptionKey:this.enabledOptions.has(d)},t.prototype.getArtifactType=function(e){var i;return this.extensionManifestService.getFrontendArtifactType(null===(i=e.failedArtifactMetadata)||void 0===i?void 0:i.artifactType)},t.\u0275fac=function(i){return new(i||t)(p.\u0275\u0275directiveInject(Zt.vC),p.\u0275\u0275directiveInject(Ci.so),p.\u0275\u0275directiveInject(Ci.WI))},t.\u0275cmp=p.\u0275\u0275defineComponent({type:t,selectors:[["interactive-operations-dialog"]],decls:14,vars:11,consts:[[3,"dialogData","closeButtonLabel","buttonClickEvent"],[1,"subtitle"],[1,"content"],[1,"artifacts"],["linkFormat","tab","direction","vertical",3,"selectedValue","selectedValueChange"],["class","artifact-details",3,"value",4,"ngFor","ngForOf"],[1,"divider"],[1,"options"],["tabindex","0",1,"message"],[1,"options-list-container",3,"ngSwitch"],[4,"ngSwitchCase"],[1,"artifact-details",3,"value"],[1,"check-mark-icon"],["sprite","fluentui-icons","name","checkmark_12_filled",4,"ngIf"],["tri-svg-icon-22","",1,"artifact-icon",3,"sprite","name"],[1,"trimmedTextWithEllipsis"],["sprite","fluentui-icons","name","checkmark_12_filled"],["class","single-option",4,"ngIf","ngIfElse"],["multiOptions",""],[1,"single-option"],["ng-non-bindable","",3,"checked","onChange"],["ng-non-bindable","",3,"value","checked","change",4,"ngFor","ngForOf"],["ng-non-bindable","",3,"value","checked","change"]],template:function(i,n){1&i&&(p.\u0275\u0275elementStart(0,"trident-dialog",0),p.\u0275\u0275listener("buttonClickEvent",function(_){return n.buttonClicked(_)}),p.\u0275\u0275pipe(1,"localize"),p.\u0275\u0275elementStart(2,"div",1),p.\u0275\u0275text(3),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(4,"div",2)(5,"div",3)(6,"tri-pivot",4),p.\u0275\u0275listener("selectedValueChange",function(_){return n.onArtifactSelectionChange(_)}),p.\u0275\u0275template(7,Yr,6,6,"tri-pivot-item",5),p.\u0275\u0275elementEnd()(),p.\u0275\u0275element(8,"hr",6),p.\u0275\u0275elementStart(9,"div",7)(10,"div",8),p.\u0275\u0275text(11),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(12,"div",9),p.\u0275\u0275template(13,rn,4,2,"ng-container",10),p.\u0275\u0275elementEnd()()()()),2&i&&(p.\u0275\u0275property("dialogData",n.convertDialogData(n.data))("closeButtonLabel",p.\u0275\u0275pipeBind1(1,9,"Cancel_ButtonText")),p.\u0275\u0275advance(3),p.\u0275\u0275textInterpolate1(" ",n.data.subTitle," "),p.\u0275\u0275advance(3),p.\u0275\u0275property("selectedValue",n.displayError),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngForOf",n.data.errors.errorsDetails),p.\u0275\u0275advance(3),p.\u0275\u0275attribute("aria-label",null==n.displayError.interactiveOperationInfo?null:n.displayError.interactiveOperationInfo.dialogMessage),p.\u0275\u0275advance(1),p.\u0275\u0275textInterpolate1(" ",null==n.displayError.interactiveOperationInfo?null:n.displayError.interactiveOperationInfo.dialogMessage," "),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngSwitch",null==n.displayError.interactiveOperationInfo?null:n.displayError.interactiveOperationInfo.interactionType),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngSwitchCase",n.InteractionType.SingleOption))},dependencies:[ve.NgForOf,ve.NgIf,ve.NgSwitch,ve.NgSwitchCase,Lr.v,Hr.M,Wr.E,$r.B,Vr.r,Qr.Y,Xr.Z,Jr.Y],styles:[".content[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:16px}.subtitle[_ngcontent-%COMP%]{padding:0 0 16px}.artifacts[_ngcontent-%COMP%]   tri-pivot-item[_ngcontent-%COMP%]{width:220px;padding-bottom:10px;margin-inline-end:10px}.artifacts[_ngcontent-%COMP%]   .tri-pivot-item-tab[_ngcontent-%COMP%]{display:flex;gap:4px}.artifacts[_ngcontent-%COMP%]   .check-mark-icon[_ngcontent-%COMP%]{width:20px}hr.divider[_ngcontent-%COMP%]{border:1px solid var(--colorNeutralStroke1);height:inherit;margin:0}[_nghost-%COMP%]     .tri-pivot-item-tab{display:flex;gap:4px}.message[_ngcontent-%COMP%]{font-size:16px;font-weight:600;padding:0 0 10px}.options-list-container[_ngcontent-%COMP%]{max-height:100px;overflow-y:scroll}"],changeDetection:0}),t}(),sn=a(7452),Le=function(){function t(e,i){this.dialogService=e,this.localizationService=i}return t.prototype.isOptionNotEnabled=function(e){return(0,w.lz)(e).workloadErrorCategory===w.QJ},t.prototype.showInteractiveOperationsDialog=function(e,i,n){var d=function(t,e,i){var n=t.get("Cancel_ButtonText"),d=t.get("ModalDialogButtonText_Continue"),_=t.get("Trident_Git_Interactive_Operations_Dialog_Message"),y={title:t.get(i),buttons:[{name:d,label:d,buttonType:"primary",disabled:!0},{name:n,label:n,buttonType:null}],subTitle:_,errors:e};return{componentRef:nn,config:{width:"864px",panelClass:"dialog-style",data:y}}}(this.localizationService,e,i);this.dialogService.open(d.componentRef,d.config).afterClosed().pipe((0,Vt.q)(1),(0,ce.h)(function(_){return _})).subscribe(function(_){n(e,_)})},t.\u0275fac=function(i){return new(i||t)(p.\u0275\u0275inject(Rr.uQ),p.\u0275\u0275inject(sn.z))},t.\u0275prov=p.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),Ei=(0,r.P1)(kt,function(t){return t?.gitUpdate||Ce}),Ti=Ht.getSelectors(),ln=Ti.selectAll,dn=Ti.selectEntities,un=((0,r.P1)(Ei,function(t){return ln(t)}),(0,r.P1)(Ei,function(t){return dn(t)})),He=function(e){return(0,r.P1)(un,function(i){return i[e]})},We=function(){function t(e){this.store=e}return t.prototype.getGitConnection=function(e){return this.store.select(Re(e))},t.prototype.ensureGitConnection=function(e){return this.store.dispatch(q({workspaceId:e})),this.getGitConnection(e)},t.prototype.loadGitConnection=function(e){return this.store.dispatch(D({workspaceId:e})),this.getGitConnection(e)},t.prototype.saveGitConnection=function(e){return this.store.dispatch(rt({gitConnection:e})),(0,pt.of)(void 0)},t.prototype.deleteGitConnection=function(e){return this.store.dispatch(Ot({workspaceId:e})),(0,pt.of)(void 0)},t.prototype.checkoutBranch=function(e){return this.store.dispatch(ot({gitCheckoutBranchState:e})),(0,pt.of)(void 0)},t.prototype.getGitConnectionOperationState=function(e){return this.store.select(Re(e)).pipe((0,$.U)(function(i){return i&&i.callState||Q.Initial}))},t.\u0275fac=function(i){return new(i||t)(p.\u0275\u0275inject(r.yh))},t.\u0275prov=p.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),pn=function(){function t(e){this.store=e}return t.prototype.updateFromGit=function(e){return this.store.dispatch(ee({gitUpdateState:e})),this.store.select(He(e.workspaceId))},t.prototype.getUpdatingState=function(e){return this.store.select(He(e)).pipe((0,$.U)(function(i){return i&&i.callState||mt.Initial}))},t.\u0275fac=function(i){return new(i||t)(p.\u0275\u0275inject(r.yh))},t.\u0275prov=p.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),_n=function(){function t(e,i,n,d,_,y,C,S,E,B){var F=this;this.actions$=e,this.gitUpdateClient=i,this.gitErrorService=n,this.gitNotificationService=d,this.interactiveOperationsService=_,this.store=y,this.extensionManifestService=C,this.gitConnectionFacade=S,this.gitUpdateFacade=E,this.featureSwitchService=B,this.updateFromGit$=(0,s.GW)(function(){return F.actions$.pipe((0,s.l4)(ee),(0,$.U)(function(x){var Y=x.gitUpdateState,dt=x.isInitialSync,Qe=F.gitNotificationService.showLoadingNotification(dt?"Trident_Git_Toast_Initial_Update_Loading":"Trident_Git_Toast_Update_Loading_Title",dt?void 0:"Trident_Git_Toast_Update_Loading_Message");return(0,c.__assign)((0,c.__assign)({},Y),{isInitialSync:dt,notificationId:Qe})}),(0,nt.w)(function(x){return F.gitUpdateClient.UpdateArtifactsFromGit(x.workspaceId,F.updateFromGitModelToContract(x.request)).pipe((0,nt.w)(function(Y){var dt=(0,c.__assign)((0,c.__assign)({},x),{response:{almAction:Y.almOperation}});return[ie({gitUpdateState:dt})]}),(0,Ct.K)(function(Y){var dt=F.gitErrorService.makeGitErrorFromHttpResponse("Git_Update_Invalid_Request",Y);return x?.notificationId&&(F.gitNotificationService.showErrorNotification(dt,"Trident_Git_Error_Unable_To_Update_Title",x.notificationId),F.gitErrorService.showErrorHandlingDialog(dt)),(0,pt.of)(Ie({gitUpdateState:x,error:dt}))}))}))}),this.getLatestGitAlmOperationSuccess$=(0,s.GW)(function(){return F.actions$.pipe((0,s.l4)(Bt),(0,$.U)(function(x){return x.gitSyncState}),(0,ce.h)(function(x){return F.isLatestOpValid(x)}),(0,nt.w)(function(x){return F.store.select(He(x.workspaceId)).pipe((0,Vt.q)(1),(0,nt.w)(function(Y){return F.getActions(x,Y)}))}))})}return t.prototype.isLatestOpValid=function(e){return!!e?.isValid&&e.gitOperationType===w.u9.Update},t.prototype.getActions=function(e,i){var d,n=this,_=i&&i.workspaceId===e.workspaceId?{workspaceId:i.workspaceId,request:i.request,response:i?.response,isInitialSync:i?.isInitialSync,notificationId:i?.notificationId}:{workspaceId:e.workspaceId,request:void 0};switch(e.gitOperationStatus){case w.wM.Successful:return i?.notificationId&&this.gitNotificationService.showSuccessNotification(i?.notificationId?"Trident_Git_Toast_Initial_Action_Success":"Trident_Git_Toast_Update_Success",i.notificationId),(0,c.__spreadArray)((0,c.__spreadArray)([Se({gitUpdateStateWithResponse:_})],ae(_.workspaceId,!0,null!==(d=this.featureSwitchService.featureSwitches.tridentGitStatusAPI)&&void 0!==d&&d),!0),[Tt({workspaceId:_.workspaceId})],!1);case w.wM.InProgress:return[ie({gitUpdateState:_})];case w.wM.Failed:var y=this.gitErrorService.handleAlmGitError("AlmOperationFailed_UpdateFromGit",e);return i?.notificationId&&(this.featureSwitchService.featureSwitches.interactiveOperationUI&&this.interactiveOperationsService.isOptionNotEnabled(y)?(this.interactiveOperationsService.showInteractiveOperationsDialog(y,"Trident_Git_Updates_Fail_Message_Bar",function(C,S){return n.doUpdateFlowWithInteractiveOptions(C,S,e.workspaceId)}),this.gitNotificationService.hideCurrentNotification()):(this.gitNotificationService.showErrorNotification(y,"Trident_Git_Error_Unable_To_Update_Title",i.notificationId),this.gitErrorService.showErrorHandlingDialog(y))),[ye({gitUpdateState:_,error:y}),Tt({workspaceId:_.workspaceId})]}return[ie({gitUpdateState:_})]},t.prototype.updateFromGitModelToContract=function(e){var i,n=this.ConvertArtifactTypesInTree(e.artifactMergePolicyInfoTreeList,this.extensionManifestService);return{targetCommit:e.targetCommit,workspaceHead:null!==(i=e.workspaceHead)&&void 0!==i?i:null,ArtifactMergePolicyInfoTreeList:n,retryOperationId:e.retryOperationId,interactiveUpdateOptions:e.interactiveUpdateOptions}},t.prototype.ConvertArtifactTypesInTree=function(e,i){return e&&e.map(function(n){var d=(0,c.__assign)({},n);return"artifact"in d.root&&(d.root=(0,c.__assign)((0,c.__assign)({},d.root),{artifact:(0,c.__assign)((0,c.__assign)({},d.root.artifact),{artifactType:i.getBackendArtifactType(d.root.artifact.artifactType)})})),d})},t.prototype.doUpdateFlowWithInteractiveOptions=function(e,i,n){var d=this;this.gitConnectionFacade.getGitConnection(n).pipe((0,Vt.q)(1)).subscribe(function(_){var y,C,S=null===(y=_?.gitConnectionDetails)||void 0===y?void 0:y.head;d.gitUpdateFacade.updateFromGit({workspaceId:n,request:{workspaceHead:S,targetCommit:void 0,artifactMergePolicyInfoTreeList:void 0,retryOperationId:null===(C=e.errorInfo)||void 0===C?void 0:C.retryOperationId,interactiveUpdateOptions:i}})})},t.\u0275fac=function(i){return new(i||t)(p.\u0275\u0275inject(s.eX),p.\u0275\u0275inject(K.Jv),p.\u0275\u0275inject(Nt.jR),p.\u0275\u0275inject(zt.mn),p.\u0275\u0275inject(Le),p.\u0275\u0275inject(r.yh),p.\u0275\u0275inject(Zt.vC),p.\u0275\u0275inject(We),p.\u0275\u0275inject(pn),p.\u0275\u0275inject(oe.V$))},t.\u0275prov=p.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t}();function vn(t,e){return"Committing ".concat(t.toString()," ").concat(1===t?"item":"items"," from workspace ").concat(e)}var gn=a(54323),fn=function(){function t(e,i,n,d,_,y,C){var S=this;this.actions$=e,this.gitInitializationClient=i,this.gitErrorService=n,this.gitNotificationService=d,this.interactiveOperationsService=_,this.telemetryService=y,this.extensionManifestService=C,this.initializeGitConnection$=(0,s.GW)(function(){return S.actions$.pipe((0,s.l4)(G),(0,$.U)(function(E){return E.gitInitializationState}),(0,nt.w)(function(E){return S.gitInitializationClient.initializeGitConnection(E.workspaceId,S.gitInitializationRequestFromState(E)).pipe((0,nt.w)(function(B){var F=(0,c.__assign)((0,c.__assign)({},E),{response:B});return S.mapInitializationStateToActions(F)}),(0,Ct.K)(function(B){var F=S.gitErrorService.makeGitErrorFromHttpResponse("Git_Initialization_Failed",B);return(0,w.E6)(F)||S.interactiveOperationsService.isOptionNotEnabled(F)||S.gitNotificationService.showErrorNotification(F,"Trident_Git_Toast_Initialize_Fail"),(0,pt.of)(h({gitInitializationState:E,error:F}))}))}))})}return t.prototype.gitInitializationRequestFromState=function(e){return{mergePolicy:e.request.mergePolicy}},t.prototype.mapInitializationStateToActions=function(e){var i;switch(null===(i=e.response)||void 0===i?void 0:i.result){case K.xU.Completed:if(e.response.incomingChanges&&e.response.incomingChanges.length>0||e.response.uncommittedChanges&&e.response.uncommittedChanges.length>0||!e.response.head){var n=this.gitErrorService.makeClientSideGitError("Git_Initialization_Invalid_Request");return this.gitNotificationService.showErrorNotification(n,"Trident_Git_Toast_Initialize_Fail"),[h({gitInitializationState:e,error:n})]}return[m({gitInitializationStateWithResponse:e}),bt({workspaceId:e.workspaceId})];case K.xU.UpdateFromGitRequired:if(!e.response.incomingChanges||!e.response.partialSyncBaseCommit)return n=this.gitErrorService.makeClientSideGitError("Git_Initialization_Invalid_Request"),this.gitNotificationService.showErrorNotification(n,"Trident_Git_Toast_Initialize_Fail"),[h({gitInitializationState:e,error:n})];var d=this.createUpdateRequestFromState(e);return this.telemetryService.logEvent({name:"Automatic update after initialization",properties:{workspaceId:e.workspaceId,targetCommit:d.request.targetCommit}}),[m({gitInitializationStateWithResponse:e}),ee({gitUpdateState:d,isInitialSync:!0})];case K.xU.CommitToGitRequired:var _=this.createCommitRequestFromState(e);return null!=_?(this.telemetryService.logEvent({name:"Automatic commit after initialization",properties:{workspaceId:e.workspaceId,workspaceHead:_.request.workspaceHead}}),[m({gitInitializationStateWithResponse:e}),de({gitCommitState:_,isInitialSync:!0})]):(n=this.gitErrorService.makeClientSideGitError("Git_Initialization_Invalid_Request"),this.gitNotificationService.showErrorNotification(n,"Trident_Git_Toast_Initialize_Fail"),[h({gitInitializationState:e,error:n})]);default:return n=this.gitErrorService.makeClientSideGitError("Git_Initialization_Invalid_Request"),this.gitNotificationService.showErrorNotification(n,"Trident_Git_Toast_Initialize_Fail"),[h({gitInitializationState:e,error:n})]}},t.prototype.createUpdateRequestFromState=function(e){var i,n=e.response;return{workspaceId:e.workspaceId,request:{targetCommit:n?.partialSyncBaseCommit,workspaceHead:null!==(i=n?.head)&&void 0!==i?i:null}}},t.prototype.createCommitRequestFromState=function(e){var n,d,i=this,_=null===(n=e?.response)||void 0===n?void 0:n.head,y=null===(d=e?.response)||void 0===d?void 0:d.uncommittedChanges;if(!y||!_)return this.gitErrorService.handleClientSideGitError(" Git_Commit_Invalid_Request"),null;var C=y.map(function(S){return _i(S,i.extensionManifestService)});return{workspaceId:e.workspaceId,request:{workspaceHead:_,artifacts:C,comment:vn(y.length,e.workspaceId)}}},t.\u0275fac=function(i){return new(i||t)(p.\u0275\u0275inject(s.eX),p.\u0275\u0275inject(K.Zt),p.\u0275\u0275inject(Nt.jR),p.\u0275\u0275inject(zt.mn),p.\u0275\u0275inject(Le),p.\u0275\u0275inject(gn.t),p.\u0275\u0275inject(Zt.vC))},t.\u0275prov=p.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t}(),hn=function(){function t(e,i,n){var d=this;this.actions$=e,this.gitSyncClient=i,this.gitErrorService=n,this.getLatestGitAlmOperation$=(0,s.GW)(function(){return d.actions$.pipe((0,s.l4)(bt),(0,nt.w)(function(_){var y=_.workspaceId,C=_.isInitial;return d.gitSyncClient.getlatestGitOperation(y).pipe((0,$.U)(function(S){return d.almOperationToSyncModel(S,y,C)}),(0,$.U)(function(S){return Bt({gitSyncState:S})}),(0,Ct.K)(function(){var S=d.gitErrorService.makeClientSideGitError("Git_Sync_Failed");return(0,pt.of)(xt({workspaceId:y,error:S}))}))}))})}return t.prototype.almOperationToSyncModel=function(e,i,n){var d=this.getGitOperationType(e.operationType),_="0"!==e.objectId&&void 0!==d,y=this.getGitOperationStatus(e.status);return{isValid:_,isInitial:!!n,workspaceId:i,gitOperationId:e.operationId,gitOperationType:d,gitOperationStatus:y,lastUpdatedTime:new Date(e.lastUpdatedTime),gitNonInteractiveOperationErrorDetails:this.getNonInteractiveErrorDetails(e.gitOperationErrorDetailsList),gitInteractiveOperationErrorDetailsList:this.getInteractiveErrorDetails(e.gitOperationErrorDetailsList)}},t.prototype.getInteractiveErrorDetails=function(e){if(!e||!e.some(function(i){var n;return(null===(n=i.artifactErrorDetails)||void 0===n?void 0:n.ErrorCategory)!==w.QJ}))return e},t.prototype.getNonInteractiveErrorDetails=function(e){if(e)return e.find(function(i){var n;return(null===(n=i.artifactErrorDetails)||void 0===n?void 0:n.ErrorCategory)!==w.QJ})},t.prototype.getGitOperationType=function(e){switch(e){case qt.CommitToGit:return w.u9.Commit;case qt.UpdateFromGit:return w.u9.Update;case qt.InitializeWorkspaceGitConnection:return w.u9.Initialize;case qt.Undo:return w.u9.Undo;case qt.CheckoutBranch:return w.u9.CheckoutBranch;case qt.SwitchBranch:return w.u9.SwitchBranch;default:return}},t.prototype.getGitOperationStatus=function(e){return e<ze.FinalBase?w.wM.InProgress:e>=ze.FinalSuccessBase&&e<ze.FinalErrorBase?w.wM.Successful:w.wM.Failed},t.\u0275fac=function(i){return new(i||t)(p.\u0275\u0275inject(s.eX),p.\u0275\u0275inject(K.WV),p.\u0275\u0275inject(Nt.jR))},t.\u0275prov=p.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t}(),Di=(0,r.P1)(kt,function(t){return t?.gitUndo||Be}),wi=Wt.getSelectors(),mn=wi.selectAll,Gn=wi.selectEntities,Sn=((0,r.P1)(Di,function(t){return mn(t)}),(0,r.P1)(Di,function(t){return Gn(t)})),$e=function(e){return(0,r.P1)(Sn,function(i){return i[e]})},In=function(){function t(e){this.store=e}return t.prototype.UndoFromGit=function(e){return this.store.dispatch(ue({gitUndoState:e})),this.store.select($e(e.workspaceId))},t.prototype.getUndoState=function(e){return this.store.select($e(e)).pipe((0,$.U)(function(i){return i&&i.callState||_t.Initial}))},t.\u0275fac=function(i){return new(i||t)(p.\u0275\u0275inject(r.yh))},t.\u0275prov=p.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),yn=function(){function t(e,i,n,d,_,y,C,S,E,B){var F=this;this.actions$=e,this.gitUndoClient=i,this.gitErrorService=n,this.gitNotificationService=d,this.interactiveOperationsService=_,this.gitUndoFacade=y,this.gitStatusFacade=C,this.gitConnectionFacade=S,this.store=E,this.featureSwitchService=B,this.undoFromGit$=(0,s.GW)(function(){return F.actions$.pipe((0,s.l4)(ue),(0,$.U)(function(x){var Y=x.gitUndoState,dt=F.gitNotificationService.showLoadingNotification("Trident_Git_Toast_Undo_Loading_Title","Trident_Git_Toast_Undo_Loading_Message");return(0,c.__assign)((0,c.__assign)({},Y),{notificationId:dt})}),(0,nt.w)(function(x){return F.gitUndoClient.undoCommitArtifacts(x.workspaceId,F.fromGitUndoContractToGitUndoRequest(x.request)).pipe((0,nt.w)(function(Y){var dt=(0,c.__assign)((0,c.__assign)({},x),{response:{almAciton:Y.almOperation}});return[re({gitUndoState:dt})]}),(0,Ct.K)(function(Y){var dt=F.gitErrorService.makeGitErrorFromHttpResponse("Git_InvalidUndoRequest",Y);return x?.notificationId&&(F.gitNotificationService.showErrorNotification(dt,"Trident_Git_Error_Unable_To_Undo_Title",x.notificationId),F.gitErrorService.showErrorHandlingDialog(dt)),(0,pt.of)(Oe({gitUndoState:x,error:dt}))}))}))}),this.getLatestGitAlmOperationSuccess$=(0,s.GW)(function(){return F.actions$.pipe((0,s.l4)(Bt),(0,$.U)(function(x){return x.gitSyncState}),(0,ce.h)(function(x){return F.isLatestOpValid(x)}),(0,nt.w)(function(x){return F.store.select($e(x.workspaceId)).pipe((0,Vt.q)(1),(0,nt.w)(function(Y){return F.getUndoActions(x,Y)}))}))})}return t.prototype.isLatestOpValid=function(e){return!!e?.isValid&&e.gitOperationType===w.u9.Undo},t.prototype.getUndoActions=function(e,i){var d,n=this,_=i&&i.workspaceId===e.workspaceId?{workspaceId:i.workspaceId,request:i.request,response:i?.response,notificationId:i?.notificationId}:{workspaceId:e.workspaceId,request:void 0};switch(e.gitOperationStatus){case w.wM.Successful:return _?.notificationId&&this.gitNotificationService.showSuccessNotification("Trident_Git_Toast_Undo_Success",_.notificationId),this.gitStatusFacade.clearChangesArtifactSelection(_.workspaceId),(0,c.__spreadArray)((0,c.__spreadArray)([De({gitUndoStateWithResponse:_})],ae(_.workspaceId,!0,null!==(d=this.featureSwitchService.featureSwitches.tridentGitStatusAPI)&&void 0!==d&&d),!0),[Tt({workspaceId:_.workspaceId})],!1);case w.wM.InProgress:return[re({gitUndoState:_})];case w.wM.Failed:var y=this.gitErrorService.handleAlmGitError("AlmOperationFailed_UndoFromGit",e);return _?.notificationId&&(this.featureSwitchService.featureSwitches.interactiveOperationUI&&this.interactiveOperationsService.isOptionNotEnabled(y)?(this.interactiveOperationsService.showInteractiveOperationsDialog(y,"Trident_Git_Error_Undo_Title",function(C,S){return n.undoWithInteractiveOptions(C,S,e.workspaceId)}),this.gitNotificationService.hideCurrentNotification()):(this.gitNotificationService.showErrorNotification(y,"Trident_Git_Error_Unable_To_Undo_Title",_.notificationId),this.gitErrorService.showErrorHandlingDialog(y))),[we({gitUndoState:_,error:y}),Tt({workspaceId:_.workspaceId})]}return[re({gitUndoState:_})]},t.prototype.fromGitArtifactToArtifactSelector=function(e){var i,n,d,_=e.artifact;return{artifactType:_.artifactType,etag:_.etag,objectId:_.objectId,logicalId:_.logicalId,changeType:null!==(n=null===(i=e.remoteChange)||void 0===i?void 0:i.changeType)&&void 0!==n?n:null===(d=e?.workspaceChange)||void 0===d?void 0:d.changeType}},t.prototype.fromGitUndoContractToGitUndoRequest=function(e){var n,i=this;return{artifacts:null===(n=e.artifacts)||void 0===n?void 0:n.map(function(_){return i.fromGitArtifactToArtifactSelector(_)}),workspaceHead:e.workspaceHead,retryOperationId:e.retryOperationId,interactiveUpdateOptions:e.interactiveUpdateOptions}},t.prototype.undoWithInteractiveOptions=function(e,i,n){var d=this;this.gitConnectionFacade.getGitConnection(n).pipe((0,Vt.q)(1)).subscribe(function(_){var y,C;d.gitUndoFacade.UndoFromGit({workspaceId:n,request:{workspaceHead:null===(y=_?.gitConnectionDetails)||void 0===y?void 0:y.head,artifacts:void 0,retryOperationId:null===(C=e.errorInfo)||void 0===C?void 0:C.retryOperationId,interactiveUpdateOptions:i}})})},t.\u0275fac=function(i){return new(i||t)(p.\u0275\u0275inject(s.eX),p.\u0275\u0275inject(K.nD),p.\u0275\u0275inject(Nt.jR),p.\u0275\u0275inject(zt.mn),p.\u0275\u0275inject(Le),p.\u0275\u0275inject(In),p.\u0275\u0275inject(je),p.\u0275\u0275inject(We),p.\u0275\u0275inject(r.yh),p.\u0275\u0275inject(oe.V$))},t.\u0275prov=p.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t}(),Oi=(0,r.P1)(kt,function(t){return t?.gitSwitchBranch||Pe}),Bi=$t.getSelectors(),Cn=Bi.selectAll,En=Bi.selectEntities,Tn=((0,r.P1)(Oi,function(t){return Cn(t)}),(0,r.P1)(Oi,function(t){return En(t)})),Ve=function(e){return(0,r.P1)(Tn,function(i){return i[e]})},Dn=function(){function t(e,i,n,d,_,y){var C=this;this.actions$=e,this.gitSwitchBranchClient=i,this.gitErrorService=n,this.gitNotificationService=d,this.store=_,this.featureSwitchService=y,this.gitSwitchBranch$=(0,s.GW)(function(){return C.actions$.pipe((0,s.l4)(Kt),(0,$.U)(function(S){var E=S.gitSwitchBranchState,B=C.gitNotificationService.showLoadingNotification("Trident_Git_Toast_Switch_Branch_Switching_In_Progress_Message");return(0,c.__assign)((0,c.__assign)({},E),{notificationId:B})}),(0,nt.w)(function(S){return C.gitSwitchBranchClient.switchBranch(S.workspaceId,S.request).pipe((0,nt.w)(function(E){var B=(0,c.__assign)((0,c.__assign)({},S),{response:{almOperation:E.almOperation}});return C.gitNotificationService.showSuccessNotification("Trident_Git_Toast_Switch_Branch_Success_Message",S.notificationId),[et({gitSwitchBranchState:B})]}),(0,Ct.K)(function(E){var B=C.gitErrorService.makeGitErrorFromHttpResponse("Git_Switch_Branch_Failed",E),F=C.convertToSwitchBranchSpecficError(B),x=C.gitErrorService.handleSyncGitError(F,E);return S?.notificationId&&C.gitNotificationService.showErrorNotification(x,"Trident_Git_Error_Unable_To_Switch_Branch_Title",S.notificationId),(0,pt.of)(lt({gitSwitchBranchState:S,error:x}))}))}))}),this.getLatestGitAlmOperationSuccess$=(0,s.GW)(function(){return C.actions$.pipe((0,s.l4)(Bt),(0,$.U)(function(S){return S.gitSyncState}),(0,ce.h)(function(S){return C.isLatestOpValid(S)}),(0,nt.w)(function(S){return C.store.select(Ve(S.workspaceId)).pipe((0,Vt.q)(1),(0,nt.w)(function(E){return C.getSwitchBranchActions(S,E)}))}))})}return t.prototype.getSwitchBranchActions=function(e,i){var n,d=i&&i.workspaceId===e.workspaceId?(0,c.__assign)({},i):{workspaceId:e.workspaceId,request:void 0};if(e)switch(e.gitOperationStatus){case w.wM.Successful:return d?.notificationId&&this.gitNotificationService.showSuccessNotification("Trident_Git_Toast_Switch_Branch_Syncing_Completed_Message",d.notificationId),(0,c.__spreadArray)((0,c.__spreadArray)([Rt({gitSwitchBranchState:d})],ae(d.workspaceId,!0,null!==(n=this.featureSwitchService.featureSwitches.tridentGitStatusAPI)&&void 0!==n&&n),!0),[Tt({workspaceId:d.workspaceId})],!1);case w.wM.InProgress:return this.setInProgress(d);default:var _=this.gitErrorService.handleAlmGitError("AlmOperationFailed_SwitchGitBranch",e);return d?.notificationId&&this.gitNotificationService.showErrorNotification(_,"Trident_Git_Error_Unable_To_Switch_Branch_Title",d.notificationId),[W({gitSwitchBranchState:d}),Tt({workspaceId:d.workspaceId})]}return[et({gitSwitchBranchState:d})]},t.prototype.setInProgress=function(e){var i=this.gitNotificationService.showLoadingNotification("Trident_Git_Toast_Switch_Branch_Syncing_In_Progress_Message");return[et({gitSwitchBranchState:(0,c.__assign)((0,c.__assign)({},e),{notificationId:i})})]},t.prototype.isLatestOpValid=function(e){return!!e?.isValid&&e.gitOperationType===w.u9.SwitchBranch},t.prototype.convertToSwitchBranchSpecficError=function(e){if(void 0===e)return"Git_Switch_Branch_Invalid_Request";if((0,w.yG)(e))return"Git_Switch_Branch_Item_Not_Found";switch((0,w.lz)(e).errorType){case"Git_MissingDependencies":return"Git_MissingDependenciesSwitchBranch";case"Git_CyclicDependencyDetected":return"Git_CyclicDependencyDetectedSwitchBranch";default:return"Git_Switch_Branch_Invalid_Request"}},t.\u0275fac=function(i){return new(i||t)(p.\u0275\u0275inject(s.eX),p.\u0275\u0275inject(K.ZH),p.\u0275\u0275inject(Nt.jR),p.\u0275\u0275inject(zt.mn),p.\u0275\u0275inject(r.yh),p.\u0275\u0275inject(oe.V$))},t.\u0275prov=p.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t}(),wn=a(17653),Bn=a(9398),Fn=function(){function t(e,i,n,d,_){var y=this;this.actions$=e,this.router=i,this.gitBranchOutClient=n,this.gitErrorService=d,this.gitNotificationService=_,this.gitBranchOut$=(0,s.GW)(function(){return y.actions$.pipe((0,s.l4)(Gt),(0,$.U)(function(C){var S=C.gitBranchOutState,E=y.gitNotificationService.showLoadingNotification("Trident_Git_Branch_Out","Trident_Git_Toast_Branch_Out_In_Progress_Message");return(0,c.__assign)((0,c.__assign)({},S),{notificationId:E})}),(0,nt.w)(function(C){return y.gitBranchOutClient.branchOut(C.workspaceId,C.request).pipe((0,nt.w)(function(S){var E=(0,c.__assign)((0,c.__assign)({},C),{response:S});return[At({gitBranchOutState:E})]}),(0,Ct.K)(function(S){var E=y.gitErrorService.makeGitErrorFromHttpResponse("Git_Branch_Out_Failed",S),B="Git_Branch_Out_Failed"!==(0,w.lz)(E).errorType&&function(t,e){var i,n,d,_,y,C=null===(y=null===(_=null===(d=null===(n=null===(i=t.error)||void 0===i?void 0:i["pbi.error"])||void 0===n?void 0:n.details)||void 0===d?void 0:d[0])||void 0===_?void 0:_.detail)||void 0===y?void 0:y.value;if(C)try{var S=JSON.parse(C);if(S?.errorSpecificData){var E=JSON.parse(S.errorSpecificData);if(E)return(0,c.__assign)((0,c.__assign)({},e),{response:{folder:E}})}}catch{return null}return null}(S,C)||C;return C?.notificationId&&y.gitNotificationService.showErrorNotification(E,"Trident_Git_Error_Unable_To_Branch_Out_Git_Branch_Fail_Title",C.notificationId),(0,pt.of)(Ft({gitBranchOutState:B,error:E}))}))}))}),this.gitBranchOutSuccess$=(0,s.GW)(function(){return y.actions$.pipe((0,s.l4)(At),(0,nt.w)(function(C){var S,E,B,F=C.gitBranchOutState;if(null!==(S=F?.response)&&void 0!==S&&S.initializeConnectionStatus){var Y=F.response.initializeConnectionStatus.incomingChanges&&(null===(B=null===(E=F.response)||void 0===E?void 0:E.initializeConnectionStatus)||void 0===B?void 0:B.incomingChanges.length)>0?y.createUpdateRequestFromState(F):void 0;return(0,pt.of)(Dt({gitBranchOutState:F,gitUpdateState:Y}))}var dt=y.gitErrorService.makeClientSideGitError("Git_Invalid_Connection_Details");return y.gitNotificationService.showErrorNotification(dt,"Trident_Git_Error_Git_Invalid_Connection_Details_Title"),(0,pt.of)(Ft({gitBranchOutState:F,error:dt}))}))}),this.gitBranchOutCompleted$=(0,s.GW)(function(){return y.actions$.pipe((0,s.l4)(se),(0,wn.b)(function(C){var S,E,B;y.navigateToNewWorkspace(null===(S=C.gitBranchOutState.response)||void 0===S?void 0:S.folder.objectId),null!==(E=C.gitBranchOutState)&&void 0!==E&&E.notificationId&&y.gitNotificationService.showSuccessNotification("Trident_Git_Toast_Branch_Out_Success_Message",null===(B=C.gitBranchOutState)||void 0===B?void 0:B.notificationId)}))},{dispatch:!1})}return t.prototype.createUpdateRequestFromState=function(e){var i,n,d,_=null===(i=e.response)||void 0===i?void 0:i.initializeConnectionStatus,y=null===(n=e.response)||void 0===n?void 0:n.folder.objectId;if(_&&y)return{workspaceId:y,request:{targetCommit:_.partialSyncBaseCommit,workspaceHead:null!==(d=_.head)&&void 0!==d?d:null}}},t.prototype.navigateToNewWorkspace=function(e){this.router.navigate(["/groups/".concat(e,"/")],{queryParamsHandling:"preserve"})},t.\u0275fac=function(i){return new(i||t)(p.\u0275\u0275inject(s.eX),p.\u0275\u0275inject(Bn.F0),p.\u0275\u0275inject(K.su),p.\u0275\u0275inject(Nt.jR),p.\u0275\u0275inject(zt.mn))},t.\u0275prov=p.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t}();function An(t){var e=JSON.parse(t.connectionDetails);return(0,K.h_)(e)&&"GitHubSourceControl"===e.extensionDataSourceKind}function Un(t){var e=JSON.parse(t.connectionDetails);return{id:t.id,datasourceName:t.datasourceName,url:(0,K.h_)(e)?e.extensionDataSourcePath:"https://github.com"}}function Nn(t){return(0,c.__assign)((0,c.__assign)({},w.I),{datasourceName:t.displayName,datasourceType:w.LO,connectionDetails:JSON.stringify(t?.repositoryUrl?{url:t?.repositoryUrl}:{}),mashupTestConnectionDetails:{functionName:"GitHubSourceControl.Contents",parameters:[(0,c.__assign)((0,c.__assign)({},w.cW),{value:t?.repositoryUrl})]},credentialDetails:(0,c.__assign)((0,c.__assign)({},w.f7),{credentials:JSON.stringify({credentialData:[{name:"key",value:t.personalAccessToken}]})})})}var Kn=function(){function t(e,i,n,d){var _=this;this.actions$=e,this.gitDatasourceClient=i,this.gitErrorService=n,this.gitNotificationService=d,this.loadDatasources$=(0,s.GW)(function(){return _.actions$.pipe((0,s.l4)(_e),(0,nt.w)(function(y){var C,S,E=y.gitDatasourceRequest,B=null===(C=_.gitDatasourcesConfigRecord[E.gitProviderType])||void 0===C?void 0:C.convertDatasourceContractToModel,F=null===(S=_.gitDatasourcesConfigRecord[E.gitProviderType])||void 0===S?void 0:S.filterDatasource;if(!B||!F){var x=_.gitErrorService.makeClientSideGitError("Git_UnsupportedGitProvider");return(0,pt.of)(Ae({workspaceId:E.workspaceId,error:x}))}return _.gitDatasourceClient.discoverDatasources().pipe((0,Vt.q)(1),(0,$.U)(function(Y){return Y.value.filter(F)}),(0,$.U)(function(Y){return Y.map(B)}),(0,nt.w)(function(Y){var dt,Qe={workspaceId:E.workspaceId,datasourcesRecord:(dt={},dt[E.gitProviderType]=Y,dt)};return(0,pt.of)(si({gitDatasourcesState:Qe}))}),(0,Ct.K)(function(Y){var dt=_.gitErrorService.makeGitErrorFromHttpResponse("Git_Load_Datasources_Failed",Y);return(0,pt.of)(Ae({workspaceId:E.workspaceId,error:dt}))}))}))}),this.createDatasource$=(0,s.GW)(function(){return _.actions$.pipe((0,s.l4)(Ue),(0,nt.w)(function(y){var C,S=y.request,E=_.gitNotificationService.showLoadingNotification("Trident_Git_Toast_Add_Account_In_Progress_Title","Trident_Git_Toast_Add_Account_In_Progress_Message"),B=null===(C=_.gitDatasourcesConfigRecord[S.gitProviderType])||void 0===C?void 0:C.convertCreateDatasourceRequestModelToContract;if(!B){var F=_.gitErrorService.makeClientSideGitError("Git_UnsupportedGitProvider");return _.gitNotificationService.showErrorNotification(F,"Trident_Git_Toast_Add_Account_Fail_Title",E),(0,pt.of)(Ne({workspaceId:S.workspaceId,error:F}))}var x={workspaceId:S.workspaceId,gitProviderType:S.gitProviderType};return _.gitDatasourceClient.createDatasource(B(S)).pipe((0,nt.w)(function(Y){return _.gitNotificationService.showSuccessNotification("Trident_Git_Toast_Add_Account_Success",E),[_r({workspaceId:S.workspaceId,datasourceResponse:Y}),_e({gitDatasourceRequest:x})]}),(0,Ct.K)(function(Y){var dt=_.gitErrorService.makeGitErrorFromHttpResponse("Git_Create_Datasource_Failed",Y);return _.gitNotificationService.showErrorNotification(dt,"Trident_Git_Toast_Add_Account_Fail_Title",E),(0,pt.of)(Ne({workspaceId:S.workspaceId,error:dt}))}))}))}),this.gitDatasourcesConfigRecord=function(){var t;return(t={})[w.IS.AzureDevOps]={},t[w.IS.GitHub]={filterDatasource:An,convertDatasourceContractToModel:Un,convertCreateDatasourceRequestModelToContract:Nn},t}()}return t.\u0275fac=function(i){return new(i||t)(p.\u0275\u0275inject(s.eX),p.\u0275\u0275inject(K.aw),p.\u0275\u0275inject(Nt.jR),p.\u0275\u0275inject(zt.mn))},t.\u0275prov=p.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t}(),xn=function(){function t(e,i,n,d){var _=this;this.actions$=e,this.gitNotificationService=i,this.gitErrorService=n,this.gitRepairClient=d,this.gitRepairItems$=(0,s.GW)(function(){return _.actions$.pipe((0,s.l4)(li),(0,$.U)(function(y){var C=y.gitRepairState,S=_.gitNotificationService.showLoadingNotification("Trident_Git_Toast_Repair_Loading_Message");return(0,c.__assign)((0,c.__assign)({},C),{notificationId:S})}),(0,nt.w)(function(y){return _.gitRepairClient.gitRepairItems(y.workspaceId,y.request).pipe((0,nt.w)(function(C){var S=(0,c.__assign)((0,c.__assign)({},y),{response:C});return(0,pt.of)(di({gitRepairStateWithResponse:S}))}),(0,Ct.K)(function(C){var S=_.gitErrorService.makeGitErrorFromHttpResponse("Git_Repair_Items_Failed",C);return y?.notificationId&&(_.gitNotificationService.showErrorNotification(S,"Trident_Git_Error_Unable_To_Repair_Items_Title",y.notificationId),_.gitErrorService.showErrorHandlingDialog(S)),(0,pt.of)(ui({gitRepairState:y,error:S}))}))}))})}return t.\u0275fac=function(i){return new(i||t)(p.\u0275\u0275inject(s.eX),p.\u0275\u0275inject(zt.mn),p.\u0275\u0275inject(Nt.jR),p.\u0275\u0275inject(K.P9))},t.\u0275prov=p.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t}(),Rn=function(){function t(){}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=p.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=p.\u0275\u0275defineInjector({imports:[r.Aw.forFeature("git",Gr),s.sQ.forFeature([wr]),s.sQ.forFeature([Fr]),s.sQ.forFeature([xr]),s.sQ.forFeature([_n]),s.sQ.forFeature([fn]),s.sQ.forFeature([hn]),s.sQ.forFeature([yn]),s.sQ.forFeature([Dn]),s.sQ.forFeature([Fn]),s.sQ.forFeature([Kn]),s.sQ.forFeature([xn]),K.Ug]}),t}(),Fi=(0,r.P1)(kt,function(t){return t?.gitInitialization||Ee}),Pi=Qt.getSelectors(),jn=Pi.selectAll,zn=Pi.selectEntities,Ln=((0,r.P1)(Fi,function(t){return jn(t)}),(0,r.P1)(Fi,function(t){return zn(t)})),Wn=function(){function t(e){this.store=e}return t.prototype.getGitInitializationState=function(e){return this.store.select(function(e){return(0,r.P1)(Ln,function(i){return i[e]})}(e))},t.prototype.initializeGitConnection=function(e){return this.store.dispatch(G({gitInitializationState:e})),this.getGitInitializationState(e.workspaceId)},t.prototype.invalidateGitConnectionInitialization=function(e){return this.store.dispatch(l({workspaceId:e})),(0,pt.of)(void 0)},t.prototype.getGitInitializationCallState=function(e){return this.getGitInitializationState(e).pipe((0,$.U)(function(i){return i&&i.callState||Q.Initial}))},t.\u0275fac=function(i){return new(i||t)(p.\u0275\u0275inject(r.yh))},t.\u0275prov=p.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),ki=(0,r.P1)(kt,function(t){return t?.gitSync||Te}),Mi=Xt.getSelectors(),$n=Mi.selectAll,Vn=Mi.selectEntities,Ai=((0,r.P1)(ki,function(t){return $n(t)}),(0,r.P1)(ki,function(t){return Vn(t)}),(0,r.P1)(kt,function(t){return t?.gitProgressIndicator||Fe})),Ui=vt.getSelectors(),Xn=Ui.selectAll,Jn=Ui.selectEntities,Yn=((0,r.P1)(Ai,function(t){return Xn(t)}),(0,r.P1)(Ai,function(t){return Jn(t)}),function(){function t(e){this.store=e}return t.prototype.switchBranch=function(e){return this.store.dispatch(Kt({gitSwitchBranchState:e})),this.store.select(Ve(e.workspaceId))},t.prototype.getSwitchBranchState=function(e){return this.store.select(Ve(e)).pipe((0,$.U)(function(i){return i&&i.callState||ft.Initial}))},t.\u0275fac=function(i){return new(i||t)(p.\u0275\u0275inject(r.yh))},t.\u0275prov=p.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()),Ni=(0,r.P1)(kt,function(t){return t?.gitSessionStorage||ke}),bi=yt.getSelectors(),qn=bi.selectAll,to=bi.selectEntities,eo=((0,r.P1)(Ni,function(t){return qn(t)}),(0,r.P1)(Ni,function(t){return to(t)})),ro=function(){function t(e){this.store=e}return t.prototype.selectGitProviderType=function(e,i){this.store.dispatch(Xe({workspaceId:e,gitProviderType:i}))},t.prototype.selectDatasource=function(e,i){this.store.dispatch(Je({workspaceId:e,datasourceOID:i}))},t.prototype.selectTempDatasource=function(e,i){this.store.dispatch(Ze({workspaceId:e,datasourceOID:i}))},t.prototype.selectOrganization=function(e,i){this.store.dispatch(ti({workspaceId:e,organization:i}))},t.prototype.selectRepository=function(e,i){this.store.dispatch(ei({workspaceId:e,repository:i}))},t.prototype.selectBranch=function(e,i){this.store.dispatch(ii({workspaceId:e,branch:i}))},t.prototype.selectRootDirectory=function(e,i){this.store.dispatch(ri({workspaceId:e,directory:i}))},t.prototype.selectUserAccount=function(e,i){this.store.dispatch(ni({workspaceId:e,userAccount:i}))},t.prototype.setDatasourceUrl=function(e,i,n){this.store.dispatch(Ye({workspaceId:e,organization:i,repository:n}))},t.prototype.selectWorkspaceCapacity=function(e,i){this.store.dispatch(ci({workspaceId:e,isWorkspaceOnCapacity:i}))},t.prototype.resetDatasourceUrl=function(e){this.store.dispatch(qe({workspaceId:e}))},t.prototype.loadGitSessionStorage=function(e){return this.store.select(function(e){return(0,r.P1)(eo,function(i){return i[e]})}(e)).pipe((0,$.U)(function(i){return i??{workspaceId:e}}))},t.prototype.configureCredentials=function(e){this.store.dispatch(oi({workspaceId:e}))},t.prototype.deleteCredentials=function(e){this.store.dispatch(ai({workspaceId:e}))},t.\u0275fac=function(i){return new(i||t)(p.\u0275\u0275inject(r.yh))},t.\u0275prov=p.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),Ki=(0,r.P1)(kt,function(t){return t?.gitBranchOut||Me}),xi=jt.getSelectors(),no=xi.selectAll,oo=xi.selectEntities,Ri=((0,r.P1)(Ki,function(t){return no(t)}),(0,r.P1)(Ki,function(t){return oo(t)}),(0,r.P1)(kt,function(t){return t?.gitDatasources||be})),ji=Jt.getSelectors(),co=ji.selectAll,so=ji.selectEntities,lo=((0,r.P1)(Ri,function(t){return co(t)}),(0,r.P1)(Ri,function(t){return so(t)})),zi=function(e){return(0,r.P1)(lo,function(i){return i[e]})},uo=function(){function t(e){this.store=e}return t.prototype.getDatasources=function(e){return this.store.select(zi(e.workspaceId)).pipe((0,$.U)(function(i){return{workspaceId:e.workspaceId,datasourcesRecord:i?.datasourcesRecord,callState:i?.callState||ht.Initial}}))},t.prototype.loadDatasources=function(e){return this.store.dispatch(_e({gitDatasourceRequest:e})),this.getDatasources(e)},t.prototype.createDatasource=function(e){return this.store.dispatch(Ue({request:e})),(0,pt.of)(void 0)},t.prototype.getDataSourcesCallState=function(e){return this.store.select(zi(e)).pipe((0,$.U)(function(i){return i?.callState||ht.Initial}))},t.\u0275fac=function(i){return new(i||t)(p.\u0275\u0275inject(r.yh))},t.\u0275prov=p.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),Li=(0,r.P1)(kt,function(t){return t?.gitRepair||Ke}),Hi=ne.getSelectors(),po=Hi.selectAll,_o=Hi.selectEntities;(0,r.P1)(Li,function(t){return po(t)}),(0,r.P1)(Li,function(t){return _o(t)})},6393:function(It,at,a){a.r(at),a.d(at,{ExtensionHostGitModule:function(){return ft},createExtensionHostGitModule:function(){return st}});var s=a(77476),r=a(50423),K=a(60756),c=a(81337),N=a(82762),u=a(11547),O=a(81905),A=a(59973),M=a(48787),V=a(14172),f=a(59822),L=a(17653),R=a(73471),P=a(60397),o=a(17899),z=a(10510),ct=a(6814),J=a(18016),it=a(88),Q=new r.InjectionToken("IFrames$"),gt=a(7452),_t=function(Z){return Z[Z.Initial=0]="Initial",Z[Z.Loading=1]="Loading",Z[Z.Loaded=2]="Loaded",Z}({}),mt=function(){function Z(ht,v,I,T,U){var b=this;this.actions$=ht,this.messageBroker=v,this.triLocalizationService=I,this.lazyProvider=T,this.iframes$=U,this.sharedUtils=(0,J.L4)(),this.onGetGitConnectionRecieved$=(0,o.Av)(this.actions$,this.messageBroker,R.Vm.getGitConnection,function(H){var w=H.workspaceObjectId;return(0,N.D)(b.lazyProvider.get("@trident/git/services/connection",z.AC)).pipe((0,O.w)(function(G){return G.ensureGitConnection(w)}),(0,A.h)(function(G){return G?.callState===_t.Loaded||(0,J.pb)(G?.callState)}),(0,M.q)(1),(0,V.U)(function(G){if(G?.gitConnectionDetails&&!(0,J.pb)(G?.callState)){var m=G.gitConnectionDetails;return R.Vm.getGitConnection.resolve({branchName:m.branchName,headRef:b.sharedUtils[m.gitProviderType].getHeadReference(m),lastSyncTime:(0,J.n)(b.triLocalizationService,m?.lastSyncTime)})}return R.Vm.getGitConnection.resolve({})}),(0,f.K)(function(G){return(0,u.of)(R.Vm.getGitConnection.reject({error:G}))}))}),this.updateGitConnection$=(0,K.GW)(function(){return b.actions$.pipe((0,o.UF)(it.E),(0,K.IC)(function(){return b.iframes$}),(0,V.U)(function(H){var G=H[1],h=(0,c.__rest)(H[0],["type"]);return Object.values(G).filter(function(l){return"initialized"===l?.initState}).map(function(l){var D=l.iframeId;return R.Vm.onGitConnectionChange(h)(D)})}),(0,L.b)(function(H){return H.forEach(function(w){delete w.lazyModuleId,b.messageBroker.send(w)})}))},{dispatch:!1})}return Z.\u0275fac=function(v){return new(v||Z)(r.\u0275\u0275inject(K.eX),r.\u0275\u0275inject(P.u),r.\u0275\u0275inject(gt.z),r.\u0275\u0275inject(ct.rn),r.\u0275\u0275inject(Q))},Z.\u0275prov=r.\u0275\u0275defineInjectable({token:Z,factory:Z.\u0275fac}),Z}();function st(Z,ht){return(0,r.createNgModule)(ft,r.Injector.create({providers:[{provide:Q,useValue:Z.iframes$}],parent:ht}))}var ft=function(){function Z(){}return Z.\u0275fac=function(v){return new(v||Z)},Z.\u0275mod=r.\u0275\u0275defineNgModule({type:Z}),Z.\u0275inj=r.\u0275\u0275defineInjector({imports:[s.CommonModule,K.sQ.forFeature([mt])]}),Z}()},10510:function(It,at,a){a.d(at,{Gg:function(){return V.Gg},eL:function(){return V.eL},rC:function(){return V.rC},AC:function(){return V.AC},a6:function(){return m},FF:function(){return Rt},Mv:function(){return V.Mv},rl:function(){return l.rl},EI:function(){return l.EI}}),a(81544);var r=a(32293),K=a(35510),c=a(11547),N=a(48787),u=a(17653),O=a(59822),A=a(18016),M=a(65232),V=a(40773),f=a(50423),L=a(7452),R=a(54323),P=a(77476),o=a(17174),z=a(95825),ct=a(65e3),J=a(74913),it=a(55490),Q=a(20551),gt=a(64716),_t=a(85721),mt=a(89237),st=a(55334);function ft(et,W){if(1&et&&(f.\u0275\u0275elementContainerStart(0),f.\u0275\u0275elementStart(1,"div",14),f.\u0275\u0275element(2,"tri-svg-icon",15),f.\u0275\u0275elementStart(3,"span"),f.\u0275\u0275text(4),f.\u0275\u0275elementEnd()(),f.\u0275\u0275elementContainerEnd()),2&et){var lt=f.\u0275\u0275nextContext();f.\u0275\u0275advance(1),f.\u0275\u0275attribute("data-testid","tri-git-connection-details-settings-v2-directory-error"),f.\u0275\u0275advance(1),f.\u0275\u0275property("name","error_circle_12_filled"),f.\u0275\u0275advance(2),f.\u0275\u0275textInterpolate1(" ",lt.branchNameInputError$.value," ")}}function Z(et,W){if(1&et&&(f.\u0275\u0275elementStart(0,"tri-dropdown-item",16)(1,"p"),f.\u0275\u0275text(2),f.\u0275\u0275elementEnd()()),2&et){var lt=W.$implicit;f.\u0275\u0275property("value",lt),f.\u0275\u0275advance(2),f.\u0275\u0275textInterpolate(lt.text)}}var ht=function(W){return{error:W}},v="cancelButton",G="createButton",m=function(){function et(W,lt,Gt,At,Ft,Dt,se){this.data=W,this.cdr=lt,this.dr=Gt,this.gitConnectionDiscoveryService=At,this.localizationService=Ft,this.telemetryService=Dt,this.gitErrorService=se,this._isCreateButtonEnabled=!1,this._isCreateButtonLoading=!1,this.branchNameInputError$=new K.X(void 0),this.unfiliteredBranchesList=this.data.branchesList.map(function(le){return{key:le,text:le}}),this.filteredBranchesList=this.unfiliteredBranchesList,this.dialogData={title:this.localizationService.get("Trident_Git_Create_New_Branch"),buttons:[{name:G,label:this.localizationService.get("Create_ButtonText"),buttonType:"primary",disabled:!this.isCreateButtonEnabled,isLoading:this.isCreateButtonLoading},{name:v,label:this.localizationService.get("Cancel_ButtonText"),closeButton:!0}]}}return et.prototype.onBranchNameChange=function(W){this.branchName=W,this.branchNameInputError$.next(this.validateBranchName(W)),this.calculateCreateButtonState()},et.prototype.onParentBranchNameChange=function(W){this.parentBranch=W?.text,this.calculateCreateButtonState()},et.prototype.onBranchesSearch=function(W){this.filteredBranchesList=this.unfiliteredBranchesList.filter(function(lt){return!W||lt.text.toLowerCase().includes(W.toLowerCase())})},et.prototype.clickButton=function(W){W===G?this.handleCreateBranchRequest():W===v&&this.dr.close()},et.prototype.handleCreateBranchRequest=function(){var lt,W=this;if(this.isCreateButtonLoading=!0,this.branchNameInputError$.next(void 0),!this.branchName)return this.isCreateButtonLoading=!1,void this.branchNameInputError$.next(this.localizationService.get("Trident_Git_Error_Git_InvalidBranchName_Message"));if(!this.parentBranch)return this.isCreateButtonLoading=!1,void this.branchNameInputError$.next(this.localizationService.get("Trident_Git_Error_Git_Create_Branch_Origin_Branch_Not_Found_Message"));if(void 0===this.data.details.gitProviderType||!this.data.details.organizationName||!this.data.details.repositoryName)return this.isCreateButtonLoading=!1,void this.branchNameInputError$.next(this.localizationService.get("Trident_Git_Error_Git_Create_Branch_Failed_Message"));var Gt={branchName:this.branchName,parentBranchName:this.parentBranch,organizationName:this.data.details.organizationName,providerType:this.data.details.gitProviderType,repositoryId:this.data.details.repositoryName,projectName:this.data.details.projectName,datasourceOID:null===(lt=this.data.details)||void 0===lt?void 0:lt.datasourceOID,workspaceId:this.data.workspaceId};this.gitConnectionDiscoveryService.createBranch(Gt).pipe((0,N.q)(1),(0,u.b)(function(){W.isCreateButtonLoading=!1,W.telemetryService.logEvent({name:"Create branch request",properties:{isWorkspaceConnected:W.data.isWorkspaceConnected}}),W.dr.close(W.branchName)}),(0,O.K)(function(At){var Ft,Dt=null===(Ft=W.gitErrorService.makeGitErrorFromHttpResponse("Git_Create_Branch_Failed",At))||void 0===Ft?void 0:Ft.errorsDetails[0];return Dt&&W.gitErrorService.isDedicatedErrorMessageAvailable(Dt.errorType)?W.branchNameInputError$.next(Dt.message):W.branchNameInputError$.next(W.localizationService.get("Trident_Git_Error_Git_Create_Branch_Failed_Message")),W.isCreateButtonLoading=!1,(0,c.of)()})).subscribe()},et.prototype.validateBranchName=function(W){return(0,A.tI)(W,this.localizationService)},et.prototype.calculateCreateButtonState=function(){this.isCreateButtonEnabled=void 0!==this.branchName&&""!==this.branchName&&void 0!==this.parentBranch&&void 0===this.branchNameInputError$.value},et.prototype.getDropDownOptions=function(){return{showFullContent:!1,dropdownHeight:this.filteredBranchesList.length>1?200:76,dropdownWidth:304}},et.prototype.getDropdownOverlayOptions=function(W){return{dropdownHeight:30*Math.max(Math.min(W,12),1)+34}},Object.defineProperty(et.prototype,"isCreateButtonEnabled",{get:function(){return this._isCreateButtonEnabled},set:function(lt){this._isCreateButtonEnabled=lt,this.dialogData.buttons[0].disabled=!lt},enumerable:!1,configurable:!0}),Object.defineProperty(et.prototype,"isCreateButtonLoading",{get:function(){return this._isCreateButtonLoading},set:function(lt){this._isCreateButtonLoading=lt,this.dialogData.buttons[0].isLoading=lt,this.dialogData.buttons[0].label=this.localizationService.get(lt?"CapacityProvisioning_SpinnerText":"Create_ButtonText"),this.cdr.detectChanges()},enumerable:!1,configurable:!0}),et.\u0275fac=function(lt){return new(lt||et)(f.\u0275\u0275directiveInject(r.WI),f.\u0275\u0275directiveInject(f.ChangeDetectorRef),f.\u0275\u0275directiveInject(r.so),f.\u0275\u0275directiveInject(V.eL),f.\u0275\u0275directiveInject(L.z),f.\u0275\u0275directiveInject(R.t),f.\u0275\u0275directiveInject(M.jR))},et.\u0275cmp=f.\u0275\u0275defineComponent({type:et,selectors:[["tri-git-create-branch"]],decls:33,vars:37,consts:[[3,"dialogData","buttonClickEvent"],["target","_blank","href","https://go.microsoft.com/fwlink/?linkid=2235132","localize","LearnMore","localize-tooltip","LearnMore",1,"learn-more-link-icon"],[1,"accordion-area"],[1,"branch-name-input"],[1,"mandatory"],["type","text",3,"ngClass","ngModel","placeholder","ngModelChange"],[4,"ngIf"],[1,"parent-branch-selection"],[1,"header-and-tooltip"],["id","select-origin-branch-dropdown-label-v2"],["tri-svg-icon-16","",3,"name","triTooltip"],["aria-labelledby","select-origin-branch-dropdown-label-V2",3,"ngModel","isDisabled","options","valueChange"],[1,"dropdown-search",3,"value"],[3,"value",4,"ngFor","ngForOf"],["tri-textfield-error","",1,"error-message"],["tri-svg-icon-12","",3,"name"],[3,"value"]],template:function(lt,Gt){var At;(1&lt&&(f.\u0275\u0275elementStart(0,"trident-dialog",0),f.\u0275\u0275listener("buttonClickEvent",function(Dt){return Gt.clickButton(Dt)}),f.\u0275\u0275elementStart(1,"div"),f.\u0275\u0275text(2),f.\u0275\u0275pipe(3,"localize"),f.\u0275\u0275elementStart(4,"tri-link",1),f.\u0275\u0275text(5),f.\u0275\u0275pipe(6,"localize"),f.\u0275\u0275elementEnd()(),f.\u0275\u0275elementStart(7,"div",2)(8,"div",3)(9,"h4"),f.\u0275\u0275text(10),f.\u0275\u0275pipe(11,"localize"),f.\u0275\u0275elementStart(12,"span",4),f.\u0275\u0275text(13," *"),f.\u0275\u0275elementEnd()(),f.\u0275\u0275elementStart(14,"input",5),f.\u0275\u0275listener("ngModelChange",function(Dt){return Gt.onBranchNameChange(Dt)}),f.\u0275\u0275pipe(15,"localize"),f.\u0275\u0275elementEnd(),f.\u0275\u0275template(16,ft,5,3,"ng-container",6),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(17,"div",7)(18,"div",8)(19,"h4",9),f.\u0275\u0275text(20),f.\u0275\u0275pipe(21,"localize"),f.\u0275\u0275elementStart(22,"span",4),f.\u0275\u0275text(23," *"),f.\u0275\u0275elementEnd()(),f.\u0275\u0275element(24,"tri-svg-icon",10),f.\u0275\u0275pipe(25,"localize"),f.\u0275\u0275pipe(26,"localize"),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(27,"tri-dropdown",11),f.\u0275\u0275listener("valueChange",function(Dt){return Gt.onParentBranchNameChange(Dt)}),f.\u0275\u0275elementStart(28,"tri-dropdown-trigger"),f.\u0275\u0275text(29),f.\u0275\u0275pipe(30,"localize"),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(31,"tri-search-box",12),f.\u0275\u0275listener("value",function(Dt){return Gt.onBranchesSearch(Dt)}),f.\u0275\u0275elementEnd(),f.\u0275\u0275template(32,Z,3,2,"tri-dropdown-item",13),f.\u0275\u0275elementEnd()()()()),2&lt)&&(f.\u0275\u0275property("dialogData",Gt.dialogData),f.\u0275\u0275advance(2),f.\u0275\u0275textInterpolate1(" ",f.\u0275\u0275pipeBind1(3,19,"Trident_Git_Create_New_Branch_Info")," "),f.\u0275\u0275advance(3),f.\u0275\u0275textInterpolate1(" ",f.\u0275\u0275pipeBind1(6,21,"LearnMore")," "),f.\u0275\u0275advance(5),f.\u0275\u0275textInterpolate1(" ",f.\u0275\u0275pipeBind1(11,23,"Trident_Git_Branch_Name")," "),f.\u0275\u0275advance(4),f.\u0275\u0275property("ngClass",f.\u0275\u0275pureFunction1(35,ht,void 0!==Gt.branchNameInputError$.value))("ngModel",Gt.branchName)("placeholder",f.\u0275\u0275pipeBind1(15,25,"Trident_Git_Branch_Name")),f.\u0275\u0275attribute("data-testid","branch-name-text-input"),f.\u0275\u0275advance(2),f.\u0275\u0275property("ngIf",void 0!==Gt.branchNameInputError$.value),f.\u0275\u0275advance(4),f.\u0275\u0275textInterpolate1(" ",f.\u0275\u0275pipeBind1(21,27,"Trident_Git_Create_New_Branch_Create_From")," "),f.\u0275\u0275advance(4),f.\u0275\u0275property("name","info_16_regular")("triTooltip",f.\u0275\u0275pipeBind1(25,29,"Trident_Git_Create_New_Branch_Tooltip")),f.\u0275\u0275attribute("aria-label",f.\u0275\u0275pipeBind1(26,31,"Trident_Git_Create_New_Branch_Tooltip")),f.\u0275\u0275advance(3),f.\u0275\u0275property("ngModel",Gt.parentBranch)("isDisabled",0===Gt.data.branchesList.length)("options",Gt.getDropDownOptions()),f.\u0275\u0275attribute("data-testid","parent-branch-dropdown"),f.\u0275\u0275advance(2),f.\u0275\u0275textInterpolate1(" ",null!==(At=Gt.parentBranch)&&void 0!==At?At:f.\u0275\u0275pipeBind1(30,33,"Trident_Git_Create_New_Branch_Choose_Parent_Branch")," "),f.\u0275\u0275advance(3),f.\u0275\u0275property("ngForOf",Gt.filteredBranchesList))},dependencies:[P.NgClass,P.NgForOf,P.NgIf,o.Fj,o.JJ,o.On,z.v,ct.v,J.M,it.Z,Q.M3,gt.l,_t.q,Q.ii,mt.U,st.Y],styles:["[_nghost-%COMP%]     mat-dialog-content{display:flex;flex-direction:column;font-size:var(--fontSizeBase300)}[_nghost-%COMP%]     .mat-mdc-dialog-content.dialog-body{display:flex;flex-direction:column;gap:16px;max-height:none}.accordion-area[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;padding:24px;border:1px solid var(--globalColorGrey82);border-radius:8px;gap:24px;height:100%}.accordion-area[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:var(--fontSizeBase300);font-weight:var(--fontWeightSemibold);margin:0 0 4px}.accordion-area[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   span.mandatory[_ngcontent-%COMP%]{color:var(--globalColorRedShade10)}.accordion-area[_ngcontent-%COMP%]   .branch-name-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;border-bottom:1px solid var(--globalColorGrey38);border:1px solid var(--globalColorGrey82);border-radius:4px;padding:6px 10px 6px 12px;box-sizing:border-box}.accordion-area[_ngcontent-%COMP%]   .branch-name-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-bottom:2px solid var(--globalColorBrand80)}.accordion-area[_ngcontent-%COMP%]   .branch-name-input[_ngcontent-%COMP%]   .input-error[_ngcontent-%COMP%]{border-color:var(--colorPaletteRedForeground1)}.accordion-area[_ngcontent-%COMP%]   .parent-branch-selection[_ngcontent-%COMP%]{margin-bottom:12px;display:flex;flex-direction:column;gap:4px}.accordion-area[_ngcontent-%COMP%]   .parent-branch-selection[_ngcontent-%COMP%]   .header-and-tooltip[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:20px}.accordion-area[_ngcontent-%COMP%]   .parent-branch-selection[_ngcontent-%COMP%]   .header-and-tooltip[_ngcontent-%COMP%]   tri-svg-icon[_ngcontent-%COMP%]{fill:var(--globalColorGrey38)}tri-dropdown[_ngcontent-%COMP%]{width:100%;overflow-x:hidden;text-overflow:ellipsis;color:var(--colorNeutralForeground4);box-sizing:border-box}tri-dropdown.error[_ngcontent-%COMP%]{border:1px solid var(--globalColorCranberryPrimary)}.dropdown-search[_ngcontent-%COMP%]{box-sizing:border-box;width:100%;margin-bottom:2px}.error-message[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:4px;color:var(--globalColorCranberryPrimary);fill:var(--globalColorCranberryPrimary)}.error-message[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:var(--fontSizeBase200)}.error-message[_ngcontent-%COMP%]   tri-svg-icon[_ngcontent-%COMP%]{min-width:12px;min-height:12px}"],changeDetection:0}),et}(),l=(a(71707),a(31572)),D=a(32980),k=a(6814),X=a(78035),q=a(95228),rt=a(16149),tt=a(17177),St=a(75476),Ot=a(57156),g=a(13281),j=a(8816),ot=a(18176),Et=a(12385),Mt=a(44913),Ut=a(46303),bt=a(94757),Bt=a(84515),xt=a(42178),Tt=a(81339),Kt=a(15468),Rt=function(){function et(){}return et.\u0275fac=function(lt){return new(lt||et)},et.\u0275mod=f.\u0275\u0275defineNgModule({type:et}),et.\u0275inj=f.\u0275\u0275defineInjector({providers:[bt.G,Bt.e,xt.r,Kt.A,k.Ns.withLazyService(Tt.A,xt.r)],imports:[P.CommonModule,o.u5,D.sp,rt.m,X.Y,tt.T6,j.w,g.fe,Ot.F,St.OT,q.W,ot.Ug,Et.K3,Mt.lK,Ut.b]}),et}()},81544:function(It,at,a){a.d(at,{b:function(){return T}});var s=a(32293),r=a(30794),K=a(35510),c=a(11547),N=a(59017),u=a(48787),O=a(14172),A=a(81905),M=a(83317),V=a(59973),f=a(70628),L=a(18016),R=a(31572),P=a(40773),o=a(50423),z=a(7452),ct=a(77476),J=a(17174),it=a(95825),Q=a(74913),gt=a(55490),_t=a(55334);function mt(U,b){1&U&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"div",7),o.\u0275\u0275element(2,"tri-svg-icon",8),o.\u0275\u0275elementStart(3,"span"),o.\u0275\u0275text(4),o.\u0275\u0275pipe(5,"localize"),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementContainerEnd()),2&U&&(o.\u0275\u0275advance(1),o.\u0275\u0275attribute("data-testid","tri-git-auth-dialog-name-error"),o.\u0275\u0275advance(1),o.\u0275\u0275property("name","error_circle_12_filled"),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate1(" ",o.\u0275\u0275pipeBind1(5,3,"Pipelines_CreatePipelineDialog_NameAlreadyExistsError")," "))}function st(U,b){1&U&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"div",7),o.\u0275\u0275element(2,"tri-svg-icon",8),o.\u0275\u0275elementStart(3,"span"),o.\u0275\u0275text(4),o.\u0275\u0275pipe(5,"localize"),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementContainerEnd()),2&U&&(o.\u0275\u0275advance(1),o.\u0275\u0275attribute("data-testid","tri-git-auth-dialog-pat-error"),o.\u0275\u0275advance(1),o.\u0275\u0275property("name","error_circle_12_filled"),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate1(" ",o.\u0275\u0275pipeBind1(5,3,"Trident_Git_Auth_Dialog_Param_PAT_Error")," "))}function ft(U,b){1&U&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"div",7),o.\u0275\u0275element(2,"tri-svg-icon",8),o.\u0275\u0275elementStart(3,"span"),o.\u0275\u0275text(4),o.\u0275\u0275pipe(5,"localize"),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementContainerEnd()),2&U&&(o.\u0275\u0275advance(1),o.\u0275\u0275attribute("data-testid","tri-git-auth-dialog-url-error"),o.\u0275\u0275advance(1),o.\u0275\u0275property("name","error_circle_12_filled"),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate1(" ",o.\u0275\u0275pipeBind1(5,3,"Trident_Git_Auth_Dialog_Param_RepoUrl_Error")," "))}var Z=function(b){return{error:b}};function ht(U,b){if(1&U){var H=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"trident-dialog",1),o.\u0275\u0275listener("buttonClickEvent",function(h){o.\u0275\u0275restoreView(H);var l=o.\u0275\u0275nextContext();return o.\u0275\u0275resetView(l.clickButton(h))}),o.\u0275\u0275pipe(2,"localize"),o.\u0275\u0275elementStart(3,"div")(4,"h4"),o.\u0275\u0275text(5),o.\u0275\u0275pipe(6,"localize"),o.\u0275\u0275elementStart(7,"span",2),o.\u0275\u0275text(8," *"),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementStart(9,"div",3)(10,"input",4),o.\u0275\u0275listener("ngModelChange",function(h){o.\u0275\u0275restoreView(H);var l=o.\u0275\u0275nextContext();return o.\u0275\u0275resetView(l.displayName=h)})("ngModelChange",function(h){o.\u0275\u0275restoreView(H);var l=o.\u0275\u0275nextContext();return o.\u0275\u0275resetView(l.displayNameChanged(h))}),o.\u0275\u0275pipe(11,"async"),o.\u0275\u0275pipe(12,"localize"),o.\u0275\u0275pipe(13,"localize"),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(14,mt,6,5,"ng-container",0),o.\u0275\u0275pipe(15,"async"),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementStart(16,"div")(17,"h4"),o.\u0275\u0275text(18),o.\u0275\u0275pipe(19,"localize"),o.\u0275\u0275elementStart(20,"span",2),o.\u0275\u0275text(21," *"),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(22,"tri-svg-icon",5),o.\u0275\u0275pipe(23,"localize"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(24,"div",3)(25,"input",6),o.\u0275\u0275listener("ngModelChange",function(h){o.\u0275\u0275restoreView(H);var l=o.\u0275\u0275nextContext();return o.\u0275\u0275resetView(l.personalAccessToken=h)})("ngModelChange",function(h){o.\u0275\u0275restoreView(H);var l=o.\u0275\u0275nextContext();return o.\u0275\u0275resetView(l.personalAccessTokenChanged(h))}),o.\u0275\u0275pipe(26,"async"),o.\u0275\u0275pipe(27,"localize"),o.\u0275\u0275pipe(28,"localize"),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(29,st,6,5,"ng-container",0),o.\u0275\u0275pipe(30,"async"),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementStart(31,"div")(32,"h4"),o.\u0275\u0275text(33),o.\u0275\u0275pipe(34,"localize"),o.\u0275\u0275element(35,"tri-svg-icon",5),o.\u0275\u0275pipe(36,"localize"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(37,"div",3)(38,"input",4),o.\u0275\u0275listener("ngModelChange",function(h){o.\u0275\u0275restoreView(H);var l=o.\u0275\u0275nextContext();return o.\u0275\u0275resetView(l.repositoryUrl=h)})("ngModelChange",function(h){o.\u0275\u0275restoreView(H);var l=o.\u0275\u0275nextContext();return o.\u0275\u0275resetView(l.repositoryUrlChanged(h))}),o.\u0275\u0275pipe(39,"async"),o.\u0275\u0275pipe(40,"localize"),o.\u0275\u0275pipe(41,"localize"),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(42,ft,6,5,"ng-container",0),o.\u0275\u0275pipe(43,"async"),o.\u0275\u0275elementEnd()()(),o.\u0275\u0275elementContainerEnd()}if(2&U){var w=b.ngIf,G=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("dialogData",G.dialogData)("closeButtonLabel",o.\u0275\u0275pipeBind1(2,27,"Cancel_ButtonText")),o.\u0275\u0275advance(4),o.\u0275\u0275textInterpolate1(" ",o.\u0275\u0275pipeBind1(6,29,"Trident_Git_Auth_Dialog_Param_DisplayName")," "),o.\u0275\u0275advance(5),o.\u0275\u0275property("ngClass",o.\u0275\u0275pureFunction1(63,Z,o.\u0275\u0275pipeBind1(11,31,G.isDisplayNameInvalid$)))("ngModel",G.displayName)("placeholder",o.\u0275\u0275pipeBind1(12,33,w.localizationKeysList[1])),o.\u0275\u0275attribute("data-testid","tri-git-auth-dialog-display-name-input")("aria-label",o.\u0275\u0275pipeBind1(13,35,"Trident_Git_Auth_Dialog_Param_DisplayName")),o.\u0275\u0275advance(4),o.\u0275\u0275property("ngIf",o.\u0275\u0275pipeBind1(15,37,G.isDisplayNameInvalid$)),o.\u0275\u0275advance(4),o.\u0275\u0275textInterpolate1(" ",o.\u0275\u0275pipeBind1(19,39,"Trident_Git_Auth_Dialog_Param_PAT")," "),o.\u0275\u0275advance(4),o.\u0275\u0275property("name","info_16_regular")("triTooltip",o.\u0275\u0275pipeBind1(23,41,w.localizationKeysList[2])),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngClass",o.\u0275\u0275pureFunction1(65,Z,o.\u0275\u0275pipeBind1(26,43,G.isPersonalAccessTokenInvalid$)))("ngModel",G.personalAccessToken)("placeholder",o.\u0275\u0275pipeBind1(27,45,w.localizationKeysList[3])),o.\u0275\u0275attribute("data-testid","tri-git-auth-dialog-pat-input")("aria-label",o.\u0275\u0275pipeBind1(28,47,"Trident_Git_Auth_Dialog_Param_PAT")),o.\u0275\u0275advance(4),o.\u0275\u0275property("ngIf",o.\u0275\u0275pipeBind1(30,49,G.isPersonalAccessTokenInvalid$)),o.\u0275\u0275advance(4),o.\u0275\u0275textInterpolate1(" ",o.\u0275\u0275pipeBind1(34,51,"Trident_Git_Auth_Dialog_Param_RepoUrl")," "),o.\u0275\u0275advance(2),o.\u0275\u0275property("name","info_16_regular")("triTooltip",o.\u0275\u0275pipeBind1(36,53,w.localizationKeysList[4])),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngClass",o.\u0275\u0275pureFunction1(67,Z,o.\u0275\u0275pipeBind1(39,55,G.isRepositoryUrlInvalid$)))("ngModel",G.repositoryUrl)("placeholder",o.\u0275\u0275pipeBind1(40,57,w.localizationKeysList[5])),o.\u0275\u0275attribute("data-testid","tri-git-auth-dialog-url-input")("aria-label",o.\u0275\u0275pipeBind1(41,59,"Trident_Git_Auth_Dialog_Param_RepoUrl")),o.\u0275\u0275advance(4),o.\u0275\u0275property("ngIf",o.\u0275\u0275pipeBind1(43,61,G.isRepositoryUrlInvalid$))}}var I="Cancel",T=function(){function U(b,H,w,G,m,h){this.cdr=b,this.dr=H,this.gitDatasourceService=w,this.gitSessionStorageService=G,this.localizationService=m,this.data=h,this._isAddButtonEnabled=!1,this._isAddButtonLoading=!1,this.destroy$=new r.xQ,this.isDisplayNameInvalid$=new K.X(void 0),this.isPersonalAccessTokenInvalid$=new K.X(void 0),this.validatePersonalAccessToken=function(){return!1},this.isRepositoryUrlInvalid$=new K.X(!1),this.validateRepositoryUrl=function(){return!0},this.workspaceId=this.data,this.selectedGitProviderType$=(0,c.of)(),this.componentAssets$=(0,c.of)(),this.existingDatasourcesNames=[],this.dialogData={title:"",buttons:[{name:"Add",label:this.localizationService.get("ItemAction_Add"),buttonType:"primary",disabled:!this.isAddButtonEnabled,isLoading:this.isAddButtonLoading},{name:I,label:this.localizationService.get("Cancel_ButtonText"),closeButton:!0}]},this.displayName="",this.personalAccessToken="",this.repositoryUrl=""}return U.prototype.ngOnInit=function(){var b=this,H=(0,R.fA)();this.selectedGitProviderType$=this.gitSessionStorageService.loadGitSessionStorage(this.workspaceId).pipe((0,u.q)(1),(0,O.U)(function(w){return w?.selectedGitProviderType})),this.componentAssets$=this.selectedGitProviderType$.pipe((0,u.q)(1),(0,O.U)(function(w){if(w){var G=H[w];if(G)return b.dialogData.title=b.localizationService.get(G.localizationKeysList[0]),b.validatePersonalAccessToken=G.validationFunctionsList[0],b.validateRepositoryUrl=G.validationFunctionsList[1],G}})),this.selectedGitProviderType$.pipe((0,u.q)(1),(0,A.w)(function(w){return void 0!==w?b.gitDatasourceService.getDatasources({workspaceId:b.workspaceId,gitProviderType:w}).pipe((0,O.U)(function(G){return{gitProviderType:w,datasources:G}})):(0,c.of)({gitProviderType:void 0,datasources:void 0})})).subscribe(function(w){var G,m=w.gitProviderType,h=w.datasources;void 0!==h?.datasourcesRecord&&void 0!==m&&(b.existingDatasourcesNames=null!==(G=h.datasourcesRecord[m].map(function(D){return D.datasourceName.toLowerCase()}))&&void 0!==G?G:[])})},U.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},U.prototype.clickButton=function(b){"Add"===b?this.handleCreateDatasourceRequest():b===I&&this.dr.close()},U.prototype.displayNameChanged=function(b){this.isDisplayNameInvalid$.next(this.existingDatasourcesNames.includes(b.toLowerCase())),this.calculateAddButtonState()},U.prototype.personalAccessTokenChanged=function(b){this.isPersonalAccessTokenInvalid$.next(!(""===this.personalAccessToken||this.validatePersonalAccessToken(b))),this.calculateAddButtonState()},U.prototype.repositoryUrlChanged=function(b){this.isRepositoryUrlInvalid$.next(""!==b&&!this.validateRepositoryUrl(b)),this.calculateAddButtonState()},U.prototype.handleCreateDatasourceRequest=function(){var b=this,H={workspaceId:this.workspaceId,gitProviderType:L.IS.GitHub,displayName:this.displayName,personalAccessToken:this.personalAccessToken,repositoryUrl:this.repositoryUrl};this.isAddButtonLoading=!0,(0,N.aj)([this.gitDatasourceService.getDatasourceCallState(this.workspaceId),this.gitDatasourceService.createDatasource(H)]).pipe((0,M.R)(this.destroy$),(0,V.h)(function(w){var G=w[0];return G===f.j3q.Completed||(0,L.pb)(G)}),(0,u.q)(1)).subscribe(function(w){var G=w[0];G===f.j3q.Completed?b.dr.close():(b.isAddButtonLoading=!1,(!(0,L.pb)(G)||!b.isRecoverableError(G))&&b.dr.close())})},U.prototype.calculateAddButtonState=function(){this.isAddButtonEnabled=!(""===this.displayName||this.isDisplayNameInvalid$.value||""===this.personalAccessToken||this.isPersonalAccessTokenInvalid$.value||""!==this.repositoryUrl&&this.isRepositoryUrlInvalid$.value)},U.prototype.isRecoverableError=function(b){return!1},Object.defineProperty(U.prototype,"isAddButtonEnabled",{get:function(){return this._isAddButtonEnabled},set:function(H){this._isAddButtonEnabled=H,this.dialogData.buttons[0].disabled=!H},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"isAddButtonLoading",{get:function(){return this._isAddButtonLoading},set:function(H){this._isAddButtonLoading=H,this.dialogData.buttons[0].isLoading=H,this.dialogData.buttons[0].label=this.localizationService.get(H?"Adding":"ItemAction_Add"),this.cdr.detectChanges()},enumerable:!1,configurable:!0}),U.\u0275fac=function(H){return new(H||U)(o.\u0275\u0275directiveInject(o.ChangeDetectorRef),o.\u0275\u0275directiveInject(s.so),o.\u0275\u0275directiveInject(P.Ae),o.\u0275\u0275directiveInject(f.gCl),o.\u0275\u0275directiveInject(z.z),o.\u0275\u0275directiveInject(s.WI))},U.\u0275cmp=o.\u0275\u0275defineComponent({type:U,selectors:[["tri-git-auth-dialog"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"dialogData","closeButtonLabel","buttonClickEvent"],[1,"mandatory"],["tri-textfield","",1,"input-container"],["type","text",3,"ngClass","ngModel","placeholder","ngModelChange"],["tri-svg-icon-16","",3,"name","triTooltip"],["type","password",3,"ngClass","ngModel","placeholder","ngModelChange"],["tri-textfield-error","",1,"error-message"],["tri-svg-icon-12","",3,"name"]],template:function(H,w){1&H&&(o.\u0275\u0275template(0,ht,44,69,"ng-container",0),o.\u0275\u0275pipe(1,"async")),2&H&&o.\u0275\u0275property("ngIf",o.\u0275\u0275pipeBind1(1,1,w.componentAssets$))},dependencies:[ct.NgClass,ct.NgIf,J.Fj,J.JJ,J.On,it.v,Q.M,gt.Z,ct.AsyncPipe,_t.Y],styles:["[_nghost-%COMP%]     mat-dialog-content{display:flex;flex-direction:column;gap:8px;font-size:var(--fontSizeBase300)}[_nghost-%COMP%]     mat-dialog-content div:not(.input-container){display:flex;flex-direction:column;gap:4px}[_nghost-%COMP%]     mat-dialog-content div:not(.input-container) h4{display:flex;flex-direction:row;align-items:center;gap:4px;margin:0;font-size:var(--fontSizeBase300);font-weight:var(--fontWeightSemibold)}[_nghost-%COMP%]     mat-dialog-content div:not(.input-container) h4 span.mandatory{color:var(--globalColorRedShade10)}[_nghost-%COMP%]     mat-dialog-content div:not(.input-container) h4 tri-svg-icon{fill:var(--globalColorGrey38)}[_nghost-%COMP%]     mat-dialog-content div:not(.input-container) input{width:100%;border-bottom:1px solid var(--globalColorGrey38)}[_nghost-%COMP%]     mat-dialog-content div:not(.input-container) input.error{border:1px solid var(--globalColorCranberryPrimary)}[_nghost-%COMP%]     mat-dialog-content div:not(.input-container) input:focus{border-bottom:2px solid var(--globalColorBrand80)}[_nghost-%COMP%]     mat-dialog-content div:not(.input-container) .error-message{display:flex;flex-direction:row}[_nghost-%COMP%]     mat-dialog-content div:not(.input-container) .error-message span{font-size:var(--fontSizeBase200)}[_nghost-%COMP%]     mat-dialog-actions .button-container{gap:8px;margin:16px 0 0}[_nghost-%COMP%]     .mat-mdc-dialog-content.dialog-body{max-height:none}"],changeDetection:0}),U}()},71707:function(It,at,a){a.d(at,{A:function(){return ct}});var s=a(48787),r=a(81905),K=a(17653),c=a(59822),N=a(32293),u=a(11547),O=a(65232),A=a(70628),M=a(12385),V=a(40773),f=a(50423),L=a(7452),R=a(95825),P=a(55334),o="cancelButton",z="logoutButton",ct=function(){function J(it,Q,gt,_t,mt,st,ft,Z){this.data=it,this.dr=Q,this.localizationService=gt,this.gitConfigureCredentialsService=_t,this.gitSessionStorageService=mt,this.gitNotificationService=st,this.gitConnectionService=ft,this.gitErrorService=Z,this.dialogData={title:this.localizationService.get("Trident_Git_Log_Out_Dialog_Title"),buttons:[{name:z,label:this.localizationService.get("Trident_Git_Log_Out"),buttonType:"primary"},{name:o,label:this.localizationService.get("Cancel_ButtonText"),closeButton:!0}]}}return J.prototype.clickButton=function(it){it===z?this.handleLogOutRequest():it===o&&this.dr.close(it)},J.prototype.handleLogOutRequest=function(){var it=this;this.gitConnectionService.getGitConnection(this.data.workspaceId).pipe((0,s.q)(1),(0,r.w)(function(Q){return Q?.gitConnectionDetails?it.gitConfigureCredentialsService.deleteConfiguredCredentials(it.data.workspaceId):(0,u.of)(void 0)}),(0,s.q)(1),(0,K.b)(function(){it.gitSessionStorageService.deleteCredentials(it.data.workspaceId),it.gitNotificationService.showSuccessNotification("Trident_Git_Toast_Logout_Success"),it.dr.close(z)}),(0,c.K)(function(Q){var gt=it.gitErrorService.makeGitErrorFromHttpResponse("Git_Delete_Credentials_Failed",Q);return it.gitNotificationService.showErrorNotification(gt,"Trident_Git_Toast_Logout_Fail"),[]})).subscribe()},J.\u0275fac=function(Q){return new(Q||J)(f.\u0275\u0275directiveInject(N.WI),f.\u0275\u0275directiveInject(N.so),f.\u0275\u0275directiveInject(L.z),f.\u0275\u0275directiveInject(V.id),f.\u0275\u0275directiveInject(A.gCl),f.\u0275\u0275directiveInject(M.mn),f.\u0275\u0275directiveInject(V.rC),f.\u0275\u0275directiveInject(O.jR))},J.\u0275cmp=f.\u0275\u0275defineComponent({type:J,selectors:[["tri-git-logout-dialog"]],decls:4,vars:4,consts:[[3,"dialogData","buttonClickEvent"]],template:function(Q,gt){1&Q&&(f.\u0275\u0275elementStart(0,"trident-dialog",0),f.\u0275\u0275listener("buttonClickEvent",function(mt){return gt.clickButton(mt)}),f.\u0275\u0275elementStart(1,"p"),f.\u0275\u0275text(2),f.\u0275\u0275pipe(3,"localize"),f.\u0275\u0275elementEnd()()),2&Q&&(f.\u0275\u0275property("dialogData",gt.dialogData),f.\u0275\u0275advance(2),f.\u0275\u0275textInterpolate1(" ",f.\u0275\u0275pipeBind1(3,2,"Trident_Git_Log_Out_Dialog_Message")," "))},dependencies:[R.v,P.Y],encapsulation:2,changeDetection:0}),J}()},31572:function(It,at,a){a.d(at,{NJ:function(){return T},P0:function(){return U},rl:function(){return v},fA:function(){return b},ge:function(){return G},_k:function(){return m},Tr:function(){return w},EI:function(){return H},yp:function(){return h}});var s=a(11547),r=a(18016),K=a(48787),c=a(14172);function N(l){if(!l?.project)throw"Git_AzureDevOpsMissingProjectName";if(l?.datasourceOID)throw"Git_AzureDevOpsInvalidParameters"}function u(l){if(!l?.projectName)throw"Git_AzureDevOpsMissingProjectName"}function O(l){if(!l?.projectName)throw"Git_AzureDevOpsMissingProjectName"}function A(l){return void 0!==l?.selectedUserAccount}function M(l){if(!l?.projectName)throw"Git_AzureDevOpsMissingProjectName"}function V(l,D){return D.getGitConnection(l).pipe((0,K.q)(1),(0,c.U)(function(k){return void 0===k?.gitConnectionDetails}))}var f=a(59017),L="https://github.com";function o(l){return{datasourceOID:l.id}}function z(l){var D;return null!==(D=l.isConfigured)&&void 0!==D&&D}function ct(l,D,k){return(0,f.aj)([k.loadGitSessionStorage(l),D.getGitConnection(l)]).pipe((0,c.U)(function(X){var rt=X[1];return void 0!==rt?.gitConnectionDetails}))}function J(l,D,k){if(D&&D!==L){if(!_t(D))throw new Error("Git_Invalid_Github_Repository_Url");var X=D.split("/");l.setDatasourceUrl(k,X[3],X[4])}else l.resetDatasourceUrl(k)}var it=["Trident_Git_Auth_Dialog_Title_GitHub","Trident_Git_Auth_Dialog_Param_DisplayName_Placeholder","Trident_Git_Auth_Dialog_Param_PAT_Tooltip_GitHub","Trident_Git_Auth_Dialog_Param_PAT_Placeholder_GitHub","Trident_Git_Auth_Dialog_Param_RepoUrl_Tooltip_GitHub","Trident_Git_Auth_Dialog_Param_RepoUrl_Placeholder"],Q=[function(l){return l.toLowerCase().startsWith("ghp_")||l.startsWith("github_pat_")},_t];function _t(l){var D=l.replace(/\/$|\.git$/g,"");return/^https:\/\/github\.com\/[^/]+\/[^/]+$/.test(D)}function mt(l){if(!l?.datasourceOID)throw"Git_GitHubMissingDatasourceOID"}function st(l){if(l?.projectName)throw"Git_GitHubInvalidParameters";if(!l?.datasourceOID)throw"Git_GitHubMissingDatasourceOID"}function ft(l){if(l?.projectName)throw"Git_GitHubInvalidParameters";if(!l?.datasourceOID)throw"Git_GitHubMissingDatasourceOID"}function Z(l){if(l?.projectName)throw"Git_GitHubInvalidParameters";if(!l?.datasourceOID)throw"Git_GitHubMissingDatasourceOID"}function ht(l,D){return l?.filter(function(k){return k.url===D||k.url===L})}function v(l){return"".concat(L,"/").concat(l.organizationName,"/").concat(l.repositoryName)}var T=function(l){return l[l.ShowADOAccountsList=0]="ShowADOAccountsList",l[l.ShowGitHubDataSourcesList=1]="ShowGitHubDataSourcesList",l}({}),U=function(l){return l.UserAccountDetails="UserAccountDetails",l.DatasourceDetails="DatasourceDetails",l}({});function b(){var l;return(l={})[r.IS.AzureDevOps]=void 0,l[r.IS.GitHub]={localizationKeysList:it,validationFunctionsList:Q},l}function H(){var l;return(l={})[r.IS.AzureDevOps]={displayMode:T.ShowADOAccountsList,connectedProviderDetailsType:U.UserAccountDetails,doesGitProviderNeedsDatasource:!1,canTheUserLogOut:V,shouldShowSwitchAccount:function(){return(0,s.of)(!1)},isWorkspaceConnectedToGitProvider:A},l[r.IS.GitHub]={displayMode:T.ShowGitHubDataSourcesList,connectedProviderDetailsType:U.DatasourceDetails,doesGitProviderNeedsDatasource:!0,canTheUserLogOut:function(){return(0,s.of)(!0)},shouldShowSwitchAccount:ct,isWorkspaceConnectedToGitProvider:z,selectDatasourceSideEffect:J,filterDatasources:ht,getFilteringValue:v},l}function w(){var l;return(l={})[r.IS.AzureDevOps]={},l[r.IS.GitHub]={createConfigureCredentialsRequestFromDatasource:o},l}function G(){var l;return(l={})[r.IS.AzureDevOps]={getBranchesValidator:N,createBranchRequestValidator:u,createDirectoryRequestValidator:O},l[r.IS.GitHub]={getBranchesValidator:mt,createBranchRequestValidator:st,createDirectoryRequestValidator:ft},l}function m(){var l;return(l={})[r.IS.AzureDevOps]={gitConnectionDetailsContractValidator:M},l[r.IS.GitHub]={gitConnectionDetailsContractValidator:Z},l}function h(l){var D=new Map;return D.set(r.IS.GitHub,function(l){var D,k;return null===(k=null===(D=l.featureSwitches)||void 0===D?void 0:D.gitHubTenantSettingsEnabled)||void 0===k||k}(l)),D.set(r.IS.AzureDevOps,!0),D}},94757:function(It,at,a){a.d(at,{G:function(){return O}});var s=a(33554),r=a(58417),K=a(48787),c=a(14172),N=a(94771),u=a(50423),O=function(){function A(M){this.featureSwitchService=M,this.featureSwitchStatusSubjects={}}return A.prototype.isTenantAdminEnabled=function(M){return this.featureSwitchStatusSubjects[M]||(this.featureSwitchStatusSubjects[M]=new s.t(1),this.fetchFeatureSwitchStatus(M).subscribe(this.featureSwitchStatusSubjects[M])),this.featureSwitchStatusSubjects[M].asObservable()},A.prototype.fetchFeatureSwitchStatus=function(M){var V=this;return!0!==this.featureSwitchService.featureSwitches.tridentGitSwitchesDelegation?new r.y(function(f){f.next(!!V.featureSwitchService.featureSwitches.gitIntegrationTenantSwitchEnabled),f.complete()}):this.featureSwitchService.getWorkspaceDelegatedSetting({name:"GitIntegrationTenantSwitchEnabled",workspaceObjectId:M}).pipe((0,K.q)(1),(0,c.U)(function(f){return f.isEnabled||!1}))},A.\u0275fac=function(V){return new(V||A)(u.\u0275\u0275inject(N.V$))},A.\u0275prov=u.\u0275\u0275defineInjectable({token:A,factory:A.\u0275fac,providedIn:"root"}),A}()},84515:function(It,at,a){a.d(at,{e:function(){return N}});var s=a(14172),r=a(18176),K=a(31572),c=a(50423),N=function(){function u(O){this.gitConnectionDiscoveryClient=O,this.serviceConfig=(0,K.ge)()}return u.prototype.getOrganizations=function(O,A){return this.gitConnectionDiscoveryClient.getOrganizations(O,A)},u.prototype.getProjects=function(O,A,M){return this.gitConnectionDiscoveryClient.getProjects(O,A,M)},u.prototype.getRepositories=function(O,A,M,V){return this.gitConnectionDiscoveryClient.getRepositories(O,A,M,V)},u.prototype.getBranches=function(O){var A,M=null===(A=this.serviceConfig[O.gitProviderType])||void 0===A?void 0:A.getBranchesValidator;return M&&M(O),this.gitConnectionDiscoveryClient.getBranches(O.workspaceId,O.gitProviderType,O.organization,O.repository,O?.project,O?.datasourceOID)},u.prototype.createBranch=function(O){var A,M=null===(A=this.serviceConfig[O.providerType])||void 0===A?void 0:A.createBranchRequestValidator;return M&&M(O),this.gitConnectionDiscoveryClient.createBranch(O)},u.prototype.createDirectory=function(O){var A,M=null===(A=this.serviceConfig[O.providerType])||void 0===A?void 0:A.createDirectoryRequestValidator;return M&&M(O),this.gitConnectionDiscoveryClient.createDirectory(O)},u.prototype.getRelatedWorkspaces=function(O){return this.gitConnectionDiscoveryClient.getRelatedWorkspaces(O).pipe((0,s.U)(function(A){return A.relatedWorkspaces}))},u.\u0275fac=function(A){return new(A||u)(c.\u0275\u0275inject(r.bE))},u.\u0275prov=c.\u0275\u0275defineInjectable({token:u,factory:u.\u0275fac,providedIn:"root"}),u}()},81339:function(It,at,a){a.d(at,{A:function(){return r}});var r=new(a(50423).InjectionToken)("GitConnectionService")},42178:function(It,at,a){a.d(at,{r:function(){return f}});var s=a(11547),r=a(48787),K=a(81905),c=a(17653),N=a(59822),u=a(70628),O=a(94757),A=a(31572),M=a(50423),V=a(85732),f=function(){function L(R,P,o){this.gitConnectionFacade=R,this.gitAdminSwitchesService=P,this.store=o,this.serviceConfig=(0,A._k)()}return L.prototype.loadGitConnection=function(R){var P=this;return this.gitAdminSwitchesService.isTenantAdminEnabled(R).pipe((0,r.q)(1),(0,K.w)(function(o){return o?P.gitConnectionFacade.loadGitConnection(R):(0,s.of)(void 0)}),(0,r.q)(1),(0,c.b)(function(o){var z;if(o?.gitConnectionDetails){var ct=null===(z=P.serviceConfig[o.gitConnectionDetails.gitProviderType])||void 0===z?void 0:z.gitConnectionDetailsContractValidator;ct&&ct(o.gitConnectionDetails)}}),(0,N.K)(function(){return(0,s.of)(void 0)}))},L.prototype.ensureGitConnection=function(R,P){var o=this;return void 0===P&&(P=!1),P?this.gitConnectionFacade.ensureGitConnection(R):this.gitAdminSwitchesService.isTenantAdminEnabled(R).pipe((0,r.q)(1),(0,K.w)(function(z){return z?o.gitConnectionFacade.ensureGitConnection(R):(0,s.of)(void 0)}))},L.prototype.getGitConnection=function(R){var P=this;return this.gitAdminSwitchesService.isTenantAdminEnabled(R).pipe((0,r.q)(1),(0,K.w)(function(o){return o?P.gitConnectionFacade.getGitConnection(R):(0,s.of)(void 0)}))},L.prototype.updateDatasourceInGitConnection=function(R,P){this.store.dispatch((0,u.V_q)({workspaceId:R,datasourceOID:P}))},L.prototype.saveGitConnection=function(R){var P;if(R?.gitConnectionDetails){var o=null===(P=this.serviceConfig[R.gitConnectionDetails.gitProviderType])||void 0===P?void 0:P.gitConnectionDetailsContractValidator;o&&o(R.gitConnectionDetails)}return this.gitConnectionFacade.saveGitConnection(R)},L.prototype.deleteGitConnection=function(R){return this.gitConnectionFacade.deleteGitConnection(R)},L.prototype.getGitConnectionOperationState=function(R){var P=this;return this.gitAdminSwitchesService.isTenantAdminEnabled(R).pipe((0,r.q)(1),(0,K.w)(function(o){return o?P.gitConnectionFacade.getGitConnectionOperationState(R):(0,s.of)(u.Gui.Initial)}))},L.prototype.checkoutBranch=function(R){return this.gitConnectionFacade.checkoutBranch(R)},L.\u0275fac=function(P){return new(P||L)(M.\u0275\u0275inject(u.f$Z),M.\u0275\u0275inject(O.G),M.\u0275\u0275inject(V.yh))},L.\u0275prov=M.\u0275\u0275defineInjectable({token:L,factory:L.\u0275fac,providedIn:"root"}),L}()},15468:function(It,at,a){a.d(at,{A:function(){return K}});var s=a(70628),r=a(50423),K=function(){function c(N){this.gitDatasourcesFacade=N}return c.prototype.createDatasource=function(N){return this.gitDatasourcesFacade.createDatasource(N)},c.prototype.discoverDatasources=function(N){return this.gitDatasourcesFacade.loadDatasources(N)},c.prototype.getDatasources=function(N){return this.gitDatasourcesFacade.getDatasources(N)},c.prototype.getDatasourceCallState=function(N){return this.gitDatasourcesFacade.getDataSourcesCallState(N)},c.\u0275fac=function(u){return new(u||c)(r.\u0275\u0275inject(s.iAv))},c.\u0275prov=r.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac,providedIn:"root"}),c}()},40773:function(It,at,a){a.d(at,{Gg:function(){return s.G},id:function(){return L},eL:function(){return c.e},rC:function(){return u.r},AC:function(){return N.A},Ae:function(){return O.A},Mv:function(){return R}});var s=a(94757),r=a(70628),c=a(84515),N=a(81339),u=a(42178),O=a(15468),A=a(60225),M=a(18176),V=a(31572),f=a(50423),L=function(){function P(o){this.gitDatasourceClient=o,this.datasourceServiceConfigRecord=(0,V.Tr)()}return P.prototype.configureCredentials=function(o,z,ct){var J,it=null===(J=this.datasourceServiceConfigRecord[o])||void 0===J?void 0:J.createConfigureCredentialsRequestFromDatasource;return it?this.gitDatasourceClient.postConfigureCredentials(z,it(ct)):(0,A._)("Git_UnsupportedGitProvider")},P.prototype.deleteConfiguredCredentials=function(o){return this.gitDatasourceClient.deleteConfiguredCredentials(o)},Object.defineProperty(P.prototype,"getDatasourceServiceConfig",{get:function(){return this.datasourceServiceConfigRecord},enumerable:!1,configurable:!0}),P.\u0275fac=function(z){return new(z||P)(f.\u0275\u0275inject(M.Kl))},P.\u0275prov=f.\u0275\u0275defineInjectable({token:P,factory:P.\u0275fac,providedIn:"root"}),P}(),R=function(){function P(o){this.gitSwitchBranchFacade=o}return P.prototype.switchBranch=function(o){return this.gitSwitchBranchFacade.switchBranch(o)},P.prototype.getSwitchBranchState=function(o){return this.gitSwitchBranchFacade.getSwitchBranchState(o)},P.\u0275fac=function(z){return new(z||P)(f.\u0275\u0275inject(r.CCT))},P.\u0275prov=f.\u0275\u0275defineInjectable({token:P,factory:P.\u0275fac,providedIn:"root"}),P}()},65232:function(It,at,a){a.d(at,{jR:function(){return U},Nn:function(){return O}});var s=a(77476),r=a(32293),K=a(78035),c=a(32980),N=a(17177),u=a(50423),O=function(){function G(){}return G.\u0275fac=function(h){return new(h||G)},G.\u0275mod=u.\u0275\u0275defineNgModule({type:G}),G.\u0275inj=u.\u0275\u0275defineInjector({imports:[s.CommonModule,r.Is,K.Y,c.sp,N.T6]}),G}(),A=a(81337),M=a(18016),V=a(67758),f=a(41838),L=a(12315),R=a(95825),P=a(74913);function o(G,m){if(1&G&&(u.\u0275\u0275elementStart(0,"div",1),u.\u0275\u0275element(1,"tri-svg-icon",2),u.\u0275\u0275elementStart(2,"span",3),u.\u0275\u0275text(3),u.\u0275\u0275elementEnd()()),2&G){var h=m.$implicit;u.\u0275\u0275advance(1),u.\u0275\u0275property("sprite",h.sprite)("name",h.iconName),u.\u0275\u0275advance(1),u.\u0275\u0275attribute("aria-label",h.name),u.\u0275\u0275advance(1),u.\u0275\u0275textInterpolate(h.name)}}var z=function(){function G(){this.artifactList=[]}return G.\u0275fac=function(h){return new(h||G)},G.\u0275cmp=u.\u0275\u0275defineComponent({type:G,selectors:[["tri-git-items-list"]],inputs:{artifactList:"artifactList"},decls:1,vars:1,consts:[["class","artifacts-list",4,"ngFor","ngForOf"],[1,"artifacts-list"],["tri-svg-icon-22","",1,"artifact-icon",3,"sprite","name"],["tabIndex","0",1,"artifact-name","trimmedTextWithEllipsis"]],template:function(h,l){1&h&&u.\u0275\u0275template(0,o,4,4,"div",0),2&h&&u.\u0275\u0275property("ngForOf",l.artifactList)},dependencies:[s.NgForOf,P.M],styles:[".artifacts-list[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:center;min-height:40px;flex-grow:1;gap:8px}.artifacts-list[_ngcontent-%COMP%]   .artifact-icon[_ngcontent-%COMP%]{fill:var(--globalColorGrey26)}.artifacts-list[_ngcontent-%COMP%]   .artifact-name[_ngcontent-%COMP%]{font-size:var(--fontSizeBase300);font-weight:var(--fontWeightRegular);line-height:var(--lineHeightBase300);color:var(--colorNeutralForeground1)}"]}),G}(),ct=a(55334);function J(G,m){if(1&G&&u.\u0275\u0275element(0,"tri-git-items-list",5),2&G){var h=u.\u0275\u0275nextContext();u.\u0275\u0275property("artifactList",h.failedArtifacts)}}function it(G,m){if(1&G&&(u.\u0275\u0275elementStart(0,"div",8)(1,"span"),u.\u0275\u0275element(2,"tri-svg-icon",9),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(3,"span",10),u.\u0275\u0275text(4),u.\u0275\u0275elementEnd()()),2&G){var h=m.$implicit;u.\u0275\u0275advance(2),u.\u0275\u0275property("sprite","git-icons")("name","bullet_dot_8"),u.\u0275\u0275advance(1),u.\u0275\u0275attribute("aria-label",h),u.\u0275\u0275advance(1),u.\u0275\u0275textInterpolate(h)}}function Q(G,m){if(1&G&&(u.\u0275\u0275elementStart(0,"div",6),u.\u0275\u0275template(1,it,5,4,"div",7),u.\u0275\u0275elementEnd()),2&G){var h=u.\u0275\u0275nextContext();u.\u0275\u0275advance(1),u.\u0275\u0275property("ngForOf",h.data.moreInfo)}}function gt(G,m){if(1&G){var h=u.\u0275\u0275getCurrentView();u.\u0275\u0275elementStart(0,"div",11),u.\u0275\u0275listener("click",function(){u.\u0275\u0275restoreView(h);var k=u.\u0275\u0275nextContext();return u.\u0275\u0275resetView(k.collapseExpand())}),u.\u0275\u0275pipe(1,"localizeFormat"),u.\u0275\u0275elementStart(2,"span"),u.\u0275\u0275text(3),u.\u0275\u0275pipe(4,"localize"),u.\u0275\u0275pipe(5,"localize"),u.\u0275\u0275elementEnd(),u.\u0275\u0275element(6,"tri-svg-icon",12),u.\u0275\u0275elementEnd()}if(2&G){var l=u.\u0275\u0275nextContext();u.\u0275\u0275attribute("aria-expanded",!l.showDetailsToggle)("aria-label",u.\u0275\u0275pipeBind2(1,4,l.showDetailsToggle?"ClickToExpandFormat":"ClickToCollapseFormat","errorDetails")),u.\u0275\u0275advance(3),u.\u0275\u0275textInterpolate(l.showDetailsToggle?u.\u0275\u0275pipeBind1(4,7,"Generic_HideDetails"):u.\u0275\u0275pipeBind1(5,9,"Generic_ShowDetails")),u.\u0275\u0275advance(3),u.\u0275\u0275property("name",l.showDetailsToggle?"chevron_up_16_regular":"chevron_down_16_regular")}}function _t(G,m){if(1&G&&(u.\u0275\u0275elementStart(0,"p")(1,"b"),u.\u0275\u0275text(2),u.\u0275\u0275pipe(3,"localize"),u.\u0275\u0275elementEnd(),u.\u0275\u0275text(4),u.\u0275\u0275elementEnd()),2&G){var h=m.$implicit;u.\u0275\u0275advance(2),u.\u0275\u0275textInterpolate1("",h.shouldLocalize?u.\u0275\u0275pipeBind1(3,2,h.name):h.name," "),u.\u0275\u0275advance(2),u.\u0275\u0275textInterpolate1("",h.content," ")}}function mt(G,m){if(1&G&&(u.\u0275\u0275elementContainerStart(0),u.\u0275\u0275elementStart(1,"div",13),u.\u0275\u0275template(2,_t,5,4,"p",14),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementContainerEnd()),2&G){var h=u.\u0275\u0275nextContext();u.\u0275\u0275advance(2),u.\u0275\u0275property("ngForOf",h.details)}}var st=function(){function G(m,h,l){var D,k,X,q;this.dialogRef=m,this.extensionManifestService=h,this.data=l,this.showDetailsToggle=!1,this.errorDetails=this.data.errorDetails,this.requestInfo=this.data.requestInfo,this.details=[],this.artifactType=null===(k=null===(D=this.errorDetails)||void 0===D?void 0:D.failedArtifactMetadata)||void 0===k?void 0:k.artifactType,this.artifactName=null===(q=null===(X=this.errorDetails)||void 0===X?void 0:X.failedArtifactMetadata)||void 0===q?void 0:q.artifactDisplayName,this.failedArtifacts=[],this.failedArtifactsSize=0,this.createGitErrorDetailsFromGitError()}return G.prototype.convertDialogData=function(m){return{title:m.title,buttons:m.buttons}},G.prototype.close=function(){return this.dialogRef.close()},G.prototype.collapseExpand=function(){this.showDetailsToggle=!this.showDetailsToggle},G.prototype.getErrorMoreInfoSize=function(){var m,h;return null!==(h=null===(m=this.data.moreInfo)||void 0===m?void 0:m.length)&&void 0!==h?h:0},G.prototype.createGitErrorDetailsFromGitError=function(){var m,h,l,D,k,X;if(null!=this&&this.errorDetails){if(this.requestInfo.clusterUri&&this.details.push(this.createGitErrorDetail("ServerError_ClusterUriText",this.requestInfo.clusterUri)),this.requestInfo.activityId&&this.details.push(this.createGitErrorDetail("ServerError_ActivityIdText",this.requestInfo.activityId)),this.requestInfo.requestId&&this.details.push(this.createGitErrorDetail("AdditionalErrorInfo_RequestIdText",this.requestInfo.requestId)),!(null===(m=this.errorDetails)||void 0===m)&&m.workloadErrorCode&&this.details.push(this.createGitErrorDetail("Workload_Error_Code",this.errorDetails.workloadErrorCode)),this.getFailedArtifactsDetails(),null!==(h=this.errorDetails)&&void 0!==h&&h.workloadErrorMessage){var q=this.errorDetails.workloadErrorMessage,rt=(q.match(/{(\d+)}/g)||[]).length;if(null!==(l=this.errorDetails)&&void 0!==l&&l.workloadErrorParameters){var tt=this.errorDetails.workloadErrorParameters,St=tt.length;if(rt===St){for(var Ot=q,g=0;g<St;g++)Ot=Ot.replace("{".concat(g,"}"),tt[g]);this.details.push(this.createGitErrorDetail("Workload_Error_Message",Ot))}}else 0===rt&&this.details.push(this.createGitErrorDetail("Workload_Error_Message",q))}if(null!==(D=this.errorDetails)&&void 0!==D&&D.errorParameters)for(var j in this.errorDetails.errorParameters)this.details.push(this.createGitErrorDetail(j,this.errorDetails.errorParameters[j],!1));this.details.push(this.createGitErrorDetail("ServerError_TimestampText",null!==(X=null===(k=null==this?void 0:this.errorDetails)||void 0===k?void 0:k.time)&&void 0!==X?X:(new Date).toString()))}},G.prototype.createGitErrorDetail=function(m,h,l){return void 0===l&&(l=!0),{name:m,content:h,shouldLocalize:l}},G.prototype.getFailedArtifactsDetails=function(){var m,h,l;if(this.artifactType&&this.artifactName){var D=this.extensionManifestService.getFrontendArtifactType(this.artifactType),k=(0,f.zp)(D);this.failedArtifacts.push({name:this.artifactName,iconName:k?.name,sprite:k?.sprite})}else if(null!==(m=this.errorDetails)&&void 0!==m&&m.errorParameters)for(var X=null===(l=null===(h=this.errorDetails)||void 0===h?void 0:h.errorParameters.Artifacts)||void 0===l?void 0:l.slice(1,-1),q=/Display Name: '([^']+)' Type: '([^']+)'/g,rt=void 0;null!==(rt=q.exec(X));)D=this.extensionManifestService.getFrontendArtifactType(rt[2]),L.RG.includes(D)&&(k=(0,f.zp)(D),this.failedArtifacts.push({name:rt[1],iconName:k?.name,sprite:k?.sprite}));this.failedArtifactsSize=this.failedArtifacts.length},G.\u0275fac=function(h){return new(h||G)(u.\u0275\u0275directiveInject(r.so),u.\u0275\u0275directiveInject(V.vC),u.\u0275\u0275directiveInject(r.WI))},G.\u0275cmp=u.\u0275\u0275defineComponent({type:G,selectors:[["tri-git-error-dialog"]],decls:7,vars:9,consts:[[3,"dialogData","closeButtonLabel","buttonClickEvent"],["class","git-artifact-list",3,"artifactList",4,"ngIf"],["class","git-info-list",4,"ngIf"],["class","details-selector",3,"click",4,"ngIf"],[4,"ngIf"],[1,"git-artifact-list",3,"artifactList"],[1,"git-info-list"],["class","info-list-item",4,"ngFor","ngForOf"],[1,"info-list-item"],["calss","info-icon","tri-svg-icon-8","",3,"sprite","name"],[1,"list-item"],[1,"details-selector",3,"click"],["tri-svg-icon-16","",3,"name"],[1,"error-details-container"],[4,"ngFor","ngForOf"]],template:function(h,l){1&h&&(u.\u0275\u0275elementStart(0,"trident-dialog",0),u.\u0275\u0275listener("buttonClickEvent",function(){return l.close()}),u.\u0275\u0275pipe(1,"localize"),u.\u0275\u0275text(2),u.\u0275\u0275template(3,J,1,1,"tri-git-items-list",1),u.\u0275\u0275template(4,Q,2,1,"div",2),u.\u0275\u0275template(5,gt,7,11,"div",3),u.\u0275\u0275template(6,mt,3,1,"ng-container",4),u.\u0275\u0275elementEnd()),2&h&&(u.\u0275\u0275property("dialogData",l.convertDialogData(l.data))("closeButtonLabel",u.\u0275\u0275pipeBind1(1,7,"Close")),u.\u0275\u0275advance(2),u.\u0275\u0275textInterpolate1(" ",l.data.content," "),u.\u0275\u0275advance(1),u.\u0275\u0275property("ngIf",l.failedArtifactsSize>0),u.\u0275\u0275advance(1),u.\u0275\u0275property("ngIf",l.getErrorMoreInfoSize()>0),u.\u0275\u0275advance(1),u.\u0275\u0275property("ngIf",l.details.length>0),u.\u0275\u0275advance(1),u.\u0275\u0275property("ngIf",l.showDetailsToggle))},dependencies:[s.NgForOf,s.NgIf,R.v,P.M,z,ct.Y,ct.A],styles:[".mat-mdc-dialog-content{display:flex;flex-direction:column;margin-top:4px;margin-bottom:16px;gap:12px}.details-selector[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:6px;font-weight:600}.error-details-container[_ngcontent-%COMP%]{font-size:12px;display:flex;flex-direction:column;align-items:flex-start;padding:12px;max-height:228px;overflow-y:scroll;background:var(--globalColorGrey96);border-radius:4px}.error-details-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.git-artifact-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;overflow-y:auto;min-height:40px;max-height:200px}.git-info-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.info-list-item[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;gap:8px}"],changeDetection:0}),G}(),ft=a(7452),Z=a(54323),U=function(){function G(m,h,l){this.dialogService=m,this.localizationService=h,this.telemetryService=l,this.dialogWidth="564px",this.defaultDialogClass="dialog-style"}return G.prototype.getErrorContent=function(m){var h,l,D=null===(h=M.A6[m])||void 0===h?void 0:h.messageKey,k=null===(l=M.A6[m])||void 0===l?void 0:l.titleKey;return(!D||!k)&&(m.startsWith("Git_")||m.startsWith("Alm"))&&this.telemetryService.logEvent({name:"Git error which is not mapped to content occurred",properties:{errorType:m}}),{message:this.localizationService.get(D??"ErrorDialogHelperText_TechnicalDetails"),title:this.localizationService.get(k??"ErrorMessage_DefaultTitle")}},G.prototype.getErrorMoreInfo=function(m){var h,l;return null!==(l=null===(h=M.jZ[m])||void 0===h?void 0:h.moreInfoKeys)&&void 0!==l?l:[]},G.prototype.handleSyncGitError=function(m,h){var l=this.makeGitErrorFromHttpResponse(m,h);return this.showErrorHandlingDialog(l),l},G.prototype.handleAlmGitError=function(m,h){return this.isGitAlmError(m,h)?this.makeGitErrorFromAlmResponse(m,h):this.makeClientSideGitError(m)},G.prototype.handleClientSideGitError=function(m,h){this.logValidationError(m);var l=this.makeClientSideGitError(m,h);return this.showErrorHandlingDialog(l),l},G.prototype.logValidationError=function(m){this.telemetryService.logEvent({name:"Validation error occurred",properties:{errorType:m}})},G.prototype.showErrorHandlingDialog=function(m){var h=this.createGitErrorDialogModel(m);return this.dialogService.open(h.componentRef,h.config)},G.prototype.createGitErrorDialogModel=function(m){var l,D,k,h=this,X=this.localizationService.get("Close"),q=(0,M.lz)(m),rt=this.getErrorMoreInfo(q?.errorType).map(function(St){return h.localizationService.get(St)}),tt={title:q.title,buttons:[{name:X,label:X,buttonType:null}],content:q.message,moreInfo:rt,errorDetails:q,requestInfo:{clusterUri:null===(l=m.errorInfo)||void 0===l?void 0:l.clusterUri,activityId:null===(D=m.errorInfo)||void 0===D?void 0:D.activityId,requestId:null===(k=m.errorInfo)||void 0===k?void 0:k.requestId}};return{componentRef:st,config:{width:this.dialogWidth,panelClass:this.defaultDialogClass,data:tt}}},G.prototype.makeClientSideGitError=function(m,h){var l=this.getErrorContent(m);return(0,M.iX)([{errorType:m,title:l.title,message:l.message,errorParameters:h}])},G.prototype.makeGitErrorFromHttpResponse=function(m,h){var k,l=this.parseHttpWorkloadError(h),D=this.parseHttpError(h);k=(0,M.KJ)(h)?"Git_AdoConditionalAccessNotSupported":"Git_Switch_Branch_Item_Not_Found"===m?"Git_Switch_Branch_Item_Not_Found":"Git_Branch_Out_Failed"===m?this.getBranchOutError(h):D?.code?D.code:m;var X=this.getErrorContent(k),q=(0,A.__assign)((0,A.__assign)((0,A.__assign)({},l),D),{errorType:k,time:(new Date).toString(),title:X.title,message:X.message}),rt={requestId:h?.requestId,clusterUri:window.clusterUri,activityId:h?.activityId,statusCode:h?.status};return(0,M.iX)([q],rt)},G.prototype.makeGitErrorFromAlmResponse=function(m,h){var D,k,X,q,rt,l=this,tt=[];if(h.gitInteractiveOperationErrorDetailsList)null===(D=h.gitInteractiveOperationErrorDetailsList)||void 0===D||D.forEach(function(Et){var Mt,Ut,bt,Bt,xt,Tt,Kt;rt=l.parseAlmWorkloadError(Et);var Rt=l.getErrorContent(rt.workloadErrorCode),et={dialogMessage:Rt.message,interactionType:null!==(bt=null===(Ut=null===(Mt=Et?.artifactErrorDetails)||void 0===Mt?void 0:Mt.UserInteractionRequest)||void 0===Ut?void 0:Ut.InteractionType)&&void 0!==bt?bt:M.s_.None,options:null!==(Tt=null===(xt=null===(Bt=Et?.artifactErrorDetails)||void 0===Bt?void 0:Bt.UserInteractionRequest)||void 0===xt?void 0:xt.Options)&&void 0!==Tt?Tt:[]},W=(0,A.__assign)((0,A.__assign)({},rt),{errorType:m,time:null===(Kt=h.lastUpdatedTime)||void 0===Kt?void 0:Kt.toString(),title:Rt.title,message:Rt.message,interactiveOperationInfo:et});tt.push(W)});else if(h.gitNonInteractiveOperationErrorDetails){rt=this.parseAlmWorkloadError(h.gitNonInteractiveOperationErrorDetails);var St=null!==(k=rt?.workloadErrorCode)&&void 0!==k?k:m,Ot=this.getErrorContent(St),g=(0,A.__assign)((0,A.__assign)({},rt),{errorType:St,time:null===(X=h.lastUpdatedTime)||void 0===X?void 0:X.toString(),title:Ot.title,message:Ot.message});if((0,M.VQ)(m,h)){var j=this.getErrorContent("Git_GitProviderCommitRejectedByPolicy");g.errorType="Git_GitProviderCommitRejectedByPolicy",g.title=j.title,g.message=j.message}else(0,M.Ss)(m,h)&&(j=this.getErrorContent("Git_GitProviderCommitMaxSizeExceeded"),g.errorType="Git_GitProviderCommitMaxSizeExceeded",g.title=j.title,g.message=j.message);tt.push(g)}var ot={requestId:null===(q=h.gitNonInteractiveOperationErrorDetails)||void 0===q?void 0:q.requestId,clusterUri:window.clusterUri,retryOperationId:h.gitOperationId};return(0,M.iX)(tt,ot)},G.prototype.isDedicatedErrorMessageAvailable=function(m){return m in M.A6},G.prototype.parseHttpError=function(m){var h,l,D;return{code:null===(h=m?.error)||void 0===h?void 0:h.code,errorParameters:null===(D=null===(l=m?.error)||void 0===l?void 0:l["pbi.error"])||void 0===D?void 0:D.parameters}},G.prototype.parseHttpWorkloadError=function(m){var h,l,D,k,X,q,rt,tt,St=null===(D=null===(l=null===(h=m?.error)||void 0===h?void 0:h["pbi.error"])||void 0===l?void 0:l.parameters)||void 0===D?void 0:D.GitErrorDetails;return St&&(tt=JSON.parse(St)),tt?{failedArtifactMetadata:tt?.artifactType&&tt?.artifactDisplayName?{artifactType:tt.artifactType,artifactDisplayName:tt.artifactDisplayName,artifactLogicalId:tt.artifactLogicalId}:void 0,workloadErrorCode:null!==(X=null===(k=tt?.errorDetails)||void 0===k?void 0:k.ErrorCode)&&void 0!==X?X:tt?.errorCode,workloadErrorMessage:null===(q=tt?.errorDetails)||void 0===q?void 0:q.ErrorMessage,workloadErrorParameters:null===(rt=tt?.errorDetails)||void 0===rt?void 0:rt.ErrorParameters}:{failedArtifactMetadata:void 0,workloadErrorCode:void 0,workloadErrorMessage:void 0,workloadErrorParameters:void 0}},G.prototype.parseAlmWorkloadError=function(m){var h,l,D,k,X;return{failedArtifactMetadata:{artifactDisplayName:m.artifactDisplayName,artifactType:m.artifactType,artifactLogicalId:m.artifactLogicalId},workloadErrorCode:null!==(l=null===(h=m.artifactErrorDetails)||void 0===h?void 0:h.ErrorCode)&&void 0!==l?l:m.errorCode,workloadErrorMessage:null===(D=m.artifactErrorDetails)||void 0===D?void 0:D.ErrorMessage,workloadErrorCategory:null===(k=m.artifactErrorDetails)||void 0===k?void 0:k.ErrorCategory,workloadErrorParameters:null===(X=m?.artifactErrorDetails)||void 0===X?void 0:X.ErrorParameters}},G.prototype.isGitAlmError=function(m,h){return h.gitOperationStatus===M.wM.Failed&&(!!h.gitNonInteractiveOperationErrorDetails||!!h.gitInteractiveOperationErrorDetailsList)&&(0,M.ve)(m)},G.prototype.getBranchOutError=function(m){var h,l,D,k,X,q=null===(h=m.error)||void 0===h?void 0:h.code;if("Alm_InvalidBranchOutRequest_OperationFailureAfterFolderCreation"===q){var rt=null===(X=null===(k=null===(D=null===(l=m.error)||void 0===l?void 0:l["pbi.error"])||void 0===D?void 0:D.details)||void 0===k?void 0:k[0])||void 0===X?void 0:X.code;if(rt)return rt}else if(q)return q;return"Git_Branch_Out_Failed"},G.\u0275fac=function(h){return new(h||G)(u.\u0275\u0275inject(c.uQ),u.\u0275\u0275inject(ft.z),u.\u0275\u0275inject(Z.t))},G.\u0275prov=u.\u0275\u0275defineInjectable({token:G,factory:G.\u0275fac,providedIn:"root"}),G}();(0,A.__assign)({errorType:"Git_MergePolicyNotSpecified"},{title:"MockTitle",message:"MockMessage"})},12385:function(It,at,a){a.d(at,{mn:function(){return R},K3:function(){return c}});var s=a(77476),r=a(65232),K=a(50423),c=function(){function P(){}return P.\u0275fac=function(z){return new(z||P)},P.\u0275mod=K.\u0275\u0275defineNgModule({type:P}),P.\u0275inj=K.\u0275\u0275defineInjector({imports:[s.CommonModule,r.Nn]}),P}(),N=a(81337),u=a(42888),O=a(73471),A={style:"Trident"},M=(0,N.__assign)((0,N.__assign)({},A),{notificationType:O.k$.Loading}),V=(0,N.__assign)((0,N.__assign)({},A),{notificationType:O.k$.Success}),f=(0,N.__assign)((0,N.__assign)({},A),{notificationType:O.k$.Error}),L=a(7452),R=function(){function P(o,z){this.localizationService=o,this.notificationService=z}return P.prototype.hideNotification=function(o){return this.notificationService.hide(o)},P.prototype.hideCurrentNotification=function(){this.notificationService.hideCurrentNotification()},P.prototype.showLoadingNotification=function(o,z){var ct=(0,N.__assign)((0,N.__assign)({},M),{title:this.localizationService.get(o),message:z?this.localizationService.get(z):void 0});return this.notificationService.notify(ct)},P.prototype.showSuccessNotification=function(o,z){var ct=(0,N.__assign)((0,N.__assign)({},V),{id:z,title:this.localizationService.get(o)});return this.notificationService.notify(ct)},P.prototype.showErrorNotification=function(o,z,ct){var J={action:"open.git.error.dialog",data:o},it={displayText:this.localizationService.get("View_Details"),action:J};return this.notificationService.notify((0,N.__assign)((0,N.__assign)({},f),{id:ct,duration:u.S.Long,title:this.localizationService.get(z),message:this.localizationService.get("View_Details_Learn_More"),actionButtons:[it]}))},P.\u0275fac=function(z){return new(z||P)(K.\u0275\u0275inject(L.z),K.\u0275\u0275inject(u.g))},P.\u0275prov=K.\u0275\u0275defineInjectable({token:P,factory:P.\u0275fac,providedIn:"root"}),P}()},18016:function(It,at,a){a.d(at,{wM:function(){return Z},u9:function(){return ft},IS:function(){return _t},s_:function(){return Q},Z_:function(){return ht},I:function(){return D},f7:function(){return l},LO:function(){return k},Rv:function(){return U},cW:function(){return X},tI:function(){return Ot},lz:function(){return O},n:function(){return tt},A6:function(){return c},jZ:function(){return N},xT:function(){return A},L4:function(){return St},KJ:function(){return M},VQ:function(){return R},Ss:function(){return o},ve:function(){return J},pb:function(){return u},Fc:function(){return V},yG:function(){return it},E6:function(){return L},iX:function(){return z},QJ:function(){return st}});var s,r,K=function(g){return g.AdalMultiFactorAuthEnrollRequiredErrorCode="AdalMultiFactorAuthEnrollRequiredErrorCode",g.AdalMultiFactorAuthRequiredErrorCode="AdalMultiFactorAuthRequiredErrorCode",g.AdalDeviceObjectNotFoundInTenantErrorCode="AdalDeviceObjectNotFoundInTenantErrorCode",g}({}),c=((s={}).Git_MissingRequiredParam={messageKey:"Trident_Git_Error_Git_Provider_API_Message",titleKey:"Trident_Git_Error_Git_Provider_API_Title"},s.Git_DirectoryHasInvalidSystemFiles={messageKey:"Trident_Git_Error_Git_DirectoryHasInvalidSystemFiles_Message",titleKey:"Trident_Git_Error_Git_DirectoryHasInvalidSystemFiles_Title"},s.Git_SelectedArtifactsDoNotBelongToWorkspace={messageKey:"Trident_Git_Error_Git_Undo_Failed_Message",titleKey:"Trident_Git_Error_Unable_To_Undo_Title"},s.Git_AzureDevOpsMissingProjectName={messageKey:"Trident_Git_Error_Git_Connect_Failed_Message",titleKey:"Trident_Git_Error_Git_Connect_Failed_Title"},s.Git_UndoDuplicateArtifacts={messageKey:"Trident_Git_Error_Git_Undo_Failed_Message",titleKey:"Trident_Git_Error_Unable_To_Undo_Title"},s.Git_CommitInvalidArtifacts={messageKey:"Trident_Git_Error_Git_InvalidCommitRequest_Message",titleKey:"Trident_Git_Error_Unable_To_Commit_Title"},s.Git_GitProviderApiFailed={messageKey:"Trident_Git_Error_Git_Provider_API_Message",titleKey:"Trident_Git_Error_Git_Provider_API_Title"},s.Git_GitProviderDeserialization={messageKey:"Trident_Git_Error_Git_Provider_API_Message",titleKey:"Trident_Git_Error_Git_Provider_API_Title"},s.Git_GitProviderResourceNotExistOrUnauthorized={messageKey:"Trident_Git_Error_Git_No_Permissions_ADO_Message",titleKey:"Trident_Git_Error_Git_No_Permissions_ADO_Title"},s.Git_WorkspaceAlreadyConnectedToGit={messageKey:"Trident_Git_Error_Git_Workspace_Already_Connected_To_Git_Message",titleKey:"Trident_Git_Error_Git_Workspace_Already_Connected_To_Git_Title"},s.Git_WorkspaceNotConnectedToGit={messageKey:"Trident_Git_Error_Git_Workspace_Not_Connected_To_Git_Message",titleKey:"Trident_Git_Error_Git_Workspace_Not_Connected_To_Git_Title"},s.Git_WorkspaceHasNoCapacity={messageKey:"Trident_Git_Error_Git_Workspace_Has_No_Capacity_Message",titleKey:"Pipelines_Error_FoldersHasNoCapacity_Title"},s.Git_InvalidPath={messageKey:"Trident_Git_Error_Git_Connection_Details_Message",titleKey:"Trident_Git_Error_Git_Connection_Details_Title"},s.Alm_InvalidRequest_PurgeRequired={messageKey:"Trident_Git_Error_Dataset_PurgeData_Message",titleKey:"Trident_Git_Error_AlmOperation_Update_Title"},s.Git_PotentialCrossGeo={messageKey:"Trident_Git_Error_Git_PotentialCrossGeo_Message",titleKey:"Trident_Git_Error_Git_PotentialCrossGeo_Title"},s.Git_DuplicateDisplayNameAndType={messageKey:"Trident_Git_Error_Git_DuplicateDisplayNameAndType_Message",titleKey:"Trident_Git_Error_Unable_To_Complete_Action_Title"},s.Git_CommitDuplicateArtifacts={messageKey:"Trident_Git_Error_Git_CommitDuplicateArtifacts_Message",titleKey:"Trident_Git_Error_Git_CommitDuplicateArtifacts_Title"},s.Git_HeadNotSynced={messageKey:"Trident_Git_Error_Git_HeadNotSynced_Message",titleKey:"Trident_Git_Error_Git_HeadNotSynced_Title"},s.Git_IdentifierExceededMaxLength={messageKey:"Trident_Git_Error_Git_IdentifierExceededMaxLength_Message",titleKey:"Trident_Git_Error_Unable_To_Complete_Action_Title"},s.Git_InvalidCommitRequest={messageKey:"Trident_Git_Error_Git_InvalidCommitRequest_Message",titleKey:"Trident_Git_Error_Unable_To_Commit_Title"},s.Git_InvalidUndoRequest={messageKey:"Trident_Git_Error_Git_Undo_Failed_Message",titleKey:"Trident_Git_Error_Unable_To_Undo_Title"},s.Git_InvalidBranchName={messageKey:"Trident_Git_Error_Git_InvalidBranchName_Message",titleKey:"Trident_Git_Error_Git_InvalidBranchName_Title"},s.Git_InvalidDirectoryName={messageKey:"Trident_Git_Error_Git_InvalidDirectoryName_Message",titleKey:"Trident_Git_Error_Git_InvalidDirectoryName_Title"},s.Git_InvalidRequestNoFilesToCommit={messageKey:"Trident_Git_Error_Git_InvalidRequestNoFilesToCommit_Message",titleKey:"Trident_Git_Error_Git_InvalidRequestNoFilesToCommit_Title"},s.Git_PotentialMergeConflict={messageKey:"Trident_Git_Error_Git_PotentialMergeConflict_Message",titleKey:"Trident_Git_Error_Git_PotentialMergeConflict_Title"},s.Git_GitConnectionAlreadyInitialized={messageKey:"Trident_Git_Error_Git_GitConnectionAlreadyInitialized_Message",titleKey:"Trident_Git_Error_Git_GitConnectionAlreadyInitialized_Title"},s.Git_UnexpectedResponseFromGitProvider={messageKey:"Trident_Git_Error_Git_Provider_API_Message",titleKey:"Trident_Git_Error_Git_Provider_API_Title"},s.Git_DependenciesDeletionFailed={messageKey:"Trident_Git_Error_Git_DependenciesDeletionFailed_Message",titleKey:"Trident_Git_Error_Unable_To_Complete_Action_Title"},s.Git_MissingDependencies={messageKey:"Trident_Git_Error_Git_MissingDependencies_Message",titleKey:"Trident_Git_Error_Unable_To_Update_Title"},s.Git_MissingDependenciesSwitchBranch={messageKey:"Trident_Git_Error_Git_Switch_Branch_MissingDependencies_Message",titleKey:"Trident_Git_Error_Git_Switch_Branch_Failed_Title"},s.Git_CyclicDependencyDetectedSwitchBranch={messageKey:"Trident_Git_Error_Git_Switch_Branch_MissingDependencies_Message",titleKey:"Trident_Git_Error_Git_Switch_Branch_Failed_Title"},s.Git_CyclicDependencyDetected={messageKey:"Trident_Git_Error_Git_MissingDependencies_Message",titleKey:"Trident_Git_Error_Unable_To_Update_Title"},s.Git_ItemNotFound={titleKey:"Trident_Git_Error_Git_ItemNotFound_Title",messageKey:"Trident_Git_Error_Git_ItemNotFound_Message"},s.Git_PathTooLong={titleKey:"Trident_Git_Error_Git_PathTooLong_Title",messageKey:"Trident_Git_Error_Git_PathTooLong_Message"},s.Git_GitOperationWithSensitivityLabelsNotSupported={messageKey:"Trident_Git_Error_Git_GitOperationWithSensitivityLabelsNotSupported_Message",titleKey:"Trident_Git_Error_Git_GitOperationWithSensitivityLabelsNotSupported_Title"},s.Git_BranchDeleted={messageKey:"Trident_Git_Error_Git_BranchDeleted_Message",titleKey:"Trident_Git_Error_Unable_To_Complete_Action_Title"},s.Git_GitProviderCommitRejectedByPolicy={messageKey:"Trident_Git_Error_GitProviderCommitRejectedByPolicy_Message",titleKey:"Trident_Git_Error_GitProviderCommitRejectedByPolicy_Title"},s.Git_DirectoryNameDiffersByCase={messageKey:"Trident_Git_Error_Git_ItemNotFound_Message",titleKey:"Trident_Git_Error_Git_ItemNotFound_Title"},s.Git_GitIntegrationTenantAdminSwitchDisabled={messageKey:"Trident_Git_TenantAdminSwitchDisabled_Message",titleKey:"Trident_Git_TenantAdminSwitchDisabled_Title"},s.Git_GitProviderCommitMaxSizeExceeded={messageKey:"Trident_Git_Error_GitProviderCommitMaxSizeExceeded_Message",titleKey:"Trident_Git_Error_GitProviderCommitMaxSizeExceeded_Title"},s.Git_ExportDefinitionFailed={messageKey:"Trident_Git_Error_ExportDefinitionFailed_Message",titleKey:"Trident_Git_Error_ExportDefinitionFailed_Title"},s.Git_DiscoverDependenciesFailed={messageKey:"Trident_Git_Error_DiscoverDependenciesFailed_Message",titleKey:"Trident_Git_Error_DiscoverDependenciesFailed_Title"},s.Git_GitProviderUnauthorizedGuestUser={messageKey:"Trident_Git_Error_GitProviderUnauthorizedGuestUser_Message",titleKey:"Trident_Git_Error_GitProviderUnauthorizedGuestUser_Title"},s.Git_GitProviderCommitObjectRejected={messageKey:"Trident_Git_Error_GitProviderCommitObjectRejected_Message",titleKey:"Trident_Git_Error_GitProviderCommitRejectedByPolicy_Title"},s.Git_BranchNameAlreadyExists={messageKey:"Trident_Git_Error_Git_Branch_Name_Already_Exists_Message",titleKey:"Trident_Git_Error_Git_InvalidBranchName_Title"},s.Git_GitProviderAadUserStateError={messageKey:"Trident_Git_Error_GitProviderAadUserStateError_Message",titleKey:"Trident_Git_Error_Unable_To_Complete_Action_Title"},s.Git_Disconnect_No_Connection={messageKey:"Trident_Git_Error_Git_Disconnect_No_Connection_Message",titleKey:"Trident_Git_Error_Git_Disconnect_Failed_Title"},s.Git_Invalid_Connection_Details={messageKey:"Trident_Git_Error_Git_Invalid_Connection_Details_Message",titleKey:"Trident_Git_Error_Git_Invalid_Connection_Details_Title"},s.Git_ConnectionDetailsNotFound={messageKey:"Trident_Git_Error_Git_Connection_Details_Not_Found_Message",titleKey:"ErrorMessage_DefaultTitle"},s.Git_Workspace_Not_Initialized={messageKey:"Trident_Git_Error_Git_Workspace_Not_Initialized_Message",titleKey:"Trident_Git_Error_Git_Workspace_Not_Initialized_Title"},s.Git_Create_Branch_Origin_Branch_Not_Found={messageKey:"Trident_Git_Error_Git_Create_Branch_Origin_Branch_Not_Found_Message",titleKey:"Trident_Git_Error_Git_Create_Branch_Origin_Branch_Not_Found_Title"},s.Git_GitSwitchBranchWithUncommittedChanges={messageKey:"Trident_Git_Error_Git_Switch_Branch_Uncommited_Changes_Message",titleKey:"Trident_Git_Error_Git_Switch_Branch_Failed_Title"},s.GitGitInvalidSwitchBranchRequest={messageKey:"Trident_Git_Error_Git_Switch_Branch_Invalid_Request_Message",titleKey:"Trident_Git_Error_Git_Switch_Branch_Failed_Title"},s.GitSwitchBranchIdenticalBranchName={messageKey:"Trident_Git_Error_Git_Switch_Branch_Identical_Branch_Name_Message",titleKey:"Trident_Git_Error_Git_Switch_Branch_Failed_Title"},s.Git_Switch_Branch_Item_Not_Found={messageKey:"Trident_Git_Error_Git_Switch_Branch_Item_Not_Found_Message",titleKey:"Trident_Git_Error_Git_Switch_Branch_Failed_Title"},s.Git_Switch_Branch_Head_Not_Synced={messageKey:"Trident_Git_Error_Git_Switch_Branch_Head_Not_Synced_Message",titleKey:"Trident_Git_Error_Git_Switch_Branch_Failed_Title"},s.Git_GitProviderCredentialsNotAuthorizedError={messageKey:"Trident_Git_Error_Git_CredentialsNotAuthorized_Message",titleKey:"Trident_Git_Error_Git_CredentialsNotAuthorized_Title"},s.Git_DuplicateArtifactsWithSameLogicalId={messageKey:"Trident_Git_Duplicate_LogicalId_Message",titleKey:"Trident_Git_Duplicate_LogicalId_Title"},s.Git_PotentialDuplicateDisplayNameAndType={messageKey:"Trident_Git_Error_Git_Potential_Duplicate_Diaplay_Name_And_Type_Message",titleKey:"Trident_Git_Error_AlmOperation_Update_Title"},s.Git_DisplayNameIsInvalid={messageKey:"Trident_Git_Error_Git_Display_Name_Is_Invalid_Message",titleKey:"Trident_Git_Error_AlmOperation_Update_Title"},s.Git_GitIntegrationBlockedByDataLossPrevention={messageKey:"Trident_Git_Blocked_DataLoss_Prevention_Message",titleKey:"Trident_Git_Blocked_DataLoss_Prevention_Title"},s.Git_Connect_Invalid_Request={messageKey:"Trident_Git_Error_Git_Connect_Failed_Message",titleKey:"Trident_Git_Error_Git_Connect_Failed_Title"},s.Git_Disconnect_Invalid_Request={messageKey:"Trident_Git_Error_Git_Disconnect_Failed_Message",titleKey:"Trident_Git_Error_Git_Disconnect_Failed_Title"},s.Git_Initialization_Invalid_Request={messageKey:"Trident_Git_Error_Git_Invalid_Initialization_Request_Message",titleKey:"Trident_Git_Error_Unable_To_Initialize_Title"},s.Git_Undo_Invalid_Request={messageKey:"Trident_Git_Error_Undo_Message",titleKey:"Trident_Git_Error_Unable_To_Undo_Title"},s[" Git_Commit_Invalid_Request"]={messageKey:"Trident_Git_Error_Git_InvalidCommitRequest_Message",titleKey:"Trident_Git_Error_Unable_To_Commit_Title"},s.Git_Update_Invalid_Request={messageKey:"Trident_Git_Error_Git_Update_Invalid_Request_Message",titleKey:"Trident_Git_Error_Unable_To_Update_Title"},s.Git_Create_Branch_Invalid_Request={messageKey:"Trident_Git_Error_Git_Create_Branch_Invalid_Request_Message",titleKey:"Trident_Git_Error_Unable_To_Create_Branch_Title"},s.Git_Create_Directory_Invalid_Request={messageKey:"Trident_Git_Error_Git_Create_Folder_Invalid_Request_Message",titleKey:"Trident_Git_Error_Unable_To_Create_Folder_Title"},s.Git_Switch_Branch_Invalid_Request={messageKey:"Trident_Git_Error_Git_Switch_Branch_Invalid_Request_Message",titleKey:"Trident_Git_Error_Git_Switch_Branch_Failed_Title"},s.Git_Connect_Failed={messageKey:"Trident_Git_Error_Git_Connect_Failed_Message",titleKey:"Trident_Git_Error_Git_Connect_Failed_Title"},s.Git_Status_Failed={messageKey:"Trident_Git_Error_Git_Status_Failed_Message",titleKey:"Trident_Git_Error_Git_Status_Failed_Title"},s.Git_Create_Branch_Failed={messageKey:"Trident_Git_Error_Git_Create_Branch_Failed_Message",titleKey:"Trident_Git_Error_Git_Create_Branch_Failed_Title"},s.Git_Sync_Failed={messageKey:"Trident_Git_Error_Git_Sync_Failed_Message",titleKey:"Trident_Git_Error_Git_Sync_Failed_Title"},s.Git_Disconnect_Failed={messageKey:"Trident_Git_Error_Git_Disconnect_Failed_Message",titleKey:"Trident_Git_Error_Git_Disconnect_Failed_Title"},s.Git_Initialization_Failed={messageKey:"Trident_Git_Error_Git_Initialization_Failed_Message",titleKey:"Trident_Git_Error_Unable_To_Initialize_Title"},s.Git_Undo_Failed={messageKey:"Trident_Git_Error_Git_Undo_Failed_Message",titleKey:"Trident_Git_Error_Unable_To_Undo_Title"},s.Git_Commit_Failed={messageKey:"Trident_Git_Error_Git_InvalidCommitRequest_Message",titleKey:"Trident_Git_Error_Unable_To_Commit_Title"},s.Git_Update_Failed={messageKey:"Trident_Git_Error_Git_Update_Invalid_Request_Message",titleKey:"Trident_Git_Error_Unable_To_Update_Title"},s.Git_Create_Folder_Failed={messageKey:"Trident_Git_Error_Git_Create_Folder_Invalid_Request_Message",titleKey:"Trident_Git_Error_Unable_To_Create_Folder_Title"},s.Git_Checkout_Branch_Failed={messageKey:"Trident_Git_Error_Git_Checkout_Branch_Failed_Message",titleKey:"Trident_Git_Error_Git_Checkout_Branch_Failed_Title"},s.Git_Switch_Branch_Failed={messageKey:"Trident_Git_Error_Git_Switch_Branch_Failed_Message",titleKey:"Trident_Git_Error_Git_Switch_Branch_Failed_Title"},s.Git_Get_Branches_Failed={messageKey:"Trident_Git_Error_Git_Get_Branches_Failed_Message",titleKey:"Trident_Git_Error_Git_Connection_Details_Title"},s.Git_Branch_Out_Failed={messageKey:"Trident_Git_Error_Git_Branch_Out_Failed_Message",titleKey:"Trident_Git_Error_Git_Branch_Out_Failed_Title"},s.Git_BranchOutIdenticalBranchNames={messageKey:"Trident_Git_Error_Git_Branch_Name_Already_Exists_Message",titleKey:"Trident_Git_Error_Git_InvalidBranchName_Title"},s.GitProviderRepositoryNotFoundException={messageKey:"Trident_Git_Provider_Repository_Not_Found_Error_Message",titleKey:"Trident_Git_Provider_Repository_Not_Found_Error_Title"},s.GitTreeSizeExceeded={messageKey:"Trident_Git_Tree_Size_Exceeded_Message",titleKey:"Trident_Git_Tree_Size_Exceeded_Title"},s.GitIntegrationGitHubTenantAdminSwitchDisabled={messageKey:"Trident_Git_GitHub_Tenant_Admin_Switch_Disabled_Message",titleKey:"Trident_Git_GitHub_Tenant_Admin_Switch_Disabled_Title"},s.GitTokenExpiredOrDeprecatedException={messageKey:"Trident_Git_Token_Expired_Or_Deprecated_Exception_Message",titleKey:"Trident_Git_Token_Expired_Or_Deprecated_Exception_Title"},s.Git_GitTokenProviderCredentialsKindMismatchError={messageKey:"Trident_Git_Git_Token_Provider_Credentials_Kind_Mismatch_Error_Message",titleKey:"Trident_Git_Git_Token_Provider_Credentials_Kind_Mismatch_Error_Title"},s.Git_GitTokenProviderCredentialsConnectionMismatchError={messageKey:"Trident_Git_Git_Token_Provider_Credentials_Connection_Mismatch_Error_Message",titleKey:"Trident_Git_Git_Token_Provider_Credentials_Connection_Mismatch_Error_Title"},s.Git_GitTokenProviderCredentialsInternalError={messageKey:"Trident_Git_Provider_Bad_Credentials_Message",titleKey:"Trident_Git_Provider_Bad_Credentials_Title"},s.Git_InvalidConfigureCredentialsRequest={messageKey:"Trident_Git_Invalid_Configure_Credentials_Request_Message",titleKey:"Trident_Git_Invalid_Configure_Credentials_Request_Title"},s.GitCommitInvalidOperationResult={messageKey:"Trident_Git_Commit_Invalid_Operation_Result_Message",titleKey:"Trident_Git_Commit_Invalid_Operation_Result_Title"},s.Git_GitProviderRateLimitExceeded={messageKey:"Trident_Git_Git_Provider_Rate_Limit_Exceeded_Message",titleKey:"Trident_Git_Git_Provider_Rate_Limit_Exceeded_Title"},s.Git_GitProviderBadCredentials={messageKey:"Trident_Git_Provider_Bad_Credentials_Message",titleKey:"Trident_Git_Provider_Bad_Credentials_Title"},s.Git_Create_Datasource_Failed={messageKey:"Trident_Git_Create_Datasource_Failed_Message",titleKey:"Trident_Git_Create_Datasource_Failed_Title"},s.Git_Load_Datasources_Failed={messageKey:"Trident_Git_Load_Datasources_Failed_Message",titleKey:"Trident_Git_Load_Datasources_Failed_Title"},s.Git_SQLDatabaseDisplayNameCannotBeChanged={messageKey:"Trident_Git_SQL_Database_Display_Name_Cannot_Be_Changed_Message",titleKey:"Trident_Git_SQL_Database_Display_Name_Cannot_Be_Changed_Title"},s.Git_GitHttpClientTimeout={messageKey:"Trident_Git_Error_Git_GitHttpClientTimeout_Message",titleKey:"MultiSelect_Shortcut_Failed"},s.Alm_InvalidBranchOutRequest_OperationFailureAfterFolderCreation={messageKey:"Trident_Git_Branch_Out_Error_Branch_Error_Message",titleKey:"Trident_Git_Branch_Out_Error_Branch_Error_Title"},s.AlmOperationFailed_CommitToGit={messageKey:"ErrorDialogHelperText_TechnicalDetails",titleKey:"Trident_Git_Error_AlmOperation_Commit_Title"},s.AlmOperationFailed_UndoFromGit={messageKey:"ErrorDialogHelperText_TechnicalDetails",titleKey:"Trident_Git_Error_AlmOperation_Undo_Title"},s.AlmOperationFailed_UpdateFromGit={messageKey:"ErrorDialogHelperText_TechnicalDetails",titleKey:"Trident_Git_Error_AlmOperation_Update_Title"},s.AlmOperationFailed_SwitchGitBranch={messageKey:"ErrorDialogHelperText_TechnicalDetails",titleKey:"Trident_Git_Error_AlmOperation_Switch_Branch_Title"},s.DMTS_DuplicateDataSourceNameError={messageKey:"Trident_Git_Data_Source_Name_Already_Exists_Message",titleKey:"Trident_Git_Data_Source_Name_Already_Exists_Title"},s.DM_GWPipeline_Gateway_MashupDataAccessError={messageKey:"Trident_Git_Provider_Bad_Credentials_Message",titleKey:"Trident_Git_Provider_Bad_Credentials_Title"},s),N=((r={}).Git_PotentialDuplicateDisplayNameAndType={moreInfoKeys:["Trident_Git_Error_Git_Potential_Duplicate_Diaplay_Name_And_Type_MoreInfo1","Trident_Git_Error_Git_Potential_Duplicate_Diaplay_Name_And_Type_MoreInfo2"]},r);function u(g){return g&&"GitError"===g.__tag}function O(g){return g?.errorsDetails[0]}function A(g,j){return g?.errorsDetails.some(function(ot){return ot.errorType===j})}function M(g){var j,ot=K[null===(j=g?.error)||void 0===j?void 0:j.code];return 400===g?.status&&!!ot}function V(g){var j;return"Git_InvalidDirectoryName"===(null===(j=g.error["pbi.error"])||void 0===j?void 0:j.code)}function L(g){return A(g,"Git_MergePolicyNotSpecified")}function R(g,j){var ot;return"AlmOperationFailed_CommitToGit"===g&&"Git_GitProviderCommitRejectedByPolicy"===(null===(ot=j?.gitNonInteractiveOperationErrorDetails)||void 0===ot?void 0:ot.errorCode)}function o(g,j){var ot;return"AlmOperationFailed_CommitToGit"===g&&"Git_GitProviderCommitMaxSizeExceeded"===(null===(ot=j?.gitNonInteractiveOperationErrorDetails)||void 0===ot?void 0:ot.errorCode)}function z(g,j){return{__tag:"GitError",errorInfo:j,errorsDetails:g}}function J(g){return!!gt.find(function(j){return j===g})}function it(g){return A(g,"Git_ItemNotFound")||A(g,"Git_DirectoryNameDiffersByCase")}var I,Q=function(g){return g[g.SingleOption=0]="SingleOption",g[g.None=1]="None",g}({}),gt=["AlmOperationFailed_CommitToGit","AlmOperationFailed_UndoFromGit","AlmOperationFailed_UpdateFromGit"],_t=function(g){return g[g.AzureDevOps=0]="AzureDevOps",g[g.GitHub=1]="GitHub",g}({}),st="optionNotEnabled",ft=function(g){return g[g.Commit=0]="Commit",g[g.Update=1]="Update",g[g.Initialize=2]="Initialize",g[g.Undo=3]="Undo",g[g.CheckoutBranch=4]="CheckoutBranch",g[g.SwitchBranch=5]="SwitchBranch",g}({}),Z=function(g){return g[g.InProgress=0]="InProgress",g[g.Successful=1]="Successful",g[g.Failed=2]="Failed",g}({}),ht=function(g){return g[g.None=0]="None",g[g.KeepYours=1]="KeepYours",g[g.TakeTheirs=2]="TakeTheirs",g}({}),T=function(g){return g.AzureDevOps="Azure DevOps",g.GitHub="GitHub",g}({}),U=((I={})[_t.AzureDevOps]={type:_t.AzureDevOps,name:T.AzureDevOps,iconName:"azuredevops_logo_16_regular"},I[_t.GitHub]={type:_t.GitHub,name:T.GitHub,iconName:"github_logo"},I);function b(g){var j,ot=null===(j=w(g))||void 0===j?void 0:j.repositoryLink;if(ot)return{branchName:g.branchName,branchLink:ot+"?version=GB".concat(g.branchName)}}function H(g){var j,ot=null===(j=w(g))||void 0===j?void 0:j.repositoryLink;if(ot&&g?.head)return{commitId:g.head,commitLink:ot+"/commit/".concat(g.head,"/?refName=refs/heads/").concat(g.branchName)}}function w(g){if(g?.projectName)return{repositoryName:g.repositoryName,repositoryLink:"https://".concat(g.organizationName,".visualstudio.com/").concat(g.projectName,"/_git/").concat(g.repositoryName)}}function G(g){return{branchName:g.branchName,branchLink:h(g).repositoryLink+"/tree/".concat(g.branchName)}}function m(g){if(g?.head)return{commitId:g.head,commitLink:h(g).repositoryLink+"/commit/".concat(g.head)}}function h(g){return{repositoryName:g.repositoryName,repositoryLink:"https://github.com/".concat(g.organizationName,"/").concat(g.repositoryName)}}var l={credentialType:"Key",encryptedConnection:"Any",privacyLevel:"Private",skipTestConnection:!1,encryptionAlgorithm:"NONE"},D={singleSignOnType:"None",allowDatasourceThroughGateway:!1},k="Extension",X={name:"url",type:"nullable text",isRequired:!1},q=["\\","?","*",":","|",'"',"<",">"],rt=["."," "];function tt(g,j,ot){if(void 0===ot&&(ot="Trident_Git_Last_Synced_At"),j){var Et=g.currentLanguageLocale,Mt=new Date(j),Ut=g.format("Trident_Git_Last_Synced_At",[Mt.toLocaleDateString(Et,{day:"numeric",month:"numeric",year:"numeric"}),Mt.toLocaleTimeString(Et,{hour:"numeric",minute:"numeric"})]);return"Trident_Git_Last_Synced_At"===ot?Ut:g.get(ot)+Ut}}function St(){var g;return(g={})[_t.AzureDevOps]={getBranchReference:b,getHeadReference:H,getIconName:function(){return"azuredevops_logo_16_regular"},getRepositoryReference:w},g[_t.GitHub]={getBranchReference:G,getHeadReference:m,getIconName:function(){return"github_logo"},getRepositoryReference:h},g}function Ot(g,j){return q.some(function(ot){return g.includes(ot)})?j.get("Trident_Git_Error_Git_InvalidBranchName_Message"):rt.some(function(ot){return g.endsWith(ot)})?j.get("Trident_Git_Error_Git_InvalidBranchNameSuffix_Message"):void 0}},57156:function(It,at,a){a.d(at,{F:function(){return u}});var s=a(77476),r=a(78035),K=a(17177),c=a(16622),N=a(50423),u=function(){function O(){}return O.\u0275fac=function(M){return new(M||O)},O.\u0275mod=N.\u0275\u0275defineNgModule({type:O}),O.\u0275inj=N.\u0275\u0275defineInjector({imports:[s.CommonModule,r.Y,K.T6,c.u]}),O}()}}]);