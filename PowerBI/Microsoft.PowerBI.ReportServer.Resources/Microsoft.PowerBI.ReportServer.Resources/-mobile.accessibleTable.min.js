"use strict";(self.webpackChunkmobile=self.webpackChunkmobile||[]).push([["accessibleTable"],{35572:function(x,m,d){d.r(m),d.d(m,{AccessibleTable:function(){return C}});var g=d(38078),S=d(72489);function y(l,s,n){var r,t,e={root:null,leaves:[]};if(null!=n?(r=l.rows.root,t=l.rows.levels):(r=l.columns.root,t=l.columns.levels),r&&r.children){var u={index:0,indexInSiblings:0,parent:null,span:0,levelsSpan:1,id:null==n?"c":"r",text:"",level:-1,children:void 0};return H(r,u,e.leaves,t,s,l.valueSources,n),e.root=u,e}}function H(l,s,n,e,r,t,a){e[l.level]?s.text=function(l,s,n){var e=[],r=s.sources[l.levelSourceIndex||0];if(l.isSubtotal&&!r.isMeasure)return n.getLocalizedString("TableTotalLabel");if(l.levelValues)for(var t=0,a=l.levelValues;t<a.length;t++){var u=a[t];e.push(u.value?u.value.toString():n.getLocalizedString("NullValue"))}else e.push(r.displayName);return e.join(", ")}(l,e[l.level],r):l.level>-1&&(s.id=null);var u=e.length-1,o=null,p=l.children;if(_.isEmpty(p)){if(l.level<u&&(s.levelsSpan=u-l.level+1),s.span=1,n.push(s),l.values&&null!=a){s.values=[];for(var i=0;i<a;i++){var v=l.values[i];s.values.push(v&&null!=v.value?(0,S.WU)(v.value,t[v.valueSourceIndex||0].format):"&nbsp;")}}}else{s.levelsSpan=_.head(p).level-l.level,s.children=[],i=0;for(var b=p.length;i<b;i++){var f=p[i],c={index:0,span:0,levelsSpan:1,text:"",id:s.id+"-"+i,level:f.level,children:void 0,parent:s,indexInSiblings:i};c.index=o?o.index+o.span:s.index,o=c,H(f,c,n,e,r,t,a),s.span+=c.span,s.children.push(c)}}}var h="colHeader",R=function(){function l(s,n){this.element=s,this.hostServices=n}return l.prototype.render=function(s,n){var e=function(l,s){var n=y(l,s);return{columns:n,rows:y(l,s,n.root.span)}}(s,this.hostServices),r=[];r.push('<div class="accessibleTable-container" style="width: '.concat(n.width,"px; height: ").concat(n.height,'px">')),r.push('<table class="accessibleTable" tabindex="0">'),r.push(this.renderColumnHeaders(s,e)),r.push(this.renderRowHeaders(e)),r.push("</table>"),r.push("</div>"),this.element.innerHTML=r.join("");var t=$(this.element).find("table");this.hostServices.requestFocus(t[0])},l.prototype.clear=function(){this.element.innerHTML=""},l.prototype.renderColumnHeaders=function(s,n){for(var e=[],r=s.rows.levels.length,t=s.columns.levels.length,a=0;a<t;a++)if((u=e[a]=[]).push("<tr>"),0===r)u.push('<td class="'.concat(h,'">&nbsp;</td>'));else if(a<t-1){for(var o=0;o<r-1;o++)u.push('<td class="'.concat(h,'">&nbsp;</td>'));u.push('<th class="'.concat(h,' rowLeaf">')),u.push(l.getHierachyLevelDisplayName(s.columns.levels[a])),u.push("</th>")}else for(var p=0;p<r;p++)u.push('<th class="'.concat(h," columnLeaf")),p===r-1&&u.push(" rowLeaf"),u.push('">'),u.push(l.getHierachyLevelDisplayName(s.rows.levels[p])),u.push("</th>");var i=n.columns.root.children;if(i&&i.length>0){o=0;for(var b=i.length;o<b;o++)this.renderColumnHeader(e,i[o])}for(a=0;a<t;a++)e[a].push("</tr>");for(var f="",c=0,v=e;c<v.length;c++){var u;f+=(u=v[c]).join("")}return f},l.prototype.renderColumnHeader=function(s,n){var e=s[n.level],r=n.children;if(e.push('<th  id="'.concat(n.id,'" class="').concat(h)),n.children||e.push(" columnLeaf"),e.push('"'),n.span>1&&e.push(" colSpan="+n.span),n.levelsSpan>1&&e.push(" rowSpan="+n.levelsSpan),e.push(">"+(0,g.HZ)(n.text)+"</th>"),r)for(var t=0,a=r;t<a.length;t++)this.renderColumnHeader(s,a[t])},l.prototype.renderRowHeaders=function(s){var n=[],e=s.rows.root.children;if(e&&e.length>0)for(var r=0,t=e;r<t.length;r++){var a=t[r];n.push("<tr>"),n.push(this.renderRowHeader(a,s.columns.leaves)),n.push("</tr>")}return n.join("")},l.prototype.renderRowHeader=function(s,n){var e=[];if(e.push('<th id="'.concat(s.id,'" rowSpan="').concat(s.span,'"')),s.levelsSpan>1&&e.push(' colSpan = "'.concat(s.levelsSpan,'"')),e.push(' class="'.concat("rowHeader")),s.children||e.push(" rowLeaf"),e.push('">'),e.push((0,g.HZ)(s.text)),e.push("</th>"),s.children)for(var r=0,t=s.children;r<t.length;r++){var a=t[r];a===s.children[0]||e.push("</tr><tr>"),e.push(this.renderRowHeader(a,n))}else e.push(this.renderValues(s,n));return e.join("")},l.prototype.renderValues=function(s,n){if(!_.isEmpty(s.values)){for(var e=[],r=s.index%2==0,t=0,a=n.length;t<a;t++){var u=n[t],o=(0,g.HZ)(s.values[t],!1,!0);e.push('<td class="value'),e.push(r?" even":" odd");var p=l.getHeadersId(s);p.push.apply(p,l.getHeadersId(u)||[]),e.push('" headers="'+p.join(" ")+'"'),e.push(">"),e.push(o),e.push("</td>")}return e.join("")}},l.getHeadersId=function(s){for(var n=[],e=s;e.parent&&e.id;)n.splice(0,0,e.id),e=e.parent;return n},l.getHierachyLevelDisplayName=function(s){for(var n=[],e=0,r=s.sources;e<r.length;e++){var t=r[e];t.isMeasure||n.push((0,g.HZ)(t.displayName))}return n.join(",")},l}(),C=function(){function l(){}return l.prototype.init=function(s){this.renderer=new R(s.element.get(0),s.host)},l.prototype.update=function(s){var n;_.isEmpty(s.dataViews)||(n=s.dataViews[0]);var e=n&&n.matrix;e?this.renderer.render(e,s.viewport):this.renderer.clear()},l.prototype.enumerateObjectInstances=function(s){return[]},l}()}}]);