"use strict";(self.webpackChunkreportServerHostModern=self.webpackChunkreportServerHostModern||[]).push([["funnelChart"],{10182:function(mt,Ue,d){d.r(Ue),d.d(Ue,{FunnelChart:function(){return pt},FunnelWebBehavior:function(){return ft},WebFunnelAnimator:function(){return vt}});var D=d(81337),qe=d(57622),Se=d(11305),Ie=d(45296),te=d(72902),_e=d(44783),Le=d(59107),ne=d(90120),M=d(21181),et=d(51129),tt=d(40739),se=d(80708),Ge=d(51650),je=d(62458),N=d(60066),le=d(46769),Pe=d(5381),at=d(32554),Y=d(72489),oe=d(54522),ae=d(56578),We=d(28326),ge=d(38400),g=d(99653),ce=d(80065),Ye=d(52083),rt=d(33777),it=d(41640),F=d(52287),Qe=d(39681),de=d(382),re=d(32041),nt=d(63972),Ce=d(26543),Ke=d(34021),st=d(86900),lt=d(23465),he=d(18664),z=d(10389),Xe=d(46135),ot=d(53197),$=d(79154);function Be(i,e,t){var r=d3.range(0,e.categoryLabels.length),n=d3.scaleBand().domain(r).range([e.rangeStart,e.rangeEnd]).paddingInner(e.barToSpaceRatio).paddingOuter(t?e.barToSpaceRatio:.75),a=d3.axisRight(n).tickPadding(0).tickSizeInner(0).ticks(r.length).tickValues(r).tickFormat(function(o){return e.categoryLabels[o]});i.attr("class","axis hideLinesOnAxis").attr("transform",(0,z.Iu)(0,e.margin.top)).call(a).select("path").attr("stroke",null),i.selectAll(".tick").call(ge.Q,e.categoryLabels);var s=e.margin.left-6;i.selectAll(".tick text").call(ot.oq,s,re.b.svgEllipsis).styles((0,he.E_)(e.labelFontProperties))}function E(i,e){return void 0===e&&(e=!1),e?i.highlight?i.originalHighlightValue:i.originalValue:i.highlight?i.highlightValue:i.value}var S={funnel:{bars:(0,$.CH)("funnelBar"),highlights:(0,$.CH)("highlight"),interactors:(0,$.CH)("funnelBarInteractor")},percentBar:{root:(0,$.CH)("percentBars"),mainLine:(0,$.CH)("mainLine"),leftTick:(0,$.CH)("leftTick"),rightTick:(0,$.CH)("rightTick"),text:(0,$.CH)("value")}},we=[S.funnel.bars.class,S.funnel.highlights.class].join(" "),U=d(56707),gt=d(96915),vt=function(i){function e(t){return i.call(this,t)||this}return(0,D.ZT)(e,i),e.prototype.animate=function(t){var r={failed:!0,shapes:null,dataLabels:null},n=t.viewModel,a=this.previousViewModel;return a&&(n.hasHighlights&&!a.hasHighlights?r=this.animateNormalToHighlighted(t):n.hasHighlights&&a.hasHighlights?r=this.animateHighlightedToHighlighted(t):!n.hasHighlights&&a.hasHighlights&&(r=this.animateHighlightedToNormal(t))),this.previousViewModel=n,r},e.prototype.animateNormalToHighlighted=function(t){var r=t.viewModel,n=t.layout,a=!0,s=t.interactivityService&&t.interactivityService.hasSelection();Be(t.axisGraphicsContext,t.axisOptions,t.isHidingPercentBars);var o=t.shapeGraphicsContext.selectAll(S.funnel.bars.selector).data(r.dataPoints,function(u){return u.key}),l=o.enter().append("rect").attr("class",function(u){return u.highlight?we:S.funnel.bars.class}).attrs(n.shapeLayoutWithoutHighlights).merge(o);l.style("fill",function(u){return u.color}).style("fill-opacity",function(u){return(0,N.eR)(u.selected,u.highlight,s,a)}).style("stroke-opacity",function(u){return(0,N.eR)(u.selected,u.highlight,s,a)}).transition().duration(this.animationDuration).attrs(n.shapeLayout),o.exit().remove(),this.animatePercentBars(t);var c=(0,Pe.Xc)(t.labelGraphicsContext,t.labelLayout,this.animationDuration);return(0,z.bL)(t.visualInitOptions,l),{failed:!1,shapes:l,dataLabels:c}},e.prototype.animateHighlightedToHighlighted=function(t){Be(t.axisGraphicsContext,t.axisOptions,t.isHidingPercentBars);var r=this.animateDefaultShapes(t);return this.animatePercentBars(t),{failed:!1,shapes:r,dataLabels:(0,Pe.Xc)(t.labelGraphicsContext,t.labelLayout,this.animationDuration)}},e.prototype.animateHighlightedToNormal=function(t){var r=t.viewModel,n=t.layout,a=!!t.interactivityService&&t.interactivityService.hasSelection();Be(t.axisGraphicsContext,t.axisOptions,t.isHidingPercentBars);var s=t.shapeGraphicsContext.selectAll(S.funnel.bars.selector).data(r.dataPoints,function(c){return c.key}),o=s.enter().append("rect").attr("class",function(c){return c.highlight?we:S.funnel.bars.class}).merge(s);o.style("fill",function(c){return c.color}).style("fill-opacity",function(c){return(0,N.eR)(c.selected,c.highlight,a,!c.selected)}).style("stroke-opacity",function(c){return(0,N.eR)(c.selected,c.highlight,a,!c.selected)}).transition().duration(this.animationDuration).attrs(n.shapeLayoutWithoutHighlights).transition().duration(0).delay(0).style("fill-opacity",function(c){return(0,N.eR)(c.selected,c.highlight,a,!1)}).style("stroke-opacity",function(c){return(0,N.eR)(c.selected,c.highlight,a,!1)}),s.exit().transition().duration(this.animationDuration).attrs(a?n.zeroShapeLayout:n.shapeLayoutWithoutHighlights).remove(),this.animatePercentBars(t);var l=(0,Pe.Xc)(t.labelGraphicsContext,t.labelLayout,this.animationDuration);return(0,z.bL)(t.visualInitOptions,o,s.exit()),{failed:!1,shapes:o,dataLabels:l}},e.prototype.animateDefaultShapes=function(t){var r=t.viewModel,n=r.dataPoints,a=t.layout,s=r.hasHighlights,o=!!t.interactivityService&&t.interactivityService.hasSelection(),l=t.shapeGraphicsContext.selectAll(S.funnel.bars.selector).data(n,function(u){return u.key}),c=l.enter().append("rect").attr("class",function(u){return u.highlight?we:S.funnel.bars.class}).merge(l);return c.style("fill",function(u){return u.color}).style("fill-opacity",function(u){return(0,N.eR)(u.selected,u.highlight,o,s)}).style("stroke-opacity",function(u){return(0,N.eR)(u.selected,u.highlight,o,s)}).transition().duration(this.animationDuration).attrs(a.shapeLayout),l.exit().remove(),(0,z.bL)(t.visualInitOptions,c),c},e.prototype.animatePercentBars=function(t){var r=t.viewModel;if(t.isHidingPercentBars||!r.dataPoints||(r.hasHighlights?r.dataPoints.length/2:r.dataPoints.length)<2)this.animatePercentBarComponents([],t);else{var a=[r.dataPoints[r.hasHighlights?1:0],r.dataPoints[r.dataPoints.length-1]],s=E(a[0]);if(s<=0)this.animatePercentBarComponents([],t);else{var o=a.map(function(l,c){return{value:E(l),percent:0===c?1:E(l)/s,isTop:0===c}});this.animatePercentBarComponents(o,t)}}},e.prototype.animateToFunnelPercent=function(t,r,n){return t.data(r).transition().duration(this.animationDuration).attrs(n)},e.prototype.animatePercentBarComponents=function(t,r){var n=r.percentGraphicsContext,a=r.layout,s=[{percent:0,value:0,isTop:!0},{percent:0,value:0,isTop:!1}],o=n.selectAll(S.percentBar.mainLine.selector).data(t);this.animateToFunnelPercent(o.exit(),s,a.percentBarLayout.mainLine).remove();var l=o.enter().append("line").classed(S.percentBar.mainLine.class,!0).data(s).attrs(a.percentBarLayout.mainLine).merge(o);this.animateToFunnelPercent(l,t,a.percentBarLayout.mainLine);var c=n.selectAll(S.percentBar.leftTick.selector).data(t);this.animateToFunnelPercent(c.exit(),s,a.percentBarLayout.leftTick).remove();var u=c.enter().append("line").classed(S.percentBar.leftTick.class,!0).data(s).attrs(a.percentBarLayout.leftTick).merge(c);this.animateToFunnelPercent(u,t,a.percentBarLayout.leftTick);var m=n.selectAll(S.percentBar.rightTick.selector).data(t);this.animateToFunnelPercent(m.exit(),s,a.percentBarLayout.rightTick).remove();var L=m.enter().append("line").classed(S.percentBar.rightTick.class,!0).data(s).attrs(a.percentBarLayout.rightTick).merge(m);this.animateToFunnelPercent(L,t,a.percentBarLayout.rightTick);var C=n.selectAll(S.percentBar.text.selector).data(t);this.animateToFunnelPercent(C.exit(),s,a.percentBarLayout.text.attr).remove();var p=C.enter().append("text").classed(S.percentBar.text.class,!0).data(s).attrs(a.percentBarLayout.text.attr).styles(a.percentBarLayout.text.style).merge(C);this.animateToFunnelPercent(p,t,a.percentBarLayout.text.attr).text(function(j){return We.dx.formatValue(j.percent,(0,Y.Z)("Percentage1"))}),(0,z.bL)(r.visualInitOptions,l,o.exit(),u,c.exit(),L,m.exit(),p)},e}(d(94478).r5),J=d(30237),ft=function(){function i(){}return i.prototype.bindEvents=function(e,t,r,n){var a=this.bars=e.bars,s=e.interactors,o=e.clearCatcher,l=e.root;if(this.hasHighlights=e.hasHighlights,n?((0,J.FO)(a),(0,J.FO)(s),(0,J.to)(l)):((0,J.a0)(a,t),(0,J.a0)(s,t),(0,J.lt)(l,t)),r){var c=r.dataPointNavigationManager,u=r.pointSourceKey;c.isEmpty(u)||((0,J.W3)(l,c,u),(0,J.I8)(l,c,u))}o.on("click",function(){Le.M.isCtrlOrMeta(d3.event)||t.handleClearSelection()})},i.prototype.renderSelection=function(e){var t=this.hasHighlights;this.bars.attr("aria-selected",function(r){return r.selected}).style("fill-opacity",function(r){return(0,N.eR)(r.selected,r.highlight,e,t)}).style("stroke-opacity",function(r){return(0,N.eR)(r.selected,r.highlight,e,t)})},i.prototype.renderFocus=function(e){e&&Le.M.focus(e)},i}(),pt=function(){function i(e){this.labelPositionObjects=[de.h.outsideEnd,de.h.insideCenter],e&&(this.tooltipsEnabled=e.tooltipsEnabled,e.funnelSmallViewPortProperties&&(this.funnelSmallViewPortProperties=e.funnelSmallViewPortProperties),e.animator&&(this.animator=e.animator),e.behavior&&(this.behavior=e.behavior))}return i.converter=function(e,t,r,n){var a;void 0===n&&(n=!0);for(var s=g.jP.general.formatString,o=(0,et.G)(e,{staticSeriesRoleNames:["Y"],colorOptions:{valueRole:"Y",visualStyle:t},formatStringProp:s}),l=o.data,c=o.columns,u=[],m=e.categorical,L=l.hasHighlights(),C=[],p=0,j=l.getSeriesCount();p<j;p++)C.push(c.getValueMetadataColumn("Y",p));var y,Q,I,O,H=!1,w=!1,v=!1,h=[],b=this.getDefaultLabelSettings(t),V=this.getDefaultPercentLabelSettings(t),T=this.getDefaultCategoryLabelSettings(t),ue=(0,Ye.Rr)(m),x=!1;if(e&&e.metadata&&e.metadata.objects){var ve=e.metadata.objects.labels;ve&&(0,M.ww)(ve,b,void 0,t);var He=e.metadata.objects.percentBarLabel;He&&(0,M.ww)(He,V,void 0,t);var Ve=e.metadata.objects.categoryAxis;Ve&&(0,M.ww)(Ve,T,void 0,t)}if(!l.hasValues("Y"))return{allValuesAreNegative:v,canShowDataLabels:!0,categoryAxisSettings:T,categoryCount:0,categoryLabels:h,dataLabelsSettings:b,dataPoints:u,hasCategories:x,hasHighlights:L,hasNegativeValues:w,highlightsOverflow:H,percentBarLabelSettings:V,valuesMetadata:C};y=l.getValue("Y",0,0),L&&(Q=l.getHighlight("Y",0,0));var Te=(0,Y.Z)("Percentage"),K=b.fontProperties.color;if(l.hasCategories()){x=!0;for(var f=0,Fe=l.getCategoryCount();f<Fe;f++){var X=c.getCategoryColumn("Category"),Me=l.getCategoryValue("Category",f),k=c.getValueMetadataColumn("Y"),G=Ce.dw.builder().withCategory([X],f,null===(a=X?.source)||void 0===a?void 0:a.queryName,!0).withMeasure(k.queryName,c.getValueColumn("Y"),f).createSelectionId(),P=l.getValue("Y",f),W=l.getFormatString("Y",f),Z=(0,oe.xq)(Me,X.source,s),q=void 0,ee=void 0,A=void 0,fe=void 0;L?(A=l.getHighlight("Y",f),fe=l.getHighlightFormatString("Y",f),q=Q?A/Q:null,ee=O?A/O:null):(q=y?P/y:null,ee=I?P/I:null);var B=void 0;if(n){(B=[]).push({displayName:X.source.displayName,value:Z}),null!=P&&B.push({displayName:k.displayName,value:(0,oe.xq)(P,k,s,!1,W)}),null!=A&&B.push({displayName:Se.I6.localizationOptions.highlightedValueDisplayName,value:(0,oe.xq)(A,k,s,!1,fe)});var De=ue?ue.source:void 0;De&&De!==k&&null!=ue.values[f]&&B.push({displayName:De.displayName,value:(0,oe.xq)(l.getValue("Gradient",f),De,s,!1,l.getFormatString("Gradient",f))}),i.addFunnelPercentsToTooltip(Te,B,r,q,ee,L),(0,Se.VT)(o,B,f,void 0,s)}var ie=(0,le.t$)({defaultColor:K,categoricalDataReader:o,categoryIndex:f}),Oe=(0,le.B8)(ie)?ie.color:K;b.fontProperties=(0,le.Vv)(Oe,b.fontProperties);var pe=o.colors.createBySeries(0,f);if(u.push({label:Z,value:P,formatString:W,originalValue:P,percentOfFirst:q,percentOfPrevious:ee,categoryIndex:f,seriesIndex:null,identity:G,selected:!1,key:G.getKey(),tooltipInfo:B,formattedTooltip:(0,ge.X)(B),color:pe,labelFill:ie.color}),L){var be=Ce.l0.createWithHighlight(G),ke=l.getHighlight("Y",f),bt=l.getHighlightFormatString("Y",f);u.push({label:Z,value:P,formatString:W,originalValue:P,percentOfFirst:q,percentOfPrevious:ee,categoryIndex:f,seriesIndex:null,identity:be,selected:!1,key:be.getKey(),highlight:!0,highlightValue:ke,highlightFormatString:bt,originalHighlightValue:ke,tooltipInfo:B,formattedTooltip:(0,ge.X)(B),color:pe}),O=ke}I=P}}else for(x=!1,f=0,p=0,j=l.getSeriesCount();p<j;p++){P=l.getValue("Y",f,p),W=l.getFormatString("Y",f,p),k=c.getValueMetadataColumn("Y",p),G=Ce.l0.createWithMeasure(k.queryName),pe=o.colors.createByValue(p),ie=(0,le.t$)({seriesColor:b?.fontProperties.color,defaultColor:K,categoricalDataReader:o,categoryIndex:f,seriesIndex:p}),Oe=(0,le.B8)(ie)?ie.color:K,b.fontProperties=(0,le.Vv)(Oe,b.fontProperties);var ye=void 0,me=void 0;if(A=void 0,fe=void 0,L?(A=l.getHighlight("Y",f,p),fe=l.getHighlightFormatString("Y",f,p),ye=Q?A/Q:null,me=O?A/O:null):(ye=y?P/y:null,me=I?P/I:null),B=void 0,n&&(B=[],null!=P&&B.push({displayName:k.displayName,value:(0,oe.xq)(P,k,s,!1,W)}),null!=A&&B.push({displayName:Se.I6.localizationOptions.highlightedValueDisplayName,value:(0,oe.xq)(A,k,s,!1,fe)}),i.addFunnelPercentsToTooltip(Te,B,r,ye,me,L),(0,Se.VT)(o,B,f,void 0,s)),u.push({label:k.displayName,value:P,formatString:W,originalValue:P,percentOfFirst:ye,percentOfPrevious:me,categoryIndex:p,seriesIndex:null,identity:G,selected:!1,key:G.getKey(),tooltipInfo:B,formattedTooltip:(0,ge.X)(B),color:pe,labelFill:ie.color}),L){be=Ce.l0.createWithHighlight(G);var Ae=l.getHighlight("Y",f,p),yt=l.getHighlightFormatString("Y",f,p);u.push({label:k.displayName,value:P,formatString:W,originalValue:P,percentOfFirst:ye,percentOfPrevious:me,categoryIndex:p,seriesIndex:null,identity:be,key:be.getKey(),selected:!1,highlight:!0,originalHighlightValue:Ae,highlightValue:Ae,highlightFormatString:yt,tooltipInfo:B,formattedTooltip:(0,ge.X)(B),color:pe}),O=Ae}I=P}for(var Re=0;Re<u.length;Re+=L?2:1)h.push((R=u[Re]).label);v=u.length>0&&_.every(u,function(Ee){return(!Ee.highlight||Ee.highlightValue<=0)&&Ee.value<0});for(var Ne=0,$e=u;Ne<$e.length;Ne++){var R=$e[Ne];if(v)R.value=Math.abs(R.value),R.highlight&&(R.highlightValue=Math.abs(R.highlightValue));else{var Je=(P=R.value)<0;Je&&(R.value=0);var ze=!1;R.highlight&&(R.highlightValue=(ze=(A=R.highlightValue)<0)?0:A),w||(w=Je||ze)}(0,it.aP)(R.highlightValue,R.value)&&(H=!0)}return{allValuesAreNegative:v,canShowDataLabels:!0,categoryAxisSettings:T,categoryCount:h.length,categoryLabels:h,dataLabelsSettings:b,dataPoints:u,hasCategories:x,hasHighlights:L,hasNegativeValues:w,highlightsOverflow:H,percentBarLabelSettings:V,strokeSettings:(0,Ke.kG)(t),valuesMetadata:C}},i.prototype.getFormattingModel=function(){var e=this;return new ae.Nq(function(){return e.getColorsCard()},function(){return e.getDataLabelsCard()},function(){return e.getCategoryLabelsCard()},function(){return e.getConversionRateLabelsCard()}).build()},i.prototype.hasGradientCategorical=function(){var e;return(0,Ye.Q1)(null===(e=_.first(this.dataViews))||void 0===e?void 0:e.categorical)},i.prototype.getColorsCard=function(){var e=this.data;if(e&&this.dataViews&&this.dataViews.length&&!this.hasGradientCategorical())return(0,at.k2)({dataView:this.dataViews[0],categories:_.map(e.dataPoints,function(t){return{color:t.color,displayName:t.label,identity:t.identity}}),style:this.style,fillInstanceKind:3},this.featureSwitches,this.hostServices)},i.prototype.getDataLabelsCard=function(){var e=this,t=this.data;if(t&&this.dataViews&&this.dataViews.length){var r=i.getLabelSettingsOptions(void 0,this.data.dataLabelsSettings||i.getDefaultLabelSettings(this.style),!0,this.style,this.labelPositionObjects);r.funnelLabelStyle=!0,je.fF.assertValue(r,"options");var n=r.dataLabelsSettings;n.position&&this.labelPositionObjects.indexOf(n.position)<0&&(n.position=de.h.outsideEnd);var a="labels",s=(0,M.kL)(a);s.labelStyle=g.jP.labels.funnelLabelStyle,s.enableBackground=g.jP.labels.enableBackground,s.backgroundColor=g.jP.labels.backgroundColor,s.backgroundTransparency=g.jP.labels.backgroundTransparency;var l={cardBuilder:new ae.CQ(new ae.lg(a),"Visual_DataPointsLabels",s,function(c){return e.hostServices.getLocalizedString(c)}),dataLabelsProps:s,featureSwitches:this.featureSwitches,hostServices:this.hostServices,options:r,instanceKind:t.hasCategories?void 0:3,individualSelector:(0,M.WD)({featureSwitches:this.featureSwitches,hasCategories:t.hasCategories,hasDynamicSeries:!1,hasSeriesSelector:!1})};return(0,M.XQ)(l)}},i.prototype.getCategoryLabelsCard=function(){var e=this;if(this.data&&this.dataViews&&this.dataViews.length){var r=i.getLabelSettingsOptions(void 0,this.data.categoryAxisSettings||i.getDefaultCategoryLabelSettings(this.style),!0,this.style,void 0),n={color:g.jP.categoryAxis.color,fontFamily:g.jP.categoryAxis.fontFamily,fontSize:g.jP.categoryAxis.fontSize,show:g.jP.categoryAxis.show,bold:g.jP.categoryAxis.bold,italic:g.jP.categoryAxis.italic,underline:g.jP.categoryAxis.underline},a=new ae.CQ(new ae.lg("categoryAxis"),"Visual_CategoryLabels",n,function(o){return e.hostServices.getLocalizedString(o)});return(0,M.XQ)({cardBuilder:a,dataLabelsProps:n,featureSwitches:this.featureSwitches,hostServices:this.hostServices,options:r,customDescription:"Visual_CategoryLabelOptionsDescription",instanceKind:3})}},i.prototype.getConversionRateLabelsCard=function(){var e=this;if(this.data&&this.dataViews&&this.dataViews.length){var r=i.getLabelSettingsOptions(void 0,this.data.percentBarLabelSettings||i.getDefaultPercentLabelSettings(this.style),!1,this.style,void 0),n={color:g.jP.percentBarLabel.color,fontFamily:g.jP.percentBarLabel.fontFamily,fontSize:g.jP.percentBarLabel.fontSize,show:g.jP.percentBarLabel.show,bold:g.jP.percentBarLabel.bold,italic:g.jP.percentBarLabel.italic,underline:g.jP.percentBarLabel.underline},a=new ae.CQ(new ae.lg("percentBarLabel"),"Visual_PercentBarLabel",n,function(o){return e.hostServices.getLocalizedString(o)});return(0,M.XQ)({cardBuilder:a,dataLabelsProps:n,featureSwitches:this.featureSwitches,hostServices:this.hostServices,options:r,customDescription:"Visual_PercentBarLabelDescription",instanceKind:3})}},i.getLabelSettingsOptions=function(e,t,r,n,a){var s=t&&t.enableBackground;return{enumeration:e,dataLabelsSettings:t,show:!0,displayUnits:r,precision:r,percentagePrecision:r,position:r,positionObject:a,enableBackground:s,backgroundColor:s?t.backgroundColor:void 0,backgroundTransparency:s?t.backgroundTransparency:void 0,fontSize:!0,fontFamily:!0,style:n,bold:!0,italic:!0,underline:!0}},i.prototype.init=function(e){var r,t=this;this.options=e,this.featureSwitches=e.featureSwitches;var a=this.svg=d3.select(e.element.get(0)).append("svg").classed(i.VisualClassName,!0);if(this.tooltipService=(0,tt.r)(e.host),this.behavior&&(this.clearCatcher=(0,te.EX)(this.svg)),this.currentViewport=e.viewport,this.margin=(0,Qe.ED)(i.DefaultMargin),this.style=e.style,this.hostServices=e.host,this.behavior){this.interactivityService=(0,te.ub)(this.hostServices,this.featureSwitches);var s=Le.M.isInternetExplorerOrEdge();this.svg.attr("tabindex",0).attr("focusable",!0).attr("role","listbox").attr("aria-multiselectable",!0).attr("aria-label",this.hostServices.getLocalizedString("Visual_Plot")).classed(N.Pg,!s)}if(this.featureSwitches.onObject){var l=(null===(r=this.hostServices)||void 0===r?void 0:r.getSubSelectionService())??st.D.createWithDefaultHost();this.subSelectionHelper=F.O5.createHtmlSubselectionHelper({hostElement:e.element.get(0),hostServices:this.hostServices,renderer:l,targetSource:"format",scale:function(){return t.currentViewport.scale}}),this.interactivityService.setSubSelectionHelper(this.subSelectionHelper)}this.percentGraphicsContext=a.append("g").classed(S.percentBar.root.class,!0),this.funnelGraphicsContext=a.append("g"),this.axisGraphicsContext=a.append("g"),this.labelBackgroundContext=a.append("g").classed(U.u9.class,!0),this.labelGraphicsContext=a.append("g").classed(U.ZL.class,!0),this.updateViewportProperties()},i.prototype.getSubSelectionShortcuts=function(e,t){var n={key:"Delete",nextValue:!1};switch((0,ce.dF)(e).objectName){case"bars":return[{type:0},(0,D.pi)((0,D.pi)({type:2},g.jP.labels.show),{enabledLabel:this.hostServices.getLocalizedString("Format_AddDataLabels")}),(0,D.pi)((0,D.pi)({type:2},g.jP.categoryAxis.show),{enabledLabel:this.hostServices.getLocalizedString("Visual_Add_CategoryLabel")}),(0,D.pi)((0,D.pi)({type:2},g.jP.percentBarLabel.show),{enabledLabel:this.hostServices.getLocalizedString("Visual_PercentBarLabel_Add")}),{type:1,destinationInfo:{cardUid:"".concat("Visual","-").concat("colors"),groupUid:"".concat("colors","-").concat("colors")},label:this.hostServices.getLocalizedString("Format")}];case"category-labels":return[(0,D.pi)((0,D.pi)({type:2},g.jP.categoryAxis.show),{disabledLabel:this.hostServices.getLocalizedString("Delete"),keyboardShortcuts:[n]}),{type:0,excludedResetFormattingIds:[g.jP.categoryAxis.show]},{type:1,destinationInfo:{cardUid:"".concat("Visual","-").concat("categoryAxis"),groupUid:"".concat("categoryAxis","-").concat("values")},label:this.hostServices.getLocalizedString("Format_Category_Labels")}];case"data-labels":return[(0,D.pi)((0,D.pi)({type:2},g.jP.labels.show),{disabledLabel:this.hostServices.getLocalizedString("Delete"),keyboardShortcuts:[n]}),{type:0,excludedResetFormattingIds:[g.jP.labels.show]},{type:1,destinationInfo:{cardUid:"".concat("Visual","-").concat("labels")},label:this.hostServices.getLocalizedString("Format_Data_Labels")}];case"percents":return[(0,D.pi)((0,D.pi)({type:2},g.jP.percentBarLabel.show),{disabledLabel:this.hostServices.getLocalizedString("Delete"),keyboardShortcuts:[n]}),{type:0,excludedResetFormattingIds:[g.jP.percentBarLabel.show]},{type:1,destinationInfo:{cardUid:"".concat("Visual","-").concat("percentBarLabel")},label:this.hostServices.getLocalizedString("Format_Conversion_Rate")}];default:return}},i.prototype.getSubSelectionStyles=function(e){var a,r=_.first(e).visualObjects,n=(0,ce.dF)(e);if(r.length>0)switch(a={data:[(0,gt.Ue)(1)]},n.objectName){case"bars":return(0,ce.w3)(this.hostServices,void 0,(0,D.pi)((0,D.pi)({},g.jP.dataPoint.fill),{selector:a}));case"data-labels":return 0===this.data.dataPoints.length?void 0:(0,ce.Jf)({hostServices:this.hostServices,omitSelectorForSingleSeries:!0,individualSelector:!0,selector:a,repetitionSelector:void 0},{fontFamilyReference:g.jP.labels.fontFamily,fontSizeReference:g.jP.labels.fontSize,boldReference:g.jP.labels.bold,italicReference:g.jP.labels.italic,underlineReference:g.jP.labels.underline,fontColorReference:g.jP.labels.color,backgroundReference:g.jP.labels.backgroundColor});case"category-labels":return(0,ce.un)(this.hostServices,{fontFamilyReference:g.jP.categoryAxis.fontFamily,fontSizeReference:g.jP.categoryAxis.fontSize,boldReference:g.jP.categoryAxis.bold,italicReference:g.jP.categoryAxis.italic,underlineReference:g.jP.categoryAxis.underline,fontColorReference:g.jP.categoryAxis.color});case"percents":return(0,ce.un)(this.hostServices,{fontFamilyReference:g.jP.percentBarLabel.fontFamily,fontSizeReference:g.jP.percentBarLabel.fontSize,boldReference:g.jP.percentBarLabel.bold,italicReference:g.jP.percentBarLabel.italic,underlineReference:g.jP.percentBarLabel.underline,fontColorReference:g.jP.percentBarLabel.color});default:return}},i.prototype.getNextSubSelectable=function(e,t){return this.subSelectionHelper.getNextSubSelectable(e,t)},i.prototype.getSubSelectables=function(e){return this.subSelectionHelper.getAllSubSelectables(e)},i.prototype.onDataViewObjectChanged=function(e,t){return this.featureSwitches.onObject&&1===t?Ge.o.applyDataViewObjectsBehaviorChanges(e,this.getDataViewObjectLayerChanges(e)):e},i.prototype.getDataViewObjectLayerChanges=function(e){if(!this.featureSwitches.onObject)return[];var n=[lt.$.create({objectName:"labels",propertyName:"backgroundColor"},this.data.dataLabelsSettings.enableBackground).onToggleEnabled(qe.W.createBooleanDataViewObjectChange({objectName:"labels",propertyName:"enableBackground"},!0))];return Ge.o.getDataViewObjectsBehaviorChanges(e,n)},i.prototype.updateViewportProperties=function(){var e=this.currentViewport;this.svg.attr("width",e.width).attr("height",e.height)},i.prototype.update=function(e){je.fF.assertValue(e,"options"),this.data={dataPoints:[],categoryLabels:[],valuesMetadata:[],hasHighlights:!1,highlightsOverflow:!1,canShowDataLabels:!0,dataLabelsSettings:i.getDefaultLabelSettings(this.style),hasNegativeValues:!1,allValuesAreNegative:!1,percentBarLabelSettings:i.getDefaultPercentLabelSettings(this.style),categoryAxisSettings:i.getDefaultCategoryLabelSettings(this.style),categoryCount:0,hasCategories:!1};var t=this.dataViews=e.dataViews;if(this.currentViewport=e.viewport,this.featureSwitches.onObject&&e.formatMode!==this.formatMode&&(this.subSelectionHelper.setFormatMode(e.formatMode),this.interactivityService.setFormatMode(e.formatMode),this.formatMode=e.formatMode),t&&t.length>0){var r=t[0];r.categorical&&(this.data=i.converter(r,this.style,this.hostServices,this.tooltipsEnabled),this.interactivityService&&this.interactivityService.applySelectionStateToData(this.data.dataPoints));var n=(0,rt.b)(t,!1,!1,!1,["Tooltips"]);this.data.allValuesAreNegative?n.push(new Ie.fi):this.data.hasNegativeValues&&n.push(new Ie.v3),this.hostServices.setWarnings(n)}var s=this.subSelectionHelper&&(e.type&Xe.EP.Data||e.type&Xe.EP.FormattingSubSelectionChange)?e.subSelections:null;this.updateViewportProperties(),this.updateInternal(e.suppressAnimations,s)},i.prototype.onDataChanged=function(e){this.update({dataViews:e.dataViews,suppressAnimations:e.suppressAnimations,viewport:this.currentViewport})},i.prototype.onResizing=function(e){this.currentViewport=e,this.update({dataViews:this.dataViews,suppressAnimations:!0,viewport:this.currentViewport})},i.prototype.getMaxLabelLength=function(e,t){for(var r=0,n=re.b.measureSvgTextWidth,a=0,s=e.length;a<s;a++)t.text=e[a],r=Math.max(r,n(t));return r+6},i.prototype.updateInternal=function(e,t){var r;if(null!=this.data){var n=this.data,a=n.dataPoints,s=a.filter(function(y){return!y.highlight}),o=this.isHidingPercentBars(),l=this.setUpAxis(),c=l.margin,u=this.funnelGraphicsContext.attr("transform",(0,z.Iu)(c.left,c.top)),m=this.labelBackgroundContext.attr("transform",(0,z.Iu)(c.left,c.top)),L=this.labelGraphicsContext.attr("transform",(0,z.Iu)(c.left,c.top));this.percentGraphicsContext.attr("transform",(0,z.Iu)(c.left,c.top)),this.svg.style("font-family",U.Pq);var j,H,w,C=i.getFunnelLayout(n,l),p=this.getLabels(C,c);if(this.animator&&!e&&(w=(H=this.animator.animate({viewModel:n,interactivityService:this.interactivityService,layout:C,axisGraphicsContext:this.axisGraphicsContext,shapeGraphicsContext:u,percentGraphicsContext:this.percentGraphicsContext,labelGraphicsContext:this.labelGraphicsContext,axisOptions:l,dataPointsWithoutHighlights:s,labelLayout:p,isHidingPercentBars:o,visualInitOptions:this.options})).shapes),(!this.animator||e||H.failed)&&(Be(this.axisGraphicsContext,l,o),w=i.drawDefaultShapes(n,a,u,C,this.interactivityService,this.featureSwitches.onObject),i.drawPercentBars(n,this.percentGraphicsContext,C,o,this.style),j=(0,Pe.gm)({labelContext:L,dataLabels:p,formatMode:!1,onObject:null===(r=this.featureSwitches)||void 0===r?void 0:r.onObject,backgroundContext:m})),t&&this.subSelectionHelper.updateOutlinesFromSubSelections(t,!0),this.interactivityService){var h=i.drawInteractorShapes(a,u,C);this.interactivityService.bind(a,this.behavior,{root:this.svg,bars:w,interactors:h,clearCatcher:this.clearCatcher,hasHighlights:n.hasHighlights},{navigationOptions:{helper:this,navigationStrategy:te.jN.CategoryOnly},pointSourceKey:"funnel"}),this.tooltipsEnabled&&this.tooltipService.addTooltip(h,function(y){return y.data&&y.data.tooltipInfo},function(y){return y.data&&y.data.identity&&[y.data.identity]})}if(this.featureSwitches.onObject){var T=p.every(function(y){return y.hasBackground});(function(i){i.selectAll(".tick text").classed(F.cy,!0).attr(F.Ez,"category-labels").attr(F.QZ,1).attr(F.CK,"Visual_CategoryLabels").style("pointer-events","bounding-box")})(this.axisGraphicsContext),T||function(i){i.classed(F.cy,!0).attr(F.Ez,"data-labels").attr(F.QZ,1).attr(F.CK,"Visual_DataPointsLabels").style("pointer-events","bounding-box")}(j),function(i){i.selectAll(S.percentBar.text.selector).classed(F.cy,!0).attr(F.Ez,"percents").attr(F.QZ,1).attr(F.CK,"Visual_PercentBarLabel").style("pointer-events","bounding-box")}(this.percentGraphicsContext)}this.tooltipsEnabled&&this.tooltipService.addTooltip(w,function(y){return y.data&&y.data.tooltipInfo},function(y){return y.data&&y.data.identity&&[y.data.identity]})}},i.prototype.getFirstElement=function(){return{element:this.getHTMLElementFromCategoryIndex(0)}},i.prototype.getNextDataPoint=function(e,t,r){var n=this.data.categoryCount,a=e;do{switch(r){case te.x0.NextCategory:(e+=1)>=n&&(e=0);break;case te.x0.PreviousCategory:(e-=1)<0&&(e=n-1);break;case te.x0.NextSeries:case te.x0.PreviousSeries:break;default:je.fF.assertNever(r)}}while(0===this.data.dataPoints[e].value&&e!==a);return{element:this.getHTMLElementFromCategoryIndex(e)}},i.prototype.getHTMLElementFromCategoryIndex=function(e){return this.svg.selectAll(S.funnel.bars.selector).filter(function(t){return t.categoryIndex===e}).node()},i.prototype.getUsableVerticalSpace=function(){var e=this.margin;return this.currentViewport.height-(e.top+e.bottom)-i.MinBarThickness*this.data.categoryCount},i.prototype.isHidingPercentBars=function(){if(this.data.percentBarLabelSettings.show){var t=this.getPercentBarTextHeight();return this.getUsableVerticalSpace()-2*i.MinBarThickness*.75-2*t<=0}return!0},i.prototype.isSparklines=function(){return this.getUsableVerticalSpace()<=0},i.prototype.setUpAxis=function(){var e=this.data,t=e.dataPoints,r=e.categoryLabels,n=this.currentViewport,a=(0,Qe.ED)(i.DefaultMargin),s=this.isSparklines(),o=this.isHidingPercentBars(),l=o?0:this.getPercentBarTextHeight(),c=n.height-(a.top+a.bottom)-2*l,u=i.MaxMarginFactor,m=e.categoryAxisSettings.fontProperties;if(r.length>0&&s)r=[],e.canShowDataLabels=!1;else if(this.showCategoryLabels()){var L=(0,he.qk)(m),C=this.getMaxLabelLength(r,L),j=Math.min(C,n.width*u);a.left=j+i.YAxisPadding}else r=[];var H=n.width-(a.left+a.right),w=i.BarToSpaceRatio,v=d3.max(t.map(function(O){return O.value}));if(e.hasHighlights){var h=d3.max(t.map(function(O){return O.highlightValue}));v=d3.max([v,h])}var y,V=0,T=c;return y=o?c-e.categoryCount*i.MaxBarHeight:c-e.categoryCount*i.MaxBarHeight-2*i.MaxBarHeight*.75,e.categoryCount>0&&y>0&&(V=Math.ceil(y/2),T=Math.ceil(c-y/2)),o||(V+=l,T+=l),{margin:a,valueScale:d3.scaleLinear().domain([0,v]).range([H,0]),categoryScale:d3.scaleBand().domain(d3.range(0,e.categoryCount)).range([V,T]).paddingInner(w).paddingOuter(o?w:.75),maxScore:v,maxWidth:H,rangeStart:V,rangeEnd:T,barToSpaceRatio:w,categoryLabels:r,labelFontProperties:m}},i.prototype.getPercentBarTextHeight=function(){var e=(0,he.qk)(this.data.percentBarLabelSettings.fontProperties);return re.b.estimateSvgTextHeight(e)},i.prototype.onClearSelection=function(){this.interactivityService&&this.interactivityService.clearSelection()},i.prototype.onRestoreSelection=function(e){return!!this.interactivityService&&this.interactivityService.restoreSelection(e.selection)},i.getFunnelLayout=function(e,t){var r=e.highlightsOverflow,n=t.categoryScale,a=t.valueScale,s=t.maxScore,o=n.bandwidth(),l=Math.ceil(o/2),c=o*i.OverflowingHighlightWidthRatio,u=c/2,m=e.categoryCount-1,L=Math.abs(a(s)-a(0)),C=function(h){return(L-Math.abs(a(h)-a(0)))/2},p=function(h){return Math.max(i.MinimumInteractorSize,Math.abs(a(h)-a(0)))},j=(0,he.qk)(e.percentBarLabelSettings.fontProperties),H=re.b.estimateSvgTextBaselineDelta(j),w=re.b.estimateSvgTextHeight(j)-H;return{percentBarLayout:{mainLine:{x2:function(h){return Math.abs(a(h.value)-a(0))},transform:function(h){var b=a(h.value)-C(h.value),V=h.isTop?n(0)-l:n(m)+o+l;return(0,z.Iu)(b,V)}},leftTick:{y2:function(h){return l},transform:function(h){var b=a(h.value)-C(h.value),V=h.isTop?n(0)-l-l/2:n(m)+o+l-l/2;return(0,z.Iu)(b,V)}},rightTick:{y2:function(h){return l},transform:function(h){var T=a(h.value)-C(h.value)+Math.abs(a(h.value)-a(0)),y=h.isTop?n(0)-l-l/2:n(m)+o+l-l/2;return(0,z.Iu)(T,y)}},text:{attr:{x:function(h){return Math.ceil(Math.abs(a(s)-a(0))/2)},y:function(h){return h.isTop?-l/2-H:w+l/2},transform:function(h){var b=h.isTop?n(0)-l:n(m)+o+l;return(0,z.Iu)(0,b)}},style:(0,he.E_)(e.percentBarLabelSettings.fontProperties),maxWidth:L}},shapeLayout:{height:function(h){return h.highlight&&r?c:o},width:function(h){return Math.abs(a(E(h))-a(0))},y:function(h){return n(h.categoryIndex)+(h.highlight&&r?u:0)},x:function(h){var b=E(h);return a(b)-C(b)}},shapeLayoutWithoutHighlights:{height:function(h){return o},width:function(h){return Math.abs(a(h.value)-a(0))},y:function(h){return n(h.categoryIndex)+0},x:function(h){return a(h.value)-C(h.value)}},zeroShapeLayout:{height:function(h){return h.highlight&&r?c:o},width:function(h){return 0},y:function(h){return n(h.categoryIndex)+(h.highlight&&r?u:0)},x:function(h){return a((a.domain()[0]+a.domain()[1])/2)}},interactorLayout:{height:function(h){return h.highlight&&r?c:o},width:function(h){return p(E(h))},y:function(h){return n(h.categoryIndex)+(h.highlight&&r?u:0)},x:function(h){var b=p(E(h));return(L-b)/2}}}},i.drawDefaultShapes=function(e,t,r,n,a,s){(0,Ke.H4)(r,e.strokeSettings);var o=e.hasHighlights,l=Le.M.isInternetExplorerOrEdge(),c=a&&a.hasSelection(),u=r.selectAll(S.funnel.bars.selector).data(t,function(m){return m.key}).join(function(m){return m.append("rect").attr("role","option").attr("aria-label",function(L){return L.formattedTooltip}).attr("aria-selected",function(L){return L.selected}).attr("class",function(L){return L.highlight?we:S.funnel.bars.class})}).style("fill",function(m){return m.color}).style("fill-opacity",function(m){return(0,N.eR)(m.selected,m.highlight,c,o)}).attrs(n.shapeLayout);return a&&u.attr("tabindex",0).attr("focusable",!0).classed(N.Pg,!l),s&&u.classed(F.cy,!0).attr(F.Ez,"bars").attr(F.QZ,3).attr(F.CK,"MiniToolbar_All_Bars"),u},i.getFormatStringFromDataPoint=function(e){return null!=e.highlight?e.highlightFormatString:e.formatString},i.drawInteractorShapes=function(e,t,r){var n=e.filter(function(o){return!o.highlight&&r.interactorLayout.width(o)===i.MinimumInteractorSize}),a=t.selectAll(S.funnel.interactors.selector).data(n,function(o){return o.key}),s=a.enter().append("rect").attr("class",S.funnel.interactors.class).merge(a);return s.style("fill-opacity",0).attrs(r.interactorLayout),a.exit().remove(),s},i.drawPercentBarComponents=function(e,t,r,n,a){e.style("stroke",ne.v.getThemeColor(a,i.DefaultPercentBarStrokeColorName));var s=e.selectAll(S.percentBar.mainLine.selector).data(t);s.exit().remove(),s.enter().append("line").classed(S.percentBar.mainLine.class,!0).merge(s).attrs(r.percentBarLayout.mainLine);var o=e.selectAll(S.percentBar.leftTick.selector).data(t);o.exit().remove(),o.enter().append("line").classed(S.percentBar.leftTick.class,!0).merge(o).attrs(r.percentBarLayout.leftTick);var l=e.selectAll(S.percentBar.rightTick.selector).data(t);l.exit().remove(),l.enter().append("line").classed(S.percentBar.rightTick.class,!0).merge(l).attrs(r.percentBarLayout.rightTick);var c=e.selectAll(S.percentBar.text.selector).data(t),u=(0,Y.Z)("Percentage1");c.exit().remove(),c.enter().append("text").classed(S.percentBar.text.class,!0).merge(c).attrs(r.percentBarLayout.text.attr).styles(r.percentBarLayout.text.style).text(function(m){return(0,M.Gv)({label:m.percent,format:u,fontProperties:n.fontProperties,maxWidth:r.percentBarLayout.text.maxWidth})}).append("title").text(function(m){return We.dx.formatValue(m.percent,u)})},i.drawPercentBars=function(e,t,r,n,a){if(n||!e.dataPoints||e.categoryCount<2)i.drawPercentBarComponents(t,[],r,e.percentBarLabelSettings,a);else{var s=[e.dataPoints[e.hasHighlights?1:0],e.dataPoints[e.dataPoints.length-1]],o=E(s[0]);if(o<=0)i.drawPercentBarComponents(t,[],r,e.percentBarLabelSettings,a);else{var l=[{value:E(s[0]),percent:1,isTop:!0},{value:E(s[1]),percent:E(s[1])/o,isTop:!1}];i.drawPercentBarComponents(t,l,r,e.percentBarLabelSettings,a)}}},i.prototype.showCategoryLabels=function(){return!(this.funnelSmallViewPortProperties&&this.funnelSmallViewPortProperties.hideFunnelCategoryLabelsOnSmallViewPort&&this.currentViewport.height<this.funnelSmallViewPortProperties.minHeightFunnelCategoryLabelsVisible)&&this.data&&this.data.categoryAxisSettings&&this.data.categoryAxisSettings.show},i.addFunnelPercentsToTooltip=function(e,t,r,n,a,s){null!=n&&t.push({displayName:r.getLocalizedString("Funnel_PercentOfFirst"+(s?"_Highlight":"")),value:(0,Y.WU)(n,e)}),null!=a&&t.push({displayName:r.getLocalizedString("Funnel_PercentOfPrevious"+(s?"_Highlight":"")),value:(0,Y.WU)(a,e)})},i.getDefaultLabelSettings=function(e){return{show:!0,position:de.h.insideCenter,displayUnits:0,fontProperties:(0,M.bT)({style:e,textClassName:"lightLabel",noColor:!0}).fontProperties,labelStyle:se.aT,enableBackground:!1,backgroundColor:ne.v.getThemeColor(e,_e.U),backgroundTransparency:.5,percentagePrecision:U.Qc,bold:!1,italic:!1,underline:!1}},i.getDefaultPercentLabelSettings=function(e){return{show:!0,position:0,displayUnits:0,fontProperties:(0,M.bT)({labelColor:ne.v.getThemeColor(e,U.uQ),style:e,textClassName:"lightLabel"}).fontProperties,bold:!1,italic:!1,underline:!1}},i.getDefaultCategoryLabelSettings=function(e){return{show:!0,fontProperties:(0,M.bT)({labelColor:ne.v.getThemeColor(e,U.uQ),style:e,textClassName:"lightLabel"}).fontProperties,bold:!1,italic:!1,underline:!1}},i.prototype.getLabels=function(e,t){var r=[];if(this.data.dataLabelsSettings.show&&this.data.canShowDataLabels){var n=this.createLabelDataPoints(e.shapeLayout,this.data.dataLabelsSettings);r=new nt.nu({maximumOffset:U.wh,startingOffset:U.ki}).layout([{labelDataPoints:n,maxNumberOfLabels:n.length}],{width:this.currentViewport.width-t.left,height:this.currentViewport.height-t.top})}return r},i.prototype.createLabelDataPoints=function(e,t){var r,n,a=this.data,s=a.dataPoints;if(_.isEmpty(s))return[];var o=new Array,l=s[0],c=i.LabelInsidePosition,u=e.height(l);t.position&&t.position===de.h.outsideEnd&&(c=i.LabelOutsidePosition);var m=null;0===t.displayUnits&&(m=a.dataPoints.reduce(function(q,ee){return Math.abs(q.value)>Math.abs(ee.value)?q:ee}).value);var L=(0,Y.EO)(a.valuesMetadata[0],g.jP.general.formatString),C=(0,M.fI)(),p=a.dataLabelsSettings,j=p.labelStyle,H=p.fontProperties;_.isEmpty(H)&&(H=U.bL);var T,w=(0,he.qk)(H),v=(0,Y.Z)("Percentage"),h=(0,M.fI)(),b=_.clone(p),V=b.percentagePrecision;b.displayUnits=0,_.isFinite(V)&&(T=h.getOrCreate(v,b,null,b.percentagePrecision));for(var y=ne.v.getThemeColor(this.style,U.uQ),Q=ne.v.getThemeColor(this.style,U.pl),I=!0,O=0,ue=s;O<ue.length;O++){var x=ue[O],ve=E(x,!0),He=i.getFormatStringFromDataPoint(x);if(null!=ve&&(!a.hasHighlights||x.highlight)){var K=C.getOrCreate(He||L||l.labelFormatString,t,m).format(ve),f=void 0;if(I)f=K,I=!1;else{var Fe=T?T.format(x.percentOfFirst):(0,Y.WU)(x.percentOfFirst,v),X=T?T.format(x.percentOfPrevious):(0,Y.WU)(x.percentOfPrevious,v);switch(j){case se.oN:f=Fe;break;case se.r2:f=X;break;case se.MS:f=K+" ("+Fe+")";break;case se.mN:f=K+" ("+X+")";break;default:f=K}}w.text=f;var Me=re.b.measureSvgTextWidth(w),k=re.b.estimateSvgTextHeight(w),G=1,P={rect:{left:e.x(x),top:e.y(x),width:e.width(x),height:e.height(x)},orientation:i.LabelOrientation,validPositions:c},W=p.enableBackground,Z={isPreferred:!0,text:f,textSize:{width:Me,height:k},fontProperties:H,parentType:G,parentShape:P,insideFill:null!==(r=x.labelFill)&&void 0!==r?r:Q,outsideFill:null!==(n=x.labelFill)&&void 0!==n?n:y,identity:x.identity,backgroundColor:W?p.backgroundColor:void 0,backgroundTransparency:W?p.backgroundTransparency:void 0,hasBackground:W};0===x.value&&(P={validPositions:[256],point:{x:e.x(x),y:e.y(x)+u/2}},G=0,Z.parentShape=P,Z.parentType=G,Z.insideFill=Z.outsideFill),o.push(Z)}}return o},i.LabelInsidePosition=[1,16],i.LabelOutsidePosition=[16,4],i.LabelOrientation=3,i.DefaultPercentBarStrokeColorName="foregroundNeutralTertiary",i.DefaultBarOpacity=1,i.DimmedBarOpacity=.4,i.MinimumInteractorSize=15,i.InnerTextClassName="labelSeries",i.YAxisPadding=10,i.VisualClassName="funnelChart",i.BarToSpaceRatio=.1,i.MaxBarHeight=60,i.MinBarThickness=12,i.OverflowingHighlightWidthRatio=.5,i.MaxMarginFactor=.25,i.DefaultMargin={left:5,right:5,top:0,bottom:0},i}()}}]);