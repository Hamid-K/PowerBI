"use strict";(self.webpackChunkreportServerHostModern=self.webpackChunkreportServerHostModern||[]).push([["sparklines-dialog"],{61587:function(le,I,n){n.r(I),n.d(I,{SparklinesDialogModule:function(){return ue}});var s=n(81337),g=n(3468),d=n(67290),h=n(62458),f=n(46135),c=n(94419),t=n(74082),r=n(83723),a=n(44529),o=n(73221),l=n(67489),p=n(35510),T=n(59017),E=n(83317),x=n(59973),Q=n(14172),M=n(58295),i=n(50423),J=n(28199),H=n(26898),y=n(83008),N=n(13702),B=n(40823),R=n(29524),K=n(88023),ee=n(72525),se=n(72193),Z=n(17031),te=n(23983),u=n(65181),Y=n(93215),oe=n(77476),C=n(96777),k=n(59968),O=n(22844),F=n(65005),ne=n(76492),pe=n(58679),de=n(42189),be=n(9529);function Me(L,w){1&L&&i.\u0275\u0275element(0,"label",18)}var Ce=function(w){return{placeholderState:w}};function De(L,w){if(1&L){var b=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",9),i.\u0275\u0275element(1,"label",10),i.\u0275\u0275elementStart(2,"pbi-dropdown",11,12)(4,"pbi-dropdown-trigger")(5,"span",13),i.\u0275\u0275text(6),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(7,"div",14)(8,"pbi-field-list",15),i.\u0275\u0275listener("onNodeClick",function(ie){i.\u0275\u0275restoreView(b);var re=i.\u0275\u0275reference(3),ae=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(ae.onMeasureSelect(ie,re))}),i.\u0275\u0275pipe(9,"async"),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(10,"div",16),i.\u0275\u0275elementEnd()(),i.\u0275\u0275template(11,Me,1,0,"label",17),i.\u0275\u0275elementEnd()}if(2&L){var S=w.ngIf,P=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275property("options",P.dropdownOptions),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction1(10,Ce,!S.expr)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",S.displayName," "),i.\u0275\u0275advance(2),i.\u0275\u0275property("fieldListTree",i.\u0275\u0275pipeBind1(9,8,P.fieldListTree$))("scrollSelectedItemIntoViewOnInit",!0)("hasHighlights",!1)("options",P.fieldListTreeOptions),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",!S.isValid)}}function _e(L,w){if(1&L&&(i.\u0275\u0275elementStart(0,"pbi-dropdown-item",24)(1,"span"),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd()()),2&L){var b=w.$implicit;i.\u0275\u0275property("value",b),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(b.displayName)}}function xe(L,w){if(1&L){var b=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",19),i.\u0275\u0275element(1,"label",20),i.\u0275\u0275elementStart(2,"pbi-dropdown",21),i.\u0275\u0275listener("valueChange",function(A){var ie=i.\u0275\u0275restoreView(b);return i.\u0275\u0275resetView(ie.ngIf.selectedAggregate=A)}),i.\u0275\u0275elementStart(3,"pbi-dropdown-trigger")(4,"span",22),i.\u0275\u0275text(5),i.\u0275\u0275elementEnd()(),i.\u0275\u0275template(6,_e,3,2,"pbi-dropdown-item",23),i.\u0275\u0275elementEnd()()}if(2&L){var S=w.ngIf;i.\u0275\u0275advance(2),i.\u0275\u0275property("value",S.selectedAggregate)("isDisabled",null==S.availableAggregates),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate(null==S.selectedAggregate?null:S.selectedAggregate.displayName),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",S.availableAggregates)}}function Oe(L,w){1&L&&i.\u0275\u0275element(0,"label",31)}function Se(L,w){if(1&L){var b=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",25),i.\u0275\u0275element(1,"label",26),i.\u0275\u0275elementStart(2,"pbi-dropdown",27,28)(4,"pbi-dropdown-trigger")(5,"span",13),i.\u0275\u0275text(6),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(7,"div",29)(8,"pbi-field-list",15),i.\u0275\u0275listener("onNodeClick",function(ie){i.\u0275\u0275restoreView(b);var re=i.\u0275\u0275reference(3),ae=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(ae.onGroupingSelect(ie,re))}),i.\u0275\u0275pipe(9,"async"),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(10,"div",16),i.\u0275\u0275elementEnd()(),i.\u0275\u0275template(11,Oe,1,0,"label",30),i.\u0275\u0275elementEnd()}if(2&L){var S=w.ngIf,P=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275property("options",P.dropdownOptions),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction1(10,Ce,!S.expr)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",S.displayName," "),i.\u0275\u0275advance(2),i.\u0275\u0275property("fieldListTree",i.\u0275\u0275pipeBind1(9,8,P.fieldListTree$))("scrollSelectedItemIntoViewOnInit",!0)("hasHighlights",!1)("options",P.fieldListTreeOptions),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",!S.isValid)}}var Pe=function(){return{"aria-label":"Sparkline_Dialog_Description"}},Ee=function(){return{"aria-label":"Generic_LearnMore"}},Te=function(L){function w(b,S,P,A,ie,re,ae,ce,he,me,fe,ve,ye,ge,Ie){var W=L.call(this)||this;return W.aggrOps=b,W.conceptualSchemaProxy=S,W.dataSourcesService=P,W.displayNameService=A,W.fieldListTreeService=ie,W.captionSetting=re,W.draggableSetting=ae,W.inlineItemsSetting=ce,W.groupingDesignStateService=he,W.hiddenSetting=me,W.localizationService=fe,W.modelService=ve,W.templateDialogPayload=ye,W.tooltipStrategy=ge,W.dataSourceSerializer=Ie,W.dropdownOptions={dropdownHeight:184},W.fieldListTree$=W.fieldListTreeService.fieldListTree$,W.fieldListTreeOptions={editLabel:null,tooltip:W.tooltipStrategy},W.pbiTreeNodeSettingOptions={captionSetting:W.captionSetting,draggableSetting:W.draggableSetting,inlineItemsSetting:W.inlineItemsSetting,hiddenSetting:W.hiddenSetting,showMenuSetting:{canShowMenu:function(){return!1}}},W.measureInput$=new p.X({displayName:W.localizationService.get("Select_A_Field"),expr:void 0,isValid:!0}),W.groupingInput$=new p.X({displayName:W.localizationService.get("Select_A_Field"),expr:void 0,isValid:!0}),W.aggregateInput$=new p.X({availableAggregates:void 0,selectedAggregate:void 0}),W.fieldListTreeService.modelToPbiTreeConverterOptions=W.pbiTreeNodeSettingOptions,W}return(0,s.ZT)(w,L),w.prototype.ngOnInit=function(){return(0,s.mG)(this,void 0,void 0,function(){var b,S,P,A,ie,re=this;return(0,s.Jh)(this,function(ae){switch(ae.label){case 0:return this.input=this.templateDialogPayload.input,b=this.dataSourceSerializer.deserializeDataSources(this.input.dataSources),this.dataSourcesService.set(b),(0,T.aj)([this.measureInput$,this.groupingInput$]).pipe((0,E.R)(this.onDestroy$)).subscribe(function(ce){var he=ce[0],me=ce[1];re.templateDialogPayload.setOkButtonState(!(he.expr&&me.expr&&he.isValid&&me.isValid))}),(S=this.input.selectedMeasure)?(P=g.ib.deserializeExpr(S),[4,this.updateMeasureInput(P)]):[3,2];case 1:ae.sent(),ae.label=2;case 2:return(A=this.input.selectedGrouping)?(ie=g.ib.deserializeExpr(A),[4,this.updateGroupingInput(ie)]):[3,4];case 3:ae.sent(),ae.label=4;case 4:return this.templateDialogPayload.onOkButtonClick=function(){return re.onCommit()},[4,this.modelService.update([])];case 5:return ae.sent(),this.modelService.modelChange$.pipe((0,x.h)(function(ce){return!!ce?.model}),(0,Q.U)(function(ce){return ce.model}),(0,E.R)(this.onDestroy$)).subscribe(function(ce){return re.fieldListTreeService.setOrUpdateFieldListTreeModel(ce,[])}),[2]}})})},w.prototype.ngOnDestroy=function(){return this.measureInput$.complete(),this.groupingInput$.complete(),this.aggregateInput$.complete(),L.prototype.ngOnDestroy.call(this)},w.prototype.onMeasureSelect=function(b,S){return(0,s.mG)(this,void 0,void 0,function(){var P;return(0,s.Jh)(this,function(A){switch(A.label){case 0:return[4,this.getExprFromNodeSelection(b)];case 1:return(P=A.sent())?[4,this.updateMeasureInput(P)]:[2];case 2:return A.sent(),S.closeDropdown(),[2]}})})},w.prototype.onGroupingSelect=function(b,S){return(0,s.mG)(this,void 0,void 0,function(){var P;return(0,s.Jh)(this,function(A){switch(A.label){case 0:return[4,this.getExprFromNodeSelection(b)];case 1:return(P=A.sent())?[4,this.updateGroupingInput(P)]:[2];case 2:return A.sent(),S.closeDropdown(),[2]}})})},w.prototype.updateMeasureInput=function(b){return(0,s.mG)(this,void 0,void 0,function(){var S,P,A,ie,re,ae,ce,he,me,fe,ve;return(0,s.Jh)(this,function(ye){switch(ye.label){case 0:return[4,this.conceptualSchemaProxy.get(this.dataSourcesService.get())];case 1:return S=ye.sent(),A=(0,d.Hh)(b,S,this.aggrOps,!1,f.DW.Measure,[{numeric:!0}],this.localizationService),_.isEmpty(A)||(P=_.map(A,function(ge){return{displayName:ge.text,value:ge.key.aggregate}})),ie=b.getMetadata(S),re=ie?.type,(0,t.iV)(b)&&re?.numeric?(h.fF.assertNonEmpty(P,"if expr has aggregate set, then it should have available aggregates"),ae=_.find(P,function(ge){return ge.value===b.func})):(ce=b,(0,t.iV)(b)&&(ce=b.arg),null!=(he=this.aggregateInput$.value.selectedAggregate)&&_.find(P,function(ge){return ge.value===he.value})?ae=he:null!=(me=this.aggrOps.defaultAggregate(ce,S,!0,[{numeric:!0}]))&&(ae=_.find(P,function(ge){return ge.value===me}))),fe=(0,t.iV)(b)?b.arg:b,ve=this.displayNameService.getDisplayName(fe,S,void 0),this.measureInput$.next({displayName:ve,expr:fe,isValid:(0,t.kb)(fe)||null!=ae}),this.aggregateInput$.next({availableAggregates:P,selectedAggregate:ae}),[2]}})})},w.prototype.updateGroupingInput=function(b){return(0,s.mG)(this,void 0,void 0,function(){var S,P;return(0,s.Jh)(this,function(A){switch(A.label){case 0:return[4,this.conceptualSchemaProxy.get(this.dataSourcesService.get())];case 1:return S=A.sent(),P=this.displayNameService.getDisplayName(b,S,void 0),this.groupingInput$.next({expr:b,displayName:P,isValid:!(0,M.k)(b)}),[2]}})})},w.prototype.getExprFromNodeSelection=function(b){var S;return(0,s.mG)(this,void 0,void 0,function(){var P,A;return(0,s.Jh)(this,function(ie){return P=null===(S=b?.node)||void 0===S?void 0:S.data,(A=(0,a.Sd)(P,this.groupingDesignStateService))?(0,t.Lk)(A)||(0,t.y3)(A)?[2]:[2,A]:[2]})})},w.prototype.onCommit=function(){var b,S=this.measureInput$.value.expr,P=null===(b=this.aggregateInput$.value.selectedAggregate)||void 0===b?void 0:b.value,A=this.groupingInput$.value.expr,ie=null!=P?(0,c.m_)(S,P):S;return new Promise(function(re,ae){re({grouping:g.ib.serializeExpr(A),measure:g.ib.serializeExpr(ie)})})},w.\u0275fac=function(S){return new(S||w)(i.\u0275\u0275directiveInject(J.C),i.\u0275\u0275directiveInject(H.i),i.\u0275\u0275directiveInject(y.D),i.\u0275\u0275directiveInject(N.O),i.\u0275\u0275directiveInject(r.p),i.\u0275\u0275directiveInject(R.B),i.\u0275\u0275directiveInject(K.F),i.\u0275\u0275directiveInject(ee.wt),i.\u0275\u0275directiveInject(te.AA),i.\u0275\u0275directiveInject(se.J),i.\u0275\u0275directiveInject(u.o),i.\u0275\u0275directiveInject(Y.b),i.\u0275\u0275directiveInject(l.x),i.\u0275\u0275directiveInject(Z.Z),i.\u0275\u0275directiveInject(B._))},w.\u0275cmp=i.\u0275\u0275defineComponent({type:w,selectors:[["ng-component"]],features:[i.\u0275\u0275ProvidersFeature([r.p,l.x]),i.\u0275\u0275InheritDefinitionFeature],decls:13,vars:14,consts:[[1,"sparklineDialogContent"],[1,"header"],["localize","Sparkline_Dialog_Description","tabindex","0",3,"localizeAttr"],["target","_blank","href","https://go.microsoft.com/fwlink/?linkid=2173413","rel","noreferrer noopener",1,"pbi-internal-link",3,"localize","localizeAttr"],[1,"linkGlyph","glyphicon","pbi-glyph-miniexpand","glyph-mini"],[1,"inputContainer","measureInputContainer"],["class","measureFieldContainer",4,"ngIf"],["class","measureSummarizationContainer",4,"ngIf"],["class","inputContainer groupingInputContainer",4,"ngIf"],[1,"measureFieldContainer"],["localize","Visual_YAxis_Hyphen","id","sparklineMeasureLabel"],["aria-labelledby","sparklineMeasureLabel","aria-describedby","sparklineMeasureError","dropdown-type","field-list",3,"options"],["dropdownMeasureRef",""],[1,"dropdownSelection",3,"ngClass"],[1,"sparklinesDialogFieldList","measureFieldList"],["focus-nav-mode","Browser",1,"fieldList","themeableElement",3,"fieldListTree","scrollSelectedItemIntoViewOnInit","hasHighlights","options","onNodeClick"],["tabindex","0",1,"container-stop-bottom"],["id","sparklineMeasureError","class","error","localize","Sparkline_Dialog_InvalidY",4,"ngIf"],["id","sparklineMeasureError","localize","Sparkline_Dialog_InvalidY",1,"error"],[1,"measureSummarizationContainer"],["localize","Summarization","id","sparklineAggregateLabel"],["aria-labelledby","sparklineAggregateLabel",3,"value","isDisabled","valueChange"],[1,"dropdownSelection"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"inputContainer","groupingInputContainer"],["localize","Visual_XAxis_Hyphen","id","sparklineGroupingLabel"],["aria-labelledby","sparklineGroupingLabel","aria-describedby","sparklineGroupingError","dropdown-type","field-list",3,"options"],["dropdownGroupingRef",""],[1,"sparklinesDialogFieldList"],["id","sparklineGroupingError","class","error","localize","Sparkline_Dialog_InvalidX",4,"ngIf"],["id","sparklineGroupingError","localize","Sparkline_Dialog_InvalidX",1,"error"]],template:function(S,P){1&S&&(i.\u0275\u0275elementStart(0,"template-dialog")(1,"section",0)(2,"div",1),i.\u0275\u0275element(3,"span",2)(4,"a",3)(5,"i",4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(6,"div",5),i.\u0275\u0275template(7,De,12,12,"div",6),i.\u0275\u0275pipe(8,"async"),i.\u0275\u0275template(9,xe,7,4,"div",7),i.\u0275\u0275pipe(10,"async"),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(11,Se,12,12,"div",8),i.\u0275\u0275pipe(12,"async"),i.\u0275\u0275elementEnd()()),2&S&&(i.\u0275\u0275advance(3),i.\u0275\u0275property("localizeAttr",i.\u0275\u0275pureFunction0(12,Pe)),i.\u0275\u0275advance(1),i.\u0275\u0275property("localize","Generic_LearnMore")("localizeAttr",i.\u0275\u0275pureFunction0(13,Ee)),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(8,6,P.measureInput$)),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(10,8,P.aggregateInput$)),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(12,10,P.groupingInput$)))},dependencies:[oe.NgClass,oe.NgForOf,oe.NgIf,C.J,k.X,O.b,F.l,ne.H,pe.I,de.r,be._,ne.T,oe.AsyncPipe],styles:['.sparklineDialogContent[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:120px;max-width:400px}.sparklineDialogContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{line-height:initial}.sparklineDialogContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin:0 4px}.sparklineDialogContent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .linkGlyph[_ngcontent-%COMP%]{color:var(--fluent-theme-link-color, #0078D4)}.sparklineDialogContent[_ngcontent-%COMP%]   .inputContainer[_ngcontent-%COMP%]{margin-top:16px;display:flex}.sparklineDialogContent[_ngcontent-%COMP%]   .inputContainer[_ngcontent-%COMP%]   pbi-dropdown[_ngcontent-%COMP%]{width:100%}.sparklineDialogContent[_ngcontent-%COMP%]   .inputContainer[_ngcontent-%COMP%]   pbi-dropdown[_ngcontent-%COMP%]   .dropdownSelection.placeholderState[_ngcontent-%COMP%]{color:var(--gray-130, #605E5C)}.sparklineDialogContent[_ngcontent-%COMP%]   .inputContainer[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-semi-bold, 600);margin-bottom:4px}.sparklineDialogContent[_ngcontent-%COMP%]   .inputContainer[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{margin-top:4px;color:var(--fluent-theme-error-dark-color, #A80000);font-size:12px}.sparklineDialogContent[_ngcontent-%COMP%]   .inputContainer.groupingInputContainer[_ngcontent-%COMP%]{flex-direction:column}.sparklineDialogContent[_ngcontent-%COMP%]   .inputContainer.measureInputContainer[_ngcontent-%COMP%]   .measureFieldContainer[_ngcontent-%COMP%]{width:60%;display:flex;flex-direction:column}.sparklineDialogContent[_ngcontent-%COMP%]   .inputContainer.measureInputContainer[_ngcontent-%COMP%]   .measureSummarizationContainer[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}html:not([dir="rtl"])[_nghost-%COMP%]   .sparklineDialogContent[_ngcontent-%COMP%]   .inputContainer.measureInputContainer[_ngcontent-%COMP%]   .measureSummarizationContainer[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .sparklineDialogContent[_ngcontent-%COMP%]   .inputContainer.measureInputContainer[_ngcontent-%COMP%]   .measureSummarizationContainer[_ngcontent-%COMP%]{margin-left:8px}html[dir="rtl"][_nghost-%COMP%]   .sparklineDialogContent[_ngcontent-%COMP%]   .inputContainer.measureInputContainer[_ngcontent-%COMP%]   .measureSummarizationContainer[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .sparklineDialogContent[_ngcontent-%COMP%]   .inputContainer.measureInputContainer[_ngcontent-%COMP%]   .measureSummarizationContainer[_ngcontent-%COMP%]{margin-right:8px}.sparklinesDialogFieldList[_ngcontent-%COMP%]   pbi-field-list[_ngcontent-%COMP%]{position:absolute;box-shadow:var(--fluent-shadow-depth8, 0px 0px 2px var(--colorNeutralShadowAmbient), 0px 4px 8px var(--colorNeutralShadowKey));padding:4px 4px 8px;box-sizing:border-box;width:100%;height:100%;background-color:var(--fluent-theme-white-color, #FFF);border:1px solid transparent}.container-stop-bottom[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;pointer-events:none}'],changeDetection:0}),w}(o.w),m=n(17174),v=n(11494),D=n(88940),j=n(79061),U=n(41920),z=n(76966),q=n(6015),V=n(63654),G=n(39433),X=n(35284),ue=function(){function L(){}return L.\u0275fac=function(b){return new(b||L)},L.\u0275mod=i.\u0275\u0275defineNgModule({type:L}),L.\u0275inj=i.\u0275\u0275defineInjector({providers:(0,s.ev)((0,s.ev)((0,s.ev)([],D.H,!0),U.U,!0),[y.D,v.J,te.AA,Y.b],!1),imports:[oe.CommonModule,z.c.withManifest([{componentIdentifier:"SparklinesDialog",componentType:Te}]),j.v,G.t,X.J,V.X,q.C,m.u5]}),L}()},412:function(le,I,n){n.d(I,{W:function(){return f}});var s=n(93247),e=n(9738),g=n(70863),d=n(50423),h=n(33565),f=function(){function c(t,r){this.deleteModelItemService=t,this.modelingSelectionService=r}return c.prototype.treeNodeKeyDown=function(t){return this.handleKeyDownEvent(t.sourceEvent,t.tree)},c.prototype.backgroundKeyDown=function(t){this.handleKeyDownEvent(t.sourceEvent,t.tree)},c.prototype.handleKeyDownEvent=function(t,r){return t.keyCode===s.yY?!!this.deleteModelItemService&&(t.stopPropagation(),this.deleteModelItemService.deleteAllFromModel(this.modelingSelectionService.selection,!0),!0):t.keyCode===s.hY?(this.modelingSelectionService.clear(),!0):!(t.keyCode!==s.A||!t.ctrlKey||(t.preventDefault(),t.stopPropagation(),this.selectAll(r),0))},c.prototype.selectAll=function(t){this.modelingSelectionService.selectAll(t.treeControl.dataNodes.map(function(r){return r.node.data}).filter(function(r){return(0,g.wb)(r)}),!0)},c.\u0275fac=function(r){return new(r||c)(d.\u0275\u0275inject(h.c,8),d.\u0275\u0275inject(e.W6))},c.\u0275prov=d.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac}),c}()},34162:function(le,I,n){n.d(I,{E:function(){return f}});var s=n(64560),e={type:s.iB.Divider},g=n(92882),d=n(50423),h=n(65181),f=function(){function c(t){this.localizationService=t}return c.prototype.getMenu=function(t,r,a){return{items:this.getMenuItems(t,r,a)}},c.prototype.getMenuItems=function(t,r,a){for(var o=[],l=0,p=r;l<p.length;l++){var E=this.getMenuSection(t,p[l],a);o.length>0&&E.length>0&&o.push(e),o.push.apply(o,E)}return o},c.prototype.getMenuSection=function(t,r,a){for(var o,l=[],p=0,T=r.items;p<T.length;p++){var E=T[p],x=a.get(E.id);if(x){var Q={id:E.id,type:E.type,text:this.localizationService.format(E.text),tooltip:this.localizationService.format(E.tooltip),disabled:x.enabled&&!x.enabled(t)};if(x.getIcon&&(Q.icon=x.getIcon(t)),E.type===s.iB.SubMenu){var M=Q;if(E.menu&&(0,g.Q)(E.menu)&&E.menu.items&&(M.menu={items:this.getMenuSection(t,{items:E.menu.items},a)}),x.getSubItems){var i=x.getSubItems(t);i.length>0&&(M.menu&&(0,g.Q)(M.menu)?(o=M.menu.items).push.apply(o,i):M.menu={items:i})}M.menu&&(0,g.Q)(M.menu)&&M.menu.items.length>0&&l.push(Q)}else l.push(Q)}}return l},c.\u0275fac=function(r){return new(r||c)(d.\u0275\u0275inject(h.o))},c.\u0275prov=d.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac}),c}()},17031:function(le,I,n){n.d(I,{Z:function(){return a}});var s=n(14335),e=n(50423),g=n(77476);function d(o,l){1&o&&e.\u0275\u0275elementContainer(0)}var h=function(l){return{$implicit:l}};function f(o,l){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,d,1,0,"ng-container",2),e.\u0275\u0275elementContainerEnd()),2&o){var p=l.$implicit;e.\u0275\u0275nextContext();var T=e.\u0275\u0275reference(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngTemplateOutlet",T)("ngTemplateOutletContext",e.\u0275\u0275pureFunction1(2,h,p))}}function c(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"div",3)(1,"div",4),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",5),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()),2&o){var p=l.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(p.title),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(p.value)}}var t=function(){function o(l){this.content=l,this.tooltipData=[],this.tooltipData=l}return o.\u0275fac=function(p){return new(p||o)(e.\u0275\u0275directiveInject(s.HK))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["model-object-tooltip"]],decls:3,vars:1,consts:[[4,"ngFor","ngForOf"],["tooltipRow",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"tooltip-row"],[1,"tooltip-title-cell"],[1,"tooltip-value-cell"]],template:function(p,T){1&p&&(e.\u0275\u0275template(0,f,2,4,"ng-container",0),e.\u0275\u0275template(1,c,5,2,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)),2&p&&e.\u0275\u0275property("ngForOf",T.tooltipData)},dependencies:[g.NgForOf,g.NgTemplateOutlet],styles:[".tooltip-row[_ngcontent-%COMP%]{display:table-row;font-size:12px}.tooltip-title-cell[_ngcontent-%COMP%]{display:table-cell;word-wrap:break-word;font-weight:var(--font-weight-regular, 400);max-width:260px;padding-top:1px;padding-bottom:1px;text-align:right}.tooltip-value-cell[_ngcontent-%COMP%]{display:table-cell;word-wrap:break-word;font-weight:var(--font-weight-semi-bold, 600);max-width:260px;padding-top:1px;padding-bottom:1px;padding-left:12px;text-align:left;white-space:break-spaces}"]}),o}(),r=n(65534),a=function(){function o(l){this.tooltipFactory=l,this.getTooltip=function(){return t}}return o.prototype.getTooltipComponentData=function(l){return this.tooltipFactory.getTooltipData(l.flatNode.node.data)},o.\u0275fac=function(p){return new(p||o)(e.\u0275\u0275inject(r.n))},o.\u0275prov=e.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac}),o}()},81141:function(le,I,n){n.d(I,{x:function(){return g}});var s=n(70863),e=n(50423),g=function(){function d(){}return d.prototype.isCheckable=function(h){if(!s.wb(h))return!!(s.t3(h)||s.kb(h)||s.y3(h)||s.ez(h))},d.\u0275prov=e.\u0275\u0275defineInjectable({token:d,factory:d.\u0275fac=function(f){return new(f||d)}}),d}()},88023:function(le,I,n){n.d(I,{F:function(){return g}});var s=n(70863),e=n(50423),g=function(){function d(){}return d.prototype.isDraggable=function(h){return!s.wb(h)&&!!(s.t3(h)||s.kb(h)||s.y3(h)||s.ez(h))},d.\u0275prov=e.\u0275\u0275defineInjectable({token:d,factory:d.\u0275fac=function(f){return new(f||d)}}),d}()},72525:function(le,I,n){n.d(I,{VI:function(){return a},wt:function(){return r}});var s=n(81337),e=n(70863),g=n(59725),d=n(82332),h=n(50423),f=n(65181),r=function(){function o(l){this.localizationService=l,this.errorInlineItem={icon:{type:0,glyph:d.RB},label:this.localizationService.format("FieldListMenuItem_Error"),type:g.Q_.Icon,id:d.LA}}return o.prototype.getInlineItems=function(l){var p=[];return p.push.apply(p,this.getErrorInLineItem(l)),p},o.prototype.getErrorInLineItem=function(l){var p=[];return e.wb(l)&&l.isErrorState&&p.push(l.errorMessage?(0,s.pi)((0,s.pi)({},this.errorInlineItem),{label:l.errorMessage}):this.errorInlineItem),e.kb(l)&&l.isErrorState&&p.push((0,s.pi)((0,s.pi)({},this.errorInlineItem),{label:l.errorMessage})),e.t3(l)&&l.isErrorState&&p.push(this.errorInlineItem),p},o.\u0275fac=function(p){return new(p||o)(h.\u0275\u0275inject(f.o))},o.\u0275prov=h.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac}),o}(),a=function(){function o(l,p){this.localizationService=l,this.inlineItemSetting=p,this.hiddenInlineItem={icon:{type:0,glyph:d.cD},label:void 0,type:g.Q_.Button,id:d.zB},this.viewInlineItem={icon:{type:0,glyph:d.qV},label:void 0,type:g.Q_.Button,id:d.SO},this.hideInlineItemTooltip="Field_ShowInReportView",this.viewInlineItemTooltip="FieldListMenuItem_HideInReportViewTooltip"}return Object.defineProperty(o.prototype,"addHiddenItemsOnly",{set:function(p){this._addHiddenItemsOnly=p},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"hideInlineItemTooltip",{set:function(p){this.hiddenInlineItem.label=this.localizationService.format(p)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"viewInlineItemTooltip",{set:function(p){this.viewInlineItem.label=this.localizationService.format(p)},enumerable:!1,configurable:!0}),o.prototype.getInlineItems=function(l){var p=[];return p.push.apply(p,this.inlineItemSetting.getInlineItems(l)),p.push.apply(p,this.getShowOrHideInLineItem(l)),p},o.prototype.getShowOrHideInLineItem=function(l){var p,T=[];if(e.Ov(l))return!(null===(p=l?.table)||void 0===p)&&p.isHidden&&T.push((0,s.pi)((0,s.pi)({},this.hiddenInlineItem),{type:g.Q_.Icon})),T;if(e.wb(l)||e.t3(l)||e.kb(l)||e.y3(l)){if(l.canEdit&&(0,e.uO)(l))l.isHidden?T.push(this.hiddenInlineItem):this._addHiddenItemsOnly||T.push((0,s.pi)((0,s.pi)({},this.viewInlineItem),{displayOnHover:!0}));else{var E=this.localizationService.get("FieldListMenuItem_ShowHideDisabledForItem");l.isHidden?T.push((0,s.pi)((0,s.pi)({},this.hiddenInlineItem),{type:g.Q_.Icon,label:E})):this._addHiddenItemsOnly||T.push((0,s.pi)((0,s.pi)({},this.viewInlineItem),{type:g.Q_.Icon,displayOnHover:!0,label:E}))}return T}return e.ez(l)&&l.hierarchy.isHidden&&T.push((0,s.pi)((0,s.pi)({},this.hiddenInlineItem),{type:g.Q_.Icon})),T},o.\u0275fac=function(p){return new(p||o)(h.\u0275\u0275inject(f.o),h.\u0275\u0275inject(r))},o.\u0275prov=h.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac}),o}()},65534:function(le,I,n){n.d(I,{n:function(){return f}});var s=n(29524),e=n(69615),g=n(70863),d=n(50423),h=n(65181),f=function(){function c(t,r){this.localizationService=t,this.captionSettingStrategy=r}return c.prototype.getTooltipData=function(t){return(0,g.wb)(t)?this.populateTableTooltip(t):(0,g.t3)(t)?this.populateColumnTooltip(t):(0,g.kb)(t)?this.populateMeasureTooltip(t):(0,g.jz)(t)?this.populateKpiTooltip(t):(0,g.y3)(t)?this.populateHierarchyTooltip(t):(0,g.ez)(t)?this.populateHierarchyLevelTooltip(t):(0,g.Mx)(t)?this.populateRelationshipTooltip(t):(0,g.Ao)(t)?this.populatePerspectiveTooltip(t):(0,g.KF)(t)?this.populateCultureTooltip(t):(0,g.yR)(t)?this.populatePartitionTooltip(t):(0,g.RF)(t)?this.populateCalculationItemTooltip(t):(0,g.OP)(t)?this.populateModelRoleTooltip(t):(0,g.CV)(t)?this.populateCalendarTooltip(t):[]},c.prototype.populateTableTooltip=function(t){var r=[];r.push({title:this.localizationService.get("Name"),value:this.getTableCaption(t)});var a=this.storageMode(t);a&&r.push({title:this.localizationService.get("StorageModeLabel"),value:this.localizationService.get(a)}),t.island&&(this.shouldShowTypeDescription(t)&&r.push({title:this.localizationService.get("ServerError_PersonalGateway_DataSourceKindLabel"),value:t.island.typeDescription}),this.shouldShowServerName(t)&&r.push({title:this.localizationService.get("DirectQueryContentProvider_ServerName"),value:t.island.serverName},{title:this.localizationService.get("DirectQueryContentProvider_DatabaseName"),value:t.island.databaseName}),this.shouldShowIslandName(t)&&r.push({title:this.localizationService.get("AnalysisServer_ServerName"),value:t.island.name})),this.shouldShowRefreshedTime(t)&&r.push({title:this.localizationService.get("Data_Refreshed_Label"),value:this.refreshedTime(t)});var o=this.captionSettingStrategy?this.captionSettingStrategy.getDescription(t):t.description;return o&&r.push({title:this.localizationService.get("Description"),value:o}),r},c.prototype.populateColumnTooltip=function(t){var r=[],a=this.captionSettingStrategy?this.captionSettingStrategy.getCaption(t):t.name,o=this.captionSettingStrategy?this.captionSettingStrategy.getCaption(t.table):t.table.name;r.push({title:this.localizationService.get("Name"),value:o?"'".concat(o,"'[").concat(a,"]"):a});var l=this.captionSettingStrategy?this.captionSettingStrategy.getDescription(t):t.description;return l&&r.push({title:this.localizationService.get("Description"),value:l}),r},c.prototype.populateMeasureTooltip=function(t){var r=[],a=this.captionSettingStrategy?this.captionSettingStrategy.getCaption(t):t.name;r.push({title:this.localizationService.get("Name"),value:"[".concat(a,"]")});var o=this.captionSettingStrategy?this.captionSettingStrategy.getDescription(t):t.description;return o&&r.push({title:this.localizationService.get("Description"),value:o}),r},c.prototype.populateKpiTooltip=function(t){var r=[],a=this.captionSettingStrategy?this.captionSettingStrategy.getCaption(t):t.name,o=this.getTableCaption(t.table);r.push({title:this.localizationService.get("Name"),value:o?"'".concat(o,"'[").concat(a,"]"):a});var l=this.captionSettingStrategy?this.captionSettingStrategy.getDescription(t):t.description;return l&&r.push({title:this.localizationService.get("Description"),value:l}),r},c.prototype.populateHierarchyTooltip=function(t){var r=[];r.push({title:this.localizationService.get("Name"),value:this.captionSettingStrategy?this.captionSettingStrategy.getCaption(t):t.name});var a=this.captionSettingStrategy?this.captionSettingStrategy.getDescription(t):t.description;return a&&r.push({title:this.localizationService.get("Description"),value:a}),r},c.prototype.populateHierarchyLevelTooltip=function(t){var r=[],a=this.getTableCaption(t.hierarchy.table),o=this.captionSettingStrategy?this.captionSettingStrategy.getCaption(t):t.name,l=o;t.column&&(l=this.captionSettingStrategy?this.captionSettingStrategy.getCaption(t.column):t.column.name),r.push({title:this.localizationService.get("Name"),value:"'".concat(a,"'[").concat(o,"]")}),r.push({title:this.localizationService.get("Base_field"),value:"[".concat(l,"]")});var p=this.captionSettingStrategy?this.captionSettingStrategy.getCaption(t):t.description;return!p&&t.column&&(p=this.captionSettingStrategy?this.captionSettingStrategy.getDescription(t.column):t.column.description),p&&r.push({title:this.localizationService.get("Description"),value:p}),r},c.prototype.populateRelationshipTooltip=function(t){var r=[],a=this.captionSettingStrategy?this.captionSettingStrategy.getCaption(t):t.displayName;return r.push({title:this.localizationService.get("Name"),value:"[".concat(a,"]")}),r},c.prototype.populatePerspectiveTooltip=function(t){var r=[],a=this.captionSettingStrategy?this.captionSettingStrategy.getCaption(t):t.name;return r.push({title:this.localizationService.get("Name"),value:"[".concat(a,"]")}),r},c.prototype.populateCultureTooltip=function(t){var r=[],a=this.captionSettingStrategy?this.captionSettingStrategy.getCaption(t):t.name;return r.push({title:this.localizationService.get("Name"),value:"[".concat(a,"]")}),r},c.prototype.populatePartitionTooltip=function(t){var r=[],a=this.captionSettingStrategy?this.captionSettingStrategy.getCaption(t):t.name;return r.push({title:this.localizationService.get("Name"),value:"[".concat(a,"]")}),r},c.prototype.populateCalculationItemTooltip=function(t){var r=[],a=this.captionSettingStrategy?this.captionSettingStrategy.getCaption(t):t.name;return r.push({title:this.localizationService.get("Name"),value:"[".concat(a,"]")}),r},c.prototype.populateModelRoleTooltip=function(t){var r=[],a=this.captionSettingStrategy?this.captionSettingStrategy.getCaption(t):t.name;return r.push({title:this.localizationService.get("Name"),value:"[".concat(a,"]")}),r},c.prototype.populateCalendarTooltip=function(t){var r=[],a=this.captionSettingStrategy?this.captionSettingStrategy.getCaption(t):t.name;return r.push({title:this.localizationService.get("Name"),value:"[".concat(a,"]")}),r},c.prototype.shouldShowTypeDescription=function(t){return!t.island.isImportIsland},c.prototype.shouldShowServerName=function(t){return!t.island.isImportIsland&&!!t.island.serverName&&!!t.island.databaseName},c.prototype.shouldShowIslandName=function(t){return!(t.island.isImportIsland||t.island.serverName&&t.island.databaseName)},c.prototype.shouldShowRefreshedTime=function(t){return!!this.refreshedTime(t)},c.prototype.storageMode=function(t){return"Import"===t.storageMode?"StorageMode_Import":"DirectQuery"===t.storageMode?"StorageMode_DirectQuery":"Dual"===t.storageMode?"StorageMode_Dual":"DirectLake"===t.storageMode?"StorageMode_DirectLake":void 0},c.prototype.refreshedTime=function(t){if(t.refreshedTime)return(0,e.jC)(t.refreshedTime).toLocaleDateString(this.localizationService.currentLanguageLocale,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})},c.prototype.getTableCaption=function(t){return this.captionSettingStrategy?this.captionSettingStrategy.getCaption(t):t.name},c.\u0275fac=function(r){return new(r||c)(d.\u0275\u0275inject(h.o),d.\u0275\u0275inject(s.B,8))},c.\u0275prov=d.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac}),c}()},41920:function(le,I,n){n.d(I,{U:function(){return o}});var s=n(81141),e=n(88023),g=n(72525),d=n(412),h=n(34162),f=n(65534),c=n(17031),t=n(29524),r=n(72193),a=n(9738),o=[s.x,e.F,g.wt,d.W,h.E,f.n,c.Z,t.B,r.J,{provide:a.fc,useClass:a.$x}]},33565:function(le,I,n){n.d(I,{c:function(){return H}});var E,s=n(81337),e=n(68082),g=n(53439),d=n(50423),h=new d.InjectionToken("ViewScopedUserSettingsService"),t="hideDeleteRelationshipConfirmation",r=function(y){return y.DeleteModelItem="DeleteModelItem",y}({}),a=n(74611),o=n(50550),l=n(62458),p=n(65843),T=n(55375);!function(y){var N="COMMANDS_DELETE_TABLE",te="ListJoin_Separator";function Se(m,v){return(m=m.sort().map(function(D){return'"'+D+'"'})).join(v.get(te))}y.getDeleteConfirmationText=function(m,v){var D=(0,o.EB)(m.map(function(X){return(0,a.cO)(X)?(0,a.d3)(X.fromTable.name,X.fromColumn.name,X.fromCardinality,X.toTable.name,X.toColumn.name,X.toCardinality):X.name})).join(v.get(te)+" "),j=v.format("DeleteConfirmationMultiple",D);1===m.length&&(j="Relationship"===m[0].objectType?v.get("DeleteRelationshipConfirmationMessage"):"Calendar"===m[0].objectType?v.get("DeleteCalendarConfirmationMessage"):v.format("DeleteMeasurePrompt",D));var U=function(m,v){for(var D=(0,a.Y3)((0,a.L9)(m),v),j=0,U=m;j<U.length;j++){var z=U[j];if((0,a.t3)(z)&&z.table.refreshPolicy&&"DateTime"===z.dataType){D.push(v.get("IncrementalRefreshPolicy"));break}}return D.filter(function(G){return!m.find(function(X){return X.name===G})})}(m,v);if(0!==U.length){var z=(0,o.EB)(U).join(v.get(te)+" ");j=v.format(1===U.length?"DeleteConfirmationWithDependents":"DeleteConfirmationMultipleWithDependents",D,z)}var q=function(m){for(var v=new Set,D=0,j=m;D<j.length;D++){var U=j[D];if((0,a.t3)(U)){var z=U,q=z.table.description,V=(0,a.aP)(z.table,z),G=(0,a.q1)(z.table,z);(0,a.oQ)(z.table,q,V?.name,G?.name)&&v.add(z.table.name)}}return Array.from(v)}(m);if(0!==q.length){var V=(0,o.EB)(q).join(v.get(te)+" ");j=j+"<br/><br/>"+v.format("DeleteConfirmationForCuration",V)}return j},y.showConfirmDialogToDeleteTableWithDependents=function(m,v,D,j){return(0,s.mG)(this,void 0,void 0,function(){var U;return(0,s.Jh)(this,function(V){switch(V.label){case 0:return U=function(m,v,D){for(var j=new Set,U=0,z=m;U<z.length;U++)j.add(z[U].name);for(var V=[],G=[],X=0,ue=Object.keys(v);X<ue.length;X++)for(var L=ue[X],b=!1,S=0,P=v[L];S<P.length;S++){var A=P[S];j.has(A)||(b||(V.push(L),b=!0),G.push(A))}if(0!==V.length){l.fF.assert(function(){return G.length>0},"If some tables are remaining, there should have dependents remaining as well");var ie=Se(G,D);if(1===V.length)return 1===G.length?D.format("DeleteQueryWithOneDependent",V[0],G[0]):D.format("DeleteQueryWithMultipleDependents",V[0],ie);var re=Se(V,D);return D.format("DeleteQueriesWithMultipleDependents",re,ie)}}(m,v,D),U?[4,T.Z.buildOKCancelDialogWithList(D.get(N),[U],"deleteTableConfirmationDialog",D.get("ReportModelTableLoadWillBeDisabled"),j,D)]:[2,!0];case 1:return[4,V.sent().afterClosed().toPromise()];case 2:return[2,1===V.sent()]}})})},y.getQueryToDependents=function(m,v){for(var D={},j={},U=m.dataModelExtendedState.queryDependencyGraph,z=0,q=Object.keys(U);z<q.length;z++)for(var V=q[z],X=0,ue=U[V];X<ue.length;X++){var L=ue[X];j[L]||(j[L]=new Set),j[L].add(V)}for(var w=0,b=v;w<b.length;w++){var S=b[w];j[S.name]&&(D[S.name]=Array.from(j[S.name]))}return D},y.reorderItemsToMinimizeDependencies=function(m,v,D,j){for(var U=function(m,v){for(var D=[],j=m.length,U=function(){var q=m.length,V=new Set;m.forEach(function(G){v[G.name]&&v[G.name].forEach(function(X){return V.add(X)})}),D=D.concat(m.filter(function(G){return!V.has(G.name)})),m=m.filter(function(G){return V.has(G.name)}),q===m.length&&l.fF.assertFail("Unable to calculate table dependencies")};m.length>0;)U();return j!==(D=D.reverse()).length&&l.fF.assertFail("ordered table number is not same as the origin number for deletion"),D}(v,D),z=m.filter(function(X){return!(0,a.wb)(X)}),q=[],V=function(){var ue=new Set((0,a.Y3)((0,a.L9)(z),j)),L=z.filter(function(w){return!ue.has(w.name)});q=L.concat(q),z=z.filter(function(w){return ue.has(w.name)})};z.length>0;)V();var G=q.concat(U);return m.length!==G.length&&l.fF.assertFail("ordered all item number is not same as the origin number for deletion"),G},y.createDeleteSchemaChange=function(m){var v=m.objectType;if("Relationship"===v){var D=m;return{relationshipDelete:{fromColumns:[p.X6.getColumnUrn(D.fromTable.name,D.fromColumn.name,D.fromColumn.schemaName)],toColumns:[p.X6.getColumnUrn(D.toTable.name,D.toColumn.name,D.toColumn.schemaName)]}}}if("Level"===v)return{hierarchyLevelDelete:{schema:m.schemaName,entity:m.hierarchy.table.name,hierarchy:m.hierarchy.name,hierarchyLevel:m.name}};if("Table"===v||"Expression"===v)return{itemDelete:{schema:m.schemaName,entity:m.name,objectType:m.objectType}};var U=void 0;return"Column"===v||"Measure"===v||"Hierarchy"===v?U=m:"CalculationItem"===v?U=m.calculationGroup:"Calendar"===v?U=m:l.fF.assertFail("This object type is not implemented "+v.toString()+"when create schemaChange"),{itemDelete:{schema:m.schemaName,entity:U.table.name,objectType:m.objectType,property:m.name}}},y.getDeleteComfirmationTitle=function(m,v){if(1!==m.length)return v.get("ReportModelDeleteItemsTitle");switch(m[0].objectType){case"Table":return v.get(N);case"Column":return v.get("DeleteColumnConfirmationTitle");case"Measure":return v.get("DeleteMeasurePromptTitle");case"Hierarchy":return v.get("DeleteHierarchyConfirmationTitle");case"Level":return v.get("DeleteHierarchyLevelConfirmationTitle");case"Relationship":return v.get("DeleteRelationshipConfirmationTitle");case"Calendar":return v.format("DeleteCalendarConfirmationTitle",m[0].name);default:l.fF.assertFail("Unexpected type being deleted")}},y.getDeleteConfirmationOkButtonText=function(m,v){if(1!==m.length)return v.get("Yes");switch(m[0].objectType){case"Table":case"Column":case"Measure":case"Hierarchy":case"Level":case"Relationship":return v.get("Yes");case"Calendar":return v.get("Delete");default:l.fF.assertFail("Unexpected type being deleted")}}}(E||(E={}));var x=n(70863),Q=n(58938),M=n(65181),i=n(66339),H=function(){function y(N,B,R,K,ee,se){this.modelAuthoring=N,this.dataModelService=B,this.dialogService=R,this.localizationService=K,this.telemetryService=ee,this.viewScopedUserSettingsService=se}return y.prototype.deleteAllFromModel=function(N,B,R){if(void 0===R&&(R=!1),N.every(function(ee){return!0===ee.canDelete})){var K=this.createDeleteItems(N,B);return this.deleteModelItem(K,R)}},y.prototype.createDeleteItems=function(N,B){var R=[];if(!N)return R;var K=[],ee=[],se=[],Z=[];N.forEach(function(u){(0,x.wb)(u)?K.push(u):(0,x.y3)(u)?ee.push(u):(0,x.ez)(u)?se.push(u):Z.push(u)});var te=[];return se.forEach(function(u){if(ee.every(function(oe){return oe.urn!==u.hierarchy.urn})&&K.every(function(oe){return oe.urn!==u.hierarchy.table.urn})){var Y=te.find(function(oe){return oe.hierarchy===u.hierarchy});Y||te.push(Y={hierarchy:u.hierarchy,levelsToDelete:[]}),Y.levelsToDelete.push(u)}}),te.forEach(function(u){B&&u.levelsToDelete.length===u.hierarchy.levels.length?ee.push(u.hierarchy):Z.push.apply(Z,u.levelsToDelete||[])}),Z.forEach(function(u){(0,x.Mx)(u)?R.push({itemName:u.name,schema:null,objectType:"Relationship"}):(0,x.ez)(u)?R.push({schema:u.schemaName,tableName:u.hierarchy.table.name,itemName:u.hierarchy.name,subItemName:u.name,objectType:"Level"}):(0,x.kb)(u)||(0,x.jz)(u)?K.every(function(Y){return Y.urn!==u.table.urn})&&R.push({schema:u.schemaName,tableName:u.table.name,itemName:u.name,objectType:"Measure"}):(0,x.t3)(u)?K.every(function(Y){return Y.urn!==u.table.urn})&&R.push({schema:u.schemaName,tableName:u.table.name,itemName:u.name,objectType:"Column"}):(0,x.RF)(u)?K.every(function(Y){return Y.urn!==u.calculationGroup.table.urn})&&R.push({schema:u.schemaName,tableName:u.calculationGroup.table.name,itemName:u.name,objectType:"CalculationItem"}):(0,x.CV)(u)&&K.every(function(Y){return Y.urn!==u.table.urn})&&R.push({schema:u.schemaName,tableName:u.table.name,itemName:u.name,objectType:"Calendar"})}),ee.forEach(function(u){K.every(function(Y){return Y.urn!==u.table.urn})&&R.push({schema:u.schemaName,tableName:u.table.name,itemName:u.name,objectType:"Hierarchy"})}),K.forEach(function(u){R.push({schema:u.schemaName,tableName:u.name,itemName:null,objectType:"Table"})}),R},y.prototype.deleteModelItem=function(N,B){return(0,s.mG)(this,void 0,void 0,function(){var R,K,ee,se,Z,te,Y,oe,k,O;return(0,s.Jh)(this,function(F){switch(F.label){case 0:if(_.isEmpty(N))return[2];for(R=this.dataModelService.getClientDataModel(),K=[],ee=0,se=N;ee<se.length;ee++){if(!(te=(0,a.Mf)(R.dataModel,(Z=se[ee]).objectType,Z.schema,Z.tableName,Z.itemName,Z.subItemName))||!te.capabilities.canDelete)return[2];K.push(te)}return B||this.hasUserOptedOutOfConfirmation(K)?[3,2]:[4,this.confirmDeleteObjects(R.dataModel,K,N)];case 1:if(!F.sent())return[2];F.label=2;case 2:return Y=K.filter(function(ne){return(0,a.wb)(ne)}),oe=E.getQueryToDependents(R,Y),[4,E.showConfirmDialogToDeleteTableWithDependents(Y,oe,this.localizationService,this.dialogService)];case 3:return F.sent()?(k=E.reorderItemsToMinimizeDependencies(K,Y,oe,this.localizationService),O=k.map(function(ne){return E.createDeleteSchemaChange(ne)}),O?.length>0?(this.telemetryService.logApplyChanges([r.DeleteModelItem]),[4,this.modelAuthoring.apply({changes:O})]):[3,5]):[2];case 4:F.sent(),F.label=5;case 5:return[2]}})})},y.prototype.hasUserOptedOutOfConfirmation=function(N){return!(!this.viewScopedUserSettingsService||!this.everyItemIsRelationship(N)||!this.viewScopedUserSettingsService.get(t))},y.prototype.confirmDeleteObjects=function(N,B,R){return(0,s.mG)(this,void 0,void 0,function(){var K,ee,Z;return(0,s.Jh)(this,function(te){switch(te.label){case 0:if(0===B.length)return[2,!1];if(1===B.length){if("CalculationItem"===B[0].objectType)return[2,!0];if((K=(0,a.Lc)(N,R[0].schema,R[0].tableName,R[0].itemName))&&(0,a.e_)(K))return[2,!0]}return ee=this.shouldIncludeDontAskAgainCheckbox(B)?this.localizationService.get("Generic_DontShowThisAgain"):void 0,[4,T.Z.buildOKCancelDialog({title:E.getDeleteComfirmationTitle(B,this.localizationService),message:E.getDeleteConfirmationText(B,this.localizationService),doNotShowAgain:ee},"deleteConfirmationDialog",this.dialogService,this.localizationService,E.getDeleteConfirmationOkButtonText(B,this.localizationService))];case 1:return[4,te.sent().afterClosed().toPromise()];case 2:return 5===(Z=te.sent())?(this.handleDontAskAgainCheckbox(B),[2,!1]):2===Z||3===Z?[2,!1]:4===Z?(this.handleDontAskAgainCheckbox(B),[2,!0]):[2,1===Z]}})})},y.prototype.shouldIncludeDontAskAgainCheckbox=function(N){return!!this.viewScopedUserSettingsService&&!!this.everyItemIsRelationship(N)},y.prototype.handleDontAskAgainCheckbox=function(N){this.viewScopedUserSettingsService&&this.everyItemIsRelationship(N)&&this.viewScopedUserSettingsService.set(t,!0)},y.prototype.everyItemIsRelationship=function(N){return N.every(function(B){return"Relationship"===B.objectType})},y.\u0275fac=function(B){return new(B||y)(d.\u0275\u0275inject(g.S),d.\u0275\u0275inject(e.n),d.\u0275\u0275inject(Q.x),d.\u0275\u0275inject(M.o),d.\u0275\u0275inject(i.L),d.\u0275\u0275inject(h,8))},y.\u0275prov=d.\u0275\u0275defineInjectable({token:y,factory:y.\u0275fac}),y}()},34145:function(le,I,n){n.d(I,{q:function(){return e}});var e=new(n(50423).InjectionToken)("ModelService")},9738:function(le,I,n){n.d(I,{$x:function(){return h},W6:function(){return g},fc:function(){return d}});var s=n(50423),e=n(30794),g=new s.InjectionToken("ModelingSelectionService"),d=new s.InjectionToken("ModelingCheckingService"),h=function(){function f(){this.notifcationsuspended=!1,this.selectedItems=new Set,this.selectionChanged=new e.xQ}return f.prototype.suspendNotification=function(){this.notifcationsuspended=!0},f.prototype.resumeNotification=function(){this.notifcationsuspended=!1,this.notifySelectionChanged()},f.prototype.select=function(c,t){this.selectAll([c],t)},f.prototype.deselect=function(c){this.selectedItems.delete(c),this.notifySelectionChanged()},f.prototype.selectAll=function(c,t){t&&this.selectedItems.clear();for(var r=0,a=c;r<a.length;r++)this.selectedItems.add(a[r]);this.notifySelectionChanged()},f.prototype.clear=function(){this.selectedItems.clear(),this.notifySelectionChanged()},f.prototype.isSelected=function(c){return this.selectedItems.has(c)},Object.defineProperty(f.prototype,"selection",{get:function(){return Array.from(this.selectedItems)},enumerable:!1,configurable:!0}),f.prototype.notifySelectionChanged=function(){this.notifcationsuspended||this.selectionChanged.next(this.selection)},f.\u0275prov=s.\u0275\u0275defineInjectable({token:f,factory:f.\u0275fac=function(t){return new(t||f)}}),f}()},49346:function(le,I,n){n.d(I,{TM:function(){return o},Yk:function(){return h},Yt:function(){return c},g4:function(){return r}});var s=n(41114),e="ClientSystemErrorBase",d=(s.cx[e]=(0,s.b1)(e),"PBIModelingCommonApplyChange"),h=s.cx[d]=(0,s.b1)(d),f="PBIModelingCommonDataModelUpdated",c=s.cx[f]=(0,s.b1)(f),t="PBIExecuteDataQueryCacheEventName",r=s.cx[t]=(0,s.b1)(t),a="PBISortByColumnDataQueryValidationEventName",o=s.cx[a]=(0,s.b1)(a)},66339:function(le,I,n){n.d(I,{L:function(){return c}});var s=n(34145),e=n(49346),g=n(68082),d=n(98665),h=n(34763),f=n(50423),c=function(){function t(r,a,o){var p,T,l=this;this.dataModelService=r,this.modelService=a,this.telemetryService=o,this.subscriptions=new h.w,this.telemetryService&&this.modelService&&this.dataModelService&&(this.subscriptions.add(null===(p=this.dataModelService.modelChanged$)||void 0===p?void 0:p.subscribe(function(){l.logModelUpdated()})),this.subscriptions.add(null===(T=this.dataModelService.modelLoaded$)||void 0===T?void 0:T.subscribe(function(){l.logModelUpdated()})))}return t.prototype.initialize=function(){},t.prototype.ngOnDestroy=function(){this.subscriptions.unsubscribe()},t.prototype.logModelUpdated=function(){var r,a,o=this.dataModelService.getDataModel();this.telemetryService.root&&this.telemetryService.logEvent(e.Yt,{modelVersion:this.dataModelService.version,tables:null===(r=o?.tables)||void 0===r?void 0:r.length,relationships:null===(a=o?.relationships)||void 0===a?void 0:a.length})},t.prototype.logApplyChanges=function(r){var a,o;this.telemetryService.root&&this.telemetryService.logEvent(e.Yk,{change:r.join(", "),modelVersion:null===(o=null===(a=this.modelService)||void 0===a?void 0:a.model)||void 0===o?void 0:o.version})},t.\u0275fac=function(a){return new(a||t)(f.\u0275\u0275inject(g.n,8),f.\u0275\u0275inject(s.q,8),f.\u0275\u0275inject(d.y0,8))},t.\u0275prov=f.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t}()},55375:function(le,I,n){n.d(I,{Z:function(){return e}});var s=n(81337),e=function(){function g(){}return g.buildOKCancelDialog=function(d,h,f,c,t,r){return void 0===t&&(t=c.get("Yes")),void 0===r&&(r=c.get("Cancel_ButtonText")),d=(0,s.pi)((0,s.pi)({},d),{okButtonText:t,cancelButtonText:r}),f.openHostDialog({dialogName:h,componentName:"SimpleConfirmationDialogComponent",bindings:d,config:{width:"500px",panelClass:["mat-dialog-content-nonextra-space"],ariaDescribedBy:"simple-dialog-content-id"}})},g.buildOKCancelDialogWithList=function(d,h,f,c,t,r){var a=h.join(" ");return this.buildOKCancelDialog({title:d,message:void 0,additionalMessages:[[a,{segmentStr:"",lineBreak:!0},{segmentStr:"",lineBreak:!0},c]]},f,t,r)},g.buildCancelDialog=function(d,h,f,c,t,r,a,o){var l={dialogName:f,componentName:"SimpleDialogComponent",bindings:{titleIcon:a,title:d,message:h,okButtonText:r||t.get("Close")},config:(0,s.pi)({width:"500px",panelClass:["mat-dialog-content-nonextra-space","legacy-dialog"],ariaDescribedBy:"simple-dialog-content-id"},o)};return c.openHostDialog(l)},g}()},93215:function(le,I,n){n.d(I,{b:function(){return a}});var s=n(81337),e=n(32518),g=n(8590),d=n(35510),h=n(50423),f=n(11494),c=n(83008),t=n(26898),r=n(65181),a=function(){function o(l,p,T,E){var x=this;this.conceptualSchemaProxy=p,this.dataSourcesService=T,this.localizationService=E,this.modelUpdates=new d.X({schema:void 0,model:void 0,appliedChanges:void 0}),this.subscriptionManager=l.createChannelSubscriptionManager(),this.subscriptionManager.subscribe(g.CCe,function(Q,M){return x.update(M.result.changes)})}return o.prototype.update=function(l,p,T){return void 0===p&&(p=!0),void 0===T&&(T=!1),(0,s.mG)(this,void 0,void 0,function(){var E,x;return(0,s.Jh)(this,function(M){switch(M.label){case 0:return this.dataSourcesService.get()?(p||this.conceptualSchemaProxy.clearCache(),[4,this.conceptualSchemaProxy.get(this.dataSourcesService.get())]):[3,2];case 1:(E=M.sent())&&(x=new e.O(this.localizationService).createModel(E,T)),M.label=2;case 2:return this.modelUpdates.next({schema:E,model:x,appliedChanges:l}),[2]}})})},Object.defineProperty(o.prototype,"modelChange$",{get:function(){return this.modelUpdates.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"model",{get:function(){return this.modelUpdates.value.model},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"schema",{get:function(){return this.modelUpdates.value.schema},enumerable:!1,configurable:!0}),o.\u0275fac=function(p){return new(p||o)(h.\u0275\u0275inject(f.J),h.\u0275\u0275inject(t.i),h.\u0275\u0275inject(c.D),h.\u0275\u0275inject(r.o))},o.\u0275prov=h.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac}),o}()},58679:function(le,I,n){n.d(I,{I:function(){return E}});var s=n(65005),e=n(62458),g=n(9795),d=n(59017),h=n(59973),f=n(14172),c=n(81905),t=n(83317),r=n(48787),a=n(50423),o=n(84354),l=function(){function x(Q){this.pbiDropdownService=Q,this.isOpen$=this.pbiDropdownService.select$("open");var M=this.pbiDropdownService.select$("dropdownItems"),i=this.pbiDropdownService.select$("overlayRef"),J=M.pipe((0,h.h)(function(y){return!!y}),(0,f.U)(function(y){return e.fF.assert(function(){return 1===y.length},"Expected 1 FieldListComponent"),y.first})),H=J.pipe((0,c.w)(function(y){return y.onFirstRenderComplete}));(0,d.aj)([this.isOpen$,i,J,H]).pipe((0,t.R)(this.pbiDropdownService.onDestroy$),(0,h.h)(function(y){var B=y[1],R=y[2];return y[0]&&!!B?.overlayRef.overlayElement&&!!R})).subscribe(function(y){y[2].focusSearchBox()})}return x.prototype.buttonKeydown=function(Q){var M=this;this.isOpen$.pipe((0,r.q)(1)).subscribe(function(i){i||(0,g.Wl)(Q.keyCode)&&(M.pbiDropdownService.toggleOpenState(),Q.preventDefault())})},x.\u0275fac=function(M){return new(M||x)(a.\u0275\u0275inject(o.S))},x.\u0275prov=a.\u0275\u0275defineInjectable({token:x,factory:x.\u0275fac}),x}(),p=n(26333),T=n(31343),E=function(){function x(Q,M){this.pbiDropdownService=Q,this.strategy=M}return x.prototype.ngAfterViewInit=function(){var Q=this;(0,p.x)([{strategy:this.strategy,dropdownItems:this.dropdownItems}],T.N).subscribe(function(M){Q.pbiDropdownService.updateState(M)})},x.\u0275fac=function(M){return new(M||x)(a.\u0275\u0275directiveInject(o.S),a.\u0275\u0275directiveInject(l))},x.\u0275dir=a.\u0275\u0275defineDirective({type:x,selectors:[["pbi-dropdown","dropdown-type","field-list"]],contentQueries:function(M,i,J){var H;(1&M&&a.\u0275\u0275contentQuery(J,s.l,5),2&M)&&(a.\u0275\u0275queryRefresh(H=a.\u0275\u0275loadQuery())&&(i.dropdownItems=H))},features:[a.\u0275\u0275ProvidersFeature([l])]}),x}()},65005:function(le,I,n){n.d(I,{l:function(){return oe}});var s=n(81337),e=n(50423),g=n(48787),d=n(30794),h=n(12179),f=[],c=n(77476),t=n(68070),r=n(89237);function a(C,k){1&C&&e.\u0275\u0275element(0,"div",7)}function o(C,k){1&C&&(e.\u0275\u0275elementStart(0,"div",8),e.\u0275\u0275element(1,"div",9)(2,"div",10),e.\u0275\u0275elementEnd())}function l(C,k){1&C&&(e.\u0275\u0275elementStart(0,"div",11),e.\u0275\u0275element(1,"div",12),e.\u0275\u0275elementStart(2,"div",13),e.\u0275\u0275element(3,"div",14)(4,"div",15),e.\u0275\u0275elementEnd()())}function p(C,k){if(1&C&&(e.\u0275\u0275elementContainerStart(0,3),e.\u0275\u0275template(1,a,1,0,"div",4),e.\u0275\u0275template(2,o,3,0,"div",5),e.\u0275\u0275template(3,l,5,0,"div",6),e.\u0275\u0275elementContainerEnd()),2&C){var O=k.$implicit,F=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngSwitch",O),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",F.largeBarType),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",F.multipleBarType),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",F.multipleSmallLargeType)}}function T(C,k){if(1&C&&(e.\u0275\u0275elementStart(0,"div",1),e.\u0275\u0275template(1,p,4,4,"ng-container",2),e.\u0275\u0275elementEnd()),2&C){var O=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngStyle",O.barsStyle),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",O.barsProperties.bars)}}var J=function(){function C(){this.largeBarType=0,this.multipleBarType=1,this.multipleSmallLargeType=2}return C.prototype.ngOnChanges=function(){this.barsProperties&&(this.barsStyle={height:"".concat((this.barsProperties.height+8)*this.barsProperties.bars.length,"px")})},C.\u0275fac=function(O){return new(O||C)},C.\u0275cmp=e.\u0275\u0275defineComponent({type:C,selectors:[["shimmering-bars"]],inputs:{barsProperties:"barsProperties"},features:[e.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[["class","bars",3,"ngStyle",4,"ngIf"],[1,"bars",3,"ngStyle"],[3,"ngSwitch",4,"ngFor","ngForOf"],[3,"ngSwitch"],["class","largerLoadingBar animate",4,"ngSwitchCase"],["class","multipleBars",4,"ngSwitchCase"],["class","multipleSmallLarge",4,"ngSwitchCase"],[1,"largerLoadingBar","animate"],[1,"multipleBars"],[1,"miniLoadingBar","animate"],[1,"smallerLoadingBar","animate"],[1,"multipleSmallLarge"],[1,"shimmerBox","animate"],[1,"smallLargeBarContainer"],[1,"upperLoadingBar","animate"],[1,"lowerLoadingBar","animate"]],template:function(O,F){1&O&&e.\u0275\u0275template(0,T,2,2,"div",0),2&O&&e.\u0275\u0275property("ngIf",F.barsProperties)},dependencies:[c.NgForOf,c.NgIf,c.NgStyle,c.NgSwitch,c.NgSwitchCase],styles:['[_nghost-%COMP%]{--shimmer-background-color: var(--gray-20);--shimmer-animate1: var(--gray-30);--shimmer-animate2: var(--gray-50)}[data-legacy-theming=false]   [_nghost-%COMP%]{--shimmer-background-color: var(--colorNeutralBackground3);--shimmer-animate1: var(--colorNeutralBackground3Hover);--shimmer-animate2: var(--colorNeutralBackground3Pressed)}.bars[_ngcontent-%COMP%]{display:flex;flex-direction:column}.largerLoadingBar[_ngcontent-%COMP%]{border-radius:2px;flex-grow:1;background:var(--shimmer-background-color)}html:not([dir="rtl"])[_nghost-%COMP%]   .largerLoadingBar[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .largerLoadingBar[_ngcontent-%COMP%]{margin:4px 8px}html[dir="rtl"][_nghost-%COMP%]   .largerLoadingBar[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .largerLoadingBar[_ngcontent-%COMP%]{margin:4px 8px}.multipleBars[_ngcontent-%COMP%]{display:flex;align-items:center;flex-grow:1}html:not([dir="rtl"])[_nghost-%COMP%]   .multipleBars[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .multipleBars[_ngcontent-%COMP%]{margin:4px 8px}html[dir="rtl"][_nghost-%COMP%]   .multipleBars[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .multipleBars[_ngcontent-%COMP%]{margin:4px 8px}.miniLoadingBar[_ngcontent-%COMP%]{border-radius:2px;height:60%;width:10%;background:var(--shimmer-background-color)}html:not([dir="rtl"])[_nghost-%COMP%]   .miniLoadingBar[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .miniLoadingBar[_ngcontent-%COMP%]{margin-right:4px}html[dir="rtl"][_nghost-%COMP%]   .miniLoadingBar[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .miniLoadingBar[_ngcontent-%COMP%]{margin-left:4px}.smallerLoadingBar[_ngcontent-%COMP%]{border-radius:2px;height:80%;width:100%;background:var(--shimmer-background-color)}html:not([dir="rtl"])[_nghost-%COMP%]   .smallerLoadingBar[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .smallerLoadingBar[_ngcontent-%COMP%]{margin-left:4px}html[dir="rtl"][_nghost-%COMP%]   .smallerLoadingBar[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .smallerLoadingBar[_ngcontent-%COMP%]{margin-right:4px}.multipleSmallLarge[_ngcontent-%COMP%]{display:flex;flex-grow:1;padding:10px 9px}html:not([dir="rtl"])[_nghost-%COMP%]   .multipleSmallLarge[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .multipleSmallLarge[_ngcontent-%COMP%]{margin:4px 8px}html[dir="rtl"][_nghost-%COMP%]   .multipleSmallLarge[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .multipleSmallLarge[_ngcontent-%COMP%]{margin:4px 8px}.upperLoadingBar[_ngcontent-%COMP%]{border-radius:2px;height:65%;width:49%;background:var(--shimmer-background-color)}html:not([dir="rtl"])[_nghost-%COMP%]   .upperLoadingBar[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .upperLoadingBar[_ngcontent-%COMP%]{margin:0 4px 11px 0}html[dir="rtl"][_nghost-%COMP%]   .upperLoadingBar[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .upperLoadingBar[_ngcontent-%COMP%]{margin:0 0 11px 4px}.lowerLoadingBar[_ngcontent-%COMP%]{border-radius:2px;height:65%;width:100%;background:var(--shimmer-background-color)}.shimmerBox[_ngcontent-%COMP%]{background:var(--shimmer-background-color);border-radius:2px;height:32px;width:32px}.smallLargeBarContainer[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;max-width:167px}html:not([dir="rtl"])[_nghost-%COMP%]   .smallLargeBarContainer[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .smallLargeBarContainer[_ngcontent-%COMP%]{margin:4px 0 2.42px 13px}html[dir="rtl"][_nghost-%COMP%]   .smallLargeBarContainer[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .smallLargeBarContainer[_ngcontent-%COMP%]{margin:4px 13px 2.42px 0}.animate[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_shimmer 5s infinite linear;background:linear-gradient(270deg,var(--shimmer-animate1) 0%,var(--shimmer-animate2) 50%,var(--shimmer-animate1) 100%);background-size:250% 100%}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:250% 0}to{background-position:-250% 0}}'],changeDetection:0}),C}(),H=n(85102),y=["pbiTree"];function N(C,k){if(1&C){var O=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tri-search-box",5),e.\u0275\u0275listener("value",function(pe){e.\u0275\u0275restoreView(O);var de=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(de.search$.next(pe))}),e.\u0275\u0275pipe(1,"localize"),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275elementEnd()}if(2&C){var F=e.\u0275\u0275nextContext();e.\u0275\u0275property("currentInputValue",F.searchText||"")("placeholderText",e.\u0275\u0275pipeBind1(2,8,"SearchBox_Text"))("fluentTheme",!0)("compact",!0)("fullWidth",!0),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(1,6,"SearchBox_Text"))}}function B(C,k){if(1&C){var O=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"pbi-search-box")(1,"input",6),e.\u0275\u0275listener("input",function(pe){e.\u0275\u0275restoreView(O);var de=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(de.search$.next(pe.target.value))}),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275pipe(3,"localize"),e.\u0275\u0275elementEnd()()}if(2&C){var F=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("value",F.searchText||"")("placeholder",e.\u0275\u0275pipeBind1(3,5,"SearchBox_Text")),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(2,3,"SearchBox_Text"))}}function R(C,k){if(1&C&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275element(1,"shimmering-bars",7),e.\u0275\u0275elementContainerEnd()),2&C){var O=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("barsProperties",O.shimmeringBars)}}function K(C,k){if(1&C){var O=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"pbi-tree",12,13),e.\u0275\u0275listener("onNodeClick",function(pe){e.\u0275\u0275restoreView(O);var de=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(de.onNodeClick.emit(pe))})("onNodeCheck",function(pe){e.\u0275\u0275restoreView(O);var de=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(de.onNodeCheck.emit(pe))})("onNodeExpansionToggle",function(pe){e.\u0275\u0275restoreView(O);var de=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(de.onNodeExpansionToggle.emit(pe))})("onFirstRender",function(){e.\u0275\u0275restoreView(O);var pe=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(pe.onFirstRender())}),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementEnd()}if(2&C){var F=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("tree",F.fieldListTree)("search",e.\u0275\u0275pipeBind1(2,5,F.search$))("hasHighlights",F.hasHighlights)("checkMode",F.checkMode)("options",F._options)}}function ee(C,k){1&C&&e.\u0275\u0275projection(0,2)}function se(C,k){if(1&C&&(e.\u0275\u0275elementStart(0,"div",8),e.\u0275\u0275element(1,"div",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(2,K,3,7,"pbi-tree",10),e.\u0275\u0275template(3,ee,1,0,"ng-template",null,11,e.\u0275\u0275templateRefExtractor)),2&C){var O=e.\u0275\u0275reference(4),F=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",F.fieldListTree)("ngIfElse",O)}}var Z=[[["",8,"pbi-field-list-perspective-header"]],[["",8,"pbi-field-list-header"]],[["",8,"pbi-field-list-watermark"]]],te=[".pbi-field-list-perspective-header",".pbi-field-list-header",".pbi-field-list-watermark"],Y={height:24,bars:[0,1,1,0,0]},oe=function(){function C(){this.hasHighlights=!1,this.loading=!1,this.shimmeringBars=Y,this.defaultOptions={},this._options=this.defaultOptions,this.onNodeExpansionToggle=new e.EventEmitter,this.onNodeClick=new e.EventEmitter,this.onNodeCheck=new e.EventEmitter,this.onFirstRenderComplete=new e.EventEmitter,this.handleFieldListTreeHeightDiff=new e.EventEmitter,this.search$=new d.xQ}return Object.defineProperty(C.prototype,"options",{set:function(O){this._options=(0,s.pi)((0,s.pi)({},this.defaultOptions),O)},enumerable:!1,configurable:!0}),C.prototype.ngOnInit=function(){var k=this;this.focusSearchBoxOnFirstRenderComplete&&this.onFirstRenderComplete.pipe((0,g.q)(1)).subscribe(function(){return k.focusSearchBox()})},C.prototype.onFirstRender=function(){var k=this.getFieldListTreeHeightDiff();this.handleFieldListTreeHeightDiff.emit(k),this.scrollSelectedItemIntoViewOnInit&&this.pbiTree.scrollToFirstSelectedNode(),this.onFirstRenderComplete.emit()},C.prototype.focusSearchBox=function(){$(".field-list-search-container input").trigger("focus")},C.prototype.getFieldListTreeHeightDiff=function(){return this.pbiTree.getTreeHeight()+2-this.pbiTreeElementRef.nativeElement.getBoundingClientRect().height},C.\u0275fac=function(O){return new(O||C)},C.\u0275cmp=e.\u0275\u0275defineComponent({type:C,selectors:[["pbi-field-list"]],viewQuery:function(O,F){if(1&O&&(e.\u0275\u0275viewQuery(h.u,5),e.\u0275\u0275viewQuery(y,5,e.ElementRef)),2&O){var ne=void 0;e.\u0275\u0275queryRefresh(ne=e.\u0275\u0275loadQuery())&&(F.pbiTree=ne.first),e.\u0275\u0275queryRefresh(ne=e.\u0275\u0275loadQuery())&&(F.pbiTreeElementRef=ne.first)}},inputs:{fieldListTree:"fieldListTree",scrollSelectedItemIntoViewOnInit:"scrollSelectedItemIntoViewOnInit",checkMode:"checkMode",hasHighlights:"hasHighlights",loading:"loading",searchText:"searchText",focusSearchBoxOnFirstRenderComplete:"focusSearchBoxOnFirstRenderComplete",fluent:"fluent",options:"options"},outputs:{onNodeExpansionToggle:"onNodeExpansionToggle",onNodeClick:"onNodeClick",onNodeCheck:"onNodeCheck",onFirstRenderComplete:"onFirstRenderComplete",handleFieldListTreeHeightDiff:"handleFieldListTreeHeightDiff"},features:[e.\u0275\u0275ProvidersFeature(f)],ngContentSelectors:te,decls:8,vars:4,consts:[["data-tutorial-target","search-box",1,"field-list-search-container"],["data-testid","search-bar-input",3,"currentInputValue","placeholderText","fluentTheme","compact","fullWidth","value",4,"ngIf"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["loaded",""],["data-testid","search-bar-input",3,"currentInputValue","placeholderText","fluentTheme","compact","fullWidth","value"],["pbiSearchInput","","data-testid","search-bar-input",1,"pbi-focus-outline",3,"value","placeholder","input"],[3,"barsProperties"],[1,"tutorial-target-container"],["data-tutorial-target","data-tree"],["data-testid","data-tree",3,"tree","search","hasHighlights","checkMode","options","onNodeClick","onNodeCheck","onNodeExpansionToggle","onFirstRender",4,"ngIf","ngIfElse"],["watermark",""],["data-testid","data-tree",3,"tree","search","hasHighlights","checkMode","options","onNodeClick","onNodeCheck","onNodeExpansionToggle","onFirstRender"],["pbiTree",""]],template:function(O,F){if(1&O&&(e.\u0275\u0275projectionDef(Z),e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275template(1,N,3,10,"tri-search-box",1),e.\u0275\u0275template(2,B,4,7,"pbi-search-box",2),e.\u0275\u0275elementEnd(),e.\u0275\u0275projection(3),e.\u0275\u0275projection(4,1),e.\u0275\u0275template(5,R,2,1,"ng-container",3),e.\u0275\u0275template(6,se,5,2,"ng-template",null,4,e.\u0275\u0275templateRefExtractor)),2&O){var ne=e.\u0275\u0275reference(7);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",F.fluent),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!F.fluent),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",F.loading)("ngIfElse",ne)}},dependencies:[c.NgIf,t.a,t.p,r.U,h.u,J,c.AsyncPipe,H.F],styles:["[_nghost-%COMP%]{height:100%;display:flex;flex-direction:column}pbi-tree[_ngcontent-%COMP%]{margin-top:9px;height:100%;display:block;overflow:hidden}.tutorial-target-container[_ngcontent-%COMP%]{position:relative;visibility:hidden;height:0;width:0}.tutorial-target-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;top:20px;visibility:hidden;height:0;width:0}"],changeDetection:0}),C}()},68070:function(le,I,n){n.d(I,{a:function(){return Q},p:function(){return x}});var s=n(81337),e=n(50423),g=n(73221),d=n(35510),h=n(59017),f=n(63057),c=n(59787),t=n(58315),r=n(14172),a=n(77526),o=n(77476),l=function(){return{tooltipLocalizeTitle:"Clear",tooltipShowOnFocus:!0}};function p(M,i){if(1&M){var J=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",2),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(J);var y=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(y.onCancelButtonClick())}),e.\u0275\u0275elementEnd()}2&M&&e.\u0275\u0275property("pbi-tooltip",e.\u0275\u0275pureFunction0(1,l))}var T=[[["input"]]],E=["input"],x=function(){function M(){}return M.\u0275fac=function(J){return new(J||M)},M.\u0275dir=e.\u0275\u0275defineDirective({type:M,selectors:[["","pbiSearchInput",""]]}),M}(),Q=function(M){function i(J){var H=M.call(this)||this;return H.changeDetectorRef=J,H.searchCleared=new e.EventEmitter,H.onSearchTextChanged=new e.EventEmitter,H.emptyValue$=new d.X(void 0),H.hasInput=!1,H}return(0,s.ZT)(i,M),i.prototype.onCancelButtonClick=function(){this.clearSearchText(),this.input.nativeElement.focus()},i.prototype.clearSearchText=function(){this.input.nativeElement.value="",this.hasInput=!1,this.changeDetectorRef.markForCheck(),this.emptyValue$.next(),this.searchCleared.emit()},i.prototype.ngAfterViewInit=function(){var J=this;this.lifecycleSubscriptions.add((0,h.aj)([(0,f.T)((0,c.R)(this.input.nativeElement,"keyup"),(0,c.R)(this.input.nativeElement,"keydown")).pipe((0,t.b)(250)),this.emptyValue$]).pipe((0,r.U)(function(){return J.input.nativeElement.value}),(0,a.x)()).subscribe(function(H){return J.onSearchTextChanged.emit(H)})),setTimeout(function(){return J.onInputChanged(J.input.nativeElement.value)},0)},i.prototype.onInputChanged=function(J){this.hasInput!==!!J&&(this.hasInput=!!J,this.changeDetectorRef.markForCheck())},i.\u0275fac=function(H){return new(H||i)(e.\u0275\u0275directiveInject(e.ChangeDetectorRef))},i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["pbi-search-box"]],contentQueries:function(H,y,N){var B;(1&H&&e.\u0275\u0275contentQuery(N,x,5,e.ElementRef),2&H)&&(e.\u0275\u0275queryRefresh(B=e.\u0275\u0275loadQuery())&&(y.input=B.first))},outputs:{searchCleared:"searchCleared",onSearchTextChanged:"onSearchTextChanged"},features:[e.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:E,decls:3,vars:1,consts:[[1,"pbi-search-box",3,"input"],["class","clearIcon pbi-borderless-button glyphicon pbi-glyph-clear glyph-mini searchbox-clear-icon",3,"pbi-tooltip","click",4,"ngIf"],[1,"clearIcon","pbi-borderless-button","glyphicon","pbi-glyph-clear","glyph-mini","searchbox-clear-icon",3,"pbi-tooltip","click"]],template:function(H,y){1&H&&(e.\u0275\u0275projectionDef(T),e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275listener("input",function(B){return y.onInputChanged(B.target.value)}),e.\u0275\u0275projection(1),e.\u0275\u0275template(2,p,1,2,"button",1),e.\u0275\u0275elementEnd()),2&H&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",y.hasInput))},dependencies:[o.NgIf],styles:['.pbi-search-box{--searchBox-colorEditLabelBorder: var(--gray-120);--searchBox-colorEditLabelBorderHover: var(--gray-160);--searchBox-colorEditLabelForeground: var(--gray-130);--searchBox-colorEditLabelPlaceholderForeground: var(--gray-140);--searchBox-colorEditLabelBackground: auto;--searchBox-colorEditLabelSelectedForeground: var(--text-primary-content-color);--searchBox-colorEditLabelSelectedBackground: var(--fluent-theme-primary-color)}[data-legacy-theming=false] .pbi-search-box{--searchBox-colorEditLabelBorder: var(--colorNeutralStroke1);--searchBox-colorEditLabelBorderHover: var(--colorNeutralStroke1);--searchBox-colorEditLabelForeground: var(--colorNeutralForeground1);--searchBox-colorEditLabelPlaceholderForeground: auto;--searchBox-colorEditLabelBackground: var(--colorNeutralBackground1);--searchBox-colorEditLabelSelectedForeground: var(--colorNeutralForegroundOnBrand);--searchBox-colorEditLabelSelectedBackground: var(--colorBrandBackground)}.pbi-search-box{display:block;width:100%;position:relative}.pbi-search-box:before{content:"\\e721"}.pbi-search-box:before{color:var(--searchBox-colorEditLabelForeground);display:inline-block;font-family:PowrMDL2;font-size:14px;position:absolute;top:6px;left:8px}.pbi-search-box input{padding:3px 28px;border-radius:2px;border:1px solid var(--searchBox-colorEditLabelBorder);color:var(--searchBox-colorEditLabelForeground);background-color:var(--searchBox-colorEditLabelBackground);outline:none;box-sizing:border-box;font-size:14px;width:100%}.pbi-search-box input:hover,.pbi-search-box input:focus{border-color:var(--searchBox-colorEditLabelBorderHover)}.pbi-search-box input::placeholder{color:var(--searchBox-colorEditLabelPlaceholderForeground)}.pbi-search-box input::selection{background:var(--searchBox-colorEditLabelSelectedBackground);color:var(--searchBox-colorEditLabelSelectedForeground)}.pbi-search-box .pbi-glyph-clear{background-color:transparent}.pbi-search-box .searchbox-clear-icon{color:var(--searchBox-colorEditLabelForeground);position:absolute;right:8px;top:7px;border:0px;padding:0}\n'],encapsulation:2,changeDetection:0}),i}(g.w)}}]);