(self.webpackChunkmobile=self.webpackChunkmobile||[]).push([["mobile-goals-ui","goals-ui"],{77489:function(ct){ct.exports=function(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,w=new Array(t);i<t;i++)w[i]=n[i];return w},ct.exports.default=ct.exports,ct.exports.__esModule=!0},32878:function(ct){function Ge(t,i){for(var w=0;w<i.length;w++){var a=i[w];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}ct.exports=function(t,i,w){return i&&Ge(t.prototype,i),w&&Ge(t,w),t},ct.exports.default=ct.exports,ct.exports.__esModule=!0},34850:function(ct,Ge,n){var t=n(91052);ct.exports=function(w,a){var d=typeof Symbol<"u"&&w[Symbol.iterator]||w["@@iterator"];if(d)return(d=d.call(w)).next.bind(d);if(Array.isArray(w)||(d=t(w))||a&&w&&"number"==typeof w.length){d&&(w=d);var p=0;return function(){return p>=w.length?{done:!0}:{done:!1,value:w[p++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},ct.exports.default=ct.exports,ct.exports.__esModule=!0},12864:function(ct,Ge,n){var t=n(74);ct.exports=function(w,a){w.prototype=Object.create(a.prototype),w.prototype.constructor=w,t(w,a)},ct.exports.default=ct.exports,ct.exports.__esModule=!0},74:function(ct){function Ge(n,t){return ct.exports=Ge=Object.setPrototypeOf||function(w,a){return w.__proto__=a,w},ct.exports.default=ct.exports,ct.exports.__esModule=!0,Ge(n,t)}ct.exports=Ge,ct.exports.default=ct.exports,ct.exports.__esModule=!0},91052:function(ct,Ge,n){var t=n(77489);ct.exports=function(w,a){if(w){if("string"==typeof w)return t(w,a);var d=Object.prototype.toString.call(w).slice(8,-1);if("Object"===d&&w.constructor&&(d=w.constructor.name),"Map"===d||"Set"===d)return Array.from(w);if("Arguments"===d||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return t(w,a)}},ct.exports.default=ct.exports,ct.exports.__esModule=!0},36444:function(ct,Ge,n){var t=n(32878).default,i=n(12864).default,w=n(34850).default;function a(){"use strict";a=function(){return p};var d,p={},l=Object.prototype,c=l.hasOwnProperty,y=Object.defineProperty||function(Oe,Ce,Le){Oe[Ce]=Le.value},r="function"==typeof Symbol?Symbol:{},C=r.iterator||"@@iterator",m=r.asyncIterator||"@@asyncIterator",k=r.toStringTag||"@@toStringTag";function O(Oe,Ce,Le){return Object.defineProperty(Oe,Ce,{value:Le,enumerable:!0,configurable:!0,writable:!0}),Oe[Ce]}try{O({},"")}catch{O=function(Le,ze,$e){return Le[ze]=$e}}function s(Oe,Ce,Le,ze){var We=Object.create((Ce&&Ce.prototype instanceof H?Ce:H).prototype),He=new xe(ze||[]);return y(We,"_invoke",{value:pe(Oe,Le,He)}),We}function ne(Oe,Ce,Le){try{return{type:"normal",arg:Oe.call(Ce,Le)}}catch(ze){return{type:"throw",arg:ze}}}p.wrap=s;var ee="suspendedStart",Z="suspendedYield",v="executing",E="completed",I={};function H(){}function G(){}function Y(){}var ie={};O(ie,C,function(){return this});var ye=Object.getPrototypeOf,ae=ye&&ye(ye(me([])));ae&&ae!==l&&c.call(ae,C)&&(ie=ae);var J=Y.prototype=H.prototype=Object.create(ie);function N(Oe){["next","throw","return"].forEach(function(Ce){O(Oe,Ce,function(Le){return this._invoke(Ce,Le)})})}function he(Oe,Ce){function Le($e,We,He,Je){var j=ne(Oe[$e],Oe,We);if("throw"!==j.type){var tt=j.arg,Ue=tt.value;return Ue&&"object"==typeof Ue&&c.call(Ue,"__await")?Ce.resolve(Ue.__await).then(function(oe){Le("next",oe,He,Je)},function(oe){Le("throw",oe,He,Je)}):Ce.resolve(Ue).then(function(oe){tt.value=oe,He(tt)},function(oe){return Le("throw",oe,He,Je)})}Je(j.arg)}var ze;y(this,"_invoke",{value:function(We,He){function Je(){return new Ce(function(j,tt){Le(We,He,j,tt)})}return ze=ze?ze.then(Je,Je):Je()}})}function pe(Oe,Ce,Le){var ze=ee;return function($e,We){if(ze===v)throw new Error("Generator is already running");if(ze===E){if("throw"===$e)throw We;return{value:d,done:!0}}for(Le.method=$e,Le.arg=We;;){var He=Le.delegate;if(He){var Je=ce(He,Le);if(Je){if(Je===I)continue;return Je}}if("next"===Le.method)Le.sent=Le._sent=Le.arg;else if("throw"===Le.method){if(ze===ee)throw ze=E,Le.arg;Le.dispatchException(Le.arg)}else"return"===Le.method&&Le.abrupt("return",Le.arg);ze=v;var j=ne(Oe,Ce,Le);if("normal"===j.type){if(ze=Le.done?E:Z,j.arg===I)continue;return{value:j.arg,done:Le.done}}"throw"===j.type&&(ze=E,Le.method="throw",Le.arg=j.arg)}}}function ce(Oe,Ce){var Le=Ce.method,ze=Oe.iterator[Le];if(ze===d)return Ce.delegate=null,"throw"===Le&&Oe.iterator.return&&(Ce.method="return",Ce.arg=d,ce(Oe,Ce),"throw"===Ce.method)||"return"!==Le&&(Ce.method="throw",Ce.arg=new TypeError("The iterator does not provide a '"+Le+"' method")),I;var $e=ne(ze,Oe.iterator,Ce.arg);if("throw"===$e.type)return Ce.method="throw",Ce.arg=$e.arg,Ce.delegate=null,I;var We=$e.arg;return We?We.done?(Ce[Oe.resultName]=We.value,Ce.next=Oe.nextLoc,"return"!==Ce.method&&(Ce.method="next",Ce.arg=d),Ce.delegate=null,I):We:(Ce.method="throw",Ce.arg=new TypeError("iterator result is not an object"),Ce.delegate=null,I)}function ge(Oe){var Ce={tryLoc:Oe[0]};1 in Oe&&(Ce.catchLoc=Oe[1]),2 in Oe&&(Ce.finallyLoc=Oe[2],Ce.afterLoc=Oe[3]),this.tryEntries.push(Ce)}function se(Oe){var Ce=Oe.completion||{};Ce.type="normal",delete Ce.arg,Oe.completion=Ce}function xe(Oe){this.tryEntries=[{tryLoc:"root"}],Oe.forEach(ge,this),this.reset(!0)}function me(Oe){if(Oe||""===Oe){var Ce=Oe[C];if(Ce)return Ce.call(Oe);if("function"==typeof Oe.next)return Oe;if(!isNaN(Oe.length)){var Le=-1,ze=function $e(){for(;++Le<Oe.length;)if(c.call(Oe,Le))return $e.value=Oe[Le],$e.done=!1,$e;return $e.value=d,$e.done=!0,$e};return ze.next=ze}}throw new TypeError(typeof Oe+" is not iterable")}return G.prototype=Y,y(J,"constructor",{value:Y,configurable:!0}),y(Y,"constructor",{value:G,configurable:!0}),G.displayName=O(Y,k,"GeneratorFunction"),p.isGeneratorFunction=function(Oe){var Ce="function"==typeof Oe&&Oe.constructor;return!!Ce&&(Ce===G||"GeneratorFunction"===(Ce.displayName||Ce.name))},p.mark=function(Oe){return Object.setPrototypeOf?Object.setPrototypeOf(Oe,Y):(Oe.__proto__=Y,O(Oe,k,"GeneratorFunction")),Oe.prototype=Object.create(J),Oe},p.awrap=function(Oe){return{__await:Oe}},N(he.prototype),O(he.prototype,m,function(){return this}),p.AsyncIterator=he,p.async=function(Oe,Ce,Le,ze,$e){void 0===$e&&($e=Promise);var We=new he(s(Oe,Ce,Le,ze),$e);return p.isGeneratorFunction(Ce)?We:We.next().then(function(He){return He.done?He.value:We.next()})},N(J),O(J,k,"Generator"),O(J,C,function(){return this}),O(J,"toString",function(){return"[object Generator]"}),p.keys=function(Oe){var Ce=Object(Oe),Le=[];for(var ze in Ce)Le.push(ze);return Le.reverse(),function $e(){for(;Le.length;){var We=Le.pop();if(We in Ce)return $e.value=We,$e.done=!1,$e}return $e.done=!0,$e}},p.values=me,xe.prototype={constructor:xe,reset:function(Ce){if(this.prev=0,this.next=0,this.sent=this._sent=d,this.done=!1,this.delegate=null,this.method="next",this.arg=d,this.tryEntries.forEach(se),!Ce)for(var Le in this)"t"===Le.charAt(0)&&c.call(this,Le)&&!isNaN(+Le.slice(1))&&(this[Le]=d)},stop:function(){this.done=!0;var Ce=this.tryEntries[0].completion;if("throw"===Ce.type)throw Ce.arg;return this.rval},dispatchException:function(Ce){if(this.done)throw Ce;var Le=this;function ze(tt,Ue){return He.type="throw",He.arg=Ce,Le.next=tt,Ue&&(Le.method="next",Le.arg=d),!!Ue}for(var $e=this.tryEntries.length-1;$e>=0;--$e){var We=this.tryEntries[$e],He=We.completion;if("root"===We.tryLoc)return ze("end");if(We.tryLoc<=this.prev){var Je=c.call(We,"catchLoc"),j=c.call(We,"finallyLoc");if(Je&&j){if(this.prev<We.catchLoc)return ze(We.catchLoc,!0);if(this.prev<We.finallyLoc)return ze(We.finallyLoc)}else if(Je){if(this.prev<We.catchLoc)return ze(We.catchLoc,!0)}else{if(!j)throw new Error("try statement without catch or finally");if(this.prev<We.finallyLoc)return ze(We.finallyLoc)}}}},abrupt:function(Ce,Le){for(var ze=this.tryEntries.length-1;ze>=0;--ze){var $e=this.tryEntries[ze];if($e.tryLoc<=this.prev&&c.call($e,"finallyLoc")&&this.prev<$e.finallyLoc){var We=$e;break}}We&&("break"===Ce||"continue"===Ce)&&We.tryLoc<=Le&&Le<=We.finallyLoc&&(We=null);var He=We?We.completion:{};return He.type=Ce,He.arg=Le,We?(this.method="next",this.next=We.finallyLoc,I):this.complete(He)},complete:function(Ce,Le){if("throw"===Ce.type)throw Ce.arg;return"break"===Ce.type||"continue"===Ce.type?this.next=Ce.arg:"return"===Ce.type?(this.rval=this.arg=Ce.arg,this.method="return",this.next="end"):"normal"===Ce.type&&Le&&(this.next=Le),I},finish:function(Ce){for(var Le=this.tryEntries.length-1;Le>=0;--Le){var ze=this.tryEntries[Le];if(ze.finallyLoc===Ce)return this.complete(ze.completion,ze.afterLoc),se(ze),I}},catch:function(Ce){for(var Le=this.tryEntries.length-1;Le>=0;--Le){var ze=this.tryEntries[Le];if(ze.tryLoc===Ce){var $e=ze.completion;if("throw"===$e.type){var We=$e.arg;se(ze)}return We}}throw new Error("illegal catch attempt")},delegateYield:function(Ce,Le,ze){return this.delegate={iterator:me(Ce),resultName:Le,nextLoc:ze},"next"===this.method&&(this.arg=d),I}},p}typeof self<"u"&&self,ct.exports=function(){var y,r,d={302:function(r,C,m){var O;C.formatArgs=function(O){if(O[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+O[0]+(this.useColors?"%c ":" ")+"+"+r.exports.humanize(this.diff),this.useColors){var s="color: "+this.color;O.splice(1,0,s,"color: inherit");var ne=0,ee=0;O[0].replace(/%[a-zA-Z%]/g,function(Z){"%%"!==Z&&(ne++,"%c"===Z&&(ee=ne))}),O.splice(ee,0,s)}},C.save=function(O){try{O?C.storage.setItem("debug",O):C.storage.removeItem("debug")}catch{}},C.load=function(){var O;try{O=C.storage.getItem("debug")}catch{}return!O&&typeof process<"u"&&"env"in process&&(O=process.env.DEBUG),O},C.useColors=function(){return!(!(typeof window<"u"&&window.process)||"renderer"!==window.process.type&&!window.process.__nwjs)||!(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},C.storage=function(){try{return localStorage}catch{}}(),C.destroy=(O=!1,function(){O||(O=!0)}),C.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],C.log=console.debug||console.log||function(){},r.exports=m(65)(C),r.exports.formatters.j=function(O){try{return JSON.stringify(O)}catch(s){return"[UnexpectedJSONParseError]: "+s.message}}},65:function(r,C,m){r.exports=function(k){function O(ee){var Z,v,E,I=null;function H(){for(var G=arguments.length,Y=new Array(G),ie=0;ie<G;ie++)Y[ie]=arguments[ie];if(H.enabled){var ye=H,ae=Number(new Date);ye.diff=ae-(Z||ae),ye.prev=Z,ye.curr=ae,Z=ae,Y[0]=O.coerce(Y[0]),"string"!=typeof Y[0]&&Y.unshift("%O");var N=0;Y[0]=Y[0].replace(/%([a-zA-Z%])/g,function(he,pe){if("%%"===he)return"%";N++;var ce=O.formatters[pe];return"function"==typeof ce&&(he=ce.call(ye,Y[N]),Y.splice(N,1),N--),he}),O.formatArgs.call(ye,Y),(ye.log||O.log).apply(ye,Y)}}return H.namespace=ee,H.useColors=O.useColors(),H.color=O.selectColor(ee),H.extend=s,H.destroy=O.destroy,Object.defineProperty(H,"enabled",{enumerable:!0,configurable:!1,get:function(){return null!==I?I:(v!==O.namespaces&&(v=O.namespaces,E=O.enabled(ee)),E)},set:function(Y){I=Y}}),"function"==typeof O.init&&O.init(H),H}function s(ee,Z){var v=O(this.namespace+(void 0===Z?":":Z)+ee);return v.log=this.log,v}function ne(ee){return ee.toString().substring(2,ee.toString().length-2).replace(/\.\*\?$/,"*")}return O.debug=O,O.default=O,O.coerce=function(ee){return ee instanceof Error?ee.stack||ee.message:ee},O.disable=function(){var ee=[].concat(O.names.map(ne),O.skips.map(ne).map(function(Z){return"-"+Z})).join(",");return O.enable(""),ee},O.enable=function(ee){var Z;O.save(ee),O.namespaces=ee,O.names=[],O.skips=[];var v=("string"==typeof ee?ee:"").split(/[\s,]+/),E=v.length;for(Z=0;Z<E;Z++)v[Z]&&("-"===(ee=v[Z].replace(/\*/g,".*?"))[0]?O.skips.push(new RegExp("^"+ee.slice(1)+"$")):O.names.push(new RegExp("^"+ee+"$")))},O.enabled=function(ee){if("*"===ee[ee.length-1])return!0;var Z,v;for(Z=0,v=O.skips.length;Z<v;Z++)if(O.skips[Z].test(ee))return!1;for(Z=0,v=O.names.length;Z<v;Z++)if(O.names[Z].test(ee))return!0;return!1},O.humanize=m(247),O.destroy=function(){},Object.keys(k).forEach(function(ee){O[ee]=k[ee]}),O.names=[],O.skips=[],O.formatters={},O.selectColor=function(ee){for(var Z=0,v=0;v<ee.length;v++)Z=(Z<<5)-Z+ee.charCodeAt(v),Z|=0;return O.colors[Math.abs(Z)%O.colors.length]},O.enable(O.load()),O}},247:function(r){var C=1e3,m=60*C,k=60*m,O=24*k;function Z(v,E,I,H){var G=E>=1.5*I;return Math.round(v/I)+" "+H+(G?"s":"")}r.exports=function(v,E){E=E||{};var I=typeof v;if("string"===I&&v.length>0)return function(v){if(!((v=String(v)).length>100)){var E=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(v);if(E){var I=parseFloat(E[1]);switch((E[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*I;case"weeks":case"week":case"w":return 6048e5*I;case"days":case"day":case"d":return I*O;case"hours":case"hour":case"hrs":case"hr":case"h":return I*k;case"minutes":case"minute":case"mins":case"min":case"m":return I*m;case"seconds":case"second":case"secs":case"sec":case"s":return I*C;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return I;default:return}}}}(v);if("number"===I&&isFinite(v))return E.long?function(v){var E=Math.abs(v);return E>=O?Z(v,E,O,"day"):E>=k?Z(v,E,k,"hour"):E>=m?Z(v,E,m,"minute"):E>=C?Z(v,E,C,"second"):v+" ms"}(v):function(v){var E=Math.abs(v);return E>=O?Math.round(v/O)+"d":E>=k?Math.round(v/k)+"h":E>=m?Math.round(v/m)+"m":E>=C?Math.round(v/C)+"s":v+"ms"}(v);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(v))}}},p={};function l(y){var r=p[y];if(void 0!==r)return r.exports;var C=p[y]={exports:{}};return d[y](C,C.exports,l),C.exports}r=Object.getPrototypeOf?function(C){return Object.getPrototypeOf(C)}:function(C){return C.__proto__},l.t=function(C,m){if(1&m&&(C=this(C)),8&m||"object"==typeof C&&C&&(4&m&&C.__esModule||16&m&&"function"==typeof C.then))return C;var k=Object.create(null);l.r(k);var O={};y=y||[null,r({}),r([]),r(r)];for(var s=2&m&&C;"object"==typeof s&&!~y.indexOf(s);s=r(s))Object.getOwnPropertyNames(s).forEach(function(ne){return O[ne]=function(){return C[ne]}});return O.default=function(){return C},l.d(k,O),k},l.d=function(y,r){for(var C in r)l.o(r,C)&&!l.o(y,C)&&Object.defineProperty(y,C,{enumerable:!0,get:r[C]})},l.o=function(y,r){return Object.prototype.hasOwnProperty.call(y,r)},l.r=function(y){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(y,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(y,"__esModule",{value:!0})};var c={};return function(){"use strict";l.r(c),l.d(c,{ActionObjectType:function(){return Ce},ChannelType:function(){return h},ChildAppWindow:function(){return ua},DialogDimension:function(){return oe},ErrorCode:function(){return ze},FileOpenPreference:function(){return Oe},FrameContexts:function(){return j},HostClientType:function(){return He},HostName:function(){return Je},LiveShareHost:function(){return Wr},NotificationTypes:function(){return fn},ParentAppWindow:function(){return Ja},SecondaryM365ContentIdName:function(){return Le},TaskModuleDimension:function(){return g},TeamType:function(){return tt},UserSettingTypes:function(){return bn},UserTeamRole:function(){return Ue},ViewerActionTypes:function(){return uo},app:function(){return De},appEntity:function(){return xi},appInitialization:function(){return Bo},appInstallDialog:function(){return rr},authentication:function(){return Nn},barCode:function(){return Ui},calendar:function(){return hr},call:function(){return $i},chat:function(){return sr},clipboard:function(){return Ni},conversations:function(){return Zo},dialog:function(){return zn},enablePrintCapability:function(){return Ca},executeDeepLink:function(){return Gr},externalAppAuthentication:function(){return bi},externalAppCardActions:function(){return Pi},files:function(){return wi},geoLocation:function(){return cr},getAdaptiveCardSchemaVersion:function(){return Qa},getContext:function(){return ya},getMruTabInstances:function(){return Lr},getTabInstances:function(){return Ar},initialize:function(){return _a},initializeWithFrameContext:function(){return kr},liveShare:function(){return ai},location:function(){return mi},logs:function(){return Mn},mail:function(){return mr},marketplace:function(){return ci},media:function(){return Go},meeting:function(){return dr},meetingRoom:function(){return Oi},menus:function(){return mo},monetization:function(){return fi},navigateBack:function(){return zr},navigateCrossDomain:function(){return Nr},navigateToTab:function(){return Ur},notifications:function(){return Si},openFilePreview:function(){return ra},pages:function(){return tn},people:function(){return fr},print:function(){return Sr},profile:function(){return vr},registerAppButtonClickHandler:function(){return Ma},registerAppButtonHoverEnterHandler:function(){return Er},registerAppButtonHoverLeaveHandler:function(){return Ji},registerBackButtonHandler:function(){return xr},registerBeforeUnloadHandler:function(){return Tr},registerChangeSettingsHandler:function(){return Rr},registerCustomHandler:function(){return ia},registerFocusEnterHandler:function(){return Ir},registerFullScreenHandler:function(){return vi},registerOnLoadHandler:function(){return Dr},registerOnThemeChangeHandler:function(){return Eo},registerUserSettingsChangeHandler:function(){return Fa},remoteCamera:function(){return Ei},returnFocus:function(){return Br},search:function(){return Cr},secondaryBrowser:function(){return ur},sendCustomEvent:function(){return La},sendCustomMessage:function(){return Aa},setFrameContext:function(){return Vr},settings:function(){return _i},shareDeepLink:function(){return Fr},sharing:function(){return yr},stageView:function(){return ii},tasks:function(){return yi},teams:function(){return Di},teamsCore:function(){return Xo},thirdPartyCloudStorage:function(){return Qi},uploadCustomApp:function(){return Ra},version:function(){return go},videoEffects:function(){return ko},videoEffectsEx:function(){return Ti},visualMedia:function(){return ji},webStorage:function(){return Ki}});var k,O,o,y=(0,l(302).debug)("teamsJs");function r(o){return y.extend(o)}function C(o,M){return o+"_"+M}function m(o){return/^v\d+_[\w.]+$/.test(o)}(o=k||(k={})).V_0="v0",o.V_1="v1",o.V_2="v2",o.V_3="v3",function(o){o.App_GetContext="app.getContext",o.App_Initialize="app.initialize",o.App_NotifyAppLoaded="app.notifyAppLoaded",o.App_NotifyExpectedFailure="app.notifyExpectedFailure",o.App_NotifyFailure="app.notifyFailure",o.App_NotifySuccess="app.notifySuccess",o.App_OpenLink="app.openLink",o.App_RegisterOnThemeChangeHandler="app.registerOnThemeChangeHandler",o.AppEntity_SelectAppEntity="appEntity.selectAppEntity",o.BarCode_HasPermission="barCode.hasPermission",o.BarCode_RequestPermission="barCode.requestPermission",o.BarCode_ScanBarCode="barCode.scanBarCode",o.Calendar_ComposeMeeting="calendar.composeMeeting",o.Calendar_OpenCalendarItem="calendar.openCalendarItem",o.Call_StartCall="call.startCall",o.Clipboard_Read="clipboard.read",o.Clipboard_Write="clipboard.write",o.Dialog_AdaptiveCard_Bot_Open="dialog.adaptiveCard.bot.open",o.Dialog_AdaptiveCard_Open="dialog.adaptiveCard.open",o.Dialog_Update_Resize="dialog.update.resize",o.Dialog_Url_Bot_Open="dialog.url.bot.open",o.Dialog_Url_Open="dialog.url.open",o.Dialog_Url_Submit="dialog.url.submit",o.Dialog_Url_SendMessageToParentFromDialog="dialog.url.sendMessageToParentFromDialog",o.Dialog_Url_SendMessageToDialog="dialog.url.sendMessageToDialog",o.GeoLocation_GetCurrentLocation="geoLocation.getCurrentLocation",o.GeoLocation_HasPermission="geoLocation.hasPermission",o.GeoLocation_Map_ChooseLocation="geoLocation.map.chooseLocation",o.GeoLocation_RequestPermission="geoLocation.hasPermission",o.GeoLocation_ShowLocation="geoLocation.showLocation",o.Location_GetLocation="location.getLocation",o.Location_ShowLocation="location.showLocation",o.Mail_ComposeMail="mail.composeMail",o.Mail_OpenMailItem="mail.openMailItem",o.Marketplace_AddOrUpdateCartItems="marketplace.addOrUpdateCartItems",o.Marketplace_GetCart="marketplace.getCart",o.Marketplace_RemoveCardItems="marketplace.removeCartItems",o.Marketplace_UpdateCartStatus="marketplace.updateCartStatus",o.Media_CaptureImage="media.captureImage",o.Media_Controller="media.controller",o.Media_GetMedia="media.getMedia",o.Media_HasPermission="media.hasPermission",o.Media_RequestPermission="media.requestPermission",o.Media_ScanBarCode="media.scanBarCode",o.Media_SelectMedia="media.selectMedia",o.Media_ViewImages="media.viewImages",o.Navigation_NavigateBack="navigation.navigateBack",o.Navigation_NavigateCrossDomain="navigation.navigateCrossDomain",o.Navigation_NavigateToTab="navigation.navigateToTab",o.Navigation_ReturnFocus="navigation.returnFocus",o.Pages_AppButton_OnClick="pages.appButton.onClick",o.Pages_AppButton_OnHoverEnter="pages.appButton.onHoverEnter",o.Pages_AppButton_OnHoverLeave="pages.appButton.onHoverLeave",o.Pages_BackStack_NavigateBack="pages.backStack.navigateBack",o.Pages_BackStack_RegisterBackButtonHandler="pages.backStack.registerBackButtonHandler",o.Pages_Config_RegisterChangeConfigHandler="pages.config.registerChangeConfigHandler",o.Pages_Config_RegisterOnRemoveHandlerHelper="pages.config.registerOnRemoveHandlerHelper",o.Pages_Config_RegisterOnSaveHandlerHelper="pages.config.registerOnSaveHandlerHelper",o.Pages_Config_SetConfig="pages.config.setConfig",o.Pages_Config_SetValidityState="pages.config.setValidityState",o.Pages_CurrentApp_NavigateTo="pages.currentApp.navigateTo",o.Pages_CurrentApp_NavigateToDefaultPage="pages.currentApp.navigateToDefaultPage",o.Pages_FullTrust_EnterFullscreen="pages.fullTrust.enterFullscreen",o.Pages_FullTrust_ExitFullscreen="pages.fullTrust.exitFullscreen",o.Pages_GetConfig="pages.getConfig.",o.Pages_NavigateCrossDomain="pages.navigateCrossDomain",o.Pages_NavigateToApp="pages.navigateToApp",o.Pages_RegisterFocusEnterHandler="pages.registerFocusEnterHandler",o.Pages_RegisterFullScreenHandler="pages.registerFullScreenHandler",o.Pages_ReturnFocus="pages.returnFocus",o.Pages_SetCurrentFrame="pages.setCurrentFrame",o.Pages_ShareDeepLink="pages.shareDeepLink",o.Pages_Tabs_GetMruTabInstances="pages.tabs.getMruTabInstances",o.Pages_Tabs_GetTabInstances="pages.tabs.getTabInstances",o.Pages_Tabs_NavigateToTab="pages.tabs.navigateToTab",o.PublicAPIs_ExecuteDeepLink="executeDeepLink",o.PublicAPIs_GetContext="getContext",o.PublicAPIs_GetMruTabInstances="getMruTabInstances",o.PublicAPIs_GetTabInstances="getTabInstances",o.PublicAPIs_Initialize="initialize",o.PublicAPIs_RegisterAppButtonClickHandler="registerAppButtonClickHandler",o.PublicAPIs_RegisterAppButtonHoverEnterHandler="registerAppButtonHoverEnterHandler",o.PublicAPIs_RegisterAppButtonHoverLeaveHandler="registerAppButtonHoverLeaveHandler",o.PublicAPIs_RegisterBackButtonHandler="registerBackButtonHandler",o.PublicAPIs_RegisterChangeSettingsHandler="registerChangeSettingsHandler",o.PublicAPIs_RegisterFocusEnterHandler="registerFocusEnterHandler",o.PublicAPIs_RegisterFullScreenHandler="registerFullScreenHandler",o.PublicAPIs_RegisterOnLoadHandler="registerOnLoadHandler",o.PublicAPIs_RegisterOnThemeChangeHandlerHelper="registerOnThemeChangeHandlerHelper",o.PublicAPIs_SetFrameContext="setFrameContext",o.PublicAPIs_ShareDeepLink="shareDeepLink",o.RegisterHandler="registerHandler",o.RegisterOnThemeChangeHandler="registerOnThemeChangeHandler",o.Settings_Remove_Failure="settings.remove.failure",o.Settings_Remove_Success="settings.remove.success",o.Settings_Save_Failure="settings.save.failure",o.Settings_Save_Success="settings.save.success",o.Tasks_StartTask="tasks.startTask",o.Tasks_SubmitTask="tasks.submitTask",o.Tasks_UpdateTask="tasks.updateTask"}(O||(O={}));var s=JSON.parse('{"validOrigins":["teams.microsoft.com","teams.microsoft.us","gov.teams.microsoft.us","dod.teams.microsoft.us","int.teams.microsoft.com","teams.live.com","devspaces.skype.com","ssauth.skype.com","local.teams.live.com","local.teams.live.com:8080","local.teams.office.com","local.teams.office.com:8080","outlook.office.com","outlook-sdf.office.com","outlook.office365.com","outlook-sdf.office365.com","outlook.live.com","outlook-sdf.live.com","*.teams.microsoft.com","*.www.office.com","www.office.com","word.office.com","excel.office.com","powerpoint.office.com","www.officeppe.com","*.www.microsoft365.com","www.microsoft365.com","bing.com","edgeservices.bing.com","www.bing.com","www.staging-bing-int.com","teams.cloud.microsoft","outlook.cloud.microsoft","m365.cloud.microsoft","copilot.microsoft.com"]}'),ne="2.0.1",Z="1.9.0",v="1.8.0",E=l.t(s,2).validOrigins,I=new URL("https://res.cdn.office.net/teams-js/validDomains/json/validDomains.json"),H=/^https:\/\//,G="https",Y="teams.microsoft.com",ie="The library has not yet been initialized",ye="The runtime has not yet been initialized",ae="The runtime version is not supported",J=function(){};J.initializeCalled=!1,J.initializeCompleted=!1,J.additionalValidOrigins=[],J.initializePromise=void 0,J.isFramelessWindow=!1,J.frameContext=void 0,J.hostClientType=void 0,J.printCapabilityEnabled=!1;var he,N={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},pe=new Uint8Array(16);function ce(){if(!he&&!(he=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return he(pe)}for(var ge=[],se=0;se<256;++se)ge.push((se+256).toString(16).slice(1));var Oe,Ce,Le,ze,$e,We,He,Je,j,tt,Ue,oe,me=function(M,R,A){if(N.randomUUID&&!R&&!M)return N.randomUUID();var D=(M=M||{}).random||(M.rng||ce)();if(D[6]=15&D[6]|64,D[8]=63&D[8]|128,R){A=A||0;for(var z=0;z<16;++z)R[A+z]=D[z];return R}return function(o,M){return void 0===M&&(M=0),(ge[o[M+0]]+ge[o[M+1]]+ge[o[M+2]]+ge[o[M+3]]+"-"+ge[o[M+4]]+ge[o[M+5]]+"-"+ge[o[M+6]]+ge[o[M+7]]+"-"+ge[o[M+8]]+ge[o[M+9]]+"-"+ge[o[M+10]]+ge[o[M+11]]+ge[o[M+12]]+ge[o[M+13]]+ge[o[M+14]]+ge[o[M+15]]).toLowerCase()}(D)};(function(o){o.Inline="inline",o.Desktop="desktop",o.Web="web"})(Oe||(Oe={})),function(o){o.M365Content="m365content"}(Ce||(Ce={})),function(o){o.DriveId="driveId",o.GroupId="groupId",o.SiteId="siteId",o.UserId="userId"}(Le||(Le={})),function(o){o[o.NOT_SUPPORTED_ON_PLATFORM=100]="NOT_SUPPORTED_ON_PLATFORM",o[o.INTERNAL_ERROR=500]="INTERNAL_ERROR",o[o.NOT_SUPPORTED_IN_CURRENT_CONTEXT=501]="NOT_SUPPORTED_IN_CURRENT_CONTEXT",o[o.PERMISSION_DENIED=1e3]="PERMISSION_DENIED",o[o.NETWORK_ERROR=2e3]="NETWORK_ERROR",o[o.NO_HW_SUPPORT=3e3]="NO_HW_SUPPORT",o[o.INVALID_ARGUMENTS=4e3]="INVALID_ARGUMENTS",o[o.UNAUTHORIZED_USER_OPERATION=5e3]="UNAUTHORIZED_USER_OPERATION",o[o.INSUFFICIENT_RESOURCES=6e3]="INSUFFICIENT_RESOURCES",o[o.THROTTLE=7e3]="THROTTLE",o[o.USER_ABORT=8e3]="USER_ABORT",o[o.OPERATION_TIMED_OUT=8001]="OPERATION_TIMED_OUT",o[o.OLD_PLATFORM=9e3]="OLD_PLATFORM",o[o.FILE_NOT_FOUND=404]="FILE_NOT_FOUND",o[o.SIZE_EXCEEDED=1e4]="SIZE_EXCEEDED"}(ze||(ze={})),function(o){o.GeoLocation="geolocation",o.Media="media"}($e||($e={})),function(o){o.TextPlain="text/plain",o.TextHtml="text/html",o.ImagePNG="image/png",o.ImageJPEG="image/jpeg"}(We||(We={})),function(o){o.desktop="desktop",o.web="web",o.android="android",o.ios="ios",o.ipados="ipados",o.macos="macos",o.rigel="rigel",o.surfaceHub="surfaceHub",o.teamsRoomsWindows="teamsRoomsWindows",o.teamsRoomsAndroid="teamsRoomsAndroid",o.teamsPhones="teamsPhones",o.teamsDisplays="teamsDisplays"}(He||(He={})),function(o){o.office="Office",o.outlook="Outlook",o.outlookWin32="OutlookWin32",o.orange="Orange",o.places="Places",o.teams="Teams",o.teamsModern="TeamsModern"}(Je||(Je={})),function(o){o.settings="settings",o.content="content",o.authentication="authentication",o.remove="remove",o.task="task",o.sidePanel="sidePanel",o.stage="stage",o.meetingStage="meetingStage"}(j||(j={})),function(o){o[o.Standard=0]="Standard",o[o.Edu=1]="Edu",o[o.Class=2]="Class",o[o.Plc=3]="Plc",o[o.Staff=4]="Staff"}(tt||(tt={})),function(o){o[o.Admin=0]="Admin",o[o.User=1]="User",o[o.Guest=2]="Guest"}(Ue||(Ue={})),function(o){o.Large="large",o.Medium="medium",o.Small="small"}(oe||(oe={}));var h,g=oe;!function(o){o.Regular="Regular",o.Private="Private",o.Shared="Shared"}(h||(h={}));var u={errorCode:ze.NOT_SUPPORTED_ON_PLATFORM},te={adaptiveCardSchemaVersion:{majorVersion:1,minorVersion:5}},U=new Error("Invalid input count: Must supply a valid image count (limit of 10)."),Q=new Error("Invalid response: Received more images than the specified max limit in the response.");function B(o){return function(M,R){if(!M)throw new Error(o||R)}}function P(o,M){if("string"!=typeof o||"string"!=typeof M)return NaN;var R=o.split("."),A=M.split(".");function D(_e){return/^\d+$/.test(_e)}if(!R.every(D)||!A.every(D))return NaN;for(;R.length<A.length;)R.push("0");for(;A.length<R.length;)A.push("0");for(var z=0;z<R.length;++z)if(Number(R[z])!=Number(A[z]))return Number(R[z])>Number(A[z])?1:-1;return 0}function q(){return me()}function le(o){return Object.keys(o).forEach(function(M){"object"==typeof o[M]&&le(o[M])}),Object.freeze(o)}function V(o,M){for(var R=arguments.length,A=new Array(R>2?R-2:0),D=2;D<R;D++)A[D-2]=arguments[D];var z=o.apply(void 0,A);return z.then(function(){M&&M(null)}).catch(function(_e){M&&M(_e)}),z}function X(o){return!(P(o.majorVersion+"."+o.minorVersion,"1.5")>=0)}function ue(o){return"https:"===o.protocol}function Ne(o,M){return new Promise(function(R,A){o||A("MimeType cannot be null or empty."),M||A("Base64 string cannot be null or empty.");var D=atob(M);if(o.startsWith("image/")){for(var z=new Uint8Array(D.length),_e=0;_e<D.length;_e++)z[_e]=D.charCodeAt(_e);R(new Blob([z],{type:o}))}R(new Blob([D],{type:o}))})}function Qe(o){return new Promise(function(M,R){0===o.size&&R(new Error("Blob cannot be empty."));var A=new FileReader;A.onloadend=function(){A.result?M(A.result.toString().split(",")[1]):R(new Error("Failed to read the blob"))},A.onerror=function(){R(A.error)},A.readAsDataURL(o)})}function Xe(){if(it())throw new Error("window object undefined at SSR check");return window}function it(){return typeof window>"u"}var ut=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function ot(o){if(!ut.test(o))throw new Error("App ID is not valid. Must be GUID format. App ID: "+o)}var Ye=r("runtime"),dt=3;function Ot(o){return o.apiVersion===dt}var K={apiVersion:-1,supports:{}},yn={apiVersion:3,hostVersionsInfo:te,isLegacyTeams:!0,supports:{appInstallDialog:{},appEntity:{},call:{},chat:{},conversations:{},dialog:{card:{bot:{}},url:{bot:{}},update:{}},interactive:{},logs:{},meetingRoom:{},menus:{},monetization:{},notifications:{},pages:{config:{},backStack:{},fullTrust:{}},remoteCamera:{},teams:{fullTrust:{}},teamsCore:{},video:{sharedFrame:{}}}},on=[He.desktop,He.web,He.rigel,He.surfaceHub,He.teamsRoomsWindows,He.teamsRoomsAndroid,He.teamsPhones,He.teamsDisplays],yo=[].concat(on,[He.android,He.ios,He.ipados]);var zo=[{versionToUpgradeFrom:1,upgradeToNextVersion:function(M){var R;return{apiVersion:2,hostVersionsInfo:void 0,isLegacyTeams:M.isLegacyTeams,supports:Object.assign(Object.assign({},M.supports),{dialog:M.supports.dialog?{card:void 0,url:M.supports.dialog,update:null===(R=M.supports.dialog)||void 0===R?void 0:R.update}:void 0})}}},{versionToUpgradeFrom:2,upgradeToNextVersion:function(M){var D=function(M,R){var A={};for(var D in M)Object.prototype.hasOwnProperty.call(M,D)&&R.indexOf(D)<0&&(A[D]=M[D]);if(null!=M&&"function"==typeof Object.getOwnPropertySymbols){var z=0;for(D=Object.getOwnPropertySymbols(M);z<D.length;z++)R.indexOf(D[z])<0&&Object.prototype.propertyIsEnumerable.call(M,D[z])&&(A[D[z]]=M[D[z]])}return A}(M.supports,["appNotification"]);return Object.assign(Object.assign({},M),{apiVersion:3,supports:D})}}],po={"1.0.0":[{capability:{pages:{appButton:{},tabs:{}},stageView:{}},hostClientTypes:on}],"1.9.0":[{capability:{location:{}},hostClientTypes:yo}],"2.0.0":[{capability:{people:{}},hostClientTypes:yo},{capability:{sharing:{}},hostClientTypes:[He.desktop,He.web]}],"2.0.1":[{capability:{teams:{fullTrust:{joinedTeams:{}}}},hostClientTypes:[He.android,He.desktop,He.ios,He.teamsRoomsAndroid,He.teamsPhones,He.teamsDisplays,He.web]},{capability:{webStorage:{}},hostClientTypes:[He.desktop]}],"2.0.5":[{capability:{webStorage:{}},hostClientTypes:[He.android,He.ios]}],"2.0.8":[{capability:{sharing:{}},hostClientTypes:[He.android,He.ios]}]},lo=Ye.extend("generateBackCompatRuntimeConfig");function xo(o,M){var R=Object.assign({},o);for(var A in M)Object.prototype.hasOwnProperty.call(M,A)&&("object"!=typeof M[A]||Array.isArray(M[A])?A in o||(R[A]=M[A]):R[A]=xo(o[A]||{},M[A]));return R}function so(o,M,R){lo("generating back compat runtime config for %s",o);var A=Object.assign({},M.supports);lo("Supported capabilities in config before updating based on highestSupportedVersion: %o",A),Object.keys(R).forEach(function(z){P(o,z)>=0&&R[z].forEach(function(_e){void 0!==J.hostClientType&&_e.hostClientTypes.includes(J.hostClientType)&&(A=xo(A,_e.capability))})});var D={apiVersion:dt,hostVersionsInfo:te,isLegacyTeams:!0,supports:A};return lo("Runtime config after updating based on highestSupportedVersion: %o",D),D}var bo=Ye.extend("applyRuntimeConfig");function Rn(o){"string"==typeof o.apiVersion&&(bo("Trying to apply runtime with string apiVersion, processing as v1: %o",o),o=Object.assign(Object.assign({},o),{apiVersion:1})),bo("Fast-forwarding runtime %o",o);var M=function(o){var M=o;if(M.apiVersion<dt&&zo.forEach(function(R){M.apiVersion===R.versionToUpgradeFrom&&(M=R.upgradeToNextVersion(M))}),Ot(M))return M;throw new Error("Received a runtime that could not be upgraded to the latest version")}(o);bo("Applying runtime %o",M),K=le(M)}var go="2.19.0",Io=r("internal"),Po=Io.extend("ensureInitializeCalled"),Ho=Io.extend("ensureInitialized");function Wn(){if(!J.initializeCalled)throw Po(ie),new Error(ie)}function we(o){if(!J.initializeCompleted)throw Ho("%s. initializeCalled: %s",ie,J.initializeCalled.toString()),new Error(ie);for(var M=arguments.length,R=new Array(M>1?M-1:0),A=1;A<M;A++)R[A-1]=arguments[A];if(R&&R.length>0){for(var D=!1,z=0;z<R.length;z++)if(R[z]===J.frameContext){D=!0;break}if(!D)throw new Error("This call is only allowed in following contexts: "+JSON.stringify(R)+'. Current context: "'+J.frameContext+'".')}return function(o){if(Ot(o))return!0;throw-1===o.apiVersion?new Error(ye):new Error(ae)}(o)}function Gn(o){void 0===o&&(o=ne);var M=P(J.clientSupportedSDKVersion,o);return!isNaN(M)&&M>=0}function Ro(){return J.hostClientType==He.android||J.hostClientType==He.ios||J.hostClientType==He.ipados}function ho(o){if(void 0===o&&(o=ne),!Ro())throw{errorCode:ze.NOT_SUPPORTED_ON_PLATFORM};if(!Gn(o))throw{errorCode:ze.OLD_PLATFORM}}function nn(o){return null==o}var Nn,Ao=function(M,R,A,D){return new(A||(A=Promise))(function(_e,be){function Pe(ke){try{ve(D.next(ke))}catch(je){be(je)}}function Me(ke){try{ve(D.throw(ke))}catch(je){be(je)}}function ve(ke){ke.done?_e(ke.value):function(_e){return _e instanceof A?_e:new A(function(be){be(_e)})}(ke.value).then(Pe,Me)}ve((D=D.apply(M,R||[])).next())})},lt=[],mt=r("validateOrigin");function ht(){return Ao(this,void 0,void 0,a().mark(function o(){return a().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.abrupt("return",0!==lt.length?lt:it()?(lt=E,E):fetch(I).then(function(A){if(!A.ok)throw new Error("Invalid Response from Fetch Call");return A.json().then(function(D){if(Jt(JSON.stringify(D)))return lt=D.validOrigins;throw new Error("Valid Origins List Is Invalid")})}).catch(function(A){return mt("validOrigins fetch call to CDN failed with error: %s. Defaulting to fallback list",A),lt=E}));case 1:case"end":return R.stop()}},o)}))}function Jt(o){var M=JSON.parse(o);try{M=JSON.parse(o)}catch{return!1}if(!M.validOrigins)return!1;for(var A,R=w(M.validOrigins);!(A=R()).done;){var D=A.value;try{new URL("https://"+D)}catch{return mt("isValidOriginsFromCDN call failed to validate origin: %s",D),!1}}return!0}function $t(o,M){if("*."===o.substring(0,2)){var R=o.substring(1);if(M.length>R.length&&M.split(".").length===R.split(".").length&&M.substring(M.length-R.length)===R)return!0}else if(o===M)return!0;return!1}function hn(o){return ht().then(function(M){if(!ue(o))return mt("Origin %s is invalid because it is not using https protocol. Protocol being used: %s",o,o.protocol),!1;var R=o.host;if(M.some(function(_e){return $t(_e,R)}))return!0;for(var D,A=w(J.additionalValidOrigins);!(D=A()).done;){var z=D.value;if($t("https://"===z.substring(0,8)?z.substring(8):z,R))return!0}return mt("Origin %s is invalid because it is not an origin approved by this library or included in the call to app.initialize.\nOrigins approved by this library: %o\nOrigins included in app.initialize: %o",o,M,J.additionalValidOrigins),!1})}!function(o){var M,R,A,Ze;function z(Ze){return new Promise(function(wt,It){if(J.hostClientType===He.desktop||J.hostClientType===He.android||J.hostClientType===He.ios||J.hostClientType===He.ipados||J.hostClientType===He.macos||J.hostClientType===He.rigel||J.hostClientType===He.teamsRoomsWindows||J.hostClientType===He.teamsRoomsAndroid||J.hostClientType===He.teamsPhones||J.hostClientType===He.teamsDisplays||J.hostClientType===He.surfaceHub){var Ct=document.createElement("a");Ct.href=Ze.url,wt(ao("authentication.authenticate",[Ct.href,Ze.width,Ze.height,Ze.isExternal]).then(function(Ht){var Hn=Ht[1];if(Ht[0])return Hn;throw new Error(Hn)}))}else M={success:wt,fail:It},function(Ze){Pe();var wt=Ze.width||600,It=Ze.height||400;wt=Math.min(wt,vt.currentWindow.outerWidth-400),It=Math.min(It,vt.currentWindow.outerHeight-200);var Ct=document.createElement("a");Ct.href=Ze.url.replace("{oauthRedirectMethod}","web");var Ht=void 0!==vt.currentWindow.screenLeft?vt.currentWindow.screenLeft:vt.currentWindow.screenX,en=void 0!==vt.currentWindow.screenTop?vt.currentWindow.screenTop:vt.currentWindow.screenY;vt.childWindow=vt.currentWindow.open(Ct.href,"_blank","toolbar=no, location=yes, status=no, menubar=no, scrollbars=yes, top="+(en+=vt.currentWindow.outerHeight/2-It/2)+", left="+(Ht+=vt.currentWindow.outerWidth/2-wt/2)+", width="+wt+", height="+It),vt.childWindow?(ve(),R=vt.currentWindow.setInterval(function(){if(!vt.childWindow||vt.childWindow.closed)yt("CancelledByUser");else{var Ze=vt.childOrigin;try{vt.childOrigin="*",Te("ping")}finally{vt.childOrigin=Ze}}},100),Ft("initialize",function(){return[j.authentication,J.hostClientType]}),Ft("navigateCrossDomain",function(){return!1})):yt("FailedToOpenWindow")}(Ze)})}function Pe(){ve();try{vt.childWindow&&vt.childWindow.close()}finally{vt.childWindow=null,vt.childOrigin=null}}function ve(){R&&(clearInterval(R),R=0),cn("initialize"),cn("navigateCrossDomain")}function je(Ze){try{M&&M.success(Ze)}finally{M=void 0,Pe()}}function yt(Ze){try{M&&M.fail(new Error(Ze))}finally{M=void 0,Pe()}}function Ut(Ze,wt,It){if(Ze){var Ct=document.createElement("a");Ct.href=decodeURIComponent(Ze),Ct.host&&Ct.host!==Xe().location.host&&"outlook.office.com"===Ct.host&&Ct.search.indexOf("client_type=Win32_Outlook")>-1&&(wt&&"result"===wt&&(It&&(Ct.href=Pt(Ct.href,"result",It)),vt.currentWindow.location.assign(Pt(Ct.href,"authSuccess",""))),wt&&"reason"===wt&&(It&&(Ct.href=Pt(Ct.href,"reason",It)),vt.currentWindow.location.assign(Pt(Ct.href,"authFailure",""))))}}function Pt(Ze,wt,It){var Ct=Ze.indexOf("#"),Ht=-1===Ct?"#":Ze.substr(Ct);return Ht=Ht+"&"+wt+(""!==It?"="+It:""),(Ze=-1===Ct?Ze:Ze.substr(0,Ct))+Ht}o.initialize=function(){Ft("authentication.authenticate.success",je,!1),Ft("authentication.authenticate.failure",yt,!1)},o.registerAuthenticationHandlers=function(Ze){A=Ze},o.authenticate=function(Ze){var wt=void 0!==Ze,It=wt?Ze:A;if(!It)throw new Error("No parameters are provided for authentication");return we(K,j.content,j.sidePanel,j.settings,j.remove,j.task,j.stage,j.meetingStage),z(It).then(function(Ct){try{return It&&It.successCallback?(It.successCallback(Ct),""):Ct}finally{wt||(A=void 0)}}).catch(function(Ct){try{if(It&&It.failureCallback)return It.failureCallback(Ct.message),"";throw Ct}finally{wt||(A=void 0)}})},o.getAuthToken=function(Ze){return Wn(),function(Ze){return new Promise(function(wt){wt(ao("authentication.getAuthToken",[Ze?.resources,Ze?.claims,Ze?.silent]))}).then(function(wt){var Ct=wt[1];if(wt[0])return Ct;throw new Error(Ct)})}(Ze).then(function(wt){return Ze&&Ze.successCallback?(Ze.successCallback(wt),""):wt}).catch(function(wt){if(Ze&&Ze.failureCallback)return Ze.failureCallback(wt.message),"";throw wt})},o.getUser=function(Ze){return Wn(),new Promise(function(Ze){Ze(ao("authentication.getUser"))}).then(function(Ze){var It=Ze[1];if(Ze[0])return It;throw new Error(It)}).then(function(wt){return Ze&&Ze.successCallback?(Ze.successCallback(wt),null):wt}).catch(function(wt){if(Ze&&Ze.failureCallback)return Ze.failureCallback(wt.message),null;throw wt})},o.notifySuccess=function(Ze,wt){Ut(wt,"result",Ze),we(K,j.authentication),St("authentication.authenticate.success",[Ze]),Ie(vt.parentWindow,function(){return setTimeout(function(){return vt.currentWindow.close()},200)})},o.notifyFailure=function(Ze,wt){Ut(wt,"reason",Ze),we(K,j.authentication),St("authentication.authenticate.failure",[Ze]),Ie(vt.parentWindow,function(){return setTimeout(function(){return vt.currentWindow.close()},200)})},(Ze=o.DataResidency||(o.DataResidency={})).Public="public",Ze.EUDB="eudb",Ze.Other="other"}(Nn||(Nn={}));var zn,mo,wn=k.V_2;function jn(o,M){if(we(K,j.content,j.sidePanel,j.task,j.meetingStage),!zn.update.isSupported())throw u;Wt(o,"tasks.updateTask",[M])}function co(o,M,R,A){if(we(K,j.content,j.sidePanel,j.meetingStage),!zn.url.isSupported())throw u;A&&Ft("messageForParent",A),Wt(o,"tasks.startTask",[zn.url.getDialogInfoFromUrlDialogInfo(M)],function(D,z){R?.({err:D,result:z}),cn("messageForParent")})}function Xn(o,M,R,A){if(we(K,j.content,j.sidePanel,j.meetingStage),!zn.url.bot.isSupported())throw u;A&&Ft("messageForParent",A),Wt(o,"tasks.startTask",[zn.url.getDialogInfoFromBotUrlDialogInfo(M)],function(D,z){R?.({err:D,result:z}),cn("messageForParent")})}function Lo(o,M,R){if(we(K,j.content,j.task),!zn.url.isSupported())throw u;Wt(o,"tasks.completeTask",[M,R?Array.isArray(R)?R:[R]:[]])}(function(o){var _e,M=[];function R(_e){J.frameContext&&(J.frameContext===j.task?M.push(_e):cn("messageForChild"))}o.initialize=function(){Ft("messageForChild",R,!1)},function(_e){function be(){return we(K)&&void 0!==(K.supports.dialog&&K.supports.dialog.url)}var ve;function Me(ve){return{url:ve.url,height:ve.size?ve.size.height:oe.Small,width:ve.size?ve.size.width:oe.Small,title:ve.title,fallbackUrl:ve.fallbackUrl}}_e.open=function(ve,ke,je){co(C(wn,O.Dialog_Url_Open),ve,ke,je)},_e.submit=function(ve,ke){Lo(C(wn,O.Dialog_Url_Submit),ve,ke)},_e.sendMessageToParentFromDialog=function(ve){if(we(K,j.task),!be())throw u;Wt(C(wn,O.Dialog_Url_SendMessageToParentFromDialog),"messageForParent",[ve])},_e.sendMessageToDialog=function(ve){if(we(K,j.content,j.sidePanel,j.meetingStage),!be())throw u;Wt(C(wn,O.Dialog_Url_SendMessageToDialog),"messageForChild",[ve])},_e.registerOnMessageFromParent=function(ve){if(we(K,j.task),!be())throw u;for(cn("messageForChild"),Ft("messageForChild",ve),M.reverse();M.length>0;)ve(M.pop())},_e.isSupported=be,(ve=_e.bot||(_e.bot={})).open=function(ke,je,yt){Xn(C(wn,O.Dialog_Url_Bot_Open),ke,je,yt)},ve.isSupported=function(){return we(K)&&void 0!==(K.supports.dialog&&K.supports.dialog.url&&K.supports.dialog.url.bot)},_e.getDialogInfoFromUrlDialogInfo=Me,_e.getDialogInfoFromBotUrlDialogInfo=function(ve){var ke=Me(ve);return ke.completionBotId=ve.completionBotId,ke}}(o.url||(o.url={})),o.isSupported=function(){return!(!we(K)||!K.supports.dialog)},(_e=o.update||(o.update={})).resize=function(be){jn(C(wn,O.Dialog_Update_Resize),be)},_e.isSupported=function(){return!(!we(K)||!K.supports.dialog||!K.supports.dialog.update)},function(_e){function be(){var ke=K.hostVersionsInfo&&K.hostVersionsInfo.adaptiveCardSchemaVersion&&!X(K.hostVersionsInfo.adaptiveCardSchemaVersion);return we(K)&&void 0!==(ke&&K.supports.dialog&&K.supports.dialog.card)}function Me(ke){return{card:ke.card,height:ke.size?ke.size.height:oe.Small,width:ke.size?ke.size.width:oe.Small,title:ke.title}}_e.open=function(ke,je){if(we(K,j.content,j.sidePanel,j.meetingStage),!be())throw u;var yt=Me(ke);Wt(C(wn,O.Dialog_AdaptiveCard_Open),"tasks.startTask",[yt],function(Ut,Pt){je?.({err:Ut,result:Pt})})},_e.isSupported=be,function(ke){function je(){var yt=K.hostVersionsInfo&&K.hostVersionsInfo.adaptiveCardSchemaVersion&&!X(K.hostVersionsInfo.adaptiveCardSchemaVersion);return we(K)&&void 0!==(yt&&K.supports.dialog&&K.supports.dialog.card&&K.supports.dialog.card.bot)}ke.open=function(yt,Ut){if(we(K,j.content,j.sidePanel,j.meetingStage),!je())throw u;var Pt=function(ke){var je=Me(ke);return je.completionBotId=ke.completionBotId,je}(yt);Wt(C(wn,O.Dialog_AdaptiveCard_Bot_Open),"tasks.startTask",[Pt],function(Ze,wt){Ut?.({err:Ze,result:wt})})},ke.isSupported=je}(_e.bot||(_e.bot={}))}(o.adaptiveCard||(o.adaptiveCard={}))})(zn||(zn={})),function(o){var A,D,z,ve;function _e(ve){z&&z(ve)||(we(K),St("viewConfigItemPress",[ve]))}function be(ve){A&&A(ve)||(we(K),St("handleNavBarMenuItemPress",[ve]))}function Pe(ve){D&&D(ve)||(we(K),St("handleActionMenuItemPress",[ve]))}function Me(){return!(!we(K)||!K.supports.menus)}(ve=o.DisplayMode||(o.DisplayMode={}))[ve.ifRoom=0]="ifRoom",ve[ve.overflowOnly=1]="overflowOnly",o.MenuItem=function(){return function(){this.enabled=!0,this.selected=!1}}(),function(ve){ve.dropDown="dropDown",ve.popOver="popOver"}(o.MenuListType||(o.MenuListType={})),o.initialize=function(){Ft("navBarMenuItemPress",be,!1),Ft("actionMenuItemPress",Pe,!1),Ft("setModuleView",_e,!1)},o.setUpViews=function(ve,ke){if(we(K),!Me())throw u;z=ke,St("setUpViews",[ve])},o.setNavBarMenu=function(ve,ke){if(we(K),!Me())throw u;A=ke,St("setNavBarMenu",[ve])},o.showActionMenu=function(ve,ke){if(we(K),!Me())throw u;D=ke,St("showActionMenu",[ve])},o.isSupported=Me}(mo||(mo={}));var Yn=k.V_2,jo=5e3,Fo=r("app");function qt(o,M){return it()?(Fo.extend("initialize")("window object undefined at initialization"),Promise.resolve()):function(o,M,R){return new Promise(function(A,D){var z=setTimeout(D,M,R);o().then(function(_e){clearTimeout(z),A(_e)}).catch(function(_e){clearTimeout(z),D(_e)})})}(function(){return function(o,M){return new Promise(function(R){J.initializeCalled||(J.initializeCalled=!0,Qt.initializeHandlers(),J.initializePromise=function(o,M){var R=this;if(mn.messageListener=function(D){return Ko(R,void 0,void 0,a().mark(function z(){return a().wrap(function(be){for(;;)switch(be.prev=be.next){case 0:return be.next=2,Ai(D);case 2:return be.abrupt("return",be.sent);case 3:case"end":return be.stop()}},z)}))},vt.currentWindow=vt.currentWindow||Xe(),vt.parentWindow=vt.currentWindow.parent!==vt.currentWindow.self?vt.currentWindow.parent:vt.currentWindow.opener,(vt.parentWindow||o)&&vt.currentWindow.addEventListener("message",mn.messageListener,!1),!vt.parentWindow){var A=vt.currentWindow;if(!A.nativeInterface)return Promise.reject(new Error("Initialization Failed. No Parent window found."));J.isFramelessWindow=!0,A.onNativeMessage=Fi}try{return vt.parentOrigin="*",Jo(M,"initialize",[go,dt]).then(function(D){return{context:D[0],clientType:D[1],runtimeConfig:D[2],clientSupportedSDKVersion:D[3]}})}finally{vt.parentOrigin=null}}(M,o).then(function(A){var z=A.clientType,_e=A.runtimeConfig,be=A.clientSupportedSDKVersion,Pe=void 0===be?ne:be;J.frameContext=A.context,J.hostClientType=z,J.clientSupportedSDKVersion=Pe;try{Kn("Parsing %s",_e);var Me=JSON.parse(_e);if(Kn("Checking if %o is a valid runtime object",Me??"null"),!Me||!Me.apiVersion)throw new Error("Received runtime config is invalid");_e&&Rn(Me)}catch(ke){if(!(ke instanceof SyntaxError))throw ke;try{Kn("Attempting to parse %s as an SDK version",_e),isNaN(P(_e,ne))||(J.clientSupportedSDKVersion=_e);var ve=JSON.parse(Pe);if(Kn("givenRuntimeConfig parsed to %o",ve??"null"),!ve)throw new Error("givenRuntimeConfig string was successfully parsed. However, it parsed to value of null");Rn(ve)}catch(je){if(!(je instanceof SyntaxError))throw je;Rn(so(J.clientSupportedSDKVersion,yn,po))}}J.initializeCompleted=!0}),Nn.initialize(),mo.initialize(),tn.config.initialize(),zn.initialize()),Array.isArray(M)&&function(o){var M=J.additionalValidOrigins.concat(o.filter(function(A){return"string"==typeof A&&H.test(A)})),R={};M=M.filter(function(A){return!R[A]&&(R[A]=!0,!0)}),J.additionalValidOrigins=M}(M),void 0!==J.initializePromise?R(J.initializePromise):Kn("GlobalVars.initializePromise is unexpectedly undefined")})}(o,M)},jo,new Error("SDK initialization timed out."))}var De,Kn=Fo.extend("initializeHelper");function Ve(o,M){!nn(M)&&Wn(),function(o,M){Qt.themeChangeHandler=M,!nn(M)&&Wt(o,"registerHandler",["themeChange"])}(o,M)}function Fe(o,M){return new Promise(function(R){we(K,j.content,j.sidePanel,j.settings,j.task,j.stage,j.meetingStage),R(Oo(o,"executeDeepLink",M))})}!function(o){var z,M=r("app");o.Messages={AppLoaded:"appInitialization.appLoaded",Success:"appInitialization.success",Failure:"appInitialization.failure",ExpectedFailure:"appInitialization.expectedFailure"},(z=o.FailedReason||(o.FailedReason={})).AuthFailed="AuthFailed",z.Timeout="Timeout",z.Other="Other",function(z){z.PermissionError="PermissionError",z.NotFound="NotFound",z.Throttling="Throttling",z.Offline="Offline",z.Other="Other"}(o.ExpectedFailureReason||(o.ExpectedFailureReason={})),o.isInitialized=function(){return J.initializeCompleted},o.getFrameContext=function(){return J.frameContext},function(){if(!it()){var z=document.getElementsByTagName("script"),_e=z&&z[z.length-1]&&z[z.length-1].src,be="Today, teamsjs can only be used from a single script or you may see undefined behavior. This log line is used to help detect cases where teamsjs is loaded multiple times -- it is always written. The presence of the log itself does not indicate a multi-load situation, but multiples of these log lines will. If you would like to use teamjs from more than one script at the same time, please open an issue at https://github.com/OfficeDev/microsoft-teams-library-js/issues";_e&&0!==_e.length?M("teamsjs is being used from %s. %s",_e,be):M("teamsjs is being used from a script tag embedded directly in your html. %s",be)}}(),o.initialize=function(z){return function(){Ao(this,void 0,void 0,a().mark(function o(){return a().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,ht();case 2:case"end":return R.stop()}},o)}))}(),qt(C(Yn,O.App_Initialize),z)},o._initialize=function(z){vt.currentWindow=z},o._uninitialize=function(){J.initializeCalled&&(Qt.uninitializeHandlers(),J.initializeCalled=!1,J.initializeCompleted=!1,J.initializePromise=void 0,J.additionalValidOrigins=[],J.frameContext=void 0,J.hostClientType=void 0,J.isFramelessWindow=!1,vt.currentWindow&&vt.currentWindow.removeEventListener("message",mn.messageListener,!1),vt.currentWindow=null,vt.parentWindow=null,vt.parentOrigin=null,vt.childWindow=null,vt.childOrigin=null,mn.parentMessageQueue=[],mn.childMessageQueue=[],mn.nextMessageId=0,mn.callbacks={},mn.promiseCallbacks={})},o.getContext=function(){return new Promise(function(z){Wn(),z(Qo(C(Yn,O.App_GetContext),"getContext"))}).then(function(z){return function(o){var M;return{actionInfo:o.actionInfo,app:{locale:o.locale,sessionId:o.appSessionId?o.appSessionId:"",theme:o.theme?o.theme:"default",iconPositionVertical:o.appIconPosition,osLocaleInfo:o.osLocaleInfo,parentMessageId:o.parentMessageId,userClickTime:o.userClickTime,userFileOpenPreference:o.userFileOpenPreference,host:{name:o.hostName?o.hostName:Je.teams,clientType:o.hostClientType?o.hostClientType:He.web,sessionId:o.sessionId?o.sessionId:"",ringId:o.ringId},appLaunchId:o.appLaunchId},page:{id:o.entityId,frameContext:o.frameContext?o.frameContext:J.frameContext,subPageId:o.subEntityId,isFullScreen:o.isFullScreen,isMultiWindow:o.isMultiWindow,sourceOrigin:o.sourceOrigin},user:{id:null!==(M=o.userObjectId)&&void 0!==M?M:"",displayName:o.userDisplayName,isCallingAllowed:o.isCallingAllowed,isPSTNCallingAllowed:o.isPSTNCallingAllowed,licenseType:o.userLicenseType,loginHint:o.loginHint,userPrincipalName:o.userPrincipalName,tenant:o.tid?{id:o.tid,teamsSku:o.tenantSKU}:void 0},channel:o.channelId?{id:o.channelId,displayName:o.channelName,relativeUrl:o.channelRelativeUrl,membershipType:o.channelType,defaultOneNoteSectionId:o.defaultOneNoteSectionId,ownerGroupId:o.hostTeamGroupId,ownerTenantId:o.hostTeamTenantId}:void 0,chat:o.chatId?{id:o.chatId}:void 0,meeting:o.meetingId?{id:o.meetingId}:void 0,sharepoint:o.sharepoint,team:o.teamId?{internalId:o.teamId,displayName:o.teamName,type:o.teamType,groupId:o.groupId,templateId:o.teamTemplateId,isArchived:o.isTeamArchived,userRole:o.userTeamRole}:void 0,sharePointSite:o.teamSiteUrl||o.teamSiteDomain||o.teamSitePath||o.mySitePath||o.mySiteDomain?{teamSiteUrl:o.teamSiteUrl,teamSiteDomain:o.teamSiteDomain,teamSitePath:o.teamSitePath,teamSiteId:o.teamSiteId,mySitePath:o.mySitePath,mySiteDomain:o.mySiteDomain}:void 0}}(z)})},o.notifyAppLoaded=function(){Wn(),Wt(C(Yn,O.App_NotifyAppLoaded),o.Messages.AppLoaded,[go])},o.notifySuccess=function(){Wn(),Wt(C(Yn,O.App_NotifySuccess),o.Messages.Success,[go])},o.notifyFailure=function(z){Wn(),Wt(C(Yn,O.App_NotifyFailure),o.Messages.Failure,[z.reason,z.message])},o.notifyExpectedFailure=function(z){Wn(),Wt(C(Yn,O.App_NotifyExpectedFailure),o.Messages.ExpectedFailure,[z.reason,z.message])},o.registerOnThemeChangeHandler=function(z){Ve(C(Yn,O.App_RegisterOnThemeChangeHandler),z)},o.openLink=function(z){return Fe(C(Yn,O.App_OpenLink),z)},function(z){z.registerBeforeSuspendOrTerminateHandler=function(_e){if(!_e)throw new Error("[app.lifecycle.registerBeforeSuspendOrTerminateHandler] Handler cannot be null");we(K),function(o){Qt.beforeSuspendOrTerminateHandler=o,!nn(o)&&St("registerHandler",["beforeUnload"])}(_e)},z.registerOnResumeHandler=function(_e){if(!_e)throw new Error("[app.lifecycle.registerOnResumeHandler] Handler cannot be null");we(K),function(o){Qt.resumeHandler=o,!nn(o)&&St("registerHandler",["load"])}(_e)}}(o.lifecycle||(o.lifecycle={}))}(De||(De={}));var tn,qe=k.V_2;function Mt(o,M){return new Promise(function(R){if(we(K,j.content,j.sidePanel,j.settings,j.remove,j.task,j.stage,j.meetingStage),!tn.isSupported())throw u;R(pi(o,"navigateCrossDomain","Cross-origin navigation is only supported for URLs matching the pattern registered in the manifest.",M))})}function ft(o){return new Promise(function(M){if(we(K),!tn.backStack.isSupported())throw u;M(pi(o,"navigateBack","Back navigation is not supported in the current client or context."))})}function Vt(o,M){return new Promise(function(R){if(we(K),!tn.tabs.isSupported())throw u;R(pi(o,"navigateToTab","Invalid internalTabInstanceId and/or channelId were/was provided",M))})}function jt(o,M){if(we(K),!tn.isSupported())throw u;Wt(o,"returnFocus",[M])}function Zt(o,M){return new Promise(function(R){if(we(K),!tn.tabs.isSupported())throw u;R(Qo(o,"getTabInstances",M))})}function vn(o,M){return new Promise(function(R){if(we(K),!tn.tabs.isSupported())throw u;R(Qo(o,"getMruTabInstances",M))})}function En(o,M){if(we(K,j.content,j.sidePanel,j.meetingStage),!tn.isSupported())throw u;Wt(o,"shareDeepLink",[M.subPageId,M.subPageLabel,M.subPageWebUrl])}function An(o,M){if(we(K,j.content),!tn.isSupported())throw u;Wt(o,"setFrameContext",[M])}!function(o){function M(Me){An(C(qe,O.Pages_SetCurrentFrame),Me)}function R(){return!(!we(K)||!K.supports.pages)}var Me;o.returnFocus=function(Me){jt(C(qe,O.Pages_ReturnFocus),Me)},o.registerFocusEnterHandler=function(Me){On(C(qe,O.Pages_RegisterFocusEnterHandler),"focusEnter",Me,[],function(){if(!R())throw u})},o.setCurrentFrame=M,o.initializeWithFrameContext=function(Me,ve,ke){De.initialize(ke).then(function(){return ve&&ve()}),M(Me)},o.getConfig=function(){return new Promise(function(Me){if(we(K,j.content,j.settings,j.remove,j.sidePanel),!R())throw u;Me(Qo(C(qe,O.Pages_GetConfig),"settings.getSettings"))})},o.navigateCrossDomain=function(Me){return Mt(C(qe,O.Pages_NavigateCrossDomain),Me)},o.navigateToApp=function(Me){return new Promise(function(ve){if(we(K,j.content,j.sidePanel,j.settings,j.task,j.stage,j.meetingStage),!R())throw u;var ke=C(qe,O.Pages_NavigateCrossDomain);ve(K.isLegacyTeams?Oo(ke,"executeDeepLink",function(o){var M=new URL("https://teams.microsoft.com/l/entity/"+encodeURIComponent(o.appId)+"/"+encodeURIComponent(o.pageId));return o.webUrl&&M.searchParams.append("webUrl",o.webUrl),(o.channelId||o.subPageId)&&M.searchParams.append("context",JSON.stringify({channelId:o.channelId,subEntityId:o.subPageId})),M.toString()}(Me)):Oo(ke,"pages.navigateToApp",Me))})},o.shareDeepLink=function(Me){return En(C(qe,O.Pages_ShareDeepLink),Me)},o.registerFullScreenHandler=function(Me){On(C(qe,O.Pages_RegisterFullScreenHandler),"fullScreenChange",Me,[],function(){if(!nn(Me)&&!R())throw u})},o.isSupported=R,(Me=o.tabs||(o.tabs={})).navigateToTab=function(ve){return Vt(C(qe,O.Pages_Tabs_NavigateToTab),ve)},Me.getTabInstances=function(ve){return Zt(C(qe,O.Pages_Tabs_GetTabInstances),ve)},Me.getMruTabInstances=function(ve){return vn(C(qe,O.Pages_Tabs_GetMruTabInstances),ve)},Me.isSupported=function(){return!(!we(K)||!K.supports.pages||!K.supports.pages.tabs)},function(Me){var ve,ke;function je(Ct,Ht){!nn(Ct)&&we(K,j.settings),Ht&&Ht(),ve=Ct,!nn(Ct)&&Wt(C(qe,O.Pages_Config_RegisterOnSaveHandlerHelper),"registerHandler",["save"])}function yt(Ct,Ht){!nn(Ct)&&we(K,j.remove,j.settings),Ht&&Ht(),ke=Ct,!nn(Ct)&&Wt(C(qe,O.Pages_Config_RegisterOnRemoveHandlerHelper),"registerHandler",["remove"])}function Ut(Ct){var Ht=new Pt(Ct);ve?ve(Ht):vt.childWindow?Te("settings.save",[Ct]):Ht.notifySuccess()}Me.initialize=function(){Ft("settings.save",Ut,!1),Ft("settings.remove",Ze,!1)},Me.setValidityState=function(Ct){if(we(K,j.settings,j.remove),!It())throw u;Wt(C(qe,O.Pages_Config_SetValidityState),"settings.setValidityState",[Ct])},Me.setConfig=function(Ct){return new Promise(function(Ht){if(we(K,j.content,j.settings,j.sidePanel),!It())throw u;Ht(Oo(C(qe,O.Pages_Config_SetConfig),"settings.setSettings",Ct))})},Me.registerOnSaveHandler=function(Ct){je(Ct,function(){if(!nn(Ct)&&!It())throw u})},Me.registerOnSaveHandlerHelper=je,Me.registerOnRemoveHandler=function(Ct){yt(Ct,function(){if(!nn(Ct)&&!It())throw u})},Me.registerOnRemoveHandlerHelper=yt,Me.registerChangeConfigHandler=function(Ct){On(C(qe,O.Pages_Config_RegisterChangeConfigHandler),"changeSettings",Ct,[j.content],function(){if(!It())throw u})};var Pt=function(){function Ct(en){this.notified=!1,this.result=en||{}}var Ht=Ct.prototype;return Ht.notifySuccess=function(){this.ensureNotNotified(),Wt(C(qe,O.Settings_Save_Success),"settings.save.success"),this.notified=!0},Ht.notifyFailure=function(Hn){this.ensureNotNotified(),Wt(C(qe,O.Settings_Save_Failure),"settings.save.failure",[Hn]),this.notified=!0},Ht.ensureNotNotified=function(){if(this.notified)throw new Error("The SaveEvent may only notify success or failure once.")},Ct}();function Ze(){var Ct=new wt;ke?ke(Ct):vt.childWindow?Te("settings.remove",[]):Ct.notifySuccess()}var wt=function(){function Ct(){this.notified=!1}var Ht=Ct.prototype;return Ht.notifySuccess=function(){this.ensureNotNotified(),Wt(C(qe,O.Settings_Remove_Success),"settings.remove.success"),this.notified=!0},Ht.notifyFailure=function(Hn){this.ensureNotNotified(),Wt(C(qe,O.Settings_Remove_Failure),"settings.remove.failure",[Hn]),this.notified=!0},Ht.ensureNotNotified=function(){if(this.notified)throw new Error("The removeEventType may only notify success or failure once.")},Ct}();function It(){return!(!we(K)||!K.supports.pages||!K.supports.pages.config)}Me.isSupported=It}(o.config||(o.config={})),function(Me){var ve;function ke(){return ft(C(qe,O.Pages_BackStack_NavigateBack))}function je(Pt,Ze,wt){!nn(Ze)&&we(K),wt&&wt(),ve=Ze,!nn(Ze)&&Wt(Pt,"registerHandler",["backButton"])}function yt(){ve&&ve()||(vt.childWindow?Te("backButtonPress",[]):ke())}function Ut(){return!(!we(K)||!K.supports.pages||!K.supports.pages.backStack)}Me._initialize=function(){Ft("backButtonPress",yt,!1)},Me.navigateBack=ke,Me.registerBackButtonHandler=function(Pt){je(C(qe,O.Pages_BackStack_RegisterBackButtonHandler),Pt,function(){if(!nn(Pt)&&!Ut())throw u})},Me.registerBackButtonHandlerHelper=je,Me.isSupported=Ut}(o.backStack||(o.backStack={})),function(Me){function ve(){return!(!we(K)||!K.supports.pages||!K.supports.pages.fullTrust)}Me.enterFullscreen=function(){if(we(K,j.content),!ve())throw u;Wt(C(qe,O.Pages_FullTrust_EnterFullscreen),"enterFullscreen",[])},Me.exitFullscreen=function(){if(we(K,j.content),!ve())throw u;Wt(C(qe,O.Pages_FullTrust_ExitFullscreen),"exitFullscreen",[])},Me.isSupported=ve}(o.fullTrust||(o.fullTrust={})),function(Me){function ve(){return!(!we(K)||!K.supports.pages||!K.supports.pages.appButton)}Me.onClick=function(ke){On(C(qe,O.Pages_AppButton_OnClick),"appButtonClick",ke,[j.content],function(){if(!ve())throw u})},Me.onHoverEnter=function(ke){On(C(qe,O.Pages_AppButton_OnHoverEnter),"appButtonHoverEnter",ke,[j.content],function(){if(!ve())throw u})},Me.onHoverLeave=function(ke){On(C(qe,O.Pages_AppButton_OnHoverLeave),"appButtonHoverLeave",ke,[j.content],function(){if(!ve())throw u})},Me.isSupported=ve}(o.appButton||(o.appButton={})),function(Me){function ve(){return!(!we(K)||!K.supports.pages||!K.supports.pages.currentApp)}Me.navigateTo=function(ke){return new Promise(function(je){if(we(K,j.content,j.sidePanel,j.settings,j.task,j.stage,j.meetingStage),!ve())throw u;je(Sn(C(qe,O.Pages_CurrentApp_NavigateTo),"pages.currentApp.navigateTo",ke))})},Me.navigateToDefaultPage=function(){return new Promise(function(ke){if(we(K,j.content,j.sidePanel,j.settings,j.task,j.stage,j.meetingStage),!ve())throw u;ke(Sn(C(qe,O.Pages_CurrentApp_NavigateToDefaultPage),"pages.currentApp.navigateToDefaultPage"))})},Me.isSupported=ve}(o.currentApp||(o.currentApp={}))}(tn||(tn={}));var $n=r("handlers"),Qt=function(){function o(){}return o.initializeHandlers=function(){o.handlers.themeChange=_t,o.handlers.load=Yt,o.handlers.beforeUnload=Dn,tn.backStack._initialize()},o.uninitializeHandlers=function(){o.handlers={},o.themeChangeHandler=null,o.loadHandler=null,o.beforeUnloadHandler=null,o.beforeSuspendOrTerminateHandler=null,o.resumeHandler=null},o}();Qt.handlers={},Qt.themeChangeHandler=null,Qt.loadHandler=null,Qt.beforeUnloadHandler=null,Qt.beforeSuspendOrTerminateHandler=null,Qt.resumeHandler=null;var ro=$n.extend("callHandler");function Jn(o,M){var R=Qt.handlers[o];return R?(ro("Invoking the registered handler for message %s with arguments %o",o,M),[!0,R.apply(this,M)]):vt.childWindow?(Te(o,M),[!1,void 0]):(ro("Handler for action message %s not found.",o),[!1,void 0])}function Ft(o,M,R,A){void 0===R&&(R=!0),void 0===A&&(A=[]),M?(Qt.handlers[o]=M,R&&Wt(C(k.V_0,O.RegisterHandler),"registerHandler",[o].concat(A))):delete Qt.handlers[o]}function cn(o){delete Qt.handlers[o]}function Zn(o){return null!=Qt.handlers[o]}function On(o,M,R,A,D){R&&we.apply(void 0,[K].concat(A)),D&&D(),Ft(M,R)}function _t(o){Qt.themeChangeHandler&&Qt.themeChangeHandler(o),vt.childWindow&&Te("themeChange",[o])}function Yt(o){Qt.resumeHandler?Qt.resumeHandler(o):Qt.loadHandler&&Qt.loadHandler(o),vt.childWindow&&Te("load",[o])}function Dn(){var o=function(){St("readyToUnload",[])};Qt.beforeSuspendOrTerminateHandler?(Qt.beforeSuspendOrTerminateHandler(),vt.childWindow?Te("beforeUnload"):o()):Qt.beforeUnloadHandler&&Qt.beforeUnloadHandler(o)||(vt.childWindow?Te("beforeUnload"):o())}var Ko=function(M,R,A,D){return new(A||(A=Promise))(function(_e,be){function Pe(ke){try{ve(D.next(ke))}catch(je){be(je)}}function Me(ke){try{ve(D.throw(ke))}catch(je){be(je)}}function ve(ke){ke.done?_e(ke.value):function(_e){return _e instanceof A?_e:new A(function(be){be(_e)})}(ke.value).then(Pe,Me)}ve((D=D.apply(M,R||[])).next())})},$o=r("communication"),vt=function(){},mn=function(){};function Qo(o,M){for(var R=arguments.length,A=new Array(R>2?R-2:0),D=2;D<R;D++)A[D-2]=arguments[D];return Jo(o,M,A).then(function(z){return z[0]})}function di(o){for(var M=arguments.length,R=new Array(M>1?M-1:0),A=1;A<M;A++)R[A-1]=arguments[A];return ao(o,R).then(function(D){return D[0]})}function Oo(o,M){for(var R=arguments.length,A=new Array(R>2?R-2:0),D=2;D<R;D++)A[D-2]=arguments[D];return Jo(o,M,A).then(function(z){if(!z[0])throw new Error(z[1])})}function So(o){for(var M=arguments.length,R=new Array(M>1?M-1:0),A=1;A<M;A++)R[A-1]=arguments[A];return ao(o,R).then(function(D){if(!D[0])throw new Error(D[1])})}function pi(o,M,R){for(var A=arguments.length,D=new Array(A>3?A-3:0),z=3;z<A;z++)D[z-3]=arguments[z];return Jo(o,M,D).then(function(_e){if(!_e[0])throw new Error(_e[1]||R)})}function Sn(o,M){for(var R=arguments.length,A=new Array(R>2?R-2:0),D=2;D<R;D++)A[D-2]=arguments[D];return Jo(o,M,A).then(function(z){var _e=z[0];if(_e)throw _e;return z[1]})}function _n(o){for(var M=arguments.length,R=new Array(M>1?M-1:0),A=1;A<M;A++)R[A-1]=arguments[A];return ao(o,R).then(function(D){var z=D[0];if(z)throw z;return D[1]})}function Jo(o,M,R){if(void 0===R&&(R=void 0),!m(o))throw Error("apiVersionTag: "+o+" passed in doesn't follow the pattern starting with 'v' followed by digits, then underscore with words, please check.");return new Promise(function(A){A(Ii(ei(o,M,R).id))})}function ao(o,M){return void 0===M&&(M=void 0),new Promise(function(R){R(Ii(ei(C(k.V_0,"testing"),o,M).id))})}function Ii(o){return new Promise(function(M){mn.promiseCallbacks[o]=M})}function Wt(o,M,R,A){var D;if(R instanceof Function?A=R:R instanceof Array&&(D=R),!m(o))throw Error("apiVersionTag: "+o+" passed in doesn't follow the pattern starting with 'v' followed by digits, then underscore with words, please check.");var z=ei(o,M,D);A&&(mn.callbacks[z.id]=A)}function St(o,M,R){var A;M instanceof Function?R=M:M instanceof Array&&(A=M);var D=ei(C(k.V_0,"testing"),o,A);R&&(mn.callbacks[D.id]=R)}mn.parentMessageQueue=[],mn.childMessageQueue=[],mn.nextMessageId=0,mn.callbacks={},mn.promiseCallbacks={};var tr=$o.extend("sendMessageToParentHelper");function ei(o,M,R){var A=tr,D=vt.parentWindow,z=function(o,M,R){return{id:mn.nextMessageId++,func:M,timestamp:Date.now(),args:R||[],apiversiontag:o}}(o,M,R);if(A("Message %i information: %o",z.id,{actionName:M,args:R}),J.isFramelessWindow)vt.currentWindow&&vt.currentWindow.nativeInterface&&(A("Sending message %i to parent via framelessPostMessage interface",z.id),vt.currentWindow.nativeInterface.framelessPostMessage(JSON.stringify(z)));else{var _e=ni(D);D&&_e?(A("Sending message %i to parent via postMessage",z.id),D.postMessage(z,_e)):(A("Adding message %i to parent message queue",z.id),ti(D).push(z))}return z}var Ri=$o.extend("processMessage");function Ai(o){return Ko(this,void 0,void 0,a().mark(function M(){var R,A;return a().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(o&&o.data&&"object"==typeof o.data){z.next=2;break}return z.abrupt("return",void Ri("Unrecognized message format received by app, message being ignored. Message: %o",o));case 2:return z.abrupt("return",nr(R=o.source||o.originalEvent&&o.originalEvent.source,A=o.origin||o.originalEvent&&o.originalEvent.origin).then(function(_e){_e?(or(R,A),R===vt.parentWindow?Fi(o):R===vt.childWindow&&hi(o)):Ri("Message being ignored by app because it is either coming from the current window or a different window with an invalid origin")}));case 4:case"end":return z.stop()}},M)}))}var gi=$o.extend("shouldProcessMessage");function nr(o,M){return Ko(this,void 0,void 0,a().mark(function R(){var A;return a().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(!vt.currentWindow||o!==vt.currentWindow){z.next=2;break}return z.abrupt("return",(gi("Should not process message because it is coming from the current window"),!1));case 2:if(!(vt.currentWindow&&vt.currentWindow.location&&M&&M===vt.currentWindow.location.origin)){z.next=4;break}return z.abrupt("return",!0);case 4:return z.next=6,hn(new URL(M));case 6:return z.abrupt("return",((A=z.sent)||gi("Message has an invalid origin of %s",M),A));case 8:case"end":return z.stop()}},R)}))}function or(o,M){J.isFramelessWindow||vt.parentWindow&&!vt.parentWindow.closed&&o!==vt.parentWindow?vt.childWindow&&!vt.childWindow.closed&&o!==vt.childWindow||(vt.childWindow=o,vt.childOrigin=M):(vt.parentWindow=o,vt.parentOrigin=M),vt.parentWindow&&vt.parentWindow.closed&&(vt.parentWindow=null,vt.parentOrigin=null),vt.childWindow&&vt.childWindow.closed&&(vt.childWindow=null,vt.childOrigin=null),Vi(vt.parentWindow),Vi(vt.childWindow)}var Li=$o.extend("handleParentMessage");function Fi(o){var M=Li;if("id"in o.data&&"number"==typeof o.data.id){var R=o.data,A=mn.callbacks[R.id];M("Received a response from parent for message %i",R.id),A&&(M("Invoking the registered callback for message %i with arguments %o",R.id,R.args),A.apply(null,[].concat(R.args,[R.isPartialResponse])),function(o){return!0===o.data.isPartialResponse}(o)||(M("Removing registered callback for message %i",R.id),delete mn.callbacks[R.id]));var D=mn.promiseCallbacks[R.id];D&&(M("Invoking the registered promise callback for message %i with arguments %o",R.id,R.args),D(R.args),M("Removing registered promise callback for message %i",R.id),delete mn.promiseCallbacks[R.id])}else if("func"in o.data&&"string"==typeof o.data.func){var z=o.data;M("Received an action message %s from parent",z.func),Jn(z.func,z.args)}else M("Received an unknown message: %O",o)}function hi(o){if("id"in o.data&&"func"in o.data){var M=o.data,R=Jn(M.func,M.args),D=R[1];R[0]&&void 0!==D?nt(M.id,Array.isArray(D)?D:[D]):St(M.func,M.args,function(){if(vt.childWindow){for(var z=arguments.length,_e=new Array(z),be=0;be<z;be++)_e[be]=arguments[be];var Pe=_e.pop();nt(M.id,_e,Pe)}})}}function ti(o){return o===vt.parentWindow?mn.parentMessageQueue:o===vt.childWindow?mn.childMessageQueue:[]}function ni(o){return o===vt.parentWindow?vt.parentOrigin:o===vt.childWindow?vt.childOrigin:null}var Mn,fn,uo,bn,Zo,oa=$o.extend("flushMessageQueue");function Vi(o){for(var M=ni(o),R=ti(o),A=o==vt.parentWindow?"parent":"child";o&&M&&R.length>0;){var D=R.shift();oa("Flushing message %i from "+A+" message queue via postMessage.",D?.id),o.postMessage(D,M)}}function Ie(o,M){var R;R=vt.currentWindow.setInterval(function(){0===ti(o).length&&(clearInterval(R),M())},100)}function nt(o,M,R){var A=vt.childWindow,D=function(o,M,R){return{id:o,args:M||[],isPartialResponse:R}}(o,M,R),z=ni(A);A&&z&&A.postMessage(D,z)}function Te(o,M){var R=vt.childWindow,A=function(o,M){return{func:o,args:M||[]}}(o,M),D=ni(R);R&&D?R.postMessage(A,D):ti(R).push(A)}function Ra(o,M){we(K),St("uploadCustomApp",[o],M||B())}function Aa(o,M,R){we(K),St(o,M,R)}function La(o,M){if(we(K),!vt.childWindow)throw new Error("The child window has not yet been initialized or is not present");Te(o,M)}function ia(o,M){var R=this;we(K),Ft(o,function(){for(var A=arguments.length,D=new Array(A),z=0;z<A;z++)D[z]=arguments[z];return M.apply(R,D)})}function Fa(o,M){we(K),Ft("userSettingsChange",M,!0,[o])}function ra(o){we(K,j.content,j.task),St("openFilePreview",[o.entityId,o.title,o.description,o.type,o.objectUrl,o.downloadUrl,o.webPreviewUrl,o.webEditUrl,o.baseUrl,o.editFile,o.subEntityId,o.viewerAction,o.fileOpenPreference,o.conversationId,o.sizeInBytes])}(function(o){function M(){return!(!we(K)||!K.supports.logs)}o.registerGetLogHandler=function(R){if(!nn(R)&&we(K),!nn(R)&&!M())throw u;R?Ft("log.request",function(){St("log.receive",[R()])}):cn("log.request")},o.isSupported=M})(Mn||(Mn={})),function(o){o.fileDownloadStart="fileDownloadStart",o.fileDownloadComplete="fileDownloadComplete"}(fn||(fn={})),function(o){o.view="view",o.edit="edit",o.editNew="editNew"}(uo||(uo={})),function(o){o.fileOpenPreference="fileOpenPreference",o.theme="theme"}(bn||(bn={})),function(o){function M(){return!(!we(K)||!K.supports.conversations)}o.openConversation=function(R){return new Promise(function(A){if(we(K,j.content),!M())throw u;var D=So("conversations.openConversation",{title:R.title,subEntityId:R.subEntityId,conversationId:R.conversationId,channelId:R.channelId,entityId:R.entityId});R.onStartConversation&&Ft("startConversation",function(z,_e,be,Pe){var Me;return null===(Me=R.onStartConversation)||void 0===Me?void 0:Me.call(R,{subEntityId:z,conversationId:_e,channelId:be,entityId:Pe})}),R.onCloseConversation&&Ft("closeConversation",function(z,_e,be,Pe){var Me;return null===(Me=R.onCloseConversation)||void 0===Me?void 0:Me.call(R,{subEntityId:z,conversationId:_e,channelId:be,entityId:Pe})}),A(D)})},o.closeConversation=function(){if(we(K,j.content),!M())throw u;St("conversations.closeConversation"),cn("startConversation"),cn("closeConversation")},o.getChatMembers=function(){return new Promise(function(R){if(we(K),!M())throw u;R(di("getChatMembers"))})},o.isSupported=M}(Zo||(Zo={}));var rr;function aa(o,M,R){if(0===o.length)throw new Error("Must have at least one user when creating a chat deep link");var A="users="+o.map(function(_e){return encodeURIComponent(_e)}).join(","),D=void 0===M?"":"&topicName="+encodeURIComponent(M),z=void 0===R?"":"&message="+encodeURIComponent(R);return G+"://"+Y+"/l/chat/0/0?"+A+D+z}!function(o){function M(){return!(!we(K)||!K.supports.appInstallDialog)}o.openAppInstallDialog=function(R){return new Promise(function(A){if(we(K,j.content,j.sidePanel,j.settings,j.task,j.stage,j.meetingStage),!M())throw new Error("Not supported");K.isLegacyTeams?A(So("executeDeepLink",function(o){if(!o)throw new Error("App ID must be set when creating an app install dialog deep link");return G+"://"+Y+"/l/app/"+encodeURIComponent(o)}(R.appId))):(St("appInstallDialog.openAppInstallDialog",[R]),A())})},o.isSupported=M}(rr||(rr={}));var Go,fo=k.V_1,Ba=r("media");function ki(o,M){if(null==o||null==M||o.length<=0)return null;var R=null,A=1;return o.sort(function(D,z){return D.sequence>z.sequence?1:-1}),o.forEach(function(D){D.sequence==A&&(R=R?new Blob([R,D.file],{type:M}):new Blob([D.file],{type:M}),A++)}),R}function ar(o,M){if(null==o||null==M)return null;for(var R=atob(o.chunk),A=new Array(R.length),D=0;D<R.length;D++)A[D]=R.charCodeAt(D);var z=new Uint8Array(A),_e=new Blob([z],{type:M});return{sequence:o.chunkSequence,file:_e}}function Ua(o){!function(o){return!(!o||o.mediaType!=Go.MediaType.VideoAndImage&&!o.videoAndImageProps)}(o)?function(o){return!(!o||o.mediaType!=Go.MediaType.Video||!o.videoProps||o.videoProps.isFullScreenMode)}(o)?ho("2.0.3"):function(o){var M;return!(o?.mediaType!=Go.MediaType.Image||null===(M=o?.imageProps)||void 0===M||!M.imageOutputFormats)}(o)&&ho("2.0.4"):ho("2.0.2")}function la(o){return!o||!(null===o.timeOutIntervalInSec||null!=o.timeOutIntervalInSec&&o.timeOutIntervalInSec<=0||null!=o.timeOutIntervalInSec&&o.timeOutIntervalInSec>60)}!function(o){var R,z,je;(je=o.FileFormat||(o.FileFormat={})).Base64="base64",je.ID="id";var Pe=function(){};function Me(){return!(!we(K)||!K.supports.permissions)}o.File=Pe,o.captureImage=function(je){if(!je)throw new Error("[captureImage] Callback cannot be null");we(K,j.content,j.task),J.isFramelessWindow?Gn("1.7.0")?Wt(C(fo,O.Media_CaptureImage),"captureImage",je):je({errorCode:ze.OLD_PLATFORM},[]):je({errorCode:ze.NOT_SUPPORTED_ON_PLATFORM},[])},o.hasPermission=function(){if(we(K,j.content,j.task),!Me())throw u;var je=$e.Media;return new Promise(function(yt){yt(Sn(C(fo,O.Media_HasPermission),"permissions.has",je))})},o.requestPermission=function(){if(we(K,j.content,j.task),!Me())throw u;var je=$e.Media;return new Promise(function(yt){yt(Sn(C(fo,O.Media_RequestPermission),"permissions.request",je))})};var ve=function(je){function yt(Pt){var Ze;return Ze=je.call(this)||this,Pt&&(Ze.content=Pt.content,Ze.format=Pt.format,Ze.mimeType=Pt.mimeType,Ze.name=Pt.name,Ze.preview=Pt.preview,Ze.size=Pt.size),Ze}i(yt,je);var Ut=yt.prototype;return Ut.getMedia=function(Ze){if(!Ze)throw new Error("[get Media] Callback cannot be null");we(K,j.content,j.task),Gn(v)?function(o,M,R){return null!=o&&null!=M&&M==Go.FileFormat.ID&&null!=R}(this.mimeType,this.format,this.content)?Gn("2.0.0")?this.getMediaViaCallback(Ze):this.getMediaViaHandler(Ze):Ze({errorCode:ze.INVALID_ARGUMENTS},new Blob):Ze({errorCode:ze.OLD_PLATFORM},new Blob)},Ut.getMediaViaCallback=function(Ze){var wt={mediaMimeType:this.mimeType,assembleAttachment:[]},It=[this.content];Wt(C(fo,O.Media_GetMedia),"getMedia",It,function(Ct){if(Ze)if(Ct&&Ct.error)Ze(Ct.error,new Blob);else if(Ct&&Ct.mediaChunk)if(Ct.mediaChunk.chunkSequence<=0){var Ht=ki(wt.assembleAttachment,wt.mediaMimeType);Ze(Ct.error,Ht??new Blob)}else{var en=ar(Ct.mediaChunk,wt.mediaMimeType);en?wt.assembleAttachment.push(en):Ba("Received a null assemble attachment for when decoding chunk sequence "+Ct.mediaChunk.chunkSequence+"; not including the chunk in the assembled file.")}else Ze({errorCode:ze.INTERNAL_ERROR,message:"data received is null"},new Blob)})},Ut.getMediaViaHandler=function(Ze){var wt=q(),It={mediaMimeType:this.mimeType,assembleAttachment:[]},Ct=[wt,this.content];this.content&&!nn(Ze)&&Wt(C(fo,O.Media_GetMedia),"getMedia",Ct),Ft("getMedia"+wt,function(Ht){if(Ze){var en=JSON.parse(Ht);if(en.error)Ze(en.error,new Blob),cn("getMedia"+wt);else if(en.mediaChunk)if(en.mediaChunk.chunkSequence<=0){var Hn=ki(It.assembleAttachment,It.mediaMimeType);Ze(en.error,Hn??new Blob),cn("getMedia"+wt)}else{var Ln=ar(en.mediaChunk,It.mediaMimeType);Ln&&It.assembleAttachment.push(Ln)}else Ze({errorCode:ze.INTERNAL_ERROR,message:"data received is null"},new Blob),cn("getMedia"+wt)}})},yt}(Pe);o.Media=ve;var ke=function(){function je(Ut){this.controllerCallback=Ut}var yt=je.prototype;return yt.notifyEventToHost=function(Pt,Ze){we(K,j.content,j.task);try{ho("2.0.3")}catch(It){return void(Ze&&Ze(It))}var wt={mediaType:this.getMediaType(),mediaControllerEvent:Pt};Wt(C(fo,O.Media_Controller),"media.controller",[wt],function(It){Ze&&Ze(It)})},yt.stop=function(Pt){this.notifyEventToHost(R.StopRecording,Pt)},je}();o.VideoController=function(je){function yt(){return je.apply(this,arguments)||this}i(yt,je);var Ut=yt.prototype;return Ut.getMediaType=function(){return z.Video},Ut.notifyEventToApp=function(Ze){if(this.controllerCallback)switch(Ze){case R.StartRecording:if(this.controllerCallback.onRecordingStarted){this.controllerCallback.onRecordingStarted();break}}},yt}(ke),function(je){je[je.StartRecording=1]="StartRecording",je[je.StopRecording=2]="StopRecording"}(R=o.MediaControllerEvent||(o.MediaControllerEvent={})),function(je){je[je.Photo=1]="Photo",je[je.Document=2]="Document",je[je.Whiteboard=3]="Whiteboard",je[je.BusinessCard=4]="BusinessCard"}(o.CameraStartMode||(o.CameraStartMode={})),function(je){je[je.Camera=1]="Camera",je[je.Gallery=2]="Gallery"}(o.Source||(o.Source={})),function(je){je[je.Image=1]="Image",je[je.Video=2]="Video",je[je.VideoAndImage=3]="VideoAndImage",je[je.Audio=4]="Audio"}(z=o.MediaType||(o.MediaType={})),function(je){je[je.ID=1]="ID",je[je.URL=2]="URL"}(o.ImageUriType||(o.ImageUriType={})),function(je){je[je.IMAGE=1]="IMAGE",je[je.PDF=2]="PDF"}(o.ImageOutputFormats||(o.ImageOutputFormats={})),o.selectMedia=function(je,yt){if(!yt)throw new Error("[select Media] Callback cannot be null");if(we(K,j.content,j.task),Gn(v)){try{Ua(je)}catch(wt){return void yt(wt,[])}if(function(o){return!(null==o||o.maxMediaCount>10)}(je)){var Ze=[je];Wt(C(fo,O.Media_SelectMedia),"selectMedia",Ze,function(wt,It,Ct){var Ht,en;if(Ct)(function(o){return!(o.mediaType!=Go.MediaType.Video||!o.videoProps||!o.videoProps.videoController)})(je)&&(null===(en=null===(Ht=je?.videoProps)||void 0===Ht?void 0:Ht.videoController)||void 0===en||en.notifyEventToApp(Ct));else if(It){for(var qi,Hn=[],Ln=w(It);!(qi=Ln()).done;)Hn.push(new ve(qi.value));yt(wt,Hn)}else yt(wt,[])})}else yt({errorCode:ze.INVALID_ARGUMENTS},[])}else yt({errorCode:ze.OLD_PLATFORM},[])},o.viewImages=function(je,yt){if(!yt)throw new Error("[view images] Callback cannot be null");if(we(K,j.content,j.task),Gn(v))if(function(o){return!(null==o||o.length<=0||o.length>10)}(je)){var Ut=[je];Wt(C(fo,O.Media_ViewImages),"viewImages",Ut,yt)}else yt({errorCode:ze.INVALID_ARGUMENTS});else yt({errorCode:ze.OLD_PLATFORM})},o.scanBarCode=function(je,yt){if(!je)throw new Error("[media.scanBarCode] Callback cannot be null");we(K,j.content,j.task),J.hostClientType!==He.desktop&&J.hostClientType!==He.web&&J.hostClientType!==He.rigel&&J.hostClientType!==He.teamsRoomsWindows&&J.hostClientType!==He.teamsRoomsAndroid&&J.hostClientType!==He.teamsPhones&&J.hostClientType!==He.teamsDisplays?Gn("1.9.0")?la(yt)?Wt(C(fo,O.Media_ScanBarCode),"media.scanBarCode",[yt],je):je({errorCode:ze.INVALID_ARGUMENTS},""):je({errorCode:ze.OLD_PLATFORM},""):je({errorCode:ze.NOT_SUPPORTED_ON_PLATFORM},"")}}(Go||(Go={}));var Ui,sr,lr=k.V_2;(function(o){function M(){return!!(we(K)&&K.supports.barCode&&K.supports.permissions)}o.scanBarCode=function(R){return new Promise(function(A){if(we(K,j.content,j.task),!M())throw u;if(!la(R))throw{errorCode:ze.INVALID_ARGUMENTS};A(Sn(C(lr,O.BarCode_ScanBarCode),"media.scanBarCode",R))})},o.hasPermission=function(){if(we(K,j.content,j.task),!M())throw u;var R=$e.Media;return new Promise(function(A){A(Sn(C(lr,O.BarCode_HasPermission),"permissions.has",R))})},o.requestPermission=function(){if(we(K,j.content,j.task),!M())throw u;var R=$e.Media;return new Promise(function(A){A(Sn(C(lr,O.BarCode_RequestPermission),"permissions.request",R))})},o.isSupported=M})(Ui||(Ui={})),function(o){function M(A){return new Promise(function(D){if(we(K,j.content,j.task),!R())throw u;D(K.isLegacyTeams?So("executeDeepLink",aa([A.user],void 0,A.message)):So("chat.openChat",{members:[A.user],message:A.message}))})}function R(){return!(!we(K)||!K.supports.chat)}o.openChat=M,o.openGroupChat=function(A){return new Promise(function(D){if(A.users.length<1)throw Error("OpenGroupChat Failed: No users specified");if(1===A.users.length)D(M({user:A.users[0],message:A.message}));else{if(we(K,j.content,j.task),!R())throw u;D(K.isLegacyTeams?So("executeDeepLink",aa(A.users,A.topic,A.message)):So("chat.openChat",{members:A.users,message:A.message,topic:A.topic}))}})},o.isSupported=R}(sr||(sr={}));var Ni,sa=function(M,R,A,D){return new(A||(A=Promise))(function(_e,be){function Pe(ke){try{ve(D.next(ke))}catch(je){be(je)}}function Me(ke){try{ve(D.throw(ke))}catch(je){be(je)}}function ve(ke){ke.done?_e(ke.value):function(_e){return _e instanceof A?_e:new A(function(be){be(_e)})}(ke.value).then(Pe,Me)}ve((D=D.apply(M,R||[])).next())})},ca=k.V_2;!function(o){function M(){return!!(we(K)&&navigator&&navigator.clipboard&&K.supports.clipboard)}o.write=function(R){return sa(this,void 0,void 0,a().mark(function A(){var z;return a().wrap(function(be){for(;;)switch(be.prev=be.next){case 0:if(we(K,j.content,j.meetingStage,j.task,j.settings,j.stage,j.sidePanel),M()){be.next=2;break}throw u;case 2:if(R.type&&Object.values(We).includes(R.type)){be.next=4;break}throw new Error("Blob type "+R.type+" is not supported. Supported blob types are "+Object.values(We));case 4:return be.next=6,Qe(R);case 6:return z={mimeType:R.type,content:be.sent},be.abrupt("return",Sn(C(ca,O.Clipboard_Write),"clipboard.writeToClipboard",z));case 9:case"end":return be.stop()}},A)}))},o.read=function(){return sa(this,void 0,void 0,a().mark(function R(){var A;return a().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(we(K,j.content,j.meetingStage,j.task,j.settings,j.stage,j.sidePanel),M()){z.next=2;break}throw u;case 2:if(!Ro()&&J.hostClientType!==He.macos){z.next=9;break}return z.t0=JSON,z.next=6,_n("clipboard.readFromClipboard");case 6:return z.t1=z.sent,A=z.t0.parse.call(z.t0,z.t1),z.abrupt("return",Ne(A.mimeType,A.content));case 9:return z.abrupt("return",Sn(C(ca,O.Clipboard_Read),"clipboard.readFromClipboard"));case 10:case"end":return z.stop()}},R)}))},o.isSupported=M}(Ni||(Ni={}));var cr,ur,oi=k.V_2;function Qa(){return K.hostVersionsInfo?K.hostVersionsInfo.adaptiveCardSchemaVersion:void 0}!function(o){function M(){return!!(we(K)&&K.supports.geoLocation&&K.supports.permissions)}o.getCurrentLocation=function(){if(we(K,j.content,j.task),!M())throw u;return Sn(C(oi,O.GeoLocation_GetCurrentLocation),"location.getLocation",{allowChooseLocation:!1,showMap:!1})},o.hasPermission=function(){if(we(K,j.content,j.task),!M())throw u;var A=$e.GeoLocation;return new Promise(function(D){D(Sn(C(oi,O.GeoLocation_HasPermission),"permissions.has",A))})},o.requestPermission=function(){if(we(K,j.content,j.task),!M())throw u;var A=$e.GeoLocation;return new Promise(function(D){D(Sn(C(oi,O.GeoLocation_RequestPermission),"permissions.request",A))})},o.isSupported=M,function(A){function D(){return!!(we(K)&&K.supports.geoLocation&&K.supports.geoLocation.map&&K.supports.permissions)}A.chooseLocation=function(){if(we(K,j.content,j.task),!D())throw u;return Sn(C(oi,O.GeoLocation_Map_ChooseLocation),"location.getLocation",{allowChooseLocation:!0,showMap:!0})},A.showLocation=function(z){if(we(K,j.content,j.task),!D())throw u;if(!z)throw{errorCode:ze.INVALID_ARGUMENTS};return Sn(C(oi,O.GeoLocation_ShowLocation),"location.showLocation",z)},A.isSupported=D}(o.map||(o.map={}))}(cr||(cr={}));var ua=function(){function o(){}var M=o.prototype;return M.postMessage=function(A,D){we(K),St("messageForChild",[A],D||B())},M.addEventListener=function(A,D){we(K),"message"===A&&Ft("messageForParent",D)},o}(),Ja=function(){function o(){}var M=o.prototype;return M.postMessage=function(A,D){we(K,j.task),St("messageForParent",[A],D||B())},M.addEventListener=function(A,D){we(K,j.task),"message"===A&&Ft("messageForChild",D)},t(o,null,[{key:"Instance",get:function(){return this._instance||(this._instance=new this)}}]),o}();!function(o){function M(){return!(!we(K)||!K.supports.secondaryBrowser)}o.open=function(R){if(we(K,j.content),!M())throw u;if(!R||!ue(R))throw{errorCode:ze.INVALID_ARGUMENTS,message:"Invalid Url: Only https URL is allowed"};return _n("secondaryBrowser.open",R.toString())},o.isSupported=M}(ur||(ur={}));var mi,da=k.V_1;!function(o){function M(){return!(!we(K)||!K.supports.location)}o.getLocation=function(R,A){if(!A)throw new Error("[location.getLocation] Callback cannot be null");if(we(K,j.content,j.task),!Gn(Z))throw{errorCode:ze.OLD_PLATFORM};if(!R)throw{errorCode:ze.INVALID_ARGUMENTS};if(!M())throw u;Wt(C(da,O.Location_GetLocation),"location.getLocation",[R],A)},o.showLocation=function(R,A){if(!A)throw new Error("[location.showLocation] Callback cannot be null");if(we(K,j.content,j.task),!Gn(Z))throw{errorCode:ze.OLD_PLATFORM};if(!R)throw{errorCode:ze.INVALID_ARGUMENTS};if(!M())throw u;Wt(C(da,O.Location_ShowLocation),"location.showLocation",[R],A)},o.isSupported=M}(mi||(mi={}));var dr,fi,pr=function(M,R,A,D){return new(A||(A=Promise))(function(_e,be){function Pe(ke){try{ve(D.next(ke))}catch(je){be(je)}}function Me(ke){try{ve(D.throw(ke))}catch(je){be(je)}}function ve(ke){ke.done?_e(ke.value):function(_e){return _e instanceof A?_e:new A(function(be){be(_e)})}(ke.value).then(Pe,Me)}ve((D=D.apply(M,R||[])).next())})};(function(o){var M,z,ve;function Me(ve,ke){we(K,j.sidePanel,j.meetingStage),St("meeting.updateMicState",[ve,ke])}(ve=M||(M={}))[ve.HostInitiated=0]="HostInitiated",ve[ve.AppInitiated=1]="AppInitiated",ve[ve.AppDeclinedToChange=2]="AppDeclinedToChange",ve[ve.AppFailedToChange=3]="AppFailedToChange",function(ve){ve.like="like",ve.heart="heart",ve.laugh="laugh",ve.surprised="surprised",ve.applause="applause"}(o.MeetingReactionType||(o.MeetingReactionType={})),function(ve){ve.Unknown="Unknown",ve.Adhoc="Adhoc",ve.Scheduled="Scheduled",ve.Recurring="Recurring",ve.Broadcast="Broadcast",ve.MeetNow="MeetNow"}(o.MeetingType||(o.MeetingType={})),function(ve){ve.OneOnOneCall="oneOnOneCall",ve.GroupCall="groupCall"}(o.CallType||(o.CallType={})),function(ve){ve.Collaborative="Collaborative",ve.ScreenShare="ScreenShare"}(z=o.SharingProtocol||(o.SharingProtocol={})),o.getIncomingClientAudioState=function(ve){if(!ve)throw new Error("[get incoming client audio state] Callback cannot be null");we(K,j.sidePanel,j.meetingStage),St("getIncomingClientAudioState",ve)},o.toggleIncomingClientAudio=function(ve){if(!ve)throw new Error("[toggle incoming client audio] Callback cannot be null");we(K,j.sidePanel,j.meetingStage),St("toggleIncomingClientAudio",ve)},o.getMeetingDetails=function(ve){if(!ve)throw new Error("[get meeting details] Callback cannot be null");we(K,j.sidePanel,j.meetingStage,j.settings,j.content),St("meeting.getMeetingDetails",ve)},o.getAuthenticationTokenForAnonymousUser=function(ve){if(!ve)throw new Error("[get Authentication Token For AnonymousUser] Callback cannot be null");we(K,j.sidePanel,j.meetingStage,j.task),St("meeting.getAuthenticationTokenForAnonymousUser",ve)},o.getLiveStreamState=function(ve){if(!ve)throw new Error("[get live stream state] Callback cannot be null");we(K,j.sidePanel),St("meeting.getLiveStreamState",ve)},o.requestStartLiveStreaming=function(ve,ke,je){if(!ve)throw new Error("[request start live streaming] Callback cannot be null");we(K,j.sidePanel),St("meeting.requestStartLiveStreaming",[ke,je],ve)},o.requestStopLiveStreaming=function(ve){if(!ve)throw new Error("[request stop live streaming] Callback cannot be null");we(K,j.sidePanel),St("meeting.requestStopLiveStreaming",ve)},o.registerLiveStreamChangedHandler=function(ve){if(!ve)throw new Error("[register live stream changed handler] Handler cannot be null");we(K,j.sidePanel),Ft("meeting.liveStreamChanged",ve)},o.shareAppContentToStage=function(ve,ke,je){if(void 0===je&&(je={sharingProtocol:z.Collaborative}),!ve)throw new Error("[share app content to stage] Callback cannot be null");we(K,j.sidePanel,j.meetingStage),St("meeting.shareAppContentToStage",[ke,je],ve)},o.getAppContentStageSharingCapabilities=function(ve){if(!ve)throw new Error("[get app content stage sharing capabilities] Callback cannot be null");we(K,j.sidePanel,j.meetingStage),St("meeting.getAppContentStageSharingCapabilities",ve)},o.stopSharingAppContentToStage=function(ve){if(!ve)throw new Error("[stop sharing app content to stage] Callback cannot be null");we(K,j.sidePanel,j.meetingStage),St("meeting.stopSharingAppContentToStage",ve)},o.getAppContentStageSharingState=function(ve){if(!ve)throw new Error("[get app content stage sharing state] Callback cannot be null");we(K,j.sidePanel,j.meetingStage),St("meeting.getAppContentStageSharingState",ve)},o.registerSpeakingStateChangeHandler=function(ve){if(!ve)throw new Error("[registerSpeakingStateChangeHandler] Handler cannot be null");we(K,j.sidePanel,j.meetingStage),Ft("meeting.speakingStateChanged",ve)},o.registerRaiseHandStateChangedHandler=function(ve){if(!ve)throw new Error("[registerRaiseHandStateChangedHandler] Handler cannot be null");we(K,j.sidePanel,j.meetingStage),Ft("meeting.raiseHandStateChanged",ve)},o.registerMeetingReactionReceivedHandler=function(ve){if(!ve)throw new Error("[registerMeetingReactionReceivedHandler] Handler cannot be null");we(K,j.sidePanel,j.meetingStage),Ft("meeting.meetingReactionReceived",ve)},function(ve){ve.setOptions=function(ke){we(K,j.sidePanel),ke.contentUrl&&new URL(ke.contentUrl),St("meeting.appShareButton.setOptions",[ke])}}(o.appShareButton||(o.appShareButton={})),o.requestAppAudioHandling=function(ve,ke){if(!ke)throw new Error("[requestAppAudioHandling] Callback response cannot be null");if(!ve.micMuteStateChangedCallback)throw new Error("[requestAppAudioHandling] Callback Mic mute state handler cannot be null");we(K,j.sidePanel,j.meetingStage),ve.isAppHandlingAudio?function(ve,ke){var je=this;St("meeting.requestAppAudioHandling",[ve.isAppHandlingAudio],function(yt,Ut){if(yt&&null!=Ut)throw new Error("[requestAppAudioHandling] Callback response - both parameters cannot be set");if(yt)throw new Error("[requestAppAudioHandling] Callback response - SDK error "+yt.errorCode+" "+yt.message);if("boolean"!=typeof Ut)throw new Error("[requestAppAudioHandling] Callback response - isHostAudioless must be a boolean");Ft("meeting.micStateChanged",function(Pt){return pr(je,void 0,void 0,a().mark(function Ze(){var wt;return a().wrap(function(Ct){for(;;)switch(Ct.prev=Ct.next){case 0:return Ct.prev=0,Ct.next=3,ve.micMuteStateChangedCallback(Pt);case 3:Me(wt=Ct.sent,wt.isMicMuted===Pt.isMicMuted?M.HostInitiated:M.AppDeclinedToChange),Ct.next=10;break;case 7:Ct.prev=7,Ct.t0=Ct.catch(0),Me(Pt,M.AppFailedToChange);case 10:case"end":return Ct.stop()}},Ze,null,[[0,7]])}))}),Ft("meeting.audioDeviceSelectionChanged",function(Pt){var Ze;null===(Ze=ve.audioDeviceSelectionChangedCallback)||void 0===Ze||Ze.call(ve,Pt)}),ke(Ut)})}(ve,ke):function(ve,ke){St("meeting.requestAppAudioHandling",[ve.isAppHandlingAudio],function(je,yt){if(je&&null!=yt)throw new Error("[requestAppAudioHandling] Callback response - both parameters cannot be set");if(je)throw new Error("[requestAppAudioHandling] Callback response - SDK error "+je.errorCode+" "+je.message);if("boolean"!=typeof yt)throw new Error("[requestAppAudioHandling] Callback response - isHostAudioless must be a boolean");Zn("meeting.micStateChanged")&&cn("meeting.micStateChanged"),Zn("meeting.audioDeviceSelectionChanged")&&cn("meeting.audioDeviceSelectionChanged"),ke(yt)})}(ve,ke)},o.updateMicState=function(ve){Me(ve,M.AppInitiated)}})(dr||(dr={})),function(o){function M(){return!(!we(K)||!K.supports.monetization)}o.openPurchaseExperience=function(R,A){var D,z;return"function"==typeof R?(D=R,z=A):z=R,we(K,j.content),function(o,M){for(var R=arguments.length,A=new Array(R>2?R-2:0),D=2;D<R;D++)A[D-2]=arguments[D];var z=o.apply(void 0,A);return z.then(function(_e){M&&M(null,_e)}).catch(function(_e){M&&M(_e,null)}),z}(function(){return new Promise(function(_e){if(!M())throw u;_e(_n("monetization.openPurchaseExperience",z))})},D)},o.isSupported=M}(fi||(fi={}));var hr,gr=k.V_2;!function(o){function M(){return!(!we(K)||!K.supports.calendar)}o.openCalendarItem=function(R){return new Promise(function(A){if(we(K,j.content),!M())throw new Error("Not supported");if(!R.itemId||!R.itemId.trim())throw new Error("Must supply an itemId to openCalendarItem");A(Oo(C(gr,O.Calendar_OpenCalendarItem),"calendar.openCalendarItem",R))})},o.composeMeeting=function(R){return new Promise(function(A){if(we(K,j.content),!M())throw new Error("Not supported");A(K.isLegacyTeams?So("executeDeepLink",function(o,M,R,A,D){var z=void 0===o?"":"attendees="+o.map(function(ve){return encodeURIComponent(ve)}).join(","),_e=void 0===M?"":"&startTime="+encodeURIComponent(M),be=void 0===R?"":"&endTime="+encodeURIComponent(R),Pe=void 0===A?"":"&subject="+encodeURIComponent(A),Me=void 0===D?"":"&content="+encodeURIComponent(D);return G+"://"+Y+"/l/meeting/new?"+z+_e+be+Pe+Me}(R.attendees,R.startTime,R.endTime,R.subject,R.content)):Oo(C(gr,O.Calendar_ComposeMeeting),"calendar.composeMeeting",R))})},o.isSupported=M}(hr||(hr={}));var mr,Xo,fr,vr,pa=k.V_2;(function(o){function M(){return!(!we(K)||!K.supports.mail)}var A;o.openMailItem=function(A){return new Promise(function(D){if(we(K,j.content),!M())throw new Error("Not supported");if(!A.itemId||!A.itemId.trim())throw new Error("Must supply an itemId to openMailItem");D(Oo(C(pa,O.Mail_OpenMailItem),"mail.openMailItem",A))})},o.composeMail=function(A){return new Promise(function(D){if(we(K,j.content),!M())throw new Error("Not supported");D(Oo(C(pa,O.Mail_ComposeMail),"mail.composeMail",A))})},o.isSupported=M,(A=o.ComposeMailType||(o.ComposeMailType={})).New="new",A.Reply="reply",A.ReplyAll="replyAll",A.Forward="forward"})(mr||(mr={})),function(o){function M(){Xe().print()}function R(z,_e){!nn(z)&&we(K),!nn(z)&&_e&&_e(),function(o){Qt.loadHandler=o,!nn(o)&&Wt(C(k.V_2,O.RegisterHandler),"registerHandler",["load"])}(z)}function A(z,_e){!nn(z)&&we(K),!nn(z)&&_e&&_e(),function(o){Qt.beforeUnloadHandler=o,!nn(o)&&Wt(C(k.V_2,O.RegisterHandler),"registerHandler",["beforeUnload"])}(z)}function D(){return!(!we(K)||!K.supports.teamsCore)}o.enablePrintCapability=function(){if(!J.printCapabilityEnabled){if(we(K),!D())throw u;J.printCapabilityEnabled=!0,document.addEventListener("keydown",function(z){(z.ctrlKey||z.metaKey)&&80===z.keyCode&&(M(),z.cancelBubble=!0,z.preventDefault(),z.stopImmediatePropagation())})}},o.print=M,o.registerOnLoadHandler=function(z){R(z,function(){if(!nn(z)&&!D())throw u})},o.registerOnLoadHandlerHelper=R,o.registerBeforeUnloadHandler=function(z){A(z,function(){if(!nn(z)&&!D())throw u})},o.registerBeforeUnloadHandlerHelper=A,o.isSupported=D}(Xo||(Xo={})),function(o){function M(A){return new Promise(function(D){if(!Gn("2.0.0"))throw{errorCode:ze.OLD_PLATFORM};if(!function(o){return!(o&&(o.title&&"string"!=typeof o.title||o.setSelected&&"object"!=typeof o.setSelected||o.openOrgWideSearchInChatOrChannel&&"boolean"!=typeof o.openOrgWideSearchInChatOrChannel||o.singleSelect&&"boolean"!=typeof o.singleSelect))}(A))throw{errorCode:ze.INVALID_ARGUMENTS};if(!R())throw u;D(_n("people.selectPeople",A))})}function R(){return!(!we(K)||!K.supports.people)}o.selectPeople=function(A,D){var z,_e,be;return we(K,j.content,j.task,j.settings),"function"==typeof A?(_e=(z=[A,D])[0],be=z[1]):be=A,function(o,M){for(var R=arguments.length,A=new Array(R>2?R-2:0),D=2;D<R;D++)A[D-2]=arguments[D];var z=o.apply(void 0,A);return z.then(function(_e){M&&M(void 0,_e)}).catch(function(_e){M&&M(_e)}),z}(M,_e,be)},o.isSupported=R}(fr||(fr={})),function(o){o.showProfile=function(M){return we(K,j.content),new Promise(function(R){var A=function(o){return o?o.modality&&"string"!=typeof o.modality?[!1,"modality must be a string"]:o.targetElementBoundingRect&&"object"==typeof o.targetElementBoundingRect?o.triggerType&&"string"==typeof o.triggerType?function(o){return o?o.displayName&&"string"!=typeof o.displayName?[!1,"displayName must be a string"]:o.identifiers&&"object"==typeof o.identifiers?o.identifiers.AadObjectId||o.identifiers.Smtp||o.identifiers.Upn?o.identifiers.AadObjectId&&"string"!=typeof o.identifiers.AadObjectId?[!1,"AadObjectId identifier must be a string"]:o.identifiers.Smtp&&"string"!=typeof o.identifiers.Smtp?[!1,"Smtp identifier must be a string"]:o.identifiers.Upn&&"string"!=typeof o.identifiers.Upn?[!1,"Upn identifier must be a string"]:[!0,void 0]:[!1,"at least one valid identifier must be provided"]:[!1,"persona identifiers object must be provided"]:[!1,"persona object must be provided"]}(o.persona):[!1,"triggerType must be a valid string"]:[!1,"targetElementBoundingRect must be a DOMRect"]:[!1,"A request object is required"]}(M);if(!A[0])throw{errorCode:ze.INVALID_ARGUMENTS,message:A[1]};R(_n("profile.showProfile",{modality:M.modality,persona:M.persona,triggerType:M.triggerType,targetRectangle:{x:M.targetElementBoundingRect.x,y:M.targetElementBoundingRect.y,width:M.targetElementBoundingRect.width,height:M.targetElementBoundingRect.height}}))})},o.isSupported=function(){return!(!we(K)||!K.supports.profile)}}(vr||(vr={}));var Yo,Vo=function(M,R,A,D){return new(A||(A=Promise))(function(_e,be){function Pe(ke){try{ve(D.next(ke))}catch(je){be(je)}}function Me(ke){try{ve(D.throw(ke))}catch(je){be(je)}}function ve(ke){ke.done?_e(ke.value):function(_e){return _e instanceof A?_e:new A(function(be){be(_e)})}(ke.value).then(Pe,Me)}ve((D=D.apply(M,R||[])).next())})};function ha(o,M,R,A){var D,z;return Vo(this,void 0,void 0,a().mark(function _e(){var be;return a().wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:return be=va(),!it()&&(null===(z=null===(D=window.chrome)||void 0===D?void 0:D.webview)||void 0===z||z.registerTextureStream(o,be)),Me.t0=zi,Me.next=5,fa(o,R,A);case 5:Me.t1=Me.sent,Me.t2=new _r(R,M),Me.t3=be.writable,(0,Me.t0)(Me.t1,Me.t2,Me.t3);case 9:case"end":return Me.stop()}},_e)}))}function ma(o,M,R,A){var D,z;return Vo(this,void 0,void 0,a().mark(function _e(){var be;return a().wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:return be=va(),!it()&&(null===(z=null===(D=window.chrome)||void 0===D?void 0:D.webview)||void 0===z||z.registerTextureStream(o,be)),Me.t0=zi,Me.next=5,fa(o,R,A);case 5:Me.t1=Me.sent,Me.t2=new qa(R,M),Me.t3=be.writable,(0,Me.t0)(Me.t1,Me.t2,Me.t3);case 9:case"end":return Me.stop()}},_e)}))}function fa(o,M,R){return Vo(this,void 0,void 0,a().mark(function A(){var D,z;return a().wrap(function(be){for(;;)switch(be.prev=be.next){case 0:if(!it()){be.next=2;break}throw u;case 2:return D=Xe().chrome,be.prev=3,R?.reportGettingTextureStream(o),be.next=7,D.webview.getTextureStream(o);case 7:if(0!==(z=be.sent.getVideoTracks()).length){be.next=10;break}throw new Error("No video track in stream "+o);case 10:return be.abrupt("return",(R?.reportTextureStreamAcquired(),z[0]));case 13:throw be.prev=13,be.t0=be.catch(3),M("Failed to get video track from stream "+o+", error: "+be.t0),new Error("Internal error: can't get video track from stream "+o);case 16:case"end":return be.stop()}},A,null,[[3,13]])}))}function va(){if(it())throw u;var o=window.MediaStreamTrackGenerator;if(!o)throw u;return new o({kind:"video"})}function zi(o,M,R){new(Xe().MediaStreamTrackProcessor)({track:o}).readable.pipeThrough(new TransformStream(M)).pipeTo(R)}!function(o){o.TimestampIsNull="timestamp of the original video frame is null",o.UnsupportedVideoFramePixelFormat="Unsupported video frame pixel format"}(Yo||(Yo={}));var _r=function(M,R){var A=this;this.notifyError=M,this.videoFrameHandler=R,this.transform=function(D,z){return Vo(A,void 0,void 0,a().mark(function _e(){var be,Pe,Me;return a().wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:if(null===(be=D.timestamp)){ke.next=15;break}return ke.prev=2,ke.next=5,this.videoFrameHandler({videoFrame:D});case 5:Pe=ke.sent,Me=new VideoFrame(Pe,{timestamp:be}),z.enqueue(Me),D.close(),Pe.close(),ke.next=13;break;case 10:ke.prev=10,ke.t0=ke.catch(2),D.close(),this.notifyError(ke.t0);case 13:ke.next=16;break;case 15:this.notifyError(Yo.TimestampIsNull);case 16:case"end":return ke.stop()}},_e,this,[[2,10]])}))}},Xa=function(){function o(M,R){if(this.headerBuffer=M,this.notifyError=R,this.ONE_TEXTURE_INPUT_ID=1869900081,this.INVALID_HEADER_ERROR="Invalid video frame header",this.UNSUPPORTED_LAYOUT_ERROR="Unsupported texture layout",this.headerDataView=new Uint32Array(M),this.headerDataView.length<8)throw this.notifyError(this.INVALID_HEADER_ERROR),new Error(this.INVALID_HEADER_ERROR);if(this.headerDataView[0]!==this.ONE_TEXTURE_INPUT_ID)throw this.notifyError(this.UNSUPPORTED_LAYOUT_ERROR),new Error(this.UNSUPPORTED_LAYOUT_ERROR)}return t(o,[{key:"oneTextureLayoutId",get:function(){return this.headerDataView[0]}},{key:"version",get:function(){return this.headerDataView[1]}},{key:"frameRowOffset",get:function(){return this.headerDataView[2]}},{key:"frameFormat",get:function(){return this.headerDataView[3]}},{key:"frameWidth",get:function(){return this.headerDataView[4]}},{key:"frameHeight",get:function(){return this.headerDataView[5]}},{key:"multiStreamHeaderRowOffset",get:function(){return this.headerDataView[6]}},{key:"multiStreamCount",get:function(){return this.headerDataView[7]}}]),o}(),Ya=function(){function o(M,R){this.metadataMap=new Map,this.AUDIO_INFERENCE_RESULT_STREAM_ID=828664161;for(var A=new Uint32Array(M),D=0,z=0;D<R;D++){var _e=A[z++],be=A[z++],Pe=A[z++],Me=new Uint8Array(M,be,Pe);this.metadataMap.set(_e,Me)}}return t(o,[{key:"audioInferenceResult",get:function(){return this.metadataMap.get(this.AUDIO_INFERENCE_RESULT_STREAM_ID)}}]),o}(),qa=function(M,R){var A=this;this.notifyError=M,this.videoFrameHandler=R,this.shouldDiscardAudioInferenceResult=!1,this.transform=function(D,z){return Vo(A,void 0,void 0,a().mark(function _e(){var be,Pe,Me,ve,je,yt,Ut;return a().wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:if(null===(be=D.timestamp)){Ze.next=22;break}return Ze.prev=2,Ze.next=5,this.extractVideoFrameAndMetadata(D);case 5:return Me=(Pe=Ze.sent).videoFrame,je=(void 0===(ve=Pe.metadata)?{}:ve).audioInferenceResult,Ze.next=12,this.videoFrameHandler({videoFrame:Me,audioInferenceResult:je});case 12:yt=Ze.sent,Ut=new VideoFrame(yt,{timestamp:be}),z.enqueue(Ut),Me.close(),D.close(),yt.close(),Ze.next=20;break;case 17:Ze.prev=17,Ze.t0=Ze.catch(2),D.close(),this.notifyError(Ze.t0);case 20:Ze.next=23;break;case 22:this.notifyError(Yo.TimestampIsNull);case 23:case"end":return Ze.stop()}},_e,this,[[2,17]])}))},this.extractVideoFrameAndMetadata=function(D){return Vo(A,void 0,void 0,a().mark(function z(){var _e,be,Pe,Me,ve,ke;return a().wrap(function(yt){for(;;)switch(yt.prev=yt.next){case 0:if(!it()){yt.next=2;break}throw u;case 2:if("NV12"===D.format){yt.next=4;break}throw this.notifyError(Yo.UnsupportedVideoFramePixelFormat),new Error(Yo.UnsupportedVideoFramePixelFormat);case 4:return _e={x:0,y:0,width:D.codedWidth,height:2},be=new ArrayBuffer(_e.width*_e.height*3/2),yt.next=7,D.copyTo(be,{rect:_e});case 7:return Pe=new Xa(be,this.notifyError),Me={x:0,y:Pe.multiStreamHeaderRowOffset,width:D.codedWidth,height:D.codedHeight-Pe.multiStreamHeaderRowOffset},ve=new ArrayBuffer(Me.width*Me.height*3/2),yt.next=10,D.copyTo(ve,{rect:Me});case 10:return ke=new Ya(ve,Pe.multiStreamCount),yt.abrupt("return",{videoFrame:new VideoFrame(D,{timestamp:D.timestamp,visibleRect:{x:0,y:Pe.frameRowOffset,width:Pe.frameWidth,height:Pe.frameHeight}}),metadata:{audioInferenceResult:this.shouldDiscardAudioInferenceResult?void 0:ke.audioInferenceResult}});case 12:case"end":return yt.stop()}},z,this)}))},Ft("video.mediaStream.audioInferenceDiscardStatusChange",function(D){A.shouldDiscardAudioInferenceResult=D.discardAudioInferenceResult})};function Do(o,M){return function(R,A){M?.reportApplyingVideoEffect(R||"",A),o(R,A).then(function(){M?.reportVideoEffectChanged(R||"",A),St("video.videoEffectReadiness",[!0,R,void 0,A])}).catch(function(D){St("video.videoEffectReadiness",[!1,R,D in ko.EffectFailureReason?D:ko.EffectFailureReason.InitializationFailure,A])})}}var To=function(){function o(){}return o.setTimeout=function(R,A){var D=performance.now(),z=q();return o.setTimeoutCallbacks[z]={callback:R,timeoutInMs:A,startedAtInMs:D},z},o.clearTimeout=function(R){delete o.setTimeoutCallbacks[R]},o.setInterval=function(R,A){o.setTimeout(function D(){R(),o.setTimeout(D,A)},A)},o.tick=function(){var R=performance.now(),A=[];for(var D in o.setTimeoutCallbacks){var z=o.setTimeoutCallbacks[D];R-z.startedAtInMs>=z.timeoutInMs&&A.push(D)}for(var _e=0,be=A;_e<be.length;_e++){var Pe=be[_e];o.setTimeoutCallbacks[Pe].callback(),delete o.setTimeoutCallbacks[Pe]}},o}();To.setTimeoutCallbacks={};var Hi=function(){function o(R,A){this.reportStatisticsResult=A,this.sampleCount=0,this.distributionBins=new Uint32Array(R)}var M=o.prototype;return M.processStarts=function(A,D,z,_e){To.tick(),this.suitableForThisSession(A,D,z,_e)||this.reportAndResetSession(this.getStatistics(),A,_e,D,z),this.start()},M.processEnds=function(){var A=performance.now()-this.frameProcessingStartedAt,D=Math.floor(Math.max(0,Math.min(this.distributionBins.length-1,A)));this.distributionBins[D]+=1,this.sampleCount+=1},M.getStatistics=function(){return this.currentSession?{effectId:this.currentSession.effectId,effectParam:this.currentSession.effectParam,frameHeight:this.currentSession.frameHeight,frameWidth:this.currentSession.frameWidth,duration:performance.now()-this.currentSession.startedAtInMs,sampleCount:this.sampleCount,distributionBins:this.distributionBins.slice()}:null},M.start=function(){this.frameProcessingStartedAt=performance.now()},M.suitableForThisSession=function(A,D,z,_e){return this.currentSession&&this.currentSession.effectId===A&&this.currentSession.effectParam===_e&&this.currentSession.frameWidth===D&&this.currentSession.frameHeight===z},M.reportAndResetSession=function(A,D,z,_e,be){var Pe=this;A&&this.reportStatisticsResult(A),this.resetCurrentSession(this.getNextTimeout(D,this.currentSession),D,z,_e,be),this.timeoutId&&To.clearTimeout(this.timeoutId),this.timeoutId=To.setTimeout(function(){return Pe.reportAndResetSession(Pe.getStatistics(),D,z,_e,be)}.bind(this),this.currentSession.timeoutInMs)},M.resetCurrentSession=function(A,D,z,_e,be){this.currentSession={startedAtInMs:performance.now(),timeoutInMs:A,effectId:D,effectParam:z,frameWidth:_e,frameHeight:be},this.sampleCount=0,this.distributionBins.fill(0)},M.getNextTimeout=function(A,D){return D&&D.effectId===A?Math.min(o.maxSessionTimeoutInMs,2*D.timeoutInMs):o.initialSessionTimeoutInMs},o}();Hi.initialSessionTimeoutInMs=1e3,Hi.maxSessionTimeoutInMs=3e4;var Wi=function(){function o(R){var A=this;this.reportPerformanceEvent=R,this.isFirstFrameProcessed=!1,this.frameProcessTimeLimit=100,this.frameProcessingStartedAt=0,this.frameProcessingTimeCost=0,this.processedFrameCount=0,this.performanceStatistics=new Hi(o.distributionBinSize,function(D){return A.reportPerformanceEvent("video.performance.performanceDataGenerated",[D])})}var M=o.prototype;return M.startMonitorSlowFrameProcessing=function(){var A=this;To.setInterval(function(){if(0!==A.processedFrameCount){var D=A.frameProcessingTimeCost/A.processedFrameCount;D>A.frameProcessTimeLimit&&A.reportPerformanceEvent("video.performance.frameProcessingSlow",[D]),A.frameProcessingTimeCost=0,A.processedFrameCount=0}},o.calculateFPSInterval)},M.setFrameProcessTimeLimit=function(A){this.frameProcessTimeLimit=A},M.reportApplyingVideoEffect=function(A,D){var z,_e;(null===(z=this.applyingEffect)||void 0===z?void 0:z.effectId)===A&&(null===(_e=this.applyingEffect)||void 0===_e?void 0:_e.effectParam)===D||(this.applyingEffect={effectId:A,effectParam:D},this.appliedEffect=void 0)},M.reportVideoEffectChanged=function(A,D){void 0===this.applyingEffect||this.applyingEffect.effectId!==A&&this.applyingEffect.effectParam!==D||(this.appliedEffect={effectId:A,effectParam:D},this.applyingEffect=void 0,this.isFirstFrameProcessed=!1)},M.reportStartFrameProcessing=function(A,D){To.tick(),this.appliedEffect&&(this.frameProcessingStartedAt=performance.now(),this.performanceStatistics.processStarts(this.appliedEffect.effectId,A,D,this.appliedEffect.effectParam))},M.reportFrameProcessed=function(){var A;this.appliedEffect&&(this.processedFrameCount++,this.frameProcessingTimeCost+=performance.now()-this.frameProcessingStartedAt,this.performanceStatistics.processEnds(),this.isFirstFrameProcessed||(this.isFirstFrameProcessed=!0,this.reportPerformanceEvent("video.performance.firstFrameProcessed",[Date.now(),this.appliedEffect.effectId,null===(A=this.appliedEffect)||void 0===A?void 0:A.effectParam])))},M.reportGettingTextureStream=function(A){this.gettingTextureStreamStartedAt=performance.now(),this.currentStreamId=A},M.reportTextureStreamAcquired=function(){if(void 0!==this.gettingTextureStreamStartedAt){var A=performance.now()-this.gettingTextureStreamStartedAt;this.reportPerformanceEvent("video.performance.textureStreamAcquired",[this.currentStreamId,A])}},o}();Wi.distributionBinSize=1e3,Wi.calculateFPSInterval=1e3;var ko,Cr,yr,ii,Mr=function(M,R,A,D){return new(A||(A=Promise))(function(_e,be){function Pe(ke){try{ve(D.next(ke))}catch(je){be(je)}}function Me(ke){try{ve(D.throw(ke))}catch(je){be(je)}}function ve(ke){ke.done?_e(ke.value):function(_e){return _e instanceof A?_e:new A(function(be){be(_e)})}(ke.value).then(Pe,Me)}ve((D=D.apply(M,R||[])).next())})};(function(o){var Pt,M=it()?void 0:new Wi(St);function _e(Pt){St("video.notifyError",[Pt])}function be(){return we(K)&&!!K.supports.video&&(!!K.supports.video.mediaStream||!!K.supports.video.sharedFrame)}function Me(Pt,Ze){var wt=this;return function(It){return Mr(wt,void 0,void 0,a().mark(function Ct(){var Ht,en;return a().wrap(function(Ln){for(;;)switch(Ln.prev=Ln.next){case 0:return Ht=It.videoFrame,Ze?.reportStartFrameProcessing(Ht.codedWidth,Ht.codedHeight),Ln.next=4,Pt(It);case 4:return en=Ln.sent,Ln.abrupt("return",(Ze?.reportFrameProcessed(),en));case 6:case"end":return Ln.stop()}},Ct)}))}}function ve(Pt,Ze){if(we(K,j.sidePanel),!be()||!Ut())throw u;Ft("video.newVideoFrame",function(wt){if(wt){var It=wt.timestamp;M?.reportStartFrameProcessing(wt.width,wt.height),Pt(function(Pt){if("videoFrameBuffer"in Pt)return Pt;var Ze=Pt.data,wt=function(M,R){var A={};for(var D in M)Object.prototype.hasOwnProperty.call(M,D)&&R.indexOf(D)<0&&(A[D]=M[D]);if(null!=M&&"function"==typeof Object.getOwnPropertySymbols){var z=0;for(D=Object.getOwnPropertySymbols(M);z<D.length;z++)R.indexOf(D[z])<0&&Object.prototype.propertyIsEnumerable.call(M,D[z])&&(A[D[z]]=M[D[z]])}return A}(Pt,["data"]);return Object.assign(Object.assign({},wt),{videoFrameBuffer:Ze})}(wt),function(){M?.reportFrameProcessed(),function(Pt){St("video.videoFrameProcessed",[Pt])}(It)},_e)}},!1),St("video.registerForVideoFrame",[Ze])}function je(){var Pt;return we(K,j.sidePanel)&&function(){var Pt,Ze,wt,It;return!(null===(Ze=null===(Pt=Xe().chrome)||void 0===Pt?void 0:Pt.webview)||void 0===Ze||!Ze.getTextureStream||null===(It=null===(wt=Xe().chrome)||void 0===wt?void 0:wt.webview)||void 0===It||!It.registerTextureStream)}()&&!(null===(Pt=K.supports.video)||void 0===Pt||!Pt.mediaStream)}function Ut(){var Pt;return we(K,j.sidePanel)&&!(null===(Pt=K.supports.video)||void 0===Pt||!Pt.sharedFrame)}(o.VideoFrameFormat||(o.VideoFrameFormat={})).NV12="NV12",(Pt=o.EffectChangeType||(o.EffectChangeType={})).EffectChanged="EffectChanged",Pt.EffectDisabled="EffectDisabled",function(Pt){Pt.InvalidEffectId="InvalidEffectId",Pt.InitializationFailure="InitializationFailure"}(o.EffectFailureReason||(o.EffectFailureReason={})),o.registerForVideoFrame=function(Pt){if(we(K,j.sidePanel),!be())throw u;if(!Pt.videoFrameHandler||!Pt.videoBufferHandler)throw new Error("Both videoFrameHandler and videoBufferHandler must be provided");if(Ft("video.setFrameProcessTimeLimit",function(Ze){return M?.setFrameProcessTimeLimit(Ze.timeLimit)},!1),je())!function(Pt,Ze){var wt=this;if(we(K,j.sidePanel),!be()||!je())throw u;Ft("video.startVideoExtensibilityVideoStream",function(It){return Mr(wt,void 0,void 0,a().mark(function Ct(){var Ht,en;return a().wrap(function(Ln){for(;;)switch(Ln.prev=Ln.next){case 0:return Ht=It.streamId,en=Me(Pt,M),Ln.next=3,ha(Ht,en,_e,M);case 3:case"end":return Ln.stop()}},Ct)}))},!1),St("video.mediaStream.registerForVideoFrame",[Ze])}(Pt.videoFrameHandler,Pt.config);else{if(!Ut())throw u;ve(Pt.videoBufferHandler,Pt.config)}M?.startMonitorSlowFrameProcessing()},o.notifySelectedVideoEffectChanged=function(Pt,Ze){if(we(K,j.sidePanel),!be())throw u;St("video.videoEffectChanged",[Pt,Ze])},o.registerForVideoEffect=function(Pt){if(we(K,j.sidePanel),!be())throw u;Ft("video.effectParameterChange",Do(Pt,M),!1),St("video.registerForVideoEffect")},o.isSupported=be})(ko||(ko={})),function(o){var M="search.queryChange",R="search.queryClose",A="search.queryExecute";function D(){return!(!we(K)||!K.supports.search)}o.registerHandlers=function(z,_e,be){if(we(K,j.content),!D())throw u;Ft(R,z),Ft(A,_e),be&&Ft(M,be)},o.unregisterHandlers=function(){if(we(K,j.content),!D())throw u;St("search.unregister"),cn(M),cn(R),cn(A)},o.isSupported=D,o.closeSearch=function(){return new Promise(function(z){if(we(K,j.content),!D())throw new Error("Not supported");z(So("search.closeSearch"))})}}(Cr||(Cr={})),function(o){function M(_e){return new Promise(function(be){if(!z())throw u;be(_n(o.SharingAPIMessages.shareWebContent,_e))})}function z(){return!(!we(K)||!K.supports.sharing)}o.SharingAPIMessages={shareWebContent:"sharing.shareWebContent"},o.shareWebContent=function(_e,be){try{(function(_e){if(!(_e&&_e.content&&_e.content.length))throw{errorCode:ze.INVALID_ARGUMENTS,message:"Shared content is missing"}})(_e),function(_e){if(_e.content.some(function(Pe){return!Pe.type}))throw{errorCode:ze.INVALID_ARGUMENTS,message:"Shared content type cannot be undefined"};if(_e.content.some(function(Pe){return Pe.type!==_e.content[0].type}))throw{errorCode:ze.INVALID_ARGUMENTS,message:"Shared content must be of the same type"}}(_e),function(_e){if("URL"!==_e.content[0].type)throw{errorCode:ze.INVALID_ARGUMENTS,message:"Content type is unsupported"};if(_e.content.some(function(Pe){return!Pe.url}))throw{errorCode:ze.INVALID_ARGUMENTS,message:"URLs are required for URL content types"}}(_e)}catch(Pe){return V(function(){return Promise.reject(Pe)},be)}return we(K,j.content,j.sidePanel,j.task,j.stage,j.meetingStage),V(M,be,_e)},o.isSupported=z}(yr||(yr={})),function(o){var A;function R(){return!(!we(K)||!K.supports.stageView)}(A=o.StageViewOpenMode||(o.StageViewOpenMode={})).modal="modal",A.popout="popout",A.popoutWithChat="popoutWithChat",o.open=function(A){return new Promise(function(D){if(we(K,j.content),!R())throw u;if(!A)throw new Error("[stageView.open] Stage view params cannot be null");D(_n("stageView.open",A))})},o.isSupported=R}(ii||(ii={}));var ji,Ki,Pr=function(M,R,A,D){return new(A||(A=Promise))(function(_e,be){function Pe(ke){try{ve(D.next(ke))}catch(je){be(je)}}function Me(ke){try{ve(D.throw(ke))}catch(je){be(je)}}function ve(ke){ke.done?_e(ke.value):function(_e){return _e instanceof A?_e:new A(function(be){be(_e)})}(ke.value).then(Pe,Me)}ve((D=D.apply(M,R||[])).next())})};(function(o){var A,D;(D=o.CameraRestriction||(o.CameraRestriction={}))[D.FrontOrRear=1]="FrontOrRear",D[D.FrontOnly=2]="FrontOnly",D[D.RearOnly=3]="RearOnly",function(D){D[D.Camera=1]="Camera",D[D.Gallery=2]="Gallery"}(o.Source||(o.Source={})),o.hasPermission=function(){if(we(K,j.content,j.task),!A.isSupported())throw u;return _n("permissions.has",$e.Media)},o.requestPermission=function(){if(we(K,j.content,j.task),!A.isSupported())throw u;return _n("permissions.request",$e.Media)},function(D){function z(){return!!(we(K)&&K.supports.visualMedia&&K.supports.visualMedia.image&&K.supports.permissions)}function _e(){if(!z())throw u}function be(Me){if(!Me||Me.maxVisualMediaCount>10||Me.maxVisualMediaCount<1)throw U}function Pe(Me,ve){if(ve.length>Me)throw Q}D.captureImages=function(Me){return Pr(this,void 0,void 0,a().mark(function ve(){var ke;return a().wrap(function(yt){for(;;)switch(yt.prev=yt.next){case 0:return we(K,j.content,j.task),_e(),be(Me),yt.next=3,_n("visualMedia.image.captureImages",Me);case 3:return yt.abrupt("return",(Pe(Me.maxVisualMediaCount,ke=yt.sent),ke));case 5:case"end":return yt.stop()}},ve)}))},D.retrieveImages=function(Me){return Pr(this,void 0,void 0,a().mark(function ve(){var ke;return a().wrap(function(yt){for(;;)switch(yt.prev=yt.next){case 0:return we(K,j.content,j.task),_e(),be(Me),yt.next=3,_n("visualMedia.image.retrieveImages",Me);case 3:return yt.abrupt("return",(Pe(Me.maxVisualMediaCount,ke=yt.sent),ke));case 5:case"end":return yt.stop()}},ve)}))},D.isSupported=z}(A=o.image||(o.image={}))})(ji||(ji={})),function(o){function M(){return!(!we(K)||!K.supports.webStorage)}o.isWebStorageClearedOnUserLogOut=function(){return we(K),M()},o.isSupported=M}(Ki||(Ki={}));var $i,Bo,wr=k.V_2;(function(o){var M,A;function R(){return!(!we(K)||!K.supports.call)}(A=M=o.CallModalities||(o.CallModalities={})).Unknown="unknown",A.Audio="audio",A.Video="video",A.VideoBasedScreenSharing="videoBasedScreenSharing",A.Data="data",o.startCall=function(A){var D=C(wr,O.Call_StartCall);return new Promise(function(z){var _e;if(we(K,j.content,j.task),!R())throw u;if(!K.isLegacyTeams)return Wt(D,"call.startCall",[A],z);z(Qo(D,"executeDeepLink",function(o,M,R){if(0===o.length)throw new Error("Must have at least one target when creating a call deep link");var A="users="+o.map(function(_e){return encodeURIComponent(_e)}).join(","),D=void 0===M?"":"&withVideo="+encodeURIComponent(M),z=void 0===R?"":"&source="+encodeURIComponent(R);return G+"://"+Y+"/l/call/0/0?"+A+D+z}(A.targets,null===(_e=A.requestedModalities)||void 0===_e?void 0:_e.includes(M.Video),A.source)).then(function(be){if(!be)throw new Error("The call was not properly started");return be}))})},o.isSupported=R})($i||($i={})),function(o){o.Messages=De.Messages,o.FailedReason=De.FailedReason,o.ExpectedFailureReason=De.ExpectedFailureReason,o.notifyAppLoaded=function(){De.notifyAppLoaded()},o.notifySuccess=function(){De.notifySuccess()},o.notifyFailure=function(M){De.notifyFailure(M)},o.notifyExpectedFailure=function(M){De.notifyExpectedFailure(M)}}(Bo||(Bo={}));var Qi,Or=r("thirdPartyCloudStorage");!function(o){var M=[],R={fileType:"",assembleAttachment:[]},A=!0,D=null;function z(be){if(D)if(be&&be.error)D([],be.error),D=null;else if(be&&be.fileChunk)try{A||0!==be.fileChunk.chunkSequence||(Or("Last chunk is not received or 'endOfFile' value for previous chunk was not set to true"),A=!0,D([],{errorCode:ze.INTERNAL_ERROR,message:"error occurred while receiving data"}),M=[],D=null);var Pe=ar(be.fileChunk,be.fileType);if(Pe?R.assembleAttachment.push(Pe):(Or("Received a null assemble attachment for when decoding chunk sequence "+be.fileChunk.chunkSequence+"; not including the chunk in the assembled file."),D?D([],{errorCode:ze.INTERNAL_ERROR,message:"error occurred while receiving data"}):D=null,M=[],D=null,A=!0),A=be.fileChunk.endOfFile,be.fileChunk.endOfFile){var Me=ki(R.assembleAttachment,R.fileType);if(Me){var ve=new File([Me],be.fileName,{type:Me.type});M.push(ve)}be.isLastFile&&D&&(D(M,be.error),M=[],D=null,A=!0),R={fileType:"",assembleAttachment:[]}}}catch(ke){D&&(D([],{errorCode:ze.INTERNAL_ERROR,message:ke}),M=[],D=null,A=!0)}else D([],{errorCode:ze.INTERNAL_ERROR,message:"data received is null"}),M=[],D=null,A=!0}function _e(){return!(!we(K)||!K.supports.thirdPartyCloudStorage)}o.getDragAndDropFiles=function(be,Pe){if(!Pe)throw new Error("[getDragAndDropFiles] Callback cannot be null");if(be&&""!==be){if(we(K,j.content,j.task),!_e())throw u;if(D)throw D=null,new Error("getDragAndDropFiles cannot be called twice");D=Pe,A=!0,St("thirdPartyCloudStorage.getDragAndDropFiles",[be],z)}else Pe([],{errorCode:ze.INVALID_ARGUMENTS})},o.isSupported=_e}(Qi||(Qi={}));var Tn=k.V_1;function _a(o,M){qt(C(Tn,O.PublicAPIs_Initialize),M).then(function(){o&&o()})}function Ca(){Xo.enablePrintCapability()}function Sr(){Xo.print()}function ya(o){Wn(),Wt(C(Tn,O.PublicAPIs_GetContext),"getContext",function(M){M.frameContext||(M.frameContext=J.frameContext),o(M)})}function Eo(o){Ve(C(Tn,O.PublicAPIs_RegisterOnThemeChangeHandlerHelper),o)}function vi(o){On(C(Tn,O.PublicAPIs_RegisterFullScreenHandler),"fullScreenChange",o,[])}function Ma(o){On(C(Tn,O.PublicAPIs_RegisterAppButtonClickHandler),"appButtonClick",o,[j.content])}function Er(o){On(C(Tn,O.PublicAPIs_RegisterAppButtonHoverEnterHandler),"appButtonHoverEnter",o,[j.content])}function Ji(o){On(C(Tn,O.PublicAPIs_RegisterAppButtonHoverLeaveHandler),"appButtonHoverLeave",o,[j.content])}function xr(o){tn.backStack.registerBackButtonHandlerHelper(C(Tn,O.PublicAPIs_RegisterBackButtonHandler),o)}function Dr(o){Xo.registerOnLoadHandlerHelper(o)}function Tr(o){Xo.registerBeforeUnloadHandlerHelper(o)}function Ir(o){On(C(Tn,O.PublicAPIs_RegisterFocusEnterHandler),"focusEnter",o,[])}function Rr(o){On(C(Tn,O.PublicAPIs_RegisterChangeSettingsHandler),"changeSettings",o,[j.content])}function Ar(o,M){we(K),Zt(C(Tn,O.PublicAPIs_GetTabInstances),M).then(function(R){o(R)})}function Lr(o,M){we(K),vn(C(Tn,O.PublicAPIs_GetMruTabInstances),M).then(function(R){o(R)})}function Fr(o){En(C(Tn,O.PublicAPIs_ShareDeepLink),{subPageId:o.subEntityId,subPageLabel:o.subEntityLabel,subPageWebUrl:o.subEntityWebUrl})}function Gr(o,M){we(K,j.content,j.sidePanel,j.settings,j.task,j.stage,j.meetingStage);var R=M??B();Fe(C(Tn,O.PublicAPIs_ExecuteDeepLink),o).then(function(){R(!0)}).catch(function(A){R(!1,A.message)})}function Vr(o){An(C(Tn,O.PublicAPIs_SetFrameContext),o)}function kr(o,M,R){qt(C(Tn,O.PublicAPIs_Initialize),R).then(function(){return M&&M()}),An(C(Tn,O.PublicAPIs_SetFrameContext),o)}var _i,ri=k.V_1;function Br(o){jt(C(ri,O.Navigation_ReturnFocus),o)}function Ur(o,M){we(K);var R=M??B();Vt(C(ri,O.Navigation_NavigateToTab),o).then(function(){R(!0)}).catch(function(A){R(!1,A.message)})}function Nr(o,M){we(K,j.content,j.sidePanel,j.settings,j.remove,j.task,j.stage,j.meetingStage);var R=M??B();Mt(C(ri,O.Navigation_NavigateCrossDomain),o).then(function(){R(!0)}).catch(function(A){R(!1,A.message)})}function zr(o){we(K);var M=o??B();ft(C(ri,O.Navigation_NavigateBack)).then(function(){M(!0)}).catch(function(R){M(!1,R.message)})}!function(o){o.setValidityState=function(M){tn.config.setValidityState(M)},o.getSettings=function(M){we(K,j.content,j.settings,j.remove,j.sidePanel),tn.getConfig().then(function(R){M(R)})},o.setSettings=function(M,R){we(K,j.content,j.settings,j.sidePanel);var A=R??B();tn.config.setConfig(M).then(function(){A(!0)}).catch(function(D){A(!1,D.message)})},o.registerOnSaveHandler=function(M){tn.config.registerOnSaveHandlerHelper(M)},o.registerOnRemoveHandler=function(M){tn.config.registerOnRemoveHandlerHelper(M)}}(_i||(_i={}));var yi,ai,Ci=k.V_1;(function(o){function A(D){return D.height=D.height?D.height:g.Small,D.width=D.width?D.width:g.Small,D}o.startTask=function(D,z){var _e=C(Ci,O.Tasks_StartTask),be=z?function(Pe){var Me,ve;return z(null!==(Me=Pe.err)&&void 0!==Me?Me:"",null!==(ve=Pe.result)&&void 0!==ve?ve:"")}:void 0;return void 0===D.card&&void 0===D.url||D.card?(we(K,j.content,j.sidePanel,j.meetingStage),Wt(_e,"tasks.startTask",[D],z)):void 0!==D.completionBotId?Xn(_e,function(D){if(void 0===D.url||void 0===D.completionBotId)throw new Error("Both url "+D.url+" and completionBotId "+D.completionBotId+" are required for bot url dialog. At least one is undefined.");return{url:D.url,size:{height:D.height?D.height:g.Small,width:D.width?D.width:g.Small},title:D.title,fallbackUrl:D.fallbackUrl,completionBotId:D.completionBotId}}(D),be):co(_e,function(D){if(void 0===D.url)throw new Error("url property of taskInfo object can't be undefined");return{url:D.url,size:{height:D.height?D.height:g.Small,width:D.width?D.width:g.Small},title:D.title,fallbackUrl:D.fallbackUrl}}(D),be),new ua},o.updateTask=function(D){var Pe=function(M,R){var A={};for(var D in M)Object.prototype.hasOwnProperty.call(M,D)&&R.indexOf(D)<0&&(A[D]=M[D]);if(null!=M&&"function"==typeof Object.getOwnPropertySymbols){var z=0;for(D=Object.getOwnPropertySymbols(M);z<D.length;z++)R.indexOf(D[z])<0&&Object.prototype.propertyIsEnumerable.call(M,D[z])&&(A[D[z]]=M[D[z]])}return A}(D=A(D),["width","height"]);if(Object.keys(Pe).length)throw new Error("resize requires a TaskInfo argument containing only width and height");jn(C(Ci,O.Tasks_UpdateTask),D)},o.submitTask=function(D,z){Lo(C(Ci,O.Tasks_SubmitTask),D,z)},o.getDefaultSizeIfNotProvided=A})(yi||(yi={})),function(o){var A;(A=o.UserMeetingRole||(o.UserMeetingRole={})).guest="Guest",A.attendee="Attendee",A.presenter="Presenter",A.organizer="Organizer",function(A){A.added="Added",A.alreadyExists="AlreadyExists",A.conflict="Conflict",A.notFound="NotFound"}(o.ContainerState||(o.ContainerState={})),o.isSupported=function(){return!(!we(K,j.meetingStage,j.sidePanel)||!K.supports.interactive)}}(ai||(ai={}));var Wr=function(){function o(){}var M=o.prototype;return M.getFluidTenantInfo=function(){return vo(),new Promise(function(A){A(_n("interactive.getFluidTenantInfo"))})},M.getFluidToken=function(A){return vo(),new Promise(function(D){D(_n("interactive.getFluidToken",A))})},M.getFluidContainerId=function(){return vo(),new Promise(function(A){A(_n("interactive.getFluidContainerId"))})},M.setFluidContainerId=function(A){return vo(),new Promise(function(D){D(_n("interactive.setFluidContainerId",A))})},M.getNtpTime=function(){return vo(),new Promise(function(A){A(_n("interactive.getNtpTime"))})},M.registerClientId=function(A){return vo(),new Promise(function(D){D(_n("interactive.registerClientId",A))})},M.getClientRoles=function(A){return vo(),new Promise(function(D){D(_n("interactive.getClientRoles",A))})},M.getClientInfo=function(A){return vo(),new Promise(function(D){D(_n("interactive.getClientInfo",A))})},o.create=function(){return vo(),new o},o}();function vo(){if(!ai.isSupported())throw new Error("LiveShareHost Not supported")}var jr=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function li(o){try{return o.cartItems=Zi(o.cartItems),o}catch{throw new Error("Error deserializing cart")}}function Zi(o){return o.map(function(M){if(M.imageURL){var R=new URL(M.imageURL);M.imageURL=R}return M.accessories&&(M.accessories=Zi(M.accessories)),M})}var Qr=function o(M){try{return M.map(function(R){var A=R.imageURL,D=R.accessories,z=function(M,R){var A={};for(var D in M)Object.prototype.hasOwnProperty.call(M,D)&&R.indexOf(D)<0&&(A[D]=M[D]);if(null!=M&&"function"==typeof Object.getOwnPropertySymbols){var z=0;for(D=Object.getOwnPropertySymbols(M);z<D.length;z++)R.indexOf(D[z])<0&&Object.prototype.propertyIsEnumerable.call(M,D[z])&&(A[D[z]]=M[D[z]])}return A}(R,["imageURL","accessories"]),_e=Object.assign({},z);return A&&(_e.imageURL=A.href),D&&(_e.accessories=o(D)),_e})}catch{throw new Error("Error serializing cart items")}};function Zr(o){if(null!=o){if(!Array.isArray(o)||0===o.length)throw new Error("CartItem.accessories must be a non-empty array");for(var R,M=w(o);!(R=M()).done;){var A=R.value;if(A.accessories)throw new Error("Item in CartItem.accessories cannot have accessories");Xi(A)}}}function Xi(o){if(!o.id)throw new Error("cartItem.id must not be empty");if(!o.name)throw new Error("cartItem.name must not be empty");(function(o){if("number"!=typeof o||o<0)throw new Error("price "+o+" must be a number not less than 0");if(parseFloat(o.toFixed(3))!==o)throw new Error("price "+o+" must have at most 3 decimal places")})(o.price),function(o){if("number"!=typeof o||o<=0||parseInt(o.toString())!==o)throw new Error("quantity "+o+" must be an integer greater than 0")}(o.quantity)}function Mi(o){if(null!=o){if(!o)throw new Error("id must not be empty");if(!1===("string"==typeof(M=o)&&jr.test(M)))throw new Error("id must be a valid UUID")}var M}var ci,bi,Pi,wi,Oi,Si,Ei,si=k.V_2;(function(o){var D;function A(){return!(!we(K)||!K.supports.marketplace)}o.cartVersion={majorVersion:1,minorVersion:1},(D=o.Intent||(o.Intent={})).TACAdminUser="TACAdminUser",D.TeamsAdminUser="TeamsAdminUser",D.TeamsEndUser="TeamsEndUser",function(D){D.Open="Open",D.Processing="Processing",D.Processed="Processed",D.Closed="Closed",D.Error="Error"}(o.CartStatus||(o.CartStatus={})),o.getCart=function(){if(we(K,j.content,j.task),!A())throw u;return Sn(C(si,O.Marketplace_GetCart),"marketplace.getCart",o.cartVersion).then(li)},o.addOrUpdateCartItems=function(D){if(we(K,j.content,j.task),!A())throw u;if(!D)throw new Error("addOrUpdateCartItemsParams must be provided");return Mi(D?.cartId),function(o){if(!Array.isArray(o)||0===o.length)throw new Error("cartItems must be a non-empty array");for(var R,M=w(o);!(R=M()).done;){var A=R.value;Xi(A),Zr(A.accessories)}}(D?.cartItems),Sn(C(si,O.Marketplace_AddOrUpdateCartItems),"marketplace.addOrUpdateCartItems",Object.assign(Object.assign({},D),{cartItems:Qr(D.cartItems),cartVersion:o.cartVersion})).then(li)},o.removeCartItems=function(D){if(we(K,j.content,j.task),!A())throw u;if(!D)throw new Error("removeCartItemsParams must be provided");if(Mi(D?.cartId),!Array.isArray(D?.cartItemIds)||0===D?.cartItemIds.length)throw new Error("cartItemIds must be a non-empty array");return Sn(C(si,O.Marketplace_RemoveCardItems),"marketplace.removeCartItems",Object.assign(Object.assign({},D),{cartVersion:o.cartVersion})).then(li)},o.updateCartStatus=function(D){if(we(K,j.content,j.task),!A())throw u;if(!D)throw new Error("updateCartStatusParams must be provided");return Mi(D?.cartId),function(o){if(!Object.values(ci.CartStatus).includes(o))throw new Error("cartStatus "+o+" is not valid")}(D?.cartStatus),Sn(C(si,O.Marketplace_UpdateCartStatus),"marketplace.updateCartStatus",Object.assign(Object.assign({},D),{cartVersion:o.cartVersion})).then(li)},o.isSupported=A})(ci||(ci={})),function(o){var R,D,be,M="Action.Execute";function z(be){if(be.requestType===R.ActionExecuteInvokeRequest){if(be.type!==M)throw{errorCode:D.INTERNAL_ERROR,message:"Invalid action type "+be.type+'. Action type must be "'+M+'"'}}else if(be.requestType===R.QueryMessageExtensionRequest){if(be.commandId.length>64)throw new Error("originalRequestInfo.commandId exceeds the maximum size of 64 characters");if(be.parameters.length>5)throw new Error("originalRequestInfo.parameters exceeds the maximum size of 5");for(var ve,Me=w(be.parameters);!(ve=Me()).done;){var ke=ve.value;if(ke.name.length>64)throw new Error("originalRequestInfo.parameters.name exceeds the maximum size of 64 characters");if(ke.value.length>512)throw new Error("originalRequestInfo.parameters.value exceeds the maximum size of 512 characters")}}}function _e(){return!(!we(K)||!K.supports.externalAppAuthentication)}(be=R=o.OriginalRequestType||(o.OriginalRequestType={})).ActionExecuteInvokeRequest="ActionExecuteInvokeRequest",be.QueryMessageExtensionRequest="QueryMessageExtensionRequest",function(be){be.ActionExecuteInvokeResponse="ActionExecuteInvokeResponse",be.QueryMessageExtensionResponse="QueryMessageExtensionResponse"}(o.InvokeResponseType||(o.InvokeResponseType={})),function(be){be.INTERNAL_ERROR="INTERNAL_ERROR"}(D=o.InvokeErrorCode||(o.InvokeErrorCode={})),o.authenticateAndResendRequest=function(be,Pe,Me){if(we(K,j.content),!_e())throw u;return ot(be),z(Me),ao("externalAppAuthentication.authenticateAndResendRequest",[be,Me,Pe.url.href,Pe.width,Pe.height,Pe.isExternal]).then(function(ve){var je=ve[1];if(ve[0]&&null!=je.responseType)return je;throw je})},o.authenticateWithSSO=function(be,Pe){if(we(K,j.content),!_e())throw u;return ot(be),ao("externalAppAuthentication.authenticateWithSSO",[be,Pe.claims,Pe.silent]).then(function(Me){if(!Me[0])throw Me[1]})},o.authenticateWithSSOAndResendRequest=function(be,Pe,Me){if(we(K,j.content),!_e())throw u;return ot(be),z(Me),ao("externalAppAuthentication.authenticateWithSSOAndResendRequest",[be,Me,Pe.claims,Pe.silent]).then(function(ve){var je=ve[1];if(ve[0]&&null!=je.responseType)return je;throw je})},o.isSupported=_e}(bi||(bi={})),function(o){var z;function D(){return!(!we(K)||!K.supports.externalAppCardActions)}(z=o.ActionOpenUrlType||(o.ActionOpenUrlType={})).DeepLinkDialog="DeepLinkDialog",z.DeepLinkOther="DeepLinkOther",z.DeepLinkStageView="DeepLinkStageView",z.GenericUrl="GenericUrl",function(z){z.INTERNAL_ERROR="INTERNAL_ERROR",z.INVALID_LINK="INVALID_LINK",z.NOT_SUPPORTED="NOT_SUPPORTED"}(o.ActionOpenUrlErrorCode||(o.ActionOpenUrlErrorCode={})),function(z){z.INTERNAL_ERROR="INTERNAL_ERROR"}(o.ActionSubmitErrorCode||(o.ActionSubmitErrorCode={})),o.processActionSubmit=function(z,_e){if(we(K,j.content),!D())throw u;return ot(z),ao("externalAppCardActions.processActionSubmit",[z,_e]).then(function(be){if(!be[0])throw be[1]})},o.processActionOpenUrl=function(z,_e){if(we(K,j.content),!D())throw u;return ot(z),ao("externalAppCardActions.processActionOpenUrl",[z,_e.href]).then(function(be){var Pe=be[0];if(Pe)throw Pe;return be[1]})},o.isSupported=D}(Pi||(Pi={})),function(o){var Pe;function be(Pe,Me){return{errorCode:Pe,message:Me}}(Pe=o.CloudStorageProvider||(o.CloudStorageProvider={})).Dropbox="DROPBOX",Pe.Box="BOX",Pe.Sharefile="SHAREFILE",Pe.GoogleDrive="GOOGLEDRIVE",Pe.Egnyte="EGNYTE",Pe.SharePoint="SharePoint",function(Pe){Pe[Pe.Sharepoint=0]="Sharepoint",Pe[Pe.WopiIntegration=1]="WopiIntegration",Pe[Pe.Google=2]="Google",Pe[Pe.OneDrive=3]="OneDrive",Pe[Pe.Recent=4]="Recent",Pe[Pe.Aggregate=5]="Aggregate",Pe[Pe.FileSystem=6]="FileSystem",Pe[Pe.Search=7]="Search",Pe[Pe.AllFiles=8]="AllFiles",Pe[Pe.SharedWithMe=9]="SharedWithMe"}(o.CloudStorageProviderType||(o.CloudStorageProviderType={})),function(Pe){Pe.ClassMaterials="classMaterials"}(o.SpecialDocumentLibraryType||(o.SpecialDocumentLibraryType={})),function(Pe){Pe.Readonly="readonly"}(o.DocumentLibraryAccessType||(o.DocumentLibraryAccessType={})),function(Pe){Pe.Downloaded="Downloaded",Pe.Downloading="Downloading",Pe.Failed="Failed"}(o.FileDownloadStatus||(o.FileDownloadStatus={})),function(Pe){Pe.Download="DOWNLOAD",Pe.Upload="UPLOAD",Pe.Delete="DELETE"}(o.CloudStorageProviderFileAction||(o.CloudStorageProviderFileAction={})),o.getCloudStorageFolders=function(Pe,Me){if(we(K,j.content),!Pe||0===Pe.length)throw new Error("[files.getCloudStorageFolders] channelId name cannot be null or empty");if(!Me)throw new Error("[files.getCloudStorageFolders] Callback cannot be null");St("files.getCloudStorageFolders",[Pe],Me)},o.addCloudStorageFolder=function(Pe,Me){if(we(K,j.content),!Pe||0===Pe.length)throw new Error("[files.addCloudStorageFolder] channelId name cannot be null or empty");if(!Me)throw new Error("[files.addCloudStorageFolder] Callback cannot be null");St("files.addCloudStorageFolder",[Pe],Me)},o.deleteCloudStorageFolder=function(Pe,Me,ve){if(we(K,j.content),!Pe)throw new Error("[files.deleteCloudStorageFolder] channelId name cannot be null or empty");if(!Me)throw new Error("[files.deleteCloudStorageFolder] folderToDelete cannot be null or empty");if(!ve)throw new Error("[files.deleteCloudStorageFolder] Callback cannot be null");St("files.deleteCloudStorageFolder",[Pe,Me],ve)},o.getCloudStorageFolderContents=function(Pe,Me,ve){if(we(K,j.content),!Pe||!Me)throw new Error("[files.getCloudStorageFolderContents] folder/providerCode name cannot be null or empty");if(!ve)throw new Error("[files.getCloudStorageFolderContents] Callback cannot be null");if("isSubdirectory"in Pe&&!Pe.isSubdirectory)throw new Error("[files.getCloudStorageFolderContents] provided folder is not a subDirectory");St("files.getCloudStorageFolderContents",[Pe,Me],ve)},o.openCloudStorageFile=function(Pe,Me,ve){if(we(K,j.content),!Pe||!Me)throw new Error("[files.openCloudStorageFile] file/providerCode cannot be null or empty");if(Pe.isSubdirectory)throw new Error("[files.openCloudStorageFile] provided file is a subDirectory");St("files.openCloudStorageFile",[Pe,Me,ve])},o.getExternalProviders=function(Pe,Me){if(void 0===Pe&&(Pe=!1),we(K,j.content),!Me)throw new Error("[files.getExternalProviders] Callback cannot be null");St("files.getExternalProviders",[Pe],Me)},o.copyMoveFiles=function(Pe,Me,ve,ke,je,yt){if(void 0===je&&(je=!1),we(K,j.content),!Pe||0===Pe.length)throw new Error("[files.copyMoveFiles] selectedFiles cannot be null or empty");if(!Me)throw new Error("[files.copyMoveFiles] providerCode cannot be null or empty");if(!ve)throw new Error("[files.copyMoveFiles] destinationFolder cannot be null or empty");if(!ke)throw new Error("[files.copyMoveFiles] destinationProviderCode cannot be null or empty");if(!yt)throw new Error("[files.copyMoveFiles] callback cannot be null");St("files.copyMoveFiles",[Pe,Me,ve,ke,je],yt)},o.getFileDownloads=function(Pe){if(we(K,j.content),!Pe)throw new Error("[files.getFileDownloads] Callback cannot be null");St("files.getFileDownloads",[],Pe)},o.openDownloadFolder=function(Pe,Me){if(void 0===Pe&&(Pe=void 0),we(K,j.content),!Me)throw new Error("[files.openDownloadFolder] Callback cannot be null");St("files.openDownloadFolder",[Pe],Me)},o.addCloudStorageProvider=function(Pe){if(we(K,j.content),!Pe)throw be(ze.INVALID_ARGUMENTS,"[files.addCloudStorageProvider] callback cannot be null");St("files.addCloudStorageProvider",[],Pe)},o.removeCloudStorageProvider=function(Pe,Me){if(we(K,j.content),!Me)throw be(ze.INVALID_ARGUMENTS,"[files.removeCloudStorageProvider] callback cannot be null");if(!Pe||!Pe.content)throw be(ze.INVALID_ARGUMENTS,"[files.removeCloudStorageProvider] 3P cloud storage provider request content is missing");St("files.removeCloudStorageProvider",[Pe],Me)},o.addCloudStorageProviderFile=function(Pe,Me){if(we(K,j.content),!Me)throw be(ze.INVALID_ARGUMENTS,"[files.addCloudStorageProviderFile] callback cannot be null");if(!Pe||!Pe.content)throw be(ze.INVALID_ARGUMENTS,"[files.addCloudStorageProviderFile] 3P cloud storage provider request content is missing");St("files.addCloudStorageProviderFile",[Pe],Me)},o.renameCloudStorageProviderFile=function(Pe,Me){if(we(K,j.content),!Me)throw be(ze.INVALID_ARGUMENTS,"[files.renameCloudStorageProviderFile] callback cannot be null");if(!Pe||!Pe.content)throw be(ze.INVALID_ARGUMENTS,"[files.renameCloudStorageProviderFile] 3P cloud storage provider request content is missing");St("files.renameCloudStorageProviderFile",[Pe],Me)},o.deleteCloudStorageProviderFile=function(Pe,Me){if(we(K,j.content),!Me)throw be(ze.INVALID_ARGUMENTS,"[files.deleteCloudStorageProviderFile] callback cannot be null");if(!(Pe&&Pe.content&&Pe.content.itemList&&Pe.content.itemList.length>0))throw be(ze.INVALID_ARGUMENTS,"[files.deleteCloudStorageProviderFile] 3P cloud storage provider request content details are missing");St("files.deleteCloudStorageProviderFile",[Pe],Me)},o.downloadCloudStorageProviderFile=function(Pe,Me){if(we(K,j.content),!Me)throw be(ze.INVALID_ARGUMENTS,"[files.downloadCloudStorageProviderFile] callback cannot be null");if(!(Pe&&Pe.content&&Pe.content.itemList&&Pe.content.itemList.length>0))throw be(ze.INVALID_ARGUMENTS,"[files.downloadCloudStorageProviderFile] 3P cloud storage provider request content details are missing");St("files.downloadCloudStorageProviderFile",[Pe],Me)},o.uploadCloudStorageProviderFile=function(Pe,Me){if(we(K,j.content),!Me)throw be(ze.INVALID_ARGUMENTS,"[files.uploadCloudStorageProviderFile] callback cannot be null");if(!(Pe&&Pe.content&&Pe.content.itemList&&Pe.content.itemList.length>0))throw be(ze.INVALID_ARGUMENTS,"[files.uploadCloudStorageProviderFile] 3P cloud storage provider request content details are missing");if(!Pe.content.destinationFolder)throw be(ze.INVALID_ARGUMENTS,"[files.uploadCloudStorageProviderFile] Invalid destination folder details");St("files.uploadCloudStorageProviderFile",[Pe],Me)},o.registerCloudStorageProviderListChangeHandler=function(Pe){if(we(K),!Pe)throw new Error("[registerCloudStorageProviderListChangeHandler] Handler cannot be null");Ft("files.cloudStorageProviderListChange",Pe)},o.registerCloudStorageProviderContentChangeHandler=function(Pe){if(we(K),!Pe)throw new Error("[registerCloudStorageProviderContentChangeHandler] Handler cannot be null");Ft("files.cloudStorageProviderContentChange",Pe)}}(wi||(wi={})),function(o){function M(){return!(!we(K)||!K.supports.meetingRoom)}o.getPairedMeetingRoomInfo=function(){return new Promise(function(R){if(we(K),!M())throw u;R(_n("meetingRoom.getPairedMeetingRoomInfo"))})},o.sendCommandToPairedMeetingRoom=function(R){return new Promise(function(A){if(!R||0==R.length)throw new Error("[meetingRoom.sendCommandToPairedMeetingRoom] Command name cannot be null or empty");if(we(K),!M())throw u;A(_n("meetingRoom.sendCommandToPairedMeetingRoom",R))})},o.registerMeetingRoomCapabilitiesUpdateHandler=function(R){if(!R)throw new Error("[meetingRoom.registerMeetingRoomCapabilitiesUpdateHandler] Handler cannot be null");if(we(K),!M())throw u;Ft("meetingRoom.meetingRoomCapabilitiesUpdate",function(A){we(K),R(A)})},o.registerMeetingRoomStatesUpdateHandler=function(R){if(!R)throw new Error("[meetingRoom.registerMeetingRoomStatesUpdateHandler] Handler cannot be null");if(we(K),!M())throw u;Ft("meetingRoom.meetingRoomStatesUpdate",function(A){we(K),R(A)})},o.isSupported=M}(Oi||(Oi={})),function(o){function M(){return!(!we(K)||!K.supports.notifications)}o.showNotification=function(R){if(we(K,j.content),!M())throw u;St("notifications.showNotification",[R])},o.isSupported=M}(Si||(Si={})),function(o){var z;function D(){return!(!we(K)||!K.supports.remoteCamera)}(z=o.ControlCommand||(o.ControlCommand={})).Reset="Reset",z.ZoomIn="ZoomIn",z.ZoomOut="ZoomOut",z.PanLeft="PanLeft",z.PanRight="PanRight",z.TiltUp="TiltUp",z.TiltDown="TiltDown",function(z){z[z.CommandResetError=0]="CommandResetError",z[z.CommandZoomInError=1]="CommandZoomInError",z[z.CommandZoomOutError=2]="CommandZoomOutError",z[z.CommandPanLeftError=3]="CommandPanLeftError",z[z.CommandPanRightError=4]="CommandPanRightError",z[z.CommandTiltUpError=5]="CommandTiltUpError",z[z.CommandTiltDownError=6]="CommandTiltDownError",z[z.SendDataError=7]="SendDataError"}(o.ErrorReason||(o.ErrorReason={})),function(z){z[z.None=0]="None",z[z.ControlDenied=1]="ControlDenied",z[z.ControlNoResponse=2]="ControlNoResponse",z[z.ControlBusy=3]="ControlBusy",z[z.AckTimeout=4]="AckTimeout",z[z.ControlTerminated=5]="ControlTerminated",z[z.ControllerTerminated=6]="ControllerTerminated",z[z.DataChannelError=7]="DataChannelError",z[z.ControllerCancelled=8]="ControllerCancelled",z[z.ControlDisabled=9]="ControlDisabled",z[z.ControlTerminatedToAllowOtherController=10]="ControlTerminatedToAllowOtherController"}(o.SessionTerminatedReason||(o.SessionTerminatedReason={})),o.getCapableParticipants=function(z){if(!z)throw new Error("[remoteCamera.getCapableParticipants] Callback cannot be null");if(we(K,j.sidePanel),!D())throw u;St("remoteCamera.getCapableParticipants",z)},o.requestControl=function(z,_e){if(!z)throw new Error("[remoteCamera.requestControl] Participant cannot be null");if(!_e)throw new Error("[remoteCamera.requestControl] Callback cannot be null");if(we(K,j.sidePanel),!D())throw u;St("remoteCamera.requestControl",[z],_e)},o.sendControlCommand=function(z,_e){if(!z)throw new Error("[remoteCamera.sendControlCommand] ControlCommand cannot be null");if(!_e)throw new Error("[remoteCamera.sendControlCommand] Callback cannot be null");if(we(K,j.sidePanel),!D())throw u;St("remoteCamera.sendControlCommand",[z],_e)},o.terminateSession=function(z){if(!z)throw new Error("[remoteCamera.terminateSession] Callback cannot be null");if(we(K,j.sidePanel),!D())throw u;St("remoteCamera.terminateSession",z)},o.registerOnCapableParticipantsChangeHandler=function(z){if(!z)throw new Error("[remoteCamera.registerOnCapableParticipantsChangeHandler] Handler cannot be null");if(we(K,j.sidePanel),!D())throw u;Ft("remoteCamera.capableParticipantsChange",z)},o.registerOnErrorHandler=function(z){if(!z)throw new Error("[remoteCamera.registerOnErrorHandler] Handler cannot be null");if(we(K,j.sidePanel),!D())throw u;Ft("remoteCamera.handlerError",z)},o.registerOnDeviceStateChangeHandler=function(z){if(!z)throw new Error("[remoteCamera.registerOnDeviceStateChangeHandler] Handler cannot be null");if(we(K,j.sidePanel),!D())throw u;Ft("remoteCamera.deviceStateChange",z)},o.registerOnSessionStatusChangeHandler=function(z){if(!z)throw new Error("[remoteCamera.registerOnSessionStatusChangeHandler] Handler cannot be null");if(we(K,j.sidePanel),!D())throw u;Ft("remoteCamera.sessionStatusChange",z)},o.isSupported=D}(Ei||(Ei={}));var xi,Di,ea=k.V_1;(function(o){function M(){return!(!we(K)||!K.supports.appEntity)}o.selectAppEntity=function(R,A,D,z){if(we(K,j.content),!M())throw u;if(!R||0==R.length)throw new Error("[appEntity.selectAppEntity] threadId name cannot be null or empty");if(!z)throw new Error("[appEntity.selectAppEntity] Callback cannot be null");Wt(C(ea,O.AppEntity_SelectAppEntity),"appEntity.selectAppEntity",[R,A,D],z)},o.isSupported=M})(xi||(xi={})),function(o){var D;function A(){return!(!we(K)||!K.supports.teams)}(D=o.ChannelType||(o.ChannelType={}))[D.Regular=0]="Regular",D[D.Private=1]="Private",D[D.Shared=2]="Shared",o.getTeamChannels=function(D,z){if(we(K,j.content),!A())throw u;if(!D)throw new Error("[teams.getTeamChannels] groupId cannot be null or empty");if(!z)throw new Error("[teams.getTeamChannels] Callback cannot be null");St("teams.getTeamChannels",[D],z)},o.refreshSiteUrl=function(D,z){if(we(K),!A())throw u;if(!D)throw new Error("[teams.refreshSiteUrl] threadId cannot be null or empty");if(!z)throw new Error("[teams.refreshSiteUrl] Callback cannot be null");St("teams.refreshSiteUrl",[D],z)},o.isSupported=A,function(D){function _e(){return!(!we(K)||!K.supports.teams||!K.supports.teams.fullTrust)}(function(be){function Pe(){return!!(we(K)&&K.supports.teams&&K.supports.teams.fullTrust&&K.supports.teams.fullTrust.joinedTeams)}be.getUserJoinedTeams=function(Me){return new Promise(function(ve){if(we(K),!Pe())throw u;if((J.hostClientType===He.android||J.hostClientType===He.teamsRoomsAndroid||J.hostClientType===He.teamsPhones||J.hostClientType===He.teamsDisplays)&&!Gn("2.0.1"))throw new Error(JSON.stringify({errorCode:ze.OLD_PLATFORM}));ve(di("getUserJoinedTeams",Me))})},be.isSupported=Pe})(D.joinedTeams||(D.joinedTeams={})),D.getConfigSetting=function(be){return new Promise(function(Pe){if(we(K),!_e())throw u;Pe(di("getConfigSetting",be))})},D.isSupported=_e}(o.fullTrust||(o.fullTrust={}))}(Di||(Di={}));var Ti,Yi=function(M,R,A,D){return new(A||(A=Promise))(function(_e,be){function Pe(ke){try{ve(D.next(ke))}catch(je){be(je)}}function Me(ke){try{ve(D.throw(ke))}catch(je){be(je)}}function ve(ke){ke.done?_e(ke.value):function(_e){return _e instanceof A?_e:new A(function(be){be(_e)})}(ke.value).then(Pe,Me)}ve((D=D.apply(M,R||[])).next())})};!function(o){o.frameProcessingTimeoutInMs=2e3;var R,Me,M=it()?void 0:new Wi(St);function A(){var Me=setTimeout(function(){Pe("Frame not processed in "+o.frameProcessingTimeoutInMs+"ms",R.Warn)},o.frameProcessingTimeoutInMs);return function(){clearTimeout(Me)}}function D(Me,ve){var ke=this;return function(je){return Yi(ke,void 0,void 0,a().mark(function yt(){var Ut,Pt,Ze;return a().wrap(function(It){for(;;)switch(It.prev=It.next){case 0:return ve.reportStartFrameProcessing((Ut=je.videoFrame).codedWidth,Ut.codedHeight),Pt=A(),It.next=5,Me(je);case 5:return Ze=It.sent,It.abrupt("return",(Pt(),ve.reportFrameProcessed(),Ze));case 7:case"end":return It.stop()}},yt)}))}}function _e(){return we(K),ko.isSupported()}function Pe(Me,ve){void 0===ve&&(ve=R.Warn),St("video.notifyError",[Me,ve])}(Me=R=o.ErrorLevel||(o.ErrorLevel={})).Fatal="fatal",Me.Warn="warn",o.registerForVideoFrame=function(Me){var ke,je,ve=this;if(!_e())throw u;if(!Me.videoFrameHandler||!Me.videoBufferHandler)throw new Error("Both videoFrameHandler and videoBufferHandler must be provided");if(we(K,j.sidePanel)){if(Ft("video.setFrameProcessTimeLimit",function(yt){return M?.setFrameProcessTimeLimit(yt)},!1),null===(ke=K.supports.video)||void 0===ke?void 0:ke.mediaStream)Ft("video.startVideoExtensibilityVideoStream",function(yt){return Yi(ve,void 0,void 0,a().mark(function Ut(){var Pt,Ze,wt;return a().wrap(function(Ct){for(;;)switch(Ct.prev=Ct.next){case 0:if(Pt=yt.streamId,Ze=yt.metadataInTexture,wt=M?D(Me.videoFrameHandler,M):Me.videoFrameHandler,!Ze){Ct.next=6;break}return Ct.next=4,ma(Pt,wt,Pe,M);case 4:Ct.next=8;break;case 6:return Ct.next=8,ha(Pt,wt,Pe,M);case 8:case"end":return Ct.stop()}},Ut)}))},!1),St("video.mediaStream.registerForVideoFrame",[Me.config]);else{if(null===(je=K.supports.video)||void 0===je||!je.sharedFrame)throw u;Ft("video.newVideoFrame",function(yt){if(yt){M?.reportStartFrameProcessing(yt.width,yt.height);var Ut=A(),Pt=yt.timestamp;Me.videoBufferHandler(function(Me){return Me.videoFrameBuffer=Me.videoFrameBuffer||Me.data,delete Me.data,Me}(yt),function(){Ut(),M?.reportFrameProcessed(),function(Me){St("video.videoFrameProcessed",[Me])}(Pt)},Pe)}},!1),St("video.registerForVideoFrame",[Me.config])}M?.startMonitorSlowFrameProcessing()}},o.notifySelectedVideoEffectChanged=function(Me,ve,ke){if(we(K,j.sidePanel),!_e())throw u;St("video.videoEffectChanged",[Me,ve,ke])},o.registerForVideoEffect=function(Me){if(we(K,j.sidePanel),!_e())throw u;Ft("video.effectParameterChange",Do(Me,M),!1),St("video.registerForVideoEffect")},o.updatePersonalizedEffects=function(Me){if(we(K,j.sidePanel),!ko.isSupported())throw u;St("video.personalizedEffectsChanged",[Me])},o.isSupported=_e,o.notifyFatalError=function(Me){if(we(K),!ko.isSupported())throw u;Pe(Me,R.Fatal)}}(Ti||(Ti={}))}(),c}()},78590:function(ct,Ge,n){"use strict";n.d(Ge,{w9:function(){return Ji},rP:function(){return ba},Qo:function(){return i},Cq:function(){return Ma},Mw:function(){return w}});var i,e,w,a,d,p,l,c,y,r,C,m,t={};n.r(t),n.d(t,{addQueryParameters:function(){return Sr},getOrigin:function(){return ya},removeQueryAndFragment:function(){return Ca}}),(e=i||(i={}))[e.ExistingPersistedMashup=0]="ExistingPersistedMashup",e[e.TransientMashup=1]="TransientMashup",e[e.TransientEmptyMashup=2]="TransientEmptyMashup",function(e){e.AddQueries="addQueries",e.BrowseMashup="BrowseMashup",e.ConnectToDataSource="ConnectToDataSource",e.CreateConnection="CreateConnection",e.DataPreview="DataPreview",e.DiagramView="DiagramView",e.EditConnection="EditConnection",e.EditDataflowComputeEngineSettings="EditDataflowComputeEngineSettings",e.EditCubeVariables="editCubeVariables",e.EditQuery="editQuery",e.EditQuickCreate="EditQuickCreate",e.ImportMashupTemplate="importMashupTemplate",e.IncrementalRefreshSettings="incrementalRefreshSettings",e.ManageConnections="manageConnections",e.ManageDataflowComputeEngine="manageDataflowComputeEngine",e.Navigate="navigate",e.QuickCreate="QuickCreate",e.RefreshSettings="refreshSettings",e.ResolveResourceChallenge="ResolveResourceChallenge",e.ShowRefreshHistory="showRefreshHistory"}(w||(w={})),function(e){e.Cancelled="Cancelled",e.CombineFiles="CombineFiles",e.CsvTextSettings="CsvTextSettings",e.DataDiscovery="DataDiscovery",e.DataSources="DataSources",e.DataSourceSettings="DataSourceSettings",e.FolderPreview="FolderPreview",e.IncrementalRefreshSettings="IncrementalRefreshSettings",e.Loading="Loading",e.MappingEditor="MappingEditor",e.Navigator="Navigator",e.QueryEditor="QueryEditor",e.QuickCreate="QuickCreate",e.RecentDataPreview="RecentDataPreview",e.RefreshSettings="RefreshSettings",e.TemplateCredentials="TemplateCredentials",e.TemplateParameters="TemplateParameters",e.TextByExample="TextByExample"}(a||(a={})),function(e){e.Attach="Attach"}(d||(d={})),function(e){e.Busy="Busy",e.Error="Error",e.Ready="Ready",e.Unknown="Unknown"}(p||(p={})),function(e){e.Editable="Editable",e.Hidden="Hidden",e.Readonly="Readonly"}(l||(l={})),function(e){e.Dataflow="Dataflow",e.Project="Project"}(c||(c={})),function(e){e.Definition="Definition",e.Instance="Instance"}(y||(y={})),function(e){e.DataSourceTemplateKind="DataSourceTemplateKind"}(r||(r={})),function(e){e.DataSourceTemplateKind="DataSourceTemplateKind",e.Navigation="Navigation"}(C||(C={})),function(e){e.Busy="Busy",e.Error="Error",e.Ready="Ready",e.Unknown="Unknown"}(m||(m={}));var W,te,k=n(90341);function I(e){throw new Error("Unexpected value: "+e)}function he(e){switch(e.kind){case w.BrowseMashup:case w.ConnectToDataSource:case w.DataPreview:case w.DiagramView:case w.EditConnection:case w.EditCubeVariables:case w.EditDataflowComputeEngineSettings:case w.EditQuickCreate:case w.ImportMashupTemplate:case w.IncrementalRefreshSettings:case w.ManageConnections:case w.ManageDataflowComputeEngine:case w.Navigate:case w.QuickCreate:case w.RefreshSettings:case w.ShowRefreshHistory:return!0;case w.AddQueries:case w.CreateConnection:case w.EditQuery:case w.ResolveResourceChallenge:return!e.keepFlowRunningOnCommit;default:I(e)}}function pe(e){switch(e.kind){case w.AddQueries:case w.BrowseMashup:case w.ConnectToDataSource:case w.CreateConnection:case w.DataPreview:case w.DiagramView:case w.EditConnection:case w.EditCubeVariables:case w.EditDataflowComputeEngineSettings:case w.EditQuery:case w.EditQuickCreate:case w.ImportMashupTemplate:case w.IncrementalRefreshSettings:case w.ManageConnections:case w.ManageDataflowComputeEngine:case w.Navigate:case w.QuickCreate:case w.RefreshSettings:case w.ShowRefreshHistory:return!0;case w.ResolveResourceChallenge:return!e.keepFlowRunningOnCancel;default:I(e)}}function u(e,f){return e.kind===f.kind}function Q(e){P(e)}function P(e,f){if(null==e)throw new Error(f?f():"Value should be defined");return e}!function(e){e.ClientInstanceId="clientInstanceId",e.ProtocolId="protocolId"}(W||(W={})),function(e){e.DataAutomationId="data-automation-id",e.DataIsAutoFocusable="data-is-autofocusable",e.DataIsFocusable="data-is-focusable"}(te||(te={}));var de,V,b,L,T,X,ue,Ne,Qe,Xe,it,ut,ot,pt,Ye,dt,Ot,q="none",le=function(){function e(S,x,re){this.iFrameElement=document.createElement("iframe"),this.iFrameElementOriginalDisplayValue=this.iFrameElement.style.display,this.iFrameElement.src=S,this.iFrameElement.title="Power Query",this.iFrameElement.allow="clipboard-read; clipboard-write",this.iFrameElement.setAttribute(te.DataIsFocusable,"true"),Q(x),this.container=x,re&&(this.iFrameElement.className=re),this.hide(),this.container.appendChild(this.iFrameElement),this.isDisposed=!1}var f=e.prototype;return f.addEventListener=function(x,re,Se){this.isDisposed||(Q(this.iFrameElement.contentWindow),this.iFrameElement.contentWindow.addEventListener(x,re,Se))},f.removeEventListener=function(x,re,Se){this.isDisposed||(Q(this.iFrameElement.contentWindow),this.iFrameElement.contentWindow.removeEventListener(x,re,Se))},f.postMessage=function(x,re,Se){this.isDisposed||(Q(this.iFrameElement.contentWindow),this.iFrameElement.contentWindow.postMessage(x,re,Se))},f.hide=function(){if(!this.isDisposed){var x=this.iFrameElement.style.display;x!==q&&(this.iFrameElementOriginalDisplayValue=x,this.iFrameElement.style.display=q)}},f.show=function(){this.isDisposed||(this.iFrameElement.style.display=this.iFrameElementOriginalDisplayValue)},f.dispose=function(){this.container.removeChild(this.iFrameElement),this.isDisposed=!0},e}();!function(e){e.GetEntityQueryScript="browseMashupCallbacks.getEntityQueryScript"}(de||(de={})),function(e){e.GetInitialComputeEngineSettings="computeEngineCallbacks.getInitialComputeEngineSettings"}(V||(V={})),function(e){e.OnStateChanged="createConnectionFlowClientCallbacks.onStateChanged"}(b||(b={})),function(e){e.OnSampleDataItemClick="dataDiscoveryFormCallbacks.onSampleDataItemClick"}(L||(L={})),function(e){e.OnEvaluationEnded="dataPreview.onEvaluationEnded",e.OnEvaluationStarted="dataPreview.onEvaluationStarted",e.OnQueryScriptChange="dataPreview.onQueryScriptChange",e.OnTableSelectionChanged="dataPreview.onTableSelectionChanged"}(T||(T={})),function(e){e.OnControlStateChanged="flowControlRpcMethodNames.onControlStateChanged"}(X||(X={})),function(e){e.OnCommandExecuted="hostCommandsCallbacks.onCommandExecuted"}(ue||(ue={})),function(e){e.GetLoginSuccessRedirectUri="hostPopupsCallbacks.getLoginSuccessRedirectUri",e.OpenHostPopup="hostPopupsCallbacks.openHostPopup"}(Ne||(Ne={})),function(e){e.OnUnlinkConnection="manageConnectionsFlowCallbacks.onUnlinkConnection"}(Qe||(Qe={})),function(e){e.GenerateNewEntityFieldNames="mappingEditorCallbacks.generateNewEntityFieldNames",e.GenerateNewEntityNames="mappingEditorCallbacks.generateNewEntityNames",e.GetEntities="mappingEditorCallbacks.getEntities",e.GetEntityFields="mappingEditorCallbacks.getEntityFields",e.GetEntityKeys="mappingEditorCallbacks.getEntityKeys",e.ValidateMappingEditorResult="mappingEditorCallbacks.validateMappingEditorResult"}(Xe||(Xe={})),function(e){e.GetEntityTypeFields="mappingCallbacks.getEntityTypeFields",e.GetEntityTypes="mappingCallbacks.getEntityTypes"}(it||(it={})),function(e){e.GetEntityDefinitionFromEntityPath="mappingCallbacksV2.getEntityDefinitionFromEntityPath",e.GetManifestDefinitionFromManifestPath="mappingCallbacksV2.getManifestDefinitionFromManifestPath",e.GetRootManifestDefinition="mappingCallbacksV2.getRootManifestDefinition"}(ut||(ut={})),function(e){e.GetMashupSensitivityLabel="mashupEditorClientCallbacks.getMashupSensitivityLabel",e.OnComputeEngineSettingsChanged="mashupEditorClientCallbacks.onComputeEngineSettingsChanged",e.OnEditingSessionMashupChanged="mashupEditorClientCallbacks.onEditingSessionMashupChanged",e.OnEditingSessionMashupInitialized="mashupEditorClientCallbacks.onEditingSessionMashupInitialized",e.OnMashupEditorClick="mashupEditorClientCallbacks.onMashupEditorClick",e.RenameMashup="mashupEditorClientCallbacks.renameMashup"}(ot||(ot={})),function(e){e.OnNewSqlQueryButtonClicked="powerBIDataMart.onNewSqlQueryButtonClicked",e.OnNewVisualQueryButtonClicked="powerBIDataMart.onNewVisualQueryButtonClicked",e.OnSaveAsViewButtonClicked="powerBIDataMart.onSaveAsViewButtonClicked",e.OnViewSqlButtonClicked="powerBIDataMart.onViewSqlButtonClicked",e.OnVisualizeResultButtonClicked="powerBIDataMart.onVisualizeResultButtonClicked"}(pt||(pt={})),function(e){e.OnDownloadExcelFileButtonClick="queryEditorPreviewButtonsCallbacks.onDownloadExcelFileButtonClick",e.OnSaveAsTableButtonClick="queryEditorPreviewButtonsCallbacks.onSaveAsTableButtonClick",e.OnSaveAsViewButtonClick="queryEditorPreviewButtonsCallbacks.onSaveAsViewButtonClick",e.OnVisualizeResultsButtonClick="queryEditorPreviewButtonsCallbacks.onVisualizeResultsButtonClick"}(Ye||(Ye={})),function(e){e.OnCommandBarPopupButtonClick="queryEditorCallbacks.onCommandBarPopupButtonClick",e.OnDiagramViewCommandBarPopupButtonClick="queryEditorCallbacks.onDiagramViewCommandBarPopupButtonClick",e.OnOpenInExcelButtonClick="queryEditorCallbacks.onOpenInExcelButtonClick",e.ValidateQuery="queryEditorCallbacks.validateQuery",e.ValidateQueryNameInteractive="queryEditorCallbacks.validateQueryNameInteractive"}(dt||(dt={})),function(e){e.GetUserSettings="userSettings.getUserSettings",e.SetUserSettings="userSettings.setUserSettings"}(Ot||(Ot={}));var K,Gt=function(){function e(S,x,re,Se,at){this.clientRpcChannel=S,this.clientRpcEndpointHost=x,this.client=re,this.configuration=Se,this.clientStartTime=at,this.registerRpcMethods()}var f=e.prototype;return f.dispose=function(){this.unregisterRpcMethods()},f.registerRpcMethods=function(){var re,Se,at,At,Tt,Dt,Lt,Kt,Pn,In,qn,Xt,Nt,Fn,Vn,dn,eo,to,kn,Cn,_o,Bn,Uo,Co,No,no,oo,io,Re,fe,Ee,et,st,rt,Rt,Bt,zt,pn,sn,gn,Pa,wa,Oa,Sa,Ea,xa,Da,Ta,Ia,x=this;this.register("acquireToken",function(rn){return x.configuration.acquireToken(rn)}),this.register("getClientStartTime",function(){return x.clientStartTime}),this.register("getSettings",function(){return x.configuration.editorSettings}),this.register("getVersion",function(){return"22.28.0"}),this.register("hasMappingCallbacks",function(){return null!=x.configuration.mappingCallbacks}),this.register("hasMappingCallbacksV2",function(){return null!=x.configuration.mappingCallbacksV2}),this.register("onAppReady",function(){return x.clientRpcEndpointHost.onAppReady()}),this.register("onCancel",function(){return x.clientRpcEndpointHost.onCancelCurrentFlow()}),this.register("onCommit",function(){}),this.register("onCommit2",function(rn){return x.clientRpcEndpointHost.onCommitCurrentFlow(rn)}),this.register("onFlowReady",function(){return x.clientRpcEndpointHost.onCurrentFlowReady()}),!(null===(re=this.configuration.browseMashupCallbacks)||void 0===re)&&re.getEntityQueryScript&&this.register(de.GetEntityQueryScript,this.configuration.browseMashupCallbacks.getEntityQueryScript),!(null===(Se=this.configuration.computeEngineCallbacks)||void 0===Se)&&Se.getInitialComputeEngineSettings&&this.register(V.GetInitialComputeEngineSettings,this.configuration.computeEngineCallbacks.getInitialComputeEngineSettings),!(null===(at=this.configuration.createConnectionFlowClientCallbacks)||void 0===at)&&at.onStateChanged&&this.register(b.OnStateChanged,this.configuration.createConnectionFlowClientCallbacks.onStateChanged),!(null===(At=this.configuration.dataPreviewCallbacks)||void 0===At)&&At.onEvaluationEnded&&this.register(T.OnEvaluationEnded,this.configuration.dataPreviewCallbacks.onEvaluationEnded),!(null===(Tt=this.configuration.dataPreviewCallbacks)||void 0===Tt)&&Tt.onEvaluationStarted&&this.register(T.OnEvaluationStarted,this.configuration.dataPreviewCallbacks.onEvaluationStarted),!(null===(Dt=this.configuration.dataPreviewCallbacks)||void 0===Dt)&&Dt.onQueryScriptChange&&this.register(T.OnQueryScriptChange,this.configuration.dataPreviewCallbacks.onQueryScriptChange),!(null===(Lt=this.configuration.dataPreviewCallbacks)||void 0===Lt)&&Lt.onTableSelectionChanged&&this.register(T.OnTableSelectionChanged,this.configuration.dataPreviewCallbacks.onTableSelectionChanged),!(null===(Kt=this.configuration.flowControlCallbacks)||void 0===Kt)&&Kt.onControlStateChanged&&this.register(X.OnControlStateChanged,function(){var rn;return null===(rn=x.configuration.flowControlCallbacks)||void 0===rn?void 0:rn.onControlStateChanged(x.client)}),!(null===(Pn=this.configuration.hostPopupsCallbacks)||void 0===Pn)&&Pn.getLoginSuccessRedirectUri&&this.register(Ne.GetLoginSuccessRedirectUri,this.configuration.hostPopupsCallbacks.getLoginSuccessRedirectUri),!(null===(In=this.configuration.hostPopupsCallbacks)||void 0===In)&&In.openHostPopup&&this.register(Ne.OpenHostPopup,this.configuration.hostPopupsCallbacks.openHostPopup),!(null===(qn=this.configuration.hostCommandsCallbacks)||void 0===qn)&&qn.onCommandExecuted&&this.register(ue.OnCommandExecuted,this.configuration.hostCommandsCallbacks.onCommandExecuted),!(null===(Xt=this.configuration.manageConnectionsFlowCallbacks)||void 0===Xt)&&Xt.onUnlinkConnection&&this.register(Qe.OnUnlinkConnection,this.configuration.manageConnectionsFlowCallbacks.onUnlinkConnection),!(null===(Nt=this.configuration.mappingEditorCallbacks)||void 0===Nt)&&Nt.generateNewEntityFieldNames&&this.register(Xe.GenerateNewEntityFieldNames,this.configuration.mappingEditorCallbacks.generateNewEntityFieldNames),!(null===(Fn=this.configuration.mappingEditorCallbacks)||void 0===Fn)&&Fn.generateNewEntityNames&&this.register(Xe.GenerateNewEntityNames,this.configuration.mappingEditorCallbacks.generateNewEntityNames),!(null===(Vn=this.configuration.mappingEditorCallbacks)||void 0===Vn)&&Vn.getEntities&&this.register(Xe.GetEntities,this.configuration.mappingEditorCallbacks.getEntities),!(null===(dn=this.configuration.mappingEditorCallbacks)||void 0===dn)&&dn.getEntityFields&&this.register(Xe.GetEntityFields,this.configuration.mappingEditorCallbacks.getEntityFields),!(null===(eo=this.configuration.mappingEditorCallbacks)||void 0===eo)&&eo.getEntityKeys&&this.register(Xe.GetEntityKeys,this.configuration.mappingEditorCallbacks.getEntityKeys),!(null===(to=this.configuration.mappingEditorCallbacks)||void 0===to)&&to.validateMappingEditorResult&&this.register(Xe.ValidateMappingEditorResult,this.configuration.mappingEditorCallbacks.validateMappingEditorResult),!(null===(kn=this.configuration.mappingCallbacks)||void 0===kn)&&kn.getEntityTypeFields&&this.register(it.GetEntityTypeFields,this.configuration.mappingCallbacks.getEntityTypeFields),!(null===(Cn=this.configuration.mappingCallbacks)||void 0===Cn)&&Cn.getEntityTypes&&this.register(it.GetEntityTypes,null===(_o=this.configuration.mappingCallbacks)||void 0===_o?void 0:_o.getEntityTypes),!(null===(Bn=this.configuration.mappingCallbacksV2)||void 0===Bn)&&Bn.getEntityDefinitionFromEntityPath&&this.register(ut.GetEntityDefinitionFromEntityPath,this.configuration.mappingCallbacksV2.getEntityDefinitionFromEntityPath),!(null===(Uo=this.configuration.mappingCallbacksV2)||void 0===Uo)&&Uo.getManifestDefinitionFromManifestPath&&this.register(ut.GetManifestDefinitionFromManifestPath,this.configuration.mappingCallbacksV2.getManifestDefinitionFromManifestPath),!(null===(Co=this.configuration.mappingCallbacksV2)||void 0===Co)&&Co.getRootManifestDefinition&&this.register(ut.GetRootManifestDefinition,null===(No=this.configuration.mappingCallbacksV2)||void 0===No?void 0:No.getRootManifestDefinition),!(null===(no=this.configuration.mashupEditorClientCallbacks)||void 0===no)&&no.getMashupSensitivityLabel&&this.register(ot.GetMashupSensitivityLabel,this.configuration.mashupEditorClientCallbacks.getMashupSensitivityLabel),!(null===(oo=this.configuration.mashupEditorClientCallbacks)||void 0===oo)&&oo.onComputeEngineSettingsChanged&&this.register(ot.OnComputeEngineSettingsChanged,this.configuration.mashupEditorClientCallbacks.onComputeEngineSettingsChanged),!(null===(io=this.configuration.mashupEditorClientCallbacks)||void 0===io)&&io.onEditingSessionMashupChanged&&this.register(ot.OnEditingSessionMashupChanged,this.configuration.mashupEditorClientCallbacks.onEditingSessionMashupChanged),!(null===(Re=this.configuration.mashupEditorClientCallbacks)||void 0===Re)&&Re.onEditingSessionMashupInitialized&&this.register(ot.OnEditingSessionMashupInitialized,this.configuration.mashupEditorClientCallbacks.onEditingSessionMashupInitialized),!(null===(fe=this.configuration.mashupEditorClientCallbacks)||void 0===fe)&&fe.onMashupEditorClick&&this.register(ot.OnMashupEditorClick,null===(Ee=this.configuration.mashupEditorClientCallbacks)||void 0===Ee?void 0:Ee.onMashupEditorClick),!(null===(et=this.configuration.mashupEditorClientCallbacks)||void 0===et)&&et.renameMashup&&this.register(ot.RenameMashup,this.configuration.mashupEditorClientCallbacks.renameMashup),!(null===(st=this.configuration.powerBIDataMartCallbacks)||void 0===st)&&st.onNewSqlQueryButtonClicked&&this.register(pt.OnNewSqlQueryButtonClicked,this.configuration.powerBIDataMartCallbacks.onNewSqlQueryButtonClicked),!(null===(rt=this.configuration.powerBIDataMartCallbacks)||void 0===rt)&&rt.onNewVisualQueryButtonClicked&&this.register(pt.OnNewVisualQueryButtonClicked,this.configuration.powerBIDataMartCallbacks.onNewVisualQueryButtonClicked),!(null===(Rt=this.configuration.powerBIDataMartCallbacks)||void 0===Rt)&&Rt.onSaveAsViewButtonClicked&&this.register(pt.OnSaveAsViewButtonClicked,this.configuration.powerBIDataMartCallbacks.onSaveAsViewButtonClicked),!(null===(Bt=this.configuration.powerBIDataMartCallbacks)||void 0===Bt)&&Bt.onViewSqlButtonClicked&&this.register(pt.OnViewSqlButtonClicked,this.configuration.powerBIDataMartCallbacks.onViewSqlButtonClicked),!(null===(zt=this.configuration.powerBIDataMartCallbacks)||void 0===zt)&&zt.onVisualizeResultButtonClicked&&this.register(pt.OnVisualizeResultButtonClicked,this.configuration.powerBIDataMartCallbacks.onVisualizeResultButtonClicked),!(null===(pn=this.configuration.queryEditorCallbacks)||void 0===pn)&&pn.onCommandBarPopupButtonClick&&this.register(dt.OnCommandBarPopupButtonClick,function(){var rn;return P(null===(rn=x.configuration.queryEditorCallbacks)||void 0===rn?void 0:rn.onCommandBarPopupButtonClick)(x.client)}),!(null===(sn=this.configuration.queryEditorCallbacks)||void 0===sn)&&sn.onDiagramViewCommandBarPopupButtonClick&&this.register(dt.OnDiagramViewCommandBarPopupButtonClick,function(){var rn;return P(null===(rn=x.configuration.queryEditorCallbacks)||void 0===rn?void 0:rn.onDiagramViewCommandBarPopupButtonClick)(x.client)}),!(null===(gn=this.configuration.queryEditorCallbacks)||void 0===gn)&&gn.onOpenInExcelButtonClick&&this.register(dt.OnOpenInExcelButtonClick,function(rn){var an;return P(null===(an=x.configuration.queryEditorCallbacks)||void 0===an?void 0:an.onOpenInExcelButtonClick)(x.client,rn)}),!(null===(Pa=this.configuration.queryEditorCallbacks)||void 0===Pa)&&Pa.validateQuery&&this.register(dt.ValidateQuery,function(rn){var an;return P(null===(an=x.configuration.queryEditorCallbacks)||void 0===an?void 0:an.validateQuery)(x.client,rn)}),!(null===(wa=this.configuration.queryEditorCallbacks)||void 0===wa)&&wa.validateQueryNameInteractive&&this.register(dt.ValidateQueryNameInteractive,function(rn){var an;return P(null===(an=x.configuration.queryEditorCallbacks)||void 0===an?void 0:an.validateQueryNameInteractive)(x.client,rn)}),!(null===(Oa=this.configuration.queryEditorPreviewButtonsCallbacks)||void 0===Oa)&&Oa.onDownloadExcelFileButtonClick&&this.register(Ye.OnDownloadExcelFileButtonClick,function(rn){var an;return P(null===(an=x.configuration.queryEditorPreviewButtonsCallbacks)||void 0===an?void 0:an.onDownloadExcelFileButtonClick)(rn)}),!(null===(Sa=this.configuration.queryEditorPreviewButtonsCallbacks)||void 0===Sa)&&Sa.onSaveAsTableButtonClick&&this.register(Ye.OnSaveAsTableButtonClick,function(rn){var an;return P(null===(an=x.configuration.queryEditorPreviewButtonsCallbacks)||void 0===an?void 0:an.onSaveAsTableButtonClick)(rn)}),!(null===(Ea=this.configuration.queryEditorPreviewButtonsCallbacks)||void 0===Ea)&&Ea.onSaveAsViewButtonClick&&this.register(Ye.OnSaveAsViewButtonClick,function(rn){var an;return P(null===(an=x.configuration.queryEditorPreviewButtonsCallbacks)||void 0===an?void 0:an.onSaveAsViewButtonClick)(rn)}),!(null===(xa=this.configuration.queryEditorPreviewButtonsCallbacks)||void 0===xa)&&xa.onVisualizeResultsButtonClick&&this.register(Ye.OnVisualizeResultsButtonClick,function(rn){var an;return P(null===(an=x.configuration.queryEditorPreviewButtonsCallbacks)||void 0===an?void 0:an.onVisualizeResultsButtonClick)(rn)}),!(null===(Da=this.configuration.userSettingsStorageCallbacks)||void 0===Da)&&Da.getUserSettings&&this.register(Ot.GetUserSettings,this.configuration.userSettingsStorageCallbacks.getUserSettings),!(null===(Ta=this.configuration.userSettingsStorageCallbacks)||void 0===Ta)&&Ta.setUserSettings&&this.register(Ot.SetUserSettings,this.configuration.userSettingsStorageCallbacks.setUserSettings),null!==(Ia=this.configuration.dataDiscoveryFormCallbacks)&&void 0!==Ia&&Ia.onSampleDataItemClick&&this.register(L.OnSampleDataItemClick,function(rn){var an;return P(null===(an=x.configuration.dataDiscoveryFormCallbacks)||void 0===an?void 0:an.onSampleDataItemClick)(rn)})},f.unregisterRpcMethods=function(){this.unregister("acquireToken"),this.unregister("getClientStartTime"),this.unregister("getSettings"),this.unregister("getVersion"),this.unregister("onAppReady"),this.unregister("onCancel"),this.unregister("onCommit"),this.unregister("onFlowReady"),this.unregister(de.GetEntityQueryScript),this.unregister(V.GetInitialComputeEngineSettings),this.unregister(b.OnStateChanged),this.unregister(T.OnEvaluationEnded),this.unregister(T.OnEvaluationStarted),this.unregister(T.OnQueryScriptChange),this.unregister(T.OnTableSelectionChanged),this.unregister(Ne.GetLoginSuccessRedirectUri),this.unregister(Ne.OpenHostPopup),this.unregister(ue.OnCommandExecuted),this.unregister(Qe.OnUnlinkConnection),this.unregister(Xe.GenerateNewEntityFieldNames),this.unregister(Xe.GenerateNewEntityNames),this.unregister(Xe.GetEntities),this.unregister(Xe.GetEntityFields),this.unregister(Xe.GetEntityKeys),this.unregister(Xe.ValidateMappingEditorResult),this.unregister(it.GetEntityTypeFields),this.unregister(it.GetEntityTypes),this.unregister(ut.GetEntityDefinitionFromEntityPath),this.unregister(ut.GetManifestDefinitionFromManifestPath),this.unregister(ut.GetRootManifestDefinition),this.unregister(ot.GetMashupSensitivityLabel),this.unregister(ot.OnComputeEngineSettingsChanged),this.unregister(ot.OnEditingSessionMashupChanged),this.unregister(ot.OnEditingSessionMashupInitialized),this.unregister(ot.OnMashupEditorClick),this.unregister(ot.RenameMashup),this.unregister(pt.OnNewSqlQueryButtonClicked),this.unregister(pt.OnNewVisualQueryButtonClicked),this.unregister(pt.OnSaveAsViewButtonClicked),this.unregister(pt.OnViewSqlButtonClicked),this.unregister(pt.OnVisualizeResultButtonClicked),this.unregister(dt.OnCommandBarPopupButtonClick),this.unregister(dt.OnDiagramViewCommandBarPopupButtonClick),this.unregister(dt.OnOpenInExcelButtonClick),this.unregister(dt.ValidateQuery),this.unregister(dt.ValidateQueryNameInteractive),this.unregister(Ye.OnDownloadExcelFileButtonClick),this.unregister(Ye.OnSaveAsTableButtonClick),this.unregister(Ye.OnSaveAsViewButtonClick),this.unregister(Ye.OnVisualizeResultsButtonClick),this.unregister(Ot.GetUserSettings),this.unregister(Ot.SetUserSettings),this.unregister(L.OnSampleDataItemClick)},f.register=function(x,re){this.clientRpcChannel.register(x,re)},f.unregister=function(x){this.clientRpcChannel.unregister(x)},e}();!function(e){e.ActivateQuery="activateQuery",e.AddQuery="addQuery",e.CancelAddQueriesFlow="cancelAddQueriesFlow",e.ClickCancelButton="clickCancelButton",e.ClickCommitButton="clickCommitButton",e.ClickCustomButton="clickCustomButton",e.ClickNextStageButton="clickNextStageButton",e.ClickPreviousStageButton="clickPreviousStageButton",e.CreateConnectionFlow_Commit="createConnectionFlow_commit",e.DataPreview_CancelCurrentQueryEvaluation="dataPreview_cancelCurrentQueryEvaluation",e.DataPreview_SelectColumns="dataPreview_selectColumns",e.DeleteAllQueries="deleteAllQueries",e.DisposeService="disposeService",e.EndFlow="endFlow",e.GetActiveQueryName="getActiveQueryName",e.GetCancelButtonLabel="getCancelButtonLabel",e.GetCommitButtonLabel="getCommitButtonLabel",e.GetCommitResult="getCommitResult",e.GetComputeEngineSettings="getComputeEngineSettings",e.GetCurrentFlow="getCurrentFlow",e.GetCustomButtonLabel="getCustomButtonLabel",e.GetDataSourceQueryScript="getDataSourceQueryScript",e.GetDataWizardFooter_ClickCancelButton="getDataWizardFooter_clickCancelButton",e.GetDataWizardFooter_ClickCommitButton="getDataWizardFooter_clickCommitButton",e.GetDataWizardFooter_ClickCustomButton="getDataWizardFooter_clickCustomButton",e.GetDataWizardFooter_ClickNextStageButton="getDataWizardFooter_clickNextStageButton",e.GetDataWizardFooter_ClickPreviousStageButton="getDataWizardFooter_clickPreviousStageButton",e.GetEditingSessionId="getEditingSessionId",e.GetEditingSessionMashup="getEditingSessionMashup",e.GetFooterMessage="getFooterMessage",e.GetGetDataWizardFlowStage="getGetDataWizardFlowStage",e.GetIncrementalRefreshSettings="getIncrementalRefreshSettings",e.GetMashupGatewayVersion="getMashupGatewayVersion",e.GetNextStageButtonLabel="getNextStageButtonLabel",e.GetPreviousStageButtonLabel="getPreviousStageButtonLabel",e.GetQueriesInfo="getQueriesInfo",e.GetQueryEditorState="getQueryEditorState",e.GetQueryEditorStateOrThrow="getQueryEditorStateOrThrow",e.GetQueryNames="getQueryNames",e.GetQueryScript="getQueryScript",e.GetReadyState="getReadyState",e.GetRefreshSettings="getRefreshSettings",e.GetSelectedStepName="getSelectedStepName",e.GetUserSettings="getUserSettings",e.IsCancelButtonEnabled="isCancelButtonEnabled",e.IsCancelButtonVisible="isCancelButtonVisible",e.IsCommitButtonEnabled="isCommitButtonEnabled",e.IsCommitButtonVisible="isCommitButtonVisible",e.IsCustomButtonEnabled="isCustomButtonEnabled",e.IsCustomButtonVisible="isCustomButtonVisible",e.IsDialogVisible="isDialogVisible",e.IsFeatureSupported="isFeatureSupported",e.IsFooterOverlayVisible="isFooterOverlayVisible",e.IsNextStageButtonEnabled="isNextStageButtonEnabled",e.IsNextStageButtonVisible="isNextStageButtonVisible",e.IsPreviousStageButtonEnabled="isPreviousStageButtonEnabled",e.IsPreviousStageButtonVisible="isPreviousStageButtonVisible",e.LogXFramePerformanceMarks="logXFramePerformanceMarks",e.OnHostPopupCancelled="onHostPopupCancelled",e.RefreshActiveQueryResult="refreshActiveQueryResult",e.SetCommitButtonEnabledStatePolicy="setCommitButtonEnabledStatePolicy",e.SetUserSettings="setUserSettings",e.StartFlow="startFlow",e.TrySetQueryScript="trySetQueryScript"}(K||(K={}));var yn=function(){function e(S){this.clientRpcChannel=S}var f=e.prototype;return f.activateQuery=function(x){return this.clientRpcChannel.call(K.ActivateQuery,[x])},f.addQuery=function(x,re,Se){return this.clientRpcChannel.call(K.AddQuery,[x,re,Se])},f.endFlow=function(){return this.clientRpcChannel.callIfSupported(K.EndFlow)},f.cancelAddQueriesFlow=function(){return this.clientRpcChannel.call(K.CancelAddQueriesFlow)},f.clickCancelButton=function(){return this.clientRpcChannel.call(K.ClickCancelButton)},f.clickCommitButton=function(){return this.clientRpcChannel.call(K.ClickCommitButton)},f.clickCustomButton=function(){return this.clientRpcChannel.call(K.ClickCustomButton)},f.clickNextStageButton=function(){return this.clientRpcChannel.call(K.ClickNextStageButton)},f.clickPreviousStageButton=function(){return this.clientRpcChannel.call(K.ClickPreviousStageButton)},f.createConnectionFlow_commit=function(x){return this.clientRpcChannel.call(K.CreateConnectionFlow_Commit,[x])},f.dataPreview_cancelCurrentQueryEvaluation=function(){return this.clientRpcChannel.call(K.DataPreview_CancelCurrentQueryEvaluation)},f.dataPreview_selectColumns=function(x){return this.clientRpcChannel.callIfSupported(K.DataPreview_SelectColumns,[x])},f.deleteAllQueries=function(){return this.clientRpcChannel.callIfSupported(K.DeleteAllQueries)},f.disposeService=function(){return this.clientRpcChannel.callIfSupported(K.DisposeService)},f.getActiveQueryName=function(){return this.clientRpcChannel.call(K.GetActiveQueryName)},f.getCancelButtonLabel=function(){return this.clientRpcChannel.call(K.GetCancelButtonLabel)},f.getCommitButtonLabel=function(){return this.clientRpcChannel.call(K.GetCommitButtonLabel)},f.getCustomButtonLabel=function(){return this.clientRpcChannel.call(K.GetCustomButtonLabel)},f.getCommitResult=function(){return this.clientRpcChannel.call(K.GetCommitResult)},f.getComputeEngineSettings=function(){return this.clientRpcChannel.call(K.GetComputeEngineSettings)},f.getCurrentFlow=function(){return this.clientRpcChannel.callIfSupported(K.GetCurrentFlow)},f.getDataSourceQueryScript=function(x,re){return this.clientRpcChannel.call(K.GetDataSourceQueryScript,[x,re])},f.getDataWizardFooter_clickCancelButton=function(){return this.clientRpcChannel.call(K.GetDataWizardFooter_ClickCancelButton)},f.getDataWizardFooter_clickCommitButton=function(){return this.clientRpcChannel.call(K.GetDataWizardFooter_ClickCommitButton)},f.getDataWizardFooter_clickCustomButton=function(){return this.clientRpcChannel.call(K.GetDataWizardFooter_ClickCustomButton)},f.getDataWizardFooter_clickNextStageButton=function(){return this.clientRpcChannel.call(K.GetDataWizardFooter_ClickNextStageButton)},f.getDataWizardFooter_clickPreviousStageButton=function(){return this.clientRpcChannel.call(K.GetDataWizardFooter_ClickPreviousStageButton)},f.getEditingSessionId=function(){return this.clientRpcChannel.call(K.GetEditingSessionId)},f.getEditingSessionMashup=function(x){return this.clientRpcChannel.call(K.GetEditingSessionMashup,[x])},f.getFooterMessage=function(){return this.clientRpcChannel.call(K.GetFooterMessage)},f.getGetDataWizardFlowStage=function(){return this.clientRpcChannel.callIfSupported(K.GetGetDataWizardFlowStage)},f.getIncrementalRefreshSettings=function(){return this.clientRpcChannel.call(K.GetIncrementalRefreshSettings)},f.getMashupGatewayVersion=function(){return this.clientRpcChannel.call(K.GetMashupGatewayVersion)},f.getNextStageButtonLabel=function(){return this.clientRpcChannel.call(K.GetNextStageButtonLabel)},f.getPreviousStageButtonLabel=function(){return this.clientRpcChannel.call(K.GetPreviousStageButtonLabel)},f.getQueriesInfo=function(){return this.clientRpcChannel.call(K.GetQueriesInfo)},f.getQueryEditorState=function(){return this.clientRpcChannel.call(K.GetQueryEditorState)},f.getQueryEditorStateOrThrow=function(){return this.clientRpcChannel.call(K.GetQueryEditorStateOrThrow)},f.getQueryNames=function(){return this.clientRpcChannel.call(K.GetQueryNames)},f.getQueryScript=function(x){return this.clientRpcChannel.call(K.GetQueryScript,[x])},f.getReadyState=function(){return this.clientRpcChannel.call(K.GetReadyState)},f.getRefreshSettings=function(){return this.clientRpcChannel.callIfSupported(K.GetRefreshSettings)},f.getSelectedStepName=function(){return this.clientRpcChannel.call(K.GetSelectedStepName)},f.getUserSettings=function(){return this.clientRpcChannel.call(K.GetUserSettings)},f.isCancelButtonEnabled=function(){return this.clientRpcChannel.call(K.IsCancelButtonEnabled)},f.isCancelButtonVisible=function(){return this.clientRpcChannel.call(K.IsCancelButtonVisible)},f.isCommitButtonEnabled=function(){return this.clientRpcChannel.call(K.IsCommitButtonEnabled)},f.isCommitButtonVisible=function(){return this.clientRpcChannel.call(K.IsCommitButtonVisible)},f.isCustomButtonEnabled=function(){return this.clientRpcChannel.call(K.IsCustomButtonEnabled)},f.isCustomButtonVisible=function(){return this.clientRpcChannel.call(K.IsCustomButtonVisible)},f.isDialogVisible=function(){return this.clientRpcChannel.call(K.IsDialogVisible)},f.isFeatureSupported=function(x){return this.clientRpcChannel.call(K.IsFeatureSupported,[x])},f.isFooterOverlayVisible=function(){return this.clientRpcChannel.call(K.IsFooterOverlayVisible)},f.isNextStageButtonEnabled=function(){return this.clientRpcChannel.call(K.IsNextStageButtonEnabled)},f.isNextStageButtonVisible=function(){return this.clientRpcChannel.call(K.IsNextStageButtonVisible)},f.isPreviousStageButtonEnabled=function(){return this.clientRpcChannel.call(K.IsPreviousStageButtonEnabled)},f.isPreviousStageButtonVisible=function(){return this.clientRpcChannel.call(K.IsPreviousStageButtonVisible)},f.logXFramePerformanceMarks=function(x){return this.clientRpcChannel.call(K.LogXFramePerformanceMarks,[x])},f.onHostPopupCancelled=function(x){return this.clientRpcChannel.callIfSupported(K.OnHostPopupCancelled,[x])},f.refreshActiveQueryResult=function(){return this.clientRpcChannel.callIfSupported(K.RefreshActiveQueryResult)},f.setCommitButtonEnabledStatePolicy=function(x){return this.clientRpcChannel.call(K.SetCommitButtonEnabledStatePolicy,[x])},f.setUserSettings=function(x){return this.clientRpcChannel.callIfSupported(K.SetUserSettings,[x])},f.startFlow=function(x,re){return this.clientRpcChannel.callIfSupported(K.StartFlow,[x,re])},f.trySetQueryScript=function(x,re){return this.clientRpcChannel.call(K.TrySetQueryScript,[x,re])},e}(),on=n(37419),Un=function(){function e(){var S=this;this.resolveMethod=function(x){},this.rejectMethod=function(x){},this.promise=new Promise(function(x,re){S.resolveMethod=x,S.rejectMethod=re})}e.createResolvedDeferred=function(){var x=new e;return x.resolve(),x};var f=e.prototype;return f.resolve=function(x){this.resolveMethod(x)},f.reject=function(x){this.rejectMethod(x)},e}(),Mo=n(11105);function po(){return Mo.Z()}function lo(){lo=function(){return f};var e,f={},S=Object.prototype,x=S.hasOwnProperty,re=Object.defineProperty||function(Re,fe,Ee){Re[fe]=Ee.value},Se="function"==typeof Symbol?Symbol:{},at=Se.iterator||"@@iterator",At=Se.asyncIterator||"@@asyncIterator",Tt=Se.toStringTag||"@@toStringTag";function Dt(Re,fe,Ee){return Object.defineProperty(Re,fe,{value:Ee,enumerable:!0,configurable:!0,writable:!0}),Re[fe]}try{Dt({},"")}catch{Dt=function(Ee,et,st){return Ee[et]=st}}function Lt(Re,fe,Ee,et){var rt=Object.create((fe&&fe.prototype instanceof Fn?fe:Fn).prototype),Rt=new oo(et||[]);return re(rt,"_invoke",{value:Uo(Re,Ee,Rt)}),rt}function Kt(Re,fe,Ee){try{return{type:"normal",arg:Re.call(fe,Ee)}}catch(et){return{type:"throw",arg:et}}}f.wrap=Lt;var Pn="suspendedStart",In="suspendedYield",qn="executing",Xt="completed",Nt={};function Fn(){}function Vn(){}function dn(){}var eo={};Dt(eo,at,function(){return this});var to=Object.getPrototypeOf,kn=to&&to(to(io([])));kn&&kn!==S&&x.call(kn,at)&&(eo=kn);var Cn=dn.prototype=Fn.prototype=Object.create(eo);function _o(Re){["next","throw","return"].forEach(function(fe){Dt(Re,fe,function(Ee){return this._invoke(fe,Ee)})})}function Bn(Re,fe){function Ee(st,rt,Rt,Bt){var zt=Kt(Re[st],Re,rt);if("throw"!==zt.type){var pn=zt.arg,sn=pn.value;return sn&&"object"==typeof sn&&x.call(sn,"__await")?fe.resolve(sn.__await).then(function(gn){Ee("next",gn,Rt,Bt)},function(gn){Ee("throw",gn,Rt,Bt)}):fe.resolve(sn).then(function(gn){pn.value=gn,Rt(pn)},function(gn){return Ee("throw",gn,Rt,Bt)})}Bt(zt.arg)}var et;re(this,"_invoke",{value:function(rt,Rt){function Bt(){return new fe(function(zt,pn){Ee(rt,Rt,zt,pn)})}return et=et?et.then(Bt,Bt):Bt()}})}function Uo(Re,fe,Ee){var et=Pn;return function(st,rt){if(et===qn)throw new Error("Generator is already running");if(et===Xt){if("throw"===st)throw rt;return{value:e,done:!0}}for(Ee.method=st,Ee.arg=rt;;){var Rt=Ee.delegate;if(Rt){var Bt=Co(Rt,Ee);if(Bt){if(Bt===Nt)continue;return Bt}}if("next"===Ee.method)Ee.sent=Ee._sent=Ee.arg;else if("throw"===Ee.method){if(et===Pn)throw et=Xt,Ee.arg;Ee.dispatchException(Ee.arg)}else"return"===Ee.method&&Ee.abrupt("return",Ee.arg);et=qn;var zt=Kt(Re,fe,Ee);if("normal"===zt.type){if(et=Ee.done?Xt:In,zt.arg===Nt)continue;return{value:zt.arg,done:Ee.done}}"throw"===zt.type&&(et=Xt,Ee.method="throw",Ee.arg=zt.arg)}}}function Co(Re,fe){var Ee=fe.method,et=Re.iterator[Ee];if(et===e)return fe.delegate=null,"throw"===Ee&&Re.iterator.return&&(fe.method="return",fe.arg=e,Co(Re,fe),"throw"===fe.method)||"return"!==Ee&&(fe.method="throw",fe.arg=new TypeError("The iterator does not provide a '"+Ee+"' method")),Nt;var st=Kt(et,Re.iterator,fe.arg);if("throw"===st.type)return fe.method="throw",fe.arg=st.arg,fe.delegate=null,Nt;var rt=st.arg;return rt?rt.done?(fe[Re.resultName]=rt.value,fe.next=Re.nextLoc,"return"!==fe.method&&(fe.method="next",fe.arg=e),fe.delegate=null,Nt):rt:(fe.method="throw",fe.arg=new TypeError("iterator result is not an object"),fe.delegate=null,Nt)}function No(Re){var fe={tryLoc:Re[0]};1 in Re&&(fe.catchLoc=Re[1]),2 in Re&&(fe.finallyLoc=Re[2],fe.afterLoc=Re[3]),this.tryEntries.push(fe)}function no(Re){var fe=Re.completion||{};fe.type="normal",delete fe.arg,Re.completion=fe}function oo(Re){this.tryEntries=[{tryLoc:"root"}],Re.forEach(No,this),this.reset(!0)}function io(Re){if(Re||""===Re){var fe=Re[at];if(fe)return fe.call(Re);if("function"==typeof Re.next)return Re;if(!isNaN(Re.length)){var Ee=-1,et=function st(){for(;++Ee<Re.length;)if(x.call(Re,Ee))return st.value=Re[Ee],st.done=!1,st;return st.value=e,st.done=!0,st};return et.next=et}}throw new TypeError(typeof Re+" is not iterable")}return Vn.prototype=dn,re(Cn,"constructor",{value:dn,configurable:!0}),re(dn,"constructor",{value:Vn,configurable:!0}),Vn.displayName=Dt(dn,Tt,"GeneratorFunction"),f.isGeneratorFunction=function(Re){var fe="function"==typeof Re&&Re.constructor;return!!fe&&(fe===Vn||"GeneratorFunction"===(fe.displayName||fe.name))},f.mark=function(Re){return Object.setPrototypeOf?Object.setPrototypeOf(Re,dn):(Re.__proto__=dn,Dt(Re,Tt,"GeneratorFunction")),Re.prototype=Object.create(Cn),Re},f.awrap=function(Re){return{__await:Re}},_o(Bn.prototype),Dt(Bn.prototype,At,function(){return this}),f.AsyncIterator=Bn,f.async=function(Re,fe,Ee,et,st){void 0===st&&(st=Promise);var rt=new Bn(Lt(Re,fe,Ee,et),st);return f.isGeneratorFunction(fe)?rt:rt.next().then(function(Rt){return Rt.done?Rt.value:rt.next()})},_o(Cn),Dt(Cn,Tt,"Generator"),Dt(Cn,at,function(){return this}),Dt(Cn,"toString",function(){return"[object Generator]"}),f.keys=function(Re){var fe=Object(Re),Ee=[];for(var et in fe)Ee.push(et);return Ee.reverse(),function st(){for(;Ee.length;){var rt=Ee.pop();if(rt in fe)return st.value=rt,st.done=!1,st}return st.done=!0,st}},f.values=io,oo.prototype={constructor:oo,reset:function(fe){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(no),!fe)for(var Ee in this)"t"===Ee.charAt(0)&&x.call(this,Ee)&&!isNaN(+Ee.slice(1))&&(this[Ee]=e)},stop:function(){this.done=!0;var fe=this.tryEntries[0].completion;if("throw"===fe.type)throw fe.arg;return this.rval},dispatchException:function(fe){if(this.done)throw fe;var Ee=this;function et(pn,sn){return Rt.type="throw",Rt.arg=fe,Ee.next=pn,sn&&(Ee.method="next",Ee.arg=e),!!sn}for(var st=this.tryEntries.length-1;st>=0;--st){var rt=this.tryEntries[st],Rt=rt.completion;if("root"===rt.tryLoc)return et("end");if(rt.tryLoc<=this.prev){var Bt=x.call(rt,"catchLoc"),zt=x.call(rt,"finallyLoc");if(Bt&&zt){if(this.prev<rt.catchLoc)return et(rt.catchLoc,!0);if(this.prev<rt.finallyLoc)return et(rt.finallyLoc)}else if(Bt){if(this.prev<rt.catchLoc)return et(rt.catchLoc,!0)}else{if(!zt)throw new Error("try statement without catch or finally");if(this.prev<rt.finallyLoc)return et(rt.finallyLoc)}}}},abrupt:function(fe,Ee){for(var et=this.tryEntries.length-1;et>=0;--et){var st=this.tryEntries[et];if(st.tryLoc<=this.prev&&x.call(st,"finallyLoc")&&this.prev<st.finallyLoc){var rt=st;break}}rt&&("break"===fe||"continue"===fe)&&rt.tryLoc<=Ee&&Ee<=rt.finallyLoc&&(rt=null);var Rt=rt?rt.completion:{};return Rt.type=fe,Rt.arg=Ee,rt?(this.method="next",this.next=rt.finallyLoc,Nt):this.complete(Rt)},complete:function(fe,Ee){if("throw"===fe.type)throw fe.arg;return"break"===fe.type||"continue"===fe.type?this.next=fe.arg:"return"===fe.type?(this.rval=this.arg=fe.arg,this.method="return",this.next="end"):"normal"===fe.type&&Ee&&(this.next=Ee),Nt},finish:function(fe){for(var Ee=this.tryEntries.length-1;Ee>=0;--Ee){var et=this.tryEntries[Ee];if(et.finallyLoc===fe)return this.complete(et.completion,et.afterLoc),no(et),Nt}},catch:function(fe){for(var Ee=this.tryEntries.length-1;Ee>=0;--Ee){var et=this.tryEntries[Ee];if(et.tryLoc===fe){var st=et.completion;if("throw"===st.type){var rt=st.arg;no(et)}return rt}}throw new Error("illegal catch attempt")},delegateYield:function(fe,Ee,et){return this.delegate={iterator:io(fe),resultName:Ee,nextLoc:et},"next"===this.method&&(this.arg=e),Nt}},f}var so="__SUPPORTS_METHOD__",bo=function(){function e(S){var x=this;this.onMessageReceived=function(re){re.method?x.handleRequestMessageReceived(re):x.handleResponseMessageReceived(re)},this.options=S,this.ready=!1,this.methodCallbackMap=new Map,this.requestDeferredByMessageId=new Map,this.queuedRequestMessages=[],this.options.rpcWindow.addListener(this.onMessageReceived),this.internalRegister(so,function(re){return x.handleSupportsMethodMessage(re)})}var f=e.prototype;return f.call=function(x,re){return this.internalCall(e.normalizeMethodName(x),re)},f.callIfSupported=function(x,re){return function(e,f,S,x){return new(S||(S=Promise))(function(Se,at){function At(Lt){try{Dt(x.next(Lt))}catch(Kt){at(Kt)}}function Tt(Lt){try{Dt(x.throw(Lt))}catch(Kt){at(Kt)}}function Dt(Lt){Lt.done?Se(Lt.value):function(Se){return Se instanceof S?Se:new S(function(at){at(Se)})}(Lt.value).then(At,Tt)}Dt((x=x.apply(e,f||[])).next())})}(this,void 0,void 0,lo().mark(function Se(){return lo().wrap(function(Tt){for(;;)switch(Tt.prev=Tt.next){case 0:return Tt.next=2,this.supportsMethod(x);case 2:if(!Tt.sent){Tt.next=5;break}return Tt.abrupt("return",this.call(x,re));case 5:return Tt.abrupt("return",void 0);case 6:case"end":return Tt.stop()}},Se,this)}))},f.dispose=function(){this.internalUnregister(so),this.requestDeferredByMessageId.forEach(function(x){return x.reject(function(e){var f=new Error("Rpc disposed");if(null!=f.stack)return f;try{throw f}catch(S){return S}}())}),this.requestDeferredByMessageId.clear(),this.options.rpcWindow.removeListener(this.onMessageReceived)},f.register=function(x,re){var Se=this,at=e.normalizeMethodName(x);this.internalRegister(at,function(){for(var At,Tt,Dt=arguments.length,Lt=new Array(Dt),Kt=0;Kt<Dt;Kt++)Lt[Kt]=arguments[Kt];return null===(Tt=(At=Se.options).onMethodInvoked)||void 0===Tt||Tt.call(At,x,Lt),re.apply(void 0,Lt)})},f.supportsMethod=function(x){return this.internalCall(so,[x])},f.unregister=function(x){var re=e.normalizeMethodName(x);this.internalUnregister(re)},f.canPostMessage=function(x){return this.ready},f.internalCall=function(x,re){void 0===re&&(re=void 0);var Se=po(),at={id:Se,method:x,params:re},At=new Un;return this.requestDeferredByMessageId.set(Se,At),this.canPostMessage(at)?this.tryPostMessage(at):this.queuedRequestMessages.push(at),At.promise},f.internalRegister=function(x,re){if(this.methodCallbackMap.has(x))throw new Error("Rpc method with name '"+x+"' already registered.");this.methodCallbackMap.set(x,re)},f.internalUnregister=function(x){this.methodCallbackMap.delete(x)},f.onReady=function(){this.ready=!0,this.flushRequestMessageQueue()},e.getResponseMessageError=function(x){return x instanceof Error?{message:x.message,name:x.name,stack:x.stack}:x},e.normalizeMethodName=function(x){return x.toUpperCase()},f.flushRequestMessageQueue=function(){var x=this;this.queuedRequestMessages.forEach(function(re){return x.tryPostMessage(re)}),this.queuedRequestMessages=[]},f.handleRequestMessageReceived=function(x){var re=this,Se=this.methodCallbackMap.get(x.method);if(Se){var at={signature:x.signature,id:x.id};try{var At=Se.apply(this,x.params);Promise.resolve(At).then(function(Tt){at.result=Tt,re.postMessage(at)}).catch(function(Tt){at.error=e.getResponseMessageError(Tt),re.postMessage(at)})}catch(Tt){at.error=e.getResponseMessageError(Tt),this.postMessage(at)}}},f.handleResponseMessageReceived=function(x){var re=x.id,Se=this.requestDeferredByMessageId.get(re);Se&&(x.error?Se.reject(x.error):Se.resolve(x.result),this.requestDeferredByMessageId.delete(re))},f.handleSupportsMethodMessage=function(x){return this.methodCallbackMap.has(e.normalizeMethodName(x))},f.postMessage=function(x){this.options.rpcWindow.postMessage(x)},f.tryPostMessage=function(x){try{this.postMessage(x)}catch(at){if(at instanceof Error){var re=x.id,Se=this.requestDeferredByMessageId.get(re);Se&&(Se.reject(at),this.requestDeferredByMessageId.delete(re))}}},(0,k.Z)(e,[{key:"rpcHandshakeHandler",get:function(){return this.options.rpcHandshakeHandler}}]),e}(),Rn=function(e){function f(x){var re;return(re=e.call(this,x)||this).clientOptions=x,re.internalRegister(x.rpcHandshakeHandler.getReadyMessageMethod(),function(){return re.handleReadyMessage()}),re}return(0,on.Z)(f,e),f.prototype.handleReadyMessage=function(){return this.internalUnregister(this.rpcHandshakeHandler.getReadyMessageMethod()),this.onReady(),this.clientOptions.onAck&&this.clientOptions.onAck(),this.rpcHandshakeHandler.createAckResponse()},f}(bo);function _r(e,f,S){var x;return e&&To(e)&&e.hasOwnProperty(f)&&null!==(x=e[f])&&void 0!==x?x:S}function To(e){return function(e){return null!==e&&"object"==typeof e}(e)&&!Array.isArray(e)&&e.constructor===Object}var ii=function(){function e(S){this.signature=S}var f=e.prototype;return f.deserialize=function(x){var re=x.data;return To(re)?_r(re,"data",re):re},f.serialize=function(x){return x.signature=this.signature,{id:x.id,kind:_r(x,"method",e.emptyValue),signature:e.frameSignature,data:x}},e}();ii.emptyValue="",ii.frameSignature="FxFrameControl";var Bo,ji=function(){function e(){}var f=e.prototype;return f.createAckResponse=function(){return"start"},f.getReadyMessageMethod=function(){return"ready"},f.isAckResponse=function(x){return"start"===x},e}(),Ki=function(){function e(S){this.signature=S}var f=e.prototype;return f.deserialize=function(x){return x.data},f.serialize=function(x){return x.signature=this.signature,x},e}(),wr="__PONG__",$i=function(){function e(){}var f=e.prototype;return f.createAckResponse=function(){return wr},f.getReadyMessageMethod=function(){return"__PING__"},f.isAckResponse=function(x){return x===wr},e}();!function(e){e.Default="default",e.AzurePortal_v1_0_0="azureportal-v1.0.0"}(Bo||(Bo={}));var Tn=function(){function e(S){Q(S.targetWindow),Q(S.sourceWindow),this.options=S,this.eventListeners=new Map}var f=e.prototype;return f.addListener=function(x){var re=this;if(this.eventListeners.has(x))throw new Error("Duplicate rpc listener added.");var Se=function(At){return re.handleMessageReceived(At,x)};this.eventListeners.set(x,Se),this.options.sourceWindow.addEventListener(e.eventTypeName,Se)},f.postMessage=function(x){var re=this.options.targetOriginProvider.getTargetOrigin(x);this.options.targetWindow.postMessage(this.options.rpcMessageConverter.serialize(x),re)},f.removeListener=function(x){var re=this.eventListeners.get(x);re&&(this.options.sourceWindow.removeEventListener(e.eventTypeName,re),this.eventListeners.delete(x))},e.isMessageEvent=function(x){return!function(e){return null==e}(x.data)},f.canProcessMessage=function(x){return!!x&&x.signature===this.options.rpcMessageConverter.signature},f.handleMessageReceived=function(x,re){if(e.isMessageEvent(x)){var Se=this.options.rpcMessageConverter.deserialize(x);this.canProcessMessage(Se)&&this.options.allowedOrigins.some(function(at){return function(e,f){if("*"===f)return!0;if(f.startsWith("https://*.")&&e.startsWith("https://")){var x=f.substring(9);return e.substring(8).endsWith(x)}return e===f}(x.origin,at)})&&(this.options.targetOriginProvider.onMessageReceived(x.origin),re(Se))}},e}();Tn.eventTypeName="message";var _a=function(){function e(S){this.explicitTargetOrigin=S}var f=e.prototype;return f.getTargetOrigin=function(x){return this.explicitTargetOrigin},f.onMessageReceived=function(x){},e}();function Ca(e){var f=e.indexOf("#"),S=f>=0?e.substring(0,f):e,x=e.indexOf("?");return x>=0?S.substring(0,x):S}function Sr(e){for(var S=e.indexOf("?")>-1?"&":"?",x=arguments.length,re=new Array(x>1?x-1:0),Se=1;Se<x;Se++)re[Se-1]=arguments[Se];return""+e+S+re.map(function(At){return encodeURIComponent(At.name)+"="+encodeURIComponent(At.value)}).join("&")}function ya(e){var f=e.indexOf("//");if(f>=0){var S=e.indexOf("/",f+=2);if(S>=0)return e.substring(0,S)}return e}function Eo(){Eo=function(){return f};var e,f={},S=Object.prototype,x=S.hasOwnProperty,re=Object.defineProperty||function(Re,fe,Ee){Re[fe]=Ee.value},Se="function"==typeof Symbol?Symbol:{},at=Se.iterator||"@@iterator",At=Se.asyncIterator||"@@asyncIterator",Tt=Se.toStringTag||"@@toStringTag";function Dt(Re,fe,Ee){return Object.defineProperty(Re,fe,{value:Ee,enumerable:!0,configurable:!0,writable:!0}),Re[fe]}try{Dt({},"")}catch{Dt=function(Ee,et,st){return Ee[et]=st}}function Lt(Re,fe,Ee,et){var rt=Object.create((fe&&fe.prototype instanceof Fn?fe:Fn).prototype),Rt=new oo(et||[]);return re(rt,"_invoke",{value:Uo(Re,Ee,Rt)}),rt}function Kt(Re,fe,Ee){try{return{type:"normal",arg:Re.call(fe,Ee)}}catch(et){return{type:"throw",arg:et}}}f.wrap=Lt;var Pn="suspendedStart",In="suspendedYield",qn="executing",Xt="completed",Nt={};function Fn(){}function Vn(){}function dn(){}var eo={};Dt(eo,at,function(){return this});var to=Object.getPrototypeOf,kn=to&&to(to(io([])));kn&&kn!==S&&x.call(kn,at)&&(eo=kn);var Cn=dn.prototype=Fn.prototype=Object.create(eo);function _o(Re){["next","throw","return"].forEach(function(fe){Dt(Re,fe,function(Ee){return this._invoke(fe,Ee)})})}function Bn(Re,fe){function Ee(st,rt,Rt,Bt){var zt=Kt(Re[st],Re,rt);if("throw"!==zt.type){var pn=zt.arg,sn=pn.value;return sn&&"object"==typeof sn&&x.call(sn,"__await")?fe.resolve(sn.__await).then(function(gn){Ee("next",gn,Rt,Bt)},function(gn){Ee("throw",gn,Rt,Bt)}):fe.resolve(sn).then(function(gn){pn.value=gn,Rt(pn)},function(gn){return Ee("throw",gn,Rt,Bt)})}Bt(zt.arg)}var et;re(this,"_invoke",{value:function(rt,Rt){function Bt(){return new fe(function(zt,pn){Ee(rt,Rt,zt,pn)})}return et=et?et.then(Bt,Bt):Bt()}})}function Uo(Re,fe,Ee){var et=Pn;return function(st,rt){if(et===qn)throw new Error("Generator is already running");if(et===Xt){if("throw"===st)throw rt;return{value:e,done:!0}}for(Ee.method=st,Ee.arg=rt;;){var Rt=Ee.delegate;if(Rt){var Bt=Co(Rt,Ee);if(Bt){if(Bt===Nt)continue;return Bt}}if("next"===Ee.method)Ee.sent=Ee._sent=Ee.arg;else if("throw"===Ee.method){if(et===Pn)throw et=Xt,Ee.arg;Ee.dispatchException(Ee.arg)}else"return"===Ee.method&&Ee.abrupt("return",Ee.arg);et=qn;var zt=Kt(Re,fe,Ee);if("normal"===zt.type){if(et=Ee.done?Xt:In,zt.arg===Nt)continue;return{value:zt.arg,done:Ee.done}}"throw"===zt.type&&(et=Xt,Ee.method="throw",Ee.arg=zt.arg)}}}function Co(Re,fe){var Ee=fe.method,et=Re.iterator[Ee];if(et===e)return fe.delegate=null,"throw"===Ee&&Re.iterator.return&&(fe.method="return",fe.arg=e,Co(Re,fe),"throw"===fe.method)||"return"!==Ee&&(fe.method="throw",fe.arg=new TypeError("The iterator does not provide a '"+Ee+"' method")),Nt;var st=Kt(et,Re.iterator,fe.arg);if("throw"===st.type)return fe.method="throw",fe.arg=st.arg,fe.delegate=null,Nt;var rt=st.arg;return rt?rt.done?(fe[Re.resultName]=rt.value,fe.next=Re.nextLoc,"return"!==fe.method&&(fe.method="next",fe.arg=e),fe.delegate=null,Nt):rt:(fe.method="throw",fe.arg=new TypeError("iterator result is not an object"),fe.delegate=null,Nt)}function No(Re){var fe={tryLoc:Re[0]};1 in Re&&(fe.catchLoc=Re[1]),2 in Re&&(fe.finallyLoc=Re[2],fe.afterLoc=Re[3]),this.tryEntries.push(fe)}function no(Re){var fe=Re.completion||{};fe.type="normal",delete fe.arg,Re.completion=fe}function oo(Re){this.tryEntries=[{tryLoc:"root"}],Re.forEach(No,this),this.reset(!0)}function io(Re){if(Re||""===Re){var fe=Re[at];if(fe)return fe.call(Re);if("function"==typeof Re.next)return Re;if(!isNaN(Re.length)){var Ee=-1,et=function st(){for(;++Ee<Re.length;)if(x.call(Re,Ee))return st.value=Re[Ee],st.done=!1,st;return st.value=e,st.done=!0,st};return et.next=et}}throw new TypeError(typeof Re+" is not iterable")}return Vn.prototype=dn,re(Cn,"constructor",{value:dn,configurable:!0}),re(dn,"constructor",{value:Vn,configurable:!0}),Vn.displayName=Dt(dn,Tt,"GeneratorFunction"),f.isGeneratorFunction=function(Re){var fe="function"==typeof Re&&Re.constructor;return!!fe&&(fe===Vn||"GeneratorFunction"===(fe.displayName||fe.name))},f.mark=function(Re){return Object.setPrototypeOf?Object.setPrototypeOf(Re,dn):(Re.__proto__=dn,Dt(Re,Tt,"GeneratorFunction")),Re.prototype=Object.create(Cn),Re},f.awrap=function(Re){return{__await:Re}},_o(Bn.prototype),Dt(Bn.prototype,At,function(){return this}),f.AsyncIterator=Bn,f.async=function(Re,fe,Ee,et,st){void 0===st&&(st=Promise);var rt=new Bn(Lt(Re,fe,Ee,et),st);return f.isGeneratorFunction(fe)?rt:rt.next().then(function(Rt){return Rt.done?Rt.value:rt.next()})},_o(Cn),Dt(Cn,Tt,"Generator"),Dt(Cn,at,function(){return this}),Dt(Cn,"toString",function(){return"[object Generator]"}),f.keys=function(Re){var fe=Object(Re),Ee=[];for(var et in fe)Ee.push(et);return Ee.reverse(),function st(){for(;Ee.length;){var rt=Ee.pop();if(rt in fe)return st.value=rt,st.done=!1,st}return st.done=!0,st}},f.values=io,oo.prototype={constructor:oo,reset:function(fe){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(no),!fe)for(var Ee in this)"t"===Ee.charAt(0)&&x.call(this,Ee)&&!isNaN(+Ee.slice(1))&&(this[Ee]=e)},stop:function(){this.done=!0;var fe=this.tryEntries[0].completion;if("throw"===fe.type)throw fe.arg;return this.rval},dispatchException:function(fe){if(this.done)throw fe;var Ee=this;function et(pn,sn){return Rt.type="throw",Rt.arg=fe,Ee.next=pn,sn&&(Ee.method="next",Ee.arg=e),!!sn}for(var st=this.tryEntries.length-1;st>=0;--st){var rt=this.tryEntries[st],Rt=rt.completion;if("root"===rt.tryLoc)return et("end");if(rt.tryLoc<=this.prev){var Bt=x.call(rt,"catchLoc"),zt=x.call(rt,"finallyLoc");if(Bt&&zt){if(this.prev<rt.catchLoc)return et(rt.catchLoc,!0);if(this.prev<rt.finallyLoc)return et(rt.finallyLoc)}else if(Bt){if(this.prev<rt.catchLoc)return et(rt.catchLoc,!0)}else{if(!zt)throw new Error("try statement without catch or finally");if(this.prev<rt.finallyLoc)return et(rt.finallyLoc)}}}},abrupt:function(fe,Ee){for(var et=this.tryEntries.length-1;et>=0;--et){var st=this.tryEntries[et];if(st.tryLoc<=this.prev&&x.call(st,"finallyLoc")&&this.prev<st.finallyLoc){var rt=st;break}}rt&&("break"===fe||"continue"===fe)&&rt.tryLoc<=Ee&&Ee<=rt.finallyLoc&&(rt=null);var Rt=rt?rt.completion:{};return Rt.type=fe,Rt.arg=Ee,rt?(this.method="next",this.next=rt.finallyLoc,Nt):this.complete(Rt)},complete:function(fe,Ee){if("throw"===fe.type)throw fe.arg;return"break"===fe.type||"continue"===fe.type?this.next=fe.arg:"return"===fe.type?(this.rval=this.arg=fe.arg,this.method="return",this.next="end"):"normal"===fe.type&&Ee&&(this.next=Ee),Nt},finish:function(fe){for(var Ee=this.tryEntries.length-1;Ee>=0;--Ee){var et=this.tryEntries[Ee];if(et.finallyLoc===fe)return this.complete(et.completion,et.afterLoc),no(et),Nt}},catch:function(fe){for(var Ee=this.tryEntries.length-1;Ee>=0;--Ee){var et=this.tryEntries[Ee];if(et.tryLoc===fe){var st=et.completion;if("throw"===st.type){var rt=st.arg;no(et)}return rt}}throw new Error("illegal catch attempt")},delegateYield:function(fe,Ee,et){return this.delegate={iterator:io(fe),resultName:Ee,nextLoc:et},"next"===this.method&&(this.arg=e),Nt}},f}var Er,Ji,xr,Dr,Tr,Ir,Rr,Ar,Lr,Fr,Gr,Vr,kr,ri,Br,Ur,Nr,zr,_i,Hr,Ci,yi,ai,Wr,vo,jr,Kr,$r,li,Zi,Qr,Jr,Zr,Xi,Mi,Xr,Yr,qr,si,ci,bi,Pi,wi,Oi,Si,Ei,ea,xi,Di,Ti,Yi,o,M,R,A,D,z,_e,be,Pe,Me,ve,ke,je,yt,Ut,Pt,Ze,wt,It,Ct,Ht,en,Hn,Ln,qi,ta,ba,el,tl,nl,ol,il,rl,al,ll,sl,cl,ul,dl,pl,gl,hl,ml,fl,vl,_l,Cl,yl,Ml,bl,Pl,wl,Ol,Sl,El,xl,Dl,Tl,Il,Rl,vi=function(e,f,S,x){return new(S||(S=Promise))(function(Se,at){function At(Lt){try{Dt(x.next(Lt))}catch(Kt){at(Kt)}}function Tt(Lt){try{Dt(x.throw(Lt))}catch(Kt){at(Kt)}}function Dt(Lt){Lt.done?Se(Lt.value):function(Se){return Se instanceof S?Se:new S(function(at){at(Se)})}(Lt.value).then(At,Tt)}Dt((x=x.apply(e,f||[])).next())})},Ma=function(){function e(S){var re,Se,at,x=this,At=new Date;this.instanceId=po(),this.configuration=S;var Tt=null!==(re=this.configuration.clientSettings.clientEnvironment)&&void 0!==re?re:this.createDefaultClientEnvironment(this.configuration.clientSettings.container,this.configuration.clientSettings.className),Dt=[{name:W.ClientInstanceId,value:this.instanceId}];this.configuration.clientSettings.protocolId&&Dt.push({name:W.ProtocolId,value:this.configuration.clientSettings.protocolId});var Lt=Sr.apply(t,[this.configuration.clientSettings.url].concat(Dt));this.appWindow=Tt.appWindowFactory(Lt);var Kt=void 0!==this.configuration.clientSettings.allowedOrigin?this.configuration.clientSettings.allowedOrigin:"*",Pn=function(e,f){return f===Bo.AzurePortal_v1_0_0?{rpcMessageConverter:new ii(e),rpcHandshakeHandler:new ji}:{rpcMessageConverter:new Ki(e),rpcHandshakeHandler:new $i}}(function(e){return null==e?"mspq":"mspq-"+e}(this.instanceId),null!==(Se=this.configuration.clientSettings.protocolId)&&void 0!==Se?Se:Bo.Default);this.clientRpcChannel=new Rn({debugName:"MashupEditorClient.clientRpcChannel",enableDebugLogging:null!==(at=this.configuration.clientSettings.enableDebugLogging)&&void 0!==at&&at,rpcHandshakeHandler:Pn.rpcHandshakeHandler,rpcWindow:new Tn({allowedOrigins:[Kt],rpcMessageConverter:Pn.rpcMessageConverter,sourceWindow:Tt.clientWindow,targetOriginProvider:new _a(Kt),targetWindow:this.appWindow})}),this.clientRpcEndpoint=new Gt(this.clientRpcChannel,{onCancelCurrentFlow:function(){return x.onCancelCurrentFlow()},onCommitCurrentFlow:function(qn){return x.onCommitCurrentFlow(qn)},onCurrentFlowReady:function(){return x.onCurrentFlowReady()},onAppReady:function(){return x.appReady.resolve()}},this,S,At),this.serviceProxy=new yn(this.clientRpcChannel),this.appReady=new Un}var f=e.prototype;return f.activateQuery=function(x){return this.serviceProxy.activateQuery(x)},f.addQuery=function(x,re,Se){return this.serviceProxy.addQuery(x,re,Se)},f.deleteAllQueries=function(){return this.serviceProxy.deleteAllQueries()},f.onHostPopupCancelled=function(x){return this.serviceProxy.onHostPopupCancelled(x)},f.cancelAddQueriesFlow=function(){return this.serviceProxy.cancelAddQueriesFlow()},f.endFlow=function(){return this.appWindow.hide(),this.serviceProxy.endFlow()},f.getActiveQueryName=function(){return this.serviceProxy.getActiveQueryName()},f.getCommitResult=function(){return this.serviceProxy.getCommitResult()},f.getComputeEngineSettings=function(){return this.serviceProxy.getComputeEngineSettings()},f.getCurrentFlow=function(){return this.serviceProxy.getCurrentFlow()},f.getDataSourceQueryScript=function(x,re){return this.serviceProxy.getDataSourceQueryScript(x,re)},f.getEditingSessionId=function(){return this.serviceProxy.getEditingSessionId()},f.getEditingSessionMashup=function(x){return this.serviceProxy.getEditingSessionMashup(x)},f.getMashupGatewayVersion=function(){return this.serviceProxy.getMashupGatewayVersion()},f.getGetDataWizardFlowStage=function(){return this.serviceProxy.getGetDataWizardFlowStage()},f.getFooterMessage=function(){return this.serviceProxy.getFooterMessage()},f.getIncrementalRefreshSettings=function(){return this.serviceProxy.getIncrementalRefreshSettings()},f.getQueriesInfo=function(){return this.serviceProxy.getQueriesInfo()},f.getQueryEditorState=function(){return this.serviceProxy.getQueryEditorState()},f.getQueryEditorStateOrThrow=function(){return this.serviceProxy.getQueryEditorStateOrThrow()},f.getQueryNames=function(){return this.serviceProxy.getQueryNames()},f.getQueryScript=function(x){return this.serviceProxy.getQueryScript(x)},f.getReadyState=function(){return this.serviceProxy.getReadyState()},f.getRefreshSettings=function(){return this.serviceProxy.getRefreshSettings()},f.getSelectedStepName=function(){return this.serviceProxy.getSelectedStepName()},f.getUserSettings=function(){return this.serviceProxy.getUserSettings()},f.isDialogVisible=function(){return this.serviceProxy.isDialogVisible()},f.isFeatureSupported=function(x){return this.serviceProxy.isFeatureSupported(x)},f.isFooterOverlayVisible=function(){return this.serviceProxy.isFooterOverlayVisible()},f.logXFramePerformanceMarks=function(x){return this.serviceProxy.logXFramePerformanceMarks(x)},f.refreshActiveQueryResult=function(){return this.serviceProxy.refreshActiveQueryResult()},f.setCommitButtonEnabledStatePolicy=function(x){return this.serviceProxy.setCommitButtonEnabledStatePolicy(x)},f.setUserSettings=function(x){return this.serviceProxy.setUserSettings(x)},f.startFlow=function(x,re,Se,at){return vi(this,void 0,void 0,Eo().mark(function At(){return Eo().wrap(function(Lt){for(;;)switch(Lt.prev=Lt.next){case 0:return Lt.next=2,this.ready;case 2:return Lt.next=4,this.getCurrentFlow();case 4:if(null==Lt.sent){Lt.next=7;break}throw Error("cannot start a new flow when an existing flow is running");case 7:return this.currentFlowConfiguration={flowReady:new Un,shouldEndFlowOnCommit:he(x),shouldEndFlowOnCancel:pe(x),onCommit:function(Pn,In){if(u(In,x))return re(Pn,In);throw new Error("The flow "+x.kind+" returned the wrong type of result: "+In.kind)},onCancel:Se},this.appWindow.show(),this.serviceProxy.startFlow(x,at),Lt.abrupt("return",this.currentFlowConfiguration.flowReady.promise);case 11:case"end":return Lt.stop()}},At,this)}))},f.dispose=function(){return vi(this,void 0,void 0,Eo().mark(function x(){return Eo().wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:return this.appWindow.hide(),Se.prev=1,Se.next=4,this.serviceProxy.disposeService();case 4:return Se.prev=4,this.clientRpcEndpoint.dispose(),this.clientRpcChannel.dispose(),this.appWindow.dispose(),Se.finish(4);case 9:case"end":return Se.stop()}},x,this,[[1,,4,9]])}))},f.trySetQueryScript=function(x,re){return this.serviceProxy.trySetQueryScript(x,re)},f.createDefaultClientEnvironment=function(x,re){return{clientWindow:window,appWindowFactory:function(at){return new le(at,x,re)}}},f.onCancelCurrentFlow=function(){return vi(this,void 0,void 0,Eo().mark(function x(){return Eo().wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:if(!this.configuration.onCancel){Se.next=2;break}return Se.abrupt("return",this.configuration.onCancel(this));case 2:return Q(this.currentFlowConfiguration),Se.next=5,this.currentFlowConfiguration.onCancel(this);case 5:this.currentFlowConfiguration.shouldEndFlowOnCancel&&(this.appWindow.hide(),this.currentFlowConfiguration=void 0);case 6:case"end":return Se.stop()}},x,this)}))},f.onCommitCurrentFlow=function(x){return vi(this,void 0,void 0,Eo().mark(function re(){return Eo().wrap(function(at){for(;;)switch(at.prev=at.next){case 0:if(!this.configuration.onCommit){at.next=2;break}return at.abrupt("return",this.configuration.onCommit(this));case 2:return Q(this.currentFlowConfiguration),at.next=5,this.currentFlowConfiguration.onCommit(this,x);case 5:this.currentFlowConfiguration.shouldEndFlowOnCommit&&(this.appWindow.hide(),this.currentFlowConfiguration=void 0);case 6:case"end":return at.stop()}},re,this)}))},f.onCurrentFlowReady=function(){Q(this.currentFlowConfiguration),this.currentFlowConfiguration.flowReady.resolve()},(0,k.Z)(e,[{key:"dataPreview",get:function(){var x=this;return{cancelCurrentEvaluation:function(){return x.serviceProxy.dataPreview_cancelCurrentQueryEvaluation()},selectColumns:function(Se){return x.serviceProxy.dataPreview_selectColumns(Se)}}}},{key:"getDataWizardFooterCallbacks",get:function(){var x=this;return{clickCancelButton:function(){return x.serviceProxy.getDataWizardFooter_clickCancelButton()},clickCommitButton:function(){return x.serviceProxy.getDataWizardFooter_clickCommitButton()},clickCustomButton:function(){return x.serviceProxy.getDataWizardFooter_clickCustomButton()},clickNextStageButton:function(){return x.serviceProxy.getDataWizardFooter_clickNextStageButton()},clickPreviousStageButton:function(){return x.serviceProxy.getDataWizardFooter_clickPreviousStageButton()}}}},{key:"cancelButton",get:function(){var x=this;return{click:function(){return x.serviceProxy.clickCancelButton()},getLabel:function(){return x.serviceProxy.getCancelButtonLabel()},isEnabled:function(){return x.serviceProxy.isCancelButtonEnabled()},isVisible:function(){return x.serviceProxy.isCancelButtonVisible()}}}},{key:"commitButton",get:function(){var x=this;return{click:function(){return x.serviceProxy.clickCommitButton()},getLabel:function(){return x.serviceProxy.getCommitButtonLabel()},isEnabled:function(){return x.serviceProxy.isCommitButtonEnabled()},isVisible:function(){return x.serviceProxy.isCommitButtonVisible()}}}},{key:"customButton",get:function(){var x=this;return{click:function(){return x.serviceProxy.clickCustomButton()},getLabel:function(){return x.serviceProxy.getCustomButtonLabel()},isEnabled:function(){return x.serviceProxy.isCustomButtonEnabled()},isVisible:function(){return x.serviceProxy.isCustomButtonVisible()}}}},{key:"nextStageButton",get:function(){var x=this;return{click:function(){return x.serviceProxy.clickNextStageButton()},getLabel:function(){return x.serviceProxy.getNextStageButtonLabel()},isEnabled:function(){return x.serviceProxy.isNextStageButtonEnabled()},isVisible:function(){return x.serviceProxy.isNextStageButtonVisible()}}}},{key:"createConnectionFlowCallbacks",get:function(){var x=this;return{commit:function(Se){return x.serviceProxy.createConnectionFlow_commit(Se)}}}},{key:"previousStageButton",get:function(){var x=this;return{click:function(){return x.serviceProxy.clickPreviousStageButton()},getLabel:function(){return x.serviceProxy.getPreviousStageButtonLabel()},isEnabled:function(){return x.serviceProxy.isPreviousStageButtonEnabled()},isVisible:function(){return x.serviceProxy.isPreviousStageButtonVisible()}}}},{key:"ready",get:function(){return this.appReady.promise}}]),e}();!function(e){e.Success="Success",e.Error_EmptyName="Error_EmptyName",e.Error_InvalidCharacters="Error_InvalidCharacters",e.Error_NameAlreadyExists="Error_NameAlreadyExists",e.Error_NameTooLong="Error_NameTooLong"}(Er||(Er={})),function(e){e.Cancel="Cancel",e.Commit="Commit"}(Ji||(Ji={})),function(e){e.AlwaysCancel="AlwaysCancel",e.AlwaysCommit="AlwaysCommit",e.Ask="Ask"}(xr||(xr={})),function(e){e.BuiltInCommand="BuiltInCommand",e.HostCommand="HostCommand"}(Dr||(Dr={})),function(e){e.Kusto="kusto",e.Sql="sql"}(Tr||(Tr={})),function(e){e.StepLabel="StepLabel",e.StepName="StepName"}(Ir||(Ir={})),function(e){e.CalculatedEntity="CalculatedEntity",e.Default="Default",e.LinkedEntity="LinkedEntity",e.Parameter="Parameter",e.Visual="Visual"}(Rr||(Rr={})),function(e){e.Data="Data",e.Schema="Schema"}(Ar||(Ar={})),function(e){e.None="None",e.Query="Query",e.Step="Step"}(Lr||(Lr={})),function(e){e.Critical="Critical",e.Error="Error"}(Fr||(Fr={})),function(e){e.AlwaysDisabled="AlwaysDisabled",e.Default="Default"}(Gr||(Gr={})),function(e){e.Cancelled="Cancelled",e.Completed="Completed",e.Failed="Failed",e.NotStarted="NotStarted",e.Running="Running"}(Vr||(Vr={})),function(e){e.Access="Access",e.Access_Monocolor="Access_Monocolor",e.ActiveDirectory="ActiveDirectory",e.AddFuzzyClusterColumn="AddFuzzyClusterColumn",e.AddRankColumn="AddRankColumn",e.AdobeAnalytics="AdobeAnalytics",e.AIInsights="AIInsights",e.AllFilled="AllFilled",e.AllRegular="AllRegular",e.Alternates="Alternates",e.AnyType="AnyType",e.AppendQueries="AppendQueries",e.AppendQueriesAsNew="AppendQueriesAsNew",e.AzureAnalysisServices="AzureAnalysisServices",e.AzureBlobs="AzureBlobs",e.AzureFilled="AzureFilled",e.AzureHdInsightClusters="AzureHdInsightClusters",e.AzureRegular="AzureRegular",e.AzureSql="AzureSql",e.AzureSynapse="AzureSynapse",e.AzureTables="AzureTables",e.Binary="Binary",e.Blog="Blog",e.BlueLink="BlueLink",e.CalculatedEntity="CalculatedEntity",e.Calculator="Calculator",e.Cancel="Cancel",e.CancelRefresh="CancelRefresh",e.Cds="Cds",e.ChartClusteredBar="ChartClusteredBar",e.ChartClusteredColumn="ChartClusteredColumn",e.ChartLine="ChartLine",e.ChartPercentageStackedArea="ChartPercentageStackedArea",e.ChartPercentageStackedBar="ChartPercentageStackedBar",e.ChartPercentageStackedColumn="ChartPercentageStackedColumn",e.ChartStackedArea="ChartStackedArea",e.ChartStackedBar="ChartStackedBar",e.ChartStackedColumn="ChartStackedColumn",e.Checkmark="Checkmark",e.ChooseColumns="ChooseColumns",e.ClearFilter="ClearFilter",e.Close="Close",e.CloseAndLoad="CloseAndLoad",e.CloseAndLoadTo="CloseAndLoadTo",e.CloseRed="CloseRed",e.Column="Column",e.ColumnByExample="ColumnByExample",e.CombineFiles="CombineFiles",e.Community="Community",e.ConditionalColumn="ConditionalColumn",e.ConnectDatabase="ConnectDatabase",e.Copilot="Copilot",e.Copy="Copy",e.CountRows="CountRows",e.Cube="Cube",e.CubeAddAndExpandDimensionColumn="CubeAddAndExpandDimensionColumn",e.CubeCollapseAndRemoveColumns="CubeCollapseAndRemoveColumns",e.CubeDimension="CubeDimension",e.CubeDimensionAttribute="CubeDimensionAttribute",e.CubeDimensionHierarchy="CubeDimensionHierarchy",e.CubeMeasure="CubeMeasure",e.CubeServer="CubeServer",e.Currency="Currency",e.CustomColumn="CustomColumn",e.Cut="Cut",e.Database="Database",e.DatabaseClock="DatabaseClock",e.DatabaseDynamic="DatabaseDynamic",e.DatabaseFilled="DatabaseFilled",e.DatabaseLightning="DatabaseLightning",e.DatabaseOpaque="DatabaseOpaque",e.DatabaseRefresh="DatabaseRefresh",e.DatabaseRegular="DatabaseRegular",e.Databases="Databases",e.DatabaseUnknown="DatabaseUnknown",e.Dataflows="Dataflows",e.Dataverse="Dataverse",e.Date="Date",e.DateTime="DateTime",e.DateTimeZone="DateTimeZone",e.Delete="Delete",e.DeleteFile="DeleteFile",e.DemoteHeaders="DemoteHeaders",e.DetectDataType="DetectDataType",e.Diagram="Diagram",e.Documentation="Documentation",e.DragQueries="DragQueries",e.DragQueryGroups="DragQueryGroups",e.DuplicateColumn="DuplicateColumn",e.Duration="Duration",e.Dynamics365="Dynamics365",e.Empty="Empty",e.Entity="Entity",e.Error="Error",e.Excel="Excel",e.Excel_Monocolor="Excel_Monocolor",e.Exchange="Exchange",e.Exchange_Monocolor="Exchange_Monocolor",e.Expand="Expand",e.ExpandColumn="ExpandColumn",e.Fabric="Fabric",e.FabricFilled="FabricFilled",e.FabricRegular="FabricRegular",e.FastCopy="FastCopy",e.Feedback="Feedback",e.FeedbackExtremelyDissatisfied="FeedbackExtremelyDissatisfied",e.FeedbackExtremelySatisfied="FeedbackExtremelySatisfied",e.FeedbackSomewhatDissatisfied="FeedbackSomewhatDissatisfied",e.FeedbackSomewhatSatisfied="FeedbackSomewhatSatisfied",e.Fhir="Fhir",e.FileFilled="FileFilled",e.FileRegular="FileRegular",e.FillDown="FillDown",e.FillUp="FillUp",e.Filter="Filter",e.FitToView="FitToView",e.FluentView="FluentView",e.Folder="Folder",e.FormatText="FormatText",e.FullScreen="FullScreen",e.Function="Function",e.Gear="Gear",e.GetData="GetData",e.GoogleAnalytics="GoogleAnalytics",e.GoToColumn="GoToColumn",e.GridAutoFilter="GridAutoFilter",e.GridCombineFiles="GridCombineFiles",e.GridEditFilter="GridEditFilter",e.GridExpandColumn="GridExpandColumn",e.GridSortedAscending="GridSortedAscending",e.GridSortedDescending="GridSortedDescending",e.GroupBy="GroupBy",e.HorizontalLayout="HorizontalLayout",e.IndexColumn="IndexColumn",e.Info="Info",e.InsertColumnsLeft="InsertColumnsLeft",e.InsertColumnsRight="InsertColumnsRight",e.InsertRowsAbove="InsertRowsAbove",e.InsertRowsBelow="InsertRowsBelow",e.InvokeCustomFunction="InvokeCustomFunction",e.JoinKindFullOuter="JoinKindFullOuter",e.JoinKindInner="JoinKindInner",e.JoinKindLeftAnti="JoinKindLeftAnti",e.JoinKindLeftOuter="JoinKindLeftOuter",e.JoinKindRightAnti="JoinKindRightAnti",e.JoinKindRightOuter="JoinKindRightOuter",e.KeepBottomRows="KeepBottomRows",e.KeepDuplicates="KeepDuplicates",e.KeepErrors="KeepErrors",e.KeepRange="KeepRange",e.KeepTopRows="KeepTopRows",e.Key="Key",e.KeyboardShortcuts="KeyboardShortcuts",e.Kusto="Kusto",e.LightBulb="LightBulb",e.LinkedEntity="LinkedEntity",e.List="List",e.ListToTable="ListToTable",e.Load="Load",e.Logical="Logical",e.ManageConnections="ManageConnections",e.ManageDataSources="ManageDataSources",e.Map="Map",e.MapToEntity="MapToEntity",e.MashupGraphCollapse="MashupGraphCollapse",e.MashupGraphExpand="MashupGraphExpand",e.MashupGraphRelated="MashupGraphRelated",e.MathInfo="MathInfo",e.MergeColumns="MergeColumns",e.MergeQueries="MergeQueries",e.MergeQueriesAsNew="MergeQueriesAsNew",e.More="More",e.MoveColumns="MoveColumns",e.MoveColumnsLeft="MoveColumnsLeft",e.MoveColumnsRight="MoveColumnsRight",e.MoveColumnsToBeginning="MoveColumnsToBeginning",e.MoveColumnsToEnd="MoveColumnsToEnd",e.MoveDown="MoveDown",e.MoveLeft="MoveLeft",e.MoveRight="MoveRight",e.MoveUp="MoveUp",e.Neutral="Neutral",e.Number="Number",e.OData="OData",e.Odbc="Odbc",e.OnlineServicesFilled="OnlineServicesFilled",e.OnlineServicesRegular="OnlineServicesRegular",e.OtherFilled="OtherFilled",e.OtherRegular="OtherRegular",e.Parameter="Parameter",e.Parquet="Parquet",e.Parse="Parse",e.Paste="Paste",e.Pdf="Pdf",e.Pencil="Pencil",e.Percentage="Percentage",e.PivotColumn="PivotColumn",e.Plus="Plus",e.PowerBI="PowerBI",e.PowerBIReport="PowerBIReport",e.PowerPlatformFilled="PowerPlatformFilled",e.PowerPlatformRegular="PowerPlatformRegular",e.PowerQuery="PowerQuery",e.PrimitiveToList="PrimitiveToList",e.PrivacyBuffering="PrivacyBuffering",e.PromoteHeaders="PromoteHeaders",e.Properties="Properties",e.QuerySettings="QuerySettings",e.QuestionMark="QuestionMark",e.Record="Record",e.Reference="Reference",e.Refresh="Refresh",e.RemoveAlternateRows="RemoveAlternateRows",e.RemoveBlankRows="RemoveBlankRows",e.RemoveBottomRows="RemoveBottomRows",e.RemoveColumns="RemoveColumns",e.RemoveDuplicates="RemoveDuplicates",e.RemoveErrors="RemoveErrors",e.RemoveOtherColumns="RemoveOtherColumns",e.RemoveRows="RemoveRows",e.RemoveTopRows="RemoveTopRows",e.Rename="Rename",e.ReplaceErrors="ReplaceErrors",e.ReplaceValues="ReplaceValues",e.Reset="Reset",e.ReverseRows="ReverseRows",e.Rounding="Rounding",e.Salesforce="Salesforce",e.Save="Save",e.Scientific="Scientific",e.Script="Script",e.Sensitivity="Sensitivity",e.Settings="Settings",e.Share="Share",e.SharePoint="SharePoint",e.Sheet="Sheet",e.SheetAccess="SheetAccess",e.SheetCsv="SheetCsv",e.SheetDataflow="SheetDataflow",e.SheetExcel="SheetExcel",e.SheetHtml="SheetHtml",e.SheetJson="SheetJson",e.SheetSql="SheetSql",e.SheetText="SheetText",e.SheetXml="SheetXml",e.SortAscending="SortAscending",e.SortDescending="SortDescending",e.Spark="Spark",e.Sparkle="Sparkle",e.Sparkle_Monocolor="Sparkle_Monocolor",e.SplitColumn="SplitColumn",e.Standard="Standard",e.Statistics="Statistics",e.Success="Success",e.Suggestion="Suggestion",e.Support="Support",e.Table="Table",e.TableSchema="TableSchema",e.Template="Template",e.Text="Text",e.TextFile="TextFile",e.Time="Time",e.ToTable="ToTable",e.Transpose="Transpose",e.Trigonometry="Trigonometry",e.UnknownType="UnknownType",e.Unlink="Unlink",e.UnpivotColumns="UnpivotColumns",e.Vertica="Vertica",e.VerticalLayout="VerticalLayout",e.View="View",e.Visual="Visual",e.Wand="Wand",e.Warning="Warning",e.Web="Web",e.Website="Website",e.WholeNumber="WholeNumber",e.Worksheet="Worksheet"}(kr||(kr={})),function(e){e.FullRefresh="FullRefresh",e.IncrementalRefresh="IncrementalRefresh"}(ri||(ri={})),function(e){e.Days="Days",e.Months="Months",e.Quarters="Quarters",e.Years="Years"}(Br||(Br={})),function(e){e.Custom="Custom",e.Standard="Standard",e.System="System"}(Ur||(Ur={})),function(e){e.EvaluateTop1000Rows="EvaluateTop1000Rows",e.EvaluateEntireDataset="EvaluateEntireDataset"}(Nr||(Nr={})),function(e){e.Action="Action.Type",e.Any="Any.Type",e.Binary="Binary.Type",e.Byte="Byte.Type",e.Character="Character.Type",e.Currency="Currency.Type",e.Date="Date.Type",e.DateTime="DateTime.Type",e.DateTimeZone="DateTimeZone.Type",e.Decimal="Decimal.Type",e.Double="Double.Type",e.Duration="Duration.Type",e.Function="Function.Type",e.Int16="Int16.Type",e.Int32="Int32.Type",e.Int64="Int64.Type",e.Int8="Int8.Type",e.List="List.Type",e.Logical="Logical.Type",e.None="None.Type",e.Null="Null.Type",e.Number="Number.Type",e.Percentage="Percentage.Type",e.Record="Record.Type",e.Single="Single.Type",e.Table="Table.Type",e.Text="Text.Type",e.Time="Time.Type",e.Type="Type.Type"}(zr||(zr={})),function(e){e.MultiLine="MultiLine",e.SingleLine="SingleLine"}(_i||(_i={})),function(e){e.Always="Always",e.BasedOnProjectSettings="BasedOnProjectSettings",e.Never="Never"}(Hr||(Hr={})),function(e){e.Collapsed="Collapsed",e.Expanded="Expanded",e.Maximized="Maximized"}(Ci||(Ci={})),function(e){e.Host="Host",e.Initialization="Initialization",e.UserInteraction="UserInteraction"}(yi||(yi={})),function(e){e.Action="action",e.Any="any",e.AnyNonNull="anynonnull",e.Binary="binary",e.Currency="currency",e.Date="date",e.DateTime="datetime",e.DateTimeZone="datetimezone",e.Duration="duration",e.Exception="exception",e.Function="function",e.List="list",e.Logical="logical",e.None="none",e.Null="null",e.Number="number",e.Percentage="percentage",e.Record="record",e.Table="table",e.Text="text",e.Time="time",e.Type="type",e.WholeNumber="wholenumber"}(ai||(ai={})),function(e){e.Auto="Auto",e.Percent="Percent",e.Pixels="Pixels"}(Wr||(Wr={})),function(e){e.Cells="Cells",e.Columns="Columns",e.Rows="Rows"}(vo||(vo={})),function(e){e.Access="access",e.ActiveDirectory="activeDirectory",e.AdobeAnalytics="adobeAnalytics",e.AnalysisServices="analysisServices",e.AzureAnalysisServices="azureAnalysisServices",e.AzureBlobs="azureBlobs",e.AzureDataLake="azureDataLake",e.AzureHdInsightHdfs="azureHdInsightHdfs",e.AzureSql="azureSql",e.AzureSqlDw="azureSqlDW",e.AzureTables="azureTables",e.Blank="blank",e.Db2="db2",e.Dynamics365="dynamics365",e.EnterData="enterData",e.Excel="excel",e.ExchangeOnline="exchangeOnline",e.FolderContents="folderContents",e.FolderFiles="folderFiles",e.GoogleAnalytics="googleAnalytics",e.Json="json",e.MySql="mySql",e.Odata="odata",e.Odbc="odbc",e.Oracle="oracle",e.Parquet="parquet",e.Pdf="pdf",e.PostgreSql="postgreSql",e.SharepointFolder="sharepointFolder",e.SharepointList="sharepointList",e.SharepointOnlineList="sharepointOnlineList",e.SalesforceObjects="salesforceObjects",e.SalesforceReports="salesforceReports",e.SapBusinessWarehouseAppServer="SapBusinessWarehouseAppServer",e.SapBusinessWarehouseMessageServer="SapBusinessWarehouseMessageServer",e.SapHanaDatabase="SapHanaDatabase",e.Sql="sql",e.Sybase="sybase",e.Teradata="teradata",e.TextCsv="textCsv",e.Web="web",e.WebApi="webApi",e.Xml="xml"}(jr||(jr={})),function(e){e.Extension="extension"}(Kr||(Kr={})),function(e){e.Failed="Failed",e.Idle="Idle",e.InProgress="InProgress",e.Success="Success"}($r||($r={})),function(e){e.WaitingToStart="WaitingToStart",e.EvaluatingRelationships="EvaluatingRelationships",e.WaitingForOtherEntities="WaitingForOtherEntities",e.EvaluatingSchema="EvaluatingSchema",e.DeletingEntity="DeletingEntity",e.CreatingEntity="CreatingEntity",e.DeletingExistingData="DeletingExistingData",e.EvaluatingData="EvaluatingData",e.ProvisioningTempStorage="ProvisioningTempStorage",e.UploadingDataToTempStorage="UploadingDataToTempStorage",e.InitializingLoadSession="InitializingLoadSession",e.WaitingForLoadSessionToInitialize="WaitingForLoadSessionToInitialize",e.CreatingDefinitionGroup="CreatingDefinitionGroup",e.CreatingDefinitionGroupDetails="CreatingDefinitionGroupDetails",e.UploadingData="UploadingData",e.GeneratingFieldMapping="GeneratingFieldMapping",e.AutoSequencing="AutoSequencing",e.ExecutingLoad="ExecutingLoad",e.WaitingForLoadToComplete="WaitingForLoadToComplete",e.GeneratingExecutionErrors="GeneratingExecutionErrors",e.Success="Success",e.SignInRequired="SignInRequired",e.DeletingExistingDataFailed="DeletingExistingDataFailed",e.EvaluationFailed="EvaluationFailed",e.CreatingEntityFailed="CreatingEntityFailed",e.DeletingEntityFailed="DeletingEntityFailed",e.RetrievingEntityMetadataFailed="RetrievingEntityMetadataFailed",e.Canceled="Canceled",e.LoadToCdsPartiallySucceeded="LoadToCdsPartiallySucceeded",e.LoadToCdsFailed="LoadToCdsFailed",e.LoadFailedDueToErrorInOtherEntity="LoadFailedDueToErrorInOtherEntity",e.Unknown="Unknown"}(li||(li={})),function(e){e.Composition="Composition",e.Conditional="Conditional",e.CountDistinctValues="CountDistinctValues",e.CountValues="CountValues",e.Date_Age="Date_Age",e.Date_CombineWithTime="Date_CombineWithTime",e.Date_Day="Date_Day",e.Date_DayOfWeek="Date_DayOfWeek",e.Date_DayOfWeekName="Date_DayOfWeekName",e.Date_DayOfYear="Date_DayOfYear",e.Date_DaysInMonth="Date_DaysInMonth",e.Date_Earliest="Date_Earliest",e.Date_EndOfDay="Date_EndOfDay",e.Date_EndOfMonth="Date_EndOfMonth",e.Date_EndOfQuarter="Date_EndOfQuarter",e.Date_EndOfWeek="Date_EndOfWeek",e.Date_EndOfYear="Date_EndOfYear",e.Date_From="Date_From",e.Date_Latest="Date_Latest",e.Date_Month="Date_Month",e.Date_MonthName="Date_MonthName",e.Date_QuarterOfYear="Date_QuarterOfYear",e.Date_StartOfDay="Date_StartOfDay",e.Date_StartOfMonth="Date_StartOfMonth",e.Date_StartOfQuarter="Date_StartOfQuarter",e.Date_StartOfWeek="Date_StartOfWeek",e.Date_StartOfYear="Date_StartOfYear",e.Date_SubtractDays="Date_SubtractDays",e.Date_WeekOfMonth="Date_WeekOfMonth",e.Date_WeekOfYear="Date_WeekOfYear",e.Date_Year="Date_Year",e.DateTime_Earliest="DateTime_Earliest",e.DateTime_From="DateTime_From",e.DateTime_Latest="DateTime_Latest",e.DateTime_Subtract="DateTime_Subtract",e.DateTime_SubtractDays="DateTime_SubtractDays",e.DateTimeZone_Earliest="DateTimeZone_Earliest",e.DateTimeZone_From="DateTimeZone_From",e.DateTimeZone_Latest="DateTimeZone_Latest",e.DateTimeZone_Subtract="DateTimeZone_Subtract",e.DateTimeZone_SubtractDays="DateTimeZone_SubtractDays",e.DateTimeZone_ToLocal="DateTimeZone_ToLocal",e.Number_Abs="Number_Abs",e.Number_Acos="Number_Acos",e.Number_Asin="Number_Asin",e.Number_Atan="Number_Atan",e.Number_Average="Number_Average",e.Number_Cos="Number_Cos",e.Number_Cube="Number_Cube",e.Number_Divide="Number_Divide",e.Number_Exp="Number_Exp",e.Number_Factorial="Number_Factorial",e.Number_From="Number_From",e.Number_IntegerDivide="Number_IntegerDivide",e.Number_IsEven="Number_IsEven",e.Number_IsOdd="Number_IsOdd",e.Number_Ln="Number_Ln",e.Number_Log10="Number_Log10",e.Number_Maximum="Number_Maximum",e.Number_Median="Number_Median",e.Number_Minimum="Number_Minimum",e.Number_Modulo="Number_Modulo",e.Number_MultiplyColumnAndConstant="Number_MultiplyColumnAndConstant",e.Number_MultiplyColumns="Number_MultiplyColumns",e.Number_PercentOf="Number_PercentOf",e.Number_Power="Number_Power",e.Number_Range="Number_Range",e.Number_Round="Number_Round",e.Number_RoundDown="Number_RoundDown",e.Number_RoundUp="Number_RoundUp",e.Number_Sign="Number_Sign",e.Number_Sin="Number_Sin",e.Number_Sqrt="Number_Sqrt",e.Number_Square="Number_Square",e.Number_StandardDeviation="Number_StandardDeviation",e.Number_Subtract="Number_Subtract",e.Number_SumColumnAndConstant="Number_SumColumnAndConstant",e.Number_SumColumns="Number_SumColumns",e.Number_Tan="Number_Tan",e.Reference="Reference",e.Text_AfterDelimiter="Text_AfterDelimiter",e.Text_BeforeDelimiter="Text_BeforeDelimiter",e.Text_BetweenDelimiters="Text_BetweenDelimiters",e.Text_Combine="Text_Combine",e.Text_End="Text_End",e.Text_Length="Text_Length",e.Text_Literal="Text_Literal",e.Text_Middle="Text_Middle",e.Text_Reference="Text_Reference",e.Text_Remove="Text_Remove",e.Text_Replace="Text_Replace",e.Text_Select="Text_Select",e.Text_Start="Text_Start",e.Time_Earliest="Time_Earliest",e.Time_EndOfHour="Time_EndOfHour",e.Time_From="Time_From",e.Time_Hour="Time_Hour",e.Time_Latest="Time_Latest",e.Time_Minute="Time_Minute",e.Time_Second="Time_Second",e.Time_StartOfHour="Time_StartOfHour",e.Time_Subtract="Time_Subtract"}(Zi||(Zi={})),function(e){e.UnknownError="UnknownError",e.InvalidConnectionProvider="InvalidConnectionProvider"}(Qr||(Qr={})),function(e){e.Adf="Adf",e.CdsA="CdsA",e.Desktop="Desktop",e.DmtsPowerBi="DmtsPowerBi",e.DmtsSa="DmtsSa",e.None="None",e.PowerApps="PowerApps",e.SelfHosted="SelfHosted"}(Jr||(Jr={})),function(e){e.SqlDw="SqlDw",e.SynapseOnDemand="SynapseOnDemand"}(Zr||(Zr={})),function(e){e.Error="Error",e.Warning="Warning"}(Xi||(Xi={})),function(e){e[e.sunday=0]="sunday",e[e.monday=1]="monday",e[e.tuesday=2]="tuesday",e[e.wednesday=3]="wednesday",e[e.thursday=4]="thursday",e[e.friday=5]="friday",e[e.saturday=6]="saturday"}(Mi||(Mi={})),function(e){e.Boolean="Boolean",e.DateAndTime="DateAndTime",e.DateOnly="DateOnly",e.Decimal="Decimal",e.Double="Double",e.Integer="Integer",e.Lookup="Lookup",e.Memo="Memo",e.Money="Money",e.String="String"}(Xr||(Xr={})),function(e){e.Resource="Resource",e.Personal="Personal",e.VirtualNetwork="VirtualNetwork"}(Yr||(Yr={})),function(e){e[e.none=0]="none",e[e.fetchDataSourceDetails=1]="fetchDataSourceDetails",e[e.schemaRowsets=2]="schemaRowsets",e[e.mdDataset=4]="mdDataset",e[e.columnOrdinals=8]="columnOrdinals",e[e.statefulSessions=16]="statefulSessions",e[e.directQuerySingleSignOn_Kerberos=32]="directQuerySingleSignOn_Kerberos",e[e.mashupCustomConnectors=64]="mashupCustomConnectors",e[e.mashupCustomConnectorsForODG=128]="mashupCustomConnectorsForODG",e[e.sapHanaSSOManagedProvider=256]="sapHanaSSOManagedProvider",e[e.filteringMashupExtensionsOnODG=512]="filteringMashupExtensionsOnODG",e[e.certifiedConnectors=1024]="certifiedConnectors",e[e.mashupAzureConnectorsCachingPool=2048]="mashupAzureConnectorsCachingPool",e[e.skipTestConnection=4096]="skipTestConnection",e[e.encryptedConnectionOptionOverride=8192]="encryptedConnectionOptionOverride",e[e.mashupADONetProviderSSO=16384]="mashupADONetProviderSSO",e[e.authTypeSAS=32768]="authTypeSAS",e[e.powerQueryOnlineCachingPool=65536]="powerQueryOnlineCachingPool",e[e.ssoTestConnection=131072]="ssoTestConnection",e[e.mashupIgnorePreviouslyCachedData=262144]="mashupIgnorePreviouslyCachedData",e[e.mashupQueryStatus=524288]="mashupQueryStatus",e[e.multipleResults=1048576]="multipleResults",e[e.renewDiagnosticsStorageAccess=2097152]="renewDiagnosticsStorageAccess",e[e.oAuthResource=4194304]="oAuthResource",e[e.statefulDbConnection=8388608]="statefulDbConnection",e[e.discoverDatasourcesUsingMashupDSR=16777216]="discoverDatasourcesUsingMashupDSR"}(qr||(qr={})),function(e){e.Critical="Critical",e.Error="Error",e.Warning="Warning",e.Informational="Informational",e.Verbose="Verbose"}(si||(si={})),function(e){e[e.connectionNotFound=0]="connectionNotFound",e[e.failedToRefreshConnection=1]="failedToRefreshConnection",e[e.unauthorizedConnection=2]="unauthorizedConnection"}(ci||(ci={})),function(e){e.DifferentUser="DifferentUser",e.NoMatchingConnection="NoMatchingConnection",e.NonOAuthConnection="NonOAuthConnection ",e.NoToken="NoToken"}(bi||(bi={})),function(e){e.Active="ActivePowerAppsEnvironment",e.HardDeleted="HardDeletedPowerAppsEnvironment",e.SoftDeleted="SoftDeletedPowerAppsEnvironment",e.Unknown="UnknownPowerAppsEnvironment"}(Pi||(Pi={})),function(e){e.MappingEditorProperties="MappingEditorProperties"}(wi||(wi={})),function(e){e[e.day=0]="day",e[e.month=1]="month",e[e.quarter=2]="quarter",e[e.year=3]="year"}(Oi||(Oi={})),function(e){e.Minutes="Minutes",e.Hours="Hours",e.Days="Days",e.Weeks="Weeks",e.Months="Months"}(Si||(Si={})),function(e){e[e.uploadFileMalformedMultipartContent=1]="uploadFileMalformedMultipartContent",e[e.uploadFileUnsupportedFileExtension=2]="uploadFileUnsupportedFileExtension",e[e.oAuthStartLoginFailed=3]="oAuthStartLoginFailed",e[e.oAuthFinishLoginFailed=4]="oAuthFinishLoginFailed",e[e.normalizeResourceFailed=8]="normalizeResourceFailed",e[e.editVersionMismatch=9]="editVersionMismatch",e[e.updateGatewayVersion=10]="updateGatewayVersion",e[e.mashupTooLong=11]="mashupTooLong",e[e.gatewayBindingMultipleMatchingGatewayError=12]="gatewayBindingMultipleMatchingGatewayError",e[e.gatewayBindingNoMatchingDataSourceError=13]="gatewayBindingNoMatchingDataSourceError",e[e.gatewayBindingNoMatchingGatewayError=14]="gatewayBindingNoMatchingGatewayError"}(Ei||(Ei={})),function(e){e.NoTextExampleFound="NoTextExampleFound",e.NoTextProgramFound="NoTextProgramFound",e.NoTextProgramFoundBeforeCancellation="NoTextProgramFoundBeforeCancellation",e.NoTextProgramFoundBeforeTimeout="NoTextProgramFoundBeforeTimeout"}(ea||(ea={})),function(e){e.Successful="Successful",e.Failed="Failed",e.SessionExpired="SessionExpired"}(xi||(xi={})),function(e){e.AM="AM",e.PM="PM"}(Di||(Di={})),function(e){e[e.anonymous=1]="anonymous",e[e.basic=2]="basic",e[e.oAuth2=3]="oAuth2",e[e.windows=4]="windows",e[e.key=5]="key",e[e.sas=6]="sas",e[e.servicePrincipal=7]="servicePrincipal"}(Ti||(Ti={})),function(e){e.Access="access",e.ActiveDirectory="activeDirectory",e.AdobeAnalytics="adobeAnalytics",e.AnalysisServices="analysisServices",e.AzureAnalysisServices="azureAnalysisServices",e.AzureBlobs="azureBlobs",e.AzureDataLake="azureDataLake",e.AzureHdInsightHdfs="azureHdInsightHdfs",e.AzureSql="azureSql",e.AzureSqlDw="azureSqlDW",e.AzureTables="azureTables",e.Blank="blank",e.Db2="db2",e.Dynamics365="dynamics365",e.EnterData="enterData",e.Excel="excel",e.ExchangeOnline="exchangeOnline",e.FolderContents="folderContents",e.FolderFiles="folderFiles",e.GoogleAnalytics="googleAnalytics",e.Json="json",e.MySql="mySql",e.Odata="odata",e.Odbc="odbc",e.Oracle="oracle",e.Parquet="parquet",e.Pdf="pdf",e.PostgreSql="postgreSql",e.SharepointFolder="sharepointFolder",e.SharepointList="sharepointList",e.SharepointOnlineList="sharepointOnlineList",e.SalesforceObjects="salesforceObjects",e.SalesforceReports="salesforceReports",e.SapBusinessWarehouseAppServer="SapBusinessWarehouseAppServer",e.SapBusinessWarehouseMessageServer="SapBusinessWarehouseMessageServer",e.SapHanaDatabase="SapHanaDatabase",e.Sql="sql",e.Sybase="sybase",e.Teradata="teradata",e.TextCsv="textCsv",e.Web="web",e.WebApi="webApi",e.Xml="xml"}(Yi||(Yi={})),function(e){e.Automatic="Automatic",e.Explicit="Explicit",e.Fixed="Fixed"}(o||(o={})),function(e){e.Count="Count",e.ErrorCount="ErrorCount",e.NullCount="NullCount",e.DistinctCount="DistinctCount",e.UniqueCount="UniqueCount",e.Min="Min",e.Max="Max",e.ValueDistribution="ValueDistribution",e.Average="Average",e.EmptyStringCount="EmptyStringCount",e.TextLengthDistribution="TextLengthDistribution",e.NaNCount="NaNCount",e.ZeroCount="ZeroCount",e.EvenCount="EvenCount",e.OddCount="OddCount",e.StandardDeviation="StandardDeviation",e.SignDistribution="SignDistribution",e.ParityDistribution="ParityDistribution",e.TrueCount="TrueCount",e.FalseCount="FalseCount",e.YearDistribution="YearDistribution",e.MonthDistribution="MonthDistribution",e.DayDistribution="DayDistribution",e.WeekOfYearDistribution="WeekOfYearDistribution",e.DayOfWeekDistribution="DayOfWeekDistribution",e.AmPmDistribution="AmPmDistribution",e.HourDistribution="HourDistribution"}(M||(M={})),function(e){e.AccessPremiumConnectionNotAllowed="AccessPremiumConnectionNotAllowed",e.AdfConnectionEvaluationError="AdfConnectionEvaluationError",e.CdsaFeatureNotAvailableError="CdsaFeatureNotAvailableError",e.ConnectionApiPolicyViolation="ConnectionApiPolicyViolation",e.ConnectionCouldNotBeCreated="ConnectionCouldNotBeCreated",e.ConnectionCouldNotBeUpdated="ConnectionCouldNotBeUpdated",e.ConnectionKindNotSupported="ConnectionKindNotSupported",e.ConnectionNotFound="ConnectionNotFound",e.ConnectionShareNotAllowedInEnvironment="ConnectionShareNotAllowedInEnvironment",e.DataAccessError="DataAccessError",e.DataflowDatasourceIsReadOnly="DataflowDatasourceIsReadOnly",e.DataSourceUnreachableOrGatewayRequired="DataSourceUnreachableOrGatewayRequired",e.DuplicateDataSourceNameError="DuplicateDataSourceNameError",e.EncryptionNotSupportedForKindAndGateway="EncryptionNotSupportedForKindAndGateway",e.ExceededLimit="ExceededLimit",e.GatewayDetailsNotFound="GatewayDetailsNotFound",e.GatewayNotAuthorized="GatewayNotAuthorized",e.GatewayUnreachable="GatewayUnreachable",e.GatewayUnsupportedByLicense="GatewayUnsupportedByLicense",e.InvalidCredentials="InvalidCredentials",e.InvalidPath="InvalidPath",e.OAuthLoginFailed="OAuthLoginFailed",e.OboSignInError="OboSignInError",e.OboTokenAcquisitionFailed="OboTokenAcquisitionFailed",e.TooManyConnections="TooManyConnections",e.UnknownDmtsError="UnknownDmtsError",e.UnknownError="UnknownError",e.UnknownGatewayError="UnknownGatewayError",e.Unsupported="Unsupported"}(R||(R={})),function(e){e.AddStep="AddStep",e.CreateQuery="CreateQuery",e.DeleteQuery="DeleteQuery",e.ExplainQuery="ExplainQuery",e.ExplainStep="ExplainStep"}(A||(A={})),function(e){e.CouldNotExplainQuery="CouldNotExplainQuery",e.CouldNotGenerateQuery="CouldNotGenerateQuery",e.CouldNotGenerateStep="CouldNotGenerateStep",e.DataItemsMissing="DataItemsMissing",e.LanguageNotSupported="LanguageNotSupported",e.OutOfScope="OutOfScope",e.QueryNotFound="QueryNotFound",e.SkillNotFound="SkillNotFound",e.TableNotFound="TableNotFound",e.Unknown="Unknown"}(D||(D={})),function(e){e.Action="Action",e.Error="Error"}(z||(z={})),function(e){e.Automatic="Automatic",e.Explicit="Explicit",e.Fixed="Fixed"}(_e||(_e={})),function(e){e.Singleton="Singleton",e.Database="Database",e.Uri="Uri",e.Custom="Custom"}(be||(be={})),function(e){e.BuiltIn="BuiltIn",e.Extension="Extension"}(Pe||(Pe={})),function(e){e.JsonDsr="JsonDsr",e.MScript="MScript",e.QueryModel="QueryModel"}(Me||(Me={})),function(e){e.DSR="DSR",e.Reference="Reference",e.Script="Script"}(ve||(ve={})),function(e){e.Cluster="Cluster",e.Database="Database",e.Lakehouse="Lakehouse",e.Object="Object",e.Schema="Schema",e.Server="Server",e.Table="Table",e.Warehouse="Warehouse",e.Workspace="Workspace"}(ke||(ke={})),function(e){e.Constant="Constant",e.Duplicate="Duplicate",e.Empty="Empty",e.Index="Index"}(je||(je={})),function(e){e[e.false=0]="false",e[e.true=1]="true",e[e.notApplicable=2]="notApplicable",e[e.existingConnection=3]="existingConnection"}(yt||(yt={})),function(e){e.ApiHubTokenExchangeFailed="ApiHubTokenExchangeFailed",e.Cancelled="Cancelled",e.DuplicateEvaluationId="DuplicateEvaluationId",e.ErrorGettingPowerBIPrivateLinkConfig="ErrorGettingPowerBIPrivateLinkConfig",e.EvaluationAgentNotFound="EvaluationAgentNotFound",e.EvaluationQuotaReached="EvaluationQuotaReached",e.ExternalServiceError="ExternalServiceError",e.GatewayDetailsNotFound="GatewayDetailsNotFound",e.GatewayNeeded="GatewayNeeded",e.GatewayNotAuthorized="GatewayNotAuthorized",e.GatewayNotFound="GatewayNotFound",e.GatewayUnknownError="GatewayUnknownError",e.GatewayUnreachable="GatewayUnreachable",e.GatewayUpgradeRequired="GatewayUpgradeRequired",e.GatewayUserError="GatewayUserError",e.MashupEntityNotFound="MashupEntityNotFound",e.MaxConcurrentEvaluationsReached="MaxConcurrentEvaluationsReached",e.NetworkAccessDenied="NetworkAccessDenied",e.NoPowerBiClusterForTenant="NoPowerBiClusterForTenant",e.ParameterNotFound="ParameterNotFound",e.PowerAppsEnvironmentNotFound="PowerAppsEnvironmentNotFound",e.QueryNameAndQueryScriptBothSpecified="QueryNameAndQueryScriptBothSpecified",e.QueryNameAndQueryScriptNotSpecified="QueryNameAndQueryScriptNotSpecified",e.QueryNotFound="QueryNotFound",e.StepNotFound="StepNotFound",e.UnableToContactBackend="UnableToContactBackend",e.Unknown="Unknown",e.UnsupportedKind="UnsupportedKind",e.ValueTooComplex="ValueTooComplex"}(Ut||(Ut={})),function(e){e.Path="Path",e.QueryScript="QueryScript"}(Pt||(Pt={})),function(e){e.AutoFilterColumnValues="AutoFilterColumnValues",e.BinaryMetadata="BinaryMetadata",e.ConnectorRows="ConnectorRows",e.ConnectorSchema="ConnectorSchema",e.CubeAllowedValues="CubeAllowedValues",e.CubeDisplayFolders="CubeDisplayFolders",e.CubeParameters="CubeParameters",e.DataSourceQuery="DataSourceQuery",e.DetailsPreview="DetailsPreview",e.DetectTableHeaderAndColumnTypes="DetectTableHeaderAndColumnTypes",e.DsrDetailsFetching="DsrDetailsFetching",e.ExcelTableInferenceGetInferredTables="ExcelTableInferenceGetInferredTables",e.ExpandColumnNames="ExpandColumnNames",e.FunctionBrowser="FunctionBrowser",e.JsonTableInferenceGetJsonText="JsonTableInferenceGetJsonText",e.LoadToCdsCreateEntitiesRelationships="LoadToCdsCreateEntitiesRelationships",e.LoadToCdsRelationships="LoadToCdsRelationships",e.LoadToCdsSchema="LoadToCdsSchema",e.MappingEditorQueryProfiling="MappingEditorQueryProfiling",e.MappingEditorSchemaResult="MappingEditorSchemaResult",e.MappingEditorTypeMetadata="MappingEditorTypeMetadata",e.MashupLoad="MashupLoad",e.MergeMatchAnalysis="MergeMatchAnalysis",e.MergeQueriesPreview="MergeQueriesPreview",e.MergeQueriesSuggestionsLeftCandidatePreview="MergeQueriesSuggestionsLeftCandidatePreview",e.MergeQueriesSuggestionsRightCandidatePreview="MergeQueriesSuggestionsRightCandidatePreview",e.NaturalLanguageValidation="NaturalLanguageValidation",e.NavigatorCubeAllowedValues="NavigatorCubeAllowedValues",e.NavigatorCubeParameters="NavigatorCubeParameters",e.NavigatorCubePreview="NavigatorCubePreview",e.NavigatorDiscoverRelatedTables="NavigatorDiscoverRelatedTables",e.NavigatorPreview="NavigatorPreview",e.NavigatorTemporaryQueryForIndirectionNode="NavigatorTemporaryQueryForIndirectionNode",e.Preview="Preview",e.QueryAnalysis="QueryAnalysis",e.QueryPlan="QueryPlan",e.QuerySanitizer="QuerySanitizer",e.QuerySanitizerAnalysis="QuerySanitizerAnalysis",e.QuerySanitizerQueryAnalysis="QuerySanitizerQueryAnalysis",e.QueryScriptPreview="QueryScriptPreview",e.SemanticEntitySets="SemanticEntitySets",e.SemanticDataGetData="SemanticDataGetData",e.SemanticDataList="SemanticDataList",e.SemanticDataSearchInDataflow="SemanticDataSearchInDataflow",e.SplitColumnInferMultiplePositions="SplitColumnInferMultiplePositions",e.SplitColumnNumberOfColumns="SplitColumnNumberOfColumns",e.StepAnalysis="StepAnalysis",e.TableProfiler="TableProfiler",e.TextByExampleGetText="TextByExampleGetText",e.WebByExampleExecuteSelectors="WebByExampleExecuteSelectors",e.WebByExampleGetHtml="WebByExampleGetHtml"}(Ze||(Ze={})),function(e){e.None="None",e.Any="Any",e.Access="Access",e.Excel="Excel",e.Json="Json",e.TextCsv="TextCsv",e.Pdf="Pdf",e.Xml="Xml"}(wt||(wt={})),function(e){e.List="List"}(It||(It={})),function(e){e.MenuItem="MenuItem",e.Separator="Separator"}(Ct||(Ct={})),function(e){e.Max="Max",e.Mean="Mean",e.Min="Min",e.Mode="Mode",e.RoundedMean="RoundedMean"}(Ht||(Ht={})),function(e){e.Cancelled="Cancelled",e.CombineFiles="CombineFiles",e.CsvTextSettings="CsvTextSettings",e.DataDiscovery="DataDiscovery",e.DataSources="DataSources",e.DataSourceSettings="DataSourceSettings",e.FolderPreview="FolderPreview",e.IncrementalRefreshSettings="IncrementalRefreshSettings",e.Loading="Loading",e.MappingEditor="MappingEditor",e.Navigator="Navigator",e.QueryEditor="QueryEditor",e.QuickCreate="QuickCreate",e.RecentDataPreview="RecentDataPreview",e.RefreshSettings="RefreshSettings",e.TemplateCredentials="TemplateCredentials",e.TemplateParameters="TemplateParameters",e.TextByExample="TextByExample"}(en||(en={})),function(e){e.Database="Database",e.File="File"}(Hn||(Hn={})),function(e){e.AlwaysWhenInferringAllColumnTypes="AlwaysWhenInferringAllColumnTypes",e.BasedOnMetadata="BasedOnMetadata",e.Never="Never"}(Ln||(Ln={})),function(e){e.Always="Always",e.Never="Never",e.HasNewLoadableQueries="HasNewLoadableQueries",e.NumberOfQueries="NumberOfQueries"}(qi||(qi={})),function(e){e.Equals="Equals",e.GreaterThan="GreaterThan",e.GreaterThanOrEqual="GreaterThanOrEqual",e.LessThan="LessThan",e.LessThanOrEqual="LessThanOrEqual"}(ta||(ta={})),function(e){e.Adf="Adf",e.Athena="Athena",e.CdsA="CdsA",e.CdsLite="CdsLite",e.CdsT="CdsT",e.CdsV1="CdsAdHoc",e.CustomerInsights="CustomerInsights",e.CustomerInsightsPPDF="CustomerInsightsPPDF",e.D365TalentInsights="D365TalentInsights",e.DataIntegration="DataIntegration",e.DesktopBootstrap="DesktopBootstrap",e.DesktopUITester="DesktopUITester",e.DmtsPowerBiExperimental="DmtsPowerBiExperimental",e.DmtsSaExperimental="DmtsSaExperimental",e.ExcelDesktop="ExcelDesktop",e.ExcelOnline="ExcelOnline",e.ExcelOnlineDmtsPowerBi="ExcelOnlineDmtsPowerBi",e.Experimental="Experimental",e.Flow="Flow",e.IAPDataflowTemplateReferenceApp="IAPDataflowTemplateReferenceApp",e.IntelligentOrderManagement="IntelligentOrderManagement",e.InternalPortal="InternalPortal",e.KustoViewDesigner="KustoViewDesigner",e.MashupEditorBootstrap="MashupEditorBootstrap",e.PowerAppsTeams="PowerAppsTeams",e.PowerBIDataMart="PowerBIDataMart",e.PowerBIModeling="PowerBIModeling",e.PowerBIModelingDmtsPowerBi="PowerBIModelingDmtsPowerBi",e.PowerBIPaginatedReports="PowerBIPaginatedReports",e.PowerBIPPDF="PowerBIPPDF",e.PowerBIReportView="PowerBIReportView",e.PowerPlatformDataflowAdlsGen2="PowerPlatformDataflowAdlsGen2",e.PowerPlatformDataflowsBootstrap="PowerPlatformDataflowsBootstrap",e.PowerPlatformExperimental="PowerPlatformExperimental",e.PowerQueryDesktop="PowerQueryDesktop",e.ProcessAdvisor="ProcessAdvisor",e.SupplyChainVisibility="SupplyChainVisibility",e.SustainabilityCloud="SustainabilityCloud",e.Synapse="Synapse",e.TridentDataflow="TridentDataflow",e.TridentDataPipeline="TridentDataPipeline",e.TridentDataverseOneLake="TridentDataverseOneLake",e.TridentDataWarehouse="TridentDataWarehouse",e.TridentEventStream="TridentEventStream",e.TridentKusto="TridentKusto",e.TridentLakehouse="TridentLakehouse",e.TridentLakeWarehouse="TridentLakeWarehouse",e.TridentMountedDataWarehouse="TridentMountedDataWarehouse",e.TridentOneLake="TridentOneLake",e.TridentReplicator="TridentReplicator",e.TridentSynapseLink="TridentSynapseLink"}(ba||(ba={})),function(e){e.Boolean="Boolean"}(el||(el={})),function(e){e.NaN="NaN",e.NegativeInfinity="NegativeInfinity",e.PositiveInfinity="PositiveInfinity",e.FormattedNumber="FormattedNumber",e.Number="Number"}(tl||(tl={})),function(e){e.Access="Access",e.ActiveDirectory="ActiveDirectory",e.AdoDotNet="AdoDotNet",e.AdobeAnalytics="AdobeAnalytics",e.AnalysisServices="AnalysisServices",e.AzureBlobs="AzureBlobs",e.AzureDataLakeStorage="AzureDataLakeStorage",e.AzureTables="AzureTables",e.Cdpa="CDPA",e.CurrentWorkbook="CurrentWorkbook",e.DB2="DB2",e.Environment="Environment",e.Essbase="Essbase",e.Exchange="Exchange",e.File="File",e.Folder="Folder",e.Ftp="Ftp",e.GoogleAnalytics="GoogleAnalytics",e.HDInsight="HDInsight",e.Hdfs="Hdfs",e.Informix="Informix",e.MQ="MQ",e.MicrosoftInformationProtection="MicrosoftInformationProtection",e.MySql="MySql",e.OData="OData",e.Odbc="Odbc",e.OleDb="OleDb",e.Oracle="Oracle",e.PostgreSQL="PostgreSQL",e.PowerBIDataflow="PowerBI",e.Python="Python",e.R="R",e.Salesforce="Salesforce",e.SapBusinessWarehouse="SapBusinessWarehouse",e.SapHana="SapHana",e.SharePoint="SharePoint",e.Spark="Spark",e.Sql="SQL",e.Staging="Staging",e.Sybase="Sybase",e.Teradata="Teradata",e.Web="Web"}(nl||(nl={})),function(e){e.TemplateMetadata="Metadata.json",e.MashupDocument="MashupDocument.pq",e.MashupMetadata="MashupMetadata.json"}(ol||(ol={})),function(e){e.GroupNestingLimitReached="GroupNestingLimitReached",e.NullMashupXml="NullMashupXml",e.Unknown="Unknown"}(il||(il={})),function(e){e.CompletedSuccessfully="CompletedSuccessfully",e.CompletedWithExpectedError="CompletedWithExpectedError",e.CompletedWithUnexpectedError="CompletedWithUnexpectedError",e.Started="Started"}(rl||(rl={})),function(e){e.Above="Above",e.Below="Below"}(al||(al={})),function(e){e.ErrorInvokingOpenAiApi="ErrorInvokingOpenAiApi",e.NoProgramFound="NoProgramFound",e.OpenAiApiKeyNotProvided="OpenAiApiKeyNotProvided",e.RequestCanceled="RequestCanceled"}(ll||(ll={})),function(e){e.Ascii="Ascii",e.Utf8="Utf8",e.Utf16="Utf16",e.Windows="Windows"}(sl||(sl={})),function(e){e.Excel="Excel",e.Json="Json",e.Parquet="Parquet",e.Text="Text"}(cl||(cl={})),function(e){e.Colon="Colon",e.Comma="Comma",e.None="None",e.Semicolon="Semicolon",e.Space="Space",e.Tab="Tab"}(ul||(ul={})),function(e){e.Even="Even",e.Odd="Odd"}(dl||(dl={})),function(e){e.None="None",e.Private="Private",e.Organizational="Organizational",e.Public="Public"}(pl||(pl={})),function(e){e.ChangeModes="ChangeModes"}(gl||(gl={})),function(e){e.QueryNeedsToFold="QueryNeedsToFold"}(hl||(hl={})),function(e){e.AzureBlob="AzureBlob",e.Database="Database"}(ml||(ml={})),function(e){e.DynamicPlanFolded="DynamicPlanFolded",e.DynamicPlanMightFold="DynamicPlanMightFold",e.DynamicPlanNotFolded="DynamicPlanNotFolded",e.DynamicPlanOpaque="DynamicPlanOpaque",e.ErrorRetrievingPlan="ErrorRetrievingPlan",e.FoldedQueryNotImplemented="FoldedQueryNotImplemented",e.FoldedQueryNull="FoldedQueryNull",e.FoldedWithQuery="FoldedWithQuery",e.NotFolded="NotFolded",e.NotFoldedPrivacyBuffering="NotFoldedPrivacyBuffering",e.NotTable="NotTable",e.OpaqueConstant="OpaqueConstant",e.UnexpectedPlanKind="UnexpectedPlanKind"}(fl||(fl={})),function(e){e.ActiveDirectory="ActiveDirectory",e.AdobeAnalytics="AdobeAnalytics",e.AmazonRedshift="AmazonRedshift",e.AnalysisServices="AnalysisServices",e.AzureAnalysisServices="AzureAnalysisServices",e.AzureBlobs="AzureBlobs",e.AzureDataExplorer="AzureDataExplorer",e.AzureDataLakeStorage="AzureDataLakeStorage",e.AzureTables="AzureTables",e.AIFunctions="AIFunctions",e.AIInsights="AIInsights",e.AzureMLFunctions="AzureMLFunctions",e.AIInsightsInProc="AIInsightsInProc",e.Cds="Cds",e.CommonDataService="CommonDataService",e.DataLake="DataLake",e.Dataverse="Dataverse",e.DB2="DB2",e.ElasticSearch="ElasticSearch",e.Exchange="Exchange",e.Fhir="Fhir",e.File="File",e.Folder="Folder",e.GoogleAnalytics="GoogleAnalytics",e.GoogleBigQuery="GoogleBigQuery",e.HDInsight="HDInsight",e.Impala="Impala",e.Kusto="Kusto",e.Lakehouse="Lakehouse",e.MySql="MySql",e.OData="OData",e.Odbc="Odbc",e.Oracle="Oracle",e.OracleERP="OracleERP",e.PostgreSQL="PostgreSQL",e.PowerBI="PowerBI",e.PowerBIDatamarts="PowerBIDatamarts",e.PowerPlatformDataflows="PowerPlatformDataflows",e.PQGenericInvokeTestExtension="PQGenericInvokeTestExtension",e.Salesforce="Salesforce",e.SapBusinessWarehouse="SapBusinessWarehouse",e.SAPERP="SAPERP",e.SapHana="SapHana",e.SharePoint="SharePoint",e.Snowflake="Snowflake",e.Spark="Spark",e.SQL="SQL",e.Sybase="Sybase",e.Teradata="Teradata",e.Vertica="Vertica",e.Warehouse="Warehouse",e.Web="Web"}(vl||(vl={})),function(e){e.CompilationError="CompilationError",e.InvalidQueryName="InvalidQueryName",e.ParsingError="ParsingError",e.Success="Success",e.UnexpectedDocumentKind="UnexpectedDocumentKind"}(_l||(_l={})),function(e){e.Failure="Failure",e.Success="Success"}(Cl||(Cl={})),function(e){e[e.endpointNotAvailableInRegion=0]="endpointNotAvailableInRegion",e[e.httpError=1]="httpError",e[e.invalidInput=2]="invalidInput",e[e.maxRetriesReached=3]="maxRetriesReached",e[e.modelError=4]="modelError"}(yl||(yl={})),function(e){e.Error="Error",e.Ok="Ok"}(Ml||(Ml={})),function(e){e.Default="Default",e.FastCopy="FastCopy"}(bl||(bl={})),function(e){e.ConnectionsAuthorizationFailed="ConnectionsAuthorizationFailed",e.DuplicateQueryId="DuplicateQueryId",e.DuplicateQueryName="DuplicateQueryName",e.DuplicateStepName="DuplicateStepName",e.InvalidQueryName="InvalidQueryName",e.MashupDocumentNotASectionDocument="MashupDocumentNotASectionDocument",e.ParsingError="ParsingError",e.UnexpectedQueryIdFormat="UnexpectedQueryIdFormat"}(Pl||(Pl={})),function(e){e.Custom="Custom",e.DropColumn="DropColumn",e.DropBlankRows="DropBlankRows",e.DropDuplicates="DropDuplicates",e.FillColumn="FillColumn",e.SplitColumn="SplitColumn",e.UnpivotColumns="UnpivotColumns",e.UnpivotOtherColumns="UnpivotOtherColumns"}(wl||(wl={})),function(e){e.Column="Column",e.ColumnType="ColumnType",e.Count="Count",e.ErrorCount="ErrorCount",e.NullCount="NullCount",e.DistinctCount="DistinctCount",e.UniqueCount="UniqueCount",e.Min="Min",e.Max="Max",e.ValueDistribution="ValueDistribution",e.Average="Average",e.EmptyStringCount="EmptyStringCount",e.TextLengthDistribution="TextLengthDistribution",e.NaNCount="NaNCount",e.ZeroCount="ZeroCount",e.EvenCount="EvenCount",e.OddCount="OddCount",e.StandardDeviation="StandardDeviation",e.SignDistribution="SignDistribution",e.ParityDistribution="ParityDistribution",e.TrueCount="TrueCount",e.FalseCount="FalseCount",e.YearDistribution="YearDistribution",e.MonthDistribution="MonthDistribution",e.DayDistribution="DayDistribution",e.WeekOfYearDistribution="WeekOfYearDistribution",e.DayOfWeekDistribution="DayOfWeekDistribution",e.AmPmDistribution="AmPmDistribution",e.HourDistribution="HourDistribution"}(Ol||(Ol={})),function(e){e.AppendRows="AppendRows",e.ReplaceRows="ReplaceRows",e.UpsertRows="UpsertRows"}(Sl||(Sl={})),function(e){e.SelectRows="SelectRows",e.Sort="Sort",e.SelectColumns="SelectColumns",e.RenameColumns="RenameColumns",e.AddColumn="AddColumn",e.ReplaceColumns="ReplaceColumns",e.ReplaceRows="ReplaceRows",e.AddRows="AddRows",e.SplitColumn="SplitColumn",e.ReplaceTable="ReplaceTable"}(El||(El={})),function(e){e.InvocationPattern="InvocationPattern",e.Script="Script"}(xl||(xl={})),function(e){e.DataSourceTag="DataSourceTag",e.QueryEditorMessageBar="QueryEditorMessageBar",e.QuickCreateForm="QuickCreateForm",e.WebByExampleForm="WebByExampleForm"}(Dl||(Dl={})),function(e){e.Append="Append",e.Replace="Replace"}(Tl||(Tl={})),function(e){e.CompilationError="CompilationError",e.ParsingError="ParsingError",e.Success="Success",e.UnexpectedDocumentKind="UnexpectedDocumentKind"}(Il||(Il={})),function(e){e.Link="Link",e.Text="Text"}(Rl||(Rl={}))},69903:function(ct,Ge,n){"use strict";n.d(Ge,{p:function(){return c}});var t=n(37419),i=n(47875),w=n(96721),a={leading:!0,trailing:!1};function c(m,k,O){return void 0===k&&(k=w.P),void 0===O&&(O=a),function(s){return s.lift(new y(m,k,O.leading,O.trailing))}}var y=function(){function m(O,s,ne,ee){this.duration=O,this.scheduler=s,this.leading=ne,this.trailing=ee}return m.prototype.call=function(s,ne){return ne.subscribe(new r(s,this.duration,this.scheduler,this.leading,this.trailing))},m}(),r=function(m){function k(s,ne,ee,Z,v){var E;return(E=m.call(this,s)||this).duration=ne,E.scheduler=ee,E.leading=Z,E.trailing=v,E._hasTrailingValue=!1,E._trailingValue=null,E}(0,t.Z)(k,m);var O=k.prototype;return O._next=function(ne){this.throttled?this.trailing&&(this._trailingValue=ne,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(C,this.duration,{subscriber:this})),this.leading?this.destination.next(ne):this.trailing&&(this._trailingValue=ne,this._hasTrailingValue=!0))},O._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},O.clearThrottle=function(){var ne=this.throttled;ne&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),ne.unsubscribe(),this.remove(ne),this.throttled=null)},k}(i.L);function C(m){m.subscriber.clearThrottle()}},9629:function(ct,Ge,n){"use strict";n.r(Ge),n.d(Ge,{MobileGoalsUIModule:function(){return Ao}});var t=n(50423),i=n(77476);function w(lt,mt){1&lt&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275namespaceSVG(),t.\u0275\u0275elementStart(1,"svg",2)(2,"defs")(3,"style"),t.\u0275\u0275text(4," .cls-1 { fill: url(#linear-gradient); } .cls-1, .cls-2, .cls-3, .cls-4, .cls-5, .cls-6, .cls-7 { fill-rule: evenodd; } .cls-8, .cls-5 { fill: #075552; } .cls-9 { fill: #13836f; } .cls-10 { fill: #2e675a; } .cls-11, .cls-4 { fill: #7ae4d6; } .cls-12 { fill: rgba(19, 131, 111, .6); } .cls-2 { fill: rgba(19, 131, 111, .8); } .cls-13 { fill: url(#linear-gradient-3); } .cls-14 { fill: url(#linear-gradient-4); } .cls-3 { fill: #2aab93; } .cls-15 { fill: #fff; filter: url(#drop-shadow-27); } .cls-6 { fill: url(#linear-gradient-2); } .cls-7 { fill: url(#linear-gradient-5); } "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"linearGradient",3),t.\u0275\u0275element(6,"stop",4)(7,"stop",5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"linearGradient",6),t.\u0275\u0275element(9,"stop",7)(10,"stop",8),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(11,"linearGradient",9),t.\u0275\u0275element(12,"stop",4)(13,"stop",5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(14,"linearGradient",10),t.\u0275\u0275element(15,"stop",4)(16,"stop",5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(17,"filter",11),t.\u0275\u0275element(18,"feOffset",12)(19,"feGaussianBlur",13)(20,"feFlood",14)(21,"feComposite",15)(22,"feComposite",16),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(23,"linearGradient",17),t.\u0275\u0275element(24,"stop",18)(25,"stop",19),t.\u0275\u0275elementEnd()(),t.\u0275\u0275element(26,"path",20)(27,"path",21)(28,"path",22)(29,"path",23)(30,"path",24)(31,"path",25)(32,"path",26)(33,"path",27)(34,"rect",28)(35,"path",29)(36,"rect",30)(37,"rect",31)(38,"rect",32)(39,"rect",33)(40,"rect",34)(41,"rect",35)(42,"path",36)(43,"path",37)(44,"path",38)(45,"path",39)(46,"path",40)(47,"path",41)(48,"path",42)(49,"path",43)(50,"path",44)(51,"path",45)(52,"path",46)(53,"path",47)(54,"path",48)(55,"path",49),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd())}function a(lt,mt){1&lt&&(t.\u0275\u0275namespaceSVG(),t.\u0275\u0275elementStart(0,"svg",50)(1,"defs")(2,"style"),t.\u0275\u0275text(3," .cls-1 { fill: url(#linear-gradient); } .cls-1, .cls-2, .cls-3, .cls-4, .cls-5, .cls-6, .cls-7 { fill-rule: evenodd; } .cls-8 { fill: none; stroke: #ff7900; stroke-miterlimit: 10; stroke-width: 30px; } .cls-9 { fill: #aeaeae; } .cls-10, .cls-5 { fill: #075552; } .cls-11, .cls-4 { fill: #13826f; } .cls-12, .cls-3 { fill: #7ae3d5; } .cls-13 { fill: rgba(19, 130, 111, .6); } .cls-2 { fill: rgba(19, 130, 111, .8); } .cls-14 { fill: url(#linear-gradient-3); } .cls-15 { fill: url(#linear-gradient-4); } .cls-16 { fill: #fff; filter: url(#drop-shadow-40); } .cls-6 { fill: url(#linear-gradient-2); } .cls-7 { fill: url(#linear-gradient-5); } "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"linearGradient",51),t.\u0275\u0275element(5,"stop",4)(6,"stop",5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"linearGradient",52),t.\u0275\u0275element(8,"stop",53)(9,"stop",54),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"linearGradient",55),t.\u0275\u0275element(11,"stop",4)(12,"stop",5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(13,"linearGradient",56),t.\u0275\u0275element(14,"stop",4)(15,"stop",5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(16,"filter",57),t.\u0275\u0275element(17,"feOffset",12)(18,"feGaussianBlur",13)(19,"feFlood",14)(20,"feComposite",15)(21,"feComposite",16),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(22,"linearGradient",58),t.\u0275\u0275element(23,"stop",18)(24,"stop",19),t.\u0275\u0275elementEnd()(),t.\u0275\u0275element(25,"path",59)(26,"path",60)(27,"path",61)(28,"path",62)(29,"path",63)(30,"path",64)(31,"path",65)(32,"path",66)(33,"path",67)(34,"path",68)(35,"path",69)(36,"path",70)(37,"path",71)(38,"path",72)(39,"path",73)(40,"path",74)(41,"path",75)(42,"rect",76)(43,"path",77)(44,"rect",78)(45,"rect",79)(46,"rect",80)(47,"rect",81)(48,"rect",82)(49,"rect",83)(50,"path",84)(51,"path",85)(52,"path",86)(53,"path",87)(54,"path",88)(55,"path",89)(56,"path",90)(57,"rect",91),t.\u0275\u0275elementEnd())}var d=function(){function lt(){this.isDarkMode=!1}return lt.\u0275fac=function(Ke){return new(Ke||lt)},lt.\u0275cmp=t.\u0275\u0275defineComponent({type:lt,selectors:[["mobile-empty-scorecard-svg"]],inputs:{isDarkMode:"isDarkMode"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["lightSvg",""],["width","240","height","200","id","Layer_1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","viewBox","0 0 241 193"],["id","linear-gradient","x1","137.45","y1","818.81","x2","137.45","y2","712.81","gradientTransform","translate(0 905.81) scale(1 -1)","gradientUnits","userSpaceOnUse"],["offset","0","stop-color","#fff","stop-opacity",".5"],["offset","1","stop-color","#fff"],["id","linear-gradient-2","x1","137.45","y1","746.81","x2","137.45","y2","788.81","gradientTransform","translate(0 905.81) scale(1 -1)","gradientUnits","userSpaceOnUse"],["offset","0","stop-color","#13836f","stop-opacity",".5"],["offset","1","stop-color","#13836f"],["id","linear-gradient-3","x1","48.45","y1","772.81","x2","48.45","y2","712.81","gradientTransform","translate(0 905.81) scale(1 -1)","gradientUnits","userSpaceOnUse"],["id","linear-gradient-4","x1","209.45","y1","781.81","x2","209.45","y2","712.81","gradientTransform","translate(0 905.81) scale(1 -1)","gradientUnits","userSpaceOnUse"],["id","drop-shadow-27","filterUnits","userSpaceOnUse"],["dx","-5.67","dy","2.83"],["result","blur","stdDeviation","2.83"],["flood-color","#000","flood-opacity",".15"],["in2","blur","operator","in"],["in","SourceGraphic"],["id","linear-gradient-5","x1","173.95","y1","832.26","x2","173.95","y2","809.39","gradientTransform","translate(0 905.81) scale(1 -1)","gradientUnits","userSpaceOnUse"],["offset","0","stop-color","#075552","stop-opacity",".5"],["offset","1","stop-color","#075552"],["d","M120.45,0C54.18,0,.45,53.73,.45,120c0,27.47,9.23,52.78,24.75,73H215.7c15.52-20.22,24.75-45.53,24.75-73C240.45,53.73,186.72,0,120.45,0ZM46.45,118c-1.1,0-2-.9-2-2s.9-2,2-2,2,.9,2,2-.9,2-2,2Zm21-27c-.44-3.11-2.89-5.56-6-6,3.11-.44,5.56-2.89,6-6,.44,3.11,2.89,5.56,6,6-3.11,.44-5.56,2.89-6,6Zm46-19c-.74-5.19-4.82-9.26-10-10,5.18-.74,9.26-4.81,10-10,.74,5.19,4.82,9.26,10,10-5.18,.74-9.26,4.81-10,10Zm24-36c-.89-6.22-5.78-11.11-12-12,6.22-.89,11.11-5.78,12-12,.89,6.22,5.78,11.11,12,12-6.22,.89-11.11,5.78-12,12Zm34,13c-1.1,0-2-.9-2-2s.9-2,2-2,2,.9,2,2-.9,2-2,2Zm33,67c-.44-3.11-2.89-5.56-6-6,3.11-.45,5.56-2.89,6-6,.45,3.11,2.89,5.55,6,6-3.11,.44-5.55,2.89-6,6Z",1,"cls-3"],["d","M96.45,87h82v106H96.45V87Z",1,"cls-1"],["d","M115.45,117h-6v42h6v-42Zm10,17h-6v25h6v-25Zm4,12h6v13h-6v-13Zm16,1h-6v12h6v-12Zm4,4h6v8h-6v-8Zm16,4h-6v4h6v-4Z",1,"cls-6"],["d","M105.45,160c-.26,0-.51-.1-.71-.29-.39-.39-.39-1.02,0-1.41l9.59-9.59c1.17-1.17,3.07-1.17,4.24,0l4.17,4.17c.39,.39,1.02,.39,1.41,0l19.17-19.17c1.17-1.17,3.07-1.17,4.24,0l4.17,4.17c.39,.39,1.02,.39,1.41,0l15.59-15.59c.39-.39,1.02-.39,1.41,0s.39,1.02,0,1.41l-15.59,15.59c-1.17,1.17-3.07,1.17-4.24,0l-4.17-4.17c-.39-.39-1.02-.39-1.41,0l-19.17,19.17c-1.17,1.17-3.07,1.17-4.24,0l-4.17-4.17c-.39-.39-1.02-.39-1.41,0l-9.59,9.59c-.2,.2-.45,.29-.71,.29Z",1,"cls-8"],["d","M122.45,107h-16c-.55,0-1-.45-1-1s.45-1,1-1h16c.55,0,1,.45,1,1s-.45,1-1,1Z",1,"cls-10"],["d","M130.45,99h-24c-.55,0-1-.45-1-1s.45-1,1-1h24c.55,0,1,.45,1,1s-.45,1-1,1Z",1,"cls-10"],["d","M166.45,107h-24c-.55,0-1-.45-1-1s.45-1,1-1h24c.55,0,1,.45,1,1s-.45,1-1,1Z",1,"cls-10"],["d","M162.45,99h-20c-.55,0-1-.45-1-1s.45-1,1-1h20c.55,0,1,.45,1,1s-.45,1-1,1Z",1,"cls-10"],["x","8.45","y","133","width","80","height","60",1,"cls-13"],["d","M80.45,184H16.45c-.55,0-1-.45-1-1v-40c0-.55,.45-1,1-1s1,.45,1,1v39h63c.55,0,1,.45,1,1s-.45,1-1,1Z",1,"cls-9"],["x","21.45","y","166","width","8","height","16",1,"cls-11"],["x","29.45","y","152","width","8","height","30",1,"cls-12"],["x","49.45","y","155","width","8","height","27",1,"cls-12"],["x","41.45","y","143","width","8","height","39",1,"cls-11"],["x","69.45","y","172","width","8","height","10",1,"cls-12"],["x","61.45","y","160","width","8","height","22",1,"cls-11"],["d","M232.45,124h-46v69h46V124Z",1,"cls-14"],["d","M210.45,165h6v18h-6v-18Zm-2,2h-6v16h6v-16Zm-8,10h-6v6h6v-6Zm24-6h-6v12h6v-12Z",1,"cls-4"],["d","M173.45,112c13.81,0,25-11.19,25-25s-11.19-25-25-25-25,11.19-25,25,11.19,25,25,25Z",1,"cls-15"],["d","M163.79,74.47c0-1.13-.97-2.04-2.17-2.04-.06,0-.11,0-.17,0-.05,0-.1,0-.15,0-1.02,0-1.85,.84-1.85,1.88v2.69c0,5.67,3.76,10.51,8.91,11.81,.76,.88,1.64,1.66,2.61,2.31l1.13,.76-.37,.37c-.31,.31-.48,.73-.48,1.17s.17,.86,.48,1.17l.37,.37c0,1.33-.82,2.53-2.05,3l-3.03,1.15c-.19,.07-.32,.26-.32,.46v2.73h-.17c-.09,0-.17,.08-.17,.17v1.19h15.18v-1.19c0-.1-.08-.17-.17-.17h-.17v-2.73c0-.21-.12-.39-.32-.46l-3.03-1.15c-1.23-.47-2.05-1.66-2.05-3l.37-.37c.31-.31,.48-.73,.48-1.17s-.17-.86-.48-1.17l-.37-.37,1.12-.76c.97-.65,1.85-1.43,2.61-2.31,5.15-1.31,8.91-6.14,8.91-11.81v-2.53s0-.03,0-.04v-.12c0-1.04-.83-1.88-1.85-1.88-.05,0-.1,0-.15,0-.06,0-.11,0-.17,0-1.2,0-2.17,.91-2.17,2.04v.92c0,.63-.39,1.18-.96,1.44l.09-.98c.19,0,.34-.15,.34-.34s-.15-.34-.34-.34h-18.55c-.19,0-.34,.15-.34,.34s.15,.34,.34,.34l.08,.98c-.57-.26-.96-.81-.96-1.44v-.92Zm3.45,12.86c-3.89-1.63-6.68-5.61-6.68-10.33v-2.53c0-.55,.47-.99,1.06-.99s1.06,.44,1.06,.99v.92c0,1.25,.93,2.3,2.18,2.58l.27,3.19c.15,1.68,.6,3.32,1.35,4.83,.23,.47,.49,.92,.77,1.35Zm15.79-9.37l-.27,3.19c-.14,1.68-.6,3.32-1.35,4.83-.23,.47-.49,.92-.77,1.35,3.89-1.63,6.68-5.61,6.68-10.33v-2.53c0-.55-.47-.99-1.06-.99s-1.06,.44-1.06,.99v.92c0,1.25-.93,2.3-2.18,2.58Z",1,"cls-7"],["d","M113.45,183c3.87,0,7-3.13,7-7s-3.13-7-7-7-7,3.13-7,7,3.13,7,7,7Z",1,"cls-2"],["d","M113.45,169v7h7c0-3.87-3.13-7-7-7Z",1,"cls-4"],["d","M137.45,183c3.87,0,7-3.13,7-7s-3.13-7-7-7-7,3.13-7,7,3.13,7,7,7Z",1,"cls-2"],["d","M137.45,169c-3.87,0-7,3.13-7,7h7v-7Z",1,"cls-11"],["d","M137.45,169v7h7c0-3.87-3.13-7-7-7Z",1,"cls-5"],["d","M161.45,183c3.87,0,7-3.13,7-7s-3.13-7-7-7-7,3.13-7,7,3.13,7,7,7Z",1,"cls-2"],["d","M167.38,179.71c.67-1.08,1.07-2.34,1.07-3.71,0-3.87-3.13-7-7-7v7l5.93,3.71Z",1,"cls-4"],["d","M209.45,158c6.63,0,12-5.37,12-12s-5.37-12-12-12-12,5.37-12,12,5.37,12,12,12Zm0-8c2.21,0,4-1.79,4-4s-1.79-4-4-4-4,1.79-4,4,1.79,4,4,4Z",1,"cls-2"],["d","M213.14,144.46l7.39-3.08c-1.81-4.34-6.09-7.38-11.08-7.38v8c1.66,0,3.09,1.02,3.69,2.46Z",1,"cls-4"],["d","M198.07,142.21l7.6,2.53c.53-1.59,2.01-2.74,3.78-2.74v-8c-5.3,0-9.79,3.44-11.38,8.21Z",1,"cls-5"],["width","240","height","200","id","Layer_1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","viewBox","0 0 240 193"],["id","linear-gradient","x1","137","y1","-2370.61","x2","137","y2","-2476.81","gradientTransform","translate(0 -2283.61) scale(1 -1)","gradientUnits","userSpaceOnUse"],["id","linear-gradient-2","x1","137","y1","-2442.61","x2","137","y2","-2400.61","gradientTransform","translate(0 -2283.61) scale(1 -1)","gradientUnits","userSpaceOnUse"],["offset","0","stop-color","#13826f","stop-opacity",".5"],["offset","1","stop-color","#13826f"],["id","linear-gradient-3","x1","48","y1","-2416.7","x2","48","y2","-2476.81","gradientTransform","translate(0 -2283.61) scale(1 -1)","gradientUnits","userSpaceOnUse"],["id","linear-gradient-4","x1","209","y1","-2407.68","x2","209","y2","-2476.81","gradientTransform","translate(0 -2283.61) scale(1 -1)","gradientUnits","userSpaceOnUse"],["id","drop-shadow-40","filterUnits","userSpaceOnUse"],["id","linear-gradient-5","x1","173.5","y1","-2357.16","x2","173.5","y2","-2380.03","gradientTransform","translate(0 -2283.61) scale(1 -1)","gradientUnits","userSpaceOnUse"],["d","m88,133H8v60h80v-60Z",1,"cls-9"],["d","m232,124h-46v69h46v-69Z",1,"cls-9"],["d","m120,0C53.73,0,0,53.73,0,120c0,27.47,9.23,52.78,24.75,73h190.5c15.52-20.22,24.75-45.53,24.75-73C240,53.73,186.27,0,120,0ZM46,118c-1.1,0-2-.9-2-2s.9-2,2-2,2,.9,2,2-.9,2-2,2Zm21-27c-.44-3.11-2.89-5.56-6-6,3.11-.44,5.56-2.89,6-6,.44,3.11,2.89,5.56,6,6-3.11.44-5.56,2.89-6,6Zm46-19c-.74-5.19-4.82-9.26-10-10,5.18-.74,9.26-4.81,10-10,.74,5.19,4.82,9.26,10,10-5.18.74-9.26,4.81-10,10Zm24-36c-.89-6.22-5.78-11.11-12-12,6.22-.89,11.11-5.78,12-12,.89,6.22,5.78,11.11,12,12-6.22.89-11.11,5.78-12,12Zm34,13c-1.1,0-2-.9-2-2s.9-2,2-2,2,.9,2,2-.9,2-2,2Zm33,67c-.44-3.11-2.89-5.56-6-6,3.11-.45,5.56-2.89,6-6,.45,3.11,2.89,5.55,6,6-3.11.44-5.55,2.89-6,6Z",1,"cls-4"],["d","m96,87h82v106.2h-82v-106.2Z",1,"cls-1"],["d","m115,117h-6v42h6v-42Zm10,17h-6v25h6v-25Zm4,12h6v13h-6v-13Zm16,1h-6v12h6v-12Zm4,4h6v8h-6v-8Zm16,4h-6v4h6v-4Z",1,"cls-6"],["d","m105,160c-.26,0-.51-.1-.71-.29-.39-.39-.39-1.02,0-1.41l9.59-9.59c1.13-1.13,3.11-1.13,4.24,0l4.17,4.17c.39.39,1.02.39,1.41,0l19.17-19.17c1.17-1.17,3.07-1.17,4.24,0l4.17,4.17c.39.39,1.02.39,1.41,0l15.59-15.59c.39-.39,1.02-.39,1.41,0s.39,1.02,0,1.41l-15.59,15.59c-1.17,1.17-3.07,1.17-4.24,0l-4.17-4.17c-.39-.39-1.02-.39-1.41,0l-19.17,19.17c-1.17,1.17-3.07,1.17-4.24,0l-4.17-4.17c-.38-.38-1.04-.38-1.41,0l-9.59,9.59c-.2.2-.45.29-.71.29Z",1,"cls-10"],["d","m113,183c3.87,0,7-3.13,7-7s-3.13-7-7-7-7,3.13-7,7,3.13,7,7,7Z",1,"cls-2"],["d","m113,169v7h7c0-3.87-3.13-7-7-7Z",1,"cls-3"],["d","m137,183c3.87,0,7-3.13,7-7s-3.13-7-7-7-7,3.13-7,7,3.13,7,7,7Z",1,"cls-2"],["d","m137,169c-3.87,0-7,3.13-7,7h7v-7Z",1,"cls-12"],["d","m137,169v7h7c0-3.87-3.13-7-7-7Z",1,"cls-5"],["d","m161,183c3.87,0,7-3.13,7-7s-3.13-7-7-7-7,3.13-7,7,3.13,7,7,7Z",1,"cls-2"],["d","m166.93,179.71c.67-1.08,1.07-2.34,1.07-3.71,0-3.87-3.13-7-7-7v7l5.93,3.71Z",1,"cls-3"],["d","m122,107h-16c-.55,0-1-.45-1-1s.45-1,1-1h16c.55,0,1,.45,1,1s-.45,1-1,1Z",1,"cls-11"],["d","m130,99h-24c-.55,0-1-.45-1-1s.45-1,1-1h24c.55,0,1,.45,1,1s-.45,1-1,1Z",1,"cls-11"],["d","m166,107h-24c-.55,0-1-.45-1-1s.45-1,1-1h24c.55,0,1,.45,1,1s-.45,1-1,1Z",1,"cls-11"],["d","m162,99h-20c-.55,0-1-.45-1-1s.45-1,1-1h20c.55,0,1,.45,1,1s-.45,1-1,1Z",1,"cls-11"],["x","8","y","133.08","width","80","height","60.11",1,"cls-14"],["d","m80,184H16c-.55,0-1-.45-1-1v-40c0-.55.45-1,1-1s1,.45,1,1v39h63c.55,0,1,.45,1,1s-.45,1-1,1Z",1,"cls-11"],["x","21","y","166","width","8","height","16",1,"cls-12"],["x","29","y","152","width","8","height","30",1,"cls-13"],["x","49","y","155","width","8","height","27",1,"cls-13"],["x","41","y","143","width","8","height","39",1,"cls-12"],["x","69","y","172","width","8","height","10",1,"cls-13"],["x","61","y","160","width","8","height","22",1,"cls-12"],["d","m232,124.07h-46v69.13h46v-69.13Z",1,"cls-15"],["d","m210,165h6v18h-6v-18Zm-2,2h-6v16h6v-16Zm-8,10h-6v6h6v-6Zm24-6h-6v12h6v-12Z",1,"cls-3"],["d","m209,158c6.63,0,12-5.37,12-12s-5.37-12-12-12-12,5.37-12,12,5.37,12,12,12Zm0-8c2.21,0,4-1.79,4-4s-1.79-4-4-4-4,1.79-4,4,1.79,4,4,4Z",1,"cls-2"],["d","m212.69,144.46l7.39-3.08c-1.81-4.34-6.09-7.38-11.08-7.38v8c1.66,0,3.09,1.02,3.69,2.46Z",1,"cls-3"],["d","m197.62,142.21l7.6,2.53c.53-1.59,2.01-2.74,3.78-2.74v-8c-5.3,0-9.79,3.44-11.38,8.21Z",1,"cls-5"],["d","m173,112c13.81,0,25-11.19,25-25s-11.19-25-25-25-25,11.19-25,25,11.19,25,25,25Z",1,"cls-16"],["d","m163.34,74.47c0-1.13-.97-2.04-2.17-2.04-.06,0-.11,0-.17,0-.05,0-.1,0-.15,0-1.02,0-1.85.84-1.85,1.88v2.69c0,5.67,3.76,10.51,8.91,11.81.76.88,1.64,1.66,2.61,2.31l1.13.76-.37.37c-.31.31-.48.73-.48,1.17s.17.86.48,1.17l.37.37c0,1.33-.82,2.53-2.05,3l-3.03,1.15c-.19.07-.32.26-.32.46v2.73h-.17c-.09,0-.17.08-.17.17v1.19h15.18v-1.19c0-.1-.08-.17-.17-.17h-.17v-2.73c0-.21-.12-.39-.32-.46l-3.03-1.15c-1.23-.47-2.05-1.66-2.05-3l.37-.37c.31-.31.48-.73.48-1.17s-.17-.86-.48-1.17l-.37-.37,1.12-.76c.97-.65,1.85-1.43,2.61-2.31,5.15-1.31,8.91-6.14,8.91-11.81v-2.53s0-.03,0-.04v-.12c0-1.04-.83-1.88-1.85-1.88-.05,0-.1,0-.15,0-.06,0-.11,0-.17,0-1.2,0-2.17.91-2.17,2.04v.92c0,.63-.39,1.18-.96,1.44l.09-.98c.19,0,.34-.15.34-.34s-.15-.34-.34-.34h-18.55c-.19,0-.34.15-.34.34s.15.34.34.34l.08.98c-.57-.26-.96-.81-.96-1.44v-.92Zm3.45,12.86c-3.89-1.63-6.68-5.61-6.68-10.33v-2.53c0-.55.47-.99,1.06-.99s1.06.44,1.06.99v.92c0,1.25.93,2.3,2.18,2.58l.27,3.19c.15,1.68.6,3.32,1.35,4.83.23.47.49.92.77,1.35Zm15.79-9.37l-.27,3.19c-.14,1.68-.6,3.32-1.35,4.83-.23.47-.49.92-.77,1.35,3.89-1.63,6.68-5.61,6.68-10.33v-2.53c0-.55-.47-.99-1.06-.99s-1.06.44-1.06.99v.92c0,1.25-.93,2.3-2.18,2.58Z",1,"cls-7"],["x","-5259.06","y","-3166.83","width","11252.64","height","4031.82",1,"cls-8"]],template:function(Ke,bt){if(1&Ke&&(t.\u0275\u0275template(0,w,56,0,"ng-container",0),t.\u0275\u0275template(1,a,58,0,"ng-template",null,1,t.\u0275\u0275templateRefExtractor)),2&Ke){var ht=t.\u0275\u0275reference(2);t.\u0275\u0275property("ngIf",bt.isDarkMode)("ngIfElse",ht)}},dependencies:[i.NgIf],encapsulation:2}),lt}(),p=n(62831),l=n(31459),c=n(78364),y=n(59968),r=n(85102),C=function(){function lt(mt,Ke){this.goalsActionService=mt,this.scorecardApplicationApiService=Ke}return lt.prototype.ngAfterViewInit=function(){this.goalsActionService.invokeToNativeScorecardLoaded({scorecard:this.scorecard}),this.scorecardApplicationApiService.deferredScorecardLoadedTelemetryEvent.resolve()},Object.defineProperty(lt.prototype,"isDarkMode",{get:function(){return p.q.isDarkMode()},enumerable:!1,configurable:!0}),lt.\u0275fac=function(Ke){return new(Ke||lt)(t.\u0275\u0275directiveInject(l.h),t.\u0275\u0275directiveInject(c.d))},lt.\u0275cmp=t.\u0275\u0275defineComponent({type:lt,selectors:[["mobile-empty-scorecard"]],inputs:{scorecard:"scorecard"},decls:7,vars:7,consts:[[1,"content"],[3,"isDarkMode"],[1,"text"],["localize","ScorecardNoMetricsTitle",1,"title"],["localize","ScorecardNoMetricsDescription",1,"description"]],template:function(Ke,bt){1&Ke&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275element(1,"mobile-empty-scorecard-svg",1),t.\u0275\u0275elementStart(2,"div",2),t.\u0275\u0275element(3,"div",3),t.\u0275\u0275pipe(4,"localize"),t.\u0275\u0275element(5,"div",4),t.\u0275\u0275pipe(6,"localize"),t.\u0275\u0275elementEnd()()),2&Ke&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("isDarkMode",bt.isDarkMode),t.\u0275\u0275advance(2),t.\u0275\u0275attribute("aria-label",t.\u0275\u0275pipeBind1(4,3,"ScorecardNoMetricsTitle")),t.\u0275\u0275advance(2),t.\u0275\u0275attribute("aria-label",t.\u0275\u0275pipeBind1(6,5,"ScorecardNoMetricsDescription")))},dependencies:[y.X,d,r.F],styles:['[_nghost-%COMP%]{width:100%;height:80vh;overflow:auto;display:flex;background-color:var(--fluentThemeWhiteColor)}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{margin:auto;max-width:350px;text-align:center}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--vlg-font-size, 18px);font-weight:var(--font-weight-semi-bold, 600);color:var(--fluentThemeNeutralDarkColor);margin-top:28px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--lg-font-size, 16px);font-weight:var(--font-weight-regular, 400);color:var(--fluentThemeNeutralDarkColor);margin-top:20px}.phoneLandscapeLayout[_nghost-%COMP%]   .content[_ngcontent-%COMP%], .phoneLandscapeLayout   [_nghost-%COMP%]   .content[_ngcontent-%COMP%], .tabletLandscapeLayout[_nghost-%COMP%]   .content[_ngcontent-%COMP%], .tabletLandscapeLayout   [_nghost-%COMP%]   .content[_ngcontent-%COMP%]{text-align:initial;display:flex;max-width:initial;padding:0 30px}.phoneLandscapeLayout[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   *[_ngcontent-%COMP%], .phoneLandscapeLayout   [_nghost-%COMP%]   .content[_ngcontent-%COMP%]   *[_ngcontent-%COMP%], .tabletLandscapeLayout[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   *[_ngcontent-%COMP%], .tabletLandscapeLayout   [_nghost-%COMP%]   .content[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{order:2}.phoneLandscapeLayout[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%], .phoneLandscapeLayout   [_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%], .tabletLandscapeLayout[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%], .tabletLandscapeLayout   [_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{order:1;padding-right:20px}html[dir="rtl"]   .phoneLandscapeLayout[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%], html[dir="rtl"]   .phoneLandscapeLayout   [_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%], html[dir="rtl"]   .tabletLandscapeLayout[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%], html[dir="rtl"]   .tabletLandscapeLayout   [_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{padding-left:20px}'],changeDetection:0}),lt}(),m=n(81337),k=n(56809),O=n(46037),s=n(61088),ne=n(49223),ee=n(64929),Z=n(93379),v=n(87426),E=n(74521),I=n(9380),H=n(65181),G=n(51137),Y=n(82621),ie=n(93631),ye=n(77971),ae=n(44408),J=n(223),N=n(44581),he=n(74913),pe=n(90127),ce=["mobile-goal-row",""];function ge(lt,mt){1&lt&&t.\u0275\u0275element(0,"div",18)}function se(lt,mt){if(1&lt&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"localize"),t.\u0275\u0275elementContainerEnd()),2&lt){var Ke=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate2(" ",t.\u0275\u0275pipeBind1(2,2,"DueIn")," ",Ke.completionDate," ")}}function xe(lt,mt){if(1&lt&&(t.\u0275\u0275elementStart(0,"span"),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&lt){var Ke=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1("",Ke.valueChange.changeAmount,"%")}}function me(lt,mt){if(1&lt&&(t.\u0275\u0275elementStart(0,"span"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"formatGoalValue"),t.\u0275\u0275elementEnd()),2&lt){var Ke=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind3(2,1,Ke.valueChange.changeAmount,Ke.categories,Ke.formatString))}}function Oe(lt,mt){if(1&lt&&(t.\u0275\u0275elementStart(0,"span"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"localize"),t.\u0275\u0275elementEnd()),2&lt){var Ke=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",null!=Ke.displayedGoal&&null!=Ke.displayedGoal.cycleMetadata&&Ke.displayedGoal.cycleMetadata.cycleCustomLabel?Ke.valueChange.period:t.\u0275\u0275pipeBind1(2,1,Ke.valueChange.period),"")}}var Ce=function(mt){return{rotate180:mt}};function Le(lt,mt){if(1&lt&&(t.\u0275\u0275elementStart(0,"div",23),t.\u0275\u0275element(1,"mat-icon",24),t.\u0275\u0275elementStart(2,"div",25),t.\u0275\u0275template(3,xe,2,1,"span",8),t.\u0275\u0275template(4,me,3,5,"ng-template",null,26,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275template(6,Oe,3,3,"span",14),t.\u0275\u0275elementEnd()()),2&lt){var Ke=t.\u0275\u0275reference(5),bt=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(4,Ce,!bt.valueChange.isIncrease)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",bt.valueChange.isPercentage)("ngIfElse",Ke),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",bt.valueChange.period)}}function ze(lt,mt){if(1&lt&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",19)(2,"div",20),t.\u0275\u0275pipe(3,"formatGoalValue"),t.\u0275\u0275text(4),t.\u0275\u0275pipe(5,"formatGoalValue"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"div",21),t.\u0275\u0275pipe(7,"formatGoalValue"),t.\u0275\u0275text(8),t.\u0275\u0275pipe(9,"formatGoalValue"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(10,Le,7,6,"div",22),t.\u0275\u0275elementContainerEnd()),2&lt){var Ke=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275attribute("aria-label",t.\u0275\u0275pipeBind4(3,5,Ke.currentValue.value,Ke.categories,Ke.formatString,!1)),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind3(5,10,Ke.currentValue.value,Ke.categories,Ke.formatString)," "),t.\u0275\u0275advance(2),t.\u0275\u0275attribute("aria-label",t.\u0275\u0275pipeBind4(7,14,Ke.currentValue.target,Ke.categories,Ke.formatString,!1)),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" /",t.\u0275\u0275pipeBind3(9,19,Ke.currentValue.target,Ke.categories,Ke.formatString)," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",Ke.valueChange&&!Ke.hasCategories())}}function $e(lt,mt){if(1&lt&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"sparkline",27),t.\u0275\u0275listener("touchmove",function(ht){return ht.preventDefault()})("touchstart",function(ht){return ht.preventDefault()})("touchend",function(ht){return ht.preventDefault()})("click",function(ht){return ht.stopPropagation()}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&lt){var Ke=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("values",Ke.sparklineValues)("options",Ke.sparklineOptions)}}function We(lt,mt){if(1&lt&&(t.\u0275\u0275elementStart(0,"span",37),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&lt){var Ke=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",null==Ke.displayedGoal?null:Ke.displayedGoal.notesCount," ")}}function He(lt,mt){1&lt&&(t.\u0275\u0275elementStart(0,"div",38),t.\u0275\u0275element(1,"tri-svg-icon",39),t.\u0275\u0275elementEnd())}function Je(lt,mt){if(1&lt){var Ke=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",40),t.\u0275\u0275listener("accessible-click",function(Jt){return t.\u0275\u0275restoreView(Ke),t.\u0275\u0275nextContext(2).onShowChildrenChange(),t.\u0275\u0275resetView(Jt.stopPropagation())}),t.\u0275\u0275elementStart(1,"div",41),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"localize"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(4,"div",42),t.\u0275\u0275elementEnd()}if(2&lt){var bt=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate2("",bt.displayedGoal.subGoals.length," ",t.\u0275\u0275pipeBind1(3,3,1===bt.displayedGoal.subGoals.length?"Submetric":"Submetrics"),""),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(5,Ce,bt.showChildren))}}var j=function(mt){return{onlyVisibleChildren:mt}},tt=function(mt){return{hidden:mt}},Ue=function(mt){return{userEmail:mt}},oe=function(mt,Ke){return{hidden:mt,"has-notes":Ke}};function h(lt,mt){if(1&lt&&(t.\u0275\u0275elementStart(0,"div",28)(1,"div",29)(2,"div",30),t.\u0275\u0275element(3,"user-details-host",31),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"div",32),t.\u0275\u0275element(5,"mat-icon",33),t.\u0275\u0275template(6,We,2,1,"span",34),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(7,He,2,0,"div",35),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(8,Je,5,7,"div",36),t.\u0275\u0275elementEnd()),2&lt){var Ke=t.\u0275\u0275nextContext();t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(9,j,Ke.hasVisibleChildren&&Ke.isFieldHidden(Ke.columnNumber.owner)&&Ke.isFieldHidden(Ke.columnNumber.notes))),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(11,tt,Ke.isFieldHidden(Ke.columnNumber.owner))),t.\u0275\u0275advance(1),t.\u0275\u0275property("details",t.\u0275\u0275pureFunction1(13,Ue,Ke.displayedGoal.owner))("showTooltip",!1)("photoSize",20),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction2(15,oe,Ke.isFieldHidden(Ke.columnNumber.notes),!(null==Ke.displayedGoal||!Ke.displayedGoal.notesCount))),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",(null==Ke.displayedGoal?null:Ke.displayedGoal.notesCount)>0),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",Ke.capabilities.followGoal&&Ke.displayedGoal.isFollowed),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",Ke.hasVisibleChildren)}}function g(lt,mt){1&lt&&t.\u0275\u0275element(0,"div")}function u(lt,mt){1&lt&&(t.\u0275\u0275elementStart(0,"div",43),t.\u0275\u0275text(1,"\u2014"),t.\u0275\u0275elementEnd())}var F=function(){return[]},W=function(mt){return{"main-area":!0,directionColumn:mt}},te=function(mt){return{categorical:mt}},U=function(lt){function mt(Ke,bt,ht,Jt,$t,hn,Nn,wn,jn,co){var Xn=lt.call(this,Ke,bt,ht,Jt,$t,hn,Nn,wn)||this;return Xn.scorecardHierarchiesService=jn,Xn.formatValuePipe=co,Xn.columnNumber={name:0,owner:1,status:2,value:3,progress:4,dueDate:5,notes:6},Xn.isDarkMode=p.q.isDarkMode(),Xn}return(0,m.ZT)(mt,lt),mt.prototype.openMetricDetails=function(){var Ke;this.scorecardHierarchiesService.openMetricDetails(null===(Ke=this.displayedGoal)||void 0===Ke?void 0:Ke.id)},mt.prototype.isValueLong=function(){return"".concat(this.formatValue(this.currentValue.value),"/").concat(this.formatValue(this.currentValue.target)).length>20},mt.prototype.isFieldHidden=function(Ke){return!s._.isColumnVisible(this.scorecard.columnSettings,Ke)},mt.prototype.hasCategories=function(){var Ke;return(null===(Ke=this.categories)||void 0===Ke?void 0:Ke.length)>0},mt.prototype.formatValue=function(Ke){return this.formatValuePipe.transform(Ke,this.displayedGoal.valuesFormatString)},mt.\u0275fac=function(bt){return new(bt||mt)(t.\u0275\u0275directiveInject(t.ElementRef),t.\u0275\u0275directiveInject(ne.G),t.\u0275\u0275directiveInject(I.vZ),t.\u0275\u0275directiveInject(H.o),t.\u0275\u0275directiveInject(ee.V),t.\u0275\u0275directiveInject(Z.Nw),t.\u0275\u0275directiveInject(v.G),t.\u0275\u0275directiveInject(E.D),t.\u0275\u0275directiveInject(G._),t.\u0275\u0275directiveInject(Y.c))},mt.\u0275cmp=t.\u0275\u0275defineComponent({type:mt,selectors:[["","mobile-goal-row",""]],inputs:{goalStatuses:"goalStatuses"},features:[t.\u0275\u0275InheritDefinitionFeature],attrs:ce,decls:22,vars:38,consts:[[1,"row"],["class","cell-indent",4,"ngFor","ngForOf"],[1,"cell-box",3,"accessible-click"],[1,"row-content"],[1,"top-line"],[1,"name-and-date"],[1,"name-box",3,"ngClass"],[1,"due-date",3,"ngClass"],[4,"ngIf","ngIfElse"],[1,"status-box",3,"ngClass"],[3,"isDarkMode","isMobile","status","goalStatuses"],[3,"ngClass"],[1,"cell-value",3,"ngClass"],[1,"cell-sparkline",3,"ngClass"],[4,"ngIf"],["class","bottom-line",3,"ngClass",4,"ngIf"],["emptyColumn",""],["noValueDash",""],[1,"cell-indent"],[1,"content"],[1,"value"],[1,"target"],["class","delta",4,"ngIf"],[1,"delta"],["fontIcon","pbi-glyph-arrow",1,"glyphicon","glyph-micro",3,"ngClass"],[1,"change"],["absoluteValue",""],[1,"sparkline",3,"values","options","touchmove","touchstart","touchend","click"],[1,"bottom-line",3,"ngClass"],[1,"metric-details"],[1,"cell-owner",3,"ngClass"],[3,"details","showTooltip","photoSize"],[1,"notes","metric-details-item",3,"ngClass"],["fontIcon","pbi-glyph-add-comments",1,"glyphicon","glyph-small"],["class","notes-count",4,"ngIf"],["class","follow-metric metric-details-item",4,"ngIf"],["class","subGoals",3,"accessible-click",4,"ngIf"],[1,"notes-count"],[1,"follow-metric","metric-details-item"],["tri-svg-icon-20","","name","alert_20_filled","sprite","mobile-icons",1,"tri-svg"],[1,"subGoals",3,"accessible-click"],[1,"subGoalsText"],[1,"collapse-box","pointer","powervisuals-glyph","chevron-down",3,"ngClass"],[1,"no-value-dash"]],template:function(bt,ht){if(1&bt&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275template(1,ge,1,0,"div",1),t.\u0275\u0275elementStart(2,"div",2),t.\u0275\u0275listener("accessible-click",function(){return ht.openMetricDetails()}),t.\u0275\u0275elementStart(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),t.\u0275\u0275text(7),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"div",7),t.\u0275\u0275template(9,se,3,4,"ng-container",8),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(10,"div",9),t.\u0275\u0275element(11,"status-icon",10),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(12,"div",11)(13,"div",12),t.\u0275\u0275template(14,ze,11,23,"ng-container",8),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(15,"div",13),t.\u0275\u0275template(16,$e,2,2,"ng-container",14),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275template(17,h,9,18,"div",15),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(18,g,1,0,"ng-template",null,16,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275template(20,u,2,0,"ng-template",null,17,t.\u0275\u0275templateRefExtractor)),2&bt){var Jt=t.\u0275\u0275reference(19),$t=t.\u0275\u0275reference(21);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",t.\u0275\u0275pureFunction0(25,F).constructor(ht.indentation)),t.\u0275\u0275advance(1),t.\u0275\u0275styleProp("border-color",ht.color),t.\u0275\u0275classProp("selected-goal",null==ht.scorecard||null==ht.scorecard.selectedGoalIds?null:ht.scorecard.selectedGoalIds[ht.displayedGoal.id]),t.\u0275\u0275attribute("aria-label",ht.displayedGoal.name),t.\u0275\u0275advance(4),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(26,tt,ht.isFieldHidden(ht.columnNumber.name))),t.\u0275\u0275attribute("aria-label",ht.displayedGoal.name),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(ht.displayedGoal.name),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(28,tt,ht.isFieldHidden(ht.columnNumber.dueDate))),t.\u0275\u0275attribute("aria-label",ht.completionDate),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",ht.completionDate)("ngIfElse",$t),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(30,tt,ht.isFieldHidden(ht.columnNumber.status))),t.\u0275\u0275advance(1),t.\u0275\u0275property("isDarkMode",ht.isDarkMode)("isMobile",!0)("status",null==ht.currentValue?null:ht.currentValue.status)("goalStatuses",ht.goalStatuses),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(32,W,ht.isValueLong())),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(34,te,ht.hasCategories())),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",ht.hasValueOrTarget)("ngIfElse",Jt),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(36,tt,ht.isFieldHidden(ht.columnNumber.progress))),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!ht.hasCategories()&&(null==ht.sparklineValues?null:ht.sparklineValues.length)>1),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",ht.hasVisibleChildren||!ht.isFieldHidden(ht.columnNumber.owner)||!ht.isFieldHidden(ht.columnNumber.notes))}},dependencies:[i.NgClass,i.NgForOf,i.NgIf,ie.l,ye.m,ae.Hw,J.s,N.t,he.M,pe.D,r.F],styles:['.row[_ngcontent-%COMP%]{display:flex;margin:0 8px;background-color:var(--fluentThemeWhiteColor)}.row[_ngcontent-%COMP%]   .cell-indent[_ngcontent-%COMP%]{width:10px}.row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]{border-radius:4px;margin:8px 0;box-shadow:0 1px 10px rgba(0,0,0,.15);padding-top:8px;width:calc(100% - 8px);background-color:var(--fluentThemeWhiteToNightColor)}html:not([dir="rtl"])[_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]{border-left-width:6px;border-right-width:0px}html[dir="rtl"][_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]{border-left-width:0px;border-right-width:6px}html:not([dir="rtl"])[_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]{border-left-style:solid;border-right-style:none}html[dir="rtl"][_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]{border-left-style:none;border-right-style:solid}.row[_ngcontent-%COMP%]   .cell-box.selected-goal[_ngcontent-%COMP%]{border-top:1px solid;border-bottom:1px solid}html:not([dir="rtl"])[_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .cell-box.selected-goal[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .cell-box.selected-goal[_ngcontent-%COMP%]{border-left-width:6px;border-right-width:1px}html[dir="rtl"][_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .cell-box.selected-goal[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .cell-box.selected-goal[_ngcontent-%COMP%]{border-left-width:1px;border-right-width:6px}html:not([dir="rtl"])[_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .cell-box.selected-goal[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .cell-box.selected-goal[_ngcontent-%COMP%]{border-left-style:solid;border-right-style:solid}html[dir="rtl"][_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .cell-box.selected-goal[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .cell-box.selected-goal[_ngcontent-%COMP%]{border-left-style:solid;border-right-style:solid}.row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .top-line[_ngcontent-%COMP%]{padding:0 8px;display:flex;flex-direction:row;justify-content:space-between}.row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .top-line[_ngcontent-%COMP%]   .name-and-date[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .top-line[_ngcontent-%COMP%]   .name-and-date[_ngcontent-%COMP%]   .name-box[_ngcontent-%COMP%]{font-weight:600;font-size:14px;color:var(--fluentThemeNeutralDarkColor);text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .top-line[_ngcontent-%COMP%]   .status-box[_ngcontent-%COMP%]{max-width:40%}.row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .due-date[_ngcontent-%COMP%]{font-size:12px;color:var(--fluentThemeNeutralSecondaryColor)}.row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]{padding:0 8px;display:flex;justify-content:space-between;align-items:center;height:70px}.row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .cell-value.categorical[_ngcontent-%COMP%]{width:100%}.row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .cell-value.categorical[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{white-space:nowrap}.row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .cell-value.categorical[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{max-width:none;line-height:inherit}.row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .cell-value.categorical[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .target[_ngcontent-%COMP%]{max-width:none}.row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .cell-value[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;align-items:baseline;direction:ltr}.row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .cell-value[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:26px;font-weight:600;color:var(--fluentThemeNeutralDarkColor);line-height:26px;max-width:16ch;overflow:hidden;text-overflow:ellipsis}.row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .cell-value[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .value[aria-label=\\2014][_ngcontent-%COMP%]{font-size:16px;font-weight:unset}.row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .cell-value[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .target[_ngcontent-%COMP%]{font-size:16px;color:var(--fluentThemeNeutralDarkColor);max-width:18ch;overflow:hidden;text-overflow:ellipsis}.row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .cell-value[_ngcontent-%COMP%]   .delta[_ngcontent-%COMP%]{display:flex;align-items:center}.row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .cell-value[_ngcontent-%COMP%]   .delta[_ngcontent-%COMP%]   .change[_ngcontent-%COMP%]{font-size:10px;color:var(--fluentThemeNeutralSecondaryColor)}.row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .cell-value[_ngcontent-%COMP%]   .delta[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{height:10px;width:10px;color:var(--fluentThemeNeutralSecondaryColor)}.row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .main-area.directionColumn[_ngcontent-%COMP%]   .cell-value[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{flex-direction:column}.row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .main-area.directionColumn[_ngcontent-%COMP%]   .cell-value[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:24px}@media (max-device-width: 320px) and (orientation: portrait){.row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .main-area.directionColumn[_ngcontent-%COMP%]   .cell-value[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:18px}.row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .main-area.directionColumn[_ngcontent-%COMP%]   .cell-value[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .target[_ngcontent-%COMP%]{font-size:14px}}@media (max-device-width: 736px) and (orientation: landscape){.row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .main-area.directionColumn[_ngcontent-%COMP%]   .cell-value[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:18px}.row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .main-area.directionColumn[_ngcontent-%COMP%]   .cell-value[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .target[_ngcontent-%COMP%]{font-size:14px}}@media (max-device-width: 280px) and (orientation: portrait){.row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .main-area.directionColumn[_ngcontent-%COMP%]   .cell-value[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:14px}.row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .main-area.directionColumn[_ngcontent-%COMP%]   .cell-value[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .target[_ngcontent-%COMP%]{font-size:12px}}.row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .bottom-line[_ngcontent-%COMP%]{background-color:var(--fluentThemeNeutralLighterColor);display:flex;justify-content:space-between;padding:8px;align-items:center;border-radius:0 0 4px;height:30px;direction:ltr;flex-flow:nowrap}.row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .bottom-line.onlyVisibleChildren[_ngcontent-%COMP%]{justify-content:flex-end}.row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .bottom-line[_ngcontent-%COMP%]   .metric-details[_ngcontent-%COMP%]{display:flex;overflow:hidden;flex-flow:nowrap;width:-webkit-fill-available}.row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .bottom-line[_ngcontent-%COMP%]   .metric-details[_ngcontent-%COMP%]   .cell-owner[_ngcontent-%COMP%]{max-width:calc(100% - 70px);padding-right:10px;align-self:center}.row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .bottom-line[_ngcontent-%COMP%]   .metric-details[_ngcontent-%COMP%]   .cell-owner[_ngcontent-%COMP%]     .user-icon-circle{color:var(--fluentThemeWhiteColor);background-color:var(--fluentThemeNeutralSecondaryColor)}.row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .bottom-line[_ngcontent-%COMP%]   .metric-details[_ngcontent-%COMP%]   .cell-owner[_ngcontent-%COMP%]     .user-info{font-size:12px;color:var(--fluentThemeNeutralDarkColor)}.row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .bottom-line[_ngcontent-%COMP%]   .metric-details[_ngcontent-%COMP%]   .cell-owner[_ngcontent-%COMP%]     .user-info .user-name{color:inherit;font-size:inherit;font-weight:400}.row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .bottom-line[_ngcontent-%COMP%]   .metric-details[_ngcontent-%COMP%]   .cell-owner[_ngcontent-%COMP%]     .user-email{font-size:10px;color:var(--fluentThemeNeutralDarkColor)}.row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .bottom-line[_ngcontent-%COMP%]   .metric-details[_ngcontent-%COMP%]   .cell-owner[_ngcontent-%COMP%]     mat-icon{color:var(--fluentThemeNeutralDarkColor)}html:not([dir="rtl"])[_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .bottom-line[_ngcontent-%COMP%]   .metric-details[_ngcontent-%COMP%]   .metric-details-item[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .bottom-line[_ngcontent-%COMP%]   .metric-details[_ngcontent-%COMP%]   .metric-details-item[_ngcontent-%COMP%]{margin:0 5px 0 0}html[dir="rtl"][_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .bottom-line[_ngcontent-%COMP%]   .metric-details[_ngcontent-%COMP%]   .metric-details-item[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .bottom-line[_ngcontent-%COMP%]   .metric-details[_ngcontent-%COMP%]   .metric-details-item[_ngcontent-%COMP%]{margin:0 0 0 5px}.row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .bottom-line[_ngcontent-%COMP%]   .metric-details[_ngcontent-%COMP%]   .notes[_ngcontent-%COMP%]{position:relative;top:4px;color:var(--fluentThemeNeutralDarkColor)}.row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .bottom-line[_ngcontent-%COMP%]   .metric-details[_ngcontent-%COMP%]   .notes.has-notes[_ngcontent-%COMP%]{top:6px}.row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .bottom-line[_ngcontent-%COMP%]   .metric-details[_ngcontent-%COMP%]   .notes[_ngcontent-%COMP%]   .notes-count[_ngcontent-%COMP%]{position:absolute;top:-6px;left:8px;border-radius:10px;padding:2px 4px;min-width:10px;min-height:12px;line-height:10px;font-size:10px;background:var(--fluentThemePrimaryColor);color:var(--mobileThemePrimaryTextColor);text-align:center}.row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .bottom-line[_ngcontent-%COMP%]   .metric-details[_ngcontent-%COMP%]   .follow-metric[_ngcontent-%COMP%]     svg{fill:var(--fluentThemeNeutralDarkColor)}.row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .bottom-line[_ngcontent-%COMP%]   .subGoals[_ngcontent-%COMP%]{font-size:12px;color:var(--fluentThemeLinkColor);display:flex;align-items:flex-end;white-space:nowrap}.row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .bottom-line[_ngcontent-%COMP%]   .subGoals[_ngcontent-%COMP%]   .chevron-down[_ngcontent-%COMP%]{padding:1px 10px}.row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .bottom-line[_ngcontent-%COMP%]   .subGoals[_ngcontent-%COMP%]   .subGoalsText[_ngcontent-%COMP%]{min-width:62px}.row   .cell-box   .phoneLandscapeLayout[_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .row-content[_ngcontent-%COMP%], .phoneLandscapeLayout   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .row-content[_ngcontent-%COMP%], .row   .cell-box   .tabletPortraitLayout[_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .row-content[_ngcontent-%COMP%], .tabletPortraitLayout   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .row-content[_ngcontent-%COMP%], .row   .cell-box   .tabletLandscapeLayout[_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .row-content[_ngcontent-%COMP%], .tabletLandscapeLayout   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .row-content[_ngcontent-%COMP%], .row   .cell-box   .windowsPortraitLayout[_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .row-content[_ngcontent-%COMP%], .windowsPortraitLayout   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .row-content[_ngcontent-%COMP%], .row   .cell-box   .windowsLandscapeLayout[_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .row-content[_ngcontent-%COMP%], .windowsLandscapeLayout   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .row-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.row   .cell-box   .phoneLandscapeLayout[_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .row-content[_ngcontent-%COMP%]   .top-line[_ngcontent-%COMP%], .phoneLandscapeLayout   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .row-content[_ngcontent-%COMP%]   .top-line[_ngcontent-%COMP%], .row   .cell-box   .tabletPortraitLayout[_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .row-content[_ngcontent-%COMP%]   .top-line[_ngcontent-%COMP%], .tabletPortraitLayout   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .row-content[_ngcontent-%COMP%]   .top-line[_ngcontent-%COMP%], .row   .cell-box   .tabletLandscapeLayout[_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .row-content[_ngcontent-%COMP%]   .top-line[_ngcontent-%COMP%], .tabletLandscapeLayout   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .row-content[_ngcontent-%COMP%]   .top-line[_ngcontent-%COMP%], .row   .cell-box   .windowsPortraitLayout[_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .row-content[_ngcontent-%COMP%]   .top-line[_ngcontent-%COMP%], .windowsPortraitLayout   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .row-content[_ngcontent-%COMP%]   .top-line[_ngcontent-%COMP%], .row   .cell-box   .windowsLandscapeLayout[_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .row-content[_ngcontent-%COMP%]   .top-line[_ngcontent-%COMP%], .windowsLandscapeLayout   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .row-content[_ngcontent-%COMP%]   .top-line[_ngcontent-%COMP%]{width:50%}.row   .cell-box   .phoneLandscapeLayout[_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .row-content[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%], .phoneLandscapeLayout   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .row-content[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%], .row   .cell-box   .tabletPortraitLayout[_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .row-content[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%], .tabletPortraitLayout   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .row-content[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%], .row   .cell-box   .tabletLandscapeLayout[_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .row-content[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%], .tabletLandscapeLayout   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .row-content[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%], .row   .cell-box   .windowsPortraitLayout[_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .row-content[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%], .windowsPortraitLayout   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .row-content[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%], .row   .cell-box   .windowsLandscapeLayout[_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .row-content[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%], .windowsLandscapeLayout   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .row-content[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]{align-items:flex-start;width:50%;height:52px;padding:0}.row   .cell-box   .phoneLandscapeLayout[_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .row-content[_ngcontent-%COMP%]   .main-area.directionColumn[_ngcontent-%COMP%], .phoneLandscapeLayout   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .row-content[_ngcontent-%COMP%]   .main-area.directionColumn[_ngcontent-%COMP%], .row   .cell-box   .tabletPortraitLayout[_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .row-content[_ngcontent-%COMP%]   .main-area.directionColumn[_ngcontent-%COMP%], .tabletPortraitLayout   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .row-content[_ngcontent-%COMP%]   .main-area.directionColumn[_ngcontent-%COMP%], .row   .cell-box   .tabletLandscapeLayout[_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .row-content[_ngcontent-%COMP%]   .main-area.directionColumn[_ngcontent-%COMP%], .tabletLandscapeLayout   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .row-content[_ngcontent-%COMP%]   .main-area.directionColumn[_ngcontent-%COMP%], .row   .cell-box   .windowsPortraitLayout[_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .row-content[_ngcontent-%COMP%]   .main-area.directionColumn[_ngcontent-%COMP%], .windowsPortraitLayout   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .row-content[_ngcontent-%COMP%]   .main-area.directionColumn[_ngcontent-%COMP%], .row   .cell-box   .windowsLandscapeLayout[_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .row-content[_ngcontent-%COMP%]   .main-area.directionColumn[_ngcontent-%COMP%], .windowsLandscapeLayout   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .row-content[_ngcontent-%COMP%]   .main-area.directionColumn[_ngcontent-%COMP%]{height:66px}.row   .cell-box   .phoneLandscapeLayout[_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .row-content[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .cell-sparkline[_ngcontent-%COMP%], .phoneLandscapeLayout   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .row-content[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .cell-sparkline[_ngcontent-%COMP%], .row   .cell-box   .tabletPortraitLayout[_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .row-content[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .cell-sparkline[_ngcontent-%COMP%], .tabletPortraitLayout   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .row-content[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .cell-sparkline[_ngcontent-%COMP%], .row   .cell-box   .tabletLandscapeLayout[_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .row-content[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .cell-sparkline[_ngcontent-%COMP%], .tabletLandscapeLayout   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .row-content[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .cell-sparkline[_ngcontent-%COMP%], .row   .cell-box   .windowsPortraitLayout[_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .row-content[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .cell-sparkline[_ngcontent-%COMP%], .windowsPortraitLayout   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .row-content[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .cell-sparkline[_ngcontent-%COMP%], .row   .cell-box   .windowsLandscapeLayout[_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .row-content[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .cell-sparkline[_ngcontent-%COMP%], .windowsLandscapeLayout   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .row-content[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]   .cell-sparkline[_ngcontent-%COMP%]{padding:8px}.row   .cell-box   .phoneLandscapeLayout[_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .bottom-line[_ngcontent-%COMP%], .phoneLandscapeLayout   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .bottom-line[_ngcontent-%COMP%], .row   .cell-box   .tabletPortraitLayout[_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .bottom-line[_ngcontent-%COMP%], .tabletPortraitLayout   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .bottom-line[_ngcontent-%COMP%], .row   .cell-box   .tabletLandscapeLayout[_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .bottom-line[_ngcontent-%COMP%], .tabletLandscapeLayout   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .bottom-line[_ngcontent-%COMP%], .row   .cell-box   .windowsPortraitLayout[_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .bottom-line[_ngcontent-%COMP%], .windowsPortraitLayout   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .bottom-line[_ngcontent-%COMP%], .row   .cell-box   .windowsLandscapeLayout[_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .bottom-line[_ngcontent-%COMP%], .windowsLandscapeLayout   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .bottom-line[_ngcontent-%COMP%]{height:16px}.row   .cell-box   .phoneLandscapeLayout[_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .bottom-line[_ngcontent-%COMP%]   .notes[_ngcontent-%COMP%], .phoneLandscapeLayout   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .bottom-line[_ngcontent-%COMP%]   .notes[_ngcontent-%COMP%], .row   .cell-box   .tabletPortraitLayout[_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .bottom-line[_ngcontent-%COMP%]   .notes[_ngcontent-%COMP%], .tabletPortraitLayout   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .bottom-line[_ngcontent-%COMP%]   .notes[_ngcontent-%COMP%], .row   .cell-box   .tabletLandscapeLayout[_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .bottom-line[_ngcontent-%COMP%]   .notes[_ngcontent-%COMP%], .tabletLandscapeLayout   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .bottom-line[_ngcontent-%COMP%]   .notes[_ngcontent-%COMP%], .row   .cell-box   .windowsPortraitLayout[_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .bottom-line[_ngcontent-%COMP%]   .notes[_ngcontent-%COMP%], .windowsPortraitLayout   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .bottom-line[_ngcontent-%COMP%]   .notes[_ngcontent-%COMP%], .row   .cell-box   .windowsLandscapeLayout[_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .bottom-line[_ngcontent-%COMP%]   .notes[_ngcontent-%COMP%], .windowsLandscapeLayout   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .bottom-line[_ngcontent-%COMP%]   .notes[_ngcontent-%COMP%]{margin:0 20px}.row   .tabletPortraitLayout[_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .cell-indent[_ngcontent-%COMP%], .tabletPortraitLayout   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .cell-indent[_ngcontent-%COMP%], .row   .windowsPortraitLayout[_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .cell-indent[_ngcontent-%COMP%], .windowsPortraitLayout   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .cell-indent[_ngcontent-%COMP%]{width:20px}.row   .tabletPortraitLayout[_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%], .tabletPortraitLayout   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%], .row   .windowsPortraitLayout[_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%], .windowsPortraitLayout   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]{width:45%}.row   .tabletPortraitLayout[_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .main-area.directionColumn[_ngcontent-%COMP%]   .cell-value[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], .tabletPortraitLayout   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .main-area.directionColumn[_ngcontent-%COMP%]   .cell-value[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], .row   .windowsPortraitLayout[_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .main-area.directionColumn[_ngcontent-%COMP%]   .cell-value[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], .windowsPortraitLayout   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .main-area.directionColumn[_ngcontent-%COMP%]   .cell-value[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:20px}.row   .tabletLandscapeLayout[_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .cell-indent[_ngcontent-%COMP%], .tabletLandscapeLayout   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .cell-indent[_ngcontent-%COMP%], .row   .windowsLandscapeLayout[_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .cell-indent[_ngcontent-%COMP%], .windowsLandscapeLayout   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .cell-indent[_ngcontent-%COMP%]{width:30px}.row   .tabletLandscapeLayout[_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%], .tabletLandscapeLayout   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%], .row   .windowsLandscapeLayout[_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%], .windowsLandscapeLayout   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]{width:45%}.row   .tabletLandscapeLayout[_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .main-area.directionColumn[_ngcontent-%COMP%]   .cell-value[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], .tabletLandscapeLayout   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .main-area.directionColumn[_ngcontent-%COMP%]   .cell-value[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], .row   .windowsLandscapeLayout[_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .main-area.directionColumn[_ngcontent-%COMP%]   .cell-value[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], .windowsLandscapeLayout   [_nghost-%COMP%]   .row[_ngcontent-%COMP%]   .cell-box[_ngcontent-%COMP%]   .main-area.directionColumn[_ngcontent-%COMP%]   .cell-value[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:22px}.row[_ngcontent-%COMP%]   .rotate180[_ngcontent-%COMP%]{transform:rotate(180deg)}.row[_ngcontent-%COMP%]   .hidden[_ngcontent-%COMP%]{display:none}'],changeDetection:0}),mt}(O.C),Q=["mobile-goal-group",""];function B(lt,mt){1&lt&&t.\u0275\u0275elementContainer(0)}function P(lt,mt){if(1&lt){var Ke=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",3),t.\u0275\u0275listener("showChildrenChange",function(Nn){t.\u0275\u0275restoreView(Ke);var wn=t.\u0275\u0275nextContext().goal,jn=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(jn.onShowChildrenChange(wn.id,Nn))}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()}if(2&lt){var bt=t.\u0275\u0275nextContext(),ht=bt.goal,Jt=bt.i,$t=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275classProp("disabled","Saving"===ht.state||"Deleting"===ht.state)("goal-not-match",!1===ht.isFilterMatch),t.\u0275\u0275propertyInterpolate("id",ht.id),t.\u0275\u0275property("scorecard",$t.scorecard)("goalStatuses",null==$t.scorecard.goalStatuses?null:$t.scorecard.goalStatuses.statuses)("goal",ht)("indent",Jt)("color",$t.color)("showChildren",!1!==$t.showChildren[ht.id])}}function q(lt,mt){1&lt&&t.\u0275\u0275elementContainer(0)}var le=function(mt,Ke){return{goal:mt,i:Ke}};function de(lt,mt){if(1&lt&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,q,1,0,"ng-container",0),t.\u0275\u0275elementContainerEnd()),2&lt){var Ke=t.\u0275\u0275nextContext().$implicit,bt=t.\u0275\u0275nextContext(2).i;t.\u0275\u0275nextContext();var ht=t.\u0275\u0275reference(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngTemplateOutlet",ht)("ngTemplateOutletContext",t.\u0275\u0275pureFunction2(2,le,Ke,bt+1))}}function V(lt,mt){if(1&lt&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,de,2,5,"ng-container",2),t.\u0275\u0275elementContainerEnd()),2&lt){var Ke=mt.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!Ke.isHidden)}}function b(lt,mt){if(1&lt&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,V,2,1,"ng-container",4),t.\u0275\u0275elementContainerEnd()),2&lt){var Ke=t.\u0275\u0275nextContext().goal;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",Ke.subGoals)}}function L(lt,mt){if(1&lt&&(t.\u0275\u0275template(0,P,2,11,"ng-container",2),t.\u0275\u0275template(1,b,2,1,"ng-container",2)),2&lt){var Ke=mt.goal,bt=t.\u0275\u0275nextContext();t.\u0275\u0275property("ngIf",null==Ke.state||"Consumption"===Ke.state||"Saving"===Ke.state||"Deleting"===Ke.state),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",(null==Ke.subGoals?null:Ke.subGoals.length)>0&&!1!==bt.showChildren[Ke.id])}}var T=function(mt){return{goal:mt,i:0}},X=function(lt){function mt(){return null!==lt&&lt.apply(this,arguments)||this}return(0,m.ZT)(mt,lt),mt.\u0275fac=function(){var Ke;return function(ht){return(Ke||(Ke=t.\u0275\u0275getInheritedFactory(mt)))(ht||mt)}}(),mt.\u0275cmp=t.\u0275\u0275defineComponent({type:mt,selectors:[["","mobile-goal-group",""]],features:[t.\u0275\u0275InheritDefinitionFeature],attrs:Q,decls:3,vars:4,consts:[[4,"ngTemplateOutlet","ngTemplateOutletContext"],["goalWithChildrenTmpl",""],[4,"ngIf"],["mobile-goal-row","",1,"goal-row",3,"id","scorecard","goalStatuses","goal","indent","color","showChildren","showChildrenChange"],[4,"ngFor","ngForOf"]],template:function(bt,ht){if(1&bt&&(t.\u0275\u0275template(0,B,1,0,"ng-container",0),t.\u0275\u0275template(1,L,2,2,"ng-template",null,1,t.\u0275\u0275templateRefExtractor)),2&bt){var Jt=t.\u0275\u0275reference(2);t.\u0275\u0275property("ngTemplateOutlet",Jt)("ngTemplateOutletContext",t.\u0275\u0275pureFunction1(2,T,ht.goal))}},dependencies:[i.NgForOf,i.NgIf,i.NgTemplateOutlet,U],styles:[".goal-row[_ngcontent-%COMP%]{background-color:var(--fluentThemeWhiteColor)}.goal-not-match[_ngcontent-%COMP%]{opacity:30%}"],changeDetection:0}),mt}(k.Q),ue=n(29730),Ne=n(11960),Qe=n(58108),Xe=n(34763),it=n(30794),ut=n(59017),ot=n(81905),pt=n(6754),Ye=n(59973),dt=n(14172),Ot=n(77526),Et=n(48787),Gt=n(23558),K=n(73911),yn=n(34340),on=n(21719),Un=n(20930),yo=n(62087),Mo=n(9398),zo=n(26003);function po(lt,mt){if(1&lt){var Ke=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",6,7),t.\u0275\u0275listener("showChildrenChange",function(wn){t.\u0275\u0275restoreView(Ke);var jn=t.\u0275\u0275nextContext(4);return t.\u0275\u0275resetView(jn.onShowChildrenChange(wn))}),t.\u0275\u0275pipe(2,"async"),t.\u0275\u0275pipe(3,"async"),t.\u0275\u0275text(4),t.\u0275\u0275elementEnd()}if(2&lt){var bt=t.\u0275\u0275nextContext(),ht=bt.$implicit,Jt=bt.index,$t=bt.last,hn=t.\u0275\u0275nextContext(3);t.\u0275\u0275property("scorecard",t.\u0275\u0275pipeBind1(2,5,hn.scorecard$))("goal",ht)("color",hn.colorPalette[Jt%hn.colorPalette.length])("showChildren",t.\u0275\u0275pipeBind1(3,7,hn.showChildren$)),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate1(" ",$t?hn.onLastItemLoaded():""," ")}}function lo(lt,mt){if(1&lt&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,po,5,9,"div",5),t.\u0275\u0275elementContainerEnd()),2&lt){var Ke=mt.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!Ke.isHidden)}}function xo(lt,mt){if(1&lt&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",3),t.\u0275\u0275template(2,lo,2,1,"ng-container",4),t.\u0275\u0275pipe(3,"async"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&lt){var Ke=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",t.\u0275\u0275pipeBind1(3,2,Ke.goals$))("ngForTrackBy",Ke.goalId)}}function so(lt,mt){if(1&lt&&(t.\u0275\u0275element(0,"mobile-empty-scorecard",8),t.\u0275\u0275pipe(1,"async")),2&lt){var Ke=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("scorecard",t.\u0275\u0275pipeBind1(1,1,Ke.scorecard$))}}function bo(lt,mt){if(1&lt&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,xo,4,4,"ng-container",0),t.\u0275\u0275pipe(2,"async"),t.\u0275\u0275template(3,so,2,3,"ng-template",null,2,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementContainerEnd()),2&lt){var Ke=t.\u0275\u0275reference(4),bt=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(2,2,bt.hasSavedGoals$))("ngIfElse",Ke)}}function Rn(lt,mt){1&lt&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"span",11),t.\u0275\u0275elementContainerEnd())}function go(lt,mt){1&lt&&t.\u0275\u0275element(0,"span",12)}function Io(lt,mt){if(1&lt&&(t.\u0275\u0275elementStart(0,"div",9),t.\u0275\u0275template(1,Rn,2,0,"ng-container",0),t.\u0275\u0275pipe(2,"async"),t.\u0275\u0275template(3,go,1,0,"ng-template",null,10,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementEnd()),2&lt){var ht,Ke=t.\u0275\u0275reference(4),bt=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!(null!=(ht=t.\u0275\u0275pipeBind1(2,2,bt.scorecardDetails$))&&ht.scorecardId))("ngIfElse",Ke)}}var Po=function(lt){function mt(Ke,bt,ht,Jt,$t,hn,Nn,wn,jn,co,Xn,Lo,zn,mo,Yn,jo,Fo){var qt=lt.call(this,Ke,bt,ht,Jt,hn,Nn,wn,jn,co,Xn)||this;return qt.activatedRoute=$t,qt.element=Lo,qt.goalsActionService=zn,qt.routingService=mo,qt.scorecardApplicationApiService=Yn,qt.scorecardHierarchiesService=jo,qt.ngZone=Fo,qt.subscription=new Xe.w,qt.scorecardLoaded$=new it.xQ,qt.lastItemLoaded$=new it.xQ,qt._scorecardService=Ke,qt._hierarchyService=jn,qt.activeGoalId=$t.snapshot.queryParamMap.get("selectedGoalId"),qt.subscription.add(qt.scorecardApplicationApiService.goalDetailsPaneVisibility$.subscribe(function(Kn){qt.lastNativeDetailsWindowStatus=Kn,qt.toggleSelectedGoal()})),qt.subscription.add(qt.scorecardApplicationApiService.refresh$.pipe((0,ot.w)(function(){return qt.lastItemLoaded$.pipe((0,pt.b)(100))}),(0,Ye.h)(function(){return!!qt.scorecard$}),(0,ot.w)(function(){return qt.scorecard$}),(0,Ye.h)(function(Kn){var wo;return Kn.activeGoalId!==(null===(wo=qt.lastNativeDetailsWindowStatus)||void 0===wo?void 0:wo.selectedGoalId)})).subscribe(function(){qt.toggleSelectedGoal()})),qt}return(0,m.ZT)(mt,lt),mt.prototype.ngOnInit=function(){var Ke=this;lt.prototype.ngOnInit.call(this),this.subscription.add((0,ut.aj)([this.scorecardHierarchiesService.selectedHierarchies$,this.scorecard$]).pipe((0,Ye.h)(function(bt){return!!bt[1]}),(0,dt.U)(function(bt){return bt[0]})).subscribe(function(bt){Ke.onHierarchyChange(bt)})),this.subscription.add(this.hasHierarchies$.subscribe(function(bt){Ke.scorecardHierarchiesService.setHasHierarchies(bt),Ke.goalsActionService.invokeToNativeHasHierarchies(bt)})),this.subscription.add(this._hierarchyService.hierarchies$.subscribe(function(bt){Ke.scorecardHierarchiesService.setHierarchies(bt)})),this.subscription.add((0,ut.aj)([this.scorecardHierarchiesService.hierarchies$,this.scorecardHierarchiesService.selectedHierarchies$,this.scorecardLoaded$]).pipe((0,Ot.x)(),(0,Ye.h)(function(bt){return bt[2]}),(0,dt.U)(function(bt){return[bt[0],bt[1],Ke.activatedRoute.snapshot.queryParamMap.get("selectedGoalId"),Ke.activatedRoute.snapshot.queryParamMap.get("hierarchyPath")]}),(0,Ye.h)(function(bt){var ht=bt[0],Jt=bt[1],$t=bt[2],hn=bt[3];return!!$t&&!hn||!!$t&&!!hn&&!!Jt?.length&&!!ht?.length}),(0,Et.q)(1)).subscribe(function(bt){Ke.scorecardHierarchiesService.openMetricDetails(bt[2],!0)})),this.subscription.add(this.scorecard$.pipe((0,Ye.h)(function(bt){return!!bt}),(0,Gt.M)(this.scorecardDetails$)).subscribe(function(bt){var Jt=bt[1];Jt&&Jt.onScorecardUpdated&&Jt.onScorecardUpdated(bt[0])})),this.subscription.add(this._scorecardService.onHierarchyNotFound.subscribe(function(){return(0,m.mG)(Ke,void 0,void 0,function(){var ht;return(0,m.Jh)(this,function(Jt){switch(Jt.label){case 0:return(ht=(0,m.pi)({},this.activatedRoute.snapshot.queryParams)).hierarchyPath&&delete ht.hierarchyPath,this.scorecardHierarchiesService.clearSelectedHierarchies(),[4,this.routingService.go("goals",ht)];case 1:return Jt.sent(),this.scorecardApplicationApiService.updateScorecard(),[2]}})})}))},mt.prototype.ngAfterViewInit=function(){var Ke=this;this.subscription.add(this.lastItemLoaded$.pipe((0,Et.q)(1)).subscribe(function(){Ke.loadCompleted()})),this.subscription.add(this.lastItemLoaded$.pipe((0,pt.b)(100)).subscribe(function(){Ke.scrollIntoSelectedGoal(),Ke.activeGoalId=""}))},mt.prototype.ngOnDestroy=function(){this.subscription.unsubscribe(),this.scorecardHierarchiesService.clearSelectedHierarchies()},mt.prototype.onLastItemLoaded=function(){this.lastItemLoaded$.next()},mt.prototype.toggleSelectedGoal=function(){var bt,Ke=this;this.ngZone.run(function(){var ht;if(Ke.lastNativeDetailsWindowStatus&&Ke._scorecardService.getCurrentScorecard()){var Jt=Ke.lastNativeDetailsWindowStatus.selectedGoalId;!(null===(ht=Ke.lastNativeDetailsWindowStatus)||void 0===ht)&&ht.isOpen||(Ke.lastNativeDetailsWindowStatus=null),Ke._scorecardService.toggleSelectedGoal(Jt)}}),null!==(bt=this.lastNativeDetailsWindowStatus)&&void 0!==bt&&bt.isOpen&&(this.activeGoalId=this.lastNativeDetailsWindowStatus.selectedGoalId,this.scrollIntoSelectedGoal())},mt.prototype.loadCompleted=function(){var Ke=this;this.subscription.add(this.scorecard$.pipe((0,Ot.x)(function(bt,ht){return bt.id===ht.id})).subscribe(function(bt){Ke.goalsActionService.invokeToNativeScorecardLoaded({scorecard:bt}),Ke.scorecardApplicationApiService.deferredScorecardLoadedTelemetryEvent.resolve(),Ke.scorecardHierarchiesService.selectedHierarchies&&Ke.scorecardHierarchiesService.notifyHierarchySelected(),Ke.scorecardLoaded$.next(!0)}))},mt.prototype.scrollIntoSelectedGoal=function(){var Ke=this.element.nativeElement.querySelector("[id='".concat(this.activeGoalId,"']"));Ke&&Ke.scrollIntoView()},mt.prototype.onHierarchyChange=function(Ke){return(0,m.mG)(this,void 0,void 0,function(){var bt,Jt,$t;return(0,m.Jh)(this,function(hn){switch(hn.label){case 0:return this._scorecardService.setActiveHierarchy(Ke),bt=(0,ue.T4)(Ke),Jt=(0,m.pi)((0,m.pi)({},this.activatedRoute.snapshot.queryParams),(($t={}).hierarchyPath=bt,$t)),[4,this.routingService.go("goals",Jt)];case 1:return hn.sent(),[2]}})})},mt.\u0275fac=function(bt){return new(bt||mt)(t.\u0275\u0275directiveInject(ne.G),t.\u0275\u0275directiveInject(K.$),t.\u0275\u0275directiveInject(yn.c),t.\u0275\u0275directiveInject(on.D),t.\u0275\u0275directiveInject(Mo.gz),t.\u0275\u0275directiveInject(t.ChangeDetectorRef),t.\u0275\u0275directiveInject(I.vZ),t.\u0275\u0275directiveInject(Un.N),t.\u0275\u0275directiveInject(v.G),t.\u0275\u0275directiveInject(Z.Nw),t.\u0275\u0275directiveInject(yo.l),t.\u0275\u0275directiveInject(t.ElementRef),t.\u0275\u0275directiveInject(l.h),t.\u0275\u0275directiveInject(zo.Z),t.\u0275\u0275directiveInject(c.d),t.\u0275\u0275directiveInject(G._),t.\u0275\u0275directiveInject(t.NgZone))},mt.\u0275cmp=t.\u0275\u0275defineComponent({type:mt,selectors:[["mobile-scorecard"]],features:[t.\u0275\u0275ProvidersFeature((0,m.ev)([],Ne.W,!0)),t.\u0275\u0275InheritDefinitionFeature],decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["noScorecard",""],["noGoals",""],[1,"scorecard"],[4,"ngFor","ngForOf","ngForTrackBy"],["mobile-goal-group","",3,"scorecard","goal","color","showChildren","showChildrenChange",4,"ngIf"],["mobile-goal-group","",3,"scorecard","goal","color","showChildren","showChildrenChange"],["goalGroups",""],[3,"scorecard"],[1,"center-text"],["loading",""],["localize","Scorecard_DoesNotExist"],["localize","Scorecard_Loading"]],template:function(bt,ht){if(1&bt&&(t.\u0275\u0275template(0,bo,5,4,"ng-container",0),t.\u0275\u0275pipe(1,"async"),t.\u0275\u0275template(2,Io,5,4,"ng-template",null,1,t.\u0275\u0275templateRefExtractor)),2&bt){var Jt=t.\u0275\u0275reference(3);t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,2,ht.scorecard$))("ngIfElse",Jt)}},dependencies:[i.NgForOf,i.NgIf,y.X,X,C,i.AsyncPipe],styles:[".scorecard[_ngcontent-%COMP%]{margin-bottom:24px}.phonePortraitLayout.showFooter[_nghost-%COMP%]   .scorecard[_ngcontent-%COMP%], .phonePortraitLayout.showFooter   [_nghost-%COMP%]   .scorecard[_ngcontent-%COMP%]{margin-bottom:96px}.phoneLandscapeLayout.showFooter[_nghost-%COMP%]   .scorecard[_ngcontent-%COMP%], .phoneLandscapeLayout.showFooter   [_nghost-%COMP%]   .scorecard[_ngcontent-%COMP%]{margin-bottom:64px}.phoneLandscapeLayout.showFooter   .footer-unlocked[_nghost-%COMP%]   .scorecard[_ngcontent-%COMP%], .phoneLandscapeLayout.showFooter   .footer-unlocked   [_nghost-%COMP%]   .scorecard[_ngcontent-%COMP%], .phonePortraitLayout.showFooter   .footer-unlocked[_nghost-%COMP%]   .scorecard[_ngcontent-%COMP%], .phonePortraitLayout.showFooter   .footer-unlocked   [_nghost-%COMP%]   .scorecard[_ngcontent-%COMP%]{min-height:calc(100vh - 100px)}.phonePortraitLayout.detailsPaneOpen[_nghost-%COMP%]   .scorecard[_ngcontent-%COMP%], .phonePortraitLayout.detailsPaneOpen   [_nghost-%COMP%]   .scorecard[_ngcontent-%COMP%], .tabletPortraitLayout.detailsPaneOpen[_nghost-%COMP%]   .scorecard[_ngcontent-%COMP%], .tabletPortraitLayout.detailsPaneOpen   [_nghost-%COMP%]   .scorecard[_ngcontent-%COMP%], .tabletLandscapeLayout.detailsPaneOpen[_nghost-%COMP%]   .scorecard[_ngcontent-%COMP%], .tabletLandscapeLayout.detailsPaneOpen   [_nghost-%COMP%]   .scorecard[_ngcontent-%COMP%]{margin-bottom:80vh}"],changeDetection:0}),mt}(Qe.o),Ho=n(67659),Wn=n(57162),we=n(77906),Gn=n(95859),Ro=n(88119),ho=n(17177),Wo=[{componentId:"MobileScorecardComponentId",type:Po}],Ao=function(){function lt(){}return lt.\u0275fac=function(Ke){return new(Ke||lt)},lt.\u0275mod=t.\u0275\u0275defineNgModule({type:lt}),lt.\u0275inj=t.\u0275\u0275defineInjector({imports:[i.CommonModule,Wn.GoalsUIModule,we.N.withManifests(Wo),ae.Ps,Ro.N,Gn.v,Ho._,ho.T6]}),lt}()},73088:function(ct,Ge,n){"use strict";n.d(Ge,{F:function(){return i}});var i=new(n(50423).InjectionToken)("ScorecardActionsService")},60166:function(ct,Ge,n){"use strict";n.d(Ge,{M:function(){return i}});var i=new(n(50423).InjectionToken)("ScorecardHostService")},98587:function(ct,Ge,n){"use strict";n.d(Ge,{u:function(){return i}});var i=new(n(50423).InjectionToken)("ScorecardSettingsService")},82792:function(ct,Ge,n){"use strict";n.d(Ge,{t:function(){return V}});var t=n(81337),i=n(41114),w="PBI.EmailsList.PasteInfo",a=i.cx[w]=(0,i.b1)(w),d=n(93247),p=n(50423),l=n(17174),c=n(89075),y=n(33567),r=n(2142),C=n(73221),m=n(46544),k=n(35510),O=n(30794),s=n(40133),ne=n(11547),ee=n(58417),Z=n(82762),v=n(37272),I=n(14172),H=n(77526),G=n(57243),Y=n(69903),ie=n(81905),ye=n(22318),ae=n(6663),J=n(59973),N=n(83317),he=n(17653),pe=n(42195),ce=n(59822),ge=n(48787),se=n(15910),xe=n(65181),me=n(14463),Oe=n(59055),Ce=n(629),Le=function(){function b(L,T,X){this.promiseFactory=L,this.telemetryService=T,this.httpService=X}return b.prototype.emailIsInVerifiedDomain=function(L){return(0,t.mG)(this,void 0,void 0,function(){var T,X;return(0,t.Jh)(this,function(Ne){switch(Ne.label){case 0:T=this.promiseFactory.defer(),Ne.label=1;case 1:return Ne.trys.push([1,3,,4]),[4,this.getVerifiedDomains()];case 2:return X=Ne.sent(),T.resolve(this.verifyEmailInGivenVerifiedDomains(L,X)),[3,4];case 3:return Ne.sent(),T.reject(),[3,4];case 4:return[2,T.promise]}})})},b.prototype.getVerifiedDomains=function(){return(0,t.mG)(this,void 0,void 0,function(){var L,T,X,ue,Ne,Qe;return(0,t.Jh)(this,function(it){switch(it.label){case 0:return this.verifiedDomainsPromise?[2,this.verifiedDomainsPromise]:[3,1];case 1:L=this.promiseFactory.defer(),T=this.telemetryService.startEvent(Oe.f8),X=this.httpService.powerbiRequestOptions(T.event,"TenantVerifiedDomains"),it.label=2;case 2:return it.trys.push([2,4,,5]),[4,this.httpService.get("powerbi/invitation/verifiedDomains",X)];case 3:return ue=it.sent(),Ne={verifiedDomains:{},blockedDomains:{}},(Qe=ue.data).verifiedDomains&&Qe.verifiedDomains.map(function(ut){var ot=ut.toUpperCase();return Ne.verifiedDomains[ot]=ot,ot}),Qe.blockedDomains&&Qe.blockedDomains.map(function(ut){var ot=ut.toUpperCase();return Ne.blockedDomains[ot]=ot,ot}),L.resolve(Ne),T.resolve(),[3,5];case 4:return it.sent(),L.reject(),[3,5];case 5:return this.verifiedDomainsPromise=L.promise,[2,this.verifiedDomainsPromise]}})})},b.prototype.verifyEmailInGivenVerifiedDomains=function(L,T){var X=L.split("@");return!(!T||!_.isEmpty(T.verifiedDomains))||X.length>1&&T&&!!T.verifiedDomains[X[1].toUpperCase()]},b.\u0275fac=function(T){return new(T||b)(p.\u0275\u0275inject(me.t),p.\u0275\u0275inject(m.y0),p.\u0275\u0275inject(Ce.M))},b.\u0275prov=p.\u0275\u0275defineInjectable({token:b,factory:b.\u0275fac,providedIn:"root"}),b}(),ze=n(77476),$e=n(34895),We=n(21661),He=n(33846),Je=n(87650),j=n(86663),tt=n(73425),Ue=n(44641),oe=n(223),h=["emailsInput"],g=["emailsList"];function u(b,L){if(1&b&&(p.\u0275\u0275elementStart(0,"div",14),p.\u0275\u0275text(1),p.\u0275\u0275elementEnd()),2&b){var T=L.ngIf,X=p.\u0275\u0275nextContext();p.\u0275\u0275advance(1),p.\u0275\u0275textInterpolate1(" ",X.getSuggestionsText(T)," ")}}function F(b,L){if(1&b&&p.\u0275\u0275text(0),2&b){var T=p.\u0275\u0275nextContext();p.\u0275\u0275textInterpolate(T.inputLabel)}}function W(b,L){if(1&b&&p.\u0275\u0275element(0,"pbi-icon",15),2&b){var T=p.\u0275\u0275nextContext();p.\u0275\u0275property("name",T.inputIcon)}}function te(b,L){1&b&&p.\u0275\u0275element(0,"pbi-icon",21)}var U=function(L,T){return{userEmail:L,displayName:T}};function Q(b,L){if(1&b){var T=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"mat-chip",18),p.\u0275\u0275listener("removed",function(){var Xe=p.\u0275\u0275restoreView(T).$implicit,it=p.\u0275\u0275nextContext(2);return p.\u0275\u0275resetView(it.remove(Xe))}),p.\u0275\u0275element(1,"user-details-host",19),p.\u0275\u0275template(2,te,1,0,"pbi-icon",20),p.\u0275\u0275elementEnd()}if(2&b){var X=L.$implicit,ue=p.\u0275\u0275nextContext(2);p.\u0275\u0275property("disabled",ue.disabled),p.\u0275\u0275advance(1),p.\u0275\u0275property("details",p.\u0275\u0275pureFunction2(5,U,null==X?null:X.userPrincipalName,null==X?null:X.displayName))("forceShowDisplayNameInTooltip",!0)("coloredDefaultUserPhoto",ue.coloredDefaultUserPhoto),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",!(null!=ue.ngControl&&ue.ngControl.disabled))}}function B(b,L){if(1&b&&(p.\u0275\u0275elementStart(0,"div",16),p.\u0275\u0275template(1,Q,3,8,"mat-chip",17),p.\u0275\u0275pipe(2,"async"),p.\u0275\u0275elementEnd()),2&b){var T=p.\u0275\u0275nextContext();p.\u0275\u0275advance(1),p.\u0275\u0275property("ngForOf",p.\u0275\u0275pipeBind1(2,1,T.selectedUsers$))}}function P(b,L){1&b&&(p.\u0275\u0275elementStart(0,"div",22),p.\u0275\u0275element(1,"spinner"),p.\u0275\u0275elementEnd())}function q(b,L){if(1&b){var T=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"input",23,24),p.\u0275\u0275listener("matChipInputTokenEnd",function(Xe){p.\u0275\u0275restoreView(T);var it=p.\u0275\u0275nextContext();return p.\u0275\u0275resetView(it.add(Xe,2))})("paste",function(Xe){p.\u0275\u0275restoreView(T);var it=p.\u0275\u0275reference(2);return p.\u0275\u0275nextContext().onPaste(Xe),p.\u0275\u0275resetView(it.closePanel())})("blur",function(Xe){p.\u0275\u0275restoreView(T);var it=p.\u0275\u0275nextContext();return p.\u0275\u0275resetView(it.onBlur(Xe))})("focus",function(Xe){p.\u0275\u0275restoreView(T);var it=p.\u0275\u0275nextContext();return p.\u0275\u0275resetView(it.onFocus(Xe))})("keydown.escape",function(Xe){p.\u0275\u0275restoreView(T);var it=p.\u0275\u0275reference(2),ut=p.\u0275\u0275nextContext();return p.\u0275\u0275resetView(ut.onEscape(Xe,it))}),p.\u0275\u0275pipe(3,"async"),p.\u0275\u0275elementEnd()}if(2&b){var X=p.\u0275\u0275nextContext(),ue=p.\u0275\u0275reference(13),Ne=p.\u0275\u0275reference(6);p.\u0275\u0275property("placeholder",p.\u0275\u0275pipeBind1(3,9,X.selectedUsers$).length>0?void 0:X.inputPlaceholder)("disabled",X.disabled)("formControl",X.emailsListControl)("matAutocomplete",ue)("matChipInputFor",Ne)("matChipInputSeparatorKeyCodes",X.separatorKeysCodes),p.\u0275\u0275attribute("title",X.inputPlaceholder)("aria-label",X.inputAriaLabelledBy?void 0:X.inputPlaceholder)("aria-labelledby",X.inputAriaLabelledBy)}}function le(b,L){if(1&b&&(p.\u0275\u0275elementStart(0,"mat-option",25),p.\u0275\u0275element(1,"user-details-host",26),p.\u0275\u0275elementEnd()),2&b){var T=L.$implicit,X=p.\u0275\u0275nextContext();p.\u0275\u0275property("value",T),p.\u0275\u0275advance(1),p.\u0275\u0275property("showOneLine",!1)("details",p.\u0275\u0275pureFunction2(6,U,X.getUserEmail(T),T.displayName))("forceShowDisplayNameInTooltip",!0)("coloredDefaultUserPhoto",X.coloredDefaultUserPhoto),p.\u0275\u0275attribute("data-testid",X.getUserEmail(T))}}function de(b,L){if(1&b&&(p.\u0275\u0275elementContainerStart(0),p.\u0275\u0275elementStart(1,"div",27),p.\u0275\u0275element(2,"message-banner",28),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementContainerEnd()),2&b){var T=p.\u0275\u0275nextContext();p.\u0275\u0275advance(2),p.\u0275\u0275property("viewModel",T.messageBannerViewModel)}}var V=function(b){function L(T,X,ue,Ne,Qe,Xe){var it=b.call(this)||this;return it.userDirectoryHttpService=T,it.localizationService=X,it.domainHelperService=ue,it.telemetryService=Ne,it.cdr=Qe,it.ngControl=Xe,it.showRelevantUsers=!0,it.defaultSelectedUsers=[],it.coloredDefaultUserPhoto=!1,it.onInputFocus=new p.EventEmitter,it.awaitingRequestsCount=new k.X(0),it.isBusy$=it.awaitingRequestsCount.pipe((0,I.U)(function(ut){return _.gt(ut,0)}),(0,H.x)(),(0,G.d)(1)),it.separatorKeysCodes=[d.K5],it.emailsListControl=new l.p4("",null,it.findUserValidator()),it.emailSuggestionResults=new k.X([]),it.selectedUsers$=new k.X([]),it.onSelectedUsersChange=function(){},it.onComponentBlur=function(){},it.ngControl&&(it.ngControl.valueAccessor=it),it}return(0,t.ZT)(L,b),L.prototype.ngOnInit=function(){var T=this;this.pasteHandler=new O.xQ,this.lifecycleSubscriptions.add(this.pasteHandler.pipe((0,Y.p)(1e3),(0,ie.w)(function(X){return(0,t.mG)(T,void 0,void 0,function(){var ue,Ne,Qe,Xe,it,ut;return(0,t.Jh)(this,function(ot){switch(ot.label){case 0:return this.emailsListControl.markAsPending(),ue=X.clipboardData.getData("Text").split(/;|,|\n/).filter(function(pt){return _.trim(pt).length>0}),Ne=_.size(ue)<=100,Qe=this.telemetryService.startEvent(a,{inputCount:_.size(ue)}),[4,this.addUser(ue,Ne,3)];case 1:return Xe=ot.sent(),it=0===_.size(Xe),this.propagateSelectedUsersChange(it),this.emailsInput.nativeElement.value=_.join(Xe,","),(ut=_.size(ue)>100)&&this.emailsListControl.setErrors({TooManyUsers:_.size(ue)}),(it||ut)&&this.cdr.markForCheck(),Qe.resolve(),[2]}})})})).subscribe()),this.lifecycleSubscriptions.add(this.emailsListControl.statusChanges.pipe((0,ye.O)(this.emailsListControl.status),(0,H.x)(),(0,ae.G)(),(0,J.h)(function(X){return"PENDING"===X[0]})).subscribe(function(){return T.cdr.markForCheck()})),this.actions&&this.actions.pipe((0,N.R)(this.onDestroy$)).subscribe(function(X){0===X&&T.reset()}),this.applyDefaultSelectedUsers(),this.onChanges$.subscribe(function(X){T.onChanges(X)})},L.prototype.ngAfterViewInit=function(){this.notUseUnallowedAttributes()},L.prototype.onChanges=function(T){T.defaultSelectedUsers&&this.applyDefaultSelectedUsers()},L.prototype.applyDefaultSelectedUsers=function(){this.defaultSelectedUsers&&this.defaultSelectedUsers.length>0&&this.selectedUsers$.value&&0===this.selectedUsers$.value.length&&this.selectedUsers$.next(this.defaultSelectedUsers)},L.prototype.reset=function(){this.selectedUsers$.next([]),this.emailsListControl.setValue(null),this.emailsInput&&(this.emailsInput.nativeElement.value=""),this.propagateSelectedUsersChange(!0)},L.prototype.propagateSelectedUsersChange=function(T){T&&this.emailsListControl.setErrors(null),this.onSelectedUsersChange(this.selectedUsers$.value)},L.prototype.add=function(T,X){var ue;return(0,t.mG)(this,void 0,void 0,function(){var Ne;return(0,t.Jh)(this,function(it){switch(it.label){case 0:return this.emailsListControl.invalid||this.emailsListControl.pending?[2]:(Ne=null===(ue=T.chipInput)||void 0===ue?void 0:ue.inputElement,[4,this.addUser([T.value],!0,X)]);case 1:return 0===it.sent().length&&(Ne&&(Ne.value=""),this.propagateSelectedUsersChange(!0),this.emailsListControl.setValue(null)),[2]}})})},Object.defineProperty(L.prototype,"hasValidPendingInput",{get:function(){var X=this.emailsInput.nativeElement.value;return!!X&&y.JJ.test(X)},enumerable:!1,configurable:!0}),L.prototype.addUser=function(T,X,ue){return(0,t.mG)(this,void 0,void 0,function(){var Ne,Qe,Xe,it,ut,ot;return(0,t.Jh)(this,function(pt){switch(pt.label){case 0:Ne=[],Qe=0,Xe=T,pt.label=1;case 1:return Qe<Xe.length?(it=Xe[Qe],(it=_.trim(it))?(ut=void 0,X?[4,this.findUsers(it).pipe((0,I.U)(function(Ye){return 1===Ye.length?Ye[0]:null})).toPromise()]:[3,3]):[3,6]):[3,7];case 2:ut=pt.sent(),pt.label=3;case 3:return this.emailsListControl.value||1!==ue?(ot=void 0,ut?[3,5]:[4,this.validateEmail(it,X&&this.checkValidOrgUser,!X||this.allowExternalUsers)]):[3,6];case 4:ot=pt.sent(),pt.label=5;case 5:ot?(this.emailsListControl.setErrors(ot),Ne.push(it),this.cdr.markForCheck()):this.selectedUsers$.next(this.selectedUsers$.value.concat([ut??this.getADUserMetadataFromEmail(it)])),pt.label=6;case 6:return Qe++,[3,1];case 7:return[2,Ne]}})})},L.prototype.getADUserMetadataFromEmail=function(T){return{displayName:void 0,userPrincipalName:T,objectId:void 0,emailAddress:T,objectType:1,isSecurityGroup:!1}},L.prototype.remove=function(T){this.selectedUsers$.next(this.selectedUsers$.value.filter(function(X){return X!==T})),this.propagateSelectedUsersChange(!0)},L.prototype.select=function(T){this.selectedUsers$.next(this.selectedUsers$.value.concat([T.option.value])),this.propagateSelectedUsersChange(!0),this.emailsInput.nativeElement.value="",this.emailsListControl.setValue(null)},L.prototype.findUserValidator=function(){var T=this;return function(X){return(0,s.H)(500).pipe((0,ie.w)(function(){var ue=_.trim(X.value);return _.isString(X.value)&&ue?T.findUsers(X.value).pipe((0,he.b)(function(Qe){return T.emailSuggestionResults.next(Qe)}),(0,pe.zg)(function(Qe){return _.isEmpty(Qe)?T.validateEmail(X.value,T.checkValidOrgUser,T.allowExternalUsers):(0,ne.of)(null)})):(T.emailSuggestionResults.next([]),(0,ne.of)(null))}))}},L.prototype.sendFindUsersRequest=function(T){var X=this;return function(b,L){return new ee.y(function(T){var X,ue;try{X=b()}catch(Xe){return void T.error(Xe)}try{ue=L()}catch(Xe){return void T.error(Xe)}var Qe=(ue?(0,Z.D)(ue):v.E).subscribe(T);return function(){Qe.unsubscribe(),X&&X.unsubscribe()}})}(function(){return{unsubscribe:function(){return X.awaitingRequestsCount.next(X.awaitingRequestsCount.value-1)}}},function(){var Ne=X.allowAnyGroup||X.allowSecurityGroups||X.allowUnifiedGroups||X.allowEmailEnabledSecurityGroups?X.blockUsers?2:3:1;return X.awaitingRequestsCount.next(X.awaitingRequestsCount.value+1),X.userDirectoryHttpService.findUsers(T,Ne,r.OsI,!!X.includeGuests,X.showRelevantUsers,X.allowAnyGroup,!0)})},L.prototype.findUsers=function(T){var X=this;return this.sendFindUsersRequest(T).pipe((0,I.U)(function(ue){return _.reduce(ue.data,function(Ne,Qe){var Xe;if(X.isValidObjectType(Qe)&&-1===_.findIndex(X.selectedUsers$.value,function(Ye){return X.compareADEntities(Qe,Ye)})){var ut=Qe.displayName&&Qe.displayName.toLocaleLowerCase()===T.toLocaleLowerCase(),ot=null===(Xe=Qe.userPrincipalName)||void 0===Xe?void 0:Xe.split("@")[0],pt=ot&&ot.toLocaleLowerCase()===T.toLocaleLowerCase();ut||pt?Ne.unshift(Qe):Ne.push(Qe)}return Ne},[])}),(0,ce.K)(function(){return(0,ne.of)([])}))},L.prototype.compareADEntities=function(T,X){return T.userPrincipalName&&X.userPrincipalName?T.userPrincipalName===X.userPrincipalName:!(!T.objectId||!X.objectId)&&T.objectId===X.objectId},L.prototype.writeValue=function(T){T&&this.selectedUsers$.next(T)},L.prototype.registerOnChange=function(T){this.onSelectedUsersChange=T},L.prototype.registerOnTouched=function(T){this.onComponentBlur=T},L.prototype.onPaste=function(T){T.preventDefault(),this.pasteHandler.next(T)},Object.defineProperty(L.prototype,"messageBannerViewModel",{get:function(){var X=this.localizationService.get("ClientError_UnknownClientErrorValue"),ue=1;return this.emailsListControl.hasError("DuplicateEmail")||this.emailsListControl.hasError("InvalidEmail")?X=this.localizationService.get("Sharing_InvalidEmail"):this.emailsListControl.hasError("ExternalUser")?(X=this.localizationService.format("Sharing_ExternalOrganization",this.emailsListControl.getError("ExternalUser")),ue=1):this.emailsListControl.hasError("InvalidOrgUser")?(X=this.localizationService.format("GrantAccessPane_InvalidEmails",this.emailsListControl.getError("InvalidOrgUser")),ue=1):this.emailsListControl.hasError("TooManyUsers")&&(X=this.localizationService.format("TooManyUsers_BlockedEmails",this.emailsListControl.getError("TooManyUsers")),ue=1),{bannerType:ue,iconName:1===ue?"pbi-glyph-error-circle-exclamation":"pbi-glyph-warning",message:X}},enumerable:!1,configurable:!0}),L.prototype.onBlur=function(T){return(0,t.mG)(this,void 0,void 0,function(){var X,ue;return(0,t.Jh)(this,function(Ne){switch(Ne.label){case 0:return T.relatedTarget&&"MAT-OPTION"===T.relatedTarget.tagName?[2]:(this.onComponentBlur(this.selectedUsers$.value),this.addUserOnBlur?(X=this.emailsInput.nativeElement,this.emailsListControl.pending?[4,this.emailsListControl.statusChanges.pipe((0,J.h)(function(Qe){return"PENDING"!==Qe}),(0,ge.q)(1)).toPromise()]:[3,2]):[3,3]);case 1:Ne.sent(),Ne.label=2;case 2:return(ue=_.trim(X.value))?[2,this.add({input:X,value:ue,chipInput:new c.IP(this.emailsInput,{separatorKeyCodes:[]})},1)]:[2];case 3:return[2]}})})},L.prototype.onEscape=function(T,X){var ue;null!==(ue=X?.autocomplete)&&void 0!==ue&&ue.isOpen&&(T?.stopPropagation(),X.closePanel())},L.prototype.onFocus=function(T){this.onInputFocus.emit(T)},L.prototype.validateEmail=function(T,X,ue){return void 0===ue&&(ue=!1),(0,t.mG)(this,void 0,void 0,function(){var Qe;return(0,t.Jh)(this,function(Xe){switch(Xe.label){case 0:return y.JJ.test(T)?-1!==_.findIndex(this.selectedUsers$.value,function(it){return it.userPrincipalName===T})?[2,{DuplicateEmail:!0}]:[4,this.domainHelperService.emailIsInVerifiedDomain(T)]:[3,2];case 1:return(Qe=Xe.sent())||ue?Qe&&X?[2,{InvalidOrgUser:T}]:[2,null]:[2,{ExternalUser:T}];case 2:return[2,{InvalidEmail:!0}]}})})},L.prototype.isValidObjectType=function(T){return 2===T.objectType?!!this.allowAnyGroup||(T.isSecurityGroup?this.allowSecurityGroups||this.allowEmailEnabledSecurityGroups&&3===T.groupType:2===T.groupType?this.allowDistributionLists:this.allowUnifiedGroups):1===T.objectType&&T.aadAppId?this.allowServicePrincipals:(1===T.objectType||3===T.objectType)&&!this.blockUsers},L.prototype.getUserEmail=function(T){return T.userPrincipalName||T.emailAddress||(T.aadAppId?"AppID: "+T.aadAppId:null)},L.prototype.notUseUnallowedAttributes=function(){this.emailsList._multiple=void 0,this.emailsList.ariaOrientation=void 0},L.prototype.getSuggestionsText=function(T){return T>0?this.localizationService.format("Email_Address_Suggestion_Count_Text",[T]):""},L.\u0275fac=function(X){return new(X||L)(p.\u0275\u0275directiveInject(se.W),p.\u0275\u0275directiveInject(xe.o),p.\u0275\u0275directiveInject(Le),p.\u0275\u0275directiveInject(m.y0),p.\u0275\u0275directiveInject(p.ChangeDetectorRef),p.\u0275\u0275directiveInject(l.a5,10))},L.\u0275cmp=p.\u0275\u0275defineComponent({type:L,selectors:[["emails-list-modern"]],viewQuery:function(X,ue){if(1&X&&(p.\u0275\u0275viewQuery(h,5),p.\u0275\u0275viewQuery(g,5)),2&X){var Ne=void 0;p.\u0275\u0275queryRefresh(Ne=p.\u0275\u0275loadQuery())&&(ue.emailsInput=Ne.first),p.\u0275\u0275queryRefresh(Ne=p.\u0275\u0275loadQuery())&&(ue.emailsList=Ne.first)}},hostVars:4,hostBindings:function(X,ue){2&X&&p.\u0275\u0275classProp("disabled",(null==ue.ngControl?null:ue.ngControl.disabled)||ue.disabled)("invalid",(null==ue.ngControl?null:ue.ngControl.invalid)||ue.emailsListControl.invalid)},inputs:{allowAnyGroup:"allowAnyGroup",allowSecurityGroups:"allowSecurityGroups",allowUnifiedGroups:"allowUnifiedGroups",allowEmailEnabledSecurityGroups:"allowEmailEnabledSecurityGroups",allowObjectIds:"allowObjectIds",blockUsers:"blockUsers",isRequired:"isRequired",includeGuests:"includeGuests",allowExternalUsers:"allowExternalUsers",allowDistributionLists:"allowDistributionLists",allowServicePrincipals:"allowServicePrincipals",inputLabel:"inputLabel",inputPlaceholder:"inputPlaceholder",inputIcon:"inputIcon",inputAriaLabelledBy:"inputAriaLabelledBy",disabled:"disabled",maxSelectableUsers:"maxSelectableUsers",hideChips:"hideChips",hideError:"hideError",hideInput:"hideInput",addUserOnBlur:"addUserOnBlur",checkValidOrgUser:"checkValidOrgUser",showRelevantUsers:"showRelevantUsers",actions:"actions",defaultSelectedUsers:"defaultSelectedUsers",coloredDefaultUserPhoto:"coloredDefaultUserPhoto"},outputs:{onInputFocus:"onInputFocus"},features:[p.\u0275\u0275InheritDefinitionFeature],decls:17,vars:17,consts:[["id","emailsList","appearance","none","cdkScrollable","",1,"emails-list"],["class","x-screen-reader","aria-live","assertive",4,"ngIf"],[1,"email-list-input-wrapper"],[3,"ngIf"],["role","listbox",1,"chip-list",3,"required"],["emailsList",""],["class","inputIcon","size","small",3,"name",4,"ngIf"],["class","chips-wrapper",4,"ngIf"],["class","autoCompleteSpinner",4,"ngIf"],["matChipInput","","aria-owns","email-list-modern-suggestions","aria-controls","email-list-modern-suggestions","data-testid","emails-list-input","data-unique-id","EmailsListInput",3,"placeholder","disabled","formControl","matAutocomplete","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputTokenEnd","paste","blur","focus","keydown.escape",4,"ngIf"],["id","email-list-modern-suggestions","data-testid","email-sugessions-dropdown",3,"optionSelected"],["auto","matAutocomplete"],["data-automation-type","Suggestion",3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["aria-live","assertive",1,"x-screen-reader"],["size","small",1,"inputIcon",3,"name"],[1,"chips-wrapper"],["defaultTabIndex","0","tabindex","0","role","option",3,"disabled","removed",4,"ngFor","ngForOf"],["defaultTabIndex","0","tabindex","0","role","option",3,"disabled","removed"],[3,"details","forceShowDisplayNameInTooltip","coloredDefaultUserPhoto"],["name","close","size","mini","matChipRemove","",4,"ngIf"],["name","close","size","mini","matChipRemove",""],[1,"autoCompleteSpinner"],["matChipInput","","aria-owns","email-list-modern-suggestions","aria-controls","email-list-modern-suggestions","data-testid","emails-list-input","data-unique-id","EmailsListInput",3,"placeholder","disabled","formControl","matAutocomplete","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputTokenEnd","paste","blur","focus","keydown.escape"],["emailsInput","","trigger","matAutocompleteTrigger"],["data-automation-type","Suggestion",3,"value"],[3,"showOneLine","details","forceShowDisplayNameInTooltip","coloredDefaultUserPhoto"],["role","alert","aria-atomic","true"],[3,"viewModel"]],template:function(X,ue){var Ne;(1&X&&(p.\u0275\u0275elementStart(0,"mat-form-field",0),p.\u0275\u0275template(1,u,2,1,"div",1),p.\u0275\u0275pipe(2,"async"),p.\u0275\u0275elementStart(3,"label",2),p.\u0275\u0275template(4,F,1,1,"ng-template",3),p.\u0275\u0275elementStart(5,"mat-chip-list",4,5),p.\u0275\u0275template(7,W,1,1,"pbi-icon",6),p.\u0275\u0275template(8,B,3,3,"div",7),p.\u0275\u0275template(9,P,2,0,"div",8),p.\u0275\u0275elementEnd(),p.\u0275\u0275template(10,q,4,11,"input",9),p.\u0275\u0275pipe(11,"async"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(12,"mat-autocomplete",10,11),p.\u0275\u0275listener("optionSelected",function(Xe){return ue.select(Xe)}),p.\u0275\u0275template(14,le,2,9,"mat-option",12),p.\u0275\u0275pipe(15,"async"),p.\u0275\u0275elementEnd()(),p.\u0275\u0275template(16,de,3,1,"ng-container",13)),2&X)&&(p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",null==(Ne=p.\u0275\u0275pipeBind1(2,11,ue.emailSuggestionResults))?null:Ne.length),p.\u0275\u0275advance(3),p.\u0275\u0275property("ngIf",ue.inputLabel),p.\u0275\u0275advance(1),p.\u0275\u0275property("required",ue.isRequired),p.\u0275\u0275attribute("aria-label",ue.inputAriaLabelledBy?void 0:ue.inputPlaceholder)("aria-labelledby",ue.inputAriaLabelledBy),p.\u0275\u0275advance(2),p.\u0275\u0275property("ngIf",!!ue.inputIcon),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",!ue.hideChips),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",ue.emailsListControl.pending),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",!ue.hideInput&&(!ue.maxSelectableUsers||p.\u0275\u0275pipeBind1(11,13,ue.selectedUsers$).length<ue.maxSelectableUsers)),p.\u0275\u0275advance(4),p.\u0275\u0275property("ngForOf",p.\u0275\u0275pipeBind1(15,15,ue.emailSuggestionResults)),p.\u0275\u0275advance(2),p.\u0275\u0275property("ngIf",ue.emailsListControl.invalid&&!ue.hideError))},dependencies:[ze.NgForOf,ze.NgIf,$e.VN,$e.QJ,We.PQ,He.CK,c.ir,c.lw,c.IP,c.Y6,Je.v_,l.Fj,l.JJ,l.oH,j._,tt.O,Ue.A,oe.s,ze.AsyncPipe],styles:['[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   input[_ngcontent-%COMP%]{border:0px solid;width:min-content;min-height:32px;padding:6px 8px!important;margin:0!important;box-sizing:border-box;caret-color:auto;line-height:1.4}[_nghost-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{display:block;line-height:1.125}[_nghost-%COMP%]   .chip-list[_ngcontent-%COMP%]{max-width:100%;display:flex}[_nghost-%COMP%]   .chip-list[_ngcontent-%COMP%]     .mat-chip-list-wrapper{max-width:100%;margin:0}[_nghost-%COMP%]   .chip-list[_ngcontent-%COMP%]   .chips-wrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;max-height:190px;overflow:auto}[_nghost-%COMP%]   .inputIcon[_ngcontent-%COMP%]{padding:0 8px}[_nghost-%COMP%]     .mat-chip{background-color:var(--fluent-theme-neutral-lighter-color, #F3F2F1);font-weight:400;padding:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;-o-text-overflow:ellipsis}[_nghost-%COMP%]     .mat-standard-chip{min-height:24px!important}[_nghost-%COMP%]     .mat-standard-chip.mat-chip-with-trailing-icon{padding:0 2px 0 0!important}[_nghost-%COMP%]     .mat-standard-chip .mat-chip-remove{height:12px!important}[_nghost-%COMP%]     .mat-form-field-appearance-standard, [_nghost-%COMP%]     .mat-form-field-wrapper, [_nghost-%COMP%]     .mat-form-field-flex{padding:0}[_nghost-%COMP%]     .mat-form-field-infix{border:0px;padding:0;width:min-content;min-height:32px}[_nghost-%COMP%]     .mat-form-field-appearance-standard .mat-form-field-flex, [_nghost-%COMP%]     .mat-chip-list-wrapper{padding-top:0!important;padding-bottom:0!important}[_nghost-%COMP%]     user-details-host{width:calc(100% - 24px)}[_nghost-%COMP%]     user-details{width:100%}[_nghost-%COMP%]     .user-info{width:calc(100% - 29px)}[_nghost-%COMP%]     .user-name, [_nghost-%COMP%]     .user-email{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;-o-text-overflow:ellipsis}[_nghost-%COMP%]   .email-list-input-wrapper[_ngcontent-%COMP%]{display:flex;flex-flow:wrap}[_nghost-%COMP%]   .email-list-input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400)}[_nghost-%COMP%]   .email-list-input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{opacity:1;color:var(--colorNeutralForeground4, #707070)}[_nghost-%COMP%]   .emails-list[_ngcontent-%COMP%]{border:1px solid var(--fluent-theme-neutral-tertia-color, #A19F9D);border-radius:2px;background-color:var(--fluent-theme-white-color, #FFF)}[_nghost-%COMP%]   .emails-list[_ngcontent-%COMP%]:hover{border-color:var(--fluent-theme-black-color, #000)}[_nghost-%COMP%]   .emails-list[_ngcontent-%COMP%]:focus-within{border:2px solid var(--colorNeutralStrokeFocus2)}[_nghost-%COMP%]   .autoCompleteSpinner[_ngcontent-%COMP%]{position:absolute;top:4px;right:6px;overflow:auto}.invalid[_nghost-%COMP%]   .emails-list[_ngcontent-%COMP%]{border-color:var(--fluent-theme-error-dark-color, #A80000)}.disabled[_nghost-%COMP%]   .emails-list[_ngcontent-%COMP%]{background-color:var(--fluent-theme-neutral-lighter-color, #F3F2F1)}.disabled[_nghost-%COMP%]   .emails-list[_ngcontent-%COMP%]   .chip-list[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{background-color:var(--fluent-theme-neutral-light-color, #EDEBE9)}.disabled[_nghost-%COMP%]   .emails-list[_ngcontent-%COMP%]   .chip-list[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]   pbi-icon[_ngcontent-%COMP%]{display:none}.disabled[_nghost-%COMP%]   .emails-list[_ngcontent-%COMP%]   .chip-list[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]   user-details-host[_ngcontent-%COMP%]{width:100%}html:not([dir="rtl"])   .disabled[_nghost-%COMP%]   .emails-list[_ngcontent-%COMP%]   .chip-list[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]   user-details-host[_ngcontent-%COMP%]{margin-right:12px}html[dir="rtl"]   .disabled[_nghost-%COMP%]   .emails-list[_ngcontent-%COMP%]   .chip-list[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]   user-details-host[_ngcontent-%COMP%]{margin-left:12px}.disabled[_nghost-%COMP%]   .emails-list[_ngcontent-%COMP%]   .chip-list[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:var(--colorNeutralForegroundDisabled, #bdbdbd)}user-details-host[_ngcontent-%COMP%]     .user-email, user-details-host[_ngcontent-%COMP%]     .user-name{line-height:16px}.mat-option.mat-active[_ngcontent-%COMP%]{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color)}.x-screen-reader[_ngcontent-%COMP%]{position:absolute!important;overflow:hidden!important;clip:rect(1px,1px,1px,1px)!important;width:1px!important;height:1px!important;border:0!important;padding:0!important;margin:0!important}'],changeDetection:0}),L}(C.w)},87758:function(ct,Ge,n){"use strict";n.d(Ge,{c:function(){return C}});var t=n(62458),i=n(50423),w=n(77476),a=n(36858),d=n(223),p=function(k){return{userEmail:k}};function l(m,k){if(1&m&&(i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275element(1,"user-details-host",4),i.\u0275\u0275elementEnd()),2&m){var O=k.$implicit,s=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("details",i.\u0275\u0275pureFunction1(4,p,O))("photoSize",s.photoSize)("showUserInfo",!1)("showTooltip",!0)}}function c(m,k){if(1&m&&(i.\u0275\u0275elementStart(0,"div",5)(1,"div",6),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd()()),2&m){var O=i.\u0275\u0275nextContext(),s=i.\u0275\u0275reference(5);i.\u0275\u0275styleProp("width",O.photoSize,"px")("height",O.photoSize,"px"),i.\u0275\u0275property("pbiTooltip",s)("pbiTooltipCaretSize","small")("pbiTooltipPosition","below"),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" +",O.emails.length-O.numUsersToShow," ")}}function y(m,k){if(1&m&&(i.\u0275\u0275elementStart(0,"div",9),i.\u0275\u0275listener("click",function(ne){return ne.stopPropagation()}),i.\u0275\u0275element(1,"user-details-host",10),i.\u0275\u0275elementEnd()),2&m){var O=k.$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275property("details",i.\u0275\u0275pureFunction1(4,p,O))("showUserInfo",!0)("showOneLine",!1)("showTooltip",!1)}}function r(m,k){if(1&m&&(i.\u0275\u0275elementStart(0,"div",7),i.\u0275\u0275template(1,y,2,6,"div",8),i.\u0275\u0275pipe(2,"slice"),i.\u0275\u0275elementEnd()),2&m){var O=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",i.\u0275\u0275pipeBind2(2,1,O.emails,O.numUsersToShow))}}var C=function(){function m(){this.emails=[],this.numAvatarsToShow=5,this.avatarSize="medium",this.rowStyle="spread",this.AvatarSizeMap={smallest:{photoSize:16,spreadSpacing:8,stackOverlap:2,stackOutline:2},small:{photoSize:20,spreadSpacing:10,stackOverlap:2,stackOutline:2},medium:{photoSize:24,spreadSpacing:10,stackOverlap:4,stackOutline:2}}}return m.prototype.ngOnInit=function(){this.setSize()},m.prototype.ngOnChanges=function(k){(k.emails||k.numAvatarsToShow)&&this.setUserCount(),(k.avatarSize||k.rowStyle)&&this.setSize()},m.prototype.setUserCount=function(){this.numUsersToShow=this.emails.length>this.numAvatarsToShow?this.numAvatarsToShow-1:this.numAvatarsToShow},m.prototype.setSize=function(){var k=this.AvatarSizeMap[this.avatarSize];t.fF.assertValue(k,"Invalid size ".concat(this.avatarSize," for AvatarRow.")),this.photoSize=k.photoSize;var O=0,s=0,ne=0;"spread"===this.rowStyle?ne=k.spreadSpacing:"stack"===this.rowStyle?(O=k.stackOutline,s=-k.stackOutline,ne=-k.stackOutline-k.stackOverlap):t.fF.assertFail("Invalid style ".concat(this.rowStyle," for AvatarRow.")),this.styleVariables={"--avatar-left-margin":s+"px","--avatar-right-margin":ne+"px","--avatar-outline":O+"px"}},m.\u0275fac=function(O){return new(O||m)},m.\u0275cmp=i.\u0275\u0275defineComponent({type:m,selectors:[["avatar-row"]],inputs:{emails:"emails",numAvatarsToShow:"numAvatarsToShow",avatarSize:"avatarSize",rowStyle:"rowStyle"},features:[i.\u0275\u0275NgOnChangesFeature],decls:6,vars:8,consts:[[1,"avatar-row-container"],[4,"ngFor","ngForOf"],["class","plus-number-container",3,"width","height","pbiTooltip","pbiTooltipCaretSize","pbiTooltipPosition",4,"ngIf"],["collapsedAvatars",""],[1,"user-details-host",3,"details","photoSize","showUserInfo","showTooltip"],[1,"plus-number-container",3,"pbiTooltip","pbiTooltipCaretSize","pbiTooltipPosition"],[1,"plus-number"],[1,"collapsed-avatar-list"],["class","collapsed-avatar",3,"click",4,"ngFor","ngForOf"],[1,"collapsed-avatar",3,"click"],[3,"details","showUserInfo","showOneLine","showTooltip"]],template:function(O,s){1&O&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275template(1,l,2,6,"div",1),i.\u0275\u0275pipe(2,"slice"),i.\u0275\u0275template(3,c,3,8,"div",2),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(4,r,3,4,"ng-template",null,3,i.\u0275\u0275templateRefExtractor)),2&O&&(i.\u0275\u0275styleMap(s.styleVariables),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",i.\u0275\u0275pipeBind3(2,4,s.emails,0,s.numUsersToShow)),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",s.emails.length>s.numUsersToShow))},dependencies:[w.NgForOf,w.NgIf,a.V,d.s,w.SlicePipe],styles:['.avatar-row-container[_ngcontent-%COMP%]{display:inline-flex;--avatar-outline-color: var(--fluent-theme-white-color)}.avatar-row-container[_ngcontent-%COMP%]   .user-details-host[_ngcontent-%COMP%]     .user-image{margin-left:var(--avatar-left-margin);margin-right:var(--avatar-right-margin)}.avatar-row-container[_ngcontent-%COMP%]   .user-details-host[_ngcontent-%COMP%]     .user-image>*{border:var(--avatar-outline) solid var(--avatar-outline-color)}.avatar-row-container[_ngcontent-%COMP%]   .plus-number-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;background-color:var(--fluent-theme-neutral-lighter-color, #F3F2F1);border-radius:50%;border:var(--avatar-outline) solid var(--avatar-outline-color)}.avatar-row-container[_ngcontent-%COMP%]   .plus-number-container[_ngcontent-%COMP%]   .plus-number[_ngcontent-%COMP%]{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--xs-font-size, 10px);font-weight:var(--font-weight-regular, 400);color:var(--fluent-theme-neutral-primary-color, #323130)}.collapsed-avatar-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:0 16px}.collapsed-avatar[_ngcontent-%COMP%]{display:flex;align-items:center;height:48px;white-space:nowrap;overflow:hidden}'],changeDetection:0}),m}()},4716:function(ct,Ge,n){"use strict";n.d(Ge,{I:function(){return ye}});var t=n(81337),i=n(73221),w=n(77526),a=n(83317),d=n(50423),p=n(74521),l=n(77476),c=n(44408),y=n(86663),r=n(36858),C=n(74913),m=n(86251),k=n(85102);function O(ae,J){if(1&ae&&(d.\u0275\u0275elementStart(0,"span",11),d.\u0275\u0275text(1),d.\u0275\u0275elementEnd()),2&ae){var N=d.\u0275\u0275nextContext(4);d.\u0275\u0275advance(1),d.\u0275\u0275textInterpolate1(" ",N.goal.notesCount," ")}}function s(ae,J){if(1&ae){var N=d.\u0275\u0275getCurrentView();d.\u0275\u0275elementStart(0,"button",8),d.\u0275\u0275listener("click",function(se){d.\u0275\u0275restoreView(N);var xe=d.\u0275\u0275nextContext().$implicit;return d.\u0275\u0275resetView(xe.onClick(se))}),d.\u0275\u0275pipe(1,"localize"),d.\u0275\u0275element(2,"tri-svg-icon",9),d.\u0275\u0275template(3,O,2,1,"span",10),d.\u0275\u0275elementEnd()}if(2&ae){var ce,he=d.\u0275\u0275nextContext().$implicit,pe=d.\u0275\u0275nextContext(2);d.\u0275\u0275classProp("show-btn",pe.goal.notesCount>0),d.\u0275\u0275property("pbiTooltip",d.\u0275\u0275pipeBind1(1,6,null!==(ce=he.iconTooltipKey)&&void 0!==ce?ce:he.labelKey))("disabled",he.disabled),d.\u0275\u0275advance(2),d.\u0275\u0275property("name",he.iconName),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",pe.goal.notesCount>0)}}function ne(ae,J){if(1&ae){var N=d.\u0275\u0275getCurrentView();d.\u0275\u0275elementStart(0,"button",12,13),d.\u0275\u0275listener("click",function(se){d.\u0275\u0275restoreView(N);var xe=d.\u0275\u0275reference(1),me=d.\u0275\u0275nextContext(3);return d.\u0275\u0275resetView(me.onContextMenuClick(se,xe))}),d.\u0275\u0275pipe(2,"localize"),d.\u0275\u0275element(3,"mat-icon",14),d.\u0275\u0275elementEnd()}if(2&ae){var ce,he=d.\u0275\u0275nextContext().$implicit,pe=d.\u0275\u0275nextContext(2);d.\u0275\u0275classProp("space-btn",pe.goal.notesCount>0),d.\u0275\u0275property("pbiTooltip",d.\u0275\u0275pipeBind1(2,4,null!==(ce=he.iconTooltipKey)&&void 0!==ce?ce:he.labelKey))("disabled",he.disabled)}}var ee=function(J){return{action:J}};function Z(ae,J){if(1&ae&&d.\u0275\u0275elementContainer(0,15),2&ae){var N=d.\u0275\u0275nextContext().$implicit;d.\u0275\u0275nextContext(2);var he=d.\u0275\u0275reference(2);d.\u0275\u0275property("ngTemplateOutlet",he)("ngTemplateOutletContext",d.\u0275\u0275pureFunction1(2,ee,N))}}function v(ae,J){1&ae&&(d.\u0275\u0275elementContainerStart(0,4),d.\u0275\u0275template(1,s,4,8,"button",5),d.\u0275\u0275template(2,ne,4,6,"button",6),d.\u0275\u0275template(3,Z,1,4,"ng-container",7),d.\u0275\u0275elementContainerEnd()),2&ae&&(d.\u0275\u0275property("ngSwitch",J.$implicit.id),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngSwitchCase","openNotes"),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngSwitchCase","openContextMenu"))}function E(ae,J){if(1&ae&&(d.\u0275\u0275elementStart(0,"div",2),d.\u0275\u0275template(1,v,4,3,"ng-container",3),d.\u0275\u0275elementEnd()),2&ae){var N=d.\u0275\u0275nextContext();d.\u0275\u0275advance(1),d.\u0275\u0275property("ngForOf",N.actions)}}function I(ae,J){if(1&ae&&d.\u0275\u0275element(0,"mat-icon",21),2&ae){var N=d.\u0275\u0275nextContext(2).action;d.\u0275\u0275property("fontIcon",N.iconName)}}function H(ae,J){if(1&ae&&d.\u0275\u0275element(0,"pbi-icon",22),2&ae){var N=d.\u0275\u0275nextContext(2).action;d.\u0275\u0275property("name",N.iconName)}}function G(ae,J){if(1&ae&&d.\u0275\u0275element(0,"tri-svg-icon",9),2&ae){var N=d.\u0275\u0275nextContext(2).action;d.\u0275\u0275property("name",N.iconName)}}function Y(ae,J){if(1&ae){var N=d.\u0275\u0275getCurrentView();d.\u0275\u0275elementStart(0,"tooltip-wrapper",17)(1,"button",8),d.\u0275\u0275listener("click",function(ge){d.\u0275\u0275restoreView(N);var se=d.\u0275\u0275nextContext().action;return d.\u0275\u0275resetView(se.onClick(ge))}),d.\u0275\u0275pipe(2,"localize"),d.\u0275\u0275template(3,I,1,1,"mat-icon",18),d.\u0275\u0275template(4,H,1,1,"pbi-icon",19),d.\u0275\u0275template(5,G,1,1,"tri-svg-icon",20),d.\u0275\u0275elementEnd()()}if(2&ae){var pe,he=d.\u0275\u0275nextContext().action;d.\u0275\u0275property("tooltipKey",null==he?null:he.disabledTooltipKey),d.\u0275\u0275advance(1),d.\u0275\u0275property("pbiTooltip",d.\u0275\u0275pipeBind1(2,6,null!==(pe=he.iconTooltipKey)&&void 0!==pe?pe:he.labelKey))("disabled",he.disabled),d.\u0275\u0275advance(2),d.\u0275\u0275property("ngIf","mat"===he.iconType),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf","pbi"===he.iconType),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf","tri"===he.iconType)}}function ie(ae,J){1&ae&&d.\u0275\u0275template(0,Y,6,8,"tooltip-wrapper",16),2&ae&&d.\u0275\u0275property("ngIf",J.action)}var ye=function(ae){function J(N,he){var pe=ae.call(this)||this;return pe.goalRowService=N,pe.changeDetector=he,pe.showActionIcons=!0,pe.goalRowService.contextMenuOpenGoalId$.pipe((0,w.x)(),(0,a.R)(pe.onDestroy$)).subscribe(function(ce){pe.contextMenuOpen=pe.goal&&ce===pe.goal.id,pe.changeDetector.markForCheck()}),pe}return(0,t.ZT)(J,ae),J.prototype.ngOnChanges=function(N){(N.goal||N.isEditMode||N.showActionIcons)&&(this.actions=this.goalRowService.getGoalActionIcons(this.goal,this.isEditMode,this.showActionIcons)),ae.prototype.ngOnChanges.call(this,N)},J.prototype.onContextMenuClick=function(N,he){this.goalRowService.onContextMenuClick(this.goal,N,he,this.isEditMode,this.showActionIcons)},J.\u0275fac=function(he){return new(he||J)(d.\u0275\u0275directiveInject(p.D),d.\u0275\u0275directiveInject(d.ChangeDetectorRef))},J.\u0275cmp=d.\u0275\u0275defineComponent({type:J,selectors:[["goal-actions-cell"]],hostVars:2,hostBindings:function(he,pe){2&he&&d.\u0275\u0275classProp("context-menu-open",pe.contextMenuOpen)},inputs:{goal:"goal",isEditMode:"isEditMode",showActionIcons:"showActionIcons"},features:[d.\u0275\u0275InheritDefinitionFeature,d.\u0275\u0275NgOnChangesFeature],decls:3,vars:1,consts:[["class","goal-actions",4,"ngIf"],["actionIcon",""],[1,"goal-actions"],[3,"ngSwitch",4,"ngFor","ngForOf"],[3,"ngSwitch"],["class","action-btn","mat-icon-button","",3,"show-btn","pbiTooltip","disabled","click",4,"ngSwitchCase"],["class","action-btn context-menu-btn","mat-icon-button","",3,"space-btn","pbiTooltip","disabled","click",4,"ngSwitchCase"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngSwitchDefault"],["mat-icon-button","",1,"action-btn",3,"pbiTooltip","disabled","click"],["tri-svg-icon-16","",1,"tri-svg",3,"name"],["class","notes-count",4,"ngIf"],[1,"notes-count"],["mat-icon-button","",1,"action-btn","context-menu-btn",3,"pbiTooltip","disabled","click"],["contextMenuBtn",""],["fontIcon","pbi-glyph-more-vertical",1,"glyph-small"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"tooltipKey",4,"ngIf"],[3,"tooltipKey"],["class","glyphicon glyph-small",3,"fontIcon",4,"ngIf"],["size","small","class","icon",3,"name",4,"ngIf"],["tri-svg-icon-16","","class","tri-svg",3,"name",4,"ngIf"],[1,"glyphicon","glyph-small",3,"fontIcon"],["size","small",1,"icon",3,"name"]],template:function(he,pe){1&he&&(d.\u0275\u0275template(0,E,2,1,"div",0),d.\u0275\u0275template(1,ie,1,1,"ng-template",null,1,d.\u0275\u0275templateRefExtractor)),2&he&&d.\u0275\u0275property("ngIf","Saving"!==pe.goal.state&&"Deleting"!==pe.goal.state)},dependencies:[l.NgForOf,l.NgIf,l.NgTemplateOutlet,l.NgSwitch,l.NgSwitchCase,l.NgSwitchDefault,c.Hw,y._,r.V,C.M,m.j,k.F],styles:["[_nghost-%COMP%]{display:flex}[_nghost-%COMP%]   .goal-actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}[_nghost-%COMP%]   .goal-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{position:relative;padding:0;border:none;background:none;height:100%;width:32px}[_nghost-%COMP%]   .goal-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:rgba(0,0,0,.05);color:inherit}[_nghost-%COMP%]   .goal-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:before{vertical-align:middle}[_nghost-%COMP%]   .goal-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   tri-svg-icon[_ngcontent-%COMP%]{margin-top:-5px}[_nghost-%COMP%]   .goal-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   .notes-count[_ngcontent-%COMP%]{position:absolute;top:12px;right:0;border-radius:30px;padding:2px 4px;min-width:8px;min-height:8px;font-size:var(--xs-font-size);font-family:var(--fluent-font-family);font-weight:var(--font-weight-regular);background:var(--fluent-theme-primary-color);color:var(--text-primary-content-color-hc)}[_nghost-%COMP%]   .goal-actions[_ngcontent-%COMP%]   .action-btn.show-btn[_ngcontent-%COMP%]{display:block;visibility:visible}[_nghost-%COMP%]   .goal-actions[_ngcontent-%COMP%]   .action-btn.space-btn[_ngcontent-%COMP%]{display:block}.context-menu-open[_nghost-%COMP%]   .goal-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{display:block!important;visibility:visible!important}.context-menu-open[_nghost-%COMP%]   .goal-actions[_ngcontent-%COMP%]   .action-btn.context-menu-btn[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.05);color:inherit}"],changeDetection:0}),J}(i.w)},95594:function(ct,Ge,n){"use strict";n.d(Ge,{k:function(){return O}});var t=n(125),i=n(50423),w=n(9380),a=n(82621),d=n(77476),p=n(86663),l=n(36858),c=n(85102);function y(s,ne){if(1&s&&i.\u0275\u0275element(0,"pbi-icon",6),2&s){var ee=i.\u0275\u0275nextContext(2);i.\u0275\u0275classProp("rotate180",!ee.valueChange.isIncrease),i.\u0275\u0275property("size",ee.arrowSize)}}var r=function(){return{rounded:!0}};function C(s,ne){if(1&s&&(i.\u0275\u0275elementStart(0,"div",2),i.\u0275\u0275template(1,y,1,3,"pbi-icon",3),i.\u0275\u0275elementStart(2,"div",4),i.\u0275\u0275elementContainer(3,5),i.\u0275\u0275elementEnd()()),2&s){var ee=i.\u0275\u0275nextContext(),Z=i.\u0275\u0275reference(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!!ee.valueChange),i.\u0275\u0275advance(1),i.\u0275\u0275property("pbiTooltip",Z),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngTemplateOutlet",Z)("ngTemplateOutletContext",i.\u0275\u0275pureFunction0(4,r))}}function m(s,ne){if(1&s&&(i.\u0275\u0275elementStart(0,"span"),i.\u0275\u0275text(1),i.\u0275\u0275pipe(2,"localize"),i.\u0275\u0275elementEnd()),2&s){var ee=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",ee.isCyclePeriodLabelLocalizable?i.\u0275\u0275pipeBind1(2,1,null==ee.valueChange?null:ee.valueChange.period):null==ee.valueChange?null:ee.valueChange.period," ")}}function k(s,ne){if(1&s&&(i.\u0275\u0275text(0),i.\u0275\u0275template(1,m,3,3,"span",7)),2&s){var ee=ne.rounded,Z=i.\u0275\u0275nextContext();i.\u0275\u0275textInterpolate1(" ",ee?Z.formattedChangeValue:Z.formattedTooltipValue," "),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",null==Z.valueChange?null:Z.valueChange.period)}}var O=function(){function s(ne,ee){this.featureSwitches=ne,this.formatValuePipe=ee,this.arrowSize="micro",this.nilDisplayString=""}return s.prototype.ngOnChanges=function(ne){var ee,Z,v,E,I,H;if(ne.goal){this.valueChange=t.r.calculateValueChange(this.goal,this.featureSwitches.featureSwitches.goalsSparklineChangeAggregations);var G=null!==(ee=this.valueChange)&&void 0!==ee&&ee.isPercentage?void 0:this.goal.valuesFormatString;this.formattedChangeValue=this.formatValuePipe.transform(null===(Z=this.valueChange)||void 0===Z?void 0:Z.changeAmount,G,!0,this.nilDisplayString),this.formattedChangeValue=null!==(v=this.valueChange)&&void 0!==v&&v.isPercentage?this.formattedChangeValue+"%":this.formattedChangeValue,this.formattedTooltipValue=this.formatValuePipe.transform(null===(E=this.valueChange)||void 0===E?void 0:E.changeAmount,G,!1,this.nilDisplayString),this.formattedTooltipValue=null!==(I=this.valueChange)&&void 0!==I&&I.isPercentage?this.formattedTooltipValue+"%":this.formattedTooltipValue,this.isCyclePeriodLabelLocalizable=t.r.isCyclePeriodLabelLocalizable(null===(H=this.valueChange)||void 0===H?void 0:H.period)}},s.\u0275fac=function(ee){return new(ee||s)(i.\u0275\u0275directiveInject(w.vZ),i.\u0275\u0275directiveInject(a.c))},s.\u0275cmp=i.\u0275\u0275defineComponent({type:s,selectors:[["goal-change-cell"]],inputs:{goal:"goal",arrowSize:"arrowSize",nilDisplayString:"nilDisplayString"},features:[i.\u0275\u0275NgOnChangesFeature],decls:3,vars:1,consts:[["class","delta",4,"ngIf"],["valueAndPeriod",""],[1,"delta"],["name","arrow",3,"size","rotate180",4,"ngIf"],[1,"change",3,"pbiTooltip"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["name","arrow",3,"size"],[4,"ngIf"]],template:function(ee,Z){1&ee&&(i.\u0275\u0275template(0,C,4,5,"div",0),i.\u0275\u0275template(1,k,2,2,"ng-template",null,1,i.\u0275\u0275templateRefExtractor)),2&ee&&i.\u0275\u0275property("ngIf",!1!==(null==Z.goal||null==Z.goal.metadata?null:Z.goal.metadata.showPercentChange)&&!(null!=Z.goal&&Z.goal.valuesCategoryId))},dependencies:[d.NgIf,d.NgTemplateOutlet,p._,l.V,c.F],styles:["[_nghost-%COMP%]{--container-align-items: center;--arrow-margin: none;--arrow-font-weight: var(--font-weight-regular);--change-font-size: var(--sm-font-size);--change-font-weight: var(--font-weight-regular)}.delta[_ngcontent-%COMP%]{display:flex;align-items:var(--container-align-items);font-size:var(--change-font-size);font-weight:var(--change-font-weight);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.delta[_ngcontent-%COMP%]   pbi-icon[_ngcontent-%COMP%]{margin:var(--arrow-margin);font-weight:var(--arrow-font-weight)}.delta[_ngcontent-%COMP%]   .rotate180[_ngcontent-%COMP%]{transform:rotate(180deg)}.change[_ngcontent-%COMP%]{margin-left:4px;overflow:hidden;text-overflow:ellipsis}"],changeDetection:0}),s}()},11891:function(ct,Ge,n){"use strict";n.d(Ge,{E:function(){return c}});var t=n(44603),i=n(50423),w=n(65181),a=n(77476),d=n(36858);function p(y,r){if(1&y&&(i.\u0275\u0275elementStart(0,"div",2),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&y){var C=i.\u0275\u0275nextContext();i.\u0275\u0275property("pbiTooltip",C.completionDate),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",C.completionDate,"\n")}}function l(y,r){1&y&&(i.\u0275\u0275elementStart(0,"div",3),i.\u0275\u0275text(1,"\u2014"),i.\u0275\u0275elementEnd())}var c=function(){function y(r){this.localizationService=r,this.formatOptions={day:"numeric",month:"short",year:"numeric"}}return y.prototype.ngOnChanges=function(){if(this.goal.completionDate){var r=this.localizationService.currentLanguageLocale;this.completionDate=t.E.treatAsLocalDate(new Date(this.goal.completionDate)).toLocaleDateString(r,this.formatOptions)}},y.\u0275fac=function(C){return new(C||y)(i.\u0275\u0275directiveInject(w.o))},y.\u0275cmp=i.\u0275\u0275defineComponent({type:y,selectors:[["goal-due-date-cell"]],inputs:{goal:"goal",formatOptions:"formatOptions"},features:[i.\u0275\u0275NgOnChangesFeature],decls:3,vars:2,consts:[["class","completion-date",3,"pbiTooltip",4,"ngIf","ngIfElse"],["noValueDash",""],[1,"completion-date",3,"pbiTooltip"],[1,"no-value-dash"]],template:function(C,m){if(1&C&&(i.\u0275\u0275template(0,p,2,2,"div",0),i.\u0275\u0275template(1,l,2,0,"ng-template",null,1,i.\u0275\u0275templateRefExtractor)),2&C){var k=i.\u0275\u0275reference(2);i.\u0275\u0275property("ngIf",m.completionDate)("ngIfElse",k)}},dependencies:[a.NgIf,d.V],styles:["[_nghost-%COMP%]   .completion-date[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .no-value-dash[_ngcontent-%COMP%]{font-size:var(--lg-font-size);font-weight:var(--font-weight-regular);overflow:hidden}"],changeDetection:0}),y}()},64661:function(ct,Ge,n){"use strict";n.d(Ge,{$:function(){return O}});var t=n(50423),i=n(74521),w=n(9380),a=n(77476),d=n(86663),p=n(36858),l=n(85102);function c(s,ne){if(1&s&&t.\u0275\u0275element(0,"pbi-icon",4),2&s){t.\u0275\u0275nextContext();var ee=t.\u0275\u0275reference(6);t.\u0275\u0275property("pbiTooltip",ee)}}function y(s,ne){1&s&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"localize"),t.\u0275\u0275elementEnd()),2&s&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"Metrics_Tooltip_LinkedHierarchical")," "))}function r(s,ne){1&s&&(t.\u0275\u0275elementStart(0,"div")(1,"span",9),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"localize"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(4),t.\u0275\u0275pipe(5,"localize"),t.\u0275\u0275elementEnd()),2&s&&(t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(3,2,"CurrentValue")),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(5,4,"Metrics_Tooltip_ValueAddedManually")," "))}function C(s,ne){1&s&&(t.\u0275\u0275elementStart(0,"div")(1,"span",9),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"localize"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(4),t.\u0275\u0275pipe(5,"localize"),t.\u0275\u0275elementEnd()),2&s&&(t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(3,2,"Role_DisplayName_TargetValue")),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(5,4,"Metrics_Tooltip_ValueAddedManually")," "))}function m(s,ne){if(1&s&&(t.\u0275\u0275template(0,r,6,6,"div",8),t.\u0275\u0275template(1,C,6,6,"div",8)),2&s){var ee=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("ngIf",!ee.goal.valueConnection),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!ee.goal.targetConnection)}}function k(s,ne){if(1&s&&(t.\u0275\u0275elementStart(0,"div",5),t.\u0275\u0275template(1,y,3,3,"div",6),t.\u0275\u0275template(2,m,2,2,"ng-template",null,7,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementEnd()),2&s){var ee=t.\u0275\u0275reference(3),Z=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",Z.goal.isLinked)("ngIfElse",ee)}}var O=function(){function s(ne,ee){this.goalRowService=ne,this.featureSwitches=ee,this.boldName=!1,this.innerIndent=0}return s.prototype.ngOnChanges=function(ne){var ee;ne.scorecard&&(this.showHierarchyTooltips=!_.isEmpty(null===(ee=this.scorecard)||void 0===ee?void 0:ee.hierarchyPaths)&&!this.featureSwitches.featureSwitches.goalsHierarchiesHideInfoTooltips)},s.prototype.onNameClick=function(ne){this.goalRowService.onNameClick(this.goal,ne)},s.\u0275fac=function(ee){return new(ee||s)(t.\u0275\u0275directiveInject(i.D),t.\u0275\u0275directiveInject(w.vZ))},s.\u0275cmp=t.\u0275\u0275defineComponent({type:s,selectors:[["goal-name-cell"]],inputs:{goal:"goal",scorecard:"scorecard",boldName:"boldName",innerIndent:"innerIndent"},features:[t.\u0275\u0275NgOnChangesFeature],decls:7,vars:7,consts:[["data-testid","goal-name-box",1,"name-box",3,"pbiTooltip","click"],[1,"inner-indent"],["class","name-info","name","info","size","mini",3,"pbiTooltip",4,"ngIf"],["infoTooltip",""],["name","info","size","mini",1,"name-info",3,"pbiTooltip"],[1,"goal-info-tooltip"],[4,"ngIf","ngIfElse"],["manualTooltip",""],[4,"ngIf"],[1,"tooltip-value-label"]],template:function(ee,Z){1&ee&&(t.\u0275\u0275elementStart(0,"button",0),t.\u0275\u0275listener("click",function(E){return Z.onNameClick(E)}),t.\u0275\u0275element(1,"div",1),t.\u0275\u0275elementStart(2,"span"),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(4,c,1,1,"pbi-icon",2),t.\u0275\u0275template(5,k,4,2,"ng-template",null,3,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementEnd()),2&ee&&(t.\u0275\u0275classProp("bold-name",Z.boldName),t.\u0275\u0275property("pbiTooltip",Z.goal.name),t.\u0275\u0275advance(1),t.\u0275\u0275styleProp("width",Z.innerIndent+"px"),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(Z.goal.name),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",Z.showHierarchyTooltips&&(Z.goal.isLinked||!Z.goal.valueConnection||!Z.goal.targetConnection)))},dependencies:[a.NgIf,d._,p.V,l.F],styles:["[_nghost-%COMP%]{display:flex;flex:1;height:100%;overflow:hidden}[_nghost-%COMP%]   .name-box[_ngcontent-%COMP%]{flex:1;border:none;padding:0;background-color:transparent;overflow:hidden;white-space:break-spaces;text-overflow:ellipsis;text-align:left}[_nghost-%COMP%]   .name-box[_ngcontent-%COMP%]:hover{text-decoration:underline}[_nghost-%COMP%]   .name-box.bold-name[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:var(--font-weight-semi-bold)}[_nghost-%COMP%]   .name-box[_ngcontent-%COMP%]   .name-info[_ngcontent-%COMP%]{margin:0 6px}[_nghost-%COMP%]   .name-box[_ngcontent-%COMP%]   .inner-indent[_ngcontent-%COMP%]{display:inline-block}"],changeDetection:0}),s}()},49048:function(ct,Ge,n){"use strict";n.d(Ge,{q:function(){return r}});var t=n(50423),i=n(77476),w=n(223),a=n(87758),d=function(m){return{userEmail:m}};function p(C,m){if(1&C&&t.\u0275\u0275element(0,"user-details-host",5),2&C){var k=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("details",t.\u0275\u0275pureFunction1(3,d,k.owners[0]))("showUserInfo",!0)("showTooltip",!0)}}function l(C,m){if(1&C&&t.\u0275\u0275element(0,"avatar-row",6),2&C){var k=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("emails",k.owners)("numAvatarsToShow",k.avatarRowCount)("rowStyle",k.rowStyle)("avatarSize",k.avatarSize)}}function c(C,m){if(1&C&&(t.\u0275\u0275elementStart(0,"div",2),t.\u0275\u0275template(1,p,1,5,"user-details-host",3),t.\u0275\u0275template(2,l,1,4,"ng-template",null,4,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementEnd()),2&C){var k=t.\u0275\u0275reference(3),O=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",1===O.owners.length&&!O.alwaysShowAvatarRow)("ngIfElse",k)}}function y(C,m){1&C&&(t.\u0275\u0275elementStart(0,"div",2),t.\u0275\u0275text(1,"\u2014"),t.\u0275\u0275elementEnd())}var r=function(){function C(){this.rowStyle="spread",this.avatarSize="medium",this.avatarRowCount=4}return C.prototype.ngOnChanges=function(m){var k;m.goal&&(this.owners=this.goal.owner?[this.goal.owner]:[],this.goal.additionalOwners&&(k=this.owners).push.apply(k,this.goal.additionalOwners.map(function(O){return O.userPrincipalName})))},C.\u0275fac=function(k){return new(k||C)},C.\u0275cmp=t.\u0275\u0275defineComponent({type:C,selectors:[["goal-owners-cell"]],inputs:{goal:"goal",alwaysShowAvatarRow:"alwaysShowAvatarRow",rowStyle:"rowStyle",avatarSize:"avatarSize",avatarRowCount:"avatarRowCount"},features:[t.\u0275\u0275NgOnChangesFeature],decls:3,vars:2,consts:[["class","content",4,"ngIf","ngIfElse"],["emptyOwner",""],[1,"content"],[3,"details","showUserInfo","showTooltip",4,"ngIf","ngIfElse"],["hasMultipleOwners",""],[3,"details","showUserInfo","showTooltip"],[3,"emails","numAvatarsToShow","rowStyle","avatarSize"]],template:function(k,O){if(1&k&&(t.\u0275\u0275template(0,c,4,2,"div",0),t.\u0275\u0275template(1,y,2,0,"ng-template",null,1,t.\u0275\u0275templateRefExtractor)),2&k){var s=t.\u0275\u0275reference(2);t.\u0275\u0275property("ngIf",(null==O.owners?null:O.owners.length)>0)("ngIfElse",s)}},dependencies:[i.NgIf,w.s,a.c],styles:["[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{overflow:hidden}[_nghost-%COMP%]     .user-info{color:var(--scorecard-tableRowForegroundColor)!important;font-family:var(--scorecard-fontFamily)}"],changeDetection:0}),C}()},76654:function(ct,Ge,n){"use strict";n.d(Ge,{t:function(){return y}});var t=n(3204),i=n(42989),w=n(74466),a=n(50423),d=n(49223),p=n(64929),l=n(77476);function c(r,C){if(1&r&&a.\u0275\u0275element(0,"goal-history-chart",1),2&r){var m=a.\u0275\u0275nextContext();a.\u0275\u0275styleProp("width",m.options.width+"px")("height",m.options.height+"px"),a.\u0275\u0275property("width",m.options.width)("height",m.options.height)("values",m.values)("formatString",m.goal.valuesFormatString)("color",m.options.lineColor)("showGoalTargets",!1)("axesOptions",m.axesOptions)("legend","None")}}var y=function(){function r(C,m){this.scorecardService=C,this.scorecardConfigurationService=m,this.axesOptions=i.n}return r.prototype.ngOnChanges=function(C){var k,O,s,m=this;if((C.goal||C.sparklineValues)&&(this.isCategorical=!_.isEmpty(this.scorecardService.getGoalValueCategories(this.goal)),this.values=null!==(k=this.sparklineValues)&&void 0!==k?k:t.b.buildSparklineValues(this.goal,!0).map(function(Z){return{value:Z.value,timestamp:Z.timestamp}})),C.goal||C.height||C.width){var ne=null!==(s=null===(O=this.scorecardConfigurationService)||void 0===O?void 0:O.getConfiguration())&&void 0!==s?s:{scorecardDisplayOptions:{isMobileLayout:!1}},ee=(0,w.ZP)(ne,function(Z){Z.scorecardDisplayOptions.sparklineOptions||(Z.scorecardDisplayOptions.sparklineOptions={}),m.height&&(Z.scorecardDisplayOptions.sparklineOptions.height=m.height),m.width&&(Z.scorecardDisplayOptions.sparklineOptions.width=m.width)});this.options=t.b.getSparklineOptions(this.goal,this.scorecardService.getGoalStatuses(this.goal),ee)}},r.\u0275fac=function(m){return new(m||r)(a.\u0275\u0275directiveInject(d.G),a.\u0275\u0275directiveInject(p.V,8))},r.\u0275cmp=a.\u0275\u0275defineComponent({type:r,selectors:[["goal-sparkline-cell"]],inputs:{goal:"goal",sparklineValues:"sparklineValues",height:"height",width:"width"},features:[a.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[[3,"width","height","values","formatString","color","showGoalTargets","axesOptions","legend",4,"ngIf"],[3,"width","height","values","formatString","color","showGoalTargets","axesOptions","legend"]],template:function(m,k){1&m&&a.\u0275\u0275template(0,c,1,12,"goal-history-chart",0),2&m&&a.\u0275\u0275property("ngIf",!k.isCategorical&&!k.goal.currentRefreshInProgress&&(null==k.values?null:k.values.length)>1&&k.options)},dependencies:[l.NgIf,i.R],changeDetection:0}),r}()},35328:function(ct,Ge,n){"use strict";n.d(Ge,{e:function(){return d}});var t=n(125),i=n(50423),w=n(49223),a=n(77971),d=function(){function p(l){this.scorecardService=l}return p.prototype.ngOnChanges=function(l){l.goal&&(this.status=t.r.buildCurrentGoalValue(this.goal).status,this.goalStatuses=this.scorecardService.getGoalStatuses(this.goal))},p.\u0275fac=function(c){return new(c||p)(i.\u0275\u0275directiveInject(w.G))},p.\u0275cmp=i.\u0275\u0275defineComponent({type:p,selectors:[["goal-status-cell"]],inputs:{goal:"goal"},features:[i.\u0275\u0275NgOnChangesFeature],decls:1,vars:2,consts:[[3,"status","goalStatuses"]],template:function(c,y){1&c&&i.\u0275\u0275element(0,"status-icon",0),2&c&&i.\u0275\u0275property("status",y.status)("goalStatuses",y.goalStatuses)},dependencies:[a.m],styles:["[_nghost-%COMP%]{display:flex;flex:1;height:100%;overflow:hidden;align-items:center;justify-content:center}"],changeDetection:0}),p}()},85953:function(ct,Ge,n){"use strict";n.d(Ge,{m:function(){return ge}});var t=n(125),i=n(98925),w=n(70060),a=n(62458),d=n(50423),p=n(87426),l=n(65181),c=n(49223),y=n(77476),r=n(24326),C=n(36858),m=n(85102),k=n(90127);function O(se,xe){1&se&&d.\u0275\u0275element(0,"pbi-spinner",4)}function s(se,xe){if(1&se&&(d.\u0275\u0275elementStart(0,"div",8),d.\u0275\u0275text(1),d.\u0275\u0275pipe(2,"formatGoalValue"),d.\u0275\u0275elementEnd()),2&se){var me=d.\u0275\u0275nextContext(2),Oe=d.\u0275\u0275reference(4);d.\u0275\u0275property("pbiTooltip",Oe),d.\u0275\u0275advance(1),d.\u0275\u0275textInterpolate1(" ",d.\u0275\u0275pipeBind3(2,2,null==me.currentValue?null:me.currentValue.value,me.categories,me.formatString)," ")}}function ne(se,xe){1&se&&(d.\u0275\u0275elementContainerStart(0),d.\u0275\u0275text(1,"/"),d.\u0275\u0275elementContainerEnd())}var ee=function(xe){return{"combined-target":xe}};function Z(se,xe){if(1&se&&(d.\u0275\u0275elementStart(0,"div",9),d.\u0275\u0275template(1,ne,2,0,"ng-container",10),d.\u0275\u0275elementContainerStart(2),d.\u0275\u0275text(3),d.\u0275\u0275pipe(4,"formatGoalValue"),d.\u0275\u0275elementContainerEnd(),d.\u0275\u0275elementEnd()),2&se){var me=d.\u0275\u0275nextContext(2),Oe=d.\u0275\u0275reference(6);d.\u0275\u0275property("pbiTooltip",Oe)("ngClass",d.\u0275\u0275pureFunction1(8,ee,me.showValueAndTargetCombined)),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",me.showValueAndTargetCombined),d.\u0275\u0275advance(2),d.\u0275\u0275textInterpolate(d.\u0275\u0275pipeBind3(4,4,me.showTarget?null==me.currentValue?null:me.currentValue.finalTarget:null==me.currentValue?null:me.currentValue.nextTarget,me.categories,me.formatString))}}var v=function(xe,me){return{categories:xe,compact:me}};function E(se,xe){if(1&se&&(d.\u0275\u0275elementStart(0,"div",5),d.\u0275\u0275template(1,s,3,6,"div",6),d.\u0275\u0275template(2,Z,5,10,"div",7),d.\u0275\u0275elementEnd()),2&se){var me=d.\u0275\u0275nextContext();d.\u0275\u0275property("ngClass",d.\u0275\u0275pureFunction2(3,v,!!me.categories,me.compact)),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",me.showCurrent&&me.hasValueOrConnection),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",(me.showTarget||me.showMilestone)&&me.hasTargetOrConnection)}}function I(se,xe){1&se&&(d.\u0275\u0275elementStart(0,"div")(1,"span",15),d.\u0275\u0275text(2),d.\u0275\u0275pipe(3,"localize"),d.\u0275\u0275elementEnd(),d.\u0275\u0275text(4),d.\u0275\u0275pipe(5,"localize"),d.\u0275\u0275elementEnd()),2&se&&(d.\u0275\u0275advance(2),d.\u0275\u0275textInterpolate(d.\u0275\u0275pipeBind1(3,2,"CurrentValue")),d.\u0275\u0275advance(2),d.\u0275\u0275textInterpolate1(" ",d.\u0275\u0275pipeBind1(5,4,"Metrics_Tooltip_ValueNotConnected")," "))}function H(se,xe){1&se&&(d.\u0275\u0275elementStart(0,"div"),d.\u0275\u0275text(1),d.\u0275\u0275pipe(2,"localize"),d.\u0275\u0275elementEnd()),2&se&&(d.\u0275\u0275advance(1),d.\u0275\u0275textInterpolate(d.\u0275\u0275pipeBind1(2,1,"Rollups_Submetrics_Tooltip_Footer")))}function G(se,xe){if(1&se&&(d.\u0275\u0275elementStart(0,"div")(1,"div",16),d.\u0275\u0275text(2),d.\u0275\u0275pipe(3,"formatGoalValue"),d.\u0275\u0275elementEnd(),d.\u0275\u0275template(4,H,3,3,"div",10),d.\u0275\u0275elementEnd()),2&se){var me=d.\u0275\u0275nextContext(3);d.\u0275\u0275advance(2),d.\u0275\u0275textInterpolate2("",d.\u0275\u0275pipeBind4(3,3,null==me.currentValue?null:me.currentValue.value,me.categories,me.formatString,!1)," ",me.valueRollupsString,""),d.\u0275\u0275advance(2),d.\u0275\u0275property("ngIf",!me.canViewAllGoals)}}function Y(se,xe){if(1&se&&d.\u0275\u0275template(0,G,5,8,"div",12),2&se){d.\u0275\u0275nextContext();var me=d.\u0275\u0275reference(5),Oe=d.\u0275\u0275nextContext();d.\u0275\u0275property("ngIf",(null==Oe.goal?null:Oe.goal.valueRollup)&&!(null!=Oe.goal&&Oe.goal.isLinked))("ngIfElse",me)}}function ie(se,xe){if(1&se&&(d.\u0275\u0275text(0),d.\u0275\u0275pipe(1,"formatGoalValue")),2&se){var me=d.\u0275\u0275nextContext(2);d.\u0275\u0275textInterpolate1(" ",d.\u0275\u0275pipeBind4(1,1,null==me.currentValue?null:me.currentValue.value,me.categories,me.formatString,!1)," ")}}function ye(se,xe){if(1&se&&(d.\u0275\u0275elementStart(0,"div",11),d.\u0275\u0275template(1,I,6,6,"div",12),d.\u0275\u0275template(2,Y,1,2,"ng-template",null,13,d.\u0275\u0275templateRefExtractor),d.\u0275\u0275template(4,ie,2,6,"ng-template",null,14,d.\u0275\u0275templateRefExtractor),d.\u0275\u0275elementEnd()),2&se){var me=d.\u0275\u0275reference(3),Oe=d.\u0275\u0275nextContext();d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",Oe.isCurrentValueNotConnectedToHierarchy)("ngIfElse",me)}}function ae(se,xe){if(1&se&&(d.\u0275\u0275elementStart(0,"div")(1,"span",15),d.\u0275\u0275text(2),d.\u0275\u0275pipe(3,"localize"),d.\u0275\u0275elementEnd(),d.\u0275\u0275text(4),d.\u0275\u0275pipe(5,"localize"),d.\u0275\u0275elementEnd()),2&se){var me=d.\u0275\u0275nextContext(2);d.\u0275\u0275advance(2),d.\u0275\u0275textInterpolate1(" ",d.\u0275\u0275pipeBind1(3,2,me.showTarget?"Role_DisplayName_TargetValue":"Role_DisplayName_MilestoneValue")," "),d.\u0275\u0275advance(2),d.\u0275\u0275textInterpolate1(" ",d.\u0275\u0275pipeBind1(5,4,"Metrics_Tooltip_ValueNotConnected")," ")}}function J(se,xe){1&se&&(d.\u0275\u0275elementStart(0,"div"),d.\u0275\u0275text(1),d.\u0275\u0275pipe(2,"localize"),d.\u0275\u0275elementEnd()),2&se&&(d.\u0275\u0275advance(1),d.\u0275\u0275textInterpolate(d.\u0275\u0275pipeBind1(2,1,"Rollups_Submetrics_Tooltip_Footer")))}function N(se,xe){if(1&se&&(d.\u0275\u0275elementStart(0,"div")(1,"div",16),d.\u0275\u0275text(2),d.\u0275\u0275pipe(3,"formatGoalValue"),d.\u0275\u0275elementEnd(),d.\u0275\u0275template(4,J,3,3,"div",10),d.\u0275\u0275elementEnd()),2&se){var me=d.\u0275\u0275nextContext(3);d.\u0275\u0275advance(2),d.\u0275\u0275textInterpolate2(" ",d.\u0275\u0275pipeBind4(3,3,me.showTarget?null==me.currentValue?null:me.currentValue.finalTarget:null==me.currentValue?null:me.currentValue.nextTarget,me.categories,me.formatString,!1)," ",me.targetRollupsString," "),d.\u0275\u0275advance(2),d.\u0275\u0275property("ngIf",!me.canViewAllGoals)}}function he(se,xe){if(1&se&&d.\u0275\u0275template(0,N,5,8,"div",12),2&se){d.\u0275\u0275nextContext();var me=d.\u0275\u0275reference(5),Oe=d.\u0275\u0275nextContext();d.\u0275\u0275property("ngIf",(null==Oe.goal?null:Oe.goal.targetRollup)&&!(null!=Oe.goal&&Oe.goal.isLinked))("ngIfElse",me)}}function pe(se,xe){if(1&se&&(d.\u0275\u0275text(0),d.\u0275\u0275pipe(1,"localize"),d.\u0275\u0275elementStart(2,"div",20),d.\u0275\u0275text(3),d.\u0275\u0275pipe(4,"formatGoalValue"),d.\u0275\u0275elementEnd()),2&se){var me=d.\u0275\u0275nextContext(2);d.\u0275\u0275textInterpolate1(" ",d.\u0275\u0275pipeBind1(1,2,me.showTarget?"Target_Final":"Target_Next")," "),d.\u0275\u0275advance(3),d.\u0275\u0275textInterpolate1(" ",d.\u0275\u0275pipeBind4(4,4,me.showTarget?null==me.currentValue?null:me.currentValue.finalTarget:null==me.currentValue?null:me.currentValue.nextTarget,me.categories,me.formatString,!1)," ")}}function ce(se,xe){if(1&se&&(d.\u0275\u0275elementStart(0,"div",17),d.\u0275\u0275template(1,ae,6,6,"div",12),d.\u0275\u0275template(2,he,1,2,"ng-template",null,18,d.\u0275\u0275templateRefExtractor),d.\u0275\u0275template(4,pe,5,9,"ng-template",null,19,d.\u0275\u0275templateRefExtractor),d.\u0275\u0275elementEnd()),2&se){var me=d.\u0275\u0275reference(3),Oe=d.\u0275\u0275nextContext();d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",Oe.isTargetValueNotConnectedToHierarchy)("ngIfElse",me)}}var ge=function(){function se(xe,me,Oe,Ce){var Le=this;this.hierarchyService=xe,this.localizationService=me,this.scorecardService=Oe,this.changeDetector=Ce,this.currentValue=null,this.canViewAllGoals=!0,this.metricRollups=(0,i.P)(this.localizationService),this.scorecardSubscription=this.scorecardService.getScorecard().subscribe(function(ze){var $e;Le.scorecard=ze,Le.canViewAllGoals=3===(0,w.l)(null===($e=Le.scorecard)||void 0===$e?void 0:$e.permissions),Le.goal&&(Le.setHierarchyTooltips(),Le.categories=Le.scorecardService.getGoalValueCategories(Le.goal)),Le.changeDetector.markForCheck()})}return se.prototype.ngOnChanges=function(xe){var me=this;xe.goal&&(this.formatString=this.goal.valuesFormatString,this.currentValue=t.r.buildCurrentGoalValue(this.goal),this.hasValueOrConnection=!_.isNil(this.currentValue.value)||!_.isNil(this.goal.valueConnection),this.hasTargetOrConnection=!_.isNil(this.currentValue.finalTarget)||!_.isNil(this.currentValue.nextTarget)||!_.isNil(this.goal.targetConnection),_.isNil(this.goal.valueRollup)||(this.valueRollupsString=this.localizationService.format("Rollups_Submetrics_Tooltip_Header",[this.metricRollups[(0,i.t)(this.goal.valueRollup.rollupType)]])),_.isNil(this.goal.targetRollup)||(this.targetRollupsString=this.localizationService.format("Rollups_Submetrics_Tooltip_Header",[this.metricRollups[(0,i.t)(this.goal.targetRollup.rollupType)]])),this.categories=this.scorecardService.getGoalValueCategories(this.goal),this.setHierarchyTooltips()),(xe.showCurrent||xe.showTarget||xe.showMilestone)&&(a.fF.assert(function(){return!(me.showTarget&&me.showMilestone)},"GoalValueCell can't show both target and milestone."),this.showValueAndTargetCombined=this.showCurrent&&(this.showTarget||this.showMilestone))},se.prototype.ngOnDestroy=function(){this.scorecardSubscription.unsubscribe()},se.prototype.setHierarchyTooltips=function(){var xe,me=!_.isEmpty(null===(xe=this.scorecard)||void 0===xe?void 0:xe.hierarchyPaths);this.isCurrentValueNotConnectedToHierarchy=me&&this.goal.valueConnection&&!this.hierarchyService.isDatasetMappedToHierarchyPath(this.goal.valueConnection.datasetId,this.scorecard.hierarchyPaths),this.isTargetValueNotConnectedToHierarchy=me&&this.goal.targetConnection&&!this.hierarchyService.isDatasetMappedToHierarchyPath(this.goal.targetConnection.datasetId,this.scorecard.hierarchyPaths)},se.\u0275fac=function(me){return new(me||se)(d.\u0275\u0275directiveInject(p.G),d.\u0275\u0275directiveInject(l.o),d.\u0275\u0275directiveInject(c.G),d.\u0275\u0275directiveInject(d.ChangeDetectorRef))},se.\u0275cmp=d.\u0275\u0275defineComponent({type:se,selectors:[["goal-value-cell"]],inputs:{goal:"goal",showCurrent:"showCurrent",showTarget:"showTarget",showMilestone:"showMilestone",compact:"compact"},features:[d.\u0275\u0275NgOnChangesFeature],decls:7,vars:2,consts:[["class","pbi-spinner-medium",4,"ngIf","ngIfElse"],["noRefresh",""],["valueTooltip",""],["targetTooltip",""],[1,"pbi-spinner-medium"],[1,"content",3,"ngClass"],["class","value",3,"pbiTooltip",4,"ngIf"],["class","target",3,"pbiTooltip","ngClass",4,"ngIf"],[1,"value",3,"pbiTooltip"],[1,"target",3,"pbiTooltip","ngClass"],[4,"ngIf"],[1,"goal-current-tooltip"],[4,"ngIf","ngIfElse"],["rollupsValueTooltip",""],["currentValueTooltip",""],[1,"no-hierarchy-label"],[1,"rollups"],[1,"goal-target-tooltip"],["rollupsTargetTooltip",""],["targetValueTooltip",""],[1,"target-value"]],template:function(me,Oe){if(1&me&&(d.\u0275\u0275template(0,O,1,0,"pbi-spinner",0),d.\u0275\u0275template(1,E,3,6,"ng-template",null,1,d.\u0275\u0275templateRefExtractor),d.\u0275\u0275template(3,ye,6,2,"ng-template",null,2,d.\u0275\u0275templateRefExtractor),d.\u0275\u0275template(5,ce,6,2,"ng-template",null,3,d.\u0275\u0275templateRefExtractor)),2&me){var Ce=d.\u0275\u0275reference(2);d.\u0275\u0275property("ngIf",!(null==Oe.goal||!Oe.goal.currentRefreshInProgress)||!(null==Oe.goal||!Oe.goal.targetRefreshInProgress))("ngIfElse",Ce)}},dependencies:[y.NgClass,y.NgIf,r.k,C.V,m.F,k.D],styles:["pbi-spinner[_ngcontent-%COMP%]{display:flex;position:relative;top:3px;left:10px}.content[_ngcontent-%COMP%]{display:flex;overflow:hidden;white-space:nowrap;align-items:baseline;font-size:var(--lg-font-size);font-weight:var(--font-weight-regular)}.content[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   .target[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis}.content[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:var(--xxlg-font-size);font-weight:var(--font-weight-semi-bold)}.content[_ngcontent-%COMP%]   .combined-target[_ngcontent-%COMP%]{font-size:var(--md-font-size)}.content.categories[_ngcontent-%COMP%]{white-space:nowrap}.content.categories[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:var(--vlg-font-size)}.content.compact[_ngcontent-%COMP%], .content.compact[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:var(--md-font-size)}.no-hierarchy-label[_ngcontent-%COMP%]{font-weight:var(--font-weight-semi-bold)}.rollups[_ngcontent-%COMP%]{font-weight:var(--font-weight-regular)}.goal-target-tooltip[_ngcontent-%COMP%]{margin-left:4px;margin-right:4px}.goal-target-tooltip[_ngcontent-%COMP%]   .target-value[_ngcontent-%COMP%]{margin-top:4px;text-align:center}"],changeDetection:0}),se}()},67090:function(ct,Ge,n){"use strict";n.d(Ge,{i:function(){return m}});var t=n(77695),i=n(50423),w=n(77476),a=n(59968),d=n(36858),p=n(83399),l=n(44260),c=n(85102);function y(k,O){if(1&k){var s=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",2)(2,"scorecard-column-context-menu",3),i.\u0275\u0275listener("onSortColumn",function(Z){i.\u0275\u0275restoreView(s);var v=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(v.sortColumn(Z))}),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementContainerEnd()}if(2&k){var ne=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275property("column",ne.column)("columnIndex",ne.index)("sortType",ne.sort)}}function r(k,O){if(1&k&&i.\u0275\u0275element(0,"sort-icon",7),2&k){var s=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("reserveSpaceWhenHidden",s.reserveSpaceForSortIcon)("hidden",s.sort.sortBy!==s.column.sortBy)("upArrow",!s.sort.sortAscending)}}function C(k,O){if(1&k){var s=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",4),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(s);var Z=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(Z.toggleSort(Z.sort,Z.column.sortBy))}),i.\u0275\u0275pipe(1,"localize"),i.\u0275\u0275pipe(2,"localize"),i.\u0275\u0275element(3,"span",5),i.\u0275\u0275pipe(4,"localize"),i.\u0275\u0275template(5,r,1,3,"sort-icon",6),i.\u0275\u0275elementEnd()}if(2&k){var ne=i.\u0275\u0275nextContext();i.\u0275\u0275classProp("sort-col",ne.column.canSort),i.\u0275\u0275attributeInterpolate2("aria-label","",i.\u0275\u0275pipeBind1(1,7,ne.column.name)," ",i.\u0275\u0275pipeBind1(2,9,"Sort"),""),i.\u0275\u0275advance(3),i.\u0275\u0275propertyInterpolate("localize",ne.column.name),i.\u0275\u0275property("pbiTooltip",i.\u0275\u0275pipeBind1(4,11,ne.column.name)),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",ne.column.canSort)}}var m=function(){function k(){this.onSortColumn=new i.EventEmitter,this.reserveSpaceForSortIcon=!0}return k.prototype.sortColumn=function(O){this.onSortColumn.emit(O)},k.prototype.toggleSort=function(O,s){var ne=t.p.toggleSort(O,s);this.onSortColumn.emit(ne)},k.\u0275fac=function(s){return new(s||k)},k.\u0275cmp=i.\u0275\u0275defineComponent({type:k,selectors:[["scorecard-column-header"]],inputs:{column:"column",index:"index",sort:"sort",isEditMode:"isEditMode",reserveSpaceForSortIcon:"reserveSpaceForSortIcon"},outputs:{onSortColumn:"onSortColumn"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["columnNameWithSortIcon",""],[1,"column-menu-sort"],[1,"scorecard-column-context-menu",3,"column","columnIndex","sortType","onSortColumn"],[1,"column-sort",3,"click"],[1,"column-name",3,"localize","pbiTooltip"],[3,"reserveSpaceWhenHidden","hidden","upArrow",4,"ngIf"],[3,"reserveSpaceWhenHidden","hidden","upArrow"]],template:function(s,ne){if(1&s&&(i.\u0275\u0275template(0,y,3,3,"ng-container",0),i.\u0275\u0275template(1,C,6,13,"ng-template",null,1,i.\u0275\u0275templateRefExtractor)),2&s){var ee=i.\u0275\u0275reference(2);i.\u0275\u0275property("ngIf",ne.isEditMode)("ngIfElse",ee)}},dependencies:[w.NgIf,a.X,d.V,p.M,l.o,c.F],styles:["[_nghost-%COMP%]{width:100%}[_nghost-%COMP%]   .column-sort[_ngcontent-%COMP%]{padding-left:0;width:100%;border:none;background:none;color:inherit;display:flex;flex-direction:row;align-items:center;cursor:default}[_nghost-%COMP%]   .column-sort.sort-col[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   .column-sort.sort-col[_ngcontent-%COMP%]     sort-icon mat-icon.sort-icon{font-weight:var(--font-weight-semi-bold)}[_nghost-%COMP%]   .column-sort.sort-col[_ngcontent-%COMP%]:hover     sort-icon mat-icon.sort-icon.hide{display:inline;visibility:visible;color:var(--fluent-theme-neutral-tertia-color)}[_nghost-%COMP%]   .column-sort.sort-col[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .column-sort.sort-col[_ngcontent-%COMP%]:focus:hover, [_nghost-%COMP%]   .column-sort.sort-col[_ngcontent-%COMP%]:active, [_nghost-%COMP%]   .column-sort.sort-col[_ngcontent-%COMP%]:focus:hover:active{background-color:var(--fluent-theme-neutral-lighter-color)}[_nghost-%COMP%]   .column-sort[_ngcontent-%COMP%]   .column-name[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .column-menu-sort[_ngcontent-%COMP%]   .scorecard-column-context-menu[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .column-menu-sort[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .column-menu-sort[_ngcontent-%COMP%]:focus:hover, [_nghost-%COMP%]   .column-menu-sort[_ngcontent-%COMP%]:active, [_nghost-%COMP%]   .column-menu-sort[_ngcontent-%COMP%]:focus:hover:active{background-color:var(--fluent-theme-neutral-lighter-color)}[_nghost-%COMP%]   .column-menu-sort[_ngcontent-%COMP%]     sort-icon mat-icon.sort-icon.hide{color:transparent}"],changeDetection:0}),k}()},74161:function(ct,Ge,n){"use strict";n.d(Ge,{p:function(){return ut}});var t=n(81337),i=n(60042),w=n(62458),a=n(68233),d=(0,t.pi)((0,t.pi)({},a._),{Default:0,XXXXMidLarge:1736}),p=(0,t.ev)([],Object.values(d).sort(function(ot,pt){return pt-ot}),!0);function l(ot,pt){for(var Ye=0,dt=p;Ye<dt.length;Ye++){var Ot=dt[Ye];if(!_.isNil(ot[Ot])&&pt>=Ot)return ot[Ot]}return ot[d.Default]}var y,r,C,m,k,O,s,ne,ee,Z,v,E,I,H,G,Y=((y={})[0]=((r={})[d.XXXXXLarge]=584,r[d.XXXXMidLarge]=562,r[d.XXXXLarge]=516,r[d.XXLarge]=438,r[d.XLarge]=298,r[d.Large]=292,r[d.Medium]=258,r[d.Default]=184,r),y[1]=((C={})[d.XXXXLarge]=98,C[d.XXLarge]=74,C[d.Default]=40,C),y[2]=((m={})[d.Default]=76,m),y[3]=((k={})[d.Default]=128,k),y[10]=((O={})[d.Default]=106,O),y[7]=((s={})[d.Default]=64,s),y[8]=((ne={})[d.Default]=64,ne),y[9]=((ee={})[d.Default]=64,ee),y[4]=((Z={})[d.XXXXXLarge]=156,Z[d.XXXXLarge]=132,Z[d.XXLarge]=100,Z[d.Default]=60,Z),y[5]=((v={})[d.Default]=62,v),y[6]={},y),ie=((E={})[d.XXXXXLarge]=32,E[d.XXLarge]=24,E[d.Default]=16,E),ye=((I={})[d.XXXXXLarge]=80,I[d.XXXXMidLarge]=58,I[d.XXXXLarge]=48,I[d.XXLarge]=30,I[d.XLarge]=26,I[d.Default]=20,I),ae=((H={})[d.XXXXLarge]={avatarRowSize:"medium",avatarRowCount:4},H[d.XXLarge]={avatarRowSize:"small",avatarRowCount:4},H[d.Default]={avatarRowSize:"small",avatarRowCount:2},H),J=((G={})[d.XXLarge]=!0,G[d.Default]=!1,G),N=n(50423),he=n(98587),pe=n(73221),ce=n(14172),ge=n(74521),se=n(62087),xe=n(77476),me=n(95594),Oe=n(43847),Ce=n(4716),Le=n(11891),ze=n(64661),$e=n(49048),We=n(76654),He=n(35328),Je=n(85953),j=n(67090),tt=["columnHeader"],Ue=["nameCell"],oe=["ownersCell"],h=["statusCell"],g=["combinedValueTargetCell"],u=["changeCell"],F=["currentCell"],W=["targetCell"],te=["milestoneCell"],U=["sparklineCell"],Q=["dueDateCell"],B=["blank"],P=function(pt,Ye){return{"--column-spacing":pt,"--border-left-width":Ye}};function q(ot,pt){if(1&ot){var Ye=N.\u0275\u0275getCurrentView();N.\u0275\u0275elementStart(0,"tree-list",12),N.\u0275\u0275listener("onResizeColumn",function(Et){N.\u0275\u0275restoreView(Ye);var Gt=N.\u0275\u0275nextContext();return N.\u0275\u0275resetView(Gt.onResizeColumn(Et))})("onExpansionChange",function(Et){N.\u0275\u0275restoreView(Ye);var Gt=N.\u0275\u0275nextContext();return N.\u0275\u0275resetView(Gt.onExpansionChange(Et))})("onResizeTreeList",function(Et){N.\u0275\u0275restoreView(Ye);var Gt=N.\u0275\u0275nextContext();return N.\u0275\u0275resetView(Gt.onResizeScorecard(Et))}),N.\u0275\u0275elementEnd()}if(2&ot){var dt=N.\u0275\u0275nextContext();N.\u0275\u0275styleMap(N.\u0275\u0275pureFunction2(12,P,dt.columnSpacing+"px",dt.colorBorderWidth+"px")),N.\u0275\u0275classProp("hidden",!dt.scorecardWidth),N.\u0275\u0275property("columns",dt.columns)("data",dt.goals)("expandedNodeIds",dt.expandedGoalIds)("getChildren",dt.getSubgoals)("rowHash",dt.rowHash)("rowHeight",dt.rowHeight)("rowSpacing",dt.rowSpacing)("paddingIndent",0)}}function le(ot,pt){if(1&ot){var Ye=N.\u0275\u0275getCurrentView();N.\u0275\u0275elementStart(0,"scorecard-column-header",14),N.\u0275\u0275listener("onSortColumn",function(Gt){N.\u0275\u0275restoreView(Ye);var K=N.\u0275\u0275nextContext(2);return N.\u0275\u0275resetView(K.onSortColumn.emit(Gt))}),N.\u0275\u0275elementEnd()}if(2&ot){var dt=N.\u0275\u0275nextContext().column,Ot=N.\u0275\u0275nextContext();N.\u0275\u0275property("column",dt)("index",dt.index)("sort",Ot.sort)("isEditMode",Ot.isEditMode)("reserveSpaceForSortIcon",!1)}}function de(ot,pt){if(1&ot&&(N.\u0275\u0275template(0,le,1,5,"scorecard-column-header",13),N.\u0275\u0275pipe(1,"async")),2&ot){var Ye=N.\u0275\u0275nextContext();N.\u0275\u0275property("ngIf",!N.\u0275\u0275pipeBind1(1,1,Ye.hideColumnHeaders$))}}function V(ot,pt){if(1&ot&&(N.\u0275\u0275elementStart(0,"div",15),N.\u0275\u0275element(1,"goal-name-cell",16)(2,"div",17)(3,"goal-actions-cell",18),N.\u0275\u0275elementEnd()),2&ot){var Ye=pt.data,dt=N.\u0275\u0275nextContext();N.\u0275\u0275advance(1),N.\u0275\u0275property("goal",Ye)("scorecard",dt.scorecard)("boldName",0===Ye.level)("innerIndent",Ye.innerIndent*dt.innerIndentSpacing),N.\u0275\u0275advance(1),N.\u0275\u0275styleProp("width",dt.columnSpacing,"px"),N.\u0275\u0275advance(1),N.\u0275\u0275property("goal",Ye)("isEditMode",dt.isEditMode)("showActionIcons",dt.showActionIcons)}}function b(ot,pt){if(1&ot&&N.\u0275\u0275element(0,"goal-owners-cell",19),2&ot){var Ye=pt.data,dt=N.\u0275\u0275nextContext();N.\u0275\u0275property("goal",Ye)("alwaysShowAvatarRow",!0)("rowStyle","stack")("avatarSize",dt.avatarRowSize)("avatarRowCount",dt.avatarRowCount)}}function L(ot,pt){1&ot&&N.\u0275\u0275element(0,"goal-status-cell",20),2&ot&&N.\u0275\u0275property("goal",pt.data)}function T(ot,pt){if(1&ot&&N.\u0275\u0275element(0,"goal-value-cell",21),2&ot){var dt,Ot,Ye=pt.data;N.\u0275\u0275property("goal",Ye)("showCurrent",!0)("showTarget",null!==(dt=null==Ye.metadata?null:Ye.metadata.showFinalTarget)&&void 0!==dt?dt:!Ye.targetConnection)("showMilestone",!(null!==(Ot=null==Ye.metadata?null:Ye.metadata.showFinalTarget)&&void 0!==Ot?Ot:!Ye.targetConnection))("compact",!0)}}function X(ot,pt){1&ot&&N.\u0275\u0275element(0,"goal-change-cell",20),2&ot&&N.\u0275\u0275property("goal",pt.data)}function ue(ot,pt){1&ot&&N.\u0275\u0275element(0,"goal-value-cell",22),2&ot&&N.\u0275\u0275property("goal",pt.data)("showCurrent",!0)("compact",!0)}function Ne(ot,pt){1&ot&&N.\u0275\u0275element(0,"goal-value-cell",23),2&ot&&N.\u0275\u0275property("goal",pt.data)("showTarget",!0)("compact",!0)}function Qe(ot,pt){1&ot&&N.\u0275\u0275element(0,"goal-value-cell",24),2&ot&&N.\u0275\u0275property("goal",pt.data)("showMilestone",!0)("compact",!0)}function Xe(ot,pt){if(1&ot&&N.\u0275\u0275element(0,"goal-sparkline-cell",25),2&ot){var Ye=pt.data,dt=pt.column,Ot=N.\u0275\u0275nextContext();N.\u0275\u0275property("goal",Ye)("height",Ot.rowHeight-10)("width",dt.width-Ot.columnSpacing)}}function it(ot,pt){if(1&ot&&N.\u0275\u0275element(0,"goal-due-date-cell",26),2&ot){var Ye=pt.data,dt=N.\u0275\u0275nextContext();N.\u0275\u0275property("goal",Ye)("formatOptions",dt.dateFormatOptions)}}var ut=function(ot){function pt(Ye,dt,Ot,Et){var K,yn,Gt=this;return(Gt=ot.call(this)||this).goalRowService=Ye,Gt.expansionService=dt,Gt.changeDetector=Ot,Gt.scorecardSettings=Et,Gt.onSortColumn=new N.EventEmitter,Gt.getSubgoals=function(on){return Gt.getGoalNodes(on.subGoals,on)},Gt.rowHash=function(on,Un){return JSON.stringify(Un)},Gt.rowHeight=42,Gt.rowSpacing=0,Gt.dateFormatOptions={day:"numeric",month:"numeric",year:"2-digit"},Gt.colorBorderWidth=4,Gt.resizedColumns={},Gt.innerIndentSpacing=16,Gt.columnSpacing=20,Gt.showActionIcons=!1,Gt.avatarRowSize="smallest",Gt.avatarRowCount=2,Gt.hideColumnHeaders$=null===(yn=null===(K=Gt.scorecardSettings)||void 0===K?void 0:K.settings)||void 0===yn?void 0:yn.pipe((0,ce.U)(function(on){return on?.hideColumnHeaders})),Gt}return(0,t.ZT)(pt,ot),pt.prototype.ngAfterViewInit=function(){var Ye;this.columnTemplates=((Ye={})[0]=this.nameCell,Ye[1]=this.ownersCell,Ye[2]=this.statusCell,Ye[3]=this.combinedValueTargetCell,Ye[10]=this.changeCell,Ye[7]=this.currentCell,Ye[4]=this.sparklineCell,Ye[8]=this.targetCell,Ye[9]=this.milestoneCell,Ye[5]=this.dueDateCell,Ye[6]=null,Ye)},pt.prototype.ngOnChanges=function(Ye){Ye.scorecard&&(this.goals=this.getGoalNodes(this.scorecard.goals),this.expandedGoalIds=this.expansionService.expandedGoalIds),(Ye.scorecard||Ye.viewSettings)&&this.columnTemplates&&this.recalculateColumnLayout(),ot.prototype.ngOnChanges.call(this,Ye)},pt.prototype.onGoalRowClick=function(Ye,dt){this.goalRowService.onRowClick(Ye,dt)},pt.prototype.onExpansionChange=function(Ye){this.expansionService.expandGoals(Ye.added),this.expansionService.collapseGoals(Ye.removed)},pt.prototype.onResizeScorecard=function(Ye){this.scorecardWidth=Ye.width,this.recalculateColumnLayout(),this.changeDetector.markForCheck()},pt.prototype.onResizeColumn=function(Ye){var dt=Ye.width,Ot=Ye.column;this.columns[Ot]&&(this.columns[Ot].width=dt,this.resizedColumns[this.columns[Ot].id]=dt-this.columnSpacing,this.recalculateColumnLayout(),this.changeDetector.markForCheck())},pt.prototype.recalculateColumnLayout=function(){this.effectiveBreakpoint=this.getEffectiveBreakpoint(this.scorecardWidth);var Ye=this.calculateCutoffIndex(),dt=this.calculateTotalWidth(this.effectiveBreakpoint,Ye);this.columns=this.getColumns(Ye,dt),this.setResponsiveSettings()},pt.prototype.getEffectiveBreakpoint=function(Ye){for(var dt=0,Ot=p;dt<Ot.length;dt++){var Et=Ot[dt];if(this.calculateTotalWidth(Et)<Ye)return Et}return d.Default},pt.prototype.calculateCutoffIndex=function(){var Ye,dt=this.scorecard.columnSettings.length;if(null!==(Ye=this.viewSettings)&&void 0!==Ye&&Ye.dropColumns&&this.effectiveBreakpoint===d.Default)for(var Ot=this.colorBorderWidth,Et=0;Et<this.scorecard.columnSettings.length;Et++)if(this.scorecard.columnSettings[Et].show&&(Ot+=this.getBaseColumnWidth(this.scorecard.columnSettings[Et].columnId,this.effectiveBreakpoint))>this.scorecardWidth){dt=Et||1;break}return dt},pt.prototype.calculateTotalWidth=function(Ye,dt){var Et,Ot=this;return this.colorBorderWidth+_.sumBy(_.filter(null===(Et=this.scorecard)||void 0===Et?void 0:Et.columnSettings.slice(0,dt),function(Gt){return Gt.show}),function(Gt){return Ot.getBaseColumnWidth(Gt.columnId,Ye)})},pt.prototype.getBaseColumnWidth=function(Ye,dt){var Ot;return(null!==(Ot=this.resizedColumns[Ye])&&void 0!==Ot?Ot:l(Y[Ye],dt))+l(ye,dt)},pt.prototype.getColumns=function(Ye,dt){var Et,Ot=this,Gt=function(yn){var on=Ot.getBaseColumnWidth(yn,Ot.effectiveBreakpoint);return Math.max(Math.floor(on/dt*Ot.scorecardWidth),on)};return _.map(_.filter(null===(Et=this.scorecard)||void 0===Et?void 0:Et.columnSettings.slice(0,Ye),function(K){return K.show}),function(K,yn){return(0,t.pi)((0,t.pi)({},i.Ml[K.columnId]),{cellTemplate:Ot.columnTemplates[K.columnId],key:K.columnId.toString(),index:yn,width:Gt(K.columnId),headerTemplate:Ot.columnHeader,resizable:!0})})},pt.prototype.setResponsiveSettings=function(){var Ye=this;this.innerIndentSpacing=l(ie,this.effectiveBreakpoint),this.columnSpacing=l(ye,this.effectiveBreakpoint),this.columns&&this.columns.forEach(function(dt){return Ye.updateSettingsForColumn(dt)})},pt.prototype.getSettingsForColumn=function(Ye,dt){return function(ot,pt,Ye){for(var dt=function(on){if(w.fF.assert(function(){return!(!_.isNil(ot[on])&&_.isNil(pt[on]))},"Associated settings at ".concat(on," have no matching breakpoint in base settings and will not be triggered.")),pt[on]<=Ye&&!_.isNil(ot[on]))return{value:ot[on]}},Ot=0,Et=p;Ot<Et.length;Ot++){var K=dt(Et[Ot]);if("object"==typeof K)return K.value}return ot[d.Default]}(dt,Y[Ye.id],Ye.width-this.columnSpacing)},pt.prototype.updateSettingsForColumn=function(Ye){var dt;switch(Ye.id){case 0:this.showActionIcons=this.getSettingsForColumn(Ye,J);break;case 1:dt=this.getSettingsForColumn(Ye,ae),this.avatarRowSize=dt.avatarRowSize,this.avatarRowCount=dt.avatarRowCount}},pt.prototype.getGoalNodes=function(Ye,dt){var Ot=this;return _.map(_.filter(Ye,function(Et){return!Et.isNew&&!Et.isHidden}),function(Et,Gt){var K=dt?dt.level+1:0,yn=dt?dt.color:i.gT.ColorPalette[Gt%i.gT.ColorPalette.length],on=Ot.goalRowService.isSelected(Et),Un=[!1===Et.isFilterMatch?"goal-not-match":"",on?"selected-goal":""].join(" ");return(0,t.pi)((0,t.pi)({},Et),{level:K,color:yn,innerIndent:K,style:{"border-left-color":yn,"border-color":on?yn:""},class:Un,onClick:function(Mo){return Ot.goalRowService.onRowClick(Et,Mo)}})})},pt.\u0275fac=function(dt){return new(dt||pt)(N.\u0275\u0275directiveInject(ge.D),N.\u0275\u0275directiveInject(se.l),N.\u0275\u0275directiveInject(N.ChangeDetectorRef),N.\u0275\u0275directiveInject(he.u,8))},pt.\u0275cmp=N.\u0275\u0275defineComponent({type:pt,selectors:[["compact-scorecard"]],viewQuery:function(dt,Ot){if(1&dt&&(N.\u0275\u0275viewQuery(tt,5),N.\u0275\u0275viewQuery(Ue,5),N.\u0275\u0275viewQuery(oe,5),N.\u0275\u0275viewQuery(h,5),N.\u0275\u0275viewQuery(g,5),N.\u0275\u0275viewQuery(u,5),N.\u0275\u0275viewQuery(F,5),N.\u0275\u0275viewQuery(W,5),N.\u0275\u0275viewQuery(te,5),N.\u0275\u0275viewQuery(U,5),N.\u0275\u0275viewQuery(Q,5),N.\u0275\u0275viewQuery(B,5)),2&dt){var Et=void 0;N.\u0275\u0275queryRefresh(Et=N.\u0275\u0275loadQuery())&&(Ot.columnHeader=Et.first),N.\u0275\u0275queryRefresh(Et=N.\u0275\u0275loadQuery())&&(Ot.nameCell=Et.first),N.\u0275\u0275queryRefresh(Et=N.\u0275\u0275loadQuery())&&(Ot.ownersCell=Et.first),N.\u0275\u0275queryRefresh(Et=N.\u0275\u0275loadQuery())&&(Ot.statusCell=Et.first),N.\u0275\u0275queryRefresh(Et=N.\u0275\u0275loadQuery())&&(Ot.combinedValueTargetCell=Et.first),N.\u0275\u0275queryRefresh(Et=N.\u0275\u0275loadQuery())&&(Ot.changeCell=Et.first),N.\u0275\u0275queryRefresh(Et=N.\u0275\u0275loadQuery())&&(Ot.currentCell=Et.first),N.\u0275\u0275queryRefresh(Et=N.\u0275\u0275loadQuery())&&(Ot.targetCell=Et.first),N.\u0275\u0275queryRefresh(Et=N.\u0275\u0275loadQuery())&&(Ot.milestoneCell=Et.first),N.\u0275\u0275queryRefresh(Et=N.\u0275\u0275loadQuery())&&(Ot.sparklineCell=Et.first),N.\u0275\u0275queryRefresh(Et=N.\u0275\u0275loadQuery())&&(Ot.dueDateCell=Et.first),N.\u0275\u0275queryRefresh(Et=N.\u0275\u0275loadQuery())&&(Ot.blankCell=Et.first)}},inputs:{scorecard:"scorecard",isEditMode:"isEditMode",viewSettings:"viewSettings",sort:"sort"},outputs:{onSortColumn:"onSortColumn"},features:[N.\u0275\u0275InheritDefinitionFeature,N.\u0275\u0275NgOnChangesFeature],decls:23,vars:1,consts:[[3,"style","hidden","columns","data","expandedNodeIds","getChildren","rowHash","rowHeight","rowSpacing","paddingIndent","onResizeColumn","onExpansionChange","onResizeTreeList",4,"ngIf"],["columnHeader",""],["nameCell",""],["ownersCell",""],["statusCell",""],["combinedValueTargetCell",""],["changeCell",""],["currentCell",""],["targetCell",""],["milestoneCell",""],["sparklineCell",""],["dueDateCell",""],[3,"columns","data","expandedNodeIds","getChildren","rowHash","rowHeight","rowSpacing","paddingIndent","onResizeColumn","onExpansionChange","onResizeTreeList"],[3,"column","index","sort","isEditMode","reserveSpaceForSortIcon","onSortColumn",4,"ngIf"],[3,"column","index","sort","isEditMode","reserveSpaceForSortIcon","onSortColumn"],[1,"displayed-name-and-action-wrapper","compact-cell"],[3,"goal","scorecard","boldName","innerIndent"],[1,"actions-spacer"],[3,"goal","isEditMode","showActionIcons"],[1,"compact-cell",3,"goal","alwaysShowAvatarRow","rowStyle","avatarSize","avatarRowCount"],[1,"compact-cell",3,"goal"],[1,"compact-cell",3,"goal","showCurrent","showTarget","showMilestone","compact"],[1,"compact-cell",3,"goal","showCurrent","compact"],[1,"compact-cell",3,"goal","showTarget","compact"],[1,"compact-cell",3,"goal","showMilestone","compact"],[1,"compact-cell",3,"goal","height","width"],[1,"compact-cell",3,"goal","formatOptions"]],template:function(dt,Ot){1&dt&&(N.\u0275\u0275template(0,q,1,15,"tree-list",0),N.\u0275\u0275template(1,de,2,3,"ng-template",null,1,N.\u0275\u0275templateRefExtractor),N.\u0275\u0275template(3,V,4,9,"ng-template",null,2,N.\u0275\u0275templateRefExtractor),N.\u0275\u0275template(5,b,1,5,"ng-template",null,3,N.\u0275\u0275templateRefExtractor),N.\u0275\u0275template(7,L,1,1,"ng-template",null,4,N.\u0275\u0275templateRefExtractor),N.\u0275\u0275template(9,T,1,5,"ng-template",null,5,N.\u0275\u0275templateRefExtractor),N.\u0275\u0275template(11,X,1,1,"ng-template",null,6,N.\u0275\u0275templateRefExtractor),N.\u0275\u0275template(13,ue,1,3,"ng-template",null,7,N.\u0275\u0275templateRefExtractor),N.\u0275\u0275template(15,Ne,1,3,"ng-template",null,8,N.\u0275\u0275templateRefExtractor),N.\u0275\u0275template(17,Qe,1,3,"ng-template",null,9,N.\u0275\u0275templateRefExtractor),N.\u0275\u0275template(19,Xe,1,3,"ng-template",null,10,N.\u0275\u0275templateRefExtractor),N.\u0275\u0275template(21,it,1,2,"ng-template",null,11,N.\u0275\u0275templateRefExtractor)),2&dt&&N.\u0275\u0275property("ngIf",Ot.scorecard)},dependencies:[xe.NgIf,me.k,Oe.$,Ce.I,Le.E,ze.$,$e.q,We.t,He.e,Je.m,j.i,xe.AsyncPipe],styles:["[_nghost-%COMP%]{display:flex;flex:1}[_nghost-%COMP%]   tree-list[_ngcontent-%COMP%]{flex:1;overflow:hidden;--column-headers-backgroundColor: var(--scorecard-tableHeaderBackgroundColor);--column-headers-foregroundColor: var(--scorecard-tableHeaderForegroundColor);--row-backgroundColor: var(--scorecard-tableRowBackgroundColor);--row-foregroundColor: var(--scorecard-tableRowForegroundColor);--border-left-width: 4px;--expanderWidth: 44px}[_nghost-%COMP%]   tree-list[_ngcontent-%COMP%]     .row{width:100%;border:1px solid var(--fluent-theme-neutral-lighter-color);border-left-width:var(--border-left-width);border-right:none}[_nghost-%COMP%]   tree-list[_ngcontent-%COMP%]     .row.goal-not-match{opacity:50%}[_nghost-%COMP%]   tree-list[_ngcontent-%COMP%]     .row.selected-goal{border-right:1px solid}[_nghost-%COMP%]   tree-list[_ngcontent-%COMP%]     .row goal-actions-cell .action-btn, [_nghost-%COMP%]   tree-list[_ngcontent-%COMP%]     .row .actions-spacer{display:none;visibility:hidden}[_nghost-%COMP%]   tree-list[_ngcontent-%COMP%]     .row:hover goal-actions-cell .action-btn, [_nghost-%COMP%]   tree-list[_ngcontent-%COMP%]     .row:focus-within goal-actions-cell .action-btn, [_nghost-%COMP%]   tree-list[_ngcontent-%COMP%]     .row:hover .actions-spacer, [_nghost-%COMP%]   tree-list[_ngcontent-%COMP%]     .row:focus-within .actions-spacer{display:block;visibility:visible}[_nghost-%COMP%]   tree-list[_ngcontent-%COMP%]     .column-headers{border-left:var(--border-left-width) solid var(--column-headers-backgroundColor);border-bottom:1px solid var(--fluent-theme-neutral-lighter-color)}[_nghost-%COMP%]   tree-list[_ngcontent-%COMP%]     .column-headers .header{border-right:none!important}[_nghost-%COMP%]   tree-list[_ngcontent-%COMP%]     .column-headers .column-name{font-size:var(--md-font-size)}.compact-cell[_ngcontent-%COMP%]{width:100%;padding-right:var(--column-spacing);overflow:hidden}.displayed-name-and-action-wrapper[_ngcontent-%COMP%]{display:flex;height:100%}.displayed-name-and-action-wrapper[_ngcontent-%COMP%]   goal-name-cell[_ngcontent-%COMP%]{flex:1}.displayed-name-and-action-wrapper[_ngcontent-%COMP%]   goal-name-cell[_ngcontent-%COMP%]     .name-box{white-space:nowrap}goal-status-cell[_ngcontent-%COMP%]     status-icon{width:100%}goal-status-cell[_ngcontent-%COMP%]     status-icon .status{border-radius:4px;padding:0 2px}goal-due-date-cell[_ngcontent-%COMP%]{font-size:var(--md-font-size)}goal-change-cell[_ngcontent-%COMP%]{--change-font-size: var(--md-font-size)}"],changeDetection:0}),pt}(pe.w)},95027:function(ct,Ge,n){"use strict";n.d(Ge,{u:function(){return k}});var t=n(50423),i=n(60166),w=n(77476),a=n(59968),d=n(44408),p=n(50264),l=n(85102);function c(O,s){if(1&O){var ne=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",12),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(ne);var Z=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(Z.onLinkToGoalClick())}),t.\u0275\u0275elementEnd()}}function y(O,s){if(1&O&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,c,1,0,"button",11),t.\u0275\u0275elementContainerEnd()),2&O){var ne=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",ne.canEdit)}}function r(O,s){if(1&O){var ne=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"div",4)(2,"div",5)(3,"div",6),t.\u0275\u0275elementStart(4,"button",7),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(ne);var v=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(v.onNewGoalClick())}),t.\u0275\u0275pipe(5,"localize"),t.\u0275\u0275element(6,"mat-icon",8)(7,"span",9),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(8,y,2,1,"ng-container",10),t.\u0275\u0275elementContainerEnd()}if(2&O){var ee=t.\u0275\u0275nextContext();t.\u0275\u0275advance(4),t.\u0275\u0275property("disabled",!ee.canEdit),t.\u0275\u0275attribute("aria-label",t.\u0275\u0275pipeBind1(5,3,"NewMetric")),t.\u0275\u0275advance(4),t.\u0275\u0275property("pbiFeatureSwitch","goalsLinkedGoals")}}function C(O,s){if(1&O){var ne=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",15),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(ne);var Z=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(Z.onCancelScorecard())}),t.\u0275\u0275element(1,"mat-icon",16),t.\u0275\u0275elementStart(2,"span"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"localize"),t.\u0275\u0275elementEnd()()}2&O&&(t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,1,"Metrics_LinkedMetrics_CancelSelectedScorecard")))}function m(O,s){if(1&O&&(t.\u0275\u0275element(0,"div",13),t.\u0275\u0275template(1,C,5,3,"button",14)),2&O){var ne=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",ne.onCancelScorecard)}}var k=function(){function O(s){this.onNewGoal=new t.EventEmitter,this.onLinkToGoal=new t.EventEmitter,this.onCancelScorecard=s?.onCancelSelectedScorecard?function(){return s.onCancelSelectedScorecard()}:void 0}return O.prototype.onNewGoalClick=function(){this.onNewGoal.emit()},O.prototype.onLinkToGoalClick=function(){this.onLinkToGoal.emit()},O.\u0275fac=function(ne){return new(ne||O)(t.\u0275\u0275directiveInject(i.M,8))},O.\u0275cmp=t.\u0275\u0275defineComponent({type:O,selectors:[["empty-scorecard"]],inputs:{canEdit:"canEdit",isMetricsPicker:"isMetricsPicker"},outputs:{onNewGoal:"onNewGoal",onLinkToGoal:"onLinkToGoal"},decls:5,vars:2,consts:[[1,"empty-scorecard"],[1,"content"],[4,"ngIf","ngIfElse"],["metricsPickerView",""],[1,"icon"],["localize","ScorecardNoMetricsTitle",1,"title"],["localize","ScorecardNoMetricsDescription",1,"description"],[1,"pbi-fluent-button","primary","new-goal",3,"disabled","click"],["fontIcon","pbi-glyph-add",1,"glyphicon","glyph-small"],["localize","NewMetric"],[4,"pbiFeatureSwitch"],["class","link-to-goal","localize","Metrics_LinkedMetrics_Button_Preview",3,"click",4,"ngIf"],["localize","Metrics_LinkedMetrics_Button_Preview",1,"link-to-goal",3,"click"],["localize","ScorecardNoMetricsInfo",1,"title"],["class","cancel-scorecard-button pbi-fluent-button",3,"click",4,"ngIf"],[1,"cancel-scorecard-button","pbi-fluent-button",3,"click"],["fontIcon","pbi-glyph-chevronleftmedium",1,"glyphicon","glyph-mini"]],template:function(ne,ee){if(1&ne&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1),t.\u0275\u0275template(2,r,9,5,"ng-container",2),t.\u0275\u0275template(3,m,2,1,"ng-template",null,3,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementEnd()()),2&ne){var Z=t.\u0275\u0275reference(4);t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!ee.isMetricsPicker)("ngIfElse",Z)}},dependencies:[w.NgIf,a.X,d.Hw,p.P,l.F],styles:["[_nghost-%COMP%]   .empty-scorecard[_ngcontent-%COMP%]{width:100%;height:100%;overflow:auto;display:flex}[_nghost-%COMP%]   .empty-scorecard[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin:auto;max-width:350px;text-align:center;display:flex;flex-direction:column;align-items:center}[_nghost-%COMP%]   .empty-scorecard[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQkAAADwCAMAAAAkXGEzAAADAFBMVEUAAAD50Rr2yhLzyhLzyhLzyRLzyRLzyRHzyBLzyRHzyRLyyRHzyRLzyRHyyRLzyRHyyBH/0hTzyhPyyRHzyRLyyBL0yRPzyRH0yxLzyRLyyRH1yxXzyRH4zRf/3CXzyRH0yhP/+UP0yhP0yRHzyRHzyhHzyRH0yRLyyRHxxxHwxhHvxRHtwxHswhHrwRHpwBHowBHvz0n777v99NDkuxHguBD99dPetRD89dT58tLcsxDnvhH89df2yhL99tn999v88cX55Y3555r44oH99939+OD66Zz444f9+OPzyxz22Fb56Z/++eT++eX9+ef56aL++un8+On9+uv78MD666v66qX+++3+++/+/PH666j99tf888z+++v+/PT+/Pb+/ff+/Pn//vr//vz+/f3u2X3asg/Sqg/Kow/huRDWrxDTrA/11UjyyRf0yxL00DP43m/333hZQD345pZPOxzzzSNWQiX////00j769Nn88sjzyRL++efz1FL222W6lA9FKwv///9PNBHwxhL////9/Pzuyzb04Y3x2G3tyCny1V7qwxv////atBb99dX///7kxELp0Gj67bTsxiDivzHny1jCvbLSy8DfuR7x4JbsxBj79dr58tb16r389+X////79d3279Tz7NT49OX69un////07tj28uT28dr18N/7+Ov//fjv6tr48MvX0Mj48936+O/s5tbz7uD++eT8/Pz29fP89+H69eHm4dPw7OH7+vb////5+Pjw7erby6D8+u/9/fvr59zm4c718+78+/j//Oz////6+fjz7+be2M739fH6+PL9+/Pu7Onr6OHz8u75+PX39evv7ej49vPr5dD+++n7+vnt6uT////8+/r////////////y7+ro49aNgWj9/Pvk3MX//O/////////WzsZPMxP////o5d/o49z////X0cXm4tv////9/f3h0ZX///7////6+ffx7+zn497t6eX39fTm4t3m493j39nz8e77+/r29fTm4dzz8e/5+Pfh3dfkktj7AAABAHRSTlMAEzZVa3yUprnN2d3n7PL7/w08s9XzTYEoYp8vxSAHikIDXHPiZr6b8P//////////////////////////HP//////////////////////////////////////////////////////////////RP///wT/CP8Pzv/+//X///+FFv83/8W3////////0f//1v///////xRA/////////9L//////9T/////////iSj/////6adb///////JlUxS////////48F///7///9z//7//////+3//9r/2dfc//8o5f/w391vIeH//+P9/ubq/+3p8+vx7ubq7fvz+PDaofzxuSMzYQAAH99JREFUeAHs04VhhTAQANCL4nC4u+4/YSeot0DyeTs8eDwet0Io40IapmU7rucHGPie69iWaUjBGSXwAsKIyzhJ8WNpEksehaApkuWxg9/hxHlGQC9FWdn4M3ZVFqAHwioXf8etGAHF1aIJ8C8EjagVPpHb+JfsXMknrUjw7yWiBaV0zMT/YrJOnRW9h//J69VYMsT4/+IBbm6cLDyHNY1wX9284HmWuYN76riL53J5d8cX64LnW9bbHWEOXsNhcCf1htfZargLsuO1dgJ3MPIDr3bw8Y26urqRIIihKLqqBMrLzGgoGGjOP66l72ay5sgRXOnJR+qu7qAJ9gaT3V1pf85LW9+AiHgAIprYw16qflRzBnXwL4M46c3JXwyESc6MXohX2xCCxfsQYm8heC88NYV91XoZp9AYYrPdDbTdTE8BpypPxLxBUwkJ291g2yCTS8CbUVlGA2K/342w90wwlX1VWEZziZCkIyRhagmFhZy8QTOSmOV5Wgy7PM+iEMzg7UR/Gf+QXSzzEcroGAHgcBbyfANtkKUaV6ISxh/u62A3bSAI47hAuaL9FBuCkMUh+NBzKkU9EAgJJG4CxLjN2nn/Fykbf6vS1lLxesct+YsDO8ffYeSBl0atfHyPA/z3EgjGLezKCEdITB3yKYFIfG/ehDgJCYQ3wpdnjBORQDyUhOj2cJzEzCHPEuh15SAGfZyQBPoDKYhLhWMl5ux2YbqaV3a1MN3ap3cJqEshCKC2xB1M99US9zDdiUgwEYqBqiGxZJRYVkYJ+5SQUAOBZdnHCUqg731tDnuoI7FilFhVRgn7FJFAb+j5gyrGiUog9vqJ1QnhJvEA02O1xCNMD8ISCDsej64INSWS1XsJJZJVYtv/3c/f35TgXEwC0djbGR6gtgSzEsn1V9NTYjuUYGISCHwd6SM4Szxbic8wVUk8y0tg5AdigsYS6+T6F4l1st7/KGFnghKY+IA4Vw4SG0aJzeZLKbE5jBL2KSmhzptDdGI4SGwZJbZbSmwPo4R9Skog7jSWCPAhJBBILIkaEi9/l3gRkBBYFV3lJpGm6S7d7VJKpOm0lODclO4okZr/+7mwhOq2uiSsRMYokWWUMLNv302bLKNExgQlmq+KAAISTzBN5SQEVsUETSVeYVpUSMzal8CkxSVhJbTWmf4pobMZJfZzK6EXML2amRaUaL4qxiHcJZiV0PNSwsxKibm2EprJSyB0u8UuICCR539I5FrnZt6CBC5cIIaqgUTOKJHnlDAzSuS5lWBtSKihwykewafE8neJ5T+RQFT/QD9DE4mCvZUSRUEJM6NEUZQSbwVrRQJndSE6n7xI/GDuPNjTRrYw7N7AlwMh7uVyl4V4+6Z3F8JiuT/YuLftBUxLYc1u2j+/YggayRmfkXQ0it/0Ht4HSTOfPh3v/9DgYHf3kH3nZuPnbrLvHu7uHrDv7Ptr4ka7QxNJIJk4coE/JiDpTMQ4fHoTqorf445MJD6xCZXF74QTEZ1ANHF8cnJ8cnx88uHbBifin9P58PPchOLid6eDK2iAauLEBdyE4uJ3wP6V9HP4pCaUF78/t73hiHtl4vTkVP98wkF+/pSbUF38jk+pXlRxE6fO4SbUF7+7bL4lgnQTP7qAm1Be/A5OqctnrG1lVyZYW5la/PYys4nFgQR7IT+5gL0Qn4rf8Zh3dSr0qYZ7Rz875ugee3NT684eFrD66Sa+ufPLsVMRx7/c+cZHE/02BmkAlZkvvr7962+/O+S3X29//cWMrOQ7l7t/PzfnRclXPsqjj25CPzz++PXPvxzx569/6AcHauIgk9cAbt0C0PKZA6qJPmlmB1TYyuib23/88ccd2+i/+fY3rXWR2MTcUgF0mAmdwtIczQTIcrxp8ETFF/qm6JuvbfONvtkyNlCiuvP9lAZN7t6FJlrqPqnuPC1ZVQ0CHeKmWmDiIA8t7t+HFvkDionBKUXb8fhZ+CwO9KCF1505c0UQmYCi0fl2U3fuVHS+PNP/9BmWH+LBKGbiVhHEJqB4i2ACPWdOgmsacz3DcDmTk+Cs7szJg4nHj8FE3vz7HJqAScRENyh7T7S1uTWRgstNQIpgohsxEQXaecI7E2mDAw3M7O+DGe0gbeDURJSwmBgEHBUmSmDh6VOwUHJvAkbc3xPuBSfMmGlrm7kcxMStApgoltPpchFMFG6JTdDuFw8ATv+Q+/VEpeJgPcGL3+kqcLRcs/id04BTXXRd/B5wfbvnv/htY3Q6y/PndkJ6bqLFEhi8mGv95NwLMFhadF93Hnd55ejRL7PXQY4wpH/50m5IbzWhgcHCosECGGhiE6SrxwSgJBvL08gAyBCH9K9e2QzprSZugUFthZtYqYHBLffF7wmxiPYQIETPWnOb4oDAQ3rEBBrSW4vfN8GgvGqiDAY33Re/Q+2O9xzBMeOQiiSjgMBDesQEFtJbS75bYLCwZmIBDLYIJd9ON49xjDF/4STIEIf0f/8tD+kFJvbAYNm+CeKDH0HACU7qIgYAhYf0D+5aP9/Xv2CfeUhvMbEJBmWziTIYbBJMBN2lVRMx2fuGHtJfLH7fB4PaBqNZ/K6BwX1B8Zu0zBwFKV1nIIMeTVtLvmsaGOSyBuar6Aal5Dvq7mmviV7fTWSXTAurbItz88oqKzdRH3ByohgAKfUAgPpJHFYTVZOI2a0sw7LaXrBhYmLMwYK7Heh4ZoIXv7NPC4aIZzWopbLZCzuw2W158Xvo8gr6xyuKoStmwqD0QcS2LkJndRUslPjvFJgwYuyuy1QMkVvaCmaSiE08LjREnG+nmQj45x8wo83ubOPF7/oEe7HjvVGbO/NrV8vEDifTELGjixCZyOxwxCaivWx5PDRRt/n4S9xTE7MuEJlg/KuLWKxBk40NMLG0g5tghLqQO1rxiyLCcLVM7JpIn+8aIqwmiov8dyF151DHEBbKW4l4a+KZC8QmGKZN+OGhScT+ri0TMIYEDhF6y0ypiSML6bzIRH7VbvF7oG6/fdbjrYk0ytNUmYfzN1vfEZjgZAoXTWjzO55U4HvIlw6CiSWAFy0BT4uYCc5sqeliexsaFF4/w4rfhGcnoz6amAcdbSvNeA0WE0jxO73wb6FpQsv/sIEXvwn3f64DGWFIb0xjMUifa9CgsP4hmrWG9Hjdefbm0dFmGq07O+U6fdeBmkDIm+5UzGkA1miaXvzGkO88OvwzwY6NIjTIzBZBYIJW/HZMh+00l2iCT2Nh32XHRnH59Ywh5GJITy9+U1LdLo9NrF5KHgAK88vLpQI0qVlDenrxm/a0YLfHJtYuIwM6r5d1yho0eLFgDWTpxW+UoOxGWI9PJs4LAFBbZmQaKgqZZasJevEb48Y12dKqV6WJar78bK1JjS0Ol5vMv2BvD6sJevEbo0/w5u8lN83k01lY+L6RYsfARoMM6JTWWyyUUvrX1pCeXvzG6ByRNc/6PTaR5WwBo7aZzc6xY2P9AtZAll78RojG2nolZfYBZSZ4Ter1fXZsVOUmRMXvN29sFr8RQuNs9A4abwdUmUgXQacABqV1qQlh8fvtW3vFb4T6kHBkeMDOPVHadBbjxs3rqpG01HLruXX9c67xLUM0nUVQ/H7+3F7xW/4Rkdp7sXujg96bYKRAJ5/L5VIvANixkfuI1u/Fn6auVEhPUwf7THH+SHdfEAwG6VtRuYktYEvrnM76aw0AyrmPQKazyLp7HJAw0NvNh8jGRvvql25GQx6b2Gmimd8GC0vFUk6AJZom9Dm7w92AEEq2iz+IWchiAtSYAJ1UTgJu4rPP7JoIywL6wAjbbIbgAkrfE7tNAOB1TgYSTXMDhPcEJx4WDekKqTxPcBP5PSl0E7bpbYtF4SL/UXrtOGoCxXW5CR7IKjcBk6PAEV47gmpMaNW9q2ViuE/WtYqDUxIhGyZSe65NDA2pMHGtLjiREvcdgS4b01m27CAM6bkBT02I3vsD1L1opIcJSWCTODa35GyeNKGZINBPzSeSseGJZKQrpGBOjb8m+oiZFWt/x3pUTGfx2UQvNcccFleS6CG93yZ6iC2rnpjoOQhKSC82EQ6rNjFMut8R6ookJ4ZjSY+nswhMJBKqTXSR7oElAqDTE3E+neXnn+2F9PyVqzbxPy/ui3YFnE9neYeH9P6biHhxrzyUcDyd5d07PKT33wSLcDh18Aw8pH//Hg/pfTcRihE6NZTpLO/f4yG97yYCynpW4pAeT+t5SO+/iQShe0eazvL8ORLSC1759LRiE0nCIEjSdJZKBQnpBSZiMcUmuukdXbkPMzduIGk9cHxfbQ8p623jM0lkr8h/E5OKuvzIK6OYYCaVcJ38fAfdBJ7Q89+PTfyhM0F+5oduAr9rw3+/34PIh67ue8Lnj/PSfpXPE/TIXb7/4gxcVRPEyB0nNEX8iJHqTYyM8N9PitxxJvBx4/ShVnQT9Tr//aTIHacHnzVAH3RGN8H/nJvInTaKIw4I5OF34TDFBD1yl8c0nKTS98TEBMEEIXLHiRNmYxKG3xFMECN3fF3l+4pCsYmPI3f300L71XuYman8n7azem5ch+LwZWZmJo3AjangLbezzOw8Xlpm5lUpUAos7x97dax4E9XXWo2n+p5D+ub8ZEUP55zlHCFkyZzmyt2s54LkVeseOMfQ9Q1jzsGHLRPvFz9NSL6wLgITcXvHGKVEgLn0UdyEveF5n1gXwTbOzJ47c2POYdIHBh/auFg18ZG+P6Y9E8QpdXqdlffNL5QqDqOgQxsXmybe+VHTFtIinNDor1CakIztnKzO1Zg2LjZNvPZCLm/ZNcGCrWG9HgJeFzcbF4Tsm9BPKXjVajho1L83NaHqUOIiw4Lsm3j3x3wTwzZNYOovxkvLy0tLoYKXjQslmCPrJn7X92C3GY4jK3G8YUMcx0tAng+Iy3FCOLJt4qS+L79VE6txL6oO1cdGgrllE+/8aGVWA8oizwmox0T//IhAsZFXHmUG+bBgwnhsxWvGK+dZsEJ6TkCpib6hxkiCgQ+3jxiYSH0XMvHFusx0QbBs0gvN0nkQcJRumEPhaIKBj4lIawIcSPdSdwEX36zLAH/ECaFM4HSATtEJtVqtWRHMCUpAhcolgYmWFGGi46+IpibyHaT+pe0CnTG1/GAmgl7eeO7cxNatO/fv29doNNy9e8eulr3/oXyZJnsfx/RIe0owqpLjo6rWhCqBYHDAGJu7ceace3UjK6DiU7WjV8G/YRyTStkzZN4hHMkT5l9Tz3iejlbXhFIIqYNKaWF+X/obSkIFKnLS1vOliQlW8hTCfM75FCcm+vr3TydodUgfS0cckj5F1TCw2lx1cueY8t0iSpgX3y+LTxdFnESl0JStRxjh8qx9VZow8OEGsDYohLNn14Qh619+RdEuVhpeWU8TS+HOgMGiMI0WoZfTtEJeXCZ8SqASYLJBJwzj+8p5Nbh3KKLZeCCg+Ig4WRT6D4VVrSzpgYdAnHA4YITDNuGvpI31Mz4yOkS9E0gEZffuZ8LQi/yuB36mKFASqbzTxpvFZs4iLkFdE/5KbMo+aQKzYGH7NiCrI+ujLUwQclyE4dIljQOQDaz4DPPMBVnzeEXeemRd/FRo6CznhBB5RCpiohE4siaCh9slGh+pjpZDCdko+/nnFEIvq2B77XO+JraUfTeblBAojGLTqX9dI5fOnan2MZqoSNMhNvgRIxIT8JYh9/r162BCrwOIA0YpK0sTOXWQAt8x3++oJrj4vgV5njl345EsDKQpiTx+fFORy6riN00eiVIV0oQJoyOjo25/xOBE6v/9WHSqETKyPjJC3COMUccNBfW6XgIw2lC3TPjV7Egj/W87tvEyJbhHxlvmA8s/6kkGrY0n5dkOYBd7ZmLUjMdX3CHfYdSJgge7d+xK0fgAHRM+ozSa6JjQOBCmgXDIV0xwQv1W7x9990yFysqQJWHO6917+bmGzGm5FTgU846JlomFx1euPHny9O8jflSpVv+j7D6Cm8jyOI5vjufd4942B5KM4uRxFRlkk4py6G4yN68LlzaizcGsYYpYkmVhtRVaXhyGccuaoDYSM0L2MJJzJme4n/f312vJHYRgv+QMH73/635NOnk24HYzh5dyHHDiHspygAy6uowGegTWGf3Fg5bEAZxeNBaaLQP/bs+r99r3tJMBCCzP907iBgao+PwVCdrq361Q0AcHv//Spe7Oo6cOEObFAyFRL2H2QEWPs07Mk/Nf+1BPT1UD9C46q5Ogl8paj+u4HqO0ZXz11R3Q19XJ+HvJAevz7w4LUTCJd19cMBj0eRhDdzgU+M06ym7fGQEFqttRIT3HhVW4XDnP7EMdHdUNWAd0Fw9cstnFzYDBtowftaBXl/jBdzWTAYjii3LWSlsFJDCFtS9IdYhCoTsmNcbjzXY7fR92e7g3EgqJCBgN6MXLw3XkV5BYZbW5XC6fD2/R66/jvQoItcV2WfFkR/tbTDUXcXwxYKhPSf97ubW19f/A+L5uMtjqXH+mZjW2CrrbfoEEGPr6otEwLYb+eLEmu339epvNZu8fGIxFEDiYhZbD7ca/9xZQ68SOhB3T2ulfCYuM3vN5fEEdAutN7cWDhuPCOu3RVrsw3m9ru/LBOWC8mkVLS+u3tJOBaG2uLW4Vf4bEhVpNG+jtkCyXGWJiY7yc3W5Dfh+X6B1Ock3iIDBEUarb3VAOEAAIIZm6WOPEQyCn9eIlU9AAhZ6ffuSTR1b98s/aZ8fsNGdeGLb2NvThRx8ff6WFAYjWT97TQqgz+mtsFbg0Q2KDriH8bPoYQzSUivOaVAlXQBm5ms5wPM/1Dw7CQpKk3RRJ1ImhUCRW7rT1iNPptDhOd7PCVBT19cnRqCdYNlj5oU/RNf6npeFYXbNTc7LVYVwjCerTz86/3AIOxz/+y/u6yXidTedpB50IILGlHH4uQ0WGcJh2Bt5Q3O/fh3n3pJTs9VySEwSB50azZQuqThJD4hhqbGyi3lSfgQXjFeqLBoMMAbEfG0QXzxxhz4DZzcQF/FTfqIThaUdtan/9/HJVixaC+Axf0WOGqH2dtgqa4a1qGzbIKkOYLQZTfhflH1NGE0wC8ckIs0il8M9ZSVIowmuyr2P5K0lI4T55iDHQiyDTjy3F3fazR1ZjCyvdTNRqj7YrFq6Orq52LQa2DB2FEeLylTbUYSMHVHKg+XwTE/krHCJUiEAAEGAwLAajhM/n57jMjS/yGUVQayqoFnv2psRIRD9PbKbtlST6B/rkDeptGBxi0ZiEF2Cvvf6kBbt56WaCHeZMC+NaT09Plx7jr+daqk1GG2pvv6ZbEIBAG7Y7LKtXWRy/K7aNIGLiWDP/4jx0DfR5lAyfHp9gEiy+P5sNFSSpXxIHs/xKY3YbOeBys1ePwFP9k1F5Q/E1YA79qp7ttIPmgz0JqWUZMYI9LJ3Fx60t1SaDILq6pnSTQWFJ/sNhcVoObt1BQSIyxlfPQ/cBnoAy7Z2e0UnAYpQsCoXQ8DA+UarOZiMKvL9bQ8BiEoHiWpRjMeZA+e2dR4/Q3Q4Nx0WMjgkDzXZ0dJgwsFdUm4x2gujp8BgWBCC21p6yWo4c3MBuA0IRkX9JQUj4+iRO8XpvpPNzgr5kIRvJZkducIyIPAJ+238om20bEIyNTsZkowMa8rtO0+0VnccdNkyO3oIw3p2an19YgIUO48oJJmGejE9LED1o0QSBdbnupLXm6JCbScQKL5eg+62xOcHrXVrKZwRjXGF4eHkkmYEFK+hyse3NJfPmINHHHFK8JrffVY9Fgd8H+KXlLI4vsDAuDECgBQ0GbRmfQ6LaZDCIjoUp/WQA4ne/27Hz6MGjfSLdJoqhWG8VBIGSg1Ryzuv15scnphXBFJdOLOfyyUyGExDvAQSj8FSSuNobQ8ah3ONxYVGswsltVc3OrciEMbS4ODs7a8Rov3kcElUmo4dBzM/LhgXxux3owLFDUdENCbcYG2iqosAkcBaRM/shodzIYTzMKcmldJpZKEKcdlgKp1nTcHDcxNXe8CAcDMX9Pl/9UTzX+BXuf7GXMwstxq1FilnQlDCMKydIovpkdBDE/KIJAm07dag7RPdFkhgZKFRjQIEgIGQsCTTzRX5O2Y/0EEom453LpXMTwODGyEGlaDQ4ZDL59O3JQTiYgsQb2ClWrT7yjx0IFiUMZnHn7r17zEKHcf+EEaJFe81gCwIQs7OLt/STQTXU+Q5NRkTcCuBOoHfYqKCLV3C1ww0x56VyNB4koRRjW6QCiWlaMROwSE5LnvKZ05cyOkzklhKjHMebk/GtsFM4Ldb68tFWMyV37iIDBqak7YFhSRiuGWwyAIFvde9OeUGUIBrqdnfe7gXFnj2SOJygNYufY5KDgiEFBQhCjgsC5mNuBuOhmMsk93vR/iQsIpc8JYmgW++Qz6UnuCQHCTO+Gxvzu2cdlpozbu0xX8W48xAxi3vaKfnoxPGWFv2KME5GGeLu3Tu6yQDE7t2pPZHEcEhK7e0vDCfSuaWZR48fPxpPmiAE1DiGmgXWI1xH93vNTe8X2Ecyue5L/tLJOxjQOCTJQYCWRkJDnwpCov6Y1fF3t/bZB7NwPwFEJYxPThiXRMXJYBB3H97ZsgLRQBD4Z2+FkYFsoQCI5afXH6OZmUfPbuSNEl7E45/tKhl5l7I5rB18xJCilH2ksN9DEpTMfrGqQ774zSDBEPQ1FQ9mZ48dtUsNSIfhfv7kSclCNyUf6ocDEB8YIOYZxD1A4Bs/cZODDmKvMJdIjIwsJxLXnz5dmpjzovyjcU7QxyTiTVzpE/mZ9Giymf7nHk7ReijllSLEG7shoT754cmTYw70NZiEokJDCFOZYRuSPFQ7VNt5+FSITrg6DPf/2jMP57SRL47//rtf90x6x0L7D1ydcvVdmXZtypVpxxV7gguTAGmgKyxIk2BBBBYeaTRzIj0B93o2Tn+r1RqMzFjp9ZO4t9Vnvu9p92l2BlUEZKCNcx+/3WXiXK/KQBFoYmaHEME95EbGK2ZzamosU8+qCggcQ9nKBHYRGXzkPDMx6rnox7eYD9+ELAsTo0eH+AgCW20Er9fzoBDw4XswpodXZdOuembO4An9X6e/m4sPisEHIkQgW8n4IVAcx37rCES3CPz5GRGInXiEjqcxC81GI1NXHeiAgK7KnUSj3ES/BBvYbkmJ9I8y+hn4NiJFqSQaBUYo9+vQz6f5AOJ0mYvwPYhMaFqtYhpNholvjZqMDDIT//rxUpbd1Pa1ZeycX1iY8elycTZw53jz3VOdIriHq20PMzOzOJHeuWPHYDydyjAM3QrUOgEwadAElaSOb9VNXeEn104XkZKXeQDAH0r/yiYQnL3YI6oKbECoU1NZFBCjUqWAWIbtsJbJfiaWy6fiI8n9+/dxGRhiFMGY2SIYbKfdZeLtj3/vVRkoAllYjOHGmlvIqhqBrSBQsTaZoL4JaCMZuiJ2pSIZ+KqMmR+NeneFyMTR46f/5c/D+mRHUTYsUFYQ00jT1i0CAtlmoYgwEbGIlsmOJ/ftR3K5EWR+ViBUeHgmLgTOHLituvD5RiC2EnFxabmA1LO6Bj0hUBXlQau1WtVyKGEmZOjAaxTRLhfMBLMQxZf0xNDxM2IOFKMSmmBRcFhBNJBps+Z0/1kXnUdjMZyOy3I+H0/mUEQynkjV6ys+S4K/BRcvfu5tJgI7zB++7NhNXd3sYeHiyuracjEpQW9EeQDDMnHJzYbhqlXLUgh0UHE9EwI/FdwEc9E/gcURYx7e///7fX2SVK04FuuNDFtVZNgCE93Isb6+WBnAC0X5SDKB8W0tI2uc1QCBnTbfY358vmdlLMwura07sD0EXMcTYWMRV+zmNF9+pWZRSsRN0GY7im6OaBInOs7mD+JZcl+spJvT/NeIKAQhoNYACJroi7LU5dFEOZspKoSwMFk3PRaRW7fWEUwGpmT19ifX32UmgiruBCpjhotYuLh8F8JAQK+xN25DAQa1dLPhXYdhurrioA8ghloNmohozAIjlRjeEBEbnqhPt1pjojf2gAB1KUix2I4RAC8UyVKyXoJtmL8WMCFaxVkUEagMZP5WBUKaIKxiHUODNkSruUbDw8ZqcQy3pnWrkJgJfziXjsd2+CIShUKGHV+3/7umUmaPGSMAfijcMEu+c52bCLaKb1gggiLmbxEgIVXk8bSeLga/3alWbK5juoWp2OxCkkaFiURieMAXsSNRSChyuD9bTAzuQGTgoSjqJoRZ8rU3ewy1z28tYn4RLAohlxQfGUnQHqugiorVMjXWmsaq3+Ri1FdTnhgeYNMwxmBGhXAQ0AppzESOgEejUVkHZ1sTFD4PmBCt4iTzgHR6YEDVCrkkJYEHdSAEeiKrLvbSZtPtVNGvSd64opgYHtyxlxMvQlgI5AupVKKoVy3qUHK3NW0Che1NzAsTwVbxWXcgPBWLQB0IAxpIDMSL26+CVI2m2qFC4iZG6+kBfmxABghQCEs0VcCm0mS3bts0p6Z0ICFMADPRo1X8tVkEZz30mggUC5lqqK7i2lq0DZ/mjie8URgnCZYF4YmUdHfd5r251YIAoU2IVjF50WNWML+4uL5MgEBItHoewiEmOzwTrDZoKhvH8Y9PDqo6gQeGUMui8CgmRKtYFawhyx7rQOBxQ8DiJhCmgpnQ8/FBfE4qAKISeHIIEz1bxe1uESu3nsR6LAKa3MbLRB73ybkjgpwCNQJPlu97mkAV8FQgugOS3Ia9r+SL7MTgUx5XwYEnzOSpY+La4RlBKgBylwk7K0SUS6XxYlMFAk+NZ2mCbjJBiVZnkSiXxt2ika/X63kC8CqYqIEit6Ga49j5bNYw8s1pD6NC4NUwYUHFAcQ7ON/VXdOYGrvXaqEDu3LXEhZeARNAwXQtx/IcsHNZc2yqhQ4cAs+Gf7zmNa95zTbcB561bL3JySyTAAAAAElFTkSuQmCC);background-position:center;background-repeat:no-repeat;background-size:contain;height:200px;width:220.83px;margin:0 auto}[_nghost-%COMP%]   .empty-scorecard[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:var(--vlg-font-size, 18px);font-weight:var(--font-weight-semi-bold, 600);margin-top:28px}[_nghost-%COMP%]   .empty-scorecard[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);margin-top:20px}[_nghost-%COMP%]   .empty-scorecard[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .new-goal[_ngcontent-%COMP%]{margin-top:28px;display:inline-flex;align-items:center}[_nghost-%COMP%]   .empty-scorecard[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .new-goal[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px;color:var(--text-primary-content-color-hc)}[_nghost-%COMP%]   .empty-scorecard[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .link-to-goal[_ngcontent-%COMP%]{background:transparent;border:none;text-decoration:underline;color:var(--fluent-theme-link-darker-color);font-size:var(--sm-font-size);font-weight:var(--font-weight-regular);margin-top:12px}[_nghost-%COMP%]   .empty-scorecard[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .cancel-scorecard-button[_ngcontent-%COMP%]{margin-top:28px;padding:6px;font-size:var(--md-font-size);font-weight:var(--font-weight-regular);display:flex;flex-direction:row;align-items:center}[_nghost-%COMP%]   .empty-scorecard[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .cancel-scorecard-button[_ngcontent-%COMP%]   pbi-icon[_ngcontent-%COMP%]{margin-left:-12px}[_nghost-%COMP%]   .empty-scorecard[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .cancel-scorecard-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:6px}[_nghost-%COMP%]   .mat-icon[_ngcontent-%COMP%]{overflow:visible}[_nghost-%COMP%]   .mat-icon.glyph-small[_ngcontent-%COMP%]{font-size:var(--lg-font-size, 16px);width:var(--lg-font-size, 16px);height:var(--lg-font-size, 16px)}[_nghost-%COMP%]   .mat-icon.glyph-mini[_ngcontent-%COMP%]{font-size:var(--sm-font-size, 12px);width:var(--sm-font-size, 12px);height:var(--sm-font-size, 12px)}[_nghost-%COMP%]   .mat-icon.mat-ligature-font[fontIcon][_ngcontent-%COMP%]{overflow:auto}"],changeDetection:0}),O}()},70864:function(ct,Ge,n){"use strict";n.d(Ge,{F:function(){return r}});var t=n(50423),i=n(77476),w=n(82621),a=["formatSwitchCell"];function d(C,m){if(1&C&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"formatValue"),t.\u0275\u0275elementContainerEnd()),2&C){var k=t.\u0275\u0275nextContext(),O=k.data,s=k.column;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind2(2,1,O,s.formatString))}}function p(C,m){if(1&C&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"date"),t.\u0275\u0275elementContainerEnd()),2&C){var k=t.\u0275\u0275nextContext(),O=k.data,s=k.column;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind3(2,1,O,s.formatString||"shortDate","UTC"))}}function l(C,m){if(1&C&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275text(1),t.\u0275\u0275elementContainerEnd()),2&C){var k=t.\u0275\u0275nextContext().data;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(k)}}function c(C,m){if(1&C&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275text(1),t.\u0275\u0275elementContainerEnd()),2&C){var k=t.\u0275\u0275nextContext().data;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(k)}}function y(C,m){if(1&C&&(t.\u0275\u0275elementContainerStart(0,1),t.\u0275\u0275template(1,d,3,4,"ng-container",2),t.\u0275\u0275template(2,p,3,5,"ng-container",2),t.\u0275\u0275template(3,l,2,1,"ng-container",2),t.\u0275\u0275template(4,c,2,1,"ng-container",3),t.\u0275\u0275elementContainerEnd()),2&C){var k=m.column;t.\u0275\u0275property("ngSwitch",null==k?null:k.type),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngSwitchCase","Number"),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngSwitchCase","Date"),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngSwitchCase","Text")}}var r=function(){function C(){}return C.\u0275fac=function(k){return new(k||C)},C.\u0275cmp=t.\u0275\u0275defineComponent({type:C,selectors:[["format-switch-cell-template"]],viewQuery:function(k,O){var s;(1&k&&t.\u0275\u0275viewQuery(a,5),2&k)&&(t.\u0275\u0275queryRefresh(s=t.\u0275\u0275loadQuery())&&(O.formatSwitchCell=s.first))},decls:2,vars:0,consts:[["formatSwitchCell",""],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"]],template:function(k,O){1&k&&t.\u0275\u0275template(0,y,5,4,"ng-template",null,0,t.\u0275\u0275templateRefExtractor)},dependencies:[i.NgSwitch,i.NgSwitchCase,i.NgSwitchDefault,i.DatePipe,w.c],changeDetection:0}),C}()},69205:function(ct,Ge,n){"use strict";n.d(Ge,{W:function(){return p}});var t=n(60042),i=n(50423),w=n(59968),a=n(85102),d=["goal-edit-buttons-row",""],p=function(){function l(){this.onSave=new i.EventEmitter,this.onCancel=new i.EventEmitter,this.COLSPAN=t.gT.TotalNumberOfColumns}return l.prototype.onSaveClick=function(){this.onSave.emit()},l.prototype.onCancelClick=function(){this.onCancel.emit()},l.\u0275fac=function(y){return new(y||l)},l.\u0275cmp=i.\u0275\u0275defineComponent({type:l,selectors:[["","goal-edit-buttons-row",""]],inputs:{disableSave:"disableSave"},outputs:{onSave:"onSave",onCancel:"onCancel"},attrs:d,decls:6,vars:8,consts:[[1,"button-box"],["data-testid","button-save","localize","PBI_Button_Label_Save",1,"button-save","pbi-fluent-button","primary",3,"disabled","click"],["data-testid","button-cancel","localize","PBI_Button_Label_Cancel",1,"button-cancel","pbi-fluent-button",3,"click"]],template:function(y,r){1&y&&(i.\u0275\u0275elementStart(0,"td")(1,"div",0)(2,"button",1),i.\u0275\u0275listener("click",function(){return r.onSaveClick()}),i.\u0275\u0275pipe(3,"localize"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"button",2),i.\u0275\u0275listener("click",function(){return r.onCancelClick()}),i.\u0275\u0275pipe(5,"localize"),i.\u0275\u0275elementEnd()()()),2&y&&(i.\u0275\u0275attribute("colspan",r.COLSPAN),i.\u0275\u0275advance(2),i.\u0275\u0275property("disabled",r.disableSave),i.\u0275\u0275attribute("aria-label",i.\u0275\u0275pipeBind1(3,4,"PBI_Button_Label_Save")),i.\u0275\u0275advance(2),i.\u0275\u0275attribute("aria-label",i.\u0275\u0275pipeBind1(5,6,"PBI_Button_Label_Cancel")))},dependencies:[w.X,a.F],styles:["[_nghost-%COMP%]   .button-box[_ngcontent-%COMP%]{float:right}[_nghost-%COMP%]   .button-save[_ngcontent-%COMP%]{margin-right:8px}"],changeDetection:0}),l}()},44628:function(ct,Ge,n){"use strict";n.d(Ge,{G:function(){return He}});var t=n(81337),i=n(60042),w=function(){function Je(){}return Je.GoalNameMaxLength=256,Je.MaxGoalOwnerCount=5,Je.ScorecardNameMaxCharacterLimit=250,Je.ScorecardDescriptionMaxCharacterLimit=120,Je.RoleDescriptionMaxCharacterLimit=512,Je.RoleNameMaxCharacterLimit=128,Je.ActiveStatusMaxCountLimit=12,Je.HistoricalStatusMaxCountLimit=12,Je.MaxStatusId=255,Je.StatusMaxCharacterLimit=50,Je.MaxNumberOfCategories=10,Je.GoalValueCategoryMaxLength=40,Je.GoalValueCategoryNameMaxLength=256,Je.CycleCustomLabelMaxLength=32,Je.CycleCustomDescriptionMaxLength=128,Je.CycleMaxCustomDurationInDays=1e3,Je}(),a=n(44603),d=n(125),p=n(45017),l=n(61088),c=n(34340),y=n(14786),r=n(7082),C=n(60166),m=n(98587),k=n(62458),O=n(46544),s=n(77526),ne=n(14172),ee=n(48787),Z=n(59973),v=n(50423),E=n(9380),I=n(49223),H=n(64929),G=n(93379),Y=n(77476),ie=n(82792),ye=n(17174),ae=n(59968),J=n(56011),N=n(36858),he=n(94994),pe=n(85102),ce=["nameInput"],ge=["goal-edit-row",""];function se(Je,j){if(1&Je){var tt=v.\u0275\u0275getCurrentView();v.\u0275\u0275elementStart(0,"div",16),v.\u0275\u0275pipe(1,"async"),v.\u0275\u0275elementStart(2,"pbi-checkbox",17),v.\u0275\u0275listener("onChange",function(){v.\u0275\u0275restoreView(tt);var u=v.\u0275\u0275nextContext();return v.\u0275\u0275resetView(u.onSelectGoalCheckbox())}),v.\u0275\u0275pipe(3,"async"),v.\u0275\u0275elementEnd()()}if(2&Je){var oe,h,Ue=v.\u0275\u0275nextContext();v.\u0275\u0275classProp("box-checked",null==(oe=v.\u0275\u0275pipeBind1(1,4,Ue.selectedGoalIds$))?null:oe[Ue.displayedGoal.id]),v.\u0275\u0275advance(2),v.\u0275\u0275property("checked",null==(h=v.\u0275\u0275pipeBind1(3,6,Ue.selectedGoalIds$))?null:h[Ue.displayedGoal.id])("disabled",null==Ue.displayedGoal?null:Ue.displayedGoal.isNew)}}function xe(Je,j){1&Je&&v.\u0275\u0275element(0,"td",18)}function me(Je,j){if(1&Je){var tt=v.\u0275\u0275getCurrentView();v.\u0275\u0275elementContainerStart(0),v.\u0275\u0275elementStart(1,"div",13),v.\u0275\u0275element(2,"div"),v.\u0275\u0275elementEnd(),v.\u0275\u0275elementStart(3,"div",19),v.\u0275\u0275element(4,"div",20),v.\u0275\u0275elementStart(5,"div",21)(6,"emails-list-modern",22),v.\u0275\u0275listener("ngModelChange",function(h){v.\u0275\u0275restoreView(tt);var g=v.\u0275\u0275nextContext();return v.\u0275\u0275resetView(g.selectedUsers=h)}),v.\u0275\u0275pipe(7,"localize"),v.\u0275\u0275elementEnd()()(),v.\u0275\u0275elementContainerEnd()}if(2&Je){var Ue=v.\u0275\u0275nextContext();v.\u0275\u0275advance(6),v.\u0275\u0275property("allowAnyGroup",!0)("maxSelectableUsers",Ue.maxGoalOwnerCount)("ngModel",Ue.selectedUsers)("addUserOnBlur",!0)("inputPlaceholder",v.\u0275\u0275pipeBind1(7,7,"Enter_Name"))("disabled",!Ue.capabilities.editOwners)("hideInput",!Ue.capabilities.editOwners)}}function Oe(Je,j){1&Je&&v.\u0275\u0275element(0,"span",31)}function Ce(Je,j){if(1&Je){var tt=v.\u0275\u0275getCurrentView();v.\u0275\u0275elementStart(0,"div",28),v.\u0275\u0275template(1,Oe,1,0,"span",29),v.\u0275\u0275elementStart(2,"span"),v.\u0275\u0275text(3,"\xa0"),v.\u0275\u0275elementEnd(),v.\u0275\u0275elementStart(4,"button",30),v.\u0275\u0275listener("click",function(){v.\u0275\u0275restoreView(tt);var h=v.\u0275\u0275nextContext(2);return v.\u0275\u0275resetView(h.onUpdateStatusRules())}),v.\u0275\u0275elementEnd()()}if(2&Je){var Ue=v.\u0275\u0275nextContext(2);v.\u0275\u0275advance(1),v.\u0275\u0275property("ngIf",!Ue.displayedGoal.hasStatusRules),v.\u0275\u0275advance(3),v.\u0275\u0275property("localize",Ue.displayedGoal.hasStatusRules?"UpdateMetricStatusRules":"SetupMetricStatusRules")}}function Le(Je,j){if(1&Je){var tt=v.\u0275\u0275getCurrentView();v.\u0275\u0275elementContainerStart(0),v.\u0275\u0275elementStart(1,"div",23),v.\u0275\u0275element(2,"div"),v.\u0275\u0275elementEnd(),v.\u0275\u0275elementStart(3,"div",24),v.\u0275\u0275element(4,"div",25),v.\u0275\u0275elementStart(5,"status-picker",26),v.\u0275\u0275listener("onSelect",function(h){v.\u0275\u0275restoreView(tt);var g=v.\u0275\u0275nextContext();return v.\u0275\u0275resetView(g.onStatusChange(h))}),v.\u0275\u0275pipe(6,"async"),v.\u0275\u0275pipe(7,"localize"),v.\u0275\u0275elementEnd(),v.\u0275\u0275template(8,Ce,5,2,"div",27),v.\u0275\u0275elementEnd(),v.\u0275\u0275elementContainerEnd()}if(2&Je){var Ue=v.\u0275\u0275nextContext();v.\u0275\u0275advance(5),v.\u0275\u0275property("canCustomizeStatus",null==Ue.capabilities.scorecardCapabilities?null:Ue.capabilities.scorecardCapabilities.customizeStatus)("status",null==Ue.currentValue?null:Ue.currentValue.status)("goalStatuses",v.\u0275\u0275pipeBind1(6,7,Ue.goalStatuses$))("pbiTooltip",v.\u0275\u0275pipeBind1(7,9,"MetricStatus_ReadOnly"))("pbiTooltipDisabled",!Ue.displayedGoal.hasStatusRules)("isReadOnly",!Ue.capabilities.editStatus),v.\u0275\u0275advance(3),v.\u0275\u0275property("ngIf",Ue.showUpdateRules&&Ue.capabilities.editStatusRules)}}function ze(Je,j){if(1&Je){var tt=v.\u0275\u0275getCurrentView();v.\u0275\u0275elementContainerStart(0),v.\u0275\u0275elementStart(1,"div",13),v.\u0275\u0275element(2,"div"),v.\u0275\u0275elementEnd(),v.\u0275\u0275elementStart(3,"div",32),v.\u0275\u0275element(4,"div",33),v.\u0275\u0275elementStart(5,"div",9)(6,"input",34),v.\u0275\u0275listener("ngModelChange",function(h){v.\u0275\u0275restoreView(tt);var g=v.\u0275\u0275nextContext();return v.\u0275\u0275resetView(g.onStartDateChange(h))}),v.\u0275\u0275pipe(7,"localize"),v.\u0275\u0275elementEnd()()(),v.\u0275\u0275elementStart(8,"div",35)(9,"div",36),v.\u0275\u0275text(10),v.\u0275\u0275pipe(11,"localize"),v.\u0275\u0275element(12,"i",37),v.\u0275\u0275pipe(13,"localize"),v.\u0275\u0275elementEnd(),v.\u0275\u0275elementStart(14,"div",9)(15,"input",38),v.\u0275\u0275listener("ngModelChange",function(h){v.\u0275\u0275restoreView(tt);var g=v.\u0275\u0275nextContext();return v.\u0275\u0275resetView(g.onDueDateChange(h))}),v.\u0275\u0275pipe(16,"localize"),v.\u0275\u0275elementEnd()()(),v.\u0275\u0275elementContainerEnd()}if(2&Je){var Ue=v.\u0275\u0275nextContext();v.\u0275\u0275advance(6),v.\u0275\u0275property("min",Ue.SqlDateTimeMinValue)("max",Ue.SqlDateTimeMaxValue)("ngModel",Ue.startDateShort)("disabled",!Ue.capabilities.editStartDate),v.\u0275\u0275attribute("aria-label",v.\u0275\u0275pipeBind1(7,12,"Start_Date")),v.\u0275\u0275advance(4),v.\u0275\u0275textInterpolate1(" ",v.\u0275\u0275pipeBind1(11,14,"DueDate")," "),v.\u0275\u0275advance(2),v.\u0275\u0275property("pbiTooltip",v.\u0275\u0275pipeBind1(13,16,"Metrics_Due_Date_Tooltip")),v.\u0275\u0275advance(3),v.\u0275\u0275property("min",Ue.SqlDateTimeMinValue)("max",Ue.SqlDateTimeMaxValue)("ngModel",Ue.completionDateShort)("disabled",!Ue.capabilities.editDueDate),v.\u0275\u0275attribute("aria-label",v.\u0275\u0275pipeBind1(16,18,"DueDate"))}}var $e=function(){return[]},He=function(){function Je(j,tt,Ue,oe,h,g,u,F){this.featureSwitches=j,this.scorecardService=tt,this.scorecardConfigurationService=Ue,this.detailsPaneLauncher=oe,this.capabilityService=h,this.telemetryService=g,this.scorecardHost=u,this.settingsService=F,this.TotalNumberOfColumns=i.gT.TotalNumberOfColumns,this.GoalNameMaxLength=w.GoalNameMaxLength,this.maxGoalOwnerCount=1,this.currentValue={},this.supportMultipleTargets=!1,this.supportMultipleValuesEditing=!1,this.indentation=0,this.selectedUsers=[],this.showUpdateRules=!1,this.goalCurrentValueSelection=void 0,this.goalTargetValueSelection=void 0,this.SqlDateTimeMinValue=i.gT.SqlDateTimeMinValue,this.SqlDateTimeMaxValue=i.gT.SqlDateTimeMaxValue,this.isSingleGoalVisual=!1}return Object.defineProperty(Je.prototype,"indent",{set:function(tt){this.indentation=d.r.getSafeIndentation(tt)},enumerable:!1,configurable:!0}),Je.prototype.ngOnInit=function(){var j,Ue,oe,h,g,u,F,tt=this;k.fF.assertValue(this.goal,"No goal to edit"),this.displayedGoal=_.cloneDeep(this.goal),this.startDateShort=null===(oe=null===(Ue=this.displayedGoal)||void 0===Ue?void 0:Ue.startDate)||void 0===oe?void 0:oe.slice(0,10),this.completionDateShort=null===(g=null===(h=this.displayedGoal)||void 0===h?void 0:h.completionDate)||void 0===g?void 0:g.slice(0,10);var W=d.r.buildCurrentGoalValue(this.goal);if(this.currentTarget={timestamp:W.timestamp,target:W.target},W.target=void 0,this.currentValue=W,this.supportMultipleValuesEditing=this.featureSwitches.featureSwitches.goalsMultipleValuesEditor,this.supportMultipleTargets=this.featureSwitches.featureSwitches.powerBIGoalsMultipleTargets,this.supportMultipleTargets&&(this.currentTarget=d.r.getCurrentGoalTarget(this.displayedGoal),!this.currentTarget)){var te=a.E.getCurrentUTCDay();te.setMonth(te.getMonth()+1),this.currentTarget={timestamp:te.toISOString()}}var U=this.displayedGoal.owner;this.selectedUsers=U?[{displayName:"",userPrincipalName:U,objectId:"",objectType:1,isSecurityGroup:!1}]:[];var Q=this.displayedGoal.additionalOwners;_.isEmpty(Q)||(j=this.selectedUsers).push.apply(j,Q.filter(function(P){return P.userPrincipalName}).map(function(P){return{displayName:"",userPrincipalName:P.userPrincipalName,objectId:"",objectType:1,isSecurityGroup:!1}})),this.showUpdateRules=this.featureSwitches.featureSwitches.powerBIGoalsStatusRules,this.bulkDeleteEnabled=this.featureSwitches.featureSwitches.goalsBulkDelete,this.selectedGoalIds$=this.scorecardService.getSelectedGoalIdsObservable();var B=this.scorecardService.getColumnSettings();this.showDueDate$=B.pipe((0,s.x)(),(0,ne.U)(function(P){return l._.isColumnVisible(P,5)})),this.showOwner$=B.pipe((0,s.x)(),(0,ne.U)(function(P){return l._.isColumnVisible(P,1)})),this.showStatus$=B.pipe((0,s.x)(),(0,ne.U)(function(P){return l._.isColumnVisible(P,2)})),this.maxGoalOwnerCount=this.featureSwitches.featureSwitches.powerBIGoalsMultipleGoalOwners?w.MaxGoalOwnerCount:1,null===(F=null===(u=this.settingsService)||void 0===u?void 0:u.settings)||void 0===F||F.pipe((0,ee.q)(1)).subscribe(function(P){var q;tt.isSingleGoalVisual=!_.isNil(null===(q=_.first(P.filters))||void 0===q?void 0:q.goalId)}),this.goalStatuses$=this.scorecardService.goalStatusesByScorecardId$.pipe((0,ne.U)(function(P){return P[tt.goal.scorecardId]})),this.updateCapabilities()},Je.prototype.ngAfterViewInit=function(){this.displayedGoal.isNew&&this.nameInput.nativeElement.focus()},Je.prototype.ngOnChanges=function(j){j.goal&&this.displayedGoal&&!this.goal.isNew&&(this.displayedGoal.hasStatusRules=this.goal.hasStatusRules,this.updateCapabilities(),this.displayedGoal.cycleMetadata=(0,t.pi)({},this.goal.cycleMetadata),this.displayedGoal.metadata=(0,t.pi)({},this.goal.metadata),this.displayedGoal.cycle=this.goal.cycle,this.displayedGoal.cyclePeriod=this.goal.cyclePeriod,this.displayedGoal.cycleRollingInterval=this.goal.cycleRollingInterval)},Je.prototype.onSelectGoalCheckbox=function(){this.scorecardService.toggleSelectedGoal(this.displayedGoal.id,!1,!0)},Je.prototype.onSave=function(){var j,tt,Ue,oe,h,g,u,F,W,te,U,Q,B,P;return(0,t.mG)(this,void 0,void 0,function(){var de,V,b,L,T,X,ue,Ne;return(0,t.Jh)(this,function(Xe){switch(Xe.label){case 0:return _.isNil(this.goal.valueRollup)||_.isUndefined(this.goalCurrentValueSelection)||4===(null===(j=this.goalCurrentValueSelection)||void 0===j?void 0:j.type)?[3,2]:[4,this.scorecardService.deleteGoalValueRollup(this.displayedGoal.id,1)];case 1:Xe.sent(),Xe.label=2;case 2:return _.isNil(this.goal.targetRollup)||_.isUndefined(this.goalTargetValueSelection)||4===(null===(tt=this.goalTargetValueSelection)||void 0===tt?void 0:tt.type)?[3,4]:[4,this.scorecardService.deleteGoalValueRollup(this.displayedGoal.id,2)];case 3:Xe.sent(),Xe.label=4;case 4:return!_.isUndefined(this.goalCurrentValueSelection)&&1!==(null===(Ue=this.goalCurrentValueSelection)||void 0===Ue?void 0:Ue.type)&&this.goal.valueConnection?[4,this.scorecardService.deleteGoalQueryConnection(this.displayedGoal.id,1)]:[3,6];case 5:if(!1===(null!==(oe=Xe.sent())&&void 0!==oe&&oe))return[2];Xe.label=6;case 6:return!_.isUndefined(this.goalTargetValueSelection)&&1!==(null===(h=this.goalTargetValueSelection)||void 0===h?void 0:h.type)&&this.goal.targetConnection?[4,this.scorecardService.deleteGoalQueryConnection(this.displayedGoal.id,2)]:[3,8];case 7:if(!1===(null!==(g=Xe.sent())&&void 0!==g&&g))return[2];Xe.label=8;case 8:if(!d.r.allGoalInputsValid(this.displayedGoal))return[2];_.isEmpty(this.selectedUsers)?(this.displayedGoal.owner="",this.displayedGoal.additionalOwners=[]):(this.displayedGoal.owner=this.selectedUsers[0].userPrincipalName||this.selectedUsers[0].emailAddress,de=this.selectedUsers.slice(1).map(function(it){return{userPrincipalName:it.userPrincipalName||it.emailAddress}}),this.displayedGoal.additionalOwners=de),Xe.label=9;case 9:return Xe.trys.push([9,31,,32]),this.scorecardService.setGoalState(this.displayedGoal.id,"Saving"),[4,this.scorecardService.saveGoal(this.displayedGoal.id,this.displayedGoal)];case 10:return V=Xe.sent(),this.displayedGoal.id=V,b=_.cloneDeep(this.currentValue),L=_.cloneDeep(this.currentTarget),(this.displayedGoal.valueConnection||!_.isNil(null===(u=this.displayedGoal)||void 0===u?void 0:u.valueRollup)||!_.isUndefined(null===(F=this.goalCurrentValueSelection)||void 0===F?void 0:F.rollupType))&&(b.value=void 0,this.values=void 0),(this.displayedGoal.targetConnection||!_.isNil(null===(W=this.displayedGoal)||void 0===W?void 0:W.targetRollup)||!_.isUndefined(null===(te=this.goalTargetValueSelection)||void 0===te?void 0:te.rollupType))&&(L.target=void 0,this.targets=void 0),this.supportMultipleTargets||(b.target=L.target),_.isEmpty(this.displayedGoal.goalValues)?[4,this.scorecardService.saveGoalValue(this.displayedGoal.id,b)]:[3,12];case 11:return Xe.sent(),[3,14];case 12:return X=d.r.buildCurrentGoalValue(this.displayedGoal,!0),p.B.areGoalValuesEqual(b,X,!_.isNil(this.displayedGoal.valueConnection),this.supportMultipleTargets||!_.isNil(this.displayedGoal.targetConnection))?[3,14]:(T=p.B.diffGoalValues(b,X),[4,this.scorecardService.saveGoalValue(this.displayedGoal.id,T)]);case 13:Xe.sent(),Xe.label=14;case 14:return this.supportMultipleValuesEditing&&this.values?[4,this.scorecardService.overwriteMultipleGoalValues(this.displayedGoal.id,this.values)]:[3,16];case 15:Xe.sent(),Xe.label=16;case 16:return this.supportMultipleTargets?this.targets?[4,this.scorecardService.overwriteGoalTargets(this.displayedGoal.id,this.targets)]:[3,18]:[3,20];case 17:return Xe.sent(),[3,20];case 18:return void 0===L.target||(X=d.r.buildCurrentGoalValue(this.displayedGoal)).target===L.target?[3,20]:[4,this.scorecardService.saveGoalValue(this.displayedGoal.id,L)];case 19:Xe.sent(),Xe.label=20;case 20:return _.isUndefined(null===(U=this.goalCurrentValueSelection)||void 0===U?void 0:U.rollupType)?[3,22]:[4,this.scorecardService.upsertGoalValueRollup(this.displayedGoal.id,1,this.goalCurrentValueSelection.rollupType)];case 21:Xe.sent(),Xe.label=22;case 22:return _.isUndefined(null===(Q=this.goalTargetValueSelection)||void 0===Q?void 0:Q.rollupType)?[3,24]:[4,this.scorecardService.upsertGoalValueRollup(this.displayedGoal.id,2,this.goalTargetValueSelection.rollupType)];case 23:Xe.sent(),Xe.label=24;case 24:return[4,this.scorecardService.updateGoalQueryConnection(this.displayedGoal.id,1,this.displayedGoal.valueConnection)];case 25:return Xe.sent(),[4,this.scorecardService.updateGoalQueryConnection(this.displayedGoal.id,2,this.displayedGoal.targetConnection)];case 26:return Xe.sent(),this.displayedGoal.isNew&&this.newGoalRules?[4,this.scorecardService.saveStatusRules(this.displayedGoal.id,this.newGoalRules)]:[3,28];case 27:Xe.sent(),Xe.label=28;case 28:return this.scorecardService.setGoalState(this.displayedGoal.id,"Consumption"),this.isSingleGoalVisual?(ue=this.scorecardService.getCurrentScorecard(),Ne=this,[4,this.scorecardService.getGoal(this.displayedGoal.id).pipe((0,Z.h)(function(it){return!it.currentRefreshInProgress&&!it.targetRefreshInProgress}),(0,ee.q)(1)).toPromise()]):[3,30];case 29:Ne.displayedGoal=Xe.sent(),this.scorecardHost.onUpdateScorecard(ue),this.scorecardHost.onSelectGoals([this.displayedGoal]),this.scorecardHost.showGoals(!1,ue,[this.displayedGoal]),Xe.label=30;case 30:return _.isNil(null===(B=this.goalCurrentValueSelection)||void 0===B?void 0:B.type)||this.telemetryService.logEvent(y.h2,{calculationType:this.getMetricCalculationType(this.goalCurrentValueSelection.type)}),_.isNil(null===(P=this.goalTargetValueSelection)||void 0===P?void 0:P.type)||this.telemetryService.logEvent(y.Lc,{calculationType:this.getMetricCalculationType(this.goalTargetValueSelection.type)}),[3,32];case 31:return Xe.sent(),k.fF.assertFail("Could not save goal"),this.scorecardService.setGoalState(this.displayedGoal.id,"Editing"),[3,32];case 32:return[2]}})})},Je.prototype.onUpdateStatusRules=function(){var j=this;this.displayedGoal.isNew?this.detailsPaneLauncher.openGoalStatusRulesPane(this.scorecardService.getGoalStatuses(this.displayedGoal),this.displayedGoal,this.newGoalRules,function(tt){return(0,t.mG)(j,void 0,void 0,function(){return(0,t.Jh)(this,function(Ue){return tt=_.some(tt?.rules)?tt:void 0,this.newGoalRules=tt,this.displayedGoal.hasStatusRules=!!tt,this.updateCapabilities(),[2,tt]})})}):this.detailsPaneLauncher.openGoalDetails(this.scorecardService,this.goal.id,c.E.ShowStatusRules,this.scorecardConfigurationService.getConfiguration())},Je.prototype.onCancel=function(){this.scorecardService.cancelEditing(this.displayedGoal.id)},Je.prototype.onStartDateChange=function(j){var tt=new Date(j);_.isEmpty(j)||!_.isFinite(tt.getTime())||(this.displayedGoal.startDate=tt.toISOString(),this.startDateShort=j)},Je.prototype.onDueDateChange=function(j){var tt=new Date(j);_.isEmpty(j)||!_.isFinite(tt.getTime())||(this.displayedGoal.completionDate=tt.toISOString(),this.completionDateShort=j)},Je.prototype.onSetCustomStatusesClick=function(){},Je.prototype.onStatusChange=function(j){k.fF.assert(function(){return!!j},"status should not be null"),this.currentValue.status=j.id},Je.prototype.allValid=function(){return d.r.allGoalInputsValid(this.displayedGoal)},Je.prototype.onCategoryListIdChanged=function(j){this.displayedGoal.valuesCategoryId=j,this.updateCapabilities()},Je.prototype.onConnectionChanged=function(){this.updateCapabilities()},Je.prototype.onTargetsChanged=function(j){this.updateCapabilities(j)},Je.prototype.onValueRollupChanged=function(j){4!==j.type&&this.updateCapabilities(),this.goalCurrentValueSelection=j},Je.prototype.onTargetRollupChanged=function(j){4!==j.type&&this.updateCapabilities(),this.goalTargetValueSelection=j},Je.prototype.updateCapabilities=function(j){var tt=this.displayedGoal;j&&(tt=(0,t.pi)((0,t.pi)({},tt),{aggregations:(0,t.ev)((0,t.ev)([],_.filter(tt.aggregations,function(Ue){return"NumberOfTargets"!==Ue.type}),!0),[{type:"NumberOfTargets",value:j.length}],!1)})),this.capabilities=this.capabilityService.getCurrentGoalCapabilities(tt),this.capabilities.useCategoricalValues=this.capabilities.useCategoricalValues&&!this.isSingleGoalVisual},Je.prototype.getMetricCalculationType=function(j){switch(j){case 1:return y.z8.Connect;case 4:return y.z8.Rollup;case 0:case 2:return y.z8.Manual;default:return void k.fF.assertNever(j)}},Je.\u0275fac=function(tt){return new(tt||Je)(v.\u0275\u0275directiveInject(E.vZ),v.\u0275\u0275directiveInject(I.G),v.\u0275\u0275directiveInject(H.V),v.\u0275\u0275directiveInject(c.c),v.\u0275\u0275directiveInject(G.Nw),v.\u0275\u0275directiveInject(O.y0),v.\u0275\u0275directiveInject(C.M,8),v.\u0275\u0275directiveInject(m.u,8))},Je.\u0275cmp=v.\u0275\u0275defineComponent({type:Je,selectors:[["","goal-edit-row",""]],viewQuery:function(tt,Ue){if(1&tt&&(v.\u0275\u0275viewQuery(ce,5),v.\u0275\u0275viewQuery(r.p,5)),2&tt){var oe=void 0;v.\u0275\u0275queryRefresh(oe=v.\u0275\u0275loadQuery())&&(Ue.nameInput=oe.first),v.\u0275\u0275queryRefresh(oe=v.\u0275\u0275loadQuery())&&(Ue.valueInput=oe.first)}},inputs:{color:"color",goal:"goal",indent:"indent"},features:[v.\u0275\u0275NgOnChangesFeature],attrs:ge,decls:26,vars:42,consts:[[1,"checkmark-td"],["class","select-checkmark",3,"box-checked",4,"ngIf"],["class","cell cell-indent",4,"ngFor","ngForOf"],[1,"cell","cell-left-edge","cell-right-edge"],[1,"cell-box"],[1,"color-box"],[1,"edit-row-content"],[1,"input-box-lg","goal-name"],[1,"input-title",3,"localize"],[1,"input-box"],["data-testid","goal-name-input-box","type","text",3,"maxlength","ngModel","disabled","keyup.enter","ngModelChange"],["nameInput",""],[4,"ngIf"],[1,"divider"],[1,"inner-input-box-with-rollups",3,"displayedGoal","currentValue","currentTarget","values","targets","goalStatuses","capabilities","displayedGoalChange","currentValueChange","currentTargetChange","valuesChange","targetsChange","onCategoryListIdChanged","onConnectionChanged","valueRollupsChange","targetRollupsChange","onSave"],["valueInput",""],[1,"select-checkmark"],[3,"checked","disabled","onChange"],[1,"cell","cell-indent"],[1,"input-box-md"],["localize","Owners_Lowercase",1,"input-title"],["data-testid","goal-owners-input",1,"input-box","goal-owners-input"],[3,"allowAnyGroup","maxSelectableUsers","ngModel","addUserOnBlur","inputPlaceholder","disabled","hideInput","ngModelChange"],[1,"divider","width-override"],[1,"input-box-sm"],["localize","Status",1,"input-title"],[3,"canCustomizeStatus","status","goalStatuses","pbiTooltip","pbiTooltipDisabled","isReadOnly","onSelect"],["class","input-action-txt",4,"ngIf"],[1,"input-action-txt"],["localize","Logical_Or_Operator",4,"ngIf"],[1,"link",3,"localize","click"],["localize","Logical_Or_Operator"],[1,"input-box-xs","right-padding","input-box-with-rollups"],["localize","Start_Date",1,"input-title"],["data-testid","start-date-input","type","date",3,"min","max","ngModel","disabled","ngModelChange"],[1,"input-box-xs","input-box-with-rollups"],[1,"input-title"],[1,"glyphicon","glyph-small","pbi-glyph-info","icon",3,"pbiTooltip"],["data-testid","due-date-input","type","date",3,"min","max","ngModel","disabled","ngModelChange"]],template:function(tt,Ue){var oe;(1&tt&&(v.\u0275\u0275elementStart(0,"td",0),v.\u0275\u0275template(1,se,4,8,"div",1),v.\u0275\u0275elementEnd(),v.\u0275\u0275template(2,xe,1,0,"td",2),v.\u0275\u0275elementStart(3,"td",3),v.\u0275\u0275pipe(4,"async"),v.\u0275\u0275elementStart(5,"div",4),v.\u0275\u0275element(6,"div",5),v.\u0275\u0275elementStart(7,"div",6)(8,"div",7),v.\u0275\u0275element(9,"div",8),v.\u0275\u0275elementStart(10,"div",9)(11,"input",10,11),v.\u0275\u0275listener("keyup.enter",function(){return Ue.onSave()})("ngModelChange",function(g){return Ue.displayedGoal.name=g}),v.\u0275\u0275pipe(13,"localize"),v.\u0275\u0275pipe(14,"localize"),v.\u0275\u0275elementEnd()()(),v.\u0275\u0275template(15,me,8,9,"ng-container",12),v.\u0275\u0275pipe(16,"async"),v.\u0275\u0275elementStart(17,"div",13),v.\u0275\u0275element(18,"div"),v.\u0275\u0275elementEnd(),v.\u0275\u0275elementStart(19,"goal-value-input",14,15),v.\u0275\u0275listener("displayedGoalChange",function(g){return Ue.displayedGoal=g})("currentValueChange",function(g){return Ue.currentValue=g})("currentTargetChange",function(g){return Ue.currentTarget=g})("valuesChange",function(g){return Ue.values=g})("targetsChange",function(g){return Ue.targets=g})("onCategoryListIdChanged",function(g){return Ue.onCategoryListIdChanged(g)})("onConnectionChanged",function(){return Ue.onConnectionChanged()})("targetsChange",function(g){return Ue.onTargetsChanged(g)})("valueRollupsChange",function(g){return Ue.onValueRollupChanged(g)})("targetRollupsChange",function(g){return Ue.onTargetRollupChanged(g)})("onSave",function(){return Ue.onSave()}),v.\u0275\u0275pipe(21,"async"),v.\u0275\u0275elementEnd(),v.\u0275\u0275template(22,Le,9,11,"ng-container",12),v.\u0275\u0275pipe(23,"async"),v.\u0275\u0275template(24,ze,17,20,"ng-container",12),v.\u0275\u0275pipe(25,"async"),v.\u0275\u0275elementEnd()()()),2&tt)&&(v.\u0275\u0275classProp("bulk-editing-off",!Ue.bulkDeleteEnabled),v.\u0275\u0275advance(1),v.\u0275\u0275property("ngIf",Ue.bulkDeleteEnabled),v.\u0275\u0275advance(1),v.\u0275\u0275property("ngForOf",v.\u0275\u0275pureFunction0(41,$e).constructor(Ue.indentation)),v.\u0275\u0275advance(1),v.\u0275\u0275classProp("selected-goal",null==(oe=v.\u0275\u0275pipeBind1(4,27,Ue.selectedGoalIds$))?null:oe[Ue.displayedGoal.id]),v.\u0275\u0275attribute("colspan",Ue.TotalNumberOfColumns-Ue.indentation-1),v.\u0275\u0275advance(2),v.\u0275\u0275classProp("cell-box-with-rollups",Ue.capabilities.supportsRollup),v.\u0275\u0275advance(1),v.\u0275\u0275styleProp("background-color",Ue.color),v.\u0275\u0275advance(3),v.\u0275\u0275propertyInterpolate("localize",0===Ue.indentation?"MetricName":"SubmetricName"),v.\u0275\u0275advance(2),v.\u0275\u0275property("maxlength",Ue.GoalNameMaxLength)("ngModel",Ue.displayedGoal.name)("disabled",!Ue.capabilities.editName),v.\u0275\u0275attribute("aria-label",v.\u0275\u0275pipeBind1(13,29,0===Ue.indentation?"MetricName":"SubmetricName"))("placeholder",v.\u0275\u0275pipeBind1(14,31,"NameYourMetric")),v.\u0275\u0275advance(4),v.\u0275\u0275property("ngIf",v.\u0275\u0275pipeBind1(16,33,Ue.showOwner$)),v.\u0275\u0275advance(4),v.\u0275\u0275property("displayedGoal",Ue.displayedGoal)("currentValue",Ue.currentValue)("currentTarget",Ue.currentTarget)("values",Ue.values)("targets",Ue.targets)("goalStatuses",v.\u0275\u0275pipeBind1(21,35,Ue.goalStatuses$))("capabilities",Ue.capabilities),v.\u0275\u0275advance(3),v.\u0275\u0275property("ngIf",v.\u0275\u0275pipeBind1(23,37,Ue.showStatus$)),v.\u0275\u0275advance(2),v.\u0275\u0275property("ngIf",v.\u0275\u0275pipeBind1(25,39,Ue.showDueDate$)))},dependencies:[Y.NgForOf,Y.NgIf,ie.t,ye.Fj,ye.JJ,ye.nD,ye.On,ae.X,J.v,N.V,r.p,he.z,Y.AsyncPipe,pe.F],styles:[".cell[_ngcontent-%COMP%]{border:none;box-sizing:border-box}.cell-indent[_ngcontent-%COMP%]{width:36px}.cell-left-edge[_ngcontent-%COMP%]{border-top-left-radius:4px;border-bottom-left-radius:4px}.cell-right-edge[_ngcontent-%COMP%]{border-top-right-radius:4px;border-bottom-right-radius:4px}.cell-box[_ngcontent-%COMP%]{display:flex;height:100%}.cell-box[_ngcontent-%COMP%]   .color-box[_ngcontent-%COMP%]{min-width:6px;width:6px;border-top-left-radius:4px;border-bottom-left-radius:4px}[_nghost-%COMP%]   td[_ngcontent-%COMP%]{height:100px}[_nghost-%COMP%]   .select-checkmark[_ngcontent-%COMP%]{margin-right:15px}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]{background-color:var(--scorecard-tableEditRowBackgroundColor);color:var(--scorecard-tableEditRowForegroundColor);border-top:1px solid var(--fluent-theme-neutral-light-color, #EDEBE9);border-bottom:1px solid var(--fluent-theme-neutral-light-color, #EDEBE9)}[_nghost-%COMP%]   .cell.cell-right-edge[_ngcontent-%COMP%]{border-right:1px solid var(--fluent-theme-neutral-light-color, #EDEBE9)}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]   .cell-box-with-rollups[_ngcontent-%COMP%]   .edit-row-content[_ngcontent-%COMP%]{padding-left:12px;padding-right:12px}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]   .cell-box-with-rollups[_ngcontent-%COMP%]   goal-value-input[_ngcontent-%COMP%]{flex:none;max-width:none;min-width:392px}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]   .cell-box-with-rollups[_ngcontent-%COMP%]   .inner-input-box-with-rollups[_ngcontent-%COMP%]{max-width:none}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]   .cell-box-with-rollups[_ngcontent-%COMP%]   .input-box-with-rollups[_ngcontent-%COMP%]{width:104px;max-width:104px;min-width:auto}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]   .cell-box-with-rollups[_ngcontent-%COMP%]   .input-box-with-rollups[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:4px 6px}[_nghost-%COMP%]:hover   .select-checkmark[_ngcontent-%COMP%], [_nghost-%COMP%]   .select-checkmark.box-checked[_ngcontent-%COMP%]{visibility:visible}[_nghost-%COMP%]   .checkmark-td[_ngcontent-%COMP%]{width:35px;max-width:35px}[_nghost-%COMP%]   .checkmark-td.bulk-editing-off[_ngcontent-%COMP%]{width:0px;max-width:0px}[_nghost-%COMP%]   .select-checkmark[_ngcontent-%COMP%]{visibility:hidden;margin-right:15px}[_nghost-%COMP%]   .select-checkmark[_ngcontent-%COMP%]     pbi-checkbox{margin-bottom:0}[_nghost-%COMP%]   .input-title[_ngcontent-%COMP%]{font-size:var(--lg-font-size, 16px);font-weight:var(--font-weight-semi-bold, 600);padding-top:9px;padding-bottom:4px}[_nghost-%COMP%]   .input-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{vertical-align:middle;padding:0}[_nghost-%COMP%]   .input-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{cursor:pointer}[_nghost-%COMP%]   .edit-row-content[_ngcontent-%COMP%]{display:flex;flex:1;padding-left:20px;padding-right:20px;width:1000px;min-width:1000px}[_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);height:32px;padding:6px 8px;box-sizing:border-box;color:var(--scorecard-tableInputForegroundColor);background:var(--scorecard-tableInputBackgroundColor);border:1px solid var(--gray-110, #8A8886);border-radius:2px}[_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{filter:brightness(90%)}[_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:invalid{border:2px solid var(--fluent-theme-error-dark-alt-color, #D83B01);outline-color:var(--fluent-theme-error-dark-alt-color, #D83B01)}[_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   input[readonly][_ngcontent-%COMP%]{filter:brightness(90%)}[_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-input-placeholder, [_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:-ms-input-placeholder, [_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::placeholder{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);color:var(--scorecard-tableInputForegroundColor)}[_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{padding:0;margin:0}[_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-outer-spin-button, [_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}[_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}[_nghost-%COMP%]   .right-padding[_ngcontent-%COMP%]{padding-right:8px}[_nghost-%COMP%]   .input-action-txt[_ngcontent-%COMP%]{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);color:var(--scorecard-tableEditRowForegroundColor);padding-top:4px}[_nghost-%COMP%]   .input-action-txt[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{color:var(--scorecard-tableRowLinkColor);cursor:pointer;text-decoration:none;background-color:transparent;border:none;padding:0}[_nghost-%COMP%]   .input-action-txt[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]:hover{color:var(--fluent-theme-link-darker-color, #005A9E)}[_nghost-%COMP%]   .input-action-txt[_ngcontent-%COMP%]   .link.inactive[_ngcontent-%COMP%]{color:var(--fluent-theme-neutral-tertia-color, #A19F9D);pointer-events:none}[_nghost-%COMP%]   .divider[_ngcontent-%COMP%]{padding-top:8px;padding-bottom:8px}[_nghost-%COMP%]   .divider[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:1px;height:100%;background-color:var(--gray-80, #B3B0AD);margin:0 12px}[_nghost-%COMP%]   .width-override[_ngcontent-%COMP%]{width:24px}[_nghost-%COMP%]     .mat-form-field{background:var(--scorecard-tableInputBackgroundColor)!important}[_nghost-%COMP%]     emails-list-modern.disabled .mat-form-field{filter:brightness(95%)}[_nghost-%COMP%]   .goal-owners-input[_ngcontent-%COMP%]{padding-bottom:9px}[_nghost-%COMP%]   goal-value-input[_ngcontent-%COMP%]{flex:1 0 260px;max-width:400px}[_nghost-%COMP%]   .input-box-xs[_ngcontent-%COMP%]{flex:1 1 100px;max-width:140px;min-width:110px}[_nghost-%COMP%]   .input-box-sm[_ngcontent-%COMP%]{flex:1 1 100px;max-width:200px;min-width:140px}[_nghost-%COMP%]   .input-box-md[_ngcontent-%COMP%]{flex:1 1 200px;max-width:300px;min-width:130px}[_nghost-%COMP%]   .input-box-lg[_ngcontent-%COMP%]{flex:1 1 250px;min-width:150px}[_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),Je}()},56809:function(ct,Ge,n){"use strict";n.d(Ge,{Q:function(){return ye}});var t=n(60042),i=n(558),w=n(50423),a=n(9380),d=n(77476),p=n(46037),l=n(69205),c=n(44628),y=["goal-group",""];function r(ae,J){1&ae&&w.\u0275\u0275elementContainer(0)}function C(ae,J){if(1&ae&&(w.\u0275\u0275elementStart(0,"td",9),w.\u0275\u0275element(1,"div"),w.\u0275\u0275elementEnd()),2&ae){var N=J.index,he=w.\u0275\u0275nextContext(4);w.\u0275\u0275classProp("goal-drag-placeholder-line",he.goalDragInfo&&N>=he.goalDragInfo.destGoalDropLevel)}}var m=function(){return[]};function k(ae,J){if(1&ae&&(w.\u0275\u0275elementStart(0,"tr"),w.\u0275\u0275element(1,"td",6),w.\u0275\u0275template(2,C,2,2,"td",7),w.\u0275\u0275elementStart(3,"td",8),w.\u0275\u0275element(4,"div"),w.\u0275\u0275elementEnd()()),2&ae){var N=w.\u0275\u0275nextContext(3);w.\u0275\u0275advance(1),w.\u0275\u0275classProp("bulk-editing-off",!N.bulkDeleteEnabled),w.\u0275\u0275advance(1),w.\u0275\u0275property("ngForOf",w.\u0275\u0275pureFunction0(4,m).constructor(N.MaxSubGoals)),w.\u0275\u0275advance(1),w.\u0275\u0275attribute("colspan",50)}}function O(ae,J){if(1&ae&&(w.\u0275\u0275elementStart(0,"div"),w.\u0275\u0275element(1,"div",10),w.\u0275\u0275elementStart(2,"div",11),w.\u0275\u0275text(3),w.\u0275\u0275elementEnd()()),2&ae){var N=w.\u0275\u0275nextContext(2).goal,he=w.\u0275\u0275nextContext();w.\u0275\u0275advance(1),w.\u0275\u0275styleProp("background-color",he.color),w.\u0275\u0275advance(2),w.\u0275\u0275textInterpolate(N.name)}}var s=function(J,N){return{goal:J,level:N}};function ne(ae,J){if(1&ae){var N=w.\u0275\u0275getCurrentView();w.\u0275\u0275elementContainerStart(0),w.\u0275\u0275elementStart(1,"tr",3),w.\u0275\u0275listener("showChildrenChange",function(xe){w.\u0275\u0275restoreView(N);var me=w.\u0275\u0275nextContext().goal,Oe=w.\u0275\u0275nextContext();return w.\u0275\u0275resetView(Oe.onShowChildrenChange(me.id,xe))})("cdkDragStarted",function(xe){w.\u0275\u0275restoreView(N);var me=w.\u0275\u0275nextContext(2);return w.\u0275\u0275resetView(me.onDragStart(xe))})("cdkDragMoved",function(xe){w.\u0275\u0275restoreView(N);var me=w.\u0275\u0275nextContext(2);return w.\u0275\u0275resetView(me.onDragMove(xe))}),w.\u0275\u0275elementContainerStart(2),w.\u0275\u0275template(3,k,5,5,"tr",4),w.\u0275\u0275template(4,O,4,3,"div",5),w.\u0275\u0275elementContainerEnd(),w.\u0275\u0275elementEnd(),w.\u0275\u0275elementContainerEnd()}if(2&ae){var he=w.\u0275\u0275nextContext(),pe=he.goal,ce=he.i,ge=w.\u0275\u0275nextContext();w.\u0275\u0275advance(1),w.\u0275\u0275classProp("disabled","Saving"===pe.state||"Deleting"===pe.state)("goal-not-match",!1===pe.isFilterMatch),w.\u0275\u0275property("scorecard",ge.scorecard)("columnSettings",ge.columnSettings)("goal",pe)("indent",ce)("color",ge.color)("highlightRow",ge.goalDragInfo&&pe.id===ge.goalDragInfo.destParentGoalId)("scorecardSelectionMode",ge.scorecardSelectionMode)("showChildren",ge.showChildren[pe.id])("forceColumnMinWidths",ge.forceColumnMinWidths)("cdkDragData",w.\u0275\u0275pureFunction2(16,s,pe,ce))("cdkDragDisabled","Saving"===pe.state||"Deleting"===pe.state)("cdkDragStartDelay",ge.goalDragStartDelayInMs)}}function ee(ae,J){if(1&ae){var N=w.\u0275\u0275getCurrentView();w.\u0275\u0275elementContainerStart(0),w.\u0275\u0275element(1,"tr",12,13),w.\u0275\u0275elementStart(3,"tr",14),w.\u0275\u0275listener("onSave",function(){w.\u0275\u0275restoreView(N);var me=w.\u0275\u0275reference(2);return w.\u0275\u0275resetView(me.onSave())})("onCancel",function(){w.\u0275\u0275restoreView(N);var me=w.\u0275\u0275reference(2);return w.\u0275\u0275resetView(me.onCancel())}),w.\u0275\u0275elementEnd(),w.\u0275\u0275elementContainerEnd()}if(2&ae){var he=w.\u0275\u0275reference(2),pe=w.\u0275\u0275nextContext(),ce=pe.goal,ge=pe.i,se=w.\u0275\u0275nextContext();w.\u0275\u0275advance(1),w.\u0275\u0275classProp("goal-not-match",!1===ce.isFilterMatch),w.\u0275\u0275property("goal",ce)("indent",ge)("color",se.color),w.\u0275\u0275advance(2),w.\u0275\u0275property("id",ce.id)("disableSave",!he.allValid())}}function Z(ae,J){1&ae&&w.\u0275\u0275elementContainer(0)}var v=function(J,N){return{goal:J,i:N}};function E(ae,J){if(1&ae&&(w.\u0275\u0275elementContainerStart(0),w.\u0275\u0275template(1,Z,1,0,"ng-container",0),w.\u0275\u0275elementContainerEnd()),2&ae){var N=w.\u0275\u0275nextContext().$implicit,he=w.\u0275\u0275nextContext(2).i;w.\u0275\u0275nextContext();var pe=w.\u0275\u0275reference(2);w.\u0275\u0275advance(1),w.\u0275\u0275property("ngTemplateOutlet",pe)("ngTemplateOutletContext",w.\u0275\u0275pureFunction2(2,v,N,he+1))}}function I(ae,J){if(1&ae&&(w.\u0275\u0275elementContainerStart(0),w.\u0275\u0275template(1,E,2,5,"ng-container",2),w.\u0275\u0275elementContainerEnd()),2&ae){var N=J.$implicit;w.\u0275\u0275advance(1),w.\u0275\u0275property("ngIf",!N.isHidden)}}function H(ae,J){if(1&ae&&(w.\u0275\u0275elementContainerStart(0),w.\u0275\u0275template(1,I,2,1,"ng-container",15),w.\u0275\u0275elementContainerEnd()),2&ae){var N=w.\u0275\u0275nextContext().goal,he=w.\u0275\u0275nextContext();w.\u0275\u0275advance(1),w.\u0275\u0275property("ngForOf",N.subGoals)("ngForTrackBy",he.goalId)}}function G(ae,J){if(1&ae&&(w.\u0275\u0275template(0,ne,5,19,"ng-container",2),w.\u0275\u0275template(1,ee,4,7,"ng-container",2),w.\u0275\u0275template(2,H,2,2,"ng-container",2)),2&ae){var N=J.goal,he=w.\u0275\u0275nextContext();w.\u0275\u0275property("ngIf",null==N.state||"Consumption"===N.state||"Saving"===N.state||"Deleting"===N.state),w.\u0275\u0275advance(1),w.\u0275\u0275property("ngIf","Editing"===N.state),w.\u0275\u0275advance(1),w.\u0275\u0275property("ngIf",(null==N.subGoals?null:N.subGoals.length)>0&&he.showChildren[N.id]&&(null==he.goalDragInfo?null:he.goalDragInfo.sourceGoalId)!==N.id)}}var Y=function(J){return{goal:J,i:0}},ie=function(J){return{dragStartThreshold:J.featureSwitches.goalsDelayDragAndDrop?t.gT.GoalDragStartThresholdInPx:t.gT.DefaultDragThresholdInPx,pointerDirectionChangeThreshold:t.gT.DefaultDragThresholdInPx}},ye=function(){function ae(J){this.featureSwitches=J,this.showChildren={},this.goalDragInfo={},this.showChildrenChange=new w.EventEmitter,this.dragMoved=new w.EventEmitter,this.dragStarted=new w.EventEmitter,this.MaxSubGoals=t.gT.MaxSubGoals,this.goalDragStartDelayInMs=0}return ae.prototype.ngOnInit=function(){this.bulkDeleteEnabled=this.featureSwitches.featureSwitches.goalsBulkDelete,this.goalDragStartDelayInMs=this.featureSwitches.featureSwitches.goalsDelayDragAndDrop?t.gT.GoalDragStartDelayInMs:0},ae.prototype.goalId=function(J,N){return N.id},ae.prototype.onShowChildrenChange=function(J,N){this.showChildrenChange.emit({id:J,value:N})},ae.prototype.onDragMove=function(J){this.dragMoved.emit(J)},ae.prototype.onDragStart=function(J){this.dragStarted.emit(J)},ae.\u0275fac=function(N){return new(N||ae)(w.\u0275\u0275directiveInject(a.vZ))},ae.\u0275cmp=w.\u0275\u0275defineComponent({type:ae,selectors:[["","goal-group",""]],inputs:{scorecard:"scorecard",columnSettings:"columnSettings",goal:"goal",color:"color",showChildren:"showChildren",goalDragInfo:"goalDragInfo",scorecardSelectionMode:"scorecardSelectionMode",forceColumnMinWidths:"forceColumnMinWidths"},outputs:{showChildrenChange:"showChildrenChange",dragMoved:"dragMoved",dragStarted:"dragStarted"},features:[w.\u0275\u0275ProvidersFeature([{provide:i.ni,useFactory:ie,deps:[a.vZ]}])],attrs:y,decls:3,vars:4,consts:[[4,"ngTemplateOutlet","ngTemplateOutletContext"],["goalWithChildrenTmpl",""],[4,"ngIf"],["goal-row","","cdkDrag","",1,"goal-row",3,"scorecard","columnSettings","goal","indent","color","highlightRow","scorecardSelectionMode","showChildren","forceColumnMinWidths","cdkDragData","cdkDragDisabled","cdkDragStartDelay","showChildrenChange","cdkDragStarted","cdkDragMoved"],[4,"cdkDragPlaceholder"],[4,"cdkDragPreview"],["colspan","1",1,"goal-placeholder-checkbox"],["class","cell cell-indent",3,"goal-drag-placeholder-line",4,"ngFor","ngForOf"],[1,"goal-drag-placeholder-line"],[1,"cell","cell-indent"],[1,"goal-drag-preview-accent"],[1,"goal-drag-preview-content"],["goal-edit-row","","data-testid","goal-edit-row",1,"goal-edit-row",3,"goal","indent","color"],["editRow",""],["goal-edit-buttons-row","",1,"button-row",3,"id","disableSave","onSave","onCancel"],[4,"ngFor","ngForOf","ngForTrackBy"]],template:function(N,he){if(1&N&&(w.\u0275\u0275template(0,r,1,0,"ng-container",0),w.\u0275\u0275template(1,G,3,3,"ng-template",null,1,w.\u0275\u0275templateRefExtractor)),2&N){var pe=w.\u0275\u0275reference(2);w.\u0275\u0275property("ngTemplateOutlet",pe)("ngTemplateOutletContext",w.\u0275\u0275pureFunction1(2,Y,he.goal))}},dependencies:[d.NgForOf,d.NgIf,d.NgTemplateOutlet,i.Zt,i.pV,i.Hk,p.C,l.W,c.G],styles:[".cell[_ngcontent-%COMP%]{border:none;box-sizing:border-box}.cell-indent[_ngcontent-%COMP%]{width:36px}.cell-left-edge[_ngcontent-%COMP%]{border-top-left-radius:4px;border-bottom-left-radius:4px}.cell-right-edge[_ngcontent-%COMP%]{border-top-right-radius:4px;border-bottom-right-radius:4px}.cell-box[_ngcontent-%COMP%]{display:flex;height:100%}.cell-box[_ngcontent-%COMP%]   .color-box[_ngcontent-%COMP%]{min-width:6px;width:6px;border-top-left-radius:4px;border-bottom-left-radius:4px}[_nghost-%COMP%]   .goal-edit-row[_ngcontent-%COMP%]{box-sizing:border-box;border:none;height:96px}[_nghost-%COMP%]   .goal-not-match[_ngcontent-%COMP%]{opacity:50%}[_nghost-%COMP%]   .button-row[_ngcontent-%COMP%]{height:32px;box-sizing:border-box;border:none}[_nghost-%COMP%]   .disabled[_ngcontent-%COMP%]{opacity:.4}.row[_ngcontent-%COMP%]{box-sizing:border-box;border:none}.goal-row[_ngcontent-%COMP%]{box-sizing:border-box;border:none;height:60px}.cdk-drag-placeholder[_ngcontent-%COMP%]{height:2px}.goal-drag-placeholder-line[_ngcontent-%COMP%]{background-color:var(--fluent-theme-black-color, #000)}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border:none;height:60px;display:flex;width:25%;opacity:.7;background-color:var(--scorecard-tableBackgroundColor);font-family:var(--scorecard-fontFamily)}.goal-drag-preview-accent[_ngcontent-%COMP%]{width:6px;border-radius:4px;margin-right:12px}.goal-drag-preview-content[_ngcontent-%COMP%]{display:inline-flex;align-items:center;min-width:fit-content;overflow:hidden;text-overflow:ellipsis}.goal-placeholder-checkbox[_ngcontent-%COMP%]{width:35px}.goal-placeholder-checkbox.bulk-editing-off[_ngcontent-%COMP%]{width:0px}"],changeDetection:0}),ae}()},42989:function(ct,Ge,n){"use strict";n.d(Ge,{R:function(){return ze},n:function(){return Le}});var t=n(81337),i=n(44603),w=n(60042),a=n(50423),d=n(33567),p=n(88940),l=n(14463),c=n(66794),y=n(47245),r=n(61036),C=n(29589),m=n(47508),k=n(79154),O=n(62458),s=n(39681),ne=n(32379),ee=n(78843),Z=n(61289),v=n(26743),E=n(94419),I=n(80777),H=n(40956),G=n(65181),Y=n(2330),ie=n(29866),ye=n(98136),ae=n(77476),J=n(12338),N=n(698),he=n(85102),pe=function(We){return{"hide-legend":We}};function ce($e,We){if(1&$e&&(a.\u0275\u0275elementStart(0,"div",3)(1,"div",4),a.\u0275\u0275element(2,"div",5),a.\u0275\u0275elementStart(3,"span"),a.\u0275\u0275text(4),a.\u0275\u0275pipe(5,"localize"),a.\u0275\u0275elementEnd()(),a.\u0275\u0275elementStart(6,"div",4),a.\u0275\u0275element(7,"div",6),a.\u0275\u0275elementStart(8,"span"),a.\u0275\u0275text(9),a.\u0275\u0275pipe(10,"localize"),a.\u0275\u0275elementEnd()(),a.\u0275\u0275elementStart(11,"div",4)(12,"div",7),a.\u0275\u0275element(13,"div",8),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(14,"span"),a.\u0275\u0275text(15),a.\u0275\u0275pipe(16,"localize"),a.\u0275\u0275elementEnd()()()),2&$e){var He=a.\u0275\u0275nextContext();a.\u0275\u0275property("ngClass",a.\u0275\u0275pureFunction1(12,pe,"Hidden"==He.legend)),a.\u0275\u0275advance(2),a.\u0275\u0275styleProp("background-color",He.color),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate(a.\u0275\u0275pipeBind1(5,6,"Progress")),a.\u0275\u0275advance(5),a.\u0275\u0275textInterpolate(a.\u0275\u0275pipeBind1(10,8,"Milestones")),a.\u0275\u0275advance(6),a.\u0275\u0275textInterpolate(a.\u0275\u0275pipeBind1(16,10,"Target_Final"))}}function ge($e,We){if(1&$e&&a.\u0275\u0275element(0,"visual-modern",9),2&$e){var He=a.\u0275\u0275nextContext();a.\u0275\u0275property("viewModel",He.visualDefinition)("useOnPushChangeDetection",!0)}}var se="Time",xe="Value",me="Targets",Oe="Milestones",Ce="FinalTarget",Le={xAxis:{show:!1},yAxis:{show:!1}},ze=function(){function $e(We,He,Je,j,tt,Ue,oe,h){this.geocoder=We,this.geolocation=He,this.localizationService=Je,this.moduleLoader=j,this.promiseFactory=tt,this.visualPlugin=Ue,this.visualHostTooltipServiceFactory=oe,this.changeDetector=h,this.showGoalTargets=!1,this.axesOptions={xAxis:{show:!0},yAxis:{show:!0}},this.legend="None",this.showZoom=!1,this.type="LineChart",this.targetLineColor=w.gT.GoalTargetsLineColor,this.onSelected=new a.EventEmitter}return Object.defineProperty($e.prototype,"isComboChart",{get:function(){return"ComboChart"===this.type},enumerable:!1,configurable:!0}),$e.prototype.ngOnInit=function(){var He,We=this;this.shadeCurrentArea=null!==(He=this.shadeCurrentArea)&&void 0!==He?He:this.isComboChart,this.visualPlugin.ensureBuiltInPlugins().then(function(){We.initializeVisual(),We.isLoaded=!0,We.changeDetector.detectChanges()})},$e.prototype.ngOnChanges=function(We){(We.values||We.color||We.showGoalTargets||We.showAxis||We.targetLineColor||We.axesOptions||We.shadeCurrentArea)&&(this.generateDataView(),this.update())},$e.prototype.initializeVisual=function(){var He,We=this,Je=(0,s.ED)((0,y.q)({geocoder:this.geocoder,geolocation:this.geolocation,localizationService:this.localizationService,moduleLoader:this.moduleLoader,promiseFactory:this.promiseFactory,visualHostTooltipService:this.visualHostTooltipServiceFactory.create(),getAzureMapToken:void 0,azureMapsEndpoint:void 0,geocoderIndexedDB:void 0}),function(tt){tt.persistProperties=function(Ue,oe){return We.persistProperties(Ue)},tt.getLocalizedString=function(Ue){for(var oe,h=[],g=1;g<arguments.length;g++)h[g-1]=arguments[g];return(oe=We.localizationService).format.apply(oe,(0,t.ev)([Ue],h||[],!1))},tt.getViewMode=function(){return 0},tt.locale=function(){return(0,r.uD)()},tt.promiseFactory=function(){return We.promiseFactory},tt.onSelect=function(Ue){var oe;if(!_.isEmpty(Ue?.visualObjects)){var h=null===(oe=_.first(Ue.visualObjects))||void 0===oe?void 0:oe.selectorsByColumn;if(h){var g=_.first(h.dataMap[se]);if((0,ne.yN)(g)){var u=(0,v.KX)(g.expr),F=_.first(u);F&&F.value&&We.onSelected.emit(F.value)}else O.fF.assertFail("Unexpected selector")}}}}),j=m.L.lineChart.name;"AreaChart"===this.type?j=m.L.areaChart.name:"ColumnChart"===this.type?j=m.L.columnChart.name:"ComboChart"===this.type&&(j=m.L.lineClusteredColumnComboChart.name),this.visualDefinition={interactivityOptions:{},type:j,allowInvalidDataView:!0,themeCollection:void 0,viewport:null!==(He=this.viewportSize)&&void 0!==He?He:{height:100,width:100,scale:1},dataTransforms:void 0,hostServices:Je,visualAdapterHostServices:{startProgressBar:_.noop,stopProgressBar:_.noop,getNextDataSegment:function(){return(0,t.mG)(We,void 0,void 0,function(){return(0,t.Jh)(this,function(Ue){return[2,{}]})})}},stylePresetName:void 0,additionalObjectUpdates:_.noop,visualPlugin:this.visualPlugin},this.update()},$e.prototype.update=function(){var We,He;if(this.visualDefinition){var Je={categoryAxis:[{properties:{show:(0,E.O7)(this.axesOptions.xAxis.show)}}],valueAxis:[{properties:{show:(0,E.O7)(this.axesOptions.yAxis.show)}}],dataPoint:[{selector:{metadata:xe},properties:{fill:{solid:{color:(0,E.fL)(this.color)}}}},{selector:{metadata:me},properties:{fill:{solid:{color:(0,E.fL)(this.targetLineColor)}}}},{selector:{metadata:Oe},properties:{fill:{solid:{color:(0,E.fL)(this.targetLineColor)}}}},{selector:{metadata:Ce},properties:{fill:{solid:{color:(0,E.fL)(this.targetLineColor)}}}}],lineStyles:[{selector:{metadata:me},properties:{lineStyle:(0,E.fL)("dashed"),strokeWidth:(0,E.cA)(1.5),showMarker:(0,E.O7)(!1)}},{selector:{metadata:Oe},properties:{showMarker:(0,E.O7)(!0),markerSize:(0,E.cA)(5),markerShape:(0,E.fL)("circle"),strokeWidth:(0,E.cA)(0)}},{selector:{metadata:Ce},properties:{showMarker:(0,E.O7)(!0),markerSize:(0,E.cA)(8),markerShape:(0,E.fL)("diamond"),strokeWidth:(0,E.cA)(0)}}],legend:[{properties:{show:(0,E.O7)(!1)}}],zoom:[{properties:{show:(0,E.O7)(this.showZoom),showOnValueAxis:(0,E.O7)(!1)}}]};if(this.isComboChart){for(var j=0,tt=Je.lineStyles;j<tt.length;j++){var Ue=tt[j];!_.isUndefined(Ue.selector)&&Ue.selector.metadata!==xe&&(Ue.properties.areaShow=(0,E.O7)(!1))}Je.lineStyles.push({properties:{areaShow:(0,E.O7)(this.shadeCurrentArea)}})}this.setAxisFontProperties(Je.categoryAxis[0].properties,null===(We=this.axesOptions)||void 0===We?void 0:We.xAxis.fontProperties),this.setAxisFontProperties(Je.valueAxis[0].properties,null===(He=this.axesOptions)||void 0===He?void 0:He.yAxis.fontProperties),this.visualDefinition.dataTransforms={objects:Je},this.applyDataTransformsForComboIfNeeded(),this.visualDefinition.data={dataView:this.dataView}}},$e.prototype.setAxisFontProperties=function(We,He){He&&(He.color&&(We.labelColor={solid:{color:(0,E.fL)(He.color)}}),He.family&&(We.fontFamily=(0,E.fL)(He.family)),He.size&&(We.fontSize=(0,E.gH)(He.size.pt)),He.weight&&(We.bold=(0,E.O7)(He.weight===k.en)),He.style&&(We.italic=(0,E.O7)(He.style===k.BF)),He.textDecoration&&(We.underline=(0,E.O7)(He.textDecoration===k.f0)))},$e.prototype.persistProperties=function(We){var He=_.isArray(We)?{merge:We}:We;this.visualDefinition&&this.checkAndApplyDataTransformPropertyChanges(He)},$e.prototype.checkAndApplyDataTransformPropertyChanges=function(We){var He;if(He=this.isComboChart?m.L.lineClusteredColumnComboChart.capabilities:m.L.lineChart.capabilities,!_.isEmpty(We.merge)||!_.isEmpty(We.remove)){var j=He.objects;this.update(),(0,c._6)(We,j,this.visualDefinition.dataTransforms.objects),this.changeDetector.detectChanges()}},$e.prototype.onResize=function(We){this.viewportSize={width:We.width,height:We.height,scale:1},this.visualDefinition&&(this.visualDefinition.viewport=this.viewportSize)},$e.prototype.generateDataView=function(){var We,He,Je,j,tt,Ue,oe,h,g,u,F=[{displayName:this.localizationService.get("Date"),queryName:se,type:I.Ge.fromPrimitiveTypeAndCategory(6),roles:{Category:!0}},{displayName:this.localizationService.get("Role_DisplayName_Value"),queryName:xe,type:I.Ge.fromPrimitiveTypeAndCategory(3),roles:{Y:!0},index:0,objects:(We={},We[C.iu.objectName]=(He={},He[C.iu.propertyName]=this.formatString,He),We)}];this.showGoalTargets&&(F.push({displayName:this.localizationService.get("Target"),queryName:me,type:I.Ge.fromPrimitiveTypeAndCategory(3),roles:{Y:!0},index:1,objects:(Je={},Je[C.iu.objectName]=(j={},j[C.iu.propertyName]=this.formatString,j),Je)}),F.push({displayName:this.localizationService.get("Target_Milestone_Due"),queryName:Oe,type:I.Ge.fromPrimitiveTypeAndCategory(3),roles:{Y:!0},index:2,objects:(tt={},tt[C.iu.objectName]=(Ue={},Ue[C.iu.propertyName]=this.formatString,Ue),tt)}),F.push({displayName:this.localizationService.get("Target_Final_Due"),queryName:Ce,type:I.Ge.fromPrimitiveTypeAndCategory(3),roles:{Y:!0},index:3,objects:(oe={},oe[C.iu.objectName]=(h={},h[C.iu.propertyName]=this.formatString,h),oe)})),this.updateColumnsForComboIfNeeded(F);var W=(0,E.Oh)((0,E.fL)("Date"),"Date"),te=null!==(u=this.values)&&void 0!==u?u:[];te=te.filter(function(Ne){return!_.isNil(Ne.value)||!_.isNil(Ne.target)}),te=_.sortBy(te,function(Ne){return new Date(Ne.timestamp)});var U,Q,B=[],P=[],q=[];if(this.showGoalTargets){U=[],Q=[];for(var le=(g=function(){for(var Ne=te.length-1;Ne>=0;Ne--)if(!_.isNil(te[Ne].target))return[te[Ne].target,te[Ne].timestamp];return[void 0,void 0]}())[0],de=g[1],V=function(Qe){for(var Xe=Qe+1;Xe<te.length&&_.isNil(te[Xe].target);)Xe++;return Xe<te.length?te[Xe].target:void 0},b=0;b<te.length;b++){var L=te[b],T=V(b);U.push(L.timestamp),Q.push(L.value),B.push(L.target!==T&&L.timestamp!==de?L.target:void 0),P.push(L.timestamp===de?L.target:void 0),_.isNil(L.target)?q.push(0===b?T:b===te.length-1?le:void 0):(q.push(L.target),_.isNil(T)||(U.push(L.timestamp),q.push(T),Q.push(void 0),B.push(void 0),P.push(void 0)))}}else U=te.map(function(Ne){return Ne.timestamp}),Q=te.map(function(Ne){return Ne.value});var X=[];X.push({source:F[1],values:Q}),this.showGoalTargets&&(X.push({source:F[3],values:B}),X.push({source:F[4],values:P}),X.push({source:F[2],values:q}));var ue={metadata:{columns:F},categorical:{categories:[{source:F[0],values:_.map(U,function(Ne){var Qe=new Date(Ne),Xe=i.E.treatAsLocalDate(Qe);return Xe.epochTimeStamp=Qe.getTime(),Xe}),identity:_.map(U,function(Ne){return(0,ee.TZ)((0,E.Dg)(W,(0,E.fL)(Ne)))})}],values:(0,Z.Yv)(X)}};this.dataView=ue},$e.prototype.updateColumnsForComboIfNeeded=function(We){if(this.isComboChart)for(var He=0,Je=0,j=We;Je<j.length;Je++){var tt=j[Je];tt.queryName!==se&&(tt.roles={Y2:!0}),tt.index=He,He++}},$e.prototype.applyDataTransformsForComboIfNeeded=function(){if(this.isComboChart){var We=this.dataView.metadata.columns.map(function(j){return{displayName:j.displayName,queryName:j.queryName,roles:j.roles}});this.visualDefinition.dataTransforms.selects=We;var He={};for(var Je in We)He[Je]=!0;this.visualDefinition.dataTransforms.splits=[{selects:void 0},{selects:He}]}},$e.\u0275fac=function(He){return new(He||$e)(a.\u0275\u0275directiveInject(H.i),a.\u0275\u0275directiveInject(d._1),a.\u0275\u0275directiveInject(G.o),a.\u0275\u0275directiveInject(Y.m),a.\u0275\u0275directiveInject(l.t),a.\u0275\u0275directiveInject(ie.D),a.\u0275\u0275directiveInject(ye.q),a.\u0275\u0275directiveInject(a.ChangeDetectorRef))},$e.\u0275cmp=a.\u0275\u0275defineComponent({type:$e,selectors:[["goal-history-chart"]],inputs:{values:"values",formatString:"formatString",color:"color",showGoalTargets:"showGoalTargets",axesOptions:"axesOptions",legend:"legend",showZoom:"showZoom",type:"type",shadeCurrentArea:"shadeCurrentArea",targetLineColor:"targetLineColor"},outputs:{onSelected:"onSelected"},features:[a.\u0275\u0275ProvidersFeature((0,t.ev)([],p.H,!0)),a.\u0275\u0275NgOnChangesFeature],decls:3,vars:2,consts:[["class","legend",3,"ngClass",4,"ngIf"],[1,"linechart-wrapper",3,"on-resize"],["class","linechart",3,"viewModel","useOnPushChangeDetection",4,"ngIf"],[1,"legend",3,"ngClass"],[1,"label"],[1,"square"],[1,"circle","filled"],[1,"square","center-diamond"],[1,"diamond","filled"],[1,"linechart",3,"viewModel","useOnPushChangeDetection"]],template:function(He,Je){1&He&&(a.\u0275\u0275template(0,ce,17,14,"div",0),a.\u0275\u0275elementStart(1,"div",1),a.\u0275\u0275listener("on-resize",function(tt){return Je.onResize(tt)}),a.\u0275\u0275template(2,ge,1,2,"visual-modern",2),a.\u0275\u0275elementEnd()),2&He&&(a.\u0275\u0275property("ngIf","None"!=Je.legend),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",Je.isLoaded&&!!Je.viewportSize))},dependencies:[ae.NgClass,ae.NgIf,J.y,N.O,he.F],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   .linechart-wrapper[_ngcontent-%COMP%]{flex:1;position:relative}[_nghost-%COMP%]   .linechart-wrapper[_ngcontent-%COMP%]   .linechart[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;border-radius:4px}[_nghost-%COMP%]   .legend[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:8px}[_nghost-%COMP%]   .legend[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}[_nghost-%COMP%]   .legend[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%], [_nghost-%COMP%]   .legend[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{width:12px;height:12px}[_nghost-%COMP%]   .legend[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{border-radius:50%}[_nghost-%COMP%]   .legend[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   .center-diamond[_ngcontent-%COMP%]{display:flex;align-items:center}[_nghost-%COMP%]   .legend[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   .diamond[_ngcontent-%COMP%]{width:10px;height:10px;transform:rotate(45deg)}[_nghost-%COMP%]   .legend[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   .filled[_ngcontent-%COMP%]{background-color:#8a8886}[_nghost-%COMP%]   .hide-legend[_ngcontent-%COMP%]{visibility:hidden}"],changeDetection:0}),$e}()},46037:function(ct,Ge,n){"use strict";n.d(Ge,{C:function(){return u}});var t=n(60042),i=n(44603),w=n(125),a=n(61088),d=n(3204),p=n(62831),l=n(50423),c=n(62458),y=n(49223),r=n(9380),C=n(65181),m=n(64929),k=n(93379),O=n(87426),s=n(74521),ne=n(77476),ee=n(56011),Z=n(11941),v=n(36858),E=n(95594),I=n(77971),H=n(4716),G=n(11891),Y=n(64661),ie=n(49048),ye=n(76654),ae=n(85953),J=n(85102),N=["chart"],he=["goal-row",""];function pe(F,W){if(1&F){var te=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"div",5)(1,"pbi-checkbox",6),l.\u0275\u0275listener("onChange",function(){l.\u0275\u0275restoreView(te);var B=l.\u0275\u0275nextContext();return l.\u0275\u0275resetView(B.onSelectGoalCheckbox())}),l.\u0275\u0275elementEnd()()}if(2&F){var U=l.\u0275\u0275nextContext();l.\u0275\u0275classProp("box-checked",null==U.scorecard||null==U.scorecard.selectedGoalIds?null:U.scorecard.selectedGoalIds[U.displayedGoal.id]),l.\u0275\u0275advance(1),l.\u0275\u0275property("checked",U.isChecked)}}function ce(F,W){if(1&F){var te=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"div",5)(1,"pbi-radio-button",7),l.\u0275\u0275listener("change",function(){l.\u0275\u0275restoreView(te);var B=l.\u0275\u0275nextContext();return l.\u0275\u0275resetView(B.onSelectGoalCheckbox())}),l.\u0275\u0275pipe(2,"localize"),l.\u0275\u0275elementEnd()()}if(2&F){var U=l.\u0275\u0275nextContext();l.\u0275\u0275advance(1),l.\u0275\u0275property("disabled",!U.canSelectGoal)("pbiTooltip",U.selectGoalDisabledTooltip?l.\u0275\u0275pipeBind1(2,5,U.selectGoalDisabledTooltip):"")("pbiTooltipDisabled",U.canSelectGoal)("isCompact",!0)("checked",U.isChecked)}}function ge(F,W){if(1&F){var te=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"div",5)(1,"pbi-checkbox",8),l.\u0275\u0275listener("onChange",function(){l.\u0275\u0275restoreView(te);var B=l.\u0275\u0275nextContext();return l.\u0275\u0275resetView(B.onSelectGoalCheckbox())}),l.\u0275\u0275pipe(2,"localize"),l.\u0275\u0275elementEnd()()}if(2&F){var U=l.\u0275\u0275nextContext();l.\u0275\u0275advance(1),l.\u0275\u0275property("disabled",!U.canSelectGoal)("pbiTooltip",U.selectGoalDisabledTooltip?l.\u0275\u0275pipeBind1(2,4,U.selectGoalDisabledTooltip):"")("pbiTooltipDisabled",U.canSelectGoal)("checked",U.isChecked)}}function se(F,W){1&F&&l.\u0275\u0275element(0,"td",9)}function xe(F,W){if(1&F){var te=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementContainerStart(0),l.\u0275\u0275elementStart(1,"button",29),l.\u0275\u0275listener("click",function(){l.\u0275\u0275restoreView(te);var B=l.\u0275\u0275nextContext(4);return l.\u0275\u0275resetView(B.onShowChildrenChange())}),l.\u0275\u0275pipe(2,"localize"),l.\u0275\u0275pipe(3,"localize"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementContainerEnd()}if(2&F){var U=l.\u0275\u0275nextContext(4);l.\u0275\u0275advance(1),l.\u0275\u0275classProp("rotate90",!U.showChildren),l.\u0275\u0275property("pbiTooltip",l.\u0275\u0275pipeBind1(3,6,U.showChildren?"Collapse_Expand_Submetrics_Button_Functional_Description_Hide_Submetrics":"Collapse_Expand_Submetrics_Button_Functional_Description_Show_Submetrics")),l.\u0275\u0275attribute("aria-label",l.\u0275\u0275pipeBind1(2,4,U.showChildren?"Collapse_Expand_Submetrics_Button_Functional_Description_Hide_Submetrics":"Collapse_Expand_Submetrics_Button_Functional_Description_Show_Submetrics"))}}function me(F,W){if(1&F){var te=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"div",30),l.\u0275\u0275listener("click",function(Q){l.\u0275\u0275restoreView(te);var B=l.\u0275\u0275nextContext(4);return l.\u0275\u0275resetView(B.onGoalRowClick(Q))}),l.\u0275\u0275elementEnd()}}function Oe(F,W){if(1&F){var te=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"td",21)(1,"div",22)(2,"div",23),l.\u0275\u0275listener("click",function(q){l.\u0275\u0275restoreView(te);var le=l.\u0275\u0275nextContext(3);return l.\u0275\u0275resetView(le.onGoalRowClick(q))}),l.\u0275\u0275elementEnd(),l.\u0275\u0275template(3,xe,4,8,"ng-container",24),l.\u0275\u0275template(4,me,1,0,"ng-template",null,25,l.\u0275\u0275templateRefExtractor),l.\u0275\u0275elementStart(6,"div",26),l.\u0275\u0275element(7,"goal-name-cell",27)(8,"goal-actions-cell",28),l.\u0275\u0275pipe(9,"async"),l.\u0275\u0275elementEnd()()()}if(2&F){var U=l.\u0275\u0275reference(5),Q=l.\u0275\u0275nextContext(2).$implicit,B=l.\u0275\u0275nextContext();l.\u0275\u0275styleProp("--borderColor",B.color)("max-width",B.forceColumnMinWidths?B.ListViewCellMinWidths[Q.columnId]+"px":void 0)("min-width",B.ListViewCellMinWidths[Q.columnId],"px"),l.\u0275\u0275classProp("selected-goal",(null==B.scorecard||null==B.scorecard.selectedGoalIds?null:B.scorecard.selectedGoalIds[B.displayedGoal.id])||B.highlightRow),l.\u0275\u0275attribute("colspan",B.MAX_COLSPAN-B.indentation),l.\u0275\u0275advance(2),l.\u0275\u0275styleProp("background-color",B.color),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",B.hasVisibleChildren)("ngIfElse",U),l.\u0275\u0275advance(4),l.\u0275\u0275property("goal",B.displayedGoal)("scorecard",B.scorecard),l.\u0275\u0275advance(1),l.\u0275\u0275property("goal",B.displayedGoal)("isEditMode",l.\u0275\u0275pipeBind1(9,17,B.isEditMode$))}}function Ce(F,W){if(1&F){var te=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"td",31),l.\u0275\u0275listener("click",function(le){l.\u0275\u0275restoreView(te);var de=l.\u0275\u0275nextContext(3);return l.\u0275\u0275resetView(de.onGoalRowClick(le))}),l.\u0275\u0275element(1,"goal-owners-cell",32),l.\u0275\u0275elementEnd()}if(2&F){var U=l.\u0275\u0275nextContext(2),Q=U.$implicit,B=U.last,P=l.\u0275\u0275nextContext();l.\u0275\u0275styleProp("max-width",P.forceColumnMinWidths?P.ListViewCellMinWidths[Q.columnId]+"px":void 0)("min-width",P.ListViewCellMinWidths[Q.columnId],"px")("--borderColor",P.color),l.\u0275\u0275classProp("selected-goal",(null==P.scorecard||null==P.scorecard.selectedGoalIds?null:P.scorecard.selectedGoalIds[P.displayedGoal.id])||P.highlightRow)("cell-right-edge",B),l.\u0275\u0275advance(1),l.\u0275\u0275property("goal",P.displayedGoal)}}function Le(F,W){if(1&F){var te=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"td",33),l.\u0275\u0275listener("click",function(le){l.\u0275\u0275restoreView(te);var de=l.\u0275\u0275nextContext(3);return l.\u0275\u0275resetView(de.onGoalRowClick(le))}),l.\u0275\u0275element(1,"status-icon",34),l.\u0275\u0275elementEnd()}if(2&F){var U=l.\u0275\u0275nextContext(2),Q=U.$implicit,B=U.last,P=l.\u0275\u0275nextContext();l.\u0275\u0275styleProp("max-width",P.forceColumnMinWidths?P.ListViewCellMinWidths[Q.columnId]+"px":void 0)("min-width",P.ListViewCellMinWidths[Q.columnId],"px")("--borderColor",P.color),l.\u0275\u0275classProp("selected-goal",(null==P.scorecard||null==P.scorecard.selectedGoalIds?null:P.scorecard.selectedGoalIds[P.displayedGoal.id])||P.highlightRow)("cell-right-edge",B),l.\u0275\u0275advance(1),l.\u0275\u0275property("status",null==P.currentValue?null:P.currentValue.status)("goalStatuses",P.goalStatuses)}}function ze(F,W){if(1&F&&l.\u0275\u0275element(0,"goal-change-cell",32),2&F){var te=l.\u0275\u0275nextContext(4);l.\u0275\u0275property("goal",te.displayedGoal)}}function $e(F,W){if(1&F){var te=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"td",35),l.\u0275\u0275listener("click",function(V){l.\u0275\u0275restoreView(te);var b=l.\u0275\u0275nextContext(3);return l.\u0275\u0275resetView(b.onGoalRowClick(V))}),l.\u0275\u0275element(1,"goal-value-cell",36),l.\u0275\u0275template(2,ze,1,1,"goal-change-cell",37),l.\u0275\u0275elementEnd()}if(2&F){var q,le,U=l.\u0275\u0275nextContext(2),Q=U.$implicit,B=U.last,P=l.\u0275\u0275nextContext();l.\u0275\u0275styleProp("max-width",P.forceColumnMinWidths?P.ListViewCellMinWidths[Q.columnId]+"px":void 0)("min-width",P.ListViewCellMinWidths[Q.columnId],"px")("--borderColor",P.color),l.\u0275\u0275classProp("selected-goal",(null==P.scorecard||null==P.scorecard.selectedGoalIds?null:P.scorecard.selectedGoalIds[P.displayedGoal.id])||P.highlightRow)("cell-right-edge",B),l.\u0275\u0275advance(1),l.\u0275\u0275property("goal",P.displayedGoal)("showCurrent",!0)("showTarget",null!==(q=null==P.displayedGoal.metadata?null:P.displayedGoal.metadata.showFinalTarget)&&void 0!==q?q:!P.displayedGoal.targetConnection)("showMilestone",!(null!==(le=null==P.displayedGoal.metadata?null:P.displayedGoal.metadata.showFinalTarget)&&void 0!==le?le:!P.displayedGoal.targetConnection)),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",P.isChangeVisible)}}function We(F,W){if(1&F&&l.\u0275\u0275element(0,"goal-change-cell",32),2&F){var te=l.\u0275\u0275nextContext(4);l.\u0275\u0275property("goal",te.displayedGoal)}}function He(F,W){if(1&F){var te=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"td",38),l.\u0275\u0275listener("click",function(le){l.\u0275\u0275restoreView(te);var de=l.\u0275\u0275nextContext(3);return l.\u0275\u0275resetView(de.onGoalRowClick(le))}),l.\u0275\u0275element(1,"goal-value-cell",39),l.\u0275\u0275template(2,We,1,1,"goal-change-cell",37),l.\u0275\u0275elementEnd()}if(2&F){var U=l.\u0275\u0275nextContext(2),Q=U.$implicit,B=U.last,P=l.\u0275\u0275nextContext();l.\u0275\u0275styleProp("max-width",P.forceColumnMinWidths?P.ListViewCellMinWidths[Q.columnId]+"px":void 0)("min-width",P.ListViewCellMinWidths[Q.columnId],"px")("--borderColor",P.color),l.\u0275\u0275classProp("selected-goal",(null==P.scorecard||null==P.scorecard.selectedGoalIds?null:P.scorecard.selectedGoalIds[P.displayedGoal.id])||P.highlightRow)("cell-right-edge",B),l.\u0275\u0275advance(1),l.\u0275\u0275property("goal",P.displayedGoal)("showCurrent",!0),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",P.isChangeVisible)}}function Je(F,W){if(1&F){var te=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"td",40),l.\u0275\u0275listener("click",function(le){l.\u0275\u0275restoreView(te);var de=l.\u0275\u0275nextContext(3);return l.\u0275\u0275resetView(de.onGoalRowClick(le))}),l.\u0275\u0275element(1,"goal-value-cell",41),l.\u0275\u0275elementEnd()}if(2&F){var U=l.\u0275\u0275nextContext(2),Q=U.$implicit,B=U.last,P=l.\u0275\u0275nextContext();l.\u0275\u0275styleProp("max-width",P.forceColumnMinWidths?P.ListViewCellMinWidths[Q.columnId]+"px":void 0)("min-width",P.ListViewCellMinWidths[Q.columnId],"px")("--borderColor",P.color),l.\u0275\u0275classProp("selected-goal",(null==P.scorecard||null==P.scorecard.selectedGoalIds?null:P.scorecard.selectedGoalIds[P.displayedGoal.id])||P.highlightRow)("cell-right-edge",B),l.\u0275\u0275advance(1),l.\u0275\u0275property("goal",P.displayedGoal)("showTarget",!0)}}function j(F,W){if(1&F){var te=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"td",42),l.\u0275\u0275listener("click",function(le){l.\u0275\u0275restoreView(te);var de=l.\u0275\u0275nextContext(3);return l.\u0275\u0275resetView(de.onGoalRowClick(le))}),l.\u0275\u0275element(1,"goal-value-cell",43),l.\u0275\u0275elementEnd()}if(2&F){var U=l.\u0275\u0275nextContext(2),Q=U.$implicit,B=U.last,P=l.\u0275\u0275nextContext();l.\u0275\u0275styleProp("max-width",P.forceColumnMinWidths?P.ListViewCellMinWidths[Q.columnId]+"px":void 0)("min-width",P.ListViewCellMinWidths[Q.columnId],"px")("--borderColor",P.color),l.\u0275\u0275classProp("selected-goal",(null==P.scorecard||null==P.scorecard.selectedGoalIds?null:P.scorecard.selectedGoalIds[P.displayedGoal.id])||P.highlightRow)("cell-right-edge",B),l.\u0275\u0275advance(1),l.\u0275\u0275property("goal",P.displayedGoal)("showMilestone",!0)}}function tt(F,W){if(1&F){var te=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"td",44,45),l.\u0275\u0275listener("click",function(le){l.\u0275\u0275restoreView(te);var de=l.\u0275\u0275nextContext(3);return l.\u0275\u0275resetView(de.onGoalRowClick(le))}),l.\u0275\u0275element(2,"goal-sparkline-cell",46),l.\u0275\u0275elementEnd()}if(2&F){var U=l.\u0275\u0275nextContext(2),Q=U.$implicit,B=U.last,P=l.\u0275\u0275nextContext();l.\u0275\u0275styleProp("max-width",P.forceColumnMinWidths?P.ListViewCellMinWidths[Q.columnId]+"px":void 0)("min-width",P.ListViewCellMinWidths[Q.columnId],"px")("--borderColor",P.color),l.\u0275\u0275classProp("selected-goal",(null==P.scorecard||null==P.scorecard.selectedGoalIds?null:P.scorecard.selectedGoalIds[P.displayedGoal.id])||P.highlightRow)("cell-right-edge",B),l.\u0275\u0275advance(2),l.\u0275\u0275property("goal",P.displayedGoal)("sparklineValues",P.sparklineValues)}}function Ue(F,W){if(1&F){var te=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"td",47),l.\u0275\u0275listener("click",function(le){l.\u0275\u0275restoreView(te);var de=l.\u0275\u0275nextContext(3);return l.\u0275\u0275resetView(de.onGoalRowClick(le))}),l.\u0275\u0275element(1,"goal-due-date-cell",32),l.\u0275\u0275elementEnd()}if(2&F){var U=l.\u0275\u0275nextContext(2),Q=U.$implicit,B=U.last,P=l.\u0275\u0275nextContext();l.\u0275\u0275styleProp("max-width",P.forceColumnMinWidths?P.ListViewCellMinWidths[Q.columnId]+"px":void 0)("min-width",P.ListViewCellMinWidths[Q.columnId],"px")("--borderColor",P.color),l.\u0275\u0275classProp("selected-goal",(null==P.scorecard||null==P.scorecard.selectedGoalIds?null:P.scorecard.selectedGoalIds[P.displayedGoal.id])||P.highlightRow)("cell-right-edge",B),l.\u0275\u0275advance(1),l.\u0275\u0275property("goal",P.displayedGoal)}}function oe(F,W){1&F&&(l.\u0275\u0275elementContainerStart(0),l.\u0275\u0275template(1,Oe,10,19,"td",12),l.\u0275\u0275template(2,Ce,2,11,"td",13),l.\u0275\u0275template(3,Le,2,12,"td",14),l.\u0275\u0275template(4,$e,3,15,"td",15),l.\u0275\u0275template(5,He,3,13,"td",16),l.\u0275\u0275template(6,Je,2,12,"td",17),l.\u0275\u0275template(7,j,2,12,"td",18),l.\u0275\u0275template(8,tt,3,12,"td",19),l.\u0275\u0275template(9,Ue,2,11,"td",20),l.\u0275\u0275elementContainerEnd()),2&F&&(l.\u0275\u0275advance(1),l.\u0275\u0275property("ngSwitchCase",0),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngSwitchCase",1),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngSwitchCase",2),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngSwitchCase",3),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngSwitchCase",7),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngSwitchCase",8),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngSwitchCase",9),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngSwitchCase",4),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngSwitchCase",5))}function h(F,W){if(1&F&&(l.\u0275\u0275elementContainerStart(0,10),l.\u0275\u0275template(1,oe,10,9,"ng-container",11),l.\u0275\u0275elementContainerEnd()),2&F){var te=W.$implicit;l.\u0275\u0275property("ngSwitch",te.columnId),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",te.show)}}var g=function(){return[]},u=function(){function F(W,te,U,Q,B,P,q,le){this.elementRef=W,this.scorecardService=te,this.featureSwitches=U,this.localizationService=Q,this.scorecardConfigurationService=B,this.capabilityService=P,this.hierarchyService=q,this.goalRowService=le,this.showChildren=!0,this.highlightRow=!1,this.showChildrenChange=new l.EventEmitter,this.tabIndex=0,this.MAX_COLSPAN=t.gT.MaxSubGoals+1,this.ListViewCellMinWidths=t.gT.ListViewCellMinWidths,this.currentValue=null,this.displayedGoal=null,this.indentation=0,this.canSelectGoal=!0,c.fF.assertValue(this.hierarchyService,"No hierarchy service")}return Object.defineProperty(F.prototype,"goal",{set:function(te){var U,Q,B,P,q;if(this.displayedGoal=te,this.capabilities=this.capabilityService.getCurrentGoalCapabilities(te),this.sparklineValues=d.b.buildSparklineValues(te,this.featureSwitches.featureSwitches.goalsSparklineChangeAggregations).map(function(de){return{value:de.value,timestamp:de.timestamp}}),this.sparklineOptions=d.b.getSparklineOptions(te,this.scorecardService.getGoalStatuses(te),this.scorecardConfigurationService.getConfiguration()),this.currentValue=w.r.buildCurrentGoalValue(te),this.valueChange=w.r.calculateValueChange(te,this.featureSwitches.featureSwitches.goalsSparklineChangeAggregations),this.hasValueOrTarget=!_.isNil(this.currentValue.value)||!_.isNil(this.currentValue.finalTarget)||!_.isNil(this.currentValue.nextTarget),this.displayedGoal.completionDate){var le=this.localizationService.currentLanguageLocale;this.completionDate=i.E.treatAsLocalDate(new Date(this.displayedGoal.completionDate)).toLocaleDateString(le,{day:"numeric",month:"short",year:"numeric"})}this.hasVisibleChildren=_.some(te.subGoals,function(de){return!de.isHidden}),this.canSelectGoal=null===(Q=null===(U=this.capabilities.selectGoal)||void 0===U?void 0:U.enabled)||void 0===Q||Q,this.selectGoalDisabledTooltip=null===(B=this.capabilities.selectGoal)||void 0===B?void 0:B.disabledMessageKey,this.showDisabledGoalSelected=null===(q=null===(P=this.capabilities.selectGoal)||void 0===P?void 0:P.disabledReasons)||void 0===q?void 0:q.has("AlreadyLinked")},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"indent",{set:function(te){this.indentation=w.r.getSafeIndentation(te)},enumerable:!1,configurable:!0}),F.prototype.ngOnInit=function(){this.isEditMode$=this.scorecardService.isEditMode(),this.bulkDeleteEnabled=this.featureSwitches.featureSwitches.goalsBulkDelete},F.prototype.ngOnChanges=function(W){var te,U,Q,B;if(W.scorecard){var P=this.scorecardConfigurationService.getConfiguration();!(null===(te=P?.scorecardDisplayOptions)||void 0===te)&&te.isMobileLayout||this.scorecard.activeGoalId===this.displayedGoal.id&&this.focus(),this.isChangeVisible=a._.isColumnVisible(this.scorecard.columnSettings,10)}W.goal&&(this.formatString=W.goal.currentValue.valuesFormatString,this.isCyclePeriodLabelLocalizable=w.r.isCyclePeriodLabelLocalizable(null===(U=this.valueChange)||void 0===U?void 0:U.period)),(W.scorecard||W.goal)&&(this.goalStatuses=this.scorecardService.getGoalStatuses(this.displayedGoal),this.categories=this.scorecardService.getGoalValueCategories(this.displayedGoal),this.isChecked=this.canSelectGoal?null===(B=null===(Q=this.scorecard)||void 0===Q?void 0:Q.selectedGoalIds)||void 0===B?void 0:B[this.displayedGoal.id]:this.showDisabledGoalSelected)},F.prototype.ngAfterViewInit=function(){var W;this.lineChartChangeObserver=p.q.observeAndRemoveFocusableAttributes(null===(W=this.chart)||void 0===W?void 0:W.nativeElement)},F.prototype.ngOnDestroy=function(){var W;null===(W=this.lineChartChangeObserver)||void 0===W||W.disconnect()},F.prototype.onShowChildrenChange=function(){this.showChildrenChange&&this.showChildrenChange.emit(!this.showChildren)},F.prototype.onGoalRowClick=function(W){this.goalRowService.onRowClick(this.displayedGoal,W)},F.prototype.onSelectGoalCheckbox=function(){this.goalRowService.onCheckboxClick(this.displayedGoal)},F.prototype.focus=function(){var W;null===(W=this.elementRef)||void 0===W||W.nativeElement.focus()},F.\u0275fac=function(te){return new(te||F)(l.\u0275\u0275directiveInject(l.ElementRef),l.\u0275\u0275directiveInject(y.G),l.\u0275\u0275directiveInject(r.vZ),l.\u0275\u0275directiveInject(C.o),l.\u0275\u0275directiveInject(m.V),l.\u0275\u0275directiveInject(k.Nw),l.\u0275\u0275directiveInject(O.G),l.\u0275\u0275directiveInject(s.D))},F.\u0275cmp=l.\u0275\u0275defineComponent({type:F,selectors:[["","goal-row",""]],viewQuery:function(te,U){var Q;(1&te&&l.\u0275\u0275viewQuery(N,5),2&te)&&(l.\u0275\u0275queryRefresh(Q=l.\u0275\u0275loadQuery())&&(U.chart=Q.first))},hostVars:1,hostBindings:function(te,U){2&te&&l.\u0275\u0275attribute("tabindex",U.tabIndex)},inputs:{color:"color",showChildren:"showChildren",scorecard:"scorecard",columnSettings:"columnSettings",highlightRow:"highlightRow",scorecardSelectionMode:"scorecardSelectionMode",goal:"goal",indent:"indent",forceColumnMinWidths:"forceColumnMinWidths"},outputs:{showChildrenChange:"showChildrenChange"},features:[l.\u0275\u0275NgOnChangesFeature],attrs:he,decls:6,vars:10,consts:[[1,"checkmark-td"],["class","select-checkmark",3,"box-checked",4,"ngIf"],["class","select-checkmark",4,"ngIf"],["class","cell cell-indent",4,"ngFor","ngForOf"],[3,"ngSwitch",4,"ngFor","ngForOf"],[1,"select-checkmark"],[3,"checked","onChange"],["name","selectGoalInVisual",1,"select-goal-in-visual-radio",3,"disabled","pbiTooltip","pbiTooltipDisabled","isCompact","checked","change"],[3,"disabled","pbiTooltip","pbiTooltipDisabled","checked","onChange"],[1,"cell","cell-indent"],[3,"ngSwitch"],[4,"ngIf"],["class","cell cell-left-edge",3,"selected-goal","--borderColor","max-width","min-width",4,"ngSwitchCase"],["class","cell cell-owner",3,"max-width","min-width","selected-goal","cell-right-edge","--borderColor","click",4,"ngSwitchCase"],["class","cell cell-progress-icon",3,"max-width","min-width","selected-goal","cell-right-edge","--borderColor","click",4,"ngSwitchCase"],["class","cell cell-value-combined",3,"max-width","min-width","selected-goal","cell-right-edge","--borderColor","click",4,"ngSwitchCase"],["class","cell cell-value",3,"max-width","min-width","selected-goal","cell-right-edge","--borderColor","click",4,"ngSwitchCase"],["class","cell cell-target",3,"max-width","min-width","selected-goal","cell-right-edge","--borderColor","click",4,"ngSwitchCase"],["class","cell cell-milestone",3,"max-width","min-width","selected-goal","cell-right-edge","--borderColor","click",4,"ngSwitchCase"],["class","cell cell-sparkline",3,"max-width","min-width","selected-goal","cell-right-edge","--borderColor","click",4,"ngSwitchCase"],["class","cell cell-due-date",3,"max-width","min-width","selected-goal","cell-right-edge","--borderColor","click",4,"ngSwitchCase"],[1,"cell","cell-left-edge"],[1,"cell-box"],[1,"color-box",3,"click"],[4,"ngIf","ngIfElse"],["noChildren",""],[1,"displayed-name-and-action-wrapper"],[3,"goal","scorecard"],[3,"goal","isEditMode"],[1,"collapse-box","powervisuals-glyph","chevron-down",3,"pbiTooltip","click"],[1,"collapse-box",3,"click"],[1,"cell","cell-owner",3,"click"],[3,"goal"],[1,"cell","cell-progress-icon",3,"click"],[3,"status","goalStatuses"],[1,"cell","cell-value-combined",3,"click"],[3,"goal","showCurrent","showTarget","showMilestone"],[3,"goal",4,"ngIf"],[1,"cell","cell-value",3,"click"],[3,"goal","showCurrent"],[1,"cell","cell-target",3,"click"],[3,"goal","showTarget"],[1,"cell","cell-milestone",3,"click"],[3,"goal","showMilestone"],[1,"cell","cell-sparkline",3,"click"],["chart",""],[3,"goal","sparklineValues"],[1,"cell","cell-due-date",3,"click"]],template:function(te,U){1&te&&(l.\u0275\u0275elementStart(0,"td",0),l.\u0275\u0275template(1,pe,2,3,"div",1),l.\u0275\u0275template(2,ce,3,7,"div",2),l.\u0275\u0275template(3,ge,3,6,"div",2),l.\u0275\u0275elementEnd(),l.\u0275\u0275template(4,se,1,0,"td",3),l.\u0275\u0275template(5,h,2,2,"ng-container",4)),2&te&&(l.\u0275\u0275classProp("show-checkmark",!!U.scorecardSelectionMode)("show-on-hover-only","ctrl"===U.scorecardSelectionMode),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf","ctrl"===U.scorecardSelectionMode),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf","single"===U.scorecardSelectionMode),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf","multiple"===U.scorecardSelectionMode),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngForOf",l.\u0275\u0275pureFunction0(9,g).constructor(U.indentation)),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngForOf",U.columnSettings))},dependencies:[ne.NgForOf,ne.NgIf,ne.NgSwitch,ne.NgSwitchCase,ee.v,Z.o,v.V,E.k,I.m,H.I,G.E,Y.$,ie.q,ye.t,ae.m,ne.AsyncPipe,J.F],styles:[".cell[_ngcontent-%COMP%]{border:none;box-sizing:border-box}.cell-indent[_ngcontent-%COMP%]{width:36px}.cell-left-edge[_ngcontent-%COMP%]{border-top-left-radius:4px;border-bottom-left-radius:4px}.cell-right-edge[_ngcontent-%COMP%]{border-top-right-radius:4px;border-bottom-right-radius:4px}.cell-box[_ngcontent-%COMP%]{display:flex;height:100%}.cell-box[_ngcontent-%COMP%]   .color-box[_ngcontent-%COMP%]{min-width:6px;width:6px;border-top-left-radius:4px;border-bottom-left-radius:4px}.dialog-config[_ngcontent-%COMP%]     .simpleConfirmationDialog.updateConfirmationDialogPanel{width:580px}.dialog-config[_ngcontent-%COMP%]     .simpleConfirmationDialog.updateConfirmationDialogPanel .mat-mdc-dialog-actions button{border-width:1px;height:32px;padding:0;width:80px;margin-left:8px}.dialog-config[_ngcontent-%COMP%]     .simpleConfirmationDialog.updateConfirmationDialogPanel .mat-mdc-dialog-content{padding-left:8px}[_nghost-%COMP%]   td[_ngcontent-%COMP%]{height:60px}[_nghost-%COMP%]   .checkmark-td[_ngcontent-%COMP%]{width:35px;max-width:35px}[_nghost-%COMP%]   .checkmark-td[_ngcontent-%COMP%]:not(.show-checkmark){width:0px;max-width:0px}[_nghost-%COMP%]   .checkmark-td[_ngcontent-%COMP%]:not(.show-checkmark)   .select-checkmark[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .show-on-hover-only[_ngcontent-%COMP%]   .select-checkmark[_ngcontent-%COMP%]{visibility:hidden}[_nghost-%COMP%]:hover   .show-on-hover-only[_ngcontent-%COMP%]   .select-checkmark[_ngcontent-%COMP%], [_nghost-%COMP%]   .show-on-hover-only[_ngcontent-%COMP%]   .select-checkmark.box-checked[_ngcontent-%COMP%]{visibility:visible}[_nghost-%COMP%]   .select-checkmark[_ngcontent-%COMP%]{margin-right:15px}[_nghost-%COMP%]   .select-checkmark[_ngcontent-%COMP%]     pbi-checkbox{margin-bottom:0}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]{background:var(--scorecard-tableRowBackgroundColor);padding-right:10px;border-top:1px solid var(--fluent-theme-neutral-light-color, #EDEBE9);border-bottom:1px solid var(--fluent-theme-neutral-light-color, #EDEBE9)}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]   .rotate90[_ngcontent-%COMP%]{transform:rotate(-90deg)}[_nghost-%COMP%]   .cell-box[_ngcontent-%COMP%]{font-size:var(--lg-font-size, 16px);font-weight:var(--font-weight-regular, 400)}[_nghost-%COMP%]   .cell-box[_ngcontent-%COMP%]   .collapse-box[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:48px;min-width:48px;background-color:transparent;border:none}[_nghost-%COMP%]   .cell-box[_ngcontent-%COMP%]   .pointer[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   .cell-box[_ngcontent-%COMP%]   .displayed-name-and-action-wrapper[_ngcontent-%COMP%]{display:flex;width:100%}[_nghost-%COMP%]   .cell-box[_ngcontent-%COMP%]   .displayed-name-and-action-wrapper[_ngcontent-%COMP%]   goal-name-cell[_ngcontent-%COMP%]{flex-grow:1;max-height:3.6em;line-height:1.8em}[_nghost-%COMP%]   .cell-box[_ngcontent-%COMP%]   .displayed-name-and-action-wrapper[_ngcontent-%COMP%]   goal-actions-cell[_ngcontent-%COMP%]{margin-right:10px}[_nghost-%COMP%]   .cell-owner[_ngcontent-%COMP%]{width:250px;max-width:300px}[_nghost-%COMP%]   .cell-progress-icon[_ngcontent-%COMP%]{width:220px;max-width:250px;text-align:center;padding-right:20px}[_nghost-%COMP%]   .cell-sparkline[_ngcontent-%COMP%]{width:150px;overflow:hidden}[_nghost-%COMP%]   .cell-due-date[_ngcontent-%COMP%]{width:150px}[_nghost-%COMP%]   .cell-context-menu[_ngcontent-%COMP%]{width:51px;text-align:center}[_nghost-%COMP%]   .cell-context-menu[_ngcontent-%COMP%]   .context-menu-icon[_ngcontent-%COMP%]{color:var(--gray-140, #484644);font-size:16px;cursor:pointer}[_nghost-%COMP%]   .cell-value-combined[_ngcontent-%COMP%]{width:220px}[_nghost-%COMP%]   .cell-value[_ngcontent-%COMP%]{width:92px}[_nghost-%COMP%]   .cell-milestone[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-target[_ngcontent-%COMP%]{width:72px}[_nghost-%COMP%]   .cell-value-combined[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-value[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-milestone[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-target[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{overflow:visible}[_nghost-%COMP%]   .cell-value-combined[_ngcontent-%COMP%]   .mat-icon.glyph-small[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-value[_ngcontent-%COMP%]   .mat-icon.glyph-small[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-milestone[_ngcontent-%COMP%]   .mat-icon.glyph-small[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-target[_ngcontent-%COMP%]   .mat-icon.glyph-small[_ngcontent-%COMP%]{font-size:var(--lg-font-size, 16px);width:var(--lg-font-size, 16px);height:var(--lg-font-size, 16px)}[_nghost-%COMP%]   .cell-value-combined[_ngcontent-%COMP%]   .mat-icon.glyph-mini[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-value[_ngcontent-%COMP%]   .mat-icon.glyph-mini[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-milestone[_ngcontent-%COMP%]   .mat-icon.glyph-mini[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-target[_ngcontent-%COMP%]   .mat-icon.glyph-mini[_ngcontent-%COMP%]{font-size:var(--sm-font-size, 12px);width:var(--sm-font-size, 12px);height:var(--sm-font-size, 12px)}[_nghost-%COMP%]   .cell-value-combined[_ngcontent-%COMP%]   .mat-icon.mat-ligature-font[fontIcon][_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-value[_ngcontent-%COMP%]   .mat-icon.mat-ligature-font[fontIcon][_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-milestone[_ngcontent-%COMP%]   .mat-icon.mat-ligature-font[fontIcon][_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-target[_ngcontent-%COMP%]   .mat-icon.mat-ligature-font[fontIcon][_ngcontent-%COMP%]{overflow:auto}[_nghost-%COMP%]   goal-actions-cell[_ngcontent-%COMP%]{visibility:hidden}[_nghost-%COMP%]:hover   goal-actions-cell[_ngcontent-%COMP%], [_nghost-%COMP%]:focus-within   goal-actions-cell[_ngcontent-%COMP%]{visibility:visible}[_nghost-%COMP%]   .selected-goal.cell[_ngcontent-%COMP%]{border-top:2px solid var(--borderColor);border-bottom:2px solid var(--borderColor)}[_nghost-%COMP%]   .selected-goal.cell-right-edge[_ngcontent-%COMP%]{border-right:2px solid var(--borderColor)}[_nghost-%COMP%]   .cell-right-edge[_ngcontent-%COMP%]{width:2px;border-right:1px solid var(--fluent-theme-neutral-light-color, #EDEBE9)}  .simpleConfirmationDialog.updateConfirmationDialogPanel{width:580px}  .simpleConfirmationDialog.updateConfirmationDialogPanel .mat-mdc-dialog-actions button{border-width:1px;height:32px;padding:0;width:80px;margin-left:8px}  .simpleConfirmationDialog.updateConfirmationDialogPanel .mat-mdc-dialog-content{padding-left:8px}"],changeDetection:0}),F}()},89256:function(ct,Ge,n){"use strict";n.d(Ge,{A:function(){return ye}});var t=n(81337),i=n(14786),w=n(32293),a=n(11962),d=n(46544),p=n(30794),l=n(48787),c=n(70864),y=n(50423),r=n(65181),C=n(77476),m=n(17174),k=n(44408),O=n(44641),s=n(11941),ne=n(39686),ee=n(24326),Z=n(5432),v=n(23873),E=n(85102);function I(ae,J){if(1&ae&&y.\u0275\u0275element(0,"message-banner",12),2&ae){var N=y.\u0275\u0275nextContext();y.\u0275\u0275property("viewModel",N.messageBanner)}}function H(ae,J){1&ae&&y.\u0275\u0275element(0,"mat-icon",13)}function G(ae,J){1&ae&&y.\u0275\u0275element(0,"mat-icon",14)}function Y(ae,J){1&ae&&y.\u0275\u0275element(0,"pbi-spinner",15)}function ie(ae,J){if(1&ae){var N=y.\u0275\u0275getCurrentView();y.\u0275\u0275elementStart(0,"div",16)(1,"tri-grid",17,18),y.\u0275\u0275listener("rowsChange",function(ce){y.\u0275\u0275restoreView(N);var ge=y.\u0275\u0275nextContext();return y.\u0275\u0275resetView(ge.onRowUpdate(ce))}),y.\u0275\u0275elementEnd()(),y.\u0275\u0275elementStart(3,"section")(4,"div",19),y.\u0275\u0275text(5),y.\u0275\u0275pipe(6,"localize"),y.\u0275\u0275elementEnd(),y.\u0275\u0275elementStart(7,"pbi-radio-group",20),y.\u0275\u0275listener("ngModelChange",function(ce){y.\u0275\u0275restoreView(N);var ge=y.\u0275\u0275nextContext();return y.\u0275\u0275resetView(ge.showFinalTarget=ce)}),y.\u0275\u0275elementStart(8,"pbi-radio-button",21),y.\u0275\u0275text(9),y.\u0275\u0275pipe(10,"localize"),y.\u0275\u0275elementEnd(),y.\u0275\u0275elementStart(11,"pbi-radio-button",21),y.\u0275\u0275text(12),y.\u0275\u0275pipe(13,"localize"),y.\u0275\u0275elementEnd()()()}if(2&ae){var he=y.\u0275\u0275nextContext();y.\u0275\u0275advance(1),y.\u0275\u0275property("rows",he.gridData)("columns",he.columnsConfig),y.\u0275\u0275advance(4),y.\u0275\u0275textInterpolate(y.\u0275\u0275pipeBind1(6,8,"Metrics_Targets_Editor_Select_Target")),y.\u0275\u0275advance(2),y.\u0275\u0275property("ngModel",he.showFinalTarget),y.\u0275\u0275advance(1),y.\u0275\u0275property("value",!1),y.\u0275\u0275advance(1),y.\u0275\u0275textInterpolate(y.\u0275\u0275pipeBind1(10,10,"Target_Next")),y.\u0275\u0275advance(2),y.\u0275\u0275property("value",!0),y.\u0275\u0275advance(1),y.\u0275\u0275textInterpolate(y.\u0275\u0275pipeBind1(13,12,"Target_Final"))}}var ye=function(){function ae(J,N,he,pe,ce){this.dialogRef=J,this.localizationService=he,this.telemetryService=pe,this.changeDetector=ce,this.isFullScreen=!1,this.onDestroy$=new p.xQ,this.resultType=2,this.TargetColumnIndex=0,this.DueDateColumnIndex=1,this.telemetryService.logEvent(i.dT),this.goal$=N.goal$,this.goalTargets$=N.goalTargets$,this.onDoneCallback=N.onDoneCallback,this.columnsConfig=[{name:this.localizationService.get("Target"),type:"Number",width:ae.GridColumnWidthInPx},{name:this.localizationService.get("DueDate"),type:"Date",width:ae.GridColumnWidthInPx}],this.DuplicateTargetDates={bannerType:1,iconName:ae.ErrorIcon,message:this.localizationService.get("Metrics_Targets_Editor_Error_Duplicate_Target_Dates")},this.MissingTargetDate={bannerType:1,iconName:ae.ErrorIcon,message:this.localizationService.get("Metrics_Targets_Editor_Error_Missing_Target_Date")},this.MissingTargetValue={bannerType:1,iconName:ae.ErrorIcon,message:this.localizationService.get("Metrics_Targets_Editor_Error_Missing_Target_Value")}}return ae.prototype.ngOnInit=function(){var J=this;this.goal$.pipe((0,l.q)(1)).subscribe(function(N){var he,pe;J.columnsConfig=[(0,t.pi)((0,t.pi)({},J.columnsConfig[J.TargetColumnIndex]),{formatString:N.valuesFormatString}),(0,t.pi)((0,t.pi)({},J.columnsConfig[J.DueDateColumnIndex]),{formatString:N.datesFormatString})],J.showFinalTarget=null!==(pe=null===(he=N.metadata)||void 0===he?void 0:he.showFinalTarget)&&void 0!==pe?pe:!N.targetConnection}),this.goalTargets$.pipe((0,l.q)(1)).subscribe(function(N){J.gridData=N.map(function(he){return[he.target,new Date(he.timestamp)]}),J.changeDetector.markForCheck()})},ae.prototype.ngAfterViewInit=function(){var J=this;this.columnsConfig=_.map(this.columnsConfig,function(N){return N.template=J.formatSwitchCellTemplate.formatSwitchCell,N})},ae.prototype.ngOnDestroy=function(){this.onDestroy$.next(),this.onDestroy$.complete()},ae.prototype.onRowUpdate=function(J){this.gridData=J},ae.prototype.toggleFullScreen=function(){this.isFullScreen?(this.dialogRef.updateSize("70%","80%"),this.isFullScreen=!1):(this.dialogRef.updateSize("100%","100%"),this.isFullScreen=!0)},ae.prototype.close=function(){this.telemetryService.logEvent(i.JP),this.dialogRef.close()},ae.prototype.onDone=function(){return(0,t.mG)(this,void 0,void 0,function(){var J,N,he,pe,ce;return(0,t.Jh)(this,function(ge){if(this.gridData=this.gridEditor.flushPendingChanges(),(J=this.gridData.filter(function(se){return!(_.isNil(se[0])&&_.isNil(se[1]))}).map(function(se){return{timestamp:_.isNil(se[1])?void 0:se[1],target:_.isNil(se[0])?void 0:se[0]}})).find(function(se){return _.isNil(se.timestamp)&&!_.isNil(se.target)}))return this.messageBanner=this.MissingTargetDate,[2];if(J.find(function(se){return!_.isNil(se.timestamp)&&_.isNil(se.target)}))return this.messageBanner=this.MissingTargetValue,[2];for(N=new Set,he=0,pe=J;he<pe.length;he++){if(N.has((ce=pe[he].timestamp).getTime()))return this.messageBanner=this.DuplicateTargetDates,[2];N.add(ce.getTime())}return this.onDoneCallback(J.map(function(se){return{timestamp:se.timestamp.toISOString(),target:se.target}}),this.showFinalTarget,this.columnsConfig[this.TargetColumnIndex].formatString),this.telemetryService.logEvent(i.pN),this.dialogRef.close(),[2]})})},ae.prototype.valueFormatStringChanged=function(J){this.columnsConfig=[(0,t.pi)((0,t.pi)({},this.columnsConfig[this.TargetColumnIndex]),{formatString:J}),this.columnsConfig[1]]},ae.ErrorIcon="pbi-glyph-blocked2",ae.GridColumnWidthInPx=200,ae.\u0275fac=function(N){return new(N||ae)(y.\u0275\u0275directiveInject(w.so),y.\u0275\u0275directiveInject(w.WI),y.\u0275\u0275directiveInject(r.o),y.\u0275\u0275directiveInject(d.y0),y.\u0275\u0275directiveInject(y.ChangeDetectorRef))},ae.\u0275cmp=y.\u0275\u0275defineComponent({type:ae,selectors:[["goal-targets-editor"]],viewQuery:function(N,he){if(1&N&&(y.\u0275\u0275viewQuery(a.oY,5),y.\u0275\u0275viewQuery(c.F,5)),2&N){var pe=void 0;y.\u0275\u0275queryRefresh(pe=y.\u0275\u0275loadQuery())&&(he.gridEditor=pe.first),y.\u0275\u0275queryRefresh(pe=y.\u0275\u0275loadQuery())&&(he.formatSwitchCellTemplate=pe.first)}},decls:27,vars:29,consts:[[3,"viewModel",4,"ngIf"],[1,"title"],["mat-icon-button","",1,"pbi-icon-button",3,"click"],["class","glyph-small","fontIcon","pbi-glyph-fullscreen",4,"ngIf"],["class","glyph-small","fontIcon","pbi-glyph-fullscreenexit",4,"ngIf"],[1,"targets-editor-value-formatting-box"],[1,"goals-value-formatting",3,"formatString","dataType","formatStringChange"],["class","pbi-spinner-large",4,"ngIf","ngIfElse"],["showGrid",""],[1,"actions"],[1,"pbi-fluent-button","primary",3,"disabled","click"],[1,"pbi-fluent-button","secondary",3,"click"],[3,"viewModel"],["fontIcon","pbi-glyph-fullscreen",1,"glyph-small"],["fontIcon","pbi-glyph-fullscreenexit",1,"glyph-small"],[1,"pbi-spinner-large"],[1,"grid-container"],[3,"rows","columns","rowsChange"],["gridEditor",""],[1,"displayed-target-title"],[1,"displayed-target-options",3,"ngModel","ngModelChange"],[3,"value"]],template:function(N,he){if(1&N&&(y.\u0275\u0275template(0,I,1,1,"message-banner",0),y.\u0275\u0275elementStart(1,"header")(2,"div",1),y.\u0275\u0275text(3),y.\u0275\u0275pipe(4,"localize"),y.\u0275\u0275elementEnd(),y.\u0275\u0275elementStart(5,"button",2),y.\u0275\u0275listener("click",function(){return he.toggleFullScreen()}),y.\u0275\u0275pipe(6,"localize"),y.\u0275\u0275template(7,H,1,0,"mat-icon",3),y.\u0275\u0275template(8,G,1,0,"mat-icon",4),y.\u0275\u0275elementEnd()(),y.\u0275\u0275elementStart(9,"section"),y.\u0275\u0275text(10),y.\u0275\u0275pipe(11,"localize"),y.\u0275\u0275elementEnd(),y.\u0275\u0275elementStart(12,"div",5)(13,"value-formatting",6),y.\u0275\u0275listener("formatStringChange",function(ge){return he.valueFormatStringChanged(ge)}),y.\u0275\u0275elementEnd()(),y.\u0275\u0275template(14,Y,1,0,"pbi-spinner",7),y.\u0275\u0275template(15,ie,14,14,"ng-template",null,8,y.\u0275\u0275templateRefExtractor),y.\u0275\u0275element(17,"format-switch-cell-template"),y.\u0275\u0275elementStart(18,"div",9)(19,"button",10),y.\u0275\u0275listener("click",function(){return he.onDone()}),y.\u0275\u0275pipe(20,"localize"),y.\u0275\u0275text(21),y.\u0275\u0275pipe(22,"localize"),y.\u0275\u0275elementEnd(),y.\u0275\u0275elementStart(23,"button",11),y.\u0275\u0275listener("click",function(){return he.close()}),y.\u0275\u0275pipe(24,"localize"),y.\u0275\u0275text(25),y.\u0275\u0275pipe(26,"localize"),y.\u0275\u0275elementEnd()()),2&N){var pe=y.\u0275\u0275reference(16);y.\u0275\u0275property("ngIf",he.messageBanner),y.\u0275\u0275advance(3),y.\u0275\u0275textInterpolate(y.\u0275\u0275pipeBind1(4,15,"Metrics_Targets_Editor_Title")),y.\u0275\u0275advance(2),y.\u0275\u0275attribute("aria-label",y.\u0275\u0275pipeBind1(6,17,"Fullscreen_Toggle")),y.\u0275\u0275advance(2),y.\u0275\u0275property("ngIf",!he.isFullScreen),y.\u0275\u0275advance(1),y.\u0275\u0275property("ngIf",he.isFullScreen),y.\u0275\u0275advance(2),y.\u0275\u0275textInterpolate1(" ",y.\u0275\u0275pipeBind1(11,19,"Metrics_Targets_Editor_Description"),"\n"),y.\u0275\u0275advance(3),y.\u0275\u0275property("formatString",he.columnsConfig[0].formatString)("dataType",he.resultType),y.\u0275\u0275advance(1),y.\u0275\u0275property("ngIf",!he.gridData)("ngIfElse",pe),y.\u0275\u0275advance(5),y.\u0275\u0275property("disabled",!he.gridData),y.\u0275\u0275attribute("aria-label",y.\u0275\u0275pipeBind1(20,21,"Done_ButtonText")),y.\u0275\u0275advance(2),y.\u0275\u0275textInterpolate1(" ",y.\u0275\u0275pipeBind1(22,23,"Done_ButtonText")," "),y.\u0275\u0275advance(2),y.\u0275\u0275attribute("aria-label",y.\u0275\u0275pipeBind1(24,25,"PBI_Button_Label_Cancel")),y.\u0275\u0275advance(2),y.\u0275\u0275textInterpolate1(" ",y.\u0275\u0275pipeBind1(26,27,"PBI_Button_Label_Cancel")," ")}},dependencies:[C.NgIf,m.JJ,m.On,k.Hw,O.A,s.o,ne.d,ee.k,Z.d,v.o,c.F,E.F],styles:['[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}[_nghost-%COMP%]     .targets-editor-value-formatting-box mat-select{height:28px;border:1px solid var(--gray-110, #8A8886);border-radius:2px}[_nghost-%COMP%]     .targets-editor-value-formatting-box mat-select .mat-select-value{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);color:var(--fluent-theme-neutral-primary-color, #323130);line-height:20px}[_nghost-%COMP%]     .targets-editor-value-formatting-box mat-select .mat-select-arrow{color:var(--gray-140, #484644);padding-right:14px}[_nghost-%COMP%]     .targets-editor-value-formatting-box num-up-down .inputRange{height:28px;border:1px solid var(--gray-110, #8A8886);border-radius:2px}[_nghost-%COMP%]     .targets-editor-value-formatting-box num-up-down .inputRange .inputUpDown{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);color:var(--fluent-theme-neutral-primary-color, #323130);line-height:20px}[_nghost-%COMP%]     .targets-editor-value-formatting-box num-up-down label{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);line-height:20px}[_nghost-%COMP%]     .targets-editor-value-formatting-box .valueFormatterToggleButtonsGroup .btn{background-color:transparent;border:none}[_nghost-%COMP%]     .targets-editor-value-formatting-box .valueFormatterToggleButtonsGroup .btn:hover{background-color:var(--fluent-theme-neutral-quarter-alt-color, #E1DFDD)}header[_ngcontent-%COMP%]{color:var(--fluent-theme-neutral-dark-color, #201F1E);display:flex;flex-direction:row;align-items:center;justify-content:space-between}header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--xlg-font-size, 20px);font-weight:var(--font-weight-semi-bold, 600)}header[_ngcontent-%COMP%], section[_ngcontent-%COMP%], tri-grid[_ngcontent-%COMP%], .targets-editor-value-formatting-box[_ngcontent-%COMP%], .displayed-target-title[_ngcontent-%COMP%]{margin-bottom:16px}.actions[_ngcontent-%COMP%]{display:flex;justify-content:end;gap:8px}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   pbi-spinner[_ngcontent-%COMP%]{margin:5px 5px 0 0}.pbi-spinner-large[_ngcontent-%COMP%]{height:100%}.displayed-target-title[_ngcontent-%COMP%]{font-size:var(--md-font-size, 14px)}.displayed-target-options[_ngcontent-%COMP%]{display:flex;gap:36px}.grid-container[_ngcontent-%COMP%]{flex-grow:1}'],changeDetection:0}),ae}()},25689:function(ct,Ge,n){"use strict";n.d(Ge,{H:function(){return Ue}});var t=n(125),i=n(3204),w=n(62831),a=n(57535),d=n(60166),p=n(62458),l=n(50423),c=n(76746),y=n(9380),r=n(65181),C=n(77476),m=n(59968),k=n(44408),O=n(55710),s=n(36858),ne=n(74913),ee=n(223),Z=n(87758),v=n(42989),E=n(77971),I=n(85102),H=n(90127),G=n(82621),Y=n(38360),ie=["chart"];function ye(oe,h){if(1&oe&&(l.\u0275\u0275elementStart(0,"div",25),l.\u0275\u0275text(1),l.\u0275\u0275elementEnd()),2&oe){var g=l.\u0275\u0275nextContext();l.\u0275\u0275property("pbiTooltip",null==g.goal?null:g.goal.scorecardName),l.\u0275\u0275advance(1),l.\u0275\u0275textInterpolate1(" ",null==g.goal?null:g.goal.scorecardName," ")}}function ae(oe,h){1&oe&&l.\u0275\u0275elementContainer(0)}function J(oe,h){if(1&oe&&(l.\u0275\u0275elementStart(0,"span",31)(1,"span",32),l.\u0275\u0275text(2),l.\u0275\u0275pipe(3,"formatGoalValue"),l.\u0275\u0275elementEnd()()),2&oe){var g=l.\u0275\u0275nextContext(3);l.\u0275\u0275property("localize",g.periodLocalizeString),l.\u0275\u0275advance(2),l.\u0275\u0275textInterpolate(g.valueChange.isPercentage?g.valueChange.changeAmount+"%":l.\u0275\u0275pipeBind3(3,2,g.valueChange.changeAmount,g.categories,g.goal.valuesFormatString))}}function N(oe,h){if(1&oe&&(l.\u0275\u0275elementStart(0,"span",31)(1,"span",32),l.\u0275\u0275text(2),l.\u0275\u0275pipe(3,"formatGoalValue"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(4,"span",33),l.\u0275\u0275text(5),l.\u0275\u0275elementEnd()()),2&oe){var g=l.\u0275\u0275nextContext(3);l.\u0275\u0275property("localize",g.periodLocalizeString),l.\u0275\u0275advance(2),l.\u0275\u0275textInterpolate(g.valueChange.isPercentage?g.valueChange.changeAmount+"%":l.\u0275\u0275pipeBind3(3,3,g.valueChange.changeAmount,g.categories,g.goal.valuesFormatString)),l.\u0275\u0275advance(3),l.\u0275\u0275textInterpolate(g.valueChange.period)}}function he(oe,h){if(1&oe&&(l.\u0275\u0275elementStart(0,"div",28)(1,"span"),l.\u0275\u0275text(2),l.\u0275\u0275elementEnd(),l.\u0275\u0275template(3,J,4,6,"span",29),l.\u0275\u0275template(4,N,6,7,"ng-template",null,30,l.\u0275\u0275templateRefExtractor),l.\u0275\u0275elementStart(6,"span"),l.\u0275\u0275text(7,")"),l.\u0275\u0275elementEnd()()),2&oe){var g=l.\u0275\u0275reference(5),u=l.\u0275\u0275nextContext(2);l.\u0275\u0275advance(2),l.\u0275\u0275textInterpolate1("(",u.valueChange.isIncrease?"\u2191":"\u2193",""),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",u.periodLocalizeString&&!u.periodLocalizeString.endsWith("Custom"))("ngIfElse",g)}}function pe(oe,h){if(1&oe&&(l.\u0275\u0275elementContainerStart(0),l.\u0275\u0275template(1,ae,1,0,"ng-container",26),l.\u0275\u0275template(2,he,8,3,"div",27),l.\u0275\u0275elementContainerEnd()),2&oe){var g=l.\u0275\u0275nextContext(),u=l.\u0275\u0275reference(22);l.\u0275\u0275advance(1),l.\u0275\u0275property("ngTemplateOutlet",u),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",g.settings.showGoalVisualGrowth&&!(g.supportCategoricalValues&&null!=g.goal&&g.goal.valuesCategoryId)&&g.hasData&&g.valueChange)}}var ce=function(h){return{userEmail:h}};function ge(oe,h){if(1&oe&&l.\u0275\u0275element(0,"user-details-host",37),2&oe){var u,g=l.\u0275\u0275nextContext(2);l.\u0275\u0275property("details",l.\u0275\u0275pureFunction1(4,ce,g.owners[0]))("photoSize",null!==(u=g.settings.goalVisualOwnerPhotoSize)&&void 0!==u?u:20)("showUserInfo",g.showOwnerName)("showTooltip",!0)}}function se(oe,h){if(1&oe&&l.\u0275\u0275element(0,"avatar-row",38),2&oe){var g=l.\u0275\u0275nextContext(2);l.\u0275\u0275property("emails",g.owners)("numAvatarsToShow",g.OwnersToShow)}}function xe(oe,h){if(1&oe&&(l.\u0275\u0275elementStart(0,"div",34),l.\u0275\u0275template(1,ge,1,6,"user-details-host",35),l.\u0275\u0275template(2,se,1,2,"ng-template",null,36,l.\u0275\u0275templateRefExtractor),l.\u0275\u0275elementEnd()),2&oe){var g=l.\u0275\u0275reference(3),u=l.\u0275\u0275nextContext();l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",1===u.owners.length)("ngIfElse",g)}}function me(oe,h){if(1&oe&&(l.\u0275\u0275elementStart(0,"h1",39),l.\u0275\u0275text(1),l.\u0275\u0275elementEnd()),2&oe){var g=l.\u0275\u0275nextContext();l.\u0275\u0275property("pbiTooltip",null==g.goal?null:g.goal.name),l.\u0275\u0275advance(1),l.\u0275\u0275textInterpolate1(" ",null==g.goal?null:g.goal.name," ")}}function Oe(oe,h){if(1&oe&&(l.\u0275\u0275elementStart(0,"section",41)(1,"div",42,43),l.\u0275\u0275element(3,"goal-history-chart",44),l.\u0275\u0275elementEnd()()),2&oe){var u,g=l.\u0275\u0275nextContext(2);l.\u0275\u0275advance(3),l.\u0275\u0275property("values",g.goal.goalValues)("formatString",g.goal.valuesFormatString)("color",null!==(u=null==g.settings.theme?null:g.settings.theme.goalVisualCurrentLineColor)&&void 0!==u?u:g.statusColor)("targetLineColor",null==g.settings.theme?null:g.settings.theme.goalVisualTargetLineColor)("showGoalTargets",g.supportMultipleTargets&&g.settings.showGoalVisualTargetLine)("legend",g.supportMultipleTargets&&g.settings.showGoalVisualLegends?"Visible":"None")("showZoom",!1)("shadeCurrentArea",g.shadeCurrentArea)("type","ComboChart")("axesOptions",g.axesOptions)}}function Ce(oe,h){if(1&oe&&(l.\u0275\u0275elementContainerStart(0),l.\u0275\u0275template(1,Oe,4,10,"section",40),l.\u0275\u0275elementContainerEnd()),2&oe){var u,g=l.\u0275\u0275nextContext();l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",null===(u=g.settings.showVisualization)||void 0===u||u)}}function Le(oe,h){if(1&oe&&l.\u0275\u0275element(0,"status-icon",45),2&oe){var g=l.\u0275\u0275nextContext();l.\u0275\u0275property("status",null==g.currentValue?null:g.currentValue.status)("goalStatuses",g.goal.goalStatuses)}}function ze(oe,h){if(1&oe&&(l.\u0275\u0275elementContainerStart(0),l.\u0275\u0275element(1,"label",46),l.\u0275\u0275elementStart(2,"span"),l.\u0275\u0275text(3),l.\u0275\u0275pipe(4,"formatDate"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementContainerEnd()),2&oe){var g=l.\u0275\u0275nextContext();l.\u0275\u0275advance(3),l.\u0275\u0275textInterpolate1(" ",l.\u0275\u0275pipeBind2(4,1,g.goal.completionDate,g.locale),"")}}function $e(oe,h){if(1&oe&&(l.\u0275\u0275elementStart(0,"span",50),l.\u0275\u0275text(1),l.\u0275\u0275elementEnd()),2&oe){var g=l.\u0275\u0275nextContext(2);l.\u0275\u0275advance(1),l.\u0275\u0275textInterpolate1(" ",g.goal.notesCount," ")}}function We(oe,h){if(1&oe){var g=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"button",47),l.\u0275\u0275listener("click",function(){l.\u0275\u0275restoreView(g);var W=l.\u0275\u0275nextContext();return l.\u0275\u0275resetView(W.openNotes())}),l.\u0275\u0275pipe(1,"localize"),l.\u0275\u0275element(2,"tri-svg-icon",48),l.\u0275\u0275template(3,$e,2,1,"span",49),l.\u0275\u0275elementEnd()}if(2&oe){var u=l.\u0275\u0275nextContext();l.\u0275\u0275property("pbiTooltip",l.\u0275\u0275pipeBind1(1,2,"Notes")),l.\u0275\u0275advance(3),l.\u0275\u0275property("ngIf",u.goal.notesCount>0)}}function He(oe,h){1&oe&&l.\u0275\u0275elementContainer(0)}function Je(oe,h){if(1&oe&&(l.\u0275\u0275elementStart(0,"div",51),l.\u0275\u0275template(1,He,1,0,"ng-container",26),l.\u0275\u0275elementEnd()),2&oe){l.\u0275\u0275nextContext();var g=l.\u0275\u0275reference(22);l.\u0275\u0275advance(1),l.\u0275\u0275property("ngTemplateOutlet",g)}}function j(oe,h){if(1&oe&&(l.\u0275\u0275elementStart(0,"div",52)(1,"div",53)(2,"div",54),l.\u0275\u0275pipe(3,"formatValue"),l.\u0275\u0275text(4),l.\u0275\u0275pipe(5,"formatValue"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(6,"div",55),l.\u0275\u0275pipe(7,"formatValue"),l.\u0275\u0275text(8),l.\u0275\u0275pipe(9,"formatValue"),l.\u0275\u0275elementEnd()()()),2&oe){var g=l.\u0275\u0275nextContext();l.\u0275\u0275advance(2),l.\u0275\u0275property("pbiTooltip",l.\u0275\u0275pipeBind3(3,4,g.currentValue.value,g.goal.valuesFormatString,!1)),l.\u0275\u0275advance(2),l.\u0275\u0275textInterpolate1(" ",l.\u0275\u0275pipeBind2(5,8,g.currentValue.value,g.goal.valuesFormatString)," "),l.\u0275\u0275advance(2),l.\u0275\u0275property("pbiTooltip",l.\u0275\u0275pipeBind3(7,11,g.currentValue.target,g.goal.valuesFormatString,!1)),l.\u0275\u0275advance(2),l.\u0275\u0275textInterpolate1(" /",l.\u0275\u0275pipeBind2(9,15,g.currentValue.target,g.goal.valuesFormatString)," ")}}function tt(oe,h){if(1&oe){var g=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementContainerStart(0),l.\u0275\u0275elementStart(1,"button",21),l.\u0275\u0275listener("click",function(){l.\u0275\u0275restoreView(g);var F=l.\u0275\u0275nextContext();return l.\u0275\u0275resetView(F.onEdit())}),l.\u0275\u0275element(2,"tri-svg-icon",22)(3,"span",56),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementContainerEnd()}2&oe&&(l.\u0275\u0275advance(2),l.\u0275\u0275property("name","edit_20_regular"))}var Ue=function(){function oe(h,g,u,F,W){this.appSettings=h,this.featureSwitches=g,this.localizationService=u,this.cd=F,this.scorecardHost=W,this.currentValue=null,this.showGrowth=!1,this.showOwnerName=!1,this.shadeCurrentArea=!0,this.owners=[],this.OwnersToShow=4,this.supportCategoricalValues=this.featureSwitches.featureSwitches.goalsCategoricalValues,this.supportMultipleTargets=this.featureSwitches.featureSwitches.powerBIGoalsMultipleTargets}return Object.defineProperty(oe.prototype,"scorecardRoutePath",{get:function(){return"/groups/".concat(this.goal.groupId||"me","/scorecards/").concat(this.goal.scorecardId).toLowerCase()},enumerable:!1,configurable:!0}),Object.defineProperty(oe.prototype,"inServiceUrl",{get:function(){return"".concat(this.appSettings.baseUrl).concat(this.scorecardRoutePath,"?goal=").concat(this.goal.id)},enumerable:!1,configurable:!0}),oe.prototype.ngOnInit=function(){var g,u,F,h=this;p.fF.assertValue(this.goal,"Missing goal"),this.setDisplayedVals(),this.locale=this.localizationService.currentLanguageLocale,this.supportCategoricalValues&&null!==(g=this.goal)&&void 0!==g&&g.valuesCategoryId&&(this.categories=null!==(F=null===(u=_.find(this.goal.goalValueCategories,function(W){return W.id===h.goal.valuesCategoryId}))||void 0===u?void 0:u.categories)&&void 0!==F?F:[])},oe.prototype.ngOnChanges=function(h){var g,u,F,W,te,U,Q,B;if(h.goal&&(this.setDisplayedVals(),this.supportCategoricalValues&&h.goal.currentValue.valuesCategoryId&&(this.categories=null!==(F=null===(u=_.find(this.goal.goalValueCategories,function(q){return q.id===h.goal.currentValue.valuesCategoryId}))||void 0===u?void 0:u.categories)&&void 0!==F?F:[]),this.owners=this.goal.owner?[this.goal.owner]:[],this.goal.additionalOwners&&(g=this.owners).push.apply(g,this.goal.additionalOwners.map(function(q){return q.userPrincipalName}))),h.settings){this.cd.markForCheck();var P=h.settings.currentValue;this.isEditMode=!P?.disableEdit,this.axesOptions={xAxis:{show:null===(W=P?.showGoalVisualXAxis)||void 0===W||W,fontProperties:null===(te=P?.theme)||void 0===te?void 0:te.goalVisualXAxis},yAxis:{show:null===(U=P?.showGoalVisualYAxis)||void 0===U||U,fontProperties:null===(Q=P?.theme)||void 0===Q?void 0:Q.goalVisualYAxis}},this.shadeCurrentArea=null===(B=P?.currentAreaShaded)||void 0===B||B}},oe.prototype.ngAfterViewInit=function(){var h;this.lineChartChangeObserver=w.q.observeAndRemoveFocusableAttributes(null===(h=this.chart)||void 0===h?void 0:h.nativeElement)},oe.prototype.ngOnDestroy=function(){var h;null===(h=this.lineChartChangeObserver)||void 0===h||h.disconnect()},oe.prototype.openNotes=function(){this.scorecardHost.openNotes(this.goal)},oe.prototype.onEdit=function(){this.scorecardHost.editGoal()},oe.prototype.onOpenInService=function(){this.scorecardHost.openLink(this.inServiceUrl)},oe.prototype.setDisplayedVals=function(){var h;this.currentValue=t.r.buildCurrentGoalValue(this.goal),this.valueChange=t.r.calculateValueChange(this.goal,this.featureSwitches.featureSwitches.goalsSparklineChangeAggregations),this.periodLocalizeString=_.isNil(null===(h=this.valueChange)||void 0===h?void 0:h.period)?void 0:"PercentGrowth_"+this.getPeriodSuffix(this.valueChange.period);var u=a.p.getGoalStatus(this.currentValue.status,this.goal.goalStatuses);this.statusColor=a.p.getGoalSparklineColor(u.color),this.sparklineValues=i.b.buildSparklineValues(this.goal,this.featureSwitches.featureSwitches.goalsSparklineChangeAggregations),this.hasData=_.some(this.sparklineValues)},oe.prototype.getPeriodSuffix=function(h){switch(h){case"Period_DoD":case"Period_MoM":case"Period_QoQ":case"Period_WoW":case"Period_YoY":return h;default:return"Period_Custom"}},oe.componentId="GoalTileComponentId",oe.\u0275fac=function(g){return new(g||oe)(l.\u0275\u0275directiveInject(c.de),l.\u0275\u0275directiveInject(y.vZ),l.\u0275\u0275directiveInject(r.o),l.\u0275\u0275directiveInject(l.ChangeDetectorRef),l.\u0275\u0275directiveInject(d.M,8))},oe.\u0275cmp=l.\u0275\u0275defineComponent({type:oe,selectors:[["goal-tile"]],viewQuery:function(g,u){var F;(1&g&&l.\u0275\u0275viewQuery(ie,5),2&g)&&(l.\u0275\u0275queryRefresh(F=l.\u0275\u0275loadQuery())&&(u.chart=F.first))},inputs:{goal:"goal",settings:"settings"},features:[l.\u0275\u0275NgOnChangesFeature],decls:32,vars:17,consts:[[1,"goal-tile"],[1,"header-container"],["class","scorecard-name",3,"pbiTooltip",4,"ngIf"],[1,"details"],[1,"value-and-growth"],[4,"ngIf"],["class","owners",4,"ngIf"],["class","goal-name",3,"pbiTooltip",4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"footer-container"],[1,"status-and-date"],[3,"status","goalStatuses",4,"ngIf"],[1,"target-date"],[1,"notes-and-menu"],["mat-icon-button","",3,"pbiTooltip","click",4,"ngIf"],["mat-icon-button","",3,"matMenuTriggerFor"],["fontIcon","pbi-glyph-more",1,"glyph-small"],["noChart",""],["valueAndTarget",""],[1,"context-menu-dropdown",3,"xPosition"],["contextMenu","matMenu"],["mat-menu-item","",1,"goal-tile-context-menu-item",3,"click"],["tri-svg-icon-16","",3,"name"],["localize","OpenScorecard"],["localize","OpenNotes"],[1,"scorecard-name",3,"pbiTooltip"],[4,"ngTemplateOutlet"],["class","growth",4,"ngIf"],[1,"growth"],["class","period","localize-fragments","",3,"localize",4,"ngIf","ngIfElse"],["customPeriod",""],["localize-fragments","",1,"period",3,"localize"],["fragment-index","0"],["fragment-index","1"],[1,"owners"],[3,"details","photoSize","showUserInfo","showTooltip",4,"ngIf","ngIfElse"],["hasMultipleOwners",""],[3,"details","photoSize","showUserInfo","showTooltip"],[3,"emails","numAvatarsToShow"],[1,"goal-name",3,"pbiTooltip"],["class","visual-container",4,"ngIf"],[1,"visual-container"],[1,"visual"],["chart",""],[3,"values","formatString","color","targetLineColor","showGoalTargets","legend","showZoom","shadeCurrentArea","type","axesOptions"],[3,"status","goalStatuses"],["localize","Due"],["mat-icon-button","",3,"pbiTooltip","click"],["tri-svg-icon-16","","name","comment_16_regular",1,"tri-svg"],["class","notes-count",4,"ngIf"],[1,"notes-count"],[1,"no-chart"],[1,"value-wrapper"],[1,"value-target"],[1,"value",3,"pbiTooltip"],[1,"target",3,"pbiTooltip"],["localize","Edit_Metric"]],template:function(g,u){if(1&g&&(l.\u0275\u0275elementStart(0,"section",0)(1,"section",1),l.\u0275\u0275template(2,ye,2,2,"div",2),l.\u0275\u0275elementStart(3,"div",3)(4,"div",4),l.\u0275\u0275template(5,pe,3,2,"ng-container",5),l.\u0275\u0275elementEnd(),l.\u0275\u0275template(6,xe,4,2,"div",6),l.\u0275\u0275elementEnd(),l.\u0275\u0275template(7,me,2,2,"h1",7),l.\u0275\u0275elementEnd(),l.\u0275\u0275template(8,Ce,2,1,"ng-container",8),l.\u0275\u0275elementStart(9,"section",9)(10,"div",10),l.\u0275\u0275template(11,Le,1,2,"status-icon",11),l.\u0275\u0275elementStart(12,"div",12),l.\u0275\u0275template(13,ze,5,4,"ng-container",5),l.\u0275\u0275elementEnd()(),l.\u0275\u0275elementStart(14,"div",13),l.\u0275\u0275template(15,We,4,4,"button",14),l.\u0275\u0275elementStart(16,"button",15),l.\u0275\u0275pipe(17,"localize"),l.\u0275\u0275element(18,"mat-icon",16),l.\u0275\u0275elementEnd()()(),l.\u0275\u0275template(19,Je,2,1,"ng-template",null,17,l.\u0275\u0275templateRefExtractor),l.\u0275\u0275template(21,j,10,18,"ng-template",null,18,l.\u0275\u0275templateRefExtractor),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(23,"mat-menu",19,20),l.\u0275\u0275template(25,tt,4,1,"ng-container",5),l.\u0275\u0275elementStart(26,"button",21),l.\u0275\u0275listener("click",function(){return u.onOpenInService()}),l.\u0275\u0275element(27,"tri-svg-icon",22)(28,"span",23),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(29,"button",21),l.\u0275\u0275listener("click",function(){return u.openNotes()}),l.\u0275\u0275element(30,"tri-svg-icon",22)(31,"span",24),l.\u0275\u0275elementEnd()()),2&g){var F=l.\u0275\u0275reference(20),W=l.\u0275\u0275reference(24);l.\u0275\u0275advance(2),l.\u0275\u0275property("ngIf",u.settings.showGoalVisualScorecardName),l.\u0275\u0275advance(3),l.\u0275\u0275property("ngIf",u.hasData),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",u.settings.showGoalVisualOwner&&u.owners.length>0),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",u.settings.showGoalVisualGoalName),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",u.hasData)("ngIfElse",F),l.\u0275\u0275advance(3),l.\u0275\u0275property("ngIf",u.settings.showGoalVisualStatus),l.\u0275\u0275advance(2),l.\u0275\u0275property("ngIf",u.settings.showGoalVisualDueDate&&(null==u.goal?null:u.goal.completionDate)),l.\u0275\u0275advance(2),l.\u0275\u0275property("ngIf",u.settings.showGoalVisualNotes),l.\u0275\u0275advance(1),l.\u0275\u0275property("matMenuTriggerFor",W),l.\u0275\u0275attribute("aria-label",l.\u0275\u0275pipeBind1(17,15,"HotkeyDialog_Open_Context_Menu")),l.\u0275\u0275advance(7),l.\u0275\u0275property("xPosition","after"),l.\u0275\u0275advance(2),l.\u0275\u0275property("ngIf",u.isEditMode),l.\u0275\u0275advance(2),l.\u0275\u0275property("name","open_20_regular"),l.\u0275\u0275advance(3),l.\u0275\u0275property("name","note_20_regular")}},dependencies:[C.NgIf,C.NgTemplateOutlet,m.X,k.Hw,O.W0,O.tN,O.D8,s.V,ne.M,ee.s,Z.c,v.R,E.m,I.F,H.D,G.c,Y.i],styles:['.goal-tile[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;width:100%;height:100%;color:var(--fluent-theme-neutral-primary-alt-color, #3B3A39);background-color:var(--scorecard-goalVisualBackgroundColor);font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-regular, 400);white-space:nowrap}.goal-tile[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;padding:4px 7px;color:var(--fluent-theme-black-color, #000)}.goal-tile[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .scorecard-name[_ngcontent-%COMP%]{margin:0 0 4px;color:var(--scorecard-goalVisualScorecardName-color);font-size:var(--scorecard-goalVisualScorecardName-size);font-family:var(--scorecard-goalVisualScorecardName-family);font-weight:var(--scorecard-goalVisualScorecardName-weight);font-style:var(--scorecard-goalVisualScorecardName-style);text-decoration:var(--scorecard-goalVisualScorecardName-textDecoration)}.goal-tile[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.goal-tile[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .value-and-growth[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:baseline}.goal-tile[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .value-and-growth[_ngcontent-%COMP%]   .value-target[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:var(--scorecard-goalVisualCurrentValue-color);font-size:var(--scorecard-goalVisualCurrentValue-size);font-family:var(--scorecard-goalVisualCurrentValue-family);font-weight:var(--scorecard-goalVisualCurrentValue-weight);font-style:var(--scorecard-goalVisualCurrentValue-style);text-decoration:var(--scorecard-goalVisualCurrentValue-textDecoration)}.goal-tile[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .value-and-growth[_ngcontent-%COMP%]   .value-target[_ngcontent-%COMP%]   .target[_ngcontent-%COMP%]{color:var(--scorecard-goalVisualTargetValue-color);font-size:var(--scorecard-goalVisualTargetValue-size);font-family:var(--scorecard-goalVisualTargetValue-family);font-weight:var(--scorecard-goalVisualTargetValue-weight);font-style:var(--scorecard-goalVisualTargetValue-style);text-decoration:var(--scorecard-goalVisualTargetValue-textDecoration)}.goal-tile[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .value-and-growth[_ngcontent-%COMP%]   .growth[_ngcontent-%COMP%]{display:flex;align-items:center;padding-left:6px;color:var(--scorecard-goalVisualGrowth-color);font-size:var(--scorecard-goalVisualGrowth-size);font-family:var(--scorecard-goalVisualGrowth-family);font-weight:var(--scorecard-goalVisualGrowth-weight);font-style:var(--scorecard-goalVisualGrowth-style);text-decoration:var(--scorecard-goalVisualGrowth-textDecoration)}.goal-tile[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .value-and-growth[_ngcontent-%COMP%]   .growth[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{height:8px;width:8px}.goal-tile[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .value-and-growth[_ngcontent-%COMP%]   .growth[_ngcontent-%COMP%]   .period[_ngcontent-%COMP%]{padding-left:4px}.goal-tile[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .owners[_ngcontent-%COMP%]{display:flex;align-items:center}.goal-tile[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .owners[_ngcontent-%COMP%]     .user-info{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400)}.goal-tile[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .owners[_ngcontent-%COMP%]     .user-image{margin:0}.goal-tile[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .goal-name[_ngcontent-%COMP%]{margin:4px 0;color:var(--scorecard-goalVisualGoalName-color);font-size:var(--scorecard-goalVisualGoalName-size);font-family:var(--scorecard-goalVisualGoalName-family);font-weight:var(--scorecard-goalVisualGoalName-weight);font-style:var(--scorecard-goalVisualGoalName-style);text-decoration:var(--scorecard-goalVisualGoalName-textDecoration)}.goal-tile[_ngcontent-%COMP%]   .visual-container[_ngcontent-%COMP%]{display:flex;flex-grow:1;padding:4px 7px}.goal-tile[_ngcontent-%COMP%]   .visual-container[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]{flex:1;display:flex}.goal-tile[_ngcontent-%COMP%]   .visual-container[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   goal-history-chart[_ngcontent-%COMP%]{width:100%;flex:1}.goal-tile[_ngcontent-%COMP%]   .no-chart[_ngcontent-%COMP%]{display:flex;flex-grow:1;padding:4px 7px}.goal-tile[_ngcontent-%COMP%]   .no-chart[_ngcontent-%COMP%]   .value-wrapper[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center;justify-content:center}.goal-tile[_ngcontent-%COMP%]   .no-chart[_ngcontent-%COMP%]   .value-wrapper[_ngcontent-%COMP%]   .value-target[_ngcontent-%COMP%]{margin:auto}.goal-tile[_ngcontent-%COMP%]   .no-chart[_ngcontent-%COMP%]   .value-wrapper[_ngcontent-%COMP%]   .value-target[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:34px}.goal-tile[_ngcontent-%COMP%]   .no-chart[_ngcontent-%COMP%]   .value-wrapper[_ngcontent-%COMP%]   .value-target[_ngcontent-%COMP%]   .target[_ngcontent-%COMP%]{font-size:22px}.goal-tile[_ngcontent-%COMP%]   .value-target[_ngcontent-%COMP%]{display:flex;align-items:baseline}.goal-tile[_ngcontent-%COMP%]   .footer-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:4px 7px}.goal-tile[_ngcontent-%COMP%]   .footer-container[_ngcontent-%COMP%]   .status-and-date[_ngcontent-%COMP%], .goal-tile[_ngcontent-%COMP%]   .footer-container[_ngcontent-%COMP%]   .notes-and-menu[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.goal-tile[_ngcontent-%COMP%]   .footer-container[_ngcontent-%COMP%]   .status-and-date[_ngcontent-%COMP%]   .target-date[_ngcontent-%COMP%]{white-space:nowrap;text-overflow:ellipsis;overflow:hidden;color:var(--scorecard-goalVisualDueDate-color);font-size:var(--scorecard-goalVisualDueDate-size);font-family:var(--scorecard-goalVisualDueDate-family);font-weight:var(--scorecard-goalVisualDueDate-weight);font-style:var(--scorecard-goalVisualDueDate-style);text-decoration:var(--scorecard-goalVisualDueDate-textDecoration)}.goal-tile[_ngcontent-%COMP%]   .footer-container[_ngcontent-%COMP%]   .status-and-date[_ngcontent-%COMP%]   status-icon[_ngcontent-%COMP%]{padding-right:10px}.goal-tile[_ngcontent-%COMP%]   .footer-container[_ngcontent-%COMP%]   .status-and-date[_ngcontent-%COMP%]   status-icon[_ngcontent-%COMP%]     .status{white-space:nowrap;text-overflow:ellipsis;overflow:hidden;height:14px;line-height:14px;font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-regular, 400)}.goal-tile[_ngcontent-%COMP%]   .footer-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:relative;padding:0;border:none;background:none;height:100%;width:32px}.goal-tile[_ngcontent-%COMP%]   .footer-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:before{vertical-align:middle}.goal-tile[_ngcontent-%COMP%]   .footer-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .notes[_ngcontent-%COMP%]{color:var(--scorecard-goalVisualNotes-color);font-size:var(--scorecard-goalVisualNotes-size)}.goal-tile[_ngcontent-%COMP%]   .footer-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .notes-count[_ngcontent-%COMP%]{position:absolute;font-size:9px;font-weight:600;top:-1px;right:3px;border-radius:30px;padding:1px 4px;background:var(--fluent-theme-primary-color, #F2C811);color:var(--text-primary-content-color-hc, #000)}  .context-menu-dropdown{min-height:unset}  .context-menu-dropdown .mat-menu-content{padding:4px!important}  .context-menu-dropdown .mat-menu-content .goal-tile-context-menu-item{display:flex;flex-direction:row;align-items:center;justify-content:flex-start;padding:0 8px!important;max-height:32px}  .context-menu-dropdown .mat-menu-content .goal-tile-context-menu-item tri-svg-icon{margin-right:4px}'],changeDetection:0}),oe}()},7082:function(ct,Ge,n){"use strict";n.d(Ge,{p:function(){return te}});var t=n(81337),i=n(29589),w=n(72489),a=function(){function U(){}return U.getPreviewValue=function(Q){var B,P,q,le;if(null!==(B=Q?.result)&&void 0!==B&&B[0]){var de=Q.result[0],V=_.filter(Q.columns,function(X){return X.isMeasure}),b=_.first(V),L=de[b.index],T=_.find(Q.columns,function(X){return!!X.type&&!!X.type.dateTime});T&&(q=new Date(de[T.index])),le=(0,w.EO)(b,i.iu),_.isFinite(L)&&(P=L)}return{timestamp:q,value:P,formatString:le}},U}(),d=n(44603),p=n(125),l=n(17085),c=n(50423),y=new c.InjectionToken("ConnectToDataDialogService"),r=n(98587),C=n(62458),m=n(25512),k=n(5432),O=n(74466),s=n(11547),ne=n(77526),ee=n(48787),Z=n(59973),v=n(14172),E=n(86940),I=n(82621),H=n(65181),G=n(34340),Y=n(10321),ie=n(58938),ye=n(49223),ae=n(77476),J=n(17174),N=n(59968),he=n(39947),pe=n(85102),ce=["valueInput"],ge=["valueSelect"],se=["targetInput"],xe=["targetSelect"],me=["valueFormattingTmpl"],Oe=["valueFormatting"];function Ce(U,Q){if(1&U){var B=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"div",13)(1,"button",14),c.\u0275\u0275listener("click",function(){c.\u0275\u0275restoreView(B);var q=c.\u0275\u0275nextContext();return c.\u0275\u0275resetView(q.openGoalValuesEditor())}),c.\u0275\u0275text(2),c.\u0275\u0275pipe(3,"localize"),c.\u0275\u0275elementEnd()()}2&U&&(c.\u0275\u0275advance(2),c.\u0275\u0275textInterpolate(c.\u0275\u0275pipeBind1(3,1,"Edit")))}function Le(U,Q){if(1&U){var B=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"div",15)(1,"input",16,17),c.\u0275\u0275listener("focus",function(){c.\u0275\u0275restoreView(B);var le=c.\u0275\u0275nextContext();return c.\u0275\u0275resetView(le.onCurrentValueFocus())})("keyup.enter",function(){c.\u0275\u0275restoreView(B);var le=c.\u0275\u0275nextContext();return c.\u0275\u0275resetView(le.save())})("ngModelChange",function(le){c.\u0275\u0275restoreView(B);var de=c.\u0275\u0275nextContext();return c.\u0275\u0275resetView(de.onCurrentValueChange(le))}),c.\u0275\u0275pipe(3,"localize"),c.\u0275\u0275pipe(4,"localize"),c.\u0275\u0275elementEnd()()}if(2&U){var P=c.\u0275\u0275nextContext();c.\u0275\u0275advance(1),c.\u0275\u0275propertyInterpolate("type",P.valueInputType),c.\u0275\u0275property("readonly",!P.capabilities.editCurrentValue||P.isValueSubmetricsSelected)("ngModel",P.valueInputValue),c.\u0275\u0275attribute("aria-label",c.\u0275\u0275pipeBind1(3,5,"CurrentValue"))("placeholder",P.displayedGoal.valueConnection||P.displayedGoal.valueRollup||P.isValueSubmetricsSelected?"-":c.\u0275\u0275pipeBind1(4,7,"Enter_Value"))}}function ze(U,Q){if(1&U&&(c.\u0275\u0275elementStart(0,"option",22),c.\u0275\u0275text(1),c.\u0275\u0275elementEnd()),2&U){var B=Q.$implicit;c.\u0275\u0275property("ngValue",Q.index),c.\u0275\u0275advance(1),c.\u0275\u0275textInterpolate1(" ",B.displayName," ")}}function $e(U,Q){if(1&U){var B=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"select",18,19),c.\u0275\u0275listener("ngModelChange",function(le){c.\u0275\u0275restoreView(B);var de=c.\u0275\u0275nextContext();return c.\u0275\u0275resetView(de.valueSelected=le)}),c.\u0275\u0275element(2,"option",20),c.\u0275\u0275template(3,ze,2,2,"option",21),c.\u0275\u0275elementEnd()}if(2&U){var P=c.\u0275\u0275nextContext();c.\u0275\u0275property("disabled",!P.capabilities.editCurrentValue)("ngModel",P.valueSelected),c.\u0275\u0275advance(3),c.\u0275\u0275property("ngForOf",null==P.goalValueCategoryLists[P.selectedCategoryListIndex]?null:P.goalValueCategoryLists[P.selectedCategoryListIndex].categories)}}function We(U,Q){if(1&U){var B=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"div")(1,"goal-value-type-picker",23),c.\u0275\u0275listener("onCurrentSelection",function(le){c.\u0275\u0275restoreView(B);var de=c.\u0275\u0275nextContext();return c.\u0275\u0275resetView(de.onCurrentSelectionCurrentValueChange(le))}),c.\u0275\u0275elementEnd()()}if(2&U){var P=c.\u0275\u0275nextContext();c.\u0275\u0275advance(1),c.\u0275\u0275property("canCustomizeStatus",null==P.capabilities.scorecardCapabilities?null:P.capabilities.scorecardCapabilities.customizeStatus)("goal",P.displayedGoal)("currentGoalValueTypeSelection",P.currentGoalValueTypeSelection)("goalValueType",1)("goalCapabilities",P.capabilities)("showGoalRollupsCoachmark",(null==P.displayedGoal.subGoals?null:P.displayedGoal.subGoals.length)>0&&P.capabilities.usePickerRollup)}}function He(U,Q){1&U&&c.\u0275\u0275element(0,"span",26)}function Je(U,Q){if(1&U){var B=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"div",13),c.\u0275\u0275template(1,He,1,0,"span",24),c.\u0275\u0275elementStart(2,"span"),c.\u0275\u0275text(3,"\xa0"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(4,"button",25),c.\u0275\u0275listener("click",function(){c.\u0275\u0275restoreView(B);var le=c.\u0275\u0275nextContext();return c.\u0275\u0275resetView(le.onConnectCurrentToDataClick())}),c.\u0275\u0275elementEnd()()}if(2&U){var P=c.\u0275\u0275nextContext();c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",!P.displayedGoal.valueConnection),c.\u0275\u0275advance(3),c.\u0275\u0275property("localize",P.displayedGoal.valueConnection?"UpdateConnection":"ConnectToData")}}function j(U,Q){if(1&U){var B=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"div",13)(1,"button",14),c.\u0275\u0275listener("click",function(){c.\u0275\u0275restoreView(B);var q=c.\u0275\u0275nextContext();return c.\u0275\u0275resetView(q.openGoalTargetsEditor())}),c.\u0275\u0275text(2),c.\u0275\u0275pipe(3,"localize"),c.\u0275\u0275elementEnd()()}2&U&&(c.\u0275\u0275advance(2),c.\u0275\u0275textInterpolate(c.\u0275\u0275pipeBind1(3,1,"Edit")))}function tt(U,Q){if(1&U){var B=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"div",15)(1,"input",27,28),c.\u0275\u0275listener("focus",function(){c.\u0275\u0275restoreView(B);var le=c.\u0275\u0275nextContext();return c.\u0275\u0275resetView(le.onTargetValueFocus())})("keyup.enter",function(){c.\u0275\u0275restoreView(B);var le=c.\u0275\u0275nextContext();return c.\u0275\u0275resetView(le.save())})("ngModelChange",function(le){c.\u0275\u0275restoreView(B);var de=c.\u0275\u0275nextContext();return c.\u0275\u0275resetView(de.onTargetValueChange(le))}),c.\u0275\u0275pipe(3,"localize"),c.\u0275\u0275pipe(4,"localize"),c.\u0275\u0275elementEnd()()}if(2&U){var P=c.\u0275\u0275nextContext();c.\u0275\u0275advance(1),c.\u0275\u0275propertyInterpolate("type",P.targetInputType),c.\u0275\u0275property("readonly",!P.capabilities.editTargetValue||P.isTargetSubmetricsSelected)("ngModel",P.targetInputValue)("pbiTooltipDisabled",!(P.capabilities.supportMultipleTargetsEditing&&P.targetCount>1&&!P.displayedGoal.targetConnection&&!P.isTargetSubmetricsSelected))("pbiTooltipPosition","below"),c.\u0275\u0275attribute("aria-label",c.\u0275\u0275pipeBind1(3,7,"Target"))("placeholder",P.displayedGoal.targetConnection||P.displayedGoal.targetRollup||P.isTargetSubmetricsSelected?"-":c.\u0275\u0275pipeBind1(4,9,"Enter_A_Value"))}}function Ue(U,Q){if(1&U&&(c.\u0275\u0275elementStart(0,"option",22),c.\u0275\u0275text(1),c.\u0275\u0275elementEnd()),2&U){var B=Q.$implicit;c.\u0275\u0275property("ngValue",Q.index),c.\u0275\u0275advance(1),c.\u0275\u0275textInterpolate1(" ",B.displayName," ")}}function oe(U,Q){if(1&U){var B=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"select",29,30),c.\u0275\u0275listener("ngModelChange",function(le){c.\u0275\u0275restoreView(B);var de=c.\u0275\u0275nextContext();return c.\u0275\u0275resetView(de.targetSelected=le)}),c.\u0275\u0275element(2,"option",31),c.\u0275\u0275template(3,Ue,2,2,"option",21),c.\u0275\u0275elementEnd()}if(2&U){var P=c.\u0275\u0275nextContext();c.\u0275\u0275property("disabled",!P.capabilities.editTargetValue)("ngModel",P.targetSelected),c.\u0275\u0275advance(3),c.\u0275\u0275property("ngForOf",null==P.goalValueCategoryLists[P.selectedCategoryListIndex]?null:P.goalValueCategoryLists[P.selectedCategoryListIndex].categories)}}function h(U,Q){if(1&U){var B=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"div")(1,"goal-value-type-picker",32),c.\u0275\u0275listener("onCurrentSelection",function(le){c.\u0275\u0275restoreView(B);var de=c.\u0275\u0275nextContext();return c.\u0275\u0275resetView(de.onCurrentSelectionTargetChange(le))}),c.\u0275\u0275elementEnd()()}if(2&U){var P=c.\u0275\u0275nextContext();c.\u0275\u0275advance(1),c.\u0275\u0275property("canCustomizeStatus",null==P.capabilities.scorecardCapabilities?null:P.capabilities.scorecardCapabilities.customizeStatus)("goal",P.displayedGoal)("hasMultipleTargets",P.targetCount>1)("currentGoalValueTypeSelection",P.targetGoalValueTypeSelection)("goalValueType",2)("goalCapabilities",P.capabilities)}}function g(U,Q){1&U&&c.\u0275\u0275element(0,"span",26)}function u(U,Q){if(1&U){var B=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"div",13),c.\u0275\u0275template(1,g,1,0,"span",24),c.\u0275\u0275elementStart(2,"span"),c.\u0275\u0275text(3,"\xa0"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(4,"button",25),c.\u0275\u0275listener("click",function(){c.\u0275\u0275restoreView(B);var le=c.\u0275\u0275nextContext();return c.\u0275\u0275resetView(le.onConnectTargetToDataClick())}),c.\u0275\u0275elementEnd()()}if(2&U){var P=c.\u0275\u0275nextContext();c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",!P.displayedGoal.targetConnection),c.\u0275\u0275advance(3),c.\u0275\u0275property("localize",P.displayedGoal.targetConnection?"UpdateConnection":"ConnectToData")}}function F(U,Q){if(1&U){var B=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"div",33,34)(2,"div",35),c.\u0275\u0275text(3),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(4,"value-formatting",36),c.\u0275\u0275listener("formatStringChange",function(le){c.\u0275\u0275restoreView(B);var de=c.\u0275\u0275nextContext();return c.\u0275\u0275resetView(de.valueFormatStringChanged(le))})("onSelectedCategoryListChange",function(le){c.\u0275\u0275restoreView(B);var de=c.\u0275\u0275nextContext();return c.\u0275\u0275resetView(de.selectCategoryList(le))}),c.\u0275\u0275elementEnd()()}if(2&U){var P=c.\u0275\u0275nextContext();c.\u0275\u0275advance(3),c.\u0275\u0275textInterpolate(P.formattedValue),c.\u0275\u0275advance(1),c.\u0275\u0275property("formatString",P.formatString)("dataType",P.resultType)("supportCategoricalValues",P.capabilities.useCategoricalValues&&!P.isValueSubmetricsSelected&&!P.isTargetSubmetricsSelected)("goalValueCategoryLists",P.goalValueCategoryLists)("selectedCategoryListIndex",P.selectedCategoryListIndex)("launchCategoryListsEditPane",P.launchCategoryListsEditPane)}}var W=function(U){return U[U.None=0]="None",U[U.Value=1]="Value",U[U.Target=2]="Target",U}({}),te=function(){function U(Q,B,P,q,le,de,V,b,L,T,X){var ue=this;this.elementRef=Q,this.pbiOverlay=B,this.changeDetector=P,this.formatValuePipe=q,this.localizationService=le,this.detailsPaneLauncher=de,this.goalValuesEditorLauncher=V,this.dialogService=b,this.scorecardService=L,this.connectToDataDialog=T,this.scorecardSettings=X,this.currentTargetChange=new c.EventEmitter,this.currentValueChange=new c.EventEmitter,this.targetsChange=new c.EventEmitter,this.valuesChange=new c.EventEmitter,this.valueRollupsChange=new c.EventEmitter,this.targetRollupsChange=new c.EventEmitter,this.onCategoryListIdChanged=new c.EventEmitter,this.onSave=new c.EventEmitter,this.onConnectionChanged=new c.EventEmitter,this.PaddingFromComponentToEditor=4,this.GoalEditValueTooltipId="goal-edit-value-formatting",this.resultType=2,this.formatNilReturn="",this.focusedInput=W.None,this.goalValueCategoryLists=[],this.isValueSubmetricsSelected=!1,this.isTargetSubmetricsSelected=!1,this.currentGoalValueTypeSelection=void 0,this.targetGoalValueTypeSelection=void 0,this.launchCategoryListsEditPane=function(Ne){ue.overlayRef&&(ue.overlayRef.close(),ue.overlayRef=null),ue.detailsPaneLauncher.openCategoryListsEditPane(ue.scorecardService,Ne,function(it){_.isEmpty(ue.goalValueCategoryLists)&&(ue.formatString="");var ut=ue.displayedGoal.valuesCategoryId;if(ut){var ot=_.findIndex(ue.goalValueCategoryLists,function(pt){return pt.id===ut});it&&1===ue.goalValueCategoryLists.length&&(ot=0),ot<0?(ue.selectedCategoryListIndex=ot,ue.onCategoryListIdChanged.emit(ut),ue.formatGoalValues()):ue.selectCategoryList(ot)}else ue.selectCategoryList(ot=it&&1===ue.goalValueCategoryLists.length?0:-1)})}}return U.prototype.ngOnInit=function(){var B,P,q,le,Q=this;if(this.formatString=this.displayedGoal.valuesCategoryId?k.d.CategoricalFormatString:this.displayedGoal.valuesFormatString,this.originalCurrentValue=this.currentValue.value,this.capabilities.useCategoricalValues&&(this.categoryListsSubscribe=this.scorecardService.getScorecard().pipe((0,ne.x)(function(b,L){return _.isEqual(b.goalValueCategories,L.goalValueCategories)})).subscribe(function(){var b;Q.goalValueCategoryLists=Q.scorecardService.getGoalValueCategoryLists(Q.displayedGoal),Q.selectedCategoryListIndex=null!==(b=_.findIndex(Q.goalValueCategoryLists,function(L){return L.id===Q.displayedGoal.valuesCategoryId}))&&void 0!==b?b:-1})),this.capabilities.supportMultipleTargetsEditing&&!this.displayedGoal.targetConnection){var de;de=this.displayedGoal.isNew?0:null!==(q=null===(P=null===(B=this.displayedGoal.aggregations)||void 0===B?void 0:B.find(function(b){return"NumberOfTargets"===b.type}))||void 0===P?void 0:P.value)&&void 0!==q?q:0,this.targetCount=Math.max(de,1)}if(_.isUndefined(null===(le=this.displayedGoal.metadata)||void 0===le?void 0:le.showFinalTarget)&&this.capabilities.supportMultipleTargetsEditing){var V=!this.displayedGoal.targetConnection;this.displayedGoal.metadata?this.displayedGoal.metadata.showFinalTarget=V:this.displayedGoal.metadata={showFinalTarget:V}}this.formatGoalValues(),this.updateCurrentGoalValueTypeSelection(void 0,1),this.updateCurrentGoalValueTypeSelection(void 0,2)},U.prototype.save=function(){this.onSave.emit()},U.prototype.onCurrentSelectionCurrentValueChange=function(Q){var B;return(0,t.mG)(this,void 0,void 0,function(){return(0,t.Jh)(this,function(P){return this.isValueSubmetricsSelected=null!==(B=!_.isUndefined(Q.rollupType))&&void 0!==B&&B,1!==Q.type&&this.displayedGoal.valueConnection&&(this.displayedGoal.valueConnection=void 0,this.onConnectionChanged.emit()),_.isUndefined(Q.rollupType)?2===Q.type?(this.displayedGoal.valueRollup=void 0,this.openGoalValuesEditor()):1===Q.type?this.onConnectCurrentToDataClick():this.displayedGoal.valueRollup=void 0:(this.currentValue=(0,t.pi)((0,t.pi)({},this.currentValue),{value:null}),this.currentValueChange.emit(this.currentValue),this.formatGoalValues()),this.changeDetector.detectChanges(),this.valueRollupsChange.emit({rollupType:Q.rollupType,type:Q.type}),this.updateCurrentGoalValueTypeSelection(Q,1),[2]})})},U.prototype.onCurrentSelectionTargetChange=function(Q){var B;return(0,t.mG)(this,void 0,void 0,function(){return(0,t.Jh)(this,function(P){return this.isTargetSubmetricsSelected=null!==(B=!_.isUndefined(Q.rollupType))&&void 0!==B&&B,1!==Q.type&&this.displayedGoal.targetConnection&&(this.displayedGoal.targetConnection=void 0,this.onConnectionChanged.emit()),_.isUndefined(Q.rollupType)?2===Q.type?this.openGoalTargetsEditor():1===Q.type?this.onConnectTargetToDataClick():this.displayedGoal.targetRollup=void 0:(this.currentTarget=(0,t.pi)((0,t.pi)({},this.currentTarget),{target:null}),this.currentTargetChange.emit(this.currentTarget),this.formatGoalValues()),this.changeDetector.detectChanges(),this.targetRollupsChange.emit({rollupType:Q.rollupType,type:Q.type}),this.updateCurrentGoalValueTypeSelection(Q,2),[2]})})},U.prototype.updateCurrentGoalValueTypeSelection=function(Q,B){var P,q,le,de,V,b;2===B?this.targetGoalValueTypeSelection=this.displayedGoal.targetConnection?{type:1}:this.isTargetSubmetricsSelected||_.isNil(Q)&&!_.isNil(null===(P=this.displayedGoal)||void 0===P?void 0:P.targetRollup)?{type:4,rollupType:null!==(q=Q?.rollupType)&&void 0!==q?q:null===(le=this.displayedGoal.targetRollup)||void 0===le?void 0:le.rollupType}:this.targetCount>1?{type:2}:this.displayedGoal.isNew&&void 0===Q?void 0:{type:0}:this.currentGoalValueTypeSelection=this.displayedGoal.valueConnection?{type:1}:this.isValueSubmetricsSelected||_.isNil(Q)&&!_.isNil(null===(de=this.displayedGoal)||void 0===de?void 0:de.valueRollup)?{type:4,rollupType:null!==(V=Q?.rollupType)&&void 0!==V?V:null===(b=this.displayedGoal.valueRollup)||void 0===b?void 0:b.rollupType}:this.displayedGoal.isNew&&void 0===Q?void 0:{type:0}},U.prototype.ngOnDestroy=function(){this.overlayRef&&(this.overlayRef.close(),this.overlayRef=null),this.connectToDataDialog.close(),this.categoryListsSubscribe&&this.categoryListsSubscribe.unsubscribe()},U.prototype.onConnectCurrentToDataClick=function(){var Q=this;this.detailsPaneLauncher.closeGoalDetails(),this.getDialogConfig(1).then(function(B){Q.connectToDataDialog.open(B).pipe((0,ee.q)(1)).subscribe(function(P){var q;if(P){var de=(0,t._T)(P,["previewResult"]);Q.displayedGoal.valueConnection=de;var V=(q=a.getPreviewValue(P.previewResult)).value;Q.valueFormatStringChanged(q.formatString),Q.currentValue=(0,t.pi)((0,t.pi)({},Q.currentValue),{value:V}),Q.currentValueChange.emit(Q.currentValue),Q.capabilities.supportMultipleValuesEditing&&(Q.values=void 0,Q.valuesChange.emit(Q.values)),Q.formatGoalValues(),Q.updateCurrentGoalValueTypeSelection({type:1},1),Q.onConnectionChanged.emit(),Q.changeDetector.detectChanges()}})})},U.prototype.onConnectTargetToDataClick=function(){return(0,t.mG)(this,void 0,void 0,function(){var P=this;return(0,t.Jh)(this,function(q){switch(q.label){case 0:return this.detailsPaneLauncher.closeGoalDetails(),this.capabilities.supportMultipleTargetsEditing&&!this.displayedGoal.targetConnection&&(this.targetCount>1||null!=this.currentTarget.target)?[4,this.dialogService.showConfirmationDialog({title:this.localizationService.get("Metrics_Switch_To_Connected_Data"),message:this.localizationService.get("Metrics_Switch_To_Connected_Data_Multiple_Goal_Targets"),okButtonText:this.localizationService.get("ModalDialogButtonText_Continue")}).afterClosed().toPromise()]:[3,2];case 1:if(1!==q.sent())return[2];q.label=2;case 2:return this.getDialogConfig(2).then(function(le){P.connectToDataDialog.open(le).pipe((0,ee.q)(1)).subscribe(function(de){var V,b;if(de){var T=(0,t._T)(de,["previewResult"]);P.displayedGoal.targetConnection=T;var X=(V=a.getPreviewValue(de.previewResult)).value;P.valueFormatStringChanged(V.formatString),P.currentTarget=(0,t.pi)((0,t.pi)({},P.currentTarget),{target:X}),P.currentTargetChange.emit(P.currentTarget),P.capabilities.supportMultipleTargetsEditing&&(P.targets=void 0,P.targetsChange.emit(P.targets),P.targetCount=void 0,null!==(b=P.displayedGoal)&&void 0!==b&&b.metadata?P.displayedGoal.metadata.showFinalTarget=!1:P.displayedGoal.metadata={showFinalTarget:!1}),P.formatGoalValues(),P.updateCurrentGoalValueTypeSelection({type:1},2),P.onConnectionChanged.emit(),P.changeDetector.detectChanges()}})}),[2]}})})},U.prototype.onCurrentValueFocus=function(){this.focusedInput!==W.Value&&(this.focusedInput=W.Value,this.formatGoalValues(),this.valueInput.nativeElement.click()),this.capabilities.changeValueFormat&&null==this.overlayRef&&this.openValueFormattingPane()},U.prototype.onTargetValueFocus=function(){this.focusedInput!==W.Target&&(this.focusedInput=W.Target,this.formatGoalValues(),this.targetInput.nativeElement.click()),this.capabilities.changeValueFormat&&null==this.overlayRef&&this.openValueFormattingPane()},U.prototype.valueFormatStringChanged=function(Q){var B=this.formatString===k.d.CategoricalFormatString;this.formatString=Q,this.displayedGoal.valuesFormatString=Q===k.d.CategoricalFormatString?"":Q??"",B&&this.formatString!==k.d.CategoricalFormatString&&this.onCategoryListIdChanged.emit(null),this.formatGoalValues()},U.prototype.isCategoricalValue=function(Q){var B,P;return this.isCategoricalFormat&&this.selectedCategoryListIndex>=0&&this.selectedCategoryListIndex<(null===(B=this.goalValueCategoryLists)||void 0===B?void 0:B.length)&&(null===(P=this.goalValueCategoryLists[this.selectedCategoryListIndex])||void 0===P?void 0:P.categories.length)>Q},U.prototype.onCurrentValueChange=function(Q){var B=this,P=_.isNil(Q)||""===Q?null:+Q;this.currentValue=(0,t.pi)((0,t.pi)({},this.currentValue),{value:P}),this.currentValueChange.emit(this.currentValue),this.currentGoalValueTypeSelection={type:0},this.capabilities.supportMultipleValuesEditing&&this.values&&(this.values=(0,O.ZP)(this.values,function(q){var le=q.find(function(de){return new Date(de.timestamp).getTime()===new Date(B.currentValue.timestamp).getTime()});le?le.value=B.currentValue.value:q.push(B.currentValue)}),this.valuesChange.emit(this.values)),this.formatGoalValues()},U.prototype.onTargetValueChange=function(Q){var B=this,P=_.isNil(Q)||""===Q?null:+Q;this.currentTarget=(0,t.pi)((0,t.pi)({},this.currentTarget),{target:P}),this.currentTargetChange.emit(this.currentTarget),this.targetGoalValueTypeSelection={type:0},this.capabilities.supportMultipleTargetsEditing&&this.targets&&(C.fF.assert(function(){return B.targetCount<=1&&B.targets.length<=1},"Inline target editor should only be enabled if there's at most one target!"),this.targets=[this.currentTarget],this.targetsChange.emit(this.targets)),this.formatGoalValues()},U.prototype.openGoalTargetsEditor=function(){return(0,t.mG)(this,void 0,void 0,function(){var Q,P=this;return(0,t.Jh)(this,function(q){return C.fF.assertValue(_.isNil(this.displayedGoal.targetConnection),"Targets can only be edited if there is no target connection"),Q=this.getGoalTargets(),this.goalValuesEditorLauncher.launchTargetsEditor(this.displayedGoal,Q,function(de,V,b){return(0,t.mG)(P,void 0,void 0,function(){var L,T;return(0,t.Jh)(this,function(X){return de.length>0?(de.sort(function(ue,Ne){return new Date(ue.timestamp).getTime()-new Date(Ne.timestamp).getTime()}),this.currentTarget=V?p.r.calculateFinalTarget(de):p.r.calculateNextTarget(de),this.targets=de):((L=d.E.getCurrentLocalDay()).setMonth(L.getMonth()+1),this.currentTarget={timestamp:L.toISOString(),target:null},this.targets=[this.currentTarget]),this.currentTargetChange.emit(this.currentTarget),this.targetsChange.emit(this.targets),null!==(T=this.displayedGoal)&&void 0!==T&&T.metadata?this.displayedGoal.metadata.showFinalTarget=V:this.displayedGoal.metadata={showFinalTarget:V},this.targetCount=de.length,this.formatString=b,this.displayedGoal.valuesFormatString=b,this.formatGoalValues(),this.updateCurrentGoalValueTypeSelection({type:2},2),[2]})})}),[2]})})},U.prototype.openGoalValuesEditor=function(){return(0,t.mG)(this,void 0,void 0,function(){var Q,P=this;return(0,t.Jh)(this,function(q){return C.fF.assertValue(_.isNil(this.displayedGoal.valueConnection),"Values can only be edited if there is no value connection"),Q=this.getGoalValues(),this.goalValuesEditorLauncher.launchValuesEditor(this.displayedGoal,Q,function(de,V){return(0,t.mG)(P,void 0,void 0,function(){return(0,t.Jh)(this,function(b){return de.length>0?(de.sort(function(L,T){return new Date(L.timestamp).getTime()-new Date(T.timestamp).getTime()}),this.currentValue=(0,t.pi)((0,t.pi)({},this.currentValue),{value:p.r.calculateCurrentValue(de)}),this.values=de):(this.currentValue=(0,t.pi)((0,t.pi)({},this.currentValue),{value:null}),this.values=[this.currentValue]),this.currentValueChange.emit(this.currentValue),this.valuesChange.emit(this.values),this.formatString=V,this.displayedGoal.valuesFormatString=V,this.formatGoalValues(),this.updateCurrentGoalValueTypeSelection({type:0},1),[2]})})}),[2]})})},U.prototype.getGoalTargets=function(){var B,P,Q=this;return this.displayedGoal.isNew||this.targets?P=(0,s.of)(null!==(B=this.targets)&&void 0!==B?B:[]):(this.scorecardService.expandGoalValues(this.displayedGoal.id,!1),P=this.scorecardService.getGoal(this.displayedGoal.id).pipe((0,Z.h)(function(q){return q.isExpanded}),(0,v.U)(function(q){var le;return null!==(le=q.goalValues)&&void 0!==le?le:[]}),(0,v.U)(function(q){return q.filter(function(le){return!_.isNil(le.target)})}))),P.pipe((0,v.U)(function(q){return(0,O.ZP)(q,function(le){if(!_.isNil(Q.targetCount)&&Q.targetCount<=1){C.fF.assert(function(){return le.length<=1},"Inline target editor should only be enabled if there's at most one target!");var de=le.find(function(V){return new Date(V.timestamp).getTime()===new Date(Q.currentTarget.timestamp).getTime()});de?de.target=Q.currentTarget.target:le.push(Q.currentTarget)}})}),(0,v.U)(function(q){return(0,O.ZP)(q,function(le){le.sort(function(de,V){return new Date(de.timestamp).getTime()-new Date(V.timestamp).getTime()})})}))},U.prototype.getGoalValues=function(){var B,P,Q=this;return this.displayedGoal.isNew||this.values?P=(0,s.of)(null!==(B=this.values)&&void 0!==B?B:[]):(this.scorecardService.expandGoalValues(this.displayedGoal.id,!1),P=this.scorecardService.getGoal(this.displayedGoal.id).pipe((0,Z.h)(function(q){return q.isExpanded}),(0,v.U)(function(q){var le;return null!==(le=q.goalValues)&&void 0!==le?le:[]}),(0,v.U)(function(q){return q.filter(function(le){return!_.isNil(le.value)})}))),P.pipe((0,v.U)(function(q){return(0,O.ZP)(q,function(le){var de=le.find(function(V){return new Date(V.timestamp).getTime()===new Date(Q.currentValue.timestamp).getTime()});de?de.value=Q.currentValue.value:Q.originalCurrentValue!==Q.currentValue.value&&le.push(Q.currentValue)})}),(0,v.U)(function(q){return(0,O.ZP)(q,function(le){le.sort(function(de,V){return new Date(de.timestamp).getTime()-new Date(V.timestamp).getTime()})})}))},U.prototype.onMouseClick=function(Q){var B,P,q,le,de,V,b,L,T=Q?.target;return null!==(B=this.valueSelect)&&void 0!==B&&B.nativeElement.contains(T)?(this.focusedInput!==W.Value&&(this.focusedInput=W.Value,this.formatGoalValues()),void(this.overlayRef||this.openValueFormattingPane())):null!==(P=this.targetSelect)&&void 0!==P&&P.nativeElement.contains(T)?(this.focusedInput!==W.Target&&(this.focusedInput=W.Target,this.formatGoalValues()),void(this.overlayRef||this.openValueFormattingPane())):void(null!==(q=this.valueInput)&&void 0!==q&&q.nativeElement.contains(T)||null!==(le=this.targetInput)&&void 0!==le&&le.nativeElement.contains(T)||null!==(V=null===(de=this.valueFormatting)||void 0===de?void 0:de.nativeElement)&&void 0!==V&&V.contains(T)||T.classList.contains("mat-option-text")||T.classList.contains("pbi-menu-item")||null!==(b=this.valueInput)&&void 0!==b&&b.nativeElement.contains(document.activeElement)||null!==(L=this.targetInput)&&void 0!==L&&L.nativeElement.contains(document.activeElement)||(this.focusedInput!==W.None&&(this.focusedInput=W.None,this.formatGoalValues()),this.overlayRef&&(this.overlayRef.close(),this.overlayRef=null)))},U.prototype.selectCategoryList=function(Q){var B;this.selectedCategoryListIndex=Q,this.onCategoryListIdChanged.emit(null===(B=this.goalValueCategoryLists[this.selectedCategoryListIndex])||void 0===B?void 0:B.id),this.formatGoalValues()},Object.defineProperty(U.prototype,"valueSelected",{get:function(){return this.isCategoricalValue(this.currentValue.value)?this.currentValue.value:void 0},set:function(B){var P=this;this.currentValue=(0,t.pi)((0,t.pi)({},this.currentValue),{value:B}),this.currentValueChange.emit(this.currentValue),this.capabilities.supportMultipleValuesEditing&&this.values&&(this.values=(0,O.ZP)(this.values,function(q){var le=q.find(function(de){return new Date(de.timestamp).getTime()===new Date(P.currentValue.timestamp).getTime()});le?le.value=P.currentValue.value:q.push(P.currentValue)}),this.valuesChange.emit(this.values)),this.formatGoalValues()},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"targetSelected",{get:function(){return this.isCategoricalValue(this.currentTarget.target)?this.currentTarget.target:void 0},set:function(B){var P=this,q=B;this.currentTarget=(0,t.pi)((0,t.pi)({},this.currentTarget),{target:q}),this.currentTargetChange.emit(this.currentTarget),this.capabilities.supportMultipleTargetsEditing&&this.targets&&(C.fF.assert(function(){return P.targetCount<=1&&P.targets.length<=1},"Inline target editor should only be enabled if there's at most one target!"),this.targets=[this.currentTarget],this.targetsChange.emit(this.targets)),this.formatGoalValues()},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"isCategoricalFormat",{get:function(){return this.formatString===k.d.CategoricalFormatString},enumerable:!1,configurable:!0}),U.prototype.openValueFormattingPane=function(){var Q=this.pbiOverlay.position().flexibleConnectedTo(this.elementRef.nativeElement).withPositions([(0,m.xe)(0,-this.PaddingFromComponentToEditor)]).withPush(!0).withGrowAfterOpen(!0);this.overlayRef=this.pbiOverlay.open({component:l.i,data:{id:this.GoalEditValueTooltipId,templateRef:this.valueFormattingTmpl},options:{positionStrategy:Q,hasBackdrop:!1,disposeOnNavigation:!0},hasCaret:!1,focusElementOnClose:null,disableCloseOnEsc:!0,disableFocusTrapSetting:{disable:!0}}),this.overlayRef.componentRef.changeDetectorRef.detectChanges()},U.prototype.formatValue=function(Q){var B,P;return this.formatString!==k.d.CategoricalFormatString?this.formatValuePipe.transform(Q,this.formatString,!0,this.formatNilReturn):this.isCategoricalValue(Q)?null===(P=null===(B=this.goalValueCategoryLists[this.selectedCategoryListIndex])||void 0===B?void 0:B.categories[Q])||void 0===P?void 0:P.displayName:void 0},U.prototype.formatGoalValues=function(){var Q,B,P,q,le=this.focusedInput===W.Value&&this.capabilities.editCurrentValue,de=this.focusedInput===W.Target&&this.capabilities.editTargetValue;this.valueInputType=le?"number":"text",this.targetInputType=de?"number":"text",this.valueInputValue=le?null!==(B=null===(Q=this.currentValue.value)||void 0===Q?void 0:Q.toString())&&void 0!==B?B:"":this.formatValue(this.currentValue.value),this.targetInputValue=de?null!==(q=null===(P=this.currentTarget.target)||void 0===P?void 0:P.toString())&&void 0!==q?q:"":this.formatValue(this.currentTarget.target),this.formattedValue="",this.focusedInput===W.Value&&(this.formattedValue=this.formatValue(this.currentValue.value)),this.focusedInput===W.Target&&(this.formattedValue=this.formatValue(this.currentTarget.target))},U.prototype.getDialogConfig=function(Q){return(0,t.mG)(this,void 0,void 0,function(){var P,q;return(0,t.Jh)(this,function(de){switch(de.label){case 0:return P={data:{}},(q=1===Q?this.displayedGoal.valueConnection:this.displayedGoal.targetConnection)&&(P.data.reportUrl=q.reportUrl,q.shouldClearGoalValues&&(P.data.banner={bannerType:2,iconName:"pbi-glyph-info",message:this.localizationService.get("Metric_Clear_Values_On_New_Connection_Warning")})),this.scorecardSettings?[4,this.scorecardSettings.settings.pipe((0,ee.q)(1)).toPromise()]:[2,P];case 1:return de.sent().alwaysMaximize&&(P.height="100%",P.width="100%",P.hideFullscreenToggle=!0),[2,P]}})})},U.\u0275fac=function(B){return new(B||U)(c.\u0275\u0275directiveInject(c.ElementRef),c.\u0275\u0275directiveInject(E._),c.\u0275\u0275directiveInject(c.ChangeDetectorRef),c.\u0275\u0275directiveInject(I.c),c.\u0275\u0275directiveInject(H.o),c.\u0275\u0275directiveInject(G.c),c.\u0275\u0275directiveInject(Y.L),c.\u0275\u0275directiveInject(ie.x),c.\u0275\u0275directiveInject(ye.G),c.\u0275\u0275directiveInject(y),c.\u0275\u0275directiveInject(r.u,8))},U.\u0275cmp=c.\u0275\u0275defineComponent({type:U,selectors:[["goal-value-input"]],viewQuery:function(B,P){if(1&B&&(c.\u0275\u0275viewQuery(ce,5),c.\u0275\u0275viewQuery(ge,5),c.\u0275\u0275viewQuery(se,5),c.\u0275\u0275viewQuery(xe,5),c.\u0275\u0275viewQuery(me,5,c.TemplateRef),c.\u0275\u0275viewQuery(Oe,5)),2&B){var q=void 0;c.\u0275\u0275queryRefresh(q=c.\u0275\u0275loadQuery())&&(P.valueInput=q.first),c.\u0275\u0275queryRefresh(q=c.\u0275\u0275loadQuery())&&(P.valueSelect=q.first),c.\u0275\u0275queryRefresh(q=c.\u0275\u0275loadQuery())&&(P.targetInput=q.first),c.\u0275\u0275queryRefresh(q=c.\u0275\u0275loadQuery())&&(P.targetSelect=q.first),c.\u0275\u0275queryRefresh(q=c.\u0275\u0275loadQuery())&&(P.valueFormattingTmpl=q.first),c.\u0275\u0275queryRefresh(q=c.\u0275\u0275loadQuery())&&(P.valueFormatting=q.first)}},hostBindings:function(B,P){1&B&&c.\u0275\u0275listener("click",function(le){return P.onMouseClick(le)},!1,c.\u0275\u0275resolveDocument)},inputs:{displayedGoal:"displayedGoal",currentValue:"currentValue",capabilities:"capabilities",currentTarget:"currentTarget",targets:"targets",values:"values",goalStatuses:"goalStatuses"},outputs:{currentTargetChange:"currentTargetChange",currentValueChange:"currentValueChange",targetsChange:"targetsChange",valuesChange:"valuesChange",valueRollupsChange:"valueRollupsChange",targetRollupsChange:"targetRollupsChange",onCategoryListIdChanged:"onCategoryListIdChanged",onSave:"onSave",onConnectionChanged:"onConnectionChanged"},decls:24,vars:17,consts:[[1,"input-box-sm","right-padding","current"],[1,"value-input-title"],["localize","CurrentValue",1,"input-title"],["class","input-action-txt",4,"ngIf"],[1,"input"],["class","input-box right-margin",4,"ngIf","ngIfElse"],["selectCategoricalValue",""],[4,"ngIf"],[1,"input-box-sm","target"],[1,"target-input-title"],[1,"input-title"],["selectCategoricalTarget",""],["valueFormattingTmpl",""],[1,"input-action-txt"],[1,"link",3,"click"],[1,"input-box","right-margin"],["data-testid","current-value-input-box","step","any",3,"readonly","type","ngModel","focus","keyup.enter","ngModelChange"],["valueInput",""],["data-testid","select-categorical-value",1,"select-categorical-value",3,"disabled","ngModel","ngModelChange"],["valueSelect",""],["value","","selected","!valueSelected","hidden","!!valueSelected}}"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],[3,"canCustomizeStatus","goal","currentGoalValueTypeSelection","goalValueType","goalCapabilities","showGoalRollupsCoachmark","onCurrentSelection"],["localize","Logical_Or_Operator",4,"ngIf"],[1,"link",3,"localize","click"],["localize","Logical_Or_Operator"],["data-testid","target-value-input-box","step","any",3,"readonly","type","ngModel","pbiTooltipDisabled","pbiTooltipPosition","focus","keyup.enter","ngModelChange"],["targetInput",""],[1,"select-categorical-target",3,"disabled","ngModel","ngModelChange"],["targetSelect",""],["value","","selected","!targetSelected","hidden","!!targetSelected"],[3,"canCustomizeStatus","goal","hasMultipleTargets","currentGoalValueTypeSelection","goalValueType","goalCapabilities","onCurrentSelection"],["data-testid","value-formatting-box",1,"value-formatting-box"],["valueFormatting",""],[1,"result"],[1,"goals-value-formatting",3,"formatString","dataType","supportCategoricalValues","goalValueCategoryLists","selectedCategoryListIndex","launchCategoryListsEditPane","formatStringChange","onSelectedCategoryListChange"]],template:function(B,P){if(1&B&&(c.\u0275\u0275elementStart(0,"div",0)(1,"div",1),c.\u0275\u0275element(2,"div",2),c.\u0275\u0275template(3,Ce,4,3,"div",3),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(4,"div",4),c.\u0275\u0275template(5,Le,5,9,"div",5),c.\u0275\u0275template(6,$e,4,3,"ng-template",null,6,c.\u0275\u0275templateRefExtractor),c.\u0275\u0275template(8,We,2,6,"div",7),c.\u0275\u0275elementEnd(),c.\u0275\u0275template(9,Je,5,2,"div",3),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(10,"div",8)(11,"div",9)(12,"div",10),c.\u0275\u0275text(13),c.\u0275\u0275pipe(14,"localize"),c.\u0275\u0275elementEnd(),c.\u0275\u0275template(15,j,4,3,"div",3),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(16,"div",4),c.\u0275\u0275template(17,tt,5,11,"div",5),c.\u0275\u0275template(18,oe,4,3,"ng-template",null,11,c.\u0275\u0275templateRefExtractor),c.\u0275\u0275template(20,h,2,6,"div",7),c.\u0275\u0275elementEnd(),c.\u0275\u0275template(21,u,5,2,"div",3),c.\u0275\u0275elementEnd(),c.\u0275\u0275template(22,F,5,7,"ng-template",null,12,c.\u0275\u0275templateRefExtractor)),2&B){var q=c.\u0275\u0275reference(7),le=c.\u0275\u0275reference(19);c.\u0275\u0275classProp("inner-input-box-with-rollups",P.capabilities.supportsRollup),c.\u0275\u0275advance(3),c.\u0275\u0275property("ngIf",P.capabilities.supportMultipleValuesEditing&&P.capabilities.editMultipleValues&&!P.capabilities.supportsRollup),c.\u0275\u0275advance(2),c.\u0275\u0275property("ngIf",!P.isCategoricalFormat)("ngIfElse",q),c.\u0275\u0275advance(3),c.\u0275\u0275property("ngIf",P.capabilities.supportsRollup),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",P.capabilities.connectCurrentValueToData&&!P.capabilities.supportsRollup),c.\u0275\u0275advance(1),c.\u0275\u0275classProp("inner-input-box-with-rollups",P.capabilities.supportsRollup),c.\u0275\u0275advance(3),c.\u0275\u0275textInterpolate1(" ",c.\u0275\u0275pipeBind1(14,15,P.capabilities.supportMultipleTargetsEditing?null!=P.displayedGoal.metadata&&P.displayedGoal.metadata.showFinalTarget?"Target_Final":"Target_Next":"Target")," "),c.\u0275\u0275advance(2),c.\u0275\u0275property("ngIf",P.capabilities.supportMultipleTargetsEditing&&P.capabilities.editMultipleTargets&&!P.capabilities.supportsRollup),c.\u0275\u0275advance(2),c.\u0275\u0275property("ngIf",!P.isCategoricalFormat)("ngIfElse",le),c.\u0275\u0275advance(3),c.\u0275\u0275property("ngIf",P.capabilities.supportsRollup),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",P.capabilities.connectTargetValueToData&&!P.capabilities.supportsRollup)}},dependencies:[ae.NgForOf,ae.NgIf,J.YN,J.Kr,J.Fj,J.EJ,J.JJ,J.On,N.X,k.d,he.Q,pe.F],styles:["[_nghost-%COMP%]{display:inline-flex}.inner-input-box-with-rollups[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:center}.right-padding[_ngcontent-%COMP%]{padding-right:8px}.right-margin[_ngcontent-%COMP%]{margin-right:4px}.select-categorical-value[_ngcontent-%COMP%], .select-categorical-target[_ngcontent-%COMP%]{width:100%;height:32px}.value-input-title[_ngcontent-%COMP%], .target-input-title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.edit-targets-title[_ngcontent-%COMP%]{padding-top:9px;padding-bottom:4px}.pbi-text-field-error-message[_ngcontent-%COMP%]{fill:var(--fluent-theme-error-dark-color, #A80000);color:var(--fluent-theme-error-dark-color, #A80000)}  #goal-edit-value-formatting{background-color:var(--fluent-theme-neutral-lighter-alt-color, #FAF9F8)}  #goal-edit-value-formatting .value-formatting-box .result{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);color:var(--gray-180, #252423);line-height:20px;height:20px;padding:12px 12px 8px;border-bottom:1px solid var(--fluent-theme-neutral-tertiary-alt-color, #C8C6C4)}  #goal-edit-value-formatting .value-formatting-box mat-select{height:28px;border:1px solid var(--gray-110, #8A8886);border-radius:2px}  #goal-edit-value-formatting .value-formatting-box mat-select .mat-select-value{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);color:var(--fluent-theme-neutral-primary-color, #323130);line-height:20px}  #goal-edit-value-formatting .value-formatting-box mat-select .mat-select-arrow{color:var(--gray-140, #484644);padding-right:14px}  #goal-edit-value-formatting .value-formatting-box num-up-down .inputRange{height:28px;border:1px solid var(--gray-110, #8A8886);border-radius:2px}  #goal-edit-value-formatting .value-formatting-box num-up-down .inputRange .inputUpDown{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);color:var(--fluent-theme-neutral-primary-color, #323130);line-height:20px}  #goal-edit-value-formatting .value-formatting-box num-up-down label{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);line-height:20px}  #goal-edit-value-formatting .value-formatting-box .valueFormatterToggleButtonsGroup .btn{background-color:transparent;border:none}  #goal-edit-value-formatting .value-formatting-box .valueFormatterToggleButtonsGroup .btn:hover{background-color:var(--fluent-theme-neutral-quarter-alt-color, #E1DFDD)}",".cell[_ngcontent-%COMP%]{border:none;box-sizing:border-box}.cell-indent[_ngcontent-%COMP%]{width:36px}.cell-left-edge[_ngcontent-%COMP%]{border-top-left-radius:4px;border-bottom-left-radius:4px}.cell-right-edge[_ngcontent-%COMP%]{border-top-right-radius:4px;border-bottom-right-radius:4px}.cell-box[_ngcontent-%COMP%]{display:flex;height:100%}.cell-box[_ngcontent-%COMP%]   .color-box[_ngcontent-%COMP%]{min-width:6px;width:6px;border-top-left-radius:4px;border-bottom-left-radius:4px}[_nghost-%COMP%]   td[_ngcontent-%COMP%]{height:100px}[_nghost-%COMP%]   .select-checkmark[_ngcontent-%COMP%]{margin-right:15px}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]{background-color:var(--scorecard-tableEditRowBackgroundColor);color:var(--scorecard-tableEditRowForegroundColor);border-top:1px solid var(--fluent-theme-neutral-light-color, #EDEBE9);border-bottom:1px solid var(--fluent-theme-neutral-light-color, #EDEBE9)}[_nghost-%COMP%]   .cell.cell-right-edge[_ngcontent-%COMP%]{border-right:1px solid var(--fluent-theme-neutral-light-color, #EDEBE9)}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]   .cell-box-with-rollups[_ngcontent-%COMP%]   .edit-row-content[_ngcontent-%COMP%]{padding-left:12px;padding-right:12px}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]   .cell-box-with-rollups[_ngcontent-%COMP%]   goal-value-input[_ngcontent-%COMP%]{flex:none;max-width:none;min-width:392px}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]   .cell-box-with-rollups[_ngcontent-%COMP%]   .inner-input-box-with-rollups[_ngcontent-%COMP%]{max-width:none}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]   .cell-box-with-rollups[_ngcontent-%COMP%]   .input-box-with-rollups[_ngcontent-%COMP%]{width:104px;max-width:104px;min-width:auto}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]   .cell-box-with-rollups[_ngcontent-%COMP%]   .input-box-with-rollups[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:4px 6px}[_nghost-%COMP%]:hover   .select-checkmark[_ngcontent-%COMP%], [_nghost-%COMP%]   .select-checkmark.box-checked[_ngcontent-%COMP%]{visibility:visible}[_nghost-%COMP%]   .checkmark-td[_ngcontent-%COMP%]{width:35px;max-width:35px}[_nghost-%COMP%]   .checkmark-td.bulk-editing-off[_ngcontent-%COMP%]{width:0px;max-width:0px}[_nghost-%COMP%]   .select-checkmark[_ngcontent-%COMP%]{visibility:hidden;margin-right:15px}[_nghost-%COMP%]   .select-checkmark[_ngcontent-%COMP%]     pbi-checkbox{margin-bottom:0}[_nghost-%COMP%]   .input-title[_ngcontent-%COMP%]{font-size:var(--lg-font-size, 16px);font-weight:var(--font-weight-semi-bold, 600);padding-top:9px;padding-bottom:4px}[_nghost-%COMP%]   .input-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{vertical-align:middle;padding:0}[_nghost-%COMP%]   .input-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{cursor:pointer}[_nghost-%COMP%]   .edit-row-content[_ngcontent-%COMP%]{display:flex;flex:1;padding-left:20px;padding-right:20px;width:1000px;min-width:1000px}[_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);height:32px;padding:6px 8px;box-sizing:border-box;color:var(--scorecard-tableInputForegroundColor);background:var(--scorecard-tableInputBackgroundColor);border:1px solid var(--gray-110, #8A8886);border-radius:2px}[_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{filter:brightness(90%)}[_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:invalid{border:2px solid var(--fluent-theme-error-dark-alt-color, #D83B01);outline-color:var(--fluent-theme-error-dark-alt-color, #D83B01)}[_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   input[readonly][_ngcontent-%COMP%]{filter:brightness(90%)}[_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-input-placeholder, [_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:-ms-input-placeholder, [_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::placeholder{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);color:var(--scorecard-tableInputForegroundColor)}[_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{padding:0;margin:0}[_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-outer-spin-button, [_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}[_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}[_nghost-%COMP%]   .right-padding[_ngcontent-%COMP%]{padding-right:8px}[_nghost-%COMP%]   .input-action-txt[_ngcontent-%COMP%]{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);color:var(--scorecard-tableEditRowForegroundColor);padding-top:4px}[_nghost-%COMP%]   .input-action-txt[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{color:var(--scorecard-tableRowLinkColor);cursor:pointer;text-decoration:none;background-color:transparent;border:none;padding:0}[_nghost-%COMP%]   .input-action-txt[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]:hover{color:var(--fluent-theme-link-darker-color, #005A9E)}[_nghost-%COMP%]   .input-action-txt[_ngcontent-%COMP%]   .link.inactive[_ngcontent-%COMP%]{color:var(--fluent-theme-neutral-tertia-color, #A19F9D);pointer-events:none}[_nghost-%COMP%]   .divider[_ngcontent-%COMP%]{padding-top:8px;padding-bottom:8px}[_nghost-%COMP%]   .divider[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:1px;height:100%;background-color:var(--gray-80, #B3B0AD);margin:0 12px}[_nghost-%COMP%]   .width-override[_ngcontent-%COMP%]{width:24px}[_nghost-%COMP%]     .mat-form-field{background:var(--scorecard-tableInputBackgroundColor)!important}[_nghost-%COMP%]     emails-list-modern.disabled .mat-form-field{filter:brightness(95%)}[_nghost-%COMP%]   .goal-owners-input[_ngcontent-%COMP%]{padding-bottom:9px}[_nghost-%COMP%]   goal-value-input[_ngcontent-%COMP%]{flex:1 0 260px;max-width:400px}[_nghost-%COMP%]   .input-box-xs[_ngcontent-%COMP%]{flex:1 1 100px;max-width:140px;min-width:110px}[_nghost-%COMP%]   .input-box-sm[_ngcontent-%COMP%]{flex:1 1 100px;max-width:200px;min-width:140px}[_nghost-%COMP%]   .input-box-md[_ngcontent-%COMP%]{flex:1 1 200px;max-width:300px;min-width:130px}[_nghost-%COMP%]   .input-box-lg[_ngcontent-%COMP%]{flex:1 1 250px;min-width:150px}[_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),U}()},39947:function(ct,Ge,n){"use strict";n.d(Ge,{Q:function(){return v}});var t=n(98925),i=n(50423),w=n(65181),a=n(20930),d=n(77476),p=n(57746),l=n(55710),c=n(86663),y=n(74913),r=n(85102),C=function(I){return{isNew:I}};function m(E,I){if(1&E&&(i.\u0275\u0275elementStart(0,"span",15),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&E){var H=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction1(2,C,H.goal.isNew&&!H.selectedValue)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate(H.currentStatus)}}function k(E,I){1&E&&i.\u0275\u0275element(0,"tri-svg-icon",16),2&E&&i.\u0275\u0275property("name","link_20_regular")}var O=function(I){return{selected:I}};function s(E,I){if(1&E){var H=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",6),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(H);var ie=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(ie.onValueSelect(ie.allGoalValueOptions[2].value))}),i.\u0275\u0275element(1,"tri-svg-icon",7),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd()}if(2&E){var G=i.\u0275\u0275nextContext();i.\u0275\u0275property("disabled",!G.capabilities.selectMultiple)("ngClass",i.\u0275\u0275pureFunction1(5,O,(null==G.selectedValue?null:G.selectedValue.type)===G.allGoalValueOptions[2].value.type)),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngClass",(null==G.selectedValue?null:G.selectedValue.type)===G.allGoalValueOptions[2].value.type?"show-checkmark":"hide-checkmark")("name","checkmark_20_regular"),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",G.allGoalValueOptions[2].displayName," ")}}function ne(E,I){if(1&E){var H=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",17),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(H);var ie=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(ie.onValueSelect(ie.allGoalValueOptions[1].value))}),i.\u0275\u0275element(1,"tri-svg-icon",18),i.\u0275\u0275text(2),i.\u0275\u0275pipe(3,"localize"),i.\u0275\u0275elementEnd()}if(2&E){var G=i.\u0275\u0275nextContext();i.\u0275\u0275property("disabled",!G.capabilities.selectConnect),i.\u0275\u0275advance(1),i.\u0275\u0275property("name","edit_20_regular"),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind1(3,3,"Rollups_Connect_Edit")," ")}}function ee(E,I){if(1&E){var H=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",17),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(H);var ie=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(ie.onValueSelect(ie.allGoalValueOptions[2].value))}),i.\u0275\u0275element(1,"tri-svg-icon",18),i.\u0275\u0275text(2),i.\u0275\u0275pipe(3,"localize"),i.\u0275\u0275elementEnd()}if(2&E){var G=i.\u0275\u0275nextContext();i.\u0275\u0275property("disabled",!G.capabilities.selectMultiple),i.\u0275\u0275advance(1),i.\u0275\u0275property("name","edit_20_regular"),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind1(3,3,G.isGoalCurrentValuePicker?"Rollups_Multiple_Values_Edit":"Rollups_Multiple_Targets_Edit")," ")}}function Z(E,I){if(1&E){var H=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"button",17),i.\u0275\u0275listener("click",function(){var ae=i.\u0275\u0275restoreView(H).$implicit,J=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(J.onSelectRollup(ae))}),i.\u0275\u0275element(2,"tri-svg-icon",19),i.\u0275\u0275text(3),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()}if(2&E){var G=I.$implicit,Y=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("disabled",!Y.capabilities.selectRollup),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngClass",(null==Y.selectedValue?null:Y.selectedValue.rollupType)===G?"show-checkmark":"hide-checkmark")("name","checkmark_20_regular"),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",Y.metricRollupDisplayNames[G]," ")}}var v=function(){function E(I,H,G){this.localizationService=I,this.changeDetector=H,this.goalsTutorialService=G,this.onCurrentSelection=new i.EventEmitter,this.MetricRollupOptions=[1,2,4,3],this.isSelected=!1,this.isSubmetricSelected=!1,this.capabilities={},this.allGoalValueOptions=[],this.metricRollupDisplayNames={},this.setOptions()}return E.prototype.ngOnInit=function(){this.isGoalCurrentValuePicker=1===this.goalValueType},E.prototype.ngOnChanges=function(I){var H,G;if(I.goal&&(this.isCategorical=!!this.goal.valuesCategoryId,this.showGoalRollupsCoachmark&&this.goalsTutorialService.startGoalRollupsTutorial()),I.goalCapabilities&&(this.capabilities={editCalculation:this.goalCapabilities.editCalculationType,selectManual:!0,selectRollup:this.goalCapabilities.usePickerRollup,selectConnect:this.isGoalCurrentValuePicker?this.goalCapabilities.connectCurrentValueToData:this.goalCapabilities.connectTargetValueToData,selectMultiple:this.isGoalCurrentValuePicker?this.goalCapabilities.editMultipleValues:this.goalCapabilities.editMultipleTargets}),I.currentGoalValueTypeSelection){if(_.isUndefined(null===(G=null===(H=I.currentGoalValueTypeSelection)||void 0===H?void 0:H.currentValue)||void 0===G?void 0:G.rollupType))this.isSubmetricSelected=!1,this.selectedValue=I.currentGoalValueTypeSelection.currentValue,this.currentStatus=void 0===this.selectedValue?this.localizationService.get("Set_Up"):this.allGoalValueOptions[I.currentGoalValueTypeSelection.currentValue.type].buttonText;else{this.isSubmetricSelected=!0,this.selectedValue=I.currentGoalValueTypeSelection.currentValue;var Y=(0,t.t)(I.currentGoalValueTypeSelection.currentValue.rollupType);this.selectedValue.rollupType=Y,this.currentStatus=void 0===this.selectedValue?this.localizationService.get("Set_Up"):this.metricRollupDisplayNames[Y]}this.changeDetector.markForCheck()}},E.prototype.setOptions=function(){this.metricRollupDisplayNames=(0,t.P)(this.localizationService),this.allGoalValueOptions=[{displayName:this.localizationService.get("Rollups_Manual_Metric"),value:{type:0},buttonText:this.localizationService.get("Rollups_Manual")},{displayName:this.localizationService.get("Rollups_Connect_To_Data"),value:{type:1},buttonText:""},{displayName:this.localizationService.get("Rollups_Multiple_Targets"),value:{type:2},buttonText:this.localizationService.get("Rollups_Multiple")}]},E.prototype.onValueSelect=function(I){this.onCurrentSelection.emit(I)},E.prototype.onSelectRollup=function(I){this.onCurrentSelection.emit({type:4,rollupType:I})},E.\u0275fac=function(H){return new(H||E)(i.\u0275\u0275directiveInject(w.o),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(a.N))},E.\u0275cmp=i.\u0275\u0275defineComponent({type:E,selectors:[["goal-value-type-picker"]],inputs:{goal:"goal",hasMultipleTargets:"hasMultipleTargets",goalValueType:"goalValueType",currentGoalValueTypeSelection:"currentGoalValueTypeSelection",goalCapabilities:"goalCapabilities",showGoalRollupsCoachmark:"showGoalRollupsCoachmark"},outputs:{onCurrentSelection:"onCurrentSelection"},features:[i.\u0275\u0275NgOnChangesFeature],decls:26,vars:35,consts:[["mat-button","","cdkMonitorElementFocus","","data-testid","goal-value-input-menu-btn",1,"goal-value-input-menu-trigger",3,"matMenuTriggerFor","disabled"],[3,"ngClass",4,"ngIf"],[3,"name",4,"ngIf"],[1,"chevron-down",3,"name"],["xPosition","before",1,"goal-value-input-menu",3,"overlapTrigger"],["goalValueInputMenu","matMenu"],["mat-menu-item","",3,"disabled","ngClass","click"],[1,"margin-right",3,"ngClass","name"],["mat-menu-item","",1,"goal-value-input-sub-menu-button","submetrics-menu-trigger",3,"disabled","matMenuTriggerFor"],["name","chevronrightmedium","size","mini"],["mat-menu-item","",3,"disabled","ngClass","click",4,"ngIf"],["mat-menu-item","",3,"disabled","click",4,"ngIf"],[1,"goal-value-input-sub-menu",3,"overlapTrigger"],["goalValueInputRollupsMenu","matMenu"],[4,"ngFor","ngForOf"],[3,"ngClass"],[3,"name"],["mat-menu-item","",3,"disabled","click"],[1,"margin-right",3,"name"],[1,"margin-right-sub-menu",3,"ngClass","name"]],template:function(H,G){if(1&H&&(i.\u0275\u0275elementStart(0,"button",0),i.\u0275\u0275pipe(1,"localize"),i.\u0275\u0275template(2,m,2,4,"span",1),i.\u0275\u0275template(3,k,1,1,"tri-svg-icon",2),i.\u0275\u0275element(4,"tri-svg-icon",3),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"mat-menu",4,5)(7,"button",6),i.\u0275\u0275listener("click",function(){return G.onValueSelect(G.allGoalValueOptions[0].value)}),i.\u0275\u0275element(8,"tri-svg-icon",7),i.\u0275\u0275text(9),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(10,"button",8)(11,"div"),i.\u0275\u0275element(12,"tri-svg-icon",7),i.\u0275\u0275text(13),i.\u0275\u0275pipe(14,"localize"),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(15,"pbi-icon",9),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(16,"button",6),i.\u0275\u0275listener("click",function(){return G.onValueSelect(G.allGoalValueOptions[1].value)}),i.\u0275\u0275element(17,"tri-svg-icon",7),i.\u0275\u0275text(18),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(19,s,3,7,"button",10),i.\u0275\u0275element(20,"mat-divider"),i.\u0275\u0275template(21,ne,4,5,"button",11),i.\u0275\u0275template(22,ee,4,5,"button",11),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(23,"mat-menu",12,13),i.\u0275\u0275template(25,Z,4,4,"ng-container",14),i.\u0275\u0275elementEnd()),2&H){var ye,Y=i.\u0275\u0275reference(6),ie=i.\u0275\u0275reference(24);i.\u0275\u0275property("matMenuTriggerFor",Y)("disabled",!G.capabilities.editCalculation),i.\u0275\u0275attribute("aria-label",null!==(ye=G.currentStatus)&&void 0!==ye?ye:i.\u0275\u0275pipeBind1(1,27,"Set_Up")),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",(null==G.selectedValue?null:G.selectedValue.type)!==G.allGoalValueOptions[1].value.type),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",(null==G.selectedValue?null:G.selectedValue.type)===G.allGoalValueOptions[1].value.type),i.\u0275\u0275advance(1),i.\u0275\u0275property("name","chevron_down_20_regular"),i.\u0275\u0275advance(1),i.\u0275\u0275property("overlapTrigger",!1),i.\u0275\u0275advance(2),i.\u0275\u0275property("disabled",!G.capabilities.selectManual||!G.isGoalCurrentValuePicker&&G.hasMultipleTargets)("ngClass",i.\u0275\u0275pureFunction1(31,O,(null==G.selectedValue?null:G.selectedValue.type)===G.allGoalValueOptions[0].value.type)),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngClass",(null==G.selectedValue?null:G.selectedValue.type)===G.allGoalValueOptions[0].value.type?"show-checkmark":"hide-checkmark")("name","checkmark_20_regular"),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",G.allGoalValueOptions[0].displayName," "),i.\u0275\u0275advance(1),i.\u0275\u0275property("disabled",!G.capabilities.selectRollup)("matMenuTriggerFor",ie),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngClass",G.isSubmetricSelected?"show-checkmark":"hide-checkmark")("name","checkmark_20_regular"),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(14,29,"Rollups_Use_Submetrics")),i.\u0275\u0275advance(3),i.\u0275\u0275property("disabled",!G.capabilities.selectConnect)("ngClass",i.\u0275\u0275pureFunction1(33,O,(null==G.selectedValue?null:G.selectedValue.type)===G.allGoalValueOptions[1].value.type)),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngClass",(null==G.selectedValue?null:G.selectedValue.type)===G.allGoalValueOptions[1].value.type?"show-checkmark":"hide-checkmark")("name","checkmark_20_regular"),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",G.allGoalValueOptions[1].displayName," "),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!G.isGoalCurrentValuePicker),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",!!G.goal.valueConnection&&G.isGoalCurrentValuePicker||!!G.goal.targetConnection&&!G.isGoalCurrentValuePicker),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!G.isCategorical&&G.isGoalCurrentValuePicker&&(null==G.selectedValue?null:G.selectedValue.type)===G.allGoalValueOptions[0].value.type||!G.isGoalCurrentValuePicker&&(null==G.selectedValue?null:G.selectedValue.type)===G.allGoalValueOptions[2].value.type),i.\u0275\u0275advance(1),i.\u0275\u0275property("overlapTrigger",!1),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngForOf",G.MetricRollupOptions)}},dependencies:[d.NgClass,d.NgForOf,d.NgIf,p.d,l.W0,l.tN,l.D8,c._,y.M,r.F],styles:['.goal-value-input-menu-trigger[_ngcontent-%COMP%]{padding:6px 8px;width:100%;background:none;border:1px solid var(--gray-110, #8A8886);border-radius:2px;display:flex;flex-direction:row}.goal-value-input-menu-trigger[_ngcontent-%COMP%]   pbi-icon[_ngcontent-%COMP%]{padding-left:4px;padding-top:4px}.goal-value-input-menu-trigger[_ngcontent-%COMP%]:active, .goal-value-input-menu-trigger[_ngcontent-%COMP%]:hover:not(:disabled){background-color:var(--gray-88, #E0E0E0)}.goal-value-input-menu-trigger[_ngcontent-%COMP%]:disabled{color:var(--gray-90, #A19F9D);background-color:var(--gray-20, #F3F2F1);border-color:var(--gray-20, #F3F2F1)}button[_ngcontent-%COMP%]{font-size:var(--md-font-size, 14px);color:var(--fluent-theme-neutral-primary-color, #323130);padding:6px 12px;height:32px}button[_ngcontent-%COMP%]   .isNew[_ngcontent-%COMP%]{color:var(--fluent-theme-link-darker-color, #005A9E)}button[_ngcontent-%COMP%]   tri-svg-icon.chevron-down[_ngcontent-%COMP%]{height:16px;width:16px;margin:2px;padding-left:4px}button[_ngcontent-%COMP%]   tri-svg-icon.margin-right[_ngcontent-%COMP%]{margin-right:8px}button[_ngcontent-%COMP%]   tri-svg-icon.margin-right-sub-menu[_ngcontent-%COMP%]{margin-right:6px}button[_ngcontent-%COMP%]   .show-checkmark[_ngcontent-%COMP%]{visibility:visible}button[_ngcontent-%COMP%]   .hide-checkmark[_ngcontent-%COMP%]{visibility:hidden}button[_ngcontent-%COMP%]:active, button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:var(--gray-96, #F5F5F5)}button[_ngcontent-%COMP%]:disabled   tri-svg-icon[_ngcontent-%COMP%]{opacity:50%}  .goal-value-input-menu-trigger .sort-icon .mat-icon{margin:0 4px}  .mat-menu-panel.goal-value-input-sub-menu{min-height:fit-content;transform:translateY(8px);width:100px;min-width:100px}  .goal-value-input-menu .mat-menu-item{padding-left:8px}  .goal-value-input-menu .mat-menu-content{width:190px;min-width:190px}  .goal-value-input-sub-menu .mat-menu-content{width:100px;min-width:100px}  .goal-value-input-sub-menu .mat-menu-content button{width:100px;min-width:100px}  .goal-rollups-tutorial.tutorial-popup .box{background-color:var(--gray-130, #605E5C)}  .goal-rollups-tutorial.tutorial-popup .box .arrow{background-color:var(--gray-130, #605E5C)}  .goal-rollups-tutorial.tutorial-popup .box .title{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--xlg-font-size, 20px);font-weight:var(--font-weight-semi-bold, 600)}  .goal-rollups-tutorial.tutorial-popup .box .text{margin:10px 10px 0;line-height:22px;font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-regular, 400)}.mat-menu-item[_ngcontent-%COMP%]{color:var(--gray-180, #252423);display:flex;flex-direction:row;align-items:center}.mat-menu-item[_ngcontent-%COMP%]   pbi-icon[_ngcontent-%COMP%]{display:flex}.mat-menu-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:inherit;display:flex;align-items:center}.mat-menu-item.goal-value-input-sub-menu-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.mat-menu-item[_ngcontent-%COMP%]:active, .mat-menu-item[_ngcontent-%COMP%]:hover{background-color:var(--gray-96, #F5F5F5)}.mat-menu-item[_ngcontent-%COMP%]:disabled{color:var(--gray-90, #A19F9D)}.selected[_ngcontent-%COMP%]{pointer-events:none;user-select:none;-webkit-user-select:none;-ms-user-select:none;-moz-user-select:none}'],changeDetection:0}),E}()},84522:function(ct,Ge,n){"use strict";n.d(Ge,{S:function(){return G}});var t=n(81337),i=n(14786),w=n(32293),a=n(11962),d=n(46544),p=n(30794),l=n(48787),c=n(70864),y=n(50423),r=n(65181),C=n(77476),m=n(44408),k=n(44641),O=n(24326),s=n(5432),ne=n(23873),ee=n(85102);function Z(Y,ie){if(1&Y&&y.\u0275\u0275element(0,"message-banner",12),2&Y){var ye=y.\u0275\u0275nextContext();y.\u0275\u0275property("viewModel",ye.messageBanner)}}function v(Y,ie){1&Y&&y.\u0275\u0275element(0,"mat-icon",13)}function E(Y,ie){1&Y&&y.\u0275\u0275element(0,"mat-icon",14)}function I(Y,ie){1&Y&&y.\u0275\u0275element(0,"pbi-spinner",15)}function H(Y,ie){if(1&Y){var ye=y.\u0275\u0275getCurrentView();y.\u0275\u0275elementStart(0,"div",16)(1,"tri-grid",17,18),y.\u0275\u0275listener("rowsChange",function(N){y.\u0275\u0275restoreView(ye);var he=y.\u0275\u0275nextContext();return y.\u0275\u0275resetView(he.onRowUpdate(N))}),y.\u0275\u0275elementEnd()()}if(2&Y){var ae=y.\u0275\u0275nextContext();y.\u0275\u0275advance(1),y.\u0275\u0275property("rows",ae.gridData)("columns",ae.columnsConfig)}}var G=function(){function Y(ie,ye,ae,J,N){this.dialogRef=ie,this.localizationService=ae,this.telemetryService=J,this.changeDetector=N,this.isFullScreen=!1,this.onDestroy$=new p.xQ,this.resultType=2,this.ValueColumnIndex=0,this.DateAddedColumnIndex=1,this.telemetryService.logEvent(i.Bn),this.goal$=ye.goal$,this.goalValues$=ye.goalValues$,this.onDoneCallback=ye.onDoneCallback,this.columnsConfig=[{name:this.localizationService.get("Visual_Tablix_Values"),type:"Number",width:Y.GridColumnWidthInPx},{name:this.localizationService.get("Date"),type:"Date",width:Y.GridColumnWidthInPx}],this.DuplicateCurrentValueDates={bannerType:1,iconName:Y.ErrorIcon,message:this.localizationService.get("Metrics_Values_Editor_Error_Duplicate_Current_Value_Dates")},this.MissingCurrentValueDate={bannerType:1,iconName:Y.ErrorIcon,message:this.localizationService.get("Metrics_Values_Editor_Error_Missing_Current_Value_Date")},this.MissingCurrentValue={bannerType:1,iconName:Y.ErrorIcon,message:this.localizationService.get("Metrics_Values_Editor_Error_Missing_Current_Value")}}return Y.prototype.ngOnInit=function(){var ie=this;this.goal$.pipe((0,l.q)(1)).subscribe(function(ye){ie.columnsConfig=[(0,t.pi)((0,t.pi)({},ie.columnsConfig[ie.ValueColumnIndex]),{formatString:ye.valuesFormatString}),(0,t.pi)((0,t.pi)({},ie.columnsConfig[ie.DateAddedColumnIndex]),{formatString:ye.datesFormatString})]}),this.goalValues$.pipe((0,l.q)(1)).subscribe(function(ye){ie.gridData=ye.map(function(ae){return[ae.value,new Date(ae.timestamp)]}),ie.changeDetector.markForCheck()})},Y.prototype.ngAfterViewInit=function(){var ie=this;this.columnsConfig=_.map(this.columnsConfig,function(ye){return ye.template=ie.formatSwitchCellTemplate.formatSwitchCell,ye})},Y.prototype.ngOnDestroy=function(){this.onDestroy$.next(),this.onDestroy$.complete()},Y.prototype.onRowUpdate=function(ie){this.gridData=ie},Y.prototype.toggleFullScreen=function(){this.isFullScreen?(this.dialogRef.updateSize("70%","80%"),this.isFullScreen=!1):(this.dialogRef.updateSize("100%","100%"),this.isFullScreen=!0)},Y.prototype.close=function(){this.telemetryService.logEvent(i.V8),this.dialogRef.close()},Y.prototype.onDone=function(){return(0,t.mG)(this,void 0,void 0,function(){var ie,ye,ae,J,N;return(0,t.Jh)(this,function(he){if(this.gridData=this.gridEditor.flushPendingChanges(),(ie=this.gridData.filter(function(pe){return!(_.isNil(pe[0])&&_.isNil(pe[1]))}).map(function(pe){return{timestamp:_.isNil(pe[1])?void 0:pe[1],value:_.isNil(pe[0])?void 0:pe[0]}})).find(function(pe){return _.isNil(pe.timestamp)&&!_.isNil(pe.value)}))return this.messageBanner=this.MissingCurrentValueDate,[2];if(ie.find(function(pe){return!_.isNil(pe.timestamp)&&_.isNil(pe.value)}))return this.messageBanner=this.MissingCurrentValue,[2];for(ye=new Set,ae=0,J=ie;ae<J.length;ae++){if(ye.has((N=J[ae].timestamp).getTime()))return this.messageBanner=this.DuplicateCurrentValueDates,[2];ye.add(N.getTime())}return this.onDoneCallback(ie.map(function(pe){return{timestamp:pe.timestamp.toISOString(),value:pe.value}}),this.columnsConfig[this.ValueColumnIndex].formatString),this.telemetryService.logEvent(i.GW),this.dialogRef.close(),[2]})})},Y.prototype.valueFormatStringChanged=function(ie){this.columnsConfig=[(0,t.pi)((0,t.pi)({},this.columnsConfig[this.ValueColumnIndex]),{formatString:ie}),this.columnsConfig[1]]},Y.ErrorIcon="pbi-glyph-blocked2",Y.GridColumnWidthInPx=200,Y.\u0275fac=function(ye){return new(ye||Y)(y.\u0275\u0275directiveInject(w.so),y.\u0275\u0275directiveInject(w.WI),y.\u0275\u0275directiveInject(r.o),y.\u0275\u0275directiveInject(d.y0),y.\u0275\u0275directiveInject(y.ChangeDetectorRef))},Y.\u0275cmp=y.\u0275\u0275defineComponent({type:Y,selectors:[["goal-values-editor"]],viewQuery:function(ye,ae){if(1&ye&&(y.\u0275\u0275viewQuery(a.oY,5),y.\u0275\u0275viewQuery(c.F,5)),2&ye){var J=void 0;y.\u0275\u0275queryRefresh(J=y.\u0275\u0275loadQuery())&&(ae.gridEditor=J.first),y.\u0275\u0275queryRefresh(J=y.\u0275\u0275loadQuery())&&(ae.formatSwitchCellTemplate=J.first)}},decls:27,vars:29,consts:[[3,"viewModel",4,"ngIf"],[1,"title"],["mat-icon-button","",1,"pbi-icon-button",3,"click"],["class","glyph-small","fontIcon","pbi-glyph-fullscreen",4,"ngIf"],["class","glyph-small","fontIcon","pbi-glyph-fullscreenexit",4,"ngIf"],[1,"values-editor-value-formatting-box"],[1,"goals-value-formatting",3,"formatString","dataType","formatStringChange"],["class","pbi-spinner-large",4,"ngIf","ngIfElse"],["showGrid",""],[1,"actions"],[1,"pbi-fluent-button","primary",3,"disabled","click"],[1,"pbi-fluent-button","secondary",3,"click"],[3,"viewModel"],["fontIcon","pbi-glyph-fullscreen",1,"glyph-small"],["fontIcon","pbi-glyph-fullscreenexit",1,"glyph-small"],[1,"pbi-spinner-large"],[1,"grid-container"],[3,"rows","columns","rowsChange"],["gridEditor",""]],template:function(ye,ae){if(1&ye&&(y.\u0275\u0275template(0,Z,1,1,"message-banner",0),y.\u0275\u0275elementStart(1,"header")(2,"div",1),y.\u0275\u0275text(3),y.\u0275\u0275pipe(4,"localize"),y.\u0275\u0275elementEnd(),y.\u0275\u0275elementStart(5,"button",2),y.\u0275\u0275listener("click",function(){return ae.toggleFullScreen()}),y.\u0275\u0275pipe(6,"localize"),y.\u0275\u0275template(7,v,1,0,"mat-icon",3),y.\u0275\u0275template(8,E,1,0,"mat-icon",4),y.\u0275\u0275elementEnd()(),y.\u0275\u0275elementStart(9,"section"),y.\u0275\u0275text(10),y.\u0275\u0275pipe(11,"localize"),y.\u0275\u0275elementEnd(),y.\u0275\u0275elementStart(12,"div",5)(13,"value-formatting",6),y.\u0275\u0275listener("formatStringChange",function(he){return ae.valueFormatStringChanged(he)}),y.\u0275\u0275elementEnd()(),y.\u0275\u0275template(14,I,1,0,"pbi-spinner",7),y.\u0275\u0275template(15,H,3,2,"ng-template",null,8,y.\u0275\u0275templateRefExtractor),y.\u0275\u0275element(17,"format-switch-cell-template"),y.\u0275\u0275elementStart(18,"div",9)(19,"button",10),y.\u0275\u0275listener("click",function(){return ae.onDone()}),y.\u0275\u0275pipe(20,"localize"),y.\u0275\u0275text(21),y.\u0275\u0275pipe(22,"localize"),y.\u0275\u0275elementEnd(),y.\u0275\u0275elementStart(23,"button",11),y.\u0275\u0275listener("click",function(){return ae.close()}),y.\u0275\u0275pipe(24,"localize"),y.\u0275\u0275text(25),y.\u0275\u0275pipe(26,"localize"),y.\u0275\u0275elementEnd()()),2&ye){var J=y.\u0275\u0275reference(16);y.\u0275\u0275property("ngIf",ae.messageBanner),y.\u0275\u0275advance(3),y.\u0275\u0275textInterpolate(y.\u0275\u0275pipeBind1(4,15,"Metrics_Values_Editor_Title")),y.\u0275\u0275advance(2),y.\u0275\u0275attribute("aria-label",y.\u0275\u0275pipeBind1(6,17,"Fullscreen_Toggle")),y.\u0275\u0275advance(2),y.\u0275\u0275property("ngIf",!ae.isFullScreen),y.\u0275\u0275advance(1),y.\u0275\u0275property("ngIf",ae.isFullScreen),y.\u0275\u0275advance(2),y.\u0275\u0275textInterpolate1(" ",y.\u0275\u0275pipeBind1(11,19,"Metrics_Values_Editor_Description"),"\n"),y.\u0275\u0275advance(3),y.\u0275\u0275property("formatString",ae.columnsConfig[0].formatString)("dataType",ae.resultType),y.\u0275\u0275advance(1),y.\u0275\u0275property("ngIf",!ae.gridData)("ngIfElse",J),y.\u0275\u0275advance(5),y.\u0275\u0275property("disabled",!ae.gridData),y.\u0275\u0275attribute("aria-label",y.\u0275\u0275pipeBind1(20,21,"Done_ButtonText")),y.\u0275\u0275advance(2),y.\u0275\u0275textInterpolate1(" ",y.\u0275\u0275pipeBind1(22,23,"Done_ButtonText")," "),y.\u0275\u0275advance(2),y.\u0275\u0275attribute("aria-label",y.\u0275\u0275pipeBind1(24,25,"PBI_Button_Label_Cancel")),y.\u0275\u0275advance(2),y.\u0275\u0275textInterpolate1(" ",y.\u0275\u0275pipeBind1(26,27,"PBI_Button_Label_Cancel")," ")}},dependencies:[C.NgIf,m.Hw,k.A,O.k,s.d,ne.o,c.F,ee.F],styles:['[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}[_nghost-%COMP%]     .values-editor-value-formatting-box mat-select{height:28px;border:1px solid var(--gray-110, #8A8886);border-radius:2px}[_nghost-%COMP%]     .values-editor-value-formatting-box mat-select .mat-select-value{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);color:var(--fluent-theme-neutral-primary-color, #323130);line-height:20px}[_nghost-%COMP%]     .values-editor-value-formatting-box mat-select .mat-select-arrow{color:var(--gray-140, #484644);padding-right:14px}[_nghost-%COMP%]     .values-editor-value-formatting-box num-up-down .inputRange{height:28px;border:1px solid var(--gray-110, #8A8886);border-radius:2px}[_nghost-%COMP%]     .values-editor-value-formatting-box num-up-down .inputRange .inputUpDown{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);color:var(--fluent-theme-neutral-primary-color, #323130);line-height:20px}[_nghost-%COMP%]     .values-editor-value-formatting-box num-up-down label{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);line-height:20px}[_nghost-%COMP%]     .values-editor-value-formatting-box .valueFormatterToggleButtonsGroup .btn{background-color:transparent;border:none}[_nghost-%COMP%]     .values-editor-value-formatting-box .valueFormatterToggleButtonsGroup .btn:hover{background-color:var(--fluent-theme-neutral-quarter-alt-color, #E1DFDD)}header[_ngcontent-%COMP%]{color:var(--fluent-theme-neutral-dark-color, #201F1E);display:flex;flex-direction:row;align-items:center;justify-content:space-between}header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--xlg-font-size, 20px);font-weight:var(--font-weight-semi-bold, 600)}header[_ngcontent-%COMP%], section[_ngcontent-%COMP%], tri-grid[_ngcontent-%COMP%], .values-editor-value-formatting-box[_ngcontent-%COMP%]{margin-bottom:16px}.actions[_ngcontent-%COMP%]{display:flex;justify-content:end;gap:8px}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   pbi-spinner[_ngcontent-%COMP%]{margin:5px 5px 0 0}.pbi-spinner-large[_ngcontent-%COMP%]{height:100%}.grid-container[_ngcontent-%COMP%]{flex-grow:1}'],changeDetection:0}),Y}()},33279:function(ct,Ge,n){"use strict";n.d(Ge,{E:function(){return te}});var t=n(81337),i=n(60042),w=n(29730),a=n(34340),d=n(72489),p=n(73221),l=n(14172),c=n(48787),y=n(17653),r=n(81905),C=n(83317),m=n(50423),k=n(21719),O=n(87426),s=n(65181),ne=n(73911),ee=n(49223),Z=n(64929),v=n(93379),E=n(62087),I=n(77476),H=n(18460),G=n(59968),Y=n(55710),ie=n(86663),ye=n(36858),ae=n(85353),J=n(43847),N=n(85102),he=["nameCell"],pe=["hierarchyGoalCell"],ce=["columnHeader"];function ge(U,Q){if(1&U){var B=m.\u0275\u0275getCurrentView();m.\u0275\u0275elementStart(0,"tree-list",6),m.\u0275\u0275listener("onResizeColumn",function(le){m.\u0275\u0275restoreView(B);var de=m.\u0275\u0275nextContext();return m.\u0275\u0275resetView(de.onResizeColumn(le))})("onExpansionChange",function(le){m.\u0275\u0275restoreView(B);var de=m.\u0275\u0275nextContext();return m.\u0275\u0275resetView(de.onExpansionChange(le))}),m.\u0275\u0275elementEnd()}if(2&U){var P=m.\u0275\u0275nextContext();m.\u0275\u0275classMap(P.heatmapClassname),m.\u0275\u0275property("columns",P.columns)("data",P.goals)("expandedNodeIds",P.expandedGoalIds)("getChildren",P.getSubgoals)("rowHash",P.rowHash)("rowHeight",P.rowHeight)("rowSpacing",P.rowSpacing)("stickyFirstColumn",!0)}}function se(U,Q){if(1&U&&m.\u0275\u0275element(0,"pbi-icon",10),2&U){m.\u0275\u0275nextContext();var B=m.\u0275\u0275reference(5);m.\u0275\u0275property("pbiTooltip",B)}}function xe(U,Q){1&U&&(m.\u0275\u0275elementStart(0,"div"),m.\u0275\u0275text(1),m.\u0275\u0275pipe(2,"localize"),m.\u0275\u0275elementEnd()),2&U&&(m.\u0275\u0275advance(1),m.\u0275\u0275textInterpolate1(" ",m.\u0275\u0275pipeBind1(2,1,"Metrics_Tooltip_LinkedHierarchical")," "))}function me(U,Q){1&U&&(m.\u0275\u0275elementStart(0,"div")(1,"span",15),m.\u0275\u0275text(2),m.\u0275\u0275pipe(3,"localize"),m.\u0275\u0275elementEnd(),m.\u0275\u0275text(4),m.\u0275\u0275pipe(5,"localize"),m.\u0275\u0275elementEnd()),2&U&&(m.\u0275\u0275advance(2),m.\u0275\u0275textInterpolate(m.\u0275\u0275pipeBind1(3,2,"CurrentValue")),m.\u0275\u0275advance(2),m.\u0275\u0275textInterpolate1(" ",m.\u0275\u0275pipeBind1(5,4,"Metrics_Tooltip_ValueAddedManually")," "))}function Oe(U,Q){1&U&&(m.\u0275\u0275elementStart(0,"div")(1,"span",15),m.\u0275\u0275text(2),m.\u0275\u0275pipe(3,"localize"),m.\u0275\u0275elementEnd(),m.\u0275\u0275text(4),m.\u0275\u0275pipe(5,"localize"),m.\u0275\u0275elementEnd()),2&U&&(m.\u0275\u0275advance(2),m.\u0275\u0275textInterpolate(m.\u0275\u0275pipeBind1(3,2,"Role_DisplayName_TargetValue")),m.\u0275\u0275advance(2),m.\u0275\u0275textInterpolate1(" ",m.\u0275\u0275pipeBind1(5,4,"Metrics_Tooltip_ValueAddedManually")," "))}function Ce(U,Q){if(1&U&&(m.\u0275\u0275template(0,me,6,6,"div",14),m.\u0275\u0275template(1,Oe,6,6,"div",14)),2&U){var B=m.\u0275\u0275nextContext(2).data;m.\u0275\u0275property("ngIf",!B.valueConnection),m.\u0275\u0275advance(1),m.\u0275\u0275property("ngIf",!B.targetConnection)}}function Le(U,Q){if(1&U&&(m.\u0275\u0275elementStart(0,"div",11),m.\u0275\u0275template(1,xe,3,3,"div",12),m.\u0275\u0275template(2,Ce,2,2,"ng-template",null,13,m.\u0275\u0275templateRefExtractor),m.\u0275\u0275elementEnd()),2&U){var B=m.\u0275\u0275reference(3),P=m.\u0275\u0275nextContext().data;m.\u0275\u0275advance(1),m.\u0275\u0275property("ngIf",P.isLinked)("ngIfElse",B)}}function ze(U,Q){if(1&U){var B=m.\u0275\u0275getCurrentView();m.\u0275\u0275elementStart(0,"div",7),m.\u0275\u0275listener("click",function(){var de=m.\u0275\u0275restoreView(B).data,V=m.\u0275\u0275nextContext();return m.\u0275\u0275resetView(V.onGoalNameClicked(de))}),m.\u0275\u0275elementStart(1,"span"),m.\u0275\u0275text(2),m.\u0275\u0275elementEnd(),m.\u0275\u0275template(3,se,1,1,"pbi-icon",8),m.\u0275\u0275template(4,Le,4,2,"ng-template",null,9,m.\u0275\u0275templateRefExtractor),m.\u0275\u0275elementEnd()}if(2&U){var P=Q.data;m.\u0275\u0275advance(2),m.\u0275\u0275textInterpolate(P.name),m.\u0275\u0275advance(1),m.\u0275\u0275property("ngIf",P.isLinked||!P.valueConnection||!P.targetConnection)}}function $e(U,Q){if(1&U){var B=m.\u0275\u0275getCurrentView();m.\u0275\u0275elementStart(0,"hierarchy-goal-cell",17),m.\u0275\u0275listener("click",function(){m.\u0275\u0275restoreView(B);var b=m.\u0275\u0275nextContext(),L=b.data,T=b.column,X=m.\u0275\u0275nextContext();return m.\u0275\u0275resetView(X.openGoalDetails(L,T.data))}),m.\u0275\u0275elementEnd()}if(2&U){var P=m.\u0275\u0275nextContext(),q=P.column,le=P.data,de=m.\u0275\u0275nextContext();m.\u0275\u0275property("goal",null==de.goalsByHierarchyItemIds[q.data.id]?null:de.goalsByHierarchyItemIds[q.data.id][le.id])("scorecard",de.scorecard)("displaySettings",de.displaySettings)("isSelected",q.data.id===de.activeItemId&&le.id===de.scorecard.activeGoalId)}}function We(U,Q){1&U&&m.\u0275\u0275template(0,$e,1,4,"hierarchy-goal-cell",16),2&U&&m.\u0275\u0275property("ngIf",!Q.data.isLinked||!Q.column.data.id)}function He(U,Q){if(1&U&&(m.\u0275\u0275elementContainerStart(0),m.\u0275\u0275elementStart(1,"div")(2,"span",29),m.\u0275\u0275text(3),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(4,"span"),m.\u0275\u0275text(5),m.\u0275\u0275elementEnd()(),m.\u0275\u0275elementContainerEnd()),2&U){var B=Q.$implicit;m.\u0275\u0275advance(3),m.\u0275\u0275textInterpolate(B.hierarchyName),m.\u0275\u0275advance(2),m.\u0275\u0275textInterpolate1(": ",B.levels.join(" > "),"")}}function Je(U,Q){1&U&&(m.\u0275\u0275elementStart(0,"span",29),m.\u0275\u0275text(1),m.\u0275\u0275pipe(2,"localize"),m.\u0275\u0275elementEnd()),2&U&&(m.\u0275\u0275advance(1),m.\u0275\u0275textInterpolate(m.\u0275\u0275pipeBind1(2,1,"Visual_Totals")))}function j(U,Q){if(1&U&&(m.\u0275\u0275template(0,He,6,2,"ng-container",12),m.\u0275\u0275template(1,Je,3,3,"ng-template",null,28,m.\u0275\u0275templateRefExtractor)),2&U){var B=m.\u0275\u0275reference(2),P=m.\u0275\u0275nextContext().column,q=m.\u0275\u0275nextContext();m.\u0275\u0275property("ngIf",q.hierarchyPathsByKey[P.key])("ngIfElse",B)}}function tt(U,Q){if(1&U){var B=m.\u0275\u0275getCurrentView();m.\u0275\u0275elementStart(0,"button",30),m.\u0275\u0275listener("click",function(){m.\u0275\u0275restoreView(B);var q=m.\u0275\u0275nextContext().column,le=m.\u0275\u0275nextContext();return m.\u0275\u0275resetView(le.removeColumn(q.data))}),m.\u0275\u0275element(1,"pbi-icon",31)(2,"span",32),m.\u0275\u0275elementEnd()}}function Ue(U,Q){if(1&U){var B=m.\u0275\u0275getCurrentView();m.\u0275\u0275elementStart(0,"button",24),m.\u0275\u0275listener("click",function(){m.\u0275\u0275restoreView(B);var le=m.\u0275\u0275nextContext(2);return m.\u0275\u0275resetView(le.hierarchyPane.showHeatmapDisplaySettingsPane())}),m.\u0275\u0275pipe(1,"async"),m.\u0275\u0275element(2,"pbi-icon",33)(3,"span",34),m.\u0275\u0275elementEnd()}if(2&U){var P=m.\u0275\u0275nextContext(2);m.\u0275\u0275property("disabled",m.\u0275\u0275pipeBind1(1,1,P.hierarchyPane.showHeatmapDisplaySettingsPane$))}}function oe(U,Q){if(1&U){var B=m.\u0275\u0275getCurrentView();m.\u0275\u0275elementStart(0,"button",18)(1,"span"),m.\u0275\u0275text(2),m.\u0275\u0275elementEnd(),m.\u0275\u0275element(3,"pbi-icon",19),m.\u0275\u0275elementEnd(),m.\u0275\u0275template(4,j,3,2,"ng-template",null,20,m.\u0275\u0275templateRefExtractor),m.\u0275\u0275elementStart(6,"mat-menu",21,22),m.\u0275\u0275template(8,tt,3,0,"button",23),m.\u0275\u0275elementStart(9,"button",24),m.\u0275\u0275listener("click",function(){m.\u0275\u0275restoreView(B);var b=m.\u0275\u0275nextContext();return m.\u0275\u0275resetView(b.hierarchyPane.showHeatmapConfigurationPane())}),m.\u0275\u0275pipe(10,"async"),m.\u0275\u0275element(11,"pbi-icon",25)(12,"span",26),m.\u0275\u0275elementEnd(),m.\u0275\u0275template(13,Ue,4,3,"button",27),m.\u0275\u0275pipe(14,"async"),m.\u0275\u0275elementEnd()}if(2&U){var P=Q.column,q=m.\u0275\u0275reference(5),le=m.\u0275\u0275reference(7),de=m.\u0275\u0275nextContext();m.\u0275\u0275property("matMenuTriggerFor",le)("pbiTooltip",q),m.\u0275\u0275attribute("aria-label",P.name),m.\u0275\u0275advance(2),m.\u0275\u0275textInterpolate(P.name),m.\u0275\u0275advance(4),m.\u0275\u0275property("overlapTrigger",!1),m.\u0275\u0275advance(2),m.\u0275\u0275property("ngIf",!!P.data.id),m.\u0275\u0275advance(1),m.\u0275\u0275property("disabled",m.\u0275\u0275pipeBind1(10,8,de.hierarchyPane.showHeatmapConfigurationPane$)),m.\u0275\u0275advance(4),m.\u0275\u0275property("ngIf",m.\u0275\u0275pipeBind1(14,10,de.canEditHeatmap$))}}function h(U,Q){if(1&U&&m.\u0275\u0275element(0,"pbi-lazy-load",35),2&U){var B=m.\u0275\u0275nextContext();m.\u0275\u0275property("modulePath",B.hierarchyModulePath)("componentId",B.heatmapConfigurationComponentId)}}function g(U,Q){if(1&U&&m.\u0275\u0275element(0,"pbi-lazy-load",36),2&U){var B=m.\u0275\u0275nextContext();m.\u0275\u0275property("modulePath",B.hierarchyModulePath)("componentId",B.heatmapDisplaySettingsComponentId)}}var u=function(U){return U.Name="name",U}({}),F="TOTAL";function W(U,Q,B,P){void 0===P&&(P=0);for(var q=0,le=U;q<le.length;q++){var de=le[q];if(_.isEmpty(de.children)||W(de.children,Q,B,P+1),Q[de.id]&&(delete Q[de.id],B.push((0,t.pi)((0,t.pi)({},de),{level:P}))),_.isEmpty(Q))return}}var te=function(U){function Q(B,P,q,le,de,V,b,L,T,X){var ue=U.call(this)||this;return ue.hierarchyPane=B,ue.hierarchyService=P,ue.detailsPaneLauncher=q,ue.changeDetector=le,ue.localization=de,ue.heatmapService=V,ue.scorecardService=b,ue.scorecardConfigurationService=L,ue.capabilityService=T,ue.expansionService=X,ue.columnsByKey={},ue.hierarchyPathsByKey={},ue.hierarchyModulePath="@powerbi/GoalsHierarchy/goals-hierarchy.module#GoalsHierarchyModule",ue.heatmapConfigurationComponentId="HeatmapConfigurationPaneComponentId",ue.heatmapDisplaySettingsComponentId="HeatmapDisplaySettingsPaneComponentId",ue.getSubgoals=function(Ne){return ue.getGoalNodes(Ne.subGoals,Ne)},ue.rowHash=function(Ne,Qe){return JSON.stringify(Qe)},ue.rowHeight=50,ue.rowSpacing=8,ue.canEditHeatmap$=ue.capabilityService.getScorecardCapabilities().pipe((0,l.U)(function(Ne){return Ne.editHeatmap})),ue}return(0,t.ZT)(Q,U),Q.prototype.ngOnInit=function(){var B=this;this.hierarchyPane.showHeatmapConfigurationPane();var P=this.scorecardService.getCurrentScorecard().hierarchyPaths;this.hierarchyService.getHierarchyItemsForPath(P).pipe((0,c.q)(1)).subscribe(function(q){return B.heatmapService.loadDefaultView(!0,!0,q)}),this.scorecardService.setActiveHierarchy(void 0),this.scorecardService.getScorecard().pipe((0,y.b)(function(q){B.scorecard=q,B.goals=B.getGoalNodes(q.goals),B.expandedGoalIds=B.expansionService.expandedGoalIds,B.changeDetector.markForCheck()}),(0,r.w)(function(q){return B.hierarchyService.getHierarchyItemsForPath(q.hierarchyPaths)}),(0,C.R)(this.onDestroy$)).subscribe(function(q){B.activeItemId=1===_.size(q)?q[0].id:void 0}),this.heatmapService.goalsByHierarchyItemId$.pipe((0,C.R)(this.onDestroy$)).subscribe(function(q){B.goalsByHierarchyItemIds=q,B.changeDetector.markForCheck()}),this.heatmapService.displaySettings$.pipe((0,C.R)(this.onDestroy$)).subscribe(function(q){B.displaySettings=q;var le="show-value-only";B.displaySettings.showCurrentValue&&B.displaySettings.showValueChange?le=B.displaySettings.showTargetValue?"show-change-target":"show-change-only":B.displaySettings.showCurrentValue&&B.displaySettings.showTargetValue&&(le="show-value-target"),B.heatmapClassname="heat-map "+le,B.changeDetector.markForCheck()})},Q.prototype.ngAfterViewInit=function(){var B=this;this.updateColumns([]),this.heatmapService.selectedHierarchyItems$.pipe((0,C.R)(this.onDestroy$)).subscribe(function(P){B.updateColumns(P),B.changeDetector.markForCheck()})},Q.prototype.getCachedColumn=function(B,P){return this.columnsByKey[B]||(this.columnsByKey[B]=P()),this.columnsByKey[B]},Q.prototype.updateColumns=function(B){var P=this,q=_.flatMap(Object.values(this.hierarchyService.hierarchyItems)),le=_.keyBy(B,function(V){var b;return null!==(b=V.id)&&void 0!==b?b:F}),de=[];W(q,le,de,0),le[F]&&(de.unshift(le[F]),delete le[F]),de.push.apply(de,Object.values(le)),B=de,this.columns=(0,t.ev)([this.getCachedColumn(u.Name,function(){return{key:u.Name,name:P.localization.get("Name"),width:400,cellTemplate:P.nameCell}})],_.map(B,function(V){return P.getCachedColumn(V.id,function(){return{key:V.id,name:(0,d.WU)(V.value),class:"column-center-name",resizable:!1,headerTemplate:P.columnHeader,cellTemplate:P.hierarchyGoalCell,data:V}})}),!0),B.forEach(function(V){if(V.id&&!P.hierarchyPathsByKey[V.id]){var b=(0,w.IX)(V);P.hierarchyPathsByKey[V.id]=P.hierarchyService.formatHierarchyItemPath(b)}})},Q.prototype.onGoalNameClicked=function(B){this.detailsPaneLauncher.openGoalDetails(this.scorecardService,B.id,a.E.Default,this.scorecardConfigurationService.getConfiguration()),this.changeDetector.markForCheck()},Q.prototype.openGoalDetails=function(B,P){var q;return(0,t.mG)(this,void 0,void 0,function(){return(0,t.Jh)(this,function(le){switch(le.label){case 0:return null!==(q=this.goalsByHierarchyItemIds[P?.id])&&void 0!==q&&q[B.id]?[4,this.scorecardService.setActiveHierarchy(P?.id?(0,w.t7)([P]):void 0)]:[3,2];case 1:le.sent(),this.detailsPaneLauncher.openGoalDetails(this.scorecardService,B.id,a.E.Default,this.scorecardConfigurationService.getConfiguration()),this.changeDetector.markForCheck(),le.label=2;case 2:return[2]}})})},Q.prototype.removeColumn=function(B){this.heatmapService.removeHierarchyItem(B)},Q.prototype.onResizeColumn=function(B){this.columns[B.column].width=B.width},Q.prototype.onExpansionChange=function(B){this.expansionService.expandGoals(B.added),this.expansionService.collapseGoals(B.removed)},Q.prototype.getGoalNodes=function(B,P){return _.map(_.filter(B,function(q){return!q.isNew&&!q.isHidden}),function(q,le){return(0,t.pi)((0,t.pi)({},q),{style:P?P.style:{"border-color":i.gT.ColorPalette[le%i.gT.ColorPalette.length]},class:!1===q.isFilterMatch?"goal-not-match":""})})},Q.\u0275fac=function(P){return new(P||Q)(m.\u0275\u0275directiveInject(k.D),m.\u0275\u0275directiveInject(O.G),m.\u0275\u0275directiveInject(a.c),m.\u0275\u0275directiveInject(m.ChangeDetectorRef),m.\u0275\u0275directiveInject(s.o),m.\u0275\u0275directiveInject(ne.$),m.\u0275\u0275directiveInject(ee.G),m.\u0275\u0275directiveInject(Z.V),m.\u0275\u0275directiveInject(v.Nw),m.\u0275\u0275directiveInject(E.l))},Q.\u0275cmp=m.\u0275\u0275defineComponent({type:Q,selectors:[["heat-map"]],viewQuery:function(P,q){if(1&P&&(m.\u0275\u0275viewQuery(he,5),m.\u0275\u0275viewQuery(pe,5),m.\u0275\u0275viewQuery(ce,5)),2&P){var le=void 0;m.\u0275\u0275queryRefresh(le=m.\u0275\u0275loadQuery())&&(q.nameCell=le.first),m.\u0275\u0275queryRefresh(le=m.\u0275\u0275loadQuery())&&(q.hierarchyGoalCell=le.first),m.\u0275\u0275queryRefresh(le=m.\u0275\u0275loadQuery())&&(q.columnHeader=le.first)}},features:[m.\u0275\u0275InheritDefinitionFeature],decls:11,vars:7,consts:[[3,"class","columns","data","expandedNodeIds","getChildren","rowHash","rowHeight","rowSpacing","stickyFirstColumn","onResizeColumn","onExpansionChange",4,"ngIf"],["nameCell",""],["hierarchyGoalCell",""],["columnHeader",""],["class","configuration-pane",3,"modulePath","componentId",4,"ngIf"],["class","display-settings-pane",3,"modulePath","componentId",4,"ngIf"],[3,"columns","data","expandedNodeIds","getChildren","rowHash","rowHeight","rowSpacing","stickyFirstColumn","onResizeColumn","onExpansionChange"],[1,"name",3,"click"],["class","name-info","name","info","size","mini",3,"pbiTooltip",4,"ngIf"],["infoTooltip",""],["name","info","size","mini",1,"name-info",3,"pbiTooltip"],[1,"goal-info-tooltip"],[4,"ngIf","ngIfElse"],["manualTooltip",""],[4,"ngIf"],[1,"tooltip-value-label"],[3,"goal","scorecard","displaySettings","isSelected","click",4,"ngIf"],[3,"goal","scorecard","displaySettings","isSelected","click"],["mat-button","","cdkMonitorElementFocus","",1,"heatmap-column-header",3,"matMenuTriggerFor","pbiTooltip"],["name","chevrondownsmall","size","mini",1,"chevrondown"],["hierarchyPathTooltip",""],["xPosition","after",1,"heatmap-column-menu",3,"overlapTrigger"],["heatmapColumnMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"disabled","click"],["name","edit","size","small",1,"icon"],["localize","MetricsCustomizeHeatmap"],["mat-menu-item","",3,"disabled","click",4,"ngIf"],["total",""],[1,"tooltip-hierarchy-name"],["mat-menu-item","",3,"click"],["name","delete","size","small",1,"icon"],["localize","MetricsHierarchy_Builder_Remove_Level"],["name","settings","size","small",1,"icon"],["localize","DisplaySettings_Open"],[1,"configuration-pane",3,"modulePath","componentId"],[1,"display-settings-pane",3,"modulePath","componentId"]],template:function(P,q){1&P&&(m.\u0275\u0275template(0,ge,1,10,"tree-list",0),m.\u0275\u0275template(1,ze,6,2,"ng-template",null,1,m.\u0275\u0275templateRefExtractor),m.\u0275\u0275template(3,We,1,1,"ng-template",null,2,m.\u0275\u0275templateRefExtractor),m.\u0275\u0275template(5,oe,15,12,"ng-template",null,3,m.\u0275\u0275templateRefExtractor),m.\u0275\u0275template(7,h,1,2,"pbi-lazy-load",4),m.\u0275\u0275pipe(8,"async"),m.\u0275\u0275template(9,g,1,2,"pbi-lazy-load",5),m.\u0275\u0275pipe(10,"async")),2&P&&(m.\u0275\u0275property("ngIf",q.scorecard),m.\u0275\u0275advance(7),m.\u0275\u0275property("ngIf",m.\u0275\u0275pipeBind1(8,3,q.hierarchyPane.showHeatmapConfigurationPane$)),m.\u0275\u0275advance(2),m.\u0275\u0275property("ngIf",m.\u0275\u0275pipeBind1(10,5,q.hierarchyPane.showHeatmapDisplaySettingsPane$)))},dependencies:[I.NgIf,H.R,G.X,Y.W0,Y.tN,Y.D8,ie._,ye.V,ae.d,J.$,I.AsyncPipe,N.F],styles:["[_nghost-%COMP%]{display:flex;flex-direction:row}[_nghost-%COMP%]   .heat-map[_ngcontent-%COMP%]{flex:1;overflow:hidden;padding-left:30px;--column-headers-backgroundColor: var(--scorecard-tableBackgroundColor);--row-backgroundColor: var(--scorecard-tableRowBackgroundColor)}[_nghost-%COMP%]   .heat-map.show-value-only[_ngcontent-%COMP%]{--cell-width: 88px}[_nghost-%COMP%]   .heat-map.show-value-target[_ngcontent-%COMP%]{--cell-width: 152px}[_nghost-%COMP%]   .heat-map.show-change-only[_ngcontent-%COMP%]{--cell-width: 132px}[_nghost-%COMP%]   .heat-map.show-change-target[_ngcontent-%COMP%]{--cell-width: 208px}[_nghost-%COMP%]   .name[_ngcontent-%COMP%]{display:inline-block;white-space:nowrap;overflow:hidden;height:100%;display:flex;align-items:center;flex:1}[_nghost-%COMP%]   .name[_ngcontent-%COMP%]:hover{text-decoration:underline}[_nghost-%COMP%]   .name[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden}[_nghost-%COMP%]   .name[_ngcontent-%COMP%]   .name-info[_ngcontent-%COMP%]{margin:0 6px}[_nghost-%COMP%]   .heatmap-column-header[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;align-items:flex-start;justify-content:flex-start;padding:0;background:none;border:none}[_nghost-%COMP%]   .heatmap-column-header[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .heatmap-column-header[_ngcontent-%COMP%]:focus:hover, [_nghost-%COMP%]   .heatmap-column-header[_ngcontent-%COMP%]:active, [_nghost-%COMP%]   .heatmap-column-header[_ngcontent-%COMP%]:focus:hover:active{background-color:var(--fluent-theme-neutral-lighter-color, #F3F2F1)}[_nghost-%COMP%]   .heatmap-column-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-left:6px;overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .heatmap-column-header[_ngcontent-%COMP%]   pbi-icon[_ngcontent-%COMP%]{padding:6px}[_nghost-%COMP%]   .configuration-pane[_ngcontent-%COMP%]{border-left:1px solid var(--gray-50, #D2D0CE)}[_nghost-%COMP%]   .configuration-pane[_ngcontent-%COMP%]     pbi-side-pane{width:450px}[_nghost-%COMP%]     .column-center-name{justify-content:center}[_nghost-%COMP%]     .heat-map .column-headers{padding-left:6px}[_nghost-%COMP%]     .heat-map .column-headers .header{width:var(--cell-width)}[_nghost-%COMP%]     .row{border-left:6px solid transparent;border-radius:4px 8px 8px 4px;box-shadow:0 0 2px var(--colorNeutralShadowAmbient),0 2px 4px var(--colorNeutralShadowKey)}[_nghost-%COMP%]     .row.goal-not-match{opacity:50%}[_nghost-%COMP%]     .cell{width:var(--cell-width)}[_nghost-%COMP%]   hierarchy-goal-cell[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .name[_ngcontent-%COMP%]:hover{cursor:pointer;opacity:.7}.goal-info-tooltip[_ngcontent-%COMP%]   .tooltip-value-label[_ngcontent-%COMP%], .tooltip-hierarchy-name[_ngcontent-%COMP%]{font-weight:600}  .mat-menu-panel.heatmap-column-menu{min-height:fit-content;margin-top:4px}  .mat-menu-panel.heatmap-column-menu .mat-menu-content{padding:0}  .mat-menu-panel.heatmap-column-menu .mat-menu-item{color:var(--gray-180, #252423);display:flex;flex-direction:row;align-items:center;height:36px}  .mat-menu-panel.heatmap-column-menu .mat-menu-item:disabled{background:transparent;color:var(--gray-80, #B3B0AD)}  .mat-menu-panel.heatmap-column-menu .mat-menu-item pbi-icon{display:flex;padding-right:8px}"],changeDetection:0}),Q}(p.w)},85353:function(ct,Ge,n){"use strict";n.d(Ge,{d:function(){return v}});var t=n(125),i=n(57535),w=n(50423),a=n(65181),d=n(90127),p=n(9380),l=n(49223),c=n(77476),y=n(24326),r=n(95594),C=n(77971);function m(E,I){if(1&E&&(w.\u0275\u0275elementStart(0,"div",9),w.\u0275\u0275text(1),w.\u0275\u0275pipe(2,"formatGoalValue"),w.\u0275\u0275elementEnd()),2&E){var H=w.\u0275\u0275nextContext(3);w.\u0275\u0275property("title",H.valueTooltip),w.\u0275\u0275advance(1),w.\u0275\u0275textInterpolate1(" ",w.\u0275\u0275pipeBind3(2,2,H.currentValue.value,H.categories,H.formatString)," ")}}function k(E,I){if(1&E&&w.\u0275\u0275element(0,"goal-change-cell",10),2&E){var H=w.\u0275\u0275nextContext(3);w.\u0275\u0275property("goal",H.goal)("arrowSize",H.changeArrowSize)("nilDisplayString","\u2014")}}function O(E,I){if(1&E&&(w.\u0275\u0275elementContainerStart(0),w.\u0275\u0275template(1,m,3,6,"div",7),w.\u0275\u0275template(2,k,1,3,"goal-change-cell",8),w.\u0275\u0275elementContainerEnd()),2&E){var H=w.\u0275\u0275nextContext(2);w.\u0275\u0275advance(1),w.\u0275\u0275property("ngIf",!H.displaySettings.showValueChange),w.\u0275\u0275advance(1),w.\u0275\u0275property("ngIf",H.displaySettings.showValueChange)}}function s(E,I){if(1&E&&(w.\u0275\u0275elementStart(0,"div",11)(1,"span",12),w.\u0275\u0275text(2),w.\u0275\u0275elementEnd(),w.\u0275\u0275text(3),w.\u0275\u0275pipe(4,"formatGoalValue"),w.\u0275\u0275elementEnd()),2&E){var H=w.\u0275\u0275nextContext(2);w.\u0275\u0275classProp("targetOnly",!H.displaySettings.showCurrentValue),w.\u0275\u0275property("title",H.targetTooltip),w.\u0275\u0275advance(2),w.\u0275\u0275textInterpolate(H.displaySettings.showValueChange?"|":"/"),w.\u0275\u0275advance(1),w.\u0275\u0275textInterpolate1("",w.\u0275\u0275pipeBind3(4,5,H.currentValue.target,H.categories,H.formatString)," ")}}function ne(E,I){if(1&E&&w.\u0275\u0275element(0,"status-icon",13,14),2&E){var H=w.\u0275\u0275nextContext(2);w.\u0275\u0275property("status",null==H.currentValue?null:H.currentValue.status)("goalStatuses",H.goalStatuses)}}function ee(E,I){if(1&E&&(w.\u0275\u0275elementStart(0,"div",2)(1,"div",3),w.\u0275\u0275template(2,O,3,2,"ng-container",4),w.\u0275\u0275template(3,s,5,9,"div",5),w.\u0275\u0275elementEnd(),w.\u0275\u0275template(4,ne,2,2,"status-icon",6),w.\u0275\u0275elementEnd()),2&E){var H=w.\u0275\u0275nextContext();w.\u0275\u0275styleProp("background",H.backgroundColor),w.\u0275\u0275classProp("isSelected",H.isSelected),w.\u0275\u0275advance(2),w.\u0275\u0275property("ngIf",H.displaySettings.showCurrentValue),w.\u0275\u0275advance(1),w.\u0275\u0275property("ngIf",H.displaySettings.showTargetValue),w.\u0275\u0275advance(1),w.\u0275\u0275property("ngIf",H.displaySettings.showStatus)}}function Z(E,I){1&E&&w.\u0275\u0275element(0,"pbi-spinner",15)}var v=function(){function E(I,H,G,Y){this.localizationService=I,this.formatGoalValuePipe=H,this.featureSwitches=G,this.scorecardService=Y,this.currentValue=null,this.changeArrowSize="mini"}return E.prototype.ngOnChanges=function(I){var H;if((I.goal||I.displaySettings)&&this.goal){this.currentValue=t.r.buildCurrentGoalValue(this.goal),this.categories=this.scorecardService.getGoalValueCategories(this.goal),this.goalStatuses=this.scorecardService.getGoalStatuses(this.goal);var G=i.p.getGoalStatus(this.currentValue.status,this.goalStatuses).color;this.backgroundColor=this.displaySettings.showStatusColor?i.p.getGoalStatusColor(G,!1,!1):void 0,this.formatString=this.goal.valuesFormatString,this.valueTooltip=this.goal.isCurrentValueNotConnectedToHierarchy?"".concat(this.localizationService.get("CurrentValue")," ").concat(this.localizationService.get("Metrics_Tooltip_ValueNotConnected")):this.formatGoalValuePipe.transform(this.currentValue.value,this.categories,this.goal.valuesFormatString,!1),this.targetTooltip=this.goal.isTargetValueNotConnectedToHierarchy?"".concat(this.localizationService.get("Role_DisplayName_TargetValue")," ").concat(this.localizationService.get("Metrics_Tooltip_ValueNotConnected")):this.formatGoalValuePipe.transform(this.currentValue.target,this.categories,this.goal.valuesFormatString,!1),this.displaySettings.showValueChange&&(this.valueChange=t.r.calculateValueChange(this.goal,this.featureSwitches.featureSwitches.goalsSparklineChangeAggregations),this.isCyclePeriodLabelLocalizable=t.r.isCyclePeriodLabelLocalizable(null===(H=this.valueChange)||void 0===H?void 0:H.period))}},E.\u0275fac=function(H){return new(H||E)(w.\u0275\u0275directiveInject(a.o),w.\u0275\u0275directiveInject(d.D),w.\u0275\u0275directiveInject(p.vZ),w.\u0275\u0275directiveInject(l.G))},E.\u0275cmp=w.\u0275\u0275defineComponent({type:E,selectors:[["hierarchy-goal-cell"]],inputs:{goal:"goal",scorecard:"scorecard",displaySettings:"displaySettings",isSelected:"isSelected"},features:[w.\u0275\u0275NgOnChangesFeature],decls:3,vars:2,consts:[["class","cell",3,"background","isSelected",4,"ngIf","ngIfElse"],["loading",""],[1,"cell"],[1,"content"],[4,"ngIf"],["class","target",3,"title","targetOnly",4,"ngIf"],[3,"status","goalStatuses",4,"ngIf"],["class","value",3,"title",4,"ngIf"],[3,"goal","arrowSize","nilDisplayString",4,"ngIf"],[1,"value",3,"title"],[3,"goal","arrowSize","nilDisplayString"],[1,"target",3,"title"],[1,"slash"],[3,"status","goalStatuses"],["statusCell",""],[1,"pbi-spinner-small"]],template:function(H,G){if(1&H&&(w.\u0275\u0275template(0,ee,5,7,"div",0),w.\u0275\u0275template(1,Z,1,0,"ng-template",null,1,w.\u0275\u0275templateRefExtractor)),2&H){var Y=w.\u0275\u0275reference(2);w.\u0275\u0275property("ngIf",G.goal)("ngIfElse",Y)}},dependencies:[c.NgIf,y.k,r.k,C.m,d.D],styles:["[_nghost-%COMP%]{flex:1;height:100%;display:flex;flex-direction:column;justify-content:center}.cell[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;justify-content:center;align-items:flex-start;border-bottom:4px solid transparent}.content[_ngcontent-%COMP%]{display:flex;align-items:baseline;justify-content:flex-start;box-sizing:border-box;white-space:nowrap;width:100%;padding:0 6px}.content[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   .target[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis}.content[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:var(--vlg-font-size, 18px);font-weight:var(--font-weight-semi-bold, 600)}.content[_ngcontent-%COMP%]   .target[_ngcontent-%COMP%]{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400)}.content[_ngcontent-%COMP%]   .target[_ngcontent-%COMP%]   .slash[_ngcontent-%COMP%]{margin:0 1px}.content[_ngcontent-%COMP%]   .target.targetOnly[_ngcontent-%COMP%]{font-size:var(--vlg-font-size, 18px);font-weight:var(--font-weight-semi-bold, 600)}.content[_ngcontent-%COMP%]   .target.targetOnly[_ngcontent-%COMP%]   .slash[_ngcontent-%COMP%]{display:none}.content[_ngcontent-%COMP%]   goal-change-cell[_ngcontent-%COMP%]{display:flex;overflow:hidden;--container-align-items: baseline;--arrow-margin: 0 4px;--change-font-size: var(--vlg-font-size);--change-font-weight: var(--font-weight-semi-bold)}status-icon[_ngcontent-%COMP%]{display:flex;justify-content:center}status-icon[_ngcontent-%COMP%]     .status{font-size:var(--sm-font-size, 12px);line-height:16px;height:16px;width:fit-content}.isSelected[_ngcontent-%COMP%]{border-color:var(--fluent-theme-neutral-secondary-color, #605E5C)}"],changeDetection:0}),E}()},26410:function(ct,Ge,n){"use strict";n.d(Ge,{O:function(){return ee}});var t=n(81337),i=n(58614),w=n(73088),a=n(62458),d=n(35510),p=n(50423),l=n(77476),c=n(86663),y=n(85102),r=n(74199);function C(Z,v){if(1&Z&&(p.\u0275\u0275elementStart(0,"label"),p.\u0275\u0275text(1),p.\u0275\u0275pipe(2,"localize"),p.\u0275\u0275elementEnd()),2&Z){var E=p.\u0275\u0275nextContext(4);p.\u0275\u0275advance(1),p.\u0275\u0275textInterpolate(p.\u0275\u0275pipeBind1(2,1,E.labels[0]))}}function m(Z,v){if(1&Z&&(p.\u0275\u0275elementStart(0,"label"),p.\u0275\u0275text(1),p.\u0275\u0275pipe(2,"localizeFormat"),p.\u0275\u0275elementEnd()),2&Z){var E=p.\u0275\u0275nextContext(2).ngIf,I=p.\u0275\u0275nextContext(2);p.\u0275\u0275advance(1),p.\u0275\u0275textInterpolate(p.\u0275\u0275pipeBind2(2,1,I.labels[1],E))}}function k(Z,v){if(1&Z){var E=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"button",9),p.\u0275\u0275listener("click",function(){p.\u0275\u0275restoreView(E);var H=p.\u0275\u0275nextContext(4);return p.\u0275\u0275resetView(H.onDissmis())}),p.\u0275\u0275pipe(1,"localize"),p.\u0275\u0275element(2,"pbi-icon",10),p.\u0275\u0275elementEnd()}2&Z&&p.\u0275\u0275attribute("aria-label",p.\u0275\u0275pipeBind1(1,1,"Dismiss"))}function O(Z,v){if(1&Z){var E=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"div",2),p.\u0275\u0275element(1,"i",3),p.\u0275\u0275elementStart(2,"div",4),p.\u0275\u0275template(3,C,3,3,"label",5),p.\u0275\u0275template(4,m,3,4,"ng-template",null,6,p.\u0275\u0275templateRefExtractor),p.\u0275\u0275elementStart(6,"button",7),p.\u0275\u0275listener("click",function(){p.\u0275\u0275restoreView(E);var ie=p.\u0275\u0275nextContext(3);return p.\u0275\u0275resetView(ie.openSharingDialog())}),p.\u0275\u0275pipe(7,"localize"),p.\u0275\u0275text(8),p.\u0275\u0275pipe(9,"localize"),p.\u0275\u0275elementEnd()(),p.\u0275\u0275template(10,k,3,3,"button",8),p.\u0275\u0275elementEnd()}if(2&Z){var I=p.\u0275\u0275reference(5),H=p.\u0275\u0275nextContext().ngIf,G=p.\u0275\u0275nextContext(2);p.\u0275\u0275advance(3),p.\u0275\u0275property("ngIf",1===H)("ngIfElse",I),p.\u0275\u0275advance(3),p.\u0275\u0275attribute("aria-label",p.\u0275\u0275pipeBind1(7,5,G.labels[2])),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate(p.\u0275\u0275pipeBind1(9,7,G.labels[2])),p.\u0275\u0275advance(2),p.\u0275\u0275property("ngIf",G.showDismiss)}}function s(Z,v){if(1&Z&&(p.\u0275\u0275elementContainerStart(0),p.\u0275\u0275template(1,O,11,9,"div",1),p.\u0275\u0275elementContainerEnd()),2&Z){var E=v.ngIf;p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",E>0)}}function ne(Z,v){if(1&Z&&(p.\u0275\u0275elementContainerStart(0),p.\u0275\u0275template(1,s,2,1,"ng-container",0),p.\u0275\u0275pipe(2,"async"),p.\u0275\u0275elementContainerEnd()),2&Z){var I,E=p.\u0275\u0275nextContext();p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",null==(I=p.\u0275\u0275pipeBind1(2,1,E.noAccessUsers$))?null:I.length)}}var ee=function(){function Z(v,E){var I;this.goalsHttpService=v,this.scorecardActions=E,this.labels=["Member_No_Scorecard_Access","Members_No_Scorecard_Access","Manage_Scorecard_Access"],this.showDismiss=!0,this.userAccess={userPrincipalNames:{},aadAppIds:{},groupIds:{}},this.noAccessUsers$=new d.X([]),this.show=!0,a.fF.assertValue(3===(null===(I=this.labels)||void 0===I?void 0:I.length),"Should only contain 3 labels")}return Z.prototype.ngOnChanges=function(v){var E,I;(v.scorecard&&this.scorecard.reportId&&_.isNil(null===(E=v.scorecard.previousValue)||void 0===E?void 0:E.reportId)&&this.users||v.users&&null!==(I=this.scorecard)&&void 0!==I&&I.reportId)&&this.updateUserAccessInfo()},Z.prototype.onDissmis=function(){this.show=!1},Z.prototype.openSharingDialog=function(){return(0,t.mG)(this,void 0,void 0,function(){return(0,t.Jh)(this,function(v){switch(v.label){case 0:return[4,this.scorecardActions.share(this.scorecard,this.noAccessUsers$.value)];case 1:return v.sent(),[2]}})})},Z.prototype.updateUserAccessInfo=function(){return(0,t.mG)(this,void 0,void 0,function(){var v,E;return(0,t.Jh)(this,function(H){switch(H.label){case 0:if(!_.some(this.users))return[3,5];if(v=this.getCheckScorecardAccessRequest(this.users),!(_.some(v.userPrincipalNames)||_.some(v.aadAppIds)||_.some(v.groupIds)))return[3,4];H.label=1;case 1:return H.trys.push([1,3,,4]),[4,this.goalsHttpService.checkAccess(this.scorecard.groupId,this.scorecard.id,v).toPromise()];case 2:return E=H.sent(),this.updateAcessInfo(E),[3,4];case 3:return H.sent(),this.noAccessUsers$.next([]),[3,4];case 4:return this.noAccessUsers$.next(this.countUsersWithNoAccess(this.users)),[3,6];case 5:this.noAccessUsers$.next([]),H.label=6;case 6:return[2]}})})},Z.prototype.getCheckScorecardAccessRequest=function(v){for(var E={userPrincipalNames:[],aadAppIds:[],groupIds:[]},I=0,H=v;I<H.length;I++){var G=H[I];2===G.objectType?void 0===this.userAccess.groupIds[G.objectId]&&E.groupIds.push(G.objectId):G.userPrincipalName?void 0===this.userAccess.userPrincipalNames[G.userPrincipalName]&&E.userPrincipalNames.push(G.userPrincipalName):void 0===this.userAccess.aadAppIds[G.aadAppId]&&E.aadAppIds.push(G.aadAppId)}return E},Z.prototype.countUsersWithNoAccess=function(v){for(var E=[],I=0,H=v;I<H.length;I++){var G=H[I];2===G.objectType?!0!==this.userAccess.groupIds[G.objectId]&&E.push(G):G.userPrincipalName?!0!==this.userAccess.userPrincipalNames[G.userPrincipalName]&&E.push(G):!0!==this.userAccess.aadAppIds[G.aadAppId]&&E.push(G)}return E},Z.prototype.updateAcessInfo=function(v){for(var E=0,I=_.keys(v?.userPrincipalNames);E<I.length;E++)this.userAccess.userPrincipalNames[H=I[E]]=v.userPrincipalNames[H];for(var G=0,Y=_.keys(v?.aadAppIds);G<Y.length;G++)this.userAccess.aadAppIds[H=Y[G]]=v.aadAppIds[H];for(var ie=0,ye=_.keys(v?.groupIds);ie<ye.length;ie++){var H;this.userAccess.groupIds[H=ye[ie]]=v.groupIds[H]}},Z.\u0275fac=function(E){return new(E||Z)(p.\u0275\u0275directiveInject(i.f),p.\u0275\u0275directiveInject(w.F))},Z.\u0275cmp=p.\u0275\u0275defineComponent({type:Z,selectors:[["scorecard-access-banner"]],inputs:{scorecard:"scorecard",users:"users",labels:"labels",showDismiss:"showDismiss"},features:[p.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[[4,"ngIf"],["class","message-banner",4,"ngIf"],[1,"message-banner"],["aria-hidden","true",1,"glyphicon","pbi-glyph-info","glyph-small","message-banner-icon"],[1,"message-banner-text-container"],[4,"ngIf","ngIfElse"],["multiple",""],[3,"click"],["class","close",3,"click",4,"ngIf"],[1,"close",3,"click"],["name","close","size","mini"]],template:function(E,I){1&E&&p.\u0275\u0275template(0,ne,3,3,"ng-container",0),2&E&&p.\u0275\u0275property("ngIf",I.show&&(null==I.scorecard?null:I.scorecard.reportId))},dependencies:[l.NgIf,c._,l.AsyncPipe,y.F,r.j],styles:['[_nghost-%COMP%]{display:block;font-size:12px}[_nghost-%COMP%]   .message-banner[_ngcontent-%COMP%]{color:var(--gray-180, #252423);display:flex;padding:10px 12px;background-color:var(--gray-20, #F3F2F1);margin-bottom:10px}[_nghost-%COMP%]   .message-banner[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{margin:0 0 0 auto;border:0;padding:0;background-color:transparent;color:inherit;display:flex;align-items:center}[_nghost-%COMP%]   .message-banner[_ngcontent-%COMP%]   .message-banner-text-container[_ngcontent-%COMP%]{display:block;line-height:16px;-webkit-user-select:text;-ms-user-select:text;user-select:text}[_nghost-%COMP%]   .message-banner[_ngcontent-%COMP%]   .message-banner-text-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;background-color:transparent;margin:0;padding:0;align-self:flex-end;text-decoration:underline;color:var(--fluent-theme-link-darker-color, #005A9E)}[_nghost-%COMP%]   .message-banner[_ngcontent-%COMP%]   .message-banner-text-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .message-banner[_ngcontent-%COMP%]   .message-banner-text-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{color:var(--fluent-theme-link-alt-color, #004578)}[_nghost-%COMP%]   .message-banner[_ngcontent-%COMP%]   .message-banner-text-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:1px solid var(--gray-140, #484644)}[_nghost-%COMP%]   .message-banner[_ngcontent-%COMP%]   .message-banner-text-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus:not(:focus-visible){outline:none}[_nghost-%COMP%]   .message-banner[_ngcontent-%COMP%]   .message-banner-text-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{color:var(--gray-90, #A19F9D)}html:not([dir="rtl"])   [_nghost-%COMP%]   .message-banner[_ngcontent-%COMP%]   .message-banner-icon[_ngcontent-%COMP%]{margin-right:8px}html[dir="rtl"]   [_nghost-%COMP%]   .message-banner[_ngcontent-%COMP%]   .message-banner-icon[_ngcontent-%COMP%]{margin-left:8px}'],changeDetection:0}),Z}()},6425:function(ct,Ge,n){"use strict";n.d(Ge,{C:function(){return m}});var t=n(558),i=n(50423),w=n(49223),a=n(77476),d=n(17174),p=n(59968),l=n(44408),c=n(25689);function y(k,O){if(1&k){var s=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div")(1,"input",7),i.\u0275\u0275listener("ngModelChange",function(Z){i.\u0275\u0275restoreView(s);var v=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(v.bucketId=Z)}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(2,"input",8),i.\u0275\u0275listener("ngModelChange",function(Z){i.\u0275\u0275restoreView(s);var v=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(v.bucketName=Z)}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"button",9),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(s);var Z=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(Z.addBucket())}),i.\u0275\u0275element(4,"mat-icon",10)(5,"span",11),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(6,"button",9),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(s);var Z=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(Z.deleteBucket())}),i.\u0275\u0275element(7,"mat-icon",12)(8,"span",13),i.\u0275\u0275elementEnd()()}if(2&k){var ne=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngModel",ne.bucketId),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngModel",ne.bucketName)}}function r(k,O){if(1&k){var s=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",14),i.\u0275\u0275listener("cdkDragEntered",function(v){i.\u0275\u0275restoreView(s);var E=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(E.dragEnteredGroup(v))}),i.\u0275\u0275pipe(1,"async"),i.\u0275\u0275elementStart(2,"label",15),i.\u0275\u0275text(3),i.\u0275\u0275elementEnd()()}if(2&k){var ne=O.$implicit,ee=i.\u0275\u0275nextContext();i.\u0275\u0275property("cdkDragDisabled",!i.\u0275\u0275pipeBind1(1,2,ee.isEditMode$)),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate(ne.name)}}function C(k,O){if(1&k){var s=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",16)(1,"goal-tile",17),i.\u0275\u0275listener("cdkDropListDropped",function(v){i.\u0275\u0275restoreView(s);var E=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(E.drop(v))}),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275elementEnd()()}if(2&k){var ne=O.$implicit,ee=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("goal",ne)("goalStatuses",ee.metricsGoalStatuses)("settings",ee.boardSettings)("cdkDragDisabled",!i.\u0275\u0275pipeBind1(2,4,ee.isEditMode$))}}var m=function(){function k(O){var s=this;this.scorecardService=O,this.bucketArr=[],this.bucketName="",this.bucketId="",this.boardGoals=[],this.boardGroups=[],this.isEditMode$=this.scorecardService.isEditMode(),this.scorecardBoard$=this.scorecardService.getBoard(),this.scorecardBoard$.pipe().subscribe(function(ne){s.boardGroups=ne?.groups}),this.boardGoals=this.scorecardService.flatten()}return k.prototype.addBucket=function(){""!==this.bucketName&&this.scorecardService.addGroupToBoard(this.bucketId,this.bucketName)},k.prototype.deleteBucket=function(){this.scorecardService.deleteGroupFromBoard(this.bucketId)},k.prototype.drop=function(O){O.previousContainer===O.container?(0,t.bA)(O.container.data,O.previousIndex,O.currentIndex):(0,t.EA)(O.previousContainer.data,O.container.data,O.previousIndex,O.currentIndex)},k.\u0275fac=function(s){return new(s||k)(i.\u0275\u0275directiveInject(w.G))},k.\u0275cmp=i.\u0275\u0275defineComponent({type:k,selectors:[["scorecard-board-view"]],inputs:{boardSettings:"boardSettings",metricsGoalStatuses:"metricsGoalStatuses"},decls:8,vars:6,consts:[[4,"ngIf"],["cdkDropListGroup","",1,"group-container"],["cdkDropList","",1,"group-list",3,"cdkDropListData","cdkDropListDropped"],["cdkDropList","","class","group-box","cdkDrag","",3,"cdkDragDisabled","cdkDragEntered",4,"ngFor","ngForOf"],["cdkDropListGroup",""],[1,"metric-container"],["cdkDropList","",4,"ngFor","ngForOf"],["type","text","placeholder","id",3,"ngModel","ngModelChange"],["type","text","placeholder","name",3,"ngModel","ngModelChange"],[3,"click"],["fontIcon","pbi-glyph-add",1,"glyphicon","glyph-mini"],["localize","Add_Group_To_Board_Visual"],["fontIcon","pbi-glyph-delete",1,"glyphicon","glyph-mini"],["localize","Delete_Group_From_Board_Visual"],["cdkDropList","","cdkDrag","",1,"group-box",3,"cdkDragDisabled","cdkDragEntered"],[1,"group-name"],["cdkDropList",""],["cdkDrag","",1,"metric-tile",3,"goal","goalStatuses","settings","cdkDragDisabled","cdkDropListDropped"]],template:function(s,ne){1&s&&(i.\u0275\u0275template(0,y,9,2,"div",0),i.\u0275\u0275pipe(1,"async"),i.\u0275\u0275elementStart(2,"div",1)(3,"div",2),i.\u0275\u0275listener("cdkDropListDropped",function(Z){return ne.drop(Z)}),i.\u0275\u0275template(4,r,4,4,"div",3),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(5,"div",4)(6,"div",5),i.\u0275\u0275template(7,C,3,6,"div",6),i.\u0275\u0275elementEnd()()),2&s&&(i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(1,4,ne.isEditMode$)),i.\u0275\u0275advance(3),i.\u0275\u0275property("cdkDropListData",ne.boardGroups),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",ne.boardGroups),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngForOf",ne.boardGoals))},dependencies:[a.NgForOf,a.NgIf,t.Wj,t.Fd,t.Zt,d.Fj,d.JJ,d.On,p.X,l.Hw,c.H,a.AsyncPipe],styles:[".metric-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;flex-direction:row;gap:20px;margin:30px}.metric-container[_ngcontent-%COMP%]   .metric-tile[_ngcontent-%COMP%]{width:250px;height:180px;display:flex}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:.3}.group-container[_ngcontent-%COMP%]{max-width:100%;margin:0 25px 25px 0;vertical-align:top}.group-container[_ngcontent-%COMP%]   .group-list[_ngcontent-%COMP%]{overflow:hidden;display:block}.group-container[_ngcontent-%COMP%]   .group-list[_ngcontent-%COMP%]   .group-box[_ngcontent-%COMP%]{padding:20px;margin:20px;background-color:#d3d3d3;border-radius:20px;min-height:250px;display:flex;flex-wrap:wrap;flex-direction:row;gap:20px}.delete-group-button[_ngcontent-%COMP%]{font-size:medium;margin-left:auto;padding:0;border:none;background:none}.group-name[_ngcontent-%COMP%]{font-weight:700}"]}),k}()},83399:function(ct,Ge,n){"use strict";n.d(Ge,{M:function(){return Oe}});var t=n(81337),i=n(60042),w=n(61088),a=n(50423),d=n(62458),p=n(34340),l=n(49223),c=n(77476),y=n(59968),r=n(50057),C=n(57746),m=n(55710),k=n(86663),O=n(36858),s=n(44260),ne=n(85102);function ee(Ce,Le){if(1&Ce&&a.\u0275\u0275element(0,"sort-icon",24),2&Ce){var ze=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("upArrow",!ze.sortType.sortAscending)}}function Z(Ce,Le){1&Ce&&a.\u0275\u0275element(0,"pbi-icon",25)}function v(Ce,Le){1&Ce&&a.\u0275\u0275element(0,"span",26)}function E(Ce,Le){1&Ce&&a.\u0275\u0275element(0,"span",27)}function I(Ce,Le){1&Ce&&a.\u0275\u0275element(0,"span",28)}function H(Ce,Le){1&Ce&&a.\u0275\u0275element(0,"span",29)}function G(Ce,Le){1&Ce&&a.\u0275\u0275element(0,"span")}function Y(Ce,Le){1&Ce&&a.\u0275\u0275element(0,"span",30)}function ie(Ce,Le){1&Ce&&a.\u0275\u0275element(0,"span",31)}function ye(Ce,Le){1&Ce&&a.\u0275\u0275element(0,"span",32)}function ae(Ce,Le){1&Ce&&a.\u0275\u0275element(0,"span",33)}function J(Ce,Le){1&Ce&&a.\u0275\u0275element(0,"span")}function N(Ce,Le){if(1&Ce&&(a.\u0275\u0275elementStart(0,"button",34),a.\u0275\u0275element(1,"span",35)(2,"pbi-icon",36),a.\u0275\u0275elementEnd()),2&Ce){a.\u0275\u0275nextContext();var ze=a.\u0275\u0275reference(27);a.\u0275\u0275property("matMenuTriggerFor",ze)}}function he(Ce,Le){if(1&Ce){var ze=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"button",37),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(ze);var We=a.\u0275\u0275nextContext().ngIf,He=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(He.changeColumnSettings(He.moveColumnLeft,We))}),a.\u0275\u0275element(1,"span",38),a.\u0275\u0275elementEnd()}}function pe(Ce,Le){if(1&Ce){var ze=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"button",37),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(ze);var We=a.\u0275\u0275nextContext().ngIf,He=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(He.changeColumnSettings(He.moveColumnRight,We))}),a.\u0275\u0275element(1,"span",39),a.\u0275\u0275elementEnd()}}function ce(Ce,Le){if(1&Ce){var ze=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"button",37),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(ze);var We=a.\u0275\u0275nextContext().ngIf,He=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(He.changeColumnSettings(He.hideColumn,We))}),a.\u0275\u0275element(1,"span",40),a.\u0275\u0275elementEnd()}}function ge(Ce,Le){1&Ce&&a.\u0275\u0275elementContainer(0)}function se(Ce,Le){if(1&Ce){var ze=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"button",41),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(ze);var We=a.\u0275\u0275nextContext(2);return a.\u0275\u0275resetView(We.showHideColumns())}),a.\u0275\u0275element(1,"span",42),a.\u0275\u0275elementEnd()}}var xe=function(Le){return{hidden:Le}};function me(Ce,Le){if(1&Ce){var ze=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275elementStart(1,"button",1),a.\u0275\u0275pipe(2,"localize"),a.\u0275\u0275element(3,"span",2),a.\u0275\u0275pipe(4,"localize"),a.\u0275\u0275template(5,ee,1,1,"sort-icon",3),a.\u0275\u0275template(6,Z,1,0,"ng-template",null,4,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(8,"mat-menu",5,6)(10,"button",7),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(ze);var oe=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(oe.sort(!0))}),a.\u0275\u0275element(11,"pbi-icon",8),a.\u0275\u0275template(12,v,1,0,"span",9),a.\u0275\u0275template(13,E,1,0,"span",10),a.\u0275\u0275template(14,I,1,0,"span",11),a.\u0275\u0275template(15,H,1,0,"span",12),a.\u0275\u0275template(16,G,1,0,"span",13),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(17,"button",7),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(ze);var oe=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(oe.sort(!1))}),a.\u0275\u0275element(18,"pbi-icon",8),a.\u0275\u0275template(19,Y,1,0,"span",14),a.\u0275\u0275template(20,ie,1,0,"span",15),a.\u0275\u0275template(21,ye,1,0,"span",16),a.\u0275\u0275template(22,ae,1,0,"span",17),a.\u0275\u0275template(23,J,1,0,"span",13),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(24,"mat-divider"),a.\u0275\u0275template(25,N,3,1,"button",18),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(26,"mat-menu",19,20),a.\u0275\u0275template(28,he,2,0,"button",21),a.\u0275\u0275template(29,pe,2,0,"button",21),a.\u0275\u0275template(30,ce,2,0,"button",21),a.\u0275\u0275element(31,"mat-divider"),a.\u0275\u0275template(32,ge,1,0,"ng-container",22),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(33,se,2,0,"ng-template",null,23,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275elementContainerEnd()}if(2&Ce){var $e=Le.ngIf,We=a.\u0275\u0275reference(7),He=a.\u0275\u0275reference(9),Je=a.\u0275\u0275reference(27),j=a.\u0275\u0275reference(34),tt=a.\u0275\u0275nextContext();a.\u0275\u0275advance(1),a.\u0275\u0275property("matMenuTriggerFor",tt.column.canSort?He:Je),a.\u0275\u0275attribute("aria-label",a.\u0275\u0275pipeBind1(2,26,tt.column.name)),a.\u0275\u0275advance(2),a.\u0275\u0275propertyInterpolate("localize",tt.column.name),a.\u0275\u0275property("pbiTooltip",a.\u0275\u0275pipeBind1(4,28,tt.column.name)),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",tt.column.canSort&&tt.sortType.sortBy===tt.column.sortBy)("ngIfElse",We),a.\u0275\u0275advance(3),a.\u0275\u0275property("overlapTrigger",!1),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngSwitch",tt.column.dataType),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngClass",a.\u0275\u0275pureFunction1(30,xe,tt.sortType.sortBy!==tt.column.sortBy||!tt.sortType.sortAscending)),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngSwitchCase","Date"),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngSwitchCase","Number"),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngSwitchCase","String"),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngSwitchCase","Status"),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngSwitch",tt.column.dataType),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngClass",a.\u0275\u0275pureFunction1(32,xe,tt.sortType.sortBy!==tt.column.sortBy||tt.sortType.sortAscending)),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngSwitchCase","Date"),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngSwitchCase","Number"),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngSwitchCase","String"),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngSwitchCase","Status"),a.\u0275\u0275advance(3),a.\u0275\u0275property("ngIf",tt.canMoveLeft($e)||tt.canMoveRight($e)||tt.column.canHide)("ngIfElse",j),a.\u0275\u0275advance(1),a.\u0275\u0275property("overlapTrigger",!1),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",tt.canMoveLeft($e)),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",tt.canMoveRight($e)),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",tt.column.canHide),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngTemplateOutlet",j)}}var Oe=function(){function Ce(Le,ze){var $e=this;this.detailsPaneLauncher=Le,this.scorecardService=ze,this.onSortColumn=new a.EventEmitter,this.moveColumnLeft=function(We){w._.moveColumnLeft(We,$e.column.id)},this.moveColumnRight=function(We){w._.moveColumnRight(We,$e.column.id)},this.hideColumn=function(We){w._.hideColumn(We,$e.column.id)}}return Ce.prototype.ngOnInit=function(){this.columnSettings$=this.scorecardService.getColumnSettings()},Ce.prototype.showHideColumns=function(){this.detailsPaneLauncher.openScorecardColumnSettingsPane(this.scorecardService)},Ce.prototype.changeColumnSettings=function(Le,ze){d.fF.assertValue(ze,"columnSettingsAction columnSettings");var $e=_.cloneDeep(ze);Le($e),this.scorecardService.updateScorecard({columnSettings:$e})},Ce.prototype.canMoveLeft=function(Le){return w._.canMoveLeft(Le,this.columnIndex)},Ce.prototype.canMoveRight=function(Le){return w._.canMoveRight(Le,this.columnIndex)},Ce.prototype.sort=function(Le){return(0,t.mG)(this,void 0,void 0,function(){var ze=this;return(0,t.Jh)(this,function($e){return d.fF.assert(function(){return ze.column.canSort},"Cannot sort this column."),this.onSortColumn.emit(this.sortType.sortBy!==this.column.sortBy||this.sortType.sortAscending!==Le?{sortBy:this.column.sortBy,sortAscending:Le}:i.Ij),[2]})})},Ce.componentId="ScorecardColumnContextMenuComponentId",Ce.\u0275fac=function(ze){return new(ze||Ce)(a.\u0275\u0275directiveInject(p.c),a.\u0275\u0275directiveInject(l.G))},Ce.\u0275cmp=a.\u0275\u0275defineComponent({type:Ce,selectors:[["scorecard-column-context-menu"]],inputs:{column:"column",columnIndex:"columnIndex",sortType:"sortType"},outputs:{onSortColumn:"onSortColumn"},decls:2,vars:3,consts:[[4,"ngIf"],["mat-button","","cdkMonitorElementFocus","",1,"scorecard-column-menu-trigger",3,"matMenuTriggerFor"],[1,"column-name",3,"localize","pbiTooltip"],["class","sort-icon",3,"upArrow",4,"ngIf","ngIfElse"],["chevron",""],["xPosition","after",1,"scorecard-column-menu",3,"overlapTrigger"],["scorecardColumnMenu","matMenu"],["mat-menu-item","",3,"ngSwitch","click"],["size","small","name","checkmark",3,"ngClass"],["localize","Menu_OldestToNewest",4,"ngSwitchCase"],["localize","Menu_Ascending",4,"ngSwitchCase"],["localize","Menu_Sort_AZ",4,"ngSwitchCase"],["localize","Menu_Sort_FromLowPriority",4,"ngSwitchCase"],[4,"ngSwitchDefault"],["localize","Menu_NewestToOldest",4,"ngSwitchCase"],["localize","Menu_Descending",4,"ngSwitchCase"],["localize","Menu_Sort_ZA",4,"ngSwitchCase"],["localize","Menu_Sort_FromHighPriority",4,"ngSwitchCase"],["mat-menu-item","","class","customize-column-button","localizeTooltip","Scorecard_Column_Settings_CustomizeColumn",3,"matMenuTriggerFor",4,"ngIf","ngIfElse"],[1,"scorecard-column-settings-menu",3,"overlapTrigger"],["scorecardColumnSettingsMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngIf"],[4,"ngTemplateOutlet"],["columnSettingsButton",""],[1,"sort-icon",3,"upArrow"],["name","chevrondownsmall","size","small",1,"chevrondown"],["localize","Menu_OldestToNewest"],["localize","Menu_Ascending"],["localize","Menu_Sort_AZ"],["localize","Menu_Sort_FromLowPriority"],["localize","Menu_NewestToOldest"],["localize","Menu_Descending"],["localize","Menu_Sort_ZA"],["localize","Menu_Sort_FromHighPriority"],["mat-menu-item","","localizeTooltip","Scorecard_Column_Settings_CustomizeColumn",1,"customize-column-button",3,"matMenuTriggerFor"],["localize","Scorecard_Column_Settings_CustomizeColumn"],["name","chevronrightmedium","size","mini",1,"chevron-right"],["mat-menu-item","",3,"click"],["localize","Menu_MoveLeft","localizeTooltip","Menu_MoveLeft"],["localize","Menu_MoveRight","localizeTooltip","Menu_MoveRight"],["localize","Menu_HideThisColumn","localizeTooltip","Menu_HideThisColumn"],["mat-menu-item","",1,"column-settings-button",3,"click"],["localize","Scorecard_Column_Settings","localizeTooltip","Scorecard_Column_Settings"]],template:function(ze,$e){1&ze&&(a.\u0275\u0275template(0,me,35,34,"ng-container",0),a.\u0275\u0275pipe(1,"async")),2&ze&&a.\u0275\u0275property("ngIf",a.\u0275\u0275pipeBind1(1,1,$e.columnSettings$))},dependencies:[c.NgClass,c.NgIf,c.NgTemplateOutlet,c.NgSwitch,c.NgSwitchCase,c.NgSwitchDefault,y.X,r.r,C.d,m.W0,m.tN,m.D8,k._,O.V,s.o,c.AsyncPipe,ne.F],styles:[".scorecard-column-menu-trigger[_ngcontent-%COMP%]{padding-left:0;width:100%;border:none;background:none;color:inherit;display:flex;flex-direction:row}.scorecard-column-menu-trigger[_ngcontent-%COMP%]   .column-name[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis}.scorecard-column-menu-trigger[_ngcontent-%COMP%]   pbi-icon[_ngcontent-%COMP%]{padding-left:4px;padding-top:4px}  .scorecard-column-menu-trigger .sort-icon .mat-icon{margin:0 4px}  .mat-menu-panel.scorecard-column-settings-menu{min-height:fit-content}  .scorecard-column-menu .mat-menu-item{padding-left:8px}  .scorecard-column-menu .mat-menu-item.column-settings-button{padding-left:32px}.mat-menu-item[_ngcontent-%COMP%]{color:var(--gray-180, #252423);display:flex;flex-direction:row;align-items:center;height:36px;padding-right:16px}.mat-menu-item[_ngcontent-%COMP%]   pbi-icon[_ngcontent-%COMP%]{display:flex;padding-right:8px}.mat-menu-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:inherit;display:flex;align-items:center}.mat-menu-item.customize-column-button[_ngcontent-%COMP%]{justify-content:space-between;padding-left:32px}.mat-menu-item.customize-column-button[_ngcontent-%COMP%]   .chevron-right[_ngcontent-%COMP%]{height:inherit;display:flex;align-items:center}"],changeDetection:0}),Ce}()},95135:function(ct,Ge,n){"use strict";n.d(Ge,{m:function(){return d}});var t=n(50423),i=n(17174),w=n(44408),a=n(85102),d=function(){function p(){this.filterBy=new t.EventEmitter}return p.prototype.onFilterBy=function(l){this.filterBy.emit(l)},p.\u0275fac=function(c){return new(c||p)},p.\u0275cmp=t.\u0275\u0275defineComponent({type:p,selectors:[["scorecard-filter"]],inputs:{filterText:"filterText"},outputs:{filterBy:"filterBy"},decls:5,vars:7,consts:[[1,"toolbar-filter-glyph"],["fontIcon","pbi-glyph-search",1,"glyphicon","glyph-mini"],[3,"ngModel","ngModelChange"]],template:function(c,y){1&c&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275element(1,"mat-icon",1),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(2,"input",2),t.\u0275\u0275listener("ngModelChange",function(C){return y.onFilterBy(C)}),t.\u0275\u0275pipe(3,"localize"),t.\u0275\u0275pipe(4,"localize"),t.\u0275\u0275elementEnd()),2&c&&(t.\u0275\u0275advance(2),t.\u0275\u0275property("ngModel",y.filterText),t.\u0275\u0275attribute("aria-label",t.\u0275\u0275pipeBind1(3,3,"Filter_By_Keyword"))("placeholder",t.\u0275\u0275pipeBind1(4,5,"Filter_By_Keyword")))},dependencies:[i.Fj,i.JJ,i.On,w.Hw,a.F],styles:["[_nghost-%COMP%]{display:inline-block;margin-right:8px;align-items:center;vertical-align:top;height:32px;width:230px}[_nghost-%COMP%]   .toolbar-filter-glyph[_ngcontent-%COMP%]{display:inline-block;margin:0;padding:0;border:none;outline:none;height:32px;width:32px;color:var(--gray-180, #252423);background-color:var(--fluent-theme-neutral-lighter-color, #F3F2F1);border-top-left-radius:4px;border-bottom-left-radius:4px}[_nghost-%COMP%]   .toolbar-filter-glyph[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-top:10px;margin-left:10px;height:12px;width:12px}[_nghost-%COMP%]   input[_ngcontent-%COMP%]{display:inline-block;vertical-align:top;margin:0;padding:0;height:32px;width:198px;color:var(--gray-180, #252423);font-weight:400;font-size:14px;line-height:20px;border:0px;border-top-right-radius:4px;border-bottom-right-radius:4px;background-color:var(--fluent-theme-neutral-lighter-color, #F3F2F1)}[_nghost-%COMP%]   input[_ngcontent-%COMP%]:focus{border:0px;outline:none}"],changeDetection:0}),p}()},1882:function(ct,Ge,n){"use strict";n.d(Ge,{R:function(){return E}});var t=n(81337),i=n(50423),w=n(73221),a=n(14172),d=n(21719),p=n(93379),l=n(73911),c=n(87426),y=n(65181),r=n(49223),C=n(77476),m=n(59968),k=n(55710),O=n(86663),s=n(81437),ne=n(95135),ee=n(59916),Z=n(85102);function v(I,H){if(1&I){var G=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",9),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(G);var ye=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(ye.hierarchyPane.showHeatmapDisplaySettingsPane())}),i.\u0275\u0275pipe(1,"async"),i.\u0275\u0275element(2,"pbi-icon",13)(3,"span",14),i.\u0275\u0275elementEnd()}if(2&I){var Y=i.\u0275\u0275nextContext();i.\u0275\u0275property("disabled",i.\u0275\u0275pipeBind1(1,1,Y.hierarchyPane.showHeatmapDisplaySettingsPane$))}}var E=function(I){function H(G,Y,ie,ye,ae,J,N){var he=I.call(this)||this;return he.hierarchyPane=G,he.capabilityService=Y,he.heatmapService=ie,he.hierarchyService=ye,he.localizationService=ae,he.scorecardService=J,he.changeDetector=N,he.filterBy=new i.EventEmitter,he.isEditMode$=he.scorecardService.isEditMode(),he.scorecardCapabilities$=he.capabilityService.getScorecardCapabilities(),he.canEditHeatmap$=he.scorecardCapabilities$.pipe((0,a.U)(function(pe){return pe.editHeatmap})),he.hasHierarchies$=he.hierarchyService.hasHierarchies$,he.heatmapService.selectedHierarchyItems$.subscribe(function(pe){var ce=pe.length-1;he.dropdownLabel=ce>0?he.localizationService.format("MetricsHeatmap_ComparingItems",ce):he.localizationService.get("Add_Columns"),he.changeDetector.markForCheck()}),he}return(0,t.ZT)(H,I),H.\u0275fac=function(Y){return new(Y||H)(i.\u0275\u0275directiveInject(d.D),i.\u0275\u0275directiveInject(p.Nw),i.\u0275\u0275directiveInject(l.$),i.\u0275\u0275directiveInject(c.G),i.\u0275\u0275directiveInject(y.o),i.\u0275\u0275directiveInject(r.G),i.\u0275\u0275directiveInject(i.ChangeDetectorRef))},H.\u0275cmp=i.\u0275\u0275defineComponent({type:H,selectors:[["scorecard-heatmap-toolbar"]],inputs:{filterText:"filterText"},outputs:{filterBy:"filterBy"},features:[i.\u0275\u0275InheritDefinitionFeature],decls:22,vars:22,consts:[[1,"scorecard-heatmap-toolbar"],[1,"left-actions"],["mat-button","","cdkMonitorElementFocus","",1,"heatmap-menu-button","pbi-fluent-button","pbi-icon-button","pbi-with-text",3,"matMenuTriggerFor"],["name","chevrondownsmall","size","mini",1,"chevrondown"],[1,"right-actions"],[3,"filterText","filterBy"],[3,"isEditMode","scorecardCapabilities","hasHierarchies"],["xPosition","after",1,"heatmap-menu",3,"overlapTrigger"],["heatmapMenu","matMenu"],["mat-menu-item","",3,"disabled","click"],["name","edit","size","small",1,"icon"],["localize","MetricsCustomizeHeatmap"],["mat-menu-item","",3,"disabled","click",4,"ngIf"],["name","settings","size","small",1,"icon"],["localize","DisplaySettings_Open"]],template:function(Y,ie){if(1&Y&&(i.\u0275\u0275elementStart(0,"section",0)(1,"div",1)(2,"button",2),i.\u0275\u0275pipe(3,"localize"),i.\u0275\u0275elementStart(4,"span"),i.\u0275\u0275text(5),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(6,"pbi-icon",3),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(7,"div",4)(8,"scorecard-filter",5),i.\u0275\u0275listener("filterBy",function(J){return ie.filterBy.emit(J)}),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(9,"view-switcher")(10,"scorecard-new-button",6),i.\u0275\u0275pipe(11,"async"),i.\u0275\u0275pipe(12,"async"),i.\u0275\u0275pipe(13,"async"),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(14,"mat-menu",7,8)(16,"button",9),i.\u0275\u0275listener("click",function(){return ie.hierarchyPane.showHeatmapConfigurationPane()}),i.\u0275\u0275pipe(17,"async"),i.\u0275\u0275element(18,"pbi-icon",10)(19,"span",11),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(20,v,4,3,"button",12),i.\u0275\u0275pipe(21,"async"),i.\u0275\u0275elementEnd()),2&Y){var ye=i.\u0275\u0275reference(15);i.\u0275\u0275advance(2),i.\u0275\u0275property("matMenuTriggerFor",ye),i.\u0275\u0275attribute("aria-label",i.\u0275\u0275pipeBind1(3,10,"Add_Columns")),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate(ie.dropdownLabel),i.\u0275\u0275advance(3),i.\u0275\u0275property("filterText",ie.filterText),i.\u0275\u0275advance(2),i.\u0275\u0275property("isEditMode",i.\u0275\u0275pipeBind1(11,12,ie.isEditMode$))("scorecardCapabilities",i.\u0275\u0275pipeBind1(12,14,ie.scorecardCapabilities$))("hasHierarchies",i.\u0275\u0275pipeBind1(13,16,ie.hasHierarchies$)),i.\u0275\u0275advance(4),i.\u0275\u0275property("overlapTrigger",!1),i.\u0275\u0275advance(2),i.\u0275\u0275property("disabled",i.\u0275\u0275pipeBind1(17,18,ie.hierarchyPane.showHeatmapConfigurationPane$)),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(21,20,ie.canEditHeatmap$))}},dependencies:[C.NgIf,m.X,k.W0,k.tN,k.D8,O._,s.V,ne.m,ee.h,C.AsyncPipe,Z.F],styles:[".scorecard-heatmap-toolbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;box-sizing:border-box;padding:0 30px 12px;width:100%;font-family:var(--scorecard-fontFamily);color:var(--scorecard-headerForegroundColor);background-color:var(--scorecard-headerBackgroundColor);border-bottom:1px solid rgba(0,0,0,.05);vertical-align:top}.scorecard-heatmap-toolbar[_ngcontent-%COMP%]   .right-actions[_ngcontent-%COMP%]{display:inline-flex}.scorecard-heatmap-toolbar[_ngcontent-%COMP%]   .right-actions[_ngcontent-%COMP%]   .hierarchies-btn[_ngcontent-%COMP%]{background-color:var(--fluent-theme-neutral-lighter-alt-color, #FAF9F8)}.pbi-fluent-button[_ngcontent-%COMP%]{border:none;display:inline-flex;align-items:center}.pbi-fluent-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{overflow:visible}.pbi-fluent-button[_ngcontent-%COMP%]   .mat-icon.glyph-small[_ngcontent-%COMP%]{font-size:var(--lg-font-size, 16px);width:var(--lg-font-size, 16px);height:var(--lg-font-size, 16px)}.pbi-fluent-button[_ngcontent-%COMP%]   .mat-icon.glyph-mini[_ngcontent-%COMP%]{font-size:var(--sm-font-size, 12px);width:var(--sm-font-size, 12px);height:var(--sm-font-size, 12px)}.pbi-fluent-button[_ngcontent-%COMP%]   .mat-icon.mat-ligature-font[fontIcon][_ngcontent-%COMP%]{overflow:auto}.pbi-fluent-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .pbi-fluent-button[_ngcontent-%COMP%]   pbi-icon[_ngcontent-%COMP%]{margin:0 8px}.heatmap-menu-button[_ngcontent-%COMP%]{padding:0 8px}  .mat-menu-panel.heatmap-menu{min-height:fit-content;margin-top:4px}  .mat-menu-panel.heatmap-menu .mat-menu-content{padding:0}  .mat-menu-panel.heatmap-menu .mat-menu-item{color:var(--gray-180, #252423);display:flex;flex-direction:row;align-items:center;height:36px}  .mat-menu-panel.heatmap-menu .mat-menu-item:disabled{background:transparent;color:var(--gray-80, #B3B0AD)}  .mat-menu-panel.heatmap-menu .mat-menu-item pbi-icon{display:flex;padding-right:8px}"],changeDetection:0}),H}(w.w)},96147:function(ct,Ge,n){"use strict";n.d(Ge,{J:function(){return I}});var t=n(50423),i=n(87426),w=n(49223),a=n(77476),d=n(18460),p=n(59968),l=n(50057),c=n(55710),y=n(86663),r=n(24326),C=n(36858),m=n(85102);function k(H,G){if(1&H&&(t.\u0275\u0275elementStart(0,"div")(1,"span",13),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"span"),t.\u0275\u0275text(4),t.\u0275\u0275elementEnd()()),2&H){var Y=G.$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(Y.hierarchyName),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(": ",Y.levels.join(" > "),"")}}function O(H,G){if(1&H&&t.\u0275\u0275template(0,k,5,2,"div",12),2&H){var Y=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275property("ngForOf",Y.displayPaths)}}function s(H,G){if(1&H&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"span",10),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"localize"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(4,O,1,1,"ng-template",null,11,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementContainerEnd()),2&H){var Y=G.$implicit,ie=t.\u0275\u0275reference(5);t.\u0275\u0275advance(1),t.\u0275\u0275property("pbiTooltip",ie)("pbiTooltipDisabled",Y.showingAll),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",Y.showingAll?t.\u0275\u0275pipeBind1(3,3,"MetricsHierarchy_SelectHierarchy"):Y.displayLabel," ")}}function ne(H,G){1&H&&t.\u0275\u0275element(0,"span",14)}function ee(H,G){1&H&&t.\u0275\u0275element(0,"pbi-spinner",15)}var Z=function(G){return{active:G}};function v(H,G){if(1&H&&(t.\u0275\u0275elementStart(0,"button",4,5),t.\u0275\u0275template(2,s,6,5,"ng-container",6),t.\u0275\u0275pipe(3,"async"),t.\u0275\u0275template(4,ne,1,0,"ng-template",null,7,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275template(6,ee,1,0,"pbi-spinner",8),t.\u0275\u0275pipe(7,"async"),t.\u0275\u0275element(8,"pbi-icon",9),t.\u0275\u0275elementEnd()),2&H){var Y=t.\u0275\u0275reference(1),ie=t.\u0275\u0275reference(5),ye=t.\u0275\u0275nextContext(),ae=t.\u0275\u0275reference(3);t.\u0275\u0275property("matMenuTriggerFor",ae)("ngClass",t.\u0275\u0275pureFunction1(9,Z,!0===Y.menuOpen)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(3,5,ye.hierarchyDisplayInfo$))("ngIfElse",ie),t.\u0275\u0275advance(4),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(7,7,ye.isSwitchingPath$))}}function E(H,G){1&H&&t.\u0275\u0275element(0,"pbi-lazy-load",16)}var I=function(){function H(G,Y){this.hierarchyService=G,this.scorecardService=Y,this.showButton$=this.hierarchyService.hasHierarchies$,this.hierarchyDisplayInfo$=this.hierarchyService.getHierarchyDisplayInfoObservable(this.scorecardService.hierarchyPaths$),this.isSwitchingPath$=this.scorecardService.isSwitchingHierarchyPath()}return H.\u0275fac=function(Y){return new(Y||H)(t.\u0275\u0275directiveInject(i.G),t.\u0275\u0275directiveInject(w.G))},H.\u0275cmp=t.\u0275\u0275defineComponent({type:H,selectors:[["scorecard-hierarchy-button"]],decls:5,vars:3,consts:[["cdkMonitorElementFocus","","mat-button","","aria-expanded","hierarchySlicerMenuTrigger.menuOpen === true","class","hierarchy-btn pbi-fluent-button pbi-icon-button pbi-with-text",3,"matMenuTriggerFor","ngClass",4,"ngIf"],["xPosition","after","yPosition","below",1,"hierarchy-slicer-menu"],["hierarchySlicerMenu","matMenu"],["matMenuContent",""],["cdkMonitorElementFocus","","mat-button","","aria-expanded","hierarchySlicerMenuTrigger.menuOpen === true",1,"hierarchy-btn","pbi-fluent-button","pbi-icon-button","pbi-with-text",3,"matMenuTriggerFor","ngClass"],["hierarchySlicerMenuTrigger","matMenuTrigger"],[4,"ngIf","ngIfElse"],["loadingHierarchies",""],["class","pbi-spinner-small",4,"ngIf"],["size","mini","name","chevrondownsmall","localizeTooltip","View_Options",1,"icon"],[3,"pbiTooltip","pbiTooltipDisabled"],["hierarchySlicerTooltip",""],[4,"ngFor","ngForOf"],[1,"hierarchy-name"],["localize","All"],[1,"pbi-spinner-small"],["modulePath","@powerbi/GoalsHierarchy/goals-hierarchy.module#GoalsHierarchyModule","componentId","HierarchySlicerComponentId"]],template:function(Y,ie){1&Y&&(t.\u0275\u0275template(0,v,9,11,"button",0),t.\u0275\u0275pipe(1,"async"),t.\u0275\u0275elementStart(2,"mat-menu",1,2),t.\u0275\u0275template(4,E,1,0,"ng-template",3),t.\u0275\u0275elementEnd()),2&Y&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,ie.showButton$))},dependencies:[a.NgClass,a.NgForOf,a.NgIf,d.R,p.X,l.r,c.W0,c.D8,c.hd,y._,r.k,C.V,a.AsyncPipe,m.F],styles:['.hierarchy-btn[_ngcontent-%COMP%]{padding-left:8px;padding-right:8px;background-color:var(--fluent-theme-neutral-lighter-alt-color, #FAF9F8)}.hierarchy-btn[_ngcontent-%COMP%]   pbi-spinner[_ngcontent-%COMP%]{height:20px}html:not([dir="rtl"])[_nghost-%COMP%]   .hierarchy-btn[_ngcontent-%COMP%]   pbi-spinner[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .hierarchy-btn[_ngcontent-%COMP%]   pbi-spinner[_ngcontent-%COMP%]{margin-left:8px}html[dir="rtl"][_nghost-%COMP%]   .hierarchy-btn[_ngcontent-%COMP%]   pbi-spinner[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .hierarchy-btn[_ngcontent-%COMP%]   pbi-spinner[_ngcontent-%COMP%]{margin-right:8px}html:not([dir="rtl"])[_nghost-%COMP%]   .hierarchy-btn[_ngcontent-%COMP%]   pbi-icon[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .hierarchy-btn[_ngcontent-%COMP%]   pbi-icon[_ngcontent-%COMP%]{margin-left:8px}html[dir="rtl"][_nghost-%COMP%]   .hierarchy-btn[_ngcontent-%COMP%]   pbi-icon[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .hierarchy-btn[_ngcontent-%COMP%]   pbi-icon[_ngcontent-%COMP%]{margin-right:8px}.hierarchy-name[_ngcontent-%COMP%]{font-weight:var(--font-weight-semi-bold)}'],changeDetection:0}),H}()},50042:function(ct,Ge,n){"use strict";n.d(Ge,{V:function(){return ne}});var t=n(50423),i=n(87426),w=n(9380),a=n(77476),d=n(50264),p=n(81437),l=n(55102),c=n(95135),y=n(96147),r=n(59916);function C(ee,Z){if(1&ee&&t.\u0275\u0275element(0,"scorecard-title",7),2&ee){var v=t.\u0275\u0275nextContext();t.\u0275\u0275property("scorecardName",v.scorecard.name)("isTitleEditable",v.isTitleEditable)}}function m(ee,Z){1&ee&&t.\u0275\u0275element(0,"scorecard-hierarchy-button")}function k(ee,Z){1&ee&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,m,1,0,"scorecard-hierarchy-button",8),t.\u0275\u0275elementContainerEnd()),2&ee&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("pbiFeatureSwitch","goalsHierarchies"))}function O(ee,Z){1&ee&&t.\u0275\u0275element(0,"scorecard-hierarchy-button")}function s(ee,Z){1&ee&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,O,1,0,"scorecard-hierarchy-button",8),t.\u0275\u0275elementContainerEnd()),2&ee&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("pbiFeatureSwitch","goalsHierarchies"))}var ne=function(){function ee(Z,v){this.hierarchyService=Z,this.featureSwitchService=v,this.filterBy=new t.EventEmitter,this.onLinkedMetricInit=new t.EventEmitter,this.onNewGoal=new t.EventEmitter,this.onNewSubGoal=new t.EventEmitter,this.isTitleEditable=this.featureSwitchService.featureSwitches.goalsSkipScorecardCreationPane}return ee.prototype.ngOnInit=function(){this.hasHierarchies$=this.hierarchyService.hasHierarchies$},ee.\u0275fac=function(v){return new(v||ee)(t.\u0275\u0275directiveInject(i.G),t.\u0275\u0275directiveInject(w.vZ))},ee.\u0275cmp=t.\u0275\u0275defineComponent({type:ee,selectors:[["scorecard-list-toolbar"]],inputs:{isEditMode:"isEditMode",scorecard:"scorecard",scorecardCapabilities:"scorecardCapabilities",numberOfSelectedGoals:"numberOfSelectedGoals",filterText:"filterText",showTitle:"showTitle"},outputs:{filterBy:"filterBy",onLinkedMetricInit:"onLinkedMetricInit",onNewGoal:"onNewGoal",onNewSubGoal:"onNewSubGoal"},decls:10,vars:10,consts:[["data-testid","scorecard-list-toolbar",1,"scorecard-list-toolbar"],[1,"left-actions","actions-container"],[3,"scorecardName","isTitleEditable",4,"ngIf"],[4,"ngIf"],[1,"right-actions","actions-container"],[3,"filterText","filterBy"],[3,"isEditMode","scorecardCapabilities","numberOfSelectedGoals","hasHierarchies","onNewGoal","onNewSubGoal","onLinkedMetricInit"],[3,"scorecardName","isTitleEditable"],[4,"pbiFeatureSwitch"]],template:function(v,E){1&v&&(t.\u0275\u0275elementStart(0,"section",0)(1,"div",1),t.\u0275\u0275template(2,C,1,2,"scorecard-title",2),t.\u0275\u0275template(3,k,2,1,"ng-container",3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"div",4),t.\u0275\u0275template(5,s,2,1,"ng-container",3),t.\u0275\u0275elementStart(6,"scorecard-filter",5),t.\u0275\u0275listener("filterBy",function(H){return E.filterBy.emit(H)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(7,"view-switcher"),t.\u0275\u0275elementStart(8,"scorecard-new-button",6),t.\u0275\u0275listener("onNewGoal",function(){return E.onNewGoal.emit()})("onNewSubGoal",function(){return E.onNewSubGoal.emit()})("onLinkedMetricInit",function(){return E.onLinkedMetricInit.emit()}),t.\u0275\u0275pipe(9,"async"),t.\u0275\u0275elementEnd()()()),2&v&&(t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",E.showTitle),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!E.showTitle),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",E.showTitle),t.\u0275\u0275advance(1),t.\u0275\u0275property("filterText",E.filterText),t.\u0275\u0275advance(2),t.\u0275\u0275property("isEditMode",E.isEditMode)("scorecardCapabilities",E.scorecardCapabilities)("numberOfSelectedGoals",E.numberOfSelectedGoals)("hasHierarchies",t.\u0275\u0275pipeBind1(9,8,E.hasHierarchies$)))},dependencies:[a.NgIf,d.P,p.V,l.y,c.m,y.J,r.h,a.AsyncPipe],styles:["[_nghost-%COMP%]{--toolbar-padding: 0px 30px 12px 30px}[_nghost-%COMP%]   .scorecard-list-toolbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap;box-sizing:border-box;padding:var(--toolbar-padding);width:100%;font-family:var(--scorecard-fontFamily);background-color:var(--scorecard-headerBackgroundColor);border-bottom:1px solid var(--fluent-theme-neutral-quarter-alt-color, #E1DFDD);vertical-align:top}[_nghost-%COMP%]   .scorecard-list-toolbar[_ngcontent-%COMP%]   .actions-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:8px}[_nghost-%COMP%]   .scorecard-list-toolbar[_ngcontent-%COMP%]     .no-line .mat-form-field-underline{display:none}[_nghost-%COMP%]   .scorecard-list-toolbar[_ngcontent-%COMP%]   .mat-form-field-infix[_ngcontent-%COMP%]{border-top:0px}[_nghost-%COMP%]   .scorecard-list-toolbar[_ngcontent-%COMP%]     .scorecard-title{padding:0}[_nghost-%COMP%]   .scorecard-list-toolbar[_ngcontent-%COMP%]     .scorecard-title .editableLabel{font-size:var(--lg-font-size)}"],changeDetection:0}),ee}()},49833:function(ct,Ge,n){"use strict";n.d(Ge,{t:function(){return w}});var t=n(50423),i=n(95135),w=function(){function a(){this.filterBy=new t.EventEmitter}return a.\u0275fac=function(p){return new(p||a)},a.\u0275cmp=t.\u0275\u0275defineComponent({type:a,selectors:[["scorecard-metric-picker-toolbar"]],inputs:{filterText:"filterText"},outputs:{filterBy:"filterBy"},decls:4,vars:1,consts:[[1,"scorecard-picker-toolbar"],[1,"left-actions"],[1,"right-actions"],[3,"filterText","filterBy"]],template:function(p,l){1&p&&(t.\u0275\u0275elementStart(0,"section",0),t.\u0275\u0275element(1,"div",1),t.\u0275\u0275elementStart(2,"div",2)(3,"scorecard-filter",3),t.\u0275\u0275listener("filterBy",function(y){return l.filterBy.emit(y)}),t.\u0275\u0275elementEnd()()()),2&p&&(t.\u0275\u0275advance(3),t.\u0275\u0275property("filterText",l.filterText))},dependencies:[i.m],styles:[".scorecard-picker-toolbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;box-sizing:border-box;padding:0 30px 12px;width:100%;font-family:var(--scorecard-fontFamily);background-color:var(--scorecard-headerBackgroundColor);border-bottom:1px solid var(--fluent-theme-neutral-quarter-alt-color, #E1DFDD);vertical-align:top}"],changeDetection:0}),a}()},59916:function(ct,Ge,n){"use strict";n.d(Ge,{h:function(){return ne}});var t=n(81337),i=n(93379),w=n(62831),a=n(50423),d=n(14172),p=n(77526),l=n(21719),c=n(49223),y=n(59968),r=n(55710),C=n(50264),m=n(86251),k=n(85102);function O(ee,Z){if(1&ee){var v=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"tooltip-wrapper",6)(1,"button",7),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(v);var H=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(H.onLinkedMetricInit.emit())}),a.\u0275\u0275element(2,"span",11),a.\u0275\u0275elementEnd()()}if(2&ee){var E=a.\u0275\u0275nextContext();a.\u0275\u0275property("tooltipKey",null==E.capabilities||null==E.capabilities.createLinkedGoal?null:E.capabilities.createLinkedGoal.disabledMessageKey),a.\u0275\u0275advance(1),a.\u0275\u0275property("disabled",!(null!=E.capabilities&&null!=E.capabilities.createLinkedGoal&&E.capabilities.createLinkedGoal.enabled))}}function s(ee,Z){if(1&ee){var v=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"tooltip-wrapper",6)(1,"button",12),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(v);var H=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(H.hierarchyPane.openHierarchiesBuilder("ScorecardNewButton"))}),a.\u0275\u0275element(2,"span",13),a.\u0275\u0275elementEnd()()}if(2&ee){var E=a.\u0275\u0275nextContext();a.\u0275\u0275property("tooltipKey",null==E.capabilities||null==E.capabilities.editHierarchies?null:E.capabilities.editHierarchies.disabledMessageKey),a.\u0275\u0275advance(1),a.\u0275\u0275property("disabled",!(null!=E.capabilities&&null!=E.capabilities.editHierarchies&&E.capabilities.editHierarchies.enabled)),a.\u0275\u0275advance(1),a.\u0275\u0275property("localize",E.hasHierarchies?"MetricsManageHierarchies_Preview":"MetricsHierarchy_SetupHierarchy_Preview")}}var ne=function(){function ee(Z,v){var E=this;this.hierarchyPane=Z,this.scorecardService=v,this.onNewGoal=new a.EventEmitter,this.onNewSubGoal=new a.EventEmitter,this.onLinkedMetricInit=new a.EventEmitter,this.connectedGoalSubscrition=this.scorecardService.getScorecard().pipe((0,d.U)(function(I){return w.q.anyGoals(I.goals,function(H){return!!H.valueConnection||!!H.targetConnection})}),(0,p.x)()).subscribe(function(I){E.anyConnectedGoals=I,E.updateCapabilities()})}return ee.prototype.ngOnChanges=function(Z){(Z.scorecardCapabilities||Z.hasHierarchies||Z.numberOfSelectedGoals)&&this.updateCapabilities()},ee.prototype.ngOnDestroy=function(){this.connectedGoalSubscrition.unsubscribe()},ee.prototype.updateCapabilities=function(){this.scorecardCapabilities&&(this.capabilities=(0,t.pi)({},this.scorecardCapabilities),this.capabilities.editHierarchies=i.jL.clone(this.scorecardCapabilities.editHierarchies).disableIf(!this.anyConnectedGoals&&!this.hasHierarchies,"NoConnections","MetricsHierarchy_No_Connections_Tooltip").build(),this.capabilities.createSubgoal=i.jL.clone(this.scorecardCapabilities.createGoal).disableIf(1!==this.numberOfSelectedGoals,"InvalidSelection").build())},ee.\u0275fac=function(v){return new(v||ee)(a.\u0275\u0275directiveInject(l.D),a.\u0275\u0275directiveInject(c.G))},ee.\u0275cmp=a.\u0275\u0275defineComponent({type:ee,selectors:[["scorecard-new-button"]],inputs:{isEditMode:"isEditMode",scorecardCapabilities:"scorecardCapabilities",numberOfSelectedGoals:"numberOfSelectedGoals",hasHierarchies:"hasHierarchies"},outputs:{onNewGoal:"onNewGoal",onNewSubGoal:"onNewSubGoal",onLinkedMetricInit:"onLinkedMetricInit"},features:[a.\u0275\u0275NgOnChangesFeature],decls:15,vars:13,consts:[["mat-button-toggle","",1,"new-btn","pbi-fluent-button","pbi-focus-outline","primary",3,"matMenuTriggerFor","disabled"],[1,"glyphicon","pbi-glyph-add","glyph-small","icon"],["localize","New",1,"label"],[1,"glyphicon","pbi-glyph-chevrondownsmall","glyph-small","icon"],[1,"new-menu",3,"overlapTrigger"],["newBtnDropdownMenu","matMenu"],[3,"tooltipKey"],["mat-menu-item","",1,"pbi-fluent-button",3,"disabled","click"],["localize","NewMetric"],[3,"tooltipKey",4,"pbiFeatureSwitch"],["localize","AddSubmetric"],["localize","Metrics_LinkedMetrics_Button_Preview"],["mat-menu-item","",1,"pbi-fluent-button","manage-hierarchies-btn",3,"disabled","click"],[3,"localize"]],template:function(v,E){if(1&v&&(a.\u0275\u0275elementStart(0,"button",0),a.\u0275\u0275pipe(1,"localize"),a.\u0275\u0275element(2,"i",1)(3,"span",2)(4,"i",3),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(5,"mat-menu",4,5)(7,"tooltip-wrapper",6)(8,"button",7),a.\u0275\u0275listener("click",function(){return E.onNewGoal.emit()}),a.\u0275\u0275element(9,"span",8),a.\u0275\u0275elementEnd()(),a.\u0275\u0275template(10,O,3,2,"tooltip-wrapper",9),a.\u0275\u0275elementStart(11,"tooltip-wrapper",6)(12,"button",7),a.\u0275\u0275listener("click",function(){return E.onNewSubGoal.emit()}),a.\u0275\u0275element(13,"span",10),a.\u0275\u0275elementEnd()(),a.\u0275\u0275template(14,s,3,3,"tooltip-wrapper",9),a.\u0275\u0275elementEnd()),2&v){var I=a.\u0275\u0275reference(6);a.\u0275\u0275property("matMenuTriggerFor",I)("disabled",!E.isEditMode),a.\u0275\u0275attribute("aria-label",a.\u0275\u0275pipeBind1(1,11,"New"))("aria-expanded",!0===I.menuOpen),a.\u0275\u0275advance(5),a.\u0275\u0275property("overlapTrigger",!1),a.\u0275\u0275advance(2),a.\u0275\u0275property("tooltipKey",null==E.capabilities||null==E.capabilities.createGoal?null:E.capabilities.createGoal.disabledMessageKey),a.\u0275\u0275advance(1),a.\u0275\u0275property("disabled",!(null!=E.capabilities&&null!=E.capabilities.createGoal&&E.capabilities.createGoal.enabled)),a.\u0275\u0275advance(2),a.\u0275\u0275property("pbiFeatureSwitch","goalsLinkedGoals"),a.\u0275\u0275advance(1),a.\u0275\u0275property("tooltipKey",null==E.capabilities||null==E.capabilities.createSubgoal?null:E.capabilities.createSubgoal.disabledMessageKey),a.\u0275\u0275advance(1),a.\u0275\u0275property("disabled",!(null!=E.capabilities&&null!=E.capabilities.createSubgoal&&E.capabilities.createSubgoal.enabled)),a.\u0275\u0275advance(2),a.\u0275\u0275property("pbiFeatureSwitch","goalsHierarchies")}},dependencies:[y.X,r.W0,r.tN,r.D8,C.P,m.j,k.F],styles:[".new-btn[_ngcontent-%COMP%]{display:flex;align-items:center;padding:6px 10px}.new-btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{margin:0 4px}.new-btn[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{padding:0 4px}.manage-hierarchies-btn[_ngcontent-%COMP%]{border-top:1px solid var(--gray-40, #E1DFDD)}.manage-hierarchies-btn[_ngcontent-%COMP%]:active, .manage-hierarchies-btn[_ngcontent-%COMP%]:focus{border-top:1px solid var(--gray-40, #E1DFDD)}  .mat-menu-panel.new-menu .mat-menu-content{padding:0}.mat-menu-item[_ngcontent-%COMP%]{color:var(--gray-180, #252423);display:flex;flex-direction:row;align-items:center;height:36px}.mat-menu-item[_ngcontent-%COMP%]:disabled{background:transparent;color:var(--gray-80, #B3B0AD)}"],changeDetection:0}),ee}()},65736:function(ct,Ge,n){"use strict";n.d(Ge,{A:function(){return O}});var t=n(62831),i=n(57535),w=n(50423),a=n(65181),d=n(77476),p=n(78181),l=n(69437),c=["scorecardStatusTiles"];function y(s,ne){1&s&&w.\u0275\u0275element(0,"pbi-office-icon",11)}var r=function(ne){return{"background-color":ne}};function C(s,ne){if(1&s&&w.\u0275\u0275element(0,"div",12),2&s){var ee=w.\u0275\u0275nextContext().$implicit;w.\u0275\u0275styleMap(w.\u0275\u0275pureFunction1(2,r,ee.color))}}function m(s,ne){if(1&s){var ee=w.\u0275\u0275getCurrentView();w.\u0275\u0275elementStart(0,"mat-button-toggle",5),w.\u0275\u0275listener("click",function(){var I=w.\u0275\u0275restoreView(ee).$implicit,H=w.\u0275\u0275nextContext();return w.\u0275\u0275resetView(H.onStatusTileClicked(I))}),w.\u0275\u0275elementStart(1,"span",6),w.\u0275\u0275template(2,y,1,0,"pbi-office-icon",7),w.\u0275\u0275template(3,C,1,4,"div",8),w.\u0275\u0275elementStart(4,"div",9),w.\u0275\u0275text(5),w.\u0275\u0275elementEnd()(),w.\u0275\u0275elementStart(6,"span",10),w.\u0275\u0275text(7),w.\u0275\u0275elementEnd()()}if(2&s){var Z=ne.$implicit;w.\u0275\u0275classProp("filtered-on",Z.filteredOn)("hide",Z.collapsed),w.\u0275\u0275property("checked",Z.filteredOn),w.\u0275\u0275attribute("aria-label",Z.displayName),w.\u0275\u0275advance(2),w.\u0275\u0275property("ngIf",Z.filteredOn),w.\u0275\u0275advance(1),w.\u0275\u0275property("ngIf",!Z.filteredOn),w.\u0275\u0275advance(2),w.\u0275\u0275textInterpolate(Z.displayName),w.\u0275\u0275advance(2),w.\u0275\u0275textInterpolate(Z.count)}}function k(s,ne){if(1&s){var ee=w.\u0275\u0275getCurrentView();w.\u0275\u0275elementStart(0,"button",13),w.\u0275\u0275listener("click",function(){w.\u0275\u0275restoreView(ee);var E=w.\u0275\u0275nextContext();return w.\u0275\u0275resetView(E.onCollapse())}),w.\u0275\u0275elementStart(1,"span"),w.\u0275\u0275text(2),w.\u0275\u0275elementEnd()()}if(2&s){var Z=w.\u0275\u0275nextContext();w.\u0275\u0275classProp("expanded",!Z.collapsed),w.\u0275\u0275attribute("aria-label",Z.collapseButtonAriaLabel),w.\u0275\u0275advance(2),w.\u0275\u0275textInterpolate(Z.collapseButtonLabel)}}var O=function(){function s(ne,ee){this.changeDetectorRef=ne,this.localizationService=ee,this.onStatusSelected=new w.EventEmitter,this.collapsed=!0,this.columnGap=8,this.enableCollapse=!1,this.tileMinWidth=140,this.tileMaxWidth=210,this.goalStatusHelper=new i.p(this.localizationService)}return s.prototype.onResize=function(){this.updateGoalStatusTiles()},s.prototype.ngAfterViewInit=function(){this.updateGoalStatusTiles()},s.prototype.ngOnChanges=function(){this.updateGoalStatusTiles()},s.prototype.onStatusTileClicked=function(ne){if(_.isNil(this.selectedStatuses)&&(this.selectedStatuses=[]),ne.status){var ee=_.find(this.selectedStatuses,function(Z){return i.p.statusesMatch(Z,ne.status)});ee?this.selectedStatuses=_.without(this.selectedStatuses,ee):this.selectedStatuses.push(ne.status)}else this.selectedStatuses=[];this.updateGoalStatusTiles(),this.onStatusSelected.emit(this.selectedStatuses)},s.prototype.onCollapse=function(){this.collapsed=!this.collapsed,this.updateGoalStatusTiles()},s.prototype.updateGoalStatusTiles=function(){this.createStatusTiles(),this.calculateGrid(),this.collapseGrid(),this.changeDetectorRef.markForCheck()},s.prototype.createStatusTiles=function(){var ne;if(this.goals&&0!==(null===(ne=this.goals)||void 0===ne?void 0:ne.length)&&(1!==this.goals.length||!_.isNil(this.goals[0].name))){var ee=t.q.flattenGoals(this.goals);this.statusTiles=[];var Z=_.isEmpty(this.selectedStatuses);this.statusTiles.push({displayName:this.localizationService.get("MetricsName_New"),count:_.size(ee),collapsed:!1,filteredOn:Z});for(var v=_.filter(this.goalStatusList,function(ae){return!ae.historical}),I=0,H=i.p.getDistinctStatuses(ee,this.goalStatusesByScorecardId,v);I<H.length;I++){var G=H[I],Y=this.goalStatusHelper.tryLocalizeDisplayName(G.displayName)||this.localizationService.get("NullValue"),ie=i.p.listIncludesMatchingStatus(this.selectedStatuses,G),ye=i.p.getGoalStatusIconColor(G.color);this.statusTiles.push({status:G,displayName:Y,color:ye,count:G.count,collapsed:!1,filteredOn:ie})}}},s.prototype.calculateGrid=function(){var ne,ee;if(this.statusTiles&&0!==(null===(ne=this.statusTiles)||void 0===ne?void 0:ne.length)&&null!==(ee=this.scorecardStatusTiles)&&void 0!==ee&&ee.nativeElement){var Z=this.statusTiles.length;if(this.availableSpace=this.scorecardStatusTiles.nativeElement.clientWidth,this.availableSpace<this.tileMinWidth)return this.gridLayout={numberOfRows:Z,numberOfColumns:1},this.gridStyle={"column-gap":"".concat(this.columnGap,"px"),"grid-template-columns":"repeat(".concat(this.gridLayout.numberOfColumns,", 1fr)")},void(this.enableCollapse=!0);if(this.availableSpace>Z*this.tileMaxWidth+(Z-1)*this.columnGap)return this.gridLayout={numberOfRows:1,numberOfColumns:Z},this.gridStyle={"column-gap":"".concat(this.columnGap,"px"),"grid-template-columns":"repeat(auto-fill, ".concat(this.tileMaxWidth,"px)")},void(this.enableCollapse=!1);for(var v=Math.floor((this.availableSpace-this.tileMinWidth)/(this.tileMinWidth+this.columnGap)+1),I=[];v>0&&(this.availableSpace-(v-1)*this.columnGap)/v<=this.tileMaxWidth;)I.push({numberOfRows:Math.ceil(this.statusTiles.length/v),numberOfColumns:v}),v-=1;switch(I.length){case 0:v=Math.floor((this.availableSpace-this.tileMinWidth)/(this.tileMinWidth+this.columnGap)+1),this.gridLayout={numberOfRows:Math.ceil(this.statusTiles.length/v),numberOfColumns:v};break;case 1:this.gridLayout=I[0];break;default:if(this.availableSpace>=768){this.gridLayout=I[I.length-1];break}if(this.availableSpace<=767&&this.availableSpace>480){this.gridLayout=I[Math.ceil(I.length/2)-1];break}if(this.availableSpace<=480){this.gridLayout=I[0];break}}this.gridStyle={"column-gap":"".concat(this.columnGap,"px"),"grid-template-columns":"repeat(".concat(this.gridLayout.numberOfColumns,", 1fr)")},this.enableCollapse=this.gridLayout.numberOfRows>1}},s.prototype.collapseGrid=function(){if(this.enableCollapse){if(!this.collapsed)return this.collapseButtonLabel=this.localizationService.get("Collapse"),void(this.collapseButtonAriaLabel=this.localizationService.get("CollapseStatuses"));for(var ne=!0,ee=this.gridLayout.numberOfColumns-1;ee<this.statusTiles.length;ee++)this.statusTiles[ee].filteredOn&&(ne=!1);ne?this.standardCollapse():this.rearrangeCollapse(),this.collapseButtonLabel=this.localizationService.format("ShowXMore",[this.collapsedStatuses]),this.collapseButtonAriaLabel=this.localizationService.format("ShowMoreStatuses",[this.collapsedStatuses])}},s.prototype.standardCollapse=function(){for(var ne=this.gridLayout.numberOfColumns-1;ne<this.statusTiles.length;ne++)this.statusTiles[ne].collapsed=!0;this.collapsedStatuses=this.statusTiles.length-(this.gridLayout.numberOfColumns-1)},s.prototype.rearrangeCollapse=function(){var ne=[this.statusTiles[0]],ee=this.statusTiles.filter(function(E){return E.filteredOn&&E.status}),Z=this.statusTiles.filter(function(E){return!E.filteredOn&&E.status});ne=(ne=ne.concat(ee)).concat(Z),this.collapsedStatuses=0;for(var v=0;v<ne.length;v++)!ne[v].filteredOn&&v>this.gridLayout.numberOfColumns-2&&(ne[v].collapsed=!0,this.collapsedStatuses+=1);this.statusTiles=ne},s.\u0275fac=function(ee){return new(ee||s)(w.\u0275\u0275directiveInject(w.ChangeDetectorRef),w.\u0275\u0275directiveInject(a.o))},s.\u0275cmp=w.\u0275\u0275defineComponent({type:s,selectors:[["scorecard-status-tiles"]],viewQuery:function(ee,Z){var v;(1&ee&&w.\u0275\u0275viewQuery(c,5),2&ee)&&(w.\u0275\u0275queryRefresh(v=w.\u0275\u0275loadQuery())&&(Z.scorecardStatusTiles=v.first))},hostBindings:function(ee,Z){1&ee&&w.\u0275\u0275listener("resize",function(E){return Z.onResize(E)},!1,w.\u0275\u0275resolveWindow)},inputs:{goals:"goals",goalStatusesByScorecardId:"goalStatusesByScorecardId",goalStatusList:"goalStatusList",selectedStatuses:"selectedStatuses"},outputs:{onStatusSelected:"onStatusSelected"},features:[w.\u0275\u0275NgOnChangesFeature],decls:5,vars:4,consts:[[1,"scorecard-status-tiles"],["multiple","",1,"status-tiles-btn-group"],["scorecardStatusTiles",""],["class","status-tile",3,"checked","filtered-on","hide","click",4,"ngFor","ngForOf"],["class","status-tiles-collapse-btn",3,"expanded","click",4,"ngIf"],[1,"status-tile",3,"checked","click"],[1,"status-tile-flex-container"],["class","status-tile-icon","name","CheckmarkWithDynamicColor_16",4,"ngIf"],["class","status-tile-dot",3,"style",4,"ngIf"],[1,"status-tile-name"],[1,"status-tile-count"],["name","CheckmarkWithDynamicColor_16",1,"status-tile-icon"],[1,"status-tile-dot"],[1,"status-tiles-collapse-btn",3,"click"]],template:function(ee,Z){1&ee&&(w.\u0275\u0275elementStart(0,"section",0)(1,"mat-button-toggle-group",1,2),w.\u0275\u0275template(3,m,8,10,"mat-button-toggle",3),w.\u0275\u0275template(4,k,3,4,"button",4),w.\u0275\u0275elementEnd()()),2&ee&&(w.\u0275\u0275advance(1),w.\u0275\u0275styleMap(Z.gridStyle),w.\u0275\u0275advance(2),w.\u0275\u0275property("ngForOf",Z.statusTiles),w.\u0275\u0275advance(1),w.\u0275\u0275property("ngIf",Z.enableCollapse))},dependencies:[d.NgForOf,d.NgIf,p.A9,p.Yi,l.m],styles:[".scorecard-status-tiles[_ngcontent-%COMP%]{box-sizing:border-box;padding:0 30px;font-family:var(--scorecard-fontFamily);background-color:var(--scorecard-headerBackgroundColor);border-bottom:1px solid var(--fluent-theme-neutral-quarter-alt-color, #E1DFDD);width:100%}.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]{display:grid;row-gap:12px;grid-template-rows:repeat(auto-fill,40px);column-gap:8px;grid-template-columns:repeat(auto-fill,140px);padding:12px 0;width:100%;border:var(--focus-outline-definition, 2.5px solid) transparent}@media screen and (-ms-high-contrast: active){.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]{border:none}}.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tile[_ngcontent-%COMP%]{display:flex;box-sizing:border-box;justify-content:space-between;min-width:140px;max-width:210px;padding:0;box-shadow:none;border:1px solid var(--gray-30, #EDEBE9);border-radius:2px;background-color:var(--fluent-theme-white-color, #FFF)}.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tile.hide[_ngcontent-%COMP%]{display:none}.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tile[_ngcontent-%COMP%]:hover{background-color:var(--gray-20, #F3F2F1)}.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tile[_ngcontent-%COMP%]:active{background-color:var(--gray-30, #EDEBE9)}.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tile.filtered-on[_ngcontent-%COMP%]{border:1px solid var(--gray-140, #484644)}.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tile[_ngcontent-%COMP%]     .mat-button-toggle-button{width:100%;padding:10px 12px}.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tile[_ngcontent-%COMP%]     .mat-button-toggle-button .mat-button-toggle-label-content{display:flex;box-sizing:border-box;justify-content:space-between;max-height:20px;padding:0;line-height:20px}.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tile[_ngcontent-%COMP%]     .mat-button-toggle-button .mat-button-toggle-label-content .status-tile-flex-container{text-align:left;max-width:80%}.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tile[_ngcontent-%COMP%]     .mat-button-toggle-button .mat-button-toggle-label-content .status-tile-flex-container .status-tile-dot{display:inline-block;height:8px;width:8px;margin:6px 8px 6px 0;border-radius:50%;background-color:var(--fluent-theme-black-color, #000)}.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tile[_ngcontent-%COMP%]     .mat-button-toggle-button .mat-button-toggle-label-content .status-tile-flex-container .status-tile-icon{display:inline-block;vertical-align:top;height:16px;width:16px;margin:1px 4px 2px 0}.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tile[_ngcontent-%COMP%]     .mat-button-toggle-button .mat-button-toggle-label-content .status-tile-flex-container .status-tile-name{display:inline-block;width:100%;line-height:20px;font-family:var(--scorecard-fontFamily);font-size:var(--md-font-size, 14px);overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tile[_ngcontent-%COMP%]     .mat-button-toggle-button .mat-button-toggle-label-content .status-tile-count{max-width:20%;font-family:var(--scorecard-fontFamily);font-size:var(--md-font-size, 14px);text-align:right;line-height:20px}.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tiles-collapse-btn[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;margin:auto 0 auto auto;padding:0;color:var(--fluent-theme-link-darker-alt-color, #106EBE);background:transparent;border:var(--focus-outline-definition, 2.5px solid) transparent}@media screen and (-ms-high-contrast: active){.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tiles-collapse-btn[_ngcontent-%COMP%]{border:none}}.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tiles-collapse-btn[_ngcontent-%COMP%]:hover, .scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tiles-collapse-btn[_ngcontent-%COMP%]:active{border:var(--focus-outline-definition, 2.5px solid) transparent}@media screen and (-ms-high-contrast: active){.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tiles-collapse-btn[_ngcontent-%COMP%]:hover, .scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tiles-collapse-btn[_ngcontent-%COMP%]:active{border:none}}.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tiles-collapse-btn.expanded[_ngcontent-%COMP%]{flex-direction:row;margin:auto auto auto 12px}"],changeDetection:0}),s}()},55102:function(ct,Ge,n){"use strict";n.d(Ge,{y:function(){return Z}});var t=n(81337),i=n(14786),w=n(46544),a=n(50423),d=n(49223),p=n(77476),l=n(17174),c=n(24150),y=n(74913);function r(v,E){if(1&v){var I=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"input",7),a.\u0275\u0275listener("ngModelChange",function(Y){a.\u0275\u0275restoreView(I);var ie=a.\u0275\u0275nextContext(2);return a.\u0275\u0275resetView(ie.scorecardName=Y)}),a.\u0275\u0275elementEnd()}if(2&v){var H=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("ngModel",H.scorecardName)}}function C(v,E){if(1&v){var I=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"tri-svg-icon",8),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(I);var Y=a.\u0275\u0275nextContext(2);return a.\u0275\u0275resetView(Y.onScorecardNameEdit())}),a.\u0275\u0275pipe(1,"async"),a.\u0275\u0275elementEnd()}if(2&v){var H=a.\u0275\u0275nextContext(2);a.\u0275\u0275classProp("can-display",a.\u0275\u0275pipeBind1(1,3,H.isEditMode$)),a.\u0275\u0275property("name","edit_20_regular")}}function m(v,E){if(1&v){var I=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"input",7),a.\u0275\u0275listener("ngModelChange",function(Y){a.\u0275\u0275restoreView(I);var ie=a.\u0275\u0275nextContext(3);return a.\u0275\u0275resetView(ie.scorecardDescription=Y)}),a.\u0275\u0275elementEnd()}if(2&v){var H=a.\u0275\u0275nextContext(3);a.\u0275\u0275property("ngModel",H.scorecardDescription)}}function k(v,E){if(1&v){var I=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"tri-svg-icon",11),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(I);var Y=a.\u0275\u0275nextContext(3);return a.\u0275\u0275resetView(Y.onDescriptionEdit())}),a.\u0275\u0275pipe(1,"async"),a.\u0275\u0275elementEnd()}if(2&v){var H=a.\u0275\u0275nextContext(3);a.\u0275\u0275classProp("can-display",a.\u0275\u0275pipeBind1(1,3,H.isEditMode$)),a.\u0275\u0275property("name","edit_20_regular")}}function O(v,E){if(1&v&&(a.\u0275\u0275elementStart(0,"span",9),a.\u0275\u0275template(1,m,1,1,"input",4),a.\u0275\u0275pipe(2,"async"),a.\u0275\u0275template(3,k,2,5,"tri-svg-icon",10),a.\u0275\u0275elementEnd()),2&v){var I=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(1),a.\u0275\u0275property("pbiEditableLabel",I.pbiEditableDescriptionOptions)("pbiEditableLabelValue",I.scorecardDescription)("pbiEditableLabelMode",a.\u0275\u0275pipeBind1(2,5,I.isEditMode$))("pbiEditableLabelEditable",I.isScorecardDescriptionEditable),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",!I.isScorecardDescriptionEditable)}}function s(v,E){if(1&v&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275elementStart(1,"span",3),a.\u0275\u0275template(2,r,1,1,"input",4),a.\u0275\u0275pipe(3,"async"),a.\u0275\u0275template(4,C,2,5,"tri-svg-icon",5),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(5,O,4,7,"span",6),a.\u0275\u0275elementContainerEnd()),2&v){var I=a.\u0275\u0275nextContext();a.\u0275\u0275advance(2),a.\u0275\u0275property("pbiEditableLabel",I.pbiEditableNameOptions)("pbiEditableLabelValue",I.scorecardName)("pbiEditableLabelMode",a.\u0275\u0275pipeBind1(3,6,I.isEditMode$))("pbiEditableLabelEditable",I.isScorecardNameEditable),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",!I.isScorecardNameEditable),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",!!I.scorecardDescription)}}function ne(v,E){1&v&&(a.\u0275\u0275elementStart(0,"div",15),a.\u0275\u0275text(1,"-"),a.\u0275\u0275elementEnd())}function ee(v,E){if(1&v&&(a.\u0275\u0275elementStart(0,"div",12),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(2,ne,2,0,"div",13),a.\u0275\u0275elementStart(3,"div",14),a.\u0275\u0275text(4),a.\u0275\u0275elementEnd()),2&v){var I=a.\u0275\u0275nextContext();a.\u0275\u0275propertyInterpolate("title",I.scorecardName),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate(I.scorecardName),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",I.showTitleDash),a.\u0275\u0275advance(1),a.\u0275\u0275propertyInterpolate("title",I.scorecardDescription),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate(I.scorecardDescription)}}var Z=function(){function v(E,I,H){this.changeDetector=E,this.scorecardService=I,this.telemetryService=H,this.isNewHeader=!0,this.isScorecardNameEditable=!1,this.isScorecardDescriptionEditable=!1,this.isEditMode$=this.scorecardService.isEditMode()}return v.prototype.ngOnInit=function(){var E=this;this.showTitleDash=void 0!==this.scorecardDescription&&""!==this.scorecardDescription&&this.isNewHeader;var I=this.scorecardName,H=this.scorecardDescription;this.pbiEditableNameOptions={disableClick:!0,customTooltip:!1,inputMatchLabelWidth:!1,onEdit:this.onScorecardNameEdit.bind(this),onBlur:function(){return(0,t.mG)(E,void 0,void 0,function(){return(0,t.Jh)(this,function(Y){switch(Y.label){case 0:return this.isScorecardNameEditable=!1,I===this.scorecardName?[2]:(this.telemetryService.logEvent(i.tj),[4,this.updateScorecardDetails()]);case 1:return Y.sent(),I=this.scorecardName,[2]}})})}},this.pbiEditableDescriptionOptions={disableClick:!0,customTooltip:!1,inputMatchLabelWidth:!1,onEdit:this.onDescriptionEdit.bind(this),onBlur:function(){return(0,t.mG)(E,void 0,void 0,function(){return(0,t.Jh)(this,function(Y){switch(Y.label){case 0:return this.isScorecardDescriptionEditable=!1,H===this.scorecardDescription?[2]:(this.telemetryService.logEvent(i.ib),[4,this.updateScorecardDetails()]);case 1:return Y.sent(),H=this.scorecardDescription,[2]}})})}}},v.prototype.ngOnChanges=function(E){E.scorecardDescription&&(this.showTitleDash=void 0!==this.scorecardDescription&&""!==this.scorecardDescription)},v.prototype.onScorecardNameEdit=function(){this.isScorecardNameEditable=!0,this.changeDetector.markForCheck()},v.prototype.onDescriptionEdit=function(){this.isScorecardDescriptionEditable=!0,this.changeDetector.markForCheck()},v.prototype.updateScorecardDetails=function(){return this.scorecardService.updateScorecard({name:this.scorecardName,description:this.scorecardDescription})},v.\u0275fac=function(I){return new(I||v)(a.\u0275\u0275directiveInject(a.ChangeDetectorRef),a.\u0275\u0275directiveInject(d.G),a.\u0275\u0275directiveInject(w.y0))},v.\u0275cmp=a.\u0275\u0275defineComponent({type:v,selectors:[["scorecard-title"]],inputs:{scorecardName:"scorecardName",scorecardDescription:"scorecardDescription",isTitleEditable:"isTitleEditable",isNewHeader:"isNewHeader"},features:[a.\u0275\u0275NgOnChangesFeature],decls:4,vars:4,consts:[["data-testid","scorecard-title",1,"scorecard-title"],[4,"ngIf","ngIfElse"],["staticTitle",""],[1,"editableLabel"],[3,"ngModel","ngModelChange",4,"pbiEditableLabel","pbiEditableLabelValue","pbiEditableLabelMode","pbiEditableLabelEditable"],["tri-svg-icon-16","","class","tri-svg","data-testid","edit-scorecard-title",3,"name","can-display","click",4,"ngIf"],["class","editableDescription",4,"ngIf"],[3,"ngModel","ngModelChange"],["tri-svg-icon-16","","data-testid","edit-scorecard-title",1,"tri-svg",3,"name","click"],[1,"editableDescription"],["tri-svg-icon-16","","class","tri-svg",3,"name","can-display","click",4,"ngIf"],["tri-svg-icon-16","",1,"tri-svg",3,"name","click"],[1,"title",3,"title"],["class","dash",4,"ngIf"],[1,"subtitle",3,"title"],[1,"dash"]],template:function(I,H){if(1&I&&(a.\u0275\u0275elementStart(0,"section",0),a.\u0275\u0275template(1,s,6,8,"ng-container",1),a.\u0275\u0275template(2,ee,5,5,"ng-template",null,2,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275elementEnd()),2&I){var G=a.\u0275\u0275reference(3);a.\u0275\u0275classProp("old-header",!H.isNewHeader),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",H.isTitleEditable)("ngIfElse",G)}},dependencies:[p.NgIf,l.Fj,l.JJ,l.On,c.D,y.M,p.AsyncPipe],styles:[".scorecard-title.old-header[_ngcontent-%COMP%]{display:block}.scorecard-title.old-header[_ngcontent-%COMP%]   .editableLabel[_ngcontent-%COMP%]     pbi-text-label{max-width:90%}.scorecard-title.old-header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-bottom:10px}.scorecard-title.old-header[_ngcontent-%COMP%]   .editableDescription[_ngcontent-%COMP%]     pbi-text-label{max-width:90%}.scorecard-title[_ngcontent-%COMP%]{display:flex;flex-direction:row;box-sizing:border-box;padding:12px 30px 6px;width:100%;background-color:var(--scorecard-headerBackgroundColor)}.scorecard-title[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:var(--scorecard-headerForegroundColor);font-family:var(--scorecard-fontFamily);font-size:var(--vlg-font-size, 18px);font-weight:var(--font-weight-semi-bold, 600)}.scorecard-title[_ngcontent-%COMP%]   .editableLabel[_ngcontent-%COMP%]{height:40px;display:flex;align-items:center;padding-bottom:0;margin-right:10px;color:var(--scorecard-headerForegroundColor);font-family:var(--scorecard-fontFamily);font-size:var(--vlg-font-size, 18px);font-weight:var(--font-weight-semi-bold, 600)}.scorecard-title[_ngcontent-%COMP%]   .editableLabel[_ngcontent-%COMP%]:hover   .tri-svg.can-display[_ngcontent-%COMP%]{visibility:visible}.scorecard-title[_ngcontent-%COMP%]   .editableDescription[_ngcontent-%COMP%]{flex-grow:100;display:flex;align-items:center;color:var(--scorecard-headerForegroundColor);opacity:.9;font-family:var(--scorecard-fontFamily);font-size:var(--lg-font-size, 16px);font-weight:var(--font-weight-regular, 400)}.scorecard-title[_ngcontent-%COMP%]   .editableDescription[_ngcontent-%COMP%]:hover   .tri-svg.can-display[_ngcontent-%COMP%]{visibility:visible}.scorecard-title[_ngcontent-%COMP%]   .tri-svg[_ngcontent-%COMP%]{height:16px;width:16px;margin-left:6px;margin-right:4px;visibility:hidden}.scorecard-title[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:6px 12px 6px 16px;box-sizing:border-box;border:2px solid #0F6CBD;border-radius:4px}.scorecard-title[_ngcontent-%COMP%]   .dash[_ngcontent-%COMP%]{padding:0 8px}.scorecard-title[_ngcontent-%COMP%]   .dash[_ngcontent-%COMP%], .scorecard-title[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:var(--scorecard-headerForegroundColor);opacity:.9;font-family:var(--scorecard-fontFamily);font-size:var(--lg-font-size, 16px);font-weight:var(--font-weight-regular, 400)}"],changeDetection:0}),v}()},70060:function(ct,Ge,n){"use strict";function t(i){if(null==i)return 0;if("number"==typeof i)return i;if("string"==typeof i)switch(i.toString().trim().toLowerCase()){case"none":return 0;case"read":default:return 1;case"write":return 2;case"readwrite":return 3}return 0}n.d(Ge,{l:function(){return t}})},77695:function(ct,Ge,n){"use strict";n.d(Ge,{p:function(){return a}});var t=n(60042),i=n(125),w=n(57535),a=function(){function d(){}return d.sortAndFilter=function(p,l,c,y){if(_.isEmpty(p))return p;var r=l.sortAscending?"asc":"desc",C=[this.sortingFunctions[l.sortBy]];return"Rank"===l.sortBy&&C.push(this.sortingFunctions.CreatedTime),C.push("Name"===l.sortBy?this.sortingFunctions.CreatedTime:this.sortingFunctions.Name),this.sortRecursive(p,r,C,c,y)},d.sort=function(p,l){return this.sortAndFilter(p,l,{},{})},d.toggleSort=function(p,l){return l?p.sortBy===l?p.sortAscending?{sortBy:p.sortBy,sortAscending:!1}:t.Ij:{sortBy:l,sortAscending:!0}:p},d.sortRecursive=function(p,l,c,y,r){for(var C=0,m=p=_.orderBy(p,c,[l,"asc"]);C<m.length;C++){var k=m[C];_.isEmpty(k.subGoals)||(k.subGoals=this.sortRecursive(k.subGoals,l,c,y,r)),_.isNil(r)?(delete k.isFilterMatch,delete k.isHidden):(k.isFilterMatch=d.matchesFilter(k,y,r),k.isHidden=!k.isFilterMatch&&!_.some(k.subGoals,function(O){return!O.isHidden}))}return p},d.matchesFilter=function(p,l,c){var y,r,C,m,k;if(_.isNil(c)||p.isNew||"Editing"===p.state||"Saving"===p.state)return!0;var O=null!==(y=i.r.buildCurrentGoalValue(p).status)&&void 0!==y?y:0,s=w.p.getGoalStatusForScorecardId(O,p.scorecardId,l),ne=!1,ee=null===(r=c?.keyword)||void 0===r?void 0:r.toLocaleLowerCase();if(!_.isString(ee)||_.isEmpty(ee))ne=!0;else if(!(null===(C=p.name)||void 0===C)&&C.toLocaleLowerCase().includes(ee)&&(ne=!0),c?.matchOwner&&!ne&&((null===(m=p.ownerDisplayNames)||void 0===m?void 0:m.length)>=1?ne=_.some(p.ownerDisplayNames,function(E){return E?.toLocaleLowerCase().includes(ee)}):(ne=null===(k=p.owner)||void 0===k?void 0:k.toLocaleLowerCase().includes(ee))||(ne=_.some(p.additionalOwners,function(E){var I,H=null!==(I=E.userPrincipalName)&&void 0!==I?I:E.aadAppId;return H?.toLocaleLowerCase().includes(ee)}))),c?.matchStatus&&!ne){var Z=s.displayName;Z?.toLocaleLowerCase().includes(ee)&&(ne=!0)}var v=!1;return(_.isNil(c?.statuses)||_.isEmpty(c?.statuses)||w.p.listIncludesMatchingStatus(c.statuses,s))&&(v=!0),ne&&v},d.sortingFunctions={Rank:function(l){return l.rank},CreatedTime:function(l){return l.createdTime},Name:function(l){var c;return null===(c=l.name)||void 0===c?void 0:c.trim().toLocaleLowerCase()},Owner:function(l){var c,y,r;return null===(r=null!==(y=null===(c=l.ownerDisplayNames)||void 0===c?void 0:c[0])&&void 0!==y?y:l.owner)||void 0===r?void 0:r.trim().toLocaleLowerCase()},Status:function(l){return(i.r.buildCurrentGoalValue(l).status+1)%6},Value:function(l){return i.r.buildCurrentGoalValue(l).value},Change:function(l){return i.r.calculateValueChange(l,!0).changeAmount},Milestone:function(l){return i.r.buildCurrentGoalValue(l).nextTarget},Target:function(l){return i.r.buildCurrentGoalValue(l).finalTarget},DueDate:function(l){return l.completionDate}},d}()},58108:function(ct,Ge,n){"use strict";n.d(Ge,{o:function(){return wo}});var t=n(81337),i=n(29730),w=n(61088),a=n(60042),d=n(34340),p=n(62831),l=n(23348),c=n(32293),y=n(62458),r=n(50423),C=n(65181),m=n(58938),k=n(77476),O=n(17174),s=n(59968),ne=n(50057),ee=n(44408),Z=n(44641),v=n(24326),E=n(85102);function I(Ve,Fe){if(1&Ve&&r.\u0275\u0275element(0,"message-banner",10),2&Ve){var De=r.\u0275\u0275nextContext();r.\u0275\u0275property("viewModel",De.messageBannerModelColumn)}}function H(Ve,Fe){if(1&Ve&&r.\u0275\u0275element(0,"message-banner",10),2&Ve){var De=r.\u0275\u0275nextContext();r.\u0275\u0275property("viewModel",De.messageBannerModelEmpty)}}function G(Ve,Fe){if(1&Ve&&(r.\u0275\u0275elementStart(0,"option",15),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&Ve){var De=Fe.$implicit;r.\u0275\u0275property("value",Fe.index),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(De.sheetName)}}function Y(Ve,Fe){if(1&Ve){var De=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",11),r.\u0275\u0275element(1,"p",12),r.\u0275\u0275elementStart(2,"select",13),r.\u0275\u0275listener("change",function(Mt){r.\u0275\u0275restoreView(De);var ft=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(ft.onSelectTable(Mt.target.value))}),r.\u0275\u0275template(3,G,2,2,"option",14),r.\u0275\u0275elementEnd()()}if(2&Ve){var Be=r.\u0275\u0275nextContext();r.\u0275\u0275advance(3),r.\u0275\u0275property("ngForOf",Be.goalPreviewData)}}function ie(Ve,Fe){if(1&Ve&&(r.\u0275\u0275elementStart(0,"option",24),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&Ve){var De=Fe.$implicit;r.\u0275\u0275property("value",De),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(De)}}function ye(Ve,Fe){if(1&Ve){var De=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"th")(1,"div",19)(2,"div",20)(3,"select",21),r.\u0275\u0275listener("ngModelChange",function(Vt){var Zt=r.\u0275\u0275restoreView(De).index,vn=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(vn.matchedHeaderName[Zt]=Vt)}),r.\u0275\u0275text(4),r.\u0275\u0275template(5,ie,2,2,"option",22),r.\u0275\u0275element(6,"option"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(7,"div",23),r.\u0275\u0275text(8),r.\u0275\u0275elementEnd()()()}if(2&Ve){var Be=Fe.index,qe=Fe.$implicit,Mt=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(3),r.\u0275\u0275property("ngModel",Mt.matchedHeaderName[Be]),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1("",Mt.matchedHeaderName[Be]," "),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",Mt.scorecardAttributes),r.\u0275\u0275advance(3),r.\u0275\u0275textInterpolate(qe)}}function ae(Ve,Fe){if(1&Ve&&(r.\u0275\u0275elementStart(0,"td"),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&Ve){var De=Fe.$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(De)}}function J(Ve,Fe){if(1&Ve&&(r.\u0275\u0275elementStart(0,"tr"),r.\u0275\u0275template(1,ae,2,1,"td",18),r.\u0275\u0275elementEnd()),2&Ve){var De=Fe.$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",De)}}function N(Ve,Fe){if(1&Ve&&(r.\u0275\u0275elementStart(0,"div",16)(1,"table",17)(2,"tr"),r.\u0275\u0275template(3,ye,9,4,"th",18),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(4,J,2,1,"tr",18),r.\u0275\u0275elementEnd()()),2&Ve){var De=r.\u0275\u0275nextContext();r.\u0275\u0275advance(3),r.\u0275\u0275property("ngForOf",De.matchedHeaderName)("ngForOf",De.goalImportFileMetadata.tables[De.selectTable].column),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",De.goalImportFileMetadata.tables[De.selectTable].rows)}}function he(Ve,Fe){1&Ve&&r.\u0275\u0275element(0,"pbi-spinner",25)}function pe(Ve,Fe){1&Ve&&r.\u0275\u0275element(0,"span",32)}function ce(Ve,Fe){if(1&Ve&&(r.\u0275\u0275elementStart(0,"span",33),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&Ve){var De=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",De.numGoals,"")}}function ge(Ve,Fe){if(1&Ve){var De=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"section",26)(1,"div",27)(2,"button",28),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(De);var Mt=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(Mt.importFromFile())}),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"button",29),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(De);var Mt=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(Mt.close())}),r.\u0275\u0275elementEnd()(),r.\u0275\u0275template(4,pe,1,0,"span",30),r.\u0275\u0275template(5,ce,2,1,"span",31),r.\u0275\u0275elementEnd()}if(2&Ve){var Be=r.\u0275\u0275nextContext();r.\u0275\u0275advance(4),r.\u0275\u0275property("ngIf",Be.hasDataLoaded),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",Be.hasDataLoaded)}}var se=function(){function Ve(Fe,De,Be,qe){this.data=Fe,this.mashupEvaluationService=De,this.localizationService=Be,this.dialogService=qe,this.selectTable=0,this.maxPercent=0,this.numGoals=0,this.emptyFile=!1,this.exceedsColumns=!1,this.hasDataLoaded=!1,this.messageBannerModelColumn={bannerType:0,iconName:"pbi-glyph-warning",message:this.localizationService.get("MetricsScorecard_Import_Error_Column_Num")},this.messageBannerModelEmpty={bannerType:0,iconName:"pbi-glyph-error",message:this.localizationService.get("MetricsScorecard_Import_Error_Empty_File")}}return Ve.prototype.ngOnInit=function(){var Fe=this;this.goalImportFileMetadata={file_name:"ExampleFile",tables:[]},this.goalPreviewData=this.goalImportFileMetadata.tables,this.scorecardAttributes=["Name","Owner","Status","Value","Progress","Due Date","Notes"],this.getAllTables().then(function(De){if(_.isEmpty(De))Fe.emptyFile=!0;else{for(var Be=0,qe=De;Be<qe.length;Be++){var Mt=qe[Be];Fe.goalPreviewData.push({sheetName:Mt.sheetName,tableName:Mt.tableName,column:[],rows:[]})}Fe.onSelectTable(0)}})},Ve.prototype.onSelectTable=function(Fe){return(0,t.mG)(this,void 0,void 0,function(){var De,Be;return(0,t.Jh)(this,function(qe){switch(qe.label){case 0:return this.selectTable=Fe,De=this.goalImportFileMetadata.tables[Fe],_.isEmpty(De.column)?(this.hasDataLoaded=!1,[4,this.evaluatePreviewTable(De.sheetName,De.tableName)]):[3,2];case 1:Be=qe.sent(),this.goalImportFileMetadata.tables[this.selectTable].column=Be.columns,this.goalImportFileMetadata.tables[this.selectTable].rows=Be.rows,qe.label=2;case 2:return this.setHeaders(),this.numGoals=this.goalImportFileMetadata.tables[this.selectTable].rows.length,this.exceedsColumns=this.goalImportFileMetadata.tables[this.selectTable].column.length>=7,[2]}})})},Ve.prototype.setHeaders=function(){this.excelHeaders=this.goalImportFileMetadata.tables[this.selectTable].column;for(var Fe=[],De=0,Be=this.excelHeaders;De<Be.length;De++)this.stringSimilarity(Be[De],this.scorecardAttributes),Fe.push(this.maxPercentHeader);this.matchedHeaderName=Fe,this.hasDataLoaded=!0},Ve.prototype.getAllTables=function(){return(0,t.mG)(this,void 0,void 0,function(){var Fe,De,Be,qe,Mt,ft,Vt,jt;return(0,t.Jh)(this,function(Zt){switch(Zt.label){case 0:return Fe=this.data.fileData,y.fF.assertValue(this.data.fileData,"Missing file data"),[4,this.mashupEvaluationService.evaluateQuery('section Section1; shared Query = let source = Excel.Workbook(Binary.FromText("'.concat(Fe,'")) in source;'))];case 1:for(De=Zt.sent(),Be=[],qe=_.indexOf(De.columns,"Name"),Mt=_.indexOf(De.columns,"Kind"),ft=0,Vt=De.rows;ft<Vt.length;ft++)"Table"===(jt=Vt[ft])[Mt]&&Be.push({sheetName:jt[qe],tableName:jt[Mt],column:[],rows:[]});return[2,Be]}})})},Ve.prototype.importFromFile=function(){var Fe;return(0,t.mG)(this,void 0,void 0,function(){var Be;return(0,t.Jh)(this,function(qe){switch(qe.label){case 0:return[4,this.mashupEvaluationService.importGoal((Be=this.data.scorecard).groupId,Be.id,this.goalImportFileMetadata.tables[this.selectTable],this.matchedHeaderName,null===(Fe=Be.goalStatuses)||void 0===Fe?void 0:Fe.statuses)];case 1:return qe.sent(),this.close(),[2]}})})},Ve.prototype.evaluatePreviewTable=function(Fe,De){return(0,t.mG)(this,void 0,void 0,function(){return(0,t.Jh)(this,function(qe){return[2,this.mashupEvaluationService.evaluateQuery('section Section1; shared Query = let source = Excel.Workbook(Binary.FromText("'.concat(this.data.fileData,'")){[Item="').concat(Fe,'",Kind="').concat(De,'"]}[Data] in source;'))]})})},Ve.prototype.stringSimilarity=function(Fe,De,Be){function qe(Jn,Ft){Jn=" ".repeat(Ft-1)+Jn.toLowerCase()+" ".repeat(Ft-1);for(var cn=new Array(Jn.length-Ft+1),Zn=0;Zn<cn.length;Zn++)cn[Zn]=Jn.slice(Zn,Zn+Ft);return cn}void 0===Be&&(Be=2),this.maxPercent=0;for(var Mt=0,ft=0,Vt=De;ft<Vt.length;ft++){var jt=Vt[ft];if(!Fe?.length||!jt?.length)return 0;for(var vn=Fe.length<jt.length?jt:Fe,En=qe(Fe.length<jt.length?Fe:jt,Be),An=qe(vn,Be),tn=new Set(En),$n=An.length,Qt=0,xn=0,Qn=An;xn<Qn.length;xn++)tn.delete(Qn[xn])&&Qt++;(Mt=Qt/$n)>this.maxPercent&&(this.maxPercent=Mt,this.maxPercentHeader=jt)}},Ve.prototype.close=function(){this.dialogService.closeAll()},Ve.\u0275fac=function(De){return new(De||Ve)(r.\u0275\u0275directiveInject(c.WI),r.\u0275\u0275directiveInject(l.f),r.\u0275\u0275directiveInject(C.o),r.\u0275\u0275directiveInject(m.x))},Ve.\u0275cmp=r.\u0275\u0275defineComponent({type:Ve,selectors:[["import-dialog"]],features:[r.\u0275\u0275ProvidersFeature([l.f])],decls:13,vars:9,consts:[[1,"header"],["mat-dialog-title","","localize","MetricsScorecard_Import_Dialog_Header"],[1,"title"],["mat-icon-button","",1,"close",3,"click"],["fontIcon","pbi-glyph-close",1,"glyph-mini"],["class","impact-margin",3,"viewModel",4,"ngIf"],["class","select",4,"ngIf"],["class","scroll",4,"ngIf"],["class","pbi-spinner-large",4,"ngIf"],["class","import",4,"ngIf"],[1,"impact-margin",3,"viewModel"],[1,"select"],["localize","MetricsScorecard_Import_Dialog_Description",1,"description"],[1,"select-table",3,"change"],["class","table-select",3,"value",4,"ngFor","ngForOf"],[1,"table-select",3,"value"],[1,"scroll"],["id","preview-table"],[4,"ngFor","ngForOf"],[1,"table-headers"],["id","left"],[1,"col-headers",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"right"],[3,"value"],[1,"pbi-spinner-large"],[1,"import"],[1,"dialog-buttons"],["localize","Import","localizeTooltip","Import",1,"pbi-fluent-button","primary",3,"click"],["localize","PBI_Button_Label_Cancel","localizeTooltip","PBI_Button_Label_Cancel",1,"pbi-fluent-button",3,"click"],["class","num-goals","localize","MetricsScorecard_Import_Dialog_Number_Metrics",4,"ngIf"],["class","number",4,"ngIf"],["localize","MetricsScorecard_Import_Dialog_Number_Metrics",1,"num-goals"],[1,"number"]],template:function(De,Be){1&De&&(r.\u0275\u0275elementStart(0,"section",0),r.\u0275\u0275element(1,"h1",1)(2,"div",2),r.\u0275\u0275elementStart(3,"button",3),r.\u0275\u0275listener("click",function(){return Be.close()}),r.\u0275\u0275pipe(4,"localize"),r.\u0275\u0275element(5,"mat-icon",4),r.\u0275\u0275elementEnd()(),r.\u0275\u0275template(6,I,1,1,"message-banner",5),r.\u0275\u0275template(7,H,1,1,"message-banner",5),r.\u0275\u0275elementStart(8,"div"),r.\u0275\u0275template(9,Y,4,1,"div",6),r.\u0275\u0275template(10,N,5,3,"div",7),r.\u0275\u0275template(11,he,1,0,"pbi-spinner",8),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(12,ge,6,2,"section",9)),2&De&&(r.\u0275\u0275advance(3),r.\u0275\u0275attribute("aria-label",r.\u0275\u0275pipeBind1(4,7,"Close")),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngIf",Be.exceedsColumns),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",Be.emptyFile),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",(null==Be.goalPreviewData?null:Be.goalPreviewData.length)>0),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",Be.hasDataLoaded),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!Be.hasDataLoaded&&!Be.emptyFile),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",(null==Be.goalPreviewData?null:Be.goalPreviewData.length)>0))},dependencies:[k.NgForOf,k.NgIf,c.uh,O.YN,O.Kr,O.EJ,O.JJ,O.On,s.X,ne.r,ee.Hw,Z.A,v.k,E.F],styles:[".header[_ngcontent-%COMP%]{flex:0 0 50px;display:flex;flex-direction:row;align-items:center}.header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{flex:1 1 auto}.header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:none;margin:0;background-color:transparent;border:0;padding:0}.header[_ngcontent-%COMP%]   button.close[_ngcontent-%COMP%]{flex:0 0 20px;align-self:flex-start}.select-table[_ngcontent-%COMP%]{border-bottom:revert;width:10%;margin-left:10px;height:32px;cursor:pointer;padding:0 8px;border-width:1px}div.scroll[_ngcontent-%COMP%]{height:55vh;overflow-y:scroll}.description[_ngcontent-%COMP%]{display:inline}.select[_ngcontent-%COMP%]{padding-bottom:15px}#preview-table[_ngcontent-%COMP%]{padding-top:15px;border-collapse:collapse;width:100%}#preview-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], #preview-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #bebebe;padding:4px}#preview-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding-top:4px;padding-bottom:4px;font-size:12px;text-align:left;background-color:#ccc}.col-headers[_ngcontent-%COMP%]{border-color:transparent;background-color:transparent;border-bottom:black;font-size:14px;text-overflow:ellipsis}.table-headers[_ngcontent-%COMP%]{display:flex;padding-left:10px;padding-right:8px}.right[_ngcontent-%COMP%]{font-weight:400;text-align:center;padding-left:4vh}.pbi-fluent-button[_ngcontent-%COMP%]{margin-left:8px}.pbi-spinner-large[_ngcontent-%COMP%]{top:50%;left:50%;position:absolute}.loading-spinner[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;opacity:0;animation-name:fade-in;animation-duration:.5s;animation-iteration-count:1;animation-timing-function:linear;animation-delay:1s;animation-fill-mode:forwards}.import[_ngcontent-%COMP%]{flex:0 0 55px;display:flex;bottom:13%;flex-direction:inherit;align-items:flex-end;padding-right:1%;position:fixed;display:-webkit-inline-box}.number[_ngcontent-%COMP%]{padding-left:1%;display:contents}.num-goals[_ngcontent-%COMP%]{margin-left:25px}"]}),Ve}(),xe=n(70060),me=n(77695),Oe=new r.InjectionToken("LinkedMetricsLauncherService"),Ce=n(60166),Le=n(98587),ze=n(43286),$e=n(74466),We=n(35510),He=n(33554),Je=n(11547),j=n(59017),tt=n(77526),Ue=n(81905),oe=n(70032),h=n(22318),g=n(57243),u=n(83317),F=n(59973),W=n(14172),te=n(23558),U=n(68549),Q=n(48787),B=n(49223),P=n(73911),q=n(21719),le=n(9380),de=n(20930),V=n(87426),b=n(93379),L=n(62087),T=n(32027),X=n(558),ue=n(698),Ne=n(55710),Qe=n(56011),Xe=n(36858),it=n(95027),ut=n(56809),ot=n(33279),pt=n(26410),Ye=n(6425),dt=n(55102),Ot=n(74161),Et=n(67090),Gt=n(50042),K=n(49833),yn=n(65736),on=n(1882),Un=n(96147),yo=["inputFile"],Mo=["columnTable"],zo=function(){return["Metric_Owner_No_Scorecard_Access","Metric_Owners_No_Scorecard_Access","Share_Now"]};function po(Ve,Fe){if(1&Ve&&(r.\u0275\u0275element(0,"scorecard-access-banner",8),r.\u0275\u0275pipe(1,"async")),2&Ve){var De=r.\u0275\u0275nextContext(2).ngIf,Be=r.\u0275\u0275nextContext();r.\u0275\u0275property("scorecard",De)("users",r.\u0275\u0275pipeBind1(1,3,Be.goalOwners$))("labels",r.\u0275\u0275pureFunction0(5,zo))}}function lo(Ve,Fe){if(1&Ve){var De=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"label",18)(1,"input",19,20),r.\u0275\u0275listener("change",function(qe){r.\u0275\u0275restoreView(De);var Mt=r.\u0275\u0275nextContext(5);return r.\u0275\u0275resetView(Mt.onImportClick(qe))}),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(3,"span",21),r.\u0275\u0275elementEnd()}}function xo(Ve,Fe){if(1&Ve){var De=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"button",12),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(De);var Mt=r.\u0275\u0275nextContext(4);return r.\u0275\u0275resetView(Mt.onNewGoalClick())}),r.\u0275\u0275pipe(2,"localize"),r.\u0275\u0275element(3,"mat-icon",13)(4,"span",14),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(5,"button",15),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(De);var Mt=r.\u0275\u0275nextContext(4);return r.\u0275\u0275resetView(Mt.onNewSubGoalClick())}),r.\u0275\u0275pipe(6,"localize"),r.\u0275\u0275pipe(7,"async"),r.\u0275\u0275element(8,"span",16),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(9,lo,4,0,"label",17),r.\u0275\u0275elementContainerEnd()}if(2&Ve){var Be=r.\u0275\u0275nextContext(4);r.\u0275\u0275advance(1),r.\u0275\u0275classProp("primary",!Be.toolbarNewLook),r.\u0275\u0275property("disabled",!Be.scorecardCapabilities.createGoal.enabled),r.\u0275\u0275attribute("aria-label",r.\u0275\u0275pipeBind1(2,7,"NewMetric")),r.\u0275\u0275advance(4),r.\u0275\u0275property("disabled",!Be.scorecardCapabilities.createGoal.enabled||1!==r.\u0275\u0275pipeBind1(7,11,Be.numberOfSelectedGoals$)),r.\u0275\u0275attribute("aria-label",r.\u0275\u0275pipeBind1(6,9,"AddSubmetric")),r.\u0275\u0275advance(4),r.\u0275\u0275property("ngIf",Be.showImportButton)}}var so=function(Fe){return{active:Fe}};function bo(Ve,Fe){if(1&Ve&&(r.\u0275\u0275elementStart(0,"button",32,33),r.\u0275\u0275element(2,"mat-icon",34)(3,"span",35)(4,"mat-icon",36),r.\u0275\u0275elementEnd()),2&Ve){var De=r.\u0275\u0275reference(1);r.\u0275\u0275nextContext();var Be=r.\u0275\u0275reference(4),qe=r.\u0275\u0275nextContext(4);r.\u0275\u0275property("matMenuTriggerFor",Be)("ngClass",r.\u0275\u0275pureFunction1(5,so,!0===De.menuOpen)),r.\u0275\u0275advance(2),r.\u0275\u0275propertyInterpolate("fontIcon","List"===qe.viewType?"pbi-glyph-list":"pbi-glyph-table"),r.\u0275\u0275advance(1),r.\u0275\u0275property("localize","View")("localizeTooltip","View")}}function Rn(Ve,Fe){if(1&Ve){var De=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",37),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(De);var qe=r.\u0275\u0275nextContext(5);return r.\u0275\u0275resetView(qe.openHeatmapConfigurationPane())}),r.\u0275\u0275pipe(1,"localize"),r.\u0275\u0275element(2,"mat-icon",38)(3,"span",39),r.\u0275\u0275elementEnd()}2&Ve&&r.\u0275\u0275attribute("aria-label",r.\u0275\u0275pipeBind1(1,1,"MetricsCustomizeHeatmap"))}function go(Ve,Fe){if(1&Ve){var De=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",40),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(De);var qe=r.\u0275\u0275nextContext(5);return r.\u0275\u0275resetView(qe.openHierarchiesBuilder())}),r.\u0275\u0275pipe(1,"localize"),r.\u0275\u0275element(2,"mat-icon",41)(3,"span",42),r.\u0275\u0275elementEnd()}2&Ve&&r.\u0275\u0275attribute("aria-label",r.\u0275\u0275pipeBind1(1,1,"MetricsManageHierarchies"))}function Io(Ve,Fe){1&Ve&&r.\u0275\u0275element(0,"scorecard-hierarchy-button")}function Po(Ve,Fe){if(1&Ve){var De=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275template(1,bo,5,7,"button",22),r.\u0275\u0275pipe(2,"async"),r.\u0275\u0275elementStart(3,"mat-menu",23,24)(5,"button",25),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(De);var Mt=r.\u0275\u0275nextContext(4);return r.\u0275\u0275resetView(Mt.onScorecardViewClick())}),r.\u0275\u0275element(6,"mat-icon",26)(7,"span",27),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(8,"button",25),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(De);var Mt=r.\u0275\u0275nextContext(4);return r.\u0275\u0275resetView(Mt.onHeatmapViewClick())}),r.\u0275\u0275element(9,"mat-icon",28)(10,"span",29),r.\u0275\u0275elementEnd()(),r.\u0275\u0275template(11,Rn,4,3,"button",30),r.\u0275\u0275template(12,go,4,3,"button",31),r.\u0275\u0275template(13,Io,1,0,"scorecard-hierarchy-button",7),r.\u0275\u0275elementContainerEnd()}if(2&Ve){var Be=r.\u0275\u0275nextContext(4);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",r.\u0275\u0275pipeBind1(2,5,Be.hasHierarchies$)),r.\u0275\u0275advance(2),r.\u0275\u0275property("overlapTrigger",!1),r.\u0275\u0275advance(8),r.\u0275\u0275property("ngIf","Heatmap"===Be.viewType),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",Be.isEditMode&&"Heatmap"===Be.viewType),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf","List"===Be.viewType)}}function Ho(Ve,Fe){if(1&Ve&&(r.\u0275\u0275elementStart(0,"div",9)(1,"div",10),r.\u0275\u0275template(2,xo,10,13,"ng-container",7),r.\u0275\u0275element(3,"div",11),r.\u0275\u0275template(4,Po,14,7,"ng-container",7),r.\u0275\u0275elementEnd()()),2&Ve){var De=r.\u0275\u0275nextContext(3);r.\u0275\u0275classProp("new-look",De.toolbarNewLook),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",("List"===De.viewType||"Compact"===De.viewType)&&De.isEditMode),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",De.showHierarchies)}}function Wn(Ve,Fe){if(1&Ve&&r.\u0275\u0275element(0,"scorecard-title",43),2&Ve){var De=r.\u0275\u0275nextContext(2).ngIf,Be=r.\u0275\u0275nextContext();r.\u0275\u0275property("scorecardName",De.name)("scorecardDescription",De.description)("isTitleEditable",Be.isTitleEditable)}}function we(Ve,Fe){if(1&Ve){var De=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"scorecard-metric-picker-toolbar",50),r.\u0275\u0275listener("filterBy",function(Mt){r.\u0275\u0275restoreView(De);var ft=r.\u0275\u0275nextContext(5);return r.\u0275\u0275resetView(ft.onFilterKeywordChange(Mt))}),r.\u0275\u0275pipe(1,"async"),r.\u0275\u0275elementEnd()}if(2&Ve){var Be=r.\u0275\u0275nextContext(5);r.\u0275\u0275property("filterText",r.\u0275\u0275pipeBind1(1,1,Be.filterBy$).keyword)}}function Gn(Ve,Fe){if(1&Ve){var De=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"scorecard-list-toolbar",51),r.\u0275\u0275listener("filterBy",function(ft){r.\u0275\u0275restoreView(De);var Vt=r.\u0275\u0275nextContext(5);return r.\u0275\u0275resetView(Vt.onFilterKeywordChange(ft))})("onNewGoal",function(){r.\u0275\u0275restoreView(De);var ft=r.\u0275\u0275nextContext(5);return r.\u0275\u0275resetView(ft.onNewGoalClick(!1))})("onNewSubGoal",function(){r.\u0275\u0275restoreView(De);var ft=r.\u0275\u0275nextContext(5);return r.\u0275\u0275resetView(ft.onNewSubGoalClick())})("onLinkedMetricInit",function(){r.\u0275\u0275restoreView(De);var ft=r.\u0275\u0275nextContext(5);return r.\u0275\u0275resetView(ft.onLinkedMetricInit())}),r.\u0275\u0275pipe(1,"async"),r.\u0275\u0275pipe(2,"async"),r.\u0275\u0275elementEnd()}if(2&Ve){var Be=r.\u0275\u0275nextContext(4).ngIf,qe=r.\u0275\u0275nextContext();r.\u0275\u0275property("isEditMode",qe.isEditMode)("scorecard",Be)("scorecardCapabilities",qe.scorecardCapabilities)("numberOfSelectedGoals",r.\u0275\u0275pipeBind1(1,6,qe.numberOfSelectedGoals$))("filterText",r.\u0275\u0275pipeBind1(2,8,qe.filterBy$).keyword)("showTitle","Compact"===qe.viewType)}}function Ro(Ve,Fe){if(1&Ve&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275template(1,we,2,3,"scorecard-metric-picker-toolbar",48),r.\u0275\u0275pipe(2,"async"),r.\u0275\u0275template(3,Gn,3,10,"ng-template",null,49,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementContainerEnd()),2&Ve){var De=r.\u0275\u0275reference(4),Be=r.\u0275\u0275nextContext(4);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",r.\u0275\u0275pipeBind1(2,2,Be.showPickerToolbar$))("ngIfElse",De)}}function ho(Ve,Fe){if(1&Ve){var De=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"scorecard-status-tiles",52),r.\u0275\u0275listener("onStatusSelected",function(ft){r.\u0275\u0275restoreView(De);var Vt=r.\u0275\u0275nextContext(4);return r.\u0275\u0275resetView(Vt.onGoalsStatusTileSelectionChange(ft))}),r.\u0275\u0275pipe(1,"async"),r.\u0275\u0275pipe(2,"async"),r.\u0275\u0275elementEnd()}if(2&Ve){var Be=r.\u0275\u0275nextContext(3).ngIf,qe=r.\u0275\u0275nextContext();r.\u0275\u0275property("goals",Be.goals)("goalStatusesByScorecardId",r.\u0275\u0275pipeBind1(1,4,qe.goalStatusesByScorecardId$))("goalStatusList",null==Be.goalStatuses?null:Be.goalStatuses.statuses)("selectedStatuses",r.\u0275\u0275pipeBind1(2,6,qe.filterBy$).statuses)}}function Wo(Ve,Fe){if(1&Ve){var De=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",53)(1,"div"),r.\u0275\u0275element(2,"mat-icon",54),r.\u0275\u0275elementStart(3,"input",55),r.\u0275\u0275listener("ngModelChange",function(Mt){r.\u0275\u0275restoreView(De);var ft=r.\u0275\u0275nextContext(4);return r.\u0275\u0275resetView(ft.onFilterKeywordChange(Mt))}),r.\u0275\u0275pipe(4,"localize"),r.\u0275\u0275pipe(5,"localize"),r.\u0275\u0275pipe(6,"async"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(7,"mat-icon",56),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(De);var Mt=r.\u0275\u0275nextContext(4);return r.\u0275\u0275resetView(Mt.toggleFilterRow())}),r.\u0275\u0275elementEnd()()()}if(2&Ve){var Be=r.\u0275\u0275nextContext(4);r.\u0275\u0275classProp("toolbar-visible",Be.isEditMode),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngModel",r.\u0275\u0275pipeBind1(6,9,Be.filterBy$).keyword),r.\u0275\u0275attribute("aria-label",r.\u0275\u0275pipeBind1(4,5,"Filter_By_Keyword"))("placeholder",r.\u0275\u0275pipeBind1(5,7,"Filter_By_Keyword"))}}function nn(Ve,Fe){if(1&Ve){var De=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",63),r.\u0275\u0275pipe(1,"async"),r.\u0275\u0275elementStart(2,"pbi-checkbox",64),r.\u0275\u0275listener("onChange",function(Mt){r.\u0275\u0275restoreView(De);var ft=r.\u0275\u0275nextContext(6);return r.\u0275\u0275resetView(ft.onSelectAllGoals(Mt))}),r.\u0275\u0275pipe(3,"async"),r.\u0275\u0275pipe(4,"localize"),r.\u0275\u0275pipe(5,"localize"),r.\u0275\u0275elementEnd()()}if(2&Ve){var Be=r.\u0275\u0275nextContext(6);r.\u0275\u0275classProp("box-checked",r.\u0275\u0275pipeBind1(1,5,Be.allGoalsSelected$)),r.\u0275\u0275advance(2),r.\u0275\u0275property("checked",r.\u0275\u0275pipeBind1(3,7,Be.allGoalsSelected$))("pbiTooltip",r.\u0275\u0275pipeBind1(5,11,"Metrics_BulkEditing_SelectAllMetrics")),r.\u0275\u0275attribute("aria-label",r.\u0275\u0275pipeBind1(4,9,"Metrics_BulkEditing_SelectAllMetrics"))}}function Ao(Ve,Fe){if(1&Ve){var De=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",73),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(De);var Mt=r.\u0275\u0275nextContext(9);return r.\u0275\u0275resetView(Mt.onToggleExpandAllMetrics())}),r.\u0275\u0275pipe(1,"localize"),r.\u0275\u0275pipe(2,"async"),r.\u0275\u0275element(3,"mat-icon",74),r.\u0275\u0275pipe(4,"async"),r.\u0275\u0275elementEnd()}if(2&Ve){var Be=r.\u0275\u0275nextContext(9);r.\u0275\u0275property("pbiTooltip",r.\u0275\u0275pipeBind1(1,2,r.\u0275\u0275pipeBind1(2,4,Be.showAllChildren$)?"FieldListMenuItem_CollapseAll":"FieldListMenuItem_ExpandAll")),r.\u0275\u0275advance(3),r.\u0275\u0275property("fontIcon",r.\u0275\u0275pipeBind1(4,6,Be.showAllChildren$)?"pbi-glyph-doublechevrondown":"pbi-glyph-doublechevronright")}}function lt(Ve,Fe){if(1&Ve){var De=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",75),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(De);var Mt=r.\u0275\u0275nextContext(9);return r.\u0275\u0275resetView(Mt.toggleFilterRow())}),r.\u0275\u0275pipe(1,"localize"),r.\u0275\u0275pipe(2,"async"),r.\u0275\u0275pipe(3,"localize"),r.\u0275\u0275pipe(4,"async"),r.\u0275\u0275element(5,"mat-icon",76),r.\u0275\u0275elementEnd()}if(2&Ve){var Be=r.\u0275\u0275nextContext(9);r.\u0275\u0275property("pbiTooltip",r.\u0275\u0275pipeBind1(3,6,r.\u0275\u0275pipeBind1(4,8,Be.filterRowVisible$)?"Filters_Hide":"Filters_Show")),r.\u0275\u0275attribute("aria-label",r.\u0275\u0275pipeBind1(1,2,r.\u0275\u0275pipeBind1(2,4,Be.filterRowVisible$)?"Filters_Hide":"Filters_Show"))}}function mt(Ve,Fe){if(1&Ve){var De=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"th",67)(1,"div",68),r.\u0275\u0275template(2,Ao,5,8,"button",69),r.\u0275\u0275pipe(3,"async"),r.\u0275\u0275template(4,lt,6,10,"button",70),r.\u0275\u0275elementStart(5,"div",71)(6,"scorecard-column-header",72),r.\u0275\u0275listener("onSortColumn",function(jt){r.\u0275\u0275restoreView(De);var Zt=r.\u0275\u0275nextContext(8);return r.\u0275\u0275resetView(Zt.sortColumn(jt))}),r.\u0275\u0275pipe(7,"async"),r.\u0275\u0275elementEnd()()()()}if(2&Ve){var Be=r.\u0275\u0275nextContext(2),qe=Be.$implicit,Mt=Be.index,ft=r.\u0275\u0275nextContext(6);r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",ft.collapseGoalsByDefault&&r.\u0275\u0275pipeBind1(3,6,ft.hasExpandableGoals$)),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",!ft.goalsNewHeaderEnabled),r.\u0275\u0275advance(2),r.\u0275\u0275property("column",ft.ScorecardColumnConfigs[qe.columnId])("index",Mt)("sort",r.\u0275\u0275pipeBind1(7,8,ft.sort$))("isEditMode",ft.isEditMode)}}function Ke(Ve,Fe){if(1&Ve){var De=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"th",78)(1,"scorecard-column-header",72),r.\u0275\u0275listener("onSortColumn",function(jt){r.\u0275\u0275restoreView(De);var Zt=r.\u0275\u0275nextContext(9);return r.\u0275\u0275resetView(Zt.sortColumn(jt))}),r.\u0275\u0275pipe(2,"async"),r.\u0275\u0275elementEnd()()}if(2&Ve){var Be=r.\u0275\u0275nextContext(3),qe=Be.$implicit,Mt=Be.index,ft=r.\u0275\u0275nextContext(6);r.\u0275\u0275advance(1),r.\u0275\u0275property("column",ft.ScorecardColumnConfigs[qe.columnId])("index",Mt)("sort",r.\u0275\u0275pipeBind1(2,4,ft.sort$))("isEditMode",ft.isEditMode)}}function bt(Ve,Fe){if(1&Ve&&r.\u0275\u0275template(0,Ke,3,6,"th",77),2&Ve){var De=r.\u0275\u0275nextContext(2).$implicit,Be=r.\u0275\u0275nextContext(6);r.\u0275\u0275property("ngIf",!Be.ScorecardColumnConfigs[De.columnId].hideHeaderInListView)}}function ht(Ve,Fe){if(1&Ve&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275template(1,mt,8,10,"th",65),r.\u0275\u0275template(2,bt,1,1,"ng-template",null,66,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementContainerEnd()),2&Ve){var De=r.\u0275\u0275reference(3),Be=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",0==Be.columnId)("ngIfElse",De)}}function Jt(Ve,Fe){if(1&Ve&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275template(1,ht,4,2,"ng-container",7),r.\u0275\u0275elementContainerEnd()),2&Ve){var De=Fe.$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",De.show)}}function $t(Ve,Fe){if(1&Ve&&(r.\u0275\u0275elementStart(0,"thead")(1,"tr",60)(2,"th",61),r.\u0275\u0275template(3,nn,6,13,"div",62),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(4,Jt,2,1,"ng-container",59),r.\u0275\u0275elementEnd()()),2&Ve){var De=r.\u0275\u0275nextContext(5);r.\u0275\u0275advance(2),r.\u0275\u0275classProp("show-checkmark",!!De.scorecardSelectionMode)("show-on-hover-only","ctrl"===De.scorecardSelectionMode),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf","single"!==De.scorecardSelectionMode),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",De.columnSettings)("ngForTrackBy",De.columnSettingId)}}function hn(Ve,Fe){if(1&Ve){var De=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"tbody",80),r.\u0275\u0275listener("showChildrenChange",function(Zt){r.\u0275\u0275restoreView(De);var vn=r.\u0275\u0275nextContext(6);return r.\u0275\u0275resetView(vn.onShowChildrenChange(Zt))})("dragStarted",function(Zt){r.\u0275\u0275restoreView(De);var vn=r.\u0275\u0275nextContext(6);return r.\u0275\u0275resetView(vn.onGoalDragStart(Zt))})("dragMoved",function(Zt){r.\u0275\u0275restoreView(De);var vn=r.\u0275\u0275nextContext(6);return r.\u0275\u0275resetView(vn.onGoalDragMove(Zt))}),r.\u0275\u0275pipe(1,"async"),r.\u0275\u0275elementEnd()}if(2&Ve){var Be=r.\u0275\u0275nextContext(),qe=Be.$implicit,Mt=Be.index,ft=r.\u0275\u0275nextContext(4).ngIf,Vt=r.\u0275\u0275nextContext();r.\u0275\u0275property("scorecard",ft)("columnSettings",Vt.columnSettings)("goal",qe)("color",Vt.colorPalette[Mt%Vt.colorPalette.length])("showChildren",r.\u0275\u0275pipeBind1(1,8,Vt.showChildren$))("goalDragInfo",Vt.goalDragInfo)("scorecardSelectionMode",Vt.scorecardSelectionMode)("forceColumnMinWidths",Vt.forceColumnMinWidths)}}function Nn(Ve,Fe){if(1&Ve&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275template(1,hn,2,10,"tbody",79),r.\u0275\u0275elementContainerEnd()),2&Ve){var De=Fe.$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!De.isHidden)}}function wn(Ve,Fe){if(1&Ve){var De=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"table",57,58),r.\u0275\u0275listener("cdkDropListDropped",function(Mt){r.\u0275\u0275restoreView(De);var ft=r.\u0275\u0275nextContext(4);return r.\u0275\u0275resetView(ft.onDropGoal(Mt))})("cdkDropListSorted",function(Mt){r.\u0275\u0275restoreView(De);var ft=r.\u0275\u0275nextContext(4);return r.\u0275\u0275resetView(ft.onGoalDropListSorted(Mt))}),r.\u0275\u0275pipe(2,"async"),r.\u0275\u0275template(3,$t,5,7,"thead",7),r.\u0275\u0275pipe(4,"async"),r.\u0275\u0275template(5,Nn,2,1,"ng-container",59),r.\u0275\u0275pipe(6,"async"),r.\u0275\u0275elementEnd()}if(2&Ve){var Be=r.\u0275\u0275nextContext(4);r.\u0275\u0275styleProp("padding-left",Be.scorecardTablePadding.left,"px")("padding-right",Be.scorecardTablePadding.right,"px"),r.\u0275\u0275property("cdkDropListDisabled",!r.\u0275\u0275pipeBind1(2,8,Be.canDragAndDrop$)),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngIf",r.\u0275\u0275pipeBind1(4,10,Be.showHeaders$)),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngForOf",r.\u0275\u0275pipeBind1(6,12,Be.goals$))("ngForTrackBy",Be.goalId)}}function jn(Ve,Fe){if(1&Ve){var De=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"compact-scorecard",81),r.\u0275\u0275listener("onSortColumn",function(ft){r.\u0275\u0275restoreView(De);var Vt=r.\u0275\u0275nextContext(4);return r.\u0275\u0275resetView(Vt.sortColumn(ft))}),r.\u0275\u0275pipe(1,"async"),r.\u0275\u0275elementEnd()}if(2&Ve){var Be=r.\u0275\u0275nextContext(3).ngIf,qe=r.\u0275\u0275nextContext();r.\u0275\u0275property("scorecard",Be)("isEditMode",qe.isEditMode)("viewSettings",qe.viewSettings)("sort",r.\u0275\u0275pipeBind1(1,4,qe.sort$))}}function co(Ve,Fe){if(1&Ve&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275template(1,Ro,5,4,"ng-container",7),r.\u0275\u0275pipe(2,"async"),r.\u0275\u0275pipe(3,"async"),r.\u0275\u0275template(4,ho,3,8,"scorecard-status-tiles",44),r.\u0275\u0275pipe(5,"async"),r.\u0275\u0275pipe(6,"async"),r.\u0275\u0275pipe(7,"async"),r.\u0275\u0275template(8,Wo,8,11,"div",45),r.\u0275\u0275pipe(9,"async"),r.\u0275\u0275template(10,wn,7,14,"table",46),r.\u0275\u0275template(11,jn,2,6,"compact-scorecard",47),r.\u0275\u0275elementContainerEnd()),2&Ve){var De=r.\u0275\u0275nextContext(3);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",De.goalsNewHeaderEnabled&&!(r.\u0275\u0275pipeBind1(2,5,De.hideToolbar$)||r.\u0275\u0275pipeBind1(3,7,De.hideHeader$))),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngIf",De.goalsNewHeaderEnabled&&r.\u0275\u0275pipeBind1(5,9,De.showStatus$)&&!(r.\u0275\u0275pipeBind1(6,11,De.hideCards$)||r.\u0275\u0275pipeBind1(7,13,De.hideHeader$))),r.\u0275\u0275advance(4),r.\u0275\u0275property("ngIf",r.\u0275\u0275pipeBind1(9,15,De.filterRowVisible$)),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf","List"===De.viewType),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf","Compact"===De.viewType)}}function Xn(Ve,Fe){if(1&Ve){var De=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"scorecard-heatmap-toolbar",50),r.\u0275\u0275listener("filterBy",function(Mt){r.\u0275\u0275restoreView(De);var ft=r.\u0275\u0275nextContext(4);return r.\u0275\u0275resetView(ft.onFilterKeywordChange(Mt))}),r.\u0275\u0275pipe(1,"async"),r.\u0275\u0275elementEnd()}if(2&Ve){var Be=r.\u0275\u0275nextContext(4);r.\u0275\u0275property("filterText",r.\u0275\u0275pipeBind1(1,1,Be.filterBy$).keyword)}}function Lo(Ve,Fe){if(1&Ve&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275template(1,Xn,2,3,"scorecard-heatmap-toolbar",82),r.\u0275\u0275element(2,"heat-map",83),r.\u0275\u0275elementContainerEnd()),2&Ve){var De=r.\u0275\u0275nextContext(3);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",De.goalsNewHeaderEnabled)}}function zn(Ve,Fe){if(1&Ve){var De=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"scorecard-list-toolbar",84),r.\u0275\u0275listener("filterBy",function(ft){r.\u0275\u0275restoreView(De);var Vt=r.\u0275\u0275nextContext(3);return r.\u0275\u0275resetView(Vt.onFilterKeywordChange(ft))})("onNewGoal",function(){r.\u0275\u0275restoreView(De);var ft=r.\u0275\u0275nextContext(3);return r.\u0275\u0275resetView(ft.onNewGoalClick(!1))})("onNewSubGoal",function(){r.\u0275\u0275restoreView(De);var ft=r.\u0275\u0275nextContext(3);return r.\u0275\u0275resetView(ft.onNewSubGoalClick())})("onLinkedMetricInit",function(){r.\u0275\u0275restoreView(De);var ft=r.\u0275\u0275nextContext(3);return r.\u0275\u0275resetView(ft.onLinkedMetricInit())}),r.\u0275\u0275pipe(2,"async"),r.\u0275\u0275pipe(3,"async"),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(4,"scorecard-board-view",85),r.\u0275\u0275elementContainerEnd()}if(2&Ve){var Be=r.\u0275\u0275nextContext(2).ngIf,qe=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("isEditMode",qe.isEditMode)("scorecardCapabilities",qe.scorecardCapabilities)("numberOfSelectedGoals",r.\u0275\u0275pipeBind1(2,6,qe.numberOfSelectedGoals$))("filterText",r.\u0275\u0275pipeBind1(3,8,qe.filterBy$).keyword),r.\u0275\u0275advance(3),r.\u0275\u0275property("boardSettings",qe.boardSettings)("metricsGoalStatuses",null==Be.goalStatuses?null:Be.goalStatuses.statuses)}}function mo(Ve,Fe){if(1&Ve){var De=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"div",3),r.\u0275\u0275listener("on-resize",function(){r.\u0275\u0275restoreView(De);var Mt=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(Mt.setVisibleColumns())}),r.\u0275\u0275template(2,po,2,6,"scorecard-access-banner",4),r.\u0275\u0275template(3,Ho,5,4,"div",5),r.\u0275\u0275pipe(4,"async"),r.\u0275\u0275pipe(5,"async"),r.\u0275\u0275template(6,Wn,1,3,"scorecard-title",6),r.\u0275\u0275pipe(7,"async"),r.\u0275\u0275pipe(8,"async"),r.\u0275\u0275template(9,co,12,17,"ng-container",7),r.\u0275\u0275template(10,Lo,3,1,"ng-container",7),r.\u0275\u0275template(11,zn,5,10,"ng-container",7),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementContainerEnd()}if(2&Ve){var Be=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275styleProp("overflow-x",null!=Be.viewSettings&&Be.viewSettings.dropColumns?"hidden":"auto"),r.\u0275\u0275classProp("heat-map-scroll","Heatmap"===Be.viewType)("new-header",Be.goalsNewHeaderEnabled)("compact","Compact"===Be.viewType),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",Be.showScorecardAccessBanner&&Be.isEditMode),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!Be.goalsNewHeaderEnabled&&(Be.isEditMode||Be.toolbarNewLook)&&!(r.\u0275\u0275pipeBind1(4,14,Be.hideToolbar$)||r.\u0275\u0275pipeBind1(5,16,Be.hideHeader$))),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngIf",Be.goalsNewHeaderEnabled&&!(r.\u0275\u0275pipeBind1(7,18,Be.hideTitle$)||r.\u0275\u0275pipeBind1(8,20,Be.hideHeader$))&&"Compact"!==Be.viewType),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngIf","List"===Be.viewType||"Compact"===Be.viewType),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf","Heatmap"===Be.viewType),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf","Board"===Be.viewType)}}function Yn(Ve,Fe){if(1&Ve){var De=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"empty-scorecard",86),r.\u0275\u0275listener("onNewGoal",function(){r.\u0275\u0275restoreView(De);var Mt=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(Mt.onNewGoalClick(!0))})("onLinkToGoal",function(){r.\u0275\u0275restoreView(De);var Mt=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(Mt.onLinkedMetricInit())}),r.\u0275\u0275pipe(1,"async"),r.\u0275\u0275pipe(2,"async"),r.\u0275\u0275elementEnd()}if(2&Ve){var Be=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("isMetricsPicker",r.\u0275\u0275pipeBind1(1,2,Be.showPickerToolbar$))("canEdit",Be.isEditMode&&r.\u0275\u0275pipeBind1(2,4,Be.userHasEditPermissions$))}}function jo(Ve,Fe){if(1&Ve&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275template(1,mo,12,22,"ng-container",0),r.\u0275\u0275pipe(2,"async"),r.\u0275\u0275template(3,Yn,3,6,"ng-template",null,2,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementContainerEnd()),2&Ve){var De=r.\u0275\u0275reference(4),Be=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",r.\u0275\u0275pipeBind1(2,2,Be.hasGoals$))("ngIfElse",De)}}function Fo(Ve,Fe){1&Ve&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275element(1,"span",89),r.\u0275\u0275elementContainerEnd())}function qt(Ve,Fe){1&Ve&&r.\u0275\u0275element(0,"span",90)}function Kn(Ve,Fe){if(1&Ve&&(r.\u0275\u0275elementStart(0,"div",87),r.\u0275\u0275template(1,Fo,2,0,"ng-container",0),r.\u0275\u0275pipe(2,"async"),r.\u0275\u0275template(3,qt,1,0,"ng-template",null,88,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementEnd()),2&Ve){var De=r.\u0275\u0275reference(4),Be=r.\u0275\u0275nextContext();r.\u0275\u0275classProp("border-top",Be.toolbarNewLook),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",null===r.\u0275\u0275pipeBind1(2,4,Be.scorecard$))("ngIfElse",De)}}var wo=function(){function Ve(Fe,De,Be,qe,Mt,ft,Vt,jt,Zt,vn,En,An,tn,$n,Qt,xn){var Qn=this;this.scorecardService=Fe,this.heatmapService=De,this.detailsPaneLauncher=Be,this.hierarchyPane=qe,this.changeDetectorRef=Mt,this.featureSwitchService=ft,this.goalsTutorialService=Vt,this.hierarchyService=jt,this.capabilityService=Zt,this.expansionService=vn,this.scorecardElement=En,this.linkedMetricsLauncher=An,this.dialogService=tn,this.viewsService=$n,this.scorecardSettings=Qt,this.scorecardHost=xn,this.colorPalette=a.gT.ColorPalette,this.viewType="List",this.sort$=new We.X((0,t.pi)({},a.Ij)),this.filterRowVisible$=new We.X(!1),this.filterBy$=new We.X({}),this.onDestroy$=new He.t(1),this.boardSettings={showGoalVisualGoalName:!0,showGoalVisualOwner:!0,showGoalVisualGrowth:!0,showGoalVisualScorecardName:!0,showVisualization:!0},this.goalDragInfo={},this.ScorecardColumnConfigs=a.Ml,this.forceColumnMinWidths=!1,this.scorecardTablePadding=a.gT.ScorecardTablePadding,this.sortColumn=function(ro){return Qn.sort$.next(ro)},this.isExcelFile=!1}return Ve.prototype.goalId=function(Fe,De){return De.id},Ve.prototype.columnSettingId=function(Fe,De){return De.columnId},Ve.prototype.ngOnInit=function(){var De,Be,qe,Mt,ft,Vt,jt,Zt,vn,En,An,tn,$n,Qt,xn,Qn,Fe=this;y.fF.assertValue(this.scorecardDetails$,"Scorecard details should be set at initialization time"),this.showImportButton=!!this.featureSwitchService.featureSwitches.goalsShowImportFromFileUI&&!!this.dialogService,this.showColumnSettingsMenu=!!this.featureSwitchService.featureSwitches.goalsColumnSettings,this.showHierarchies=!!this.featureSwitchService.featureSwitches.goalsHierarchies,this.toolbarNewLook=!!this.featureSwitchService.featureSwitches.goalsHierarchies,this.showScorecardAccessBanner=!!this.featureSwitchService.featureSwitches.goalsScorecardAccessBanner,this.bulkDeleteEnabled=!!this.featureSwitchService.featureSwitches.goalsBulkDelete,this.goalsNewHeaderEnabled=this.featureSwitchService.featureSwitches.goalsNewHeader,this.isTitleEditable=this.featureSwitchService.featureSwitches.goalsSkipScorecardCreationPane,this.collapseGoalsByDefault=!!this.featureSwitchService.featureSwitches.collapseGoalsByDefault,this.scorecard$=this.scorecardDetails$.pipe((0,tt.x)(function(Ae,_t){return!_t.reload&&_.isEqual(Ae,_t)}),(0,Ue.w)(function(Ae){if(!Ae)return(0,Je.of)(void 0);if(!(Ae.groupId&&Ae.scorecardId||Ae.prefetchedScorecard))return(0,Je.of)(null);var _t;if(Ae.prefetchedScorecard)_t=Fe.scorecardService.loadPrefetchedScorecard(Ae.prefetchedScorecard);else{var xt=Fe.showHierarchies?(0,i.ID)(Ae.initialHierarchyPath):void 0;_t=Fe.scorecardService.loadScorecard(Ae.groupId,Ae.scorecardId,!0,xt)}return Ae.reload?_t:_t.pipe((0,oe.g)(0),(0,h.O)(void 0))}),(0,g.d)(1)),(0,j.aj)([this.scorecardDetails$,this.scorecard$]).pipe((0,u.R)(this.onDestroy$)).subscribe(function(Ae){var _t=Ae[0],xt=Ae[1];if(_t&&_t.onScorecardUpdated&&xt){var Yt=_.filter(xt.goals,function(Dn){return!Dn.isNew}),un=p.q.flattenGoals(Yt);_t.onScorecardUpdated((0,t.pi)((0,t.pi)({},xt),{goals:un}))}}),(0,j.aj)([this.scorecardDetails$,this.scorecard$]).pipe((0,tt.x)(function(Ae,_t){var xt=Ae[0],Yt=Ae[1],un=_t[0],Dn=_t[1];return Yt?.id===Dn?.id&&xt?.initialSelectedGoalId===un?.initialSelectedGoalId})).pipe((0,u.R)(this.onDestroy$)).subscribe(function(Ae){var _t=Ae[0],xt=Ae[1];!_.isNil(_t?.initialSelectedGoalId)&&!_.isNil(xt)&&Fe.detailsPaneLauncher.openGoalDetails(Fe.scorecardService,_t?.initialSelectedGoalId,d.E.Default)}),(0,j.aj)([this.scorecardDetails$,this.scorecardService.isLoading()]).pipe((0,u.R)(this.onDestroy$),(0,F.h)(function(Ae){var _t=Ae[0];return!!_t?.onLoading})).subscribe(function(Ae){return Ae[0].onLoading(Ae[1])}),this.hasGoals$=this.scorecard$.pipe((0,W.U)(function(Ae){var _t;return(null===(_t=Ae?.goals)||void 0===_t?void 0:_t.length)>0})),this.goals$=this.scorecard$.pipe((0,W.U)(function(Ae){return Ae?.goals})),this.hasSavedGoals$=this.goals$.pipe((0,W.U)(function(Ae){var _t;return(null===(_t=Ae?.filter(function(xt){return!xt?.isNew}))||void 0===_t?void 0:_t.length)>0})),null===(Be=null===(De=this.scorecardSettings)||void 0===De?void 0:De.settings)||void 0===Be||Be.pipe().subscribe(function(Ae){Fe.boardSettings=Ae}),this.columnSettings$=this.scorecard$.pipe((0,tt.x)(function(Ae,_t){return _.isEqual(Ae?.columnSettings,_t?.columnSettings)}),(0,W.U)(function(Ae){return Ae?.columnSettings})),this.showStatus$=this.columnSettings$.pipe((0,W.U)(function(Ae){return w._.isColumnVisible(Ae,2)})),this.userHasEditPermissions$=this.scorecard$.pipe((0,W.U)(function(Ae){return(0,ze.yE)((0,xe.l)(Ae?.permissions),2)}));var ro=this.scorecardDetails$.pipe((0,F.h)(function(Ae){return!!Ae?.settings$}),(0,Ue.w)(function(Ae){return Ae?.settings$}),(0,h.O)(void 0));this.showHeaders$=(0,j.aj)([this.scorecard$,ro]).pipe((0,W.U)(function(Ae){var _t=Ae[0],xt=Ae[1];return!xt?.hideColumnHeaders&&_.some(_t?.goals,function(Yt){return null==Yt.state||"Consumption"===Yt.state})}));var Jn=this.scorecardService.isEditMode();Jn.pipe((0,u.R)(this.onDestroy$)).subscribe(function(Ae){Fe.isEditMode=Ae,Fe.changeDetectorRef.markForCheck()}),this.scorecardDetails$.pipe((0,Ue.w)(function(Ae){var _t;return null!==(_t=Ae?.isEditMode$)&&void 0!==_t?_t:(0,Je.of)(!1)}),(0,u.R)(this.onDestroy$)).subscribe(function(Ae){return Fe.scorecardService.setEditMode(Ae)}),this.scorecardDetails$.pipe((0,F.h)(function(Ae){return!!Ae?.refresh$}),(0,Ue.w)(function(Ae){return Ae?.refresh$}),(0,te.M)(this.scorecard$.pipe((0,F.h)(function(Ae){return!!Ae}))),(0,u.R)(this.onDestroy$)).subscribe(function(Ae){var xt=Ae[1];"Heatmap"===Fe.scorecardService.viewType?Fe.heatmapService.refreshAll():Fe.heatmapService.clearCache(),Fe.hierarchyService.loadHierarchies(xt.groupId,xt.id,!1),Fe.scorecardService.loadScorecard(xt.groupId,xt.id,!1,xt.hierarchyPaths)}),this.scorecardDetails$.pipe((0,F.h)(function(Ae){return!!Ae?.bulkEditingClearSelection$}),(0,Ue.w)(function(Ae){return Ae?.bulkEditingClearSelection$}),(0,u.R)(this.onDestroy$)).subscribe(function(){return Fe.scorecardService.unselectAllGoals()}),this.scorecardDetails$.pipe((0,F.h)(function(Ae){return!!Ae?.bulkEditingDelete$}),(0,Ue.w)(function(Ae){return Ae?.bulkEditingDelete$}),(0,u.R)(this.onDestroy$)).subscribe(function(){return Fe.scorecardService.bulkDeleteGoalsPrompt()}),this.scorecardDetails$.pipe((0,F.h)(function(Ae){return!!Ae?.bulkEditingUpdate$}),(0,Ue.w)(function(Ae){return Ae?.bulkEditingUpdate$}),(0,u.R)(this.onDestroy$)).subscribe(function(){return Fe.openBulkUpdatePane()}),this.selectedGoalIds$=this.scorecardService.getSelectedGoalIdsObservable(),this.numberOfSelectedGoals$=this.selectedGoalIds$.pipe((0,W.U)(function(Ae){return _.isNil(Ae)?0:Object.keys(Ae).length})),this.numberOfSelectedGoals$.pipe((0,te.M)(this.scorecardDetails$),(0,tt.x)(function(Ae,_t){return Ae[0]===_t[0]})).subscribe(function(Ae){var _t=Ae[0],xt=Ae[1];_.isFunction(xt?.onNumberOfSelectedGoalsChange)&&!_.isNil(_t)&&xt.onNumberOfSelectedGoalsChange(_t)});var Ft=this.goals$.pipe((0,W.U)(function(Ae){return p.q.flattenGoals(Ae)}));this.allGoalsSelected$=(0,j.aj)([Ft,this.selectedGoalIds$]).pipe((0,tt.x)(function(Ae,_t){var Dn=_t[1];return Ae[0].length===_t[0].length&&Object.keys(Ae[1]).length===Object.keys(Dn).length}),(0,W.U)(function(Ae){var xt=Ae[1];return _.filter(Ae[0],function(un){return!un.isNew&&(!Fe.scorecardHost||Fe.scorecardHost.canSelectGoal(un).enabled)}).length===Object.keys(xt).length})),this.scorecard$.pipe((0,U.o)(function(Ae){return _.isNil(Ae)},!0)).subscribe(function(Ae){var _t;!_.isNil(Ae)&&(_.isNil(Ae?.goals)||0===(null===(_t=Ae?.goals)||void 0===_t?void 0:_t.length))&&Fe.scorecardService.userHasWritePermissions()&&Fe.onNewGoalClick(!0)});var cn=this.scorecardService.isLoading(),Zn=this.scorecardService.isEditing();this.showChildren$=this.expansionService.expansionMap$,this.showAllChildren$=this.expansionService.showAllExpanded$,this.hasExpandableGoals$=this.expansionService.hasExpandableGoals$;var On=this.capabilityService.getScorecardCapabilities();On.pipe((0,u.R)(this.onDestroy$)).subscribe(function(Ae){Fe.scorecardCapabilities=Ae,Fe.changeDetectorRef.markForCheck()}),this.canDragAndDrop$=(0,j.aj)([Jn,this.filterBy$,this.sort$,cn,Zn,this.numberOfSelectedGoals$,On]).pipe((0,W.U)(function(Ae){var _t,xt=(_t=Ae)[0],Yt=_t[1],un=_t[2],Dn=_t[3],qo=_t[4],ui=_t[5];return _t[6].reorderGoal&&xt&&_.isEmpty(Yt.keyword)&&_.isEmpty(Yt.statuses)&&"Rank"===un.sortBy&&!Dn&&!qo&&ui<=1})),this.scorecardDetails$.pipe((0,Ue.w)(function(Ae){return Ae.filterBy$})).pipe((0,u.R)(this.onDestroy$)).subscribe(function(Ae){Fe.filterBy$.next(Ae)}),(0,j.aj)([this.scorecardDetails$,this.filterBy$]).pipe((0,tt.x)(function(Ae,_t){var xt=Ae[1],Yt=_t[1];return _.isEqual(xt?.keyword,Yt?.keyword)&&_.isEqual(xt?.statuses,Yt?.statuses)})).pipe((0,u.R)(this.onDestroy$)).subscribe(function(Ae){var _t=Ae[0],xt=Ae[1];_.isFunction(_t?.onFiltersUpdated)&&!_.isNil(xt)&&_t.onFiltersUpdated(xt)}),(0,j.aj)([this.sort$,this.filterBy$,this.filterRowVisible$,this.columnSettings$,this.scorecardService.viewType$]).pipe((0,u.R)(this.onDestroy$)).subscribe(function(Ae){var _t=Ae[0],xt=Ae[1],Yt=Ae[2],un=Ae[3],Dn=Ae[4];xt.matchStatus=w._.isColumnVisible(un,2),xt.matchOwner=w._.isColumnVisible(un,1),"Heatmap"===Dn?Fe.scorecardService.applySortAndFilter((0,t.pi)({},a.Ij),Fe.goalsNewHeaderEnabled?{keyword:xt?.keyword}:{}):("List"===Dn||"Compact"===Dn)&&Fe.scorecardService.applySortAndFilter(_t,Fe.goalsNewHeaderEnabled||Yt?xt:{statuses:xt?.statuses})}),this.goalOwners$=this.goals$.pipe((0,W.U)(p.q.getGoalOwners)),this.scorecard$.pipe((0,F.h)(function(Ae){return!!Ae}),(0,tt.x)(function(Ae,_t){return Ae.id===_t.id}),(0,u.R)(this.onDestroy$)).subscribe(function(Ae){Fe.hierarchyService.loadHierarchies(Ae.groupId,Ae.id)}),this.scorecardService.getActiveGoalId().pipe((0,u.R)(this.onDestroy$)).subscribe(function(Ae){_.isNil(Ae)?Fe.detailsPaneLauncher.closeGoalDetails():(Fe.detailsPaneLauncher.openGoalDetails(Fe.scorecardService,Ae,d.E.Default),Fe.showChildrenForSelectedMetrics(Ae))}),this.goalStatusesByScorecardId$=this.scorecardService.goalStatusesByScorecardId$,this.hasHierarchies$=this.hierarchyService.hasHierarchies$,this.displayMode$=null===(Mt=null===(qe=this.scorecardSettings)||void 0===qe?void 0:qe.settings)||void 0===Mt?void 0:Mt.pipe((0,W.U)(function(Ae){return Ae?.displayMode})),this.hideHeader$=null===(Vt=null===(ft=this.scorecardSettings)||void 0===ft?void 0:ft.settings)||void 0===Vt?void 0:Vt.pipe((0,W.U)(function(Ae){return Ae?.hideScorecardHeader})),this.hideTitle$=null===(Zt=null===(jt=this.scorecardSettings)||void 0===jt?void 0:jt.settings)||void 0===Zt?void 0:Zt.pipe((0,W.U)(function(Ae){return Ae?.hideScorecardTitle})),this.hideToolbar$=null===(En=null===(vn=this.scorecardSettings)||void 0===vn?void 0:vn.settings)||void 0===En?void 0:En.pipe((0,W.U)(function(Ae){return Ae?.hideScorecardToolbar})),this.hideCards$=null===(tn=null===(An=this.scorecardSettings)||void 0===An?void 0:An.settings)||void 0===tn?void 0:tn.pipe((0,W.U)(function(Ae){return Ae?.hideGoalCards})),this.showPickerToolbar$=null===(Qt=null===($n=this.scorecardSettings)||void 0===$n?void 0:$n.settings)||void 0===Qt?void 0:Qt.pipe((0,W.U)(function(Ae){return Ae?.showPickerToolbar})),this.scorecardService.scorecardSelectionMode$.pipe((0,u.R)(this.onDestroy$)).subscribe(function(Ae){return Fe.scorecardSelectionMode=Ae}),this.scorecardService.viewType$.pipe((0,u.R)(this.onDestroy$)).subscribe(function(Ae){return Fe.viewType=Ae}),null===(Qn=null===(xn=this.scorecardSettings)||void 0===xn?void 0:xn.settings)||void 0===Qn||Qn.pipe((0,Q.q)(1)).subscribe(function(Ae){var _t,xt=null===(_t=_.first(Ae.filters))||void 0===_t?void 0:_t.goalId;xt&&Ae.isEditingGoal&&Fe.scorecardService.setGoalState(xt,"Editing")}),this.columnSettings$.pipe((0,u.R)(this.onDestroy$)).subscribe(function(Ae){return Fe.columnSettings=Ae}),this.scorecard$.pipe((0,u.R)(this.onDestroy$)).subscribe(function(Ae){return Fe.visualScorecard=Ae}),this.featureSwitchService.featureSwitches.scorecardListViewSettings&&this.viewsService&&(this.viewsService.loadViews(!1),this.viewsService.getDefaultView("List").pipe((0,u.R)(this.onDestroy$)).subscribe(function(){Fe.viewSettings=Fe.viewsService.defaultListView?Fe.viewsService.defaultListView.listViewDetails:a.lb,Fe.setVisibleColumns()}))},Ve.prototype.ngOnDestroy=function(){this.detailsPaneLauncher.closeGoalDetails(),this.onDestroy$.next(!0),this.onDestroy$.complete()},Ve.prototype.showChildrenForSelectedMetrics=function(Fe){var De=this.scorecardService.getCurrentScorecard(),Be=p.q.getGoal(De?.goals,Fe);for(Fe=Be.parentId;Fe&&null!=(Be=p.q.getGoal(De?.goals,Fe));)this.expansionService.expandGoal(Fe),Fe=Be.parentId},Ve.prototype.onShowChildrenChange=function(Fe){Fe.value?this.expansionService.expandGoal(Fe.id):this.expansionService.collapseGoal(Fe.id)},Ve.prototype.onToggleExpandAllMetrics=function(){this.expansionService.toggleExpandAll()},Ve.prototype.onNewGoalClick=function(Fe){this.scorecardService.setViewType("List"),this.scorecardService.addGoal(),Fe&&this.goalsTutorialService.startFirstGoalTutorial()},Ve.prototype.openHierarchiesBuilder=function(){return(0,t.mG)(this,void 0,void 0,function(){return(0,t.Jh)(this,function(Fe){switch(Fe.label){case 0:return[4,this.hierarchyPane.openHierarchiesBuilder("HeatmapHeader")];case 1:return Fe.sent(),[2]}})})},Ve.prototype.openHeatmapConfigurationPane=function(){this.hierarchyPane.showHeatmapConfigurationPane()},Ve.prototype.onScorecardViewClick=function(){this.scorecardService.setViewType("List")},Ve.prototype.onHeatmapViewClick=function(){this.scorecardService.setViewType("Heatmap")},Ve.prototype.onSelectAllGoals=function(){this.scorecardService.toggleSelectAllGoals()},Ve.prototype.openBulkUpdatePane=function(){var Fe=this;this.detailsPaneLauncher.openBulkEditingPane(this.scorecardService,function(De){return Fe.scorecardService.bulkUpdateGoals(De)})},Ve.prototype.onNewSubGoalClick=function(){if(1===this.scorecardService.numberOfSelectedGoals()){var Fe=this.scorecardService.getFirstSelectedGoalId();this.expansionService.expandGoal(Fe),this.scorecardService.addSubGoal(Fe)}},Ve.prototype.onImportClick=function(Fe){var De=this,Be=Fe.target;if(this.isExcelFile=!!Be.files[0].name.match(/(.xls|.xlsx)/),this.isExcelFile){var qe=new FileReader;qe.onload=function(Mt){var Vt=qe.result.toString().replace(/^data:(.*,)?/,"");Vt.length%4>0&&(Vt+="=".repeat(4-Vt.length%4)),De.inputFile.nativeElement.value="",De.dialogService.open(se,{width:"70%",height:"80%",data:{fileData:Vt,scorecard:De.visualScorecard}}).afterClosed().pipe((0,te.M)(De.scorecard$)).subscribe(function(Zt){var En=Zt[1];De.scorecardService.loadScorecard(En.groupId,En.id)})},qe.readAsDataURL(Be.files[0])}},Ve.prototype.updateSorting=function(Fe,De){var Be=me.p.toggleSort(Fe,De);this.sort$.next(Be)},Ve.prototype.toggleFilterRow=function(){var Fe=!this.filterRowVisible$.value;this.filterRowVisible$.next(Fe),Fe||this.onFilterKeywordChange("")},Ve.prototype.onFilterKeywordChange=function(Fe){var De=(0,t.pi)((0,t.pi)({},this.filterBy$.value),{keyword:Fe});this.filterBy$.next(De)},Ve.prototype.onGoalsStatusTileSelectionChange=function(Fe){var De,Be={keyword:null===(De=this.filterBy$.value)||void 0===De?void 0:De.keyword,statuses:Fe};this.filterBy$.next(Be)},Ve.prototype.onGoalDragStart=function(Fe){var De=Fe.source.data.goal,Be=Fe.source.data.level,qe=Fe.source.dropContainer.getSortedItems(),Mt=qe.findIndex(function(ft){return ft.data.goal.id===De.id});y.fF.assertValue(-1!==Mt,"Goal should exist in the drop list"),this.goalDragInfo=(0,$e.ZP)(this.goalDragInfo,function(ft){return ft.sourceGoalId=De.id,ft.rankOrderedPrevGoal=Mt>0?qe[Mt-1].data:void 0,ft.rankOrderedNextGoal=Mt<qe.length-1?qe[Mt+1].data:void 0,ft.destParentGoalId=De.parentId,ft.destGoalDropLevel=Be,ft}),this.changeDetectorRef.detectChanges()},Ve.prototype.onGoalDragMove=function(Fe){var De,Be,qe,Mt;if(this.goalDragInfo.rankOrderedPrevGoal||this.goalDragInfo.rankOrderedNextGoal){if(!this.goalDragInfo.rankOrderedPrevGoal)return void(this.goalDragInfo=(0,$e.ZP)(this.goalDragInfo,function(xt){return xt.destParentGoalId=void 0,xt.destGoalDropLevel=0,xt}));var jt,Zt,ft=this.goalDragInfo.rankOrderedPrevGoal,Vt=ft.level<a.gT.MaxSubGoals;if(this.featureSwitchService.featureSwitches.goalsXAxisDragAndDrop){var En=Fe.source.getPlaceholderElement(),cn=Array.from(En.querySelectorAll(".cell-indent")).map(function(un){return un.getBoundingClientRect().right});for(Zt=0;Zt<cn.length&&cn[Zt]<=Fe.pointerPosition.x;)Zt++;var xn=null!==(Mt=null===(qe=this.goalDragInfo.rankOrderedNextGoal)||void 0===qe?void 0:qe.level)&&void 0!==Mt?Mt:0,Zn=ft.level+(Vt?1:0);Zt=_.clamp(Zt,xn,Zn),jt=Zn}else{var An=(En=Fe.source.getPlaceholderElement()).getBoundingClientRect(),$n=20+An.height,Qt=_.clamp(Fe.pointerPosition.y-(An.top-10),0,$n-1),Qn=(xn=null!==(Be=null===(De=this.goalDragInfo.rankOrderedNextGoal)||void 0===De?void 0:De.level)&&void 0!==Be?Be:0,ft.level-xn+1);Vt&&Qn++;var Jn=Math.floor(Qt/($n/Qn));Zt=(jt=ft.level+(Vt?1:0))-Jn}var Ae=this.scorecardService.getCurrentScorecard(),_t=ft.goal;for(Vt||(_t=_t.parentId?p.q.getGoal(Ae.goals,_t.parentId):void 0);jt>Zt;)_t=_t.parentId?p.q.getGoal(Ae.goals,_t.parentId):void 0,jt--;this.goalDragInfo=(0,$e.ZP)(this.goalDragInfo,function(xt){return xt.destParentGoalId=_t?.id,xt.destGoalDropLevel=Zt,xt})}},Ve.prototype.setVisibleColumns=function(){var Fe,De,Be;if(this.columnSettings=this.visualScorecard.columnSettings,null!==(Fe=this.viewSettings)&&void 0!==Fe&&Fe.dropColumns){var qe=(null===(De=this.scorecardElement)||void 0===De?void 0:De.nativeElement.offsetWidth)||0;((null===(Be=this.columnTableElement)||void 0===Be?void 0:Be.nativeElement.offsetWidth)||0)>qe&&(!1===this.forceColumnMinWidths&&(this.cutoffWidth=qe),this.forceColumnMinWidths=!0);for(var ft=a.gT.ScorecardTablePadding.left+a.gT.ScorecardTablePadding.right,Vt=0;Vt<this.visualScorecard.columnSettings.length;Vt++)if(this.visualScorecard.columnSettings[Vt].show&&(ft+=a.gT.ListViewCellMinWidths[this.visualScorecard.columnSettings[Vt].columnId]||0)>qe){this.columnSettings=this.visualScorecard.columnSettings.slice(0,Vt||1);break}qe>this.cutoffWidth&&(this.forceColumnMinWidths=!1)}else this.forceColumnMinWidths=!1;this.changeDetectorRef.markForCheck()},Ve.prototype.onGoalDropListSorted=function(Fe){return(0,t.mG)(this,void 0,void 0,function(){var De,Be,qe;return(0,t.Jh)(this,function(Mt){return y.fF.assertValue((De=Fe.item.data.goal.id)===this.goalDragInfo.sourceGoalId,"Dragged goal does not match."),Be=Fe.container.getSortedItems(),qe=Be.map(function(ft){return ft.data}).filter(function(ft){return ft.goal.id!==De}),this.goalDragInfo=(0,$e.ZP)(this.goalDragInfo,function(ft){return ft.rankOrderedNextGoal=Fe.currentIndex<qe.length?qe[Fe.currentIndex]:void 0,ft.rankOrderedPrevGoal=Fe.currentIndex-1>=0?qe[Fe.currentIndex-1]:void 0,ft}),[2]})})},Ve.prototype.onDropGoal=function(Fe){return(0,t.mG)(this,void 0,void 0,function(){var De,Be,qe;return(0,t.Jh)(this,function(Mt){switch(Mt.label){case 0:return y.fF.assertValue((De=Fe.item.data.goal).id===this.goalDragInfo.sourceGoalId,"Dragged goal does not match."),this.goalDragInfo.rankOrderedNextGoal&&(qe=this.goalDragInfo.rankOrderedNextGoal.goal,(this.goalDragInfo.destParentGoalId&&qe.parentId===this.goalDragInfo.destParentGoalId||!qe.parentId&&!this.goalDragInfo.destParentGoalId)&&(Be=this.goalDragInfo.rankOrderedNextGoal.goal)),[4,this.scorecardService.moveGoal(De.id,Be?.id,this.goalDragInfo.destParentGoalId)];case 1:return Mt.sent(),this.goalDragInfo=(0,$e.ZP)(this.goalDragInfo,function(){return{}}),[2]}})})},Ve.prototype.onLinkedMetricInit=function(){return(0,t.mG)(this,void 0,void 0,function(){var Fe,De,qe=this;return(0,t.Jh)(this,function(Mt){return this.linkedMetricsLauncher&&(Fe=_.map(p.q.flattenGoals(this.scorecardService.getCurrentScorecard().goals),"id"),De=this.scorecardDetails$.pipe((0,Ue.w)(function(ft){var Vt;return null!==(Vt=ft?.reportId$)&&void 0!==Vt?Vt:qe.scorecard$.pipe((0,W.U)(function(jt){return jt.reportId}))}),(0,tt.x)()),this.linkedMetricsLauncher.launchLinkedMetrics(Fe,De).pipe((0,Q.q)(1)).subscribe(function(ft){ft?.length>=1&&qe.scorecardService.createLinkedGoals(ft)})),[2]})})},Ve.\u0275fac=function(De){return new(De||Ve)(r.\u0275\u0275directiveInject(B.G),r.\u0275\u0275directiveInject(P.$),r.\u0275\u0275directiveInject(d.c),r.\u0275\u0275directiveInject(q.D),r.\u0275\u0275directiveInject(r.ChangeDetectorRef),r.\u0275\u0275directiveInject(le.vZ),r.\u0275\u0275directiveInject(de.N),r.\u0275\u0275directiveInject(V.G),r.\u0275\u0275directiveInject(b.Nw),r.\u0275\u0275directiveInject(L.l),r.\u0275\u0275directiveInject(r.ElementRef),r.\u0275\u0275directiveInject(Oe,8),r.\u0275\u0275directiveInject(m.x),r.\u0275\u0275directiveInject(T.w),r.\u0275\u0275directiveInject(Le.u,8),r.\u0275\u0275directiveInject(Ce.M,8))},Ve.\u0275cmp=r.\u0275\u0275defineComponent({type:Ve,selectors:[["scorecard"]],viewQuery:function(De,Be){if(1&De&&(r.\u0275\u0275viewQuery(yo,5),r.\u0275\u0275viewQuery(Mo,5)),2&De){var qe=void 0;r.\u0275\u0275queryRefresh(qe=r.\u0275\u0275loadQuery())&&(Be.inputFile=qe.first),r.\u0275\u0275queryRefresh(qe=r.\u0275\u0275loadQuery())&&(Be.columnTableElement=qe.first)}},decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["noScorecard",""],["noGoals",""],[1,"scorecard",3,"on-resize"],[3,"scorecard","users","labels",4,"ngIf"],["class","toolbar",3,"new-look",4,"ngIf"],[3,"scorecardName","scorecardDescription","isTitleEditable",4,"ngIf"],[4,"ngIf"],[3,"scorecard","users","labels"],[1,"toolbar"],[1,"toolbar-btns"],[1,"spacer"],[1,"add-goal-btn","pbi-fluent-button",3,"disabled","click"],["fontIcon","pbi-glyph-add",1,"glyphicon","glyph-small"],["localize","NewMetric"],[1,"add-subgoal-btn","pbi-fluent-button",3,"disabled","click"],["localize","AddSubmetric"],["class","label pbi-fluent-button primary",4,"ngIf"],[1,"label","pbi-fluent-button","primary"],["type","file",3,"change"],["inputFile",""],["localize","Import"],["cdkMonitorElementFocus","","mat-button","","aria-expanded","viewSwitcherMenuTrigger.menuOpen === true","class","view-mode-picker-btn pbi-fluent-button",3,"matMenuTriggerFor","ngClass",4,"ngIf"],[1,"view-mode-picker-menu",3,"overlapTrigger"],["viewSwitcherMenu","matMenu"],["mat-menu-item","",1,"pbi-fluent-button",3,"click"],["fontIcon","pbi-glyph-list",1,"glyphicon","glyph-small"],["localize","Scorecard","localizeTooltip","Scorecard"],["fontIcon","pbi-glyph-table",1,"glyphicon","glyph-small"],["localize","MetricsHeatmap","localizeTooltip","MetricsHeatmap"],["class","customize-heatmap-btn pbi-fluent-button",3,"click",4,"ngIf"],["class","hierarchies-btn pbi-fluent-button",3,"click",4,"ngIf"],["cdkMonitorElementFocus","","mat-button","","aria-expanded","viewSwitcherMenuTrigger.menuOpen === true",1,"view-mode-picker-btn","pbi-fluent-button",3,"matMenuTriggerFor","ngClass"],["viewSwitcherMenuTrigger","matMenuTrigger"],[1,"glyph-small",3,"fontIcon"],[3,"localize","localizeTooltip"],["fontIcon","pbi-glyph-chevrondownsmall","localizeTooltip","View_Options",1,"glyph-mini","chevron-down"],[1,"customize-heatmap-btn","pbi-fluent-button",3,"click"],["fontIcon","pbi-glyph-barchartverticaledit",1,"glyphicon","glyph-small"],["localize","MetricsCustomizeHeatmap"],[1,"hierarchies-btn","pbi-fluent-button",3,"click"],["fontIcon","pbi-glyph-inline-drill-nocircle",1,"glyphicon","glyph-small"],["localize","MetricsManageHierarchies"],[3,"scorecardName","scorecardDescription","isTitleEditable"],[3,"goals","goalStatusesByScorecardId","goalStatusList","selectedStatuses","onStatusSelected",4,"ngIf"],["class","filter-row",3,"toolbar-visible",4,"ngIf"],["class","scorecard-table","cdkDropList","",3,"padding-left","padding-right","cdkDropListDisabled","cdkDropListDropped","cdkDropListSorted",4,"ngIf"],[3,"scorecard","isEditMode","viewSettings","sort","onSortColumn",4,"ngIf"],[3,"filterText","filterBy",4,"ngIf","ngIfElse"],["listToolbar",""],[3,"filterText","filterBy"],[3,"isEditMode","scorecard","scorecardCapabilities","numberOfSelectedGoals","filterText","showTitle","filterBy","onNewGoal","onNewSubGoal","onLinkedMetricInit"],[3,"goals","goalStatusesByScorecardId","goalStatusList","selectedStatuses","onStatusSelected"],[1,"filter-row"],["fontIcon","pbi-glyph-filter",1,"filter-icon","glyphicon","glyph-small"],[3,"ngModel","ngModelChange"],["fontIcon","pbi-glyph-close",1,"close-icon","glyphicon","glyph-small",3,"click"],["cdkDropList","",1,"scorecard-table",3,"cdkDropListDisabled","cdkDropListDropped","cdkDropListSorted"],["columnTable",""],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"scorecard-header"],["colspan","1",1,"checkmark-th"],["class","select-checkmark",3,"box-checked",4,"ngIf"],[1,"select-checkmark"],[3,"checked","pbiTooltip","onChange"],["colspan","5",4,"ngIf","ngIfElse"],["columnHeader",""],["colspan","5"],[1,"filter-btn-and-name"],["class","collapse-btn",3,"pbiTooltip","click",4,"ngIf"],["class","filter-btn",3,"pbiTooltip","click",4,"ngIf"],[1,"name-col","sort-col"],[3,"column","index","sort","isEditMode","onSortColumn"],[1,"collapse-btn",3,"pbiTooltip","click"],[1,"glyphicon","glyph-mini",3,"fontIcon"],[1,"filter-btn",3,"pbiTooltip","click"],["fontIcon","pbi-glyph-filter",1,"glyphicon","glyph-small"],["colspan","1","class","sort-col",4,"ngIf"],["colspan","1",1,"sort-col"],["goal-group","",3,"scorecard","columnSettings","goal","color","showChildren","goalDragInfo","scorecardSelectionMode","forceColumnMinWidths","showChildrenChange","dragStarted","dragMoved",4,"ngIf"],["goal-group","",3,"scorecard","columnSettings","goal","color","showChildren","goalDragInfo","scorecardSelectionMode","forceColumnMinWidths","showChildrenChange","dragStarted","dragMoved"],[3,"scorecard","isEditMode","viewSettings","sort","onSortColumn"],[3,"filterText","filterBy",4,"ngIf"],[1,"heat-map"],[3,"isEditMode","scorecardCapabilities","numberOfSelectedGoals","filterText","filterBy","onNewGoal","onNewSubGoal","onLinkedMetricInit"],[3,"boardSettings","metricsGoalStatuses"],[3,"isMetricsPicker","canEdit","onNewGoal","onLinkToGoal"],[1,"no-goals","center-text"],["loading",""],["localize","Scorecard_DoesNotExist"],["localize","Scorecard_Loading"]],template:function(De,Be){if(1&De&&(r.\u0275\u0275template(0,jo,5,4,"ng-container",0),r.\u0275\u0275pipe(1,"async"),r.\u0275\u0275template(2,Kn,5,6,"ng-template",null,1,r.\u0275\u0275templateRefExtractor)),2&De){var qe=r.\u0275\u0275reference(3);r.\u0275\u0275property("ngIf",r.\u0275\u0275pipeBind1(1,2,Be.scorecard$))("ngIfElse",qe)}},dependencies:[k.NgClass,k.NgForOf,k.NgIf,X.Wj,ue.O,O.Fj,O.JJ,O.On,s.X,ne.r,ee.Hw,Ne.W0,Ne.tN,Ne.D8,Qe.v,Xe.V,it.u,ut.Q,ot.E,pt.O,Ye.C,dt.y,Ot.p,Et.i,Gt.V,K.t,yn.A,on.R,Un.J,k.AsyncPipe,E.F],styles:["[_nghost-%COMP%]{display:flex;flex-direction:row;height:100%}[_nghost-%COMP%]    {color:var(--scorecard-neutralPrimaryColor)}[_nghost-%COMP%]   .scorecard[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;flex:1}[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]{padding:20px 50px 0;width:100%;box-sizing:border-box}[_nghost-%COMP%]   .toolbar.new-look[_ngcontent-%COMP%]{padding:0 30px 4px;background-color:var(--scorecard-headerBackgroundColor);border-bottom:1px solid var(--gray-50, #D2D0CE);display:flex;flex-direction:column}[_nghost-%COMP%]   .toolbar.new-look[_ngcontent-%COMP%]   .pbi-fluent-button[_ngcontent-%COMP%]{border:none}[_nghost-%COMP%]   .toolbar.new-look[_ngcontent-%COMP%]   .pbi-fluent-button[_ngcontent-%COMP%]:disabled{background:transparent}[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]{display:inline-flex;width:100%}[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{overflow:visible}[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   .mat-icon.glyph-small[_ngcontent-%COMP%]{font-size:var(--lg-font-size, 16px);width:var(--lg-font-size, 16px);height:var(--lg-font-size, 16px)}[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   .mat-icon.glyph-mini[_ngcontent-%COMP%]{font-size:var(--sm-font-size, 12px);width:var(--sm-font-size, 12px);height:var(--sm-font-size, 12px)}[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   .mat-icon.mat-ligature-font[fontIcon][_ngcontent-%COMP%]{overflow:auto}[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:inline-flex;align-items:center}[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled   span[_ngcontent-%COMP%]{color:var(--gray-90, #A19F9D)}[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   .spacer[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   .add-goal-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   .hierarchies-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   .view-mode-picker-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   .customize-heatmap-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   .hierarchy-slicer-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px;color:var(--fluent-theme-black-color, #000)}[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   .view-mode-picker-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   .hierarchy-slicer-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin:0 8px}[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   .add-goal-btn[_ngcontent-%COMP%], [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   .add-subgoal-btn[_ngcontent-%COMP%], [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   .hierarchies-btn[_ngcontent-%COMP%], [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   .view-mode-picker-btn[_ngcontent-%COMP%], [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   .customize-heatmap-btn[_ngcontent-%COMP%], [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   .hierarchy-slicer-btn[_ngcontent-%COMP%]{margin-right:8px;background-color:var(--fluent-theme-neutral-lighter-alt-color, #FAF9F8)}[_nghost-%COMP%]   pbi-dropdown-trigger[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]   .filter-row[_ngcontent-%COMP%]{color:var(--scorecard-tableHeaderForegroundColor);background-color:rgba(0,0,0,.05);border-radius:4px;margin:10px 30px 0}[_nghost-%COMP%]   .filter-row[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::placeholder{color:var(--scorecard-tableHeaderForegroundColor)}[_nghost-%COMP%]   .filter-row.toolbar-visible[_ngcontent-%COMP%]{margin-top:20px}[_nghost-%COMP%]   .filter-row[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;align-items:center;height:45px;outline:none}[_nghost-%COMP%]   .filter-row[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .filter-icon[_ngcontent-%COMP%]{font-size:20px;margin-top:4px;margin-right:12px;padding-left:15px}[_nghost-%COMP%]   .filter-row[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{cursor:pointer;font-size:16px;margin-top:8px;margin-right:10px}[_nghost-%COMP%]   .filter-row[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:transparent;border:none;flex:1;font-size:var(--md-font-size, 14px);outline:none;padding-left:0}[_nghost-%COMP%]   .scorecard-table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0px 10px;empty-cells:hide;padding-top:0;padding-bottom:0;color:var(--scorecard-tableRowForegroundColor)}[_nghost-%COMP%]   .scorecard-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1;background:var(--scorecard-tableBackgroundColor);height:40px}[_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]{text-align:left}[_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:var(--lg-font-size, 16px);font-weight:var(--font-weight-regular, 400);color:var(--scorecard-tableHeaderForegroundColor);font-weight:500}[_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th.checkmark-th[_ngcontent-%COMP%]{width:35px;max-width:35px}[_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th.checkmark-th[_ngcontent-%COMP%]:not(.show-checkmark){width:0px;max-width:0px}[_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th.checkmark-th[_ngcontent-%COMP%]:not(.show-checkmark)   .select-checkmark[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th.show-on-hover-only[_ngcontent-%COMP%]   .select-checkmark[_ngcontent-%COMP%]{visibility:hidden}[_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th.show-on-hover-only[_ngcontent-%COMP%]:hover   .select-checkmark[_ngcontent-%COMP%], [_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th.show-on-hover-only[_ngcontent-%COMP%]   .select-checkmark.box-checked[_ngcontent-%COMP%]{visibility:visible}[_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .select-checkmark[_ngcontent-%COMP%]{margin-right:15px}[_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .select-checkmark[_ngcontent-%COMP%]     pbi-checkbox{margin-bottom:0}[_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th.dueDate[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}[_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .sort-col[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .filter-btn-and-name[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .filter-btn-and-name[_ngcontent-%COMP%]   .collapse-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;margin-left:6px;min-width:48px;width:48px;background-color:transparent;border:none;padding:2px}[_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .filter-btn-and-name[_ngcontent-%COMP%]   .collapse-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;height:unset}[_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .filter-btn-and-name[_ngcontent-%COMP%]   .filter-btn[_ngcontent-%COMP%]{background-color:transparent;border:none;font-size:20px;padding:0 12px;color:inherit}[_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .filter-btn-and-name[_ngcontent-%COMP%]   .filter-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;height:unset}[_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .filter-btn-and-name[_ngcontent-%COMP%]   .filter-btn[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .filter-btn-and-name[_ngcontent-%COMP%]   .filter-btn[_ngcontent-%COMP%]:focus:hover{background-color:var(--fluent-theme-neutral-lighter-color, #F3F2F1)}[_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .filter-btn-and-name[_ngcontent-%COMP%]   .filter-btn[_ngcontent-%COMP%]:active, [_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .filter-btn-and-name[_ngcontent-%COMP%]   .filter-btn.active[_ngcontent-%COMP%], [_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .filter-btn-and-name[_ngcontent-%COMP%]   .filter-btn[_ngcontent-%COMP%]:active:focus:hover{background-color:var(--fluent-theme-neutral-quarter-alt-color, #E1DFDD)}[_nghost-%COMP%]   .add-goal-btn-box[_ngcontent-%COMP%]{float:right}[_nghost-%COMP%]   .add-goal-btn-box[_ngcontent-%COMP%]   .add-goal-btn[_ngcontent-%COMP%]{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-semi-bold, 600);color:var(--gray-180, #252423);padding:6px 18px;box-sizing:border-box;border-radius:2px;height:32px;display:inline-block;cursor:pointer;background-color:var(--fluent-theme-primary-color, #F2C811)}[_nghost-%COMP%]   .center-text[_ngcontent-%COMP%]{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-semi-bold, 600);text-align:center}[_nghost-%COMP%]   .compact.scorecard[_ngcontent-%COMP%]{overflow:hidden;padding:0 20px}@media screen and (min-width: 1024px){[_nghost-%COMP%]   .compact.scorecard[_ngcontent-%COMP%]{padding:0 26px}}@media screen and (min-width: 1366px){[_nghost-%COMP%]   .compact.scorecard[_ngcontent-%COMP%]{padding:0 60px}}[_nghost-%COMP%]   .compact.scorecard[_ngcontent-%COMP%]   compact-scorecard[_ngcontent-%COMP%]{overflow:hidden}[_nghost-%COMP%]   .compact.scorecard[_ngcontent-%COMP%]   scorecard-list-toolbar[_ngcontent-%COMP%]{--toolbar-padding: 12px 0 12px 0}[_nghost-%COMP%]   .compact.scorecard[_ngcontent-%COMP%]     .scorecard-status-tiles{padding:0}label.label[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;top:-100%}.label[_ngcontent-%COMP%]{cursor:pointer;padding:5px 15px;display:inline-block}.no-goals[_ngcontent-%COMP%], empty-scorecard[_ngcontent-%COMP%]{color:var(--scorecard-tableHeaderForegroundColor);padding:20px;flex:1}.no-goals.border-top[_ngcontent-%COMP%], empty-scorecard.border-top[_ngcontent-%COMP%]{border-top:1px solid var(--gray-50, #D2D0CE)}.heat-map-scroll[_ngcontent-%COMP%]{overflow:hidden}.heat-map[_ngcontent-%COMP%]{flex:1;overflow:hidden;display:flex}.mat-menu-item[_ngcontent-%COMP%]{color:var(--gray-180, #252423);display:flex;flex-direction:row;align-items:center;height:36px;padding-right:16px}  .view-mode-picker-menu mat-icon{display:flex;align-items:center}  .view-mode-picker-menu .mat-icon{overflow:visible}  .view-mode-picker-menu .mat-icon.glyph-small{font-size:var(--lg-font-size, 16px);width:var(--lg-font-size, 16px);height:var(--lg-font-size, 16px)}  .view-mode-picker-menu .mat-icon.glyph-mini{font-size:var(--sm-font-size, 12px);width:var(--sm-font-size, 12px);height:var(--sm-font-size, 12px)}  .view-mode-picker-menu .mat-icon.mat-ligature-font[fontIcon]{overflow:auto}.new-header   scorecard[_nghost-%COMP%], scorecard   [_nghost-%COMP%]{display:block}  .hierarchy-slicer-menu .mat-menu-content{padding:0!important}"],changeDetection:0}),Ve}()},44260:function(ct,Ge,n){"use strict";n.d(Ge,{o:function(){return d}});var t=n(50423),i=n(77476),w=n(44408),a=function(l,c,y){return{hide:l,rotate180:c,"reserve-space":y}},d=function(){function p(){this.reserveSpaceWhenHidden=!0}return p.\u0275fac=function(c){return new(c||p)},p.\u0275cmp=t.\u0275\u0275defineComponent({type:p,selectors:[["sort-icon"]],inputs:{hidden:"hidden",upArrow:"upArrow",reserveSpaceWhenHidden:"reserveSpaceWhenHidden"},decls:1,vars:5,consts:[["fontIcon","pbi-glyph-sortup",1,"glyphicon","glyph-mini","sort-icon",3,"ngClass"]],template:function(c,y){1&c&&t.\u0275\u0275element(0,"mat-icon",0),2&c&&t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction3(1,a,y.hidden,y.upArrow,y.reserveSpaceWhenHidden))},dependencies:[i.NgClass,w.Hw],styles:[".sort-icon[_ngcontent-%COMP%]{height:12px;width:12px;margin-left:12px}.sort-icon.rotate180[_ngcontent-%COMP%]{transform:rotate(180deg)}.sort-icon.hide[_ngcontent-%COMP%]{display:none}.sort-icon.hide.reserve-space[_ngcontent-%COMP%]{display:inline;visibility:hidden}"],changeDetection:0}),p}()},93631:function(ct,Ge,n){"use strict";n.d(Ge,{l:function(){return C}});var t=n(50423),i=n(65181),w=n(77476),a=n(36858),d=n(85102),p=n(82621);function l(m,k){if(1&m&&(t.\u0275\u0275namespaceSVG(),t.\u0275\u0275element(0,"path",4)),2&m){var O=t.\u0275\u0275nextContext();t.\u0275\u0275attribute("d",O.path)("stroke",O.settings.lineColor)("stroke-width",O.settings.lineWidth)}}function c(m,k){if(1&m&&(t.\u0275\u0275namespaceSVG(),t.\u0275\u0275element(0,"circle")),2&m){var O=t.\u0275\u0275nextContext();t.\u0275\u0275attribute("cx",O.min.x)("cy",O.min.y)("r",O.settings.dotRadius)("fill",O.settings.dotFillColor)("stroke",O.settings.dotColor)("stroke-width",O.settings.dotStrokeWidth)}}function y(m,k){if(1&m&&(t.\u0275\u0275namespaceSVG(),t.\u0275\u0275element(0,"circle")),2&m){var O=t.\u0275\u0275nextContext();t.\u0275\u0275attribute("cx",O.max.x)("cy",O.max.y)("r",O.settings.dotRadius)("fill",O.settings.dotFillColor)("stroke",O.settings.dotColor)("stroke-width",O.settings.dotStrokeWidth)}}function r(m,k){if(1&m&&(t.\u0275\u0275namespaceSVG(),t.\u0275\u0275namespaceHTML(),t.\u0275\u0275elementStart(0,"div",5)(1,"table")(2,"tr")(3,"th",6),t.\u0275\u0275text(4),t.\u0275\u0275pipe(5,"localize"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"th",7),t.\u0275\u0275text(7),t.\u0275\u0275pipe(8,"formatValue"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(9,"tr")(10,"th",6),t.\u0275\u0275text(11),t.\u0275\u0275pipe(12,"localize"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(13,"th",7),t.\u0275\u0275text(14),t.\u0275\u0275pipe(15,"formatValue"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(16,"tr")(17,"th",6),t.\u0275\u0275text(18),t.\u0275\u0275pipe(19,"localize"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(20,"th",7),t.\u0275\u0275text(21),t.\u0275\u0275elementEnd()()()()),2&m){var O=t.\u0275\u0275nextContext();t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(5,6,"High")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind2(8,8,O.tooltip.high,O.formatString)),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(12,11,"Low")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind2(15,13,O.tooltip.low,O.formatString)),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(19,16,"Cycle")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(O.tooltip.cycle)}}var C=function(){function m(k){this.localizationService=k,this.DefaultOptions={height:48,width:120,lineColor:"#5BD667",lineWidth:2,dotRadius:2,dotStrokeWidth:1,dotFillColor:"#161514",dotColor:"#5BD667",showMax:!0,showMin:!0,tension:.5},this.settings=Object.assign({},this.DefaultOptions)}return Object.defineProperty(m.prototype,"values",{set:function(O){this.sparklinePoints=O?.filter(function(s){return null!=s.value&&null!=s.timestamp}),this.update()},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"options",{set:function(O){this.settings=Object.assign({},this.DefaultOptions,O),this.sparklinePoints&&this.update()},enumerable:!1,configurable:!0}),m.prototype.ngOnChanges=function(k){k.cycle&&(this.tooltip=Object.assign({},this.tooltip,{cycle:this.getCycleText()})),k.formatString&&this.update()},m.prototype.update=function(){var k;this.viewBox="0 0 ".concat(this.settings.width," ").concat(this.settings.height),(null===(k=this.sparklinePoints)||void 0===k?void 0:k.length)>=2?(this.points=m.calculatePoints(this.sparklinePoints,this.settings),this.path=m.calculatePath(this.points,this.settings),this.min=this.points.reduce(function(O,s){return O?.y<s.y?O:s}),this.max=this.points.reduce(function(O,s){return O?.y>s.y?O:s}),this.tooltip=this.getTooltipData(this.sparklinePoints)):(this.points=null,this.path=null,this.min=null,this.max=null)},m.calculatePoints=function(k,O){var s=k.map(function(ae){return{value:ae.value,timestamp:new Date(ae.timestamp)}}),ne=_.map(s,function(ae){return ae.value}),ee=_.min(ne),Z=_.max(ne),v=_.map(s,function(ae){return ae.timestamp.getTime()}),E=_.min(v),I=_.max(v),H=this.calculateSafeRange(Z,ee),G=this.calculateSafeRange(I,E),Y=O.dotRadius+O.dotStrokeWidth+this.PaddingOnEdges,ie=O.width-2*Y,ye=O.height-2*Y;return s.map(function(ae){return{x:(ae.timestamp.getTime()-E)/G*ie+Y,y:(1-(ae.value-ee)/H)*ye+Y}})},m.calculatePath=function(k,O){for(var s="M ".concat(k[0].x,", ").concat(k[0].y),ne=[],ee=0;ee<k.length;ee++)if(0===ee||ee===k.length-1)ne.push({x:0,y:0});else{var Z=this.calculateDerivative(k[ee-1],k[ee+1]),v=Math.sqrt(1+Z*Z);ne.push({x:1/v,y:Z/v})}for(ee=0;ee<k.length-1;ee++){var E=k[ee],I=k[ee+1],H=Math.abs(I.x-E.x),G=Math.abs(I.y-E.y),Y=Math.min(H,G)*O.tension,ye=E.y+Y*ne[ee].y,ae=I.x-Y*ne[ee+1].x,J=I.y-Y*ne[ee+1].y,N="C ".concat(E.x+Y*ne[ee].x,", ").concat(ye," ").concat(ae,", ").concat(J," ").concat(I.x,", ").concat(I.y);s+=" ".concat(N)}return s},m.calculateDerivative=function(k,O){return O.x===k.x?0:(O.y-k.y)/(O.x-k.x)},m.calculateSafeRange=function(k,O){var s=k-O;return 0===s?1:s},m.prototype.getTooltipData=function(k){var O=_.map(k,function(ee){return ee.value}),s=_.min(O);return{high:_.max(O),low:s,cycle:this.getCycleText()}},m.prototype.getCycleText=function(){switch(this.cycle){case 1:return this.localizationService.get("SettingsDataset_ScheduleRefresh_RefreshFrequency_Daily");case 2:return this.localizationService.get("SettingsDataset_ScheduleRefresh_RefreshFrequency_Weekly");case 3:return this.localizationService.get("SettingsDataset_ScheduleRefresh_RefreshFrequency_Monthly");case 4:return this.localizationService.get("MetricsDetailsPane_TimePeriodTab_RadioButton_Quarterly");case 5:return this.localizationService.get("MetricsDetailsPane_TimePeriodTab_RadioButton_Yearly");default:return"-"}},m.PaddingOnEdges=1.5,m.\u0275fac=function(O){return new(O||m)(t.\u0275\u0275directiveInject(i.o))},m.\u0275cmp=t.\u0275\u0275defineComponent({type:m,selectors:[["sparkline"]],inputs:{values:"values",options:"options",formatString:"formatString",cycle:"cycle"},features:[t.\u0275\u0275NgOnChangesFeature],decls:7,vars:11,consts:[["role","img",3,"aria-label","pbiTooltip","pbiTooltipDisabled"],["fill","transparent",4,"ngIf"],[4,"ngIf"],["tooltipTmpl",""],["fill","transparent"],[1,"sparkline-tooltip"],[1,"text"],[1,"value"]],template:function(O,s){if(1&O&&(t.\u0275\u0275namespaceSVG(),t.\u0275\u0275elementStart(0,"svg",0),t.\u0275\u0275pipe(1,"localize"),t.\u0275\u0275template(2,l,1,3,"path",1),t.\u0275\u0275template(3,c,1,6,"circle",2),t.\u0275\u0275template(4,y,1,6,"circle",2),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(5,r,22,18,"ng-template",null,3,t.\u0275\u0275templateRefExtractor)),2&O){var ne=t.\u0275\u0275reference(6);t.\u0275\u0275property("aria-label",t.\u0275\u0275pipeBind1(1,9,"Metrics_Sparkline_AltText"))("pbiTooltip",ne)("pbiTooltipDisabled",!s.tooltip),t.\u0275\u0275attribute("width",s.settings.width)("height",s.settings.height)("viewBox",s.viewBox),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",s.path),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",s.settings.showMin&&s.min),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",s.settings.showMax&&s.max)}},dependencies:[w.NgIf,a.V,d.F,p.c],styles:['[_nghost-%COMP%]   .sparkline[_ngcontent-%COMP%]{height:100%;width:100%}  .sparkline-tooltip{padding:5px 15px}  .sparkline-tooltip .text{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-semi-bold, 600);text-align:right;padding-right:8px}  .sparkline-tooltip .value{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);text-align:left}'],changeDetection:0}),m}()},77971:function(ct,Ge,n){"use strict";n.d(Ge,{m:function(){return l}});var t=n(57535),i=n(50423),w=n(65181),a=n(77476),d=n(36858);function p(c,y){if(1&c&&(i.\u0275\u0275elementStart(0,"div",1)(1,"span",2),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd()()),2&c){var r=i.\u0275\u0275nextContext();i.\u0275\u0275styleMap(r.style),i.\u0275\u0275advance(1),i.\u0275\u0275property("pbiTooltip",r.text),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate(r.text)}}var l=function(){function c(y){this.localizationService=y,this.goalStatusHelper=new t.p(this.localizationService)}return c.prototype.ngOnChanges=function(){this.configText(),this.configStyle()},c.prototype.configStyle=function(){if(this.outlineOnly){var y=t.p.getGoalStatus(this.status,this.goalStatuses).color,r=t.p.getGoalSparklineColor(y,this.isMobile,this.isDarkMode);this.style={color:void 0,"background-color":void 0,border:"1px solid ".concat(r)}}else{y=t.p.getGoalStatus(this.status,this.goalStatuses).color;var C=t.p.getGoalStatusTextColor(y,this.isMobile,this.isDarkMode),m=t.p.getGoalStatusColor(y,this.isMobile,this.isDarkMode);this.style={color:C,"background-color":m,border:"none"},this.isMobile&&!this.text.trim().length&&(this.style.visibility="hidden")}},c.prototype.configText=function(){var y,r=null===(y=t.p.getGoalStatus(this.status,this.goalStatuses))||void 0===y?void 0:y.displayName;this.text=this.goalStatusHelper.tryLocalizeDisplayName(r)},c.\u0275fac=function(r){return new(r||c)(i.\u0275\u0275directiveInject(w.o))},c.\u0275cmp=i.\u0275\u0275defineComponent({type:c,selectors:[["status-icon"]],inputs:{goalStatuses:"goalStatuses",isDarkMode:"isDarkMode",isMobile:"isMobile",outlineOnly:"outlineOnly",status:"status"},features:[i.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[["class","status",3,"style",4,"ngIf"],[1,"status"],[3,"pbiTooltip"]],template:function(r,C){1&r&&i.\u0275\u0275template(0,p,3,4,"div",0),2&r&&i.\u0275\u0275property("ngIf",C.text)},dependencies:[a.NgIf,d.V],styles:[".status[_ngcontent-%COMP%]{height:24px;line-height:24px;padding-left:10px;padding-right:10px;border-radius:12px;white-space:nowrap;text-align:center;font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400)}.status[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{white-space:nowrap;text-overflow:ellipsis;overflow:hidden;max-width:-webkit-fill-available;display:inline-block}",'mobile-scorecard-container[_nghost-%COMP%]   .status[_ngcontent-%COMP%], mobile-scorecard-container   [_nghost-%COMP%]   .status[_ngcontent-%COMP%]{height:18px;line-height:18px;padding-left:10px;padding-right:10px;border-radius:12px;white-space:nowrap;text-align:center;font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-regular, 400);font-weight:500;text-overflow:ellipsis;overflow:hidden;min-width:35px}'],changeDetection:0}),c}()},94994:function(ct,Ge,n){"use strict";n.d(Ge,{z:function(){return v}});var t=n(60042),i=n(81337),w=n(62831),a=function(){function E(I){this.scorecardService=I}return Object.defineProperty(E.prototype,"scorecard",{get:function(){return this.scorecardService.getCurrentScorecard()},enumerable:!1,configurable:!0}),E.prototype.updateScorecardStatuses=function(I){return(0,i.mG)(this,void 0,void 0,function(){return(0,i.Jh)(this,function(H){switch(H.label){case 0:return E.isLocalScorecard?(this.scorecard.goalStatuses=I.goalStatuses,this.scorecard.goalStatuses.nextId=this.scorecard.goalStatuses.statuses.length,this.commit(),[3,3]):[3,1];case 1:return[4,this.scorecardService.updateScorecard(I)];case 2:H.sent(),H.label=3;case 3:return[2]}})})},E.prototype.createCategoryListHandler=function(I){return(0,i.mG)(this,void 0,void 0,function(){var H,G;return(0,i.Jh)(this,function(Y){switch(Y.label){case 0:return E.isLocalScorecard?(_.isUndefined(this.scorecard.goalValueCategories)&&(this.scorecard.goalValueCategories=[]),H=w.q.getGoalValueCategoriesCreateRequest(I),G={id:this.scorecard.goalValueCategories.length.toString(),scorecardId:"",name:"",categories:H.categories},this.scorecard.goalValueCategories.push(G),this.commit(),[2,G]):[3,1];case 1:return[4,this.scorecardService.createCategoryList(I)];case 2:return[2,Y.sent()]}})})},E.prototype.updateCategoryListHandler=function(I){return(0,i.mG)(this,void 0,void 0,function(){var H;return(0,i.Jh)(this,function(G){switch(G.label){case 0:return E.isLocalScorecard?(H=_.findIndex(this.scorecard.goalValueCategories,function(Y){return Y.id===I.id}),this.scorecard.goalValueCategories[H]=I,this.commit(),[2,I]):[3,1];case 1:return[4,this.scorecardService.updateCategoryList(I)];case 2:return[2,G.sent()]}})})},E.prototype.deleteCategoryListHandler=function(I){return(0,i.mG)(this,void 0,void 0,function(){var H;return(0,i.Jh)(this,function(G){switch(G.label){case 0:return E.isLocalScorecard?(_.remove(this.scorecard.goalValueCategories,function(Y){return Y.id===I}),H=0,this.scorecard.goalValueCategories.forEach(function(Y){Y.id=H.toString(),H+=1}),this.commit(),[3,3]):[3,1];case 1:return[4,this.scorecardService.deleteCategoryList(I)];case 2:G.sent(),G.label=3;case 3:return[2]}})})},E.prototype.commit=function(){this.scorecardService.loadPrefetchedScorecard(this.scorecard)},E.isLocalScorecard=!1,E}(),d=n(57535),p=n(50423),l=n(17174),c=n(34340),y=n(65181),r=n(49223),C=n(77476),m=n(87650),k=n(77274),O=n(33846),s=n(85102),ne=["matSelect"];function ee(E,I){if(1&E){var H=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"mat-option",6),p.\u0275\u0275listener("onSelectionChange",function(ie){p.\u0275\u0275restoreView(H);var ye=p.\u0275\u0275nextContext();return p.\u0275\u0275resetView(ye.onValueSelect(ie))}),p.\u0275\u0275text(1),p.\u0275\u0275elementEnd()}if(2&E){var G=I.$implicit;p.\u0275\u0275styleProp("background-color",G.color),p.\u0275\u0275property("value",G),p.\u0275\u0275advance(1),p.\u0275\u0275textInterpolate1(" ",G.displayName," ")}}function Z(E,I){if(1&E){var H=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"div")(1,"button",7),p.\u0275\u0275listener("click",function(){p.\u0275\u0275restoreView(H);var Y=p.\u0275\u0275nextContext();return p.\u0275\u0275resetView(Y.onEdit())}),p.\u0275\u0275text(2),p.\u0275\u0275pipe(3,"localize"),p.\u0275\u0275elementEnd()()}2&E&&(p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1(" ",p.\u0275\u0275pipeBind1(3,1,"EditStatusRules_Button_Text")," "))}var v=function(){function E(I,H,G){this.detailsPaneLauncher=I,this.localizationService=H,this.scorecardService=G,this.canCustomizeStatus=!1,this.onSelect=new p.EventEmitter,this.createGoalHelper=new a(G),this.goalStatusHelper=new d.p(this.localizationService),this.defaultColor=t.xt.defaultColorPalette[0].backgroundColor,this.statusForm=new l.nJ({statusPicker:new l.p4(null)})}return E.prototype.focus=function(){this.matSelect._elementRef.nativeElement.focus()},E.prototype.onEdit=function(){var I=this;this.detailsPaneLauncher.openEditStatusesPane(this.scorecardService,function(H){return I.createGoalHelper.updateScorecardStatuses(H)},!this.canCustomizeStatus),this.matSelect.close()},E.prototype.ngOnInit=function(){this.displayGoalStatuses=this.configStatus(this.goalStatuses)},E.prototype.ngOnChanges=function(I){var H,G,Y;I.goalStatuses&&(this.displayGoalStatuses=this.configStatus(this.goalStatuses)),I.isReadOnly&&(this.isReadOnly?null===(H=this.statusForm)||void 0===H||H.get("statusPicker").disable():null===(G=this.statusForm)||void 0===G||G.get("statusPicker").enable()),I.status&&(this.currentStatus=d.p.getGoalStatus(this.status,this.goalStatuses),_.isNil(this.status)&&this.showUndefinedAsEmpty&&(this.currentStatus=void 0),null===(Y=this.statusForm.get("statusPicker"))||void 0===Y||Y.setValue(this.currentStatus)),I.showUndefinedAsEmpty&&(this.defaultColor=this.showUndefinedAsEmpty?"transparent":t.xt.defaultColorPalette[0].backgroundColor)},E.prototype.compareOptions=function(I,H){return I.id===H.id},E.prototype.onValueSelect=function(I){I.isUserInput&&(this.currentStatus=I.source.value,this.onSelect.emit(I.source.value))},E.prototype.configStatus=function(I){var H=[];if(!_.isEmpty(I))for(var G=0,Y=I;G<Y.length;G++){var ie=Y[G];if(!ie.historical){var ye={id:ie.id,displayName:this.goalStatusHelper.tryLocalizeDisplayName(ie.displayName),color:ie.color,historical:ie.historical,labelColor:ie.labelColor};H.push(ye)}}return H},E.\u0275fac=function(H){return new(H||E)(p.\u0275\u0275directiveInject(c.c),p.\u0275\u0275directiveInject(y.o),p.\u0275\u0275directiveInject(r.G))},E.\u0275cmp=p.\u0275\u0275defineComponent({type:E,selectors:[["status-picker"]],viewQuery:function(H,G){var Y;(1&H&&p.\u0275\u0275viewQuery(ne,5),2&H)&&(p.\u0275\u0275queryRefresh(Y=p.\u0275\u0275loadQuery())&&(G.matSelect=Y.first))},inputs:{canCustomizeStatus:"canCustomizeStatus",goalStatuses:"goalStatuses",status:"status",isReadOnly:"isReadOnly",onSave:"onSave",showUndefinedAsEmpty:"showUndefinedAsEmpty"},outputs:{onSelect:"onSelect"},features:[p.\u0275\u0275NgOnChangesFeature],decls:7,vars:10,consts:[[3,"formGroup"],["appearance","none"],["pbiInput","","pbiMatSelect","","disableOptionCentering","","data-testid","goal-status-picker","panelClass","goal-status-panel","formControlName","statusPicker",1,"custom-mat-select",3,"placeholder","aria-label","compareWith"],["matSelect",""],["class","custom-mat-option",3,"background-color","value","onSelectionChange",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"custom-mat-option",3,"value","onSelectionChange"],[1,"editStatus",3,"click"]],template:function(H,G){var Y;(1&H&&(p.\u0275\u0275elementStart(0,"form",0)(1,"mat-form-field",1)(2,"mat-select",2,3),p.\u0275\u0275pipe(4,"localize"),p.\u0275\u0275template(5,ee,2,4,"mat-option",4),p.\u0275\u0275template(6,Z,4,3,"div",5),p.\u0275\u0275elementEnd()()()),2&H)&&(p.\u0275\u0275property("formGroup",G.statusForm),p.\u0275\u0275advance(2),p.\u0275\u0275styleProp("background-color",null!==(Y=null==G.currentStatus?null:G.currentStatus.color)&&void 0!==Y?Y:G.defaultColor),p.\u0275\u0275propertyInterpolate("aria-label",p.\u0275\u0275pipeBind1(4,8,"SelectStatus")),p.\u0275\u0275property("placeholder",null==G.currentStatus?null:G.currentStatus.displayName)("compareWith",G.compareOptions),p.\u0275\u0275advance(3),p.\u0275\u0275property("ngForOf",G.displayGoalStatuses),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",G.canCustomizeStatus))},dependencies:[C.NgForOf,C.NgIf,l._Y,l.JJ,l.JL,m.v_,k.x8,O.CK,l.sg,l.u,s.F],styles:['.custom-mat-option{height:24px!important;line-height:24px!important;margin:6px 32px 6px 8px;border-radius:12px}  .custom-mat-option span{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);color:var(--fluent-theme-neutral-primary-color, #323130);text-align:center}  .mat-option.mat-active{outline:2px solid var(--fluent-theme-neutral-dark-color, #201F1E)}  .editStatus{width:100%;background-color:transparent!important;border:none;border-top:1px solid var(--gray-60, #C8C6C4);font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);color:var(--fluent-theme-neutral-primary-color, #323130)}  .editStatus:hover,   .editStatus:active{background-color:transparent!important;border-top:1px solid var(--gray-60, #C8C6C4)!important}  .goal-status-panel{margin-top:42px;margin-bottom:42px;width:100%;max-width:100%!important;min-width:100%!important;margin-left:16px;box-shadow:var(--fluent-shadow-depth8, 0px 0px 2px var(--colorNeutralShadowAmbient), 0px 4px 8px var(--colorNeutralShadowKey))!important;border-radius:2px!important;position:relative;top:-12px}[_nghost-%COMP%]     mat-form-field{width:100%!important;border:1px solid var(--gray-110, #8A8886);box-sizing:border-box;border-radius:2px;height:32px;padding:2px}[_nghost-%COMP%]     mat-form-field mat-select{border-radius:24px}[_nghost-%COMP%]     .mat-select-trigger{height:24px!important;width:100%;display:flex;align-items:center}[_nghost-%COMP%]     .custom-mat-select .mat-select-value{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);color:var(--fluent-theme-neutral-primary-color, #323130);text-align:center;border-radius:12px;margin-left:8px;margin-right:8px;line-height:24px!important;height:24px!important}[_nghost-%COMP%]     .custom-mat-select .mat-select-arrow-wrapper{font-family:PowrMDL2;font-style:normal;font-size:32px;display:inline-block;font-size:12px;margin-right:8px;color:var(--gray-140, #484644)}[_nghost-%COMP%]     .custom-mat-select .mat-select-arrow-wrapper:before{content:"\\e70d"}[_nghost-%COMP%]     .custom-mat-select .mat-select-arrow-wrapper .mat-select-arrow{display:none}[_nghost-%COMP%]     .custom-mat-select.mat-select-disabled .mat-select-arrow-wrapper{display:none}[_nghost-%COMP%]     .custom-mat-select:focus{outline:2px solid var(--fluent-theme-neutral-dark-color, #201F1E)}[_nghost-%COMP%]     .mat-select-value{width:100%;max-width:100%}[_nghost-%COMP%]     .mat-select-placeholder{color:unset}[_nghost-%COMP%]     .mat-select-value-text{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);color:var(--fluent-theme-neutral-primary-color, #323130)}[_nghost-%COMP%]     .mat-form-field-wrapper{padding:0!important}[_nghost-%COMP%]     .mat-form-field-wrapper .mat-form-field-flex{height:unset!important}[_nghost-%COMP%]     .mat-form-field-wrapper .mat-form-field-infix{padding:0!important;border:none!important;top:1px}'],changeDetection:0}),E}()},86251:function(ct,Ge,n){"use strict";n.d(Ge,{j:function(){return d}});var t=n(50423),i=n(36858),w=n(85102),a=["*"],d=function(){function p(){this.disableTooltip=!1}return p.\u0275fac=function(c){return new(c||p)},p.\u0275cmp=t.\u0275\u0275defineComponent({type:p,selectors:[["tooltip-wrapper"]],inputs:{tooltipKey:"tooltipKey",disableTooltip:"disableTooltip"},ngContentSelectors:a,decls:3,vars:4,consts:[[1,"tooltip-wrapper",3,"pbiTooltipDisabled","pbiTooltip"]],template:function(c,y){1&c&&(t.\u0275\u0275projectionDef(),t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275pipe(1,"localize"),t.\u0275\u0275projection(2),t.\u0275\u0275elementEnd()),2&c&&t.\u0275\u0275property("pbiTooltipDisabled",y.disableTooltip)("pbiTooltip",y.tooltipKey?t.\u0275\u0275pipeBind1(1,2,y.tooltipKey):void 0)},dependencies:[i.V,w.F],styles:["[_nghost-%COMP%], .tooltip-wrapper[_ngcontent-%COMP%]{width:100%;height:100%;flex:1;display:flex}"],changeDetection:0}),p}()},43847:function(ct,Ge,n){"use strict";n.d(Ge,{$:function(){return ge}});var t=n(81337),i=n(21661),w=n(94585),a=n(50423),d=n(15015),p=n(11547),l=n(57243),c=n(81905),y=n(22318),r=n(14172),C=n(77476),m=n(698),k=n(44408),O=n(36858),s=n(64832),ne=n(85102),ee=["headers"];function Z(se,xe){if(1&se){var me=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"button",14),a.\u0275\u0275listener("click",function(Le){a.\u0275\u0275restoreView(me);var ze=a.\u0275\u0275nextContext(3);return a.\u0275\u0275resetView(ze.onToggleExpandAll(Le))}),a.\u0275\u0275pipe(1,"localize"),a.\u0275\u0275element(2,"mat-icon",15),a.\u0275\u0275elementEnd()}if(2&se){var Oe=a.\u0275\u0275nextContext(3);a.\u0275\u0275classProp("expanded",Oe.showAllExpanded),a.\u0275\u0275property("pbiTooltip",a.\u0275\u0275pipeBind1(1,3,Oe.showAllExpanded?"FieldListMenuItem_CollapseAll":"FieldListMenuItem_ExpandAll"))}}function v(se,xe){if(1&se&&(a.\u0275\u0275elementStart(0,"div"),a.\u0275\u0275template(1,Z,3,5,"button",13),a.\u0275\u0275pipe(2,"async"),a.\u0275\u0275elementEnd()),2&se){var me=a.\u0275\u0275nextContext(2),Oe=a.\u0275\u0275reference(9);a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",a.\u0275\u0275pipeBind1(2,2,me.canExpandAll$))("ngIfElse",Oe)}}var E=function(xe){return{column:xe}};function I(se,xe){if(1&se&&a.\u0275\u0275elementContainer(0,16),2&se){var me=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275property("ngTemplateOutlet",me.headerTemplate)("ngTemplateOutletContext",a.\u0275\u0275pureFunction1(2,E,me))}}function H(se,xe){if(1&se&&(a.\u0275\u0275elementStart(0,"div",17),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&se){var me=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate(me.name)}}function G(se,xe){if(1&se){var me=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",18),a.\u0275\u0275listener("columnResized",function(Ce){a.\u0275\u0275restoreView(me);var Le=a.\u0275\u0275nextContext().index,ze=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(ze.onColumnResized(Ce,Le))}),a.\u0275\u0275elementEnd()}}function Y(se,xe){if(1&se&&(a.\u0275\u0275elementStart(0,"div",8),a.\u0275\u0275template(1,v,3,4,"div",9),a.\u0275\u0275template(2,I,1,4,"ng-container",10),a.\u0275\u0275template(3,H,2,1,"ng-template",null,11,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275template(5,G,1,0,"div",12),a.\u0275\u0275elementEnd()),2&se){var me=xe.$implicit,Oe=xe.index,Ce=a.\u0275\u0275reference(4),Le=a.\u0275\u0275nextContext();a.\u0275\u0275styleProp("width",me.width,"px"),a.\u0275\u0275classProp("sticky-left",Le.stickyFirstColumn&&0===Oe),a.\u0275\u0275property("ngClass",me.class)("ngStyle",me.style),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",0===Oe),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",!!me.headerTemplate)("ngIfElse",Ce),a.\u0275\u0275advance(3),a.\u0275\u0275property("ngIf",!1!==me.resizable)}}function ie(se,xe){1&se&&a.\u0275\u0275elementContainer(0)}function ye(se,xe){if(1&se){var me=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"button",24),a.\u0275\u0275listener("dblclick",function(ze){return ze.stopPropagation()})("click",function(ze){a.\u0275\u0275restoreView(me);var $e=a.\u0275\u0275nextContext(3).$implicit,We=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(We.onExpandNode($e,ze))}),a.\u0275\u0275elementEnd()}if(2&se){var Oe=a.\u0275\u0275nextContext(3).$implicit,Ce=a.\u0275\u0275nextContext();a.\u0275\u0275classProp("expanded",Ce.treeControl.isExpanded(Oe))}}function ae(se,xe){if(1&se&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275elementStart(1,"div",22),a.\u0275\u0275template(2,ye,1,2,"button",23),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementContainerEnd()),2&se){var me=a.\u0275\u0275nextContext(2).$implicit,Oe=a.\u0275\u0275nextContext(),Ce=a.\u0275\u0275reference(9);a.\u0275\u0275advance(1),a.\u0275\u0275property("cdkTreeNodePaddingIndent",Oe.paddingIndent),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",me.expandable)("ngIfElse",Ce)}}var J=function(xe,me){return{column:xe,data:me}};function N(se,xe){if(1&se&&(a.\u0275\u0275elementStart(0,"div",21),a.\u0275\u0275template(1,ae,3,3,"ng-container",9),a.\u0275\u0275elementContainer(2,16),a.\u0275\u0275elementEnd()),2&se){var me=xe.$implicit,Oe=xe.index,Ce=a.\u0275\u0275nextContext().$implicit,Le=a.\u0275\u0275nextContext();a.\u0275\u0275styleProp("width",me.width,"px"),a.\u0275\u0275classProp("sticky-left",Le.stickyFirstColumn&&0===Oe),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",0===Oe),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngTemplateOutlet",me.cellTemplate)("ngTemplateOutletContext",a.\u0275\u0275pureFunction2(7,J,me,Ce))}}function he(se,xe){if(1&se){var me=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"cdk-tree-node",19),a.\u0275\u0275listener("click",function(ze){var We=a.\u0275\u0275restoreView(me).$implicit;return a.\u0275\u0275resetView(We.onClick?We.onClick(ze):void 0)}),a.\u0275\u0275template(1,N,3,10,"div",20),a.\u0275\u0275elementEnd()}if(2&se){var Oe=xe.$implicit,Ce=a.\u0275\u0275nextContext();a.\u0275\u0275styleMap(Oe.style),a.\u0275\u0275classMap(Oe.class),a.\u0275\u0275styleProp("height",Ce.rowHeight,"px")("margin-bottom",Ce.rowSpacing,"px"),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngForOf",Ce.columns)("ngForTrackBy",Ce.trackByColumn)}}function pe(se,xe){1&se&&a.\u0275\u0275element(0,"div",25)}var ge=function(){function se(){var xe=this;this.minBufferPx=400,this.maxBufferPx=1e3,this.enableRowVirtualization=!0,this.onResizeTreeList=new a.EventEmitter,this.onResizeColumn=new a.EventEmitter,this.onExpansionChange=new a.EventEmitter,this.columns=[],this.expandedNodeIds=[],this.rowHeight=50,this.rowSpacing=10,this.paddingIndent=15,this.getChildren=function(me){return me.children},this.rowHash=function(me,Oe){return Oe.id},this.treeControl=new w.C2(function(me){return me.level},function(me){return me.expandable},{trackBy:function(Oe){return Oe.id}}),this.nodeFlatMapper=function(me,Oe){return(0,t.pi)((0,t.pi)({},me),{level:Oe,expandable:_.size(xe.getChildren(me))>0})}}return se.prototype.ngAfterViewInit=function(){var xe,me=this;this.treeFlattener=new d.JZ(this.nodeFlatMapper,function(Oe){return Oe.level},function(Oe){return Oe.expandable},this.getChildren),this.dataSource=new d.kc(this.treeControl,this.treeFlattener),this.allRows$=this.dataSource.connect(this.cdkTree).pipe((0,l.d)(1)),this.visibleItems$=this.allRows$.pipe((0,c.w)(function(Oe){return me.enableRowVirtualization?me.viewport.renderedRangeStream.pipe((0,y.O)(me.viewport.getRenderedRange()),(0,r.U)(function(Ce){return Oe.slice(Ce.start,Ce.end)})):(0,p.of)(Oe)})),this.dataSource.data=this.data,(xe=this.treeControl.expansionModel).select.apply(xe,this.expandedNodeIds),this.setShowExpandAll(),this.canExpandAll$=this.allRows$.pipe((0,r.U)(function(Oe){return _.some(Oe,function(Ce){return Ce.expandable})})),this.expansionSub=this.treeControl.expansionModel.changed.subscribe(function(Oe){me.setShowExpandAll(),me.onExpansionChange.emit(Oe)})},se.prototype.ngOnChanges=function(xe){xe.data&&this.dataSource&&(this.dataSource.data=this.data,this.setShowExpandAll()),(xe.rowHeight||xe.rowSpacing)&&(this.totalRowHeight=this.rowHeight+this.rowSpacing)},se.prototype.ngOnDestroy=function(){var xe;null===(xe=this.expansionSub)||void 0===xe||xe.unsubscribe()},se.prototype.onExpandNode=function(xe,me){this.treeControl.toggle(xe),me.stopPropagation()},se.prototype.onToggleExpandAll=function(){var xe;this.showAllExpanded?this.treeControl.collapseAll():(xe=this.treeControl.expansionModel).select.apply(xe,this.getExpandableNodeIds())},se.prototype.trackByColumn=function(xe,me){return me.key},se.prototype.trackById=function(xe,me){return me.id},se.prototype.scroll=function(){this.headers.nativeElement.scrollLeft=this.viewport.measureScrollOffset("left")},se.prototype.onTreeListResized=function(xe){var me=this;requestAnimationFrame(function(){me.onResizeTreeList.emit(xe)})},se.prototype.onColumnResized=function(xe,me){var Oe=this;requestAnimationFrame(function(){Oe.onResizeColumn.emit({column:me,width:Math.max(60,xe)})})},se.prototype.setShowExpandAll=function(){var xe=this,me=_.filter(this.treeControl.dataNodes,function(Ce){return Ce.expandable&&xe.treeControl.isExpanded(Ce)}).length,Oe=this.getExpandableNodeIds().length;0===me?this.showAllExpanded=!1:me===Oe&&(this.showAllExpanded=!0)},se.prototype.getExpandableNodeIds=function(){return _.map(_.filter(this.treeControl.dataNodes,function(xe){return xe.expandable}),function(xe){return xe.id})},se.\u0275fac=function(me){return new(me||se)},se.\u0275cmp=a.\u0275\u0275defineComponent({type:se,selectors:[["tree-list"]],viewQuery:function(me,Oe){if(1&me&&(a.\u0275\u0275viewQuery(w._0,7),a.\u0275\u0275viewQuery(i.N7,7),a.\u0275\u0275viewQuery(ee,5)),2&me){var Ce=void 0;a.\u0275\u0275queryRefresh(Ce=a.\u0275\u0275loadQuery())&&(Oe.cdkTree=Ce.first),a.\u0275\u0275queryRefresh(Ce=a.\u0275\u0275loadQuery())&&(Oe.viewport=Ce.first),a.\u0275\u0275queryRefresh(Ce=a.\u0275\u0275loadQuery())&&(Oe.headers=Ce.first)}},inputs:{columns:"columns",data:"data",expandedNodeIds:"expandedNodeIds",rowHeight:"rowHeight",rowSpacing:"rowSpacing",paddingIndent:"paddingIndent",getChildren:"getChildren",rowHash:"rowHash",stickyFirstColumn:"stickyFirstColumn"},outputs:{onResizeTreeList:"onResizeTreeList",onResizeColumn:"onResizeColumn",onExpansionChange:"onExpansionChange"},features:[a.\u0275\u0275NgOnChangesFeature],decls:10,vars:12,consts:[[1,"column-headers"],["headers",""],["class","header",3,"ngClass","ngStyle","sticky-left","width",4,"ngFor","ngForOf","ngForTrackBy"],["tabindex","-1",3,"itemSize","minBufferPx","maxBufferPx","scroll","on-resize"],[4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],[3,"dataSource","treeControl","trackBy"],["class","row",3,"class","style","height","margin-bottom","click",4,"cdkTreeNodeDef"],["expanderPlaceholder",""],[1,"header",3,"ngClass","ngStyle"],[4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf","ngIfElse"],["name",""],["class","resize-handle","resize-column","",3,"columnResized",4,"ngIf"],["tabindex","-1","class","expander expander-all",3,"pbiTooltip","expanded","click",4,"ngIf","ngIfElse"],["tabindex","-1",1,"expander","expander-all",3,"pbiTooltip","click"],["fontIcon","pbi-glyph-doublechevrondown",1,"glyphicon","glyph-mini"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"name"],["resize-column","",1,"resize-handle",3,"columnResized"],[1,"row",3,"click"],["class","cell","role","cell",3,"sticky-left","width",4,"ngFor","ngForOf","ngForTrackBy"],["role","cell",1,"cell"],["cdkTreeNodePadding","",1,"tree-node-padding",3,"cdkTreeNodePaddingIndent"],["tabindex","-1","class","glyphicon expander",3,"expanded","dblclick","click",4,"ngIf","ngIfElse"],["tabindex","-1",1,"glyphicon","expander",3,"dblclick","click"],[1,"expander-placeholder"]],template:function(me,Oe){1&me&&(a.\u0275\u0275elementStart(0,"div",0,1),a.\u0275\u0275template(2,Y,6,10,"div",2),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(3,"cdk-virtual-scroll-viewport",3),a.\u0275\u0275listener("scroll",function(){return Oe.scroll()})("on-resize",function(Le){return Oe.onTreeListResized(Le)}),a.\u0275\u0275template(4,ie,1,0,"ng-container",4),a.\u0275\u0275pipe(5,"async"),a.\u0275\u0275elementStart(6,"cdk-tree",5),a.\u0275\u0275template(7,he,2,10,"cdk-tree-node",6),a.\u0275\u0275elementEnd()(),a.\u0275\u0275template(8,pe,1,0,"ng-template",null,7,a.\u0275\u0275templateRefExtractor)),2&me&&(a.\u0275\u0275advance(2),a.\u0275\u0275property("ngForOf",Oe.columns)("ngForTrackBy",Oe.trackByColumn),a.\u0275\u0275advance(1),a.\u0275\u0275property("itemSize",Oe.totalRowHeight)("minBufferPx",Oe.minBufferPx)("maxBufferPx",Oe.maxBufferPx),a.\u0275\u0275advance(1),a.\u0275\u0275property("cdkVirtualForOf",a.\u0275\u0275pipeBind1(5,10,Oe.allRows$))("cdkVirtualForTrackBy",Oe.trackById),a.\u0275\u0275advance(2),a.\u0275\u0275property("dataSource",Oe.visibleItems$)("treeControl",Oe.treeControl)("trackBy",Oe.rowHash))},dependencies:[C.NgClass,C.NgForOf,C.NgIf,C.NgTemplateOutlet,C.NgStyle,w.rO,w.XJ,w._0,w.Hs,m.O,k.Hw,O.V,i.xd,i.x0,i.N7,s.B,C.AsyncPipe,ne.F],styles:['[_nghost-%COMP%]{--headerHeight: 40px;--expanderWidth: 48px;--column-headers-backgroundColor: var(--fluent-theme-white-color);--column-headers-foregroundColor: var(--fluent-theme-neutral-primary-color);--row-backgroundColor: var(--fluent-theme-white-color);--row-foregroundColor: var(--fluent-theme-neutral-primary-color);display:flex;flex-direction:column}cdk-virtual-scroll-viewport[_ngcontent-%COMP%]{flex:1;width:100%;max-width:100%;display:block}cdk-virtual-scroll-viewport[_ngcontent-%COMP%]:focus{outline:none}cdk-tree-node[_ngcontent-%COMP%]{display:block}.column-headers[_ngcontent-%COMP%]{margin:0;display:flex;padding:8px 0;height:var(--headerHeight);box-sizing:border-box;align-items:center;background-color:var(--column-headers-backgroundColor);color:var(--column-headers-foregroundColor);width:100%;overflow:hidden;z-index:2}.column-headers[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--lg-font-size, 16px);font-weight:var(--font-weight-regular, 400);font-weight:550;position:relative;border-right:solid 1px var(--gray-70, #BEBBB8);box-sizing:border-box;display:flex;flex-grow:0;flex-shrink:0;overflow:hidden}.column-headers[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.column-headers[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .resize-handle[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;opacity:0;width:10px;cursor:col-resize}.sticky-left[_ngcontent-%COMP%]{position:sticky!important;left:0;z-index:1!important}.sticky-left.cell[_ngcontent-%COMP%]{background-color:var(--row-backgroundColor)}.sticky-left.header[_ngcontent-%COMP%]{background-color:var(--column-headers-backgroundColor)}.row[_ngcontent-%COMP%], .cell[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;flex-grow:0;flex-shrink:0;z-index:0;box-sizing:border-box}.row[_ngcontent-%COMP%]{background-color:var(--row-backgroundColor);color:var(--row-foregroundColor);width:fit-content}.cell[_ngcontent-%COMP%]{overflow:hidden;height:100%}.tree-node-padding[_ngcontent-%COMP%]{height:100%}.expander-placeholder[_ngcontent-%COMP%]{width:var(--expanderWidth);flex-shrink:0}.expander[_ngcontent-%COMP%]{color:var(--gray-180, #252423);transition:transform ease .15s;transform:rotate(-90deg);font-size:var(--sm-font-size, 12px);width:var(--expanderWidth);padding:0 16px;background:transparent;outline:none;display:inline-flex;align-items:center;justify-content:center;height:100%;border:none}.expander.glyphicon[_ngcontent-%COMP%]:before{content:"\\e70d"}.expander.expanded[_ngcontent-%COMP%]{transform:none}.expander[_ngcontent-%COMP%]:focus, .expander[_ngcontent-%COMP%]:hover, .expander[_ngcontent-%COMP%]:focus:hover{background:transparent}.expander[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{padding:2px;font-size:12px;height:unset}'],changeDetection:0}),se}()},81437:function(ct,Ge,n){"use strict";n.d(Ge,{V:function(){return Z}});var t=n(81337),i=n(73221),w=n(59017),a=n(14172),d=n(83317),p=n(50423),l=n(49223),c=n(87426),y=n(9380),r=n(77476),C=n(59968),m=n(50057),k=n(44408),O=n(55710),s=function(E){return{active:E}};function ne(v,E){if(1&v&&(p.\u0275\u0275elementStart(0,"button",4,5),p.\u0275\u0275element(2,"mat-icon",6)(3,"span",7),p.\u0275\u0275elementEnd()),2&v){var I=p.\u0275\u0275reference(1),H=p.\u0275\u0275nextContext(),G=p.\u0275\u0275reference(2);p.\u0275\u0275property("matMenuTriggerFor",G)("ngClass",p.\u0275\u0275pureFunction1(4,s,!0===I.menuOpen)),p.\u0275\u0275advance(2),p.\u0275\u0275property("fontIcon",H.selectedOption.icon),p.\u0275\u0275advance(1),p.\u0275\u0275property("localize",H.selectedOption.label)}}function ee(v,E){if(1&v){var I=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"button",8),p.\u0275\u0275listener("click",function(){var ye=p.\u0275\u0275restoreView(I).$implicit,ae=p.\u0275\u0275nextContext();return p.\u0275\u0275resetView(ae.onSwitchView(ye.value))}),p.\u0275\u0275element(1,"mat-icon",6)(2,"span",9),p.\u0275\u0275elementEnd()}if(2&v){var H=E.$implicit,G=p.\u0275\u0275nextContext();p.\u0275\u0275property("disabled",G.viewType===H.value),p.\u0275\u0275advance(1),p.\u0275\u0275property("fontIcon",H.icon),p.\u0275\u0275advance(1),p.\u0275\u0275property("localize",H.label)("localizeTooltip",H.label)}}var Z=function(v){function E(I,H,G,Y){var ie=v.call(this)||this;ie.scorecardService=I,ie.hierarchyService=H,ie.featureSwitches=G,ie.changeDetector=Y;var ye=ie.featureSwitches.featureSwitches.scorecardCompactView,ae=ie.featureSwitches.featureSwitches.metricsBoardView,J=ie.hierarchyService.hasHierarchies$.pipe((0,a.U)(function(N){return ie.featureSwitches.featureSwitches.goalsHierarchies&&ie.featureSwitches.featureSwitches.goalsHierarchiesHeatmap&&N}),(0,d.R)(ie.onDestroy$));return(0,w.aj)([ie.scorecardService.viewType$,J]).pipe((0,d.R)(ie.onDestroy$)).subscribe(function(N){ie.updateViewOptions(N[0],ye,N[1],ae)}),ie}return(0,t.ZT)(E,v),E.prototype.onSwitchView=function(I){this.scorecardService.setViewType(I)},E.prototype.updateViewOptions=function(I,H,G,Y){var ie=[{value:"List",label:"ListView",icon:"pbi-glyph-allapps"}];H&&ie.push({value:"Compact",label:"Scorecard_CompactView_Preview",icon:"pbi-glyph-allapps"}),Y&&ie.push({value:"Board",label:"Display_Mode_Board_View",icon:"pbi-glyph-table"}),G&&ie.push({value:"Heatmap",label:"MetricsHeatmap_Preview",icon:"pbi-glyph-table"}),this.options=ie,this.showViewSwitcher=ie.length>1,this.viewType=I,this.selectedOption=ie.find(function(ye){return ye.value===I}),this.changeDetector.markForCheck()},E.\u0275fac=function(H){return new(H||E)(p.\u0275\u0275directiveInject(l.G),p.\u0275\u0275directiveInject(c.G),p.\u0275\u0275directiveInject(y.vZ),p.\u0275\u0275directiveInject(p.ChangeDetectorRef))},E.\u0275cmp=p.\u0275\u0275defineComponent({type:E,selectors:[["view-switcher"]],features:[p.\u0275\u0275InheritDefinitionFeature],decls:4,vars:3,consts:[["cdkMonitorElementFocus","","mat-button","","aria-expanded","viewSwitcherMenuTrigger.menuOpen === true","class","view-mode-picker pbi-fluent-button",3,"matMenuTriggerFor","ngClass",4,"ngIf"],[1,"view-mode-picker-menu",3,"overlapTrigger"],["viewSwitcherMenu","matMenu"],["mat-menu-item","","class","pbi-fluent-button",3,"disabled","click",4,"ngFor","ngForOf"],["cdkMonitorElementFocus","","mat-button","","aria-expanded","viewSwitcherMenuTrigger.menuOpen === true",1,"view-mode-picker","pbi-fluent-button",3,"matMenuTriggerFor","ngClass"],["viewSwitcherMenuTrigger","matMenuTrigger"],[1,"glyphicon","glyph-small",3,"fontIcon"],[3,"localize"],["mat-menu-item","",1,"pbi-fluent-button",3,"disabled","click"],[3,"localize","localizeTooltip"]],template:function(H,G){1&H&&(p.\u0275\u0275template(0,ne,4,6,"button",0),p.\u0275\u0275elementStart(1,"mat-menu",1,2),p.\u0275\u0275template(3,ee,3,4,"button",3),p.\u0275\u0275elementEnd()),2&H&&(p.\u0275\u0275property("ngIf",G.showViewSwitcher&&G.selectedOption),p.\u0275\u0275advance(1),p.\u0275\u0275property("overlapTrigger",!1),p.\u0275\u0275advance(2),p.\u0275\u0275property("ngForOf",G.options))},dependencies:[r.NgClass,r.NgForOf,r.NgIf,C.X,m.r,k.Hw,O.W0,O.tN,O.D8],styles:[".view-mode-picker[_ngcontent-%COMP%]{border:none;display:inline-flex;align-items:center;background-color:var(--fluent-theme-neutral-lighter-alt-color, #FAF9F8)}.view-mode-picker[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{overflow:visible}.view-mode-picker[_ngcontent-%COMP%]   .mat-icon.glyph-small[_ngcontent-%COMP%]{font-size:var(--lg-font-size, 16px);width:var(--lg-font-size, 16px);height:var(--lg-font-size, 16px)}.view-mode-picker[_ngcontent-%COMP%]   .mat-icon.glyph-mini[_ngcontent-%COMP%]{font-size:var(--sm-font-size, 12px);width:var(--sm-font-size, 12px);height:var(--sm-font-size, 12px)}.view-mode-picker[_ngcontent-%COMP%]   .mat-icon.mat-ligature-font[fontIcon][_ngcontent-%COMP%]{overflow:auto}.view-mode-picker[_ngcontent-%COMP%]:hover{background-color:var(--gray-20, #F3F2F1)}.view-mode-picker[_ngcontent-%COMP%]:active{background-color:var(--gray-30, #EDEBE9)}.view-mode-picker[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-weight:400;margin-right:8px;color:var(--fluent-theme-black-color, #000)}  .mat-menu-panel.view-mode-picker-menu .mat-menu-content{padding:0}.mat-menu-item[_ngcontent-%COMP%]{color:var(--gray-180, #252423);display:flex;flex-direction:row;align-items:center;height:36px;padding-right:16px}.mat-menu-item[_ngcontent-%COMP%]:disabled{background:transparent;color:var(--gray-80, #B3B0AD)}"],changeDetection:0}),E}(i.w)},64832:function(ct,Ge,n){"use strict";n.d(Ge,{B:function(){return i}});var t=n(50423),i=function(){function w(){this.columnResized=new t.EventEmitter}return w.prototype.onMouseDown=function(a){return this.isResizing=!0,this.pageX=a.pageX,this.initialWidth=a.target.parentElement.offsetWidth,document.body.style.cursor="col-resize",a.stopPropagation(),!1},w.prototype.onDragStart=function(){return!1},w.prototype.onMouseMove=function(a){return!this.isResizing||(this.columnResized.emit(Math.max(0,this.initialWidth+a.pageX-this.pageX)),a.stopPropagation(),!1)},w.prototype.onMouseLeave=function(a){return!this.isResizing||(this.isResizing=!1,document.body.style.cursor="",a.stopPropagation(),!1)},w.\u0275fac=function(d){return new(d||w)},w.\u0275dir=t.\u0275\u0275defineDirective({type:w,selectors:[["","resize-column",""]],hostBindings:function(d,p){1&d&&t.\u0275\u0275listener("mousedown",function(c){return p.onMouseDown(c)})("touchstart",function(c){return p.onMouseDown(c)})("dragstart",function(){return p.onDragStart()})("mousemove",function(c){return p.onMouseMove(c)},!1,t.\u0275\u0275resolveWindow)("touchmove",function(c){return p.onMouseMove(c)},!1,t.\u0275\u0275resolveWindow)("mouseup",function(c){return p.onMouseLeave(c)},!1,t.\u0275\u0275resolveWindow)("mouseleave",function(c){return p.onMouseLeave(c)},!1,t.\u0275\u0275resolveWindow)("touchend",function(c){return p.onMouseLeave(c)},!1,t.\u0275\u0275resolveWindow)},outputs:{columnResized:"columnResized"}}),w}()},57162:function(ct,Ge,n){"use strict";n.r(Ge),n.d(Ge,{GoalsUIModule:function(){return Vi}});var t=n(81337),i=n(87758),w=n(4716),a=n(95594),d=n(11891),p=n(64661),l=n(49048),c=n(76654),y=n(35328),r=n(85953),C=n(67090),m=n(74161),k=n(95027),O=n(44603),s=n(50423),ne=n(82621),ee=n(65181),Z=n(77476),v=n(17174),E=n(87650),I=n(77274),H=n(33846),G=n(85102),Y=["input"];function ie(Ie,nt){if(1&Ie){var Te=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"input",2,3),s.\u0275\u0275listener("focus",function(){s.\u0275\u0275restoreView(Te);var ln=s.\u0275\u0275nextContext();return s.\u0275\u0275resetView(ln.onInputFocus())})("blur",function(){s.\u0275\u0275restoreView(Te);var ln=s.\u0275\u0275nextContext();return s.\u0275\u0275resetView(ln.onInputBlur())})("keyup.enter",function(){s.\u0275\u0275restoreView(Te);var ln=s.\u0275\u0275nextContext();return s.\u0275\u0275resetView(ln.keyupEnter())})("ngModelChange",function(ln){s.\u0275\u0275restoreView(Te);var Mn=s.\u0275\u0275nextContext();return s.\u0275\u0275resetView(Mn.onInputChanged(ln))}),s.\u0275\u0275elementEnd()}if(2&Ie){var gt=s.\u0275\u0275nextContext();s.\u0275\u0275propertyInterpolate("type",gt.inputType),s.\u0275\u0275property("disabled",gt.isReadOnly)("placeholder",gt.placeholder)("ngModel","text"==gt.inputType?gt.formattedValue:gt.value),s.\u0275\u0275attribute("aria-label",gt.placeholder)}}function ye(Ie,nt){if(1&Ie&&(s.\u0275\u0275elementStart(0,"mat-option",7),s.\u0275\u0275text(1),s.\u0275\u0275elementEnd()),2&Ie){var Te=nt.$implicit;s.\u0275\u0275property("value",nt.index),s.\u0275\u0275advance(1),s.\u0275\u0275textInterpolate1(" ",Te.displayName," ")}}function ae(Ie,nt){if(1&Ie){var Te=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"mat-form-field",4)(1,"mat-select",5),s.\u0275\u0275listener("selectionChange",function(ln){s.\u0275\u0275restoreView(Te);var Mn=s.\u0275\u0275nextContext();return s.\u0275\u0275resetView(Mn.onSelectChanged(ln))})("keyup.enter",function(){s.\u0275\u0275restoreView(Te);var ln=s.\u0275\u0275nextContext();return s.\u0275\u0275resetView(ln.keyupEnter())}),s.\u0275\u0275pipe(2,"localize"),s.\u0275\u0275template(3,ye,2,2,"mat-option",6),s.\u0275\u0275elementEnd()()}if(2&Ie){var gt=s.\u0275\u0275nextContext();s.\u0275\u0275advance(1),s.\u0275\u0275property("disabled",gt.isReadOnly)("value",gt.value)("placeholder",s.\u0275\u0275pipeBind1(2,4,"Generic_Select_Value")),s.\u0275\u0275advance(2),s.\u0275\u0275property("ngForOf",gt.categories)}}var J=function(){function Ie(nt,Te){this.formatValuePipe=nt,this.localizationService=Te,this.placeholder="",this.type="number",this.onValueChanged=new s.EventEmitter,this.onInputKeyEnter=new s.EventEmitter,this.inputType="text",this.defaultDateFormat={day:"numeric",month:"short",year:"numeric"}}return Ie.prototype.ngOnInit=function(){this.categories||this.showFormattedValue()},Ie.prototype.onInputFocus=function(){this.inputType=this.type},Ie.prototype.onInputBlur=function(){this.showFormattedValue()},Ie.prototype.onInputChanged=function(nt){this.value=nt,this.formattedValue=this.formatValue(nt),this.onValueChanged.emit(this.value)},Ie.prototype.onSelectChanged=function(nt){this.value=nt.value,this.onValueChanged.emit(this.value)},Ie.prototype.keyupEnter=function(){this.onInputKeyEnter&&this.onInputKeyEnter.emit()},Ie.prototype.focus=function(){var nt,Te;null===(Te=null===(nt=this.inputElement)||void 0===nt?void 0:nt.nativeElement)||void 0===Te||Te.focus()},Ie.prototype.showFormattedValue=function(){this.inputType="text",this.formattedValue=this.formatValue(this.value),"date"===this.type&&!this.formattedValue&&(this.inputType="date")},Ie.prototype.formatValue=function(nt){var Te;if("number"===this.type)return this.formatValuePipe.transform(nt,this.formatString,!0,"");if(!nt)return"";var gt=this.localizationService.currentLanguageLocale;return O.E.treatAsLocalDate(new Date(nt)).toLocaleDateString(gt,null!==(Te=this.dateFormat)&&void 0!==Te?Te:this.defaultDateFormat)},Ie.\u0275fac=function(Te){return new(Te||Ie)(s.\u0275\u0275directiveInject(ne.c),s.\u0275\u0275directiveInject(ee.o))},Ie.\u0275cmp=s.\u0275\u0275defineComponent({type:Ie,selectors:[["formatted-input"]],viewQuery:function(Te,gt){var kt;(1&Te&&s.\u0275\u0275viewQuery(Y,5),2&Te)&&(s.\u0275\u0275queryRefresh(kt=s.\u0275\u0275loadQuery())&&(gt.inputElement=kt.first))},inputs:{placeholder:"placeholder",value:"value",formatString:"formatString",isReadOnly:"isReadOnly",type:"type",dateFormat:"dateFormat",categories:"categories"},outputs:{onValueChanged:"onValueChanged",onInputKeyEnter:"onInputKeyEnter"},decls:3,vars:2,consts:[["class","input-value","step","any",3,"disabled","placeholder","type","ngModel","focus","blur","keyup.enter","ngModelChange",4,"ngIf","ngIfElse"],["categoricalTarget",""],["step","any",1,"input-value",3,"disabled","placeholder","type","ngModel","focus","blur","keyup.enter","ngModelChange"],["input",""],["appearance","none",1,"select-category"],["panelClass","goals-categorical-value-select",1,"number-select",3,"disabled","value","placeholder","selectionChange","keyup.enter"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(Te,gt){if(1&Te&&(s.\u0275\u0275template(0,ie,2,5,"input",0),s.\u0275\u0275template(1,ae,4,6,"ng-template",null,1,s.\u0275\u0275templateRefExtractor)),2&Te){var kt=s.\u0275\u0275reference(2);s.\u0275\u0275property("ngIf",!gt.categories)("ngIfElse",kt)}},dependencies:[Z.NgForOf,Z.NgIf,v.Fj,v.JJ,v.On,E.v_,I.x8,H.CK,G.F],styles:["[_ngcontent-%COMP%]::-webkit-outer-spin-button, [_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}input[_ngcontent-%COMP%], mat-form-field[_ngcontent-%COMP%]{width:100%}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}"],changeDetection:0}),Ie}(),N=n(69205),he=n(44628),pe=n(56809),ce=n(42989),ge=n(33567),se=n(88940),xe=n(14463),me=n(47245),Oe=n(61036),Ce=n(29589),Le=n(47508),ze=n(39681),$e=n(78843),We=n(61289),He=n(94419),Je=n(80777),j=n(40956),tt=n(2330),Ue=n(29866),oe=n(98136),h=n(12338),g=n(698);function u(Ie,nt){if(1&Ie){var Te=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"visual-modern",2),s.\u0275\u0275listener("on-resize",function(ln){s.\u0275\u0275restoreView(Te);var Mn=s.\u0275\u0275nextContext();return s.\u0275\u0275resetView(Mn.onResize(ln))}),s.\u0275\u0275elementEnd()}if(2&Ie){var gt=s.\u0275\u0275nextContext();s.\u0275\u0275property("viewModel",gt.visualDefinition)("useOnPushChangeDetection",!0)}}var F=function(){function Ie(nt,Te,gt,kt,ln,Mn,fn,uo){this.geocoder=nt,this.geolocation=Te,this.localizationService=gt,this.moduleLoader=kt,this.promiseFactory=ln,this.visualPlugin=Mn,this.visualHostTooltipServiceFactory=fn,this.changeDetector=uo,this.initialVisualWidth=360,this.initialVisualHeight=172}return Ie.prototype.ngOnInit=function(){var nt=this;this.visualPlugin.ensureBuiltInPlugins().then(function(){nt.initializeVisual(),nt.isLoaded=!0,nt.changeDetector.detectChanges()})},Ie.prototype.ngOnChanges=function(nt){nt.values&&(this.generateDataView(),this.update())},Ie.prototype.initializeVisual=function(){var nt=this,Te=(0,ze.ED)((0,me.q)({geocoder:this.geocoder,geolocation:this.geolocation,localizationService:this.localizationService,moduleLoader:this.moduleLoader,promiseFactory:this.promiseFactory,visualHostTooltipService:this.visualHostTooltipServiceFactory.create(),getAzureMapToken:void 0,azureMapsEndpoint:void 0,geocoderIndexedDB:void 0}),function(gt){gt.getLocalizedString=function(kt){for(var ln,Mn=[],fn=1;fn<arguments.length;fn++)Mn[fn-1]=arguments[fn];return(ln=nt.localizationService).format.apply(ln,(0,t.ev)([kt],Mn||[],!1))},gt.getViewMode=function(){return 0},gt.locale=function(){return(0,Oe.uD)()},gt.promiseFactory=function(){return nt.promiseFactory}});this.visualDefinition={interactivityOptions:{},type:Le.L.kpi.name,allowInvalidDataView:!0,themeCollection:void 0,viewport:{height:this.initialVisualHeight,width:this.initialVisualWidth,scale:1},dataTransforms:void 0,hostServices:Te,visualAdapterHostServices:{startProgressBar:_.noop,stopProgressBar:_.noop,getNextDataSegment:function(){return(0,t.mG)(nt,void 0,void 0,function(){return(0,t.Jh)(this,function(kt){return[2,{}]})})}},stylePresetName:void 0,additionalObjectUpdates:_.noop,visualPlugin:this.visualPlugin},this.generateDataView(),this.update()},Ie.prototype.update=function(){this.visualDefinition&&(this.visualDefinition.data={dataView:this.dataView})},Ie.prototype.onResize=function(nt){this.visualDefinition&&(this.visualDefinition.viewport={width:nt.width,height:nt.height,scale:1})},Ie.prototype.generateDataView=function(){var nt,Te,gt=((nt={})[Ce.iu.objectName]=((Te={})[Ce.iu.propertyName]=this.formatString,Te),nt),kt=[{displayName:this.localizationService.get("Date"),type:Je.Ge.fromPrimitiveTypeAndCategory(6),roles:{TrendLine:!0}},{displayName:this.localizationService.get("Value"),type:Je.Ge.fromPrimitiveTypeAndCategory(3),roles:{Indicator:!0},index:0,objects:gt},{displayName:this.localizationService.get("MetricsName_New_Singular"),type:Je.Ge.fromPrimitiveTypeAndCategory(3),roles:{Goal:!0},index:0,objects:gt}],Mn=(0,He.Oh)((0,He.fL)("Date"),"Date"),fn=_.sortBy(this.values,function(bn){return new Date(bn.timestamp)}),uo=_.findLast(fn,function(bn){return _.isFinite(bn.target)});fn=_.filter(fn,function(bn){return _.isFinite(bn.value)}),uo&&(_.some(fn)?_.last(fn).target=uo.target:fn=[uo]),this.dataView={metadata:{columns:kt,objects:{indicator:{showIcon:!1}}},categorical:{categories:[{source:kt[0],values:_.map(fn,function(bn){return O.E.treatAsLocalDate(new Date(bn.timestamp))}),identity:_.map(fn,function(bn){return(0,$e.TZ)((0,He.Dg)(Mn,(0,He.fL)(bn.timestamp)))})}],values:(0,We.Yv)([{source:kt[1],values:_.map(fn,function(bn){return bn.value})},{source:kt[2],values:_.map(fn,function(bn){return bn.target})}])}}},Ie.\u0275fac=function(Te){return new(Te||Ie)(s.\u0275\u0275directiveInject(j.i),s.\u0275\u0275directiveInject(ge._1),s.\u0275\u0275directiveInject(ee.o),s.\u0275\u0275directiveInject(tt.m),s.\u0275\u0275directiveInject(xe.t),s.\u0275\u0275directiveInject(Ue.D),s.\u0275\u0275directiveInject(oe.q),s.\u0275\u0275directiveInject(s.ChangeDetectorRef))},Ie.\u0275cmp=s.\u0275\u0275defineComponent({type:Ie,selectors:[["goal-kpi"]],inputs:{values:"values",formatString:"formatString"},features:[s.\u0275\u0275ProvidersFeature((0,t.ev)([],se.H,!0)),s.\u0275\u0275NgOnChangesFeature],decls:2,vars:1,consts:[[1,"kpi-wrapper"],["class","kpi",3,"viewModel","useOnPushChangeDetection","on-resize",4,"ngIf"],[1,"kpi",3,"viewModel","useOnPushChangeDetection","on-resize"]],template:function(Te,gt){1&Te&&(s.\u0275\u0275elementStart(0,"div",0),s.\u0275\u0275template(1,u,1,2,"visual-modern",1),s.\u0275\u0275elementEnd()),2&Te&&(s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf",gt.isLoaded))},dependencies:[Z.NgIf,h.y,g.O],styles:["[_nghost-%COMP%]{min-height:150px;display:flex;height:100%;width:100%}.kpi-wrapper[_ngcontent-%COMP%]{flex:1;position:relative}.kpi-wrapper[_ngcontent-%COMP%]   .kpi[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0}"],changeDetection:0}),Ie}(),W=n(60042);function te(Ie,nt){if(1&Ie&&(s.\u0275\u0275elementStart(0,"table",1)(1,"tbody")(2,"tr")(3,"td",2)(4,"div",3),s.\u0275\u0275element(5,"div",4),s.\u0275\u0275elementEnd()(),s.\u0275\u0275elementStart(6,"td",5),s.\u0275\u0275element(7,"goal-value-cell",6)(8,"goal-change-cell",7),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(9,"td",8),s.\u0275\u0275element(10,"goal-sparkline-cell",7),s.\u0275\u0275elementEnd(),s.\u0275\u0275element(11,"td",9),s.\u0275\u0275elementEnd()()()),2&Ie){var gt,kt,Te=s.\u0275\u0275nextContext();s.\u0275\u0275advance(3),s.\u0275\u0275styleProp("--borderColor",Te.color),s.\u0275\u0275advance(2),s.\u0275\u0275styleProp("background-color",Te.color),s.\u0275\u0275advance(1),s.\u0275\u0275styleProp("--borderColor",Te.color),s.\u0275\u0275advance(1),s.\u0275\u0275property("goal",Te.goal)("showCurrent",!0)("showTarget",null!==(gt=null==Te.goal.metadata?null:Te.goal.metadata.showFinalTarget)&&void 0!==gt?gt:!Te.goal.targetConnection)("showMilestone",!(null!==(kt=null==Te.goal.metadata?null:Te.goal.metadata.showFinalTarget)&&void 0!==kt?kt:!Te.goal.targetConnection)),s.\u0275\u0275advance(1),s.\u0275\u0275property("goal",Te.goal),s.\u0275\u0275advance(1),s.\u0275\u0275styleProp("--borderColor",Te.color),s.\u0275\u0275advance(1),s.\u0275\u0275property("goal",Te.goal),s.\u0275\u0275advance(1),s.\u0275\u0275styleProp("--borderColor",Te.color)}}var U=function(){function Ie(){this.color=W.gT.ColorPalette[0]}return Ie.\u0275fac=function(Te){return new(Te||Ie)},Ie.\u0275cmp=s.\u0275\u0275defineComponent({type:Ie,selectors:[["goal-row-preview"]],inputs:{goal:"goal",color:"color"},decls:1,vars:1,consts:[["class","scorecard-table2","width","100%",4,"ngIf"],["width","100%",1,"scorecard-table2"],[1,"cell","cell-left-edge"],[1,"cell-box"],[1,"color-box"],["colspan","2",1,"cell","cell-value"],[3,"goal","showCurrent","showTarget","showMilestone"],[3,"goal"],["colspan","2",1,"cell","cell-sparkline"],[1,"cell","cell-value","cell-right-edge"]],template:function(Te,gt){1&Te&&s.\u0275\u0275template(0,te,12,16,"table",0),2&Te&&s.\u0275\u0275property("ngIf",gt.goal)},dependencies:[Z.NgIf,a.k,c.t,r.m],styles:[".cell[_ngcontent-%COMP%]{border:none;box-sizing:border-box}.cell-indent[_ngcontent-%COMP%]{width:36px}.cell-left-edge[_ngcontent-%COMP%]{border-top-left-radius:4px;border-bottom-left-radius:4px}.cell-right-edge[_ngcontent-%COMP%]{border-top-right-radius:4px;border-bottom-right-radius:4px}.cell-box[_ngcontent-%COMP%]{display:flex;height:100%}.cell-box[_ngcontent-%COMP%]   .color-box[_ngcontent-%COMP%]{min-width:6px;width:6px;border-top-left-radius:4px;border-bottom-left-radius:4px}.dialog-config[_ngcontent-%COMP%]     .simpleConfirmationDialog.updateConfirmationDialogPanel{width:580px}.dialog-config[_ngcontent-%COMP%]     .simpleConfirmationDialog.updateConfirmationDialogPanel .mat-mdc-dialog-actions button{border-width:1px;height:32px;padding:0;width:80px;margin-left:8px}.dialog-config[_ngcontent-%COMP%]     .simpleConfirmationDialog.updateConfirmationDialogPanel .mat-mdc-dialog-content{padding-left:8px}[_nghost-%COMP%]   td[_ngcontent-%COMP%]{height:60px}[_nghost-%COMP%]   .checkmark-td[_ngcontent-%COMP%]{width:35px;max-width:35px}[_nghost-%COMP%]   .checkmark-td[_ngcontent-%COMP%]:not(.show-checkmark){width:0px;max-width:0px}[_nghost-%COMP%]   .checkmark-td[_ngcontent-%COMP%]:not(.show-checkmark)   .select-checkmark[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .show-on-hover-only[_ngcontent-%COMP%]   .select-checkmark[_ngcontent-%COMP%]{visibility:hidden}[_nghost-%COMP%]:hover   .show-on-hover-only[_ngcontent-%COMP%]   .select-checkmark[_ngcontent-%COMP%], [_nghost-%COMP%]   .show-on-hover-only[_ngcontent-%COMP%]   .select-checkmark.box-checked[_ngcontent-%COMP%]{visibility:visible}[_nghost-%COMP%]   .select-checkmark[_ngcontent-%COMP%]{margin-right:15px}[_nghost-%COMP%]   .select-checkmark[_ngcontent-%COMP%]     pbi-checkbox{margin-bottom:0}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]{background:var(--scorecard-tableRowBackgroundColor);padding-right:10px;border-top:1px solid var(--fluent-theme-neutral-light-color, #EDEBE9);border-bottom:1px solid var(--fluent-theme-neutral-light-color, #EDEBE9)}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]   .rotate90[_ngcontent-%COMP%]{transform:rotate(-90deg)}[_nghost-%COMP%]   .cell-box[_ngcontent-%COMP%]{font-size:var(--lg-font-size, 16px);font-weight:var(--font-weight-regular, 400)}[_nghost-%COMP%]   .cell-box[_ngcontent-%COMP%]   .collapse-box[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:48px;min-width:48px;background-color:transparent;border:none}[_nghost-%COMP%]   .cell-box[_ngcontent-%COMP%]   .pointer[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   .cell-box[_ngcontent-%COMP%]   .displayed-name-and-action-wrapper[_ngcontent-%COMP%]{display:flex;width:100%}[_nghost-%COMP%]   .cell-box[_ngcontent-%COMP%]   .displayed-name-and-action-wrapper[_ngcontent-%COMP%]   goal-name-cell[_ngcontent-%COMP%]{flex-grow:1;max-height:3.6em;line-height:1.8em}[_nghost-%COMP%]   .cell-box[_ngcontent-%COMP%]   .displayed-name-and-action-wrapper[_ngcontent-%COMP%]   goal-actions-cell[_ngcontent-%COMP%]{margin-right:10px}[_nghost-%COMP%]   .cell-owner[_ngcontent-%COMP%]{width:250px;max-width:300px}[_nghost-%COMP%]   .cell-progress-icon[_ngcontent-%COMP%]{width:220px;max-width:250px;text-align:center;padding-right:20px}[_nghost-%COMP%]   .cell-sparkline[_ngcontent-%COMP%]{width:150px;overflow:hidden}[_nghost-%COMP%]   .cell-due-date[_ngcontent-%COMP%]{width:150px}[_nghost-%COMP%]   .cell-context-menu[_ngcontent-%COMP%]{width:51px;text-align:center}[_nghost-%COMP%]   .cell-context-menu[_ngcontent-%COMP%]   .context-menu-icon[_ngcontent-%COMP%]{color:var(--gray-140, #484644);font-size:16px;cursor:pointer}[_nghost-%COMP%]   .cell-value-combined[_ngcontent-%COMP%]{width:220px}[_nghost-%COMP%]   .cell-value[_ngcontent-%COMP%]{width:92px}[_nghost-%COMP%]   .cell-milestone[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-target[_ngcontent-%COMP%]{width:72px}[_nghost-%COMP%]   .cell-value-combined[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-value[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-milestone[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-target[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{overflow:visible}[_nghost-%COMP%]   .cell-value-combined[_ngcontent-%COMP%]   .mat-icon.glyph-small[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-value[_ngcontent-%COMP%]   .mat-icon.glyph-small[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-milestone[_ngcontent-%COMP%]   .mat-icon.glyph-small[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-target[_ngcontent-%COMP%]   .mat-icon.glyph-small[_ngcontent-%COMP%]{font-size:var(--lg-font-size, 16px);width:var(--lg-font-size, 16px);height:var(--lg-font-size, 16px)}[_nghost-%COMP%]   .cell-value-combined[_ngcontent-%COMP%]   .mat-icon.glyph-mini[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-value[_ngcontent-%COMP%]   .mat-icon.glyph-mini[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-milestone[_ngcontent-%COMP%]   .mat-icon.glyph-mini[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-target[_ngcontent-%COMP%]   .mat-icon.glyph-mini[_ngcontent-%COMP%]{font-size:var(--sm-font-size, 12px);width:var(--sm-font-size, 12px);height:var(--sm-font-size, 12px)}[_nghost-%COMP%]   .cell-value-combined[_ngcontent-%COMP%]   .mat-icon.mat-ligature-font[fontIcon][_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-value[_ngcontent-%COMP%]   .mat-icon.mat-ligature-font[fontIcon][_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-milestone[_ngcontent-%COMP%]   .mat-icon.mat-ligature-font[fontIcon][_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-target[_ngcontent-%COMP%]   .mat-icon.mat-ligature-font[fontIcon][_ngcontent-%COMP%]{overflow:auto}[_nghost-%COMP%]   goal-actions-cell[_ngcontent-%COMP%]{visibility:hidden}[_nghost-%COMP%]:hover   goal-actions-cell[_ngcontent-%COMP%], [_nghost-%COMP%]:focus-within   goal-actions-cell[_ngcontent-%COMP%]{visibility:visible}[_nghost-%COMP%]   .selected-goal.cell[_ngcontent-%COMP%]{border-top:2px solid var(--borderColor);border-bottom:2px solid var(--borderColor)}[_nghost-%COMP%]   .selected-goal.cell-right-edge[_ngcontent-%COMP%]{border-right:2px solid var(--borderColor)}[_nghost-%COMP%]   .cell-right-edge[_ngcontent-%COMP%]{width:2px;border-right:1px solid var(--fluent-theme-neutral-light-color, #EDEBE9)}  .simpleConfirmationDialog.updateConfirmationDialogPanel{width:580px}  .simpleConfirmationDialog.updateConfirmationDialogPanel .mat-mdc-dialog-actions button{border-width:1px;height:32px;padding:0;width:80px;margin-left:8px}  .simpleConfirmationDialog.updateConfirmationDialogPanel .mat-mdc-dialog-content{padding-left:8px}"],changeDetection:0}),Ie}(),Q=n(46037),B=n(89256),P=n(25689),q=n(7082),le=n(39947),de=n(84522),V=n(17085);function b(Ie,nt){1&Ie&&s.\u0275\u0275elementContainer(0)}var L=function(){function Ie(){}return Ie.\u0275fac=function(Te){return new(Te||Ie)},Ie.\u0275cmp=s.\u0275\u0275defineComponent({type:Ie,selectors:[["goals-tooltip"]],inputs:{args:"args"},decls:2,vars:2,consts:[["role","tooltip",1,"pbi-goals-tooltip-content","themeableElement",3,"id"],[4,"ngTemplateOutlet"]],template:function(Te,gt){1&Te&&(s.\u0275\u0275elementStart(0,"div",0),s.\u0275\u0275template(1,b,1,0,"ng-container",1),s.\u0275\u0275elementEnd()),2&Te&&(s.\u0275\u0275property("id",gt.args.id),s.\u0275\u0275advance(1),s.\u0275\u0275property("ngTemplateOutlet",gt.args.templateRef))},dependencies:[Z.NgTemplateOutlet],styles:["@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;overflow:auto;border-radius:2px;border:1px solid var(--scorecard-backgroundColor);background-color:var(--scorecard-backgroundColor);color:var(--scorecard-neutralPrimaryColor);box-shadow:0 0 2px var(--colorNeutralShadowAmbient),0 8px 16px var(--colorNeutralShadowKey);animation:_ngcontent-%COMP%_fade-in .15s ease;font-size:var(--sm-font-size, 12px);word-break:break-word}.pbi-goals-tooltip-content[_ngcontent-%COMP%]{background-color:var(--scorecard-backgroundColor);z-index:1;padding:7px}"],changeDetection:0}),Ie}(),T=n(33279),X=n(85353),ue=n(125),Ne=n(3204),Qe=n(62831),Xe=n(57535),it=n(62458),ut=n(9380),ot=n(59968),pt=n(44408),Ye=n(36858),dt=n(90127),Ot=["chart"];function Et(Ie,nt){1&Ie&&s.\u0275\u0275elementContainer(0)}function Gt(Ie,nt){if(1&Ie&&(s.\u0275\u0275elementContainerStart(0),s.\u0275\u0275template(1,Et,1,0,"ng-container",8),s.\u0275\u0275elementContainerEnd()),2&Ie){s.\u0275\u0275nextContext();var Te=s.\u0275\u0275reference(11);s.\u0275\u0275advance(1),s.\u0275\u0275property("ngTemplateOutlet",Te)}}function K(Ie,nt){if(1&Ie&&(s.\u0275\u0275elementStart(0,"span",20)(1,"span",21),s.\u0275\u0275text(2),s.\u0275\u0275pipe(3,"formatGoalValue"),s.\u0275\u0275elementEnd()()),2&Ie){var Te=s.\u0275\u0275nextContext(4);s.\u0275\u0275property("localize",Te.periodLocalizeString),s.\u0275\u0275advance(2),s.\u0275\u0275textInterpolate(Te.valueChange.isPercentage?Te.valueChange.changeAmount+"%":s.\u0275\u0275pipeBind3(3,2,Te.valueChange.changeAmount,Te.categories,Te.goal.valuesFormatString))}}function yn(Ie,nt){if(1&Ie&&(s.\u0275\u0275elementStart(0,"span",22)(1,"span",23),s.\u0275\u0275text(2),s.\u0275\u0275pipe(3,"formatGoalValue"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(4,"span",24),s.\u0275\u0275text(5),s.\u0275\u0275elementEnd()()),2&Ie){var Te=s.\u0275\u0275nextContext(4);s.\u0275\u0275property("localize",Te.periodLocalizeString),s.\u0275\u0275advance(2),s.\u0275\u0275textInterpolate(Te.valueChange.isPercentage?Te.valueChange.changeAmount+"%":s.\u0275\u0275pipeBind3(3,3,Te.valueChange.changeAmount,Te.categories,Te.goal.valuesFormatString)),s.\u0275\u0275advance(3),s.\u0275\u0275textInterpolate(Te.valueChange.period)}}function on(Ie,nt){if(1&Ie&&(s.\u0275\u0275elementStart(0,"div",15),s.\u0275\u0275element(1,"mat-icon",16),s.\u0275\u0275elementStart(2,"div",17),s.\u0275\u0275template(3,K,4,6,"span",18),s.\u0275\u0275template(4,yn,6,7,"ng-template",null,19,s.\u0275\u0275templateRefExtractor),s.\u0275\u0275elementEnd()()),2&Ie){var Te=s.\u0275\u0275reference(5),gt=s.\u0275\u0275nextContext(3);s.\u0275\u0275advance(1),s.\u0275\u0275classProp("rotate180",!gt.valueChange.isIncrease),s.\u0275\u0275advance(2),s.\u0275\u0275property("ngIf",gt.periodLocalizeString&&!gt.periodLocalizeString.endsWith("Custom"))("ngIfElse",Te)}}function Un(Ie,nt){if(1&Ie&&(s.\u0275\u0275elementContainerStart(0),s.\u0275\u0275template(1,on,6,4,"div",11),s.\u0275\u0275elementStart(2,"div",12,13),s.\u0275\u0275element(4,"goal-history-chart",14),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementContainerEnd()),2&Ie){var Te=s.\u0275\u0275nextContext(2);s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf",Te.valueChange),s.\u0275\u0275advance(3),s.\u0275\u0275property("values",Te.sparklineValues)("formatString",Te.goal.valuesFormatString)("color",Te.statusColor)("showGoalTargets",!1)("axesOptions",Te.axesOptions)("legend","None")}}function yo(Ie,nt){if(1&Ie&&(s.\u0275\u0275elementStart(0,"div",9),s.\u0275\u0275template(1,Un,5,7,"ng-container",10),s.\u0275\u0275elementEnd()),2&Ie){var Te=s.\u0275\u0275nextContext(),gt=s.\u0275\u0275reference(11);s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf",Te.hasData)("ngIfElse",gt)}}function Mo(Ie,nt){if(1&Ie&&(s.\u0275\u0275elementStart(0,"div",25),s.\u0275\u0275text(1),s.\u0275\u0275pipe(2,"formatGoalValue"),s.\u0275\u0275elementEnd()),2&Ie){var Te=s.\u0275\u0275nextContext();s.\u0275\u0275advance(1),s.\u0275\u0275textInterpolate(s.\u0275\u0275pipeBind3(2,1,Te.currentValue.value,Te.categories,Te.goal.valuesFormatString))}}function zo(Ie,nt){if(1&Ie&&(s.\u0275\u0275elementStart(0,"div",26)(1,"div",27)(2,"div",28),s.\u0275\u0275pipe(3,"formatValue"),s.\u0275\u0275text(4),s.\u0275\u0275pipe(5,"formatValue"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(6,"div",29),s.\u0275\u0275pipe(7,"formatValue"),s.\u0275\u0275text(8),s.\u0275\u0275pipe(9,"formatValue"),s.\u0275\u0275elementEnd()()()),2&Ie){var Te=s.\u0275\u0275nextContext();s.\u0275\u0275advance(2),s.\u0275\u0275property("pbiTooltip",s.\u0275\u0275pipeBind3(3,4,Te.currentValue.value,Te.goal.valuesFormatString,!1)),s.\u0275\u0275advance(2),s.\u0275\u0275textInterpolate1(" ",s.\u0275\u0275pipeBind2(5,8,Te.currentValue.value,Te.goal.valuesFormatString)," "),s.\u0275\u0275advance(2),s.\u0275\u0275property("pbiTooltip",s.\u0275\u0275pipeBind3(7,11,Te.currentValue.target,Te.goal.valuesFormatString,!1)),s.\u0275\u0275advance(2),s.\u0275\u0275textInterpolate1(" /",s.\u0275\u0275pipeBind2(9,15,Te.currentValue.target,Te.goal.valuesFormatString)," ")}}var po=function(){function Ie(nt,Te){this.featureSwitches=nt,this.localizationService=Te,this.axesOptions=ce.n,this.currentValue=null,this.supportCategoricalValues=this.featureSwitches.featureSwitches.goalsCategoricalValues}return Ie.prototype.ngOnInit=function(){var Te,gt,nt=this;it.fF.assertValue(this.goal,"Missing goal"),this.setDisplayedVals(),this.locale=this.localizationService.currentLanguageLocale,this.supportCategoricalValues&&this.goal.valuesCategoryId&&(this.categories=null!==(gt=null===(Te=_.find(this.goal.goalValueCategories,function(kt){return kt.id===nt.goal.valuesCategoryId}))||void 0===Te?void 0:Te.categories)&&void 0!==gt?gt:[])},Ie.prototype.ngOnChanges=function(nt){var Te,gt;nt.goal&&(this.setDisplayedVals(),this.supportCategoricalValues&&nt.goal.currentValue.valuesCategoryId&&(this.categories=null!==(gt=null===(Te=_.find(this.goal.goalValueCategories,function(kt){return kt.id===nt.goal.currentValue.valuesCategoryId}))||void 0===Te?void 0:Te.categories)&&void 0!==gt?gt:[]))},Ie.prototype.ngAfterViewInit=function(){var nt;this.lineChartChangeObserver=Qe.q.observeAndRemoveFocusableAttributes(null===(nt=this.chart)||void 0===nt?void 0:nt.nativeElement)},Ie.prototype.ngOnDestroy=function(){var nt;null===(nt=this.lineChartChangeObserver)||void 0===nt||nt.disconnect()},Ie.prototype.setDisplayedVals=function(){var nt;this.currentValue=ue.r.buildCurrentGoalValue(this.goal),this.valueChange=ue.r.calculateValueChange(this.goal,this.featureSwitches.featureSwitches.goalsSparklineChangeAggregations),this.periodLocalizeString=_.isNil(null===(nt=this.valueChange)||void 0===nt?void 0:nt.period)?void 0:this.getPeriodSuffix(this.valueChange.period);var gt=Xe.p.getGoalStatus(this.currentValue.status,this.goalStatuses);this.statusColor=Xe.p.getGoalSparklineColor(gt.color),this.sparklineValues=Ne.b.buildSparklineValues(this.goal,this.featureSwitches.featureSwitches.goalsSparklineChangeAggregations),this.hasData=_.some(this.sparklineValues)},Ie.prototype.getPeriodSuffix=function(nt){switch(nt){case"Period_DoD":case"Period_MoM":case"Period_QoQ":case"Period_WoW":case"Period_YoY":return nt;default:return"PercentGrowth_Period_Custom"}},Ie.componentId="RelevantGoalChartComponentId",Ie.\u0275fac=function(Te){return new(Te||Ie)(s.\u0275\u0275directiveInject(ut.vZ),s.\u0275\u0275directiveInject(ee.o))},Ie.\u0275cmp=s.\u0275\u0275defineComponent({type:Ie,selectors:[["relevant-goal-chart"]],viewQuery:function(Te,gt){var kt;(1&Te&&s.\u0275\u0275viewQuery(Ot,5),2&Te)&&(s.\u0275\u0275queryRefresh(kt=s.\u0275\u0275loadQuery())&&(gt.chart=kt.first))},inputs:{goal:"goal",goalStatuses:"goalStatuses"},features:[s.\u0275\u0275NgOnChangesFeature],decls:12,vars:7,consts:[[1,"relevant-goal"],[1,"title-and-value"],[4,"ngIf"],[1,"title",3,"pbiTooltip"],[3,"pbiTooltip"],["class","growth-and-visual",4,"ngIf","ngIfElse"],["useCategories",""],["valueAndTarget",""],[4,"ngTemplateOutlet"],[1,"growth-and-visual"],[4,"ngIf","ngIfElse"],["class","growth",4,"ngIf"],[1,"visual"],["chart",""],["type","AreaChart",3,"values","formatString","color","showGoalTargets","axesOptions","legend"],[1,"growth"],["fontIcon","pbi-glyph-arrow",1,"glyphicon","glyph-micro"],[1,"change"],["class","period","localize-fragments","",3,"localize",4,"ngIf","ngIfElse"],["customPeriod",""],["localize-fragments","",1,"period",3,"localize"],["fragment-index","0",1,"valueChangePeriod"],["localize-fragments","",3,"localize"],["fragment-index","0"],["fragment-index","1"],[1,"current-value"],[1,"value-wrapper"],[1,"value-target"],[1,"value",3,"pbiTooltip"],[1,"target",3,"pbiTooltip"]],template:function(Te,gt){if(1&Te&&(s.\u0275\u0275elementStart(0,"div",0)(1,"div",1),s.\u0275\u0275template(2,Gt,2,1,"ng-container",2),s.\u0275\u0275elementStart(3,"span",3),s.\u0275\u0275text(4),s.\u0275\u0275elementStart(5,"span",4),s.\u0275\u0275text(6),s.\u0275\u0275elementEnd()()(),s.\u0275\u0275template(7,yo,2,2,"div",5),s.\u0275\u0275template(8,Mo,3,5,"ng-template",null,6,s.\u0275\u0275templateRefExtractor),s.\u0275\u0275elementEnd(),s.\u0275\u0275template(10,zo,10,18,"ng-template",null,7,s.\u0275\u0275templateRefExtractor)),2&Te){var kt=s.\u0275\u0275reference(9);s.\u0275\u0275advance(2),s.\u0275\u0275property("ngIf",gt.hasData&&!(gt.supportCategoricalValues&&gt.goal.valuesCategoryId)),s.\u0275\u0275advance(1),s.\u0275\u0275property("pbiTooltip",gt.goal.scorecardName),s.\u0275\u0275advance(1),s.\u0275\u0275textInterpolate1("",gt.goal.scorecardName," > "),s.\u0275\u0275advance(1),s.\u0275\u0275property("pbiTooltip",gt.goal.name),s.\u0275\u0275advance(1),s.\u0275\u0275textInterpolate1(" ",gt.goal.name,""),s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf",!(gt.supportCategoricalValues&&gt.goal.valuesCategoryId))("ngIfElse",kt)}},dependencies:[Z.NgIf,Z.NgTemplateOutlet,ot.X,pt.Hw,Ye.V,ce.R,dt.D,ne.c],styles:['.relevant-goal[_ngcontent-%COMP%]{flex:1;width:284px;background-color:var(--fluent-theme-white-color, #FFF);border-radius:2px}.relevant-goal[_ngcontent-%COMP%]   .rotate180[_ngcontent-%COMP%]{transform:rotate(180deg);-webkit-transform:rotate(180deg)}.relevant-goal[_ngcontent-%COMP%]:hover, .relevant-goal[_ngcontent-%COMP%]:focus:hover{cursor:pointer}.relevant-goal[_ngcontent-%COMP%]   .title-and-value[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;height:66px;padding:0 16px}.relevant-goal[_ngcontent-%COMP%]   .title-and-value[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--lg-font-size, 16px);font-weight:var(--font-weight-regular, 400);line-height:20px;color:var(--fluent-theme-neutral-primary-color, #323130);white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.relevant-goal[_ngcontent-%COMP%]   .title-and-value[_ngcontent-%COMP%]   .value-target[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:18px}.relevant-goal[_ngcontent-%COMP%]   .title-and-value[_ngcontent-%COMP%]   .value-target[_ngcontent-%COMP%]   .target[_ngcontent-%COMP%]{font-size:14px}.relevant-goal[_ngcontent-%COMP%]   .growth-and-visual[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:168px}.relevant-goal[_ngcontent-%COMP%]   .growth-and-visual[_ngcontent-%COMP%]   .growth[_ngcontent-%COMP%]{display:flex;align-items:center;margin-top:1px;padding:7px 16px}.relevant-goal[_ngcontent-%COMP%]   .growth-and-visual[_ngcontent-%COMP%]   .growth[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{height:8px!important;width:8px!important}.relevant-goal[_ngcontent-%COMP%]   .growth-and-visual[_ngcontent-%COMP%]   .growth[_ngcontent-%COMP%]   .rotate180[_ngcontent-%COMP%]{transform:rotate(180deg)}.relevant-goal[_ngcontent-%COMP%]   .growth-and-visual[_ngcontent-%COMP%]   .growth[_ngcontent-%COMP%]   .change[_ngcontent-%COMP%]{font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-regular, 400);margin-left:4px}.relevant-goal[_ngcontent-%COMP%]   .growth-and-visual[_ngcontent-%COMP%]   .growth[_ngcontent-%COMP%]   .change[_ngcontent-%COMP%]   .valueChangePeriod[_ngcontent-%COMP%]{margin-right:4px}.relevant-goal[_ngcontent-%COMP%]   .growth-and-visual[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]{flex:1;display:flex;padding:7px 10px}.relevant-goal[_ngcontent-%COMP%]   .growth-and-visual[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   goal-history-chart[_ngcontent-%COMP%]{width:100%;flex:1}.relevant-goal[_ngcontent-%COMP%]   .growth-and-visual[_ngcontent-%COMP%]   .value-wrapper[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center;justify-content:center}.relevant-goal[_ngcontent-%COMP%]   .growth-and-visual[_ngcontent-%COMP%]   .value-wrapper[_ngcontent-%COMP%]   .value-target[_ngcontent-%COMP%]{margin:auto}.relevant-goal[_ngcontent-%COMP%]   .growth-and-visual[_ngcontent-%COMP%]   .value-wrapper[_ngcontent-%COMP%]   .value-target[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:34px}.relevant-goal[_ngcontent-%COMP%]   .growth-and-visual[_ngcontent-%COMP%]   .value-wrapper[_ngcontent-%COMP%]   .value-target[_ngcontent-%COMP%]   .target[_ngcontent-%COMP%]{font-size:22px}.relevant-goal[_ngcontent-%COMP%]   .current-value[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:168px;font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--pbi-font-32, 32px);font-weight:var(--font-weight-semi-bold, 600)}.relevant-goal[_ngcontent-%COMP%]   .value-target[_ngcontent-%COMP%]{display:flex;align-items:baseline}.relevant-goal[_ngcontent-%COMP%]   .value-target[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:var(--fluent-theme-neutral-primary-color, #323130);font-weight:var(--font-weight-semi-bold, 600)}.relevant-goal[_ngcontent-%COMP%]   .value-target[_ngcontent-%COMP%]   .target[_ngcontent-%COMP%]{color:var(--fluent-theme-neutral-primary-alt-color, #3B3A39)}.relevant-goal[_ngcontent-%COMP%]   .date-and-status[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:center;height:44px;padding:0 16px}.relevant-goal[_ngcontent-%COMP%]   .date-and-status[_ngcontent-%COMP%]   .target-date[_ngcontent-%COMP%]{display:flex;align-items:center;font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-regular, 400);font-size:14px;line-height:18px;color:var(--fluent-theme-neutral-secondary-color, #605E5C);white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.relevant-goal[_ngcontent-%COMP%]   .date-and-status[_ngcontent-%COMP%]   .target-date[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:4px}.relevant-goal[_ngcontent-%COMP%]   .date-and-status[_ngcontent-%COMP%]   status-icon[_ngcontent-%COMP%]{width:95px;margin-right:7px}.relevant-goal[_ngcontent-%COMP%]   .date-and-status[_ngcontent-%COMP%]   status-icon[_ngcontent-%COMP%]     .status{white-space:nowrap;text-overflow:ellipsis;overflow:hidden}'],changeDetection:0}),Ie}();function lo(Ie,nt){if(1&Ie){var Te=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"goal-kpi",5),s.\u0275\u0275listener("onSelected",function(ln){s.\u0275\u0275restoreView(Te);var Mn=s.\u0275\u0275nextContext();return s.\u0275\u0275resetView(Mn.onPointSelected(ln))}),s.\u0275\u0275elementEnd()}if(2&Ie){var gt=s.\u0275\u0275nextContext();s.\u0275\u0275property("values",gt.goal.goalValues)("formatString",gt.goal.valuesFormatString)}}function xo(Ie,nt){if(1&Ie&&(s.\u0275\u0275elementContainerStart(0),s.\u0275\u0275elementStart(1,"div",6),s.\u0275\u0275text(2),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(3,"div",7),s.\u0275\u0275element(4,"label",8),s.\u0275\u0275elementStart(5,"span"),s.\u0275\u0275text(6),s.\u0275\u0275elementEnd()(),s.\u0275\u0275elementContainerEnd()),2&Ie){var Te=s.\u0275\u0275nextContext();s.\u0275\u0275advance(2),s.\u0275\u0275textInterpolate(Te.goal.name),s.\u0275\u0275advance(4),s.\u0275\u0275textInterpolate1(" : ",Te.completionDate,"")}}var so=function(){function Ie(nt){this.localizationService=nt}return Ie.prototype.ngOnInit=function(){if(this.goal.completionDate){var nt=this.localizationService.currentLanguageLocale;this.completionDate=new Date(this.goal.completionDate).toLocaleDateString(nt,{day:"numeric",month:"short",year:"numeric"})}},Ie.componentId="RelevantGoalKpiComponentId",Ie.\u0275fac=function(Te){return new(Te||Ie)(s.\u0275\u0275directiveInject(ee.o))},Ie.\u0275cmp=s.\u0275\u0275defineComponent({type:Ie,selectors:[["relevant-goal-kpi"]],inputs:{goal:"goal"},decls:5,vars:2,consts:[[1,"relevant-goal","pbi-depth-1","pbi-depth-interactive"],[1,"relevant-goal-kpi"],[3,"values","formatString","onSelected",4,"ngIf"],[1,"relevant-goal-details"],[4,"ngIf"],[3,"values","formatString","onSelected"],[1,"title"],[1,"target-date"],["localize","KpiTargetDateFieldListDisplayName"]],template:function(Te,gt){1&Te&&(s.\u0275\u0275elementStart(0,"div",0)(1,"div",1),s.\u0275\u0275template(2,lo,1,2,"goal-kpi",2),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(3,"div",3),s.\u0275\u0275template(4,xo,7,2,"ng-container",4),s.\u0275\u0275elementEnd()()),2&Te&&(s.\u0275\u0275advance(2),s.\u0275\u0275property("ngIf",gt.goal),s.\u0275\u0275advance(2),s.\u0275\u0275property("ngIf",gt.goal))},dependencies:[Z.NgIf,ot.X,F],styles:['.relevant-goal[_ngcontent-%COMP%]{flex:1;height:262px;width:285px;background:var(--fluent-theme-white-color, #FFF);border-radius:2px}.relevant-goal[_ngcontent-%COMP%]:hover, .relevant-goal[_ngcontent-%COMP%]:focus:hover{cursor:pointer}.relevant-goal[_ngcontent-%COMP%]   .relevant-goal-details[_ngcontent-%COMP%]{border-top:1px solid var(--fluent-theme-neutral-light-color, #EDEBE9);padding:16px}.relevant-goal[_ngcontent-%COMP%]   .relevant-goal-details[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-semi-bold, 600);line-height:20px;color:var(--fluent-theme-neutral-primary-color, #323130);white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.relevant-goal[_ngcontent-%COMP%]   .relevant-goal-details[_ngcontent-%COMP%]   .target-date[_ngcontent-%COMP%]{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-regular, 400);line-height:16px;color:var(--fluent-theme-neutral-secondary-color, #605E5C);white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.relevant-goal[_ngcontent-%COMP%]   .relevant-goal-kpi[_ngcontent-%COMP%]{height:194px}.relevant-goal[_ngcontent-%COMP%]   .relevant-goal-kpi[_ngcontent-%COMP%]   visual-modern[_ngcontent-%COMP%]{border:none!important;padding:0!important}'],changeDetection:0}),Ie}(),Rn=function(Ie){return Ie[Ie.None=0]="None",Ie[Ie.View=1]="View",Ie[Ie.TenantView=2]="TenantView",Ie[Ie.Favorite=3]="Favorite",Ie[Ie.Frequent=4]="Frequent",Ie[Ie.Promoted=5]="Promoted",Ie[Ie.Learning=6]="Learning",Ie[Ie.Discover=7]="Discover",Ie[Ie.Teams=8]="Teams",Ie[Ie.TeamAnalytics=9]="TeamAnalytics",Ie[Ie.PromotedSample=10]="PromotedSample",Ie}({}),go=n(74913);function Io(Ie,nt){if(1&Ie&&(s.\u0275\u0275elementStart(0,"span",7),s.\u0275\u0275element(1,"tri-svg-icon",8),s.\u0275\u0275text(2),s.\u0275\u0275elementEnd()),2&Ie){var Te=s.\u0275\u0275nextContext();s.\u0275\u0275property("pbiTooltip",Te.recommendationReason),s.\u0275\u0275advance(2),s.\u0275\u0275textInterpolate1(" ",Te.recommendationReason,"")}}var Po=function(){function Ie(nt){this.localizationService=nt}return Ie.prototype.ngOnChanges=function(nt){var Te;(this.relevantMeasure||nt.relevantMeasure)&&(this.recommendationReason=function(Ie,nt){var Te="";switch(Ie){case Rn.View:Te=nt.format("Recommended_Reason_View");break;case Rn.Favorite:Te=nt.get("Recommended_Reason_Favorite");break;case Rn.Frequent:Te=nt.get("Recommended_Reason_Frequent");break;case Rn.Promoted:Te=nt.format("Recommended_Reason_Featured");break;case Rn.Learning:Te=nt.get("TopNav_HelpMenu_GettingStarted");break;case Rn.Discover:Te=nt.get("Recommended_Reason_Discover");break;case Rn.TeamAnalytics:Te=nt.get("Teams_Analyze_Usage");break;default:Te=nt.get("Recommended_Reason_None")}return Te}(null===(Te=this.relevantMeasure)||void 0===Te?void 0:Te.recommendationReason,this.localizationService))},Ie.componentId="RelevantMeasureComponentId",Ie.\u0275fac=function(Te){return new(Te||Ie)(s.\u0275\u0275directiveInject(ee.o))},Ie.\u0275cmp=s.\u0275\u0275defineComponent({type:Ie,selectors:[["relevant-measure"]],inputs:{relevantMeasure:"relevantMeasure"},features:[s.\u0275\u0275NgOnChangesFeature],decls:11,vars:4,consts:[[1,"relevant-measure"],[1,"measure"],[1,"title-and-value"],["class","title",3,"pbiTooltip",4,"ngIf"],[3,"pbiTooltip"],[1,"measure-report"],["fontIcon","pbi-glyph-barchart",1,"glyph-small"],[1,"title",3,"pbiTooltip"],["name","folder_open_20_regular","tri-svg-icon-16",""]],template:function(Te,gt){1&Te&&(s.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2),s.\u0275\u0275template(3,Io,3,2,"span",3),s.\u0275\u0275elementStart(4,"div",4),s.\u0275\u0275text(5),s.\u0275\u0275elementEnd()(),s.\u0275\u0275elementStart(6,"div",5)(7,"div"),s.\u0275\u0275element(8,"mat-icon",6),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(9,"div"),s.\u0275\u0275text(10),s.\u0275\u0275elementEnd()()()()),2&Te&&(s.\u0275\u0275advance(3),s.\u0275\u0275property("ngIf",!(null==gt.relevantMeasure||!gt.relevantMeasure.recommendationReason)),s.\u0275\u0275advance(1),s.\u0275\u0275property("pbiTooltip",null==gt.relevantMeasure?null:gt.relevantMeasure.name),s.\u0275\u0275advance(1),s.\u0275\u0275textInterpolate(null==gt.relevantMeasure?null:gt.relevantMeasure.name),s.\u0275\u0275advance(5),s.\u0275\u0275textInterpolate(null==gt.relevantMeasure?null:gt.relevantMeasure.value))},dependencies:[Z.NgIf,pt.Hw,Ye.V,go.M],styles:['.relevant-measure[_ngcontent-%COMP%]{flex:1;width:284px;background-color:var(--fluent-theme-white-color, #FFF);border-radius:2px}.relevant-measure[_ngcontent-%COMP%]:hover, .relevant-measure[_ngcontent-%COMP%]:focus:hover{cursor:pointer}.relevant-measure[_ngcontent-%COMP%]   .title-and-value[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;height:66px;padding:0 16px}.relevant-measure[_ngcontent-%COMP%]   .title-and-value[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--lg-font-size, 16px);font-weight:var(--font-weight-regular, 400);line-height:20px;color:var(--fluent-theme-neutral-primary-color, #323130);white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.relevant-measure[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%]{height:100%}.relevant-measure[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%]   .measure-report[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:168px}.relevant-measure[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%]   .measure-report[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{height:48px!important;width:48px!important}.relevant-measure[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}'],changeDetection:0}),Ie}(),Ho=n(26410),Wn=n(6425),we=n(83399),Gn=n(8297),Ro=n(86663),ho=n(86251),Wo=function(nt){return{action:nt}};function nn(Ie,nt){if(1&Ie&&s.\u0275\u0275elementContainer(0,5),2&Ie){var Te=nt.$implicit;s.\u0275\u0275nextContext(3);var gt=s.\u0275\u0275reference(3);s.\u0275\u0275property("ngTemplateOutlet",gt)("ngTemplateOutletContext",s.\u0275\u0275pureFunction1(2,Wo,Te))}}function Ao(Ie,nt){if(1&Ie&&(s.\u0275\u0275elementContainerStart(0),s.\u0275\u0275template(1,nn,1,4,"ng-container",4),s.\u0275\u0275elementContainerEnd()),2&Ie){var Te=nt.ngIf;s.\u0275\u0275advance(1),s.\u0275\u0275property("ngForOf",Te)}}function lt(Ie,nt){if(1&Ie){var Te=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"button",6),s.\u0275\u0275listener("click",function(){s.\u0275\u0275restoreView(Te);var kt=s.\u0275\u0275nextContext(2);return s.\u0275\u0275resetView(kt.args.onAddNote())}),s.\u0275\u0275element(1,"pbi-icon",7)(2,"div",8),s.\u0275\u0275elementEnd()}}function mt(Ie,nt){if(1&Ie){var Te=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"button",6),s.\u0275\u0275listener("click",function(){s.\u0275\u0275restoreView(Te);var kt=s.\u0275\u0275nextContext(2);return s.\u0275\u0275resetView(kt.args.onEditCheckIn())}),s.\u0275\u0275element(1,"pbi-icon",9)(2,"div",10),s.\u0275\u0275elementEnd()}}function Ke(Ie,nt){if(1&Ie){var Te=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"button",6),s.\u0275\u0275listener("click",function(){s.\u0275\u0275restoreView(Te);var kt=s.\u0275\u0275nextContext(2);return s.\u0275\u0275resetView(kt.args.onDeleteCheckIn())}),s.\u0275\u0275element(1,"pbi-icon",11)(2,"div",12),s.\u0275\u0275elementEnd()}}function bt(Ie,nt){if(1&Ie){var Te=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"button",6),s.\u0275\u0275listener("click",function(){s.\u0275\u0275restoreView(Te);var kt=s.\u0275\u0275nextContext(2);return s.\u0275\u0275resetView(kt.args.onEditNote())}),s.\u0275\u0275element(1,"pbi-icon",9)(2,"div",13),s.\u0275\u0275elementEnd()}}function ht(Ie,nt){if(1&Ie){var Te=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"button",6),s.\u0275\u0275listener("click",function(){s.\u0275\u0275restoreView(Te);var kt=s.\u0275\u0275nextContext(2);return s.\u0275\u0275resetView(kt.args.onDeleteNote())}),s.\u0275\u0275element(1,"pbi-icon",11)(2,"div",14),s.\u0275\u0275elementEnd()}}function Jt(Ie,nt){if(1&Ie&&(s.\u0275\u0275elementContainerStart(0),s.\u0275\u0275template(1,Ao,2,1,"ng-container",1),s.\u0275\u0275template(2,lt,3,0,"button",3),s.\u0275\u0275template(3,mt,3,0,"button",3),s.\u0275\u0275template(4,Ke,3,0,"button",3),s.\u0275\u0275template(5,bt,3,0,"button",3),s.\u0275\u0275template(6,ht,3,0,"button",3),s.\u0275\u0275elementContainerEnd()),2&Ie){var Te=s.\u0275\u0275nextContext();s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf",Te.args.goalActions),s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf",Te.args.onAddNote),s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf",Te.args.onEditCheckIn),s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf",Te.args.onDeleteCheckIn),s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf",Te.args.onEditNote),s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf",Te.args.onDeleteNote)}}function $t(Ie,nt){if(1&Ie&&s.\u0275\u0275element(0,"mat-icon",22),2&Ie){var Te=s.\u0275\u0275nextContext(2).action;s.\u0275\u0275property("fontIcon",Te.iconName)}}function hn(Ie,nt){if(1&Ie&&s.\u0275\u0275element(0,"pbi-icon",23),2&Ie){var Te=s.\u0275\u0275nextContext(2).action;s.\u0275\u0275property("name",Te.iconName)}}function Nn(Ie,nt){if(1&Ie&&s.\u0275\u0275element(0,"tri-svg-icon",24),2&Ie){var Te=s.\u0275\u0275nextContext(2).action;s.\u0275\u0275property("name",Te.iconName)}}function wn(Ie,nt){if(1&Ie){var Te=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"tooltip-wrapper",16)(1,"button",17),s.\u0275\u0275listener("click",function(){s.\u0275\u0275restoreView(Te);var ln=s.\u0275\u0275nextContext().action;return s.\u0275\u0275resetView(ln.onClick())}),s.\u0275\u0275template(2,$t,1,1,"mat-icon",18),s.\u0275\u0275template(3,hn,1,1,"pbi-icon",19),s.\u0275\u0275template(4,Nn,1,1,"tri-svg-icon",20),s.\u0275\u0275element(5,"div",21),s.\u0275\u0275elementEnd()()}if(2&Ie){var gt=s.\u0275\u0275nextContext().action;s.\u0275\u0275property("tooltipKey",null==gt?null:gt.disabledTooltipKey),s.\u0275\u0275advance(1),s.\u0275\u0275property("disabled",gt.disabled),s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf","mat"===gt.iconType),s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf","pbi"===gt.iconType),s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf","tri"===gt.iconType),s.\u0275\u0275advance(1),s.\u0275\u0275property("localize",gt.labelKey)}}function jn(Ie,nt){1&Ie&&s.\u0275\u0275template(0,wn,6,6,"tooltip-wrapper",15),2&Ie&&s.\u0275\u0275property("ngIf",nt.action)}var co=function(){function Ie(){}return Ie.\u0275fac=function(Te){return new(Te||Ie)},Ie.\u0275cmp=s.\u0275\u0275defineComponent({type:Ie,selectors:[["scorecard-context-menu"]],inputs:{args:"args"},decls:4,vars:1,consts:[[1,"context-menu"],[4,"ngIf"],["actionOption",""],["class","option",3,"click",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngFor","ngForOf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"option",3,"click"],["name","add","size","small",1,"icon"],["localize","MetricsDetailsPane_DetailsTab_Add_Note",1,"text"],["name","edit","size","small",1,"icon"],["localize","MetricsDetailsPane_DetailsTab_Edit_Check_In",1,"text"],["name","delete","size","small",1,"icon"],["localize","MetricsDetailsPane_DetailsTab_Delete_Check_In",1,"text"],["localize","MetricsDetailsPane_DetailsTab_Edit_Note",1,"text"],["localize","MetricsDetailsPane_DetailsTab_Delete_Note",1,"text"],[3,"tooltipKey",4,"ngIf"],[3,"tooltipKey"],["mat-icon-button","",1,"option",3,"disabled","click"],["class","glyphicon glyph-small icon",3,"fontIcon",4,"ngIf"],["size","small","class","icon",3,"name",4,"ngIf"],["tri-svg-icon-16","","class","tri-svg icon",3,"name",4,"ngIf"],[1,"text",3,"localize"],[1,"glyphicon","glyph-small","icon",3,"fontIcon"],["size","small",1,"icon",3,"name"],["tri-svg-icon-16","",1,"tri-svg","icon",3,"name"]],template:function(Te,gt){1&Te&&(s.\u0275\u0275elementStart(0,"div",0),s.\u0275\u0275template(1,Jt,7,6,"ng-container",1),s.\u0275\u0275elementEnd(),s.\u0275\u0275template(2,jn,1,1,"ng-template",null,2,s.\u0275\u0275templateRefExtractor)),2&Te&&(s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf",gt.args))},dependencies:[Z.NgForOf,Z.NgIf,Z.NgTemplateOutlet,ot.X,pt.Hw,Ro._,go.M,ho.j],styles:['[_nghost-%COMP%]   .context-menu[_ngcontent-%COMP%]{width:fit-content;padding:2px 0;background-color:#fff;border-radius:2px;box-sizing:border-box;box-shadow:0 3.2px 7.2px rgba(0,0,0,.13),0 .6px 1.8px rgba(0,0,0,.11)}[_nghost-%COMP%]   .option[_ngcontent-%COMP%]{height:36px;display:flex;align-items:center;cursor:pointer;background-color:transparent;border:none;min-width:-webkit-fill-available}[_nghost-%COMP%]   .option[_ngcontent-%COMP%]:disabled{cursor:default}[_nghost-%COMP%]   .option[_ngcontent-%COMP%]:disabled   .text[_ngcontent-%COMP%]{color:var(--gray-80)}[_nghost-%COMP%]   .option[_ngcontent-%COMP%]:hover{background:var(--gray-20, #F3F2F1)}[_nghost-%COMP%]   .icon[_ngcontent-%COMP%]{height:16px;width:16px;font-size:16px;display:inline-block;padding-left:8px;padding-right:8px}[_nghost-%COMP%]   .text[_ngcontent-%COMP%]{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);color:var(--gray-180, #252423);text-align:left;display:inline-block}'],changeDetection:0}),Ie}(),Xn=n(95135),Lo=n(1882),zn=n(96147),mo=n(50042),Yn=n(49833),jo=n(59916),Fo=n(65736),qt=n(55102),Kn=n(87582),wo=n(58108),Ve=n(44260),Fe=n(93631),De=n(77971),Be=n(94994),qe=n(43847),Mt=n(81437),ft=n(70864),Vt=n(64832),jt=n(38360),Zt=function(){function Ie(){this.mappings=[{key:"T",value:Math.pow(10,12)},{key:"B",value:Math.pow(10,9)},{key:"M",value:Math.pow(10,6)},{key:"K",value:Math.pow(10,3)}]}return Ie.prototype.transform=function(nt,Te){if(void 0===Te&&(Te=2),null==nt||isNaN(nt))return"\u2014";if(0===nt)return"0";(null==Te||Te<0||isNaN(Te))&&(Te=2);for(var gt=Math.pow(10,Te),kt=nt<0?"-":"",ln="",Mn=nt=Math.abs(nt),fn=0,uo=this.mappings;fn<uo.length;fn++){var bn=uo[fn],Zo=_.round(nt*gt/bn.value)/gt;if(Zo>=1){Mn=Zo,ln=bn.key;break}}return"".concat(kt).concat(Mn).concat(ln)},Ie.\u0275fac=function(Te){return new(Te||Ie)},Ie.\u0275pipe=s.\u0275\u0275definePipe({name:"shortNumber",type:Ie,pure:!0}),Ie}(),vn=n(10321),En=n(34340),An=n(23348),tn=n(558),$n=n(21661),Qt=n(94585),xn=n(78181),Qn=n(57746),ro=n(55710),Jn=n(52910),On=(n(82792),n(94120),n(82775),n(59051)),Ae=n(54241),_t=n(34895),xt=n(89075),Yt=n(52950),un=n(52040),Dn=n(93367),qo=n(16095),ui=n(70137),Ko=n(88717),$o=n(76701),vt=n(88119);function mn(Ie){return function(){return Ie.scrollStrategies.close()}}var er=function(){function Ie(){}return Ie.\u0275fac=function(Te){return new(Te||Ie)},Ie.\u0275mod=s.\u0275\u0275defineNgModule({type:Ie}),Ie.\u0275inj=s.\u0275\u0275defineInjector({providers:[{provide:Ae.g8,deps:[On.aV],useFactory:mn}],imports:[Z.CommonModule,_t.D8,xt.yD,E.wp,v.UX,$n.Cl,$o.z,Dn.U,ui.F,Yt.g,vt.N,Ko.R,un.x,qo.Z]}),Ie}(),Qo=n(32288),di=n(11962),Oo=n(77906),So=n(95859),pi=n(71328),Sn=n(76966),_n=n(47913),Jo=n(6015),ao=n(94770),Ii=n(23612),Wt=n(45411),St=n(33766),tr=n(59951),ei=n(16748),Ri=n(76777),Ai=n(44913),gi=n(17177),nr=n(16622),or=n(16434),Li=n(78035),Fi=n(8816),Gi=function(){function Ie(){}return Ie.\u0275fac=function(Te){return new(Te||Ie)},Ie.\u0275mod=s.\u0275\u0275defineNgModule({type:Ie}),Ie.\u0275inj=s.\u0275\u0275defineInjector({providers:[{provide:or.E,useClass:nr._}],imports:[Z.CommonModule,Li.Y,ro.jT,xn.vV,gi.T6,Fi.w]}),Ie}(),hi=n(54485),ti=[{componentId:po.componentId,type:po},{componentId:so.componentId,type:so},{componentId:Po.componentId,type:Po},{componentId:Kn.a.componentId,type:wo.o},{componentId:Gn.H.componentId,type:co},{componentId:V.i.componentId,type:L},{componentId:we.M.componentId,type:we.M},{componentId:P.H.componentId,type:P.H}],Vi=((0,t.ev)((0,t.ev)([],[i.c,k.u,J,a.k,P.H,pe.Q,ce.R,F,Q.C,U,L,B.A,de.S,q.p,le.Q,T.E,X.d,po,so,Po,Ho.O,Wn.C,we.M,wo.o,co,Ve.o,Fe.l,De.m,Be.z,qe.$,Mt.V,qt.y,ft.F],!0),[m.p,N.W,he.G,w.I,d.E,p.$,l.q,c.t,y.e,r.m,C.i,Xn.m,mo.V,Yn.t,Fo.A,qt.y,Lo.R,zn.J,jo.h,Zt,Vt.B,jt.i,ho.j],!1),function(){function Ie(nt){nt.registerIcons(St.$.sprite)}return Ie.\u0275fac=function(Te){return new(Te||Ie)(s.\u0275\u0275inject(hi.u))},Ie.\u0275mod=s.\u0275\u0275defineNgModule({type:Ie}),Ie.\u0275inj=s.\u0275\u0275defineInjector({providers:[En.c,vn.L,An.f],imports:[Z.CommonModule,Qt.nZ,Sn.c,Jn.O,tn._t,Qo.J,er,v.u5,Oo.N.withManifests(ti),So.v,pi.G,xn.vV,Qn.t,pt.Ps,ro.jT,I.uw,un.x,_n.V,Jo.C,ao.f,Ii.N,Dn.U,Wt.m,tr.v,ei.H,qo.Z,v.UX,$n.Cl,Ai.lK,Gi,gi.T6,vt.N,Ri.H,di.V7]}),Ie}())},45017:function(ct,Ge,n){"use strict";n.d(Ge,{B:function(){return i}});var t=n(62458),i=function(){function w(){}return w.getGoalValueMap=function(a){var d=new Map;if(_.isEmpty(a))return d;for(var p=0,l=a;p<l.length;p++){var c=l[p];d.set(new Date(c.timestamp).getTime(),c)}return d},w.areGoalValuesEqual=function(a,d,p,l){return t.fF.assertValue(a,"goalValueOne"),t.fF.assertValue(d,"goalValueTwo"),!(!p&&a.value!==d.value||!l&&a.target!==d.target||a.trend!==d.trend||a.forecast!==d.forecast||a.status!==d.status)},w.diffGoalValues=function(a,d){t.fF.assertValue(a,"goalValueOne"),t.fF.assertValue(d,"goalValueTwo");var p={timestamp:a.timestamp,goalId:a.goalId,scorecardId:a.scorecardId,createdTime:a.createdTime,lastModifiedTime:a.lastModifiedTime};return a.value!==d.value&&(p.value=a.value),a.target!==d.target&&(p.target=a.target),a.trend!==d.trend&&(p.trend=a.trend),a.forecast!==d.forecast&&(p.forecast=a.forecast),a.status!==d.status&&(p.status=a.status),p},w.calculateGoalValueChanges=function(a,d){for(var p=[],l=new Map,c=0,y=a;c<y.length;c++){var r=y[c],C=new Date(r.timestamp).getTime();l.set(C,r.value)}for(var m=0,k=d;m<k.length;m++)r=k[m],C=new Date(r.timestamp).getTime(),l.has(C)?r.value!==l.get(C)&&p.push(r):p.push(r);for(var O=new Set,s=0,ne=d;s<ne.length;s++)r=ne[s],C=new Date(r.timestamp).getTime(),O.add(C);for(var ee=0,Z=a;ee<Z.length;ee++)r=Z[ee],C=new Date(r.timestamp).getTime(),O.has(C)||p.push({timestamp:r.timestamp,value:null});return p},w}()},98925:function(ct,Ge,n){"use strict";n.d(Ge,{P:function(){return w},t:function(){return i}});var t=n(62458);function i(a){if("number"==typeof a)return a;switch(a.toString().trim().toLowerCase()){case"sum":return 1;case"average":return 2;case"min":return 3;case"max":return 4;default:return void t.fF.assertNever(a)}}function w(a){var d;return(d={})[1]=a.get("Rollups_Submetrics_Sum"),d[2]=a.get("Rollups_Submetrics_Average"),d[3]=a.get("Rollups_Submetrics_Min"),d[4]=a.get("Rollups_Submetrics_Max"),d}},61088:function(ct,Ge,n){"use strict";n.d(Ge,{_:function(){return w}});var t=n(81337),i=n(558),w=function(){function a(){}return a.moveColumnSettingUp=function(d,p){if(!(_.size(d)<=1||0===p)){var l=d;return(0,t.ev)((0,t.ev)((0,t.ev)([],_.slice(l,0,p-1),!0),[l[p],l[p-1]],!1),_.slice(l,p+1),!0)}},a.moveColumnSettingDown=function(d,p){if(!(_.size(d)<=1||p===_.size(d)-1)){var l=d;return(0,t.ev)((0,t.ev)((0,t.ev)([],_.slice(l,0,p),!0),[l[p+1],l[p]],!1),_.slice(l,p+2),!0)}},a.canMoveLeft=function(d,p){if(p<=1)return!1;var l=_.slice(d,0,p);return _.findLastIndex(l,function(y){return y.show})>0},a.canMoveRight=function(d,p){return!(0===p||p>=d.length-1)&&_.findIndex(d,function(c){return c.show},p+1)>p},a.moveColumnLeft=function(d,p){var l=_.findIndex(d,function(r){return r.columnId===p}),c=_.slice(d,0,l),y=_.findLastIndex(c,function(r){return r.show});(0,i.bA)(d,l,y)},a.moveColumnRight=function(d,p){var l=_.findIndex(d,function(y){return y.columnId===p}),c=_.findIndex(d,function(y){return y.show},l+1);(0,i.bA)(d,l,c)},a.hideColumn=function(d,p){var l=_.findIndex(d,function(c){return c.columnId===p});l>=0&&(d[l].show=!1)},a.showColumn=function(d,p){var l=_.findIndex(d,function(c){return c.columnId===p});l>=0&&(d[l].show=!0)},a.isColumnVisible=function(d,p){var l=_.find(d,function(c){return c.columnId===p});return!!_.isUndefined(l?.show)||l.show},a.mergeColumns=function(d,p){for(var l=new Array,c=new Set(p.map(function(ne){return ne.columnId})),y=new Set,r=0,C=d;r<C.length;r++){var m=C[r];c.has(m.columnId)&&!y.has(m.columnId)&&(l.push(m),y.add(m.columnId))}for(var k=0,O=p;k<O.length;k++){var s=O[k];y.has(s.columnId)||l.push(s)}return l},a.removeColumnSettings=function(d,p){var l=new Set(p);_.remove(d,function(c){return l.has(c.columnId)})},a.adjustColumnSettings=function(d,p){d.featureSwitches.scorecardSplitColumns||(a.removeColumnSettings(p,[7,8,9]),a.isColumnVisible(p,3)||a.showColumn(p,3)),d.featureSwitches.scorecardCompactView||a.removeColumnSettings(p,[10])},a}()},3204:function(ct,Ge,n){"use strict";n.d(Ge,{b:function(){return a}});var t=n(57535),i=n(62831),w=n(125),a=function(){function d(){}return d.buildSparklineValues=function(p,l,c){if(void 0===c&&(c=7),l&&p.aggregations)return _.chain(p.aggregations).filter(function(r){return"Sparkline"===r.type}).sortBy(function(r){return new Date(r.timestamp)}).takeRight(c).map(function(r){return{scorecardId:p.scorecardId,goalId:p.id,lastModifiedTime:r.maxLastModifiedTime,timestamp:r.timestamp,value:r.value,valueDisplayString:r.valueDisplayString,createdTime:r.calculationTime,lastModifiedBy:null}}).value();var y=_.sortBy(p.goalValues,function(r){return new Date(r.timestamp)});return _.takeRight(y.filter(function(r){return null!=r.value&&null!=r.timestamp}),c)},d.getSparklineOptions=function(p,l,c){var y,r,C,m,k,O,s,ne=i.q.isDarkMode(),ee=w.r.buildCurrentGoalValue(p),Z=t.p.getGoalStatus(ee?.status,l),v=t.p.getGoalSparklineColor(Z.color,null===(y=c?.scorecardDisplayOptions)||void 0===y?void 0:y.isMobileLayout,ne);return{height:null!==(m=null===(C=null===(r=c?.scorecardDisplayOptions)||void 0===r?void 0:r.sparklineOptions)||void 0===C?void 0:C.height)&&void 0!==m?m:48,width:null!==(s=null===(O=null===(k=c?.scorecardDisplayOptions)||void 0===k?void 0:k.sparklineOptions)||void 0===O?void 0:O.width)&&void 0!==s?s:120,lineColor:v,dotColor:v,showMin:!1,showMax:!1}},d}()},38360:function(ct,Ge,n){"use strict";n.d(Ge,{i:function(){return w}});var t=n(50423),i={day:"numeric",month:"numeric",year:"2-digit"},w=function(){function a(){}return a.prototype.transform=function(d,p){return new Date(d).toLocaleDateString(p,i)},a.\u0275fac=function(p){return new(p||a)},a.\u0275pipe=t.\u0275\u0275definePipe({name:"formatDate",type:a,pure:!0}),a}()},11960:function(ct,Ge,n){"use strict";n.d(Ge,{W:function(){return s}});var t=n(33014),i=n(74521),w=n(34340),a=n(99327),d=n(73911),p=n(21719),l=n(87426),c=n(20930),y=n(93379),r=n(62087),C=n(32027),m=n(49223),k=n(50423),O=n(60166),s=[t.D,w.c,a.X,d.$,p.D,l.G,i.D,c.N,y.Nw,r.l,m.G,C.w,{provide:O.M,useFactory:function(ee){return ee},deps:[[new k.Optional,new k.SkipSelf,O.M]]}]},33014:function(ct,Ge,n){"use strict";n.d(Ge,{D:function(){return ee}});var t=n(81337),i=n(50423),w=n(34071),a=n(98632),d=n(43633),p=n(60166),l=n(62458),c=n(43286),y=n(14172),r=n(59973),C=n(85732),m=n(50911),k=n(19178),O=n(94420),s=n(18942),ne=n(76746),ee=function(){function Z(v,E,I,H,G,Y,ie){this.store=v,this.datasetStore=E,this.domSanitizer=I,this.groupStoreService=H,this.reportStore=G,this.appSettings=Y,this.scorecardHost=ie}return Z.prototype.getConnectedReport=function(v){var E,I;l.fF.assertValue(v.reportUrl,"No connected report url");var H=null===(E=v.reportUrl.match(/\/reports\/([a-zA-Z0-9\-]+)/))||void 0===E?void 0:E[1],G=null===(I=v.reportUrl.match(/\/groups\/([a-zA-Z0-9\-]+)/))||void 0===I?void 0:I[1];return this.getReport(H,G)},Z.prototype.getConnectedReportDisplayName=function(v){var E,I=null===(E=v.reportUrl.match(/\/apps\/([a-zA-Z0-9\-]+)/))||void 0===E?void 0:E[1];return this.getConnectedReport(v).pipe((0,y.U)(function(H){return I?H.ownerFullname:H.displayName}))},Z.prototype.goToConnectedReport=function(v){l.fF.assertValue(v.reportUrl,"No connected report url");var I,E=v.reportUrl.indexOf("?")>=0?"&":"?";if(I=this.appSettings.tenantId?"".concat(v.reportUrl).concat(E,"ctid=").concat(this.appSettings.tenantId):v.reportUrl,this.scorecardHost)this.scorecardHost.openReport(I);else{var H=new URL(I,window.location.origin).href;window.open(this.domSanitizer.sanitize(i.SecurityContext.URL,H),"_blank")}},Z.prototype.getReport=function(v,E){return this.store.dispatch(new a.yi({reportObjectId:v,workspaceObjectId:E})),this.store.select(d.W4,{id:v}).pipe((0,r.h)(function(I){return!!I&&!I.loading}))},Z.prototype.getConnectedGoalsWithoutBuildPermissions=function(v){var E,I;return(0,t.mG)(this,void 0,void 0,function(){var H,G,Y,ie,ye,ae,J;return(0,t.Jh)(this,function(N){switch(N.label){case 0:return H=[],[4,this.groupStoreService.ensureGroupArtifactsLoaded(w.fm,!0)];case 1:N.sent(),G=0,Y=v,N.label=2;case 2:return G<Y.length?(ie=Y[G]).valueConnection?[4,this.datasetStore.findDatasetByObjectId(ie.valueConnection.datasetId)]:[3,5]:[3,9];case 3:return(!(ye=N.sent())||!this.hasDatasetBuildPermission(ye))&&H.push(ie.name),l.fF.assertValue(ie.valueConnection.reportUrl,"No value connected report url"),ae=null===(E=ie.valueConnection.reportUrl.match(/\/reports\/([a-zA-Z0-9\-]+)/))||void 0===E?void 0:E[1],[4,this.reportStore.findByObjectId(ae)];case 4:(!(J=N.sent())||!this.hasReportReadPermission(J))&&H.push(ie.name),N.label=5;case 5:return ie.targetConnection?[4,this.datasetStore.findDatasetByObjectId(ie.targetConnection.datasetId)]:[3,8];case 6:return(!(ye=N.sent())||!this.hasDatasetBuildPermission(ye))&&H.push(ie.name),l.fF.assertValue(ie.targetConnection.reportUrl,"No target connected report url"),ae=null===(I=ie.targetConnection.reportUrl.match(/\/reports\/([a-zA-Z0-9\-]+)/))||void 0===I?void 0:I[1],[4,this.reportStore.findByObjectId(ae)];case 7:(!(J=N.sent())||!this.hasReportReadPermission(J))&&H.push(ie.name),N.label=8;case 8:return G++,[3,2];case 9:return[2,_.uniq(H)]}})})},Z.prototype.hasReportReadPermission=function(v){return(0,c.yE)(v.permissions,1)},Z.prototype.hasDatasetBuildPermission=function(v){return(0,c.yE)(v?.permissions,3)||(0,c.yE)(v?.permissions,9)||(0,c.yE)(v?.userPermissions,9)||(0,c.yE)(v?.userPermissions,3)},Z.\u0275fac=function(E){return new(E||Z)(i.\u0275\u0275inject(C.yh),i.\u0275\u0275inject(m.s),i.\u0275\u0275inject(s.H7),i.\u0275\u0275inject(k.Y),i.\u0275\u0275inject(O.R),i.\u0275\u0275inject(ne.de),i.\u0275\u0275inject(p.M,8))},Z.\u0275prov=i.\u0275\u0275defineInjectable({token:Z,factory:Z.\u0275fac}),Z}()},74521:function(ct,Ge,n){"use strict";n.d(Ge,{D:function(){return ne}});var t=n(81337),i=n(8297),w=n(60042),a=n(62831),d=n(62458),p=n(86940),l=n(25512),c=n(35510),y=n(30794),r=n(50423),C=n(49223),m=n(93379),k=n(33014),O=n(62087),s=n(9380),ne=function(){function ee(Z,v,E,I,H,G){this.scorecardService=Z,this.capabilityService=v,this.overlay=E,this.goalConnectionService=I,this.expansionService=H,this.featureSwitches=G,this.contextMenuOpenGoalId$=new c.X(void 0),this.onDestroy$=new y.xQ}return ee.prototype.ngOnDestroy=function(){this.onDestroy$.next(!0),this.onDestroy$.complete()},Object.defineProperty(ee.prototype,"scorecardSelectionMode",{get:function(){return this.scorecardService.scorecardSelectionMode},enumerable:!1,configurable:!0}),ee.prototype.capabilities=function(Z){return this.capabilityService.getCurrentGoalCapabilities(Z)},ee.prototype.canSelectGoal=function(Z){var v,E;return null===(E=null===(v=this.capabilities(Z).selectGoal)||void 0===v?void 0:v.enabled)||void 0===E||E},ee.prototype.isSelected=function(Z){var v,E;return null===(E=null===(v=this.scorecardService.getCurrentScorecard())||void 0===v?void 0:v.selectedGoalIds)||void 0===E?void 0:E[Z.id]},ee.prototype.onRowClick=function(Z,v){this.canSelectGoal(Z)&&this.scorecardService.toggleSelectedGoal(Z.id,!1,this.isClickMultiselect(v))},ee.prototype.onNameClick=function(Z,v){if(this.canSelectGoal(Z))if((_.isNil(this.scorecardSelectionMode)||"ctrl"===this.scorecardSelectionMode)&&1===this.scorecardService.numberOfSelectedGoals()&&this.isSelected(Z)&&_.isNil(this.scorecardService.getCurrentScorecard().activeGoalId))this.scorecardService.setActiveGoal(Z.id);else{var E=this.isClickMultiselect(v);this.scorecardService.toggleSelectedGoal(Z.id,!(E||"single"===this.scorecardSelectionMode),E)}v?.stopPropagation()},ee.prototype.onCheckboxClick=function(Z,v){this.canSelectGoal(Z)&&this.scorecardService.toggleSelectedGoal(Z.id,!1,"single"!==this.scorecardSelectionMode),v?.stopPropagation()},ee.prototype.getGoalActionIcons=function(Z,v,E){var I=this.getGoalActions(Z);return _.map(_.filter(E?v?this.featureSwitches.featureSwitches.scorecardCompactView?[I.editGoal,I.openNotes,I.openContextMenu]:[I.openNotes,I.editGoal,I.openContextMenu]:this.featureSwitches.featureSwitches.scorecardCompactView?[I.goToReport,I.toggleFollow,I.openNotes]:[I.goToReport,I.openNotes,I.toggleFollow]:[I.openContextMenu],function(G){return!G.hidden}),function(G){return(0,t.pi)((0,t.pi)({},G),{onClick:function(ie){G.onClick(),ie.stopPropagation()}})})},ee.prototype.getGoalMenuOptions=function(Z,v,E){var I=this,H=this.getGoalActions(Z),G=[];return v?(G=[H.goToReport,H.seeDetails,H.addSubGoal,H.toggleFollow,H.goToLinkedSource,H.deleteGoal],E||G.unshift(H.editGoal)):E?d.fF.assertFail("When action icons are shown, read mode has no context menu"):G=[H.goToReport,H.openNotes,H.toggleFollow],_.map(_.filter(G,function(Y){return!Y.hidden}),function(Y){return(0,t.pi)((0,t.pi)({},Y),{onClick:function(){Y.onClick(),I.overlay.closeAll()}})})},ee.prototype.onContextMenuClick=function(Z,v,E,I,H){var G=this;this.overlay.isOverlayOpen&&this.overlay.closeAll();var Y=this.getGoalMenuOptions(Z,I,H),ye=v.pointerType?{x:v.x,y:v.y}:E,ae=this.overlay.open({component:i.H,data:{goalActions:Y},closeOnBackdropClick:!0,disableForwardClickOnBackdropClick:!0,hasCaret:!1,options:{hasBackdrop:!0,backdropClass:p.L,positionStrategy:this.overlay.position().flexibleConnectedTo(ye).withPositions([(0,l.Iz)(),(0,l.Kb)(),(0,l.Zz)(),(0,l.J7)()]).withPush(!0).withGrowAfterOpen(!0)}});return this.contextMenuOpenGoalId$.next(Z.id),ae.onClose.subscribe(function(J){return G.contextMenuOpenGoalId$.next(void 0)}),v.stopPropagation(),ae},ee.prototype.getGoalActions=function(Z){var E,I,H,G,v=this,Y=this.capabilities(Z);return{goToReport:{id:"goToReport",onClick:function(){return v.goalConnectionService.goToConnectedReport(Z.valueConnection)},labelKey:"TileMenuOption_GoToReport",iconTooltipKey:"Metrics_Tooltip_Open_Report",iconName:"barchart",iconType:"pbi",hidden:_.isNil(Z.valueConnection)},openNotes:{id:"openNotes",onClick:function(){v.canSelectGoal(Z)&&v.scorecardService.setActiveGoal(Z.id)},labelKey:"OpenNotes",iconTooltipKey:"Notes",iconName:"comment_16_regular",iconType:"tri"},seeDetails:{id:"seeDetails",onClick:function(){return v.scorecardService.setActiveGoal(Z.id)},labelKey:"VisualContainer_ShowErrorDetails",iconName:"list",iconType:"pbi"},editGoal:{id:"editGoal",onClick:function(){return v.scorecardService.setGoalState(Z.id,"Editing")},labelKey:"Metrics_Tooltip_Edit_Metric",iconName:"edit",iconType:"pbi",disabled:!(null!==(E=Y?.editGoal)&&void 0!==E&&E.enabled),disabledTooltipKey:null===(I=Y?.editGoal)||void 0===I?void 0:I.disabledMessageKey},toggleFollow:{id:"toggleFollow",onClick:function(){Z.isFollowed?v.scorecardService.unfollowGoal(Z.id):v.scorecardService.followGoal(Z.id)},labelKey:Z.isFollowed?"Metrics_Follow_Goals_Unfollow_This_Metric":"Metrics_Follow_Goals_Follow_This_Metric",iconName:Z.isFollowed?"alert_16_filled":"alert_16_regular",iconType:"tri",hidden:!Y.followGoal},addSubGoal:{id:"addSubGoal",onClick:function(){v.scorecardService.addSubGoal(Z.id),v.expansionService.expandGoal(Z.id)},labelKey:"NewSubmetric",iconName:"add-multiple",iconType:"pbi",hidden:a.q.computeGoalLevel(this.scorecardService.getCurrentScorecard().goals,Z)>=w.gT.MaxSubGoals,disabled:!(null!==(H=Y.createSubgoal)&&void 0!==H&&H.enabled),disabledTooltipKey:null===(G=Y.createSubgoal)||void 0===G?void 0:G.disabledMessageKey},deleteGoal:{id:"deleteGoal",onClick:function(){return v.scorecardService.deleteGoal(Z.id)},labelKey:Z.isLinked?"Metrics_LinkedMetrics_RemoveLinkedMetric":"Metrics_Tooltip_Delete_Metric",iconName:"delete",iconType:"pbi",hidden:!Y.deleteGoal},goToLinkedSource:{id:"goToLinkedSource",onClick:function(){return v.scorecardService.openLinkedSourceScorecard(Z)},labelKey:"Metrics_LinkedMetrics_GoToSource",iconName:"open_16_regular",iconType:"tri",hidden:!Z.isLinked},openContextMenu:{id:"openContextMenu",onClick:function(){return d.fF.assertFail("OpenContextMenu must be set up in template")},labelKey:"Options_Menu",iconName:"pbi-glyph-more-vertical",iconType:"mat"}}},ee.prototype.isClickMultiselect=function(Z){switch(this.scorecardSelectionMode){case"multiple":return!0;case"ctrl":return Z?.ctrlKey;default:return!1}},ee.\u0275fac=function(v){return new(v||ee)(r.\u0275\u0275inject(C.G),r.\u0275\u0275inject(m.Nw),r.\u0275\u0275inject(p._),r.\u0275\u0275inject(k.D),r.\u0275\u0275inject(O.l),r.\u0275\u0275inject(s.vZ))},ee.\u0275prov=r.\u0275\u0275defineInjectable({token:ee,factory:ee.\u0275fac}),ee}()},10321:function(ct,Ge,n){"use strict";n.d(Ge,{L:function(){return p}});var t=n(89256),i=n(84522),w=n(11547),a=n(50423),d=n(58938),p=function(){function l(c){this.dialogService=c}return l.prototype.launchTargetsEditor=function(c,y,r){this.dialogService.open(t.A,{width:"70%",height:"80%",maxWidth:"100%",maxHeight:"100%",autoFocus:!1,data:{goal$:(0,w.of)(c),goalTargets$:y,onDoneCallback:r}})},l.prototype.launchValuesEditor=function(c,y,r){this.dialogService.open(i.S,{width:"70%",height:"80%",maxWidth:"100%",maxHeight:"100%",autoFocus:!1,data:{goal$:(0,w.of)(c),goalValues$:y,onDoneCallback:r}})},l.\u0275fac=function(y){return new(y||l)(a.\u0275\u0275inject(d.x))},l.\u0275prov=a.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac}),l}()},34340:function(ct,Ge,n){"use strict";n.d(Ge,{E:function(){return Z},c:function(){return v}});var t=n(81337),i=n(60042),w=n(62831),a=n(60166),d=n(33554),p=n(11547),l=n(14172),c=n(17653),y=n(87088);function r(E,I,H,G){H&&"function"!=typeof H&&(G=H);var Y="function"==typeof H?H:void 0,ie=new d.t(E,I,G);return function(ye){return(0,y.O)(function(){return ie},Y)(ye)}}var C=n(46266),m=n(83317),k=n(77526),O=n(42195),s=n(50423),ne=n(41819),ee=n(87426),Z=function(E){return E[E.Default=0]="Default",E[E.ShowCheckin=1]="ShowCheckin",E[E.ShowStatusRules=2]="ShowStatusRules",E}({}),v=function(){function E(I,H,G){this.sideFlyoutService=I,this.scorecardHost=H,this.hierarchyService=G,this.destroy$=new d.t(1)}return E.prototype.openGoalDetails=function(I,H,G,Y){var ie=this;I.selectGoal(H);var ye=I.getCurrentScorecard(),ae=w.q.getGoal(ye.goals,H),J=I.getGoalValueCategoryLists(ae),N=I.getGoalStatuses(ae),he=this.traverse(I.getActiveGoal(),I).pipe((0,l.U)(function(pe){var ce,ge=null===(ce=ye.goals)||void 0===ce?void 0:ce.findIndex(function(se){return se.id===pe});return i.gT.ColorPalette[ge>0?ge%i.gT.ColorPalette.length:0]}));this.destroy$&&(this.destroy$.next(!0),this.destroy$.complete()),this.destroy$=new d.t(1),this.sideFlyoutService.show({componentManifest:{componentId:"GoalsDetailsPaneComponentId",modulePath:"@powerbi/GoalsDetailsPane/goals-details-pane.module#GoalsDetailsPaneModule",inputArgs:{goal$:I.getActiveGoal().pipe((0,c.b)(function(pe){pe&&I.expandGoalValues(pe.id)}),r(1),(0,C.x)(),(0,m.R)(this.destroy$)),scorecardHierarchyInfo$:this.hierarchyService?this.hierarchyService.getHierarchyDisplayInfoObservable(I.hierarchyPaths$):(0,p.of)({showingAll:!0}),openAction:G,scorecardConfiguration:Y,goalPreviewColor$:he,goalValueCategories:J,goalStatuses:N,showGoalTargetsInChart$:I.getScorecard().pipe((0,l.U)(function(pe){return pe.showGoalTargetsInChart})),close:function(){ie.sideFlyoutService.hide(),I.unselectAllGoals()},saveGoalValue:function(ce,ge){return(0,t.mG)(ie,void 0,void 0,function(){var se,xe,me,Oe;return(0,t.Jh)(this,function(Ce){switch(Ce.label){case 0:return[4,I.saveGoalValue(ce,ge)];case 1:return Ce.sent(),se=I.getCurrentScorecard(),xe=w.q.getGoal(se.goals,ce),null===(me=this.scorecardHost)||void 0===me||me.onUpdateScorecard(se),null===(Oe=this.scorecardHost)||void 0===Oe||Oe.updateCachedGoal(xe),[2]}})})},insertNote:function(ce,ge,se){return I.insertNote(ce,ge,se)},deleteNote:function(ce){return I.deleteNote(ce)},editNote:function(ce,ge,se,xe){return I.editNote(ce,ge,se,xe)},deleteGoalValue:function(ce){return I.deleteGoalValue(ce)},saveGoal:function(ce){return I.saveGoal(ce.id,ce)},deleteGoalQueryConnection:function(ce,ge){return I.deleteGoalQueryConnection(ce,ge)},getRefreshHistory:function(ce){return I.getRefreshHistory(ce)},refreshGoalValue:function(ce,ge){return I.refreshGoalValue(ce,ge)},isEditMode$:I.isEditMode(),columnSettings$:I.getColumnSettings(),saveStatusRules:function(ce,ge){return I.saveStatusRules(ce,ge)},getStatusRules:function(ce){return I.getStatusRules(ce)},updateGoalValueConnectionSettings:function(ce,ge){return I.updateGoalValueConnectionSettings(ce,ge)},takeOverConnection:function(ce,ge){return I.takeOverGoalQueryConnection(ce,ge)},toggleShowGoalTargets:function(ce){return I.toggleShowGoalTargetsInChart(ce)},followGoal:function(ce){return I.followGoal(ce)},unfollowGoal:function(ce){return I.unfollowGoal(ce)}}}})},E.prototype.openGoalStatusRulesPane=function(I,H,G,Y){var ie=this;this.sideFlyoutService.show({componentManifest:{componentId:"StatusRulesPaneComponentId",modulePath:"@powerbi/GoalsDetailsPane/goals-details-pane.module#GoalsDetailsPaneModule",inputArgs:{goal:H,goalStatuses:I,statusRules:G,close:function(){return ie.sideFlyoutService.hide()},saveStatusRules:function(ae){return(0,t.mG)(ie,void 0,void 0,function(){return(0,t.Jh)(this,function(J){switch(J.label){case 0:return[4,Y(ae)];case 1:return J.sent(),this.sideFlyoutService.hide(),[2]}})})}}}})},E.prototype.openEditStatusesPane=function(I,H,G){var Y=this;this.sideFlyoutService.show({componentManifest:{componentId:"EditStatusesPaneComponentId",modulePath:"@powerbi/GoalsDetailsPane/goals-details-pane.module#GoalsDetailsPaneModule",inputArgs:{goalStatuses$:I.getScorecard().pipe((0,l.U)(function(ie){return ie.goalStatuses}),(0,k.x)()),onSave:H,close:function(){return Y.sideFlyoutService.hide()},isReadOnly:G}}})},E.prototype.openScorecardSettingsPane=function(I,H,G){var Y=this;this.sideFlyoutService.show({componentManifest:{componentId:"ScorecardSettingsPaneComponentId",modulePath:"@powerbi/GoalsDetailsPane/goals-details-pane.module#GoalsDetailsPaneModule",inputArgs:{scorecard$:I.getScorecard(),roles$:I.getScorecard().pipe((0,c.b)(function(ie){I.ensureRolesLoaded()}),(0,l.U)(function(ie){return ie.roles}),r(1),(0,C.x)()),scorecardSettingsPaneTabIndex:G,onSave:H,close:function(){return Y.sideFlyoutService.hide()},setAsDefaultRole:function(ye){return I.setAsDefaultRole(ye)},editRole:function(ye){return Y.openRoleSettingsPane(I,!1,ye)},deleteRole:function(ye){return I.deleteRole(ye)},openRoleSettingsPaneWithNewRole:function(){return Y.openRoleSettingsPane(I,!0)}}}})},E.prototype.openScorecardColumnSettingsPane=function(I){var H=this;this.sideFlyoutService.show({componentManifest:{componentId:"ScorecardColumnSettingsPaneComponentId",modulePath:"@powerbi/GoalsDetailsPane/goals-details-pane.module#GoalsDetailsPaneModule",inputArgs:{scorecardService:I,close:function(){return H.sideFlyoutService.hide()}}}})},E.prototype.openCategoryListsEditPane=function(I,H,G){var Y=this;this.sideFlyoutService.show({componentManifest:{componentId:"CategoryListsEditPaneComponentId",modulePath:"@powerbi/GoalsDetailsPane/goals-details-pane.module#GoalsDetailsPaneModule",inputArgs:{scorecardService:I,creatingNewList:H,applyChanges:G,close:function(){return Y.sideFlyoutService.hide()}}}})},E.prototype.openCategoricalValuesEditPane=function(I){this.sideFlyoutService.show({componentManifest:{componentId:"CategoricalValuesEditPaneComponentId",modulePath:"@powerbi/GoalsDetailsPane/goals-details-pane.module#GoalsDetailsPaneModule",inputArgs:{goalValueCategoryListsService:I}}})},E.prototype.openRoleSettingsPane=function(I,H,G){var Y=this;this.sideFlyoutService.show({componentManifest:{componentId:"RoleSettingsPaneComponentId",modulePath:"@powerbi/GoalsDetailsPane/goals-details-pane.module#GoalsDetailsPaneModule",inputArgs:{scorecard$:I.getScorecard(),goals$:I.getGoals(),roles$:I.getScorecard().pipe((0,c.b)(function(ie){I.ensureRolesLoaded()}),(0,l.U)(function(ie){return ie.roles})),close:function(){return Y.sideFlyoutService.hide()},cancel:function(){return Y.openScorecardSettingsPane(I,function(ye){return I.updateScorecard(ye)},1)},createRole:function(ye){return I.createRole(ye)},updateRole:function(ye,ae){return I.updateRole(ye,ae)},setAsDefaultRole:function(ye){return I.setAsDefaultRole(ye)},deleteRole:function(ye){return I.deleteRole(ye)},addNewRole:H,selectedRoleId:G}},paneClass:"role-settings"})},E.prototype.openBulkEditingPane=function(I,H){var G=this,Y=I.getGoalStatuses(),ie=I.getGoalValueCategoryLists();this.sideFlyoutService.show({componentManifest:{componentId:"BulkEditingPaneComponentId",modulePath:"@powerbi/GoalsDetailsPane/goals-details-pane.module#GoalsDetailsPaneModule",inputArgs:{selectedGoalIds$:I.getSelectedGoalIdsObservable(),selectedGoals$:I.getSelectedGoalsObservable(),goalStatuses:Y,goalValueCategories:ie,onSave:H,close:function(){return G.sideFlyoutService.hide()}}}})},E.prototype.closeGoalDetails=function(){this.destroy$&&(this.destroy$.next(!0),this.destroy$.complete()),this.sideFlyoutService.hide()},E.prototype.traverse=function(I,H){var G=this;return I.pipe((0,O.zg)(function(Y){return Y.parentId?G.traverse(H.getGoal(Y.parentId),H):(0,p.of)(Y.id)}))},E.\u0275fac=function(H){return new(H||E)(s.\u0275\u0275inject(ne.p),s.\u0275\u0275inject(a.M,8),s.\u0275\u0275inject(ee.G,8))},E.\u0275prov=s.\u0275\u0275defineInjectable({token:E,factory:E.\u0275fac}),E}()},99327:function(ct,Ge,n){"use strict";n.d(Ge,{X:function(){return d}});var t=n(50547),i=n(50423),w=n(81213),a=n(65181),d=function(){function p(l,c){this.errorService=l,this.localizationService=c}return p.prototype.showUserError=function(l,c,y){var r;void 0===y&&(y="GenericErrorDescription"),this.errorService.error(this.localizationService.get(y),c,{requestId:l?.requestId,statusCode:null===(r=l?.status)||void 0===r?void 0:r.toString()})},p.prototype.showThrottlingError=function(){this.errorService.errorNoDefaultAdditionalErrorInfo(this.localizationService.get("You_Have_Exceeded_Limit_Try_Again_Later"),"throttling",{title:this.localizationService.get("Rate_Limit_Is_Exceeded"),level:t.U.Information,isDismissable:!0,showAdditionalErrorInfo:!1})},p.\u0275fac=function(c){return new(c||p)(i.\u0275\u0275inject(w.T),i.\u0275\u0275inject(a.o))},p.\u0275prov=i.\u0275\u0275defineInjectable({token:p,factory:p.\u0275fac}),p}()},73911:function(ct,Ge,n){"use strict";n.d(Ge,{$:function(){return Z}});var t=n(81337),i=n(60042),w=n(29730),a=n(58614),d=n(62458),p=n(35510),l=n(30794),c=n(59017),y=n(83317),r=n(14172),C=n(57243),m=n(48787),k=n(50423),O=n(49223),s=n(87426),ne=n(65181),ee=n(32027),Z=function(){function v(E,I,H,G,Y){var ie=this;this.scorecardService=E,this.hierarchyService=I,this.localizationService=H,this.viewsService=G,this.goalsHttpService=Y,this._goalsByHierarchyItemId$=new p.X({}),this._selectedHierarchyItems$=new p.X([]),this._displaySettings$=new p.X({}),this.onDestroy$=new l.xQ,this._isLoadingView$=new p.X(!1),this.hierarchyService.hierarchyItems$.pipe((0,y.R)(this.onDestroy$)).subscribe(function(ye){var ae;if(ie._selectedHierarchyItems$.value.length>1){for(var J=[],N=(0,t.pi)({},ie._goalsByHierarchyItemId$.value),he=0,pe=ie._selectedHierarchyItems$.value;he<pe.length;he++){var ce=pe[he];if(ce.id){var ge=(0,w.IX)(ce),se=null===(ae=(0,w.qB)([ge],ye))||void 0===ae?void 0:ae[0];if(se?.id&&se.id!==ce.id){J.push(se),N[se.id]=N[ce.id],delete N[ce.id];continue}}J.push(ce)}ie._selectedHierarchyItems$.next(J),ie._goalsByHierarchyItemId$.next(N)}}),this.totalItem={id:void 0,value:this.localizationService.get("Visual_Totals"),parent:void 0,parentHierarchyItemId:void 0,level:0},this._hasViewChanges$=(0,c.aj)([this.selectedHierarchyItems$,this.viewsService.getDefaultView("Heatmap")]).pipe((0,r.U)(function(ye){var ae=ye[0],J=ye[1];return J?!_.isEqual((0,w.t7)(ae),J.heatmapViewDetails.hierarchyItemPaths):_.size(ae)>1}),(0,C.d)({bufferSize:1,refCount:!0})),this._hasSettingsChanges$=(0,c.aj)([this._displaySettings$,this.viewsService.getDefaultView("Heatmap")]).pipe((0,r.U)(function(ye){var ae,J=ye[0],N=ye[1],he=null!==(ae=N?.heatmapViewDetails.heatmapDisplaySettings)&&void 0!==ae?ae:i.rl;return!_.isEqual(J,he)}),(0,C.d)({bufferSize:1,refCount:!0}))}return v.prototype.ngOnDestroy=function(){this.onDestroy$.next(!0),this.onDestroy$.complete()},Object.defineProperty(v.prototype,"goalsByHierarchyItemId$",{get:function(){return this._goalsByHierarchyItemId$},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"selectedHierarchyItems$",{get:function(){return this._selectedHierarchyItems$},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"selectedHierarchyItems",{get:function(){return this._selectedHierarchyItems$.value},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"displaySettings$",{get:function(){return this._displaySettings$},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"hasViewChanges$",{get:function(){return this._hasViewChanges$},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"hasSettingsChanges$",{get:function(){return this._hasSettingsChanges$},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"isSaving$",{get:function(){return this.viewsService.isSaving$},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"isLoading$",{get:function(){return this._isLoadingView$},enumerable:!1,configurable:!0}),v.prototype.addHierarchyItem=function(E){return(0,t.mG)(this,void 0,void 0,function(){var I;return(0,t.Jh)(this,function(H){switch(H.label){case 0:return I=_.uniqBy((0,t.ev)((0,t.ev)([],this._selectedHierarchyItems$.value,!0),[E],!1),function(G){return G.id}),this._selectedHierarchyItems$.next(I),[4,this.loadGoalsForHierarchyItem(E)];case 1:return H.sent(),[2]}})})},v.prototype.removeHierarchyItem=function(E){E.id?this._selectedHierarchyItems$.next(_.filter(this._selectedHierarchyItems$.value,function(I){return I.id!==E.id})):d.fF.assertFail("Cannot remove totals")},v.prototype.setHierarchyItems=function(E){return(0,t.mG)(this,void 0,void 0,function(){var I,H,G,Y;return(0,t.Jh)(this,function(ye){switch(ye.label){case 0:for(I=_.uniqBy((0,t.ev)([this.totalItem],E,!0),function(ae){return ae.id}),this._selectedHierarchyItems$.next(I),H=[],G=0,Y=I;G<Y.length;G++)H.push(this.loadGoalsForHierarchyItem(Y[G]));return[4,Promise.all(H)];case 1:return ye.sent(),[2]}})})},v.prototype.reset=function(E){void 0===E&&(E=!1),this._selectedHierarchyItems$.next([this.totalItem]),E&&this.clearCache()},v.prototype.refreshAll=function(){for(var E=0,I=this._selectedHierarchyItems$.value;E<I.length;E++)this.loadGoalsForHierarchyItem(I[E],!0)},v.prototype.clearCache=function(){this._goalsByHierarchyItemId$.next({})},v.prototype.loadDefaultView=function(E,I,H){var G,Y;return(0,t.mG)(this,void 0,void 0,function(){var ie,ye,ae;return(0,t.Jh)(this,function(J){switch(J.label){case 0:if(!E&&!I)return d.fF.assertFail("loadDefaultView called without restoring items or settings"),[2];this._isLoadingView$.next(!0),J.label=1;case 1:return J.trys.push([1,,8,9]),[4,this.viewsService.loadViews(!1)];case 2:return J.sent(),[4,this.viewsService.getDefaultView("Heatmap").pipe((0,m.q)(1)).toPromise()];case 3:return ie=J.sent(),I&&(ye=null===(G=ie?.heatmapViewDetails)||void 0===G?void 0:G.heatmapDisplaySettings,this.setDisplaySettings((0,t.pi)((0,t.pi)({},i.rl),ye))),E?(ae=void 0,ie?[4,this.hierarchyService.getHierarchyItemsForPath(null===(Y=ie?.heatmapViewDetails)||void 0===Y?void 0:Y.hierarchyItemPaths).pipe((0,m.q)(1)).toPromise()]:[3,5]):[3,7];case 4:ae=J.sent(),J.label=5;case 5:return[4,this.setHierarchyItems(ae=ae||H||[])];case 6:J.sent(),J.label=7;case 7:return[3,9];case 8:return this._isLoadingView$.next(!1),[7];case 9:return[2]}})})},v.prototype.saveView=function(E,I){return(0,t.mG)(this,void 0,void 0,function(){var H;return(0,t.Jh)(this,function(G){switch(G.label){case 0:return E||I?[4,this.viewsService.getDefaultView("Heatmap").pipe((0,m.q)(1)).toPromise()]:(d.fF.assertFail("saveView called without saving items or settings"),[2]);case 1:return H=G.sent(),H=_.cloneDeep(H)||{isDefault:!0,name:"",viewType:"Heatmap",id:void 0,scorecardId:this.scorecardId,heatmapViewDetails:{heatmapDisplaySettings:void 0,hierarchyItemPaths:void 0}},E&&(H.heatmapViewDetails.hierarchyItemPaths=(0,w.t7)(this.selectedHierarchyItems)),I&&(H.heatmapViewDetails.heatmapDisplaySettings=this._displaySettings$.value),[4,this.viewsService.saveView(H)];case 2:return G.sent(),[2]}})})},v.prototype.loadGoalsForHierarchyItem=function(E,I){return void 0===I&&(I=!1),(0,t.mG)(this,void 0,void 0,function(){var H,G,Y,ie=this;return(0,t.Jh)(this,function(ye){switch(ye.label){case 0:return H=this.scorecardService.getCurrentScorecard(),d.fF.assertValue(H,"scorecard not loaded"),this.scorecardId!==H.id&&(this._goalsByHierarchyItemId$.next({}),this.scorecardId=H.id,I=!0),!I&&this._goalsByHierarchyItemId$.value[E?.id]?[2]:(this._goalsByHierarchyItemId$.next((0,t.pi)((0,t.pi)({},this._goalsByHierarchyItemId$.value),((Y={})[E?.id]={},Y))),G=E?.id?(0,w.t7)([E]):void 0,[4,this.goalsHttpService.getScorecard(H.groupId,H.id,!0,G).toPromise().then(function(ae){var J,N=ie.checkGoalsConnectedToHierarchy(G,ae.goals),he=_.keyBy(N,"id");ie._goalsByHierarchyItemId$.next((0,t.pi)((0,t.pi)({},ie._goalsByHierarchyItemId$.value),((J={})[E?.id]=he,J)))}).catch(function(ae){var J;d.fF.assertFail(ae),ie._goalsByHierarchyItemId$.next((0,t.pi)((0,t.pi)({},ie._goalsByHierarchyItemId$.value),((J={})[E?.id]=null,J)))})]);case 1:return ye.sent(),[2]}})})},v.prototype.setDisplaySettings=function(E){this._displaySettings$.next(E)},v.prototype.checkGoalsConnectedToHierarchy=function(E,I){var H=this;return _.map(I,function(G){var Y,ie,ye=!_.isEmpty(E),ae=ye&&G.valueConnection&&!H.hierarchyService.isDatasetMappedToHierarchyPath(null===(Y=G.valueConnection)||void 0===Y?void 0:Y.datasetId,E),J=ye&&G.targetConnection&&!H.hierarchyService.isDatasetMappedToHierarchyPath(null===(ie=G.targetConnection)||void 0===ie?void 0:ie.datasetId,E);return(0,t.pi)((0,t.pi)({},G),{isCurrentValueNotConnectedToHierarchy:ae,isTargetValueNotConnectedToHierarchy:J})})},v.\u0275fac=function(I){return new(I||v)(k.\u0275\u0275inject(O.G),k.\u0275\u0275inject(s.G),k.\u0275\u0275inject(ne.o),k.\u0275\u0275inject(ee.w),k.\u0275\u0275inject(a.f))},v.\u0275prov=k.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac}),v}()},21719:function(ct,Ge,n){"use strict";n.d(Ge,{D:function(){return r}});var t=n(81337),i=n(14786),w=n(35510),a=n(33554),d=n(50423),p=n(41819),l=n(49223),c=n(87426),y=n(96608),r=function(){function C(m,k,O,s){this.sideFlyoutService=m,this.scorecardService=k,this.hierarchyService=O,this.telemetryService=s,this._showHierarchiesPane$=new w.X(!1),this._showHeatmapConfigurationPane$=new w.X(!1),this._showHeatmapDisplaySettingsPane$=new w.X(!1),this.showHierarchiesPane$=this._showHierarchiesPane$.asObservable(),this.showHeatmapConfigurationPane$=this._showHeatmapConfigurationPane$.asObservable(),this.showHeatmapDisplaySettingsPane$=this._showHeatmapDisplaySettingsPane$.asObservable()}return C.prototype.openHierarchiesBuilder=function(m){return(0,t.mG)(this,void 0,void 0,function(){var k,s,ne=this;return(0,t.Jh)(this,function(ee){switch(ee.label){case 0:return this.telemetryService.logEvent(i.AY,{entryPoint:m}),k=new a.t(1),this.sideFlyoutService.show({componentManifest:{componentId:"HierarchyBuilderPaneComponentId",modulePath:"@powerbi/GoalsHierarchy/goals-hierarchy.module#GoalsHierarchyModule",inputArgs:{scorecard$:this.scorecardService.getScorecard(),close:function(v){ne.sideFlyoutService.hide(),k.next(v),k.complete()},saveQueryHierarchyAsUser:function(v){ne.scorecardService.updateScorecard({queryHierarchyAsUser:v})}}},paneClass:"hierarchy-builder"}),[4,k.toPromise()];case 1:return ee.sent()&&(s=this.scorecardService.getCurrentScorecard(),this.scorecardService.setActiveHierarchy(void 0),this.hierarchyService.loadHierarchies(s.groupId,s.id,!1)),[2]}})})},C.prototype.showHierarchiesPane=function(){this._showHierarchiesPane$.next(!0)},C.prototype.hideHierarchiesPane=function(){this._showHierarchiesPane$.next(!1)},C.prototype.showHeatmapConfigurationPane=function(){this.hideHeatmapDisplaySettingsPane(),this._showHeatmapConfigurationPane$.next(!0)},C.prototype.hideHeatmapConfigurationPane=function(){this._showHeatmapConfigurationPane$.next(!1)},C.prototype.showHeatmapDisplaySettingsPane=function(){this.hideHeatmapConfigurationPane(),this._showHeatmapDisplaySettingsPane$.next(!0)},C.prototype.hideHeatmapDisplaySettingsPane=function(){this._showHeatmapDisplaySettingsPane$.next(!1)},C.\u0275fac=function(k){return new(k||C)(d.\u0275\u0275inject(p.p),d.\u0275\u0275inject(l.G),d.\u0275\u0275inject(c.G),d.\u0275\u0275inject(y.y0))},C.\u0275prov=d.\u0275\u0275defineInjectable({token:C,factory:C.\u0275fac}),C}()},87426:function(ct,Ge,n){"use strict";n.d(Ge,{G:function(){return pe}});var t=n(81337),i=n(29730),w=n(3468),a=n(62458);function l(ce){return(0,t.pi)((0,t.pi)({},ce),{connections:_.map(ce.connections,function(ge){return function(ce,ge){var se={datasetId:ce.datasetId,levels:_.map(ge,function(xe){return function(ce){return{levelId:ce.levelId,fieldExpr:ce.field?w.ib.deserializeExpr(JSON.parse(ce.field)):void 0,filter:ce.fieldFilter?w.ib.deserializeFilter(JSON.parse(ce.fieldFilter)):void 0}}(_.find(ce.levels,function(Oe){return Oe.levelId===xe.id})??{levelId:xe.id,field:void 0})})};return ce.ownerField&&(se.ownerFieldExpr=w.ib.deserializeExpr(JSON.parse(ce.ownerField))),se}(ge,ce.levels)})})}function c(ce){return{id:ce.id,levels:ce.levels,name:ce.name,scorecardId:ce.scorecardId,owner:ce.owner,connections:_.map(ce.connections,function(ge){return function(ce){var ge={datasetId:ce.datasetId,levels:_.map(ce.levels,function(se){return function(ce){return{levelId:ce.levelId,field:ce.fieldExpr?JSON.stringify(w.ib.serializeExpr(ce.fieldExpr)):void 0,fieldFilter:ce.filter?JSON.stringify(w.ib.serializeFilter(ce.filter)):void 0}}(se)})};return ce.ownerFieldExpr&&(ge.ownerField=JSON.stringify(w.ib.serializeExpr(ce.ownerFieldExpr))),ge}(ge)})}}var ne=n(58614),ee=n(72489),Z=n(74466),v=n(35510),E=n(11547),I=n(9936),H=n(59017),G=n(77526),Y=n(59973),ie=n(14172),ye=n(48787),ae=n(57243),J=n(50423),N=n(81213),he=n(65181),pe=function(){function ce(ge,se,xe){this.goalsHttpService=ge,this.errorService=se,this.localization=xe,this._hierarchies$=new v.X(null),this._hierarchyItems$=new v.X({}),this._hierarchyErrors$=new v.X({}),this._isSaving$=new v.X(!1),this.loadingHierarchyItems=new Set,this.isLoadingHierarchies=!1,this.isSaving$=this._isSaving$,this.hierarchies$=this._hierarchies$.pipe((0,G.x)()),this.hierarchyItems$=this._hierarchyItems$.pipe((0,Y.h)(function(me){return!_.isEmpty(me)}),(0,G.x)()),this.hierarchyErrors$=this._hierarchyErrors$.pipe((0,G.x)()),this.hasHierarchies$=this.hierarchies$.pipe((0,Y.h)(function(me){return!!me}),(0,ie.U)(function(me){return!_.isEmpty(me)}),(0,G.x)())}return Object.defineProperty(ce.prototype,"hierarchies",{get:function(){return this._hierarchies$.value},enumerable:!1,configurable:!0}),Object.defineProperty(ce.prototype,"hierarchyItems",{get:function(){return this._hierarchyItems$.value},enumerable:!1,configurable:!0}),Object.defineProperty(ce.prototype,"hierarchyErrors",{get:function(){return this._hierarchyErrors$.value},enumerable:!1,configurable:!0}),ce.prototype.setHierarchies=function(ge){this._hierarchies$.next(ge)},ce.prototype.setHierarchyItems=function(ge,se){var xe=_.find(this.hierarchies,function(me){return me.id===ge});a.fF.assertValue(xe,"No hierarchies with id ".concat(ge)),this._hierarchyItems$.next((0,Z.Uy)(this.hierarchyItems,function(me){me[ge]=se}))},ce.prototype.setHierarchyErrors=function(ge){this._hierarchyErrors$.next(ge)},ce.prototype.saveHierarchies=function(){var ge;return(0,t.mG)(this,void 0,void 0,function(){var se,xe,me,Oe,Ce,Le,ze,$e,He,Je,j,tt,Ue,oe,g,u=this;return(0,t.Jh)(this,function(F){switch(F.label){case 0:if(!this.hierarchies||!this.scorecardId||this.isLoadingHierarchies)return a.fF.assertFail("Hierarchies not loaded"),[2];if(this._isSaving$.value)return a.fF.assertFail("Save already in progress"),[2];if(_.some(this.hierarchyErrors,function(W){return _.some(W,function(te){return"Error"===te.severity})}))return a.fF.assertFail("Save blocked by error"),[2];this._isSaving$.next(!0),F.label=1;case 1:return F.trys.push([1,11,12,13]),[4,this.goalsHttpService.getScorecardHierarchies(this.groupId,this.scorecardId).toPromise()];case 2:for(se=F.sent(),xe=_.filter(se,function(W){return!_.some(u.hierarchies,function(te){return W.id===te.id})}),me=[],Oe=_.filter(_.flatten(_.values(this.hierarchyErrors)),function(W){return"MetricsHierarchy_NoDatasetAccess"===W.code}),Ce=function(te){var U=_.find(Le.hierarchies,function(B){return B.id===te.hierarchyId});a.fF.assertValue(U,"Hierarchy with id ".concat(te.hierarchyId," not found to clear invalid mapping"));var Q=_.find(U.connections,function(B){return B.datasetId===te.datasetId});a.fF.assertValue(Q,"Connection with id ".concat(te.datasetId," not found to clear invalid mapping")),Q.levels.forEach(function(B){B.fieldExpr=void 0,B.filter=void 0})},Le=this,ze=0,$e=Oe;ze<$e.length;ze++)Ce($e[ze]);He=function(te){var U,Q,B,P;return(0,t.Jh)(this,function(q){switch(q.label){case 0:return te.isNew?_.some(te.connections,function(le){return _.some(le?.levels,function(de){return!!de?.fieldExpr})})?(Q=function(ce){var ge=c(ce);return{name:ge.name,levels:ge.levels,connections:ge.connections}}(te),[4,Je.goalsHttpService.createScorecardHierarchy(Je.groupId,Je.scorecardId,Q).toPromise()]):[3,2]:[3,3];case 1:B=q.sent(),P=l(B),me.push(P),q.label=2;case 2:return[3,7];case 3:return(U=_.find(se,function(le){return le.id===te.id}))?[3,4]:(a.fF.assertFail("Cannot updated a deleted hierarchy"),[3,7]);case 4:return _.isEqual(c(l(U)),c(te))?[3,6]:(Q=function(ce){return{hierarchy:c(ce)}}(te),[4,Je.goalsHttpService.updateScorecardHierarchy(Je.groupId,Je.scorecardId,te.id,Q).toPromise()]);case 5:return B=q.sent(),P=l(B),me.push(P),[3,7];case 6:me.push(te),q.label=7;case 7:return[2]}})},Je=this,j=0,tt=this.hierarchies,F.label=3;case 3:return j<tt.length?[5,He(tt[j])]:[3,6];case 4:F.sent(),F.label=5;case 5:return j++,[3,3];case 6:Ue=0,oe=xe,F.label=7;case 7:return Ue<oe.length?[4,this.goalsHttpService.deleteScorecardHierarchy(this.groupId,this.scorecardId,oe[Ue].id).toPromise()]:[3,10];case 8:F.sent(),F.label=9;case 9:return Ue++,[3,7];case 10:return this.setHierarchies(me),[3,13];case 11:throw g=F.sent(),this.errorService.error(this.localization.get("MetricsHierarchy_Cannot_Save_Hierarchies"),"GoalsCannotSaveHierarchies",{requestId:g?.requestId,statusCode:null===(ge=g?.status)||void 0===ge?void 0:ge.toString()}),g;case 12:return this._isSaving$.next(!1),[7];case 13:return[2]}})})},ce.prototype.loadHierarchies=function(ge,se,xe){var me=this;return void 0===xe&&(xe=!0),this.scorecardId===se&&xe&&this.hierarchies||this.scorecardId===se&&this.isLoadingHierarchies||(this.scorecardId=se,this.groupId=ge,this.isLoadingHierarchies=!0,this.goalsHttpService.getScorecardHierarchies(ge,this.scorecardId).toPromise().then(function(Oe){if(me.setHierarchies(function(ce){return _.map(ce,function(ge){return l(ge)})}(Oe)),!xe&&!_.isEmpty(me.hierarchyItems))for(var Ce in me.hierarchyItems)me.loadHierarchyItems(Ce,!1)}).catch(function(Oe){throw me.setHierarchies([]),Oe}).finally(function(){me.isLoadingHierarchies=!1,me.gc()})),this.hierarchies$},ce.prototype.loadHierarchyItems=function(ge,se){var xe=this;return void 0===se&&(se=!0),a.fF.assertValue(this.scorecardId,"No scorecard loaded"),(!se||_.isEmpty(this.hierarchyItems[ge])&&!this.loadingHierarchyItems.has(ge))&&(this.loadingHierarchyItems.add(ge),this.goalsHttpService.getScorecardHierarchyItems(this.groupId,this.scorecardId,ge).toPromise().then(function(me){return xe.setHierarchyItems(ge,function(ce){for(var ge=_.cloneDeep(ce),se=_.groupBy(ge,function(ze){return ze.id}),xe=[],me=0,Oe=ge;me<Oe.length;me++){var Ce=Oe[me];if(Ce.parentHierarchyItemId){var Le=_.first(se[Ce.parentHierarchyItemId]);Ce.parent=Le,Le?Le.children?Le.children.push(Ce):Le.children=[Ce]:a.fF.assertFail("Parent item missing")}else xe.push(Ce)}return xe}(me))}).catch(function(me){var Oe;a.fF.assertFail("Error loading hierarchy items. "+(null===(Oe=me?.error)||void 0===Oe?void 0:Oe.message)),xe.setHierarchyItems(ge,[])}).finally(function(){return xe.loadingHierarchyItems.delete(ge)})),this.hierarchyItems$.pipe((0,ie.U)(function(me){return me[ge]}),(0,G.x)())},ce.prototype.getHierarchyItemsForPath=function(ge){var se=this;return _.isEmpty(ge)?(0,E.of)(null):(0,I.D)(_.map(ge,function(xe){return se.loadHierarchyItems(xe.hierarchyId).pipe((0,Y.h)(function(me){return!!me}),(0,ye.q)(1))})).pipe((0,ie.U)(function(){return(0,i.qB)(ge,se.hierarchyItems)}))},ce.prototype.getHierarchyDisplayInfoObservable=function(ge){var se=this;return(0,H.aj)([ge,this.hierarchies$]).pipe((0,ie.U)(function(xe){return se.getHierarchyDisplayInfo(xe[1],xe[0])}),(0,ae.d)({bufferSize:1,refCount:!0}))},ce.prototype.getHierarchyDisplayInfo=function(ge,se){var me,xe=this.localization.get("All"),Oe=_.map(se,function($e){return(0,t.pi)((0,t.pi)({},$e),{levels:$e.levels.map(function(We){return(0,ee.WU)(We)})})}),Ce=_.keyBy(Oe,function($e){return $e.hierarchyId});if(!_.isEmpty(se)){var Le=_.map(ge,function($e){var We;return _.last(null===(We=Ce[$e.id])||void 0===We?void 0:We.levels)});me=_.join(_.compact(Le),", ")}var ze=_.map(ge,function($e){return _.has(Ce,$e.id)?(0,t.pi)((0,t.pi)({},Ce[$e.id]),{hierarchyName:$e.name}):{hierarchyId:$e.id,hierarchyName:$e.name,levels:[xe]}});return{showingAll:_.isEmpty(se),displayLabel:me,displayPaths:ze}},ce.prototype.formatHierarchyItemPath=function(ge){var se;return(0,t.pi)((0,t.pi)({},ge),{levels:ge.levels.map(function(xe){return(0,ee.WU)(xe)}),hierarchyName:null===(se=this.hierarchies.find(function(xe){return xe.id===ge.hierarchyId}))||void 0===se?void 0:se.name})},ce.prototype.getActiveHierarchies=function(ge){return _.intersectionWith(this.hierarchies,ge,function(se,xe){return se.id===xe.hierarchyId})},ce.prototype.isDatasetMappedToHierarchyPath=function(ge,se){if(_.isNil(ge)||_.isEmpty(se))return a.fF.assertFail("Expected datasetId and hierarchyPaths to be defined"),!1;var xe=this.getActiveHierarchies(se);return _.some(xe,function(me){return _.some(me.connections,function(Oe){return Oe.datasetId===ge&&_.some(Oe.levels,function(Ce){return!!Ce.fieldExpr})})})},ce.prototype.isGoalOwnerMappedToHierarchy=function(ge,se){if(!ge.valueConnection&&!ge.targetConnection||_.isEmpty(se))return!1;var xe=this.getActiveHierarchies(se);return _.some(xe,function(me){var Oe=_.find(me.connections,function(Ce){var Le,ze;return Ce.datasetId===(null===(Le=ge.valueConnection)||void 0===Le?void 0:Le.datasetId)||Ce.datasetId===(null===(ze=ge.targetConnection)||void 0===ze?void 0:ze.datasetId)});return!!Oe?.ownerFieldExpr})},ce.prototype.gc=function(){var ge=this,se=new Set(_.map(this.hierarchies,function(me){return me.id})),xe=(0,Z.Uy)(this.hierarchyItems,function(me){for(var Oe=0,Ce=Object.keys(ge.hierarchyItems);Oe<Ce.length;Oe++){var Le=Ce[Oe];se.has(Le)||delete me[Le]}});xe!==this.hierarchyItems&&this._hierarchyItems$.next(xe)},ce.\u0275fac=function(se){return new(se||ce)(J.\u0275\u0275inject(ne.f),J.\u0275\u0275inject(N.T),J.\u0275\u0275inject(he.o))},ce.\u0275prov=J.\u0275\u0275defineInjectable({token:ce,factory:ce.\u0275fac}),ce}()},20930:function(ct,Ge,n){"use strict";n.d(Ge,{N:function(){return p}});var t=n(60042),i=n(14786),w=n(50423),a=n(65181),d=n(56083),p=function(){function l(c,y){this.localizationService=c,this.tutorialPopupService=y}return l.prototype.startFirstGoalTutorial=function(){this.tutorialPopupService.startTutorial(this.createFirstGoalTutorialModel())},l.prototype.createFirstGoalTutorialModel=function(){var c,y="ScorecardTutorialFirstGoalName",r="ScorecardTutorialFirstGoalCurrent",C="ScorecardTutorialFirstGoalTarget";return{isSequentialTutorial:!0,itemKeys:[y,r,C],items:(c={},c[y]={title:this.localizationService.get("ScorecardTutorial_MetricName_Title"),text:this.localizationService.get("ScorecardTutorial_MetricName_Text"),buttonLabel:this.localizationService.get("TutorialPopup_Next"),dataStoreKey:y,canShow:function(){return $(t.gT.ScorecardTutorial_FirstGoalNameSelector).length>0},attachTo:function(){return $(t.gT.ScorecardTutorial_FirstGoalNameSelector)},offset:{top:0,left:-10}},c[r]={title:this.localizationService.get("ScorecardTutorial_MetricCurrent_Title"),text:this.localizationService.get("ScorecardTutorial_MetricCurrent_Text"),buttonLabel:this.localizationService.get("TutorialPopup_Next"),dataStoreKey:r,canShow:function(){return $(t.gT.ScorecardTutorial_FirstGoalCurrentSelector).length>0},attachTo:function(){return $(t.gT.ScorecardTutorial_FirstGoalCurrentSelector)},offset:{top:0,left:-10}},c[C]={title:this.localizationService.get("ScorecardTutorial_MetricTarget_Title"),text:this.localizationService.get("ScorecardTutorial_MetricTarget_Text"),buttonLabel:this.localizationService.get("Done_ButtonText"),dataStoreKey:C,canShow:function(){return $(t.gT.ScorecardTutorial_FirstGoalTargetSelector).length>0},attachTo:function(){return $(t.gT.ScorecardTutorial_FirstGoalTargetSelector)},offset:{top:0,left:-10}},c)}},l.prototype.startGoalRollupsTutorial=function(){this.tutorialPopupService.startTutorial(this.createGoalRollupsTutorialModel())},l.prototype.createGoalRollupsTutorialModel=function(){var c,y="GoalRollupsTutorial",r=t.gT.ScorecardTutorial_GoalRollupSelector;return{itemKeys:[y],items:(c={},c[y]={title:this.localizationService.get("TutorialPopup_MetricsRollupsTitle"),text:this.localizationService.get("TutorialPopup_MetricsRollupsContent"),buttonLabel:this.localizationService.get("TutorialPopup_GotIt"),dataStoreKey:y,canShow:function(){return!!$(r)},attachTo:function(){return $(r)},preferredOrientation:"bottom",telemetryEventArgs:[i._9],customClass:"goal-rollups-tutorial"},c)}},l.prototype.startGoalRollupsDetailsPaneTutorial=function(){this.tutorialPopupService.startTutorial(this.createGoalRollupsDetailsPaneTutorialModel())},l.prototype.createGoalRollupsDetailsPaneTutorialModel=function(){var c,y="GoalRollupsDetailsPaneTutorial",r=t.gT.ScorecardTutorial_GoalRollupDetailsPaneSelector;return{itemKeys:[y],items:(c={},c[y]={title:this.localizationService.get("TutorialPopup_MetricsRollupsTitle_DetailsPane"),text:this.localizationService.get("TutorialPopup_MetricsRollupsContent_DetailsPane"),buttonLabel:this.localizationService.get("TutorialPopup_GotIt"),dataStoreKey:y,canShow:function(){return!!$(r)},attachTo:function(){return $(r)},learnMoreText:this.localizationService.get("LearnMore"),learnMoreUrl:"https://learn.microsoft.com/en-us/power-bi/create-reports/service-metrics-submetrics#get-started-creating-rollups",preferredOrientation:"right",telemetryEventArgs:[i.Fg],customClass:"show-goal-rollups-coachmark"},c)}},l.\u0275fac=function(y){return new(y||l)(w.\u0275\u0275inject(a.o),w.\u0275\u0275inject(d.yU))},l.\u0275prov=w.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac}),l}()},23348:function(ct,Ge,n){"use strict";n.d(Ge,{f:function(){return y}});var t=n(81337),i=n(57535),w=n(58614),a=n(48787),d=n(50423),p=n(76746),l=n(85928),c=n(48741),y=function(){function r(C,m,k,O){this.appSettings=C,this.mashupService=m,this.httpClient=k,this.goalsHttpService=O}return r.prototype.evaluateQuery=function(C){return(0,t.mG)(this,void 0,void 0,function(){var m,k,O;return(0,t.Jh)(this,function(ee){switch(ee.label){case 0:return[4,this.mashupService.getPQEndpoint().pipe((0,a.q)(1)).toPromise()];case 1:return m=ee.sent(),[4,this.mashupService.getPQToken("".concat(this.appSettings.powerQueryResourceName,"/.default")).pipe((0,a.q)(1)).toPromise()];case 2:return k=ee.sent(),O="".concat(m,"/api/evaluator/evaluate"),[4,this.httpClient.post(O,{mashupDocument:C,queryName:"Query",fastCombine:!0},{headers:{"x-ms-api-version":"2.0",authorization:"Bearer ".concat(k)}}).pipe((0,a.q)(1)).toPromise()];case 3:return[2,ee.sent()]}})})},r.prototype.importGoal=function(C,m,k,O,s){return(0,t.mG)(this,void 0,void 0,function(){var ne,ee,Z,v,E,I,H,G,Y,ie,ye,ae,N,he;return(0,t.Jh)(this,function(pe){switch(pe.label){case 0:ne=[],ee=_.indexOf(O,"Name"),Z=_.indexOf(O,"Owner"),v=_.indexOf(O,"Status"),E=_.indexOf(O,"Value"),I=_.indexOf(O,"Due Date"),H=_.indexOf(O,"Notes"),ne.push(ee,Z,v,E,I,H),-1!==v&&(G=this.getStatus(k,v,s)),Y=0,ie=0,ye=k.rows,pe.label=1;case 1:return ie<ye.length?[4,this.goalsHttpService.createGoal(C,m,{name:(ae=ye[ie])[ee],owner:ae[Z],completionDate:ae[I]}).pipe().toPromise()]:[3,5];case 2:return N=pe.sent(),he={timestamp:"2:00",status:G[Y]},Y+=1,[4,this.goalsHttpService.createGoalValue(C,m,N.id,he)];case 3:pe.sent(),pe.label=4;case 4:return ie++,[3,1];case 5:return[2]}})})},r.prototype.getStatus=function(C,m,k){for(var s=[],ne=0,ee=C.rows;ne<ee.length;ne++){var v=ee[ne][m].replace(/\s/g,"");s.push(v)}for(var E=[],I=0,H=s;I<H.length;I++){var Y=i.p.getGoalStatusId(H[I],k);E.push(Y)}return E},r.\u0275fac=function(m){return new(m||r)(d.\u0275\u0275inject(p.de),d.\u0275\u0275inject(l.M),d.\u0275\u0275inject(c.eN),d.\u0275\u0275inject(w.f))},r.\u0275prov=d.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac}),r}()},93379:function(ct,Ge,n){"use strict";n.d(Ge,{jL:function(){return v},Nw:function(){return H}});var t=n(70060),i=n(62458),a=n(62831),d=n(60166),p=n(43286),l=n(35510),c=n(59017),y=n(11547),r=n(77526),C=n(14172),m=n(81905),k=n(57243),O=n(50423),s=n(9380),ne=n(49223),ee=n(19178),v=function(){function G(Y){this.capability=Y,this.capability||(this.capability={enabled:!0,disabledReasons:new Set})}return G.clone=function(Y){return new G(_.cloneDeep(Y))},G.prototype.disableIf=function(Y,ie,ye){return Y&&(this.capability.enabled=!1,this.capability.disabledReasons.add(ie),ye&&!this.capability.disabledMessageKey&&(this.capability.disabledMessageKey=ye)),new G(this.capability)},G.prototype.disableWithMultiple=function(Y){var ie=this;return this.capability.enabled=!1,Y.forEach(function(ye){return ie.capability.disabledReasons.add(ye)}),new G(this.capability)},G.prototype.build=function(){return this.capability},G}();function E(G,Y){return(0,p.yE)(G,Y)}var I=["id","permissions","hierarchyPaths"],H=function(){function G(Y,ie,ye,ae){var J=this;this.featureSwitchService=Y,this.scorecardService=ie,this.groupStore=ye,this.scorecardHost=ae,this.capabilityInputs$=new l.X([void 0,"List",!1]);var N=this.scorecardService.getScorecard().pipe((0,r.x)(function(pe,ce){return!pe&&!ce||!!pe&&!!ce&&_.every(I,function(ge){return _.isEqual(pe[ge],ce[ge])})})),he=N.pipe((0,C.U)(function(pe){return pe.groupId}),(0,r.x)(),(0,m.w)(function(pe){return J.groupStore.getGroupById(pe||"me")}),(0,C.U)(function(pe){return void 0!==pe?.capacitySkuTier&&6!==pe.capacitySkuTier}));this.inputSub=(0,c.aj)([N,this.scorecardService.viewType$,he]).subscribe(this.capabilityInputs$),this.scorecardCapabilities$=this.capabilityInputs$.pipe((0,C.U)(function(pe){return J.calculateScorecardCapabilities(pe)}),(0,k.d)(1))}return G.prototype.ngOnDestroy=function(){this.inputSub.unsubscribe()},G.prototype.getCurrentScorecardCapabilities=function(){return this.calculateScorecardCapabilities(this.capabilityInputs$.value)},G.prototype.getScorecardCapabilities=function(){return this.scorecardCapabilities$},G.prototype.getCurrentGoalCapabilities=function(Y){return _.isNil(Y)?{}:this.calculateGoalCapabilities(Y,this.capabilityInputs$.value)},G.prototype.getGoalCapabilities=function(Y){var ie=this;return _.isNil(Y)?(0,y.of)({}):this.capabilityInputs$.pipe((0,C.U)(function(ye){return ie.calculateGoalCapabilities(Y,ye)}),(0,k.d)(1))},G.prototype.getMultipleGoalCapabilities=function(Y){var ie=this;return _.isEmpty(Y)?(0,y.of)({}):this.capabilityInputs$.pipe((0,C.U)(function(ye){for(var ae=_.map(Y,function(se){return ie.calculateGoalCapabilities(se,ye)}),J=ae[0],N={},he=function(xe){var me=xe,Oe=J[me];if("scorecardCapabilities"===me)N[me]=J.scorecardCapabilities;else if("boolean"==typeof Oe)N[me]=_.every(ae,function(He){return He[me]});else if(function(G){return"enabled"in G}(Oe)){for(var Ce=new v,Le=0,ze=ae;Le<ze.length;Le++){var We=ze[Le][me];We.enabled||Ce.disableWithMultiple(We.disabledReasons)}N[me]=Ce.build()}else i.fF.assertFail("Unexpected type for key ".concat(me," when getting multiple goal capabilities"))},pe=0,ce=_.keys(J);pe<ce.length;pe++)he(ce[pe]);return N}),(0,k.d)(1))},G.prototype.calculateScorecardCapabilities=function(Y){var ie=Y[0],ye=Y[1],ae=Y[2],J={},N=E((0,t.l)(ie?.permissions),2),he=!_.isEmpty(ie?.hierarchyPaths),pe="List"===ye;return J.customizeStatus=this.featureSwitchService.featureSwitches.goalsCustomizeStatus&&N,J.createGoal=(new v).disableIf(!N,"NoWritePermission","Metrics_Tooltip_NoPermission").disableIf(he,"Hierarchical","Metrics_Tooltip_Create_Metric_Disabled_Hierarchical").disableIf(!pe,"UnsupportedView","Metrics_Tooltip_Create_Metric_Disabled_UnsupportedView").build(),J.createLinkedGoal=(new v).disableIf(!N,"NoWritePermission","Metrics_Tooltip_NoPermission").disableIf(he,"Hierarchical","Metrics_Tooltip_Create_Metric_Disabled_Hierarchical").disableIf("Heatmap"===ye,"UnsupportedView","Metrics_Tooltip_Create_Metric_Disabled_UnsupportedView").build(),J.deleteGoal=N&&!he,J.reorderGoal=this.featureSwitchService.featureSwitches.powerBIGoalsDragAndDrop&&N&&!he&&pe,J.editHierarchies=(new v).disableIf(!N,"NoWritePermission","MetricsHierarchy_NoPermission").disableIf(!ae&&this.featureSwitchService.featureSwitches.scorecardHierarchiesPremium,"NoPremiumWorkspace","MetricsHierarchy_NotAllowedInShared").build(),J.editHeatmap=N,J},G.prototype.calculateGoalCapabilities=function(Y,ie){var ye,ae,J={scorecardCapabilities:this.calculateScorecardCapabilities(ie)},N=ie[0],he=ie[1],pe=Y.isNew?31:function(G){if(_.isNil(G))return 0;if(!isNaN(G))return Number(G);switch(G.toString().trim().toLowerCase()){case"none":return 0;case"view":return 1;case"updatecurrentvalue":return 3;case"updatetargetvalue":return 5;case"updatenotes":return 9;case"updatestatus":return 17;case"updatevalues":return 7;case"all":return 31;default:i.fF.assertValue(G,"can't cast GoalPermission value")}}(Y.permissions),ce=E((0,t.l)(N?.permissions),2),ge=!!Y.valuesCategoryId,se=(null===(ae=null===(ye=Y.aggregations)||void 0===ye?void 0:ye.find(function(We){return"NumberOfTargets"===We.type}))||void 0===ae?void 0:ae.value)>1,xe=!_.isEmpty(N?.hierarchyPaths),me=a.q.isSampleScorecard(N),Oe=xe&&Y.isLinked,Ce="List"===he;J.selectGoal=this.scorecardHost?this.scorecardHost.canSelectGoal(Y):{enabled:!0},J.editGoal=(new v).disableIf(!ce,"NoWritePermission","Metrics_Tooltip_NoPermission").disableIf(Y.isLinked,"LinkedMetric","Metrics_Tooltip_Edit_Metric_Disabled_Linked").disableIf(!Ce,"UnsupportedView","Metrics_Tooltip_Edit_Metric_Disabled_UnsupportedView").build();var Le=ce&&!Y.isLinked&&!xe;J.editName=Le,J.editStartDate=Le,J.editDueDate=Le,J.editStatusRules=Le,J.editPeriodicity=Le,J.connectCurrentValueToData=Le,J.connectTargetValueToData=Le,J.changeValueFormat=Le,J.editOwners=Le,J.deleteGoal=J.scorecardCapabilities.deleteGoal,J.createSubgoal=J.scorecardCapabilities.createGoal,J.editStatus=E(pe,17)&&!Oe&&!Y.hasStatusRules,J.addNotes=E(pe,9)&&!Oe;var ze=E(pe,3)&&!Oe&&!Y.valueConnection&&!Y.valueRollup;J.editCurrentValue=ze,J.editMultipleValues=ze&&!ge&&!xe&&!Y.isLinked;var $e=E(pe,5)&&!Y.isLinked;return J.editTargetValue=$e&&!Y.targetConnection&&!Y.targetRollup&&!se,J.editMultipleTargets=$e&&(!!this.featureSwitchService.featureSwitches.goalsRollups||!Y.targetConnection&&!Y.targetRollup)&&(!ge||se)&&!xe,J.deleteCheckIn=ce,J.followGoal=this.featureSwitchService.featureSwitches.goalsFavoriteGoals&&!me&&!xe,J.useCategoricalValues=!!this.featureSwitchService.featureSwitches.goalsCategoricalValues&&(!se||ge)&&!Y.valueRollup&&!Y.targetRollup&&!Y.valueConnection&&!Y.targetConnection,J.supportMultipleTargetsEditing=!!this.featureSwitchService.featureSwitches.powerBIGoalsMultipleTargets,J.supportMultipleValuesEditing=!!this.featureSwitchService.featureSwitches.goalsMultipleValuesEditor,J.supportsRollup=!!this.featureSwitchService.featureSwitches.goalsRollups,J.editCalculationType=Le,J.usePickerRollup=J.editCalculationType&&!ge,J},G.\u0275fac=function(ie){return new(ie||G)(O.\u0275\u0275inject(s.vZ),O.\u0275\u0275inject(ne.G),O.\u0275\u0275inject(ee.Y),O.\u0275\u0275inject(d.M,8))},G.\u0275prov=O.\u0275\u0275defineInjectable({token:G,factory:G.\u0275fac}),G}()},62087:function(ct,Ge,n){"use strict";n.d(Ge,{l:function(){return C}});var t=n(81337),i=n(62831),w=n(35510),a=n(30794),d=n(14172),p=n(77526),l=n(83317),c=n(50423),y=n(49223),r=n(9380),C=function(){function m(k,O){var s=this;this.scorecardService=k,this.featureSwitches=O,this._expansionMap$=new w.X({}),this._expandableGoals$=new w.X([]),this._showAllExpanded$=new w.X(!1),this.onDestroy$=new a.xQ,this.expandByDefault=!this.featureSwitches.featureSwitches.collapseGoalsByDefault,this.scorecardService.getScorecard().pipe((0,d.U)(function(ne){return _.map(i.q.filterGoals(ne.goals,function(ee){return!_.isEmpty(ee.subGoals)}),function(ee){return ee.id})}),(0,p.x)(_.isEqual),(0,l.R)(this.onDestroy$)).subscribe(this._expandableGoals$),this._expandableGoals$.pipe((0,l.R)(this.onDestroy$)).subscribe(function(ne){var ee=new Set(ne),Z=_.pickBy(s.expansionMap,function(E,I){return ee.has(I)});if(s._expansionMap$.next(Z),s.expandByDefault){var v=_.filter(ne,function(E){return _.isNil(s.expansionMap[E])});s.setExpansion(v,!0)}}),this._expansionMap$.pipe((0,l.R)(this.onDestroy$)).subscribe(function(){var ne=s.expandedGoalIds.length;0===ne?s._showAllExpanded$.next(!1):ne===s._expandableGoals$.value.length&&s._showAllExpanded$.next(!0)})}return Object.defineProperty(m.prototype,"expansionMap$",{get:function(){return this._expansionMap$},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"expansionMap",{get:function(){return this._expansionMap$.value},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"expandedGoalIds",{get:function(){return _.keys(_.pickBy(this.expansionMap,function(O){return O}))},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"showAllExpanded$",{get:function(){return this._showAllExpanded$},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"showAllExpanded",{get:function(){return this._showAllExpanded$.value},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"hasExpandableGoals$",{get:function(){return this._expandableGoals$.pipe((0,d.U)(function(O){return!_.isEmpty(O)}))},enumerable:!1,configurable:!0}),m.prototype.ngOnDestroy=function(){this.onDestroy$.next(!0),this.onDestroy$.complete()},m.prototype.isExpanded=function(k){var O;return null!==(O=this.expansionMap[k])&&void 0!==O?O:this.expandByDefault},m.prototype.expandGoal=function(k){this.setExpansion([k],!0)},m.prototype.collapseGoal=function(k){this.setExpansion([k],!1)},m.prototype.expandGoals=function(k){this.setExpansion(k,!0)},m.prototype.collapseGoals=function(k){this.setExpansion(k,!1)},m.prototype.expandAllGoals=function(){this.setExpansion(this._expandableGoals$.value,!0)},m.prototype.collapseAllGoals=function(){this.setExpansion(this._expandableGoals$.value,!1)},m.prototype.toggleExpandAll=function(){this.showAllExpanded?this.collapseAllGoals():this.expandAllGoals()},m.prototype.setExpansion=function(k,O){var s=this;if(_.some(k,function(ee){return s.expansionMap[ee]!==O})){var ne=(0,t.pi)({},this.expansionMap);_.forEach(k,function(ee){ne[ee]=O}),this._expansionMap$.next(ne)}},m.\u0275fac=function(O){return new(O||m)(c.\u0275\u0275inject(y.G),c.\u0275\u0275inject(r.vZ))},m.\u0275prov=c.\u0275\u0275defineInjectable({token:m,factory:m.\u0275fac}),m}()},62831:function(ct,Ge,n){"use strict";n.d(Ge,{q:function(){return p}});var t=n(81337),i=n(44603),w=n(4444),a=n(62458),d=n(38078),p=function(){function l(){}return l.isSampleScorecard=function(c){return"00000000-0000-0000-0000-000000000000"===c.id},l.getGoalCreateRequest=function(c){var y;return a.fF.assertValue(c,"goal"),{name:c.name,completionDate:c.completionDate,owner:c.owner,additionalOwners:c.additionalOwners,parentId:null!==(y=c.parentId)&&void 0!==y?y:null,startDate:c.startDate,unit:c.unit,datesFormatString:c.datesFormatString,valuesFormatString:c.valuesFormatString,valuesCategoryId:c.valuesCategoryId}},l.getGoalUpdateRequest=function(c){var y;return a.fF.assertValue(c,"goal"),{name:c.name,completionDate:c.completionDate,owner:c.owner,additionalOwners:c.additionalOwners,parentId:null!==(y=c.parentId)&&void 0!==y?y:null,startDate:c.startDate,unit:c.unit,datesFormatString:c.datesFormatString,valuesFormatString:c.valuesFormatString,description:c.description,cycle:c.cycle,cyclePeriod:c.cyclePeriod,valuesCategoryId:c.valuesCategoryId,metadata:c.metadata,cycleMetadata:c.cycleMetadata}},l.getGoalValueCreateRequest=function(c){return a.fF.assertValue(c,"goalValue"),{timestamp:c.timestamp,value:c.value,target:c.target,trend:c.trend,forecast:c.forecast,status:c.status}},l.getGoalValueUpdateRequest=function(c){return a.fF.assertValue(c,"goalValue"),{value:c.value,target:c.target,trend:c.trend,forecast:c.forecast,status:c.status}},l.getGoalStatusRulesUpdateRequest=function(c){a.fF.assertValue(c,"statusRules");var y=function(s){return{dateTime:s.dateTime,field:s.field,number:s.number,percentOf:s.percentOf?{field:s.percentOf.field,percent:s.percentOf.percent}:void 0}},r=function(s){return{field:s.field,operator:s.operator,value:y(s.value)}};return{rules:_.map(c.rules,function(O){return s=O,{conditions:_.map(s.conditions,function(ne){return function(s){return{fieldComparison:r(s.fieldComparison),expression:s.expression}}(ne)}),output:s.output};var s}),defaultOutput:c.defaultOutput}},l.isGoalMetadataUpdated=function(c,y){return!_.isEqual(l.getGoalUpdateRequest(c),l.getGoalUpdateRequest(y))},l.createNewGoal=function(c,y,r){a.fF.assertValue(c,"owner"),a.fF.assertValue(y,"scorecardId");var C=new Date,m=i.E.getCurrentUTCDay().toISOString(),k=i.E.getCurrentLocalDay();k.setMonth(k.getMonth()+1);var O=i.E.treatAsUTCDate(k).toISOString();return{name:null,id:"new-".concat(d.b$.generateGuid()),scorecardId:y,createdTime:C.toISOString(),lastModifiedBy:c,lastModifiedTime:C.toISOString(),owner:c,additionalOwners:[],startDate:m,completionDate:O,unit:0,parentId:r??null,goalValues:[],subGoals:[],isNew:!0,state:"Editing",valuesCategoryId:null,isExpanded:!0}},l.getGoal=function(c,y){return this.findGoal(c,function(r){return r.id===y})},l.buildGoalTree=function(c){for(var y={},r=0,C=c;r<C.length;r++)y[(m=C[r]).id]=m;for(var k=[],O=0,s=c;O<s.length;O++){var m;if((m=s[O]).parentId&&y[m.parentId]){var ne=y[m.parentId];ne.subGoals?ne.subGoals.push(m):ne.subGoals=[m]}else k.push(m)}return k},l.findGoal=function(c,y){if(_.some(c)){var r=_.find(c,function(O){return y(O)});if(r)return r;for(var C=0,m=c;C<m.length;C++)if(r=this.findGoal(m[C].subGoals,y))return r}return null},l.forEachGoal=function(c,y){if(_.some(c))for(var r=0,C=c;r<C.length;r++){var m=C[r];y(m),this.forEachGoal(m?.subGoals,y)}},l.countSubGoals=function(c,y){var r=this;return void 0===y&&(y=function(){return!0}),_.isEmpty(c?.subGoals)?0:c.subGoals.filter(y).length+c.subGoals.reduce(function(m,k){return m+r.countSubGoals(k,y)},0)},l.flattenGoals=function(c){return function r(C){return _.flatMap(C,function(m){return(0,t.ev)([m],r(m.subGoals),!0)})}(c)},l.filterGoals=function(c,y){return _.filter(this.flattenGoals(c),y)},l.mapGoals=function(c,y){return _.map(this.flattenGoals(c),y)},l.anyGoals=function(c,y){var r;if(_.some(c))for(var C=0,m=c;C<m.length;C++){var k=m[C];if(y(k)||this.anyGoals(null!==(r=k.subGoals)&&void 0!==r?r:[],y))return!0}return!1},l.computeGoalHeight=function(c){return _.isEmpty(c?.subGoals)?0:Math.max.apply(Math,c.subGoals.map(function(y){return 1+l.computeGoalHeight(y)}))},l.computeGoalLevel=function(c,y){for(var r=0,C=y;C;)r++,C=C.parentId?l.getGoal(c,C.parentId):void 0;return r-1},l.filterGoalsAndReassignParents=function(c,y){var r=function C(m,k){var O=[],s=k;return y(m)&&(O.push((0,t.pi)((0,t.pi)({},m),{parentId:k})),s=m.id),_.concat(O,_.flatMap(m.subGoals,function(ne){return C(ne,s)}))};return _.flatMap(c,function(C){return r(C)})},l.isEditing=function(c){return!!l.findGoal(c?.goals,function(y){return!!y.isNew||"Editing"===y.state})},l.isDarkMode=function(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches},l.getCurrentUser=function(){var c;return null===(c=(0,w.bG)())||void 0===c?void 0:c.name},l.isCurrentUser=function(c){var y=l.getCurrentUser();return y&&c&&(0,d.vr)(y,c)},l.compareGoalQueryConnections=function(c,y){return _.isEqual(c?.query,y?.query)&&_.isEqual(c?.datasetId,y?.datasetId)&&_.isEqual(c?.reportUrl,y?.reportUrl)},l.getGoalValueCategoriesCreateRequest=function(c){return a.fF.assertValue(!_.isEmpty(c),"getGoalValueCategoriesCreateRequest categoricalValues"),{name:"",categories:_.map(c,function(y,r){return{id:r,displayName:y}})}},l.getGoalValueCategoriesUpdateRequest=function(c){return a.fF.assertValue(c,"getGoalValueCategoriesUpdateRequest categoryList"),{name:c.name,categories:c.categories}},l.getGoalOwners=function(c){if(_.some(c)){var r={};return function C(m,k){if(_.some(m))for(var O=0,s=m;O<s.length;O++){var ne=s[O];if(ne.owner&&(k[ne.owner]={displayName:void 0,userPrincipalName:ne.owner,objectId:void 0,objectType:3,isSecurityGroup:void 0}),_.some(ne.additionalOwners))for(var ee=0,Z=ne.additionalOwners;ee<Z.length;ee++){var v=Z[ee];v.userPrincipalName&&(k[v.userPrincipalName]={displayName:void 0,userPrincipalName:v.userPrincipalName,objectId:void 0,objectType:3,isSecurityGroup:void 0})}C(ne.subGoals,k)}}(c,r),_.values(r)}return[]},l.observeAndRemoveFocusableAttributes=function(c){if(c){var y=new MutationObserver(function(r){_.some(r,function(m){var k;return(null===(k=m.addedNodes)||void 0===k?void 0:k.length)>0})&&function m(k){k&&(k.removeAttribute("tabindex"),k.removeAttribute("focusable"),_.forEach(k.children,m))}(c)});return y.observe(c,{attributeFilter:["tabindex","focusable"],characterData:!1,childList:!0,subtree:!0}),y}return null},l.getGoalsWithRollups=function(c,y,r){for(var m,C=[];y&&null!=(m=l.getGoal(c,y))&&!0!==m.isLinked&&(y=m.parentId,1===r&&null!=m.valueRollup||2===r&&null!=m.targetRollup);)C.push(m);return C},l}()},32027:function(ct,Ge,n){"use strict";n.d(Ge,{w:function(){return C}});var t=n(81337),i=n(58614),w=n(35510),a=n(59973),d=n(77526),p=n(14172),l=n(57243),c=n(50423),y=n(49223),r=n(99327),C=function(){function m(k,O,s){this.goalsHttpService=k,this.scorecardService=O,this.goalsErrorService=s,this._viewsById$=new w.X(null),this._isSaving$=new w.X(!1),this._isLoading$=new w.X(!1),this.isLoading$=this._isLoading$,this.isSaving$=this._isSaving$,this.views$=this._viewsById$.pipe((0,a.h)(function(ne){return!!ne}),(0,d.x)(),(0,p.U)(function(ne){return _.values(ne)}),(0,l.d)({bufferSize:1,refCount:!0}))}return Object.defineProperty(m.prototype,"defaultListView",{get:function(){return _.find(this._viewsById$.value,function(O){return O.isDefault&&"List"===O.viewType})},enumerable:!1,configurable:!0}),m.prototype.getDefaultView=function(k){return this.views$.pipe((0,p.U)(function(O){return _.find(O,function(s){return s.isDefault&&s.viewType===k})}))},m.prototype.loadViews=function(k){return void 0===k&&(k=!1),(0,t.mG)(this,void 0,void 0,function(){var O,s;return(0,t.Jh)(this,function(ne){switch(ne.label){case 0:if(O=this.scorecardService.getCurrentScorecard(),!k&&null!==this._viewsById$.value||this._isLoading$.value)return[2];this._isLoading$.next(!0),ne.label=1;case 1:return ne.trys.push([1,,3,4]),[4,this.goalsHttpService.getScorecardViews(O.groupId,O.id).toPromise()];case 2:return s=ne.sent(),this._viewsById$.next(_.keyBy(s,function(ee){return ee.id})),[3,4];case 3:return this._isLoading$.next(!1),[7];case 4:return[2]}})})},m.prototype.saveView=function(k){return(0,t.mG)(this,void 0,void 0,function(){var O,s;return(0,t.Jh)(this,function(ne){switch(ne.label){case 0:return O=this.scorecardService.getCurrentScorecard(),[4,this.loadViews()];case 1:ne.sent(),this._isSaving$.next(!0),ne.label=2;case 2:return ne.trys.push([2,8,9,10]),this._viewsById$.value[k.id]?[4,this.goalsHttpService.updateScorecardView(O.groupId,O.id,k).toPromise()]:[3,4];case 3:return ne.sent(),[3,6];case 4:return[4,this.goalsHttpService.createScorecardView(O.groupId,O.id,k).toPromise()];case 5:ne.sent(),ne.label=6;case 6:return[4,this.loadViews(!0)];case 7:return ne.sent(),[3,10];case 8:return s=ne.sent(),this.goalsErrorService.showUserError(s,"SaveViewError"),[3,10];case 9:return this._isSaving$.next(!1),[7];case 10:return[2]}})})},m.prototype.clearCache=function(){this._viewsById$.next(null)},m.\u0275fac=function(O){return new(O||m)(c.\u0275\u0275inject(i.f),c.\u0275\u0275inject(y.G),c.\u0275\u0275inject(r.X))},m.\u0275prov=c.\u0275\u0275defineInjectable({token:m,factory:m.\u0275fac}),m}()},49223:function(ct,Ge,n){"use strict";n.d(Ge,{G:function(){return Ue}});var t=n(81337),i=n(70060),w=n(77695),a=n(57535),d=n(60042),p=n(44603),l=n(125),c=n(61088),y=function(){function oe(){}return oe.ManuallyUpdatingConnectedGoalValueNotAllowed="ManuallyUpdatingConnectedGoalValueNotAllowed",oe.ManuallyUpdatingConnectedMetricValueNotAllowed="ManuallyUpdatingConnectedMetricValueNotAllowed",oe.MultiGeoNotSupported="MultiGeoNotSupported",oe.InvalidScorecardColumnSetting="InvalidScorecardColumnSetting",oe.CircularRelationshipsNotAllowed="CircularRelationshipsNotAllowed",oe}(),r=n(62831),C=n(62458),m=n(30794),k=n(11547),O=n(18353),s=n(42195),ne=n(70032),ee=n(48787),Z=function(){function oe(h){var g,u=this;this.scorecardService=h,this.MinPollingInterval=200,this.MaxPollingInterval=4e3,this.MaxPollingRequests=40,this.PollingDelay=function(F){return u.MinPollingInterval+(u.MaxPollingInterval-u.MinPollingInterval)*F/u.MaxPollingRequests},this.ConnectionTypeAsText=((g={})[1]="Current",g[2]="Target",g)}return oe.prototype.startPollingAsync=function(h,g,u){return(0,t.mG)(this,void 0,void 0,function(){var F,te=this;return(0,t.Jh)(this,function(U){switch(U.label){case 0:if(this.setGoalRefreshState(h.id,g,!0),F=u?.lastRefreshTimestamp,null!=F)return[3,4];U.label=1;case 1:return U.trys.push([1,3,,4]),[4,this.getLastRefreshTimestamp(h.id,g)];case 2:return F=U.sent(),[3,4];case 3:return U.sent(),this.setGoalRefreshState(h.id,g,!1),[2];case 4:return(0,t.mG)(te,void 0,void 0,function(){var Q,B,P,le,q=this;return(0,t.Jh)(this,function(de){switch(de.label){case 0:return de.trys.push([0,,9,10]),Q=new m.xQ,(B=Q.pipe((0,O.R)(function(V){return V+1},-1),(0,s.zg)(function(V){return(0,k.of)(void 0).pipe((0,ne.g)(q.PollingDelay(V)))}),(0,ee.q)(this.MaxPollingRequests))).subscribe(function(){return(0,t.mG)(q,void 0,void 0,function(){return(0,t.Jh)(this,function(V){switch(V.label){case 0:return[4,this.getLastRefreshTimestamp(h.id,g)];case 1:return P=V.sent(),F===P?Q.next():(C.fF.assertValue(P>F,"Expected new refresh history count to be higher"),Q.complete()),[2]}})})}),Q.next(),[4,B.toPromise()];case 1:return de.sent(),u?.refreshGoal?[4,this.scorecardService.refreshGoal(h.id)]:[3,3];case 2:de.sent(),de.label=3;case 3:return u?.refreshGoalValues?[4,this.scorecardService.expandGoalValues(h.id,!0)]:[3,5];case 4:de.sent(),de.label=5;case 5:return u?.refreshRollups&&h.parentId?[4,this.startRollupPolling(h.parentId,g,P)]:[3,7];case 6:de.sent(),de.label=7;case 7:return[4,null===(le=u?.onComplete)||void 0===le?void 0:le.call(u,P)];case 8:return de.sent(),[3,10];case 9:return this.setGoalRefreshState(h.id,g,!1),[7];case 10:return[2]}})}),[2]}})})},oe.prototype.refreshRollups=function(h,g){return(0,t.mG)(this,void 0,void 0,function(){var u,F,W,te,U,Q,B,P,q;return(0,t.Jh)(this,function(V){switch(V.label){case 0:if(!h.parentId||null!=h.valuesCategoryId)return[3,2];if(u=[],F=this.scorecardService.getCurrentScorecard(),!(W=r.q.getGoal(F.goals,h.parentId)))return[3,2];for(te=!1,U=!1,Q=function(L){var T=new Date(L.timestamp).getTime(),X=_.find(h.goalValues,function(ue){return new Date(ue.timestamp).getTime()===T});if(B.isPartOfParentGoalRollup(W.valueRollup,L)&&(te||(te=X?.value!==L.value)),B.isPartOfParentGoalRollup(W.targetRollup,L)&&(U||(U=X?.target!==L.target)),te&&U)return"break"},B=this,P=0,q=g;P<q.length&&"break"!==Q(q[P]);P++);return te&&u.push(this.startRollupPolling(h.parentId,1)),U&&u.push(this.startRollupPolling(h.parentId,2)),_.some(u)?[4,Promise.all(u)]:[3,2];case 1:V.sent(),V.label=2;case 2:return[2]}})})},oe.prototype.refreshRollupsAfterMove=function(h){var g;return(0,t.mG)(this,void 0,void 0,function(){var u,W,te,U,Q,B,P;return(0,t.Jh)(this,function(q){switch(q.label){case 0:return u=this.scorecardService.getCurrentScorecard(),null!=r.q.getGoal(u.goals,h.goalToMove.goalId).valuesCategoryId?[2]:(W=[],te=[],null!=h.goalToMove.currentParentId&&(W.push.apply(W,r.q.getGoalsWithRollups(u.goals,U=h.goalToMove.currentParentId,1)),te.push.apply(te,r.q.getGoalsWithRollups(u.goals,U,2))),null!=(null===(g=h.newParent)||void 0===g?void 0:g.goalId)&&(B=r.q.getGoalsWithRollups(u.goals,Q=h.newParent.goalId,1),P=r.q.getGoalsWithRollups(u.goals,Q,2),W=this.mergeParents(W,B),te=this.mergeParents(te,P)),[4,Promise.all([this.startRollupPollingForGoals(W,1),this.startRollupPollingForGoals(te,2)])]);case 1:return q.sent(),[2]}})})},oe.prototype.refreshRollupsAfterGoalDelete=function(h){return(0,t.mG)(this,void 0,void 0,function(){var g,u,F,W,Q=this;return(0,t.Jh)(this,function(B){switch(B.label){case 0:return h.parentId&&null==h.valuesCategoryId?(g=this.scorecardService.getCurrentScorecard(),(u=r.q.getGoal(g.goals,h.parentId))?(F=[],W=[],_.isNil(u.valueRollup)||_.some(h.goalValues,function(P){return!_.isNil(P.value)&&Q.isPartOfParentGoalRollup(u.valueRollup,P)})&&F.push.apply(F,r.q.getGoalsWithRollups(g.goals,u.id,1)),_.isNil(u.targetRollup)||_.some(h.goalValues,function(P){return!_.isNil(P.target)&&Q.isPartOfParentGoalRollup(u.targetRollup,P)})&&W.push.apply(W,r.q.getGoalsWithRollups(g.goals,u.id,2)),[4,Promise.all([this.startRollupPollingForGoals(F,1),this.startRollupPollingForGoals(W,2)])]):[3,2]):[3,2];case 1:B.sent(),B.label=2;case 2:return[2]}})})},oe.prototype.refreshRollupsAfterGoalValueDelete=function(h,g){return(0,t.mG)(this,void 0,void 0,function(){var u,F,W,te;return(0,t.Jh)(this,function(B){switch(B.label){case 0:return h.parentId&&null==h.valuesCategoryId?(u=this.scorecardService.getCurrentScorecard(),(F=r.q.getGoal(u.goals,h.parentId))?(W=[],te=[],_.isNil(F.valueRollup)||!_.isNil(g.value)&&this.isPartOfParentGoalRollup(F.valueRollup,g)&&W.push.apply(W,r.q.getGoalsWithRollups(u.goals,F.id,1)),_.isNil(F.targetRollup)||!_.isNil(g.target)&&this.isPartOfParentGoalRollup(F.targetRollup,g)&&te.push.apply(te,r.q.getGoalsWithRollups(u.goals,F.id,2)),[4,Promise.all([this.startRollupPollingForGoals(W,1),this.startRollupPollingForGoals(te,2)])]):[3,2]):[3,2];case 1:B.sent(),B.label=2;case 2:return[2]}})})},oe.prototype.isPartOfParentGoalRollup=function(h,g){return h&&(_.isNil(h.startDate)||new Date(g.timestamp).getTime()>=new Date(h.startDate).getTime())},oe.prototype.startRollupPolling=function(h,g,u){return(0,t.mG)(this,void 0,void 0,function(){var F,W;return(0,t.Jh)(this,function(te){switch(te.label){case 0:return F=this.scorecardService.getCurrentScorecard(),W=r.q.getGoalsWithRollups(F.goals,h,g),[4,this.startRollupPollingForGoals(W,g,u)];case 1:return te.sent(),[2]}})})},oe.prototype.startRollupPollingForGoals=function(h,g,u){return(0,t.mG)(this,void 0,void 0,function(){var F,W=this;return(0,t.Jh)(this,function(te){switch(te.label){case 0:return _.some(h)?(F=h.shift(),[4,this.startPollingAsync(F,g,{lastRefreshTimestamp:u,refreshGoal:!0,refreshGoalValues:!0,onComplete:function(Q){return W.startRollupPollingForGoals(h,g,Q)}})]):[3,2];case 1:te.sent(),te.label=2;case 2:return[2]}})})},oe.prototype.getLastRefreshTimestamp=function(h,g){var u;return(0,t.mG)(this,void 0,void 0,function(){var F,W,te;return(0,t.Jh)(this,function(Q){switch(Q.label){case 0:return F=this.ConnectionTypeAsText[g],[4,this.scorecardService.getRefreshHistory(h)];case 1:return W=Q.sent(),te=_.filter(W,function(B){return B.connectionType===g||B.connectionType===F}),[2,null===(u=_.maxBy(te,function(B){return B.timestamp}))||void 0===u?void 0:u.timestamp]}})})},oe.prototype.mergeParents=function(h,g){if(!_.some(h))return g;var u=_.intersectionBy(h,g,function(U){return U.id});if(_.isEmpty(u))return(0,t.ev)((0,t.ev)([],h,!0),g,!0);for(var F=_.findIndex(g,function(U){return U.id===u[0].id}),W=[],te=0;te<F;te++)W.push(g[te]);return W.push.apply(W,h),W},oe.prototype.setGoalRefreshState=function(h,g,u){this.scorecardService.setGoalRefreshState(h,g,u)},oe}(),v=n(14786),E=n(45017),I=n(74076),H=n(58614),G=n(60166),Y=n(98587),ie=n(10723),ye=n(50547),ae=n(43286),J=n(91055),N=n(74466),he=n(33554),pe=n(35510),ce=n(59017),ge=n(14172),se=n(77526),xe=n(83317),me=n(68549),Oe=n(81905),Ce=n(50423),Le=n(58938),ze=n(81213),$e=n(65181),We=n(21976),He=n(9380),Je=n(99327),j=n(96608),tt=n(85732),Ue=function(){function oe(h,g,u,F,W,te,U,Q,B,P,q,le,de){var b,L,V=this;this.goalsHttpService=h,this.userDetailsService=g,this.dialogService=u,this.errorService=F,this.localizationService=W,this.userInfo=te,this.featureSwitches=U,this.goalsErrorService=Q,this.telemetryService=B,this.tabFacade=P,this.store=q,this.scorecardHost=le,this.scorecardSettings=de,this.scorecard=void 0,this._scorecard$=new he.t(1),this._selectedGoalIds$=this._scorecard$.pipe((0,ge.U)(function(T){return T?.selectedGoalIds}),(0,se.x)(_.isEqual)),this._activeGoalId$=this._scorecard$.pipe((0,ge.U)(function(T){return T?.activeGoalId}),(0,se.x)()),this.isEditMode$=new pe.X(!1),this.loading$=new pe.X(0),this._viewType$=new pe.X("List"),this._scorecardSelectionMode$=new pe.X(null),this.switchingHierarchyPath$=new pe.X(!1),this.linkedScorecardsById={},this._goalStatusesByScorecardId$=new pe.X({}),this.onHierarchyNotFound$=new m.xQ,this.onDestroy$=new m.xQ,this.requestId=0,this.pollingService=new Z(this),this.scorecardHost&&(this.getSelectedGoalsObservable().pipe((0,xe.R)(this.onDestroy$)).subscribe(function(T){V.scorecardHost.onSelectGoals(T)}),this._scorecard$.pipe((0,ge.U)(function(T){return T.hierarchyPaths}),(0,se.x)(),(0,xe.R)(this.onDestroy$)).subscribe(function(T){V.scorecardHost.onChangeHierarchyPath(T)})),this._scorecard$.pipe((0,se.x)(function(T,X){var ue,Ne;return _.isEqual(null===(ue=T?.goalStatuses)||void 0===ue?void 0:ue.statuses,null===(Ne=X?.goalStatuses)||void 0===Ne?void 0:Ne.statuses)&&T?.linkedScorecards===X?.linkedScorecards}),(0,ge.U)(function(T){return a.p.getGoalStatusesByScorecardId(T)}),(0,xe.R)(this.onDestroy$)).subscribe(this._goalStatusesByScorecardId$),(0,ce.aj)([this.isEditMode$,this.viewType$,null!==(L=null===(b=this.scorecardSettings)||void 0===b?void 0:b.settings)&&void 0!==L?L:(0,k.of)({})]).pipe((0,ge.U)(function(T){var X=T[0],ue=T[1],Ne=T[2];return"tile"===Ne?.displayMode?V.featureSwitches.featureSwitches.multipleGoalTilesVisual?"multiple":"single":Ne?.useMultiselectMode?"multiple":"List"===ue&&X?"ctrl":null}),(0,se.x)(),(0,xe.R)(this.onDestroy$)).subscribe(this._scorecardSelectionMode$)}return oe.prototype.ngOnDestroy=function(){this.onDestroy$.next(!0),this.onDestroy$.complete()},oe.prototype.loadScorecard=function(h,g,u,F){var W=this;if(r.q.isEditing(this.scorecard)&&!u)this.promptUserConfirmation({title:this.localizationService.get("MetricsUnsavedChangesTitle"),message:this.localizationService.get("MetricsUnsavedChangesDescription"),okButtonText:this.localizationService.get("Refresh"),panelClass:["updateConfirmationDialogPanel"],onConfirmation:function(){return(0,t.mG)(W,void 0,void 0,function(){return(0,t.Jh)(this,function(Q){return[2,this.loadScorecard(h,g,!0,F)]})})}});else{this.loading$.next(this.loading$.value+1),this.requestId++;var te=this.requestId;this.goalsHttpService.getScorecard(h,g,!0,F).toPromise().then(function(U){W.loading$.next(W.loading$.value-1),!(te<W.requestId)&&(W.switchingHierarchyPath$.next(!1),W.setScorecardWithGoals(U))}).catch(function(U){if(W.loading$.next(W.loading$.value-1),!(te<W.requestId)){if(W.switchingHierarchyPath$.next(!1),_.isEmpty(F))W.scorecard=null;else if(W.goalsErrorService.showUserError(U,"LoadHierarchy","MetricsHierarchy_Loading_Error"),404===U?.status&&(W.setActiveHierarchy(void 0,!0),W.onHierarchyNotFound$.next(F),!W.scorecard))return;W.commit()}})}return this._scorecard$.asObservable()},oe.prototype.setActiveHierarchy=function(h,g){return(0,t.mG)(this,void 0,void 0,function(){var u,F=this;return(0,t.Jh)(this,function(W){switch(W.label){case 0:return u=function(U,Q){return _.isEmpty(U)&&_.isEmpty(Q)||_.isEqual(U,Q)},this.scorecard&&!u(this.scorecard.hierarchyPaths,h)?r.q.isEditing(this.scorecard)&&!g?[2,this.promptUserConfirmation({title:this.localizationService.get("MetricsUnsavedChangesTitle"),message:this.localizationService.get("MetricsUnsavedChangesDescription"),okButtonText:this.localizationService.get("ModalDialogButtonText_Continue"),panelClass:["updateConfirmationDialogPanel"],onConfirmation:function(){return(0,t.mG)(F,void 0,void 0,function(){return(0,t.Jh)(this,function(U){return[2,this.setActiveHierarchy(h,!0)]})})}})]:[3,1]:[3,3];case 1:return this.switchingHierarchyPath$.next(!0),[4,this.loadScorecard(this.scorecard.groupId,this.scorecard.id,!0,h).pipe((0,me.o)(function(te){return!u(te.hierarchyPaths,h)},!0)).toPromise()];case 2:return[2,W.sent()];case 3:return[2]}})})},Object.defineProperty(oe.prototype,"onHierarchyNotFound",{get:function(){return this.onHierarchyNotFound$},enumerable:!1,configurable:!0}),Object.defineProperty(oe.prototype,"isHierarchicalScorecard",{get:function(){var g;return!_.isEmpty(null===(g=this.scorecard)||void 0===g?void 0:g.hierarchyPaths)},enumerable:!1,configurable:!0}),oe.prototype.assertNoActivehierarchy=function(h){return void 0===h&&(h=!1),!this.isHierarchicalScorecard||(h?this.dialogService.showSimpleDialog(this.localizationService.get("Coming_Soon"),this.localizationService.get("MetricsHierarchy_ComingSoon")):C.fF.assertFail("Cannot perform this operation on a hierarchical scorecard. ".concat((new Error).stack)),!1)},Object.defineProperty(oe.prototype,"hierarchyPaths$",{get:function(){return this._scorecard$.pipe((0,ge.U)(function(g){return g?.hierarchyPaths}),(0,se.x)())},enumerable:!1,configurable:!0}),oe.prototype.assertScorecardLoaded=function(h){return!(h.id!==this.scorecard.id||!_.isEqual(h.hierarchyPaths,this.scorecard.hierarchyPaths))||(C.fF.assertFail("Scorecard has changed. Active scorecard: ".concat(JSON.stringify(this.scorecard.hierarchyPaths),". Previous scorecard ").concat(JSON.stringify(h.hierarchyPaths))),!1)},oe.prototype.isSwitchingHierarchyPath=function(){return this.switchingHierarchyPath$.asObservable()},oe.prototype.saveGoal=function(h,g){var u,F,W,te,U,Q;return(0,t.mG)(this,void 0,void 0,function(){var B,P,q,le,de,V,b,L=this;return(0,t.Jh)(this,function(T){switch(T.label){case 0:if(C.fF.assertValue(this.scorecard,"No scorecard loaded"),B=r.q.getGoal(this.scorecard.goals,h),C.fF.assertValue(B,"goal"),P=r.q.isGoalMetadataUpdated(B,g),!B.isNew&&!P)return[2,h];if(q=(null===(u=g.metadata)||void 0===u?void 0:u.showFinalTarget)!==(null===(F=B.metadata)||void 0===F?void 0:F.showFinalTarget)||(null===(W=g.metadata)||void 0===W?void 0:W.showPercentChange)!==(null===(te=B.metadata)||void 0===te?void 0:te.showPercentChange)||!_.isEqual(null!==(U=B.cycleMetadata)&&void 0!==U?U:{},null!==(Q=g.cycleMetadata)&&void 0!==Q?Q:{}),!this.assertNoActivehierarchy(!0))return[2,h];T.label=1;case 1:return T.trys.push([1,9,,10]),le=this.scorecard,B.isNew?[4,this.goalsHttpService.createGoal(this.scorecard.groupId,this.scorecard.id,r.q.getGoalCreateRequest(g)).toPromise()]:[3,5];case 2:return de=T.sent(),g.metadata?[4,this.goalsHttpService.updateGoal(this.scorecard.groupId,this.scorecard.id,de.id,{metadata:g.metadata}).toPromise()]:[3,4];case 3:de=T.sent(),T.label=4;case 4:return[3,7];case 5:return P?[4,this.goalsHttpService.updateGoal(this.scorecard.groupId,this.scorecard.id,B.id,r.q.getGoalUpdateRequest(g)).toPromise()]:[3,7];case 6:de=T.sent(),T.label=7;case 7:return this.assertScorecardLoaded(le)?[4,this.getOwnerDisplayNames(B)]:[2];case 8:return V=T.sent(),this.scorecard=(0,N.Uy)(this.scorecard,function(X){var ue=r.q.getGoal(X.goals,h);L.assignGoal(ue,de),ue.isNew=!1,ue.ownerDisplayNames=V}),h=de.id,[3,10];case 9:throw b=T.sent(),this.goalsErrorService.showUserError(b,"SaveGoalError"),b;case 10:return q?[4,this.refreshGoal(h)]:[3,12];case 11:return T.sent(),[3,13];case 12:this.commit(),T.label=13;case 13:return[2,h]}})})},oe.prototype.moveGoal=function(h,g,u){var F;return(0,t.mG)(this,void 0,void 0,function(){var W,te,U,Q,q,le;return(0,t.Jh)(this,function(de){switch(de.label){case 0:return C.fF.assertValue(this.scorecard,"No scorecard loaded"),C.fF.assertValue(this.scorecard.goals,"Scorecard should have at least one goal to move"),this.assertNoActivehierarchy()?(W=r.q.getGoal(this.scorecard.goals,h),C.fF.assertValue(W,"Source goal does not exist"),te=r.q.computeGoalHeight(W),U=u?r.q.getGoal(this.scorecard.goals,u):void 0,C.fF.assertValue(!u||U,"Destination parent goal does not exist"),Q=U?r.q.computeGoalLevel(this.scorecard.goals,U):void 0,(_.isNil(Q)?te:te+Q+1)>d.gT.MaxSubGoals?[4,this.dialogService.showSimpleInfoDialog({title:this.localizationService.get("MetricCannotBeMovedTitle"),message:this.localizationService.format("MetricCannotBeMovedMessage",d.gT.MaxSubGoals)},{autoFocus:!0}).afterClosed().toPromise()]:[3,2]):[2];case 1:return de.sent(),[2];case 2:q={goalToMove:{goalId:h}},this.scorecard=(0,N.Uy)(this.scorecard,function(V){var b,L,T,X,ue=r.q.getGoal(V.goals,h);q.goalToMove.currentParentId=null!==(b=ue.parentId)&&void 0!==b?b:void 0;var Ne=ue.parentId?r.q.getGoal(V.goals,ue.parentId):void 0;ue.parentId&&!Ne||_.remove(ue.parentId?Ne.subGoals:V.goals,function(dt){return dt.id===ue.id});var Xe=u?r.q.getGoal(V.goals,u):void 0;Xe&&(q.newParent={goalId:Xe.id,currentParentId:null!==(L=Xe.parentId)&&void 0!==L?L:void 0});var it=Xe?Xe.subGoals:V.goals;if(it){var ut=g?it.findIndex(function(dt){return dt.id===g}):it.length;C.fF.assertValue(-1!==ut,"Destination next goal does not exist");var ot=ut-1>=0?it[ut-1]:void 0;ot&&(q.newPrevious={goalId:ot.id,currentParentId:null!==(T=ot.parentId)&&void 0!==T?T:void 0});var pt=ut<it.length?it[ut]:void 0;C.fF.assertValue(!pt||pt.parentId===u,"Destination next goal parent should be the same as the destination parent goal"),pt&&(q.newNext={goalId:pt.id,currentParentId:null!==(X=pt.parentId)&&void 0!==X?X:void 0}),it.splice(ut,0,ue);var Ye=0;it.forEach(function(dt){dt.rank=Ye,Ye++})}else ue.rank=0,Xe.subGoals=[ue];return ue.parentId=u,ue.state="Saving",V}),this.loading$.next(this.loading$.value+1),this.commit(),de.label=3;case 3:return de.trys.push([3,6,10,11]),[4,this.pollingService.refreshRollupsAfterMove(q)];case 4:return de.sent(),[4,this.goalsHttpService.moveGoal(this.scorecard.groupId,this.scorecard.id,q).toPromise()];case 5:return de.sent(),this.setGoalState(h,"Consumption"),[3,11];case 6:return le=de.sent(),(null===(F=le?.error)||void 0===F?void 0:F.code)!==y.CircularRelationshipsNotAllowed?[3,8]:[4,this.loadScorecard(this.scorecard.groupId,this.scorecard.id,!0)];case 7:return de.sent(),this.dialogService.showSimpleDialog(this.localizationService.get("Unable_to_move_metric"),this.localizationService.get("Metrics_Circular_Relationships_Not_Allowed")),[3,9];case 8:throw this.goalsErrorService.showUserError(le,"MoveGoalError"),le;case 9:return[3,11];case 10:return this.loading$.next(this.loading$.value-1),[7];case 11:return[2]}})})},oe.prototype.refreshGoal=function(h){return(0,t.mG)(this,void 0,void 0,function(){var g,u,F,W,te=this;return(0,t.Jh)(this,function(U){switch(U.label){case 0:C.fF.assertValue(this.scorecard,"No scorecard loaded"),U.label=1;case 1:return U.trys.push([1,4,,5]),g=this.scorecard,[4,this.goalsHttpService.getGoal(this.scorecard.groupId,this.scorecard.id,h,!1,this.scorecard.hierarchyPaths).toPromise()];case 2:return u=U.sent(),this.assertScorecardLoaded(g)?[4,this.getOwnerDisplayNames(u)]:[2];case 3:return F=U.sent(),this.scorecard=(0,N.Uy)(this.scorecard,function(Q){var B=r.q.getGoal(Q.goals,h);te.assignGoal(B,u),B.ownerDisplayNames=F}),[3,5];case 4:throw W=U.sent(),this.goalsErrorService.showUserError(W,"RefreshGoalError"),W;case 5:return this.commit(),[2]}})})},oe.prototype.saveGoalValue=function(h,g){var u,F;return(0,t.mG)(this,void 0,void 0,function(){var W,te,U,Q,B,P;return(0,t.Jh)(this,function(q){switch(q.label){case 0:return C.fF.assertValue(this.scorecard,"No scorecard loaded"),[4,this.expandGoalValues(h)];case 1:q.sent(),W=r.q.getGoal(this.scorecard.goals,h),C.fF.assertValue(W,"goal"),te=_.find(W.goalValues,function(le){return new Date(le.timestamp).getTime()===new Date(g.timestamp).getTime()}),C.fF.assert(function(){return!W.valueConnection||_.isNil(g.value)},"Value cannot be updated when it is connected to data"),C.fF.assert(function(){return!W.targetConnection||_.isNil(g.target)},"Target cannot be updated when it is connected to data"),W.hasStatusRules&&(g.status=null),q.label=2;case 2:return q.trys.push([2,9,15,16]),this.loading$.next(this.loading$.value+1),[4,this.pollingService.refreshRollups(W,[g])];case 3:return q.sent(),U=this.scorecard,te?[4,this.goalsHttpService.updateGoalValue(this.scorecard.groupId,this.scorecard.id,h,new Date(g.timestamp).toISOString(),r.q.getGoalValueUpdateRequest(g),this.scorecard.hierarchyPaths).toPromise()]:[3,5];case 4:return Q=q.sent(),this.assertScorecardLoaded(U)?(this.scorecard=(0,N.Uy)(this.scorecard,function(le){var de=r.q.getGoal(le.goals,h);C.fF.assertValue(de,"Goal not found");var V=_.find(de.goalValues,function(b){return new Date(b.timestamp).getTime()===new Date(Q.timestamp).getTime()});C.fF.assertValue(V,"Goal value not found"),Object.assign(V,Q)}),[3,7]):[2];case 5:return[4,this.goalsHttpService.createGoalValue(this.scorecard.groupId,this.scorecard.id,h,r.q.getGoalValueCreateRequest(g),this.scorecard.hierarchyPaths).toPromise()];case 6:if(B=q.sent(),!this.assertScorecardLoaded(U))return[2];this.scorecard=(0,N.Uy)(this.scorecard,function(le){var de=r.q.getGoal(le.goals,h);C.fF.assertValue(de,"Goal not found"),de.goalValues?de.goalValues.push(B):de.goalValues=[B]}),q.label=7;case 7:return[4,this.refreshGoal(h)];case 8:return q.sent(),[3,16];case 9:if(P=q.sent(),(null===(u=P?.error)||void 0===u?void 0:u.code)!==y.ManuallyUpdatingConnectedGoalValueNotAllowed&&(null===(F=P?.error)||void 0===F?void 0:F.code)!==y.ManuallyUpdatingConnectedMetricValueNotAllowed)return[3,10];throw this.errorService.errorNoDefaultAdditionalErrorInfo(this.localizationService.get("Updating_Connected_MetricValue_Not_Allowed"),"Not_Allowed",{title:this.localizationService.get("Operation_Not_Allowed"),level:ye.U.Information,isDismissable:!0,showAdditionalErrorInfo:!1}),P;case 10:return te||409!==P?.status?[3,13]:(this.errorService.errorNoDefaultAdditionalErrorInfo(this.localizationService.get("Metrics_Existing_Checkin_Found"),"Checkin_Exists",{title:this.localizationService.get("Metrics_Existing_Checkin_Found_Title"),level:ye.U.Information,isDismissable:!0,showAdditionalErrorInfo:!1,hideGetHelpLink:!0}),[4,this.refreshGoal(h)]);case 11:return q.sent(),[4,this.expandGoalValues(h,!0)];case 12:return q.sent(),[3,14];case 13:throw this.goalsErrorService.showUserError(P,"SaveGoalValueError"),P;case 14:return[3,16];case 15:return this.loading$.next(this.loading$.value-1),[7];case 16:return this.commit(),[2]}})})},oe.prototype.expandGoalValues=function(h,g){return void 0===g&&(g=!1),(0,t.mG)(this,void 0,void 0,function(){var u,F,W,te;return(0,t.Jh)(this,function(U){switch(U.label){case 0:if(C.fF.assertValue(this.scorecard,"No scorecard loaded"),this.scorecard.isSample)return[2];if(u=r.q.getGoal(this.scorecard.goals,h),C.fF.assertValue(u,"goal"),!u||u.isExpanded&&!g)return[2];U.label=1;case 1:return U.trys.push([1,3,4,5]),this.loading$.next(this.loading$.value+1),F=this.scorecard,[4,this.goalsHttpService.getGoalValues(this.scorecard.groupId,this.scorecard.id,u.id,!0,this.scorecard.hierarchyPaths).toPromise()];case 2:return W=U.sent(),this.assertScorecardLoaded(F)?(this.scorecard=(0,N.Uy)(this.scorecard,function(Q){var B=r.q.getGoal(Q.goals,h);C.fF.assertValue(B,"goal"),B.goalValues=W,B.isExpanded=!0}),this.commit(),[3,5]):[2];case 3:throw te=U.sent(),this.goalsErrorService.showUserError(te,"ExpandGoalValues"),te;case 4:return this.loading$.next(this.loading$.value-1),[7];case 5:return[2]}})})},oe.prototype.upsertGoalValues=function(h,g){return(0,t.mG)(this,void 0,void 0,function(){var u,F,W;return(0,t.Jh)(this,function(te){switch(te.label){case 0:if(!this.assertNoActivehierarchy(!0))return[2];u=r.q.getGoal(this.scorecard.goals,h),C.fF.assertValue(u,"goal"),te.label=1;case 1:return te.trys.push([1,5,6,7]),this.loading$.next(this.loading$.value+1),[4,this.pollingService.refreshRollups(u,g)];case 2:return te.sent(),[4,this.goalsHttpService.upsertGoalValues(this.scorecard.groupId,this.scorecard.id,h,g).toPromise()];case 3:return F=te.sent(),[4,this.refreshGoal(h)];case 4:return te.sent(),this.scorecard=(0,N.Uy)(this.scorecard,function(U){var Q=r.q.getGoal(U.goals,h);Q.goalValues=F,Q.isExpanded=!0}),this.commit(),[3,7];case 5:throw W=te.sent(),this.goalsErrorService.showUserError(W,"UpsertGoalValues"),W;case 6:return this.loading$.next(this.loading$.value-1),[7];case 7:return[2]}})})},oe.prototype.overwriteMultipleGoalValues=function(h,g){var u,F;return(0,t.mG)(this,void 0,void 0,function(){var W,te,U,Q,B;return(0,t.Jh)(this,function(P){switch(P.label){case 0:return this.assertNoActivehierarchy(!0)?[4,this.expandGoalValues(h)]:[2];case 1:return P.sent(),te=r.q.getGoal(this.scorecard.goals,h),U=null!==(F=null===(u=te.goalValues)||void 0===u?void 0:u.filter(function(q){return!_.isNil(q.value)}).map(function(q){return{timestamp:q.timestamp,value:q.value}}))&&void 0!==F?F:[],Q=g.map(function(q){return{timestamp:q.timestamp,value:q.value}}),(W=E.B.calculateGoalValueChanges(U,Q)).length>0?(B=W.map(function(q){return{timestamp:q.timestamp,value:q.value}}),[4,this.upsertGoalValues(h,B)]):[3,3];case 2:P.sent(),P.label=3;case 3:return[2]}})})},oe.prototype.overwriteGoalTargets=function(h,g){var u,F;return(0,t.mG)(this,void 0,void 0,function(){var W,te,U,Q,B;return(0,t.Jh)(this,function(P){switch(P.label){case 0:return this.assertNoActivehierarchy(!0)?[4,this.expandGoalValues(h)]:[2];case 1:return P.sent(),W=r.q.getGoal(this.scorecard.goals,h),te=null!==(F=null===(u=W.goalValues)||void 0===u?void 0:u.filter(function(q){return!_.isNil(q.target)}).map(function(q){return{timestamp:q.timestamp,value:q.target}}))&&void 0!==F?F:[],U=g.map(function(q){return{timestamp:q.timestamp,value:q.target}}),(Q=E.B.calculateGoalValueChanges(te,U)).length>0?(B=Q.map(function(q){return{timestamp:q.timestamp,target:q.value}}),[4,this.upsertGoalValues(h,B)]):[3,3];case 2:P.sent(),P.label=3;case 3:return[2]}})})},oe.prototype.followGoal=function(h){return(0,t.mG)(this,void 0,void 0,function(){var g;return(0,t.Jh)(this,function(u){switch(u.label){case 0:if(!this.assertNoActivehierarchy(!0))return[2];if(r.q.isSampleScorecard(this.scorecard))return[2];C.fF.assertValue(this.scorecard,"No scorecard loaded"),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,this.goalsHttpService.followGoal(this.scorecard.groupId,this.scorecard.id,h).toPromise()];case 2:return u.sent(),this.scorecard=(0,N.Uy)(this.scorecard,function(F){var W=r.q.getGoal(F.goals,h);C.fF.assertValue(W,"Goal not found"),W.isFollowed=!0}),this.commit(),[3,4];case 3:throw g=u.sent(),this.goalsErrorService.showUserError(g,"Follow Metric Error"),g;case 4:return[2]}})})},oe.prototype.unfollowGoal=function(h){return(0,t.mG)(this,void 0,void 0,function(){var g;return(0,t.Jh)(this,function(u){switch(u.label){case 0:if(!this.assertNoActivehierarchy(!0))return[2];if(r.q.isSampleScorecard(this.scorecard))return[2];C.fF.assertValue(this.scorecard,"No scorecard loaded"),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,this.goalsHttpService.unfollowGoal(this.scorecard.groupId,this.scorecard.id,h).toPromise()];case 2:return u.sent(),this.scorecard=(0,N.Uy)(this.scorecard,function(F){var W=r.q.getGoal(F.goals,h);C.fF.assertValue(W,"Goal not found"),W.isFollowed=!1}),this.commit(),[3,4];case 3:throw g=u.sent(),this.goalsErrorService.showUserError(g,"Unfollow Metric Error"),g;case 4:return[2]}})})},oe.prototype.editNote=function(h,g,u,F){return(0,t.mG)(this,void 0,void 0,function(){var W,te,U;return(0,t.Jh)(this,function(Q){switch(Q.label){case 0:C.fF.assertValue(this.scorecard,"No scorecard loaded"),Q.label=1;case 1:return Q.trys.push([1,3,,4]),W=this.scorecard,[4,this.goalsHttpService.editNote(this.scorecard.groupId,this.scorecard.id,h,u,g,F,this.scorecard.hierarchyPaths).toPromise()];case 2:return te=Q.sent(),this.assertScorecardLoaded(W)?(this.scorecard=(0,N.Uy)(this.scorecard,function(B){var P=r.q.getGoal(B.goals,h);C.fF.assertValue(P,"Goal not found");var q=_.find(P.goalValues,function(de){return new Date(de.timestamp).getTime()===new Date(g).getTime()});if(C.fF.assertValue(q,"Goal value not found"),!_.isEmpty(q)){var le=q.notes.findIndex(function(de){return de.id===u});C.fF.assertValue(q.notes,"Goal note not found"),q.notes[le]=te}}),this.commit(),[3,4]):[2];case 3:throw U=Q.sent(),this.goalsErrorService.showUserError(U,"EditGoalNoteError"),U;case 4:return[2]}})})},oe.prototype.insertNote=function(h,g,u){return(0,t.mG)(this,void 0,void 0,function(){var F,W,te;return(0,t.Jh)(this,function(U){switch(U.label){case 0:C.fF.assertValue(this.scorecard,"No scorecard loaded"),U.label=1;case 1:return U.trys.push([1,3,,4]),F=this.scorecard,[4,this.goalsHttpService.insertNote(this.scorecard.groupId,this.scorecard.id,h,g,u,this.scorecard.hierarchyPaths).toPromise()];case 2:return W=U.sent(),this.assertScorecardLoaded(F)?(this.scorecard=(0,N.Uy)(this.scorecard,function(Q){var B=r.q.getGoal(Q.goals,h);C.fF.assertValue(B,"Goal not found");var P=_.find(B.goalValues,function(q){return new Date(q.timestamp).getTime()===new Date(g).getTime()});C.fF.assertValue(P,"Goal value not found"),B.notesCount=_.isFinite(B.notesCount)?B.notesCount+1:1,P.notes=(0,t.ev)((0,t.ev)([],P.notes||[],!0),[W],!1)}),this.commit(),[3,4]):[2];case 3:throw te=U.sent(),this.goalsErrorService.showUserError(te,"InsertGoalNoteError"),te;case 4:return[2]}})})},oe.prototype.getGoal=function(h){return C.fF.assertValue(this.scorecard,"No scorecard loaded"),this._scorecard$.pipe((0,ge.U)(function(g){return r.q.getGoal(g.goals,h)}),(0,se.x)())},oe.prototype.getGoals=function(){return C.fF.assertValue(this.scorecard,"No scorecard loaded"),this._scorecard$.pipe((0,ge.U)(function(h){return h.goals}))},oe.prototype.getActiveGoal=function(){var h=this;return this._activeGoalId$.pipe((0,Oe.w)(function(g){return g?h.getGoal(g):(0,k.of)(void 0)}))},oe.prototype.getActiveGoalId=function(){return this._activeGoalId$},oe.prototype.deleteNote=function(h){var g=this;return this.promptUserConfirmation({title:this.localizationService.get("ScorecardDialog_Delete_Note_Title"),message:this.localizationService.get("ScorecardDialog_Action_Cant_be_Undone"),panelClass:["updateDeleteNoteConfirmationDialogPanel"],onConfirmation:function(){return(0,t.mG)(g,void 0,void 0,function(){return(0,t.Jh)(this,function(F){switch(F.label){case 0:return[4,this.deleteNoteRequest(h)];case 1:return F.sent(),[2,!0]}})})}})},oe.prototype.deleteNoteRequest=function(h){return(0,t.mG)(this,void 0,void 0,function(){var g,u;return(0,t.Jh)(this,function(F){switch(F.label){case 0:C.fF.assertValue(this.scorecard,"No scorecard loaded"),g=this.scorecard,F.label=1;case 1:return F.trys.push([1,3,,4]),[4,this.goalsHttpService.deleteNote(this.scorecard.groupId,this.scorecard.id,h.goalId,h.id,h.valueTimestamp,this.scorecard.hierarchyPaths).toPromise()];case 2:return F.sent(),[3,4];case 3:if(u=F.sent(),404!==u?.status)throw this.goalsErrorService.showUserError(u,"DeleteGoalNoteError"),u;return[3,4];case 4:return this.assertScorecardLoaded(g)?(this.scorecard=(0,N.Uy)(this.scorecard,function(W){var te=r.q.getGoal(W.goals,h.goalId);if(C.fF.assertValue(te,"Goal not found"),!_.isEmpty(te.goalValues)){var U=_.find(te.goalValues,function(Q){return new Date(Q.timestamp).getTime()===new Date(h.valueTimestamp).getTime()});U.notes=_.filter(U.notes,function(Q){return Q.id!==h.id})}te.notesCount=null==te.notesCount?0:te.notesCount-1}),this.commit(),[2]):[2]}})})},oe.prototype.deleteGoal=function(h){return(0,t.mG)(this,void 0,void 0,function(){var g,u,F,W,te=this;return(0,t.Jh)(this,function(U){switch(U.label){case 0:return this.assertNoActivehierarchy()?[4,this.getGoal(h).pipe((0,ee.q)(1)).toPromise()]:[2];case 1:return g=U.sent(),u=!_.isEmpty(g.subGoals),F=this.localizationService.get(g.isLinked?u?"ScorecardDialog_Delete_Metric_Title_Linked":"ScorecardDialog_Delete_Metric_Title_Linked_Submetrics":u?"ScorecardDialog_Delete_Metric_Title":"ScorecardDialog_Delete_Metric_Title_Submetrics"),W=g.isLinked?this.localizationService.get("ScorecardDialog_Delete_Metric_Message_Linked")+(u?this.localizationService.get("ScorecardDialog_Delete_Metric_Message_Linked_Submetrics"):""):this.localizationService.get("ScorecardDialog_Delete_Metric_Message_First_Line"),[2,this.promptUserConfirmation({title:F,message:W,panelClass:["updateConfirmationDialogPanel"],onConfirmation:function(){return(0,t.mG)(te,void 0,void 0,function(){return(0,t.Jh)(this,function(B){switch(B.label){case 0:return[4,this.pollingService.refreshRollupsAfterGoalDelete(g)];case 1:return B.sent(),[4,this.deleteGoalRequest(h)];case 2:return B.sent(),[2,!0]}})})}})]}})})},oe.prototype.applySortAndFilter=function(h,g){return(0,t.mG)(this,void 0,void 0,function(){var u=this;return(0,t.Jh)(this,function(F){switch(F.label){case 0:return this.scorecard?[4,this.ensureUsersLoaded()]:[2];case 1:return F.sent(),this.scorecard=(0,N.Uy)(this.scorecard,function(W){W.goals=w.p.sortAndFilter(W.goals,h,u._goalStatusesByScorecardId$.value,g)}),this.commit(),[2]}})})},oe.prototype.deleteGoalRequest=function(h){return(0,t.mG)(this,void 0,void 0,function(){var g,u;return(0,t.Jh)(this,function(F){switch(F.label){case 0:if(!this.assertNoActivehierarchy())return[2];if(C.fF.assertValue(this.scorecard,"No scorecard loaded"),g=r.q.getGoal(this.scorecard.goals,h),C.fF.assertValue(g,"Goal not found"),g.isNew)return[3,4];F.label=1;case 1:return F.trys.push([1,3,,4]),this.setGoalState(h,"Deleting"),[4,this.goalsHttpService.deleteGoal(this.scorecard.groupId,this.scorecard.id,g.id).toPromise()];case 2:return F.sent(),[3,4];case 3:if(u=F.sent(),404!==u?.status)throw this.goalsErrorService.showUserError(u,"DeleteGoalError"),this.setGoalState(h,"Consumption"),u;return[3,4];case 4:return this.scorecard=(0,N.Uy)(this.scorecard,function(W){var te=r.q.getGoal(W.goals,g.parentId);te?.subGoals?te.subGoals=te.subGoals.filter(function(U){return U.id!==h}):W.goals&&(W.goals=W.goals.filter(function(U){return U.id!==h}))}),this.commit(),[2]}})})},oe.prototype.deleteGoalValue=function(h){var g=this;return this.promptUserConfirmation({title:this.localizationService.get("ScorecardDialog_Delete_CheckIn_Message_title"),message:"".concat(this.localizationService.get("ScorecardDialog_Delete_CheckIn_Message_First_Line"),"\n\n            ").concat(this.localizationService.get("ScorecardDialog_Action_Cant_be_Undone")),panelClass:["updateDeleteCheckInConfirmationDialogPanel"],onConfirmation:function(){return(0,t.mG)(g,void 0,void 0,function(){var F;return(0,t.Jh)(this,function(W){switch(W.label){case 0:return[4,this.getGoal(h.goalId).pipe((0,ee.q)(1)).toPromise()];case 1:return F=W.sent(),[4,this.pollingService.refreshRollupsAfterGoalValueDelete(F,h)];case 2:return W.sent(),[4,this.deleteGoalValueRequest(h)];case 3:return W.sent(),[2,!0]}})})}})},oe.prototype.deleteGoalValueRequest=function(h){return(0,t.mG)(this,void 0,void 0,function(){var g,u;return(0,t.Jh)(this,function(F){switch(F.label){case 0:C.fF.assertValue(this.scorecard,"No scorecard loaded"),g=this.scorecard,F.label=1;case 1:return F.trys.push([1,3,,4]),[4,this.goalsHttpService.deleteGoalValue(this.scorecard.groupId,this.scorecard.id,h.goalId,h.timestamp,this.scorecard.hierarchyPaths).toPromise()];case 2:return F.sent(),[3,4];case 3:if(u=F.sent(),404!==u?.status)throw this.goalsErrorService.showUserError(u,"DeleteGoalValueError"),u;return[3,4];case 4:return this.assertScorecardLoaded(g)?(this.scorecard=(0,N.Uy)(this.scorecard,function(W){var te=r.q.getGoal(W.goals,h.goalId);C.fF.assertValue(te,"Goal not found"),te.goalValues=_.filter(te.goalValues,function(U){return U.timestamp!==h.timestamp})}),[4,this.refreshGoal(h.goalId)]):[2];case 5:return F.sent(),this.commit(),[2]}})})},oe.prototype.updateGoalQueryConnection=function(h,g,u){return(0,t.mG)(this,void 0,void 0,function(){var F,te,U,Q=this;return(0,t.Jh)(this,function(B){switch(B.label){case 0:if(C.fF.assertValue(this.scorecard,"No scorecard loaded"),F=r.q.getGoal(this.scorecard.goals,h),C.fF.assertValue(F,"goal"),r.q.compareGoalQueryConnections(1===g?F.valueConnection:F.targetConnection,u))return[2];if(!this.assertNoActivehierarchy())return[2];B.label=1;case 1:return B.trys.push([1,4,,5]),[4,this.pollingService.startPollingAsync(F,g,{refreshGoal:!0,refreshGoalValues:!0,refreshRollups:!0})];case 2:return B.sent(),[4,this.goalsHttpService.updateGoalQueryConnection(this.scorecard.groupId,this.scorecard.id,h,g,(0,t.pi)((0,t.pi)({},u),{userId:this.userInfo.uoid})).toPromise()];case 3:return te=B.sent(),this.scorecard=(0,N.Uy)(this.scorecard,function(P){F=r.q.getGoal(P.goals,h),Q.assignGoal(F,te)}),this.commit(),[3,5];case 4:throw U=B.sent(),this.goalsErrorService.showUserError(U,"UpdateGoalQueryConnectionError"),U;case 5:return[2]}})})},oe.prototype.deleteGoalQueryConnection=function(h,g){return(0,t.mG)(this,void 0,void 0,function(){var u=this;return(0,t.Jh)(this,function(F){return this.assertNoActivehierarchy()?[2,this.promptUserConfirmation({title:this.localizationService.get("ScorecardDialog_Delete_Metric_Query_Connection_Title"),message:"".concat(this.localizationService.format("ScorecardDialog_Delete_Metric_Query_Connection_Message_Line_1",[this.localizationService.get(1===g?"CurrentValue":"Target")]),"\n\n            ").concat(this.localizationService.get("ScorecardDialog_Action_Cant_be_Undone")),onConfirmation:function(){return(0,t.mG)(u,void 0,void 0,function(){var te,U,Q=this;return(0,t.Jh)(this,function(B){switch(B.label){case 0:C.fF.assertValue(this.scorecard,"No scorecard loaded"),B.label=1;case 1:return B.trys.push([1,5,,6]),[4,this.goalsHttpService.deleteGoalQueryConnection(this.scorecard.groupId,this.scorecard.id,h,g).toPromise()];case 2:return te=B.sent(),this.scorecard=(0,N.Uy)(this.scorecard,function(P){var q=r.q.getGoal(P.goals,h);if(!q)throw"Goal not found";q.valueConnection=te.valueConnection,q.targetConnection=te.targetConnection,Q.assignGoal(q,te)}),[4,this.refreshGoal(h)];case 3:return B.sent(),[4,this.expandGoalValues(h)];case 4:return B.sent(),this.commit(),[3,6];case 5:throw U=B.sent(),this.goalsErrorService.showUserError(U,"DeleteGoalQueryConnectionError"),U;case 6:return[2,!0]}})})}})]:[2]})})},oe.prototype.takeOverGoalQueryConnection=function(h,g){return(0,t.mG)(this,void 0,void 0,function(){var u=this;return(0,t.Jh)(this,function(F){return this.assertNoActivehierarchy()?[2,this.promptUserConfirmation({title:this.localizationService.get("MetricsDetailsPane_ConnectionsTab_TakeOver_Confirmation_Title"),message:this.localizationService.get("MetricsDetailsPane_ConnectionsTab_TakeOver_Confirmation"),okButtonText:this.localizationService.get("MetricsDetailsPane_ConnectionsTab_TakeOver"),onConfirmation:function(){return(0,t.mG)(u,void 0,void 0,function(){var te,U,Q=this;return(0,t.Jh)(this,function(B){switch(B.label){case 0:C.fF.assertValue(this.scorecard,"No scorecard loaded"),B.label=1;case 1:return B.trys.push([1,3,,4]),[4,this.goalsHttpService.takeOverGoalQueryConnection(this.scorecard.groupId,this.scorecard.id,h,g).toPromise()];case 2:return te=B.sent(),this.scorecard=(0,N.Uy)(this.scorecard,function(P){var q=r.q.getGoal(P.goals,h);Q.assignGoal(q,te)}),this.commit(),[3,4];case 3:if(U=B.sent(),400!==U?.status)throw this.goalsErrorService.showUserError(U,"TakeOverGoalQueryConnectionError"),U;return this.errorService.errorNoDefaultAdditionalErrorInfo(this.localizationService.get("MetricsDetailsPane_ConnectionsTab_TakeOver_Error"),"TakeOverGoalQueryConnectionError",{title:this.localizationService.get("MetricsDetailsPane_ConnectionsTab_TakeOver_Error_Title"),level:ye.U.Information}),[3,4];case 4:return[2]}})})}})]:[2]})})},oe.prototype.getRefreshHistory=function(h){var g;return(0,t.mG)(this,void 0,void 0,function(){var F;return(0,t.Jh)(this,function(W){switch(W.label){case 0:if(C.fF.assertValue(this.scorecard,"No scorecard loaded"),this.scorecard.isSample)return[2,[]];if(!r.q.getGoal(null===(g=this.scorecard)||void 0===g?void 0:g.goals,h))return C.fF.assertFail("goal"),[2];W.label=1;case 1:return W.trys.push([1,3,,4]),[4,this.goalsHttpService.getRefreshHistory(this.scorecard.groupId,this.scorecard.id,h).toPromise()];case 2:return[2,W.sent()];case 3:throw F=W.sent(),this.goalsErrorService.showUserError(F,"GetRefreshHistoryError"),F;case 4:return[2]}})})},oe.prototype.refreshGoalValue=function(h,g){var u;return(0,t.mG)(this,void 0,void 0,function(){var F,W;return(0,t.Jh)(this,function(te){switch(te.label){case 0:if(C.fF.assertValue(this.scorecard,"No scorecard loaded"),!(F=r.q.getGoal(null===(u=this.scorecard)||void 0===u?void 0:u.goals,h)))return C.fF.assertFail("goal"),[2];if(1===g&&!F.valueConnection||2===g&&!F.targetConnection)return[2];te.label=1;case 1:return te.trys.push([1,4,,5]),[4,this.pollingService.startPollingAsync(F,g,{refreshGoal:!0,refreshGoalValues:!0,refreshRollups:!0})];case 2:return te.sent(),[4,this.goalsHttpService.refreshGoalValue(this.scorecard.groupId,this.scorecard.id,h,g).toPromise()];case 3:return te.sent(),this.showRefreshConfirmation(),[3,5];case 4:if(W=te.sent(),429===W?.status)return this.goalsErrorService.showThrottlingError(),this.setGoalRefreshState(h,g,!1),[2];throw this.goalsErrorService.showUserError(W,"RefreshGoalValue"),W;case 5:return[2]}})})},oe.prototype.upsertGoalValueRollup=function(h,g,u){return(0,t.mG)(this,void 0,void 0,function(){var F,W,te,U,B,P=this;return(0,t.Jh)(this,function(q){switch(q.label){case 0:if(!this.assertNoActivehierarchy())return[2];C.fF.assertValue(this.scorecard,"No scorecard loaded"),F=r.q.getGoal(this.scorecard.goals,h),C.fF.assertValue(F,"goal"),q.label=1;case 1:return q.trys.push([1,10,,11]),te=void 0,U=p.E.getCurrentLocalDay(),_.isEmpty(F.subGoals)?[3,3]:[4,this.pollingService.startPollingAsync(F,g,{refreshGoal:!0,refreshGoalValues:!0,refreshRollups:!0})];case 2:q.sent(),q.label=3;case 3:switch(te=l.r.hasHistoricalGoalValue(F.goalValues,g)?{rollupType:u,startDate:U.toISOString()}:{rollupType:u},g){case 1:return[3,4];case 2:return[3,6]}return[3,8];case 4:return[4,this.goalsHttpService.upsertGoalCurrentValueRollup(this.scorecard.groupId,this.scorecard.id,h,te).toPromise()];case 5:return W=q.sent(),[3,9];case 6:return[4,this.goalsHttpService.upsertGoalTargetValueRollup(this.scorecard.groupId,this.scorecard.id,h,te).toPromise()];case 7:return W=q.sent(),[3,9];case 8:C.fF.assertNever(g),q.label=9;case 9:return this.scorecard=(0,N.Uy)(this.scorecard,function(le){F=r.q.getGoal(le.goals,h),P.assignGoal(F,W)}),this.commit(),[3,11];case 10:throw B=q.sent(),this.goalsErrorService.showUserError(B,"upsertGoalValueRollupError"),B;case 11:return[2]}})})},oe.prototype.deleteGoalValueRollup=function(h,g){return(0,t.mG)(this,void 0,void 0,function(){var u,F,te,U=this;return(0,t.Jh)(this,function(Q){switch(Q.label){case 0:if(!this.assertNoActivehierarchy())return[2];C.fF.assertValue(this.scorecard,"No scorecard loaded"),u=r.q.getGoal(this.scorecard.goals,h),C.fF.assertValue(u,"goal"),Q.label=1;case 1:switch(Q.trys.push([1,8,,9]),g){case 1:return[3,2];case 2:return[3,4]}return[3,6];case 2:return[4,this.goalsHttpService.deleteGoalCurrentValueRollup(this.scorecard.groupId,this.scorecard.id,h).toPromise()];case 3:return F=Q.sent(),[3,7];case 4:return[4,this.goalsHttpService.deleteGoalTargetValueRollup(this.scorecard.groupId,this.scorecard.id,h).toPromise()];case 5:return F=Q.sent(),[3,7];case 6:C.fF.assertNever(g),Q.label=7;case 7:return this.scorecard=(0,N.Uy)(this.scorecard,function(B){(u=r.q.getGoal(B.goals,h)).valueRollup=F.valueRollup,u.targetRollup=F.targetRollup,U.assignGoal(u,F)}),this.commit(),[3,9];case 8:throw te=Q.sent(),this.goalsErrorService.showUserError(te,"deleteGoalValueRollupError"),te;case 9:return[2]}})})},oe.prototype.getStatusRules=function(h){var g;return(0,t.mG)(this,void 0,void 0,function(){var u,F;return(0,t.Jh)(this,function(W){switch(W.label){case 0:if(C.fF.assertValue(this.scorecard,"No scorecard loaded"),this.scorecard.isSample)return[2,null];if(!(u=r.q.getGoal(null===(g=this.scorecard)||void 0===g?void 0:g.goals,h)))return C.fF.assertFail("goal"),[2];if(!u.hasStatusRules)return[2,null];W.label=1;case 1:return W.trys.push([1,3,,4]),[4,this.goalsHttpService.getGoalStatusRules(this.scorecard.groupId,this.scorecard.id,h).toPromise()];case 2:return[2,W.sent()];case 3:throw F=W.sent(),this.goalsErrorService.showUserError(F,"GetStatusRulesError"),F;case 4:return[2]}})})},oe.prototype.saveStatusRules=function(h,g){var u,F,W,te;return(0,t.mG)(this,void 0,void 0,function(){var U,Q,B,P;return(0,t.Jh)(this,function(q){switch(q.label){case 0:return this.assertNoActivehierarchy()?(C.fF.assertValue(this.scorecard,"No scorecard loaded"),(U=r.q.getGoal(null===(u=this.scorecard)||void 0===u?void 0:u.goals,h))?!g||_.isEmpty(g.rules)?U.hasStatusRules?[4,this.goalsHttpService.deleteGoalStatusRules(this.scorecard.groupId,this.scorecard.id,h).toPromise()]:[3,4]:[3,5]:(C.fF.assertFail("goal"),[2])):[2,g];case 1:return q.sent(),this.scorecard=(0,N.Uy)(this.scorecard,function(le){(U=r.q.getGoal(le.goals,h)).hasStatusRules=!1}),this.commit(),[4,this.refreshGoal(h)];case 2:return q.sent(),[4,this.expandGoalValues(h,!0)];case 3:q.sent(),q.label=4;case 4:return[2];case 5:return q.trys.push([5,9,,10]),Q=r.q.getGoalStatusRulesUpdateRequest(g),[4,this.goalsHttpService.upsertGoalStatusRules(this.scorecard.groupId,this.scorecard.id,h,Q).toPromise()];case 6:return B=q.sent(),this.scorecard=(0,N.Uy)(this.scorecard,function(le){(U=r.q.getGoal(le.goals,h)).hasStatusRules=!0}),this.commit(),[4,this.refreshGoal(h)];case 7:return q.sent(),[4,this.expandGoalValues(h,!0)];case 8:return q.sent(),[2,B];case 9:throw P=q.sent(),400===P?.status?this.errorService.errorNoDefaultAdditionalErrorInfo(this.localizationService.get("MetricsDetailsPane_StatusRulesTab_SaveRulesError_Description"),"GetStatusRulesError",{title:this.localizationService.get("MetricsDetailsPane_StatusRulesTab_SaveRulesError"),level:ye.U.Information,isDismissable:!0,showAdditionalErrorInfo:!0,errorDetails:null===(te=null===(W=null===(F=P?.error)||void 0===F?void 0:F.details)||void 0===W?void 0:W[0])||void 0===te?void 0:te.message}):this.goalsErrorService.showUserError(P,"GetStatusRulesError"),P;case 10:return[2]}})})},oe.prototype.loadPrefetchedScorecard=function(h){return this.setScorecardWithGoals(h),this._scorecard$.asObservable()},oe.prototype.addGoal=function(){var h=this;if(this.assertNoActivehierarchy()){C.fF.assertValue(this.scorecard,"No scorecard loaded"),C.fF.assert(function(){return h.userHasWritePermissions()},"has write permissions");var g=r.q.getCurrentUser(),u=r.q.createNewGoal(g,this.scorecard.id);return this.scorecard=(0,N.Uy)(this.scorecard,function(F){if(F.goals?F.goals.push(u):F.goals=[u],-1!==F.goals.findIndex(function(U){return!_.isNil(U.rank)})){var te=0;F.goals.forEach(function(U){U.rank=te,te++})}}),this.commit(),u.id}},oe.prototype.addSubGoal=function(h,g){var u=this;void 0===g&&(g=!0),this.assertNoActivehierarchy()&&(C.fF.assertValue(this.scorecard,"No scorecard loaded"),this.scorecard=(0,N.Uy)(this.scorecard,function(F){var W=r.q.getGoal(F.goals,h);C.fF.assertValue(W,"Parent goal not found");var te=r.q.getCurrentUser(),U=r.q.createNewGoal(te,u.scorecard.id,W.id);if(W.subGoals?W.subGoals.push(U):W.subGoals=[U],g&&(F.activeGoalId=void 0,F.selectedGoalIds={}),!_.isNil(W.rank)||-1!==W.subGoals.findIndex(function(P){return!_.isNil(P.rank)})){var B=0;W.subGoals.forEach(function(P){P.rank=B,B++})}}),this.commit())},oe.prototype.updateScorecard=function(h){return(0,t.mG)(this,void 0,void 0,function(){var g,u,F,W=this;return(0,t.Jh)(this,function(te){switch(te.label){case 0:return te.trys.push([0,4,,5]),g=void 0!==h.localTimeZoneId&&h.localTimeZoneId!==this.scorecard.localTimeZoneId,[4,this.goalsHttpService.updateScorecard(this.scorecard.groupId,this.scorecard.id,h).toPromise()];case 1:return u=te.sent(),h.name&&this.store.select(I.iF).pipe((0,ee.q)(1)).subscribe(function(U){W.tabFacade.updateTab(U===W.scorecard.groupId?{id:"me##"+W.scorecard.id,title:h.name}:{id:W.scorecard.groupId+"##"+W.scorecard.id,title:h.name})}),this.scorecard=(0,N.Uy)(this.scorecard,function(U){for(var B=0,P=_.keys(h);B<P.length;B++){var q=P[B];U[q]=u[q]}}),this.commit(),g?[4,this.loadScorecard(this.scorecard.groupId,this.scorecard.id,!1,this.scorecard.hierarchyPaths)]:[3,3];case 2:te.sent(),te.label=3;case 3:return[3,5];case 4:throw F=te.sent(),this.goalsErrorService.showUserError(F,"UpdateScorecardError"),F;case 5:return[2]}})})},oe.prototype.setGoalState=function(h,g){C.fF.assertValue(this.scorecard,"No scorecard loaded"),this.scorecard=(0,N.Uy)(this.scorecard,function(u){var F=r.q.getGoal(u.goals,h);C.fF.assertValue(F,"Goal not found"),F.state=g,("Editing"===F.state||"Deleting"===F.state)&&(u.selectedGoalIds[F.id]||u.activeGoalId===F.id)&&(u.activeGoalId=void 0,"Deleting"===F.state&&delete u.selectedGoalIds[F.id])}),this.commit()},oe.prototype.cancelEditing=function(h){C.fF.assertValue(this.scorecard,"No scorecard loaded");var g=r.q.getGoal(this.scorecard.goals,h);C.fF.assertValue(g,"Goal not found"),g.isNew?this.deleteGoalRequest(h):this.setGoalState(h,"Consumption")},oe.prototype.setViewType=function(h,g){var u=this;h!==this.viewType&&(r.q.isEditing(this.scorecard)&&!g?this.promptUserConfirmation({title:this.localizationService.get("MetricsUnsavedChangesTitle"),message:this.localizationService.get("MetricsUnsavedChangesDescription_SwitchView"),okButtonText:this.localizationService.get("ModalDialogButtonText_Continue"),panelClass:["updateConfirmationDialogPanel"],onConfirmation:function(){return(0,t.mG)(u,void 0,void 0,function(){var te=this;return(0,t.Jh)(this,function(U){return r.q.filterGoals(this.scorecard.goals,function(Q){return!!Q.isNew||"Editing"===Q.state}).forEach(function(Q){return te.cancelEditing(Q.id)}),this.setViewType(h,!0),[2]})})}}):(this.telemetryService.logEvent(v.HE,{viewType:h}),"Heatmap"===h&&this.setActiveHierarchy(void 0),this._viewType$.next(h)))},Object.defineProperty(oe.prototype,"viewType",{get:function(){return this._viewType$.value},enumerable:!1,configurable:!0}),Object.defineProperty(oe.prototype,"viewType$",{get:function(){return this._viewType$},enumerable:!1,configurable:!0}),Object.defineProperty(oe.prototype,"scorecardSelectionMode",{get:function(){return this._scorecardSelectionMode$.value},enumerable:!1,configurable:!0}),Object.defineProperty(oe.prototype,"scorecardSelectionMode$",{get:function(){return this._scorecardSelectionMode$},enumerable:!1,configurable:!0}),oe.prototype.setEditMode=function(h){this.isEditMode$.next(h),!h&&this.scorecard&&_.some(this.scorecard.goals)&&(this.scorecard=(0,N.Uy)(this.scorecard,function(g){(function F(W,te){for(var U,Q=function(de){de.isNew&&(W?W.subGoals=W.subGoals.filter(function(V){return V.id!==de.id}):g.goals=g.goals.filter(function(V){return V.id!==de.id})),de.state="Consumption",(null===(U=de.subGoals)||void 0===U?void 0:U.length)>0&&F(de,de.subGoals)},B=0,P=te;B<P.length;B++)Q(P[B])})(null,g.goals),g.activeGoalId=void 0,g.selectedGoalIds={}}),this.commit())},oe.prototype.isEditMode=function(){return this.isEditMode$.asObservable()},oe.prototype.isLoading=function(){return this.loading$.pipe((0,ge.U)(function(h){return h>0}))},oe.prototype.getColumnSettings=function(){return this._scorecard$.pipe((0,ge.U)(function(h){return h.columnSettings}))},oe.prototype.setGoalRefreshState=function(h,g,u){this.scorecard=(0,N.Uy)(this.scorecard,function(F){var W=r.q.getGoal(F.goals,h);switch(g){case 1:W.currentRefreshInProgress=u;break;case 2:W.targetRefreshInProgress=u;break;default:C.fF.assertNever(g)}}),this.commit()},oe.prototype.fetchUserDetails=function(h){return(0,t.mG)(this,void 0,void 0,function(){var g;return(0,t.Jh)(this,function(u){return g=_.chain(h).map(function(F){return _.concat(_.map(F.additionalOwners,function(W){var te;return null!==(te=W?.userPrincipalName)&&void 0!==te?te:W?.aadAppId}),F.owner)}).flattenDeep().filter(function(F){return!!F}).uniq().value(),[2,this.userDetailsService.getUserDetails(g).toPromise()]})})},oe.prototype.populateUserDisplayNames=function(h,g){if(!_.isEmpty(h)&&!_.isEmpty(g)){for(var u={},F=0,W=h;F<W.length;F++){var te=W[F];u[te.userPrincipalName]=te,u[te.aadAppId]=te}for(var U=0,Q=g;U<Q.length;U++){var B=Q[U],P=_.concat([B.owner],_.map(B.additionalOwners,function(q){var le;return null!==(le=q?.userPrincipalName)&&void 0!==le?le:q?.aadAppId}));B.ownerDisplayNames=_.map(P,function(q){return u[q]?u[q].displayName:q})}}},oe.prototype.toggleSelectedGoal=function(h,g,u){var F=this;return void 0===g&&(g=!0),void 0===u&&(u=!1),C.fF.assertValue(this.scorecard,"No scorecard loaded"),this.scorecard=(0,N.Uy)(this.scorecard,function(W){var te,U=r.q.getGoal(W.goals,h);C.fF.assertValue(U,"Goal not found"),!U.isNew&&(W.activeGoalId=void 0,F.numberOfSelectedGoals()>1||u?(u||(g&&(W.activeGoalId=h),W.selectedGoalIds={}),W.selectedGoalIds[h]||"Deleting"===U.state?delete W.selectedGoalIds[h]:W.selectedGoalIds[h]=!0):W.selectedGoalIds[h]||"Deleting"===U.state?W.selectedGoalIds={}:(g&&(W.activeGoalId=h),W.selectedGoalIds=((te={})[h]=!0,te)))}),this.commit(),this.scorecard.selectedGoalIds[h]},oe.prototype.setActiveGoal=function(h){C.fF.assertValue(this.scorecard,"No scorecard loaded"),this.scorecard=(0,N.Uy)(this.scorecard,function(g){g.activeGoalId=h}),this.commit()},oe.prototype.selectGoal=function(h,g){void 0===g&&(g=!0),C.fF.assertValue(this.scorecard,"No scorecard loaded");var u=r.q.getGoal(this.scorecard.goals,h);C.fF.assertValue(u,"Goal not found"),!u.isNew&&!this.scorecard.selectedGoalIds[h]&&"Deleting"!==u.state&&(this.scorecard=(0,N.Uy)(this.scorecard,function(F){var W;g&&(F.activeGoalId=h),F.selectedGoalIds=((W={})[h]=!0,W)}),this.commit())},oe.prototype.multiSelectGoal=function(h){C.fF.assertValue(this.scorecard,"No scorecard loaded");var g=r.q.getGoal(this.scorecard.goals,h);C.fF.assertValue(g,"Goal not found"),!g.isNew&&this.scorecard.selectedGoalIds[h]&&"Deleting"!==g.state&&(this.scorecard=(0,N.Uy)(this.scorecard,function(u){u.selectedGoalIds[h]=!0}),this.commit())},oe.prototype.toggleSelectAllGoals=function(){var h=this;C.fF.assertValue(this.scorecard,"No scorecard loaded"),this.scorecard=(0,N.Uy)(this.scorecard,function(g){g.selectedGoalIds={};var u=r.q.filterGoals(g.goals,function(U){return!U.isNew&&(!h.scorecardHost||h.scorecardHost.canSelectGoal(U).enabled)});if(u.length!==h.numberOfSelectedGoals())for(var F=0,W=u;F<W.length;F++)g.selectedGoalIds[W[F].id]=!0}),this.commit()},oe.prototype.unselectAllGoals=function(){C.fF.assertValue(this.scorecard,"No scorecard loaded"),this.scorecard=(0,N.Uy)(this.scorecard,function(h){h.activeGoalId=void 0,h.selectedGoalIds={}}),this.commit()},oe.prototype.getSelectedGoalIdsObservable=function(){return this._selectedGoalIds$},oe.prototype.getSelectedGoalsObservable=function(){var h=this;return this._selectedGoalIds$.pipe((0,ge.U)(function(g){return r.q.filterGoals(h.scorecard.goals,function(F){return g[F.id]&&!F.isNew})}))},oe.prototype.getFirstSelectedGoalId=function(){if(this.numberOfSelectedGoals()>0)return Object.keys(this.scorecard.selectedGoalIds)[0]},oe.prototype.numberOfSelectedGoals=function(){return _.isNil(this.scorecard.selectedGoalIds)?0:Object.keys(this.scorecard.selectedGoalIds).length},oe.prototype.isCurrentlyInEditMode=function(){return this.isEditMode$.value},oe.prototype.getCurrentScorecard=function(){return this.scorecard},oe.prototype.getScorecard=function(){return this._scorecard$.asObservable()},oe.prototype.flatten=function(){return r.q.flattenGoals(this.scorecard.goals)},oe.prototype.getBoard=function(){return this._scorecard$.pipe((0,ge.U)(function(h){return h.board}))},oe.prototype.addGroupToBoard=function(h,g){var u={id:h,name:g,goals:[]};this.scorecard=(0,N.Uy)(this.scorecard,function(F){_.isUndefined(F.board)&&(F.board={id:"",groups:[]}),F.board.id="boardVisual",F.board.groups.push(u)}),this.commit()},oe.prototype.deleteGroupFromBoard=function(h){this.scorecard=(0,N.Uy)(this.scorecard,function(g){g.board.groups=g.board.groups.filter(function(u){return u.id!==h})}),this.commit()},oe.prototype.isEditing=function(){return this._scorecard$.pipe((0,ge.U)(function(h){return r.q.isEditing(h)}))},oe.prototype.ensureRolesLoaded=function(){return(0,t.mG)(this,void 0,void 0,function(){var h,g;return(0,t.Jh)(this,function(u){switch(u.label){case 0:if(C.fF.assertValue(this.scorecard,"No scorecard loaded"),!_.isEmpty(this.scorecard.roles))return[2];u.label=1;case 1:return u.trys.push([1,6,,7]),[4,this.goalsHttpService.getRoles(this.scorecard.groupId,this.scorecard.id).toPromise()];case 2:return h=u.sent(),_.isEmpty(h)?[4,this.initStartingRoles()]:[3,4];case 3:return u.sent(),[3,5];case 4:this.scorecard=(0,N.Uy)(this.scorecard,function(F){F.roles=h}),this.commit(),u.label=5;case 5:return[3,7];case 6:throw g=u.sent(),this.goalsErrorService.showUserError(g,"LoadRoles"),g;case 7:return[2]}})})},oe.prototype.initStartingRoles=function(){return(0,t.mG)(this,void 0,void 0,function(){var h,g,u,F=this;return(0,t.Jh)(this,function(W){switch(W.label){case 0:C.fF.assertValue(this.scorecard,"No scorecard loaded"),W.label=1;case 1:return W.trys.push([1,3,,4]),h=[{name:this.localizationService.get("EditScorecardSettings_Role_Card_Default_Role_View_All"),isDefaultRole:!0,permissions:[{goalId:void 0,permissions:1,applyToChildGoals:!0}]},{name:this.localizationService.get("EditScorecardSettings_Role_Card_Default_Role_View_And_Update_All"),isDefaultRole:!1,permissions:[{goalId:void 0,permissions:27,applyToChildGoals:!0}]}],[4,Promise.all(h.map(function(te){return F.goalsHttpService.createRole(F.scorecard.groupId,F.scorecard.id,te).toPromise()}))];case 2:return g=W.sent(),this.scorecard=(0,N.Uy)(this.scorecard,function(te){var U;_.isEmpty(te.roles)?te.roles=g:(U=te.roles).push.apply(U,g)}),this.commit(),[2,g];case 3:throw u=W.sent(),this.goalsErrorService.showUserError(u,"InitStartingRolesError"),u;case 4:return[2]}})})},oe.prototype.deleteRole=function(h){return(0,t.mG)(this,void 0,void 0,function(){var g=this;return(0,t.Jh)(this,function(u){switch(u.label){case 0:return[4,this.ensureRolesLoaded()];case 1:return u.sent(),[2,this.promptUserConfirmation({title:this.localizationService.get("ScorecardDialog_Delete_Role_Title"),message:"".concat(this.localizationService.get("ScorecardDialog_Delete_Role_Message_First_Line"),"\n\n            ").concat(this.localizationService.get("ScorecardDialog_Action_Cant_be_Undone")),panelClass:["updateConfirmationDialogPanel"],onConfirmation:function(){return(0,t.mG)(g,void 0,void 0,function(){var W,te,U;return(0,t.Jh)(this,function(Q){switch(Q.label){case 0:C.fF.assertValue(this.scorecard,"No scorecard loaded"),W=null===(U=this.scorecard.roles)||void 0===U?void 0:U.find(function(B){return B.id===h}),C.fF.assertValue(W,"Role not found"),Q.label=1;case 1:return Q.trys.push([1,3,,4]),[4,this.goalsHttpService.deleteRole(this.scorecard.groupId,this.scorecard.id,W.id).toPromise()];case 2:return Q.sent(),[3,4];case 3:throw te=Q.sent(),this.goalsErrorService.showUserError(te,"DeleteRoleError"),te;case 4:return this.scorecard=(0,N.Uy)(this.scorecard,function(B){B.roles=B.roles.filter(function(P){return P.id!==h})}),this.commit(),[2,!0]}})})}})]}})})},oe.prototype.setAsDefaultRole=function(h){var g,u,F;return(0,t.mG)(this,void 0,void 0,function(){var W,te,U,Q=this;return(0,t.Jh)(this,function(B){switch(B.label){case 0:return[4,this.ensureRolesLoaded()];case 1:return B.sent(),C.fF.assertValue(this.scorecard,"No scorecard loaded"),W=null===(g=this.scorecard.roles)||void 0===g?void 0:g.find(function(P){return P.id===h}),C.fF.assertValue(W,"Role not found"),te=null===(F=null===(u=this.scorecard.roles)||void 0===u?void 0:u.find(function(P){return P.isDefaultRole}))||void 0===F?void 0:F.name,U=W.name,[2,this.promptUserConfirmation({title:this.localizationService.get("EditScorecardSettings_Permission_Pane_Change_Default_Role_title"),message:_.isNil(te)?this.localizationService.format("EditScorecardSettings_Permission_Pane_Set_Default_Role_Message",[U]):this.localizationService.format("EditScorecardSettings_Permission_Pane_Change_Default_Role_Message",[te,U]),okButtonText:this.localizationService.get("ModalDialogButtonText_Continue"),panelClass:["updateRoleConfirmationDialogPanel"],onConfirmation:function(){return(0,t.mG)(Q,void 0,void 0,function(){var q;return(0,t.Jh)(this,function(le){switch(le.label){case 0:return le.trys.push([0,2,,3]),[4,this.goalsHttpService.updateRole(this.scorecard.groupId,this.scorecard.id,W.id,{isDefaultRole:!0}).toPromise()];case 1:return le.sent(),[3,3];case 2:throw q=le.sent(),this.goalsErrorService.showUserError(q,"UpdateRoleError"),q;case 3:return this.scorecard=(0,N.Uy)(this.scorecard,function(de){de.roles.forEach(function(V){V.isDefaultRole=V.id===h})}),this.commit(),[2,!0]}})})}})]}})})},oe.prototype.createRole=function(h){return(0,t.mG)(this,void 0,void 0,function(){var g,u;return(0,t.Jh)(this,function(F){switch(F.label){case 0:C.fF.assertValue(this.scorecard,"No scorecard loaded"),F.label=1;case 1:return F.trys.push([1,3,,4]),[4,this.goalsHttpService.createRole(this.scorecard.groupId,this.scorecard.id,h).toPromise()];case 2:return g=F.sent(),this.scorecard=(0,N.Uy)(this.scorecard,function(W){_.isEmpty(W.roles)?W.roles=[g]:W.roles.push(g)}),this.commit(),[2,g];case 3:throw u=F.sent(),this.goalsErrorService.showUserError(u,"UpdateRoleError"),u;case 4:return[2]}})})},oe.prototype.updateRole=function(h,g){var u;return(0,t.mG)(this,void 0,void 0,function(){var F,W,te;return(0,t.Jh)(this,function(U){switch(U.label){case 0:return[4,this.ensureRolesLoaded()];case 1:U.sent(),C.fF.assertValue(this.scorecard,"No scorecard loaded"),F=null===(u=this.scorecard.roles)||void 0===u?void 0:u.find(function(Q){return Q.id===h}),C.fF.assertValue(F,"Role not found"),U.label=2;case 2:return U.trys.push([2,4,,5]),[4,this.goalsHttpService.updateRole(this.scorecard.groupId,this.scorecard.id,h,g).toPromise()];case 3:return W=U.sent(),this.scorecard=(0,N.Uy)(this.scorecard,function(Q){Q.roles=Q.roles.map(function(B){return B.id===h?W:B})}),this.commit(),[2,W];case 4:throw te=U.sent(),this.goalsErrorService.showUserError(te,"UpdateRoleError"),te;case 5:return[2]}})})},oe.prototype.updateGoalValueConnectionSettings=function(h,g){return(0,t.mG)(this,void 0,void 0,function(){var u,F;return(0,t.Jh)(this,function(W){switch(W.label){case 0:C.fF.assertValue(this.scorecard,"No scorecard loaded"),u=r.q.getGoal(this.scorecard.goals,h),C.fF.assertValue(u,"Goal not found"),W.label=1;case 1:return W.trys.push([1,3,,4]),[4,this.goalsHttpService.updateConnectionSettings(this.scorecard.groupId,this.scorecard.id,h,g).toPromise()];case 2:return W.sent(),this.scorecard=(0,N.Uy)(this.scorecard,function(te){var U=r.q.getGoal(te.goals,h);U.valueConnection&&1===g.connectionType?U.valueConnection=(0,t.pi)((0,t.pi)({},U.valueConnection),{shouldClearGoalValues:g.shouldClearGoalValues}):U.targetConnection&&2===g.connectionType&&(U.targetConnection=(0,t.pi)((0,t.pi)({},U.targetConnection),{shouldClearGoalValues:g.shouldClearGoalValues}))}),this.commit(),[3,4];case 3:throw F=W.sent(),this.goalsErrorService.showUserError(F,"UpdateGoalValueConnectionSettingsError"),F;case 4:return[2]}})})},oe.prototype.setScorecardWithGoals=function(h){var g=this;this.linkedScorecardsById=_.keyBy(h.linkedScorecards,"id"),this.scorecard=(0,N.Uy)(h,function(u){var F,W;u.columnSettings=_.isEmpty(u.columnSettings)?d.om:c._.mergeColumns(u.columnSettings,d.om),c._.adjustColumnSettings(g.featureSwitches,u.columnSettings),g.featureSwitches.featureSwitches.goalsLinkedGoals?null===(F=u.goals)||void 0===F||F.forEach(function(te){return te.isLinked=l.r.isLinked(te,u)}):u.goals=_.filter(u.goals,function(te){return te.scorecardId===u.id}),u.isSample=r.q.isSampleScorecard(h),_.some(u?.goals)&&(u.goals=w.p.sort(r.q.buildGoalTree(u.goals),d.Ij)),(null===(W=g.scorecard)||void 0===W?void 0:W.id)===h.id?(u.activeGoalId=g.scorecard.activeGoalId,u.selectedGoalIds=g.scorecard.selectedGoalIds):u.selectedGoalIds={},u.showGoalTargetsInChart=!1}),this.commit()},oe.prototype.commit=function(){this._scorecard$.next(this.scorecard)},oe.prototype.ensureUsersLoaded=function(){return(0,t.mG)(this,void 0,void 0,function(){var h,g=this;return(0,t.Jh)(this,function(u){switch(u.label){case 0:return C.fF.assertValue(this.scorecard,"No scorecard loaded"),this.scorecard.usersLoaded?[2]:[4,this.fetchUserDetails(r.q.flattenGoals(this.scorecard.goals))];case 1:return h=u.sent(),this.scorecard=(0,N.Uy)(this.scorecard,function(F){g.populateUserDisplayNames(h,r.q.flattenGoals(F.goals)),F.usersLoaded=!0}),this.commit(),[2]}})})},oe.prototype.showRefreshConfirmation=function(){this.dialogService.showSimpleDialog(this.localizationService.get("Refresh_Scheduled"),this.localizationService.get("Refresh_Scheduled_Data_Will_Be_Updated"))},oe.prototype.promptUserConfirmation=function(h){var g,u;return(0,t.mG)(this,void 0,void 0,function(){return(0,t.Jh)(this,function(te){switch(te.label){case 0:return C.fF.assertValue(h,"args"),C.fF.assertValue(h.title,"args.title"),C.fF.assertValue(h.message,"args.message"),[4,this.dialogService.showConfirmationDialog({title:h.title,message:h.message,okButtonText:null!==(g=h.okButtonText)&&void 0!==g?g:this.localizationService.get("Delete"),cancelButtonText:null!==(u=h.cancelButtonText)&&void 0!==u?u:this.localizationService.get("Cancel_ButtonText")},{autoFocus:!0,panelClass:h.panelClass}).afterClosed().toPromise()];case 1:return 1===te.sent()&&h.onConfirmation?[4,h.onConfirmation()]:[3,3];case 2:return[2,te.sent()];case 3:return[2,void 0]}})})},oe.prototype.assignGoal=function(h,g){var u=h.rank;C.fF.assertValue(h,"existingGoal"),C.fF.assertValue(g,"newGoal"),Object.assign(h,g),h.cycle=g.cycle,h.cyclePeriod=g.cyclePeriod,h.rank=u,h.valuesCategoryId=g.valuesCategoryId},oe.prototype.createCategoryList=function(h){return(0,t.mG)(this,void 0,void 0,function(){var g,u;return(0,t.Jh)(this,function(F){switch(F.label){case 0:C.fF.assertValue(this.scorecard,"createCategoryList No scorecard loaded"),C.fF.assert(function(){return!_.isEmpty(h)},"createCategoryList Categorical values are empty"),F.label=1;case 1:return F.trys.push([1,3,,4]),[4,this.goalsHttpService.createGoalValueCategories(this.scorecard.groupId,this.scorecard.id,r.q.getGoalValueCategoriesCreateRequest(h)).toPromise()];case 2:return g=F.sent(),this.scorecard=(0,N.Uy)(this.scorecard,function(W){_.isUndefined(W.goalValueCategories)&&(W.goalValueCategories=[]),W.goalValueCategories.push(g)}),[3,4];case 3:throw u=F.sent(),this.goalsErrorService.showUserError(u,"SaveGoalError"),u;case 4:return this.commit(),[2,g]}})})},oe.prototype.updateCategoryList=function(h){return(0,t.mG)(this,void 0,void 0,function(){var g,u,F=this;return(0,t.Jh)(this,function(W){switch(W.label){case 0:C.fF.assertValue(this.scorecard,"updateCategoryList No scorecard loaded"),C.fF.assertValue(h,"updateCategoryList categoryList"),C.fF.assertValue(_.find(this.scorecard.goalValueCategories,function(te){return te.id===h.id}),"updateCategoryList No category list found to update"),W.label=1;case 1:return W.trys.push([1,3,,4]),[4,this.goalsHttpService.updateGoalValueCategories(this.scorecard.groupId,this.scorecard.id,h.id,r.q.getGoalValueCategoriesUpdateRequest(h)).toPromise()];case 2:return g=W.sent(),this.scorecard=(0,N.Uy)(this.scorecard,function(te){var U=_.findIndex(F.scorecard.goalValueCategories,function(Q){return Q.id===g.id});te.goalValueCategories[U]=g}),[3,4];case 3:throw u=W.sent(),this.goalsErrorService.showUserError(u,"SaveGoalError"),u;case 4:return this.commit(),[2,g]}})})},oe.prototype.deleteCategoryList=function(h){return(0,t.mG)(this,void 0,void 0,function(){var g;return(0,t.Jh)(this,function(u){switch(u.label){case 0:C.fF.assertValue(this.scorecard,"deleteCategoryList No scorecard loaded"),C.fF.assertValue(_.find(this.scorecard.goalValueCategories,function(F){return F.id===h}),"deleteCategoryList No category list found to delete."),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,this.goalsHttpService.deleteGoalValueCategories(this.scorecard.groupId,this.scorecard.id,h).toPromise()];case 2:return u.sent(),this.scorecard=(0,N.Uy)(this.scorecard,function(F){_.remove(F.goalValueCategories,function(W){return W.id===h})}),[3,4];case 3:throw g=u.sent(),this.goalsErrorService.showUserError(g,"SaveGoalError"),g;case 4:return this.commit(),[2]}})})},oe.prototype.getGoalValueCategoryLists=function(h){var g,u;return C.fF.assertValue(this.scorecard,"No scorecard loaded"),h?null!==(g=this.getSourceScorecard(h).goalValueCategories)&&void 0!==g?g:[]:null!==(u=this.scorecard.goalValueCategories)&&void 0!==u?u:[]},oe.prototype.getGoalValueCategories=function(h){var g,u;if(h.valuesCategoryId){var F=this.getGoalValueCategoryLists(h);return null!==(u=null===(g=_.find(F,function(W){return W.id===h.valuesCategoryId}))||void 0===g?void 0:g.categories)&&void 0!==u?u:[]}},Object.defineProperty(oe.prototype,"goalStatusesByScorecardId$",{get:function(){return this._goalStatusesByScorecardId$},enumerable:!1,configurable:!0}),oe.prototype.getGoalStatuses=function(h){var g,u,F,W;return C.fF.assertValue(this.scorecard,"No scorecard loaded"),h?null!==(u=null===(g=this.getSourceScorecard(h).goalStatuses)||void 0===g?void 0:g.statuses)&&void 0!==u?u:[]:null!==(W=null===(F=this.scorecard.goalStatuses)||void 0===F?void 0:F.statuses)&&void 0!==W?W:[]},oe.prototype.userHasWritePermissions=function(){var h,g=(0,i.l)(null===(h=this.scorecard)||void 0===h?void 0:h.permissions);return(0,ae.yE)(g,2)},oe.prototype.bulkDeleteGoalsPrompt=function(){return(0,t.mG)(this,void 0,void 0,function(){var h,g,u=this;return(0,t.Jh)(this,function(F){switch(F.label){case 0:return this.assertNoActivehierarchy(!0)?[4,this.getSelectedGoalsObservable().pipe((0,ee.q)(1)).toPromise()]:[2];case 1:return h=F.sent(),g=_.some(h,function(W){return W.isLinked}),[2,this.promptUserConfirmation({title:this.localizationService.format("ScorecardDialog_BulkDelete_Metric_Title",[this.numberOfSelectedGoals()]),message:this.localizationService.get(g?"ScorecardDialog_BulkDelete_Metric_Message_Linked":"ScorecardDialog_BulkDelete_Metric_Message_First_Line"),panelClass:["updateConfirmationDialogPanel"],onConfirmation:function(){return(0,t.mG)(u,void 0,void 0,function(){return(0,t.Jh)(this,function(te){switch(te.label){case 0:return[4,this.bulkDeleteGoals()];case 1:return te.sent(),[2,!0]}})})}})]}})})},oe.prototype.bulkDeleteGoals=function(){return(0,t.mG)(this,void 0,void 0,function(){var h,g=this;return(0,t.Jh)(this,function(u){switch(u.label){case 0:return this.assertNoActivehierarchy(!0)?(C.fF.assertValue(this.scorecard,"No scorecard loaded"),h=r.q.filterGoals(this.scorecard.goals,function(F){return g.scorecard.selectedGoalIds[F.id]&&!F.isNew}),[4,this.bulkDeleteGoalsRequest(h)]):[2];case 1:return u.sent(),[2]}})})},oe.prototype.bulkDeleteGoalsRequest=function(h){return(0,t.mG)(this,void 0,void 0,function(){var g,u,W,te;return(0,t.Jh)(this,function(U){switch(U.label){case 0:for(g=0,u=h;g<u.length;g++)this.setGoalState(u[g].id,"Deleting");U.label=1;case 1:return U.trys.push([1,4,,5]),W=_.map(h,"id"),_.isEmpty(W)?[3,3]:[4,this.goalsHttpService.bulkDeleteGoals(this.scorecard.groupId,this.scorecard.id,{goalIds:W}).toPromise()];case 2:U.sent(),U.label=3;case 3:return[3,5];case 4:if(te=U.sent(),404!==te?.status)throw this.goalsErrorService.showUserError(te,"BulkDeleteGoalError"),te;return[3,5];case 5:return this.scorecard=(0,N.Uy)(this.scorecard,function(Q){for(var B=function(V){var b=r.q.getGoal(Q.goals,V.parentId);b?.subGoals?b.subGoals=b.subGoals.filter(function(L){return L.id!==V.id}):Q.goals&&(Q.goals=Q.goals.filter(function(L){return L.id!==V.id}))},P=0,q=h;P<q.length;P++)B(q[P])}),this.commit(),[2]}})})},oe.prototype.bulkUpdateGoals=function(h){var g,u,F;return(0,t.mG)(this,void 0,void 0,function(){var W,te,U,Q,P,q,le,de,V,b,L,T,X,ue,Ne,Qe,Xe=this;return(0,t.Jh)(this,function(it){switch(it.label){case 0:if(!this.assertNoActivehierarchy(!0))return[2];if(C.fF.assertValue(this.scorecard,"No scorecard loaded"),C.fF.assertValue(h,"No bulk request"),(null===(g=h.goalIds)||void 0===g?void 0:g.length)<=0)return[2];for(W=h.target,delete h.target,te=0,U=h.goalIds;te<U.length;te++)this.setGoalState(T=U[te],"Saving");return Q=_.map(h.owners,function(ut){var ot;return null!==(ot=ut.userPrincipalName)&&void 0!==ot?ot:ut.aadAppId}),_.isEmpty(h.owners)?[3,2]:[4,this.userDetailsService.getUserDetails(Q).toPromise()];case 1:return P=it.sent(),[3,3];case 2:P=[],it.label=3;case 3:for(q={},le=0,de=P;le<de.length;le++)q[(V=de[le]).userPrincipalName]=V,q[V.aadAppId]=V;it.label=4;case 4:if(it.trys.push([4,10,,11]),_.isNil(W))return[3,8];b=0,L=h.goalIds,it.label=5;case 5:return b<L.length?(X=r.q.getGoal(this.scorecard.goals,T=L[b]),ue=null!==(F=null===(u=_.find(X.aggregations,function(ut){return"Target"===ut.type}))||void 0===u?void 0:u.timestamp)&&void 0!==F?F:h.timestamp,[4,this.upsertGoalValues(T,[{timestamp:ue,target:W}])]):[3,8];case 6:it.sent(),it.label=7;case 7:return b++,[3,5];case 8:return[4,this.goalsHttpService.bulkUpdateGoals(this.scorecard.groupId,this.scorecard.id,h).toPromise()];case 9:return Ne=it.sent(),this.scorecard=(0,N.Uy)(this.scorecard,function(ut){for(var ot=0,pt=Ne;ot<pt.length;ot++){var Ye=pt[ot],dt=r.q.getGoal(ut.goals,Ye.id),Ot=dt.additionalOwners;Xe.assignGoal(dt,Ye),_.isEmpty(h.owners)?dt.additionalOwners=Ot:dt.ownerDisplayNames=_.map(Q,function(Et){var Gt,K;return null!==(K=null===(Gt=q[Et])||void 0===Gt?void 0:Gt.displayName)&&void 0!==K?K:Et}),dt.state="Consumption"}}),[3,11];case 10:throw Qe=it.sent(),this.goalsErrorService.showUserError(Qe,"BulkUpdateGoalError"),Qe;case 11:return this.commit(),[2]}})})},oe.prototype.toggleShowGoalTargetsInChart=function(h){this.scorecard=(0,N.Uy)(this.scorecard,function(g){g.showGoalTargetsInChart=h}),this.commit()},oe.prototype.createLinkedGoals=function(h,g){return(0,t.mG)(this,void 0,void 0,function(){var u,F,W,te,U,Q,B,P;return(0,t.Jh)(this,function(q){switch(q.label){case 0:if(_.isEmpty(h))return[2];u=new Set(r.q.mapGoals(this.scorecard.goals,function(le){return le.id})),F=new Set,(W=h.length)>1&&(te=this.dialogService.showSimpleWaitDialog(this.localizationService.format("Metrics_LinkedMetrics_Linking",W),W>100?this.localizationService.get("This_Might_Take_A_Moment"):"")),U=0,q.label=1;case 1:if(!(U<W))return[3,9];if(u.has((Q=h[U]).id))return C.fF.assertFail("Selected goal to link already exists on this scorecard."),[3,8];(B=Q.parentId)&&!F.has(B)&&(C.fF.assertFail("Attempting to link goal with parentId ".concat(B," without having linked parent.")),B=void 0),q.label=2;case 2:return q.trys.push([2,4,,8]),[4,this.goalsHttpService.createLinkedGoals(this.scorecard.groupId,this.scorecard.id,{goalIds:[Q.id],scorecardId:Q.scorecardId,parentGoalId:B??g}).toPromise()];case 3:return q.sent(),F.add(Q.id),[3,8];case 4:return 429!==(P=q.sent()).status?[3,6]:[4,new Promise(function(le){return setTimeout(le,5e3)})];case 5:return q.sent(),U--,[3,7];case 6:return this.goalsErrorService.showUserError(P,"CreateLinkedGoalsError","Metrics_LinkedMetrics_Error"),[3,9];case 7:return[3,8];case 8:return U++,[3,1];case 9:return this.loadScorecard(this.scorecard.groupId,this.scorecard.id,!0,this.scorecard.hierarchyPaths),te?.close(),[2]}})})},oe.prototype.getSourceScorecard=function(h){if(h.isLinked){var g=this.linkedScorecardsById[h.scorecardId];if(g)return g;C.fF.assertFail("No linked scorecard with id "+h.scorecardId)}return this.scorecard},oe.prototype.openLinkedSourceScorecard=function(h){C.fF.assert(function(){return h.isLinked},"Goal is not linked");var g=this.getSourceScorecard(h);this.scorecardHost.openScorecard(g,h)},oe.prototype.getOwnerDisplayNames=function(h){return(0,t.mG)(this,void 0,void 0,function(){var g,u,F;return(0,t.Jh)(this,function(W){switch(W.label){case 0:return g=_.concat([h.owner],_.map(h.additionalOwners,function(te){var U;return null!==(U=te?.userPrincipalName)&&void 0!==U?U:te?.aadAppId})),[4,this.userDetailsService.getUserDetails(g).toPromise()];case 1:return u=W.sent(),F=_.map(u,function(te){return te?.displayName}),[2,_.isEmpty(F)?g:F]}})})},oe.\u0275fac=function(g){return new(g||oe)(Ce.\u0275\u0275inject(H.f),Ce.\u0275\u0275inject(ie.K),Ce.\u0275\u0275inject(Le.x),Ce.\u0275\u0275inject(ze.T),Ce.\u0275\u0275inject($e.o),Ce.\u0275\u0275inject(We.a),Ce.\u0275\u0275inject(He.vZ),Ce.\u0275\u0275inject(Je.X),Ce.\u0275\u0275inject(j.y0),Ce.\u0275\u0275inject(J.SN),Ce.\u0275\u0275inject(tt.yh),Ce.\u0275\u0275inject(G.M,8),Ce.\u0275\u0275inject(Y.u,8))},oe.\u0275prov=Ce.\u0275\u0275defineInjectable({token:oe,factory:oe.\u0275fac}),oe}()},14786:function(ct,Ge,n){"use strict";n.d(Ge,{AY:function(){return ce},Bn:function(){return C},Fg:function(){return J},GW:function(){return s},HE:function(){return he},JP:function(){return l},Lc:function(){return Y},V8:function(){return k},_9:function(){return ye},dT:function(){return d},h2:function(){return H},ib:function(){return v},pN:function(){return y},tj:function(){return ee},z8:function(){return E}});var t=n(41114),i="PBI.Goal.ContextMenu.CreateAPowerAutomateFlow",a=(t.cx[i]=(0,t.b1)(i),"PBI.Goal.TargetsEditor.Action.Opened"),d=t.cx[a]=(0,t.b1)(a),p="PBI.Goal.TargetsEditor.Action.Canceled",l=t.cx[p]=(0,t.b1)(p),c="PBI.Goal.TargetsEditor.Action.Done",y=t.cx[c]=(0,t.b1)(c),r="PBI.Goal.ValuesEditor.Action.Opened",C=t.cx[r]=(0,t.b1)(r),m="PBI.Goal.ValuesEditor.Action.Canceled",k=t.cx[m]=(0,t.b1)(m),O="PBI.Goal.ValuesEditor.Action.Done",s=t.cx[O]=(0,t.b1)(O),ne="PBI.ScorecardHeader.LabelInlineEdit",ee=t.cx[ne]=(0,t.b1)(ne),Z="PBI.ScorecardHeader.DescriptionInlineEdit",v=t.cx[Z]=(0,t.b1)(Z),E=function(ge){return ge.Manual="Manual",ge.Connect="Connect",ge.Rollup="Rollup",ge}({}),I="PBI.WebScorecard.SaveCurrentValueSelection",H=t.cx[I]=(0,t.b1)(I),G="PBI.WebScorecard.SaveTargetValueSelection",Y=t.cx[G]=(0,t.b1)(G),ie="PBI.DatasetDetailsPage.GoalRollupsCoachmarkTriggered",ye=t.cx[ie]=(0,t.b1)(ie),ae="PBI.DatasetDetailsPage.GoalRollupsDetailsPaneCoachmarkTriggered",J=t.cx[ae]=(0,t.b1)(ae),N="PBI.Scorecard.ChangeViewType",he=t.cx[N]=(0,t.b1)(N),pe="PBI.Scorecard.Hierarchies.Builder.Open",ce=t.cx[pe]=(0,t.b1)(pe)},8748:function(ct,Ge,n){"use strict";n.d(Ge,{o:function(){return ie}});var t=n(81337),i=n(12966),w=n(41114),a="PBI.MashupEditor.OnReadyError",d=w.cx[a]=(0,w.b1)(a),p="PBI.MashupEditor.OnTokenError",l=w.cx[p]=(0,w.b1)(p),c=n(48741),y=n(50423),r=n(95281),C=n(33567),m=n(73221),k=n(46544),O=n(78590),s=n(59017),ne=n(23558),ee=n(59973),Z=n(83317),v=n(76746),E=n(85928),I=n(65181),H=["mashupIframe"],Y={readyState:0},ie=function(ye){function ae(J,N,he,pe,ce,ge){var se=ye.call(this)||this;return se.appSettings=J,se.ref=N,se.mashupService=he,se.localizationService=pe,se.telemetryService=ce,se.componentStore=ge,se.onError=new y.EventEmitter,se.onReady=new y.EventEmitter,se.readyState$=se.componentStore.select(function(xe){return xe.readyState}),se.updateState=se.componentStore.updater(function(xe,me){return(0,t.pi)((0,t.pi)({},xe),{readyState:me})}),se}return(0,t.ZT)(ae,ye),ae.prototype.ngOnInit=function(){var N,he,pe,ce,J=this;!this.theme&&!(null===(he=null===(N=this.clientConfiguration)||void 0===N?void 0:N.editorSettings)||void 0===he)&&he.themeOverride&&(this.theme=null===(ce=null===(pe=this.clientConfiguration)||void 0===pe?void 0:pe.editorSettings)||void 0===ce?void 0:ce.themeOverride),this.componentStore.setState(Y),this.changes$("flow").pipe((0,ne.M)(this.readyState$),(0,ee.h)(function(ge){return!!ge[0]&&1!==ge[1]}),(0,Z.R)(this.onDestroy$)).subscribe(function(ge){var xe=ge[1];return(0,t.mG)(J,void 0,void 0,function(){return(0,t.Jh)(this,function(me){switch(me.label){case 0:return this.updateState(1),0===xe?[3,2]:[4,this.endFlow()];case 1:me.sent(),me.label=2;case 2:return this.startFlow(),[2]}})})})},ae.prototype.ngAfterViewInit=function(){var J=this;(0,C.mv)(this.clientConfiguration,"clientConfiguration is required"),this.mashupService.getPQToken("".concat(this.appSettings.powerQueryResourceName,"/.default")).toPromise().catch(function(){}),this.mashupDataSubscription=(0,s.aj)([this.mashupService.getPQEndpoint()]).pipe((0,ee.h)(function(N){return!!N[0]})).subscribe(function(N){J.initMashupeditor(N[0])},function(N){J.onError.emit(N)})},ae.prototype.ngOnDestroy=function(){return this.mashupEditorClient&&this.mashupEditorClient.dispose(),this.mashupDataSubscription&&this.mashupDataSubscription.unsubscribe(),ye.prototype.ngOnDestroy.call(this)},ae.prototype.setFocus=function(){var J=this.mashupIframe.nativeElement.contentDocument||this.mashupIframe.nativeElement.contentWindow;J?.focus()},ae.prototype.activateQuery=function(J){return this.mashupEditorClient.activateQuery(J)},ae.prototype.addQuery=function(J,N){return this.mashupEditorClient.addQuery(J,N)},ae.prototype.cancelCurrentEvaluation=function(){return this.mashupEditorClient.dataPreview.cancelCurrentEvaluation()},ae.prototype.getEditingSessionMashup=function(){return this.mashupEditorClient.getEditingSessionMashup()},ae.prototype.getQueriesInfo=function(){return this.mashupEditorClient.getQueriesInfo()},ae.prototype.getQueryScript=function(J){return this.mashupEditorClient.getQueryScript(J)},ae.prototype.getDataSourceQueryScript=function(J,N){return this.mashupEditorClient.getDataSourceQueryScript(J,N)},ae.prototype.setUserSettings=function(J){return this.mashupEditorClient.setUserSettings(J)},ae.prototype.refreshActiveQueryResult=function(){return this.mashupEditorClient.refreshActiveQueryResult()},ae.prototype.getSelectedStepName=function(){return this.mashupEditorClient.getSelectedStepName()},ae.prototype.getActiveQueryName=function(){return this.mashupEditorClient.getActiveQueryName()},ae.prototype.getClientSettings=function(J){return{allowedOrigin:J,container:this.mashupIframe.nativeElement,url:this.createMashupEditorUrl(J),className:"mashup-editor-client-iframe"}},ae.prototype.createMashupEditorUrl=function(J){var N="".concat(J,"/MashupEditor");if(this.mashupEditorFeatureFlags&&this.mashupEditorFeatureFlags.size>0){var he=new c.LE;this.mashupEditorFeatureFlags.forEach(function(pe,ce){he=he.set(ce,pe)}),N=N+"?"+he.toString()}return N},ae.prototype.getEditorSettings=function(){var J={cancelButtonLabel:this.localizationService.get("Cancel_ButtonText"),closeButtonSettings:{showConfirmationPrompt:!1,actionOnClick:O.w9.Cancel},commitButtonLabel:this.localizationService.get("ModalDialog_Save"),enableAIInsights:!1,enableCalculatedEntities:!0,enableLinkedEntities:!0,enableMappingAsAStep:!1,returnQueryEditorResult:!1,showCancelButton:!0,useHostConnectionProvider:!1};return{addFocusTrapZone:!1,locale:this.localizationService.currentLanguageLocale,sessionId:this.telemetryService.sessionId,queryEditorSettings:J,showCloseButton:!0,showHeader:!1,themeOverride:this.theme||i.C8}},ae.prototype.endFlow=function(){return(0,t.mG)(this,void 0,void 0,function(){var J;return(0,t.Jh)(this,function(N){switch(N.label){case 0:if(!this.mashupEditorClient)return[2];N.label=1;case 1:return N.trys.push([1,3,,4]),[4,this.mashupEditorClient.endFlow()];case 2:return N.sent(),this.updateState(3),[3,4];case 3:return J=N.sent(),this.onError.emit(J),this.updateState(4),[3,4];case 4:return[2]}})})},ae.prototype.startFlow=function(){var J=this;!this.flow||!this.mashupEditorClient||this.mashupEditorClient.ready.then(function(){J.mashupEditorClient.startFlow(J.flow,J.editorOnCommit,J.editorOnCancel).then(function(){J.updateState(2),J.onReady.emit(),J.ref.detectChanges()},function(N){J.updateState(4)})},function(N){J.onError.emit(N),J.updateState(4),J.telemetryService.logEvent(d,{reason:N?N+"":void 0})})},ae.prototype.initMashupeditor=function(J){var N=this,he=this.getClientSettings(J),pe=this.getEditorSettings();this.mashupEditorClient=function(ae){return new O.Cq(ae)}(_.merge({clientSettings:he,editorSettings:pe,acquireToken:function(ge){return N.mashupService.getPQToken("".concat(ge,"/.default")).toPromise().catch(function(se){N.onError.emit(se),N.telemetryService.logEvent(l,{reason:se?se.status+"":void 0})})}},this.clientConfiguration)),this.startFlow()},ae.\u0275fac=function(N){return new(N||ae)(y.\u0275\u0275directiveInject(v.de),y.\u0275\u0275directiveInject(y.ChangeDetectorRef),y.\u0275\u0275directiveInject(E.M),y.\u0275\u0275directiveInject(I.o),y.\u0275\u0275directiveInject(k.y0),y.\u0275\u0275directiveInject(r.m1))},ae.\u0275cmp=y.\u0275\u0275defineComponent({type:ae,selectors:[["mashup-editor"]],viewQuery:function(N,he){var pe;(1&N&&y.\u0275\u0275viewQuery(H,5),2&N)&&(y.\u0275\u0275queryRefresh(pe=y.\u0275\u0275loadQuery())&&(he.mashupIframe=pe.first))},inputs:{clientConfiguration:"clientConfiguration",mashupEditorFeatureFlags:"mashupEditorFeatureFlags",flow:"flow",editorOnCommit:"editorOnCommit",editorOnCancel:"editorOnCancel",theme:"theme"},outputs:{onError:"onError",onReady:"onReady"},features:[y.\u0275\u0275ProvidersFeature([r.m1]),y.\u0275\u0275InheritDefinitionFeature],decls:2,vars:0,consts:[["id","mashupIframe","pbi-auto-focus","","data-testid","mashup-iframe"],["mashupIframe",""]],template:function(N,he){1&N&&y.\u0275\u0275element(0,"div",0,1)},styles:["[_nghost-%COMP%]{display:flex}#mashupIframe[_ngcontent-%COMP%]{background:var(--white-color, #FFF);display:flex;flex:1 1 auto;align-items:stretch;justify-content:center}#mashupIframe[_ngcontent-%COMP%]     .mashup-editor-client-iframe{border:none;width:100%;height:100%;display:block!important}"],changeDetection:0}),ae}(m.w)},12966:function(ct,Ge,n){"use strict";n.d(Ge,{C8:function(){return t},z6:function(){return i}});var t={palette:{themeDarker:"#b1920b",themeDark:"#bc9a0a",themeDarkAlt:"#c5a20b",themePrimary:"#f2c811",themeSecondary:"#f2c811",themeTertiary:"#f7de72",themeLight:"#f9e48a",themeLighter:"#fbefba",themeLighterAlt:"#fdf6d7"},semanticColors:{primaryButton:{text:{default:"#333333"}},checkableInput:{text:{checked:"#333333"}},grid:{cell:{linkText:{default:"#7D6807",focused:"#5C4C05"}}}}},i={palette:{themePrimary:"#117865",themeLighterAlt:"#f1faf8",themeLighter:"#c9e9e3",themeLight:"#9fd6cc",themeTertiary:"#54ae9d",themeSecondary:"#218875",themeDarkAlt:"#0f6c5b",themeDark:"#0d5b4d",themeDarker:"#094339",neutralLighterAlt:"#faf9f8",neutralLighter:"#f3f2f1",neutralLight:"#edebe9",neutralQuaternaryAlt:"#e1dfdd",neutralQuaternary:"#d0d0d0",neutralTertiaryAlt:"#c8c6c4",neutralTertiary:"#a19f9d",neutralSecondary:"#605e5c",neutralSecondaryAlt:"#8a8886",neutralPrimaryAlt:"#3b3a39",neutralPrimary:"#323130",neutralDark:"#201f1e",black:"#000000",white:"#ffffff"},semanticColors:{}}},71328:function(ct,Ge,n){"use strict";n.d(Ge,{G:function(){return H}});var t=n(32293),i=n(50423),w=n(77476),a=n(8748);function d(G,Y){if(1&G){var ie=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"mashup-editor",1),i.\u0275\u0275listener("onError",function(){i.\u0275\u0275restoreView(ie);var J=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(J.onError)}),i.\u0275\u0275elementEnd()}if(2&G){var ye=i.\u0275\u0275nextContext();i.\u0275\u0275property("clientConfiguration",ye.mashUpEditorInput.clientConfiguration)("editorOnCommit",ye.onCommit)("editorOnCancel",ye.onCancel)("flow",ye.mashUpEditorInput.flow)}}var p=function(){function G(Y,ie){var ye=this;this.dialogRef=Y,this.onCommit=function(ae,J){ye.mashUpEditorInput.editorOnCommit(ae,J),ye.dialogRef.close(J)},this.onCancel=function(ae){ye.mashUpEditorInput.editorOnCancel(ae),ye.dialogRef.close()},this.onError=function(ae){ye.mashUpEditorInput.onError(ae)},this.mashUpEditorInput=ie.input}return G.\u0275fac=function(ie){return new(ie||G)(i.\u0275\u0275directiveInject(t.so),i.\u0275\u0275directiveInject(t.WI))},G.\u0275cmp=i.\u0275\u0275defineComponent({type:G,selectors:[["mashup-editor-dialog"]],decls:1,vars:1,consts:[["pbi-auto-focus","","cdkFocusInitial","",3,"clientConfiguration","editorOnCommit","editorOnCancel","flow","onError",4,"ngIf"],["pbi-auto-focus","","cdkFocusInitial","",3,"clientConfiguration","editorOnCommit","editorOnCancel","flow","onError"]],template:function(ie,ye){1&ie&&i.\u0275\u0275template(0,d,1,4,"mashup-editor",0),2&ie&&i.\u0275\u0275property("ngIf",!!ye.mashUpEditorInput.clientConfiguration)},dependencies:[w.NgIf,a.o],styles:["[_nghost-%COMP%]     mashup-editor{display:flex;width:80vw;height:80vh}[_nghost-%COMP%]{display:flex}"]}),G}(),c=new i.InjectionToken("MashUpEditorErrorHandler"),y=new i.InjectionToken("MashUpEditorLauncher"),r=n(78590),C=n(33554),m=n(82762),k=n(48787),O=n(42195),s=n(58938),ne=function(G){return G.OnCommit="OnCommit",G.OnCancel="OnCancel",G}({}),Z={provide:y,useClass:function(){function G(Y,ie){this.dialogService=Y,this.errorHandler=ie,this.lifeCycleEvent$=new C.t(1)}return G.prototype.editQueries=function(Y,ie){return this.launchMashUpEditor(ie.clientConfiguration,{kind:r.Mw.EditQuery,hostContext:ie.hostContext||Y.hostContext,mashupDefinition:{editingSessionMashup:Y,kind:r.Qo.TransientMashup}})},G.prototype.addQueries=function(Y,ie){var ye=this.buildFlowForAddQueries(Y,ie);return this.launchMashUpEditor(ie.clientConfiguration,ye)},G.prototype.manageDataSources=function(Y,ie){return this.launchMashUpEditor(ie.clientConfiguration,{kind:r.Mw.ManageConnections,hostContext:ie.hostContext,connectionOverrides:Y.connectionOverrides})},G.prototype.buildFlowForAddQueries=function(Y,ie){var ye={kind:r.Mw.AddQueries,hostContext:ie.hostContext||Y.hostContext};return function(G){return!_.has(G,"mashupDocument")||_.isNil(G.mashupDocument)}(Y)?(ye.mashupTemplateImportAllowed=!0,ye.mashupDefinition={editingSessionEmptyMashup:Y,kind:r.Qo.TransientEmptyMashup}):(ye.mashupTemplateImportAllowed=!1,ye.mashupDefinition={editingSessionMashup:Y,kind:r.Qo.TransientMashup}),ye},G.prototype.launchMashUpEditor=function(Y,ie){var ye=this;return(0,m.D)(this.dialogService.showTemplateDialog("MashUpEditorDialogComponentId",{title:"Mash Up Editor Dialog",input:{clientConfiguration:Y,flow:ie,editorOnCommit:function(N,he){return ye.onCommit(N,he)},editorOnCancel:function(N){return ye.onCancel(N)},onError:function(N){var he;return null===(he=ye.errorHandler)||void 0===he?void 0:he.handleError(N)}}})).pipe((0,k.q)(1),(0,O.zg)(function(J){return J.afterClosed()})).toPromise()},G.prototype.onCommit=function(Y,ie){this.lifeCycleEvent$.next({type:ne.OnCommit,payload:ie})},G.prototype.onCancel=function(Y){this.lifeCycleEvent$.next({type:ne.OnCancel,payload:void 0})},G.\u0275fac=function(ie){return new(ie||G)(i.\u0275\u0275inject(s.x),i.\u0275\u0275inject(c,8))},G.\u0275prov=i.\u0275\u0275defineInjectable({token:G,factory:G.\u0275fac}),G}()},v=n(95859),E=n(24495),H=function(){function G(){}return G.\u0275fac=function(ie){return new(ie||G)},G.\u0275mod=i.\u0275\u0275defineNgModule({type:G}),G.\u0275inj=i.\u0275\u0275defineInjector({providers:[Z],imports:[w.CommonModule,v.v,E.z.withManifest([{componentIdentifier:"MashUpEditorDialogComponentId",componentType:p}])]}),G}()},85928:function(ct,Ge,n){"use strict";n.d(Ge,{M:function(){return v}});var t=n(36444),i=n(33567),w=n(85732),a=(0,w.ZF)("urlConfiguration"),d=(0,w.P1)(a,function(E){return E.powerQueryHostUrl}),p=n(37263),l=n(59694),c=n(11547),y=n(82762),r=n(35510),C=n(42195),m=n(14172),k=n(17653),O=n(88255),s=n(50423),ne=n(62113),ee=n(73875),Z=window,v=function(){function E(I,H,G,Y){var ie=this;this.store=I,this.accessTokenProviderService=H,this.httpService=G,this.inTeams=Y,this.getAADToken$=function(ye){return(0,c.of)(null).pipe((0,C.zg)(function(){if(Z.clientAuthEnabled)return(0,y.D)(ie.accessTokenProviderService.acquireToken("MashupService",[ye],!1)).pipe((0,m.U)(function(he){return he.token}));if(ie.inTeams){var ae=ye.substring(0,ye.lastIndexOf("/"));return t.authentication.initialize(),(0,y.D)(t.authentication.getAuthToken({resources:[ae],silent:!0}))}var J=(0,l.W)("{0}/msal",Z.baseUrl||window.location.origin),N=ie.httpService.powerbiRequestOptions();return N.params={scopes:ye},ie.httpService.get(J,N).pipe((0,m.U)(function(he){return he.data.AccessToken}))}),(0,k.b)(function(ae){var N=1e3*(0,i.oG)(ae).exp;ie.AADTokenCache$.next(new Map(ie.AADTokenCache$.getValue()).set(ye,{token:ae,expiration:N}))}))},this.AADTokenCache$=new r.X(new Map)}return E.prototype.getPQEndpoint=function(){return this.store.select(d).pipe((0,m.U)(function(I){return(0,l.g)(I)?null:I.replace(/\/$/,"")}))},E.prototype.getPQToken=function(I){var H=this;return this.AADTokenCache$.pipe((0,O.P)(),(0,C.zg)(function(G){return!G.has(I)||Date.now()+3e5>G.get(I).expiration?H.getAADToken$(I):(0,c.of)(G.get(I).token)}))},E.\u0275fac=function(H){return new(H||E)(s.\u0275\u0275inject(w.yh),s.\u0275\u0275inject(ne.Q),s.\u0275\u0275inject(ee.O),s.\u0275\u0275inject(p.$,8))},E.\u0275prov=s.\u0275\u0275defineInjectable({token:E,factory:E.\u0275fac,providedIn:"root"}),E}()},21e3:function(ct,Ge,n){"use strict";n.d(Ge,{H:function(){return y}});var t=n(82762),i=n(33554),w=n(9936),a=n(14172),d=n(48787),p=n(50423),l=n(47754),c=n(15910),y=function(){function r(C,m){this.profileImageService=C,this.userHttpService=m,this.usersCache={}}return r.prototype.getUserPhoto=function(C){return(0,t.D)(this.profileImageService.getOtherUserPhoto(C))},r.prototype.getUserDetails=function(C){var m=this;C=_.filter(C,function(v){return!!v});var k=[],O=[];if(_.isEmpty(C))return(0,t.D)([]);for(var s=0,ne=C;s<ne.length;s++){var Z=ne[s].toLowerCase();this.usersCache[Z]||(this.usersCache[Z]=new i.t(1),O.push(Z)),k.push(this.usersCache[Z])}return _.isEmpty(O)||this.userHttpService.getUserDetails(O).pipe((0,d.q)(1)).subscribe(function(v){var E={};if(_.some(v?.data))for(var I=0,H=v?.data;I<H.length;I++){var ie=(G=H[I]).userPrincipalName,ye=G.objectId;m.upsert(G.emailAddress,G,E),m.upsert(ie,G,E),m.upsert(ye,G,E)}for(var J=0,N=_.filter(O,function(he){return!E[he]});J<N.length;J++){var G;m.usersCache[G=N[J]].next(void 0),m.usersCache[G].complete()}},function(){for(var v,E,I=0,H=O;I<H.length;I++){var G=H[I];null===(v=m.usersCache[G])||void 0===v||v.next(void 0),null===(E=m.usersCache[G])||void 0===E||E.complete(),delete m.usersCache[G]}}),(0,w.D)(k).pipe((0,a.U)(function(v){return _.filter(v,function(E){return!!E})}))},r.prototype.findUsers=function(C,m){return this.userHttpService.findUsers(C,1,m,!0,!0).pipe((0,a.U)(function(k){return k?.data}))},r.prototype.upsert=function(C,m,k){if(C){var O=C.toLowerCase();this.usersCache[O]||(this.usersCache[O]=new i.t(1)),this.usersCache[O].next(m),this.usersCache[O].complete(),k[O]=!0}},r.\u0275fac=function(m){return new(m||r)(p.\u0275\u0275inject(l.L),p.\u0275\u0275inject(c.W))},r.\u0275prov=p.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac,providedIn:"root"}),r}()},88119:function(ct,Ge,n){"use strict";n.d(Ge,{N:function(){return r}});var t=n(21e3),i=n(77476),w=n(10723),a=n(95859),d=n(50423),p=function(){function C(){}return C.forRoot=function(){return{ngModule:C,providers:[]}},C.\u0275fac=function(k){return new(k||C)},C.\u0275mod=d.\u0275\u0275defineNgModule({type:C}),C.\u0275inj=d.\u0275\u0275defineInjector({}),C}(),l=n(52950),c=n(88717),y=n(76701),r=function(){function C(){}return C.\u0275fac=function(k){return new(k||C)},C.\u0275mod=d.\u0275\u0275defineNgModule({type:C}),C.\u0275inj=d.\u0275\u0275defineInjector({providers:[{provide:w.K,useClass:t.H}],imports:[i.CommonModule,a.v,p,l.g,c.R,y.z]}),C}()},5432:function(ct,Ge,n){"use strict";n.d(Ge,{d:function(){return N}});var t=n(81337),i=n(50423),w=n(3613),a=function(){function he(pe){this.cultureService=pe,this.currencyRecentFormats=[]}return he.prototype.getCurrencyGeneralFormat=function(){return this.currencyGeneralFormat||(this.currencyGeneralFormat={culture:null,displayLabel:this.localizationService.get("Format_Label_Currency_General"),symbol:"$",positivePattern:0,negativePattern:0,formatType:"CurrencyGeneral"}),this.currencyGeneralFormat},he.prototype.getCurrencyCommonFormats=function(){if(!this.currencyCommonFormats){var pe=_.filter(this.cultureService.getAllCurrencySymbolCustomFormatItemsInfo(),function(ce){return"en-US"===ce.culture||"en-GB"===ce.culture||"fr-CH"===ce.culture||null===ce.culture});this.currencyCommonFormats=_.flatten([this.getCurrencyGeneralFormat(),pe.find(function(ce){return"en-US"===ce.culture}),pe.find(function(ce){return"en-GB"===ce.culture}),pe.filter(function(ce){return!ce.culture&&"\u20ac"===ce.symbol}),pe.find(function(ce){return!ce.culture&&"\xa5"===ce.symbol}),pe.find(function(ce){return"fr-CH"===ce.culture})])}return this.currencyCommonFormats},he.prototype.getCurrencyAllFormats=function(){if(!this.currencyAllFormats){var pe=this.cultureService.getAllCurrencySymbolCustomFormatItemsInfo();this.currencyAllFormats=(0,t.ev)([this.getCurrencyGeneralFormat()],pe,!0)}return this.currencyAllFormats},he.prototype.getCurrencyAllCultureFormats=function(){return this.cultureService.getAllCurrencySymbolCustomFormatItemsInfo()},he.prototype.getCurrencyRecentFormats=function(){return this.currencyRecentFormats},he.\u0275fac=function(ce){return new(ce||he)(i.\u0275\u0275inject(w.h))},he.\u0275prov=i.\u0275\u0275defineInjectable({token:he,factory:he.\u0275fac,providedIn:"root"}),he}(),d=n(61353),p=n(98776),l=n(18967),c=n(62458),y=n(64560),r=n(65181),C=n(77476),m=n(59968),k=n(77274),O=n(33846),s=n(7970),ne=n(80357),ee=n(86663),Z=n(69437),v=n(36858),E=n(85102);function I(he,pe){if(1&he&&(i.\u0275\u0275elementStart(0,"mat-option",7),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&he){var ce=pe.$implicit;i.\u0275\u0275property("value",ce.value)("pbiTooltip",ce.label),i.\u0275\u0275attribute("aria-label",ce.label),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",ce.label," ")}}var H=function(pe){return{btnDisabled:pe}},G=function(pe){return{isToggled:pe}};function Y(he,pe){if(1&he){var ce=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",8)(2,"div")(3,"button",9),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(ce);var xe=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(xe.onCurrencyClicked())}),i.\u0275\u0275pipe(4,"localize"),i.\u0275\u0275pipe(5,"localize"),i.\u0275\u0275element(6,"pbi-office-icon",10),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(7,"button",11),i.\u0275\u0275listener("pbiMenuButtonClick",function(xe){i.\u0275\u0275restoreView(ce);var me=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(me.onCurrencyItemClicked(xe))}),i.\u0275\u0275pipe(8,"localize"),i.\u0275\u0275pipe(9,"localize"),i.\u0275\u0275element(10,"pbi-icon",12),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(11,"button",13),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(ce);var xe=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(xe.onChangePercentageToggle())}),i.\u0275\u0275pipe(12,"localize"),i.\u0275\u0275pipe(13,"localize"),i.\u0275\u0275element(14,"pbi-office-icon",14),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(15,"button",13),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(ce);var xe=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(xe.onChangeThousandSeparatorToggle())}),i.\u0275\u0275pipe(16,"localize"),i.\u0275\u0275pipe(17,"localize"),i.\u0275\u0275element(18,"pbi-office-icon",15),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(19,"div",16),i.\u0275\u0275pipe(20,"localize"),i.\u0275\u0275elementStart(21,"span",17),i.\u0275\u0275element(22,"pbi-office-icon",18),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(23,"num-up-down",19),i.\u0275\u0275listener("modelValueChange",function(xe){i.\u0275\u0275restoreView(ce);var me=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(me.onDecimalPlacesChanged(xe))}),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementContainerEnd()}if(2&he){var ge=i.\u0275\u0275nextContext();i.\u0275\u0275advance(3),i.\u0275\u0275property("disabled",!ge.isNumericFormatEnabled())("pbiTooltip",i.\u0275\u0275pipeBind1(4,22,"Value_Formatting_Tooltip_Currency_Format")),i.\u0275\u0275attribute("aria-label",i.\u0275\u0275pipeBind1(5,24,"Value_Formatting_ARIA_Label_Currency_Format")),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction1(40,H,!ge.isNumericFormatEnabled()))("pbiMenu",ge.currencyMenu)("pbiTooltip",i.\u0275\u0275pipeBind1(8,26,"Value_Formatting_Tooltip_Currency_Format"))("disabled",!ge.isNumericFormatEnabled()),i.\u0275\u0275attribute("aria-label",i.\u0275\u0275pipeBind1(9,28,"Value_Formatting_ARIA_Label_Currency_Format")),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction1(42,G,ge.isPercentFormatterToggled()))("disabled",!ge.isNumericFormatEnabled())("pbiTooltip",i.\u0275\u0275pipeBind1(12,30,"Value_Formatting_Tooltip_Percentage_Format")),i.\u0275\u0275attribute("aria-label",i.\u0275\u0275pipeBind1(13,32,"Value_Formatting_ARIA_Label_Percentage_Format")),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction1(44,G,ge.isThousandSeparatorToggled()))("disabled",!ge.isNumericFormatEnabled(!0))("pbiTooltip",i.\u0275\u0275pipeBind1(16,34,"Ribbon_Tooltip_DataFormatDecimalPlaces")),i.\u0275\u0275attribute("aria-label",i.\u0275\u0275pipeBind1(17,36,"Value_Formatting_ARIA_Label_Thousands_Separator_Format")),i.\u0275\u0275advance(4),i.\u0275\u0275property("pbiTooltip",i.\u0275\u0275pipeBind1(20,38,"Ribbon_Tooltip_DataFormatDecimalPlaces")),i.\u0275\u0275advance(3),i.\u0275\u0275property("disabled",(null==ge.formatInformation?null:ge.formatInformation.format)===ge.FormatNumberWhole),i.\u0275\u0275advance(1),i.\u0275\u0275property("options",ge.options)("useModernStyles",!0)("modelValue",ge.formatInformation&&ge.formatInformation.accuracy)("isDisabled",!ge.isNumericFormatEnabled()||(null==ge.formatInformation?null:ge.formatInformation.format)===ge.FormatNumberWhole)}}function ie(he,pe){if(1&he&&(i.\u0275\u0275elementStart(0,"mat-option",7),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&he){var ce=pe.index,ge=i.\u0275\u0275nextContext(3);i.\u0275\u0275property("value",ce)("pbiTooltip",ge.categoryListNames[ce]),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",ge.categoryListNames[ce]," ")}}function ye(he,pe){if(1&he){var ce=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"mat-select",21),i.\u0275\u0275listener("valueChange",function(xe){i.\u0275\u0275restoreView(ce);var me=i.\u0275\u0275nextContext(2);return i.\u0275\u0275resetView(me.selectedCategoryList=xe)}),i.\u0275\u0275pipe(2,"localize"),i.\u0275\u0275template(3,ie,2,3,"mat-option",4),i.\u0275\u0275elementStart(4,"div",22)(5,"button",23),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(ce);var xe=i.\u0275\u0275nextContext(2);return i.\u0275\u0275resetView(xe.launchCategoryListsEditPane(!1))}),i.\u0275\u0275pipe(6,"localize"),i.\u0275\u0275pipe(7,"localize"),i.\u0275\u0275element(8,"span",24),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"button",25),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(ce);var xe=i.\u0275\u0275nextContext(2);return i.\u0275\u0275resetView(xe.launchCategoryListsEditPane(!0))}),i.\u0275\u0275pipe(10,"localize"),i.\u0275\u0275pipe(11,"localize"),i.\u0275\u0275element(12,"span",26),i.\u0275\u0275elementEnd()()(),i.\u0275\u0275elementContainerEnd()}if(2&he){var ge=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("value",ge.selectedCategoryList),i.\u0275\u0275attribute("aria-label",i.\u0275\u0275pipeBind1(2,7,"Value_Formatting_ARIA_Label_SelectCategoryListDropdown")),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngForOf",ge.goalValueCategoryLists),i.\u0275\u0275advance(2),i.\u0275\u0275property("pbiTooltip",i.\u0275\u0275pipeBind1(6,9,"Manage_Lists")),i.\u0275\u0275attribute("aria-label",i.\u0275\u0275pipeBind1(7,11,"Manage_Lists")),i.\u0275\u0275advance(4),i.\u0275\u0275property("pbiTooltip",i.\u0275\u0275pipeBind1(10,13,"Create_A_List")),i.\u0275\u0275attribute("aria-label",i.\u0275\u0275pipeBind1(11,15,"Create_A_List"))}}function ae(he,pe){if(1&he&&i.\u0275\u0275template(0,ye,13,17,"ng-container",20),2&he){var ce=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngIf",(null==ce.goalValueCategoryLists?null:ce.goalValueCategoryLists.length)>0)}}var J=[{value:"General",label:"Format_Label_General"},{value:"CurrencyCustom",label:"Format_Label_Currency"},{value:"DateTimeGeneralPattern",label:"Format_Label_DateTime"},{value:"NumberDecimal",label:"DataType_Label_Number"},{value:"NumberWhole",label:"DataType_Label_WholeNumber"},{value:"Percentage",label:"Format_Label_Percentage"},{value:"Scientific",label:"Format_Label_Scientific"},{value:"Text",label:"Text"},{value:"Boolean",label:"DataType_Label_Boolean"},{value:"Binary",label:"DataType_Binary"},{value:"Custom",label:"DataType_Label_Categorical"}],N=function(){function he(pe,ce,ge,se){this.cultureService=pe,this.currencyFormatService=ce,this.dateTimeFormatService=ge,this.localizationService=se,this.formatStringChange=new i.EventEmitter,this.onSelectedCategoryListChange=new i.EventEmitter,this.availableFormats=[],this.options={unitSymbol:"",minValue:0,maxValue:15},this.FormatNumberWhole="NumberWhole",this.formatUtils=new p.c(this.cultureService.getFormatInfo()),this.allCurrenciesOptions=pe.getAllCurrencySymbolCustomFormatItemsInfo(),this.commonCurrenciesOptions=pe.getAllCommonCurrencySymbolCustomFormatItemsInfo(),this.availableCurrencyFormats=this.generateCurrencyFormatInfoMapping(this.allCurrenciesOptions),this.currencyMenu=this.currencyFormatInfoToPbiMenuAdaptor(this.commonCurrenciesOptions,this.allCurrenciesOptions)}return Object.defineProperty(he.prototype,"formatString",{set:function(ce){this.formatInformation=this.cultureService.tryParse(ce,this.dataType),ce===he.CategoricalFormatString&&(this.formatInformation.format="Custom"),this.updateCompatibleFormats()},enumerable:!1,configurable:!0}),Object.defineProperty(he.prototype,"dataType",{get:function(){return this._dataType},set:function(ce){this._dataType=ce,this.formatInformation&&(this.isCategorical?this.formatInformation.format="Custom":this.formatInformation=this.cultureService.tryParse(this.formatInformation.formatString,ce)),this.updateCompatibleFormats()},enumerable:!1,configurable:!0}),Object.defineProperty(he.prototype,"goalValueCategoryLists",{get:function(){return this._goalValueCategoryLists},set:function(ce){var ge=this;this.supportCategoricalValues&&(this._goalValueCategoryLists=ce,this.categoryListNames=ce.map(function(se){return ge.getCategoryListName(se)}))},enumerable:!1,configurable:!0}),he.prototype.ngOnInit=function(){this.updateCompatibleFormats()},he.prototype.isNumericFormatEnabled=function(pe){void 0===pe&&(pe=!1);var ce=this.dataType,ge=this.formatInformation&&this.formatInformation.format;return(ge&&pe?this.isValidNumericFormat(ge):"Custom"!==ge)&&(2===ce||3===ce||4===ce||13===ce)},he.prototype.isThousandSeparatorToggled=function(){return this.formatInformation&&this.formatInformation.thousandSeparator},he.prototype.isPercentFormatterToggled=function(){return this.formatInformation&&"Percentage"===this.formatInformation.format},he.prototype.onChangePercentageToggle=function(){var pe;this.formatInformation=this.formatInformation&&"Percentage"===this.formatInformation.format?void 0:this.formatUtils.changeFormat(this.dataType,this.formatInformation,"Percentage"),this.formatStringChange.emit(null===(pe=this.formatInformation)||void 0===pe?void 0:pe.formatString)},he.prototype.onChangeThousandSeparatorToggle=function(){var pe;this.formatInformation=this.formatUtils.toggleThousandsSeparator(this.dataType,this.formatInformation),this.formatStringChange.emit(null===(pe=this.formatInformation)||void 0===pe?void 0:pe.formatString)},he.prototype.onCurrencyClicked=function(){var pe;this.formatInformation=this.formatUtils.changeFormat(this.dataType,this.formatInformation,"CurrencyCustom"),this.formatStringChange.emit(null===(pe=this.formatInformation)||void 0===pe?void 0:pe.formatString)},he.prototype.onCurrencyItemClicked=function(pe){this.availableCurrencyFormats=this.generateCurrencyFormatInfoMapping(this.allCurrenciesOptions);var ge=this.availableCurrencyFormats.get(pe.text);this.formatInformation=this.formatUtils.changeFormat(this.dataType,this.formatInformation,"CurrencyCustom"),this.formatInformation=this.formatUtils.setCurrencyFormat(this.dataType,this.formatInformation,this.formatInformation.format,ge.culture,ge.symbol,ge.positivePattern,ge.negativePattern),this.formatStringChange.emit(this.formatInformation.formatString)},he.prototype.onDecimalPlacesChanged=function(pe){this.formatInformation=this.formatUtils.setAccuracy(this.dataType,this.formatInformation,pe),this.formatStringChange.emit(this.formatInformation.formatString)},Object.defineProperty(he.prototype,"selectedFormat",{get:function(){if(!this.formatInformation)return"General";var ce=this.formatInformation.format;switch(this.formatInformation.format){case"CurrencyCustom":ce="CurrencyCustom";break;case"DateTimeCustom":case"DateTimeGeneralPattern":this.formatInformation.dateTimeCustomFormat&&(ce=this.formatInformation.dateTimeCustomFormat.formatString)}return ce},set:function(ce){var ge,se;switch(ce){case"General":this.formatInformation=void 0;break;case"NumberDecimal":case"NumberWhole":case"Percentage":case"CurrencyCustom":case"Scientific":case"Binary":case"Boolean":case"Text":this.formatInformation=this.formatUtils.changeFormat(this.dataType,this.formatInformation,ce);break;case"Custom":this.formatInformation={format:ce,formatString:he.CategoricalFormatString,thousandSeparator:void 0,currencyFormat:void 0,dateTimeCustomFormat:void 0},_.isEmpty(this.categoryListNames)?(this.selectedCategoryList=-1,this.formatStringChange.emit(null===(ge=this.formatInformation)||void 0===ge?void 0:ge.formatString),this.launchCategoryListsEditPane(!0)):this.selectedCategoryList=0;break;default:var xe=this.dateTimeFormatService.getFormat(ce);this.formatInformation=this.formatUtils.setDateTimeFormat(this.dataType,this.formatInformation,xe.formatType,xe.pattern,xe.formatString)}this.formatStringChange.emit(null===(se=this.formatInformation)||void 0===se?void 0:se.formatString)},enumerable:!1,configurable:!0}),Object.defineProperty(he.prototype,"selectedCategoryList",{get:function(){return this.selectedCategoryListIndex},set:function(ce){this.selectedCategoryListIndex=ce,this.onSelectedCategoryListChange.emit(ce)},enumerable:!1,configurable:!0}),Object.defineProperty(he.prototype,"isCategorical",{get:function(){var ce;return(null===(ce=this.formatInformation)||void 0===ce?void 0:ce.formatString)===he.CategoricalFormatString},enumerable:!1,configurable:!0}),he.prototype.currencyFormatInfoToPbiMenuAdaptor=function(pe,ce){var ge=this.buildCommonCurrencyPbiMenu(pe);c.fF.assertValue(ce,"ICurrencyFormatInfo[] should not be null");var se={type:y.iB.Header,text:this.localizationService.get("All_Currency_Symbols"),tooltip:this.localizationService.get("All_Currency_Symbols")};return ge.items.push({type:y.iB.Divider}),ge.items.push(se),this.forgeMenuOptions(ge,ce)},he.prototype.buildCommonCurrencyPbiMenu=function(pe){var ce={items:[]};c.fF.assertValue(pe,"ICurrencyFormatInfo[] should not be null");var ge={type:y.iB.Header,text:this.localizationService.get("Common_Currency_Symbols"),tooltip:this.localizationService.get("Common_Currency_Symbols")};return ce.items.push(ge),this.forgeMenuOptions(ce,pe)},he.prototype.forgeMenuOptions=function(pe,ce){for(var ge=pe,se=0;se<ce.length;se++)ge.items.push({id:se,type:y.iB.Button,text:ce[se].displayLabel,tooltip:ce[se].displayLabel,disabled:!1});return ge},he.prototype.generateCurrencyFormatInfoMapping=function(pe){var ce=new Map;c.fF.assertValue(pe,"ICurrencyFormatInfo[] should not be null");for(var ge=0,se=pe;ge<se.length;ge++){var xe=se[ge];ce.set(xe.displayLabel,xe)}return ce},he.prototype.isValidNumericFormat=function(pe){return"General"===pe||"CurrencyGeneral"===pe||"CurrencyCustom"===pe||"Scientific"===pe||"Percentage"===pe||"NumberDecimal"===pe||"NumberWhole"===pe||"Custom"===pe},he.prototype.getCompatibleFormats=function(pe){switch(pe){case 4:case 3:case 2:var ce=["General","NumberWhole","NumberDecimal","CurrencyCustom","Percentage","Scientific"];return this.supportCategoricalValues&&ce.push("Custom"),ce;case 6:case 7:case 9:return[];case 11:return["Binary"];case 5:return["Boolean"];case 1:case 13:return["Text"];default:return["General"]}},he.prototype.updateCompatibleFormats=function(){var pe=this;switch(this.dataType){case 6:this.availableFormats=_.map(this.dateTimeFormatService.getDateFormats(),function(ge){return{value:ge.formatString,label:ge.displayLabel}});break;case 9:this.availableFormats=_.map(this.dateTimeFormatService.getTimeFormats(),function(ge){return{value:ge.formatString,label:ge.displayLabel}});break;case 7:this.availableFormats=_.map(this.dateTimeFormatService.getCommonFormats(),function(ge){return{value:ge.formatString,label:ge.displayLabel}});break;default:var ce=this.getCompatibleFormats(this.dataType);this.availableFormats=_.filter(_.map(J,function(ge){return{value:ge.value,label:pe.localizationService.get(ge.label)}}),function(ge){return _.some(ce,function(se){return se===ge.value})})}},he.prototype.getCategoryListName=function(pe){if(_.isEmpty(pe.name)){var ce=_.map(pe.categories,function(ge){return ge.displayName});return _.join(ce,", ")}return pe.name},he.CategoricalFormatString="CategoricalFormatString",he.\u0275fac=function(ce){return new(ce||he)(i.\u0275\u0275directiveInject(w.h),i.\u0275\u0275directiveInject(a),i.\u0275\u0275directiveInject(d.u),i.\u0275\u0275directiveInject(r.o))},he.\u0275cmp=i.\u0275\u0275defineComponent({type:he,selectors:[["value-formatting"]],inputs:{formatString:"formatString",dataType:"dataType",supportCategoricalValues:"supportCategoricalValues",goalValueCategoryLists:"goalValueCategoryLists",selectedCategoryListIndex:"selectedCategoryListIndex",launchCategoryListsEditPane:"launchCategoryListsEditPane"},outputs:{formatStringChange:"formatStringChange",onSelectedCategoryListChange:"onSelectedCategoryListChange"},features:[i.\u0275\u0275ProvidersFeature([{provide:a,useClass:a},{provide:l.c,useClass:w.h},{provide:d.u,useClass:d.u}])],decls:10,vars:11,consts:[[1,"valueFormatterToolbarContainer"],[1,"valueFormatterDropdownGroup",3,"pbiTooltip"],["name","PBIDataFormat_16",1,"icon-format"],["pbiMatSelect","","panelClass","pbi-modern-select-panel","disableOptionCentering","","role","combobox",1,"pbi-modern-select","valueFormatDropdown",3,"value","disabled","valueChange"],[3,"value","pbiTooltip",4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],["categoryListsSelector",""],[3,"value","pbiTooltip"],[1,"valueFormatterToggleButtonsGroup"],[1,"btn","toggleBtn","icon","splitButtonText",3,"disabled","pbiTooltip","click"],["name","CurrencyFormat_16",1,"icon-currency"],[1,"btn","toggleBtn","icon","splitButton",3,"ngClass","pbiMenu","pbiTooltip","disabled","pbiMenuButtonClick"],["name","chevrondownsmall","size","mini",1,"chevrondown"],[1,"btn","toggleBtn","icon","focusOutline",3,"ngClass","disabled","pbiTooltip","click"],["name","Percentage_16"],["name","CommaFormat_16"],[1,"valueFormatterNumUpDownGroup",3,"pbiTooltip"],[1,"icon"],["name","DecreaseDecimals_16",1,"icon-decreaseDecimals",3,"disabled"],["attr.aria-label","'Value_Formatting_ARIA_Label_Decimal_Place_Format' | localize","placeholderText","Auto",1,"numUpDown",3,"options","useModernStyles","modelValue","isDisabled","modelValueChange"],[4,"ngIf"],["pbiMatSelect","","panelClass","pbi-modern-select-panel","disableOptionCentering","","role","combobox",1,"pbi-modern-select","select-category-list-dropdown",3,"value","valueChange"],[1,"edit-category-lists-in-dropdown"],[1,"btn","edit-category-lists-button",3,"pbiTooltip","click"],["localize","Manage_Lists"],[1,"btn","create-category-list-button",3,"pbiTooltip","click"],["localize","Create_A_List"]],template:function(ce,ge){if(1&ce&&(i.\u0275\u0275elementStart(0,"div",0)(1,"div",1),i.\u0275\u0275pipe(2,"localize"),i.\u0275\u0275element(3,"pbi-office-icon",2),i.\u0275\u0275elementStart(4,"mat-select",3),i.\u0275\u0275listener("valueChange",function(me){return ge.selectedFormat=me}),i.\u0275\u0275pipe(5,"localize"),i.\u0275\u0275template(6,I,2,4,"mat-option",4),i.\u0275\u0275elementEnd()(),i.\u0275\u0275template(7,Y,24,46,"ng-container",5),i.\u0275\u0275template(8,ae,1,1,"ng-template",null,6,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd()),2&ce){var se=i.\u0275\u0275reference(9);i.\u0275\u0275advance(1),i.\u0275\u0275property("pbiTooltip",i.\u0275\u0275pipeBind1(2,7,"Value_Formatting_Tooltip_ComboBox")),i.\u0275\u0275advance(3),i.\u0275\u0275property("value",ge.selectedFormat)("disabled",ge.availableFormats.length<=1),i.\u0275\u0275attribute("aria-label",i.\u0275\u0275pipeBind1(5,9,"Value_Formatting_ARIA_Label_ComboBox")),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngForOf",ge.availableFormats),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!ge.isCategorical)("ngIfElse",se)}},dependencies:[C.NgClass,C.NgForOf,C.NgIf,m.X,k.x8,O.CK,s.x4,ne.l8,ee._,Z.m,v.V,E.F],styles:['.focusOutline[_ngcontent-%COMP%]{outline:1px solid var(--fluent-theme-neutral-primary-hover-color, #232322)}.valueFormatterToolbarContainer[_ngcontent-%COMP%]{background-color:inherit;border-top:inherit;display:flex;flex-direction:row;padding:8px 10px}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterDropdownGroup[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:row;padding-right:13px}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterDropdownGroup[_ngcontent-%COMP%]   .valueFormatDropdown[_ngcontent-%COMP%]{background-color:var(--fluent-theme-white-color, #FFF);border:1px solid var(--fluent-theme-neutral-tertiary-alt-color, #C8C6C4);display:table;height:24px;width:150px}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterDropdownGroup[_ngcontent-%COMP%]   .valueFormatDropdown[_ngcontent-%COMP%]     .mat-select-arrow{color:var(--fluent-theme-neutral-primary-color, #323130)}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterDropdownGroup[_ngcontent-%COMP%]   .valueFormatDropdown[_ngcontent-%COMP%]:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color);outline:1px solid var(--fluent-theme-neutral-primary-hover-color, #232322)}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterDropdownGroup[_ngcontent-%COMP%]   .valueFormatOptions[_ngcontent-%COMP%]{height:30px}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterDropdownGroup[_ngcontent-%COMP%]     .mat-select-disabled .mat-select-value{color:var(--fluent-theme-black-color, #000)!important;opacity:.38}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .select-category-list-dropdown[_ngcontent-%COMP%]{width:150px}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .edit-category-lists[_ngcontent-%COMP%]:hover, .valueFormatterToolbarContainer[_ngcontent-%COMP%]   .edit-category-lists[_ngcontent-%COMP%]:active{background-color:var(--fluent-theme-neutral-quarter-alt-color, #E1DFDD)}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterToggleButtonsGroup[_ngcontent-%COMP%]{display:flex;align-items:center}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterToggleButtonsGroup[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{box-shadow:unset;display:inline-block;height:24px;margin:0;outline:unset;padding:0;vertical-align:middle;width:24px}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterToggleButtonsGroup[_ngcontent-%COMP%]   .icon-arrowDown[_ngcontent-%COMP%]{font-size:xx-small}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterToggleButtonsGroup[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterToggleButtonsGroup[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:inherit}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterToggleButtonsGroup[_ngcontent-%COMP%]   .isToggled[_ngcontent-%COMP%]{background-color:var(--fluent-theme-primary-color, #F2C811)!important}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterToggleButtonsGroup[_ngcontent-%COMP%]   .isToggled[_ngcontent-%COMP%]   .pbi-office-icon[_ngcontent-%COMP%]{fill:var(--button-primary-content-color)}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterToggleButtonsGroup[_ngcontent-%COMP%]   .isToggled[_ngcontent-%COMP%]   .pbi-office-icon[_ngcontent-%COMP%]     svg>path.OfficeIconColors_m22{fill:var(--button-primary-content-color)}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterToggleButtonsGroup[_ngcontent-%COMP%]   .splitButton[_ngcontent-%COMP%]{text-align:center;vertical-align:bottom;width:15px}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterToggleButtonsGroup[_ngcontent-%COMP%]   .splitButton[_ngcontent-%COMP%]:focus:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color);outline:1px solid var(--fluent-theme-neutral-primary-hover-color, #232322)}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterToggleButtonsGroup[_ngcontent-%COMP%]   .splitButton[_ngcontent-%COMP%]   .chevrondown[_ngcontent-%COMP%]{display:flex;align-items:center}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterToggleButtonsGroup[_ngcontent-%COMP%]   .btnDisabled[_ngcontent-%COMP%]{cursor:default}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterToggleButtonsGroup[_ngcontent-%COMP%]   .splitButtonText[_ngcontent-%COMP%]{width:16px}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterToggleButtonsGroup[_ngcontent-%COMP%]   .splitButtonText[_ngcontent-%COMP%]:focus:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color);outline:1px solid var(--fluent-theme-neutral-primary-hover-color, #232322)}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterToggleButtonsGroup[_ngcontent-%COMP%]   .focusOutline[_ngcontent-%COMP%]:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color);outline:1px solid var(--fluent-theme-neutral-primary-hover-color, #232322)}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterNumUpDownGroup[_ngcontent-%COMP%]{display:flex;align-items:center}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterNumUpDownGroup[_ngcontent-%COMP%]   .numUpDown[_ngcontent-%COMP%]{margin-left:10px;width:82px}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterNumUpDownGroup[_ngcontent-%COMP%]   .numUpDown[_ngcontent-%COMP%]     .mat-form-field{width:100%}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterNumUpDownGroup[_ngcontent-%COMP%]   .numUpDown[_ngcontent-%COMP%]     .numUpDownWrapper.modern-styles .unit-numupdown{border:1px solid var(--fluent-theme-neutral-tertiary-alt-color, #C8C6C4);background:var(--fluent-theme-white-color, #FFF)}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterNumUpDownGroup[_ngcontent-%COMP%]   .numUpDown[_ngcontent-%COMP%]     .numUpDownWrapper.modern-styles .unit-numupdown .navigationButtons .buttonBox{color:var(--fluent-theme-neutral-primary-color, #323130)}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterNumUpDownGroup[_ngcontent-%COMP%]   .numUpDown[_ngcontent-%COMP%]     .numUpDownWrapper.modern-styles .unit-numupdown .navigationButtons .buttonBox:hover{background-color:transparent}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterNumUpDownGroup[_ngcontent-%COMP%]   .numUpDown[_ngcontent-%COMP%]     .mat-form-field._mat-animation-noopable .mat-form-field-label{height:26px;padding-left:7px}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterNumUpDownGroup[_ngcontent-%COMP%]   .numUpDown[_ngcontent-%COMP%]     input{caret-color:var(--fluent-theme-neutral-tertiary-alt-color, #C8C6C4)}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterNumUpDownGroup[_ngcontent-%COMP%]   .numUpDown[_ngcontent-%COMP%]     .mat-form-field-appearance-legacy .mat-form-field-label{top:12px;left:6.5px}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterNumUpDownGroup[_ngcontent-%COMP%]   .numUpDown[_ngcontent-%COMP%]     .mat-form-field.mat-focused .mat-form-field-label{color:var(--fluent-theme-black-color, #000);opacity:.54}.valueFormatterToolbarContainer[_ngcontent-%COMP%]     .pbi-office-icon{width:16px}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .icon-decreaseDecimals[_ngcontent-%COMP%]{padding-left:4px;padding-top:4px}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .icon-format[_ngcontent-%COMP%]{padding-right:10px;padding-top:2px}.edit-category-lists-in-dropdown[_ngcontent-%COMP%]{border-top:1px solid var(--gray-60, #C8C6C4);display:flex;flex-direction:column}.edit-category-lists-button[_ngcontent-%COMP%], .create-category-list-button[_ngcontent-%COMP%]{width:100%;background-color:transparent;border:none;font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);color:var(--fluent-theme-neutral-primary-color, #323130)}.edit-category-lists-button[_ngcontent-%COMP%]:hover, .create-category-list-button[_ngcontent-%COMP%]:hover, .edit-category-lists-button[_ngcontent-%COMP%]:active, .create-category-list-button[_ngcontent-%COMP%]:active{background-color:var(--fluent-theme-neutral-quarter-alt-color, #E1DFDD)}']}),he}()},90127:function(ct,Ge,n){"use strict";n.d(Ge,{D:function(){return d}});var t=n(62458),i=n(50423),w=n(9380),a=n(82621),d=function(){function p(l,c){this.featureSwitchServices=l,this.formatValuePipe=c}return p.prototype.transform=function(l,c,y,r,C){var m;return void 0===r&&(r=!0),void 0===C&&(C="\u2014"),this.featureSwitchServices.featureSwitches.goalsCategoricalValues&&c?_.isNil(l)?C:(t.fF.assert(function(){return _.isNumber(l)},"formatGoalValue transform value"),null===(m=c[l])||void 0===m?void 0:m.displayName):this.formatValuePipe.transform(l,y,r,C)},p.\u0275fac=function(c){return new(c||p)(i.\u0275\u0275directiveInject(w.vZ,16),i.\u0275\u0275directiveInject(a.c,16))},p.\u0275pipe=i.\u0275\u0275definePipe({name:"formatGoalValue",type:p,pure:!0}),p}()},82621:function(ct,Ge,n){"use strict";n.d(Ge,{c:function(){return d}});var t=n(62458),i=n(58098),w=n(72489),a=n(50423),d=function(){function p(){}return p.prototype.transform=function(l,c,y,r){if(void 0===y&&(y=!0),void 0===r&&(r="\u2014"),t.fF.assert(function(){return _.isNil(l)||p.isPrimitiveValue(l)},"Should only use FormatValuePipe on PrimitiveValue type"),_.isNil(l)||!p.isPrimitiveValue(l))return r;c=c??p.getDefaultFormatString(l);var C=(0,w.Ue)({format:c,formatSingleValues:!0,columnType:void 0});return y&&_.isNumber(l)&&(C=(0,w.Ue)({format:c,value:_.isNumber(l)?l:0,precision:Number.NaN,displayUnitSystemType:i.V.WholeUnits,formatSingleValues:!1,allowFormatBeautification:!0,columnType:void 0})),C.format(l)},p.getDefaultFormatString=function(l){var c=p.valueTypeDescriptorFromPrimitiveValue(l);if(c.integer){if(l<p.MIN_INTEGER_VALUE_FOR_DISPLAY_UNITS)return p.INT_FORMAT_STRING_NO_DISPLAY_UNITS;var r=(0,w.Ue)({value:_.isNumber(l)?l:0}).displayUnit.project(l);return _.isInteger(r)?p.INT_FORMAT_STRING_NO_DISPLAY_UNITS:p.NUMERIC_FORMAT_STRING}return(0,w.v1)(c)},p.isPrimitiveValue=function(l){return!!(_.isString(l)||_.isNumber(l)||_.isBoolean(l)||_.isDate(l))},p.valueTypeDescriptorFromPrimitiveValue=function(l){return _.isDate(l)?{dateTime:!0}:_.isInteger(l)?{integer:!0}:_.isNumber(l)?{numeric:!0}:_.isBoolean(l)?{bool:!0}:_.isString(l)?{text:!0}:(t.fF.assert(function(){return!l},"Unsupported primitive value"),{none:!0})},p.INT_FORMAT_STRING_NO_DISPLAY_UNITS="#,0",p.NUMERIC_FORMAT_STRING="#,0.00",p.MIN_INTEGER_VALUE_FOR_DISPLAY_UNITS=1e3,p.\u0275fac=function(c){return new(c||p)},p.\u0275pipe=a.\u0275\u0275definePipe({name:"formatValue",type:p,pure:!0}),p}()},76777:function(ct,Ge,n){"use strict";n.d(Ge,{H:function(){return s}}),n(5432);var i=n(90127),w=n(82621),a=n(77476),d=n(77274),p=n(95859),l=n(91382),c=n(93367),y=n(94841),r=n(45411),C=n(16095),m=n(50423),k=n(54485),s=function(){function ne(ee){n.e("value-formatting").then(n.bind(n,24854)).then(function(Z){ee.registerIcons(Z.iconSpriteSheet.sprite)})}return ne.\u0275fac=function(Z){return new(Z||ne)(m.\u0275\u0275inject(k.u))},ne.\u0275mod=m.\u0275\u0275defineNgModule({type:ne}),ne.\u0275inj=m.\u0275\u0275defineInjector({providers:[i.D,w.c],imports:[a.CommonModule,p.v,d.uw,l.d,y.b,c.U,r.m,C.Z]}),ne}()},23873:function(ct,Ge,n){"use strict";n.d(Ge,{o:function(){return de}});var t=n(81337),i=n(50423),w=n(21661),a=n(30794),d=n(83317),p=n(3307),l=n(17653),c=n(77526),y=n(59973),r=n(48787),C=n(12587),m=n(35510),k=n(74466);function ne(V,b,L){return(0,k.ZP)(V,function(T){-1===T.start.column&&(T.start.column=0,T.end.column=L-1),-1===T.start.row&&(T.start.row=0,T.end.row=b-1),T.start.row=Math.max(0,Math.min(T.start.row,b-1)),T.start.column=Math.max(0,Math.min(T.start.column,L-1)),T.end.row=Math.max(0,Math.min(T.end.row,b-1)),T.end.column=Math.max(0,Math.min(T.end.column,L-1))})}function ee(V,b){switch(b){case"Date":if(V){_.isString(V)&&(V=V.replace(/\//g,"-"));var L=new Date(V);if(_.isFinite(L.getTime()))return L}return;case"Number":return _.isFinite(parseFloat(V))?parseFloat(V):void 0;default:return V}}(0,k.Fl)(!1);var Z=function(){function V(){this._columns$=new m.X([]),this._rows$=new m.X([])}return Object.defineProperty(V.prototype,"columns",{get:function(){return this._columns$.value},enumerable:!1,configurable:!0}),Object.defineProperty(V.prototype,"rows",{get:function(){return this._rows$.value},enumerable:!1,configurable:!0}),Object.defineProperty(V.prototype,"rows$",{get:function(){return this._rows$.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(V.prototype,"columns$",{get:function(){return this._columns$.asObservable()},enumerable:!1,configurable:!0}),V.prototype.setColumns=function(b){this._columns$.next(b||[])},V.prototype.setRows=function(b){this._rows$.next(b||[])},V.prototype.appendRow=function(){this.ensureRows(this.rows.length+1)},V.prototype.ensureRows=function(b){var L=this.rows;b<=L.length||this.setRows((0,t.ev)((0,t.ev)([],L,!0),_.map(new Array(b-L.length),function(){return[]}),!0))},V.prototype.setCellData=function(b,L){if(this.isValidCell(b)){var T=this.rows,X=(0,t.ev)((0,t.ev)((0,t.ev)([],_.slice(T,0,b.row),!0),[(0,t.ev)([],T[b.row],!0)],!1),_.slice(T,b.row+1,T.length),!0);X[b.row][b.column]=L,this.setRows(X)}},V.prototype.deleteRows=function(b,L){var T=this.rows;this.setRows((0,t.ev)((0,t.ev)([],_.slice(T,0,b),!0),_.slice(T,b+L,T.length),!0))},V.prototype.emptyRange=function(b){var L=this;this.setRows((0,k.Uy)(this.rows,function(T){for(var X=(b=ne(b,L.rows.length,L.columns.length)).start.row;X<=b.end.row;X++)for(var ue=b.start.column;ue<=b.end.column;ue++)T[X][ue]=null}))},V.prototype.isValidCell=function(b){return!(!_.isFinite(b.row)||!_.isFinite(b.column)||b.row>=this._rows$.value.length||b.column>=this._columns$.value.length||b.row<0||b.column<0)},V.\u0275prov=i.\u0275\u0275defineInjectable({token:V,factory:V.\u0275fac=function(L){return new(L||V)}}),V}(),v=function(){function V(b){this.dataSource=b,this._editingCell$=new m.X(void 0),this._isReadOnly$=new m.X(!1),this.isReadOnly$=this._isReadOnly$.asObservable()}return Object.defineProperty(V.prototype,"isReadOnly",{get:function(){return!!this._isReadOnly$.value},enumerable:!1,configurable:!0}),V.prototype.setReadOnly=function(b){this.cancelEditing(),this._isReadOnly$.next(!!b)},Object.defineProperty(V.prototype,"editingCell$",{get:function(){return this._editingCell$.asObservable()},enumerable:!1,configurable:!0}),V.prototype.isEditing=function(){return!!this._editingCell$.value},V.prototype.isEditingCell=function(b){var L=this._editingCell$.value;return!!L&&!!b&&b.column===L.column&&b.row===L.row},V.prototype.tryEditCell=function(b,L){this.isEditingCell(b)||this.isReadOnly||this.editCell(b,L)},V.prototype.editCell=function(b,L){this.commitPendingEdit(),this.dataSource.isValidCell(b)&&this._editingCell$.next({column:b.column,row:b.row,data:_.isNil(L)?this.dataSource.rows[b.row][b.column]:L})},V.prototype.setEditingData=function(b){var L,T,X,ue=void 0===(T=(L=this._editingCell$.value||{}).row)?0:T,Ne=void 0===(X=L.column)?0:X;this._editingCell$.next({data:b,row:ue,column:Ne})},V.prototype.commitPendingEdit=function(){var b=this._editingCell$.value;b&&(this.dataSource.setCellData(b,b.data),this._editingCell$.next(void 0))},V.prototype.cancelEditing=function(){this._editingCell$.value&&this._editingCell$.next(void 0)},V.\u0275fac=function(L){return new(L||V)(i.\u0275\u0275inject(Z))},V.\u0275prov=i.\u0275\u0275defineInjectable({token:V,factory:V.\u0275fac}),V}(),E=n(14172),I=n(57243),H=function(){function V(b){var L=this;this.dataStore=b,this.currentSelection$=new m.X(void 0),this._enforceSelectingColumn=!1,this.normalizedSelection$=this.currentSelection$.pipe((0,E.U)(function(T){return L.normalizeSelection(T)}),(0,I.d)({bufferSize:1,refCount:!0})),this.selectedCell$=this.currentSelection$.pipe((0,E.U)(function(T){return T&&{column:T.start.column,row:T.start.row}}),(0,I.d)({bufferSize:1,refCount:!0}))}return Object.defineProperty(V.prototype,"selectedCell",{get:function(){var L;return this.selectedCell$.pipe((0,r.q)(1)).subscribe(function(T){return L=T}),L},enumerable:!1,configurable:!0}),Object.defineProperty(V.prototype,"normalizedSelection",{get:function(){var L;return this.normalizedSelection$.pipe((0,r.q)(1)).subscribe(function(T){return L=T}),L},enumerable:!1,configurable:!0}),Object.defineProperty(V.prototype,"selection",{get:function(){return this.currentSelection$.value},enumerable:!1,configurable:!0}),Object.defineProperty(V.prototype,"enforceSelectingColumn",{set:function(L){this._enforceSelectingColumn=L},enumerable:!1,configurable:!0}),V.prototype.setSelection=function(b){b&&(this._enforceSelectingColumn&&(b.start={row:-1,column:b.start.column},b.end={row:-1,column:b.start.column}),b.start=this.normalizeCell(b.start),b.end=this.normalizeCell(b.end)),this.currentSelection$.next(b),this.clearFocus()},V.prototype.setFocus=function(b,L){this.ensureRowIsInVirtualScroll(b.row);var T=L.querySelector('[data-row="'.concat(b.row,'"][data-column="').concat(b.column,'"]'));T&&(T.focus(),this.focusedCell=b)},V.prototype.clearFocus=function(){this.focusedCell=void 0},V.prototype.ensureRowIsInVirtualScroll=function(b){var L=this.virtualScroll.getRenderedRange();b>=0&&(L.start>b||L.end<b)&&this.virtualScroll.scrollToIndex(b)},V.prototype.selectCell=function(b){b=this.normalizeCell(b),this.setSelection({start:b,end:b})},V.prototype.setSelectionStart=function(b){b=this.normalizeCell(b);var L=this.currentSelection$.value;this.setSelection({start:b,end:L?.end||b})},V.prototype.setSelectionEnd=function(b){b=this.normalizeCell(b);var L=this.currentSelection$.value;this.setSelection({start:L?.start||b,end:b})},V.prototype.selectAll=function(){this.selectCell({row:-1,column:-1})},V.prototype.normalizeCell=function(b){var L=this.dataStore.rows.length,T=this.dataStore.columns.length;return{row:_.isFinite(b?.row)?Math.max(-1,Math.min(b.row,L-1)):-1,column:_.isFinite(b?.column)?Math.max(-1,Math.min(b.column,T-1)):-1}},V.prototype.normalizeSelection=function(b){if(!_.isNil(b))return{start:{row:Math.min(b.start.row,b.end.row),column:Math.min(b.start.column,b.end.column)},end:{row:Math.max(b.start.row,b.end.row),column:Math.max(b.start.column,b.end.column)}}},V.\u0275fac=function(L){return new(L||V)(i.\u0275\u0275inject(Z))},V.\u0275prov=i.\u0275\u0275defineInjectable({token:V,factory:V.\u0275fac}),V}(),G=function(){function V(b,L,T){this.selectionService=b,this.dataSource=L,this.cellEditingService=T}return V.prototype.canCopyCurrentSelection=function(){return!!this.selectionService.normalizedSelection},V.prototype.copyCurrentSelection=function(b){return void 0===b&&(b=!1),(0,t.mG)(this,void 0,void 0,function(){var L,Qe;return(0,t.Jh)(this,function(Xe){switch(Xe.label){case 0:return(L=this.selectionService.normalizedSelection)?(Qe=ne({start:L.start||{row:0,column:0},end:L.end||{row:0,column:0}},this.dataSource.rows.length,this.dataSource.columns.length),[4,this.copy(Qe.start,Qe.end,!1,b)]):[2];case 1:return Xe.sent(),[2]}})})},V.prototype.copyAll=function(b){return(0,t.mG)(this,void 0,void 0,function(){return(0,t.Jh)(this,function(Ne){switch(Ne.label){case 0:return[4,this.copy({row:0,column:0},{row:this.dataSource.rows.length-1,column:this.dataSource.columns.length-1},b)];case 1:return Ne.sent(),[2]}})})},V.prototype.copy=function(b,L,T,X){void 0===X&&(X=!1);var Ne=_.map(_.slice(this.dataSource.rows,b.row,L.row+1),function(Ye){return _.slice(Ye,b.column,L.column+1)}),Qe=[];if(T){var Xe=_(this.dataSource.columns).map(function(Ye){return Ye.name}).slice(b.column,L.column+1).join("\t");Qe.push(Xe)}for(var it=0,ut=Ne;it<ut.length;it++){var pt=_.join(ut[it].map(function(Ye){return X?'"'+(Ye??"").toString().trimStart().replace(/"/g,'""'):(Ye??"").toString()}),"\t");Qe.push(pt)}return navigator.clipboard.writeText(_.join(Qe,"\r\n"))},V.prototype.pasteOverSelection=function(){return(0,t.mG)(this,void 0,void 0,function(){var b,L,T,X,ue,Ne;return(0,t.Jh)(this,function(Qe){switch(Qe.label){case 0:return!(b=this.selectionService.normalizedSelection)||this.cellEditingService.isReadOnly?[2]:[4,navigator.clipboard.readText()];case 1:return(L=Qe.sent())?(0===(T=_.map(L.split(/\n|\r\n/),function(Xe){return Xe.split(/\t/)})).length||(X=this.dataSource.columns,(ue=b.start||{row:0,column:0}).row=Math.max(0,ue.row),ue.column=Math.max(0,ue.column),this.dataSource.ensureRows(ue.row+T.length),Ne=(0,k.ZP)(this.dataSource.rows,function(Xe){for(var it=0;it<T.length;it++)for(var ut=ue.column,ot=0;ut<X.length&&ot<T[it].length;ut++,ot++){var pt=ee(T[it][ot],X[ut].type);pt&&(Xe[ue.row+it][ut]=pt)}}),this.dataSource.setRows(Ne),this.selectionService.setSelection({start:ue,end:{row:ue.row+T.length-1,column:ue.column+T[0].length-1}})),[2]):[2]}})})},V.\u0275fac=function(L){return new(L||V)(i.\u0275\u0275inject(H),i.\u0275\u0275inject(Z),i.\u0275\u0275inject(v))},V.\u0275prov=i.\u0275\u0275defineInjectable({token:V,factory:V.\u0275fac}),V}(),Y=function(V){return V.ArrowUp="ArrowUp",V.ArrowDown="ArrowDown",V.ArrowLeft="ArrowLeft",V.ArrowRight="ArrowRight",V}({}),ie=function(V){return V.Enter="Enter",V.Tab="Tab",V.Escape="Escape",V.Delete="Delete",V.Backspace="Backspace",V.F2="F2",V.Space=" ",V}({}),ye=function(){function V(b,L,T,X){this.cellEditing=b,this.selectionService=L,this.dataSource=T,this.clipboardService=X}return V.prototype.keydown=function(b,L,T){var X=!1;"c"===b.key&&b.ctrlKey&&!this.cellEditing.isEditing()?(this.clipboardService.copyCurrentSelection(),X=!0):"v"===b.key&&b.ctrlKey&&!this.cellEditing.isEditing()?(this.clipboardService.pasteOverSelection(),X=!0):"a"===b.key&&b.ctrlKey&&!this.cellEditing.isEditing()?(this.selectionService.selectAll(),X=!0):b.key.match(/^[a-z0-9]$/i)?X=this.handleAlphaNumeric(b.key):b.key in Y?X=b.altKey?this.handleColumnResize(b.key):this.handleArrowKey(b.key,(b.shiftKey||b.ctrlKey)&&T,L):b.key===ie.Enter?X=this.handleEnter(b):b.key===ie.Tab?X=this.handleTab():b.key===ie.Escape?X=this.handleEscape():b.key===ie.Delete||b.key===ie.Backspace?X=this.handleDelete():b.key===ie.F2?X=this.handleF2():b.key===ie.Space&&(X=this.handleSpace(b)),X&&(b.stopPropagation(),b.preventDefault())},V.prototype.handleF2=function(){var b=this.selectionService.selectedCell;return!(!b||this.cellEditing.isEditingCell(b)||this.cellEditing.isReadOnly||(this.cellEditing.tryEditCell(b),0))},V.prototype.handleAlphaNumeric=function(b){var L=this.selectionService.selectedCell;if(L&&!this.cellEditing.isEditingCell(L)&&!this.cellEditing.isReadOnly){var T=this.dataSource.columns[L.column];return this.cellEditing.tryEditCell(L,ee(b,T?.type)),!0}return!1},V.prototype.handleColumnResize=function(b){var L,T,X=null===(L=this.selectionService.focusedCell)||void 0===L?void 0:L.column;if(void 0!==X&&-1!==X){var ue=null!==(T=this.dataSource.columns[X].width)&&void 0!==T?T:50,Qe=this.dataSource.columns;switch(b){case Y.ArrowLeft:Qe[X].width=Math.max(ue-1,45),this.dataSource.setColumns(Qe);break;case Y.ArrowRight:Qe[X].width=ue+1,this.dataSource.setColumns(Qe)}}return!0},V.prototype.handleArrowKey=function(b,L,T){var X={row:-1,column:-1};if(this.selectionService.focusedCell)X={row:this.selectionService.focusedCell.row,column:this.selectionService.focusedCell.column};else{var ue=this.selectionService.selection;ue?.end&&L?X=(0,t.pi)({},ue.end):ue?.start&&(X=(0,t.pi)({},ue.start))}switch(b){case Y.ArrowUp:if(this.cellEditing.isEditing())return!1;X.row--;break;case Y.ArrowDown:X.row++,this.cellEditing.isReadOnly||this.dataSource.ensureRows(X.row+1);break;case Y.ArrowLeft:if(this.cellEditing.isEditing())return!1;X.column--;break;case Y.ArrowRight:if(this.cellEditing.isEditing())return!1;X.column++}return L&&this.selectionService.setSelectionEnd(X),this.selectionService.setFocus(X,T),!0},V.prototype.handleTab=function(){return this.selectionService.clearFocus(),!1},V.prototype.handleEnter=function(b){var L,T,X=this.selectionService.focusedCell;if(X)return this.selectionService.selectCell(X),null===(L=b.target)||void 0===L||L.blur(),null===(T=b.currentTarget)||void 0===T||T.focus(),!0;var ue=this.selectionService.selectedCell;if(ue){if(this.cellEditing.isEditingCell(ue)){var Ne={row:ue.row+1,column:ue.column};return this.dataSource.ensureRows(Ne.row+1),this.selectionService.selectCell(Ne),!0}if(!this.cellEditing.isReadOnly)return this.cellEditing.tryEditCell(ue),!0}return!1},V.prototype.handleSpace=function(b){var L,T,X=this.selectionService.focusedCell;if(X)return this.selectionService.selectCell(X),null===(L=b.target)||void 0===L||L.blur(),null===(T=b.currentTarget)||void 0===T||T.focus(),!0;var ue=this.selectionService.selectedCell;if(ue){if(this.cellEditing.isEditingCell(ue))return!1;if(!this.cellEditing.isReadOnly)return this.cellEditing.tryEditCell(ue),!0}return!1},V.prototype.handleEscape=function(){return this.cellEditing.cancelEditing(),!0},V.prototype.handleDelete=function(){var b=this.selectionService.normalizedSelection;return!(!b||this.cellEditing.isEditing()||this.cellEditing.isReadOnly||(-1===b.start.column&&-1!==b.start.row?(this.dataSource.deleteRows(b.start.row,b.end.row-b.start.row+1),this.selectionService.selectCell({row:b.start.row,column:-1})):this.dataSource.emptyRange(b),0))},V.\u0275fac=function(L){return new(L||V)(i.\u0275\u0275inject(v),i.\u0275\u0275inject(H),i.\u0275\u0275inject(Z),i.\u0275\u0275inject(G))},V.\u0275prov=i.\u0275\u0275defineInjectable({token:V,factory:V.\u0275fac}),V}(),ae=n(74848),J=function(){function V(b,L,T){this.cellEditing=b,this.selectionService=L,this.dataSource=T}return V.prototype.doubleClick=function(b,L){this.cellEditing.isEditingCell(L)||this.cellEditing.isReadOnly||(this.cellEditing.tryEditCell(L),b.preventDefault(),b.stopPropagation())},V.prototype.mouseDown=function(b,L,T){if(this._supportRightClickMenu&&b.button===ae.tc.Secondary)return b.preventDefault(),void b.stopPropagation();this.cellEditing.isEditingCell(L)||(b.preventDefault(),b.stopPropagation(),$(b.currentTarget).trigger("focus"),b.shiftKey&&T?this.selectionService.setSelectionEnd(L):this.selectionService.selectCell(L),this.isSelecting=!0)},V.prototype.mouseOver=function(b,L,T){this.isSelecting&&T&&(b.preventDefault(),b.stopPropagation(),this.selectionService.setSelectionEnd(L))},V.prototype.mouseLeave=function(b){this.isSelecting&&(this.isSelecting=!1,b.preventDefault(),b.stopPropagation())},V.prototype.mouseUpInCell=function(b,L){var T,X;if(this.showRightClickMenu=!1,L&&!this.cellEditing.isEditingCell(L)&&this._supportRightClickMenu&&b.button===ae.tc.Secondary){var ue=null===(T=this.selectionService.normalizedSelection)||void 0===T?void 0:T.start,Ne=null===(X=this.selectionService.normalizedSelection)||void 0===X?void 0:X.end;if(!ue||!Ne)return;return this.isInEffectiveRange(L,ue,Ne)&&(this.showRightClickMenu=!0),b.preventDefault(),void b.stopPropagation()}},Object.defineProperty(V.prototype,"supportRightClickMenu",{set:function(L){this._supportRightClickMenu=L},enumerable:!1,configurable:!0}),Object.defineProperty(V.prototype,"showRightClickMenu",{get:function(){return this._showRightClickMenu},set:function(L){this._showRightClickMenu=L},enumerable:!1,configurable:!0}),V.prototype.isInEffectiveRange=function(b,L,T){var X,Qe=(X=ne({start:L||{row:0,column:0},end:T||{row:0,column:0}},this.dataSource.rows.length,this.dataSource.columns.length)).start,Xe=X.end;return b.row>=Qe.row&&b.row<=Xe.row&&b.column>=Qe.column&&b.column<=Xe.column},V.\u0275fac=function(L){return new(L||V)(i.\u0275\u0275inject(v),i.\u0275\u0275inject(H),i.\u0275\u0275inject(Z))},V.\u0275prov=i.\u0275\u0275defineInjectable({token:V,factory:V.\u0275fac}),V}(),N=n(81900),he=n(77476),pe=n(74913),ce=function(){function V(){}return V.\u0275fac=function(L){return new(L||V)},V.\u0275cmp=i.\u0275\u0275defineComponent({type:V,selectors:[["tri-cell"]],inputs:{data:"data"},decls:1,vars:1,template:function(L,T){1&L&&i.\u0275\u0275text(0),2&L&&i.\u0275\u0275textInterpolate(T.data)},styles:["[_nghost-%COMP%]{cursor:default;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}"],changeDetection:0}),V}(),ge=n(33554),se=n(17174),xe=["editor"],me=function(){function V(){this.onDestroy$=new ge.t(1)}return V.prototype.ngOnInit=function(){var L,b=this;null===(L=this.focusEditor$)||void 0===L||L.pipe((0,d.R)(this.onDestroy$)).subscribe(function(){b.focusEditor()})},V.prototype.ngOnDestroy=function(){this.onDestroy$.next(),this.onDestroy$.complete()},V.prototype.ngOnChanges=function(b){if(b.data&&"Date"===this.column.type){var L=new Date(this.data);_.isFinite(L.getTime())&&(this.data=L.toISOString().slice(0,10))}if(b.column)switch(this.column.type){case"Date":this.type="date";break;case"Number":this.type="number";break;default:this.type="text"}},V.prototype.ngAfterViewInit=function(){this.focusEditor()},V.prototype.onDataChange=function(b){var L=ee(b,this.column.type);_.isNil(L)||this.dataChange(L)},V.prototype.focusEditor=function(){var b;null===(b=this.editor.nativeElement)||void 0===b||b.focus()},V.\u0275fac=function(L){return new(L||V)},V.\u0275cmp=i.\u0275\u0275defineComponent({type:V,selectors:[["tri-cell-editor"]],viewQuery:function(L,T){var X;(1&L&&i.\u0275\u0275viewQuery(xe,5),2&L)&&(i.\u0275\u0275queryRefresh(X=i.\u0275\u0275loadQuery())&&(T.editor=X.first))},inputs:{column:"column",data:"data",focusEditor$:"focusEditor$",dataChange:"dataChange"},features:[i.\u0275\u0275NgOnChangesFeature],decls:2,vars:3,consts:[["autofocus","",3,"type","ngModel","ngModelChange"],["editor",""]],template:function(L,T){1&L&&(i.\u0275\u0275elementStart(0,"input",0,1),i.\u0275\u0275listener("ngModelChange",function(ue){return T.onDataChange(ue)}),i.\u0275\u0275elementEnd()),2&L&&(i.\u0275\u0275property("type",T.type)("ngModel",T.data),i.\u0275\u0275attribute("aria-label",T.data))},dependencies:[se.Fj,se.JJ,se.On],styles:["input[_ngcontent-%COMP%]{border:0;width:100%;background:transparent;padding:0;display:inline-flex;align-items:center}input[_ngcontent-%COMP%]:focus, input[_ngcontent-%COMP%]:hover, input[_ngcontent-%COMP%]:active, input[_ngcontent-%COMP%]:active:hover, input[_ngcontent-%COMP%]:focus:hover{outline:none}[_ngcontent-%COMP%]::-webkit-outer-spin-button, [_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{-webkit-appearance:textfield;appearance:textfield;-moz-appearance:textfield}"],changeDetection:0}),V}(),Oe=function(){function V(){this.columnResized=new i.EventEmitter}return V.prototype.onMouseDown=function(b){var L,T,X;return this.isResizing=!0,this.pageX=b.pageX,this.initialWidth=null!==(X=null===(T=null===(L=b.target)||void 0===L?void 0:L.parentElement)||void 0===T?void 0:T.offsetWidth)&&void 0!==X?X:0,document.body.style.cursor="col-resize",b.stopPropagation(),!1},V.prototype.onDragStart=function(){return!1},V.prototype.onMouseMove=function(b){return!this.isResizing||(this.columnResized.emit(Math.max(0,this.initialWidth+b.pageX-this.pageX)),b.stopPropagation(),!1)},V.prototype.onMouseLeave=function(b){return!this.isResizing||(this.isResizing=!1,document.body.style.cursor="",b.stopPropagation(),!1)},V.\u0275fac=function(L){return new(L||V)},V.\u0275dir=i.\u0275\u0275defineDirective({type:V,selectors:[["","triResizeColumn",""]],hostBindings:function(L,T){1&L&&i.\u0275\u0275listener("mousedown",function(ue){return T.onMouseDown(ue)})("touchstart",function(ue){return T.onMouseDown(ue)})("dragstart",function(){return T.onDragStart()})("mousemove",function(ue){return T.onMouseMove(ue)},!1,i.\u0275\u0275resolveWindow)("touchmove",function(ue){return T.onMouseMove(ue)},!1,i.\u0275\u0275resolveWindow)("mouseup",function(ue){return T.onMouseLeave(ue)},!1,i.\u0275\u0275resolveWindow)("mouseleave",function(ue){return T.onMouseLeave(ue)},!1,i.\u0275\u0275resolveWindow)("touchend",function(ue){return T.onMouseLeave(ue)},!1,i.\u0275\u0275resolveWindow)},outputs:{columnResized:"columnResized"}}),V}(),Ce=function(){function V(){}return V.prototype.transform=function(b,L,T){return!!b&&(-1===b.start.row||L>=b.start.row&&L<=b.end.row)&&(-1===b.start.column||T>=b.start.column&&T<=b.end.column)},V.\u0275fac=function(L){return new(L||V)},V.\u0275pipe=i.\u0275\u0275definePipe({name:"isSelected",type:V,pure:!0}),V}(),Le=["headers"],ze=["table"],$e=["viewport"],We=["cellEditor"];function He(V,b){if(1&V){var L=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",11),i.\u0275\u0275listener("focus",function(ue){i.\u0275\u0275restoreView(L);var Ne=i.\u0275\u0275nextContext(2);return i.\u0275\u0275resetView(Ne.focusCell(ue,{row:-1,column:-1}))}),i.\u0275\u0275element(1,"tri-svg-icon",12),i.\u0275\u0275elementEnd()}if(2&V){var T=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("tabindex",T.focusedCell?-1:0),i.\u0275\u0275attribute("data-row",-1)("data-column",-1),i.\u0275\u0275advance(1),i.\u0275\u0275property("name","table_20_regular")}}var Je=function(b){return{headerName:b}};function j(V,b){if(1&V){var L=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",13),i.\u0275\u0275listener("focus",function(Xe){var ut=i.\u0275\u0275restoreView(L).index,ot=i.\u0275\u0275nextContext(2);return i.\u0275\u0275resetView(ot.focusCell(Xe,{row:-1,column:ut}))}),i.\u0275\u0275pipe(1,"isSelected"),i.\u0275\u0275elementContainer(2,14),i.\u0275\u0275elementStart(3,"span",15),i.\u0275\u0275listener("columnResized",function(Xe){var ut=i.\u0275\u0275restoreView(L).index,ot=i.\u0275\u0275nextContext(2);return i.\u0275\u0275resetView(ot.onColumnResized(Xe,ut))}),i.\u0275\u0275elementEnd()()}if(2&V){var T=b.$implicit,X=b.index,ue=i.\u0275\u0275nextContext(2),Ne=i.\u0275\u0275reference(9);i.\u0275\u0275styleProp("width",ue.columnWidths[X]),i.\u0275\u0275classProp("selection-start",i.\u0275\u0275pipeBind3(1,9,ue.selection,-1,X)),i.\u0275\u0275property("tabindex",ue.focusedCell||ue.rowHeaders||0!==X?-1:0),i.\u0275\u0275attribute("data-row",-1)("data-column",X),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngTemplateOutlet",T.headerTemplate||Ne)("ngTemplateOutletContext",i.\u0275\u0275pureFunction1(13,Je,T.name))}}function tt(V,b){if(1&V){var L=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",23),i.\u0275\u0275listener("focus",function(Ne){i.\u0275\u0275restoreView(L);var Qe=i.\u0275\u0275nextContext().index,Xe=i.\u0275\u0275nextContext(3);return i.\u0275\u0275resetView(Xe.focusCell(Ne,{row:Qe,column:-1}))}),i.\u0275\u0275pipe(1,"isSelected"),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd()}if(2&V){var T=i.\u0275\u0275nextContext().index,X=i.\u0275\u0275nextContext(3);i.\u0275\u0275classProp("selection-start",i.\u0275\u0275pipeBind3(1,5,X.selection,T,-1)),i.\u0275\u0275attribute("data-row",T)("data-column",-1),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",T+X.rowIndexDisplayOffset," ")}}var Ue=function(b,L,T,X){return{column:b,data:L,dataChange:T,focusEditor$:X}};function oe(V,b){if(1&V&&i.\u0275\u0275elementContainer(0,14,27),2&V){var L=i.\u0275\u0275nextContext().$implicit,T=i.\u0275\u0275nextContext(4),X=i.\u0275\u0275reference(5);i.\u0275\u0275property("ngTemplateOutlet",L.editTemplate||X)("ngTemplateOutletContext",i.\u0275\u0275pureFunction4(2,Ue,L,T.editingCell.data,T.onEditCellDataChange.bind(T),T.focusEditor$))}}var h=function(b,L){return{column:b,data:L}};function g(V,b){if(1&V&&i.\u0275\u0275elementContainer(0,14),2&V){var L=i.\u0275\u0275nextContext(),T=L.$implicit,X=L.index,ue=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275nextContext(3);var Ne=i.\u0275\u0275reference(7);i.\u0275\u0275property("ngTemplateOutlet",T.template||Ne)("ngTemplateOutletContext",i.\u0275\u0275pureFunction2(2,h,T,ue[X]))}}function u(V,b){if(1&V){var L=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",24),i.\u0275\u0275listener("focus",function(it){var ot=i.\u0275\u0275restoreView(L).index,pt=i.\u0275\u0275nextContext().index,Ye=i.\u0275\u0275nextContext(3);return i.\u0275\u0275resetView(Ye.focusCell(it,{row:pt,column:ot}))}),i.\u0275\u0275pipe(1,"isSelected"),i.\u0275\u0275template(2,oe,2,7,"ng-container",25),i.\u0275\u0275template(3,g,1,5,"ng-template",null,26,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd()}if(2&V){var T=b.index,X=i.\u0275\u0275reference(4),ue=i.\u0275\u0275nextContext().index;i.\u0275\u0275nextContext();var Ne=i.\u0275\u0275reference(1),Qe=i.\u0275\u0275nextContext(2);i.\u0275\u0275styleProp("width",Qe.columnWidths[T]),i.\u0275\u0275classProp("selected-top",ue===(null==Qe.selection||null==Qe.selection.start?null:Qe.selection.start.row)||0===ue&&-1===(null==Qe.selection||null==Qe.selection.start?null:Qe.selection.start.row))("selected-bottom",ue===(null==Qe.selection||null==Qe.selection.end?null:Qe.selection.end.row)&&-1!==(null==Qe.selection||null==Qe.selection.start?null:Qe.selection.start.row)||ue===Qe.dataSource.rows.length-1&&-1===(null==Qe.selection||null==Qe.selection.end?null:Qe.selection.end.row))("selected-left",T===(null==Qe.selection||null==Qe.selection.start?null:Qe.selection.start.column)||0===T&&-1===(null==Qe.selection||null==Qe.selection.start?null:Qe.selection.start.column))("selected-right",T===(null==Qe.selection||null==Qe.selection.end?null:Qe.selection.end.column)&&-1!==(null==Qe.selection||null==Qe.selection.start?null:Qe.selection.start.column)||T===Qe.dataSource.columns.length-1&&-1===(null==Qe.selection||null==Qe.selection.start?null:Qe.selection.start.column))("selected",i.\u0275\u0275pipeBind3(1,19,Qe.selection,ue,T))("selection-start",Qe.selectedCell&&Qe.selectedCell.row===ue&&Qe.selectedCell.column===T),i.\u0275\u0275attribute("data-row",ue)("data-column",T)("aria-colindex",(Ne.getRenderedRange().start||0)+T+1),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",Qe.editingCell&&Qe.editingCell.row===ue&&Qe.editingCell.column===T)("ngIfElse",X)}}function F(V,b){if(1&V&&(i.\u0275\u0275elementStart(0,"div",20),i.\u0275\u0275template(1,tt,3,9,"div",21),i.\u0275\u0275template(2,u,5,23,"div",22),i.\u0275\u0275elementEnd()),2&V){var L=b.index,T=i.\u0275\u0275nextContext(2).$implicit,X=i.\u0275\u0275nextContext();i.\u0275\u0275attribute("aria-rowindex",L+1),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",X.rowHeaders),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",T)("ngForTrackBy",X.trackByColumn)}}function W(V,b){if(1&V){var L=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",31),i.\u0275\u0275listener("mousedown",function(){i.\u0275\u0275restoreView(L);var X=i.\u0275\u0275nextContext(4);return i.\u0275\u0275resetView(X.appendRow(-1))})("focus",function(X){i.\u0275\u0275restoreView(L);var ue=i.\u0275\u0275nextContext(2).$implicit,Ne=i.\u0275\u0275nextContext(2);return i.\u0275\u0275resetView(Ne.focusCell(X,{row:ue.length,column:-1}))}),i.\u0275\u0275text(1,"+"),i.\u0275\u0275elementEnd()}}function te(V,b){if(1&V){var L=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",32),i.\u0275\u0275listener("mousedown",function(){var Qe=i.\u0275\u0275restoreView(L).index,Xe=i.\u0275\u0275nextContext(4);return i.\u0275\u0275resetView(Xe.appendRow(Qe))})("focus",function(Ne){var Xe=i.\u0275\u0275restoreView(L).index,it=i.\u0275\u0275nextContext(2).$implicit,ut=i.\u0275\u0275nextContext(2);return i.\u0275\u0275resetView(ut.focusCell(Ne,{row:it.length,column:Xe}))}),i.\u0275\u0275elementEnd()}if(2&V){var T=b.index,X=i.\u0275\u0275nextContext(4);i.\u0275\u0275styleProp("width",X.columnWidths[T])}}function U(V,b){if(1&V&&(i.\u0275\u0275elementStart(0,"div",28),i.\u0275\u0275template(1,W,2,0,"div",29),i.\u0275\u0275template(2,te,1,2,"div",30),i.\u0275\u0275elementEnd()),2&V){var L=i.\u0275\u0275nextContext(2).$implicit,T=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",T.rowHeaders),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",L)("ngForTrackBy",T.trackByColumn)}}function Q(V,b){if(1&V){var L=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"cdk-virtual-scroll-viewport",16,17),i.\u0275\u0275listener("scroll",function(){i.\u0275\u0275restoreView(L);var Ne=i.\u0275\u0275nextContext(2);return i.\u0275\u0275resetView(Ne.scroll())}),i.\u0275\u0275template(2,F,3,4,"div",18),i.\u0275\u0275template(3,U,3,3,"div",19),i.\u0275\u0275pipe(4,"async"),i.\u0275\u0275elementEnd()}if(2&V){var T=b.$implicit,X=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("itemSize",X.rowHeight),i.\u0275\u0275advance(2),i.\u0275\u0275property("cdkVirtualForOf",T)("cdkVirtualForTrackBy",X.trackByColumn)("cdkVirtualForTemplateCacheSize",100),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",X.showAppendRow&&!1===i.\u0275\u0275pipeBind1(4,5,X.isReadOnly$))}}function B(V,b){if(1&V&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",6,7),i.\u0275\u0275template(3,He,2,4,"div",8),i.\u0275\u0275template(4,j,4,15,"div",9),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(5,Q,5,7,"cdk-virtual-scroll-viewport",10),i.\u0275\u0275pipe(6,"async"),i.\u0275\u0275elementContainerEnd()),2&V){var L=b.$implicit,T=i.\u0275\u0275nextContext();i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",T.rowHeaders),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",L)("ngForTrackBy",T.trackByColumn),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(6,4,T.rows$))}}function P(V,b){if(1&V&&i.\u0275\u0275element(0,"tri-cell-editor",33),2&V){var T=b.data,X=b.dataChange,ue=b.focusEditor$;i.\u0275\u0275property("column",b.column)("data",T)("dataChange",X)("focusEditor$",ue)}}function q(V,b){1&V&&i.\u0275\u0275element(0,"tri-cell",34),2&V&&i.\u0275\u0275property("data",b.data)}function le(V,b){if(1&V&&(i.\u0275\u0275elementStart(0,"span",35),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&V){var L=b.headerName;i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",L," ")}}var de=function(V){function b(L,T,X,ue,Ne,Qe,Xe,it){var ut=V.call(this)||this;return ut.changeDetector=L,ut.cellEditing=T,ut.dataSource=X,ut.selectionService=ue,ut.mouseEventHandler=Ne,ut.keyboardEventHandler=Qe,ut.clipboardService=Xe,ut.resizeService=it,ut.columnWidths=[],ut.focusEditor$=new a.xQ,ut.rowHeight=24,ut.isReadOnly$=ut.cellEditing.isReadOnly$,ut.rowHeaders=!0,ut.showAppendRow=!0,ut.isReadOnly=!1,ut.allowExpandSelection=!0,ut.enforceSelectingColumn=!1,ut.clearSelectionOnDataChange=!1,ut.rowIndexDisplayOffset=0,ut.supportRightClickMenu=!1,ut.rowsChange=new i.EventEmitter,ut.selectionChange=new i.EventEmitter,ut.columnWidthChange=new i.EventEmitter,ut.showRightClickMenu=new i.EventEmitter,ut.columns$=ut.dataSource.columns$,ut.rows$=ut.dataSource.rows$,ut}return(0,t.ZT)(b,V),b.prototype.releaseMouse=function(L){this.mouseEventHandler.mouseLeave(L)},b.prototype.ngOnInit=function(){var L=this;this.changes$("isReadOnly").subscribe(function(T){return L.cellEditing.setReadOnly(T)}),this.changes$("columns").subscribe(function(T){L.columnWidths=_.map(T,function(X){return(_.isFinite(X.width)?X.width:50)+"px"}),L.dataSource.setColumns(T),L.clearSelectionOnDataChangeHandler()}),this.changes$("rows").subscribe(function(T){L.dataSource.setRows(T),L.clearSelectionOnDataChangeHandler()}),this.dataSource.rows$.pipe((0,d.R)(this.onDestroy$)).subscribe(function(T){L.rows!==T&&L.rowsChange.emit(T)}),this.dataSource.columns$.pipe((0,d.R)(this.onDestroy$)).subscribe(function(T){L.columnWidths=_.map(T,function(X){return(_.isFinite(X.width)?X.width:50)+"px"})}),this.cellEditing.editingCell$.pipe((0,p.T)(1),(0,d.R)(this.onDestroy$),(0,l.b)(function(T){L.editingCell=T,L.changeDetector.markForCheck()}),(0,c.x)(function(T,X){return T?.row===X?.row&&T?.column===X?.column})).subscribe(function(){L.editingCell?setTimeout(function(){return L.focusEditor$.next()},0):setTimeout(function(){return L.table.nativeElement.focus()},0)}),this.selectionService.enforceSelectingColumn=this.enforceSelectingColumn,this.selectionService.selectedCell$.pipe((0,d.R)(this.onDestroy$),(0,l.b)(function(T){L.selectedCell=T,L.changeDetector.markForCheck()}),(0,y.h)(function(T){return!!T}),(0,c.x)(function(T,X){return T.row===X.row&&T.column===X.column})).subscribe(function(T){var X,ue,Ne;L.cellEditing.isEditing()&&!L.cellEditing.isEditingCell(T)&&L.cellEditing.commitPendingEdit();var Qe=(null===(X=L.viewport.nativeElement)||void 0===X?void 0:X.scrollTop)/L.rowHeight,Xe=Qe+(null===(ue=L.viewport.nativeElement)||void 0===ue?void 0:ue.offsetHeight)/L.rowHeight;T.row>=0&&(T.row<Qe||T.row>=Xe)&&(null===(Ne=L.viewportComponent)||void 0===Ne||Ne.scrollToIndex(T.row))}),this.selectionService.normalizedSelection$.pipe((0,d.R)(this.onDestroy$)).subscribe(function(T){L.selection=T,L.selectionChange.emit(T),L.changeDetector.markForCheck()}),this.resizeService&&this.resizeService.resize$.pipe((0,d.R)(this.onDestroy$)).subscribe(function(){L.viewportComponent.checkViewportSize()}),this.mouseEventHandler.supportRightClickMenu=this.supportRightClickMenu},b.prototype.ngAfterViewInit=function(){var L=this;this.table.nativeElement.style.setProperty("--row-height",this.rowHeight+"px"),this.keyboardEventHandler.parentElement=this.table.nativeElement,setTimeout(function(){L.changes$("nextSelectionInput").subscribe(function(T){L.scrollToSelectedColumn(T),L.selectionService.setSelection(T)})},0),this.selectionService.virtualScroll=this.viewportComponent},b.prototype.scrollToSelectedColumn=function(L){var T=this;if(L){var X=0;if(this.nextSelectionInputChangedFromSelection(L)&&this.columns&&this.columnWidths)for(var ue=0;ue<this.columns.length&&ue<=L.start.column-1;ue++)X+=this.substractWidh(this.columnWidths[ue]);setTimeout(function(){var Ne,Qe;(null===(Ne=T.viewport)||void 0===Ne?void 0:Ne.nativeElement.clientWidth)<X&&(null===(Qe=T.viewport)||void 0===Qe||Qe.nativeElement.scroll(X,0))},300)}},b.prototype.nextSelectionInputChangedFromSelection=function(L){var T,X,ue,Ne,Qe,Xe,it,ut;return L.end.column!==(null===(X=null===(T=this.selection)||void 0===T?void 0:T.end)||void 0===X?void 0:X.column)||L.end.row!==(null===(Ne=null===(ue=this.selection)||void 0===ue?void 0:ue.end)||void 0===Ne?void 0:Ne.row)||L.start.row!==(null===(Xe=null===(Qe=this.selection)||void 0===Qe?void 0:Qe.start)||void 0===Xe?void 0:Xe.row)||L.start.column!==(null===(ut=null===(it=this.selection)||void 0===it?void 0:it.start)||void 0===ut?void 0:ut.column)},b.prototype.substractWidh=function(L){var T,X=null===(T=L?.match(/\d+(\.\d+)?/g))||void 0===T?void 0:T.map(Number);return X?X[0]:0},b.prototype.flushPendingChanges=function(){var L;return this.cellEditing.commitPendingEdit(),this.rows$.pipe((0,r.q)(1)).subscribe(function(T){return L=T}),L},b.prototype.trackByColumn=function(L){return L},b.prototype.scroll=function(){this.headers.nativeElement.style.transform="translateX(".concat(-this.viewport.nativeElement.scrollLeft,"px)")},b.prototype.onColumnResized=function(L,T){this.columnWidths[T]=L+"px",this.columnWidthChange.emit({width:L,column:T})},b.prototype.onCellMouseDown=function(L){var T=this.getCell();T&&this.mouseEventHandler.mouseDown(L,T,this.allowExpandSelection)},b.prototype.onCellMouseUp=function(L){var T=this.getCell();this.mouseEventHandler.mouseUpInCell(L,T),this.mouseEventHandler.showRightClickMenu&&this.showRightClickMenu.emit({pageX:L.pageX,pageY:L.pageY})},b.prototype.onCellMouseOver=function(L){var T=this.getCell();T&&this.mouseEventHandler.mouseOver(L,T,this.allowExpandSelection)},b.prototype.onCellDoubleClick=function(L){var T=this.getCell();T&&this.mouseEventHandler.doubleClick(L,T)},b.prototype.onEditCellDataChange=function(L){this.cellEditing.setEditingData(L)},b.prototype.focusCell=function(L,T){this.selectionService.setFocus(T,this.table.nativeElement),this.scrollViewportHorizontally(L.target)},Object.defineProperty(b.prototype,"focusedCell",{get:function(){return this.selectionService.focusedCell},enumerable:!1,configurable:!0}),b.prototype.scrollViewportHorizontally=function(L){var T=this.viewport.nativeElement,X=L.offsetLeft;(T.scrollLeft+T.clientWidth<X||T.scrollLeft>X)&&(T.scrollLeft=X-(T.clientWidth-L.clientWidth)/2,this.viewport.nativeElement.scrollIntoView())},b.prototype.handleKeydown=function(L){this.keyboardEventHandler.keydown(L,this.table.nativeElement,this.allowExpandSelection)},b.prototype.getCell=function(){var L=$("[data-clickable]:hover").get(0);if(L){var T=L.getAttribute("data-row"),X=L.getAttribute("data-column");if(T&&X){var ue=parseInt(T,10),Ne=parseInt(X,10);if(_.isFinite(ue)&&_.isFinite(Ne))return{row:ue,column:Ne}}}},b.prototype.appendRow=function(L){this.dataSource.appendRow(),this.selectionService.selectCell({row:this.dataSource.rows.length,column:L})},b.prototype.clearSelectionOnDataChangeHandler=function(){this.clearSelectionOnDataChange&&this.selectionService.setSelection(void 0)},b.\u0275fac=function(T){return new(T||b)(i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(v),i.\u0275\u0275directiveInject(Z),i.\u0275\u0275directiveInject(H),i.\u0275\u0275directiveInject(J),i.\u0275\u0275directiveInject(ye),i.\u0275\u0275directiveInject(G),i.\u0275\u0275directiveInject(N.g,8))},b.\u0275cmp=i.\u0275\u0275defineComponent({type:b,selectors:[["tri-grid"]],viewQuery:function(T,X){if(1&T&&(i.\u0275\u0275viewQuery(Le,5),i.\u0275\u0275viewQuery(ze,5),i.\u0275\u0275viewQuery($e,5,i.ElementRef),i.\u0275\u0275viewQuery(w.N7,5),i.\u0275\u0275viewQuery(We,5)),2&T){var ue=void 0;i.\u0275\u0275queryRefresh(ue=i.\u0275\u0275loadQuery())&&(X.headers=ue.first),i.\u0275\u0275queryRefresh(ue=i.\u0275\u0275loadQuery())&&(X.table=ue.first),i.\u0275\u0275queryRefresh(ue=i.\u0275\u0275loadQuery())&&(X.viewport=ue.first),i.\u0275\u0275queryRefresh(ue=i.\u0275\u0275loadQuery())&&(X.viewportComponent=ue.first),i.\u0275\u0275queryRefresh(ue=i.\u0275\u0275loadQuery())&&(X.cellEditor=ue.first)}},hostBindings:function(T,X){1&T&&i.\u0275\u0275listener("mouseup",function(Ne){return X.releaseMouse(Ne)},!1,i.\u0275\u0275resolveWindow)("mouseleave",function(Ne){return X.releaseMouse(Ne)},!1,i.\u0275\u0275resolveWindow)},inputs:{columns:"columns",rows:"rows",rowHeaders:"rowHeaders",showAppendRow:"showAppendRow",isReadOnly:"isReadOnly",allowExpandSelection:"allowExpandSelection",enforceSelectingColumn:"enforceSelectingColumn",nextSelectionInput:"nextSelectionInput",clearSelectionOnDataChange:"clearSelectionOnDataChange",rowIndexDisplayOffset:"rowIndexDisplayOffset",supportRightClickMenu:"supportRightClickMenu"},outputs:{rowsChange:"rowsChange",selectionChange:"selectionChange",columnWidthChange:"columnWidthChange",showRightClickMenu:"showRightClickMenu"},features:[i.\u0275\u0275ProvidersFeature([H,v,Z,J,ye,G]),i.\u0275\u0275InheritDefinitionFeature],decls:10,vars:3,consts:[["tabindex","-1","role","table",1,"table",3,"keydown","mousedown","mouseover","mouseup","dblclick"],["table",""],[4,"ngIf"],["defaultCellEditor",""],["defaultViewCell",""],["defaultHeaderCell",""],["role","row",1,"headers"],["headers",""],["class","header selectable table-icon","role","columnheader","data-clickable","true",3,"tabindex","focus",4,"ngIf"],["class","header selectable","data-clickable","true","role","columnheader",3,"selection-start","tabindex","width","focus",4,"ngFor","ngForOf","ngForTrackBy"],[3,"itemSize","scroll",4,"ngIf"],["role","columnheader","data-clickable","true",1,"header","selectable","table-icon",3,"tabindex","focus"],["tri-svg-icon-20","",1,"table-svg-icon",3,"name"],["data-clickable","true","role","columnheader",1,"header","selectable",3,"tabindex","focus"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["triResizeColumn","",1,"resize-handle",3,"columnResized"],[3,"itemSize","scroll"],["viewport",""],["class","row","role","row",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy","cdkVirtualForTemplateCacheSize"],["class","row","role","row","tabindex","0",4,"ngIf"],["role","row",1,"row"],["class","cell row-header selectable","role","gridcell","tabindex","-1","data-clickable","true",3,"selection-start","focus",4,"ngIf"],["class","cell selectable","role","gridcell","tabindex","-1","data-clickable","true",3,"selected-top","selected-bottom","selected-left","selected-right","selected","selection-start","width","focus",4,"ngFor","ngForOf","ngForTrackBy"],["role","gridcell","tabindex","-1","data-clickable","true",1,"cell","row-header","selectable",3,"focus"],["role","gridcell","tabindex","-1","data-clickable","true",1,"cell","selectable",3,"focus"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf","ngIfElse"],["viewCell",""],["cellEditor",""],["role","row","tabindex","0",1,"row"],["class","cell row-header","role","gridcell","tabindex","-1",3,"mousedown","focus",4,"ngIf"],["tabindex","-1","class","cell","role","gridcell",3,"width","mousedown","focus",4,"ngFor","ngForOf","ngForTrackBy"],["role","gridcell","tabindex","-1",1,"cell","row-header",3,"mousedown","focus"],["tabindex","-1","role","gridcell",1,"cell",3,"mousedown","focus"],[3,"column","data","dataChange","focusEditor$"],[3,"data"],[1,"default-header-name"]],template:function(T,X){1&T&&(i.\u0275\u0275elementStart(0,"div",0,1),i.\u0275\u0275listener("keydown",function(Ne){return X.handleKeydown(Ne)})("mousedown",function(Ne){return X.onCellMouseDown(Ne)})("mouseover",function(Ne){return X.onCellMouseOver(Ne)})("mouseup",function(Ne){return X.onCellMouseUp(Ne)})("dblclick",function(Ne){return X.onCellDoubleClick(Ne)}),i.\u0275\u0275template(2,B,7,6,"ng-container",2),i.\u0275\u0275pipe(3,"async"),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(4,P,1,4,"ng-template",null,3,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(6,q,1,1,"ng-template",null,4,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(8,le,2,1,"ng-template",null,5,i.\u0275\u0275templateRefExtractor)),2&T&&(i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(3,1,X.columns$)))},dependencies:[he.NgForOf,he.NgIf,he.NgTemplateOutlet,w.xd,w.x0,w.N7,pe.M,ce,me,Oe,he.AsyncPipe,Ce],styles:['[_nghost-%COMP%]{height:100%;width:100%;display:flex;background:var(--colorNeutralBackground1);color:var(--colorNeutralForeground1);--row-height: $default-row-height}[_nghost-%COMP%]   *[_ngcontent-%COMP%]{box-sizing:border-box}[_nghost-%COMP%]   *[_ngcontent-%COMP%]:focus{outline:none}cdk-virtual-scroll-viewport[_ngcontent-%COMP%]{overflow-x:auto;height:calc(100% - var(--row-height));position:absolute;top:var(--row-height);bottom:0;width:100%;scrollbar-width:thin}[_ngcontent-%COMP%]::-webkit-scrollbar{width:5px;height:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border:1px solid var(--fluentThemeNeutralSecondaryAltColor, #767676);border-radius:20px;background-color:var(--fluentThemeNeutralSecondaryAltColor, #767676)}.table[_ngcontent-%COMP%]{height:100%;display:flex;position:relative;max-width:100%;overflow-x:hidden;width:max-content;padding-right:5px}.table[_ngcontent-%COMP%]   .headers[_ngcontent-%COMP%]{text-align:start;display:flex;flex-wrap:nowrap;height:var(--row-height);width:100%;border-left:1px solid var(--colorNeutralStroke2)}.table[_ngcontent-%COMP%]   .headers[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:inline-flex;position:relative;min-width:45px;height:var(--row-height);line-height:12px;margin:0;padding:3px 6px;background:var(--colorNeutralBackground2);flex-shrink:0;flex-grow:0;overflow:hidden;border-top:solid 1px var(--colorNeutralStroke2);border-bottom:solid 1px var(--colorNeutralStroke2);border-right:solid 1px var(--colorNeutralStroke2);font-family:var(--fluent-font-family, "Segoe UI");font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-regular, 400)}.table[_ngcontent-%COMP%]   .headers[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .default-header-name[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.table[_ngcontent-%COMP%]   .headers[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .resize-handle[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;opacity:0;width:10px;cursor:col-resize}.table[_ngcontent-%COMP%]   .headers[_ngcontent-%COMP%]   .header.selection-start[_ngcontent-%COMP%]{background:var(--colorNeutralBackground2Selected);border-bottom:2px solid var(--colorNeutralStrokeAccessibleSelected);color:var(--colorNeutralForeground1Selected);font-family:var(--fluent-font-family, "Segoe UI");font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-semi-bold, 600)}@media (forced-colors: active){.table[_ngcontent-%COMP%]   .headers[_ngcontent-%COMP%]   .header.selection-start[_ngcontent-%COMP%]{border-bottom:2px solid var(--globalColorhcHighlight)!important}}.table[_ngcontent-%COMP%]   .headers[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]:focus{border:2px solid var(--colorNeutralStrokeFocus2);border-radius:4px;padding:2px 4px}.table[_ngcontent-%COMP%]   .headers[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]:hover{background:var(--colorNeutralBackground2Hover);color:var(--colorNeutralForeground1Hover)}.table[_ngcontent-%COMP%]   .headers[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]:active{background:var(--colorNeutralBackground2Pressed);color:var(--colorNeutralForeground1Pressed)}.table[_ngcontent-%COMP%]   .headers[_ngcontent-%COMP%]   .header.table-icon[_ngcontent-%COMP%]{justify-content:center;align-items:center}.table[_ngcontent-%COMP%]   .headers[_ngcontent-%COMP%]   .header.table-icon[_ngcontent-%COMP%]:focus{padding:2px 5px 2px 4px}.table[_ngcontent-%COMP%]   .headers[_ngcontent-%COMP%]   .header.table-icon[_ngcontent-%COMP%]   .table-svg-icon[_ngcontent-%COMP%]{fill:var(--colorNeutralForeground2)}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;border-left:solid 1px var(--colorNeutralStroke2)}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .selectable[_ngcontent-%COMP%]:not(.selection-start):focus{border:2px solid var(--colorNeutralStrokeFocus2);border-radius:4px;padding:1.5px 4px}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]{cursor:default;position:relative;display:inline-flex;flex-grow:0;min-width:45px;height:var(--row-height);padding:3.5px 6px;align-items:center;overflow:hidden;border-bottom:solid 1px var(--colorNeutralStroke2);border-right:solid 1px var(--colorNeutralStroke2);background:var(--colorSubtleBackground);outline:none;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;font-family:var(--fluent-font-family, "Segoe UI");font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-regular, 400)}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.number-cell[_ngcontent-%COMP%]{text-align:right}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.row-header[_ngcontent-%COMP%]{background:var(--colorNeutralBackground2);justify-content:center;padding:3px 0 0}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.row-header.selection-start[_ngcontent-%COMP%]{background:var(--colorNeutralBackground2Selected);border-right:2px solid var(--colorNeutralStrokeAccessibleSelected);color:var(--colorNeutralForeground1Selected);font-family:var(--fluent-font-family, "Segoe UI");font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-semi-bold, 600)}@media (forced-colors: active){.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.row-header.selection-start[_ngcontent-%COMP%]{border-right:2px solid var(--globalColorhcHighlight)!important}}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.row-header[_ngcontent-%COMP%]:hover{background:var(--colorNeutralBackground2Hover);color:var(--colorNeutralForeground1Hover)}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.row-header[_ngcontent-%COMP%]:active{background:var(--colorNeutralBackground2Pressed);color:var(--colorNeutralForeground1Pressed)}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.row-header[_ngcontent-%COMP%]:focus{padding:1px 1px 0 0}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.selected[_ngcontent-%COMP%]{background:var(--colorSubtleBackgroundSelected)}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.selected.selected-top[_ngcontent-%COMP%]:not(.selected-bottom){padding-bottom:5px}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.selected.selected-bottom[_ngcontent-%COMP%]:not(.selected-top){padding-top:5px}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.selected.selected-top[_ngcontent-%COMP%]{border-top:2px solid var(--colorNeutralStrokeAccessibleSelected);padding-top:4px}@media (forced-colors: active){.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.selected.selected-top[_ngcontent-%COMP%]{border-top:2px solid var(--globalColorhcHighlight)!important}}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.selected.selected-top[_ngcontent-%COMP%]:before{border-top:1px solid var(--colorNeutralStrokeFocus1);top:0}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.selected.selected-bottom[_ngcontent-%COMP%]{border-bottom:2px solid var(--colorNeutralStrokeAccessibleSelected);padding-bottom:4px}@media (forced-colors: active){.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.selected.selected-bottom[_ngcontent-%COMP%]{border-bottom:2px solid var(--globalColorhcHighlight)!important}}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.selected.selected-bottom[_ngcontent-%COMP%]:before{border-bottom:1px solid var(--colorNeutralStrokeFocus1);bottom:0}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.selected.selected-left[_ngcontent-%COMP%]{border-left:2px solid var(--colorNeutralStrokeAccessibleSelected);padding-left:4px}@media (forced-colors: active){.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.selected.selected-left[_ngcontent-%COMP%]{border-left:2px solid var(--globalColorhcHighlight)!important}}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.selected.selected-left[_ngcontent-%COMP%]:before{border-left:1px solid var(--colorNeutralStrokeFocus1);left:0}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.selected.selected-right[_ngcontent-%COMP%]{border-right:2px solid var(--colorNeutralStrokeAccessibleSelected);padding-right:4px}@media (forced-colors: active){.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.selected.selected-right[_ngcontent-%COMP%]{border-right:2px solid var(--globalColorhcHighlight)!important}}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.selected.selected-right[_ngcontent-%COMP%]:before{border-right:1px solid var(--colorNeutralStrokeFocus1);right:0}'],changeDetection:0}),b}(C.w)},11962:function(ct,Ge,n){"use strict";n.d(Ge,{oY:function(){return d.o},V7:function(){return y}});var t=n(17174),i=n(77476),w=n(21661),a=n(78035),d=n(23873),p=n(17177),l=n(50423),y=function(){function C(){}return C.\u0275fac=function(k){return new(k||C)},C.\u0275mod=l.\u0275\u0275defineNgModule({type:C}),C.\u0275inj=l.\u0275\u0275defineInjector({imports:[i.CommonModule,t.u5,a.Y,w.Cl,p.T6]}),C}();n(81900)},81900:function(ct,Ge,n){"use strict";n.d(Ge,{g:function(){return i}});var i=new(n(50423).InjectionToken)("ResizeService")},16622:function(ct,Ge,n){"use strict";n.d(Ge,{_:function(){return d},u:function(){return p}});var t=n(35510),i=n(17177),w=n(16434),a=n(50423),d=function(){function l(){}return l.prototype.getSvgSpriteSheet=function(c){return new t.X('\n            <svg id="'.concat(c,'">\n                <?xml version="1.0" encoding="utf-8"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><symbol viewBox="0 0 20 20" id="add_circle_20_filled" xmlns="http://www.w3.org/2000/svg"><path d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zM6 10c0 .28.22.5.5.5h3v3a.5.5 0 001 0v-3h3a.5.5 0 000-1h-3v-3a.5.5 0 00-1 0v3h-3a.5.5 0 00-.5.5z"/></symbol><symbol viewBox="0 0 20 20" id="add_circle_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M6 10c0-.28.22-.5.5-.5h3v-3a.5.5 0 011 0v3h3a.5.5 0 010 1h-3v3a.5.5 0 01-1 0v-3h-3A.5.5 0 016 10z"/><path d="M10 18a8 8 0 100-16 8 8 0 000 16zm0-1a7 7 0 110-14 7 7 0 010 14z"/></symbol><symbol viewBox="0 0 20 20" id="alert_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a5.92 5.92 0 015.98 5.36l.02.22v3.82l.92 2.22a1 1 0 01.06.17l.01.08.01.13a1 1 0 01-.75.97l-.11.02L16 15h-3.5v.17a2.5 2.5 0 01-5 0V15H4a1 1 0 01-.26-.03l-.13-.04a1 1 0 01-.6-1.05l.02-.13.05-.13L4 11.4V7.57A5.9 5.9 0 0110 2zm1.5 13h-3v.15a1.5 1.5 0 001.36 1.34l.14.01c.78 0 1.42-.6 1.5-1.36V15zM10 3a4.9 4.9 0 00-4.98 4.38L5 7.6v3.9l-.04.2L4 14h12l-.96-2.3-.04-.2V7.61A4.9 4.9 0 0010 3z"/></symbol><symbol viewBox="0 0 20 20" id="book_open_20_filled" xmlns="http://www.w3.org/2000/svg"><path d="M10 16.14c-.5.53-1.21.86-2 .86H3.75C2.78 17 2 16.22 2 15.25V4.75C2 3.78 2.78 3 3.75 3H8c.79 0 1.5.33 2 .86.5-.53 1.21-.86 2-.86h4.25c.97 0 1.75.78 1.75 1.75v10.5c0 .97-.78 1.75-1.75 1.75H12c-.79 0-1.5-.33-2-.86zM3.5 4.75v10.5c0 .14.11.25.25.25H8c.69 0 1.25-.56 1.25-1.25v-8.5c0-.69-.56-1.25-1.25-1.25H3.75a.25.25 0 00-.25.25zm7.25 9.5c0 .69.56 1.25 1.25 1.25h4.25c.14 0 .25-.11.25-.25V4.75a.25.25 0 00-.25-.25H12c-.69 0-1.25.56-1.25 1.25v8.5z"/></symbol><symbol viewBox="0 0 20 20" id="book_open_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M10 16c-.46.6-1.18 1-2 1H3.5A1.5 1.5 0 012 15.5v-11C2 3.67 2.67 3 3.5 3H8c.82 0 1.54.4 2 1 .46-.6 1.18-1 2-1h4.5c.83 0 1.5.67 1.5 1.5v11c0 .83-.67 1.5-1.5 1.5H12a2.5 2.5 0 01-2-1zM3 4.5v11c0 .28.22.5.5.5H8c.83 0 1.5-.67 1.5-1.5v-9C9.5 4.67 8.83 4 8 4H3.5a.5.5 0 00-.5.5zm7.5 10c0 .83.67 1.5 1.5 1.5h4.5a.5.5 0 00.5-.5v-11a.5.5 0 00-.5-.5H12c-.83 0-1.5.67-1.5 1.5v9z"/></symbol><symbol viewBox="0 0 20 20" id="checkbox_checked_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M13.85 7.85a.5.5 0 00-.7-.7L8.5 11.79l-1.65-1.64a.5.5 0 00-.7.7l2 2c.2.2.5.2.7 0l5-5z"/><path d="M5.68 3A2.68 2.68 0 003 5.68v8.64C3 15.8 4.2 17 5.68 17h8.64C15.8 17 17 15.8 17 14.32V5.68C17 4.2 15.8 3 14.32 3H5.68zM4 5.68C4 4.75 4.75 4 5.68 4h8.64c.93 0 1.68.75 1.68 1.68v8.64c0 .93-.75 1.68-1.68 1.68H5.68C4.75 16 4 15.25 4 14.32V5.68z"/></symbol><symbol viewBox="0 0 20 20" id="checkbox_unchecked_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M3 5c0-1.1.9-2 2-2h10a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2V5zm2-1a1 1 0 00-1 1v10a1 1 0 001 1h10a1 1 0 001-1V5a1 1 0 00-1-1H5z"/></symbol><symbol viewBox="0 0 20 20" id="checkmark_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M3.37 10.17a.5.5 0 00-.74.66l4 4.5c.19.22.52.23.72.02l10.5-10.5a.5.5 0 00-.7-.7L7.02 14.27l-3.65-4.1z"/></symbol><symbol viewBox="0 0 20 20" id="chevron_down_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M15.85 7.65c.2.2.2.5 0 .7l-5.46 5.49a.55.55 0 01-.78 0L4.14 8.35a.5.5 0 11.71-.7L10 12.8l5.15-5.16c.2-.2.5-.2.7 0z"/></symbol><symbol viewBox="0 0 20 20" id="chevron_left_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M12.35 15.85a.5.5 0 01-.7 0L6.16 10.4a.55.55 0 010-.78l5.49-5.47a.5.5 0 01.7.71L7.2 10l5.16 5.15c.2.2.2.5 0 .7z"/></symbol><symbol viewBox="0 0 20 20" id="chevron_right_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M7.65 4.15c.2-.2.5-.2.7 0l5.49 5.46c.21.22.21.57 0 .78l-5.49 5.46a.5.5 0 01-.7-.7L12.8 10 7.65 4.85a.5.5 0 010-.7z"/></symbol><symbol viewBox="0 0 20 20" id="chevron_up_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M4.15 12.35a.5.5 0 010-.7L9.6 6.16a.55.55 0 01.78 0l5.46 5.49a.5.5 0 01-.7.7L10 7.2l-5.15 5.16a.5.5 0 01-.7 0z"/></symbol><symbol viewBox="0 0 16 16" id="circle_16_filled" xmlns="http://www.w3.org/2000/svg"><path d="M8 14A6 6 0 108 2a6 6 0 000 12z"/></symbol><symbol viewBox="0 0 16 16" id="circle_16_regular" xmlns="http://www.w3.org/2000/svg"><path d="M8 14A6 6 0 108 2a6 6 0 000 12zm0-1A5 5 0 118 3a5 5 0 010 10z"/></symbol><symbol viewBox="0 0 20 20" id="circle_20_filled" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a8 8 0 100 16 8 8 0 000-16z"/></symbol><symbol viewBox="0 0 20 20" id="circle_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M10 3a7 7 0 100 14 7 7 0 000-14zm-8 7a8 8 0 1116 0 8 8 0 01-16 0z"/></symbol><symbol viewBox="0 0 20 20" id="clock_20_filled" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a8 8 0 110 16 8 8 0 010-16zm-.5 3a.5.5 0 00-.5.5v5.09a.5.5 0 00.5.41h3.09a.5.5 0 00-.09-1H10V5.41A.5.5 0 009.5 5z"/></symbol><symbol viewBox="0 0 20 20" id="clock_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a8 8 0 110 16 8 8 0 010-16zm0 1a7 7 0 100 14 7 7 0 000-14zm-.5 2a.5.5 0 01.5.41V10h2.5a.5.5 0 01.09 1H9.5a.5.5 0 01-.5-.41V5.5c0-.28.22-.5.5-.5z"/></symbol><symbol viewBox="0 0 20 20" id="database_20_filled" xmlns="http://www.w3.org/2000/svg"><path d="M10 8c3.31 0 6-1.34 6-3s-2.69-3-6-3-6 1.34-6 3 2.69 3 6 3zm4.69.02c.47-.24.93-.54 1.31-.9V15c0 1.66-2.69 3-6 3s-6-1.34-6-3V7.12c.38.36.84.66 1.31.9C6.56 8.64 8.22 9 10 9c1.78 0 3.44-.36 4.69-.98z"/></symbol><symbol viewBox="0 0 20 20" id="database_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M4 5c0-1 .88-1.76 1.9-2.22C6.98 2.28 8.43 2 10 2c1.57 0 3.02.29 4.1.78C15.12 3.24 16 3.99 16 5v10c0 1-.88 1.76-1.9 2.22-1.08.5-2.53.78-4.1.78-1.57 0-3.02-.29-4.1-.78C4.88 16.76 4 16.01 4 15V5zm1 0c0 .37.36.88 1.32 1.31.91.42 2.22.69 3.68.69s2.77-.27 3.68-.69C14.64 5.88 15 5.37 15 5c0-.37-.36-.88-1.32-1.31A9.19 9.19 0 0010 3c-1.46 0-2.77.27-3.68.69C5.36 4.12 5 4.63 5 5zm10 1.7c-.27.2-.58.38-.9.52-1.08.5-2.53.78-4.1.78-1.57 0-3.02-.29-4.1-.78A4.92 4.92 0 015 6.7V15c0 .37.36.88 1.32 1.31.91.42 2.22.69 3.68.69s2.77-.27 3.68-.69c.96-.43 1.32-.94 1.32-1.31V6.7z"/></symbol><symbol viewBox="0 0 16 16" id="document_16_regular" xmlns="http://www.w3.org/2000/svg"><path d="M5 1a2 2 0 00-2 2v10c0 1.1.9 2 2 2h6a2 2 0 002-2V5.41c0-.4-.16-.78-.44-1.06L9.65 1.44A1.5 1.5 0 008.59 1H5zM4 3a1 1 0 011-1h3v2.5C8 5.33 8.67 6 9.5 6H12v7a1 1 0 01-1 1H5a1 1 0 01-1-1V3zm7.8 2H9.5a.5.5 0 01-.5-.5V2.2L11.8 5z"/></symbol><symbol viewBox="0 0 20 20" id="filter_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M7.5 13h5a.5.5 0 01.09 1H7.5a.5.5 0 01-.09-1h5.09-5zm-2-4h9a.5.5 0 01.09 1H5.5a.5.5 0 01-.09-1h9.09-9zm-2-4h13a.5.5 0 01.09 1H3.5a.5.5 0 01-.09-1H16.5h-13z"/></symbol><symbol viewBox="0 0 20 20" id="folder_20_filled" xmlns="http://www.w3.org/2000/svg"><path d="M10.56 4.5h4.94a2.5 2.5 0 012.48 2.17l.01.17L18 7v7.5a2.5 2.5 0 01-2.34 2.5H4.5A2.5 2.5 0 012 14.66V7.5h5.22c.3-.04.6-.16.83-.36l.1-.1 2.41-2.54zM7.16 3c.28 0 .54.07.77.21l.14.09 1.31.99-1.95 2.05-.06.06a.5.5 0 01-.22.1H2v-1A2.5 2.5 0 014.34 3h2.83z"/></symbol><symbol viewBox="0 0 20 20" id="folder_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M7.17 3c.27 0 .53.07.76.21l.14.09 1.6 1.2h5.83a2.5 2.5 0 012.48 2.17l.01.17L18 7v7.5a2.5 2.5 0 01-2.34 2.5H4.5A2.5 2.5 0 012 14.66V5.5A2.5 2.5 0 014.34 3h2.83zm.99 4.03a1.5 1.5 0 01-.94.46l-.15.01H3v7c0 .78.6 1.42 1.36 1.5H15.5c.78 0 1.42-.6 1.5-1.36V7c0-.78-.6-1.42-1.36-1.5H9.62L8.16 7.03zM7.16 4H4.5c-.78 0-1.42.6-1.5 1.36V6.5h4.07a.5.5 0 00.3-.1l.06-.06L8.7 5.02 7.47 4.1a.5.5 0 00-.22-.1h-.08z"/></symbol><symbol viewBox="0 0 20 20" id="grid_dots_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M5.25 4a1.25 1.25 0 11-2.5 0 1.25 1.25 0 012.5 0zm12 12a1.25 1.25 0 11-2.5 0 1.25 1.25 0 012.5 0zM16 11.25a1.25 1.25 0 100-2.5 1.25 1.25 0 000 2.5zM17.25 4a1.25 1.25 0 11-2.5 0 1.25 1.25 0 012.5 0zM10 17.25a1.25 1.25 0 100-2.5 1.25 1.25 0 000 2.5zM11.25 10a1.25 1.25 0 11-2.5 0 1.25 1.25 0 012.5 0zM10 5.25a1.25 1.25 0 100-2.5 1.25 1.25 0 000 2.5zM5.25 16a1.25 1.25 0 11-2.5 0 1.25 1.25 0 012.5 0zM4 11.25a1.25 1.25 0 100-2.5 1.25 1.25 0 000 2.5z"/></symbol><symbol viewBox="0 0 20 20" id="home_20_filled" xmlns="http://www.w3.org/2000/svg"><path d="M11 2.39a1.5 1.5 0 00-2 0L3.5 7.33c-.32.28-.5.69-.5 1.12v7.05c0 .83.67 1.5 1.5 1.5h2c.83 0 1.5-.67 1.5-1.5v-4c0-.28.22-.5.5-.5h3c.28 0 .5.22.5.5v4c0 .83.67 1.5 1.5 1.5h2c.83 0 1.5-.67 1.5-1.5V8.45c0-.43-.18-.84-.5-1.12L11 2.39z"/></symbol><symbol viewBox="0 0 20 20" id="home_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M9 2.39a1.5 1.5 0 012 0l5.5 4.94c.32.28.5.69.5 1.12v7.05c0 .83-.67 1.5-1.5 1.5H13a1.5 1.5 0 01-1.5-1.5V12a.5.5 0 00-.5-.5H9a.5.5 0 00-.5.5v3.5c0 .83-.67 1.5-1.5 1.5H4.5A1.5 1.5 0 013 15.5V8.45c0-.43.18-.84.5-1.12L9 2.39zm1.33.74a.5.5 0 00-.66 0l-5.5 4.94a.5.5 0 00-.17.38v7.05c0 .28.22.5.5.5H7a.5.5 0 00.5-.5V12c0-.83.67-1.5 1.5-1.5h2c.83 0 1.5.67 1.5 1.5v3.5c0 .28.22.5.5.5h2.5a.5.5 0 00.5-.5V8.45a.5.5 0 00-.17-.38l-5.5-4.94z"/></symbol><symbol viewBox="0 0 20 20" id="megaphone_loud_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M14.16 1.03c.26.08.4.37.31.63l-.5 1.5a.5.5 0 01-.94-.32l.5-1.5a.5.5 0 01.63-.31zm3.7 1.82a.5.5 0 10-.71-.7l-2 2a.5.5 0 00.7.7l2-2zm-10.25.3a2 2 0 013.26-.52l6.58 6.98a2 2 0 01-.64 3.2l-3.94 1.74a3.5 3.5 0 01-6.34 2.8l-1.2.52a1.5 1.5 0 01-1.67-.3l-1.22-1.22a1.5 1.5 0 01-.3-1.7l5.47-11.5zm-.16 13.78a2.5 2.5 0 004.5-1.97l-4.5 1.97zm2.7-13.61a1 1 0 00-1.64.25l-5.46 11.5a.5.5 0 00.1.57l1.22 1.21a.5.5 0 00.55.1L16.4 11.9a1 1 0 00.33-1.6l-6.59-6.98zM17 6a.5.5 0 000 1h1.5a.5.5 0 100-1H17z"/></symbol><symbol viewBox="0 0 16 16" id="pause_16_regular" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 2C2.67 2 2 2.67 2 3.5v9c0 .83.67 1.5 1.5 1.5h2c.83 0 1.5-.67 1.5-1.5v-9C7 2.67 6.33 2 5.5 2h-2zm0 1h2c.28 0 .5.22.5.5v9a.5.5 0 01-.5.5h-2a.5.5 0 01-.5-.5v-9c0-.28.22-.5.5-.5zM10.5 2C9.67 2 9 2.67 9 3.5v9c0 .83.67 1.5 1.5 1.5h2c.83 0 1.5-.67 1.5-1.5v-9c0-.83-.67-1.5-1.5-1.5h-2zm0 1h2c.28 0 .5.22.5.5v9a.5.5 0 01-.5.5h-2a.5.5 0 01-.5-.5v-9c0-.28.22-.5.5-.5z"/></symbol><symbol viewBox="0 0 20 20" id="people_20_filled" xmlns="http://www.w3.org/2000/svg"><path d="M11 10a2 2 0 012 2v1.5c0 2.05-2.09 3.5-5.5 3.5S2 15.55 2 13.5V12c0-1.1.9-2 2-2h7zm5 0a2 2 0 012 2v.5c0 2.09-1.57 3.5-4.5 3.5l-.41-.01c.54-.63.85-1.39.9-2.25l.01-.24V12c0-.7-.23-1.33-.63-1.84l-.13-.16H16zM7.5 2a3.5 3.5 0 110 7 3.5 3.5 0 010-7zm7 2a2.5 2.5 0 110 5 2.5 2.5 0 010-5z"/></symbol><symbol viewBox="0 0 20 20" id="people_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M11 10a2 2 0 012 2v1.5c0 2.05-2.09 3.5-5.5 3.5S2 15.55 2 13.5V12c0-1.1.9-2 2-2h7zm0 1H4a1 1 0 00-1 1v1.5C3 14.9 4.58 16 7.5 16s4.5-1.1 4.5-2.5V12a1 1 0 00-1-1zm5-1a2 2 0 012 2v.5c0 2.09-1.57 3.5-4.5 3.5l-.41-.01c.2-.24.38-.5.52-.78l.1-.21h.03c2.24-.07 3.26-1.04 3.26-2.5V12a1 1 0 00-1-1h-2.17a3 3 0 00-.6-1H16zM7.5 2a3.5 3.5 0 110 7 3.5 3.5 0 010-7zm7 2a2.5 2.5 0 110 5 2.5 2.5 0 010-5zm-7-1a2.5 2.5 0 100 5 2.5 2.5 0 000-5zm7 2a1.5 1.5 0 100 3 1.5 1.5 0 000-3z"/></symbol><symbol viewBox="0 0 16 16" id="play_16_regular" xmlns="http://www.w3.org/2000/svg"><path d="M5.75 3.06A.5.5 0 005 3.5v9c0 .38.41.62.75.44l8-4.5a.5.5 0 000-.88l-8-4.5zM4 3.5a1.5 1.5 0 012.24-1.3l8 4.5a1.5 1.5 0 010 2.6l-8 4.5A1.5 1.5 0 014 12.5v-9z"/></symbol><symbol viewBox="0 0 20 20" id="premium_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M5.5 3a.5.5 0 00-.43.24l-3 5a.5.5 0 00.05.58l7.5 9a.5.5 0 00.76 0l7.5-9a.5.5 0 00.05-.58l-3-5A.5.5 0 0014.5 3h-9zM3.38 8l2.4-4h1.98l-1.6 4H3.38zm2.78 1l2.26 5.83L3.57 9h2.59zM10 16.12L7.23 9h5.54L10 16.12zM7.24 8l1.6-4h2.32l1.6 4H7.24zm6.6 0l-1.6-4h1.98l2.4 4h-2.78zm0 1h2.6l-4.86 5.83L13.84 9z"/></symbol><symbol viewBox="0 0 20 20" id="premium_person_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M5.5 3a.5.5 0 00-.43.24l-3 5a.5.5 0 00.05.58l7.49 9a.5.5 0 00.86-.13L13.84 9h3.9l.14-.18a.5.5 0 00.05-.58l-3-5A.5.5 0 0014.5 3h-9zm7.27 6L10 16.12 7.23 9h5.54zM3.38 8l2.4-4h1.98l-1.6 4H3.38zm2.78 1l2.26 5.83L3.57 9h2.59zm1.08-1l1.6-4h2.32l1.6 4H7.24zm6.6 0l-1.6-4h1.98l2.4 4h-2.78zm1.66 6a2 2 0 100-4 2 2 0 000 4zm0 5c2.5 0 3.5-1.25 3.5-2.5 0-.83-.67-1.5-1.5-1.5h-4c-.83 0-1.5.67-1.5 1.5 0 1.25 1 2.5 3.5 2.5z"/></symbol><symbol viewBox="0 0 20 20" id="question_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M10 3a4 4 0 00-4 4 .5.5 0 001 0 3 3 0 016 0c0 1.25-.7 1.86-1.58 2.62l-.03.03c-.86.73-1.89 1.62-1.89 3.35v.5a.5.5 0 001 0V13c0-1.25.7-1.86 1.58-2.62l.03-.03C12.97 9.62 14 8.73 14 7a4 4 0 00-4-4zM10 17a.75.75 0 100-1.5.75.75 0 000 1.5z"/></symbol><symbol viewBox="0 0 20 20" id="search_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M8.5 3a5.5 5.5 0 014.23 9.02l4.12 4.13a.5.5 0 01-.63.76l-.07-.06-4.13-4.12A5.5 5.5 0 118.5 3zm0 1a4.5 4.5 0 100 9 4.5 4.5 0 000-9z"/></symbol><symbol viewBox="0 0 20 20" id="settings_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M1.91 7.38A8.5 8.5 0 013.7 4.3a.5.5 0 01.54-.13l1.92.68a1 1 0 001.32-.76l.36-2a.5.5 0 01.4-.4 8.53 8.53 0 013.55 0c.2.04.35.2.38.4l.37 2a1 1 0 001.32.76l1.92-.68a.5.5 0 01.54.13 8.5 8.5 0 011.78 3.08c.06.2 0 .4-.15.54l-1.56 1.32a1 1 0 000 1.52l1.56 1.32a.5.5 0 01.15.54 8.5 8.5 0 01-1.78 3.08.5.5 0 01-.54.13l-1.92-.68a1 1 0 00-1.32.76l-.37 2a.5.5 0 01-.38.4 8.53 8.53 0 01-3.56 0 .5.5 0 01-.39-.4l-.36-2a1 1 0 00-1.32-.76l-1.92.68a.5.5 0 01-.54-.13 8.5 8.5 0 01-1.78-3.08.5.5 0 01.15-.54l1.56-1.32a1 1 0 000-1.52L2.06 7.92a.5.5 0 01-.15-.54zm1.06 0l1.3 1.1a2 2 0 010 3.04l-1.3 1.1c.3.79.71 1.51 1.25 2.16l1.6-.58a2 2 0 012.63 1.53l.3 1.67a7.56 7.56 0 002.5 0l.3-1.67a2 2 0 012.64-1.53l1.6.58a7.5 7.5 0 001.24-2.16l-1.3-1.1a2 2 0 010-3.04l1.3-1.1a7.5 7.5 0 00-1.25-2.16l-1.6.58a2 2 0 01-2.63-1.53l-.3-1.67a7.55 7.55 0 00-2.5 0l-.3 1.67A2 2 0 015.81 5.8l-1.6-.58a7.5 7.5 0 00-1.24 2.16zM7.5 10a2.5 2.5 0 115 0 2.5 2.5 0 01-5 0zm1 0a1.5 1.5 0 103 0 1.5 1.5 0 00-3 0z"/></symbol><symbol viewBox="0 0 20 20" id="stack_20_filled" xmlns="http://www.w3.org/2000/svg"><path d="M4 3a2 2 0 00-2 2v6c0 1.1.9 2 2 2h8a2 2 0 002-2V5a2 2 0 00-2-2H4zm.27 11c.34.6.99 1 1.73 1h6a4 4 0 004-4V7a2 2 0 00-1-1.73V11a3 3 0 01-3 3H4.27zm2 2c.34.6.99 1 1.73 1h4a6 6 0 006-6V9a2 2 0 00-1-1.73V11a5 5 0 01-5 5H6.27z"/></symbol><symbol viewBox="0 0 20 20" id="stack_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M2 5c0-1.1.9-2 2-2h8a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V5zm2-1a1 1 0 00-1 1v6a1 1 0 001 1h8a1 1 0 001-1V5a1 1 0 00-1-1H4zm2 11a2 2 0 01-1.73-1H12a3 3 0 003-3V5.27c.6.34 1 .99 1 1.73v4a4 4 0 01-4 4H6zm2 2a2 2 0 01-1.73-1H12a5 5 0 005-5V7.27c.6.34 1 .99 1 1.73v2a6 6 0 01-6 6H8z"/></symbol><symbol viewBox="0 0 20 20" id="star_20_filled" xmlns="http://www.w3.org/2000/svg"><path d="M9.1 2.9a1 1 0 011.8 0l1.93 3.91 4.31.63a1 1 0 01.56 1.7l-3.12 3.05.73 4.3a1 1 0 01-1.45 1.05L10 15.51l-3.86 2.03a1 1 0 01-1.45-1.05l.74-4.3L2.3 9.14a1 1 0 01.56-1.7l4.31-.63L9.1 2.9z"/></symbol><symbol viewBox="0 0 20 20" id="star_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M9.1 2.9a1 1 0 011.8 0l1.93 3.91 4.31.63a1 1 0 01.56 1.7l-3.12 3.05.73 4.3a1 1 0 01-1.45 1.05L10 15.51l-3.86 2.03a1 1 0 01-1.45-1.05l.74-4.3L2.3 9.14a1 1 0 01.56-1.7l4.31-.63L9.1 2.9zm.9.44L8.07 7.25a1 1 0 01-.75.55L3 8.43l3.12 3.04a1 1 0 01.3.89l-.75 4.3 3.87-2.03a1 1 0 01.93 0l3.86 2.03-.74-4.3a1 1 0 01.29-.89L17 8.43l-4.32-.63a1 1 0 01-.75-.55L10 3.35z"/></symbol></svg>\n            </svg>\n        '))},l.prototype.getSvgSpriteUrl=function(c){return"/images/".concat(c,".svg")},l.\u0275prov=a.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac=function(y){return new(y||l)},providedIn:"root"}),l}(),p=function(){function l(){}return l.\u0275fac=function(y){return new(y||l)},l.\u0275mod=a.\u0275\u0275defineNgModule({type:l}),l.\u0275inj=a.\u0275\u0275defineInjector({providers:[{provide:w.E,useClass:d}],imports:[i.T6]}),l}()},54241:function(ct,Ge,n){"use strict";n.d(Ge,{Mz:function(){return Ue},VI:function(){return Q},g8:function(){return W},q5:function(){return h},zp:function(){return U}});var pe,ce,ge,se,xe,me,Oe,t=n(62661),i=n(90341),w=n(37419),a=n(50423),d=n(48138),p=n(77476),l=n(21661),c=n(59051),y=n(51193),r=n(4437),C=n(10519),m=n(26124),k=n(34763),O=n(30794),s=n(48636),ne=n(63057),ee=n(59787),Z=n(11547),v=n(93247),E=n(22760),I=n(17174),H=n(60733),G=n(22318),Y=n(81905),ie=n(48787),ye=n(59973),ae=n(17653),J=n(70032),N=n(14172),he=n(94130),Ce=["panel"];function Le(q,le){if(1&q){var de=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",0,1),a.\u0275\u0275listener("@panelAnimation.done",function(T){a.\u0275\u0275restoreView(de);var X=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(X._animationDone.next(T))}),a.\u0275\u0275projection(2),a.\u0275\u0275elementEnd()}if(2&q){var V=le.id,b=a.\u0275\u0275nextContext();a.\u0275\u0275property("id",b.id)("ngClass",b._classList)("@panelAnimation",b.isOpen?"visible":"hidden"),a.\u0275\u0275attribute("aria-label",b.ariaLabel||null)("aria-labelledby",b._getPanelAriaLabelledby(V))}}var $e=(0,m.X$)("panelAnimation",[(0,m.SB)("void, hidden",(0,m.oB)({opacity:0,transform:"scaleY(0.8)"})),(0,m.eR)(":enter, hidden => visible",[(0,m.ru)([(0,m.jt)("0.03s linear",(0,m.oB)({opacity:1})),(0,m.jt)("0.12s cubic-bezier(0, 0, 0.2, 1)",(0,m.oB)({transform:"scaleY(1)"}))])]),(0,m.eR)(":leave, visible => hidden",[(0,m.jt)("0.075s linear",(0,m.oB)({opacity:0}))])]),We=0,He=function(le,de){this.source=le,this.option=de},Je=(0,d.Kr)(function(){return function(){}}()),j=new a.InjectionToken("mat-autocomplete-default-options",{providedIn:"root",factory:function(){return{autoActiveFirstOption:!1,autoSelectActiveOption:!1,hideSingleSelectionIndicator:!1,requireSelection:!1}}}),Ue=function(q){(0,w.Z)(de,q);var le=de.prototype;function de(V,b,L,T){var X;return(X=q.call(this)||this)._changeDetectorRef=V,X._elementRef=b,X._defaults=L,X._activeOptionChanges=k.w.EMPTY,X.showPanel=!1,X._isOpen=!1,X.displayWith=null,X.optionSelected=new a.EventEmitter,X.opened=new a.EventEmitter,X.closed=new a.EventEmitter,X.optionActivated=new a.EventEmitter,X._classList={},X.id="mat-autocomplete-"+We++,X.inertGroups=T?.SAFARI||!1,X._autoActiveFirstOption=!!L.autoActiveFirstOption,X._autoSelectActiveOption=!!L.autoSelectActiveOption,X._requireSelection=!!L.requireSelection,X}return le._setColor=function(b){this._color=b,this._setThemeClasses(this._classList)},le.ngAfterContentInit=function(){var b=this;this._keyManager=new y.s1(this.options).withWrap().skipPredicate(this._skipPredicate),this._activeOptionChanges=this._keyManager.change.subscribe(function(L){b.isOpen&&b.optionActivated.emit({source:b,option:b.options.toArray()[L]||null})}),this._setVisibility()},le.ngOnDestroy=function(){var b;null==(b=this._keyManager)||b.destroy(),this._activeOptionChanges.unsubscribe()},le._setScrollTop=function(b){this.panel&&(this.panel.nativeElement.scrollTop=b)},le._getScrollTop=function(){return this.panel?this.panel.nativeElement.scrollTop:0},le._setVisibility=function(){this.showPanel=!!this.options.length,this._setVisibilityClasses(this._classList),this._changeDetectorRef.markForCheck()},le._emitSelectEvent=function(b){var L=new He(this,b);this.optionSelected.emit(L)},le._getPanelAriaLabelledby=function(b){return this.ariaLabel?null:this.ariaLabelledby?(b?b+" ":"")+this.ariaLabelledby:b},le._setVisibilityClasses=function(b){b[this._visibleClass]=this.showPanel,b[this._hiddenClass]=!this.showPanel},le._setThemeClasses=function(b){b["mat-primary"]="primary"===this._color,b["mat-warn"]="warn"===this._color,b["mat-accent"]="accent"===this._color},le._skipPredicate=function(b){return b.disabled},(0,i.Z)(de,[{key:"isOpen",get:function(){return this._isOpen&&this.showPanel}},{key:"autoActiveFirstOption",get:function(){return this._autoActiveFirstOption},set:function(b){this._autoActiveFirstOption=(0,r.Ig)(b)}},{key:"autoSelectActiveOption",get:function(){return this._autoSelectActiveOption},set:function(b){this._autoSelectActiveOption=(0,r.Ig)(b)}},{key:"requireSelection",get:function(){return this._requireSelection},set:function(b){this._requireSelection=(0,r.Ig)(b)}},{key:"classList",set:function(b){this._classList=b&&b.length?(0,r.du)(b).reduce(function(L,T){return L[T]=!0,L},{}):{},this._setVisibilityClasses(this._classList),this._setThemeClasses(this._classList),this._elementRef.nativeElement.className=""}}]),de}(Je);(pe=Ue).\u0275fac=function(le){return new(le||pe)(a.\u0275\u0275directiveInject(a.ChangeDetectorRef),a.\u0275\u0275directiveInject(a.ElementRef),a.\u0275\u0275directiveInject(j),a.\u0275\u0275directiveInject(C.t4))},pe.\u0275dir=a.\u0275\u0275defineDirective({type:pe,viewQuery:function(le,de){var V;1&le&&(a.\u0275\u0275viewQuery(a.TemplateRef,7),a.\u0275\u0275viewQuery(Ce,5)),2&le&&(a.\u0275\u0275queryRefresh(V=a.\u0275\u0275loadQuery())&&(de.template=V.first),a.\u0275\u0275queryRefresh(V=a.\u0275\u0275loadQuery())&&(de.panel=V.first))},inputs:{ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],displayWith:"displayWith",autoActiveFirstOption:"autoActiveFirstOption",autoSelectActiveOption:"autoSelectActiveOption",requireSelection:"requireSelection",panelWidth:"panelWidth",classList:["class","classList"]},outputs:{optionSelected:"optionSelected",opened:"opened",closed:"closed",optionActivated:"optionActivated"},features:[a.\u0275\u0275InheritDefinitionFeature]});var oe=function(q){function le(){var V,b;return(b=q.apply(this,arguments)||this)._visibleClass="mat-mdc-autocomplete-visible",b._hiddenClass="mat-mdc-autocomplete-hidden",b._animationDone=new a.EventEmitter,b._hideSingleSelectionIndicator=null!=(V=b._defaults.hideSingleSelectionIndicator)&&V,b}(0,w.Z)(le,q);var de=le.prototype;return de._syncParentProperties=function(){if(this.options)for(var L,b=(0,t.Z)(this.options);!(L=b()).done;)L.value._changeDetectorRef.markForCheck()},de.ngOnDestroy=function(){q.prototype.ngOnDestroy.call(this),this._animationDone.complete()},de._skipPredicate=function(b){return!1},(0,i.Z)(le,[{key:"hideSingleSelectionIndicator",get:function(){return this._hideSingleSelectionIndicator},set:function(b){this._hideSingleSelectionIndicator=(0,r.Ig)(b),this._syncParentProperties()}}]),le}(Ue);(ce=oe).\u0275fac=function(){var q;return function(de){return(q||(q=a.\u0275\u0275getInheritedFactory(ce)))(de||ce)}}(),ce.\u0275cmp=a.\u0275\u0275defineComponent({type:ce,selectors:[["mat-autocomplete"]],contentQueries:function(le,de,V){var b;1&le&&(a.\u0275\u0275contentQuery(V,d.K7,5),a.\u0275\u0275contentQuery(V,d.ey,5)),2&le&&(a.\u0275\u0275queryRefresh(b=a.\u0275\u0275loadQuery())&&(de.optionGroups=b),a.\u0275\u0275queryRefresh(b=a.\u0275\u0275loadQuery())&&(de.options=b))},hostAttrs:["ngSkipHydration","",1,"mat-mdc-autocomplete"],inputs:{disableRipple:"disableRipple",hideSingleSelectionIndicator:"hideSingleSelectionIndicator"},exportAs:["matAutocomplete"],features:[a.\u0275\u0275ProvidersFeature([{provide:d.HF,useExisting:ce}]),a.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:["*"],decls:1,vars:0,consts:[["role","listbox",1,"mat-mdc-autocomplete-panel","mdc-menu-surface","mdc-menu-surface--open",3,"id","ngClass"],["panel",""]],template:function(le,de){1&le&&(a.\u0275\u0275projectionDef(),a.\u0275\u0275template(0,Le,3,5,"ng-template"))},dependencies:[p.NgClass],styles:["div.mat-mdc-autocomplete-panel{box-shadow:0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12);width:100%;max-height:256px;visibility:hidden;transform-origin:center top;overflow:auto;padding:8px 0;border-radius:4px;box-sizing:border-box;position:static;background-color:var(--mat-autocomplete-background-color)}.cdk-high-contrast-active div.mat-mdc-autocomplete-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-autocomplete-panel-above) div.mat-mdc-autocomplete-panel{border-top-left-radius:0;border-top-right-radius:0}.mat-mdc-autocomplete-panel-above div.mat-mdc-autocomplete-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:center bottom}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-visible{visibility:visible}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-hidden{visibility:hidden}mat-autocomplete{display:none}"],encapsulation:2,data:{animation:[$e]},changeDetection:0});var h=function(le){this.elementRef=le};(ge=h).\u0275fac=function(le){return new(le||ge)(a.\u0275\u0275directiveInject(a.ElementRef))},ge.\u0275dir=a.\u0275\u0275defineDirective({type:ge});var g=function(q){function le(){return q.apply(this,arguments)||this}return(0,w.Z)(le,q),le}(h);(se=g).\u0275fac=function(){var q;return function(de){return(q||(q=a.\u0275\u0275getInheritedFactory(se)))(de||se)}}(),se.\u0275dir=a.\u0275\u0275defineDirective({type:se,selectors:[["","matAutocompleteOrigin",""]],exportAs:["matAutocompleteOrigin"],features:[a.\u0275\u0275InheritDefinitionFeature]});var u={provide:I.JU,useExisting:(0,a.forwardRef)(function(){return B}),multi:!0},W=new a.InjectionToken("mat-autocomplete-scroll-strategy"),U={provide:W,deps:[c.aV],useFactory:function(q){return function(){return q.scrollStrategies.reposition()}}},Q=function(){function q(de,V,b,L,T,X,ue,Ne,Qe,Xe,it){var ut=this;this._element=de,this._overlay=V,this._viewContainerRef=b,this._zone=L,this._changeDetectorRef=T,this._dir=ue,this._formField=Ne,this._document=Qe,this._viewportRuler=Xe,this._defaults=it,this._componentDestroyed=!1,this._autocompleteDisabled=!1,this._manuallyFloatingLabel=!1,this._viewportSubscription=k.w.EMPTY,this._canOpenOnNextFocus=!0,this._closeKeyEventStream=new O.xQ,this._windowBlurHandler=function(){ut._canOpenOnNextFocus=ut._document.activeElement!==ut._element.nativeElement||ut.panelOpen},this._onChange=function(){},this._onTouched=function(){},this.position="auto",this.autocompleteAttribute="off",this._overlayAttached=!1,this.optionSelections=(0,s.P)(function(){var ot=ut.autocomplete?ut.autocomplete.options:null;return ot?ot.changes.pipe((0,G.O)(ot),(0,Y.w)(function(){return ne.T.apply(void 0,ot.map(function(pt){return pt.onSelectionChange}))})):ut._zone.onStable.pipe((0,ie.q)(1),(0,Y.w)(function(){return ut.optionSelections}))}),this._handlePanelKeydown=function(ot){var pt;(ot.keyCode===v.hY&&!(0,v.Vb)(ot)||ot.keyCode===v.LH&&(0,v.Vb)(ot,"altKey"))&&(ut._pendingAutoselectedOption&&(ut._updateNativeInputValue(null!=(pt=ut._valueBeforeAutoSelection)?pt:""),ut._pendingAutoselectedOption=null),ut._closeKeyEventStream.next(),ut._resetActiveItem(),ot.stopPropagation(),ot.preventDefault())},this._trackedModal=null,this._scrollStrategy=X}var le=q.prototype;return le.ngAfterViewInit=function(){var V=this,b=this._getWindow();typeof b<"u"&&this._zone.runOutsideAngular(function(){return b.addEventListener("blur",V._windowBlurHandler)})},le.ngOnChanges=function(V){V.position&&this._positionStrategy&&(this._setStrategyPositions(this._positionStrategy),this.panelOpen&&this._overlayRef.updatePosition())},le.ngOnDestroy=function(){var V=this._getWindow();typeof V<"u"&&V.removeEventListener("blur",this._windowBlurHandler),this._viewportSubscription.unsubscribe(),this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete(),this._clearFromModal()},le.openPanel=function(){this._attachOverlay(),this._floatLabel(),this._trackedModal&&(0,y.Zf)(this._trackedModal,"aria-owns",this.autocomplete.id)},le.closePanel=function(){var V=this;this._resetLabel(),this._overlayAttached&&(this.panelOpen&&this._zone.run(function(){V.autocomplete.closed.emit()}),this.autocomplete._isOpen=this._overlayAttached=!1,this._pendingAutoselectedOption=null,this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._updatePanelState(),this._componentDestroyed||this._changeDetectorRef.detectChanges(),this._trackedModal)&&(0,y.iD)(this._trackedModal,"aria-owns",this.autocomplete.id)},le.updatePosition=function(){this._overlayAttached&&this._overlayRef.updatePosition()},le._getOutsideClickStream=function(){var V=this;return(0,ne.T)((0,ee.R)(this._document,"click"),(0,ee.R)(this._document,"auxclick"),(0,ee.R)(this._document,"touchend")).pipe((0,ye.h)(function(b){var L=(0,C.sA)(b),T=V._formField?V._formField._elementRef.nativeElement:null,X=V.connectedTo?V.connectedTo.elementRef.nativeElement:null;return V._overlayAttached&&L!==V._element.nativeElement&&V._document.activeElement!==V._element.nativeElement&&(!T||!T.contains(L))&&(!X||!X.contains(L))&&!!V._overlayRef&&!V._overlayRef.overlayElement.contains(L)}))},le.writeValue=function(V){var b=this;Promise.resolve(null).then(function(){return b._assignOptionValue(V)})},le.registerOnChange=function(V){this._onChange=V},le.registerOnTouched=function(V){this._onTouched=V},le.setDisabledState=function(V){this._element.nativeElement.disabled=V},le._handleKeydown=function(V){var b=V.keyCode,L=(0,v.Vb)(V);if(b===v.hY&&!L&&V.preventDefault(),this.activeOption&&b===v.K5&&this.panelOpen&&!L)this.activeOption._selectViaInteraction(),this._resetActiveItem(),V.preventDefault();else if(this.autocomplete){var T=this.autocomplete._keyManager.activeItem,X=b===v.LH||b===v.JH;b===v.Mf||X&&!L&&this.panelOpen?this.autocomplete._keyManager.onKeydown(V):X&&this._canOpen()&&this.openPanel(),(X||this.autocomplete._keyManager.activeItem!==T)&&(this._scrollToOption(this.autocomplete._keyManager.activeItemIndex||0),this.autocomplete.autoSelectActiveOption&&this.activeOption&&(this._pendingAutoselectedOption||(this._valueBeforeAutoSelection=this._element.nativeElement.value),this._pendingAutoselectedOption=this.activeOption,this._assignOptionValue(this.activeOption.value)))}},le._handleInput=function(V){var b=V.target,L=b.value;"number"===b.type&&(L=""==L?null:parseFloat(L)),this._previousValue!==L&&(this._previousValue=L,this._pendingAutoselectedOption=null,(!this.autocomplete||!this.autocomplete.requireSelection)&&this._onChange(L),L||this._clearPreviousSelectedOption(null,!1),this._canOpen()&&this._document.activeElement===V.target&&this.openPanel())},le._handleFocus=function(){this._canOpenOnNextFocus?this._canOpen()&&(this._previousValue=this._element.nativeElement.value,this._attachOverlay(),this._floatLabel(!0)):this._canOpenOnNextFocus=!0},le._handleClick=function(){this._canOpen()&&!this.panelOpen&&this.openPanel()},le._floatLabel=function(V){void 0===V&&(V=!1),this._formField&&"auto"===this._formField.floatLabel&&(V?this._formField._animateAndLockLabel():this._formField.floatLabel="always",this._manuallyFloatingLabel=!0)},le._resetLabel=function(){this._manuallyFloatingLabel&&(this._formField&&(this._formField.floatLabel="auto"),this._manuallyFloatingLabel=!1)},le._subscribeToClosingActions=function(){var V=this,b=this._zone.onStable.pipe((0,ie.q)(1)),L=this.autocomplete.options.changes.pipe((0,ae.b)(function(){return V._positionStrategy.reapplyLastPosition()}),(0,J.g)(0));return(0,ne.T)(b,L).pipe((0,Y.w)(function(){return V._zone.run(function(){var T=V.panelOpen;V._resetActiveItem(),V._updatePanelState(),V._changeDetectorRef.detectChanges(),V.panelOpen&&V._overlayRef.updatePosition(),T!==V.panelOpen&&(V.panelOpen?(V._captureValueOnAttach(),V._emitOpened()):V.autocomplete.closed.emit())}),V.panelClosingActions}),(0,ie.q)(1)).subscribe(function(T){return V._setValueAndClose(T)})},le._emitOpened=function(){this.autocomplete.opened.emit()},le._captureValueOnAttach=function(){this._valueOnAttach=this._element.nativeElement.value},le._destroyPanel=function(){this._overlayRef&&(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)},le._assignOptionValue=function(V){var b=this.autocomplete&&this.autocomplete.displayWith?this.autocomplete.displayWith(V):V;this._updateNativeInputValue(b??"")},le._updateNativeInputValue=function(V){this._formField?this._formField._control.value=V:this._element.nativeElement.value=V,this._previousValue=V},le._setValueAndClose=function(V){var b=this,L=this.autocomplete,T=V?V.source:this._pendingAutoselectedOption;T?(this._clearPreviousSelectedOption(T),this._assignOptionValue(T.value),this._onChange(T.value),L._emitSelectEvent(T),this._element.nativeElement.focus()):L.requireSelection&&this._element.nativeElement.value!==this._valueOnAttach&&(this._clearPreviousSelectedOption(null),this._assignOptionValue(null),L._animationDone?L._animationDone.pipe((0,ie.q)(1)).subscribe(function(){return b._onChange(null)}):this._onChange(null)),this.closePanel()},le._clearPreviousSelectedOption=function(V,b){var L;null==(L=this.autocomplete)||null==(L=L.options)||L.forEach(function(T){T!==V&&T.selected&&T.deselect(b)})},le._attachOverlay=function(){var b,T,V=this,L=this._overlayRef;L?(this._positionStrategy.setOrigin(this._getConnectedElement()),L.updateSize({width:this._getPanelWidth()})):(this._portal=new E.UE(this.autocomplete.template,this._viewContainerRef,{id:null==(T=this._formField)?void 0:T.getLabelId()}),L=this._overlay.create(this._getOverlayConfig()),this._overlayRef=L,this._viewportSubscription=this._viewportRuler.change().subscribe(function(){V.panelOpen&&L&&L.updateSize({width:V._getPanelWidth()})})),L&&!L.hasAttached()&&(L.attach(this._portal),this._closingActionsSubscription=this._subscribeToClosingActions());var X=this.panelOpen;this.autocomplete._isOpen=this._overlayAttached=!0,this.autocomplete._setColor(null==(b=this._formField)?void 0:b.color),this._updatePanelState(),this._applyModalPanelOwnership(),this._captureValueOnAttach(),this.panelOpen&&X!==this.panelOpen&&this._emitOpened()},le._updatePanelState=function(){if(this.autocomplete._setVisibility(),this.panelOpen){var V=this._overlayRef;this._keydownSubscription||(this._keydownSubscription=V.keydownEvents().subscribe(this._handlePanelKeydown)),this._outsideClickSubscription||(this._outsideClickSubscription=V.outsidePointerEvents().subscribe())}else{var b,L;null==(b=this._keydownSubscription)||b.unsubscribe(),null==(L=this._outsideClickSubscription)||L.unsubscribe(),this._keydownSubscription=this._outsideClickSubscription=null}},le._getOverlayConfig=function(){var V,b;return new c.X_({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getPanelWidth(),direction:null!=(V=this._dir)?V:void 0,panelClass:null==(b=this._defaults)?void 0:b.overlayPanelClass})},le._getOverlayPosition=function(){var V=this._overlay.position().flexibleConnectedTo(this._getConnectedElement()).withFlexibleDimensions(!1).withPush(!1);return this._setStrategyPositions(V),this._positionStrategy=V,V},le._setStrategyPositions=function(V){var X,b=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],L=this._aboveClass,T=[{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:L},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:L}];X="above"===this.position?T:"below"===this.position?b:[].concat(b,T),V.withPositions(X)},le._getConnectedElement=function(){return this.connectedTo?this.connectedTo.elementRef:this._formField?this._formField.getConnectedOverlayOrigin():this._element},le._getPanelWidth=function(){return this.autocomplete.panelWidth||this._getHostWidth()},le._getHostWidth=function(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width},le._resetActiveItem=function(){var V=this.autocomplete;if(V.autoActiveFirstOption){for(var b=-1,L=0;L<V.options.length;L++)if(!V.options.get(L).disabled){b=L;break}V._keyManager.setActiveItem(b)}else V._keyManager.setActiveItem(-1)},le._canOpen=function(){var V=this._element.nativeElement;return!V.readOnly&&!V.disabled&&!this._autocompleteDisabled},le._getWindow=function(){var V;return(null==(V=this._document)?void 0:V.defaultView)||window},le._scrollToOption=function(V){var b=this.autocomplete,L=(0,d.CB)(V,b.options,b.optionGroups);if(0===V&&1===L)b._setScrollTop(0);else if(b.panel){var T=b.options.toArray()[V];if(T){var X=T._getHostElement(),ue=(0,d.jH)(X.offsetTop,X.offsetHeight,b._getScrollTop(),b.panel.nativeElement.offsetHeight);b._setScrollTop(ue)}}},le._applyModalPanelOwnership=function(){var V=this._element.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(V){var b=this.autocomplete.id;this._trackedModal&&(0,y.iD)(this._trackedModal,"aria-owns",b),(0,y.Zf)(V,"aria-owns",b),this._trackedModal=V}},le._clearFromModal=function(){this._trackedModal&&((0,y.iD)(this._trackedModal,"aria-owns",this.autocomplete.id),this._trackedModal=null)},(0,i.Z)(q,[{key:"autocompleteDisabled",get:function(){return this._autocompleteDisabled},set:function(V){this._autocompleteDisabled=(0,r.Ig)(V)}},{key:"panelOpen",get:function(){return this._overlayAttached&&this.autocomplete.showPanel}},{key:"panelClosingActions",get:function(){var V=this;return(0,ne.T)(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe((0,ye.h)(function(){return V._overlayAttached})),this._closeKeyEventStream,this._getOutsideClickStream(),this._overlayRef?this._overlayRef.detachments().pipe((0,ye.h)(function(){return V._overlayAttached})):(0,Z.of)()).pipe((0,N.U)(function(b){return b instanceof d.rN?b:null}))}},{key:"activeOption",get:function(){return this.autocomplete&&this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null}}]),q}();(xe=Q).\u0275fac=function(le){return new(le||xe)(a.\u0275\u0275directiveInject(a.ElementRef),a.\u0275\u0275directiveInject(c.aV),a.\u0275\u0275directiveInject(a.ViewContainerRef),a.\u0275\u0275directiveInject(a.NgZone),a.\u0275\u0275directiveInject(a.ChangeDetectorRef),a.\u0275\u0275directiveInject(W),a.\u0275\u0275directiveInject(he.Is,8),a.\u0275\u0275directiveInject(H.G_,9),a.\u0275\u0275directiveInject(p.DOCUMENT,8),a.\u0275\u0275directiveInject(l.rL),a.\u0275\u0275directiveInject(j,8))},xe.\u0275dir=a.\u0275\u0275defineDirective({type:xe,inputs:{autocomplete:["matAutocomplete","autocomplete"],position:["matAutocompletePosition","position"],connectedTo:["matAutocompleteConnectedTo","connectedTo"],autocompleteAttribute:["autocomplete","autocompleteAttribute"],autocompleteDisabled:["matAutocompleteDisabled","autocompleteDisabled"]},features:[a.\u0275\u0275NgOnChangesFeature]});var B=function(q){function le(){var de;return(de=q.apply(this,arguments)||this)._aboveClass="mat-mdc-autocomplete-panel-above",de}return(0,w.Z)(le,q),le}(Q);(me=B).\u0275fac=function(){var q;return function(de){return(q||(q=a.\u0275\u0275getInheritedFactory(me)))(de||me)}}(),me.\u0275dir=a.\u0275\u0275defineDirective({type:me,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-mdc-autocomplete-trigger"],hostVars:7,hostBindings:function(le,de){1&le&&a.\u0275\u0275listener("focusin",function(){return de._handleFocus()})("blur",function(){return de._onTouched()})("input",function(b){return de._handleInput(b)})("keydown",function(b){return de._handleKeydown(b)})("click",function(){return de._handleClick()}),2&le&&a.\u0275\u0275attribute("autocomplete",de.autocompleteAttribute)("role",de.autocompleteDisabled?null:"combobox")("aria-autocomplete",de.autocompleteDisabled?null:"list")("aria-activedescendant",de.panelOpen&&de.activeOption?de.activeOption.id:null)("aria-expanded",de.autocompleteDisabled?null:de.panelOpen.toString())("aria-controls",de.autocompleteDisabled||!de.panelOpen||null==de.autocomplete?null:de.autocomplete.id)("aria-haspopup",de.autocompleteDisabled?null:"listbox")},exportAs:["matAutocompleteTrigger"],features:[a.\u0275\u0275ProvidersFeature([u]),a.\u0275\u0275InheritDefinitionFeature]}),(Oe=function(){}).\u0275fac=function(le){return new(le||Oe)},Oe.\u0275mod=a.\u0275\u0275defineNgModule({type:Oe}),Oe.\u0275inj=a.\u0275\u0275defineInjector({providers:[U],imports:[c.U8,d.Ng,d.BQ,p.CommonModule,l.ZD,d.Ng,d.BQ]})},57746:function(ct,Ge,n){"use strict";n.d(Ge,{d:function(){return l},t:function(){return c}});var d,p,t=n(90341),i=n(50423),w=n(4437),a=n(48138),l=function(){function y(){this._vertical=!1,this._inset=!1}return(0,t.Z)(y,[{key:"vertical",get:function(){return this._vertical},set:function(C){this._vertical=(0,w.Ig)(C)}},{key:"inset",get:function(){return this._inset},set:function(C){this._inset=(0,w.Ig)(C)}}]),y}();(d=l).\u0275fac=function(r){return new(r||d)},d.\u0275cmp=i.\u0275\u0275defineComponent({type:d,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(r,C){2&r&&(i.\u0275\u0275attribute("aria-orientation",C.vertical?"vertical":"horizontal"),i.\u0275\u0275classProp("mat-divider-vertical",C.vertical)("mat-divider-horizontal",!C.vertical)("mat-divider-inset",C.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(r,C){},styles:[".mat-divider{--mat-divider-width:1px;display:block;margin:0;border-top-style:solid;border-top-color:var(--mat-divider-color);border-top-width:var(--mat-divider-width)}.mat-divider.mat-divider-vertical{border-top:0;border-right-style:solid;border-right-color:var(--mat-divider-color);border-right-width:var(--mat-divider-width)}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],encapsulation:2,changeDetection:0});var c=function(){};(p=c).\u0275fac=function(r){return new(r||p)},p.\u0275mod=i.\u0275\u0275defineNgModule({type:p}),p.\u0275inj=i.\u0275\u0275defineInjector({imports:[a.BQ,a.BQ]})},34895:function(ct,Ge,n){"use strict";n.d(Ge,{D8:function(){return E},QJ:function(){return Z},VN:function(){return ne}});var r,C,m,k,t=n(37419),i=n(50423),w=n(48138),a=n(33846),d=n(54241),p=n(77476),l=n(59051),c=n(21661),y=n(17174);function O(I,H){if(1&I&&(i.\u0275\u0275elementStart(0,"div",0,1),i.\u0275\u0275projection(2),i.\u0275\u0275elementEnd()),2&I){var G=H.id,Y=i.\u0275\u0275nextContext();i.\u0275\u0275property("id",Y.id)("ngClass",Y._classList),i.\u0275\u0275attribute("aria-label",Y.ariaLabel||null)("aria-labelledby",Y._getPanelAriaLabelledby(G))}}var ne=function(I){function H(){var G;return(G=I.apply(this,arguments)||this)._visibleClass="mat-autocomplete-visible",G._hiddenClass="mat-autocomplete-hidden",G._animationDone=null,G}return(0,t.Z)(H,I),H}(d.Mz);(r=ne).\u0275fac=function(){var I;return function(G){return(I||(I=i.\u0275\u0275getInheritedFactory(r)))(G||r)}}(),r.\u0275cmp=i.\u0275\u0275defineComponent({type:r,selectors:[["mat-autocomplete"]],contentQueries:function(H,G,Y){var ie;1&H&&(i.\u0275\u0275contentQuery(Y,w.K7,5),i.\u0275\u0275contentQuery(Y,a.CK,5)),2&H&&(i.\u0275\u0275queryRefresh(ie=i.\u0275\u0275loadQuery())&&(G.optionGroups=ie),i.\u0275\u0275queryRefresh(ie=i.\u0275\u0275loadQuery())&&(G.options=ie))},hostAttrs:["ngSkipHydration","",1,"mat-autocomplete"],inputs:{disableRipple:"disableRipple"},exportAs:["matAutocomplete"],features:[i.\u0275\u0275ProvidersFeature([{provide:w.HF,useExisting:r}]),i.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:["*"],decls:1,vars:0,consts:[["role","listbox",1,"mat-autocomplete-panel",3,"id","ngClass"],["panel",""]],template:function(H,G){1&H&&(i.\u0275\u0275projectionDef(),i.\u0275\u0275template(0,O,3,4,"ng-template"))},dependencies:[p.NgClass],styles:[".mat-autocomplete-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;visibility:hidden;max-width:none;max-height:256px;position:relative;width:100%;border-bottom-left-radius:4px;border-bottom-right-radius:4px}.mat-autocomplete-panel.mat-autocomplete-visible{visibility:visible}.mat-autocomplete-panel.mat-autocomplete-hidden{visibility:hidden}.mat-autocomplete-panel-above .mat-autocomplete-panel{border-radius:0;border-top-left-radius:4px;border-top-right-radius:4px}.mat-autocomplete-panel .mat-divider-horizontal{margin-top:-1px}.cdk-high-contrast-active .mat-autocomplete-panel{outline:solid 1px}mat-autocomplete{display:none}"],encapsulation:2,changeDetection:0});var ee={provide:y.JU,useExisting:(0,i.forwardRef)(function(){return Z}),multi:!0},Z=function(I){function H(){var G;return(G=I.apply(this,arguments)||this)._aboveClass="mat-autocomplete-panel-above",G}return(0,t.Z)(H,I),H}(d.VI);(C=Z).\u0275fac=function(){var I;return function(G){return(I||(I=i.\u0275\u0275getInheritedFactory(C)))(G||C)}}(),C.\u0275dir=i.\u0275\u0275defineDirective({type:C,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-autocomplete-trigger"],hostVars:7,hostBindings:function(H,G){1&H&&i.\u0275\u0275listener("focusin",function(){return G._handleFocus()})("blur",function(){return G._onTouched()})("input",function(ie){return G._handleInput(ie)})("keydown",function(ie){return G._handleKeydown(ie)})("click",function(){return G._handleClick()}),2&H&&i.\u0275\u0275attribute("autocomplete",G.autocompleteAttribute)("role",G.autocompleteDisabled?null:"combobox")("aria-autocomplete",G.autocompleteDisabled?null:"list")("aria-activedescendant",G.panelOpen&&G.activeOption?G.activeOption.id:null)("aria-expanded",G.autocompleteDisabled?null:G.panelOpen.toString())("aria-owns",G.autocompleteDisabled||!G.panelOpen||null==G.autocomplete?null:G.autocomplete.id)("aria-haspopup",G.autocompleteDisabled?null:"listbox")},exportAs:["matAutocompleteTrigger"],features:[i.\u0275\u0275ProvidersFeature([ee]),i.\u0275\u0275InheritDefinitionFeature]});var v=function(I){function H(){return I.apply(this,arguments)||this}return(0,t.Z)(H,I),H}(d.q5);(m=v).\u0275fac=function(){var I;return function(G){return(I||(I=i.\u0275\u0275getInheritedFactory(m)))(G||m)}}(),m.\u0275dir=i.\u0275\u0275defineDirective({type:m,selectors:[["","matAutocompleteOrigin",""]],exportAs:["matAutocompleteOrigin"],features:[i.\u0275\u0275InheritDefinitionFeature]});var E=function(){};(k=E).\u0275fac=function(H){return new(H||k)},k.\u0275mod=i.\u0275\u0275defineNgModule({type:k}),k.\u0275inj=i.\u0275\u0275defineInjector({providers:[d.zp],imports:[l.U8,a.Uc,w.BQ,p.CommonModule,c.ZD,a.Uc,w.BQ]})},89075:function(ct,Ge,n){"use strict";n.d(Ge,{IP:function(){return Je},Y6:function(){return Oe},ir:function(){return We},lw:function(){return me},yD:function(){return tt}});var E,I,H,G,Y,ie,ye,t=n(90341),i=n(76920),w=n(37419),a=n(93247),d=n(50423),p=n(48138),l=n(4437),c=n(10519),y=n(77476),r=n(30794),C=n(63057),m=n(48787),k=n(83317),O=n(22318),s=n(51193),ne=n(94130),ee=n(77445),Z=n(17174),v=n(60733),N=new d.InjectionToken("MatChipRemove"),he=new d.InjectionToken("MatChipAvatar"),pe=new d.InjectionToken("MatChipTrailingIcon"),ge=(0,p.sb)((0,p.pj)((0,p.Kr)(function(oe){this._elementRef=oe}),"primary"),-1);(E=function(){}).\u0275fac=function(oe){return new(oe||E)},E.\u0275dir=d.\u0275\u0275defineDirective({type:E,selectors:[["mat-chip-avatar"],["","matChipAvatar",""]],hostAttrs:[1,"mat-chip-avatar"],features:[d.\u0275\u0275ProvidersFeature([{provide:he,useExisting:E}])]});(I=function(){}).\u0275fac=function(oe){return new(oe||I)},I.\u0275dir=d.\u0275\u0275defineDirective({type:I,selectors:[["mat-chip-trailing-icon"],["","matChipTrailingIcon",""]],hostAttrs:[1,"mat-chip-trailing-icon"],features:[d.\u0275\u0275ProvidersFeature([{provide:pe,useExisting:I}])]});var me=function(Ue){function oe(g,u,F,W,te,U,Q,B){var P;return(P=Ue.call(this,g)||this)._ngZone=u,P._changeDetectorRef=te,P._hasFocus=!1,P.chipListSelectable=!0,P._chipListMultiple=!1,P._chipListDisabled=!1,P.role="option",P._selected=!1,P._selectable=!0,P._disabled=!1,P._removable=!0,P._onFocus=new r.xQ,P._onBlur=new r.xQ,P.selectionChange=new d.EventEmitter,P.destroyed=new d.EventEmitter,P.removed=new d.EventEmitter,P._addHostClassName(),P._chipRippleTarget=U.createElement("div"),P._chipRippleTarget.classList.add("mat-chip-ripple"),P._elementRef.nativeElement.appendChild(P._chipRippleTarget),P._chipRipple=new p.IR((0,i.Z)(P),u,P._chipRippleTarget,F),P._chipRipple.setupTriggerEvents(g),P.rippleConfig=W||{},P._animationsDisabled="NoopAnimations"===Q,P.tabIndex=null!=B&&parseInt(B)||-1,P}(0,w.Z)(oe,Ue);var h=oe.prototype;return h._addHostClassName=function(){var u="mat-basic-chip",F=this._elementRef.nativeElement;F.hasAttribute(u)||F.tagName.toLowerCase()===u?F.classList.add(u):F.classList.add("mat-standard-chip")},h.ngOnDestroy=function(){this.destroyed.emit({chip:this}),this._chipRipple._removeTriggerEvents()},h.select=function(){this._selected||(this._selected=!0,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())},h.deselect=function(){this._selected&&(this._selected=!1,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())},h.selectViaInteraction=function(){this._selected||(this._selected=!0,this._dispatchSelectionChange(!0),this._changeDetectorRef.markForCheck())},h.toggleSelected=function(u){return void 0===u&&(u=!1),this._selected=!this.selected,this._dispatchSelectionChange(u),this._changeDetectorRef.markForCheck(),this.selected},h.focus=function(){this._hasFocus||(this._elementRef.nativeElement.focus(),this._onFocus.next({chip:this})),this._hasFocus=!0},h.remove=function(){this.removable&&this.removed.emit({chip:this})},h._handleClick=function(u){this.disabled&&u.preventDefault()},h._handleKeydown=function(u){if(!this.disabled)switch(u.keyCode){case a.yY:case a.ZH:this.remove(),u.preventDefault();break;case a.L_:this.selectable&&this.toggleSelected(!0),u.preventDefault()}},h._blur=function(){var u=this;this._ngZone.onStable.pipe((0,m.q)(1)).subscribe(function(){u._ngZone.run(function(){u._hasFocus=!1,u._onBlur.next({chip:u})})})},h._dispatchSelectionChange=function(u){void 0===u&&(u=!1),this.selectionChange.emit({source:this,isUserInput:u,selected:this._selected})},(0,t.Z)(oe,[{key:"rippleDisabled",get:function(){return this.disabled||this.disableRipple||this._animationsDisabled||!!this.rippleConfig.disabled}},{key:"selected",get:function(){return this._selected},set:function(u){var F=(0,l.Ig)(u);F!==this._selected&&(this._selected=F,this._dispatchSelectionChange())}},{key:"value",get:function(){return void 0!==this._value?this._value:this._elementRef.nativeElement.textContent},set:function(u){this._value=u}},{key:"selectable",get:function(){return this._selectable&&this.chipListSelectable},set:function(u){this._selectable=(0,l.Ig)(u)}},{key:"disabled",get:function(){return this._chipListDisabled||this._disabled},set:function(u){this._disabled=(0,l.Ig)(u)}},{key:"removable",get:function(){return this._removable},set:function(u){this._removable=(0,l.Ig)(u)}},{key:"ariaSelected",get:function(){return this.selectable&&(this._chipListMultiple||this.selected)?this.selected.toString():null}}]),oe}(ge);(H=me).\u0275fac=function(oe){return new(oe||H)(d.\u0275\u0275directiveInject(d.ElementRef),d.\u0275\u0275directiveInject(d.NgZone),d.\u0275\u0275directiveInject(c.t4),d.\u0275\u0275directiveInject(p.Y2,8),d.\u0275\u0275directiveInject(d.ChangeDetectorRef),d.\u0275\u0275directiveInject(y.DOCUMENT),d.\u0275\u0275directiveInject(d.ANIMATION_MODULE_TYPE,8),d.\u0275\u0275injectAttribute("tabindex"))},H.\u0275dir=d.\u0275\u0275defineDirective({type:H,selectors:[["mat-basic-chip"],["","mat-basic-chip",""],["mat-chip"],["","mat-chip",""]],contentQueries:function(oe,h,g){var u;1&oe&&(d.\u0275\u0275contentQuery(g,he,5),d.\u0275\u0275contentQuery(g,pe,5),d.\u0275\u0275contentQuery(g,N,5)),2&oe&&(d.\u0275\u0275queryRefresh(u=d.\u0275\u0275loadQuery())&&(h.avatar=u.first),d.\u0275\u0275queryRefresh(u=d.\u0275\u0275loadQuery())&&(h.trailingIcon=u.first),d.\u0275\u0275queryRefresh(u=d.\u0275\u0275loadQuery())&&(h.removeIcon=u.first))},hostAttrs:[1,"mat-chip","mat-focus-indicator"],hostVars:15,hostBindings:function(oe,h){1&oe&&d.\u0275\u0275listener("click",function(u){return h._handleClick(u)})("keydown",function(u){return h._handleKeydown(u)})("focus",function(){return h.focus()})("blur",function(){return h._blur()}),2&oe&&(d.\u0275\u0275attribute("tabindex",h.disabled?null:h.tabIndex)("role",h.role)("disabled",h.disabled||null)("aria-disabled",h.disabled.toString())("aria-selected",h.ariaSelected),d.\u0275\u0275classProp("mat-chip-selected",h.selected)("mat-chip-with-avatar",h.avatar)("mat-chip-with-trailing-icon",h.trailingIcon||h.removeIcon)("mat-chip-disabled",h.disabled)("_mat-animation-noopable",h._animationsDisabled))},inputs:{color:"color",disableRipple:"disableRipple",tabIndex:"tabIndex",role:"role",selected:"selected",value:"value",selectable:"selectable",disabled:"disabled",removable:"removable"},outputs:{selectionChange:"selectionChange",destroyed:"destroyed",removed:"removed"},exportAs:["matChip"],features:[d.\u0275\u0275InheritDefinitionFeature]});var Oe=function(){function Ue(h,g){this._parentChip=h,"BUTTON"===g.nativeElement.nodeName&&g.nativeElement.setAttribute("type","button")}return Ue.prototype._handleClick=function(g){var u=this._parentChip;u.removable&&!u.disabled&&u.remove(),g.stopPropagation(),g.preventDefault()},Ue}();(G=Oe).\u0275fac=function(oe){return new(oe||G)(d.\u0275\u0275directiveInject(me),d.\u0275\u0275directiveInject(d.ElementRef))},G.\u0275dir=d.\u0275\u0275defineDirective({type:G,selectors:[["","matChipRemove",""]],hostAttrs:[1,"mat-chip-remove","mat-chip-trailing-icon"],hostBindings:function(oe,h){1&oe&&d.\u0275\u0275listener("click",function(u){return h._handleClick(u)})},features:[d.\u0275\u0275ProvidersFeature([{provide:N,useExisting:G}])]});var Ce=new d.InjectionToken("mat-chips-default-options"),Le=(0,p.FD)(function(){return function(oe,h,g,u){this._defaultErrorStateMatcher=oe,this._parentForm=h,this._parentFormGroup=g,this.ngControl=u,this.stateChanges=new r.xQ}}()),ze=0,$e=function(oe,h){this.source=oe,this.value=h},We=function(Ue){function oe(g,u,F,W,te,U,Q){var B;return(B=Ue.call(this,U,W,te,Q)||this)._elementRef=g,B._changeDetectorRef=u,B._dir=F,B.controlType="mat-chip-list",B._lastDestroyedChipIndex=null,B._destroyed=new r.xQ,B._uid="mat-chip-list-"+ze++,B._tabIndex=0,B._userTabIndex=null,B._onTouched=function(){},B._onChange=function(){},B._multiple=!1,B._compareWith=function(P,q){return P===q},B._disabled=!1,B.ariaOrientation="horizontal",B._selectable=!0,B.change=new d.EventEmitter,B.valueChange=new d.EventEmitter,B.ngControl&&(B.ngControl.valueAccessor=(0,i.Z)(B)),B}(0,w.Z)(oe,Ue);var h=oe.prototype;return h.ngAfterContentInit=function(){var u=this;this._keyManager=new s.Em(this.chips).withWrap().withVerticalOrientation().withHomeAndEnd().withHorizontalOrientation(this._dir?this._dir.value:"ltr"),this._dir&&this._dir.change.pipe((0,k.R)(this._destroyed)).subscribe(function(F){return u._keyManager.withHorizontalOrientation(F)}),this._keyManager.tabOut.subscribe(function(){return u._allowFocusEscape()}),this.chips.changes.pipe((0,O.O)(null),(0,k.R)(this._destroyed)).subscribe(function(){(u.disabled||!u.selectable)&&Promise.resolve().then(function(){u._syncChipsState()}),u._resetChips(),u._initializeSelection(),u._updateTabIndex(),u._updateFocusForDestroyedChips(),u.stateChanges.next()})},h.ngOnInit=function(){this._selectionModel=new ee.Ov(this.multiple,void 0,!1),this.stateChanges.next()},h.ngDoCheck=function(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==this._disabled&&(this.disabled=!!this.ngControl.disabled))},h.ngOnDestroy=function(){var u;null==(u=this._keyManager)||u.destroy(),this._destroyed.next(),this._destroyed.complete(),this.stateChanges.complete(),this._dropSubscriptions()},h.registerInput=function(u){this._chipInput=u,this._elementRef.nativeElement.setAttribute("data-mat-chip-input",u.id)},h.setDescribedByIds=function(u){u.length?this._elementRef.nativeElement.setAttribute("aria-describedby",u.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")},h.writeValue=function(u){this.chips&&this._setSelectionByValue(u,!1)},h.registerOnChange=function(u){this._onChange=u},h.registerOnTouched=function(u){this._onTouched=u},h.setDisabledState=function(u){this.disabled=u,this.stateChanges.next()},h.onContainerClick=function(u){this._originatesFromChip(u)||this.focus()},h.focus=function(u){this.disabled||this._chipInput&&this._chipInput.focused||(this.chips.length>0?(this._keyManager.setFirstItemActive(),this.stateChanges.next()):(this._focusInput(u),this.stateChanges.next()))},h._focusInput=function(u){this._chipInput&&this._chipInput.focus(u)},h._keydown=function(u){var F=u.target;F&&F.classList.contains("mat-chip")&&(this._keyManager.onKeydown(u),this.stateChanges.next())},h._updateTabIndex=function(){this._tabIndex=this._userTabIndex||(0===this.chips.length?-1:0)},h._updateFocusForDestroyedChips=function(){if(null!=this._lastDestroyedChipIndex)if(this.chips.length){var u=Math.min(this._lastDestroyedChipIndex,this.chips.length-1);this._keyManager.setActiveItem(u)}else this.focus();this._lastDestroyedChipIndex=null},h._isValidIndex=function(u){return u>=0&&u<this.chips.length},h._setSelectionByValue=function(u,F){var W=this;if(void 0===F&&(F=!0),this._clearSelection(),this.chips.forEach(function(U){return U.deselect()}),Array.isArray(u))u.forEach(function(U){return W._selectValue(U,F)}),this._sortValues();else{var te=this._selectValue(u,F);te&&F&&this._keyManager.setActiveItem(te)}},h._selectValue=function(u,F){var W=this;void 0===F&&(F=!0);var te=this.chips.find(function(U){return null!=U.value&&W._compareWith(U.value,u)});return te&&(F?te.selectViaInteraction():te.select(),this._selectionModel.select(te)),te},h._initializeSelection=function(){var u=this;Promise.resolve().then(function(){(u.ngControl||u._value)&&(u._setSelectionByValue(u.ngControl?u.ngControl.value:u._value,!1),u.stateChanges.next())})},h._clearSelection=function(u){this._selectionModel.clear(),this.chips.forEach(function(F){F!==u&&F.deselect()}),this.stateChanges.next()},h._sortValues=function(){var u=this;this._multiple&&(this._selectionModel.clear(),this.chips.forEach(function(F){F.selected&&u._selectionModel.select(F)}),this.stateChanges.next())},h._propagateChanges=function(u){var F;F=Array.isArray(this.selected)?this.selected.map(function(W){return W.value}):this.selected?this.selected.value:u,this._value=F,this.change.emit(new $e(this,F)),this.valueChange.emit(F),this._onChange(F),this._changeDetectorRef.markForCheck()},h._blur=function(){var u=this;this._hasFocusedChip()||this._keyManager.setActiveItem(-1),this.disabled||(this._chipInput?setTimeout(function(){u.focused||u._markAsTouched()}):this._markAsTouched())},h._markAsTouched=function(){this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next()},h._allowFocusEscape=function(){var u=this;-1!==this._tabIndex&&(this._tabIndex=-1,setTimeout(function(){u._tabIndex=u._userTabIndex||0,u._changeDetectorRef.markForCheck()}))},h._resetChips=function(){this._dropSubscriptions(),this._listenToChipsFocus(),this._listenToChipsSelection(),this._listenToChipsRemoved()},h._dropSubscriptions=function(){this._chipFocusSubscription&&(this._chipFocusSubscription.unsubscribe(),this._chipFocusSubscription=null),this._chipBlurSubscription&&(this._chipBlurSubscription.unsubscribe(),this._chipBlurSubscription=null),this._chipSelectionSubscription&&(this._chipSelectionSubscription.unsubscribe(),this._chipSelectionSubscription=null),this._chipRemoveSubscription&&(this._chipRemoveSubscription.unsubscribe(),this._chipRemoveSubscription=null)},h._listenToChipsSelection=function(){var u=this;this._chipSelectionSubscription=this.chipSelectionChanges.subscribe(function(F){F.source.selected?u._selectionModel.select(F.source):u._selectionModel.deselect(F.source),u.multiple||u.chips.forEach(function(W){!u._selectionModel.isSelected(W)&&W.selected&&W.deselect()}),F.isUserInput&&u._propagateChanges()})},h._listenToChipsFocus=function(){var u=this;this._chipFocusSubscription=this.chipFocusChanges.subscribe(function(F){var W=u.chips.toArray().indexOf(F.chip);u._isValidIndex(W)&&u._keyManager.updateActiveItem(W),u.stateChanges.next()}),this._chipBlurSubscription=this.chipBlurChanges.subscribe(function(){u._blur(),u.stateChanges.next()})},h._listenToChipsRemoved=function(){var u=this;this._chipRemoveSubscription=this.chipRemoveChanges.subscribe(function(F){var W=F.chip,te=u.chips.toArray().indexOf(F.chip);u._isValidIndex(te)&&W._hasFocus&&(u._lastDestroyedChipIndex=te)})},h._originatesFromChip=function(u){for(var F=u.target;F&&F!==this._elementRef.nativeElement;){if(F.classList.contains("mat-chip"))return!0;F=F.parentElement}return!1},h._hasFocusedChip=function(){return this.chips&&this.chips.some(function(u){return u._hasFocus})},h._syncChipsState=function(){var u=this;this.chips&&this.chips.forEach(function(F){F._chipListDisabled=u._disabled,F._chipListMultiple=u.multiple,F.chipListSelectable=u._selectable})},(0,t.Z)(oe,[{key:"selected",get:function(){var u,F;return this.multiple?(null==(u=this._selectionModel)?void 0:u.selected)||[]:null==(F=this._selectionModel)?void 0:F.selected[0]}},{key:"role",get:function(){return this._explicitRole?this._explicitRole:this.empty?null:"listbox"},set:function(u){this._explicitRole=u}},{key:"multiple",get:function(){return this._multiple},set:function(u){this._multiple=(0,l.Ig)(u),this._syncChipsState()}},{key:"compareWith",get:function(){return this._compareWith},set:function(u){this._compareWith=u,this._selectionModel&&this._initializeSelection()}},{key:"value",get:function(){return this._value},set:function(u){this.writeValue(u),this._value=u}},{key:"id",get:function(){return this._chipInput?this._chipInput.id:this._uid}},{key:"required",get:function(){var u,F,W;return null!=(u=null!=(F=this._required)?F:null==(W=this.ngControl)||null==(W=W.control)?void 0:W.hasValidator(Z.kI.required))&&u},set:function(u){this._required=(0,l.Ig)(u),this.stateChanges.next()}},{key:"placeholder",get:function(){return this._chipInput?this._chipInput.placeholder:this._placeholder},set:function(u){this._placeholder=u,this.stateChanges.next()}},{key:"focused",get:function(){return this._chipInput&&this._chipInput.focused||this._hasFocusedChip()}},{key:"empty",get:function(){return(!this._chipInput||this._chipInput.empty)&&(!this.chips||0===this.chips.length)}},{key:"shouldLabelFloat",get:function(){return!this.empty||this.focused}},{key:"disabled",get:function(){return this.ngControl?!!this.ngControl.disabled:this._disabled},set:function(u){this._disabled=(0,l.Ig)(u),this._syncChipsState()}},{key:"selectable",get:function(){return this._selectable},set:function(u){this._selectable=(0,l.Ig)(u),this._syncChipsState()}},{key:"tabIndex",set:function(u){this._userTabIndex=u,this._tabIndex=u}},{key:"chipSelectionChanges",get:function(){return C.T.apply(void 0,this.chips.map(function(u){return u.selectionChange}))}},{key:"chipFocusChanges",get:function(){return C.T.apply(void 0,this.chips.map(function(u){return u._onFocus}))}},{key:"chipBlurChanges",get:function(){return C.T.apply(void 0,this.chips.map(function(u){return u._onBlur}))}},{key:"chipRemoveChanges",get:function(){return C.T.apply(void 0,this.chips.map(function(u){return u.destroyed}))}}]),oe}(Le);(Y=We).\u0275fac=function(oe){return new(oe||Y)(d.\u0275\u0275directiveInject(d.ElementRef),d.\u0275\u0275directiveInject(d.ChangeDetectorRef),d.\u0275\u0275directiveInject(ne.Is,8),d.\u0275\u0275directiveInject(Z.F,8),d.\u0275\u0275directiveInject(Z.sg,8),d.\u0275\u0275directiveInject(p.rD),d.\u0275\u0275directiveInject(Z.a5,10))},Y.\u0275cmp=d.\u0275\u0275defineComponent({type:Y,selectors:[["mat-chip-list"]],contentQueries:function(oe,h,g){var u;1&oe&&d.\u0275\u0275contentQuery(g,me,5),2&oe&&d.\u0275\u0275queryRefresh(u=d.\u0275\u0275loadQuery())&&(h.chips=u)},hostAttrs:["ngSkipHydration","",1,"mat-chip-list"],hostVars:14,hostBindings:function(oe,h){1&oe&&d.\u0275\u0275listener("focus",function(){return h.focus()})("blur",function(){return h._blur()})("keydown",function(u){return h._keydown(u)}),2&oe&&(d.\u0275\u0275hostProperty("id",h._uid),d.\u0275\u0275attribute("tabindex",h.disabled?null:h._tabIndex)("aria-required",h.role?h.required:null)("aria-disabled",h.disabled.toString())("aria-invalid",h.errorState)("aria-multiselectable",h.multiple)("role",h.role)("aria-orientation",h.ariaOrientation),d.\u0275\u0275classProp("mat-chip-list-disabled",h.disabled)("mat-chip-list-invalid",h.errorState)("mat-chip-list-required",h.required))},inputs:{role:"role",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],errorStateMatcher:"errorStateMatcher",multiple:"multiple",compareWith:"compareWith",value:"value",required:"required",placeholder:"placeholder",disabled:"disabled",ariaOrientation:["aria-orientation","ariaOrientation"],selectable:"selectable",tabIndex:"tabIndex"},outputs:{change:"change",valueChange:"valueChange"},exportAs:["matChipList"],features:[d.\u0275\u0275ProvidersFeature([{provide:v.Eo,useExisting:Y}]),d.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:["*"],decls:2,vars:0,consts:[[1,"mat-chip-list-wrapper"]],template:function(oe,h){1&oe&&(d.\u0275\u0275projectionDef(),d.\u0275\u0275elementStart(0,"div",0),d.\u0275\u0275projection(1),d.\u0275\u0275elementEnd())},styles:['.mat-chip{position:relative;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0);border:none;-webkit-appearance:none;-moz-appearance:none}.mat-chip::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-standard-chip{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:inline-flex;padding:7px 12px;border-radius:16px;align-items:center;cursor:default;min-height:32px;height:1px}.mat-standard-chip._mat-animation-noopable{transition:none !important;animation:none !important}.mat-standard-chip .mat-chip-remove{border:none;-webkit-appearance:none;-moz-appearance:none;padding:0;background:none}.mat-standard-chip .mat-chip-remove.mat-icon,.mat-standard-chip .mat-chip-remove .mat-icon{width:18px;height:18px;font-size:18px}.mat-standard-chip::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;opacity:0;content:"";pointer-events:none;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-standard-chip:hover::after{opacity:.12}.mat-standard-chip:focus{outline:none}.mat-standard-chip:focus::after{opacity:.16}.cdk-high-contrast-active .mat-standard-chip{outline:solid 1px}.cdk-high-contrast-active .mat-standard-chip.mat-chip-selected{outline-width:3px}.mat-standard-chip.mat-chip-disabled::after{opacity:0}.mat-standard-chip.mat-chip-disabled .mat-chip-remove,.mat-standard-chip.mat-chip-disabled .mat-chip-trailing-icon{cursor:default}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar,.mat-standard-chip.mat-chip-with-avatar{padding-top:0;padding-bottom:0}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-right:8px;padding-left:0}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-left:8px;padding-right:0}.mat-standard-chip.mat-chip-with-trailing-icon{padding-top:7px;padding-bottom:7px;padding-right:8px;padding-left:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon{padding-left:8px;padding-right:12px}.mat-standard-chip.mat-chip-with-avatar{padding-left:0;padding-right:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-avatar{padding-right:0;padding-left:12px}.mat-standard-chip .mat-chip-avatar{width:24px;height:24px;margin-right:8px;margin-left:4px}[dir=rtl] .mat-standard-chip .mat-chip-avatar{margin-left:8px;margin-right:4px}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{width:18px;height:18px;cursor:pointer}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-standard-chip .mat-chip-remove,[dir=rtl] .mat-standard-chip .mat-chip-trailing-icon{margin-right:8px;margin-left:0}.mat-chip-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit;overflow:hidden;transform:translateZ(0)}.mat-chip-list-wrapper{display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;margin:-4px}.mat-chip-list-wrapper input.mat-input-element,.mat-chip-list-wrapper .mat-standard-chip{margin:4px}.mat-chip-list-stacked .mat-chip-list-wrapper{flex-direction:column;align-items:flex-start}.mat-chip-list-stacked .mat-chip-list-wrapper .mat-standard-chip{width:100%}.mat-chip-avatar{border-radius:50%;justify-content:center;align-items:center;display:flex;overflow:hidden;object-fit:cover}input.mat-chip-input{width:150px;margin:4px;flex:1 0 150px}'],encapsulation:2,changeDetection:0});var He=0,Je=function(){function Ue(h,g){this._elementRef=h,this.focused=!1,this._addOnBlur=!1,this.chipEnd=new d.EventEmitter,this.placeholder="",this.id="mat-chip-list-input-"+He++,this._disabled=!1,this.inputElement=this._elementRef.nativeElement,this.separatorKeyCodes=g.separatorKeyCodes}var oe=Ue.prototype;return oe.ngOnChanges=function(){this._chipList.stateChanges.next()},oe.ngOnDestroy=function(){this.chipEnd.complete()},oe.ngAfterContentInit=function(){this._focusLastChipOnBackspace=this.empty},oe._keydown=function(g){if(g){if(g.keyCode===a.Mf&&!(0,a.Vb)(g,"shiftKey")&&this._chipList._allowFocusEscape(),g.keyCode===a.ZH&&this._focusLastChipOnBackspace)return this._chipList._keyManager.setLastItemActive(),void g.preventDefault();this._focusLastChipOnBackspace=!1}this._emitChipEnd(g)},oe._keyup=function(g){!this._focusLastChipOnBackspace&&g.keyCode===a.ZH&&this.empty&&(this._focusLastChipOnBackspace=!0,g.preventDefault())},oe._blur=function(){this.addOnBlur&&this._emitChipEnd(),this.focused=!1,this._chipList.focused||this._chipList._blur(),this._chipList.stateChanges.next()},oe._focus=function(){this.focused=!0,this._focusLastChipOnBackspace=this.empty,this._chipList.stateChanges.next()},oe._emitChipEnd=function(g){!this.inputElement.value&&g&&this._chipList._keydown(g),(!g||this._isSeparatorKey(g))&&(this.chipEnd.emit({input:this.inputElement,value:this.inputElement.value,chipInput:this}),g?.preventDefault())},oe._onInput=function(){this._chipList.stateChanges.next()},oe.focus=function(g){this.inputElement.focus(g)},oe.clear=function(){this.inputElement.value="",this._focusLastChipOnBackspace=!0},oe._isSeparatorKey=function(g){return!(0,a.Vb)(g)&&new Set(this.separatorKeyCodes).has(g.keyCode)},(0,t.Z)(Ue,[{key:"chipList",set:function(g){g&&(this._chipList=g,this._chipList.registerInput(this))}},{key:"addOnBlur",get:function(){return this._addOnBlur},set:function(g){this._addOnBlur=(0,l.Ig)(g)}},{key:"disabled",get:function(){return this._disabled||this._chipList&&this._chipList.disabled},set:function(g){this._disabled=(0,l.Ig)(g)}},{key:"empty",get:function(){return!this.inputElement.value}}]),Ue}();(ie=Je).\u0275fac=function(oe){return new(oe||ie)(d.\u0275\u0275directiveInject(d.ElementRef),d.\u0275\u0275directiveInject(Ce))},ie.\u0275dir=d.\u0275\u0275defineDirective({type:ie,selectors:[["input","matChipInputFor",""]],hostAttrs:[1,"mat-chip-input","mat-input-element"],hostVars:5,hostBindings:function(oe,h){1&oe&&d.\u0275\u0275listener("keydown",function(u){return h._keydown(u)})("keyup",function(u){return h._keyup(u)})("blur",function(){return h._blur()})("focus",function(){return h._focus()})("input",function(){return h._onInput()}),2&oe&&(d.\u0275\u0275hostProperty("id",h.id),d.\u0275\u0275attribute("disabled",h.disabled||null)("placeholder",h.placeholder||null)("aria-invalid",h._chipList&&h._chipList.ngControl?h._chipList.ngControl.invalid:null)("aria-required",h._chipList&&h._chipList.required||null))},inputs:{chipList:["matChipInputFor","chipList"],addOnBlur:["matChipInputAddOnBlur","addOnBlur"],separatorKeyCodes:["matChipInputSeparatorKeyCodes","separatorKeyCodes"],placeholder:"placeholder",id:"id",disabled:"disabled"},outputs:{chipEnd:"matChipInputTokenEnd"},exportAs:["matChipInput","matChipInputFor"],features:[d.\u0275\u0275NgOnChangesFeature]});var tt=function(){};(ye=tt).\u0275fac=function(oe){return new(oe||ye)},ye.\u0275mod=d.\u0275\u0275defineNgModule({type:ye}),ye.\u0275inj=d.\u0275\u0275defineInjector({providers:[p.rD,{provide:Ce,useValue:{separatorKeyCodes:[a.K5]}}],imports:[p.BQ]})}}]);