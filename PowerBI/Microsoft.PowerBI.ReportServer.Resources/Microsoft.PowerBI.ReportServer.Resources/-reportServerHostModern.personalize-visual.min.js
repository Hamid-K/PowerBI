"use strict";(self.webpackChunkreportServerHostModern=self.webpackChunkreportServerHostModern||[]).push([["personalize-visual"],{50930:function(re,A,o){o.r(A),o.d(A,{PersonalizeVisualModule:function(){return It}});var B=o(91280),t=o(81337),k=o(83839),C=o(41114),y="PBI.PersonalizeVisual.TypePaneInteraction",W=C.cx[y]=(0,C.b1)(y),I="PBI.PersonalizeVisual.FieldPaneInteraction",w=C.cx[I]=(0,C.b1)(I),U="PBI.PersonalizeVisual.FieldContextMenuInteraction",z=C.cx[U]=(0,C.b1)(U),G="PBI.PersonalizeVisual.ResetVisual",s=(C.cx[G]=(0,C.b1)(G),"PBI.PersonalizeVisual.DiscardChanges"),m=C.cx[s]=(0,C.b1)(s),E="PBI.PersonalizeVisual.DragAndDropProperty",K=C.cx[E]=(0,C.b1)(E),R="PBI.PersonalizeVisual.BookmarkTutorial",L=C.cx[R]=(0,C.b1)(R),V="PBI.EX.PersonalizeVisual.LoadFieldList",P=C.cx[V]=(0,C.b1)(V),e=o(50423),N=o(59694),M=o(98665),j=o(86286),Q=o(12179),te=o(82762),q=o(11547),J=o(14172),ce=o(73805),pe=o(59822),ne=o(65181),oe=o(83008),ue=o(39503),v=o(83342),T=o(19789),g=o(77476),x=o(59968),F=o(65005),O=o(68070),D=o(85102);function Ie(a,i){if(1&a&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",8),e.\u0275\u0275element(2,"span",9),e.\u0275\u0275elementStart(3,"p",10),e.\u0275\u0275element(4,"span",11),e.\u0275\u0275elementStart(5,"span",12),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(7,"span",13),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()),2&a){var n=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(n.perspectiveDisplayName)}}function ze(a,i){if(1&a&&(e.\u0275\u0275element(0,"span",14),e.\u0275\u0275elementStart(1,"p",10),e.\u0275\u0275element(2,"span",11),e.\u0275\u0275elementStart(3,"span",12),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()),2&a){var n=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(n.perspectiveDisplayName)}}function Me(a,i){if(1&a&&(e.\u0275\u0275elementStart(0,"div",6),e.\u0275\u0275template(1,Ie,8,1,"ng-container",2),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275template(3,ze,5,1,"ng-template",null,7,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&a){var n=e.\u0275\u0275reference(4),r=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(2,2,r.hasCubeNameError$))("ngIfElse",n)}}function Fe(a,i){if(1&a){var n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"pbi-field-list",4),e.\u0275\u0275listener("onNodeClick",function(c){e.\u0275\u0275restoreView(n);var p=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(p.onClickFieldListTreeNode(c))}),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275template(3,Me,5,4,"div",5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&a){var r=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("fieldListTree",e.\u0275\u0275pipeBind1(2,4,r.fieldListTree$))("options",r.fieldListOptions)("scrollSelectedItemIntoViewOnInit",!0),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",r.perspectiveDisplayName&&r.perspectiveDisplayName!==r.defaultPerspective)}}function Oe(a,i){if(1&a&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",8),e.\u0275\u0275element(2,"span",9),e.\u0275\u0275elementStart(3,"p",10),e.\u0275\u0275element(4,"span",11),e.\u0275\u0275elementStart(5,"span",12),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(7,"span",13),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()),2&a){var n=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(n.perspectiveDisplayName)}}function De(a,i){if(1&a&&(e.\u0275\u0275element(0,"span",14),e.\u0275\u0275elementStart(1,"p",10),e.\u0275\u0275element(2,"span",11),e.\u0275\u0275elementStart(3,"span",12),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()),2&a){var n=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(n.perspectiveDisplayName)}}function Be(a,i){if(1&a&&(e.\u0275\u0275elementStart(0,"div",6),e.\u0275\u0275template(1,Oe,8,1,"ng-container",2),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275template(3,De,5,1,"ng-template",null,18,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&a){var n=e.\u0275\u0275reference(4),r=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(2,2,r.hasCubeNameError$))("ngIfElse",n)}}function ke(a,i){if(1&a){var n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"pbi-tree",19,20),e.\u0275\u0275listener("onNodeClick",function(u){e.\u0275\u0275restoreView(n);var h=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(h.onClickFieldListTreeNode(u))})("onFirstRender",function(){e.\u0275\u0275restoreView(n);var u=e.\u0275\u0275reference(1);return e.\u0275\u0275resetView(u.scrollToFirstSelectedNode())}),e.\u0275\u0275elementEnd()}if(2&a){var r=i.ngIf;e.\u0275\u0275nextContext();var l=e.\u0275\u0275reference(2),c=e.\u0275\u0275nextContext();e.\u0275\u0275property("tree",r)("options",c.fieldListOptions)("search",l.value)}}function we(a,i){if(1&a&&(e.\u0275\u0275elementStart(0,"pbi-search-box")(1,"input",15,16),e.\u0275\u0275listener("keyup",function(){return null}),e.\u0275\u0275pipe(3,"localize"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(4,Be,5,4,"div",5),e.\u0275\u0275template(5,ke,2,3,"pbi-tree",17),e.\u0275\u0275pipe(6,"async")),2&a){var n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("placeholder",e.\u0275\u0275pipeBind1(3,3,"SearchBox_Text")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",n.perspectiveDisplayName&&n.perspectiveDisplayName!==n.defaultPerspective),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(6,5,n.fieldListTree$))}}var ve=function(){function a(i){this.localizationService=i,this.tooltipCaretSize="small"}return a.prototype.getTooltip=function(i){var n=i.flatNode;if(n.node.data.entity){var r=n.node.data.entity.contract.displayName;return(0,N.W)(this.localizationService.get("Field_Tooltip"),r,n.node.displayName)}return n.node.displayName},a.\u0275fac=function(n){return new(n||a)(e.\u0275\u0275inject(ne.o))},a.\u0275prov=e.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a}(),ge=function(){function a(i,n,r,l,c,p,u){var h=this;this.dataSourcesService=i,this.explorationNavigationService=n,this.featureSwitchService=r,this.fieldListData=l,this.fieldListService=c,this.telemetryService=p,this.tooltipStrategy=u,this.onSelectProperty=new e.EventEmitter,this.fieldListTree$=(0,te.D)(this.fieldListService.getViewModel(this.getDataSources())).pipe((0,J.U)(function(f){return f.schema.entities.sort(function(b,S){return b.displayName.localeCompare(S.displayName)}),h.convertFieldListToPbiTree(f)})),this.CubeNameErrorCode="CubeNameDoesNotExist",this.hasCubeNameError$=this.fieldListTree$.pipe((0,ce.h)(!1),(0,pe.K)(function(f){return(0,q.of)(f.serviceError.errorCode===h.CubeNameErrorCode)})),this.perspectiveDisplayName=this.getPerspectiveRef(),this.defaultPerspective="",this.fieldListOptions={tooltip:this.tooltipStrategy}}return a.prototype.onClickFieldListTreeNode=function(i){i.expandable||this.onSelectProperty.emit(i.node.data)},a.prototype.convertFieldListToPbiTree=function(i){var n,r=this.fieldListData.selectedProperty;if(r){var l=r.hierarchyLevels,c=l&&l.length?l.reduce(function(u,h){return(0,t.ev)((0,t.ev)([],u||[],!0),i.schema.findItems(h.expr)||[],!0)},[]):r.expr?i.schema.findItems(r.expr):[],p=new Set(c);n=function(h){return!(h.children&&h.children.length)&&p.has(h)}}return(0,k.hF)(i,{fieldSelectionPredicate:n,showTooltips:!0})},a.prototype.getPerspectiveRef=function(){var i,n,r,l=this.explorationNavigationService.getCurrentExploration(),c=l.sections[l.activeSectionIndex];return null===(r=null===(n=null===(i=c?.evaluatedObjects)||void 0===i?void 0:i.personalizeVisual)||void 0===n?void 0:n.perspectiveRef)||void 0===r?void 0:r.toString()},a.prototype.getDataSources=function(){var i=(0,t.ev)([],this.dataSourcesService.get(),!0),n=!1,r=this.getPerspectiveRef();if(r&&r!==this.defaultPerspective){var l=i.findIndex(function(u){return"dsr"===u.type}),c=i[l];if(n=!0,c){var p=(0,t.pi)((0,t.pi)({},c),{perspectiveId:r});i[l]=p}}return this.telemetryService.logEvent(P,{hasPerspective:n}),i},a.\u0275fac=function(n){return new(n||a)(e.\u0275\u0275directiveInject(oe.D),e.\u0275\u0275directiveInject(ue.z),e.\u0275\u0275directiveInject(v.vZ),e.\u0275\u0275directiveInject(j.M),e.\u0275\u0275directiveInject(T.x),e.\u0275\u0275directiveInject(M.y0),e.\u0275\u0275directiveInject(ve))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["personalize-visual-field-list"]],viewQuery:function(n,r){var l;(1&n&&e.\u0275\u0275viewQuery(Q.u,5),2&n)&&(e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(r.fieldListTree=l.first))},outputs:{onSelectProperty:"onSelectProperty"},features:[e.\u0275\u0275ProvidersFeature([ve])],decls:6,vars:3,consts:[[1,"pbi-depth-2","themeableElement"],[1,"fluentTheme-vlg-semibold"],[4,"ngIf","ngIfElse"],["originalFieldList",""],[3,"fieldListTree","options","scrollSelectedItemIntoViewOnInit","onNodeClick"],["class","pbi-field-list-perspective-header",4,"ngIf"],[1,"pbi-field-list-perspective-header"],["noCubeNameError",""],[1,"perspective-error"],["role","presentation",1,"glyphicon","glyph-small","pbi-glyph-error"],[1,"fluentTheme-sm-reg"],["localize","PersonalizeVisual_PerspectiveDescription"],[1,"fluentTheme-sm-semiBold"],["localize","PersonalizeVisual_PerspectiveDescription_Extensions_CubeNameError"],["role","presentation",1,"glyphicon","glyph-small","pbi-glyph-info"],["pbiSearchInput","",1,"pbi-focus-outline",3,"placeholder","keyup"],["searchInput",""],[3,"tree","options","search","onNodeClick","onFirstRender",4,"ngIf"],["noCubeNameErrorOriginalFieldList",""],[3,"tree","options","search","onNodeClick","onFirstRender"],["pbiTree",""]],template:function(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"section",0)(1,"header",1),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,Fe,4,6,"ng-container",2),e.\u0275\u0275template(4,we,7,7,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&n){var l=e.\u0275\u0275reference(5);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",r.fieldListData.bucket.displayName," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",r.featureSwitchService.featureSwitches.personalizeVisualUnifiedFieldList)("ngIfElse",l)}},dependencies:[g.NgIf,x.X,F.l,O.a,O.p,Q.u,g.AsyncPipe,D.F],styles:[".pbi-overlay-caret-large.pbi-overlay-caret[_nghost-%COMP%]:after{background:var(--gray-20, #F3F2F1)}section[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:383px;width:260px;padding:12px 24px 17px;border-radius:2px;background:var(--fluent-theme-neutral-lighter-color, #F3F2F1);box-sizing:border-box}header[_ngcontent-%COMP%]{color:var(--fluent-theme-neutral-dark-alt-color, #333333);margin-bottom:16px}.pbi-field-list-perspective-header[_ngcontent-%COMP%]{display:flex;margin:12px 0 3px}.pbi-field-list-perspective-header[_ngcontent-%COMP%]   .pbi-glyph-error[_ngcontent-%COMP%]{color:var(--fluent-theme-error-dark-color, #A80000)}.pbi-field-list-perspective-header[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%]{margin:3px 8px 0 0}.pbi-field-list-perspective-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--gray-160, #323130)}.pbi-field-list-perspective-header[_ngcontent-%COMP%]   .perspective-error[_ngcontent-%COMP%]{background-color:var(--fluent-theme-error-background-color, #FDE7E9);display:flex;padding:8px}pbi-tree[_ngcontent-%COMP%]{margin-top:9px;height:100%;display:block;overflow:hidden}"],changeDetection:0}),a}(),de=o(93437),fe=o(48144),ye=o(21728),xe=o(19008),Re=o(80366),Ne=o(76001),Z=o(25512),le=o(86940),je=o(33554),Ae=o(35510),se=o(48787),ae=o(83317),$e=o(26898),He=o(72262),Ue=o(23983),_e=o(76072),Ke=o(28894),be=o(10861),me=o(36858),We=o(96883),Ge=o(80357);function Qe(a,i){if(1&a&&e.\u0275\u0275element(0,"i"),2&a){var n=e.\u0275\u0275nextContext();e.\u0275\u0275classMapInterpolate1("field-glyph glyphicon glyph-mini ng-scope ",n.icon,"")}}function Je(a,i){if(1&a){var n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",5),e.\u0275\u0275listener("pbiMenuButtonClick",function(c){e.\u0275\u0275restoreView(n);var p=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(p.onMenuItemClicked.emit(c))})("pbiMenuOpen",function(){e.\u0275\u0275restoreView(n);var c=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(c.onMenuOpen())}),e.\u0275\u0275pipe(1,"localize"),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275elementEnd()}if(2&a){var r=e.\u0275\u0275nextContext();e.\u0275\u0275attributeInterpolate3("aria-labelledby","",r.contextMenuLabel," ",r.bucketLabel," ",r.propertyLabel,""),e.\u0275\u0275property("pbiMenu",r.pbiMenuViewModel)("title",e.\u0275\u0275pipeBind1(2,8,"FieldListProperty_Context_Menu")),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(1,6,"FieldListProperty_Context_Menu"))}}var Ce=new Set([128,1]),Pe=new Set([4,2]),Ze=new Set((0,t.ev)((0,t.ev)([],Array.from(Ce)||[],!0),Array.from(Pe)||[],!0)),Xe=function(){function a(i){var n=this;this.telemetryService=i,this.onOpenFieldMenu=new e.EventEmitter,this.onMenuItemClicked=new e.EventEmitter,this.pbiMenuViewModel=function(){return n.getContextMenuModel(n.menuViewModel)}}return a.prototype.getContextMenuModel=function(i){var n=i.items.filter(function(p){return!!p.key&&Ze.has(p.key.action)}),r=n.filter(function(p){return Ce.has(p.key.action)}),l=n.filter(function(p){return Pe.has(p.key.action)}),c=(0,t.ev)((0,t.ev)([],r||[],!0),l.length?[{type:1}].concat(l):[],!0);return(0,We.m)({items:c})},a.prototype.onMenuOpen=function(){this.telemetryService.logChildEvent(this.rootTelemetryEvent,de.l,{overlayType:"FieldContextMenu"})},a.\u0275fac=function(n){return new(n||a)(e.\u0275\u0275directiveInject(M.y0))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["personalize-visual-visual-data-role"]],inputs:{rootTelemetryEvent:"rootTelemetryEvent",displayName:"displayName",bucketLabel:"bucketLabel",propertyLabel:"propertyLabel",fieldMenuLabel:"fieldMenuLabel",contextMenuLabel:"contextMenuLabel",tooltip:"tooltip",icon:"icon",showContextMenu:"showContextMenu",interactive:"interactive",menuViewModel:"menuViewModel"},outputs:{onOpenFieldMenu:"onOpenFieldMenu",onMenuItemClicked:"onMenuItemClicked"},decls:6,vars:13,consts:[[1,"fluentTheme-md-reg","field"],["pbiTooltipCaretSize","small","aria-haspopup","listbox",1,"field-menu","pbi-focus-outline",3,"id","pbiTooltip","pbiTooltipDisabled","pbiTooltipShowDelay","click"],["propertyButton",""],[3,"class",4,"ngIf"],["class","glyphicon glyph-small pbi-glyph-more field-context-menu pbi-focus-outline","aria-haspopup","listbox",3,"pbiMenu","title","pbiMenuButtonClick","pbiMenuOpen",4,"ngIf"],["aria-haspopup","listbox",1,"glyphicon","glyph-small","pbi-glyph-more","field-context-menu","pbi-focus-outline",3,"pbiMenu","title","pbiMenuButtonClick","pbiMenuOpen"]],template:function(n,r){if(1&n){var l=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",0)(1,"button",1,2),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(l);var p=e.\u0275\u0275reference(2);return e.\u0275\u0275resetView(r.onOpenFieldMenu.emit(p))}),e.\u0275\u0275template(3,Qe,1,3,"i",3),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,Je,3,10,"button",4),e.\u0275\u0275elementEnd()}2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275classProp("field-menu-noninteractive",!r.interactive),e.\u0275\u0275attributeInterpolate3("aria-labelledby","",r.fieldMenuLabel," ",r.bucketLabel," ",r.propertyLabel,""),e.\u0275\u0275property("id",r.propertyLabel)("pbiTooltip",r.tooltip)("pbiTooltipDisabled",!r.showContextMenu)("pbiTooltipShowDelay",1500),e.\u0275\u0275attribute("aria-disabled",!r.interactive),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",r.icon),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",r.displayName,""),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",r.showContextMenu))},dependencies:[g.NgIf,Ge.l8,me.V,D.F],styles:['personalize-visual-visual-data-role .field{position:relative}personalize-visual-visual-data-role .field .field-menu{background:var(--fluent-theme-white-color, #FFF);border:1px solid var(--gray-110, #8A8886);box-sizing:border-box;border-radius:2px;height:24px;color:var(--fluent-theme-neutral-dark-color, #201F1E);line-height:14px;width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;margin-top:4px;padding:2px 44px 2px 6px;position:relative;text-align:left;cursor:pointer}personalize-visual-visual-data-role .field .field-menu:after{font-family:PowrMDL2;content:"\\e972";position:absolute;top:5px;right:5px;height:12px;transform:rotate(-90deg);width:12px;font-size:var(--sm-font-size, 12px)}html[dir=rtl] personalize-visual-visual-data-role .field .field-menu{padding-left:44px;padding-right:6px;text-align:right}html[dir=rtl] personalize-visual-visual-data-role .field .field-menu:after{transform:rotate(90deg);left:5px;right:initial}personalize-visual-visual-data-role .field .field-menu-noninteractive{cursor:default}personalize-visual-visual-data-role .field .field-menu-noninteractive:after{display:none}personalize-visual-visual-data-role .field .field-context-menu{position:absolute;height:20px;width:20px;right:21px;top:6px;padding:0;border:0;background-color:var(--fluent-theme-white-color, #FFF)}html[dir=rtl] personalize-visual-visual-data-role .field .field-context-menu{left:21px;right:initial}personalize-visual-visual-data-role .field .drop-target{border-top:2px solid var(--fluent-theme-neutral-primary-color, #323130)}\n'],encapsulation:2,changeDetection:0}),a}();function Ye(a,i){if(1&a){var n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",12,13),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);var c=e.\u0275\u0275nextContext().$implicit,p=e.\u0275\u0275reference(9),u=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(u.enableEditMode(c,p))}),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275elementEnd()}if(2&a){var r=e.\u0275\u0275nextContext().index;e.\u0275\u0275attributeInterpolate1("aria-labelledby","inline-explore-bucket-label-",r," inline-explore-add-new-field"),e.\u0275\u0275property("pbiTooltip",e.\u0275\u0275pipeBind1(2,2,"InlineExplore_AddNewField"))}}function qe(a,i){if(1&a){var n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"personalize-visual-visual-data-role",19),e.\u0275\u0275listener("onOpenFieldMenu",function(f){var b=e.\u0275\u0275restoreView(n),S=b.$implicit,H=b.index,X=e.\u0275\u0275nextContext(2).$implicit,Y=e.\u0275\u0275nextContext(2).$implicit,ie=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(ie.openChangeFieldMenu(Y,f,X,S,H))})("onMenuItemClicked",function(f){e.\u0275\u0275restoreView(n);var b=e.\u0275\u0275nextContext(2).$implicit,S=e.\u0275\u0275nextContext(2).$implicit,H=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(H.handlePbiMenuClick(f,S,b))}),e.\u0275\u0275elementEnd()}if(2&a){var r=i.$implicit,l=i.index,c=e.\u0275\u0275nextContext(2).$implicit,p=e.\u0275\u0275nextContext(2).index,u=e.\u0275\u0275nextContext(2);e.\u0275\u0275propertyInterpolate1("bucketLabel","inline-explore-bucket-label-",p,""),e.\u0275\u0275propertyInterpolate3("propertyLabel","inline-explore-bucket-property-",p,"-",c.startIndex,"-",l,""),e.\u0275\u0275property("rootTelemetryEvent",u.rootTelemetryEvent)("menuViewModel",c.interactivityOptions.dropDownItems)("displayName",u.formatHierarchyLevel(c.displayOptions.displayName,r.displayName))("tooltip",c.displayOptions.tooltipTitle)("icon",c.displayOptions.glyph)("interactive",c.interactivityOptions.isRemovableField)("showContextMenu",c.interactivityOptions.dropDownItems)}}function et(a,i){if(1&a&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,qe,1,11,"personalize-visual-visual-data-role",18),e.\u0275\u0275elementContainerEnd()),2&a){var n=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",n.hierarchyLevels)}}function tt(a,i){if(1&a){var n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"personalize-visual-visual-data-role",19),e.\u0275\u0275listener("onOpenFieldMenu",function(u){e.\u0275\u0275restoreView(n);var h=e.\u0275\u0275nextContext().$implicit,f=e.\u0275\u0275nextContext(2).$implicit,b=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(b.openChangeFieldMenu(f,u,h))})("onMenuItemClicked",function(u){e.\u0275\u0275restoreView(n);var h=e.\u0275\u0275nextContext().$implicit,f=e.\u0275\u0275nextContext(2).$implicit,b=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(b.handlePbiMenuClick(u,f,h))}),e.\u0275\u0275elementEnd()}if(2&a){var r=e.\u0275\u0275nextContext().$implicit,l=e.\u0275\u0275nextContext(2).index,c=e.\u0275\u0275nextContext(2);e.\u0275\u0275propertyInterpolate1("bucketLabel","inline-explore-bucket-label-",l,""),e.\u0275\u0275propertyInterpolate2("propertyLabel","inline-explore-bucket-property-",l,"-",r.startIndex,""),e.\u0275\u0275property("rootTelemetryEvent",c.rootTelemetryEvent)("menuViewModel",r.interactivityOptions.dropDownItems)("displayName",r.displayOptions.displayName)("tooltip",r.displayOptions.tooltipTitle)("icon",r.displayOptions.glyph)("interactive",r.interactivityOptions.isRemovableField)("showContextMenu",r.interactivityOptions.dropDownItems)}}function nt(a,i){if(1&a){var n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",15),e.\u0275\u0275listener("drop",function(p){var h=e.\u0275\u0275restoreView(n).index,f=e.\u0275\u0275nextContext(2).index,b=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(b.handleDrop(p,h,f))})("dragend",function(p){e.\u0275\u0275restoreView(n);var u=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(u.handleDragEnd(p))})("dragleave",function(p){e.\u0275\u0275restoreView(n);var u=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(u.handleDragLeave(p))})("dragstart",function(){var u=e.\u0275\u0275restoreView(n).index,h=e.\u0275\u0275nextContext(2).index,f=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(f.handleDragStart(u,h))})("dragover",function(p){var h=e.\u0275\u0275restoreView(n).index,f=e.\u0275\u0275nextContext(2).index,b=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(b.handleDragOver(p,h,f))}),e.\u0275\u0275template(2,et,2,1,"ng-container",16),e.\u0275\u0275template(3,tt,1,10,"ng-template",null,17,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&a){var r=i.$implicit,l=e.\u0275\u0275reference(4);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",null==r||null==r.hierarchyLevels?null:r.hierarchyLevels.length)("ngIfElse",l)}}function it(a,i){if(1&a&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,nt,5,2,"ng-container",14),e.\u0275\u0275elementContainerEnd()),2&a){var n=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",n.properties)}}function rt(a,i){if(1&a){var n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",20,21),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);var c=e.\u0275\u0275reference(1),p=e.\u0275\u0275nextContext().$implicit,u=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(u.openNewFieldMenu(p,c))})("drop",function(c){e.\u0275\u0275restoreView(n);var p=e.\u0275\u0275nextContext().index,u=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(u.handleDrop(c,0,p))})("dragleave",function(c){e.\u0275\u0275restoreView(n);var p=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(p.handleDragLeave(c))})("dragover",function(c){e.\u0275\u0275restoreView(n);var p=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(p.handleDragOver(c,-1,-1))}),e.\u0275\u0275elementEnd()}if(2&a){var r=e.\u0275\u0275nextContext().index;e.\u0275\u0275attributeInterpolate1("aria-labelledby","inline-explore-bucket-label-",r," inline-explore-add-new-field")}}function at(a,i){if(1&a&&(e.\u0275\u0275elementStart(0,"li",5)(1,"fieldset")(2,"div",6)(3,"legend",7),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,Ye,3,4,"button",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,it,2,1,"ng-container",3),e.\u0275\u0275template(7,rt,2,1,"button",9),e.\u0275\u0275element(8,"button",10,11),e.\u0275\u0275pipe(10,"async"),e.\u0275\u0275elementEnd()()),2&a){var n=i.$implicit,r=i.index,l=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate1("id","inline-explore-bucket-label-",r,""),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.displayName," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.supportsMultipleItems&&(null==n.properties?null:n.properties.length)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==n.properties?null:n.properties.length),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!(null!=n.properties&&n.properties.length)),e.\u0275\u0275advance(1),e.\u0275\u0275attributeInterpolate1("aria-labelledby","inline-explore-bucket-label-",r," inline-explore-add-new-field"),e.\u0275\u0275property("hidden",e.\u0275\u0275pipeBind1(10,7,l.editableBucket$)!==n)}}function ot(a,i){if(1&a&&(e.\u0275\u0275elementStart(0,"ul"),e.\u0275\u0275template(1,at,11,9,"li",4),e.\u0275\u0275elementEnd()),2&a){var n=i.ngIf;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",n)}}var lt=function(){function a(i,n,r,l,c,p,u,h,f,b,S,H,X,Y){this.elementRef=i,this.conceptualSchemaProxy=n,this.dataSources=r,this.groupingDesignStateService=l,this.injector=c,this.lazyProvider=p,this.lazyScoped=u,this.localizationService=h,this.overlay=f,this.overlayRef=b,this.renderer=S,this.selection=H,this.telemetryService=X,this.visualAuthoring=Y,this.onLoad=new e.EventEmitter,this.buckets$=new je.t(1),this.editableBucket$=new Ae.X(null),this.includeVariationSourceDisplayName=this.localizationService.get("IncludeVariationSourceDisplayName"),this.dropTargetClass="drop-target"}return a.prototype.ngOnInit=function(){return(0,t.mG)(this,void 0,void 0,function(){var i,n,r=this;return(0,t.Jh)(this,function(l){switch(l.label){case 0:return i=this,[4,this.lazyScoped.get("fieldWellModernService")];case 1:return i.fieldWellModernService=l.sent(),n=function(p){return r.buckets$.next(p.buckets)},this.core=this.fieldWellModernService.createFieldWellCore($(this.elementRef.nativeElement),!0,n),[4,this.core.onInit()];case 2:return l.sent(),this.onLoad.emit(),[2]}})})},a.prototype.enableEditMode=function(i,n){this.editableBucket$.next(i),this.openNewFieldMenu(i,n)},a.prototype.openChangeFieldMenu=function(i,n,r,l,c){r.interactivityOptions.isRemovableField&&this.openFieldListOverlay({bucket:i,selectedProperty:l||r},n,r,l,c)},a.prototype.openNewFieldMenu=function(i,n){this.openFieldListOverlay({bucket:i},n)},a.prototype.formatHierarchyLevel=function(i,n){return(0,N.W)(this.includeVariationSourceDisplayName,i,n)},a.prototype.openFieldListOverlay=function(i,n,r,l,c){return(0,t.mG)(this,void 0,void 0,function(){var p,u,h,f,b=this;return(0,t.Jh)(this,function(S){switch(S.label){case 0:return p=this.telemetryService.startChildEvent(this.rootTelemetryEvent,de.l,{overlayType:"FieldSelection"}),u=this.overlay.position().flexibleConnectedTo(n).withPositions([(0,Z.v3)(4,0),(0,Z.xe)(0,-4),(0,Z.Zc)(0,4),(0,Z.q6)(-4,0)]).withFlexibleDimensions(!0).withPush(!0).withGrowAfterOpen(!0),[4,this.lazyProvider.getModule("./lazy-modules/personalize-visual/personalize-visual.module#PersonalizeVisualModule")];case 1:return h=S.sent().componentFactoryResolver,(f=this.overlay.open({component:ge,data:i,options:{positionStrategy:u,hasBackdrop:!0,backdropClass:le.L},closeOnBackdropClick:!0,hasCaret:!0,parent:this.overlayRef,closeWithParent:!0,injector:this.injector,componentFactoryResolver:h})).onClose.pipe((0,se.q)(1)).subscribe(function(){b.editableBucket$.next(null),p.resolve()}),f.componentRef.instance.onSelectProperty.pipe((0,ae.R)(f.onClose)).subscribe(function(H){return b.onSelectProperty(H,i.bucket.role,f,r,l,c)}),[2]}})})},a.prototype.onSelectProperty=function(i,n,r,l,c,p){return(0,t.mG)(this,void 0,void 0,function(){var u,h,f,b,S,H,X,ie;return(0,t.Jh)(this,function(ee){switch(ee.label){case 0:return(u=ye.UP.getSelectedVisual(this.selection))?(h=this.dataSources.get(),b=!0,(f=!!l)?[4,this.conceptualSchemaProxy.get(h)]:[3,3]):[2];case 1:return S=ee.sent(),[4,this.visualAuthoring.removeFieldFromRole({role:n,projOptions:{fieldIndex:l.startIndex+(p||0)},count:c?1:l.hierarchyLevels&&l.hierarchyLevels.length||1},S)];case 2:b=ee.sent(),ee.label=3;case 3:return H=(0,fe.y)((0,fe.R)(i.fieldType),this.groupingDesignStateService),X=H.fieldExpr(i),[4,this.visualAuthoring.addFieldInRole(X,n,h,u,l&&l.startIndex+(p||0),void 0,!0)];case 4:return ie=ee.sent(),this.telemetryService.logChildEvent(this.rootTelemetryEvent,w,{interactionType:f?"Replace":"Add",success:b&&ie}),r.close(),[2]}})})},a.prototype.handlePbiMenuClick=function(i,n,r){var l=ye.UP.getSelectedVisual(this.selection);this.handleContextMenuClick(i.data,n,r,this.dataSources,this.conceptualSchemaProxy,l)},a.prototype.handleContextMenuClick=function(i,n,r,l,c,p){return(0,t.mG)(this,void 0,void 0,function(){var u,h,b;return(0,t.Jh)(this,function(S){switch(S.label){case 0:switch(u=p.config.singleVisual.visualType,h=l.get(),i.action){case 1:return[3,1];case 2:return[3,3];case 4:return[3,5];case 128:return[3,7]}return[3,9];case 1:return[4,c.get(h)];case 2:return b=S.sent(),this.removeField(n.role,r.startIndex,b,u),[3,10];case 3:return[4,this.removeAggregate(n.role,r.startIndex,p,h,u)];case 4:case 6:case 8:return S.sent(),[3,10];case 5:return[4,this.setAggregate(n.role,r.startIndex,(0,Re._L)((0,Ne.Q)(r.expr)),i.aggregate,p,h,u)];case 7:return[4,this.setVariation(n.role,r.startIndex,i.variationExpr,p,h,u)];case 9:return[3,10];case 10:return[2]}})})},a.prototype.removeField=function(i,n,r,l){return(0,t.mG)(this,void 0,void 0,function(){var c;return(0,t.Jh)(this,function(p){switch(p.label){case 0:return[4,this.visualAuthoring.removeFieldFromRole({role:i,projOptions:{fieldIndex:n}},r)];case 1:return c=p.sent(),this.telemetryService.logChildEvent(this.rootTelemetryEvent,z,{interactionType:"RemoveField",visualType:l,role:i,success:c}),[2]}})})},a.prototype.removeAggregate=function(i,n,r,l,c){return(0,t.mG)(this,void 0,void 0,function(){var p;return(0,t.Jh)(this,function(u){switch(u.label){case 0:return[4,this.visualAuthoring.removeAggregate(i,n,r,l)];case 1:return p=u.sent(),this.telemetryService.logChildEvent(this.rootTelemetryEvent,z,{interactionType:"RemoveAggregate",visualType:c,role:i,success:p}),[2]}})})},a.prototype.setAggregate=function(i,n,r,l,c,p,u){return(0,t.mG)(this,void 0,void 0,function(){var h;return(0,t.Jh)(this,function(f){switch(f.label){case 0:return[4,this.visualAuthoring.setAggregate(i,n,l,c,p)];case 1:return h=f.sent(),this.telemetryService.logChildEvent(this.rootTelemetryEvent,z,{interactionType:"SetAggregate",visualType:u,role:i,oldValue:(0,xe.b)(r),newValue:(0,xe.b)(l),success:h}),[2]}})})},a.prototype.setVariation=function(i,n,r,l,c,p){return(0,t.mG)(this,void 0,void 0,function(){var u;return(0,t.Jh)(this,function(h){switch(h.label){case 0:return[4,this.visualAuthoring.setVariation(c,l,r,i,n)];case 1:return u=h.sent(),this.telemetryService.logChildEvent(this.rootTelemetryEvent,z,{interactionType:"SetVariation",visualType:p,role:i,success:u}),[2]}})})},a.prototype.handleDrop=function(i,n,r){return(0,t.mG)(this,void 0,void 0,function(){var l,c,u;return(0,t.Jh)(this,function(h){switch(h.label){case 0:return this.dragDropPayload?(l=this.core.viewModel.buckets,c=this.dataSources.get(),r!==this.dragDropPayload.sourceBucketIndex||n!==this.dragDropPayload.sourcePropertyIndex?((r===this.dragDropPayload.sourceBucketIndex?n>this.dragDropPayload.sourcePropertyIndex:r>this.dragDropPayload.sourceBucketIndex)&&(n=0===n?0:n-1),[4,this.visualAuthoring.moveField(l[this.dragDropPayload.sourceBucketIndex].role,l[r].role,this.dragDropPayload.sourcePropertyIndex,n,1,c,!1)]):[3,2]):[3,3];case 1:u=h.sent(),this.telemetryService.logChildEvent(this.rootTelemetryEvent,K,{success:u,sourceBucketIndex:this.dragDropPayload.sourceBucketIndex,targetBucketIndex:r,sourcePropertyIndex:this.dragDropPayload.sourcePropertyIndex,targetPropertyIndex:n}),h.label=2;case 2:i.preventDefault(),this.renderer.removeClass(i.target,this.dropTargetClass),h.label=3;case 3:return[2]}})})},a.prototype.handleDragOver=function(i,n,r){this.dragDropPayload&&(this.dragDropPayload.sourcePropertyIndex!==n||r!==this.dragDropPayload.sourceBucketIndex)&&(this.renderer.addClass(i.target,this.dropTargetClass),i.preventDefault())},a.prototype.handleDragStart=function(i,n){this.dragDropPayload={sourcePropertyIndex:i,sourceBucketIndex:n}},a.prototype.handleDragLeave=function(i){this.dragDropPayload&&(this.renderer.removeClass(i.target,this.dropTargetClass),i.preventDefault())},a.prototype.handleDragEnd=function(i){this.dragDropPayload=void 0,this.renderer.removeClass(i.target,this.dropTargetClass)},a.\u0275fac=function(n){return new(n||a)(e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject($e.i),e.\u0275\u0275directiveInject(oe.D),e.\u0275\u0275directiveInject(Ue.AA),e.\u0275\u0275directiveInject(e.Injector),e.\u0275\u0275directiveInject(_e.E),e.\u0275\u0275directiveInject(Ke.H),e.\u0275\u0275directiveInject(ne.o),e.\u0275\u0275directiveInject(le._),e.\u0275\u0275directiveInject(j.w),e.\u0275\u0275directiveInject(e.Renderer2),e.\u0275\u0275directiveInject(He.z),e.\u0275\u0275directiveInject(M.y0),e.\u0275\u0275directiveInject(be.$8))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["personalize-visual-visual-data-role-list"]],inputs:{rootTelemetryEvent:"rootTelemetryEvent"},outputs:{onLoad:"onLoad"},decls:5,vars:3,consts:[["id","inline-explore-property-label","role","none","localize","InlineExplore_ChangeField",1,"cdk-visually-hidden"],["id","inline-explore-context-menu-label","role","none","localize","PersonalizeVisual_FieldContextMenuLabel",1,"cdk-visually-hidden"],["id","inline-explore-add-new-field","role","none","localize","InlineExplore_AddNewField",1,"cdk-visually-hidden"],[4,"ngIf"],["class","bucket",4,"ngFor","ngForOf"],[1,"bucket"],[1,"header"],[1,"fluentTheme-md-reg",3,"id"],["pbiTooltipCaretSize","small","class","glyphicon pbi-glyph-add add-property pbi-focus-outline",3,"pbiTooltip","click",4,"ngIf"],["class","fluentTheme-md-reg pill add-new-field pbi-focus-outline","aria-haspopup","listbox","localize","InlineExplore_AddNewField",3,"click","drop","dragleave","dragover",4,"ngIf"],["disabled","","aria-haspopup","listbox","localize","InlineExplore_AddNewField",1,"fluentTheme-md-reg","pill","add-new-field",3,"hidden"],["addNewFieldButtonPlaceholder",""],["pbiTooltipCaretSize","small",1,"glyphicon","pbi-glyph-add","add-property","pbi-focus-outline",3,"pbiTooltip","click"],["addNewPropertyButton",""],[4,"ngFor","ngForOf"],["draggable","true",1,"projection",3,"drop","dragend","dragleave","dragstart","dragover"],[4,"ngIf","ngIfElse"],["notHierarchyLevel",""],["fieldMenuLabel","inline-explore-property-label","contextMenuLabel","inline-explore-context-menu-label",3,"bucketLabel","propertyLabel","rootTelemetryEvent","menuViewModel","displayName","tooltip","icon","interactive","showContextMenu","onOpenFieldMenu","onMenuItemClicked",4,"ngFor","ngForOf"],["fieldMenuLabel","inline-explore-property-label","contextMenuLabel","inline-explore-context-menu-label",3,"bucketLabel","propertyLabel","rootTelemetryEvent","menuViewModel","displayName","tooltip","icon","interactive","showContextMenu","onOpenFieldMenu","onMenuItemClicked"],["aria-haspopup","listbox","localize","InlineExplore_AddNewField",1,"fluentTheme-md-reg","pill","add-new-field","pbi-focus-outline",3,"click","drop","dragleave","dragover"],["addNewFieldButton",""]],template:function(n,r){1&n&&(e.\u0275\u0275element(0,"p",0)(1,"p",1)(2,"p",2),e.\u0275\u0275template(3,ot,2,1,"ul",3),e.\u0275\u0275pipe(4,"async")),2&n&&(e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(4,1,r.buckets$)))},dependencies:[g.NgForOf,g.NgIf,x.X,me.V,Xe,g.AsyncPipe,D.F],styles:["ul[_ngcontent-%COMP%]{list-style:none;padding:0}fieldset[_ngcontent-%COMP%]{min-width:100%;padding:0;margin:0;border:0}.bucket[_ngcontent-%COMP%]:not(:last-child){margin-bottom:20px}.bucket[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%]{color:var(--fluent-theme-neutral-primary-color, #323130)}.bucket[_ngcontent-%COMP%]   button.pill[_ngcontent-%COMP%]{background:var(--fluent-theme-white-color, #FFF);border:1px solid var(--gray-110, #8A8886);box-sizing:border-box;border-radius:2px;height:24px;color:var(--fluent-theme-neutral-dark-color, #201F1E);line-height:14px;width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;padding:2px;margin-top:4px}.bucket[_ngcontent-%COMP%]   button.add-new-field[_ngcontent-%COMP%]{text-align:center}.bucket[_ngcontent-%COMP%]   button.drop-target[_ngcontent-%COMP%]{border:2px solid var(--fluent-theme-neutral-primary-color, #323130)}.bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .add-property[_ngcontent-%COMP%]{font-size:12px;background:none;border:none;padding:0;color:var(--gray-190, #201F1E);margin-right:6px}"],changeDetection:0}),a}(),st=o(89961),Te=function(){function a(){}return a.\u0275fac=function(n){return new(n||a)},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["ng-component"]],decls:1,vars:2,consts:[["role","listbox",1,"compact-container",3,"disableMoreOptionsIcon","disableContextMenu"]],template:function(n,r){1&n&&e.\u0275\u0275element(0,"visual-types-container-modern",0),2&n&&e.\u0275\u0275property("disableMoreOptionsIcon",!0)("disableContextMenu",!0)},dependencies:[st.r],styles:[".pbi-overlay-caret-large.pbi-overlay-caret[_nghost-%COMP%]:after{background:var(--gray-20, #F3F2F1)}[_nghost-%COMP%]{width:168px;min-height:144px;background:var(--gray-20, #F3F2F1);border-radius:2px;box-shadow:0 0 2px var(--colorNeutralShadowAmbient),0 4px 8px var(--colorNeutralShadowKey);padding:12px}"]}),a}(),Ve=o(9398),Ee=o(8590),ct=o(93573),Se=o(59973),pt=o(17653),ut=o(22318),dt=o(77526),mt=o(18353),Le=o(81905),ht=o(11494),vt=function(){function a(i){this.localizationService=i,this.BookmarkTutorialModelKey="BookmarkTutorial"}return a.prototype.createBookmarkTutorialModel=function(){var i="#bookmarkButton";return{itemKeys:[this.BookmarkTutorialModelKey],items:{BookmarkTutorial:{title:this.localizationService.get("TutorialPopup_BookmarkTitle"),text:this.localizationService.get("TutorialPopup_BookmarkContent"),buttonLabel:this.localizationService.get("TutorialPopup_GotIt"),customClass:"tutorial-bookmarks-container",dataStoreKey:this.BookmarkTutorialModelKey,canShow:function(){return!!$(i)},attachTo:function(){return $(i)},offset:{top:-15,left:0},telemetryEventArgs:[L],telemetryLogTutorialDismiss:!0,preferredOrientation:"top",learnMoreText:this.localizationService.get("LearnMore"),learnMoreUrl:"https://go.microsoft.com/fwlink/?linkid=2141051"}}}},a.\u0275fac=function(n){return new(n||a)(e.\u0275\u0275inject(ne.o))},a.\u0275prov=e.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),gt=o(69071),ft=o(29866),yt=o(56083),he=function(){function a(i,n,r,l,c,p,u,h,f,b,S,H,X,Y,ie,ee){this.personalizeVisualData=i,this.eventBridge=n,this.changeDetectorRef=r,this.lazyProvider=l,this.localizationService=c,this.ngZone=p,this.overlay=u,this.tutorialService=h,this.router=f,this.telemetryService=b,this.trustedVisualService=S,this.injector=H,this.visualPluginService=X,this.tutorialPopupService=Y,this.overlayRef=ie,this.visualAuthoringService=ee,this.isSessionDirty=!1,this.rootTelemetryEvent=this.personalizeVisualData.rootEvent,this.originalVisualConfig=_.cloneDeep(this.personalizeVisualData.visual.config)}return a.prototype.ngOnInit=function(){var i=this,n=this.eventBridge.on(Ee.jCS).pipe((0,Se.h)(function(r){return r.affectContainer(i.personalizeVisualData.visual)}));this.visualTypes$=n.pipe((0,pt.b)(function(){return i.checkDirtyState()}),(0,J.U)(function(){return i.personalizeVisualData.visual.config.singleVisual.visualType}),(0,ut.O)(this.personalizeVisualData.visual.config.singleVisual.visualType),(0,dt.x)()),this.visualDisplayName$=this.visualTypes$.pipe((0,J.U)(function(r){return i.getVisualDisplayName(r)})),this.visualTypes$.pipe((0,mt.R)(function(r,l){return i.logVisualTypeChange(r,l),l}),(0,ae.R)(this.overlayRef.onClose)).subscribe(),this.router.events.pipe((0,Se.h)(function(r){return r instanceof Ve.m2}),(0,se.q)(1)).subscribe(function(){return i.overlayRef.close()}),n.pipe((0,ae.R)(this.overlayRef.onClose),(0,Le.w)(function(){return i.ngZone.onStable})).subscribe(function(){return i.updateOverlayPosition()}),this.overlayRef.onClose.pipe((0,se.q)(1)).subscribe(function(){i.isSessionDirty&&i.tutorialPopupService.startTutorial(i.tutorialService.createBookmarkTutorialModel())})},a.prototype.onClickVisualTypes=function(i){return(0,t.mG)(this,void 0,void 0,function(){var n,r,l,c,p=this;return(0,t.Jh)(this,function(u){switch(u.label){case 0:return n=this.overlay.position().flexibleConnectedTo(i).withPositions([(0,Z.v3)(4,0),(0,Z.xe)(0,-4),(0,Z.Zc)(0,4),(0,Z.q6)(-4,0)]).withFlexibleDimensions(!0).withPush(!0).withGrowAfterOpen(!0),r=this.telemetryService.startChildEvent(this.rootTelemetryEvent,de.l,{overlayType:"VisualTypeSelection"}),[4,this.lazyProvider.getModule("./lazy-modules/personalize-visual/personalize-visual.module#PersonalizeVisualModule")];case 1:return l=u.sent().componentFactoryResolver,(c=this.overlay.open({component:Te,options:{positionStrategy:n,hasBackdrop:!0,backdropClass:le.L},closeOnBackdropClick:!0,hasCaret:!0,parent:this.overlayRef,closeWithParent:!0,injector:this.injector,componentFactoryResolver:l})).onClose.pipe((0,ae.R)(this.overlayRef.onClose),(0,se.q)(1)).subscribe(function(){return r.resolve()}),this.visualTypes$.pipe((0,ae.R)(c.onClose),(0,Le.w)(function(){return p.ngZone.onStable})).subscribe(function(){return n.apply()}),[2]}})})},a.prototype.getDiscardChangesTooltipText=function(){return this.localizationService.get(this.isSessionDirty?"PersonalizeVisual_DiscardChanges":"PersonalizeVisual_DiscardChanges_Disabled")},a.prototype.discardChanges=function(){var i=this.personalizeVisualData.visual;i.config=_.cloneDeep(this.originalVisualConfig),this.eventBridge.publishToChannel(Ee.jCS,{affectContainer:function(r){return r.name===i.name}}),this.telemetryService.logChildEvent(this.rootTelemetryEvent,m,{})},a.prototype.updateOverlayPosition=function(){this.changeDetectorRef.detectChanges(),this.overlayRef.overlayRef.updatePosition()},a.prototype.logVisualTypeChange=function(i,n){this.telemetryService.logChildEvent(this.rootTelemetryEvent,W,{oldVisualType:i,newVisualType:n})},a.prototype.getVisualDisplayName=function(i){var n=this.visualPluginService.getPlugin(i),r=this.trustedVisualService.isTrustedVisual(i),l=r&&this.trustedVisualService.getVisualTypeOptions(i);return n.custom?n.displayName:r?l&&l.titleKey?this.localizationService.get(l.titleKey):n.displayName||n.name:(0,ct.Gf)(n.titleKey,this.localizationService)},a.prototype.checkDirtyState=function(){var i=this.originalVisualConfig.singleVisual,n=this.personalizeVisualData.visual.config.singleVisual;this.isSessionDirty=i.visualType!==n.visualType||!_.isEqual(i.query,n.query),(this.isSessionDirty||i.presentationChangesApplied)&&this.visualAuthoringService.setPresentationChangesApplied(!0)},a.\u0275fac=function(n){return new(n||a)(e.\u0275\u0275directiveInject(j.M),e.\u0275\u0275directiveInject(ht.J),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(_e.E),e.\u0275\u0275directiveInject(ne.o),e.\u0275\u0275directiveInject(e.NgZone),e.\u0275\u0275directiveInject(le._),e.\u0275\u0275directiveInject(vt),e.\u0275\u0275directiveInject(Ve.F0),e.\u0275\u0275directiveInject(M.y0),e.\u0275\u0275directiveInject(gt.t),e.\u0275\u0275directiveInject(e.Injector),e.\u0275\u0275directiveInject(ft.D),e.\u0275\u0275directiveInject(yt.yU),e.\u0275\u0275directiveInject(j.w),e.\u0275\u0275directiveInject(be.$8))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["personalize-visual"]],decls:16,vars:9,consts:[[1,"pbi-depth-2"],[1,"personalize-visual-container"],["localize","PersonalizeVisual_MainMenuLabel",1,"fluentTheme-vlg-semibold"],[1,"header-actions"],["pbiTooltipCaretSize","small",1,"glyphicon","glyph-small","pbi-glyph-eraser","pbi-focus-outline",3,"disabled","pbiTooltip","click"],["pbiTooltipCaretSize","small",1,"glyphicon","glyph-small","pbi-glyph-close","pbi-focus-outline",3,"pbiTooltip","click"],[1,"scrollable-content"],[1,"visual-types-picker"],["id","inline-explore-visual-type-picker-label","localize","PersonalizeVisual_VisualType",1,"fluentTheme-md-reg"],["id","inline-explore-visual-type-picker","aria-haspopup","listbox","aria-labelledby","inline-explore-visual-type-picker-label inline-explore-visual-type-picker",1,"fluentTheme-md-reg","pbi-focus-outline",3,"click"],["visualTypeOrigin",""],[3,"rootTelemetryEvent","onLoad"]],template:function(n,r){if(1&n){var l=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"section",0)(1,"div",1)(2,"header"),e.\u0275\u0275element(3,"div",2),e.\u0275\u0275elementStart(4,"span",3)(5,"button",4),e.\u0275\u0275listener("click",function(){return r.discardChanges()}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"button",5),e.\u0275\u0275listener("click",function(){return r.overlayRef.close()}),e.\u0275\u0275pipe(7,"localize"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(8,"div",6)(9,"div",7),e.\u0275\u0275element(10,"label",8),e.\u0275\u0275elementStart(11,"button",9,10),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(l);var p=e.\u0275\u0275reference(12);return e.\u0275\u0275resetView(r.onClickVisualTypes(p))}),e.\u0275\u0275text(13),e.\u0275\u0275pipe(14,"async"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(15,"personalize-visual-visual-data-role-list",11),e.\u0275\u0275listener("onLoad",function(){return r.updateOverlayPosition()}),e.\u0275\u0275elementEnd()()()()}2&n&&(e.\u0275\u0275advance(5),e.\u0275\u0275property("disabled",!r.isSessionDirty)("pbiTooltip",r.getDiscardChangesTooltipText()),e.\u0275\u0275advance(1),e.\u0275\u0275property("pbiTooltip",e.\u0275\u0275pipeBind1(7,5,"PBI_Button_Label_Close")),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(14,7,r.visualDisplayName$)," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("rootTelemetryEvent",r.rootTelemetryEvent))},styles:['personalize-visual{height:100%;max-height:100vh;display:block}personalize-visual section{width:240px;height:100%;max-height:100vh;background:var(--fluent-theme-neutral-lighter-color, #F3F2F1);border-radius:2px;box-sizing:border-box;display:flex;flex-direction:column}personalize-visual section .personalize-visual-container{margin:12px 24px 0;height:100%;max-height:100vh;display:flex;flex-direction:column}personalize-visual section .personalize-visual-container .scrollable-content{height:calc(100% - 40px);overflow:auto;padding:0 1px}personalize-visual section .personalize-visual-container .scrollable-content personalize-visual-visual-data-role-list{display:block;margin-bottom:24px}personalize-visual header{display:flex;justify-content:space-between;color:var(--fluent-theme-neutral-dark-alt-color, #333333);height:24px;margin-bottom:16px}personalize-visual header .header-actions{display:flex}personalize-visual header .header-actions button{padding:0;border:0;background:transparent;margin-left:12px;color:var(--gray-190, #201F1E)}personalize-visual header .header-actions button.pbi-glyph-close{font-size:14px}personalize-visual header .header-actions button[disabled]{opacity:.5}personalize-visual .visual-types-picker{margin-bottom:20px}personalize-visual .visual-types-picker label{color:var(--fluent-theme-neutral-primary-color, #323130)}personalize-visual .visual-types-picker button{background:var(--fluent-theme-white-color, #FFF);border:1px solid var(--gray-110, #8A8886);box-sizing:border-box;border-radius:2px;height:24px;padding:2px 18px 2px 6px;color:var(--fluent-theme-neutral-dark-color, #201F1E);line-height:var(--md-font-size, 14px);position:relative;width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;text-align:left;margin-top:4px}personalize-visual .visual-types-picker button:after{font-family:PowrMDL2;content:"\\e972";position:absolute;top:5px;right:5px;height:var(--sm-font-size, 12px);transform:rotate(-90deg);width:var(--sm-font-size, 12px);font-size:var(--sm-font-size, 12px)}html[dir=rtl] personalize-visual .visual-types-picker button{padding-left:18px;padding-right:6px;text-align:right}html[dir=rtl] personalize-visual .visual-types-picker button:after{transform:rotate(90deg);left:5px;right:initial}\n'],encapsulation:2,changeDetection:0}),a}(),xt=o(82156),_t=o(79061),bt=o(69310),Ct=o(63654),Pt=o(94841),Tt=o(66972),Vt=o(39433),Et=o(16095),St=o(35284),Lt=[{type:he,componentId:"PersonalizeVisualComponentId"}],It=function(){function a(){}return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=e.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=e.\u0275\u0275defineInjector({imports:[g.CommonModule,xt.N.withManifests(Lt),_t.v,Pt.b,Ct.X,Tt.N,Vt.t,Et.Z,St.J,bt.R,B.Q]}),a}();e.\u0275\u0275setComponentScope(he,[x.X,me.V,lt],[g.AsyncPipe,D.F])},48144:function(re,A,o){o.d(A,{R:function(){return W},y:function(){return I}});var B=o(42233),t=o(69843),k=o(94419),C=o(76001),y=o(80366);function W(d){switch(d){case 2:return 1;case 3:return 2;case 0:default:return 0;case 6:return 3}}function I(d,s){switch(d){case 1:return new z;case 2:return new G;case 3:return new w;default:return new U(s)}}var w=function(){function d(){}return d.prototype.fieldExpr=function(s){var m=(0,k.nw)(s.schema.name,s.contract.name);return(0,k.m_)(m,2)},d}(),U=function(){function d(s){this.groupingDesignStateService=s}return d.prototype.fieldExpr=function(s){if(void 0!==s.kind){if(0===s.kind){if((0,B.RV)(s.entity.name,s.contract,this.groupingDesignStateService)){var m=(0,k.nw)(s.entity.contractSchema.name,s.entity.name),E=(0,B.ZP)(s.contract.column.groupingMetadata,m);return(0,y.og)({groupingColumn:{schema:s.schema.name,entity:s.entity.name,name:s.name,groupedColumns:_.isEmpty(E)?void 0:_.map(E,function(K){return(0,C.Q)(K)})}})}return(0,y.og)({column:{schema:s.schema.name,entity:s.originalEntity?s.originalEntity.name:s.entity.name,name:s.name}})}if(1===s.kind)return(0,y.og)({measure:{schema:s.schema.name,entity:s.entity.name,name:s.name}})}},d}(),z=function(){function d(){}return d.prototype.fieldExpr=function(s){if(s.variation&&s.originalEntity){var m=s.parent;return(0,y.og)({columnHierarchyVariation:{source:{name:m.name,schema:m.entity.contractSchema.name,entity:m.entity.name},hierarchy:{schema:s.entity.contractSchema.name,entity:s.originalEntity.name,name:s.contract.name},variationName:s.variation}})}return(0,y.og)({hierarchy:{name:s.name,schema:s.entity.contractSchema.name,entity:s.originalEntity?s.originalEntity.name:s.entity.name}})},d}(),G=function(){function d(){}return d.prototype.fieldExpr=function(s){if(s.variation&&s.parent instanceof t.Jg){var m=s.parent,E=m.parent;return(0,y.og)({columnHierarchyLevelVariation:{source:{name:E.name,schema:E.entity.contractSchema.name,entity:E.entity.name},level:{schema:E.entity.contractSchema.name,entity:s.originalEntity.name,name:m.contract.name,level:s.name},variationName:s.variation}})}return(0,y.og)({hierarchyLevel:{schema:s.entity.contractSchema.name,entity:s.entity.name,name:s.parent.name,level:s.name}})},d}()},83839:function(re,A,o){o.d(A,{hF:function(){return y},iq:function(){return z}});var B=o(69843),t={type:1,sheet:"fieldListPaneIcons",symbolId:"fieldListCheckmark"},k="fieldListPaneIcons_paneColorRefresh",C="fieldListPaneIcons_paneColorRefresh";function y(d,s){return{nodes:d.schema.entities.filter(function(m){return(!m.hidden||m.showHidden||s&&s.fieldHiddenPredicate&&!s.fieldHiddenPredicate(m))&&m.userEntity}).map(function(m){return function(d,s){for(var m={type:1,sheet:k,symbolId:"".concat(d.iconClassName||"fieldListEntity","_paneColorRefresh")},E={data:d,displayName:d.displayName,icon:m,tooltip:s&&s.showTooltips,ariaLabel:d.displayName},K=E.children=[],R=0,L=d.properties;R<L.length;R++){var V=L[R],P=s&&s.fieldHiddenPredicate&&s.fieldHiddenPredicate(V);V.visible&&(!V.hidden||void 0!==P&&!P)&&K.push(I(E,V,s))}return E}(m,s)})}}function I(d,s,m){var E=(0,B.Wx)(s,!0,!0),K="none"!==E?{type:1,sheet:C,symbolId:E}:void 0,R=m&&m.fieldSelectionPredicate&&m.fieldSelectionPredicate(s),L=R,V=m&&m.fieldIdPredicate&&m.fieldIdPredicate(s),P=m&&m.fieldCheckablePredicate&&m.fieldCheckablePredicate(s),e=m&&m.fieldDraggablePredicate&&m.fieldDraggablePredicate(s),N=m&&m.fieldHasMenuPredicate&&m.fieldHasMenuPredicate(s),M={data:s,displayName:s.displayName,draggable:e,id:V,parent:d,checkable:P,checked:L,selected:R,icon:K,tooltip:m&&m.showTooltips,menu:N,ariaLabel:s.displayName};if(R&&w(M,m?.showAncestorsBadge),s.children)for(var j=M.children=[],Q=0,te=s.children;Q<te.length;Q++){var q=te[Q],J=m&&m.fieldHiddenPredicate&&m.fieldHiddenPredicate(q);(!q.hidden||void 0!==J&&!J)&&j.push(I(M,q,m))}return M}function w(d,s){d.expanded=!0,d.parent&&(s?(U(d),w(d.parent,!0)):w(d.parent))}function U(d){d.parent.badge=t,null==d.parent.badgedChildren&&(d.parent.badgedChildren=[]),_.find(d.parent.badgedChildren,d)||d.parent.badgedChildren.push(d)}function z(d){d.parent&&(d.checked||d.badge?U(d):(_.remove(d.parent.badgedChildren,function(s){return s.displayName===d.displayName}),d.parent.badge=_.isEmpty(d.parent.badgedChildren)?void 0:t),z(d.parent))}},65005:function(re,A,o){o.d(A,{l:function(){return ue}});var B=o(81337),t=o(50423),k=o(48787),C=o(30794),y=o(12179),W=[],I=o(77476),w=o(68070),U=o(89237);function z(v,T){1&v&&t.\u0275\u0275element(0,"div",7)}function G(v,T){1&v&&(t.\u0275\u0275elementStart(0,"div",8),t.\u0275\u0275element(1,"div",9)(2,"div",10),t.\u0275\u0275elementEnd())}function d(v,T){1&v&&(t.\u0275\u0275elementStart(0,"div",11),t.\u0275\u0275element(1,"div",12),t.\u0275\u0275elementStart(2,"div",13),t.\u0275\u0275element(3,"div",14)(4,"div",15),t.\u0275\u0275elementEnd()())}function s(v,T){if(1&v&&(t.\u0275\u0275elementContainerStart(0,3),t.\u0275\u0275template(1,z,1,0,"div",4),t.\u0275\u0275template(2,G,3,0,"div",5),t.\u0275\u0275template(3,d,5,0,"div",6),t.\u0275\u0275elementContainerEnd()),2&v){var g=T.$implicit,x=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("ngSwitch",g),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngSwitchCase",x.largeBarType),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngSwitchCase",x.multipleBarType),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngSwitchCase",x.multipleSmallLargeType)}}function m(v,T){if(1&v&&(t.\u0275\u0275elementStart(0,"div",1),t.\u0275\u0275template(1,s,4,4,"ng-container",2),t.\u0275\u0275elementEnd()),2&v){var g=t.\u0275\u0275nextContext();t.\u0275\u0275property("ngStyle",g.barsStyle),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",g.barsProperties.bars)}}var P=function(){function v(){this.largeBarType=0,this.multipleBarType=1,this.multipleSmallLargeType=2}return v.prototype.ngOnChanges=function(){this.barsProperties&&(this.barsStyle={height:"".concat((this.barsProperties.height+8)*this.barsProperties.bars.length,"px")})},v.\u0275fac=function(g){return new(g||v)},v.\u0275cmp=t.\u0275\u0275defineComponent({type:v,selectors:[["shimmering-bars"]],inputs:{barsProperties:"barsProperties"},features:[t.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[["class","bars",3,"ngStyle",4,"ngIf"],[1,"bars",3,"ngStyle"],[3,"ngSwitch",4,"ngFor","ngForOf"],[3,"ngSwitch"],["class","largerLoadingBar animate",4,"ngSwitchCase"],["class","multipleBars",4,"ngSwitchCase"],["class","multipleSmallLarge",4,"ngSwitchCase"],[1,"largerLoadingBar","animate"],[1,"multipleBars"],[1,"miniLoadingBar","animate"],[1,"smallerLoadingBar","animate"],[1,"multipleSmallLarge"],[1,"shimmerBox","animate"],[1,"smallLargeBarContainer"],[1,"upperLoadingBar","animate"],[1,"lowerLoadingBar","animate"]],template:function(g,x){1&g&&t.\u0275\u0275template(0,m,2,2,"div",0),2&g&&t.\u0275\u0275property("ngIf",x.barsProperties)},dependencies:[I.NgForOf,I.NgIf,I.NgStyle,I.NgSwitch,I.NgSwitchCase],styles:['[_nghost-%COMP%]{--shimmer-background-color: var(--gray-20);--shimmer-animate1: var(--gray-30);--shimmer-animate2: var(--gray-50)}[data-legacy-theming=false]   [_nghost-%COMP%]{--shimmer-background-color: var(--colorNeutralBackground3);--shimmer-animate1: var(--colorNeutralBackground3Hover);--shimmer-animate2: var(--colorNeutralBackground3Pressed)}.bars[_ngcontent-%COMP%]{display:flex;flex-direction:column}.largerLoadingBar[_ngcontent-%COMP%]{border-radius:2px;flex-grow:1;background:var(--shimmer-background-color)}html:not([dir="rtl"])[_nghost-%COMP%]   .largerLoadingBar[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .largerLoadingBar[_ngcontent-%COMP%]{margin:4px 8px}html[dir="rtl"][_nghost-%COMP%]   .largerLoadingBar[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .largerLoadingBar[_ngcontent-%COMP%]{margin:4px 8px}.multipleBars[_ngcontent-%COMP%]{display:flex;align-items:center;flex-grow:1}html:not([dir="rtl"])[_nghost-%COMP%]   .multipleBars[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .multipleBars[_ngcontent-%COMP%]{margin:4px 8px}html[dir="rtl"][_nghost-%COMP%]   .multipleBars[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .multipleBars[_ngcontent-%COMP%]{margin:4px 8px}.miniLoadingBar[_ngcontent-%COMP%]{border-radius:2px;height:60%;width:10%;background:var(--shimmer-background-color)}html:not([dir="rtl"])[_nghost-%COMP%]   .miniLoadingBar[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .miniLoadingBar[_ngcontent-%COMP%]{margin-right:4px}html[dir="rtl"][_nghost-%COMP%]   .miniLoadingBar[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .miniLoadingBar[_ngcontent-%COMP%]{margin-left:4px}.smallerLoadingBar[_ngcontent-%COMP%]{border-radius:2px;height:80%;width:100%;background:var(--shimmer-background-color)}html:not([dir="rtl"])[_nghost-%COMP%]   .smallerLoadingBar[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .smallerLoadingBar[_ngcontent-%COMP%]{margin-left:4px}html[dir="rtl"][_nghost-%COMP%]   .smallerLoadingBar[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .smallerLoadingBar[_ngcontent-%COMP%]{margin-right:4px}.multipleSmallLarge[_ngcontent-%COMP%]{display:flex;flex-grow:1;padding:10px 9px}html:not([dir="rtl"])[_nghost-%COMP%]   .multipleSmallLarge[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .multipleSmallLarge[_ngcontent-%COMP%]{margin:4px 8px}html[dir="rtl"][_nghost-%COMP%]   .multipleSmallLarge[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .multipleSmallLarge[_ngcontent-%COMP%]{margin:4px 8px}.upperLoadingBar[_ngcontent-%COMP%]{border-radius:2px;height:65%;width:49%;background:var(--shimmer-background-color)}html:not([dir="rtl"])[_nghost-%COMP%]   .upperLoadingBar[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .upperLoadingBar[_ngcontent-%COMP%]{margin:0 4px 11px 0}html[dir="rtl"][_nghost-%COMP%]   .upperLoadingBar[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .upperLoadingBar[_ngcontent-%COMP%]{margin:0 0 11px 4px}.lowerLoadingBar[_ngcontent-%COMP%]{border-radius:2px;height:65%;width:100%;background:var(--shimmer-background-color)}.shimmerBox[_ngcontent-%COMP%]{background:var(--shimmer-background-color);border-radius:2px;height:32px;width:32px}.smallLargeBarContainer[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;max-width:167px}html:not([dir="rtl"])[_nghost-%COMP%]   .smallLargeBarContainer[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .smallLargeBarContainer[_ngcontent-%COMP%]{margin:4px 0 2.42px 13px}html[dir="rtl"][_nghost-%COMP%]   .smallLargeBarContainer[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .smallLargeBarContainer[_ngcontent-%COMP%]{margin:4px 13px 2.42px 0}.animate[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_shimmer 5s infinite linear;background:linear-gradient(270deg,var(--shimmer-animate1) 0%,var(--shimmer-animate2) 50%,var(--shimmer-animate1) 100%);background-size:250% 100%}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:250% 0}to{background-position:-250% 0}}'],changeDetection:0}),v}(),e=o(85102),N=["pbiTree"];function M(v,T){if(1&v){var g=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"tri-search-box",5),t.\u0275\u0275listener("value",function(O){t.\u0275\u0275restoreView(g);var D=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(D.search$.next(O))}),t.\u0275\u0275pipe(1,"localize"),t.\u0275\u0275pipe(2,"localize"),t.\u0275\u0275elementEnd()}if(2&v){var x=t.\u0275\u0275nextContext();t.\u0275\u0275property("currentInputValue",x.searchText||"")("placeholderText",t.\u0275\u0275pipeBind1(2,8,"SearchBox_Text"))("fluentTheme",!0)("compact",!0)("fullWidth",!0),t.\u0275\u0275attribute("aria-label",t.\u0275\u0275pipeBind1(1,6,"SearchBox_Text"))}}function j(v,T){if(1&v){var g=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"pbi-search-box")(1,"input",6),t.\u0275\u0275listener("input",function(O){t.\u0275\u0275restoreView(g);var D=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(D.search$.next(O.target.value))}),t.\u0275\u0275pipe(2,"localize"),t.\u0275\u0275pipe(3,"localize"),t.\u0275\u0275elementEnd()()}if(2&v){var x=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("value",x.searchText||"")("placeholder",t.\u0275\u0275pipeBind1(3,5,"SearchBox_Text")),t.\u0275\u0275attribute("aria-label",t.\u0275\u0275pipeBind1(2,3,"SearchBox_Text"))}}function Q(v,T){if(1&v&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"shimmering-bars",7),t.\u0275\u0275elementContainerEnd()),2&v){var g=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("barsProperties",g.shimmeringBars)}}function te(v,T){if(1&v){var g=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"pbi-tree",12,13),t.\u0275\u0275listener("onNodeClick",function(O){t.\u0275\u0275restoreView(g);var D=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(D.onNodeClick.emit(O))})("onNodeCheck",function(O){t.\u0275\u0275restoreView(g);var D=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(D.onNodeCheck.emit(O))})("onNodeExpansionToggle",function(O){t.\u0275\u0275restoreView(g);var D=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(D.onNodeExpansionToggle.emit(O))})("onFirstRender",function(){t.\u0275\u0275restoreView(g);var O=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(O.onFirstRender())}),t.\u0275\u0275pipe(2,"async"),t.\u0275\u0275elementEnd()}if(2&v){var x=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("tree",x.fieldListTree)("search",t.\u0275\u0275pipeBind1(2,5,x.search$))("hasHighlights",x.hasHighlights)("checkMode",x.checkMode)("options",x._options)}}function q(v,T){1&v&&t.\u0275\u0275projection(0,2)}function J(v,T){if(1&v&&(t.\u0275\u0275elementStart(0,"div",8),t.\u0275\u0275element(1,"div",9),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(2,te,3,7,"pbi-tree",10),t.\u0275\u0275template(3,q,1,0,"ng-template",null,11,t.\u0275\u0275templateRefExtractor)),2&v){var g=t.\u0275\u0275reference(4),x=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",x.fieldListTree)("ngIfElse",g)}}var ce=[[["",8,"pbi-field-list-perspective-header"]],[["",8,"pbi-field-list-header"]],[["",8,"pbi-field-list-watermark"]]],pe=[".pbi-field-list-perspective-header",".pbi-field-list-header",".pbi-field-list-watermark"],oe={height:24,bars:[0,1,1,0,0]},ue=function(){function v(){this.hasHighlights=!1,this.loading=!1,this.shimmeringBars=oe,this.defaultOptions={},this._options=this.defaultOptions,this.onNodeExpansionToggle=new t.EventEmitter,this.onNodeClick=new t.EventEmitter,this.onNodeCheck=new t.EventEmitter,this.onFirstRenderComplete=new t.EventEmitter,this.handleFieldListTreeHeightDiff=new t.EventEmitter,this.search$=new C.xQ}return Object.defineProperty(v.prototype,"options",{set:function(g){this._options=(0,B.pi)((0,B.pi)({},this.defaultOptions),g)},enumerable:!1,configurable:!0}),v.prototype.ngOnInit=function(){var T=this;this.focusSearchBoxOnFirstRenderComplete&&this.onFirstRenderComplete.pipe((0,k.q)(1)).subscribe(function(){return T.focusSearchBox()})},v.prototype.onFirstRender=function(){var T=this.getFieldListTreeHeightDiff();this.handleFieldListTreeHeightDiff.emit(T),this.scrollSelectedItemIntoViewOnInit&&this.pbiTree.scrollToFirstSelectedNode(),this.onFirstRenderComplete.emit()},v.prototype.focusSearchBox=function(){$(".field-list-search-container input").trigger("focus")},v.prototype.getFieldListTreeHeightDiff=function(){return this.pbiTree.getTreeHeight()+2-this.pbiTreeElementRef.nativeElement.getBoundingClientRect().height},v.\u0275fac=function(g){return new(g||v)},v.\u0275cmp=t.\u0275\u0275defineComponent({type:v,selectors:[["pbi-field-list"]],viewQuery:function(g,x){if(1&g&&(t.\u0275\u0275viewQuery(y.u,5),t.\u0275\u0275viewQuery(N,5,t.ElementRef)),2&g){var F=void 0;t.\u0275\u0275queryRefresh(F=t.\u0275\u0275loadQuery())&&(x.pbiTree=F.first),t.\u0275\u0275queryRefresh(F=t.\u0275\u0275loadQuery())&&(x.pbiTreeElementRef=F.first)}},inputs:{fieldListTree:"fieldListTree",scrollSelectedItemIntoViewOnInit:"scrollSelectedItemIntoViewOnInit",checkMode:"checkMode",hasHighlights:"hasHighlights",loading:"loading",searchText:"searchText",focusSearchBoxOnFirstRenderComplete:"focusSearchBoxOnFirstRenderComplete",fluent:"fluent",options:"options"},outputs:{onNodeExpansionToggle:"onNodeExpansionToggle",onNodeClick:"onNodeClick",onNodeCheck:"onNodeCheck",onFirstRenderComplete:"onFirstRenderComplete",handleFieldListTreeHeightDiff:"handleFieldListTreeHeightDiff"},features:[t.\u0275\u0275ProvidersFeature(W)],ngContentSelectors:pe,decls:8,vars:4,consts:[["data-tutorial-target","search-box",1,"field-list-search-container"],["data-testid","search-bar-input",3,"currentInputValue","placeholderText","fluentTheme","compact","fullWidth","value",4,"ngIf"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["loaded",""],["data-testid","search-bar-input",3,"currentInputValue","placeholderText","fluentTheme","compact","fullWidth","value"],["pbiSearchInput","","data-testid","search-bar-input",1,"pbi-focus-outline",3,"value","placeholder","input"],[3,"barsProperties"],[1,"tutorial-target-container"],["data-tutorial-target","data-tree"],["data-testid","data-tree",3,"tree","search","hasHighlights","checkMode","options","onNodeClick","onNodeCheck","onNodeExpansionToggle","onFirstRender",4,"ngIf","ngIfElse"],["watermark",""],["data-testid","data-tree",3,"tree","search","hasHighlights","checkMode","options","onNodeClick","onNodeCheck","onNodeExpansionToggle","onFirstRender"],["pbiTree",""]],template:function(g,x){if(1&g&&(t.\u0275\u0275projectionDef(ce),t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275template(1,M,3,10,"tri-search-box",1),t.\u0275\u0275template(2,j,4,7,"pbi-search-box",2),t.\u0275\u0275elementEnd(),t.\u0275\u0275projection(3),t.\u0275\u0275projection(4,1),t.\u0275\u0275template(5,Q,2,1,"ng-container",3),t.\u0275\u0275template(6,J,5,2,"ng-template",null,4,t.\u0275\u0275templateRefExtractor)),2&g){var F=t.\u0275\u0275reference(7);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",x.fluent),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!x.fluent),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",x.loading)("ngIfElse",F)}},dependencies:[I.NgIf,w.a,w.p,U.U,y.u,P,I.AsyncPipe,e.F],styles:["[_nghost-%COMP%]{height:100%;display:flex;flex-direction:column}pbi-tree[_ngcontent-%COMP%]{margin-top:9px;height:100%;display:block;overflow:hidden}.tutorial-target-container[_ngcontent-%COMP%]{position:relative;visibility:hidden;height:0;width:0}.tutorial-target-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;top:20px;visibility:hidden;height:0;width:0}"],changeDetection:0}),v}()},96883:function(re,A,o){o.d(A,{m:function(){return t}});var B=o(64560);function t(k){return{items:k.items.map(function(y){return{type:y.children?B.iB.SubMenu:Number(y.type),text:y.text,tooltip:y.tooltip,checkable:void 0!==y.checked||void 0,checked:y.checked,disabled:y.disabled,icon:y.icon?{type:0,glyph:y.icon}:void 0,menu:y.children?t({items:y.children}):void 0,data:y.key}})}}},68070:function(re,A,o){o.d(A,{a:function(){return R},p:function(){return K}});var B=o(81337),t=o(50423),k=o(73221),C=o(35510),y=o(59017),W=o(63057),I=o(59787),w=o(58315),U=o(14172),z=o(77526),G=o(77476),d=function(){return{tooltipLocalizeTitle:"Clear",tooltipShowOnFocus:!0}};function s(L,V){if(1&L){var P=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",2),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(P);var N=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(N.onCancelButtonClick())}),t.\u0275\u0275elementEnd()}2&L&&t.\u0275\u0275property("pbi-tooltip",t.\u0275\u0275pureFunction0(1,d))}var m=[[["input"]]],E=["input"],K=function(){function L(){}return L.\u0275fac=function(P){return new(P||L)},L.\u0275dir=t.\u0275\u0275defineDirective({type:L,selectors:[["","pbiSearchInput",""]]}),L}(),R=function(L){function V(P){var e=L.call(this)||this;return e.changeDetectorRef=P,e.searchCleared=new t.EventEmitter,e.onSearchTextChanged=new t.EventEmitter,e.emptyValue$=new C.X(void 0),e.hasInput=!1,e}return(0,B.ZT)(V,L),V.prototype.onCancelButtonClick=function(){this.clearSearchText(),this.input.nativeElement.focus()},V.prototype.clearSearchText=function(){this.input.nativeElement.value="",this.hasInput=!1,this.changeDetectorRef.markForCheck(),this.emptyValue$.next(),this.searchCleared.emit()},V.prototype.ngAfterViewInit=function(){var P=this;this.lifecycleSubscriptions.add((0,y.aj)([(0,W.T)((0,I.R)(this.input.nativeElement,"keyup"),(0,I.R)(this.input.nativeElement,"keydown")).pipe((0,w.b)(250)),this.emptyValue$]).pipe((0,U.U)(function(){return P.input.nativeElement.value}),(0,z.x)()).subscribe(function(e){return P.onSearchTextChanged.emit(e)})),setTimeout(function(){return P.onInputChanged(P.input.nativeElement.value)},0)},V.prototype.onInputChanged=function(P){this.hasInput!==!!P&&(this.hasInput=!!P,this.changeDetectorRef.markForCheck())},V.\u0275fac=function(e){return new(e||V)(t.\u0275\u0275directiveInject(t.ChangeDetectorRef))},V.\u0275cmp=t.\u0275\u0275defineComponent({type:V,selectors:[["pbi-search-box"]],contentQueries:function(e,N,M){var j;(1&e&&t.\u0275\u0275contentQuery(M,K,5,t.ElementRef),2&e)&&(t.\u0275\u0275queryRefresh(j=t.\u0275\u0275loadQuery())&&(N.input=j.first))},outputs:{searchCleared:"searchCleared",onSearchTextChanged:"onSearchTextChanged"},features:[t.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:E,decls:3,vars:1,consts:[[1,"pbi-search-box",3,"input"],["class","clearIcon pbi-borderless-button glyphicon pbi-glyph-clear glyph-mini searchbox-clear-icon",3,"pbi-tooltip","click",4,"ngIf"],[1,"clearIcon","pbi-borderless-button","glyphicon","pbi-glyph-clear","glyph-mini","searchbox-clear-icon",3,"pbi-tooltip","click"]],template:function(e,N){1&e&&(t.\u0275\u0275projectionDef(m),t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275listener("input",function(j){return N.onInputChanged(j.target.value)}),t.\u0275\u0275projection(1),t.\u0275\u0275template(2,s,1,2,"button",1),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",N.hasInput))},dependencies:[G.NgIf],styles:['.pbi-search-box{--searchBox-colorEditLabelBorder: var(--gray-120);--searchBox-colorEditLabelBorderHover: var(--gray-160);--searchBox-colorEditLabelForeground: var(--gray-130);--searchBox-colorEditLabelPlaceholderForeground: var(--gray-140);--searchBox-colorEditLabelBackground: auto;--searchBox-colorEditLabelSelectedForeground: var(--text-primary-content-color);--searchBox-colorEditLabelSelectedBackground: var(--fluent-theme-primary-color)}[data-legacy-theming=false] .pbi-search-box{--searchBox-colorEditLabelBorder: var(--colorNeutralStroke1);--searchBox-colorEditLabelBorderHover: var(--colorNeutralStroke1);--searchBox-colorEditLabelForeground: var(--colorNeutralForeground1);--searchBox-colorEditLabelPlaceholderForeground: auto;--searchBox-colorEditLabelBackground: var(--colorNeutralBackground1);--searchBox-colorEditLabelSelectedForeground: var(--colorNeutralForegroundOnBrand);--searchBox-colorEditLabelSelectedBackground: var(--colorBrandBackground)}.pbi-search-box{display:block;width:100%;position:relative}.pbi-search-box:before{content:"\\e721"}.pbi-search-box:before{color:var(--searchBox-colorEditLabelForeground);display:inline-block;font-family:PowrMDL2;font-size:14px;position:absolute;top:6px;left:8px}.pbi-search-box input{padding:3px 28px;border-radius:2px;border:1px solid var(--searchBox-colorEditLabelBorder);color:var(--searchBox-colorEditLabelForeground);background-color:var(--searchBox-colorEditLabelBackground);outline:none;box-sizing:border-box;font-size:14px;width:100%}.pbi-search-box input:hover,.pbi-search-box input:focus{border-color:var(--searchBox-colorEditLabelBorderHover)}.pbi-search-box input::placeholder{color:var(--searchBox-colorEditLabelPlaceholderForeground)}.pbi-search-box input::selection{background:var(--searchBox-colorEditLabelSelectedBackground);color:var(--searchBox-colorEditLabelSelectedForeground)}.pbi-search-box .pbi-glyph-clear{background-color:transparent}.pbi-search-box .searchbox-clear-icon{color:var(--searchBox-colorEditLabelForeground);position:absolute;right:8px;top:7px;border:0px;padding:0}\n'],encapsulation:2,changeDetection:0}),V}(k.w)}}]);