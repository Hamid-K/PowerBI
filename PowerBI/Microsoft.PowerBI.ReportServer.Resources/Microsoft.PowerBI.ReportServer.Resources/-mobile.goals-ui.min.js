(self.webpackChunkmobile=self.webpackChunkmobile||[]).push([["goals-ui"],{77489:function(lt){lt.exports=function(t,r){(null==r||r>t.length)&&(r=t.length);for(var o=0,P=new Array(r);o<r;o++)P[o]=t[o];return P},lt.exports.default=lt.exports,lt.exports.__esModule=!0},32878:function(lt){function Ge(r,o){for(var P=0;P<o.length;P++){var a=o[P];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(r,a.key,a)}}lt.exports=function(r,o,P){return o&&Ge(r.prototype,o),P&&Ge(r,P),r},lt.exports.default=lt.exports,lt.exports.__esModule=!0},34850:function(lt,Ge,t){var r=t(91052);lt.exports=function(P,a){var d=typeof Symbol<"u"&&P[Symbol.iterator]||P["@@iterator"];if(d)return(d=d.call(P)).next.bind(d);if(Array.isArray(P)||(d=r(P))||a&&P&&"number"==typeof P.length){d&&(P=d);var p=0;return function(){return p>=P.length?{done:!0}:{done:!1,value:P[p++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},lt.exports.default=lt.exports,lt.exports.__esModule=!0},12864:function(lt,Ge,t){var r=t(74);lt.exports=function(P,a){P.prototype=Object.create(a.prototype),P.prototype.constructor=P,r(P,a)},lt.exports.default=lt.exports,lt.exports.__esModule=!0},74:function(lt){function Ge(t,r){return lt.exports=Ge=Object.setPrototypeOf||function(P,a){return P.__proto__=a,P},lt.exports.default=lt.exports,lt.exports.__esModule=!0,Ge(t,r)}lt.exports=Ge,lt.exports.default=lt.exports,lt.exports.__esModule=!0},91052:function(lt,Ge,t){var r=t(77489);lt.exports=function(P,a){if(P){if("string"==typeof P)return r(P,a);var d=Object.prototype.toString.call(P).slice(8,-1);if("Object"===d&&P.constructor&&(d=P.constructor.name),"Map"===d||"Set"===d)return Array.from(P);if("Arguments"===d||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return r(P,a)}},lt.exports.default=lt.exports,lt.exports.__esModule=!0},36444:function(lt,Ge,t){var r=t(32878).default,o=t(12864).default,P=t(34850).default;function a(){"use strict";a=function(){return p};var d,p={},l=Object.prototype,c=l.hasOwnProperty,y=Object.defineProperty||function(Oe,be,Fe){Oe[be]=Fe.value},i="function"==typeof Symbol?Symbol:{},C=i.iterator||"@@iterator",v=i.asyncIterator||"@@asyncIterator",k=i.toStringTag||"@@toStringTag";function E(Oe,be,Fe){return Object.defineProperty(Oe,be,{value:Fe,enumerable:!0,configurable:!0,writable:!0}),Oe[be]}try{E({},"")}catch{E=function(Fe,ze,Ke){return Fe[ze]=Ke}}function s(Oe,be,Fe,ze){var je=Object.create((be&&be.prototype instanceof H?be:H).prototype),He=new De(ze||[]);return y(je,"_invoke",{value:pe(Oe,Fe,He)}),je}function ne(Oe,be,Fe){try{return{type:"normal",arg:Oe.call(be,Fe)}}catch(ze){return{type:"throw",arg:ze}}}p.wrap=s;var te="suspendedStart",X="suspendedYield",m="executing",O="completed",I={};function H(){}function G(){}function Z(){}var ie={};E(ie,C,function(){return this});var ye=Object.getPrototypeOf,ae=ye&&ye(ye(fe([])));ae&&ae!==l&&c.call(ae,C)&&(ie=ae);var J=Z.prototype=H.prototype=Object.create(ie);function N(Oe){["next","throw","return"].forEach(function(be){E(Oe,be,function(Fe){return this._invoke(be,Fe)})})}function he(Oe,be){function Fe(Ke,je,He,Je){var j=ne(Oe[Ke],Oe,je);if("throw"!==j.type){var nt=j.arg,Ue=nt.value;return Ue&&"object"==typeof Ue&&c.call(Ue,"__await")?be.resolve(Ue.__await).then(function(oe){Fe("next",oe,He,Je)},function(oe){Fe("throw",oe,He,Je)}):be.resolve(Ue).then(function(oe){nt.value=oe,He(nt)},function(oe){return Fe("throw",oe,He,Je)})}Je(j.arg)}var ze;y(this,"_invoke",{value:function(je,He){function Je(){return new be(function(j,nt){Fe(je,He,j,nt)})}return ze=ze?ze.then(Je,Je):Je()}})}function pe(Oe,be,Fe){var ze=te;return function(Ke,je){if(ze===m)throw new Error("Generator is already running");if(ze===O){if("throw"===Ke)throw je;return{value:d,done:!0}}for(Fe.method=Ke,Fe.arg=je;;){var He=Fe.delegate;if(He){var Je=ce(He,Fe);if(Je){if(Je===I)continue;return Je}}if("next"===Fe.method)Fe.sent=Fe._sent=Fe.arg;else if("throw"===Fe.method){if(ze===te)throw ze=O,Fe.arg;Fe.dispatchException(Fe.arg)}else"return"===Fe.method&&Fe.abrupt("return",Fe.arg);ze=m;var j=ne(Oe,be,Fe);if("normal"===j.type){if(ze=Fe.done?O:X,j.arg===I)continue;return{value:j.arg,done:Fe.done}}"throw"===j.type&&(ze=O,Fe.method="throw",Fe.arg=j.arg)}}}function ce(Oe,be){var Fe=be.method,ze=Oe.iterator[Fe];if(ze===d)return be.delegate=null,"throw"===Fe&&Oe.iterator.return&&(be.method="return",be.arg=d,ce(Oe,be),"throw"===be.method)||"return"!==Fe&&(be.method="throw",be.arg=new TypeError("The iterator does not provide a '"+Fe+"' method")),I;var Ke=ne(ze,Oe.iterator,be.arg);if("throw"===Ke.type)return be.method="throw",be.arg=Ke.arg,be.delegate=null,I;var je=Ke.arg;return je?je.done?(be[Oe.resultName]=je.value,be.next=Oe.nextLoc,"return"!==be.method&&(be.method="next",be.arg=d),be.delegate=null,I):je:(be.method="throw",be.arg=new TypeError("iterator result is not an object"),be.delegate=null,I)}function ge(Oe){var be={tryLoc:Oe[0]};1 in Oe&&(be.catchLoc=Oe[1]),2 in Oe&&(be.finallyLoc=Oe[2],be.afterLoc=Oe[3]),this.tryEntries.push(be)}function se(Oe){var be=Oe.completion||{};be.type="normal",delete be.arg,Oe.completion=be}function De(Oe){this.tryEntries=[{tryLoc:"root"}],Oe.forEach(ge,this),this.reset(!0)}function fe(Oe){if(Oe||""===Oe){var be=Oe[C];if(be)return be.call(Oe);if("function"==typeof Oe.next)return Oe;if(!isNaN(Oe.length)){var Fe=-1,ze=function Ke(){for(;++Fe<Oe.length;)if(c.call(Oe,Fe))return Ke.value=Oe[Fe],Ke.done=!1,Ke;return Ke.value=d,Ke.done=!0,Ke};return ze.next=ze}}throw new TypeError(typeof Oe+" is not iterable")}return G.prototype=Z,y(J,"constructor",{value:Z,configurable:!0}),y(Z,"constructor",{value:G,configurable:!0}),G.displayName=E(Z,k,"GeneratorFunction"),p.isGeneratorFunction=function(Oe){var be="function"==typeof Oe&&Oe.constructor;return!!be&&(be===G||"GeneratorFunction"===(be.displayName||be.name))},p.mark=function(Oe){return Object.setPrototypeOf?Object.setPrototypeOf(Oe,Z):(Oe.__proto__=Z,E(Oe,k,"GeneratorFunction")),Oe.prototype=Object.create(J),Oe},p.awrap=function(Oe){return{__await:Oe}},N(he.prototype),E(he.prototype,v,function(){return this}),p.AsyncIterator=he,p.async=function(Oe,be,Fe,ze,Ke){void 0===Ke&&(Ke=Promise);var je=new he(s(Oe,be,Fe,ze),Ke);return p.isGeneratorFunction(be)?je:je.next().then(function(He){return He.done?He.value:je.next()})},N(J),E(J,k,"Generator"),E(J,C,function(){return this}),E(J,"toString",function(){return"[object Generator]"}),p.keys=function(Oe){var be=Object(Oe),Fe=[];for(var ze in be)Fe.push(ze);return Fe.reverse(),function Ke(){for(;Fe.length;){var je=Fe.pop();if(je in be)return Ke.value=je,Ke.done=!1,Ke}return Ke.done=!0,Ke}},p.values=fe,De.prototype={constructor:De,reset:function(be){if(this.prev=0,this.next=0,this.sent=this._sent=d,this.done=!1,this.delegate=null,this.method="next",this.arg=d,this.tryEntries.forEach(se),!be)for(var Fe in this)"t"===Fe.charAt(0)&&c.call(this,Fe)&&!isNaN(+Fe.slice(1))&&(this[Fe]=d)},stop:function(){this.done=!0;var be=this.tryEntries[0].completion;if("throw"===be.type)throw be.arg;return this.rval},dispatchException:function(be){if(this.done)throw be;var Fe=this;function ze(nt,Ue){return He.type="throw",He.arg=be,Fe.next=nt,Ue&&(Fe.method="next",Fe.arg=d),!!Ue}for(var Ke=this.tryEntries.length-1;Ke>=0;--Ke){var je=this.tryEntries[Ke],He=je.completion;if("root"===je.tryLoc)return ze("end");if(je.tryLoc<=this.prev){var Je=c.call(je,"catchLoc"),j=c.call(je,"finallyLoc");if(Je&&j){if(this.prev<je.catchLoc)return ze(je.catchLoc,!0);if(this.prev<je.finallyLoc)return ze(je.finallyLoc)}else if(Je){if(this.prev<je.catchLoc)return ze(je.catchLoc,!0)}else{if(!j)throw new Error("try statement without catch or finally");if(this.prev<je.finallyLoc)return ze(je.finallyLoc)}}}},abrupt:function(be,Fe){for(var ze=this.tryEntries.length-1;ze>=0;--ze){var Ke=this.tryEntries[ze];if(Ke.tryLoc<=this.prev&&c.call(Ke,"finallyLoc")&&this.prev<Ke.finallyLoc){var je=Ke;break}}je&&("break"===be||"continue"===be)&&je.tryLoc<=Fe&&Fe<=je.finallyLoc&&(je=null);var He=je?je.completion:{};return He.type=be,He.arg=Fe,je?(this.method="next",this.next=je.finallyLoc,I):this.complete(He)},complete:function(be,Fe){if("throw"===be.type)throw be.arg;return"break"===be.type||"continue"===be.type?this.next=be.arg:"return"===be.type?(this.rval=this.arg=be.arg,this.method="return",this.next="end"):"normal"===be.type&&Fe&&(this.next=Fe),I},finish:function(be){for(var Fe=this.tryEntries.length-1;Fe>=0;--Fe){var ze=this.tryEntries[Fe];if(ze.finallyLoc===be)return this.complete(ze.completion,ze.afterLoc),se(ze),I}},catch:function(be){for(var Fe=this.tryEntries.length-1;Fe>=0;--Fe){var ze=this.tryEntries[Fe];if(ze.tryLoc===be){var Ke=ze.completion;if("throw"===Ke.type){var je=Ke.arg;se(ze)}return je}}throw new Error("illegal catch attempt")},delegateYield:function(be,Fe,ze){return this.delegate={iterator:fe(be),resultName:Fe,nextLoc:ze},"next"===this.method&&(this.arg=d),I}},p}typeof self<"u"&&self,lt.exports=function(){var y,i,d={302:function(i,C,v){var E;C.formatArgs=function(E){if(E[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+E[0]+(this.useColors?"%c ":" ")+"+"+i.exports.humanize(this.diff),this.useColors){var s="color: "+this.color;E.splice(1,0,s,"color: inherit");var ne=0,te=0;E[0].replace(/%[a-zA-Z%]/g,function(X){"%%"!==X&&(ne++,"%c"===X&&(te=ne))}),E.splice(te,0,s)}},C.save=function(E){try{E?C.storage.setItem("debug",E):C.storage.removeItem("debug")}catch{}},C.load=function(){var E;try{E=C.storage.getItem("debug")}catch{}return!E&&typeof process<"u"&&"env"in process&&(E=process.env.DEBUG),E},C.useColors=function(){return!(!(typeof window<"u"&&window.process)||"renderer"!==window.process.type&&!window.process.__nwjs)||!(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},C.storage=function(){try{return localStorage}catch{}}(),C.destroy=(E=!1,function(){E||(E=!0)}),C.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],C.log=console.debug||console.log||function(){},i.exports=v(65)(C),i.exports.formatters.j=function(E){try{return JSON.stringify(E)}catch(s){return"[UnexpectedJSONParseError]: "+s.message}}},65:function(i,C,v){i.exports=function(k){function E(te){var X,m,O,I=null;function H(){for(var G=arguments.length,Z=new Array(G),ie=0;ie<G;ie++)Z[ie]=arguments[ie];if(H.enabled){var ye=H,ae=Number(new Date);ye.diff=ae-(X||ae),ye.prev=X,ye.curr=ae,X=ae,Z[0]=E.coerce(Z[0]),"string"!=typeof Z[0]&&Z.unshift("%O");var N=0;Z[0]=Z[0].replace(/%([a-zA-Z%])/g,function(he,pe){if("%%"===he)return"%";N++;var ce=E.formatters[pe];return"function"==typeof ce&&(he=ce.call(ye,Z[N]),Z.splice(N,1),N--),he}),E.formatArgs.call(ye,Z),(ye.log||E.log).apply(ye,Z)}}return H.namespace=te,H.useColors=E.useColors(),H.color=E.selectColor(te),H.extend=s,H.destroy=E.destroy,Object.defineProperty(H,"enabled",{enumerable:!0,configurable:!1,get:function(){return null!==I?I:(m!==E.namespaces&&(m=E.namespaces,O=E.enabled(te)),O)},set:function(Z){I=Z}}),"function"==typeof E.init&&E.init(H),H}function s(te,X){var m=E(this.namespace+(void 0===X?":":X)+te);return m.log=this.log,m}function ne(te){return te.toString().substring(2,te.toString().length-2).replace(/\.\*\?$/,"*")}return E.debug=E,E.default=E,E.coerce=function(te){return te instanceof Error?te.stack||te.message:te},E.disable=function(){var te=[].concat(E.names.map(ne),E.skips.map(ne).map(function(X){return"-"+X})).join(",");return E.enable(""),te},E.enable=function(te){var X;E.save(te),E.namespaces=te,E.names=[],E.skips=[];var m=("string"==typeof te?te:"").split(/[\s,]+/),O=m.length;for(X=0;X<O;X++)m[X]&&("-"===(te=m[X].replace(/\*/g,".*?"))[0]?E.skips.push(new RegExp("^"+te.slice(1)+"$")):E.names.push(new RegExp("^"+te+"$")))},E.enabled=function(te){if("*"===te[te.length-1])return!0;var X,m;for(X=0,m=E.skips.length;X<m;X++)if(E.skips[X].test(te))return!1;for(X=0,m=E.names.length;X<m;X++)if(E.names[X].test(te))return!0;return!1},E.humanize=v(247),E.destroy=function(){},Object.keys(k).forEach(function(te){E[te]=k[te]}),E.names=[],E.skips=[],E.formatters={},E.selectColor=function(te){for(var X=0,m=0;m<te.length;m++)X=(X<<5)-X+te.charCodeAt(m),X|=0;return E.colors[Math.abs(X)%E.colors.length]},E.enable(E.load()),E}},247:function(i){var C=1e3,v=60*C,k=60*v,E=24*k;function X(m,O,I,H){var G=O>=1.5*I;return Math.round(m/I)+" "+H+(G?"s":"")}i.exports=function(m,O){O=O||{};var I=typeof m;if("string"===I&&m.length>0)return function(m){if(!((m=String(m)).length>100)){var O=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(m);if(O){var I=parseFloat(O[1]);switch((O[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*I;case"weeks":case"week":case"w":return 6048e5*I;case"days":case"day":case"d":return I*E;case"hours":case"hour":case"hrs":case"hr":case"h":return I*k;case"minutes":case"minute":case"mins":case"min":case"m":return I*v;case"seconds":case"second":case"secs":case"sec":case"s":return I*C;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return I;default:return}}}}(m);if("number"===I&&isFinite(m))return O.long?function(m){var O=Math.abs(m);return O>=E?X(m,O,E,"day"):O>=k?X(m,O,k,"hour"):O>=v?X(m,O,v,"minute"):O>=C?X(m,O,C,"second"):m+" ms"}(m):function(m){var O=Math.abs(m);return O>=E?Math.round(m/E)+"d":O>=k?Math.round(m/k)+"h":O>=v?Math.round(m/v)+"m":O>=C?Math.round(m/C)+"s":m+"ms"}(m);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(m))}}},p={};function l(y){var i=p[y];if(void 0!==i)return i.exports;var C=p[y]={exports:{}};return d[y](C,C.exports,l),C.exports}i=Object.getPrototypeOf?function(C){return Object.getPrototypeOf(C)}:function(C){return C.__proto__},l.t=function(C,v){if(1&v&&(C=this(C)),8&v||"object"==typeof C&&C&&(4&v&&C.__esModule||16&v&&"function"==typeof C.then))return C;var k=Object.create(null);l.r(k);var E={};y=y||[null,i({}),i([]),i(i)];for(var s=2&v&&C;"object"==typeof s&&!~y.indexOf(s);s=i(s))Object.getOwnPropertyNames(s).forEach(function(ne){return E[ne]=function(){return C[ne]}});return E.default=function(){return C},l.d(k,E),k},l.d=function(y,i){for(var C in i)l.o(i,C)&&!l.o(y,C)&&Object.defineProperty(y,C,{enumerable:!0,get:i[C]})},l.o=function(y,i){return Object.prototype.hasOwnProperty.call(y,i)},l.r=function(y){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(y,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(y,"__esModule",{value:!0})};var c={};return function(){"use strict";l.r(c),l.d(c,{ActionObjectType:function(){return be},ChannelType:function(){return h},ChildAppWindow:function(){return ua},DialogDimension:function(){return oe},ErrorCode:function(){return ze},FileOpenPreference:function(){return Oe},FrameContexts:function(){return j},HostClientType:function(){return He},HostName:function(){return Je},LiveShareHost:function(){return Wr},NotificationTypes:function(){return ln},ParentAppWindow:function(){return Ja},SecondaryM365ContentIdName:function(){return Fe},TaskModuleDimension:function(){return g},TeamType:function(){return nt},UserSettingTypes:function(){return pn},UserTeamRole:function(){return Ue},ViewerActionTypes:function(){return Jn},app:function(){return Te},appEntity:function(){return Di},appInitialization:function(){return Po},appInstallDialog:function(){return rr},authentication:function(){return po},barCode:function(){return Ui},calendar:function(){return hr},call:function(){return $i},chat:function(){return sr},clipboard:function(){return Ni},conversations:function(){return Ao},dialog:function(){return Vn},enablePrintCapability:function(){return Ca},executeDeepLink:function(){return Vr},externalAppAuthentication:function(){return Mi},externalAppCardActions:function(){return wi},files:function(){return Pi},geoLocation:function(){return cr},getAdaptiveCardSchemaVersion:function(){return Qa},getContext:function(){return ya},getMruTabInstances:function(){return Lr},getTabInstances:function(){return Ar},initialize:function(){return _a},initializeWithFrameContext:function(){return kr},liveShare:function(){return Zo},location:function(){return fi},logs:function(){return dn},mail:function(){return fr},marketplace:function(){return ti},media:function(){return bo},meeting:function(){return dr},meetingRoom:function(){return Si},menus:function(){return go},monetization:function(){return mi},navigateBack:function(){return zr},navigateCrossDomain:function(){return Nr},navigateToTab:function(){return Ur},notifications:function(){return Ei},openFilePreview:function(){return ra},pages:function(){return $t},people:function(){return mr},print:function(){return Er},profile:function(){return vr},registerAppButtonClickHandler:function(){return ba},registerAppButtonHoverEnterHandler:function(){return Or},registerAppButtonHoverLeaveHandler:function(){return Ji},registerBackButtonHandler:function(){return Dr},registerBeforeUnloadHandler:function(){return xr},registerChangeSettingsHandler:function(){return Rr},registerCustomHandler:function(){return ia},registerFocusEnterHandler:function(){return Ir},registerFullScreenHandler:function(){return vi},registerOnLoadHandler:function(){return Tr},registerOnThemeChangeHandler:function(){return lo},registerUserSettingsChangeHandler:function(){return Fa},remoteCamera:function(){return Oi},returnFocus:function(){return Br},search:function(){return Cr},secondaryBrowser:function(){return ur},sendCustomEvent:function(){return La},sendCustomMessage:function(){return Aa},setFrameContext:function(){return Gr},settings:function(){return _i},shareDeepLink:function(){return Fr},sharing:function(){return yr},stageView:function(){return Xo},tasks:function(){return yi},teams:function(){return Ti},teamsCore:function(){return Lo},thirdPartyCloudStorage:function(){return Qi},uploadCustomApp:function(){return Ra},version:function(){return co},videoEffects:function(){return wo},videoEffectsEx:function(){return xi},visualMedia:function(){return ji},webStorage:function(){return Ki}});var k,E,n,y=(0,l(302).debug)("teamsJs");function i(n){return y.extend(n)}function C(n,b){return n+"_"+b}function v(n){return/^v\d+_[\w.]+$/.test(n)}(n=k||(k={})).V_0="v0",n.V_1="v1",n.V_2="v2",n.V_3="v3",function(n){n.App_GetContext="app.getContext",n.App_Initialize="app.initialize",n.App_NotifyAppLoaded="app.notifyAppLoaded",n.App_NotifyExpectedFailure="app.notifyExpectedFailure",n.App_NotifyFailure="app.notifyFailure",n.App_NotifySuccess="app.notifySuccess",n.App_OpenLink="app.openLink",n.App_RegisterOnThemeChangeHandler="app.registerOnThemeChangeHandler",n.AppEntity_SelectAppEntity="appEntity.selectAppEntity",n.BarCode_HasPermission="barCode.hasPermission",n.BarCode_RequestPermission="barCode.requestPermission",n.BarCode_ScanBarCode="barCode.scanBarCode",n.Calendar_ComposeMeeting="calendar.composeMeeting",n.Calendar_OpenCalendarItem="calendar.openCalendarItem",n.Call_StartCall="call.startCall",n.Clipboard_Read="clipboard.read",n.Clipboard_Write="clipboard.write",n.Dialog_AdaptiveCard_Bot_Open="dialog.adaptiveCard.bot.open",n.Dialog_AdaptiveCard_Open="dialog.adaptiveCard.open",n.Dialog_Update_Resize="dialog.update.resize",n.Dialog_Url_Bot_Open="dialog.url.bot.open",n.Dialog_Url_Open="dialog.url.open",n.Dialog_Url_Submit="dialog.url.submit",n.Dialog_Url_SendMessageToParentFromDialog="dialog.url.sendMessageToParentFromDialog",n.Dialog_Url_SendMessageToDialog="dialog.url.sendMessageToDialog",n.GeoLocation_GetCurrentLocation="geoLocation.getCurrentLocation",n.GeoLocation_HasPermission="geoLocation.hasPermission",n.GeoLocation_Map_ChooseLocation="geoLocation.map.chooseLocation",n.GeoLocation_RequestPermission="geoLocation.hasPermission",n.GeoLocation_ShowLocation="geoLocation.showLocation",n.Location_GetLocation="location.getLocation",n.Location_ShowLocation="location.showLocation",n.Mail_ComposeMail="mail.composeMail",n.Mail_OpenMailItem="mail.openMailItem",n.Marketplace_AddOrUpdateCartItems="marketplace.addOrUpdateCartItems",n.Marketplace_GetCart="marketplace.getCart",n.Marketplace_RemoveCardItems="marketplace.removeCartItems",n.Marketplace_UpdateCartStatus="marketplace.updateCartStatus",n.Media_CaptureImage="media.captureImage",n.Media_Controller="media.controller",n.Media_GetMedia="media.getMedia",n.Media_HasPermission="media.hasPermission",n.Media_RequestPermission="media.requestPermission",n.Media_ScanBarCode="media.scanBarCode",n.Media_SelectMedia="media.selectMedia",n.Media_ViewImages="media.viewImages",n.Navigation_NavigateBack="navigation.navigateBack",n.Navigation_NavigateCrossDomain="navigation.navigateCrossDomain",n.Navigation_NavigateToTab="navigation.navigateToTab",n.Navigation_ReturnFocus="navigation.returnFocus",n.Pages_AppButton_OnClick="pages.appButton.onClick",n.Pages_AppButton_OnHoverEnter="pages.appButton.onHoverEnter",n.Pages_AppButton_OnHoverLeave="pages.appButton.onHoverLeave",n.Pages_BackStack_NavigateBack="pages.backStack.navigateBack",n.Pages_BackStack_RegisterBackButtonHandler="pages.backStack.registerBackButtonHandler",n.Pages_Config_RegisterChangeConfigHandler="pages.config.registerChangeConfigHandler",n.Pages_Config_RegisterOnRemoveHandlerHelper="pages.config.registerOnRemoveHandlerHelper",n.Pages_Config_RegisterOnSaveHandlerHelper="pages.config.registerOnSaveHandlerHelper",n.Pages_Config_SetConfig="pages.config.setConfig",n.Pages_Config_SetValidityState="pages.config.setValidityState",n.Pages_CurrentApp_NavigateTo="pages.currentApp.navigateTo",n.Pages_CurrentApp_NavigateToDefaultPage="pages.currentApp.navigateToDefaultPage",n.Pages_FullTrust_EnterFullscreen="pages.fullTrust.enterFullscreen",n.Pages_FullTrust_ExitFullscreen="pages.fullTrust.exitFullscreen",n.Pages_GetConfig="pages.getConfig.",n.Pages_NavigateCrossDomain="pages.navigateCrossDomain",n.Pages_NavigateToApp="pages.navigateToApp",n.Pages_RegisterFocusEnterHandler="pages.registerFocusEnterHandler",n.Pages_RegisterFullScreenHandler="pages.registerFullScreenHandler",n.Pages_ReturnFocus="pages.returnFocus",n.Pages_SetCurrentFrame="pages.setCurrentFrame",n.Pages_ShareDeepLink="pages.shareDeepLink",n.Pages_Tabs_GetMruTabInstances="pages.tabs.getMruTabInstances",n.Pages_Tabs_GetTabInstances="pages.tabs.getTabInstances",n.Pages_Tabs_NavigateToTab="pages.tabs.navigateToTab",n.PublicAPIs_ExecuteDeepLink="executeDeepLink",n.PublicAPIs_GetContext="getContext",n.PublicAPIs_GetMruTabInstances="getMruTabInstances",n.PublicAPIs_GetTabInstances="getTabInstances",n.PublicAPIs_Initialize="initialize",n.PublicAPIs_RegisterAppButtonClickHandler="registerAppButtonClickHandler",n.PublicAPIs_RegisterAppButtonHoverEnterHandler="registerAppButtonHoverEnterHandler",n.PublicAPIs_RegisterAppButtonHoverLeaveHandler="registerAppButtonHoverLeaveHandler",n.PublicAPIs_RegisterBackButtonHandler="registerBackButtonHandler",n.PublicAPIs_RegisterChangeSettingsHandler="registerChangeSettingsHandler",n.PublicAPIs_RegisterFocusEnterHandler="registerFocusEnterHandler",n.PublicAPIs_RegisterFullScreenHandler="registerFullScreenHandler",n.PublicAPIs_RegisterOnLoadHandler="registerOnLoadHandler",n.PublicAPIs_RegisterOnThemeChangeHandlerHelper="registerOnThemeChangeHandlerHelper",n.PublicAPIs_SetFrameContext="setFrameContext",n.PublicAPIs_ShareDeepLink="shareDeepLink",n.RegisterHandler="registerHandler",n.RegisterOnThemeChangeHandler="registerOnThemeChangeHandler",n.Settings_Remove_Failure="settings.remove.failure",n.Settings_Remove_Success="settings.remove.success",n.Settings_Save_Failure="settings.save.failure",n.Settings_Save_Success="settings.save.success",n.Tasks_StartTask="tasks.startTask",n.Tasks_SubmitTask="tasks.submitTask",n.Tasks_UpdateTask="tasks.updateTask"}(E||(E={}));var s=JSON.parse('{"validOrigins":["teams.microsoft.com","teams.microsoft.us","gov.teams.microsoft.us","dod.teams.microsoft.us","int.teams.microsoft.com","teams.live.com","devspaces.skype.com","ssauth.skype.com","local.teams.live.com","local.teams.live.com:8080","local.teams.office.com","local.teams.office.com:8080","outlook.office.com","outlook-sdf.office.com","outlook.office365.com","outlook-sdf.office365.com","outlook.live.com","outlook-sdf.live.com","*.teams.microsoft.com","*.www.office.com","www.office.com","word.office.com","excel.office.com","powerpoint.office.com","www.officeppe.com","*.www.microsoft365.com","www.microsoft365.com","bing.com","edgeservices.bing.com","www.bing.com","www.staging-bing-int.com","teams.cloud.microsoft","outlook.cloud.microsoft","m365.cloud.microsoft","copilot.microsoft.com"]}'),ne="2.0.1",X="1.9.0",m="1.8.0",O=l.t(s,2).validOrigins,I=new URL("https://res.cdn.office.net/teams-js/validDomains/json/validDomains.json"),H=/^https:\/\//,G="https",Z="teams.microsoft.com",ie="The library has not yet been initialized",ye="The runtime has not yet been initialized",ae="The runtime version is not supported",J=function(){};J.initializeCalled=!1,J.initializeCompleted=!1,J.additionalValidOrigins=[],J.initializePromise=void 0,J.isFramelessWindow=!1,J.frameContext=void 0,J.hostClientType=void 0,J.printCapabilityEnabled=!1;var he,N={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},pe=new Uint8Array(16);function ce(){if(!he&&!(he=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return he(pe)}for(var ge=[],se=0;se<256;++se)ge.push((se+256).toString(16).slice(1));var Oe,be,Fe,ze,Ke,je,He,Je,j,nt,Ue,oe,fe=function(b,R,A){if(N.randomUUID&&!R&&!b)return N.randomUUID();var T=(b=b||{}).random||(b.rng||ce)();if(T[6]=15&T[6]|64,T[8]=63&T[8]|128,R){A=A||0;for(var z=0;z<16;++z)R[A+z]=T[z];return R}return function(n,b){return void 0===b&&(b=0),(ge[n[b+0]]+ge[n[b+1]]+ge[n[b+2]]+ge[n[b+3]]+"-"+ge[n[b+4]]+ge[n[b+5]]+"-"+ge[n[b+6]]+ge[n[b+7]]+"-"+ge[n[b+8]]+ge[n[b+9]]+"-"+ge[n[b+10]]+ge[n[b+11]]+ge[n[b+12]]+ge[n[b+13]]+ge[n[b+14]]+ge[n[b+15]]).toLowerCase()}(T)};(function(n){n.Inline="inline",n.Desktop="desktop",n.Web="web"})(Oe||(Oe={})),function(n){n.M365Content="m365content"}(be||(be={})),function(n){n.DriveId="driveId",n.GroupId="groupId",n.SiteId="siteId",n.UserId="userId"}(Fe||(Fe={})),function(n){n[n.NOT_SUPPORTED_ON_PLATFORM=100]="NOT_SUPPORTED_ON_PLATFORM",n[n.INTERNAL_ERROR=500]="INTERNAL_ERROR",n[n.NOT_SUPPORTED_IN_CURRENT_CONTEXT=501]="NOT_SUPPORTED_IN_CURRENT_CONTEXT",n[n.PERMISSION_DENIED=1e3]="PERMISSION_DENIED",n[n.NETWORK_ERROR=2e3]="NETWORK_ERROR",n[n.NO_HW_SUPPORT=3e3]="NO_HW_SUPPORT",n[n.INVALID_ARGUMENTS=4e3]="INVALID_ARGUMENTS",n[n.UNAUTHORIZED_USER_OPERATION=5e3]="UNAUTHORIZED_USER_OPERATION",n[n.INSUFFICIENT_RESOURCES=6e3]="INSUFFICIENT_RESOURCES",n[n.THROTTLE=7e3]="THROTTLE",n[n.USER_ABORT=8e3]="USER_ABORT",n[n.OPERATION_TIMED_OUT=8001]="OPERATION_TIMED_OUT",n[n.OLD_PLATFORM=9e3]="OLD_PLATFORM",n[n.FILE_NOT_FOUND=404]="FILE_NOT_FOUND",n[n.SIZE_EXCEEDED=1e4]="SIZE_EXCEEDED"}(ze||(ze={})),function(n){n.GeoLocation="geolocation",n.Media="media"}(Ke||(Ke={})),function(n){n.TextPlain="text/plain",n.TextHtml="text/html",n.ImagePNG="image/png",n.ImageJPEG="image/jpeg"}(je||(je={})),function(n){n.desktop="desktop",n.web="web",n.android="android",n.ios="ios",n.ipados="ipados",n.macos="macos",n.rigel="rigel",n.surfaceHub="surfaceHub",n.teamsRoomsWindows="teamsRoomsWindows",n.teamsRoomsAndroid="teamsRoomsAndroid",n.teamsPhones="teamsPhones",n.teamsDisplays="teamsDisplays"}(He||(He={})),function(n){n.office="Office",n.outlook="Outlook",n.outlookWin32="OutlookWin32",n.orange="Orange",n.places="Places",n.teams="Teams",n.teamsModern="TeamsModern"}(Je||(Je={})),function(n){n.settings="settings",n.content="content",n.authentication="authentication",n.remove="remove",n.task="task",n.sidePanel="sidePanel",n.stage="stage",n.meetingStage="meetingStage"}(j||(j={})),function(n){n[n.Standard=0]="Standard",n[n.Edu=1]="Edu",n[n.Class=2]="Class",n[n.Plc=3]="Plc",n[n.Staff=4]="Staff"}(nt||(nt={})),function(n){n[n.Admin=0]="Admin",n[n.User=1]="User",n[n.Guest=2]="Guest"}(Ue||(Ue={})),function(n){n.Large="large",n.Medium="medium",n.Small="small"}(oe||(oe={}));var h,g=oe;!function(n){n.Regular="Regular",n.Private="Private",n.Shared="Shared"}(h||(h={}));var u={errorCode:ze.NOT_SUPPORTED_ON_PLATFORM},ee={adaptiveCardSchemaVersion:{majorVersion:1,minorVersion:5}},U=new Error("Invalid input count: Must supply a valid image count (limit of 10)."),Q=new Error("Invalid response: Received more images than the specified max limit in the response.");function B(n){return function(b,R){if(!b)throw new Error(n||R)}}function w(n,b){if("string"!=typeof n||"string"!=typeof b)return NaN;var R=n.split("."),A=b.split(".");function T(_e){return/^\d+$/.test(_e)}if(!R.every(T)||!A.every(T))return NaN;for(;R.length<A.length;)R.push("0");for(;A.length<R.length;)A.push("0");for(var z=0;z<R.length;++z)if(Number(R[z])!=Number(A[z]))return Number(R[z])>Number(A[z])?1:-1;return 0}function q(){return fe()}function le(n){return Object.keys(n).forEach(function(b){"object"==typeof n[b]&&le(n[b])}),Object.freeze(n)}function V(n,b){for(var R=arguments.length,A=new Array(R>2?R-2:0),T=2;T<R;T++)A[T-2]=arguments[T];var z=n.apply(void 0,A);return z.then(function(){b&&b(null)}).catch(function(_e){b&&b(_e)}),z}function Y(n){return!(w(n.majorVersion+"."+n.minorVersion,"1.5")>=0)}function ue(n){return"https:"===n.protocol}function Ne(n,b){return new Promise(function(R,A){n||A("MimeType cannot be null or empty."),b||A("Base64 string cannot be null or empty.");var T=atob(b);if(n.startsWith("image/")){for(var z=new Uint8Array(T.length),_e=0;_e<T.length;_e++)z[_e]=T.charCodeAt(_e);R(new Blob([z],{type:n}))}R(new Blob([T],{type:n}))})}function $e(n){return new Promise(function(b,R){0===n.size&&R(new Error("Blob cannot be empty."));var A=new FileReader;A.onloadend=function(){A.result?b(A.result.toString().split(",")[1]):R(new Error("Failed to read the blob"))},A.onerror=function(){R(A.error)},A.readAsDataURL(n)})}function Xe(){if(it())throw new Error("window object undefined at SSR check");return window}function it(){return typeof window>"u"}var st=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function ot(n){if(!st.test(n))throw new Error("App ID is not valid. Must be GUID format. App ID: "+n)}var qe=i("runtime"),ct=3;function yt(n){return n.apiVersion===ct}var K={apiVersion:-1,supports:{}},mn={apiVersion:3,hostVersionsInfo:ee,isLegacyTeams:!0,supports:{appInstallDialog:{},appEntity:{},call:{},chat:{},conversations:{},dialog:{card:{bot:{}},url:{bot:{}},update:{}},interactive:{},logs:{},meetingRoom:{},menus:{},monetization:{},notifications:{},pages:{config:{},backStack:{},fullTrust:{}},remoteCamera:{},teams:{fullTrust:{}},teamsCore:{},video:{sharedFrame:{}}}},qt=[He.desktop,He.web,He.rigel,He.surfaceHub,He.teamsRoomsWindows,He.teamsRoomsAndroid,He.teamsPhones,He.teamsDisplays],mo=[].concat(qt,[He.android,He.ios,He.ipados]);var ni=[{versionToUpgradeFrom:1,upgradeToNextVersion:function(b){var R;return{apiVersion:2,hostVersionsInfo:void 0,isLegacyTeams:b.isLegacyTeams,supports:Object.assign(Object.assign({},b.supports),{dialog:b.supports.dialog?{card:void 0,url:b.supports.dialog,update:null===(R=b.supports.dialog)||void 0===R?void 0:R.update}:void 0})}}},{versionToUpgradeFrom:2,upgradeToNextVersion:function(b){var T=function(b,R){var A={};for(var T in b)Object.prototype.hasOwnProperty.call(b,T)&&R.indexOf(T)<0&&(A[T]=b[T]);if(null!=b&&"function"==typeof Object.getOwnPropertySymbols){var z=0;for(T=Object.getOwnPropertySymbols(b);z<T.length;z++)R.indexOf(T[z])<0&&Object.prototype.propertyIsEnumerable.call(b,T[z])&&(A[T[z]]=b[T[z]])}return A}(b.supports,["appNotification"]);return Object.assign(Object.assign({},b),{apiVersion:3,supports:T})}}],so={"1.0.0":[{capability:{pages:{appButton:{},tabs:{}},stageView:{}},hostClientTypes:qt}],"1.9.0":[{capability:{location:{}},hostClientTypes:mo}],"2.0.0":[{capability:{people:{}},hostClientTypes:mo},{capability:{sharing:{}},hostClientTypes:[He.desktop,He.web]}],"2.0.1":[{capability:{teams:{fullTrust:{joinedTeams:{}}}},hostClientTypes:[He.android,He.desktop,He.ios,He.teamsRoomsAndroid,He.teamsPhones,He.teamsDisplays,He.web]},{capability:{webStorage:{}},hostClientTypes:[He.desktop]}],"2.0.5":[{capability:{webStorage:{}},hostClientTypes:[He.android,He.ios]}],"2.0.8":[{capability:{sharing:{}},hostClientTypes:[He.android,He.ios]}]},no=qe.extend("generateBackCompatRuntimeConfig");function Oo(n,b){var R=Object.assign({},n);for(var A in b)Object.prototype.hasOwnProperty.call(b,A)&&("object"!=typeof b[A]||Array.isArray(b[A])?A in n||(R[A]=b[A]):R[A]=Oo(n[A]||{},b[A]));return R}function oo(n,b,R){no("generating back compat runtime config for %s",n);var A=Object.assign({},b.supports);no("Supported capabilities in config before updating based on highestSupportedVersion: %o",A),Object.keys(R).forEach(function(z){w(n,z)>=0&&R[z].forEach(function(_e){void 0!==J.hostClientType&&_e.hostClientTypes.includes(J.hostClientType)&&(A=Oo(A,_e.capability))})});var T={apiVersion:ct,hostVersionsInfo:ee,isLegacyTeams:!0,supports:A};return no("Runtime config after updating based on highestSupportedVersion: %o",T),T}var _o=qe.extend("applyRuntimeConfig");function Dn(n){"string"==typeof n.apiVersion&&(_o("Trying to apply runtime with string apiVersion, processing as v1: %o",n),n=Object.assign(Object.assign({},n),{apiVersion:1})),_o("Fast-forwarding runtime %o",n);var b=function(n){var b=n;if(b.apiVersion<ct&&ni.forEach(function(R){b.apiVersion===R.versionToUpgradeFrom&&(b=R.upgradeToNextVersion(b))}),yt(b))return b;throw new Error("Received a runtime that could not be upgraded to the latest version")}(n);_o("Applying runtime %o",b),K=le(b)}var co="2.19.0",Vo=i("internal"),Do=Vo.extend("ensureInitializeCalled"),oi=Vo.extend("ensureInitialized");function Hn(){if(!J.initializeCalled)throw Do(ie),new Error(ie)}function Pe(n){if(!J.initializeCompleted)throw oi("%s. initializeCalled: %s",ie,J.initializeCalled.toString()),new Error(ie);for(var b=arguments.length,R=new Array(b>1?b-1:0),A=1;A<b;A++)R[A-1]=arguments[A];if(R&&R.length>0){for(var T=!1,z=0;z<R.length;z++)if(R[z]===J.frameContext){T=!0;break}if(!T)throw new Error("This call is only allowed in following contexts: "+JSON.stringify(R)+'. Current context: "'+J.frameContext+'".')}return function(n){if(yt(n))return!0;throw-1===n.apiVersion?new Error(ye):new Error(ae)}(n)}function xn(n){void 0===n&&(n=ne);var b=w(J.clientSupportedSDKVersion,n);return!isNaN(b)&&b>=0}function Go(){return J.hostClientType==He.android||J.hostClientType==He.ios||J.hostClientType==He.ipados}function uo(n){if(void 0===n&&(n=ne),!Go())throw{errorCode:ze.NOT_SUPPORTED_ON_PLATFORM};if(!xn(n))throw{errorCode:ze.OLD_PLATFORM}}function Qt(n){return null==n}var po,ko=function(b,R,A,T){return new(A||(A=Promise))(function(_e,Me){function we(ke){try{ve(T.next(ke))}catch(We){Me(We)}}function Ce(ke){try{ve(T.throw(ke))}catch(We){Me(We)}}function ve(ke){ke.done?_e(ke.value):function(_e){return _e instanceof A?_e:new A(function(Me){Me(_e)})}(ke.value).then(we,Ce)}ve((T=T.apply(b,R||[])).next())})},Xn=[],io=i("validateOrigin");function Bo(){return ko(this,void 0,void 0,a().mark(function n(){return a().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.abrupt("return",0!==Xn.length?Xn:it()?(Xn=O,O):fetch(I).then(function(A){if(!A.ok)throw new Error("Invalid Response from Fetch Call");return A.json().then(function(T){if(li(JSON.stringify(T)))return Xn=T.validOrigins;throw new Error("Valid Origins List Is Invalid")})}).catch(function(A){return io("validOrigins fetch call to CDN failed with error: %s. Defaulting to fallback list",A),Xn=O}));case 1:case"end":return R.stop()}},n)}))}function li(n){var b=JSON.parse(n);try{b=JSON.parse(n)}catch{return!1}if(!b.validOrigins)return!1;for(var A,R=P(b.validOrigins);!(A=R()).done;){var T=A.value;try{new URL("https://"+T)}catch{return io("isValidOriginsFromCDN call failed to validate origin: %s",T),!1}}return!0}function Wn(n,b){if("*."===n.substring(0,2)){var R=n.substring(1);if(b.length>R.length&&b.split(".").length===R.split(".").length&&b.substring(b.length-R.length)===R)return!0}else if(n===b)return!0;return!1}function si(n){return Bo().then(function(b){if(!ue(n))return io("Origin %s is invalid because it is not using https protocol. Protocol being used: %s",n,n.protocol),!1;var R=n.host;if(b.some(function(_e){return Wn(_e,R)}))return!0;for(var T,A=P(J.additionalValidOrigins);!(T=A()).done;){var z=T.value;if(Wn("https://"===z.substring(0,8)?z.substring(8):z,R))return!0}return io("Origin %s is invalid because it is not an origin approved by this library or included in the call to app.initialize.\nOrigins approved by this library: %o\nOrigins included in app.initialize: %o",n,b,J.additionalValidOrigins),!1})}!function(n){var b,R,A,Qe;function z(Qe){return new Promise(function(Ct,Et){if(J.hostClientType===He.desktop||J.hostClientType===He.android||J.hostClientType===He.ios||J.hostClientType===He.ipados||J.hostClientType===He.macos||J.hostClientType===He.rigel||J.hostClientType===He.teamsRoomsWindows||J.hostClientType===He.teamsRoomsAndroid||J.hostClientType===He.teamsPhones||J.hostClientType===He.teamsDisplays||J.hostClientType===He.surfaceHub){var ft=document.createElement("a");ft.href=Qe.url,Ct(Kn("authentication.authenticate",[ft.href,Qe.width,Qe.height,Qe.isExternal]).then(function(kt){var Tn=kt[1];if(kt[0])return Tn;throw new Error(Tn)}))}else b={success:Ct,fail:Et},function(Qe){we();var Ct=Qe.width||600,Et=Qe.height||400;Ct=Math.min(Ct,gt.currentWindow.outerWidth-400),Et=Math.min(Et,gt.currentWindow.outerHeight-200);var ft=document.createElement("a");ft.href=Qe.url.replace("{oauthRedirectMethod}","web");var kt=void 0!==gt.currentWindow.screenLeft?gt.currentWindow.screenLeft:gt.currentWindow.screenX,Kt=void 0!==gt.currentWindow.screenTop?gt.currentWindow.screenTop:gt.currentWindow.screenY;gt.childWindow=gt.currentWindow.open(ft.href,"_blank","toolbar=no, location=yes, status=no, menubar=no, scrollbars=yes, top="+(Kt+=gt.currentWindow.outerHeight/2-Et/2)+", left="+(kt+=gt.currentWindow.outerWidth/2-Ct/2)+", width="+Ct+", height="+Et),gt.childWindow?(ve(),R=gt.currentWindow.setInterval(function(){if(!gt.childWindow||gt.childWindow.closed)mt("CancelledByUser");else{var Qe=gt.childOrigin;try{gt.childOrigin="*",xe("ping")}finally{gt.childOrigin=Qe}}},100),xt("initialize",function(){return[j.authentication,J.hostClientType]}),xt("navigateCrossDomain",function(){return!1})):mt("FailedToOpenWindow")}(Qe)})}function we(){ve();try{gt.childWindow&&gt.childWindow.close()}finally{gt.childWindow=null,gt.childOrigin=null}}function ve(){R&&(clearInterval(R),R=0),en("initialize"),en("navigateCrossDomain")}function We(Qe){try{b&&b.success(Qe)}finally{b=void 0,we()}}function mt(Qe){try{b&&b.fail(new Error(Qe))}finally{b=void 0,we()}}function Ft(Qe,Ct,Et){if(Qe){var ft=document.createElement("a");ft.href=decodeURIComponent(Qe),ft.host&&ft.host!==Xe().location.host&&"outlook.office.com"===ft.host&&ft.search.indexOf("client_type=Win32_Outlook")>-1&&(Ct&&"result"===Ct&&(Et&&(ft.href=_t(ft.href,"result",Et)),gt.currentWindow.location.assign(_t(ft.href,"authSuccess",""))),Ct&&"reason"===Ct&&(Et&&(ft.href=_t(ft.href,"reason",Et)),gt.currentWindow.location.assign(_t(ft.href,"authFailure",""))))}}function _t(Qe,Ct,Et){var ft=Qe.indexOf("#"),kt=-1===ft?"#":Qe.substr(ft);return kt=kt+"&"+Ct+(""!==Et?"="+Et:""),(Qe=-1===ft?Qe:Qe.substr(0,ft))+kt}n.initialize=function(){xt("authentication.authenticate.success",We,!1),xt("authentication.authenticate.failure",mt,!1)},n.registerAuthenticationHandlers=function(Qe){A=Qe},n.authenticate=function(Qe){var Ct=void 0!==Qe,Et=Ct?Qe:A;if(!Et)throw new Error("No parameters are provided for authentication");return Pe(K,j.content,j.sidePanel,j.settings,j.remove,j.task,j.stage,j.meetingStage),z(Et).then(function(ft){try{return Et&&Et.successCallback?(Et.successCallback(ft),""):ft}finally{Ct||(A=void 0)}}).catch(function(ft){try{if(Et&&Et.failureCallback)return Et.failureCallback(ft.message),"";throw ft}finally{Ct||(A=void 0)}})},n.getAuthToken=function(Qe){return Hn(),function(Qe){return new Promise(function(Ct){Ct(Kn("authentication.getAuthToken",[Qe?.resources,Qe?.claims,Qe?.silent]))}).then(function(Ct){var ft=Ct[1];if(Ct[0])return ft;throw new Error(ft)})}(Qe).then(function(Ct){return Qe&&Qe.successCallback?(Qe.successCallback(Ct),""):Ct}).catch(function(Ct){if(Qe&&Qe.failureCallback)return Qe.failureCallback(Ct.message),"";throw Ct})},n.getUser=function(Qe){return Hn(),new Promise(function(Qe){Qe(Kn("authentication.getUser"))}).then(function(Qe){var Et=Qe[1];if(Qe[0])return Et;throw new Error(Et)}).then(function(Ct){return Qe&&Qe.successCallback?(Qe.successCallback(Ct),null):Ct}).catch(function(Ct){if(Qe&&Qe.failureCallback)return Qe.failureCallback(Ct.message),null;throw Ct})},n.notifySuccess=function(Qe,Ct){Ft(Ct,"result",Qe),Pe(K,j.authentication),bt("authentication.authenticate.success",[Qe]),Ie(gt.parentWindow,function(){return setTimeout(function(){return gt.currentWindow.close()},200)})},n.notifyFailure=function(Qe,Ct){Ft(Ct,"reason",Qe),Pe(K,j.authentication),bt("authentication.authenticate.failure",[Qe]),Ie(gt.parentWindow,function(){return setTimeout(function(){return gt.currentWindow.close()},200)})},(Qe=n.DataResidency||(n.DataResidency={})).Public="public",Qe.EUDB="eudb",Qe.Other="other"}(po||(po={}));var Vn,go,$n=k.V_2;function Uo(n,b){if(Pe(K,j.content,j.sidePanel,j.task,j.meetingStage),!Vn.update.isSupported())throw u;Bt(n,"tasks.updateTask",[b])}function Co(n,b,R,A){if(Pe(K,j.content,j.sidePanel,j.meetingStage),!Vn.url.isSupported())throw u;A&&xt("messageForParent",A),Bt(n,"tasks.startTask",[Vn.url.getDialogInfoFromUrlDialogInfo(b)],function(T,z){R?.({err:T,result:z}),en("messageForParent")})}function No(n,b,R,A){if(Pe(K,j.content,j.sidePanel,j.meetingStage),!Vn.url.bot.isSupported())throw u;A&&xt("messageForParent",A),Bt(n,"tasks.startTask",[Vn.url.getDialogInfoFromBotUrlDialogInfo(b)],function(T,z){R?.({err:T,result:z}),en("messageForParent")})}function zo(n,b,R){if(Pe(K,j.content,j.task),!Vn.url.isSupported())throw u;Bt(n,"tasks.completeTask",[b,R?Array.isArray(R)?R:[R]:[]])}(function(n){var _e,b=[];function R(_e){J.frameContext&&(J.frameContext===j.task?b.push(_e):en("messageForChild"))}n.initialize=function(){xt("messageForChild",R,!1)},function(_e){function Me(){return Pe(K)&&void 0!==(K.supports.dialog&&K.supports.dialog.url)}var ve;function Ce(ve){return{url:ve.url,height:ve.size?ve.size.height:oe.Small,width:ve.size?ve.size.width:oe.Small,title:ve.title,fallbackUrl:ve.fallbackUrl}}_e.open=function(ve,ke,We){Co(C($n,E.Dialog_Url_Open),ve,ke,We)},_e.submit=function(ve,ke){zo(C($n,E.Dialog_Url_Submit),ve,ke)},_e.sendMessageToParentFromDialog=function(ve){if(Pe(K,j.task),!Me())throw u;Bt(C($n,E.Dialog_Url_SendMessageToParentFromDialog),"messageForParent",[ve])},_e.sendMessageToDialog=function(ve){if(Pe(K,j.content,j.sidePanel,j.meetingStage),!Me())throw u;Bt(C($n,E.Dialog_Url_SendMessageToDialog),"messageForChild",[ve])},_e.registerOnMessageFromParent=function(ve){if(Pe(K,j.task),!Me())throw u;for(en("messageForChild"),xt("messageForChild",ve),b.reverse();b.length>0;)ve(b.pop())},_e.isSupported=Me,(ve=_e.bot||(_e.bot={})).open=function(ke,We,mt){No(C($n,E.Dialog_Url_Bot_Open),ke,We,mt)},ve.isSupported=function(){return Pe(K)&&void 0!==(K.supports.dialog&&K.supports.dialog.url&&K.supports.dialog.url.bot)},_e.getDialogInfoFromUrlDialogInfo=Ce,_e.getDialogInfoFromBotUrlDialogInfo=function(ve){var ke=Ce(ve);return ke.completionBotId=ve.completionBotId,ke}}(n.url||(n.url={})),n.isSupported=function(){return!(!Pe(K)||!K.supports.dialog)},(_e=n.update||(n.update={})).resize=function(Me){Uo(C($n,E.Dialog_Update_Resize),Me)},_e.isSupported=function(){return!(!Pe(K)||!K.supports.dialog||!K.supports.dialog.update)},function(_e){function Me(){var ke=K.hostVersionsInfo&&K.hostVersionsInfo.adaptiveCardSchemaVersion&&!Y(K.hostVersionsInfo.adaptiveCardSchemaVersion);return Pe(K)&&void 0!==(ke&&K.supports.dialog&&K.supports.dialog.card)}function Ce(ke){return{card:ke.card,height:ke.size?ke.size.height:oe.Small,width:ke.size?ke.size.width:oe.Small,title:ke.title}}_e.open=function(ke,We){if(Pe(K,j.content,j.sidePanel,j.meetingStage),!Me())throw u;var mt=Ce(ke);Bt(C($n,E.Dialog_AdaptiveCard_Open),"tasks.startTask",[mt],function(Ft,_t){We?.({err:Ft,result:_t})})},_e.isSupported=Me,function(ke){function We(){var mt=K.hostVersionsInfo&&K.hostVersionsInfo.adaptiveCardSchemaVersion&&!Y(K.hostVersionsInfo.adaptiveCardSchemaVersion);return Pe(K)&&void 0!==(mt&&K.supports.dialog&&K.supports.dialog.card&&K.supports.dialog.card.bot)}ke.open=function(mt,Ft){if(Pe(K,j.content,j.sidePanel,j.meetingStage),!We())throw u;var _t=function(ke){var We=Ce(ke);return We.completionBotId=ke.completionBotId,We}(mt);Bt(C($n,E.Dialog_AdaptiveCard_Bot_Open),"tasks.startTask",[_t],function(Qe,Ct){Ft?.({err:Qe,result:Ct})})},ke.isSupported=We}(_e.bot||(_e.bot={}))}(n.adaptiveCard||(n.adaptiveCard={}))})(Vn||(Vn={})),function(n){var A,T,z,ve;function _e(ve){z&&z(ve)||(Pe(K),bt("viewConfigItemPress",[ve]))}function Me(ve){A&&A(ve)||(Pe(K),bt("handleNavBarMenuItemPress",[ve]))}function we(ve){T&&T(ve)||(Pe(K),bt("handleActionMenuItemPress",[ve]))}function Ce(){return!(!Pe(K)||!K.supports.menus)}(ve=n.DisplayMode||(n.DisplayMode={}))[ve.ifRoom=0]="ifRoom",ve[ve.overflowOnly=1]="overflowOnly",n.MenuItem=function(){return function(){this.enabled=!0,this.selected=!1}}(),function(ve){ve.dropDown="dropDown",ve.popOver="popOver"}(n.MenuListType||(n.MenuListType={})),n.initialize=function(){xt("navBarMenuItemPress",Me,!1),xt("actionMenuItemPress",we,!1),xt("setModuleView",_e,!1)},n.setUpViews=function(ve,ke){if(Pe(K),!Ce())throw u;z=ke,bt("setUpViews",[ve])},n.setNavBarMenu=function(ve,ke){if(Pe(K),!Ce())throw u;A=ke,bt("setNavBarMenu",[ve])},n.showActionMenu=function(ve,ke){if(Pe(K),!Ce())throw u;T=ke,bt("showActionMenu",[ve])},n.isSupported=Ce}(go||(go={}));var Qn=k.V_2,ci=5e3,Ho=i("app");function yo(n,b){return it()?(Ho.extend("initialize")("window object undefined at initialization"),Promise.resolve()):function(n,b,R){return new Promise(function(A,T){var z=setTimeout(T,b,R);n().then(function(_e){clearTimeout(z),A(_e)}).catch(function(_e){clearTimeout(z),T(_e)})})}(function(){return function(n,b){return new Promise(function(R){J.initializeCalled||(J.initializeCalled=!0,zt.initializeHandlers(),J.initializePromise=function(n,b){var R=this;if(an.messageListener=function(T){return To(R,void 0,void 0,a().mark(function z(){return a().wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:return Me.next=2,Ai(T);case 2:return Me.abrupt("return",Me.sent);case 3:case"end":return Me.stop()}},z)}))},gt.currentWindow=gt.currentWindow||Xe(),gt.parentWindow=gt.currentWindow.parent!==gt.currentWindow.self?gt.currentWindow.parent:gt.currentWindow.opener,(gt.parentWindow||n)&&gt.currentWindow.addEventListener("message",an.messageListener,!1),!gt.parentWindow){var A=gt.currentWindow;if(!A.nativeInterface)return Promise.reject(new Error("Initialization Failed. No Parent window found."));J.isFramelessWindow=!0,A.onNativeMessage=Fi}try{return gt.parentOrigin="*",Ro(b,"initialize",[co,ct]).then(function(T){return{context:T[0],clientType:T[1],runtimeConfig:T[2],clientSupportedSDKVersion:T[3]}})}finally{gt.parentOrigin=null}}(b,n).then(function(A){var z=A.clientType,_e=A.runtimeConfig,Me=A.clientSupportedSDKVersion,we=void 0===Me?ne:Me;J.frameContext=A.context,J.hostClientType=z,J.clientSupportedSDKVersion=we;try{Yn("Parsing %s",_e);var Ce=JSON.parse(_e);if(Yn("Checking if %o is a valid runtime object",Ce??"null"),!Ce||!Ce.apiVersion)throw new Error("Received runtime config is invalid");_e&&Dn(Ce)}catch(ke){if(!(ke instanceof SyntaxError))throw ke;try{Yn("Attempting to parse %s as an SDK version",_e),isNaN(w(_e,ne))||(J.clientSupportedSDKVersion=_e);var ve=JSON.parse(we);if(Yn("givenRuntimeConfig parsed to %o",ve??"null"),!ve)throw new Error("givenRuntimeConfig string was successfully parsed. However, it parsed to value of null");Dn(ve)}catch(We){if(!(We instanceof SyntaxError))throw We;Dn(oo(J.clientSupportedSDKVersion,mn,so))}}J.initializeCompleted=!0}),po.initialize(),go.initialize(),$t.config.initialize(),Vn.initialize()),Array.isArray(b)&&function(n){var b=J.additionalValidOrigins.concat(n.filter(function(A){return"string"==typeof A&&H.test(A)})),R={};b=b.filter(function(A){return!R[A]&&(R[A]=!0,!0)}),J.additionalValidOrigins=b}(b),void 0!==J.initializePromise?R(J.initializePromise):Yn("GlobalVars.initializePromise is unexpectedly undefined")})}(n,b)},ci,new Error("SDK initialization timed out."))}var Te,Yn=Ho.extend("initializeHelper");function Ve(n,b){!Qt(b)&&Hn(),function(n,b){zt.themeChangeHandler=b,!Qt(b)&&Bt(n,"registerHandler",["themeChange"])}(n,b)}function Le(n,b){return new Promise(function(R){Pe(K,j.content,j.sidePanel,j.settings,j.task,j.stage,j.meetingStage),R(ro(n,"executeDeepLink",b))})}!function(n){var z,b=i("app");n.Messages={AppLoaded:"appInitialization.appLoaded",Success:"appInitialization.success",Failure:"appInitialization.failure",ExpectedFailure:"appInitialization.expectedFailure"},(z=n.FailedReason||(n.FailedReason={})).AuthFailed="AuthFailed",z.Timeout="Timeout",z.Other="Other",function(z){z.PermissionError="PermissionError",z.NotFound="NotFound",z.Throttling="Throttling",z.Offline="Offline",z.Other="Other"}(n.ExpectedFailureReason||(n.ExpectedFailureReason={})),n.isInitialized=function(){return J.initializeCompleted},n.getFrameContext=function(){return J.frameContext},function(){if(!it()){var z=document.getElementsByTagName("script"),_e=z&&z[z.length-1]&&z[z.length-1].src,Me="Today, teamsjs can only be used from a single script or you may see undefined behavior. This log line is used to help detect cases where teamsjs is loaded multiple times -- it is always written. The presence of the log itself does not indicate a multi-load situation, but multiples of these log lines will. If you would like to use teamjs from more than one script at the same time, please open an issue at https://github.com/OfficeDev/microsoft-teams-library-js/issues";_e&&0!==_e.length?b("teamsjs is being used from %s. %s",_e,Me):b("teamsjs is being used from a script tag embedded directly in your html. %s",Me)}}(),n.initialize=function(z){return function(){ko(this,void 0,void 0,a().mark(function n(){return a().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,Bo();case 2:case"end":return R.stop()}},n)}))}(),yo(C(Qn,E.App_Initialize),z)},n._initialize=function(z){gt.currentWindow=z},n._uninitialize=function(){J.initializeCalled&&(zt.uninitializeHandlers(),J.initializeCalled=!1,J.initializeCompleted=!1,J.initializePromise=void 0,J.additionalValidOrigins=[],J.frameContext=void 0,J.hostClientType=void 0,J.isFramelessWindow=!1,gt.currentWindow&&gt.currentWindow.removeEventListener("message",an.messageListener,!1),gt.currentWindow=null,gt.parentWindow=null,gt.parentOrigin=null,gt.childWindow=null,gt.childOrigin=null,an.parentMessageQueue=[],an.childMessageQueue=[],an.nextMessageId=0,an.callbacks={},an.promiseCallbacks={})},n.getContext=function(){return new Promise(function(z){Hn(),z(Io(C(Qn,E.App_GetContext),"getContext"))}).then(function(z){return function(n){var b;return{actionInfo:n.actionInfo,app:{locale:n.locale,sessionId:n.appSessionId?n.appSessionId:"",theme:n.theme?n.theme:"default",iconPositionVertical:n.appIconPosition,osLocaleInfo:n.osLocaleInfo,parentMessageId:n.parentMessageId,userClickTime:n.userClickTime,userFileOpenPreference:n.userFileOpenPreference,host:{name:n.hostName?n.hostName:Je.teams,clientType:n.hostClientType?n.hostClientType:He.web,sessionId:n.sessionId?n.sessionId:"",ringId:n.ringId},appLaunchId:n.appLaunchId},page:{id:n.entityId,frameContext:n.frameContext?n.frameContext:J.frameContext,subPageId:n.subEntityId,isFullScreen:n.isFullScreen,isMultiWindow:n.isMultiWindow,sourceOrigin:n.sourceOrigin},user:{id:null!==(b=n.userObjectId)&&void 0!==b?b:"",displayName:n.userDisplayName,isCallingAllowed:n.isCallingAllowed,isPSTNCallingAllowed:n.isPSTNCallingAllowed,licenseType:n.userLicenseType,loginHint:n.loginHint,userPrincipalName:n.userPrincipalName,tenant:n.tid?{id:n.tid,teamsSku:n.tenantSKU}:void 0},channel:n.channelId?{id:n.channelId,displayName:n.channelName,relativeUrl:n.channelRelativeUrl,membershipType:n.channelType,defaultOneNoteSectionId:n.defaultOneNoteSectionId,ownerGroupId:n.hostTeamGroupId,ownerTenantId:n.hostTeamTenantId}:void 0,chat:n.chatId?{id:n.chatId}:void 0,meeting:n.meetingId?{id:n.meetingId}:void 0,sharepoint:n.sharepoint,team:n.teamId?{internalId:n.teamId,displayName:n.teamName,type:n.teamType,groupId:n.groupId,templateId:n.teamTemplateId,isArchived:n.isTeamArchived,userRole:n.userTeamRole}:void 0,sharePointSite:n.teamSiteUrl||n.teamSiteDomain||n.teamSitePath||n.mySitePath||n.mySiteDomain?{teamSiteUrl:n.teamSiteUrl,teamSiteDomain:n.teamSiteDomain,teamSitePath:n.teamSitePath,teamSiteId:n.teamSiteId,mySitePath:n.mySitePath,mySiteDomain:n.mySiteDomain}:void 0}}(z)})},n.notifyAppLoaded=function(){Hn(),Bt(C(Qn,E.App_NotifyAppLoaded),n.Messages.AppLoaded,[co])},n.notifySuccess=function(){Hn(),Bt(C(Qn,E.App_NotifySuccess),n.Messages.Success,[co])},n.notifyFailure=function(z){Hn(),Bt(C(Qn,E.App_NotifyFailure),n.Messages.Failure,[z.reason,z.message])},n.notifyExpectedFailure=function(z){Hn(),Bt(C(Qn,E.App_NotifyExpectedFailure),n.Messages.ExpectedFailure,[z.reason,z.message])},n.registerOnThemeChangeHandler=function(z){Ve(C(Qn,E.App_RegisterOnThemeChangeHandler),z)},n.openLink=function(z){return Le(C(Qn,E.App_OpenLink),z)},function(z){z.registerBeforeSuspendOrTerminateHandler=function(_e){if(!_e)throw new Error("[app.lifecycle.registerBeforeSuspendOrTerminateHandler] Handler cannot be null");Pe(K),function(n){zt.beforeSuspendOrTerminateHandler=n,!Qt(n)&&bt("registerHandler",["beforeUnload"])}(_e)},z.registerOnResumeHandler=function(_e){if(!_e)throw new Error("[app.lifecycle.registerOnResumeHandler] Handler cannot be null");Pe(K),function(n){zt.resumeHandler=n,!Qt(n)&&bt("registerHandler",["load"])}(_e)}}(n.lifecycle||(n.lifecycle={}))}(Te||(Te={}));var $t,Ye=k.V_2;function vt(n,b){return new Promise(function(R){if(Pe(K,j.content,j.sidePanel,j.settings,j.remove,j.task,j.stage,j.meetingStage),!$t.isSupported())throw u;R(pi(n,"navigateCrossDomain","Cross-origin navigation is only supported for URLs matching the pattern registered in the manifest.",b))})}function pt(n){return new Promise(function(b){if(Pe(K),!$t.backStack.isSupported())throw u;b(pi(n,"navigateBack","Back navigation is not supported in the current client or context."))})}function Rt(n,b){return new Promise(function(R){if(Pe(K),!$t.tabs.isSupported())throw u;R(pi(n,"navigateToTab","Invalid internalTabInstanceId and/or channelId were/was provided",b))})}function Ut(n,b){if(Pe(K),!$t.isSupported())throw u;Bt(n,"returnFocus",[b])}function Ht(n,b){return new Promise(function(R){if(Pe(K),!$t.tabs.isSupported())throw u;R(Io(n,"getTabInstances",b))})}function sn(n,b){return new Promise(function(R){if(Pe(K),!$t.tabs.isSupported())throw u;R(Io(n,"getMruTabInstances",b))})}function vn(n,b){if(Pe(K,j.content,j.sidePanel,j.meetingStage),!$t.isSupported())throw u;Bt(n,"shareDeepLink",[b.subPageId,b.subPageLabel,b.subPageWebUrl])}function Mn(n,b){if(Pe(K,j.content),!$t.isSupported())throw u;Bt(n,"setFrameContext",[b])}!function(n){function b(Ce){Mn(C(Ye,E.Pages_SetCurrentFrame),Ce)}function R(){return!(!Pe(K)||!K.supports.pages)}var Ce;n.returnFocus=function(Ce){Ut(C(Ye,E.Pages_ReturnFocus),Ce)},n.registerFocusEnterHandler=function(Ce){hn(C(Ye,E.Pages_RegisterFocusEnterHandler),"focusEnter",Ce,[],function(){if(!R())throw u})},n.setCurrentFrame=b,n.initializeWithFrameContext=function(Ce,ve,ke){Te.initialize(ke).then(function(){return ve&&ve()}),b(Ce)},n.getConfig=function(){return new Promise(function(Ce){if(Pe(K,j.content,j.settings,j.remove,j.sidePanel),!R())throw u;Ce(Io(C(Ye,E.Pages_GetConfig),"settings.getSettings"))})},n.navigateCrossDomain=function(Ce){return vt(C(Ye,E.Pages_NavigateCrossDomain),Ce)},n.navigateToApp=function(Ce){return new Promise(function(ve){if(Pe(K,j.content,j.sidePanel,j.settings,j.task,j.stage,j.meetingStage),!R())throw u;var ke=C(Ye,E.Pages_NavigateCrossDomain);ve(K.isLegacyTeams?ro(ke,"executeDeepLink",function(n){var b=new URL("https://teams.microsoft.com/l/entity/"+encodeURIComponent(n.appId)+"/"+encodeURIComponent(n.pageId));return n.webUrl&&b.searchParams.append("webUrl",n.webUrl),(n.channelId||n.subPageId)&&b.searchParams.append("context",JSON.stringify({channelId:n.channelId,subEntityId:n.subPageId})),b.toString()}(Ce)):ro(ke,"pages.navigateToApp",Ce))})},n.shareDeepLink=function(Ce){return vn(C(Ye,E.Pages_ShareDeepLink),Ce)},n.registerFullScreenHandler=function(Ce){hn(C(Ye,E.Pages_RegisterFullScreenHandler),"fullScreenChange",Ce,[],function(){if(!Qt(Ce)&&!R())throw u})},n.isSupported=R,(Ce=n.tabs||(n.tabs={})).navigateToTab=function(ve){return Rt(C(Ye,E.Pages_Tabs_NavigateToTab),ve)},Ce.getTabInstances=function(ve){return Ht(C(Ye,E.Pages_Tabs_GetTabInstances),ve)},Ce.getMruTabInstances=function(ve){return sn(C(Ye,E.Pages_Tabs_GetMruTabInstances),ve)},Ce.isSupported=function(){return!(!Pe(K)||!K.supports.pages||!K.supports.pages.tabs)},function(Ce){var ve,ke;function We(ft,kt){!Qt(ft)&&Pe(K,j.settings),kt&&kt(),ve=ft,!Qt(ft)&&Bt(C(Ye,E.Pages_Config_RegisterOnSaveHandlerHelper),"registerHandler",["save"])}function mt(ft,kt){!Qt(ft)&&Pe(K,j.remove,j.settings),kt&&kt(),ke=ft,!Qt(ft)&&Bt(C(Ye,E.Pages_Config_RegisterOnRemoveHandlerHelper),"registerHandler",["remove"])}function Ft(ft){var kt=new _t(ft);ve?ve(kt):gt.childWindow?xe("settings.save",[ft]):kt.notifySuccess()}Ce.initialize=function(){xt("settings.save",Ft,!1),xt("settings.remove",Qe,!1)},Ce.setValidityState=function(ft){if(Pe(K,j.settings,j.remove),!Et())throw u;Bt(C(Ye,E.Pages_Config_SetValidityState),"settings.setValidityState",[ft])},Ce.setConfig=function(ft){return new Promise(function(kt){if(Pe(K,j.content,j.settings,j.sidePanel),!Et())throw u;kt(ro(C(Ye,E.Pages_Config_SetConfig),"settings.setSettings",ft))})},Ce.registerOnSaveHandler=function(ft){We(ft,function(){if(!Qt(ft)&&!Et())throw u})},Ce.registerOnSaveHandlerHelper=We,Ce.registerOnRemoveHandler=function(ft){mt(ft,function(){if(!Qt(ft)&&!Et())throw u})},Ce.registerOnRemoveHandlerHelper=mt,Ce.registerChangeConfigHandler=function(ft){hn(C(Ye,E.Pages_Config_RegisterChangeConfigHandler),"changeSettings",ft,[j.content],function(){if(!Et())throw u})};var _t=function(){function ft(Kt){this.notified=!1,this.result=Kt||{}}var kt=ft.prototype;return kt.notifySuccess=function(){this.ensureNotNotified(),Bt(C(Ye,E.Settings_Save_Success),"settings.save.success"),this.notified=!0},kt.notifyFailure=function(Tn){this.ensureNotNotified(),Bt(C(Ye,E.Settings_Save_Failure),"settings.save.failure",[Tn]),this.notified=!0},kt.ensureNotNotified=function(){if(this.notified)throw new Error("The SaveEvent may only notify success or failure once.")},ft}();function Qe(){var ft=new Ct;ke?ke(ft):gt.childWindow?xe("settings.remove",[]):ft.notifySuccess()}var Ct=function(){function ft(){this.notified=!1}var kt=ft.prototype;return kt.notifySuccess=function(){this.ensureNotNotified(),Bt(C(Ye,E.Settings_Remove_Success),"settings.remove.success"),this.notified=!0},kt.notifyFailure=function(Tn){this.ensureNotNotified(),Bt(C(Ye,E.Settings_Remove_Failure),"settings.remove.failure",[Tn]),this.notified=!0},kt.ensureNotNotified=function(){if(this.notified)throw new Error("The removeEventType may only notify success or failure once.")},ft}();function Et(){return!(!Pe(K)||!K.supports.pages||!K.supports.pages.config)}Ce.isSupported=Et}(n.config||(n.config={})),function(Ce){var ve;function ke(){return pt(C(Ye,E.Pages_BackStack_NavigateBack))}function We(_t,Qe,Ct){!Qt(Qe)&&Pe(K),Ct&&Ct(),ve=Qe,!Qt(Qe)&&Bt(_t,"registerHandler",["backButton"])}function mt(){ve&&ve()||(gt.childWindow?xe("backButtonPress",[]):ke())}function Ft(){return!(!Pe(K)||!K.supports.pages||!K.supports.pages.backStack)}Ce._initialize=function(){xt("backButtonPress",mt,!1)},Ce.navigateBack=ke,Ce.registerBackButtonHandler=function(_t){We(C(Ye,E.Pages_BackStack_RegisterBackButtonHandler),_t,function(){if(!Qt(_t)&&!Ft())throw u})},Ce.registerBackButtonHandlerHelper=We,Ce.isSupported=Ft}(n.backStack||(n.backStack={})),function(Ce){function ve(){return!(!Pe(K)||!K.supports.pages||!K.supports.pages.fullTrust)}Ce.enterFullscreen=function(){if(Pe(K,j.content),!ve())throw u;Bt(C(Ye,E.Pages_FullTrust_EnterFullscreen),"enterFullscreen",[])},Ce.exitFullscreen=function(){if(Pe(K,j.content),!ve())throw u;Bt(C(Ye,E.Pages_FullTrust_ExitFullscreen),"exitFullscreen",[])},Ce.isSupported=ve}(n.fullTrust||(n.fullTrust={})),function(Ce){function ve(){return!(!Pe(K)||!K.supports.pages||!K.supports.pages.appButton)}Ce.onClick=function(ke){hn(C(Ye,E.Pages_AppButton_OnClick),"appButtonClick",ke,[j.content],function(){if(!ve())throw u})},Ce.onHoverEnter=function(ke){hn(C(Ye,E.Pages_AppButton_OnHoverEnter),"appButtonHoverEnter",ke,[j.content],function(){if(!ve())throw u})},Ce.onHoverLeave=function(ke){hn(C(Ye,E.Pages_AppButton_OnHoverLeave),"appButtonHoverLeave",ke,[j.content],function(){if(!ve())throw u})},Ce.isSupported=ve}(n.appButton||(n.appButton={})),function(Ce){function ve(){return!(!Pe(K)||!K.supports.pages||!K.supports.pages.currentApp)}Ce.navigateTo=function(ke){return new Promise(function(We){if(Pe(K,j.content,j.sidePanel,j.settings,j.task,j.stage,j.meetingStage),!ve())throw u;We(fn(C(Ye,E.Pages_CurrentApp_NavigateTo),"pages.currentApp.navigateTo",ke))})},Ce.navigateToDefaultPage=function(){return new Promise(function(ke){if(Pe(K,j.content,j.sidePanel,j.settings,j.task,j.stage,j.meetingStage),!ve())throw u;ke(fn(C(Ye,E.Pages_CurrentApp_NavigateToDefaultPage),"pages.currentApp.navigateToDefaultPage"))})},Ce.isSupported=ve}(n.currentApp||(n.currentApp={}))}($t||($t={}));var In=i("handlers"),zt=function(){function n(){}return n.initializeHandlers=function(){n.handlers.themeChange=ht,n.handlers.load=jt,n.handlers.beforeUnload=Cn,$t.backStack._initialize()},n.uninitializeHandlers=function(){n.handlers={},n.themeChangeHandler=null,n.loadHandler=null,n.beforeUnloadHandler=null,n.beforeSuspendOrTerminateHandler=null,n.resumeHandler=null},n}();zt.handlers={},zt.themeChangeHandler=null,zt.loadHandler=null,zt.beforeUnloadHandler=null,zt.beforeSuspendOrTerminateHandler=null,zt.resumeHandler=null;var jn=In.extend("callHandler");function An(n,b){var R=zt.handlers[n];return R?(jn("Invoking the registered handler for message %s with arguments %o",n,b),[!0,R.apply(this,b)]):gt.childWindow?(xe(n,b),[!1,void 0]):(jn("Handler for action message %s not found.",n),[!1,void 0])}function xt(n,b,R,A){void 0===R&&(R=!0),void 0===A&&(A=[]),b?(zt.handlers[n]=b,R&&Bt(C(k.V_0,E.RegisterHandler),"registerHandler",[n].concat(A))):delete zt.handlers[n]}function en(n){delete zt.handlers[n]}function Ln(n){return null!=zt.handlers[n]}function hn(n,b,R,A,T){R&&Pe.apply(void 0,[K].concat(A)),T&&T(),xt(b,R)}function ht(n){zt.themeChangeHandler&&zt.themeChangeHandler(n),gt.childWindow&&xe("themeChange",[n])}function jt(n){zt.resumeHandler?zt.resumeHandler(n):zt.loadHandler&&zt.loadHandler(n),gt.childWindow&&xe("load",[n])}function Cn(){var n=function(){bt("readyToUnload",[])};zt.beforeSuspendOrTerminateHandler?(zt.beforeSuspendOrTerminateHandler(),gt.childWindow?xe("beforeUnload"):n()):zt.beforeUnloadHandler&&zt.beforeUnloadHandler(n)||(gt.childWindow?xe("beforeUnload"):n())}var To=function(b,R,A,T){return new(A||(A=Promise))(function(_e,Me){function we(ke){try{ve(T.next(ke))}catch(We){Me(We)}}function Ce(ke){try{ve(T.throw(ke))}catch(We){Me(We)}}function ve(ke){ke.done?_e(ke.value):function(_e){return _e instanceof A?_e:new A(function(Me){Me(_e)})}(ke.value).then(we,Ce)}ve((T=T.apply(b,R||[])).next())})},xo=i("communication"),gt=function(){},an=function(){};function Io(n,b){for(var R=arguments.length,A=new Array(R>2?R-2:0),T=2;T<R;T++)A[T-2]=arguments[T];return Ro(n,b,A).then(function(z){return z[0]})}function di(n){for(var b=arguments.length,R=new Array(b>1?b-1:0),A=1;A<b;A++)R[A-1]=arguments[A];return Kn(n,R).then(function(T){return T[0]})}function ro(n,b){for(var R=arguments.length,A=new Array(R>2?R-2:0),T=2;T<R;T++)A[T-2]=arguments[T];return Ro(n,b,A).then(function(z){if(!z[0])throw new Error(z[1])})}function ao(n){for(var b=arguments.length,R=new Array(b>1?b-1:0),A=1;A<b;A++)R[A-1]=arguments[A];return Kn(n,R).then(function(T){if(!T[0])throw new Error(T[1])})}function pi(n,b,R){for(var A=arguments.length,T=new Array(A>3?A-3:0),z=3;z<A;z++)T[z-3]=arguments[z];return Ro(n,b,T).then(function(_e){if(!_e[0])throw new Error(_e[1]||R)})}function fn(n,b){for(var R=arguments.length,A=new Array(R>2?R-2:0),T=2;T<R;T++)A[T-2]=arguments[T];return Ro(n,b,A).then(function(z){var _e=z[0];if(_e)throw _e;return z[1]})}function cn(n){for(var b=arguments.length,R=new Array(b>1?b-1:0),A=1;A<b;A++)R[A-1]=arguments[A];return Kn(n,R).then(function(T){var z=T[0];if(z)throw z;return T[1]})}function Ro(n,b,R){if(void 0===R&&(R=void 0),!v(n))throw Error("apiVersionTag: "+n+" passed in doesn't follow the pattern starting with 'v' followed by digits, then underscore with words, please check.");return new Promise(function(A){A(Ii(Ko(n,b,R).id))})}function Kn(n,b){return void 0===b&&(b=void 0),new Promise(function(R){R(Ii(Ko(C(k.V_0,"testing"),n,b).id))})}function Ii(n){return new Promise(function(b){an.promiseCallbacks[n]=b})}function Bt(n,b,R,A){var T;if(R instanceof Function?A=R:R instanceof Array&&(T=R),!v(n))throw Error("apiVersionTag: "+n+" passed in doesn't follow the pattern starting with 'v' followed by digits, then underscore with words, please check.");var z=Ko(n,b,T);A&&(an.callbacks[z.id]=A)}function bt(n,b,R){var A;b instanceof Function?R=b:b instanceof Array&&(A=b);var T=Ko(C(k.V_0,"testing"),n,A);R&&(an.callbacks[T.id]=R)}an.parentMessageQueue=[],an.childMessageQueue=[],an.nextMessageId=0,an.callbacks={},an.promiseCallbacks={};var tr=xo.extend("sendMessageToParentHelper");function Ko(n,b,R){var A=tr,T=gt.parentWindow,z=function(n,b,R){return{id:an.nextMessageId++,func:b,timestamp:Date.now(),args:R||[],apiversiontag:n}}(n,b,R);if(A("Message %i information: %o",z.id,{actionName:b,args:R}),J.isFramelessWindow)gt.currentWindow&&gt.currentWindow.nativeInterface&&(A("Sending message %i to parent via framelessPostMessage interface",z.id),gt.currentWindow.nativeInterface.framelessPostMessage(JSON.stringify(z)));else{var _e=Qo(T);T&&_e?(A("Sending message %i to parent via postMessage",z.id),T.postMessage(z,_e)):(A("Adding message %i to parent message queue",z.id),$o(T).push(z))}return z}var Ri=xo.extend("processMessage");function Ai(n){return To(this,void 0,void 0,a().mark(function b(){var R,A;return a().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(n&&n.data&&"object"==typeof n.data){z.next=2;break}return z.abrupt("return",void Ri("Unrecognized message format received by app, message being ignored. Message: %o",n));case 2:return z.abrupt("return",nr(R=n.source||n.originalEvent&&n.originalEvent.source,A=n.origin||n.originalEvent&&n.originalEvent.origin).then(function(_e){_e?(or(R,A),R===gt.parentWindow?Fi(n):R===gt.childWindow&&hi(n)):Ri("Message being ignored by app because it is either coming from the current window or a different window with an invalid origin")}));case 4:case"end":return z.stop()}},b)}))}var gi=xo.extend("shouldProcessMessage");function nr(n,b){return To(this,void 0,void 0,a().mark(function R(){var A;return a().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(!gt.currentWindow||n!==gt.currentWindow){z.next=2;break}return z.abrupt("return",(gi("Should not process message because it is coming from the current window"),!1));case 2:if(!(gt.currentWindow&&gt.currentWindow.location&&b&&b===gt.currentWindow.location.origin)){z.next=4;break}return z.abrupt("return",!0);case 4:return z.next=6,si(new URL(b));case 6:return z.abrupt("return",((A=z.sent)||gi("Message has an invalid origin of %s",b),A));case 8:case"end":return z.stop()}},R)}))}function or(n,b){J.isFramelessWindow||gt.parentWindow&&!gt.parentWindow.closed&&n!==gt.parentWindow?gt.childWindow&&!gt.childWindow.closed&&n!==gt.childWindow||(gt.childWindow=n,gt.childOrigin=b):(gt.parentWindow=n,gt.parentOrigin=b),gt.parentWindow&&gt.parentWindow.closed&&(gt.parentWindow=null,gt.parentOrigin=null),gt.childWindow&&gt.childWindow.closed&&(gt.childWindow=null,gt.childOrigin=null),Gi(gt.parentWindow),Gi(gt.childWindow)}var Li=xo.extend("handleParentMessage");function Fi(n){var b=Li;if("id"in n.data&&"number"==typeof n.data.id){var R=n.data,A=an.callbacks[R.id];b("Received a response from parent for message %i",R.id),A&&(b("Invoking the registered callback for message %i with arguments %o",R.id,R.args),A.apply(null,[].concat(R.args,[R.isPartialResponse])),function(n){return!0===n.data.isPartialResponse}(n)||(b("Removing registered callback for message %i",R.id),delete an.callbacks[R.id]));var T=an.promiseCallbacks[R.id];T&&(b("Invoking the registered promise callback for message %i with arguments %o",R.id,R.args),T(R.args),b("Removing registered promise callback for message %i",R.id),delete an.promiseCallbacks[R.id])}else if("func"in n.data&&"string"==typeof n.data.func){var z=n.data;b("Received an action message %s from parent",z.func),An(z.func,z.args)}else b("Received an unknown message: %O",n)}function hi(n){if("id"in n.data&&"func"in n.data){var b=n.data,R=An(b.func,b.args),T=R[1];R[0]&&void 0!==T?et(b.id,Array.isArray(T)?T:[T]):bt(b.func,b.args,function(){if(gt.childWindow){for(var z=arguments.length,_e=new Array(z),Me=0;Me<z;Me++)_e[Me]=arguments[Me];var we=_e.pop();et(b.id,_e,we)}})}}function $o(n){return n===gt.parentWindow?an.parentMessageQueue:n===gt.childWindow?an.childMessageQueue:[]}function Qo(n){return n===gt.parentWindow?gt.parentOrigin:n===gt.childWindow?gt.childOrigin:null}var dn,ln,Jn,pn,Ao,oa=xo.extend("flushMessageQueue");function Gi(n){for(var b=Qo(n),R=$o(n),A=n==gt.parentWindow?"parent":"child";n&&b&&R.length>0;){var T=R.shift();oa("Flushing message %i from "+A+" message queue via postMessage.",T?.id),n.postMessage(T,b)}}function Ie(n,b){var R;R=gt.currentWindow.setInterval(function(){0===$o(n).length&&(clearInterval(R),b())},100)}function et(n,b,R){var A=gt.childWindow,T=function(n,b,R){return{id:n,args:b||[],isPartialResponse:R}}(n,b,R),z=Qo(A);A&&z&&A.postMessage(T,z)}function xe(n,b){var R=gt.childWindow,A=function(n,b){return{func:n,args:b||[]}}(n,b),T=Qo(R);R&&T?R.postMessage(A,T):$o(R).push(A)}function Ra(n,b){Pe(K),bt("uploadCustomApp",[n],b||B())}function Aa(n,b,R){Pe(K),bt(n,b,R)}function La(n,b){if(Pe(K),!gt.childWindow)throw new Error("The child window has not yet been initialized or is not present");xe(n,b)}function ia(n,b){var R=this;Pe(K),xt(n,function(){for(var A=arguments.length,T=new Array(A),z=0;z<A;z++)T[z]=arguments[z];return b.apply(R,T)})}function Fa(n,b){Pe(K),xt("userSettingsChange",b,!0,[n])}function ra(n){Pe(K,j.content,j.task),bt("openFilePreview",[n.entityId,n.title,n.description,n.type,n.objectUrl,n.downloadUrl,n.webPreviewUrl,n.webEditUrl,n.baseUrl,n.editFile,n.subEntityId,n.viewerAction,n.fileOpenPreference,n.conversationId,n.sizeInBytes])}(function(n){function b(){return!(!Pe(K)||!K.supports.logs)}n.registerGetLogHandler=function(R){if(!Qt(R)&&Pe(K),!Qt(R)&&!b())throw u;R?xt("log.request",function(){bt("log.receive",[R()])}):en("log.request")},n.isSupported=b})(dn||(dn={})),function(n){n.fileDownloadStart="fileDownloadStart",n.fileDownloadComplete="fileDownloadComplete"}(ln||(ln={})),function(n){n.view="view",n.edit="edit",n.editNew="editNew"}(Jn||(Jn={})),function(n){n.fileOpenPreference="fileOpenPreference",n.theme="theme"}(pn||(pn={})),function(n){function b(){return!(!Pe(K)||!K.supports.conversations)}n.openConversation=function(R){return new Promise(function(A){if(Pe(K,j.content),!b())throw u;var T=ao("conversations.openConversation",{title:R.title,subEntityId:R.subEntityId,conversationId:R.conversationId,channelId:R.channelId,entityId:R.entityId});R.onStartConversation&&xt("startConversation",function(z,_e,Me,we){var Ce;return null===(Ce=R.onStartConversation)||void 0===Ce?void 0:Ce.call(R,{subEntityId:z,conversationId:_e,channelId:Me,entityId:we})}),R.onCloseConversation&&xt("closeConversation",function(z,_e,Me,we){var Ce;return null===(Ce=R.onCloseConversation)||void 0===Ce?void 0:Ce.call(R,{subEntityId:z,conversationId:_e,channelId:Me,entityId:we})}),A(T)})},n.closeConversation=function(){if(Pe(K,j.content),!b())throw u;bt("conversations.closeConversation"),en("startConversation"),en("closeConversation")},n.getChatMembers=function(){return new Promise(function(R){if(Pe(K),!b())throw u;R(di("getChatMembers"))})},n.isSupported=b}(Ao||(Ao={}));var rr;function aa(n,b,R){if(0===n.length)throw new Error("Must have at least one user when creating a chat deep link");var A="users="+n.map(function(_e){return encodeURIComponent(_e)}).join(","),T=void 0===b?"":"&topicName="+encodeURIComponent(b),z=void 0===R?"":"&message="+encodeURIComponent(R);return G+"://"+Z+"/l/chat/0/0?"+A+T+z}!function(n){function b(){return!(!Pe(K)||!K.supports.appInstallDialog)}n.openAppInstallDialog=function(R){return new Promise(function(A){if(Pe(K,j.content,j.sidePanel,j.settings,j.task,j.stage,j.meetingStage),!b())throw new Error("Not supported");K.isLegacyTeams?A(ao("executeDeepLink",function(n){if(!n)throw new Error("App ID must be set when creating an app install dialog deep link");return G+"://"+Z+"/l/app/"+encodeURIComponent(n)}(R.appId))):(bt("appInstallDialog.openAppInstallDialog",[R]),A())})},n.isSupported=b}(rr||(rr={}));var bo,Zn=k.V_1,Ba=i("media");function ki(n,b){if(null==n||null==b||n.length<=0)return null;var R=null,A=1;return n.sort(function(T,z){return T.sequence>z.sequence?1:-1}),n.forEach(function(T){T.sequence==A&&(R=R?new Blob([R,T.file],{type:b}):new Blob([T.file],{type:b}),A++)}),R}function ar(n,b){if(null==n||null==b)return null;for(var R=atob(n.chunk),A=new Array(R.length),T=0;T<R.length;T++)A[T]=R.charCodeAt(T);var z=new Uint8Array(A),_e=new Blob([z],{type:b});return{sequence:n.chunkSequence,file:_e}}function Ua(n){!function(n){return!(!n||n.mediaType!=bo.MediaType.VideoAndImage&&!n.videoAndImageProps)}(n)?function(n){return!(!n||n.mediaType!=bo.MediaType.Video||!n.videoProps||n.videoProps.isFullScreenMode)}(n)?uo("2.0.3"):function(n){var b;return!(n?.mediaType!=bo.MediaType.Image||null===(b=n?.imageProps)||void 0===b||!b.imageOutputFormats)}(n)&&uo("2.0.4"):uo("2.0.2")}function la(n){return!n||!(null===n.timeOutIntervalInSec||null!=n.timeOutIntervalInSec&&n.timeOutIntervalInSec<=0||null!=n.timeOutIntervalInSec&&n.timeOutIntervalInSec>60)}!function(n){var R,z,We;(We=n.FileFormat||(n.FileFormat={})).Base64="base64",We.ID="id";var we=function(){};function Ce(){return!(!Pe(K)||!K.supports.permissions)}n.File=we,n.captureImage=function(We){if(!We)throw new Error("[captureImage] Callback cannot be null");Pe(K,j.content,j.task),J.isFramelessWindow?xn("1.7.0")?Bt(C(Zn,E.Media_CaptureImage),"captureImage",We):We({errorCode:ze.OLD_PLATFORM},[]):We({errorCode:ze.NOT_SUPPORTED_ON_PLATFORM},[])},n.hasPermission=function(){if(Pe(K,j.content,j.task),!Ce())throw u;var We=Ke.Media;return new Promise(function(mt){mt(fn(C(Zn,E.Media_HasPermission),"permissions.has",We))})},n.requestPermission=function(){if(Pe(K,j.content,j.task),!Ce())throw u;var We=Ke.Media;return new Promise(function(mt){mt(fn(C(Zn,E.Media_RequestPermission),"permissions.request",We))})};var ve=function(We){function mt(_t){var Qe;return Qe=We.call(this)||this,_t&&(Qe.content=_t.content,Qe.format=_t.format,Qe.mimeType=_t.mimeType,Qe.name=_t.name,Qe.preview=_t.preview,Qe.size=_t.size),Qe}o(mt,We);var Ft=mt.prototype;return Ft.getMedia=function(Qe){if(!Qe)throw new Error("[get Media] Callback cannot be null");Pe(K,j.content,j.task),xn(m)?function(n,b,R){return null!=n&&null!=b&&b==bo.FileFormat.ID&&null!=R}(this.mimeType,this.format,this.content)?xn("2.0.0")?this.getMediaViaCallback(Qe):this.getMediaViaHandler(Qe):Qe({errorCode:ze.INVALID_ARGUMENTS},new Blob):Qe({errorCode:ze.OLD_PLATFORM},new Blob)},Ft.getMediaViaCallback=function(Qe){var Ct={mediaMimeType:this.mimeType,assembleAttachment:[]},Et=[this.content];Bt(C(Zn,E.Media_GetMedia),"getMedia",Et,function(ft){if(Qe)if(ft&&ft.error)Qe(ft.error,new Blob);else if(ft&&ft.mediaChunk)if(ft.mediaChunk.chunkSequence<=0){var kt=ki(Ct.assembleAttachment,Ct.mediaMimeType);Qe(ft.error,kt??new Blob)}else{var Kt=ar(ft.mediaChunk,Ct.mediaMimeType);Kt?Ct.assembleAttachment.push(Kt):Ba("Received a null assemble attachment for when decoding chunk sequence "+ft.mediaChunk.chunkSequence+"; not including the chunk in the assembled file.")}else Qe({errorCode:ze.INTERNAL_ERROR,message:"data received is null"},new Blob)})},Ft.getMediaViaHandler=function(Qe){var Ct=q(),Et={mediaMimeType:this.mimeType,assembleAttachment:[]},ft=[Ct,this.content];this.content&&!Qt(Qe)&&Bt(C(Zn,E.Media_GetMedia),"getMedia",ft),xt("getMedia"+Ct,function(kt){if(Qe){var Kt=JSON.parse(kt);if(Kt.error)Qe(Kt.error,new Blob),en("getMedia"+Ct);else if(Kt.mediaChunk)if(Kt.mediaChunk.chunkSequence<=0){var Tn=ki(Et.assembleAttachment,Et.mediaMimeType);Qe(Kt.error,Tn??new Blob),en("getMedia"+Ct)}else{var wn=ar(Kt.mediaChunk,Et.mediaMimeType);wn&&Et.assembleAttachment.push(wn)}else Qe({errorCode:ze.INTERNAL_ERROR,message:"data received is null"},new Blob),en("getMedia"+Ct)}})},mt}(we);n.Media=ve;var ke=function(){function We(Ft){this.controllerCallback=Ft}var mt=We.prototype;return mt.notifyEventToHost=function(_t,Qe){Pe(K,j.content,j.task);try{uo("2.0.3")}catch(Et){return void(Qe&&Qe(Et))}var Ct={mediaType:this.getMediaType(),mediaControllerEvent:_t};Bt(C(Zn,E.Media_Controller),"media.controller",[Ct],function(Et){Qe&&Qe(Et)})},mt.stop=function(_t){this.notifyEventToHost(R.StopRecording,_t)},We}();n.VideoController=function(We){function mt(){return We.apply(this,arguments)||this}o(mt,We);var Ft=mt.prototype;return Ft.getMediaType=function(){return z.Video},Ft.notifyEventToApp=function(Qe){if(this.controllerCallback)switch(Qe){case R.StartRecording:if(this.controllerCallback.onRecordingStarted){this.controllerCallback.onRecordingStarted();break}}},mt}(ke),function(We){We[We.StartRecording=1]="StartRecording",We[We.StopRecording=2]="StopRecording"}(R=n.MediaControllerEvent||(n.MediaControllerEvent={})),function(We){We[We.Photo=1]="Photo",We[We.Document=2]="Document",We[We.Whiteboard=3]="Whiteboard",We[We.BusinessCard=4]="BusinessCard"}(n.CameraStartMode||(n.CameraStartMode={})),function(We){We[We.Camera=1]="Camera",We[We.Gallery=2]="Gallery"}(n.Source||(n.Source={})),function(We){We[We.Image=1]="Image",We[We.Video=2]="Video",We[We.VideoAndImage=3]="VideoAndImage",We[We.Audio=4]="Audio"}(z=n.MediaType||(n.MediaType={})),function(We){We[We.ID=1]="ID",We[We.URL=2]="URL"}(n.ImageUriType||(n.ImageUriType={})),function(We){We[We.IMAGE=1]="IMAGE",We[We.PDF=2]="PDF"}(n.ImageOutputFormats||(n.ImageOutputFormats={})),n.selectMedia=function(We,mt){if(!mt)throw new Error("[select Media] Callback cannot be null");if(Pe(K,j.content,j.task),xn(m)){try{Ua(We)}catch(Ct){return void mt(Ct,[])}if(function(n){return!(null==n||n.maxMediaCount>10)}(We)){var Qe=[We];Bt(C(Zn,E.Media_SelectMedia),"selectMedia",Qe,function(Ct,Et,ft){var kt,Kt;if(ft)(function(n){return!(n.mediaType!=bo.MediaType.Video||!n.videoProps||!n.videoProps.videoController)})(We)&&(null===(Kt=null===(kt=We?.videoProps)||void 0===kt?void 0:kt.videoController)||void 0===Kt||Kt.notifyEventToApp(ft));else if(Et){for(var qi,Tn=[],wn=P(Et);!(qi=wn()).done;)Tn.push(new ve(qi.value));mt(Ct,Tn)}else mt(Ct,[])})}else mt({errorCode:ze.INVALID_ARGUMENTS},[])}else mt({errorCode:ze.OLD_PLATFORM},[])},n.viewImages=function(We,mt){if(!mt)throw new Error("[view images] Callback cannot be null");if(Pe(K,j.content,j.task),xn(m))if(function(n){return!(null==n||n.length<=0||n.length>10)}(We)){var Ft=[We];Bt(C(Zn,E.Media_ViewImages),"viewImages",Ft,mt)}else mt({errorCode:ze.INVALID_ARGUMENTS});else mt({errorCode:ze.OLD_PLATFORM})},n.scanBarCode=function(We,mt){if(!We)throw new Error("[media.scanBarCode] Callback cannot be null");Pe(K,j.content,j.task),J.hostClientType!==He.desktop&&J.hostClientType!==He.web&&J.hostClientType!==He.rigel&&J.hostClientType!==He.teamsRoomsWindows&&J.hostClientType!==He.teamsRoomsAndroid&&J.hostClientType!==He.teamsPhones&&J.hostClientType!==He.teamsDisplays?xn("1.9.0")?la(mt)?Bt(C(Zn,E.Media_ScanBarCode),"media.scanBarCode",[mt],We):We({errorCode:ze.INVALID_ARGUMENTS},""):We({errorCode:ze.OLD_PLATFORM},""):We({errorCode:ze.NOT_SUPPORTED_ON_PLATFORM},"")}}(bo||(bo={}));var Ui,sr,lr=k.V_2;(function(n){function b(){return!!(Pe(K)&&K.supports.barCode&&K.supports.permissions)}n.scanBarCode=function(R){return new Promise(function(A){if(Pe(K,j.content,j.task),!b())throw u;if(!la(R))throw{errorCode:ze.INVALID_ARGUMENTS};A(fn(C(lr,E.BarCode_ScanBarCode),"media.scanBarCode",R))})},n.hasPermission=function(){if(Pe(K,j.content,j.task),!b())throw u;var R=Ke.Media;return new Promise(function(A){A(fn(C(lr,E.BarCode_HasPermission),"permissions.has",R))})},n.requestPermission=function(){if(Pe(K,j.content,j.task),!b())throw u;var R=Ke.Media;return new Promise(function(A){A(fn(C(lr,E.BarCode_RequestPermission),"permissions.request",R))})},n.isSupported=b})(Ui||(Ui={})),function(n){function b(A){return new Promise(function(T){if(Pe(K,j.content,j.task),!R())throw u;T(K.isLegacyTeams?ao("executeDeepLink",aa([A.user],void 0,A.message)):ao("chat.openChat",{members:[A.user],message:A.message}))})}function R(){return!(!Pe(K)||!K.supports.chat)}n.openChat=b,n.openGroupChat=function(A){return new Promise(function(T){if(A.users.length<1)throw Error("OpenGroupChat Failed: No users specified");if(1===A.users.length)T(b({user:A.users[0],message:A.message}));else{if(Pe(K,j.content,j.task),!R())throw u;T(K.isLegacyTeams?ao("executeDeepLink",aa(A.users,A.topic,A.message)):ao("chat.openChat",{members:A.users,message:A.message,topic:A.topic}))}})},n.isSupported=R}(sr||(sr={}));var Ni,sa=function(b,R,A,T){return new(A||(A=Promise))(function(_e,Me){function we(ke){try{ve(T.next(ke))}catch(We){Me(We)}}function Ce(ke){try{ve(T.throw(ke))}catch(We){Me(We)}}function ve(ke){ke.done?_e(ke.value):function(_e){return _e instanceof A?_e:new A(function(Me){Me(_e)})}(ke.value).then(we,Ce)}ve((T=T.apply(b,R||[])).next())})},ca=k.V_2;!function(n){function b(){return!!(Pe(K)&&navigator&&navigator.clipboard&&K.supports.clipboard)}n.write=function(R){return sa(this,void 0,void 0,a().mark(function A(){var z;return a().wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:if(Pe(K,j.content,j.meetingStage,j.task,j.settings,j.stage,j.sidePanel),b()){Me.next=2;break}throw u;case 2:if(R.type&&Object.values(je).includes(R.type)){Me.next=4;break}throw new Error("Blob type "+R.type+" is not supported. Supported blob types are "+Object.values(je));case 4:return Me.next=6,$e(R);case 6:return z={mimeType:R.type,content:Me.sent},Me.abrupt("return",fn(C(ca,E.Clipboard_Write),"clipboard.writeToClipboard",z));case 9:case"end":return Me.stop()}},A)}))},n.read=function(){return sa(this,void 0,void 0,a().mark(function R(){var A;return a().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(Pe(K,j.content,j.meetingStage,j.task,j.settings,j.stage,j.sidePanel),b()){z.next=2;break}throw u;case 2:if(!Go()&&J.hostClientType!==He.macos){z.next=9;break}return z.t0=JSON,z.next=6,cn("clipboard.readFromClipboard");case 6:return z.t1=z.sent,A=z.t0.parse.call(z.t0,z.t1),z.abrupt("return",Ne(A.mimeType,A.content));case 9:return z.abrupt("return",fn(C(ca,E.Clipboard_Read),"clipboard.readFromClipboard"));case 10:case"end":return z.stop()}},R)}))},n.isSupported=b}(Ni||(Ni={}));var cr,ur,Jo=k.V_2;function Qa(){return K.hostVersionsInfo?K.hostVersionsInfo.adaptiveCardSchemaVersion:void 0}!function(n){function b(){return!!(Pe(K)&&K.supports.geoLocation&&K.supports.permissions)}n.getCurrentLocation=function(){if(Pe(K,j.content,j.task),!b())throw u;return fn(C(Jo,E.GeoLocation_GetCurrentLocation),"location.getLocation",{allowChooseLocation:!1,showMap:!1})},n.hasPermission=function(){if(Pe(K,j.content,j.task),!b())throw u;var A=Ke.GeoLocation;return new Promise(function(T){T(fn(C(Jo,E.GeoLocation_HasPermission),"permissions.has",A))})},n.requestPermission=function(){if(Pe(K,j.content,j.task),!b())throw u;var A=Ke.GeoLocation;return new Promise(function(T){T(fn(C(Jo,E.GeoLocation_RequestPermission),"permissions.request",A))})},n.isSupported=b,function(A){function T(){return!!(Pe(K)&&K.supports.geoLocation&&K.supports.geoLocation.map&&K.supports.permissions)}A.chooseLocation=function(){if(Pe(K,j.content,j.task),!T())throw u;return fn(C(Jo,E.GeoLocation_Map_ChooseLocation),"location.getLocation",{allowChooseLocation:!0,showMap:!0})},A.showLocation=function(z){if(Pe(K,j.content,j.task),!T())throw u;if(!z)throw{errorCode:ze.INVALID_ARGUMENTS};return fn(C(Jo,E.GeoLocation_ShowLocation),"location.showLocation",z)},A.isSupported=T}(n.map||(n.map={}))}(cr||(cr={}));var ua=function(){function n(){}var b=n.prototype;return b.postMessage=function(A,T){Pe(K),bt("messageForChild",[A],T||B())},b.addEventListener=function(A,T){Pe(K),"message"===A&&xt("messageForParent",T)},n}(),Ja=function(){function n(){}var b=n.prototype;return b.postMessage=function(A,T){Pe(K,j.task),bt("messageForParent",[A],T||B())},b.addEventListener=function(A,T){Pe(K,j.task),"message"===A&&xt("messageForChild",T)},r(n,null,[{key:"Instance",get:function(){return this._instance||(this._instance=new this)}}]),n}();!function(n){function b(){return!(!Pe(K)||!K.supports.secondaryBrowser)}n.open=function(R){if(Pe(K,j.content),!b())throw u;if(!R||!ue(R))throw{errorCode:ze.INVALID_ARGUMENTS,message:"Invalid Url: Only https URL is allowed"};return cn("secondaryBrowser.open",R.toString())},n.isSupported=b}(ur||(ur={}));var fi,da=k.V_1;!function(n){function b(){return!(!Pe(K)||!K.supports.location)}n.getLocation=function(R,A){if(!A)throw new Error("[location.getLocation] Callback cannot be null");if(Pe(K,j.content,j.task),!xn(X))throw{errorCode:ze.OLD_PLATFORM};if(!R)throw{errorCode:ze.INVALID_ARGUMENTS};if(!b())throw u;Bt(C(da,E.Location_GetLocation),"location.getLocation",[R],A)},n.showLocation=function(R,A){if(!A)throw new Error("[location.showLocation] Callback cannot be null");if(Pe(K,j.content,j.task),!xn(X))throw{errorCode:ze.OLD_PLATFORM};if(!R)throw{errorCode:ze.INVALID_ARGUMENTS};if(!b())throw u;Bt(C(da,E.Location_ShowLocation),"location.showLocation",[R],A)},n.isSupported=b}(fi||(fi={}));var dr,mi,pr=function(b,R,A,T){return new(A||(A=Promise))(function(_e,Me){function we(ke){try{ve(T.next(ke))}catch(We){Me(We)}}function Ce(ke){try{ve(T.throw(ke))}catch(We){Me(We)}}function ve(ke){ke.done?_e(ke.value):function(_e){return _e instanceof A?_e:new A(function(Me){Me(_e)})}(ke.value).then(we,Ce)}ve((T=T.apply(b,R||[])).next())})};(function(n){var b,z,ve;function Ce(ve,ke){Pe(K,j.sidePanel,j.meetingStage),bt("meeting.updateMicState",[ve,ke])}(ve=b||(b={}))[ve.HostInitiated=0]="HostInitiated",ve[ve.AppInitiated=1]="AppInitiated",ve[ve.AppDeclinedToChange=2]="AppDeclinedToChange",ve[ve.AppFailedToChange=3]="AppFailedToChange",function(ve){ve.like="like",ve.heart="heart",ve.laugh="laugh",ve.surprised="surprised",ve.applause="applause"}(n.MeetingReactionType||(n.MeetingReactionType={})),function(ve){ve.Unknown="Unknown",ve.Adhoc="Adhoc",ve.Scheduled="Scheduled",ve.Recurring="Recurring",ve.Broadcast="Broadcast",ve.MeetNow="MeetNow"}(n.MeetingType||(n.MeetingType={})),function(ve){ve.OneOnOneCall="oneOnOneCall",ve.GroupCall="groupCall"}(n.CallType||(n.CallType={})),function(ve){ve.Collaborative="Collaborative",ve.ScreenShare="ScreenShare"}(z=n.SharingProtocol||(n.SharingProtocol={})),n.getIncomingClientAudioState=function(ve){if(!ve)throw new Error("[get incoming client audio state] Callback cannot be null");Pe(K,j.sidePanel,j.meetingStage),bt("getIncomingClientAudioState",ve)},n.toggleIncomingClientAudio=function(ve){if(!ve)throw new Error("[toggle incoming client audio] Callback cannot be null");Pe(K,j.sidePanel,j.meetingStage),bt("toggleIncomingClientAudio",ve)},n.getMeetingDetails=function(ve){if(!ve)throw new Error("[get meeting details] Callback cannot be null");Pe(K,j.sidePanel,j.meetingStage,j.settings,j.content),bt("meeting.getMeetingDetails",ve)},n.getAuthenticationTokenForAnonymousUser=function(ve){if(!ve)throw new Error("[get Authentication Token For AnonymousUser] Callback cannot be null");Pe(K,j.sidePanel,j.meetingStage,j.task),bt("meeting.getAuthenticationTokenForAnonymousUser",ve)},n.getLiveStreamState=function(ve){if(!ve)throw new Error("[get live stream state] Callback cannot be null");Pe(K,j.sidePanel),bt("meeting.getLiveStreamState",ve)},n.requestStartLiveStreaming=function(ve,ke,We){if(!ve)throw new Error("[request start live streaming] Callback cannot be null");Pe(K,j.sidePanel),bt("meeting.requestStartLiveStreaming",[ke,We],ve)},n.requestStopLiveStreaming=function(ve){if(!ve)throw new Error("[request stop live streaming] Callback cannot be null");Pe(K,j.sidePanel),bt("meeting.requestStopLiveStreaming",ve)},n.registerLiveStreamChangedHandler=function(ve){if(!ve)throw new Error("[register live stream changed handler] Handler cannot be null");Pe(K,j.sidePanel),xt("meeting.liveStreamChanged",ve)},n.shareAppContentToStage=function(ve,ke,We){if(void 0===We&&(We={sharingProtocol:z.Collaborative}),!ve)throw new Error("[share app content to stage] Callback cannot be null");Pe(K,j.sidePanel,j.meetingStage),bt("meeting.shareAppContentToStage",[ke,We],ve)},n.getAppContentStageSharingCapabilities=function(ve){if(!ve)throw new Error("[get app content stage sharing capabilities] Callback cannot be null");Pe(K,j.sidePanel,j.meetingStage),bt("meeting.getAppContentStageSharingCapabilities",ve)},n.stopSharingAppContentToStage=function(ve){if(!ve)throw new Error("[stop sharing app content to stage] Callback cannot be null");Pe(K,j.sidePanel,j.meetingStage),bt("meeting.stopSharingAppContentToStage",ve)},n.getAppContentStageSharingState=function(ve){if(!ve)throw new Error("[get app content stage sharing state] Callback cannot be null");Pe(K,j.sidePanel,j.meetingStage),bt("meeting.getAppContentStageSharingState",ve)},n.registerSpeakingStateChangeHandler=function(ve){if(!ve)throw new Error("[registerSpeakingStateChangeHandler] Handler cannot be null");Pe(K,j.sidePanel,j.meetingStage),xt("meeting.speakingStateChanged",ve)},n.registerRaiseHandStateChangedHandler=function(ve){if(!ve)throw new Error("[registerRaiseHandStateChangedHandler] Handler cannot be null");Pe(K,j.sidePanel,j.meetingStage),xt("meeting.raiseHandStateChanged",ve)},n.registerMeetingReactionReceivedHandler=function(ve){if(!ve)throw new Error("[registerMeetingReactionReceivedHandler] Handler cannot be null");Pe(K,j.sidePanel,j.meetingStage),xt("meeting.meetingReactionReceived",ve)},function(ve){ve.setOptions=function(ke){Pe(K,j.sidePanel),ke.contentUrl&&new URL(ke.contentUrl),bt("meeting.appShareButton.setOptions",[ke])}}(n.appShareButton||(n.appShareButton={})),n.requestAppAudioHandling=function(ve,ke){if(!ke)throw new Error("[requestAppAudioHandling] Callback response cannot be null");if(!ve.micMuteStateChangedCallback)throw new Error("[requestAppAudioHandling] Callback Mic mute state handler cannot be null");Pe(K,j.sidePanel,j.meetingStage),ve.isAppHandlingAudio?function(ve,ke){var We=this;bt("meeting.requestAppAudioHandling",[ve.isAppHandlingAudio],function(mt,Ft){if(mt&&null!=Ft)throw new Error("[requestAppAudioHandling] Callback response - both parameters cannot be set");if(mt)throw new Error("[requestAppAudioHandling] Callback response - SDK error "+mt.errorCode+" "+mt.message);if("boolean"!=typeof Ft)throw new Error("[requestAppAudioHandling] Callback response - isHostAudioless must be a boolean");xt("meeting.micStateChanged",function(_t){return pr(We,void 0,void 0,a().mark(function Qe(){var Ct;return a().wrap(function(ft){for(;;)switch(ft.prev=ft.next){case 0:return ft.prev=0,ft.next=3,ve.micMuteStateChangedCallback(_t);case 3:Ce(Ct=ft.sent,Ct.isMicMuted===_t.isMicMuted?b.HostInitiated:b.AppDeclinedToChange),ft.next=10;break;case 7:ft.prev=7,ft.t0=ft.catch(0),Ce(_t,b.AppFailedToChange);case 10:case"end":return ft.stop()}},Qe,null,[[0,7]])}))}),xt("meeting.audioDeviceSelectionChanged",function(_t){var Qe;null===(Qe=ve.audioDeviceSelectionChangedCallback)||void 0===Qe||Qe.call(ve,_t)}),ke(Ft)})}(ve,ke):function(ve,ke){bt("meeting.requestAppAudioHandling",[ve.isAppHandlingAudio],function(We,mt){if(We&&null!=mt)throw new Error("[requestAppAudioHandling] Callback response - both parameters cannot be set");if(We)throw new Error("[requestAppAudioHandling] Callback response - SDK error "+We.errorCode+" "+We.message);if("boolean"!=typeof mt)throw new Error("[requestAppAudioHandling] Callback response - isHostAudioless must be a boolean");Ln("meeting.micStateChanged")&&en("meeting.micStateChanged"),Ln("meeting.audioDeviceSelectionChanged")&&en("meeting.audioDeviceSelectionChanged"),ke(mt)})}(ve,ke)},n.updateMicState=function(ve){Ce(ve,b.AppInitiated)}})(dr||(dr={})),function(n){function b(){return!(!Pe(K)||!K.supports.monetization)}n.openPurchaseExperience=function(R,A){var T,z;return"function"==typeof R?(T=R,z=A):z=R,Pe(K,j.content),function(n,b){for(var R=arguments.length,A=new Array(R>2?R-2:0),T=2;T<R;T++)A[T-2]=arguments[T];var z=n.apply(void 0,A);return z.then(function(_e){b&&b(null,_e)}).catch(function(_e){b&&b(_e,null)}),z}(function(){return new Promise(function(_e){if(!b())throw u;_e(cn("monetization.openPurchaseExperience",z))})},T)},n.isSupported=b}(mi||(mi={}));var hr,gr=k.V_2;!function(n){function b(){return!(!Pe(K)||!K.supports.calendar)}n.openCalendarItem=function(R){return new Promise(function(A){if(Pe(K,j.content),!b())throw new Error("Not supported");if(!R.itemId||!R.itemId.trim())throw new Error("Must supply an itemId to openCalendarItem");A(ro(C(gr,E.Calendar_OpenCalendarItem),"calendar.openCalendarItem",R))})},n.composeMeeting=function(R){return new Promise(function(A){if(Pe(K,j.content),!b())throw new Error("Not supported");A(K.isLegacyTeams?ao("executeDeepLink",function(n,b,R,A,T){var z=void 0===n?"":"attendees="+n.map(function(ve){return encodeURIComponent(ve)}).join(","),_e=void 0===b?"":"&startTime="+encodeURIComponent(b),Me=void 0===R?"":"&endTime="+encodeURIComponent(R),we=void 0===A?"":"&subject="+encodeURIComponent(A),Ce=void 0===T?"":"&content="+encodeURIComponent(T);return G+"://"+Z+"/l/meeting/new?"+z+_e+Me+we+Ce}(R.attendees,R.startTime,R.endTime,R.subject,R.content)):ro(C(gr,E.Calendar_ComposeMeeting),"calendar.composeMeeting",R))})},n.isSupported=b}(hr||(hr={}));var fr,Lo,mr,vr,pa=k.V_2;(function(n){function b(){return!(!Pe(K)||!K.supports.mail)}var A;n.openMailItem=function(A){return new Promise(function(T){if(Pe(K,j.content),!b())throw new Error("Not supported");if(!A.itemId||!A.itemId.trim())throw new Error("Must supply an itemId to openMailItem");T(ro(C(pa,E.Mail_OpenMailItem),"mail.openMailItem",A))})},n.composeMail=function(A){return new Promise(function(T){if(Pe(K,j.content),!b())throw new Error("Not supported");T(ro(C(pa,E.Mail_ComposeMail),"mail.composeMail",A))})},n.isSupported=b,(A=n.ComposeMailType||(n.ComposeMailType={})).New="new",A.Reply="reply",A.ReplyAll="replyAll",A.Forward="forward"})(fr||(fr={})),function(n){function b(){Xe().print()}function R(z,_e){!Qt(z)&&Pe(K),!Qt(z)&&_e&&_e(),function(n){zt.loadHandler=n,!Qt(n)&&Bt(C(k.V_2,E.RegisterHandler),"registerHandler",["load"])}(z)}function A(z,_e){!Qt(z)&&Pe(K),!Qt(z)&&_e&&_e(),function(n){zt.beforeUnloadHandler=n,!Qt(n)&&Bt(C(k.V_2,E.RegisterHandler),"registerHandler",["beforeUnload"])}(z)}function T(){return!(!Pe(K)||!K.supports.teamsCore)}n.enablePrintCapability=function(){if(!J.printCapabilityEnabled){if(Pe(K),!T())throw u;J.printCapabilityEnabled=!0,document.addEventListener("keydown",function(z){(z.ctrlKey||z.metaKey)&&80===z.keyCode&&(b(),z.cancelBubble=!0,z.preventDefault(),z.stopImmediatePropagation())})}},n.print=b,n.registerOnLoadHandler=function(z){R(z,function(){if(!Qt(z)&&!T())throw u})},n.registerOnLoadHandlerHelper=R,n.registerBeforeUnloadHandler=function(z){A(z,function(){if(!Qt(z)&&!T())throw u})},n.registerBeforeUnloadHandlerHelper=A,n.isSupported=T}(Lo||(Lo={})),function(n){function b(A){return new Promise(function(T){if(!xn("2.0.0"))throw{errorCode:ze.OLD_PLATFORM};if(!function(n){return!(n&&(n.title&&"string"!=typeof n.title||n.setSelected&&"object"!=typeof n.setSelected||n.openOrgWideSearchInChatOrChannel&&"boolean"!=typeof n.openOrgWideSearchInChatOrChannel||n.singleSelect&&"boolean"!=typeof n.singleSelect))}(A))throw{errorCode:ze.INVALID_ARGUMENTS};if(!R())throw u;T(cn("people.selectPeople",A))})}function R(){return!(!Pe(K)||!K.supports.people)}n.selectPeople=function(A,T){var z,_e,Me;return Pe(K,j.content,j.task,j.settings),"function"==typeof A?(_e=(z=[A,T])[0],Me=z[1]):Me=A,function(n,b){for(var R=arguments.length,A=new Array(R>2?R-2:0),T=2;T<R;T++)A[T-2]=arguments[T];var z=n.apply(void 0,A);return z.then(function(_e){b&&b(void 0,_e)}).catch(function(_e){b&&b(_e)}),z}(b,_e,Me)},n.isSupported=R}(mr||(mr={})),function(n){n.showProfile=function(b){return Pe(K,j.content),new Promise(function(R){var A=function(n){return n?n.modality&&"string"!=typeof n.modality?[!1,"modality must be a string"]:n.targetElementBoundingRect&&"object"==typeof n.targetElementBoundingRect?n.triggerType&&"string"==typeof n.triggerType?function(n){return n?n.displayName&&"string"!=typeof n.displayName?[!1,"displayName must be a string"]:n.identifiers&&"object"==typeof n.identifiers?n.identifiers.AadObjectId||n.identifiers.Smtp||n.identifiers.Upn?n.identifiers.AadObjectId&&"string"!=typeof n.identifiers.AadObjectId?[!1,"AadObjectId identifier must be a string"]:n.identifiers.Smtp&&"string"!=typeof n.identifiers.Smtp?[!1,"Smtp identifier must be a string"]:n.identifiers.Upn&&"string"!=typeof n.identifiers.Upn?[!1,"Upn identifier must be a string"]:[!0,void 0]:[!1,"at least one valid identifier must be provided"]:[!1,"persona identifiers object must be provided"]:[!1,"persona object must be provided"]}(n.persona):[!1,"triggerType must be a valid string"]:[!1,"targetElementBoundingRect must be a DOMRect"]:[!1,"A request object is required"]}(b);if(!A[0])throw{errorCode:ze.INVALID_ARGUMENTS,message:A[1]};R(cn("profile.showProfile",{modality:b.modality,persona:b.persona,triggerType:b.triggerType,targetRectangle:{x:b.targetElementBoundingRect.x,y:b.targetElementBoundingRect.y,width:b.targetElementBoundingRect.width,height:b.targetElementBoundingRect.height}}))})},n.isSupported=function(){return!(!Pe(K)||!K.supports.profile)}}(vr||(vr={}));var Fo,Mo=function(b,R,A,T){return new(A||(A=Promise))(function(_e,Me){function we(ke){try{ve(T.next(ke))}catch(We){Me(We)}}function Ce(ke){try{ve(T.throw(ke))}catch(We){Me(We)}}function ve(ke){ke.done?_e(ke.value):function(_e){return _e instanceof A?_e:new A(function(Me){Me(_e)})}(ke.value).then(we,Ce)}ve((T=T.apply(b,R||[])).next())})};function ha(n,b,R,A){var T,z;return Mo(this,void 0,void 0,a().mark(function _e(){var Me;return a().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Me=va(),!it()&&(null===(z=null===(T=window.chrome)||void 0===T?void 0:T.webview)||void 0===z||z.registerTextureStream(n,Me)),Ce.t0=zi,Ce.next=5,ma(n,R,A);case 5:Ce.t1=Ce.sent,Ce.t2=new _r(R,b),Ce.t3=Me.writable,(0,Ce.t0)(Ce.t1,Ce.t2,Ce.t3);case 9:case"end":return Ce.stop()}},_e)}))}function fa(n,b,R,A){var T,z;return Mo(this,void 0,void 0,a().mark(function _e(){var Me;return a().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Me=va(),!it()&&(null===(z=null===(T=window.chrome)||void 0===T?void 0:T.webview)||void 0===z||z.registerTextureStream(n,Me)),Ce.t0=zi,Ce.next=5,ma(n,R,A);case 5:Ce.t1=Ce.sent,Ce.t2=new qa(R,b),Ce.t3=Me.writable,(0,Ce.t0)(Ce.t1,Ce.t2,Ce.t3);case 9:case"end":return Ce.stop()}},_e)}))}function ma(n,b,R){return Mo(this,void 0,void 0,a().mark(function A(){var T,z;return a().wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:if(!it()){Me.next=2;break}throw u;case 2:return T=Xe().chrome,Me.prev=3,R?.reportGettingTextureStream(n),Me.next=7,T.webview.getTextureStream(n);case 7:if(0!==(z=Me.sent.getVideoTracks()).length){Me.next=10;break}throw new Error("No video track in stream "+n);case 10:return Me.abrupt("return",(R?.reportTextureStreamAcquired(),z[0]));case 13:throw Me.prev=13,Me.t0=Me.catch(3),b("Failed to get video track from stream "+n+", error: "+Me.t0),new Error("Internal error: can't get video track from stream "+n);case 16:case"end":return Me.stop()}},A,null,[[3,13]])}))}function va(){if(it())throw u;var n=window.MediaStreamTrackGenerator;if(!n)throw u;return new n({kind:"video"})}function zi(n,b,R){new(Xe().MediaStreamTrackProcessor)({track:n}).readable.pipeThrough(new TransformStream(b)).pipeTo(R)}!function(n){n.TimestampIsNull="timestamp of the original video frame is null",n.UnsupportedVideoFramePixelFormat="Unsupported video frame pixel format"}(Fo||(Fo={}));var _r=function(b,R){var A=this;this.notifyError=b,this.videoFrameHandler=R,this.transform=function(T,z){return Mo(A,void 0,void 0,a().mark(function _e(){var Me,we,Ce;return a().wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:if(null===(Me=T.timestamp)){ke.next=15;break}return ke.prev=2,ke.next=5,this.videoFrameHandler({videoFrame:T});case 5:we=ke.sent,Ce=new VideoFrame(we,{timestamp:Me}),z.enqueue(Ce),T.close(),we.close(),ke.next=13;break;case 10:ke.prev=10,ke.t0=ke.catch(2),T.close(),this.notifyError(ke.t0);case 13:ke.next=16;break;case 15:this.notifyError(Fo.TimestampIsNull);case 16:case"end":return ke.stop()}},_e,this,[[2,10]])}))}},Ya=function(){function n(b,R){if(this.headerBuffer=b,this.notifyError=R,this.ONE_TEXTURE_INPUT_ID=1869900081,this.INVALID_HEADER_ERROR="Invalid video frame header",this.UNSUPPORTED_LAYOUT_ERROR="Unsupported texture layout",this.headerDataView=new Uint32Array(b),this.headerDataView.length<8)throw this.notifyError(this.INVALID_HEADER_ERROR),new Error(this.INVALID_HEADER_ERROR);if(this.headerDataView[0]!==this.ONE_TEXTURE_INPUT_ID)throw this.notifyError(this.UNSUPPORTED_LAYOUT_ERROR),new Error(this.UNSUPPORTED_LAYOUT_ERROR)}return r(n,[{key:"oneTextureLayoutId",get:function(){return this.headerDataView[0]}},{key:"version",get:function(){return this.headerDataView[1]}},{key:"frameRowOffset",get:function(){return this.headerDataView[2]}},{key:"frameFormat",get:function(){return this.headerDataView[3]}},{key:"frameWidth",get:function(){return this.headerDataView[4]}},{key:"frameHeight",get:function(){return this.headerDataView[5]}},{key:"multiStreamHeaderRowOffset",get:function(){return this.headerDataView[6]}},{key:"multiStreamCount",get:function(){return this.headerDataView[7]}}]),n}(),Za=function(){function n(b,R){this.metadataMap=new Map,this.AUDIO_INFERENCE_RESULT_STREAM_ID=828664161;for(var A=new Uint32Array(b),T=0,z=0;T<R;T++){var _e=A[z++],Me=A[z++],we=A[z++],Ce=new Uint8Array(b,Me,we);this.metadataMap.set(_e,Ce)}}return r(n,[{key:"audioInferenceResult",get:function(){return this.metadataMap.get(this.AUDIO_INFERENCE_RESULT_STREAM_ID)}}]),n}(),qa=function(b,R){var A=this;this.notifyError=b,this.videoFrameHandler=R,this.shouldDiscardAudioInferenceResult=!1,this.transform=function(T,z){return Mo(A,void 0,void 0,a().mark(function _e(){var Me,we,Ce,ve,We,mt,Ft;return a().wrap(function(Qe){for(;;)switch(Qe.prev=Qe.next){case 0:if(null===(Me=T.timestamp)){Qe.next=22;break}return Qe.prev=2,Qe.next=5,this.extractVideoFrameAndMetadata(T);case 5:return Ce=(we=Qe.sent).videoFrame,We=(void 0===(ve=we.metadata)?{}:ve).audioInferenceResult,Qe.next=12,this.videoFrameHandler({videoFrame:Ce,audioInferenceResult:We});case 12:mt=Qe.sent,Ft=new VideoFrame(mt,{timestamp:Me}),z.enqueue(Ft),Ce.close(),T.close(),mt.close(),Qe.next=20;break;case 17:Qe.prev=17,Qe.t0=Qe.catch(2),T.close(),this.notifyError(Qe.t0);case 20:Qe.next=23;break;case 22:this.notifyError(Fo.TimestampIsNull);case 23:case"end":return Qe.stop()}},_e,this,[[2,17]])}))},this.extractVideoFrameAndMetadata=function(T){return Mo(A,void 0,void 0,a().mark(function z(){var _e,Me,we,Ce,ve,ke;return a().wrap(function(mt){for(;;)switch(mt.prev=mt.next){case 0:if(!it()){mt.next=2;break}throw u;case 2:if("NV12"===T.format){mt.next=4;break}throw this.notifyError(Fo.UnsupportedVideoFramePixelFormat),new Error(Fo.UnsupportedVideoFramePixelFormat);case 4:return _e={x:0,y:0,width:T.codedWidth,height:2},Me=new ArrayBuffer(_e.width*_e.height*3/2),mt.next=7,T.copyTo(Me,{rect:_e});case 7:return we=new Ya(Me,this.notifyError),Ce={x:0,y:we.multiStreamHeaderRowOffset,width:T.codedWidth,height:T.codedHeight-we.multiStreamHeaderRowOffset},ve=new ArrayBuffer(Ce.width*Ce.height*3/2),mt.next=10,T.copyTo(ve,{rect:Ce});case 10:return ke=new Za(ve,we.multiStreamCount),mt.abrupt("return",{videoFrame:new VideoFrame(T,{timestamp:T.timestamp,visibleRect:{x:0,y:we.frameRowOffset,width:we.frameWidth,height:we.frameHeight}}),metadata:{audioInferenceResult:this.shouldDiscardAudioInferenceResult?void 0:ke.audioInferenceResult}});case 12:case"end":return mt.stop()}},z,this)}))},xt("video.mediaStream.audioInferenceDiscardStatusChange",function(T){A.shouldDiscardAudioInferenceResult=T.discardAudioInferenceResult})};function ho(n,b){return function(R,A){b?.reportApplyingVideoEffect(R||"",A),n(R,A).then(function(){b?.reportVideoEffectChanged(R||"",A),bt("video.videoEffectReadiness",[!0,R,void 0,A])}).catch(function(T){bt("video.videoEffectReadiness",[!1,R,T in wo.EffectFailureReason?T:wo.EffectFailureReason.InitializationFailure,A])})}}var fo=function(){function n(){}return n.setTimeout=function(R,A){var T=performance.now(),z=q();return n.setTimeoutCallbacks[z]={callback:R,timeoutInMs:A,startedAtInMs:T},z},n.clearTimeout=function(R){delete n.setTimeoutCallbacks[R]},n.setInterval=function(R,A){n.setTimeout(function T(){R(),n.setTimeout(T,A)},A)},n.tick=function(){var R=performance.now(),A=[];for(var T in n.setTimeoutCallbacks){var z=n.setTimeoutCallbacks[T];R-z.startedAtInMs>=z.timeoutInMs&&A.push(T)}for(var _e=0,Me=A;_e<Me.length;_e++){var we=Me[_e];n.setTimeoutCallbacks[we].callback(),delete n.setTimeoutCallbacks[we]}},n}();fo.setTimeoutCallbacks={};var Hi=function(){function n(R,A){this.reportStatisticsResult=A,this.sampleCount=0,this.distributionBins=new Uint32Array(R)}var b=n.prototype;return b.processStarts=function(A,T,z,_e){fo.tick(),this.suitableForThisSession(A,T,z,_e)||this.reportAndResetSession(this.getStatistics(),A,_e,T,z),this.start()},b.processEnds=function(){var A=performance.now()-this.frameProcessingStartedAt,T=Math.floor(Math.max(0,Math.min(this.distributionBins.length-1,A)));this.distributionBins[T]+=1,this.sampleCount+=1},b.getStatistics=function(){return this.currentSession?{effectId:this.currentSession.effectId,effectParam:this.currentSession.effectParam,frameHeight:this.currentSession.frameHeight,frameWidth:this.currentSession.frameWidth,duration:performance.now()-this.currentSession.startedAtInMs,sampleCount:this.sampleCount,distributionBins:this.distributionBins.slice()}:null},b.start=function(){this.frameProcessingStartedAt=performance.now()},b.suitableForThisSession=function(A,T,z,_e){return this.currentSession&&this.currentSession.effectId===A&&this.currentSession.effectParam===_e&&this.currentSession.frameWidth===T&&this.currentSession.frameHeight===z},b.reportAndResetSession=function(A,T,z,_e,Me){var we=this;A&&this.reportStatisticsResult(A),this.resetCurrentSession(this.getNextTimeout(T,this.currentSession),T,z,_e,Me),this.timeoutId&&fo.clearTimeout(this.timeoutId),this.timeoutId=fo.setTimeout(function(){return we.reportAndResetSession(we.getStatistics(),T,z,_e,Me)}.bind(this),this.currentSession.timeoutInMs)},b.resetCurrentSession=function(A,T,z,_e,Me){this.currentSession={startedAtInMs:performance.now(),timeoutInMs:A,effectId:T,effectParam:z,frameWidth:_e,frameHeight:Me},this.sampleCount=0,this.distributionBins.fill(0)},b.getNextTimeout=function(A,T){return T&&T.effectId===A?Math.min(n.maxSessionTimeoutInMs,2*T.timeoutInMs):n.initialSessionTimeoutInMs},n}();Hi.initialSessionTimeoutInMs=1e3,Hi.maxSessionTimeoutInMs=3e4;var Wi=function(){function n(R){var A=this;this.reportPerformanceEvent=R,this.isFirstFrameProcessed=!1,this.frameProcessTimeLimit=100,this.frameProcessingStartedAt=0,this.frameProcessingTimeCost=0,this.processedFrameCount=0,this.performanceStatistics=new Hi(n.distributionBinSize,function(T){return A.reportPerformanceEvent("video.performance.performanceDataGenerated",[T])})}var b=n.prototype;return b.startMonitorSlowFrameProcessing=function(){var A=this;fo.setInterval(function(){if(0!==A.processedFrameCount){var T=A.frameProcessingTimeCost/A.processedFrameCount;T>A.frameProcessTimeLimit&&A.reportPerformanceEvent("video.performance.frameProcessingSlow",[T]),A.frameProcessingTimeCost=0,A.processedFrameCount=0}},n.calculateFPSInterval)},b.setFrameProcessTimeLimit=function(A){this.frameProcessTimeLimit=A},b.reportApplyingVideoEffect=function(A,T){var z,_e;(null===(z=this.applyingEffect)||void 0===z?void 0:z.effectId)===A&&(null===(_e=this.applyingEffect)||void 0===_e?void 0:_e.effectParam)===T||(this.applyingEffect={effectId:A,effectParam:T},this.appliedEffect=void 0)},b.reportVideoEffectChanged=function(A,T){void 0===this.applyingEffect||this.applyingEffect.effectId!==A&&this.applyingEffect.effectParam!==T||(this.appliedEffect={effectId:A,effectParam:T},this.applyingEffect=void 0,this.isFirstFrameProcessed=!1)},b.reportStartFrameProcessing=function(A,T){fo.tick(),this.appliedEffect&&(this.frameProcessingStartedAt=performance.now(),this.performanceStatistics.processStarts(this.appliedEffect.effectId,A,T,this.appliedEffect.effectParam))},b.reportFrameProcessed=function(){var A;this.appliedEffect&&(this.processedFrameCount++,this.frameProcessingTimeCost+=performance.now()-this.frameProcessingStartedAt,this.performanceStatistics.processEnds(),this.isFirstFrameProcessed||(this.isFirstFrameProcessed=!0,this.reportPerformanceEvent("video.performance.firstFrameProcessed",[Date.now(),this.appliedEffect.effectId,null===(A=this.appliedEffect)||void 0===A?void 0:A.effectParam])))},b.reportGettingTextureStream=function(A){this.gettingTextureStreamStartedAt=performance.now(),this.currentStreamId=A},b.reportTextureStreamAcquired=function(){if(void 0!==this.gettingTextureStreamStartedAt){var A=performance.now()-this.gettingTextureStreamStartedAt;this.reportPerformanceEvent("video.performance.textureStreamAcquired",[this.currentStreamId,A])}},n}();Wi.distributionBinSize=1e3,Wi.calculateFPSInterval=1e3;var wo,Cr,yr,Xo,br=function(b,R,A,T){return new(A||(A=Promise))(function(_e,Me){function we(ke){try{ve(T.next(ke))}catch(We){Me(We)}}function Ce(ke){try{ve(T.throw(ke))}catch(We){Me(We)}}function ve(ke){ke.done?_e(ke.value):function(_e){return _e instanceof A?_e:new A(function(Me){Me(_e)})}(ke.value).then(we,Ce)}ve((T=T.apply(b,R||[])).next())})};(function(n){var _t,b=it()?void 0:new Wi(bt);function _e(_t){bt("video.notifyError",[_t])}function Me(){return Pe(K)&&!!K.supports.video&&(!!K.supports.video.mediaStream||!!K.supports.video.sharedFrame)}function Ce(_t,Qe){var Ct=this;return function(Et){return br(Ct,void 0,void 0,a().mark(function ft(){var kt,Kt;return a().wrap(function(wn){for(;;)switch(wn.prev=wn.next){case 0:return kt=Et.videoFrame,Qe?.reportStartFrameProcessing(kt.codedWidth,kt.codedHeight),wn.next=4,_t(Et);case 4:return Kt=wn.sent,wn.abrupt("return",(Qe?.reportFrameProcessed(),Kt));case 6:case"end":return wn.stop()}},ft)}))}}function ve(_t,Qe){if(Pe(K,j.sidePanel),!Me()||!Ft())throw u;xt("video.newVideoFrame",function(Ct){if(Ct){var Et=Ct.timestamp;b?.reportStartFrameProcessing(Ct.width,Ct.height),_t(function(_t){if("videoFrameBuffer"in _t)return _t;var Qe=_t.data,Ct=function(b,R){var A={};for(var T in b)Object.prototype.hasOwnProperty.call(b,T)&&R.indexOf(T)<0&&(A[T]=b[T]);if(null!=b&&"function"==typeof Object.getOwnPropertySymbols){var z=0;for(T=Object.getOwnPropertySymbols(b);z<T.length;z++)R.indexOf(T[z])<0&&Object.prototype.propertyIsEnumerable.call(b,T[z])&&(A[T[z]]=b[T[z]])}return A}(_t,["data"]);return Object.assign(Object.assign({},Ct),{videoFrameBuffer:Qe})}(Ct),function(){b?.reportFrameProcessed(),function(_t){bt("video.videoFrameProcessed",[_t])}(Et)},_e)}},!1),bt("video.registerForVideoFrame",[Qe])}function We(){var _t;return Pe(K,j.sidePanel)&&function(){var _t,Qe,Ct,Et;return!(null===(Qe=null===(_t=Xe().chrome)||void 0===_t?void 0:_t.webview)||void 0===Qe||!Qe.getTextureStream||null===(Et=null===(Ct=Xe().chrome)||void 0===Ct?void 0:Ct.webview)||void 0===Et||!Et.registerTextureStream)}()&&!(null===(_t=K.supports.video)||void 0===_t||!_t.mediaStream)}function Ft(){var _t;return Pe(K,j.sidePanel)&&!(null===(_t=K.supports.video)||void 0===_t||!_t.sharedFrame)}(n.VideoFrameFormat||(n.VideoFrameFormat={})).NV12="NV12",(_t=n.EffectChangeType||(n.EffectChangeType={})).EffectChanged="EffectChanged",_t.EffectDisabled="EffectDisabled",function(_t){_t.InvalidEffectId="InvalidEffectId",_t.InitializationFailure="InitializationFailure"}(n.EffectFailureReason||(n.EffectFailureReason={})),n.registerForVideoFrame=function(_t){if(Pe(K,j.sidePanel),!Me())throw u;if(!_t.videoFrameHandler||!_t.videoBufferHandler)throw new Error("Both videoFrameHandler and videoBufferHandler must be provided");if(xt("video.setFrameProcessTimeLimit",function(Qe){return b?.setFrameProcessTimeLimit(Qe.timeLimit)},!1),We())!function(_t,Qe){var Ct=this;if(Pe(K,j.sidePanel),!Me()||!We())throw u;xt("video.startVideoExtensibilityVideoStream",function(Et){return br(Ct,void 0,void 0,a().mark(function ft(){var kt,Kt;return a().wrap(function(wn){for(;;)switch(wn.prev=wn.next){case 0:return kt=Et.streamId,Kt=Ce(_t,b),wn.next=3,ha(kt,Kt,_e,b);case 3:case"end":return wn.stop()}},ft)}))},!1),bt("video.mediaStream.registerForVideoFrame",[Qe])}(_t.videoFrameHandler,_t.config);else{if(!Ft())throw u;ve(_t.videoBufferHandler,_t.config)}b?.startMonitorSlowFrameProcessing()},n.notifySelectedVideoEffectChanged=function(_t,Qe){if(Pe(K,j.sidePanel),!Me())throw u;bt("video.videoEffectChanged",[_t,Qe])},n.registerForVideoEffect=function(_t){if(Pe(K,j.sidePanel),!Me())throw u;xt("video.effectParameterChange",ho(_t,b),!1),bt("video.registerForVideoEffect")},n.isSupported=Me})(wo||(wo={})),function(n){var b="search.queryChange",R="search.queryClose",A="search.queryExecute";function T(){return!(!Pe(K)||!K.supports.search)}n.registerHandlers=function(z,_e,Me){if(Pe(K,j.content),!T())throw u;xt(R,z),xt(A,_e),Me&&xt(b,Me)},n.unregisterHandlers=function(){if(Pe(K,j.content),!T())throw u;bt("search.unregister"),en(b),en(R),en(A)},n.isSupported=T,n.closeSearch=function(){return new Promise(function(z){if(Pe(K,j.content),!T())throw new Error("Not supported");z(ao("search.closeSearch"))})}}(Cr||(Cr={})),function(n){function b(_e){return new Promise(function(Me){if(!z())throw u;Me(cn(n.SharingAPIMessages.shareWebContent,_e))})}function z(){return!(!Pe(K)||!K.supports.sharing)}n.SharingAPIMessages={shareWebContent:"sharing.shareWebContent"},n.shareWebContent=function(_e,Me){try{(function(_e){if(!(_e&&_e.content&&_e.content.length))throw{errorCode:ze.INVALID_ARGUMENTS,message:"Shared content is missing"}})(_e),function(_e){if(_e.content.some(function(we){return!we.type}))throw{errorCode:ze.INVALID_ARGUMENTS,message:"Shared content type cannot be undefined"};if(_e.content.some(function(we){return we.type!==_e.content[0].type}))throw{errorCode:ze.INVALID_ARGUMENTS,message:"Shared content must be of the same type"}}(_e),function(_e){if("URL"!==_e.content[0].type)throw{errorCode:ze.INVALID_ARGUMENTS,message:"Content type is unsupported"};if(_e.content.some(function(we){return!we.url}))throw{errorCode:ze.INVALID_ARGUMENTS,message:"URLs are required for URL content types"}}(_e)}catch(we){return V(function(){return Promise.reject(we)},Me)}return Pe(K,j.content,j.sidePanel,j.task,j.stage,j.meetingStage),V(b,Me,_e)},n.isSupported=z}(yr||(yr={})),function(n){var A;function R(){return!(!Pe(K)||!K.supports.stageView)}(A=n.StageViewOpenMode||(n.StageViewOpenMode={})).modal="modal",A.popout="popout",A.popoutWithChat="popoutWithChat",n.open=function(A){return new Promise(function(T){if(Pe(K,j.content),!R())throw u;if(!A)throw new Error("[stageView.open] Stage view params cannot be null");T(cn("stageView.open",A))})},n.isSupported=R}(Xo||(Xo={}));var ji,Ki,wr=function(b,R,A,T){return new(A||(A=Promise))(function(_e,Me){function we(ke){try{ve(T.next(ke))}catch(We){Me(We)}}function Ce(ke){try{ve(T.throw(ke))}catch(We){Me(We)}}function ve(ke){ke.done?_e(ke.value):function(_e){return _e instanceof A?_e:new A(function(Me){Me(_e)})}(ke.value).then(we,Ce)}ve((T=T.apply(b,R||[])).next())})};(function(n){var A,T;(T=n.CameraRestriction||(n.CameraRestriction={}))[T.FrontOrRear=1]="FrontOrRear",T[T.FrontOnly=2]="FrontOnly",T[T.RearOnly=3]="RearOnly",function(T){T[T.Camera=1]="Camera",T[T.Gallery=2]="Gallery"}(n.Source||(n.Source={})),n.hasPermission=function(){if(Pe(K,j.content,j.task),!A.isSupported())throw u;return cn("permissions.has",Ke.Media)},n.requestPermission=function(){if(Pe(K,j.content,j.task),!A.isSupported())throw u;return cn("permissions.request",Ke.Media)},function(T){function z(){return!!(Pe(K)&&K.supports.visualMedia&&K.supports.visualMedia.image&&K.supports.permissions)}function _e(){if(!z())throw u}function Me(Ce){if(!Ce||Ce.maxVisualMediaCount>10||Ce.maxVisualMediaCount<1)throw U}function we(Ce,ve){if(ve.length>Ce)throw Q}T.captureImages=function(Ce){return wr(this,void 0,void 0,a().mark(function ve(){var ke;return a().wrap(function(mt){for(;;)switch(mt.prev=mt.next){case 0:return Pe(K,j.content,j.task),_e(),Me(Ce),mt.next=3,cn("visualMedia.image.captureImages",Ce);case 3:return mt.abrupt("return",(we(Ce.maxVisualMediaCount,ke=mt.sent),ke));case 5:case"end":return mt.stop()}},ve)}))},T.retrieveImages=function(Ce){return wr(this,void 0,void 0,a().mark(function ve(){var ke;return a().wrap(function(mt){for(;;)switch(mt.prev=mt.next){case 0:return Pe(K,j.content,j.task),_e(),Me(Ce),mt.next=3,cn("visualMedia.image.retrieveImages",Ce);case 3:return mt.abrupt("return",(we(Ce.maxVisualMediaCount,ke=mt.sent),ke));case 5:case"end":return mt.stop()}},ve)}))},T.isSupported=z}(A=n.image||(n.image={}))})(ji||(ji={})),function(n){function b(){return!(!Pe(K)||!K.supports.webStorage)}n.isWebStorageClearedOnUserLogOut=function(){return Pe(K),b()},n.isSupported=b}(Ki||(Ki={}));var $i,Po,Pr=k.V_2;(function(n){var b,A;function R(){return!(!Pe(K)||!K.supports.call)}(A=b=n.CallModalities||(n.CallModalities={})).Unknown="unknown",A.Audio="audio",A.Video="video",A.VideoBasedScreenSharing="videoBasedScreenSharing",A.Data="data",n.startCall=function(A){var T=C(Pr,E.Call_StartCall);return new Promise(function(z){var _e;if(Pe(K,j.content,j.task),!R())throw u;if(!K.isLegacyTeams)return Bt(T,"call.startCall",[A],z);z(Io(T,"executeDeepLink",function(n,b,R){if(0===n.length)throw new Error("Must have at least one target when creating a call deep link");var A="users="+n.map(function(_e){return encodeURIComponent(_e)}).join(","),T=void 0===b?"":"&withVideo="+encodeURIComponent(b),z=void 0===R?"":"&source="+encodeURIComponent(R);return G+"://"+Z+"/l/call/0/0?"+A+T+z}(A.targets,null===(_e=A.requestedModalities)||void 0===_e?void 0:_e.includes(b.Video),A.source)).then(function(Me){if(!Me)throw new Error("The call was not properly started");return Me}))})},n.isSupported=R})($i||($i={})),function(n){n.Messages=Te.Messages,n.FailedReason=Te.FailedReason,n.ExpectedFailureReason=Te.ExpectedFailureReason,n.notifyAppLoaded=function(){Te.notifyAppLoaded()},n.notifySuccess=function(){Te.notifySuccess()},n.notifyFailure=function(b){Te.notifyFailure(b)},n.notifyExpectedFailure=function(b){Te.notifyExpectedFailure(b)}}(Po||(Po={}));var Qi,Sr=i("thirdPartyCloudStorage");!function(n){var b=[],R={fileType:"",assembleAttachment:[]},A=!0,T=null;function z(Me){if(T)if(Me&&Me.error)T([],Me.error),T=null;else if(Me&&Me.fileChunk)try{A||0!==Me.fileChunk.chunkSequence||(Sr("Last chunk is not received or 'endOfFile' value for previous chunk was not set to true"),A=!0,T([],{errorCode:ze.INTERNAL_ERROR,message:"error occurred while receiving data"}),b=[],T=null);var we=ar(Me.fileChunk,Me.fileType);if(we?R.assembleAttachment.push(we):(Sr("Received a null assemble attachment for when decoding chunk sequence "+Me.fileChunk.chunkSequence+"; not including the chunk in the assembled file."),T?T([],{errorCode:ze.INTERNAL_ERROR,message:"error occurred while receiving data"}):T=null,b=[],T=null,A=!0),A=Me.fileChunk.endOfFile,Me.fileChunk.endOfFile){var Ce=ki(R.assembleAttachment,R.fileType);if(Ce){var ve=new File([Ce],Me.fileName,{type:Ce.type});b.push(ve)}Me.isLastFile&&T&&(T(b,Me.error),b=[],T=null,A=!0),R={fileType:"",assembleAttachment:[]}}}catch(ke){T&&(T([],{errorCode:ze.INTERNAL_ERROR,message:ke}),b=[],T=null,A=!0)}else T([],{errorCode:ze.INTERNAL_ERROR,message:"data received is null"}),b=[],T=null,A=!0}function _e(){return!(!Pe(K)||!K.supports.thirdPartyCloudStorage)}n.getDragAndDropFiles=function(Me,we){if(!we)throw new Error("[getDragAndDropFiles] Callback cannot be null");if(Me&&""!==Me){if(Pe(K,j.content,j.task),!_e())throw u;if(T)throw T=null,new Error("getDragAndDropFiles cannot be called twice");T=we,A=!0,bt("thirdPartyCloudStorage.getDragAndDropFiles",[Me],z)}else we([],{errorCode:ze.INVALID_ARGUMENTS})},n.isSupported=_e}(Qi||(Qi={}));var yn=k.V_1;function _a(n,b){yo(C(yn,E.PublicAPIs_Initialize),b).then(function(){n&&n()})}function Ca(){Lo.enablePrintCapability()}function Er(){Lo.print()}function ya(n){Hn(),Bt(C(yn,E.PublicAPIs_GetContext),"getContext",function(b){b.frameContext||(b.frameContext=J.frameContext),n(b)})}function lo(n){Ve(C(yn,E.PublicAPIs_RegisterOnThemeChangeHandlerHelper),n)}function vi(n){hn(C(yn,E.PublicAPIs_RegisterFullScreenHandler),"fullScreenChange",n,[])}function ba(n){hn(C(yn,E.PublicAPIs_RegisterAppButtonClickHandler),"appButtonClick",n,[j.content])}function Or(n){hn(C(yn,E.PublicAPIs_RegisterAppButtonHoverEnterHandler),"appButtonHoverEnter",n,[j.content])}function Ji(n){hn(C(yn,E.PublicAPIs_RegisterAppButtonHoverLeaveHandler),"appButtonHoverLeave",n,[j.content])}function Dr(n){$t.backStack.registerBackButtonHandlerHelper(C(yn,E.PublicAPIs_RegisterBackButtonHandler),n)}function Tr(n){Lo.registerOnLoadHandlerHelper(n)}function xr(n){Lo.registerBeforeUnloadHandlerHelper(n)}function Ir(n){hn(C(yn,E.PublicAPIs_RegisterFocusEnterHandler),"focusEnter",n,[])}function Rr(n){hn(C(yn,E.PublicAPIs_RegisterChangeSettingsHandler),"changeSettings",n,[j.content])}function Ar(n,b){Pe(K),Ht(C(yn,E.PublicAPIs_GetTabInstances),b).then(function(R){n(R)})}function Lr(n,b){Pe(K),sn(C(yn,E.PublicAPIs_GetMruTabInstances),b).then(function(R){n(R)})}function Fr(n){vn(C(yn,E.PublicAPIs_ShareDeepLink),{subPageId:n.subEntityId,subPageLabel:n.subEntityLabel,subPageWebUrl:n.subEntityWebUrl})}function Vr(n,b){Pe(K,j.content,j.sidePanel,j.settings,j.task,j.stage,j.meetingStage);var R=b??B();Le(C(yn,E.PublicAPIs_ExecuteDeepLink),n).then(function(){R(!0)}).catch(function(A){R(!1,A.message)})}function Gr(n){Mn(C(yn,E.PublicAPIs_SetFrameContext),n)}function kr(n,b,R){yo(C(yn,E.PublicAPIs_Initialize),R).then(function(){return b&&b()}),Mn(C(yn,E.PublicAPIs_SetFrameContext),n)}var _i,Yo=k.V_1;function Br(n){Ut(C(Yo,E.Navigation_ReturnFocus),n)}function Ur(n,b){Pe(K);var R=b??B();Rt(C(Yo,E.Navigation_NavigateToTab),n).then(function(){R(!0)}).catch(function(A){R(!1,A.message)})}function Nr(n,b){Pe(K,j.content,j.sidePanel,j.settings,j.remove,j.task,j.stage,j.meetingStage);var R=b??B();vt(C(Yo,E.Navigation_NavigateCrossDomain),n).then(function(){R(!0)}).catch(function(A){R(!1,A.message)})}function zr(n){Pe(K);var b=n??B();pt(C(Yo,E.Navigation_NavigateBack)).then(function(){b(!0)}).catch(function(R){b(!1,R.message)})}!function(n){n.setValidityState=function(b){$t.config.setValidityState(b)},n.getSettings=function(b){Pe(K,j.content,j.settings,j.remove,j.sidePanel),$t.getConfig().then(function(R){b(R)})},n.setSettings=function(b,R){Pe(K,j.content,j.settings,j.sidePanel);var A=R??B();$t.config.setConfig(b).then(function(){A(!0)}).catch(function(T){A(!1,T.message)})},n.registerOnSaveHandler=function(b){$t.config.registerOnSaveHandlerHelper(b)},n.registerOnRemoveHandler=function(b){$t.config.registerOnRemoveHandlerHelper(b)}}(_i||(_i={}));var yi,Zo,Ci=k.V_1;(function(n){function A(T){return T.height=T.height?T.height:g.Small,T.width=T.width?T.width:g.Small,T}n.startTask=function(T,z){var _e=C(Ci,E.Tasks_StartTask),Me=z?function(we){var Ce,ve;return z(null!==(Ce=we.err)&&void 0!==Ce?Ce:"",null!==(ve=we.result)&&void 0!==ve?ve:"")}:void 0;return void 0===T.card&&void 0===T.url||T.card?(Pe(K,j.content,j.sidePanel,j.meetingStage),Bt(_e,"tasks.startTask",[T],z)):void 0!==T.completionBotId?No(_e,function(T){if(void 0===T.url||void 0===T.completionBotId)throw new Error("Both url "+T.url+" and completionBotId "+T.completionBotId+" are required for bot url dialog. At least one is undefined.");return{url:T.url,size:{height:T.height?T.height:g.Small,width:T.width?T.width:g.Small},title:T.title,fallbackUrl:T.fallbackUrl,completionBotId:T.completionBotId}}(T),Me):Co(_e,function(T){if(void 0===T.url)throw new Error("url property of taskInfo object can't be undefined");return{url:T.url,size:{height:T.height?T.height:g.Small,width:T.width?T.width:g.Small},title:T.title,fallbackUrl:T.fallbackUrl}}(T),Me),new ua},n.updateTask=function(T){var we=function(b,R){var A={};for(var T in b)Object.prototype.hasOwnProperty.call(b,T)&&R.indexOf(T)<0&&(A[T]=b[T]);if(null!=b&&"function"==typeof Object.getOwnPropertySymbols){var z=0;for(T=Object.getOwnPropertySymbols(b);z<T.length;z++)R.indexOf(T[z])<0&&Object.prototype.propertyIsEnumerable.call(b,T[z])&&(A[T[z]]=b[T[z]])}return A}(T=A(T),["width","height"]);if(Object.keys(we).length)throw new Error("resize requires a TaskInfo argument containing only width and height");Uo(C(Ci,E.Tasks_UpdateTask),T)},n.submitTask=function(T,z){zo(C(Ci,E.Tasks_SubmitTask),T,z)},n.getDefaultSizeIfNotProvided=A})(yi||(yi={})),function(n){var A;(A=n.UserMeetingRole||(n.UserMeetingRole={})).guest="Guest",A.attendee="Attendee",A.presenter="Presenter",A.organizer="Organizer",function(A){A.added="Added",A.alreadyExists="AlreadyExists",A.conflict="Conflict",A.notFound="NotFound"}(n.ContainerState||(n.ContainerState={})),n.isSupported=function(){return!(!Pe(K,j.meetingStage,j.sidePanel)||!K.supports.interactive)}}(Zo||(Zo={}));var Wr=function(){function n(){}var b=n.prototype;return b.getFluidTenantInfo=function(){return qn(),new Promise(function(A){A(cn("interactive.getFluidTenantInfo"))})},b.getFluidToken=function(A){return qn(),new Promise(function(T){T(cn("interactive.getFluidToken",A))})},b.getFluidContainerId=function(){return qn(),new Promise(function(A){A(cn("interactive.getFluidContainerId"))})},b.setFluidContainerId=function(A){return qn(),new Promise(function(T){T(cn("interactive.setFluidContainerId",A))})},b.getNtpTime=function(){return qn(),new Promise(function(A){A(cn("interactive.getNtpTime"))})},b.registerClientId=function(A){return qn(),new Promise(function(T){T(cn("interactive.registerClientId",A))})},b.getClientRoles=function(A){return qn(),new Promise(function(T){T(cn("interactive.getClientRoles",A))})},b.getClientInfo=function(A){return qn(),new Promise(function(T){T(cn("interactive.getClientInfo",A))})},n.create=function(){return qn(),new n},n}();function qn(){if(!Zo.isSupported())throw new Error("LiveShareHost Not supported")}var jr=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function qo(n){try{return n.cartItems=Xi(n.cartItems),n}catch{throw new Error("Error deserializing cart")}}function Xi(n){return n.map(function(b){if(b.imageURL){var R=new URL(b.imageURL);b.imageURL=R}return b.accessories&&(b.accessories=Xi(b.accessories)),b})}var Qr=function n(b){try{return b.map(function(R){var A=R.imageURL,T=R.accessories,z=function(b,R){var A={};for(var T in b)Object.prototype.hasOwnProperty.call(b,T)&&R.indexOf(T)<0&&(A[T]=b[T]);if(null!=b&&"function"==typeof Object.getOwnPropertySymbols){var z=0;for(T=Object.getOwnPropertySymbols(b);z<T.length;z++)R.indexOf(T[z])<0&&Object.prototype.propertyIsEnumerable.call(b,T[z])&&(A[T[z]]=b[T[z]])}return A}(R,["imageURL","accessories"]),_e=Object.assign({},z);return A&&(_e.imageURL=A.href),T&&(_e.accessories=n(T)),_e})}catch{throw new Error("Error serializing cart items")}};function Xr(n){if(null!=n){if(!Array.isArray(n)||0===n.length)throw new Error("CartItem.accessories must be a non-empty array");for(var R,b=P(n);!(R=b()).done;){var A=R.value;if(A.accessories)throw new Error("Item in CartItem.accessories cannot have accessories");Yi(A)}}}function Yi(n){if(!n.id)throw new Error("cartItem.id must not be empty");if(!n.name)throw new Error("cartItem.name must not be empty");(function(n){if("number"!=typeof n||n<0)throw new Error("price "+n+" must be a number not less than 0");if(parseFloat(n.toFixed(3))!==n)throw new Error("price "+n+" must have at most 3 decimal places")})(n.price),function(n){if("number"!=typeof n||n<=0||parseInt(n.toString())!==n)throw new Error("quantity "+n+" must be an integer greater than 0")}(n.quantity)}function bi(n){if(null!=n){if(!n)throw new Error("id must not be empty");if(!1===("string"==typeof(b=n)&&jr.test(b)))throw new Error("id must be a valid UUID")}var b}var ti,Mi,wi,Pi,Si,Ei,Oi,ei=k.V_2;(function(n){var T;function A(){return!(!Pe(K)||!K.supports.marketplace)}n.cartVersion={majorVersion:1,minorVersion:1},(T=n.Intent||(n.Intent={})).TACAdminUser="TACAdminUser",T.TeamsAdminUser="TeamsAdminUser",T.TeamsEndUser="TeamsEndUser",function(T){T.Open="Open",T.Processing="Processing",T.Processed="Processed",T.Closed="Closed",T.Error="Error"}(n.CartStatus||(n.CartStatus={})),n.getCart=function(){if(Pe(K,j.content,j.task),!A())throw u;return fn(C(ei,E.Marketplace_GetCart),"marketplace.getCart",n.cartVersion).then(qo)},n.addOrUpdateCartItems=function(T){if(Pe(K,j.content,j.task),!A())throw u;if(!T)throw new Error("addOrUpdateCartItemsParams must be provided");return bi(T?.cartId),function(n){if(!Array.isArray(n)||0===n.length)throw new Error("cartItems must be a non-empty array");for(var R,b=P(n);!(R=b()).done;){var A=R.value;Yi(A),Xr(A.accessories)}}(T?.cartItems),fn(C(ei,E.Marketplace_AddOrUpdateCartItems),"marketplace.addOrUpdateCartItems",Object.assign(Object.assign({},T),{cartItems:Qr(T.cartItems),cartVersion:n.cartVersion})).then(qo)},n.removeCartItems=function(T){if(Pe(K,j.content,j.task),!A())throw u;if(!T)throw new Error("removeCartItemsParams must be provided");if(bi(T?.cartId),!Array.isArray(T?.cartItemIds)||0===T?.cartItemIds.length)throw new Error("cartItemIds must be a non-empty array");return fn(C(ei,E.Marketplace_RemoveCardItems),"marketplace.removeCartItems",Object.assign(Object.assign({},T),{cartVersion:n.cartVersion})).then(qo)},n.updateCartStatus=function(T){if(Pe(K,j.content,j.task),!A())throw u;if(!T)throw new Error("updateCartStatusParams must be provided");return bi(T?.cartId),function(n){if(!Object.values(ti.CartStatus).includes(n))throw new Error("cartStatus "+n+" is not valid")}(T?.cartStatus),fn(C(ei,E.Marketplace_UpdateCartStatus),"marketplace.updateCartStatus",Object.assign(Object.assign({},T),{cartVersion:n.cartVersion})).then(qo)},n.isSupported=A})(ti||(ti={})),function(n){var R,T,Me,b="Action.Execute";function z(Me){if(Me.requestType===R.ActionExecuteInvokeRequest){if(Me.type!==b)throw{errorCode:T.INTERNAL_ERROR,message:"Invalid action type "+Me.type+'. Action type must be "'+b+'"'}}else if(Me.requestType===R.QueryMessageExtensionRequest){if(Me.commandId.length>64)throw new Error("originalRequestInfo.commandId exceeds the maximum size of 64 characters");if(Me.parameters.length>5)throw new Error("originalRequestInfo.parameters exceeds the maximum size of 5");for(var ve,Ce=P(Me.parameters);!(ve=Ce()).done;){var ke=ve.value;if(ke.name.length>64)throw new Error("originalRequestInfo.parameters.name exceeds the maximum size of 64 characters");if(ke.value.length>512)throw new Error("originalRequestInfo.parameters.value exceeds the maximum size of 512 characters")}}}function _e(){return!(!Pe(K)||!K.supports.externalAppAuthentication)}(Me=R=n.OriginalRequestType||(n.OriginalRequestType={})).ActionExecuteInvokeRequest="ActionExecuteInvokeRequest",Me.QueryMessageExtensionRequest="QueryMessageExtensionRequest",function(Me){Me.ActionExecuteInvokeResponse="ActionExecuteInvokeResponse",Me.QueryMessageExtensionResponse="QueryMessageExtensionResponse"}(n.InvokeResponseType||(n.InvokeResponseType={})),function(Me){Me.INTERNAL_ERROR="INTERNAL_ERROR"}(T=n.InvokeErrorCode||(n.InvokeErrorCode={})),n.authenticateAndResendRequest=function(Me,we,Ce){if(Pe(K,j.content),!_e())throw u;return ot(Me),z(Ce),Kn("externalAppAuthentication.authenticateAndResendRequest",[Me,Ce,we.url.href,we.width,we.height,we.isExternal]).then(function(ve){var We=ve[1];if(ve[0]&&null!=We.responseType)return We;throw We})},n.authenticateWithSSO=function(Me,we){if(Pe(K,j.content),!_e())throw u;return ot(Me),Kn("externalAppAuthentication.authenticateWithSSO",[Me,we.claims,we.silent]).then(function(Ce){if(!Ce[0])throw Ce[1]})},n.authenticateWithSSOAndResendRequest=function(Me,we,Ce){if(Pe(K,j.content),!_e())throw u;return ot(Me),z(Ce),Kn("externalAppAuthentication.authenticateWithSSOAndResendRequest",[Me,Ce,we.claims,we.silent]).then(function(ve){var We=ve[1];if(ve[0]&&null!=We.responseType)return We;throw We})},n.isSupported=_e}(Mi||(Mi={})),function(n){var z;function T(){return!(!Pe(K)||!K.supports.externalAppCardActions)}(z=n.ActionOpenUrlType||(n.ActionOpenUrlType={})).DeepLinkDialog="DeepLinkDialog",z.DeepLinkOther="DeepLinkOther",z.DeepLinkStageView="DeepLinkStageView",z.GenericUrl="GenericUrl",function(z){z.INTERNAL_ERROR="INTERNAL_ERROR",z.INVALID_LINK="INVALID_LINK",z.NOT_SUPPORTED="NOT_SUPPORTED"}(n.ActionOpenUrlErrorCode||(n.ActionOpenUrlErrorCode={})),function(z){z.INTERNAL_ERROR="INTERNAL_ERROR"}(n.ActionSubmitErrorCode||(n.ActionSubmitErrorCode={})),n.processActionSubmit=function(z,_e){if(Pe(K,j.content),!T())throw u;return ot(z),Kn("externalAppCardActions.processActionSubmit",[z,_e]).then(function(Me){if(!Me[0])throw Me[1]})},n.processActionOpenUrl=function(z,_e){if(Pe(K,j.content),!T())throw u;return ot(z),Kn("externalAppCardActions.processActionOpenUrl",[z,_e.href]).then(function(Me){var we=Me[0];if(we)throw we;return Me[1]})},n.isSupported=T}(wi||(wi={})),function(n){var we;function Me(we,Ce){return{errorCode:we,message:Ce}}(we=n.CloudStorageProvider||(n.CloudStorageProvider={})).Dropbox="DROPBOX",we.Box="BOX",we.Sharefile="SHAREFILE",we.GoogleDrive="GOOGLEDRIVE",we.Egnyte="EGNYTE",we.SharePoint="SharePoint",function(we){we[we.Sharepoint=0]="Sharepoint",we[we.WopiIntegration=1]="WopiIntegration",we[we.Google=2]="Google",we[we.OneDrive=3]="OneDrive",we[we.Recent=4]="Recent",we[we.Aggregate=5]="Aggregate",we[we.FileSystem=6]="FileSystem",we[we.Search=7]="Search",we[we.AllFiles=8]="AllFiles",we[we.SharedWithMe=9]="SharedWithMe"}(n.CloudStorageProviderType||(n.CloudStorageProviderType={})),function(we){we.ClassMaterials="classMaterials"}(n.SpecialDocumentLibraryType||(n.SpecialDocumentLibraryType={})),function(we){we.Readonly="readonly"}(n.DocumentLibraryAccessType||(n.DocumentLibraryAccessType={})),function(we){we.Downloaded="Downloaded",we.Downloading="Downloading",we.Failed="Failed"}(n.FileDownloadStatus||(n.FileDownloadStatus={})),function(we){we.Download="DOWNLOAD",we.Upload="UPLOAD",we.Delete="DELETE"}(n.CloudStorageProviderFileAction||(n.CloudStorageProviderFileAction={})),n.getCloudStorageFolders=function(we,Ce){if(Pe(K,j.content),!we||0===we.length)throw new Error("[files.getCloudStorageFolders] channelId name cannot be null or empty");if(!Ce)throw new Error("[files.getCloudStorageFolders] Callback cannot be null");bt("files.getCloudStorageFolders",[we],Ce)},n.addCloudStorageFolder=function(we,Ce){if(Pe(K,j.content),!we||0===we.length)throw new Error("[files.addCloudStorageFolder] channelId name cannot be null or empty");if(!Ce)throw new Error("[files.addCloudStorageFolder] Callback cannot be null");bt("files.addCloudStorageFolder",[we],Ce)},n.deleteCloudStorageFolder=function(we,Ce,ve){if(Pe(K,j.content),!we)throw new Error("[files.deleteCloudStorageFolder] channelId name cannot be null or empty");if(!Ce)throw new Error("[files.deleteCloudStorageFolder] folderToDelete cannot be null or empty");if(!ve)throw new Error("[files.deleteCloudStorageFolder] Callback cannot be null");bt("files.deleteCloudStorageFolder",[we,Ce],ve)},n.getCloudStorageFolderContents=function(we,Ce,ve){if(Pe(K,j.content),!we||!Ce)throw new Error("[files.getCloudStorageFolderContents] folder/providerCode name cannot be null or empty");if(!ve)throw new Error("[files.getCloudStorageFolderContents] Callback cannot be null");if("isSubdirectory"in we&&!we.isSubdirectory)throw new Error("[files.getCloudStorageFolderContents] provided folder is not a subDirectory");bt("files.getCloudStorageFolderContents",[we,Ce],ve)},n.openCloudStorageFile=function(we,Ce,ve){if(Pe(K,j.content),!we||!Ce)throw new Error("[files.openCloudStorageFile] file/providerCode cannot be null or empty");if(we.isSubdirectory)throw new Error("[files.openCloudStorageFile] provided file is a subDirectory");bt("files.openCloudStorageFile",[we,Ce,ve])},n.getExternalProviders=function(we,Ce){if(void 0===we&&(we=!1),Pe(K,j.content),!Ce)throw new Error("[files.getExternalProviders] Callback cannot be null");bt("files.getExternalProviders",[we],Ce)},n.copyMoveFiles=function(we,Ce,ve,ke,We,mt){if(void 0===We&&(We=!1),Pe(K,j.content),!we||0===we.length)throw new Error("[files.copyMoveFiles] selectedFiles cannot be null or empty");if(!Ce)throw new Error("[files.copyMoveFiles] providerCode cannot be null or empty");if(!ve)throw new Error("[files.copyMoveFiles] destinationFolder cannot be null or empty");if(!ke)throw new Error("[files.copyMoveFiles] destinationProviderCode cannot be null or empty");if(!mt)throw new Error("[files.copyMoveFiles] callback cannot be null");bt("files.copyMoveFiles",[we,Ce,ve,ke,We],mt)},n.getFileDownloads=function(we){if(Pe(K,j.content),!we)throw new Error("[files.getFileDownloads] Callback cannot be null");bt("files.getFileDownloads",[],we)},n.openDownloadFolder=function(we,Ce){if(void 0===we&&(we=void 0),Pe(K,j.content),!Ce)throw new Error("[files.openDownloadFolder] Callback cannot be null");bt("files.openDownloadFolder",[we],Ce)},n.addCloudStorageProvider=function(we){if(Pe(K,j.content),!we)throw Me(ze.INVALID_ARGUMENTS,"[files.addCloudStorageProvider] callback cannot be null");bt("files.addCloudStorageProvider",[],we)},n.removeCloudStorageProvider=function(we,Ce){if(Pe(K,j.content),!Ce)throw Me(ze.INVALID_ARGUMENTS,"[files.removeCloudStorageProvider] callback cannot be null");if(!we||!we.content)throw Me(ze.INVALID_ARGUMENTS,"[files.removeCloudStorageProvider] 3P cloud storage provider request content is missing");bt("files.removeCloudStorageProvider",[we],Ce)},n.addCloudStorageProviderFile=function(we,Ce){if(Pe(K,j.content),!Ce)throw Me(ze.INVALID_ARGUMENTS,"[files.addCloudStorageProviderFile] callback cannot be null");if(!we||!we.content)throw Me(ze.INVALID_ARGUMENTS,"[files.addCloudStorageProviderFile] 3P cloud storage provider request content is missing");bt("files.addCloudStorageProviderFile",[we],Ce)},n.renameCloudStorageProviderFile=function(we,Ce){if(Pe(K,j.content),!Ce)throw Me(ze.INVALID_ARGUMENTS,"[files.renameCloudStorageProviderFile] callback cannot be null");if(!we||!we.content)throw Me(ze.INVALID_ARGUMENTS,"[files.renameCloudStorageProviderFile] 3P cloud storage provider request content is missing");bt("files.renameCloudStorageProviderFile",[we],Ce)},n.deleteCloudStorageProviderFile=function(we,Ce){if(Pe(K,j.content),!Ce)throw Me(ze.INVALID_ARGUMENTS,"[files.deleteCloudStorageProviderFile] callback cannot be null");if(!(we&&we.content&&we.content.itemList&&we.content.itemList.length>0))throw Me(ze.INVALID_ARGUMENTS,"[files.deleteCloudStorageProviderFile] 3P cloud storage provider request content details are missing");bt("files.deleteCloudStorageProviderFile",[we],Ce)},n.downloadCloudStorageProviderFile=function(we,Ce){if(Pe(K,j.content),!Ce)throw Me(ze.INVALID_ARGUMENTS,"[files.downloadCloudStorageProviderFile] callback cannot be null");if(!(we&&we.content&&we.content.itemList&&we.content.itemList.length>0))throw Me(ze.INVALID_ARGUMENTS,"[files.downloadCloudStorageProviderFile] 3P cloud storage provider request content details are missing");bt("files.downloadCloudStorageProviderFile",[we],Ce)},n.uploadCloudStorageProviderFile=function(we,Ce){if(Pe(K,j.content),!Ce)throw Me(ze.INVALID_ARGUMENTS,"[files.uploadCloudStorageProviderFile] callback cannot be null");if(!(we&&we.content&&we.content.itemList&&we.content.itemList.length>0))throw Me(ze.INVALID_ARGUMENTS,"[files.uploadCloudStorageProviderFile] 3P cloud storage provider request content details are missing");if(!we.content.destinationFolder)throw Me(ze.INVALID_ARGUMENTS,"[files.uploadCloudStorageProviderFile] Invalid destination folder details");bt("files.uploadCloudStorageProviderFile",[we],Ce)},n.registerCloudStorageProviderListChangeHandler=function(we){if(Pe(K),!we)throw new Error("[registerCloudStorageProviderListChangeHandler] Handler cannot be null");xt("files.cloudStorageProviderListChange",we)},n.registerCloudStorageProviderContentChangeHandler=function(we){if(Pe(K),!we)throw new Error("[registerCloudStorageProviderContentChangeHandler] Handler cannot be null");xt("files.cloudStorageProviderContentChange",we)}}(Pi||(Pi={})),function(n){function b(){return!(!Pe(K)||!K.supports.meetingRoom)}n.getPairedMeetingRoomInfo=function(){return new Promise(function(R){if(Pe(K),!b())throw u;R(cn("meetingRoom.getPairedMeetingRoomInfo"))})},n.sendCommandToPairedMeetingRoom=function(R){return new Promise(function(A){if(!R||0==R.length)throw new Error("[meetingRoom.sendCommandToPairedMeetingRoom] Command name cannot be null or empty");if(Pe(K),!b())throw u;A(cn("meetingRoom.sendCommandToPairedMeetingRoom",R))})},n.registerMeetingRoomCapabilitiesUpdateHandler=function(R){if(!R)throw new Error("[meetingRoom.registerMeetingRoomCapabilitiesUpdateHandler] Handler cannot be null");if(Pe(K),!b())throw u;xt("meetingRoom.meetingRoomCapabilitiesUpdate",function(A){Pe(K),R(A)})},n.registerMeetingRoomStatesUpdateHandler=function(R){if(!R)throw new Error("[meetingRoom.registerMeetingRoomStatesUpdateHandler] Handler cannot be null");if(Pe(K),!b())throw u;xt("meetingRoom.meetingRoomStatesUpdate",function(A){Pe(K),R(A)})},n.isSupported=b}(Si||(Si={})),function(n){function b(){return!(!Pe(K)||!K.supports.notifications)}n.showNotification=function(R){if(Pe(K,j.content),!b())throw u;bt("notifications.showNotification",[R])},n.isSupported=b}(Ei||(Ei={})),function(n){var z;function T(){return!(!Pe(K)||!K.supports.remoteCamera)}(z=n.ControlCommand||(n.ControlCommand={})).Reset="Reset",z.ZoomIn="ZoomIn",z.ZoomOut="ZoomOut",z.PanLeft="PanLeft",z.PanRight="PanRight",z.TiltUp="TiltUp",z.TiltDown="TiltDown",function(z){z[z.CommandResetError=0]="CommandResetError",z[z.CommandZoomInError=1]="CommandZoomInError",z[z.CommandZoomOutError=2]="CommandZoomOutError",z[z.CommandPanLeftError=3]="CommandPanLeftError",z[z.CommandPanRightError=4]="CommandPanRightError",z[z.CommandTiltUpError=5]="CommandTiltUpError",z[z.CommandTiltDownError=6]="CommandTiltDownError",z[z.SendDataError=7]="SendDataError"}(n.ErrorReason||(n.ErrorReason={})),function(z){z[z.None=0]="None",z[z.ControlDenied=1]="ControlDenied",z[z.ControlNoResponse=2]="ControlNoResponse",z[z.ControlBusy=3]="ControlBusy",z[z.AckTimeout=4]="AckTimeout",z[z.ControlTerminated=5]="ControlTerminated",z[z.ControllerTerminated=6]="ControllerTerminated",z[z.DataChannelError=7]="DataChannelError",z[z.ControllerCancelled=8]="ControllerCancelled",z[z.ControlDisabled=9]="ControlDisabled",z[z.ControlTerminatedToAllowOtherController=10]="ControlTerminatedToAllowOtherController"}(n.SessionTerminatedReason||(n.SessionTerminatedReason={})),n.getCapableParticipants=function(z){if(!z)throw new Error("[remoteCamera.getCapableParticipants] Callback cannot be null");if(Pe(K,j.sidePanel),!T())throw u;bt("remoteCamera.getCapableParticipants",z)},n.requestControl=function(z,_e){if(!z)throw new Error("[remoteCamera.requestControl] Participant cannot be null");if(!_e)throw new Error("[remoteCamera.requestControl] Callback cannot be null");if(Pe(K,j.sidePanel),!T())throw u;bt("remoteCamera.requestControl",[z],_e)},n.sendControlCommand=function(z,_e){if(!z)throw new Error("[remoteCamera.sendControlCommand] ControlCommand cannot be null");if(!_e)throw new Error("[remoteCamera.sendControlCommand] Callback cannot be null");if(Pe(K,j.sidePanel),!T())throw u;bt("remoteCamera.sendControlCommand",[z],_e)},n.terminateSession=function(z){if(!z)throw new Error("[remoteCamera.terminateSession] Callback cannot be null");if(Pe(K,j.sidePanel),!T())throw u;bt("remoteCamera.terminateSession",z)},n.registerOnCapableParticipantsChangeHandler=function(z){if(!z)throw new Error("[remoteCamera.registerOnCapableParticipantsChangeHandler] Handler cannot be null");if(Pe(K,j.sidePanel),!T())throw u;xt("remoteCamera.capableParticipantsChange",z)},n.registerOnErrorHandler=function(z){if(!z)throw new Error("[remoteCamera.registerOnErrorHandler] Handler cannot be null");if(Pe(K,j.sidePanel),!T())throw u;xt("remoteCamera.handlerError",z)},n.registerOnDeviceStateChangeHandler=function(z){if(!z)throw new Error("[remoteCamera.registerOnDeviceStateChangeHandler] Handler cannot be null");if(Pe(K,j.sidePanel),!T())throw u;xt("remoteCamera.deviceStateChange",z)},n.registerOnSessionStatusChangeHandler=function(z){if(!z)throw new Error("[remoteCamera.registerOnSessionStatusChangeHandler] Handler cannot be null");if(Pe(K,j.sidePanel),!T())throw u;xt("remoteCamera.sessionStatusChange",z)},n.isSupported=T}(Oi||(Oi={}));var Di,Ti,ea=k.V_1;(function(n){function b(){return!(!Pe(K)||!K.supports.appEntity)}n.selectAppEntity=function(R,A,T,z){if(Pe(K,j.content),!b())throw u;if(!R||0==R.length)throw new Error("[appEntity.selectAppEntity] threadId name cannot be null or empty");if(!z)throw new Error("[appEntity.selectAppEntity] Callback cannot be null");Bt(C(ea,E.AppEntity_SelectAppEntity),"appEntity.selectAppEntity",[R,A,T],z)},n.isSupported=b})(Di||(Di={})),function(n){var T;function A(){return!(!Pe(K)||!K.supports.teams)}(T=n.ChannelType||(n.ChannelType={}))[T.Regular=0]="Regular",T[T.Private=1]="Private",T[T.Shared=2]="Shared",n.getTeamChannels=function(T,z){if(Pe(K,j.content),!A())throw u;if(!T)throw new Error("[teams.getTeamChannels] groupId cannot be null or empty");if(!z)throw new Error("[teams.getTeamChannels] Callback cannot be null");bt("teams.getTeamChannels",[T],z)},n.refreshSiteUrl=function(T,z){if(Pe(K),!A())throw u;if(!T)throw new Error("[teams.refreshSiteUrl] threadId cannot be null or empty");if(!z)throw new Error("[teams.refreshSiteUrl] Callback cannot be null");bt("teams.refreshSiteUrl",[T],z)},n.isSupported=A,function(T){function _e(){return!(!Pe(K)||!K.supports.teams||!K.supports.teams.fullTrust)}(function(Me){function we(){return!!(Pe(K)&&K.supports.teams&&K.supports.teams.fullTrust&&K.supports.teams.fullTrust.joinedTeams)}Me.getUserJoinedTeams=function(Ce){return new Promise(function(ve){if(Pe(K),!we())throw u;if((J.hostClientType===He.android||J.hostClientType===He.teamsRoomsAndroid||J.hostClientType===He.teamsPhones||J.hostClientType===He.teamsDisplays)&&!xn("2.0.1"))throw new Error(JSON.stringify({errorCode:ze.OLD_PLATFORM}));ve(di("getUserJoinedTeams",Ce))})},Me.isSupported=we})(T.joinedTeams||(T.joinedTeams={})),T.getConfigSetting=function(Me){return new Promise(function(we){if(Pe(K),!_e())throw u;we(di("getConfigSetting",Me))})},T.isSupported=_e}(n.fullTrust||(n.fullTrust={}))}(Ti||(Ti={}));var xi,Zi=function(b,R,A,T){return new(A||(A=Promise))(function(_e,Me){function we(ke){try{ve(T.next(ke))}catch(We){Me(We)}}function Ce(ke){try{ve(T.throw(ke))}catch(We){Me(We)}}function ve(ke){ke.done?_e(ke.value):function(_e){return _e instanceof A?_e:new A(function(Me){Me(_e)})}(ke.value).then(we,Ce)}ve((T=T.apply(b,R||[])).next())})};!function(n){n.frameProcessingTimeoutInMs=2e3;var R,Ce,b=it()?void 0:new Wi(bt);function A(){var Ce=setTimeout(function(){we("Frame not processed in "+n.frameProcessingTimeoutInMs+"ms",R.Warn)},n.frameProcessingTimeoutInMs);return function(){clearTimeout(Ce)}}function T(Ce,ve){var ke=this;return function(We){return Zi(ke,void 0,void 0,a().mark(function mt(){var Ft,_t,Qe;return a().wrap(function(Et){for(;;)switch(Et.prev=Et.next){case 0:return ve.reportStartFrameProcessing((Ft=We.videoFrame).codedWidth,Ft.codedHeight),_t=A(),Et.next=5,Ce(We);case 5:return Qe=Et.sent,Et.abrupt("return",(_t(),ve.reportFrameProcessed(),Qe));case 7:case"end":return Et.stop()}},mt)}))}}function _e(){return Pe(K),wo.isSupported()}function we(Ce,ve){void 0===ve&&(ve=R.Warn),bt("video.notifyError",[Ce,ve])}(Ce=R=n.ErrorLevel||(n.ErrorLevel={})).Fatal="fatal",Ce.Warn="warn",n.registerForVideoFrame=function(Ce){var ke,We,ve=this;if(!_e())throw u;if(!Ce.videoFrameHandler||!Ce.videoBufferHandler)throw new Error("Both videoFrameHandler and videoBufferHandler must be provided");if(Pe(K,j.sidePanel)){if(xt("video.setFrameProcessTimeLimit",function(mt){return b?.setFrameProcessTimeLimit(mt)},!1),null===(ke=K.supports.video)||void 0===ke?void 0:ke.mediaStream)xt("video.startVideoExtensibilityVideoStream",function(mt){return Zi(ve,void 0,void 0,a().mark(function Ft(){var _t,Qe,Ct;return a().wrap(function(ft){for(;;)switch(ft.prev=ft.next){case 0:if(_t=mt.streamId,Qe=mt.metadataInTexture,Ct=b?T(Ce.videoFrameHandler,b):Ce.videoFrameHandler,!Qe){ft.next=6;break}return ft.next=4,fa(_t,Ct,we,b);case 4:ft.next=8;break;case 6:return ft.next=8,ha(_t,Ct,we,b);case 8:case"end":return ft.stop()}},Ft)}))},!1),bt("video.mediaStream.registerForVideoFrame",[Ce.config]);else{if(null===(We=K.supports.video)||void 0===We||!We.sharedFrame)throw u;xt("video.newVideoFrame",function(mt){if(mt){b?.reportStartFrameProcessing(mt.width,mt.height);var Ft=A(),_t=mt.timestamp;Ce.videoBufferHandler(function(Ce){return Ce.videoFrameBuffer=Ce.videoFrameBuffer||Ce.data,delete Ce.data,Ce}(mt),function(){Ft(),b?.reportFrameProcessed(),function(Ce){bt("video.videoFrameProcessed",[Ce])}(_t)},we)}},!1),bt("video.registerForVideoFrame",[Ce.config])}b?.startMonitorSlowFrameProcessing()}},n.notifySelectedVideoEffectChanged=function(Ce,ve,ke){if(Pe(K,j.sidePanel),!_e())throw u;bt("video.videoEffectChanged",[Ce,ve,ke])},n.registerForVideoEffect=function(Ce){if(Pe(K,j.sidePanel),!_e())throw u;xt("video.effectParameterChange",ho(Ce,b),!1),bt("video.registerForVideoEffect")},n.updatePersonalizedEffects=function(Ce){if(Pe(K,j.sidePanel),!wo.isSupported())throw u;bt("video.personalizedEffectsChanged",[Ce])},n.isSupported=_e,n.notifyFatalError=function(Ce){if(Pe(K),!wo.isSupported())throw u;we(Ce,R.Fatal)}}(xi||(xi={}))}(),c}()},78590:function(lt,Ge,t){"use strict";t.d(Ge,{w9:function(){return Ji},rP:function(){return Ma},Qo:function(){return o},Cq:function(){return ba},Mw:function(){return P}});var o,e,P,a,d,p,l,c,y,i,C,v,r={};t.r(r),t.d(r,{addQueryParameters:function(){return Er},getOrigin:function(){return ya},removeQueryAndFragment:function(){return Ca}}),(e=o||(o={}))[e.ExistingPersistedMashup=0]="ExistingPersistedMashup",e[e.TransientMashup=1]="TransientMashup",e[e.TransientEmptyMashup=2]="TransientEmptyMashup",function(e){e.AddQueries="addQueries",e.BrowseMashup="BrowseMashup",e.ConnectToDataSource="ConnectToDataSource",e.CreateConnection="CreateConnection",e.DataPreview="DataPreview",e.DiagramView="DiagramView",e.EditConnection="EditConnection",e.EditDataflowComputeEngineSettings="EditDataflowComputeEngineSettings",e.EditCubeVariables="editCubeVariables",e.EditQuery="editQuery",e.EditQuickCreate="EditQuickCreate",e.ImportMashupTemplate="importMashupTemplate",e.IncrementalRefreshSettings="incrementalRefreshSettings",e.ManageConnections="manageConnections",e.ManageDataflowComputeEngine="manageDataflowComputeEngine",e.Navigate="navigate",e.QuickCreate="QuickCreate",e.RefreshSettings="refreshSettings",e.ResolveResourceChallenge="ResolveResourceChallenge",e.ShowRefreshHistory="showRefreshHistory"}(P||(P={})),function(e){e.Cancelled="Cancelled",e.CombineFiles="CombineFiles",e.CsvTextSettings="CsvTextSettings",e.DataDiscovery="DataDiscovery",e.DataSources="DataSources",e.DataSourceSettings="DataSourceSettings",e.FolderPreview="FolderPreview",e.IncrementalRefreshSettings="IncrementalRefreshSettings",e.Loading="Loading",e.MappingEditor="MappingEditor",e.Navigator="Navigator",e.QueryEditor="QueryEditor",e.QuickCreate="QuickCreate",e.RecentDataPreview="RecentDataPreview",e.RefreshSettings="RefreshSettings",e.TemplateCredentials="TemplateCredentials",e.TemplateParameters="TemplateParameters",e.TextByExample="TextByExample"}(a||(a={})),function(e){e.Attach="Attach"}(d||(d={})),function(e){e.Busy="Busy",e.Error="Error",e.Ready="Ready",e.Unknown="Unknown"}(p||(p={})),function(e){e.Editable="Editable",e.Hidden="Hidden",e.Readonly="Readonly"}(l||(l={})),function(e){e.Dataflow="Dataflow",e.Project="Project"}(c||(c={})),function(e){e.Definition="Definition",e.Instance="Instance"}(y||(y={})),function(e){e.DataSourceTemplateKind="DataSourceTemplateKind"}(i||(i={})),function(e){e.DataSourceTemplateKind="DataSourceTemplateKind",e.Navigation="Navigation"}(C||(C={})),function(e){e.Busy="Busy",e.Error="Error",e.Ready="Ready",e.Unknown="Unknown"}(v||(v={}));var W,ee,k=t(90341);function I(e){throw new Error("Unexpected value: "+e)}function he(e){switch(e.kind){case P.BrowseMashup:case P.ConnectToDataSource:case P.DataPreview:case P.DiagramView:case P.EditConnection:case P.EditCubeVariables:case P.EditDataflowComputeEngineSettings:case P.EditQuickCreate:case P.ImportMashupTemplate:case P.IncrementalRefreshSettings:case P.ManageConnections:case P.ManageDataflowComputeEngine:case P.Navigate:case P.QuickCreate:case P.RefreshSettings:case P.ShowRefreshHistory:return!0;case P.AddQueries:case P.CreateConnection:case P.EditQuery:case P.ResolveResourceChallenge:return!e.keepFlowRunningOnCommit;default:I(e)}}function pe(e){switch(e.kind){case P.AddQueries:case P.BrowseMashup:case P.ConnectToDataSource:case P.CreateConnection:case P.DataPreview:case P.DiagramView:case P.EditConnection:case P.EditCubeVariables:case P.EditDataflowComputeEngineSettings:case P.EditQuery:case P.EditQuickCreate:case P.ImportMashupTemplate:case P.IncrementalRefreshSettings:case P.ManageConnections:case P.ManageDataflowComputeEngine:case P.Navigate:case P.QuickCreate:case P.RefreshSettings:case P.ShowRefreshHistory:return!0;case P.ResolveResourceChallenge:return!e.keepFlowRunningOnCancel;default:I(e)}}function u(e,f){return e.kind===f.kind}function Q(e){w(e)}function w(e,f){if(null==e)throw new Error(f?f():"Value should be defined");return e}!function(e){e.ClientInstanceId="clientInstanceId",e.ProtocolId="protocolId"}(W||(W={})),function(e){e.DataAutomationId="data-automation-id",e.DataIsAutoFocusable="data-is-autofocusable",e.DataIsFocusable="data-is-focusable"}(ee||(ee={}));var de,V,M,L,x,Y,ue,Ne,$e,Xe,it,st,ot,ut,qe,ct,yt,q="none",le=function(){function e(S,D,re){this.iFrameElement=document.createElement("iframe"),this.iFrameElementOriginalDisplayValue=this.iFrameElement.style.display,this.iFrameElement.src=S,this.iFrameElement.title="Power Query",this.iFrameElement.allow="clipboard-read; clipboard-write",this.iFrameElement.setAttribute(ee.DataIsFocusable,"true"),Q(D),this.container=D,re&&(this.iFrameElement.className=re),this.hide(),this.container.appendChild(this.iFrameElement),this.isDisposed=!1}var f=e.prototype;return f.addEventListener=function(D,re,Se){this.isDisposed||(Q(this.iFrameElement.contentWindow),this.iFrameElement.contentWindow.addEventListener(D,re,Se))},f.removeEventListener=function(D,re,Se){this.isDisposed||(Q(this.iFrameElement.contentWindow),this.iFrameElement.contentWindow.removeEventListener(D,re,Se))},f.postMessage=function(D,re,Se){this.isDisposed||(Q(this.iFrameElement.contentWindow),this.iFrameElement.contentWindow.postMessage(D,re,Se))},f.hide=function(){if(!this.isDisposed){var D=this.iFrameElement.style.display;D!==q&&(this.iFrameElementOriginalDisplayValue=D,this.iFrameElement.style.display=q)}},f.show=function(){this.isDisposed||(this.iFrameElement.style.display=this.iFrameElementOriginalDisplayValue)},f.dispose=function(){this.container.removeChild(this.iFrameElement),this.isDisposed=!0},e}();!function(e){e.GetEntityQueryScript="browseMashupCallbacks.getEntityQueryScript"}(de||(de={})),function(e){e.GetInitialComputeEngineSettings="computeEngineCallbacks.getInitialComputeEngineSettings"}(V||(V={})),function(e){e.OnStateChanged="createConnectionFlowClientCallbacks.onStateChanged"}(M||(M={})),function(e){e.OnSampleDataItemClick="dataDiscoveryFormCallbacks.onSampleDataItemClick"}(L||(L={})),function(e){e.OnEvaluationEnded="dataPreview.onEvaluationEnded",e.OnEvaluationStarted="dataPreview.onEvaluationStarted",e.OnQueryScriptChange="dataPreview.onQueryScriptChange",e.OnTableSelectionChanged="dataPreview.onTableSelectionChanged"}(x||(x={})),function(e){e.OnControlStateChanged="flowControlRpcMethodNames.onControlStateChanged"}(Y||(Y={})),function(e){e.OnCommandExecuted="hostCommandsCallbacks.onCommandExecuted"}(ue||(ue={})),function(e){e.GetLoginSuccessRedirectUri="hostPopupsCallbacks.getLoginSuccessRedirectUri",e.OpenHostPopup="hostPopupsCallbacks.openHostPopup"}(Ne||(Ne={})),function(e){e.OnUnlinkConnection="manageConnectionsFlowCallbacks.onUnlinkConnection"}($e||($e={})),function(e){e.GenerateNewEntityFieldNames="mappingEditorCallbacks.generateNewEntityFieldNames",e.GenerateNewEntityNames="mappingEditorCallbacks.generateNewEntityNames",e.GetEntities="mappingEditorCallbacks.getEntities",e.GetEntityFields="mappingEditorCallbacks.getEntityFields",e.GetEntityKeys="mappingEditorCallbacks.getEntityKeys",e.ValidateMappingEditorResult="mappingEditorCallbacks.validateMappingEditorResult"}(Xe||(Xe={})),function(e){e.GetEntityTypeFields="mappingCallbacks.getEntityTypeFields",e.GetEntityTypes="mappingCallbacks.getEntityTypes"}(it||(it={})),function(e){e.GetEntityDefinitionFromEntityPath="mappingCallbacksV2.getEntityDefinitionFromEntityPath",e.GetManifestDefinitionFromManifestPath="mappingCallbacksV2.getManifestDefinitionFromManifestPath",e.GetRootManifestDefinition="mappingCallbacksV2.getRootManifestDefinition"}(st||(st={})),function(e){e.GetMashupSensitivityLabel="mashupEditorClientCallbacks.getMashupSensitivityLabel",e.OnComputeEngineSettingsChanged="mashupEditorClientCallbacks.onComputeEngineSettingsChanged",e.OnEditingSessionMashupChanged="mashupEditorClientCallbacks.onEditingSessionMashupChanged",e.OnEditingSessionMashupInitialized="mashupEditorClientCallbacks.onEditingSessionMashupInitialized",e.OnMashupEditorClick="mashupEditorClientCallbacks.onMashupEditorClick",e.RenameMashup="mashupEditorClientCallbacks.renameMashup"}(ot||(ot={})),function(e){e.OnNewSqlQueryButtonClicked="powerBIDataMart.onNewSqlQueryButtonClicked",e.OnNewVisualQueryButtonClicked="powerBIDataMart.onNewVisualQueryButtonClicked",e.OnSaveAsViewButtonClicked="powerBIDataMart.onSaveAsViewButtonClicked",e.OnViewSqlButtonClicked="powerBIDataMart.onViewSqlButtonClicked",e.OnVisualizeResultButtonClicked="powerBIDataMart.onVisualizeResultButtonClicked"}(ut||(ut={})),function(e){e.OnDownloadExcelFileButtonClick="queryEditorPreviewButtonsCallbacks.onDownloadExcelFileButtonClick",e.OnSaveAsTableButtonClick="queryEditorPreviewButtonsCallbacks.onSaveAsTableButtonClick",e.OnSaveAsViewButtonClick="queryEditorPreviewButtonsCallbacks.onSaveAsViewButtonClick",e.OnVisualizeResultsButtonClick="queryEditorPreviewButtonsCallbacks.onVisualizeResultsButtonClick"}(qe||(qe={})),function(e){e.OnCommandBarPopupButtonClick="queryEditorCallbacks.onCommandBarPopupButtonClick",e.OnDiagramViewCommandBarPopupButtonClick="queryEditorCallbacks.onDiagramViewCommandBarPopupButtonClick",e.OnOpenInExcelButtonClick="queryEditorCallbacks.onOpenInExcelButtonClick",e.ValidateQuery="queryEditorCallbacks.validateQuery",e.ValidateQueryNameInteractive="queryEditorCallbacks.validateQueryNameInteractive"}(ct||(ct={})),function(e){e.GetUserSettings="userSettings.getUserSettings",e.SetUserSettings="userSettings.setUserSettings"}(yt||(yt={}));var K,It=function(){function e(S,D,re,Se,rt){this.clientRpcChannel=S,this.clientRpcEndpointHost=D,this.client=re,this.configuration=Se,this.clientStartTime=rt,this.registerRpcMethods()}var f=e.prototype;return f.dispose=function(){this.unregisterRpcMethods()},f.registerRpcMethods=function(){var re,Se,rt,Dt,St,Pt,Tt,Nt,gn,bn,Gn,Wt,Vt,Pn,Sn,nn,kn,Bn,En,un,eo,On,So,to,Eo,Un,Nn,zn,Re,me,Ee,Ze,at,tt,Ot,Lt,Gt,on,Zt,rn,wa,Pa,Sa,Ea,Oa,Da,Ta,xa,Ia,D=this;this.register("acquireToken",function(Jt){return D.configuration.acquireToken(Jt)}),this.register("getClientStartTime",function(){return D.clientStartTime}),this.register("getSettings",function(){return D.configuration.editorSettings}),this.register("getVersion",function(){return"22.28.0"}),this.register("hasMappingCallbacks",function(){return null!=D.configuration.mappingCallbacks}),this.register("hasMappingCallbacksV2",function(){return null!=D.configuration.mappingCallbacksV2}),this.register("onAppReady",function(){return D.clientRpcEndpointHost.onAppReady()}),this.register("onCancel",function(){return D.clientRpcEndpointHost.onCancelCurrentFlow()}),this.register("onCommit",function(){}),this.register("onCommit2",function(Jt){return D.clientRpcEndpointHost.onCommitCurrentFlow(Jt)}),this.register("onFlowReady",function(){return D.clientRpcEndpointHost.onCurrentFlowReady()}),!(null===(re=this.configuration.browseMashupCallbacks)||void 0===re)&&re.getEntityQueryScript&&this.register(de.GetEntityQueryScript,this.configuration.browseMashupCallbacks.getEntityQueryScript),!(null===(Se=this.configuration.computeEngineCallbacks)||void 0===Se)&&Se.getInitialComputeEngineSettings&&this.register(V.GetInitialComputeEngineSettings,this.configuration.computeEngineCallbacks.getInitialComputeEngineSettings),!(null===(rt=this.configuration.createConnectionFlowClientCallbacks)||void 0===rt)&&rt.onStateChanged&&this.register(M.OnStateChanged,this.configuration.createConnectionFlowClientCallbacks.onStateChanged),!(null===(Dt=this.configuration.dataPreviewCallbacks)||void 0===Dt)&&Dt.onEvaluationEnded&&this.register(x.OnEvaluationEnded,this.configuration.dataPreviewCallbacks.onEvaluationEnded),!(null===(St=this.configuration.dataPreviewCallbacks)||void 0===St)&&St.onEvaluationStarted&&this.register(x.OnEvaluationStarted,this.configuration.dataPreviewCallbacks.onEvaluationStarted),!(null===(Pt=this.configuration.dataPreviewCallbacks)||void 0===Pt)&&Pt.onQueryScriptChange&&this.register(x.OnQueryScriptChange,this.configuration.dataPreviewCallbacks.onQueryScriptChange),!(null===(Tt=this.configuration.dataPreviewCallbacks)||void 0===Tt)&&Tt.onTableSelectionChanged&&this.register(x.OnTableSelectionChanged,this.configuration.dataPreviewCallbacks.onTableSelectionChanged),!(null===(Nt=this.configuration.flowControlCallbacks)||void 0===Nt)&&Nt.onControlStateChanged&&this.register(Y.OnControlStateChanged,function(){var Jt;return null===(Jt=D.configuration.flowControlCallbacks)||void 0===Jt?void 0:Jt.onControlStateChanged(D.client)}),!(null===(gn=this.configuration.hostPopupsCallbacks)||void 0===gn)&&gn.getLoginSuccessRedirectUri&&this.register(Ne.GetLoginSuccessRedirectUri,this.configuration.hostPopupsCallbacks.getLoginSuccessRedirectUri),!(null===(bn=this.configuration.hostPopupsCallbacks)||void 0===bn)&&bn.openHostPopup&&this.register(Ne.OpenHostPopup,this.configuration.hostPopupsCallbacks.openHostPopup),!(null===(Gn=this.configuration.hostCommandsCallbacks)||void 0===Gn)&&Gn.onCommandExecuted&&this.register(ue.OnCommandExecuted,this.configuration.hostCommandsCallbacks.onCommandExecuted),!(null===(Wt=this.configuration.manageConnectionsFlowCallbacks)||void 0===Wt)&&Wt.onUnlinkConnection&&this.register($e.OnUnlinkConnection,this.configuration.manageConnectionsFlowCallbacks.onUnlinkConnection),!(null===(Vt=this.configuration.mappingEditorCallbacks)||void 0===Vt)&&Vt.generateNewEntityFieldNames&&this.register(Xe.GenerateNewEntityFieldNames,this.configuration.mappingEditorCallbacks.generateNewEntityFieldNames),!(null===(Pn=this.configuration.mappingEditorCallbacks)||void 0===Pn)&&Pn.generateNewEntityNames&&this.register(Xe.GenerateNewEntityNames,this.configuration.mappingEditorCallbacks.generateNewEntityNames),!(null===(Sn=this.configuration.mappingEditorCallbacks)||void 0===Sn)&&Sn.getEntities&&this.register(Xe.GetEntities,this.configuration.mappingEditorCallbacks.getEntities),!(null===(nn=this.configuration.mappingEditorCallbacks)||void 0===nn)&&nn.getEntityFields&&this.register(Xe.GetEntityFields,this.configuration.mappingEditorCallbacks.getEntityFields),!(null===(kn=this.configuration.mappingEditorCallbacks)||void 0===kn)&&kn.getEntityKeys&&this.register(Xe.GetEntityKeys,this.configuration.mappingEditorCallbacks.getEntityKeys),!(null===(Bn=this.configuration.mappingEditorCallbacks)||void 0===Bn)&&Bn.validateMappingEditorResult&&this.register(Xe.ValidateMappingEditorResult,this.configuration.mappingEditorCallbacks.validateMappingEditorResult),!(null===(En=this.configuration.mappingCallbacks)||void 0===En)&&En.getEntityTypeFields&&this.register(it.GetEntityTypeFields,this.configuration.mappingCallbacks.getEntityTypeFields),!(null===(un=this.configuration.mappingCallbacks)||void 0===un)&&un.getEntityTypes&&this.register(it.GetEntityTypes,null===(eo=this.configuration.mappingCallbacks)||void 0===eo?void 0:eo.getEntityTypes),!(null===(On=this.configuration.mappingCallbacksV2)||void 0===On)&&On.getEntityDefinitionFromEntityPath&&this.register(st.GetEntityDefinitionFromEntityPath,this.configuration.mappingCallbacksV2.getEntityDefinitionFromEntityPath),!(null===(So=this.configuration.mappingCallbacksV2)||void 0===So)&&So.getManifestDefinitionFromManifestPath&&this.register(st.GetManifestDefinitionFromManifestPath,this.configuration.mappingCallbacksV2.getManifestDefinitionFromManifestPath),!(null===(to=this.configuration.mappingCallbacksV2)||void 0===to)&&to.getRootManifestDefinition&&this.register(st.GetRootManifestDefinition,null===(Eo=this.configuration.mappingCallbacksV2)||void 0===Eo?void 0:Eo.getRootManifestDefinition),!(null===(Un=this.configuration.mashupEditorClientCallbacks)||void 0===Un)&&Un.getMashupSensitivityLabel&&this.register(ot.GetMashupSensitivityLabel,this.configuration.mashupEditorClientCallbacks.getMashupSensitivityLabel),!(null===(Nn=this.configuration.mashupEditorClientCallbacks)||void 0===Nn)&&Nn.onComputeEngineSettingsChanged&&this.register(ot.OnComputeEngineSettingsChanged,this.configuration.mashupEditorClientCallbacks.onComputeEngineSettingsChanged),!(null===(zn=this.configuration.mashupEditorClientCallbacks)||void 0===zn)&&zn.onEditingSessionMashupChanged&&this.register(ot.OnEditingSessionMashupChanged,this.configuration.mashupEditorClientCallbacks.onEditingSessionMashupChanged),!(null===(Re=this.configuration.mashupEditorClientCallbacks)||void 0===Re)&&Re.onEditingSessionMashupInitialized&&this.register(ot.OnEditingSessionMashupInitialized,this.configuration.mashupEditorClientCallbacks.onEditingSessionMashupInitialized),!(null===(me=this.configuration.mashupEditorClientCallbacks)||void 0===me)&&me.onMashupEditorClick&&this.register(ot.OnMashupEditorClick,null===(Ee=this.configuration.mashupEditorClientCallbacks)||void 0===Ee?void 0:Ee.onMashupEditorClick),!(null===(Ze=this.configuration.mashupEditorClientCallbacks)||void 0===Ze)&&Ze.renameMashup&&this.register(ot.RenameMashup,this.configuration.mashupEditorClientCallbacks.renameMashup),!(null===(at=this.configuration.powerBIDataMartCallbacks)||void 0===at)&&at.onNewSqlQueryButtonClicked&&this.register(ut.OnNewSqlQueryButtonClicked,this.configuration.powerBIDataMartCallbacks.onNewSqlQueryButtonClicked),!(null===(tt=this.configuration.powerBIDataMartCallbacks)||void 0===tt)&&tt.onNewVisualQueryButtonClicked&&this.register(ut.OnNewVisualQueryButtonClicked,this.configuration.powerBIDataMartCallbacks.onNewVisualQueryButtonClicked),!(null===(Ot=this.configuration.powerBIDataMartCallbacks)||void 0===Ot)&&Ot.onSaveAsViewButtonClicked&&this.register(ut.OnSaveAsViewButtonClicked,this.configuration.powerBIDataMartCallbacks.onSaveAsViewButtonClicked),!(null===(Lt=this.configuration.powerBIDataMartCallbacks)||void 0===Lt)&&Lt.onViewSqlButtonClicked&&this.register(ut.OnViewSqlButtonClicked,this.configuration.powerBIDataMartCallbacks.onViewSqlButtonClicked),!(null===(Gt=this.configuration.powerBIDataMartCallbacks)||void 0===Gt)&&Gt.onVisualizeResultButtonClicked&&this.register(ut.OnVisualizeResultButtonClicked,this.configuration.powerBIDataMartCallbacks.onVisualizeResultButtonClicked),!(null===(on=this.configuration.queryEditorCallbacks)||void 0===on)&&on.onCommandBarPopupButtonClick&&this.register(ct.OnCommandBarPopupButtonClick,function(){var Jt;return w(null===(Jt=D.configuration.queryEditorCallbacks)||void 0===Jt?void 0:Jt.onCommandBarPopupButtonClick)(D.client)}),!(null===(Zt=this.configuration.queryEditorCallbacks)||void 0===Zt)&&Zt.onDiagramViewCommandBarPopupButtonClick&&this.register(ct.OnDiagramViewCommandBarPopupButtonClick,function(){var Jt;return w(null===(Jt=D.configuration.queryEditorCallbacks)||void 0===Jt?void 0:Jt.onDiagramViewCommandBarPopupButtonClick)(D.client)}),!(null===(rn=this.configuration.queryEditorCallbacks)||void 0===rn)&&rn.onOpenInExcelButtonClick&&this.register(ct.OnOpenInExcelButtonClick,function(Jt){var Xt;return w(null===(Xt=D.configuration.queryEditorCallbacks)||void 0===Xt?void 0:Xt.onOpenInExcelButtonClick)(D.client,Jt)}),!(null===(wa=this.configuration.queryEditorCallbacks)||void 0===wa)&&wa.validateQuery&&this.register(ct.ValidateQuery,function(Jt){var Xt;return w(null===(Xt=D.configuration.queryEditorCallbacks)||void 0===Xt?void 0:Xt.validateQuery)(D.client,Jt)}),!(null===(Pa=this.configuration.queryEditorCallbacks)||void 0===Pa)&&Pa.validateQueryNameInteractive&&this.register(ct.ValidateQueryNameInteractive,function(Jt){var Xt;return w(null===(Xt=D.configuration.queryEditorCallbacks)||void 0===Xt?void 0:Xt.validateQueryNameInteractive)(D.client,Jt)}),!(null===(Sa=this.configuration.queryEditorPreviewButtonsCallbacks)||void 0===Sa)&&Sa.onDownloadExcelFileButtonClick&&this.register(qe.OnDownloadExcelFileButtonClick,function(Jt){var Xt;return w(null===(Xt=D.configuration.queryEditorPreviewButtonsCallbacks)||void 0===Xt?void 0:Xt.onDownloadExcelFileButtonClick)(Jt)}),!(null===(Ea=this.configuration.queryEditorPreviewButtonsCallbacks)||void 0===Ea)&&Ea.onSaveAsTableButtonClick&&this.register(qe.OnSaveAsTableButtonClick,function(Jt){var Xt;return w(null===(Xt=D.configuration.queryEditorPreviewButtonsCallbacks)||void 0===Xt?void 0:Xt.onSaveAsTableButtonClick)(Jt)}),!(null===(Oa=this.configuration.queryEditorPreviewButtonsCallbacks)||void 0===Oa)&&Oa.onSaveAsViewButtonClick&&this.register(qe.OnSaveAsViewButtonClick,function(Jt){var Xt;return w(null===(Xt=D.configuration.queryEditorPreviewButtonsCallbacks)||void 0===Xt?void 0:Xt.onSaveAsViewButtonClick)(Jt)}),!(null===(Da=this.configuration.queryEditorPreviewButtonsCallbacks)||void 0===Da)&&Da.onVisualizeResultsButtonClick&&this.register(qe.OnVisualizeResultsButtonClick,function(Jt){var Xt;return w(null===(Xt=D.configuration.queryEditorPreviewButtonsCallbacks)||void 0===Xt?void 0:Xt.onVisualizeResultsButtonClick)(Jt)}),!(null===(Ta=this.configuration.userSettingsStorageCallbacks)||void 0===Ta)&&Ta.getUserSettings&&this.register(yt.GetUserSettings,this.configuration.userSettingsStorageCallbacks.getUserSettings),!(null===(xa=this.configuration.userSettingsStorageCallbacks)||void 0===xa)&&xa.setUserSettings&&this.register(yt.SetUserSettings,this.configuration.userSettingsStorageCallbacks.setUserSettings),null!==(Ia=this.configuration.dataDiscoveryFormCallbacks)&&void 0!==Ia&&Ia.onSampleDataItemClick&&this.register(L.OnSampleDataItemClick,function(Jt){var Xt;return w(null===(Xt=D.configuration.dataDiscoveryFormCallbacks)||void 0===Xt?void 0:Xt.onSampleDataItemClick)(Jt)})},f.unregisterRpcMethods=function(){this.unregister("acquireToken"),this.unregister("getClientStartTime"),this.unregister("getSettings"),this.unregister("getVersion"),this.unregister("onAppReady"),this.unregister("onCancel"),this.unregister("onCommit"),this.unregister("onFlowReady"),this.unregister(de.GetEntityQueryScript),this.unregister(V.GetInitialComputeEngineSettings),this.unregister(M.OnStateChanged),this.unregister(x.OnEvaluationEnded),this.unregister(x.OnEvaluationStarted),this.unregister(x.OnQueryScriptChange),this.unregister(x.OnTableSelectionChanged),this.unregister(Ne.GetLoginSuccessRedirectUri),this.unregister(Ne.OpenHostPopup),this.unregister(ue.OnCommandExecuted),this.unregister($e.OnUnlinkConnection),this.unregister(Xe.GenerateNewEntityFieldNames),this.unregister(Xe.GenerateNewEntityNames),this.unregister(Xe.GetEntities),this.unregister(Xe.GetEntityFields),this.unregister(Xe.GetEntityKeys),this.unregister(Xe.ValidateMappingEditorResult),this.unregister(it.GetEntityTypeFields),this.unregister(it.GetEntityTypes),this.unregister(st.GetEntityDefinitionFromEntityPath),this.unregister(st.GetManifestDefinitionFromManifestPath),this.unregister(st.GetRootManifestDefinition),this.unregister(ot.GetMashupSensitivityLabel),this.unregister(ot.OnComputeEngineSettingsChanged),this.unregister(ot.OnEditingSessionMashupChanged),this.unregister(ot.OnEditingSessionMashupInitialized),this.unregister(ot.OnMashupEditorClick),this.unregister(ot.RenameMashup),this.unregister(ut.OnNewSqlQueryButtonClicked),this.unregister(ut.OnNewVisualQueryButtonClicked),this.unregister(ut.OnSaveAsViewButtonClicked),this.unregister(ut.OnViewSqlButtonClicked),this.unregister(ut.OnVisualizeResultButtonClicked),this.unregister(ct.OnCommandBarPopupButtonClick),this.unregister(ct.OnDiagramViewCommandBarPopupButtonClick),this.unregister(ct.OnOpenInExcelButtonClick),this.unregister(ct.ValidateQuery),this.unregister(ct.ValidateQueryNameInteractive),this.unregister(qe.OnDownloadExcelFileButtonClick),this.unregister(qe.OnSaveAsTableButtonClick),this.unregister(qe.OnSaveAsViewButtonClick),this.unregister(qe.OnVisualizeResultsButtonClick),this.unregister(yt.GetUserSettings),this.unregister(yt.SetUserSettings),this.unregister(L.OnSampleDataItemClick)},f.register=function(D,re){this.clientRpcChannel.register(D,re)},f.unregister=function(D){this.clientRpcChannel.unregister(D)},e}();!function(e){e.ActivateQuery="activateQuery",e.AddQuery="addQuery",e.CancelAddQueriesFlow="cancelAddQueriesFlow",e.ClickCancelButton="clickCancelButton",e.ClickCommitButton="clickCommitButton",e.ClickCustomButton="clickCustomButton",e.ClickNextStageButton="clickNextStageButton",e.ClickPreviousStageButton="clickPreviousStageButton",e.CreateConnectionFlow_Commit="createConnectionFlow_commit",e.DataPreview_CancelCurrentQueryEvaluation="dataPreview_cancelCurrentQueryEvaluation",e.DataPreview_SelectColumns="dataPreview_selectColumns",e.DeleteAllQueries="deleteAllQueries",e.DisposeService="disposeService",e.EndFlow="endFlow",e.GetActiveQueryName="getActiveQueryName",e.GetCancelButtonLabel="getCancelButtonLabel",e.GetCommitButtonLabel="getCommitButtonLabel",e.GetCommitResult="getCommitResult",e.GetComputeEngineSettings="getComputeEngineSettings",e.GetCurrentFlow="getCurrentFlow",e.GetCustomButtonLabel="getCustomButtonLabel",e.GetDataSourceQueryScript="getDataSourceQueryScript",e.GetDataWizardFooter_ClickCancelButton="getDataWizardFooter_clickCancelButton",e.GetDataWizardFooter_ClickCommitButton="getDataWizardFooter_clickCommitButton",e.GetDataWizardFooter_ClickCustomButton="getDataWizardFooter_clickCustomButton",e.GetDataWizardFooter_ClickNextStageButton="getDataWizardFooter_clickNextStageButton",e.GetDataWizardFooter_ClickPreviousStageButton="getDataWizardFooter_clickPreviousStageButton",e.GetEditingSessionId="getEditingSessionId",e.GetEditingSessionMashup="getEditingSessionMashup",e.GetFooterMessage="getFooterMessage",e.GetGetDataWizardFlowStage="getGetDataWizardFlowStage",e.GetIncrementalRefreshSettings="getIncrementalRefreshSettings",e.GetMashupGatewayVersion="getMashupGatewayVersion",e.GetNextStageButtonLabel="getNextStageButtonLabel",e.GetPreviousStageButtonLabel="getPreviousStageButtonLabel",e.GetQueriesInfo="getQueriesInfo",e.GetQueryEditorState="getQueryEditorState",e.GetQueryEditorStateOrThrow="getQueryEditorStateOrThrow",e.GetQueryNames="getQueryNames",e.GetQueryScript="getQueryScript",e.GetReadyState="getReadyState",e.GetRefreshSettings="getRefreshSettings",e.GetSelectedStepName="getSelectedStepName",e.GetUserSettings="getUserSettings",e.IsCancelButtonEnabled="isCancelButtonEnabled",e.IsCancelButtonVisible="isCancelButtonVisible",e.IsCommitButtonEnabled="isCommitButtonEnabled",e.IsCommitButtonVisible="isCommitButtonVisible",e.IsCustomButtonEnabled="isCustomButtonEnabled",e.IsCustomButtonVisible="isCustomButtonVisible",e.IsDialogVisible="isDialogVisible",e.IsFeatureSupported="isFeatureSupported",e.IsFooterOverlayVisible="isFooterOverlayVisible",e.IsNextStageButtonEnabled="isNextStageButtonEnabled",e.IsNextStageButtonVisible="isNextStageButtonVisible",e.IsPreviousStageButtonEnabled="isPreviousStageButtonEnabled",e.IsPreviousStageButtonVisible="isPreviousStageButtonVisible",e.LogXFramePerformanceMarks="logXFramePerformanceMarks",e.OnHostPopupCancelled="onHostPopupCancelled",e.RefreshActiveQueryResult="refreshActiveQueryResult",e.SetCommitButtonEnabledStatePolicy="setCommitButtonEnabledStatePolicy",e.SetUserSettings="setUserSettings",e.StartFlow="startFlow",e.TrySetQueryScript="trySetQueryScript"}(K||(K={}));var mn=function(){function e(S){this.clientRpcChannel=S}var f=e.prototype;return f.activateQuery=function(D){return this.clientRpcChannel.call(K.ActivateQuery,[D])},f.addQuery=function(D,re,Se){return this.clientRpcChannel.call(K.AddQuery,[D,re,Se])},f.endFlow=function(){return this.clientRpcChannel.callIfSupported(K.EndFlow)},f.cancelAddQueriesFlow=function(){return this.clientRpcChannel.call(K.CancelAddQueriesFlow)},f.clickCancelButton=function(){return this.clientRpcChannel.call(K.ClickCancelButton)},f.clickCommitButton=function(){return this.clientRpcChannel.call(K.ClickCommitButton)},f.clickCustomButton=function(){return this.clientRpcChannel.call(K.ClickCustomButton)},f.clickNextStageButton=function(){return this.clientRpcChannel.call(K.ClickNextStageButton)},f.clickPreviousStageButton=function(){return this.clientRpcChannel.call(K.ClickPreviousStageButton)},f.createConnectionFlow_commit=function(D){return this.clientRpcChannel.call(K.CreateConnectionFlow_Commit,[D])},f.dataPreview_cancelCurrentQueryEvaluation=function(){return this.clientRpcChannel.call(K.DataPreview_CancelCurrentQueryEvaluation)},f.dataPreview_selectColumns=function(D){return this.clientRpcChannel.callIfSupported(K.DataPreview_SelectColumns,[D])},f.deleteAllQueries=function(){return this.clientRpcChannel.callIfSupported(K.DeleteAllQueries)},f.disposeService=function(){return this.clientRpcChannel.callIfSupported(K.DisposeService)},f.getActiveQueryName=function(){return this.clientRpcChannel.call(K.GetActiveQueryName)},f.getCancelButtonLabel=function(){return this.clientRpcChannel.call(K.GetCancelButtonLabel)},f.getCommitButtonLabel=function(){return this.clientRpcChannel.call(K.GetCommitButtonLabel)},f.getCustomButtonLabel=function(){return this.clientRpcChannel.call(K.GetCustomButtonLabel)},f.getCommitResult=function(){return this.clientRpcChannel.call(K.GetCommitResult)},f.getComputeEngineSettings=function(){return this.clientRpcChannel.call(K.GetComputeEngineSettings)},f.getCurrentFlow=function(){return this.clientRpcChannel.callIfSupported(K.GetCurrentFlow)},f.getDataSourceQueryScript=function(D,re){return this.clientRpcChannel.call(K.GetDataSourceQueryScript,[D,re])},f.getDataWizardFooter_clickCancelButton=function(){return this.clientRpcChannel.call(K.GetDataWizardFooter_ClickCancelButton)},f.getDataWizardFooter_clickCommitButton=function(){return this.clientRpcChannel.call(K.GetDataWizardFooter_ClickCommitButton)},f.getDataWizardFooter_clickCustomButton=function(){return this.clientRpcChannel.call(K.GetDataWizardFooter_ClickCustomButton)},f.getDataWizardFooter_clickNextStageButton=function(){return this.clientRpcChannel.call(K.GetDataWizardFooter_ClickNextStageButton)},f.getDataWizardFooter_clickPreviousStageButton=function(){return this.clientRpcChannel.call(K.GetDataWizardFooter_ClickPreviousStageButton)},f.getEditingSessionId=function(){return this.clientRpcChannel.call(K.GetEditingSessionId)},f.getEditingSessionMashup=function(D){return this.clientRpcChannel.call(K.GetEditingSessionMashup,[D])},f.getFooterMessage=function(){return this.clientRpcChannel.call(K.GetFooterMessage)},f.getGetDataWizardFlowStage=function(){return this.clientRpcChannel.callIfSupported(K.GetGetDataWizardFlowStage)},f.getIncrementalRefreshSettings=function(){return this.clientRpcChannel.call(K.GetIncrementalRefreshSettings)},f.getMashupGatewayVersion=function(){return this.clientRpcChannel.call(K.GetMashupGatewayVersion)},f.getNextStageButtonLabel=function(){return this.clientRpcChannel.call(K.GetNextStageButtonLabel)},f.getPreviousStageButtonLabel=function(){return this.clientRpcChannel.call(K.GetPreviousStageButtonLabel)},f.getQueriesInfo=function(){return this.clientRpcChannel.call(K.GetQueriesInfo)},f.getQueryEditorState=function(){return this.clientRpcChannel.call(K.GetQueryEditorState)},f.getQueryEditorStateOrThrow=function(){return this.clientRpcChannel.call(K.GetQueryEditorStateOrThrow)},f.getQueryNames=function(){return this.clientRpcChannel.call(K.GetQueryNames)},f.getQueryScript=function(D){return this.clientRpcChannel.call(K.GetQueryScript,[D])},f.getReadyState=function(){return this.clientRpcChannel.call(K.GetReadyState)},f.getRefreshSettings=function(){return this.clientRpcChannel.callIfSupported(K.GetRefreshSettings)},f.getSelectedStepName=function(){return this.clientRpcChannel.call(K.GetSelectedStepName)},f.getUserSettings=function(){return this.clientRpcChannel.call(K.GetUserSettings)},f.isCancelButtonEnabled=function(){return this.clientRpcChannel.call(K.IsCancelButtonEnabled)},f.isCancelButtonVisible=function(){return this.clientRpcChannel.call(K.IsCancelButtonVisible)},f.isCommitButtonEnabled=function(){return this.clientRpcChannel.call(K.IsCommitButtonEnabled)},f.isCommitButtonVisible=function(){return this.clientRpcChannel.call(K.IsCommitButtonVisible)},f.isCustomButtonEnabled=function(){return this.clientRpcChannel.call(K.IsCustomButtonEnabled)},f.isCustomButtonVisible=function(){return this.clientRpcChannel.call(K.IsCustomButtonVisible)},f.isDialogVisible=function(){return this.clientRpcChannel.call(K.IsDialogVisible)},f.isFeatureSupported=function(D){return this.clientRpcChannel.call(K.IsFeatureSupported,[D])},f.isFooterOverlayVisible=function(){return this.clientRpcChannel.call(K.IsFooterOverlayVisible)},f.isNextStageButtonEnabled=function(){return this.clientRpcChannel.call(K.IsNextStageButtonEnabled)},f.isNextStageButtonVisible=function(){return this.clientRpcChannel.call(K.IsNextStageButtonVisible)},f.isPreviousStageButtonEnabled=function(){return this.clientRpcChannel.call(K.IsPreviousStageButtonEnabled)},f.isPreviousStageButtonVisible=function(){return this.clientRpcChannel.call(K.IsPreviousStageButtonVisible)},f.logXFramePerformanceMarks=function(D){return this.clientRpcChannel.call(K.LogXFramePerformanceMarks,[D])},f.onHostPopupCancelled=function(D){return this.clientRpcChannel.callIfSupported(K.OnHostPopupCancelled,[D])},f.refreshActiveQueryResult=function(){return this.clientRpcChannel.callIfSupported(K.RefreshActiveQueryResult)},f.setCommitButtonEnabledStatePolicy=function(D){return this.clientRpcChannel.call(K.SetCommitButtonEnabledStatePolicy,[D])},f.setUserSettings=function(D){return this.clientRpcChannel.callIfSupported(K.SetUserSettings,[D])},f.startFlow=function(D,re){return this.clientRpcChannel.callIfSupported(K.StartFlow,[D,re])},f.trySetQueryScript=function(D,re){return this.clientRpcChannel.call(K.TrySetQueryScript,[D,re])},e}(),qt=t(37419),Fn=function(){function e(){var S=this;this.resolveMethod=function(D){},this.rejectMethod=function(D){},this.promise=new Promise(function(D,re){S.resolveMethod=D,S.rejectMethod=re})}e.createResolvedDeferred=function(){var D=new e;return D.resolve(),D};var f=e.prototype;return f.resolve=function(D){this.resolveMethod(D)},f.reject=function(D){this.rejectMethod(D)},e}(),vo=t(11105);function so(){return vo.Z()}function no(){no=function(){return f};var e,f={},S=Object.prototype,D=S.hasOwnProperty,re=Object.defineProperty||function(Re,me,Ee){Re[me]=Ee.value},Se="function"==typeof Symbol?Symbol:{},rt=Se.iterator||"@@iterator",Dt=Se.asyncIterator||"@@asyncIterator",St=Se.toStringTag||"@@toStringTag";function Pt(Re,me,Ee){return Object.defineProperty(Re,me,{value:Ee,enumerable:!0,configurable:!0,writable:!0}),Re[me]}try{Pt({},"")}catch{Pt=function(Ee,Ze,at){return Ee[Ze]=at}}function Tt(Re,me,Ee,Ze){var tt=Object.create((me&&me.prototype instanceof Pn?me:Pn).prototype),Ot=new Nn(Ze||[]);return re(tt,"_invoke",{value:So(Re,Ee,Ot)}),tt}function Nt(Re,me,Ee){try{return{type:"normal",arg:Re.call(me,Ee)}}catch(Ze){return{type:"throw",arg:Ze}}}f.wrap=Tt;var gn="suspendedStart",bn="suspendedYield",Gn="executing",Wt="completed",Vt={};function Pn(){}function Sn(){}function nn(){}var kn={};Pt(kn,rt,function(){return this});var Bn=Object.getPrototypeOf,En=Bn&&Bn(Bn(zn([])));En&&En!==S&&D.call(En,rt)&&(kn=En);var un=nn.prototype=Pn.prototype=Object.create(kn);function eo(Re){["next","throw","return"].forEach(function(me){Pt(Re,me,function(Ee){return this._invoke(me,Ee)})})}function On(Re,me){function Ee(at,tt,Ot,Lt){var Gt=Nt(Re[at],Re,tt);if("throw"!==Gt.type){var on=Gt.arg,Zt=on.value;return Zt&&"object"==typeof Zt&&D.call(Zt,"__await")?me.resolve(Zt.__await).then(function(rn){Ee("next",rn,Ot,Lt)},function(rn){Ee("throw",rn,Ot,Lt)}):me.resolve(Zt).then(function(rn){on.value=rn,Ot(on)},function(rn){return Ee("throw",rn,Ot,Lt)})}Lt(Gt.arg)}var Ze;re(this,"_invoke",{value:function(tt,Ot){function Lt(){return new me(function(Gt,on){Ee(tt,Ot,Gt,on)})}return Ze=Ze?Ze.then(Lt,Lt):Lt()}})}function So(Re,me,Ee){var Ze=gn;return function(at,tt){if(Ze===Gn)throw new Error("Generator is already running");if(Ze===Wt){if("throw"===at)throw tt;return{value:e,done:!0}}for(Ee.method=at,Ee.arg=tt;;){var Ot=Ee.delegate;if(Ot){var Lt=to(Ot,Ee);if(Lt){if(Lt===Vt)continue;return Lt}}if("next"===Ee.method)Ee.sent=Ee._sent=Ee.arg;else if("throw"===Ee.method){if(Ze===gn)throw Ze=Wt,Ee.arg;Ee.dispatchException(Ee.arg)}else"return"===Ee.method&&Ee.abrupt("return",Ee.arg);Ze=Gn;var Gt=Nt(Re,me,Ee);if("normal"===Gt.type){if(Ze=Ee.done?Wt:bn,Gt.arg===Vt)continue;return{value:Gt.arg,done:Ee.done}}"throw"===Gt.type&&(Ze=Wt,Ee.method="throw",Ee.arg=Gt.arg)}}}function to(Re,me){var Ee=me.method,Ze=Re.iterator[Ee];if(Ze===e)return me.delegate=null,"throw"===Ee&&Re.iterator.return&&(me.method="return",me.arg=e,to(Re,me),"throw"===me.method)||"return"!==Ee&&(me.method="throw",me.arg=new TypeError("The iterator does not provide a '"+Ee+"' method")),Vt;var at=Nt(Ze,Re.iterator,me.arg);if("throw"===at.type)return me.method="throw",me.arg=at.arg,me.delegate=null,Vt;var tt=at.arg;return tt?tt.done?(me[Re.resultName]=tt.value,me.next=Re.nextLoc,"return"!==me.method&&(me.method="next",me.arg=e),me.delegate=null,Vt):tt:(me.method="throw",me.arg=new TypeError("iterator result is not an object"),me.delegate=null,Vt)}function Eo(Re){var me={tryLoc:Re[0]};1 in Re&&(me.catchLoc=Re[1]),2 in Re&&(me.finallyLoc=Re[2],me.afterLoc=Re[3]),this.tryEntries.push(me)}function Un(Re){var me=Re.completion||{};me.type="normal",delete me.arg,Re.completion=me}function Nn(Re){this.tryEntries=[{tryLoc:"root"}],Re.forEach(Eo,this),this.reset(!0)}function zn(Re){if(Re||""===Re){var me=Re[rt];if(me)return me.call(Re);if("function"==typeof Re.next)return Re;if(!isNaN(Re.length)){var Ee=-1,Ze=function at(){for(;++Ee<Re.length;)if(D.call(Re,Ee))return at.value=Re[Ee],at.done=!1,at;return at.value=e,at.done=!0,at};return Ze.next=Ze}}throw new TypeError(typeof Re+" is not iterable")}return Sn.prototype=nn,re(un,"constructor",{value:nn,configurable:!0}),re(nn,"constructor",{value:Sn,configurable:!0}),Sn.displayName=Pt(nn,St,"GeneratorFunction"),f.isGeneratorFunction=function(Re){var me="function"==typeof Re&&Re.constructor;return!!me&&(me===Sn||"GeneratorFunction"===(me.displayName||me.name))},f.mark=function(Re){return Object.setPrototypeOf?Object.setPrototypeOf(Re,nn):(Re.__proto__=nn,Pt(Re,St,"GeneratorFunction")),Re.prototype=Object.create(un),Re},f.awrap=function(Re){return{__await:Re}},eo(On.prototype),Pt(On.prototype,Dt,function(){return this}),f.AsyncIterator=On,f.async=function(Re,me,Ee,Ze,at){void 0===at&&(at=Promise);var tt=new On(Tt(Re,me,Ee,Ze),at);return f.isGeneratorFunction(me)?tt:tt.next().then(function(Ot){return Ot.done?Ot.value:tt.next()})},eo(un),Pt(un,St,"Generator"),Pt(un,rt,function(){return this}),Pt(un,"toString",function(){return"[object Generator]"}),f.keys=function(Re){var me=Object(Re),Ee=[];for(var Ze in me)Ee.push(Ze);return Ee.reverse(),function at(){for(;Ee.length;){var tt=Ee.pop();if(tt in me)return at.value=tt,at.done=!1,at}return at.done=!0,at}},f.values=zn,Nn.prototype={constructor:Nn,reset:function(me){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(Un),!me)for(var Ee in this)"t"===Ee.charAt(0)&&D.call(this,Ee)&&!isNaN(+Ee.slice(1))&&(this[Ee]=e)},stop:function(){this.done=!0;var me=this.tryEntries[0].completion;if("throw"===me.type)throw me.arg;return this.rval},dispatchException:function(me){if(this.done)throw me;var Ee=this;function Ze(on,Zt){return Ot.type="throw",Ot.arg=me,Ee.next=on,Zt&&(Ee.method="next",Ee.arg=e),!!Zt}for(var at=this.tryEntries.length-1;at>=0;--at){var tt=this.tryEntries[at],Ot=tt.completion;if("root"===tt.tryLoc)return Ze("end");if(tt.tryLoc<=this.prev){var Lt=D.call(tt,"catchLoc"),Gt=D.call(tt,"finallyLoc");if(Lt&&Gt){if(this.prev<tt.catchLoc)return Ze(tt.catchLoc,!0);if(this.prev<tt.finallyLoc)return Ze(tt.finallyLoc)}else if(Lt){if(this.prev<tt.catchLoc)return Ze(tt.catchLoc,!0)}else{if(!Gt)throw new Error("try statement without catch or finally");if(this.prev<tt.finallyLoc)return Ze(tt.finallyLoc)}}}},abrupt:function(me,Ee){for(var Ze=this.tryEntries.length-1;Ze>=0;--Ze){var at=this.tryEntries[Ze];if(at.tryLoc<=this.prev&&D.call(at,"finallyLoc")&&this.prev<at.finallyLoc){var tt=at;break}}tt&&("break"===me||"continue"===me)&&tt.tryLoc<=Ee&&Ee<=tt.finallyLoc&&(tt=null);var Ot=tt?tt.completion:{};return Ot.type=me,Ot.arg=Ee,tt?(this.method="next",this.next=tt.finallyLoc,Vt):this.complete(Ot)},complete:function(me,Ee){if("throw"===me.type)throw me.arg;return"break"===me.type||"continue"===me.type?this.next=me.arg:"return"===me.type?(this.rval=this.arg=me.arg,this.method="return",this.next="end"):"normal"===me.type&&Ee&&(this.next=Ee),Vt},finish:function(me){for(var Ee=this.tryEntries.length-1;Ee>=0;--Ee){var Ze=this.tryEntries[Ee];if(Ze.finallyLoc===me)return this.complete(Ze.completion,Ze.afterLoc),Un(Ze),Vt}},catch:function(me){for(var Ee=this.tryEntries.length-1;Ee>=0;--Ee){var Ze=this.tryEntries[Ee];if(Ze.tryLoc===me){var at=Ze.completion;if("throw"===at.type){var tt=at.arg;Un(Ze)}return tt}}throw new Error("illegal catch attempt")},delegateYield:function(me,Ee,Ze){return this.delegate={iterator:zn(me),resultName:Ee,nextLoc:Ze},"next"===this.method&&(this.arg=e),Vt}},f}var oo="__SUPPORTS_METHOD__",_o=function(){function e(S){var D=this;this.onMessageReceived=function(re){re.method?D.handleRequestMessageReceived(re):D.handleResponseMessageReceived(re)},this.options=S,this.ready=!1,this.methodCallbackMap=new Map,this.requestDeferredByMessageId=new Map,this.queuedRequestMessages=[],this.options.rpcWindow.addListener(this.onMessageReceived),this.internalRegister(oo,function(re){return D.handleSupportsMethodMessage(re)})}var f=e.prototype;return f.call=function(D,re){return this.internalCall(e.normalizeMethodName(D),re)},f.callIfSupported=function(D,re){return function(e,f,S,D){return new(S||(S=Promise))(function(Se,rt){function Dt(Tt){try{Pt(D.next(Tt))}catch(Nt){rt(Nt)}}function St(Tt){try{Pt(D.throw(Tt))}catch(Nt){rt(Nt)}}function Pt(Tt){Tt.done?Se(Tt.value):function(Se){return Se instanceof S?Se:new S(function(rt){rt(Se)})}(Tt.value).then(Dt,St)}Pt((D=D.apply(e,f||[])).next())})}(this,void 0,void 0,no().mark(function Se(){return no().wrap(function(St){for(;;)switch(St.prev=St.next){case 0:return St.next=2,this.supportsMethod(D);case 2:if(!St.sent){St.next=5;break}return St.abrupt("return",this.call(D,re));case 5:return St.abrupt("return",void 0);case 6:case"end":return St.stop()}},Se,this)}))},f.dispose=function(){this.internalUnregister(oo),this.requestDeferredByMessageId.forEach(function(D){return D.reject(function(e){var f=new Error("Rpc disposed");if(null!=f.stack)return f;try{throw f}catch(S){return S}}())}),this.requestDeferredByMessageId.clear(),this.options.rpcWindow.removeListener(this.onMessageReceived)},f.register=function(D,re){var Se=this,rt=e.normalizeMethodName(D);this.internalRegister(rt,function(){for(var Dt,St,Pt=arguments.length,Tt=new Array(Pt),Nt=0;Nt<Pt;Nt++)Tt[Nt]=arguments[Nt];return null===(St=(Dt=Se.options).onMethodInvoked)||void 0===St||St.call(Dt,D,Tt),re.apply(void 0,Tt)})},f.supportsMethod=function(D){return this.internalCall(oo,[D])},f.unregister=function(D){var re=e.normalizeMethodName(D);this.internalUnregister(re)},f.canPostMessage=function(D){return this.ready},f.internalCall=function(D,re){void 0===re&&(re=void 0);var Se=so(),rt={id:Se,method:D,params:re},Dt=new Fn;return this.requestDeferredByMessageId.set(Se,Dt),this.canPostMessage(rt)?this.tryPostMessage(rt):this.queuedRequestMessages.push(rt),Dt.promise},f.internalRegister=function(D,re){if(this.methodCallbackMap.has(D))throw new Error("Rpc method with name '"+D+"' already registered.");this.methodCallbackMap.set(D,re)},f.internalUnregister=function(D){this.methodCallbackMap.delete(D)},f.onReady=function(){this.ready=!0,this.flushRequestMessageQueue()},e.getResponseMessageError=function(D){return D instanceof Error?{message:D.message,name:D.name,stack:D.stack}:D},e.normalizeMethodName=function(D){return D.toUpperCase()},f.flushRequestMessageQueue=function(){var D=this;this.queuedRequestMessages.forEach(function(re){return D.tryPostMessage(re)}),this.queuedRequestMessages=[]},f.handleRequestMessageReceived=function(D){var re=this,Se=this.methodCallbackMap.get(D.method);if(Se){var rt={signature:D.signature,id:D.id};try{var Dt=Se.apply(this,D.params);Promise.resolve(Dt).then(function(St){rt.result=St,re.postMessage(rt)}).catch(function(St){rt.error=e.getResponseMessageError(St),re.postMessage(rt)})}catch(St){rt.error=e.getResponseMessageError(St),this.postMessage(rt)}}},f.handleResponseMessageReceived=function(D){var re=D.id,Se=this.requestDeferredByMessageId.get(re);Se&&(D.error?Se.reject(D.error):Se.resolve(D.result),this.requestDeferredByMessageId.delete(re))},f.handleSupportsMethodMessage=function(D){return this.methodCallbackMap.has(e.normalizeMethodName(D))},f.postMessage=function(D){this.options.rpcWindow.postMessage(D)},f.tryPostMessage=function(D){try{this.postMessage(D)}catch(rt){if(rt instanceof Error){var re=D.id,Se=this.requestDeferredByMessageId.get(re);Se&&(Se.reject(rt),this.requestDeferredByMessageId.delete(re))}}},(0,k.Z)(e,[{key:"rpcHandshakeHandler",get:function(){return this.options.rpcHandshakeHandler}}]),e}(),Dn=function(e){function f(D){var re;return(re=e.call(this,D)||this).clientOptions=D,re.internalRegister(D.rpcHandshakeHandler.getReadyMessageMethod(),function(){return re.handleReadyMessage()}),re}return(0,qt.Z)(f,e),f.prototype.handleReadyMessage=function(){return this.internalUnregister(this.rpcHandshakeHandler.getReadyMessageMethod()),this.onReady(),this.clientOptions.onAck&&this.clientOptions.onAck(),this.rpcHandshakeHandler.createAckResponse()},f}(_o);function _r(e,f,S){var D;return e&&fo(e)&&e.hasOwnProperty(f)&&null!==(D=e[f])&&void 0!==D?D:S}function fo(e){return function(e){return null!==e&&"object"==typeof e}(e)&&!Array.isArray(e)&&e.constructor===Object}var Xo=function(){function e(S){this.signature=S}var f=e.prototype;return f.deserialize=function(D){var re=D.data;return fo(re)?_r(re,"data",re):re},f.serialize=function(D){return D.signature=this.signature,{id:D.id,kind:_r(D,"method",e.emptyValue),signature:e.frameSignature,data:D}},e}();Xo.emptyValue="",Xo.frameSignature="FxFrameControl";var Po,ji=function(){function e(){}var f=e.prototype;return f.createAckResponse=function(){return"start"},f.getReadyMessageMethod=function(){return"ready"},f.isAckResponse=function(D){return"start"===D},e}(),Ki=function(){function e(S){this.signature=S}var f=e.prototype;return f.deserialize=function(D){return D.data},f.serialize=function(D){return D.signature=this.signature,D},e}(),Pr="__PONG__",$i=function(){function e(){}var f=e.prototype;return f.createAckResponse=function(){return Pr},f.getReadyMessageMethod=function(){return"__PING__"},f.isAckResponse=function(D){return D===Pr},e}();!function(e){e.Default="default",e.AzurePortal_v1_0_0="azureportal-v1.0.0"}(Po||(Po={}));var yn=function(){function e(S){Q(S.targetWindow),Q(S.sourceWindow),this.options=S,this.eventListeners=new Map}var f=e.prototype;return f.addListener=function(D){var re=this;if(this.eventListeners.has(D))throw new Error("Duplicate rpc listener added.");var Se=function(Dt){return re.handleMessageReceived(Dt,D)};this.eventListeners.set(D,Se),this.options.sourceWindow.addEventListener(e.eventTypeName,Se)},f.postMessage=function(D){var re=this.options.targetOriginProvider.getTargetOrigin(D);this.options.targetWindow.postMessage(this.options.rpcMessageConverter.serialize(D),re)},f.removeListener=function(D){var re=this.eventListeners.get(D);re&&(this.options.sourceWindow.removeEventListener(e.eventTypeName,re),this.eventListeners.delete(D))},e.isMessageEvent=function(D){return!function(e){return null==e}(D.data)},f.canProcessMessage=function(D){return!!D&&D.signature===this.options.rpcMessageConverter.signature},f.handleMessageReceived=function(D,re){if(e.isMessageEvent(D)){var Se=this.options.rpcMessageConverter.deserialize(D);this.canProcessMessage(Se)&&this.options.allowedOrigins.some(function(rt){return function(e,f){if("*"===f)return!0;if(f.startsWith("https://*.")&&e.startsWith("https://")){var D=f.substring(9);return e.substring(8).endsWith(D)}return e===f}(D.origin,rt)})&&(this.options.targetOriginProvider.onMessageReceived(D.origin),re(Se))}},e}();yn.eventTypeName="message";var _a=function(){function e(S){this.explicitTargetOrigin=S}var f=e.prototype;return f.getTargetOrigin=function(D){return this.explicitTargetOrigin},f.onMessageReceived=function(D){},e}();function Ca(e){var f=e.indexOf("#"),S=f>=0?e.substring(0,f):e,D=e.indexOf("?");return D>=0?S.substring(0,D):S}function Er(e){for(var S=e.indexOf("?")>-1?"&":"?",D=arguments.length,re=new Array(D>1?D-1:0),Se=1;Se<D;Se++)re[Se-1]=arguments[Se];return""+e+S+re.map(function(Dt){return encodeURIComponent(Dt.name)+"="+encodeURIComponent(Dt.value)}).join("&")}function ya(e){var f=e.indexOf("//");if(f>=0){var S=e.indexOf("/",f+=2);if(S>=0)return e.substring(0,S)}return e}function lo(){lo=function(){return f};var e,f={},S=Object.prototype,D=S.hasOwnProperty,re=Object.defineProperty||function(Re,me,Ee){Re[me]=Ee.value},Se="function"==typeof Symbol?Symbol:{},rt=Se.iterator||"@@iterator",Dt=Se.asyncIterator||"@@asyncIterator",St=Se.toStringTag||"@@toStringTag";function Pt(Re,me,Ee){return Object.defineProperty(Re,me,{value:Ee,enumerable:!0,configurable:!0,writable:!0}),Re[me]}try{Pt({},"")}catch{Pt=function(Ee,Ze,at){return Ee[Ze]=at}}function Tt(Re,me,Ee,Ze){var tt=Object.create((me&&me.prototype instanceof Pn?me:Pn).prototype),Ot=new Nn(Ze||[]);return re(tt,"_invoke",{value:So(Re,Ee,Ot)}),tt}function Nt(Re,me,Ee){try{return{type:"normal",arg:Re.call(me,Ee)}}catch(Ze){return{type:"throw",arg:Ze}}}f.wrap=Tt;var gn="suspendedStart",bn="suspendedYield",Gn="executing",Wt="completed",Vt={};function Pn(){}function Sn(){}function nn(){}var kn={};Pt(kn,rt,function(){return this});var Bn=Object.getPrototypeOf,En=Bn&&Bn(Bn(zn([])));En&&En!==S&&D.call(En,rt)&&(kn=En);var un=nn.prototype=Pn.prototype=Object.create(kn);function eo(Re){["next","throw","return"].forEach(function(me){Pt(Re,me,function(Ee){return this._invoke(me,Ee)})})}function On(Re,me){function Ee(at,tt,Ot,Lt){var Gt=Nt(Re[at],Re,tt);if("throw"!==Gt.type){var on=Gt.arg,Zt=on.value;return Zt&&"object"==typeof Zt&&D.call(Zt,"__await")?me.resolve(Zt.__await).then(function(rn){Ee("next",rn,Ot,Lt)},function(rn){Ee("throw",rn,Ot,Lt)}):me.resolve(Zt).then(function(rn){on.value=rn,Ot(on)},function(rn){return Ee("throw",rn,Ot,Lt)})}Lt(Gt.arg)}var Ze;re(this,"_invoke",{value:function(tt,Ot){function Lt(){return new me(function(Gt,on){Ee(tt,Ot,Gt,on)})}return Ze=Ze?Ze.then(Lt,Lt):Lt()}})}function So(Re,me,Ee){var Ze=gn;return function(at,tt){if(Ze===Gn)throw new Error("Generator is already running");if(Ze===Wt){if("throw"===at)throw tt;return{value:e,done:!0}}for(Ee.method=at,Ee.arg=tt;;){var Ot=Ee.delegate;if(Ot){var Lt=to(Ot,Ee);if(Lt){if(Lt===Vt)continue;return Lt}}if("next"===Ee.method)Ee.sent=Ee._sent=Ee.arg;else if("throw"===Ee.method){if(Ze===gn)throw Ze=Wt,Ee.arg;Ee.dispatchException(Ee.arg)}else"return"===Ee.method&&Ee.abrupt("return",Ee.arg);Ze=Gn;var Gt=Nt(Re,me,Ee);if("normal"===Gt.type){if(Ze=Ee.done?Wt:bn,Gt.arg===Vt)continue;return{value:Gt.arg,done:Ee.done}}"throw"===Gt.type&&(Ze=Wt,Ee.method="throw",Ee.arg=Gt.arg)}}}function to(Re,me){var Ee=me.method,Ze=Re.iterator[Ee];if(Ze===e)return me.delegate=null,"throw"===Ee&&Re.iterator.return&&(me.method="return",me.arg=e,to(Re,me),"throw"===me.method)||"return"!==Ee&&(me.method="throw",me.arg=new TypeError("The iterator does not provide a '"+Ee+"' method")),Vt;var at=Nt(Ze,Re.iterator,me.arg);if("throw"===at.type)return me.method="throw",me.arg=at.arg,me.delegate=null,Vt;var tt=at.arg;return tt?tt.done?(me[Re.resultName]=tt.value,me.next=Re.nextLoc,"return"!==me.method&&(me.method="next",me.arg=e),me.delegate=null,Vt):tt:(me.method="throw",me.arg=new TypeError("iterator result is not an object"),me.delegate=null,Vt)}function Eo(Re){var me={tryLoc:Re[0]};1 in Re&&(me.catchLoc=Re[1]),2 in Re&&(me.finallyLoc=Re[2],me.afterLoc=Re[3]),this.tryEntries.push(me)}function Un(Re){var me=Re.completion||{};me.type="normal",delete me.arg,Re.completion=me}function Nn(Re){this.tryEntries=[{tryLoc:"root"}],Re.forEach(Eo,this),this.reset(!0)}function zn(Re){if(Re||""===Re){var me=Re[rt];if(me)return me.call(Re);if("function"==typeof Re.next)return Re;if(!isNaN(Re.length)){var Ee=-1,Ze=function at(){for(;++Ee<Re.length;)if(D.call(Re,Ee))return at.value=Re[Ee],at.done=!1,at;return at.value=e,at.done=!0,at};return Ze.next=Ze}}throw new TypeError(typeof Re+" is not iterable")}return Sn.prototype=nn,re(un,"constructor",{value:nn,configurable:!0}),re(nn,"constructor",{value:Sn,configurable:!0}),Sn.displayName=Pt(nn,St,"GeneratorFunction"),f.isGeneratorFunction=function(Re){var me="function"==typeof Re&&Re.constructor;return!!me&&(me===Sn||"GeneratorFunction"===(me.displayName||me.name))},f.mark=function(Re){return Object.setPrototypeOf?Object.setPrototypeOf(Re,nn):(Re.__proto__=nn,Pt(Re,St,"GeneratorFunction")),Re.prototype=Object.create(un),Re},f.awrap=function(Re){return{__await:Re}},eo(On.prototype),Pt(On.prototype,Dt,function(){return this}),f.AsyncIterator=On,f.async=function(Re,me,Ee,Ze,at){void 0===at&&(at=Promise);var tt=new On(Tt(Re,me,Ee,Ze),at);return f.isGeneratorFunction(me)?tt:tt.next().then(function(Ot){return Ot.done?Ot.value:tt.next()})},eo(un),Pt(un,St,"Generator"),Pt(un,rt,function(){return this}),Pt(un,"toString",function(){return"[object Generator]"}),f.keys=function(Re){var me=Object(Re),Ee=[];for(var Ze in me)Ee.push(Ze);return Ee.reverse(),function at(){for(;Ee.length;){var tt=Ee.pop();if(tt in me)return at.value=tt,at.done=!1,at}return at.done=!0,at}},f.values=zn,Nn.prototype={constructor:Nn,reset:function(me){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(Un),!me)for(var Ee in this)"t"===Ee.charAt(0)&&D.call(this,Ee)&&!isNaN(+Ee.slice(1))&&(this[Ee]=e)},stop:function(){this.done=!0;var me=this.tryEntries[0].completion;if("throw"===me.type)throw me.arg;return this.rval},dispatchException:function(me){if(this.done)throw me;var Ee=this;function Ze(on,Zt){return Ot.type="throw",Ot.arg=me,Ee.next=on,Zt&&(Ee.method="next",Ee.arg=e),!!Zt}for(var at=this.tryEntries.length-1;at>=0;--at){var tt=this.tryEntries[at],Ot=tt.completion;if("root"===tt.tryLoc)return Ze("end");if(tt.tryLoc<=this.prev){var Lt=D.call(tt,"catchLoc"),Gt=D.call(tt,"finallyLoc");if(Lt&&Gt){if(this.prev<tt.catchLoc)return Ze(tt.catchLoc,!0);if(this.prev<tt.finallyLoc)return Ze(tt.finallyLoc)}else if(Lt){if(this.prev<tt.catchLoc)return Ze(tt.catchLoc,!0)}else{if(!Gt)throw new Error("try statement without catch or finally");if(this.prev<tt.finallyLoc)return Ze(tt.finallyLoc)}}}},abrupt:function(me,Ee){for(var Ze=this.tryEntries.length-1;Ze>=0;--Ze){var at=this.tryEntries[Ze];if(at.tryLoc<=this.prev&&D.call(at,"finallyLoc")&&this.prev<at.finallyLoc){var tt=at;break}}tt&&("break"===me||"continue"===me)&&tt.tryLoc<=Ee&&Ee<=tt.finallyLoc&&(tt=null);var Ot=tt?tt.completion:{};return Ot.type=me,Ot.arg=Ee,tt?(this.method="next",this.next=tt.finallyLoc,Vt):this.complete(Ot)},complete:function(me,Ee){if("throw"===me.type)throw me.arg;return"break"===me.type||"continue"===me.type?this.next=me.arg:"return"===me.type?(this.rval=this.arg=me.arg,this.method="return",this.next="end"):"normal"===me.type&&Ee&&(this.next=Ee),Vt},finish:function(me){for(var Ee=this.tryEntries.length-1;Ee>=0;--Ee){var Ze=this.tryEntries[Ee];if(Ze.finallyLoc===me)return this.complete(Ze.completion,Ze.afterLoc),Un(Ze),Vt}},catch:function(me){for(var Ee=this.tryEntries.length-1;Ee>=0;--Ee){var Ze=this.tryEntries[Ee];if(Ze.tryLoc===me){var at=Ze.completion;if("throw"===at.type){var tt=at.arg;Un(Ze)}return tt}}throw new Error("illegal catch attempt")},delegateYield:function(me,Ee,Ze){return this.delegate={iterator:zn(me),resultName:Ee,nextLoc:Ze},"next"===this.method&&(this.arg=e),Vt}},f}var Or,Ji,Dr,Tr,xr,Ir,Rr,Ar,Lr,Fr,Vr,Gr,kr,Yo,Br,Ur,Nr,zr,_i,Hr,Ci,yi,Zo,Wr,qn,jr,Kr,$r,qo,Xi,Qr,Jr,Xr,Yi,bi,Yr,Zr,qr,ei,ti,Mi,wi,Pi,Si,Ei,Oi,ea,Di,Ti,xi,Zi,n,b,R,A,T,z,_e,Me,we,Ce,ve,ke,We,mt,Ft,_t,Qe,Ct,Et,ft,kt,Kt,Tn,wn,qi,ta,Ma,el,tl,nl,ol,il,rl,al,ll,sl,cl,ul,dl,pl,gl,hl,fl,ml,vl,_l,Cl,yl,bl,Ml,wl,Pl,Sl,El,Ol,Dl,Tl,xl,Il,Rl,vi=function(e,f,S,D){return new(S||(S=Promise))(function(Se,rt){function Dt(Tt){try{Pt(D.next(Tt))}catch(Nt){rt(Nt)}}function St(Tt){try{Pt(D.throw(Tt))}catch(Nt){rt(Nt)}}function Pt(Tt){Tt.done?Se(Tt.value):function(Se){return Se instanceof S?Se:new S(function(rt){rt(Se)})}(Tt.value).then(Dt,St)}Pt((D=D.apply(e,f||[])).next())})},ba=function(){function e(S){var re,Se,rt,D=this,Dt=new Date;this.instanceId=so(),this.configuration=S;var St=null!==(re=this.configuration.clientSettings.clientEnvironment)&&void 0!==re?re:this.createDefaultClientEnvironment(this.configuration.clientSettings.container,this.configuration.clientSettings.className),Pt=[{name:W.ClientInstanceId,value:this.instanceId}];this.configuration.clientSettings.protocolId&&Pt.push({name:W.ProtocolId,value:this.configuration.clientSettings.protocolId});var Tt=Er.apply(r,[this.configuration.clientSettings.url].concat(Pt));this.appWindow=St.appWindowFactory(Tt);var Nt=void 0!==this.configuration.clientSettings.allowedOrigin?this.configuration.clientSettings.allowedOrigin:"*",gn=function(e,f){return f===Po.AzurePortal_v1_0_0?{rpcMessageConverter:new Xo(e),rpcHandshakeHandler:new ji}:{rpcMessageConverter:new Ki(e),rpcHandshakeHandler:new $i}}(function(e){return null==e?"mspq":"mspq-"+e}(this.instanceId),null!==(Se=this.configuration.clientSettings.protocolId)&&void 0!==Se?Se:Po.Default);this.clientRpcChannel=new Dn({debugName:"MashupEditorClient.clientRpcChannel",enableDebugLogging:null!==(rt=this.configuration.clientSettings.enableDebugLogging)&&void 0!==rt&&rt,rpcHandshakeHandler:gn.rpcHandshakeHandler,rpcWindow:new yn({allowedOrigins:[Nt],rpcMessageConverter:gn.rpcMessageConverter,sourceWindow:St.clientWindow,targetOriginProvider:new _a(Nt),targetWindow:this.appWindow})}),this.clientRpcEndpoint=new It(this.clientRpcChannel,{onCancelCurrentFlow:function(){return D.onCancelCurrentFlow()},onCommitCurrentFlow:function(Gn){return D.onCommitCurrentFlow(Gn)},onCurrentFlowReady:function(){return D.onCurrentFlowReady()},onAppReady:function(){return D.appReady.resolve()}},this,S,Dt),this.serviceProxy=new mn(this.clientRpcChannel),this.appReady=new Fn}var f=e.prototype;return f.activateQuery=function(D){return this.serviceProxy.activateQuery(D)},f.addQuery=function(D,re,Se){return this.serviceProxy.addQuery(D,re,Se)},f.deleteAllQueries=function(){return this.serviceProxy.deleteAllQueries()},f.onHostPopupCancelled=function(D){return this.serviceProxy.onHostPopupCancelled(D)},f.cancelAddQueriesFlow=function(){return this.serviceProxy.cancelAddQueriesFlow()},f.endFlow=function(){return this.appWindow.hide(),this.serviceProxy.endFlow()},f.getActiveQueryName=function(){return this.serviceProxy.getActiveQueryName()},f.getCommitResult=function(){return this.serviceProxy.getCommitResult()},f.getComputeEngineSettings=function(){return this.serviceProxy.getComputeEngineSettings()},f.getCurrentFlow=function(){return this.serviceProxy.getCurrentFlow()},f.getDataSourceQueryScript=function(D,re){return this.serviceProxy.getDataSourceQueryScript(D,re)},f.getEditingSessionId=function(){return this.serviceProxy.getEditingSessionId()},f.getEditingSessionMashup=function(D){return this.serviceProxy.getEditingSessionMashup(D)},f.getMashupGatewayVersion=function(){return this.serviceProxy.getMashupGatewayVersion()},f.getGetDataWizardFlowStage=function(){return this.serviceProxy.getGetDataWizardFlowStage()},f.getFooterMessage=function(){return this.serviceProxy.getFooterMessage()},f.getIncrementalRefreshSettings=function(){return this.serviceProxy.getIncrementalRefreshSettings()},f.getQueriesInfo=function(){return this.serviceProxy.getQueriesInfo()},f.getQueryEditorState=function(){return this.serviceProxy.getQueryEditorState()},f.getQueryEditorStateOrThrow=function(){return this.serviceProxy.getQueryEditorStateOrThrow()},f.getQueryNames=function(){return this.serviceProxy.getQueryNames()},f.getQueryScript=function(D){return this.serviceProxy.getQueryScript(D)},f.getReadyState=function(){return this.serviceProxy.getReadyState()},f.getRefreshSettings=function(){return this.serviceProxy.getRefreshSettings()},f.getSelectedStepName=function(){return this.serviceProxy.getSelectedStepName()},f.getUserSettings=function(){return this.serviceProxy.getUserSettings()},f.isDialogVisible=function(){return this.serviceProxy.isDialogVisible()},f.isFeatureSupported=function(D){return this.serviceProxy.isFeatureSupported(D)},f.isFooterOverlayVisible=function(){return this.serviceProxy.isFooterOverlayVisible()},f.logXFramePerformanceMarks=function(D){return this.serviceProxy.logXFramePerformanceMarks(D)},f.refreshActiveQueryResult=function(){return this.serviceProxy.refreshActiveQueryResult()},f.setCommitButtonEnabledStatePolicy=function(D){return this.serviceProxy.setCommitButtonEnabledStatePolicy(D)},f.setUserSettings=function(D){return this.serviceProxy.setUserSettings(D)},f.startFlow=function(D,re,Se,rt){return vi(this,void 0,void 0,lo().mark(function Dt(){return lo().wrap(function(Tt){for(;;)switch(Tt.prev=Tt.next){case 0:return Tt.next=2,this.ready;case 2:return Tt.next=4,this.getCurrentFlow();case 4:if(null==Tt.sent){Tt.next=7;break}throw Error("cannot start a new flow when an existing flow is running");case 7:return this.currentFlowConfiguration={flowReady:new Fn,shouldEndFlowOnCommit:he(D),shouldEndFlowOnCancel:pe(D),onCommit:function(gn,bn){if(u(bn,D))return re(gn,bn);throw new Error("The flow "+D.kind+" returned the wrong type of result: "+bn.kind)},onCancel:Se},this.appWindow.show(),this.serviceProxy.startFlow(D,rt),Tt.abrupt("return",this.currentFlowConfiguration.flowReady.promise);case 11:case"end":return Tt.stop()}},Dt,this)}))},f.dispose=function(){return vi(this,void 0,void 0,lo().mark(function D(){return lo().wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:return this.appWindow.hide(),Se.prev=1,Se.next=4,this.serviceProxy.disposeService();case 4:return Se.prev=4,this.clientRpcEndpoint.dispose(),this.clientRpcChannel.dispose(),this.appWindow.dispose(),Se.finish(4);case 9:case"end":return Se.stop()}},D,this,[[1,,4,9]])}))},f.trySetQueryScript=function(D,re){return this.serviceProxy.trySetQueryScript(D,re)},f.createDefaultClientEnvironment=function(D,re){return{clientWindow:window,appWindowFactory:function(rt){return new le(rt,D,re)}}},f.onCancelCurrentFlow=function(){return vi(this,void 0,void 0,lo().mark(function D(){return lo().wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:if(!this.configuration.onCancel){Se.next=2;break}return Se.abrupt("return",this.configuration.onCancel(this));case 2:return Q(this.currentFlowConfiguration),Se.next=5,this.currentFlowConfiguration.onCancel(this);case 5:this.currentFlowConfiguration.shouldEndFlowOnCancel&&(this.appWindow.hide(),this.currentFlowConfiguration=void 0);case 6:case"end":return Se.stop()}},D,this)}))},f.onCommitCurrentFlow=function(D){return vi(this,void 0,void 0,lo().mark(function re(){return lo().wrap(function(rt){for(;;)switch(rt.prev=rt.next){case 0:if(!this.configuration.onCommit){rt.next=2;break}return rt.abrupt("return",this.configuration.onCommit(this));case 2:return Q(this.currentFlowConfiguration),rt.next=5,this.currentFlowConfiguration.onCommit(this,D);case 5:this.currentFlowConfiguration.shouldEndFlowOnCommit&&(this.appWindow.hide(),this.currentFlowConfiguration=void 0);case 6:case"end":return rt.stop()}},re,this)}))},f.onCurrentFlowReady=function(){Q(this.currentFlowConfiguration),this.currentFlowConfiguration.flowReady.resolve()},(0,k.Z)(e,[{key:"dataPreview",get:function(){var D=this;return{cancelCurrentEvaluation:function(){return D.serviceProxy.dataPreview_cancelCurrentQueryEvaluation()},selectColumns:function(Se){return D.serviceProxy.dataPreview_selectColumns(Se)}}}},{key:"getDataWizardFooterCallbacks",get:function(){var D=this;return{clickCancelButton:function(){return D.serviceProxy.getDataWizardFooter_clickCancelButton()},clickCommitButton:function(){return D.serviceProxy.getDataWizardFooter_clickCommitButton()},clickCustomButton:function(){return D.serviceProxy.getDataWizardFooter_clickCustomButton()},clickNextStageButton:function(){return D.serviceProxy.getDataWizardFooter_clickNextStageButton()},clickPreviousStageButton:function(){return D.serviceProxy.getDataWizardFooter_clickPreviousStageButton()}}}},{key:"cancelButton",get:function(){var D=this;return{click:function(){return D.serviceProxy.clickCancelButton()},getLabel:function(){return D.serviceProxy.getCancelButtonLabel()},isEnabled:function(){return D.serviceProxy.isCancelButtonEnabled()},isVisible:function(){return D.serviceProxy.isCancelButtonVisible()}}}},{key:"commitButton",get:function(){var D=this;return{click:function(){return D.serviceProxy.clickCommitButton()},getLabel:function(){return D.serviceProxy.getCommitButtonLabel()},isEnabled:function(){return D.serviceProxy.isCommitButtonEnabled()},isVisible:function(){return D.serviceProxy.isCommitButtonVisible()}}}},{key:"customButton",get:function(){var D=this;return{click:function(){return D.serviceProxy.clickCustomButton()},getLabel:function(){return D.serviceProxy.getCustomButtonLabel()},isEnabled:function(){return D.serviceProxy.isCustomButtonEnabled()},isVisible:function(){return D.serviceProxy.isCustomButtonVisible()}}}},{key:"nextStageButton",get:function(){var D=this;return{click:function(){return D.serviceProxy.clickNextStageButton()},getLabel:function(){return D.serviceProxy.getNextStageButtonLabel()},isEnabled:function(){return D.serviceProxy.isNextStageButtonEnabled()},isVisible:function(){return D.serviceProxy.isNextStageButtonVisible()}}}},{key:"createConnectionFlowCallbacks",get:function(){var D=this;return{commit:function(Se){return D.serviceProxy.createConnectionFlow_commit(Se)}}}},{key:"previousStageButton",get:function(){var D=this;return{click:function(){return D.serviceProxy.clickPreviousStageButton()},getLabel:function(){return D.serviceProxy.getPreviousStageButtonLabel()},isEnabled:function(){return D.serviceProxy.isPreviousStageButtonEnabled()},isVisible:function(){return D.serviceProxy.isPreviousStageButtonVisible()}}}},{key:"ready",get:function(){return this.appReady.promise}}]),e}();!function(e){e.Success="Success",e.Error_EmptyName="Error_EmptyName",e.Error_InvalidCharacters="Error_InvalidCharacters",e.Error_NameAlreadyExists="Error_NameAlreadyExists",e.Error_NameTooLong="Error_NameTooLong"}(Or||(Or={})),function(e){e.Cancel="Cancel",e.Commit="Commit"}(Ji||(Ji={})),function(e){e.AlwaysCancel="AlwaysCancel",e.AlwaysCommit="AlwaysCommit",e.Ask="Ask"}(Dr||(Dr={})),function(e){e.BuiltInCommand="BuiltInCommand",e.HostCommand="HostCommand"}(Tr||(Tr={})),function(e){e.Kusto="kusto",e.Sql="sql"}(xr||(xr={})),function(e){e.StepLabel="StepLabel",e.StepName="StepName"}(Ir||(Ir={})),function(e){e.CalculatedEntity="CalculatedEntity",e.Default="Default",e.LinkedEntity="LinkedEntity",e.Parameter="Parameter",e.Visual="Visual"}(Rr||(Rr={})),function(e){e.Data="Data",e.Schema="Schema"}(Ar||(Ar={})),function(e){e.None="None",e.Query="Query",e.Step="Step"}(Lr||(Lr={})),function(e){e.Critical="Critical",e.Error="Error"}(Fr||(Fr={})),function(e){e.AlwaysDisabled="AlwaysDisabled",e.Default="Default"}(Vr||(Vr={})),function(e){e.Cancelled="Cancelled",e.Completed="Completed",e.Failed="Failed",e.NotStarted="NotStarted",e.Running="Running"}(Gr||(Gr={})),function(e){e.Access="Access",e.Access_Monocolor="Access_Monocolor",e.ActiveDirectory="ActiveDirectory",e.AddFuzzyClusterColumn="AddFuzzyClusterColumn",e.AddRankColumn="AddRankColumn",e.AdobeAnalytics="AdobeAnalytics",e.AIInsights="AIInsights",e.AllFilled="AllFilled",e.AllRegular="AllRegular",e.Alternates="Alternates",e.AnyType="AnyType",e.AppendQueries="AppendQueries",e.AppendQueriesAsNew="AppendQueriesAsNew",e.AzureAnalysisServices="AzureAnalysisServices",e.AzureBlobs="AzureBlobs",e.AzureFilled="AzureFilled",e.AzureHdInsightClusters="AzureHdInsightClusters",e.AzureRegular="AzureRegular",e.AzureSql="AzureSql",e.AzureSynapse="AzureSynapse",e.AzureTables="AzureTables",e.Binary="Binary",e.Blog="Blog",e.BlueLink="BlueLink",e.CalculatedEntity="CalculatedEntity",e.Calculator="Calculator",e.Cancel="Cancel",e.CancelRefresh="CancelRefresh",e.Cds="Cds",e.ChartClusteredBar="ChartClusteredBar",e.ChartClusteredColumn="ChartClusteredColumn",e.ChartLine="ChartLine",e.ChartPercentageStackedArea="ChartPercentageStackedArea",e.ChartPercentageStackedBar="ChartPercentageStackedBar",e.ChartPercentageStackedColumn="ChartPercentageStackedColumn",e.ChartStackedArea="ChartStackedArea",e.ChartStackedBar="ChartStackedBar",e.ChartStackedColumn="ChartStackedColumn",e.Checkmark="Checkmark",e.ChooseColumns="ChooseColumns",e.ClearFilter="ClearFilter",e.Close="Close",e.CloseAndLoad="CloseAndLoad",e.CloseAndLoadTo="CloseAndLoadTo",e.CloseRed="CloseRed",e.Column="Column",e.ColumnByExample="ColumnByExample",e.CombineFiles="CombineFiles",e.Community="Community",e.ConditionalColumn="ConditionalColumn",e.ConnectDatabase="ConnectDatabase",e.Copilot="Copilot",e.Copy="Copy",e.CountRows="CountRows",e.Cube="Cube",e.CubeAddAndExpandDimensionColumn="CubeAddAndExpandDimensionColumn",e.CubeCollapseAndRemoveColumns="CubeCollapseAndRemoveColumns",e.CubeDimension="CubeDimension",e.CubeDimensionAttribute="CubeDimensionAttribute",e.CubeDimensionHierarchy="CubeDimensionHierarchy",e.CubeMeasure="CubeMeasure",e.CubeServer="CubeServer",e.Currency="Currency",e.CustomColumn="CustomColumn",e.Cut="Cut",e.Database="Database",e.DatabaseClock="DatabaseClock",e.DatabaseDynamic="DatabaseDynamic",e.DatabaseFilled="DatabaseFilled",e.DatabaseLightning="DatabaseLightning",e.DatabaseOpaque="DatabaseOpaque",e.DatabaseRefresh="DatabaseRefresh",e.DatabaseRegular="DatabaseRegular",e.Databases="Databases",e.DatabaseUnknown="DatabaseUnknown",e.Dataflows="Dataflows",e.Dataverse="Dataverse",e.Date="Date",e.DateTime="DateTime",e.DateTimeZone="DateTimeZone",e.Delete="Delete",e.DeleteFile="DeleteFile",e.DemoteHeaders="DemoteHeaders",e.DetectDataType="DetectDataType",e.Diagram="Diagram",e.Documentation="Documentation",e.DragQueries="DragQueries",e.DragQueryGroups="DragQueryGroups",e.DuplicateColumn="DuplicateColumn",e.Duration="Duration",e.Dynamics365="Dynamics365",e.Empty="Empty",e.Entity="Entity",e.Error="Error",e.Excel="Excel",e.Excel_Monocolor="Excel_Monocolor",e.Exchange="Exchange",e.Exchange_Monocolor="Exchange_Monocolor",e.Expand="Expand",e.ExpandColumn="ExpandColumn",e.Fabric="Fabric",e.FabricFilled="FabricFilled",e.FabricRegular="FabricRegular",e.FastCopy="FastCopy",e.Feedback="Feedback",e.FeedbackExtremelyDissatisfied="FeedbackExtremelyDissatisfied",e.FeedbackExtremelySatisfied="FeedbackExtremelySatisfied",e.FeedbackSomewhatDissatisfied="FeedbackSomewhatDissatisfied",e.FeedbackSomewhatSatisfied="FeedbackSomewhatSatisfied",e.Fhir="Fhir",e.FileFilled="FileFilled",e.FileRegular="FileRegular",e.FillDown="FillDown",e.FillUp="FillUp",e.Filter="Filter",e.FitToView="FitToView",e.FluentView="FluentView",e.Folder="Folder",e.FormatText="FormatText",e.FullScreen="FullScreen",e.Function="Function",e.Gear="Gear",e.GetData="GetData",e.GoogleAnalytics="GoogleAnalytics",e.GoToColumn="GoToColumn",e.GridAutoFilter="GridAutoFilter",e.GridCombineFiles="GridCombineFiles",e.GridEditFilter="GridEditFilter",e.GridExpandColumn="GridExpandColumn",e.GridSortedAscending="GridSortedAscending",e.GridSortedDescending="GridSortedDescending",e.GroupBy="GroupBy",e.HorizontalLayout="HorizontalLayout",e.IndexColumn="IndexColumn",e.Info="Info",e.InsertColumnsLeft="InsertColumnsLeft",e.InsertColumnsRight="InsertColumnsRight",e.InsertRowsAbove="InsertRowsAbove",e.InsertRowsBelow="InsertRowsBelow",e.InvokeCustomFunction="InvokeCustomFunction",e.JoinKindFullOuter="JoinKindFullOuter",e.JoinKindInner="JoinKindInner",e.JoinKindLeftAnti="JoinKindLeftAnti",e.JoinKindLeftOuter="JoinKindLeftOuter",e.JoinKindRightAnti="JoinKindRightAnti",e.JoinKindRightOuter="JoinKindRightOuter",e.KeepBottomRows="KeepBottomRows",e.KeepDuplicates="KeepDuplicates",e.KeepErrors="KeepErrors",e.KeepRange="KeepRange",e.KeepTopRows="KeepTopRows",e.Key="Key",e.KeyboardShortcuts="KeyboardShortcuts",e.Kusto="Kusto",e.LightBulb="LightBulb",e.LinkedEntity="LinkedEntity",e.List="List",e.ListToTable="ListToTable",e.Load="Load",e.Logical="Logical",e.ManageConnections="ManageConnections",e.ManageDataSources="ManageDataSources",e.Map="Map",e.MapToEntity="MapToEntity",e.MashupGraphCollapse="MashupGraphCollapse",e.MashupGraphExpand="MashupGraphExpand",e.MashupGraphRelated="MashupGraphRelated",e.MathInfo="MathInfo",e.MergeColumns="MergeColumns",e.MergeQueries="MergeQueries",e.MergeQueriesAsNew="MergeQueriesAsNew",e.More="More",e.MoveColumns="MoveColumns",e.MoveColumnsLeft="MoveColumnsLeft",e.MoveColumnsRight="MoveColumnsRight",e.MoveColumnsToBeginning="MoveColumnsToBeginning",e.MoveColumnsToEnd="MoveColumnsToEnd",e.MoveDown="MoveDown",e.MoveLeft="MoveLeft",e.MoveRight="MoveRight",e.MoveUp="MoveUp",e.Neutral="Neutral",e.Number="Number",e.OData="OData",e.Odbc="Odbc",e.OnlineServicesFilled="OnlineServicesFilled",e.OnlineServicesRegular="OnlineServicesRegular",e.OtherFilled="OtherFilled",e.OtherRegular="OtherRegular",e.Parameter="Parameter",e.Parquet="Parquet",e.Parse="Parse",e.Paste="Paste",e.Pdf="Pdf",e.Pencil="Pencil",e.Percentage="Percentage",e.PivotColumn="PivotColumn",e.Plus="Plus",e.PowerBI="PowerBI",e.PowerBIReport="PowerBIReport",e.PowerPlatformFilled="PowerPlatformFilled",e.PowerPlatformRegular="PowerPlatformRegular",e.PowerQuery="PowerQuery",e.PrimitiveToList="PrimitiveToList",e.PrivacyBuffering="PrivacyBuffering",e.PromoteHeaders="PromoteHeaders",e.Properties="Properties",e.QuerySettings="QuerySettings",e.QuestionMark="QuestionMark",e.Record="Record",e.Reference="Reference",e.Refresh="Refresh",e.RemoveAlternateRows="RemoveAlternateRows",e.RemoveBlankRows="RemoveBlankRows",e.RemoveBottomRows="RemoveBottomRows",e.RemoveColumns="RemoveColumns",e.RemoveDuplicates="RemoveDuplicates",e.RemoveErrors="RemoveErrors",e.RemoveOtherColumns="RemoveOtherColumns",e.RemoveRows="RemoveRows",e.RemoveTopRows="RemoveTopRows",e.Rename="Rename",e.ReplaceErrors="ReplaceErrors",e.ReplaceValues="ReplaceValues",e.Reset="Reset",e.ReverseRows="ReverseRows",e.Rounding="Rounding",e.Salesforce="Salesforce",e.Save="Save",e.Scientific="Scientific",e.Script="Script",e.Sensitivity="Sensitivity",e.Settings="Settings",e.Share="Share",e.SharePoint="SharePoint",e.Sheet="Sheet",e.SheetAccess="SheetAccess",e.SheetCsv="SheetCsv",e.SheetDataflow="SheetDataflow",e.SheetExcel="SheetExcel",e.SheetHtml="SheetHtml",e.SheetJson="SheetJson",e.SheetSql="SheetSql",e.SheetText="SheetText",e.SheetXml="SheetXml",e.SortAscending="SortAscending",e.SortDescending="SortDescending",e.Spark="Spark",e.Sparkle="Sparkle",e.Sparkle_Monocolor="Sparkle_Monocolor",e.SplitColumn="SplitColumn",e.Standard="Standard",e.Statistics="Statistics",e.Success="Success",e.Suggestion="Suggestion",e.Support="Support",e.Table="Table",e.TableSchema="TableSchema",e.Template="Template",e.Text="Text",e.TextFile="TextFile",e.Time="Time",e.ToTable="ToTable",e.Transpose="Transpose",e.Trigonometry="Trigonometry",e.UnknownType="UnknownType",e.Unlink="Unlink",e.UnpivotColumns="UnpivotColumns",e.Vertica="Vertica",e.VerticalLayout="VerticalLayout",e.View="View",e.Visual="Visual",e.Wand="Wand",e.Warning="Warning",e.Web="Web",e.Website="Website",e.WholeNumber="WholeNumber",e.Worksheet="Worksheet"}(kr||(kr={})),function(e){e.FullRefresh="FullRefresh",e.IncrementalRefresh="IncrementalRefresh"}(Yo||(Yo={})),function(e){e.Days="Days",e.Months="Months",e.Quarters="Quarters",e.Years="Years"}(Br||(Br={})),function(e){e.Custom="Custom",e.Standard="Standard",e.System="System"}(Ur||(Ur={})),function(e){e.EvaluateTop1000Rows="EvaluateTop1000Rows",e.EvaluateEntireDataset="EvaluateEntireDataset"}(Nr||(Nr={})),function(e){e.Action="Action.Type",e.Any="Any.Type",e.Binary="Binary.Type",e.Byte="Byte.Type",e.Character="Character.Type",e.Currency="Currency.Type",e.Date="Date.Type",e.DateTime="DateTime.Type",e.DateTimeZone="DateTimeZone.Type",e.Decimal="Decimal.Type",e.Double="Double.Type",e.Duration="Duration.Type",e.Function="Function.Type",e.Int16="Int16.Type",e.Int32="Int32.Type",e.Int64="Int64.Type",e.Int8="Int8.Type",e.List="List.Type",e.Logical="Logical.Type",e.None="None.Type",e.Null="Null.Type",e.Number="Number.Type",e.Percentage="Percentage.Type",e.Record="Record.Type",e.Single="Single.Type",e.Table="Table.Type",e.Text="Text.Type",e.Time="Time.Type",e.Type="Type.Type"}(zr||(zr={})),function(e){e.MultiLine="MultiLine",e.SingleLine="SingleLine"}(_i||(_i={})),function(e){e.Always="Always",e.BasedOnProjectSettings="BasedOnProjectSettings",e.Never="Never"}(Hr||(Hr={})),function(e){e.Collapsed="Collapsed",e.Expanded="Expanded",e.Maximized="Maximized"}(Ci||(Ci={})),function(e){e.Host="Host",e.Initialization="Initialization",e.UserInteraction="UserInteraction"}(yi||(yi={})),function(e){e.Action="action",e.Any="any",e.AnyNonNull="anynonnull",e.Binary="binary",e.Currency="currency",e.Date="date",e.DateTime="datetime",e.DateTimeZone="datetimezone",e.Duration="duration",e.Exception="exception",e.Function="function",e.List="list",e.Logical="logical",e.None="none",e.Null="null",e.Number="number",e.Percentage="percentage",e.Record="record",e.Table="table",e.Text="text",e.Time="time",e.Type="type",e.WholeNumber="wholenumber"}(Zo||(Zo={})),function(e){e.Auto="Auto",e.Percent="Percent",e.Pixels="Pixels"}(Wr||(Wr={})),function(e){e.Cells="Cells",e.Columns="Columns",e.Rows="Rows"}(qn||(qn={})),function(e){e.Access="access",e.ActiveDirectory="activeDirectory",e.AdobeAnalytics="adobeAnalytics",e.AnalysisServices="analysisServices",e.AzureAnalysisServices="azureAnalysisServices",e.AzureBlobs="azureBlobs",e.AzureDataLake="azureDataLake",e.AzureHdInsightHdfs="azureHdInsightHdfs",e.AzureSql="azureSql",e.AzureSqlDw="azureSqlDW",e.AzureTables="azureTables",e.Blank="blank",e.Db2="db2",e.Dynamics365="dynamics365",e.EnterData="enterData",e.Excel="excel",e.ExchangeOnline="exchangeOnline",e.FolderContents="folderContents",e.FolderFiles="folderFiles",e.GoogleAnalytics="googleAnalytics",e.Json="json",e.MySql="mySql",e.Odata="odata",e.Odbc="odbc",e.Oracle="oracle",e.Parquet="parquet",e.Pdf="pdf",e.PostgreSql="postgreSql",e.SharepointFolder="sharepointFolder",e.SharepointList="sharepointList",e.SharepointOnlineList="sharepointOnlineList",e.SalesforceObjects="salesforceObjects",e.SalesforceReports="salesforceReports",e.SapBusinessWarehouseAppServer="SapBusinessWarehouseAppServer",e.SapBusinessWarehouseMessageServer="SapBusinessWarehouseMessageServer",e.SapHanaDatabase="SapHanaDatabase",e.Sql="sql",e.Sybase="sybase",e.Teradata="teradata",e.TextCsv="textCsv",e.Web="web",e.WebApi="webApi",e.Xml="xml"}(jr||(jr={})),function(e){e.Extension="extension"}(Kr||(Kr={})),function(e){e.Failed="Failed",e.Idle="Idle",e.InProgress="InProgress",e.Success="Success"}($r||($r={})),function(e){e.WaitingToStart="WaitingToStart",e.EvaluatingRelationships="EvaluatingRelationships",e.WaitingForOtherEntities="WaitingForOtherEntities",e.EvaluatingSchema="EvaluatingSchema",e.DeletingEntity="DeletingEntity",e.CreatingEntity="CreatingEntity",e.DeletingExistingData="DeletingExistingData",e.EvaluatingData="EvaluatingData",e.ProvisioningTempStorage="ProvisioningTempStorage",e.UploadingDataToTempStorage="UploadingDataToTempStorage",e.InitializingLoadSession="InitializingLoadSession",e.WaitingForLoadSessionToInitialize="WaitingForLoadSessionToInitialize",e.CreatingDefinitionGroup="CreatingDefinitionGroup",e.CreatingDefinitionGroupDetails="CreatingDefinitionGroupDetails",e.UploadingData="UploadingData",e.GeneratingFieldMapping="GeneratingFieldMapping",e.AutoSequencing="AutoSequencing",e.ExecutingLoad="ExecutingLoad",e.WaitingForLoadToComplete="WaitingForLoadToComplete",e.GeneratingExecutionErrors="GeneratingExecutionErrors",e.Success="Success",e.SignInRequired="SignInRequired",e.DeletingExistingDataFailed="DeletingExistingDataFailed",e.EvaluationFailed="EvaluationFailed",e.CreatingEntityFailed="CreatingEntityFailed",e.DeletingEntityFailed="DeletingEntityFailed",e.RetrievingEntityMetadataFailed="RetrievingEntityMetadataFailed",e.Canceled="Canceled",e.LoadToCdsPartiallySucceeded="LoadToCdsPartiallySucceeded",e.LoadToCdsFailed="LoadToCdsFailed",e.LoadFailedDueToErrorInOtherEntity="LoadFailedDueToErrorInOtherEntity",e.Unknown="Unknown"}(qo||(qo={})),function(e){e.Composition="Composition",e.Conditional="Conditional",e.CountDistinctValues="CountDistinctValues",e.CountValues="CountValues",e.Date_Age="Date_Age",e.Date_CombineWithTime="Date_CombineWithTime",e.Date_Day="Date_Day",e.Date_DayOfWeek="Date_DayOfWeek",e.Date_DayOfWeekName="Date_DayOfWeekName",e.Date_DayOfYear="Date_DayOfYear",e.Date_DaysInMonth="Date_DaysInMonth",e.Date_Earliest="Date_Earliest",e.Date_EndOfDay="Date_EndOfDay",e.Date_EndOfMonth="Date_EndOfMonth",e.Date_EndOfQuarter="Date_EndOfQuarter",e.Date_EndOfWeek="Date_EndOfWeek",e.Date_EndOfYear="Date_EndOfYear",e.Date_From="Date_From",e.Date_Latest="Date_Latest",e.Date_Month="Date_Month",e.Date_MonthName="Date_MonthName",e.Date_QuarterOfYear="Date_QuarterOfYear",e.Date_StartOfDay="Date_StartOfDay",e.Date_StartOfMonth="Date_StartOfMonth",e.Date_StartOfQuarter="Date_StartOfQuarter",e.Date_StartOfWeek="Date_StartOfWeek",e.Date_StartOfYear="Date_StartOfYear",e.Date_SubtractDays="Date_SubtractDays",e.Date_WeekOfMonth="Date_WeekOfMonth",e.Date_WeekOfYear="Date_WeekOfYear",e.Date_Year="Date_Year",e.DateTime_Earliest="DateTime_Earliest",e.DateTime_From="DateTime_From",e.DateTime_Latest="DateTime_Latest",e.DateTime_Subtract="DateTime_Subtract",e.DateTime_SubtractDays="DateTime_SubtractDays",e.DateTimeZone_Earliest="DateTimeZone_Earliest",e.DateTimeZone_From="DateTimeZone_From",e.DateTimeZone_Latest="DateTimeZone_Latest",e.DateTimeZone_Subtract="DateTimeZone_Subtract",e.DateTimeZone_SubtractDays="DateTimeZone_SubtractDays",e.DateTimeZone_ToLocal="DateTimeZone_ToLocal",e.Number_Abs="Number_Abs",e.Number_Acos="Number_Acos",e.Number_Asin="Number_Asin",e.Number_Atan="Number_Atan",e.Number_Average="Number_Average",e.Number_Cos="Number_Cos",e.Number_Cube="Number_Cube",e.Number_Divide="Number_Divide",e.Number_Exp="Number_Exp",e.Number_Factorial="Number_Factorial",e.Number_From="Number_From",e.Number_IntegerDivide="Number_IntegerDivide",e.Number_IsEven="Number_IsEven",e.Number_IsOdd="Number_IsOdd",e.Number_Ln="Number_Ln",e.Number_Log10="Number_Log10",e.Number_Maximum="Number_Maximum",e.Number_Median="Number_Median",e.Number_Minimum="Number_Minimum",e.Number_Modulo="Number_Modulo",e.Number_MultiplyColumnAndConstant="Number_MultiplyColumnAndConstant",e.Number_MultiplyColumns="Number_MultiplyColumns",e.Number_PercentOf="Number_PercentOf",e.Number_Power="Number_Power",e.Number_Range="Number_Range",e.Number_Round="Number_Round",e.Number_RoundDown="Number_RoundDown",e.Number_RoundUp="Number_RoundUp",e.Number_Sign="Number_Sign",e.Number_Sin="Number_Sin",e.Number_Sqrt="Number_Sqrt",e.Number_Square="Number_Square",e.Number_StandardDeviation="Number_StandardDeviation",e.Number_Subtract="Number_Subtract",e.Number_SumColumnAndConstant="Number_SumColumnAndConstant",e.Number_SumColumns="Number_SumColumns",e.Number_Tan="Number_Tan",e.Reference="Reference",e.Text_AfterDelimiter="Text_AfterDelimiter",e.Text_BeforeDelimiter="Text_BeforeDelimiter",e.Text_BetweenDelimiters="Text_BetweenDelimiters",e.Text_Combine="Text_Combine",e.Text_End="Text_End",e.Text_Length="Text_Length",e.Text_Literal="Text_Literal",e.Text_Middle="Text_Middle",e.Text_Reference="Text_Reference",e.Text_Remove="Text_Remove",e.Text_Replace="Text_Replace",e.Text_Select="Text_Select",e.Text_Start="Text_Start",e.Time_Earliest="Time_Earliest",e.Time_EndOfHour="Time_EndOfHour",e.Time_From="Time_From",e.Time_Hour="Time_Hour",e.Time_Latest="Time_Latest",e.Time_Minute="Time_Minute",e.Time_Second="Time_Second",e.Time_StartOfHour="Time_StartOfHour",e.Time_Subtract="Time_Subtract"}(Xi||(Xi={})),function(e){e.UnknownError="UnknownError",e.InvalidConnectionProvider="InvalidConnectionProvider"}(Qr||(Qr={})),function(e){e.Adf="Adf",e.CdsA="CdsA",e.Desktop="Desktop",e.DmtsPowerBi="DmtsPowerBi",e.DmtsSa="DmtsSa",e.None="None",e.PowerApps="PowerApps",e.SelfHosted="SelfHosted"}(Jr||(Jr={})),function(e){e.SqlDw="SqlDw",e.SynapseOnDemand="SynapseOnDemand"}(Xr||(Xr={})),function(e){e.Error="Error",e.Warning="Warning"}(Yi||(Yi={})),function(e){e[e.sunday=0]="sunday",e[e.monday=1]="monday",e[e.tuesday=2]="tuesday",e[e.wednesday=3]="wednesday",e[e.thursday=4]="thursday",e[e.friday=5]="friday",e[e.saturday=6]="saturday"}(bi||(bi={})),function(e){e.Boolean="Boolean",e.DateAndTime="DateAndTime",e.DateOnly="DateOnly",e.Decimal="Decimal",e.Double="Double",e.Integer="Integer",e.Lookup="Lookup",e.Memo="Memo",e.Money="Money",e.String="String"}(Yr||(Yr={})),function(e){e.Resource="Resource",e.Personal="Personal",e.VirtualNetwork="VirtualNetwork"}(Zr||(Zr={})),function(e){e[e.none=0]="none",e[e.fetchDataSourceDetails=1]="fetchDataSourceDetails",e[e.schemaRowsets=2]="schemaRowsets",e[e.mdDataset=4]="mdDataset",e[e.columnOrdinals=8]="columnOrdinals",e[e.statefulSessions=16]="statefulSessions",e[e.directQuerySingleSignOn_Kerberos=32]="directQuerySingleSignOn_Kerberos",e[e.mashupCustomConnectors=64]="mashupCustomConnectors",e[e.mashupCustomConnectorsForODG=128]="mashupCustomConnectorsForODG",e[e.sapHanaSSOManagedProvider=256]="sapHanaSSOManagedProvider",e[e.filteringMashupExtensionsOnODG=512]="filteringMashupExtensionsOnODG",e[e.certifiedConnectors=1024]="certifiedConnectors",e[e.mashupAzureConnectorsCachingPool=2048]="mashupAzureConnectorsCachingPool",e[e.skipTestConnection=4096]="skipTestConnection",e[e.encryptedConnectionOptionOverride=8192]="encryptedConnectionOptionOverride",e[e.mashupADONetProviderSSO=16384]="mashupADONetProviderSSO",e[e.authTypeSAS=32768]="authTypeSAS",e[e.powerQueryOnlineCachingPool=65536]="powerQueryOnlineCachingPool",e[e.ssoTestConnection=131072]="ssoTestConnection",e[e.mashupIgnorePreviouslyCachedData=262144]="mashupIgnorePreviouslyCachedData",e[e.mashupQueryStatus=524288]="mashupQueryStatus",e[e.multipleResults=1048576]="multipleResults",e[e.renewDiagnosticsStorageAccess=2097152]="renewDiagnosticsStorageAccess",e[e.oAuthResource=4194304]="oAuthResource",e[e.statefulDbConnection=8388608]="statefulDbConnection",e[e.discoverDatasourcesUsingMashupDSR=16777216]="discoverDatasourcesUsingMashupDSR"}(qr||(qr={})),function(e){e.Critical="Critical",e.Error="Error",e.Warning="Warning",e.Informational="Informational",e.Verbose="Verbose"}(ei||(ei={})),function(e){e[e.connectionNotFound=0]="connectionNotFound",e[e.failedToRefreshConnection=1]="failedToRefreshConnection",e[e.unauthorizedConnection=2]="unauthorizedConnection"}(ti||(ti={})),function(e){e.DifferentUser="DifferentUser",e.NoMatchingConnection="NoMatchingConnection",e.NonOAuthConnection="NonOAuthConnection ",e.NoToken="NoToken"}(Mi||(Mi={})),function(e){e.Active="ActivePowerAppsEnvironment",e.HardDeleted="HardDeletedPowerAppsEnvironment",e.SoftDeleted="SoftDeletedPowerAppsEnvironment",e.Unknown="UnknownPowerAppsEnvironment"}(wi||(wi={})),function(e){e.MappingEditorProperties="MappingEditorProperties"}(Pi||(Pi={})),function(e){e[e.day=0]="day",e[e.month=1]="month",e[e.quarter=2]="quarter",e[e.year=3]="year"}(Si||(Si={})),function(e){e.Minutes="Minutes",e.Hours="Hours",e.Days="Days",e.Weeks="Weeks",e.Months="Months"}(Ei||(Ei={})),function(e){e[e.uploadFileMalformedMultipartContent=1]="uploadFileMalformedMultipartContent",e[e.uploadFileUnsupportedFileExtension=2]="uploadFileUnsupportedFileExtension",e[e.oAuthStartLoginFailed=3]="oAuthStartLoginFailed",e[e.oAuthFinishLoginFailed=4]="oAuthFinishLoginFailed",e[e.normalizeResourceFailed=8]="normalizeResourceFailed",e[e.editVersionMismatch=9]="editVersionMismatch",e[e.updateGatewayVersion=10]="updateGatewayVersion",e[e.mashupTooLong=11]="mashupTooLong",e[e.gatewayBindingMultipleMatchingGatewayError=12]="gatewayBindingMultipleMatchingGatewayError",e[e.gatewayBindingNoMatchingDataSourceError=13]="gatewayBindingNoMatchingDataSourceError",e[e.gatewayBindingNoMatchingGatewayError=14]="gatewayBindingNoMatchingGatewayError"}(Oi||(Oi={})),function(e){e.NoTextExampleFound="NoTextExampleFound",e.NoTextProgramFound="NoTextProgramFound",e.NoTextProgramFoundBeforeCancellation="NoTextProgramFoundBeforeCancellation",e.NoTextProgramFoundBeforeTimeout="NoTextProgramFoundBeforeTimeout"}(ea||(ea={})),function(e){e.Successful="Successful",e.Failed="Failed",e.SessionExpired="SessionExpired"}(Di||(Di={})),function(e){e.AM="AM",e.PM="PM"}(Ti||(Ti={})),function(e){e[e.anonymous=1]="anonymous",e[e.basic=2]="basic",e[e.oAuth2=3]="oAuth2",e[e.windows=4]="windows",e[e.key=5]="key",e[e.sas=6]="sas",e[e.servicePrincipal=7]="servicePrincipal"}(xi||(xi={})),function(e){e.Access="access",e.ActiveDirectory="activeDirectory",e.AdobeAnalytics="adobeAnalytics",e.AnalysisServices="analysisServices",e.AzureAnalysisServices="azureAnalysisServices",e.AzureBlobs="azureBlobs",e.AzureDataLake="azureDataLake",e.AzureHdInsightHdfs="azureHdInsightHdfs",e.AzureSql="azureSql",e.AzureSqlDw="azureSqlDW",e.AzureTables="azureTables",e.Blank="blank",e.Db2="db2",e.Dynamics365="dynamics365",e.EnterData="enterData",e.Excel="excel",e.ExchangeOnline="exchangeOnline",e.FolderContents="folderContents",e.FolderFiles="folderFiles",e.GoogleAnalytics="googleAnalytics",e.Json="json",e.MySql="mySql",e.Odata="odata",e.Odbc="odbc",e.Oracle="oracle",e.Parquet="parquet",e.Pdf="pdf",e.PostgreSql="postgreSql",e.SharepointFolder="sharepointFolder",e.SharepointList="sharepointList",e.SharepointOnlineList="sharepointOnlineList",e.SalesforceObjects="salesforceObjects",e.SalesforceReports="salesforceReports",e.SapBusinessWarehouseAppServer="SapBusinessWarehouseAppServer",e.SapBusinessWarehouseMessageServer="SapBusinessWarehouseMessageServer",e.SapHanaDatabase="SapHanaDatabase",e.Sql="sql",e.Sybase="sybase",e.Teradata="teradata",e.TextCsv="textCsv",e.Web="web",e.WebApi="webApi",e.Xml="xml"}(Zi||(Zi={})),function(e){e.Automatic="Automatic",e.Explicit="Explicit",e.Fixed="Fixed"}(n||(n={})),function(e){e.Count="Count",e.ErrorCount="ErrorCount",e.NullCount="NullCount",e.DistinctCount="DistinctCount",e.UniqueCount="UniqueCount",e.Min="Min",e.Max="Max",e.ValueDistribution="ValueDistribution",e.Average="Average",e.EmptyStringCount="EmptyStringCount",e.TextLengthDistribution="TextLengthDistribution",e.NaNCount="NaNCount",e.ZeroCount="ZeroCount",e.EvenCount="EvenCount",e.OddCount="OddCount",e.StandardDeviation="StandardDeviation",e.SignDistribution="SignDistribution",e.ParityDistribution="ParityDistribution",e.TrueCount="TrueCount",e.FalseCount="FalseCount",e.YearDistribution="YearDistribution",e.MonthDistribution="MonthDistribution",e.DayDistribution="DayDistribution",e.WeekOfYearDistribution="WeekOfYearDistribution",e.DayOfWeekDistribution="DayOfWeekDistribution",e.AmPmDistribution="AmPmDistribution",e.HourDistribution="HourDistribution"}(b||(b={})),function(e){e.AccessPremiumConnectionNotAllowed="AccessPremiumConnectionNotAllowed",e.AdfConnectionEvaluationError="AdfConnectionEvaluationError",e.CdsaFeatureNotAvailableError="CdsaFeatureNotAvailableError",e.ConnectionApiPolicyViolation="ConnectionApiPolicyViolation",e.ConnectionCouldNotBeCreated="ConnectionCouldNotBeCreated",e.ConnectionCouldNotBeUpdated="ConnectionCouldNotBeUpdated",e.ConnectionKindNotSupported="ConnectionKindNotSupported",e.ConnectionNotFound="ConnectionNotFound",e.ConnectionShareNotAllowedInEnvironment="ConnectionShareNotAllowedInEnvironment",e.DataAccessError="DataAccessError",e.DataflowDatasourceIsReadOnly="DataflowDatasourceIsReadOnly",e.DataSourceUnreachableOrGatewayRequired="DataSourceUnreachableOrGatewayRequired",e.DuplicateDataSourceNameError="DuplicateDataSourceNameError",e.EncryptionNotSupportedForKindAndGateway="EncryptionNotSupportedForKindAndGateway",e.ExceededLimit="ExceededLimit",e.GatewayDetailsNotFound="GatewayDetailsNotFound",e.GatewayNotAuthorized="GatewayNotAuthorized",e.GatewayUnreachable="GatewayUnreachable",e.GatewayUnsupportedByLicense="GatewayUnsupportedByLicense",e.InvalidCredentials="InvalidCredentials",e.InvalidPath="InvalidPath",e.OAuthLoginFailed="OAuthLoginFailed",e.OboSignInError="OboSignInError",e.OboTokenAcquisitionFailed="OboTokenAcquisitionFailed",e.TooManyConnections="TooManyConnections",e.UnknownDmtsError="UnknownDmtsError",e.UnknownError="UnknownError",e.UnknownGatewayError="UnknownGatewayError",e.Unsupported="Unsupported"}(R||(R={})),function(e){e.AddStep="AddStep",e.CreateQuery="CreateQuery",e.DeleteQuery="DeleteQuery",e.ExplainQuery="ExplainQuery",e.ExplainStep="ExplainStep"}(A||(A={})),function(e){e.CouldNotExplainQuery="CouldNotExplainQuery",e.CouldNotGenerateQuery="CouldNotGenerateQuery",e.CouldNotGenerateStep="CouldNotGenerateStep",e.DataItemsMissing="DataItemsMissing",e.LanguageNotSupported="LanguageNotSupported",e.OutOfScope="OutOfScope",e.QueryNotFound="QueryNotFound",e.SkillNotFound="SkillNotFound",e.TableNotFound="TableNotFound",e.Unknown="Unknown"}(T||(T={})),function(e){e.Action="Action",e.Error="Error"}(z||(z={})),function(e){e.Automatic="Automatic",e.Explicit="Explicit",e.Fixed="Fixed"}(_e||(_e={})),function(e){e.Singleton="Singleton",e.Database="Database",e.Uri="Uri",e.Custom="Custom"}(Me||(Me={})),function(e){e.BuiltIn="BuiltIn",e.Extension="Extension"}(we||(we={})),function(e){e.JsonDsr="JsonDsr",e.MScript="MScript",e.QueryModel="QueryModel"}(Ce||(Ce={})),function(e){e.DSR="DSR",e.Reference="Reference",e.Script="Script"}(ve||(ve={})),function(e){e.Cluster="Cluster",e.Database="Database",e.Lakehouse="Lakehouse",e.Object="Object",e.Schema="Schema",e.Server="Server",e.Table="Table",e.Warehouse="Warehouse",e.Workspace="Workspace"}(ke||(ke={})),function(e){e.Constant="Constant",e.Duplicate="Duplicate",e.Empty="Empty",e.Index="Index"}(We||(We={})),function(e){e[e.false=0]="false",e[e.true=1]="true",e[e.notApplicable=2]="notApplicable",e[e.existingConnection=3]="existingConnection"}(mt||(mt={})),function(e){e.ApiHubTokenExchangeFailed="ApiHubTokenExchangeFailed",e.Cancelled="Cancelled",e.DuplicateEvaluationId="DuplicateEvaluationId",e.ErrorGettingPowerBIPrivateLinkConfig="ErrorGettingPowerBIPrivateLinkConfig",e.EvaluationAgentNotFound="EvaluationAgentNotFound",e.EvaluationQuotaReached="EvaluationQuotaReached",e.ExternalServiceError="ExternalServiceError",e.GatewayDetailsNotFound="GatewayDetailsNotFound",e.GatewayNeeded="GatewayNeeded",e.GatewayNotAuthorized="GatewayNotAuthorized",e.GatewayNotFound="GatewayNotFound",e.GatewayUnknownError="GatewayUnknownError",e.GatewayUnreachable="GatewayUnreachable",e.GatewayUpgradeRequired="GatewayUpgradeRequired",e.GatewayUserError="GatewayUserError",e.MashupEntityNotFound="MashupEntityNotFound",e.MaxConcurrentEvaluationsReached="MaxConcurrentEvaluationsReached",e.NetworkAccessDenied="NetworkAccessDenied",e.NoPowerBiClusterForTenant="NoPowerBiClusterForTenant",e.ParameterNotFound="ParameterNotFound",e.PowerAppsEnvironmentNotFound="PowerAppsEnvironmentNotFound",e.QueryNameAndQueryScriptBothSpecified="QueryNameAndQueryScriptBothSpecified",e.QueryNameAndQueryScriptNotSpecified="QueryNameAndQueryScriptNotSpecified",e.QueryNotFound="QueryNotFound",e.StepNotFound="StepNotFound",e.UnableToContactBackend="UnableToContactBackend",e.Unknown="Unknown",e.UnsupportedKind="UnsupportedKind",e.ValueTooComplex="ValueTooComplex"}(Ft||(Ft={})),function(e){e.Path="Path",e.QueryScript="QueryScript"}(_t||(_t={})),function(e){e.AutoFilterColumnValues="AutoFilterColumnValues",e.BinaryMetadata="BinaryMetadata",e.ConnectorRows="ConnectorRows",e.ConnectorSchema="ConnectorSchema",e.CubeAllowedValues="CubeAllowedValues",e.CubeDisplayFolders="CubeDisplayFolders",e.CubeParameters="CubeParameters",e.DataSourceQuery="DataSourceQuery",e.DetailsPreview="DetailsPreview",e.DetectTableHeaderAndColumnTypes="DetectTableHeaderAndColumnTypes",e.DsrDetailsFetching="DsrDetailsFetching",e.ExcelTableInferenceGetInferredTables="ExcelTableInferenceGetInferredTables",e.ExpandColumnNames="ExpandColumnNames",e.FunctionBrowser="FunctionBrowser",e.JsonTableInferenceGetJsonText="JsonTableInferenceGetJsonText",e.LoadToCdsCreateEntitiesRelationships="LoadToCdsCreateEntitiesRelationships",e.LoadToCdsRelationships="LoadToCdsRelationships",e.LoadToCdsSchema="LoadToCdsSchema",e.MappingEditorQueryProfiling="MappingEditorQueryProfiling",e.MappingEditorSchemaResult="MappingEditorSchemaResult",e.MappingEditorTypeMetadata="MappingEditorTypeMetadata",e.MashupLoad="MashupLoad",e.MergeMatchAnalysis="MergeMatchAnalysis",e.MergeQueriesPreview="MergeQueriesPreview",e.MergeQueriesSuggestionsLeftCandidatePreview="MergeQueriesSuggestionsLeftCandidatePreview",e.MergeQueriesSuggestionsRightCandidatePreview="MergeQueriesSuggestionsRightCandidatePreview",e.NaturalLanguageValidation="NaturalLanguageValidation",e.NavigatorCubeAllowedValues="NavigatorCubeAllowedValues",e.NavigatorCubeParameters="NavigatorCubeParameters",e.NavigatorCubePreview="NavigatorCubePreview",e.NavigatorDiscoverRelatedTables="NavigatorDiscoverRelatedTables",e.NavigatorPreview="NavigatorPreview",e.NavigatorTemporaryQueryForIndirectionNode="NavigatorTemporaryQueryForIndirectionNode",e.Preview="Preview",e.QueryAnalysis="QueryAnalysis",e.QueryPlan="QueryPlan",e.QuerySanitizer="QuerySanitizer",e.QuerySanitizerAnalysis="QuerySanitizerAnalysis",e.QuerySanitizerQueryAnalysis="QuerySanitizerQueryAnalysis",e.QueryScriptPreview="QueryScriptPreview",e.SemanticEntitySets="SemanticEntitySets",e.SemanticDataGetData="SemanticDataGetData",e.SemanticDataList="SemanticDataList",e.SemanticDataSearchInDataflow="SemanticDataSearchInDataflow",e.SplitColumnInferMultiplePositions="SplitColumnInferMultiplePositions",e.SplitColumnNumberOfColumns="SplitColumnNumberOfColumns",e.StepAnalysis="StepAnalysis",e.TableProfiler="TableProfiler",e.TextByExampleGetText="TextByExampleGetText",e.WebByExampleExecuteSelectors="WebByExampleExecuteSelectors",e.WebByExampleGetHtml="WebByExampleGetHtml"}(Qe||(Qe={})),function(e){e.None="None",e.Any="Any",e.Access="Access",e.Excel="Excel",e.Json="Json",e.TextCsv="TextCsv",e.Pdf="Pdf",e.Xml="Xml"}(Ct||(Ct={})),function(e){e.List="List"}(Et||(Et={})),function(e){e.MenuItem="MenuItem",e.Separator="Separator"}(ft||(ft={})),function(e){e.Max="Max",e.Mean="Mean",e.Min="Min",e.Mode="Mode",e.RoundedMean="RoundedMean"}(kt||(kt={})),function(e){e.Cancelled="Cancelled",e.CombineFiles="CombineFiles",e.CsvTextSettings="CsvTextSettings",e.DataDiscovery="DataDiscovery",e.DataSources="DataSources",e.DataSourceSettings="DataSourceSettings",e.FolderPreview="FolderPreview",e.IncrementalRefreshSettings="IncrementalRefreshSettings",e.Loading="Loading",e.MappingEditor="MappingEditor",e.Navigator="Navigator",e.QueryEditor="QueryEditor",e.QuickCreate="QuickCreate",e.RecentDataPreview="RecentDataPreview",e.RefreshSettings="RefreshSettings",e.TemplateCredentials="TemplateCredentials",e.TemplateParameters="TemplateParameters",e.TextByExample="TextByExample"}(Kt||(Kt={})),function(e){e.Database="Database",e.File="File"}(Tn||(Tn={})),function(e){e.AlwaysWhenInferringAllColumnTypes="AlwaysWhenInferringAllColumnTypes",e.BasedOnMetadata="BasedOnMetadata",e.Never="Never"}(wn||(wn={})),function(e){e.Always="Always",e.Never="Never",e.HasNewLoadableQueries="HasNewLoadableQueries",e.NumberOfQueries="NumberOfQueries"}(qi||(qi={})),function(e){e.Equals="Equals",e.GreaterThan="GreaterThan",e.GreaterThanOrEqual="GreaterThanOrEqual",e.LessThan="LessThan",e.LessThanOrEqual="LessThanOrEqual"}(ta||(ta={})),function(e){e.Adf="Adf",e.Athena="Athena",e.CdsA="CdsA",e.CdsLite="CdsLite",e.CdsT="CdsT",e.CdsV1="CdsAdHoc",e.CustomerInsights="CustomerInsights",e.CustomerInsightsPPDF="CustomerInsightsPPDF",e.D365TalentInsights="D365TalentInsights",e.DataIntegration="DataIntegration",e.DesktopBootstrap="DesktopBootstrap",e.DesktopUITester="DesktopUITester",e.DmtsPowerBiExperimental="DmtsPowerBiExperimental",e.DmtsSaExperimental="DmtsSaExperimental",e.ExcelDesktop="ExcelDesktop",e.ExcelOnline="ExcelOnline",e.ExcelOnlineDmtsPowerBi="ExcelOnlineDmtsPowerBi",e.Experimental="Experimental",e.Flow="Flow",e.IAPDataflowTemplateReferenceApp="IAPDataflowTemplateReferenceApp",e.IntelligentOrderManagement="IntelligentOrderManagement",e.InternalPortal="InternalPortal",e.KustoViewDesigner="KustoViewDesigner",e.MashupEditorBootstrap="MashupEditorBootstrap",e.PowerAppsTeams="PowerAppsTeams",e.PowerBIDataMart="PowerBIDataMart",e.PowerBIModeling="PowerBIModeling",e.PowerBIModelingDmtsPowerBi="PowerBIModelingDmtsPowerBi",e.PowerBIPaginatedReports="PowerBIPaginatedReports",e.PowerBIPPDF="PowerBIPPDF",e.PowerBIReportView="PowerBIReportView",e.PowerPlatformDataflowAdlsGen2="PowerPlatformDataflowAdlsGen2",e.PowerPlatformDataflowsBootstrap="PowerPlatformDataflowsBootstrap",e.PowerPlatformExperimental="PowerPlatformExperimental",e.PowerQueryDesktop="PowerQueryDesktop",e.ProcessAdvisor="ProcessAdvisor",e.SupplyChainVisibility="SupplyChainVisibility",e.SustainabilityCloud="SustainabilityCloud",e.Synapse="Synapse",e.TridentDataflow="TridentDataflow",e.TridentDataPipeline="TridentDataPipeline",e.TridentDataverseOneLake="TridentDataverseOneLake",e.TridentDataWarehouse="TridentDataWarehouse",e.TridentEventStream="TridentEventStream",e.TridentKusto="TridentKusto",e.TridentLakehouse="TridentLakehouse",e.TridentLakeWarehouse="TridentLakeWarehouse",e.TridentMountedDataWarehouse="TridentMountedDataWarehouse",e.TridentOneLake="TridentOneLake",e.TridentReplicator="TridentReplicator",e.TridentSynapseLink="TridentSynapseLink"}(Ma||(Ma={})),function(e){e.Boolean="Boolean"}(el||(el={})),function(e){e.NaN="NaN",e.NegativeInfinity="NegativeInfinity",e.PositiveInfinity="PositiveInfinity",e.FormattedNumber="FormattedNumber",e.Number="Number"}(tl||(tl={})),function(e){e.Access="Access",e.ActiveDirectory="ActiveDirectory",e.AdoDotNet="AdoDotNet",e.AdobeAnalytics="AdobeAnalytics",e.AnalysisServices="AnalysisServices",e.AzureBlobs="AzureBlobs",e.AzureDataLakeStorage="AzureDataLakeStorage",e.AzureTables="AzureTables",e.Cdpa="CDPA",e.CurrentWorkbook="CurrentWorkbook",e.DB2="DB2",e.Environment="Environment",e.Essbase="Essbase",e.Exchange="Exchange",e.File="File",e.Folder="Folder",e.Ftp="Ftp",e.GoogleAnalytics="GoogleAnalytics",e.HDInsight="HDInsight",e.Hdfs="Hdfs",e.Informix="Informix",e.MQ="MQ",e.MicrosoftInformationProtection="MicrosoftInformationProtection",e.MySql="MySql",e.OData="OData",e.Odbc="Odbc",e.OleDb="OleDb",e.Oracle="Oracle",e.PostgreSQL="PostgreSQL",e.PowerBIDataflow="PowerBI",e.Python="Python",e.R="R",e.Salesforce="Salesforce",e.SapBusinessWarehouse="SapBusinessWarehouse",e.SapHana="SapHana",e.SharePoint="SharePoint",e.Spark="Spark",e.Sql="SQL",e.Staging="Staging",e.Sybase="Sybase",e.Teradata="Teradata",e.Web="Web"}(nl||(nl={})),function(e){e.TemplateMetadata="Metadata.json",e.MashupDocument="MashupDocument.pq",e.MashupMetadata="MashupMetadata.json"}(ol||(ol={})),function(e){e.GroupNestingLimitReached="GroupNestingLimitReached",e.NullMashupXml="NullMashupXml",e.Unknown="Unknown"}(il||(il={})),function(e){e.CompletedSuccessfully="CompletedSuccessfully",e.CompletedWithExpectedError="CompletedWithExpectedError",e.CompletedWithUnexpectedError="CompletedWithUnexpectedError",e.Started="Started"}(rl||(rl={})),function(e){e.Above="Above",e.Below="Below"}(al||(al={})),function(e){e.ErrorInvokingOpenAiApi="ErrorInvokingOpenAiApi",e.NoProgramFound="NoProgramFound",e.OpenAiApiKeyNotProvided="OpenAiApiKeyNotProvided",e.RequestCanceled="RequestCanceled"}(ll||(ll={})),function(e){e.Ascii="Ascii",e.Utf8="Utf8",e.Utf16="Utf16",e.Windows="Windows"}(sl||(sl={})),function(e){e.Excel="Excel",e.Json="Json",e.Parquet="Parquet",e.Text="Text"}(cl||(cl={})),function(e){e.Colon="Colon",e.Comma="Comma",e.None="None",e.Semicolon="Semicolon",e.Space="Space",e.Tab="Tab"}(ul||(ul={})),function(e){e.Even="Even",e.Odd="Odd"}(dl||(dl={})),function(e){e.None="None",e.Private="Private",e.Organizational="Organizational",e.Public="Public"}(pl||(pl={})),function(e){e.ChangeModes="ChangeModes"}(gl||(gl={})),function(e){e.QueryNeedsToFold="QueryNeedsToFold"}(hl||(hl={})),function(e){e.AzureBlob="AzureBlob",e.Database="Database"}(fl||(fl={})),function(e){e.DynamicPlanFolded="DynamicPlanFolded",e.DynamicPlanMightFold="DynamicPlanMightFold",e.DynamicPlanNotFolded="DynamicPlanNotFolded",e.DynamicPlanOpaque="DynamicPlanOpaque",e.ErrorRetrievingPlan="ErrorRetrievingPlan",e.FoldedQueryNotImplemented="FoldedQueryNotImplemented",e.FoldedQueryNull="FoldedQueryNull",e.FoldedWithQuery="FoldedWithQuery",e.NotFolded="NotFolded",e.NotFoldedPrivacyBuffering="NotFoldedPrivacyBuffering",e.NotTable="NotTable",e.OpaqueConstant="OpaqueConstant",e.UnexpectedPlanKind="UnexpectedPlanKind"}(ml||(ml={})),function(e){e.ActiveDirectory="ActiveDirectory",e.AdobeAnalytics="AdobeAnalytics",e.AmazonRedshift="AmazonRedshift",e.AnalysisServices="AnalysisServices",e.AzureAnalysisServices="AzureAnalysisServices",e.AzureBlobs="AzureBlobs",e.AzureDataExplorer="AzureDataExplorer",e.AzureDataLakeStorage="AzureDataLakeStorage",e.AzureTables="AzureTables",e.AIFunctions="AIFunctions",e.AIInsights="AIInsights",e.AzureMLFunctions="AzureMLFunctions",e.AIInsightsInProc="AIInsightsInProc",e.Cds="Cds",e.CommonDataService="CommonDataService",e.DataLake="DataLake",e.Dataverse="Dataverse",e.DB2="DB2",e.ElasticSearch="ElasticSearch",e.Exchange="Exchange",e.Fhir="Fhir",e.File="File",e.Folder="Folder",e.GoogleAnalytics="GoogleAnalytics",e.GoogleBigQuery="GoogleBigQuery",e.HDInsight="HDInsight",e.Impala="Impala",e.Kusto="Kusto",e.Lakehouse="Lakehouse",e.MySql="MySql",e.OData="OData",e.Odbc="Odbc",e.Oracle="Oracle",e.OracleERP="OracleERP",e.PostgreSQL="PostgreSQL",e.PowerBI="PowerBI",e.PowerBIDatamarts="PowerBIDatamarts",e.PowerPlatformDataflows="PowerPlatformDataflows",e.PQGenericInvokeTestExtension="PQGenericInvokeTestExtension",e.Salesforce="Salesforce",e.SapBusinessWarehouse="SapBusinessWarehouse",e.SAPERP="SAPERP",e.SapHana="SapHana",e.SharePoint="SharePoint",e.Snowflake="Snowflake",e.Spark="Spark",e.SQL="SQL",e.Sybase="Sybase",e.Teradata="Teradata",e.Vertica="Vertica",e.Warehouse="Warehouse",e.Web="Web"}(vl||(vl={})),function(e){e.CompilationError="CompilationError",e.InvalidQueryName="InvalidQueryName",e.ParsingError="ParsingError",e.Success="Success",e.UnexpectedDocumentKind="UnexpectedDocumentKind"}(_l||(_l={})),function(e){e.Failure="Failure",e.Success="Success"}(Cl||(Cl={})),function(e){e[e.endpointNotAvailableInRegion=0]="endpointNotAvailableInRegion",e[e.httpError=1]="httpError",e[e.invalidInput=2]="invalidInput",e[e.maxRetriesReached=3]="maxRetriesReached",e[e.modelError=4]="modelError"}(yl||(yl={})),function(e){e.Error="Error",e.Ok="Ok"}(bl||(bl={})),function(e){e.Default="Default",e.FastCopy="FastCopy"}(Ml||(Ml={})),function(e){e.ConnectionsAuthorizationFailed="ConnectionsAuthorizationFailed",e.DuplicateQueryId="DuplicateQueryId",e.DuplicateQueryName="DuplicateQueryName",e.DuplicateStepName="DuplicateStepName",e.InvalidQueryName="InvalidQueryName",e.MashupDocumentNotASectionDocument="MashupDocumentNotASectionDocument",e.ParsingError="ParsingError",e.UnexpectedQueryIdFormat="UnexpectedQueryIdFormat"}(wl||(wl={})),function(e){e.Custom="Custom",e.DropColumn="DropColumn",e.DropBlankRows="DropBlankRows",e.DropDuplicates="DropDuplicates",e.FillColumn="FillColumn",e.SplitColumn="SplitColumn",e.UnpivotColumns="UnpivotColumns",e.UnpivotOtherColumns="UnpivotOtherColumns"}(Pl||(Pl={})),function(e){e.Column="Column",e.ColumnType="ColumnType",e.Count="Count",e.ErrorCount="ErrorCount",e.NullCount="NullCount",e.DistinctCount="DistinctCount",e.UniqueCount="UniqueCount",e.Min="Min",e.Max="Max",e.ValueDistribution="ValueDistribution",e.Average="Average",e.EmptyStringCount="EmptyStringCount",e.TextLengthDistribution="TextLengthDistribution",e.NaNCount="NaNCount",e.ZeroCount="ZeroCount",e.EvenCount="EvenCount",e.OddCount="OddCount",e.StandardDeviation="StandardDeviation",e.SignDistribution="SignDistribution",e.ParityDistribution="ParityDistribution",e.TrueCount="TrueCount",e.FalseCount="FalseCount",e.YearDistribution="YearDistribution",e.MonthDistribution="MonthDistribution",e.DayDistribution="DayDistribution",e.WeekOfYearDistribution="WeekOfYearDistribution",e.DayOfWeekDistribution="DayOfWeekDistribution",e.AmPmDistribution="AmPmDistribution",e.HourDistribution="HourDistribution"}(Sl||(Sl={})),function(e){e.AppendRows="AppendRows",e.ReplaceRows="ReplaceRows",e.UpsertRows="UpsertRows"}(El||(El={})),function(e){e.SelectRows="SelectRows",e.Sort="Sort",e.SelectColumns="SelectColumns",e.RenameColumns="RenameColumns",e.AddColumn="AddColumn",e.ReplaceColumns="ReplaceColumns",e.ReplaceRows="ReplaceRows",e.AddRows="AddRows",e.SplitColumn="SplitColumn",e.ReplaceTable="ReplaceTable"}(Ol||(Ol={})),function(e){e.InvocationPattern="InvocationPattern",e.Script="Script"}(Dl||(Dl={})),function(e){e.DataSourceTag="DataSourceTag",e.QueryEditorMessageBar="QueryEditorMessageBar",e.QuickCreateForm="QuickCreateForm",e.WebByExampleForm="WebByExampleForm"}(Tl||(Tl={})),function(e){e.Append="Append",e.Replace="Replace"}(xl||(xl={})),function(e){e.CompilationError="CompilationError",e.ParsingError="ParsingError",e.Success="Success",e.UnexpectedDocumentKind="UnexpectedDocumentKind"}(Il||(Il={})),function(e){e.Link="Link",e.Text="Text"}(Rl||(Rl={}))},69903:function(lt,Ge,t){"use strict";t.d(Ge,{p:function(){return c}});var r=t(37419),o=t(47875),P=t(96721),a={leading:!0,trailing:!1};function c(v,k,E){return void 0===k&&(k=P.P),void 0===E&&(E=a),function(s){return s.lift(new y(v,k,E.leading,E.trailing))}}var y=function(){function v(E,s,ne,te){this.duration=E,this.scheduler=s,this.leading=ne,this.trailing=te}return v.prototype.call=function(s,ne){return ne.subscribe(new i(s,this.duration,this.scheduler,this.leading,this.trailing))},v}(),i=function(v){function k(s,ne,te,X,m){var O;return(O=v.call(this,s)||this).duration=ne,O.scheduler=te,O.leading=X,O.trailing=m,O._hasTrailingValue=!1,O._trailingValue=null,O}(0,r.Z)(k,v);var E=k.prototype;return E._next=function(ne){this.throttled?this.trailing&&(this._trailingValue=ne,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(C,this.duration,{subscriber:this})),this.leading?this.destination.next(ne):this.trailing&&(this._trailingValue=ne,this._hasTrailingValue=!0))},E._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},E.clearThrottle=function(){var ne=this.throttled;ne&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),ne.unsubscribe(),this.remove(ne),this.throttled=null)},k}(o.L);function C(v){v.subscriber.clearThrottle()}},73088:function(lt,Ge,t){"use strict";t.d(Ge,{F:function(){return o}});var o=new(t(50423).InjectionToken)("ScorecardActionsService")},60166:function(lt,Ge,t){"use strict";t.d(Ge,{M:function(){return o}});var o=new(t(50423).InjectionToken)("ScorecardHostService")},98587:function(lt,Ge,t){"use strict";t.d(Ge,{u:function(){return o}});var o=new(t(50423).InjectionToken)("ScorecardSettingsService")},82792:function(lt,Ge,t){"use strict";t.d(Ge,{t:function(){return V}});var r=t(81337),o=t(41114),P="PBI.EmailsList.PasteInfo",a=o.cx[P]=(0,o.b1)(P),d=t(93247),p=t(50423),l=t(17174),c=t(89075),y=t(33567),i=t(2142),C=t(73221),v=t(46544),k=t(35510),E=t(30794),s=t(40133),ne=t(11547),te=t(58417),X=t(82762),m=t(37272),I=t(14172),H=t(77526),G=t(57243),Z=t(69903),ie=t(81905),ye=t(22318),ae=t(6663),J=t(59973),N=t(83317),he=t(17653),pe=t(42195),ce=t(59822),ge=t(48787),se=t(15910),De=t(65181),fe=t(14463),Oe=t(59055),be=t(629),Fe=function(){function M(L,x,Y){this.promiseFactory=L,this.telemetryService=x,this.httpService=Y}return M.prototype.emailIsInVerifiedDomain=function(L){return(0,r.mG)(this,void 0,void 0,function(){var x,Y;return(0,r.Jh)(this,function(Ne){switch(Ne.label){case 0:x=this.promiseFactory.defer(),Ne.label=1;case 1:return Ne.trys.push([1,3,,4]),[4,this.getVerifiedDomains()];case 2:return Y=Ne.sent(),x.resolve(this.verifyEmailInGivenVerifiedDomains(L,Y)),[3,4];case 3:return Ne.sent(),x.reject(),[3,4];case 4:return[2,x.promise]}})})},M.prototype.getVerifiedDomains=function(){return(0,r.mG)(this,void 0,void 0,function(){var L,x,Y,ue,Ne,$e;return(0,r.Jh)(this,function(it){switch(it.label){case 0:return this.verifiedDomainsPromise?[2,this.verifiedDomainsPromise]:[3,1];case 1:L=this.promiseFactory.defer(),x=this.telemetryService.startEvent(Oe.f8),Y=this.httpService.powerbiRequestOptions(x.event,"TenantVerifiedDomains"),it.label=2;case 2:return it.trys.push([2,4,,5]),[4,this.httpService.get("powerbi/invitation/verifiedDomains",Y)];case 3:return ue=it.sent(),Ne={verifiedDomains:{},blockedDomains:{}},($e=ue.data).verifiedDomains&&$e.verifiedDomains.map(function(st){var ot=st.toUpperCase();return Ne.verifiedDomains[ot]=ot,ot}),$e.blockedDomains&&$e.blockedDomains.map(function(st){var ot=st.toUpperCase();return Ne.blockedDomains[ot]=ot,ot}),L.resolve(Ne),x.resolve(),[3,5];case 4:return it.sent(),L.reject(),[3,5];case 5:return this.verifiedDomainsPromise=L.promise,[2,this.verifiedDomainsPromise]}})})},M.prototype.verifyEmailInGivenVerifiedDomains=function(L,x){var Y=L.split("@");return!(!x||!_.isEmpty(x.verifiedDomains))||Y.length>1&&x&&!!x.verifiedDomains[Y[1].toUpperCase()]},M.\u0275fac=function(x){return new(x||M)(p.\u0275\u0275inject(fe.t),p.\u0275\u0275inject(v.y0),p.\u0275\u0275inject(be.M))},M.\u0275prov=p.\u0275\u0275defineInjectable({token:M,factory:M.\u0275fac,providedIn:"root"}),M}(),ze=t(77476),Ke=t(34895),je=t(21661),He=t(33846),Je=t(87650),j=t(86663),nt=t(73425),Ue=t(44641),oe=t(223),h=["emailsInput"],g=["emailsList"];function u(M,L){if(1&M&&(p.\u0275\u0275elementStart(0,"div",14),p.\u0275\u0275text(1),p.\u0275\u0275elementEnd()),2&M){var x=L.ngIf,Y=p.\u0275\u0275nextContext();p.\u0275\u0275advance(1),p.\u0275\u0275textInterpolate1(" ",Y.getSuggestionsText(x)," ")}}function F(M,L){if(1&M&&p.\u0275\u0275text(0),2&M){var x=p.\u0275\u0275nextContext();p.\u0275\u0275textInterpolate(x.inputLabel)}}function W(M,L){if(1&M&&p.\u0275\u0275element(0,"pbi-icon",15),2&M){var x=p.\u0275\u0275nextContext();p.\u0275\u0275property("name",x.inputIcon)}}function ee(M,L){1&M&&p.\u0275\u0275element(0,"pbi-icon",21)}var U=function(L,x){return{userEmail:L,displayName:x}};function Q(M,L){if(1&M){var x=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"mat-chip",18),p.\u0275\u0275listener("removed",function(){var Xe=p.\u0275\u0275restoreView(x).$implicit,it=p.\u0275\u0275nextContext(2);return p.\u0275\u0275resetView(it.remove(Xe))}),p.\u0275\u0275element(1,"user-details-host",19),p.\u0275\u0275template(2,ee,1,0,"pbi-icon",20),p.\u0275\u0275elementEnd()}if(2&M){var Y=L.$implicit,ue=p.\u0275\u0275nextContext(2);p.\u0275\u0275property("disabled",ue.disabled),p.\u0275\u0275advance(1),p.\u0275\u0275property("details",p.\u0275\u0275pureFunction2(5,U,null==Y?null:Y.userPrincipalName,null==Y?null:Y.displayName))("forceShowDisplayNameInTooltip",!0)("coloredDefaultUserPhoto",ue.coloredDefaultUserPhoto),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",!(null!=ue.ngControl&&ue.ngControl.disabled))}}function B(M,L){if(1&M&&(p.\u0275\u0275elementStart(0,"div",16),p.\u0275\u0275template(1,Q,3,8,"mat-chip",17),p.\u0275\u0275pipe(2,"async"),p.\u0275\u0275elementEnd()),2&M){var x=p.\u0275\u0275nextContext();p.\u0275\u0275advance(1),p.\u0275\u0275property("ngForOf",p.\u0275\u0275pipeBind1(2,1,x.selectedUsers$))}}function w(M,L){1&M&&(p.\u0275\u0275elementStart(0,"div",22),p.\u0275\u0275element(1,"spinner"),p.\u0275\u0275elementEnd())}function q(M,L){if(1&M){var x=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"input",23,24),p.\u0275\u0275listener("matChipInputTokenEnd",function(Xe){p.\u0275\u0275restoreView(x);var it=p.\u0275\u0275nextContext();return p.\u0275\u0275resetView(it.add(Xe,2))})("paste",function(Xe){p.\u0275\u0275restoreView(x);var it=p.\u0275\u0275reference(2);return p.\u0275\u0275nextContext().onPaste(Xe),p.\u0275\u0275resetView(it.closePanel())})("blur",function(Xe){p.\u0275\u0275restoreView(x);var it=p.\u0275\u0275nextContext();return p.\u0275\u0275resetView(it.onBlur(Xe))})("focus",function(Xe){p.\u0275\u0275restoreView(x);var it=p.\u0275\u0275nextContext();return p.\u0275\u0275resetView(it.onFocus(Xe))})("keydown.escape",function(Xe){p.\u0275\u0275restoreView(x);var it=p.\u0275\u0275reference(2),st=p.\u0275\u0275nextContext();return p.\u0275\u0275resetView(st.onEscape(Xe,it))}),p.\u0275\u0275pipe(3,"async"),p.\u0275\u0275elementEnd()}if(2&M){var Y=p.\u0275\u0275nextContext(),ue=p.\u0275\u0275reference(13),Ne=p.\u0275\u0275reference(6);p.\u0275\u0275property("placeholder",p.\u0275\u0275pipeBind1(3,9,Y.selectedUsers$).length>0?void 0:Y.inputPlaceholder)("disabled",Y.disabled)("formControl",Y.emailsListControl)("matAutocomplete",ue)("matChipInputFor",Ne)("matChipInputSeparatorKeyCodes",Y.separatorKeysCodes),p.\u0275\u0275attribute("title",Y.inputPlaceholder)("aria-label",Y.inputAriaLabelledBy?void 0:Y.inputPlaceholder)("aria-labelledby",Y.inputAriaLabelledBy)}}function le(M,L){if(1&M&&(p.\u0275\u0275elementStart(0,"mat-option",25),p.\u0275\u0275element(1,"user-details-host",26),p.\u0275\u0275elementEnd()),2&M){var x=L.$implicit,Y=p.\u0275\u0275nextContext();p.\u0275\u0275property("value",x),p.\u0275\u0275advance(1),p.\u0275\u0275property("showOneLine",!1)("details",p.\u0275\u0275pureFunction2(6,U,Y.getUserEmail(x),x.displayName))("forceShowDisplayNameInTooltip",!0)("coloredDefaultUserPhoto",Y.coloredDefaultUserPhoto),p.\u0275\u0275attribute("data-testid",Y.getUserEmail(x))}}function de(M,L){if(1&M&&(p.\u0275\u0275elementContainerStart(0),p.\u0275\u0275elementStart(1,"div",27),p.\u0275\u0275element(2,"message-banner",28),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementContainerEnd()),2&M){var x=p.\u0275\u0275nextContext();p.\u0275\u0275advance(2),p.\u0275\u0275property("viewModel",x.messageBannerViewModel)}}var V=function(M){function L(x,Y,ue,Ne,$e,Xe){var it=M.call(this)||this;return it.userDirectoryHttpService=x,it.localizationService=Y,it.domainHelperService=ue,it.telemetryService=Ne,it.cdr=$e,it.ngControl=Xe,it.showRelevantUsers=!0,it.defaultSelectedUsers=[],it.coloredDefaultUserPhoto=!1,it.onInputFocus=new p.EventEmitter,it.awaitingRequestsCount=new k.X(0),it.isBusy$=it.awaitingRequestsCount.pipe((0,I.U)(function(st){return _.gt(st,0)}),(0,H.x)(),(0,G.d)(1)),it.separatorKeysCodes=[d.K5],it.emailsListControl=new l.p4("",null,it.findUserValidator()),it.emailSuggestionResults=new k.X([]),it.selectedUsers$=new k.X([]),it.onSelectedUsersChange=function(){},it.onComponentBlur=function(){},it.ngControl&&(it.ngControl.valueAccessor=it),it}return(0,r.ZT)(L,M),L.prototype.ngOnInit=function(){var x=this;this.pasteHandler=new E.xQ,this.lifecycleSubscriptions.add(this.pasteHandler.pipe((0,Z.p)(1e3),(0,ie.w)(function(Y){return(0,r.mG)(x,void 0,void 0,function(){var ue,Ne,$e,Xe,it,st;return(0,r.Jh)(this,function(ot){switch(ot.label){case 0:return this.emailsListControl.markAsPending(),ue=Y.clipboardData.getData("Text").split(/;|,|\n/).filter(function(ut){return _.trim(ut).length>0}),Ne=_.size(ue)<=100,$e=this.telemetryService.startEvent(a,{inputCount:_.size(ue)}),[4,this.addUser(ue,Ne,3)];case 1:return Xe=ot.sent(),it=0===_.size(Xe),this.propagateSelectedUsersChange(it),this.emailsInput.nativeElement.value=_.join(Xe,","),(st=_.size(ue)>100)&&this.emailsListControl.setErrors({TooManyUsers:_.size(ue)}),(it||st)&&this.cdr.markForCheck(),$e.resolve(),[2]}})})})).subscribe()),this.lifecycleSubscriptions.add(this.emailsListControl.statusChanges.pipe((0,ye.O)(this.emailsListControl.status),(0,H.x)(),(0,ae.G)(),(0,J.h)(function(Y){return"PENDING"===Y[0]})).subscribe(function(){return x.cdr.markForCheck()})),this.actions&&this.actions.pipe((0,N.R)(this.onDestroy$)).subscribe(function(Y){0===Y&&x.reset()}),this.applyDefaultSelectedUsers(),this.onChanges$.subscribe(function(Y){x.onChanges(Y)})},L.prototype.ngAfterViewInit=function(){this.notUseUnallowedAttributes()},L.prototype.onChanges=function(x){x.defaultSelectedUsers&&this.applyDefaultSelectedUsers()},L.prototype.applyDefaultSelectedUsers=function(){this.defaultSelectedUsers&&this.defaultSelectedUsers.length>0&&this.selectedUsers$.value&&0===this.selectedUsers$.value.length&&this.selectedUsers$.next(this.defaultSelectedUsers)},L.prototype.reset=function(){this.selectedUsers$.next([]),this.emailsListControl.setValue(null),this.emailsInput&&(this.emailsInput.nativeElement.value=""),this.propagateSelectedUsersChange(!0)},L.prototype.propagateSelectedUsersChange=function(x){x&&this.emailsListControl.setErrors(null),this.onSelectedUsersChange(this.selectedUsers$.value)},L.prototype.add=function(x,Y){var ue;return(0,r.mG)(this,void 0,void 0,function(){var Ne;return(0,r.Jh)(this,function(it){switch(it.label){case 0:return this.emailsListControl.invalid||this.emailsListControl.pending?[2]:(Ne=null===(ue=x.chipInput)||void 0===ue?void 0:ue.inputElement,[4,this.addUser([x.value],!0,Y)]);case 1:return 0===it.sent().length&&(Ne&&(Ne.value=""),this.propagateSelectedUsersChange(!0),this.emailsListControl.setValue(null)),[2]}})})},Object.defineProperty(L.prototype,"hasValidPendingInput",{get:function(){var Y=this.emailsInput.nativeElement.value;return!!Y&&y.JJ.test(Y)},enumerable:!1,configurable:!0}),L.prototype.addUser=function(x,Y,ue){return(0,r.mG)(this,void 0,void 0,function(){var Ne,$e,Xe,it,st,ot;return(0,r.Jh)(this,function(ut){switch(ut.label){case 0:Ne=[],$e=0,Xe=x,ut.label=1;case 1:return $e<Xe.length?(it=Xe[$e],(it=_.trim(it))?(st=void 0,Y?[4,this.findUsers(it).pipe((0,I.U)(function(qe){return 1===qe.length?qe[0]:null})).toPromise()]:[3,3]):[3,6]):[3,7];case 2:st=ut.sent(),ut.label=3;case 3:return this.emailsListControl.value||1!==ue?(ot=void 0,st?[3,5]:[4,this.validateEmail(it,Y&&this.checkValidOrgUser,!Y||this.allowExternalUsers)]):[3,6];case 4:ot=ut.sent(),ut.label=5;case 5:ot?(this.emailsListControl.setErrors(ot),Ne.push(it),this.cdr.markForCheck()):this.selectedUsers$.next(this.selectedUsers$.value.concat([st??this.getADUserMetadataFromEmail(it)])),ut.label=6;case 6:return $e++,[3,1];case 7:return[2,Ne]}})})},L.prototype.getADUserMetadataFromEmail=function(x){return{displayName:void 0,userPrincipalName:x,objectId:void 0,emailAddress:x,objectType:1,isSecurityGroup:!1}},L.prototype.remove=function(x){this.selectedUsers$.next(this.selectedUsers$.value.filter(function(Y){return Y!==x})),this.propagateSelectedUsersChange(!0)},L.prototype.select=function(x){this.selectedUsers$.next(this.selectedUsers$.value.concat([x.option.value])),this.propagateSelectedUsersChange(!0),this.emailsInput.nativeElement.value="",this.emailsListControl.setValue(null)},L.prototype.findUserValidator=function(){var x=this;return function(Y){return(0,s.H)(500).pipe((0,ie.w)(function(){var ue=_.trim(Y.value);return _.isString(Y.value)&&ue?x.findUsers(Y.value).pipe((0,he.b)(function($e){return x.emailSuggestionResults.next($e)}),(0,pe.zg)(function($e){return _.isEmpty($e)?x.validateEmail(Y.value,x.checkValidOrgUser,x.allowExternalUsers):(0,ne.of)(null)})):(x.emailSuggestionResults.next([]),(0,ne.of)(null))}))}},L.prototype.sendFindUsersRequest=function(x){var Y=this;return function(M,L){return new te.y(function(x){var Y,ue;try{Y=M()}catch(Xe){return void x.error(Xe)}try{ue=L()}catch(Xe){return void x.error(Xe)}var $e=(ue?(0,X.D)(ue):m.E).subscribe(x);return function(){$e.unsubscribe(),Y&&Y.unsubscribe()}})}(function(){return{unsubscribe:function(){return Y.awaitingRequestsCount.next(Y.awaitingRequestsCount.value-1)}}},function(){var Ne=Y.allowAnyGroup||Y.allowSecurityGroups||Y.allowUnifiedGroups||Y.allowEmailEnabledSecurityGroups?Y.blockUsers?2:3:1;return Y.awaitingRequestsCount.next(Y.awaitingRequestsCount.value+1),Y.userDirectoryHttpService.findUsers(x,Ne,i.OsI,!!Y.includeGuests,Y.showRelevantUsers,Y.allowAnyGroup,!0)})},L.prototype.findUsers=function(x){var Y=this;return this.sendFindUsersRequest(x).pipe((0,I.U)(function(ue){return _.reduce(ue.data,function(Ne,$e){var Xe;if(Y.isValidObjectType($e)&&-1===_.findIndex(Y.selectedUsers$.value,function(qe){return Y.compareADEntities($e,qe)})){var st=$e.displayName&&$e.displayName.toLocaleLowerCase()===x.toLocaleLowerCase(),ot=null===(Xe=$e.userPrincipalName)||void 0===Xe?void 0:Xe.split("@")[0],ut=ot&&ot.toLocaleLowerCase()===x.toLocaleLowerCase();st||ut?Ne.unshift($e):Ne.push($e)}return Ne},[])}),(0,ce.K)(function(){return(0,ne.of)([])}))},L.prototype.compareADEntities=function(x,Y){return x.userPrincipalName&&Y.userPrincipalName?x.userPrincipalName===Y.userPrincipalName:!(!x.objectId||!Y.objectId)&&x.objectId===Y.objectId},L.prototype.writeValue=function(x){x&&this.selectedUsers$.next(x)},L.prototype.registerOnChange=function(x){this.onSelectedUsersChange=x},L.prototype.registerOnTouched=function(x){this.onComponentBlur=x},L.prototype.onPaste=function(x){x.preventDefault(),this.pasteHandler.next(x)},Object.defineProperty(L.prototype,"messageBannerViewModel",{get:function(){var Y=this.localizationService.get("ClientError_UnknownClientErrorValue"),ue=1;return this.emailsListControl.hasError("DuplicateEmail")||this.emailsListControl.hasError("InvalidEmail")?Y=this.localizationService.get("Sharing_InvalidEmail"):this.emailsListControl.hasError("ExternalUser")?(Y=this.localizationService.format("Sharing_ExternalOrganization",this.emailsListControl.getError("ExternalUser")),ue=1):this.emailsListControl.hasError("InvalidOrgUser")?(Y=this.localizationService.format("GrantAccessPane_InvalidEmails",this.emailsListControl.getError("InvalidOrgUser")),ue=1):this.emailsListControl.hasError("TooManyUsers")&&(Y=this.localizationService.format("TooManyUsers_BlockedEmails",this.emailsListControl.getError("TooManyUsers")),ue=1),{bannerType:ue,iconName:1===ue?"pbi-glyph-error-circle-exclamation":"pbi-glyph-warning",message:Y}},enumerable:!1,configurable:!0}),L.prototype.onBlur=function(x){return(0,r.mG)(this,void 0,void 0,function(){var Y,ue;return(0,r.Jh)(this,function(Ne){switch(Ne.label){case 0:return x.relatedTarget&&"MAT-OPTION"===x.relatedTarget.tagName?[2]:(this.onComponentBlur(this.selectedUsers$.value),this.addUserOnBlur?(Y=this.emailsInput.nativeElement,this.emailsListControl.pending?[4,this.emailsListControl.statusChanges.pipe((0,J.h)(function($e){return"PENDING"!==$e}),(0,ge.q)(1)).toPromise()]:[3,2]):[3,3]);case 1:Ne.sent(),Ne.label=2;case 2:return(ue=_.trim(Y.value))?[2,this.add({input:Y,value:ue,chipInput:new c.IP(this.emailsInput,{separatorKeyCodes:[]})},1)]:[2];case 3:return[2]}})})},L.prototype.onEscape=function(x,Y){var ue;null!==(ue=Y?.autocomplete)&&void 0!==ue&&ue.isOpen&&(x?.stopPropagation(),Y.closePanel())},L.prototype.onFocus=function(x){this.onInputFocus.emit(x)},L.prototype.validateEmail=function(x,Y,ue){return void 0===ue&&(ue=!1),(0,r.mG)(this,void 0,void 0,function(){var $e;return(0,r.Jh)(this,function(Xe){switch(Xe.label){case 0:return y.JJ.test(x)?-1!==_.findIndex(this.selectedUsers$.value,function(it){return it.userPrincipalName===x})?[2,{DuplicateEmail:!0}]:[4,this.domainHelperService.emailIsInVerifiedDomain(x)]:[3,2];case 1:return($e=Xe.sent())||ue?$e&&Y?[2,{InvalidOrgUser:x}]:[2,null]:[2,{ExternalUser:x}];case 2:return[2,{InvalidEmail:!0}]}})})},L.prototype.isValidObjectType=function(x){return 2===x.objectType?!!this.allowAnyGroup||(x.isSecurityGroup?this.allowSecurityGroups||this.allowEmailEnabledSecurityGroups&&3===x.groupType:2===x.groupType?this.allowDistributionLists:this.allowUnifiedGroups):1===x.objectType&&x.aadAppId?this.allowServicePrincipals:(1===x.objectType||3===x.objectType)&&!this.blockUsers},L.prototype.getUserEmail=function(x){return x.userPrincipalName||x.emailAddress||(x.aadAppId?"AppID: "+x.aadAppId:null)},L.prototype.notUseUnallowedAttributes=function(){this.emailsList._multiple=void 0,this.emailsList.ariaOrientation=void 0},L.prototype.getSuggestionsText=function(x){return x>0?this.localizationService.format("Email_Address_Suggestion_Count_Text",[x]):""},L.\u0275fac=function(Y){return new(Y||L)(p.\u0275\u0275directiveInject(se.W),p.\u0275\u0275directiveInject(De.o),p.\u0275\u0275directiveInject(Fe),p.\u0275\u0275directiveInject(v.y0),p.\u0275\u0275directiveInject(p.ChangeDetectorRef),p.\u0275\u0275directiveInject(l.a5,10))},L.\u0275cmp=p.\u0275\u0275defineComponent({type:L,selectors:[["emails-list-modern"]],viewQuery:function(Y,ue){if(1&Y&&(p.\u0275\u0275viewQuery(h,5),p.\u0275\u0275viewQuery(g,5)),2&Y){var Ne=void 0;p.\u0275\u0275queryRefresh(Ne=p.\u0275\u0275loadQuery())&&(ue.emailsInput=Ne.first),p.\u0275\u0275queryRefresh(Ne=p.\u0275\u0275loadQuery())&&(ue.emailsList=Ne.first)}},hostVars:4,hostBindings:function(Y,ue){2&Y&&p.\u0275\u0275classProp("disabled",(null==ue.ngControl?null:ue.ngControl.disabled)||ue.disabled)("invalid",(null==ue.ngControl?null:ue.ngControl.invalid)||ue.emailsListControl.invalid)},inputs:{allowAnyGroup:"allowAnyGroup",allowSecurityGroups:"allowSecurityGroups",allowUnifiedGroups:"allowUnifiedGroups",allowEmailEnabledSecurityGroups:"allowEmailEnabledSecurityGroups",allowObjectIds:"allowObjectIds",blockUsers:"blockUsers",isRequired:"isRequired",includeGuests:"includeGuests",allowExternalUsers:"allowExternalUsers",allowDistributionLists:"allowDistributionLists",allowServicePrincipals:"allowServicePrincipals",inputLabel:"inputLabel",inputPlaceholder:"inputPlaceholder",inputIcon:"inputIcon",inputAriaLabelledBy:"inputAriaLabelledBy",disabled:"disabled",maxSelectableUsers:"maxSelectableUsers",hideChips:"hideChips",hideError:"hideError",hideInput:"hideInput",addUserOnBlur:"addUserOnBlur",checkValidOrgUser:"checkValidOrgUser",showRelevantUsers:"showRelevantUsers",actions:"actions",defaultSelectedUsers:"defaultSelectedUsers",coloredDefaultUserPhoto:"coloredDefaultUserPhoto"},outputs:{onInputFocus:"onInputFocus"},features:[p.\u0275\u0275InheritDefinitionFeature],decls:17,vars:17,consts:[["id","emailsList","appearance","none","cdkScrollable","",1,"emails-list"],["class","x-screen-reader","aria-live","assertive",4,"ngIf"],[1,"email-list-input-wrapper"],[3,"ngIf"],["role","listbox",1,"chip-list",3,"required"],["emailsList",""],["class","inputIcon","size","small",3,"name",4,"ngIf"],["class","chips-wrapper",4,"ngIf"],["class","autoCompleteSpinner",4,"ngIf"],["matChipInput","","aria-owns","email-list-modern-suggestions","aria-controls","email-list-modern-suggestions","data-testid","emails-list-input","data-unique-id","EmailsListInput",3,"placeholder","disabled","formControl","matAutocomplete","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputTokenEnd","paste","blur","focus","keydown.escape",4,"ngIf"],["id","email-list-modern-suggestions","data-testid","email-sugessions-dropdown",3,"optionSelected"],["auto","matAutocomplete"],["data-automation-type","Suggestion",3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["aria-live","assertive",1,"x-screen-reader"],["size","small",1,"inputIcon",3,"name"],[1,"chips-wrapper"],["defaultTabIndex","0","tabindex","0","role","option",3,"disabled","removed",4,"ngFor","ngForOf"],["defaultTabIndex","0","tabindex","0","role","option",3,"disabled","removed"],[3,"details","forceShowDisplayNameInTooltip","coloredDefaultUserPhoto"],["name","close","size","mini","matChipRemove","",4,"ngIf"],["name","close","size","mini","matChipRemove",""],[1,"autoCompleteSpinner"],["matChipInput","","aria-owns","email-list-modern-suggestions","aria-controls","email-list-modern-suggestions","data-testid","emails-list-input","data-unique-id","EmailsListInput",3,"placeholder","disabled","formControl","matAutocomplete","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputTokenEnd","paste","blur","focus","keydown.escape"],["emailsInput","","trigger","matAutocompleteTrigger"],["data-automation-type","Suggestion",3,"value"],[3,"showOneLine","details","forceShowDisplayNameInTooltip","coloredDefaultUserPhoto"],["role","alert","aria-atomic","true"],[3,"viewModel"]],template:function(Y,ue){var Ne;(1&Y&&(p.\u0275\u0275elementStart(0,"mat-form-field",0),p.\u0275\u0275template(1,u,2,1,"div",1),p.\u0275\u0275pipe(2,"async"),p.\u0275\u0275elementStart(3,"label",2),p.\u0275\u0275template(4,F,1,1,"ng-template",3),p.\u0275\u0275elementStart(5,"mat-chip-list",4,5),p.\u0275\u0275template(7,W,1,1,"pbi-icon",6),p.\u0275\u0275template(8,B,3,3,"div",7),p.\u0275\u0275template(9,w,2,0,"div",8),p.\u0275\u0275elementEnd(),p.\u0275\u0275template(10,q,4,11,"input",9),p.\u0275\u0275pipe(11,"async"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(12,"mat-autocomplete",10,11),p.\u0275\u0275listener("optionSelected",function(Xe){return ue.select(Xe)}),p.\u0275\u0275template(14,le,2,9,"mat-option",12),p.\u0275\u0275pipe(15,"async"),p.\u0275\u0275elementEnd()(),p.\u0275\u0275template(16,de,3,1,"ng-container",13)),2&Y)&&(p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",null==(Ne=p.\u0275\u0275pipeBind1(2,11,ue.emailSuggestionResults))?null:Ne.length),p.\u0275\u0275advance(3),p.\u0275\u0275property("ngIf",ue.inputLabel),p.\u0275\u0275advance(1),p.\u0275\u0275property("required",ue.isRequired),p.\u0275\u0275attribute("aria-label",ue.inputAriaLabelledBy?void 0:ue.inputPlaceholder)("aria-labelledby",ue.inputAriaLabelledBy),p.\u0275\u0275advance(2),p.\u0275\u0275property("ngIf",!!ue.inputIcon),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",!ue.hideChips),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",ue.emailsListControl.pending),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",!ue.hideInput&&(!ue.maxSelectableUsers||p.\u0275\u0275pipeBind1(11,13,ue.selectedUsers$).length<ue.maxSelectableUsers)),p.\u0275\u0275advance(4),p.\u0275\u0275property("ngForOf",p.\u0275\u0275pipeBind1(15,15,ue.emailSuggestionResults)),p.\u0275\u0275advance(2),p.\u0275\u0275property("ngIf",ue.emailsListControl.invalid&&!ue.hideError))},dependencies:[ze.NgForOf,ze.NgIf,Ke.VN,Ke.QJ,je.PQ,He.CK,c.ir,c.lw,c.IP,c.Y6,Je.v_,l.Fj,l.JJ,l.oH,j._,nt.O,Ue.A,oe.s,ze.AsyncPipe],styles:['[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   input[_ngcontent-%COMP%]{border:0px solid;width:min-content;min-height:32px;padding:6px 8px!important;margin:0!important;box-sizing:border-box;caret-color:auto;line-height:1.4}[_nghost-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{display:block;line-height:1.125}[_nghost-%COMP%]   .chip-list[_ngcontent-%COMP%]{max-width:100%;display:flex}[_nghost-%COMP%]   .chip-list[_ngcontent-%COMP%]     .mat-chip-list-wrapper{max-width:100%;margin:0}[_nghost-%COMP%]   .chip-list[_ngcontent-%COMP%]   .chips-wrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;max-height:190px;overflow:auto}[_nghost-%COMP%]   .inputIcon[_ngcontent-%COMP%]{padding:0 8px}[_nghost-%COMP%]     .mat-chip{background-color:var(--fluent-theme-neutral-lighter-color, #F3F2F1);font-weight:400;padding:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;-o-text-overflow:ellipsis}[_nghost-%COMP%]     .mat-standard-chip{min-height:24px!important}[_nghost-%COMP%]     .mat-standard-chip.mat-chip-with-trailing-icon{padding:0 2px 0 0!important}[_nghost-%COMP%]     .mat-standard-chip .mat-chip-remove{height:12px!important}[_nghost-%COMP%]     .mat-form-field-appearance-standard, [_nghost-%COMP%]     .mat-form-field-wrapper, [_nghost-%COMP%]     .mat-form-field-flex{padding:0}[_nghost-%COMP%]     .mat-form-field-infix{border:0px;padding:0;width:min-content;min-height:32px}[_nghost-%COMP%]     .mat-form-field-appearance-standard .mat-form-field-flex, [_nghost-%COMP%]     .mat-chip-list-wrapper{padding-top:0!important;padding-bottom:0!important}[_nghost-%COMP%]     user-details-host{width:calc(100% - 24px)}[_nghost-%COMP%]     user-details{width:100%}[_nghost-%COMP%]     .user-info{width:calc(100% - 29px)}[_nghost-%COMP%]     .user-name, [_nghost-%COMP%]     .user-email{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;-o-text-overflow:ellipsis}[_nghost-%COMP%]   .email-list-input-wrapper[_ngcontent-%COMP%]{display:flex;flex-flow:wrap}[_nghost-%COMP%]   .email-list-input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400)}[_nghost-%COMP%]   .email-list-input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{opacity:1;color:var(--colorNeutralForeground4, #707070)}[_nghost-%COMP%]   .emails-list[_ngcontent-%COMP%]{border:1px solid var(--fluent-theme-neutral-tertia-color, #A19F9D);border-radius:2px;background-color:var(--fluent-theme-white-color, #FFF)}[_nghost-%COMP%]   .emails-list[_ngcontent-%COMP%]:hover{border-color:var(--fluent-theme-black-color, #000)}[_nghost-%COMP%]   .emails-list[_ngcontent-%COMP%]:focus-within{border:2px solid var(--colorNeutralStrokeFocus2)}[_nghost-%COMP%]   .autoCompleteSpinner[_ngcontent-%COMP%]{position:absolute;top:4px;right:6px;overflow:auto}.invalid[_nghost-%COMP%]   .emails-list[_ngcontent-%COMP%]{border-color:var(--fluent-theme-error-dark-color, #A80000)}.disabled[_nghost-%COMP%]   .emails-list[_ngcontent-%COMP%]{background-color:var(--fluent-theme-neutral-lighter-color, #F3F2F1)}.disabled[_nghost-%COMP%]   .emails-list[_ngcontent-%COMP%]   .chip-list[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{background-color:var(--fluent-theme-neutral-light-color, #EDEBE9)}.disabled[_nghost-%COMP%]   .emails-list[_ngcontent-%COMP%]   .chip-list[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]   pbi-icon[_ngcontent-%COMP%]{display:none}.disabled[_nghost-%COMP%]   .emails-list[_ngcontent-%COMP%]   .chip-list[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]   user-details-host[_ngcontent-%COMP%]{width:100%}html:not([dir="rtl"])   .disabled[_nghost-%COMP%]   .emails-list[_ngcontent-%COMP%]   .chip-list[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]   user-details-host[_ngcontent-%COMP%]{margin-right:12px}html[dir="rtl"]   .disabled[_nghost-%COMP%]   .emails-list[_ngcontent-%COMP%]   .chip-list[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]   user-details-host[_ngcontent-%COMP%]{margin-left:12px}.disabled[_nghost-%COMP%]   .emails-list[_ngcontent-%COMP%]   .chip-list[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:var(--colorNeutralForegroundDisabled, #bdbdbd)}user-details-host[_ngcontent-%COMP%]     .user-email, user-details-host[_ngcontent-%COMP%]     .user-name{line-height:16px}.mat-option.mat-active[_ngcontent-%COMP%]{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color)}.x-screen-reader[_ngcontent-%COMP%]{position:absolute!important;overflow:hidden!important;clip:rect(1px,1px,1px,1px)!important;width:1px!important;height:1px!important;border:0!important;padding:0!important;margin:0!important}'],changeDetection:0}),L}(C.w)},87758:function(lt,Ge,t){"use strict";t.d(Ge,{c:function(){return C}});var r=t(62458),o=t(50423),P=t(77476),a=t(36858),d=t(223),p=function(k){return{userEmail:k}};function l(v,k){if(1&v&&(o.\u0275\u0275elementStart(0,"div"),o.\u0275\u0275element(1,"user-details-host",4),o.\u0275\u0275elementEnd()),2&v){var E=k.$implicit,s=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("details",o.\u0275\u0275pureFunction1(4,p,E))("photoSize",s.photoSize)("showUserInfo",!1)("showTooltip",!0)}}function c(v,k){if(1&v&&(o.\u0275\u0275elementStart(0,"div",5)(1,"div",6),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd()()),2&v){var E=o.\u0275\u0275nextContext(),s=o.\u0275\u0275reference(5);o.\u0275\u0275styleProp("width",E.photoSize,"px")("height",E.photoSize,"px"),o.\u0275\u0275property("pbiTooltip",s)("pbiTooltipCaretSize","small")("pbiTooltipPosition","below"),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate1(" +",E.emails.length-E.numUsersToShow," ")}}function y(v,k){if(1&v&&(o.\u0275\u0275elementStart(0,"div",9),o.\u0275\u0275listener("click",function(ne){return ne.stopPropagation()}),o.\u0275\u0275element(1,"user-details-host",10),o.\u0275\u0275elementEnd()),2&v){var E=k.$implicit;o.\u0275\u0275advance(1),o.\u0275\u0275property("details",o.\u0275\u0275pureFunction1(4,p,E))("showUserInfo",!0)("showOneLine",!1)("showTooltip",!1)}}function i(v,k){if(1&v&&(o.\u0275\u0275elementStart(0,"div",7),o.\u0275\u0275template(1,y,2,6,"div",8),o.\u0275\u0275pipe(2,"slice"),o.\u0275\u0275elementEnd()),2&v){var E=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",o.\u0275\u0275pipeBind2(2,1,E.emails,E.numUsersToShow))}}var C=function(){function v(){this.emails=[],this.numAvatarsToShow=5,this.avatarSize="medium",this.rowStyle="spread",this.AvatarSizeMap={smallest:{photoSize:16,spreadSpacing:8,stackOverlap:2,stackOutline:2},small:{photoSize:20,spreadSpacing:10,stackOverlap:2,stackOutline:2},medium:{photoSize:24,spreadSpacing:10,stackOverlap:4,stackOutline:2}}}return v.prototype.ngOnInit=function(){this.setSize()},v.prototype.ngOnChanges=function(k){(k.emails||k.numAvatarsToShow)&&this.setUserCount(),(k.avatarSize||k.rowStyle)&&this.setSize()},v.prototype.setUserCount=function(){this.numUsersToShow=this.emails.length>this.numAvatarsToShow?this.numAvatarsToShow-1:this.numAvatarsToShow},v.prototype.setSize=function(){var k=this.AvatarSizeMap[this.avatarSize];r.fF.assertValue(k,"Invalid size ".concat(this.avatarSize," for AvatarRow.")),this.photoSize=k.photoSize;var E=0,s=0,ne=0;"spread"===this.rowStyle?ne=k.spreadSpacing:"stack"===this.rowStyle?(E=k.stackOutline,s=-k.stackOutline,ne=-k.stackOutline-k.stackOverlap):r.fF.assertFail("Invalid style ".concat(this.rowStyle," for AvatarRow.")),this.styleVariables={"--avatar-left-margin":s+"px","--avatar-right-margin":ne+"px","--avatar-outline":E+"px"}},v.\u0275fac=function(E){return new(E||v)},v.\u0275cmp=o.\u0275\u0275defineComponent({type:v,selectors:[["avatar-row"]],inputs:{emails:"emails",numAvatarsToShow:"numAvatarsToShow",avatarSize:"avatarSize",rowStyle:"rowStyle"},features:[o.\u0275\u0275NgOnChangesFeature],decls:6,vars:8,consts:[[1,"avatar-row-container"],[4,"ngFor","ngForOf"],["class","plus-number-container",3,"width","height","pbiTooltip","pbiTooltipCaretSize","pbiTooltipPosition",4,"ngIf"],["collapsedAvatars",""],[1,"user-details-host",3,"details","photoSize","showUserInfo","showTooltip"],[1,"plus-number-container",3,"pbiTooltip","pbiTooltipCaretSize","pbiTooltipPosition"],[1,"plus-number"],[1,"collapsed-avatar-list"],["class","collapsed-avatar",3,"click",4,"ngFor","ngForOf"],[1,"collapsed-avatar",3,"click"],[3,"details","showUserInfo","showOneLine","showTooltip"]],template:function(E,s){1&E&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275template(1,l,2,6,"div",1),o.\u0275\u0275pipe(2,"slice"),o.\u0275\u0275template(3,c,3,8,"div",2),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(4,i,3,4,"ng-template",null,3,o.\u0275\u0275templateRefExtractor)),2&E&&(o.\u0275\u0275styleMap(s.styleVariables),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",o.\u0275\u0275pipeBind3(2,4,s.emails,0,s.numUsersToShow)),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",s.emails.length>s.numUsersToShow))},dependencies:[P.NgForOf,P.NgIf,a.V,d.s,P.SlicePipe],styles:['.avatar-row-container[_ngcontent-%COMP%]{display:inline-flex;--avatar-outline-color: var(--fluent-theme-white-color)}.avatar-row-container[_ngcontent-%COMP%]   .user-details-host[_ngcontent-%COMP%]     .user-image{margin-left:var(--avatar-left-margin);margin-right:var(--avatar-right-margin)}.avatar-row-container[_ngcontent-%COMP%]   .user-details-host[_ngcontent-%COMP%]     .user-image>*{border:var(--avatar-outline) solid var(--avatar-outline-color)}.avatar-row-container[_ngcontent-%COMP%]   .plus-number-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;background-color:var(--fluent-theme-neutral-lighter-color, #F3F2F1);border-radius:50%;border:var(--avatar-outline) solid var(--avatar-outline-color)}.avatar-row-container[_ngcontent-%COMP%]   .plus-number-container[_ngcontent-%COMP%]   .plus-number[_ngcontent-%COMP%]{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--xs-font-size, 10px);font-weight:var(--font-weight-regular, 400);color:var(--fluent-theme-neutral-primary-color, #323130)}.collapsed-avatar-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:0 16px}.collapsed-avatar[_ngcontent-%COMP%]{display:flex;align-items:center;height:48px;white-space:nowrap;overflow:hidden}'],changeDetection:0}),v}()},4716:function(lt,Ge,t){"use strict";t.d(Ge,{I:function(){return ye}});var r=t(81337),o=t(73221),P=t(77526),a=t(83317),d=t(50423),p=t(74521),l=t(77476),c=t(44408),y=t(86663),i=t(36858),C=t(74913),v=t(86251),k=t(85102);function E(ae,J){if(1&ae&&(d.\u0275\u0275elementStart(0,"span",11),d.\u0275\u0275text(1),d.\u0275\u0275elementEnd()),2&ae){var N=d.\u0275\u0275nextContext(4);d.\u0275\u0275advance(1),d.\u0275\u0275textInterpolate1(" ",N.goal.notesCount," ")}}function s(ae,J){if(1&ae){var N=d.\u0275\u0275getCurrentView();d.\u0275\u0275elementStart(0,"button",8),d.\u0275\u0275listener("click",function(se){d.\u0275\u0275restoreView(N);var De=d.\u0275\u0275nextContext().$implicit;return d.\u0275\u0275resetView(De.onClick(se))}),d.\u0275\u0275pipe(1,"localize"),d.\u0275\u0275element(2,"tri-svg-icon",9),d.\u0275\u0275template(3,E,2,1,"span",10),d.\u0275\u0275elementEnd()}if(2&ae){var ce,he=d.\u0275\u0275nextContext().$implicit,pe=d.\u0275\u0275nextContext(2);d.\u0275\u0275classProp("show-btn",pe.goal.notesCount>0),d.\u0275\u0275property("pbiTooltip",d.\u0275\u0275pipeBind1(1,6,null!==(ce=he.iconTooltipKey)&&void 0!==ce?ce:he.labelKey))("disabled",he.disabled),d.\u0275\u0275advance(2),d.\u0275\u0275property("name",he.iconName),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",pe.goal.notesCount>0)}}function ne(ae,J){if(1&ae){var N=d.\u0275\u0275getCurrentView();d.\u0275\u0275elementStart(0,"button",12,13),d.\u0275\u0275listener("click",function(se){d.\u0275\u0275restoreView(N);var De=d.\u0275\u0275reference(1),fe=d.\u0275\u0275nextContext(3);return d.\u0275\u0275resetView(fe.onContextMenuClick(se,De))}),d.\u0275\u0275pipe(2,"localize"),d.\u0275\u0275element(3,"mat-icon",14),d.\u0275\u0275elementEnd()}if(2&ae){var ce,he=d.\u0275\u0275nextContext().$implicit,pe=d.\u0275\u0275nextContext(2);d.\u0275\u0275classProp("space-btn",pe.goal.notesCount>0),d.\u0275\u0275property("pbiTooltip",d.\u0275\u0275pipeBind1(2,4,null!==(ce=he.iconTooltipKey)&&void 0!==ce?ce:he.labelKey))("disabled",he.disabled)}}var te=function(J){return{action:J}};function X(ae,J){if(1&ae&&d.\u0275\u0275elementContainer(0,15),2&ae){var N=d.\u0275\u0275nextContext().$implicit;d.\u0275\u0275nextContext(2);var he=d.\u0275\u0275reference(2);d.\u0275\u0275property("ngTemplateOutlet",he)("ngTemplateOutletContext",d.\u0275\u0275pureFunction1(2,te,N))}}function m(ae,J){1&ae&&(d.\u0275\u0275elementContainerStart(0,4),d.\u0275\u0275template(1,s,4,8,"button",5),d.\u0275\u0275template(2,ne,4,6,"button",6),d.\u0275\u0275template(3,X,1,4,"ng-container",7),d.\u0275\u0275elementContainerEnd()),2&ae&&(d.\u0275\u0275property("ngSwitch",J.$implicit.id),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngSwitchCase","openNotes"),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngSwitchCase","openContextMenu"))}function O(ae,J){if(1&ae&&(d.\u0275\u0275elementStart(0,"div",2),d.\u0275\u0275template(1,m,4,3,"ng-container",3),d.\u0275\u0275elementEnd()),2&ae){var N=d.\u0275\u0275nextContext();d.\u0275\u0275advance(1),d.\u0275\u0275property("ngForOf",N.actions)}}function I(ae,J){if(1&ae&&d.\u0275\u0275element(0,"mat-icon",21),2&ae){var N=d.\u0275\u0275nextContext(2).action;d.\u0275\u0275property("fontIcon",N.iconName)}}function H(ae,J){if(1&ae&&d.\u0275\u0275element(0,"pbi-icon",22),2&ae){var N=d.\u0275\u0275nextContext(2).action;d.\u0275\u0275property("name",N.iconName)}}function G(ae,J){if(1&ae&&d.\u0275\u0275element(0,"tri-svg-icon",9),2&ae){var N=d.\u0275\u0275nextContext(2).action;d.\u0275\u0275property("name",N.iconName)}}function Z(ae,J){if(1&ae){var N=d.\u0275\u0275getCurrentView();d.\u0275\u0275elementStart(0,"tooltip-wrapper",17)(1,"button",8),d.\u0275\u0275listener("click",function(ge){d.\u0275\u0275restoreView(N);var se=d.\u0275\u0275nextContext().action;return d.\u0275\u0275resetView(se.onClick(ge))}),d.\u0275\u0275pipe(2,"localize"),d.\u0275\u0275template(3,I,1,1,"mat-icon",18),d.\u0275\u0275template(4,H,1,1,"pbi-icon",19),d.\u0275\u0275template(5,G,1,1,"tri-svg-icon",20),d.\u0275\u0275elementEnd()()}if(2&ae){var pe,he=d.\u0275\u0275nextContext().action;d.\u0275\u0275property("tooltipKey",null==he?null:he.disabledTooltipKey),d.\u0275\u0275advance(1),d.\u0275\u0275property("pbiTooltip",d.\u0275\u0275pipeBind1(2,6,null!==(pe=he.iconTooltipKey)&&void 0!==pe?pe:he.labelKey))("disabled",he.disabled),d.\u0275\u0275advance(2),d.\u0275\u0275property("ngIf","mat"===he.iconType),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf","pbi"===he.iconType),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf","tri"===he.iconType)}}function ie(ae,J){1&ae&&d.\u0275\u0275template(0,Z,6,8,"tooltip-wrapper",16),2&ae&&d.\u0275\u0275property("ngIf",J.action)}var ye=function(ae){function J(N,he){var pe=ae.call(this)||this;return pe.goalRowService=N,pe.changeDetector=he,pe.showActionIcons=!0,pe.goalRowService.contextMenuOpenGoalId$.pipe((0,P.x)(),(0,a.R)(pe.onDestroy$)).subscribe(function(ce){pe.contextMenuOpen=pe.goal&&ce===pe.goal.id,pe.changeDetector.markForCheck()}),pe}return(0,r.ZT)(J,ae),J.prototype.ngOnChanges=function(N){(N.goal||N.isEditMode||N.showActionIcons)&&(this.actions=this.goalRowService.getGoalActionIcons(this.goal,this.isEditMode,this.showActionIcons)),ae.prototype.ngOnChanges.call(this,N)},J.prototype.onContextMenuClick=function(N,he){this.goalRowService.onContextMenuClick(this.goal,N,he,this.isEditMode,this.showActionIcons)},J.\u0275fac=function(he){return new(he||J)(d.\u0275\u0275directiveInject(p.D),d.\u0275\u0275directiveInject(d.ChangeDetectorRef))},J.\u0275cmp=d.\u0275\u0275defineComponent({type:J,selectors:[["goal-actions-cell"]],hostVars:2,hostBindings:function(he,pe){2&he&&d.\u0275\u0275classProp("context-menu-open",pe.contextMenuOpen)},inputs:{goal:"goal",isEditMode:"isEditMode",showActionIcons:"showActionIcons"},features:[d.\u0275\u0275InheritDefinitionFeature,d.\u0275\u0275NgOnChangesFeature],decls:3,vars:1,consts:[["class","goal-actions",4,"ngIf"],["actionIcon",""],[1,"goal-actions"],[3,"ngSwitch",4,"ngFor","ngForOf"],[3,"ngSwitch"],["class","action-btn","mat-icon-button","",3,"show-btn","pbiTooltip","disabled","click",4,"ngSwitchCase"],["class","action-btn context-menu-btn","mat-icon-button","",3,"space-btn","pbiTooltip","disabled","click",4,"ngSwitchCase"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngSwitchDefault"],["mat-icon-button","",1,"action-btn",3,"pbiTooltip","disabled","click"],["tri-svg-icon-16","",1,"tri-svg",3,"name"],["class","notes-count",4,"ngIf"],[1,"notes-count"],["mat-icon-button","",1,"action-btn","context-menu-btn",3,"pbiTooltip","disabled","click"],["contextMenuBtn",""],["fontIcon","pbi-glyph-more-vertical",1,"glyph-small"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"tooltipKey",4,"ngIf"],[3,"tooltipKey"],["class","glyphicon glyph-small",3,"fontIcon",4,"ngIf"],["size","small","class","icon",3,"name",4,"ngIf"],["tri-svg-icon-16","","class","tri-svg",3,"name",4,"ngIf"],[1,"glyphicon","glyph-small",3,"fontIcon"],["size","small",1,"icon",3,"name"]],template:function(he,pe){1&he&&(d.\u0275\u0275template(0,O,2,1,"div",0),d.\u0275\u0275template(1,ie,1,1,"ng-template",null,1,d.\u0275\u0275templateRefExtractor)),2&he&&d.\u0275\u0275property("ngIf","Saving"!==pe.goal.state&&"Deleting"!==pe.goal.state)},dependencies:[l.NgForOf,l.NgIf,l.NgTemplateOutlet,l.NgSwitch,l.NgSwitchCase,l.NgSwitchDefault,c.Hw,y._,i.V,C.M,v.j,k.F],styles:["[_nghost-%COMP%]{display:flex}[_nghost-%COMP%]   .goal-actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}[_nghost-%COMP%]   .goal-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{position:relative;padding:0;border:none;background:none;height:100%;width:32px}[_nghost-%COMP%]   .goal-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:rgba(0,0,0,.05);color:inherit}[_nghost-%COMP%]   .goal-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:before{vertical-align:middle}[_nghost-%COMP%]   .goal-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   tri-svg-icon[_ngcontent-%COMP%]{margin-top:-5px}[_nghost-%COMP%]   .goal-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   .notes-count[_ngcontent-%COMP%]{position:absolute;top:12px;right:0;border-radius:30px;padding:2px 4px;min-width:8px;min-height:8px;font-size:var(--xs-font-size);font-family:var(--fluent-font-family);font-weight:var(--font-weight-regular);background:var(--fluent-theme-primary-color);color:var(--text-primary-content-color-hc)}[_nghost-%COMP%]   .goal-actions[_ngcontent-%COMP%]   .action-btn.show-btn[_ngcontent-%COMP%]{display:block;visibility:visible}[_nghost-%COMP%]   .goal-actions[_ngcontent-%COMP%]   .action-btn.space-btn[_ngcontent-%COMP%]{display:block}.context-menu-open[_nghost-%COMP%]   .goal-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{display:block!important;visibility:visible!important}.context-menu-open[_nghost-%COMP%]   .goal-actions[_ngcontent-%COMP%]   .action-btn.context-menu-btn[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.05);color:inherit}"],changeDetection:0}),J}(o.w)},95594:function(lt,Ge,t){"use strict";t.d(Ge,{k:function(){return E}});var r=t(125),o=t(50423),P=t(9380),a=t(82621),d=t(77476),p=t(86663),l=t(36858),c=t(85102);function y(s,ne){if(1&s&&o.\u0275\u0275element(0,"pbi-icon",6),2&s){var te=o.\u0275\u0275nextContext(2);o.\u0275\u0275classProp("rotate180",!te.valueChange.isIncrease),o.\u0275\u0275property("size",te.arrowSize)}}var i=function(){return{rounded:!0}};function C(s,ne){if(1&s&&(o.\u0275\u0275elementStart(0,"div",2),o.\u0275\u0275template(1,y,1,3,"pbi-icon",3),o.\u0275\u0275elementStart(2,"div",4),o.\u0275\u0275elementContainer(3,5),o.\u0275\u0275elementEnd()()),2&s){var te=o.\u0275\u0275nextContext(),X=o.\u0275\u0275reference(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!!te.valueChange),o.\u0275\u0275advance(1),o.\u0275\u0275property("pbiTooltip",X),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngTemplateOutlet",X)("ngTemplateOutletContext",o.\u0275\u0275pureFunction0(4,i))}}function v(s,ne){if(1&s&&(o.\u0275\u0275elementStart(0,"span"),o.\u0275\u0275text(1),o.\u0275\u0275pipe(2,"localize"),o.\u0275\u0275elementEnd()),2&s){var te=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",te.isCyclePeriodLabelLocalizable?o.\u0275\u0275pipeBind1(2,1,null==te.valueChange?null:te.valueChange.period):null==te.valueChange?null:te.valueChange.period," ")}}function k(s,ne){if(1&s&&(o.\u0275\u0275text(0),o.\u0275\u0275template(1,v,3,3,"span",7)),2&s){var te=ne.rounded,X=o.\u0275\u0275nextContext();o.\u0275\u0275textInterpolate1(" ",te?X.formattedChangeValue:X.formattedTooltipValue," "),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",null==X.valueChange?null:X.valueChange.period)}}var E=function(){function s(ne,te){this.featureSwitches=ne,this.formatValuePipe=te,this.arrowSize="micro",this.nilDisplayString=""}return s.prototype.ngOnChanges=function(ne){var te,X,m,O,I,H;if(ne.goal){this.valueChange=r.r.calculateValueChange(this.goal,this.featureSwitches.featureSwitches.goalsSparklineChangeAggregations);var G=null!==(te=this.valueChange)&&void 0!==te&&te.isPercentage?void 0:this.goal.valuesFormatString;this.formattedChangeValue=this.formatValuePipe.transform(null===(X=this.valueChange)||void 0===X?void 0:X.changeAmount,G,!0,this.nilDisplayString),this.formattedChangeValue=null!==(m=this.valueChange)&&void 0!==m&&m.isPercentage?this.formattedChangeValue+"%":this.formattedChangeValue,this.formattedTooltipValue=this.formatValuePipe.transform(null===(O=this.valueChange)||void 0===O?void 0:O.changeAmount,G,!1,this.nilDisplayString),this.formattedTooltipValue=null!==(I=this.valueChange)&&void 0!==I&&I.isPercentage?this.formattedTooltipValue+"%":this.formattedTooltipValue,this.isCyclePeriodLabelLocalizable=r.r.isCyclePeriodLabelLocalizable(null===(H=this.valueChange)||void 0===H?void 0:H.period)}},s.\u0275fac=function(te){return new(te||s)(o.\u0275\u0275directiveInject(P.vZ),o.\u0275\u0275directiveInject(a.c))},s.\u0275cmp=o.\u0275\u0275defineComponent({type:s,selectors:[["goal-change-cell"]],inputs:{goal:"goal",arrowSize:"arrowSize",nilDisplayString:"nilDisplayString"},features:[o.\u0275\u0275NgOnChangesFeature],decls:3,vars:1,consts:[["class","delta",4,"ngIf"],["valueAndPeriod",""],[1,"delta"],["name","arrow",3,"size","rotate180",4,"ngIf"],[1,"change",3,"pbiTooltip"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["name","arrow",3,"size"],[4,"ngIf"]],template:function(te,X){1&te&&(o.\u0275\u0275template(0,C,4,5,"div",0),o.\u0275\u0275template(1,k,2,2,"ng-template",null,1,o.\u0275\u0275templateRefExtractor)),2&te&&o.\u0275\u0275property("ngIf",!1!==(null==X.goal||null==X.goal.metadata?null:X.goal.metadata.showPercentChange)&&!(null!=X.goal&&X.goal.valuesCategoryId))},dependencies:[d.NgIf,d.NgTemplateOutlet,p._,l.V,c.F],styles:["[_nghost-%COMP%]{--container-align-items: center;--arrow-margin: none;--arrow-font-weight: var(--font-weight-regular);--change-font-size: var(--sm-font-size);--change-font-weight: var(--font-weight-regular)}.delta[_ngcontent-%COMP%]{display:flex;align-items:var(--container-align-items);font-size:var(--change-font-size);font-weight:var(--change-font-weight);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.delta[_ngcontent-%COMP%]   pbi-icon[_ngcontent-%COMP%]{margin:var(--arrow-margin);font-weight:var(--arrow-font-weight)}.delta[_ngcontent-%COMP%]   .rotate180[_ngcontent-%COMP%]{transform:rotate(180deg)}.change[_ngcontent-%COMP%]{margin-left:4px;overflow:hidden;text-overflow:ellipsis}"],changeDetection:0}),s}()},11891:function(lt,Ge,t){"use strict";t.d(Ge,{E:function(){return c}});var r=t(44603),o=t(50423),P=t(65181),a=t(77476),d=t(36858);function p(y,i){if(1&y&&(o.\u0275\u0275elementStart(0,"div",2),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&y){var C=o.\u0275\u0275nextContext();o.\u0275\u0275property("pbiTooltip",C.completionDate),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",C.completionDate,"\n")}}function l(y,i){1&y&&(o.\u0275\u0275elementStart(0,"div",3),o.\u0275\u0275text(1,"\u2014"),o.\u0275\u0275elementEnd())}var c=function(){function y(i){this.localizationService=i,this.formatOptions={day:"numeric",month:"short",year:"numeric"}}return y.prototype.ngOnChanges=function(){if(this.goal.completionDate){var i=this.localizationService.currentLanguageLocale;this.completionDate=r.E.treatAsLocalDate(new Date(this.goal.completionDate)).toLocaleDateString(i,this.formatOptions)}},y.\u0275fac=function(C){return new(C||y)(o.\u0275\u0275directiveInject(P.o))},y.\u0275cmp=o.\u0275\u0275defineComponent({type:y,selectors:[["goal-due-date-cell"]],inputs:{goal:"goal",formatOptions:"formatOptions"},features:[o.\u0275\u0275NgOnChangesFeature],decls:3,vars:2,consts:[["class","completion-date",3,"pbiTooltip",4,"ngIf","ngIfElse"],["noValueDash",""],[1,"completion-date",3,"pbiTooltip"],[1,"no-value-dash"]],template:function(C,v){if(1&C&&(o.\u0275\u0275template(0,p,2,2,"div",0),o.\u0275\u0275template(1,l,2,0,"ng-template",null,1,o.\u0275\u0275templateRefExtractor)),2&C){var k=o.\u0275\u0275reference(2);o.\u0275\u0275property("ngIf",v.completionDate)("ngIfElse",k)}},dependencies:[a.NgIf,d.V],styles:["[_nghost-%COMP%]   .completion-date[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .no-value-dash[_ngcontent-%COMP%]{font-size:var(--lg-font-size);font-weight:var(--font-weight-regular);overflow:hidden}"],changeDetection:0}),y}()},64661:function(lt,Ge,t){"use strict";t.d(Ge,{$:function(){return E}});var r=t(50423),o=t(74521),P=t(9380),a=t(77476),d=t(86663),p=t(36858),l=t(85102);function c(s,ne){if(1&s&&r.\u0275\u0275element(0,"pbi-icon",4),2&s){r.\u0275\u0275nextContext();var te=r.\u0275\u0275reference(6);r.\u0275\u0275property("pbiTooltip",te)}}function y(s,ne){1&s&&(r.\u0275\u0275elementStart(0,"div"),r.\u0275\u0275text(1),r.\u0275\u0275pipe(2,"localize"),r.\u0275\u0275elementEnd()),2&s&&(r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",r.\u0275\u0275pipeBind1(2,1,"Metrics_Tooltip_LinkedHierarchical")," "))}function i(s,ne){1&s&&(r.\u0275\u0275elementStart(0,"div")(1,"span",9),r.\u0275\u0275text(2),r.\u0275\u0275pipe(3,"localize"),r.\u0275\u0275elementEnd(),r.\u0275\u0275text(4),r.\u0275\u0275pipe(5,"localize"),r.\u0275\u0275elementEnd()),2&s&&(r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(r.\u0275\u0275pipeBind1(3,2,"CurrentValue")),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate1(" ",r.\u0275\u0275pipeBind1(5,4,"Metrics_Tooltip_ValueAddedManually")," "))}function C(s,ne){1&s&&(r.\u0275\u0275elementStart(0,"div")(1,"span",9),r.\u0275\u0275text(2),r.\u0275\u0275pipe(3,"localize"),r.\u0275\u0275elementEnd(),r.\u0275\u0275text(4),r.\u0275\u0275pipe(5,"localize"),r.\u0275\u0275elementEnd()),2&s&&(r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(r.\u0275\u0275pipeBind1(3,2,"Role_DisplayName_TargetValue")),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate1(" ",r.\u0275\u0275pipeBind1(5,4,"Metrics_Tooltip_ValueAddedManually")," "))}function v(s,ne){if(1&s&&(r.\u0275\u0275template(0,i,6,6,"div",8),r.\u0275\u0275template(1,C,6,6,"div",8)),2&s){var te=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("ngIf",!te.goal.valueConnection),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!te.goal.targetConnection)}}function k(s,ne){if(1&s&&(r.\u0275\u0275elementStart(0,"div",5),r.\u0275\u0275template(1,y,3,3,"div",6),r.\u0275\u0275template(2,v,2,2,"ng-template",null,7,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementEnd()),2&s){var te=r.\u0275\u0275reference(3),X=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",X.goal.isLinked)("ngIfElse",te)}}var E=function(){function s(ne,te){this.goalRowService=ne,this.featureSwitches=te,this.boldName=!1,this.innerIndent=0}return s.prototype.ngOnChanges=function(ne){var te;ne.scorecard&&(this.showHierarchyTooltips=!_.isEmpty(null===(te=this.scorecard)||void 0===te?void 0:te.hierarchyPaths)&&!this.featureSwitches.featureSwitches.goalsHierarchiesHideInfoTooltips)},s.prototype.onNameClick=function(ne){this.goalRowService.onNameClick(this.goal,ne)},s.\u0275fac=function(te){return new(te||s)(r.\u0275\u0275directiveInject(o.D),r.\u0275\u0275directiveInject(P.vZ))},s.\u0275cmp=r.\u0275\u0275defineComponent({type:s,selectors:[["goal-name-cell"]],inputs:{goal:"goal",scorecard:"scorecard",boldName:"boldName",innerIndent:"innerIndent"},features:[r.\u0275\u0275NgOnChangesFeature],decls:7,vars:7,consts:[["data-testid","goal-name-box",1,"name-box",3,"pbiTooltip","click"],[1,"inner-indent"],["class","name-info","name","info","size","mini",3,"pbiTooltip",4,"ngIf"],["infoTooltip",""],["name","info","size","mini",1,"name-info",3,"pbiTooltip"],[1,"goal-info-tooltip"],[4,"ngIf","ngIfElse"],["manualTooltip",""],[4,"ngIf"],[1,"tooltip-value-label"]],template:function(te,X){1&te&&(r.\u0275\u0275elementStart(0,"button",0),r.\u0275\u0275listener("click",function(O){return X.onNameClick(O)}),r.\u0275\u0275element(1,"div",1),r.\u0275\u0275elementStart(2,"span"),r.\u0275\u0275text(3),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(4,c,1,1,"pbi-icon",2),r.\u0275\u0275template(5,k,4,2,"ng-template",null,3,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementEnd()),2&te&&(r.\u0275\u0275classProp("bold-name",X.boldName),r.\u0275\u0275property("pbiTooltip",X.goal.name),r.\u0275\u0275advance(1),r.\u0275\u0275styleProp("width",X.innerIndent+"px"),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(X.goal.name),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",X.showHierarchyTooltips&&(X.goal.isLinked||!X.goal.valueConnection||!X.goal.targetConnection)))},dependencies:[a.NgIf,d._,p.V,l.F],styles:["[_nghost-%COMP%]{display:flex;flex:1;height:100%;overflow:hidden}[_nghost-%COMP%]   .name-box[_ngcontent-%COMP%]{flex:1;border:none;padding:0;background-color:transparent;overflow:hidden;white-space:break-spaces;text-overflow:ellipsis;text-align:left}[_nghost-%COMP%]   .name-box[_ngcontent-%COMP%]:hover{text-decoration:underline}[_nghost-%COMP%]   .name-box.bold-name[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:var(--font-weight-semi-bold)}[_nghost-%COMP%]   .name-box[_ngcontent-%COMP%]   .name-info[_ngcontent-%COMP%]{margin:0 6px}[_nghost-%COMP%]   .name-box[_ngcontent-%COMP%]   .inner-indent[_ngcontent-%COMP%]{display:inline-block}"],changeDetection:0}),s}()},49048:function(lt,Ge,t){"use strict";t.d(Ge,{q:function(){return i}});var r=t(50423),o=t(77476),P=t(223),a=t(87758),d=function(v){return{userEmail:v}};function p(C,v){if(1&C&&r.\u0275\u0275element(0,"user-details-host",5),2&C){var k=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("details",r.\u0275\u0275pureFunction1(3,d,k.owners[0]))("showUserInfo",!0)("showTooltip",!0)}}function l(C,v){if(1&C&&r.\u0275\u0275element(0,"avatar-row",6),2&C){var k=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("emails",k.owners)("numAvatarsToShow",k.avatarRowCount)("rowStyle",k.rowStyle)("avatarSize",k.avatarSize)}}function c(C,v){if(1&C&&(r.\u0275\u0275elementStart(0,"div",2),r.\u0275\u0275template(1,p,1,5,"user-details-host",3),r.\u0275\u0275template(2,l,1,4,"ng-template",null,4,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementEnd()),2&C){var k=r.\u0275\u0275reference(3),E=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",1===E.owners.length&&!E.alwaysShowAvatarRow)("ngIfElse",k)}}function y(C,v){1&C&&(r.\u0275\u0275elementStart(0,"div",2),r.\u0275\u0275text(1,"\u2014"),r.\u0275\u0275elementEnd())}var i=function(){function C(){this.rowStyle="spread",this.avatarSize="medium",this.avatarRowCount=4}return C.prototype.ngOnChanges=function(v){var k;v.goal&&(this.owners=this.goal.owner?[this.goal.owner]:[],this.goal.additionalOwners&&(k=this.owners).push.apply(k,this.goal.additionalOwners.map(function(E){return E.userPrincipalName})))},C.\u0275fac=function(k){return new(k||C)},C.\u0275cmp=r.\u0275\u0275defineComponent({type:C,selectors:[["goal-owners-cell"]],inputs:{goal:"goal",alwaysShowAvatarRow:"alwaysShowAvatarRow",rowStyle:"rowStyle",avatarSize:"avatarSize",avatarRowCount:"avatarRowCount"},features:[r.\u0275\u0275NgOnChangesFeature],decls:3,vars:2,consts:[["class","content",4,"ngIf","ngIfElse"],["emptyOwner",""],[1,"content"],[3,"details","showUserInfo","showTooltip",4,"ngIf","ngIfElse"],["hasMultipleOwners",""],[3,"details","showUserInfo","showTooltip"],[3,"emails","numAvatarsToShow","rowStyle","avatarSize"]],template:function(k,E){if(1&k&&(r.\u0275\u0275template(0,c,4,2,"div",0),r.\u0275\u0275template(1,y,2,0,"ng-template",null,1,r.\u0275\u0275templateRefExtractor)),2&k){var s=r.\u0275\u0275reference(2);r.\u0275\u0275property("ngIf",(null==E.owners?null:E.owners.length)>0)("ngIfElse",s)}},dependencies:[o.NgIf,P.s,a.c],styles:["[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{overflow:hidden}[_nghost-%COMP%]     .user-info{color:var(--scorecard-tableRowForegroundColor)!important;font-family:var(--scorecard-fontFamily)}"],changeDetection:0}),C}()},76654:function(lt,Ge,t){"use strict";t.d(Ge,{t:function(){return y}});var r=t(3204),o=t(42989),P=t(74466),a=t(50423),d=t(49223),p=t(64929),l=t(77476);function c(i,C){if(1&i&&a.\u0275\u0275element(0,"goal-history-chart",1),2&i){var v=a.\u0275\u0275nextContext();a.\u0275\u0275styleProp("width",v.options.width+"px")("height",v.options.height+"px"),a.\u0275\u0275property("width",v.options.width)("height",v.options.height)("values",v.values)("formatString",v.goal.valuesFormatString)("color",v.options.lineColor)("showGoalTargets",!1)("axesOptions",v.axesOptions)("legend","None")}}var y=function(){function i(C,v){this.scorecardService=C,this.scorecardConfigurationService=v,this.axesOptions=o.n}return i.prototype.ngOnChanges=function(C){var k,E,s,v=this;if((C.goal||C.sparklineValues)&&(this.isCategorical=!_.isEmpty(this.scorecardService.getGoalValueCategories(this.goal)),this.values=null!==(k=this.sparklineValues)&&void 0!==k?k:r.b.buildSparklineValues(this.goal,!0).map(function(X){return{value:X.value,timestamp:X.timestamp}})),C.goal||C.height||C.width){var ne=null!==(s=null===(E=this.scorecardConfigurationService)||void 0===E?void 0:E.getConfiguration())&&void 0!==s?s:{scorecardDisplayOptions:{isMobileLayout:!1}},te=(0,P.ZP)(ne,function(X){X.scorecardDisplayOptions.sparklineOptions||(X.scorecardDisplayOptions.sparklineOptions={}),v.height&&(X.scorecardDisplayOptions.sparklineOptions.height=v.height),v.width&&(X.scorecardDisplayOptions.sparklineOptions.width=v.width)});this.options=r.b.getSparklineOptions(this.goal,this.scorecardService.getGoalStatuses(this.goal),te)}},i.\u0275fac=function(v){return new(v||i)(a.\u0275\u0275directiveInject(d.G),a.\u0275\u0275directiveInject(p.V,8))},i.\u0275cmp=a.\u0275\u0275defineComponent({type:i,selectors:[["goal-sparkline-cell"]],inputs:{goal:"goal",sparklineValues:"sparklineValues",height:"height",width:"width"},features:[a.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[[3,"width","height","values","formatString","color","showGoalTargets","axesOptions","legend",4,"ngIf"],[3,"width","height","values","formatString","color","showGoalTargets","axesOptions","legend"]],template:function(v,k){1&v&&a.\u0275\u0275template(0,c,1,12,"goal-history-chart",0),2&v&&a.\u0275\u0275property("ngIf",!k.isCategorical&&!k.goal.currentRefreshInProgress&&(null==k.values?null:k.values.length)>1&&k.options)},dependencies:[l.NgIf,o.R],changeDetection:0}),i}()},35328:function(lt,Ge,t){"use strict";t.d(Ge,{e:function(){return d}});var r=t(125),o=t(50423),P=t(49223),a=t(77971),d=function(){function p(l){this.scorecardService=l}return p.prototype.ngOnChanges=function(l){l.goal&&(this.status=r.r.buildCurrentGoalValue(this.goal).status,this.goalStatuses=this.scorecardService.getGoalStatuses(this.goal))},p.\u0275fac=function(c){return new(c||p)(o.\u0275\u0275directiveInject(P.G))},p.\u0275cmp=o.\u0275\u0275defineComponent({type:p,selectors:[["goal-status-cell"]],inputs:{goal:"goal"},features:[o.\u0275\u0275NgOnChangesFeature],decls:1,vars:2,consts:[[3,"status","goalStatuses"]],template:function(c,y){1&c&&o.\u0275\u0275element(0,"status-icon",0),2&c&&o.\u0275\u0275property("status",y.status)("goalStatuses",y.goalStatuses)},dependencies:[a.m],styles:["[_nghost-%COMP%]{display:flex;flex:1;height:100%;overflow:hidden;align-items:center;justify-content:center}"],changeDetection:0}),p}()},85953:function(lt,Ge,t){"use strict";t.d(Ge,{m:function(){return ge}});var r=t(125),o=t(98925),P=t(70060),a=t(62458),d=t(50423),p=t(87426),l=t(65181),c=t(49223),y=t(77476),i=t(24326),C=t(36858),v=t(85102),k=t(90127);function E(se,De){1&se&&d.\u0275\u0275element(0,"pbi-spinner",4)}function s(se,De){if(1&se&&(d.\u0275\u0275elementStart(0,"div",8),d.\u0275\u0275text(1),d.\u0275\u0275pipe(2,"formatGoalValue"),d.\u0275\u0275elementEnd()),2&se){var fe=d.\u0275\u0275nextContext(2),Oe=d.\u0275\u0275reference(4);d.\u0275\u0275property("pbiTooltip",Oe),d.\u0275\u0275advance(1),d.\u0275\u0275textInterpolate1(" ",d.\u0275\u0275pipeBind3(2,2,null==fe.currentValue?null:fe.currentValue.value,fe.categories,fe.formatString)," ")}}function ne(se,De){1&se&&(d.\u0275\u0275elementContainerStart(0),d.\u0275\u0275text(1,"/"),d.\u0275\u0275elementContainerEnd())}var te=function(De){return{"combined-target":De}};function X(se,De){if(1&se&&(d.\u0275\u0275elementStart(0,"div",9),d.\u0275\u0275template(1,ne,2,0,"ng-container",10),d.\u0275\u0275elementContainerStart(2),d.\u0275\u0275text(3),d.\u0275\u0275pipe(4,"formatGoalValue"),d.\u0275\u0275elementContainerEnd(),d.\u0275\u0275elementEnd()),2&se){var fe=d.\u0275\u0275nextContext(2),Oe=d.\u0275\u0275reference(6);d.\u0275\u0275property("pbiTooltip",Oe)("ngClass",d.\u0275\u0275pureFunction1(8,te,fe.showValueAndTargetCombined)),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",fe.showValueAndTargetCombined),d.\u0275\u0275advance(2),d.\u0275\u0275textInterpolate(d.\u0275\u0275pipeBind3(4,4,fe.showTarget?null==fe.currentValue?null:fe.currentValue.finalTarget:null==fe.currentValue?null:fe.currentValue.nextTarget,fe.categories,fe.formatString))}}var m=function(De,fe){return{categories:De,compact:fe}};function O(se,De){if(1&se&&(d.\u0275\u0275elementStart(0,"div",5),d.\u0275\u0275template(1,s,3,6,"div",6),d.\u0275\u0275template(2,X,5,10,"div",7),d.\u0275\u0275elementEnd()),2&se){var fe=d.\u0275\u0275nextContext();d.\u0275\u0275property("ngClass",d.\u0275\u0275pureFunction2(3,m,!!fe.categories,fe.compact)),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",fe.showCurrent&&fe.hasValueOrConnection),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",(fe.showTarget||fe.showMilestone)&&fe.hasTargetOrConnection)}}function I(se,De){1&se&&(d.\u0275\u0275elementStart(0,"div")(1,"span",15),d.\u0275\u0275text(2),d.\u0275\u0275pipe(3,"localize"),d.\u0275\u0275elementEnd(),d.\u0275\u0275text(4),d.\u0275\u0275pipe(5,"localize"),d.\u0275\u0275elementEnd()),2&se&&(d.\u0275\u0275advance(2),d.\u0275\u0275textInterpolate(d.\u0275\u0275pipeBind1(3,2,"CurrentValue")),d.\u0275\u0275advance(2),d.\u0275\u0275textInterpolate1(" ",d.\u0275\u0275pipeBind1(5,4,"Metrics_Tooltip_ValueNotConnected")," "))}function H(se,De){1&se&&(d.\u0275\u0275elementStart(0,"div"),d.\u0275\u0275text(1),d.\u0275\u0275pipe(2,"localize"),d.\u0275\u0275elementEnd()),2&se&&(d.\u0275\u0275advance(1),d.\u0275\u0275textInterpolate(d.\u0275\u0275pipeBind1(2,1,"Rollups_Submetrics_Tooltip_Footer")))}function G(se,De){if(1&se&&(d.\u0275\u0275elementStart(0,"div")(1,"div",16),d.\u0275\u0275text(2),d.\u0275\u0275pipe(3,"formatGoalValue"),d.\u0275\u0275elementEnd(),d.\u0275\u0275template(4,H,3,3,"div",10),d.\u0275\u0275elementEnd()),2&se){var fe=d.\u0275\u0275nextContext(3);d.\u0275\u0275advance(2),d.\u0275\u0275textInterpolate2("",d.\u0275\u0275pipeBind4(3,3,null==fe.currentValue?null:fe.currentValue.value,fe.categories,fe.formatString,!1)," ",fe.valueRollupsString,""),d.\u0275\u0275advance(2),d.\u0275\u0275property("ngIf",!fe.canViewAllGoals)}}function Z(se,De){if(1&se&&d.\u0275\u0275template(0,G,5,8,"div",12),2&se){d.\u0275\u0275nextContext();var fe=d.\u0275\u0275reference(5),Oe=d.\u0275\u0275nextContext();d.\u0275\u0275property("ngIf",(null==Oe.goal?null:Oe.goal.valueRollup)&&!(null!=Oe.goal&&Oe.goal.isLinked))("ngIfElse",fe)}}function ie(se,De){if(1&se&&(d.\u0275\u0275text(0),d.\u0275\u0275pipe(1,"formatGoalValue")),2&se){var fe=d.\u0275\u0275nextContext(2);d.\u0275\u0275textInterpolate1(" ",d.\u0275\u0275pipeBind4(1,1,null==fe.currentValue?null:fe.currentValue.value,fe.categories,fe.formatString,!1)," ")}}function ye(se,De){if(1&se&&(d.\u0275\u0275elementStart(0,"div",11),d.\u0275\u0275template(1,I,6,6,"div",12),d.\u0275\u0275template(2,Z,1,2,"ng-template",null,13,d.\u0275\u0275templateRefExtractor),d.\u0275\u0275template(4,ie,2,6,"ng-template",null,14,d.\u0275\u0275templateRefExtractor),d.\u0275\u0275elementEnd()),2&se){var fe=d.\u0275\u0275reference(3),Oe=d.\u0275\u0275nextContext();d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",Oe.isCurrentValueNotConnectedToHierarchy)("ngIfElse",fe)}}function ae(se,De){if(1&se&&(d.\u0275\u0275elementStart(0,"div")(1,"span",15),d.\u0275\u0275text(2),d.\u0275\u0275pipe(3,"localize"),d.\u0275\u0275elementEnd(),d.\u0275\u0275text(4),d.\u0275\u0275pipe(5,"localize"),d.\u0275\u0275elementEnd()),2&se){var fe=d.\u0275\u0275nextContext(2);d.\u0275\u0275advance(2),d.\u0275\u0275textInterpolate1(" ",d.\u0275\u0275pipeBind1(3,2,fe.showTarget?"Role_DisplayName_TargetValue":"Role_DisplayName_MilestoneValue")," "),d.\u0275\u0275advance(2),d.\u0275\u0275textInterpolate1(" ",d.\u0275\u0275pipeBind1(5,4,"Metrics_Tooltip_ValueNotConnected")," ")}}function J(se,De){1&se&&(d.\u0275\u0275elementStart(0,"div"),d.\u0275\u0275text(1),d.\u0275\u0275pipe(2,"localize"),d.\u0275\u0275elementEnd()),2&se&&(d.\u0275\u0275advance(1),d.\u0275\u0275textInterpolate(d.\u0275\u0275pipeBind1(2,1,"Rollups_Submetrics_Tooltip_Footer")))}function N(se,De){if(1&se&&(d.\u0275\u0275elementStart(0,"div")(1,"div",16),d.\u0275\u0275text(2),d.\u0275\u0275pipe(3,"formatGoalValue"),d.\u0275\u0275elementEnd(),d.\u0275\u0275template(4,J,3,3,"div",10),d.\u0275\u0275elementEnd()),2&se){var fe=d.\u0275\u0275nextContext(3);d.\u0275\u0275advance(2),d.\u0275\u0275textInterpolate2(" ",d.\u0275\u0275pipeBind4(3,3,fe.showTarget?null==fe.currentValue?null:fe.currentValue.finalTarget:null==fe.currentValue?null:fe.currentValue.nextTarget,fe.categories,fe.formatString,!1)," ",fe.targetRollupsString," "),d.\u0275\u0275advance(2),d.\u0275\u0275property("ngIf",!fe.canViewAllGoals)}}function he(se,De){if(1&se&&d.\u0275\u0275template(0,N,5,8,"div",12),2&se){d.\u0275\u0275nextContext();var fe=d.\u0275\u0275reference(5),Oe=d.\u0275\u0275nextContext();d.\u0275\u0275property("ngIf",(null==Oe.goal?null:Oe.goal.targetRollup)&&!(null!=Oe.goal&&Oe.goal.isLinked))("ngIfElse",fe)}}function pe(se,De){if(1&se&&(d.\u0275\u0275text(0),d.\u0275\u0275pipe(1,"localize"),d.\u0275\u0275elementStart(2,"div",20),d.\u0275\u0275text(3),d.\u0275\u0275pipe(4,"formatGoalValue"),d.\u0275\u0275elementEnd()),2&se){var fe=d.\u0275\u0275nextContext(2);d.\u0275\u0275textInterpolate1(" ",d.\u0275\u0275pipeBind1(1,2,fe.showTarget?"Target_Final":"Target_Next")," "),d.\u0275\u0275advance(3),d.\u0275\u0275textInterpolate1(" ",d.\u0275\u0275pipeBind4(4,4,fe.showTarget?null==fe.currentValue?null:fe.currentValue.finalTarget:null==fe.currentValue?null:fe.currentValue.nextTarget,fe.categories,fe.formatString,!1)," ")}}function ce(se,De){if(1&se&&(d.\u0275\u0275elementStart(0,"div",17),d.\u0275\u0275template(1,ae,6,6,"div",12),d.\u0275\u0275template(2,he,1,2,"ng-template",null,18,d.\u0275\u0275templateRefExtractor),d.\u0275\u0275template(4,pe,5,9,"ng-template",null,19,d.\u0275\u0275templateRefExtractor),d.\u0275\u0275elementEnd()),2&se){var fe=d.\u0275\u0275reference(3),Oe=d.\u0275\u0275nextContext();d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",Oe.isTargetValueNotConnectedToHierarchy)("ngIfElse",fe)}}var ge=function(){function se(De,fe,Oe,be){var Fe=this;this.hierarchyService=De,this.localizationService=fe,this.scorecardService=Oe,this.changeDetector=be,this.currentValue=null,this.canViewAllGoals=!0,this.metricRollups=(0,o.P)(this.localizationService),this.scorecardSubscription=this.scorecardService.getScorecard().subscribe(function(ze){var Ke;Fe.scorecard=ze,Fe.canViewAllGoals=3===(0,P.l)(null===(Ke=Fe.scorecard)||void 0===Ke?void 0:Ke.permissions),Fe.goal&&(Fe.setHierarchyTooltips(),Fe.categories=Fe.scorecardService.getGoalValueCategories(Fe.goal)),Fe.changeDetector.markForCheck()})}return se.prototype.ngOnChanges=function(De){var fe=this;De.goal&&(this.formatString=this.goal.valuesFormatString,this.currentValue=r.r.buildCurrentGoalValue(this.goal),this.hasValueOrConnection=!_.isNil(this.currentValue.value)||!_.isNil(this.goal.valueConnection),this.hasTargetOrConnection=!_.isNil(this.currentValue.finalTarget)||!_.isNil(this.currentValue.nextTarget)||!_.isNil(this.goal.targetConnection),_.isNil(this.goal.valueRollup)||(this.valueRollupsString=this.localizationService.format("Rollups_Submetrics_Tooltip_Header",[this.metricRollups[(0,o.t)(this.goal.valueRollup.rollupType)]])),_.isNil(this.goal.targetRollup)||(this.targetRollupsString=this.localizationService.format("Rollups_Submetrics_Tooltip_Header",[this.metricRollups[(0,o.t)(this.goal.targetRollup.rollupType)]])),this.categories=this.scorecardService.getGoalValueCategories(this.goal),this.setHierarchyTooltips()),(De.showCurrent||De.showTarget||De.showMilestone)&&(a.fF.assert(function(){return!(fe.showTarget&&fe.showMilestone)},"GoalValueCell can't show both target and milestone."),this.showValueAndTargetCombined=this.showCurrent&&(this.showTarget||this.showMilestone))},se.prototype.ngOnDestroy=function(){this.scorecardSubscription.unsubscribe()},se.prototype.setHierarchyTooltips=function(){var De,fe=!_.isEmpty(null===(De=this.scorecard)||void 0===De?void 0:De.hierarchyPaths);this.isCurrentValueNotConnectedToHierarchy=fe&&this.goal.valueConnection&&!this.hierarchyService.isDatasetMappedToHierarchyPath(this.goal.valueConnection.datasetId,this.scorecard.hierarchyPaths),this.isTargetValueNotConnectedToHierarchy=fe&&this.goal.targetConnection&&!this.hierarchyService.isDatasetMappedToHierarchyPath(this.goal.targetConnection.datasetId,this.scorecard.hierarchyPaths)},se.\u0275fac=function(fe){return new(fe||se)(d.\u0275\u0275directiveInject(p.G),d.\u0275\u0275directiveInject(l.o),d.\u0275\u0275directiveInject(c.G),d.\u0275\u0275directiveInject(d.ChangeDetectorRef))},se.\u0275cmp=d.\u0275\u0275defineComponent({type:se,selectors:[["goal-value-cell"]],inputs:{goal:"goal",showCurrent:"showCurrent",showTarget:"showTarget",showMilestone:"showMilestone",compact:"compact"},features:[d.\u0275\u0275NgOnChangesFeature],decls:7,vars:2,consts:[["class","pbi-spinner-medium",4,"ngIf","ngIfElse"],["noRefresh",""],["valueTooltip",""],["targetTooltip",""],[1,"pbi-spinner-medium"],[1,"content",3,"ngClass"],["class","value",3,"pbiTooltip",4,"ngIf"],["class","target",3,"pbiTooltip","ngClass",4,"ngIf"],[1,"value",3,"pbiTooltip"],[1,"target",3,"pbiTooltip","ngClass"],[4,"ngIf"],[1,"goal-current-tooltip"],[4,"ngIf","ngIfElse"],["rollupsValueTooltip",""],["currentValueTooltip",""],[1,"no-hierarchy-label"],[1,"rollups"],[1,"goal-target-tooltip"],["rollupsTargetTooltip",""],["targetValueTooltip",""],[1,"target-value"]],template:function(fe,Oe){if(1&fe&&(d.\u0275\u0275template(0,E,1,0,"pbi-spinner",0),d.\u0275\u0275template(1,O,3,6,"ng-template",null,1,d.\u0275\u0275templateRefExtractor),d.\u0275\u0275template(3,ye,6,2,"ng-template",null,2,d.\u0275\u0275templateRefExtractor),d.\u0275\u0275template(5,ce,6,2,"ng-template",null,3,d.\u0275\u0275templateRefExtractor)),2&fe){var be=d.\u0275\u0275reference(2);d.\u0275\u0275property("ngIf",!(null==Oe.goal||!Oe.goal.currentRefreshInProgress)||!(null==Oe.goal||!Oe.goal.targetRefreshInProgress))("ngIfElse",be)}},dependencies:[y.NgClass,y.NgIf,i.k,C.V,v.F,k.D],styles:["pbi-spinner[_ngcontent-%COMP%]{display:flex;position:relative;top:3px;left:10px}.content[_ngcontent-%COMP%]{display:flex;overflow:hidden;white-space:nowrap;align-items:baseline;font-size:var(--lg-font-size);font-weight:var(--font-weight-regular)}.content[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   .target[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis}.content[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:var(--xxlg-font-size);font-weight:var(--font-weight-semi-bold)}.content[_ngcontent-%COMP%]   .combined-target[_ngcontent-%COMP%]{font-size:var(--md-font-size)}.content.categories[_ngcontent-%COMP%]{white-space:nowrap}.content.categories[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:var(--vlg-font-size)}.content.compact[_ngcontent-%COMP%], .content.compact[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:var(--md-font-size)}.no-hierarchy-label[_ngcontent-%COMP%]{font-weight:var(--font-weight-semi-bold)}.rollups[_ngcontent-%COMP%]{font-weight:var(--font-weight-regular)}.goal-target-tooltip[_ngcontent-%COMP%]{margin-left:4px;margin-right:4px}.goal-target-tooltip[_ngcontent-%COMP%]   .target-value[_ngcontent-%COMP%]{margin-top:4px;text-align:center}"],changeDetection:0}),se}()},67090:function(lt,Ge,t){"use strict";t.d(Ge,{i:function(){return v}});var r=t(77695),o=t(50423),P=t(77476),a=t(59968),d=t(36858),p=t(83399),l=t(44260),c=t(85102);function y(k,E){if(1&k){var s=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"div",2)(2,"scorecard-column-context-menu",3),o.\u0275\u0275listener("onSortColumn",function(X){o.\u0275\u0275restoreView(s);var m=o.\u0275\u0275nextContext();return o.\u0275\u0275resetView(m.sortColumn(X))}),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementContainerEnd()}if(2&k){var ne=o.\u0275\u0275nextContext();o.\u0275\u0275advance(2),o.\u0275\u0275property("column",ne.column)("columnIndex",ne.index)("sortType",ne.sort)}}function i(k,E){if(1&k&&o.\u0275\u0275element(0,"sort-icon",7),2&k){var s=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("reserveSpaceWhenHidden",s.reserveSpaceForSortIcon)("hidden",s.sort.sortBy!==s.column.sortBy)("upArrow",!s.sort.sortAscending)}}function C(k,E){if(1&k){var s=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",4),o.\u0275\u0275listener("click",function(){o.\u0275\u0275restoreView(s);var X=o.\u0275\u0275nextContext();return o.\u0275\u0275resetView(X.toggleSort(X.sort,X.column.sortBy))}),o.\u0275\u0275pipe(1,"localize"),o.\u0275\u0275pipe(2,"localize"),o.\u0275\u0275element(3,"span",5),o.\u0275\u0275pipe(4,"localize"),o.\u0275\u0275template(5,i,1,3,"sort-icon",6),o.\u0275\u0275elementEnd()}if(2&k){var ne=o.\u0275\u0275nextContext();o.\u0275\u0275classProp("sort-col",ne.column.canSort),o.\u0275\u0275attributeInterpolate2("aria-label","",o.\u0275\u0275pipeBind1(1,7,ne.column.name)," ",o.\u0275\u0275pipeBind1(2,9,"Sort"),""),o.\u0275\u0275advance(3),o.\u0275\u0275propertyInterpolate("localize",ne.column.name),o.\u0275\u0275property("pbiTooltip",o.\u0275\u0275pipeBind1(4,11,ne.column.name)),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",ne.column.canSort)}}var v=function(){function k(){this.onSortColumn=new o.EventEmitter,this.reserveSpaceForSortIcon=!0}return k.prototype.sortColumn=function(E){this.onSortColumn.emit(E)},k.prototype.toggleSort=function(E,s){var ne=r.p.toggleSort(E,s);this.onSortColumn.emit(ne)},k.\u0275fac=function(s){return new(s||k)},k.\u0275cmp=o.\u0275\u0275defineComponent({type:k,selectors:[["scorecard-column-header"]],inputs:{column:"column",index:"index",sort:"sort",isEditMode:"isEditMode",reserveSpaceForSortIcon:"reserveSpaceForSortIcon"},outputs:{onSortColumn:"onSortColumn"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["columnNameWithSortIcon",""],[1,"column-menu-sort"],[1,"scorecard-column-context-menu",3,"column","columnIndex","sortType","onSortColumn"],[1,"column-sort",3,"click"],[1,"column-name",3,"localize","pbiTooltip"],[3,"reserveSpaceWhenHidden","hidden","upArrow",4,"ngIf"],[3,"reserveSpaceWhenHidden","hidden","upArrow"]],template:function(s,ne){if(1&s&&(o.\u0275\u0275template(0,y,3,3,"ng-container",0),o.\u0275\u0275template(1,C,6,13,"ng-template",null,1,o.\u0275\u0275templateRefExtractor)),2&s){var te=o.\u0275\u0275reference(2);o.\u0275\u0275property("ngIf",ne.isEditMode)("ngIfElse",te)}},dependencies:[P.NgIf,a.X,d.V,p.M,l.o,c.F],styles:["[_nghost-%COMP%]{width:100%}[_nghost-%COMP%]   .column-sort[_ngcontent-%COMP%]{padding-left:0;width:100%;border:none;background:none;color:inherit;display:flex;flex-direction:row;align-items:center;cursor:default}[_nghost-%COMP%]   .column-sort.sort-col[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   .column-sort.sort-col[_ngcontent-%COMP%]     sort-icon mat-icon.sort-icon{font-weight:var(--font-weight-semi-bold)}[_nghost-%COMP%]   .column-sort.sort-col[_ngcontent-%COMP%]:hover     sort-icon mat-icon.sort-icon.hide{display:inline;visibility:visible;color:var(--fluent-theme-neutral-tertia-color)}[_nghost-%COMP%]   .column-sort.sort-col[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .column-sort.sort-col[_ngcontent-%COMP%]:focus:hover, [_nghost-%COMP%]   .column-sort.sort-col[_ngcontent-%COMP%]:active, [_nghost-%COMP%]   .column-sort.sort-col[_ngcontent-%COMP%]:focus:hover:active{background-color:var(--fluent-theme-neutral-lighter-color)}[_nghost-%COMP%]   .column-sort[_ngcontent-%COMP%]   .column-name[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .column-menu-sort[_ngcontent-%COMP%]   .scorecard-column-context-menu[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .column-menu-sort[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .column-menu-sort[_ngcontent-%COMP%]:focus:hover, [_nghost-%COMP%]   .column-menu-sort[_ngcontent-%COMP%]:active, [_nghost-%COMP%]   .column-menu-sort[_ngcontent-%COMP%]:focus:hover:active{background-color:var(--fluent-theme-neutral-lighter-color)}[_nghost-%COMP%]   .column-menu-sort[_ngcontent-%COMP%]     sort-icon mat-icon.sort-icon.hide{color:transparent}"],changeDetection:0}),k}()},74161:function(lt,Ge,t){"use strict";t.d(Ge,{p:function(){return st}});var r=t(81337),o=t(60042),P=t(62458),a=t(68233),d=(0,r.pi)((0,r.pi)({},a._),{Default:0,XXXXMidLarge:1736}),p=(0,r.ev)([],Object.values(d).sort(function(ot,ut){return ut-ot}),!0);function l(ot,ut){for(var qe=0,ct=p;qe<ct.length;qe++){var yt=ct[qe];if(!_.isNil(ot[yt])&&ut>=yt)return ot[yt]}return ot[d.Default]}var y,i,C,v,k,E,s,ne,te,X,m,O,I,H,G,Z=((y={})[0]=((i={})[d.XXXXXLarge]=584,i[d.XXXXMidLarge]=562,i[d.XXXXLarge]=516,i[d.XXLarge]=438,i[d.XLarge]=298,i[d.Large]=292,i[d.Medium]=258,i[d.Default]=184,i),y[1]=((C={})[d.XXXXLarge]=98,C[d.XXLarge]=74,C[d.Default]=40,C),y[2]=((v={})[d.Default]=76,v),y[3]=((k={})[d.Default]=128,k),y[10]=((E={})[d.Default]=106,E),y[7]=((s={})[d.Default]=64,s),y[8]=((ne={})[d.Default]=64,ne),y[9]=((te={})[d.Default]=64,te),y[4]=((X={})[d.XXXXXLarge]=156,X[d.XXXXLarge]=132,X[d.XXLarge]=100,X[d.Default]=60,X),y[5]=((m={})[d.Default]=62,m),y[6]={},y),ie=((O={})[d.XXXXXLarge]=32,O[d.XXLarge]=24,O[d.Default]=16,O),ye=((I={})[d.XXXXXLarge]=80,I[d.XXXXMidLarge]=58,I[d.XXXXLarge]=48,I[d.XXLarge]=30,I[d.XLarge]=26,I[d.Default]=20,I),ae=((H={})[d.XXXXLarge]={avatarRowSize:"medium",avatarRowCount:4},H[d.XXLarge]={avatarRowSize:"small",avatarRowCount:4},H[d.Default]={avatarRowSize:"small",avatarRowCount:2},H),J=((G={})[d.XXLarge]=!0,G[d.Default]=!1,G),N=t(50423),he=t(98587),pe=t(73221),ce=t(14172),ge=t(74521),se=t(62087),De=t(77476),fe=t(95594),Oe=t(43847),be=t(4716),Fe=t(11891),ze=t(64661),Ke=t(49048),je=t(76654),He=t(35328),Je=t(85953),j=t(67090),nt=["columnHeader"],Ue=["nameCell"],oe=["ownersCell"],h=["statusCell"],g=["combinedValueTargetCell"],u=["changeCell"],F=["currentCell"],W=["targetCell"],ee=["milestoneCell"],U=["sparklineCell"],Q=["dueDateCell"],B=["blank"],w=function(ut,qe){return{"--column-spacing":ut,"--border-left-width":qe}};function q(ot,ut){if(1&ot){var qe=N.\u0275\u0275getCurrentView();N.\u0275\u0275elementStart(0,"tree-list",12),N.\u0275\u0275listener("onResizeColumn",function(wt){N.\u0275\u0275restoreView(qe);var It=N.\u0275\u0275nextContext();return N.\u0275\u0275resetView(It.onResizeColumn(wt))})("onExpansionChange",function(wt){N.\u0275\u0275restoreView(qe);var It=N.\u0275\u0275nextContext();return N.\u0275\u0275resetView(It.onExpansionChange(wt))})("onResizeTreeList",function(wt){N.\u0275\u0275restoreView(qe);var It=N.\u0275\u0275nextContext();return N.\u0275\u0275resetView(It.onResizeScorecard(wt))}),N.\u0275\u0275elementEnd()}if(2&ot){var ct=N.\u0275\u0275nextContext();N.\u0275\u0275styleMap(N.\u0275\u0275pureFunction2(12,w,ct.columnSpacing+"px",ct.colorBorderWidth+"px")),N.\u0275\u0275classProp("hidden",!ct.scorecardWidth),N.\u0275\u0275property("columns",ct.columns)("data",ct.goals)("expandedNodeIds",ct.expandedGoalIds)("getChildren",ct.getSubgoals)("rowHash",ct.rowHash)("rowHeight",ct.rowHeight)("rowSpacing",ct.rowSpacing)("paddingIndent",0)}}function le(ot,ut){if(1&ot){var qe=N.\u0275\u0275getCurrentView();N.\u0275\u0275elementStart(0,"scorecard-column-header",14),N.\u0275\u0275listener("onSortColumn",function(It){N.\u0275\u0275restoreView(qe);var K=N.\u0275\u0275nextContext(2);return N.\u0275\u0275resetView(K.onSortColumn.emit(It))}),N.\u0275\u0275elementEnd()}if(2&ot){var ct=N.\u0275\u0275nextContext().column,yt=N.\u0275\u0275nextContext();N.\u0275\u0275property("column",ct)("index",ct.index)("sort",yt.sort)("isEditMode",yt.isEditMode)("reserveSpaceForSortIcon",!1)}}function de(ot,ut){if(1&ot&&(N.\u0275\u0275template(0,le,1,5,"scorecard-column-header",13),N.\u0275\u0275pipe(1,"async")),2&ot){var qe=N.\u0275\u0275nextContext();N.\u0275\u0275property("ngIf",!N.\u0275\u0275pipeBind1(1,1,qe.hideColumnHeaders$))}}function V(ot,ut){if(1&ot&&(N.\u0275\u0275elementStart(0,"div",15),N.\u0275\u0275element(1,"goal-name-cell",16)(2,"div",17)(3,"goal-actions-cell",18),N.\u0275\u0275elementEnd()),2&ot){var qe=ut.data,ct=N.\u0275\u0275nextContext();N.\u0275\u0275advance(1),N.\u0275\u0275property("goal",qe)("scorecard",ct.scorecard)("boldName",0===qe.level)("innerIndent",qe.innerIndent*ct.innerIndentSpacing),N.\u0275\u0275advance(1),N.\u0275\u0275styleProp("width",ct.columnSpacing,"px"),N.\u0275\u0275advance(1),N.\u0275\u0275property("goal",qe)("isEditMode",ct.isEditMode)("showActionIcons",ct.showActionIcons)}}function M(ot,ut){if(1&ot&&N.\u0275\u0275element(0,"goal-owners-cell",19),2&ot){var qe=ut.data,ct=N.\u0275\u0275nextContext();N.\u0275\u0275property("goal",qe)("alwaysShowAvatarRow",!0)("rowStyle","stack")("avatarSize",ct.avatarRowSize)("avatarRowCount",ct.avatarRowCount)}}function L(ot,ut){1&ot&&N.\u0275\u0275element(0,"goal-status-cell",20),2&ot&&N.\u0275\u0275property("goal",ut.data)}function x(ot,ut){if(1&ot&&N.\u0275\u0275element(0,"goal-value-cell",21),2&ot){var ct,yt,qe=ut.data;N.\u0275\u0275property("goal",qe)("showCurrent",!0)("showTarget",null!==(ct=null==qe.metadata?null:qe.metadata.showFinalTarget)&&void 0!==ct?ct:!qe.targetConnection)("showMilestone",!(null!==(yt=null==qe.metadata?null:qe.metadata.showFinalTarget)&&void 0!==yt?yt:!qe.targetConnection))("compact",!0)}}function Y(ot,ut){1&ot&&N.\u0275\u0275element(0,"goal-change-cell",20),2&ot&&N.\u0275\u0275property("goal",ut.data)}function ue(ot,ut){1&ot&&N.\u0275\u0275element(0,"goal-value-cell",22),2&ot&&N.\u0275\u0275property("goal",ut.data)("showCurrent",!0)("compact",!0)}function Ne(ot,ut){1&ot&&N.\u0275\u0275element(0,"goal-value-cell",23),2&ot&&N.\u0275\u0275property("goal",ut.data)("showTarget",!0)("compact",!0)}function $e(ot,ut){1&ot&&N.\u0275\u0275element(0,"goal-value-cell",24),2&ot&&N.\u0275\u0275property("goal",ut.data)("showMilestone",!0)("compact",!0)}function Xe(ot,ut){if(1&ot&&N.\u0275\u0275element(0,"goal-sparkline-cell",25),2&ot){var qe=ut.data,ct=ut.column,yt=N.\u0275\u0275nextContext();N.\u0275\u0275property("goal",qe)("height",yt.rowHeight-10)("width",ct.width-yt.columnSpacing)}}function it(ot,ut){if(1&ot&&N.\u0275\u0275element(0,"goal-due-date-cell",26),2&ot){var qe=ut.data,ct=N.\u0275\u0275nextContext();N.\u0275\u0275property("goal",qe)("formatOptions",ct.dateFormatOptions)}}var st=function(ot){function ut(qe,ct,yt,wt){var K,mn,It=this;return(It=ot.call(this)||this).goalRowService=qe,It.expansionService=ct,It.changeDetector=yt,It.scorecardSettings=wt,It.onSortColumn=new N.EventEmitter,It.getSubgoals=function(qt){return It.getGoalNodes(qt.subGoals,qt)},It.rowHash=function(qt,Fn){return JSON.stringify(Fn)},It.rowHeight=42,It.rowSpacing=0,It.dateFormatOptions={day:"numeric",month:"numeric",year:"2-digit"},It.colorBorderWidth=4,It.resizedColumns={},It.innerIndentSpacing=16,It.columnSpacing=20,It.showActionIcons=!1,It.avatarRowSize="smallest",It.avatarRowCount=2,It.hideColumnHeaders$=null===(mn=null===(K=It.scorecardSettings)||void 0===K?void 0:K.settings)||void 0===mn?void 0:mn.pipe((0,ce.U)(function(qt){return qt?.hideColumnHeaders})),It}return(0,r.ZT)(ut,ot),ut.prototype.ngAfterViewInit=function(){var qe;this.columnTemplates=((qe={})[0]=this.nameCell,qe[1]=this.ownersCell,qe[2]=this.statusCell,qe[3]=this.combinedValueTargetCell,qe[10]=this.changeCell,qe[7]=this.currentCell,qe[4]=this.sparklineCell,qe[8]=this.targetCell,qe[9]=this.milestoneCell,qe[5]=this.dueDateCell,qe[6]=null,qe)},ut.prototype.ngOnChanges=function(qe){qe.scorecard&&(this.goals=this.getGoalNodes(this.scorecard.goals),this.expandedGoalIds=this.expansionService.expandedGoalIds),(qe.scorecard||qe.viewSettings)&&this.columnTemplates&&this.recalculateColumnLayout(),ot.prototype.ngOnChanges.call(this,qe)},ut.prototype.onGoalRowClick=function(qe,ct){this.goalRowService.onRowClick(qe,ct)},ut.prototype.onExpansionChange=function(qe){this.expansionService.expandGoals(qe.added),this.expansionService.collapseGoals(qe.removed)},ut.prototype.onResizeScorecard=function(qe){this.scorecardWidth=qe.width,this.recalculateColumnLayout(),this.changeDetector.markForCheck()},ut.prototype.onResizeColumn=function(qe){var ct=qe.width,yt=qe.column;this.columns[yt]&&(this.columns[yt].width=ct,this.resizedColumns[this.columns[yt].id]=ct-this.columnSpacing,this.recalculateColumnLayout(),this.changeDetector.markForCheck())},ut.prototype.recalculateColumnLayout=function(){this.effectiveBreakpoint=this.getEffectiveBreakpoint(this.scorecardWidth);var qe=this.calculateCutoffIndex(),ct=this.calculateTotalWidth(this.effectiveBreakpoint,qe);this.columns=this.getColumns(qe,ct),this.setResponsiveSettings()},ut.prototype.getEffectiveBreakpoint=function(qe){for(var ct=0,yt=p;ct<yt.length;ct++){var wt=yt[ct];if(this.calculateTotalWidth(wt)<qe)return wt}return d.Default},ut.prototype.calculateCutoffIndex=function(){var qe,ct=this.scorecard.columnSettings.length;if(null!==(qe=this.viewSettings)&&void 0!==qe&&qe.dropColumns&&this.effectiveBreakpoint===d.Default)for(var yt=this.colorBorderWidth,wt=0;wt<this.scorecard.columnSettings.length;wt++)if(this.scorecard.columnSettings[wt].show&&(yt+=this.getBaseColumnWidth(this.scorecard.columnSettings[wt].columnId,this.effectiveBreakpoint))>this.scorecardWidth){ct=wt||1;break}return ct},ut.prototype.calculateTotalWidth=function(qe,ct){var wt,yt=this;return this.colorBorderWidth+_.sumBy(_.filter(null===(wt=this.scorecard)||void 0===wt?void 0:wt.columnSettings.slice(0,ct),function(It){return It.show}),function(It){return yt.getBaseColumnWidth(It.columnId,qe)})},ut.prototype.getBaseColumnWidth=function(qe,ct){var yt;return(null!==(yt=this.resizedColumns[qe])&&void 0!==yt?yt:l(Z[qe],ct))+l(ye,ct)},ut.prototype.getColumns=function(qe,ct){var wt,yt=this,It=function(mn){var qt=yt.getBaseColumnWidth(mn,yt.effectiveBreakpoint);return Math.max(Math.floor(qt/ct*yt.scorecardWidth),qt)};return _.map(_.filter(null===(wt=this.scorecard)||void 0===wt?void 0:wt.columnSettings.slice(0,qe),function(K){return K.show}),function(K,mn){return(0,r.pi)((0,r.pi)({},o.Ml[K.columnId]),{cellTemplate:yt.columnTemplates[K.columnId],key:K.columnId.toString(),index:mn,width:It(K.columnId),headerTemplate:yt.columnHeader,resizable:!0})})},ut.prototype.setResponsiveSettings=function(){var qe=this;this.innerIndentSpacing=l(ie,this.effectiveBreakpoint),this.columnSpacing=l(ye,this.effectiveBreakpoint),this.columns&&this.columns.forEach(function(ct){return qe.updateSettingsForColumn(ct)})},ut.prototype.getSettingsForColumn=function(qe,ct){return function(ot,ut,qe){for(var ct=function(qt){if(P.fF.assert(function(){return!(!_.isNil(ot[qt])&&_.isNil(ut[qt]))},"Associated settings at ".concat(qt," have no matching breakpoint in base settings and will not be triggered.")),ut[qt]<=qe&&!_.isNil(ot[qt]))return{value:ot[qt]}},yt=0,wt=p;yt<wt.length;yt++){var K=ct(wt[yt]);if("object"==typeof K)return K.value}return ot[d.Default]}(ct,Z[qe.id],qe.width-this.columnSpacing)},ut.prototype.updateSettingsForColumn=function(qe){var ct;switch(qe.id){case 0:this.showActionIcons=this.getSettingsForColumn(qe,J);break;case 1:ct=this.getSettingsForColumn(qe,ae),this.avatarRowSize=ct.avatarRowSize,this.avatarRowCount=ct.avatarRowCount}},ut.prototype.getGoalNodes=function(qe,ct){var yt=this;return _.map(_.filter(qe,function(wt){return!wt.isNew&&!wt.isHidden}),function(wt,It){var K=ct?ct.level+1:0,mn=ct?ct.color:o.gT.ColorPalette[It%o.gT.ColorPalette.length],qt=yt.goalRowService.isSelected(wt),Fn=[!1===wt.isFilterMatch?"goal-not-match":"",qt?"selected-goal":""].join(" ");return(0,r.pi)((0,r.pi)({},wt),{level:K,color:mn,innerIndent:K,style:{"border-left-color":mn,"border-color":qt?mn:""},class:Fn,onClick:function(vo){return yt.goalRowService.onRowClick(wt,vo)}})})},ut.\u0275fac=function(ct){return new(ct||ut)(N.\u0275\u0275directiveInject(ge.D),N.\u0275\u0275directiveInject(se.l),N.\u0275\u0275directiveInject(N.ChangeDetectorRef),N.\u0275\u0275directiveInject(he.u,8))},ut.\u0275cmp=N.\u0275\u0275defineComponent({type:ut,selectors:[["compact-scorecard"]],viewQuery:function(ct,yt){if(1&ct&&(N.\u0275\u0275viewQuery(nt,5),N.\u0275\u0275viewQuery(Ue,5),N.\u0275\u0275viewQuery(oe,5),N.\u0275\u0275viewQuery(h,5),N.\u0275\u0275viewQuery(g,5),N.\u0275\u0275viewQuery(u,5),N.\u0275\u0275viewQuery(F,5),N.\u0275\u0275viewQuery(W,5),N.\u0275\u0275viewQuery(ee,5),N.\u0275\u0275viewQuery(U,5),N.\u0275\u0275viewQuery(Q,5),N.\u0275\u0275viewQuery(B,5)),2&ct){var wt=void 0;N.\u0275\u0275queryRefresh(wt=N.\u0275\u0275loadQuery())&&(yt.columnHeader=wt.first),N.\u0275\u0275queryRefresh(wt=N.\u0275\u0275loadQuery())&&(yt.nameCell=wt.first),N.\u0275\u0275queryRefresh(wt=N.\u0275\u0275loadQuery())&&(yt.ownersCell=wt.first),N.\u0275\u0275queryRefresh(wt=N.\u0275\u0275loadQuery())&&(yt.statusCell=wt.first),N.\u0275\u0275queryRefresh(wt=N.\u0275\u0275loadQuery())&&(yt.combinedValueTargetCell=wt.first),N.\u0275\u0275queryRefresh(wt=N.\u0275\u0275loadQuery())&&(yt.changeCell=wt.first),N.\u0275\u0275queryRefresh(wt=N.\u0275\u0275loadQuery())&&(yt.currentCell=wt.first),N.\u0275\u0275queryRefresh(wt=N.\u0275\u0275loadQuery())&&(yt.targetCell=wt.first),N.\u0275\u0275queryRefresh(wt=N.\u0275\u0275loadQuery())&&(yt.milestoneCell=wt.first),N.\u0275\u0275queryRefresh(wt=N.\u0275\u0275loadQuery())&&(yt.sparklineCell=wt.first),N.\u0275\u0275queryRefresh(wt=N.\u0275\u0275loadQuery())&&(yt.dueDateCell=wt.first),N.\u0275\u0275queryRefresh(wt=N.\u0275\u0275loadQuery())&&(yt.blankCell=wt.first)}},inputs:{scorecard:"scorecard",isEditMode:"isEditMode",viewSettings:"viewSettings",sort:"sort"},outputs:{onSortColumn:"onSortColumn"},features:[N.\u0275\u0275InheritDefinitionFeature,N.\u0275\u0275NgOnChangesFeature],decls:23,vars:1,consts:[[3,"style","hidden","columns","data","expandedNodeIds","getChildren","rowHash","rowHeight","rowSpacing","paddingIndent","onResizeColumn","onExpansionChange","onResizeTreeList",4,"ngIf"],["columnHeader",""],["nameCell",""],["ownersCell",""],["statusCell",""],["combinedValueTargetCell",""],["changeCell",""],["currentCell",""],["targetCell",""],["milestoneCell",""],["sparklineCell",""],["dueDateCell",""],[3,"columns","data","expandedNodeIds","getChildren","rowHash","rowHeight","rowSpacing","paddingIndent","onResizeColumn","onExpansionChange","onResizeTreeList"],[3,"column","index","sort","isEditMode","reserveSpaceForSortIcon","onSortColumn",4,"ngIf"],[3,"column","index","sort","isEditMode","reserveSpaceForSortIcon","onSortColumn"],[1,"displayed-name-and-action-wrapper","compact-cell"],[3,"goal","scorecard","boldName","innerIndent"],[1,"actions-spacer"],[3,"goal","isEditMode","showActionIcons"],[1,"compact-cell",3,"goal","alwaysShowAvatarRow","rowStyle","avatarSize","avatarRowCount"],[1,"compact-cell",3,"goal"],[1,"compact-cell",3,"goal","showCurrent","showTarget","showMilestone","compact"],[1,"compact-cell",3,"goal","showCurrent","compact"],[1,"compact-cell",3,"goal","showTarget","compact"],[1,"compact-cell",3,"goal","showMilestone","compact"],[1,"compact-cell",3,"goal","height","width"],[1,"compact-cell",3,"goal","formatOptions"]],template:function(ct,yt){1&ct&&(N.\u0275\u0275template(0,q,1,15,"tree-list",0),N.\u0275\u0275template(1,de,2,3,"ng-template",null,1,N.\u0275\u0275templateRefExtractor),N.\u0275\u0275template(3,V,4,9,"ng-template",null,2,N.\u0275\u0275templateRefExtractor),N.\u0275\u0275template(5,M,1,5,"ng-template",null,3,N.\u0275\u0275templateRefExtractor),N.\u0275\u0275template(7,L,1,1,"ng-template",null,4,N.\u0275\u0275templateRefExtractor),N.\u0275\u0275template(9,x,1,5,"ng-template",null,5,N.\u0275\u0275templateRefExtractor),N.\u0275\u0275template(11,Y,1,1,"ng-template",null,6,N.\u0275\u0275templateRefExtractor),N.\u0275\u0275template(13,ue,1,3,"ng-template",null,7,N.\u0275\u0275templateRefExtractor),N.\u0275\u0275template(15,Ne,1,3,"ng-template",null,8,N.\u0275\u0275templateRefExtractor),N.\u0275\u0275template(17,$e,1,3,"ng-template",null,9,N.\u0275\u0275templateRefExtractor),N.\u0275\u0275template(19,Xe,1,3,"ng-template",null,10,N.\u0275\u0275templateRefExtractor),N.\u0275\u0275template(21,it,1,2,"ng-template",null,11,N.\u0275\u0275templateRefExtractor)),2&ct&&N.\u0275\u0275property("ngIf",yt.scorecard)},dependencies:[De.NgIf,fe.k,Oe.$,be.I,Fe.E,ze.$,Ke.q,je.t,He.e,Je.m,j.i,De.AsyncPipe],styles:["[_nghost-%COMP%]{display:flex;flex:1}[_nghost-%COMP%]   tree-list[_ngcontent-%COMP%]{flex:1;overflow:hidden;--column-headers-backgroundColor: var(--scorecard-tableHeaderBackgroundColor);--column-headers-foregroundColor: var(--scorecard-tableHeaderForegroundColor);--row-backgroundColor: var(--scorecard-tableRowBackgroundColor);--row-foregroundColor: var(--scorecard-tableRowForegroundColor);--border-left-width: 4px;--expanderWidth: 44px}[_nghost-%COMP%]   tree-list[_ngcontent-%COMP%]     .row{width:100%;border:1px solid var(--fluent-theme-neutral-lighter-color);border-left-width:var(--border-left-width);border-right:none}[_nghost-%COMP%]   tree-list[_ngcontent-%COMP%]     .row.goal-not-match{opacity:50%}[_nghost-%COMP%]   tree-list[_ngcontent-%COMP%]     .row.selected-goal{border-right:1px solid}[_nghost-%COMP%]   tree-list[_ngcontent-%COMP%]     .row goal-actions-cell .action-btn, [_nghost-%COMP%]   tree-list[_ngcontent-%COMP%]     .row .actions-spacer{display:none;visibility:hidden}[_nghost-%COMP%]   tree-list[_ngcontent-%COMP%]     .row:hover goal-actions-cell .action-btn, [_nghost-%COMP%]   tree-list[_ngcontent-%COMP%]     .row:focus-within goal-actions-cell .action-btn, [_nghost-%COMP%]   tree-list[_ngcontent-%COMP%]     .row:hover .actions-spacer, [_nghost-%COMP%]   tree-list[_ngcontent-%COMP%]     .row:focus-within .actions-spacer{display:block;visibility:visible}[_nghost-%COMP%]   tree-list[_ngcontent-%COMP%]     .column-headers{border-left:var(--border-left-width) solid var(--column-headers-backgroundColor);border-bottom:1px solid var(--fluent-theme-neutral-lighter-color)}[_nghost-%COMP%]   tree-list[_ngcontent-%COMP%]     .column-headers .header{border-right:none!important}[_nghost-%COMP%]   tree-list[_ngcontent-%COMP%]     .column-headers .column-name{font-size:var(--md-font-size)}.compact-cell[_ngcontent-%COMP%]{width:100%;padding-right:var(--column-spacing);overflow:hidden}.displayed-name-and-action-wrapper[_ngcontent-%COMP%]{display:flex;height:100%}.displayed-name-and-action-wrapper[_ngcontent-%COMP%]   goal-name-cell[_ngcontent-%COMP%]{flex:1}.displayed-name-and-action-wrapper[_ngcontent-%COMP%]   goal-name-cell[_ngcontent-%COMP%]     .name-box{white-space:nowrap}goal-status-cell[_ngcontent-%COMP%]     status-icon{width:100%}goal-status-cell[_ngcontent-%COMP%]     status-icon .status{border-radius:4px;padding:0 2px}goal-due-date-cell[_ngcontent-%COMP%]{font-size:var(--md-font-size)}goal-change-cell[_ngcontent-%COMP%]{--change-font-size: var(--md-font-size)}"],changeDetection:0}),ut}(pe.w)},95027:function(lt,Ge,t){"use strict";t.d(Ge,{u:function(){return k}});var r=t(50423),o=t(60166),P=t(77476),a=t(59968),d=t(44408),p=t(50264),l=t(85102);function c(E,s){if(1&E){var ne=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",12),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(ne);var X=r.\u0275\u0275nextContext(3);return r.\u0275\u0275resetView(X.onLinkToGoalClick())}),r.\u0275\u0275elementEnd()}}function y(E,s){if(1&E&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275template(1,c,1,0,"button",11),r.\u0275\u0275elementContainerEnd()),2&E){var ne=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",ne.canEdit)}}function i(E,s){if(1&E){var ne=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275element(1,"div",4)(2,"div",5)(3,"div",6),r.\u0275\u0275elementStart(4,"button",7),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(ne);var m=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(m.onNewGoalClick())}),r.\u0275\u0275pipe(5,"localize"),r.\u0275\u0275element(6,"mat-icon",8)(7,"span",9),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(8,y,2,1,"ng-container",10),r.\u0275\u0275elementContainerEnd()}if(2&E){var te=r.\u0275\u0275nextContext();r.\u0275\u0275advance(4),r.\u0275\u0275property("disabled",!te.canEdit),r.\u0275\u0275attribute("aria-label",r.\u0275\u0275pipeBind1(5,3,"NewMetric")),r.\u0275\u0275advance(4),r.\u0275\u0275property("pbiFeatureSwitch","goalsLinkedGoals")}}function C(E,s){if(1&E){var ne=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",15),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(ne);var X=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(X.onCancelScorecard())}),r.\u0275\u0275element(1,"mat-icon",16),r.\u0275\u0275elementStart(2,"span"),r.\u0275\u0275text(3),r.\u0275\u0275pipe(4,"localize"),r.\u0275\u0275elementEnd()()}2&E&&(r.\u0275\u0275advance(3),r.\u0275\u0275textInterpolate(r.\u0275\u0275pipeBind1(4,1,"Metrics_LinkedMetrics_CancelSelectedScorecard")))}function v(E,s){if(1&E&&(r.\u0275\u0275element(0,"div",13),r.\u0275\u0275template(1,C,5,3,"button",14)),2&E){var ne=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",ne.onCancelScorecard)}}var k=function(){function E(s){this.onNewGoal=new r.EventEmitter,this.onLinkToGoal=new r.EventEmitter,this.onCancelScorecard=s?.onCancelSelectedScorecard?function(){return s.onCancelSelectedScorecard()}:void 0}return E.prototype.onNewGoalClick=function(){this.onNewGoal.emit()},E.prototype.onLinkToGoalClick=function(){this.onLinkToGoal.emit()},E.\u0275fac=function(ne){return new(ne||E)(r.\u0275\u0275directiveInject(o.M,8))},E.\u0275cmp=r.\u0275\u0275defineComponent({type:E,selectors:[["empty-scorecard"]],inputs:{canEdit:"canEdit",isMetricsPicker:"isMetricsPicker"},outputs:{onNewGoal:"onNewGoal",onLinkToGoal:"onLinkToGoal"},decls:5,vars:2,consts:[[1,"empty-scorecard"],[1,"content"],[4,"ngIf","ngIfElse"],["metricsPickerView",""],[1,"icon"],["localize","ScorecardNoMetricsTitle",1,"title"],["localize","ScorecardNoMetricsDescription",1,"description"],[1,"pbi-fluent-button","primary","new-goal",3,"disabled","click"],["fontIcon","pbi-glyph-add",1,"glyphicon","glyph-small"],["localize","NewMetric"],[4,"pbiFeatureSwitch"],["class","link-to-goal","localize","Metrics_LinkedMetrics_Button_Preview",3,"click",4,"ngIf"],["localize","Metrics_LinkedMetrics_Button_Preview",1,"link-to-goal",3,"click"],["localize","ScorecardNoMetricsInfo",1,"title"],["class","cancel-scorecard-button pbi-fluent-button",3,"click",4,"ngIf"],[1,"cancel-scorecard-button","pbi-fluent-button",3,"click"],["fontIcon","pbi-glyph-chevronleftmedium",1,"glyphicon","glyph-mini"]],template:function(ne,te){if(1&ne&&(r.\u0275\u0275elementStart(0,"div",0)(1,"div",1),r.\u0275\u0275template(2,i,9,5,"ng-container",2),r.\u0275\u0275template(3,v,2,1,"ng-template",null,3,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementEnd()()),2&ne){var X=r.\u0275\u0275reference(4);r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",!te.isMetricsPicker)("ngIfElse",X)}},dependencies:[P.NgIf,a.X,d.Hw,p.P,l.F],styles:["[_nghost-%COMP%]   .empty-scorecard[_ngcontent-%COMP%]{width:100%;height:100%;overflow:auto;display:flex}[_nghost-%COMP%]   .empty-scorecard[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin:auto;max-width:350px;text-align:center;display:flex;flex-direction:column;align-items:center}[_nghost-%COMP%]   .empty-scorecard[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQkAAADwCAMAAAAkXGEzAAADAFBMVEUAAAD50Rr2yhLzyhLzyhLzyRLzyRLzyRHzyBLzyRHzyRLyyRHzyRLzyRHyyRLzyRHyyBH/0hTzyhPyyRHzyRLyyBL0yRPzyRH0yxLzyRLyyRH1yxXzyRH4zRf/3CXzyRH0yhP/+UP0yhP0yRHzyRHzyhHzyRH0yRLyyRHxxxHwxhHvxRHtwxHswhHrwRHpwBHowBHvz0n777v99NDkuxHguBD99dPetRD89dT58tLcsxDnvhH89df2yhL99tn999v88cX55Y3555r44oH99939+OD66Zz444f9+OPzyxz22Fb56Z/++eT++eX9+ef56aL++un8+On9+uv78MD666v66qX+++3+++/+/PH666j99tf888z+++v+/PT+/Pb+/ff+/Pn//vr//vz+/f3u2X3asg/Sqg/Kow/huRDWrxDTrA/11UjyyRf0yxL00DP43m/333hZQD345pZPOxzzzSNWQiX////00j769Nn88sjzyRL++efz1FL222W6lA9FKwv///9PNBHwxhL////9/Pzuyzb04Y3x2G3tyCny1V7qwxv////atBb99dX///7kxELp0Gj67bTsxiDivzHny1jCvbLSy8DfuR7x4JbsxBj79dr58tb16r389+X////79d3279Tz7NT49OX69un////07tj28uT28dr18N/7+Ov//fjv6tr48MvX0Mj48936+O/s5tbz7uD++eT8/Pz29fP89+H69eHm4dPw7OH7+vb////5+Pjw7erby6D8+u/9/fvr59zm4c718+78+/j//Oz////6+fjz7+be2M739fH6+PL9+/Pu7Onr6OHz8u75+PX39evv7ej49vPr5dD+++n7+vnt6uT////8+/r////////////y7+ro49aNgWj9/Pvk3MX//O/////////WzsZPMxP////o5d/o49z////X0cXm4tv////9/f3h0ZX///7////6+ffx7+zn497t6eX39fTm4t3m493j39nz8e77+/r29fTm4dzz8e/5+Pfh3dfkktj7AAABAHRSTlMAEzZVa3yUprnN2d3n7PL7/w08s9XzTYEoYp8vxSAHikIDXHPiZr6b8P//////////////////////////HP//////////////////////////////////////////////////////////////RP///wT/CP8Pzv/+//X///+FFv83/8W3////////0f//1v///////xRA/////////9L//////9T/////////iSj/////6adb///////JlUxS////////48F///7///9z//7//////+3//9r/2dfc//8o5f/w391vIeH//+P9/ubq/+3p8+vx7ubq7fvz+PDaofzxuSMzYQAAH99JREFUeAHs04VhhTAQANCL4nC4u+4/YSeot0DyeTs8eDwet0Io40IapmU7rucHGPie69iWaUjBGSXwAsKIyzhJ8WNpEksehaApkuWxg9/hxHlGQC9FWdn4M3ZVFqAHwioXf8etGAHF1aIJ8C8EjagVPpHb+JfsXMknrUjw7yWiBaV0zMT/YrJOnRW9h//J69VYMsT4/+IBbm6cLDyHNY1wX9284HmWuYN76riL53J5d8cX64LnW9bbHWEOXsNhcCf1htfZargLsuO1dgJ3MPIDr3bw8Y26urqRIIihKLqqBMrLzGgoGGjOP66l72ay5sgRXOnJR+qu7qAJ9gaT3V1pf85LW9+AiHgAIprYw16qflRzBnXwL4M46c3JXwyESc6MXohX2xCCxfsQYm8heC88NYV91XoZp9AYYrPdDbTdTE8BpypPxLxBUwkJ291g2yCTS8CbUVlGA2K/342w90wwlX1VWEZziZCkIyRhagmFhZy8QTOSmOV5Wgy7PM+iEMzg7UR/Gf+QXSzzEcroGAHgcBbyfANtkKUaV6ISxh/u62A3bSAI47hAuaL9FBuCkMUh+NBzKkU9EAgJJG4CxLjN2nn/Fykbf6vS1lLxesct+YsDO8ffYeSBl0atfHyPA/z3EgjGLezKCEdITB3yKYFIfG/ehDgJCYQ3wpdnjBORQDyUhOj2cJzEzCHPEuh15SAGfZyQBPoDKYhLhWMl5ux2YbqaV3a1MN3ap3cJqEshCKC2xB1M99US9zDdiUgwEYqBqiGxZJRYVkYJ+5SQUAOBZdnHCUqg731tDnuoI7FilFhVRgn7FJFAb+j5gyrGiUog9vqJ1QnhJvEA02O1xCNMD8ISCDsej64INSWS1XsJJZJVYtv/3c/f35TgXEwC0djbGR6gtgSzEsn1V9NTYjuUYGISCHwd6SM4Szxbic8wVUk8y0tg5AdigsYS6+T6F4l1st7/KGFnghKY+IA4Vw4SG0aJzeZLKbE5jBL2KSmhzptDdGI4SGwZJbZbSmwPo4R9Skog7jSWCPAhJBBILIkaEi9/l3gRkBBYFV3lJpGm6S7d7VJKpOm0lODclO4okZr/+7mwhOq2uiSsRMYokWWUMLNv302bLKNExgQlmq+KAAISTzBN5SQEVsUETSVeYVpUSMzal8CkxSVhJbTWmf4pobMZJfZzK6EXML2amRaUaL4qxiHcJZiV0PNSwsxKibm2EprJSyB0u8UuICCR539I5FrnZt6CBC5cIIaqgUTOKJHnlDAzSuS5lWBtSKihwykewafE8neJ5T+RQFT/QD9DE4mCvZUSRUEJM6NEUZQSbwVrRQJndSE6n7xI/GDuPNjTRrYw7N7AlwMh7uVyl4V4+6Z3F8JiuT/YuLftBUxLYc1u2j+/YggayRmfkXQ0it/0Ht4HSTOfPh3v/9DgYHf3kH3nZuPnbrLvHu7uHrDv7Ptr4ka7QxNJIJk4coE/JiDpTMQ4fHoTqorf445MJD6xCZXF74QTEZ1ANHF8cnJ8cnx88uHbBifin9P58PPchOLid6eDK2iAauLEBdyE4uJ3wP6V9HP4pCaUF78/t73hiHtl4vTkVP98wkF+/pSbUF38jk+pXlRxE6fO4SbUF7+7bL4lgnQTP7qAm1Be/A5OqctnrG1lVyZYW5la/PYys4nFgQR7IT+5gL0Qn4rf8Zh3dSr0qYZ7Rz875ugee3NT684eFrD66Sa+ufPLsVMRx7/c+cZHE/02BmkAlZkvvr7962+/O+S3X29//cWMrOQ7l7t/PzfnRclXPsqjj25CPzz++PXPvxzx569/6AcHauIgk9cAbt0C0PKZA6qJPmlmB1TYyuib23/88ccd2+i/+fY3rXWR2MTcUgF0mAmdwtIczQTIcrxp8ETFF/qm6JuvbfONvtkyNlCiuvP9lAZN7t6FJlrqPqnuPC1ZVQ0CHeKmWmDiIA8t7t+HFvkDionBKUXb8fhZ+CwO9KCF1505c0UQmYCi0fl2U3fuVHS+PNP/9BmWH+LBKGbiVhHEJqB4i2ACPWdOgmsacz3DcDmTk+Cs7szJg4nHj8FE3vz7HJqAScRENyh7T7S1uTWRgstNQIpgohsxEQXaecI7E2mDAw3M7O+DGe0gbeDURJSwmBgEHBUmSmDh6VOwUHJvAkbc3xPuBSfMmGlrm7kcxMStApgoltPpchFMFG6JTdDuFw8ATv+Q+/VEpeJgPcGL3+kqcLRcs/id04BTXXRd/B5wfbvnv/htY3Q6y/PndkJ6bqLFEhi8mGv95NwLMFhadF93Hnd55ejRL7PXQY4wpH/50m5IbzWhgcHCosECGGhiE6SrxwSgJBvL08gAyBCH9K9e2QzprSZugUFthZtYqYHBLffF7wmxiPYQIETPWnOb4oDAQ3rEBBrSW4vfN8GgvGqiDAY33Re/Q+2O9xzBMeOQiiSjgMBDesQEFtJbS75bYLCwZmIBDLYIJd9ON49xjDF/4STIEIf0f/8tD+kFJvbAYNm+CeKDH0HACU7qIgYAhYf0D+5aP9/Xv2CfeUhvMbEJBmWziTIYbBJMBN2lVRMx2fuGHtJfLH7fB4PaBqNZ/K6BwX1B8Zu0zBwFKV1nIIMeTVtLvmsaGOSyBuar6Aal5Dvq7mmviV7fTWSXTAurbItz88oqKzdRH3ByohgAKfUAgPpJHFYTVZOI2a0sw7LaXrBhYmLMwYK7Heh4ZoIXv7NPC4aIZzWopbLZCzuw2W158Xvo8gr6xyuKoStmwqD0QcS2LkJndRUslPjvFJgwYuyuy1QMkVvaCmaSiE08LjREnG+nmQj45x8wo83ubOPF7/oEe7HjvVGbO/NrV8vEDifTELGjixCZyOxwxCaivWx5PDRRt/n4S9xTE7MuEJlg/KuLWKxBk40NMLG0g5tghLqQO1rxiyLCcLVM7JpIn+8aIqwmiov8dyF151DHEBbKW4l4a+KZC8QmGKZN+OGhScT+ri0TMIYEDhF6y0ypiSML6bzIRH7VbvF7oG6/fdbjrYk0ytNUmYfzN1vfEZjgZAoXTWjzO55U4HvIlw6CiSWAFy0BT4uYCc5sqeliexsaFF4/w4rfhGcnoz6amAcdbSvNeA0WE0jxO73wb6FpQsv/sIEXvwn3f64DGWFIb0xjMUifa9CgsP4hmrWG9Hjdefbm0dFmGq07O+U6fdeBmkDIm+5UzGkA1miaXvzGkO88OvwzwY6NIjTIzBZBYIJW/HZMh+00l2iCT2Nh32XHRnH59Ywh5GJITy9+U1LdLo9NrF5KHgAK88vLpQI0qVlDenrxm/a0YLfHJtYuIwM6r5d1yho0eLFgDWTpxW+UoOxGWI9PJs4LAFBbZmQaKgqZZasJevEb48Y12dKqV6WJar78bK1JjS0Ol5vMv2BvD6sJevEbo0/w5u8lN83k01lY+L6RYsfARoMM6JTWWyyUUvrX1pCeXvzG6ByRNc/6PTaR5WwBo7aZzc6xY2P9AtZAll78RojG2nolZfYBZSZ4Ter1fXZsVOUmRMXvN29sFr8RQuNs9A4abwdUmUgXQacABqV1qQlh8fvtW3vFb4T6kHBkeMDOPVHadBbjxs3rqpG01HLruXX9c67xLUM0nUVQ/H7+3F7xW/4Rkdp7sXujg96bYKRAJ5/L5VIvANixkfuI1u/Fn6auVEhPUwf7THH+SHdfEAwG6VtRuYktYEvrnM76aw0AyrmPQKazyLp7HJAw0NvNh8jGRvvql25GQx6b2Gmimd8GC0vFUk6AJZom9Dm7w92AEEq2iz+IWchiAtSYAJ1UTgJu4rPP7JoIywL6wAjbbIbgAkrfE7tNAOB1TgYSTXMDhPcEJx4WDekKqTxPcBP5PSl0E7bpbYtF4SL/UXrtOGoCxXW5CR7IKjcBk6PAEV47gmpMaNW9q2ViuE/WtYqDUxIhGyZSe65NDA2pMHGtLjiREvcdgS4b01m27CAM6bkBT02I3vsD1L1opIcJSWCTODa35GyeNKGZINBPzSeSseGJZKQrpGBOjb8m+oiZFWt/x3pUTGfx2UQvNcccFleS6CG93yZ6iC2rnpjoOQhKSC82EQ6rNjFMut8R6ookJ4ZjSY+nswhMJBKqTXSR7oElAqDTE3E+neXnn+2F9PyVqzbxPy/ui3YFnE9neYeH9P6biHhxrzyUcDyd5d07PKT33wSLcDh18Aw8pH//Hg/pfTcRihE6NZTpLO/f4yG97yYCynpW4pAeT+t5SO+/iQShe0eazvL8ORLSC1759LRiE0nCIEjSdJZKBQnpBSZiMcUmuukdXbkPMzduIGk9cHxfbQ8p623jM0lkr8h/E5OKuvzIK6OYYCaVcJ38fAfdBJ7Q89+PTfyhM0F+5oduAr9rw3+/34PIh67ue8Lnj/PSfpXPE/TIXb7/4gxcVRPEyB0nNEX8iJHqTYyM8N9PitxxJvBx4/ShVnQT9Tr//aTIHacHnzVAH3RGN8H/nJvInTaKIw4I5OF34TDFBD1yl8c0nKTS98TEBMEEIXLHiRNmYxKG3xFMECN3fF3l+4pCsYmPI3f300L71XuYman8n7azem5ch+LwZWZmJo3AjangLbezzOw8Xlpm5lUpUAos7x97dax4E9XXWo2n+p5D+ub8ZEUP55zlHCFkyZzmyt2s54LkVeseOMfQ9Q1jzsGHLRPvFz9NSL6wLgITcXvHGKVEgLn0UdyEveF5n1gXwTbOzJ47c2POYdIHBh/auFg18ZG+P6Y9E8QpdXqdlffNL5QqDqOgQxsXmybe+VHTFtIinNDor1CakIztnKzO1Zg2LjZNvPZCLm/ZNcGCrWG9HgJeFzcbF4Tsm9BPKXjVajho1L83NaHqUOIiw4Lsm3j3x3wTwzZNYOovxkvLy0tLoYKXjQslmCPrJn7X92C3GY4jK3G8YUMcx0tAng+Iy3FCOLJt4qS+L79VE6txL6oO1cdGgrllE+/8aGVWA8oizwmox0T//IhAsZFXHmUG+bBgwnhsxWvGK+dZsEJ6TkCpib6hxkiCgQ+3jxiYSH0XMvHFusx0QbBs0gvN0nkQcJRumEPhaIKBj4lIawIcSPdSdwEX36zLAH/ECaFM4HSATtEJtVqtWRHMCUpAhcolgYmWFGGi46+IpibyHaT+pe0CnTG1/GAmgl7eeO7cxNatO/fv29doNNy9e8eulr3/oXyZJnsfx/RIe0owqpLjo6rWhCqBYHDAGJu7ceace3UjK6DiU7WjV8G/YRyTStkzZN4hHMkT5l9Tz3iejlbXhFIIqYNKaWF+X/obSkIFKnLS1vOliQlW8hTCfM75FCcm+vr3TydodUgfS0cckj5F1TCw2lx1cueY8t0iSpgX3y+LTxdFnESl0JStRxjh8qx9VZow8OEGsDYohLNn14Qh619+RdEuVhpeWU8TS+HOgMGiMI0WoZfTtEJeXCZ8SqASYLJBJwzj+8p5Nbh3KKLZeCCg+Ig4WRT6D4VVrSzpgYdAnHA4YITDNuGvpI31Mz4yOkS9E0gEZffuZ8LQi/yuB36mKFASqbzTxpvFZs4iLkFdE/5KbMo+aQKzYGH7NiCrI+ujLUwQclyE4dIljQOQDaz4DPPMBVnzeEXeemRd/FRo6CznhBB5RCpiohE4siaCh9slGh+pjpZDCdko+/nnFEIvq2B77XO+JraUfTeblBAojGLTqX9dI5fOnan2MZqoSNMhNvgRIxIT8JYh9/r162BCrwOIA0YpK0sTOXWQAt8x3++oJrj4vgV5njl345EsDKQpiTx+fFORy6riN00eiVIV0oQJoyOjo25/xOBE6v/9WHSqETKyPjJC3COMUccNBfW6XgIw2lC3TPjV7Egj/W87tvEyJbhHxlvmA8s/6kkGrY0n5dkOYBd7ZmLUjMdX3CHfYdSJgge7d+xK0fgAHRM+ozSa6JjQOBCmgXDIV0xwQv1W7x9990yFysqQJWHO6917+bmGzGm5FTgU846JlomFx1euPHny9O8jflSpVv+j7D6Cm8jyOI5vjufd4942B5KM4uRxFRlkk4py6G4yN68LlzaizcGsYYpYkmVhtRVaXhyGccuaoDYSM0L2MJJzJme4n/f312vJHYRgv+QMH73/635NOnk24HYzh5dyHHDiHspygAy6uowGegTWGf3Fg5bEAZxeNBaaLQP/bs+r99r3tJMBCCzP907iBgao+PwVCdrq361Q0AcHv//Spe7Oo6cOEObFAyFRL2H2QEWPs07Mk/Nf+1BPT1UD9C46q5Ogl8paj+u4HqO0ZXz11R3Q19XJ+HvJAevz7w4LUTCJd19cMBj0eRhDdzgU+M06ym7fGQEFqttRIT3HhVW4XDnP7EMdHdUNWAd0Fw9cstnFzYDBtowftaBXl/jBdzWTAYjii3LWSlsFJDCFtS9IdYhCoTsmNcbjzXY7fR92e7g3EgqJCBgN6MXLw3XkV5BYZbW5XC6fD2/R66/jvQoItcV2WfFkR/tbTDUXcXwxYKhPSf97ubW19f/A+L5uMtjqXH+mZjW2CrrbfoEEGPr6otEwLYb+eLEmu339epvNZu8fGIxFEDiYhZbD7ca/9xZQ68SOhB3T2ulfCYuM3vN5fEEdAutN7cWDhuPCOu3RVrsw3m9ru/LBOWC8mkVLS+u3tJOBaG2uLW4Vf4bEhVpNG+jtkCyXGWJiY7yc3W5Dfh+X6B1Ock3iIDBEUarb3VAOEAAIIZm6WOPEQyCn9eIlU9AAhZ6ffuSTR1b98s/aZ8fsNGdeGLb2NvThRx8ff6WFAYjWT97TQqgz+mtsFbg0Q2KDriH8bPoYQzSUivOaVAlXQBm5ms5wPM/1Dw7CQpKk3RRJ1ImhUCRW7rT1iNPptDhOd7PCVBT19cnRqCdYNlj5oU/RNf6npeFYXbNTc7LVYVwjCerTz86/3AIOxz/+y/u6yXidTedpB50IILGlHH4uQ0WGcJh2Bt5Q3O/fh3n3pJTs9VySEwSB50azZQuqThJD4hhqbGyi3lSfgQXjFeqLBoMMAbEfG0QXzxxhz4DZzcQF/FTfqIThaUdtan/9/HJVixaC+Axf0WOGqH2dtgqa4a1qGzbIKkOYLQZTfhflH1NGE0wC8ckIs0il8M9ZSVIowmuyr2P5K0lI4T55iDHQiyDTjy3F3fazR1ZjCyvdTNRqj7YrFq6Orq52LQa2DB2FEeLylTbUYSMHVHKg+XwTE/krHCJUiEAAEGAwLAajhM/n57jMjS/yGUVQayqoFnv2psRIRD9PbKbtlST6B/rkDeptGBxi0ZiEF2Cvvf6kBbt56WaCHeZMC+NaT09Plx7jr+daqk1GG2pvv6ZbEIBAG7Y7LKtXWRy/K7aNIGLiWDP/4jx0DfR5lAyfHp9gEiy+P5sNFSSpXxIHs/xKY3YbOeBys1ePwFP9k1F5Q/E1YA79qp7ttIPmgz0JqWUZMYI9LJ3Fx60t1SaDILq6pnSTQWFJ/sNhcVoObt1BQSIyxlfPQ/cBnoAy7Z2e0UnAYpQsCoXQ8DA+UarOZiMKvL9bQ8BiEoHiWpRjMeZA+e2dR4/Q3Q4Nx0WMjgkDzXZ0dJgwsFdUm4x2gujp8BgWBCC21p6yWo4c3MBuA0IRkX9JQUj4+iRO8XpvpPNzgr5kIRvJZkducIyIPAJ+238om20bEIyNTsZkowMa8rtO0+0VnccdNkyO3oIw3p2an19YgIUO48oJJmGejE9LED1o0QSBdbnupLXm6JCbScQKL5eg+62xOcHrXVrKZwRjXGF4eHkkmYEFK+hyse3NJfPmINHHHFK8JrffVY9Fgd8H+KXlLI4vsDAuDECgBQ0GbRmfQ6LaZDCIjoUp/WQA4ne/27Hz6MGjfSLdJoqhWG8VBIGSg1Ryzuv15scnphXBFJdOLOfyyUyGExDvAQSj8FSSuNobQ8ah3ONxYVGswsltVc3OrciEMbS4ODs7a8Rov3kcElUmo4dBzM/LhgXxux3owLFDUdENCbcYG2iqosAkcBaRM/shodzIYTzMKcmldJpZKEKcdlgKp1nTcHDcxNXe8CAcDMX9Pl/9UTzX+BXuf7GXMwstxq1FilnQlDCMKydIovpkdBDE/KIJAm07dag7RPdFkhgZKFRjQIEgIGQsCTTzRX5O2Y/0EEom453LpXMTwODGyEGlaDQ4ZDL59O3JQTiYgsQb2ClWrT7yjx0IFiUMZnHn7r17zEKHcf+EEaJFe81gCwIQs7OLt/STQTXU+Q5NRkTcCuBOoHfYqKCLV3C1ww0x56VyNB4koRRjW6QCiWlaMROwSE5LnvKZ05cyOkzklhKjHMebk/GtsFM4Ldb68tFWMyV37iIDBqak7YFhSRiuGWwyAIFvde9OeUGUIBrqdnfe7gXFnj2SOJygNYufY5KDgiEFBQhCjgsC5mNuBuOhmMsk93vR/iQsIpc8JYmgW++Qz6UnuCQHCTO+Gxvzu2cdlpozbu0xX8W48xAxi3vaKfnoxPGWFv2KME5GGeLu3Tu6yQDE7t2pPZHEcEhK7e0vDCfSuaWZR48fPxpPmiAE1DiGmgXWI1xH93vNTe8X2Ecyue5L/tLJOxjQOCTJQYCWRkJDnwpCov6Y1fF3t/bZB7NwPwFEJYxPThiXRMXJYBB3H97ZsgLRQBD4Z2+FkYFsoQCI5afXH6OZmUfPbuSNEl7E45/tKhl5l7I5rB18xJCilH2ksN9DEpTMfrGqQ774zSDBEPQ1FQ9mZ48dtUsNSIfhfv7kSclCNyUf6ocDEB8YIOYZxD1A4Bs/cZODDmKvMJdIjIwsJxLXnz5dmpjzovyjcU7QxyTiTVzpE/mZ9Giymf7nHk7ReijllSLEG7shoT754cmTYw70NZiEokJDCFOZYRuSPFQ7VNt5+FSITrg6DPf/2jMP57SRL47//rtf90x6x0L7D1ydcvVdmXZtypVpxxV7gguTAGmgKyxIk2BBBBYeaTRzIj0B93o2Tn+r1RqMzFjp9ZO4t9Vnvu9p92l2BlUEZKCNcx+/3WXiXK/KQBFoYmaHEME95EbGK2ZzamosU8+qCggcQ9nKBHYRGXzkPDMx6rnox7eYD9+ELAsTo0eH+AgCW20Er9fzoBDw4XswpodXZdOuembO4An9X6e/m4sPisEHIkQgW8n4IVAcx37rCES3CPz5GRGInXiEjqcxC81GI1NXHeiAgK7KnUSj3ES/BBvYbkmJ9I8y+hn4NiJFqSQaBUYo9+vQz6f5AOJ0mYvwPYhMaFqtYhpNholvjZqMDDIT//rxUpbd1Pa1ZeycX1iY8elycTZw53jz3VOdIriHq20PMzOzOJHeuWPHYDydyjAM3QrUOgEwadAElaSOb9VNXeEn104XkZKXeQDAH0r/yiYQnL3YI6oKbECoU1NZFBCjUqWAWIbtsJbJfiaWy6fiI8n9+/dxGRhiFMGY2SIYbKfdZeLtj3/vVRkoAllYjOHGmlvIqhqBrSBQsTaZoL4JaCMZuiJ2pSIZ+KqMmR+NeneFyMTR46f/5c/D+mRHUTYsUFYQ00jT1i0CAtlmoYgwEbGIlsmOJ/ftR3K5EWR+ViBUeHgmLgTOHLituvD5RiC2EnFxabmA1LO6Bj0hUBXlQau1WtVyKGEmZOjAaxTRLhfMBLMQxZf0xNDxM2IOFKMSmmBRcFhBNJBps+Z0/1kXnUdjMZyOy3I+H0/mUEQynkjV6ys+S4K/BRcvfu5tJgI7zB++7NhNXd3sYeHiyuracjEpQW9EeQDDMnHJzYbhqlXLUgh0UHE9EwI/FdwEc9E/gcURYx7e///7fX2SVK04FuuNDFtVZNgCE93Isb6+WBnAC0X5SDKB8W0tI2uc1QCBnTbfY358vmdlLMwura07sD0EXMcTYWMRV+zmNF9+pWZRSsRN0GY7im6OaBInOs7mD+JZcl+spJvT/NeIKAQhoNYACJroi7LU5dFEOZspKoSwMFk3PRaRW7fWEUwGpmT19ifX32UmgiruBCpjhotYuLh8F8JAQK+xN25DAQa1dLPhXYdhurrioA8ghloNmohozAIjlRjeEBEbnqhPt1pjojf2gAB1KUix2I4RAC8UyVKyXoJtmL8WMCFaxVkUEagMZP5WBUKaIKxiHUODNkSruUbDw8ZqcQy3pnWrkJgJfziXjsd2+CIShUKGHV+3/7umUmaPGSMAfijcMEu+c52bCLaKb1gggiLmbxEgIVXk8bSeLga/3alWbK5juoWp2OxCkkaFiURieMAXsSNRSChyuD9bTAzuQGTgoSjqJoRZ8rU3ewy1z28tYn4RLAohlxQfGUnQHqugiorVMjXWmsaq3+Ri1FdTnhgeYNMwxmBGhXAQ0AppzESOgEejUVkHZ1sTFD4PmBCt4iTzgHR6YEDVCrkkJYEHdSAEeiKrLvbSZtPtVNGvSd64opgYHtyxlxMvQlgI5AupVKKoVy3qUHK3NW0Che1NzAsTwVbxWXcgPBWLQB0IAxpIDMSL26+CVI2m2qFC4iZG6+kBfmxABghQCEs0VcCm0mS3bts0p6Z0ICFMADPRo1X8tVkEZz30mggUC5lqqK7i2lq0DZ/mjie8URgnCZYF4YmUdHfd5r251YIAoU2IVjF50WNWML+4uL5MgEBItHoewiEmOzwTrDZoKhvH8Y9PDqo6gQeGUMui8CgmRKtYFawhyx7rQOBxQ8DiJhCmgpnQ8/FBfE4qAKISeHIIEz1bxe1uESu3nsR6LAKa3MbLRB73ybkjgpwCNQJPlu97mkAV8FQgugOS3Ia9r+SL7MTgUx5XwYEnzOSpY+La4RlBKgBylwk7K0SUS6XxYlMFAk+NZ2mCbjJBiVZnkSiXxt2ika/X63kC8CqYqIEit6Ga49j5bNYw8s1pD6NC4NUwYUHFAcQ7ON/VXdOYGrvXaqEDu3LXEhZeARNAwXQtx/IcsHNZc2yqhQ4cAs+Gf7zmNa95zTbcB561bL3JySyTAAAAAElFTkSuQmCC);background-position:center;background-repeat:no-repeat;background-size:contain;height:200px;width:220.83px;margin:0 auto}[_nghost-%COMP%]   .empty-scorecard[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:var(--vlg-font-size, 18px);font-weight:var(--font-weight-semi-bold, 600);margin-top:28px}[_nghost-%COMP%]   .empty-scorecard[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);margin-top:20px}[_nghost-%COMP%]   .empty-scorecard[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .new-goal[_ngcontent-%COMP%]{margin-top:28px;display:inline-flex;align-items:center}[_nghost-%COMP%]   .empty-scorecard[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .new-goal[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px;color:var(--text-primary-content-color-hc)}[_nghost-%COMP%]   .empty-scorecard[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .link-to-goal[_ngcontent-%COMP%]{background:transparent;border:none;text-decoration:underline;color:var(--fluent-theme-link-darker-color);font-size:var(--sm-font-size);font-weight:var(--font-weight-regular);margin-top:12px}[_nghost-%COMP%]   .empty-scorecard[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .cancel-scorecard-button[_ngcontent-%COMP%]{margin-top:28px;padding:6px;font-size:var(--md-font-size);font-weight:var(--font-weight-regular);display:flex;flex-direction:row;align-items:center}[_nghost-%COMP%]   .empty-scorecard[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .cancel-scorecard-button[_ngcontent-%COMP%]   pbi-icon[_ngcontent-%COMP%]{margin-left:-12px}[_nghost-%COMP%]   .empty-scorecard[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .cancel-scorecard-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:6px}[_nghost-%COMP%]   .mat-icon[_ngcontent-%COMP%]{overflow:visible}[_nghost-%COMP%]   .mat-icon.glyph-small[_ngcontent-%COMP%]{font-size:var(--lg-font-size, 16px);width:var(--lg-font-size, 16px);height:var(--lg-font-size, 16px)}[_nghost-%COMP%]   .mat-icon.glyph-mini[_ngcontent-%COMP%]{font-size:var(--sm-font-size, 12px);width:var(--sm-font-size, 12px);height:var(--sm-font-size, 12px)}[_nghost-%COMP%]   .mat-icon.mat-ligature-font[fontIcon][_ngcontent-%COMP%]{overflow:auto}"],changeDetection:0}),E}()},70864:function(lt,Ge,t){"use strict";t.d(Ge,{F:function(){return i}});var r=t(50423),o=t(77476),P=t(82621),a=["formatSwitchCell"];function d(C,v){if(1&C&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275text(1),r.\u0275\u0275pipe(2,"formatValue"),r.\u0275\u0275elementContainerEnd()),2&C){var k=r.\u0275\u0275nextContext(),E=k.data,s=k.column;r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(r.\u0275\u0275pipeBind2(2,1,E,s.formatString))}}function p(C,v){if(1&C&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275text(1),r.\u0275\u0275pipe(2,"date"),r.\u0275\u0275elementContainerEnd()),2&C){var k=r.\u0275\u0275nextContext(),E=k.data,s=k.column;r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(r.\u0275\u0275pipeBind3(2,1,E,s.formatString||"shortDate","UTC"))}}function l(C,v){if(1&C&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275text(1),r.\u0275\u0275elementContainerEnd()),2&C){var k=r.\u0275\u0275nextContext().data;r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(k)}}function c(C,v){if(1&C&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275text(1),r.\u0275\u0275elementContainerEnd()),2&C){var k=r.\u0275\u0275nextContext().data;r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(k)}}function y(C,v){if(1&C&&(r.\u0275\u0275elementContainerStart(0,1),r.\u0275\u0275template(1,d,3,4,"ng-container",2),r.\u0275\u0275template(2,p,3,5,"ng-container",2),r.\u0275\u0275template(3,l,2,1,"ng-container",2),r.\u0275\u0275template(4,c,2,1,"ng-container",3),r.\u0275\u0275elementContainerEnd()),2&C){var k=v.column;r.\u0275\u0275property("ngSwitch",null==k?null:k.type),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngSwitchCase","Number"),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngSwitchCase","Date"),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngSwitchCase","Text")}}var i=function(){function C(){}return C.\u0275fac=function(k){return new(k||C)},C.\u0275cmp=r.\u0275\u0275defineComponent({type:C,selectors:[["format-switch-cell-template"]],viewQuery:function(k,E){var s;(1&k&&r.\u0275\u0275viewQuery(a,5),2&k)&&(r.\u0275\u0275queryRefresh(s=r.\u0275\u0275loadQuery())&&(E.formatSwitchCell=s.first))},decls:2,vars:0,consts:[["formatSwitchCell",""],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"]],template:function(k,E){1&k&&r.\u0275\u0275template(0,y,5,4,"ng-template",null,0,r.\u0275\u0275templateRefExtractor)},dependencies:[o.NgSwitch,o.NgSwitchCase,o.NgSwitchDefault,o.DatePipe,P.c],changeDetection:0}),C}()},69205:function(lt,Ge,t){"use strict";t.d(Ge,{W:function(){return p}});var r=t(60042),o=t(50423),P=t(59968),a=t(85102),d=["goal-edit-buttons-row",""],p=function(){function l(){this.onSave=new o.EventEmitter,this.onCancel=new o.EventEmitter,this.COLSPAN=r.gT.TotalNumberOfColumns}return l.prototype.onSaveClick=function(){this.onSave.emit()},l.prototype.onCancelClick=function(){this.onCancel.emit()},l.\u0275fac=function(y){return new(y||l)},l.\u0275cmp=o.\u0275\u0275defineComponent({type:l,selectors:[["","goal-edit-buttons-row",""]],inputs:{disableSave:"disableSave"},outputs:{onSave:"onSave",onCancel:"onCancel"},attrs:d,decls:6,vars:8,consts:[[1,"button-box"],["data-testid","button-save","localize","PBI_Button_Label_Save",1,"button-save","pbi-fluent-button","primary",3,"disabled","click"],["data-testid","button-cancel","localize","PBI_Button_Label_Cancel",1,"button-cancel","pbi-fluent-button",3,"click"]],template:function(y,i){1&y&&(o.\u0275\u0275elementStart(0,"td")(1,"div",0)(2,"button",1),o.\u0275\u0275listener("click",function(){return i.onSaveClick()}),o.\u0275\u0275pipe(3,"localize"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(4,"button",2),o.\u0275\u0275listener("click",function(){return i.onCancelClick()}),o.\u0275\u0275pipe(5,"localize"),o.\u0275\u0275elementEnd()()()),2&y&&(o.\u0275\u0275attribute("colspan",i.COLSPAN),o.\u0275\u0275advance(2),o.\u0275\u0275property("disabled",i.disableSave),o.\u0275\u0275attribute("aria-label",o.\u0275\u0275pipeBind1(3,4,"PBI_Button_Label_Save")),o.\u0275\u0275advance(2),o.\u0275\u0275attribute("aria-label",o.\u0275\u0275pipeBind1(5,6,"PBI_Button_Label_Cancel")))},dependencies:[P.X,a.F],styles:["[_nghost-%COMP%]   .button-box[_ngcontent-%COMP%]{float:right}[_nghost-%COMP%]   .button-save[_ngcontent-%COMP%]{margin-right:8px}"],changeDetection:0}),l}()},44628:function(lt,Ge,t){"use strict";t.d(Ge,{G:function(){return He}});var r=t(81337),o=t(60042),P=function(){function Je(){}return Je.GoalNameMaxLength=256,Je.MaxGoalOwnerCount=5,Je.ScorecardNameMaxCharacterLimit=250,Je.ScorecardDescriptionMaxCharacterLimit=120,Je.RoleDescriptionMaxCharacterLimit=512,Je.RoleNameMaxCharacterLimit=128,Je.ActiveStatusMaxCountLimit=12,Je.HistoricalStatusMaxCountLimit=12,Je.MaxStatusId=255,Je.StatusMaxCharacterLimit=50,Je.MaxNumberOfCategories=10,Je.GoalValueCategoryMaxLength=40,Je.GoalValueCategoryNameMaxLength=256,Je.CycleCustomLabelMaxLength=32,Je.CycleCustomDescriptionMaxLength=128,Je.CycleMaxCustomDurationInDays=1e3,Je}(),a=t(44603),d=t(125),p=t(45017),l=t(61088),c=t(34340),y=t(14786),i=t(7082),C=t(60166),v=t(98587),k=t(62458),E=t(46544),s=t(77526),ne=t(14172),te=t(48787),X=t(59973),m=t(50423),O=t(9380),I=t(49223),H=t(64929),G=t(93379),Z=t(77476),ie=t(82792),ye=t(17174),ae=t(59968),J=t(56011),N=t(36858),he=t(94994),pe=t(85102),ce=["nameInput"],ge=["goal-edit-row",""];function se(Je,j){if(1&Je){var nt=m.\u0275\u0275getCurrentView();m.\u0275\u0275elementStart(0,"div",16),m.\u0275\u0275pipe(1,"async"),m.\u0275\u0275elementStart(2,"pbi-checkbox",17),m.\u0275\u0275listener("onChange",function(){m.\u0275\u0275restoreView(nt);var u=m.\u0275\u0275nextContext();return m.\u0275\u0275resetView(u.onSelectGoalCheckbox())}),m.\u0275\u0275pipe(3,"async"),m.\u0275\u0275elementEnd()()}if(2&Je){var oe,h,Ue=m.\u0275\u0275nextContext();m.\u0275\u0275classProp("box-checked",null==(oe=m.\u0275\u0275pipeBind1(1,4,Ue.selectedGoalIds$))?null:oe[Ue.displayedGoal.id]),m.\u0275\u0275advance(2),m.\u0275\u0275property("checked",null==(h=m.\u0275\u0275pipeBind1(3,6,Ue.selectedGoalIds$))?null:h[Ue.displayedGoal.id])("disabled",null==Ue.displayedGoal?null:Ue.displayedGoal.isNew)}}function De(Je,j){1&Je&&m.\u0275\u0275element(0,"td",18)}function fe(Je,j){if(1&Je){var nt=m.\u0275\u0275getCurrentView();m.\u0275\u0275elementContainerStart(0),m.\u0275\u0275elementStart(1,"div",13),m.\u0275\u0275element(2,"div"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(3,"div",19),m.\u0275\u0275element(4,"div",20),m.\u0275\u0275elementStart(5,"div",21)(6,"emails-list-modern",22),m.\u0275\u0275listener("ngModelChange",function(h){m.\u0275\u0275restoreView(nt);var g=m.\u0275\u0275nextContext();return m.\u0275\u0275resetView(g.selectedUsers=h)}),m.\u0275\u0275pipe(7,"localize"),m.\u0275\u0275elementEnd()()(),m.\u0275\u0275elementContainerEnd()}if(2&Je){var Ue=m.\u0275\u0275nextContext();m.\u0275\u0275advance(6),m.\u0275\u0275property("allowAnyGroup",!0)("maxSelectableUsers",Ue.maxGoalOwnerCount)("ngModel",Ue.selectedUsers)("addUserOnBlur",!0)("inputPlaceholder",m.\u0275\u0275pipeBind1(7,7,"Enter_Name"))("disabled",!Ue.capabilities.editOwners)("hideInput",!Ue.capabilities.editOwners)}}function Oe(Je,j){1&Je&&m.\u0275\u0275element(0,"span",31)}function be(Je,j){if(1&Je){var nt=m.\u0275\u0275getCurrentView();m.\u0275\u0275elementStart(0,"div",28),m.\u0275\u0275template(1,Oe,1,0,"span",29),m.\u0275\u0275elementStart(2,"span"),m.\u0275\u0275text(3,"\xa0"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(4,"button",30),m.\u0275\u0275listener("click",function(){m.\u0275\u0275restoreView(nt);var h=m.\u0275\u0275nextContext(2);return m.\u0275\u0275resetView(h.onUpdateStatusRules())}),m.\u0275\u0275elementEnd()()}if(2&Je){var Ue=m.\u0275\u0275nextContext(2);m.\u0275\u0275advance(1),m.\u0275\u0275property("ngIf",!Ue.displayedGoal.hasStatusRules),m.\u0275\u0275advance(3),m.\u0275\u0275property("localize",Ue.displayedGoal.hasStatusRules?"UpdateMetricStatusRules":"SetupMetricStatusRules")}}function Fe(Je,j){if(1&Je){var nt=m.\u0275\u0275getCurrentView();m.\u0275\u0275elementContainerStart(0),m.\u0275\u0275elementStart(1,"div",23),m.\u0275\u0275element(2,"div"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(3,"div",24),m.\u0275\u0275element(4,"div",25),m.\u0275\u0275elementStart(5,"status-picker",26),m.\u0275\u0275listener("onSelect",function(h){m.\u0275\u0275restoreView(nt);var g=m.\u0275\u0275nextContext();return m.\u0275\u0275resetView(g.onStatusChange(h))}),m.\u0275\u0275pipe(6,"async"),m.\u0275\u0275pipe(7,"localize"),m.\u0275\u0275elementEnd(),m.\u0275\u0275template(8,be,5,2,"div",27),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementContainerEnd()}if(2&Je){var Ue=m.\u0275\u0275nextContext();m.\u0275\u0275advance(5),m.\u0275\u0275property("canCustomizeStatus",null==Ue.capabilities.scorecardCapabilities?null:Ue.capabilities.scorecardCapabilities.customizeStatus)("status",null==Ue.currentValue?null:Ue.currentValue.status)("goalStatuses",m.\u0275\u0275pipeBind1(6,7,Ue.goalStatuses$))("pbiTooltip",m.\u0275\u0275pipeBind1(7,9,"MetricStatus_ReadOnly"))("pbiTooltipDisabled",!Ue.displayedGoal.hasStatusRules)("isReadOnly",!Ue.capabilities.editStatus),m.\u0275\u0275advance(3),m.\u0275\u0275property("ngIf",Ue.showUpdateRules&&Ue.capabilities.editStatusRules)}}function ze(Je,j){if(1&Je){var nt=m.\u0275\u0275getCurrentView();m.\u0275\u0275elementContainerStart(0),m.\u0275\u0275elementStart(1,"div",13),m.\u0275\u0275element(2,"div"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(3,"div",32),m.\u0275\u0275element(4,"div",33),m.\u0275\u0275elementStart(5,"div",9)(6,"input",34),m.\u0275\u0275listener("ngModelChange",function(h){m.\u0275\u0275restoreView(nt);var g=m.\u0275\u0275nextContext();return m.\u0275\u0275resetView(g.onStartDateChange(h))}),m.\u0275\u0275pipe(7,"localize"),m.\u0275\u0275elementEnd()()(),m.\u0275\u0275elementStart(8,"div",35)(9,"div",36),m.\u0275\u0275text(10),m.\u0275\u0275pipe(11,"localize"),m.\u0275\u0275element(12,"i",37),m.\u0275\u0275pipe(13,"localize"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(14,"div",9)(15,"input",38),m.\u0275\u0275listener("ngModelChange",function(h){m.\u0275\u0275restoreView(nt);var g=m.\u0275\u0275nextContext();return m.\u0275\u0275resetView(g.onDueDateChange(h))}),m.\u0275\u0275pipe(16,"localize"),m.\u0275\u0275elementEnd()()(),m.\u0275\u0275elementContainerEnd()}if(2&Je){var Ue=m.\u0275\u0275nextContext();m.\u0275\u0275advance(6),m.\u0275\u0275property("min",Ue.SqlDateTimeMinValue)("max",Ue.SqlDateTimeMaxValue)("ngModel",Ue.startDateShort)("disabled",!Ue.capabilities.editStartDate),m.\u0275\u0275attribute("aria-label",m.\u0275\u0275pipeBind1(7,12,"Start_Date")),m.\u0275\u0275advance(4),m.\u0275\u0275textInterpolate1(" ",m.\u0275\u0275pipeBind1(11,14,"DueDate")," "),m.\u0275\u0275advance(2),m.\u0275\u0275property("pbiTooltip",m.\u0275\u0275pipeBind1(13,16,"Metrics_Due_Date_Tooltip")),m.\u0275\u0275advance(3),m.\u0275\u0275property("min",Ue.SqlDateTimeMinValue)("max",Ue.SqlDateTimeMaxValue)("ngModel",Ue.completionDateShort)("disabled",!Ue.capabilities.editDueDate),m.\u0275\u0275attribute("aria-label",m.\u0275\u0275pipeBind1(16,18,"DueDate"))}}var Ke=function(){return[]},He=function(){function Je(j,nt,Ue,oe,h,g,u,F){this.featureSwitches=j,this.scorecardService=nt,this.scorecardConfigurationService=Ue,this.detailsPaneLauncher=oe,this.capabilityService=h,this.telemetryService=g,this.scorecardHost=u,this.settingsService=F,this.TotalNumberOfColumns=o.gT.TotalNumberOfColumns,this.GoalNameMaxLength=P.GoalNameMaxLength,this.maxGoalOwnerCount=1,this.currentValue={},this.supportMultipleTargets=!1,this.supportMultipleValuesEditing=!1,this.indentation=0,this.selectedUsers=[],this.showUpdateRules=!1,this.goalCurrentValueSelection=void 0,this.goalTargetValueSelection=void 0,this.SqlDateTimeMinValue=o.gT.SqlDateTimeMinValue,this.SqlDateTimeMaxValue=o.gT.SqlDateTimeMaxValue,this.isSingleGoalVisual=!1}return Object.defineProperty(Je.prototype,"indent",{set:function(nt){this.indentation=d.r.getSafeIndentation(nt)},enumerable:!1,configurable:!0}),Je.prototype.ngOnInit=function(){var j,Ue,oe,h,g,u,F,nt=this;k.fF.assertValue(this.goal,"No goal to edit"),this.displayedGoal=_.cloneDeep(this.goal),this.startDateShort=null===(oe=null===(Ue=this.displayedGoal)||void 0===Ue?void 0:Ue.startDate)||void 0===oe?void 0:oe.slice(0,10),this.completionDateShort=null===(g=null===(h=this.displayedGoal)||void 0===h?void 0:h.completionDate)||void 0===g?void 0:g.slice(0,10);var W=d.r.buildCurrentGoalValue(this.goal);if(this.currentTarget={timestamp:W.timestamp,target:W.target},W.target=void 0,this.currentValue=W,this.supportMultipleValuesEditing=this.featureSwitches.featureSwitches.goalsMultipleValuesEditor,this.supportMultipleTargets=this.featureSwitches.featureSwitches.powerBIGoalsMultipleTargets,this.supportMultipleTargets&&(this.currentTarget=d.r.getCurrentGoalTarget(this.displayedGoal),!this.currentTarget)){var ee=a.E.getCurrentUTCDay();ee.setMonth(ee.getMonth()+1),this.currentTarget={timestamp:ee.toISOString()}}var U=this.displayedGoal.owner;this.selectedUsers=U?[{displayName:"",userPrincipalName:U,objectId:"",objectType:1,isSecurityGroup:!1}]:[];var Q=this.displayedGoal.additionalOwners;_.isEmpty(Q)||(j=this.selectedUsers).push.apply(j,Q.filter(function(w){return w.userPrincipalName}).map(function(w){return{displayName:"",userPrincipalName:w.userPrincipalName,objectId:"",objectType:1,isSecurityGroup:!1}})),this.showUpdateRules=this.featureSwitches.featureSwitches.powerBIGoalsStatusRules,this.bulkDeleteEnabled=this.featureSwitches.featureSwitches.goalsBulkDelete,this.selectedGoalIds$=this.scorecardService.getSelectedGoalIdsObservable();var B=this.scorecardService.getColumnSettings();this.showDueDate$=B.pipe((0,s.x)(),(0,ne.U)(function(w){return l._.isColumnVisible(w,5)})),this.showOwner$=B.pipe((0,s.x)(),(0,ne.U)(function(w){return l._.isColumnVisible(w,1)})),this.showStatus$=B.pipe((0,s.x)(),(0,ne.U)(function(w){return l._.isColumnVisible(w,2)})),this.maxGoalOwnerCount=this.featureSwitches.featureSwitches.powerBIGoalsMultipleGoalOwners?P.MaxGoalOwnerCount:1,null===(F=null===(u=this.settingsService)||void 0===u?void 0:u.settings)||void 0===F||F.pipe((0,te.q)(1)).subscribe(function(w){var q;nt.isSingleGoalVisual=!_.isNil(null===(q=_.first(w.filters))||void 0===q?void 0:q.goalId)}),this.goalStatuses$=this.scorecardService.goalStatusesByScorecardId$.pipe((0,ne.U)(function(w){return w[nt.goal.scorecardId]})),this.updateCapabilities()},Je.prototype.ngAfterViewInit=function(){this.displayedGoal.isNew&&this.nameInput.nativeElement.focus()},Je.prototype.ngOnChanges=function(j){j.goal&&this.displayedGoal&&!this.goal.isNew&&(this.displayedGoal.hasStatusRules=this.goal.hasStatusRules,this.updateCapabilities(),this.displayedGoal.cycleMetadata=(0,r.pi)({},this.goal.cycleMetadata),this.displayedGoal.metadata=(0,r.pi)({},this.goal.metadata),this.displayedGoal.cycle=this.goal.cycle,this.displayedGoal.cyclePeriod=this.goal.cyclePeriod,this.displayedGoal.cycleRollingInterval=this.goal.cycleRollingInterval)},Je.prototype.onSelectGoalCheckbox=function(){this.scorecardService.toggleSelectedGoal(this.displayedGoal.id,!1,!0)},Je.prototype.onSave=function(){var j,nt,Ue,oe,h,g,u,F,W,ee,U,Q,B,w;return(0,r.mG)(this,void 0,void 0,function(){var de,V,M,L,x,Y,ue,Ne;return(0,r.Jh)(this,function(Xe){switch(Xe.label){case 0:return _.isNil(this.goal.valueRollup)||_.isUndefined(this.goalCurrentValueSelection)||4===(null===(j=this.goalCurrentValueSelection)||void 0===j?void 0:j.type)?[3,2]:[4,this.scorecardService.deleteGoalValueRollup(this.displayedGoal.id,1)];case 1:Xe.sent(),Xe.label=2;case 2:return _.isNil(this.goal.targetRollup)||_.isUndefined(this.goalTargetValueSelection)||4===(null===(nt=this.goalTargetValueSelection)||void 0===nt?void 0:nt.type)?[3,4]:[4,this.scorecardService.deleteGoalValueRollup(this.displayedGoal.id,2)];case 3:Xe.sent(),Xe.label=4;case 4:return!_.isUndefined(this.goalCurrentValueSelection)&&1!==(null===(Ue=this.goalCurrentValueSelection)||void 0===Ue?void 0:Ue.type)&&this.goal.valueConnection?[4,this.scorecardService.deleteGoalQueryConnection(this.displayedGoal.id,1)]:[3,6];case 5:if(!1===(null!==(oe=Xe.sent())&&void 0!==oe&&oe))return[2];Xe.label=6;case 6:return!_.isUndefined(this.goalTargetValueSelection)&&1!==(null===(h=this.goalTargetValueSelection)||void 0===h?void 0:h.type)&&this.goal.targetConnection?[4,this.scorecardService.deleteGoalQueryConnection(this.displayedGoal.id,2)]:[3,8];case 7:if(!1===(null!==(g=Xe.sent())&&void 0!==g&&g))return[2];Xe.label=8;case 8:if(!d.r.allGoalInputsValid(this.displayedGoal))return[2];_.isEmpty(this.selectedUsers)?(this.displayedGoal.owner="",this.displayedGoal.additionalOwners=[]):(this.displayedGoal.owner=this.selectedUsers[0].userPrincipalName||this.selectedUsers[0].emailAddress,de=this.selectedUsers.slice(1).map(function(it){return{userPrincipalName:it.userPrincipalName||it.emailAddress}}),this.displayedGoal.additionalOwners=de),Xe.label=9;case 9:return Xe.trys.push([9,31,,32]),this.scorecardService.setGoalState(this.displayedGoal.id,"Saving"),[4,this.scorecardService.saveGoal(this.displayedGoal.id,this.displayedGoal)];case 10:return V=Xe.sent(),this.displayedGoal.id=V,M=_.cloneDeep(this.currentValue),L=_.cloneDeep(this.currentTarget),(this.displayedGoal.valueConnection||!_.isNil(null===(u=this.displayedGoal)||void 0===u?void 0:u.valueRollup)||!_.isUndefined(null===(F=this.goalCurrentValueSelection)||void 0===F?void 0:F.rollupType))&&(M.value=void 0,this.values=void 0),(this.displayedGoal.targetConnection||!_.isNil(null===(W=this.displayedGoal)||void 0===W?void 0:W.targetRollup)||!_.isUndefined(null===(ee=this.goalTargetValueSelection)||void 0===ee?void 0:ee.rollupType))&&(L.target=void 0,this.targets=void 0),this.supportMultipleTargets||(M.target=L.target),_.isEmpty(this.displayedGoal.goalValues)?[4,this.scorecardService.saveGoalValue(this.displayedGoal.id,M)]:[3,12];case 11:return Xe.sent(),[3,14];case 12:return Y=d.r.buildCurrentGoalValue(this.displayedGoal,!0),p.B.areGoalValuesEqual(M,Y,!_.isNil(this.displayedGoal.valueConnection),this.supportMultipleTargets||!_.isNil(this.displayedGoal.targetConnection))?[3,14]:(x=p.B.diffGoalValues(M,Y),[4,this.scorecardService.saveGoalValue(this.displayedGoal.id,x)]);case 13:Xe.sent(),Xe.label=14;case 14:return this.supportMultipleValuesEditing&&this.values?[4,this.scorecardService.overwriteMultipleGoalValues(this.displayedGoal.id,this.values)]:[3,16];case 15:Xe.sent(),Xe.label=16;case 16:return this.supportMultipleTargets?this.targets?[4,this.scorecardService.overwriteGoalTargets(this.displayedGoal.id,this.targets)]:[3,18]:[3,20];case 17:return Xe.sent(),[3,20];case 18:return void 0===L.target||(Y=d.r.buildCurrentGoalValue(this.displayedGoal)).target===L.target?[3,20]:[4,this.scorecardService.saveGoalValue(this.displayedGoal.id,L)];case 19:Xe.sent(),Xe.label=20;case 20:return _.isUndefined(null===(U=this.goalCurrentValueSelection)||void 0===U?void 0:U.rollupType)?[3,22]:[4,this.scorecardService.upsertGoalValueRollup(this.displayedGoal.id,1,this.goalCurrentValueSelection.rollupType)];case 21:Xe.sent(),Xe.label=22;case 22:return _.isUndefined(null===(Q=this.goalTargetValueSelection)||void 0===Q?void 0:Q.rollupType)?[3,24]:[4,this.scorecardService.upsertGoalValueRollup(this.displayedGoal.id,2,this.goalTargetValueSelection.rollupType)];case 23:Xe.sent(),Xe.label=24;case 24:return[4,this.scorecardService.updateGoalQueryConnection(this.displayedGoal.id,1,this.displayedGoal.valueConnection)];case 25:return Xe.sent(),[4,this.scorecardService.updateGoalQueryConnection(this.displayedGoal.id,2,this.displayedGoal.targetConnection)];case 26:return Xe.sent(),this.displayedGoal.isNew&&this.newGoalRules?[4,this.scorecardService.saveStatusRules(this.displayedGoal.id,this.newGoalRules)]:[3,28];case 27:Xe.sent(),Xe.label=28;case 28:return this.scorecardService.setGoalState(this.displayedGoal.id,"Consumption"),this.isSingleGoalVisual?(ue=this.scorecardService.getCurrentScorecard(),Ne=this,[4,this.scorecardService.getGoal(this.displayedGoal.id).pipe((0,X.h)(function(it){return!it.currentRefreshInProgress&&!it.targetRefreshInProgress}),(0,te.q)(1)).toPromise()]):[3,30];case 29:Ne.displayedGoal=Xe.sent(),this.scorecardHost.onUpdateScorecard(ue),this.scorecardHost.onSelectGoals([this.displayedGoal]),this.scorecardHost.showGoals(!1,ue,[this.displayedGoal]),Xe.label=30;case 30:return _.isNil(null===(B=this.goalCurrentValueSelection)||void 0===B?void 0:B.type)||this.telemetryService.logEvent(y.h2,{calculationType:this.getMetricCalculationType(this.goalCurrentValueSelection.type)}),_.isNil(null===(w=this.goalTargetValueSelection)||void 0===w?void 0:w.type)||this.telemetryService.logEvent(y.Lc,{calculationType:this.getMetricCalculationType(this.goalTargetValueSelection.type)}),[3,32];case 31:return Xe.sent(),k.fF.assertFail("Could not save goal"),this.scorecardService.setGoalState(this.displayedGoal.id,"Editing"),[3,32];case 32:return[2]}})})},Je.prototype.onUpdateStatusRules=function(){var j=this;this.displayedGoal.isNew?this.detailsPaneLauncher.openGoalStatusRulesPane(this.scorecardService.getGoalStatuses(this.displayedGoal),this.displayedGoal,this.newGoalRules,function(nt){return(0,r.mG)(j,void 0,void 0,function(){return(0,r.Jh)(this,function(Ue){return nt=_.some(nt?.rules)?nt:void 0,this.newGoalRules=nt,this.displayedGoal.hasStatusRules=!!nt,this.updateCapabilities(),[2,nt]})})}):this.detailsPaneLauncher.openGoalDetails(this.scorecardService,this.goal.id,c.E.ShowStatusRules,this.scorecardConfigurationService.getConfiguration())},Je.prototype.onCancel=function(){this.scorecardService.cancelEditing(this.displayedGoal.id)},Je.prototype.onStartDateChange=function(j){var nt=new Date(j);_.isEmpty(j)||!_.isFinite(nt.getTime())||(this.displayedGoal.startDate=nt.toISOString(),this.startDateShort=j)},Je.prototype.onDueDateChange=function(j){var nt=new Date(j);_.isEmpty(j)||!_.isFinite(nt.getTime())||(this.displayedGoal.completionDate=nt.toISOString(),this.completionDateShort=j)},Je.prototype.onSetCustomStatusesClick=function(){},Je.prototype.onStatusChange=function(j){k.fF.assert(function(){return!!j},"status should not be null"),this.currentValue.status=j.id},Je.prototype.allValid=function(){return d.r.allGoalInputsValid(this.displayedGoal)},Je.prototype.onCategoryListIdChanged=function(j){this.displayedGoal.valuesCategoryId=j,this.updateCapabilities()},Je.prototype.onConnectionChanged=function(){this.updateCapabilities()},Je.prototype.onTargetsChanged=function(j){this.updateCapabilities(j)},Je.prototype.onValueRollupChanged=function(j){4!==j.type&&this.updateCapabilities(),this.goalCurrentValueSelection=j},Je.prototype.onTargetRollupChanged=function(j){4!==j.type&&this.updateCapabilities(),this.goalTargetValueSelection=j},Je.prototype.updateCapabilities=function(j){var nt=this.displayedGoal;j&&(nt=(0,r.pi)((0,r.pi)({},nt),{aggregations:(0,r.ev)((0,r.ev)([],_.filter(nt.aggregations,function(Ue){return"NumberOfTargets"!==Ue.type}),!0),[{type:"NumberOfTargets",value:j.length}],!1)})),this.capabilities=this.capabilityService.getCurrentGoalCapabilities(nt),this.capabilities.useCategoricalValues=this.capabilities.useCategoricalValues&&!this.isSingleGoalVisual},Je.prototype.getMetricCalculationType=function(j){switch(j){case 1:return y.z8.Connect;case 4:return y.z8.Rollup;case 0:case 2:return y.z8.Manual;default:return void k.fF.assertNever(j)}},Je.\u0275fac=function(nt){return new(nt||Je)(m.\u0275\u0275directiveInject(O.vZ),m.\u0275\u0275directiveInject(I.G),m.\u0275\u0275directiveInject(H.V),m.\u0275\u0275directiveInject(c.c),m.\u0275\u0275directiveInject(G.Nw),m.\u0275\u0275directiveInject(E.y0),m.\u0275\u0275directiveInject(C.M,8),m.\u0275\u0275directiveInject(v.u,8))},Je.\u0275cmp=m.\u0275\u0275defineComponent({type:Je,selectors:[["","goal-edit-row",""]],viewQuery:function(nt,Ue){if(1&nt&&(m.\u0275\u0275viewQuery(ce,5),m.\u0275\u0275viewQuery(i.p,5)),2&nt){var oe=void 0;m.\u0275\u0275queryRefresh(oe=m.\u0275\u0275loadQuery())&&(Ue.nameInput=oe.first),m.\u0275\u0275queryRefresh(oe=m.\u0275\u0275loadQuery())&&(Ue.valueInput=oe.first)}},inputs:{color:"color",goal:"goal",indent:"indent"},features:[m.\u0275\u0275NgOnChangesFeature],attrs:ge,decls:26,vars:42,consts:[[1,"checkmark-td"],["class","select-checkmark",3,"box-checked",4,"ngIf"],["class","cell cell-indent",4,"ngFor","ngForOf"],[1,"cell","cell-left-edge","cell-right-edge"],[1,"cell-box"],[1,"color-box"],[1,"edit-row-content"],[1,"input-box-lg","goal-name"],[1,"input-title",3,"localize"],[1,"input-box"],["data-testid","goal-name-input-box","type","text",3,"maxlength","ngModel","disabled","keyup.enter","ngModelChange"],["nameInput",""],[4,"ngIf"],[1,"divider"],[1,"inner-input-box-with-rollups",3,"displayedGoal","currentValue","currentTarget","values","targets","goalStatuses","capabilities","displayedGoalChange","currentValueChange","currentTargetChange","valuesChange","targetsChange","onCategoryListIdChanged","onConnectionChanged","valueRollupsChange","targetRollupsChange","onSave"],["valueInput",""],[1,"select-checkmark"],[3,"checked","disabled","onChange"],[1,"cell","cell-indent"],[1,"input-box-md"],["localize","Owners_Lowercase",1,"input-title"],["data-testid","goal-owners-input",1,"input-box","goal-owners-input"],[3,"allowAnyGroup","maxSelectableUsers","ngModel","addUserOnBlur","inputPlaceholder","disabled","hideInput","ngModelChange"],[1,"divider","width-override"],[1,"input-box-sm"],["localize","Status",1,"input-title"],[3,"canCustomizeStatus","status","goalStatuses","pbiTooltip","pbiTooltipDisabled","isReadOnly","onSelect"],["class","input-action-txt",4,"ngIf"],[1,"input-action-txt"],["localize","Logical_Or_Operator",4,"ngIf"],[1,"link",3,"localize","click"],["localize","Logical_Or_Operator"],[1,"input-box-xs","right-padding","input-box-with-rollups"],["localize","Start_Date",1,"input-title"],["data-testid","start-date-input","type","date",3,"min","max","ngModel","disabled","ngModelChange"],[1,"input-box-xs","input-box-with-rollups"],[1,"input-title"],[1,"glyphicon","glyph-small","pbi-glyph-info","icon",3,"pbiTooltip"],["data-testid","due-date-input","type","date",3,"min","max","ngModel","disabled","ngModelChange"]],template:function(nt,Ue){var oe;(1&nt&&(m.\u0275\u0275elementStart(0,"td",0),m.\u0275\u0275template(1,se,4,8,"div",1),m.\u0275\u0275elementEnd(),m.\u0275\u0275template(2,De,1,0,"td",2),m.\u0275\u0275elementStart(3,"td",3),m.\u0275\u0275pipe(4,"async"),m.\u0275\u0275elementStart(5,"div",4),m.\u0275\u0275element(6,"div",5),m.\u0275\u0275elementStart(7,"div",6)(8,"div",7),m.\u0275\u0275element(9,"div",8),m.\u0275\u0275elementStart(10,"div",9)(11,"input",10,11),m.\u0275\u0275listener("keyup.enter",function(){return Ue.onSave()})("ngModelChange",function(g){return Ue.displayedGoal.name=g}),m.\u0275\u0275pipe(13,"localize"),m.\u0275\u0275pipe(14,"localize"),m.\u0275\u0275elementEnd()()(),m.\u0275\u0275template(15,fe,8,9,"ng-container",12),m.\u0275\u0275pipe(16,"async"),m.\u0275\u0275elementStart(17,"div",13),m.\u0275\u0275element(18,"div"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(19,"goal-value-input",14,15),m.\u0275\u0275listener("displayedGoalChange",function(g){return Ue.displayedGoal=g})("currentValueChange",function(g){return Ue.currentValue=g})("currentTargetChange",function(g){return Ue.currentTarget=g})("valuesChange",function(g){return Ue.values=g})("targetsChange",function(g){return Ue.targets=g})("onCategoryListIdChanged",function(g){return Ue.onCategoryListIdChanged(g)})("onConnectionChanged",function(){return Ue.onConnectionChanged()})("targetsChange",function(g){return Ue.onTargetsChanged(g)})("valueRollupsChange",function(g){return Ue.onValueRollupChanged(g)})("targetRollupsChange",function(g){return Ue.onTargetRollupChanged(g)})("onSave",function(){return Ue.onSave()}),m.\u0275\u0275pipe(21,"async"),m.\u0275\u0275elementEnd(),m.\u0275\u0275template(22,Fe,9,11,"ng-container",12),m.\u0275\u0275pipe(23,"async"),m.\u0275\u0275template(24,ze,17,20,"ng-container",12),m.\u0275\u0275pipe(25,"async"),m.\u0275\u0275elementEnd()()()),2&nt)&&(m.\u0275\u0275classProp("bulk-editing-off",!Ue.bulkDeleteEnabled),m.\u0275\u0275advance(1),m.\u0275\u0275property("ngIf",Ue.bulkDeleteEnabled),m.\u0275\u0275advance(1),m.\u0275\u0275property("ngForOf",m.\u0275\u0275pureFunction0(41,Ke).constructor(Ue.indentation)),m.\u0275\u0275advance(1),m.\u0275\u0275classProp("selected-goal",null==(oe=m.\u0275\u0275pipeBind1(4,27,Ue.selectedGoalIds$))?null:oe[Ue.displayedGoal.id]),m.\u0275\u0275attribute("colspan",Ue.TotalNumberOfColumns-Ue.indentation-1),m.\u0275\u0275advance(2),m.\u0275\u0275classProp("cell-box-with-rollups",Ue.capabilities.supportsRollup),m.\u0275\u0275advance(1),m.\u0275\u0275styleProp("background-color",Ue.color),m.\u0275\u0275advance(3),m.\u0275\u0275propertyInterpolate("localize",0===Ue.indentation?"MetricName":"SubmetricName"),m.\u0275\u0275advance(2),m.\u0275\u0275property("maxlength",Ue.GoalNameMaxLength)("ngModel",Ue.displayedGoal.name)("disabled",!Ue.capabilities.editName),m.\u0275\u0275attribute("aria-label",m.\u0275\u0275pipeBind1(13,29,0===Ue.indentation?"MetricName":"SubmetricName"))("placeholder",m.\u0275\u0275pipeBind1(14,31,"NameYourMetric")),m.\u0275\u0275advance(4),m.\u0275\u0275property("ngIf",m.\u0275\u0275pipeBind1(16,33,Ue.showOwner$)),m.\u0275\u0275advance(4),m.\u0275\u0275property("displayedGoal",Ue.displayedGoal)("currentValue",Ue.currentValue)("currentTarget",Ue.currentTarget)("values",Ue.values)("targets",Ue.targets)("goalStatuses",m.\u0275\u0275pipeBind1(21,35,Ue.goalStatuses$))("capabilities",Ue.capabilities),m.\u0275\u0275advance(3),m.\u0275\u0275property("ngIf",m.\u0275\u0275pipeBind1(23,37,Ue.showStatus$)),m.\u0275\u0275advance(2),m.\u0275\u0275property("ngIf",m.\u0275\u0275pipeBind1(25,39,Ue.showDueDate$)))},dependencies:[Z.NgForOf,Z.NgIf,ie.t,ye.Fj,ye.JJ,ye.nD,ye.On,ae.X,J.v,N.V,i.p,he.z,Z.AsyncPipe,pe.F],styles:[".cell[_ngcontent-%COMP%]{border:none;box-sizing:border-box}.cell-indent[_ngcontent-%COMP%]{width:36px}.cell-left-edge[_ngcontent-%COMP%]{border-top-left-radius:4px;border-bottom-left-radius:4px}.cell-right-edge[_ngcontent-%COMP%]{border-top-right-radius:4px;border-bottom-right-radius:4px}.cell-box[_ngcontent-%COMP%]{display:flex;height:100%}.cell-box[_ngcontent-%COMP%]   .color-box[_ngcontent-%COMP%]{min-width:6px;width:6px;border-top-left-radius:4px;border-bottom-left-radius:4px}[_nghost-%COMP%]   td[_ngcontent-%COMP%]{height:100px}[_nghost-%COMP%]   .select-checkmark[_ngcontent-%COMP%]{margin-right:15px}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]{background-color:var(--scorecard-tableEditRowBackgroundColor);color:var(--scorecard-tableEditRowForegroundColor);border-top:1px solid var(--fluent-theme-neutral-light-color, #EDEBE9);border-bottom:1px solid var(--fluent-theme-neutral-light-color, #EDEBE9)}[_nghost-%COMP%]   .cell.cell-right-edge[_ngcontent-%COMP%]{border-right:1px solid var(--fluent-theme-neutral-light-color, #EDEBE9)}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]   .cell-box-with-rollups[_ngcontent-%COMP%]   .edit-row-content[_ngcontent-%COMP%]{padding-left:12px;padding-right:12px}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]   .cell-box-with-rollups[_ngcontent-%COMP%]   goal-value-input[_ngcontent-%COMP%]{flex:none;max-width:none;min-width:392px}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]   .cell-box-with-rollups[_ngcontent-%COMP%]   .inner-input-box-with-rollups[_ngcontent-%COMP%]{max-width:none}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]   .cell-box-with-rollups[_ngcontent-%COMP%]   .input-box-with-rollups[_ngcontent-%COMP%]{width:104px;max-width:104px;min-width:auto}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]   .cell-box-with-rollups[_ngcontent-%COMP%]   .input-box-with-rollups[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:4px 6px}[_nghost-%COMP%]:hover   .select-checkmark[_ngcontent-%COMP%], [_nghost-%COMP%]   .select-checkmark.box-checked[_ngcontent-%COMP%]{visibility:visible}[_nghost-%COMP%]   .checkmark-td[_ngcontent-%COMP%]{width:35px;max-width:35px}[_nghost-%COMP%]   .checkmark-td.bulk-editing-off[_ngcontent-%COMP%]{width:0px;max-width:0px}[_nghost-%COMP%]   .select-checkmark[_ngcontent-%COMP%]{visibility:hidden;margin-right:15px}[_nghost-%COMP%]   .select-checkmark[_ngcontent-%COMP%]     pbi-checkbox{margin-bottom:0}[_nghost-%COMP%]   .input-title[_ngcontent-%COMP%]{font-size:var(--lg-font-size, 16px);font-weight:var(--font-weight-semi-bold, 600);padding-top:9px;padding-bottom:4px}[_nghost-%COMP%]   .input-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{vertical-align:middle;padding:0}[_nghost-%COMP%]   .input-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{cursor:pointer}[_nghost-%COMP%]   .edit-row-content[_ngcontent-%COMP%]{display:flex;flex:1;padding-left:20px;padding-right:20px;width:1000px;min-width:1000px}[_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);height:32px;padding:6px 8px;box-sizing:border-box;color:var(--scorecard-tableInputForegroundColor);background:var(--scorecard-tableInputBackgroundColor);border:1px solid var(--gray-110, #8A8886);border-radius:2px}[_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{filter:brightness(90%)}[_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:invalid{border:2px solid var(--fluent-theme-error-dark-alt-color, #D83B01);outline-color:var(--fluent-theme-error-dark-alt-color, #D83B01)}[_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   input[readonly][_ngcontent-%COMP%]{filter:brightness(90%)}[_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-input-placeholder, [_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:-ms-input-placeholder, [_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::placeholder{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);color:var(--scorecard-tableInputForegroundColor)}[_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{padding:0;margin:0}[_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-outer-spin-button, [_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}[_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}[_nghost-%COMP%]   .right-padding[_ngcontent-%COMP%]{padding-right:8px}[_nghost-%COMP%]   .input-action-txt[_ngcontent-%COMP%]{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);color:var(--scorecard-tableEditRowForegroundColor);padding-top:4px}[_nghost-%COMP%]   .input-action-txt[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{color:var(--scorecard-tableRowLinkColor);cursor:pointer;text-decoration:none;background-color:transparent;border:none;padding:0}[_nghost-%COMP%]   .input-action-txt[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]:hover{color:var(--fluent-theme-link-darker-color, #005A9E)}[_nghost-%COMP%]   .input-action-txt[_ngcontent-%COMP%]   .link.inactive[_ngcontent-%COMP%]{color:var(--fluent-theme-neutral-tertia-color, #A19F9D);pointer-events:none}[_nghost-%COMP%]   .divider[_ngcontent-%COMP%]{padding-top:8px;padding-bottom:8px}[_nghost-%COMP%]   .divider[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:1px;height:100%;background-color:var(--gray-80, #B3B0AD);margin:0 12px}[_nghost-%COMP%]   .width-override[_ngcontent-%COMP%]{width:24px}[_nghost-%COMP%]     .mat-form-field{background:var(--scorecard-tableInputBackgroundColor)!important}[_nghost-%COMP%]     emails-list-modern.disabled .mat-form-field{filter:brightness(95%)}[_nghost-%COMP%]   .goal-owners-input[_ngcontent-%COMP%]{padding-bottom:9px}[_nghost-%COMP%]   goal-value-input[_ngcontent-%COMP%]{flex:1 0 260px;max-width:400px}[_nghost-%COMP%]   .input-box-xs[_ngcontent-%COMP%]{flex:1 1 100px;max-width:140px;min-width:110px}[_nghost-%COMP%]   .input-box-sm[_ngcontent-%COMP%]{flex:1 1 100px;max-width:200px;min-width:140px}[_nghost-%COMP%]   .input-box-md[_ngcontent-%COMP%]{flex:1 1 200px;max-width:300px;min-width:130px}[_nghost-%COMP%]   .input-box-lg[_ngcontent-%COMP%]{flex:1 1 250px;min-width:150px}[_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),Je}()},56809:function(lt,Ge,t){"use strict";t.d(Ge,{Q:function(){return ye}});var r=t(60042),o=t(558),P=t(50423),a=t(9380),d=t(77476),p=t(46037),l=t(69205),c=t(44628),y=["goal-group",""];function i(ae,J){1&ae&&P.\u0275\u0275elementContainer(0)}function C(ae,J){if(1&ae&&(P.\u0275\u0275elementStart(0,"td",9),P.\u0275\u0275element(1,"div"),P.\u0275\u0275elementEnd()),2&ae){var N=J.index,he=P.\u0275\u0275nextContext(4);P.\u0275\u0275classProp("goal-drag-placeholder-line",he.goalDragInfo&&N>=he.goalDragInfo.destGoalDropLevel)}}var v=function(){return[]};function k(ae,J){if(1&ae&&(P.\u0275\u0275elementStart(0,"tr"),P.\u0275\u0275element(1,"td",6),P.\u0275\u0275template(2,C,2,2,"td",7),P.\u0275\u0275elementStart(3,"td",8),P.\u0275\u0275element(4,"div"),P.\u0275\u0275elementEnd()()),2&ae){var N=P.\u0275\u0275nextContext(3);P.\u0275\u0275advance(1),P.\u0275\u0275classProp("bulk-editing-off",!N.bulkDeleteEnabled),P.\u0275\u0275advance(1),P.\u0275\u0275property("ngForOf",P.\u0275\u0275pureFunction0(4,v).constructor(N.MaxSubGoals)),P.\u0275\u0275advance(1),P.\u0275\u0275attribute("colspan",50)}}function E(ae,J){if(1&ae&&(P.\u0275\u0275elementStart(0,"div"),P.\u0275\u0275element(1,"div",10),P.\u0275\u0275elementStart(2,"div",11),P.\u0275\u0275text(3),P.\u0275\u0275elementEnd()()),2&ae){var N=P.\u0275\u0275nextContext(2).goal,he=P.\u0275\u0275nextContext();P.\u0275\u0275advance(1),P.\u0275\u0275styleProp("background-color",he.color),P.\u0275\u0275advance(2),P.\u0275\u0275textInterpolate(N.name)}}var s=function(J,N){return{goal:J,level:N}};function ne(ae,J){if(1&ae){var N=P.\u0275\u0275getCurrentView();P.\u0275\u0275elementContainerStart(0),P.\u0275\u0275elementStart(1,"tr",3),P.\u0275\u0275listener("showChildrenChange",function(De){P.\u0275\u0275restoreView(N);var fe=P.\u0275\u0275nextContext().goal,Oe=P.\u0275\u0275nextContext();return P.\u0275\u0275resetView(Oe.onShowChildrenChange(fe.id,De))})("cdkDragStarted",function(De){P.\u0275\u0275restoreView(N);var fe=P.\u0275\u0275nextContext(2);return P.\u0275\u0275resetView(fe.onDragStart(De))})("cdkDragMoved",function(De){P.\u0275\u0275restoreView(N);var fe=P.\u0275\u0275nextContext(2);return P.\u0275\u0275resetView(fe.onDragMove(De))}),P.\u0275\u0275elementContainerStart(2),P.\u0275\u0275template(3,k,5,5,"tr",4),P.\u0275\u0275template(4,E,4,3,"div",5),P.\u0275\u0275elementContainerEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementContainerEnd()}if(2&ae){var he=P.\u0275\u0275nextContext(),pe=he.goal,ce=he.i,ge=P.\u0275\u0275nextContext();P.\u0275\u0275advance(1),P.\u0275\u0275classProp("disabled","Saving"===pe.state||"Deleting"===pe.state)("goal-not-match",!1===pe.isFilterMatch),P.\u0275\u0275property("scorecard",ge.scorecard)("columnSettings",ge.columnSettings)("goal",pe)("indent",ce)("color",ge.color)("highlightRow",ge.goalDragInfo&&pe.id===ge.goalDragInfo.destParentGoalId)("scorecardSelectionMode",ge.scorecardSelectionMode)("showChildren",ge.showChildren[pe.id])("forceColumnMinWidths",ge.forceColumnMinWidths)("cdkDragData",P.\u0275\u0275pureFunction2(16,s,pe,ce))("cdkDragDisabled","Saving"===pe.state||"Deleting"===pe.state)("cdkDragStartDelay",ge.goalDragStartDelayInMs)}}function te(ae,J){if(1&ae){var N=P.\u0275\u0275getCurrentView();P.\u0275\u0275elementContainerStart(0),P.\u0275\u0275element(1,"tr",12,13),P.\u0275\u0275elementStart(3,"tr",14),P.\u0275\u0275listener("onSave",function(){P.\u0275\u0275restoreView(N);var fe=P.\u0275\u0275reference(2);return P.\u0275\u0275resetView(fe.onSave())})("onCancel",function(){P.\u0275\u0275restoreView(N);var fe=P.\u0275\u0275reference(2);return P.\u0275\u0275resetView(fe.onCancel())}),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementContainerEnd()}if(2&ae){var he=P.\u0275\u0275reference(2),pe=P.\u0275\u0275nextContext(),ce=pe.goal,ge=pe.i,se=P.\u0275\u0275nextContext();P.\u0275\u0275advance(1),P.\u0275\u0275classProp("goal-not-match",!1===ce.isFilterMatch),P.\u0275\u0275property("goal",ce)("indent",ge)("color",se.color),P.\u0275\u0275advance(2),P.\u0275\u0275property("id",ce.id)("disableSave",!he.allValid())}}function X(ae,J){1&ae&&P.\u0275\u0275elementContainer(0)}var m=function(J,N){return{goal:J,i:N}};function O(ae,J){if(1&ae&&(P.\u0275\u0275elementContainerStart(0),P.\u0275\u0275template(1,X,1,0,"ng-container",0),P.\u0275\u0275elementContainerEnd()),2&ae){var N=P.\u0275\u0275nextContext().$implicit,he=P.\u0275\u0275nextContext(2).i;P.\u0275\u0275nextContext();var pe=P.\u0275\u0275reference(2);P.\u0275\u0275advance(1),P.\u0275\u0275property("ngTemplateOutlet",pe)("ngTemplateOutletContext",P.\u0275\u0275pureFunction2(2,m,N,he+1))}}function I(ae,J){if(1&ae&&(P.\u0275\u0275elementContainerStart(0),P.\u0275\u0275template(1,O,2,5,"ng-container",2),P.\u0275\u0275elementContainerEnd()),2&ae){var N=J.$implicit;P.\u0275\u0275advance(1),P.\u0275\u0275property("ngIf",!N.isHidden)}}function H(ae,J){if(1&ae&&(P.\u0275\u0275elementContainerStart(0),P.\u0275\u0275template(1,I,2,1,"ng-container",15),P.\u0275\u0275elementContainerEnd()),2&ae){var N=P.\u0275\u0275nextContext().goal,he=P.\u0275\u0275nextContext();P.\u0275\u0275advance(1),P.\u0275\u0275property("ngForOf",N.subGoals)("ngForTrackBy",he.goalId)}}function G(ae,J){if(1&ae&&(P.\u0275\u0275template(0,ne,5,19,"ng-container",2),P.\u0275\u0275template(1,te,4,7,"ng-container",2),P.\u0275\u0275template(2,H,2,2,"ng-container",2)),2&ae){var N=J.goal,he=P.\u0275\u0275nextContext();P.\u0275\u0275property("ngIf",null==N.state||"Consumption"===N.state||"Saving"===N.state||"Deleting"===N.state),P.\u0275\u0275advance(1),P.\u0275\u0275property("ngIf","Editing"===N.state),P.\u0275\u0275advance(1),P.\u0275\u0275property("ngIf",(null==N.subGoals?null:N.subGoals.length)>0&&he.showChildren[N.id]&&(null==he.goalDragInfo?null:he.goalDragInfo.sourceGoalId)!==N.id)}}var Z=function(J){return{goal:J,i:0}},ie=function(J){return{dragStartThreshold:J.featureSwitches.goalsDelayDragAndDrop?r.gT.GoalDragStartThresholdInPx:r.gT.DefaultDragThresholdInPx,pointerDirectionChangeThreshold:r.gT.DefaultDragThresholdInPx}},ye=function(){function ae(J){this.featureSwitches=J,this.showChildren={},this.goalDragInfo={},this.showChildrenChange=new P.EventEmitter,this.dragMoved=new P.EventEmitter,this.dragStarted=new P.EventEmitter,this.MaxSubGoals=r.gT.MaxSubGoals,this.goalDragStartDelayInMs=0}return ae.prototype.ngOnInit=function(){this.bulkDeleteEnabled=this.featureSwitches.featureSwitches.goalsBulkDelete,this.goalDragStartDelayInMs=this.featureSwitches.featureSwitches.goalsDelayDragAndDrop?r.gT.GoalDragStartDelayInMs:0},ae.prototype.goalId=function(J,N){return N.id},ae.prototype.onShowChildrenChange=function(J,N){this.showChildrenChange.emit({id:J,value:N})},ae.prototype.onDragMove=function(J){this.dragMoved.emit(J)},ae.prototype.onDragStart=function(J){this.dragStarted.emit(J)},ae.\u0275fac=function(N){return new(N||ae)(P.\u0275\u0275directiveInject(a.vZ))},ae.\u0275cmp=P.\u0275\u0275defineComponent({type:ae,selectors:[["","goal-group",""]],inputs:{scorecard:"scorecard",columnSettings:"columnSettings",goal:"goal",color:"color",showChildren:"showChildren",goalDragInfo:"goalDragInfo",scorecardSelectionMode:"scorecardSelectionMode",forceColumnMinWidths:"forceColumnMinWidths"},outputs:{showChildrenChange:"showChildrenChange",dragMoved:"dragMoved",dragStarted:"dragStarted"},features:[P.\u0275\u0275ProvidersFeature([{provide:o.ni,useFactory:ie,deps:[a.vZ]}])],attrs:y,decls:3,vars:4,consts:[[4,"ngTemplateOutlet","ngTemplateOutletContext"],["goalWithChildrenTmpl",""],[4,"ngIf"],["goal-row","","cdkDrag","",1,"goal-row",3,"scorecard","columnSettings","goal","indent","color","highlightRow","scorecardSelectionMode","showChildren","forceColumnMinWidths","cdkDragData","cdkDragDisabled","cdkDragStartDelay","showChildrenChange","cdkDragStarted","cdkDragMoved"],[4,"cdkDragPlaceholder"],[4,"cdkDragPreview"],["colspan","1",1,"goal-placeholder-checkbox"],["class","cell cell-indent",3,"goal-drag-placeholder-line",4,"ngFor","ngForOf"],[1,"goal-drag-placeholder-line"],[1,"cell","cell-indent"],[1,"goal-drag-preview-accent"],[1,"goal-drag-preview-content"],["goal-edit-row","","data-testid","goal-edit-row",1,"goal-edit-row",3,"goal","indent","color"],["editRow",""],["goal-edit-buttons-row","",1,"button-row",3,"id","disableSave","onSave","onCancel"],[4,"ngFor","ngForOf","ngForTrackBy"]],template:function(N,he){if(1&N&&(P.\u0275\u0275template(0,i,1,0,"ng-container",0),P.\u0275\u0275template(1,G,3,3,"ng-template",null,1,P.\u0275\u0275templateRefExtractor)),2&N){var pe=P.\u0275\u0275reference(2);P.\u0275\u0275property("ngTemplateOutlet",pe)("ngTemplateOutletContext",P.\u0275\u0275pureFunction1(2,Z,he.goal))}},dependencies:[d.NgForOf,d.NgIf,d.NgTemplateOutlet,o.Zt,o.pV,o.Hk,p.C,l.W,c.G],styles:[".cell[_ngcontent-%COMP%]{border:none;box-sizing:border-box}.cell-indent[_ngcontent-%COMP%]{width:36px}.cell-left-edge[_ngcontent-%COMP%]{border-top-left-radius:4px;border-bottom-left-radius:4px}.cell-right-edge[_ngcontent-%COMP%]{border-top-right-radius:4px;border-bottom-right-radius:4px}.cell-box[_ngcontent-%COMP%]{display:flex;height:100%}.cell-box[_ngcontent-%COMP%]   .color-box[_ngcontent-%COMP%]{min-width:6px;width:6px;border-top-left-radius:4px;border-bottom-left-radius:4px}[_nghost-%COMP%]   .goal-edit-row[_ngcontent-%COMP%]{box-sizing:border-box;border:none;height:96px}[_nghost-%COMP%]   .goal-not-match[_ngcontent-%COMP%]{opacity:50%}[_nghost-%COMP%]   .button-row[_ngcontent-%COMP%]{height:32px;box-sizing:border-box;border:none}[_nghost-%COMP%]   .disabled[_ngcontent-%COMP%]{opacity:.4}.row[_ngcontent-%COMP%]{box-sizing:border-box;border:none}.goal-row[_ngcontent-%COMP%]{box-sizing:border-box;border:none;height:60px}.cdk-drag-placeholder[_ngcontent-%COMP%]{height:2px}.goal-drag-placeholder-line[_ngcontent-%COMP%]{background-color:var(--fluent-theme-black-color, #000)}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border:none;height:60px;display:flex;width:25%;opacity:.7;background-color:var(--scorecard-tableBackgroundColor);font-family:var(--scorecard-fontFamily)}.goal-drag-preview-accent[_ngcontent-%COMP%]{width:6px;border-radius:4px;margin-right:12px}.goal-drag-preview-content[_ngcontent-%COMP%]{display:inline-flex;align-items:center;min-width:fit-content;overflow:hidden;text-overflow:ellipsis}.goal-placeholder-checkbox[_ngcontent-%COMP%]{width:35px}.goal-placeholder-checkbox.bulk-editing-off[_ngcontent-%COMP%]{width:0px}"],changeDetection:0}),ae}()},42989:function(lt,Ge,t){"use strict";t.d(Ge,{R:function(){return ze},n:function(){return Fe}});var r=t(81337),o=t(44603),P=t(60042),a=t(50423),d=t(33567),p=t(88940),l=t(14463),c=t(66794),y=t(47245),i=t(61036),C=t(29589),v=t(47508),k=t(79154),E=t(62458),s=t(39681),ne=t(32379),te=t(78843),X=t(61289),m=t(26743),O=t(94419),I=t(80777),H=t(40956),G=t(65181),Z=t(2330),ie=t(29866),ye=t(98136),ae=t(77476),J=t(12338),N=t(698),he=t(85102),pe=function(je){return{"hide-legend":je}};function ce(Ke,je){if(1&Ke&&(a.\u0275\u0275elementStart(0,"div",3)(1,"div",4),a.\u0275\u0275element(2,"div",5),a.\u0275\u0275elementStart(3,"span"),a.\u0275\u0275text(4),a.\u0275\u0275pipe(5,"localize"),a.\u0275\u0275elementEnd()(),a.\u0275\u0275elementStart(6,"div",4),a.\u0275\u0275element(7,"div",6),a.\u0275\u0275elementStart(8,"span"),a.\u0275\u0275text(9),a.\u0275\u0275pipe(10,"localize"),a.\u0275\u0275elementEnd()(),a.\u0275\u0275elementStart(11,"div",4)(12,"div",7),a.\u0275\u0275element(13,"div",8),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(14,"span"),a.\u0275\u0275text(15),a.\u0275\u0275pipe(16,"localize"),a.\u0275\u0275elementEnd()()()),2&Ke){var He=a.\u0275\u0275nextContext();a.\u0275\u0275property("ngClass",a.\u0275\u0275pureFunction1(12,pe,"Hidden"==He.legend)),a.\u0275\u0275advance(2),a.\u0275\u0275styleProp("background-color",He.color),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate(a.\u0275\u0275pipeBind1(5,6,"Progress")),a.\u0275\u0275advance(5),a.\u0275\u0275textInterpolate(a.\u0275\u0275pipeBind1(10,8,"Milestones")),a.\u0275\u0275advance(6),a.\u0275\u0275textInterpolate(a.\u0275\u0275pipeBind1(16,10,"Target_Final"))}}function ge(Ke,je){if(1&Ke&&a.\u0275\u0275element(0,"visual-modern",9),2&Ke){var He=a.\u0275\u0275nextContext();a.\u0275\u0275property("viewModel",He.visualDefinition)("useOnPushChangeDetection",!0)}}var se="Time",De="Value",fe="Targets",Oe="Milestones",be="FinalTarget",Fe={xAxis:{show:!1},yAxis:{show:!1}},ze=function(){function Ke(je,He,Je,j,nt,Ue,oe,h){this.geocoder=je,this.geolocation=He,this.localizationService=Je,this.moduleLoader=j,this.promiseFactory=nt,this.visualPlugin=Ue,this.visualHostTooltipServiceFactory=oe,this.changeDetector=h,this.showGoalTargets=!1,this.axesOptions={xAxis:{show:!0},yAxis:{show:!0}},this.legend="None",this.showZoom=!1,this.type="LineChart",this.targetLineColor=P.gT.GoalTargetsLineColor,this.onSelected=new a.EventEmitter}return Object.defineProperty(Ke.prototype,"isComboChart",{get:function(){return"ComboChart"===this.type},enumerable:!1,configurable:!0}),Ke.prototype.ngOnInit=function(){var He,je=this;this.shadeCurrentArea=null!==(He=this.shadeCurrentArea)&&void 0!==He?He:this.isComboChart,this.visualPlugin.ensureBuiltInPlugins().then(function(){je.initializeVisual(),je.isLoaded=!0,je.changeDetector.detectChanges()})},Ke.prototype.ngOnChanges=function(je){(je.values||je.color||je.showGoalTargets||je.showAxis||je.targetLineColor||je.axesOptions||je.shadeCurrentArea)&&(this.generateDataView(),this.update())},Ke.prototype.initializeVisual=function(){var He,je=this,Je=(0,s.ED)((0,y.q)({geocoder:this.geocoder,geolocation:this.geolocation,localizationService:this.localizationService,moduleLoader:this.moduleLoader,promiseFactory:this.promiseFactory,visualHostTooltipService:this.visualHostTooltipServiceFactory.create(),getAzureMapToken:void 0,azureMapsEndpoint:void 0,geocoderIndexedDB:void 0}),function(nt){nt.persistProperties=function(Ue,oe){return je.persistProperties(Ue)},nt.getLocalizedString=function(Ue){for(var oe,h=[],g=1;g<arguments.length;g++)h[g-1]=arguments[g];return(oe=je.localizationService).format.apply(oe,(0,r.ev)([Ue],h||[],!1))},nt.getViewMode=function(){return 0},nt.locale=function(){return(0,i.uD)()},nt.promiseFactory=function(){return je.promiseFactory},nt.onSelect=function(Ue){var oe;if(!_.isEmpty(Ue?.visualObjects)){var h=null===(oe=_.first(Ue.visualObjects))||void 0===oe?void 0:oe.selectorsByColumn;if(h){var g=_.first(h.dataMap[se]);if((0,ne.yN)(g)){var u=(0,m.KX)(g.expr),F=_.first(u);F&&F.value&&je.onSelected.emit(F.value)}else E.fF.assertFail("Unexpected selector")}}}}),j=v.L.lineChart.name;"AreaChart"===this.type?j=v.L.areaChart.name:"ColumnChart"===this.type?j=v.L.columnChart.name:"ComboChart"===this.type&&(j=v.L.lineClusteredColumnComboChart.name),this.visualDefinition={interactivityOptions:{},type:j,allowInvalidDataView:!0,themeCollection:void 0,viewport:null!==(He=this.viewportSize)&&void 0!==He?He:{height:100,width:100,scale:1},dataTransforms:void 0,hostServices:Je,visualAdapterHostServices:{startProgressBar:_.noop,stopProgressBar:_.noop,getNextDataSegment:function(){return(0,r.mG)(je,void 0,void 0,function(){return(0,r.Jh)(this,function(Ue){return[2,{}]})})}},stylePresetName:void 0,additionalObjectUpdates:_.noop,visualPlugin:this.visualPlugin},this.update()},Ke.prototype.update=function(){var je,He;if(this.visualDefinition){var Je={categoryAxis:[{properties:{show:(0,O.O7)(this.axesOptions.xAxis.show)}}],valueAxis:[{properties:{show:(0,O.O7)(this.axesOptions.yAxis.show)}}],dataPoint:[{selector:{metadata:De},properties:{fill:{solid:{color:(0,O.fL)(this.color)}}}},{selector:{metadata:fe},properties:{fill:{solid:{color:(0,O.fL)(this.targetLineColor)}}}},{selector:{metadata:Oe},properties:{fill:{solid:{color:(0,O.fL)(this.targetLineColor)}}}},{selector:{metadata:be},properties:{fill:{solid:{color:(0,O.fL)(this.targetLineColor)}}}}],lineStyles:[{selector:{metadata:fe},properties:{lineStyle:(0,O.fL)("dashed"),strokeWidth:(0,O.cA)(1.5),showMarker:(0,O.O7)(!1)}},{selector:{metadata:Oe},properties:{showMarker:(0,O.O7)(!0),markerSize:(0,O.cA)(5),markerShape:(0,O.fL)("circle"),strokeWidth:(0,O.cA)(0)}},{selector:{metadata:be},properties:{showMarker:(0,O.O7)(!0),markerSize:(0,O.cA)(8),markerShape:(0,O.fL)("diamond"),strokeWidth:(0,O.cA)(0)}}],legend:[{properties:{show:(0,O.O7)(!1)}}],zoom:[{properties:{show:(0,O.O7)(this.showZoom),showOnValueAxis:(0,O.O7)(!1)}}]};if(this.isComboChart){for(var j=0,nt=Je.lineStyles;j<nt.length;j++){var Ue=nt[j];!_.isUndefined(Ue.selector)&&Ue.selector.metadata!==De&&(Ue.properties.areaShow=(0,O.O7)(!1))}Je.lineStyles.push({properties:{areaShow:(0,O.O7)(this.shadeCurrentArea)}})}this.setAxisFontProperties(Je.categoryAxis[0].properties,null===(je=this.axesOptions)||void 0===je?void 0:je.xAxis.fontProperties),this.setAxisFontProperties(Je.valueAxis[0].properties,null===(He=this.axesOptions)||void 0===He?void 0:He.yAxis.fontProperties),this.visualDefinition.dataTransforms={objects:Je},this.applyDataTransformsForComboIfNeeded(),this.visualDefinition.data={dataView:this.dataView}}},Ke.prototype.setAxisFontProperties=function(je,He){He&&(He.color&&(je.labelColor={solid:{color:(0,O.fL)(He.color)}}),He.family&&(je.fontFamily=(0,O.fL)(He.family)),He.size&&(je.fontSize=(0,O.gH)(He.size.pt)),He.weight&&(je.bold=(0,O.O7)(He.weight===k.en)),He.style&&(je.italic=(0,O.O7)(He.style===k.BF)),He.textDecoration&&(je.underline=(0,O.O7)(He.textDecoration===k.f0)))},Ke.prototype.persistProperties=function(je){var He=_.isArray(je)?{merge:je}:je;this.visualDefinition&&this.checkAndApplyDataTransformPropertyChanges(He)},Ke.prototype.checkAndApplyDataTransformPropertyChanges=function(je){var He;if(He=this.isComboChart?v.L.lineClusteredColumnComboChart.capabilities:v.L.lineChart.capabilities,!_.isEmpty(je.merge)||!_.isEmpty(je.remove)){var j=He.objects;this.update(),(0,c._6)(je,j,this.visualDefinition.dataTransforms.objects),this.changeDetector.detectChanges()}},Ke.prototype.onResize=function(je){this.viewportSize={width:je.width,height:je.height,scale:1},this.visualDefinition&&(this.visualDefinition.viewport=this.viewportSize)},Ke.prototype.generateDataView=function(){var je,He,Je,j,nt,Ue,oe,h,g,u,F=[{displayName:this.localizationService.get("Date"),queryName:se,type:I.Ge.fromPrimitiveTypeAndCategory(6),roles:{Category:!0}},{displayName:this.localizationService.get("Role_DisplayName_Value"),queryName:De,type:I.Ge.fromPrimitiveTypeAndCategory(3),roles:{Y:!0},index:0,objects:(je={},je[C.iu.objectName]=(He={},He[C.iu.propertyName]=this.formatString,He),je)}];this.showGoalTargets&&(F.push({displayName:this.localizationService.get("Target"),queryName:fe,type:I.Ge.fromPrimitiveTypeAndCategory(3),roles:{Y:!0},index:1,objects:(Je={},Je[C.iu.objectName]=(j={},j[C.iu.propertyName]=this.formatString,j),Je)}),F.push({displayName:this.localizationService.get("Target_Milestone_Due"),queryName:Oe,type:I.Ge.fromPrimitiveTypeAndCategory(3),roles:{Y:!0},index:2,objects:(nt={},nt[C.iu.objectName]=(Ue={},Ue[C.iu.propertyName]=this.formatString,Ue),nt)}),F.push({displayName:this.localizationService.get("Target_Final_Due"),queryName:be,type:I.Ge.fromPrimitiveTypeAndCategory(3),roles:{Y:!0},index:3,objects:(oe={},oe[C.iu.objectName]=(h={},h[C.iu.propertyName]=this.formatString,h),oe)})),this.updateColumnsForComboIfNeeded(F);var W=(0,O.Oh)((0,O.fL)("Date"),"Date"),ee=null!==(u=this.values)&&void 0!==u?u:[];ee=ee.filter(function(Ne){return!_.isNil(Ne.value)||!_.isNil(Ne.target)}),ee=_.sortBy(ee,function(Ne){return new Date(Ne.timestamp)});var U,Q,B=[],w=[],q=[];if(this.showGoalTargets){U=[],Q=[];for(var le=(g=function(){for(var Ne=ee.length-1;Ne>=0;Ne--)if(!_.isNil(ee[Ne].target))return[ee[Ne].target,ee[Ne].timestamp];return[void 0,void 0]}())[0],de=g[1],V=function($e){for(var Xe=$e+1;Xe<ee.length&&_.isNil(ee[Xe].target);)Xe++;return Xe<ee.length?ee[Xe].target:void 0},M=0;M<ee.length;M++){var L=ee[M],x=V(M);U.push(L.timestamp),Q.push(L.value),B.push(L.target!==x&&L.timestamp!==de?L.target:void 0),w.push(L.timestamp===de?L.target:void 0),_.isNil(L.target)?q.push(0===M?x:M===ee.length-1?le:void 0):(q.push(L.target),_.isNil(x)||(U.push(L.timestamp),q.push(x),Q.push(void 0),B.push(void 0),w.push(void 0)))}}else U=ee.map(function(Ne){return Ne.timestamp}),Q=ee.map(function(Ne){return Ne.value});var Y=[];Y.push({source:F[1],values:Q}),this.showGoalTargets&&(Y.push({source:F[3],values:B}),Y.push({source:F[4],values:w}),Y.push({source:F[2],values:q}));var ue={metadata:{columns:F},categorical:{categories:[{source:F[0],values:_.map(U,function(Ne){var $e=new Date(Ne),Xe=o.E.treatAsLocalDate($e);return Xe.epochTimeStamp=$e.getTime(),Xe}),identity:_.map(U,function(Ne){return(0,te.TZ)((0,O.Dg)(W,(0,O.fL)(Ne)))})}],values:(0,X.Yv)(Y)}};this.dataView=ue},Ke.prototype.updateColumnsForComboIfNeeded=function(je){if(this.isComboChart)for(var He=0,Je=0,j=je;Je<j.length;Je++){var nt=j[Je];nt.queryName!==se&&(nt.roles={Y2:!0}),nt.index=He,He++}},Ke.prototype.applyDataTransformsForComboIfNeeded=function(){if(this.isComboChart){var je=this.dataView.metadata.columns.map(function(j){return{displayName:j.displayName,queryName:j.queryName,roles:j.roles}});this.visualDefinition.dataTransforms.selects=je;var He={};for(var Je in je)He[Je]=!0;this.visualDefinition.dataTransforms.splits=[{selects:void 0},{selects:He}]}},Ke.\u0275fac=function(He){return new(He||Ke)(a.\u0275\u0275directiveInject(H.i),a.\u0275\u0275directiveInject(d._1),a.\u0275\u0275directiveInject(G.o),a.\u0275\u0275directiveInject(Z.m),a.\u0275\u0275directiveInject(l.t),a.\u0275\u0275directiveInject(ie.D),a.\u0275\u0275directiveInject(ye.q),a.\u0275\u0275directiveInject(a.ChangeDetectorRef))},Ke.\u0275cmp=a.\u0275\u0275defineComponent({type:Ke,selectors:[["goal-history-chart"]],inputs:{values:"values",formatString:"formatString",color:"color",showGoalTargets:"showGoalTargets",axesOptions:"axesOptions",legend:"legend",showZoom:"showZoom",type:"type",shadeCurrentArea:"shadeCurrentArea",targetLineColor:"targetLineColor"},outputs:{onSelected:"onSelected"},features:[a.\u0275\u0275ProvidersFeature((0,r.ev)([],p.H,!0)),a.\u0275\u0275NgOnChangesFeature],decls:3,vars:2,consts:[["class","legend",3,"ngClass",4,"ngIf"],[1,"linechart-wrapper",3,"on-resize"],["class","linechart",3,"viewModel","useOnPushChangeDetection",4,"ngIf"],[1,"legend",3,"ngClass"],[1,"label"],[1,"square"],[1,"circle","filled"],[1,"square","center-diamond"],[1,"diamond","filled"],[1,"linechart",3,"viewModel","useOnPushChangeDetection"]],template:function(He,Je){1&He&&(a.\u0275\u0275template(0,ce,17,14,"div",0),a.\u0275\u0275elementStart(1,"div",1),a.\u0275\u0275listener("on-resize",function(nt){return Je.onResize(nt)}),a.\u0275\u0275template(2,ge,1,2,"visual-modern",2),a.\u0275\u0275elementEnd()),2&He&&(a.\u0275\u0275property("ngIf","None"!=Je.legend),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",Je.isLoaded&&!!Je.viewportSize))},dependencies:[ae.NgClass,ae.NgIf,J.y,N.O,he.F],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   .linechart-wrapper[_ngcontent-%COMP%]{flex:1;position:relative}[_nghost-%COMP%]   .linechart-wrapper[_ngcontent-%COMP%]   .linechart[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;border-radius:4px}[_nghost-%COMP%]   .legend[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:8px}[_nghost-%COMP%]   .legend[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}[_nghost-%COMP%]   .legend[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%], [_nghost-%COMP%]   .legend[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{width:12px;height:12px}[_nghost-%COMP%]   .legend[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{border-radius:50%}[_nghost-%COMP%]   .legend[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   .center-diamond[_ngcontent-%COMP%]{display:flex;align-items:center}[_nghost-%COMP%]   .legend[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   .diamond[_ngcontent-%COMP%]{width:10px;height:10px;transform:rotate(45deg)}[_nghost-%COMP%]   .legend[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   .filled[_ngcontent-%COMP%]{background-color:#8a8886}[_nghost-%COMP%]   .hide-legend[_ngcontent-%COMP%]{visibility:hidden}"],changeDetection:0}),Ke}()},46037:function(lt,Ge,t){"use strict";t.d(Ge,{C:function(){return u}});var r=t(60042),o=t(44603),P=t(125),a=t(61088),d=t(3204),p=t(62831),l=t(50423),c=t(62458),y=t(49223),i=t(9380),C=t(65181),v=t(64929),k=t(93379),E=t(87426),s=t(74521),ne=t(77476),te=t(56011),X=t(11941),m=t(36858),O=t(95594),I=t(77971),H=t(4716),G=t(11891),Z=t(64661),ie=t(49048),ye=t(76654),ae=t(85953),J=t(85102),N=["chart"],he=["goal-row",""];function pe(F,W){if(1&F){var ee=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"div",5)(1,"pbi-checkbox",6),l.\u0275\u0275listener("onChange",function(){l.\u0275\u0275restoreView(ee);var B=l.\u0275\u0275nextContext();return l.\u0275\u0275resetView(B.onSelectGoalCheckbox())}),l.\u0275\u0275elementEnd()()}if(2&F){var U=l.\u0275\u0275nextContext();l.\u0275\u0275classProp("box-checked",null==U.scorecard||null==U.scorecard.selectedGoalIds?null:U.scorecard.selectedGoalIds[U.displayedGoal.id]),l.\u0275\u0275advance(1),l.\u0275\u0275property("checked",U.isChecked)}}function ce(F,W){if(1&F){var ee=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"div",5)(1,"pbi-radio-button",7),l.\u0275\u0275listener("change",function(){l.\u0275\u0275restoreView(ee);var B=l.\u0275\u0275nextContext();return l.\u0275\u0275resetView(B.onSelectGoalCheckbox())}),l.\u0275\u0275pipe(2,"localize"),l.\u0275\u0275elementEnd()()}if(2&F){var U=l.\u0275\u0275nextContext();l.\u0275\u0275advance(1),l.\u0275\u0275property("disabled",!U.canSelectGoal)("pbiTooltip",U.selectGoalDisabledTooltip?l.\u0275\u0275pipeBind1(2,5,U.selectGoalDisabledTooltip):"")("pbiTooltipDisabled",U.canSelectGoal)("isCompact",!0)("checked",U.isChecked)}}function ge(F,W){if(1&F){var ee=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"div",5)(1,"pbi-checkbox",8),l.\u0275\u0275listener("onChange",function(){l.\u0275\u0275restoreView(ee);var B=l.\u0275\u0275nextContext();return l.\u0275\u0275resetView(B.onSelectGoalCheckbox())}),l.\u0275\u0275pipe(2,"localize"),l.\u0275\u0275elementEnd()()}if(2&F){var U=l.\u0275\u0275nextContext();l.\u0275\u0275advance(1),l.\u0275\u0275property("disabled",!U.canSelectGoal)("pbiTooltip",U.selectGoalDisabledTooltip?l.\u0275\u0275pipeBind1(2,4,U.selectGoalDisabledTooltip):"")("pbiTooltipDisabled",U.canSelectGoal)("checked",U.isChecked)}}function se(F,W){1&F&&l.\u0275\u0275element(0,"td",9)}function De(F,W){if(1&F){var ee=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementContainerStart(0),l.\u0275\u0275elementStart(1,"button",29),l.\u0275\u0275listener("click",function(){l.\u0275\u0275restoreView(ee);var B=l.\u0275\u0275nextContext(4);return l.\u0275\u0275resetView(B.onShowChildrenChange())}),l.\u0275\u0275pipe(2,"localize"),l.\u0275\u0275pipe(3,"localize"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementContainerEnd()}if(2&F){var U=l.\u0275\u0275nextContext(4);l.\u0275\u0275advance(1),l.\u0275\u0275classProp("rotate90",!U.showChildren),l.\u0275\u0275property("pbiTooltip",l.\u0275\u0275pipeBind1(3,6,U.showChildren?"Collapse_Expand_Submetrics_Button_Functional_Description_Hide_Submetrics":"Collapse_Expand_Submetrics_Button_Functional_Description_Show_Submetrics")),l.\u0275\u0275attribute("aria-label",l.\u0275\u0275pipeBind1(2,4,U.showChildren?"Collapse_Expand_Submetrics_Button_Functional_Description_Hide_Submetrics":"Collapse_Expand_Submetrics_Button_Functional_Description_Show_Submetrics"))}}function fe(F,W){if(1&F){var ee=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"div",30),l.\u0275\u0275listener("click",function(Q){l.\u0275\u0275restoreView(ee);var B=l.\u0275\u0275nextContext(4);return l.\u0275\u0275resetView(B.onGoalRowClick(Q))}),l.\u0275\u0275elementEnd()}}function Oe(F,W){if(1&F){var ee=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"td",21)(1,"div",22)(2,"div",23),l.\u0275\u0275listener("click",function(q){l.\u0275\u0275restoreView(ee);var le=l.\u0275\u0275nextContext(3);return l.\u0275\u0275resetView(le.onGoalRowClick(q))}),l.\u0275\u0275elementEnd(),l.\u0275\u0275template(3,De,4,8,"ng-container",24),l.\u0275\u0275template(4,fe,1,0,"ng-template",null,25,l.\u0275\u0275templateRefExtractor),l.\u0275\u0275elementStart(6,"div",26),l.\u0275\u0275element(7,"goal-name-cell",27)(8,"goal-actions-cell",28),l.\u0275\u0275pipe(9,"async"),l.\u0275\u0275elementEnd()()()}if(2&F){var U=l.\u0275\u0275reference(5),Q=l.\u0275\u0275nextContext(2).$implicit,B=l.\u0275\u0275nextContext();l.\u0275\u0275styleProp("--borderColor",B.color)("max-width",B.forceColumnMinWidths?B.ListViewCellMinWidths[Q.columnId]+"px":void 0)("min-width",B.ListViewCellMinWidths[Q.columnId],"px"),l.\u0275\u0275classProp("selected-goal",(null==B.scorecard||null==B.scorecard.selectedGoalIds?null:B.scorecard.selectedGoalIds[B.displayedGoal.id])||B.highlightRow),l.\u0275\u0275attribute("colspan",B.MAX_COLSPAN-B.indentation),l.\u0275\u0275advance(2),l.\u0275\u0275styleProp("background-color",B.color),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",B.hasVisibleChildren)("ngIfElse",U),l.\u0275\u0275advance(4),l.\u0275\u0275property("goal",B.displayedGoal)("scorecard",B.scorecard),l.\u0275\u0275advance(1),l.\u0275\u0275property("goal",B.displayedGoal)("isEditMode",l.\u0275\u0275pipeBind1(9,17,B.isEditMode$))}}function be(F,W){if(1&F){var ee=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"td",31),l.\u0275\u0275listener("click",function(le){l.\u0275\u0275restoreView(ee);var de=l.\u0275\u0275nextContext(3);return l.\u0275\u0275resetView(de.onGoalRowClick(le))}),l.\u0275\u0275element(1,"goal-owners-cell",32),l.\u0275\u0275elementEnd()}if(2&F){var U=l.\u0275\u0275nextContext(2),Q=U.$implicit,B=U.last,w=l.\u0275\u0275nextContext();l.\u0275\u0275styleProp("max-width",w.forceColumnMinWidths?w.ListViewCellMinWidths[Q.columnId]+"px":void 0)("min-width",w.ListViewCellMinWidths[Q.columnId],"px")("--borderColor",w.color),l.\u0275\u0275classProp("selected-goal",(null==w.scorecard||null==w.scorecard.selectedGoalIds?null:w.scorecard.selectedGoalIds[w.displayedGoal.id])||w.highlightRow)("cell-right-edge",B),l.\u0275\u0275advance(1),l.\u0275\u0275property("goal",w.displayedGoal)}}function Fe(F,W){if(1&F){var ee=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"td",33),l.\u0275\u0275listener("click",function(le){l.\u0275\u0275restoreView(ee);var de=l.\u0275\u0275nextContext(3);return l.\u0275\u0275resetView(de.onGoalRowClick(le))}),l.\u0275\u0275element(1,"status-icon",34),l.\u0275\u0275elementEnd()}if(2&F){var U=l.\u0275\u0275nextContext(2),Q=U.$implicit,B=U.last,w=l.\u0275\u0275nextContext();l.\u0275\u0275styleProp("max-width",w.forceColumnMinWidths?w.ListViewCellMinWidths[Q.columnId]+"px":void 0)("min-width",w.ListViewCellMinWidths[Q.columnId],"px")("--borderColor",w.color),l.\u0275\u0275classProp("selected-goal",(null==w.scorecard||null==w.scorecard.selectedGoalIds?null:w.scorecard.selectedGoalIds[w.displayedGoal.id])||w.highlightRow)("cell-right-edge",B),l.\u0275\u0275advance(1),l.\u0275\u0275property("status",null==w.currentValue?null:w.currentValue.status)("goalStatuses",w.goalStatuses)}}function ze(F,W){if(1&F&&l.\u0275\u0275element(0,"goal-change-cell",32),2&F){var ee=l.\u0275\u0275nextContext(4);l.\u0275\u0275property("goal",ee.displayedGoal)}}function Ke(F,W){if(1&F){var ee=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"td",35),l.\u0275\u0275listener("click",function(V){l.\u0275\u0275restoreView(ee);var M=l.\u0275\u0275nextContext(3);return l.\u0275\u0275resetView(M.onGoalRowClick(V))}),l.\u0275\u0275element(1,"goal-value-cell",36),l.\u0275\u0275template(2,ze,1,1,"goal-change-cell",37),l.\u0275\u0275elementEnd()}if(2&F){var q,le,U=l.\u0275\u0275nextContext(2),Q=U.$implicit,B=U.last,w=l.\u0275\u0275nextContext();l.\u0275\u0275styleProp("max-width",w.forceColumnMinWidths?w.ListViewCellMinWidths[Q.columnId]+"px":void 0)("min-width",w.ListViewCellMinWidths[Q.columnId],"px")("--borderColor",w.color),l.\u0275\u0275classProp("selected-goal",(null==w.scorecard||null==w.scorecard.selectedGoalIds?null:w.scorecard.selectedGoalIds[w.displayedGoal.id])||w.highlightRow)("cell-right-edge",B),l.\u0275\u0275advance(1),l.\u0275\u0275property("goal",w.displayedGoal)("showCurrent",!0)("showTarget",null!==(q=null==w.displayedGoal.metadata?null:w.displayedGoal.metadata.showFinalTarget)&&void 0!==q?q:!w.displayedGoal.targetConnection)("showMilestone",!(null!==(le=null==w.displayedGoal.metadata?null:w.displayedGoal.metadata.showFinalTarget)&&void 0!==le?le:!w.displayedGoal.targetConnection)),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",w.isChangeVisible)}}function je(F,W){if(1&F&&l.\u0275\u0275element(0,"goal-change-cell",32),2&F){var ee=l.\u0275\u0275nextContext(4);l.\u0275\u0275property("goal",ee.displayedGoal)}}function He(F,W){if(1&F){var ee=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"td",38),l.\u0275\u0275listener("click",function(le){l.\u0275\u0275restoreView(ee);var de=l.\u0275\u0275nextContext(3);return l.\u0275\u0275resetView(de.onGoalRowClick(le))}),l.\u0275\u0275element(1,"goal-value-cell",39),l.\u0275\u0275template(2,je,1,1,"goal-change-cell",37),l.\u0275\u0275elementEnd()}if(2&F){var U=l.\u0275\u0275nextContext(2),Q=U.$implicit,B=U.last,w=l.\u0275\u0275nextContext();l.\u0275\u0275styleProp("max-width",w.forceColumnMinWidths?w.ListViewCellMinWidths[Q.columnId]+"px":void 0)("min-width",w.ListViewCellMinWidths[Q.columnId],"px")("--borderColor",w.color),l.\u0275\u0275classProp("selected-goal",(null==w.scorecard||null==w.scorecard.selectedGoalIds?null:w.scorecard.selectedGoalIds[w.displayedGoal.id])||w.highlightRow)("cell-right-edge",B),l.\u0275\u0275advance(1),l.\u0275\u0275property("goal",w.displayedGoal)("showCurrent",!0),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",w.isChangeVisible)}}function Je(F,W){if(1&F){var ee=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"td",40),l.\u0275\u0275listener("click",function(le){l.\u0275\u0275restoreView(ee);var de=l.\u0275\u0275nextContext(3);return l.\u0275\u0275resetView(de.onGoalRowClick(le))}),l.\u0275\u0275element(1,"goal-value-cell",41),l.\u0275\u0275elementEnd()}if(2&F){var U=l.\u0275\u0275nextContext(2),Q=U.$implicit,B=U.last,w=l.\u0275\u0275nextContext();l.\u0275\u0275styleProp("max-width",w.forceColumnMinWidths?w.ListViewCellMinWidths[Q.columnId]+"px":void 0)("min-width",w.ListViewCellMinWidths[Q.columnId],"px")("--borderColor",w.color),l.\u0275\u0275classProp("selected-goal",(null==w.scorecard||null==w.scorecard.selectedGoalIds?null:w.scorecard.selectedGoalIds[w.displayedGoal.id])||w.highlightRow)("cell-right-edge",B),l.\u0275\u0275advance(1),l.\u0275\u0275property("goal",w.displayedGoal)("showTarget",!0)}}function j(F,W){if(1&F){var ee=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"td",42),l.\u0275\u0275listener("click",function(le){l.\u0275\u0275restoreView(ee);var de=l.\u0275\u0275nextContext(3);return l.\u0275\u0275resetView(de.onGoalRowClick(le))}),l.\u0275\u0275element(1,"goal-value-cell",43),l.\u0275\u0275elementEnd()}if(2&F){var U=l.\u0275\u0275nextContext(2),Q=U.$implicit,B=U.last,w=l.\u0275\u0275nextContext();l.\u0275\u0275styleProp("max-width",w.forceColumnMinWidths?w.ListViewCellMinWidths[Q.columnId]+"px":void 0)("min-width",w.ListViewCellMinWidths[Q.columnId],"px")("--borderColor",w.color),l.\u0275\u0275classProp("selected-goal",(null==w.scorecard||null==w.scorecard.selectedGoalIds?null:w.scorecard.selectedGoalIds[w.displayedGoal.id])||w.highlightRow)("cell-right-edge",B),l.\u0275\u0275advance(1),l.\u0275\u0275property("goal",w.displayedGoal)("showMilestone",!0)}}function nt(F,W){if(1&F){var ee=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"td",44,45),l.\u0275\u0275listener("click",function(le){l.\u0275\u0275restoreView(ee);var de=l.\u0275\u0275nextContext(3);return l.\u0275\u0275resetView(de.onGoalRowClick(le))}),l.\u0275\u0275element(2,"goal-sparkline-cell",46),l.\u0275\u0275elementEnd()}if(2&F){var U=l.\u0275\u0275nextContext(2),Q=U.$implicit,B=U.last,w=l.\u0275\u0275nextContext();l.\u0275\u0275styleProp("max-width",w.forceColumnMinWidths?w.ListViewCellMinWidths[Q.columnId]+"px":void 0)("min-width",w.ListViewCellMinWidths[Q.columnId],"px")("--borderColor",w.color),l.\u0275\u0275classProp("selected-goal",(null==w.scorecard||null==w.scorecard.selectedGoalIds?null:w.scorecard.selectedGoalIds[w.displayedGoal.id])||w.highlightRow)("cell-right-edge",B),l.\u0275\u0275advance(2),l.\u0275\u0275property("goal",w.displayedGoal)("sparklineValues",w.sparklineValues)}}function Ue(F,W){if(1&F){var ee=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"td",47),l.\u0275\u0275listener("click",function(le){l.\u0275\u0275restoreView(ee);var de=l.\u0275\u0275nextContext(3);return l.\u0275\u0275resetView(de.onGoalRowClick(le))}),l.\u0275\u0275element(1,"goal-due-date-cell",32),l.\u0275\u0275elementEnd()}if(2&F){var U=l.\u0275\u0275nextContext(2),Q=U.$implicit,B=U.last,w=l.\u0275\u0275nextContext();l.\u0275\u0275styleProp("max-width",w.forceColumnMinWidths?w.ListViewCellMinWidths[Q.columnId]+"px":void 0)("min-width",w.ListViewCellMinWidths[Q.columnId],"px")("--borderColor",w.color),l.\u0275\u0275classProp("selected-goal",(null==w.scorecard||null==w.scorecard.selectedGoalIds?null:w.scorecard.selectedGoalIds[w.displayedGoal.id])||w.highlightRow)("cell-right-edge",B),l.\u0275\u0275advance(1),l.\u0275\u0275property("goal",w.displayedGoal)}}function oe(F,W){1&F&&(l.\u0275\u0275elementContainerStart(0),l.\u0275\u0275template(1,Oe,10,19,"td",12),l.\u0275\u0275template(2,be,2,11,"td",13),l.\u0275\u0275template(3,Fe,2,12,"td",14),l.\u0275\u0275template(4,Ke,3,15,"td",15),l.\u0275\u0275template(5,He,3,13,"td",16),l.\u0275\u0275template(6,Je,2,12,"td",17),l.\u0275\u0275template(7,j,2,12,"td",18),l.\u0275\u0275template(8,nt,3,12,"td",19),l.\u0275\u0275template(9,Ue,2,11,"td",20),l.\u0275\u0275elementContainerEnd()),2&F&&(l.\u0275\u0275advance(1),l.\u0275\u0275property("ngSwitchCase",0),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngSwitchCase",1),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngSwitchCase",2),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngSwitchCase",3),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngSwitchCase",7),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngSwitchCase",8),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngSwitchCase",9),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngSwitchCase",4),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngSwitchCase",5))}function h(F,W){if(1&F&&(l.\u0275\u0275elementContainerStart(0,10),l.\u0275\u0275template(1,oe,10,9,"ng-container",11),l.\u0275\u0275elementContainerEnd()),2&F){var ee=W.$implicit;l.\u0275\u0275property("ngSwitch",ee.columnId),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",ee.show)}}var g=function(){return[]},u=function(){function F(W,ee,U,Q,B,w,q,le){this.elementRef=W,this.scorecardService=ee,this.featureSwitches=U,this.localizationService=Q,this.scorecardConfigurationService=B,this.capabilityService=w,this.hierarchyService=q,this.goalRowService=le,this.showChildren=!0,this.highlightRow=!1,this.showChildrenChange=new l.EventEmitter,this.tabIndex=0,this.MAX_COLSPAN=r.gT.MaxSubGoals+1,this.ListViewCellMinWidths=r.gT.ListViewCellMinWidths,this.currentValue=null,this.displayedGoal=null,this.indentation=0,this.canSelectGoal=!0,c.fF.assertValue(this.hierarchyService,"No hierarchy service")}return Object.defineProperty(F.prototype,"goal",{set:function(ee){var U,Q,B,w,q;if(this.displayedGoal=ee,this.capabilities=this.capabilityService.getCurrentGoalCapabilities(ee),this.sparklineValues=d.b.buildSparklineValues(ee,this.featureSwitches.featureSwitches.goalsSparklineChangeAggregations).map(function(de){return{value:de.value,timestamp:de.timestamp}}),this.sparklineOptions=d.b.getSparklineOptions(ee,this.scorecardService.getGoalStatuses(ee),this.scorecardConfigurationService.getConfiguration()),this.currentValue=P.r.buildCurrentGoalValue(ee),this.valueChange=P.r.calculateValueChange(ee,this.featureSwitches.featureSwitches.goalsSparklineChangeAggregations),this.hasValueOrTarget=!_.isNil(this.currentValue.value)||!_.isNil(this.currentValue.finalTarget)||!_.isNil(this.currentValue.nextTarget),this.displayedGoal.completionDate){var le=this.localizationService.currentLanguageLocale;this.completionDate=o.E.treatAsLocalDate(new Date(this.displayedGoal.completionDate)).toLocaleDateString(le,{day:"numeric",month:"short",year:"numeric"})}this.hasVisibleChildren=_.some(ee.subGoals,function(de){return!de.isHidden}),this.canSelectGoal=null===(Q=null===(U=this.capabilities.selectGoal)||void 0===U?void 0:U.enabled)||void 0===Q||Q,this.selectGoalDisabledTooltip=null===(B=this.capabilities.selectGoal)||void 0===B?void 0:B.disabledMessageKey,this.showDisabledGoalSelected=null===(q=null===(w=this.capabilities.selectGoal)||void 0===w?void 0:w.disabledReasons)||void 0===q?void 0:q.has("AlreadyLinked")},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"indent",{set:function(ee){this.indentation=P.r.getSafeIndentation(ee)},enumerable:!1,configurable:!0}),F.prototype.ngOnInit=function(){this.isEditMode$=this.scorecardService.isEditMode(),this.bulkDeleteEnabled=this.featureSwitches.featureSwitches.goalsBulkDelete},F.prototype.ngOnChanges=function(W){var ee,U,Q,B;if(W.scorecard){var w=this.scorecardConfigurationService.getConfiguration();!(null===(ee=w?.scorecardDisplayOptions)||void 0===ee)&&ee.isMobileLayout||this.scorecard.activeGoalId===this.displayedGoal.id&&this.focus(),this.isChangeVisible=a._.isColumnVisible(this.scorecard.columnSettings,10)}W.goal&&(this.formatString=W.goal.currentValue.valuesFormatString,this.isCyclePeriodLabelLocalizable=P.r.isCyclePeriodLabelLocalizable(null===(U=this.valueChange)||void 0===U?void 0:U.period)),(W.scorecard||W.goal)&&(this.goalStatuses=this.scorecardService.getGoalStatuses(this.displayedGoal),this.categories=this.scorecardService.getGoalValueCategories(this.displayedGoal),this.isChecked=this.canSelectGoal?null===(B=null===(Q=this.scorecard)||void 0===Q?void 0:Q.selectedGoalIds)||void 0===B?void 0:B[this.displayedGoal.id]:this.showDisabledGoalSelected)},F.prototype.ngAfterViewInit=function(){var W;this.lineChartChangeObserver=p.q.observeAndRemoveFocusableAttributes(null===(W=this.chart)||void 0===W?void 0:W.nativeElement)},F.prototype.ngOnDestroy=function(){var W;null===(W=this.lineChartChangeObserver)||void 0===W||W.disconnect()},F.prototype.onShowChildrenChange=function(){this.showChildrenChange&&this.showChildrenChange.emit(!this.showChildren)},F.prototype.onGoalRowClick=function(W){this.goalRowService.onRowClick(this.displayedGoal,W)},F.prototype.onSelectGoalCheckbox=function(){this.goalRowService.onCheckboxClick(this.displayedGoal)},F.prototype.focus=function(){var W;null===(W=this.elementRef)||void 0===W||W.nativeElement.focus()},F.\u0275fac=function(ee){return new(ee||F)(l.\u0275\u0275directiveInject(l.ElementRef),l.\u0275\u0275directiveInject(y.G),l.\u0275\u0275directiveInject(i.vZ),l.\u0275\u0275directiveInject(C.o),l.\u0275\u0275directiveInject(v.V),l.\u0275\u0275directiveInject(k.Nw),l.\u0275\u0275directiveInject(E.G),l.\u0275\u0275directiveInject(s.D))},F.\u0275cmp=l.\u0275\u0275defineComponent({type:F,selectors:[["","goal-row",""]],viewQuery:function(ee,U){var Q;(1&ee&&l.\u0275\u0275viewQuery(N,5),2&ee)&&(l.\u0275\u0275queryRefresh(Q=l.\u0275\u0275loadQuery())&&(U.chart=Q.first))},hostVars:1,hostBindings:function(ee,U){2&ee&&l.\u0275\u0275attribute("tabindex",U.tabIndex)},inputs:{color:"color",showChildren:"showChildren",scorecard:"scorecard",columnSettings:"columnSettings",highlightRow:"highlightRow",scorecardSelectionMode:"scorecardSelectionMode",goal:"goal",indent:"indent",forceColumnMinWidths:"forceColumnMinWidths"},outputs:{showChildrenChange:"showChildrenChange"},features:[l.\u0275\u0275NgOnChangesFeature],attrs:he,decls:6,vars:10,consts:[[1,"checkmark-td"],["class","select-checkmark",3,"box-checked",4,"ngIf"],["class","select-checkmark",4,"ngIf"],["class","cell cell-indent",4,"ngFor","ngForOf"],[3,"ngSwitch",4,"ngFor","ngForOf"],[1,"select-checkmark"],[3,"checked","onChange"],["name","selectGoalInVisual",1,"select-goal-in-visual-radio",3,"disabled","pbiTooltip","pbiTooltipDisabled","isCompact","checked","change"],[3,"disabled","pbiTooltip","pbiTooltipDisabled","checked","onChange"],[1,"cell","cell-indent"],[3,"ngSwitch"],[4,"ngIf"],["class","cell cell-left-edge",3,"selected-goal","--borderColor","max-width","min-width",4,"ngSwitchCase"],["class","cell cell-owner",3,"max-width","min-width","selected-goal","cell-right-edge","--borderColor","click",4,"ngSwitchCase"],["class","cell cell-progress-icon",3,"max-width","min-width","selected-goal","cell-right-edge","--borderColor","click",4,"ngSwitchCase"],["class","cell cell-value-combined",3,"max-width","min-width","selected-goal","cell-right-edge","--borderColor","click",4,"ngSwitchCase"],["class","cell cell-value",3,"max-width","min-width","selected-goal","cell-right-edge","--borderColor","click",4,"ngSwitchCase"],["class","cell cell-target",3,"max-width","min-width","selected-goal","cell-right-edge","--borderColor","click",4,"ngSwitchCase"],["class","cell cell-milestone",3,"max-width","min-width","selected-goal","cell-right-edge","--borderColor","click",4,"ngSwitchCase"],["class","cell cell-sparkline",3,"max-width","min-width","selected-goal","cell-right-edge","--borderColor","click",4,"ngSwitchCase"],["class","cell cell-due-date",3,"max-width","min-width","selected-goal","cell-right-edge","--borderColor","click",4,"ngSwitchCase"],[1,"cell","cell-left-edge"],[1,"cell-box"],[1,"color-box",3,"click"],[4,"ngIf","ngIfElse"],["noChildren",""],[1,"displayed-name-and-action-wrapper"],[3,"goal","scorecard"],[3,"goal","isEditMode"],[1,"collapse-box","powervisuals-glyph","chevron-down",3,"pbiTooltip","click"],[1,"collapse-box",3,"click"],[1,"cell","cell-owner",3,"click"],[3,"goal"],[1,"cell","cell-progress-icon",3,"click"],[3,"status","goalStatuses"],[1,"cell","cell-value-combined",3,"click"],[3,"goal","showCurrent","showTarget","showMilestone"],[3,"goal",4,"ngIf"],[1,"cell","cell-value",3,"click"],[3,"goal","showCurrent"],[1,"cell","cell-target",3,"click"],[3,"goal","showTarget"],[1,"cell","cell-milestone",3,"click"],[3,"goal","showMilestone"],[1,"cell","cell-sparkline",3,"click"],["chart",""],[3,"goal","sparklineValues"],[1,"cell","cell-due-date",3,"click"]],template:function(ee,U){1&ee&&(l.\u0275\u0275elementStart(0,"td",0),l.\u0275\u0275template(1,pe,2,3,"div",1),l.\u0275\u0275template(2,ce,3,7,"div",2),l.\u0275\u0275template(3,ge,3,6,"div",2),l.\u0275\u0275elementEnd(),l.\u0275\u0275template(4,se,1,0,"td",3),l.\u0275\u0275template(5,h,2,2,"ng-container",4)),2&ee&&(l.\u0275\u0275classProp("show-checkmark",!!U.scorecardSelectionMode)("show-on-hover-only","ctrl"===U.scorecardSelectionMode),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf","ctrl"===U.scorecardSelectionMode),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf","single"===U.scorecardSelectionMode),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf","multiple"===U.scorecardSelectionMode),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngForOf",l.\u0275\u0275pureFunction0(9,g).constructor(U.indentation)),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngForOf",U.columnSettings))},dependencies:[ne.NgForOf,ne.NgIf,ne.NgSwitch,ne.NgSwitchCase,te.v,X.o,m.V,O.k,I.m,H.I,G.E,Z.$,ie.q,ye.t,ae.m,ne.AsyncPipe,J.F],styles:[".cell[_ngcontent-%COMP%]{border:none;box-sizing:border-box}.cell-indent[_ngcontent-%COMP%]{width:36px}.cell-left-edge[_ngcontent-%COMP%]{border-top-left-radius:4px;border-bottom-left-radius:4px}.cell-right-edge[_ngcontent-%COMP%]{border-top-right-radius:4px;border-bottom-right-radius:4px}.cell-box[_ngcontent-%COMP%]{display:flex;height:100%}.cell-box[_ngcontent-%COMP%]   .color-box[_ngcontent-%COMP%]{min-width:6px;width:6px;border-top-left-radius:4px;border-bottom-left-radius:4px}.dialog-config[_ngcontent-%COMP%]     .simpleConfirmationDialog.updateConfirmationDialogPanel{width:580px}.dialog-config[_ngcontent-%COMP%]     .simpleConfirmationDialog.updateConfirmationDialogPanel .mat-mdc-dialog-actions button{border-width:1px;height:32px;padding:0;width:80px;margin-left:8px}.dialog-config[_ngcontent-%COMP%]     .simpleConfirmationDialog.updateConfirmationDialogPanel .mat-mdc-dialog-content{padding-left:8px}[_nghost-%COMP%]   td[_ngcontent-%COMP%]{height:60px}[_nghost-%COMP%]   .checkmark-td[_ngcontent-%COMP%]{width:35px;max-width:35px}[_nghost-%COMP%]   .checkmark-td[_ngcontent-%COMP%]:not(.show-checkmark){width:0px;max-width:0px}[_nghost-%COMP%]   .checkmark-td[_ngcontent-%COMP%]:not(.show-checkmark)   .select-checkmark[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .show-on-hover-only[_ngcontent-%COMP%]   .select-checkmark[_ngcontent-%COMP%]{visibility:hidden}[_nghost-%COMP%]:hover   .show-on-hover-only[_ngcontent-%COMP%]   .select-checkmark[_ngcontent-%COMP%], [_nghost-%COMP%]   .show-on-hover-only[_ngcontent-%COMP%]   .select-checkmark.box-checked[_ngcontent-%COMP%]{visibility:visible}[_nghost-%COMP%]   .select-checkmark[_ngcontent-%COMP%]{margin-right:15px}[_nghost-%COMP%]   .select-checkmark[_ngcontent-%COMP%]     pbi-checkbox{margin-bottom:0}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]{background:var(--scorecard-tableRowBackgroundColor);padding-right:10px;border-top:1px solid var(--fluent-theme-neutral-light-color, #EDEBE9);border-bottom:1px solid var(--fluent-theme-neutral-light-color, #EDEBE9)}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]   .rotate90[_ngcontent-%COMP%]{transform:rotate(-90deg)}[_nghost-%COMP%]   .cell-box[_ngcontent-%COMP%]{font-size:var(--lg-font-size, 16px);font-weight:var(--font-weight-regular, 400)}[_nghost-%COMP%]   .cell-box[_ngcontent-%COMP%]   .collapse-box[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:48px;min-width:48px;background-color:transparent;border:none}[_nghost-%COMP%]   .cell-box[_ngcontent-%COMP%]   .pointer[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   .cell-box[_ngcontent-%COMP%]   .displayed-name-and-action-wrapper[_ngcontent-%COMP%]{display:flex;width:100%}[_nghost-%COMP%]   .cell-box[_ngcontent-%COMP%]   .displayed-name-and-action-wrapper[_ngcontent-%COMP%]   goal-name-cell[_ngcontent-%COMP%]{flex-grow:1;max-height:3.6em;line-height:1.8em}[_nghost-%COMP%]   .cell-box[_ngcontent-%COMP%]   .displayed-name-and-action-wrapper[_ngcontent-%COMP%]   goal-actions-cell[_ngcontent-%COMP%]{margin-right:10px}[_nghost-%COMP%]   .cell-owner[_ngcontent-%COMP%]{width:250px;max-width:300px}[_nghost-%COMP%]   .cell-progress-icon[_ngcontent-%COMP%]{width:220px;max-width:250px;text-align:center;padding-right:20px}[_nghost-%COMP%]   .cell-sparkline[_ngcontent-%COMP%]{width:150px;overflow:hidden}[_nghost-%COMP%]   .cell-due-date[_ngcontent-%COMP%]{width:150px}[_nghost-%COMP%]   .cell-context-menu[_ngcontent-%COMP%]{width:51px;text-align:center}[_nghost-%COMP%]   .cell-context-menu[_ngcontent-%COMP%]   .context-menu-icon[_ngcontent-%COMP%]{color:var(--gray-140, #484644);font-size:16px;cursor:pointer}[_nghost-%COMP%]   .cell-value-combined[_ngcontent-%COMP%]{width:220px}[_nghost-%COMP%]   .cell-value[_ngcontent-%COMP%]{width:92px}[_nghost-%COMP%]   .cell-milestone[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-target[_ngcontent-%COMP%]{width:72px}[_nghost-%COMP%]   .cell-value-combined[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-value[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-milestone[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-target[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{overflow:visible}[_nghost-%COMP%]   .cell-value-combined[_ngcontent-%COMP%]   .mat-icon.glyph-small[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-value[_ngcontent-%COMP%]   .mat-icon.glyph-small[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-milestone[_ngcontent-%COMP%]   .mat-icon.glyph-small[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-target[_ngcontent-%COMP%]   .mat-icon.glyph-small[_ngcontent-%COMP%]{font-size:var(--lg-font-size, 16px);width:var(--lg-font-size, 16px);height:var(--lg-font-size, 16px)}[_nghost-%COMP%]   .cell-value-combined[_ngcontent-%COMP%]   .mat-icon.glyph-mini[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-value[_ngcontent-%COMP%]   .mat-icon.glyph-mini[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-milestone[_ngcontent-%COMP%]   .mat-icon.glyph-mini[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-target[_ngcontent-%COMP%]   .mat-icon.glyph-mini[_ngcontent-%COMP%]{font-size:var(--sm-font-size, 12px);width:var(--sm-font-size, 12px);height:var(--sm-font-size, 12px)}[_nghost-%COMP%]   .cell-value-combined[_ngcontent-%COMP%]   .mat-icon.mat-ligature-font[fontIcon][_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-value[_ngcontent-%COMP%]   .mat-icon.mat-ligature-font[fontIcon][_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-milestone[_ngcontent-%COMP%]   .mat-icon.mat-ligature-font[fontIcon][_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-target[_ngcontent-%COMP%]   .mat-icon.mat-ligature-font[fontIcon][_ngcontent-%COMP%]{overflow:auto}[_nghost-%COMP%]   goal-actions-cell[_ngcontent-%COMP%]{visibility:hidden}[_nghost-%COMP%]:hover   goal-actions-cell[_ngcontent-%COMP%], [_nghost-%COMP%]:focus-within   goal-actions-cell[_ngcontent-%COMP%]{visibility:visible}[_nghost-%COMP%]   .selected-goal.cell[_ngcontent-%COMP%]{border-top:2px solid var(--borderColor);border-bottom:2px solid var(--borderColor)}[_nghost-%COMP%]   .selected-goal.cell-right-edge[_ngcontent-%COMP%]{border-right:2px solid var(--borderColor)}[_nghost-%COMP%]   .cell-right-edge[_ngcontent-%COMP%]{width:2px;border-right:1px solid var(--fluent-theme-neutral-light-color, #EDEBE9)}  .simpleConfirmationDialog.updateConfirmationDialogPanel{width:580px}  .simpleConfirmationDialog.updateConfirmationDialogPanel .mat-mdc-dialog-actions button{border-width:1px;height:32px;padding:0;width:80px;margin-left:8px}  .simpleConfirmationDialog.updateConfirmationDialogPanel .mat-mdc-dialog-content{padding-left:8px}"],changeDetection:0}),F}()},89256:function(lt,Ge,t){"use strict";t.d(Ge,{A:function(){return ye}});var r=t(81337),o=t(14786),P=t(32293),a=t(11962),d=t(46544),p=t(30794),l=t(48787),c=t(70864),y=t(50423),i=t(65181),C=t(77476),v=t(17174),k=t(44408),E=t(44641),s=t(11941),ne=t(39686),te=t(24326),X=t(5432),m=t(23873),O=t(85102);function I(ae,J){if(1&ae&&y.\u0275\u0275element(0,"message-banner",12),2&ae){var N=y.\u0275\u0275nextContext();y.\u0275\u0275property("viewModel",N.messageBanner)}}function H(ae,J){1&ae&&y.\u0275\u0275element(0,"mat-icon",13)}function G(ae,J){1&ae&&y.\u0275\u0275element(0,"mat-icon",14)}function Z(ae,J){1&ae&&y.\u0275\u0275element(0,"pbi-spinner",15)}function ie(ae,J){if(1&ae){var N=y.\u0275\u0275getCurrentView();y.\u0275\u0275elementStart(0,"div",16)(1,"tri-grid",17,18),y.\u0275\u0275listener("rowsChange",function(ce){y.\u0275\u0275restoreView(N);var ge=y.\u0275\u0275nextContext();return y.\u0275\u0275resetView(ge.onRowUpdate(ce))}),y.\u0275\u0275elementEnd()(),y.\u0275\u0275elementStart(3,"section")(4,"div",19),y.\u0275\u0275text(5),y.\u0275\u0275pipe(6,"localize"),y.\u0275\u0275elementEnd(),y.\u0275\u0275elementStart(7,"pbi-radio-group",20),y.\u0275\u0275listener("ngModelChange",function(ce){y.\u0275\u0275restoreView(N);var ge=y.\u0275\u0275nextContext();return y.\u0275\u0275resetView(ge.showFinalTarget=ce)}),y.\u0275\u0275elementStart(8,"pbi-radio-button",21),y.\u0275\u0275text(9),y.\u0275\u0275pipe(10,"localize"),y.\u0275\u0275elementEnd(),y.\u0275\u0275elementStart(11,"pbi-radio-button",21),y.\u0275\u0275text(12),y.\u0275\u0275pipe(13,"localize"),y.\u0275\u0275elementEnd()()()}if(2&ae){var he=y.\u0275\u0275nextContext();y.\u0275\u0275advance(1),y.\u0275\u0275property("rows",he.gridData)("columns",he.columnsConfig),y.\u0275\u0275advance(4),y.\u0275\u0275textInterpolate(y.\u0275\u0275pipeBind1(6,8,"Metrics_Targets_Editor_Select_Target")),y.\u0275\u0275advance(2),y.\u0275\u0275property("ngModel",he.showFinalTarget),y.\u0275\u0275advance(1),y.\u0275\u0275property("value",!1),y.\u0275\u0275advance(1),y.\u0275\u0275textInterpolate(y.\u0275\u0275pipeBind1(10,10,"Target_Next")),y.\u0275\u0275advance(2),y.\u0275\u0275property("value",!0),y.\u0275\u0275advance(1),y.\u0275\u0275textInterpolate(y.\u0275\u0275pipeBind1(13,12,"Target_Final"))}}var ye=function(){function ae(J,N,he,pe,ce){this.dialogRef=J,this.localizationService=he,this.telemetryService=pe,this.changeDetector=ce,this.isFullScreen=!1,this.onDestroy$=new p.xQ,this.resultType=2,this.TargetColumnIndex=0,this.DueDateColumnIndex=1,this.telemetryService.logEvent(o.dT),this.goal$=N.goal$,this.goalTargets$=N.goalTargets$,this.onDoneCallback=N.onDoneCallback,this.columnsConfig=[{name:this.localizationService.get("Target"),type:"Number",width:ae.GridColumnWidthInPx},{name:this.localizationService.get("DueDate"),type:"Date",width:ae.GridColumnWidthInPx}],this.DuplicateTargetDates={bannerType:1,iconName:ae.ErrorIcon,message:this.localizationService.get("Metrics_Targets_Editor_Error_Duplicate_Target_Dates")},this.MissingTargetDate={bannerType:1,iconName:ae.ErrorIcon,message:this.localizationService.get("Metrics_Targets_Editor_Error_Missing_Target_Date")},this.MissingTargetValue={bannerType:1,iconName:ae.ErrorIcon,message:this.localizationService.get("Metrics_Targets_Editor_Error_Missing_Target_Value")}}return ae.prototype.ngOnInit=function(){var J=this;this.goal$.pipe((0,l.q)(1)).subscribe(function(N){var he,pe;J.columnsConfig=[(0,r.pi)((0,r.pi)({},J.columnsConfig[J.TargetColumnIndex]),{formatString:N.valuesFormatString}),(0,r.pi)((0,r.pi)({},J.columnsConfig[J.DueDateColumnIndex]),{formatString:N.datesFormatString})],J.showFinalTarget=null!==(pe=null===(he=N.metadata)||void 0===he?void 0:he.showFinalTarget)&&void 0!==pe?pe:!N.targetConnection}),this.goalTargets$.pipe((0,l.q)(1)).subscribe(function(N){J.gridData=N.map(function(he){return[he.target,new Date(he.timestamp)]}),J.changeDetector.markForCheck()})},ae.prototype.ngAfterViewInit=function(){var J=this;this.columnsConfig=_.map(this.columnsConfig,function(N){return N.template=J.formatSwitchCellTemplate.formatSwitchCell,N})},ae.prototype.ngOnDestroy=function(){this.onDestroy$.next(),this.onDestroy$.complete()},ae.prototype.onRowUpdate=function(J){this.gridData=J},ae.prototype.toggleFullScreen=function(){this.isFullScreen?(this.dialogRef.updateSize("70%","80%"),this.isFullScreen=!1):(this.dialogRef.updateSize("100%","100%"),this.isFullScreen=!0)},ae.prototype.close=function(){this.telemetryService.logEvent(o.JP),this.dialogRef.close()},ae.prototype.onDone=function(){return(0,r.mG)(this,void 0,void 0,function(){var J,N,he,pe,ce;return(0,r.Jh)(this,function(ge){if(this.gridData=this.gridEditor.flushPendingChanges(),(J=this.gridData.filter(function(se){return!(_.isNil(se[0])&&_.isNil(se[1]))}).map(function(se){return{timestamp:_.isNil(se[1])?void 0:se[1],target:_.isNil(se[0])?void 0:se[0]}})).find(function(se){return _.isNil(se.timestamp)&&!_.isNil(se.target)}))return this.messageBanner=this.MissingTargetDate,[2];if(J.find(function(se){return!_.isNil(se.timestamp)&&_.isNil(se.target)}))return this.messageBanner=this.MissingTargetValue,[2];for(N=new Set,he=0,pe=J;he<pe.length;he++){if(N.has((ce=pe[he].timestamp).getTime()))return this.messageBanner=this.DuplicateTargetDates,[2];N.add(ce.getTime())}return this.onDoneCallback(J.map(function(se){return{timestamp:se.timestamp.toISOString(),target:se.target}}),this.showFinalTarget,this.columnsConfig[this.TargetColumnIndex].formatString),this.telemetryService.logEvent(o.pN),this.dialogRef.close(),[2]})})},ae.prototype.valueFormatStringChanged=function(J){this.columnsConfig=[(0,r.pi)((0,r.pi)({},this.columnsConfig[this.TargetColumnIndex]),{formatString:J}),this.columnsConfig[1]]},ae.ErrorIcon="pbi-glyph-blocked2",ae.GridColumnWidthInPx=200,ae.\u0275fac=function(N){return new(N||ae)(y.\u0275\u0275directiveInject(P.so),y.\u0275\u0275directiveInject(P.WI),y.\u0275\u0275directiveInject(i.o),y.\u0275\u0275directiveInject(d.y0),y.\u0275\u0275directiveInject(y.ChangeDetectorRef))},ae.\u0275cmp=y.\u0275\u0275defineComponent({type:ae,selectors:[["goal-targets-editor"]],viewQuery:function(N,he){if(1&N&&(y.\u0275\u0275viewQuery(a.oY,5),y.\u0275\u0275viewQuery(c.F,5)),2&N){var pe=void 0;y.\u0275\u0275queryRefresh(pe=y.\u0275\u0275loadQuery())&&(he.gridEditor=pe.first),y.\u0275\u0275queryRefresh(pe=y.\u0275\u0275loadQuery())&&(he.formatSwitchCellTemplate=pe.first)}},decls:27,vars:29,consts:[[3,"viewModel",4,"ngIf"],[1,"title"],["mat-icon-button","",1,"pbi-icon-button",3,"click"],["class","glyph-small","fontIcon","pbi-glyph-fullscreen",4,"ngIf"],["class","glyph-small","fontIcon","pbi-glyph-fullscreenexit",4,"ngIf"],[1,"targets-editor-value-formatting-box"],[1,"goals-value-formatting",3,"formatString","dataType","formatStringChange"],["class","pbi-spinner-large",4,"ngIf","ngIfElse"],["showGrid",""],[1,"actions"],[1,"pbi-fluent-button","primary",3,"disabled","click"],[1,"pbi-fluent-button","secondary",3,"click"],[3,"viewModel"],["fontIcon","pbi-glyph-fullscreen",1,"glyph-small"],["fontIcon","pbi-glyph-fullscreenexit",1,"glyph-small"],[1,"pbi-spinner-large"],[1,"grid-container"],[3,"rows","columns","rowsChange"],["gridEditor",""],[1,"displayed-target-title"],[1,"displayed-target-options",3,"ngModel","ngModelChange"],[3,"value"]],template:function(N,he){if(1&N&&(y.\u0275\u0275template(0,I,1,1,"message-banner",0),y.\u0275\u0275elementStart(1,"header")(2,"div",1),y.\u0275\u0275text(3),y.\u0275\u0275pipe(4,"localize"),y.\u0275\u0275elementEnd(),y.\u0275\u0275elementStart(5,"button",2),y.\u0275\u0275listener("click",function(){return he.toggleFullScreen()}),y.\u0275\u0275pipe(6,"localize"),y.\u0275\u0275template(7,H,1,0,"mat-icon",3),y.\u0275\u0275template(8,G,1,0,"mat-icon",4),y.\u0275\u0275elementEnd()(),y.\u0275\u0275elementStart(9,"section"),y.\u0275\u0275text(10),y.\u0275\u0275pipe(11,"localize"),y.\u0275\u0275elementEnd(),y.\u0275\u0275elementStart(12,"div",5)(13,"value-formatting",6),y.\u0275\u0275listener("formatStringChange",function(ge){return he.valueFormatStringChanged(ge)}),y.\u0275\u0275elementEnd()(),y.\u0275\u0275template(14,Z,1,0,"pbi-spinner",7),y.\u0275\u0275template(15,ie,14,14,"ng-template",null,8,y.\u0275\u0275templateRefExtractor),y.\u0275\u0275element(17,"format-switch-cell-template"),y.\u0275\u0275elementStart(18,"div",9)(19,"button",10),y.\u0275\u0275listener("click",function(){return he.onDone()}),y.\u0275\u0275pipe(20,"localize"),y.\u0275\u0275text(21),y.\u0275\u0275pipe(22,"localize"),y.\u0275\u0275elementEnd(),y.\u0275\u0275elementStart(23,"button",11),y.\u0275\u0275listener("click",function(){return he.close()}),y.\u0275\u0275pipe(24,"localize"),y.\u0275\u0275text(25),y.\u0275\u0275pipe(26,"localize"),y.\u0275\u0275elementEnd()()),2&N){var pe=y.\u0275\u0275reference(16);y.\u0275\u0275property("ngIf",he.messageBanner),y.\u0275\u0275advance(3),y.\u0275\u0275textInterpolate(y.\u0275\u0275pipeBind1(4,15,"Metrics_Targets_Editor_Title")),y.\u0275\u0275advance(2),y.\u0275\u0275attribute("aria-label",y.\u0275\u0275pipeBind1(6,17,"Fullscreen_Toggle")),y.\u0275\u0275advance(2),y.\u0275\u0275property("ngIf",!he.isFullScreen),y.\u0275\u0275advance(1),y.\u0275\u0275property("ngIf",he.isFullScreen),y.\u0275\u0275advance(2),y.\u0275\u0275textInterpolate1(" ",y.\u0275\u0275pipeBind1(11,19,"Metrics_Targets_Editor_Description"),"\n"),y.\u0275\u0275advance(3),y.\u0275\u0275property("formatString",he.columnsConfig[0].formatString)("dataType",he.resultType),y.\u0275\u0275advance(1),y.\u0275\u0275property("ngIf",!he.gridData)("ngIfElse",pe),y.\u0275\u0275advance(5),y.\u0275\u0275property("disabled",!he.gridData),y.\u0275\u0275attribute("aria-label",y.\u0275\u0275pipeBind1(20,21,"Done_ButtonText")),y.\u0275\u0275advance(2),y.\u0275\u0275textInterpolate1(" ",y.\u0275\u0275pipeBind1(22,23,"Done_ButtonText")," "),y.\u0275\u0275advance(2),y.\u0275\u0275attribute("aria-label",y.\u0275\u0275pipeBind1(24,25,"PBI_Button_Label_Cancel")),y.\u0275\u0275advance(2),y.\u0275\u0275textInterpolate1(" ",y.\u0275\u0275pipeBind1(26,27,"PBI_Button_Label_Cancel")," ")}},dependencies:[C.NgIf,v.JJ,v.On,k.Hw,E.A,s.o,ne.d,te.k,X.d,m.o,c.F,O.F],styles:['[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}[_nghost-%COMP%]     .targets-editor-value-formatting-box mat-select{height:28px;border:1px solid var(--gray-110, #8A8886);border-radius:2px}[_nghost-%COMP%]     .targets-editor-value-formatting-box mat-select .mat-select-value{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);color:var(--fluent-theme-neutral-primary-color, #323130);line-height:20px}[_nghost-%COMP%]     .targets-editor-value-formatting-box mat-select .mat-select-arrow{color:var(--gray-140, #484644);padding-right:14px}[_nghost-%COMP%]     .targets-editor-value-formatting-box num-up-down .inputRange{height:28px;border:1px solid var(--gray-110, #8A8886);border-radius:2px}[_nghost-%COMP%]     .targets-editor-value-formatting-box num-up-down .inputRange .inputUpDown{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);color:var(--fluent-theme-neutral-primary-color, #323130);line-height:20px}[_nghost-%COMP%]     .targets-editor-value-formatting-box num-up-down label{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);line-height:20px}[_nghost-%COMP%]     .targets-editor-value-formatting-box .valueFormatterToggleButtonsGroup .btn{background-color:transparent;border:none}[_nghost-%COMP%]     .targets-editor-value-formatting-box .valueFormatterToggleButtonsGroup .btn:hover{background-color:var(--fluent-theme-neutral-quarter-alt-color, #E1DFDD)}header[_ngcontent-%COMP%]{color:var(--fluent-theme-neutral-dark-color, #201F1E);display:flex;flex-direction:row;align-items:center;justify-content:space-between}header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--xlg-font-size, 20px);font-weight:var(--font-weight-semi-bold, 600)}header[_ngcontent-%COMP%], section[_ngcontent-%COMP%], tri-grid[_ngcontent-%COMP%], .targets-editor-value-formatting-box[_ngcontent-%COMP%], .displayed-target-title[_ngcontent-%COMP%]{margin-bottom:16px}.actions[_ngcontent-%COMP%]{display:flex;justify-content:end;gap:8px}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   pbi-spinner[_ngcontent-%COMP%]{margin:5px 5px 0 0}.pbi-spinner-large[_ngcontent-%COMP%]{height:100%}.displayed-target-title[_ngcontent-%COMP%]{font-size:var(--md-font-size, 14px)}.displayed-target-options[_ngcontent-%COMP%]{display:flex;gap:36px}.grid-container[_ngcontent-%COMP%]{flex-grow:1}'],changeDetection:0}),ae}()},25689:function(lt,Ge,t){"use strict";t.d(Ge,{H:function(){return Ue}});var r=t(125),o=t(3204),P=t(62831),a=t(57535),d=t(60166),p=t(62458),l=t(50423),c=t(76746),y=t(9380),i=t(65181),C=t(77476),v=t(59968),k=t(44408),E=t(55710),s=t(36858),ne=t(74913),te=t(223),X=t(87758),m=t(42989),O=t(77971),I=t(85102),H=t(90127),G=t(82621),Z=t(38360),ie=["chart"];function ye(oe,h){if(1&oe&&(l.\u0275\u0275elementStart(0,"div",25),l.\u0275\u0275text(1),l.\u0275\u0275elementEnd()),2&oe){var g=l.\u0275\u0275nextContext();l.\u0275\u0275property("pbiTooltip",null==g.goal?null:g.goal.scorecardName),l.\u0275\u0275advance(1),l.\u0275\u0275textInterpolate1(" ",null==g.goal?null:g.goal.scorecardName," ")}}function ae(oe,h){1&oe&&l.\u0275\u0275elementContainer(0)}function J(oe,h){if(1&oe&&(l.\u0275\u0275elementStart(0,"span",31)(1,"span",32),l.\u0275\u0275text(2),l.\u0275\u0275pipe(3,"formatGoalValue"),l.\u0275\u0275elementEnd()()),2&oe){var g=l.\u0275\u0275nextContext(3);l.\u0275\u0275property("localize",g.periodLocalizeString),l.\u0275\u0275advance(2),l.\u0275\u0275textInterpolate(g.valueChange.isPercentage?g.valueChange.changeAmount+"%":l.\u0275\u0275pipeBind3(3,2,g.valueChange.changeAmount,g.categories,g.goal.valuesFormatString))}}function N(oe,h){if(1&oe&&(l.\u0275\u0275elementStart(0,"span",31)(1,"span",32),l.\u0275\u0275text(2),l.\u0275\u0275pipe(3,"formatGoalValue"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(4,"span",33),l.\u0275\u0275text(5),l.\u0275\u0275elementEnd()()),2&oe){var g=l.\u0275\u0275nextContext(3);l.\u0275\u0275property("localize",g.periodLocalizeString),l.\u0275\u0275advance(2),l.\u0275\u0275textInterpolate(g.valueChange.isPercentage?g.valueChange.changeAmount+"%":l.\u0275\u0275pipeBind3(3,3,g.valueChange.changeAmount,g.categories,g.goal.valuesFormatString)),l.\u0275\u0275advance(3),l.\u0275\u0275textInterpolate(g.valueChange.period)}}function he(oe,h){if(1&oe&&(l.\u0275\u0275elementStart(0,"div",28)(1,"span"),l.\u0275\u0275text(2),l.\u0275\u0275elementEnd(),l.\u0275\u0275template(3,J,4,6,"span",29),l.\u0275\u0275template(4,N,6,7,"ng-template",null,30,l.\u0275\u0275templateRefExtractor),l.\u0275\u0275elementStart(6,"span"),l.\u0275\u0275text(7,")"),l.\u0275\u0275elementEnd()()),2&oe){var g=l.\u0275\u0275reference(5),u=l.\u0275\u0275nextContext(2);l.\u0275\u0275advance(2),l.\u0275\u0275textInterpolate1("(",u.valueChange.isIncrease?"\u2191":"\u2193",""),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",u.periodLocalizeString&&!u.periodLocalizeString.endsWith("Custom"))("ngIfElse",g)}}function pe(oe,h){if(1&oe&&(l.\u0275\u0275elementContainerStart(0),l.\u0275\u0275template(1,ae,1,0,"ng-container",26),l.\u0275\u0275template(2,he,8,3,"div",27),l.\u0275\u0275elementContainerEnd()),2&oe){var g=l.\u0275\u0275nextContext(),u=l.\u0275\u0275reference(22);l.\u0275\u0275advance(1),l.\u0275\u0275property("ngTemplateOutlet",u),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",g.settings.showGoalVisualGrowth&&!(g.supportCategoricalValues&&null!=g.goal&&g.goal.valuesCategoryId)&&g.hasData&&g.valueChange)}}var ce=function(h){return{userEmail:h}};function ge(oe,h){if(1&oe&&l.\u0275\u0275element(0,"user-details-host",37),2&oe){var u,g=l.\u0275\u0275nextContext(2);l.\u0275\u0275property("details",l.\u0275\u0275pureFunction1(4,ce,g.owners[0]))("photoSize",null!==(u=g.settings.goalVisualOwnerPhotoSize)&&void 0!==u?u:20)("showUserInfo",g.showOwnerName)("showTooltip",!0)}}function se(oe,h){if(1&oe&&l.\u0275\u0275element(0,"avatar-row",38),2&oe){var g=l.\u0275\u0275nextContext(2);l.\u0275\u0275property("emails",g.owners)("numAvatarsToShow",g.OwnersToShow)}}function De(oe,h){if(1&oe&&(l.\u0275\u0275elementStart(0,"div",34),l.\u0275\u0275template(1,ge,1,6,"user-details-host",35),l.\u0275\u0275template(2,se,1,2,"ng-template",null,36,l.\u0275\u0275templateRefExtractor),l.\u0275\u0275elementEnd()),2&oe){var g=l.\u0275\u0275reference(3),u=l.\u0275\u0275nextContext();l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",1===u.owners.length)("ngIfElse",g)}}function fe(oe,h){if(1&oe&&(l.\u0275\u0275elementStart(0,"h1",39),l.\u0275\u0275text(1),l.\u0275\u0275elementEnd()),2&oe){var g=l.\u0275\u0275nextContext();l.\u0275\u0275property("pbiTooltip",null==g.goal?null:g.goal.name),l.\u0275\u0275advance(1),l.\u0275\u0275textInterpolate1(" ",null==g.goal?null:g.goal.name," ")}}function Oe(oe,h){if(1&oe&&(l.\u0275\u0275elementStart(0,"section",41)(1,"div",42,43),l.\u0275\u0275element(3,"goal-history-chart",44),l.\u0275\u0275elementEnd()()),2&oe){var u,g=l.\u0275\u0275nextContext(2);l.\u0275\u0275advance(3),l.\u0275\u0275property("values",g.goal.goalValues)("formatString",g.goal.valuesFormatString)("color",null!==(u=null==g.settings.theme?null:g.settings.theme.goalVisualCurrentLineColor)&&void 0!==u?u:g.statusColor)("targetLineColor",null==g.settings.theme?null:g.settings.theme.goalVisualTargetLineColor)("showGoalTargets",g.supportMultipleTargets&&g.settings.showGoalVisualTargetLine)("legend",g.supportMultipleTargets&&g.settings.showGoalVisualLegends?"Visible":"None")("showZoom",!1)("shadeCurrentArea",g.shadeCurrentArea)("type","ComboChart")("axesOptions",g.axesOptions)}}function be(oe,h){if(1&oe&&(l.\u0275\u0275elementContainerStart(0),l.\u0275\u0275template(1,Oe,4,10,"section",40),l.\u0275\u0275elementContainerEnd()),2&oe){var u,g=l.\u0275\u0275nextContext();l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",null===(u=g.settings.showVisualization)||void 0===u||u)}}function Fe(oe,h){if(1&oe&&l.\u0275\u0275element(0,"status-icon",45),2&oe){var g=l.\u0275\u0275nextContext();l.\u0275\u0275property("status",null==g.currentValue?null:g.currentValue.status)("goalStatuses",g.goal.goalStatuses)}}function ze(oe,h){if(1&oe&&(l.\u0275\u0275elementContainerStart(0),l.\u0275\u0275element(1,"label",46),l.\u0275\u0275elementStart(2,"span"),l.\u0275\u0275text(3),l.\u0275\u0275pipe(4,"formatDate"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementContainerEnd()),2&oe){var g=l.\u0275\u0275nextContext();l.\u0275\u0275advance(3),l.\u0275\u0275textInterpolate1(" ",l.\u0275\u0275pipeBind2(4,1,g.goal.completionDate,g.locale),"")}}function Ke(oe,h){if(1&oe&&(l.\u0275\u0275elementStart(0,"span",50),l.\u0275\u0275text(1),l.\u0275\u0275elementEnd()),2&oe){var g=l.\u0275\u0275nextContext(2);l.\u0275\u0275advance(1),l.\u0275\u0275textInterpolate1(" ",g.goal.notesCount," ")}}function je(oe,h){if(1&oe){var g=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"button",47),l.\u0275\u0275listener("click",function(){l.\u0275\u0275restoreView(g);var W=l.\u0275\u0275nextContext();return l.\u0275\u0275resetView(W.openNotes())}),l.\u0275\u0275pipe(1,"localize"),l.\u0275\u0275element(2,"tri-svg-icon",48),l.\u0275\u0275template(3,Ke,2,1,"span",49),l.\u0275\u0275elementEnd()}if(2&oe){var u=l.\u0275\u0275nextContext();l.\u0275\u0275property("pbiTooltip",l.\u0275\u0275pipeBind1(1,2,"Notes")),l.\u0275\u0275advance(3),l.\u0275\u0275property("ngIf",u.goal.notesCount>0)}}function He(oe,h){1&oe&&l.\u0275\u0275elementContainer(0)}function Je(oe,h){if(1&oe&&(l.\u0275\u0275elementStart(0,"div",51),l.\u0275\u0275template(1,He,1,0,"ng-container",26),l.\u0275\u0275elementEnd()),2&oe){l.\u0275\u0275nextContext();var g=l.\u0275\u0275reference(22);l.\u0275\u0275advance(1),l.\u0275\u0275property("ngTemplateOutlet",g)}}function j(oe,h){if(1&oe&&(l.\u0275\u0275elementStart(0,"div",52)(1,"div",53)(2,"div",54),l.\u0275\u0275pipe(3,"formatValue"),l.\u0275\u0275text(4),l.\u0275\u0275pipe(5,"formatValue"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(6,"div",55),l.\u0275\u0275pipe(7,"formatValue"),l.\u0275\u0275text(8),l.\u0275\u0275pipe(9,"formatValue"),l.\u0275\u0275elementEnd()()()),2&oe){var g=l.\u0275\u0275nextContext();l.\u0275\u0275advance(2),l.\u0275\u0275property("pbiTooltip",l.\u0275\u0275pipeBind3(3,4,g.currentValue.value,g.goal.valuesFormatString,!1)),l.\u0275\u0275advance(2),l.\u0275\u0275textInterpolate1(" ",l.\u0275\u0275pipeBind2(5,8,g.currentValue.value,g.goal.valuesFormatString)," "),l.\u0275\u0275advance(2),l.\u0275\u0275property("pbiTooltip",l.\u0275\u0275pipeBind3(7,11,g.currentValue.target,g.goal.valuesFormatString,!1)),l.\u0275\u0275advance(2),l.\u0275\u0275textInterpolate1(" /",l.\u0275\u0275pipeBind2(9,15,g.currentValue.target,g.goal.valuesFormatString)," ")}}function nt(oe,h){if(1&oe){var g=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementContainerStart(0),l.\u0275\u0275elementStart(1,"button",21),l.\u0275\u0275listener("click",function(){l.\u0275\u0275restoreView(g);var F=l.\u0275\u0275nextContext();return l.\u0275\u0275resetView(F.onEdit())}),l.\u0275\u0275element(2,"tri-svg-icon",22)(3,"span",56),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementContainerEnd()}2&oe&&(l.\u0275\u0275advance(2),l.\u0275\u0275property("name","edit_20_regular"))}var Ue=function(){function oe(h,g,u,F,W){this.appSettings=h,this.featureSwitches=g,this.localizationService=u,this.cd=F,this.scorecardHost=W,this.currentValue=null,this.showGrowth=!1,this.showOwnerName=!1,this.shadeCurrentArea=!0,this.owners=[],this.OwnersToShow=4,this.supportCategoricalValues=this.featureSwitches.featureSwitches.goalsCategoricalValues,this.supportMultipleTargets=this.featureSwitches.featureSwitches.powerBIGoalsMultipleTargets}return Object.defineProperty(oe.prototype,"scorecardRoutePath",{get:function(){return"/groups/".concat(this.goal.groupId||"me","/scorecards/").concat(this.goal.scorecardId).toLowerCase()},enumerable:!1,configurable:!0}),Object.defineProperty(oe.prototype,"inServiceUrl",{get:function(){return"".concat(this.appSettings.baseUrl).concat(this.scorecardRoutePath,"?goal=").concat(this.goal.id)},enumerable:!1,configurable:!0}),oe.prototype.ngOnInit=function(){var g,u,F,h=this;p.fF.assertValue(this.goal,"Missing goal"),this.setDisplayedVals(),this.locale=this.localizationService.currentLanguageLocale,this.supportCategoricalValues&&null!==(g=this.goal)&&void 0!==g&&g.valuesCategoryId&&(this.categories=null!==(F=null===(u=_.find(this.goal.goalValueCategories,function(W){return W.id===h.goal.valuesCategoryId}))||void 0===u?void 0:u.categories)&&void 0!==F?F:[])},oe.prototype.ngOnChanges=function(h){var g,u,F,W,ee,U,Q,B;if(h.goal&&(this.setDisplayedVals(),this.supportCategoricalValues&&h.goal.currentValue.valuesCategoryId&&(this.categories=null!==(F=null===(u=_.find(this.goal.goalValueCategories,function(q){return q.id===h.goal.currentValue.valuesCategoryId}))||void 0===u?void 0:u.categories)&&void 0!==F?F:[]),this.owners=this.goal.owner?[this.goal.owner]:[],this.goal.additionalOwners&&(g=this.owners).push.apply(g,this.goal.additionalOwners.map(function(q){return q.userPrincipalName}))),h.settings){this.cd.markForCheck();var w=h.settings.currentValue;this.isEditMode=!w?.disableEdit,this.axesOptions={xAxis:{show:null===(W=w?.showGoalVisualXAxis)||void 0===W||W,fontProperties:null===(ee=w?.theme)||void 0===ee?void 0:ee.goalVisualXAxis},yAxis:{show:null===(U=w?.showGoalVisualYAxis)||void 0===U||U,fontProperties:null===(Q=w?.theme)||void 0===Q?void 0:Q.goalVisualYAxis}},this.shadeCurrentArea=null===(B=w?.currentAreaShaded)||void 0===B||B}},oe.prototype.ngAfterViewInit=function(){var h;this.lineChartChangeObserver=P.q.observeAndRemoveFocusableAttributes(null===(h=this.chart)||void 0===h?void 0:h.nativeElement)},oe.prototype.ngOnDestroy=function(){var h;null===(h=this.lineChartChangeObserver)||void 0===h||h.disconnect()},oe.prototype.openNotes=function(){this.scorecardHost.openNotes(this.goal)},oe.prototype.onEdit=function(){this.scorecardHost.editGoal()},oe.prototype.onOpenInService=function(){this.scorecardHost.openLink(this.inServiceUrl)},oe.prototype.setDisplayedVals=function(){var h;this.currentValue=r.r.buildCurrentGoalValue(this.goal),this.valueChange=r.r.calculateValueChange(this.goal,this.featureSwitches.featureSwitches.goalsSparklineChangeAggregations),this.periodLocalizeString=_.isNil(null===(h=this.valueChange)||void 0===h?void 0:h.period)?void 0:"PercentGrowth_"+this.getPeriodSuffix(this.valueChange.period);var u=a.p.getGoalStatus(this.currentValue.status,this.goal.goalStatuses);this.statusColor=a.p.getGoalSparklineColor(u.color),this.sparklineValues=o.b.buildSparklineValues(this.goal,this.featureSwitches.featureSwitches.goalsSparklineChangeAggregations),this.hasData=_.some(this.sparklineValues)},oe.prototype.getPeriodSuffix=function(h){switch(h){case"Period_DoD":case"Period_MoM":case"Period_QoQ":case"Period_WoW":case"Period_YoY":return h;default:return"Period_Custom"}},oe.componentId="GoalTileComponentId",oe.\u0275fac=function(g){return new(g||oe)(l.\u0275\u0275directiveInject(c.de),l.\u0275\u0275directiveInject(y.vZ),l.\u0275\u0275directiveInject(i.o),l.\u0275\u0275directiveInject(l.ChangeDetectorRef),l.\u0275\u0275directiveInject(d.M,8))},oe.\u0275cmp=l.\u0275\u0275defineComponent({type:oe,selectors:[["goal-tile"]],viewQuery:function(g,u){var F;(1&g&&l.\u0275\u0275viewQuery(ie,5),2&g)&&(l.\u0275\u0275queryRefresh(F=l.\u0275\u0275loadQuery())&&(u.chart=F.first))},inputs:{goal:"goal",settings:"settings"},features:[l.\u0275\u0275NgOnChangesFeature],decls:32,vars:17,consts:[[1,"goal-tile"],[1,"header-container"],["class","scorecard-name",3,"pbiTooltip",4,"ngIf"],[1,"details"],[1,"value-and-growth"],[4,"ngIf"],["class","owners",4,"ngIf"],["class","goal-name",3,"pbiTooltip",4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"footer-container"],[1,"status-and-date"],[3,"status","goalStatuses",4,"ngIf"],[1,"target-date"],[1,"notes-and-menu"],["mat-icon-button","",3,"pbiTooltip","click",4,"ngIf"],["mat-icon-button","",3,"matMenuTriggerFor"],["fontIcon","pbi-glyph-more",1,"glyph-small"],["noChart",""],["valueAndTarget",""],[1,"context-menu-dropdown",3,"xPosition"],["contextMenu","matMenu"],["mat-menu-item","",1,"goal-tile-context-menu-item",3,"click"],["tri-svg-icon-16","",3,"name"],["localize","OpenScorecard"],["localize","OpenNotes"],[1,"scorecard-name",3,"pbiTooltip"],[4,"ngTemplateOutlet"],["class","growth",4,"ngIf"],[1,"growth"],["class","period","localize-fragments","",3,"localize",4,"ngIf","ngIfElse"],["customPeriod",""],["localize-fragments","",1,"period",3,"localize"],["fragment-index","0"],["fragment-index","1"],[1,"owners"],[3,"details","photoSize","showUserInfo","showTooltip",4,"ngIf","ngIfElse"],["hasMultipleOwners",""],[3,"details","photoSize","showUserInfo","showTooltip"],[3,"emails","numAvatarsToShow"],[1,"goal-name",3,"pbiTooltip"],["class","visual-container",4,"ngIf"],[1,"visual-container"],[1,"visual"],["chart",""],[3,"values","formatString","color","targetLineColor","showGoalTargets","legend","showZoom","shadeCurrentArea","type","axesOptions"],[3,"status","goalStatuses"],["localize","Due"],["mat-icon-button","",3,"pbiTooltip","click"],["tri-svg-icon-16","","name","comment_16_regular",1,"tri-svg"],["class","notes-count",4,"ngIf"],[1,"notes-count"],[1,"no-chart"],[1,"value-wrapper"],[1,"value-target"],[1,"value",3,"pbiTooltip"],[1,"target",3,"pbiTooltip"],["localize","Edit_Metric"]],template:function(g,u){if(1&g&&(l.\u0275\u0275elementStart(0,"section",0)(1,"section",1),l.\u0275\u0275template(2,ye,2,2,"div",2),l.\u0275\u0275elementStart(3,"div",3)(4,"div",4),l.\u0275\u0275template(5,pe,3,2,"ng-container",5),l.\u0275\u0275elementEnd(),l.\u0275\u0275template(6,De,4,2,"div",6),l.\u0275\u0275elementEnd(),l.\u0275\u0275template(7,fe,2,2,"h1",7),l.\u0275\u0275elementEnd(),l.\u0275\u0275template(8,be,2,1,"ng-container",8),l.\u0275\u0275elementStart(9,"section",9)(10,"div",10),l.\u0275\u0275template(11,Fe,1,2,"status-icon",11),l.\u0275\u0275elementStart(12,"div",12),l.\u0275\u0275template(13,ze,5,4,"ng-container",5),l.\u0275\u0275elementEnd()(),l.\u0275\u0275elementStart(14,"div",13),l.\u0275\u0275template(15,je,4,4,"button",14),l.\u0275\u0275elementStart(16,"button",15),l.\u0275\u0275pipe(17,"localize"),l.\u0275\u0275element(18,"mat-icon",16),l.\u0275\u0275elementEnd()()(),l.\u0275\u0275template(19,Je,2,1,"ng-template",null,17,l.\u0275\u0275templateRefExtractor),l.\u0275\u0275template(21,j,10,18,"ng-template",null,18,l.\u0275\u0275templateRefExtractor),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(23,"mat-menu",19,20),l.\u0275\u0275template(25,nt,4,1,"ng-container",5),l.\u0275\u0275elementStart(26,"button",21),l.\u0275\u0275listener("click",function(){return u.onOpenInService()}),l.\u0275\u0275element(27,"tri-svg-icon",22)(28,"span",23),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(29,"button",21),l.\u0275\u0275listener("click",function(){return u.openNotes()}),l.\u0275\u0275element(30,"tri-svg-icon",22)(31,"span",24),l.\u0275\u0275elementEnd()()),2&g){var F=l.\u0275\u0275reference(20),W=l.\u0275\u0275reference(24);l.\u0275\u0275advance(2),l.\u0275\u0275property("ngIf",u.settings.showGoalVisualScorecardName),l.\u0275\u0275advance(3),l.\u0275\u0275property("ngIf",u.hasData),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",u.settings.showGoalVisualOwner&&u.owners.length>0),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",u.settings.showGoalVisualGoalName),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",u.hasData)("ngIfElse",F),l.\u0275\u0275advance(3),l.\u0275\u0275property("ngIf",u.settings.showGoalVisualStatus),l.\u0275\u0275advance(2),l.\u0275\u0275property("ngIf",u.settings.showGoalVisualDueDate&&(null==u.goal?null:u.goal.completionDate)),l.\u0275\u0275advance(2),l.\u0275\u0275property("ngIf",u.settings.showGoalVisualNotes),l.\u0275\u0275advance(1),l.\u0275\u0275property("matMenuTriggerFor",W),l.\u0275\u0275attribute("aria-label",l.\u0275\u0275pipeBind1(17,15,"HotkeyDialog_Open_Context_Menu")),l.\u0275\u0275advance(7),l.\u0275\u0275property("xPosition","after"),l.\u0275\u0275advance(2),l.\u0275\u0275property("ngIf",u.isEditMode),l.\u0275\u0275advance(2),l.\u0275\u0275property("name","open_20_regular"),l.\u0275\u0275advance(3),l.\u0275\u0275property("name","note_20_regular")}},dependencies:[C.NgIf,C.NgTemplateOutlet,v.X,k.Hw,E.W0,E.tN,E.D8,s.V,ne.M,te.s,X.c,m.R,O.m,I.F,H.D,G.c,Z.i],styles:['.goal-tile[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;width:100%;height:100%;color:var(--fluent-theme-neutral-primary-alt-color, #3B3A39);background-color:var(--scorecard-goalVisualBackgroundColor);font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-regular, 400);white-space:nowrap}.goal-tile[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;padding:4px 7px;color:var(--fluent-theme-black-color, #000)}.goal-tile[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .scorecard-name[_ngcontent-%COMP%]{margin:0 0 4px;color:var(--scorecard-goalVisualScorecardName-color);font-size:var(--scorecard-goalVisualScorecardName-size);font-family:var(--scorecard-goalVisualScorecardName-family);font-weight:var(--scorecard-goalVisualScorecardName-weight);font-style:var(--scorecard-goalVisualScorecardName-style);text-decoration:var(--scorecard-goalVisualScorecardName-textDecoration)}.goal-tile[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.goal-tile[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .value-and-growth[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:baseline}.goal-tile[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .value-and-growth[_ngcontent-%COMP%]   .value-target[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:var(--scorecard-goalVisualCurrentValue-color);font-size:var(--scorecard-goalVisualCurrentValue-size);font-family:var(--scorecard-goalVisualCurrentValue-family);font-weight:var(--scorecard-goalVisualCurrentValue-weight);font-style:var(--scorecard-goalVisualCurrentValue-style);text-decoration:var(--scorecard-goalVisualCurrentValue-textDecoration)}.goal-tile[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .value-and-growth[_ngcontent-%COMP%]   .value-target[_ngcontent-%COMP%]   .target[_ngcontent-%COMP%]{color:var(--scorecard-goalVisualTargetValue-color);font-size:var(--scorecard-goalVisualTargetValue-size);font-family:var(--scorecard-goalVisualTargetValue-family);font-weight:var(--scorecard-goalVisualTargetValue-weight);font-style:var(--scorecard-goalVisualTargetValue-style);text-decoration:var(--scorecard-goalVisualTargetValue-textDecoration)}.goal-tile[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .value-and-growth[_ngcontent-%COMP%]   .growth[_ngcontent-%COMP%]{display:flex;align-items:center;padding-left:6px;color:var(--scorecard-goalVisualGrowth-color);font-size:var(--scorecard-goalVisualGrowth-size);font-family:var(--scorecard-goalVisualGrowth-family);font-weight:var(--scorecard-goalVisualGrowth-weight);font-style:var(--scorecard-goalVisualGrowth-style);text-decoration:var(--scorecard-goalVisualGrowth-textDecoration)}.goal-tile[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .value-and-growth[_ngcontent-%COMP%]   .growth[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{height:8px;width:8px}.goal-tile[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .value-and-growth[_ngcontent-%COMP%]   .growth[_ngcontent-%COMP%]   .period[_ngcontent-%COMP%]{padding-left:4px}.goal-tile[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .owners[_ngcontent-%COMP%]{display:flex;align-items:center}.goal-tile[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .owners[_ngcontent-%COMP%]     .user-info{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400)}.goal-tile[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .owners[_ngcontent-%COMP%]     .user-image{margin:0}.goal-tile[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .goal-name[_ngcontent-%COMP%]{margin:4px 0;color:var(--scorecard-goalVisualGoalName-color);font-size:var(--scorecard-goalVisualGoalName-size);font-family:var(--scorecard-goalVisualGoalName-family);font-weight:var(--scorecard-goalVisualGoalName-weight);font-style:var(--scorecard-goalVisualGoalName-style);text-decoration:var(--scorecard-goalVisualGoalName-textDecoration)}.goal-tile[_ngcontent-%COMP%]   .visual-container[_ngcontent-%COMP%]{display:flex;flex-grow:1;padding:4px 7px}.goal-tile[_ngcontent-%COMP%]   .visual-container[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]{flex:1;display:flex}.goal-tile[_ngcontent-%COMP%]   .visual-container[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   goal-history-chart[_ngcontent-%COMP%]{width:100%;flex:1}.goal-tile[_ngcontent-%COMP%]   .no-chart[_ngcontent-%COMP%]{display:flex;flex-grow:1;padding:4px 7px}.goal-tile[_ngcontent-%COMP%]   .no-chart[_ngcontent-%COMP%]   .value-wrapper[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center;justify-content:center}.goal-tile[_ngcontent-%COMP%]   .no-chart[_ngcontent-%COMP%]   .value-wrapper[_ngcontent-%COMP%]   .value-target[_ngcontent-%COMP%]{margin:auto}.goal-tile[_ngcontent-%COMP%]   .no-chart[_ngcontent-%COMP%]   .value-wrapper[_ngcontent-%COMP%]   .value-target[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:34px}.goal-tile[_ngcontent-%COMP%]   .no-chart[_ngcontent-%COMP%]   .value-wrapper[_ngcontent-%COMP%]   .value-target[_ngcontent-%COMP%]   .target[_ngcontent-%COMP%]{font-size:22px}.goal-tile[_ngcontent-%COMP%]   .value-target[_ngcontent-%COMP%]{display:flex;align-items:baseline}.goal-tile[_ngcontent-%COMP%]   .footer-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:4px 7px}.goal-tile[_ngcontent-%COMP%]   .footer-container[_ngcontent-%COMP%]   .status-and-date[_ngcontent-%COMP%], .goal-tile[_ngcontent-%COMP%]   .footer-container[_ngcontent-%COMP%]   .notes-and-menu[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.goal-tile[_ngcontent-%COMP%]   .footer-container[_ngcontent-%COMP%]   .status-and-date[_ngcontent-%COMP%]   .target-date[_ngcontent-%COMP%]{white-space:nowrap;text-overflow:ellipsis;overflow:hidden;color:var(--scorecard-goalVisualDueDate-color);font-size:var(--scorecard-goalVisualDueDate-size);font-family:var(--scorecard-goalVisualDueDate-family);font-weight:var(--scorecard-goalVisualDueDate-weight);font-style:var(--scorecard-goalVisualDueDate-style);text-decoration:var(--scorecard-goalVisualDueDate-textDecoration)}.goal-tile[_ngcontent-%COMP%]   .footer-container[_ngcontent-%COMP%]   .status-and-date[_ngcontent-%COMP%]   status-icon[_ngcontent-%COMP%]{padding-right:10px}.goal-tile[_ngcontent-%COMP%]   .footer-container[_ngcontent-%COMP%]   .status-and-date[_ngcontent-%COMP%]   status-icon[_ngcontent-%COMP%]     .status{white-space:nowrap;text-overflow:ellipsis;overflow:hidden;height:14px;line-height:14px;font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-regular, 400)}.goal-tile[_ngcontent-%COMP%]   .footer-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:relative;padding:0;border:none;background:none;height:100%;width:32px}.goal-tile[_ngcontent-%COMP%]   .footer-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:before{vertical-align:middle}.goal-tile[_ngcontent-%COMP%]   .footer-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .notes[_ngcontent-%COMP%]{color:var(--scorecard-goalVisualNotes-color);font-size:var(--scorecard-goalVisualNotes-size)}.goal-tile[_ngcontent-%COMP%]   .footer-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .notes-count[_ngcontent-%COMP%]{position:absolute;font-size:9px;font-weight:600;top:-1px;right:3px;border-radius:30px;padding:1px 4px;background:var(--fluent-theme-primary-color, #F2C811);color:var(--text-primary-content-color-hc, #000)}  .context-menu-dropdown{min-height:unset}  .context-menu-dropdown .mat-menu-content{padding:4px!important}  .context-menu-dropdown .mat-menu-content .goal-tile-context-menu-item{display:flex;flex-direction:row;align-items:center;justify-content:flex-start;padding:0 8px!important;max-height:32px}  .context-menu-dropdown .mat-menu-content .goal-tile-context-menu-item tri-svg-icon{margin-right:4px}'],changeDetection:0}),oe}()},7082:function(lt,Ge,t){"use strict";t.d(Ge,{p:function(){return ee}});var r=t(81337),o=t(29589),P=t(72489),a=function(){function U(){}return U.getPreviewValue=function(Q){var B,w,q,le;if(null!==(B=Q?.result)&&void 0!==B&&B[0]){var de=Q.result[0],V=_.filter(Q.columns,function(Y){return Y.isMeasure}),M=_.first(V),L=de[M.index],x=_.find(Q.columns,function(Y){return!!Y.type&&!!Y.type.dateTime});x&&(q=new Date(de[x.index])),le=(0,P.EO)(M,o.iu),_.isFinite(L)&&(w=L)}return{timestamp:q,value:w,formatString:le}},U}(),d=t(44603),p=t(125),l=t(17085),c=t(50423),y=new c.InjectionToken("ConnectToDataDialogService"),i=t(98587),C=t(62458),v=t(25512),k=t(5432),E=t(74466),s=t(11547),ne=t(77526),te=t(48787),X=t(59973),m=t(14172),O=t(86940),I=t(82621),H=t(65181),G=t(34340),Z=t(10321),ie=t(58938),ye=t(49223),ae=t(77476),J=t(17174),N=t(59968),he=t(39947),pe=t(85102),ce=["valueInput"],ge=["valueSelect"],se=["targetInput"],De=["targetSelect"],fe=["valueFormattingTmpl"],Oe=["valueFormatting"];function be(U,Q){if(1&U){var B=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"div",13)(1,"button",14),c.\u0275\u0275listener("click",function(){c.\u0275\u0275restoreView(B);var q=c.\u0275\u0275nextContext();return c.\u0275\u0275resetView(q.openGoalValuesEditor())}),c.\u0275\u0275text(2),c.\u0275\u0275pipe(3,"localize"),c.\u0275\u0275elementEnd()()}2&U&&(c.\u0275\u0275advance(2),c.\u0275\u0275textInterpolate(c.\u0275\u0275pipeBind1(3,1,"Edit")))}function Fe(U,Q){if(1&U){var B=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"div",15)(1,"input",16,17),c.\u0275\u0275listener("focus",function(){c.\u0275\u0275restoreView(B);var le=c.\u0275\u0275nextContext();return c.\u0275\u0275resetView(le.onCurrentValueFocus())})("keyup.enter",function(){c.\u0275\u0275restoreView(B);var le=c.\u0275\u0275nextContext();return c.\u0275\u0275resetView(le.save())})("ngModelChange",function(le){c.\u0275\u0275restoreView(B);var de=c.\u0275\u0275nextContext();return c.\u0275\u0275resetView(de.onCurrentValueChange(le))}),c.\u0275\u0275pipe(3,"localize"),c.\u0275\u0275pipe(4,"localize"),c.\u0275\u0275elementEnd()()}if(2&U){var w=c.\u0275\u0275nextContext();c.\u0275\u0275advance(1),c.\u0275\u0275propertyInterpolate("type",w.valueInputType),c.\u0275\u0275property("readonly",!w.capabilities.editCurrentValue||w.isValueSubmetricsSelected)("ngModel",w.valueInputValue),c.\u0275\u0275attribute("aria-label",c.\u0275\u0275pipeBind1(3,5,"CurrentValue"))("placeholder",w.displayedGoal.valueConnection||w.displayedGoal.valueRollup||w.isValueSubmetricsSelected?"-":c.\u0275\u0275pipeBind1(4,7,"Enter_Value"))}}function ze(U,Q){if(1&U&&(c.\u0275\u0275elementStart(0,"option",22),c.\u0275\u0275text(1),c.\u0275\u0275elementEnd()),2&U){var B=Q.$implicit;c.\u0275\u0275property("ngValue",Q.index),c.\u0275\u0275advance(1),c.\u0275\u0275textInterpolate1(" ",B.displayName," ")}}function Ke(U,Q){if(1&U){var B=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"select",18,19),c.\u0275\u0275listener("ngModelChange",function(le){c.\u0275\u0275restoreView(B);var de=c.\u0275\u0275nextContext();return c.\u0275\u0275resetView(de.valueSelected=le)}),c.\u0275\u0275element(2,"option",20),c.\u0275\u0275template(3,ze,2,2,"option",21),c.\u0275\u0275elementEnd()}if(2&U){var w=c.\u0275\u0275nextContext();c.\u0275\u0275property("disabled",!w.capabilities.editCurrentValue)("ngModel",w.valueSelected),c.\u0275\u0275advance(3),c.\u0275\u0275property("ngForOf",null==w.goalValueCategoryLists[w.selectedCategoryListIndex]?null:w.goalValueCategoryLists[w.selectedCategoryListIndex].categories)}}function je(U,Q){if(1&U){var B=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"div")(1,"goal-value-type-picker",23),c.\u0275\u0275listener("onCurrentSelection",function(le){c.\u0275\u0275restoreView(B);var de=c.\u0275\u0275nextContext();return c.\u0275\u0275resetView(de.onCurrentSelectionCurrentValueChange(le))}),c.\u0275\u0275elementEnd()()}if(2&U){var w=c.\u0275\u0275nextContext();c.\u0275\u0275advance(1),c.\u0275\u0275property("canCustomizeStatus",null==w.capabilities.scorecardCapabilities?null:w.capabilities.scorecardCapabilities.customizeStatus)("goal",w.displayedGoal)("currentGoalValueTypeSelection",w.currentGoalValueTypeSelection)("goalValueType",1)("goalCapabilities",w.capabilities)("showGoalRollupsCoachmark",(null==w.displayedGoal.subGoals?null:w.displayedGoal.subGoals.length)>0&&w.capabilities.usePickerRollup)}}function He(U,Q){1&U&&c.\u0275\u0275element(0,"span",26)}function Je(U,Q){if(1&U){var B=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"div",13),c.\u0275\u0275template(1,He,1,0,"span",24),c.\u0275\u0275elementStart(2,"span"),c.\u0275\u0275text(3,"\xa0"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(4,"button",25),c.\u0275\u0275listener("click",function(){c.\u0275\u0275restoreView(B);var le=c.\u0275\u0275nextContext();return c.\u0275\u0275resetView(le.onConnectCurrentToDataClick())}),c.\u0275\u0275elementEnd()()}if(2&U){var w=c.\u0275\u0275nextContext();c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",!w.displayedGoal.valueConnection),c.\u0275\u0275advance(3),c.\u0275\u0275property("localize",w.displayedGoal.valueConnection?"UpdateConnection":"ConnectToData")}}function j(U,Q){if(1&U){var B=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"div",13)(1,"button",14),c.\u0275\u0275listener("click",function(){c.\u0275\u0275restoreView(B);var q=c.\u0275\u0275nextContext();return c.\u0275\u0275resetView(q.openGoalTargetsEditor())}),c.\u0275\u0275text(2),c.\u0275\u0275pipe(3,"localize"),c.\u0275\u0275elementEnd()()}2&U&&(c.\u0275\u0275advance(2),c.\u0275\u0275textInterpolate(c.\u0275\u0275pipeBind1(3,1,"Edit")))}function nt(U,Q){if(1&U){var B=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"div",15)(1,"input",27,28),c.\u0275\u0275listener("focus",function(){c.\u0275\u0275restoreView(B);var le=c.\u0275\u0275nextContext();return c.\u0275\u0275resetView(le.onTargetValueFocus())})("keyup.enter",function(){c.\u0275\u0275restoreView(B);var le=c.\u0275\u0275nextContext();return c.\u0275\u0275resetView(le.save())})("ngModelChange",function(le){c.\u0275\u0275restoreView(B);var de=c.\u0275\u0275nextContext();return c.\u0275\u0275resetView(de.onTargetValueChange(le))}),c.\u0275\u0275pipe(3,"localize"),c.\u0275\u0275pipe(4,"localize"),c.\u0275\u0275elementEnd()()}if(2&U){var w=c.\u0275\u0275nextContext();c.\u0275\u0275advance(1),c.\u0275\u0275propertyInterpolate("type",w.targetInputType),c.\u0275\u0275property("readonly",!w.capabilities.editTargetValue||w.isTargetSubmetricsSelected)("ngModel",w.targetInputValue)("pbiTooltipDisabled",!(w.capabilities.supportMultipleTargetsEditing&&w.targetCount>1&&!w.displayedGoal.targetConnection&&!w.isTargetSubmetricsSelected))("pbiTooltipPosition","below"),c.\u0275\u0275attribute("aria-label",c.\u0275\u0275pipeBind1(3,7,"Target"))("placeholder",w.displayedGoal.targetConnection||w.displayedGoal.targetRollup||w.isTargetSubmetricsSelected?"-":c.\u0275\u0275pipeBind1(4,9,"Enter_A_Value"))}}function Ue(U,Q){if(1&U&&(c.\u0275\u0275elementStart(0,"option",22),c.\u0275\u0275text(1),c.\u0275\u0275elementEnd()),2&U){var B=Q.$implicit;c.\u0275\u0275property("ngValue",Q.index),c.\u0275\u0275advance(1),c.\u0275\u0275textInterpolate1(" ",B.displayName," ")}}function oe(U,Q){if(1&U){var B=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"select",29,30),c.\u0275\u0275listener("ngModelChange",function(le){c.\u0275\u0275restoreView(B);var de=c.\u0275\u0275nextContext();return c.\u0275\u0275resetView(de.targetSelected=le)}),c.\u0275\u0275element(2,"option",31),c.\u0275\u0275template(3,Ue,2,2,"option",21),c.\u0275\u0275elementEnd()}if(2&U){var w=c.\u0275\u0275nextContext();c.\u0275\u0275property("disabled",!w.capabilities.editTargetValue)("ngModel",w.targetSelected),c.\u0275\u0275advance(3),c.\u0275\u0275property("ngForOf",null==w.goalValueCategoryLists[w.selectedCategoryListIndex]?null:w.goalValueCategoryLists[w.selectedCategoryListIndex].categories)}}function h(U,Q){if(1&U){var B=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"div")(1,"goal-value-type-picker",32),c.\u0275\u0275listener("onCurrentSelection",function(le){c.\u0275\u0275restoreView(B);var de=c.\u0275\u0275nextContext();return c.\u0275\u0275resetView(de.onCurrentSelectionTargetChange(le))}),c.\u0275\u0275elementEnd()()}if(2&U){var w=c.\u0275\u0275nextContext();c.\u0275\u0275advance(1),c.\u0275\u0275property("canCustomizeStatus",null==w.capabilities.scorecardCapabilities?null:w.capabilities.scorecardCapabilities.customizeStatus)("goal",w.displayedGoal)("hasMultipleTargets",w.targetCount>1)("currentGoalValueTypeSelection",w.targetGoalValueTypeSelection)("goalValueType",2)("goalCapabilities",w.capabilities)}}function g(U,Q){1&U&&c.\u0275\u0275element(0,"span",26)}function u(U,Q){if(1&U){var B=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"div",13),c.\u0275\u0275template(1,g,1,0,"span",24),c.\u0275\u0275elementStart(2,"span"),c.\u0275\u0275text(3,"\xa0"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(4,"button",25),c.\u0275\u0275listener("click",function(){c.\u0275\u0275restoreView(B);var le=c.\u0275\u0275nextContext();return c.\u0275\u0275resetView(le.onConnectTargetToDataClick())}),c.\u0275\u0275elementEnd()()}if(2&U){var w=c.\u0275\u0275nextContext();c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",!w.displayedGoal.targetConnection),c.\u0275\u0275advance(3),c.\u0275\u0275property("localize",w.displayedGoal.targetConnection?"UpdateConnection":"ConnectToData")}}function F(U,Q){if(1&U){var B=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"div",33,34)(2,"div",35),c.\u0275\u0275text(3),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(4,"value-formatting",36),c.\u0275\u0275listener("formatStringChange",function(le){c.\u0275\u0275restoreView(B);var de=c.\u0275\u0275nextContext();return c.\u0275\u0275resetView(de.valueFormatStringChanged(le))})("onSelectedCategoryListChange",function(le){c.\u0275\u0275restoreView(B);var de=c.\u0275\u0275nextContext();return c.\u0275\u0275resetView(de.selectCategoryList(le))}),c.\u0275\u0275elementEnd()()}if(2&U){var w=c.\u0275\u0275nextContext();c.\u0275\u0275advance(3),c.\u0275\u0275textInterpolate(w.formattedValue),c.\u0275\u0275advance(1),c.\u0275\u0275property("formatString",w.formatString)("dataType",w.resultType)("supportCategoricalValues",w.capabilities.useCategoricalValues&&!w.isValueSubmetricsSelected&&!w.isTargetSubmetricsSelected)("goalValueCategoryLists",w.goalValueCategoryLists)("selectedCategoryListIndex",w.selectedCategoryListIndex)("launchCategoryListsEditPane",w.launchCategoryListsEditPane)}}var W=function(U){return U[U.None=0]="None",U[U.Value=1]="Value",U[U.Target=2]="Target",U}({}),ee=function(){function U(Q,B,w,q,le,de,V,M,L,x,Y){var ue=this;this.elementRef=Q,this.pbiOverlay=B,this.changeDetector=w,this.formatValuePipe=q,this.localizationService=le,this.detailsPaneLauncher=de,this.goalValuesEditorLauncher=V,this.dialogService=M,this.scorecardService=L,this.connectToDataDialog=x,this.scorecardSettings=Y,this.currentTargetChange=new c.EventEmitter,this.currentValueChange=new c.EventEmitter,this.targetsChange=new c.EventEmitter,this.valuesChange=new c.EventEmitter,this.valueRollupsChange=new c.EventEmitter,this.targetRollupsChange=new c.EventEmitter,this.onCategoryListIdChanged=new c.EventEmitter,this.onSave=new c.EventEmitter,this.onConnectionChanged=new c.EventEmitter,this.PaddingFromComponentToEditor=4,this.GoalEditValueTooltipId="goal-edit-value-formatting",this.resultType=2,this.formatNilReturn="",this.focusedInput=W.None,this.goalValueCategoryLists=[],this.isValueSubmetricsSelected=!1,this.isTargetSubmetricsSelected=!1,this.currentGoalValueTypeSelection=void 0,this.targetGoalValueTypeSelection=void 0,this.launchCategoryListsEditPane=function(Ne){ue.overlayRef&&(ue.overlayRef.close(),ue.overlayRef=null),ue.detailsPaneLauncher.openCategoryListsEditPane(ue.scorecardService,Ne,function(it){_.isEmpty(ue.goalValueCategoryLists)&&(ue.formatString="");var st=ue.displayedGoal.valuesCategoryId;if(st){var ot=_.findIndex(ue.goalValueCategoryLists,function(ut){return ut.id===st});it&&1===ue.goalValueCategoryLists.length&&(ot=0),ot<0?(ue.selectedCategoryListIndex=ot,ue.onCategoryListIdChanged.emit(st),ue.formatGoalValues()):ue.selectCategoryList(ot)}else ue.selectCategoryList(ot=it&&1===ue.goalValueCategoryLists.length?0:-1)})}}return U.prototype.ngOnInit=function(){var B,w,q,le,Q=this;if(this.formatString=this.displayedGoal.valuesCategoryId?k.d.CategoricalFormatString:this.displayedGoal.valuesFormatString,this.originalCurrentValue=this.currentValue.value,this.capabilities.useCategoricalValues&&(this.categoryListsSubscribe=this.scorecardService.getScorecard().pipe((0,ne.x)(function(M,L){return _.isEqual(M.goalValueCategories,L.goalValueCategories)})).subscribe(function(){var M;Q.goalValueCategoryLists=Q.scorecardService.getGoalValueCategoryLists(Q.displayedGoal),Q.selectedCategoryListIndex=null!==(M=_.findIndex(Q.goalValueCategoryLists,function(L){return L.id===Q.displayedGoal.valuesCategoryId}))&&void 0!==M?M:-1})),this.capabilities.supportMultipleTargetsEditing&&!this.displayedGoal.targetConnection){var de;de=this.displayedGoal.isNew?0:null!==(q=null===(w=null===(B=this.displayedGoal.aggregations)||void 0===B?void 0:B.find(function(M){return"NumberOfTargets"===M.type}))||void 0===w?void 0:w.value)&&void 0!==q?q:0,this.targetCount=Math.max(de,1)}if(_.isUndefined(null===(le=this.displayedGoal.metadata)||void 0===le?void 0:le.showFinalTarget)&&this.capabilities.supportMultipleTargetsEditing){var V=!this.displayedGoal.targetConnection;this.displayedGoal.metadata?this.displayedGoal.metadata.showFinalTarget=V:this.displayedGoal.metadata={showFinalTarget:V}}this.formatGoalValues(),this.updateCurrentGoalValueTypeSelection(void 0,1),this.updateCurrentGoalValueTypeSelection(void 0,2)},U.prototype.save=function(){this.onSave.emit()},U.prototype.onCurrentSelectionCurrentValueChange=function(Q){var B;return(0,r.mG)(this,void 0,void 0,function(){return(0,r.Jh)(this,function(w){return this.isValueSubmetricsSelected=null!==(B=!_.isUndefined(Q.rollupType))&&void 0!==B&&B,1!==Q.type&&this.displayedGoal.valueConnection&&(this.displayedGoal.valueConnection=void 0,this.onConnectionChanged.emit()),_.isUndefined(Q.rollupType)?2===Q.type?(this.displayedGoal.valueRollup=void 0,this.openGoalValuesEditor()):1===Q.type?this.onConnectCurrentToDataClick():this.displayedGoal.valueRollup=void 0:(this.currentValue=(0,r.pi)((0,r.pi)({},this.currentValue),{value:null}),this.currentValueChange.emit(this.currentValue),this.formatGoalValues()),this.changeDetector.detectChanges(),this.valueRollupsChange.emit({rollupType:Q.rollupType,type:Q.type}),this.updateCurrentGoalValueTypeSelection(Q,1),[2]})})},U.prototype.onCurrentSelectionTargetChange=function(Q){var B;return(0,r.mG)(this,void 0,void 0,function(){return(0,r.Jh)(this,function(w){return this.isTargetSubmetricsSelected=null!==(B=!_.isUndefined(Q.rollupType))&&void 0!==B&&B,1!==Q.type&&this.displayedGoal.targetConnection&&(this.displayedGoal.targetConnection=void 0,this.onConnectionChanged.emit()),_.isUndefined(Q.rollupType)?2===Q.type?this.openGoalTargetsEditor():1===Q.type?this.onConnectTargetToDataClick():this.displayedGoal.targetRollup=void 0:(this.currentTarget=(0,r.pi)((0,r.pi)({},this.currentTarget),{target:null}),this.currentTargetChange.emit(this.currentTarget),this.formatGoalValues()),this.changeDetector.detectChanges(),this.targetRollupsChange.emit({rollupType:Q.rollupType,type:Q.type}),this.updateCurrentGoalValueTypeSelection(Q,2),[2]})})},U.prototype.updateCurrentGoalValueTypeSelection=function(Q,B){var w,q,le,de,V,M;2===B?this.targetGoalValueTypeSelection=this.displayedGoal.targetConnection?{type:1}:this.isTargetSubmetricsSelected||_.isNil(Q)&&!_.isNil(null===(w=this.displayedGoal)||void 0===w?void 0:w.targetRollup)?{type:4,rollupType:null!==(q=Q?.rollupType)&&void 0!==q?q:null===(le=this.displayedGoal.targetRollup)||void 0===le?void 0:le.rollupType}:this.targetCount>1?{type:2}:this.displayedGoal.isNew&&void 0===Q?void 0:{type:0}:this.currentGoalValueTypeSelection=this.displayedGoal.valueConnection?{type:1}:this.isValueSubmetricsSelected||_.isNil(Q)&&!_.isNil(null===(de=this.displayedGoal)||void 0===de?void 0:de.valueRollup)?{type:4,rollupType:null!==(V=Q?.rollupType)&&void 0!==V?V:null===(M=this.displayedGoal.valueRollup)||void 0===M?void 0:M.rollupType}:this.displayedGoal.isNew&&void 0===Q?void 0:{type:0}},U.prototype.ngOnDestroy=function(){this.overlayRef&&(this.overlayRef.close(),this.overlayRef=null),this.connectToDataDialog.close(),this.categoryListsSubscribe&&this.categoryListsSubscribe.unsubscribe()},U.prototype.onConnectCurrentToDataClick=function(){var Q=this;this.detailsPaneLauncher.closeGoalDetails(),this.getDialogConfig(1).then(function(B){Q.connectToDataDialog.open(B).pipe((0,te.q)(1)).subscribe(function(w){var q;if(w){var de=(0,r._T)(w,["previewResult"]);Q.displayedGoal.valueConnection=de;var V=(q=a.getPreviewValue(w.previewResult)).value;Q.valueFormatStringChanged(q.formatString),Q.currentValue=(0,r.pi)((0,r.pi)({},Q.currentValue),{value:V}),Q.currentValueChange.emit(Q.currentValue),Q.capabilities.supportMultipleValuesEditing&&(Q.values=void 0,Q.valuesChange.emit(Q.values)),Q.formatGoalValues(),Q.updateCurrentGoalValueTypeSelection({type:1},1),Q.onConnectionChanged.emit(),Q.changeDetector.detectChanges()}})})},U.prototype.onConnectTargetToDataClick=function(){return(0,r.mG)(this,void 0,void 0,function(){var w=this;return(0,r.Jh)(this,function(q){switch(q.label){case 0:return this.detailsPaneLauncher.closeGoalDetails(),this.capabilities.supportMultipleTargetsEditing&&!this.displayedGoal.targetConnection&&(this.targetCount>1||null!=this.currentTarget.target)?[4,this.dialogService.showConfirmationDialog({title:this.localizationService.get("Metrics_Switch_To_Connected_Data"),message:this.localizationService.get("Metrics_Switch_To_Connected_Data_Multiple_Goal_Targets"),okButtonText:this.localizationService.get("ModalDialogButtonText_Continue")}).afterClosed().toPromise()]:[3,2];case 1:if(1!==q.sent())return[2];q.label=2;case 2:return this.getDialogConfig(2).then(function(le){w.connectToDataDialog.open(le).pipe((0,te.q)(1)).subscribe(function(de){var V,M;if(de){var x=(0,r._T)(de,["previewResult"]);w.displayedGoal.targetConnection=x;var Y=(V=a.getPreviewValue(de.previewResult)).value;w.valueFormatStringChanged(V.formatString),w.currentTarget=(0,r.pi)((0,r.pi)({},w.currentTarget),{target:Y}),w.currentTargetChange.emit(w.currentTarget),w.capabilities.supportMultipleTargetsEditing&&(w.targets=void 0,w.targetsChange.emit(w.targets),w.targetCount=void 0,null!==(M=w.displayedGoal)&&void 0!==M&&M.metadata?w.displayedGoal.metadata.showFinalTarget=!1:w.displayedGoal.metadata={showFinalTarget:!1}),w.formatGoalValues(),w.updateCurrentGoalValueTypeSelection({type:1},2),w.onConnectionChanged.emit(),w.changeDetector.detectChanges()}})}),[2]}})})},U.prototype.onCurrentValueFocus=function(){this.focusedInput!==W.Value&&(this.focusedInput=W.Value,this.formatGoalValues(),this.valueInput.nativeElement.click()),this.capabilities.changeValueFormat&&null==this.overlayRef&&this.openValueFormattingPane()},U.prototype.onTargetValueFocus=function(){this.focusedInput!==W.Target&&(this.focusedInput=W.Target,this.formatGoalValues(),this.targetInput.nativeElement.click()),this.capabilities.changeValueFormat&&null==this.overlayRef&&this.openValueFormattingPane()},U.prototype.valueFormatStringChanged=function(Q){var B=this.formatString===k.d.CategoricalFormatString;this.formatString=Q,this.displayedGoal.valuesFormatString=Q===k.d.CategoricalFormatString?"":Q??"",B&&this.formatString!==k.d.CategoricalFormatString&&this.onCategoryListIdChanged.emit(null),this.formatGoalValues()},U.prototype.isCategoricalValue=function(Q){var B,w;return this.isCategoricalFormat&&this.selectedCategoryListIndex>=0&&this.selectedCategoryListIndex<(null===(B=this.goalValueCategoryLists)||void 0===B?void 0:B.length)&&(null===(w=this.goalValueCategoryLists[this.selectedCategoryListIndex])||void 0===w?void 0:w.categories.length)>Q},U.prototype.onCurrentValueChange=function(Q){var B=this,w=_.isNil(Q)||""===Q?null:+Q;this.currentValue=(0,r.pi)((0,r.pi)({},this.currentValue),{value:w}),this.currentValueChange.emit(this.currentValue),this.currentGoalValueTypeSelection={type:0},this.capabilities.supportMultipleValuesEditing&&this.values&&(this.values=(0,E.ZP)(this.values,function(q){var le=q.find(function(de){return new Date(de.timestamp).getTime()===new Date(B.currentValue.timestamp).getTime()});le?le.value=B.currentValue.value:q.push(B.currentValue)}),this.valuesChange.emit(this.values)),this.formatGoalValues()},U.prototype.onTargetValueChange=function(Q){var B=this,w=_.isNil(Q)||""===Q?null:+Q;this.currentTarget=(0,r.pi)((0,r.pi)({},this.currentTarget),{target:w}),this.currentTargetChange.emit(this.currentTarget),this.targetGoalValueTypeSelection={type:0},this.capabilities.supportMultipleTargetsEditing&&this.targets&&(C.fF.assert(function(){return B.targetCount<=1&&B.targets.length<=1},"Inline target editor should only be enabled if there's at most one target!"),this.targets=[this.currentTarget],this.targetsChange.emit(this.targets)),this.formatGoalValues()},U.prototype.openGoalTargetsEditor=function(){return(0,r.mG)(this,void 0,void 0,function(){var Q,w=this;return(0,r.Jh)(this,function(q){return C.fF.assertValue(_.isNil(this.displayedGoal.targetConnection),"Targets can only be edited if there is no target connection"),Q=this.getGoalTargets(),this.goalValuesEditorLauncher.launchTargetsEditor(this.displayedGoal,Q,function(de,V,M){return(0,r.mG)(w,void 0,void 0,function(){var L,x;return(0,r.Jh)(this,function(Y){return de.length>0?(de.sort(function(ue,Ne){return new Date(ue.timestamp).getTime()-new Date(Ne.timestamp).getTime()}),this.currentTarget=V?p.r.calculateFinalTarget(de):p.r.calculateNextTarget(de),this.targets=de):((L=d.E.getCurrentLocalDay()).setMonth(L.getMonth()+1),this.currentTarget={timestamp:L.toISOString(),target:null},this.targets=[this.currentTarget]),this.currentTargetChange.emit(this.currentTarget),this.targetsChange.emit(this.targets),null!==(x=this.displayedGoal)&&void 0!==x&&x.metadata?this.displayedGoal.metadata.showFinalTarget=V:this.displayedGoal.metadata={showFinalTarget:V},this.targetCount=de.length,this.formatString=M,this.displayedGoal.valuesFormatString=M,this.formatGoalValues(),this.updateCurrentGoalValueTypeSelection({type:2},2),[2]})})}),[2]})})},U.prototype.openGoalValuesEditor=function(){return(0,r.mG)(this,void 0,void 0,function(){var Q,w=this;return(0,r.Jh)(this,function(q){return C.fF.assertValue(_.isNil(this.displayedGoal.valueConnection),"Values can only be edited if there is no value connection"),Q=this.getGoalValues(),this.goalValuesEditorLauncher.launchValuesEditor(this.displayedGoal,Q,function(de,V){return(0,r.mG)(w,void 0,void 0,function(){return(0,r.Jh)(this,function(M){return de.length>0?(de.sort(function(L,x){return new Date(L.timestamp).getTime()-new Date(x.timestamp).getTime()}),this.currentValue=(0,r.pi)((0,r.pi)({},this.currentValue),{value:p.r.calculateCurrentValue(de)}),this.values=de):(this.currentValue=(0,r.pi)((0,r.pi)({},this.currentValue),{value:null}),this.values=[this.currentValue]),this.currentValueChange.emit(this.currentValue),this.valuesChange.emit(this.values),this.formatString=V,this.displayedGoal.valuesFormatString=V,this.formatGoalValues(),this.updateCurrentGoalValueTypeSelection({type:0},1),[2]})})}),[2]})})},U.prototype.getGoalTargets=function(){var B,w,Q=this;return this.displayedGoal.isNew||this.targets?w=(0,s.of)(null!==(B=this.targets)&&void 0!==B?B:[]):(this.scorecardService.expandGoalValues(this.displayedGoal.id,!1),w=this.scorecardService.getGoal(this.displayedGoal.id).pipe((0,X.h)(function(q){return q.isExpanded}),(0,m.U)(function(q){var le;return null!==(le=q.goalValues)&&void 0!==le?le:[]}),(0,m.U)(function(q){return q.filter(function(le){return!_.isNil(le.target)})}))),w.pipe((0,m.U)(function(q){return(0,E.ZP)(q,function(le){if(!_.isNil(Q.targetCount)&&Q.targetCount<=1){C.fF.assert(function(){return le.length<=1},"Inline target editor should only be enabled if there's at most one target!");var de=le.find(function(V){return new Date(V.timestamp).getTime()===new Date(Q.currentTarget.timestamp).getTime()});de?de.target=Q.currentTarget.target:le.push(Q.currentTarget)}})}),(0,m.U)(function(q){return(0,E.ZP)(q,function(le){le.sort(function(de,V){return new Date(de.timestamp).getTime()-new Date(V.timestamp).getTime()})})}))},U.prototype.getGoalValues=function(){var B,w,Q=this;return this.displayedGoal.isNew||this.values?w=(0,s.of)(null!==(B=this.values)&&void 0!==B?B:[]):(this.scorecardService.expandGoalValues(this.displayedGoal.id,!1),w=this.scorecardService.getGoal(this.displayedGoal.id).pipe((0,X.h)(function(q){return q.isExpanded}),(0,m.U)(function(q){var le;return null!==(le=q.goalValues)&&void 0!==le?le:[]}),(0,m.U)(function(q){return q.filter(function(le){return!_.isNil(le.value)})}))),w.pipe((0,m.U)(function(q){return(0,E.ZP)(q,function(le){var de=le.find(function(V){return new Date(V.timestamp).getTime()===new Date(Q.currentValue.timestamp).getTime()});de?de.value=Q.currentValue.value:Q.originalCurrentValue!==Q.currentValue.value&&le.push(Q.currentValue)})}),(0,m.U)(function(q){return(0,E.ZP)(q,function(le){le.sort(function(de,V){return new Date(de.timestamp).getTime()-new Date(V.timestamp).getTime()})})}))},U.prototype.onMouseClick=function(Q){var B,w,q,le,de,V,M,L,x=Q?.target;return null!==(B=this.valueSelect)&&void 0!==B&&B.nativeElement.contains(x)?(this.focusedInput!==W.Value&&(this.focusedInput=W.Value,this.formatGoalValues()),void(this.overlayRef||this.openValueFormattingPane())):null!==(w=this.targetSelect)&&void 0!==w&&w.nativeElement.contains(x)?(this.focusedInput!==W.Target&&(this.focusedInput=W.Target,this.formatGoalValues()),void(this.overlayRef||this.openValueFormattingPane())):void(null!==(q=this.valueInput)&&void 0!==q&&q.nativeElement.contains(x)||null!==(le=this.targetInput)&&void 0!==le&&le.nativeElement.contains(x)||null!==(V=null===(de=this.valueFormatting)||void 0===de?void 0:de.nativeElement)&&void 0!==V&&V.contains(x)||x.classList.contains("mat-option-text")||x.classList.contains("pbi-menu-item")||null!==(M=this.valueInput)&&void 0!==M&&M.nativeElement.contains(document.activeElement)||null!==(L=this.targetInput)&&void 0!==L&&L.nativeElement.contains(document.activeElement)||(this.focusedInput!==W.None&&(this.focusedInput=W.None,this.formatGoalValues()),this.overlayRef&&(this.overlayRef.close(),this.overlayRef=null)))},U.prototype.selectCategoryList=function(Q){var B;this.selectedCategoryListIndex=Q,this.onCategoryListIdChanged.emit(null===(B=this.goalValueCategoryLists[this.selectedCategoryListIndex])||void 0===B?void 0:B.id),this.formatGoalValues()},Object.defineProperty(U.prototype,"valueSelected",{get:function(){return this.isCategoricalValue(this.currentValue.value)?this.currentValue.value:void 0},set:function(B){var w=this;this.currentValue=(0,r.pi)((0,r.pi)({},this.currentValue),{value:B}),this.currentValueChange.emit(this.currentValue),this.capabilities.supportMultipleValuesEditing&&this.values&&(this.values=(0,E.ZP)(this.values,function(q){var le=q.find(function(de){return new Date(de.timestamp).getTime()===new Date(w.currentValue.timestamp).getTime()});le?le.value=w.currentValue.value:q.push(w.currentValue)}),this.valuesChange.emit(this.values)),this.formatGoalValues()},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"targetSelected",{get:function(){return this.isCategoricalValue(this.currentTarget.target)?this.currentTarget.target:void 0},set:function(B){var w=this,q=B;this.currentTarget=(0,r.pi)((0,r.pi)({},this.currentTarget),{target:q}),this.currentTargetChange.emit(this.currentTarget),this.capabilities.supportMultipleTargetsEditing&&this.targets&&(C.fF.assert(function(){return w.targetCount<=1&&w.targets.length<=1},"Inline target editor should only be enabled if there's at most one target!"),this.targets=[this.currentTarget],this.targetsChange.emit(this.targets)),this.formatGoalValues()},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"isCategoricalFormat",{get:function(){return this.formatString===k.d.CategoricalFormatString},enumerable:!1,configurable:!0}),U.prototype.openValueFormattingPane=function(){var Q=this.pbiOverlay.position().flexibleConnectedTo(this.elementRef.nativeElement).withPositions([(0,v.xe)(0,-this.PaddingFromComponentToEditor)]).withPush(!0).withGrowAfterOpen(!0);this.overlayRef=this.pbiOverlay.open({component:l.i,data:{id:this.GoalEditValueTooltipId,templateRef:this.valueFormattingTmpl},options:{positionStrategy:Q,hasBackdrop:!1,disposeOnNavigation:!0},hasCaret:!1,focusElementOnClose:null,disableCloseOnEsc:!0,disableFocusTrapSetting:{disable:!0}}),this.overlayRef.componentRef.changeDetectorRef.detectChanges()},U.prototype.formatValue=function(Q){var B,w;return this.formatString!==k.d.CategoricalFormatString?this.formatValuePipe.transform(Q,this.formatString,!0,this.formatNilReturn):this.isCategoricalValue(Q)?null===(w=null===(B=this.goalValueCategoryLists[this.selectedCategoryListIndex])||void 0===B?void 0:B.categories[Q])||void 0===w?void 0:w.displayName:void 0},U.prototype.formatGoalValues=function(){var Q,B,w,q,le=this.focusedInput===W.Value&&this.capabilities.editCurrentValue,de=this.focusedInput===W.Target&&this.capabilities.editTargetValue;this.valueInputType=le?"number":"text",this.targetInputType=de?"number":"text",this.valueInputValue=le?null!==(B=null===(Q=this.currentValue.value)||void 0===Q?void 0:Q.toString())&&void 0!==B?B:"":this.formatValue(this.currentValue.value),this.targetInputValue=de?null!==(q=null===(w=this.currentTarget.target)||void 0===w?void 0:w.toString())&&void 0!==q?q:"":this.formatValue(this.currentTarget.target),this.formattedValue="",this.focusedInput===W.Value&&(this.formattedValue=this.formatValue(this.currentValue.value)),this.focusedInput===W.Target&&(this.formattedValue=this.formatValue(this.currentTarget.target))},U.prototype.getDialogConfig=function(Q){return(0,r.mG)(this,void 0,void 0,function(){var w,q;return(0,r.Jh)(this,function(de){switch(de.label){case 0:return w={data:{}},(q=1===Q?this.displayedGoal.valueConnection:this.displayedGoal.targetConnection)&&(w.data.reportUrl=q.reportUrl,q.shouldClearGoalValues&&(w.data.banner={bannerType:2,iconName:"pbi-glyph-info",message:this.localizationService.get("Metric_Clear_Values_On_New_Connection_Warning")})),this.scorecardSettings?[4,this.scorecardSettings.settings.pipe((0,te.q)(1)).toPromise()]:[2,w];case 1:return de.sent().alwaysMaximize&&(w.height="100%",w.width="100%",w.hideFullscreenToggle=!0),[2,w]}})})},U.\u0275fac=function(B){return new(B||U)(c.\u0275\u0275directiveInject(c.ElementRef),c.\u0275\u0275directiveInject(O._),c.\u0275\u0275directiveInject(c.ChangeDetectorRef),c.\u0275\u0275directiveInject(I.c),c.\u0275\u0275directiveInject(H.o),c.\u0275\u0275directiveInject(G.c),c.\u0275\u0275directiveInject(Z.L),c.\u0275\u0275directiveInject(ie.x),c.\u0275\u0275directiveInject(ye.G),c.\u0275\u0275directiveInject(y),c.\u0275\u0275directiveInject(i.u,8))},U.\u0275cmp=c.\u0275\u0275defineComponent({type:U,selectors:[["goal-value-input"]],viewQuery:function(B,w){if(1&B&&(c.\u0275\u0275viewQuery(ce,5),c.\u0275\u0275viewQuery(ge,5),c.\u0275\u0275viewQuery(se,5),c.\u0275\u0275viewQuery(De,5),c.\u0275\u0275viewQuery(fe,5,c.TemplateRef),c.\u0275\u0275viewQuery(Oe,5)),2&B){var q=void 0;c.\u0275\u0275queryRefresh(q=c.\u0275\u0275loadQuery())&&(w.valueInput=q.first),c.\u0275\u0275queryRefresh(q=c.\u0275\u0275loadQuery())&&(w.valueSelect=q.first),c.\u0275\u0275queryRefresh(q=c.\u0275\u0275loadQuery())&&(w.targetInput=q.first),c.\u0275\u0275queryRefresh(q=c.\u0275\u0275loadQuery())&&(w.targetSelect=q.first),c.\u0275\u0275queryRefresh(q=c.\u0275\u0275loadQuery())&&(w.valueFormattingTmpl=q.first),c.\u0275\u0275queryRefresh(q=c.\u0275\u0275loadQuery())&&(w.valueFormatting=q.first)}},hostBindings:function(B,w){1&B&&c.\u0275\u0275listener("click",function(le){return w.onMouseClick(le)},!1,c.\u0275\u0275resolveDocument)},inputs:{displayedGoal:"displayedGoal",currentValue:"currentValue",capabilities:"capabilities",currentTarget:"currentTarget",targets:"targets",values:"values",goalStatuses:"goalStatuses"},outputs:{currentTargetChange:"currentTargetChange",currentValueChange:"currentValueChange",targetsChange:"targetsChange",valuesChange:"valuesChange",valueRollupsChange:"valueRollupsChange",targetRollupsChange:"targetRollupsChange",onCategoryListIdChanged:"onCategoryListIdChanged",onSave:"onSave",onConnectionChanged:"onConnectionChanged"},decls:24,vars:17,consts:[[1,"input-box-sm","right-padding","current"],[1,"value-input-title"],["localize","CurrentValue",1,"input-title"],["class","input-action-txt",4,"ngIf"],[1,"input"],["class","input-box right-margin",4,"ngIf","ngIfElse"],["selectCategoricalValue",""],[4,"ngIf"],[1,"input-box-sm","target"],[1,"target-input-title"],[1,"input-title"],["selectCategoricalTarget",""],["valueFormattingTmpl",""],[1,"input-action-txt"],[1,"link",3,"click"],[1,"input-box","right-margin"],["data-testid","current-value-input-box","step","any",3,"readonly","type","ngModel","focus","keyup.enter","ngModelChange"],["valueInput",""],["data-testid","select-categorical-value",1,"select-categorical-value",3,"disabled","ngModel","ngModelChange"],["valueSelect",""],["value","","selected","!valueSelected","hidden","!!valueSelected}}"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],[3,"canCustomizeStatus","goal","currentGoalValueTypeSelection","goalValueType","goalCapabilities","showGoalRollupsCoachmark","onCurrentSelection"],["localize","Logical_Or_Operator",4,"ngIf"],[1,"link",3,"localize","click"],["localize","Logical_Or_Operator"],["data-testid","target-value-input-box","step","any",3,"readonly","type","ngModel","pbiTooltipDisabled","pbiTooltipPosition","focus","keyup.enter","ngModelChange"],["targetInput",""],[1,"select-categorical-target",3,"disabled","ngModel","ngModelChange"],["targetSelect",""],["value","","selected","!targetSelected","hidden","!!targetSelected"],[3,"canCustomizeStatus","goal","hasMultipleTargets","currentGoalValueTypeSelection","goalValueType","goalCapabilities","onCurrentSelection"],["data-testid","value-formatting-box",1,"value-formatting-box"],["valueFormatting",""],[1,"result"],[1,"goals-value-formatting",3,"formatString","dataType","supportCategoricalValues","goalValueCategoryLists","selectedCategoryListIndex","launchCategoryListsEditPane","formatStringChange","onSelectedCategoryListChange"]],template:function(B,w){if(1&B&&(c.\u0275\u0275elementStart(0,"div",0)(1,"div",1),c.\u0275\u0275element(2,"div",2),c.\u0275\u0275template(3,be,4,3,"div",3),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(4,"div",4),c.\u0275\u0275template(5,Fe,5,9,"div",5),c.\u0275\u0275template(6,Ke,4,3,"ng-template",null,6,c.\u0275\u0275templateRefExtractor),c.\u0275\u0275template(8,je,2,6,"div",7),c.\u0275\u0275elementEnd(),c.\u0275\u0275template(9,Je,5,2,"div",3),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(10,"div",8)(11,"div",9)(12,"div",10),c.\u0275\u0275text(13),c.\u0275\u0275pipe(14,"localize"),c.\u0275\u0275elementEnd(),c.\u0275\u0275template(15,j,4,3,"div",3),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(16,"div",4),c.\u0275\u0275template(17,nt,5,11,"div",5),c.\u0275\u0275template(18,oe,4,3,"ng-template",null,11,c.\u0275\u0275templateRefExtractor),c.\u0275\u0275template(20,h,2,6,"div",7),c.\u0275\u0275elementEnd(),c.\u0275\u0275template(21,u,5,2,"div",3),c.\u0275\u0275elementEnd(),c.\u0275\u0275template(22,F,5,7,"ng-template",null,12,c.\u0275\u0275templateRefExtractor)),2&B){var q=c.\u0275\u0275reference(7),le=c.\u0275\u0275reference(19);c.\u0275\u0275classProp("inner-input-box-with-rollups",w.capabilities.supportsRollup),c.\u0275\u0275advance(3),c.\u0275\u0275property("ngIf",w.capabilities.supportMultipleValuesEditing&&w.capabilities.editMultipleValues&&!w.capabilities.supportsRollup),c.\u0275\u0275advance(2),c.\u0275\u0275property("ngIf",!w.isCategoricalFormat)("ngIfElse",q),c.\u0275\u0275advance(3),c.\u0275\u0275property("ngIf",w.capabilities.supportsRollup),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",w.capabilities.connectCurrentValueToData&&!w.capabilities.supportsRollup),c.\u0275\u0275advance(1),c.\u0275\u0275classProp("inner-input-box-with-rollups",w.capabilities.supportsRollup),c.\u0275\u0275advance(3),c.\u0275\u0275textInterpolate1(" ",c.\u0275\u0275pipeBind1(14,15,w.capabilities.supportMultipleTargetsEditing?null!=w.displayedGoal.metadata&&w.displayedGoal.metadata.showFinalTarget?"Target_Final":"Target_Next":"Target")," "),c.\u0275\u0275advance(2),c.\u0275\u0275property("ngIf",w.capabilities.supportMultipleTargetsEditing&&w.capabilities.editMultipleTargets&&!w.capabilities.supportsRollup),c.\u0275\u0275advance(2),c.\u0275\u0275property("ngIf",!w.isCategoricalFormat)("ngIfElse",le),c.\u0275\u0275advance(3),c.\u0275\u0275property("ngIf",w.capabilities.supportsRollup),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",w.capabilities.connectTargetValueToData&&!w.capabilities.supportsRollup)}},dependencies:[ae.NgForOf,ae.NgIf,J.YN,J.Kr,J.Fj,J.EJ,J.JJ,J.On,N.X,k.d,he.Q,pe.F],styles:["[_nghost-%COMP%]{display:inline-flex}.inner-input-box-with-rollups[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:center}.right-padding[_ngcontent-%COMP%]{padding-right:8px}.right-margin[_ngcontent-%COMP%]{margin-right:4px}.select-categorical-value[_ngcontent-%COMP%], .select-categorical-target[_ngcontent-%COMP%]{width:100%;height:32px}.value-input-title[_ngcontent-%COMP%], .target-input-title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.edit-targets-title[_ngcontent-%COMP%]{padding-top:9px;padding-bottom:4px}.pbi-text-field-error-message[_ngcontent-%COMP%]{fill:var(--fluent-theme-error-dark-color, #A80000);color:var(--fluent-theme-error-dark-color, #A80000)}  #goal-edit-value-formatting{background-color:var(--fluent-theme-neutral-lighter-alt-color, #FAF9F8)}  #goal-edit-value-formatting .value-formatting-box .result{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);color:var(--gray-180, #252423);line-height:20px;height:20px;padding:12px 12px 8px;border-bottom:1px solid var(--fluent-theme-neutral-tertiary-alt-color, #C8C6C4)}  #goal-edit-value-formatting .value-formatting-box mat-select{height:28px;border:1px solid var(--gray-110, #8A8886);border-radius:2px}  #goal-edit-value-formatting .value-formatting-box mat-select .mat-select-value{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);color:var(--fluent-theme-neutral-primary-color, #323130);line-height:20px}  #goal-edit-value-formatting .value-formatting-box mat-select .mat-select-arrow{color:var(--gray-140, #484644);padding-right:14px}  #goal-edit-value-formatting .value-formatting-box num-up-down .inputRange{height:28px;border:1px solid var(--gray-110, #8A8886);border-radius:2px}  #goal-edit-value-formatting .value-formatting-box num-up-down .inputRange .inputUpDown{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);color:var(--fluent-theme-neutral-primary-color, #323130);line-height:20px}  #goal-edit-value-formatting .value-formatting-box num-up-down label{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);line-height:20px}  #goal-edit-value-formatting .value-formatting-box .valueFormatterToggleButtonsGroup .btn{background-color:transparent;border:none}  #goal-edit-value-formatting .value-formatting-box .valueFormatterToggleButtonsGroup .btn:hover{background-color:var(--fluent-theme-neutral-quarter-alt-color, #E1DFDD)}",".cell[_ngcontent-%COMP%]{border:none;box-sizing:border-box}.cell-indent[_ngcontent-%COMP%]{width:36px}.cell-left-edge[_ngcontent-%COMP%]{border-top-left-radius:4px;border-bottom-left-radius:4px}.cell-right-edge[_ngcontent-%COMP%]{border-top-right-radius:4px;border-bottom-right-radius:4px}.cell-box[_ngcontent-%COMP%]{display:flex;height:100%}.cell-box[_ngcontent-%COMP%]   .color-box[_ngcontent-%COMP%]{min-width:6px;width:6px;border-top-left-radius:4px;border-bottom-left-radius:4px}[_nghost-%COMP%]   td[_ngcontent-%COMP%]{height:100px}[_nghost-%COMP%]   .select-checkmark[_ngcontent-%COMP%]{margin-right:15px}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]{background-color:var(--scorecard-tableEditRowBackgroundColor);color:var(--scorecard-tableEditRowForegroundColor);border-top:1px solid var(--fluent-theme-neutral-light-color, #EDEBE9);border-bottom:1px solid var(--fluent-theme-neutral-light-color, #EDEBE9)}[_nghost-%COMP%]   .cell.cell-right-edge[_ngcontent-%COMP%]{border-right:1px solid var(--fluent-theme-neutral-light-color, #EDEBE9)}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]   .cell-box-with-rollups[_ngcontent-%COMP%]   .edit-row-content[_ngcontent-%COMP%]{padding-left:12px;padding-right:12px}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]   .cell-box-with-rollups[_ngcontent-%COMP%]   goal-value-input[_ngcontent-%COMP%]{flex:none;max-width:none;min-width:392px}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]   .cell-box-with-rollups[_ngcontent-%COMP%]   .inner-input-box-with-rollups[_ngcontent-%COMP%]{max-width:none}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]   .cell-box-with-rollups[_ngcontent-%COMP%]   .input-box-with-rollups[_ngcontent-%COMP%]{width:104px;max-width:104px;min-width:auto}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]   .cell-box-with-rollups[_ngcontent-%COMP%]   .input-box-with-rollups[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:4px 6px}[_nghost-%COMP%]:hover   .select-checkmark[_ngcontent-%COMP%], [_nghost-%COMP%]   .select-checkmark.box-checked[_ngcontent-%COMP%]{visibility:visible}[_nghost-%COMP%]   .checkmark-td[_ngcontent-%COMP%]{width:35px;max-width:35px}[_nghost-%COMP%]   .checkmark-td.bulk-editing-off[_ngcontent-%COMP%]{width:0px;max-width:0px}[_nghost-%COMP%]   .select-checkmark[_ngcontent-%COMP%]{visibility:hidden;margin-right:15px}[_nghost-%COMP%]   .select-checkmark[_ngcontent-%COMP%]     pbi-checkbox{margin-bottom:0}[_nghost-%COMP%]   .input-title[_ngcontent-%COMP%]{font-size:var(--lg-font-size, 16px);font-weight:var(--font-weight-semi-bold, 600);padding-top:9px;padding-bottom:4px}[_nghost-%COMP%]   .input-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{vertical-align:middle;padding:0}[_nghost-%COMP%]   .input-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{cursor:pointer}[_nghost-%COMP%]   .edit-row-content[_ngcontent-%COMP%]{display:flex;flex:1;padding-left:20px;padding-right:20px;width:1000px;min-width:1000px}[_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);height:32px;padding:6px 8px;box-sizing:border-box;color:var(--scorecard-tableInputForegroundColor);background:var(--scorecard-tableInputBackgroundColor);border:1px solid var(--gray-110, #8A8886);border-radius:2px}[_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{filter:brightness(90%)}[_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:invalid{border:2px solid var(--fluent-theme-error-dark-alt-color, #D83B01);outline-color:var(--fluent-theme-error-dark-alt-color, #D83B01)}[_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   input[readonly][_ngcontent-%COMP%]{filter:brightness(90%)}[_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-input-placeholder, [_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:-ms-input-placeholder, [_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::placeholder{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);color:var(--scorecard-tableInputForegroundColor)}[_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{padding:0;margin:0}[_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-outer-spin-button, [_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}[_nghost-%COMP%]   .input-box[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}[_nghost-%COMP%]   .right-padding[_ngcontent-%COMP%]{padding-right:8px}[_nghost-%COMP%]   .input-action-txt[_ngcontent-%COMP%]{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);color:var(--scorecard-tableEditRowForegroundColor);padding-top:4px}[_nghost-%COMP%]   .input-action-txt[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{color:var(--scorecard-tableRowLinkColor);cursor:pointer;text-decoration:none;background-color:transparent;border:none;padding:0}[_nghost-%COMP%]   .input-action-txt[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]:hover{color:var(--fluent-theme-link-darker-color, #005A9E)}[_nghost-%COMP%]   .input-action-txt[_ngcontent-%COMP%]   .link.inactive[_ngcontent-%COMP%]{color:var(--fluent-theme-neutral-tertia-color, #A19F9D);pointer-events:none}[_nghost-%COMP%]   .divider[_ngcontent-%COMP%]{padding-top:8px;padding-bottom:8px}[_nghost-%COMP%]   .divider[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:1px;height:100%;background-color:var(--gray-80, #B3B0AD);margin:0 12px}[_nghost-%COMP%]   .width-override[_ngcontent-%COMP%]{width:24px}[_nghost-%COMP%]     .mat-form-field{background:var(--scorecard-tableInputBackgroundColor)!important}[_nghost-%COMP%]     emails-list-modern.disabled .mat-form-field{filter:brightness(95%)}[_nghost-%COMP%]   .goal-owners-input[_ngcontent-%COMP%]{padding-bottom:9px}[_nghost-%COMP%]   goal-value-input[_ngcontent-%COMP%]{flex:1 0 260px;max-width:400px}[_nghost-%COMP%]   .input-box-xs[_ngcontent-%COMP%]{flex:1 1 100px;max-width:140px;min-width:110px}[_nghost-%COMP%]   .input-box-sm[_ngcontent-%COMP%]{flex:1 1 100px;max-width:200px;min-width:140px}[_nghost-%COMP%]   .input-box-md[_ngcontent-%COMP%]{flex:1 1 200px;max-width:300px;min-width:130px}[_nghost-%COMP%]   .input-box-lg[_ngcontent-%COMP%]{flex:1 1 250px;min-width:150px}[_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),U}()},39947:function(lt,Ge,t){"use strict";t.d(Ge,{Q:function(){return m}});var r=t(98925),o=t(50423),P=t(65181),a=t(20930),d=t(77476),p=t(57746),l=t(55710),c=t(86663),y=t(74913),i=t(85102),C=function(I){return{isNew:I}};function v(O,I){if(1&O&&(o.\u0275\u0275elementStart(0,"span",15),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&O){var H=o.\u0275\u0275nextContext();o.\u0275\u0275property("ngClass",o.\u0275\u0275pureFunction1(2,C,H.goal.isNew&&!H.selectedValue)),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(H.currentStatus)}}function k(O,I){1&O&&o.\u0275\u0275element(0,"tri-svg-icon",16),2&O&&o.\u0275\u0275property("name","link_20_regular")}var E=function(I){return{selected:I}};function s(O,I){if(1&O){var H=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",6),o.\u0275\u0275listener("click",function(){o.\u0275\u0275restoreView(H);var ie=o.\u0275\u0275nextContext();return o.\u0275\u0275resetView(ie.onValueSelect(ie.allGoalValueOptions[2].value))}),o.\u0275\u0275element(1,"tri-svg-icon",7),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd()}if(2&O){var G=o.\u0275\u0275nextContext();o.\u0275\u0275property("disabled",!G.capabilities.selectMultiple)("ngClass",o.\u0275\u0275pureFunction1(5,E,(null==G.selectedValue?null:G.selectedValue.type)===G.allGoalValueOptions[2].value.type)),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngClass",(null==G.selectedValue?null:G.selectedValue.type)===G.allGoalValueOptions[2].value.type?"show-checkmark":"hide-checkmark")("name","checkmark_20_regular"),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",G.allGoalValueOptions[2].displayName," ")}}function ne(O,I){if(1&O){var H=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",17),o.\u0275\u0275listener("click",function(){o.\u0275\u0275restoreView(H);var ie=o.\u0275\u0275nextContext();return o.\u0275\u0275resetView(ie.onValueSelect(ie.allGoalValueOptions[1].value))}),o.\u0275\u0275element(1,"tri-svg-icon",18),o.\u0275\u0275text(2),o.\u0275\u0275pipe(3,"localize"),o.\u0275\u0275elementEnd()}if(2&O){var G=o.\u0275\u0275nextContext();o.\u0275\u0275property("disabled",!G.capabilities.selectConnect),o.\u0275\u0275advance(1),o.\u0275\u0275property("name","edit_20_regular"),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",o.\u0275\u0275pipeBind1(3,3,"Rollups_Connect_Edit")," ")}}function te(O,I){if(1&O){var H=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",17),o.\u0275\u0275listener("click",function(){o.\u0275\u0275restoreView(H);var ie=o.\u0275\u0275nextContext();return o.\u0275\u0275resetView(ie.onValueSelect(ie.allGoalValueOptions[2].value))}),o.\u0275\u0275element(1,"tri-svg-icon",18),o.\u0275\u0275text(2),o.\u0275\u0275pipe(3,"localize"),o.\u0275\u0275elementEnd()}if(2&O){var G=o.\u0275\u0275nextContext();o.\u0275\u0275property("disabled",!G.capabilities.selectMultiple),o.\u0275\u0275advance(1),o.\u0275\u0275property("name","edit_20_regular"),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",o.\u0275\u0275pipeBind1(3,3,G.isGoalCurrentValuePicker?"Rollups_Multiple_Values_Edit":"Rollups_Multiple_Targets_Edit")," ")}}function X(O,I){if(1&O){var H=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"button",17),o.\u0275\u0275listener("click",function(){var ae=o.\u0275\u0275restoreView(H).$implicit,J=o.\u0275\u0275nextContext();return o.\u0275\u0275resetView(J.onSelectRollup(ae))}),o.\u0275\u0275element(2,"tri-svg-icon",19),o.\u0275\u0275text(3),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerEnd()}if(2&O){var G=I.$implicit,Z=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("disabled",!Z.capabilities.selectRollup),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngClass",(null==Z.selectedValue?null:Z.selectedValue.rollupType)===G?"show-checkmark":"hide-checkmark")("name","checkmark_20_regular"),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",Z.metricRollupDisplayNames[G]," ")}}var m=function(){function O(I,H,G){this.localizationService=I,this.changeDetector=H,this.goalsTutorialService=G,this.onCurrentSelection=new o.EventEmitter,this.MetricRollupOptions=[1,2,4,3],this.isSelected=!1,this.isSubmetricSelected=!1,this.capabilities={},this.allGoalValueOptions=[],this.metricRollupDisplayNames={},this.setOptions()}return O.prototype.ngOnInit=function(){this.isGoalCurrentValuePicker=1===this.goalValueType},O.prototype.ngOnChanges=function(I){var H,G;if(I.goal&&(this.isCategorical=!!this.goal.valuesCategoryId,this.showGoalRollupsCoachmark&&this.goalsTutorialService.startGoalRollupsTutorial()),I.goalCapabilities&&(this.capabilities={editCalculation:this.goalCapabilities.editCalculationType,selectManual:!0,selectRollup:this.goalCapabilities.usePickerRollup,selectConnect:this.isGoalCurrentValuePicker?this.goalCapabilities.connectCurrentValueToData:this.goalCapabilities.connectTargetValueToData,selectMultiple:this.isGoalCurrentValuePicker?this.goalCapabilities.editMultipleValues:this.goalCapabilities.editMultipleTargets}),I.currentGoalValueTypeSelection){if(_.isUndefined(null===(G=null===(H=I.currentGoalValueTypeSelection)||void 0===H?void 0:H.currentValue)||void 0===G?void 0:G.rollupType))this.isSubmetricSelected=!1,this.selectedValue=I.currentGoalValueTypeSelection.currentValue,this.currentStatus=void 0===this.selectedValue?this.localizationService.get("Set_Up"):this.allGoalValueOptions[I.currentGoalValueTypeSelection.currentValue.type].buttonText;else{this.isSubmetricSelected=!0,this.selectedValue=I.currentGoalValueTypeSelection.currentValue;var Z=(0,r.t)(I.currentGoalValueTypeSelection.currentValue.rollupType);this.selectedValue.rollupType=Z,this.currentStatus=void 0===this.selectedValue?this.localizationService.get("Set_Up"):this.metricRollupDisplayNames[Z]}this.changeDetector.markForCheck()}},O.prototype.setOptions=function(){this.metricRollupDisplayNames=(0,r.P)(this.localizationService),this.allGoalValueOptions=[{displayName:this.localizationService.get("Rollups_Manual_Metric"),value:{type:0},buttonText:this.localizationService.get("Rollups_Manual")},{displayName:this.localizationService.get("Rollups_Connect_To_Data"),value:{type:1},buttonText:""},{displayName:this.localizationService.get("Rollups_Multiple_Targets"),value:{type:2},buttonText:this.localizationService.get("Rollups_Multiple")}]},O.prototype.onValueSelect=function(I){this.onCurrentSelection.emit(I)},O.prototype.onSelectRollup=function(I){this.onCurrentSelection.emit({type:4,rollupType:I})},O.\u0275fac=function(H){return new(H||O)(o.\u0275\u0275directiveInject(P.o),o.\u0275\u0275directiveInject(o.ChangeDetectorRef),o.\u0275\u0275directiveInject(a.N))},O.\u0275cmp=o.\u0275\u0275defineComponent({type:O,selectors:[["goal-value-type-picker"]],inputs:{goal:"goal",hasMultipleTargets:"hasMultipleTargets",goalValueType:"goalValueType",currentGoalValueTypeSelection:"currentGoalValueTypeSelection",goalCapabilities:"goalCapabilities",showGoalRollupsCoachmark:"showGoalRollupsCoachmark"},outputs:{onCurrentSelection:"onCurrentSelection"},features:[o.\u0275\u0275NgOnChangesFeature],decls:26,vars:35,consts:[["mat-button","","cdkMonitorElementFocus","","data-testid","goal-value-input-menu-btn",1,"goal-value-input-menu-trigger",3,"matMenuTriggerFor","disabled"],[3,"ngClass",4,"ngIf"],[3,"name",4,"ngIf"],[1,"chevron-down",3,"name"],["xPosition","before",1,"goal-value-input-menu",3,"overlapTrigger"],["goalValueInputMenu","matMenu"],["mat-menu-item","",3,"disabled","ngClass","click"],[1,"margin-right",3,"ngClass","name"],["mat-menu-item","",1,"goal-value-input-sub-menu-button","submetrics-menu-trigger",3,"disabled","matMenuTriggerFor"],["name","chevronrightmedium","size","mini"],["mat-menu-item","",3,"disabled","ngClass","click",4,"ngIf"],["mat-menu-item","",3,"disabled","click",4,"ngIf"],[1,"goal-value-input-sub-menu",3,"overlapTrigger"],["goalValueInputRollupsMenu","matMenu"],[4,"ngFor","ngForOf"],[3,"ngClass"],[3,"name"],["mat-menu-item","",3,"disabled","click"],[1,"margin-right",3,"name"],[1,"margin-right-sub-menu",3,"ngClass","name"]],template:function(H,G){if(1&H&&(o.\u0275\u0275elementStart(0,"button",0),o.\u0275\u0275pipe(1,"localize"),o.\u0275\u0275template(2,v,2,4,"span",1),o.\u0275\u0275template(3,k,1,1,"tri-svg-icon",2),o.\u0275\u0275element(4,"tri-svg-icon",3),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"mat-menu",4,5)(7,"button",6),o.\u0275\u0275listener("click",function(){return G.onValueSelect(G.allGoalValueOptions[0].value)}),o.\u0275\u0275element(8,"tri-svg-icon",7),o.\u0275\u0275text(9),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(10,"button",8)(11,"div"),o.\u0275\u0275element(12,"tri-svg-icon",7),o.\u0275\u0275text(13),o.\u0275\u0275pipe(14,"localize"),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(15,"pbi-icon",9),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(16,"button",6),o.\u0275\u0275listener("click",function(){return G.onValueSelect(G.allGoalValueOptions[1].value)}),o.\u0275\u0275element(17,"tri-svg-icon",7),o.\u0275\u0275text(18),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(19,s,3,7,"button",10),o.\u0275\u0275element(20,"mat-divider"),o.\u0275\u0275template(21,ne,4,5,"button",11),o.\u0275\u0275template(22,te,4,5,"button",11),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(23,"mat-menu",12,13),o.\u0275\u0275template(25,X,4,4,"ng-container",14),o.\u0275\u0275elementEnd()),2&H){var ye,Z=o.\u0275\u0275reference(6),ie=o.\u0275\u0275reference(24);o.\u0275\u0275property("matMenuTriggerFor",Z)("disabled",!G.capabilities.editCalculation),o.\u0275\u0275attribute("aria-label",null!==(ye=G.currentStatus)&&void 0!==ye?ye:o.\u0275\u0275pipeBind1(1,27,"Set_Up")),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",(null==G.selectedValue?null:G.selectedValue.type)!==G.allGoalValueOptions[1].value.type),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",(null==G.selectedValue?null:G.selectedValue.type)===G.allGoalValueOptions[1].value.type),o.\u0275\u0275advance(1),o.\u0275\u0275property("name","chevron_down_20_regular"),o.\u0275\u0275advance(1),o.\u0275\u0275property("overlapTrigger",!1),o.\u0275\u0275advance(2),o.\u0275\u0275property("disabled",!G.capabilities.selectManual||!G.isGoalCurrentValuePicker&&G.hasMultipleTargets)("ngClass",o.\u0275\u0275pureFunction1(31,E,(null==G.selectedValue?null:G.selectedValue.type)===G.allGoalValueOptions[0].value.type)),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngClass",(null==G.selectedValue?null:G.selectedValue.type)===G.allGoalValueOptions[0].value.type?"show-checkmark":"hide-checkmark")("name","checkmark_20_regular"),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",G.allGoalValueOptions[0].displayName," "),o.\u0275\u0275advance(1),o.\u0275\u0275property("disabled",!G.capabilities.selectRollup)("matMenuTriggerFor",ie),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngClass",G.isSubmetricSelected?"show-checkmark":"hide-checkmark")("name","checkmark_20_regular"),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(o.\u0275\u0275pipeBind1(14,29,"Rollups_Use_Submetrics")),o.\u0275\u0275advance(3),o.\u0275\u0275property("disabled",!G.capabilities.selectConnect)("ngClass",o.\u0275\u0275pureFunction1(33,E,(null==G.selectedValue?null:G.selectedValue.type)===G.allGoalValueOptions[1].value.type)),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngClass",(null==G.selectedValue?null:G.selectedValue.type)===G.allGoalValueOptions[1].value.type?"show-checkmark":"hide-checkmark")("name","checkmark_20_regular"),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",G.allGoalValueOptions[1].displayName," "),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!G.isGoalCurrentValuePicker),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",!!G.goal.valueConnection&&G.isGoalCurrentValuePicker||!!G.goal.targetConnection&&!G.isGoalCurrentValuePicker),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!G.isCategorical&&G.isGoalCurrentValuePicker&&(null==G.selectedValue?null:G.selectedValue.type)===G.allGoalValueOptions[0].value.type||!G.isGoalCurrentValuePicker&&(null==G.selectedValue?null:G.selectedValue.type)===G.allGoalValueOptions[2].value.type),o.\u0275\u0275advance(1),o.\u0275\u0275property("overlapTrigger",!1),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngForOf",G.MetricRollupOptions)}},dependencies:[d.NgClass,d.NgForOf,d.NgIf,p.d,l.W0,l.tN,l.D8,c._,y.M,i.F],styles:['.goal-value-input-menu-trigger[_ngcontent-%COMP%]{padding:6px 8px;width:100%;background:none;border:1px solid var(--gray-110, #8A8886);border-radius:2px;display:flex;flex-direction:row}.goal-value-input-menu-trigger[_ngcontent-%COMP%]   pbi-icon[_ngcontent-%COMP%]{padding-left:4px;padding-top:4px}.goal-value-input-menu-trigger[_ngcontent-%COMP%]:active, .goal-value-input-menu-trigger[_ngcontent-%COMP%]:hover:not(:disabled){background-color:var(--gray-88, #E0E0E0)}.goal-value-input-menu-trigger[_ngcontent-%COMP%]:disabled{color:var(--gray-90, #A19F9D);background-color:var(--gray-20, #F3F2F1);border-color:var(--gray-20, #F3F2F1)}button[_ngcontent-%COMP%]{font-size:var(--md-font-size, 14px);color:var(--fluent-theme-neutral-primary-color, #323130);padding:6px 12px;height:32px}button[_ngcontent-%COMP%]   .isNew[_ngcontent-%COMP%]{color:var(--fluent-theme-link-darker-color, #005A9E)}button[_ngcontent-%COMP%]   tri-svg-icon.chevron-down[_ngcontent-%COMP%]{height:16px;width:16px;margin:2px;padding-left:4px}button[_ngcontent-%COMP%]   tri-svg-icon.margin-right[_ngcontent-%COMP%]{margin-right:8px}button[_ngcontent-%COMP%]   tri-svg-icon.margin-right-sub-menu[_ngcontent-%COMP%]{margin-right:6px}button[_ngcontent-%COMP%]   .show-checkmark[_ngcontent-%COMP%]{visibility:visible}button[_ngcontent-%COMP%]   .hide-checkmark[_ngcontent-%COMP%]{visibility:hidden}button[_ngcontent-%COMP%]:active, button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:var(--gray-96, #F5F5F5)}button[_ngcontent-%COMP%]:disabled   tri-svg-icon[_ngcontent-%COMP%]{opacity:50%}  .goal-value-input-menu-trigger .sort-icon .mat-icon{margin:0 4px}  .mat-menu-panel.goal-value-input-sub-menu{min-height:fit-content;transform:translateY(8px);width:100px;min-width:100px}  .goal-value-input-menu .mat-menu-item{padding-left:8px}  .goal-value-input-menu .mat-menu-content{width:190px;min-width:190px}  .goal-value-input-sub-menu .mat-menu-content{width:100px;min-width:100px}  .goal-value-input-sub-menu .mat-menu-content button{width:100px;min-width:100px}  .goal-rollups-tutorial.tutorial-popup .box{background-color:var(--gray-130, #605E5C)}  .goal-rollups-tutorial.tutorial-popup .box .arrow{background-color:var(--gray-130, #605E5C)}  .goal-rollups-tutorial.tutorial-popup .box .title{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--xlg-font-size, 20px);font-weight:var(--font-weight-semi-bold, 600)}  .goal-rollups-tutorial.tutorial-popup .box .text{margin:10px 10px 0;line-height:22px;font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-regular, 400)}.mat-menu-item[_ngcontent-%COMP%]{color:var(--gray-180, #252423);display:flex;flex-direction:row;align-items:center}.mat-menu-item[_ngcontent-%COMP%]   pbi-icon[_ngcontent-%COMP%]{display:flex}.mat-menu-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:inherit;display:flex;align-items:center}.mat-menu-item.goal-value-input-sub-menu-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.mat-menu-item[_ngcontent-%COMP%]:active, .mat-menu-item[_ngcontent-%COMP%]:hover{background-color:var(--gray-96, #F5F5F5)}.mat-menu-item[_ngcontent-%COMP%]:disabled{color:var(--gray-90, #A19F9D)}.selected[_ngcontent-%COMP%]{pointer-events:none;user-select:none;-webkit-user-select:none;-ms-user-select:none;-moz-user-select:none}'],changeDetection:0}),O}()},84522:function(lt,Ge,t){"use strict";t.d(Ge,{S:function(){return G}});var r=t(81337),o=t(14786),P=t(32293),a=t(11962),d=t(46544),p=t(30794),l=t(48787),c=t(70864),y=t(50423),i=t(65181),C=t(77476),v=t(44408),k=t(44641),E=t(24326),s=t(5432),ne=t(23873),te=t(85102);function X(Z,ie){if(1&Z&&y.\u0275\u0275element(0,"message-banner",12),2&Z){var ye=y.\u0275\u0275nextContext();y.\u0275\u0275property("viewModel",ye.messageBanner)}}function m(Z,ie){1&Z&&y.\u0275\u0275element(0,"mat-icon",13)}function O(Z,ie){1&Z&&y.\u0275\u0275element(0,"mat-icon",14)}function I(Z,ie){1&Z&&y.\u0275\u0275element(0,"pbi-spinner",15)}function H(Z,ie){if(1&Z){var ye=y.\u0275\u0275getCurrentView();y.\u0275\u0275elementStart(0,"div",16)(1,"tri-grid",17,18),y.\u0275\u0275listener("rowsChange",function(N){y.\u0275\u0275restoreView(ye);var he=y.\u0275\u0275nextContext();return y.\u0275\u0275resetView(he.onRowUpdate(N))}),y.\u0275\u0275elementEnd()()}if(2&Z){var ae=y.\u0275\u0275nextContext();y.\u0275\u0275advance(1),y.\u0275\u0275property("rows",ae.gridData)("columns",ae.columnsConfig)}}var G=function(){function Z(ie,ye,ae,J,N){this.dialogRef=ie,this.localizationService=ae,this.telemetryService=J,this.changeDetector=N,this.isFullScreen=!1,this.onDestroy$=new p.xQ,this.resultType=2,this.ValueColumnIndex=0,this.DateAddedColumnIndex=1,this.telemetryService.logEvent(o.Bn),this.goal$=ye.goal$,this.goalValues$=ye.goalValues$,this.onDoneCallback=ye.onDoneCallback,this.columnsConfig=[{name:this.localizationService.get("Visual_Tablix_Values"),type:"Number",width:Z.GridColumnWidthInPx},{name:this.localizationService.get("Date"),type:"Date",width:Z.GridColumnWidthInPx}],this.DuplicateCurrentValueDates={bannerType:1,iconName:Z.ErrorIcon,message:this.localizationService.get("Metrics_Values_Editor_Error_Duplicate_Current_Value_Dates")},this.MissingCurrentValueDate={bannerType:1,iconName:Z.ErrorIcon,message:this.localizationService.get("Metrics_Values_Editor_Error_Missing_Current_Value_Date")},this.MissingCurrentValue={bannerType:1,iconName:Z.ErrorIcon,message:this.localizationService.get("Metrics_Values_Editor_Error_Missing_Current_Value")}}return Z.prototype.ngOnInit=function(){var ie=this;this.goal$.pipe((0,l.q)(1)).subscribe(function(ye){ie.columnsConfig=[(0,r.pi)((0,r.pi)({},ie.columnsConfig[ie.ValueColumnIndex]),{formatString:ye.valuesFormatString}),(0,r.pi)((0,r.pi)({},ie.columnsConfig[ie.DateAddedColumnIndex]),{formatString:ye.datesFormatString})]}),this.goalValues$.pipe((0,l.q)(1)).subscribe(function(ye){ie.gridData=ye.map(function(ae){return[ae.value,new Date(ae.timestamp)]}),ie.changeDetector.markForCheck()})},Z.prototype.ngAfterViewInit=function(){var ie=this;this.columnsConfig=_.map(this.columnsConfig,function(ye){return ye.template=ie.formatSwitchCellTemplate.formatSwitchCell,ye})},Z.prototype.ngOnDestroy=function(){this.onDestroy$.next(),this.onDestroy$.complete()},Z.prototype.onRowUpdate=function(ie){this.gridData=ie},Z.prototype.toggleFullScreen=function(){this.isFullScreen?(this.dialogRef.updateSize("70%","80%"),this.isFullScreen=!1):(this.dialogRef.updateSize("100%","100%"),this.isFullScreen=!0)},Z.prototype.close=function(){this.telemetryService.logEvent(o.V8),this.dialogRef.close()},Z.prototype.onDone=function(){return(0,r.mG)(this,void 0,void 0,function(){var ie,ye,ae,J,N;return(0,r.Jh)(this,function(he){if(this.gridData=this.gridEditor.flushPendingChanges(),(ie=this.gridData.filter(function(pe){return!(_.isNil(pe[0])&&_.isNil(pe[1]))}).map(function(pe){return{timestamp:_.isNil(pe[1])?void 0:pe[1],value:_.isNil(pe[0])?void 0:pe[0]}})).find(function(pe){return _.isNil(pe.timestamp)&&!_.isNil(pe.value)}))return this.messageBanner=this.MissingCurrentValueDate,[2];if(ie.find(function(pe){return!_.isNil(pe.timestamp)&&_.isNil(pe.value)}))return this.messageBanner=this.MissingCurrentValue,[2];for(ye=new Set,ae=0,J=ie;ae<J.length;ae++){if(ye.has((N=J[ae].timestamp).getTime()))return this.messageBanner=this.DuplicateCurrentValueDates,[2];ye.add(N.getTime())}return this.onDoneCallback(ie.map(function(pe){return{timestamp:pe.timestamp.toISOString(),value:pe.value}}),this.columnsConfig[this.ValueColumnIndex].formatString),this.telemetryService.logEvent(o.GW),this.dialogRef.close(),[2]})})},Z.prototype.valueFormatStringChanged=function(ie){this.columnsConfig=[(0,r.pi)((0,r.pi)({},this.columnsConfig[this.ValueColumnIndex]),{formatString:ie}),this.columnsConfig[1]]},Z.ErrorIcon="pbi-glyph-blocked2",Z.GridColumnWidthInPx=200,Z.\u0275fac=function(ye){return new(ye||Z)(y.\u0275\u0275directiveInject(P.so),y.\u0275\u0275directiveInject(P.WI),y.\u0275\u0275directiveInject(i.o),y.\u0275\u0275directiveInject(d.y0),y.\u0275\u0275directiveInject(y.ChangeDetectorRef))},Z.\u0275cmp=y.\u0275\u0275defineComponent({type:Z,selectors:[["goal-values-editor"]],viewQuery:function(ye,ae){if(1&ye&&(y.\u0275\u0275viewQuery(a.oY,5),y.\u0275\u0275viewQuery(c.F,5)),2&ye){var J=void 0;y.\u0275\u0275queryRefresh(J=y.\u0275\u0275loadQuery())&&(ae.gridEditor=J.first),y.\u0275\u0275queryRefresh(J=y.\u0275\u0275loadQuery())&&(ae.formatSwitchCellTemplate=J.first)}},decls:27,vars:29,consts:[[3,"viewModel",4,"ngIf"],[1,"title"],["mat-icon-button","",1,"pbi-icon-button",3,"click"],["class","glyph-small","fontIcon","pbi-glyph-fullscreen",4,"ngIf"],["class","glyph-small","fontIcon","pbi-glyph-fullscreenexit",4,"ngIf"],[1,"values-editor-value-formatting-box"],[1,"goals-value-formatting",3,"formatString","dataType","formatStringChange"],["class","pbi-spinner-large",4,"ngIf","ngIfElse"],["showGrid",""],[1,"actions"],[1,"pbi-fluent-button","primary",3,"disabled","click"],[1,"pbi-fluent-button","secondary",3,"click"],[3,"viewModel"],["fontIcon","pbi-glyph-fullscreen",1,"glyph-small"],["fontIcon","pbi-glyph-fullscreenexit",1,"glyph-small"],[1,"pbi-spinner-large"],[1,"grid-container"],[3,"rows","columns","rowsChange"],["gridEditor",""]],template:function(ye,ae){if(1&ye&&(y.\u0275\u0275template(0,X,1,1,"message-banner",0),y.\u0275\u0275elementStart(1,"header")(2,"div",1),y.\u0275\u0275text(3),y.\u0275\u0275pipe(4,"localize"),y.\u0275\u0275elementEnd(),y.\u0275\u0275elementStart(5,"button",2),y.\u0275\u0275listener("click",function(){return ae.toggleFullScreen()}),y.\u0275\u0275pipe(6,"localize"),y.\u0275\u0275template(7,m,1,0,"mat-icon",3),y.\u0275\u0275template(8,O,1,0,"mat-icon",4),y.\u0275\u0275elementEnd()(),y.\u0275\u0275elementStart(9,"section"),y.\u0275\u0275text(10),y.\u0275\u0275pipe(11,"localize"),y.\u0275\u0275elementEnd(),y.\u0275\u0275elementStart(12,"div",5)(13,"value-formatting",6),y.\u0275\u0275listener("formatStringChange",function(he){return ae.valueFormatStringChanged(he)}),y.\u0275\u0275elementEnd()(),y.\u0275\u0275template(14,I,1,0,"pbi-spinner",7),y.\u0275\u0275template(15,H,3,2,"ng-template",null,8,y.\u0275\u0275templateRefExtractor),y.\u0275\u0275element(17,"format-switch-cell-template"),y.\u0275\u0275elementStart(18,"div",9)(19,"button",10),y.\u0275\u0275listener("click",function(){return ae.onDone()}),y.\u0275\u0275pipe(20,"localize"),y.\u0275\u0275text(21),y.\u0275\u0275pipe(22,"localize"),y.\u0275\u0275elementEnd(),y.\u0275\u0275elementStart(23,"button",11),y.\u0275\u0275listener("click",function(){return ae.close()}),y.\u0275\u0275pipe(24,"localize"),y.\u0275\u0275text(25),y.\u0275\u0275pipe(26,"localize"),y.\u0275\u0275elementEnd()()),2&ye){var J=y.\u0275\u0275reference(16);y.\u0275\u0275property("ngIf",ae.messageBanner),y.\u0275\u0275advance(3),y.\u0275\u0275textInterpolate(y.\u0275\u0275pipeBind1(4,15,"Metrics_Values_Editor_Title")),y.\u0275\u0275advance(2),y.\u0275\u0275attribute("aria-label",y.\u0275\u0275pipeBind1(6,17,"Fullscreen_Toggle")),y.\u0275\u0275advance(2),y.\u0275\u0275property("ngIf",!ae.isFullScreen),y.\u0275\u0275advance(1),y.\u0275\u0275property("ngIf",ae.isFullScreen),y.\u0275\u0275advance(2),y.\u0275\u0275textInterpolate1(" ",y.\u0275\u0275pipeBind1(11,19,"Metrics_Values_Editor_Description"),"\n"),y.\u0275\u0275advance(3),y.\u0275\u0275property("formatString",ae.columnsConfig[0].formatString)("dataType",ae.resultType),y.\u0275\u0275advance(1),y.\u0275\u0275property("ngIf",!ae.gridData)("ngIfElse",J),y.\u0275\u0275advance(5),y.\u0275\u0275property("disabled",!ae.gridData),y.\u0275\u0275attribute("aria-label",y.\u0275\u0275pipeBind1(20,21,"Done_ButtonText")),y.\u0275\u0275advance(2),y.\u0275\u0275textInterpolate1(" ",y.\u0275\u0275pipeBind1(22,23,"Done_ButtonText")," "),y.\u0275\u0275advance(2),y.\u0275\u0275attribute("aria-label",y.\u0275\u0275pipeBind1(24,25,"PBI_Button_Label_Cancel")),y.\u0275\u0275advance(2),y.\u0275\u0275textInterpolate1(" ",y.\u0275\u0275pipeBind1(26,27,"PBI_Button_Label_Cancel")," ")}},dependencies:[C.NgIf,v.Hw,k.A,E.k,s.d,ne.o,c.F,te.F],styles:['[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}[_nghost-%COMP%]     .values-editor-value-formatting-box mat-select{height:28px;border:1px solid var(--gray-110, #8A8886);border-radius:2px}[_nghost-%COMP%]     .values-editor-value-formatting-box mat-select .mat-select-value{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);color:var(--fluent-theme-neutral-primary-color, #323130);line-height:20px}[_nghost-%COMP%]     .values-editor-value-formatting-box mat-select .mat-select-arrow{color:var(--gray-140, #484644);padding-right:14px}[_nghost-%COMP%]     .values-editor-value-formatting-box num-up-down .inputRange{height:28px;border:1px solid var(--gray-110, #8A8886);border-radius:2px}[_nghost-%COMP%]     .values-editor-value-formatting-box num-up-down .inputRange .inputUpDown{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);color:var(--fluent-theme-neutral-primary-color, #323130);line-height:20px}[_nghost-%COMP%]     .values-editor-value-formatting-box num-up-down label{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);line-height:20px}[_nghost-%COMP%]     .values-editor-value-formatting-box .valueFormatterToggleButtonsGroup .btn{background-color:transparent;border:none}[_nghost-%COMP%]     .values-editor-value-formatting-box .valueFormatterToggleButtonsGroup .btn:hover{background-color:var(--fluent-theme-neutral-quarter-alt-color, #E1DFDD)}header[_ngcontent-%COMP%]{color:var(--fluent-theme-neutral-dark-color, #201F1E);display:flex;flex-direction:row;align-items:center;justify-content:space-between}header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--xlg-font-size, 20px);font-weight:var(--font-weight-semi-bold, 600)}header[_ngcontent-%COMP%], section[_ngcontent-%COMP%], tri-grid[_ngcontent-%COMP%], .values-editor-value-formatting-box[_ngcontent-%COMP%]{margin-bottom:16px}.actions[_ngcontent-%COMP%]{display:flex;justify-content:end;gap:8px}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   pbi-spinner[_ngcontent-%COMP%]{margin:5px 5px 0 0}.pbi-spinner-large[_ngcontent-%COMP%]{height:100%}.grid-container[_ngcontent-%COMP%]{flex-grow:1}'],changeDetection:0}),Z}()},33279:function(lt,Ge,t){"use strict";t.d(Ge,{E:function(){return ee}});var r=t(81337),o=t(60042),P=t(29730),a=t(34340),d=t(72489),p=t(73221),l=t(14172),c=t(48787),y=t(17653),i=t(81905),C=t(83317),v=t(50423),k=t(21719),E=t(87426),s=t(65181),ne=t(73911),te=t(49223),X=t(64929),m=t(93379),O=t(62087),I=t(77476),H=t(18460),G=t(59968),Z=t(55710),ie=t(86663),ye=t(36858),ae=t(85353),J=t(43847),N=t(85102),he=["nameCell"],pe=["hierarchyGoalCell"],ce=["columnHeader"];function ge(U,Q){if(1&U){var B=v.\u0275\u0275getCurrentView();v.\u0275\u0275elementStart(0,"tree-list",6),v.\u0275\u0275listener("onResizeColumn",function(le){v.\u0275\u0275restoreView(B);var de=v.\u0275\u0275nextContext();return v.\u0275\u0275resetView(de.onResizeColumn(le))})("onExpansionChange",function(le){v.\u0275\u0275restoreView(B);var de=v.\u0275\u0275nextContext();return v.\u0275\u0275resetView(de.onExpansionChange(le))}),v.\u0275\u0275elementEnd()}if(2&U){var w=v.\u0275\u0275nextContext();v.\u0275\u0275classMap(w.heatmapClassname),v.\u0275\u0275property("columns",w.columns)("data",w.goals)("expandedNodeIds",w.expandedGoalIds)("getChildren",w.getSubgoals)("rowHash",w.rowHash)("rowHeight",w.rowHeight)("rowSpacing",w.rowSpacing)("stickyFirstColumn",!0)}}function se(U,Q){if(1&U&&v.\u0275\u0275element(0,"pbi-icon",10),2&U){v.\u0275\u0275nextContext();var B=v.\u0275\u0275reference(5);v.\u0275\u0275property("pbiTooltip",B)}}function De(U,Q){1&U&&(v.\u0275\u0275elementStart(0,"div"),v.\u0275\u0275text(1),v.\u0275\u0275pipe(2,"localize"),v.\u0275\u0275elementEnd()),2&U&&(v.\u0275\u0275advance(1),v.\u0275\u0275textInterpolate1(" ",v.\u0275\u0275pipeBind1(2,1,"Metrics_Tooltip_LinkedHierarchical")," "))}function fe(U,Q){1&U&&(v.\u0275\u0275elementStart(0,"div")(1,"span",15),v.\u0275\u0275text(2),v.\u0275\u0275pipe(3,"localize"),v.\u0275\u0275elementEnd(),v.\u0275\u0275text(4),v.\u0275\u0275pipe(5,"localize"),v.\u0275\u0275elementEnd()),2&U&&(v.\u0275\u0275advance(2),v.\u0275\u0275textInterpolate(v.\u0275\u0275pipeBind1(3,2,"CurrentValue")),v.\u0275\u0275advance(2),v.\u0275\u0275textInterpolate1(" ",v.\u0275\u0275pipeBind1(5,4,"Metrics_Tooltip_ValueAddedManually")," "))}function Oe(U,Q){1&U&&(v.\u0275\u0275elementStart(0,"div")(1,"span",15),v.\u0275\u0275text(2),v.\u0275\u0275pipe(3,"localize"),v.\u0275\u0275elementEnd(),v.\u0275\u0275text(4),v.\u0275\u0275pipe(5,"localize"),v.\u0275\u0275elementEnd()),2&U&&(v.\u0275\u0275advance(2),v.\u0275\u0275textInterpolate(v.\u0275\u0275pipeBind1(3,2,"Role_DisplayName_TargetValue")),v.\u0275\u0275advance(2),v.\u0275\u0275textInterpolate1(" ",v.\u0275\u0275pipeBind1(5,4,"Metrics_Tooltip_ValueAddedManually")," "))}function be(U,Q){if(1&U&&(v.\u0275\u0275template(0,fe,6,6,"div",14),v.\u0275\u0275template(1,Oe,6,6,"div",14)),2&U){var B=v.\u0275\u0275nextContext(2).data;v.\u0275\u0275property("ngIf",!B.valueConnection),v.\u0275\u0275advance(1),v.\u0275\u0275property("ngIf",!B.targetConnection)}}function Fe(U,Q){if(1&U&&(v.\u0275\u0275elementStart(0,"div",11),v.\u0275\u0275template(1,De,3,3,"div",12),v.\u0275\u0275template(2,be,2,2,"ng-template",null,13,v.\u0275\u0275templateRefExtractor),v.\u0275\u0275elementEnd()),2&U){var B=v.\u0275\u0275reference(3),w=v.\u0275\u0275nextContext().data;v.\u0275\u0275advance(1),v.\u0275\u0275property("ngIf",w.isLinked)("ngIfElse",B)}}function ze(U,Q){if(1&U){var B=v.\u0275\u0275getCurrentView();v.\u0275\u0275elementStart(0,"div",7),v.\u0275\u0275listener("click",function(){var de=v.\u0275\u0275restoreView(B).data,V=v.\u0275\u0275nextContext();return v.\u0275\u0275resetView(V.onGoalNameClicked(de))}),v.\u0275\u0275elementStart(1,"span"),v.\u0275\u0275text(2),v.\u0275\u0275elementEnd(),v.\u0275\u0275template(3,se,1,1,"pbi-icon",8),v.\u0275\u0275template(4,Fe,4,2,"ng-template",null,9,v.\u0275\u0275templateRefExtractor),v.\u0275\u0275elementEnd()}if(2&U){var w=Q.data;v.\u0275\u0275advance(2),v.\u0275\u0275textInterpolate(w.name),v.\u0275\u0275advance(1),v.\u0275\u0275property("ngIf",w.isLinked||!w.valueConnection||!w.targetConnection)}}function Ke(U,Q){if(1&U){var B=v.\u0275\u0275getCurrentView();v.\u0275\u0275elementStart(0,"hierarchy-goal-cell",17),v.\u0275\u0275listener("click",function(){v.\u0275\u0275restoreView(B);var M=v.\u0275\u0275nextContext(),L=M.data,x=M.column,Y=v.\u0275\u0275nextContext();return v.\u0275\u0275resetView(Y.openGoalDetails(L,x.data))}),v.\u0275\u0275elementEnd()}if(2&U){var w=v.\u0275\u0275nextContext(),q=w.column,le=w.data,de=v.\u0275\u0275nextContext();v.\u0275\u0275property("goal",null==de.goalsByHierarchyItemIds[q.data.id]?null:de.goalsByHierarchyItemIds[q.data.id][le.id])("scorecard",de.scorecard)("displaySettings",de.displaySettings)("isSelected",q.data.id===de.activeItemId&&le.id===de.scorecard.activeGoalId)}}function je(U,Q){1&U&&v.\u0275\u0275template(0,Ke,1,4,"hierarchy-goal-cell",16),2&U&&v.\u0275\u0275property("ngIf",!Q.data.isLinked||!Q.column.data.id)}function He(U,Q){if(1&U&&(v.\u0275\u0275elementContainerStart(0),v.\u0275\u0275elementStart(1,"div")(2,"span",29),v.\u0275\u0275text(3),v.\u0275\u0275elementEnd(),v.\u0275\u0275elementStart(4,"span"),v.\u0275\u0275text(5),v.\u0275\u0275elementEnd()(),v.\u0275\u0275elementContainerEnd()),2&U){var B=Q.$implicit;v.\u0275\u0275advance(3),v.\u0275\u0275textInterpolate(B.hierarchyName),v.\u0275\u0275advance(2),v.\u0275\u0275textInterpolate1(": ",B.levels.join(" > "),"")}}function Je(U,Q){1&U&&(v.\u0275\u0275elementStart(0,"span",29),v.\u0275\u0275text(1),v.\u0275\u0275pipe(2,"localize"),v.\u0275\u0275elementEnd()),2&U&&(v.\u0275\u0275advance(1),v.\u0275\u0275textInterpolate(v.\u0275\u0275pipeBind1(2,1,"Visual_Totals")))}function j(U,Q){if(1&U&&(v.\u0275\u0275template(0,He,6,2,"ng-container",12),v.\u0275\u0275template(1,Je,3,3,"ng-template",null,28,v.\u0275\u0275templateRefExtractor)),2&U){var B=v.\u0275\u0275reference(2),w=v.\u0275\u0275nextContext().column,q=v.\u0275\u0275nextContext();v.\u0275\u0275property("ngIf",q.hierarchyPathsByKey[w.key])("ngIfElse",B)}}function nt(U,Q){if(1&U){var B=v.\u0275\u0275getCurrentView();v.\u0275\u0275elementStart(0,"button",30),v.\u0275\u0275listener("click",function(){v.\u0275\u0275restoreView(B);var q=v.\u0275\u0275nextContext().column,le=v.\u0275\u0275nextContext();return v.\u0275\u0275resetView(le.removeColumn(q.data))}),v.\u0275\u0275element(1,"pbi-icon",31)(2,"span",32),v.\u0275\u0275elementEnd()}}function Ue(U,Q){if(1&U){var B=v.\u0275\u0275getCurrentView();v.\u0275\u0275elementStart(0,"button",24),v.\u0275\u0275listener("click",function(){v.\u0275\u0275restoreView(B);var le=v.\u0275\u0275nextContext(2);return v.\u0275\u0275resetView(le.hierarchyPane.showHeatmapDisplaySettingsPane())}),v.\u0275\u0275pipe(1,"async"),v.\u0275\u0275element(2,"pbi-icon",33)(3,"span",34),v.\u0275\u0275elementEnd()}if(2&U){var w=v.\u0275\u0275nextContext(2);v.\u0275\u0275property("disabled",v.\u0275\u0275pipeBind1(1,1,w.hierarchyPane.showHeatmapDisplaySettingsPane$))}}function oe(U,Q){if(1&U){var B=v.\u0275\u0275getCurrentView();v.\u0275\u0275elementStart(0,"button",18)(1,"span"),v.\u0275\u0275text(2),v.\u0275\u0275elementEnd(),v.\u0275\u0275element(3,"pbi-icon",19),v.\u0275\u0275elementEnd(),v.\u0275\u0275template(4,j,3,2,"ng-template",null,20,v.\u0275\u0275templateRefExtractor),v.\u0275\u0275elementStart(6,"mat-menu",21,22),v.\u0275\u0275template(8,nt,3,0,"button",23),v.\u0275\u0275elementStart(9,"button",24),v.\u0275\u0275listener("click",function(){v.\u0275\u0275restoreView(B);var M=v.\u0275\u0275nextContext();return v.\u0275\u0275resetView(M.hierarchyPane.showHeatmapConfigurationPane())}),v.\u0275\u0275pipe(10,"async"),v.\u0275\u0275element(11,"pbi-icon",25)(12,"span",26),v.\u0275\u0275elementEnd(),v.\u0275\u0275template(13,Ue,4,3,"button",27),v.\u0275\u0275pipe(14,"async"),v.\u0275\u0275elementEnd()}if(2&U){var w=Q.column,q=v.\u0275\u0275reference(5),le=v.\u0275\u0275reference(7),de=v.\u0275\u0275nextContext();v.\u0275\u0275property("matMenuTriggerFor",le)("pbiTooltip",q),v.\u0275\u0275attribute("aria-label",w.name),v.\u0275\u0275advance(2),v.\u0275\u0275textInterpolate(w.name),v.\u0275\u0275advance(4),v.\u0275\u0275property("overlapTrigger",!1),v.\u0275\u0275advance(2),v.\u0275\u0275property("ngIf",!!w.data.id),v.\u0275\u0275advance(1),v.\u0275\u0275property("disabled",v.\u0275\u0275pipeBind1(10,8,de.hierarchyPane.showHeatmapConfigurationPane$)),v.\u0275\u0275advance(4),v.\u0275\u0275property("ngIf",v.\u0275\u0275pipeBind1(14,10,de.canEditHeatmap$))}}function h(U,Q){if(1&U&&v.\u0275\u0275element(0,"pbi-lazy-load",35),2&U){var B=v.\u0275\u0275nextContext();v.\u0275\u0275property("modulePath",B.hierarchyModulePath)("componentId",B.heatmapConfigurationComponentId)}}function g(U,Q){if(1&U&&v.\u0275\u0275element(0,"pbi-lazy-load",36),2&U){var B=v.\u0275\u0275nextContext();v.\u0275\u0275property("modulePath",B.hierarchyModulePath)("componentId",B.heatmapDisplaySettingsComponentId)}}var u=function(U){return U.Name="name",U}({}),F="TOTAL";function W(U,Q,B,w){void 0===w&&(w=0);for(var q=0,le=U;q<le.length;q++){var de=le[q];if(_.isEmpty(de.children)||W(de.children,Q,B,w+1),Q[de.id]&&(delete Q[de.id],B.push((0,r.pi)((0,r.pi)({},de),{level:w}))),_.isEmpty(Q))return}}var ee=function(U){function Q(B,w,q,le,de,V,M,L,x,Y){var ue=U.call(this)||this;return ue.hierarchyPane=B,ue.hierarchyService=w,ue.detailsPaneLauncher=q,ue.changeDetector=le,ue.localization=de,ue.heatmapService=V,ue.scorecardService=M,ue.scorecardConfigurationService=L,ue.capabilityService=x,ue.expansionService=Y,ue.columnsByKey={},ue.hierarchyPathsByKey={},ue.hierarchyModulePath="@powerbi/GoalsHierarchy/goals-hierarchy.module#GoalsHierarchyModule",ue.heatmapConfigurationComponentId="HeatmapConfigurationPaneComponentId",ue.heatmapDisplaySettingsComponentId="HeatmapDisplaySettingsPaneComponentId",ue.getSubgoals=function(Ne){return ue.getGoalNodes(Ne.subGoals,Ne)},ue.rowHash=function(Ne,$e){return JSON.stringify($e)},ue.rowHeight=50,ue.rowSpacing=8,ue.canEditHeatmap$=ue.capabilityService.getScorecardCapabilities().pipe((0,l.U)(function(Ne){return Ne.editHeatmap})),ue}return(0,r.ZT)(Q,U),Q.prototype.ngOnInit=function(){var B=this;this.hierarchyPane.showHeatmapConfigurationPane();var w=this.scorecardService.getCurrentScorecard().hierarchyPaths;this.hierarchyService.getHierarchyItemsForPath(w).pipe((0,c.q)(1)).subscribe(function(q){return B.heatmapService.loadDefaultView(!0,!0,q)}),this.scorecardService.setActiveHierarchy(void 0),this.scorecardService.getScorecard().pipe((0,y.b)(function(q){B.scorecard=q,B.goals=B.getGoalNodes(q.goals),B.expandedGoalIds=B.expansionService.expandedGoalIds,B.changeDetector.markForCheck()}),(0,i.w)(function(q){return B.hierarchyService.getHierarchyItemsForPath(q.hierarchyPaths)}),(0,C.R)(this.onDestroy$)).subscribe(function(q){B.activeItemId=1===_.size(q)?q[0].id:void 0}),this.heatmapService.goalsByHierarchyItemId$.pipe((0,C.R)(this.onDestroy$)).subscribe(function(q){B.goalsByHierarchyItemIds=q,B.changeDetector.markForCheck()}),this.heatmapService.displaySettings$.pipe((0,C.R)(this.onDestroy$)).subscribe(function(q){B.displaySettings=q;var le="show-value-only";B.displaySettings.showCurrentValue&&B.displaySettings.showValueChange?le=B.displaySettings.showTargetValue?"show-change-target":"show-change-only":B.displaySettings.showCurrentValue&&B.displaySettings.showTargetValue&&(le="show-value-target"),B.heatmapClassname="heat-map "+le,B.changeDetector.markForCheck()})},Q.prototype.ngAfterViewInit=function(){var B=this;this.updateColumns([]),this.heatmapService.selectedHierarchyItems$.pipe((0,C.R)(this.onDestroy$)).subscribe(function(w){B.updateColumns(w),B.changeDetector.markForCheck()})},Q.prototype.getCachedColumn=function(B,w){return this.columnsByKey[B]||(this.columnsByKey[B]=w()),this.columnsByKey[B]},Q.prototype.updateColumns=function(B){var w=this,q=_.flatMap(Object.values(this.hierarchyService.hierarchyItems)),le=_.keyBy(B,function(V){var M;return null!==(M=V.id)&&void 0!==M?M:F}),de=[];W(q,le,de,0),le[F]&&(de.unshift(le[F]),delete le[F]),de.push.apply(de,Object.values(le)),B=de,this.columns=(0,r.ev)([this.getCachedColumn(u.Name,function(){return{key:u.Name,name:w.localization.get("Name"),width:400,cellTemplate:w.nameCell}})],_.map(B,function(V){return w.getCachedColumn(V.id,function(){return{key:V.id,name:(0,d.WU)(V.value),class:"column-center-name",resizable:!1,headerTemplate:w.columnHeader,cellTemplate:w.hierarchyGoalCell,data:V}})}),!0),B.forEach(function(V){if(V.id&&!w.hierarchyPathsByKey[V.id]){var M=(0,P.IX)(V);w.hierarchyPathsByKey[V.id]=w.hierarchyService.formatHierarchyItemPath(M)}})},Q.prototype.onGoalNameClicked=function(B){this.detailsPaneLauncher.openGoalDetails(this.scorecardService,B.id,a.E.Default,this.scorecardConfigurationService.getConfiguration()),this.changeDetector.markForCheck()},Q.prototype.openGoalDetails=function(B,w){var q;return(0,r.mG)(this,void 0,void 0,function(){return(0,r.Jh)(this,function(le){switch(le.label){case 0:return null!==(q=this.goalsByHierarchyItemIds[w?.id])&&void 0!==q&&q[B.id]?[4,this.scorecardService.setActiveHierarchy(w?.id?(0,P.t7)([w]):void 0)]:[3,2];case 1:le.sent(),this.detailsPaneLauncher.openGoalDetails(this.scorecardService,B.id,a.E.Default,this.scorecardConfigurationService.getConfiguration()),this.changeDetector.markForCheck(),le.label=2;case 2:return[2]}})})},Q.prototype.removeColumn=function(B){this.heatmapService.removeHierarchyItem(B)},Q.prototype.onResizeColumn=function(B){this.columns[B.column].width=B.width},Q.prototype.onExpansionChange=function(B){this.expansionService.expandGoals(B.added),this.expansionService.collapseGoals(B.removed)},Q.prototype.getGoalNodes=function(B,w){return _.map(_.filter(B,function(q){return!q.isNew&&!q.isHidden}),function(q,le){return(0,r.pi)((0,r.pi)({},q),{style:w?w.style:{"border-color":o.gT.ColorPalette[le%o.gT.ColorPalette.length]},class:!1===q.isFilterMatch?"goal-not-match":""})})},Q.\u0275fac=function(w){return new(w||Q)(v.\u0275\u0275directiveInject(k.D),v.\u0275\u0275directiveInject(E.G),v.\u0275\u0275directiveInject(a.c),v.\u0275\u0275directiveInject(v.ChangeDetectorRef),v.\u0275\u0275directiveInject(s.o),v.\u0275\u0275directiveInject(ne.$),v.\u0275\u0275directiveInject(te.G),v.\u0275\u0275directiveInject(X.V),v.\u0275\u0275directiveInject(m.Nw),v.\u0275\u0275directiveInject(O.l))},Q.\u0275cmp=v.\u0275\u0275defineComponent({type:Q,selectors:[["heat-map"]],viewQuery:function(w,q){if(1&w&&(v.\u0275\u0275viewQuery(he,5),v.\u0275\u0275viewQuery(pe,5),v.\u0275\u0275viewQuery(ce,5)),2&w){var le=void 0;v.\u0275\u0275queryRefresh(le=v.\u0275\u0275loadQuery())&&(q.nameCell=le.first),v.\u0275\u0275queryRefresh(le=v.\u0275\u0275loadQuery())&&(q.hierarchyGoalCell=le.first),v.\u0275\u0275queryRefresh(le=v.\u0275\u0275loadQuery())&&(q.columnHeader=le.first)}},features:[v.\u0275\u0275InheritDefinitionFeature],decls:11,vars:7,consts:[[3,"class","columns","data","expandedNodeIds","getChildren","rowHash","rowHeight","rowSpacing","stickyFirstColumn","onResizeColumn","onExpansionChange",4,"ngIf"],["nameCell",""],["hierarchyGoalCell",""],["columnHeader",""],["class","configuration-pane",3,"modulePath","componentId",4,"ngIf"],["class","display-settings-pane",3,"modulePath","componentId",4,"ngIf"],[3,"columns","data","expandedNodeIds","getChildren","rowHash","rowHeight","rowSpacing","stickyFirstColumn","onResizeColumn","onExpansionChange"],[1,"name",3,"click"],["class","name-info","name","info","size","mini",3,"pbiTooltip",4,"ngIf"],["infoTooltip",""],["name","info","size","mini",1,"name-info",3,"pbiTooltip"],[1,"goal-info-tooltip"],[4,"ngIf","ngIfElse"],["manualTooltip",""],[4,"ngIf"],[1,"tooltip-value-label"],[3,"goal","scorecard","displaySettings","isSelected","click",4,"ngIf"],[3,"goal","scorecard","displaySettings","isSelected","click"],["mat-button","","cdkMonitorElementFocus","",1,"heatmap-column-header",3,"matMenuTriggerFor","pbiTooltip"],["name","chevrondownsmall","size","mini",1,"chevrondown"],["hierarchyPathTooltip",""],["xPosition","after",1,"heatmap-column-menu",3,"overlapTrigger"],["heatmapColumnMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"disabled","click"],["name","edit","size","small",1,"icon"],["localize","MetricsCustomizeHeatmap"],["mat-menu-item","",3,"disabled","click",4,"ngIf"],["total",""],[1,"tooltip-hierarchy-name"],["mat-menu-item","",3,"click"],["name","delete","size","small",1,"icon"],["localize","MetricsHierarchy_Builder_Remove_Level"],["name","settings","size","small",1,"icon"],["localize","DisplaySettings_Open"],[1,"configuration-pane",3,"modulePath","componentId"],[1,"display-settings-pane",3,"modulePath","componentId"]],template:function(w,q){1&w&&(v.\u0275\u0275template(0,ge,1,10,"tree-list",0),v.\u0275\u0275template(1,ze,6,2,"ng-template",null,1,v.\u0275\u0275templateRefExtractor),v.\u0275\u0275template(3,je,1,1,"ng-template",null,2,v.\u0275\u0275templateRefExtractor),v.\u0275\u0275template(5,oe,15,12,"ng-template",null,3,v.\u0275\u0275templateRefExtractor),v.\u0275\u0275template(7,h,1,2,"pbi-lazy-load",4),v.\u0275\u0275pipe(8,"async"),v.\u0275\u0275template(9,g,1,2,"pbi-lazy-load",5),v.\u0275\u0275pipe(10,"async")),2&w&&(v.\u0275\u0275property("ngIf",q.scorecard),v.\u0275\u0275advance(7),v.\u0275\u0275property("ngIf",v.\u0275\u0275pipeBind1(8,3,q.hierarchyPane.showHeatmapConfigurationPane$)),v.\u0275\u0275advance(2),v.\u0275\u0275property("ngIf",v.\u0275\u0275pipeBind1(10,5,q.hierarchyPane.showHeatmapDisplaySettingsPane$)))},dependencies:[I.NgIf,H.R,G.X,Z.W0,Z.tN,Z.D8,ie._,ye.V,ae.d,J.$,I.AsyncPipe,N.F],styles:["[_nghost-%COMP%]{display:flex;flex-direction:row}[_nghost-%COMP%]   .heat-map[_ngcontent-%COMP%]{flex:1;overflow:hidden;padding-left:30px;--column-headers-backgroundColor: var(--scorecard-tableBackgroundColor);--row-backgroundColor: var(--scorecard-tableRowBackgroundColor)}[_nghost-%COMP%]   .heat-map.show-value-only[_ngcontent-%COMP%]{--cell-width: 88px}[_nghost-%COMP%]   .heat-map.show-value-target[_ngcontent-%COMP%]{--cell-width: 152px}[_nghost-%COMP%]   .heat-map.show-change-only[_ngcontent-%COMP%]{--cell-width: 132px}[_nghost-%COMP%]   .heat-map.show-change-target[_ngcontent-%COMP%]{--cell-width: 208px}[_nghost-%COMP%]   .name[_ngcontent-%COMP%]{display:inline-block;white-space:nowrap;overflow:hidden;height:100%;display:flex;align-items:center;flex:1}[_nghost-%COMP%]   .name[_ngcontent-%COMP%]:hover{text-decoration:underline}[_nghost-%COMP%]   .name[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden}[_nghost-%COMP%]   .name[_ngcontent-%COMP%]   .name-info[_ngcontent-%COMP%]{margin:0 6px}[_nghost-%COMP%]   .heatmap-column-header[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;align-items:flex-start;justify-content:flex-start;padding:0;background:none;border:none}[_nghost-%COMP%]   .heatmap-column-header[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .heatmap-column-header[_ngcontent-%COMP%]:focus:hover, [_nghost-%COMP%]   .heatmap-column-header[_ngcontent-%COMP%]:active, [_nghost-%COMP%]   .heatmap-column-header[_ngcontent-%COMP%]:focus:hover:active{background-color:var(--fluent-theme-neutral-lighter-color, #F3F2F1)}[_nghost-%COMP%]   .heatmap-column-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-left:6px;overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .heatmap-column-header[_ngcontent-%COMP%]   pbi-icon[_ngcontent-%COMP%]{padding:6px}[_nghost-%COMP%]   .configuration-pane[_ngcontent-%COMP%]{border-left:1px solid var(--gray-50, #D2D0CE)}[_nghost-%COMP%]   .configuration-pane[_ngcontent-%COMP%]     pbi-side-pane{width:450px}[_nghost-%COMP%]     .column-center-name{justify-content:center}[_nghost-%COMP%]     .heat-map .column-headers{padding-left:6px}[_nghost-%COMP%]     .heat-map .column-headers .header{width:var(--cell-width)}[_nghost-%COMP%]     .row{border-left:6px solid transparent;border-radius:4px 8px 8px 4px;box-shadow:0 0 2px var(--colorNeutralShadowAmbient),0 2px 4px var(--colorNeutralShadowKey)}[_nghost-%COMP%]     .row.goal-not-match{opacity:50%}[_nghost-%COMP%]     .cell{width:var(--cell-width)}[_nghost-%COMP%]   hierarchy-goal-cell[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .name[_ngcontent-%COMP%]:hover{cursor:pointer;opacity:.7}.goal-info-tooltip[_ngcontent-%COMP%]   .tooltip-value-label[_ngcontent-%COMP%], .tooltip-hierarchy-name[_ngcontent-%COMP%]{font-weight:600}  .mat-menu-panel.heatmap-column-menu{min-height:fit-content;margin-top:4px}  .mat-menu-panel.heatmap-column-menu .mat-menu-content{padding:0}  .mat-menu-panel.heatmap-column-menu .mat-menu-item{color:var(--gray-180, #252423);display:flex;flex-direction:row;align-items:center;height:36px}  .mat-menu-panel.heatmap-column-menu .mat-menu-item:disabled{background:transparent;color:var(--gray-80, #B3B0AD)}  .mat-menu-panel.heatmap-column-menu .mat-menu-item pbi-icon{display:flex;padding-right:8px}"],changeDetection:0}),Q}(p.w)},85353:function(lt,Ge,t){"use strict";t.d(Ge,{d:function(){return m}});var r=t(125),o=t(57535),P=t(50423),a=t(65181),d=t(90127),p=t(9380),l=t(49223),c=t(77476),y=t(24326),i=t(95594),C=t(77971);function v(O,I){if(1&O&&(P.\u0275\u0275elementStart(0,"div",9),P.\u0275\u0275text(1),P.\u0275\u0275pipe(2,"formatGoalValue"),P.\u0275\u0275elementEnd()),2&O){var H=P.\u0275\u0275nextContext(3);P.\u0275\u0275property("title",H.valueTooltip),P.\u0275\u0275advance(1),P.\u0275\u0275textInterpolate1(" ",P.\u0275\u0275pipeBind3(2,2,H.currentValue.value,H.categories,H.formatString)," ")}}function k(O,I){if(1&O&&P.\u0275\u0275element(0,"goal-change-cell",10),2&O){var H=P.\u0275\u0275nextContext(3);P.\u0275\u0275property("goal",H.goal)("arrowSize",H.changeArrowSize)("nilDisplayString","\u2014")}}function E(O,I){if(1&O&&(P.\u0275\u0275elementContainerStart(0),P.\u0275\u0275template(1,v,3,6,"div",7),P.\u0275\u0275template(2,k,1,3,"goal-change-cell",8),P.\u0275\u0275elementContainerEnd()),2&O){var H=P.\u0275\u0275nextContext(2);P.\u0275\u0275advance(1),P.\u0275\u0275property("ngIf",!H.displaySettings.showValueChange),P.\u0275\u0275advance(1),P.\u0275\u0275property("ngIf",H.displaySettings.showValueChange)}}function s(O,I){if(1&O&&(P.\u0275\u0275elementStart(0,"div",11)(1,"span",12),P.\u0275\u0275text(2),P.\u0275\u0275elementEnd(),P.\u0275\u0275text(3),P.\u0275\u0275pipe(4,"formatGoalValue"),P.\u0275\u0275elementEnd()),2&O){var H=P.\u0275\u0275nextContext(2);P.\u0275\u0275classProp("targetOnly",!H.displaySettings.showCurrentValue),P.\u0275\u0275property("title",H.targetTooltip),P.\u0275\u0275advance(2),P.\u0275\u0275textInterpolate(H.displaySettings.showValueChange?"|":"/"),P.\u0275\u0275advance(1),P.\u0275\u0275textInterpolate1("",P.\u0275\u0275pipeBind3(4,5,H.currentValue.target,H.categories,H.formatString)," ")}}function ne(O,I){if(1&O&&P.\u0275\u0275element(0,"status-icon",13,14),2&O){var H=P.\u0275\u0275nextContext(2);P.\u0275\u0275property("status",null==H.currentValue?null:H.currentValue.status)("goalStatuses",H.goalStatuses)}}function te(O,I){if(1&O&&(P.\u0275\u0275elementStart(0,"div",2)(1,"div",3),P.\u0275\u0275template(2,E,3,2,"ng-container",4),P.\u0275\u0275template(3,s,5,9,"div",5),P.\u0275\u0275elementEnd(),P.\u0275\u0275template(4,ne,2,2,"status-icon",6),P.\u0275\u0275elementEnd()),2&O){var H=P.\u0275\u0275nextContext();P.\u0275\u0275styleProp("background",H.backgroundColor),P.\u0275\u0275classProp("isSelected",H.isSelected),P.\u0275\u0275advance(2),P.\u0275\u0275property("ngIf",H.displaySettings.showCurrentValue),P.\u0275\u0275advance(1),P.\u0275\u0275property("ngIf",H.displaySettings.showTargetValue),P.\u0275\u0275advance(1),P.\u0275\u0275property("ngIf",H.displaySettings.showStatus)}}function X(O,I){1&O&&P.\u0275\u0275element(0,"pbi-spinner",15)}var m=function(){function O(I,H,G,Z){this.localizationService=I,this.formatGoalValuePipe=H,this.featureSwitches=G,this.scorecardService=Z,this.currentValue=null,this.changeArrowSize="mini"}return O.prototype.ngOnChanges=function(I){var H;if((I.goal||I.displaySettings)&&this.goal){this.currentValue=r.r.buildCurrentGoalValue(this.goal),this.categories=this.scorecardService.getGoalValueCategories(this.goal),this.goalStatuses=this.scorecardService.getGoalStatuses(this.goal);var G=o.p.getGoalStatus(this.currentValue.status,this.goalStatuses).color;this.backgroundColor=this.displaySettings.showStatusColor?o.p.getGoalStatusColor(G,!1,!1):void 0,this.formatString=this.goal.valuesFormatString,this.valueTooltip=this.goal.isCurrentValueNotConnectedToHierarchy?"".concat(this.localizationService.get("CurrentValue")," ").concat(this.localizationService.get("Metrics_Tooltip_ValueNotConnected")):this.formatGoalValuePipe.transform(this.currentValue.value,this.categories,this.goal.valuesFormatString,!1),this.targetTooltip=this.goal.isTargetValueNotConnectedToHierarchy?"".concat(this.localizationService.get("Role_DisplayName_TargetValue")," ").concat(this.localizationService.get("Metrics_Tooltip_ValueNotConnected")):this.formatGoalValuePipe.transform(this.currentValue.target,this.categories,this.goal.valuesFormatString,!1),this.displaySettings.showValueChange&&(this.valueChange=r.r.calculateValueChange(this.goal,this.featureSwitches.featureSwitches.goalsSparklineChangeAggregations),this.isCyclePeriodLabelLocalizable=r.r.isCyclePeriodLabelLocalizable(null===(H=this.valueChange)||void 0===H?void 0:H.period))}},O.\u0275fac=function(H){return new(H||O)(P.\u0275\u0275directiveInject(a.o),P.\u0275\u0275directiveInject(d.D),P.\u0275\u0275directiveInject(p.vZ),P.\u0275\u0275directiveInject(l.G))},O.\u0275cmp=P.\u0275\u0275defineComponent({type:O,selectors:[["hierarchy-goal-cell"]],inputs:{goal:"goal",scorecard:"scorecard",displaySettings:"displaySettings",isSelected:"isSelected"},features:[P.\u0275\u0275NgOnChangesFeature],decls:3,vars:2,consts:[["class","cell",3,"background","isSelected",4,"ngIf","ngIfElse"],["loading",""],[1,"cell"],[1,"content"],[4,"ngIf"],["class","target",3,"title","targetOnly",4,"ngIf"],[3,"status","goalStatuses",4,"ngIf"],["class","value",3,"title",4,"ngIf"],[3,"goal","arrowSize","nilDisplayString",4,"ngIf"],[1,"value",3,"title"],[3,"goal","arrowSize","nilDisplayString"],[1,"target",3,"title"],[1,"slash"],[3,"status","goalStatuses"],["statusCell",""],[1,"pbi-spinner-small"]],template:function(H,G){if(1&H&&(P.\u0275\u0275template(0,te,5,7,"div",0),P.\u0275\u0275template(1,X,1,0,"ng-template",null,1,P.\u0275\u0275templateRefExtractor)),2&H){var Z=P.\u0275\u0275reference(2);P.\u0275\u0275property("ngIf",G.goal)("ngIfElse",Z)}},dependencies:[c.NgIf,y.k,i.k,C.m,d.D],styles:["[_nghost-%COMP%]{flex:1;height:100%;display:flex;flex-direction:column;justify-content:center}.cell[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;justify-content:center;align-items:flex-start;border-bottom:4px solid transparent}.content[_ngcontent-%COMP%]{display:flex;align-items:baseline;justify-content:flex-start;box-sizing:border-box;white-space:nowrap;width:100%;padding:0 6px}.content[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   .target[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis}.content[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:var(--vlg-font-size, 18px);font-weight:var(--font-weight-semi-bold, 600)}.content[_ngcontent-%COMP%]   .target[_ngcontent-%COMP%]{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400)}.content[_ngcontent-%COMP%]   .target[_ngcontent-%COMP%]   .slash[_ngcontent-%COMP%]{margin:0 1px}.content[_ngcontent-%COMP%]   .target.targetOnly[_ngcontent-%COMP%]{font-size:var(--vlg-font-size, 18px);font-weight:var(--font-weight-semi-bold, 600)}.content[_ngcontent-%COMP%]   .target.targetOnly[_ngcontent-%COMP%]   .slash[_ngcontent-%COMP%]{display:none}.content[_ngcontent-%COMP%]   goal-change-cell[_ngcontent-%COMP%]{display:flex;overflow:hidden;--container-align-items: baseline;--arrow-margin: 0 4px;--change-font-size: var(--vlg-font-size);--change-font-weight: var(--font-weight-semi-bold)}status-icon[_ngcontent-%COMP%]{display:flex;justify-content:center}status-icon[_ngcontent-%COMP%]     .status{font-size:var(--sm-font-size, 12px);line-height:16px;height:16px;width:fit-content}.isSelected[_ngcontent-%COMP%]{border-color:var(--fluent-theme-neutral-secondary-color, #605E5C)}"],changeDetection:0}),O}()},26410:function(lt,Ge,t){"use strict";t.d(Ge,{O:function(){return te}});var r=t(81337),o=t(58614),P=t(73088),a=t(62458),d=t(35510),p=t(50423),l=t(77476),c=t(86663),y=t(85102),i=t(74199);function C(X,m){if(1&X&&(p.\u0275\u0275elementStart(0,"label"),p.\u0275\u0275text(1),p.\u0275\u0275pipe(2,"localize"),p.\u0275\u0275elementEnd()),2&X){var O=p.\u0275\u0275nextContext(4);p.\u0275\u0275advance(1),p.\u0275\u0275textInterpolate(p.\u0275\u0275pipeBind1(2,1,O.labels[0]))}}function v(X,m){if(1&X&&(p.\u0275\u0275elementStart(0,"label"),p.\u0275\u0275text(1),p.\u0275\u0275pipe(2,"localizeFormat"),p.\u0275\u0275elementEnd()),2&X){var O=p.\u0275\u0275nextContext(2).ngIf,I=p.\u0275\u0275nextContext(2);p.\u0275\u0275advance(1),p.\u0275\u0275textInterpolate(p.\u0275\u0275pipeBind2(2,1,I.labels[1],O))}}function k(X,m){if(1&X){var O=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"button",9),p.\u0275\u0275listener("click",function(){p.\u0275\u0275restoreView(O);var H=p.\u0275\u0275nextContext(4);return p.\u0275\u0275resetView(H.onDissmis())}),p.\u0275\u0275pipe(1,"localize"),p.\u0275\u0275element(2,"pbi-icon",10),p.\u0275\u0275elementEnd()}2&X&&p.\u0275\u0275attribute("aria-label",p.\u0275\u0275pipeBind1(1,1,"Dismiss"))}function E(X,m){if(1&X){var O=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"div",2),p.\u0275\u0275element(1,"i",3),p.\u0275\u0275elementStart(2,"div",4),p.\u0275\u0275template(3,C,3,3,"label",5),p.\u0275\u0275template(4,v,3,4,"ng-template",null,6,p.\u0275\u0275templateRefExtractor),p.\u0275\u0275elementStart(6,"button",7),p.\u0275\u0275listener("click",function(){p.\u0275\u0275restoreView(O);var ie=p.\u0275\u0275nextContext(3);return p.\u0275\u0275resetView(ie.openSharingDialog())}),p.\u0275\u0275pipe(7,"localize"),p.\u0275\u0275text(8),p.\u0275\u0275pipe(9,"localize"),p.\u0275\u0275elementEnd()(),p.\u0275\u0275template(10,k,3,3,"button",8),p.\u0275\u0275elementEnd()}if(2&X){var I=p.\u0275\u0275reference(5),H=p.\u0275\u0275nextContext().ngIf,G=p.\u0275\u0275nextContext(2);p.\u0275\u0275advance(3),p.\u0275\u0275property("ngIf",1===H)("ngIfElse",I),p.\u0275\u0275advance(3),p.\u0275\u0275attribute("aria-label",p.\u0275\u0275pipeBind1(7,5,G.labels[2])),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate(p.\u0275\u0275pipeBind1(9,7,G.labels[2])),p.\u0275\u0275advance(2),p.\u0275\u0275property("ngIf",G.showDismiss)}}function s(X,m){if(1&X&&(p.\u0275\u0275elementContainerStart(0),p.\u0275\u0275template(1,E,11,9,"div",1),p.\u0275\u0275elementContainerEnd()),2&X){var O=m.ngIf;p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",O>0)}}function ne(X,m){if(1&X&&(p.\u0275\u0275elementContainerStart(0),p.\u0275\u0275template(1,s,2,1,"ng-container",0),p.\u0275\u0275pipe(2,"async"),p.\u0275\u0275elementContainerEnd()),2&X){var I,O=p.\u0275\u0275nextContext();p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",null==(I=p.\u0275\u0275pipeBind1(2,1,O.noAccessUsers$))?null:I.length)}}var te=function(){function X(m,O){var I;this.goalsHttpService=m,this.scorecardActions=O,this.labels=["Member_No_Scorecard_Access","Members_No_Scorecard_Access","Manage_Scorecard_Access"],this.showDismiss=!0,this.userAccess={userPrincipalNames:{},aadAppIds:{},groupIds:{}},this.noAccessUsers$=new d.X([]),this.show=!0,a.fF.assertValue(3===(null===(I=this.labels)||void 0===I?void 0:I.length),"Should only contain 3 labels")}return X.prototype.ngOnChanges=function(m){var O,I;(m.scorecard&&this.scorecard.reportId&&_.isNil(null===(O=m.scorecard.previousValue)||void 0===O?void 0:O.reportId)&&this.users||m.users&&null!==(I=this.scorecard)&&void 0!==I&&I.reportId)&&this.updateUserAccessInfo()},X.prototype.onDissmis=function(){this.show=!1},X.prototype.openSharingDialog=function(){return(0,r.mG)(this,void 0,void 0,function(){return(0,r.Jh)(this,function(m){switch(m.label){case 0:return[4,this.scorecardActions.share(this.scorecard,this.noAccessUsers$.value)];case 1:return m.sent(),[2]}})})},X.prototype.updateUserAccessInfo=function(){return(0,r.mG)(this,void 0,void 0,function(){var m,O;return(0,r.Jh)(this,function(H){switch(H.label){case 0:if(!_.some(this.users))return[3,5];if(m=this.getCheckScorecardAccessRequest(this.users),!(_.some(m.userPrincipalNames)||_.some(m.aadAppIds)||_.some(m.groupIds)))return[3,4];H.label=1;case 1:return H.trys.push([1,3,,4]),[4,this.goalsHttpService.checkAccess(this.scorecard.groupId,this.scorecard.id,m).toPromise()];case 2:return O=H.sent(),this.updateAcessInfo(O),[3,4];case 3:return H.sent(),this.noAccessUsers$.next([]),[3,4];case 4:return this.noAccessUsers$.next(this.countUsersWithNoAccess(this.users)),[3,6];case 5:this.noAccessUsers$.next([]),H.label=6;case 6:return[2]}})})},X.prototype.getCheckScorecardAccessRequest=function(m){for(var O={userPrincipalNames:[],aadAppIds:[],groupIds:[]},I=0,H=m;I<H.length;I++){var G=H[I];2===G.objectType?void 0===this.userAccess.groupIds[G.objectId]&&O.groupIds.push(G.objectId):G.userPrincipalName?void 0===this.userAccess.userPrincipalNames[G.userPrincipalName]&&O.userPrincipalNames.push(G.userPrincipalName):void 0===this.userAccess.aadAppIds[G.aadAppId]&&O.aadAppIds.push(G.aadAppId)}return O},X.prototype.countUsersWithNoAccess=function(m){for(var O=[],I=0,H=m;I<H.length;I++){var G=H[I];2===G.objectType?!0!==this.userAccess.groupIds[G.objectId]&&O.push(G):G.userPrincipalName?!0!==this.userAccess.userPrincipalNames[G.userPrincipalName]&&O.push(G):!0!==this.userAccess.aadAppIds[G.aadAppId]&&O.push(G)}return O},X.prototype.updateAcessInfo=function(m){for(var O=0,I=_.keys(m?.userPrincipalNames);O<I.length;O++)this.userAccess.userPrincipalNames[H=I[O]]=m.userPrincipalNames[H];for(var G=0,Z=_.keys(m?.aadAppIds);G<Z.length;G++)this.userAccess.aadAppIds[H=Z[G]]=m.aadAppIds[H];for(var ie=0,ye=_.keys(m?.groupIds);ie<ye.length;ie++){var H;this.userAccess.groupIds[H=ye[ie]]=m.groupIds[H]}},X.\u0275fac=function(O){return new(O||X)(p.\u0275\u0275directiveInject(o.f),p.\u0275\u0275directiveInject(P.F))},X.\u0275cmp=p.\u0275\u0275defineComponent({type:X,selectors:[["scorecard-access-banner"]],inputs:{scorecard:"scorecard",users:"users",labels:"labels",showDismiss:"showDismiss"},features:[p.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[[4,"ngIf"],["class","message-banner",4,"ngIf"],[1,"message-banner"],["aria-hidden","true",1,"glyphicon","pbi-glyph-info","glyph-small","message-banner-icon"],[1,"message-banner-text-container"],[4,"ngIf","ngIfElse"],["multiple",""],[3,"click"],["class","close",3,"click",4,"ngIf"],[1,"close",3,"click"],["name","close","size","mini"]],template:function(O,I){1&O&&p.\u0275\u0275template(0,ne,3,3,"ng-container",0),2&O&&p.\u0275\u0275property("ngIf",I.show&&(null==I.scorecard?null:I.scorecard.reportId))},dependencies:[l.NgIf,c._,l.AsyncPipe,y.F,i.j],styles:['[_nghost-%COMP%]{display:block;font-size:12px}[_nghost-%COMP%]   .message-banner[_ngcontent-%COMP%]{color:var(--gray-180, #252423);display:flex;padding:10px 12px;background-color:var(--gray-20, #F3F2F1);margin-bottom:10px}[_nghost-%COMP%]   .message-banner[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{margin:0 0 0 auto;border:0;padding:0;background-color:transparent;color:inherit;display:flex;align-items:center}[_nghost-%COMP%]   .message-banner[_ngcontent-%COMP%]   .message-banner-text-container[_ngcontent-%COMP%]{display:block;line-height:16px;-webkit-user-select:text;-ms-user-select:text;user-select:text}[_nghost-%COMP%]   .message-banner[_ngcontent-%COMP%]   .message-banner-text-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;background-color:transparent;margin:0;padding:0;align-self:flex-end;text-decoration:underline;color:var(--fluent-theme-link-darker-color, #005A9E)}[_nghost-%COMP%]   .message-banner[_ngcontent-%COMP%]   .message-banner-text-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .message-banner[_ngcontent-%COMP%]   .message-banner-text-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{color:var(--fluent-theme-link-alt-color, #004578)}[_nghost-%COMP%]   .message-banner[_ngcontent-%COMP%]   .message-banner-text-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:1px solid var(--gray-140, #484644)}[_nghost-%COMP%]   .message-banner[_ngcontent-%COMP%]   .message-banner-text-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus:not(:focus-visible){outline:none}[_nghost-%COMP%]   .message-banner[_ngcontent-%COMP%]   .message-banner-text-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{color:var(--gray-90, #A19F9D)}html:not([dir="rtl"])   [_nghost-%COMP%]   .message-banner[_ngcontent-%COMP%]   .message-banner-icon[_ngcontent-%COMP%]{margin-right:8px}html[dir="rtl"]   [_nghost-%COMP%]   .message-banner[_ngcontent-%COMP%]   .message-banner-icon[_ngcontent-%COMP%]{margin-left:8px}'],changeDetection:0}),X}()},6425:function(lt,Ge,t){"use strict";t.d(Ge,{C:function(){return v}});var r=t(558),o=t(50423),P=t(49223),a=t(77476),d=t(17174),p=t(59968),l=t(44408),c=t(25689);function y(k,E){if(1&k){var s=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div")(1,"input",7),o.\u0275\u0275listener("ngModelChange",function(X){o.\u0275\u0275restoreView(s);var m=o.\u0275\u0275nextContext();return o.\u0275\u0275resetView(m.bucketId=X)}),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(2,"input",8),o.\u0275\u0275listener("ngModelChange",function(X){o.\u0275\u0275restoreView(s);var m=o.\u0275\u0275nextContext();return o.\u0275\u0275resetView(m.bucketName=X)}),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"button",9),o.\u0275\u0275listener("click",function(){o.\u0275\u0275restoreView(s);var X=o.\u0275\u0275nextContext();return o.\u0275\u0275resetView(X.addBucket())}),o.\u0275\u0275element(4,"mat-icon",10)(5,"span",11),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(6,"button",9),o.\u0275\u0275listener("click",function(){o.\u0275\u0275restoreView(s);var X=o.\u0275\u0275nextContext();return o.\u0275\u0275resetView(X.deleteBucket())}),o.\u0275\u0275element(7,"mat-icon",12)(8,"span",13),o.\u0275\u0275elementEnd()()}if(2&k){var ne=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("ngModel",ne.bucketId),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngModel",ne.bucketName)}}function i(k,E){if(1&k){var s=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",14),o.\u0275\u0275listener("cdkDragEntered",function(m){o.\u0275\u0275restoreView(s);var O=o.\u0275\u0275nextContext();return o.\u0275\u0275resetView(O.dragEnteredGroup(m))}),o.\u0275\u0275pipe(1,"async"),o.\u0275\u0275elementStart(2,"label",15),o.\u0275\u0275text(3),o.\u0275\u0275elementEnd()()}if(2&k){var ne=E.$implicit,te=o.\u0275\u0275nextContext();o.\u0275\u0275property("cdkDragDisabled",!o.\u0275\u0275pipeBind1(1,2,te.isEditMode$)),o.\u0275\u0275advance(3),o.\u0275\u0275textInterpolate(ne.name)}}function C(k,E){if(1&k){var s=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",16)(1,"goal-tile",17),o.\u0275\u0275listener("cdkDropListDropped",function(m){o.\u0275\u0275restoreView(s);var O=o.\u0275\u0275nextContext();return o.\u0275\u0275resetView(O.drop(m))}),o.\u0275\u0275pipe(2,"async"),o.\u0275\u0275elementEnd()()}if(2&k){var ne=E.$implicit,te=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("goal",ne)("goalStatuses",te.metricsGoalStatuses)("settings",te.boardSettings)("cdkDragDisabled",!o.\u0275\u0275pipeBind1(2,4,te.isEditMode$))}}var v=function(){function k(E){var s=this;this.scorecardService=E,this.bucketArr=[],this.bucketName="",this.bucketId="",this.boardGoals=[],this.boardGroups=[],this.isEditMode$=this.scorecardService.isEditMode(),this.scorecardBoard$=this.scorecardService.getBoard(),this.scorecardBoard$.pipe().subscribe(function(ne){s.boardGroups=ne?.groups}),this.boardGoals=this.scorecardService.flatten()}return k.prototype.addBucket=function(){""!==this.bucketName&&this.scorecardService.addGroupToBoard(this.bucketId,this.bucketName)},k.prototype.deleteBucket=function(){this.scorecardService.deleteGroupFromBoard(this.bucketId)},k.prototype.drop=function(E){E.previousContainer===E.container?(0,r.bA)(E.container.data,E.previousIndex,E.currentIndex):(0,r.EA)(E.previousContainer.data,E.container.data,E.previousIndex,E.currentIndex)},k.\u0275fac=function(s){return new(s||k)(o.\u0275\u0275directiveInject(P.G))},k.\u0275cmp=o.\u0275\u0275defineComponent({type:k,selectors:[["scorecard-board-view"]],inputs:{boardSettings:"boardSettings",metricsGoalStatuses:"metricsGoalStatuses"},decls:8,vars:6,consts:[[4,"ngIf"],["cdkDropListGroup","",1,"group-container"],["cdkDropList","",1,"group-list",3,"cdkDropListData","cdkDropListDropped"],["cdkDropList","","class","group-box","cdkDrag","",3,"cdkDragDisabled","cdkDragEntered",4,"ngFor","ngForOf"],["cdkDropListGroup",""],[1,"metric-container"],["cdkDropList","",4,"ngFor","ngForOf"],["type","text","placeholder","id",3,"ngModel","ngModelChange"],["type","text","placeholder","name",3,"ngModel","ngModelChange"],[3,"click"],["fontIcon","pbi-glyph-add",1,"glyphicon","glyph-mini"],["localize","Add_Group_To_Board_Visual"],["fontIcon","pbi-glyph-delete",1,"glyphicon","glyph-mini"],["localize","Delete_Group_From_Board_Visual"],["cdkDropList","","cdkDrag","",1,"group-box",3,"cdkDragDisabled","cdkDragEntered"],[1,"group-name"],["cdkDropList",""],["cdkDrag","",1,"metric-tile",3,"goal","goalStatuses","settings","cdkDragDisabled","cdkDropListDropped"]],template:function(s,ne){1&s&&(o.\u0275\u0275template(0,y,9,2,"div",0),o.\u0275\u0275pipe(1,"async"),o.\u0275\u0275elementStart(2,"div",1)(3,"div",2),o.\u0275\u0275listener("cdkDropListDropped",function(X){return ne.drop(X)}),o.\u0275\u0275template(4,i,4,4,"div",3),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementStart(5,"div",4)(6,"div",5),o.\u0275\u0275template(7,C,3,6,"div",6),o.\u0275\u0275elementEnd()()),2&s&&(o.\u0275\u0275property("ngIf",o.\u0275\u0275pipeBind1(1,4,ne.isEditMode$)),o.\u0275\u0275advance(3),o.\u0275\u0275property("cdkDropListData",ne.boardGroups),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",ne.boardGroups),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngForOf",ne.boardGoals))},dependencies:[a.NgForOf,a.NgIf,r.Wj,r.Fd,r.Zt,d.Fj,d.JJ,d.On,p.X,l.Hw,c.H,a.AsyncPipe],styles:[".metric-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;flex-direction:row;gap:20px;margin:30px}.metric-container[_ngcontent-%COMP%]   .metric-tile[_ngcontent-%COMP%]{width:250px;height:180px;display:flex}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:.3}.group-container[_ngcontent-%COMP%]{max-width:100%;margin:0 25px 25px 0;vertical-align:top}.group-container[_ngcontent-%COMP%]   .group-list[_ngcontent-%COMP%]{overflow:hidden;display:block}.group-container[_ngcontent-%COMP%]   .group-list[_ngcontent-%COMP%]   .group-box[_ngcontent-%COMP%]{padding:20px;margin:20px;background-color:#d3d3d3;border-radius:20px;min-height:250px;display:flex;flex-wrap:wrap;flex-direction:row;gap:20px}.delete-group-button[_ngcontent-%COMP%]{font-size:medium;margin-left:auto;padding:0;border:none;background:none}.group-name[_ngcontent-%COMP%]{font-weight:700}"]}),k}()},83399:function(lt,Ge,t){"use strict";t.d(Ge,{M:function(){return Oe}});var r=t(81337),o=t(60042),P=t(61088),a=t(50423),d=t(62458),p=t(34340),l=t(49223),c=t(77476),y=t(59968),i=t(50057),C=t(57746),v=t(55710),k=t(86663),E=t(36858),s=t(44260),ne=t(85102);function te(be,Fe){if(1&be&&a.\u0275\u0275element(0,"sort-icon",24),2&be){var ze=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("upArrow",!ze.sortType.sortAscending)}}function X(be,Fe){1&be&&a.\u0275\u0275element(0,"pbi-icon",25)}function m(be,Fe){1&be&&a.\u0275\u0275element(0,"span",26)}function O(be,Fe){1&be&&a.\u0275\u0275element(0,"span",27)}function I(be,Fe){1&be&&a.\u0275\u0275element(0,"span",28)}function H(be,Fe){1&be&&a.\u0275\u0275element(0,"span",29)}function G(be,Fe){1&be&&a.\u0275\u0275element(0,"span")}function Z(be,Fe){1&be&&a.\u0275\u0275element(0,"span",30)}function ie(be,Fe){1&be&&a.\u0275\u0275element(0,"span",31)}function ye(be,Fe){1&be&&a.\u0275\u0275element(0,"span",32)}function ae(be,Fe){1&be&&a.\u0275\u0275element(0,"span",33)}function J(be,Fe){1&be&&a.\u0275\u0275element(0,"span")}function N(be,Fe){if(1&be&&(a.\u0275\u0275elementStart(0,"button",34),a.\u0275\u0275element(1,"span",35)(2,"pbi-icon",36),a.\u0275\u0275elementEnd()),2&be){a.\u0275\u0275nextContext();var ze=a.\u0275\u0275reference(27);a.\u0275\u0275property("matMenuTriggerFor",ze)}}function he(be,Fe){if(1&be){var ze=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"button",37),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(ze);var je=a.\u0275\u0275nextContext().ngIf,He=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(He.changeColumnSettings(He.moveColumnLeft,je))}),a.\u0275\u0275element(1,"span",38),a.\u0275\u0275elementEnd()}}function pe(be,Fe){if(1&be){var ze=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"button",37),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(ze);var je=a.\u0275\u0275nextContext().ngIf,He=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(He.changeColumnSettings(He.moveColumnRight,je))}),a.\u0275\u0275element(1,"span",39),a.\u0275\u0275elementEnd()}}function ce(be,Fe){if(1&be){var ze=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"button",37),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(ze);var je=a.\u0275\u0275nextContext().ngIf,He=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(He.changeColumnSettings(He.hideColumn,je))}),a.\u0275\u0275element(1,"span",40),a.\u0275\u0275elementEnd()}}function ge(be,Fe){1&be&&a.\u0275\u0275elementContainer(0)}function se(be,Fe){if(1&be){var ze=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"button",41),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(ze);var je=a.\u0275\u0275nextContext(2);return a.\u0275\u0275resetView(je.showHideColumns())}),a.\u0275\u0275element(1,"span",42),a.\u0275\u0275elementEnd()}}var De=function(Fe){return{hidden:Fe}};function fe(be,Fe){if(1&be){var ze=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275elementStart(1,"button",1),a.\u0275\u0275pipe(2,"localize"),a.\u0275\u0275element(3,"span",2),a.\u0275\u0275pipe(4,"localize"),a.\u0275\u0275template(5,te,1,1,"sort-icon",3),a.\u0275\u0275template(6,X,1,0,"ng-template",null,4,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(8,"mat-menu",5,6)(10,"button",7),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(ze);var oe=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(oe.sort(!0))}),a.\u0275\u0275element(11,"pbi-icon",8),a.\u0275\u0275template(12,m,1,0,"span",9),a.\u0275\u0275template(13,O,1,0,"span",10),a.\u0275\u0275template(14,I,1,0,"span",11),a.\u0275\u0275template(15,H,1,0,"span",12),a.\u0275\u0275template(16,G,1,0,"span",13),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(17,"button",7),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(ze);var oe=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(oe.sort(!1))}),a.\u0275\u0275element(18,"pbi-icon",8),a.\u0275\u0275template(19,Z,1,0,"span",14),a.\u0275\u0275template(20,ie,1,0,"span",15),a.\u0275\u0275template(21,ye,1,0,"span",16),a.\u0275\u0275template(22,ae,1,0,"span",17),a.\u0275\u0275template(23,J,1,0,"span",13),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(24,"mat-divider"),a.\u0275\u0275template(25,N,3,1,"button",18),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(26,"mat-menu",19,20),a.\u0275\u0275template(28,he,2,0,"button",21),a.\u0275\u0275template(29,pe,2,0,"button",21),a.\u0275\u0275template(30,ce,2,0,"button",21),a.\u0275\u0275element(31,"mat-divider"),a.\u0275\u0275template(32,ge,1,0,"ng-container",22),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(33,se,2,0,"ng-template",null,23,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275elementContainerEnd()}if(2&be){var Ke=Fe.ngIf,je=a.\u0275\u0275reference(7),He=a.\u0275\u0275reference(9),Je=a.\u0275\u0275reference(27),j=a.\u0275\u0275reference(34),nt=a.\u0275\u0275nextContext();a.\u0275\u0275advance(1),a.\u0275\u0275property("matMenuTriggerFor",nt.column.canSort?He:Je),a.\u0275\u0275attribute("aria-label",a.\u0275\u0275pipeBind1(2,26,nt.column.name)),a.\u0275\u0275advance(2),a.\u0275\u0275propertyInterpolate("localize",nt.column.name),a.\u0275\u0275property("pbiTooltip",a.\u0275\u0275pipeBind1(4,28,nt.column.name)),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",nt.column.canSort&&nt.sortType.sortBy===nt.column.sortBy)("ngIfElse",je),a.\u0275\u0275advance(3),a.\u0275\u0275property("overlapTrigger",!1),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngSwitch",nt.column.dataType),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngClass",a.\u0275\u0275pureFunction1(30,De,nt.sortType.sortBy!==nt.column.sortBy||!nt.sortType.sortAscending)),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngSwitchCase","Date"),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngSwitchCase","Number"),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngSwitchCase","String"),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngSwitchCase","Status"),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngSwitch",nt.column.dataType),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngClass",a.\u0275\u0275pureFunction1(32,De,nt.sortType.sortBy!==nt.column.sortBy||nt.sortType.sortAscending)),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngSwitchCase","Date"),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngSwitchCase","Number"),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngSwitchCase","String"),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngSwitchCase","Status"),a.\u0275\u0275advance(3),a.\u0275\u0275property("ngIf",nt.canMoveLeft(Ke)||nt.canMoveRight(Ke)||nt.column.canHide)("ngIfElse",j),a.\u0275\u0275advance(1),a.\u0275\u0275property("overlapTrigger",!1),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",nt.canMoveLeft(Ke)),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",nt.canMoveRight(Ke)),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",nt.column.canHide),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngTemplateOutlet",j)}}var Oe=function(){function be(Fe,ze){var Ke=this;this.detailsPaneLauncher=Fe,this.scorecardService=ze,this.onSortColumn=new a.EventEmitter,this.moveColumnLeft=function(je){P._.moveColumnLeft(je,Ke.column.id)},this.moveColumnRight=function(je){P._.moveColumnRight(je,Ke.column.id)},this.hideColumn=function(je){P._.hideColumn(je,Ke.column.id)}}return be.prototype.ngOnInit=function(){this.columnSettings$=this.scorecardService.getColumnSettings()},be.prototype.showHideColumns=function(){this.detailsPaneLauncher.openScorecardColumnSettingsPane(this.scorecardService)},be.prototype.changeColumnSettings=function(Fe,ze){d.fF.assertValue(ze,"columnSettingsAction columnSettings");var Ke=_.cloneDeep(ze);Fe(Ke),this.scorecardService.updateScorecard({columnSettings:Ke})},be.prototype.canMoveLeft=function(Fe){return P._.canMoveLeft(Fe,this.columnIndex)},be.prototype.canMoveRight=function(Fe){return P._.canMoveRight(Fe,this.columnIndex)},be.prototype.sort=function(Fe){return(0,r.mG)(this,void 0,void 0,function(){var ze=this;return(0,r.Jh)(this,function(Ke){return d.fF.assert(function(){return ze.column.canSort},"Cannot sort this column."),this.onSortColumn.emit(this.sortType.sortBy!==this.column.sortBy||this.sortType.sortAscending!==Fe?{sortBy:this.column.sortBy,sortAscending:Fe}:o.Ij),[2]})})},be.componentId="ScorecardColumnContextMenuComponentId",be.\u0275fac=function(ze){return new(ze||be)(a.\u0275\u0275directiveInject(p.c),a.\u0275\u0275directiveInject(l.G))},be.\u0275cmp=a.\u0275\u0275defineComponent({type:be,selectors:[["scorecard-column-context-menu"]],inputs:{column:"column",columnIndex:"columnIndex",sortType:"sortType"},outputs:{onSortColumn:"onSortColumn"},decls:2,vars:3,consts:[[4,"ngIf"],["mat-button","","cdkMonitorElementFocus","",1,"scorecard-column-menu-trigger",3,"matMenuTriggerFor"],[1,"column-name",3,"localize","pbiTooltip"],["class","sort-icon",3,"upArrow",4,"ngIf","ngIfElse"],["chevron",""],["xPosition","after",1,"scorecard-column-menu",3,"overlapTrigger"],["scorecardColumnMenu","matMenu"],["mat-menu-item","",3,"ngSwitch","click"],["size","small","name","checkmark",3,"ngClass"],["localize","Menu_OldestToNewest",4,"ngSwitchCase"],["localize","Menu_Ascending",4,"ngSwitchCase"],["localize","Menu_Sort_AZ",4,"ngSwitchCase"],["localize","Menu_Sort_FromLowPriority",4,"ngSwitchCase"],[4,"ngSwitchDefault"],["localize","Menu_NewestToOldest",4,"ngSwitchCase"],["localize","Menu_Descending",4,"ngSwitchCase"],["localize","Menu_Sort_ZA",4,"ngSwitchCase"],["localize","Menu_Sort_FromHighPriority",4,"ngSwitchCase"],["mat-menu-item","","class","customize-column-button","localizeTooltip","Scorecard_Column_Settings_CustomizeColumn",3,"matMenuTriggerFor",4,"ngIf","ngIfElse"],[1,"scorecard-column-settings-menu",3,"overlapTrigger"],["scorecardColumnSettingsMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngIf"],[4,"ngTemplateOutlet"],["columnSettingsButton",""],[1,"sort-icon",3,"upArrow"],["name","chevrondownsmall","size","small",1,"chevrondown"],["localize","Menu_OldestToNewest"],["localize","Menu_Ascending"],["localize","Menu_Sort_AZ"],["localize","Menu_Sort_FromLowPriority"],["localize","Menu_NewestToOldest"],["localize","Menu_Descending"],["localize","Menu_Sort_ZA"],["localize","Menu_Sort_FromHighPriority"],["mat-menu-item","","localizeTooltip","Scorecard_Column_Settings_CustomizeColumn",1,"customize-column-button",3,"matMenuTriggerFor"],["localize","Scorecard_Column_Settings_CustomizeColumn"],["name","chevronrightmedium","size","mini",1,"chevron-right"],["mat-menu-item","",3,"click"],["localize","Menu_MoveLeft","localizeTooltip","Menu_MoveLeft"],["localize","Menu_MoveRight","localizeTooltip","Menu_MoveRight"],["localize","Menu_HideThisColumn","localizeTooltip","Menu_HideThisColumn"],["mat-menu-item","",1,"column-settings-button",3,"click"],["localize","Scorecard_Column_Settings","localizeTooltip","Scorecard_Column_Settings"]],template:function(ze,Ke){1&ze&&(a.\u0275\u0275template(0,fe,35,34,"ng-container",0),a.\u0275\u0275pipe(1,"async")),2&ze&&a.\u0275\u0275property("ngIf",a.\u0275\u0275pipeBind1(1,1,Ke.columnSettings$))},dependencies:[c.NgClass,c.NgIf,c.NgTemplateOutlet,c.NgSwitch,c.NgSwitchCase,c.NgSwitchDefault,y.X,i.r,C.d,v.W0,v.tN,v.D8,k._,E.V,s.o,c.AsyncPipe,ne.F],styles:[".scorecard-column-menu-trigger[_ngcontent-%COMP%]{padding-left:0;width:100%;border:none;background:none;color:inherit;display:flex;flex-direction:row}.scorecard-column-menu-trigger[_ngcontent-%COMP%]   .column-name[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis}.scorecard-column-menu-trigger[_ngcontent-%COMP%]   pbi-icon[_ngcontent-%COMP%]{padding-left:4px;padding-top:4px}  .scorecard-column-menu-trigger .sort-icon .mat-icon{margin:0 4px}  .mat-menu-panel.scorecard-column-settings-menu{min-height:fit-content}  .scorecard-column-menu .mat-menu-item{padding-left:8px}  .scorecard-column-menu .mat-menu-item.column-settings-button{padding-left:32px}.mat-menu-item[_ngcontent-%COMP%]{color:var(--gray-180, #252423);display:flex;flex-direction:row;align-items:center;height:36px;padding-right:16px}.mat-menu-item[_ngcontent-%COMP%]   pbi-icon[_ngcontent-%COMP%]{display:flex;padding-right:8px}.mat-menu-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:inherit;display:flex;align-items:center}.mat-menu-item.customize-column-button[_ngcontent-%COMP%]{justify-content:space-between;padding-left:32px}.mat-menu-item.customize-column-button[_ngcontent-%COMP%]   .chevron-right[_ngcontent-%COMP%]{height:inherit;display:flex;align-items:center}"],changeDetection:0}),be}()},95135:function(lt,Ge,t){"use strict";t.d(Ge,{m:function(){return d}});var r=t(50423),o=t(17174),P=t(44408),a=t(85102),d=function(){function p(){this.filterBy=new r.EventEmitter}return p.prototype.onFilterBy=function(l){this.filterBy.emit(l)},p.\u0275fac=function(c){return new(c||p)},p.\u0275cmp=r.\u0275\u0275defineComponent({type:p,selectors:[["scorecard-filter"]],inputs:{filterText:"filterText"},outputs:{filterBy:"filterBy"},decls:5,vars:7,consts:[[1,"toolbar-filter-glyph"],["fontIcon","pbi-glyph-search",1,"glyphicon","glyph-mini"],[3,"ngModel","ngModelChange"]],template:function(c,y){1&c&&(r.\u0275\u0275elementStart(0,"div",0),r.\u0275\u0275element(1,"mat-icon",1),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(2,"input",2),r.\u0275\u0275listener("ngModelChange",function(C){return y.onFilterBy(C)}),r.\u0275\u0275pipe(3,"localize"),r.\u0275\u0275pipe(4,"localize"),r.\u0275\u0275elementEnd()),2&c&&(r.\u0275\u0275advance(2),r.\u0275\u0275property("ngModel",y.filterText),r.\u0275\u0275attribute("aria-label",r.\u0275\u0275pipeBind1(3,3,"Filter_By_Keyword"))("placeholder",r.\u0275\u0275pipeBind1(4,5,"Filter_By_Keyword")))},dependencies:[o.Fj,o.JJ,o.On,P.Hw,a.F],styles:["[_nghost-%COMP%]{display:inline-block;margin-right:8px;align-items:center;vertical-align:top;height:32px;width:230px}[_nghost-%COMP%]   .toolbar-filter-glyph[_ngcontent-%COMP%]{display:inline-block;margin:0;padding:0;border:none;outline:none;height:32px;width:32px;color:var(--gray-180, #252423);background-color:var(--fluent-theme-neutral-lighter-color, #F3F2F1);border-top-left-radius:4px;border-bottom-left-radius:4px}[_nghost-%COMP%]   .toolbar-filter-glyph[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-top:10px;margin-left:10px;height:12px;width:12px}[_nghost-%COMP%]   input[_ngcontent-%COMP%]{display:inline-block;vertical-align:top;margin:0;padding:0;height:32px;width:198px;color:var(--gray-180, #252423);font-weight:400;font-size:14px;line-height:20px;border:0px;border-top-right-radius:4px;border-bottom-right-radius:4px;background-color:var(--fluent-theme-neutral-lighter-color, #F3F2F1)}[_nghost-%COMP%]   input[_ngcontent-%COMP%]:focus{border:0px;outline:none}"],changeDetection:0}),p}()},1882:function(lt,Ge,t){"use strict";t.d(Ge,{R:function(){return O}});var r=t(81337),o=t(50423),P=t(73221),a=t(14172),d=t(21719),p=t(93379),l=t(73911),c=t(87426),y=t(65181),i=t(49223),C=t(77476),v=t(59968),k=t(55710),E=t(86663),s=t(81437),ne=t(95135),te=t(59916),X=t(85102);function m(I,H){if(1&I){var G=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",9),o.\u0275\u0275listener("click",function(){o.\u0275\u0275restoreView(G);var ye=o.\u0275\u0275nextContext();return o.\u0275\u0275resetView(ye.hierarchyPane.showHeatmapDisplaySettingsPane())}),o.\u0275\u0275pipe(1,"async"),o.\u0275\u0275element(2,"pbi-icon",13)(3,"span",14),o.\u0275\u0275elementEnd()}if(2&I){var Z=o.\u0275\u0275nextContext();o.\u0275\u0275property("disabled",o.\u0275\u0275pipeBind1(1,1,Z.hierarchyPane.showHeatmapDisplaySettingsPane$))}}var O=function(I){function H(G,Z,ie,ye,ae,J,N){var he=I.call(this)||this;return he.hierarchyPane=G,he.capabilityService=Z,he.heatmapService=ie,he.hierarchyService=ye,he.localizationService=ae,he.scorecardService=J,he.changeDetector=N,he.filterBy=new o.EventEmitter,he.isEditMode$=he.scorecardService.isEditMode(),he.scorecardCapabilities$=he.capabilityService.getScorecardCapabilities(),he.canEditHeatmap$=he.scorecardCapabilities$.pipe((0,a.U)(function(pe){return pe.editHeatmap})),he.hasHierarchies$=he.hierarchyService.hasHierarchies$,he.heatmapService.selectedHierarchyItems$.subscribe(function(pe){var ce=pe.length-1;he.dropdownLabel=ce>0?he.localizationService.format("MetricsHeatmap_ComparingItems",ce):he.localizationService.get("Add_Columns"),he.changeDetector.markForCheck()}),he}return(0,r.ZT)(H,I),H.\u0275fac=function(Z){return new(Z||H)(o.\u0275\u0275directiveInject(d.D),o.\u0275\u0275directiveInject(p.Nw),o.\u0275\u0275directiveInject(l.$),o.\u0275\u0275directiveInject(c.G),o.\u0275\u0275directiveInject(y.o),o.\u0275\u0275directiveInject(i.G),o.\u0275\u0275directiveInject(o.ChangeDetectorRef))},H.\u0275cmp=o.\u0275\u0275defineComponent({type:H,selectors:[["scorecard-heatmap-toolbar"]],inputs:{filterText:"filterText"},outputs:{filterBy:"filterBy"},features:[o.\u0275\u0275InheritDefinitionFeature],decls:22,vars:22,consts:[[1,"scorecard-heatmap-toolbar"],[1,"left-actions"],["mat-button","","cdkMonitorElementFocus","",1,"heatmap-menu-button","pbi-fluent-button","pbi-icon-button","pbi-with-text",3,"matMenuTriggerFor"],["name","chevrondownsmall","size","mini",1,"chevrondown"],[1,"right-actions"],[3,"filterText","filterBy"],[3,"isEditMode","scorecardCapabilities","hasHierarchies"],["xPosition","after",1,"heatmap-menu",3,"overlapTrigger"],["heatmapMenu","matMenu"],["mat-menu-item","",3,"disabled","click"],["name","edit","size","small",1,"icon"],["localize","MetricsCustomizeHeatmap"],["mat-menu-item","",3,"disabled","click",4,"ngIf"],["name","settings","size","small",1,"icon"],["localize","DisplaySettings_Open"]],template:function(Z,ie){if(1&Z&&(o.\u0275\u0275elementStart(0,"section",0)(1,"div",1)(2,"button",2),o.\u0275\u0275pipe(3,"localize"),o.\u0275\u0275elementStart(4,"span"),o.\u0275\u0275text(5),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(6,"pbi-icon",3),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementStart(7,"div",4)(8,"scorecard-filter",5),o.\u0275\u0275listener("filterBy",function(J){return ie.filterBy.emit(J)}),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(9,"view-switcher")(10,"scorecard-new-button",6),o.\u0275\u0275pipe(11,"async"),o.\u0275\u0275pipe(12,"async"),o.\u0275\u0275pipe(13,"async"),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementStart(14,"mat-menu",7,8)(16,"button",9),o.\u0275\u0275listener("click",function(){return ie.hierarchyPane.showHeatmapConfigurationPane()}),o.\u0275\u0275pipe(17,"async"),o.\u0275\u0275element(18,"pbi-icon",10)(19,"span",11),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(20,m,4,3,"button",12),o.\u0275\u0275pipe(21,"async"),o.\u0275\u0275elementEnd()),2&Z){var ye=o.\u0275\u0275reference(15);o.\u0275\u0275advance(2),o.\u0275\u0275property("matMenuTriggerFor",ye),o.\u0275\u0275attribute("aria-label",o.\u0275\u0275pipeBind1(3,10,"Add_Columns")),o.\u0275\u0275advance(3),o.\u0275\u0275textInterpolate(ie.dropdownLabel),o.\u0275\u0275advance(3),o.\u0275\u0275property("filterText",ie.filterText),o.\u0275\u0275advance(2),o.\u0275\u0275property("isEditMode",o.\u0275\u0275pipeBind1(11,12,ie.isEditMode$))("scorecardCapabilities",o.\u0275\u0275pipeBind1(12,14,ie.scorecardCapabilities$))("hasHierarchies",o.\u0275\u0275pipeBind1(13,16,ie.hasHierarchies$)),o.\u0275\u0275advance(4),o.\u0275\u0275property("overlapTrigger",!1),o.\u0275\u0275advance(2),o.\u0275\u0275property("disabled",o.\u0275\u0275pipeBind1(17,18,ie.hierarchyPane.showHeatmapConfigurationPane$)),o.\u0275\u0275advance(4),o.\u0275\u0275property("ngIf",o.\u0275\u0275pipeBind1(21,20,ie.canEditHeatmap$))}},dependencies:[C.NgIf,v.X,k.W0,k.tN,k.D8,E._,s.V,ne.m,te.h,C.AsyncPipe,X.F],styles:[".scorecard-heatmap-toolbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;box-sizing:border-box;padding:0 30px 12px;width:100%;font-family:var(--scorecard-fontFamily);color:var(--scorecard-headerForegroundColor);background-color:var(--scorecard-headerBackgroundColor);border-bottom:1px solid rgba(0,0,0,.05);vertical-align:top}.scorecard-heatmap-toolbar[_ngcontent-%COMP%]   .right-actions[_ngcontent-%COMP%]{display:inline-flex}.scorecard-heatmap-toolbar[_ngcontent-%COMP%]   .right-actions[_ngcontent-%COMP%]   .hierarchies-btn[_ngcontent-%COMP%]{background-color:var(--fluent-theme-neutral-lighter-alt-color, #FAF9F8)}.pbi-fluent-button[_ngcontent-%COMP%]{border:none;display:inline-flex;align-items:center}.pbi-fluent-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{overflow:visible}.pbi-fluent-button[_ngcontent-%COMP%]   .mat-icon.glyph-small[_ngcontent-%COMP%]{font-size:var(--lg-font-size, 16px);width:var(--lg-font-size, 16px);height:var(--lg-font-size, 16px)}.pbi-fluent-button[_ngcontent-%COMP%]   .mat-icon.glyph-mini[_ngcontent-%COMP%]{font-size:var(--sm-font-size, 12px);width:var(--sm-font-size, 12px);height:var(--sm-font-size, 12px)}.pbi-fluent-button[_ngcontent-%COMP%]   .mat-icon.mat-ligature-font[fontIcon][_ngcontent-%COMP%]{overflow:auto}.pbi-fluent-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .pbi-fluent-button[_ngcontent-%COMP%]   pbi-icon[_ngcontent-%COMP%]{margin:0 8px}.heatmap-menu-button[_ngcontent-%COMP%]{padding:0 8px}  .mat-menu-panel.heatmap-menu{min-height:fit-content;margin-top:4px}  .mat-menu-panel.heatmap-menu .mat-menu-content{padding:0}  .mat-menu-panel.heatmap-menu .mat-menu-item{color:var(--gray-180, #252423);display:flex;flex-direction:row;align-items:center;height:36px}  .mat-menu-panel.heatmap-menu .mat-menu-item:disabled{background:transparent;color:var(--gray-80, #B3B0AD)}  .mat-menu-panel.heatmap-menu .mat-menu-item pbi-icon{display:flex;padding-right:8px}"],changeDetection:0}),H}(P.w)},96147:function(lt,Ge,t){"use strict";t.d(Ge,{J:function(){return I}});var r=t(50423),o=t(87426),P=t(49223),a=t(77476),d=t(18460),p=t(59968),l=t(50057),c=t(55710),y=t(86663),i=t(24326),C=t(36858),v=t(85102);function k(H,G){if(1&H&&(r.\u0275\u0275elementStart(0,"div")(1,"span",13),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"span"),r.\u0275\u0275text(4),r.\u0275\u0275elementEnd()()),2&H){var Z=G.$implicit;r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(Z.hierarchyName),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate1(": ",Z.levels.join(" > "),"")}}function E(H,G){if(1&H&&r.\u0275\u0275template(0,k,5,2,"div",12),2&H){var Z=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275property("ngForOf",Z.displayPaths)}}function s(H,G){if(1&H&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"span",10),r.\u0275\u0275text(2),r.\u0275\u0275pipe(3,"localize"),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(4,E,1,1,"ng-template",null,11,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementContainerEnd()),2&H){var Z=G.$implicit,ie=r.\u0275\u0275reference(5);r.\u0275\u0275advance(1),r.\u0275\u0275property("pbiTooltip",ie)("pbiTooltipDisabled",Z.showingAll),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",Z.showingAll?r.\u0275\u0275pipeBind1(3,3,"MetricsHierarchy_SelectHierarchy"):Z.displayLabel," ")}}function ne(H,G){1&H&&r.\u0275\u0275element(0,"span",14)}function te(H,G){1&H&&r.\u0275\u0275element(0,"pbi-spinner",15)}var X=function(G){return{active:G}};function m(H,G){if(1&H&&(r.\u0275\u0275elementStart(0,"button",4,5),r.\u0275\u0275template(2,s,6,5,"ng-container",6),r.\u0275\u0275pipe(3,"async"),r.\u0275\u0275template(4,ne,1,0,"ng-template",null,7,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275template(6,te,1,0,"pbi-spinner",8),r.\u0275\u0275pipe(7,"async"),r.\u0275\u0275element(8,"pbi-icon",9),r.\u0275\u0275elementEnd()),2&H){var Z=r.\u0275\u0275reference(1),ie=r.\u0275\u0275reference(5),ye=r.\u0275\u0275nextContext(),ae=r.\u0275\u0275reference(3);r.\u0275\u0275property("matMenuTriggerFor",ae)("ngClass",r.\u0275\u0275pureFunction1(9,X,!0===Z.menuOpen)),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",r.\u0275\u0275pipeBind1(3,5,ye.hierarchyDisplayInfo$))("ngIfElse",ie),r.\u0275\u0275advance(4),r.\u0275\u0275property("ngIf",r.\u0275\u0275pipeBind1(7,7,ye.isSwitchingPath$))}}function O(H,G){1&H&&r.\u0275\u0275element(0,"pbi-lazy-load",16)}var I=function(){function H(G,Z){this.hierarchyService=G,this.scorecardService=Z,this.showButton$=this.hierarchyService.hasHierarchies$,this.hierarchyDisplayInfo$=this.hierarchyService.getHierarchyDisplayInfoObservable(this.scorecardService.hierarchyPaths$),this.isSwitchingPath$=this.scorecardService.isSwitchingHierarchyPath()}return H.\u0275fac=function(Z){return new(Z||H)(r.\u0275\u0275directiveInject(o.G),r.\u0275\u0275directiveInject(P.G))},H.\u0275cmp=r.\u0275\u0275defineComponent({type:H,selectors:[["scorecard-hierarchy-button"]],decls:5,vars:3,consts:[["cdkMonitorElementFocus","","mat-button","","aria-expanded","hierarchySlicerMenuTrigger.menuOpen === true","class","hierarchy-btn pbi-fluent-button pbi-icon-button pbi-with-text",3,"matMenuTriggerFor","ngClass",4,"ngIf"],["xPosition","after","yPosition","below",1,"hierarchy-slicer-menu"],["hierarchySlicerMenu","matMenu"],["matMenuContent",""],["cdkMonitorElementFocus","","mat-button","","aria-expanded","hierarchySlicerMenuTrigger.menuOpen === true",1,"hierarchy-btn","pbi-fluent-button","pbi-icon-button","pbi-with-text",3,"matMenuTriggerFor","ngClass"],["hierarchySlicerMenuTrigger","matMenuTrigger"],[4,"ngIf","ngIfElse"],["loadingHierarchies",""],["class","pbi-spinner-small",4,"ngIf"],["size","mini","name","chevrondownsmall","localizeTooltip","View_Options",1,"icon"],[3,"pbiTooltip","pbiTooltipDisabled"],["hierarchySlicerTooltip",""],[4,"ngFor","ngForOf"],[1,"hierarchy-name"],["localize","All"],[1,"pbi-spinner-small"],["modulePath","@powerbi/GoalsHierarchy/goals-hierarchy.module#GoalsHierarchyModule","componentId","HierarchySlicerComponentId"]],template:function(Z,ie){1&Z&&(r.\u0275\u0275template(0,m,9,11,"button",0),r.\u0275\u0275pipe(1,"async"),r.\u0275\u0275elementStart(2,"mat-menu",1,2),r.\u0275\u0275template(4,O,1,0,"ng-template",3),r.\u0275\u0275elementEnd()),2&Z&&r.\u0275\u0275property("ngIf",r.\u0275\u0275pipeBind1(1,1,ie.showButton$))},dependencies:[a.NgClass,a.NgForOf,a.NgIf,d.R,p.X,l.r,c.W0,c.D8,c.hd,y._,i.k,C.V,a.AsyncPipe,v.F],styles:['.hierarchy-btn[_ngcontent-%COMP%]{padding-left:8px;padding-right:8px;background-color:var(--fluent-theme-neutral-lighter-alt-color, #FAF9F8)}.hierarchy-btn[_ngcontent-%COMP%]   pbi-spinner[_ngcontent-%COMP%]{height:20px}html:not([dir="rtl"])[_nghost-%COMP%]   .hierarchy-btn[_ngcontent-%COMP%]   pbi-spinner[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .hierarchy-btn[_ngcontent-%COMP%]   pbi-spinner[_ngcontent-%COMP%]{margin-left:8px}html[dir="rtl"][_nghost-%COMP%]   .hierarchy-btn[_ngcontent-%COMP%]   pbi-spinner[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .hierarchy-btn[_ngcontent-%COMP%]   pbi-spinner[_ngcontent-%COMP%]{margin-right:8px}html:not([dir="rtl"])[_nghost-%COMP%]   .hierarchy-btn[_ngcontent-%COMP%]   pbi-icon[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .hierarchy-btn[_ngcontent-%COMP%]   pbi-icon[_ngcontent-%COMP%]{margin-left:8px}html[dir="rtl"][_nghost-%COMP%]   .hierarchy-btn[_ngcontent-%COMP%]   pbi-icon[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .hierarchy-btn[_ngcontent-%COMP%]   pbi-icon[_ngcontent-%COMP%]{margin-right:8px}.hierarchy-name[_ngcontent-%COMP%]{font-weight:var(--font-weight-semi-bold)}'],changeDetection:0}),H}()},50042:function(lt,Ge,t){"use strict";t.d(Ge,{V:function(){return ne}});var r=t(50423),o=t(87426),P=t(9380),a=t(77476),d=t(50264),p=t(81437),l=t(55102),c=t(95135),y=t(96147),i=t(59916);function C(te,X){if(1&te&&r.\u0275\u0275element(0,"scorecard-title",7),2&te){var m=r.\u0275\u0275nextContext();r.\u0275\u0275property("scorecardName",m.scorecard.name)("isTitleEditable",m.isTitleEditable)}}function v(te,X){1&te&&r.\u0275\u0275element(0,"scorecard-hierarchy-button")}function k(te,X){1&te&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275template(1,v,1,0,"scorecard-hierarchy-button",8),r.\u0275\u0275elementContainerEnd()),2&te&&(r.\u0275\u0275advance(1),r.\u0275\u0275property("pbiFeatureSwitch","goalsHierarchies"))}function E(te,X){1&te&&r.\u0275\u0275element(0,"scorecard-hierarchy-button")}function s(te,X){1&te&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275template(1,E,1,0,"scorecard-hierarchy-button",8),r.\u0275\u0275elementContainerEnd()),2&te&&(r.\u0275\u0275advance(1),r.\u0275\u0275property("pbiFeatureSwitch","goalsHierarchies"))}var ne=function(){function te(X,m){this.hierarchyService=X,this.featureSwitchService=m,this.filterBy=new r.EventEmitter,this.onLinkedMetricInit=new r.EventEmitter,this.onNewGoal=new r.EventEmitter,this.onNewSubGoal=new r.EventEmitter,this.isTitleEditable=this.featureSwitchService.featureSwitches.goalsSkipScorecardCreationPane}return te.prototype.ngOnInit=function(){this.hasHierarchies$=this.hierarchyService.hasHierarchies$},te.\u0275fac=function(m){return new(m||te)(r.\u0275\u0275directiveInject(o.G),r.\u0275\u0275directiveInject(P.vZ))},te.\u0275cmp=r.\u0275\u0275defineComponent({type:te,selectors:[["scorecard-list-toolbar"]],inputs:{isEditMode:"isEditMode",scorecard:"scorecard",scorecardCapabilities:"scorecardCapabilities",numberOfSelectedGoals:"numberOfSelectedGoals",filterText:"filterText",showTitle:"showTitle"},outputs:{filterBy:"filterBy",onLinkedMetricInit:"onLinkedMetricInit",onNewGoal:"onNewGoal",onNewSubGoal:"onNewSubGoal"},decls:10,vars:10,consts:[["data-testid","scorecard-list-toolbar",1,"scorecard-list-toolbar"],[1,"left-actions","actions-container"],[3,"scorecardName","isTitleEditable",4,"ngIf"],[4,"ngIf"],[1,"right-actions","actions-container"],[3,"filterText","filterBy"],[3,"isEditMode","scorecardCapabilities","numberOfSelectedGoals","hasHierarchies","onNewGoal","onNewSubGoal","onLinkedMetricInit"],[3,"scorecardName","isTitleEditable"],[4,"pbiFeatureSwitch"]],template:function(m,O){1&m&&(r.\u0275\u0275elementStart(0,"section",0)(1,"div",1),r.\u0275\u0275template(2,C,1,2,"scorecard-title",2),r.\u0275\u0275template(3,k,2,1,"ng-container",3),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"div",4),r.\u0275\u0275template(5,s,2,1,"ng-container",3),r.\u0275\u0275elementStart(6,"scorecard-filter",5),r.\u0275\u0275listener("filterBy",function(H){return O.filterBy.emit(H)}),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(7,"view-switcher"),r.\u0275\u0275elementStart(8,"scorecard-new-button",6),r.\u0275\u0275listener("onNewGoal",function(){return O.onNewGoal.emit()})("onNewSubGoal",function(){return O.onNewSubGoal.emit()})("onLinkedMetricInit",function(){return O.onLinkedMetricInit.emit()}),r.\u0275\u0275pipe(9,"async"),r.\u0275\u0275elementEnd()()()),2&m&&(r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",O.showTitle),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!O.showTitle),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",O.showTitle),r.\u0275\u0275advance(1),r.\u0275\u0275property("filterText",O.filterText),r.\u0275\u0275advance(2),r.\u0275\u0275property("isEditMode",O.isEditMode)("scorecardCapabilities",O.scorecardCapabilities)("numberOfSelectedGoals",O.numberOfSelectedGoals)("hasHierarchies",r.\u0275\u0275pipeBind1(9,8,O.hasHierarchies$)))},dependencies:[a.NgIf,d.P,p.V,l.y,c.m,y.J,i.h,a.AsyncPipe],styles:["[_nghost-%COMP%]{--toolbar-padding: 0px 30px 12px 30px}[_nghost-%COMP%]   .scorecard-list-toolbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap;box-sizing:border-box;padding:var(--toolbar-padding);width:100%;font-family:var(--scorecard-fontFamily);background-color:var(--scorecard-headerBackgroundColor);border-bottom:1px solid var(--fluent-theme-neutral-quarter-alt-color, #E1DFDD);vertical-align:top}[_nghost-%COMP%]   .scorecard-list-toolbar[_ngcontent-%COMP%]   .actions-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:8px}[_nghost-%COMP%]   .scorecard-list-toolbar[_ngcontent-%COMP%]     .no-line .mat-form-field-underline{display:none}[_nghost-%COMP%]   .scorecard-list-toolbar[_ngcontent-%COMP%]   .mat-form-field-infix[_ngcontent-%COMP%]{border-top:0px}[_nghost-%COMP%]   .scorecard-list-toolbar[_ngcontent-%COMP%]     .scorecard-title{padding:0}[_nghost-%COMP%]   .scorecard-list-toolbar[_ngcontent-%COMP%]     .scorecard-title .editableLabel{font-size:var(--lg-font-size)}"],changeDetection:0}),te}()},49833:function(lt,Ge,t){"use strict";t.d(Ge,{t:function(){return P}});var r=t(50423),o=t(95135),P=function(){function a(){this.filterBy=new r.EventEmitter}return a.\u0275fac=function(p){return new(p||a)},a.\u0275cmp=r.\u0275\u0275defineComponent({type:a,selectors:[["scorecard-metric-picker-toolbar"]],inputs:{filterText:"filterText"},outputs:{filterBy:"filterBy"},decls:4,vars:1,consts:[[1,"scorecard-picker-toolbar"],[1,"left-actions"],[1,"right-actions"],[3,"filterText","filterBy"]],template:function(p,l){1&p&&(r.\u0275\u0275elementStart(0,"section",0),r.\u0275\u0275element(1,"div",1),r.\u0275\u0275elementStart(2,"div",2)(3,"scorecard-filter",3),r.\u0275\u0275listener("filterBy",function(y){return l.filterBy.emit(y)}),r.\u0275\u0275elementEnd()()()),2&p&&(r.\u0275\u0275advance(3),r.\u0275\u0275property("filterText",l.filterText))},dependencies:[o.m],styles:[".scorecard-picker-toolbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;box-sizing:border-box;padding:0 30px 12px;width:100%;font-family:var(--scorecard-fontFamily);background-color:var(--scorecard-headerBackgroundColor);border-bottom:1px solid var(--fluent-theme-neutral-quarter-alt-color, #E1DFDD);vertical-align:top}"],changeDetection:0}),a}()},59916:function(lt,Ge,t){"use strict";t.d(Ge,{h:function(){return ne}});var r=t(81337),o=t(93379),P=t(62831),a=t(50423),d=t(14172),p=t(77526),l=t(21719),c=t(49223),y=t(59968),i=t(55710),C=t(50264),v=t(86251),k=t(85102);function E(te,X){if(1&te){var m=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"tooltip-wrapper",6)(1,"button",7),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(m);var H=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(H.onLinkedMetricInit.emit())}),a.\u0275\u0275element(2,"span",11),a.\u0275\u0275elementEnd()()}if(2&te){var O=a.\u0275\u0275nextContext();a.\u0275\u0275property("tooltipKey",null==O.capabilities||null==O.capabilities.createLinkedGoal?null:O.capabilities.createLinkedGoal.disabledMessageKey),a.\u0275\u0275advance(1),a.\u0275\u0275property("disabled",!(null!=O.capabilities&&null!=O.capabilities.createLinkedGoal&&O.capabilities.createLinkedGoal.enabled))}}function s(te,X){if(1&te){var m=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"tooltip-wrapper",6)(1,"button",12),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(m);var H=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(H.hierarchyPane.openHierarchiesBuilder("ScorecardNewButton"))}),a.\u0275\u0275element(2,"span",13),a.\u0275\u0275elementEnd()()}if(2&te){var O=a.\u0275\u0275nextContext();a.\u0275\u0275property("tooltipKey",null==O.capabilities||null==O.capabilities.editHierarchies?null:O.capabilities.editHierarchies.disabledMessageKey),a.\u0275\u0275advance(1),a.\u0275\u0275property("disabled",!(null!=O.capabilities&&null!=O.capabilities.editHierarchies&&O.capabilities.editHierarchies.enabled)),a.\u0275\u0275advance(1),a.\u0275\u0275property("localize",O.hasHierarchies?"MetricsManageHierarchies_Preview":"MetricsHierarchy_SetupHierarchy_Preview")}}var ne=function(){function te(X,m){var O=this;this.hierarchyPane=X,this.scorecardService=m,this.onNewGoal=new a.EventEmitter,this.onNewSubGoal=new a.EventEmitter,this.onLinkedMetricInit=new a.EventEmitter,this.connectedGoalSubscrition=this.scorecardService.getScorecard().pipe((0,d.U)(function(I){return P.q.anyGoals(I.goals,function(H){return!!H.valueConnection||!!H.targetConnection})}),(0,p.x)()).subscribe(function(I){O.anyConnectedGoals=I,O.updateCapabilities()})}return te.prototype.ngOnChanges=function(X){(X.scorecardCapabilities||X.hasHierarchies||X.numberOfSelectedGoals)&&this.updateCapabilities()},te.prototype.ngOnDestroy=function(){this.connectedGoalSubscrition.unsubscribe()},te.prototype.updateCapabilities=function(){this.scorecardCapabilities&&(this.capabilities=(0,r.pi)({},this.scorecardCapabilities),this.capabilities.editHierarchies=o.jL.clone(this.scorecardCapabilities.editHierarchies).disableIf(!this.anyConnectedGoals&&!this.hasHierarchies,"NoConnections","MetricsHierarchy_No_Connections_Tooltip").build(),this.capabilities.createSubgoal=o.jL.clone(this.scorecardCapabilities.createGoal).disableIf(1!==this.numberOfSelectedGoals,"InvalidSelection").build())},te.\u0275fac=function(m){return new(m||te)(a.\u0275\u0275directiveInject(l.D),a.\u0275\u0275directiveInject(c.G))},te.\u0275cmp=a.\u0275\u0275defineComponent({type:te,selectors:[["scorecard-new-button"]],inputs:{isEditMode:"isEditMode",scorecardCapabilities:"scorecardCapabilities",numberOfSelectedGoals:"numberOfSelectedGoals",hasHierarchies:"hasHierarchies"},outputs:{onNewGoal:"onNewGoal",onNewSubGoal:"onNewSubGoal",onLinkedMetricInit:"onLinkedMetricInit"},features:[a.\u0275\u0275NgOnChangesFeature],decls:15,vars:13,consts:[["mat-button-toggle","",1,"new-btn","pbi-fluent-button","pbi-focus-outline","primary",3,"matMenuTriggerFor","disabled"],[1,"glyphicon","pbi-glyph-add","glyph-small","icon"],["localize","New",1,"label"],[1,"glyphicon","pbi-glyph-chevrondownsmall","glyph-small","icon"],[1,"new-menu",3,"overlapTrigger"],["newBtnDropdownMenu","matMenu"],[3,"tooltipKey"],["mat-menu-item","",1,"pbi-fluent-button",3,"disabled","click"],["localize","NewMetric"],[3,"tooltipKey",4,"pbiFeatureSwitch"],["localize","AddSubmetric"],["localize","Metrics_LinkedMetrics_Button_Preview"],["mat-menu-item","",1,"pbi-fluent-button","manage-hierarchies-btn",3,"disabled","click"],[3,"localize"]],template:function(m,O){if(1&m&&(a.\u0275\u0275elementStart(0,"button",0),a.\u0275\u0275pipe(1,"localize"),a.\u0275\u0275element(2,"i",1)(3,"span",2)(4,"i",3),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(5,"mat-menu",4,5)(7,"tooltip-wrapper",6)(8,"button",7),a.\u0275\u0275listener("click",function(){return O.onNewGoal.emit()}),a.\u0275\u0275element(9,"span",8),a.\u0275\u0275elementEnd()(),a.\u0275\u0275template(10,E,3,2,"tooltip-wrapper",9),a.\u0275\u0275elementStart(11,"tooltip-wrapper",6)(12,"button",7),a.\u0275\u0275listener("click",function(){return O.onNewSubGoal.emit()}),a.\u0275\u0275element(13,"span",10),a.\u0275\u0275elementEnd()(),a.\u0275\u0275template(14,s,3,3,"tooltip-wrapper",9),a.\u0275\u0275elementEnd()),2&m){var I=a.\u0275\u0275reference(6);a.\u0275\u0275property("matMenuTriggerFor",I)("disabled",!O.isEditMode),a.\u0275\u0275attribute("aria-label",a.\u0275\u0275pipeBind1(1,11,"New"))("aria-expanded",!0===I.menuOpen),a.\u0275\u0275advance(5),a.\u0275\u0275property("overlapTrigger",!1),a.\u0275\u0275advance(2),a.\u0275\u0275property("tooltipKey",null==O.capabilities||null==O.capabilities.createGoal?null:O.capabilities.createGoal.disabledMessageKey),a.\u0275\u0275advance(1),a.\u0275\u0275property("disabled",!(null!=O.capabilities&&null!=O.capabilities.createGoal&&O.capabilities.createGoal.enabled)),a.\u0275\u0275advance(2),a.\u0275\u0275property("pbiFeatureSwitch","goalsLinkedGoals"),a.\u0275\u0275advance(1),a.\u0275\u0275property("tooltipKey",null==O.capabilities||null==O.capabilities.createSubgoal?null:O.capabilities.createSubgoal.disabledMessageKey),a.\u0275\u0275advance(1),a.\u0275\u0275property("disabled",!(null!=O.capabilities&&null!=O.capabilities.createSubgoal&&O.capabilities.createSubgoal.enabled)),a.\u0275\u0275advance(2),a.\u0275\u0275property("pbiFeatureSwitch","goalsHierarchies")}},dependencies:[y.X,i.W0,i.tN,i.D8,C.P,v.j,k.F],styles:[".new-btn[_ngcontent-%COMP%]{display:flex;align-items:center;padding:6px 10px}.new-btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{margin:0 4px}.new-btn[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{padding:0 4px}.manage-hierarchies-btn[_ngcontent-%COMP%]{border-top:1px solid var(--gray-40, #E1DFDD)}.manage-hierarchies-btn[_ngcontent-%COMP%]:active, .manage-hierarchies-btn[_ngcontent-%COMP%]:focus{border-top:1px solid var(--gray-40, #E1DFDD)}  .mat-menu-panel.new-menu .mat-menu-content{padding:0}.mat-menu-item[_ngcontent-%COMP%]{color:var(--gray-180, #252423);display:flex;flex-direction:row;align-items:center;height:36px}.mat-menu-item[_ngcontent-%COMP%]:disabled{background:transparent;color:var(--gray-80, #B3B0AD)}"],changeDetection:0}),te}()},65736:function(lt,Ge,t){"use strict";t.d(Ge,{A:function(){return E}});var r=t(62831),o=t(57535),P=t(50423),a=t(65181),d=t(77476),p=t(78181),l=t(69437),c=["scorecardStatusTiles"];function y(s,ne){1&s&&P.\u0275\u0275element(0,"pbi-office-icon",11)}var i=function(ne){return{"background-color":ne}};function C(s,ne){if(1&s&&P.\u0275\u0275element(0,"div",12),2&s){var te=P.\u0275\u0275nextContext().$implicit;P.\u0275\u0275styleMap(P.\u0275\u0275pureFunction1(2,i,te.color))}}function v(s,ne){if(1&s){var te=P.\u0275\u0275getCurrentView();P.\u0275\u0275elementStart(0,"mat-button-toggle",5),P.\u0275\u0275listener("click",function(){var I=P.\u0275\u0275restoreView(te).$implicit,H=P.\u0275\u0275nextContext();return P.\u0275\u0275resetView(H.onStatusTileClicked(I))}),P.\u0275\u0275elementStart(1,"span",6),P.\u0275\u0275template(2,y,1,0,"pbi-office-icon",7),P.\u0275\u0275template(3,C,1,4,"div",8),P.\u0275\u0275elementStart(4,"div",9),P.\u0275\u0275text(5),P.\u0275\u0275elementEnd()(),P.\u0275\u0275elementStart(6,"span",10),P.\u0275\u0275text(7),P.\u0275\u0275elementEnd()()}if(2&s){var X=ne.$implicit;P.\u0275\u0275classProp("filtered-on",X.filteredOn)("hide",X.collapsed),P.\u0275\u0275property("checked",X.filteredOn),P.\u0275\u0275attribute("aria-label",X.displayName),P.\u0275\u0275advance(2),P.\u0275\u0275property("ngIf",X.filteredOn),P.\u0275\u0275advance(1),P.\u0275\u0275property("ngIf",!X.filteredOn),P.\u0275\u0275advance(2),P.\u0275\u0275textInterpolate(X.displayName),P.\u0275\u0275advance(2),P.\u0275\u0275textInterpolate(X.count)}}function k(s,ne){if(1&s){var te=P.\u0275\u0275getCurrentView();P.\u0275\u0275elementStart(0,"button",13),P.\u0275\u0275listener("click",function(){P.\u0275\u0275restoreView(te);var O=P.\u0275\u0275nextContext();return P.\u0275\u0275resetView(O.onCollapse())}),P.\u0275\u0275elementStart(1,"span"),P.\u0275\u0275text(2),P.\u0275\u0275elementEnd()()}if(2&s){var X=P.\u0275\u0275nextContext();P.\u0275\u0275classProp("expanded",!X.collapsed),P.\u0275\u0275attribute("aria-label",X.collapseButtonAriaLabel),P.\u0275\u0275advance(2),P.\u0275\u0275textInterpolate(X.collapseButtonLabel)}}var E=function(){function s(ne,te){this.changeDetectorRef=ne,this.localizationService=te,this.onStatusSelected=new P.EventEmitter,this.collapsed=!0,this.columnGap=8,this.enableCollapse=!1,this.tileMinWidth=140,this.tileMaxWidth=210,this.goalStatusHelper=new o.p(this.localizationService)}return s.prototype.onResize=function(){this.updateGoalStatusTiles()},s.prototype.ngAfterViewInit=function(){this.updateGoalStatusTiles()},s.prototype.ngOnChanges=function(){this.updateGoalStatusTiles()},s.prototype.onStatusTileClicked=function(ne){if(_.isNil(this.selectedStatuses)&&(this.selectedStatuses=[]),ne.status){var te=_.find(this.selectedStatuses,function(X){return o.p.statusesMatch(X,ne.status)});te?this.selectedStatuses=_.without(this.selectedStatuses,te):this.selectedStatuses.push(ne.status)}else this.selectedStatuses=[];this.updateGoalStatusTiles(),this.onStatusSelected.emit(this.selectedStatuses)},s.prototype.onCollapse=function(){this.collapsed=!this.collapsed,this.updateGoalStatusTiles()},s.prototype.updateGoalStatusTiles=function(){this.createStatusTiles(),this.calculateGrid(),this.collapseGrid(),this.changeDetectorRef.markForCheck()},s.prototype.createStatusTiles=function(){var ne;if(this.goals&&0!==(null===(ne=this.goals)||void 0===ne?void 0:ne.length)&&(1!==this.goals.length||!_.isNil(this.goals[0].name))){var te=r.q.flattenGoals(this.goals);this.statusTiles=[];var X=_.isEmpty(this.selectedStatuses);this.statusTiles.push({displayName:this.localizationService.get("MetricsName_New"),count:_.size(te),collapsed:!1,filteredOn:X});for(var m=_.filter(this.goalStatusList,function(ae){return!ae.historical}),I=0,H=o.p.getDistinctStatuses(te,this.goalStatusesByScorecardId,m);I<H.length;I++){var G=H[I],Z=this.goalStatusHelper.tryLocalizeDisplayName(G.displayName)||this.localizationService.get("NullValue"),ie=o.p.listIncludesMatchingStatus(this.selectedStatuses,G),ye=o.p.getGoalStatusIconColor(G.color);this.statusTiles.push({status:G,displayName:Z,color:ye,count:G.count,collapsed:!1,filteredOn:ie})}}},s.prototype.calculateGrid=function(){var ne,te;if(this.statusTiles&&0!==(null===(ne=this.statusTiles)||void 0===ne?void 0:ne.length)&&null!==(te=this.scorecardStatusTiles)&&void 0!==te&&te.nativeElement){var X=this.statusTiles.length;if(this.availableSpace=this.scorecardStatusTiles.nativeElement.clientWidth,this.availableSpace<this.tileMinWidth)return this.gridLayout={numberOfRows:X,numberOfColumns:1},this.gridStyle={"column-gap":"".concat(this.columnGap,"px"),"grid-template-columns":"repeat(".concat(this.gridLayout.numberOfColumns,", 1fr)")},void(this.enableCollapse=!0);if(this.availableSpace>X*this.tileMaxWidth+(X-1)*this.columnGap)return this.gridLayout={numberOfRows:1,numberOfColumns:X},this.gridStyle={"column-gap":"".concat(this.columnGap,"px"),"grid-template-columns":"repeat(auto-fill, ".concat(this.tileMaxWidth,"px)")},void(this.enableCollapse=!1);for(var m=Math.floor((this.availableSpace-this.tileMinWidth)/(this.tileMinWidth+this.columnGap)+1),I=[];m>0&&(this.availableSpace-(m-1)*this.columnGap)/m<=this.tileMaxWidth;)I.push({numberOfRows:Math.ceil(this.statusTiles.length/m),numberOfColumns:m}),m-=1;switch(I.length){case 0:m=Math.floor((this.availableSpace-this.tileMinWidth)/(this.tileMinWidth+this.columnGap)+1),this.gridLayout={numberOfRows:Math.ceil(this.statusTiles.length/m),numberOfColumns:m};break;case 1:this.gridLayout=I[0];break;default:if(this.availableSpace>=768){this.gridLayout=I[I.length-1];break}if(this.availableSpace<=767&&this.availableSpace>480){this.gridLayout=I[Math.ceil(I.length/2)-1];break}if(this.availableSpace<=480){this.gridLayout=I[0];break}}this.gridStyle={"column-gap":"".concat(this.columnGap,"px"),"grid-template-columns":"repeat(".concat(this.gridLayout.numberOfColumns,", 1fr)")},this.enableCollapse=this.gridLayout.numberOfRows>1}},s.prototype.collapseGrid=function(){if(this.enableCollapse){if(!this.collapsed)return this.collapseButtonLabel=this.localizationService.get("Collapse"),void(this.collapseButtonAriaLabel=this.localizationService.get("CollapseStatuses"));for(var ne=!0,te=this.gridLayout.numberOfColumns-1;te<this.statusTiles.length;te++)this.statusTiles[te].filteredOn&&(ne=!1);ne?this.standardCollapse():this.rearrangeCollapse(),this.collapseButtonLabel=this.localizationService.format("ShowXMore",[this.collapsedStatuses]),this.collapseButtonAriaLabel=this.localizationService.format("ShowMoreStatuses",[this.collapsedStatuses])}},s.prototype.standardCollapse=function(){for(var ne=this.gridLayout.numberOfColumns-1;ne<this.statusTiles.length;ne++)this.statusTiles[ne].collapsed=!0;this.collapsedStatuses=this.statusTiles.length-(this.gridLayout.numberOfColumns-1)},s.prototype.rearrangeCollapse=function(){var ne=[this.statusTiles[0]],te=this.statusTiles.filter(function(O){return O.filteredOn&&O.status}),X=this.statusTiles.filter(function(O){return!O.filteredOn&&O.status});ne=(ne=ne.concat(te)).concat(X),this.collapsedStatuses=0;for(var m=0;m<ne.length;m++)!ne[m].filteredOn&&m>this.gridLayout.numberOfColumns-2&&(ne[m].collapsed=!0,this.collapsedStatuses+=1);this.statusTiles=ne},s.\u0275fac=function(te){return new(te||s)(P.\u0275\u0275directiveInject(P.ChangeDetectorRef),P.\u0275\u0275directiveInject(a.o))},s.\u0275cmp=P.\u0275\u0275defineComponent({type:s,selectors:[["scorecard-status-tiles"]],viewQuery:function(te,X){var m;(1&te&&P.\u0275\u0275viewQuery(c,5),2&te)&&(P.\u0275\u0275queryRefresh(m=P.\u0275\u0275loadQuery())&&(X.scorecardStatusTiles=m.first))},hostBindings:function(te,X){1&te&&P.\u0275\u0275listener("resize",function(O){return X.onResize(O)},!1,P.\u0275\u0275resolveWindow)},inputs:{goals:"goals",goalStatusesByScorecardId:"goalStatusesByScorecardId",goalStatusList:"goalStatusList",selectedStatuses:"selectedStatuses"},outputs:{onStatusSelected:"onStatusSelected"},features:[P.\u0275\u0275NgOnChangesFeature],decls:5,vars:4,consts:[[1,"scorecard-status-tiles"],["multiple","",1,"status-tiles-btn-group"],["scorecardStatusTiles",""],["class","status-tile",3,"checked","filtered-on","hide","click",4,"ngFor","ngForOf"],["class","status-tiles-collapse-btn",3,"expanded","click",4,"ngIf"],[1,"status-tile",3,"checked","click"],[1,"status-tile-flex-container"],["class","status-tile-icon","name","CheckmarkWithDynamicColor_16",4,"ngIf"],["class","status-tile-dot",3,"style",4,"ngIf"],[1,"status-tile-name"],[1,"status-tile-count"],["name","CheckmarkWithDynamicColor_16",1,"status-tile-icon"],[1,"status-tile-dot"],[1,"status-tiles-collapse-btn",3,"click"]],template:function(te,X){1&te&&(P.\u0275\u0275elementStart(0,"section",0)(1,"mat-button-toggle-group",1,2),P.\u0275\u0275template(3,v,8,10,"mat-button-toggle",3),P.\u0275\u0275template(4,k,3,4,"button",4),P.\u0275\u0275elementEnd()()),2&te&&(P.\u0275\u0275advance(1),P.\u0275\u0275styleMap(X.gridStyle),P.\u0275\u0275advance(2),P.\u0275\u0275property("ngForOf",X.statusTiles),P.\u0275\u0275advance(1),P.\u0275\u0275property("ngIf",X.enableCollapse))},dependencies:[d.NgForOf,d.NgIf,p.A9,p.Yi,l.m],styles:[".scorecard-status-tiles[_ngcontent-%COMP%]{box-sizing:border-box;padding:0 30px;font-family:var(--scorecard-fontFamily);background-color:var(--scorecard-headerBackgroundColor);border-bottom:1px solid var(--fluent-theme-neutral-quarter-alt-color, #E1DFDD);width:100%}.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]{display:grid;row-gap:12px;grid-template-rows:repeat(auto-fill,40px);column-gap:8px;grid-template-columns:repeat(auto-fill,140px);padding:12px 0;width:100%;border:var(--focus-outline-definition, 2.5px solid) transparent}@media screen and (-ms-high-contrast: active){.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]{border:none}}.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tile[_ngcontent-%COMP%]{display:flex;box-sizing:border-box;justify-content:space-between;min-width:140px;max-width:210px;padding:0;box-shadow:none;border:1px solid var(--gray-30, #EDEBE9);border-radius:2px;background-color:var(--fluent-theme-white-color, #FFF)}.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tile.hide[_ngcontent-%COMP%]{display:none}.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tile[_ngcontent-%COMP%]:hover{background-color:var(--gray-20, #F3F2F1)}.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tile[_ngcontent-%COMP%]:active{background-color:var(--gray-30, #EDEBE9)}.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tile.filtered-on[_ngcontent-%COMP%]{border:1px solid var(--gray-140, #484644)}.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tile[_ngcontent-%COMP%]     .mat-button-toggle-button{width:100%;padding:10px 12px}.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tile[_ngcontent-%COMP%]     .mat-button-toggle-button .mat-button-toggle-label-content{display:flex;box-sizing:border-box;justify-content:space-between;max-height:20px;padding:0;line-height:20px}.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tile[_ngcontent-%COMP%]     .mat-button-toggle-button .mat-button-toggle-label-content .status-tile-flex-container{text-align:left;max-width:80%}.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tile[_ngcontent-%COMP%]     .mat-button-toggle-button .mat-button-toggle-label-content .status-tile-flex-container .status-tile-dot{display:inline-block;height:8px;width:8px;margin:6px 8px 6px 0;border-radius:50%;background-color:var(--fluent-theme-black-color, #000)}.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tile[_ngcontent-%COMP%]     .mat-button-toggle-button .mat-button-toggle-label-content .status-tile-flex-container .status-tile-icon{display:inline-block;vertical-align:top;height:16px;width:16px;margin:1px 4px 2px 0}.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tile[_ngcontent-%COMP%]     .mat-button-toggle-button .mat-button-toggle-label-content .status-tile-flex-container .status-tile-name{display:inline-block;width:100%;line-height:20px;font-family:var(--scorecard-fontFamily);font-size:var(--md-font-size, 14px);overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tile[_ngcontent-%COMP%]     .mat-button-toggle-button .mat-button-toggle-label-content .status-tile-count{max-width:20%;font-family:var(--scorecard-fontFamily);font-size:var(--md-font-size, 14px);text-align:right;line-height:20px}.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tiles-collapse-btn[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;margin:auto 0 auto auto;padding:0;color:var(--fluent-theme-link-darker-alt-color, #106EBE);background:transparent;border:var(--focus-outline-definition, 2.5px solid) transparent}@media screen and (-ms-high-contrast: active){.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tiles-collapse-btn[_ngcontent-%COMP%]{border:none}}.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tiles-collapse-btn[_ngcontent-%COMP%]:hover, .scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tiles-collapse-btn[_ngcontent-%COMP%]:active{border:var(--focus-outline-definition, 2.5px solid) transparent}@media screen and (-ms-high-contrast: active){.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tiles-collapse-btn[_ngcontent-%COMP%]:hover, .scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tiles-collapse-btn[_ngcontent-%COMP%]:active{border:none}}.scorecard-status-tiles[_ngcontent-%COMP%]   .status-tiles-btn-group[_ngcontent-%COMP%]   .status-tiles-collapse-btn.expanded[_ngcontent-%COMP%]{flex-direction:row;margin:auto auto auto 12px}"],changeDetection:0}),s}()},55102:function(lt,Ge,t){"use strict";t.d(Ge,{y:function(){return X}});var r=t(81337),o=t(14786),P=t(46544),a=t(50423),d=t(49223),p=t(77476),l=t(17174),c=t(24150),y=t(74913);function i(m,O){if(1&m){var I=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"input",7),a.\u0275\u0275listener("ngModelChange",function(Z){a.\u0275\u0275restoreView(I);var ie=a.\u0275\u0275nextContext(2);return a.\u0275\u0275resetView(ie.scorecardName=Z)}),a.\u0275\u0275elementEnd()}if(2&m){var H=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("ngModel",H.scorecardName)}}function C(m,O){if(1&m){var I=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"tri-svg-icon",8),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(I);var Z=a.\u0275\u0275nextContext(2);return a.\u0275\u0275resetView(Z.onScorecardNameEdit())}),a.\u0275\u0275pipe(1,"async"),a.\u0275\u0275elementEnd()}if(2&m){var H=a.\u0275\u0275nextContext(2);a.\u0275\u0275classProp("can-display",a.\u0275\u0275pipeBind1(1,3,H.isEditMode$)),a.\u0275\u0275property("name","edit_20_regular")}}function v(m,O){if(1&m){var I=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"input",7),a.\u0275\u0275listener("ngModelChange",function(Z){a.\u0275\u0275restoreView(I);var ie=a.\u0275\u0275nextContext(3);return a.\u0275\u0275resetView(ie.scorecardDescription=Z)}),a.\u0275\u0275elementEnd()}if(2&m){var H=a.\u0275\u0275nextContext(3);a.\u0275\u0275property("ngModel",H.scorecardDescription)}}function k(m,O){if(1&m){var I=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"tri-svg-icon",11),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(I);var Z=a.\u0275\u0275nextContext(3);return a.\u0275\u0275resetView(Z.onDescriptionEdit())}),a.\u0275\u0275pipe(1,"async"),a.\u0275\u0275elementEnd()}if(2&m){var H=a.\u0275\u0275nextContext(3);a.\u0275\u0275classProp("can-display",a.\u0275\u0275pipeBind1(1,3,H.isEditMode$)),a.\u0275\u0275property("name","edit_20_regular")}}function E(m,O){if(1&m&&(a.\u0275\u0275elementStart(0,"span",9),a.\u0275\u0275template(1,v,1,1,"input",4),a.\u0275\u0275pipe(2,"async"),a.\u0275\u0275template(3,k,2,5,"tri-svg-icon",10),a.\u0275\u0275elementEnd()),2&m){var I=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(1),a.\u0275\u0275property("pbiEditableLabel",I.pbiEditableDescriptionOptions)("pbiEditableLabelValue",I.scorecardDescription)("pbiEditableLabelMode",a.\u0275\u0275pipeBind1(2,5,I.isEditMode$))("pbiEditableLabelEditable",I.isScorecardDescriptionEditable),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",!I.isScorecardDescriptionEditable)}}function s(m,O){if(1&m&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275elementStart(1,"span",3),a.\u0275\u0275template(2,i,1,1,"input",4),a.\u0275\u0275pipe(3,"async"),a.\u0275\u0275template(4,C,2,5,"tri-svg-icon",5),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(5,E,4,7,"span",6),a.\u0275\u0275elementContainerEnd()),2&m){var I=a.\u0275\u0275nextContext();a.\u0275\u0275advance(2),a.\u0275\u0275property("pbiEditableLabel",I.pbiEditableNameOptions)("pbiEditableLabelValue",I.scorecardName)("pbiEditableLabelMode",a.\u0275\u0275pipeBind1(3,6,I.isEditMode$))("pbiEditableLabelEditable",I.isScorecardNameEditable),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",!I.isScorecardNameEditable),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",!!I.scorecardDescription)}}function ne(m,O){1&m&&(a.\u0275\u0275elementStart(0,"div",15),a.\u0275\u0275text(1,"-"),a.\u0275\u0275elementEnd())}function te(m,O){if(1&m&&(a.\u0275\u0275elementStart(0,"div",12),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(2,ne,2,0,"div",13),a.\u0275\u0275elementStart(3,"div",14),a.\u0275\u0275text(4),a.\u0275\u0275elementEnd()),2&m){var I=a.\u0275\u0275nextContext();a.\u0275\u0275propertyInterpolate("title",I.scorecardName),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate(I.scorecardName),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",I.showTitleDash),a.\u0275\u0275advance(1),a.\u0275\u0275propertyInterpolate("title",I.scorecardDescription),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate(I.scorecardDescription)}}var X=function(){function m(O,I,H){this.changeDetector=O,this.scorecardService=I,this.telemetryService=H,this.isNewHeader=!0,this.isScorecardNameEditable=!1,this.isScorecardDescriptionEditable=!1,this.isEditMode$=this.scorecardService.isEditMode()}return m.prototype.ngOnInit=function(){var O=this;this.showTitleDash=void 0!==this.scorecardDescription&&""!==this.scorecardDescription&&this.isNewHeader;var I=this.scorecardName,H=this.scorecardDescription;this.pbiEditableNameOptions={disableClick:!0,customTooltip:!1,inputMatchLabelWidth:!1,onEdit:this.onScorecardNameEdit.bind(this),onBlur:function(){return(0,r.mG)(O,void 0,void 0,function(){return(0,r.Jh)(this,function(Z){switch(Z.label){case 0:return this.isScorecardNameEditable=!1,I===this.scorecardName?[2]:(this.telemetryService.logEvent(o.tj),[4,this.updateScorecardDetails()]);case 1:return Z.sent(),I=this.scorecardName,[2]}})})}},this.pbiEditableDescriptionOptions={disableClick:!0,customTooltip:!1,inputMatchLabelWidth:!1,onEdit:this.onDescriptionEdit.bind(this),onBlur:function(){return(0,r.mG)(O,void 0,void 0,function(){return(0,r.Jh)(this,function(Z){switch(Z.label){case 0:return this.isScorecardDescriptionEditable=!1,H===this.scorecardDescription?[2]:(this.telemetryService.logEvent(o.ib),[4,this.updateScorecardDetails()]);case 1:return Z.sent(),H=this.scorecardDescription,[2]}})})}}},m.prototype.ngOnChanges=function(O){O.scorecardDescription&&(this.showTitleDash=void 0!==this.scorecardDescription&&""!==this.scorecardDescription)},m.prototype.onScorecardNameEdit=function(){this.isScorecardNameEditable=!0,this.changeDetector.markForCheck()},m.prototype.onDescriptionEdit=function(){this.isScorecardDescriptionEditable=!0,this.changeDetector.markForCheck()},m.prototype.updateScorecardDetails=function(){return this.scorecardService.updateScorecard({name:this.scorecardName,description:this.scorecardDescription})},m.\u0275fac=function(I){return new(I||m)(a.\u0275\u0275directiveInject(a.ChangeDetectorRef),a.\u0275\u0275directiveInject(d.G),a.\u0275\u0275directiveInject(P.y0))},m.\u0275cmp=a.\u0275\u0275defineComponent({type:m,selectors:[["scorecard-title"]],inputs:{scorecardName:"scorecardName",scorecardDescription:"scorecardDescription",isTitleEditable:"isTitleEditable",isNewHeader:"isNewHeader"},features:[a.\u0275\u0275NgOnChangesFeature],decls:4,vars:4,consts:[["data-testid","scorecard-title",1,"scorecard-title"],[4,"ngIf","ngIfElse"],["staticTitle",""],[1,"editableLabel"],[3,"ngModel","ngModelChange",4,"pbiEditableLabel","pbiEditableLabelValue","pbiEditableLabelMode","pbiEditableLabelEditable"],["tri-svg-icon-16","","class","tri-svg","data-testid","edit-scorecard-title",3,"name","can-display","click",4,"ngIf"],["class","editableDescription",4,"ngIf"],[3,"ngModel","ngModelChange"],["tri-svg-icon-16","","data-testid","edit-scorecard-title",1,"tri-svg",3,"name","click"],[1,"editableDescription"],["tri-svg-icon-16","","class","tri-svg",3,"name","can-display","click",4,"ngIf"],["tri-svg-icon-16","",1,"tri-svg",3,"name","click"],[1,"title",3,"title"],["class","dash",4,"ngIf"],[1,"subtitle",3,"title"],[1,"dash"]],template:function(I,H){if(1&I&&(a.\u0275\u0275elementStart(0,"section",0),a.\u0275\u0275template(1,s,6,8,"ng-container",1),a.\u0275\u0275template(2,te,5,5,"ng-template",null,2,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275elementEnd()),2&I){var G=a.\u0275\u0275reference(3);a.\u0275\u0275classProp("old-header",!H.isNewHeader),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",H.isTitleEditable)("ngIfElse",G)}},dependencies:[p.NgIf,l.Fj,l.JJ,l.On,c.D,y.M,p.AsyncPipe],styles:[".scorecard-title.old-header[_ngcontent-%COMP%]{display:block}.scorecard-title.old-header[_ngcontent-%COMP%]   .editableLabel[_ngcontent-%COMP%]     pbi-text-label{max-width:90%}.scorecard-title.old-header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-bottom:10px}.scorecard-title.old-header[_ngcontent-%COMP%]   .editableDescription[_ngcontent-%COMP%]     pbi-text-label{max-width:90%}.scorecard-title[_ngcontent-%COMP%]{display:flex;flex-direction:row;box-sizing:border-box;padding:12px 30px 6px;width:100%;background-color:var(--scorecard-headerBackgroundColor)}.scorecard-title[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:var(--scorecard-headerForegroundColor);font-family:var(--scorecard-fontFamily);font-size:var(--vlg-font-size, 18px);font-weight:var(--font-weight-semi-bold, 600)}.scorecard-title[_ngcontent-%COMP%]   .editableLabel[_ngcontent-%COMP%]{height:40px;display:flex;align-items:center;padding-bottom:0;margin-right:10px;color:var(--scorecard-headerForegroundColor);font-family:var(--scorecard-fontFamily);font-size:var(--vlg-font-size, 18px);font-weight:var(--font-weight-semi-bold, 600)}.scorecard-title[_ngcontent-%COMP%]   .editableLabel[_ngcontent-%COMP%]:hover   .tri-svg.can-display[_ngcontent-%COMP%]{visibility:visible}.scorecard-title[_ngcontent-%COMP%]   .editableDescription[_ngcontent-%COMP%]{flex-grow:100;display:flex;align-items:center;color:var(--scorecard-headerForegroundColor);opacity:.9;font-family:var(--scorecard-fontFamily);font-size:var(--lg-font-size, 16px);font-weight:var(--font-weight-regular, 400)}.scorecard-title[_ngcontent-%COMP%]   .editableDescription[_ngcontent-%COMP%]:hover   .tri-svg.can-display[_ngcontent-%COMP%]{visibility:visible}.scorecard-title[_ngcontent-%COMP%]   .tri-svg[_ngcontent-%COMP%]{height:16px;width:16px;margin-left:6px;margin-right:4px;visibility:hidden}.scorecard-title[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:6px 12px 6px 16px;box-sizing:border-box;border:2px solid #0F6CBD;border-radius:4px}.scorecard-title[_ngcontent-%COMP%]   .dash[_ngcontent-%COMP%]{padding:0 8px}.scorecard-title[_ngcontent-%COMP%]   .dash[_ngcontent-%COMP%], .scorecard-title[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:var(--scorecard-headerForegroundColor);opacity:.9;font-family:var(--scorecard-fontFamily);font-size:var(--lg-font-size, 16px);font-weight:var(--font-weight-regular, 400)}"],changeDetection:0}),m}()},70060:function(lt,Ge,t){"use strict";function r(o){if(null==o)return 0;if("number"==typeof o)return o;if("string"==typeof o)switch(o.toString().trim().toLowerCase()){case"none":return 0;case"read":default:return 1;case"write":return 2;case"readwrite":return 3}return 0}t.d(Ge,{l:function(){return r}})},77695:function(lt,Ge,t){"use strict";t.d(Ge,{p:function(){return a}});var r=t(60042),o=t(125),P=t(57535),a=function(){function d(){}return d.sortAndFilter=function(p,l,c,y){if(_.isEmpty(p))return p;var i=l.sortAscending?"asc":"desc",C=[this.sortingFunctions[l.sortBy]];return"Rank"===l.sortBy&&C.push(this.sortingFunctions.CreatedTime),C.push("Name"===l.sortBy?this.sortingFunctions.CreatedTime:this.sortingFunctions.Name),this.sortRecursive(p,i,C,c,y)},d.sort=function(p,l){return this.sortAndFilter(p,l,{},{})},d.toggleSort=function(p,l){return l?p.sortBy===l?p.sortAscending?{sortBy:p.sortBy,sortAscending:!1}:r.Ij:{sortBy:l,sortAscending:!0}:p},d.sortRecursive=function(p,l,c,y,i){for(var C=0,v=p=_.orderBy(p,c,[l,"asc"]);C<v.length;C++){var k=v[C];_.isEmpty(k.subGoals)||(k.subGoals=this.sortRecursive(k.subGoals,l,c,y,i)),_.isNil(i)?(delete k.isFilterMatch,delete k.isHidden):(k.isFilterMatch=d.matchesFilter(k,y,i),k.isHidden=!k.isFilterMatch&&!_.some(k.subGoals,function(E){return!E.isHidden}))}return p},d.matchesFilter=function(p,l,c){var y,i,C,v,k;if(_.isNil(c)||p.isNew||"Editing"===p.state||"Saving"===p.state)return!0;var E=null!==(y=o.r.buildCurrentGoalValue(p).status)&&void 0!==y?y:0,s=P.p.getGoalStatusForScorecardId(E,p.scorecardId,l),ne=!1,te=null===(i=c?.keyword)||void 0===i?void 0:i.toLocaleLowerCase();if(!_.isString(te)||_.isEmpty(te))ne=!0;else if(!(null===(C=p.name)||void 0===C)&&C.toLocaleLowerCase().includes(te)&&(ne=!0),c?.matchOwner&&!ne&&((null===(v=p.ownerDisplayNames)||void 0===v?void 0:v.length)>=1?ne=_.some(p.ownerDisplayNames,function(O){return O?.toLocaleLowerCase().includes(te)}):(ne=null===(k=p.owner)||void 0===k?void 0:k.toLocaleLowerCase().includes(te))||(ne=_.some(p.additionalOwners,function(O){var I,H=null!==(I=O.userPrincipalName)&&void 0!==I?I:O.aadAppId;return H?.toLocaleLowerCase().includes(te)}))),c?.matchStatus&&!ne){var X=s.displayName;X?.toLocaleLowerCase().includes(te)&&(ne=!0)}var m=!1;return(_.isNil(c?.statuses)||_.isEmpty(c?.statuses)||P.p.listIncludesMatchingStatus(c.statuses,s))&&(m=!0),ne&&m},d.sortingFunctions={Rank:function(l){return l.rank},CreatedTime:function(l){return l.createdTime},Name:function(l){var c;return null===(c=l.name)||void 0===c?void 0:c.trim().toLocaleLowerCase()},Owner:function(l){var c,y,i;return null===(i=null!==(y=null===(c=l.ownerDisplayNames)||void 0===c?void 0:c[0])&&void 0!==y?y:l.owner)||void 0===i?void 0:i.trim().toLocaleLowerCase()},Status:function(l){return(o.r.buildCurrentGoalValue(l).status+1)%6},Value:function(l){return o.r.buildCurrentGoalValue(l).value},Change:function(l){return o.r.calculateValueChange(l,!0).changeAmount},Milestone:function(l){return o.r.buildCurrentGoalValue(l).nextTarget},Target:function(l){return o.r.buildCurrentGoalValue(l).finalTarget},DueDate:function(l){return l.completionDate}},d}()},58108:function(lt,Ge,t){"use strict";t.d(Ge,{o:function(){return Wo}});var r=t(81337),o=t(29730),P=t(61088),a=t(60042),d=t(34340),p=t(62831),l=t(23348),c=t(32293),y=t(62458),i=t(50423),C=t(65181),v=t(58938),k=t(77476),E=t(17174),s=t(59968),ne=t(50057),te=t(44408),X=t(44641),m=t(24326),O=t(85102);function I(Ve,Le){if(1&Ve&&i.\u0275\u0275element(0,"message-banner",10),2&Ve){var Te=i.\u0275\u0275nextContext();i.\u0275\u0275property("viewModel",Te.messageBannerModelColumn)}}function H(Ve,Le){if(1&Ve&&i.\u0275\u0275element(0,"message-banner",10),2&Ve){var Te=i.\u0275\u0275nextContext();i.\u0275\u0275property("viewModel",Te.messageBannerModelEmpty)}}function G(Ve,Le){if(1&Ve&&(i.\u0275\u0275elementStart(0,"option",15),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&Ve){var Te=Le.$implicit;i.\u0275\u0275property("value",Le.index),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate(Te.sheetName)}}function Z(Ve,Le){if(1&Ve){var Te=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",11),i.\u0275\u0275element(1,"p",12),i.\u0275\u0275elementStart(2,"select",13),i.\u0275\u0275listener("change",function(vt){i.\u0275\u0275restoreView(Te);var pt=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(pt.onSelectTable(vt.target.value))}),i.\u0275\u0275template(3,G,2,2,"option",14),i.\u0275\u0275elementEnd()()}if(2&Ve){var Be=i.\u0275\u0275nextContext();i.\u0275\u0275advance(3),i.\u0275\u0275property("ngForOf",Be.goalPreviewData)}}function ie(Ve,Le){if(1&Ve&&(i.\u0275\u0275elementStart(0,"option",24),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&Ve){var Te=Le.$implicit;i.\u0275\u0275property("value",Te),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate(Te)}}function ye(Ve,Le){if(1&Ve){var Te=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"th")(1,"div",19)(2,"div",20)(3,"select",21),i.\u0275\u0275listener("ngModelChange",function(Rt){var Ht=i.\u0275\u0275restoreView(Te).index,sn=i.\u0275\u0275nextContext(2);return i.\u0275\u0275resetView(sn.matchedHeaderName[Ht]=Rt)}),i.\u0275\u0275text(4),i.\u0275\u0275template(5,ie,2,2,"option",22),i.\u0275\u0275element(6,"option"),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(7,"div",23),i.\u0275\u0275text(8),i.\u0275\u0275elementEnd()()()}if(2&Ve){var Be=Le.index,Ye=Le.$implicit,vt=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(3),i.\u0275\u0275property("ngModel",vt.matchedHeaderName[Be]),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1("",vt.matchedHeaderName[Be]," "),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",vt.scorecardAttributes),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate(Ye)}}function ae(Ve,Le){if(1&Ve&&(i.\u0275\u0275elementStart(0,"td"),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&Ve){var Te=Le.$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate(Te)}}function J(Ve,Le){if(1&Ve&&(i.\u0275\u0275elementStart(0,"tr"),i.\u0275\u0275template(1,ae,2,1,"td",18),i.\u0275\u0275elementEnd()),2&Ve){var Te=Le.$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",Te)}}function N(Ve,Le){if(1&Ve&&(i.\u0275\u0275elementStart(0,"div",16)(1,"table",17)(2,"tr"),i.\u0275\u0275template(3,ye,9,4,"th",18),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(4,J,2,1,"tr",18),i.\u0275\u0275elementEnd()()),2&Ve){var Te=i.\u0275\u0275nextContext();i.\u0275\u0275advance(3),i.\u0275\u0275property("ngForOf",Te.matchedHeaderName)("ngForOf",Te.goalImportFileMetadata.tables[Te.selectTable].column),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",Te.goalImportFileMetadata.tables[Te.selectTable].rows)}}function he(Ve,Le){1&Ve&&i.\u0275\u0275element(0,"pbi-spinner",25)}function pe(Ve,Le){1&Ve&&i.\u0275\u0275element(0,"span",32)}function ce(Ve,Le){if(1&Ve&&(i.\u0275\u0275elementStart(0,"span",33),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&Ve){var Te=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",Te.numGoals,"")}}function ge(Ve,Le){if(1&Ve){var Te=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"section",26)(1,"div",27)(2,"button",28),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(Te);var vt=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(vt.importFromFile())}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"button",29),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(Te);var vt=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(vt.close())}),i.\u0275\u0275elementEnd()(),i.\u0275\u0275template(4,pe,1,0,"span",30),i.\u0275\u0275template(5,ce,2,1,"span",31),i.\u0275\u0275elementEnd()}if(2&Ve){var Be=i.\u0275\u0275nextContext();i.\u0275\u0275advance(4),i.\u0275\u0275property("ngIf",Be.hasDataLoaded),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",Be.hasDataLoaded)}}var se=function(){function Ve(Le,Te,Be,Ye){this.data=Le,this.mashupEvaluationService=Te,this.localizationService=Be,this.dialogService=Ye,this.selectTable=0,this.maxPercent=0,this.numGoals=0,this.emptyFile=!1,this.exceedsColumns=!1,this.hasDataLoaded=!1,this.messageBannerModelColumn={bannerType:0,iconName:"pbi-glyph-warning",message:this.localizationService.get("MetricsScorecard_Import_Error_Column_Num")},this.messageBannerModelEmpty={bannerType:0,iconName:"pbi-glyph-error",message:this.localizationService.get("MetricsScorecard_Import_Error_Empty_File")}}return Ve.prototype.ngOnInit=function(){var Le=this;this.goalImportFileMetadata={file_name:"ExampleFile",tables:[]},this.goalPreviewData=this.goalImportFileMetadata.tables,this.scorecardAttributes=["Name","Owner","Status","Value","Progress","Due Date","Notes"],this.getAllTables().then(function(Te){if(_.isEmpty(Te))Le.emptyFile=!0;else{for(var Be=0,Ye=Te;Be<Ye.length;Be++){var vt=Ye[Be];Le.goalPreviewData.push({sheetName:vt.sheetName,tableName:vt.tableName,column:[],rows:[]})}Le.onSelectTable(0)}})},Ve.prototype.onSelectTable=function(Le){return(0,r.mG)(this,void 0,void 0,function(){var Te,Be;return(0,r.Jh)(this,function(Ye){switch(Ye.label){case 0:return this.selectTable=Le,Te=this.goalImportFileMetadata.tables[Le],_.isEmpty(Te.column)?(this.hasDataLoaded=!1,[4,this.evaluatePreviewTable(Te.sheetName,Te.tableName)]):[3,2];case 1:Be=Ye.sent(),this.goalImportFileMetadata.tables[this.selectTable].column=Be.columns,this.goalImportFileMetadata.tables[this.selectTable].rows=Be.rows,Ye.label=2;case 2:return this.setHeaders(),this.numGoals=this.goalImportFileMetadata.tables[this.selectTable].rows.length,this.exceedsColumns=this.goalImportFileMetadata.tables[this.selectTable].column.length>=7,[2]}})})},Ve.prototype.setHeaders=function(){this.excelHeaders=this.goalImportFileMetadata.tables[this.selectTable].column;for(var Le=[],Te=0,Be=this.excelHeaders;Te<Be.length;Te++)this.stringSimilarity(Be[Te],this.scorecardAttributes),Le.push(this.maxPercentHeader);this.matchedHeaderName=Le,this.hasDataLoaded=!0},Ve.prototype.getAllTables=function(){return(0,r.mG)(this,void 0,void 0,function(){var Le,Te,Be,Ye,vt,pt,Rt,Ut;return(0,r.Jh)(this,function(Ht){switch(Ht.label){case 0:return Le=this.data.fileData,y.fF.assertValue(this.data.fileData,"Missing file data"),[4,this.mashupEvaluationService.evaluateQuery('section Section1; shared Query = let source = Excel.Workbook(Binary.FromText("'.concat(Le,'")) in source;'))];case 1:for(Te=Ht.sent(),Be=[],Ye=_.indexOf(Te.columns,"Name"),vt=_.indexOf(Te.columns,"Kind"),pt=0,Rt=Te.rows;pt<Rt.length;pt++)"Table"===(Ut=Rt[pt])[vt]&&Be.push({sheetName:Ut[Ye],tableName:Ut[vt],column:[],rows:[]});return[2,Be]}})})},Ve.prototype.importFromFile=function(){var Le;return(0,r.mG)(this,void 0,void 0,function(){var Be;return(0,r.Jh)(this,function(Ye){switch(Ye.label){case 0:return[4,this.mashupEvaluationService.importGoal((Be=this.data.scorecard).groupId,Be.id,this.goalImportFileMetadata.tables[this.selectTable],this.matchedHeaderName,null===(Le=Be.goalStatuses)||void 0===Le?void 0:Le.statuses)];case 1:return Ye.sent(),this.close(),[2]}})})},Ve.prototype.evaluatePreviewTable=function(Le,Te){return(0,r.mG)(this,void 0,void 0,function(){return(0,r.Jh)(this,function(Ye){return[2,this.mashupEvaluationService.evaluateQuery('section Section1; shared Query = let source = Excel.Workbook(Binary.FromText("'.concat(this.data.fileData,'")){[Item="').concat(Le,'",Kind="').concat(Te,'"]}[Data] in source;'))]})})},Ve.prototype.stringSimilarity=function(Le,Te,Be){function Ye(An,xt){An=" ".repeat(xt-1)+An.toLowerCase()+" ".repeat(xt-1);for(var en=new Array(An.length-xt+1),Ln=0;Ln<en.length;Ln++)en[Ln]=An.slice(Ln,Ln+xt);return en}void 0===Be&&(Be=2),this.maxPercent=0;for(var vt=0,pt=0,Rt=Te;pt<Rt.length;pt++){var Ut=Rt[pt];if(!Le?.length||!Ut?.length)return 0;for(var sn=Le.length<Ut.length?Ut:Le,vn=Ye(Le.length<Ut.length?Le:Ut,Be),Mn=Ye(sn,Be),$t=new Set(vn),In=Mn.length,zt=0,_n=0,Rn=Mn;_n<Rn.length;_n++)$t.delete(Rn[_n])&&zt++;(vt=zt/In)>this.maxPercent&&(this.maxPercent=vt,this.maxPercentHeader=Ut)}},Ve.prototype.close=function(){this.dialogService.closeAll()},Ve.\u0275fac=function(Te){return new(Te||Ve)(i.\u0275\u0275directiveInject(c.WI),i.\u0275\u0275directiveInject(l.f),i.\u0275\u0275directiveInject(C.o),i.\u0275\u0275directiveInject(v.x))},Ve.\u0275cmp=i.\u0275\u0275defineComponent({type:Ve,selectors:[["import-dialog"]],features:[i.\u0275\u0275ProvidersFeature([l.f])],decls:13,vars:9,consts:[[1,"header"],["mat-dialog-title","","localize","MetricsScorecard_Import_Dialog_Header"],[1,"title"],["mat-icon-button","",1,"close",3,"click"],["fontIcon","pbi-glyph-close",1,"glyph-mini"],["class","impact-margin",3,"viewModel",4,"ngIf"],["class","select",4,"ngIf"],["class","scroll",4,"ngIf"],["class","pbi-spinner-large",4,"ngIf"],["class","import",4,"ngIf"],[1,"impact-margin",3,"viewModel"],[1,"select"],["localize","MetricsScorecard_Import_Dialog_Description",1,"description"],[1,"select-table",3,"change"],["class","table-select",3,"value",4,"ngFor","ngForOf"],[1,"table-select",3,"value"],[1,"scroll"],["id","preview-table"],[4,"ngFor","ngForOf"],[1,"table-headers"],["id","left"],[1,"col-headers",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"right"],[3,"value"],[1,"pbi-spinner-large"],[1,"import"],[1,"dialog-buttons"],["localize","Import","localizeTooltip","Import",1,"pbi-fluent-button","primary",3,"click"],["localize","PBI_Button_Label_Cancel","localizeTooltip","PBI_Button_Label_Cancel",1,"pbi-fluent-button",3,"click"],["class","num-goals","localize","MetricsScorecard_Import_Dialog_Number_Metrics",4,"ngIf"],["class","number",4,"ngIf"],["localize","MetricsScorecard_Import_Dialog_Number_Metrics",1,"num-goals"],[1,"number"]],template:function(Te,Be){1&Te&&(i.\u0275\u0275elementStart(0,"section",0),i.\u0275\u0275element(1,"h1",1)(2,"div",2),i.\u0275\u0275elementStart(3,"button",3),i.\u0275\u0275listener("click",function(){return Be.close()}),i.\u0275\u0275pipe(4,"localize"),i.\u0275\u0275element(5,"mat-icon",4),i.\u0275\u0275elementEnd()(),i.\u0275\u0275template(6,I,1,1,"message-banner",5),i.\u0275\u0275template(7,H,1,1,"message-banner",5),i.\u0275\u0275elementStart(8,"div"),i.\u0275\u0275template(9,Z,4,1,"div",6),i.\u0275\u0275template(10,N,5,3,"div",7),i.\u0275\u0275template(11,he,1,0,"pbi-spinner",8),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(12,ge,6,2,"section",9)),2&Te&&(i.\u0275\u0275advance(3),i.\u0275\u0275attribute("aria-label",i.\u0275\u0275pipeBind1(4,7,"Close")),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",Be.exceedsColumns),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",Be.emptyFile),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",(null==Be.goalPreviewData?null:Be.goalPreviewData.length)>0),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",Be.hasDataLoaded),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!Be.hasDataLoaded&&!Be.emptyFile),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",(null==Be.goalPreviewData?null:Be.goalPreviewData.length)>0))},dependencies:[k.NgForOf,k.NgIf,c.uh,E.YN,E.Kr,E.EJ,E.JJ,E.On,s.X,ne.r,te.Hw,X.A,m.k,O.F],styles:[".header[_ngcontent-%COMP%]{flex:0 0 50px;display:flex;flex-direction:row;align-items:center}.header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{flex:1 1 auto}.header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:none;margin:0;background-color:transparent;border:0;padding:0}.header[_ngcontent-%COMP%]   button.close[_ngcontent-%COMP%]{flex:0 0 20px;align-self:flex-start}.select-table[_ngcontent-%COMP%]{border-bottom:revert;width:10%;margin-left:10px;height:32px;cursor:pointer;padding:0 8px;border-width:1px}div.scroll[_ngcontent-%COMP%]{height:55vh;overflow-y:scroll}.description[_ngcontent-%COMP%]{display:inline}.select[_ngcontent-%COMP%]{padding-bottom:15px}#preview-table[_ngcontent-%COMP%]{padding-top:15px;border-collapse:collapse;width:100%}#preview-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], #preview-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #bebebe;padding:4px}#preview-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding-top:4px;padding-bottom:4px;font-size:12px;text-align:left;background-color:#ccc}.col-headers[_ngcontent-%COMP%]{border-color:transparent;background-color:transparent;border-bottom:black;font-size:14px;text-overflow:ellipsis}.table-headers[_ngcontent-%COMP%]{display:flex;padding-left:10px;padding-right:8px}.right[_ngcontent-%COMP%]{font-weight:400;text-align:center;padding-left:4vh}.pbi-fluent-button[_ngcontent-%COMP%]{margin-left:8px}.pbi-spinner-large[_ngcontent-%COMP%]{top:50%;left:50%;position:absolute}.loading-spinner[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;opacity:0;animation-name:fade-in;animation-duration:.5s;animation-iteration-count:1;animation-timing-function:linear;animation-delay:1s;animation-fill-mode:forwards}.import[_ngcontent-%COMP%]{flex:0 0 55px;display:flex;bottom:13%;flex-direction:inherit;align-items:flex-end;padding-right:1%;position:fixed;display:-webkit-inline-box}.number[_ngcontent-%COMP%]{padding-left:1%;display:contents}.num-goals[_ngcontent-%COMP%]{margin-left:25px}"]}),Ve}(),De=t(70060),fe=t(77695),Oe=new i.InjectionToken("LinkedMetricsLauncherService"),be=t(60166),Fe=t(98587),ze=t(43286),Ke=t(74466),je=t(35510),He=t(33554),Je=t(11547),j=t(59017),nt=t(77526),Ue=t(81905),oe=t(70032),h=t(22318),g=t(57243),u=t(83317),F=t(59973),W=t(14172),ee=t(23558),U=t(68549),Q=t(48787),B=t(49223),w=t(73911),q=t(21719),le=t(9380),de=t(20930),V=t(87426),M=t(93379),L=t(62087),x=t(32027),Y=t(558),ue=t(698),Ne=t(55710),$e=t(56011),Xe=t(36858),it=t(95027),st=t(56809),ot=t(33279),ut=t(26410),qe=t(6425),ct=t(55102),yt=t(74161),wt=t(67090),It=t(50042),K=t(49833),mn=t(65736),qt=t(1882),Fn=t(96147),mo=["inputFile"],vo=["columnTable"],ni=function(){return["Metric_Owner_No_Scorecard_Access","Metric_Owners_No_Scorecard_Access","Share_Now"]};function so(Ve,Le){if(1&Ve&&(i.\u0275\u0275element(0,"scorecard-access-banner",8),i.\u0275\u0275pipe(1,"async")),2&Ve){var Te=i.\u0275\u0275nextContext(2).ngIf,Be=i.\u0275\u0275nextContext();i.\u0275\u0275property("scorecard",Te)("users",i.\u0275\u0275pipeBind1(1,3,Be.goalOwners$))("labels",i.\u0275\u0275pureFunction0(5,ni))}}function no(Ve,Le){if(1&Ve){var Te=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"label",18)(1,"input",19,20),i.\u0275\u0275listener("change",function(Ye){i.\u0275\u0275restoreView(Te);var vt=i.\u0275\u0275nextContext(5);return i.\u0275\u0275resetView(vt.onImportClick(Ye))}),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(3,"span",21),i.\u0275\u0275elementEnd()}}function Oo(Ve,Le){if(1&Ve){var Te=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"button",12),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(Te);var vt=i.\u0275\u0275nextContext(4);return i.\u0275\u0275resetView(vt.onNewGoalClick())}),i.\u0275\u0275pipe(2,"localize"),i.\u0275\u0275element(3,"mat-icon",13)(4,"span",14),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"button",15),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(Te);var vt=i.\u0275\u0275nextContext(4);return i.\u0275\u0275resetView(vt.onNewSubGoalClick())}),i.\u0275\u0275pipe(6,"localize"),i.\u0275\u0275pipe(7,"async"),i.\u0275\u0275element(8,"span",16),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(9,no,4,0,"label",17),i.\u0275\u0275elementContainerEnd()}if(2&Ve){var Be=i.\u0275\u0275nextContext(4);i.\u0275\u0275advance(1),i.\u0275\u0275classProp("primary",!Be.toolbarNewLook),i.\u0275\u0275property("disabled",!Be.scorecardCapabilities.createGoal.enabled),i.\u0275\u0275attribute("aria-label",i.\u0275\u0275pipeBind1(2,7,"NewMetric")),i.\u0275\u0275advance(4),i.\u0275\u0275property("disabled",!Be.scorecardCapabilities.createGoal.enabled||1!==i.\u0275\u0275pipeBind1(7,11,Be.numberOfSelectedGoals$)),i.\u0275\u0275attribute("aria-label",i.\u0275\u0275pipeBind1(6,9,"AddSubmetric")),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngIf",Be.showImportButton)}}var oo=function(Le){return{active:Le}};function _o(Ve,Le){if(1&Ve&&(i.\u0275\u0275elementStart(0,"button",32,33),i.\u0275\u0275element(2,"mat-icon",34)(3,"span",35)(4,"mat-icon",36),i.\u0275\u0275elementEnd()),2&Ve){var Te=i.\u0275\u0275reference(1);i.\u0275\u0275nextContext();var Be=i.\u0275\u0275reference(4),Ye=i.\u0275\u0275nextContext(4);i.\u0275\u0275property("matMenuTriggerFor",Be)("ngClass",i.\u0275\u0275pureFunction1(5,oo,!0===Te.menuOpen)),i.\u0275\u0275advance(2),i.\u0275\u0275propertyInterpolate("fontIcon","List"===Ye.viewType?"pbi-glyph-list":"pbi-glyph-table"),i.\u0275\u0275advance(1),i.\u0275\u0275property("localize","View")("localizeTooltip","View")}}function Dn(Ve,Le){if(1&Ve){var Te=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",37),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(Te);var Ye=i.\u0275\u0275nextContext(5);return i.\u0275\u0275resetView(Ye.openHeatmapConfigurationPane())}),i.\u0275\u0275pipe(1,"localize"),i.\u0275\u0275element(2,"mat-icon",38)(3,"span",39),i.\u0275\u0275elementEnd()}2&Ve&&i.\u0275\u0275attribute("aria-label",i.\u0275\u0275pipeBind1(1,1,"MetricsCustomizeHeatmap"))}function co(Ve,Le){if(1&Ve){var Te=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",40),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(Te);var Ye=i.\u0275\u0275nextContext(5);return i.\u0275\u0275resetView(Ye.openHierarchiesBuilder())}),i.\u0275\u0275pipe(1,"localize"),i.\u0275\u0275element(2,"mat-icon",41)(3,"span",42),i.\u0275\u0275elementEnd()}2&Ve&&i.\u0275\u0275attribute("aria-label",i.\u0275\u0275pipeBind1(1,1,"MetricsManageHierarchies"))}function Vo(Ve,Le){1&Ve&&i.\u0275\u0275element(0,"scorecard-hierarchy-button")}function Do(Ve,Le){if(1&Ve){var Te=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,_o,5,7,"button",22),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275elementStart(3,"mat-menu",23,24)(5,"button",25),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(Te);var vt=i.\u0275\u0275nextContext(4);return i.\u0275\u0275resetView(vt.onScorecardViewClick())}),i.\u0275\u0275element(6,"mat-icon",26)(7,"span",27),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(8,"button",25),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(Te);var vt=i.\u0275\u0275nextContext(4);return i.\u0275\u0275resetView(vt.onHeatmapViewClick())}),i.\u0275\u0275element(9,"mat-icon",28)(10,"span",29),i.\u0275\u0275elementEnd()(),i.\u0275\u0275template(11,Dn,4,3,"button",30),i.\u0275\u0275template(12,co,4,3,"button",31),i.\u0275\u0275template(13,Vo,1,0,"scorecard-hierarchy-button",7),i.\u0275\u0275elementContainerEnd()}if(2&Ve){var Be=i.\u0275\u0275nextContext(4);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(2,5,Be.hasHierarchies$)),i.\u0275\u0275advance(2),i.\u0275\u0275property("overlapTrigger",!1),i.\u0275\u0275advance(8),i.\u0275\u0275property("ngIf","Heatmap"===Be.viewType),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",Be.isEditMode&&"Heatmap"===Be.viewType),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf","List"===Be.viewType)}}function oi(Ve,Le){if(1&Ve&&(i.\u0275\u0275elementStart(0,"div",9)(1,"div",10),i.\u0275\u0275template(2,Oo,10,13,"ng-container",7),i.\u0275\u0275element(3,"div",11),i.\u0275\u0275template(4,Do,14,7,"ng-container",7),i.\u0275\u0275elementEnd()()),2&Ve){var Te=i.\u0275\u0275nextContext(3);i.\u0275\u0275classProp("new-look",Te.toolbarNewLook),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",("List"===Te.viewType||"Compact"===Te.viewType)&&Te.isEditMode),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",Te.showHierarchies)}}function Hn(Ve,Le){if(1&Ve&&i.\u0275\u0275element(0,"scorecard-title",43),2&Ve){var Te=i.\u0275\u0275nextContext(2).ngIf,Be=i.\u0275\u0275nextContext();i.\u0275\u0275property("scorecardName",Te.name)("scorecardDescription",Te.description)("isTitleEditable",Be.isTitleEditable)}}function Pe(Ve,Le){if(1&Ve){var Te=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"scorecard-metric-picker-toolbar",50),i.\u0275\u0275listener("filterBy",function(vt){i.\u0275\u0275restoreView(Te);var pt=i.\u0275\u0275nextContext(5);return i.\u0275\u0275resetView(pt.onFilterKeywordChange(vt))}),i.\u0275\u0275pipe(1,"async"),i.\u0275\u0275elementEnd()}if(2&Ve){var Be=i.\u0275\u0275nextContext(5);i.\u0275\u0275property("filterText",i.\u0275\u0275pipeBind1(1,1,Be.filterBy$).keyword)}}function xn(Ve,Le){if(1&Ve){var Te=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"scorecard-list-toolbar",51),i.\u0275\u0275listener("filterBy",function(pt){i.\u0275\u0275restoreView(Te);var Rt=i.\u0275\u0275nextContext(5);return i.\u0275\u0275resetView(Rt.onFilterKeywordChange(pt))})("onNewGoal",function(){i.\u0275\u0275restoreView(Te);var pt=i.\u0275\u0275nextContext(5);return i.\u0275\u0275resetView(pt.onNewGoalClick(!1))})("onNewSubGoal",function(){i.\u0275\u0275restoreView(Te);var pt=i.\u0275\u0275nextContext(5);return i.\u0275\u0275resetView(pt.onNewSubGoalClick())})("onLinkedMetricInit",function(){i.\u0275\u0275restoreView(Te);var pt=i.\u0275\u0275nextContext(5);return i.\u0275\u0275resetView(pt.onLinkedMetricInit())}),i.\u0275\u0275pipe(1,"async"),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275elementEnd()}if(2&Ve){var Be=i.\u0275\u0275nextContext(4).ngIf,Ye=i.\u0275\u0275nextContext();i.\u0275\u0275property("isEditMode",Ye.isEditMode)("scorecard",Be)("scorecardCapabilities",Ye.scorecardCapabilities)("numberOfSelectedGoals",i.\u0275\u0275pipeBind1(1,6,Ye.numberOfSelectedGoals$))("filterText",i.\u0275\u0275pipeBind1(2,8,Ye.filterBy$).keyword)("showTitle","Compact"===Ye.viewType)}}function Go(Ve,Le){if(1&Ve&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Pe,2,3,"scorecard-metric-picker-toolbar",48),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275template(3,xn,3,10,"ng-template",null,49,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementContainerEnd()),2&Ve){var Te=i.\u0275\u0275reference(4),Be=i.\u0275\u0275nextContext(4);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(2,2,Be.showPickerToolbar$))("ngIfElse",Te)}}function uo(Ve,Le){if(1&Ve){var Te=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"scorecard-status-tiles",52),i.\u0275\u0275listener("onStatusSelected",function(pt){i.\u0275\u0275restoreView(Te);var Rt=i.\u0275\u0275nextContext(4);return i.\u0275\u0275resetView(Rt.onGoalsStatusTileSelectionChange(pt))}),i.\u0275\u0275pipe(1,"async"),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275elementEnd()}if(2&Ve){var Be=i.\u0275\u0275nextContext(3).ngIf,Ye=i.\u0275\u0275nextContext();i.\u0275\u0275property("goals",Be.goals)("goalStatusesByScorecardId",i.\u0275\u0275pipeBind1(1,4,Ye.goalStatusesByScorecardId$))("goalStatusList",null==Be.goalStatuses?null:Be.goalStatuses.statuses)("selectedStatuses",i.\u0275\u0275pipeBind1(2,6,Ye.filterBy$).statuses)}}function ii(Ve,Le){if(1&Ve){var Te=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",53)(1,"div"),i.\u0275\u0275element(2,"mat-icon",54),i.\u0275\u0275elementStart(3,"input",55),i.\u0275\u0275listener("ngModelChange",function(vt){i.\u0275\u0275restoreView(Te);var pt=i.\u0275\u0275nextContext(4);return i.\u0275\u0275resetView(pt.onFilterKeywordChange(vt))}),i.\u0275\u0275pipe(4,"localize"),i.\u0275\u0275pipe(5,"localize"),i.\u0275\u0275pipe(6,"async"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(7,"mat-icon",56),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(Te);var vt=i.\u0275\u0275nextContext(4);return i.\u0275\u0275resetView(vt.toggleFilterRow())}),i.\u0275\u0275elementEnd()()()}if(2&Ve){var Be=i.\u0275\u0275nextContext(4);i.\u0275\u0275classProp("toolbar-visible",Be.isEditMode),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngModel",i.\u0275\u0275pipeBind1(6,9,Be.filterBy$).keyword),i.\u0275\u0275attribute("aria-label",i.\u0275\u0275pipeBind1(4,5,"Filter_By_Keyword"))("placeholder",i.\u0275\u0275pipeBind1(5,7,"Filter_By_Keyword"))}}function Qt(Ve,Le){if(1&Ve){var Te=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",63),i.\u0275\u0275pipe(1,"async"),i.\u0275\u0275elementStart(2,"pbi-checkbox",64),i.\u0275\u0275listener("onChange",function(vt){i.\u0275\u0275restoreView(Te);var pt=i.\u0275\u0275nextContext(6);return i.\u0275\u0275resetView(pt.onSelectAllGoals(vt))}),i.\u0275\u0275pipe(3,"async"),i.\u0275\u0275pipe(4,"localize"),i.\u0275\u0275pipe(5,"localize"),i.\u0275\u0275elementEnd()()}if(2&Ve){var Be=i.\u0275\u0275nextContext(6);i.\u0275\u0275classProp("box-checked",i.\u0275\u0275pipeBind1(1,5,Be.allGoalsSelected$)),i.\u0275\u0275advance(2),i.\u0275\u0275property("checked",i.\u0275\u0275pipeBind1(3,7,Be.allGoalsSelected$))("pbiTooltip",i.\u0275\u0275pipeBind1(5,11,"Metrics_BulkEditing_SelectAllMetrics")),i.\u0275\u0275attribute("aria-label",i.\u0275\u0275pipeBind1(4,9,"Metrics_BulkEditing_SelectAllMetrics"))}}function ko(Ve,Le){if(1&Ve){var Te=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",73),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(Te);var vt=i.\u0275\u0275nextContext(9);return i.\u0275\u0275resetView(vt.onToggleExpandAllMetrics())}),i.\u0275\u0275pipe(1,"localize"),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275element(3,"mat-icon",74),i.\u0275\u0275pipe(4,"async"),i.\u0275\u0275elementEnd()}if(2&Ve){var Be=i.\u0275\u0275nextContext(9);i.\u0275\u0275property("pbiTooltip",i.\u0275\u0275pipeBind1(1,2,i.\u0275\u0275pipeBind1(2,4,Be.showAllChildren$)?"FieldListMenuItem_CollapseAll":"FieldListMenuItem_ExpandAll")),i.\u0275\u0275advance(3),i.\u0275\u0275property("fontIcon",i.\u0275\u0275pipeBind1(4,6,Be.showAllChildren$)?"pbi-glyph-doublechevrondown":"pbi-glyph-doublechevronright")}}function Xn(Ve,Le){if(1&Ve){var Te=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",75),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(Te);var vt=i.\u0275\u0275nextContext(9);return i.\u0275\u0275resetView(vt.toggleFilterRow())}),i.\u0275\u0275pipe(1,"localize"),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275pipe(3,"localize"),i.\u0275\u0275pipe(4,"async"),i.\u0275\u0275element(5,"mat-icon",76),i.\u0275\u0275elementEnd()}if(2&Ve){var Be=i.\u0275\u0275nextContext(9);i.\u0275\u0275property("pbiTooltip",i.\u0275\u0275pipeBind1(3,6,i.\u0275\u0275pipeBind1(4,8,Be.filterRowVisible$)?"Filters_Hide":"Filters_Show")),i.\u0275\u0275attribute("aria-label",i.\u0275\u0275pipeBind1(1,2,i.\u0275\u0275pipeBind1(2,4,Be.filterRowVisible$)?"Filters_Hide":"Filters_Show"))}}function io(Ve,Le){if(1&Ve){var Te=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"th",67)(1,"div",68),i.\u0275\u0275template(2,ko,5,8,"button",69),i.\u0275\u0275pipe(3,"async"),i.\u0275\u0275template(4,Xn,6,10,"button",70),i.\u0275\u0275elementStart(5,"div",71)(6,"scorecard-column-header",72),i.\u0275\u0275listener("onSortColumn",function(Ut){i.\u0275\u0275restoreView(Te);var Ht=i.\u0275\u0275nextContext(8);return i.\u0275\u0275resetView(Ht.sortColumn(Ut))}),i.\u0275\u0275pipe(7,"async"),i.\u0275\u0275elementEnd()()()()}if(2&Ve){var Be=i.\u0275\u0275nextContext(2),Ye=Be.$implicit,vt=Be.index,pt=i.\u0275\u0275nextContext(6);i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",pt.collapseGoalsByDefault&&i.\u0275\u0275pipeBind1(3,6,pt.hasExpandableGoals$)),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",!pt.goalsNewHeaderEnabled),i.\u0275\u0275advance(2),i.\u0275\u0275property("column",pt.ScorecardColumnConfigs[Ye.columnId])("index",vt)("sort",i.\u0275\u0275pipeBind1(7,8,pt.sort$))("isEditMode",pt.isEditMode)}}function ri(Ve,Le){if(1&Ve){var Te=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"th",78)(1,"scorecard-column-header",72),i.\u0275\u0275listener("onSortColumn",function(Ut){i.\u0275\u0275restoreView(Te);var Ht=i.\u0275\u0275nextContext(9);return i.\u0275\u0275resetView(Ht.sortColumn(Ut))}),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275elementEnd()()}if(2&Ve){var Be=i.\u0275\u0275nextContext(3),Ye=Be.$implicit,vt=Be.index,pt=i.\u0275\u0275nextContext(6);i.\u0275\u0275advance(1),i.\u0275\u0275property("column",pt.ScorecardColumnConfigs[Ye.columnId])("index",vt)("sort",i.\u0275\u0275pipeBind1(2,4,pt.sort$))("isEditMode",pt.isEditMode)}}function ai(Ve,Le){if(1&Ve&&i.\u0275\u0275template(0,ri,3,6,"th",77),2&Ve){var Te=i.\u0275\u0275nextContext(2).$implicit,Be=i.\u0275\u0275nextContext(6);i.\u0275\u0275property("ngIf",!Be.ScorecardColumnConfigs[Te.columnId].hideHeaderInListView)}}function Bo(Ve,Le){if(1&Ve&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,io,8,10,"th",65),i.\u0275\u0275template(2,ai,1,1,"ng-template",null,66,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementContainerEnd()),2&Ve){var Te=i.\u0275\u0275reference(3),Be=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",0==Be.columnId)("ngIfElse",Te)}}function li(Ve,Le){if(1&Ve&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Bo,4,2,"ng-container",7),i.\u0275\u0275elementContainerEnd()),2&Ve){var Te=Le.$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",Te.show)}}function Wn(Ve,Le){if(1&Ve&&(i.\u0275\u0275elementStart(0,"thead")(1,"tr",60)(2,"th",61),i.\u0275\u0275template(3,Qt,6,13,"div",62),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(4,li,2,1,"ng-container",59),i.\u0275\u0275elementEnd()()),2&Ve){var Te=i.\u0275\u0275nextContext(5);i.\u0275\u0275advance(2),i.\u0275\u0275classProp("show-checkmark",!!Te.scorecardSelectionMode)("show-on-hover-only","ctrl"===Te.scorecardSelectionMode),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf","single"!==Te.scorecardSelectionMode),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",Te.columnSettings)("ngForTrackBy",Te.columnSettingId)}}function si(Ve,Le){if(1&Ve){var Te=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tbody",80),i.\u0275\u0275listener("showChildrenChange",function(Ht){i.\u0275\u0275restoreView(Te);var sn=i.\u0275\u0275nextContext(6);return i.\u0275\u0275resetView(sn.onShowChildrenChange(Ht))})("dragStarted",function(Ht){i.\u0275\u0275restoreView(Te);var sn=i.\u0275\u0275nextContext(6);return i.\u0275\u0275resetView(sn.onGoalDragStart(Ht))})("dragMoved",function(Ht){i.\u0275\u0275restoreView(Te);var sn=i.\u0275\u0275nextContext(6);return i.\u0275\u0275resetView(sn.onGoalDragMove(Ht))}),i.\u0275\u0275pipe(1,"async"),i.\u0275\u0275elementEnd()}if(2&Ve){var Be=i.\u0275\u0275nextContext(),Ye=Be.$implicit,vt=Be.index,pt=i.\u0275\u0275nextContext(4).ngIf,Rt=i.\u0275\u0275nextContext();i.\u0275\u0275property("scorecard",pt)("columnSettings",Rt.columnSettings)("goal",Ye)("color",Rt.colorPalette[vt%Rt.colorPalette.length])("showChildren",i.\u0275\u0275pipeBind1(1,8,Rt.showChildren$))("goalDragInfo",Rt.goalDragInfo)("scorecardSelectionMode",Rt.scorecardSelectionMode)("forceColumnMinWidths",Rt.forceColumnMinWidths)}}function po(Ve,Le){if(1&Ve&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,si,2,10,"tbody",79),i.\u0275\u0275elementContainerEnd()),2&Ve){var Te=Le.$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!Te.isHidden)}}function $n(Ve,Le){if(1&Ve){var Te=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"table",57,58),i.\u0275\u0275listener("cdkDropListDropped",function(vt){i.\u0275\u0275restoreView(Te);var pt=i.\u0275\u0275nextContext(4);return i.\u0275\u0275resetView(pt.onDropGoal(vt))})("cdkDropListSorted",function(vt){i.\u0275\u0275restoreView(Te);var pt=i.\u0275\u0275nextContext(4);return i.\u0275\u0275resetView(pt.onGoalDropListSorted(vt))}),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275template(3,Wn,5,7,"thead",7),i.\u0275\u0275pipe(4,"async"),i.\u0275\u0275template(5,po,2,1,"ng-container",59),i.\u0275\u0275pipe(6,"async"),i.\u0275\u0275elementEnd()}if(2&Ve){var Be=i.\u0275\u0275nextContext(4);i.\u0275\u0275styleProp("padding-left",Be.scorecardTablePadding.left,"px")("padding-right",Be.scorecardTablePadding.right,"px"),i.\u0275\u0275property("cdkDropListDisabled",!i.\u0275\u0275pipeBind1(2,8,Be.canDragAndDrop$)),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(4,10,Be.showHeaders$)),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngForOf",i.\u0275\u0275pipeBind1(6,12,Be.goals$))("ngForTrackBy",Be.goalId)}}function Uo(Ve,Le){if(1&Ve){var Te=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"compact-scorecard",81),i.\u0275\u0275listener("onSortColumn",function(pt){i.\u0275\u0275restoreView(Te);var Rt=i.\u0275\u0275nextContext(4);return i.\u0275\u0275resetView(Rt.sortColumn(pt))}),i.\u0275\u0275pipe(1,"async"),i.\u0275\u0275elementEnd()}if(2&Ve){var Be=i.\u0275\u0275nextContext(3).ngIf,Ye=i.\u0275\u0275nextContext();i.\u0275\u0275property("scorecard",Be)("isEditMode",Ye.isEditMode)("viewSettings",Ye.viewSettings)("sort",i.\u0275\u0275pipeBind1(1,4,Ye.sort$))}}function Co(Ve,Le){if(1&Ve&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Go,5,4,"ng-container",7),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275pipe(3,"async"),i.\u0275\u0275template(4,uo,3,8,"scorecard-status-tiles",44),i.\u0275\u0275pipe(5,"async"),i.\u0275\u0275pipe(6,"async"),i.\u0275\u0275pipe(7,"async"),i.\u0275\u0275template(8,ii,8,11,"div",45),i.\u0275\u0275pipe(9,"async"),i.\u0275\u0275template(10,$n,7,14,"table",46),i.\u0275\u0275template(11,Uo,2,6,"compact-scorecard",47),i.\u0275\u0275elementContainerEnd()),2&Ve){var Te=i.\u0275\u0275nextContext(3);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",Te.goalsNewHeaderEnabled&&!(i.\u0275\u0275pipeBind1(2,5,Te.hideToolbar$)||i.\u0275\u0275pipeBind1(3,7,Te.hideHeader$))),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",Te.goalsNewHeaderEnabled&&i.\u0275\u0275pipeBind1(5,9,Te.showStatus$)&&!(i.\u0275\u0275pipeBind1(6,11,Te.hideCards$)||i.\u0275\u0275pipeBind1(7,13,Te.hideHeader$))),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(9,15,Te.filterRowVisible$)),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf","List"===Te.viewType),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf","Compact"===Te.viewType)}}function No(Ve,Le){if(1&Ve){var Te=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"scorecard-heatmap-toolbar",50),i.\u0275\u0275listener("filterBy",function(vt){i.\u0275\u0275restoreView(Te);var pt=i.\u0275\u0275nextContext(4);return i.\u0275\u0275resetView(pt.onFilterKeywordChange(vt))}),i.\u0275\u0275pipe(1,"async"),i.\u0275\u0275elementEnd()}if(2&Ve){var Be=i.\u0275\u0275nextContext(4);i.\u0275\u0275property("filterText",i.\u0275\u0275pipeBind1(1,1,Be.filterBy$).keyword)}}function zo(Ve,Le){if(1&Ve&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,No,2,3,"scorecard-heatmap-toolbar",82),i.\u0275\u0275element(2,"heat-map",83),i.\u0275\u0275elementContainerEnd()),2&Ve){var Te=i.\u0275\u0275nextContext(3);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",Te.goalsNewHeaderEnabled)}}function Vn(Ve,Le){if(1&Ve){var Te=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"scorecard-list-toolbar",84),i.\u0275\u0275listener("filterBy",function(pt){i.\u0275\u0275restoreView(Te);var Rt=i.\u0275\u0275nextContext(3);return i.\u0275\u0275resetView(Rt.onFilterKeywordChange(pt))})("onNewGoal",function(){i.\u0275\u0275restoreView(Te);var pt=i.\u0275\u0275nextContext(3);return i.\u0275\u0275resetView(pt.onNewGoalClick(!1))})("onNewSubGoal",function(){i.\u0275\u0275restoreView(Te);var pt=i.\u0275\u0275nextContext(3);return i.\u0275\u0275resetView(pt.onNewSubGoalClick())})("onLinkedMetricInit",function(){i.\u0275\u0275restoreView(Te);var pt=i.\u0275\u0275nextContext(3);return i.\u0275\u0275resetView(pt.onLinkedMetricInit())}),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275pipe(3,"async"),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(4,"scorecard-board-view",85),i.\u0275\u0275elementContainerEnd()}if(2&Ve){var Be=i.\u0275\u0275nextContext(2).ngIf,Ye=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("isEditMode",Ye.isEditMode)("scorecardCapabilities",Ye.scorecardCapabilities)("numberOfSelectedGoals",i.\u0275\u0275pipeBind1(2,6,Ye.numberOfSelectedGoals$))("filterText",i.\u0275\u0275pipeBind1(3,8,Ye.filterBy$).keyword),i.\u0275\u0275advance(3),i.\u0275\u0275property("boardSettings",Ye.boardSettings)("metricsGoalStatuses",null==Be.goalStatuses?null:Be.goalStatuses.statuses)}}function go(Ve,Le){if(1&Ve){var Te=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",3),i.\u0275\u0275listener("on-resize",function(){i.\u0275\u0275restoreView(Te);var vt=i.\u0275\u0275nextContext(2);return i.\u0275\u0275resetView(vt.setVisibleColumns())}),i.\u0275\u0275template(2,so,2,6,"scorecard-access-banner",4),i.\u0275\u0275template(3,oi,5,4,"div",5),i.\u0275\u0275pipe(4,"async"),i.\u0275\u0275pipe(5,"async"),i.\u0275\u0275template(6,Hn,1,3,"scorecard-title",6),i.\u0275\u0275pipe(7,"async"),i.\u0275\u0275pipe(8,"async"),i.\u0275\u0275template(9,Co,12,17,"ng-container",7),i.\u0275\u0275template(10,zo,3,1,"ng-container",7),i.\u0275\u0275template(11,Vn,5,10,"ng-container",7),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()}if(2&Ve){var Be=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275styleProp("overflow-x",null!=Be.viewSettings&&Be.viewSettings.dropColumns?"hidden":"auto"),i.\u0275\u0275classProp("heat-map-scroll","Heatmap"===Be.viewType)("new-header",Be.goalsNewHeaderEnabled)("compact","Compact"===Be.viewType),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",Be.showScorecardAccessBanner&&Be.isEditMode),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!Be.goalsNewHeaderEnabled&&(Be.isEditMode||Be.toolbarNewLook)&&!(i.\u0275\u0275pipeBind1(4,14,Be.hideToolbar$)||i.\u0275\u0275pipeBind1(5,16,Be.hideHeader$))),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",Be.goalsNewHeaderEnabled&&!(i.\u0275\u0275pipeBind1(7,18,Be.hideTitle$)||i.\u0275\u0275pipeBind1(8,20,Be.hideHeader$))&&"Compact"!==Be.viewType),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf","List"===Be.viewType||"Compact"===Be.viewType),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf","Heatmap"===Be.viewType),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf","Board"===Be.viewType)}}function Qn(Ve,Le){if(1&Ve){var Te=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"empty-scorecard",86),i.\u0275\u0275listener("onNewGoal",function(){i.\u0275\u0275restoreView(Te);var vt=i.\u0275\u0275nextContext(2);return i.\u0275\u0275resetView(vt.onNewGoalClick(!0))})("onLinkToGoal",function(){i.\u0275\u0275restoreView(Te);var vt=i.\u0275\u0275nextContext(2);return i.\u0275\u0275resetView(vt.onLinkedMetricInit())}),i.\u0275\u0275pipe(1,"async"),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275elementEnd()}if(2&Ve){var Be=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("isMetricsPicker",i.\u0275\u0275pipeBind1(1,2,Be.showPickerToolbar$))("canEdit",Be.isEditMode&&i.\u0275\u0275pipeBind1(2,4,Be.userHasEditPermissions$))}}function ci(Ve,Le){if(1&Ve&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,go,12,22,"ng-container",0),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275template(3,Qn,3,6,"ng-template",null,2,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementContainerEnd()),2&Ve){var Te=i.\u0275\u0275reference(4),Be=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(2,2,Be.hasGoals$))("ngIfElse",Te)}}function Ho(Ve,Le){1&Ve&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"span",89),i.\u0275\u0275elementContainerEnd())}function yo(Ve,Le){1&Ve&&i.\u0275\u0275element(0,"span",90)}function Yn(Ve,Le){if(1&Ve&&(i.\u0275\u0275elementStart(0,"div",87),i.\u0275\u0275template(1,Ho,2,0,"ng-container",0),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275template(3,yo,1,0,"ng-template",null,88,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd()),2&Ve){var Te=i.\u0275\u0275reference(4),Be=i.\u0275\u0275nextContext();i.\u0275\u0275classProp("border-top",Be.toolbarNewLook),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",null===i.\u0275\u0275pipeBind1(2,4,Be.scorecard$))("ngIfElse",Te)}}var Wo=function(){function Ve(Le,Te,Be,Ye,vt,pt,Rt,Ut,Ht,sn,vn,Mn,$t,In,zt,_n){var Rn=this;this.scorecardService=Le,this.heatmapService=Te,this.detailsPaneLauncher=Be,this.hierarchyPane=Ye,this.changeDetectorRef=vt,this.featureSwitchService=pt,this.goalsTutorialService=Rt,this.hierarchyService=Ut,this.capabilityService=Ht,this.expansionService=sn,this.scorecardElement=vn,this.linkedMetricsLauncher=Mn,this.dialogService=$t,this.viewsService=In,this.scorecardSettings=zt,this.scorecardHost=_n,this.colorPalette=a.gT.ColorPalette,this.viewType="List",this.sort$=new je.X((0,r.pi)({},a.Ij)),this.filterRowVisible$=new je.X(!1),this.filterBy$=new je.X({}),this.onDestroy$=new He.t(1),this.boardSettings={showGoalVisualGoalName:!0,showGoalVisualOwner:!0,showGoalVisualGrowth:!0,showGoalVisualScorecardName:!0,showVisualization:!0},this.goalDragInfo={},this.ScorecardColumnConfigs=a.Ml,this.forceColumnMinWidths=!1,this.scorecardTablePadding=a.gT.ScorecardTablePadding,this.sortColumn=function(jn){return Rn.sort$.next(jn)},this.isExcelFile=!1}return Ve.prototype.goalId=function(Le,Te){return Te.id},Ve.prototype.columnSettingId=function(Le,Te){return Te.columnId},Ve.prototype.ngOnInit=function(){var Te,Be,Ye,vt,pt,Rt,Ut,Ht,sn,vn,Mn,$t,In,zt,_n,Rn,Le=this;y.fF.assertValue(this.scorecardDetails$,"Scorecard details should be set at initialization time"),this.showImportButton=!!this.featureSwitchService.featureSwitches.goalsShowImportFromFileUI&&!!this.dialogService,this.showColumnSettingsMenu=!!this.featureSwitchService.featureSwitches.goalsColumnSettings,this.showHierarchies=!!this.featureSwitchService.featureSwitches.goalsHierarchies,this.toolbarNewLook=!!this.featureSwitchService.featureSwitches.goalsHierarchies,this.showScorecardAccessBanner=!!this.featureSwitchService.featureSwitches.goalsScorecardAccessBanner,this.bulkDeleteEnabled=!!this.featureSwitchService.featureSwitches.goalsBulkDelete,this.goalsNewHeaderEnabled=this.featureSwitchService.featureSwitches.goalsNewHeader,this.isTitleEditable=this.featureSwitchService.featureSwitches.goalsSkipScorecardCreationPane,this.collapseGoalsByDefault=!!this.featureSwitchService.featureSwitches.collapseGoalsByDefault,this.scorecard$=this.scorecardDetails$.pipe((0,nt.x)(function(Ae,ht){return!ht.reload&&_.isEqual(Ae,ht)}),(0,Ue.w)(function(Ae){if(!Ae)return(0,Je.of)(void 0);if(!(Ae.groupId&&Ae.scorecardId||Ae.prefetchedScorecard))return(0,Je.of)(null);var ht;if(Ae.prefetchedScorecard)ht=Le.scorecardService.loadPrefetchedScorecard(Ae.prefetchedScorecard);else{var Mt=Le.showHierarchies?(0,o.ID)(Ae.initialHierarchyPath):void 0;ht=Le.scorecardService.loadScorecard(Ae.groupId,Ae.scorecardId,!0,Mt)}return Ae.reload?ht:ht.pipe((0,oe.g)(0),(0,h.O)(void 0))}),(0,g.d)(1)),(0,j.aj)([this.scorecardDetails$,this.scorecard$]).pipe((0,u.R)(this.onDestroy$)).subscribe(function(Ae){var ht=Ae[0],Mt=Ae[1];if(ht&&ht.onScorecardUpdated&&Mt){var jt=_.filter(Mt.goals,function(Cn){return!Cn.isNew}),tn=p.q.flattenGoals(jt);ht.onScorecardUpdated((0,r.pi)((0,r.pi)({},Mt),{goals:tn}))}}),(0,j.aj)([this.scorecardDetails$,this.scorecard$]).pipe((0,nt.x)(function(Ae,ht){var Mt=Ae[0],jt=Ae[1],tn=ht[0],Cn=ht[1];return jt?.id===Cn?.id&&Mt?.initialSelectedGoalId===tn?.initialSelectedGoalId})).pipe((0,u.R)(this.onDestroy$)).subscribe(function(Ae){var ht=Ae[0],Mt=Ae[1];!_.isNil(ht?.initialSelectedGoalId)&&!_.isNil(Mt)&&Le.detailsPaneLauncher.openGoalDetails(Le.scorecardService,ht?.initialSelectedGoalId,d.E.Default)}),(0,j.aj)([this.scorecardDetails$,this.scorecardService.isLoading()]).pipe((0,u.R)(this.onDestroy$),(0,F.h)(function(Ae){var ht=Ae[0];return!!ht?.onLoading})).subscribe(function(Ae){return Ae[0].onLoading(Ae[1])}),this.hasGoals$=this.scorecard$.pipe((0,W.U)(function(Ae){var ht;return(null===(ht=Ae?.goals)||void 0===ht?void 0:ht.length)>0})),this.goals$=this.scorecard$.pipe((0,W.U)(function(Ae){return Ae?.goals})),this.hasSavedGoals$=this.goals$.pipe((0,W.U)(function(Ae){var ht;return(null===(ht=Ae?.filter(function(Mt){return!Mt?.isNew}))||void 0===ht?void 0:ht.length)>0})),null===(Be=null===(Te=this.scorecardSettings)||void 0===Te?void 0:Te.settings)||void 0===Be||Be.pipe().subscribe(function(Ae){Le.boardSettings=Ae}),this.columnSettings$=this.scorecard$.pipe((0,nt.x)(function(Ae,ht){return _.isEqual(Ae?.columnSettings,ht?.columnSettings)}),(0,W.U)(function(Ae){return Ae?.columnSettings})),this.showStatus$=this.columnSettings$.pipe((0,W.U)(function(Ae){return P._.isColumnVisible(Ae,2)})),this.userHasEditPermissions$=this.scorecard$.pipe((0,W.U)(function(Ae){return(0,ze.yE)((0,De.l)(Ae?.permissions),2)}));var jn=this.scorecardDetails$.pipe((0,F.h)(function(Ae){return!!Ae?.settings$}),(0,Ue.w)(function(Ae){return Ae?.settings$}),(0,h.O)(void 0));this.showHeaders$=(0,j.aj)([this.scorecard$,jn]).pipe((0,W.U)(function(Ae){var ht=Ae[0],Mt=Ae[1];return!Mt?.hideColumnHeaders&&_.some(ht?.goals,function(jt){return null==jt.state||"Consumption"===jt.state})}));var An=this.scorecardService.isEditMode();An.pipe((0,u.R)(this.onDestroy$)).subscribe(function(Ae){Le.isEditMode=Ae,Le.changeDetectorRef.markForCheck()}),this.scorecardDetails$.pipe((0,Ue.w)(function(Ae){var ht;return null!==(ht=Ae?.isEditMode$)&&void 0!==ht?ht:(0,Je.of)(!1)}),(0,u.R)(this.onDestroy$)).subscribe(function(Ae){return Le.scorecardService.setEditMode(Ae)}),this.scorecardDetails$.pipe((0,F.h)(function(Ae){return!!Ae?.refresh$}),(0,Ue.w)(function(Ae){return Ae?.refresh$}),(0,ee.M)(this.scorecard$.pipe((0,F.h)(function(Ae){return!!Ae}))),(0,u.R)(this.onDestroy$)).subscribe(function(Ae){var Mt=Ae[1];"Heatmap"===Le.scorecardService.viewType?Le.heatmapService.refreshAll():Le.heatmapService.clearCache(),Le.hierarchyService.loadHierarchies(Mt.groupId,Mt.id,!1),Le.scorecardService.loadScorecard(Mt.groupId,Mt.id,!1,Mt.hierarchyPaths)}),this.scorecardDetails$.pipe((0,F.h)(function(Ae){return!!Ae?.bulkEditingClearSelection$}),(0,Ue.w)(function(Ae){return Ae?.bulkEditingClearSelection$}),(0,u.R)(this.onDestroy$)).subscribe(function(){return Le.scorecardService.unselectAllGoals()}),this.scorecardDetails$.pipe((0,F.h)(function(Ae){return!!Ae?.bulkEditingDelete$}),(0,Ue.w)(function(Ae){return Ae?.bulkEditingDelete$}),(0,u.R)(this.onDestroy$)).subscribe(function(){return Le.scorecardService.bulkDeleteGoalsPrompt()}),this.scorecardDetails$.pipe((0,F.h)(function(Ae){return!!Ae?.bulkEditingUpdate$}),(0,Ue.w)(function(Ae){return Ae?.bulkEditingUpdate$}),(0,u.R)(this.onDestroy$)).subscribe(function(){return Le.openBulkUpdatePane()}),this.selectedGoalIds$=this.scorecardService.getSelectedGoalIdsObservable(),this.numberOfSelectedGoals$=this.selectedGoalIds$.pipe((0,W.U)(function(Ae){return _.isNil(Ae)?0:Object.keys(Ae).length})),this.numberOfSelectedGoals$.pipe((0,ee.M)(this.scorecardDetails$),(0,nt.x)(function(Ae,ht){return Ae[0]===ht[0]})).subscribe(function(Ae){var ht=Ae[0],Mt=Ae[1];_.isFunction(Mt?.onNumberOfSelectedGoalsChange)&&!_.isNil(ht)&&Mt.onNumberOfSelectedGoalsChange(ht)});var xt=this.goals$.pipe((0,W.U)(function(Ae){return p.q.flattenGoals(Ae)}));this.allGoalsSelected$=(0,j.aj)([xt,this.selectedGoalIds$]).pipe((0,nt.x)(function(Ae,ht){var Cn=ht[1];return Ae[0].length===ht[0].length&&Object.keys(Ae[1]).length===Object.keys(Cn).length}),(0,W.U)(function(Ae){var Mt=Ae[1];return _.filter(Ae[0],function(tn){return!tn.isNew&&(!Le.scorecardHost||Le.scorecardHost.canSelectGoal(tn).enabled)}).length===Object.keys(Mt).length})),this.scorecard$.pipe((0,U.o)(function(Ae){return _.isNil(Ae)},!0)).subscribe(function(Ae){var ht;!_.isNil(Ae)&&(_.isNil(Ae?.goals)||0===(null===(ht=Ae?.goals)||void 0===ht?void 0:ht.length))&&Le.scorecardService.userHasWritePermissions()&&Le.onNewGoalClick(!0)});var en=this.scorecardService.isLoading(),Ln=this.scorecardService.isEditing();this.showChildren$=this.expansionService.expansionMap$,this.showAllChildren$=this.expansionService.showAllExpanded$,this.hasExpandableGoals$=this.expansionService.hasExpandableGoals$;var hn=this.capabilityService.getScorecardCapabilities();hn.pipe((0,u.R)(this.onDestroy$)).subscribe(function(Ae){Le.scorecardCapabilities=Ae,Le.changeDetectorRef.markForCheck()}),this.canDragAndDrop$=(0,j.aj)([An,this.filterBy$,this.sort$,en,Ln,this.numberOfSelectedGoals$,hn]).pipe((0,W.U)(function(Ae){var ht,Mt=(ht=Ae)[0],jt=ht[1],tn=ht[2],Cn=ht[3],jo=ht[4],ui=ht[5];return ht[6].reorderGoal&&Mt&&_.isEmpty(jt.keyword)&&_.isEmpty(jt.statuses)&&"Rank"===tn.sortBy&&!Cn&&!jo&&ui<=1})),this.scorecardDetails$.pipe((0,Ue.w)(function(Ae){return Ae.filterBy$})).pipe((0,u.R)(this.onDestroy$)).subscribe(function(Ae){Le.filterBy$.next(Ae)}),(0,j.aj)([this.scorecardDetails$,this.filterBy$]).pipe((0,nt.x)(function(Ae,ht){var Mt=Ae[1],jt=ht[1];return _.isEqual(Mt?.keyword,jt?.keyword)&&_.isEqual(Mt?.statuses,jt?.statuses)})).pipe((0,u.R)(this.onDestroy$)).subscribe(function(Ae){var ht=Ae[0],Mt=Ae[1];_.isFunction(ht?.onFiltersUpdated)&&!_.isNil(Mt)&&ht.onFiltersUpdated(Mt)}),(0,j.aj)([this.sort$,this.filterBy$,this.filterRowVisible$,this.columnSettings$,this.scorecardService.viewType$]).pipe((0,u.R)(this.onDestroy$)).subscribe(function(Ae){var ht=Ae[0],Mt=Ae[1],jt=Ae[2],tn=Ae[3],Cn=Ae[4];Mt.matchStatus=P._.isColumnVisible(tn,2),Mt.matchOwner=P._.isColumnVisible(tn,1),"Heatmap"===Cn?Le.scorecardService.applySortAndFilter((0,r.pi)({},a.Ij),Le.goalsNewHeaderEnabled?{keyword:Mt?.keyword}:{}):("List"===Cn||"Compact"===Cn)&&Le.scorecardService.applySortAndFilter(ht,Le.goalsNewHeaderEnabled||jt?Mt:{statuses:Mt?.statuses})}),this.goalOwners$=this.goals$.pipe((0,W.U)(p.q.getGoalOwners)),this.scorecard$.pipe((0,F.h)(function(Ae){return!!Ae}),(0,nt.x)(function(Ae,ht){return Ae.id===ht.id}),(0,u.R)(this.onDestroy$)).subscribe(function(Ae){Le.hierarchyService.loadHierarchies(Ae.groupId,Ae.id)}),this.scorecardService.getActiveGoalId().pipe((0,u.R)(this.onDestroy$)).subscribe(function(Ae){_.isNil(Ae)?Le.detailsPaneLauncher.closeGoalDetails():(Le.detailsPaneLauncher.openGoalDetails(Le.scorecardService,Ae,d.E.Default),Le.showChildrenForSelectedMetrics(Ae))}),this.goalStatusesByScorecardId$=this.scorecardService.goalStatusesByScorecardId$,this.hasHierarchies$=this.hierarchyService.hasHierarchies$,this.displayMode$=null===(vt=null===(Ye=this.scorecardSettings)||void 0===Ye?void 0:Ye.settings)||void 0===vt?void 0:vt.pipe((0,W.U)(function(Ae){return Ae?.displayMode})),this.hideHeader$=null===(Rt=null===(pt=this.scorecardSettings)||void 0===pt?void 0:pt.settings)||void 0===Rt?void 0:Rt.pipe((0,W.U)(function(Ae){return Ae?.hideScorecardHeader})),this.hideTitle$=null===(Ht=null===(Ut=this.scorecardSettings)||void 0===Ut?void 0:Ut.settings)||void 0===Ht?void 0:Ht.pipe((0,W.U)(function(Ae){return Ae?.hideScorecardTitle})),this.hideToolbar$=null===(vn=null===(sn=this.scorecardSettings)||void 0===sn?void 0:sn.settings)||void 0===vn?void 0:vn.pipe((0,W.U)(function(Ae){return Ae?.hideScorecardToolbar})),this.hideCards$=null===($t=null===(Mn=this.scorecardSettings)||void 0===Mn?void 0:Mn.settings)||void 0===$t?void 0:$t.pipe((0,W.U)(function(Ae){return Ae?.hideGoalCards})),this.showPickerToolbar$=null===(zt=null===(In=this.scorecardSettings)||void 0===In?void 0:In.settings)||void 0===zt?void 0:zt.pipe((0,W.U)(function(Ae){return Ae?.showPickerToolbar})),this.scorecardService.scorecardSelectionMode$.pipe((0,u.R)(this.onDestroy$)).subscribe(function(Ae){return Le.scorecardSelectionMode=Ae}),this.scorecardService.viewType$.pipe((0,u.R)(this.onDestroy$)).subscribe(function(Ae){return Le.viewType=Ae}),null===(Rn=null===(_n=this.scorecardSettings)||void 0===_n?void 0:_n.settings)||void 0===Rn||Rn.pipe((0,Q.q)(1)).subscribe(function(Ae){var ht,Mt=null===(ht=_.first(Ae.filters))||void 0===ht?void 0:ht.goalId;Mt&&Ae.isEditingGoal&&Le.scorecardService.setGoalState(Mt,"Editing")}),this.columnSettings$.pipe((0,u.R)(this.onDestroy$)).subscribe(function(Ae){return Le.columnSettings=Ae}),this.scorecard$.pipe((0,u.R)(this.onDestroy$)).subscribe(function(Ae){return Le.visualScorecard=Ae}),this.featureSwitchService.featureSwitches.scorecardListViewSettings&&this.viewsService&&(this.viewsService.loadViews(!1),this.viewsService.getDefaultView("List").pipe((0,u.R)(this.onDestroy$)).subscribe(function(){Le.viewSettings=Le.viewsService.defaultListView?Le.viewsService.defaultListView.listViewDetails:a.lb,Le.setVisibleColumns()}))},Ve.prototype.ngOnDestroy=function(){this.detailsPaneLauncher.closeGoalDetails(),this.onDestroy$.next(!0),this.onDestroy$.complete()},Ve.prototype.showChildrenForSelectedMetrics=function(Le){var Te=this.scorecardService.getCurrentScorecard(),Be=p.q.getGoal(Te?.goals,Le);for(Le=Be.parentId;Le&&null!=(Be=p.q.getGoal(Te?.goals,Le));)this.expansionService.expandGoal(Le),Le=Be.parentId},Ve.prototype.onShowChildrenChange=function(Le){Le.value?this.expansionService.expandGoal(Le.id):this.expansionService.collapseGoal(Le.id)},Ve.prototype.onToggleExpandAllMetrics=function(){this.expansionService.toggleExpandAll()},Ve.prototype.onNewGoalClick=function(Le){this.scorecardService.setViewType("List"),this.scorecardService.addGoal(),Le&&this.goalsTutorialService.startFirstGoalTutorial()},Ve.prototype.openHierarchiesBuilder=function(){return(0,r.mG)(this,void 0,void 0,function(){return(0,r.Jh)(this,function(Le){switch(Le.label){case 0:return[4,this.hierarchyPane.openHierarchiesBuilder("HeatmapHeader")];case 1:return Le.sent(),[2]}})})},Ve.prototype.openHeatmapConfigurationPane=function(){this.hierarchyPane.showHeatmapConfigurationPane()},Ve.prototype.onScorecardViewClick=function(){this.scorecardService.setViewType("List")},Ve.prototype.onHeatmapViewClick=function(){this.scorecardService.setViewType("Heatmap")},Ve.prototype.onSelectAllGoals=function(){this.scorecardService.toggleSelectAllGoals()},Ve.prototype.openBulkUpdatePane=function(){var Le=this;this.detailsPaneLauncher.openBulkEditingPane(this.scorecardService,function(Te){return Le.scorecardService.bulkUpdateGoals(Te)})},Ve.prototype.onNewSubGoalClick=function(){if(1===this.scorecardService.numberOfSelectedGoals()){var Le=this.scorecardService.getFirstSelectedGoalId();this.expansionService.expandGoal(Le),this.scorecardService.addSubGoal(Le)}},Ve.prototype.onImportClick=function(Le){var Te=this,Be=Le.target;if(this.isExcelFile=!!Be.files[0].name.match(/(.xls|.xlsx)/),this.isExcelFile){var Ye=new FileReader;Ye.onload=function(vt){var Rt=Ye.result.toString().replace(/^data:(.*,)?/,"");Rt.length%4>0&&(Rt+="=".repeat(4-Rt.length%4)),Te.inputFile.nativeElement.value="",Te.dialogService.open(se,{width:"70%",height:"80%",data:{fileData:Rt,scorecard:Te.visualScorecard}}).afterClosed().pipe((0,ee.M)(Te.scorecard$)).subscribe(function(Ht){var vn=Ht[1];Te.scorecardService.loadScorecard(vn.groupId,vn.id)})},Ye.readAsDataURL(Be.files[0])}},Ve.prototype.updateSorting=function(Le,Te){var Be=fe.p.toggleSort(Le,Te);this.sort$.next(Be)},Ve.prototype.toggleFilterRow=function(){var Le=!this.filterRowVisible$.value;this.filterRowVisible$.next(Le),Le||this.onFilterKeywordChange("")},Ve.prototype.onFilterKeywordChange=function(Le){var Te=(0,r.pi)((0,r.pi)({},this.filterBy$.value),{keyword:Le});this.filterBy$.next(Te)},Ve.prototype.onGoalsStatusTileSelectionChange=function(Le){var Te,Be={keyword:null===(Te=this.filterBy$.value)||void 0===Te?void 0:Te.keyword,statuses:Le};this.filterBy$.next(Be)},Ve.prototype.onGoalDragStart=function(Le){var Te=Le.source.data.goal,Be=Le.source.data.level,Ye=Le.source.dropContainer.getSortedItems(),vt=Ye.findIndex(function(pt){return pt.data.goal.id===Te.id});y.fF.assertValue(-1!==vt,"Goal should exist in the drop list"),this.goalDragInfo=(0,Ke.ZP)(this.goalDragInfo,function(pt){return pt.sourceGoalId=Te.id,pt.rankOrderedPrevGoal=vt>0?Ye[vt-1].data:void 0,pt.rankOrderedNextGoal=vt<Ye.length-1?Ye[vt+1].data:void 0,pt.destParentGoalId=Te.parentId,pt.destGoalDropLevel=Be,pt}),this.changeDetectorRef.detectChanges()},Ve.prototype.onGoalDragMove=function(Le){var Te,Be,Ye,vt;if(this.goalDragInfo.rankOrderedPrevGoal||this.goalDragInfo.rankOrderedNextGoal){if(!this.goalDragInfo.rankOrderedPrevGoal)return void(this.goalDragInfo=(0,Ke.ZP)(this.goalDragInfo,function(Mt){return Mt.destParentGoalId=void 0,Mt.destGoalDropLevel=0,Mt}));var Ut,Ht,pt=this.goalDragInfo.rankOrderedPrevGoal,Rt=pt.level<a.gT.MaxSubGoals;if(this.featureSwitchService.featureSwitches.goalsXAxisDragAndDrop){var vn=Le.source.getPlaceholderElement(),en=Array.from(vn.querySelectorAll(".cell-indent")).map(function(tn){return tn.getBoundingClientRect().right});for(Ht=0;Ht<en.length&&en[Ht]<=Le.pointerPosition.x;)Ht++;var _n=null!==(vt=null===(Ye=this.goalDragInfo.rankOrderedNextGoal)||void 0===Ye?void 0:Ye.level)&&void 0!==vt?vt:0,Ln=pt.level+(Rt?1:0);Ht=_.clamp(Ht,_n,Ln),Ut=Ln}else{var Mn=(vn=Le.source.getPlaceholderElement()).getBoundingClientRect(),In=20+Mn.height,zt=_.clamp(Le.pointerPosition.y-(Mn.top-10),0,In-1),Rn=(_n=null!==(Be=null===(Te=this.goalDragInfo.rankOrderedNextGoal)||void 0===Te?void 0:Te.level)&&void 0!==Be?Be:0,pt.level-_n+1);Rt&&Rn++;var An=Math.floor(zt/(In/Rn));Ht=(Ut=pt.level+(Rt?1:0))-An}var Ae=this.scorecardService.getCurrentScorecard(),ht=pt.goal;for(Rt||(ht=ht.parentId?p.q.getGoal(Ae.goals,ht.parentId):void 0);Ut>Ht;)ht=ht.parentId?p.q.getGoal(Ae.goals,ht.parentId):void 0,Ut--;this.goalDragInfo=(0,Ke.ZP)(this.goalDragInfo,function(Mt){return Mt.destParentGoalId=ht?.id,Mt.destGoalDropLevel=Ht,Mt})}},Ve.prototype.setVisibleColumns=function(){var Le,Te,Be;if(this.columnSettings=this.visualScorecard.columnSettings,null!==(Le=this.viewSettings)&&void 0!==Le&&Le.dropColumns){var Ye=(null===(Te=this.scorecardElement)||void 0===Te?void 0:Te.nativeElement.offsetWidth)||0;((null===(Be=this.columnTableElement)||void 0===Be?void 0:Be.nativeElement.offsetWidth)||0)>Ye&&(!1===this.forceColumnMinWidths&&(this.cutoffWidth=Ye),this.forceColumnMinWidths=!0);for(var pt=a.gT.ScorecardTablePadding.left+a.gT.ScorecardTablePadding.right,Rt=0;Rt<this.visualScorecard.columnSettings.length;Rt++)if(this.visualScorecard.columnSettings[Rt].show&&(pt+=a.gT.ListViewCellMinWidths[this.visualScorecard.columnSettings[Rt].columnId]||0)>Ye){this.columnSettings=this.visualScorecard.columnSettings.slice(0,Rt||1);break}Ye>this.cutoffWidth&&(this.forceColumnMinWidths=!1)}else this.forceColumnMinWidths=!1;this.changeDetectorRef.markForCheck()},Ve.prototype.onGoalDropListSorted=function(Le){return(0,r.mG)(this,void 0,void 0,function(){var Te,Be,Ye;return(0,r.Jh)(this,function(vt){return y.fF.assertValue((Te=Le.item.data.goal.id)===this.goalDragInfo.sourceGoalId,"Dragged goal does not match."),Be=Le.container.getSortedItems(),Ye=Be.map(function(pt){return pt.data}).filter(function(pt){return pt.goal.id!==Te}),this.goalDragInfo=(0,Ke.ZP)(this.goalDragInfo,function(pt){return pt.rankOrderedNextGoal=Le.currentIndex<Ye.length?Ye[Le.currentIndex]:void 0,pt.rankOrderedPrevGoal=Le.currentIndex-1>=0?Ye[Le.currentIndex-1]:void 0,pt}),[2]})})},Ve.prototype.onDropGoal=function(Le){return(0,r.mG)(this,void 0,void 0,function(){var Te,Be,Ye;return(0,r.Jh)(this,function(vt){switch(vt.label){case 0:return y.fF.assertValue((Te=Le.item.data.goal).id===this.goalDragInfo.sourceGoalId,"Dragged goal does not match."),this.goalDragInfo.rankOrderedNextGoal&&(Ye=this.goalDragInfo.rankOrderedNextGoal.goal,(this.goalDragInfo.destParentGoalId&&Ye.parentId===this.goalDragInfo.destParentGoalId||!Ye.parentId&&!this.goalDragInfo.destParentGoalId)&&(Be=this.goalDragInfo.rankOrderedNextGoal.goal)),[4,this.scorecardService.moveGoal(Te.id,Be?.id,this.goalDragInfo.destParentGoalId)];case 1:return vt.sent(),this.goalDragInfo=(0,Ke.ZP)(this.goalDragInfo,function(){return{}}),[2]}})})},Ve.prototype.onLinkedMetricInit=function(){return(0,r.mG)(this,void 0,void 0,function(){var Le,Te,Ye=this;return(0,r.Jh)(this,function(vt){return this.linkedMetricsLauncher&&(Le=_.map(p.q.flattenGoals(this.scorecardService.getCurrentScorecard().goals),"id"),Te=this.scorecardDetails$.pipe((0,Ue.w)(function(pt){var Rt;return null!==(Rt=pt?.reportId$)&&void 0!==Rt?Rt:Ye.scorecard$.pipe((0,W.U)(function(Ut){return Ut.reportId}))}),(0,nt.x)()),this.linkedMetricsLauncher.launchLinkedMetrics(Le,Te).pipe((0,Q.q)(1)).subscribe(function(pt){pt?.length>=1&&Ye.scorecardService.createLinkedGoals(pt)})),[2]})})},Ve.\u0275fac=function(Te){return new(Te||Ve)(i.\u0275\u0275directiveInject(B.G),i.\u0275\u0275directiveInject(w.$),i.\u0275\u0275directiveInject(d.c),i.\u0275\u0275directiveInject(q.D),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(le.vZ),i.\u0275\u0275directiveInject(de.N),i.\u0275\u0275directiveInject(V.G),i.\u0275\u0275directiveInject(M.Nw),i.\u0275\u0275directiveInject(L.l),i.\u0275\u0275directiveInject(i.ElementRef),i.\u0275\u0275directiveInject(Oe,8),i.\u0275\u0275directiveInject(v.x),i.\u0275\u0275directiveInject(x.w),i.\u0275\u0275directiveInject(Fe.u,8),i.\u0275\u0275directiveInject(be.M,8))},Ve.\u0275cmp=i.\u0275\u0275defineComponent({type:Ve,selectors:[["scorecard"]],viewQuery:function(Te,Be){if(1&Te&&(i.\u0275\u0275viewQuery(mo,5),i.\u0275\u0275viewQuery(vo,5)),2&Te){var Ye=void 0;i.\u0275\u0275queryRefresh(Ye=i.\u0275\u0275loadQuery())&&(Be.inputFile=Ye.first),i.\u0275\u0275queryRefresh(Ye=i.\u0275\u0275loadQuery())&&(Be.columnTableElement=Ye.first)}},decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["noScorecard",""],["noGoals",""],[1,"scorecard",3,"on-resize"],[3,"scorecard","users","labels",4,"ngIf"],["class","toolbar",3,"new-look",4,"ngIf"],[3,"scorecardName","scorecardDescription","isTitleEditable",4,"ngIf"],[4,"ngIf"],[3,"scorecard","users","labels"],[1,"toolbar"],[1,"toolbar-btns"],[1,"spacer"],[1,"add-goal-btn","pbi-fluent-button",3,"disabled","click"],["fontIcon","pbi-glyph-add",1,"glyphicon","glyph-small"],["localize","NewMetric"],[1,"add-subgoal-btn","pbi-fluent-button",3,"disabled","click"],["localize","AddSubmetric"],["class","label pbi-fluent-button primary",4,"ngIf"],[1,"label","pbi-fluent-button","primary"],["type","file",3,"change"],["inputFile",""],["localize","Import"],["cdkMonitorElementFocus","","mat-button","","aria-expanded","viewSwitcherMenuTrigger.menuOpen === true","class","view-mode-picker-btn pbi-fluent-button",3,"matMenuTriggerFor","ngClass",4,"ngIf"],[1,"view-mode-picker-menu",3,"overlapTrigger"],["viewSwitcherMenu","matMenu"],["mat-menu-item","",1,"pbi-fluent-button",3,"click"],["fontIcon","pbi-glyph-list",1,"glyphicon","glyph-small"],["localize","Scorecard","localizeTooltip","Scorecard"],["fontIcon","pbi-glyph-table",1,"glyphicon","glyph-small"],["localize","MetricsHeatmap","localizeTooltip","MetricsHeatmap"],["class","customize-heatmap-btn pbi-fluent-button",3,"click",4,"ngIf"],["class","hierarchies-btn pbi-fluent-button",3,"click",4,"ngIf"],["cdkMonitorElementFocus","","mat-button","","aria-expanded","viewSwitcherMenuTrigger.menuOpen === true",1,"view-mode-picker-btn","pbi-fluent-button",3,"matMenuTriggerFor","ngClass"],["viewSwitcherMenuTrigger","matMenuTrigger"],[1,"glyph-small",3,"fontIcon"],[3,"localize","localizeTooltip"],["fontIcon","pbi-glyph-chevrondownsmall","localizeTooltip","View_Options",1,"glyph-mini","chevron-down"],[1,"customize-heatmap-btn","pbi-fluent-button",3,"click"],["fontIcon","pbi-glyph-barchartverticaledit",1,"glyphicon","glyph-small"],["localize","MetricsCustomizeHeatmap"],[1,"hierarchies-btn","pbi-fluent-button",3,"click"],["fontIcon","pbi-glyph-inline-drill-nocircle",1,"glyphicon","glyph-small"],["localize","MetricsManageHierarchies"],[3,"scorecardName","scorecardDescription","isTitleEditable"],[3,"goals","goalStatusesByScorecardId","goalStatusList","selectedStatuses","onStatusSelected",4,"ngIf"],["class","filter-row",3,"toolbar-visible",4,"ngIf"],["class","scorecard-table","cdkDropList","",3,"padding-left","padding-right","cdkDropListDisabled","cdkDropListDropped","cdkDropListSorted",4,"ngIf"],[3,"scorecard","isEditMode","viewSettings","sort","onSortColumn",4,"ngIf"],[3,"filterText","filterBy",4,"ngIf","ngIfElse"],["listToolbar",""],[3,"filterText","filterBy"],[3,"isEditMode","scorecard","scorecardCapabilities","numberOfSelectedGoals","filterText","showTitle","filterBy","onNewGoal","onNewSubGoal","onLinkedMetricInit"],[3,"goals","goalStatusesByScorecardId","goalStatusList","selectedStatuses","onStatusSelected"],[1,"filter-row"],["fontIcon","pbi-glyph-filter",1,"filter-icon","glyphicon","glyph-small"],[3,"ngModel","ngModelChange"],["fontIcon","pbi-glyph-close",1,"close-icon","glyphicon","glyph-small",3,"click"],["cdkDropList","",1,"scorecard-table",3,"cdkDropListDisabled","cdkDropListDropped","cdkDropListSorted"],["columnTable",""],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"scorecard-header"],["colspan","1",1,"checkmark-th"],["class","select-checkmark",3,"box-checked",4,"ngIf"],[1,"select-checkmark"],[3,"checked","pbiTooltip","onChange"],["colspan","5",4,"ngIf","ngIfElse"],["columnHeader",""],["colspan","5"],[1,"filter-btn-and-name"],["class","collapse-btn",3,"pbiTooltip","click",4,"ngIf"],["class","filter-btn",3,"pbiTooltip","click",4,"ngIf"],[1,"name-col","sort-col"],[3,"column","index","sort","isEditMode","onSortColumn"],[1,"collapse-btn",3,"pbiTooltip","click"],[1,"glyphicon","glyph-mini",3,"fontIcon"],[1,"filter-btn",3,"pbiTooltip","click"],["fontIcon","pbi-glyph-filter",1,"glyphicon","glyph-small"],["colspan","1","class","sort-col",4,"ngIf"],["colspan","1",1,"sort-col"],["goal-group","",3,"scorecard","columnSettings","goal","color","showChildren","goalDragInfo","scorecardSelectionMode","forceColumnMinWidths","showChildrenChange","dragStarted","dragMoved",4,"ngIf"],["goal-group","",3,"scorecard","columnSettings","goal","color","showChildren","goalDragInfo","scorecardSelectionMode","forceColumnMinWidths","showChildrenChange","dragStarted","dragMoved"],[3,"scorecard","isEditMode","viewSettings","sort","onSortColumn"],[3,"filterText","filterBy",4,"ngIf"],[1,"heat-map"],[3,"isEditMode","scorecardCapabilities","numberOfSelectedGoals","filterText","filterBy","onNewGoal","onNewSubGoal","onLinkedMetricInit"],[3,"boardSettings","metricsGoalStatuses"],[3,"isMetricsPicker","canEdit","onNewGoal","onLinkToGoal"],[1,"no-goals","center-text"],["loading",""],["localize","Scorecard_DoesNotExist"],["localize","Scorecard_Loading"]],template:function(Te,Be){if(1&Te&&(i.\u0275\u0275template(0,ci,5,4,"ng-container",0),i.\u0275\u0275pipe(1,"async"),i.\u0275\u0275template(2,Yn,5,6,"ng-template",null,1,i.\u0275\u0275templateRefExtractor)),2&Te){var Ye=i.\u0275\u0275reference(3);i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(1,2,Be.scorecard$))("ngIfElse",Ye)}},dependencies:[k.NgClass,k.NgForOf,k.NgIf,Y.Wj,ue.O,E.Fj,E.JJ,E.On,s.X,ne.r,te.Hw,Ne.W0,Ne.tN,Ne.D8,$e.v,Xe.V,it.u,st.Q,ot.E,ut.O,qe.C,ct.y,yt.p,wt.i,It.V,K.t,mn.A,qt.R,Fn.J,k.AsyncPipe,O.F],styles:["[_nghost-%COMP%]{display:flex;flex-direction:row;height:100%}[_nghost-%COMP%]    {color:var(--scorecard-neutralPrimaryColor)}[_nghost-%COMP%]   .scorecard[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;flex:1}[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]{padding:20px 50px 0;width:100%;box-sizing:border-box}[_nghost-%COMP%]   .toolbar.new-look[_ngcontent-%COMP%]{padding:0 30px 4px;background-color:var(--scorecard-headerBackgroundColor);border-bottom:1px solid var(--gray-50, #D2D0CE);display:flex;flex-direction:column}[_nghost-%COMP%]   .toolbar.new-look[_ngcontent-%COMP%]   .pbi-fluent-button[_ngcontent-%COMP%]{border:none}[_nghost-%COMP%]   .toolbar.new-look[_ngcontent-%COMP%]   .pbi-fluent-button[_ngcontent-%COMP%]:disabled{background:transparent}[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]{display:inline-flex;width:100%}[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{overflow:visible}[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   .mat-icon.glyph-small[_ngcontent-%COMP%]{font-size:var(--lg-font-size, 16px);width:var(--lg-font-size, 16px);height:var(--lg-font-size, 16px)}[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   .mat-icon.glyph-mini[_ngcontent-%COMP%]{font-size:var(--sm-font-size, 12px);width:var(--sm-font-size, 12px);height:var(--sm-font-size, 12px)}[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   .mat-icon.mat-ligature-font[fontIcon][_ngcontent-%COMP%]{overflow:auto}[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:inline-flex;align-items:center}[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled   span[_ngcontent-%COMP%]{color:var(--gray-90, #A19F9D)}[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   .spacer[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   .add-goal-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   .hierarchies-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   .view-mode-picker-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   .customize-heatmap-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   .hierarchy-slicer-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px;color:var(--fluent-theme-black-color, #000)}[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   .view-mode-picker-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   .hierarchy-slicer-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin:0 8px}[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   .add-goal-btn[_ngcontent-%COMP%], [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   .add-subgoal-btn[_ngcontent-%COMP%], [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   .hierarchies-btn[_ngcontent-%COMP%], [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   .view-mode-picker-btn[_ngcontent-%COMP%], [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   .customize-heatmap-btn[_ngcontent-%COMP%], [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-btns[_ngcontent-%COMP%]   .hierarchy-slicer-btn[_ngcontent-%COMP%]{margin-right:8px;background-color:var(--fluent-theme-neutral-lighter-alt-color, #FAF9F8)}[_nghost-%COMP%]   pbi-dropdown-trigger[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]   .filter-row[_ngcontent-%COMP%]{color:var(--scorecard-tableHeaderForegroundColor);background-color:rgba(0,0,0,.05);border-radius:4px;margin:10px 30px 0}[_nghost-%COMP%]   .filter-row[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::placeholder{color:var(--scorecard-tableHeaderForegroundColor)}[_nghost-%COMP%]   .filter-row.toolbar-visible[_ngcontent-%COMP%]{margin-top:20px}[_nghost-%COMP%]   .filter-row[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;align-items:center;height:45px;outline:none}[_nghost-%COMP%]   .filter-row[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .filter-icon[_ngcontent-%COMP%]{font-size:20px;margin-top:4px;margin-right:12px;padding-left:15px}[_nghost-%COMP%]   .filter-row[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{cursor:pointer;font-size:16px;margin-top:8px;margin-right:10px}[_nghost-%COMP%]   .filter-row[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:transparent;border:none;flex:1;font-size:var(--md-font-size, 14px);outline:none;padding-left:0}[_nghost-%COMP%]   .scorecard-table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0px 10px;empty-cells:hide;padding-top:0;padding-bottom:0;color:var(--scorecard-tableRowForegroundColor)}[_nghost-%COMP%]   .scorecard-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1;background:var(--scorecard-tableBackgroundColor);height:40px}[_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]{text-align:left}[_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:var(--lg-font-size, 16px);font-weight:var(--font-weight-regular, 400);color:var(--scorecard-tableHeaderForegroundColor);font-weight:500}[_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th.checkmark-th[_ngcontent-%COMP%]{width:35px;max-width:35px}[_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th.checkmark-th[_ngcontent-%COMP%]:not(.show-checkmark){width:0px;max-width:0px}[_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th.checkmark-th[_ngcontent-%COMP%]:not(.show-checkmark)   .select-checkmark[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th.show-on-hover-only[_ngcontent-%COMP%]   .select-checkmark[_ngcontent-%COMP%]{visibility:hidden}[_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th.show-on-hover-only[_ngcontent-%COMP%]:hover   .select-checkmark[_ngcontent-%COMP%], [_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th.show-on-hover-only[_ngcontent-%COMP%]   .select-checkmark.box-checked[_ngcontent-%COMP%]{visibility:visible}[_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .select-checkmark[_ngcontent-%COMP%]{margin-right:15px}[_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .select-checkmark[_ngcontent-%COMP%]     pbi-checkbox{margin-bottom:0}[_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th.dueDate[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}[_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .sort-col[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .filter-btn-and-name[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .filter-btn-and-name[_ngcontent-%COMP%]   .collapse-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;margin-left:6px;min-width:48px;width:48px;background-color:transparent;border:none;padding:2px}[_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .filter-btn-and-name[_ngcontent-%COMP%]   .collapse-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;height:unset}[_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .filter-btn-and-name[_ngcontent-%COMP%]   .filter-btn[_ngcontent-%COMP%]{background-color:transparent;border:none;font-size:20px;padding:0 12px;color:inherit}[_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .filter-btn-and-name[_ngcontent-%COMP%]   .filter-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;height:unset}[_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .filter-btn-and-name[_ngcontent-%COMP%]   .filter-btn[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .filter-btn-and-name[_ngcontent-%COMP%]   .filter-btn[_ngcontent-%COMP%]:focus:hover{background-color:var(--fluent-theme-neutral-lighter-color, #F3F2F1)}[_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .filter-btn-and-name[_ngcontent-%COMP%]   .filter-btn[_ngcontent-%COMP%]:active, [_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .filter-btn-and-name[_ngcontent-%COMP%]   .filter-btn.active[_ngcontent-%COMP%], [_nghost-%COMP%]   .scorecard-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .filter-btn-and-name[_ngcontent-%COMP%]   .filter-btn[_ngcontent-%COMP%]:active:focus:hover{background-color:var(--fluent-theme-neutral-quarter-alt-color, #E1DFDD)}[_nghost-%COMP%]   .add-goal-btn-box[_ngcontent-%COMP%]{float:right}[_nghost-%COMP%]   .add-goal-btn-box[_ngcontent-%COMP%]   .add-goal-btn[_ngcontent-%COMP%]{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-semi-bold, 600);color:var(--gray-180, #252423);padding:6px 18px;box-sizing:border-box;border-radius:2px;height:32px;display:inline-block;cursor:pointer;background-color:var(--fluent-theme-primary-color, #F2C811)}[_nghost-%COMP%]   .center-text[_ngcontent-%COMP%]{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-semi-bold, 600);text-align:center}[_nghost-%COMP%]   .compact.scorecard[_ngcontent-%COMP%]{overflow:hidden;padding:0 20px}@media screen and (min-width: 1024px){[_nghost-%COMP%]   .compact.scorecard[_ngcontent-%COMP%]{padding:0 26px}}@media screen and (min-width: 1366px){[_nghost-%COMP%]   .compact.scorecard[_ngcontent-%COMP%]{padding:0 60px}}[_nghost-%COMP%]   .compact.scorecard[_ngcontent-%COMP%]   compact-scorecard[_ngcontent-%COMP%]{overflow:hidden}[_nghost-%COMP%]   .compact.scorecard[_ngcontent-%COMP%]   scorecard-list-toolbar[_ngcontent-%COMP%]{--toolbar-padding: 12px 0 12px 0}[_nghost-%COMP%]   .compact.scorecard[_ngcontent-%COMP%]     .scorecard-status-tiles{padding:0}label.label[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;top:-100%}.label[_ngcontent-%COMP%]{cursor:pointer;padding:5px 15px;display:inline-block}.no-goals[_ngcontent-%COMP%], empty-scorecard[_ngcontent-%COMP%]{color:var(--scorecard-tableHeaderForegroundColor);padding:20px;flex:1}.no-goals.border-top[_ngcontent-%COMP%], empty-scorecard.border-top[_ngcontent-%COMP%]{border-top:1px solid var(--gray-50, #D2D0CE)}.heat-map-scroll[_ngcontent-%COMP%]{overflow:hidden}.heat-map[_ngcontent-%COMP%]{flex:1;overflow:hidden;display:flex}.mat-menu-item[_ngcontent-%COMP%]{color:var(--gray-180, #252423);display:flex;flex-direction:row;align-items:center;height:36px;padding-right:16px}  .view-mode-picker-menu mat-icon{display:flex;align-items:center}  .view-mode-picker-menu .mat-icon{overflow:visible}  .view-mode-picker-menu .mat-icon.glyph-small{font-size:var(--lg-font-size, 16px);width:var(--lg-font-size, 16px);height:var(--lg-font-size, 16px)}  .view-mode-picker-menu .mat-icon.glyph-mini{font-size:var(--sm-font-size, 12px);width:var(--sm-font-size, 12px);height:var(--sm-font-size, 12px)}  .view-mode-picker-menu .mat-icon.mat-ligature-font[fontIcon]{overflow:auto}.new-header   scorecard[_nghost-%COMP%], scorecard   [_nghost-%COMP%]{display:block}  .hierarchy-slicer-menu .mat-menu-content{padding:0!important}"],changeDetection:0}),Ve}()},44260:function(lt,Ge,t){"use strict";t.d(Ge,{o:function(){return d}});var r=t(50423),o=t(77476),P=t(44408),a=function(l,c,y){return{hide:l,rotate180:c,"reserve-space":y}},d=function(){function p(){this.reserveSpaceWhenHidden=!0}return p.\u0275fac=function(c){return new(c||p)},p.\u0275cmp=r.\u0275\u0275defineComponent({type:p,selectors:[["sort-icon"]],inputs:{hidden:"hidden",upArrow:"upArrow",reserveSpaceWhenHidden:"reserveSpaceWhenHidden"},decls:1,vars:5,consts:[["fontIcon","pbi-glyph-sortup",1,"glyphicon","glyph-mini","sort-icon",3,"ngClass"]],template:function(c,y){1&c&&r.\u0275\u0275element(0,"mat-icon",0),2&c&&r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction3(1,a,y.hidden,y.upArrow,y.reserveSpaceWhenHidden))},dependencies:[o.NgClass,P.Hw],styles:[".sort-icon[_ngcontent-%COMP%]{height:12px;width:12px;margin-left:12px}.sort-icon.rotate180[_ngcontent-%COMP%]{transform:rotate(180deg)}.sort-icon.hide[_ngcontent-%COMP%]{display:none}.sort-icon.hide.reserve-space[_ngcontent-%COMP%]{display:inline;visibility:hidden}"],changeDetection:0}),p}()},93631:function(lt,Ge,t){"use strict";t.d(Ge,{l:function(){return C}});var r=t(50423),o=t(65181),P=t(77476),a=t(36858),d=t(85102),p=t(82621);function l(v,k){if(1&v&&(r.\u0275\u0275namespaceSVG(),r.\u0275\u0275element(0,"path",4)),2&v){var E=r.\u0275\u0275nextContext();r.\u0275\u0275attribute("d",E.path)("stroke",E.settings.lineColor)("stroke-width",E.settings.lineWidth)}}function c(v,k){if(1&v&&(r.\u0275\u0275namespaceSVG(),r.\u0275\u0275element(0,"circle")),2&v){var E=r.\u0275\u0275nextContext();r.\u0275\u0275attribute("cx",E.min.x)("cy",E.min.y)("r",E.settings.dotRadius)("fill",E.settings.dotFillColor)("stroke",E.settings.dotColor)("stroke-width",E.settings.dotStrokeWidth)}}function y(v,k){if(1&v&&(r.\u0275\u0275namespaceSVG(),r.\u0275\u0275element(0,"circle")),2&v){var E=r.\u0275\u0275nextContext();r.\u0275\u0275attribute("cx",E.max.x)("cy",E.max.y)("r",E.settings.dotRadius)("fill",E.settings.dotFillColor)("stroke",E.settings.dotColor)("stroke-width",E.settings.dotStrokeWidth)}}function i(v,k){if(1&v&&(r.\u0275\u0275namespaceSVG(),r.\u0275\u0275namespaceHTML(),r.\u0275\u0275elementStart(0,"div",5)(1,"table")(2,"tr")(3,"th",6),r.\u0275\u0275text(4),r.\u0275\u0275pipe(5,"localize"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(6,"th",7),r.\u0275\u0275text(7),r.\u0275\u0275pipe(8,"formatValue"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(9,"tr")(10,"th",6),r.\u0275\u0275text(11),r.\u0275\u0275pipe(12,"localize"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(13,"th",7),r.\u0275\u0275text(14),r.\u0275\u0275pipe(15,"formatValue"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(16,"tr")(17,"th",6),r.\u0275\u0275text(18),r.\u0275\u0275pipe(19,"localize"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(20,"th",7),r.\u0275\u0275text(21),r.\u0275\u0275elementEnd()()()()),2&v){var E=r.\u0275\u0275nextContext();r.\u0275\u0275advance(4),r.\u0275\u0275textInterpolate(r.\u0275\u0275pipeBind1(5,6,"High")),r.\u0275\u0275advance(3),r.\u0275\u0275textInterpolate(r.\u0275\u0275pipeBind2(8,8,E.tooltip.high,E.formatString)),r.\u0275\u0275advance(4),r.\u0275\u0275textInterpolate(r.\u0275\u0275pipeBind1(12,11,"Low")),r.\u0275\u0275advance(3),r.\u0275\u0275textInterpolate(r.\u0275\u0275pipeBind2(15,13,E.tooltip.low,E.formatString)),r.\u0275\u0275advance(4),r.\u0275\u0275textInterpolate(r.\u0275\u0275pipeBind1(19,16,"Cycle")),r.\u0275\u0275advance(3),r.\u0275\u0275textInterpolate(E.tooltip.cycle)}}var C=function(){function v(k){this.localizationService=k,this.DefaultOptions={height:48,width:120,lineColor:"#5BD667",lineWidth:2,dotRadius:2,dotStrokeWidth:1,dotFillColor:"#161514",dotColor:"#5BD667",showMax:!0,showMin:!0,tension:.5},this.settings=Object.assign({},this.DefaultOptions)}return Object.defineProperty(v.prototype,"values",{set:function(E){this.sparklinePoints=E?.filter(function(s){return null!=s.value&&null!=s.timestamp}),this.update()},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"options",{set:function(E){this.settings=Object.assign({},this.DefaultOptions,E),this.sparklinePoints&&this.update()},enumerable:!1,configurable:!0}),v.prototype.ngOnChanges=function(k){k.cycle&&(this.tooltip=Object.assign({},this.tooltip,{cycle:this.getCycleText()})),k.formatString&&this.update()},v.prototype.update=function(){var k;this.viewBox="0 0 ".concat(this.settings.width," ").concat(this.settings.height),(null===(k=this.sparklinePoints)||void 0===k?void 0:k.length)>=2?(this.points=v.calculatePoints(this.sparklinePoints,this.settings),this.path=v.calculatePath(this.points,this.settings),this.min=this.points.reduce(function(E,s){return E?.y<s.y?E:s}),this.max=this.points.reduce(function(E,s){return E?.y>s.y?E:s}),this.tooltip=this.getTooltipData(this.sparklinePoints)):(this.points=null,this.path=null,this.min=null,this.max=null)},v.calculatePoints=function(k,E){var s=k.map(function(ae){return{value:ae.value,timestamp:new Date(ae.timestamp)}}),ne=_.map(s,function(ae){return ae.value}),te=_.min(ne),X=_.max(ne),m=_.map(s,function(ae){return ae.timestamp.getTime()}),O=_.min(m),I=_.max(m),H=this.calculateSafeRange(X,te),G=this.calculateSafeRange(I,O),Z=E.dotRadius+E.dotStrokeWidth+this.PaddingOnEdges,ie=E.width-2*Z,ye=E.height-2*Z;return s.map(function(ae){return{x:(ae.timestamp.getTime()-O)/G*ie+Z,y:(1-(ae.value-te)/H)*ye+Z}})},v.calculatePath=function(k,E){for(var s="M ".concat(k[0].x,", ").concat(k[0].y),ne=[],te=0;te<k.length;te++)if(0===te||te===k.length-1)ne.push({x:0,y:0});else{var X=this.calculateDerivative(k[te-1],k[te+1]),m=Math.sqrt(1+X*X);ne.push({x:1/m,y:X/m})}for(te=0;te<k.length-1;te++){var O=k[te],I=k[te+1],H=Math.abs(I.x-O.x),G=Math.abs(I.y-O.y),Z=Math.min(H,G)*E.tension,ye=O.y+Z*ne[te].y,ae=I.x-Z*ne[te+1].x,J=I.y-Z*ne[te+1].y,N="C ".concat(O.x+Z*ne[te].x,", ").concat(ye," ").concat(ae,", ").concat(J," ").concat(I.x,", ").concat(I.y);s+=" ".concat(N)}return s},v.calculateDerivative=function(k,E){return E.x===k.x?0:(E.y-k.y)/(E.x-k.x)},v.calculateSafeRange=function(k,E){var s=k-E;return 0===s?1:s},v.prototype.getTooltipData=function(k){var E=_.map(k,function(te){return te.value}),s=_.min(E);return{high:_.max(E),low:s,cycle:this.getCycleText()}},v.prototype.getCycleText=function(){switch(this.cycle){case 1:return this.localizationService.get("SettingsDataset_ScheduleRefresh_RefreshFrequency_Daily");case 2:return this.localizationService.get("SettingsDataset_ScheduleRefresh_RefreshFrequency_Weekly");case 3:return this.localizationService.get("SettingsDataset_ScheduleRefresh_RefreshFrequency_Monthly");case 4:return this.localizationService.get("MetricsDetailsPane_TimePeriodTab_RadioButton_Quarterly");case 5:return this.localizationService.get("MetricsDetailsPane_TimePeriodTab_RadioButton_Yearly");default:return"-"}},v.PaddingOnEdges=1.5,v.\u0275fac=function(E){return new(E||v)(r.\u0275\u0275directiveInject(o.o))},v.\u0275cmp=r.\u0275\u0275defineComponent({type:v,selectors:[["sparkline"]],inputs:{values:"values",options:"options",formatString:"formatString",cycle:"cycle"},features:[r.\u0275\u0275NgOnChangesFeature],decls:7,vars:11,consts:[["role","img",3,"aria-label","pbiTooltip","pbiTooltipDisabled"],["fill","transparent",4,"ngIf"],[4,"ngIf"],["tooltipTmpl",""],["fill","transparent"],[1,"sparkline-tooltip"],[1,"text"],[1,"value"]],template:function(E,s){if(1&E&&(r.\u0275\u0275namespaceSVG(),r.\u0275\u0275elementStart(0,"svg",0),r.\u0275\u0275pipe(1,"localize"),r.\u0275\u0275template(2,l,1,3,"path",1),r.\u0275\u0275template(3,c,1,6,"circle",2),r.\u0275\u0275template(4,y,1,6,"circle",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(5,i,22,18,"ng-template",null,3,r.\u0275\u0275templateRefExtractor)),2&E){var ne=r.\u0275\u0275reference(6);r.\u0275\u0275property("aria-label",r.\u0275\u0275pipeBind1(1,9,"Metrics_Sparkline_AltText"))("pbiTooltip",ne)("pbiTooltipDisabled",!s.tooltip),r.\u0275\u0275attribute("width",s.settings.width)("height",s.settings.height)("viewBox",s.viewBox),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",s.path),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",s.settings.showMin&&s.min),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",s.settings.showMax&&s.max)}},dependencies:[P.NgIf,a.V,d.F,p.c],styles:['[_nghost-%COMP%]   .sparkline[_ngcontent-%COMP%]{height:100%;width:100%}  .sparkline-tooltip{padding:5px 15px}  .sparkline-tooltip .text{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-semi-bold, 600);text-align:right;padding-right:8px}  .sparkline-tooltip .value{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);text-align:left}'],changeDetection:0}),v}()},77971:function(lt,Ge,t){"use strict";t.d(Ge,{m:function(){return l}});var r=t(57535),o=t(50423),P=t(65181),a=t(77476),d=t(36858);function p(c,y){if(1&c&&(o.\u0275\u0275elementStart(0,"div",1)(1,"span",2),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd()()),2&c){var i=o.\u0275\u0275nextContext();o.\u0275\u0275styleMap(i.style),o.\u0275\u0275advance(1),o.\u0275\u0275property("pbiTooltip",i.text),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(i.text)}}var l=function(){function c(y){this.localizationService=y,this.goalStatusHelper=new r.p(this.localizationService)}return c.prototype.ngOnChanges=function(){this.configText(),this.configStyle()},c.prototype.configStyle=function(){if(this.outlineOnly){var y=r.p.getGoalStatus(this.status,this.goalStatuses).color,i=r.p.getGoalSparklineColor(y,this.isMobile,this.isDarkMode);this.style={color:void 0,"background-color":void 0,border:"1px solid ".concat(i)}}else{y=r.p.getGoalStatus(this.status,this.goalStatuses).color;var C=r.p.getGoalStatusTextColor(y,this.isMobile,this.isDarkMode),v=r.p.getGoalStatusColor(y,this.isMobile,this.isDarkMode);this.style={color:C,"background-color":v,border:"none"},this.isMobile&&!this.text.trim().length&&(this.style.visibility="hidden")}},c.prototype.configText=function(){var y,i=null===(y=r.p.getGoalStatus(this.status,this.goalStatuses))||void 0===y?void 0:y.displayName;this.text=this.goalStatusHelper.tryLocalizeDisplayName(i)},c.\u0275fac=function(i){return new(i||c)(o.\u0275\u0275directiveInject(P.o))},c.\u0275cmp=o.\u0275\u0275defineComponent({type:c,selectors:[["status-icon"]],inputs:{goalStatuses:"goalStatuses",isDarkMode:"isDarkMode",isMobile:"isMobile",outlineOnly:"outlineOnly",status:"status"},features:[o.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[["class","status",3,"style",4,"ngIf"],[1,"status"],[3,"pbiTooltip"]],template:function(i,C){1&i&&o.\u0275\u0275template(0,p,3,4,"div",0),2&i&&o.\u0275\u0275property("ngIf",C.text)},dependencies:[a.NgIf,d.V],styles:[".status[_ngcontent-%COMP%]{height:24px;line-height:24px;padding-left:10px;padding-right:10px;border-radius:12px;white-space:nowrap;text-align:center;font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400)}.status[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{white-space:nowrap;text-overflow:ellipsis;overflow:hidden;max-width:-webkit-fill-available;display:inline-block}",'mobile-scorecard-container[_nghost-%COMP%]   .status[_ngcontent-%COMP%], mobile-scorecard-container   [_nghost-%COMP%]   .status[_ngcontent-%COMP%]{height:18px;line-height:18px;padding-left:10px;padding-right:10px;border-radius:12px;white-space:nowrap;text-align:center;font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-regular, 400);font-weight:500;text-overflow:ellipsis;overflow:hidden;min-width:35px}'],changeDetection:0}),c}()},94994:function(lt,Ge,t){"use strict";t.d(Ge,{z:function(){return m}});var r=t(60042),o=t(81337),P=t(62831),a=function(){function O(I){this.scorecardService=I}return Object.defineProperty(O.prototype,"scorecard",{get:function(){return this.scorecardService.getCurrentScorecard()},enumerable:!1,configurable:!0}),O.prototype.updateScorecardStatuses=function(I){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(H){switch(H.label){case 0:return O.isLocalScorecard?(this.scorecard.goalStatuses=I.goalStatuses,this.scorecard.goalStatuses.nextId=this.scorecard.goalStatuses.statuses.length,this.commit(),[3,3]):[3,1];case 1:return[4,this.scorecardService.updateScorecard(I)];case 2:H.sent(),H.label=3;case 3:return[2]}})})},O.prototype.createCategoryListHandler=function(I){return(0,o.mG)(this,void 0,void 0,function(){var H,G;return(0,o.Jh)(this,function(Z){switch(Z.label){case 0:return O.isLocalScorecard?(_.isUndefined(this.scorecard.goalValueCategories)&&(this.scorecard.goalValueCategories=[]),H=P.q.getGoalValueCategoriesCreateRequest(I),G={id:this.scorecard.goalValueCategories.length.toString(),scorecardId:"",name:"",categories:H.categories},this.scorecard.goalValueCategories.push(G),this.commit(),[2,G]):[3,1];case 1:return[4,this.scorecardService.createCategoryList(I)];case 2:return[2,Z.sent()]}})})},O.prototype.updateCategoryListHandler=function(I){return(0,o.mG)(this,void 0,void 0,function(){var H;return(0,o.Jh)(this,function(G){switch(G.label){case 0:return O.isLocalScorecard?(H=_.findIndex(this.scorecard.goalValueCategories,function(Z){return Z.id===I.id}),this.scorecard.goalValueCategories[H]=I,this.commit(),[2,I]):[3,1];case 1:return[4,this.scorecardService.updateCategoryList(I)];case 2:return[2,G.sent()]}})})},O.prototype.deleteCategoryListHandler=function(I){return(0,o.mG)(this,void 0,void 0,function(){var H;return(0,o.Jh)(this,function(G){switch(G.label){case 0:return O.isLocalScorecard?(_.remove(this.scorecard.goalValueCategories,function(Z){return Z.id===I}),H=0,this.scorecard.goalValueCategories.forEach(function(Z){Z.id=H.toString(),H+=1}),this.commit(),[3,3]):[3,1];case 1:return[4,this.scorecardService.deleteCategoryList(I)];case 2:G.sent(),G.label=3;case 3:return[2]}})})},O.prototype.commit=function(){this.scorecardService.loadPrefetchedScorecard(this.scorecard)},O.isLocalScorecard=!1,O}(),d=t(57535),p=t(50423),l=t(17174),c=t(34340),y=t(65181),i=t(49223),C=t(77476),v=t(87650),k=t(77274),E=t(33846),s=t(85102),ne=["matSelect"];function te(O,I){if(1&O){var H=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"mat-option",6),p.\u0275\u0275listener("onSelectionChange",function(ie){p.\u0275\u0275restoreView(H);var ye=p.\u0275\u0275nextContext();return p.\u0275\u0275resetView(ye.onValueSelect(ie))}),p.\u0275\u0275text(1),p.\u0275\u0275elementEnd()}if(2&O){var G=I.$implicit;p.\u0275\u0275styleProp("background-color",G.color),p.\u0275\u0275property("value",G),p.\u0275\u0275advance(1),p.\u0275\u0275textInterpolate1(" ",G.displayName," ")}}function X(O,I){if(1&O){var H=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"div")(1,"button",7),p.\u0275\u0275listener("click",function(){p.\u0275\u0275restoreView(H);var Z=p.\u0275\u0275nextContext();return p.\u0275\u0275resetView(Z.onEdit())}),p.\u0275\u0275text(2),p.\u0275\u0275pipe(3,"localize"),p.\u0275\u0275elementEnd()()}2&O&&(p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1(" ",p.\u0275\u0275pipeBind1(3,1,"EditStatusRules_Button_Text")," "))}var m=function(){function O(I,H,G){this.detailsPaneLauncher=I,this.localizationService=H,this.scorecardService=G,this.canCustomizeStatus=!1,this.onSelect=new p.EventEmitter,this.createGoalHelper=new a(G),this.goalStatusHelper=new d.p(this.localizationService),this.defaultColor=r.xt.defaultColorPalette[0].backgroundColor,this.statusForm=new l.nJ({statusPicker:new l.p4(null)})}return O.prototype.focus=function(){this.matSelect._elementRef.nativeElement.focus()},O.prototype.onEdit=function(){var I=this;this.detailsPaneLauncher.openEditStatusesPane(this.scorecardService,function(H){return I.createGoalHelper.updateScorecardStatuses(H)},!this.canCustomizeStatus),this.matSelect.close()},O.prototype.ngOnInit=function(){this.displayGoalStatuses=this.configStatus(this.goalStatuses)},O.prototype.ngOnChanges=function(I){var H,G,Z;I.goalStatuses&&(this.displayGoalStatuses=this.configStatus(this.goalStatuses)),I.isReadOnly&&(this.isReadOnly?null===(H=this.statusForm)||void 0===H||H.get("statusPicker").disable():null===(G=this.statusForm)||void 0===G||G.get("statusPicker").enable()),I.status&&(this.currentStatus=d.p.getGoalStatus(this.status,this.goalStatuses),_.isNil(this.status)&&this.showUndefinedAsEmpty&&(this.currentStatus=void 0),null===(Z=this.statusForm.get("statusPicker"))||void 0===Z||Z.setValue(this.currentStatus)),I.showUndefinedAsEmpty&&(this.defaultColor=this.showUndefinedAsEmpty?"transparent":r.xt.defaultColorPalette[0].backgroundColor)},O.prototype.compareOptions=function(I,H){return I.id===H.id},O.prototype.onValueSelect=function(I){I.isUserInput&&(this.currentStatus=I.source.value,this.onSelect.emit(I.source.value))},O.prototype.configStatus=function(I){var H=[];if(!_.isEmpty(I))for(var G=0,Z=I;G<Z.length;G++){var ie=Z[G];if(!ie.historical){var ye={id:ie.id,displayName:this.goalStatusHelper.tryLocalizeDisplayName(ie.displayName),color:ie.color,historical:ie.historical,labelColor:ie.labelColor};H.push(ye)}}return H},O.\u0275fac=function(H){return new(H||O)(p.\u0275\u0275directiveInject(c.c),p.\u0275\u0275directiveInject(y.o),p.\u0275\u0275directiveInject(i.G))},O.\u0275cmp=p.\u0275\u0275defineComponent({type:O,selectors:[["status-picker"]],viewQuery:function(H,G){var Z;(1&H&&p.\u0275\u0275viewQuery(ne,5),2&H)&&(p.\u0275\u0275queryRefresh(Z=p.\u0275\u0275loadQuery())&&(G.matSelect=Z.first))},inputs:{canCustomizeStatus:"canCustomizeStatus",goalStatuses:"goalStatuses",status:"status",isReadOnly:"isReadOnly",onSave:"onSave",showUndefinedAsEmpty:"showUndefinedAsEmpty"},outputs:{onSelect:"onSelect"},features:[p.\u0275\u0275NgOnChangesFeature],decls:7,vars:10,consts:[[3,"formGroup"],["appearance","none"],["pbiInput","","pbiMatSelect","","disableOptionCentering","","data-testid","goal-status-picker","panelClass","goal-status-panel","formControlName","statusPicker",1,"custom-mat-select",3,"placeholder","aria-label","compareWith"],["matSelect",""],["class","custom-mat-option",3,"background-color","value","onSelectionChange",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"custom-mat-option",3,"value","onSelectionChange"],[1,"editStatus",3,"click"]],template:function(H,G){var Z;(1&H&&(p.\u0275\u0275elementStart(0,"form",0)(1,"mat-form-field",1)(2,"mat-select",2,3),p.\u0275\u0275pipe(4,"localize"),p.\u0275\u0275template(5,te,2,4,"mat-option",4),p.\u0275\u0275template(6,X,4,3,"div",5),p.\u0275\u0275elementEnd()()()),2&H)&&(p.\u0275\u0275property("formGroup",G.statusForm),p.\u0275\u0275advance(2),p.\u0275\u0275styleProp("background-color",null!==(Z=null==G.currentStatus?null:G.currentStatus.color)&&void 0!==Z?Z:G.defaultColor),p.\u0275\u0275propertyInterpolate("aria-label",p.\u0275\u0275pipeBind1(4,8,"SelectStatus")),p.\u0275\u0275property("placeholder",null==G.currentStatus?null:G.currentStatus.displayName)("compareWith",G.compareOptions),p.\u0275\u0275advance(3),p.\u0275\u0275property("ngForOf",G.displayGoalStatuses),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",G.canCustomizeStatus))},dependencies:[C.NgForOf,C.NgIf,l._Y,l.JJ,l.JL,v.v_,k.x8,E.CK,l.sg,l.u,s.F],styles:['.custom-mat-option{height:24px!important;line-height:24px!important;margin:6px 32px 6px 8px;border-radius:12px}  .custom-mat-option span{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);color:var(--fluent-theme-neutral-primary-color, #323130);text-align:center}  .mat-option.mat-active{outline:2px solid var(--fluent-theme-neutral-dark-color, #201F1E)}  .editStatus{width:100%;background-color:transparent!important;border:none;border-top:1px solid var(--gray-60, #C8C6C4);font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);color:var(--fluent-theme-neutral-primary-color, #323130)}  .editStatus:hover,   .editStatus:active{background-color:transparent!important;border-top:1px solid var(--gray-60, #C8C6C4)!important}  .goal-status-panel{margin-top:42px;margin-bottom:42px;width:100%;max-width:100%!important;min-width:100%!important;margin-left:16px;box-shadow:var(--fluent-shadow-depth8, 0px 0px 2px var(--colorNeutralShadowAmbient), 0px 4px 8px var(--colorNeutralShadowKey))!important;border-radius:2px!important;position:relative;top:-12px}[_nghost-%COMP%]     mat-form-field{width:100%!important;border:1px solid var(--gray-110, #8A8886);box-sizing:border-box;border-radius:2px;height:32px;padding:2px}[_nghost-%COMP%]     mat-form-field mat-select{border-radius:24px}[_nghost-%COMP%]     .mat-select-trigger{height:24px!important;width:100%;display:flex;align-items:center}[_nghost-%COMP%]     .custom-mat-select .mat-select-value{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);color:var(--fluent-theme-neutral-primary-color, #323130);text-align:center;border-radius:12px;margin-left:8px;margin-right:8px;line-height:24px!important;height:24px!important}[_nghost-%COMP%]     .custom-mat-select .mat-select-arrow-wrapper{font-family:PowrMDL2;font-style:normal;font-size:32px;display:inline-block;font-size:12px;margin-right:8px;color:var(--gray-140, #484644)}[_nghost-%COMP%]     .custom-mat-select .mat-select-arrow-wrapper:before{content:"\\e70d"}[_nghost-%COMP%]     .custom-mat-select .mat-select-arrow-wrapper .mat-select-arrow{display:none}[_nghost-%COMP%]     .custom-mat-select.mat-select-disabled .mat-select-arrow-wrapper{display:none}[_nghost-%COMP%]     .custom-mat-select:focus{outline:2px solid var(--fluent-theme-neutral-dark-color, #201F1E)}[_nghost-%COMP%]     .mat-select-value{width:100%;max-width:100%}[_nghost-%COMP%]     .mat-select-placeholder{color:unset}[_nghost-%COMP%]     .mat-select-value-text{font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);color:var(--fluent-theme-neutral-primary-color, #323130)}[_nghost-%COMP%]     .mat-form-field-wrapper{padding:0!important}[_nghost-%COMP%]     .mat-form-field-wrapper .mat-form-field-flex{height:unset!important}[_nghost-%COMP%]     .mat-form-field-wrapper .mat-form-field-infix{padding:0!important;border:none!important;top:1px}'],changeDetection:0}),O}()},86251:function(lt,Ge,t){"use strict";t.d(Ge,{j:function(){return d}});var r=t(50423),o=t(36858),P=t(85102),a=["*"],d=function(){function p(){this.disableTooltip=!1}return p.\u0275fac=function(c){return new(c||p)},p.\u0275cmp=r.\u0275\u0275defineComponent({type:p,selectors:[["tooltip-wrapper"]],inputs:{tooltipKey:"tooltipKey",disableTooltip:"disableTooltip"},ngContentSelectors:a,decls:3,vars:4,consts:[[1,"tooltip-wrapper",3,"pbiTooltipDisabled","pbiTooltip"]],template:function(c,y){1&c&&(r.\u0275\u0275projectionDef(),r.\u0275\u0275elementStart(0,"div",0),r.\u0275\u0275pipe(1,"localize"),r.\u0275\u0275projection(2),r.\u0275\u0275elementEnd()),2&c&&r.\u0275\u0275property("pbiTooltipDisabled",y.disableTooltip)("pbiTooltip",y.tooltipKey?r.\u0275\u0275pipeBind1(1,2,y.tooltipKey):void 0)},dependencies:[o.V,P.F],styles:["[_nghost-%COMP%], .tooltip-wrapper[_ngcontent-%COMP%]{width:100%;height:100%;flex:1;display:flex}"],changeDetection:0}),p}()},43847:function(lt,Ge,t){"use strict";t.d(Ge,{$:function(){return ge}});var r=t(81337),o=t(21661),P=t(94585),a=t(50423),d=t(15015),p=t(11547),l=t(57243),c=t(81905),y=t(22318),i=t(14172),C=t(77476),v=t(698),k=t(44408),E=t(36858),s=t(64832),ne=t(85102),te=["headers"];function X(se,De){if(1&se){var fe=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"button",14),a.\u0275\u0275listener("click",function(Fe){a.\u0275\u0275restoreView(fe);var ze=a.\u0275\u0275nextContext(3);return a.\u0275\u0275resetView(ze.onToggleExpandAll(Fe))}),a.\u0275\u0275pipe(1,"localize"),a.\u0275\u0275element(2,"mat-icon",15),a.\u0275\u0275elementEnd()}if(2&se){var Oe=a.\u0275\u0275nextContext(3);a.\u0275\u0275classProp("expanded",Oe.showAllExpanded),a.\u0275\u0275property("pbiTooltip",a.\u0275\u0275pipeBind1(1,3,Oe.showAllExpanded?"FieldListMenuItem_CollapseAll":"FieldListMenuItem_ExpandAll"))}}function m(se,De){if(1&se&&(a.\u0275\u0275elementStart(0,"div"),a.\u0275\u0275template(1,X,3,5,"button",13),a.\u0275\u0275pipe(2,"async"),a.\u0275\u0275elementEnd()),2&se){var fe=a.\u0275\u0275nextContext(2),Oe=a.\u0275\u0275reference(9);a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",a.\u0275\u0275pipeBind1(2,2,fe.canExpandAll$))("ngIfElse",Oe)}}var O=function(De){return{column:De}};function I(se,De){if(1&se&&a.\u0275\u0275elementContainer(0,16),2&se){var fe=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275property("ngTemplateOutlet",fe.headerTemplate)("ngTemplateOutletContext",a.\u0275\u0275pureFunction1(2,O,fe))}}function H(se,De){if(1&se&&(a.\u0275\u0275elementStart(0,"div",17),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&se){var fe=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate(fe.name)}}function G(se,De){if(1&se){var fe=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",18),a.\u0275\u0275listener("columnResized",function(be){a.\u0275\u0275restoreView(fe);var Fe=a.\u0275\u0275nextContext().index,ze=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(ze.onColumnResized(be,Fe))}),a.\u0275\u0275elementEnd()}}function Z(se,De){if(1&se&&(a.\u0275\u0275elementStart(0,"div",8),a.\u0275\u0275template(1,m,3,4,"div",9),a.\u0275\u0275template(2,I,1,4,"ng-container",10),a.\u0275\u0275template(3,H,2,1,"ng-template",null,11,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275template(5,G,1,0,"div",12),a.\u0275\u0275elementEnd()),2&se){var fe=De.$implicit,Oe=De.index,be=a.\u0275\u0275reference(4),Fe=a.\u0275\u0275nextContext();a.\u0275\u0275styleProp("width",fe.width,"px"),a.\u0275\u0275classProp("sticky-left",Fe.stickyFirstColumn&&0===Oe),a.\u0275\u0275property("ngClass",fe.class)("ngStyle",fe.style),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",0===Oe),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",!!fe.headerTemplate)("ngIfElse",be),a.\u0275\u0275advance(3),a.\u0275\u0275property("ngIf",!1!==fe.resizable)}}function ie(se,De){1&se&&a.\u0275\u0275elementContainer(0)}function ye(se,De){if(1&se){var fe=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"button",24),a.\u0275\u0275listener("dblclick",function(ze){return ze.stopPropagation()})("click",function(ze){a.\u0275\u0275restoreView(fe);var Ke=a.\u0275\u0275nextContext(3).$implicit,je=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(je.onExpandNode(Ke,ze))}),a.\u0275\u0275elementEnd()}if(2&se){var Oe=a.\u0275\u0275nextContext(3).$implicit,be=a.\u0275\u0275nextContext();a.\u0275\u0275classProp("expanded",be.treeControl.isExpanded(Oe))}}function ae(se,De){if(1&se&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275elementStart(1,"div",22),a.\u0275\u0275template(2,ye,1,2,"button",23),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementContainerEnd()),2&se){var fe=a.\u0275\u0275nextContext(2).$implicit,Oe=a.\u0275\u0275nextContext(),be=a.\u0275\u0275reference(9);a.\u0275\u0275advance(1),a.\u0275\u0275property("cdkTreeNodePaddingIndent",Oe.paddingIndent),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",fe.expandable)("ngIfElse",be)}}var J=function(De,fe){return{column:De,data:fe}};function N(se,De){if(1&se&&(a.\u0275\u0275elementStart(0,"div",21),a.\u0275\u0275template(1,ae,3,3,"ng-container",9),a.\u0275\u0275elementContainer(2,16),a.\u0275\u0275elementEnd()),2&se){var fe=De.$implicit,Oe=De.index,be=a.\u0275\u0275nextContext().$implicit,Fe=a.\u0275\u0275nextContext();a.\u0275\u0275styleProp("width",fe.width,"px"),a.\u0275\u0275classProp("sticky-left",Fe.stickyFirstColumn&&0===Oe),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",0===Oe),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngTemplateOutlet",fe.cellTemplate)("ngTemplateOutletContext",a.\u0275\u0275pureFunction2(7,J,fe,be))}}function he(se,De){if(1&se){var fe=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"cdk-tree-node",19),a.\u0275\u0275listener("click",function(ze){var je=a.\u0275\u0275restoreView(fe).$implicit;return a.\u0275\u0275resetView(je.onClick?je.onClick(ze):void 0)}),a.\u0275\u0275template(1,N,3,10,"div",20),a.\u0275\u0275elementEnd()}if(2&se){var Oe=De.$implicit,be=a.\u0275\u0275nextContext();a.\u0275\u0275styleMap(Oe.style),a.\u0275\u0275classMap(Oe.class),a.\u0275\u0275styleProp("height",be.rowHeight,"px")("margin-bottom",be.rowSpacing,"px"),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngForOf",be.columns)("ngForTrackBy",be.trackByColumn)}}function pe(se,De){1&se&&a.\u0275\u0275element(0,"div",25)}var ge=function(){function se(){var De=this;this.minBufferPx=400,this.maxBufferPx=1e3,this.enableRowVirtualization=!0,this.onResizeTreeList=new a.EventEmitter,this.onResizeColumn=new a.EventEmitter,this.onExpansionChange=new a.EventEmitter,this.columns=[],this.expandedNodeIds=[],this.rowHeight=50,this.rowSpacing=10,this.paddingIndent=15,this.getChildren=function(fe){return fe.children},this.rowHash=function(fe,Oe){return Oe.id},this.treeControl=new P.C2(function(fe){return fe.level},function(fe){return fe.expandable},{trackBy:function(Oe){return Oe.id}}),this.nodeFlatMapper=function(fe,Oe){return(0,r.pi)((0,r.pi)({},fe),{level:Oe,expandable:_.size(De.getChildren(fe))>0})}}return se.prototype.ngAfterViewInit=function(){var De,fe=this;this.treeFlattener=new d.JZ(this.nodeFlatMapper,function(Oe){return Oe.level},function(Oe){return Oe.expandable},this.getChildren),this.dataSource=new d.kc(this.treeControl,this.treeFlattener),this.allRows$=this.dataSource.connect(this.cdkTree).pipe((0,l.d)(1)),this.visibleItems$=this.allRows$.pipe((0,c.w)(function(Oe){return fe.enableRowVirtualization?fe.viewport.renderedRangeStream.pipe((0,y.O)(fe.viewport.getRenderedRange()),(0,i.U)(function(be){return Oe.slice(be.start,be.end)})):(0,p.of)(Oe)})),this.dataSource.data=this.data,(De=this.treeControl.expansionModel).select.apply(De,this.expandedNodeIds),this.setShowExpandAll(),this.canExpandAll$=this.allRows$.pipe((0,i.U)(function(Oe){return _.some(Oe,function(be){return be.expandable})})),this.expansionSub=this.treeControl.expansionModel.changed.subscribe(function(Oe){fe.setShowExpandAll(),fe.onExpansionChange.emit(Oe)})},se.prototype.ngOnChanges=function(De){De.data&&this.dataSource&&(this.dataSource.data=this.data,this.setShowExpandAll()),(De.rowHeight||De.rowSpacing)&&(this.totalRowHeight=this.rowHeight+this.rowSpacing)},se.prototype.ngOnDestroy=function(){var De;null===(De=this.expansionSub)||void 0===De||De.unsubscribe()},se.prototype.onExpandNode=function(De,fe){this.treeControl.toggle(De),fe.stopPropagation()},se.prototype.onToggleExpandAll=function(){var De;this.showAllExpanded?this.treeControl.collapseAll():(De=this.treeControl.expansionModel).select.apply(De,this.getExpandableNodeIds())},se.prototype.trackByColumn=function(De,fe){return fe.key},se.prototype.trackById=function(De,fe){return fe.id},se.prototype.scroll=function(){this.headers.nativeElement.scrollLeft=this.viewport.measureScrollOffset("left")},se.prototype.onTreeListResized=function(De){var fe=this;requestAnimationFrame(function(){fe.onResizeTreeList.emit(De)})},se.prototype.onColumnResized=function(De,fe){var Oe=this;requestAnimationFrame(function(){Oe.onResizeColumn.emit({column:fe,width:Math.max(60,De)})})},se.prototype.setShowExpandAll=function(){var De=this,fe=_.filter(this.treeControl.dataNodes,function(be){return be.expandable&&De.treeControl.isExpanded(be)}).length,Oe=this.getExpandableNodeIds().length;0===fe?this.showAllExpanded=!1:fe===Oe&&(this.showAllExpanded=!0)},se.prototype.getExpandableNodeIds=function(){return _.map(_.filter(this.treeControl.dataNodes,function(De){return De.expandable}),function(De){return De.id})},se.\u0275fac=function(fe){return new(fe||se)},se.\u0275cmp=a.\u0275\u0275defineComponent({type:se,selectors:[["tree-list"]],viewQuery:function(fe,Oe){if(1&fe&&(a.\u0275\u0275viewQuery(P._0,7),a.\u0275\u0275viewQuery(o.N7,7),a.\u0275\u0275viewQuery(te,5)),2&fe){var be=void 0;a.\u0275\u0275queryRefresh(be=a.\u0275\u0275loadQuery())&&(Oe.cdkTree=be.first),a.\u0275\u0275queryRefresh(be=a.\u0275\u0275loadQuery())&&(Oe.viewport=be.first),a.\u0275\u0275queryRefresh(be=a.\u0275\u0275loadQuery())&&(Oe.headers=be.first)}},inputs:{columns:"columns",data:"data",expandedNodeIds:"expandedNodeIds",rowHeight:"rowHeight",rowSpacing:"rowSpacing",paddingIndent:"paddingIndent",getChildren:"getChildren",rowHash:"rowHash",stickyFirstColumn:"stickyFirstColumn"},outputs:{onResizeTreeList:"onResizeTreeList",onResizeColumn:"onResizeColumn",onExpansionChange:"onExpansionChange"},features:[a.\u0275\u0275NgOnChangesFeature],decls:10,vars:12,consts:[[1,"column-headers"],["headers",""],["class","header",3,"ngClass","ngStyle","sticky-left","width",4,"ngFor","ngForOf","ngForTrackBy"],["tabindex","-1",3,"itemSize","minBufferPx","maxBufferPx","scroll","on-resize"],[4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],[3,"dataSource","treeControl","trackBy"],["class","row",3,"class","style","height","margin-bottom","click",4,"cdkTreeNodeDef"],["expanderPlaceholder",""],[1,"header",3,"ngClass","ngStyle"],[4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf","ngIfElse"],["name",""],["class","resize-handle","resize-column","",3,"columnResized",4,"ngIf"],["tabindex","-1","class","expander expander-all",3,"pbiTooltip","expanded","click",4,"ngIf","ngIfElse"],["tabindex","-1",1,"expander","expander-all",3,"pbiTooltip","click"],["fontIcon","pbi-glyph-doublechevrondown",1,"glyphicon","glyph-mini"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"name"],["resize-column","",1,"resize-handle",3,"columnResized"],[1,"row",3,"click"],["class","cell","role","cell",3,"sticky-left","width",4,"ngFor","ngForOf","ngForTrackBy"],["role","cell",1,"cell"],["cdkTreeNodePadding","",1,"tree-node-padding",3,"cdkTreeNodePaddingIndent"],["tabindex","-1","class","glyphicon expander",3,"expanded","dblclick","click",4,"ngIf","ngIfElse"],["tabindex","-1",1,"glyphicon","expander",3,"dblclick","click"],[1,"expander-placeholder"]],template:function(fe,Oe){1&fe&&(a.\u0275\u0275elementStart(0,"div",0,1),a.\u0275\u0275template(2,Z,6,10,"div",2),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(3,"cdk-virtual-scroll-viewport",3),a.\u0275\u0275listener("scroll",function(){return Oe.scroll()})("on-resize",function(Fe){return Oe.onTreeListResized(Fe)}),a.\u0275\u0275template(4,ie,1,0,"ng-container",4),a.\u0275\u0275pipe(5,"async"),a.\u0275\u0275elementStart(6,"cdk-tree",5),a.\u0275\u0275template(7,he,2,10,"cdk-tree-node",6),a.\u0275\u0275elementEnd()(),a.\u0275\u0275template(8,pe,1,0,"ng-template",null,7,a.\u0275\u0275templateRefExtractor)),2&fe&&(a.\u0275\u0275advance(2),a.\u0275\u0275property("ngForOf",Oe.columns)("ngForTrackBy",Oe.trackByColumn),a.\u0275\u0275advance(1),a.\u0275\u0275property("itemSize",Oe.totalRowHeight)("minBufferPx",Oe.minBufferPx)("maxBufferPx",Oe.maxBufferPx),a.\u0275\u0275advance(1),a.\u0275\u0275property("cdkVirtualForOf",a.\u0275\u0275pipeBind1(5,10,Oe.allRows$))("cdkVirtualForTrackBy",Oe.trackById),a.\u0275\u0275advance(2),a.\u0275\u0275property("dataSource",Oe.visibleItems$)("treeControl",Oe.treeControl)("trackBy",Oe.rowHash))},dependencies:[C.NgClass,C.NgForOf,C.NgIf,C.NgTemplateOutlet,C.NgStyle,P.rO,P.XJ,P._0,P.Hs,v.O,k.Hw,E.V,o.xd,o.x0,o.N7,s.B,C.AsyncPipe,ne.F],styles:['[_nghost-%COMP%]{--headerHeight: 40px;--expanderWidth: 48px;--column-headers-backgroundColor: var(--fluent-theme-white-color);--column-headers-foregroundColor: var(--fluent-theme-neutral-primary-color);--row-backgroundColor: var(--fluent-theme-white-color);--row-foregroundColor: var(--fluent-theme-neutral-primary-color);display:flex;flex-direction:column}cdk-virtual-scroll-viewport[_ngcontent-%COMP%]{flex:1;width:100%;max-width:100%;display:block}cdk-virtual-scroll-viewport[_ngcontent-%COMP%]:focus{outline:none}cdk-tree-node[_ngcontent-%COMP%]{display:block}.column-headers[_ngcontent-%COMP%]{margin:0;display:flex;padding:8px 0;height:var(--headerHeight);box-sizing:border-box;align-items:center;background-color:var(--column-headers-backgroundColor);color:var(--column-headers-foregroundColor);width:100%;overflow:hidden;z-index:2}.column-headers[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--lg-font-size, 16px);font-weight:var(--font-weight-regular, 400);font-weight:550;position:relative;border-right:solid 1px var(--gray-70, #BEBBB8);box-sizing:border-box;display:flex;flex-grow:0;flex-shrink:0;overflow:hidden}.column-headers[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.column-headers[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .resize-handle[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;opacity:0;width:10px;cursor:col-resize}.sticky-left[_ngcontent-%COMP%]{position:sticky!important;left:0;z-index:1!important}.sticky-left.cell[_ngcontent-%COMP%]{background-color:var(--row-backgroundColor)}.sticky-left.header[_ngcontent-%COMP%]{background-color:var(--column-headers-backgroundColor)}.row[_ngcontent-%COMP%], .cell[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;flex-grow:0;flex-shrink:0;z-index:0;box-sizing:border-box}.row[_ngcontent-%COMP%]{background-color:var(--row-backgroundColor);color:var(--row-foregroundColor);width:fit-content}.cell[_ngcontent-%COMP%]{overflow:hidden;height:100%}.tree-node-padding[_ngcontent-%COMP%]{height:100%}.expander-placeholder[_ngcontent-%COMP%]{width:var(--expanderWidth);flex-shrink:0}.expander[_ngcontent-%COMP%]{color:var(--gray-180, #252423);transition:transform ease .15s;transform:rotate(-90deg);font-size:var(--sm-font-size, 12px);width:var(--expanderWidth);padding:0 16px;background:transparent;outline:none;display:inline-flex;align-items:center;justify-content:center;height:100%;border:none}.expander.glyphicon[_ngcontent-%COMP%]:before{content:"\\e70d"}.expander.expanded[_ngcontent-%COMP%]{transform:none}.expander[_ngcontent-%COMP%]:focus, .expander[_ngcontent-%COMP%]:hover, .expander[_ngcontent-%COMP%]:focus:hover{background:transparent}.expander[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{padding:2px;font-size:12px;height:unset}'],changeDetection:0}),se}()},81437:function(lt,Ge,t){"use strict";t.d(Ge,{V:function(){return X}});var r=t(81337),o=t(73221),P=t(59017),a=t(14172),d=t(83317),p=t(50423),l=t(49223),c=t(87426),y=t(9380),i=t(77476),C=t(59968),v=t(50057),k=t(44408),E=t(55710),s=function(O){return{active:O}};function ne(m,O){if(1&m&&(p.\u0275\u0275elementStart(0,"button",4,5),p.\u0275\u0275element(2,"mat-icon",6)(3,"span",7),p.\u0275\u0275elementEnd()),2&m){var I=p.\u0275\u0275reference(1),H=p.\u0275\u0275nextContext(),G=p.\u0275\u0275reference(2);p.\u0275\u0275property("matMenuTriggerFor",G)("ngClass",p.\u0275\u0275pureFunction1(4,s,!0===I.menuOpen)),p.\u0275\u0275advance(2),p.\u0275\u0275property("fontIcon",H.selectedOption.icon),p.\u0275\u0275advance(1),p.\u0275\u0275property("localize",H.selectedOption.label)}}function te(m,O){if(1&m){var I=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"button",8),p.\u0275\u0275listener("click",function(){var ye=p.\u0275\u0275restoreView(I).$implicit,ae=p.\u0275\u0275nextContext();return p.\u0275\u0275resetView(ae.onSwitchView(ye.value))}),p.\u0275\u0275element(1,"mat-icon",6)(2,"span",9),p.\u0275\u0275elementEnd()}if(2&m){var H=O.$implicit,G=p.\u0275\u0275nextContext();p.\u0275\u0275property("disabled",G.viewType===H.value),p.\u0275\u0275advance(1),p.\u0275\u0275property("fontIcon",H.icon),p.\u0275\u0275advance(1),p.\u0275\u0275property("localize",H.label)("localizeTooltip",H.label)}}var X=function(m){function O(I,H,G,Z){var ie=m.call(this)||this;ie.scorecardService=I,ie.hierarchyService=H,ie.featureSwitches=G,ie.changeDetector=Z;var ye=ie.featureSwitches.featureSwitches.scorecardCompactView,ae=ie.featureSwitches.featureSwitches.metricsBoardView,J=ie.hierarchyService.hasHierarchies$.pipe((0,a.U)(function(N){return ie.featureSwitches.featureSwitches.goalsHierarchies&&ie.featureSwitches.featureSwitches.goalsHierarchiesHeatmap&&N}),(0,d.R)(ie.onDestroy$));return(0,P.aj)([ie.scorecardService.viewType$,J]).pipe((0,d.R)(ie.onDestroy$)).subscribe(function(N){ie.updateViewOptions(N[0],ye,N[1],ae)}),ie}return(0,r.ZT)(O,m),O.prototype.onSwitchView=function(I){this.scorecardService.setViewType(I)},O.prototype.updateViewOptions=function(I,H,G,Z){var ie=[{value:"List",label:"ListView",icon:"pbi-glyph-allapps"}];H&&ie.push({value:"Compact",label:"Scorecard_CompactView_Preview",icon:"pbi-glyph-allapps"}),Z&&ie.push({value:"Board",label:"Display_Mode_Board_View",icon:"pbi-glyph-table"}),G&&ie.push({value:"Heatmap",label:"MetricsHeatmap_Preview",icon:"pbi-glyph-table"}),this.options=ie,this.showViewSwitcher=ie.length>1,this.viewType=I,this.selectedOption=ie.find(function(ye){return ye.value===I}),this.changeDetector.markForCheck()},O.\u0275fac=function(H){return new(H||O)(p.\u0275\u0275directiveInject(l.G),p.\u0275\u0275directiveInject(c.G),p.\u0275\u0275directiveInject(y.vZ),p.\u0275\u0275directiveInject(p.ChangeDetectorRef))},O.\u0275cmp=p.\u0275\u0275defineComponent({type:O,selectors:[["view-switcher"]],features:[p.\u0275\u0275InheritDefinitionFeature],decls:4,vars:3,consts:[["cdkMonitorElementFocus","","mat-button","","aria-expanded","viewSwitcherMenuTrigger.menuOpen === true","class","view-mode-picker pbi-fluent-button",3,"matMenuTriggerFor","ngClass",4,"ngIf"],[1,"view-mode-picker-menu",3,"overlapTrigger"],["viewSwitcherMenu","matMenu"],["mat-menu-item","","class","pbi-fluent-button",3,"disabled","click",4,"ngFor","ngForOf"],["cdkMonitorElementFocus","","mat-button","","aria-expanded","viewSwitcherMenuTrigger.menuOpen === true",1,"view-mode-picker","pbi-fluent-button",3,"matMenuTriggerFor","ngClass"],["viewSwitcherMenuTrigger","matMenuTrigger"],[1,"glyphicon","glyph-small",3,"fontIcon"],[3,"localize"],["mat-menu-item","",1,"pbi-fluent-button",3,"disabled","click"],[3,"localize","localizeTooltip"]],template:function(H,G){1&H&&(p.\u0275\u0275template(0,ne,4,6,"button",0),p.\u0275\u0275elementStart(1,"mat-menu",1,2),p.\u0275\u0275template(3,te,3,4,"button",3),p.\u0275\u0275elementEnd()),2&H&&(p.\u0275\u0275property("ngIf",G.showViewSwitcher&&G.selectedOption),p.\u0275\u0275advance(1),p.\u0275\u0275property("overlapTrigger",!1),p.\u0275\u0275advance(2),p.\u0275\u0275property("ngForOf",G.options))},dependencies:[i.NgClass,i.NgForOf,i.NgIf,C.X,v.r,k.Hw,E.W0,E.tN,E.D8],styles:[".view-mode-picker[_ngcontent-%COMP%]{border:none;display:inline-flex;align-items:center;background-color:var(--fluent-theme-neutral-lighter-alt-color, #FAF9F8)}.view-mode-picker[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{overflow:visible}.view-mode-picker[_ngcontent-%COMP%]   .mat-icon.glyph-small[_ngcontent-%COMP%]{font-size:var(--lg-font-size, 16px);width:var(--lg-font-size, 16px);height:var(--lg-font-size, 16px)}.view-mode-picker[_ngcontent-%COMP%]   .mat-icon.glyph-mini[_ngcontent-%COMP%]{font-size:var(--sm-font-size, 12px);width:var(--sm-font-size, 12px);height:var(--sm-font-size, 12px)}.view-mode-picker[_ngcontent-%COMP%]   .mat-icon.mat-ligature-font[fontIcon][_ngcontent-%COMP%]{overflow:auto}.view-mode-picker[_ngcontent-%COMP%]:hover{background-color:var(--gray-20, #F3F2F1)}.view-mode-picker[_ngcontent-%COMP%]:active{background-color:var(--gray-30, #EDEBE9)}.view-mode-picker[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-weight:400;margin-right:8px;color:var(--fluent-theme-black-color, #000)}  .mat-menu-panel.view-mode-picker-menu .mat-menu-content{padding:0}.mat-menu-item[_ngcontent-%COMP%]{color:var(--gray-180, #252423);display:flex;flex-direction:row;align-items:center;height:36px;padding-right:16px}.mat-menu-item[_ngcontent-%COMP%]:disabled{background:transparent;color:var(--gray-80, #B3B0AD)}"],changeDetection:0}),O}(o.w)},64832:function(lt,Ge,t){"use strict";t.d(Ge,{B:function(){return o}});var r=t(50423),o=function(){function P(){this.columnResized=new r.EventEmitter}return P.prototype.onMouseDown=function(a){return this.isResizing=!0,this.pageX=a.pageX,this.initialWidth=a.target.parentElement.offsetWidth,document.body.style.cursor="col-resize",a.stopPropagation(),!1},P.prototype.onDragStart=function(){return!1},P.prototype.onMouseMove=function(a){return!this.isResizing||(this.columnResized.emit(Math.max(0,this.initialWidth+a.pageX-this.pageX)),a.stopPropagation(),!1)},P.prototype.onMouseLeave=function(a){return!this.isResizing||(this.isResizing=!1,document.body.style.cursor="",a.stopPropagation(),!1)},P.\u0275fac=function(d){return new(d||P)},P.\u0275dir=r.\u0275\u0275defineDirective({type:P,selectors:[["","resize-column",""]],hostBindings:function(d,p){1&d&&r.\u0275\u0275listener("mousedown",function(c){return p.onMouseDown(c)})("touchstart",function(c){return p.onMouseDown(c)})("dragstart",function(){return p.onDragStart()})("mousemove",function(c){return p.onMouseMove(c)},!1,r.\u0275\u0275resolveWindow)("touchmove",function(c){return p.onMouseMove(c)},!1,r.\u0275\u0275resolveWindow)("mouseup",function(c){return p.onMouseLeave(c)},!1,r.\u0275\u0275resolveWindow)("mouseleave",function(c){return p.onMouseLeave(c)},!1,r.\u0275\u0275resolveWindow)("touchend",function(c){return p.onMouseLeave(c)},!1,r.\u0275\u0275resolveWindow)},outputs:{columnResized:"columnResized"}}),P}()},57162:function(lt,Ge,t){"use strict";t.r(Ge),t.d(Ge,{GoalsUIModule:function(){return Gi}});var r=t(81337),o=t(87758),P=t(4716),a=t(95594),d=t(11891),p=t(64661),l=t(49048),c=t(76654),y=t(35328),i=t(85953),C=t(67090),v=t(74161),k=t(95027),E=t(44603),s=t(50423),ne=t(82621),te=t(65181),X=t(77476),m=t(17174),O=t(87650),I=t(77274),H=t(33846),G=t(85102),Z=["input"];function ie(Ie,et){if(1&Ie){var xe=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"input",2,3),s.\u0275\u0275listener("focus",function(){s.\u0275\u0275restoreView(xe);var Yt=s.\u0275\u0275nextContext();return s.\u0275\u0275resetView(Yt.onInputFocus())})("blur",function(){s.\u0275\u0275restoreView(xe);var Yt=s.\u0275\u0275nextContext();return s.\u0275\u0275resetView(Yt.onInputBlur())})("keyup.enter",function(){s.\u0275\u0275restoreView(xe);var Yt=s.\u0275\u0275nextContext();return s.\u0275\u0275resetView(Yt.keyupEnter())})("ngModelChange",function(Yt){s.\u0275\u0275restoreView(xe);var dn=s.\u0275\u0275nextContext();return s.\u0275\u0275resetView(dn.onInputChanged(Yt))}),s.\u0275\u0275elementEnd()}if(2&Ie){var dt=s.\u0275\u0275nextContext();s.\u0275\u0275propertyInterpolate("type",dt.inputType),s.\u0275\u0275property("disabled",dt.isReadOnly)("placeholder",dt.placeholder)("ngModel","text"==dt.inputType?dt.formattedValue:dt.value),s.\u0275\u0275attribute("aria-label",dt.placeholder)}}function ye(Ie,et){if(1&Ie&&(s.\u0275\u0275elementStart(0,"mat-option",7),s.\u0275\u0275text(1),s.\u0275\u0275elementEnd()),2&Ie){var xe=et.$implicit;s.\u0275\u0275property("value",et.index),s.\u0275\u0275advance(1),s.\u0275\u0275textInterpolate1(" ",xe.displayName," ")}}function ae(Ie,et){if(1&Ie){var xe=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"mat-form-field",4)(1,"mat-select",5),s.\u0275\u0275listener("selectionChange",function(Yt){s.\u0275\u0275restoreView(xe);var dn=s.\u0275\u0275nextContext();return s.\u0275\u0275resetView(dn.onSelectChanged(Yt))})("keyup.enter",function(){s.\u0275\u0275restoreView(xe);var Yt=s.\u0275\u0275nextContext();return s.\u0275\u0275resetView(Yt.keyupEnter())}),s.\u0275\u0275pipe(2,"localize"),s.\u0275\u0275template(3,ye,2,2,"mat-option",6),s.\u0275\u0275elementEnd()()}if(2&Ie){var dt=s.\u0275\u0275nextContext();s.\u0275\u0275advance(1),s.\u0275\u0275property("disabled",dt.isReadOnly)("value",dt.value)("placeholder",s.\u0275\u0275pipeBind1(2,4,"Generic_Select_Value")),s.\u0275\u0275advance(2),s.\u0275\u0275property("ngForOf",dt.categories)}}var J=function(){function Ie(et,xe){this.formatValuePipe=et,this.localizationService=xe,this.placeholder="",this.type="number",this.onValueChanged=new s.EventEmitter,this.onInputKeyEnter=new s.EventEmitter,this.inputType="text",this.defaultDateFormat={day:"numeric",month:"short",year:"numeric"}}return Ie.prototype.ngOnInit=function(){this.categories||this.showFormattedValue()},Ie.prototype.onInputFocus=function(){this.inputType=this.type},Ie.prototype.onInputBlur=function(){this.showFormattedValue()},Ie.prototype.onInputChanged=function(et){this.value=et,this.formattedValue=this.formatValue(et),this.onValueChanged.emit(this.value)},Ie.prototype.onSelectChanged=function(et){this.value=et.value,this.onValueChanged.emit(this.value)},Ie.prototype.keyupEnter=function(){this.onInputKeyEnter&&this.onInputKeyEnter.emit()},Ie.prototype.focus=function(){var et,xe;null===(xe=null===(et=this.inputElement)||void 0===et?void 0:et.nativeElement)||void 0===xe||xe.focus()},Ie.prototype.showFormattedValue=function(){this.inputType="text",this.formattedValue=this.formatValue(this.value),"date"===this.type&&!this.formattedValue&&(this.inputType="date")},Ie.prototype.formatValue=function(et){var xe;if("number"===this.type)return this.formatValuePipe.transform(et,this.formatString,!0,"");if(!et)return"";var dt=this.localizationService.currentLanguageLocale;return E.E.treatAsLocalDate(new Date(et)).toLocaleDateString(dt,null!==(xe=this.dateFormat)&&void 0!==xe?xe:this.defaultDateFormat)},Ie.\u0275fac=function(xe){return new(xe||Ie)(s.\u0275\u0275directiveInject(ne.c),s.\u0275\u0275directiveInject(te.o))},Ie.\u0275cmp=s.\u0275\u0275defineComponent({type:Ie,selectors:[["formatted-input"]],viewQuery:function(xe,dt){var At;(1&xe&&s.\u0275\u0275viewQuery(Z,5),2&xe)&&(s.\u0275\u0275queryRefresh(At=s.\u0275\u0275loadQuery())&&(dt.inputElement=At.first))},inputs:{placeholder:"placeholder",value:"value",formatString:"formatString",isReadOnly:"isReadOnly",type:"type",dateFormat:"dateFormat",categories:"categories"},outputs:{onValueChanged:"onValueChanged",onInputKeyEnter:"onInputKeyEnter"},decls:3,vars:2,consts:[["class","input-value","step","any",3,"disabled","placeholder","type","ngModel","focus","blur","keyup.enter","ngModelChange",4,"ngIf","ngIfElse"],["categoricalTarget",""],["step","any",1,"input-value",3,"disabled","placeholder","type","ngModel","focus","blur","keyup.enter","ngModelChange"],["input",""],["appearance","none",1,"select-category"],["panelClass","goals-categorical-value-select",1,"number-select",3,"disabled","value","placeholder","selectionChange","keyup.enter"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(xe,dt){if(1&xe&&(s.\u0275\u0275template(0,ie,2,5,"input",0),s.\u0275\u0275template(1,ae,4,6,"ng-template",null,1,s.\u0275\u0275templateRefExtractor)),2&xe){var At=s.\u0275\u0275reference(2);s.\u0275\u0275property("ngIf",!dt.categories)("ngIfElse",At)}},dependencies:[X.NgForOf,X.NgIf,m.Fj,m.JJ,m.On,O.v_,I.x8,H.CK,G.F],styles:["[_ngcontent-%COMP%]::-webkit-outer-spin-button, [_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}input[_ngcontent-%COMP%], mat-form-field[_ngcontent-%COMP%]{width:100%}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}"],changeDetection:0}),Ie}(),N=t(69205),he=t(44628),pe=t(56809),ce=t(42989),ge=t(33567),se=t(88940),De=t(14463),fe=t(47245),Oe=t(61036),be=t(29589),Fe=t(47508),ze=t(39681),Ke=t(78843),je=t(61289),He=t(94419),Je=t(80777),j=t(40956),nt=t(2330),Ue=t(29866),oe=t(98136),h=t(12338),g=t(698);function u(Ie,et){if(1&Ie){var xe=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"visual-modern",2),s.\u0275\u0275listener("on-resize",function(Yt){s.\u0275\u0275restoreView(xe);var dn=s.\u0275\u0275nextContext();return s.\u0275\u0275resetView(dn.onResize(Yt))}),s.\u0275\u0275elementEnd()}if(2&Ie){var dt=s.\u0275\u0275nextContext();s.\u0275\u0275property("viewModel",dt.visualDefinition)("useOnPushChangeDetection",!0)}}var F=function(){function Ie(et,xe,dt,At,Yt,dn,ln,Jn){this.geocoder=et,this.geolocation=xe,this.localizationService=dt,this.moduleLoader=At,this.promiseFactory=Yt,this.visualPlugin=dn,this.visualHostTooltipServiceFactory=ln,this.changeDetector=Jn,this.initialVisualWidth=360,this.initialVisualHeight=172}return Ie.prototype.ngOnInit=function(){var et=this;this.visualPlugin.ensureBuiltInPlugins().then(function(){et.initializeVisual(),et.isLoaded=!0,et.changeDetector.detectChanges()})},Ie.prototype.ngOnChanges=function(et){et.values&&(this.generateDataView(),this.update())},Ie.prototype.initializeVisual=function(){var et=this,xe=(0,ze.ED)((0,fe.q)({geocoder:this.geocoder,geolocation:this.geolocation,localizationService:this.localizationService,moduleLoader:this.moduleLoader,promiseFactory:this.promiseFactory,visualHostTooltipService:this.visualHostTooltipServiceFactory.create(),getAzureMapToken:void 0,azureMapsEndpoint:void 0,geocoderIndexedDB:void 0}),function(dt){dt.getLocalizedString=function(At){for(var Yt,dn=[],ln=1;ln<arguments.length;ln++)dn[ln-1]=arguments[ln];return(Yt=et.localizationService).format.apply(Yt,(0,r.ev)([At],dn||[],!1))},dt.getViewMode=function(){return 0},dt.locale=function(){return(0,Oe.uD)()},dt.promiseFactory=function(){return et.promiseFactory}});this.visualDefinition={interactivityOptions:{},type:Fe.L.kpi.name,allowInvalidDataView:!0,themeCollection:void 0,viewport:{height:this.initialVisualHeight,width:this.initialVisualWidth,scale:1},dataTransforms:void 0,hostServices:xe,visualAdapterHostServices:{startProgressBar:_.noop,stopProgressBar:_.noop,getNextDataSegment:function(){return(0,r.mG)(et,void 0,void 0,function(){return(0,r.Jh)(this,function(At){return[2,{}]})})}},stylePresetName:void 0,additionalObjectUpdates:_.noop,visualPlugin:this.visualPlugin},this.generateDataView(),this.update()},Ie.prototype.update=function(){this.visualDefinition&&(this.visualDefinition.data={dataView:this.dataView})},Ie.prototype.onResize=function(et){this.visualDefinition&&(this.visualDefinition.viewport={width:et.width,height:et.height,scale:1})},Ie.prototype.generateDataView=function(){var et,xe,dt=((et={})[be.iu.objectName]=((xe={})[be.iu.propertyName]=this.formatString,xe),et),At=[{displayName:this.localizationService.get("Date"),type:Je.Ge.fromPrimitiveTypeAndCategory(6),roles:{TrendLine:!0}},{displayName:this.localizationService.get("Value"),type:Je.Ge.fromPrimitiveTypeAndCategory(3),roles:{Indicator:!0},index:0,objects:dt},{displayName:this.localizationService.get("MetricsName_New_Singular"),type:Je.Ge.fromPrimitiveTypeAndCategory(3),roles:{Goal:!0},index:0,objects:dt}],dn=(0,He.Oh)((0,He.fL)("Date"),"Date"),ln=_.sortBy(this.values,function(pn){return new Date(pn.timestamp)}),Jn=_.findLast(ln,function(pn){return _.isFinite(pn.target)});ln=_.filter(ln,function(pn){return _.isFinite(pn.value)}),Jn&&(_.some(ln)?_.last(ln).target=Jn.target:ln=[Jn]),this.dataView={metadata:{columns:At,objects:{indicator:{showIcon:!1}}},categorical:{categories:[{source:At[0],values:_.map(ln,function(pn){return E.E.treatAsLocalDate(new Date(pn.timestamp))}),identity:_.map(ln,function(pn){return(0,Ke.TZ)((0,He.Dg)(dn,(0,He.fL)(pn.timestamp)))})}],values:(0,je.Yv)([{source:At[1],values:_.map(ln,function(pn){return pn.value})},{source:At[2],values:_.map(ln,function(pn){return pn.target})}])}}},Ie.\u0275fac=function(xe){return new(xe||Ie)(s.\u0275\u0275directiveInject(j.i),s.\u0275\u0275directiveInject(ge._1),s.\u0275\u0275directiveInject(te.o),s.\u0275\u0275directiveInject(nt.m),s.\u0275\u0275directiveInject(De.t),s.\u0275\u0275directiveInject(Ue.D),s.\u0275\u0275directiveInject(oe.q),s.\u0275\u0275directiveInject(s.ChangeDetectorRef))},Ie.\u0275cmp=s.\u0275\u0275defineComponent({type:Ie,selectors:[["goal-kpi"]],inputs:{values:"values",formatString:"formatString"},features:[s.\u0275\u0275ProvidersFeature((0,r.ev)([],se.H,!0)),s.\u0275\u0275NgOnChangesFeature],decls:2,vars:1,consts:[[1,"kpi-wrapper"],["class","kpi",3,"viewModel","useOnPushChangeDetection","on-resize",4,"ngIf"],[1,"kpi",3,"viewModel","useOnPushChangeDetection","on-resize"]],template:function(xe,dt){1&xe&&(s.\u0275\u0275elementStart(0,"div",0),s.\u0275\u0275template(1,u,1,2,"visual-modern",1),s.\u0275\u0275elementEnd()),2&xe&&(s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf",dt.isLoaded))},dependencies:[X.NgIf,h.y,g.O],styles:["[_nghost-%COMP%]{min-height:150px;display:flex;height:100%;width:100%}.kpi-wrapper[_ngcontent-%COMP%]{flex:1;position:relative}.kpi-wrapper[_ngcontent-%COMP%]   .kpi[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0}"],changeDetection:0}),Ie}(),W=t(60042);function ee(Ie,et){if(1&Ie&&(s.\u0275\u0275elementStart(0,"table",1)(1,"tbody")(2,"tr")(3,"td",2)(4,"div",3),s.\u0275\u0275element(5,"div",4),s.\u0275\u0275elementEnd()(),s.\u0275\u0275elementStart(6,"td",5),s.\u0275\u0275element(7,"goal-value-cell",6)(8,"goal-change-cell",7),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(9,"td",8),s.\u0275\u0275element(10,"goal-sparkline-cell",7),s.\u0275\u0275elementEnd(),s.\u0275\u0275element(11,"td",9),s.\u0275\u0275elementEnd()()()),2&Ie){var dt,At,xe=s.\u0275\u0275nextContext();s.\u0275\u0275advance(3),s.\u0275\u0275styleProp("--borderColor",xe.color),s.\u0275\u0275advance(2),s.\u0275\u0275styleProp("background-color",xe.color),s.\u0275\u0275advance(1),s.\u0275\u0275styleProp("--borderColor",xe.color),s.\u0275\u0275advance(1),s.\u0275\u0275property("goal",xe.goal)("showCurrent",!0)("showTarget",null!==(dt=null==xe.goal.metadata?null:xe.goal.metadata.showFinalTarget)&&void 0!==dt?dt:!xe.goal.targetConnection)("showMilestone",!(null!==(At=null==xe.goal.metadata?null:xe.goal.metadata.showFinalTarget)&&void 0!==At?At:!xe.goal.targetConnection)),s.\u0275\u0275advance(1),s.\u0275\u0275property("goal",xe.goal),s.\u0275\u0275advance(1),s.\u0275\u0275styleProp("--borderColor",xe.color),s.\u0275\u0275advance(1),s.\u0275\u0275property("goal",xe.goal),s.\u0275\u0275advance(1),s.\u0275\u0275styleProp("--borderColor",xe.color)}}var U=function(){function Ie(){this.color=W.gT.ColorPalette[0]}return Ie.\u0275fac=function(xe){return new(xe||Ie)},Ie.\u0275cmp=s.\u0275\u0275defineComponent({type:Ie,selectors:[["goal-row-preview"]],inputs:{goal:"goal",color:"color"},decls:1,vars:1,consts:[["class","scorecard-table2","width","100%",4,"ngIf"],["width","100%",1,"scorecard-table2"],[1,"cell","cell-left-edge"],[1,"cell-box"],[1,"color-box"],["colspan","2",1,"cell","cell-value"],[3,"goal","showCurrent","showTarget","showMilestone"],[3,"goal"],["colspan","2",1,"cell","cell-sparkline"],[1,"cell","cell-value","cell-right-edge"]],template:function(xe,dt){1&xe&&s.\u0275\u0275template(0,ee,12,16,"table",0),2&xe&&s.\u0275\u0275property("ngIf",dt.goal)},dependencies:[X.NgIf,a.k,c.t,i.m],styles:[".cell[_ngcontent-%COMP%]{border:none;box-sizing:border-box}.cell-indent[_ngcontent-%COMP%]{width:36px}.cell-left-edge[_ngcontent-%COMP%]{border-top-left-radius:4px;border-bottom-left-radius:4px}.cell-right-edge[_ngcontent-%COMP%]{border-top-right-radius:4px;border-bottom-right-radius:4px}.cell-box[_ngcontent-%COMP%]{display:flex;height:100%}.cell-box[_ngcontent-%COMP%]   .color-box[_ngcontent-%COMP%]{min-width:6px;width:6px;border-top-left-radius:4px;border-bottom-left-radius:4px}.dialog-config[_ngcontent-%COMP%]     .simpleConfirmationDialog.updateConfirmationDialogPanel{width:580px}.dialog-config[_ngcontent-%COMP%]     .simpleConfirmationDialog.updateConfirmationDialogPanel .mat-mdc-dialog-actions button{border-width:1px;height:32px;padding:0;width:80px;margin-left:8px}.dialog-config[_ngcontent-%COMP%]     .simpleConfirmationDialog.updateConfirmationDialogPanel .mat-mdc-dialog-content{padding-left:8px}[_nghost-%COMP%]   td[_ngcontent-%COMP%]{height:60px}[_nghost-%COMP%]   .checkmark-td[_ngcontent-%COMP%]{width:35px;max-width:35px}[_nghost-%COMP%]   .checkmark-td[_ngcontent-%COMP%]:not(.show-checkmark){width:0px;max-width:0px}[_nghost-%COMP%]   .checkmark-td[_ngcontent-%COMP%]:not(.show-checkmark)   .select-checkmark[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .show-on-hover-only[_ngcontent-%COMP%]   .select-checkmark[_ngcontent-%COMP%]{visibility:hidden}[_nghost-%COMP%]:hover   .show-on-hover-only[_ngcontent-%COMP%]   .select-checkmark[_ngcontent-%COMP%], [_nghost-%COMP%]   .show-on-hover-only[_ngcontent-%COMP%]   .select-checkmark.box-checked[_ngcontent-%COMP%]{visibility:visible}[_nghost-%COMP%]   .select-checkmark[_ngcontent-%COMP%]{margin-right:15px}[_nghost-%COMP%]   .select-checkmark[_ngcontent-%COMP%]     pbi-checkbox{margin-bottom:0}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]{background:var(--scorecard-tableRowBackgroundColor);padding-right:10px;border-top:1px solid var(--fluent-theme-neutral-light-color, #EDEBE9);border-bottom:1px solid var(--fluent-theme-neutral-light-color, #EDEBE9)}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]   .rotate90[_ngcontent-%COMP%]{transform:rotate(-90deg)}[_nghost-%COMP%]   .cell-box[_ngcontent-%COMP%]{font-size:var(--lg-font-size, 16px);font-weight:var(--font-weight-regular, 400)}[_nghost-%COMP%]   .cell-box[_ngcontent-%COMP%]   .collapse-box[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:48px;min-width:48px;background-color:transparent;border:none}[_nghost-%COMP%]   .cell-box[_ngcontent-%COMP%]   .pointer[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   .cell-box[_ngcontent-%COMP%]   .displayed-name-and-action-wrapper[_ngcontent-%COMP%]{display:flex;width:100%}[_nghost-%COMP%]   .cell-box[_ngcontent-%COMP%]   .displayed-name-and-action-wrapper[_ngcontent-%COMP%]   goal-name-cell[_ngcontent-%COMP%]{flex-grow:1;max-height:3.6em;line-height:1.8em}[_nghost-%COMP%]   .cell-box[_ngcontent-%COMP%]   .displayed-name-and-action-wrapper[_ngcontent-%COMP%]   goal-actions-cell[_ngcontent-%COMP%]{margin-right:10px}[_nghost-%COMP%]   .cell-owner[_ngcontent-%COMP%]{width:250px;max-width:300px}[_nghost-%COMP%]   .cell-progress-icon[_ngcontent-%COMP%]{width:220px;max-width:250px;text-align:center;padding-right:20px}[_nghost-%COMP%]   .cell-sparkline[_ngcontent-%COMP%]{width:150px;overflow:hidden}[_nghost-%COMP%]   .cell-due-date[_ngcontent-%COMP%]{width:150px}[_nghost-%COMP%]   .cell-context-menu[_ngcontent-%COMP%]{width:51px;text-align:center}[_nghost-%COMP%]   .cell-context-menu[_ngcontent-%COMP%]   .context-menu-icon[_ngcontent-%COMP%]{color:var(--gray-140, #484644);font-size:16px;cursor:pointer}[_nghost-%COMP%]   .cell-value-combined[_ngcontent-%COMP%]{width:220px}[_nghost-%COMP%]   .cell-value[_ngcontent-%COMP%]{width:92px}[_nghost-%COMP%]   .cell-milestone[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-target[_ngcontent-%COMP%]{width:72px}[_nghost-%COMP%]   .cell-value-combined[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-value[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-milestone[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-target[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{overflow:visible}[_nghost-%COMP%]   .cell-value-combined[_ngcontent-%COMP%]   .mat-icon.glyph-small[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-value[_ngcontent-%COMP%]   .mat-icon.glyph-small[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-milestone[_ngcontent-%COMP%]   .mat-icon.glyph-small[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-target[_ngcontent-%COMP%]   .mat-icon.glyph-small[_ngcontent-%COMP%]{font-size:var(--lg-font-size, 16px);width:var(--lg-font-size, 16px);height:var(--lg-font-size, 16px)}[_nghost-%COMP%]   .cell-value-combined[_ngcontent-%COMP%]   .mat-icon.glyph-mini[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-value[_ngcontent-%COMP%]   .mat-icon.glyph-mini[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-milestone[_ngcontent-%COMP%]   .mat-icon.glyph-mini[_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-target[_ngcontent-%COMP%]   .mat-icon.glyph-mini[_ngcontent-%COMP%]{font-size:var(--sm-font-size, 12px);width:var(--sm-font-size, 12px);height:var(--sm-font-size, 12px)}[_nghost-%COMP%]   .cell-value-combined[_ngcontent-%COMP%]   .mat-icon.mat-ligature-font[fontIcon][_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-value[_ngcontent-%COMP%]   .mat-icon.mat-ligature-font[fontIcon][_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-milestone[_ngcontent-%COMP%]   .mat-icon.mat-ligature-font[fontIcon][_ngcontent-%COMP%], [_nghost-%COMP%]   .cell-target[_ngcontent-%COMP%]   .mat-icon.mat-ligature-font[fontIcon][_ngcontent-%COMP%]{overflow:auto}[_nghost-%COMP%]   goal-actions-cell[_ngcontent-%COMP%]{visibility:hidden}[_nghost-%COMP%]:hover   goal-actions-cell[_ngcontent-%COMP%], [_nghost-%COMP%]:focus-within   goal-actions-cell[_ngcontent-%COMP%]{visibility:visible}[_nghost-%COMP%]   .selected-goal.cell[_ngcontent-%COMP%]{border-top:2px solid var(--borderColor);border-bottom:2px solid var(--borderColor)}[_nghost-%COMP%]   .selected-goal.cell-right-edge[_ngcontent-%COMP%]{border-right:2px solid var(--borderColor)}[_nghost-%COMP%]   .cell-right-edge[_ngcontent-%COMP%]{width:2px;border-right:1px solid var(--fluent-theme-neutral-light-color, #EDEBE9)}  .simpleConfirmationDialog.updateConfirmationDialogPanel{width:580px}  .simpleConfirmationDialog.updateConfirmationDialogPanel .mat-mdc-dialog-actions button{border-width:1px;height:32px;padding:0;width:80px;margin-left:8px}  .simpleConfirmationDialog.updateConfirmationDialogPanel .mat-mdc-dialog-content{padding-left:8px}"],changeDetection:0}),Ie}(),Q=t(46037),B=t(89256),w=t(25689),q=t(7082),le=t(39947),de=t(84522),V=t(17085);function M(Ie,et){1&Ie&&s.\u0275\u0275elementContainer(0)}var L=function(){function Ie(){}return Ie.\u0275fac=function(xe){return new(xe||Ie)},Ie.\u0275cmp=s.\u0275\u0275defineComponent({type:Ie,selectors:[["goals-tooltip"]],inputs:{args:"args"},decls:2,vars:2,consts:[["role","tooltip",1,"pbi-goals-tooltip-content","themeableElement",3,"id"],[4,"ngTemplateOutlet"]],template:function(xe,dt){1&xe&&(s.\u0275\u0275elementStart(0,"div",0),s.\u0275\u0275template(1,M,1,0,"ng-container",1),s.\u0275\u0275elementEnd()),2&xe&&(s.\u0275\u0275property("id",dt.args.id),s.\u0275\u0275advance(1),s.\u0275\u0275property("ngTemplateOutlet",dt.args.templateRef))},dependencies:[X.NgTemplateOutlet],styles:["@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;overflow:auto;border-radius:2px;border:1px solid var(--scorecard-backgroundColor);background-color:var(--scorecard-backgroundColor);color:var(--scorecard-neutralPrimaryColor);box-shadow:0 0 2px var(--colorNeutralShadowAmbient),0 8px 16px var(--colorNeutralShadowKey);animation:_ngcontent-%COMP%_fade-in .15s ease;font-size:var(--sm-font-size, 12px);word-break:break-word}.pbi-goals-tooltip-content[_ngcontent-%COMP%]{background-color:var(--scorecard-backgroundColor);z-index:1;padding:7px}"],changeDetection:0}),Ie}(),x=t(33279),Y=t(85353),ue=t(125),Ne=t(3204),$e=t(62831),Xe=t(57535),it=t(62458),st=t(9380),ot=t(59968),ut=t(44408),qe=t(36858),ct=t(90127),yt=["chart"];function wt(Ie,et){1&Ie&&s.\u0275\u0275elementContainer(0)}function It(Ie,et){if(1&Ie&&(s.\u0275\u0275elementContainerStart(0),s.\u0275\u0275template(1,wt,1,0,"ng-container",8),s.\u0275\u0275elementContainerEnd()),2&Ie){s.\u0275\u0275nextContext();var xe=s.\u0275\u0275reference(11);s.\u0275\u0275advance(1),s.\u0275\u0275property("ngTemplateOutlet",xe)}}function K(Ie,et){if(1&Ie&&(s.\u0275\u0275elementStart(0,"span",20)(1,"span",21),s.\u0275\u0275text(2),s.\u0275\u0275pipe(3,"formatGoalValue"),s.\u0275\u0275elementEnd()()),2&Ie){var xe=s.\u0275\u0275nextContext(4);s.\u0275\u0275property("localize",xe.periodLocalizeString),s.\u0275\u0275advance(2),s.\u0275\u0275textInterpolate(xe.valueChange.isPercentage?xe.valueChange.changeAmount+"%":s.\u0275\u0275pipeBind3(3,2,xe.valueChange.changeAmount,xe.categories,xe.goal.valuesFormatString))}}function mn(Ie,et){if(1&Ie&&(s.\u0275\u0275elementStart(0,"span",22)(1,"span",23),s.\u0275\u0275text(2),s.\u0275\u0275pipe(3,"formatGoalValue"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(4,"span",24),s.\u0275\u0275text(5),s.\u0275\u0275elementEnd()()),2&Ie){var xe=s.\u0275\u0275nextContext(4);s.\u0275\u0275property("localize",xe.periodLocalizeString),s.\u0275\u0275advance(2),s.\u0275\u0275textInterpolate(xe.valueChange.isPercentage?xe.valueChange.changeAmount+"%":s.\u0275\u0275pipeBind3(3,3,xe.valueChange.changeAmount,xe.categories,xe.goal.valuesFormatString)),s.\u0275\u0275advance(3),s.\u0275\u0275textInterpolate(xe.valueChange.period)}}function qt(Ie,et){if(1&Ie&&(s.\u0275\u0275elementStart(0,"div",15),s.\u0275\u0275element(1,"mat-icon",16),s.\u0275\u0275elementStart(2,"div",17),s.\u0275\u0275template(3,K,4,6,"span",18),s.\u0275\u0275template(4,mn,6,7,"ng-template",null,19,s.\u0275\u0275templateRefExtractor),s.\u0275\u0275elementEnd()()),2&Ie){var xe=s.\u0275\u0275reference(5),dt=s.\u0275\u0275nextContext(3);s.\u0275\u0275advance(1),s.\u0275\u0275classProp("rotate180",!dt.valueChange.isIncrease),s.\u0275\u0275advance(2),s.\u0275\u0275property("ngIf",dt.periodLocalizeString&&!dt.periodLocalizeString.endsWith("Custom"))("ngIfElse",xe)}}function Fn(Ie,et){if(1&Ie&&(s.\u0275\u0275elementContainerStart(0),s.\u0275\u0275template(1,qt,6,4,"div",11),s.\u0275\u0275elementStart(2,"div",12,13),s.\u0275\u0275element(4,"goal-history-chart",14),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementContainerEnd()),2&Ie){var xe=s.\u0275\u0275nextContext(2);s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf",xe.valueChange),s.\u0275\u0275advance(3),s.\u0275\u0275property("values",xe.sparklineValues)("formatString",xe.goal.valuesFormatString)("color",xe.statusColor)("showGoalTargets",!1)("axesOptions",xe.axesOptions)("legend","None")}}function mo(Ie,et){if(1&Ie&&(s.\u0275\u0275elementStart(0,"div",9),s.\u0275\u0275template(1,Fn,5,7,"ng-container",10),s.\u0275\u0275elementEnd()),2&Ie){var xe=s.\u0275\u0275nextContext(),dt=s.\u0275\u0275reference(11);s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf",xe.hasData)("ngIfElse",dt)}}function vo(Ie,et){if(1&Ie&&(s.\u0275\u0275elementStart(0,"div",25),s.\u0275\u0275text(1),s.\u0275\u0275pipe(2,"formatGoalValue"),s.\u0275\u0275elementEnd()),2&Ie){var xe=s.\u0275\u0275nextContext();s.\u0275\u0275advance(1),s.\u0275\u0275textInterpolate(s.\u0275\u0275pipeBind3(2,1,xe.currentValue.value,xe.categories,xe.goal.valuesFormatString))}}function ni(Ie,et){if(1&Ie&&(s.\u0275\u0275elementStart(0,"div",26)(1,"div",27)(2,"div",28),s.\u0275\u0275pipe(3,"formatValue"),s.\u0275\u0275text(4),s.\u0275\u0275pipe(5,"formatValue"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(6,"div",29),s.\u0275\u0275pipe(7,"formatValue"),s.\u0275\u0275text(8),s.\u0275\u0275pipe(9,"formatValue"),s.\u0275\u0275elementEnd()()()),2&Ie){var xe=s.\u0275\u0275nextContext();s.\u0275\u0275advance(2),s.\u0275\u0275property("pbiTooltip",s.\u0275\u0275pipeBind3(3,4,xe.currentValue.value,xe.goal.valuesFormatString,!1)),s.\u0275\u0275advance(2),s.\u0275\u0275textInterpolate1(" ",s.\u0275\u0275pipeBind2(5,8,xe.currentValue.value,xe.goal.valuesFormatString)," "),s.\u0275\u0275advance(2),s.\u0275\u0275property("pbiTooltip",s.\u0275\u0275pipeBind3(7,11,xe.currentValue.target,xe.goal.valuesFormatString,!1)),s.\u0275\u0275advance(2),s.\u0275\u0275textInterpolate1(" /",s.\u0275\u0275pipeBind2(9,15,xe.currentValue.target,xe.goal.valuesFormatString)," ")}}var so=function(){function Ie(et,xe){this.featureSwitches=et,this.localizationService=xe,this.axesOptions=ce.n,this.currentValue=null,this.supportCategoricalValues=this.featureSwitches.featureSwitches.goalsCategoricalValues}return Ie.prototype.ngOnInit=function(){var xe,dt,et=this;it.fF.assertValue(this.goal,"Missing goal"),this.setDisplayedVals(),this.locale=this.localizationService.currentLanguageLocale,this.supportCategoricalValues&&this.goal.valuesCategoryId&&(this.categories=null!==(dt=null===(xe=_.find(this.goal.goalValueCategories,function(At){return At.id===et.goal.valuesCategoryId}))||void 0===xe?void 0:xe.categories)&&void 0!==dt?dt:[])},Ie.prototype.ngOnChanges=function(et){var xe,dt;et.goal&&(this.setDisplayedVals(),this.supportCategoricalValues&&et.goal.currentValue.valuesCategoryId&&(this.categories=null!==(dt=null===(xe=_.find(this.goal.goalValueCategories,function(At){return At.id===et.goal.currentValue.valuesCategoryId}))||void 0===xe?void 0:xe.categories)&&void 0!==dt?dt:[]))},Ie.prototype.ngAfterViewInit=function(){var et;this.lineChartChangeObserver=$e.q.observeAndRemoveFocusableAttributes(null===(et=this.chart)||void 0===et?void 0:et.nativeElement)},Ie.prototype.ngOnDestroy=function(){var et;null===(et=this.lineChartChangeObserver)||void 0===et||et.disconnect()},Ie.prototype.setDisplayedVals=function(){var et;this.currentValue=ue.r.buildCurrentGoalValue(this.goal),this.valueChange=ue.r.calculateValueChange(this.goal,this.featureSwitches.featureSwitches.goalsSparklineChangeAggregations),this.periodLocalizeString=_.isNil(null===(et=this.valueChange)||void 0===et?void 0:et.period)?void 0:this.getPeriodSuffix(this.valueChange.period);var dt=Xe.p.getGoalStatus(this.currentValue.status,this.goalStatuses);this.statusColor=Xe.p.getGoalSparklineColor(dt.color),this.sparklineValues=Ne.b.buildSparklineValues(this.goal,this.featureSwitches.featureSwitches.goalsSparklineChangeAggregations),this.hasData=_.some(this.sparklineValues)},Ie.prototype.getPeriodSuffix=function(et){switch(et){case"Period_DoD":case"Period_MoM":case"Period_QoQ":case"Period_WoW":case"Period_YoY":return et;default:return"PercentGrowth_Period_Custom"}},Ie.componentId="RelevantGoalChartComponentId",Ie.\u0275fac=function(xe){return new(xe||Ie)(s.\u0275\u0275directiveInject(st.vZ),s.\u0275\u0275directiveInject(te.o))},Ie.\u0275cmp=s.\u0275\u0275defineComponent({type:Ie,selectors:[["relevant-goal-chart"]],viewQuery:function(xe,dt){var At;(1&xe&&s.\u0275\u0275viewQuery(yt,5),2&xe)&&(s.\u0275\u0275queryRefresh(At=s.\u0275\u0275loadQuery())&&(dt.chart=At.first))},inputs:{goal:"goal",goalStatuses:"goalStatuses"},features:[s.\u0275\u0275NgOnChangesFeature],decls:12,vars:7,consts:[[1,"relevant-goal"],[1,"title-and-value"],[4,"ngIf"],[1,"title",3,"pbiTooltip"],[3,"pbiTooltip"],["class","growth-and-visual",4,"ngIf","ngIfElse"],["useCategories",""],["valueAndTarget",""],[4,"ngTemplateOutlet"],[1,"growth-and-visual"],[4,"ngIf","ngIfElse"],["class","growth",4,"ngIf"],[1,"visual"],["chart",""],["type","AreaChart",3,"values","formatString","color","showGoalTargets","axesOptions","legend"],[1,"growth"],["fontIcon","pbi-glyph-arrow",1,"glyphicon","glyph-micro"],[1,"change"],["class","period","localize-fragments","",3,"localize",4,"ngIf","ngIfElse"],["customPeriod",""],["localize-fragments","",1,"period",3,"localize"],["fragment-index","0",1,"valueChangePeriod"],["localize-fragments","",3,"localize"],["fragment-index","0"],["fragment-index","1"],[1,"current-value"],[1,"value-wrapper"],[1,"value-target"],[1,"value",3,"pbiTooltip"],[1,"target",3,"pbiTooltip"]],template:function(xe,dt){if(1&xe&&(s.\u0275\u0275elementStart(0,"div",0)(1,"div",1),s.\u0275\u0275template(2,It,2,1,"ng-container",2),s.\u0275\u0275elementStart(3,"span",3),s.\u0275\u0275text(4),s.\u0275\u0275elementStart(5,"span",4),s.\u0275\u0275text(6),s.\u0275\u0275elementEnd()()(),s.\u0275\u0275template(7,mo,2,2,"div",5),s.\u0275\u0275template(8,vo,3,5,"ng-template",null,6,s.\u0275\u0275templateRefExtractor),s.\u0275\u0275elementEnd(),s.\u0275\u0275template(10,ni,10,18,"ng-template",null,7,s.\u0275\u0275templateRefExtractor)),2&xe){var At=s.\u0275\u0275reference(9);s.\u0275\u0275advance(2),s.\u0275\u0275property("ngIf",dt.hasData&&!(dt.supportCategoricalValues&&dt.goal.valuesCategoryId)),s.\u0275\u0275advance(1),s.\u0275\u0275property("pbiTooltip",dt.goal.scorecardName),s.\u0275\u0275advance(1),s.\u0275\u0275textInterpolate1("",dt.goal.scorecardName," > "),s.\u0275\u0275advance(1),s.\u0275\u0275property("pbiTooltip",dt.goal.name),s.\u0275\u0275advance(1),s.\u0275\u0275textInterpolate1(" ",dt.goal.name,""),s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf",!(dt.supportCategoricalValues&&dt.goal.valuesCategoryId))("ngIfElse",At)}},dependencies:[X.NgIf,X.NgTemplateOutlet,ot.X,ut.Hw,qe.V,ce.R,ct.D,ne.c],styles:['.relevant-goal[_ngcontent-%COMP%]{flex:1;width:284px;background-color:var(--fluent-theme-white-color, #FFF);border-radius:2px}.relevant-goal[_ngcontent-%COMP%]   .rotate180[_ngcontent-%COMP%]{transform:rotate(180deg);-webkit-transform:rotate(180deg)}.relevant-goal[_ngcontent-%COMP%]:hover, .relevant-goal[_ngcontent-%COMP%]:focus:hover{cursor:pointer}.relevant-goal[_ngcontent-%COMP%]   .title-and-value[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;height:66px;padding:0 16px}.relevant-goal[_ngcontent-%COMP%]   .title-and-value[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--lg-font-size, 16px);font-weight:var(--font-weight-regular, 400);line-height:20px;color:var(--fluent-theme-neutral-primary-color, #323130);white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.relevant-goal[_ngcontent-%COMP%]   .title-and-value[_ngcontent-%COMP%]   .value-target[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:18px}.relevant-goal[_ngcontent-%COMP%]   .title-and-value[_ngcontent-%COMP%]   .value-target[_ngcontent-%COMP%]   .target[_ngcontent-%COMP%]{font-size:14px}.relevant-goal[_ngcontent-%COMP%]   .growth-and-visual[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:168px}.relevant-goal[_ngcontent-%COMP%]   .growth-and-visual[_ngcontent-%COMP%]   .growth[_ngcontent-%COMP%]{display:flex;align-items:center;margin-top:1px;padding:7px 16px}.relevant-goal[_ngcontent-%COMP%]   .growth-and-visual[_ngcontent-%COMP%]   .growth[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{height:8px!important;width:8px!important}.relevant-goal[_ngcontent-%COMP%]   .growth-and-visual[_ngcontent-%COMP%]   .growth[_ngcontent-%COMP%]   .rotate180[_ngcontent-%COMP%]{transform:rotate(180deg)}.relevant-goal[_ngcontent-%COMP%]   .growth-and-visual[_ngcontent-%COMP%]   .growth[_ngcontent-%COMP%]   .change[_ngcontent-%COMP%]{font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-regular, 400);margin-left:4px}.relevant-goal[_ngcontent-%COMP%]   .growth-and-visual[_ngcontent-%COMP%]   .growth[_ngcontent-%COMP%]   .change[_ngcontent-%COMP%]   .valueChangePeriod[_ngcontent-%COMP%]{margin-right:4px}.relevant-goal[_ngcontent-%COMP%]   .growth-and-visual[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]{flex:1;display:flex;padding:7px 10px}.relevant-goal[_ngcontent-%COMP%]   .growth-and-visual[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   goal-history-chart[_ngcontent-%COMP%]{width:100%;flex:1}.relevant-goal[_ngcontent-%COMP%]   .growth-and-visual[_ngcontent-%COMP%]   .value-wrapper[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center;justify-content:center}.relevant-goal[_ngcontent-%COMP%]   .growth-and-visual[_ngcontent-%COMP%]   .value-wrapper[_ngcontent-%COMP%]   .value-target[_ngcontent-%COMP%]{margin:auto}.relevant-goal[_ngcontent-%COMP%]   .growth-and-visual[_ngcontent-%COMP%]   .value-wrapper[_ngcontent-%COMP%]   .value-target[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:34px}.relevant-goal[_ngcontent-%COMP%]   .growth-and-visual[_ngcontent-%COMP%]   .value-wrapper[_ngcontent-%COMP%]   .value-target[_ngcontent-%COMP%]   .target[_ngcontent-%COMP%]{font-size:22px}.relevant-goal[_ngcontent-%COMP%]   .current-value[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:168px;font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--pbi-font-32, 32px);font-weight:var(--font-weight-semi-bold, 600)}.relevant-goal[_ngcontent-%COMP%]   .value-target[_ngcontent-%COMP%]{display:flex;align-items:baseline}.relevant-goal[_ngcontent-%COMP%]   .value-target[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:var(--fluent-theme-neutral-primary-color, #323130);font-weight:var(--font-weight-semi-bold, 600)}.relevant-goal[_ngcontent-%COMP%]   .value-target[_ngcontent-%COMP%]   .target[_ngcontent-%COMP%]{color:var(--fluent-theme-neutral-primary-alt-color, #3B3A39)}.relevant-goal[_ngcontent-%COMP%]   .date-and-status[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:center;height:44px;padding:0 16px}.relevant-goal[_ngcontent-%COMP%]   .date-and-status[_ngcontent-%COMP%]   .target-date[_ngcontent-%COMP%]{display:flex;align-items:center;font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-regular, 400);font-size:14px;line-height:18px;color:var(--fluent-theme-neutral-secondary-color, #605E5C);white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.relevant-goal[_ngcontent-%COMP%]   .date-and-status[_ngcontent-%COMP%]   .target-date[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:4px}.relevant-goal[_ngcontent-%COMP%]   .date-and-status[_ngcontent-%COMP%]   status-icon[_ngcontent-%COMP%]{width:95px;margin-right:7px}.relevant-goal[_ngcontent-%COMP%]   .date-and-status[_ngcontent-%COMP%]   status-icon[_ngcontent-%COMP%]     .status{white-space:nowrap;text-overflow:ellipsis;overflow:hidden}'],changeDetection:0}),Ie}();function no(Ie,et){if(1&Ie){var xe=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"goal-kpi",5),s.\u0275\u0275listener("onSelected",function(Yt){s.\u0275\u0275restoreView(xe);var dn=s.\u0275\u0275nextContext();return s.\u0275\u0275resetView(dn.onPointSelected(Yt))}),s.\u0275\u0275elementEnd()}if(2&Ie){var dt=s.\u0275\u0275nextContext();s.\u0275\u0275property("values",dt.goal.goalValues)("formatString",dt.goal.valuesFormatString)}}function Oo(Ie,et){if(1&Ie&&(s.\u0275\u0275elementContainerStart(0),s.\u0275\u0275elementStart(1,"div",6),s.\u0275\u0275text(2),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(3,"div",7),s.\u0275\u0275element(4,"label",8),s.\u0275\u0275elementStart(5,"span"),s.\u0275\u0275text(6),s.\u0275\u0275elementEnd()(),s.\u0275\u0275elementContainerEnd()),2&Ie){var xe=s.\u0275\u0275nextContext();s.\u0275\u0275advance(2),s.\u0275\u0275textInterpolate(xe.goal.name),s.\u0275\u0275advance(4),s.\u0275\u0275textInterpolate1(" : ",xe.completionDate,"")}}var oo=function(){function Ie(et){this.localizationService=et}return Ie.prototype.ngOnInit=function(){if(this.goal.completionDate){var et=this.localizationService.currentLanguageLocale;this.completionDate=new Date(this.goal.completionDate).toLocaleDateString(et,{day:"numeric",month:"short",year:"numeric"})}},Ie.componentId="RelevantGoalKpiComponentId",Ie.\u0275fac=function(xe){return new(xe||Ie)(s.\u0275\u0275directiveInject(te.o))},Ie.\u0275cmp=s.\u0275\u0275defineComponent({type:Ie,selectors:[["relevant-goal-kpi"]],inputs:{goal:"goal"},decls:5,vars:2,consts:[[1,"relevant-goal","pbi-depth-1","pbi-depth-interactive"],[1,"relevant-goal-kpi"],[3,"values","formatString","onSelected",4,"ngIf"],[1,"relevant-goal-details"],[4,"ngIf"],[3,"values","formatString","onSelected"],[1,"title"],[1,"target-date"],["localize","KpiTargetDateFieldListDisplayName"]],template:function(xe,dt){1&xe&&(s.\u0275\u0275elementStart(0,"div",0)(1,"div",1),s.\u0275\u0275template(2,no,1,2,"goal-kpi",2),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(3,"div",3),s.\u0275\u0275template(4,Oo,7,2,"ng-container",4),s.\u0275\u0275elementEnd()()),2&xe&&(s.\u0275\u0275advance(2),s.\u0275\u0275property("ngIf",dt.goal),s.\u0275\u0275advance(2),s.\u0275\u0275property("ngIf",dt.goal))},dependencies:[X.NgIf,ot.X,F],styles:['.relevant-goal[_ngcontent-%COMP%]{flex:1;height:262px;width:285px;background:var(--fluent-theme-white-color, #FFF);border-radius:2px}.relevant-goal[_ngcontent-%COMP%]:hover, .relevant-goal[_ngcontent-%COMP%]:focus:hover{cursor:pointer}.relevant-goal[_ngcontent-%COMP%]   .relevant-goal-details[_ngcontent-%COMP%]{border-top:1px solid var(--fluent-theme-neutral-light-color, #EDEBE9);padding:16px}.relevant-goal[_ngcontent-%COMP%]   .relevant-goal-details[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-semi-bold, 600);line-height:20px;color:var(--fluent-theme-neutral-primary-color, #323130);white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.relevant-goal[_ngcontent-%COMP%]   .relevant-goal-details[_ngcontent-%COMP%]   .target-date[_ngcontent-%COMP%]{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-regular, 400);line-height:16px;color:var(--fluent-theme-neutral-secondary-color, #605E5C);white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.relevant-goal[_ngcontent-%COMP%]   .relevant-goal-kpi[_ngcontent-%COMP%]{height:194px}.relevant-goal[_ngcontent-%COMP%]   .relevant-goal-kpi[_ngcontent-%COMP%]   visual-modern[_ngcontent-%COMP%]{border:none!important;padding:0!important}'],changeDetection:0}),Ie}(),Dn=function(Ie){return Ie[Ie.None=0]="None",Ie[Ie.View=1]="View",Ie[Ie.TenantView=2]="TenantView",Ie[Ie.Favorite=3]="Favorite",Ie[Ie.Frequent=4]="Frequent",Ie[Ie.Promoted=5]="Promoted",Ie[Ie.Learning=6]="Learning",Ie[Ie.Discover=7]="Discover",Ie[Ie.Teams=8]="Teams",Ie[Ie.TeamAnalytics=9]="TeamAnalytics",Ie[Ie.PromotedSample=10]="PromotedSample",Ie}({}),co=t(74913);function Vo(Ie,et){if(1&Ie&&(s.\u0275\u0275elementStart(0,"span",7),s.\u0275\u0275element(1,"tri-svg-icon",8),s.\u0275\u0275text(2),s.\u0275\u0275elementEnd()),2&Ie){var xe=s.\u0275\u0275nextContext();s.\u0275\u0275property("pbiTooltip",xe.recommendationReason),s.\u0275\u0275advance(2),s.\u0275\u0275textInterpolate1(" ",xe.recommendationReason,"")}}var Do=function(){function Ie(et){this.localizationService=et}return Ie.prototype.ngOnChanges=function(et){var xe;(this.relevantMeasure||et.relevantMeasure)&&(this.recommendationReason=function(Ie,et){var xe="";switch(Ie){case Dn.View:xe=et.format("Recommended_Reason_View");break;case Dn.Favorite:xe=et.get("Recommended_Reason_Favorite");break;case Dn.Frequent:xe=et.get("Recommended_Reason_Frequent");break;case Dn.Promoted:xe=et.format("Recommended_Reason_Featured");break;case Dn.Learning:xe=et.get("TopNav_HelpMenu_GettingStarted");break;case Dn.Discover:xe=et.get("Recommended_Reason_Discover");break;case Dn.TeamAnalytics:xe=et.get("Teams_Analyze_Usage");break;default:xe=et.get("Recommended_Reason_None")}return xe}(null===(xe=this.relevantMeasure)||void 0===xe?void 0:xe.recommendationReason,this.localizationService))},Ie.componentId="RelevantMeasureComponentId",Ie.\u0275fac=function(xe){return new(xe||Ie)(s.\u0275\u0275directiveInject(te.o))},Ie.\u0275cmp=s.\u0275\u0275defineComponent({type:Ie,selectors:[["relevant-measure"]],inputs:{relevantMeasure:"relevantMeasure"},features:[s.\u0275\u0275NgOnChangesFeature],decls:11,vars:4,consts:[[1,"relevant-measure"],[1,"measure"],[1,"title-and-value"],["class","title",3,"pbiTooltip",4,"ngIf"],[3,"pbiTooltip"],[1,"measure-report"],["fontIcon","pbi-glyph-barchart",1,"glyph-small"],[1,"title",3,"pbiTooltip"],["name","folder_open_20_regular","tri-svg-icon-16",""]],template:function(xe,dt){1&xe&&(s.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2),s.\u0275\u0275template(3,Vo,3,2,"span",3),s.\u0275\u0275elementStart(4,"div",4),s.\u0275\u0275text(5),s.\u0275\u0275elementEnd()(),s.\u0275\u0275elementStart(6,"div",5)(7,"div"),s.\u0275\u0275element(8,"mat-icon",6),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(9,"div"),s.\u0275\u0275text(10),s.\u0275\u0275elementEnd()()()()),2&xe&&(s.\u0275\u0275advance(3),s.\u0275\u0275property("ngIf",!(null==dt.relevantMeasure||!dt.relevantMeasure.recommendationReason)),s.\u0275\u0275advance(1),s.\u0275\u0275property("pbiTooltip",null==dt.relevantMeasure?null:dt.relevantMeasure.name),s.\u0275\u0275advance(1),s.\u0275\u0275textInterpolate(null==dt.relevantMeasure?null:dt.relevantMeasure.name),s.\u0275\u0275advance(5),s.\u0275\u0275textInterpolate(null==dt.relevantMeasure?null:dt.relevantMeasure.value))},dependencies:[X.NgIf,ut.Hw,qe.V,co.M],styles:['.relevant-measure[_ngcontent-%COMP%]{flex:1;width:284px;background-color:var(--fluent-theme-white-color, #FFF);border-radius:2px}.relevant-measure[_ngcontent-%COMP%]:hover, .relevant-measure[_ngcontent-%COMP%]:focus:hover{cursor:pointer}.relevant-measure[_ngcontent-%COMP%]   .title-and-value[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;height:66px;padding:0 16px}.relevant-measure[_ngcontent-%COMP%]   .title-and-value[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--lg-font-size, 16px);font-weight:var(--font-weight-regular, 400);line-height:20px;color:var(--fluent-theme-neutral-primary-color, #323130);white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.relevant-measure[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%]{height:100%}.relevant-measure[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%]   .measure-report[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:168px}.relevant-measure[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%]   .measure-report[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{height:48px!important;width:48px!important}.relevant-measure[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}'],changeDetection:0}),Ie}(),oi=t(26410),Hn=t(6425),Pe=t(83399),xn=t(8297),Go=t(86663),uo=t(86251),ii=function(et){return{action:et}};function Qt(Ie,et){if(1&Ie&&s.\u0275\u0275elementContainer(0,5),2&Ie){var xe=et.$implicit;s.\u0275\u0275nextContext(3);var dt=s.\u0275\u0275reference(3);s.\u0275\u0275property("ngTemplateOutlet",dt)("ngTemplateOutletContext",s.\u0275\u0275pureFunction1(2,ii,xe))}}function ko(Ie,et){if(1&Ie&&(s.\u0275\u0275elementContainerStart(0),s.\u0275\u0275template(1,Qt,1,4,"ng-container",4),s.\u0275\u0275elementContainerEnd()),2&Ie){var xe=et.ngIf;s.\u0275\u0275advance(1),s.\u0275\u0275property("ngForOf",xe)}}function Xn(Ie,et){if(1&Ie){var xe=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"button",6),s.\u0275\u0275listener("click",function(){s.\u0275\u0275restoreView(xe);var At=s.\u0275\u0275nextContext(2);return s.\u0275\u0275resetView(At.args.onAddNote())}),s.\u0275\u0275element(1,"pbi-icon",7)(2,"div",8),s.\u0275\u0275elementEnd()}}function io(Ie,et){if(1&Ie){var xe=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"button",6),s.\u0275\u0275listener("click",function(){s.\u0275\u0275restoreView(xe);var At=s.\u0275\u0275nextContext(2);return s.\u0275\u0275resetView(At.args.onEditCheckIn())}),s.\u0275\u0275element(1,"pbi-icon",9)(2,"div",10),s.\u0275\u0275elementEnd()}}function ri(Ie,et){if(1&Ie){var xe=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"button",6),s.\u0275\u0275listener("click",function(){s.\u0275\u0275restoreView(xe);var At=s.\u0275\u0275nextContext(2);return s.\u0275\u0275resetView(At.args.onDeleteCheckIn())}),s.\u0275\u0275element(1,"pbi-icon",11)(2,"div",12),s.\u0275\u0275elementEnd()}}function ai(Ie,et){if(1&Ie){var xe=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"button",6),s.\u0275\u0275listener("click",function(){s.\u0275\u0275restoreView(xe);var At=s.\u0275\u0275nextContext(2);return s.\u0275\u0275resetView(At.args.onEditNote())}),s.\u0275\u0275element(1,"pbi-icon",9)(2,"div",13),s.\u0275\u0275elementEnd()}}function Bo(Ie,et){if(1&Ie){var xe=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"button",6),s.\u0275\u0275listener("click",function(){s.\u0275\u0275restoreView(xe);var At=s.\u0275\u0275nextContext(2);return s.\u0275\u0275resetView(At.args.onDeleteNote())}),s.\u0275\u0275element(1,"pbi-icon",11)(2,"div",14),s.\u0275\u0275elementEnd()}}function li(Ie,et){if(1&Ie&&(s.\u0275\u0275elementContainerStart(0),s.\u0275\u0275template(1,ko,2,1,"ng-container",1),s.\u0275\u0275template(2,Xn,3,0,"button",3),s.\u0275\u0275template(3,io,3,0,"button",3),s.\u0275\u0275template(4,ri,3,0,"button",3),s.\u0275\u0275template(5,ai,3,0,"button",3),s.\u0275\u0275template(6,Bo,3,0,"button",3),s.\u0275\u0275elementContainerEnd()),2&Ie){var xe=s.\u0275\u0275nextContext();s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf",xe.args.goalActions),s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf",xe.args.onAddNote),s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf",xe.args.onEditCheckIn),s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf",xe.args.onDeleteCheckIn),s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf",xe.args.onEditNote),s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf",xe.args.onDeleteNote)}}function Wn(Ie,et){if(1&Ie&&s.\u0275\u0275element(0,"mat-icon",22),2&Ie){var xe=s.\u0275\u0275nextContext(2).action;s.\u0275\u0275property("fontIcon",xe.iconName)}}function si(Ie,et){if(1&Ie&&s.\u0275\u0275element(0,"pbi-icon",23),2&Ie){var xe=s.\u0275\u0275nextContext(2).action;s.\u0275\u0275property("name",xe.iconName)}}function po(Ie,et){if(1&Ie&&s.\u0275\u0275element(0,"tri-svg-icon",24),2&Ie){var xe=s.\u0275\u0275nextContext(2).action;s.\u0275\u0275property("name",xe.iconName)}}function $n(Ie,et){if(1&Ie){var xe=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"tooltip-wrapper",16)(1,"button",17),s.\u0275\u0275listener("click",function(){s.\u0275\u0275restoreView(xe);var Yt=s.\u0275\u0275nextContext().action;return s.\u0275\u0275resetView(Yt.onClick())}),s.\u0275\u0275template(2,Wn,1,1,"mat-icon",18),s.\u0275\u0275template(3,si,1,1,"pbi-icon",19),s.\u0275\u0275template(4,po,1,1,"tri-svg-icon",20),s.\u0275\u0275element(5,"div",21),s.\u0275\u0275elementEnd()()}if(2&Ie){var dt=s.\u0275\u0275nextContext().action;s.\u0275\u0275property("tooltipKey",null==dt?null:dt.disabledTooltipKey),s.\u0275\u0275advance(1),s.\u0275\u0275property("disabled",dt.disabled),s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf","mat"===dt.iconType),s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf","pbi"===dt.iconType),s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf","tri"===dt.iconType),s.\u0275\u0275advance(1),s.\u0275\u0275property("localize",dt.labelKey)}}function Uo(Ie,et){1&Ie&&s.\u0275\u0275template(0,$n,6,6,"tooltip-wrapper",15),2&Ie&&s.\u0275\u0275property("ngIf",et.action)}var Co=function(){function Ie(){}return Ie.\u0275fac=function(xe){return new(xe||Ie)},Ie.\u0275cmp=s.\u0275\u0275defineComponent({type:Ie,selectors:[["scorecard-context-menu"]],inputs:{args:"args"},decls:4,vars:1,consts:[[1,"context-menu"],[4,"ngIf"],["actionOption",""],["class","option",3,"click",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngFor","ngForOf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"option",3,"click"],["name","add","size","small",1,"icon"],["localize","MetricsDetailsPane_DetailsTab_Add_Note",1,"text"],["name","edit","size","small",1,"icon"],["localize","MetricsDetailsPane_DetailsTab_Edit_Check_In",1,"text"],["name","delete","size","small",1,"icon"],["localize","MetricsDetailsPane_DetailsTab_Delete_Check_In",1,"text"],["localize","MetricsDetailsPane_DetailsTab_Edit_Note",1,"text"],["localize","MetricsDetailsPane_DetailsTab_Delete_Note",1,"text"],[3,"tooltipKey",4,"ngIf"],[3,"tooltipKey"],["mat-icon-button","",1,"option",3,"disabled","click"],["class","glyphicon glyph-small icon",3,"fontIcon",4,"ngIf"],["size","small","class","icon",3,"name",4,"ngIf"],["tri-svg-icon-16","","class","tri-svg icon",3,"name",4,"ngIf"],[1,"text",3,"localize"],[1,"glyphicon","glyph-small","icon",3,"fontIcon"],["size","small",1,"icon",3,"name"],["tri-svg-icon-16","",1,"tri-svg","icon",3,"name"]],template:function(xe,dt){1&xe&&(s.\u0275\u0275elementStart(0,"div",0),s.\u0275\u0275template(1,li,7,6,"ng-container",1),s.\u0275\u0275elementEnd(),s.\u0275\u0275template(2,Uo,1,1,"ng-template",null,2,s.\u0275\u0275templateRefExtractor)),2&xe&&(s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf",dt.args))},dependencies:[X.NgForOf,X.NgIf,X.NgTemplateOutlet,ot.X,ut.Hw,Go._,co.M,uo.j],styles:['[_nghost-%COMP%]   .context-menu[_ngcontent-%COMP%]{width:fit-content;padding:2px 0;background-color:#fff;border-radius:2px;box-sizing:border-box;box-shadow:0 3.2px 7.2px rgba(0,0,0,.13),0 .6px 1.8px rgba(0,0,0,.11)}[_nghost-%COMP%]   .option[_ngcontent-%COMP%]{height:36px;display:flex;align-items:center;cursor:pointer;background-color:transparent;border:none;min-width:-webkit-fill-available}[_nghost-%COMP%]   .option[_ngcontent-%COMP%]:disabled{cursor:default}[_nghost-%COMP%]   .option[_ngcontent-%COMP%]:disabled   .text[_ngcontent-%COMP%]{color:var(--gray-80)}[_nghost-%COMP%]   .option[_ngcontent-%COMP%]:hover{background:var(--gray-20, #F3F2F1)}[_nghost-%COMP%]   .icon[_ngcontent-%COMP%]{height:16px;width:16px;font-size:16px;display:inline-block;padding-left:8px;padding-right:8px}[_nghost-%COMP%]   .text[_ngcontent-%COMP%]{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);color:var(--gray-180, #252423);text-align:left;display:inline-block}'],changeDetection:0}),Ie}(),No=t(95135),zo=t(1882),Vn=t(96147),go=t(50042),Qn=t(49833),ci=t(59916),Ho=t(65736),yo=t(55102),Yn=t(87582),Wo=t(58108),Ve=t(44260),Le=t(93631),Te=t(77971),Be=t(94994),Ye=t(43847),vt=t(81437),pt=t(70864),Rt=t(64832),Ut=t(38360),Ht=function(){function Ie(){this.mappings=[{key:"T",value:Math.pow(10,12)},{key:"B",value:Math.pow(10,9)},{key:"M",value:Math.pow(10,6)},{key:"K",value:Math.pow(10,3)}]}return Ie.prototype.transform=function(et,xe){if(void 0===xe&&(xe=2),null==et||isNaN(et))return"\u2014";if(0===et)return"0";(null==xe||xe<0||isNaN(xe))&&(xe=2);for(var dt=Math.pow(10,xe),At=et<0?"-":"",Yt="",dn=et=Math.abs(et),ln=0,Jn=this.mappings;ln<Jn.length;ln++){var pn=Jn[ln],Ao=_.round(et*dt/pn.value)/dt;if(Ao>=1){dn=Ao,Yt=pn.key;break}}return"".concat(At).concat(dn).concat(Yt)},Ie.\u0275fac=function(xe){return new(xe||Ie)},Ie.\u0275pipe=s.\u0275\u0275definePipe({name:"shortNumber",type:Ie,pure:!0}),Ie}(),sn=t(10321),vn=t(34340),Mn=t(23348),$t=t(558),In=t(21661),zt=t(94585),_n=t(78181),Rn=t(57746),jn=t(55710),An=t(52910),hn=(t(82792),t(94120),t(82775),t(59051)),Ae=t(54241),ht=t(34895),Mt=t(89075),jt=t(52950),tn=t(52040),Cn=t(93367),jo=t(16095),ui=t(70137),To=t(88717),xo=t(76701),gt=t(88119);function an(Ie){return function(){return Ie.scrollStrategies.close()}}var er=function(){function Ie(){}return Ie.\u0275fac=function(xe){return new(xe||Ie)},Ie.\u0275mod=s.\u0275\u0275defineNgModule({type:Ie}),Ie.\u0275inj=s.\u0275\u0275defineInjector({providers:[{provide:Ae.g8,deps:[hn.aV],useFactory:an}],imports:[X.CommonModule,ht.D8,Mt.yD,O.wp,m.UX,In.Cl,xo.z,Cn.U,ui.F,jt.g,gt.N,To.R,tn.x,jo.Z]}),Ie}(),Io=t(32288),di=t(11962),ro=t(77906),ao=t(95859),pi=t(71328),fn=t(76966),cn=t(47913),Ro=t(6015),Kn=t(94770),Ii=t(23612),Bt=t(45411),bt=t(33766),tr=t(59951),Ko=t(16748),Ri=t(76777),Ai=t(44913),gi=t(17177),nr=t(16622),or=t(16434),Li=t(78035),Fi=t(8816),Vi=function(){function Ie(){}return Ie.\u0275fac=function(xe){return new(xe||Ie)},Ie.\u0275mod=s.\u0275\u0275defineNgModule({type:Ie}),Ie.\u0275inj=s.\u0275\u0275defineInjector({providers:[{provide:or.E,useClass:nr._}],imports:[X.CommonModule,Li.Y,jn.jT,_n.vV,gi.T6,Fi.w]}),Ie}(),hi=t(54485),$o=[{componentId:so.componentId,type:so},{componentId:oo.componentId,type:oo},{componentId:Do.componentId,type:Do},{componentId:Yn.a.componentId,type:Wo.o},{componentId:xn.H.componentId,type:Co},{componentId:V.i.componentId,type:L},{componentId:Pe.M.componentId,type:Pe.M},{componentId:w.H.componentId,type:w.H}],Gi=((0,r.ev)((0,r.ev)([],[o.c,k.u,J,a.k,w.H,pe.Q,ce.R,F,Q.C,U,L,B.A,de.S,q.p,le.Q,x.E,Y.d,so,oo,Do,oi.O,Hn.C,Pe.M,Wo.o,Co,Ve.o,Le.l,Te.m,Be.z,Ye.$,vt.V,yo.y,pt.F],!0),[v.p,N.W,he.G,P.I,d.E,p.$,l.q,c.t,y.e,i.m,C.i,No.m,go.V,Qn.t,Ho.A,yo.y,zo.R,Vn.J,ci.h,Ht,Rt.B,Ut.i,uo.j],!1),function(){function Ie(et){et.registerIcons(bt.$.sprite)}return Ie.\u0275fac=function(xe){return new(xe||Ie)(s.\u0275\u0275inject(hi.u))},Ie.\u0275mod=s.\u0275\u0275defineNgModule({type:Ie}),Ie.\u0275inj=s.\u0275\u0275defineInjector({providers:[vn.c,sn.L,Mn.f],imports:[X.CommonModule,zt.nZ,fn.c,An.O,$t._t,Io.J,er,m.u5,ro.N.withManifests($o),ao.v,pi.G,_n.vV,Rn.t,ut.Ps,jn.jT,I.uw,tn.x,cn.V,Ro.C,Kn.f,Ii.N,Cn.U,Bt.m,tr.v,Ko.H,jo.Z,m.UX,In.Cl,Ai.lK,Vi,gi.T6,gt.N,Ri.H,di.V7]}),Ie}())},45017:function(lt,Ge,t){"use strict";t.d(Ge,{B:function(){return o}});var r=t(62458),o=function(){function P(){}return P.getGoalValueMap=function(a){var d=new Map;if(_.isEmpty(a))return d;for(var p=0,l=a;p<l.length;p++){var c=l[p];d.set(new Date(c.timestamp).getTime(),c)}return d},P.areGoalValuesEqual=function(a,d,p,l){return r.fF.assertValue(a,"goalValueOne"),r.fF.assertValue(d,"goalValueTwo"),!(!p&&a.value!==d.value||!l&&a.target!==d.target||a.trend!==d.trend||a.forecast!==d.forecast||a.status!==d.status)},P.diffGoalValues=function(a,d){r.fF.assertValue(a,"goalValueOne"),r.fF.assertValue(d,"goalValueTwo");var p={timestamp:a.timestamp,goalId:a.goalId,scorecardId:a.scorecardId,createdTime:a.createdTime,lastModifiedTime:a.lastModifiedTime};return a.value!==d.value&&(p.value=a.value),a.target!==d.target&&(p.target=a.target),a.trend!==d.trend&&(p.trend=a.trend),a.forecast!==d.forecast&&(p.forecast=a.forecast),a.status!==d.status&&(p.status=a.status),p},P.calculateGoalValueChanges=function(a,d){for(var p=[],l=new Map,c=0,y=a;c<y.length;c++){var i=y[c],C=new Date(i.timestamp).getTime();l.set(C,i.value)}for(var v=0,k=d;v<k.length;v++)i=k[v],C=new Date(i.timestamp).getTime(),l.has(C)?i.value!==l.get(C)&&p.push(i):p.push(i);for(var E=new Set,s=0,ne=d;s<ne.length;s++)i=ne[s],C=new Date(i.timestamp).getTime(),E.add(C);for(var te=0,X=a;te<X.length;te++)i=X[te],C=new Date(i.timestamp).getTime(),E.has(C)||p.push({timestamp:i.timestamp,value:null});return p},P}()},98925:function(lt,Ge,t){"use strict";t.d(Ge,{P:function(){return P},t:function(){return o}});var r=t(62458);function o(a){if("number"==typeof a)return a;switch(a.toString().trim().toLowerCase()){case"sum":return 1;case"average":return 2;case"min":return 3;case"max":return 4;default:return void r.fF.assertNever(a)}}function P(a){var d;return(d={})[1]=a.get("Rollups_Submetrics_Sum"),d[2]=a.get("Rollups_Submetrics_Average"),d[3]=a.get("Rollups_Submetrics_Min"),d[4]=a.get("Rollups_Submetrics_Max"),d}},61088:function(lt,Ge,t){"use strict";t.d(Ge,{_:function(){return P}});var r=t(81337),o=t(558),P=function(){function a(){}return a.moveColumnSettingUp=function(d,p){if(!(_.size(d)<=1||0===p)){var l=d;return(0,r.ev)((0,r.ev)((0,r.ev)([],_.slice(l,0,p-1),!0),[l[p],l[p-1]],!1),_.slice(l,p+1),!0)}},a.moveColumnSettingDown=function(d,p){if(!(_.size(d)<=1||p===_.size(d)-1)){var l=d;return(0,r.ev)((0,r.ev)((0,r.ev)([],_.slice(l,0,p),!0),[l[p+1],l[p]],!1),_.slice(l,p+2),!0)}},a.canMoveLeft=function(d,p){if(p<=1)return!1;var l=_.slice(d,0,p);return _.findLastIndex(l,function(y){return y.show})>0},a.canMoveRight=function(d,p){return!(0===p||p>=d.length-1)&&_.findIndex(d,function(c){return c.show},p+1)>p},a.moveColumnLeft=function(d,p){var l=_.findIndex(d,function(i){return i.columnId===p}),c=_.slice(d,0,l),y=_.findLastIndex(c,function(i){return i.show});(0,o.bA)(d,l,y)},a.moveColumnRight=function(d,p){var l=_.findIndex(d,function(y){return y.columnId===p}),c=_.findIndex(d,function(y){return y.show},l+1);(0,o.bA)(d,l,c)},a.hideColumn=function(d,p){var l=_.findIndex(d,function(c){return c.columnId===p});l>=0&&(d[l].show=!1)},a.showColumn=function(d,p){var l=_.findIndex(d,function(c){return c.columnId===p});l>=0&&(d[l].show=!0)},a.isColumnVisible=function(d,p){var l=_.find(d,function(c){return c.columnId===p});return!!_.isUndefined(l?.show)||l.show},a.mergeColumns=function(d,p){for(var l=new Array,c=new Set(p.map(function(ne){return ne.columnId})),y=new Set,i=0,C=d;i<C.length;i++){var v=C[i];c.has(v.columnId)&&!y.has(v.columnId)&&(l.push(v),y.add(v.columnId))}for(var k=0,E=p;k<E.length;k++){var s=E[k];y.has(s.columnId)||l.push(s)}return l},a.removeColumnSettings=function(d,p){var l=new Set(p);_.remove(d,function(c){return l.has(c.columnId)})},a.adjustColumnSettings=function(d,p){d.featureSwitches.scorecardSplitColumns||(a.removeColumnSettings(p,[7,8,9]),a.isColumnVisible(p,3)||a.showColumn(p,3)),d.featureSwitches.scorecardCompactView||a.removeColumnSettings(p,[10])},a}()},3204:function(lt,Ge,t){"use strict";t.d(Ge,{b:function(){return a}});var r=t(57535),o=t(62831),P=t(125),a=function(){function d(){}return d.buildSparklineValues=function(p,l,c){if(void 0===c&&(c=7),l&&p.aggregations)return _.chain(p.aggregations).filter(function(i){return"Sparkline"===i.type}).sortBy(function(i){return new Date(i.timestamp)}).takeRight(c).map(function(i){return{scorecardId:p.scorecardId,goalId:p.id,lastModifiedTime:i.maxLastModifiedTime,timestamp:i.timestamp,value:i.value,valueDisplayString:i.valueDisplayString,createdTime:i.calculationTime,lastModifiedBy:null}}).value();var y=_.sortBy(p.goalValues,function(i){return new Date(i.timestamp)});return _.takeRight(y.filter(function(i){return null!=i.value&&null!=i.timestamp}),c)},d.getSparklineOptions=function(p,l,c){var y,i,C,v,k,E,s,ne=o.q.isDarkMode(),te=P.r.buildCurrentGoalValue(p),X=r.p.getGoalStatus(te?.status,l),m=r.p.getGoalSparklineColor(X.color,null===(y=c?.scorecardDisplayOptions)||void 0===y?void 0:y.isMobileLayout,ne);return{height:null!==(v=null===(C=null===(i=c?.scorecardDisplayOptions)||void 0===i?void 0:i.sparklineOptions)||void 0===C?void 0:C.height)&&void 0!==v?v:48,width:null!==(s=null===(E=null===(k=c?.scorecardDisplayOptions)||void 0===k?void 0:k.sparklineOptions)||void 0===E?void 0:E.width)&&void 0!==s?s:120,lineColor:m,dotColor:m,showMin:!1,showMax:!1}},d}()},38360:function(lt,Ge,t){"use strict";t.d(Ge,{i:function(){return P}});var r=t(50423),o={day:"numeric",month:"numeric",year:"2-digit"},P=function(){function a(){}return a.prototype.transform=function(d,p){return new Date(d).toLocaleDateString(p,o)},a.\u0275fac=function(p){return new(p||a)},a.\u0275pipe=r.\u0275\u0275definePipe({name:"formatDate",type:a,pure:!0}),a}()},33014:function(lt,Ge,t){"use strict";t.d(Ge,{D:function(){return te}});var r=t(81337),o=t(50423),P=t(34071),a=t(98632),d=t(43633),p=t(60166),l=t(62458),c=t(43286),y=t(14172),i=t(59973),C=t(85732),v=t(50911),k=t(19178),E=t(94420),s=t(18942),ne=t(76746),te=function(){function X(m,O,I,H,G,Z,ie){this.store=m,this.datasetStore=O,this.domSanitizer=I,this.groupStoreService=H,this.reportStore=G,this.appSettings=Z,this.scorecardHost=ie}return X.prototype.getConnectedReport=function(m){var O,I;l.fF.assertValue(m.reportUrl,"No connected report url");var H=null===(O=m.reportUrl.match(/\/reports\/([a-zA-Z0-9\-]+)/))||void 0===O?void 0:O[1],G=null===(I=m.reportUrl.match(/\/groups\/([a-zA-Z0-9\-]+)/))||void 0===I?void 0:I[1];return this.getReport(H,G)},X.prototype.getConnectedReportDisplayName=function(m){var O,I=null===(O=m.reportUrl.match(/\/apps\/([a-zA-Z0-9\-]+)/))||void 0===O?void 0:O[1];return this.getConnectedReport(m).pipe((0,y.U)(function(H){return I?H.ownerFullname:H.displayName}))},X.prototype.goToConnectedReport=function(m){l.fF.assertValue(m.reportUrl,"No connected report url");var I,O=m.reportUrl.indexOf("?")>=0?"&":"?";if(I=this.appSettings.tenantId?"".concat(m.reportUrl).concat(O,"ctid=").concat(this.appSettings.tenantId):m.reportUrl,this.scorecardHost)this.scorecardHost.openReport(I);else{var H=new URL(I,window.location.origin).href;window.open(this.domSanitizer.sanitize(o.SecurityContext.URL,H),"_blank")}},X.prototype.getReport=function(m,O){return this.store.dispatch(new a.yi({reportObjectId:m,workspaceObjectId:O})),this.store.select(d.W4,{id:m}).pipe((0,i.h)(function(I){return!!I&&!I.loading}))},X.prototype.getConnectedGoalsWithoutBuildPermissions=function(m){var O,I;return(0,r.mG)(this,void 0,void 0,function(){var H,G,Z,ie,ye,ae,J;return(0,r.Jh)(this,function(N){switch(N.label){case 0:return H=[],[4,this.groupStoreService.ensureGroupArtifactsLoaded(P.fm,!0)];case 1:N.sent(),G=0,Z=m,N.label=2;case 2:return G<Z.length?(ie=Z[G]).valueConnection?[4,this.datasetStore.findDatasetByObjectId(ie.valueConnection.datasetId)]:[3,5]:[3,9];case 3:return(!(ye=N.sent())||!this.hasDatasetBuildPermission(ye))&&H.push(ie.name),l.fF.assertValue(ie.valueConnection.reportUrl,"No value connected report url"),ae=null===(O=ie.valueConnection.reportUrl.match(/\/reports\/([a-zA-Z0-9\-]+)/))||void 0===O?void 0:O[1],[4,this.reportStore.findByObjectId(ae)];case 4:(!(J=N.sent())||!this.hasReportReadPermission(J))&&H.push(ie.name),N.label=5;case 5:return ie.targetConnection?[4,this.datasetStore.findDatasetByObjectId(ie.targetConnection.datasetId)]:[3,8];case 6:return(!(ye=N.sent())||!this.hasDatasetBuildPermission(ye))&&H.push(ie.name),l.fF.assertValue(ie.targetConnection.reportUrl,"No target connected report url"),ae=null===(I=ie.targetConnection.reportUrl.match(/\/reports\/([a-zA-Z0-9\-]+)/))||void 0===I?void 0:I[1],[4,this.reportStore.findByObjectId(ae)];case 7:(!(J=N.sent())||!this.hasReportReadPermission(J))&&H.push(ie.name),N.label=8;case 8:return G++,[3,2];case 9:return[2,_.uniq(H)]}})})},X.prototype.hasReportReadPermission=function(m){return(0,c.yE)(m.permissions,1)},X.prototype.hasDatasetBuildPermission=function(m){return(0,c.yE)(m?.permissions,3)||(0,c.yE)(m?.permissions,9)||(0,c.yE)(m?.userPermissions,9)||(0,c.yE)(m?.userPermissions,3)},X.\u0275fac=function(O){return new(O||X)(o.\u0275\u0275inject(C.yh),o.\u0275\u0275inject(v.s),o.\u0275\u0275inject(s.H7),o.\u0275\u0275inject(k.Y),o.\u0275\u0275inject(E.R),o.\u0275\u0275inject(ne.de),o.\u0275\u0275inject(p.M,8))},X.\u0275prov=o.\u0275\u0275defineInjectable({token:X,factory:X.\u0275fac}),X}()},74521:function(lt,Ge,t){"use strict";t.d(Ge,{D:function(){return ne}});var r=t(81337),o=t(8297),P=t(60042),a=t(62831),d=t(62458),p=t(86940),l=t(25512),c=t(35510),y=t(30794),i=t(50423),C=t(49223),v=t(93379),k=t(33014),E=t(62087),s=t(9380),ne=function(){function te(X,m,O,I,H,G){this.scorecardService=X,this.capabilityService=m,this.overlay=O,this.goalConnectionService=I,this.expansionService=H,this.featureSwitches=G,this.contextMenuOpenGoalId$=new c.X(void 0),this.onDestroy$=new y.xQ}return te.prototype.ngOnDestroy=function(){this.onDestroy$.next(!0),this.onDestroy$.complete()},Object.defineProperty(te.prototype,"scorecardSelectionMode",{get:function(){return this.scorecardService.scorecardSelectionMode},enumerable:!1,configurable:!0}),te.prototype.capabilities=function(X){return this.capabilityService.getCurrentGoalCapabilities(X)},te.prototype.canSelectGoal=function(X){var m,O;return null===(O=null===(m=this.capabilities(X).selectGoal)||void 0===m?void 0:m.enabled)||void 0===O||O},te.prototype.isSelected=function(X){var m,O;return null===(O=null===(m=this.scorecardService.getCurrentScorecard())||void 0===m?void 0:m.selectedGoalIds)||void 0===O?void 0:O[X.id]},te.prototype.onRowClick=function(X,m){this.canSelectGoal(X)&&this.scorecardService.toggleSelectedGoal(X.id,!1,this.isClickMultiselect(m))},te.prototype.onNameClick=function(X,m){if(this.canSelectGoal(X))if((_.isNil(this.scorecardSelectionMode)||"ctrl"===this.scorecardSelectionMode)&&1===this.scorecardService.numberOfSelectedGoals()&&this.isSelected(X)&&_.isNil(this.scorecardService.getCurrentScorecard().activeGoalId))this.scorecardService.setActiveGoal(X.id);else{var O=this.isClickMultiselect(m);this.scorecardService.toggleSelectedGoal(X.id,!(O||"single"===this.scorecardSelectionMode),O)}m?.stopPropagation()},te.prototype.onCheckboxClick=function(X,m){this.canSelectGoal(X)&&this.scorecardService.toggleSelectedGoal(X.id,!1,"single"!==this.scorecardSelectionMode),m?.stopPropagation()},te.prototype.getGoalActionIcons=function(X,m,O){var I=this.getGoalActions(X);return _.map(_.filter(O?m?this.featureSwitches.featureSwitches.scorecardCompactView?[I.editGoal,I.openNotes,I.openContextMenu]:[I.openNotes,I.editGoal,I.openContextMenu]:this.featureSwitches.featureSwitches.scorecardCompactView?[I.goToReport,I.toggleFollow,I.openNotes]:[I.goToReport,I.openNotes,I.toggleFollow]:[I.openContextMenu],function(G){return!G.hidden}),function(G){return(0,r.pi)((0,r.pi)({},G),{onClick:function(ie){G.onClick(),ie.stopPropagation()}})})},te.prototype.getGoalMenuOptions=function(X,m,O){var I=this,H=this.getGoalActions(X),G=[];return m?(G=[H.goToReport,H.seeDetails,H.addSubGoal,H.toggleFollow,H.goToLinkedSource,H.deleteGoal],O||G.unshift(H.editGoal)):O?d.fF.assertFail("When action icons are shown, read mode has no context menu"):G=[H.goToReport,H.openNotes,H.toggleFollow],_.map(_.filter(G,function(Z){return!Z.hidden}),function(Z){return(0,r.pi)((0,r.pi)({},Z),{onClick:function(){Z.onClick(),I.overlay.closeAll()}})})},te.prototype.onContextMenuClick=function(X,m,O,I,H){var G=this;this.overlay.isOverlayOpen&&this.overlay.closeAll();var Z=this.getGoalMenuOptions(X,I,H),ye=m.pointerType?{x:m.x,y:m.y}:O,ae=this.overlay.open({component:o.H,data:{goalActions:Z},closeOnBackdropClick:!0,disableForwardClickOnBackdropClick:!0,hasCaret:!1,options:{hasBackdrop:!0,backdropClass:p.L,positionStrategy:this.overlay.position().flexibleConnectedTo(ye).withPositions([(0,l.Iz)(),(0,l.Kb)(),(0,l.Zz)(),(0,l.J7)()]).withPush(!0).withGrowAfterOpen(!0)}});return this.contextMenuOpenGoalId$.next(X.id),ae.onClose.subscribe(function(J){return G.contextMenuOpenGoalId$.next(void 0)}),m.stopPropagation(),ae},te.prototype.getGoalActions=function(X){var O,I,H,G,m=this,Z=this.capabilities(X);return{goToReport:{id:"goToReport",onClick:function(){return m.goalConnectionService.goToConnectedReport(X.valueConnection)},labelKey:"TileMenuOption_GoToReport",iconTooltipKey:"Metrics_Tooltip_Open_Report",iconName:"barchart",iconType:"pbi",hidden:_.isNil(X.valueConnection)},openNotes:{id:"openNotes",onClick:function(){m.canSelectGoal(X)&&m.scorecardService.setActiveGoal(X.id)},labelKey:"OpenNotes",iconTooltipKey:"Notes",iconName:"comment_16_regular",iconType:"tri"},seeDetails:{id:"seeDetails",onClick:function(){return m.scorecardService.setActiveGoal(X.id)},labelKey:"VisualContainer_ShowErrorDetails",iconName:"list",iconType:"pbi"},editGoal:{id:"editGoal",onClick:function(){return m.scorecardService.setGoalState(X.id,"Editing")},labelKey:"Metrics_Tooltip_Edit_Metric",iconName:"edit",iconType:"pbi",disabled:!(null!==(O=Z?.editGoal)&&void 0!==O&&O.enabled),disabledTooltipKey:null===(I=Z?.editGoal)||void 0===I?void 0:I.disabledMessageKey},toggleFollow:{id:"toggleFollow",onClick:function(){X.isFollowed?m.scorecardService.unfollowGoal(X.id):m.scorecardService.followGoal(X.id)},labelKey:X.isFollowed?"Metrics_Follow_Goals_Unfollow_This_Metric":"Metrics_Follow_Goals_Follow_This_Metric",iconName:X.isFollowed?"alert_16_filled":"alert_16_regular",iconType:"tri",hidden:!Z.followGoal},addSubGoal:{id:"addSubGoal",onClick:function(){m.scorecardService.addSubGoal(X.id),m.expansionService.expandGoal(X.id)},labelKey:"NewSubmetric",iconName:"add-multiple",iconType:"pbi",hidden:a.q.computeGoalLevel(this.scorecardService.getCurrentScorecard().goals,X)>=P.gT.MaxSubGoals,disabled:!(null!==(H=Z.createSubgoal)&&void 0!==H&&H.enabled),disabledTooltipKey:null===(G=Z.createSubgoal)||void 0===G?void 0:G.disabledMessageKey},deleteGoal:{id:"deleteGoal",onClick:function(){return m.scorecardService.deleteGoal(X.id)},labelKey:X.isLinked?"Metrics_LinkedMetrics_RemoveLinkedMetric":"Metrics_Tooltip_Delete_Metric",iconName:"delete",iconType:"pbi",hidden:!Z.deleteGoal},goToLinkedSource:{id:"goToLinkedSource",onClick:function(){return m.scorecardService.openLinkedSourceScorecard(X)},labelKey:"Metrics_LinkedMetrics_GoToSource",iconName:"open_16_regular",iconType:"tri",hidden:!X.isLinked},openContextMenu:{id:"openContextMenu",onClick:function(){return d.fF.assertFail("OpenContextMenu must be set up in template")},labelKey:"Options_Menu",iconName:"pbi-glyph-more-vertical",iconType:"mat"}}},te.prototype.isClickMultiselect=function(X){switch(this.scorecardSelectionMode){case"multiple":return!0;case"ctrl":return X?.ctrlKey;default:return!1}},te.\u0275fac=function(m){return new(m||te)(i.\u0275\u0275inject(C.G),i.\u0275\u0275inject(v.Nw),i.\u0275\u0275inject(p._),i.\u0275\u0275inject(k.D),i.\u0275\u0275inject(E.l),i.\u0275\u0275inject(s.vZ))},te.\u0275prov=i.\u0275\u0275defineInjectable({token:te,factory:te.\u0275fac}),te}()},10321:function(lt,Ge,t){"use strict";t.d(Ge,{L:function(){return p}});var r=t(89256),o=t(84522),P=t(11547),a=t(50423),d=t(58938),p=function(){function l(c){this.dialogService=c}return l.prototype.launchTargetsEditor=function(c,y,i){this.dialogService.open(r.A,{width:"70%",height:"80%",maxWidth:"100%",maxHeight:"100%",autoFocus:!1,data:{goal$:(0,P.of)(c),goalTargets$:y,onDoneCallback:i}})},l.prototype.launchValuesEditor=function(c,y,i){this.dialogService.open(o.S,{width:"70%",height:"80%",maxWidth:"100%",maxHeight:"100%",autoFocus:!1,data:{goal$:(0,P.of)(c),goalValues$:y,onDoneCallback:i}})},l.\u0275fac=function(y){return new(y||l)(a.\u0275\u0275inject(d.x))},l.\u0275prov=a.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac}),l}()},34340:function(lt,Ge,t){"use strict";t.d(Ge,{E:function(){return X},c:function(){return m}});var r=t(81337),o=t(60042),P=t(62831),a=t(60166),d=t(33554),p=t(11547),l=t(14172),c=t(17653),y=t(87088);function i(O,I,H,G){H&&"function"!=typeof H&&(G=H);var Z="function"==typeof H?H:void 0,ie=new d.t(O,I,G);return function(ye){return(0,y.O)(function(){return ie},Z)(ye)}}var C=t(46266),v=t(83317),k=t(77526),E=t(42195),s=t(50423),ne=t(41819),te=t(87426),X=function(O){return O[O.Default=0]="Default",O[O.ShowCheckin=1]="ShowCheckin",O[O.ShowStatusRules=2]="ShowStatusRules",O}({}),m=function(){function O(I,H,G){this.sideFlyoutService=I,this.scorecardHost=H,this.hierarchyService=G,this.destroy$=new d.t(1)}return O.prototype.openGoalDetails=function(I,H,G,Z){var ie=this;I.selectGoal(H);var ye=I.getCurrentScorecard(),ae=P.q.getGoal(ye.goals,H),J=I.getGoalValueCategoryLists(ae),N=I.getGoalStatuses(ae),he=this.traverse(I.getActiveGoal(),I).pipe((0,l.U)(function(pe){var ce,ge=null===(ce=ye.goals)||void 0===ce?void 0:ce.findIndex(function(se){return se.id===pe});return o.gT.ColorPalette[ge>0?ge%o.gT.ColorPalette.length:0]}));this.destroy$&&(this.destroy$.next(!0),this.destroy$.complete()),this.destroy$=new d.t(1),this.sideFlyoutService.show({componentManifest:{componentId:"GoalsDetailsPaneComponentId",modulePath:"@powerbi/GoalsDetailsPane/goals-details-pane.module#GoalsDetailsPaneModule",inputArgs:{goal$:I.getActiveGoal().pipe((0,c.b)(function(pe){pe&&I.expandGoalValues(pe.id)}),i(1),(0,C.x)(),(0,v.R)(this.destroy$)),scorecardHierarchyInfo$:this.hierarchyService?this.hierarchyService.getHierarchyDisplayInfoObservable(I.hierarchyPaths$):(0,p.of)({showingAll:!0}),openAction:G,scorecardConfiguration:Z,goalPreviewColor$:he,goalValueCategories:J,goalStatuses:N,showGoalTargetsInChart$:I.getScorecard().pipe((0,l.U)(function(pe){return pe.showGoalTargetsInChart})),close:function(){ie.sideFlyoutService.hide(),I.unselectAllGoals()},saveGoalValue:function(ce,ge){return(0,r.mG)(ie,void 0,void 0,function(){var se,De,fe,Oe;return(0,r.Jh)(this,function(be){switch(be.label){case 0:return[4,I.saveGoalValue(ce,ge)];case 1:return be.sent(),se=I.getCurrentScorecard(),De=P.q.getGoal(se.goals,ce),null===(fe=this.scorecardHost)||void 0===fe||fe.onUpdateScorecard(se),null===(Oe=this.scorecardHost)||void 0===Oe||Oe.updateCachedGoal(De),[2]}})})},insertNote:function(ce,ge,se){return I.insertNote(ce,ge,se)},deleteNote:function(ce){return I.deleteNote(ce)},editNote:function(ce,ge,se,De){return I.editNote(ce,ge,se,De)},deleteGoalValue:function(ce){return I.deleteGoalValue(ce)},saveGoal:function(ce){return I.saveGoal(ce.id,ce)},deleteGoalQueryConnection:function(ce,ge){return I.deleteGoalQueryConnection(ce,ge)},getRefreshHistory:function(ce){return I.getRefreshHistory(ce)},refreshGoalValue:function(ce,ge){return I.refreshGoalValue(ce,ge)},isEditMode$:I.isEditMode(),columnSettings$:I.getColumnSettings(),saveStatusRules:function(ce,ge){return I.saveStatusRules(ce,ge)},getStatusRules:function(ce){return I.getStatusRules(ce)},updateGoalValueConnectionSettings:function(ce,ge){return I.updateGoalValueConnectionSettings(ce,ge)},takeOverConnection:function(ce,ge){return I.takeOverGoalQueryConnection(ce,ge)},toggleShowGoalTargets:function(ce){return I.toggleShowGoalTargetsInChart(ce)},followGoal:function(ce){return I.followGoal(ce)},unfollowGoal:function(ce){return I.unfollowGoal(ce)}}}})},O.prototype.openGoalStatusRulesPane=function(I,H,G,Z){var ie=this;this.sideFlyoutService.show({componentManifest:{componentId:"StatusRulesPaneComponentId",modulePath:"@powerbi/GoalsDetailsPane/goals-details-pane.module#GoalsDetailsPaneModule",inputArgs:{goal:H,goalStatuses:I,statusRules:G,close:function(){return ie.sideFlyoutService.hide()},saveStatusRules:function(ae){return(0,r.mG)(ie,void 0,void 0,function(){return(0,r.Jh)(this,function(J){switch(J.label){case 0:return[4,Z(ae)];case 1:return J.sent(),this.sideFlyoutService.hide(),[2]}})})}}}})},O.prototype.openEditStatusesPane=function(I,H,G){var Z=this;this.sideFlyoutService.show({componentManifest:{componentId:"EditStatusesPaneComponentId",modulePath:"@powerbi/GoalsDetailsPane/goals-details-pane.module#GoalsDetailsPaneModule",inputArgs:{goalStatuses$:I.getScorecard().pipe((0,l.U)(function(ie){return ie.goalStatuses}),(0,k.x)()),onSave:H,close:function(){return Z.sideFlyoutService.hide()},isReadOnly:G}}})},O.prototype.openScorecardSettingsPane=function(I,H,G){var Z=this;this.sideFlyoutService.show({componentManifest:{componentId:"ScorecardSettingsPaneComponentId",modulePath:"@powerbi/GoalsDetailsPane/goals-details-pane.module#GoalsDetailsPaneModule",inputArgs:{scorecard$:I.getScorecard(),roles$:I.getScorecard().pipe((0,c.b)(function(ie){I.ensureRolesLoaded()}),(0,l.U)(function(ie){return ie.roles}),i(1),(0,C.x)()),scorecardSettingsPaneTabIndex:G,onSave:H,close:function(){return Z.sideFlyoutService.hide()},setAsDefaultRole:function(ye){return I.setAsDefaultRole(ye)},editRole:function(ye){return Z.openRoleSettingsPane(I,!1,ye)},deleteRole:function(ye){return I.deleteRole(ye)},openRoleSettingsPaneWithNewRole:function(){return Z.openRoleSettingsPane(I,!0)}}}})},O.prototype.openScorecardColumnSettingsPane=function(I){var H=this;this.sideFlyoutService.show({componentManifest:{componentId:"ScorecardColumnSettingsPaneComponentId",modulePath:"@powerbi/GoalsDetailsPane/goals-details-pane.module#GoalsDetailsPaneModule",inputArgs:{scorecardService:I,close:function(){return H.sideFlyoutService.hide()}}}})},O.prototype.openCategoryListsEditPane=function(I,H,G){var Z=this;this.sideFlyoutService.show({componentManifest:{componentId:"CategoryListsEditPaneComponentId",modulePath:"@powerbi/GoalsDetailsPane/goals-details-pane.module#GoalsDetailsPaneModule",inputArgs:{scorecardService:I,creatingNewList:H,applyChanges:G,close:function(){return Z.sideFlyoutService.hide()}}}})},O.prototype.openCategoricalValuesEditPane=function(I){this.sideFlyoutService.show({componentManifest:{componentId:"CategoricalValuesEditPaneComponentId",modulePath:"@powerbi/GoalsDetailsPane/goals-details-pane.module#GoalsDetailsPaneModule",inputArgs:{goalValueCategoryListsService:I}}})},O.prototype.openRoleSettingsPane=function(I,H,G){var Z=this;this.sideFlyoutService.show({componentManifest:{componentId:"RoleSettingsPaneComponentId",modulePath:"@powerbi/GoalsDetailsPane/goals-details-pane.module#GoalsDetailsPaneModule",inputArgs:{scorecard$:I.getScorecard(),goals$:I.getGoals(),roles$:I.getScorecard().pipe((0,c.b)(function(ie){I.ensureRolesLoaded()}),(0,l.U)(function(ie){return ie.roles})),close:function(){return Z.sideFlyoutService.hide()},cancel:function(){return Z.openScorecardSettingsPane(I,function(ye){return I.updateScorecard(ye)},1)},createRole:function(ye){return I.createRole(ye)},updateRole:function(ye,ae){return I.updateRole(ye,ae)},setAsDefaultRole:function(ye){return I.setAsDefaultRole(ye)},deleteRole:function(ye){return I.deleteRole(ye)},addNewRole:H,selectedRoleId:G}},paneClass:"role-settings"})},O.prototype.openBulkEditingPane=function(I,H){var G=this,Z=I.getGoalStatuses(),ie=I.getGoalValueCategoryLists();this.sideFlyoutService.show({componentManifest:{componentId:"BulkEditingPaneComponentId",modulePath:"@powerbi/GoalsDetailsPane/goals-details-pane.module#GoalsDetailsPaneModule",inputArgs:{selectedGoalIds$:I.getSelectedGoalIdsObservable(),selectedGoals$:I.getSelectedGoalsObservable(),goalStatuses:Z,goalValueCategories:ie,onSave:H,close:function(){return G.sideFlyoutService.hide()}}}})},O.prototype.closeGoalDetails=function(){this.destroy$&&(this.destroy$.next(!0),this.destroy$.complete()),this.sideFlyoutService.hide()},O.prototype.traverse=function(I,H){var G=this;return I.pipe((0,E.zg)(function(Z){return Z.parentId?G.traverse(H.getGoal(Z.parentId),H):(0,p.of)(Z.id)}))},O.\u0275fac=function(H){return new(H||O)(s.\u0275\u0275inject(ne.p),s.\u0275\u0275inject(a.M,8),s.\u0275\u0275inject(te.G,8))},O.\u0275prov=s.\u0275\u0275defineInjectable({token:O,factory:O.\u0275fac}),O}()},99327:function(lt,Ge,t){"use strict";t.d(Ge,{X:function(){return d}});var r=t(50547),o=t(50423),P=t(81213),a=t(65181),d=function(){function p(l,c){this.errorService=l,this.localizationService=c}return p.prototype.showUserError=function(l,c,y){var i;void 0===y&&(y="GenericErrorDescription"),this.errorService.error(this.localizationService.get(y),c,{requestId:l?.requestId,statusCode:null===(i=l?.status)||void 0===i?void 0:i.toString()})},p.prototype.showThrottlingError=function(){this.errorService.errorNoDefaultAdditionalErrorInfo(this.localizationService.get("You_Have_Exceeded_Limit_Try_Again_Later"),"throttling",{title:this.localizationService.get("Rate_Limit_Is_Exceeded"),level:r.U.Information,isDismissable:!0,showAdditionalErrorInfo:!1})},p.\u0275fac=function(c){return new(c||p)(o.\u0275\u0275inject(P.T),o.\u0275\u0275inject(a.o))},p.\u0275prov=o.\u0275\u0275defineInjectable({token:p,factory:p.\u0275fac}),p}()},73911:function(lt,Ge,t){"use strict";t.d(Ge,{$:function(){return X}});var r=t(81337),o=t(60042),P=t(29730),a=t(58614),d=t(62458),p=t(35510),l=t(30794),c=t(59017),y=t(83317),i=t(14172),C=t(57243),v=t(48787),k=t(50423),E=t(49223),s=t(87426),ne=t(65181),te=t(32027),X=function(){function m(O,I,H,G,Z){var ie=this;this.scorecardService=O,this.hierarchyService=I,this.localizationService=H,this.viewsService=G,this.goalsHttpService=Z,this._goalsByHierarchyItemId$=new p.X({}),this._selectedHierarchyItems$=new p.X([]),this._displaySettings$=new p.X({}),this.onDestroy$=new l.xQ,this._isLoadingView$=new p.X(!1),this.hierarchyService.hierarchyItems$.pipe((0,y.R)(this.onDestroy$)).subscribe(function(ye){var ae;if(ie._selectedHierarchyItems$.value.length>1){for(var J=[],N=(0,r.pi)({},ie._goalsByHierarchyItemId$.value),he=0,pe=ie._selectedHierarchyItems$.value;he<pe.length;he++){var ce=pe[he];if(ce.id){var ge=(0,P.IX)(ce),se=null===(ae=(0,P.qB)([ge],ye))||void 0===ae?void 0:ae[0];if(se?.id&&se.id!==ce.id){J.push(se),N[se.id]=N[ce.id],delete N[ce.id];continue}}J.push(ce)}ie._selectedHierarchyItems$.next(J),ie._goalsByHierarchyItemId$.next(N)}}),this.totalItem={id:void 0,value:this.localizationService.get("Visual_Totals"),parent:void 0,parentHierarchyItemId:void 0,level:0},this._hasViewChanges$=(0,c.aj)([this.selectedHierarchyItems$,this.viewsService.getDefaultView("Heatmap")]).pipe((0,i.U)(function(ye){var ae=ye[0],J=ye[1];return J?!_.isEqual((0,P.t7)(ae),J.heatmapViewDetails.hierarchyItemPaths):_.size(ae)>1}),(0,C.d)({bufferSize:1,refCount:!0})),this._hasSettingsChanges$=(0,c.aj)([this._displaySettings$,this.viewsService.getDefaultView("Heatmap")]).pipe((0,i.U)(function(ye){var ae,J=ye[0],N=ye[1],he=null!==(ae=N?.heatmapViewDetails.heatmapDisplaySettings)&&void 0!==ae?ae:o.rl;return!_.isEqual(J,he)}),(0,C.d)({bufferSize:1,refCount:!0}))}return m.prototype.ngOnDestroy=function(){this.onDestroy$.next(!0),this.onDestroy$.complete()},Object.defineProperty(m.prototype,"goalsByHierarchyItemId$",{get:function(){return this._goalsByHierarchyItemId$},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"selectedHierarchyItems$",{get:function(){return this._selectedHierarchyItems$},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"selectedHierarchyItems",{get:function(){return this._selectedHierarchyItems$.value},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"displaySettings$",{get:function(){return this._displaySettings$},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"hasViewChanges$",{get:function(){return this._hasViewChanges$},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"hasSettingsChanges$",{get:function(){return this._hasSettingsChanges$},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"isSaving$",{get:function(){return this.viewsService.isSaving$},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"isLoading$",{get:function(){return this._isLoadingView$},enumerable:!1,configurable:!0}),m.prototype.addHierarchyItem=function(O){return(0,r.mG)(this,void 0,void 0,function(){var I;return(0,r.Jh)(this,function(H){switch(H.label){case 0:return I=_.uniqBy((0,r.ev)((0,r.ev)([],this._selectedHierarchyItems$.value,!0),[O],!1),function(G){return G.id}),this._selectedHierarchyItems$.next(I),[4,this.loadGoalsForHierarchyItem(O)];case 1:return H.sent(),[2]}})})},m.prototype.removeHierarchyItem=function(O){O.id?this._selectedHierarchyItems$.next(_.filter(this._selectedHierarchyItems$.value,function(I){return I.id!==O.id})):d.fF.assertFail("Cannot remove totals")},m.prototype.setHierarchyItems=function(O){return(0,r.mG)(this,void 0,void 0,function(){var I,H,G,Z;return(0,r.Jh)(this,function(ye){switch(ye.label){case 0:for(I=_.uniqBy((0,r.ev)([this.totalItem],O,!0),function(ae){return ae.id}),this._selectedHierarchyItems$.next(I),H=[],G=0,Z=I;G<Z.length;G++)H.push(this.loadGoalsForHierarchyItem(Z[G]));return[4,Promise.all(H)];case 1:return ye.sent(),[2]}})})},m.prototype.reset=function(O){void 0===O&&(O=!1),this._selectedHierarchyItems$.next([this.totalItem]),O&&this.clearCache()},m.prototype.refreshAll=function(){for(var O=0,I=this._selectedHierarchyItems$.value;O<I.length;O++)this.loadGoalsForHierarchyItem(I[O],!0)},m.prototype.clearCache=function(){this._goalsByHierarchyItemId$.next({})},m.prototype.loadDefaultView=function(O,I,H){var G,Z;return(0,r.mG)(this,void 0,void 0,function(){var ie,ye,ae;return(0,r.Jh)(this,function(J){switch(J.label){case 0:if(!O&&!I)return d.fF.assertFail("loadDefaultView called without restoring items or settings"),[2];this._isLoadingView$.next(!0),J.label=1;case 1:return J.trys.push([1,,8,9]),[4,this.viewsService.loadViews(!1)];case 2:return J.sent(),[4,this.viewsService.getDefaultView("Heatmap").pipe((0,v.q)(1)).toPromise()];case 3:return ie=J.sent(),I&&(ye=null===(G=ie?.heatmapViewDetails)||void 0===G?void 0:G.heatmapDisplaySettings,this.setDisplaySettings((0,r.pi)((0,r.pi)({},o.rl),ye))),O?(ae=void 0,ie?[4,this.hierarchyService.getHierarchyItemsForPath(null===(Z=ie?.heatmapViewDetails)||void 0===Z?void 0:Z.hierarchyItemPaths).pipe((0,v.q)(1)).toPromise()]:[3,5]):[3,7];case 4:ae=J.sent(),J.label=5;case 5:return[4,this.setHierarchyItems(ae=ae||H||[])];case 6:J.sent(),J.label=7;case 7:return[3,9];case 8:return this._isLoadingView$.next(!1),[7];case 9:return[2]}})})},m.prototype.saveView=function(O,I){return(0,r.mG)(this,void 0,void 0,function(){var H;return(0,r.Jh)(this,function(G){switch(G.label){case 0:return O||I?[4,this.viewsService.getDefaultView("Heatmap").pipe((0,v.q)(1)).toPromise()]:(d.fF.assertFail("saveView called without saving items or settings"),[2]);case 1:return H=G.sent(),H=_.cloneDeep(H)||{isDefault:!0,name:"",viewType:"Heatmap",id:void 0,scorecardId:this.scorecardId,heatmapViewDetails:{heatmapDisplaySettings:void 0,hierarchyItemPaths:void 0}},O&&(H.heatmapViewDetails.hierarchyItemPaths=(0,P.t7)(this.selectedHierarchyItems)),I&&(H.heatmapViewDetails.heatmapDisplaySettings=this._displaySettings$.value),[4,this.viewsService.saveView(H)];case 2:return G.sent(),[2]}})})},m.prototype.loadGoalsForHierarchyItem=function(O,I){return void 0===I&&(I=!1),(0,r.mG)(this,void 0,void 0,function(){var H,G,Z,ie=this;return(0,r.Jh)(this,function(ye){switch(ye.label){case 0:return H=this.scorecardService.getCurrentScorecard(),d.fF.assertValue(H,"scorecard not loaded"),this.scorecardId!==H.id&&(this._goalsByHierarchyItemId$.next({}),this.scorecardId=H.id,I=!0),!I&&this._goalsByHierarchyItemId$.value[O?.id]?[2]:(this._goalsByHierarchyItemId$.next((0,r.pi)((0,r.pi)({},this._goalsByHierarchyItemId$.value),((Z={})[O?.id]={},Z))),G=O?.id?(0,P.t7)([O]):void 0,[4,this.goalsHttpService.getScorecard(H.groupId,H.id,!0,G).toPromise().then(function(ae){var J,N=ie.checkGoalsConnectedToHierarchy(G,ae.goals),he=_.keyBy(N,"id");ie._goalsByHierarchyItemId$.next((0,r.pi)((0,r.pi)({},ie._goalsByHierarchyItemId$.value),((J={})[O?.id]=he,J)))}).catch(function(ae){var J;d.fF.assertFail(ae),ie._goalsByHierarchyItemId$.next((0,r.pi)((0,r.pi)({},ie._goalsByHierarchyItemId$.value),((J={})[O?.id]=null,J)))})]);case 1:return ye.sent(),[2]}})})},m.prototype.setDisplaySettings=function(O){this._displaySettings$.next(O)},m.prototype.checkGoalsConnectedToHierarchy=function(O,I){var H=this;return _.map(I,function(G){var Z,ie,ye=!_.isEmpty(O),ae=ye&&G.valueConnection&&!H.hierarchyService.isDatasetMappedToHierarchyPath(null===(Z=G.valueConnection)||void 0===Z?void 0:Z.datasetId,O),J=ye&&G.targetConnection&&!H.hierarchyService.isDatasetMappedToHierarchyPath(null===(ie=G.targetConnection)||void 0===ie?void 0:ie.datasetId,O);return(0,r.pi)((0,r.pi)({},G),{isCurrentValueNotConnectedToHierarchy:ae,isTargetValueNotConnectedToHierarchy:J})})},m.\u0275fac=function(I){return new(I||m)(k.\u0275\u0275inject(E.G),k.\u0275\u0275inject(s.G),k.\u0275\u0275inject(ne.o),k.\u0275\u0275inject(te.w),k.\u0275\u0275inject(a.f))},m.\u0275prov=k.\u0275\u0275defineInjectable({token:m,factory:m.\u0275fac}),m}()},21719:function(lt,Ge,t){"use strict";t.d(Ge,{D:function(){return i}});var r=t(81337),o=t(14786),P=t(35510),a=t(33554),d=t(50423),p=t(41819),l=t(49223),c=t(87426),y=t(96608),i=function(){function C(v,k,E,s){this.sideFlyoutService=v,this.scorecardService=k,this.hierarchyService=E,this.telemetryService=s,this._showHierarchiesPane$=new P.X(!1),this._showHeatmapConfigurationPane$=new P.X(!1),this._showHeatmapDisplaySettingsPane$=new P.X(!1),this.showHierarchiesPane$=this._showHierarchiesPane$.asObservable(),this.showHeatmapConfigurationPane$=this._showHeatmapConfigurationPane$.asObservable(),this.showHeatmapDisplaySettingsPane$=this._showHeatmapDisplaySettingsPane$.asObservable()}return C.prototype.openHierarchiesBuilder=function(v){return(0,r.mG)(this,void 0,void 0,function(){var k,s,ne=this;return(0,r.Jh)(this,function(te){switch(te.label){case 0:return this.telemetryService.logEvent(o.AY,{entryPoint:v}),k=new a.t(1),this.sideFlyoutService.show({componentManifest:{componentId:"HierarchyBuilderPaneComponentId",modulePath:"@powerbi/GoalsHierarchy/goals-hierarchy.module#GoalsHierarchyModule",inputArgs:{scorecard$:this.scorecardService.getScorecard(),close:function(m){ne.sideFlyoutService.hide(),k.next(m),k.complete()},saveQueryHierarchyAsUser:function(m){ne.scorecardService.updateScorecard({queryHierarchyAsUser:m})}}},paneClass:"hierarchy-builder"}),[4,k.toPromise()];case 1:return te.sent()&&(s=this.scorecardService.getCurrentScorecard(),this.scorecardService.setActiveHierarchy(void 0),this.hierarchyService.loadHierarchies(s.groupId,s.id,!1)),[2]}})})},C.prototype.showHierarchiesPane=function(){this._showHierarchiesPane$.next(!0)},C.prototype.hideHierarchiesPane=function(){this._showHierarchiesPane$.next(!1)},C.prototype.showHeatmapConfigurationPane=function(){this.hideHeatmapDisplaySettingsPane(),this._showHeatmapConfigurationPane$.next(!0)},C.prototype.hideHeatmapConfigurationPane=function(){this._showHeatmapConfigurationPane$.next(!1)},C.prototype.showHeatmapDisplaySettingsPane=function(){this.hideHeatmapConfigurationPane(),this._showHeatmapDisplaySettingsPane$.next(!0)},C.prototype.hideHeatmapDisplaySettingsPane=function(){this._showHeatmapDisplaySettingsPane$.next(!1)},C.\u0275fac=function(k){return new(k||C)(d.\u0275\u0275inject(p.p),d.\u0275\u0275inject(l.G),d.\u0275\u0275inject(c.G),d.\u0275\u0275inject(y.y0))},C.\u0275prov=d.\u0275\u0275defineInjectable({token:C,factory:C.\u0275fac}),C}()},87426:function(lt,Ge,t){"use strict";t.d(Ge,{G:function(){return pe}});var r=t(81337),o=t(29730),P=t(3468),a=t(62458);function l(ce){return(0,r.pi)((0,r.pi)({},ce),{connections:_.map(ce.connections,function(ge){return function(ce,ge){var se={datasetId:ce.datasetId,levels:_.map(ge,function(De){return function(ce){return{levelId:ce.levelId,fieldExpr:ce.field?P.ib.deserializeExpr(JSON.parse(ce.field)):void 0,filter:ce.fieldFilter?P.ib.deserializeFilter(JSON.parse(ce.fieldFilter)):void 0}}(_.find(ce.levels,function(Oe){return Oe.levelId===De.id})??{levelId:De.id,field:void 0})})};return ce.ownerField&&(se.ownerFieldExpr=P.ib.deserializeExpr(JSON.parse(ce.ownerField))),se}(ge,ce.levels)})})}function c(ce){return{id:ce.id,levels:ce.levels,name:ce.name,scorecardId:ce.scorecardId,owner:ce.owner,connections:_.map(ce.connections,function(ge){return function(ce){var ge={datasetId:ce.datasetId,levels:_.map(ce.levels,function(se){return function(ce){return{levelId:ce.levelId,field:ce.fieldExpr?JSON.stringify(P.ib.serializeExpr(ce.fieldExpr)):void 0,fieldFilter:ce.filter?JSON.stringify(P.ib.serializeFilter(ce.filter)):void 0}}(se)})};return ce.ownerFieldExpr&&(ge.ownerField=JSON.stringify(P.ib.serializeExpr(ce.ownerFieldExpr))),ge}(ge)})}}var ne=t(58614),te=t(72489),X=t(74466),m=t(35510),O=t(11547),I=t(9936),H=t(59017),G=t(77526),Z=t(59973),ie=t(14172),ye=t(48787),ae=t(57243),J=t(50423),N=t(81213),he=t(65181),pe=function(){function ce(ge,se,De){this.goalsHttpService=ge,this.errorService=se,this.localization=De,this._hierarchies$=new m.X(null),this._hierarchyItems$=new m.X({}),this._hierarchyErrors$=new m.X({}),this._isSaving$=new m.X(!1),this.loadingHierarchyItems=new Set,this.isLoadingHierarchies=!1,this.isSaving$=this._isSaving$,this.hierarchies$=this._hierarchies$.pipe((0,G.x)()),this.hierarchyItems$=this._hierarchyItems$.pipe((0,Z.h)(function(fe){return!_.isEmpty(fe)}),(0,G.x)()),this.hierarchyErrors$=this._hierarchyErrors$.pipe((0,G.x)()),this.hasHierarchies$=this.hierarchies$.pipe((0,Z.h)(function(fe){return!!fe}),(0,ie.U)(function(fe){return!_.isEmpty(fe)}),(0,G.x)())}return Object.defineProperty(ce.prototype,"hierarchies",{get:function(){return this._hierarchies$.value},enumerable:!1,configurable:!0}),Object.defineProperty(ce.prototype,"hierarchyItems",{get:function(){return this._hierarchyItems$.value},enumerable:!1,configurable:!0}),Object.defineProperty(ce.prototype,"hierarchyErrors",{get:function(){return this._hierarchyErrors$.value},enumerable:!1,configurable:!0}),ce.prototype.setHierarchies=function(ge){this._hierarchies$.next(ge)},ce.prototype.setHierarchyItems=function(ge,se){var De=_.find(this.hierarchies,function(fe){return fe.id===ge});a.fF.assertValue(De,"No hierarchies with id ".concat(ge)),this._hierarchyItems$.next((0,X.Uy)(this.hierarchyItems,function(fe){fe[ge]=se}))},ce.prototype.setHierarchyErrors=function(ge){this._hierarchyErrors$.next(ge)},ce.prototype.saveHierarchies=function(){var ge;return(0,r.mG)(this,void 0,void 0,function(){var se,De,fe,Oe,be,Fe,ze,Ke,He,Je,j,nt,Ue,oe,g,u=this;return(0,r.Jh)(this,function(F){switch(F.label){case 0:if(!this.hierarchies||!this.scorecardId||this.isLoadingHierarchies)return a.fF.assertFail("Hierarchies not loaded"),[2];if(this._isSaving$.value)return a.fF.assertFail("Save already in progress"),[2];if(_.some(this.hierarchyErrors,function(W){return _.some(W,function(ee){return"Error"===ee.severity})}))return a.fF.assertFail("Save blocked by error"),[2];this._isSaving$.next(!0),F.label=1;case 1:return F.trys.push([1,11,12,13]),[4,this.goalsHttpService.getScorecardHierarchies(this.groupId,this.scorecardId).toPromise()];case 2:for(se=F.sent(),De=_.filter(se,function(W){return!_.some(u.hierarchies,function(ee){return W.id===ee.id})}),fe=[],Oe=_.filter(_.flatten(_.values(this.hierarchyErrors)),function(W){return"MetricsHierarchy_NoDatasetAccess"===W.code}),be=function(ee){var U=_.find(Fe.hierarchies,function(B){return B.id===ee.hierarchyId});a.fF.assertValue(U,"Hierarchy with id ".concat(ee.hierarchyId," not found to clear invalid mapping"));var Q=_.find(U.connections,function(B){return B.datasetId===ee.datasetId});a.fF.assertValue(Q,"Connection with id ".concat(ee.datasetId," not found to clear invalid mapping")),Q.levels.forEach(function(B){B.fieldExpr=void 0,B.filter=void 0})},Fe=this,ze=0,Ke=Oe;ze<Ke.length;ze++)be(Ke[ze]);He=function(ee){var U,Q,B,w;return(0,r.Jh)(this,function(q){switch(q.label){case 0:return ee.isNew?_.some(ee.connections,function(le){return _.some(le?.levels,function(de){return!!de?.fieldExpr})})?(Q=function(ce){var ge=c(ce);return{name:ge.name,levels:ge.levels,connections:ge.connections}}(ee),[4,Je.goalsHttpService.createScorecardHierarchy(Je.groupId,Je.scorecardId,Q).toPromise()]):[3,2]:[3,3];case 1:B=q.sent(),w=l(B),fe.push(w),q.label=2;case 2:return[3,7];case 3:return(U=_.find(se,function(le){return le.id===ee.id}))?[3,4]:(a.fF.assertFail("Cannot updated a deleted hierarchy"),[3,7]);case 4:return _.isEqual(c(l(U)),c(ee))?[3,6]:(Q=function(ce){return{hierarchy:c(ce)}}(ee),[4,Je.goalsHttpService.updateScorecardHierarchy(Je.groupId,Je.scorecardId,ee.id,Q).toPromise()]);case 5:return B=q.sent(),w=l(B),fe.push(w),[3,7];case 6:fe.push(ee),q.label=7;case 7:return[2]}})},Je=this,j=0,nt=this.hierarchies,F.label=3;case 3:return j<nt.length?[5,He(nt[j])]:[3,6];case 4:F.sent(),F.label=5;case 5:return j++,[3,3];case 6:Ue=0,oe=De,F.label=7;case 7:return Ue<oe.length?[4,this.goalsHttpService.deleteScorecardHierarchy(this.groupId,this.scorecardId,oe[Ue].id).toPromise()]:[3,10];case 8:F.sent(),F.label=9;case 9:return Ue++,[3,7];case 10:return this.setHierarchies(fe),[3,13];case 11:throw g=F.sent(),this.errorService.error(this.localization.get("MetricsHierarchy_Cannot_Save_Hierarchies"),"GoalsCannotSaveHierarchies",{requestId:g?.requestId,statusCode:null===(ge=g?.status)||void 0===ge?void 0:ge.toString()}),g;case 12:return this._isSaving$.next(!1),[7];case 13:return[2]}})})},ce.prototype.loadHierarchies=function(ge,se,De){var fe=this;return void 0===De&&(De=!0),this.scorecardId===se&&De&&this.hierarchies||this.scorecardId===se&&this.isLoadingHierarchies||(this.scorecardId=se,this.groupId=ge,this.isLoadingHierarchies=!0,this.goalsHttpService.getScorecardHierarchies(ge,this.scorecardId).toPromise().then(function(Oe){if(fe.setHierarchies(function(ce){return _.map(ce,function(ge){return l(ge)})}(Oe)),!De&&!_.isEmpty(fe.hierarchyItems))for(var be in fe.hierarchyItems)fe.loadHierarchyItems(be,!1)}).catch(function(Oe){throw fe.setHierarchies([]),Oe}).finally(function(){fe.isLoadingHierarchies=!1,fe.gc()})),this.hierarchies$},ce.prototype.loadHierarchyItems=function(ge,se){var De=this;return void 0===se&&(se=!0),a.fF.assertValue(this.scorecardId,"No scorecard loaded"),(!se||_.isEmpty(this.hierarchyItems[ge])&&!this.loadingHierarchyItems.has(ge))&&(this.loadingHierarchyItems.add(ge),this.goalsHttpService.getScorecardHierarchyItems(this.groupId,this.scorecardId,ge).toPromise().then(function(fe){return De.setHierarchyItems(ge,function(ce){for(var ge=_.cloneDeep(ce),se=_.groupBy(ge,function(ze){return ze.id}),De=[],fe=0,Oe=ge;fe<Oe.length;fe++){var be=Oe[fe];if(be.parentHierarchyItemId){var Fe=_.first(se[be.parentHierarchyItemId]);be.parent=Fe,Fe?Fe.children?Fe.children.push(be):Fe.children=[be]:a.fF.assertFail("Parent item missing")}else De.push(be)}return De}(fe))}).catch(function(fe){var Oe;a.fF.assertFail("Error loading hierarchy items. "+(null===(Oe=fe?.error)||void 0===Oe?void 0:Oe.message)),De.setHierarchyItems(ge,[])}).finally(function(){return De.loadingHierarchyItems.delete(ge)})),this.hierarchyItems$.pipe((0,ie.U)(function(fe){return fe[ge]}),(0,G.x)())},ce.prototype.getHierarchyItemsForPath=function(ge){var se=this;return _.isEmpty(ge)?(0,O.of)(null):(0,I.D)(_.map(ge,function(De){return se.loadHierarchyItems(De.hierarchyId).pipe((0,Z.h)(function(fe){return!!fe}),(0,ye.q)(1))})).pipe((0,ie.U)(function(){return(0,o.qB)(ge,se.hierarchyItems)}))},ce.prototype.getHierarchyDisplayInfoObservable=function(ge){var se=this;return(0,H.aj)([ge,this.hierarchies$]).pipe((0,ie.U)(function(De){return se.getHierarchyDisplayInfo(De[1],De[0])}),(0,ae.d)({bufferSize:1,refCount:!0}))},ce.prototype.getHierarchyDisplayInfo=function(ge,se){var fe,De=this.localization.get("All"),Oe=_.map(se,function(Ke){return(0,r.pi)((0,r.pi)({},Ke),{levels:Ke.levels.map(function(je){return(0,te.WU)(je)})})}),be=_.keyBy(Oe,function(Ke){return Ke.hierarchyId});if(!_.isEmpty(se)){var Fe=_.map(ge,function(Ke){var je;return _.last(null===(je=be[Ke.id])||void 0===je?void 0:je.levels)});fe=_.join(_.compact(Fe),", ")}var ze=_.map(ge,function(Ke){return _.has(be,Ke.id)?(0,r.pi)((0,r.pi)({},be[Ke.id]),{hierarchyName:Ke.name}):{hierarchyId:Ke.id,hierarchyName:Ke.name,levels:[De]}});return{showingAll:_.isEmpty(se),displayLabel:fe,displayPaths:ze}},ce.prototype.formatHierarchyItemPath=function(ge){var se;return(0,r.pi)((0,r.pi)({},ge),{levels:ge.levels.map(function(De){return(0,te.WU)(De)}),hierarchyName:null===(se=this.hierarchies.find(function(De){return De.id===ge.hierarchyId}))||void 0===se?void 0:se.name})},ce.prototype.getActiveHierarchies=function(ge){return _.intersectionWith(this.hierarchies,ge,function(se,De){return se.id===De.hierarchyId})},ce.prototype.isDatasetMappedToHierarchyPath=function(ge,se){if(_.isNil(ge)||_.isEmpty(se))return a.fF.assertFail("Expected datasetId and hierarchyPaths to be defined"),!1;var De=this.getActiveHierarchies(se);return _.some(De,function(fe){return _.some(fe.connections,function(Oe){return Oe.datasetId===ge&&_.some(Oe.levels,function(be){return!!be.fieldExpr})})})},ce.prototype.isGoalOwnerMappedToHierarchy=function(ge,se){if(!ge.valueConnection&&!ge.targetConnection||_.isEmpty(se))return!1;var De=this.getActiveHierarchies(se);return _.some(De,function(fe){var Oe=_.find(fe.connections,function(be){var Fe,ze;return be.datasetId===(null===(Fe=ge.valueConnection)||void 0===Fe?void 0:Fe.datasetId)||be.datasetId===(null===(ze=ge.targetConnection)||void 0===ze?void 0:ze.datasetId)});return!!Oe?.ownerFieldExpr})},ce.prototype.gc=function(){var ge=this,se=new Set(_.map(this.hierarchies,function(fe){return fe.id})),De=(0,X.Uy)(this.hierarchyItems,function(fe){for(var Oe=0,be=Object.keys(ge.hierarchyItems);Oe<be.length;Oe++){var Fe=be[Oe];se.has(Fe)||delete fe[Fe]}});De!==this.hierarchyItems&&this._hierarchyItems$.next(De)},ce.\u0275fac=function(se){return new(se||ce)(J.\u0275\u0275inject(ne.f),J.\u0275\u0275inject(N.T),J.\u0275\u0275inject(he.o))},ce.\u0275prov=J.\u0275\u0275defineInjectable({token:ce,factory:ce.\u0275fac}),ce}()},20930:function(lt,Ge,t){"use strict";t.d(Ge,{N:function(){return p}});var r=t(60042),o=t(14786),P=t(50423),a=t(65181),d=t(56083),p=function(){function l(c,y){this.localizationService=c,this.tutorialPopupService=y}return l.prototype.startFirstGoalTutorial=function(){this.tutorialPopupService.startTutorial(this.createFirstGoalTutorialModel())},l.prototype.createFirstGoalTutorialModel=function(){var c,y="ScorecardTutorialFirstGoalName",i="ScorecardTutorialFirstGoalCurrent",C="ScorecardTutorialFirstGoalTarget";return{isSequentialTutorial:!0,itemKeys:[y,i,C],items:(c={},c[y]={title:this.localizationService.get("ScorecardTutorial_MetricName_Title"),text:this.localizationService.get("ScorecardTutorial_MetricName_Text"),buttonLabel:this.localizationService.get("TutorialPopup_Next"),dataStoreKey:y,canShow:function(){return $(r.gT.ScorecardTutorial_FirstGoalNameSelector).length>0},attachTo:function(){return $(r.gT.ScorecardTutorial_FirstGoalNameSelector)},offset:{top:0,left:-10}},c[i]={title:this.localizationService.get("ScorecardTutorial_MetricCurrent_Title"),text:this.localizationService.get("ScorecardTutorial_MetricCurrent_Text"),buttonLabel:this.localizationService.get("TutorialPopup_Next"),dataStoreKey:i,canShow:function(){return $(r.gT.ScorecardTutorial_FirstGoalCurrentSelector).length>0},attachTo:function(){return $(r.gT.ScorecardTutorial_FirstGoalCurrentSelector)},offset:{top:0,left:-10}},c[C]={title:this.localizationService.get("ScorecardTutorial_MetricTarget_Title"),text:this.localizationService.get("ScorecardTutorial_MetricTarget_Text"),buttonLabel:this.localizationService.get("Done_ButtonText"),dataStoreKey:C,canShow:function(){return $(r.gT.ScorecardTutorial_FirstGoalTargetSelector).length>0},attachTo:function(){return $(r.gT.ScorecardTutorial_FirstGoalTargetSelector)},offset:{top:0,left:-10}},c)}},l.prototype.startGoalRollupsTutorial=function(){this.tutorialPopupService.startTutorial(this.createGoalRollupsTutorialModel())},l.prototype.createGoalRollupsTutorialModel=function(){var c,y="GoalRollupsTutorial",i=r.gT.ScorecardTutorial_GoalRollupSelector;return{itemKeys:[y],items:(c={},c[y]={title:this.localizationService.get("TutorialPopup_MetricsRollupsTitle"),text:this.localizationService.get("TutorialPopup_MetricsRollupsContent"),buttonLabel:this.localizationService.get("TutorialPopup_GotIt"),dataStoreKey:y,canShow:function(){return!!$(i)},attachTo:function(){return $(i)},preferredOrientation:"bottom",telemetryEventArgs:[o._9],customClass:"goal-rollups-tutorial"},c)}},l.prototype.startGoalRollupsDetailsPaneTutorial=function(){this.tutorialPopupService.startTutorial(this.createGoalRollupsDetailsPaneTutorialModel())},l.prototype.createGoalRollupsDetailsPaneTutorialModel=function(){var c,y="GoalRollupsDetailsPaneTutorial",i=r.gT.ScorecardTutorial_GoalRollupDetailsPaneSelector;return{itemKeys:[y],items:(c={},c[y]={title:this.localizationService.get("TutorialPopup_MetricsRollupsTitle_DetailsPane"),text:this.localizationService.get("TutorialPopup_MetricsRollupsContent_DetailsPane"),buttonLabel:this.localizationService.get("TutorialPopup_GotIt"),dataStoreKey:y,canShow:function(){return!!$(i)},attachTo:function(){return $(i)},learnMoreText:this.localizationService.get("LearnMore"),learnMoreUrl:"https://learn.microsoft.com/en-us/power-bi/create-reports/service-metrics-submetrics#get-started-creating-rollups",preferredOrientation:"right",telemetryEventArgs:[o.Fg],customClass:"show-goal-rollups-coachmark"},c)}},l.\u0275fac=function(y){return new(y||l)(P.\u0275\u0275inject(a.o),P.\u0275\u0275inject(d.yU))},l.\u0275prov=P.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac}),l}()},23348:function(lt,Ge,t){"use strict";t.d(Ge,{f:function(){return y}});var r=t(81337),o=t(57535),P=t(58614),a=t(48787),d=t(50423),p=t(76746),l=t(85928),c=t(48741),y=function(){function i(C,v,k,E){this.appSettings=C,this.mashupService=v,this.httpClient=k,this.goalsHttpService=E}return i.prototype.evaluateQuery=function(C){return(0,r.mG)(this,void 0,void 0,function(){var v,k,E;return(0,r.Jh)(this,function(te){switch(te.label){case 0:return[4,this.mashupService.getPQEndpoint().pipe((0,a.q)(1)).toPromise()];case 1:return v=te.sent(),[4,this.mashupService.getPQToken("".concat(this.appSettings.powerQueryResourceName,"/.default")).pipe((0,a.q)(1)).toPromise()];case 2:return k=te.sent(),E="".concat(v,"/api/evaluator/evaluate"),[4,this.httpClient.post(E,{mashupDocument:C,queryName:"Query",fastCombine:!0},{headers:{"x-ms-api-version":"2.0",authorization:"Bearer ".concat(k)}}).pipe((0,a.q)(1)).toPromise()];case 3:return[2,te.sent()]}})})},i.prototype.importGoal=function(C,v,k,E,s){return(0,r.mG)(this,void 0,void 0,function(){var ne,te,X,m,O,I,H,G,Z,ie,ye,ae,N,he;return(0,r.Jh)(this,function(pe){switch(pe.label){case 0:ne=[],te=_.indexOf(E,"Name"),X=_.indexOf(E,"Owner"),m=_.indexOf(E,"Status"),O=_.indexOf(E,"Value"),I=_.indexOf(E,"Due Date"),H=_.indexOf(E,"Notes"),ne.push(te,X,m,O,I,H),-1!==m&&(G=this.getStatus(k,m,s)),Z=0,ie=0,ye=k.rows,pe.label=1;case 1:return ie<ye.length?[4,this.goalsHttpService.createGoal(C,v,{name:(ae=ye[ie])[te],owner:ae[X],completionDate:ae[I]}).pipe().toPromise()]:[3,5];case 2:return N=pe.sent(),he={timestamp:"2:00",status:G[Z]},Z+=1,[4,this.goalsHttpService.createGoalValue(C,v,N.id,he)];case 3:pe.sent(),pe.label=4;case 4:return ie++,[3,1];case 5:return[2]}})})},i.prototype.getStatus=function(C,v,k){for(var s=[],ne=0,te=C.rows;ne<te.length;ne++){var m=te[ne][v].replace(/\s/g,"");s.push(m)}for(var O=[],I=0,H=s;I<H.length;I++){var Z=o.p.getGoalStatusId(H[I],k);O.push(Z)}return O},i.\u0275fac=function(v){return new(v||i)(d.\u0275\u0275inject(p.de),d.\u0275\u0275inject(l.M),d.\u0275\u0275inject(c.eN),d.\u0275\u0275inject(P.f))},i.\u0275prov=d.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac}),i}()},93379:function(lt,Ge,t){"use strict";t.d(Ge,{jL:function(){return m},Nw:function(){return H}});var r=t(70060),o=t(62458),a=t(62831),d=t(60166),p=t(43286),l=t(35510),c=t(59017),y=t(11547),i=t(77526),C=t(14172),v=t(81905),k=t(57243),E=t(50423),s=t(9380),ne=t(49223),te=t(19178),m=function(){function G(Z){this.capability=Z,this.capability||(this.capability={enabled:!0,disabledReasons:new Set})}return G.clone=function(Z){return new G(_.cloneDeep(Z))},G.prototype.disableIf=function(Z,ie,ye){return Z&&(this.capability.enabled=!1,this.capability.disabledReasons.add(ie),ye&&!this.capability.disabledMessageKey&&(this.capability.disabledMessageKey=ye)),new G(this.capability)},G.prototype.disableWithMultiple=function(Z){var ie=this;return this.capability.enabled=!1,Z.forEach(function(ye){return ie.capability.disabledReasons.add(ye)}),new G(this.capability)},G.prototype.build=function(){return this.capability},G}();function O(G,Z){return(0,p.yE)(G,Z)}var I=["id","permissions","hierarchyPaths"],H=function(){function G(Z,ie,ye,ae){var J=this;this.featureSwitchService=Z,this.scorecardService=ie,this.groupStore=ye,this.scorecardHost=ae,this.capabilityInputs$=new l.X([void 0,"List",!1]);var N=this.scorecardService.getScorecard().pipe((0,i.x)(function(pe,ce){return!pe&&!ce||!!pe&&!!ce&&_.every(I,function(ge){return _.isEqual(pe[ge],ce[ge])})})),he=N.pipe((0,C.U)(function(pe){return pe.groupId}),(0,i.x)(),(0,v.w)(function(pe){return J.groupStore.getGroupById(pe||"me")}),(0,C.U)(function(pe){return void 0!==pe?.capacitySkuTier&&6!==pe.capacitySkuTier}));this.inputSub=(0,c.aj)([N,this.scorecardService.viewType$,he]).subscribe(this.capabilityInputs$),this.scorecardCapabilities$=this.capabilityInputs$.pipe((0,C.U)(function(pe){return J.calculateScorecardCapabilities(pe)}),(0,k.d)(1))}return G.prototype.ngOnDestroy=function(){this.inputSub.unsubscribe()},G.prototype.getCurrentScorecardCapabilities=function(){return this.calculateScorecardCapabilities(this.capabilityInputs$.value)},G.prototype.getScorecardCapabilities=function(){return this.scorecardCapabilities$},G.prototype.getCurrentGoalCapabilities=function(Z){return _.isNil(Z)?{}:this.calculateGoalCapabilities(Z,this.capabilityInputs$.value)},G.prototype.getGoalCapabilities=function(Z){var ie=this;return _.isNil(Z)?(0,y.of)({}):this.capabilityInputs$.pipe((0,C.U)(function(ye){return ie.calculateGoalCapabilities(Z,ye)}),(0,k.d)(1))},G.prototype.getMultipleGoalCapabilities=function(Z){var ie=this;return _.isEmpty(Z)?(0,y.of)({}):this.capabilityInputs$.pipe((0,C.U)(function(ye){for(var ae=_.map(Z,function(se){return ie.calculateGoalCapabilities(se,ye)}),J=ae[0],N={},he=function(De){var fe=De,Oe=J[fe];if("scorecardCapabilities"===fe)N[fe]=J.scorecardCapabilities;else if("boolean"==typeof Oe)N[fe]=_.every(ae,function(He){return He[fe]});else if(function(G){return"enabled"in G}(Oe)){for(var be=new m,Fe=0,ze=ae;Fe<ze.length;Fe++){var je=ze[Fe][fe];je.enabled||be.disableWithMultiple(je.disabledReasons)}N[fe]=be.build()}else o.fF.assertFail("Unexpected type for key ".concat(fe," when getting multiple goal capabilities"))},pe=0,ce=_.keys(J);pe<ce.length;pe++)he(ce[pe]);return N}),(0,k.d)(1))},G.prototype.calculateScorecardCapabilities=function(Z){var ie=Z[0],ye=Z[1],ae=Z[2],J={},N=O((0,r.l)(ie?.permissions),2),he=!_.isEmpty(ie?.hierarchyPaths),pe="List"===ye;return J.customizeStatus=this.featureSwitchService.featureSwitches.goalsCustomizeStatus&&N,J.createGoal=(new m).disableIf(!N,"NoWritePermission","Metrics_Tooltip_NoPermission").disableIf(he,"Hierarchical","Metrics_Tooltip_Create_Metric_Disabled_Hierarchical").disableIf(!pe,"UnsupportedView","Metrics_Tooltip_Create_Metric_Disabled_UnsupportedView").build(),J.createLinkedGoal=(new m).disableIf(!N,"NoWritePermission","Metrics_Tooltip_NoPermission").disableIf(he,"Hierarchical","Metrics_Tooltip_Create_Metric_Disabled_Hierarchical").disableIf("Heatmap"===ye,"UnsupportedView","Metrics_Tooltip_Create_Metric_Disabled_UnsupportedView").build(),J.deleteGoal=N&&!he,J.reorderGoal=this.featureSwitchService.featureSwitches.powerBIGoalsDragAndDrop&&N&&!he&&pe,J.editHierarchies=(new m).disableIf(!N,"NoWritePermission","MetricsHierarchy_NoPermission").disableIf(!ae&&this.featureSwitchService.featureSwitches.scorecardHierarchiesPremium,"NoPremiumWorkspace","MetricsHierarchy_NotAllowedInShared").build(),J.editHeatmap=N,J},G.prototype.calculateGoalCapabilities=function(Z,ie){var ye,ae,J={scorecardCapabilities:this.calculateScorecardCapabilities(ie)},N=ie[0],he=ie[1],pe=Z.isNew?31:function(G){if(_.isNil(G))return 0;if(!isNaN(G))return Number(G);switch(G.toString().trim().toLowerCase()){case"none":return 0;case"view":return 1;case"updatecurrentvalue":return 3;case"updatetargetvalue":return 5;case"updatenotes":return 9;case"updatestatus":return 17;case"updatevalues":return 7;case"all":return 31;default:o.fF.assertValue(G,"can't cast GoalPermission value")}}(Z.permissions),ce=O((0,r.l)(N?.permissions),2),ge=!!Z.valuesCategoryId,se=(null===(ae=null===(ye=Z.aggregations)||void 0===ye?void 0:ye.find(function(je){return"NumberOfTargets"===je.type}))||void 0===ae?void 0:ae.value)>1,De=!_.isEmpty(N?.hierarchyPaths),fe=a.q.isSampleScorecard(N),Oe=De&&Z.isLinked,be="List"===he;J.selectGoal=this.scorecardHost?this.scorecardHost.canSelectGoal(Z):{enabled:!0},J.editGoal=(new m).disableIf(!ce,"NoWritePermission","Metrics_Tooltip_NoPermission").disableIf(Z.isLinked,"LinkedMetric","Metrics_Tooltip_Edit_Metric_Disabled_Linked").disableIf(!be,"UnsupportedView","Metrics_Tooltip_Edit_Metric_Disabled_UnsupportedView").build();var Fe=ce&&!Z.isLinked&&!De;J.editName=Fe,J.editStartDate=Fe,J.editDueDate=Fe,J.editStatusRules=Fe,J.editPeriodicity=Fe,J.connectCurrentValueToData=Fe,J.connectTargetValueToData=Fe,J.changeValueFormat=Fe,J.editOwners=Fe,J.deleteGoal=J.scorecardCapabilities.deleteGoal,J.createSubgoal=J.scorecardCapabilities.createGoal,J.editStatus=O(pe,17)&&!Oe&&!Z.hasStatusRules,J.addNotes=O(pe,9)&&!Oe;var ze=O(pe,3)&&!Oe&&!Z.valueConnection&&!Z.valueRollup;J.editCurrentValue=ze,J.editMultipleValues=ze&&!ge&&!De&&!Z.isLinked;var Ke=O(pe,5)&&!Z.isLinked;return J.editTargetValue=Ke&&!Z.targetConnection&&!Z.targetRollup&&!se,J.editMultipleTargets=Ke&&(!!this.featureSwitchService.featureSwitches.goalsRollups||!Z.targetConnection&&!Z.targetRollup)&&(!ge||se)&&!De,J.deleteCheckIn=ce,J.followGoal=this.featureSwitchService.featureSwitches.goalsFavoriteGoals&&!fe&&!De,J.useCategoricalValues=!!this.featureSwitchService.featureSwitches.goalsCategoricalValues&&(!se||ge)&&!Z.valueRollup&&!Z.targetRollup&&!Z.valueConnection&&!Z.targetConnection,J.supportMultipleTargetsEditing=!!this.featureSwitchService.featureSwitches.powerBIGoalsMultipleTargets,J.supportMultipleValuesEditing=!!this.featureSwitchService.featureSwitches.goalsMultipleValuesEditor,J.supportsRollup=!!this.featureSwitchService.featureSwitches.goalsRollups,J.editCalculationType=Fe,J.usePickerRollup=J.editCalculationType&&!ge,J},G.\u0275fac=function(ie){return new(ie||G)(E.\u0275\u0275inject(s.vZ),E.\u0275\u0275inject(ne.G),E.\u0275\u0275inject(te.Y),E.\u0275\u0275inject(d.M,8))},G.\u0275prov=E.\u0275\u0275defineInjectable({token:G,factory:G.\u0275fac}),G}()},62087:function(lt,Ge,t){"use strict";t.d(Ge,{l:function(){return C}});var r=t(81337),o=t(62831),P=t(35510),a=t(30794),d=t(14172),p=t(77526),l=t(83317),c=t(50423),y=t(49223),i=t(9380),C=function(){function v(k,E){var s=this;this.scorecardService=k,this.featureSwitches=E,this._expansionMap$=new P.X({}),this._expandableGoals$=new P.X([]),this._showAllExpanded$=new P.X(!1),this.onDestroy$=new a.xQ,this.expandByDefault=!this.featureSwitches.featureSwitches.collapseGoalsByDefault,this.scorecardService.getScorecard().pipe((0,d.U)(function(ne){return _.map(o.q.filterGoals(ne.goals,function(te){return!_.isEmpty(te.subGoals)}),function(te){return te.id})}),(0,p.x)(_.isEqual),(0,l.R)(this.onDestroy$)).subscribe(this._expandableGoals$),this._expandableGoals$.pipe((0,l.R)(this.onDestroy$)).subscribe(function(ne){var te=new Set(ne),X=_.pickBy(s.expansionMap,function(O,I){return te.has(I)});if(s._expansionMap$.next(X),s.expandByDefault){var m=_.filter(ne,function(O){return _.isNil(s.expansionMap[O])});s.setExpansion(m,!0)}}),this._expansionMap$.pipe((0,l.R)(this.onDestroy$)).subscribe(function(){var ne=s.expandedGoalIds.length;0===ne?s._showAllExpanded$.next(!1):ne===s._expandableGoals$.value.length&&s._showAllExpanded$.next(!0)})}return Object.defineProperty(v.prototype,"expansionMap$",{get:function(){return this._expansionMap$},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"expansionMap",{get:function(){return this._expansionMap$.value},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"expandedGoalIds",{get:function(){return _.keys(_.pickBy(this.expansionMap,function(E){return E}))},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"showAllExpanded$",{get:function(){return this._showAllExpanded$},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"showAllExpanded",{get:function(){return this._showAllExpanded$.value},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"hasExpandableGoals$",{get:function(){return this._expandableGoals$.pipe((0,d.U)(function(E){return!_.isEmpty(E)}))},enumerable:!1,configurable:!0}),v.prototype.ngOnDestroy=function(){this.onDestroy$.next(!0),this.onDestroy$.complete()},v.prototype.isExpanded=function(k){var E;return null!==(E=this.expansionMap[k])&&void 0!==E?E:this.expandByDefault},v.prototype.expandGoal=function(k){this.setExpansion([k],!0)},v.prototype.collapseGoal=function(k){this.setExpansion([k],!1)},v.prototype.expandGoals=function(k){this.setExpansion(k,!0)},v.prototype.collapseGoals=function(k){this.setExpansion(k,!1)},v.prototype.expandAllGoals=function(){this.setExpansion(this._expandableGoals$.value,!0)},v.prototype.collapseAllGoals=function(){this.setExpansion(this._expandableGoals$.value,!1)},v.prototype.toggleExpandAll=function(){this.showAllExpanded?this.collapseAllGoals():this.expandAllGoals()},v.prototype.setExpansion=function(k,E){var s=this;if(_.some(k,function(te){return s.expansionMap[te]!==E})){var ne=(0,r.pi)({},this.expansionMap);_.forEach(k,function(te){ne[te]=E}),this._expansionMap$.next(ne)}},v.\u0275fac=function(E){return new(E||v)(c.\u0275\u0275inject(y.G),c.\u0275\u0275inject(i.vZ))},v.\u0275prov=c.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac}),v}()},62831:function(lt,Ge,t){"use strict";t.d(Ge,{q:function(){return p}});var r=t(81337),o=t(44603),P=t(4444),a=t(62458),d=t(38078),p=function(){function l(){}return l.isSampleScorecard=function(c){return"00000000-0000-0000-0000-000000000000"===c.id},l.getGoalCreateRequest=function(c){var y;return a.fF.assertValue(c,"goal"),{name:c.name,completionDate:c.completionDate,owner:c.owner,additionalOwners:c.additionalOwners,parentId:null!==(y=c.parentId)&&void 0!==y?y:null,startDate:c.startDate,unit:c.unit,datesFormatString:c.datesFormatString,valuesFormatString:c.valuesFormatString,valuesCategoryId:c.valuesCategoryId}},l.getGoalUpdateRequest=function(c){var y;return a.fF.assertValue(c,"goal"),{name:c.name,completionDate:c.completionDate,owner:c.owner,additionalOwners:c.additionalOwners,parentId:null!==(y=c.parentId)&&void 0!==y?y:null,startDate:c.startDate,unit:c.unit,datesFormatString:c.datesFormatString,valuesFormatString:c.valuesFormatString,description:c.description,cycle:c.cycle,cyclePeriod:c.cyclePeriod,valuesCategoryId:c.valuesCategoryId,metadata:c.metadata,cycleMetadata:c.cycleMetadata}},l.getGoalValueCreateRequest=function(c){return a.fF.assertValue(c,"goalValue"),{timestamp:c.timestamp,value:c.value,target:c.target,trend:c.trend,forecast:c.forecast,status:c.status}},l.getGoalValueUpdateRequest=function(c){return a.fF.assertValue(c,"goalValue"),{value:c.value,target:c.target,trend:c.trend,forecast:c.forecast,status:c.status}},l.getGoalStatusRulesUpdateRequest=function(c){a.fF.assertValue(c,"statusRules");var y=function(s){return{dateTime:s.dateTime,field:s.field,number:s.number,percentOf:s.percentOf?{field:s.percentOf.field,percent:s.percentOf.percent}:void 0}},i=function(s){return{field:s.field,operator:s.operator,value:y(s.value)}};return{rules:_.map(c.rules,function(E){return s=E,{conditions:_.map(s.conditions,function(ne){return function(s){return{fieldComparison:i(s.fieldComparison),expression:s.expression}}(ne)}),output:s.output};var s}),defaultOutput:c.defaultOutput}},l.isGoalMetadataUpdated=function(c,y){return!_.isEqual(l.getGoalUpdateRequest(c),l.getGoalUpdateRequest(y))},l.createNewGoal=function(c,y,i){a.fF.assertValue(c,"owner"),a.fF.assertValue(y,"scorecardId");var C=new Date,v=o.E.getCurrentUTCDay().toISOString(),k=o.E.getCurrentLocalDay();k.setMonth(k.getMonth()+1);var E=o.E.treatAsUTCDate(k).toISOString();return{name:null,id:"new-".concat(d.b$.generateGuid()),scorecardId:y,createdTime:C.toISOString(),lastModifiedBy:c,lastModifiedTime:C.toISOString(),owner:c,additionalOwners:[],startDate:v,completionDate:E,unit:0,parentId:i??null,goalValues:[],subGoals:[],isNew:!0,state:"Editing",valuesCategoryId:null,isExpanded:!0}},l.getGoal=function(c,y){return this.findGoal(c,function(i){return i.id===y})},l.buildGoalTree=function(c){for(var y={},i=0,C=c;i<C.length;i++)y[(v=C[i]).id]=v;for(var k=[],E=0,s=c;E<s.length;E++){var v;if((v=s[E]).parentId&&y[v.parentId]){var ne=y[v.parentId];ne.subGoals?ne.subGoals.push(v):ne.subGoals=[v]}else k.push(v)}return k},l.findGoal=function(c,y){if(_.some(c)){var i=_.find(c,function(E){return y(E)});if(i)return i;for(var C=0,v=c;C<v.length;C++)if(i=this.findGoal(v[C].subGoals,y))return i}return null},l.forEachGoal=function(c,y){if(_.some(c))for(var i=0,C=c;i<C.length;i++){var v=C[i];y(v),this.forEachGoal(v?.subGoals,y)}},l.countSubGoals=function(c,y){var i=this;return void 0===y&&(y=function(){return!0}),_.isEmpty(c?.subGoals)?0:c.subGoals.filter(y).length+c.subGoals.reduce(function(v,k){return v+i.countSubGoals(k,y)},0)},l.flattenGoals=function(c){return function i(C){return _.flatMap(C,function(v){return(0,r.ev)([v],i(v.subGoals),!0)})}(c)},l.filterGoals=function(c,y){return _.filter(this.flattenGoals(c),y)},l.mapGoals=function(c,y){return _.map(this.flattenGoals(c),y)},l.anyGoals=function(c,y){var i;if(_.some(c))for(var C=0,v=c;C<v.length;C++){var k=v[C];if(y(k)||this.anyGoals(null!==(i=k.subGoals)&&void 0!==i?i:[],y))return!0}return!1},l.computeGoalHeight=function(c){return _.isEmpty(c?.subGoals)?0:Math.max.apply(Math,c.subGoals.map(function(y){return 1+l.computeGoalHeight(y)}))},l.computeGoalLevel=function(c,y){for(var i=0,C=y;C;)i++,C=C.parentId?l.getGoal(c,C.parentId):void 0;return i-1},l.filterGoalsAndReassignParents=function(c,y){var i=function C(v,k){var E=[],s=k;return y(v)&&(E.push((0,r.pi)((0,r.pi)({},v),{parentId:k})),s=v.id),_.concat(E,_.flatMap(v.subGoals,function(ne){return C(ne,s)}))};return _.flatMap(c,function(C){return i(C)})},l.isEditing=function(c){return!!l.findGoal(c?.goals,function(y){return!!y.isNew||"Editing"===y.state})},l.isDarkMode=function(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches},l.getCurrentUser=function(){var c;return null===(c=(0,P.bG)())||void 0===c?void 0:c.name},l.isCurrentUser=function(c){var y=l.getCurrentUser();return y&&c&&(0,d.vr)(y,c)},l.compareGoalQueryConnections=function(c,y){return _.isEqual(c?.query,y?.query)&&_.isEqual(c?.datasetId,y?.datasetId)&&_.isEqual(c?.reportUrl,y?.reportUrl)},l.getGoalValueCategoriesCreateRequest=function(c){return a.fF.assertValue(!_.isEmpty(c),"getGoalValueCategoriesCreateRequest categoricalValues"),{name:"",categories:_.map(c,function(y,i){return{id:i,displayName:y}})}},l.getGoalValueCategoriesUpdateRequest=function(c){return a.fF.assertValue(c,"getGoalValueCategoriesUpdateRequest categoryList"),{name:c.name,categories:c.categories}},l.getGoalOwners=function(c){if(_.some(c)){var i={};return function C(v,k){if(_.some(v))for(var E=0,s=v;E<s.length;E++){var ne=s[E];if(ne.owner&&(k[ne.owner]={displayName:void 0,userPrincipalName:ne.owner,objectId:void 0,objectType:3,isSecurityGroup:void 0}),_.some(ne.additionalOwners))for(var te=0,X=ne.additionalOwners;te<X.length;te++){var m=X[te];m.userPrincipalName&&(k[m.userPrincipalName]={displayName:void 0,userPrincipalName:m.userPrincipalName,objectId:void 0,objectType:3,isSecurityGroup:void 0})}C(ne.subGoals,k)}}(c,i),_.values(i)}return[]},l.observeAndRemoveFocusableAttributes=function(c){if(c){var y=new MutationObserver(function(i){_.some(i,function(v){var k;return(null===(k=v.addedNodes)||void 0===k?void 0:k.length)>0})&&function v(k){k&&(k.removeAttribute("tabindex"),k.removeAttribute("focusable"),_.forEach(k.children,v))}(c)});return y.observe(c,{attributeFilter:["tabindex","focusable"],characterData:!1,childList:!0,subtree:!0}),y}return null},l.getGoalsWithRollups=function(c,y,i){for(var v,C=[];y&&null!=(v=l.getGoal(c,y))&&!0!==v.isLinked&&(y=v.parentId,1===i&&null!=v.valueRollup||2===i&&null!=v.targetRollup);)C.push(v);return C},l}()},32027:function(lt,Ge,t){"use strict";t.d(Ge,{w:function(){return C}});var r=t(81337),o=t(58614),P=t(35510),a=t(59973),d=t(77526),p=t(14172),l=t(57243),c=t(50423),y=t(49223),i=t(99327),C=function(){function v(k,E,s){this.goalsHttpService=k,this.scorecardService=E,this.goalsErrorService=s,this._viewsById$=new P.X(null),this._isSaving$=new P.X(!1),this._isLoading$=new P.X(!1),this.isLoading$=this._isLoading$,this.isSaving$=this._isSaving$,this.views$=this._viewsById$.pipe((0,a.h)(function(ne){return!!ne}),(0,d.x)(),(0,p.U)(function(ne){return _.values(ne)}),(0,l.d)({bufferSize:1,refCount:!0}))}return Object.defineProperty(v.prototype,"defaultListView",{get:function(){return _.find(this._viewsById$.value,function(E){return E.isDefault&&"List"===E.viewType})},enumerable:!1,configurable:!0}),v.prototype.getDefaultView=function(k){return this.views$.pipe((0,p.U)(function(E){return _.find(E,function(s){return s.isDefault&&s.viewType===k})}))},v.prototype.loadViews=function(k){return void 0===k&&(k=!1),(0,r.mG)(this,void 0,void 0,function(){var E,s;return(0,r.Jh)(this,function(ne){switch(ne.label){case 0:if(E=this.scorecardService.getCurrentScorecard(),!k&&null!==this._viewsById$.value||this._isLoading$.value)return[2];this._isLoading$.next(!0),ne.label=1;case 1:return ne.trys.push([1,,3,4]),[4,this.goalsHttpService.getScorecardViews(E.groupId,E.id).toPromise()];case 2:return s=ne.sent(),this._viewsById$.next(_.keyBy(s,function(te){return te.id})),[3,4];case 3:return this._isLoading$.next(!1),[7];case 4:return[2]}})})},v.prototype.saveView=function(k){return(0,r.mG)(this,void 0,void 0,function(){var E,s;return(0,r.Jh)(this,function(ne){switch(ne.label){case 0:return E=this.scorecardService.getCurrentScorecard(),[4,this.loadViews()];case 1:ne.sent(),this._isSaving$.next(!0),ne.label=2;case 2:return ne.trys.push([2,8,9,10]),this._viewsById$.value[k.id]?[4,this.goalsHttpService.updateScorecardView(E.groupId,E.id,k).toPromise()]:[3,4];case 3:return ne.sent(),[3,6];case 4:return[4,this.goalsHttpService.createScorecardView(E.groupId,E.id,k).toPromise()];case 5:ne.sent(),ne.label=6;case 6:return[4,this.loadViews(!0)];case 7:return ne.sent(),[3,10];case 8:return s=ne.sent(),this.goalsErrorService.showUserError(s,"SaveViewError"),[3,10];case 9:return this._isSaving$.next(!1),[7];case 10:return[2]}})})},v.prototype.clearCache=function(){this._viewsById$.next(null)},v.\u0275fac=function(E){return new(E||v)(c.\u0275\u0275inject(o.f),c.\u0275\u0275inject(y.G),c.\u0275\u0275inject(i.X))},v.\u0275prov=c.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac}),v}()},49223:function(lt,Ge,t){"use strict";t.d(Ge,{G:function(){return Ue}});var r=t(81337),o=t(70060),P=t(77695),a=t(57535),d=t(60042),p=t(44603),l=t(125),c=t(61088),y=function(){function oe(){}return oe.ManuallyUpdatingConnectedGoalValueNotAllowed="ManuallyUpdatingConnectedGoalValueNotAllowed",oe.ManuallyUpdatingConnectedMetricValueNotAllowed="ManuallyUpdatingConnectedMetricValueNotAllowed",oe.MultiGeoNotSupported="MultiGeoNotSupported",oe.InvalidScorecardColumnSetting="InvalidScorecardColumnSetting",oe.CircularRelationshipsNotAllowed="CircularRelationshipsNotAllowed",oe}(),i=t(62831),C=t(62458),v=t(30794),k=t(11547),E=t(18353),s=t(42195),ne=t(70032),te=t(48787),X=function(){function oe(h){var g,u=this;this.scorecardService=h,this.MinPollingInterval=200,this.MaxPollingInterval=4e3,this.MaxPollingRequests=40,this.PollingDelay=function(F){return u.MinPollingInterval+(u.MaxPollingInterval-u.MinPollingInterval)*F/u.MaxPollingRequests},this.ConnectionTypeAsText=((g={})[1]="Current",g[2]="Target",g)}return oe.prototype.startPollingAsync=function(h,g,u){return(0,r.mG)(this,void 0,void 0,function(){var F,ee=this;return(0,r.Jh)(this,function(U){switch(U.label){case 0:if(this.setGoalRefreshState(h.id,g,!0),F=u?.lastRefreshTimestamp,null!=F)return[3,4];U.label=1;case 1:return U.trys.push([1,3,,4]),[4,this.getLastRefreshTimestamp(h.id,g)];case 2:return F=U.sent(),[3,4];case 3:return U.sent(),this.setGoalRefreshState(h.id,g,!1),[2];case 4:return(0,r.mG)(ee,void 0,void 0,function(){var Q,B,w,le,q=this;return(0,r.Jh)(this,function(de){switch(de.label){case 0:return de.trys.push([0,,9,10]),Q=new v.xQ,(B=Q.pipe((0,E.R)(function(V){return V+1},-1),(0,s.zg)(function(V){return(0,k.of)(void 0).pipe((0,ne.g)(q.PollingDelay(V)))}),(0,te.q)(this.MaxPollingRequests))).subscribe(function(){return(0,r.mG)(q,void 0,void 0,function(){return(0,r.Jh)(this,function(V){switch(V.label){case 0:return[4,this.getLastRefreshTimestamp(h.id,g)];case 1:return w=V.sent(),F===w?Q.next():(C.fF.assertValue(w>F,"Expected new refresh history count to be higher"),Q.complete()),[2]}})})}),Q.next(),[4,B.toPromise()];case 1:return de.sent(),u?.refreshGoal?[4,this.scorecardService.refreshGoal(h.id)]:[3,3];case 2:de.sent(),de.label=3;case 3:return u?.refreshGoalValues?[4,this.scorecardService.expandGoalValues(h.id,!0)]:[3,5];case 4:de.sent(),de.label=5;case 5:return u?.refreshRollups&&h.parentId?[4,this.startRollupPolling(h.parentId,g,w)]:[3,7];case 6:de.sent(),de.label=7;case 7:return[4,null===(le=u?.onComplete)||void 0===le?void 0:le.call(u,w)];case 8:return de.sent(),[3,10];case 9:return this.setGoalRefreshState(h.id,g,!1),[7];case 10:return[2]}})}),[2]}})})},oe.prototype.refreshRollups=function(h,g){return(0,r.mG)(this,void 0,void 0,function(){var u,F,W,ee,U,Q,B,w,q;return(0,r.Jh)(this,function(V){switch(V.label){case 0:if(!h.parentId||null!=h.valuesCategoryId)return[3,2];if(u=[],F=this.scorecardService.getCurrentScorecard(),!(W=i.q.getGoal(F.goals,h.parentId)))return[3,2];for(ee=!1,U=!1,Q=function(L){var x=new Date(L.timestamp).getTime(),Y=_.find(h.goalValues,function(ue){return new Date(ue.timestamp).getTime()===x});if(B.isPartOfParentGoalRollup(W.valueRollup,L)&&(ee||(ee=Y?.value!==L.value)),B.isPartOfParentGoalRollup(W.targetRollup,L)&&(U||(U=Y?.target!==L.target)),ee&&U)return"break"},B=this,w=0,q=g;w<q.length&&"break"!==Q(q[w]);w++);return ee&&u.push(this.startRollupPolling(h.parentId,1)),U&&u.push(this.startRollupPolling(h.parentId,2)),_.some(u)?[4,Promise.all(u)]:[3,2];case 1:V.sent(),V.label=2;case 2:return[2]}})})},oe.prototype.refreshRollupsAfterMove=function(h){var g;return(0,r.mG)(this,void 0,void 0,function(){var u,W,ee,U,Q,B,w;return(0,r.Jh)(this,function(q){switch(q.label){case 0:return u=this.scorecardService.getCurrentScorecard(),null!=i.q.getGoal(u.goals,h.goalToMove.goalId).valuesCategoryId?[2]:(W=[],ee=[],null!=h.goalToMove.currentParentId&&(W.push.apply(W,i.q.getGoalsWithRollups(u.goals,U=h.goalToMove.currentParentId,1)),ee.push.apply(ee,i.q.getGoalsWithRollups(u.goals,U,2))),null!=(null===(g=h.newParent)||void 0===g?void 0:g.goalId)&&(B=i.q.getGoalsWithRollups(u.goals,Q=h.newParent.goalId,1),w=i.q.getGoalsWithRollups(u.goals,Q,2),W=this.mergeParents(W,B),ee=this.mergeParents(ee,w)),[4,Promise.all([this.startRollupPollingForGoals(W,1),this.startRollupPollingForGoals(ee,2)])]);case 1:return q.sent(),[2]}})})},oe.prototype.refreshRollupsAfterGoalDelete=function(h){return(0,r.mG)(this,void 0,void 0,function(){var g,u,F,W,Q=this;return(0,r.Jh)(this,function(B){switch(B.label){case 0:return h.parentId&&null==h.valuesCategoryId?(g=this.scorecardService.getCurrentScorecard(),(u=i.q.getGoal(g.goals,h.parentId))?(F=[],W=[],_.isNil(u.valueRollup)||_.some(h.goalValues,function(w){return!_.isNil(w.value)&&Q.isPartOfParentGoalRollup(u.valueRollup,w)})&&F.push.apply(F,i.q.getGoalsWithRollups(g.goals,u.id,1)),_.isNil(u.targetRollup)||_.some(h.goalValues,function(w){return!_.isNil(w.target)&&Q.isPartOfParentGoalRollup(u.targetRollup,w)})&&W.push.apply(W,i.q.getGoalsWithRollups(g.goals,u.id,2)),[4,Promise.all([this.startRollupPollingForGoals(F,1),this.startRollupPollingForGoals(W,2)])]):[3,2]):[3,2];case 1:B.sent(),B.label=2;case 2:return[2]}})})},oe.prototype.refreshRollupsAfterGoalValueDelete=function(h,g){return(0,r.mG)(this,void 0,void 0,function(){var u,F,W,ee;return(0,r.Jh)(this,function(B){switch(B.label){case 0:return h.parentId&&null==h.valuesCategoryId?(u=this.scorecardService.getCurrentScorecard(),(F=i.q.getGoal(u.goals,h.parentId))?(W=[],ee=[],_.isNil(F.valueRollup)||!_.isNil(g.value)&&this.isPartOfParentGoalRollup(F.valueRollup,g)&&W.push.apply(W,i.q.getGoalsWithRollups(u.goals,F.id,1)),_.isNil(F.targetRollup)||!_.isNil(g.target)&&this.isPartOfParentGoalRollup(F.targetRollup,g)&&ee.push.apply(ee,i.q.getGoalsWithRollups(u.goals,F.id,2)),[4,Promise.all([this.startRollupPollingForGoals(W,1),this.startRollupPollingForGoals(ee,2)])]):[3,2]):[3,2];case 1:B.sent(),B.label=2;case 2:return[2]}})})},oe.prototype.isPartOfParentGoalRollup=function(h,g){return h&&(_.isNil(h.startDate)||new Date(g.timestamp).getTime()>=new Date(h.startDate).getTime())},oe.prototype.startRollupPolling=function(h,g,u){return(0,r.mG)(this,void 0,void 0,function(){var F,W;return(0,r.Jh)(this,function(ee){switch(ee.label){case 0:return F=this.scorecardService.getCurrentScorecard(),W=i.q.getGoalsWithRollups(F.goals,h,g),[4,this.startRollupPollingForGoals(W,g,u)];case 1:return ee.sent(),[2]}})})},oe.prototype.startRollupPollingForGoals=function(h,g,u){return(0,r.mG)(this,void 0,void 0,function(){var F,W=this;return(0,r.Jh)(this,function(ee){switch(ee.label){case 0:return _.some(h)?(F=h.shift(),[4,this.startPollingAsync(F,g,{lastRefreshTimestamp:u,refreshGoal:!0,refreshGoalValues:!0,onComplete:function(Q){return W.startRollupPollingForGoals(h,g,Q)}})]):[3,2];case 1:ee.sent(),ee.label=2;case 2:return[2]}})})},oe.prototype.getLastRefreshTimestamp=function(h,g){var u;return(0,r.mG)(this,void 0,void 0,function(){var F,W,ee;return(0,r.Jh)(this,function(Q){switch(Q.label){case 0:return F=this.ConnectionTypeAsText[g],[4,this.scorecardService.getRefreshHistory(h)];case 1:return W=Q.sent(),ee=_.filter(W,function(B){return B.connectionType===g||B.connectionType===F}),[2,null===(u=_.maxBy(ee,function(B){return B.timestamp}))||void 0===u?void 0:u.timestamp]}})})},oe.prototype.mergeParents=function(h,g){if(!_.some(h))return g;var u=_.intersectionBy(h,g,function(U){return U.id});if(_.isEmpty(u))return(0,r.ev)((0,r.ev)([],h,!0),g,!0);for(var F=_.findIndex(g,function(U){return U.id===u[0].id}),W=[],ee=0;ee<F;ee++)W.push(g[ee]);return W.push.apply(W,h),W},oe.prototype.setGoalRefreshState=function(h,g,u){this.scorecardService.setGoalRefreshState(h,g,u)},oe}(),m=t(14786),O=t(45017),I=t(74076),H=t(58614),G=t(60166),Z=t(98587),ie=t(10723),ye=t(50547),ae=t(43286),J=t(91055),N=t(74466),he=t(33554),pe=t(35510),ce=t(59017),ge=t(14172),se=t(77526),De=t(83317),fe=t(68549),Oe=t(81905),be=t(50423),Fe=t(58938),ze=t(81213),Ke=t(65181),je=t(21976),He=t(9380),Je=t(99327),j=t(96608),nt=t(85732),Ue=function(){function oe(h,g,u,F,W,ee,U,Q,B,w,q,le,de){var M,L,V=this;this.goalsHttpService=h,this.userDetailsService=g,this.dialogService=u,this.errorService=F,this.localizationService=W,this.userInfo=ee,this.featureSwitches=U,this.goalsErrorService=Q,this.telemetryService=B,this.tabFacade=w,this.store=q,this.scorecardHost=le,this.scorecardSettings=de,this.scorecard=void 0,this._scorecard$=new he.t(1),this._selectedGoalIds$=this._scorecard$.pipe((0,ge.U)(function(x){return x?.selectedGoalIds}),(0,se.x)(_.isEqual)),this._activeGoalId$=this._scorecard$.pipe((0,ge.U)(function(x){return x?.activeGoalId}),(0,se.x)()),this.isEditMode$=new pe.X(!1),this.loading$=new pe.X(0),this._viewType$=new pe.X("List"),this._scorecardSelectionMode$=new pe.X(null),this.switchingHierarchyPath$=new pe.X(!1),this.linkedScorecardsById={},this._goalStatusesByScorecardId$=new pe.X({}),this.onHierarchyNotFound$=new v.xQ,this.onDestroy$=new v.xQ,this.requestId=0,this.pollingService=new X(this),this.scorecardHost&&(this.getSelectedGoalsObservable().pipe((0,De.R)(this.onDestroy$)).subscribe(function(x){V.scorecardHost.onSelectGoals(x)}),this._scorecard$.pipe((0,ge.U)(function(x){return x.hierarchyPaths}),(0,se.x)(),(0,De.R)(this.onDestroy$)).subscribe(function(x){V.scorecardHost.onChangeHierarchyPath(x)})),this._scorecard$.pipe((0,se.x)(function(x,Y){var ue,Ne;return _.isEqual(null===(ue=x?.goalStatuses)||void 0===ue?void 0:ue.statuses,null===(Ne=Y?.goalStatuses)||void 0===Ne?void 0:Ne.statuses)&&x?.linkedScorecards===Y?.linkedScorecards}),(0,ge.U)(function(x){return a.p.getGoalStatusesByScorecardId(x)}),(0,De.R)(this.onDestroy$)).subscribe(this._goalStatusesByScorecardId$),(0,ce.aj)([this.isEditMode$,this.viewType$,null!==(L=null===(M=this.scorecardSettings)||void 0===M?void 0:M.settings)&&void 0!==L?L:(0,k.of)({})]).pipe((0,ge.U)(function(x){var Y=x[0],ue=x[1],Ne=x[2];return"tile"===Ne?.displayMode?V.featureSwitches.featureSwitches.multipleGoalTilesVisual?"multiple":"single":Ne?.useMultiselectMode?"multiple":"List"===ue&&Y?"ctrl":null}),(0,se.x)(),(0,De.R)(this.onDestroy$)).subscribe(this._scorecardSelectionMode$)}return oe.prototype.ngOnDestroy=function(){this.onDestroy$.next(!0),this.onDestroy$.complete()},oe.prototype.loadScorecard=function(h,g,u,F){var W=this;if(i.q.isEditing(this.scorecard)&&!u)this.promptUserConfirmation({title:this.localizationService.get("MetricsUnsavedChangesTitle"),message:this.localizationService.get("MetricsUnsavedChangesDescription"),okButtonText:this.localizationService.get("Refresh"),panelClass:["updateConfirmationDialogPanel"],onConfirmation:function(){return(0,r.mG)(W,void 0,void 0,function(){return(0,r.Jh)(this,function(Q){return[2,this.loadScorecard(h,g,!0,F)]})})}});else{this.loading$.next(this.loading$.value+1),this.requestId++;var ee=this.requestId;this.goalsHttpService.getScorecard(h,g,!0,F).toPromise().then(function(U){W.loading$.next(W.loading$.value-1),!(ee<W.requestId)&&(W.switchingHierarchyPath$.next(!1),W.setScorecardWithGoals(U))}).catch(function(U){if(W.loading$.next(W.loading$.value-1),!(ee<W.requestId)){if(W.switchingHierarchyPath$.next(!1),_.isEmpty(F))W.scorecard=null;else if(W.goalsErrorService.showUserError(U,"LoadHierarchy","MetricsHierarchy_Loading_Error"),404===U?.status&&(W.setActiveHierarchy(void 0,!0),W.onHierarchyNotFound$.next(F),!W.scorecard))return;W.commit()}})}return this._scorecard$.asObservable()},oe.prototype.setActiveHierarchy=function(h,g){return(0,r.mG)(this,void 0,void 0,function(){var u,F=this;return(0,r.Jh)(this,function(W){switch(W.label){case 0:return u=function(U,Q){return _.isEmpty(U)&&_.isEmpty(Q)||_.isEqual(U,Q)},this.scorecard&&!u(this.scorecard.hierarchyPaths,h)?i.q.isEditing(this.scorecard)&&!g?[2,this.promptUserConfirmation({title:this.localizationService.get("MetricsUnsavedChangesTitle"),message:this.localizationService.get("MetricsUnsavedChangesDescription"),okButtonText:this.localizationService.get("ModalDialogButtonText_Continue"),panelClass:["updateConfirmationDialogPanel"],onConfirmation:function(){return(0,r.mG)(F,void 0,void 0,function(){return(0,r.Jh)(this,function(U){return[2,this.setActiveHierarchy(h,!0)]})})}})]:[3,1]:[3,3];case 1:return this.switchingHierarchyPath$.next(!0),[4,this.loadScorecard(this.scorecard.groupId,this.scorecard.id,!0,h).pipe((0,fe.o)(function(ee){return!u(ee.hierarchyPaths,h)},!0)).toPromise()];case 2:return[2,W.sent()];case 3:return[2]}})})},Object.defineProperty(oe.prototype,"onHierarchyNotFound",{get:function(){return this.onHierarchyNotFound$},enumerable:!1,configurable:!0}),Object.defineProperty(oe.prototype,"isHierarchicalScorecard",{get:function(){var g;return!_.isEmpty(null===(g=this.scorecard)||void 0===g?void 0:g.hierarchyPaths)},enumerable:!1,configurable:!0}),oe.prototype.assertNoActivehierarchy=function(h){return void 0===h&&(h=!1),!this.isHierarchicalScorecard||(h?this.dialogService.showSimpleDialog(this.localizationService.get("Coming_Soon"),this.localizationService.get("MetricsHierarchy_ComingSoon")):C.fF.assertFail("Cannot perform this operation on a hierarchical scorecard. ".concat((new Error).stack)),!1)},Object.defineProperty(oe.prototype,"hierarchyPaths$",{get:function(){return this._scorecard$.pipe((0,ge.U)(function(g){return g?.hierarchyPaths}),(0,se.x)())},enumerable:!1,configurable:!0}),oe.prototype.assertScorecardLoaded=function(h){return!(h.id!==this.scorecard.id||!_.isEqual(h.hierarchyPaths,this.scorecard.hierarchyPaths))||(C.fF.assertFail("Scorecard has changed. Active scorecard: ".concat(JSON.stringify(this.scorecard.hierarchyPaths),". Previous scorecard ").concat(JSON.stringify(h.hierarchyPaths))),!1)},oe.prototype.isSwitchingHierarchyPath=function(){return this.switchingHierarchyPath$.asObservable()},oe.prototype.saveGoal=function(h,g){var u,F,W,ee,U,Q;return(0,r.mG)(this,void 0,void 0,function(){var B,w,q,le,de,V,M,L=this;return(0,r.Jh)(this,function(x){switch(x.label){case 0:if(C.fF.assertValue(this.scorecard,"No scorecard loaded"),B=i.q.getGoal(this.scorecard.goals,h),C.fF.assertValue(B,"goal"),w=i.q.isGoalMetadataUpdated(B,g),!B.isNew&&!w)return[2,h];if(q=(null===(u=g.metadata)||void 0===u?void 0:u.showFinalTarget)!==(null===(F=B.metadata)||void 0===F?void 0:F.showFinalTarget)||(null===(W=g.metadata)||void 0===W?void 0:W.showPercentChange)!==(null===(ee=B.metadata)||void 0===ee?void 0:ee.showPercentChange)||!_.isEqual(null!==(U=B.cycleMetadata)&&void 0!==U?U:{},null!==(Q=g.cycleMetadata)&&void 0!==Q?Q:{}),!this.assertNoActivehierarchy(!0))return[2,h];x.label=1;case 1:return x.trys.push([1,9,,10]),le=this.scorecard,B.isNew?[4,this.goalsHttpService.createGoal(this.scorecard.groupId,this.scorecard.id,i.q.getGoalCreateRequest(g)).toPromise()]:[3,5];case 2:return de=x.sent(),g.metadata?[4,this.goalsHttpService.updateGoal(this.scorecard.groupId,this.scorecard.id,de.id,{metadata:g.metadata}).toPromise()]:[3,4];case 3:de=x.sent(),x.label=4;case 4:return[3,7];case 5:return w?[4,this.goalsHttpService.updateGoal(this.scorecard.groupId,this.scorecard.id,B.id,i.q.getGoalUpdateRequest(g)).toPromise()]:[3,7];case 6:de=x.sent(),x.label=7;case 7:return this.assertScorecardLoaded(le)?[4,this.getOwnerDisplayNames(B)]:[2];case 8:return V=x.sent(),this.scorecard=(0,N.Uy)(this.scorecard,function(Y){var ue=i.q.getGoal(Y.goals,h);L.assignGoal(ue,de),ue.isNew=!1,ue.ownerDisplayNames=V}),h=de.id,[3,10];case 9:throw M=x.sent(),this.goalsErrorService.showUserError(M,"SaveGoalError"),M;case 10:return q?[4,this.refreshGoal(h)]:[3,12];case 11:return x.sent(),[3,13];case 12:this.commit(),x.label=13;case 13:return[2,h]}})})},oe.prototype.moveGoal=function(h,g,u){var F;return(0,r.mG)(this,void 0,void 0,function(){var W,ee,U,Q,q,le;return(0,r.Jh)(this,function(de){switch(de.label){case 0:return C.fF.assertValue(this.scorecard,"No scorecard loaded"),C.fF.assertValue(this.scorecard.goals,"Scorecard should have at least one goal to move"),this.assertNoActivehierarchy()?(W=i.q.getGoal(this.scorecard.goals,h),C.fF.assertValue(W,"Source goal does not exist"),ee=i.q.computeGoalHeight(W),U=u?i.q.getGoal(this.scorecard.goals,u):void 0,C.fF.assertValue(!u||U,"Destination parent goal does not exist"),Q=U?i.q.computeGoalLevel(this.scorecard.goals,U):void 0,(_.isNil(Q)?ee:ee+Q+1)>d.gT.MaxSubGoals?[4,this.dialogService.showSimpleInfoDialog({title:this.localizationService.get("MetricCannotBeMovedTitle"),message:this.localizationService.format("MetricCannotBeMovedMessage",d.gT.MaxSubGoals)},{autoFocus:!0}).afterClosed().toPromise()]:[3,2]):[2];case 1:return de.sent(),[2];case 2:q={goalToMove:{goalId:h}},this.scorecard=(0,N.Uy)(this.scorecard,function(V){var M,L,x,Y,ue=i.q.getGoal(V.goals,h);q.goalToMove.currentParentId=null!==(M=ue.parentId)&&void 0!==M?M:void 0;var Ne=ue.parentId?i.q.getGoal(V.goals,ue.parentId):void 0;ue.parentId&&!Ne||_.remove(ue.parentId?Ne.subGoals:V.goals,function(ct){return ct.id===ue.id});var Xe=u?i.q.getGoal(V.goals,u):void 0;Xe&&(q.newParent={goalId:Xe.id,currentParentId:null!==(L=Xe.parentId)&&void 0!==L?L:void 0});var it=Xe?Xe.subGoals:V.goals;if(it){var st=g?it.findIndex(function(ct){return ct.id===g}):it.length;C.fF.assertValue(-1!==st,"Destination next goal does not exist");var ot=st-1>=0?it[st-1]:void 0;ot&&(q.newPrevious={goalId:ot.id,currentParentId:null!==(x=ot.parentId)&&void 0!==x?x:void 0});var ut=st<it.length?it[st]:void 0;C.fF.assertValue(!ut||ut.parentId===u,"Destination next goal parent should be the same as the destination parent goal"),ut&&(q.newNext={goalId:ut.id,currentParentId:null!==(Y=ut.parentId)&&void 0!==Y?Y:void 0}),it.splice(st,0,ue);var qe=0;it.forEach(function(ct){ct.rank=qe,qe++})}else ue.rank=0,Xe.subGoals=[ue];return ue.parentId=u,ue.state="Saving",V}),this.loading$.next(this.loading$.value+1),this.commit(),de.label=3;case 3:return de.trys.push([3,6,10,11]),[4,this.pollingService.refreshRollupsAfterMove(q)];case 4:return de.sent(),[4,this.goalsHttpService.moveGoal(this.scorecard.groupId,this.scorecard.id,q).toPromise()];case 5:return de.sent(),this.setGoalState(h,"Consumption"),[3,11];case 6:return le=de.sent(),(null===(F=le?.error)||void 0===F?void 0:F.code)!==y.CircularRelationshipsNotAllowed?[3,8]:[4,this.loadScorecard(this.scorecard.groupId,this.scorecard.id,!0)];case 7:return de.sent(),this.dialogService.showSimpleDialog(this.localizationService.get("Unable_to_move_metric"),this.localizationService.get("Metrics_Circular_Relationships_Not_Allowed")),[3,9];case 8:throw this.goalsErrorService.showUserError(le,"MoveGoalError"),le;case 9:return[3,11];case 10:return this.loading$.next(this.loading$.value-1),[7];case 11:return[2]}})})},oe.prototype.refreshGoal=function(h){return(0,r.mG)(this,void 0,void 0,function(){var g,u,F,W,ee=this;return(0,r.Jh)(this,function(U){switch(U.label){case 0:C.fF.assertValue(this.scorecard,"No scorecard loaded"),U.label=1;case 1:return U.trys.push([1,4,,5]),g=this.scorecard,[4,this.goalsHttpService.getGoal(this.scorecard.groupId,this.scorecard.id,h,!1,this.scorecard.hierarchyPaths).toPromise()];case 2:return u=U.sent(),this.assertScorecardLoaded(g)?[4,this.getOwnerDisplayNames(u)]:[2];case 3:return F=U.sent(),this.scorecard=(0,N.Uy)(this.scorecard,function(Q){var B=i.q.getGoal(Q.goals,h);ee.assignGoal(B,u),B.ownerDisplayNames=F}),[3,5];case 4:throw W=U.sent(),this.goalsErrorService.showUserError(W,"RefreshGoalError"),W;case 5:return this.commit(),[2]}})})},oe.prototype.saveGoalValue=function(h,g){var u,F;return(0,r.mG)(this,void 0,void 0,function(){var W,ee,U,Q,B,w;return(0,r.Jh)(this,function(q){switch(q.label){case 0:return C.fF.assertValue(this.scorecard,"No scorecard loaded"),[4,this.expandGoalValues(h)];case 1:q.sent(),W=i.q.getGoal(this.scorecard.goals,h),C.fF.assertValue(W,"goal"),ee=_.find(W.goalValues,function(le){return new Date(le.timestamp).getTime()===new Date(g.timestamp).getTime()}),C.fF.assert(function(){return!W.valueConnection||_.isNil(g.value)},"Value cannot be updated when it is connected to data"),C.fF.assert(function(){return!W.targetConnection||_.isNil(g.target)},"Target cannot be updated when it is connected to data"),W.hasStatusRules&&(g.status=null),q.label=2;case 2:return q.trys.push([2,9,15,16]),this.loading$.next(this.loading$.value+1),[4,this.pollingService.refreshRollups(W,[g])];case 3:return q.sent(),U=this.scorecard,ee?[4,this.goalsHttpService.updateGoalValue(this.scorecard.groupId,this.scorecard.id,h,new Date(g.timestamp).toISOString(),i.q.getGoalValueUpdateRequest(g),this.scorecard.hierarchyPaths).toPromise()]:[3,5];case 4:return Q=q.sent(),this.assertScorecardLoaded(U)?(this.scorecard=(0,N.Uy)(this.scorecard,function(le){var de=i.q.getGoal(le.goals,h);C.fF.assertValue(de,"Goal not found");var V=_.find(de.goalValues,function(M){return new Date(M.timestamp).getTime()===new Date(Q.timestamp).getTime()});C.fF.assertValue(V,"Goal value not found"),Object.assign(V,Q)}),[3,7]):[2];case 5:return[4,this.goalsHttpService.createGoalValue(this.scorecard.groupId,this.scorecard.id,h,i.q.getGoalValueCreateRequest(g),this.scorecard.hierarchyPaths).toPromise()];case 6:if(B=q.sent(),!this.assertScorecardLoaded(U))return[2];this.scorecard=(0,N.Uy)(this.scorecard,function(le){var de=i.q.getGoal(le.goals,h);C.fF.assertValue(de,"Goal not found"),de.goalValues?de.goalValues.push(B):de.goalValues=[B]}),q.label=7;case 7:return[4,this.refreshGoal(h)];case 8:return q.sent(),[3,16];case 9:if(w=q.sent(),(null===(u=w?.error)||void 0===u?void 0:u.code)!==y.ManuallyUpdatingConnectedGoalValueNotAllowed&&(null===(F=w?.error)||void 0===F?void 0:F.code)!==y.ManuallyUpdatingConnectedMetricValueNotAllowed)return[3,10];throw this.errorService.errorNoDefaultAdditionalErrorInfo(this.localizationService.get("Updating_Connected_MetricValue_Not_Allowed"),"Not_Allowed",{title:this.localizationService.get("Operation_Not_Allowed"),level:ye.U.Information,isDismissable:!0,showAdditionalErrorInfo:!1}),w;case 10:return ee||409!==w?.status?[3,13]:(this.errorService.errorNoDefaultAdditionalErrorInfo(this.localizationService.get("Metrics_Existing_Checkin_Found"),"Checkin_Exists",{title:this.localizationService.get("Metrics_Existing_Checkin_Found_Title"),level:ye.U.Information,isDismissable:!0,showAdditionalErrorInfo:!1,hideGetHelpLink:!0}),[4,this.refreshGoal(h)]);case 11:return q.sent(),[4,this.expandGoalValues(h,!0)];case 12:return q.sent(),[3,14];case 13:throw this.goalsErrorService.showUserError(w,"SaveGoalValueError"),w;case 14:return[3,16];case 15:return this.loading$.next(this.loading$.value-1),[7];case 16:return this.commit(),[2]}})})},oe.prototype.expandGoalValues=function(h,g){return void 0===g&&(g=!1),(0,r.mG)(this,void 0,void 0,function(){var u,F,W,ee;return(0,r.Jh)(this,function(U){switch(U.label){case 0:if(C.fF.assertValue(this.scorecard,"No scorecard loaded"),this.scorecard.isSample)return[2];if(u=i.q.getGoal(this.scorecard.goals,h),C.fF.assertValue(u,"goal"),!u||u.isExpanded&&!g)return[2];U.label=1;case 1:return U.trys.push([1,3,4,5]),this.loading$.next(this.loading$.value+1),F=this.scorecard,[4,this.goalsHttpService.getGoalValues(this.scorecard.groupId,this.scorecard.id,u.id,!0,this.scorecard.hierarchyPaths).toPromise()];case 2:return W=U.sent(),this.assertScorecardLoaded(F)?(this.scorecard=(0,N.Uy)(this.scorecard,function(Q){var B=i.q.getGoal(Q.goals,h);C.fF.assertValue(B,"goal"),B.goalValues=W,B.isExpanded=!0}),this.commit(),[3,5]):[2];case 3:throw ee=U.sent(),this.goalsErrorService.showUserError(ee,"ExpandGoalValues"),ee;case 4:return this.loading$.next(this.loading$.value-1),[7];case 5:return[2]}})})},oe.prototype.upsertGoalValues=function(h,g){return(0,r.mG)(this,void 0,void 0,function(){var u,F,W;return(0,r.Jh)(this,function(ee){switch(ee.label){case 0:if(!this.assertNoActivehierarchy(!0))return[2];u=i.q.getGoal(this.scorecard.goals,h),C.fF.assertValue(u,"goal"),ee.label=1;case 1:return ee.trys.push([1,5,6,7]),this.loading$.next(this.loading$.value+1),[4,this.pollingService.refreshRollups(u,g)];case 2:return ee.sent(),[4,this.goalsHttpService.upsertGoalValues(this.scorecard.groupId,this.scorecard.id,h,g).toPromise()];case 3:return F=ee.sent(),[4,this.refreshGoal(h)];case 4:return ee.sent(),this.scorecard=(0,N.Uy)(this.scorecard,function(U){var Q=i.q.getGoal(U.goals,h);Q.goalValues=F,Q.isExpanded=!0}),this.commit(),[3,7];case 5:throw W=ee.sent(),this.goalsErrorService.showUserError(W,"UpsertGoalValues"),W;case 6:return this.loading$.next(this.loading$.value-1),[7];case 7:return[2]}})})},oe.prototype.overwriteMultipleGoalValues=function(h,g){var u,F;return(0,r.mG)(this,void 0,void 0,function(){var W,ee,U,Q,B;return(0,r.Jh)(this,function(w){switch(w.label){case 0:return this.assertNoActivehierarchy(!0)?[4,this.expandGoalValues(h)]:[2];case 1:return w.sent(),ee=i.q.getGoal(this.scorecard.goals,h),U=null!==(F=null===(u=ee.goalValues)||void 0===u?void 0:u.filter(function(q){return!_.isNil(q.value)}).map(function(q){return{timestamp:q.timestamp,value:q.value}}))&&void 0!==F?F:[],Q=g.map(function(q){return{timestamp:q.timestamp,value:q.value}}),(W=O.B.calculateGoalValueChanges(U,Q)).length>0?(B=W.map(function(q){return{timestamp:q.timestamp,value:q.value}}),[4,this.upsertGoalValues(h,B)]):[3,3];case 2:w.sent(),w.label=3;case 3:return[2]}})})},oe.prototype.overwriteGoalTargets=function(h,g){var u,F;return(0,r.mG)(this,void 0,void 0,function(){var W,ee,U,Q,B;return(0,r.Jh)(this,function(w){switch(w.label){case 0:return this.assertNoActivehierarchy(!0)?[4,this.expandGoalValues(h)]:[2];case 1:return w.sent(),W=i.q.getGoal(this.scorecard.goals,h),ee=null!==(F=null===(u=W.goalValues)||void 0===u?void 0:u.filter(function(q){return!_.isNil(q.target)}).map(function(q){return{timestamp:q.timestamp,value:q.target}}))&&void 0!==F?F:[],U=g.map(function(q){return{timestamp:q.timestamp,value:q.target}}),(Q=O.B.calculateGoalValueChanges(ee,U)).length>0?(B=Q.map(function(q){return{timestamp:q.timestamp,target:q.value}}),[4,this.upsertGoalValues(h,B)]):[3,3];case 2:w.sent(),w.label=3;case 3:return[2]}})})},oe.prototype.followGoal=function(h){return(0,r.mG)(this,void 0,void 0,function(){var g;return(0,r.Jh)(this,function(u){switch(u.label){case 0:if(!this.assertNoActivehierarchy(!0))return[2];if(i.q.isSampleScorecard(this.scorecard))return[2];C.fF.assertValue(this.scorecard,"No scorecard loaded"),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,this.goalsHttpService.followGoal(this.scorecard.groupId,this.scorecard.id,h).toPromise()];case 2:return u.sent(),this.scorecard=(0,N.Uy)(this.scorecard,function(F){var W=i.q.getGoal(F.goals,h);C.fF.assertValue(W,"Goal not found"),W.isFollowed=!0}),this.commit(),[3,4];case 3:throw g=u.sent(),this.goalsErrorService.showUserError(g,"Follow Metric Error"),g;case 4:return[2]}})})},oe.prototype.unfollowGoal=function(h){return(0,r.mG)(this,void 0,void 0,function(){var g;return(0,r.Jh)(this,function(u){switch(u.label){case 0:if(!this.assertNoActivehierarchy(!0))return[2];if(i.q.isSampleScorecard(this.scorecard))return[2];C.fF.assertValue(this.scorecard,"No scorecard loaded"),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,this.goalsHttpService.unfollowGoal(this.scorecard.groupId,this.scorecard.id,h).toPromise()];case 2:return u.sent(),this.scorecard=(0,N.Uy)(this.scorecard,function(F){var W=i.q.getGoal(F.goals,h);C.fF.assertValue(W,"Goal not found"),W.isFollowed=!1}),this.commit(),[3,4];case 3:throw g=u.sent(),this.goalsErrorService.showUserError(g,"Unfollow Metric Error"),g;case 4:return[2]}})})},oe.prototype.editNote=function(h,g,u,F){return(0,r.mG)(this,void 0,void 0,function(){var W,ee,U;return(0,r.Jh)(this,function(Q){switch(Q.label){case 0:C.fF.assertValue(this.scorecard,"No scorecard loaded"),Q.label=1;case 1:return Q.trys.push([1,3,,4]),W=this.scorecard,[4,this.goalsHttpService.editNote(this.scorecard.groupId,this.scorecard.id,h,u,g,F,this.scorecard.hierarchyPaths).toPromise()];case 2:return ee=Q.sent(),this.assertScorecardLoaded(W)?(this.scorecard=(0,N.Uy)(this.scorecard,function(B){var w=i.q.getGoal(B.goals,h);C.fF.assertValue(w,"Goal not found");var q=_.find(w.goalValues,function(de){return new Date(de.timestamp).getTime()===new Date(g).getTime()});if(C.fF.assertValue(q,"Goal value not found"),!_.isEmpty(q)){var le=q.notes.findIndex(function(de){return de.id===u});C.fF.assertValue(q.notes,"Goal note not found"),q.notes[le]=ee}}),this.commit(),[3,4]):[2];case 3:throw U=Q.sent(),this.goalsErrorService.showUserError(U,"EditGoalNoteError"),U;case 4:return[2]}})})},oe.prototype.insertNote=function(h,g,u){return(0,r.mG)(this,void 0,void 0,function(){var F,W,ee;return(0,r.Jh)(this,function(U){switch(U.label){case 0:C.fF.assertValue(this.scorecard,"No scorecard loaded"),U.label=1;case 1:return U.trys.push([1,3,,4]),F=this.scorecard,[4,this.goalsHttpService.insertNote(this.scorecard.groupId,this.scorecard.id,h,g,u,this.scorecard.hierarchyPaths).toPromise()];case 2:return W=U.sent(),this.assertScorecardLoaded(F)?(this.scorecard=(0,N.Uy)(this.scorecard,function(Q){var B=i.q.getGoal(Q.goals,h);C.fF.assertValue(B,"Goal not found");var w=_.find(B.goalValues,function(q){return new Date(q.timestamp).getTime()===new Date(g).getTime()});C.fF.assertValue(w,"Goal value not found"),B.notesCount=_.isFinite(B.notesCount)?B.notesCount+1:1,w.notes=(0,r.ev)((0,r.ev)([],w.notes||[],!0),[W],!1)}),this.commit(),[3,4]):[2];case 3:throw ee=U.sent(),this.goalsErrorService.showUserError(ee,"InsertGoalNoteError"),ee;case 4:return[2]}})})},oe.prototype.getGoal=function(h){return C.fF.assertValue(this.scorecard,"No scorecard loaded"),this._scorecard$.pipe((0,ge.U)(function(g){return i.q.getGoal(g.goals,h)}),(0,se.x)())},oe.prototype.getGoals=function(){return C.fF.assertValue(this.scorecard,"No scorecard loaded"),this._scorecard$.pipe((0,ge.U)(function(h){return h.goals}))},oe.prototype.getActiveGoal=function(){var h=this;return this._activeGoalId$.pipe((0,Oe.w)(function(g){return g?h.getGoal(g):(0,k.of)(void 0)}))},oe.prototype.getActiveGoalId=function(){return this._activeGoalId$},oe.prototype.deleteNote=function(h){var g=this;return this.promptUserConfirmation({title:this.localizationService.get("ScorecardDialog_Delete_Note_Title"),message:this.localizationService.get("ScorecardDialog_Action_Cant_be_Undone"),panelClass:["updateDeleteNoteConfirmationDialogPanel"],onConfirmation:function(){return(0,r.mG)(g,void 0,void 0,function(){return(0,r.Jh)(this,function(F){switch(F.label){case 0:return[4,this.deleteNoteRequest(h)];case 1:return F.sent(),[2,!0]}})})}})},oe.prototype.deleteNoteRequest=function(h){return(0,r.mG)(this,void 0,void 0,function(){var g,u;return(0,r.Jh)(this,function(F){switch(F.label){case 0:C.fF.assertValue(this.scorecard,"No scorecard loaded"),g=this.scorecard,F.label=1;case 1:return F.trys.push([1,3,,4]),[4,this.goalsHttpService.deleteNote(this.scorecard.groupId,this.scorecard.id,h.goalId,h.id,h.valueTimestamp,this.scorecard.hierarchyPaths).toPromise()];case 2:return F.sent(),[3,4];case 3:if(u=F.sent(),404!==u?.status)throw this.goalsErrorService.showUserError(u,"DeleteGoalNoteError"),u;return[3,4];case 4:return this.assertScorecardLoaded(g)?(this.scorecard=(0,N.Uy)(this.scorecard,function(W){var ee=i.q.getGoal(W.goals,h.goalId);if(C.fF.assertValue(ee,"Goal not found"),!_.isEmpty(ee.goalValues)){var U=_.find(ee.goalValues,function(Q){return new Date(Q.timestamp).getTime()===new Date(h.valueTimestamp).getTime()});U.notes=_.filter(U.notes,function(Q){return Q.id!==h.id})}ee.notesCount=null==ee.notesCount?0:ee.notesCount-1}),this.commit(),[2]):[2]}})})},oe.prototype.deleteGoal=function(h){return(0,r.mG)(this,void 0,void 0,function(){var g,u,F,W,ee=this;return(0,r.Jh)(this,function(U){switch(U.label){case 0:return this.assertNoActivehierarchy()?[4,this.getGoal(h).pipe((0,te.q)(1)).toPromise()]:[2];case 1:return g=U.sent(),u=!_.isEmpty(g.subGoals),F=this.localizationService.get(g.isLinked?u?"ScorecardDialog_Delete_Metric_Title_Linked":"ScorecardDialog_Delete_Metric_Title_Linked_Submetrics":u?"ScorecardDialog_Delete_Metric_Title":"ScorecardDialog_Delete_Metric_Title_Submetrics"),W=g.isLinked?this.localizationService.get("ScorecardDialog_Delete_Metric_Message_Linked")+(u?this.localizationService.get("ScorecardDialog_Delete_Metric_Message_Linked_Submetrics"):""):this.localizationService.get("ScorecardDialog_Delete_Metric_Message_First_Line"),[2,this.promptUserConfirmation({title:F,message:W,panelClass:["updateConfirmationDialogPanel"],onConfirmation:function(){return(0,r.mG)(ee,void 0,void 0,function(){return(0,r.Jh)(this,function(B){switch(B.label){case 0:return[4,this.pollingService.refreshRollupsAfterGoalDelete(g)];case 1:return B.sent(),[4,this.deleteGoalRequest(h)];case 2:return B.sent(),[2,!0]}})})}})]}})})},oe.prototype.applySortAndFilter=function(h,g){return(0,r.mG)(this,void 0,void 0,function(){var u=this;return(0,r.Jh)(this,function(F){switch(F.label){case 0:return this.scorecard?[4,this.ensureUsersLoaded()]:[2];case 1:return F.sent(),this.scorecard=(0,N.Uy)(this.scorecard,function(W){W.goals=P.p.sortAndFilter(W.goals,h,u._goalStatusesByScorecardId$.value,g)}),this.commit(),[2]}})})},oe.prototype.deleteGoalRequest=function(h){return(0,r.mG)(this,void 0,void 0,function(){var g,u;return(0,r.Jh)(this,function(F){switch(F.label){case 0:if(!this.assertNoActivehierarchy())return[2];if(C.fF.assertValue(this.scorecard,"No scorecard loaded"),g=i.q.getGoal(this.scorecard.goals,h),C.fF.assertValue(g,"Goal not found"),g.isNew)return[3,4];F.label=1;case 1:return F.trys.push([1,3,,4]),this.setGoalState(h,"Deleting"),[4,this.goalsHttpService.deleteGoal(this.scorecard.groupId,this.scorecard.id,g.id).toPromise()];case 2:return F.sent(),[3,4];case 3:if(u=F.sent(),404!==u?.status)throw this.goalsErrorService.showUserError(u,"DeleteGoalError"),this.setGoalState(h,"Consumption"),u;return[3,4];case 4:return this.scorecard=(0,N.Uy)(this.scorecard,function(W){var ee=i.q.getGoal(W.goals,g.parentId);ee?.subGoals?ee.subGoals=ee.subGoals.filter(function(U){return U.id!==h}):W.goals&&(W.goals=W.goals.filter(function(U){return U.id!==h}))}),this.commit(),[2]}})})},oe.prototype.deleteGoalValue=function(h){var g=this;return this.promptUserConfirmation({title:this.localizationService.get("ScorecardDialog_Delete_CheckIn_Message_title"),message:"".concat(this.localizationService.get("ScorecardDialog_Delete_CheckIn_Message_First_Line"),"\n\n            ").concat(this.localizationService.get("ScorecardDialog_Action_Cant_be_Undone")),panelClass:["updateDeleteCheckInConfirmationDialogPanel"],onConfirmation:function(){return(0,r.mG)(g,void 0,void 0,function(){var F;return(0,r.Jh)(this,function(W){switch(W.label){case 0:return[4,this.getGoal(h.goalId).pipe((0,te.q)(1)).toPromise()];case 1:return F=W.sent(),[4,this.pollingService.refreshRollupsAfterGoalValueDelete(F,h)];case 2:return W.sent(),[4,this.deleteGoalValueRequest(h)];case 3:return W.sent(),[2,!0]}})})}})},oe.prototype.deleteGoalValueRequest=function(h){return(0,r.mG)(this,void 0,void 0,function(){var g,u;return(0,r.Jh)(this,function(F){switch(F.label){case 0:C.fF.assertValue(this.scorecard,"No scorecard loaded"),g=this.scorecard,F.label=1;case 1:return F.trys.push([1,3,,4]),[4,this.goalsHttpService.deleteGoalValue(this.scorecard.groupId,this.scorecard.id,h.goalId,h.timestamp,this.scorecard.hierarchyPaths).toPromise()];case 2:return F.sent(),[3,4];case 3:if(u=F.sent(),404!==u?.status)throw this.goalsErrorService.showUserError(u,"DeleteGoalValueError"),u;return[3,4];case 4:return this.assertScorecardLoaded(g)?(this.scorecard=(0,N.Uy)(this.scorecard,function(W){var ee=i.q.getGoal(W.goals,h.goalId);C.fF.assertValue(ee,"Goal not found"),ee.goalValues=_.filter(ee.goalValues,function(U){return U.timestamp!==h.timestamp})}),[4,this.refreshGoal(h.goalId)]):[2];case 5:return F.sent(),this.commit(),[2]}})})},oe.prototype.updateGoalQueryConnection=function(h,g,u){return(0,r.mG)(this,void 0,void 0,function(){var F,ee,U,Q=this;return(0,r.Jh)(this,function(B){switch(B.label){case 0:if(C.fF.assertValue(this.scorecard,"No scorecard loaded"),F=i.q.getGoal(this.scorecard.goals,h),C.fF.assertValue(F,"goal"),i.q.compareGoalQueryConnections(1===g?F.valueConnection:F.targetConnection,u))return[2];if(!this.assertNoActivehierarchy())return[2];B.label=1;case 1:return B.trys.push([1,4,,5]),[4,this.pollingService.startPollingAsync(F,g,{refreshGoal:!0,refreshGoalValues:!0,refreshRollups:!0})];case 2:return B.sent(),[4,this.goalsHttpService.updateGoalQueryConnection(this.scorecard.groupId,this.scorecard.id,h,g,(0,r.pi)((0,r.pi)({},u),{userId:this.userInfo.uoid})).toPromise()];case 3:return ee=B.sent(),this.scorecard=(0,N.Uy)(this.scorecard,function(w){F=i.q.getGoal(w.goals,h),Q.assignGoal(F,ee)}),this.commit(),[3,5];case 4:throw U=B.sent(),this.goalsErrorService.showUserError(U,"UpdateGoalQueryConnectionError"),U;case 5:return[2]}})})},oe.prototype.deleteGoalQueryConnection=function(h,g){return(0,r.mG)(this,void 0,void 0,function(){var u=this;return(0,r.Jh)(this,function(F){return this.assertNoActivehierarchy()?[2,this.promptUserConfirmation({title:this.localizationService.get("ScorecardDialog_Delete_Metric_Query_Connection_Title"),message:"".concat(this.localizationService.format("ScorecardDialog_Delete_Metric_Query_Connection_Message_Line_1",[this.localizationService.get(1===g?"CurrentValue":"Target")]),"\n\n            ").concat(this.localizationService.get("ScorecardDialog_Action_Cant_be_Undone")),onConfirmation:function(){return(0,r.mG)(u,void 0,void 0,function(){var ee,U,Q=this;return(0,r.Jh)(this,function(B){switch(B.label){case 0:C.fF.assertValue(this.scorecard,"No scorecard loaded"),B.label=1;case 1:return B.trys.push([1,5,,6]),[4,this.goalsHttpService.deleteGoalQueryConnection(this.scorecard.groupId,this.scorecard.id,h,g).toPromise()];case 2:return ee=B.sent(),this.scorecard=(0,N.Uy)(this.scorecard,function(w){var q=i.q.getGoal(w.goals,h);if(!q)throw"Goal not found";q.valueConnection=ee.valueConnection,q.targetConnection=ee.targetConnection,Q.assignGoal(q,ee)}),[4,this.refreshGoal(h)];case 3:return B.sent(),[4,this.expandGoalValues(h)];case 4:return B.sent(),this.commit(),[3,6];case 5:throw U=B.sent(),this.goalsErrorService.showUserError(U,"DeleteGoalQueryConnectionError"),U;case 6:return[2,!0]}})})}})]:[2]})})},oe.prototype.takeOverGoalQueryConnection=function(h,g){return(0,r.mG)(this,void 0,void 0,function(){var u=this;return(0,r.Jh)(this,function(F){return this.assertNoActivehierarchy()?[2,this.promptUserConfirmation({title:this.localizationService.get("MetricsDetailsPane_ConnectionsTab_TakeOver_Confirmation_Title"),message:this.localizationService.get("MetricsDetailsPane_ConnectionsTab_TakeOver_Confirmation"),okButtonText:this.localizationService.get("MetricsDetailsPane_ConnectionsTab_TakeOver"),onConfirmation:function(){return(0,r.mG)(u,void 0,void 0,function(){var ee,U,Q=this;return(0,r.Jh)(this,function(B){switch(B.label){case 0:C.fF.assertValue(this.scorecard,"No scorecard loaded"),B.label=1;case 1:return B.trys.push([1,3,,4]),[4,this.goalsHttpService.takeOverGoalQueryConnection(this.scorecard.groupId,this.scorecard.id,h,g).toPromise()];case 2:return ee=B.sent(),this.scorecard=(0,N.Uy)(this.scorecard,function(w){var q=i.q.getGoal(w.goals,h);Q.assignGoal(q,ee)}),this.commit(),[3,4];case 3:if(U=B.sent(),400!==U?.status)throw this.goalsErrorService.showUserError(U,"TakeOverGoalQueryConnectionError"),U;return this.errorService.errorNoDefaultAdditionalErrorInfo(this.localizationService.get("MetricsDetailsPane_ConnectionsTab_TakeOver_Error"),"TakeOverGoalQueryConnectionError",{title:this.localizationService.get("MetricsDetailsPane_ConnectionsTab_TakeOver_Error_Title"),level:ye.U.Information}),[3,4];case 4:return[2]}})})}})]:[2]})})},oe.prototype.getRefreshHistory=function(h){var g;return(0,r.mG)(this,void 0,void 0,function(){var F;return(0,r.Jh)(this,function(W){switch(W.label){case 0:if(C.fF.assertValue(this.scorecard,"No scorecard loaded"),this.scorecard.isSample)return[2,[]];if(!i.q.getGoal(null===(g=this.scorecard)||void 0===g?void 0:g.goals,h))return C.fF.assertFail("goal"),[2];W.label=1;case 1:return W.trys.push([1,3,,4]),[4,this.goalsHttpService.getRefreshHistory(this.scorecard.groupId,this.scorecard.id,h).toPromise()];case 2:return[2,W.sent()];case 3:throw F=W.sent(),this.goalsErrorService.showUserError(F,"GetRefreshHistoryError"),F;case 4:return[2]}})})},oe.prototype.refreshGoalValue=function(h,g){var u;return(0,r.mG)(this,void 0,void 0,function(){var F,W;return(0,r.Jh)(this,function(ee){switch(ee.label){case 0:if(C.fF.assertValue(this.scorecard,"No scorecard loaded"),!(F=i.q.getGoal(null===(u=this.scorecard)||void 0===u?void 0:u.goals,h)))return C.fF.assertFail("goal"),[2];if(1===g&&!F.valueConnection||2===g&&!F.targetConnection)return[2];ee.label=1;case 1:return ee.trys.push([1,4,,5]),[4,this.pollingService.startPollingAsync(F,g,{refreshGoal:!0,refreshGoalValues:!0,refreshRollups:!0})];case 2:return ee.sent(),[4,this.goalsHttpService.refreshGoalValue(this.scorecard.groupId,this.scorecard.id,h,g).toPromise()];case 3:return ee.sent(),this.showRefreshConfirmation(),[3,5];case 4:if(W=ee.sent(),429===W?.status)return this.goalsErrorService.showThrottlingError(),this.setGoalRefreshState(h,g,!1),[2];throw this.goalsErrorService.showUserError(W,"RefreshGoalValue"),W;case 5:return[2]}})})},oe.prototype.upsertGoalValueRollup=function(h,g,u){return(0,r.mG)(this,void 0,void 0,function(){var F,W,ee,U,B,w=this;return(0,r.Jh)(this,function(q){switch(q.label){case 0:if(!this.assertNoActivehierarchy())return[2];C.fF.assertValue(this.scorecard,"No scorecard loaded"),F=i.q.getGoal(this.scorecard.goals,h),C.fF.assertValue(F,"goal"),q.label=1;case 1:return q.trys.push([1,10,,11]),ee=void 0,U=p.E.getCurrentLocalDay(),_.isEmpty(F.subGoals)?[3,3]:[4,this.pollingService.startPollingAsync(F,g,{refreshGoal:!0,refreshGoalValues:!0,refreshRollups:!0})];case 2:q.sent(),q.label=3;case 3:switch(ee=l.r.hasHistoricalGoalValue(F.goalValues,g)?{rollupType:u,startDate:U.toISOString()}:{rollupType:u},g){case 1:return[3,4];case 2:return[3,6]}return[3,8];case 4:return[4,this.goalsHttpService.upsertGoalCurrentValueRollup(this.scorecard.groupId,this.scorecard.id,h,ee).toPromise()];case 5:return W=q.sent(),[3,9];case 6:return[4,this.goalsHttpService.upsertGoalTargetValueRollup(this.scorecard.groupId,this.scorecard.id,h,ee).toPromise()];case 7:return W=q.sent(),[3,9];case 8:C.fF.assertNever(g),q.label=9;case 9:return this.scorecard=(0,N.Uy)(this.scorecard,function(le){F=i.q.getGoal(le.goals,h),w.assignGoal(F,W)}),this.commit(),[3,11];case 10:throw B=q.sent(),this.goalsErrorService.showUserError(B,"upsertGoalValueRollupError"),B;case 11:return[2]}})})},oe.prototype.deleteGoalValueRollup=function(h,g){return(0,r.mG)(this,void 0,void 0,function(){var u,F,ee,U=this;return(0,r.Jh)(this,function(Q){switch(Q.label){case 0:if(!this.assertNoActivehierarchy())return[2];C.fF.assertValue(this.scorecard,"No scorecard loaded"),u=i.q.getGoal(this.scorecard.goals,h),C.fF.assertValue(u,"goal"),Q.label=1;case 1:switch(Q.trys.push([1,8,,9]),g){case 1:return[3,2];case 2:return[3,4]}return[3,6];case 2:return[4,this.goalsHttpService.deleteGoalCurrentValueRollup(this.scorecard.groupId,this.scorecard.id,h).toPromise()];case 3:return F=Q.sent(),[3,7];case 4:return[4,this.goalsHttpService.deleteGoalTargetValueRollup(this.scorecard.groupId,this.scorecard.id,h).toPromise()];case 5:return F=Q.sent(),[3,7];case 6:C.fF.assertNever(g),Q.label=7;case 7:return this.scorecard=(0,N.Uy)(this.scorecard,function(B){(u=i.q.getGoal(B.goals,h)).valueRollup=F.valueRollup,u.targetRollup=F.targetRollup,U.assignGoal(u,F)}),this.commit(),[3,9];case 8:throw ee=Q.sent(),this.goalsErrorService.showUserError(ee,"deleteGoalValueRollupError"),ee;case 9:return[2]}})})},oe.prototype.getStatusRules=function(h){var g;return(0,r.mG)(this,void 0,void 0,function(){var u,F;return(0,r.Jh)(this,function(W){switch(W.label){case 0:if(C.fF.assertValue(this.scorecard,"No scorecard loaded"),this.scorecard.isSample)return[2,null];if(!(u=i.q.getGoal(null===(g=this.scorecard)||void 0===g?void 0:g.goals,h)))return C.fF.assertFail("goal"),[2];if(!u.hasStatusRules)return[2,null];W.label=1;case 1:return W.trys.push([1,3,,4]),[4,this.goalsHttpService.getGoalStatusRules(this.scorecard.groupId,this.scorecard.id,h).toPromise()];case 2:return[2,W.sent()];case 3:throw F=W.sent(),this.goalsErrorService.showUserError(F,"GetStatusRulesError"),F;case 4:return[2]}})})},oe.prototype.saveStatusRules=function(h,g){var u,F,W,ee;return(0,r.mG)(this,void 0,void 0,function(){var U,Q,B,w;return(0,r.Jh)(this,function(q){switch(q.label){case 0:return this.assertNoActivehierarchy()?(C.fF.assertValue(this.scorecard,"No scorecard loaded"),(U=i.q.getGoal(null===(u=this.scorecard)||void 0===u?void 0:u.goals,h))?!g||_.isEmpty(g.rules)?U.hasStatusRules?[4,this.goalsHttpService.deleteGoalStatusRules(this.scorecard.groupId,this.scorecard.id,h).toPromise()]:[3,4]:[3,5]:(C.fF.assertFail("goal"),[2])):[2,g];case 1:return q.sent(),this.scorecard=(0,N.Uy)(this.scorecard,function(le){(U=i.q.getGoal(le.goals,h)).hasStatusRules=!1}),this.commit(),[4,this.refreshGoal(h)];case 2:return q.sent(),[4,this.expandGoalValues(h,!0)];case 3:q.sent(),q.label=4;case 4:return[2];case 5:return q.trys.push([5,9,,10]),Q=i.q.getGoalStatusRulesUpdateRequest(g),[4,this.goalsHttpService.upsertGoalStatusRules(this.scorecard.groupId,this.scorecard.id,h,Q).toPromise()];case 6:return B=q.sent(),this.scorecard=(0,N.Uy)(this.scorecard,function(le){(U=i.q.getGoal(le.goals,h)).hasStatusRules=!0}),this.commit(),[4,this.refreshGoal(h)];case 7:return q.sent(),[4,this.expandGoalValues(h,!0)];case 8:return q.sent(),[2,B];case 9:throw w=q.sent(),400===w?.status?this.errorService.errorNoDefaultAdditionalErrorInfo(this.localizationService.get("MetricsDetailsPane_StatusRulesTab_SaveRulesError_Description"),"GetStatusRulesError",{title:this.localizationService.get("MetricsDetailsPane_StatusRulesTab_SaveRulesError"),level:ye.U.Information,isDismissable:!0,showAdditionalErrorInfo:!0,errorDetails:null===(ee=null===(W=null===(F=w?.error)||void 0===F?void 0:F.details)||void 0===W?void 0:W[0])||void 0===ee?void 0:ee.message}):this.goalsErrorService.showUserError(w,"GetStatusRulesError"),w;case 10:return[2]}})})},oe.prototype.loadPrefetchedScorecard=function(h){return this.setScorecardWithGoals(h),this._scorecard$.asObservable()},oe.prototype.addGoal=function(){var h=this;if(this.assertNoActivehierarchy()){C.fF.assertValue(this.scorecard,"No scorecard loaded"),C.fF.assert(function(){return h.userHasWritePermissions()},"has write permissions");var g=i.q.getCurrentUser(),u=i.q.createNewGoal(g,this.scorecard.id);return this.scorecard=(0,N.Uy)(this.scorecard,function(F){if(F.goals?F.goals.push(u):F.goals=[u],-1!==F.goals.findIndex(function(U){return!_.isNil(U.rank)})){var ee=0;F.goals.forEach(function(U){U.rank=ee,ee++})}}),this.commit(),u.id}},oe.prototype.addSubGoal=function(h,g){var u=this;void 0===g&&(g=!0),this.assertNoActivehierarchy()&&(C.fF.assertValue(this.scorecard,"No scorecard loaded"),this.scorecard=(0,N.Uy)(this.scorecard,function(F){var W=i.q.getGoal(F.goals,h);C.fF.assertValue(W,"Parent goal not found");var ee=i.q.getCurrentUser(),U=i.q.createNewGoal(ee,u.scorecard.id,W.id);if(W.subGoals?W.subGoals.push(U):W.subGoals=[U],g&&(F.activeGoalId=void 0,F.selectedGoalIds={}),!_.isNil(W.rank)||-1!==W.subGoals.findIndex(function(w){return!_.isNil(w.rank)})){var B=0;W.subGoals.forEach(function(w){w.rank=B,B++})}}),this.commit())},oe.prototype.updateScorecard=function(h){return(0,r.mG)(this,void 0,void 0,function(){var g,u,F,W=this;return(0,r.Jh)(this,function(ee){switch(ee.label){case 0:return ee.trys.push([0,4,,5]),g=void 0!==h.localTimeZoneId&&h.localTimeZoneId!==this.scorecard.localTimeZoneId,[4,this.goalsHttpService.updateScorecard(this.scorecard.groupId,this.scorecard.id,h).toPromise()];case 1:return u=ee.sent(),h.name&&this.store.select(I.iF).pipe((0,te.q)(1)).subscribe(function(U){W.tabFacade.updateTab(U===W.scorecard.groupId?{id:"me##"+W.scorecard.id,title:h.name}:{id:W.scorecard.groupId+"##"+W.scorecard.id,title:h.name})}),this.scorecard=(0,N.Uy)(this.scorecard,function(U){for(var B=0,w=_.keys(h);B<w.length;B++){var q=w[B];U[q]=u[q]}}),this.commit(),g?[4,this.loadScorecard(this.scorecard.groupId,this.scorecard.id,!1,this.scorecard.hierarchyPaths)]:[3,3];case 2:ee.sent(),ee.label=3;case 3:return[3,5];case 4:throw F=ee.sent(),this.goalsErrorService.showUserError(F,"UpdateScorecardError"),F;case 5:return[2]}})})},oe.prototype.setGoalState=function(h,g){C.fF.assertValue(this.scorecard,"No scorecard loaded"),this.scorecard=(0,N.Uy)(this.scorecard,function(u){var F=i.q.getGoal(u.goals,h);C.fF.assertValue(F,"Goal not found"),F.state=g,("Editing"===F.state||"Deleting"===F.state)&&(u.selectedGoalIds[F.id]||u.activeGoalId===F.id)&&(u.activeGoalId=void 0,"Deleting"===F.state&&delete u.selectedGoalIds[F.id])}),this.commit()},oe.prototype.cancelEditing=function(h){C.fF.assertValue(this.scorecard,"No scorecard loaded");var g=i.q.getGoal(this.scorecard.goals,h);C.fF.assertValue(g,"Goal not found"),g.isNew?this.deleteGoalRequest(h):this.setGoalState(h,"Consumption")},oe.prototype.setViewType=function(h,g){var u=this;h!==this.viewType&&(i.q.isEditing(this.scorecard)&&!g?this.promptUserConfirmation({title:this.localizationService.get("MetricsUnsavedChangesTitle"),message:this.localizationService.get("MetricsUnsavedChangesDescription_SwitchView"),okButtonText:this.localizationService.get("ModalDialogButtonText_Continue"),panelClass:["updateConfirmationDialogPanel"],onConfirmation:function(){return(0,r.mG)(u,void 0,void 0,function(){var ee=this;return(0,r.Jh)(this,function(U){return i.q.filterGoals(this.scorecard.goals,function(Q){return!!Q.isNew||"Editing"===Q.state}).forEach(function(Q){return ee.cancelEditing(Q.id)}),this.setViewType(h,!0),[2]})})}}):(this.telemetryService.logEvent(m.HE,{viewType:h}),"Heatmap"===h&&this.setActiveHierarchy(void 0),this._viewType$.next(h)))},Object.defineProperty(oe.prototype,"viewType",{get:function(){return this._viewType$.value},enumerable:!1,configurable:!0}),Object.defineProperty(oe.prototype,"viewType$",{get:function(){return this._viewType$},enumerable:!1,configurable:!0}),Object.defineProperty(oe.prototype,"scorecardSelectionMode",{get:function(){return this._scorecardSelectionMode$.value},enumerable:!1,configurable:!0}),Object.defineProperty(oe.prototype,"scorecardSelectionMode$",{get:function(){return this._scorecardSelectionMode$},enumerable:!1,configurable:!0}),oe.prototype.setEditMode=function(h){this.isEditMode$.next(h),!h&&this.scorecard&&_.some(this.scorecard.goals)&&(this.scorecard=(0,N.Uy)(this.scorecard,function(g){(function F(W,ee){for(var U,Q=function(de){de.isNew&&(W?W.subGoals=W.subGoals.filter(function(V){return V.id!==de.id}):g.goals=g.goals.filter(function(V){return V.id!==de.id})),de.state="Consumption",(null===(U=de.subGoals)||void 0===U?void 0:U.length)>0&&F(de,de.subGoals)},B=0,w=ee;B<w.length;B++)Q(w[B])})(null,g.goals),g.activeGoalId=void 0,g.selectedGoalIds={}}),this.commit())},oe.prototype.isEditMode=function(){return this.isEditMode$.asObservable()},oe.prototype.isLoading=function(){return this.loading$.pipe((0,ge.U)(function(h){return h>0}))},oe.prototype.getColumnSettings=function(){return this._scorecard$.pipe((0,ge.U)(function(h){return h.columnSettings}))},oe.prototype.setGoalRefreshState=function(h,g,u){this.scorecard=(0,N.Uy)(this.scorecard,function(F){var W=i.q.getGoal(F.goals,h);switch(g){case 1:W.currentRefreshInProgress=u;break;case 2:W.targetRefreshInProgress=u;break;default:C.fF.assertNever(g)}}),this.commit()},oe.prototype.fetchUserDetails=function(h){return(0,r.mG)(this,void 0,void 0,function(){var g;return(0,r.Jh)(this,function(u){return g=_.chain(h).map(function(F){return _.concat(_.map(F.additionalOwners,function(W){var ee;return null!==(ee=W?.userPrincipalName)&&void 0!==ee?ee:W?.aadAppId}),F.owner)}).flattenDeep().filter(function(F){return!!F}).uniq().value(),[2,this.userDetailsService.getUserDetails(g).toPromise()]})})},oe.prototype.populateUserDisplayNames=function(h,g){if(!_.isEmpty(h)&&!_.isEmpty(g)){for(var u={},F=0,W=h;F<W.length;F++){var ee=W[F];u[ee.userPrincipalName]=ee,u[ee.aadAppId]=ee}for(var U=0,Q=g;U<Q.length;U++){var B=Q[U],w=_.concat([B.owner],_.map(B.additionalOwners,function(q){var le;return null!==(le=q?.userPrincipalName)&&void 0!==le?le:q?.aadAppId}));B.ownerDisplayNames=_.map(w,function(q){return u[q]?u[q].displayName:q})}}},oe.prototype.toggleSelectedGoal=function(h,g,u){var F=this;return void 0===g&&(g=!0),void 0===u&&(u=!1),C.fF.assertValue(this.scorecard,"No scorecard loaded"),this.scorecard=(0,N.Uy)(this.scorecard,function(W){var ee,U=i.q.getGoal(W.goals,h);C.fF.assertValue(U,"Goal not found"),!U.isNew&&(W.activeGoalId=void 0,F.numberOfSelectedGoals()>1||u?(u||(g&&(W.activeGoalId=h),W.selectedGoalIds={}),W.selectedGoalIds[h]||"Deleting"===U.state?delete W.selectedGoalIds[h]:W.selectedGoalIds[h]=!0):W.selectedGoalIds[h]||"Deleting"===U.state?W.selectedGoalIds={}:(g&&(W.activeGoalId=h),W.selectedGoalIds=((ee={})[h]=!0,ee)))}),this.commit(),this.scorecard.selectedGoalIds[h]},oe.prototype.setActiveGoal=function(h){C.fF.assertValue(this.scorecard,"No scorecard loaded"),this.scorecard=(0,N.Uy)(this.scorecard,function(g){g.activeGoalId=h}),this.commit()},oe.prototype.selectGoal=function(h,g){void 0===g&&(g=!0),C.fF.assertValue(this.scorecard,"No scorecard loaded");var u=i.q.getGoal(this.scorecard.goals,h);C.fF.assertValue(u,"Goal not found"),!u.isNew&&!this.scorecard.selectedGoalIds[h]&&"Deleting"!==u.state&&(this.scorecard=(0,N.Uy)(this.scorecard,function(F){var W;g&&(F.activeGoalId=h),F.selectedGoalIds=((W={})[h]=!0,W)}),this.commit())},oe.prototype.multiSelectGoal=function(h){C.fF.assertValue(this.scorecard,"No scorecard loaded");var g=i.q.getGoal(this.scorecard.goals,h);C.fF.assertValue(g,"Goal not found"),!g.isNew&&this.scorecard.selectedGoalIds[h]&&"Deleting"!==g.state&&(this.scorecard=(0,N.Uy)(this.scorecard,function(u){u.selectedGoalIds[h]=!0}),this.commit())},oe.prototype.toggleSelectAllGoals=function(){var h=this;C.fF.assertValue(this.scorecard,"No scorecard loaded"),this.scorecard=(0,N.Uy)(this.scorecard,function(g){g.selectedGoalIds={};var u=i.q.filterGoals(g.goals,function(U){return!U.isNew&&(!h.scorecardHost||h.scorecardHost.canSelectGoal(U).enabled)});if(u.length!==h.numberOfSelectedGoals())for(var F=0,W=u;F<W.length;F++)g.selectedGoalIds[W[F].id]=!0}),this.commit()},oe.prototype.unselectAllGoals=function(){C.fF.assertValue(this.scorecard,"No scorecard loaded"),this.scorecard=(0,N.Uy)(this.scorecard,function(h){h.activeGoalId=void 0,h.selectedGoalIds={}}),this.commit()},oe.prototype.getSelectedGoalIdsObservable=function(){return this._selectedGoalIds$},oe.prototype.getSelectedGoalsObservable=function(){var h=this;return this._selectedGoalIds$.pipe((0,ge.U)(function(g){return i.q.filterGoals(h.scorecard.goals,function(F){return g[F.id]&&!F.isNew})}))},oe.prototype.getFirstSelectedGoalId=function(){if(this.numberOfSelectedGoals()>0)return Object.keys(this.scorecard.selectedGoalIds)[0]},oe.prototype.numberOfSelectedGoals=function(){return _.isNil(this.scorecard.selectedGoalIds)?0:Object.keys(this.scorecard.selectedGoalIds).length},oe.prototype.isCurrentlyInEditMode=function(){return this.isEditMode$.value},oe.prototype.getCurrentScorecard=function(){return this.scorecard},oe.prototype.getScorecard=function(){return this._scorecard$.asObservable()},oe.prototype.flatten=function(){return i.q.flattenGoals(this.scorecard.goals)},oe.prototype.getBoard=function(){return this._scorecard$.pipe((0,ge.U)(function(h){return h.board}))},oe.prototype.addGroupToBoard=function(h,g){var u={id:h,name:g,goals:[]};this.scorecard=(0,N.Uy)(this.scorecard,function(F){_.isUndefined(F.board)&&(F.board={id:"",groups:[]}),F.board.id="boardVisual",F.board.groups.push(u)}),this.commit()},oe.prototype.deleteGroupFromBoard=function(h){this.scorecard=(0,N.Uy)(this.scorecard,function(g){g.board.groups=g.board.groups.filter(function(u){return u.id!==h})}),this.commit()},oe.prototype.isEditing=function(){return this._scorecard$.pipe((0,ge.U)(function(h){return i.q.isEditing(h)}))},oe.prototype.ensureRolesLoaded=function(){return(0,r.mG)(this,void 0,void 0,function(){var h,g;return(0,r.Jh)(this,function(u){switch(u.label){case 0:if(C.fF.assertValue(this.scorecard,"No scorecard loaded"),!_.isEmpty(this.scorecard.roles))return[2];u.label=1;case 1:return u.trys.push([1,6,,7]),[4,this.goalsHttpService.getRoles(this.scorecard.groupId,this.scorecard.id).toPromise()];case 2:return h=u.sent(),_.isEmpty(h)?[4,this.initStartingRoles()]:[3,4];case 3:return u.sent(),[3,5];case 4:this.scorecard=(0,N.Uy)(this.scorecard,function(F){F.roles=h}),this.commit(),u.label=5;case 5:return[3,7];case 6:throw g=u.sent(),this.goalsErrorService.showUserError(g,"LoadRoles"),g;case 7:return[2]}})})},oe.prototype.initStartingRoles=function(){return(0,r.mG)(this,void 0,void 0,function(){var h,g,u,F=this;return(0,r.Jh)(this,function(W){switch(W.label){case 0:C.fF.assertValue(this.scorecard,"No scorecard loaded"),W.label=1;case 1:return W.trys.push([1,3,,4]),h=[{name:this.localizationService.get("EditScorecardSettings_Role_Card_Default_Role_View_All"),isDefaultRole:!0,permissions:[{goalId:void 0,permissions:1,applyToChildGoals:!0}]},{name:this.localizationService.get("EditScorecardSettings_Role_Card_Default_Role_View_And_Update_All"),isDefaultRole:!1,permissions:[{goalId:void 0,permissions:27,applyToChildGoals:!0}]}],[4,Promise.all(h.map(function(ee){return F.goalsHttpService.createRole(F.scorecard.groupId,F.scorecard.id,ee).toPromise()}))];case 2:return g=W.sent(),this.scorecard=(0,N.Uy)(this.scorecard,function(ee){var U;_.isEmpty(ee.roles)?ee.roles=g:(U=ee.roles).push.apply(U,g)}),this.commit(),[2,g];case 3:throw u=W.sent(),this.goalsErrorService.showUserError(u,"InitStartingRolesError"),u;case 4:return[2]}})})},oe.prototype.deleteRole=function(h){return(0,r.mG)(this,void 0,void 0,function(){var g=this;return(0,r.Jh)(this,function(u){switch(u.label){case 0:return[4,this.ensureRolesLoaded()];case 1:return u.sent(),[2,this.promptUserConfirmation({title:this.localizationService.get("ScorecardDialog_Delete_Role_Title"),message:"".concat(this.localizationService.get("ScorecardDialog_Delete_Role_Message_First_Line"),"\n\n            ").concat(this.localizationService.get("ScorecardDialog_Action_Cant_be_Undone")),panelClass:["updateConfirmationDialogPanel"],onConfirmation:function(){return(0,r.mG)(g,void 0,void 0,function(){var W,ee,U;return(0,r.Jh)(this,function(Q){switch(Q.label){case 0:C.fF.assertValue(this.scorecard,"No scorecard loaded"),W=null===(U=this.scorecard.roles)||void 0===U?void 0:U.find(function(B){return B.id===h}),C.fF.assertValue(W,"Role not found"),Q.label=1;case 1:return Q.trys.push([1,3,,4]),[4,this.goalsHttpService.deleteRole(this.scorecard.groupId,this.scorecard.id,W.id).toPromise()];case 2:return Q.sent(),[3,4];case 3:throw ee=Q.sent(),this.goalsErrorService.showUserError(ee,"DeleteRoleError"),ee;case 4:return this.scorecard=(0,N.Uy)(this.scorecard,function(B){B.roles=B.roles.filter(function(w){return w.id!==h})}),this.commit(),[2,!0]}})})}})]}})})},oe.prototype.setAsDefaultRole=function(h){var g,u,F;return(0,r.mG)(this,void 0,void 0,function(){var W,ee,U,Q=this;return(0,r.Jh)(this,function(B){switch(B.label){case 0:return[4,this.ensureRolesLoaded()];case 1:return B.sent(),C.fF.assertValue(this.scorecard,"No scorecard loaded"),W=null===(g=this.scorecard.roles)||void 0===g?void 0:g.find(function(w){return w.id===h}),C.fF.assertValue(W,"Role not found"),ee=null===(F=null===(u=this.scorecard.roles)||void 0===u?void 0:u.find(function(w){return w.isDefaultRole}))||void 0===F?void 0:F.name,U=W.name,[2,this.promptUserConfirmation({title:this.localizationService.get("EditScorecardSettings_Permission_Pane_Change_Default_Role_title"),message:_.isNil(ee)?this.localizationService.format("EditScorecardSettings_Permission_Pane_Set_Default_Role_Message",[U]):this.localizationService.format("EditScorecardSettings_Permission_Pane_Change_Default_Role_Message",[ee,U]),okButtonText:this.localizationService.get("ModalDialogButtonText_Continue"),panelClass:["updateRoleConfirmationDialogPanel"],onConfirmation:function(){return(0,r.mG)(Q,void 0,void 0,function(){var q;return(0,r.Jh)(this,function(le){switch(le.label){case 0:return le.trys.push([0,2,,3]),[4,this.goalsHttpService.updateRole(this.scorecard.groupId,this.scorecard.id,W.id,{isDefaultRole:!0}).toPromise()];case 1:return le.sent(),[3,3];case 2:throw q=le.sent(),this.goalsErrorService.showUserError(q,"UpdateRoleError"),q;case 3:return this.scorecard=(0,N.Uy)(this.scorecard,function(de){de.roles.forEach(function(V){V.isDefaultRole=V.id===h})}),this.commit(),[2,!0]}})})}})]}})})},oe.prototype.createRole=function(h){return(0,r.mG)(this,void 0,void 0,function(){var g,u;return(0,r.Jh)(this,function(F){switch(F.label){case 0:C.fF.assertValue(this.scorecard,"No scorecard loaded"),F.label=1;case 1:return F.trys.push([1,3,,4]),[4,this.goalsHttpService.createRole(this.scorecard.groupId,this.scorecard.id,h).toPromise()];case 2:return g=F.sent(),this.scorecard=(0,N.Uy)(this.scorecard,function(W){_.isEmpty(W.roles)?W.roles=[g]:W.roles.push(g)}),this.commit(),[2,g];case 3:throw u=F.sent(),this.goalsErrorService.showUserError(u,"UpdateRoleError"),u;case 4:return[2]}})})},oe.prototype.updateRole=function(h,g){var u;return(0,r.mG)(this,void 0,void 0,function(){var F,W,ee;return(0,r.Jh)(this,function(U){switch(U.label){case 0:return[4,this.ensureRolesLoaded()];case 1:U.sent(),C.fF.assertValue(this.scorecard,"No scorecard loaded"),F=null===(u=this.scorecard.roles)||void 0===u?void 0:u.find(function(Q){return Q.id===h}),C.fF.assertValue(F,"Role not found"),U.label=2;case 2:return U.trys.push([2,4,,5]),[4,this.goalsHttpService.updateRole(this.scorecard.groupId,this.scorecard.id,h,g).toPromise()];case 3:return W=U.sent(),this.scorecard=(0,N.Uy)(this.scorecard,function(Q){Q.roles=Q.roles.map(function(B){return B.id===h?W:B})}),this.commit(),[2,W];case 4:throw ee=U.sent(),this.goalsErrorService.showUserError(ee,"UpdateRoleError"),ee;case 5:return[2]}})})},oe.prototype.updateGoalValueConnectionSettings=function(h,g){return(0,r.mG)(this,void 0,void 0,function(){var u,F;return(0,r.Jh)(this,function(W){switch(W.label){case 0:C.fF.assertValue(this.scorecard,"No scorecard loaded"),u=i.q.getGoal(this.scorecard.goals,h),C.fF.assertValue(u,"Goal not found"),W.label=1;case 1:return W.trys.push([1,3,,4]),[4,this.goalsHttpService.updateConnectionSettings(this.scorecard.groupId,this.scorecard.id,h,g).toPromise()];case 2:return W.sent(),this.scorecard=(0,N.Uy)(this.scorecard,function(ee){var U=i.q.getGoal(ee.goals,h);U.valueConnection&&1===g.connectionType?U.valueConnection=(0,r.pi)((0,r.pi)({},U.valueConnection),{shouldClearGoalValues:g.shouldClearGoalValues}):U.targetConnection&&2===g.connectionType&&(U.targetConnection=(0,r.pi)((0,r.pi)({},U.targetConnection),{shouldClearGoalValues:g.shouldClearGoalValues}))}),this.commit(),[3,4];case 3:throw F=W.sent(),this.goalsErrorService.showUserError(F,"UpdateGoalValueConnectionSettingsError"),F;case 4:return[2]}})})},oe.prototype.setScorecardWithGoals=function(h){var g=this;this.linkedScorecardsById=_.keyBy(h.linkedScorecards,"id"),this.scorecard=(0,N.Uy)(h,function(u){var F,W;u.columnSettings=_.isEmpty(u.columnSettings)?d.om:c._.mergeColumns(u.columnSettings,d.om),c._.adjustColumnSettings(g.featureSwitches,u.columnSettings),g.featureSwitches.featureSwitches.goalsLinkedGoals?null===(F=u.goals)||void 0===F||F.forEach(function(ee){return ee.isLinked=l.r.isLinked(ee,u)}):u.goals=_.filter(u.goals,function(ee){return ee.scorecardId===u.id}),u.isSample=i.q.isSampleScorecard(h),_.some(u?.goals)&&(u.goals=P.p.sort(i.q.buildGoalTree(u.goals),d.Ij)),(null===(W=g.scorecard)||void 0===W?void 0:W.id)===h.id?(u.activeGoalId=g.scorecard.activeGoalId,u.selectedGoalIds=g.scorecard.selectedGoalIds):u.selectedGoalIds={},u.showGoalTargetsInChart=!1}),this.commit()},oe.prototype.commit=function(){this._scorecard$.next(this.scorecard)},oe.prototype.ensureUsersLoaded=function(){return(0,r.mG)(this,void 0,void 0,function(){var h,g=this;return(0,r.Jh)(this,function(u){switch(u.label){case 0:return C.fF.assertValue(this.scorecard,"No scorecard loaded"),this.scorecard.usersLoaded?[2]:[4,this.fetchUserDetails(i.q.flattenGoals(this.scorecard.goals))];case 1:return h=u.sent(),this.scorecard=(0,N.Uy)(this.scorecard,function(F){g.populateUserDisplayNames(h,i.q.flattenGoals(F.goals)),F.usersLoaded=!0}),this.commit(),[2]}})})},oe.prototype.showRefreshConfirmation=function(){this.dialogService.showSimpleDialog(this.localizationService.get("Refresh_Scheduled"),this.localizationService.get("Refresh_Scheduled_Data_Will_Be_Updated"))},oe.prototype.promptUserConfirmation=function(h){var g,u;return(0,r.mG)(this,void 0,void 0,function(){return(0,r.Jh)(this,function(ee){switch(ee.label){case 0:return C.fF.assertValue(h,"args"),C.fF.assertValue(h.title,"args.title"),C.fF.assertValue(h.message,"args.message"),[4,this.dialogService.showConfirmationDialog({title:h.title,message:h.message,okButtonText:null!==(g=h.okButtonText)&&void 0!==g?g:this.localizationService.get("Delete"),cancelButtonText:null!==(u=h.cancelButtonText)&&void 0!==u?u:this.localizationService.get("Cancel_ButtonText")},{autoFocus:!0,panelClass:h.panelClass}).afterClosed().toPromise()];case 1:return 1===ee.sent()&&h.onConfirmation?[4,h.onConfirmation()]:[3,3];case 2:return[2,ee.sent()];case 3:return[2,void 0]}})})},oe.prototype.assignGoal=function(h,g){var u=h.rank;C.fF.assertValue(h,"existingGoal"),C.fF.assertValue(g,"newGoal"),Object.assign(h,g),h.cycle=g.cycle,h.cyclePeriod=g.cyclePeriod,h.rank=u,h.valuesCategoryId=g.valuesCategoryId},oe.prototype.createCategoryList=function(h){return(0,r.mG)(this,void 0,void 0,function(){var g,u;return(0,r.Jh)(this,function(F){switch(F.label){case 0:C.fF.assertValue(this.scorecard,"createCategoryList No scorecard loaded"),C.fF.assert(function(){return!_.isEmpty(h)},"createCategoryList Categorical values are empty"),F.label=1;case 1:return F.trys.push([1,3,,4]),[4,this.goalsHttpService.createGoalValueCategories(this.scorecard.groupId,this.scorecard.id,i.q.getGoalValueCategoriesCreateRequest(h)).toPromise()];case 2:return g=F.sent(),this.scorecard=(0,N.Uy)(this.scorecard,function(W){_.isUndefined(W.goalValueCategories)&&(W.goalValueCategories=[]),W.goalValueCategories.push(g)}),[3,4];case 3:throw u=F.sent(),this.goalsErrorService.showUserError(u,"SaveGoalError"),u;case 4:return this.commit(),[2,g]}})})},oe.prototype.updateCategoryList=function(h){return(0,r.mG)(this,void 0,void 0,function(){var g,u,F=this;return(0,r.Jh)(this,function(W){switch(W.label){case 0:C.fF.assertValue(this.scorecard,"updateCategoryList No scorecard loaded"),C.fF.assertValue(h,"updateCategoryList categoryList"),C.fF.assertValue(_.find(this.scorecard.goalValueCategories,function(ee){return ee.id===h.id}),"updateCategoryList No category list found to update"),W.label=1;case 1:return W.trys.push([1,3,,4]),[4,this.goalsHttpService.updateGoalValueCategories(this.scorecard.groupId,this.scorecard.id,h.id,i.q.getGoalValueCategoriesUpdateRequest(h)).toPromise()];case 2:return g=W.sent(),this.scorecard=(0,N.Uy)(this.scorecard,function(ee){var U=_.findIndex(F.scorecard.goalValueCategories,function(Q){return Q.id===g.id});ee.goalValueCategories[U]=g}),[3,4];case 3:throw u=W.sent(),this.goalsErrorService.showUserError(u,"SaveGoalError"),u;case 4:return this.commit(),[2,g]}})})},oe.prototype.deleteCategoryList=function(h){return(0,r.mG)(this,void 0,void 0,function(){var g;return(0,r.Jh)(this,function(u){switch(u.label){case 0:C.fF.assertValue(this.scorecard,"deleteCategoryList No scorecard loaded"),C.fF.assertValue(_.find(this.scorecard.goalValueCategories,function(F){return F.id===h}),"deleteCategoryList No category list found to delete."),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,this.goalsHttpService.deleteGoalValueCategories(this.scorecard.groupId,this.scorecard.id,h).toPromise()];case 2:return u.sent(),this.scorecard=(0,N.Uy)(this.scorecard,function(F){_.remove(F.goalValueCategories,function(W){return W.id===h})}),[3,4];case 3:throw g=u.sent(),this.goalsErrorService.showUserError(g,"SaveGoalError"),g;case 4:return this.commit(),[2]}})})},oe.prototype.getGoalValueCategoryLists=function(h){var g,u;return C.fF.assertValue(this.scorecard,"No scorecard loaded"),h?null!==(g=this.getSourceScorecard(h).goalValueCategories)&&void 0!==g?g:[]:null!==(u=this.scorecard.goalValueCategories)&&void 0!==u?u:[]},oe.prototype.getGoalValueCategories=function(h){var g,u;if(h.valuesCategoryId){var F=this.getGoalValueCategoryLists(h);return null!==(u=null===(g=_.find(F,function(W){return W.id===h.valuesCategoryId}))||void 0===g?void 0:g.categories)&&void 0!==u?u:[]}},Object.defineProperty(oe.prototype,"goalStatusesByScorecardId$",{get:function(){return this._goalStatusesByScorecardId$},enumerable:!1,configurable:!0}),oe.prototype.getGoalStatuses=function(h){var g,u,F,W;return C.fF.assertValue(this.scorecard,"No scorecard loaded"),h?null!==(u=null===(g=this.getSourceScorecard(h).goalStatuses)||void 0===g?void 0:g.statuses)&&void 0!==u?u:[]:null!==(W=null===(F=this.scorecard.goalStatuses)||void 0===F?void 0:F.statuses)&&void 0!==W?W:[]},oe.prototype.userHasWritePermissions=function(){var h,g=(0,o.l)(null===(h=this.scorecard)||void 0===h?void 0:h.permissions);return(0,ae.yE)(g,2)},oe.prototype.bulkDeleteGoalsPrompt=function(){return(0,r.mG)(this,void 0,void 0,function(){var h,g,u=this;return(0,r.Jh)(this,function(F){switch(F.label){case 0:return this.assertNoActivehierarchy(!0)?[4,this.getSelectedGoalsObservable().pipe((0,te.q)(1)).toPromise()]:[2];case 1:return h=F.sent(),g=_.some(h,function(W){return W.isLinked}),[2,this.promptUserConfirmation({title:this.localizationService.format("ScorecardDialog_BulkDelete_Metric_Title",[this.numberOfSelectedGoals()]),message:this.localizationService.get(g?"ScorecardDialog_BulkDelete_Metric_Message_Linked":"ScorecardDialog_BulkDelete_Metric_Message_First_Line"),panelClass:["updateConfirmationDialogPanel"],onConfirmation:function(){return(0,r.mG)(u,void 0,void 0,function(){return(0,r.Jh)(this,function(ee){switch(ee.label){case 0:return[4,this.bulkDeleteGoals()];case 1:return ee.sent(),[2,!0]}})})}})]}})})},oe.prototype.bulkDeleteGoals=function(){return(0,r.mG)(this,void 0,void 0,function(){var h,g=this;return(0,r.Jh)(this,function(u){switch(u.label){case 0:return this.assertNoActivehierarchy(!0)?(C.fF.assertValue(this.scorecard,"No scorecard loaded"),h=i.q.filterGoals(this.scorecard.goals,function(F){return g.scorecard.selectedGoalIds[F.id]&&!F.isNew}),[4,this.bulkDeleteGoalsRequest(h)]):[2];case 1:return u.sent(),[2]}})})},oe.prototype.bulkDeleteGoalsRequest=function(h){return(0,r.mG)(this,void 0,void 0,function(){var g,u,W,ee;return(0,r.Jh)(this,function(U){switch(U.label){case 0:for(g=0,u=h;g<u.length;g++)this.setGoalState(u[g].id,"Deleting");U.label=1;case 1:return U.trys.push([1,4,,5]),W=_.map(h,"id"),_.isEmpty(W)?[3,3]:[4,this.goalsHttpService.bulkDeleteGoals(this.scorecard.groupId,this.scorecard.id,{goalIds:W}).toPromise()];case 2:U.sent(),U.label=3;case 3:return[3,5];case 4:if(ee=U.sent(),404!==ee?.status)throw this.goalsErrorService.showUserError(ee,"BulkDeleteGoalError"),ee;return[3,5];case 5:return this.scorecard=(0,N.Uy)(this.scorecard,function(Q){for(var B=function(V){var M=i.q.getGoal(Q.goals,V.parentId);M?.subGoals?M.subGoals=M.subGoals.filter(function(L){return L.id!==V.id}):Q.goals&&(Q.goals=Q.goals.filter(function(L){return L.id!==V.id}))},w=0,q=h;w<q.length;w++)B(q[w])}),this.commit(),[2]}})})},oe.prototype.bulkUpdateGoals=function(h){var g,u,F;return(0,r.mG)(this,void 0,void 0,function(){var W,ee,U,Q,w,q,le,de,V,M,L,x,Y,ue,Ne,$e,Xe=this;return(0,r.Jh)(this,function(it){switch(it.label){case 0:if(!this.assertNoActivehierarchy(!0))return[2];if(C.fF.assertValue(this.scorecard,"No scorecard loaded"),C.fF.assertValue(h,"No bulk request"),(null===(g=h.goalIds)||void 0===g?void 0:g.length)<=0)return[2];for(W=h.target,delete h.target,ee=0,U=h.goalIds;ee<U.length;ee++)this.setGoalState(x=U[ee],"Saving");return Q=_.map(h.owners,function(st){var ot;return null!==(ot=st.userPrincipalName)&&void 0!==ot?ot:st.aadAppId}),_.isEmpty(h.owners)?[3,2]:[4,this.userDetailsService.getUserDetails(Q).toPromise()];case 1:return w=it.sent(),[3,3];case 2:w=[],it.label=3;case 3:for(q={},le=0,de=w;le<de.length;le++)q[(V=de[le]).userPrincipalName]=V,q[V.aadAppId]=V;it.label=4;case 4:if(it.trys.push([4,10,,11]),_.isNil(W))return[3,8];M=0,L=h.goalIds,it.label=5;case 5:return M<L.length?(Y=i.q.getGoal(this.scorecard.goals,x=L[M]),ue=null!==(F=null===(u=_.find(Y.aggregations,function(st){return"Target"===st.type}))||void 0===u?void 0:u.timestamp)&&void 0!==F?F:h.timestamp,[4,this.upsertGoalValues(x,[{timestamp:ue,target:W}])]):[3,8];case 6:it.sent(),it.label=7;case 7:return M++,[3,5];case 8:return[4,this.goalsHttpService.bulkUpdateGoals(this.scorecard.groupId,this.scorecard.id,h).toPromise()];case 9:return Ne=it.sent(),this.scorecard=(0,N.Uy)(this.scorecard,function(st){for(var ot=0,ut=Ne;ot<ut.length;ot++){var qe=ut[ot],ct=i.q.getGoal(st.goals,qe.id),yt=ct.additionalOwners;Xe.assignGoal(ct,qe),_.isEmpty(h.owners)?ct.additionalOwners=yt:ct.ownerDisplayNames=_.map(Q,function(wt){var It,K;return null!==(K=null===(It=q[wt])||void 0===It?void 0:It.displayName)&&void 0!==K?K:wt}),ct.state="Consumption"}}),[3,11];case 10:throw $e=it.sent(),this.goalsErrorService.showUserError($e,"BulkUpdateGoalError"),$e;case 11:return this.commit(),[2]}})})},oe.prototype.toggleShowGoalTargetsInChart=function(h){this.scorecard=(0,N.Uy)(this.scorecard,function(g){g.showGoalTargetsInChart=h}),this.commit()},oe.prototype.createLinkedGoals=function(h,g){return(0,r.mG)(this,void 0,void 0,function(){var u,F,W,ee,U,Q,B,w;return(0,r.Jh)(this,function(q){switch(q.label){case 0:if(_.isEmpty(h))return[2];u=new Set(i.q.mapGoals(this.scorecard.goals,function(le){return le.id})),F=new Set,(W=h.length)>1&&(ee=this.dialogService.showSimpleWaitDialog(this.localizationService.format("Metrics_LinkedMetrics_Linking",W),W>100?this.localizationService.get("This_Might_Take_A_Moment"):"")),U=0,q.label=1;case 1:if(!(U<W))return[3,9];if(u.has((Q=h[U]).id))return C.fF.assertFail("Selected goal to link already exists on this scorecard."),[3,8];(B=Q.parentId)&&!F.has(B)&&(C.fF.assertFail("Attempting to link goal with parentId ".concat(B," without having linked parent.")),B=void 0),q.label=2;case 2:return q.trys.push([2,4,,8]),[4,this.goalsHttpService.createLinkedGoals(this.scorecard.groupId,this.scorecard.id,{goalIds:[Q.id],scorecardId:Q.scorecardId,parentGoalId:B??g}).toPromise()];case 3:return q.sent(),F.add(Q.id),[3,8];case 4:return 429!==(w=q.sent()).status?[3,6]:[4,new Promise(function(le){return setTimeout(le,5e3)})];case 5:return q.sent(),U--,[3,7];case 6:return this.goalsErrorService.showUserError(w,"CreateLinkedGoalsError","Metrics_LinkedMetrics_Error"),[3,9];case 7:return[3,8];case 8:return U++,[3,1];case 9:return this.loadScorecard(this.scorecard.groupId,this.scorecard.id,!0,this.scorecard.hierarchyPaths),ee?.close(),[2]}})})},oe.prototype.getSourceScorecard=function(h){if(h.isLinked){var g=this.linkedScorecardsById[h.scorecardId];if(g)return g;C.fF.assertFail("No linked scorecard with id "+h.scorecardId)}return this.scorecard},oe.prototype.openLinkedSourceScorecard=function(h){C.fF.assert(function(){return h.isLinked},"Goal is not linked");var g=this.getSourceScorecard(h);this.scorecardHost.openScorecard(g,h)},oe.prototype.getOwnerDisplayNames=function(h){return(0,r.mG)(this,void 0,void 0,function(){var g,u,F;return(0,r.Jh)(this,function(W){switch(W.label){case 0:return g=_.concat([h.owner],_.map(h.additionalOwners,function(ee){var U;return null!==(U=ee?.userPrincipalName)&&void 0!==U?U:ee?.aadAppId})),[4,this.userDetailsService.getUserDetails(g).toPromise()];case 1:return u=W.sent(),F=_.map(u,function(ee){return ee?.displayName}),[2,_.isEmpty(F)?g:F]}})})},oe.\u0275fac=function(g){return new(g||oe)(be.\u0275\u0275inject(H.f),be.\u0275\u0275inject(ie.K),be.\u0275\u0275inject(Fe.x),be.\u0275\u0275inject(ze.T),be.\u0275\u0275inject(Ke.o),be.\u0275\u0275inject(je.a),be.\u0275\u0275inject(He.vZ),be.\u0275\u0275inject(Je.X),be.\u0275\u0275inject(j.y0),be.\u0275\u0275inject(J.SN),be.\u0275\u0275inject(nt.yh),be.\u0275\u0275inject(G.M,8),be.\u0275\u0275inject(Z.u,8))},oe.\u0275prov=be.\u0275\u0275defineInjectable({token:oe,factory:oe.\u0275fac}),oe}()},14786:function(lt,Ge,t){"use strict";t.d(Ge,{AY:function(){return ce},Bn:function(){return C},Fg:function(){return J},GW:function(){return s},HE:function(){return he},JP:function(){return l},Lc:function(){return Z},V8:function(){return k},_9:function(){return ye},dT:function(){return d},h2:function(){return H},ib:function(){return m},pN:function(){return y},tj:function(){return te},z8:function(){return O}});var r=t(41114),o="PBI.Goal.ContextMenu.CreateAPowerAutomateFlow",a=(r.cx[o]=(0,r.b1)(o),"PBI.Goal.TargetsEditor.Action.Opened"),d=r.cx[a]=(0,r.b1)(a),p="PBI.Goal.TargetsEditor.Action.Canceled",l=r.cx[p]=(0,r.b1)(p),c="PBI.Goal.TargetsEditor.Action.Done",y=r.cx[c]=(0,r.b1)(c),i="PBI.Goal.ValuesEditor.Action.Opened",C=r.cx[i]=(0,r.b1)(i),v="PBI.Goal.ValuesEditor.Action.Canceled",k=r.cx[v]=(0,r.b1)(v),E="PBI.Goal.ValuesEditor.Action.Done",s=r.cx[E]=(0,r.b1)(E),ne="PBI.ScorecardHeader.LabelInlineEdit",te=r.cx[ne]=(0,r.b1)(ne),X="PBI.ScorecardHeader.DescriptionInlineEdit",m=r.cx[X]=(0,r.b1)(X),O=function(ge){return ge.Manual="Manual",ge.Connect="Connect",ge.Rollup="Rollup",ge}({}),I="PBI.WebScorecard.SaveCurrentValueSelection",H=r.cx[I]=(0,r.b1)(I),G="PBI.WebScorecard.SaveTargetValueSelection",Z=r.cx[G]=(0,r.b1)(G),ie="PBI.DatasetDetailsPage.GoalRollupsCoachmarkTriggered",ye=r.cx[ie]=(0,r.b1)(ie),ae="PBI.DatasetDetailsPage.GoalRollupsDetailsPaneCoachmarkTriggered",J=r.cx[ae]=(0,r.b1)(ae),N="PBI.Scorecard.ChangeViewType",he=r.cx[N]=(0,r.b1)(N),pe="PBI.Scorecard.Hierarchies.Builder.Open",ce=r.cx[pe]=(0,r.b1)(pe)},8748:function(lt,Ge,t){"use strict";t.d(Ge,{o:function(){return ie}});var r=t(81337),o=t(12966),P=t(41114),a="PBI.MashupEditor.OnReadyError",d=P.cx[a]=(0,P.b1)(a),p="PBI.MashupEditor.OnTokenError",l=P.cx[p]=(0,P.b1)(p),c=t(48741),y=t(50423),i=t(95281),C=t(33567),v=t(73221),k=t(46544),E=t(78590),s=t(59017),ne=t(23558),te=t(59973),X=t(83317),m=t(76746),O=t(85928),I=t(65181),H=["mashupIframe"],Z={readyState:0},ie=function(ye){function ae(J,N,he,pe,ce,ge){var se=ye.call(this)||this;return se.appSettings=J,se.ref=N,se.mashupService=he,se.localizationService=pe,se.telemetryService=ce,se.componentStore=ge,se.onError=new y.EventEmitter,se.onReady=new y.EventEmitter,se.readyState$=se.componentStore.select(function(De){return De.readyState}),se.updateState=se.componentStore.updater(function(De,fe){return(0,r.pi)((0,r.pi)({},De),{readyState:fe})}),se}return(0,r.ZT)(ae,ye),ae.prototype.ngOnInit=function(){var N,he,pe,ce,J=this;!this.theme&&!(null===(he=null===(N=this.clientConfiguration)||void 0===N?void 0:N.editorSettings)||void 0===he)&&he.themeOverride&&(this.theme=null===(ce=null===(pe=this.clientConfiguration)||void 0===pe?void 0:pe.editorSettings)||void 0===ce?void 0:ce.themeOverride),this.componentStore.setState(Z),this.changes$("flow").pipe((0,ne.M)(this.readyState$),(0,te.h)(function(ge){return!!ge[0]&&1!==ge[1]}),(0,X.R)(this.onDestroy$)).subscribe(function(ge){var De=ge[1];return(0,r.mG)(J,void 0,void 0,function(){return(0,r.Jh)(this,function(fe){switch(fe.label){case 0:return this.updateState(1),0===De?[3,2]:[4,this.endFlow()];case 1:fe.sent(),fe.label=2;case 2:return this.startFlow(),[2]}})})})},ae.prototype.ngAfterViewInit=function(){var J=this;(0,C.mv)(this.clientConfiguration,"clientConfiguration is required"),this.mashupService.getPQToken("".concat(this.appSettings.powerQueryResourceName,"/.default")).toPromise().catch(function(){}),this.mashupDataSubscription=(0,s.aj)([this.mashupService.getPQEndpoint()]).pipe((0,te.h)(function(N){return!!N[0]})).subscribe(function(N){J.initMashupeditor(N[0])},function(N){J.onError.emit(N)})},ae.prototype.ngOnDestroy=function(){return this.mashupEditorClient&&this.mashupEditorClient.dispose(),this.mashupDataSubscription&&this.mashupDataSubscription.unsubscribe(),ye.prototype.ngOnDestroy.call(this)},ae.prototype.setFocus=function(){var J=this.mashupIframe.nativeElement.contentDocument||this.mashupIframe.nativeElement.contentWindow;J?.focus()},ae.prototype.activateQuery=function(J){return this.mashupEditorClient.activateQuery(J)},ae.prototype.addQuery=function(J,N){return this.mashupEditorClient.addQuery(J,N)},ae.prototype.cancelCurrentEvaluation=function(){return this.mashupEditorClient.dataPreview.cancelCurrentEvaluation()},ae.prototype.getEditingSessionMashup=function(){return this.mashupEditorClient.getEditingSessionMashup()},ae.prototype.getQueriesInfo=function(){return this.mashupEditorClient.getQueriesInfo()},ae.prototype.getQueryScript=function(J){return this.mashupEditorClient.getQueryScript(J)},ae.prototype.getDataSourceQueryScript=function(J,N){return this.mashupEditorClient.getDataSourceQueryScript(J,N)},ae.prototype.setUserSettings=function(J){return this.mashupEditorClient.setUserSettings(J)},ae.prototype.refreshActiveQueryResult=function(){return this.mashupEditorClient.refreshActiveQueryResult()},ae.prototype.getSelectedStepName=function(){return this.mashupEditorClient.getSelectedStepName()},ae.prototype.getActiveQueryName=function(){return this.mashupEditorClient.getActiveQueryName()},ae.prototype.getClientSettings=function(J){return{allowedOrigin:J,container:this.mashupIframe.nativeElement,url:this.createMashupEditorUrl(J),className:"mashup-editor-client-iframe"}},ae.prototype.createMashupEditorUrl=function(J){var N="".concat(J,"/MashupEditor");if(this.mashupEditorFeatureFlags&&this.mashupEditorFeatureFlags.size>0){var he=new c.LE;this.mashupEditorFeatureFlags.forEach(function(pe,ce){he=he.set(ce,pe)}),N=N+"?"+he.toString()}return N},ae.prototype.getEditorSettings=function(){var J={cancelButtonLabel:this.localizationService.get("Cancel_ButtonText"),closeButtonSettings:{showConfirmationPrompt:!1,actionOnClick:E.w9.Cancel},commitButtonLabel:this.localizationService.get("ModalDialog_Save"),enableAIInsights:!1,enableCalculatedEntities:!0,enableLinkedEntities:!0,enableMappingAsAStep:!1,returnQueryEditorResult:!1,showCancelButton:!0,useHostConnectionProvider:!1};return{addFocusTrapZone:!1,locale:this.localizationService.currentLanguageLocale,sessionId:this.telemetryService.sessionId,queryEditorSettings:J,showCloseButton:!0,showHeader:!1,themeOverride:this.theme||o.C8}},ae.prototype.endFlow=function(){return(0,r.mG)(this,void 0,void 0,function(){var J;return(0,r.Jh)(this,function(N){switch(N.label){case 0:if(!this.mashupEditorClient)return[2];N.label=1;case 1:return N.trys.push([1,3,,4]),[4,this.mashupEditorClient.endFlow()];case 2:return N.sent(),this.updateState(3),[3,4];case 3:return J=N.sent(),this.onError.emit(J),this.updateState(4),[3,4];case 4:return[2]}})})},ae.prototype.startFlow=function(){var J=this;!this.flow||!this.mashupEditorClient||this.mashupEditorClient.ready.then(function(){J.mashupEditorClient.startFlow(J.flow,J.editorOnCommit,J.editorOnCancel).then(function(){J.updateState(2),J.onReady.emit(),J.ref.detectChanges()},function(N){J.updateState(4)})},function(N){J.onError.emit(N),J.updateState(4),J.telemetryService.logEvent(d,{reason:N?N+"":void 0})})},ae.prototype.initMashupeditor=function(J){var N=this,he=this.getClientSettings(J),pe=this.getEditorSettings();this.mashupEditorClient=function(ae){return new E.Cq(ae)}(_.merge({clientSettings:he,editorSettings:pe,acquireToken:function(ge){return N.mashupService.getPQToken("".concat(ge,"/.default")).toPromise().catch(function(se){N.onError.emit(se),N.telemetryService.logEvent(l,{reason:se?se.status+"":void 0})})}},this.clientConfiguration)),this.startFlow()},ae.\u0275fac=function(N){return new(N||ae)(y.\u0275\u0275directiveInject(m.de),y.\u0275\u0275directiveInject(y.ChangeDetectorRef),y.\u0275\u0275directiveInject(O.M),y.\u0275\u0275directiveInject(I.o),y.\u0275\u0275directiveInject(k.y0),y.\u0275\u0275directiveInject(i.m1))},ae.\u0275cmp=y.\u0275\u0275defineComponent({type:ae,selectors:[["mashup-editor"]],viewQuery:function(N,he){var pe;(1&N&&y.\u0275\u0275viewQuery(H,5),2&N)&&(y.\u0275\u0275queryRefresh(pe=y.\u0275\u0275loadQuery())&&(he.mashupIframe=pe.first))},inputs:{clientConfiguration:"clientConfiguration",mashupEditorFeatureFlags:"mashupEditorFeatureFlags",flow:"flow",editorOnCommit:"editorOnCommit",editorOnCancel:"editorOnCancel",theme:"theme"},outputs:{onError:"onError",onReady:"onReady"},features:[y.\u0275\u0275ProvidersFeature([i.m1]),y.\u0275\u0275InheritDefinitionFeature],decls:2,vars:0,consts:[["id","mashupIframe","pbi-auto-focus","","data-testid","mashup-iframe"],["mashupIframe",""]],template:function(N,he){1&N&&y.\u0275\u0275element(0,"div",0,1)},styles:["[_nghost-%COMP%]{display:flex}#mashupIframe[_ngcontent-%COMP%]{background:var(--white-color, #FFF);display:flex;flex:1 1 auto;align-items:stretch;justify-content:center}#mashupIframe[_ngcontent-%COMP%]     .mashup-editor-client-iframe{border:none;width:100%;height:100%;display:block!important}"],changeDetection:0}),ae}(v.w)},12966:function(lt,Ge,t){"use strict";t.d(Ge,{C8:function(){return r},z6:function(){return o}});var r={palette:{themeDarker:"#b1920b",themeDark:"#bc9a0a",themeDarkAlt:"#c5a20b",themePrimary:"#f2c811",themeSecondary:"#f2c811",themeTertiary:"#f7de72",themeLight:"#f9e48a",themeLighter:"#fbefba",themeLighterAlt:"#fdf6d7"},semanticColors:{primaryButton:{text:{default:"#333333"}},checkableInput:{text:{checked:"#333333"}},grid:{cell:{linkText:{default:"#7D6807",focused:"#5C4C05"}}}}},o={palette:{themePrimary:"#117865",themeLighterAlt:"#f1faf8",themeLighter:"#c9e9e3",themeLight:"#9fd6cc",themeTertiary:"#54ae9d",themeSecondary:"#218875",themeDarkAlt:"#0f6c5b",themeDark:"#0d5b4d",themeDarker:"#094339",neutralLighterAlt:"#faf9f8",neutralLighter:"#f3f2f1",neutralLight:"#edebe9",neutralQuaternaryAlt:"#e1dfdd",neutralQuaternary:"#d0d0d0",neutralTertiaryAlt:"#c8c6c4",neutralTertiary:"#a19f9d",neutralSecondary:"#605e5c",neutralSecondaryAlt:"#8a8886",neutralPrimaryAlt:"#3b3a39",neutralPrimary:"#323130",neutralDark:"#201f1e",black:"#000000",white:"#ffffff"},semanticColors:{}}},71328:function(lt,Ge,t){"use strict";t.d(Ge,{G:function(){return H}});var r=t(32293),o=t(50423),P=t(77476),a=t(8748);function d(G,Z){if(1&G){var ie=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"mashup-editor",1),o.\u0275\u0275listener("onError",function(){o.\u0275\u0275restoreView(ie);var J=o.\u0275\u0275nextContext();return o.\u0275\u0275resetView(J.onError)}),o.\u0275\u0275elementEnd()}if(2&G){var ye=o.\u0275\u0275nextContext();o.\u0275\u0275property("clientConfiguration",ye.mashUpEditorInput.clientConfiguration)("editorOnCommit",ye.onCommit)("editorOnCancel",ye.onCancel)("flow",ye.mashUpEditorInput.flow)}}var p=function(){function G(Z,ie){var ye=this;this.dialogRef=Z,this.onCommit=function(ae,J){ye.mashUpEditorInput.editorOnCommit(ae,J),ye.dialogRef.close(J)},this.onCancel=function(ae){ye.mashUpEditorInput.editorOnCancel(ae),ye.dialogRef.close()},this.onError=function(ae){ye.mashUpEditorInput.onError(ae)},this.mashUpEditorInput=ie.input}return G.\u0275fac=function(ie){return new(ie||G)(o.\u0275\u0275directiveInject(r.so),o.\u0275\u0275directiveInject(r.WI))},G.\u0275cmp=o.\u0275\u0275defineComponent({type:G,selectors:[["mashup-editor-dialog"]],decls:1,vars:1,consts:[["pbi-auto-focus","","cdkFocusInitial","",3,"clientConfiguration","editorOnCommit","editorOnCancel","flow","onError",4,"ngIf"],["pbi-auto-focus","","cdkFocusInitial","",3,"clientConfiguration","editorOnCommit","editorOnCancel","flow","onError"]],template:function(ie,ye){1&ie&&o.\u0275\u0275template(0,d,1,4,"mashup-editor",0),2&ie&&o.\u0275\u0275property("ngIf",!!ye.mashUpEditorInput.clientConfiguration)},dependencies:[P.NgIf,a.o],styles:["[_nghost-%COMP%]     mashup-editor{display:flex;width:80vw;height:80vh}[_nghost-%COMP%]{display:flex}"]}),G}(),c=new o.InjectionToken("MashUpEditorErrorHandler"),y=new o.InjectionToken("MashUpEditorLauncher"),i=t(78590),C=t(33554),v=t(82762),k=t(48787),E=t(42195),s=t(58938),ne=function(G){return G.OnCommit="OnCommit",G.OnCancel="OnCancel",G}({}),X={provide:y,useClass:function(){function G(Z,ie){this.dialogService=Z,this.errorHandler=ie,this.lifeCycleEvent$=new C.t(1)}return G.prototype.editQueries=function(Z,ie){return this.launchMashUpEditor(ie.clientConfiguration,{kind:i.Mw.EditQuery,hostContext:ie.hostContext||Z.hostContext,mashupDefinition:{editingSessionMashup:Z,kind:i.Qo.TransientMashup}})},G.prototype.addQueries=function(Z,ie){var ye=this.buildFlowForAddQueries(Z,ie);return this.launchMashUpEditor(ie.clientConfiguration,ye)},G.prototype.manageDataSources=function(Z,ie){return this.launchMashUpEditor(ie.clientConfiguration,{kind:i.Mw.ManageConnections,hostContext:ie.hostContext,connectionOverrides:Z.connectionOverrides})},G.prototype.buildFlowForAddQueries=function(Z,ie){var ye={kind:i.Mw.AddQueries,hostContext:ie.hostContext||Z.hostContext};return function(G){return!_.has(G,"mashupDocument")||_.isNil(G.mashupDocument)}(Z)?(ye.mashupTemplateImportAllowed=!0,ye.mashupDefinition={editingSessionEmptyMashup:Z,kind:i.Qo.TransientEmptyMashup}):(ye.mashupTemplateImportAllowed=!1,ye.mashupDefinition={editingSessionMashup:Z,kind:i.Qo.TransientMashup}),ye},G.prototype.launchMashUpEditor=function(Z,ie){var ye=this;return(0,v.D)(this.dialogService.showTemplateDialog("MashUpEditorDialogComponentId",{title:"Mash Up Editor Dialog",input:{clientConfiguration:Z,flow:ie,editorOnCommit:function(N,he){return ye.onCommit(N,he)},editorOnCancel:function(N){return ye.onCancel(N)},onError:function(N){var he;return null===(he=ye.errorHandler)||void 0===he?void 0:he.handleError(N)}}})).pipe((0,k.q)(1),(0,E.zg)(function(J){return J.afterClosed()})).toPromise()},G.prototype.onCommit=function(Z,ie){this.lifeCycleEvent$.next({type:ne.OnCommit,payload:ie})},G.prototype.onCancel=function(Z){this.lifeCycleEvent$.next({type:ne.OnCancel,payload:void 0})},G.\u0275fac=function(ie){return new(ie||G)(o.\u0275\u0275inject(s.x),o.\u0275\u0275inject(c,8))},G.\u0275prov=o.\u0275\u0275defineInjectable({token:G,factory:G.\u0275fac}),G}()},m=t(95859),O=t(24495),H=function(){function G(){}return G.\u0275fac=function(ie){return new(ie||G)},G.\u0275mod=o.\u0275\u0275defineNgModule({type:G}),G.\u0275inj=o.\u0275\u0275defineInjector({providers:[X],imports:[P.CommonModule,m.v,O.z.withManifest([{componentIdentifier:"MashUpEditorDialogComponentId",componentType:p}])]}),G}()},85928:function(lt,Ge,t){"use strict";t.d(Ge,{M:function(){return m}});var r=t(36444),o=t(33567),P=t(85732),a=(0,P.ZF)("urlConfiguration"),d=(0,P.P1)(a,function(O){return O.powerQueryHostUrl}),p=t(37263),l=t(59694),c=t(11547),y=t(82762),i=t(35510),C=t(42195),v=t(14172),k=t(17653),E=t(88255),s=t(50423),ne=t(62113),te=t(73875),X=window,m=function(){function O(I,H,G,Z){var ie=this;this.store=I,this.accessTokenProviderService=H,this.httpService=G,this.inTeams=Z,this.getAADToken$=function(ye){return(0,c.of)(null).pipe((0,C.zg)(function(){if(X.clientAuthEnabled)return(0,y.D)(ie.accessTokenProviderService.acquireToken("MashupService",[ye],!1)).pipe((0,v.U)(function(he){return he.token}));if(ie.inTeams){var ae=ye.substring(0,ye.lastIndexOf("/"));return r.authentication.initialize(),(0,y.D)(r.authentication.getAuthToken({resources:[ae],silent:!0}))}var J=(0,l.W)("{0}/msal",X.baseUrl||window.location.origin),N=ie.httpService.powerbiRequestOptions();return N.params={scopes:ye},ie.httpService.get(J,N).pipe((0,v.U)(function(he){return he.data.AccessToken}))}),(0,k.b)(function(ae){var N=1e3*(0,o.oG)(ae).exp;ie.AADTokenCache$.next(new Map(ie.AADTokenCache$.getValue()).set(ye,{token:ae,expiration:N}))}))},this.AADTokenCache$=new i.X(new Map)}return O.prototype.getPQEndpoint=function(){return this.store.select(d).pipe((0,v.U)(function(I){return(0,l.g)(I)?null:I.replace(/\/$/,"")}))},O.prototype.getPQToken=function(I){var H=this;return this.AADTokenCache$.pipe((0,E.P)(),(0,C.zg)(function(G){return!G.has(I)||Date.now()+3e5>G.get(I).expiration?H.getAADToken$(I):(0,c.of)(G.get(I).token)}))},O.\u0275fac=function(H){return new(H||O)(s.\u0275\u0275inject(P.yh),s.\u0275\u0275inject(ne.Q),s.\u0275\u0275inject(te.O),s.\u0275\u0275inject(p.$,8))},O.\u0275prov=s.\u0275\u0275defineInjectable({token:O,factory:O.\u0275fac,providedIn:"root"}),O}()},21e3:function(lt,Ge,t){"use strict";t.d(Ge,{H:function(){return y}});var r=t(82762),o=t(33554),P=t(9936),a=t(14172),d=t(48787),p=t(50423),l=t(47754),c=t(15910),y=function(){function i(C,v){this.profileImageService=C,this.userHttpService=v,this.usersCache={}}return i.prototype.getUserPhoto=function(C){return(0,r.D)(this.profileImageService.getOtherUserPhoto(C))},i.prototype.getUserDetails=function(C){var v=this;C=_.filter(C,function(m){return!!m});var k=[],E=[];if(_.isEmpty(C))return(0,r.D)([]);for(var s=0,ne=C;s<ne.length;s++){var X=ne[s].toLowerCase();this.usersCache[X]||(this.usersCache[X]=new o.t(1),E.push(X)),k.push(this.usersCache[X])}return _.isEmpty(E)||this.userHttpService.getUserDetails(E).pipe((0,d.q)(1)).subscribe(function(m){var O={};if(_.some(m?.data))for(var I=0,H=m?.data;I<H.length;I++){var ie=(G=H[I]).userPrincipalName,ye=G.objectId;v.upsert(G.emailAddress,G,O),v.upsert(ie,G,O),v.upsert(ye,G,O)}for(var J=0,N=_.filter(E,function(he){return!O[he]});J<N.length;J++){var G;v.usersCache[G=N[J]].next(void 0),v.usersCache[G].complete()}},function(){for(var m,O,I=0,H=E;I<H.length;I++){var G=H[I];null===(m=v.usersCache[G])||void 0===m||m.next(void 0),null===(O=v.usersCache[G])||void 0===O||O.complete(),delete v.usersCache[G]}}),(0,P.D)(k).pipe((0,a.U)(function(m){return _.filter(m,function(O){return!!O})}))},i.prototype.findUsers=function(C,v){return this.userHttpService.findUsers(C,1,v,!0,!0).pipe((0,a.U)(function(k){return k?.data}))},i.prototype.upsert=function(C,v,k){if(C){var E=C.toLowerCase();this.usersCache[E]||(this.usersCache[E]=new o.t(1)),this.usersCache[E].next(v),this.usersCache[E].complete(),k[E]=!0}},i.\u0275fac=function(v){return new(v||i)(p.\u0275\u0275inject(l.L),p.\u0275\u0275inject(c.W))},i.\u0275prov=p.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"}),i}()},88119:function(lt,Ge,t){"use strict";t.d(Ge,{N:function(){return i}});var r=t(21e3),o=t(77476),P=t(10723),a=t(95859),d=t(50423),p=function(){function C(){}return C.forRoot=function(){return{ngModule:C,providers:[]}},C.\u0275fac=function(k){return new(k||C)},C.\u0275mod=d.\u0275\u0275defineNgModule({type:C}),C.\u0275inj=d.\u0275\u0275defineInjector({}),C}(),l=t(52950),c=t(88717),y=t(76701),i=function(){function C(){}return C.\u0275fac=function(k){return new(k||C)},C.\u0275mod=d.\u0275\u0275defineNgModule({type:C}),C.\u0275inj=d.\u0275\u0275defineInjector({providers:[{provide:P.K,useClass:r.H}],imports:[o.CommonModule,a.v,p,l.g,c.R,y.z]}),C}()},5432:function(lt,Ge,t){"use strict";t.d(Ge,{d:function(){return N}});var r=t(81337),o=t(50423),P=t(3613),a=function(){function he(pe){this.cultureService=pe,this.currencyRecentFormats=[]}return he.prototype.getCurrencyGeneralFormat=function(){return this.currencyGeneralFormat||(this.currencyGeneralFormat={culture:null,displayLabel:this.localizationService.get("Format_Label_Currency_General"),symbol:"$",positivePattern:0,negativePattern:0,formatType:"CurrencyGeneral"}),this.currencyGeneralFormat},he.prototype.getCurrencyCommonFormats=function(){if(!this.currencyCommonFormats){var pe=_.filter(this.cultureService.getAllCurrencySymbolCustomFormatItemsInfo(),function(ce){return"en-US"===ce.culture||"en-GB"===ce.culture||"fr-CH"===ce.culture||null===ce.culture});this.currencyCommonFormats=_.flatten([this.getCurrencyGeneralFormat(),pe.find(function(ce){return"en-US"===ce.culture}),pe.find(function(ce){return"en-GB"===ce.culture}),pe.filter(function(ce){return!ce.culture&&"\u20ac"===ce.symbol}),pe.find(function(ce){return!ce.culture&&"\xa5"===ce.symbol}),pe.find(function(ce){return"fr-CH"===ce.culture})])}return this.currencyCommonFormats},he.prototype.getCurrencyAllFormats=function(){if(!this.currencyAllFormats){var pe=this.cultureService.getAllCurrencySymbolCustomFormatItemsInfo();this.currencyAllFormats=(0,r.ev)([this.getCurrencyGeneralFormat()],pe,!0)}return this.currencyAllFormats},he.prototype.getCurrencyAllCultureFormats=function(){return this.cultureService.getAllCurrencySymbolCustomFormatItemsInfo()},he.prototype.getCurrencyRecentFormats=function(){return this.currencyRecentFormats},he.\u0275fac=function(ce){return new(ce||he)(o.\u0275\u0275inject(P.h))},he.\u0275prov=o.\u0275\u0275defineInjectable({token:he,factory:he.\u0275fac,providedIn:"root"}),he}(),d=t(61353),p=t(98776),l=t(18967),c=t(62458),y=t(64560),i=t(65181),C=t(77476),v=t(59968),k=t(77274),E=t(33846),s=t(7970),ne=t(80357),te=t(86663),X=t(69437),m=t(36858),O=t(85102);function I(he,pe){if(1&he&&(o.\u0275\u0275elementStart(0,"mat-option",7),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&he){var ce=pe.$implicit;o.\u0275\u0275property("value",ce.value)("pbiTooltip",ce.label),o.\u0275\u0275attribute("aria-label",ce.label),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",ce.label," ")}}var H=function(pe){return{btnDisabled:pe}},G=function(pe){return{isToggled:pe}};function Z(he,pe){if(1&he){var ce=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"div",8)(2,"div")(3,"button",9),o.\u0275\u0275listener("click",function(){o.\u0275\u0275restoreView(ce);var De=o.\u0275\u0275nextContext();return o.\u0275\u0275resetView(De.onCurrencyClicked())}),o.\u0275\u0275pipe(4,"localize"),o.\u0275\u0275pipe(5,"localize"),o.\u0275\u0275element(6,"pbi-office-icon",10),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(7,"button",11),o.\u0275\u0275listener("pbiMenuButtonClick",function(De){o.\u0275\u0275restoreView(ce);var fe=o.\u0275\u0275nextContext();return o.\u0275\u0275resetView(fe.onCurrencyItemClicked(De))}),o.\u0275\u0275pipe(8,"localize"),o.\u0275\u0275pipe(9,"localize"),o.\u0275\u0275element(10,"pbi-icon",12),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementStart(11,"button",13),o.\u0275\u0275listener("click",function(){o.\u0275\u0275restoreView(ce);var De=o.\u0275\u0275nextContext();return o.\u0275\u0275resetView(De.onChangePercentageToggle())}),o.\u0275\u0275pipe(12,"localize"),o.\u0275\u0275pipe(13,"localize"),o.\u0275\u0275element(14,"pbi-office-icon",14),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(15,"button",13),o.\u0275\u0275listener("click",function(){o.\u0275\u0275restoreView(ce);var De=o.\u0275\u0275nextContext();return o.\u0275\u0275resetView(De.onChangeThousandSeparatorToggle())}),o.\u0275\u0275pipe(16,"localize"),o.\u0275\u0275pipe(17,"localize"),o.\u0275\u0275element(18,"pbi-office-icon",15),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementStart(19,"div",16),o.\u0275\u0275pipe(20,"localize"),o.\u0275\u0275elementStart(21,"span",17),o.\u0275\u0275element(22,"pbi-office-icon",18),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(23,"num-up-down",19),o.\u0275\u0275listener("modelValueChange",function(De){o.\u0275\u0275restoreView(ce);var fe=o.\u0275\u0275nextContext();return o.\u0275\u0275resetView(fe.onDecimalPlacesChanged(De))}),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementContainerEnd()}if(2&he){var ge=o.\u0275\u0275nextContext();o.\u0275\u0275advance(3),o.\u0275\u0275property("disabled",!ge.isNumericFormatEnabled())("pbiTooltip",o.\u0275\u0275pipeBind1(4,22,"Value_Formatting_Tooltip_Currency_Format")),o.\u0275\u0275attribute("aria-label",o.\u0275\u0275pipeBind1(5,24,"Value_Formatting_ARIA_Label_Currency_Format")),o.\u0275\u0275advance(4),o.\u0275\u0275property("ngClass",o.\u0275\u0275pureFunction1(40,H,!ge.isNumericFormatEnabled()))("pbiMenu",ge.currencyMenu)("pbiTooltip",o.\u0275\u0275pipeBind1(8,26,"Value_Formatting_Tooltip_Currency_Format"))("disabled",!ge.isNumericFormatEnabled()),o.\u0275\u0275attribute("aria-label",o.\u0275\u0275pipeBind1(9,28,"Value_Formatting_ARIA_Label_Currency_Format")),o.\u0275\u0275advance(4),o.\u0275\u0275property("ngClass",o.\u0275\u0275pureFunction1(42,G,ge.isPercentFormatterToggled()))("disabled",!ge.isNumericFormatEnabled())("pbiTooltip",o.\u0275\u0275pipeBind1(12,30,"Value_Formatting_Tooltip_Percentage_Format")),o.\u0275\u0275attribute("aria-label",o.\u0275\u0275pipeBind1(13,32,"Value_Formatting_ARIA_Label_Percentage_Format")),o.\u0275\u0275advance(4),o.\u0275\u0275property("ngClass",o.\u0275\u0275pureFunction1(44,G,ge.isThousandSeparatorToggled()))("disabled",!ge.isNumericFormatEnabled(!0))("pbiTooltip",o.\u0275\u0275pipeBind1(16,34,"Ribbon_Tooltip_DataFormatDecimalPlaces")),o.\u0275\u0275attribute("aria-label",o.\u0275\u0275pipeBind1(17,36,"Value_Formatting_ARIA_Label_Thousands_Separator_Format")),o.\u0275\u0275advance(4),o.\u0275\u0275property("pbiTooltip",o.\u0275\u0275pipeBind1(20,38,"Ribbon_Tooltip_DataFormatDecimalPlaces")),o.\u0275\u0275advance(3),o.\u0275\u0275property("disabled",(null==ge.formatInformation?null:ge.formatInformation.format)===ge.FormatNumberWhole),o.\u0275\u0275advance(1),o.\u0275\u0275property("options",ge.options)("useModernStyles",!0)("modelValue",ge.formatInformation&&ge.formatInformation.accuracy)("isDisabled",!ge.isNumericFormatEnabled()||(null==ge.formatInformation?null:ge.formatInformation.format)===ge.FormatNumberWhole)}}function ie(he,pe){if(1&he&&(o.\u0275\u0275elementStart(0,"mat-option",7),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&he){var ce=pe.index,ge=o.\u0275\u0275nextContext(3);o.\u0275\u0275property("value",ce)("pbiTooltip",ge.categoryListNames[ce]),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",ge.categoryListNames[ce]," ")}}function ye(he,pe){if(1&he){var ce=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"mat-select",21),o.\u0275\u0275listener("valueChange",function(De){o.\u0275\u0275restoreView(ce);var fe=o.\u0275\u0275nextContext(2);return o.\u0275\u0275resetView(fe.selectedCategoryList=De)}),o.\u0275\u0275pipe(2,"localize"),o.\u0275\u0275template(3,ie,2,3,"mat-option",4),o.\u0275\u0275elementStart(4,"div",22)(5,"button",23),o.\u0275\u0275listener("click",function(){o.\u0275\u0275restoreView(ce);var De=o.\u0275\u0275nextContext(2);return o.\u0275\u0275resetView(De.launchCategoryListsEditPane(!1))}),o.\u0275\u0275pipe(6,"localize"),o.\u0275\u0275pipe(7,"localize"),o.\u0275\u0275element(8,"span",24),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(9,"button",25),o.\u0275\u0275listener("click",function(){o.\u0275\u0275restoreView(ce);var De=o.\u0275\u0275nextContext(2);return o.\u0275\u0275resetView(De.launchCategoryListsEditPane(!0))}),o.\u0275\u0275pipe(10,"localize"),o.\u0275\u0275pipe(11,"localize"),o.\u0275\u0275element(12,"span",26),o.\u0275\u0275elementEnd()()(),o.\u0275\u0275elementContainerEnd()}if(2&he){var ge=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("value",ge.selectedCategoryList),o.\u0275\u0275attribute("aria-label",o.\u0275\u0275pipeBind1(2,7,"Value_Formatting_ARIA_Label_SelectCategoryListDropdown")),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngForOf",ge.goalValueCategoryLists),o.\u0275\u0275advance(2),o.\u0275\u0275property("pbiTooltip",o.\u0275\u0275pipeBind1(6,9,"Manage_Lists")),o.\u0275\u0275attribute("aria-label",o.\u0275\u0275pipeBind1(7,11,"Manage_Lists")),o.\u0275\u0275advance(4),o.\u0275\u0275property("pbiTooltip",o.\u0275\u0275pipeBind1(10,13,"Create_A_List")),o.\u0275\u0275attribute("aria-label",o.\u0275\u0275pipeBind1(11,15,"Create_A_List"))}}function ae(he,pe){if(1&he&&o.\u0275\u0275template(0,ye,13,17,"ng-container",20),2&he){var ce=o.\u0275\u0275nextContext();o.\u0275\u0275property("ngIf",(null==ce.goalValueCategoryLists?null:ce.goalValueCategoryLists.length)>0)}}var J=[{value:"General",label:"Format_Label_General"},{value:"CurrencyCustom",label:"Format_Label_Currency"},{value:"DateTimeGeneralPattern",label:"Format_Label_DateTime"},{value:"NumberDecimal",label:"DataType_Label_Number"},{value:"NumberWhole",label:"DataType_Label_WholeNumber"},{value:"Percentage",label:"Format_Label_Percentage"},{value:"Scientific",label:"Format_Label_Scientific"},{value:"Text",label:"Text"},{value:"Boolean",label:"DataType_Label_Boolean"},{value:"Binary",label:"DataType_Binary"},{value:"Custom",label:"DataType_Label_Categorical"}],N=function(){function he(pe,ce,ge,se){this.cultureService=pe,this.currencyFormatService=ce,this.dateTimeFormatService=ge,this.localizationService=se,this.formatStringChange=new o.EventEmitter,this.onSelectedCategoryListChange=new o.EventEmitter,this.availableFormats=[],this.options={unitSymbol:"",minValue:0,maxValue:15},this.FormatNumberWhole="NumberWhole",this.formatUtils=new p.c(this.cultureService.getFormatInfo()),this.allCurrenciesOptions=pe.getAllCurrencySymbolCustomFormatItemsInfo(),this.commonCurrenciesOptions=pe.getAllCommonCurrencySymbolCustomFormatItemsInfo(),this.availableCurrencyFormats=this.generateCurrencyFormatInfoMapping(this.allCurrenciesOptions),this.currencyMenu=this.currencyFormatInfoToPbiMenuAdaptor(this.commonCurrenciesOptions,this.allCurrenciesOptions)}return Object.defineProperty(he.prototype,"formatString",{set:function(ce){this.formatInformation=this.cultureService.tryParse(ce,this.dataType),ce===he.CategoricalFormatString&&(this.formatInformation.format="Custom"),this.updateCompatibleFormats()},enumerable:!1,configurable:!0}),Object.defineProperty(he.prototype,"dataType",{get:function(){return this._dataType},set:function(ce){this._dataType=ce,this.formatInformation&&(this.isCategorical?this.formatInformation.format="Custom":this.formatInformation=this.cultureService.tryParse(this.formatInformation.formatString,ce)),this.updateCompatibleFormats()},enumerable:!1,configurable:!0}),Object.defineProperty(he.prototype,"goalValueCategoryLists",{get:function(){return this._goalValueCategoryLists},set:function(ce){var ge=this;this.supportCategoricalValues&&(this._goalValueCategoryLists=ce,this.categoryListNames=ce.map(function(se){return ge.getCategoryListName(se)}))},enumerable:!1,configurable:!0}),he.prototype.ngOnInit=function(){this.updateCompatibleFormats()},he.prototype.isNumericFormatEnabled=function(pe){void 0===pe&&(pe=!1);var ce=this.dataType,ge=this.formatInformation&&this.formatInformation.format;return(ge&&pe?this.isValidNumericFormat(ge):"Custom"!==ge)&&(2===ce||3===ce||4===ce||13===ce)},he.prototype.isThousandSeparatorToggled=function(){return this.formatInformation&&this.formatInformation.thousandSeparator},he.prototype.isPercentFormatterToggled=function(){return this.formatInformation&&"Percentage"===this.formatInformation.format},he.prototype.onChangePercentageToggle=function(){var pe;this.formatInformation=this.formatInformation&&"Percentage"===this.formatInformation.format?void 0:this.formatUtils.changeFormat(this.dataType,this.formatInformation,"Percentage"),this.formatStringChange.emit(null===(pe=this.formatInformation)||void 0===pe?void 0:pe.formatString)},he.prototype.onChangeThousandSeparatorToggle=function(){var pe;this.formatInformation=this.formatUtils.toggleThousandsSeparator(this.dataType,this.formatInformation),this.formatStringChange.emit(null===(pe=this.formatInformation)||void 0===pe?void 0:pe.formatString)},he.prototype.onCurrencyClicked=function(){var pe;this.formatInformation=this.formatUtils.changeFormat(this.dataType,this.formatInformation,"CurrencyCustom"),this.formatStringChange.emit(null===(pe=this.formatInformation)||void 0===pe?void 0:pe.formatString)},he.prototype.onCurrencyItemClicked=function(pe){this.availableCurrencyFormats=this.generateCurrencyFormatInfoMapping(this.allCurrenciesOptions);var ge=this.availableCurrencyFormats.get(pe.text);this.formatInformation=this.formatUtils.changeFormat(this.dataType,this.formatInformation,"CurrencyCustom"),this.formatInformation=this.formatUtils.setCurrencyFormat(this.dataType,this.formatInformation,this.formatInformation.format,ge.culture,ge.symbol,ge.positivePattern,ge.negativePattern),this.formatStringChange.emit(this.formatInformation.formatString)},he.prototype.onDecimalPlacesChanged=function(pe){this.formatInformation=this.formatUtils.setAccuracy(this.dataType,this.formatInformation,pe),this.formatStringChange.emit(this.formatInformation.formatString)},Object.defineProperty(he.prototype,"selectedFormat",{get:function(){if(!this.formatInformation)return"General";var ce=this.formatInformation.format;switch(this.formatInformation.format){case"CurrencyCustom":ce="CurrencyCustom";break;case"DateTimeCustom":case"DateTimeGeneralPattern":this.formatInformation.dateTimeCustomFormat&&(ce=this.formatInformation.dateTimeCustomFormat.formatString)}return ce},set:function(ce){var ge,se;switch(ce){case"General":this.formatInformation=void 0;break;case"NumberDecimal":case"NumberWhole":case"Percentage":case"CurrencyCustom":case"Scientific":case"Binary":case"Boolean":case"Text":this.formatInformation=this.formatUtils.changeFormat(this.dataType,this.formatInformation,ce);break;case"Custom":this.formatInformation={format:ce,formatString:he.CategoricalFormatString,thousandSeparator:void 0,currencyFormat:void 0,dateTimeCustomFormat:void 0},_.isEmpty(this.categoryListNames)?(this.selectedCategoryList=-1,this.formatStringChange.emit(null===(ge=this.formatInformation)||void 0===ge?void 0:ge.formatString),this.launchCategoryListsEditPane(!0)):this.selectedCategoryList=0;break;default:var De=this.dateTimeFormatService.getFormat(ce);this.formatInformation=this.formatUtils.setDateTimeFormat(this.dataType,this.formatInformation,De.formatType,De.pattern,De.formatString)}this.formatStringChange.emit(null===(se=this.formatInformation)||void 0===se?void 0:se.formatString)},enumerable:!1,configurable:!0}),Object.defineProperty(he.prototype,"selectedCategoryList",{get:function(){return this.selectedCategoryListIndex},set:function(ce){this.selectedCategoryListIndex=ce,this.onSelectedCategoryListChange.emit(ce)},enumerable:!1,configurable:!0}),Object.defineProperty(he.prototype,"isCategorical",{get:function(){var ce;return(null===(ce=this.formatInformation)||void 0===ce?void 0:ce.formatString)===he.CategoricalFormatString},enumerable:!1,configurable:!0}),he.prototype.currencyFormatInfoToPbiMenuAdaptor=function(pe,ce){var ge=this.buildCommonCurrencyPbiMenu(pe);c.fF.assertValue(ce,"ICurrencyFormatInfo[] should not be null");var se={type:y.iB.Header,text:this.localizationService.get("All_Currency_Symbols"),tooltip:this.localizationService.get("All_Currency_Symbols")};return ge.items.push({type:y.iB.Divider}),ge.items.push(se),this.forgeMenuOptions(ge,ce)},he.prototype.buildCommonCurrencyPbiMenu=function(pe){var ce={items:[]};c.fF.assertValue(pe,"ICurrencyFormatInfo[] should not be null");var ge={type:y.iB.Header,text:this.localizationService.get("Common_Currency_Symbols"),tooltip:this.localizationService.get("Common_Currency_Symbols")};return ce.items.push(ge),this.forgeMenuOptions(ce,pe)},he.prototype.forgeMenuOptions=function(pe,ce){for(var ge=pe,se=0;se<ce.length;se++)ge.items.push({id:se,type:y.iB.Button,text:ce[se].displayLabel,tooltip:ce[se].displayLabel,disabled:!1});return ge},he.prototype.generateCurrencyFormatInfoMapping=function(pe){var ce=new Map;c.fF.assertValue(pe,"ICurrencyFormatInfo[] should not be null");for(var ge=0,se=pe;ge<se.length;ge++){var De=se[ge];ce.set(De.displayLabel,De)}return ce},he.prototype.isValidNumericFormat=function(pe){return"General"===pe||"CurrencyGeneral"===pe||"CurrencyCustom"===pe||"Scientific"===pe||"Percentage"===pe||"NumberDecimal"===pe||"NumberWhole"===pe||"Custom"===pe},he.prototype.getCompatibleFormats=function(pe){switch(pe){case 4:case 3:case 2:var ce=["General","NumberWhole","NumberDecimal","CurrencyCustom","Percentage","Scientific"];return this.supportCategoricalValues&&ce.push("Custom"),ce;case 6:case 7:case 9:return[];case 11:return["Binary"];case 5:return["Boolean"];case 1:case 13:return["Text"];default:return["General"]}},he.prototype.updateCompatibleFormats=function(){var pe=this;switch(this.dataType){case 6:this.availableFormats=_.map(this.dateTimeFormatService.getDateFormats(),function(ge){return{value:ge.formatString,label:ge.displayLabel}});break;case 9:this.availableFormats=_.map(this.dateTimeFormatService.getTimeFormats(),function(ge){return{value:ge.formatString,label:ge.displayLabel}});break;case 7:this.availableFormats=_.map(this.dateTimeFormatService.getCommonFormats(),function(ge){return{value:ge.formatString,label:ge.displayLabel}});break;default:var ce=this.getCompatibleFormats(this.dataType);this.availableFormats=_.filter(_.map(J,function(ge){return{value:ge.value,label:pe.localizationService.get(ge.label)}}),function(ge){return _.some(ce,function(se){return se===ge.value})})}},he.prototype.getCategoryListName=function(pe){if(_.isEmpty(pe.name)){var ce=_.map(pe.categories,function(ge){return ge.displayName});return _.join(ce,", ")}return pe.name},he.CategoricalFormatString="CategoricalFormatString",he.\u0275fac=function(ce){return new(ce||he)(o.\u0275\u0275directiveInject(P.h),o.\u0275\u0275directiveInject(a),o.\u0275\u0275directiveInject(d.u),o.\u0275\u0275directiveInject(i.o))},he.\u0275cmp=o.\u0275\u0275defineComponent({type:he,selectors:[["value-formatting"]],inputs:{formatString:"formatString",dataType:"dataType",supportCategoricalValues:"supportCategoricalValues",goalValueCategoryLists:"goalValueCategoryLists",selectedCategoryListIndex:"selectedCategoryListIndex",launchCategoryListsEditPane:"launchCategoryListsEditPane"},outputs:{formatStringChange:"formatStringChange",onSelectedCategoryListChange:"onSelectedCategoryListChange"},features:[o.\u0275\u0275ProvidersFeature([{provide:a,useClass:a},{provide:l.c,useClass:P.h},{provide:d.u,useClass:d.u}])],decls:10,vars:11,consts:[[1,"valueFormatterToolbarContainer"],[1,"valueFormatterDropdownGroup",3,"pbiTooltip"],["name","PBIDataFormat_16",1,"icon-format"],["pbiMatSelect","","panelClass","pbi-modern-select-panel","disableOptionCentering","","role","combobox",1,"pbi-modern-select","valueFormatDropdown",3,"value","disabled","valueChange"],[3,"value","pbiTooltip",4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],["categoryListsSelector",""],[3,"value","pbiTooltip"],[1,"valueFormatterToggleButtonsGroup"],[1,"btn","toggleBtn","icon","splitButtonText",3,"disabled","pbiTooltip","click"],["name","CurrencyFormat_16",1,"icon-currency"],[1,"btn","toggleBtn","icon","splitButton",3,"ngClass","pbiMenu","pbiTooltip","disabled","pbiMenuButtonClick"],["name","chevrondownsmall","size","mini",1,"chevrondown"],[1,"btn","toggleBtn","icon","focusOutline",3,"ngClass","disabled","pbiTooltip","click"],["name","Percentage_16"],["name","CommaFormat_16"],[1,"valueFormatterNumUpDownGroup",3,"pbiTooltip"],[1,"icon"],["name","DecreaseDecimals_16",1,"icon-decreaseDecimals",3,"disabled"],["attr.aria-label","'Value_Formatting_ARIA_Label_Decimal_Place_Format' | localize","placeholderText","Auto",1,"numUpDown",3,"options","useModernStyles","modelValue","isDisabled","modelValueChange"],[4,"ngIf"],["pbiMatSelect","","panelClass","pbi-modern-select-panel","disableOptionCentering","","role","combobox",1,"pbi-modern-select","select-category-list-dropdown",3,"value","valueChange"],[1,"edit-category-lists-in-dropdown"],[1,"btn","edit-category-lists-button",3,"pbiTooltip","click"],["localize","Manage_Lists"],[1,"btn","create-category-list-button",3,"pbiTooltip","click"],["localize","Create_A_List"]],template:function(ce,ge){if(1&ce&&(o.\u0275\u0275elementStart(0,"div",0)(1,"div",1),o.\u0275\u0275pipe(2,"localize"),o.\u0275\u0275element(3,"pbi-office-icon",2),o.\u0275\u0275elementStart(4,"mat-select",3),o.\u0275\u0275listener("valueChange",function(fe){return ge.selectedFormat=fe}),o.\u0275\u0275pipe(5,"localize"),o.\u0275\u0275template(6,I,2,4,"mat-option",4),o.\u0275\u0275elementEnd()(),o.\u0275\u0275template(7,Z,24,46,"ng-container",5),o.\u0275\u0275template(8,ae,1,1,"ng-template",null,6,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementEnd()),2&ce){var se=o.\u0275\u0275reference(9);o.\u0275\u0275advance(1),o.\u0275\u0275property("pbiTooltip",o.\u0275\u0275pipeBind1(2,7,"Value_Formatting_Tooltip_ComboBox")),o.\u0275\u0275advance(3),o.\u0275\u0275property("value",ge.selectedFormat)("disabled",ge.availableFormats.length<=1),o.\u0275\u0275attribute("aria-label",o.\u0275\u0275pipeBind1(5,9,"Value_Formatting_ARIA_Label_ComboBox")),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngForOf",ge.availableFormats),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!ge.isCategorical)("ngIfElse",se)}},dependencies:[C.NgClass,C.NgForOf,C.NgIf,v.X,k.x8,E.CK,s.x4,ne.l8,te._,X.m,m.V,O.F],styles:['.focusOutline[_ngcontent-%COMP%]{outline:1px solid var(--fluent-theme-neutral-primary-hover-color, #232322)}.valueFormatterToolbarContainer[_ngcontent-%COMP%]{background-color:inherit;border-top:inherit;display:flex;flex-direction:row;padding:8px 10px}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterDropdownGroup[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:row;padding-right:13px}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterDropdownGroup[_ngcontent-%COMP%]   .valueFormatDropdown[_ngcontent-%COMP%]{background-color:var(--fluent-theme-white-color, #FFF);border:1px solid var(--fluent-theme-neutral-tertiary-alt-color, #C8C6C4);display:table;height:24px;width:150px}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterDropdownGroup[_ngcontent-%COMP%]   .valueFormatDropdown[_ngcontent-%COMP%]     .mat-select-arrow{color:var(--fluent-theme-neutral-primary-color, #323130)}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterDropdownGroup[_ngcontent-%COMP%]   .valueFormatDropdown[_ngcontent-%COMP%]:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color);outline:1px solid var(--fluent-theme-neutral-primary-hover-color, #232322)}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterDropdownGroup[_ngcontent-%COMP%]   .valueFormatOptions[_ngcontent-%COMP%]{height:30px}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterDropdownGroup[_ngcontent-%COMP%]     .mat-select-disabled .mat-select-value{color:var(--fluent-theme-black-color, #000)!important;opacity:.38}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .select-category-list-dropdown[_ngcontent-%COMP%]{width:150px}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .edit-category-lists[_ngcontent-%COMP%]:hover, .valueFormatterToolbarContainer[_ngcontent-%COMP%]   .edit-category-lists[_ngcontent-%COMP%]:active{background-color:var(--fluent-theme-neutral-quarter-alt-color, #E1DFDD)}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterToggleButtonsGroup[_ngcontent-%COMP%]{display:flex;align-items:center}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterToggleButtonsGroup[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{box-shadow:unset;display:inline-block;height:24px;margin:0;outline:unset;padding:0;vertical-align:middle;width:24px}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterToggleButtonsGroup[_ngcontent-%COMP%]   .icon-arrowDown[_ngcontent-%COMP%]{font-size:xx-small}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterToggleButtonsGroup[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterToggleButtonsGroup[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:inherit}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterToggleButtonsGroup[_ngcontent-%COMP%]   .isToggled[_ngcontent-%COMP%]{background-color:var(--fluent-theme-primary-color, #F2C811)!important}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterToggleButtonsGroup[_ngcontent-%COMP%]   .isToggled[_ngcontent-%COMP%]   .pbi-office-icon[_ngcontent-%COMP%]{fill:var(--button-primary-content-color)}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterToggleButtonsGroup[_ngcontent-%COMP%]   .isToggled[_ngcontent-%COMP%]   .pbi-office-icon[_ngcontent-%COMP%]     svg>path.OfficeIconColors_m22{fill:var(--button-primary-content-color)}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterToggleButtonsGroup[_ngcontent-%COMP%]   .splitButton[_ngcontent-%COMP%]{text-align:center;vertical-align:bottom;width:15px}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterToggleButtonsGroup[_ngcontent-%COMP%]   .splitButton[_ngcontent-%COMP%]:focus:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color);outline:1px solid var(--fluent-theme-neutral-primary-hover-color, #232322)}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterToggleButtonsGroup[_ngcontent-%COMP%]   .splitButton[_ngcontent-%COMP%]   .chevrondown[_ngcontent-%COMP%]{display:flex;align-items:center}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterToggleButtonsGroup[_ngcontent-%COMP%]   .btnDisabled[_ngcontent-%COMP%]{cursor:default}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterToggleButtonsGroup[_ngcontent-%COMP%]   .splitButtonText[_ngcontent-%COMP%]{width:16px}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterToggleButtonsGroup[_ngcontent-%COMP%]   .splitButtonText[_ngcontent-%COMP%]:focus:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color);outline:1px solid var(--fluent-theme-neutral-primary-hover-color, #232322)}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterToggleButtonsGroup[_ngcontent-%COMP%]   .focusOutline[_ngcontent-%COMP%]:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color);outline:1px solid var(--fluent-theme-neutral-primary-hover-color, #232322)}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterNumUpDownGroup[_ngcontent-%COMP%]{display:flex;align-items:center}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterNumUpDownGroup[_ngcontent-%COMP%]   .numUpDown[_ngcontent-%COMP%]{margin-left:10px;width:82px}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterNumUpDownGroup[_ngcontent-%COMP%]   .numUpDown[_ngcontent-%COMP%]     .mat-form-field{width:100%}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterNumUpDownGroup[_ngcontent-%COMP%]   .numUpDown[_ngcontent-%COMP%]     .numUpDownWrapper.modern-styles .unit-numupdown{border:1px solid var(--fluent-theme-neutral-tertiary-alt-color, #C8C6C4);background:var(--fluent-theme-white-color, #FFF)}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterNumUpDownGroup[_ngcontent-%COMP%]   .numUpDown[_ngcontent-%COMP%]     .numUpDownWrapper.modern-styles .unit-numupdown .navigationButtons .buttonBox{color:var(--fluent-theme-neutral-primary-color, #323130)}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterNumUpDownGroup[_ngcontent-%COMP%]   .numUpDown[_ngcontent-%COMP%]     .numUpDownWrapper.modern-styles .unit-numupdown .navigationButtons .buttonBox:hover{background-color:transparent}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterNumUpDownGroup[_ngcontent-%COMP%]   .numUpDown[_ngcontent-%COMP%]     .mat-form-field._mat-animation-noopable .mat-form-field-label{height:26px;padding-left:7px}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterNumUpDownGroup[_ngcontent-%COMP%]   .numUpDown[_ngcontent-%COMP%]     input{caret-color:var(--fluent-theme-neutral-tertiary-alt-color, #C8C6C4)}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterNumUpDownGroup[_ngcontent-%COMP%]   .numUpDown[_ngcontent-%COMP%]     .mat-form-field-appearance-legacy .mat-form-field-label{top:12px;left:6.5px}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .valueFormatterNumUpDownGroup[_ngcontent-%COMP%]   .numUpDown[_ngcontent-%COMP%]     .mat-form-field.mat-focused .mat-form-field-label{color:var(--fluent-theme-black-color, #000);opacity:.54}.valueFormatterToolbarContainer[_ngcontent-%COMP%]     .pbi-office-icon{width:16px}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .icon-decreaseDecimals[_ngcontent-%COMP%]{padding-left:4px;padding-top:4px}.valueFormatterToolbarContainer[_ngcontent-%COMP%]   .icon-format[_ngcontent-%COMP%]{padding-right:10px;padding-top:2px}.edit-category-lists-in-dropdown[_ngcontent-%COMP%]{border-top:1px solid var(--gray-60, #C8C6C4);display:flex;flex-direction:column}.edit-category-lists-button[_ngcontent-%COMP%], .create-category-list-button[_ngcontent-%COMP%]{width:100%;background-color:transparent;border:none;font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);color:var(--fluent-theme-neutral-primary-color, #323130)}.edit-category-lists-button[_ngcontent-%COMP%]:hover, .create-category-list-button[_ngcontent-%COMP%]:hover, .edit-category-lists-button[_ngcontent-%COMP%]:active, .create-category-list-button[_ngcontent-%COMP%]:active{background-color:var(--fluent-theme-neutral-quarter-alt-color, #E1DFDD)}']}),he}()},90127:function(lt,Ge,t){"use strict";t.d(Ge,{D:function(){return d}});var r=t(62458),o=t(50423),P=t(9380),a=t(82621),d=function(){function p(l,c){this.featureSwitchServices=l,this.formatValuePipe=c}return p.prototype.transform=function(l,c,y,i,C){var v;return void 0===i&&(i=!0),void 0===C&&(C="\u2014"),this.featureSwitchServices.featureSwitches.goalsCategoricalValues&&c?_.isNil(l)?C:(r.fF.assert(function(){return _.isNumber(l)},"formatGoalValue transform value"),null===(v=c[l])||void 0===v?void 0:v.displayName):this.formatValuePipe.transform(l,y,i,C)},p.\u0275fac=function(c){return new(c||p)(o.\u0275\u0275directiveInject(P.vZ,16),o.\u0275\u0275directiveInject(a.c,16))},p.\u0275pipe=o.\u0275\u0275definePipe({name:"formatGoalValue",type:p,pure:!0}),p}()},82621:function(lt,Ge,t){"use strict";t.d(Ge,{c:function(){return d}});var r=t(62458),o=t(58098),P=t(72489),a=t(50423),d=function(){function p(){}return p.prototype.transform=function(l,c,y,i){if(void 0===y&&(y=!0),void 0===i&&(i="\u2014"),r.fF.assert(function(){return _.isNil(l)||p.isPrimitiveValue(l)},"Should only use FormatValuePipe on PrimitiveValue type"),_.isNil(l)||!p.isPrimitiveValue(l))return i;c=c??p.getDefaultFormatString(l);var C=(0,P.Ue)({format:c,formatSingleValues:!0,columnType:void 0});return y&&_.isNumber(l)&&(C=(0,P.Ue)({format:c,value:_.isNumber(l)?l:0,precision:Number.NaN,displayUnitSystemType:o.V.WholeUnits,formatSingleValues:!1,allowFormatBeautification:!0,columnType:void 0})),C.format(l)},p.getDefaultFormatString=function(l){var c=p.valueTypeDescriptorFromPrimitiveValue(l);if(c.integer){if(l<p.MIN_INTEGER_VALUE_FOR_DISPLAY_UNITS)return p.INT_FORMAT_STRING_NO_DISPLAY_UNITS;var i=(0,P.Ue)({value:_.isNumber(l)?l:0}).displayUnit.project(l);return _.isInteger(i)?p.INT_FORMAT_STRING_NO_DISPLAY_UNITS:p.NUMERIC_FORMAT_STRING}return(0,P.v1)(c)},p.isPrimitiveValue=function(l){return!!(_.isString(l)||_.isNumber(l)||_.isBoolean(l)||_.isDate(l))},p.valueTypeDescriptorFromPrimitiveValue=function(l){return _.isDate(l)?{dateTime:!0}:_.isInteger(l)?{integer:!0}:_.isNumber(l)?{numeric:!0}:_.isBoolean(l)?{bool:!0}:_.isString(l)?{text:!0}:(r.fF.assert(function(){return!l},"Unsupported primitive value"),{none:!0})},p.INT_FORMAT_STRING_NO_DISPLAY_UNITS="#,0",p.NUMERIC_FORMAT_STRING="#,0.00",p.MIN_INTEGER_VALUE_FOR_DISPLAY_UNITS=1e3,p.\u0275fac=function(c){return new(c||p)},p.\u0275pipe=a.\u0275\u0275definePipe({name:"formatValue",type:p,pure:!0}),p}()},76777:function(lt,Ge,t){"use strict";t.d(Ge,{H:function(){return s}}),t(5432);var o=t(90127),P=t(82621),a=t(77476),d=t(77274),p=t(95859),l=t(91382),c=t(93367),y=t(94841),i=t(45411),C=t(16095),v=t(50423),k=t(54485),s=function(){function ne(te){t.e("value-formatting").then(t.bind(t,24854)).then(function(X){te.registerIcons(X.iconSpriteSheet.sprite)})}return ne.\u0275fac=function(X){return new(X||ne)(v.\u0275\u0275inject(k.u))},ne.\u0275mod=v.\u0275\u0275defineNgModule({type:ne}),ne.\u0275inj=v.\u0275\u0275defineInjector({providers:[o.D,P.c],imports:[a.CommonModule,p.v,d.uw,l.d,y.b,c.U,i.m,C.Z]}),ne}()},23873:function(lt,Ge,t){"use strict";t.d(Ge,{o:function(){return de}});var r=t(81337),o=t(50423),P=t(21661),a=t(30794),d=t(83317),p=t(3307),l=t(17653),c=t(77526),y=t(59973),i=t(48787),C=t(12587),v=t(35510),k=t(74466);function ne(V,M,L){return(0,k.ZP)(V,function(x){-1===x.start.column&&(x.start.column=0,x.end.column=L-1),-1===x.start.row&&(x.start.row=0,x.end.row=M-1),x.start.row=Math.max(0,Math.min(x.start.row,M-1)),x.start.column=Math.max(0,Math.min(x.start.column,L-1)),x.end.row=Math.max(0,Math.min(x.end.row,M-1)),x.end.column=Math.max(0,Math.min(x.end.column,L-1))})}function te(V,M){switch(M){case"Date":if(V){_.isString(V)&&(V=V.replace(/\//g,"-"));var L=new Date(V);if(_.isFinite(L.getTime()))return L}return;case"Number":return _.isFinite(parseFloat(V))?parseFloat(V):void 0;default:return V}}(0,k.Fl)(!1);var X=function(){function V(){this._columns$=new v.X([]),this._rows$=new v.X([])}return Object.defineProperty(V.prototype,"columns",{get:function(){return this._columns$.value},enumerable:!1,configurable:!0}),Object.defineProperty(V.prototype,"rows",{get:function(){return this._rows$.value},enumerable:!1,configurable:!0}),Object.defineProperty(V.prototype,"rows$",{get:function(){return this._rows$.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(V.prototype,"columns$",{get:function(){return this._columns$.asObservable()},enumerable:!1,configurable:!0}),V.prototype.setColumns=function(M){this._columns$.next(M||[])},V.prototype.setRows=function(M){this._rows$.next(M||[])},V.prototype.appendRow=function(){this.ensureRows(this.rows.length+1)},V.prototype.ensureRows=function(M){var L=this.rows;M<=L.length||this.setRows((0,r.ev)((0,r.ev)([],L,!0),_.map(new Array(M-L.length),function(){return[]}),!0))},V.prototype.setCellData=function(M,L){if(this.isValidCell(M)){var x=this.rows,Y=(0,r.ev)((0,r.ev)((0,r.ev)([],_.slice(x,0,M.row),!0),[(0,r.ev)([],x[M.row],!0)],!1),_.slice(x,M.row+1,x.length),!0);Y[M.row][M.column]=L,this.setRows(Y)}},V.prototype.deleteRows=function(M,L){var x=this.rows;this.setRows((0,r.ev)((0,r.ev)([],_.slice(x,0,M),!0),_.slice(x,M+L,x.length),!0))},V.prototype.emptyRange=function(M){var L=this;this.setRows((0,k.Uy)(this.rows,function(x){for(var Y=(M=ne(M,L.rows.length,L.columns.length)).start.row;Y<=M.end.row;Y++)for(var ue=M.start.column;ue<=M.end.column;ue++)x[Y][ue]=null}))},V.prototype.isValidCell=function(M){return!(!_.isFinite(M.row)||!_.isFinite(M.column)||M.row>=this._rows$.value.length||M.column>=this._columns$.value.length||M.row<0||M.column<0)},V.\u0275prov=o.\u0275\u0275defineInjectable({token:V,factory:V.\u0275fac=function(L){return new(L||V)}}),V}(),m=function(){function V(M){this.dataSource=M,this._editingCell$=new v.X(void 0),this._isReadOnly$=new v.X(!1),this.isReadOnly$=this._isReadOnly$.asObservable()}return Object.defineProperty(V.prototype,"isReadOnly",{get:function(){return!!this._isReadOnly$.value},enumerable:!1,configurable:!0}),V.prototype.setReadOnly=function(M){this.cancelEditing(),this._isReadOnly$.next(!!M)},Object.defineProperty(V.prototype,"editingCell$",{get:function(){return this._editingCell$.asObservable()},enumerable:!1,configurable:!0}),V.prototype.isEditing=function(){return!!this._editingCell$.value},V.prototype.isEditingCell=function(M){var L=this._editingCell$.value;return!!L&&!!M&&M.column===L.column&&M.row===L.row},V.prototype.tryEditCell=function(M,L){this.isEditingCell(M)||this.isReadOnly||this.editCell(M,L)},V.prototype.editCell=function(M,L){this.commitPendingEdit(),this.dataSource.isValidCell(M)&&this._editingCell$.next({column:M.column,row:M.row,data:_.isNil(L)?this.dataSource.rows[M.row][M.column]:L})},V.prototype.setEditingData=function(M){var L,x,Y,ue=void 0===(x=(L=this._editingCell$.value||{}).row)?0:x,Ne=void 0===(Y=L.column)?0:Y;this._editingCell$.next({data:M,row:ue,column:Ne})},V.prototype.commitPendingEdit=function(){var M=this._editingCell$.value;M&&(this.dataSource.setCellData(M,M.data),this._editingCell$.next(void 0))},V.prototype.cancelEditing=function(){this._editingCell$.value&&this._editingCell$.next(void 0)},V.\u0275fac=function(L){return new(L||V)(o.\u0275\u0275inject(X))},V.\u0275prov=o.\u0275\u0275defineInjectable({token:V,factory:V.\u0275fac}),V}(),O=t(14172),I=t(57243),H=function(){function V(M){var L=this;this.dataStore=M,this.currentSelection$=new v.X(void 0),this._enforceSelectingColumn=!1,this.normalizedSelection$=this.currentSelection$.pipe((0,O.U)(function(x){return L.normalizeSelection(x)}),(0,I.d)({bufferSize:1,refCount:!0})),this.selectedCell$=this.currentSelection$.pipe((0,O.U)(function(x){return x&&{column:x.start.column,row:x.start.row}}),(0,I.d)({bufferSize:1,refCount:!0}))}return Object.defineProperty(V.prototype,"selectedCell",{get:function(){var L;return this.selectedCell$.pipe((0,i.q)(1)).subscribe(function(x){return L=x}),L},enumerable:!1,configurable:!0}),Object.defineProperty(V.prototype,"normalizedSelection",{get:function(){var L;return this.normalizedSelection$.pipe((0,i.q)(1)).subscribe(function(x){return L=x}),L},enumerable:!1,configurable:!0}),Object.defineProperty(V.prototype,"selection",{get:function(){return this.currentSelection$.value},enumerable:!1,configurable:!0}),Object.defineProperty(V.prototype,"enforceSelectingColumn",{set:function(L){this._enforceSelectingColumn=L},enumerable:!1,configurable:!0}),V.prototype.setSelection=function(M){M&&(this._enforceSelectingColumn&&(M.start={row:-1,column:M.start.column},M.end={row:-1,column:M.start.column}),M.start=this.normalizeCell(M.start),M.end=this.normalizeCell(M.end)),this.currentSelection$.next(M),this.clearFocus()},V.prototype.setFocus=function(M,L){this.ensureRowIsInVirtualScroll(M.row);var x=L.querySelector('[data-row="'.concat(M.row,'"][data-column="').concat(M.column,'"]'));x&&(x.focus(),this.focusedCell=M)},V.prototype.clearFocus=function(){this.focusedCell=void 0},V.prototype.ensureRowIsInVirtualScroll=function(M){var L=this.virtualScroll.getRenderedRange();M>=0&&(L.start>M||L.end<M)&&this.virtualScroll.scrollToIndex(M)},V.prototype.selectCell=function(M){M=this.normalizeCell(M),this.setSelection({start:M,end:M})},V.prototype.setSelectionStart=function(M){M=this.normalizeCell(M);var L=this.currentSelection$.value;this.setSelection({start:M,end:L?.end||M})},V.prototype.setSelectionEnd=function(M){M=this.normalizeCell(M);var L=this.currentSelection$.value;this.setSelection({start:L?.start||M,end:M})},V.prototype.selectAll=function(){this.selectCell({row:-1,column:-1})},V.prototype.normalizeCell=function(M){var L=this.dataStore.rows.length,x=this.dataStore.columns.length;return{row:_.isFinite(M?.row)?Math.max(-1,Math.min(M.row,L-1)):-1,column:_.isFinite(M?.column)?Math.max(-1,Math.min(M.column,x-1)):-1}},V.prototype.normalizeSelection=function(M){if(!_.isNil(M))return{start:{row:Math.min(M.start.row,M.end.row),column:Math.min(M.start.column,M.end.column)},end:{row:Math.max(M.start.row,M.end.row),column:Math.max(M.start.column,M.end.column)}}},V.\u0275fac=function(L){return new(L||V)(o.\u0275\u0275inject(X))},V.\u0275prov=o.\u0275\u0275defineInjectable({token:V,factory:V.\u0275fac}),V}(),G=function(){function V(M,L,x){this.selectionService=M,this.dataSource=L,this.cellEditingService=x}return V.prototype.canCopyCurrentSelection=function(){return!!this.selectionService.normalizedSelection},V.prototype.copyCurrentSelection=function(M){return void 0===M&&(M=!1),(0,r.mG)(this,void 0,void 0,function(){var L,$e;return(0,r.Jh)(this,function(Xe){switch(Xe.label){case 0:return(L=this.selectionService.normalizedSelection)?($e=ne({start:L.start||{row:0,column:0},end:L.end||{row:0,column:0}},this.dataSource.rows.length,this.dataSource.columns.length),[4,this.copy($e.start,$e.end,!1,M)]):[2];case 1:return Xe.sent(),[2]}})})},V.prototype.copyAll=function(M){return(0,r.mG)(this,void 0,void 0,function(){return(0,r.Jh)(this,function(Ne){switch(Ne.label){case 0:return[4,this.copy({row:0,column:0},{row:this.dataSource.rows.length-1,column:this.dataSource.columns.length-1},M)];case 1:return Ne.sent(),[2]}})})},V.prototype.copy=function(M,L,x,Y){void 0===Y&&(Y=!1);var Ne=_.map(_.slice(this.dataSource.rows,M.row,L.row+1),function(qe){return _.slice(qe,M.column,L.column+1)}),$e=[];if(x){var Xe=_(this.dataSource.columns).map(function(qe){return qe.name}).slice(M.column,L.column+1).join("\t");$e.push(Xe)}for(var it=0,st=Ne;it<st.length;it++){var ut=_.join(st[it].map(function(qe){return Y?'"'+(qe??"").toString().trimStart().replace(/"/g,'""'):(qe??"").toString()}),"\t");$e.push(ut)}return navigator.clipboard.writeText(_.join($e,"\r\n"))},V.prototype.pasteOverSelection=function(){return(0,r.mG)(this,void 0,void 0,function(){var M,L,x,Y,ue,Ne;return(0,r.Jh)(this,function($e){switch($e.label){case 0:return!(M=this.selectionService.normalizedSelection)||this.cellEditingService.isReadOnly?[2]:[4,navigator.clipboard.readText()];case 1:return(L=$e.sent())?(0===(x=_.map(L.split(/\n|\r\n/),function(Xe){return Xe.split(/\t/)})).length||(Y=this.dataSource.columns,(ue=M.start||{row:0,column:0}).row=Math.max(0,ue.row),ue.column=Math.max(0,ue.column),this.dataSource.ensureRows(ue.row+x.length),Ne=(0,k.ZP)(this.dataSource.rows,function(Xe){for(var it=0;it<x.length;it++)for(var st=ue.column,ot=0;st<Y.length&&ot<x[it].length;st++,ot++){var ut=te(x[it][ot],Y[st].type);ut&&(Xe[ue.row+it][st]=ut)}}),this.dataSource.setRows(Ne),this.selectionService.setSelection({start:ue,end:{row:ue.row+x.length-1,column:ue.column+x[0].length-1}})),[2]):[2]}})})},V.\u0275fac=function(L){return new(L||V)(o.\u0275\u0275inject(H),o.\u0275\u0275inject(X),o.\u0275\u0275inject(m))},V.\u0275prov=o.\u0275\u0275defineInjectable({token:V,factory:V.\u0275fac}),V}(),Z=function(V){return V.ArrowUp="ArrowUp",V.ArrowDown="ArrowDown",V.ArrowLeft="ArrowLeft",V.ArrowRight="ArrowRight",V}({}),ie=function(V){return V.Enter="Enter",V.Tab="Tab",V.Escape="Escape",V.Delete="Delete",V.Backspace="Backspace",V.F2="F2",V.Space=" ",V}({}),ye=function(){function V(M,L,x,Y){this.cellEditing=M,this.selectionService=L,this.dataSource=x,this.clipboardService=Y}return V.prototype.keydown=function(M,L,x){var Y=!1;"c"===M.key&&M.ctrlKey&&!this.cellEditing.isEditing()?(this.clipboardService.copyCurrentSelection(),Y=!0):"v"===M.key&&M.ctrlKey&&!this.cellEditing.isEditing()?(this.clipboardService.pasteOverSelection(),Y=!0):"a"===M.key&&M.ctrlKey&&!this.cellEditing.isEditing()?(this.selectionService.selectAll(),Y=!0):M.key.match(/^[a-z0-9]$/i)?Y=this.handleAlphaNumeric(M.key):M.key in Z?Y=M.altKey?this.handleColumnResize(M.key):this.handleArrowKey(M.key,(M.shiftKey||M.ctrlKey)&&x,L):M.key===ie.Enter?Y=this.handleEnter(M):M.key===ie.Tab?Y=this.handleTab():M.key===ie.Escape?Y=this.handleEscape():M.key===ie.Delete||M.key===ie.Backspace?Y=this.handleDelete():M.key===ie.F2?Y=this.handleF2():M.key===ie.Space&&(Y=this.handleSpace(M)),Y&&(M.stopPropagation(),M.preventDefault())},V.prototype.handleF2=function(){var M=this.selectionService.selectedCell;return!(!M||this.cellEditing.isEditingCell(M)||this.cellEditing.isReadOnly||(this.cellEditing.tryEditCell(M),0))},V.prototype.handleAlphaNumeric=function(M){var L=this.selectionService.selectedCell;if(L&&!this.cellEditing.isEditingCell(L)&&!this.cellEditing.isReadOnly){var x=this.dataSource.columns[L.column];return this.cellEditing.tryEditCell(L,te(M,x?.type)),!0}return!1},V.prototype.handleColumnResize=function(M){var L,x,Y=null===(L=this.selectionService.focusedCell)||void 0===L?void 0:L.column;if(void 0!==Y&&-1!==Y){var ue=null!==(x=this.dataSource.columns[Y].width)&&void 0!==x?x:50,$e=this.dataSource.columns;switch(M){case Z.ArrowLeft:$e[Y].width=Math.max(ue-1,45),this.dataSource.setColumns($e);break;case Z.ArrowRight:$e[Y].width=ue+1,this.dataSource.setColumns($e)}}return!0},V.prototype.handleArrowKey=function(M,L,x){var Y={row:-1,column:-1};if(this.selectionService.focusedCell)Y={row:this.selectionService.focusedCell.row,column:this.selectionService.focusedCell.column};else{var ue=this.selectionService.selection;ue?.end&&L?Y=(0,r.pi)({},ue.end):ue?.start&&(Y=(0,r.pi)({},ue.start))}switch(M){case Z.ArrowUp:if(this.cellEditing.isEditing())return!1;Y.row--;break;case Z.ArrowDown:Y.row++,this.cellEditing.isReadOnly||this.dataSource.ensureRows(Y.row+1);break;case Z.ArrowLeft:if(this.cellEditing.isEditing())return!1;Y.column--;break;case Z.ArrowRight:if(this.cellEditing.isEditing())return!1;Y.column++}return L&&this.selectionService.setSelectionEnd(Y),this.selectionService.setFocus(Y,x),!0},V.prototype.handleTab=function(){return this.selectionService.clearFocus(),!1},V.prototype.handleEnter=function(M){var L,x,Y=this.selectionService.focusedCell;if(Y)return this.selectionService.selectCell(Y),null===(L=M.target)||void 0===L||L.blur(),null===(x=M.currentTarget)||void 0===x||x.focus(),!0;var ue=this.selectionService.selectedCell;if(ue){if(this.cellEditing.isEditingCell(ue)){var Ne={row:ue.row+1,column:ue.column};return this.dataSource.ensureRows(Ne.row+1),this.selectionService.selectCell(Ne),!0}if(!this.cellEditing.isReadOnly)return this.cellEditing.tryEditCell(ue),!0}return!1},V.prototype.handleSpace=function(M){var L,x,Y=this.selectionService.focusedCell;if(Y)return this.selectionService.selectCell(Y),null===(L=M.target)||void 0===L||L.blur(),null===(x=M.currentTarget)||void 0===x||x.focus(),!0;var ue=this.selectionService.selectedCell;if(ue){if(this.cellEditing.isEditingCell(ue))return!1;if(!this.cellEditing.isReadOnly)return this.cellEditing.tryEditCell(ue),!0}return!1},V.prototype.handleEscape=function(){return this.cellEditing.cancelEditing(),!0},V.prototype.handleDelete=function(){var M=this.selectionService.normalizedSelection;return!(!M||this.cellEditing.isEditing()||this.cellEditing.isReadOnly||(-1===M.start.column&&-1!==M.start.row?(this.dataSource.deleteRows(M.start.row,M.end.row-M.start.row+1),this.selectionService.selectCell({row:M.start.row,column:-1})):this.dataSource.emptyRange(M),0))},V.\u0275fac=function(L){return new(L||V)(o.\u0275\u0275inject(m),o.\u0275\u0275inject(H),o.\u0275\u0275inject(X),o.\u0275\u0275inject(G))},V.\u0275prov=o.\u0275\u0275defineInjectable({token:V,factory:V.\u0275fac}),V}(),ae=t(74848),J=function(){function V(M,L,x){this.cellEditing=M,this.selectionService=L,this.dataSource=x}return V.prototype.doubleClick=function(M,L){this.cellEditing.isEditingCell(L)||this.cellEditing.isReadOnly||(this.cellEditing.tryEditCell(L),M.preventDefault(),M.stopPropagation())},V.prototype.mouseDown=function(M,L,x){if(this._supportRightClickMenu&&M.button===ae.tc.Secondary)return M.preventDefault(),void M.stopPropagation();this.cellEditing.isEditingCell(L)||(M.preventDefault(),M.stopPropagation(),$(M.currentTarget).trigger("focus"),M.shiftKey&&x?this.selectionService.setSelectionEnd(L):this.selectionService.selectCell(L),this.isSelecting=!0)},V.prototype.mouseOver=function(M,L,x){this.isSelecting&&x&&(M.preventDefault(),M.stopPropagation(),this.selectionService.setSelectionEnd(L))},V.prototype.mouseLeave=function(M){this.isSelecting&&(this.isSelecting=!1,M.preventDefault(),M.stopPropagation())},V.prototype.mouseUpInCell=function(M,L){var x,Y;if(this.showRightClickMenu=!1,L&&!this.cellEditing.isEditingCell(L)&&this._supportRightClickMenu&&M.button===ae.tc.Secondary){var ue=null===(x=this.selectionService.normalizedSelection)||void 0===x?void 0:x.start,Ne=null===(Y=this.selectionService.normalizedSelection)||void 0===Y?void 0:Y.end;if(!ue||!Ne)return;return this.isInEffectiveRange(L,ue,Ne)&&(this.showRightClickMenu=!0),M.preventDefault(),void M.stopPropagation()}},Object.defineProperty(V.prototype,"supportRightClickMenu",{set:function(L){this._supportRightClickMenu=L},enumerable:!1,configurable:!0}),Object.defineProperty(V.prototype,"showRightClickMenu",{get:function(){return this._showRightClickMenu},set:function(L){this._showRightClickMenu=L},enumerable:!1,configurable:!0}),V.prototype.isInEffectiveRange=function(M,L,x){var Y,$e=(Y=ne({start:L||{row:0,column:0},end:x||{row:0,column:0}},this.dataSource.rows.length,this.dataSource.columns.length)).start,Xe=Y.end;return M.row>=$e.row&&M.row<=Xe.row&&M.column>=$e.column&&M.column<=Xe.column},V.\u0275fac=function(L){return new(L||V)(o.\u0275\u0275inject(m),o.\u0275\u0275inject(H),o.\u0275\u0275inject(X))},V.\u0275prov=o.\u0275\u0275defineInjectable({token:V,factory:V.\u0275fac}),V}(),N=t(81900),he=t(77476),pe=t(74913),ce=function(){function V(){}return V.\u0275fac=function(L){return new(L||V)},V.\u0275cmp=o.\u0275\u0275defineComponent({type:V,selectors:[["tri-cell"]],inputs:{data:"data"},decls:1,vars:1,template:function(L,x){1&L&&o.\u0275\u0275text(0),2&L&&o.\u0275\u0275textInterpolate(x.data)},styles:["[_nghost-%COMP%]{cursor:default;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}"],changeDetection:0}),V}(),ge=t(33554),se=t(17174),De=["editor"],fe=function(){function V(){this.onDestroy$=new ge.t(1)}return V.prototype.ngOnInit=function(){var L,M=this;null===(L=this.focusEditor$)||void 0===L||L.pipe((0,d.R)(this.onDestroy$)).subscribe(function(){M.focusEditor()})},V.prototype.ngOnDestroy=function(){this.onDestroy$.next(),this.onDestroy$.complete()},V.prototype.ngOnChanges=function(M){if(M.data&&"Date"===this.column.type){var L=new Date(this.data);_.isFinite(L.getTime())&&(this.data=L.toISOString().slice(0,10))}if(M.column)switch(this.column.type){case"Date":this.type="date";break;case"Number":this.type="number";break;default:this.type="text"}},V.prototype.ngAfterViewInit=function(){this.focusEditor()},V.prototype.onDataChange=function(M){var L=te(M,this.column.type);_.isNil(L)||this.dataChange(L)},V.prototype.focusEditor=function(){var M;null===(M=this.editor.nativeElement)||void 0===M||M.focus()},V.\u0275fac=function(L){return new(L||V)},V.\u0275cmp=o.\u0275\u0275defineComponent({type:V,selectors:[["tri-cell-editor"]],viewQuery:function(L,x){var Y;(1&L&&o.\u0275\u0275viewQuery(De,5),2&L)&&(o.\u0275\u0275queryRefresh(Y=o.\u0275\u0275loadQuery())&&(x.editor=Y.first))},inputs:{column:"column",data:"data",focusEditor$:"focusEditor$",dataChange:"dataChange"},features:[o.\u0275\u0275NgOnChangesFeature],decls:2,vars:3,consts:[["autofocus","",3,"type","ngModel","ngModelChange"],["editor",""]],template:function(L,x){1&L&&(o.\u0275\u0275elementStart(0,"input",0,1),o.\u0275\u0275listener("ngModelChange",function(ue){return x.onDataChange(ue)}),o.\u0275\u0275elementEnd()),2&L&&(o.\u0275\u0275property("type",x.type)("ngModel",x.data),o.\u0275\u0275attribute("aria-label",x.data))},dependencies:[se.Fj,se.JJ,se.On],styles:["input[_ngcontent-%COMP%]{border:0;width:100%;background:transparent;padding:0;display:inline-flex;align-items:center}input[_ngcontent-%COMP%]:focus, input[_ngcontent-%COMP%]:hover, input[_ngcontent-%COMP%]:active, input[_ngcontent-%COMP%]:active:hover, input[_ngcontent-%COMP%]:focus:hover{outline:none}[_ngcontent-%COMP%]::-webkit-outer-spin-button, [_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{-webkit-appearance:textfield;appearance:textfield;-moz-appearance:textfield}"],changeDetection:0}),V}(),Oe=function(){function V(){this.columnResized=new o.EventEmitter}return V.prototype.onMouseDown=function(M){var L,x,Y;return this.isResizing=!0,this.pageX=M.pageX,this.initialWidth=null!==(Y=null===(x=null===(L=M.target)||void 0===L?void 0:L.parentElement)||void 0===x?void 0:x.offsetWidth)&&void 0!==Y?Y:0,document.body.style.cursor="col-resize",M.stopPropagation(),!1},V.prototype.onDragStart=function(){return!1},V.prototype.onMouseMove=function(M){return!this.isResizing||(this.columnResized.emit(Math.max(0,this.initialWidth+M.pageX-this.pageX)),M.stopPropagation(),!1)},V.prototype.onMouseLeave=function(M){return!this.isResizing||(this.isResizing=!1,document.body.style.cursor="",M.stopPropagation(),!1)},V.\u0275fac=function(L){return new(L||V)},V.\u0275dir=o.\u0275\u0275defineDirective({type:V,selectors:[["","triResizeColumn",""]],hostBindings:function(L,x){1&L&&o.\u0275\u0275listener("mousedown",function(ue){return x.onMouseDown(ue)})("touchstart",function(ue){return x.onMouseDown(ue)})("dragstart",function(){return x.onDragStart()})("mousemove",function(ue){return x.onMouseMove(ue)},!1,o.\u0275\u0275resolveWindow)("touchmove",function(ue){return x.onMouseMove(ue)},!1,o.\u0275\u0275resolveWindow)("mouseup",function(ue){return x.onMouseLeave(ue)},!1,o.\u0275\u0275resolveWindow)("mouseleave",function(ue){return x.onMouseLeave(ue)},!1,o.\u0275\u0275resolveWindow)("touchend",function(ue){return x.onMouseLeave(ue)},!1,o.\u0275\u0275resolveWindow)},outputs:{columnResized:"columnResized"}}),V}(),be=function(){function V(){}return V.prototype.transform=function(M,L,x){return!!M&&(-1===M.start.row||L>=M.start.row&&L<=M.end.row)&&(-1===M.start.column||x>=M.start.column&&x<=M.end.column)},V.\u0275fac=function(L){return new(L||V)},V.\u0275pipe=o.\u0275\u0275definePipe({name:"isSelected",type:V,pure:!0}),V}(),Fe=["headers"],ze=["table"],Ke=["viewport"],je=["cellEditor"];function He(V,M){if(1&V){var L=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",11),o.\u0275\u0275listener("focus",function(ue){o.\u0275\u0275restoreView(L);var Ne=o.\u0275\u0275nextContext(2);return o.\u0275\u0275resetView(Ne.focusCell(ue,{row:-1,column:-1}))}),o.\u0275\u0275element(1,"tri-svg-icon",12),o.\u0275\u0275elementEnd()}if(2&V){var x=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("tabindex",x.focusedCell?-1:0),o.\u0275\u0275attribute("data-row",-1)("data-column",-1),o.\u0275\u0275advance(1),o.\u0275\u0275property("name","table_20_regular")}}var Je=function(M){return{headerName:M}};function j(V,M){if(1&V){var L=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",13),o.\u0275\u0275listener("focus",function(Xe){var st=o.\u0275\u0275restoreView(L).index,ot=o.\u0275\u0275nextContext(2);return o.\u0275\u0275resetView(ot.focusCell(Xe,{row:-1,column:st}))}),o.\u0275\u0275pipe(1,"isSelected"),o.\u0275\u0275elementContainer(2,14),o.\u0275\u0275elementStart(3,"span",15),o.\u0275\u0275listener("columnResized",function(Xe){var st=o.\u0275\u0275restoreView(L).index,ot=o.\u0275\u0275nextContext(2);return o.\u0275\u0275resetView(ot.onColumnResized(Xe,st))}),o.\u0275\u0275elementEnd()()}if(2&V){var x=M.$implicit,Y=M.index,ue=o.\u0275\u0275nextContext(2),Ne=o.\u0275\u0275reference(9);o.\u0275\u0275styleProp("width",ue.columnWidths[Y]),o.\u0275\u0275classProp("selection-start",o.\u0275\u0275pipeBind3(1,9,ue.selection,-1,Y)),o.\u0275\u0275property("tabindex",ue.focusedCell||ue.rowHeaders||0!==Y?-1:0),o.\u0275\u0275attribute("data-row",-1)("data-column",Y),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngTemplateOutlet",x.headerTemplate||Ne)("ngTemplateOutletContext",o.\u0275\u0275pureFunction1(13,Je,x.name))}}function nt(V,M){if(1&V){var L=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",23),o.\u0275\u0275listener("focus",function(Ne){o.\u0275\u0275restoreView(L);var $e=o.\u0275\u0275nextContext().index,Xe=o.\u0275\u0275nextContext(3);return o.\u0275\u0275resetView(Xe.focusCell(Ne,{row:$e,column:-1}))}),o.\u0275\u0275pipe(1,"isSelected"),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd()}if(2&V){var x=o.\u0275\u0275nextContext().index,Y=o.\u0275\u0275nextContext(3);o.\u0275\u0275classProp("selection-start",o.\u0275\u0275pipeBind3(1,5,Y.selection,x,-1)),o.\u0275\u0275attribute("data-row",x)("data-column",-1),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate1(" ",x+Y.rowIndexDisplayOffset," ")}}var Ue=function(M,L,x,Y){return{column:M,data:L,dataChange:x,focusEditor$:Y}};function oe(V,M){if(1&V&&o.\u0275\u0275elementContainer(0,14,27),2&V){var L=o.\u0275\u0275nextContext().$implicit,x=o.\u0275\u0275nextContext(4),Y=o.\u0275\u0275reference(5);o.\u0275\u0275property("ngTemplateOutlet",L.editTemplate||Y)("ngTemplateOutletContext",o.\u0275\u0275pureFunction4(2,Ue,L,x.editingCell.data,x.onEditCellDataChange.bind(x),x.focusEditor$))}}var h=function(M,L){return{column:M,data:L}};function g(V,M){if(1&V&&o.\u0275\u0275elementContainer(0,14),2&V){var L=o.\u0275\u0275nextContext(),x=L.$implicit,Y=L.index,ue=o.\u0275\u0275nextContext().$implicit;o.\u0275\u0275nextContext(3);var Ne=o.\u0275\u0275reference(7);o.\u0275\u0275property("ngTemplateOutlet",x.template||Ne)("ngTemplateOutletContext",o.\u0275\u0275pureFunction2(2,h,x,ue[Y]))}}function u(V,M){if(1&V){var L=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",24),o.\u0275\u0275listener("focus",function(it){var ot=o.\u0275\u0275restoreView(L).index,ut=o.\u0275\u0275nextContext().index,qe=o.\u0275\u0275nextContext(3);return o.\u0275\u0275resetView(qe.focusCell(it,{row:ut,column:ot}))}),o.\u0275\u0275pipe(1,"isSelected"),o.\u0275\u0275template(2,oe,2,7,"ng-container",25),o.\u0275\u0275template(3,g,1,5,"ng-template",null,26,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementEnd()}if(2&V){var x=M.index,Y=o.\u0275\u0275reference(4),ue=o.\u0275\u0275nextContext().index;o.\u0275\u0275nextContext();var Ne=o.\u0275\u0275reference(1),$e=o.\u0275\u0275nextContext(2);o.\u0275\u0275styleProp("width",$e.columnWidths[x]),o.\u0275\u0275classProp("selected-top",ue===(null==$e.selection||null==$e.selection.start?null:$e.selection.start.row)||0===ue&&-1===(null==$e.selection||null==$e.selection.start?null:$e.selection.start.row))("selected-bottom",ue===(null==$e.selection||null==$e.selection.end?null:$e.selection.end.row)&&-1!==(null==$e.selection||null==$e.selection.start?null:$e.selection.start.row)||ue===$e.dataSource.rows.length-1&&-1===(null==$e.selection||null==$e.selection.end?null:$e.selection.end.row))("selected-left",x===(null==$e.selection||null==$e.selection.start?null:$e.selection.start.column)||0===x&&-1===(null==$e.selection||null==$e.selection.start?null:$e.selection.start.column))("selected-right",x===(null==$e.selection||null==$e.selection.end?null:$e.selection.end.column)&&-1!==(null==$e.selection||null==$e.selection.start?null:$e.selection.start.column)||x===$e.dataSource.columns.length-1&&-1===(null==$e.selection||null==$e.selection.start?null:$e.selection.start.column))("selected",o.\u0275\u0275pipeBind3(1,19,$e.selection,ue,x))("selection-start",$e.selectedCell&&$e.selectedCell.row===ue&&$e.selectedCell.column===x),o.\u0275\u0275attribute("data-row",ue)("data-column",x)("aria-colindex",(Ne.getRenderedRange().start||0)+x+1),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",$e.editingCell&&$e.editingCell.row===ue&&$e.editingCell.column===x)("ngIfElse",Y)}}function F(V,M){if(1&V&&(o.\u0275\u0275elementStart(0,"div",20),o.\u0275\u0275template(1,nt,3,9,"div",21),o.\u0275\u0275template(2,u,5,23,"div",22),o.\u0275\u0275elementEnd()),2&V){var L=M.index,x=o.\u0275\u0275nextContext(2).$implicit,Y=o.\u0275\u0275nextContext();o.\u0275\u0275attribute("aria-rowindex",L+1),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",Y.rowHeaders),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",x)("ngForTrackBy",Y.trackByColumn)}}function W(V,M){if(1&V){var L=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",31),o.\u0275\u0275listener("mousedown",function(){o.\u0275\u0275restoreView(L);var Y=o.\u0275\u0275nextContext(4);return o.\u0275\u0275resetView(Y.appendRow(-1))})("focus",function(Y){o.\u0275\u0275restoreView(L);var ue=o.\u0275\u0275nextContext(2).$implicit,Ne=o.\u0275\u0275nextContext(2);return o.\u0275\u0275resetView(Ne.focusCell(Y,{row:ue.length,column:-1}))}),o.\u0275\u0275text(1,"+"),o.\u0275\u0275elementEnd()}}function ee(V,M){if(1&V){var L=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",32),o.\u0275\u0275listener("mousedown",function(){var $e=o.\u0275\u0275restoreView(L).index,Xe=o.\u0275\u0275nextContext(4);return o.\u0275\u0275resetView(Xe.appendRow($e))})("focus",function(Ne){var Xe=o.\u0275\u0275restoreView(L).index,it=o.\u0275\u0275nextContext(2).$implicit,st=o.\u0275\u0275nextContext(2);return o.\u0275\u0275resetView(st.focusCell(Ne,{row:it.length,column:Xe}))}),o.\u0275\u0275elementEnd()}if(2&V){var x=M.index,Y=o.\u0275\u0275nextContext(4);o.\u0275\u0275styleProp("width",Y.columnWidths[x])}}function U(V,M){if(1&V&&(o.\u0275\u0275elementStart(0,"div",28),o.\u0275\u0275template(1,W,2,0,"div",29),o.\u0275\u0275template(2,ee,1,2,"div",30),o.\u0275\u0275elementEnd()),2&V){var L=o.\u0275\u0275nextContext(2).$implicit,x=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",x.rowHeaders),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",L)("ngForTrackBy",x.trackByColumn)}}function Q(V,M){if(1&V){var L=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"cdk-virtual-scroll-viewport",16,17),o.\u0275\u0275listener("scroll",function(){o.\u0275\u0275restoreView(L);var Ne=o.\u0275\u0275nextContext(2);return o.\u0275\u0275resetView(Ne.scroll())}),o.\u0275\u0275template(2,F,3,4,"div",18),o.\u0275\u0275template(3,U,3,3,"div",19),o.\u0275\u0275pipe(4,"async"),o.\u0275\u0275elementEnd()}if(2&V){var x=M.$implicit,Y=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("itemSize",Y.rowHeight),o.\u0275\u0275advance(2),o.\u0275\u0275property("cdkVirtualForOf",x)("cdkVirtualForTrackBy",Y.trackByColumn)("cdkVirtualForTemplateCacheSize",100),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",Y.showAppendRow&&!1===o.\u0275\u0275pipeBind1(4,5,Y.isReadOnly$))}}function B(V,M){if(1&V&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"div",6,7),o.\u0275\u0275template(3,He,2,4,"div",8),o.\u0275\u0275template(4,j,4,15,"div",9),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(5,Q,5,7,"cdk-virtual-scroll-viewport",10),o.\u0275\u0275pipe(6,"async"),o.\u0275\u0275elementContainerEnd()),2&V){var L=M.$implicit,x=o.\u0275\u0275nextContext();o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",x.rowHeaders),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",L)("ngForTrackBy",x.trackByColumn),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",o.\u0275\u0275pipeBind1(6,4,x.rows$))}}function w(V,M){if(1&V&&o.\u0275\u0275element(0,"tri-cell-editor",33),2&V){var x=M.data,Y=M.dataChange,ue=M.focusEditor$;o.\u0275\u0275property("column",M.column)("data",x)("dataChange",Y)("focusEditor$",ue)}}function q(V,M){1&V&&o.\u0275\u0275element(0,"tri-cell",34),2&V&&o.\u0275\u0275property("data",M.data)}function le(V,M){if(1&V&&(o.\u0275\u0275elementStart(0,"span",35),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&V){var L=M.headerName;o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",L," ")}}var de=function(V){function M(L,x,Y,ue,Ne,$e,Xe,it){var st=V.call(this)||this;return st.changeDetector=L,st.cellEditing=x,st.dataSource=Y,st.selectionService=ue,st.mouseEventHandler=Ne,st.keyboardEventHandler=$e,st.clipboardService=Xe,st.resizeService=it,st.columnWidths=[],st.focusEditor$=new a.xQ,st.rowHeight=24,st.isReadOnly$=st.cellEditing.isReadOnly$,st.rowHeaders=!0,st.showAppendRow=!0,st.isReadOnly=!1,st.allowExpandSelection=!0,st.enforceSelectingColumn=!1,st.clearSelectionOnDataChange=!1,st.rowIndexDisplayOffset=0,st.supportRightClickMenu=!1,st.rowsChange=new o.EventEmitter,st.selectionChange=new o.EventEmitter,st.columnWidthChange=new o.EventEmitter,st.showRightClickMenu=new o.EventEmitter,st.columns$=st.dataSource.columns$,st.rows$=st.dataSource.rows$,st}return(0,r.ZT)(M,V),M.prototype.releaseMouse=function(L){this.mouseEventHandler.mouseLeave(L)},M.prototype.ngOnInit=function(){var L=this;this.changes$("isReadOnly").subscribe(function(x){return L.cellEditing.setReadOnly(x)}),this.changes$("columns").subscribe(function(x){L.columnWidths=_.map(x,function(Y){return(_.isFinite(Y.width)?Y.width:50)+"px"}),L.dataSource.setColumns(x),L.clearSelectionOnDataChangeHandler()}),this.changes$("rows").subscribe(function(x){L.dataSource.setRows(x),L.clearSelectionOnDataChangeHandler()}),this.dataSource.rows$.pipe((0,d.R)(this.onDestroy$)).subscribe(function(x){L.rows!==x&&L.rowsChange.emit(x)}),this.dataSource.columns$.pipe((0,d.R)(this.onDestroy$)).subscribe(function(x){L.columnWidths=_.map(x,function(Y){return(_.isFinite(Y.width)?Y.width:50)+"px"})}),this.cellEditing.editingCell$.pipe((0,p.T)(1),(0,d.R)(this.onDestroy$),(0,l.b)(function(x){L.editingCell=x,L.changeDetector.markForCheck()}),(0,c.x)(function(x,Y){return x?.row===Y?.row&&x?.column===Y?.column})).subscribe(function(){L.editingCell?setTimeout(function(){return L.focusEditor$.next()},0):setTimeout(function(){return L.table.nativeElement.focus()},0)}),this.selectionService.enforceSelectingColumn=this.enforceSelectingColumn,this.selectionService.selectedCell$.pipe((0,d.R)(this.onDestroy$),(0,l.b)(function(x){L.selectedCell=x,L.changeDetector.markForCheck()}),(0,y.h)(function(x){return!!x}),(0,c.x)(function(x,Y){return x.row===Y.row&&x.column===Y.column})).subscribe(function(x){var Y,ue,Ne;L.cellEditing.isEditing()&&!L.cellEditing.isEditingCell(x)&&L.cellEditing.commitPendingEdit();var $e=(null===(Y=L.viewport.nativeElement)||void 0===Y?void 0:Y.scrollTop)/L.rowHeight,Xe=$e+(null===(ue=L.viewport.nativeElement)||void 0===ue?void 0:ue.offsetHeight)/L.rowHeight;x.row>=0&&(x.row<$e||x.row>=Xe)&&(null===(Ne=L.viewportComponent)||void 0===Ne||Ne.scrollToIndex(x.row))}),this.selectionService.normalizedSelection$.pipe((0,d.R)(this.onDestroy$)).subscribe(function(x){L.selection=x,L.selectionChange.emit(x),L.changeDetector.markForCheck()}),this.resizeService&&this.resizeService.resize$.pipe((0,d.R)(this.onDestroy$)).subscribe(function(){L.viewportComponent.checkViewportSize()}),this.mouseEventHandler.supportRightClickMenu=this.supportRightClickMenu},M.prototype.ngAfterViewInit=function(){var L=this;this.table.nativeElement.style.setProperty("--row-height",this.rowHeight+"px"),this.keyboardEventHandler.parentElement=this.table.nativeElement,setTimeout(function(){L.changes$("nextSelectionInput").subscribe(function(x){L.scrollToSelectedColumn(x),L.selectionService.setSelection(x)})},0),this.selectionService.virtualScroll=this.viewportComponent},M.prototype.scrollToSelectedColumn=function(L){var x=this;if(L){var Y=0;if(this.nextSelectionInputChangedFromSelection(L)&&this.columns&&this.columnWidths)for(var ue=0;ue<this.columns.length&&ue<=L.start.column-1;ue++)Y+=this.substractWidh(this.columnWidths[ue]);setTimeout(function(){var Ne,$e;(null===(Ne=x.viewport)||void 0===Ne?void 0:Ne.nativeElement.clientWidth)<Y&&(null===($e=x.viewport)||void 0===$e||$e.nativeElement.scroll(Y,0))},300)}},M.prototype.nextSelectionInputChangedFromSelection=function(L){var x,Y,ue,Ne,$e,Xe,it,st;return L.end.column!==(null===(Y=null===(x=this.selection)||void 0===x?void 0:x.end)||void 0===Y?void 0:Y.column)||L.end.row!==(null===(Ne=null===(ue=this.selection)||void 0===ue?void 0:ue.end)||void 0===Ne?void 0:Ne.row)||L.start.row!==(null===(Xe=null===($e=this.selection)||void 0===$e?void 0:$e.start)||void 0===Xe?void 0:Xe.row)||L.start.column!==(null===(st=null===(it=this.selection)||void 0===it?void 0:it.start)||void 0===st?void 0:st.column)},M.prototype.substractWidh=function(L){var x,Y=null===(x=L?.match(/\d+(\.\d+)?/g))||void 0===x?void 0:x.map(Number);return Y?Y[0]:0},M.prototype.flushPendingChanges=function(){var L;return this.cellEditing.commitPendingEdit(),this.rows$.pipe((0,i.q)(1)).subscribe(function(x){return L=x}),L},M.prototype.trackByColumn=function(L){return L},M.prototype.scroll=function(){this.headers.nativeElement.style.transform="translateX(".concat(-this.viewport.nativeElement.scrollLeft,"px)")},M.prototype.onColumnResized=function(L,x){this.columnWidths[x]=L+"px",this.columnWidthChange.emit({width:L,column:x})},M.prototype.onCellMouseDown=function(L){var x=this.getCell();x&&this.mouseEventHandler.mouseDown(L,x,this.allowExpandSelection)},M.prototype.onCellMouseUp=function(L){var x=this.getCell();this.mouseEventHandler.mouseUpInCell(L,x),this.mouseEventHandler.showRightClickMenu&&this.showRightClickMenu.emit({pageX:L.pageX,pageY:L.pageY})},M.prototype.onCellMouseOver=function(L){var x=this.getCell();x&&this.mouseEventHandler.mouseOver(L,x,this.allowExpandSelection)},M.prototype.onCellDoubleClick=function(L){var x=this.getCell();x&&this.mouseEventHandler.doubleClick(L,x)},M.prototype.onEditCellDataChange=function(L){this.cellEditing.setEditingData(L)},M.prototype.focusCell=function(L,x){this.selectionService.setFocus(x,this.table.nativeElement),this.scrollViewportHorizontally(L.target)},Object.defineProperty(M.prototype,"focusedCell",{get:function(){return this.selectionService.focusedCell},enumerable:!1,configurable:!0}),M.prototype.scrollViewportHorizontally=function(L){var x=this.viewport.nativeElement,Y=L.offsetLeft;(x.scrollLeft+x.clientWidth<Y||x.scrollLeft>Y)&&(x.scrollLeft=Y-(x.clientWidth-L.clientWidth)/2,this.viewport.nativeElement.scrollIntoView())},M.prototype.handleKeydown=function(L){this.keyboardEventHandler.keydown(L,this.table.nativeElement,this.allowExpandSelection)},M.prototype.getCell=function(){var L=$("[data-clickable]:hover").get(0);if(L){var x=L.getAttribute("data-row"),Y=L.getAttribute("data-column");if(x&&Y){var ue=parseInt(x,10),Ne=parseInt(Y,10);if(_.isFinite(ue)&&_.isFinite(Ne))return{row:ue,column:Ne}}}},M.prototype.appendRow=function(L){this.dataSource.appendRow(),this.selectionService.selectCell({row:this.dataSource.rows.length,column:L})},M.prototype.clearSelectionOnDataChangeHandler=function(){this.clearSelectionOnDataChange&&this.selectionService.setSelection(void 0)},M.\u0275fac=function(x){return new(x||M)(o.\u0275\u0275directiveInject(o.ChangeDetectorRef),o.\u0275\u0275directiveInject(m),o.\u0275\u0275directiveInject(X),o.\u0275\u0275directiveInject(H),o.\u0275\u0275directiveInject(J),o.\u0275\u0275directiveInject(ye),o.\u0275\u0275directiveInject(G),o.\u0275\u0275directiveInject(N.g,8))},M.\u0275cmp=o.\u0275\u0275defineComponent({type:M,selectors:[["tri-grid"]],viewQuery:function(x,Y){if(1&x&&(o.\u0275\u0275viewQuery(Fe,5),o.\u0275\u0275viewQuery(ze,5),o.\u0275\u0275viewQuery(Ke,5,o.ElementRef),o.\u0275\u0275viewQuery(P.N7,5),o.\u0275\u0275viewQuery(je,5)),2&x){var ue=void 0;o.\u0275\u0275queryRefresh(ue=o.\u0275\u0275loadQuery())&&(Y.headers=ue.first),o.\u0275\u0275queryRefresh(ue=o.\u0275\u0275loadQuery())&&(Y.table=ue.first),o.\u0275\u0275queryRefresh(ue=o.\u0275\u0275loadQuery())&&(Y.viewport=ue.first),o.\u0275\u0275queryRefresh(ue=o.\u0275\u0275loadQuery())&&(Y.viewportComponent=ue.first),o.\u0275\u0275queryRefresh(ue=o.\u0275\u0275loadQuery())&&(Y.cellEditor=ue.first)}},hostBindings:function(x,Y){1&x&&o.\u0275\u0275listener("mouseup",function(Ne){return Y.releaseMouse(Ne)},!1,o.\u0275\u0275resolveWindow)("mouseleave",function(Ne){return Y.releaseMouse(Ne)},!1,o.\u0275\u0275resolveWindow)},inputs:{columns:"columns",rows:"rows",rowHeaders:"rowHeaders",showAppendRow:"showAppendRow",isReadOnly:"isReadOnly",allowExpandSelection:"allowExpandSelection",enforceSelectingColumn:"enforceSelectingColumn",nextSelectionInput:"nextSelectionInput",clearSelectionOnDataChange:"clearSelectionOnDataChange",rowIndexDisplayOffset:"rowIndexDisplayOffset",supportRightClickMenu:"supportRightClickMenu"},outputs:{rowsChange:"rowsChange",selectionChange:"selectionChange",columnWidthChange:"columnWidthChange",showRightClickMenu:"showRightClickMenu"},features:[o.\u0275\u0275ProvidersFeature([H,m,X,J,ye,G]),o.\u0275\u0275InheritDefinitionFeature],decls:10,vars:3,consts:[["tabindex","-1","role","table",1,"table",3,"keydown","mousedown","mouseover","mouseup","dblclick"],["table",""],[4,"ngIf"],["defaultCellEditor",""],["defaultViewCell",""],["defaultHeaderCell",""],["role","row",1,"headers"],["headers",""],["class","header selectable table-icon","role","columnheader","data-clickable","true",3,"tabindex","focus",4,"ngIf"],["class","header selectable","data-clickable","true","role","columnheader",3,"selection-start","tabindex","width","focus",4,"ngFor","ngForOf","ngForTrackBy"],[3,"itemSize","scroll",4,"ngIf"],["role","columnheader","data-clickable","true",1,"header","selectable","table-icon",3,"tabindex","focus"],["tri-svg-icon-20","",1,"table-svg-icon",3,"name"],["data-clickable","true","role","columnheader",1,"header","selectable",3,"tabindex","focus"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["triResizeColumn","",1,"resize-handle",3,"columnResized"],[3,"itemSize","scroll"],["viewport",""],["class","row","role","row",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy","cdkVirtualForTemplateCacheSize"],["class","row","role","row","tabindex","0",4,"ngIf"],["role","row",1,"row"],["class","cell row-header selectable","role","gridcell","tabindex","-1","data-clickable","true",3,"selection-start","focus",4,"ngIf"],["class","cell selectable","role","gridcell","tabindex","-1","data-clickable","true",3,"selected-top","selected-bottom","selected-left","selected-right","selected","selection-start","width","focus",4,"ngFor","ngForOf","ngForTrackBy"],["role","gridcell","tabindex","-1","data-clickable","true",1,"cell","row-header","selectable",3,"focus"],["role","gridcell","tabindex","-1","data-clickable","true",1,"cell","selectable",3,"focus"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf","ngIfElse"],["viewCell",""],["cellEditor",""],["role","row","tabindex","0",1,"row"],["class","cell row-header","role","gridcell","tabindex","-1",3,"mousedown","focus",4,"ngIf"],["tabindex","-1","class","cell","role","gridcell",3,"width","mousedown","focus",4,"ngFor","ngForOf","ngForTrackBy"],["role","gridcell","tabindex","-1",1,"cell","row-header",3,"mousedown","focus"],["tabindex","-1","role","gridcell",1,"cell",3,"mousedown","focus"],[3,"column","data","dataChange","focusEditor$"],[3,"data"],[1,"default-header-name"]],template:function(x,Y){1&x&&(o.\u0275\u0275elementStart(0,"div",0,1),o.\u0275\u0275listener("keydown",function(Ne){return Y.handleKeydown(Ne)})("mousedown",function(Ne){return Y.onCellMouseDown(Ne)})("mouseover",function(Ne){return Y.onCellMouseOver(Ne)})("mouseup",function(Ne){return Y.onCellMouseUp(Ne)})("dblclick",function(Ne){return Y.onCellDoubleClick(Ne)}),o.\u0275\u0275template(2,B,7,6,"ng-container",2),o.\u0275\u0275pipe(3,"async"),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(4,w,1,4,"ng-template",null,3,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275template(6,q,1,1,"ng-template",null,4,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275template(8,le,2,1,"ng-template",null,5,o.\u0275\u0275templateRefExtractor)),2&x&&(o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",o.\u0275\u0275pipeBind1(3,1,Y.columns$)))},dependencies:[he.NgForOf,he.NgIf,he.NgTemplateOutlet,P.xd,P.x0,P.N7,pe.M,ce,fe,Oe,he.AsyncPipe,be],styles:['[_nghost-%COMP%]{height:100%;width:100%;display:flex;background:var(--colorNeutralBackground1);color:var(--colorNeutralForeground1);--row-height: $default-row-height}[_nghost-%COMP%]   *[_ngcontent-%COMP%]{box-sizing:border-box}[_nghost-%COMP%]   *[_ngcontent-%COMP%]:focus{outline:none}cdk-virtual-scroll-viewport[_ngcontent-%COMP%]{overflow-x:auto;height:calc(100% - var(--row-height));position:absolute;top:var(--row-height);bottom:0;width:100%;scrollbar-width:thin}[_ngcontent-%COMP%]::-webkit-scrollbar{width:5px;height:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border:1px solid var(--fluentThemeNeutralSecondaryAltColor, #767676);border-radius:20px;background-color:var(--fluentThemeNeutralSecondaryAltColor, #767676)}.table[_ngcontent-%COMP%]{height:100%;display:flex;position:relative;max-width:100%;overflow-x:hidden;width:max-content;padding-right:5px}.table[_ngcontent-%COMP%]   .headers[_ngcontent-%COMP%]{text-align:start;display:flex;flex-wrap:nowrap;height:var(--row-height);width:100%;border-left:1px solid var(--colorNeutralStroke2)}.table[_ngcontent-%COMP%]   .headers[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:inline-flex;position:relative;min-width:45px;height:var(--row-height);line-height:12px;margin:0;padding:3px 6px;background:var(--colorNeutralBackground2);flex-shrink:0;flex-grow:0;overflow:hidden;border-top:solid 1px var(--colorNeutralStroke2);border-bottom:solid 1px var(--colorNeutralStroke2);border-right:solid 1px var(--colorNeutralStroke2);font-family:var(--fluent-font-family, "Segoe UI");font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-regular, 400)}.table[_ngcontent-%COMP%]   .headers[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .default-header-name[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.table[_ngcontent-%COMP%]   .headers[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .resize-handle[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;opacity:0;width:10px;cursor:col-resize}.table[_ngcontent-%COMP%]   .headers[_ngcontent-%COMP%]   .header.selection-start[_ngcontent-%COMP%]{background:var(--colorNeutralBackground2Selected);border-bottom:2px solid var(--colorNeutralStrokeAccessibleSelected);color:var(--colorNeutralForeground1Selected);font-family:var(--fluent-font-family, "Segoe UI");font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-semi-bold, 600)}@media (forced-colors: active){.table[_ngcontent-%COMP%]   .headers[_ngcontent-%COMP%]   .header.selection-start[_ngcontent-%COMP%]{border-bottom:2px solid var(--globalColorhcHighlight)!important}}.table[_ngcontent-%COMP%]   .headers[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]:focus{border:2px solid var(--colorNeutralStrokeFocus2);border-radius:4px;padding:2px 4px}.table[_ngcontent-%COMP%]   .headers[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]:hover{background:var(--colorNeutralBackground2Hover);color:var(--colorNeutralForeground1Hover)}.table[_ngcontent-%COMP%]   .headers[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]:active{background:var(--colorNeutralBackground2Pressed);color:var(--colorNeutralForeground1Pressed)}.table[_ngcontent-%COMP%]   .headers[_ngcontent-%COMP%]   .header.table-icon[_ngcontent-%COMP%]{justify-content:center;align-items:center}.table[_ngcontent-%COMP%]   .headers[_ngcontent-%COMP%]   .header.table-icon[_ngcontent-%COMP%]:focus{padding:2px 5px 2px 4px}.table[_ngcontent-%COMP%]   .headers[_ngcontent-%COMP%]   .header.table-icon[_ngcontent-%COMP%]   .table-svg-icon[_ngcontent-%COMP%]{fill:var(--colorNeutralForeground2)}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;border-left:solid 1px var(--colorNeutralStroke2)}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .selectable[_ngcontent-%COMP%]:not(.selection-start):focus{border:2px solid var(--colorNeutralStrokeFocus2);border-radius:4px;padding:1.5px 4px}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]{cursor:default;position:relative;display:inline-flex;flex-grow:0;min-width:45px;height:var(--row-height);padding:3.5px 6px;align-items:center;overflow:hidden;border-bottom:solid 1px var(--colorNeutralStroke2);border-right:solid 1px var(--colorNeutralStroke2);background:var(--colorSubtleBackground);outline:none;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;font-family:var(--fluent-font-family, "Segoe UI");font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-regular, 400)}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.number-cell[_ngcontent-%COMP%]{text-align:right}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.row-header[_ngcontent-%COMP%]{background:var(--colorNeutralBackground2);justify-content:center;padding:3px 0 0}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.row-header.selection-start[_ngcontent-%COMP%]{background:var(--colorNeutralBackground2Selected);border-right:2px solid var(--colorNeutralStrokeAccessibleSelected);color:var(--colorNeutralForeground1Selected);font-family:var(--fluent-font-family, "Segoe UI");font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-semi-bold, 600)}@media (forced-colors: active){.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.row-header.selection-start[_ngcontent-%COMP%]{border-right:2px solid var(--globalColorhcHighlight)!important}}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.row-header[_ngcontent-%COMP%]:hover{background:var(--colorNeutralBackground2Hover);color:var(--colorNeutralForeground1Hover)}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.row-header[_ngcontent-%COMP%]:active{background:var(--colorNeutralBackground2Pressed);color:var(--colorNeutralForeground1Pressed)}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.row-header[_ngcontent-%COMP%]:focus{padding:1px 1px 0 0}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.selected[_ngcontent-%COMP%]{background:var(--colorSubtleBackgroundSelected)}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.selected.selected-top[_ngcontent-%COMP%]:not(.selected-bottom){padding-bottom:5px}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.selected.selected-bottom[_ngcontent-%COMP%]:not(.selected-top){padding-top:5px}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.selected.selected-top[_ngcontent-%COMP%]{border-top:2px solid var(--colorNeutralStrokeAccessibleSelected);padding-top:4px}@media (forced-colors: active){.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.selected.selected-top[_ngcontent-%COMP%]{border-top:2px solid var(--globalColorhcHighlight)!important}}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.selected.selected-top[_ngcontent-%COMP%]:before{border-top:1px solid var(--colorNeutralStrokeFocus1);top:0}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.selected.selected-bottom[_ngcontent-%COMP%]{border-bottom:2px solid var(--colorNeutralStrokeAccessibleSelected);padding-bottom:4px}@media (forced-colors: active){.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.selected.selected-bottom[_ngcontent-%COMP%]{border-bottom:2px solid var(--globalColorhcHighlight)!important}}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.selected.selected-bottom[_ngcontent-%COMP%]:before{border-bottom:1px solid var(--colorNeutralStrokeFocus1);bottom:0}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.selected.selected-left[_ngcontent-%COMP%]{border-left:2px solid var(--colorNeutralStrokeAccessibleSelected);padding-left:4px}@media (forced-colors: active){.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.selected.selected-left[_ngcontent-%COMP%]{border-left:2px solid var(--globalColorhcHighlight)!important}}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.selected.selected-left[_ngcontent-%COMP%]:before{border-left:1px solid var(--colorNeutralStrokeFocus1);left:0}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.selected.selected-right[_ngcontent-%COMP%]{border-right:2px solid var(--colorNeutralStrokeAccessibleSelected);padding-right:4px}@media (forced-colors: active){.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.selected.selected-right[_ngcontent-%COMP%]{border-right:2px solid var(--globalColorhcHighlight)!important}}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell.selected.selected-right[_ngcontent-%COMP%]:before{border-right:1px solid var(--colorNeutralStrokeFocus1);right:0}'],changeDetection:0}),M}(C.w)},11962:function(lt,Ge,t){"use strict";t.d(Ge,{oY:function(){return d.o},V7:function(){return y}});var r=t(17174),o=t(77476),P=t(21661),a=t(78035),d=t(23873),p=t(17177),l=t(50423),y=function(){function C(){}return C.\u0275fac=function(k){return new(k||C)},C.\u0275mod=l.\u0275\u0275defineNgModule({type:C}),C.\u0275inj=l.\u0275\u0275defineInjector({imports:[o.CommonModule,r.u5,a.Y,P.Cl,p.T6]}),C}();t(81900)},81900:function(lt,Ge,t){"use strict";t.d(Ge,{g:function(){return o}});var o=new(t(50423).InjectionToken)("ResizeService")},16622:function(lt,Ge,t){"use strict";t.d(Ge,{_:function(){return d},u:function(){return p}});var r=t(35510),o=t(17177),P=t(16434),a=t(50423),d=function(){function l(){}return l.prototype.getSvgSpriteSheet=function(c){return new r.X('\n            <svg id="'.concat(c,'">\n                <?xml version="1.0" encoding="utf-8"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><symbol viewBox="0 0 20 20" id="add_circle_20_filled" xmlns="http://www.w3.org/2000/svg"><path d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zM6 10c0 .28.22.5.5.5h3v3a.5.5 0 001 0v-3h3a.5.5 0 000-1h-3v-3a.5.5 0 00-1 0v3h-3a.5.5 0 00-.5.5z"/></symbol><symbol viewBox="0 0 20 20" id="add_circle_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M6 10c0-.28.22-.5.5-.5h3v-3a.5.5 0 011 0v3h3a.5.5 0 010 1h-3v3a.5.5 0 01-1 0v-3h-3A.5.5 0 016 10z"/><path d="M10 18a8 8 0 100-16 8 8 0 000 16zm0-1a7 7 0 110-14 7 7 0 010 14z"/></symbol><symbol viewBox="0 0 20 20" id="alert_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a5.92 5.92 0 015.98 5.36l.02.22v3.82l.92 2.22a1 1 0 01.06.17l.01.08.01.13a1 1 0 01-.75.97l-.11.02L16 15h-3.5v.17a2.5 2.5 0 01-5 0V15H4a1 1 0 01-.26-.03l-.13-.04a1 1 0 01-.6-1.05l.02-.13.05-.13L4 11.4V7.57A5.9 5.9 0 0110 2zm1.5 13h-3v.15a1.5 1.5 0 001.36 1.34l.14.01c.78 0 1.42-.6 1.5-1.36V15zM10 3a4.9 4.9 0 00-4.98 4.38L5 7.6v3.9l-.04.2L4 14h12l-.96-2.3-.04-.2V7.61A4.9 4.9 0 0010 3z"/></symbol><symbol viewBox="0 0 20 20" id="book_open_20_filled" xmlns="http://www.w3.org/2000/svg"><path d="M10 16.14c-.5.53-1.21.86-2 .86H3.75C2.78 17 2 16.22 2 15.25V4.75C2 3.78 2.78 3 3.75 3H8c.79 0 1.5.33 2 .86.5-.53 1.21-.86 2-.86h4.25c.97 0 1.75.78 1.75 1.75v10.5c0 .97-.78 1.75-1.75 1.75H12c-.79 0-1.5-.33-2-.86zM3.5 4.75v10.5c0 .14.11.25.25.25H8c.69 0 1.25-.56 1.25-1.25v-8.5c0-.69-.56-1.25-1.25-1.25H3.75a.25.25 0 00-.25.25zm7.25 9.5c0 .69.56 1.25 1.25 1.25h4.25c.14 0 .25-.11.25-.25V4.75a.25.25 0 00-.25-.25H12c-.69 0-1.25.56-1.25 1.25v8.5z"/></symbol><symbol viewBox="0 0 20 20" id="book_open_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M10 16c-.46.6-1.18 1-2 1H3.5A1.5 1.5 0 012 15.5v-11C2 3.67 2.67 3 3.5 3H8c.82 0 1.54.4 2 1 .46-.6 1.18-1 2-1h4.5c.83 0 1.5.67 1.5 1.5v11c0 .83-.67 1.5-1.5 1.5H12a2.5 2.5 0 01-2-1zM3 4.5v11c0 .28.22.5.5.5H8c.83 0 1.5-.67 1.5-1.5v-9C9.5 4.67 8.83 4 8 4H3.5a.5.5 0 00-.5.5zm7.5 10c0 .83.67 1.5 1.5 1.5h4.5a.5.5 0 00.5-.5v-11a.5.5 0 00-.5-.5H12c-.83 0-1.5.67-1.5 1.5v9z"/></symbol><symbol viewBox="0 0 20 20" id="checkbox_checked_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M13.85 7.85a.5.5 0 00-.7-.7L8.5 11.79l-1.65-1.64a.5.5 0 00-.7.7l2 2c.2.2.5.2.7 0l5-5z"/><path d="M5.68 3A2.68 2.68 0 003 5.68v8.64C3 15.8 4.2 17 5.68 17h8.64C15.8 17 17 15.8 17 14.32V5.68C17 4.2 15.8 3 14.32 3H5.68zM4 5.68C4 4.75 4.75 4 5.68 4h8.64c.93 0 1.68.75 1.68 1.68v8.64c0 .93-.75 1.68-1.68 1.68H5.68C4.75 16 4 15.25 4 14.32V5.68z"/></symbol><symbol viewBox="0 0 20 20" id="checkbox_unchecked_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M3 5c0-1.1.9-2 2-2h10a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2V5zm2-1a1 1 0 00-1 1v10a1 1 0 001 1h10a1 1 0 001-1V5a1 1 0 00-1-1H5z"/></symbol><symbol viewBox="0 0 20 20" id="checkmark_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M3.37 10.17a.5.5 0 00-.74.66l4 4.5c.19.22.52.23.72.02l10.5-10.5a.5.5 0 00-.7-.7L7.02 14.27l-3.65-4.1z"/></symbol><symbol viewBox="0 0 20 20" id="chevron_down_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M15.85 7.65c.2.2.2.5 0 .7l-5.46 5.49a.55.55 0 01-.78 0L4.14 8.35a.5.5 0 11.71-.7L10 12.8l5.15-5.16c.2-.2.5-.2.7 0z"/></symbol><symbol viewBox="0 0 20 20" id="chevron_left_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M12.35 15.85a.5.5 0 01-.7 0L6.16 10.4a.55.55 0 010-.78l5.49-5.47a.5.5 0 01.7.71L7.2 10l5.16 5.15c.2.2.2.5 0 .7z"/></symbol><symbol viewBox="0 0 20 20" id="chevron_right_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M7.65 4.15c.2-.2.5-.2.7 0l5.49 5.46c.21.22.21.57 0 .78l-5.49 5.46a.5.5 0 01-.7-.7L12.8 10 7.65 4.85a.5.5 0 010-.7z"/></symbol><symbol viewBox="0 0 20 20" id="chevron_up_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M4.15 12.35a.5.5 0 010-.7L9.6 6.16a.55.55 0 01.78 0l5.46 5.49a.5.5 0 01-.7.7L10 7.2l-5.15 5.16a.5.5 0 01-.7 0z"/></symbol><symbol viewBox="0 0 16 16" id="circle_16_filled" xmlns="http://www.w3.org/2000/svg"><path d="M8 14A6 6 0 108 2a6 6 0 000 12z"/></symbol><symbol viewBox="0 0 16 16" id="circle_16_regular" xmlns="http://www.w3.org/2000/svg"><path d="M8 14A6 6 0 108 2a6 6 0 000 12zm0-1A5 5 0 118 3a5 5 0 010 10z"/></symbol><symbol viewBox="0 0 20 20" id="circle_20_filled" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a8 8 0 100 16 8 8 0 000-16z"/></symbol><symbol viewBox="0 0 20 20" id="circle_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M10 3a7 7 0 100 14 7 7 0 000-14zm-8 7a8 8 0 1116 0 8 8 0 01-16 0z"/></symbol><symbol viewBox="0 0 20 20" id="clock_20_filled" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a8 8 0 110 16 8 8 0 010-16zm-.5 3a.5.5 0 00-.5.5v5.09a.5.5 0 00.5.41h3.09a.5.5 0 00-.09-1H10V5.41A.5.5 0 009.5 5z"/></symbol><symbol viewBox="0 0 20 20" id="clock_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a8 8 0 110 16 8 8 0 010-16zm0 1a7 7 0 100 14 7 7 0 000-14zm-.5 2a.5.5 0 01.5.41V10h2.5a.5.5 0 01.09 1H9.5a.5.5 0 01-.5-.41V5.5c0-.28.22-.5.5-.5z"/></symbol><symbol viewBox="0 0 20 20" id="database_20_filled" xmlns="http://www.w3.org/2000/svg"><path d="M10 8c3.31 0 6-1.34 6-3s-2.69-3-6-3-6 1.34-6 3 2.69 3 6 3zm4.69.02c.47-.24.93-.54 1.31-.9V15c0 1.66-2.69 3-6 3s-6-1.34-6-3V7.12c.38.36.84.66 1.31.9C6.56 8.64 8.22 9 10 9c1.78 0 3.44-.36 4.69-.98z"/></symbol><symbol viewBox="0 0 20 20" id="database_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M4 5c0-1 .88-1.76 1.9-2.22C6.98 2.28 8.43 2 10 2c1.57 0 3.02.29 4.1.78C15.12 3.24 16 3.99 16 5v10c0 1-.88 1.76-1.9 2.22-1.08.5-2.53.78-4.1.78-1.57 0-3.02-.29-4.1-.78C4.88 16.76 4 16.01 4 15V5zm1 0c0 .37.36.88 1.32 1.31.91.42 2.22.69 3.68.69s2.77-.27 3.68-.69C14.64 5.88 15 5.37 15 5c0-.37-.36-.88-1.32-1.31A9.19 9.19 0 0010 3c-1.46 0-2.77.27-3.68.69C5.36 4.12 5 4.63 5 5zm10 1.7c-.27.2-.58.38-.9.52-1.08.5-2.53.78-4.1.78-1.57 0-3.02-.29-4.1-.78A4.92 4.92 0 015 6.7V15c0 .37.36.88 1.32 1.31.91.42 2.22.69 3.68.69s2.77-.27 3.68-.69c.96-.43 1.32-.94 1.32-1.31V6.7z"/></symbol><symbol viewBox="0 0 16 16" id="document_16_regular" xmlns="http://www.w3.org/2000/svg"><path d="M5 1a2 2 0 00-2 2v10c0 1.1.9 2 2 2h6a2 2 0 002-2V5.41c0-.4-.16-.78-.44-1.06L9.65 1.44A1.5 1.5 0 008.59 1H5zM4 3a1 1 0 011-1h3v2.5C8 5.33 8.67 6 9.5 6H12v7a1 1 0 01-1 1H5a1 1 0 01-1-1V3zm7.8 2H9.5a.5.5 0 01-.5-.5V2.2L11.8 5z"/></symbol><symbol viewBox="0 0 20 20" id="filter_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M7.5 13h5a.5.5 0 01.09 1H7.5a.5.5 0 01-.09-1h5.09-5zm-2-4h9a.5.5 0 01.09 1H5.5a.5.5 0 01-.09-1h9.09-9zm-2-4h13a.5.5 0 01.09 1H3.5a.5.5 0 01-.09-1H16.5h-13z"/></symbol><symbol viewBox="0 0 20 20" id="folder_20_filled" xmlns="http://www.w3.org/2000/svg"><path d="M10.56 4.5h4.94a2.5 2.5 0 012.48 2.17l.01.17L18 7v7.5a2.5 2.5 0 01-2.34 2.5H4.5A2.5 2.5 0 012 14.66V7.5h5.22c.3-.04.6-.16.83-.36l.1-.1 2.41-2.54zM7.16 3c.28 0 .54.07.77.21l.14.09 1.31.99-1.95 2.05-.06.06a.5.5 0 01-.22.1H2v-1A2.5 2.5 0 014.34 3h2.83z"/></symbol><symbol viewBox="0 0 20 20" id="folder_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M7.17 3c.27 0 .53.07.76.21l.14.09 1.6 1.2h5.83a2.5 2.5 0 012.48 2.17l.01.17L18 7v7.5a2.5 2.5 0 01-2.34 2.5H4.5A2.5 2.5 0 012 14.66V5.5A2.5 2.5 0 014.34 3h2.83zm.99 4.03a1.5 1.5 0 01-.94.46l-.15.01H3v7c0 .78.6 1.42 1.36 1.5H15.5c.78 0 1.42-.6 1.5-1.36V7c0-.78-.6-1.42-1.36-1.5H9.62L8.16 7.03zM7.16 4H4.5c-.78 0-1.42.6-1.5 1.36V6.5h4.07a.5.5 0 00.3-.1l.06-.06L8.7 5.02 7.47 4.1a.5.5 0 00-.22-.1h-.08z"/></symbol><symbol viewBox="0 0 20 20" id="grid_dots_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M5.25 4a1.25 1.25 0 11-2.5 0 1.25 1.25 0 012.5 0zm12 12a1.25 1.25 0 11-2.5 0 1.25 1.25 0 012.5 0zM16 11.25a1.25 1.25 0 100-2.5 1.25 1.25 0 000 2.5zM17.25 4a1.25 1.25 0 11-2.5 0 1.25 1.25 0 012.5 0zM10 17.25a1.25 1.25 0 100-2.5 1.25 1.25 0 000 2.5zM11.25 10a1.25 1.25 0 11-2.5 0 1.25 1.25 0 012.5 0zM10 5.25a1.25 1.25 0 100-2.5 1.25 1.25 0 000 2.5zM5.25 16a1.25 1.25 0 11-2.5 0 1.25 1.25 0 012.5 0zM4 11.25a1.25 1.25 0 100-2.5 1.25 1.25 0 000 2.5z"/></symbol><symbol viewBox="0 0 20 20" id="home_20_filled" xmlns="http://www.w3.org/2000/svg"><path d="M11 2.39a1.5 1.5 0 00-2 0L3.5 7.33c-.32.28-.5.69-.5 1.12v7.05c0 .83.67 1.5 1.5 1.5h2c.83 0 1.5-.67 1.5-1.5v-4c0-.28.22-.5.5-.5h3c.28 0 .5.22.5.5v4c0 .83.67 1.5 1.5 1.5h2c.83 0 1.5-.67 1.5-1.5V8.45c0-.43-.18-.84-.5-1.12L11 2.39z"/></symbol><symbol viewBox="0 0 20 20" id="home_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M9 2.39a1.5 1.5 0 012 0l5.5 4.94c.32.28.5.69.5 1.12v7.05c0 .83-.67 1.5-1.5 1.5H13a1.5 1.5 0 01-1.5-1.5V12a.5.5 0 00-.5-.5H9a.5.5 0 00-.5.5v3.5c0 .83-.67 1.5-1.5 1.5H4.5A1.5 1.5 0 013 15.5V8.45c0-.43.18-.84.5-1.12L9 2.39zm1.33.74a.5.5 0 00-.66 0l-5.5 4.94a.5.5 0 00-.17.38v7.05c0 .28.22.5.5.5H7a.5.5 0 00.5-.5V12c0-.83.67-1.5 1.5-1.5h2c.83 0 1.5.67 1.5 1.5v3.5c0 .28.22.5.5.5h2.5a.5.5 0 00.5-.5V8.45a.5.5 0 00-.17-.38l-5.5-4.94z"/></symbol><symbol viewBox="0 0 20 20" id="megaphone_loud_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M14.16 1.03c.26.08.4.37.31.63l-.5 1.5a.5.5 0 01-.94-.32l.5-1.5a.5.5 0 01.63-.31zm3.7 1.82a.5.5 0 10-.71-.7l-2 2a.5.5 0 00.7.7l2-2zm-10.25.3a2 2 0 013.26-.52l6.58 6.98a2 2 0 01-.64 3.2l-3.94 1.74a3.5 3.5 0 01-6.34 2.8l-1.2.52a1.5 1.5 0 01-1.67-.3l-1.22-1.22a1.5 1.5 0 01-.3-1.7l5.47-11.5zm-.16 13.78a2.5 2.5 0 004.5-1.97l-4.5 1.97zm2.7-13.61a1 1 0 00-1.64.25l-5.46 11.5a.5.5 0 00.1.57l1.22 1.21a.5.5 0 00.55.1L16.4 11.9a1 1 0 00.33-1.6l-6.59-6.98zM17 6a.5.5 0 000 1h1.5a.5.5 0 100-1H17z"/></symbol><symbol viewBox="0 0 16 16" id="pause_16_regular" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 2C2.67 2 2 2.67 2 3.5v9c0 .83.67 1.5 1.5 1.5h2c.83 0 1.5-.67 1.5-1.5v-9C7 2.67 6.33 2 5.5 2h-2zm0 1h2c.28 0 .5.22.5.5v9a.5.5 0 01-.5.5h-2a.5.5 0 01-.5-.5v-9c0-.28.22-.5.5-.5zM10.5 2C9.67 2 9 2.67 9 3.5v9c0 .83.67 1.5 1.5 1.5h2c.83 0 1.5-.67 1.5-1.5v-9c0-.83-.67-1.5-1.5-1.5h-2zm0 1h2c.28 0 .5.22.5.5v9a.5.5 0 01-.5.5h-2a.5.5 0 01-.5-.5v-9c0-.28.22-.5.5-.5z"/></symbol><symbol viewBox="0 0 20 20" id="people_20_filled" xmlns="http://www.w3.org/2000/svg"><path d="M11 10a2 2 0 012 2v1.5c0 2.05-2.09 3.5-5.5 3.5S2 15.55 2 13.5V12c0-1.1.9-2 2-2h7zm5 0a2 2 0 012 2v.5c0 2.09-1.57 3.5-4.5 3.5l-.41-.01c.54-.63.85-1.39.9-2.25l.01-.24V12c0-.7-.23-1.33-.63-1.84l-.13-.16H16zM7.5 2a3.5 3.5 0 110 7 3.5 3.5 0 010-7zm7 2a2.5 2.5 0 110 5 2.5 2.5 0 010-5z"/></symbol><symbol viewBox="0 0 20 20" id="people_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M11 10a2 2 0 012 2v1.5c0 2.05-2.09 3.5-5.5 3.5S2 15.55 2 13.5V12c0-1.1.9-2 2-2h7zm0 1H4a1 1 0 00-1 1v1.5C3 14.9 4.58 16 7.5 16s4.5-1.1 4.5-2.5V12a1 1 0 00-1-1zm5-1a2 2 0 012 2v.5c0 2.09-1.57 3.5-4.5 3.5l-.41-.01c.2-.24.38-.5.52-.78l.1-.21h.03c2.24-.07 3.26-1.04 3.26-2.5V12a1 1 0 00-1-1h-2.17a3 3 0 00-.6-1H16zM7.5 2a3.5 3.5 0 110 7 3.5 3.5 0 010-7zm7 2a2.5 2.5 0 110 5 2.5 2.5 0 010-5zm-7-1a2.5 2.5 0 100 5 2.5 2.5 0 000-5zm7 2a1.5 1.5 0 100 3 1.5 1.5 0 000-3z"/></symbol><symbol viewBox="0 0 16 16" id="play_16_regular" xmlns="http://www.w3.org/2000/svg"><path d="M5.75 3.06A.5.5 0 005 3.5v9c0 .38.41.62.75.44l8-4.5a.5.5 0 000-.88l-8-4.5zM4 3.5a1.5 1.5 0 012.24-1.3l8 4.5a1.5 1.5 0 010 2.6l-8 4.5A1.5 1.5 0 014 12.5v-9z"/></symbol><symbol viewBox="0 0 20 20" id="premium_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M5.5 3a.5.5 0 00-.43.24l-3 5a.5.5 0 00.05.58l7.5 9a.5.5 0 00.76 0l7.5-9a.5.5 0 00.05-.58l-3-5A.5.5 0 0014.5 3h-9zM3.38 8l2.4-4h1.98l-1.6 4H3.38zm2.78 1l2.26 5.83L3.57 9h2.59zM10 16.12L7.23 9h5.54L10 16.12zM7.24 8l1.6-4h2.32l1.6 4H7.24zm6.6 0l-1.6-4h1.98l2.4 4h-2.78zm0 1h2.6l-4.86 5.83L13.84 9z"/></symbol><symbol viewBox="0 0 20 20" id="premium_person_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M5.5 3a.5.5 0 00-.43.24l-3 5a.5.5 0 00.05.58l7.49 9a.5.5 0 00.86-.13L13.84 9h3.9l.14-.18a.5.5 0 00.05-.58l-3-5A.5.5 0 0014.5 3h-9zm7.27 6L10 16.12 7.23 9h5.54zM3.38 8l2.4-4h1.98l-1.6 4H3.38zm2.78 1l2.26 5.83L3.57 9h2.59zm1.08-1l1.6-4h2.32l1.6 4H7.24zm6.6 0l-1.6-4h1.98l2.4 4h-2.78zm1.66 6a2 2 0 100-4 2 2 0 000 4zm0 5c2.5 0 3.5-1.25 3.5-2.5 0-.83-.67-1.5-1.5-1.5h-4c-.83 0-1.5.67-1.5 1.5 0 1.25 1 2.5 3.5 2.5z"/></symbol><symbol viewBox="0 0 20 20" id="question_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M10 3a4 4 0 00-4 4 .5.5 0 001 0 3 3 0 016 0c0 1.25-.7 1.86-1.58 2.62l-.03.03c-.86.73-1.89 1.62-1.89 3.35v.5a.5.5 0 001 0V13c0-1.25.7-1.86 1.58-2.62l.03-.03C12.97 9.62 14 8.73 14 7a4 4 0 00-4-4zM10 17a.75.75 0 100-1.5.75.75 0 000 1.5z"/></symbol><symbol viewBox="0 0 20 20" id="search_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M8.5 3a5.5 5.5 0 014.23 9.02l4.12 4.13a.5.5 0 01-.63.76l-.07-.06-4.13-4.12A5.5 5.5 0 118.5 3zm0 1a4.5 4.5 0 100 9 4.5 4.5 0 000-9z"/></symbol><symbol viewBox="0 0 20 20" id="settings_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M1.91 7.38A8.5 8.5 0 013.7 4.3a.5.5 0 01.54-.13l1.92.68a1 1 0 001.32-.76l.36-2a.5.5 0 01.4-.4 8.53 8.53 0 013.55 0c.2.04.35.2.38.4l.37 2a1 1 0 001.32.76l1.92-.68a.5.5 0 01.54.13 8.5 8.5 0 011.78 3.08c.06.2 0 .4-.15.54l-1.56 1.32a1 1 0 000 1.52l1.56 1.32a.5.5 0 01.15.54 8.5 8.5 0 01-1.78 3.08.5.5 0 01-.54.13l-1.92-.68a1 1 0 00-1.32.76l-.37 2a.5.5 0 01-.38.4 8.53 8.53 0 01-3.56 0 .5.5 0 01-.39-.4l-.36-2a1 1 0 00-1.32-.76l-1.92.68a.5.5 0 01-.54-.13 8.5 8.5 0 01-1.78-3.08.5.5 0 01.15-.54l1.56-1.32a1 1 0 000-1.52L2.06 7.92a.5.5 0 01-.15-.54zm1.06 0l1.3 1.1a2 2 0 010 3.04l-1.3 1.1c.3.79.71 1.51 1.25 2.16l1.6-.58a2 2 0 012.63 1.53l.3 1.67a7.56 7.56 0 002.5 0l.3-1.67a2 2 0 012.64-1.53l1.6.58a7.5 7.5 0 001.24-2.16l-1.3-1.1a2 2 0 010-3.04l1.3-1.1a7.5 7.5 0 00-1.25-2.16l-1.6.58a2 2 0 01-2.63-1.53l-.3-1.67a7.55 7.55 0 00-2.5 0l-.3 1.67A2 2 0 015.81 5.8l-1.6-.58a7.5 7.5 0 00-1.24 2.16zM7.5 10a2.5 2.5 0 115 0 2.5 2.5 0 01-5 0zm1 0a1.5 1.5 0 103 0 1.5 1.5 0 00-3 0z"/></symbol><symbol viewBox="0 0 20 20" id="stack_20_filled" xmlns="http://www.w3.org/2000/svg"><path d="M4 3a2 2 0 00-2 2v6c0 1.1.9 2 2 2h8a2 2 0 002-2V5a2 2 0 00-2-2H4zm.27 11c.34.6.99 1 1.73 1h6a4 4 0 004-4V7a2 2 0 00-1-1.73V11a3 3 0 01-3 3H4.27zm2 2c.34.6.99 1 1.73 1h4a6 6 0 006-6V9a2 2 0 00-1-1.73V11a5 5 0 01-5 5H6.27z"/></symbol><symbol viewBox="0 0 20 20" id="stack_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M2 5c0-1.1.9-2 2-2h8a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V5zm2-1a1 1 0 00-1 1v6a1 1 0 001 1h8a1 1 0 001-1V5a1 1 0 00-1-1H4zm2 11a2 2 0 01-1.73-1H12a3 3 0 003-3V5.27c.6.34 1 .99 1 1.73v4a4 4 0 01-4 4H6zm2 2a2 2 0 01-1.73-1H12a5 5 0 005-5V7.27c.6.34 1 .99 1 1.73v2a6 6 0 01-6 6H8z"/></symbol><symbol viewBox="0 0 20 20" id="star_20_filled" xmlns="http://www.w3.org/2000/svg"><path d="M9.1 2.9a1 1 0 011.8 0l1.93 3.91 4.31.63a1 1 0 01.56 1.7l-3.12 3.05.73 4.3a1 1 0 01-1.45 1.05L10 15.51l-3.86 2.03a1 1 0 01-1.45-1.05l.74-4.3L2.3 9.14a1 1 0 01.56-1.7l4.31-.63L9.1 2.9z"/></symbol><symbol viewBox="0 0 20 20" id="star_20_regular" xmlns="http://www.w3.org/2000/svg"><path d="M9.1 2.9a1 1 0 011.8 0l1.93 3.91 4.31.63a1 1 0 01.56 1.7l-3.12 3.05.73 4.3a1 1 0 01-1.45 1.05L10 15.51l-3.86 2.03a1 1 0 01-1.45-1.05l.74-4.3L2.3 9.14a1 1 0 01.56-1.7l4.31-.63L9.1 2.9zm.9.44L8.07 7.25a1 1 0 01-.75.55L3 8.43l3.12 3.04a1 1 0 01.3.89l-.75 4.3 3.87-2.03a1 1 0 01.93 0l3.86 2.03-.74-4.3a1 1 0 01.29-.89L17 8.43l-4.32-.63a1 1 0 01-.75-.55L10 3.35z"/></symbol></svg>\n            </svg>\n        '))},l.prototype.getSvgSpriteUrl=function(c){return"/images/".concat(c,".svg")},l.\u0275prov=a.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac=function(y){return new(y||l)},providedIn:"root"}),l}(),p=function(){function l(){}return l.\u0275fac=function(y){return new(y||l)},l.\u0275mod=a.\u0275\u0275defineNgModule({type:l}),l.\u0275inj=a.\u0275\u0275defineInjector({providers:[{provide:P.E,useClass:d}],imports:[o.T6]}),l}()},54241:function(lt,Ge,t){"use strict";t.d(Ge,{Mz:function(){return Ue},VI:function(){return Q},g8:function(){return W},q5:function(){return h},zp:function(){return U}});var pe,ce,ge,se,De,fe,Oe,r=t(62661),o=t(90341),P=t(37419),a=t(50423),d=t(48138),p=t(77476),l=t(21661),c=t(59051),y=t(51193),i=t(4437),C=t(10519),v=t(26124),k=t(34763),E=t(30794),s=t(48636),ne=t(63057),te=t(59787),X=t(11547),m=t(93247),O=t(22760),I=t(17174),H=t(60733),G=t(22318),Z=t(81905),ie=t(48787),ye=t(59973),ae=t(17653),J=t(70032),N=t(14172),he=t(94130),be=["panel"];function Fe(q,le){if(1&q){var de=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",0,1),a.\u0275\u0275listener("@panelAnimation.done",function(x){a.\u0275\u0275restoreView(de);var Y=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(Y._animationDone.next(x))}),a.\u0275\u0275projection(2),a.\u0275\u0275elementEnd()}if(2&q){var V=le.id,M=a.\u0275\u0275nextContext();a.\u0275\u0275property("id",M.id)("ngClass",M._classList)("@panelAnimation",M.isOpen?"visible":"hidden"),a.\u0275\u0275attribute("aria-label",M.ariaLabel||null)("aria-labelledby",M._getPanelAriaLabelledby(V))}}var Ke=(0,v.X$)("panelAnimation",[(0,v.SB)("void, hidden",(0,v.oB)({opacity:0,transform:"scaleY(0.8)"})),(0,v.eR)(":enter, hidden => visible",[(0,v.ru)([(0,v.jt)("0.03s linear",(0,v.oB)({opacity:1})),(0,v.jt)("0.12s cubic-bezier(0, 0, 0.2, 1)",(0,v.oB)({transform:"scaleY(1)"}))])]),(0,v.eR)(":leave, visible => hidden",[(0,v.jt)("0.075s linear",(0,v.oB)({opacity:0}))])]),je=0,He=function(le,de){this.source=le,this.option=de},Je=(0,d.Kr)(function(){return function(){}}()),j=new a.InjectionToken("mat-autocomplete-default-options",{providedIn:"root",factory:function(){return{autoActiveFirstOption:!1,autoSelectActiveOption:!1,hideSingleSelectionIndicator:!1,requireSelection:!1}}}),Ue=function(q){(0,P.Z)(de,q);var le=de.prototype;function de(V,M,L,x){var Y;return(Y=q.call(this)||this)._changeDetectorRef=V,Y._elementRef=M,Y._defaults=L,Y._activeOptionChanges=k.w.EMPTY,Y.showPanel=!1,Y._isOpen=!1,Y.displayWith=null,Y.optionSelected=new a.EventEmitter,Y.opened=new a.EventEmitter,Y.closed=new a.EventEmitter,Y.optionActivated=new a.EventEmitter,Y._classList={},Y.id="mat-autocomplete-"+je++,Y.inertGroups=x?.SAFARI||!1,Y._autoActiveFirstOption=!!L.autoActiveFirstOption,Y._autoSelectActiveOption=!!L.autoSelectActiveOption,Y._requireSelection=!!L.requireSelection,Y}return le._setColor=function(M){this._color=M,this._setThemeClasses(this._classList)},le.ngAfterContentInit=function(){var M=this;this._keyManager=new y.s1(this.options).withWrap().skipPredicate(this._skipPredicate),this._activeOptionChanges=this._keyManager.change.subscribe(function(L){M.isOpen&&M.optionActivated.emit({source:M,option:M.options.toArray()[L]||null})}),this._setVisibility()},le.ngOnDestroy=function(){var M;null==(M=this._keyManager)||M.destroy(),this._activeOptionChanges.unsubscribe()},le._setScrollTop=function(M){this.panel&&(this.panel.nativeElement.scrollTop=M)},le._getScrollTop=function(){return this.panel?this.panel.nativeElement.scrollTop:0},le._setVisibility=function(){this.showPanel=!!this.options.length,this._setVisibilityClasses(this._classList),this._changeDetectorRef.markForCheck()},le._emitSelectEvent=function(M){var L=new He(this,M);this.optionSelected.emit(L)},le._getPanelAriaLabelledby=function(M){return this.ariaLabel?null:this.ariaLabelledby?(M?M+" ":"")+this.ariaLabelledby:M},le._setVisibilityClasses=function(M){M[this._visibleClass]=this.showPanel,M[this._hiddenClass]=!this.showPanel},le._setThemeClasses=function(M){M["mat-primary"]="primary"===this._color,M["mat-warn"]="warn"===this._color,M["mat-accent"]="accent"===this._color},le._skipPredicate=function(M){return M.disabled},(0,o.Z)(de,[{key:"isOpen",get:function(){return this._isOpen&&this.showPanel}},{key:"autoActiveFirstOption",get:function(){return this._autoActiveFirstOption},set:function(M){this._autoActiveFirstOption=(0,i.Ig)(M)}},{key:"autoSelectActiveOption",get:function(){return this._autoSelectActiveOption},set:function(M){this._autoSelectActiveOption=(0,i.Ig)(M)}},{key:"requireSelection",get:function(){return this._requireSelection},set:function(M){this._requireSelection=(0,i.Ig)(M)}},{key:"classList",set:function(M){this._classList=M&&M.length?(0,i.du)(M).reduce(function(L,x){return L[x]=!0,L},{}):{},this._setVisibilityClasses(this._classList),this._setThemeClasses(this._classList),this._elementRef.nativeElement.className=""}}]),de}(Je);(pe=Ue).\u0275fac=function(le){return new(le||pe)(a.\u0275\u0275directiveInject(a.ChangeDetectorRef),a.\u0275\u0275directiveInject(a.ElementRef),a.\u0275\u0275directiveInject(j),a.\u0275\u0275directiveInject(C.t4))},pe.\u0275dir=a.\u0275\u0275defineDirective({type:pe,viewQuery:function(le,de){var V;1&le&&(a.\u0275\u0275viewQuery(a.TemplateRef,7),a.\u0275\u0275viewQuery(be,5)),2&le&&(a.\u0275\u0275queryRefresh(V=a.\u0275\u0275loadQuery())&&(de.template=V.first),a.\u0275\u0275queryRefresh(V=a.\u0275\u0275loadQuery())&&(de.panel=V.first))},inputs:{ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],displayWith:"displayWith",autoActiveFirstOption:"autoActiveFirstOption",autoSelectActiveOption:"autoSelectActiveOption",requireSelection:"requireSelection",panelWidth:"panelWidth",classList:["class","classList"]},outputs:{optionSelected:"optionSelected",opened:"opened",closed:"closed",optionActivated:"optionActivated"},features:[a.\u0275\u0275InheritDefinitionFeature]});var oe=function(q){function le(){var V,M;return(M=q.apply(this,arguments)||this)._visibleClass="mat-mdc-autocomplete-visible",M._hiddenClass="mat-mdc-autocomplete-hidden",M._animationDone=new a.EventEmitter,M._hideSingleSelectionIndicator=null!=(V=M._defaults.hideSingleSelectionIndicator)&&V,M}(0,P.Z)(le,q);var de=le.prototype;return de._syncParentProperties=function(){if(this.options)for(var L,M=(0,r.Z)(this.options);!(L=M()).done;)L.value._changeDetectorRef.markForCheck()},de.ngOnDestroy=function(){q.prototype.ngOnDestroy.call(this),this._animationDone.complete()},de._skipPredicate=function(M){return!1},(0,o.Z)(le,[{key:"hideSingleSelectionIndicator",get:function(){return this._hideSingleSelectionIndicator},set:function(M){this._hideSingleSelectionIndicator=(0,i.Ig)(M),this._syncParentProperties()}}]),le}(Ue);(ce=oe).\u0275fac=function(){var q;return function(de){return(q||(q=a.\u0275\u0275getInheritedFactory(ce)))(de||ce)}}(),ce.\u0275cmp=a.\u0275\u0275defineComponent({type:ce,selectors:[["mat-autocomplete"]],contentQueries:function(le,de,V){var M;1&le&&(a.\u0275\u0275contentQuery(V,d.K7,5),a.\u0275\u0275contentQuery(V,d.ey,5)),2&le&&(a.\u0275\u0275queryRefresh(M=a.\u0275\u0275loadQuery())&&(de.optionGroups=M),a.\u0275\u0275queryRefresh(M=a.\u0275\u0275loadQuery())&&(de.options=M))},hostAttrs:["ngSkipHydration","",1,"mat-mdc-autocomplete"],inputs:{disableRipple:"disableRipple",hideSingleSelectionIndicator:"hideSingleSelectionIndicator"},exportAs:["matAutocomplete"],features:[a.\u0275\u0275ProvidersFeature([{provide:d.HF,useExisting:ce}]),a.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:["*"],decls:1,vars:0,consts:[["role","listbox",1,"mat-mdc-autocomplete-panel","mdc-menu-surface","mdc-menu-surface--open",3,"id","ngClass"],["panel",""]],template:function(le,de){1&le&&(a.\u0275\u0275projectionDef(),a.\u0275\u0275template(0,Fe,3,5,"ng-template"))},dependencies:[p.NgClass],styles:["div.mat-mdc-autocomplete-panel{box-shadow:0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12);width:100%;max-height:256px;visibility:hidden;transform-origin:center top;overflow:auto;padding:8px 0;border-radius:4px;box-sizing:border-box;position:static;background-color:var(--mat-autocomplete-background-color)}.cdk-high-contrast-active div.mat-mdc-autocomplete-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-autocomplete-panel-above) div.mat-mdc-autocomplete-panel{border-top-left-radius:0;border-top-right-radius:0}.mat-mdc-autocomplete-panel-above div.mat-mdc-autocomplete-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:center bottom}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-visible{visibility:visible}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-hidden{visibility:hidden}mat-autocomplete{display:none}"],encapsulation:2,data:{animation:[Ke]},changeDetection:0});var h=function(le){this.elementRef=le};(ge=h).\u0275fac=function(le){return new(le||ge)(a.\u0275\u0275directiveInject(a.ElementRef))},ge.\u0275dir=a.\u0275\u0275defineDirective({type:ge});var g=function(q){function le(){return q.apply(this,arguments)||this}return(0,P.Z)(le,q),le}(h);(se=g).\u0275fac=function(){var q;return function(de){return(q||(q=a.\u0275\u0275getInheritedFactory(se)))(de||se)}}(),se.\u0275dir=a.\u0275\u0275defineDirective({type:se,selectors:[["","matAutocompleteOrigin",""]],exportAs:["matAutocompleteOrigin"],features:[a.\u0275\u0275InheritDefinitionFeature]});var u={provide:I.JU,useExisting:(0,a.forwardRef)(function(){return B}),multi:!0},W=new a.InjectionToken("mat-autocomplete-scroll-strategy"),U={provide:W,deps:[c.aV],useFactory:function(q){return function(){return q.scrollStrategies.reposition()}}},Q=function(){function q(de,V,M,L,x,Y,ue,Ne,$e,Xe,it){var st=this;this._element=de,this._overlay=V,this._viewContainerRef=M,this._zone=L,this._changeDetectorRef=x,this._dir=ue,this._formField=Ne,this._document=$e,this._viewportRuler=Xe,this._defaults=it,this._componentDestroyed=!1,this._autocompleteDisabled=!1,this._manuallyFloatingLabel=!1,this._viewportSubscription=k.w.EMPTY,this._canOpenOnNextFocus=!0,this._closeKeyEventStream=new E.xQ,this._windowBlurHandler=function(){st._canOpenOnNextFocus=st._document.activeElement!==st._element.nativeElement||st.panelOpen},this._onChange=function(){},this._onTouched=function(){},this.position="auto",this.autocompleteAttribute="off",this._overlayAttached=!1,this.optionSelections=(0,s.P)(function(){var ot=st.autocomplete?st.autocomplete.options:null;return ot?ot.changes.pipe((0,G.O)(ot),(0,Z.w)(function(){return ne.T.apply(void 0,ot.map(function(ut){return ut.onSelectionChange}))})):st._zone.onStable.pipe((0,ie.q)(1),(0,Z.w)(function(){return st.optionSelections}))}),this._handlePanelKeydown=function(ot){var ut;(ot.keyCode===m.hY&&!(0,m.Vb)(ot)||ot.keyCode===m.LH&&(0,m.Vb)(ot,"altKey"))&&(st._pendingAutoselectedOption&&(st._updateNativeInputValue(null!=(ut=st._valueBeforeAutoSelection)?ut:""),st._pendingAutoselectedOption=null),st._closeKeyEventStream.next(),st._resetActiveItem(),ot.stopPropagation(),ot.preventDefault())},this._trackedModal=null,this._scrollStrategy=Y}var le=q.prototype;return le.ngAfterViewInit=function(){var V=this,M=this._getWindow();typeof M<"u"&&this._zone.runOutsideAngular(function(){return M.addEventListener("blur",V._windowBlurHandler)})},le.ngOnChanges=function(V){V.position&&this._positionStrategy&&(this._setStrategyPositions(this._positionStrategy),this.panelOpen&&this._overlayRef.updatePosition())},le.ngOnDestroy=function(){var V=this._getWindow();typeof V<"u"&&V.removeEventListener("blur",this._windowBlurHandler),this._viewportSubscription.unsubscribe(),this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete(),this._clearFromModal()},le.openPanel=function(){this._attachOverlay(),this._floatLabel(),this._trackedModal&&(0,y.Zf)(this._trackedModal,"aria-owns",this.autocomplete.id)},le.closePanel=function(){var V=this;this._resetLabel(),this._overlayAttached&&(this.panelOpen&&this._zone.run(function(){V.autocomplete.closed.emit()}),this.autocomplete._isOpen=this._overlayAttached=!1,this._pendingAutoselectedOption=null,this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._updatePanelState(),this._componentDestroyed||this._changeDetectorRef.detectChanges(),this._trackedModal)&&(0,y.iD)(this._trackedModal,"aria-owns",this.autocomplete.id)},le.updatePosition=function(){this._overlayAttached&&this._overlayRef.updatePosition()},le._getOutsideClickStream=function(){var V=this;return(0,ne.T)((0,te.R)(this._document,"click"),(0,te.R)(this._document,"auxclick"),(0,te.R)(this._document,"touchend")).pipe((0,ye.h)(function(M){var L=(0,C.sA)(M),x=V._formField?V._formField._elementRef.nativeElement:null,Y=V.connectedTo?V.connectedTo.elementRef.nativeElement:null;return V._overlayAttached&&L!==V._element.nativeElement&&V._document.activeElement!==V._element.nativeElement&&(!x||!x.contains(L))&&(!Y||!Y.contains(L))&&!!V._overlayRef&&!V._overlayRef.overlayElement.contains(L)}))},le.writeValue=function(V){var M=this;Promise.resolve(null).then(function(){return M._assignOptionValue(V)})},le.registerOnChange=function(V){this._onChange=V},le.registerOnTouched=function(V){this._onTouched=V},le.setDisabledState=function(V){this._element.nativeElement.disabled=V},le._handleKeydown=function(V){var M=V.keyCode,L=(0,m.Vb)(V);if(M===m.hY&&!L&&V.preventDefault(),this.activeOption&&M===m.K5&&this.panelOpen&&!L)this.activeOption._selectViaInteraction(),this._resetActiveItem(),V.preventDefault();else if(this.autocomplete){var x=this.autocomplete._keyManager.activeItem,Y=M===m.LH||M===m.JH;M===m.Mf||Y&&!L&&this.panelOpen?this.autocomplete._keyManager.onKeydown(V):Y&&this._canOpen()&&this.openPanel(),(Y||this.autocomplete._keyManager.activeItem!==x)&&(this._scrollToOption(this.autocomplete._keyManager.activeItemIndex||0),this.autocomplete.autoSelectActiveOption&&this.activeOption&&(this._pendingAutoselectedOption||(this._valueBeforeAutoSelection=this._element.nativeElement.value),this._pendingAutoselectedOption=this.activeOption,this._assignOptionValue(this.activeOption.value)))}},le._handleInput=function(V){var M=V.target,L=M.value;"number"===M.type&&(L=""==L?null:parseFloat(L)),this._previousValue!==L&&(this._previousValue=L,this._pendingAutoselectedOption=null,(!this.autocomplete||!this.autocomplete.requireSelection)&&this._onChange(L),L||this._clearPreviousSelectedOption(null,!1),this._canOpen()&&this._document.activeElement===V.target&&this.openPanel())},le._handleFocus=function(){this._canOpenOnNextFocus?this._canOpen()&&(this._previousValue=this._element.nativeElement.value,this._attachOverlay(),this._floatLabel(!0)):this._canOpenOnNextFocus=!0},le._handleClick=function(){this._canOpen()&&!this.panelOpen&&this.openPanel()},le._floatLabel=function(V){void 0===V&&(V=!1),this._formField&&"auto"===this._formField.floatLabel&&(V?this._formField._animateAndLockLabel():this._formField.floatLabel="always",this._manuallyFloatingLabel=!0)},le._resetLabel=function(){this._manuallyFloatingLabel&&(this._formField&&(this._formField.floatLabel="auto"),this._manuallyFloatingLabel=!1)},le._subscribeToClosingActions=function(){var V=this,M=this._zone.onStable.pipe((0,ie.q)(1)),L=this.autocomplete.options.changes.pipe((0,ae.b)(function(){return V._positionStrategy.reapplyLastPosition()}),(0,J.g)(0));return(0,ne.T)(M,L).pipe((0,Z.w)(function(){return V._zone.run(function(){var x=V.panelOpen;V._resetActiveItem(),V._updatePanelState(),V._changeDetectorRef.detectChanges(),V.panelOpen&&V._overlayRef.updatePosition(),x!==V.panelOpen&&(V.panelOpen?(V._captureValueOnAttach(),V._emitOpened()):V.autocomplete.closed.emit())}),V.panelClosingActions}),(0,ie.q)(1)).subscribe(function(x){return V._setValueAndClose(x)})},le._emitOpened=function(){this.autocomplete.opened.emit()},le._captureValueOnAttach=function(){this._valueOnAttach=this._element.nativeElement.value},le._destroyPanel=function(){this._overlayRef&&(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)},le._assignOptionValue=function(V){var M=this.autocomplete&&this.autocomplete.displayWith?this.autocomplete.displayWith(V):V;this._updateNativeInputValue(M??"")},le._updateNativeInputValue=function(V){this._formField?this._formField._control.value=V:this._element.nativeElement.value=V,this._previousValue=V},le._setValueAndClose=function(V){var M=this,L=this.autocomplete,x=V?V.source:this._pendingAutoselectedOption;x?(this._clearPreviousSelectedOption(x),this._assignOptionValue(x.value),this._onChange(x.value),L._emitSelectEvent(x),this._element.nativeElement.focus()):L.requireSelection&&this._element.nativeElement.value!==this._valueOnAttach&&(this._clearPreviousSelectedOption(null),this._assignOptionValue(null),L._animationDone?L._animationDone.pipe((0,ie.q)(1)).subscribe(function(){return M._onChange(null)}):this._onChange(null)),this.closePanel()},le._clearPreviousSelectedOption=function(V,M){var L;null==(L=this.autocomplete)||null==(L=L.options)||L.forEach(function(x){x!==V&&x.selected&&x.deselect(M)})},le._attachOverlay=function(){var M,x,V=this,L=this._overlayRef;L?(this._positionStrategy.setOrigin(this._getConnectedElement()),L.updateSize({width:this._getPanelWidth()})):(this._portal=new O.UE(this.autocomplete.template,this._viewContainerRef,{id:null==(x=this._formField)?void 0:x.getLabelId()}),L=this._overlay.create(this._getOverlayConfig()),this._overlayRef=L,this._viewportSubscription=this._viewportRuler.change().subscribe(function(){V.panelOpen&&L&&L.updateSize({width:V._getPanelWidth()})})),L&&!L.hasAttached()&&(L.attach(this._portal),this._closingActionsSubscription=this._subscribeToClosingActions());var Y=this.panelOpen;this.autocomplete._isOpen=this._overlayAttached=!0,this.autocomplete._setColor(null==(M=this._formField)?void 0:M.color),this._updatePanelState(),this._applyModalPanelOwnership(),this._captureValueOnAttach(),this.panelOpen&&Y!==this.panelOpen&&this._emitOpened()},le._updatePanelState=function(){if(this.autocomplete._setVisibility(),this.panelOpen){var V=this._overlayRef;this._keydownSubscription||(this._keydownSubscription=V.keydownEvents().subscribe(this._handlePanelKeydown)),this._outsideClickSubscription||(this._outsideClickSubscription=V.outsidePointerEvents().subscribe())}else{var M,L;null==(M=this._keydownSubscription)||M.unsubscribe(),null==(L=this._outsideClickSubscription)||L.unsubscribe(),this._keydownSubscription=this._outsideClickSubscription=null}},le._getOverlayConfig=function(){var V,M;return new c.X_({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getPanelWidth(),direction:null!=(V=this._dir)?V:void 0,panelClass:null==(M=this._defaults)?void 0:M.overlayPanelClass})},le._getOverlayPosition=function(){var V=this._overlay.position().flexibleConnectedTo(this._getConnectedElement()).withFlexibleDimensions(!1).withPush(!1);return this._setStrategyPositions(V),this._positionStrategy=V,V},le._setStrategyPositions=function(V){var Y,M=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],L=this._aboveClass,x=[{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:L},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:L}];Y="above"===this.position?x:"below"===this.position?M:[].concat(M,x),V.withPositions(Y)},le._getConnectedElement=function(){return this.connectedTo?this.connectedTo.elementRef:this._formField?this._formField.getConnectedOverlayOrigin():this._element},le._getPanelWidth=function(){return this.autocomplete.panelWidth||this._getHostWidth()},le._getHostWidth=function(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width},le._resetActiveItem=function(){var V=this.autocomplete;if(V.autoActiveFirstOption){for(var M=-1,L=0;L<V.options.length;L++)if(!V.options.get(L).disabled){M=L;break}V._keyManager.setActiveItem(M)}else V._keyManager.setActiveItem(-1)},le._canOpen=function(){var V=this._element.nativeElement;return!V.readOnly&&!V.disabled&&!this._autocompleteDisabled},le._getWindow=function(){var V;return(null==(V=this._document)?void 0:V.defaultView)||window},le._scrollToOption=function(V){var M=this.autocomplete,L=(0,d.CB)(V,M.options,M.optionGroups);if(0===V&&1===L)M._setScrollTop(0);else if(M.panel){var x=M.options.toArray()[V];if(x){var Y=x._getHostElement(),ue=(0,d.jH)(Y.offsetTop,Y.offsetHeight,M._getScrollTop(),M.panel.nativeElement.offsetHeight);M._setScrollTop(ue)}}},le._applyModalPanelOwnership=function(){var V=this._element.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(V){var M=this.autocomplete.id;this._trackedModal&&(0,y.iD)(this._trackedModal,"aria-owns",M),(0,y.Zf)(V,"aria-owns",M),this._trackedModal=V}},le._clearFromModal=function(){this._trackedModal&&((0,y.iD)(this._trackedModal,"aria-owns",this.autocomplete.id),this._trackedModal=null)},(0,o.Z)(q,[{key:"autocompleteDisabled",get:function(){return this._autocompleteDisabled},set:function(V){this._autocompleteDisabled=(0,i.Ig)(V)}},{key:"panelOpen",get:function(){return this._overlayAttached&&this.autocomplete.showPanel}},{key:"panelClosingActions",get:function(){var V=this;return(0,ne.T)(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe((0,ye.h)(function(){return V._overlayAttached})),this._closeKeyEventStream,this._getOutsideClickStream(),this._overlayRef?this._overlayRef.detachments().pipe((0,ye.h)(function(){return V._overlayAttached})):(0,X.of)()).pipe((0,N.U)(function(M){return M instanceof d.rN?M:null}))}},{key:"activeOption",get:function(){return this.autocomplete&&this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null}}]),q}();(De=Q).\u0275fac=function(le){return new(le||De)(a.\u0275\u0275directiveInject(a.ElementRef),a.\u0275\u0275directiveInject(c.aV),a.\u0275\u0275directiveInject(a.ViewContainerRef),a.\u0275\u0275directiveInject(a.NgZone),a.\u0275\u0275directiveInject(a.ChangeDetectorRef),a.\u0275\u0275directiveInject(W),a.\u0275\u0275directiveInject(he.Is,8),a.\u0275\u0275directiveInject(H.G_,9),a.\u0275\u0275directiveInject(p.DOCUMENT,8),a.\u0275\u0275directiveInject(l.rL),a.\u0275\u0275directiveInject(j,8))},De.\u0275dir=a.\u0275\u0275defineDirective({type:De,inputs:{autocomplete:["matAutocomplete","autocomplete"],position:["matAutocompletePosition","position"],connectedTo:["matAutocompleteConnectedTo","connectedTo"],autocompleteAttribute:["autocomplete","autocompleteAttribute"],autocompleteDisabled:["matAutocompleteDisabled","autocompleteDisabled"]},features:[a.\u0275\u0275NgOnChangesFeature]});var B=function(q){function le(){var de;return(de=q.apply(this,arguments)||this)._aboveClass="mat-mdc-autocomplete-panel-above",de}return(0,P.Z)(le,q),le}(Q);(fe=B).\u0275fac=function(){var q;return function(de){return(q||(q=a.\u0275\u0275getInheritedFactory(fe)))(de||fe)}}(),fe.\u0275dir=a.\u0275\u0275defineDirective({type:fe,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-mdc-autocomplete-trigger"],hostVars:7,hostBindings:function(le,de){1&le&&a.\u0275\u0275listener("focusin",function(){return de._handleFocus()})("blur",function(){return de._onTouched()})("input",function(M){return de._handleInput(M)})("keydown",function(M){return de._handleKeydown(M)})("click",function(){return de._handleClick()}),2&le&&a.\u0275\u0275attribute("autocomplete",de.autocompleteAttribute)("role",de.autocompleteDisabled?null:"combobox")("aria-autocomplete",de.autocompleteDisabled?null:"list")("aria-activedescendant",de.panelOpen&&de.activeOption?de.activeOption.id:null)("aria-expanded",de.autocompleteDisabled?null:de.panelOpen.toString())("aria-controls",de.autocompleteDisabled||!de.panelOpen||null==de.autocomplete?null:de.autocomplete.id)("aria-haspopup",de.autocompleteDisabled?null:"listbox")},exportAs:["matAutocompleteTrigger"],features:[a.\u0275\u0275ProvidersFeature([u]),a.\u0275\u0275InheritDefinitionFeature]}),(Oe=function(){}).\u0275fac=function(le){return new(le||Oe)},Oe.\u0275mod=a.\u0275\u0275defineNgModule({type:Oe}),Oe.\u0275inj=a.\u0275\u0275defineInjector({providers:[U],imports:[c.U8,d.Ng,d.BQ,p.CommonModule,l.ZD,d.Ng,d.BQ]})},57746:function(lt,Ge,t){"use strict";t.d(Ge,{d:function(){return l},t:function(){return c}});var d,p,r=t(90341),o=t(50423),P=t(4437),a=t(48138),l=function(){function y(){this._vertical=!1,this._inset=!1}return(0,r.Z)(y,[{key:"vertical",get:function(){return this._vertical},set:function(C){this._vertical=(0,P.Ig)(C)}},{key:"inset",get:function(){return this._inset},set:function(C){this._inset=(0,P.Ig)(C)}}]),y}();(d=l).\u0275fac=function(i){return new(i||d)},d.\u0275cmp=o.\u0275\u0275defineComponent({type:d,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(i,C){2&i&&(o.\u0275\u0275attribute("aria-orientation",C.vertical?"vertical":"horizontal"),o.\u0275\u0275classProp("mat-divider-vertical",C.vertical)("mat-divider-horizontal",!C.vertical)("mat-divider-inset",C.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(i,C){},styles:[".mat-divider{--mat-divider-width:1px;display:block;margin:0;border-top-style:solid;border-top-color:var(--mat-divider-color);border-top-width:var(--mat-divider-width)}.mat-divider.mat-divider-vertical{border-top:0;border-right-style:solid;border-right-color:var(--mat-divider-color);border-right-width:var(--mat-divider-width)}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],encapsulation:2,changeDetection:0});var c=function(){};(p=c).\u0275fac=function(i){return new(i||p)},p.\u0275mod=o.\u0275\u0275defineNgModule({type:p}),p.\u0275inj=o.\u0275\u0275defineInjector({imports:[a.BQ,a.BQ]})},34895:function(lt,Ge,t){"use strict";t.d(Ge,{D8:function(){return O},QJ:function(){return X},VN:function(){return ne}});var i,C,v,k,r=t(37419),o=t(50423),P=t(48138),a=t(33846),d=t(54241),p=t(77476),l=t(59051),c=t(21661),y=t(17174);function E(I,H){if(1&I&&(o.\u0275\u0275elementStart(0,"div",0,1),o.\u0275\u0275projection(2),o.\u0275\u0275elementEnd()),2&I){var G=H.id,Z=o.\u0275\u0275nextContext();o.\u0275\u0275property("id",Z.id)("ngClass",Z._classList),o.\u0275\u0275attribute("aria-label",Z.ariaLabel||null)("aria-labelledby",Z._getPanelAriaLabelledby(G))}}var ne=function(I){function H(){var G;return(G=I.apply(this,arguments)||this)._visibleClass="mat-autocomplete-visible",G._hiddenClass="mat-autocomplete-hidden",G._animationDone=null,G}return(0,r.Z)(H,I),H}(d.Mz);(i=ne).\u0275fac=function(){var I;return function(G){return(I||(I=o.\u0275\u0275getInheritedFactory(i)))(G||i)}}(),i.\u0275cmp=o.\u0275\u0275defineComponent({type:i,selectors:[["mat-autocomplete"]],contentQueries:function(H,G,Z){var ie;1&H&&(o.\u0275\u0275contentQuery(Z,P.K7,5),o.\u0275\u0275contentQuery(Z,a.CK,5)),2&H&&(o.\u0275\u0275queryRefresh(ie=o.\u0275\u0275loadQuery())&&(G.optionGroups=ie),o.\u0275\u0275queryRefresh(ie=o.\u0275\u0275loadQuery())&&(G.options=ie))},hostAttrs:["ngSkipHydration","",1,"mat-autocomplete"],inputs:{disableRipple:"disableRipple"},exportAs:["matAutocomplete"],features:[o.\u0275\u0275ProvidersFeature([{provide:P.HF,useExisting:i}]),o.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:["*"],decls:1,vars:0,consts:[["role","listbox",1,"mat-autocomplete-panel",3,"id","ngClass"],["panel",""]],template:function(H,G){1&H&&(o.\u0275\u0275projectionDef(),o.\u0275\u0275template(0,E,3,4,"ng-template"))},dependencies:[p.NgClass],styles:[".mat-autocomplete-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;visibility:hidden;max-width:none;max-height:256px;position:relative;width:100%;border-bottom-left-radius:4px;border-bottom-right-radius:4px}.mat-autocomplete-panel.mat-autocomplete-visible{visibility:visible}.mat-autocomplete-panel.mat-autocomplete-hidden{visibility:hidden}.mat-autocomplete-panel-above .mat-autocomplete-panel{border-radius:0;border-top-left-radius:4px;border-top-right-radius:4px}.mat-autocomplete-panel .mat-divider-horizontal{margin-top:-1px}.cdk-high-contrast-active .mat-autocomplete-panel{outline:solid 1px}mat-autocomplete{display:none}"],encapsulation:2,changeDetection:0});var te={provide:y.JU,useExisting:(0,o.forwardRef)(function(){return X}),multi:!0},X=function(I){function H(){var G;return(G=I.apply(this,arguments)||this)._aboveClass="mat-autocomplete-panel-above",G}return(0,r.Z)(H,I),H}(d.VI);(C=X).\u0275fac=function(){var I;return function(G){return(I||(I=o.\u0275\u0275getInheritedFactory(C)))(G||C)}}(),C.\u0275dir=o.\u0275\u0275defineDirective({type:C,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-autocomplete-trigger"],hostVars:7,hostBindings:function(H,G){1&H&&o.\u0275\u0275listener("focusin",function(){return G._handleFocus()})("blur",function(){return G._onTouched()})("input",function(ie){return G._handleInput(ie)})("keydown",function(ie){return G._handleKeydown(ie)})("click",function(){return G._handleClick()}),2&H&&o.\u0275\u0275attribute("autocomplete",G.autocompleteAttribute)("role",G.autocompleteDisabled?null:"combobox")("aria-autocomplete",G.autocompleteDisabled?null:"list")("aria-activedescendant",G.panelOpen&&G.activeOption?G.activeOption.id:null)("aria-expanded",G.autocompleteDisabled?null:G.panelOpen.toString())("aria-owns",G.autocompleteDisabled||!G.panelOpen||null==G.autocomplete?null:G.autocomplete.id)("aria-haspopup",G.autocompleteDisabled?null:"listbox")},exportAs:["matAutocompleteTrigger"],features:[o.\u0275\u0275ProvidersFeature([te]),o.\u0275\u0275InheritDefinitionFeature]});var m=function(I){function H(){return I.apply(this,arguments)||this}return(0,r.Z)(H,I),H}(d.q5);(v=m).\u0275fac=function(){var I;return function(G){return(I||(I=o.\u0275\u0275getInheritedFactory(v)))(G||v)}}(),v.\u0275dir=o.\u0275\u0275defineDirective({type:v,selectors:[["","matAutocompleteOrigin",""]],exportAs:["matAutocompleteOrigin"],features:[o.\u0275\u0275InheritDefinitionFeature]});var O=function(){};(k=O).\u0275fac=function(H){return new(H||k)},k.\u0275mod=o.\u0275\u0275defineNgModule({type:k}),k.\u0275inj=o.\u0275\u0275defineInjector({providers:[d.zp],imports:[l.U8,a.Uc,P.BQ,p.CommonModule,c.ZD,a.Uc,P.BQ]})},89075:function(lt,Ge,t){"use strict";t.d(Ge,{IP:function(){return Je},Y6:function(){return Oe},ir:function(){return je},lw:function(){return fe},yD:function(){return nt}});var O,I,H,G,Z,ie,ye,r=t(90341),o=t(76920),P=t(37419),a=t(93247),d=t(50423),p=t(48138),l=t(4437),c=t(10519),y=t(77476),i=t(30794),C=t(63057),v=t(48787),k=t(83317),E=t(22318),s=t(51193),ne=t(94130),te=t(77445),X=t(17174),m=t(60733),N=new d.InjectionToken("MatChipRemove"),he=new d.InjectionToken("MatChipAvatar"),pe=new d.InjectionToken("MatChipTrailingIcon"),ge=(0,p.sb)((0,p.pj)((0,p.Kr)(function(oe){this._elementRef=oe}),"primary"),-1);(O=function(){}).\u0275fac=function(oe){return new(oe||O)},O.\u0275dir=d.\u0275\u0275defineDirective({type:O,selectors:[["mat-chip-avatar"],["","matChipAvatar",""]],hostAttrs:[1,"mat-chip-avatar"],features:[d.\u0275\u0275ProvidersFeature([{provide:he,useExisting:O}])]});(I=function(){}).\u0275fac=function(oe){return new(oe||I)},I.\u0275dir=d.\u0275\u0275defineDirective({type:I,selectors:[["mat-chip-trailing-icon"],["","matChipTrailingIcon",""]],hostAttrs:[1,"mat-chip-trailing-icon"],features:[d.\u0275\u0275ProvidersFeature([{provide:pe,useExisting:I}])]});var fe=function(Ue){function oe(g,u,F,W,ee,U,Q,B){var w;return(w=Ue.call(this,g)||this)._ngZone=u,w._changeDetectorRef=ee,w._hasFocus=!1,w.chipListSelectable=!0,w._chipListMultiple=!1,w._chipListDisabled=!1,w.role="option",w._selected=!1,w._selectable=!0,w._disabled=!1,w._removable=!0,w._onFocus=new i.xQ,w._onBlur=new i.xQ,w.selectionChange=new d.EventEmitter,w.destroyed=new d.EventEmitter,w.removed=new d.EventEmitter,w._addHostClassName(),w._chipRippleTarget=U.createElement("div"),w._chipRippleTarget.classList.add("mat-chip-ripple"),w._elementRef.nativeElement.appendChild(w._chipRippleTarget),w._chipRipple=new p.IR((0,o.Z)(w),u,w._chipRippleTarget,F),w._chipRipple.setupTriggerEvents(g),w.rippleConfig=W||{},w._animationsDisabled="NoopAnimations"===Q,w.tabIndex=null!=B&&parseInt(B)||-1,w}(0,P.Z)(oe,Ue);var h=oe.prototype;return h._addHostClassName=function(){var u="mat-basic-chip",F=this._elementRef.nativeElement;F.hasAttribute(u)||F.tagName.toLowerCase()===u?F.classList.add(u):F.classList.add("mat-standard-chip")},h.ngOnDestroy=function(){this.destroyed.emit({chip:this}),this._chipRipple._removeTriggerEvents()},h.select=function(){this._selected||(this._selected=!0,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())},h.deselect=function(){this._selected&&(this._selected=!1,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())},h.selectViaInteraction=function(){this._selected||(this._selected=!0,this._dispatchSelectionChange(!0),this._changeDetectorRef.markForCheck())},h.toggleSelected=function(u){return void 0===u&&(u=!1),this._selected=!this.selected,this._dispatchSelectionChange(u),this._changeDetectorRef.markForCheck(),this.selected},h.focus=function(){this._hasFocus||(this._elementRef.nativeElement.focus(),this._onFocus.next({chip:this})),this._hasFocus=!0},h.remove=function(){this.removable&&this.removed.emit({chip:this})},h._handleClick=function(u){this.disabled&&u.preventDefault()},h._handleKeydown=function(u){if(!this.disabled)switch(u.keyCode){case a.yY:case a.ZH:this.remove(),u.preventDefault();break;case a.L_:this.selectable&&this.toggleSelected(!0),u.preventDefault()}},h._blur=function(){var u=this;this._ngZone.onStable.pipe((0,v.q)(1)).subscribe(function(){u._ngZone.run(function(){u._hasFocus=!1,u._onBlur.next({chip:u})})})},h._dispatchSelectionChange=function(u){void 0===u&&(u=!1),this.selectionChange.emit({source:this,isUserInput:u,selected:this._selected})},(0,r.Z)(oe,[{key:"rippleDisabled",get:function(){return this.disabled||this.disableRipple||this._animationsDisabled||!!this.rippleConfig.disabled}},{key:"selected",get:function(){return this._selected},set:function(u){var F=(0,l.Ig)(u);F!==this._selected&&(this._selected=F,this._dispatchSelectionChange())}},{key:"value",get:function(){return void 0!==this._value?this._value:this._elementRef.nativeElement.textContent},set:function(u){this._value=u}},{key:"selectable",get:function(){return this._selectable&&this.chipListSelectable},set:function(u){this._selectable=(0,l.Ig)(u)}},{key:"disabled",get:function(){return this._chipListDisabled||this._disabled},set:function(u){this._disabled=(0,l.Ig)(u)}},{key:"removable",get:function(){return this._removable},set:function(u){this._removable=(0,l.Ig)(u)}},{key:"ariaSelected",get:function(){return this.selectable&&(this._chipListMultiple||this.selected)?this.selected.toString():null}}]),oe}(ge);(H=fe).\u0275fac=function(oe){return new(oe||H)(d.\u0275\u0275directiveInject(d.ElementRef),d.\u0275\u0275directiveInject(d.NgZone),d.\u0275\u0275directiveInject(c.t4),d.\u0275\u0275directiveInject(p.Y2,8),d.\u0275\u0275directiveInject(d.ChangeDetectorRef),d.\u0275\u0275directiveInject(y.DOCUMENT),d.\u0275\u0275directiveInject(d.ANIMATION_MODULE_TYPE,8),d.\u0275\u0275injectAttribute("tabindex"))},H.\u0275dir=d.\u0275\u0275defineDirective({type:H,selectors:[["mat-basic-chip"],["","mat-basic-chip",""],["mat-chip"],["","mat-chip",""]],contentQueries:function(oe,h,g){var u;1&oe&&(d.\u0275\u0275contentQuery(g,he,5),d.\u0275\u0275contentQuery(g,pe,5),d.\u0275\u0275contentQuery(g,N,5)),2&oe&&(d.\u0275\u0275queryRefresh(u=d.\u0275\u0275loadQuery())&&(h.avatar=u.first),d.\u0275\u0275queryRefresh(u=d.\u0275\u0275loadQuery())&&(h.trailingIcon=u.first),d.\u0275\u0275queryRefresh(u=d.\u0275\u0275loadQuery())&&(h.removeIcon=u.first))},hostAttrs:[1,"mat-chip","mat-focus-indicator"],hostVars:15,hostBindings:function(oe,h){1&oe&&d.\u0275\u0275listener("click",function(u){return h._handleClick(u)})("keydown",function(u){return h._handleKeydown(u)})("focus",function(){return h.focus()})("blur",function(){return h._blur()}),2&oe&&(d.\u0275\u0275attribute("tabindex",h.disabled?null:h.tabIndex)("role",h.role)("disabled",h.disabled||null)("aria-disabled",h.disabled.toString())("aria-selected",h.ariaSelected),d.\u0275\u0275classProp("mat-chip-selected",h.selected)("mat-chip-with-avatar",h.avatar)("mat-chip-with-trailing-icon",h.trailingIcon||h.removeIcon)("mat-chip-disabled",h.disabled)("_mat-animation-noopable",h._animationsDisabled))},inputs:{color:"color",disableRipple:"disableRipple",tabIndex:"tabIndex",role:"role",selected:"selected",value:"value",selectable:"selectable",disabled:"disabled",removable:"removable"},outputs:{selectionChange:"selectionChange",destroyed:"destroyed",removed:"removed"},exportAs:["matChip"],features:[d.\u0275\u0275InheritDefinitionFeature]});var Oe=function(){function Ue(h,g){this._parentChip=h,"BUTTON"===g.nativeElement.nodeName&&g.nativeElement.setAttribute("type","button")}return Ue.prototype._handleClick=function(g){var u=this._parentChip;u.removable&&!u.disabled&&u.remove(),g.stopPropagation(),g.preventDefault()},Ue}();(G=Oe).\u0275fac=function(oe){return new(oe||G)(d.\u0275\u0275directiveInject(fe),d.\u0275\u0275directiveInject(d.ElementRef))},G.\u0275dir=d.\u0275\u0275defineDirective({type:G,selectors:[["","matChipRemove",""]],hostAttrs:[1,"mat-chip-remove","mat-chip-trailing-icon"],hostBindings:function(oe,h){1&oe&&d.\u0275\u0275listener("click",function(u){return h._handleClick(u)})},features:[d.\u0275\u0275ProvidersFeature([{provide:N,useExisting:G}])]});var be=new d.InjectionToken("mat-chips-default-options"),Fe=(0,p.FD)(function(){return function(oe,h,g,u){this._defaultErrorStateMatcher=oe,this._parentForm=h,this._parentFormGroup=g,this.ngControl=u,this.stateChanges=new i.xQ}}()),ze=0,Ke=function(oe,h){this.source=oe,this.value=h},je=function(Ue){function oe(g,u,F,W,ee,U,Q){var B;return(B=Ue.call(this,U,W,ee,Q)||this)._elementRef=g,B._changeDetectorRef=u,B._dir=F,B.controlType="mat-chip-list",B._lastDestroyedChipIndex=null,B._destroyed=new i.xQ,B._uid="mat-chip-list-"+ze++,B._tabIndex=0,B._userTabIndex=null,B._onTouched=function(){},B._onChange=function(){},B._multiple=!1,B._compareWith=function(w,q){return w===q},B._disabled=!1,B.ariaOrientation="horizontal",B._selectable=!0,B.change=new d.EventEmitter,B.valueChange=new d.EventEmitter,B.ngControl&&(B.ngControl.valueAccessor=(0,o.Z)(B)),B}(0,P.Z)(oe,Ue);var h=oe.prototype;return h.ngAfterContentInit=function(){var u=this;this._keyManager=new s.Em(this.chips).withWrap().withVerticalOrientation().withHomeAndEnd().withHorizontalOrientation(this._dir?this._dir.value:"ltr"),this._dir&&this._dir.change.pipe((0,k.R)(this._destroyed)).subscribe(function(F){return u._keyManager.withHorizontalOrientation(F)}),this._keyManager.tabOut.subscribe(function(){return u._allowFocusEscape()}),this.chips.changes.pipe((0,E.O)(null),(0,k.R)(this._destroyed)).subscribe(function(){(u.disabled||!u.selectable)&&Promise.resolve().then(function(){u._syncChipsState()}),u._resetChips(),u._initializeSelection(),u._updateTabIndex(),u._updateFocusForDestroyedChips(),u.stateChanges.next()})},h.ngOnInit=function(){this._selectionModel=new te.Ov(this.multiple,void 0,!1),this.stateChanges.next()},h.ngDoCheck=function(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==this._disabled&&(this.disabled=!!this.ngControl.disabled))},h.ngOnDestroy=function(){var u;null==(u=this._keyManager)||u.destroy(),this._destroyed.next(),this._destroyed.complete(),this.stateChanges.complete(),this._dropSubscriptions()},h.registerInput=function(u){this._chipInput=u,this._elementRef.nativeElement.setAttribute("data-mat-chip-input",u.id)},h.setDescribedByIds=function(u){u.length?this._elementRef.nativeElement.setAttribute("aria-describedby",u.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")},h.writeValue=function(u){this.chips&&this._setSelectionByValue(u,!1)},h.registerOnChange=function(u){this._onChange=u},h.registerOnTouched=function(u){this._onTouched=u},h.setDisabledState=function(u){this.disabled=u,this.stateChanges.next()},h.onContainerClick=function(u){this._originatesFromChip(u)||this.focus()},h.focus=function(u){this.disabled||this._chipInput&&this._chipInput.focused||(this.chips.length>0?(this._keyManager.setFirstItemActive(),this.stateChanges.next()):(this._focusInput(u),this.stateChanges.next()))},h._focusInput=function(u){this._chipInput&&this._chipInput.focus(u)},h._keydown=function(u){var F=u.target;F&&F.classList.contains("mat-chip")&&(this._keyManager.onKeydown(u),this.stateChanges.next())},h._updateTabIndex=function(){this._tabIndex=this._userTabIndex||(0===this.chips.length?-1:0)},h._updateFocusForDestroyedChips=function(){if(null!=this._lastDestroyedChipIndex)if(this.chips.length){var u=Math.min(this._lastDestroyedChipIndex,this.chips.length-1);this._keyManager.setActiveItem(u)}else this.focus();this._lastDestroyedChipIndex=null},h._isValidIndex=function(u){return u>=0&&u<this.chips.length},h._setSelectionByValue=function(u,F){var W=this;if(void 0===F&&(F=!0),this._clearSelection(),this.chips.forEach(function(U){return U.deselect()}),Array.isArray(u))u.forEach(function(U){return W._selectValue(U,F)}),this._sortValues();else{var ee=this._selectValue(u,F);ee&&F&&this._keyManager.setActiveItem(ee)}},h._selectValue=function(u,F){var W=this;void 0===F&&(F=!0);var ee=this.chips.find(function(U){return null!=U.value&&W._compareWith(U.value,u)});return ee&&(F?ee.selectViaInteraction():ee.select(),this._selectionModel.select(ee)),ee},h._initializeSelection=function(){var u=this;Promise.resolve().then(function(){(u.ngControl||u._value)&&(u._setSelectionByValue(u.ngControl?u.ngControl.value:u._value,!1),u.stateChanges.next())})},h._clearSelection=function(u){this._selectionModel.clear(),this.chips.forEach(function(F){F!==u&&F.deselect()}),this.stateChanges.next()},h._sortValues=function(){var u=this;this._multiple&&(this._selectionModel.clear(),this.chips.forEach(function(F){F.selected&&u._selectionModel.select(F)}),this.stateChanges.next())},h._propagateChanges=function(u){var F;F=Array.isArray(this.selected)?this.selected.map(function(W){return W.value}):this.selected?this.selected.value:u,this._value=F,this.change.emit(new Ke(this,F)),this.valueChange.emit(F),this._onChange(F),this._changeDetectorRef.markForCheck()},h._blur=function(){var u=this;this._hasFocusedChip()||this._keyManager.setActiveItem(-1),this.disabled||(this._chipInput?setTimeout(function(){u.focused||u._markAsTouched()}):this._markAsTouched())},h._markAsTouched=function(){this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next()},h._allowFocusEscape=function(){var u=this;-1!==this._tabIndex&&(this._tabIndex=-1,setTimeout(function(){u._tabIndex=u._userTabIndex||0,u._changeDetectorRef.markForCheck()}))},h._resetChips=function(){this._dropSubscriptions(),this._listenToChipsFocus(),this._listenToChipsSelection(),this._listenToChipsRemoved()},h._dropSubscriptions=function(){this._chipFocusSubscription&&(this._chipFocusSubscription.unsubscribe(),this._chipFocusSubscription=null),this._chipBlurSubscription&&(this._chipBlurSubscription.unsubscribe(),this._chipBlurSubscription=null),this._chipSelectionSubscription&&(this._chipSelectionSubscription.unsubscribe(),this._chipSelectionSubscription=null),this._chipRemoveSubscription&&(this._chipRemoveSubscription.unsubscribe(),this._chipRemoveSubscription=null)},h._listenToChipsSelection=function(){var u=this;this._chipSelectionSubscription=this.chipSelectionChanges.subscribe(function(F){F.source.selected?u._selectionModel.select(F.source):u._selectionModel.deselect(F.source),u.multiple||u.chips.forEach(function(W){!u._selectionModel.isSelected(W)&&W.selected&&W.deselect()}),F.isUserInput&&u._propagateChanges()})},h._listenToChipsFocus=function(){var u=this;this._chipFocusSubscription=this.chipFocusChanges.subscribe(function(F){var W=u.chips.toArray().indexOf(F.chip);u._isValidIndex(W)&&u._keyManager.updateActiveItem(W),u.stateChanges.next()}),this._chipBlurSubscription=this.chipBlurChanges.subscribe(function(){u._blur(),u.stateChanges.next()})},h._listenToChipsRemoved=function(){var u=this;this._chipRemoveSubscription=this.chipRemoveChanges.subscribe(function(F){var W=F.chip,ee=u.chips.toArray().indexOf(F.chip);u._isValidIndex(ee)&&W._hasFocus&&(u._lastDestroyedChipIndex=ee)})},h._originatesFromChip=function(u){for(var F=u.target;F&&F!==this._elementRef.nativeElement;){if(F.classList.contains("mat-chip"))return!0;F=F.parentElement}return!1},h._hasFocusedChip=function(){return this.chips&&this.chips.some(function(u){return u._hasFocus})},h._syncChipsState=function(){var u=this;this.chips&&this.chips.forEach(function(F){F._chipListDisabled=u._disabled,F._chipListMultiple=u.multiple,F.chipListSelectable=u._selectable})},(0,r.Z)(oe,[{key:"selected",get:function(){var u,F;return this.multiple?(null==(u=this._selectionModel)?void 0:u.selected)||[]:null==(F=this._selectionModel)?void 0:F.selected[0]}},{key:"role",get:function(){return this._explicitRole?this._explicitRole:this.empty?null:"listbox"},set:function(u){this._explicitRole=u}},{key:"multiple",get:function(){return this._multiple},set:function(u){this._multiple=(0,l.Ig)(u),this._syncChipsState()}},{key:"compareWith",get:function(){return this._compareWith},set:function(u){this._compareWith=u,this._selectionModel&&this._initializeSelection()}},{key:"value",get:function(){return this._value},set:function(u){this.writeValue(u),this._value=u}},{key:"id",get:function(){return this._chipInput?this._chipInput.id:this._uid}},{key:"required",get:function(){var u,F,W;return null!=(u=null!=(F=this._required)?F:null==(W=this.ngControl)||null==(W=W.control)?void 0:W.hasValidator(X.kI.required))&&u},set:function(u){this._required=(0,l.Ig)(u),this.stateChanges.next()}},{key:"placeholder",get:function(){return this._chipInput?this._chipInput.placeholder:this._placeholder},set:function(u){this._placeholder=u,this.stateChanges.next()}},{key:"focused",get:function(){return this._chipInput&&this._chipInput.focused||this._hasFocusedChip()}},{key:"empty",get:function(){return(!this._chipInput||this._chipInput.empty)&&(!this.chips||0===this.chips.length)}},{key:"shouldLabelFloat",get:function(){return!this.empty||this.focused}},{key:"disabled",get:function(){return this.ngControl?!!this.ngControl.disabled:this._disabled},set:function(u){this._disabled=(0,l.Ig)(u),this._syncChipsState()}},{key:"selectable",get:function(){return this._selectable},set:function(u){this._selectable=(0,l.Ig)(u),this._syncChipsState()}},{key:"tabIndex",set:function(u){this._userTabIndex=u,this._tabIndex=u}},{key:"chipSelectionChanges",get:function(){return C.T.apply(void 0,this.chips.map(function(u){return u.selectionChange}))}},{key:"chipFocusChanges",get:function(){return C.T.apply(void 0,this.chips.map(function(u){return u._onFocus}))}},{key:"chipBlurChanges",get:function(){return C.T.apply(void 0,this.chips.map(function(u){return u._onBlur}))}},{key:"chipRemoveChanges",get:function(){return C.T.apply(void 0,this.chips.map(function(u){return u.destroyed}))}}]),oe}(Fe);(Z=je).\u0275fac=function(oe){return new(oe||Z)(d.\u0275\u0275directiveInject(d.ElementRef),d.\u0275\u0275directiveInject(d.ChangeDetectorRef),d.\u0275\u0275directiveInject(ne.Is,8),d.\u0275\u0275directiveInject(X.F,8),d.\u0275\u0275directiveInject(X.sg,8),d.\u0275\u0275directiveInject(p.rD),d.\u0275\u0275directiveInject(X.a5,10))},Z.\u0275cmp=d.\u0275\u0275defineComponent({type:Z,selectors:[["mat-chip-list"]],contentQueries:function(oe,h,g){var u;1&oe&&d.\u0275\u0275contentQuery(g,fe,5),2&oe&&d.\u0275\u0275queryRefresh(u=d.\u0275\u0275loadQuery())&&(h.chips=u)},hostAttrs:["ngSkipHydration","",1,"mat-chip-list"],hostVars:14,hostBindings:function(oe,h){1&oe&&d.\u0275\u0275listener("focus",function(){return h.focus()})("blur",function(){return h._blur()})("keydown",function(u){return h._keydown(u)}),2&oe&&(d.\u0275\u0275hostProperty("id",h._uid),d.\u0275\u0275attribute("tabindex",h.disabled?null:h._tabIndex)("aria-required",h.role?h.required:null)("aria-disabled",h.disabled.toString())("aria-invalid",h.errorState)("aria-multiselectable",h.multiple)("role",h.role)("aria-orientation",h.ariaOrientation),d.\u0275\u0275classProp("mat-chip-list-disabled",h.disabled)("mat-chip-list-invalid",h.errorState)("mat-chip-list-required",h.required))},inputs:{role:"role",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],errorStateMatcher:"errorStateMatcher",multiple:"multiple",compareWith:"compareWith",value:"value",required:"required",placeholder:"placeholder",disabled:"disabled",ariaOrientation:["aria-orientation","ariaOrientation"],selectable:"selectable",tabIndex:"tabIndex"},outputs:{change:"change",valueChange:"valueChange"},exportAs:["matChipList"],features:[d.\u0275\u0275ProvidersFeature([{provide:m.Eo,useExisting:Z}]),d.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:["*"],decls:2,vars:0,consts:[[1,"mat-chip-list-wrapper"]],template:function(oe,h){1&oe&&(d.\u0275\u0275projectionDef(),d.\u0275\u0275elementStart(0,"div",0),d.\u0275\u0275projection(1),d.\u0275\u0275elementEnd())},styles:['.mat-chip{position:relative;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0);border:none;-webkit-appearance:none;-moz-appearance:none}.mat-chip::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-standard-chip{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:inline-flex;padding:7px 12px;border-radius:16px;align-items:center;cursor:default;min-height:32px;height:1px}.mat-standard-chip._mat-animation-noopable{transition:none !important;animation:none !important}.mat-standard-chip .mat-chip-remove{border:none;-webkit-appearance:none;-moz-appearance:none;padding:0;background:none}.mat-standard-chip .mat-chip-remove.mat-icon,.mat-standard-chip .mat-chip-remove .mat-icon{width:18px;height:18px;font-size:18px}.mat-standard-chip::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;opacity:0;content:"";pointer-events:none;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-standard-chip:hover::after{opacity:.12}.mat-standard-chip:focus{outline:none}.mat-standard-chip:focus::after{opacity:.16}.cdk-high-contrast-active .mat-standard-chip{outline:solid 1px}.cdk-high-contrast-active .mat-standard-chip.mat-chip-selected{outline-width:3px}.mat-standard-chip.mat-chip-disabled::after{opacity:0}.mat-standard-chip.mat-chip-disabled .mat-chip-remove,.mat-standard-chip.mat-chip-disabled .mat-chip-trailing-icon{cursor:default}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar,.mat-standard-chip.mat-chip-with-avatar{padding-top:0;padding-bottom:0}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-right:8px;padding-left:0}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-left:8px;padding-right:0}.mat-standard-chip.mat-chip-with-trailing-icon{padding-top:7px;padding-bottom:7px;padding-right:8px;padding-left:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon{padding-left:8px;padding-right:12px}.mat-standard-chip.mat-chip-with-avatar{padding-left:0;padding-right:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-avatar{padding-right:0;padding-left:12px}.mat-standard-chip .mat-chip-avatar{width:24px;height:24px;margin-right:8px;margin-left:4px}[dir=rtl] .mat-standard-chip .mat-chip-avatar{margin-left:8px;margin-right:4px}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{width:18px;height:18px;cursor:pointer}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-standard-chip .mat-chip-remove,[dir=rtl] .mat-standard-chip .mat-chip-trailing-icon{margin-right:8px;margin-left:0}.mat-chip-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit;overflow:hidden;transform:translateZ(0)}.mat-chip-list-wrapper{display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;margin:-4px}.mat-chip-list-wrapper input.mat-input-element,.mat-chip-list-wrapper .mat-standard-chip{margin:4px}.mat-chip-list-stacked .mat-chip-list-wrapper{flex-direction:column;align-items:flex-start}.mat-chip-list-stacked .mat-chip-list-wrapper .mat-standard-chip{width:100%}.mat-chip-avatar{border-radius:50%;justify-content:center;align-items:center;display:flex;overflow:hidden;object-fit:cover}input.mat-chip-input{width:150px;margin:4px;flex:1 0 150px}'],encapsulation:2,changeDetection:0});var He=0,Je=function(){function Ue(h,g){this._elementRef=h,this.focused=!1,this._addOnBlur=!1,this.chipEnd=new d.EventEmitter,this.placeholder="",this.id="mat-chip-list-input-"+He++,this._disabled=!1,this.inputElement=this._elementRef.nativeElement,this.separatorKeyCodes=g.separatorKeyCodes}var oe=Ue.prototype;return oe.ngOnChanges=function(){this._chipList.stateChanges.next()},oe.ngOnDestroy=function(){this.chipEnd.complete()},oe.ngAfterContentInit=function(){this._focusLastChipOnBackspace=this.empty},oe._keydown=function(g){if(g){if(g.keyCode===a.Mf&&!(0,a.Vb)(g,"shiftKey")&&this._chipList._allowFocusEscape(),g.keyCode===a.ZH&&this._focusLastChipOnBackspace)return this._chipList._keyManager.setLastItemActive(),void g.preventDefault();this._focusLastChipOnBackspace=!1}this._emitChipEnd(g)},oe._keyup=function(g){!this._focusLastChipOnBackspace&&g.keyCode===a.ZH&&this.empty&&(this._focusLastChipOnBackspace=!0,g.preventDefault())},oe._blur=function(){this.addOnBlur&&this._emitChipEnd(),this.focused=!1,this._chipList.focused||this._chipList._blur(),this._chipList.stateChanges.next()},oe._focus=function(){this.focused=!0,this._focusLastChipOnBackspace=this.empty,this._chipList.stateChanges.next()},oe._emitChipEnd=function(g){!this.inputElement.value&&g&&this._chipList._keydown(g),(!g||this._isSeparatorKey(g))&&(this.chipEnd.emit({input:this.inputElement,value:this.inputElement.value,chipInput:this}),g?.preventDefault())},oe._onInput=function(){this._chipList.stateChanges.next()},oe.focus=function(g){this.inputElement.focus(g)},oe.clear=function(){this.inputElement.value="",this._focusLastChipOnBackspace=!0},oe._isSeparatorKey=function(g){return!(0,a.Vb)(g)&&new Set(this.separatorKeyCodes).has(g.keyCode)},(0,r.Z)(Ue,[{key:"chipList",set:function(g){g&&(this._chipList=g,this._chipList.registerInput(this))}},{key:"addOnBlur",get:function(){return this._addOnBlur},set:function(g){this._addOnBlur=(0,l.Ig)(g)}},{key:"disabled",get:function(){return this._disabled||this._chipList&&this._chipList.disabled},set:function(g){this._disabled=(0,l.Ig)(g)}},{key:"empty",get:function(){return!this.inputElement.value}}]),Ue}();(ie=Je).\u0275fac=function(oe){return new(oe||ie)(d.\u0275\u0275directiveInject(d.ElementRef),d.\u0275\u0275directiveInject(be))},ie.\u0275dir=d.\u0275\u0275defineDirective({type:ie,selectors:[["input","matChipInputFor",""]],hostAttrs:[1,"mat-chip-input","mat-input-element"],hostVars:5,hostBindings:function(oe,h){1&oe&&d.\u0275\u0275listener("keydown",function(u){return h._keydown(u)})("keyup",function(u){return h._keyup(u)})("blur",function(){return h._blur()})("focus",function(){return h._focus()})("input",function(){return h._onInput()}),2&oe&&(d.\u0275\u0275hostProperty("id",h.id),d.\u0275\u0275attribute("disabled",h.disabled||null)("placeholder",h.placeholder||null)("aria-invalid",h._chipList&&h._chipList.ngControl?h._chipList.ngControl.invalid:null)("aria-required",h._chipList&&h._chipList.required||null))},inputs:{chipList:["matChipInputFor","chipList"],addOnBlur:["matChipInputAddOnBlur","addOnBlur"],separatorKeyCodes:["matChipInputSeparatorKeyCodes","separatorKeyCodes"],placeholder:"placeholder",id:"id",disabled:"disabled"},outputs:{chipEnd:"matChipInputTokenEnd"},exportAs:["matChipInput","matChipInputFor"],features:[d.\u0275\u0275NgOnChangesFeature]});var nt=function(){};(ye=nt).\u0275fac=function(oe){return new(oe||ye)},ye.\u0275mod=d.\u0275\u0275defineNgModule({type:ye}),ye.\u0275inj=d.\u0275\u0275defineInjector({providers:[p.rD,{provide:be,useValue:{separatorKeyCodes:[a.K5]}}],imports:[p.BQ]})}}]);