"use strict";(self.webpackChunkmobile=self.webpackChunkmobile||[]).push([["mobile-explore-authoring"],{45221:function(ce,A,i){i.d(A,{h:function(){return B}});var B=new(i(50423).InjectionToken)("FormattingObjectDefinitionsService")},32441:function(ce,A,i){i.d(A,{u:function(){return X}});var d=i(50423),B=i(18460),j=function(b,C,e,q,z){return{formattingSources:b,indicatorEnabled:C,mobileFormatting:e,disabledCards:q,disabledSlices:z}},X=function(){function h(){var b=this;this.mobileFormatting=!1,this.propertyChanged=new d.EventEmitter,this.outputArgs={propertyChanged:function(e){return b.propertyChanged.emit(e)}},this.modulePath="@powerbi/ExploreUIAuthoring/lazy-modules/pane-formatting/pane-formatting.module#PaneFormattingModule",this.componentId="FormattingPaneComponentId"}return h.\u0275fac=function(C){return new(C||h)},h.\u0275cmp=d.\u0275\u0275defineComponent({type:h,selectors:[["formatting-pane-lazy"]],inputs:{formattingSources:"formattingSources",indicatorEnabled:"indicatorEnabled",mobileFormatting:"mobileFormatting",disabledCards:"disabledCards",disabledSlices:"disabledSlices"},outputs:{propertyChanged:"propertyChanged"},decls:1,vars:10,consts:[[3,"inputArgs","modulePath","outputArgs","componentId"]],template:function(C,e){1&C&&d.\u0275\u0275element(0,"pbi-lazy-load",0),2&C&&d.\u0275\u0275property("inputArgs",d.\u0275\u0275pureFunction5(4,j,e.formattingSources,e.indicatorEnabled,e.mobileFormatting,e.disabledCards,e.disabledSlices))("modulePath",e.modulePath)("outputArgs",e.outputArgs)("componentId",e.componentId)},dependencies:[B.R],encapsulation:2,changeDetection:0}),h}()},78633:function(ce,A,i){i.d(A,{a:function(){return X}});var d=i(50423),B=i(18460),j=function(b){return{colors:b}},X=function(){function h(){this.modulePath="@powerbi/ExploreUIAuthoring/lazy-modules/pane-formatting/pane-formatting.module#PaneFormattingModule",this.componentId="GradientBarComponentId"}return h.\u0275fac=function(C){return new(C||h)},h.\u0275cmp=d.\u0275\u0275defineComponent({type:h,selectors:[["gradient-bar-lazy"]],inputs:{colors:"colors"},decls:1,vars:5,consts:[[3,"inputArgs","modulePath","componentId"]],template:function(C,e){1&C&&d.\u0275\u0275element(0,"pbi-lazy-load",0),2&C&&d.\u0275\u0275property("inputArgs",d.\u0275\u0275pureFunction1(3,j,e.colors))("modulePath",e.modulePath)("componentId",e.componentId)},dependencies:[B.R],encapsulation:2,changeDetection:0}),h}()},92278:function(ce,A,i){i.d(A,{I:function(){return X}});var d=i(50423),B=i(18460),j=function(b,C,e,q,z){return{toggle:b,ariaLabelledby:C,ariaDescribedby:e,toggleLabel:q,isDisabled:z}},X=function(){function h(){var b=this;this.onToggleChange=new d.EventEmitter,this.modulePath="@powerbi/ExploreUIAuthoring/lazy-modules/pane-formatting/pane-formatting.module#PaneFormattingModule",this.componentId="ToggleSwitchModernComponentId",this.outputArgs={onToggleChange:function(e){return b.onToggleChange.emit(e)}}}return h.\u0275fac=function(C){return new(C||h)},h.\u0275cmp=d.\u0275\u0275defineComponent({type:h,selectors:[["toggle-switch-modern-lazy"]],inputs:{toggle:"toggle",ariaLabelledby:"ariaLabelledby",ariaDescribedby:"ariaDescribedby",toggleLabel:"toggleLabel",isDisabled:"isDisabled"},outputs:{onToggleChange:"onToggleChange"},decls:1,vars:10,consts:[[3,"inputArgs","modulePath","outputArgs","componentId"]],template:function(C,e){1&C&&d.\u0275\u0275element(0,"pbi-lazy-load",0),2&C&&d.\u0275\u0275property("inputArgs",d.\u0275\u0275pureFunction5(4,j,e.toggle,e.ariaLabelledby,e.ariaDescribedby,e.toggleLabel,e.isDisabled))("modulePath",e.modulePath)("outputArgs",e.outputArgs)("componentId",e.componentId)},dependencies:[B.R],encapsulation:2,changeDetection:0}),h}()},90094:function(ce,A,i){i.d(A,{l:function(){return X}});var d=i(50423),B=i(18460),j=function(b){return{warningMessage:b}},X=function(){function h(){this.modulePath="@powerbi/ExploreUIAuthoring/lazy-modules/pane-formatting/pane-formatting.module#PaneFormattingModule",this.componentId="WarningComponentId"}return h.\u0275fac=function(C){return new(C||h)},h.\u0275cmp=d.\u0275\u0275defineComponent({type:h,selectors:[["warning-eager"]],inputs:{warningMessage:"warningMessage"},decls:1,vars:5,consts:[[3,"inputArgs","modulePath","componentId"]],template:function(C,e){1&C&&d.\u0275\u0275element(0,"pbi-lazy-load",0),2&C&&d.\u0275\u0275property("inputArgs",d.\u0275\u0275pureFunction1(3,j,e.warningMessage))("modulePath",e.modulePath)("componentId",e.componentId)},dependencies:[B.R],encapsulation:2,changeDetection:0}),h}()},42101:function(ce,A,i){i.d(A,{p:function(){return J}});var d=i(9844),b=(i(32441),i(78633),i(92278),i(90094),i(77476)),C=i(9398),e=i(76072),q=i(77906),z=i(50423),L={loadChildren:function(){return Promise.all([i.e(5),i.e("pane-formatting")]).then(i.bind(i,53150)).then(function(ne){return ne.PaneFormattingModule})}};e.E.addLazyLoadForLegacyMapping("@powerbi/ExploreUIAuthoring/lazy-modules/pane-formatting/pane-formatting.module#PaneFormattingModule",L.loadChildren);var E=[{path:"dummy-pane-formatting-lazy",loadChildren:L.loadChildren}],J=function(){function D(){}return D.\u0275fac=function(ue){return new(ue||D)},D.\u0275mod=z.\u0275\u0275defineNgModule({type:D}),D.\u0275inj=z.\u0275\u0275defineInjector({imports:[b.CommonModule,d.j,q.N,C.Bz.forChild(E)]}),D}()},21302:function(ce,A,i){i.d(A,{Ol:function(){return X},mF:function(){return j},sn:function(){return B}});var d=i(50423),B={type:3,name:"showFormatPane"},j={type:3,name:"showPageFormatPane"},X=new d.InjectionToken("PropertyChangeIndicatorService")},78432:function(ce,A,i){i.d(A,{An:function(){return E},Aw:function(){return ve},D1:function(){return k},H8:function(){return Pe},Ky:function(){return Ie},LF:function(){return J},N6:function(){return De},UV:function(){return D},Wx:function(){return v},ce:function(){return Be},hy:function(){return xe},m7:function(){return Oe},nB:function(){return L},nH:function(){return Se},so:function(){return Te},um:function(){return ue},w7:function(){return ne},wW:function(){return be},zS:function(){return Ae},zh:function(){return G}});var d=i(81337),B=i(9215),j=i(61617),X=i(50550),h=i(62458),b=i(32379),C=i(10746),e=i(5265),q=i(80981),z="___",L="container-object-name";function E(c,u){switch(c){case"VisualizationPane_Section_Analytics":return"VisualizationPane_Section_Analytics";case"Button":return"Button";case"Format_Label_General":return u.featureSwitches.onObject?"Properties":"Format_Label_General";case"Group":return"Group";case"Image":return"Image";case"Page":return"Page";case"BasicShape_ToolTip":return"BasicShape_ToolTip";case"Visual":return"Visual";default:h.fF.assertNever(c)}}function G(c){var u="".concat(z).concat(c.objectName).concat(z).concat(c.propertyName);return(0,j.$Q)(u,c.selector)}function J(c,u){return"".concat(u,"-").concat(c)}function D(c,u){return c.substring(u.length+1)}function ne(c,u){var O=u[c.objectName],V=O?.properties[c.propertyName];return V}function ue(c,u){var O=null;if(c){if((0,B.q4)(c))return E("Group",u);O=c.config.singleVisual.visualType}switch(O){case"actionButton":return E("Button",u);case"image":return E("Image",u);case"shape":return E("BasicShape_ToolTip",u);default:return E("Visual",u)}}function k(c){var u=c?.config.singleVisual;return!u||(0,q.xj)(u)}function ve(c,u,O){void 0===O&&(O=!1);for(var V=0,R=u;V<R.length;V++){var x=R[V],K=c[x.objectName],le=!0,ge=x.selector;if(K){for(var Ce=0,ie=K;Ce<ie.length;Ce++){var oe=ie[Ce];(ge&&((0,b.fS)(oe.selector,ge)||_.has(x,"altConstantValueSelector")&&(0,b.fS)(oe.selector,x.altConstantValueSelector))||O&&oe.selector||!ge&&!O)&&delete oe.properties[x.propertyName],le=le&&_.isEmpty(oe.properties)}le&&delete c[x.objectName]}}}function v(c){var u={},O={};c.forEach(function(x){x.canvasItems.forEach(function(K){var le=K.name;O[le]=K,u[le]||(u[le]=[]),u[le].push(x)})});var V=[];for(var R in u)V.push({canvasItem:O[R],descriptors:u[R].map(function(x){return(0,d.pi)((0,d.pi)({},x),{canvasItems:void 0})})});return V}function xe(c,u,O,V){return c===u&&(0,b.fS)(O,V)}function be(c,u,O,V){if(!c||!u)return!1;for(var R=function(ie){var oe=u[ie.objectName];if(oe)for(var ye=0,Fe=oe;ye<Fe.length;ye++){var me=Fe[ye];if(V){if(!me.properties[ie.propertyName])continue;if(!ie.selector||(0,b.fS)(me.selector,ie.selector)||(0,b.fS)(me.selector,ie.altConstantValueSelector))return{value:!0}}else if(me.properties[ie.propertyName])return{value:!0}}if(O&&_.find(O.changes,function(ze){return ze.objectName===ie.objectName&&ze.propertySlice.name===ie.propertyName}))return{value:!0}},x=0,K=c;x<K.length;x++){var ge=R(K[x]);if("object"==typeof ge)return ge.value}return!1}function Pe(c){return{objectName:c.objectName,propertyName:c.propertySlice.name,propertyValue:c.propertySlice.value,propertyType:c.propertySlice.type,altConstantValueSelector:c.propertySlice.altConstantValueSelector,selector:c.propertySlice.selector}}function Se(c,u){var V={objectName:u.objectName,propertySlice:{name:u.propertyName,value:u.propertyValue,type:u.propertyType,altConstantValueSelector:u.altConstantValueSelector,selector:u.selector},hasDynamicExpressionSupport:!1};return V.hasDynamicExpressionSupport=function(c,u){var O=c.config.singleVisual.query,R=(0,e.NA)(c.config.singleVisual.objects,{objectName:u.objectName,propertyName:u.propertySlice.name},u.propertySlice.selector);return!(!R||!(0,C.oA)(R,u.propertySlice.selector,O?O.defn.select():(0,X.bv)()).length)}(c,V),V}function Oe(c,u,O,V){var R=V.visualPlugin&&V.visualPlugin.capabilities(O);if(R&&R.supportsSynchronizingFilterState){var x=R.objects[c];if(x){var K=x.properties[u];if(K&&K.filterState)return!0}}return!1}function Ae(c,u){c&&c.syncFilterState(u)}function De(c){return void 0!==c.reference}function Ie(c){return c.isTopLevelToggle}function Te(c){var u=c.visualObjects,O=_.some(u,function(V){return"visual-area"===V.objectName});return O&&u.length>1&&h.fF.assertFail("Visual area sub selectable should only have one visual object"),O}function Be(c){var u=[],O=c.control.type;switch(O){case"MarginPadding":var V=c.control.properties,R=Ve(c);u=[pe(V.top,R),pe(V.bottom,R),pe(V.left,R),pe(V.right,R)];break;case"FontControl":var x=c.control.properties,K=Ve(c);x.fontSize&&u.push(pe(x.fontSize,K)),x.fontFamily&&u.push(function(c,u){return(0,d.pi)((0,d.pi)({},u),{control:{type:"FontPicker",properties:c},uid:G(c.descriptor)})}(x.fontFamily,K)),x.bold&&u.push(fe(x.bold,K)),x.italic&&u.push(fe(x.italic,K)),x.underline&&u.push(fe(x.underline,K));break;default:h.fF.assertNever(O)}return u}function Ve(c){return{aliasNames:[],description:"",displayName:"",conditionalFormattingObjects:void 0,conditionalFormattingWarning:void 0,control:void 0,disabled:c.disabled,hidden:c.hidden,disabledReason:c.disabledReason,groupUid:c.groupUid,infoIconText:void 0,originSource:c.originSource,pivotSource:c.pivotSource,placeHolderText:void 0,saveCallback:void 0,showChangeIndicator:c.showChangeIndicator,suppressDisplayName:c.suppressDisplayName,uid:void 0,warningMessage:void 0}}function pe(c,u){return(0,d.pi)((0,d.pi)({},u),{control:{type:"NumUpDown",properties:c},uid:G(c.descriptor)})}function fe(c,u){return(0,d.pi)((0,d.pi)({},u),{control:{type:"ToggleSwitch",properties:c},uid:G(c.descriptor)})}},89535:function(ce,A,i){i.d(A,{Kj:function(){return X},YR:function(){return b},lD:function(){return j},r4:function(){return h},y5:function(){return C}});var d=i(19650),B=i(50423),j=function(){return function(L,E){this.value=L,this.equals=E}}(),X=new B.InjectionToken("SliceCustomizationService"),h=6,b=60,C={left:d.H.left,center:d.H.center,right:d.H.right,Auto:d.H.auto}},14029:function(ce,A,i){i.r(A),i.d(A,{ExploreUIThumbnailModule:function(){return ke}});var d=i(81337),B=i(33567),j=i(14463),X=i(8590),h=i(60661),b=i(71216),C=i(47245),e=i(18503),q=i(91615),z=i(47343),L=i(61036),E=i(39681),G=i(38078),J=i(5265),D=i(74082),ne=i(30794),ue=i(59017),k=i(14172),ve=i(83317),v=i(50423),xe=i(1368),he=i(29866),be=i(17966),Pe=i(11494),Se=i(39503),Oe=i(77200),Ae=i(86843),Me=i(67799),De=i(9380),Ie=i(40956),Te=i(58991),Be=i(65181),Ve=i(2330),pe=i(67660),fe=i(98136),Ee=i(66977),c=i(80277),u=i(79281),O=i(1599),V=i(77476),R=i(98885),x=i(46101),K=i(91399);function le(P,I){if(1&P&&v.\u0275\u0275element(0,"single-visual-host",6),2&P){var T=v.\u0275\u0275nextContext();v.\u0275\u0275property("visual",T.visual)("visualViewport",T.visualViewport)("themeCollection",T.themeCollection)("config",T.singleVisualHostConfig)}}function ge(P,I){if(1&P&&v.\u0275\u0275element(0,"analysis-visual-host-lazy",7),2&P){var T=v.\u0275\u0275nextContext();v.\u0275\u0275property("visualDefinition",T.visualDefinition)("visualContainer",T.visual)}}function Ce(P,I){if(1&P&&v.\u0275\u0275element(0,"qna-visual-host-lazy",7),2&P){var T=v.\u0275\u0275nextContext();v.\u0275\u0275property("visualDefinition",T.visualDefinition)("visualContainer",T.visual)}}function ie(P,I){if(1&P&&v.\u0275\u0275element(0,"canvas-visual-error-overlay",8),2&P){var T=v.\u0275\u0275nextContext();v.\u0275\u0275property("errorInfo",T.errorInfo)("viewMode",T.viewMode)("viewport",T.viewport)}}var ye=function(){function P(I,T,H,Le,Ye,qe,et,tt,nt,it,Ue,ot,at,We,rt,lt,we,je,st,Re,ct){var M,He,ae=this;this.authenticationService=I,this.bookmarkService=T,this.eventBridge=H,this.explorationNavigation=Le,this.featureSwitchService=Ye,this.geocoder=qe,this.geolocationService=et,this.localizationService=tt,this.moduleLoader=nt,this.promiseFactory=it,this.themeService=Ue,this.viewModeState=ot,this.visualHostArtifactService=at,this.visualHostTooltipServiceFactory=We,this.visualHostTelemetryServiceFactory=rt,this.visualPlugin=lt,this.visualPluginOps=we,this.uiComponent=je,this.azureMapTokenCache=st,this.azureMapsEndpoint=Re,this.geocoderIndexedDB=ct,this.destroy$=new ne.xQ;var ut=(M=this.explorationNavigation).sections$,gt=(0,ue.aj)([ut,M.currentSection$]).pipe((0,k.U)(function(N){var se=N[1];return N[0].map(function(Y){return{name:Y.name,displayName:Y.displayName,isActive:Y.name===se?.name,isHidden:(0,b.aV)(Y),isTooltip:(0,b.H$)(Y)}})}),(0,ve.R)(this.destroy$)),dt=(He=this.bookmarkService).bookmarks$,mt=(0,ue.aj)([dt,He.activeBookmark$]).pipe((0,k.U)(function(N){var se=N[1];return N[0].map(function(Y){var de;return{name:Y.name,displayName:Y.displayName,isActive:Y.name===se?.name,parentName:null===(de=Y.parentGroup)||void 0===de?void 0:de.name}})}),(0,ve.R)(this.destroy$));this.singleVisualHostConfig={notifyStart:_.noop,notifyEnd:_.noop,clearQueryErrors:function(){return ae.clearErrorState()},handleQueryErrors:function(ee){return ae.setErrorState(ee.getDetails(ae.localizationService),ee.code,ee.source)},handleQueryWarnings:_.noop,queryVisualHostServices:{getFilters:function(ee,se){var Y=ae.explorationNavigation;return ee.calculateVisualContainerFilter(Y.getCurrentExploration(),Y.getCurrentSection(),ae.visual,se)},getDataSourceVariables:function(){var ee=ae.explorationNavigation.getCurrentExploration();return ee&&ee.dataSourceVariables}},visualHostServices:(0,E.ED)((0,C.q)({geocoder:this.geocoder,geolocation:this.geolocationService,localizationService:this.localizationService,authenticationService:this.authenticationService,moduleLoader:this.moduleLoader,promiseFactory:this.promiseFactory,visualHostTooltipService:this.visualHostTooltipServiceFactory.create(),getAzureMapToken:function(){return ae.azureMapTokenCache.getAzureMapToken()},azureMapsEndpoint:this.azureMapsEndpoint,geocoderIndexedDB:this.geocoderIndexedDB}),function(N){N.getLocalizedString=function(ee){for(var se,Y=[],de=1;de<arguments.length;de++)Y[de-1]=arguments[de];return(se=ae.localizationService).format.apply(se,(0,d.ev)([ee],Y||[],!1))},N.getViewMode=function(){return ae.viewModeState.getMode()},N.locale=function(){return(0,L.uD)()},N.promiseFactory=function(){return ae.promiseFactory},N.getSectionsMetadata$=function(){return gt},N.getBookmarksMetadata$=function(){return mt},N.getUIComponentFactory=function(){return ae.uiComponent.getUIComponentFactory(null)},N.telemetry=function(){return ae.telemetryService},N.artifactService=function(){return ae.visualHostArtifactService}}),interactivityOptions:{overflow:"hidden"},additionalObjectUpdates:void 0,disableQueryCacheUpdates:!1,noLoadMore:!0}}return P.prototype.ngOnInit=function(){var I=this;this.evaluateObjectDefinitions(),this.fetchThemeCollection(),this.setVisualViewport(),this.applyStyles(),this.visualDefinition=this.createVisualDefinition(),this.instanceId=G.b$.generateGuid(),this.telemetryService=this.visualHostTelemetryServiceFactory.create(this.visualDefinition.type,this.visual.name,this.instanceId),this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager().subscribe(q.kx,function(){return I.fetchThemeCollection()}).subscribe(X.jCS,function(T,H){H&&I.visual&&H.affectContainer(I.visual)&&I.evaluateObjectDefinitions()})},P.prototype.ngOnDestroy=function(){this.subscriptionManager.unsubscribeAll(),this.destroy$.next(),this.destroy$.complete()},P.prototype.isAnalysisVisual=function(){return this.visualPluginOps.isAnalysisVisual(this.visual.config.singleVisual.visualType)},P.prototype.isQnaVisual=function(){return this.visualPluginOps.isQnaVisual(this.visual.config.singleVisual.visualType)},P.prototype.clearErrorState=function(){this.errorInfo=null},P.prototype.setErrorState=function(I,T,H){this.errorInfo={code:T,details:I,fixableError:0,hideSeeDetails:!0,overlayType:(0,e.fe)(T),source:H}},P.prototype.evaluateObjectDefinitions=function(){var I=this.explorationNavigation.getCurrentExploration(),T=(0,h.VH)(I&&I.themeCollection||{},this.themeService,this.visual,this.featureSwitchService.featureSwitches);this.objects=T.dataViewObjects},P.prototype.fetchThemeCollection=function(){var I=this.explorationNavigation.getCurrentExploration();this.themeCollection=I&&I.themeCollection},P.prototype.setVisualViewport=function(){this.visualViewport={width:2*this.viewport.width,height:2*this.viewport.height,scale:.5}},P.prototype.applyStyles=function(){this.style=new z.Y,this.visualStyle=new z.Y,this.style.viewport(this.viewport);var I=(0,h.Mo)(this.objects&&this.objects.background),T=(0,h._L)(this.visualViewport,.5);this.visualStyle.addAttributes(T);var H=(0,h.O$)(I);this.visualStyle.addAttributes(H),this.visualStyle.apply()},P.prototype.createVisualDefinition=function(){var I=this,T=this.visual.config.singleVisual.visualType,H=(0,J.NA)((0,h.Qg)(this.visual),{objectName:"stylePreset",propertyName:"name"},void 0);return{interactivityOptions:this.singleVisualHostConfig.interactivityOptions,type:T,visualName:this.visual.name+"-thumbnail",allowInvalidDataView:!0,themeCollection:this.themeCollection,viewport:this.visualViewport,dataTransforms:{objects:(0,h.GQ)(this.visual)},hostServices:this.singleVisualHostConfig.visualHostServices,visualAdapterHostServices:{startProgressBar:function(){return I.singleVisualHostConfig.notifyStart()},stopProgressBar:function(){return I.singleVisualHostConfig.notifyEnd()},getNextDataSegment:function(){return I.promiseFactory.reject()}},stylePresetName:H&&(0,D.VC)(H)&&H.value,additionalObjectUpdates:this.singleVisualHostConfig.additionalObjectUpdates,visualPlugin:this.visualPlugin}},P.\u0275fac=function(T){return new(T||P)(v.\u0275\u0275directiveInject(xe.A),v.\u0275\u0275directiveInject(be.F),v.\u0275\u0275directiveInject(Pe.J),v.\u0275\u0275directiveInject(Se.z),v.\u0275\u0275directiveInject(De.vZ),v.\u0275\u0275directiveInject(Ie.i),v.\u0275\u0275directiveInject(B._1),v.\u0275\u0275directiveInject(Be.o),v.\u0275\u0275directiveInject(Ve.m),v.\u0275\u0275directiveInject(j.t),v.\u0275\u0275directiveInject(pe.f),v.\u0275\u0275directiveInject(Oe.kc),v.\u0275\u0275directiveInject(Ae.k),v.\u0275\u0275directiveInject(fe.q),v.\u0275\u0275directiveInject(Me.S),v.\u0275\u0275directiveInject(he.D),v.\u0275\u0275directiveInject(Ee.f),v.\u0275\u0275directiveInject(u.U),v.\u0275\u0275directiveInject(c.o),v.\u0275\u0275directiveInject(Te.A),v.\u0275\u0275directiveInject(O.W))},P.\u0275cmp=v.\u0275\u0275defineComponent({type:P,selectors:[["visual-container-thumbnail"]],inputs:{viewport:"viewport",visual:"visual"},decls:7,vars:6,consts:[[3,"apply-style"],[1,"thumbnailContainer","disable-visual-interactivity","themableBackgroundColorSolid",3,"apply-style"],[1,"visualContainerScreen"],[3,"visual","visualViewport","themeCollection","config",4,"ngIf"],[3,"visualDefinition","visualContainer",4,"ngIf"],[3,"errorInfo","viewMode","viewport",4,"ngIf"],[3,"visual","visualViewport","themeCollection","config"],[3,"visualDefinition","visualContainer"],[3,"errorInfo","viewMode","viewport"]],template:function(T,H){1&T&&(v.\u0275\u0275elementStart(0,"div",0)(1,"div",1),v.\u0275\u0275element(2,"div",2),v.\u0275\u0275template(3,le,1,4,"single-visual-host",3),v.\u0275\u0275template(4,ge,1,2,"analysis-visual-host-lazy",4),v.\u0275\u0275template(5,Ce,1,2,"qna-visual-host-lazy",4),v.\u0275\u0275elementEnd(),v.\u0275\u0275template(6,ie,1,3,"canvas-visual-error-overlay",5),v.\u0275\u0275elementEnd()),2&T&&(v.\u0275\u0275property("apply-style",H.style),v.\u0275\u0275advance(1),v.\u0275\u0275property("apply-style",H.visualStyle),v.\u0275\u0275advance(2),v.\u0275\u0275property("ngIf",!H.isAnalysisVisual()),v.\u0275\u0275advance(1),v.\u0275\u0275property("ngIf",H.isAnalysisVisual()&&!H.errorInfo),v.\u0275\u0275advance(1),v.\u0275\u0275property("ngIf",H.isQnaVisual()&&!H.errorInfo),v.\u0275\u0275advance(1),v.\u0275\u0275property("ngIf",H.errorInfo))},dependencies:[V.NgIf,R.f,x.v,K.s],styles:[".draggable-root-dragging[_nghost-%COMP%]{opacity:0}.ui-draggable-dragging[_nghost-%COMP%]{border:2px solid var(--theme-primary-color, #F2C811)}[_nghost-%COMP%]   .thumbnailContainer[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;transform-origin:0 0;overflow:hidden}"]}),P}(),me={loadChildren:function(){return Promise.resolve().then(i.bind(i,14029)).then(function(I){return I.ExploreUIThumbnailModule})}};i(76072).E.addLazyLoadForLegacyMapping("@powerbi/ExploreUIThumbnail/module#ExploreUIThumbnailModule",me.loadChildren);var ze=[{path:"dummy-explore-ui-thumbnail",loadChildren:me.loadChildren}],Ge=i(9398),Ke=i(32288),Qe=i(77906),Xe=i(95859),Ze=i(52950),Je=[{type:ye,componentId:"VisualContainerThumbnailComponentId"}],ke=function(){function P(){}return P.\u0275fac=function(T){return new(T||P)},P.\u0275mod=v.\u0275\u0275defineNgModule({type:P}),P.\u0275inj=v.\u0275\u0275defineInjector({imports:[V.CommonModule,Ke.J,Qe.N.withManifests(Je),Xe.v,Ge.Bz.forChild(ze),Ze.g]}),P}()},55525:function(ce,A,i){i.d(A,{P:function(){return B}});var B=new(i(50423).InjectionToken)("mobileVisualFormattingSettingsService")},43104:function(ce,A,i){i.r(A),i.d(A,{MobileExploreAuthoringModule:function(){return Vn}});var d=i(81337),B=i(41114),j="MBI.MobileAutoGenerateLayout.LayoutGenerated",h=(B.cx[j]=(0,B.b1)(j),i(14172)),b=i(8590),C=i(46544),e=i(50423),q=i(58938),z=i(11494),L=i(84281),E=i(59142),G=i(63387),J=i(28894),D=i(65181),ne=function(){function n(t,o,a,l,r,s,g,m,f){this.modernDialogService=t,this.eventBridge=o,this.explorationNavigationEXService=a,this.layoutAuthoring=l,this.lazyScoped=r,this.localizationService=s,this.telemetryService=g,this.undoRedo=m,this.certifiedEventsService=f}return n.prototype.generateAutoMobileLayout=function(t){return(0,d.mG)(this,void 0,void 0,function(){var o,a,l=this;return(0,d.Jh)(this,function(r){return o=this.explorationNavigationEXService.getCurrentExploration(),a=this.explorationNavigationEXService.getCurrentSection(),this.isMobileLayoutExists()?[2,this.modernDialogService.promptHostSimpleDialog("CreateAutoLayoutConfirmation",{title:this.localizationService.get("MobileAuthoring_AutoCreateAlert_Headline"),message:this.localizationService.get("MobileAuthoring_AutoCreateAlert_Message"),okButtonText:this.localizationService.get("Replace"),cancelButtonText:this.localizationService.get("Cancel_ButtonText")},{panelClass:["legacy-dialog"]}).then(function(s){1===s&&l.undoRedo.register("removeAndCreateAutoMobileLayout",function(){l.layoutAuthoring.removeLayoutFromSection(a,1,o,!0),l.createAndApplyLayout(t,!0)})})]:(this.undoRedo.register("removeAndCreateAutoMobileLayout",function(){l.createAndApplyLayout(t,!1)}),[2])})})},n.prototype.createAndApplyLayout=function(t,o){var a;return(0,d.mG)(this,void 0,void 0,function(){var l,r,s,g,m,f,y,S,F,w;return(0,d.Jh)(this,function(Q){switch(Q.label){case 0:return l=this.explorationNavigationEXService.getCurrentExploration(),r=this.explorationNavigationEXService.getCurrentSection(),s=this.explorationNavigationEXService.getCurrentExploreCanvas(),[4,this.lazyScoped.get("mobileAutoLayoutService")];case 1:for(g=Q.sent(),m=Date.now(),f=g.createAutoMobileLayout(r,{useStylableVisualContainerHeader:null===(a=l.settings)||void 0===a?void 0:a.useStylableVisualContainerHeader}),y=function(W){var te=_.find(r.visualContainers,function(re){return re.name===W.name});W.layouts[1]&&S.layoutAuthoring.addLayoutToVisualContainer(s,te,W.layouts[1].position,!0)},S=this,F=0,w=f;F<w.length;F++)y(w[F]);return this.eventBridge.publishToChannel(b.wAN),this.certifiedEventsService.logTimedStandardizedFeatureEvent({correlationId:this.telemetryService.root.id,activityName:j,activityAttributes:{caller:t,hadPreviousLayout:o,sectionId:r.objectId},resultCode:null,featureName:"".concat("Mobile report authoring",", ").concat("Mobile report layout was auto-created"),activityStatus:"Succeeded",operationStartTime:m,operationEndTime:Date.now()}),[2]}})})},Object.defineProperty(n.prototype,"autoLayoutActionDisabled$",{get:function(){return this.explorationNavigationEXService.currentSection$.pipe((0,h.U)(function(o){var a;return 0===(null===(a=o.visualContainers)||void 0===a?void 0:a.length)}))},enumerable:!1,configurable:!0}),n.prototype.isMobileLayoutExists=function(){return 0!==this.layoutAuthoring.visualsInLayout(this.explorationNavigationEXService.getCurrentSection(),1).length},n.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275inject(q.x),e.\u0275\u0275inject(z.J),e.\u0275\u0275inject(E.I),e.\u0275\u0275inject(G.U),e.\u0275\u0275inject(J.H),e.\u0275\u0275inject(D.o),e.\u0275\u0275inject(C.y0),e.\u0275\u0275inject(L.z),e.\u0275\u0275inject(C.ly))},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n}(),ue=i(59968),k=i(77476),ve=i(85102),v=function(){function n(t){this.layoutGenerator=t}return n.prototype.generateAutoLayout=function(){this.layoutGenerator.generateAutoMobileLayout("mobileCanvasEmptyState")},Object.defineProperty(n.prototype,"autoLayoutActionDisabled$",{get:function(){return this.layoutGenerator.autoLayoutActionDisabled$},enumerable:!1,configurable:!0}),n.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(ne))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["mobile-canvas-empty-state"]],features:[e.\u0275\u0275ProvidersFeature([ne])],decls:9,vars:12,consts:[[1,"mobileEmptyState"],[1,"mobileEmptyStateSVG"],["localize","CreateMobileAuthoring_Button",1,"heading"],["localize","MobileAuthoring_EmptyState_Content",1,"subHeading"],["localize","MobileAuthoring_CreateAutoLayout",1,"pbi-fluent-button","primary","primaryBtn",3,"disabled","click"]],template:function(o,a){1&o&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"div",1)(2,"h1",2),e.\u0275\u0275pipe(3,"localize"),e.\u0275\u0275element(4,"h2",3),e.\u0275\u0275pipe(5,"localize"),e.\u0275\u0275elementStart(6,"button",4),e.\u0275\u0275listener("click",function(){return a.generateAutoLayout()}),e.\u0275\u0275pipe(7,"localize"),e.\u0275\u0275pipe(8,"async"),e.\u0275\u0275elementEnd()()),2&o&&(e.\u0275\u0275advance(2),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(3,4,"CreateMobileAuthoring_Button")),e.\u0275\u0275advance(2),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(5,6,"MobileAuthoring_EmptyState_Content")),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(8,10,a.autoLayoutActionDisabled$)),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(7,8,"MobileAuthoring_CreateAutoLayout")))},dependencies:[ue.X,k.AsyncPipe,ve.F],styles:['.heading[_ngcontent-%COMP%]{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--xlg-font-size, 20px);font-weight:var(--font-weight-semi-bold, 600);-webkit-user-select:none;-ms-user-select:none;user-select:none;cursor:default;color:#242424}.subHeading[_ngcontent-%COMP%]{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-regular, 400);margin-top:8px;margin-bottom:24px;-webkit-user-select:none;-ms-user-select:none;user-select:none;cursor:default;color:#323130;padding:0 10px}.mobileEmptyState[_ngcontent-%COMP%]{text-align:center;align-items:center;display:flex;flex-direction:column;position:absolute;z-index:1000;top:0;left:-10px;width:344px;height:100%;background:#FFF}.mobileEmptyState[_ngcontent-%COMP%]   .mobileEmptyStateSVG[_ngcontent-%COMP%]{background-image:url('+i.p+"../images/mobileEmptyState.svg);background-repeat:no-repeat;background-position:center;width:293px;height:251px;padding-top:55px}.mobileEmptyState[_ngcontent-%COMP%]   .primaryBtn[_ngcontent-%COMP%]:disabled{opacity:.2;color:var(--colorButtonPrimaryForeground);background-color:var(--colorButtonPrimaryBackground);border-color:var(--colorButtonPrimaryBorder)}"]}),n}(),xe=i(93247),he=i(62458),be=i(60661),Pe=i(64560),Se=i(30794),Oe=i(35510),Ae=i(59973),Me=i(83317),De=function(){function n(t,o){var a=this;this.menu=o,this.onDestroy$=new Se.xQ,this.items=new Set(t);var l=t.find(function(r){return r.checked});this.selected$=new Oe.X(l),this.menu&&this.menu.pbiMenuButtonClick.pipe((0,Ae.h)(function(r){return a.items.has(r)}),(0,Me.R)(this.onDestroy$)).subscribe(function(r){return a.select(r)})}return n.prototype.destroy=function(){this.onDestroy$.next(),this.onDestroy$.unsubscribe()},n.prototype.select=function(t){this.selected$.value&&(this.selected$.value.checked=!1),t.checked=!0,this.selected$.next(t)},n}(),Ie=i(80357),Te=i(21023),Be=i(39503),Ve=i(17328),pe=i(21024),fe=i(5467),Ee=i(9380),c=i(66977),u=i(50057),O=i(50264),V=i(35756),R=i(80649),x=i(36858),K=i(74913),le=i(3579),ge=i(47343),Ce=i(82762),ie=i(26898),oe=i(83008),ye=i(13702),Fe=i(29866),me=i(91399),ze=i(18460),Ge=i(53267),Ke=function(t){return{hiddenVisual:t}},Qe=function(){return{centerOffset:!0}},Xe=function(t,o){return{visual:t,viewport:o}},Ze=function(){function n(t,o,a,l,r){this.localizationService=t,this.conceptualSchemaProxy=o,this.dataSources=a,this.displayNameService=l,this.visualPlugin=r,this.style=new ge.Y,this.exploreUIThumbnailModulePath="@powerbi/ExploreUIThumbnail/module#ExploreUIThumbnailModule"}return n.prototype.ngOnInit=function(){this.applyVisualStyle(),this.generateTitle()},n.prototype.isVisualHidden=function(){return(0,be.Pu)(this.visual)},n.prototype.getDragContext=function(){var t=this;return function(){return{source:t.visual}}},n.prototype.applyVisualStyle=function(){this.noBorderViewport={height:this.viewport.height,width:this.viewport.width-2},this.style.viewport(this.viewport)},n.prototype.generateTitle=function(){var t=this,o=this.dataSources.get();this.visualTitle$=(0,Ce.D)(this.conceptualSchemaProxy.get(o)).pipe((0,h.U)(function(a){var l,r=(0,be.PQ)(t.visual),s=t.visualPlugin.capabilities((0,le.s)(t.visual));return null===(l=t.displayNameService.getVisualTitle(r,a,s,void 0,void 0,!0))||void 0===l?void 0:l.text}))},n.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(D.o),e.\u0275\u0275directiveInject(ie.i),e.\u0275\u0275directiveInject(oe.D),e.\u0275\u0275directiveInject(ye.O),e.\u0275\u0275directiveInject(Fe.D))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["mobile-visual-container-thumbnail-wrapper"]],inputs:{viewport:"viewport",visual:"visual"},decls:8,vars:19,consts:[[3,"apply-style","ngClass"],[1,"thumbnailHeader"],[1,"trimmedTextWithEllipsis"],[1,"glyphicon","visualVisibilityIcon",3,"ngClass"],["tabindex","0","focusElement","",1,"thumbnailContainerWrapper",3,"drag","dragConfig","getDragContext"],[3,"modulePath","componentId","inputArgs"]],template:function(o,a){1&o&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"div",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",4),e.\u0275\u0275element(7,"pbi-lazy-load",5),e.\u0275\u0275elementEnd()()),2&o&&(e.\u0275\u0275property("apply-style",a.style)("ngClass",e.\u0275\u0275pureFunction1(13,Ke,a.isVisualHidden())),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,11,a.visualTitle$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",a.isVisualHidden()?"pbi-glyph-hide3":"pbi-glyph-view"),e.\u0275\u0275attribute("title",a.isVisualHidden()?a.localizationService.get("ExplorationCanvasItemsPane_Hidden_Visual"):a.localizationService.get("ExplorationCanvasItemsPane_Shown_Visual")),e.\u0275\u0275advance(1),e.\u0275\u0275property("drag","visual-container-thumbnail")("dragConfig",e.\u0275\u0275pureFunction0(15,Qe))("getDragContext",a.getDragContext()),e.\u0275\u0275advance(1),e.\u0275\u0275property("modulePath",a.exploreUIThumbnailModulePath)("componentId","VisualContainerThumbnailComponentId")("inputArgs",e.\u0275\u0275pureFunction2(16,Xe,a.visual,a.noBorderViewport)))},dependencies:[k.NgClass,me.s,ze.R,Ge.w,k.AsyncPipe],styles:['.thumbnailContainerWrapper.ui-draggable-dragging{border:2px solid var(--colorBrandForeground1)}[_nghost-%COMP%]{height:132px;display:block}[_nghost-%COMP%]:focus{outline:none}[_nghost-%COMP%]   .thumbnailHeader[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding-bottom:2px;font-size:11px;cursor:default}[_nghost-%COMP%]   .thumbnailHeader[_ngcontent-%COMP%]   .visualVisibilityIcon[_ngcontent-%COMP%]{font-size:11px;margin:0 2px 0 5px;align-self:flex-end;color:var(--fluent-theme-neutral-dark-color, #201F1E)}[_nghost-%COMP%]   .hiddenVisual[_ngcontent-%COMP%]{opacity:.3}[_nghost-%COMP%]   .thumbnailContainerWrapper[_ngcontent-%COMP%]{background-color:transparent;box-sizing:content-box;overflow:hidden;-webkit-background-clip:content;background-clip:content "-box";position:relative;display:block;border:1px solid var(--fluent-theme-neutral-quarter-alt-color, #E1DFDD)}[_nghost-%COMP%]   .thumbnailContainerWrapper.draggable-root-dragging[_ngcontent-%COMP%]{opacity:0}']}),n}();function Ct(n,t){if(1&n){var o=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",13),e.\u0275\u0275listener("click",function(l){e.\u0275\u0275restoreView(o);var r=e.\u0275\u0275nextContext().ngIf,s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.onOptionsClick(l,r.optionsSetting))}),e.\u0275\u0275pipe(1,"localize"),e.\u0275\u0275elementEnd()}2&n&&e.\u0275\u0275property("pbiTooltip",e.\u0275\u0275pipeBind1(1,1,"Pane_Options"))}function Je(n,t){1&n&&e.\u0275\u0275element(0,"div",27)}function ke(n,t){1&n&&e.\u0275\u0275element(0,"tri-svg-icon",28)}function P(n,t){if(1&n){var o=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",23),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(o);var r=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(r.applyAutoLayout())}),e.\u0275\u0275pipe(1,"localize"),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275template(3,Je,1,0,"div",24),e.\u0275\u0275template(4,ke,1,0,"tri-svg-icon",25),e.\u0275\u0275element(5,"span",26),e.\u0275\u0275elementEnd()}if(2&n){var a=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(2,6,a.autoLayoutActionDisabled$)),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(1,4,"CreateMobileAuthoring_Button")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!a.isTridentEnabled),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",a.isTridentEnabled)}}function I(n,t){1&n&&e.\u0275\u0275element(0,"div",29)}function T(n,t){1&n&&e.\u0275\u0275element(0,"tri-svg-icon",30)}function H(n,t){1&n&&e.\u0275\u0275element(0,"div",31)}function Le(n,t){1&n&&e.\u0275\u0275element(0,"tri-svg-icon",32)}var Ye=function(t){return{hasAutoLayout:t}};function qe(n,t){if(1&n){var o=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",14),e.\u0275\u0275template(1,P,6,8,"button",15),e.\u0275\u0275elementStart(2,"div",16)(3,"button",17),e.\u0275\u0275listener("pbiMenuButtonClick",function(r){e.\u0275\u0275restoreView(o);var s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.handleVisibilityFilterChange(r))}),e.\u0275\u0275pipe(4,"localize"),e.\u0275\u0275template(5,I,1,0,"div",18),e.\u0275\u0275template(6,T,1,0,"tri-svg-icon",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"button",20),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(o);var r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.clearAllVisualsFromCanvasPressed())}),e.\u0275\u0275pipe(8,"localize"),e.\u0275\u0275template(9,H,1,0,"div",21),e.\u0275\u0275template(10,Le,1,0,"tri-svg-icon",22),e.\u0275\u0275elementEnd()()()}if(2&n){var a=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(14,Ye,a.featureSwitchService.featureSwitches.mobileAutoReportLayout)),e.\u0275\u0275advance(1),e.\u0275\u0275property("pbiFeatureSwitch","mobileAutoReportLayout"),e.\u0275\u0275advance(2),e.\u0275\u0275property("pbiMenu",a.filterByVisibilityMenu),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(4,10,"Filter_By_Appearance")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!a.isTridentEnabled),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",a.isTridentEnabled),e.\u0275\u0275advance(1),e.\u0275\u0275property("disabled",a.isRemoveAllVisualsDisabled()),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(8,12,"RemoveAllVisuals_Title")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!a.isTridentEnabled),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",a.isTridentEnabled)}}function et(n,t){1&n&&e.\u0275\u0275element(0,"hr")}function tt(n,t){if(1&n){var o=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"li")(1,"mobile-visual-container-thumbnail-wrapper",37),e.\u0275\u0275listener("keydown",function(s){var m=e.\u0275\u0275restoreView(o).$implicit,f=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(f.onKeydown(s,m))})("dblclick",function(){var g=e.\u0275\u0275restoreView(o).$implicit,m=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(m.addThumbnailToNextFreeSpot(g))}),e.\u0275\u0275elementEnd()()}if(2&n){var a=t.$implicit,l=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275property("visual",a)("viewport",l.viewport)}}var nt=function(){return{ignoreOverlay:!1,ignoreMobile:!1}};function it(n,t){if(1&n&&(e.\u0275\u0275elementStart(0,"div",33)(1,"div",34)(2,"div",35)(3,"ul"),e.\u0275\u0275elementContainerStart(4),e.\u0275\u0275template(5,tt,2,2,"li",36),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()()()()),2&n){var o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275property("pbiScrollbar",e.\u0275\u0275pureFunction0(2,nt)),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",o.visuals)}}var Ue=function(t){return{isCollapsed:t}};function ot(n,t){if(1&n){var o=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"article",1)(1,"div",2),e.\u0275\u0275elementContainerStart(2),e.\u0275\u0275elementStart(3,"button",3),e.\u0275\u0275listener("click",function(){var s=e.\u0275\u0275restoreView(o).ngIf,g=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(g.toggle(!s.isPaneExpanded))}),e.\u0275\u0275pipe(4,"localize"),e.\u0275\u0275element(5,"div",4),e.\u0275\u0275elementStart(6,"div",5),e.\u0275\u0275element(7,"div",6),e.\u0275\u0275template(8,Ct,2,3,"div",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",8),e.\u0275\u0275element(10,"span",9),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(11,qe,11,16,"div",10),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(12,et,1,0,"hr",11),e.\u0275\u0275template(13,it,6,3,"div",12),e.\u0275\u0275elementEnd()}if(2&n){var a=t.ngIf;e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(13,Ue,!a.isPaneExpanded)),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(15,Ue,!a.isPaneExpanded)),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(4,11,"PageVisualsPane_Title"))("aria-expanded",!!a.isPaneExpanded),e.\u0275\u0275advance(2),e.\u0275\u0275property("hidden",!a.isPaneExpanded),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",a.isPaneExpanded?"pbi-glyph-doublechevronright ":"pbi-glyph-doublechevrondown "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",a.isPaneExpanded&&(null==a.optionsSetting?null:a.optionsSetting.showOptions)),e.\u0275\u0275advance(1),e.\u0275\u0275property("hidden",a.isPaneExpanded),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",a.isPaneExpanded),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",a.isPaneExpanded),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",a.isPaneExpanded)}}var at=window,rt=function(){function n(t,o,a,l,r,s,g,m,f,y,S){this.autoLayoutGenerator=t,this.eventBridge=o,this.explorationNavigation=a,this.formFactor=l,this.layoutAuthoring=r,this.localizationService=s,this.modernDialogService=g,this.panesVisibilityService=m,this.pbiMenuService=f,this.featureSwitchService=y,this.visualPluginOps=S,this.isTridentEnabled=at.isTrident,this.filterByVisibilityMenu={items:[{id:0,type:Pe.iB.Button,text:this.localizationService.get("All"),checkable:!0,checked:!0},{id:1,type:Pe.iB.Button,text:this.localizationService.get("Visible"),checkable:!0},{id:2,type:Pe.iB.Button,text:this.localizationService.get("Hidden_Upper_First"),checkable:!0}]},this.paneVisibility$=this.panesVisibilityService.getPanes$().pipe((0,h.U)(function(F){return F.pageVisuals})),this.visibilityFilterChosenItem=this.filterByVisibilityMenu.items[0]}return n.prototype.ngOnInit=function(){var t=this;this.scrollbarsConfig={ignoreOverlay:!1,ignoreMobile:!1},this.viewport={width:108,height:108},this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager().subscribe(b.wAN,function(){return t.updateVisuals()}).subscribe(b.aco,function(){return t.updateVisuals()}),this.updateVisuals()},n.prototype.ngAfterViewInit=function(){this.selectionModel=new De(this.filterByVisibilityMenu.items,this.menuTrigger)},n.prototype.ngOnDestroy=function(){this.subscriptionManager.unsubscribeAll(),this.selectionModel.destroy()},n.prototype.onOptionsClick=function(t,o){t.stopPropagation(),(0,Te.cc)(t,o,this.pbiMenuService)},n.prototype.isRemoveAllVisualsDisabled=function(){return 0===this.layoutAuthoring.visualsInLayout(this.explorationNavigation.getCurrentSection(),1).length},n.prototype.clearAllVisualsFromCanvasPressed=function(){var t=this;return this.modernDialogService.promptHostSimpleDialog("ClearAllVisualsConfirmDialog",{title:this.localizationService.get("RemoveAllVisuals_Title"),message:this.localizationService.get("RemoveAllVisuals_MessageContent"),okButtonText:this.localizationService.get("RemoveAllVisuals_OKText"),cancelButtonText:this.localizationService.get("RemoveAllVisuals_CancelText")},{panelClass:["legacy-dialog"]}).then(function(o){if(1===o){var a=t.explorationNavigation.getCurrentSection(),l=t.explorationNavigation.getCurrentExploration();t.layoutAuthoring.removeLayoutFromSection(a,1,l)}})},n.prototype.onKeydown=function(t,o){(t.keyCode===xe.K5||t.keyCode===xe.L_)&&this.addThumbnailToNextFreeSpot(o)},n.prototype.addThumbnailToNextFreeSpot=function(t){this.eventBridge.publishToChannel(b.JAC,{visualContainer:t})},n.prototype.toggle=function(t){this.panesVisibilityService.getVisibilityFor("pageVisuals").setPaneExpansion(t)},n.prototype.handleVisibilityFilterChange=function(t){this.visibilityFilterChosenItem=t,this.updateVisuals()},n.prototype.applyAutoLayout=function(){return(0,d.mG)(this,void 0,void 0,function(){return(0,d.Jh)(this,function(t){return this.autoLayoutGenerator.generateAutoMobileLayout("mobilePageVisualsPane"),[2]})})},Object.defineProperty(n.prototype,"autoLayoutActionDisabled$",{get:function(){return this.autoLayoutGenerator.autoLayoutActionDisabled$},enumerable:!1,configurable:!0}),n.prototype.updateVisuals=function(){var t=this,o=this.explorationNavigation.getCurrentSection(),a=this.formFactor.getCurrentLayout();he.fF.assertValue(o,"currentSection"),he.fF.assertValue(a,"currentLayout"),this.visuals=o.visualContainers.filter(function(l){if(l.layouts.withId(a))return!1;var r=t.visibilityFilterChosenItem;if(0===r.id)return!0;var s=(0,be.Pu)(l);return 2===r.id?s:!s})},n.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(ne),e.\u0275\u0275directiveInject(z.J),e.\u0275\u0275directiveInject(Be.z),e.\u0275\u0275directiveInject(Ve.F),e.\u0275\u0275directiveInject(G.U),e.\u0275\u0275directiveInject(D.o),e.\u0275\u0275directiveInject(q.x),e.\u0275\u0275directiveInject(pe.r),e.\u0275\u0275directiveInject(fe.o),e.\u0275\u0275directiveInject(Ee.vZ),e.\u0275\u0275directiveInject(c.f))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["mobile-page-visuals-pane"]],viewQuery:function(o,a){var l;(1&o&&e.\u0275\u0275viewQuery(Ie.l8,5),2&o)&&(e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(a.menuTrigger=l.first))},features:[e.\u0275\u0275ProvidersFeature([ne])],decls:2,vars:3,consts:[["class","sidePane rightSidePane visualizationPane smallFontSize","keyboard-shortcuts","ctrl-F6","focus-nav-mode","Group","focus-priority","6",3,"ngClass",4,"ngIf"],["keyboard-shortcuts","ctrl-F6","focus-nav-mode","Group","focus-priority","6",1,"sidePane","rightSidePane","visualizationPane","smallFontSize",3,"ngClass"],[1,"paneHeader"],["localizeTooltip","Pane_Toggle",1,"btn","toggleBtn",3,"ngClass","click"],["localize","PageVisualsPane_Title",1,"sidePaneHorizontalTitle","unselectable","sidePaneTitle","largeFontSize","trimmedTextWithEllipsis",3,"hidden"],[1,"collapse"],[1,"btnIcon","glyphicon","glyph-mini",3,"ngClass"],["class","btnIcon glyphicon glyph-small pbi-glyph-more",3,"pbiTooltip","click",4,"ngIf"],[1,"verticalTitle","verticalText",3,"hidden"],["localize","PageVisualsPane_Title",1,"collapsedVisualsTitle","largeFontSize"],["class","flex paneActions",3,"ngClass",4,"ngIf"],[4,"ngIf"],["class","paneContents flex",4,"ngIf"],[1,"btnIcon","glyphicon","glyph-small","pbi-glyph-more",3,"pbiTooltip","click"],[1,"flex","paneActions",3,"ngClass"],["class","paneActionButton autoLayoutAction","localizeTooltip","CreateMobileAuthoring_Button",3,"disabled","click",4,"pbiFeatureSwitch"],[1,"actionsWrapper"],["localizeTooltip","Filter_By_Appearance",1,"paneActionButton",3,"pbiMenu","pbiMenuButtonClick"],["class","glyphicon pbi-glyph-equalizer glyph-small",4,"ngIf"],["tri-svg-icon-16","","sprite","authoring-icons","name","options_16_regular","class","options-icon svgIcon","role","img","tabindex","0",4,"ngIf"],["localizeTooltip","RemoveAllVisuals_Title",1,"paneActionButton",3,"disabled","click"],["class","glyphicon pbi-glyph-eraser glyph-small",4,"ngIf"],["tri-svg-icon-16","","sprite","authoring-icons","name","eraser_16_regular","class","eraser-icon svgIcon","role","img","tabindex","0",4,"ngIf"],["localizeTooltip","CreateMobileAuthoring_Button",1,"paneActionButton","autoLayoutAction",3,"disabled","click"],["class","glyphicon glyph-small pbi-glyph-phone-optimized-report",4,"ngIf"],["tri-svg-icon-16","","sprite","authoring-icons","name","data_bar_vertical_phone_16_regular","class","autoLayoutIcon svgIcon","role","img","tabindex","0",4,"ngIf"],["localize","QuickCreate_CreateAutoGenerate",1,"autoLayoutText"],[1,"glyphicon","glyph-small","pbi-glyph-phone-optimized-report"],["tri-svg-icon-16","","sprite","authoring-icons","name","data_bar_vertical_phone_16_regular","role","img","tabindex","0",1,"autoLayoutIcon","svgIcon"],[1,"glyphicon","pbi-glyph-equalizer","glyph-small"],["tri-svg-icon-16","","sprite","authoring-icons","name","options_16_regular","role","img","tabindex","0",1,"options-icon","svgIcon"],[1,"glyphicon","pbi-glyph-eraser","glyph-small"],["tri-svg-icon-16","","sprite","authoring-icons","name","eraser_16_regular","role","img","tabindex","0",1,"eraser-icon","svgIcon"],[1,"paneContents","flex"],[1,"sectionHost","item-fill"],[3,"pbiScrollbar"],[4,"ngFor","ngForOf"],["tabindex","0","focusElement","",3,"visual","viewport","keydown","dblclick"]],template:function(o,a){1&o&&(e.\u0275\u0275template(0,ot,14,17,"article",0),e.\u0275\u0275pipe(1,"async")),2&o&&e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(1,1,a.paneVisibility$))},dependencies:[k.NgClass,k.NgForOf,k.NgIf,ue.X,u.r,O.P,V.q,Ie.l8,R.r,x.V,K.M,Ze,k.AsyncPipe,ve.F],styles:['.paneHeader[_ngcontent-%COMP%]   .toggleBtn.legacyToggleBtn[_ngcontent-%COMP%]{position:relative;cursor:default;box-sizing:border-box}.paneHeader[_ngcontent-%COMP%]   .toggleBtn.legacyToggleBtn[_ngcontent-%COMP%]   .sidePaneHorizontalTitle[_ngcontent-%COMP%]{cursor:default;font-family:Segoe UI Semilight,wf_segoe-ui_semilight,helvetica,arial,sans-serif}.paneHeader[_ngcontent-%COMP%]{display:flex;flex-direction:column}.paneHeader[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding-bottom:0;height:42px}.paneHeader[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .sidePaneHorizontalTitle[_ngcontent-%COMP%]{margin-top:0;line-height:normal}.paneHeader[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .btnIcon[_ngcontent-%COMP%]{margin:0 8px 0 0}.paneHeader[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{margin:0 0 4px}.paneHeader[_ngcontent-%COMP%]   .toggleBtn.isCollapsed[_ngcontent-%COMP%]{flex-direction:column}.paneHeader[_ngcontent-%COMP%]   .toggleBtn.isCollapsed[_ngcontent-%COMP%]   .btnIcon[_ngcontent-%COMP%]{margin:16px 8px 0;padding:0}.paneHeader[_ngcontent-%COMP%]   .toggleBtn.isCollapsed[_ngcontent-%COMP%]   .verticalTitle[_ngcontent-%COMP%]{top:65px}.paneHeader[_ngcontent-%COMP%]   .paneActions[_ngcontent-%COMP%]{justify-content:flex-end}.paneHeader[_ngcontent-%COMP%]   .paneActions.hasAutoLayout[_ngcontent-%COMP%]{justify-content:space-between}.paneHeader[_ngcontent-%COMP%]   .actionsWrapper[_ngcontent-%COMP%]{display:flex;justify-content:flex-start}.paneHeader[_ngcontent-%COMP%]   .paneActionButton[_ngcontent-%COMP%]{overflow:hidden;cursor:pointer;margin:0 12px;display:flex;background-color:initial;border:none}.paneHeader[_ngcontent-%COMP%]   .paneActionButton[_ngcontent-%COMP%]:hover, .paneHeader[_ngcontent-%COMP%]   .paneActionButton[_ngcontent-%COMP%]:active, .paneHeader[_ngcontent-%COMP%]   .paneActionButton[_ngcontent-%COMP%]:active:hover, .paneHeader[_ngcontent-%COMP%]   .paneActionButton[_ngcontent-%COMP%]:focus:hover{background-color:var(--fluent-theme-neutral-quarter-alt-color, #E1DFDD);color:inherit}.paneHeader[_ngcontent-%COMP%]   .paneActionButton[disabled][_ngcontent-%COMP%]{color:var(--fluent-theme-neutral-tertiary-color, #A19F9D);cursor:default;pointer-events:none}.paneHeader[_ngcontent-%COMP%]   .paneActionButton[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%], .paneHeader[_ngcontent-%COMP%]   .paneActionButton[_ngcontent-%COMP%]   .svgIcon[_ngcontent-%COMP%]{padding-top:2px}.paneHeader[_ngcontent-%COMP%]   .paneActionButton[_ngcontent-%COMP%]   .paneClearTitle[_ngcontent-%COMP%]{font-family:Segoe UI Semilight,wf_segoe-ui_semilight,helvetica,arial,sans-serif;margin-left:8px;overflow:hidden;text-overflow:ellipsis;text-transform:none;white-space:nowrap}.paneHeader[_ngcontent-%COMP%]   .autoLayoutAction[_ngcontent-%COMP%]{display:flex;margin:0 10px}.paneHeader[_ngcontent-%COMP%]   .autoLayoutText[_ngcontent-%COMP%]{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-regular, 400);margin:0 5px}.svgIcon[_ngcontent-%COMP%]{fill:var(--fluentThemeNeutralDarkColor)}.newPaneColors.explorationContainer[_nghost-%COMP%]   .visualizationPane[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .visualizationPane[_ngcontent-%COMP%], .explorationContainer[_nghost-%COMP%]   .visualizationPane[_ngcontent-%COMP%], .explorationContainer   [_nghost-%COMP%]   .visualizationPane[_ngcontent-%COMP%]{width:378px;max-width:378px}.newPaneColors.explorationContainer[_nghost-%COMP%]   .visualizationPane.isCollapsed[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .visualizationPane.isCollapsed[_ngcontent-%COMP%], .explorationContainer[_nghost-%COMP%]   .visualizationPane.isCollapsed[_ngcontent-%COMP%], .explorationContainer   [_nghost-%COMP%]   .visualizationPane.isCollapsed[_ngcontent-%COMP%]{width:32px}.newPaneColors.explorationContainer[_nghost-%COMP%]   .visualizationPane[_ngcontent-%COMP%]   .paneHeader[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .visualizationPane[_ngcontent-%COMP%]   .paneHeader[_ngcontent-%COMP%], .explorationContainer[_nghost-%COMP%]   .visualizationPane[_ngcontent-%COMP%]   .paneHeader[_ngcontent-%COMP%], .explorationContainer   [_nghost-%COMP%]   .visualizationPane[_ngcontent-%COMP%]   .paneHeader[_ngcontent-%COMP%]{height:80px}.newPaneColors.explorationContainer[_nghost-%COMP%]   .visualizationPane[_ngcontent-%COMP%]   .paneHeader[_ngcontent-%COMP%]   .paneActionButton[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .visualizationPane[_ngcontent-%COMP%]   .paneHeader[_ngcontent-%COMP%]   .paneActionButton[_ngcontent-%COMP%], .explorationContainer[_nghost-%COMP%]   .visualizationPane[_ngcontent-%COMP%]   .paneHeader[_ngcontent-%COMP%]   .paneActionButton[_ngcontent-%COMP%], .explorationContainer   [_nghost-%COMP%]   .visualizationPane[_ngcontent-%COMP%]   .paneHeader[_ngcontent-%COMP%]   .paneActionButton[_ngcontent-%COMP%]{padding:8px;margin:0 5px}.newPaneColors.explorationContainer[_nghost-%COMP%]   .visualizationPane[_ngcontent-%COMP%]   .paneHeader[_ngcontent-%COMP%]   .paneActionButton[aria-expanded=true][_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .visualizationPane[_ngcontent-%COMP%]   .paneHeader[_ngcontent-%COMP%]   .paneActionButton[aria-expanded=true][_ngcontent-%COMP%], .explorationContainer[_nghost-%COMP%]   .visualizationPane[_ngcontent-%COMP%]   .paneHeader[_ngcontent-%COMP%]   .paneActionButton[aria-expanded=true][_ngcontent-%COMP%], .explorationContainer   [_nghost-%COMP%]   .visualizationPane[_ngcontent-%COMP%]   .paneHeader[_ngcontent-%COMP%]   .paneActionButton[aria-expanded=true][_ngcontent-%COMP%]{background-color:var(--fluent-theme-neutral-quarter-alt-color, #E1DFDD)}.newPaneColors.explorationContainer[_nghost-%COMP%]   .visualizationPane[_ngcontent-%COMP%]   .paneHeader[_ngcontent-%COMP%]   .paneActionButton[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .visualizationPane[_ngcontent-%COMP%]   .paneHeader[_ngcontent-%COMP%]   .paneActionButton[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%], .explorationContainer[_nghost-%COMP%]   .visualizationPane[_ngcontent-%COMP%]   .paneHeader[_ngcontent-%COMP%]   .paneActionButton[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%], .explorationContainer   [_nghost-%COMP%]   .visualizationPane[_ngcontent-%COMP%]   .paneHeader[_ngcontent-%COMP%]   .paneActionButton[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%], .newPaneColors.explorationContainer[_nghost-%COMP%]   .visualizationPane[_ngcontent-%COMP%]   .paneHeader[_ngcontent-%COMP%]   .paneActionButton[_ngcontent-%COMP%]   .svgIcon[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .visualizationPane[_ngcontent-%COMP%]   .paneHeader[_ngcontent-%COMP%]   .paneActionButton[_ngcontent-%COMP%]   .svgIcon[_ngcontent-%COMP%], .explorationContainer[_nghost-%COMP%]   .visualizationPane[_ngcontent-%COMP%]   .paneHeader[_ngcontent-%COMP%]   .paneActionButton[_ngcontent-%COMP%]   .svgIcon[_ngcontent-%COMP%], .explorationContainer   [_nghost-%COMP%]   .visualizationPane[_ngcontent-%COMP%]   .paneHeader[_ngcontent-%COMP%]   .paneActionButton[_ngcontent-%COMP%]   .svgIcon[_ngcontent-%COMP%]{padding:0}.newPaneColors.explorationContainer[_nghost-%COMP%]   .visualizationPane[_ngcontent-%COMP%]   .paneContents[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .visualizationPane[_ngcontent-%COMP%]   .paneContents[_ngcontent-%COMP%], .explorationContainer[_nghost-%COMP%]   .visualizationPane[_ngcontent-%COMP%]   .paneContents[_ngcontent-%COMP%], .explorationContainer   [_nghost-%COMP%]   .visualizationPane[_ngcontent-%COMP%]   .paneContents[_ngcontent-%COMP%]{top:92px}.newPaneColors.explorationContainer[_nghost-%COMP%]   hr[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   hr[_ngcontent-%COMP%], .explorationContainer[_nghost-%COMP%]   hr[_ngcontent-%COMP%], .explorationContainer   [_nghost-%COMP%]   hr[_ngcontent-%COMP%]{border:solid var(--fluent-theme-neutral-quarter-alt-color, #E1DFDD);border-width:1px 0 0 0}.paneContents[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;list-style:none;padding:0;margin:6px 18px 0 12px}.paneContents[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:100%;height:auto}']}),n}(),lt=i(55525),we=i(9215),je=function(){function n(){}return n.prototype.getObjectDefinitions=function(t){if(t&&(0,we.Vz)(t))return t.config.singleVisual.mobileObjects},n.prototype.getVcObjectDefinitions=function(t){if(t&&(0,we.Vz)(t))return t.config.singleVisual.mobileVcObjects},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac=function(o){return new(o||n)}}),n}(),st=i(17774),Re=function(){function n(){}return n.prototype.shouldShowSliceChangeIndicator=function(t,o){return!!o&&!!(0,st.cH)(o,t.objectName,t.propertyName,void 0!==t.altConstantValueSelector?t.altConstantValueSelector:t.selector)},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac=function(o){return new(o||n)}}),n}(),ct=i(24408),M=i(20598),He=new Map([[M.e4,[M.e4]],[M.bb,[M.bb]],[M.vX,[M.vX]],[M.j6,[M.j6,M.of,M.Ih]],[M.of,[M.j6,M.of,M.Ih]],[M.K8,[M.K8]],[M.GV,[M.GV]],[M.Zr,[M.Zr]],[M.Ih,[M.j6,M.of,M.Ih]]]),ae=function(){function n(){}return n.prototype.customizeSliceDropdownOptions=function(t,o,a){return"slicerSettings-options-style"===a?t.filter(function(l){var r;return null===(r=He.get(o.value.toString()))||void 0===r?void 0:r.includes(l.value.toString())}):t},n.prototype.customizeSliceOptions=function(t){var o=this;_.forEach(t,function(a){if("Dropdown"===a.control.type&&ct.WN(a.control.properties)){var l=a.control.properties;l.items=o.customizeSliceDropdownOptions(l.items,l.value,a.uid)}})},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac=function(o){return new(o||n)}}),n}(),ut=i(21302),pt=i(89535),gt=i(45221),dt=i(22179),vt=i(21728),mt=i(84376),N=i(64647),ee=i(72262),se=i(56083),Y=i(32441),de=function(){function n(t){this.highContrastCssGenerationService=t,this.initializeHighContrastRules()}return n.prototype.initializeHighContrastRules=function(){this.highContrastCssGenerationService.addRule(".themeableElement .empty-pane-svg .emptyFormatting","{ fill: @foregroundColor !important; opacity: 1 !important; }"),this.highContrastCssGenerationService.addRule(".themeableElement .empty-pane-svg .themeColor","{ fill: none !important; opacity: 1 !important; }")},n.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(N.g))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["mobile-empty-formatting-pane-svg"]],decls:10,vars:0,consts:[["width","58","height","58","viewBox","0 0 58 58","fill","none","xmlns","http://www.w3.org/2000/svg"],["clip-path","url(#clip0)"],["d","M14.5039 40.4166V25.3715H23.5664V12.6804H34.4343V19.9375H43.4968V21.5128C43.2136 21.6426 42.9186 21.8019 42.6118 21.9907C42.305 22.1677 41.9982 22.3624 41.6914 22.5748V21.7429H34.4343V28.9823C34.1511 29.2891 33.862 29.5959 33.567 29.9027C33.2602 30.1977 32.9475 30.5045 32.6289 30.8231V14.5035H25.3718V36.3456C25.006 36.7704 24.6815 37.2129 24.3983 37.6731C24.1151 38.1333 23.8378 38.6112 23.5664 39.1068V27.1946H16.3093V40.5936L14.5039 40.4166Z",1,"themeableElement","emptyFormatting"],["d","M46.7897 23.9023C47.0139 24.1265 47.126 24.4392 47.126 24.8405C47.126 25.3715 46.9549 26.0146 46.6127 26.7698C46.2587 27.5132 45.8044 28.3038 45.2498 29.1416C44.6951 29.9794 44.0815 30.8349 43.4089 31.7081C42.7245 32.5813 42.0519 33.4014 41.3911 34.1685C40.7303 34.9355 40.1226 35.6258 39.568 36.2394C39.0016 36.8412 38.5591 37.3014 38.2405 37.62C37.9573 37.9032 37.6623 38.1982 37.3555 38.505C37.0369 38.8118 36.7183 39.1186 36.3997 39.4254C36.0811 39.7204 35.7684 40.0095 35.4615 40.2927C35.1547 40.5641 34.8715 40.8119 34.6119 41.0361C34.5647 40.3045 34.3936 39.6496 34.0986 39.0714C34.2874 38.8944 34.4998 38.6938 34.7358 38.4696C34.9718 38.2454 35.2196 38.0153 35.4792 37.7793C35.7389 37.5315 35.9985 37.2837 36.2581 37.0359C36.5059 36.7881 36.7419 36.5521 36.9661 36.3279C37.4971 35.7969 38.0517 35.2187 38.6299 34.5933C39.1963 33.9561 39.7627 33.3011 40.3291 32.6285C40.8955 31.9559 41.4442 31.2833 41.9752 30.6107C42.4944 29.9381 42.9723 29.295 43.4089 28.6814C43.8455 28.0678 44.2172 27.5014 44.524 26.9822C44.8309 26.4512 45.0492 26.0087 45.179 25.6547C44.8368 25.8317 44.3175 26.1916 43.6213 26.7344C42.9251 27.2654 42.0519 28.0147 41.0017 28.9823C39.9397 29.9381 38.7066 31.1181 37.3024 32.5223C35.8864 33.9266 34.2874 35.5845 32.5056 37.4961C31.9274 37.2011 31.2784 37.0359 30.5586 37.0005C30.7828 36.7409 31.0365 36.4577 31.3197 36.1509C31.5911 35.8323 31.8802 35.5137 32.187 35.1951C32.482 34.8765 32.7829 34.5579 33.0897 34.2393C33.3965 33.9207 33.6915 33.6198 33.9747 33.3365C34.2107 33.1005 34.5234 32.7819 34.9128 32.3807C35.3022 31.9795 35.7448 31.5311 36.2404 31.0355C36.7242 30.5281 37.2552 29.9971 37.8334 29.4425C38.3998 28.8761 38.9839 28.3215 39.5857 27.7787C40.1757 27.2241 40.7775 26.699 41.3911 26.2034C41.9929 25.696 42.5711 25.2535 43.1257 24.8759C43.6803 24.4865 44.2054 24.1796 44.701 23.9554C45.1849 23.7194 45.6097 23.6014 45.9755 23.6014C46.3177 23.6014 46.5891 23.7017 46.7897 23.9023Z",1,"themeableElement","emptyFormatting"],["d","M27.1761 46.2223C26.5153 46.1633 25.8309 46.0748 25.1229 45.9568C24.4149 45.827 23.7305 45.6677 23.0697 45.4789L20.3262 44.7178L22.9989 43.762C23.8013 43.4788 24.5034 43.1071 25.1052 42.6469C25.707 42.1866 26.2144 41.6497 26.6274 41.0361L26.8398 40.6644C27.123 40.157 27.3944 39.7086 27.6541 39.3192C27.9019 38.918 28.1674 38.5817 28.4506 38.3103C28.722 38.0389 29.0347 37.8324 29.3887 37.6908C29.7309 37.5374 30.1439 37.4607 30.6277 37.4607C31.7369 37.4607 32.5983 37.7675 33.2119 38.3811C33.8255 38.9947 34.1323 39.8561 34.1323 40.9653C34.1323 41.4137 34.0438 41.8503 33.8668 42.2751C33.6898 42.7 33.4479 43.1071 33.1411 43.4965C32.8225 43.8859 32.4508 44.2458 32.026 44.5762C31.5894 44.9066 31.1174 45.1957 30.61 45.4435C30.1026 45.6795 29.5657 45.8683 28.9993 46.0099C28.4329 46.1515 27.8547 46.2223 27.2646 46.2223H27.1761Z",1,"themeableElement","themeColor"],["d","M30.6292 36.558C31.3136 36.558 31.939 36.6583 32.5054 36.8589C33.0718 37.0595 33.5556 37.3486 33.9568 37.7262C34.3462 38.1038 34.653 38.5699 34.8772 39.1245C35.0896 39.6673 35.1958 40.2809 35.1958 40.9653C35.1958 41.8385 34.9657 42.6528 34.5055 43.408C34.0453 44.1514 33.4435 44.8004 32.7001 45.355C31.9449 45.9096 31.0894 46.3462 30.1335 46.6648C29.1777 46.9716 28.1983 47.125 27.1953 47.125C25.7793 46.9952 24.4636 46.7769 23.2482 46.4701C22.729 46.3403 22.2098 46.1869 21.6906 46.0099C21.1595 45.8211 20.6639 45.6087 20.2037 45.3727C19.7435 45.1249 19.3305 44.8476 18.9647 44.5408C18.5989 44.234 18.3216 43.8859 18.1328 43.4965C18.1918 43.5083 18.2626 43.5142 18.3452 43.5142C18.416 43.526 18.4986 43.5319 18.593 43.5319C18.6756 43.5319 18.7818 43.5319 18.9116 43.5319C19.3128 43.5319 19.8202 43.5024 20.4338 43.4434C21.0356 43.3726 21.6729 43.2251 22.3455 43.0009C23.0181 42.7649 23.6848 42.4285 24.3456 41.9919C24.9946 41.5553 25.5669 40.9594 26.0625 40.2042C26.3221 39.7322 26.5935 39.2779 26.8767 38.8413C27.1481 38.4047 27.4549 38.0212 27.7971 37.6908C28.1393 37.3486 28.5405 37.0772 29.0007 36.8766C29.4491 36.6642 29.9919 36.558 30.6292 36.558ZM27.2484 45.3196C28.0036 45.3078 28.7529 45.178 29.4963 44.9302C30.2279 44.6824 30.8829 44.3579 31.4611 43.9567C32.0393 43.5437 32.5054 43.0835 32.8594 42.576C33.2134 42.0568 33.3904 41.5199 33.3904 40.9653C33.3904 40.4815 33.3314 40.0744 33.2134 39.744C33.0836 39.4136 32.9066 39.1481 32.6824 38.9475C32.4582 38.7351 32.1927 38.5876 31.8859 38.505C31.5673 38.4106 31.2133 38.3634 30.8239 38.3634C30.4816 38.3634 30.1807 38.4106 29.9211 38.505C29.6497 38.5994 29.396 38.7587 29.16 38.9829C28.9122 39.1953 28.6703 39.4785 28.4343 39.8325C28.1865 40.1747 27.921 40.5995 27.6378 41.1069C27.3074 41.6143 26.9711 42.0568 26.6289 42.4344C26.2749 42.8121 25.915 43.1425 25.5492 43.4257C25.1834 43.6971 24.8117 43.9272 24.4341 44.116C24.0565 44.3048 23.6789 44.47 23.3013 44.6116C23.9621 44.8004 24.6347 44.9538 25.3191 45.0718C26.0035 45.178 26.6466 45.2606 27.2484 45.3196Z",1,"themeableElement","emptyFormatting"],["d","M25.375 14.5H32.625V30.8125L25.375 36.25V14.5Z",1,"themeableElement","themeColor"],["id","clip0"],["width","36.25","height","36.25","fill","white","transform","translate(10.875 10.875)"]],template:function(o,a){1&o&&(e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(0,"svg",0)(1,"g",1),e.\u0275\u0275element(2,"path",2)(3,"path",3)(4,"path",4)(5,"path",5)(6,"path",6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"defs")(8,"clipPath",7),e.\u0275\u0275element(9,"rect",8),e.\u0275\u0275elementEnd()()())},styles:[".themeColor[_ngcontent-%COMP%]{fill:var(--colorBrandForeground1)}.emptyFormatting[_ngcontent-%COMP%]{fill:var(--colorNeutralBackgroundInverted)}"]}),n}(),St=function(){function n(){}return n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["mobile-empty-formatting-pane-legacy-svg"]],decls:4,vars:0,consts:[["width","45","height","45","viewBox","0 0 45 45","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M32.6 9.80005H40.2V15.4001C40.2 17.6092 38.4092 19.4 36.2 19.4H21.8V27.4","stroke","#252423","stroke-width","1.5"],["x","5.75","y","5.75","width","28.1","height","7.3","rx","1.25","fill","white","stroke","#252423","stroke-width","1.5"],["d","M19 24.15H24.6C25.2904 24.15 25.85 24.7097 25.85 25.4V40.25H17.75V25.4C17.75 24.7097 18.3096 24.15 19 24.15Z","fill","#B3B0AD","stroke","#252423","stroke-width","1.5"]],template:function(o,a){1&o&&(e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(0,"svg",0),e.\u0275\u0275element(1,"path",1)(2,"rect",2)(3,"path",3),e.\u0275\u0275elementEnd())},encapsulation:2}),n}(),Ot=i(45916);function It(n,t){1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",1)(2,"pbi-button-toggle",2),e.\u0275\u0275element(3,"pbi-svg-use-symbol",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"div",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&n&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("checked",!0)("value",1)("localizeTooltip","Format"),e.\u0275\u0275advance(1),e.\u0275\u0275property("sheet","visualizationPaneIcons_paneColorRefresh")("symbolId","visualizationPaneFormat_paneColorRefresh"))}var Tt=function(){function n(){}return n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["mobile-formatting-tab"]],inputs:{useModernFormatPane:"useModernFormatPane"},decls:1,vars:1,consts:[[4,"ngIf"],["role","tablist",1,"sectionHeader","pivotNav","visualizationPane"],["role","tab",1,"section-tab-legacy",3,"checked","value","localizeTooltip"],[1,"normal-svg","section-svg",3,"sheet","symbolId"],[1,"navMarker","visualizationPane"]],template:function(o,a){1&o&&e.\u0275\u0275template(0,It,5,5,"ng-container",0),2&o&&e.\u0275\u0275property("ngIf",!a.useModernFormatPane)},dependencies:[k.NgIf,u.r,Ot.R],styles:[".section-tab-legacy[_ngcontent-%COMP%]{padding:8px 10px;display:inline-block}.section-tab-legacy[_ngcontent-%COMP%]:hover, .section-tab-legacy[_ngcontent-%COMP%]:focus{background:var(--gray-30, #EDEBE9)}.section-tab-legacy[_ngcontent-%COMP%]   .section-svg[_ngcontent-%COMP%]{width:20px;height:20px;display:flex}"]}),n}(),Et=function(n){function t(o,a){var l=n.call(this,"propertyPane",o,a)||this;return l.propertyChanged=new e.EventEmitter,l}return(0,d.ZT)(t,n),t.\u0275fac=function(a){return new(a||t)(e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(e.Injector))},t.\u0275dir=e.\u0275\u0275defineDirective({type:t,selectors:[["property-pane-legacy"]],inputs:{showChangeIndication:"showChangeIndication",excludeObjectRepetition:"excludeObjectRepetition",disabledSliceTypes:"disabledSliceTypes",excludeConditionalFormattingCard:"excludeConditionalFormattingCard"},outputs:{propertyChanged:"propertyChanged"},features:[e.\u0275\u0275InheritDefinitionFeature]}),t}(i(81789).iB);function Ft(n,t){if(1&n){var o=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",10),e.\u0275\u0275listener("click",function(l){e.\u0275\u0275restoreView(o);var r=e.\u0275\u0275nextContext().ngIf,s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.onOptionsClick(l,r.optionsSetting))}),e.\u0275\u0275pipe(1,"localize"),e.\u0275\u0275elementEnd()}2&n&&e.\u0275\u0275property("pbiTooltip",e.\u0275\u0275pipeBind1(1,1,"Pane_Options"))}function zt(n,t){if(1&n&&e.\u0275\u0275element(0,"mobile-formatting-tab",17),2&n){var o=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("useModernFormatPane",o.useModernFormatPane)}}function Lt(n,t){if(1&n){var o=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"property-pane-legacy",18),e.\u0275\u0275listener("propertyChanged",function(r){e.\u0275\u0275restoreView(o);var s=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(s.onPropertyChanged(r))}),e.\u0275\u0275elementEnd()}if(2&n){var a=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("showChangeIndication",!0)("excludeObjectRepetition",a.excludeObjectRepetition)("excludeConditionalFormattingCard",!0)("disabledSliceTypes",a.disabledSliceTypes)}}var wt=function(){return["Visual","Format_Label_General"]};function At(n,t){if(1&n){var o=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"formatting-pane-lazy",19),e.\u0275\u0275listener("propertyChanged",function(r){e.\u0275\u0275restoreView(o);var s=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(s.onPropertyChanged(r))}),e.\u0275\u0275elementEnd()}if(2&n){var a=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("formattingSources",e.\u0275\u0275pureFunction0(6,wt))("showPivot",!0)("indicatorEnabled",!0)("mobileFormatting",!0)("disabledCards",a.disabledCards)("disabledSlices",a.disabledSlices)}}function Dt(n,t){1&n&&e.\u0275\u0275element(0,"mobile-empty-formatting-pane-legacy-svg",23)}function Bt(n,t){1&n&&e.\u0275\u0275element(0,"mobile-empty-formatting-pane-svg",23)}function jt(n,t){if(1&n&&(e.\u0275\u0275elementStart(0,"div",20),e.\u0275\u0275template(1,Dt,1,0,"mobile-empty-formatting-pane-legacy-svg",21),e.\u0275\u0275template(2,Bt,1,0,"mobile-empty-formatting-pane-svg",21),e.\u0275\u0275element(3,"span",22),e.\u0275\u0275elementEnd()),2&n){var o=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!o.useModernFormatPane),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",o.useModernFormatPane)}}function Rt(n,t){if(1&n&&(e.\u0275\u0275elementStart(0,"div",11),e.\u0275\u0275template(1,zt,1,1,"mobile-formatting-tab",12),e.\u0275\u0275elementStart(2,"section",13),e.\u0275\u0275template(3,Lt,1,4,"property-pane-legacy",14),e.\u0275\u0275template(4,At,1,7,"formatting-pane-lazy",15),e.\u0275\u0275template(5,jt,4,2,"div",16),e.\u0275\u0275elementEnd()()),2&n){var o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!o.useModernFormatPane),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!o.useModernFormatPane&&o.visualSelected()),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",o.useModernFormatPane&&o.visualSelected()),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!o.visualSelected())}}var Ht=function(t){return{isCollapsed:t}},Nt=function(t){return{isCollapsed:t}};function Ut(n,t){if(1&n){var o=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"article",1)(1,"div",2)(2,"button",3),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(o);var r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.toggle())}),e.\u0275\u0275pipe(3,"localize"),e.\u0275\u0275element(4,"div",4),e.\u0275\u0275template(5,Ft,2,3,"div",5),e.\u0275\u0275element(6,"div",6),e.\u0275\u0275elementStart(7,"div",7),e.\u0275\u0275element(8,"span",8),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(9,Rt,6,4,"div",9),e.\u0275\u0275elementEnd()}if(2&n){var a=t.ngIf;e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(11,Ht,!a.isPaneExpanded)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(13,Nt,!a.isPaneExpanded)),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(3,9,"VisualizationPane_Title"))("aria-expanded",!!a.isPaneExpanded),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",a.isPaneExpanded?"pbi-glyph-doublechevronright ":"pbi-glyph-doublechevrondown "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",a.isPaneExpanded&&(null==a.optionsSetting?null:a.optionsSetting.showOptions)),e.\u0275\u0275advance(1),e.\u0275\u0275property("hidden",!a.isPaneExpanded),e.\u0275\u0275advance(1),e.\u0275\u0275property("hidden",a.isPaneExpanded),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",a.isPaneExpanded)}}var Wt=function(){function n(t,o,a,l,r,s,g,m,f,y){var S,F,w=this;this.featureSwitchService=t,this.highContrastCssGenerationService=o,this.telemetryService=a,this.selectionService=l,this.tutorialPopupService=r,this.localizationService=s,this.dialogService=g,this.panesVisibilityService=m,this.pbiMenuService=f,this.mobileVisualFormattingSettingsService=y,this.showTutorial=!1,this.excludeObjectRepetition=["visualHeader","visualHeaderTooltip"],this.disabledSliceTypes=["image","geoJson"],this.onDestroy$=new Se.xQ,this.paneVisibility$=this.panesVisibilityService.getPanes$().pipe((0,Me.R)(this.onDestroy$),(0,h.U)(function(U){return U.format}));var Z=this.localizationService.get("MobileFormatting_Card_DisabledReason");this.disabledCards=((S={}).headerIcons={disabledReason:Z},S.visualLevelFieldsFormat={disabledReason:Z},S);var Q=this.localizationService.get("MobileFormatting_Slice_DisabledReason");this.disabledSlices=((F={}).ConditionalFormattingControl={disabledReason:Q},F.ImageUpload={disabledReason:Q},F.ShapeMapSelector={disabledReason:Q},F.ToggleSwitch={disabledReason:Q,filterUid:["slicerSettings-selection-strictSingleSelect","slicerSettings-selection-singleSelect","slicerSettings-selection-selectAllCheckboxEnabled"]},F),this.featureSwitchService.getFeatureSwitches().then(function(U){if(w.useModernFormatPane=U.useModernFormatPane,!w.featureSwitchService.featureSwitches.interactiveMobileCanvas){var W=w.disabledSlices.ToggleSwitch,te="columnHeaders-options-autoSizeColumnWidth";W?W.filterUid.push(te):W={disabledReason:Q,filterUid:[te]}}}),this.initializeHighContrastRules()}return n.prototype.ngOnDestroy=function(){this.onDestroy$.next(),this.onDestroy$.complete()},n.prototype.ngAfterContentInit=function(){this.showMobileAuthoringVisualizationsTutorialIfNeeded()},n.prototype.toggle=function(){this.panesVisibilityService.togglePaneExpansion("format")},n.prototype.onOptionsClick=function(t,o){t.stopPropagation(),(0,Te.cc)(t,o,this.pbiMenuService)},n.prototype.visualSelected=function(){var t,o=vt.UP.getSelectedCanvasItem(this.selectionService);return!(null===(t=o?.layouts)||void 0===t||!t.withId(1))},n.prototype.onPropertyChanged=function(t){this.showModalOnPanePropertyChange(),this.telemetryService.logEvent(mt.wb,{visualType:t.visualType,cardName:t.cardName,sliceName:t.sliceName,visualUniqueName:t.visualUniqueName})},n.prototype.showMobileAuthoringVisualizationsTutorialIfNeeded=function(){this.showTutorial&&this.tutorialPopupService.startTutorial&&this.tutorialPopupService.startTutorial(this.createDiagramTutorialModel())},n.prototype.createDiagramTutorialModel=function(){var t="MobileAuthoringVisualizations",o=".paneHeader";return{itemKeys:[t],items:{MobileAuthoringVisualizations:{title:this.localizationService.get("MobileAuthoring_Visualizations_TutorialTitle"),text:this.localizationService.get("Mobile_Authoring_Formatting_NewFeature_Description"),buttonLabel:this.localizationService.get("TutorialPopup_GotIt"),canShow:function(){return!!$(o)},attachTo:function(){return $(o)},arrowOffset:{top:-8,left:0},showWhenUnclickable:!0,dataStoreKey:t,customClass:"tutorial-fluent-design-container"}}}},n.prototype.showModalOnPanePropertyChange=function(){return(0,d.mG)(this,void 0,void 0,function(){return(0,d.Jh)(this,function(a){switch(a.label){case 0:return[4,this.mobileVisualFormattingSettingsService.isFormattingChangeDialogShown()];case 1:return a.sent()?[3,4]:[4,this.dialogService.showSimpleInfoDialog({title:this.localizationService.get("MobileVisualFormattingEditDialog_Title"),message:this.localizationService.get("MobileVisualFormattingEditDialog_Body"),okButtonText:this.localizationService.get("ModalDialogButtonText_GotIt")},{width:"500px"}).afterClosed().toPromise()];case 2:return a.sent(),[4,this.mobileVisualFormattingSettingsService.markFormattingChangeDialogShown()];case 3:a.sent(),a.label=4;case 4:return[2]}})})},n.prototype.initializeHighContrastRules=function(){this.highContrastCssGenerationService.addRule(".themeableElement .change-indicator-icon svg","{ fill: @foregroundColor !important; }")},n.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(Ee.vZ),e.\u0275\u0275directiveInject(N.g),e.\u0275\u0275directiveInject(C.y0),e.\u0275\u0275directiveInject(ee.z),e.\u0275\u0275directiveInject(se.yU),e.\u0275\u0275directiveInject(D.o),e.\u0275\u0275directiveInject(q.x),e.\u0275\u0275directiveInject(pe.r),e.\u0275\u0275directiveInject(fe.o),e.\u0275\u0275directiveInject(lt.P))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["mobile-visual-formatting-pane"]],inputs:{showTutorial:"showTutorial"},features:[e.\u0275\u0275ProvidersFeature((0,d.ev)([{provide:ut.Ol,useClass:Re},{provide:gt.h,useClass:je},{provide:pt.Kj,useClass:ae}],dt.H,!0))],decls:2,vars:3,consts:[["keyboard-shortcuts","ctrl-F6","focus-nav-mode","Group","focus-priority","7",3,"ngClass",4,"ngIf"],["keyboard-shortcuts","ctrl-F6","focus-nav-mode","Group","focus-priority","7",3,"ngClass"],[1,"paneHeader"],["localizeTooltip","Pane_Toggle",1,"btn","toggleBtn",3,"ngClass","click"],[1,"btnIcon","glyphicon","glyph-mini",3,"ngClass"],["class","btnIcon glyphicon glyph-small pbi-glyph-more",3,"pbiTooltip","click",4,"ngIf"],["localize","VisualizationPane_Title",1,"sidePaneHorizontalTitle","unselectable","sidePaneTitle","largeFontSize","trimmedTextWithEllipsis",3,"hidden"],[1,"verticalTitle","verticalText",3,"hidden"],["localize","VisualizationPane_Title",1,"collapsedVisualsTitle","largeFontSize"],["class","paneContents flex",4,"ngIf"],[1,"btnIcon","glyphicon","glyph-small","pbi-glyph-more",3,"pbiTooltip","click"],[1,"paneContents","flex"],[3,"useModernFormatPane",4,"ngIf"],["focus-nav-mode","Browser",1,"lazy-load-wrapper","stretch","item-fill"],["role","application",3,"showChangeIndication","excludeObjectRepetition","excludeConditionalFormattingCard","disabledSliceTypes","propertyChanged",4,"ngIf"],[3,"formattingSources","showPivot","indicatorEnabled","mobileFormatting","disabledCards","disabledSlices","propertyChanged",4,"ngIf"],["class","empty-pane",4,"ngIf"],[3,"useModernFormatPane"],["role","application",3,"showChangeIndication","excludeObjectRepetition","excludeConditionalFormattingCard","disabledSliceTypes","propertyChanged"],[3,"formattingSources","showPivot","indicatorEnabled","mobileFormatting","disabledCards","disabledSlices","propertyChanged"],[1,"empty-pane"],["class","empty-pane-svg",4,"ngIf"],["localize","Mobile_Authoring_Formatting_Empty",1,"empty-pane-text"],[1,"empty-pane-svg"]],template:function(o,a){1&o&&(e.\u0275\u0275template(0,Ut,10,15,"article",0),e.\u0275\u0275pipe(1,"async")),2&o&&e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(1,1,a.paneVisibility$))},dependencies:[k.NgClass,k.NgIf,ue.X,u.r,Y.u,V.q,x.V,de,St,Tt,Et,k.AsyncPipe,ve.F],styles:['.paneHeader[_ngcontent-%COMP%]   .sidePaneHorizontalTitle[_ngcontent-%COMP%]{margin:12px 0 0 12px}.paneHeader[_ngcontent-%COMP%]   .btnIcon[_ngcontent-%COMP%]{margin:10px 8px 0 0}.paneContents[_ngcontent-%COMP%]{justify-content:flex-start}.paneContents[_ngcontent-%COMP%]   mobile-formatting-tab[_ngcontent-%COMP%]{width:100%}.paneContents[_ngcontent-%COMP%]   formatting-pane-lazy[_ngcontent-%COMP%]{display:flex;flex-grow:1;flex-direction:column}.paneContents[_ngcontent-%COMP%]   .empty-pane[_ngcontent-%COMP%]{display:flex;flex-basis:100%;flex-wrap:wrap;align-items:center;padding:0 20px;text-align:center;align-content:center;justify-content:center;font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-regular, 400)}.paneContents[_ngcontent-%COMP%]   .empty-pane[_ngcontent-%COMP%]   .empty-pane-svg[_ngcontent-%COMP%]{margin-bottom:10px}.paneContents[_ngcontent-%COMP%]   .empty-pane[_ngcontent-%COMP%]   .empty-pane-text[_ngcontent-%COMP%]{flex-basis:100%;padding:5px 20px}.paneContents[_ngcontent-%COMP%]   .empty-pane[_ngcontent-%COMP%]   .empty-pane-text.empty-pane-text-bold[_ngcontent-%COMP%]{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-semi-bold, 600)}.paneContents[_ngcontent-%COMP%]   .lazy-load-wrapper[_ngcontent-%COMP%]{position:relative;flex-direction:column}']}),n}(),$t=i(78432),Gt=i(57869),Kt=i(73221),Qt=i(10861),Xt=i(44581),Zt=i(86663);function Jt(n,t){1&n&&(e.\u0275\u0275element(0,"span",7),e.\u0275\u0275pipe(1,"localize"),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275pipe(3,"localize")),2&n&&(e.\u0275\u0275property("pbiTooltip",e.\u0275\u0275pipeBind1(1,3,"MobileFormatting_ChangeIndicator_SliceTooltip"))("aria-label",e.\u0275\u0275pipeBind1(2,5,"Mobile_Authoring_Formatting_Change_Indicator")),e.\u0275\u0275attribute("aria-description",e.\u0275\u0275pipeBind1(3,7,"MobileFormatting_ChangeIndicator_SliceTooltip")))}function kt(n,t){1&n&&(e.\u0275\u0275element(0,"tri-svg-icon",8),e.\u0275\u0275pipe(1,"localize"),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275pipe(3,"localize")),2&n&&(e.\u0275\u0275property("pbiTooltip",e.\u0275\u0275pipeBind1(1,3,"MobileFormatting_ChangeIndicator_SliceTooltip"))("aria-label",e.\u0275\u0275pipeBind1(2,5,"Mobile_Authoring_Formatting_Change_Indicator")),e.\u0275\u0275attribute("aria-description",e.\u0275\u0275pipeBind1(3,7,"MobileFormatting_ChangeIndicator_SliceTooltip")))}function Yt(n,t){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Jt,4,9,"span",5),e.\u0275\u0275template(2,kt,4,9,"tri-svg-icon",6),e.\u0275\u0275elementContainerEnd()),2&n){var o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!o.isTridentEnabled),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",o.isTridentEnabled)}}var qt=window,en=function(n){function t(o,a,l){var r=n.call(this)||this;return r.propertyChangeIndicatorService=o,r.formattingObjectDefinitionsService=a,r.visualAuthoring=l,r.isTridentEnabled=qt.isTrident,r.showChangeIndicator$=new Oe.X(!1),r.textboxDescriptors=[],Object.values(Gt.RL).forEach(function(s){Object.values(s).forEach(function(g){return r.textboxDescriptors.push(g)})}),r}return(0,d.ZT)(t,n),t.prototype.ngOnInit=function(){var o=this;he.fF.assertValue(this.onSaveState$,"onSaveState$"),this.onSaveState$.pipe((0,Me.R)(this.onDestroy$)).subscribe(function(){return o.showChangeIndicator()})},t.prototype.showChangeIndicator=function(){var o=this,a=this.formattingObjectDefinitionsService.getObjectDefinitions(this.visualContainer),l=a&&_.some(this.textboxDescriptors,function(r){return o.propertyChangeIndicatorService.shouldShowSliceChangeIndicator(r,a)});this.showChangeIndicator$.next(l)},t.prototype.revertToDefault=function(){var o=this.visualContainer.config.singleVisual.objects;o&&((0,$t.Aw)(o,this.textboxDescriptors),this.visualAuthoring.raiseVisualContainerChanged(this.visualContainer),this.showChangeIndicator())},t.\u0275fac=function(a){return new(a||t)(e.\u0275\u0275directiveInject(Re),e.\u0275\u0275directiveInject(je),e.\u0275\u0275directiveInject(Qt.$8))},t.\u0275cmp=e.\u0275\u0275defineComponent({type:t,selectors:[["textbox-formatting-settings"]],inputs:{onSaveState$:"onSaveState$",visualContainer:"visualContainer"},features:[e.\u0275\u0275ProvidersFeature([Re,je]),e.\u0275\u0275InheritDefinitionFeature],decls:11,vars:20,consts:[["focus-nav-mode","Group",1,"textboxFormattingSettingsContainer"],[4,"ngIf"],[1,"reset-button",3,"tabindex","pbiTooltip","accessible-click"],["name","reset","size","mini",1,"reset-icon"],[3,"localize"],["class","change-indicator-icon glyphicon glyph-mini pbi-glyph-phone-optimized-report","role","img","tabindex","0",3,"pbiTooltip","aria-label",4,"ngIf"],["sprite","authoring-icons","name","data_bar_vertical_phone_16_regular","class","change-indicator-icon","role","img","tabindex","0",3,"pbiTooltip","aria-label",4,"ngIf"],["role","img","tabindex","0",1,"change-indicator-icon","glyphicon","glyph-mini","pbi-glyph-phone-optimized-report",3,"pbiTooltip","aria-label"],["sprite","authoring-icons","name","data_bar_vertical_phone_16_regular","role","img","tabindex","0",1,"change-indicator-icon",3,"pbiTooltip","aria-label"]],template:function(a,l){1&a&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275template(1,Yt,3,2,"ng-container",1),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementStart(3,"button",2),e.\u0275\u0275listener("accessible-click",function(){return l.revertToDefault()}),e.\u0275\u0275pipe(4,"async"),e.\u0275\u0275pipe(5,"async"),e.\u0275\u0275pipe(6,"async"),e.\u0275\u0275pipe(7,"localize"),e.\u0275\u0275pipe(8,"localize"),e.\u0275\u0275element(9,"pbi-icon",3)(10,"span",4),e.\u0275\u0275elementEnd()()),2&a&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(2,8,l.showChangeIndicator$)),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("disabled",!e.\u0275\u0275pipeBind1(4,10,l.showChangeIndicator$)),e.\u0275\u0275propertyInterpolate("tabindex",e.\u0275\u0275pipeBind1(6,14,l.showChangeIndicator$)?0:-1),e.\u0275\u0275property("pbiTooltip",e.\u0275\u0275pipeBind1(7,16,"Visual_RevertToDesktop_Tooltip")),e.\u0275\u0275attribute("aria-disabled",!e.\u0275\u0275pipeBind1(5,12,l.showChangeIndicator$))("aria-label",e.\u0275\u0275pipeBind1(8,18,"Visual_RevertToDesktop_Tooltip")),e.\u0275\u0275advance(7),e.\u0275\u0275property("localize","Reset_All_Settings_Mobile"))},dependencies:[k.NgIf,ue.X,Xt.t,Zt._,x.V,K.M,k.AsyncPipe,ve.F],styles:['.textboxFormattingSettingsContainer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.textboxFormattingSettingsContainer[_ngcontent-%COMP%]   .change-indicator-icon[_ngcontent-%COMP%]{padding:8px 8px 8px 16px;fill:var(--gray-160, #323130)}.textboxFormattingSettingsContainer[_ngcontent-%COMP%]   .reset-button[_ngcontent-%COMP%]{cursor:pointer;font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-regular, 400);align-items:center;background:inherit;display:flex;height:36px}html:not([dir="rtl"])[_nghost-%COMP%]   .textboxFormattingSettingsContainer[_ngcontent-%COMP%]   .reset-button[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .textboxFormattingSettingsContainer[_ngcontent-%COMP%]   .reset-button[_ngcontent-%COMP%]{margin-left:auto}html[dir="rtl"][_nghost-%COMP%]   .textboxFormattingSettingsContainer[_ngcontent-%COMP%]   .reset-button[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .textboxFormattingSettingsContainer[_ngcontent-%COMP%]   .reset-button[_ngcontent-%COMP%]{margin-right:auto}html:not([dir="rtl"])[_nghost-%COMP%]   .textboxFormattingSettingsContainer[_ngcontent-%COMP%]   .reset-button[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .textboxFormattingSettingsContainer[_ngcontent-%COMP%]   .reset-button[_ngcontent-%COMP%]{padding-right:8px}html[dir="rtl"][_nghost-%COMP%]   .textboxFormattingSettingsContainer[_ngcontent-%COMP%]   .reset-button[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .textboxFormattingSettingsContainer[_ngcontent-%COMP%]   .reset-button[_ngcontent-%COMP%]{padding-left:8px}html:not([dir="rtl"])[_nghost-%COMP%]   .textboxFormattingSettingsContainer[_ngcontent-%COMP%]   .reset-button[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .textboxFormattingSettingsContainer[_ngcontent-%COMP%]   .reset-button[_ngcontent-%COMP%]{padding-left:2px}html[dir="rtl"][_nghost-%COMP%]   .textboxFormattingSettingsContainer[_ngcontent-%COMP%]   .reset-button[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .textboxFormattingSettingsContainer[_ngcontent-%COMP%]   .reset-button[_ngcontent-%COMP%]{padding-right:2px}.textboxFormattingSettingsContainer[_ngcontent-%COMP%]   .reset-button[_ngcontent-%COMP%]   .reset-icon[_ngcontent-%COMP%]{color:var(--fluent-theme-link-darker-color, #005A9E)}html:not([dir="rtl"])[_nghost-%COMP%]   .textboxFormattingSettingsContainer[_ngcontent-%COMP%]   .reset-button[_ngcontent-%COMP%]   .reset-icon[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .textboxFormattingSettingsContainer[_ngcontent-%COMP%]   .reset-button[_ngcontent-%COMP%]   .reset-icon[_ngcontent-%COMP%]{margin-right:6px}html[dir="rtl"][_nghost-%COMP%]   .textboxFormattingSettingsContainer[_ngcontent-%COMP%]   .reset-button[_ngcontent-%COMP%]   .reset-icon[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .textboxFormattingSettingsContainer[_ngcontent-%COMP%]   .reset-button[_ngcontent-%COMP%]   .reset-icon[_ngcontent-%COMP%]{margin-left:6px}.textboxFormattingSettingsContainer[_ngcontent-%COMP%]   .reset-button.disabled[_ngcontent-%COMP%]{pointer-events:none;color:var(--gray-90, #A19F9D)}.textboxFormattingSettingsContainer[_ngcontent-%COMP%]   .reset-button.disabled[_ngcontent-%COMP%]   .reset-icon[_ngcontent-%COMP%]{color:var(--gray-90, #A19F9D)}html[data-focus-source="key"][_nghost-%COMP%]   .textboxFormattingSettingsContainer[_ngcontent-%COMP%]   .reset-button[_ngcontent-%COMP%]:focus, html[data-focus-source="key"]   [_nghost-%COMP%]   .textboxFormattingSettingsContainer[_ngcontent-%COMP%]   .reset-button[_ngcontent-%COMP%]:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color)}.textboxFormattingSettingsContainer[_ngcontent-%COMP%]   .reset-button[_ngcontent-%COMP%]:hover{color:var(--fluent-theme-link-darker-color, #005A9E)}.textboxFormattingSettingsContainer[_ngcontent-%COMP%]   .reset-button[_ngcontent-%COMP%]:active{background-color:var(--fluent-theme-neutral-quarter-alt-color, #E1DFDD)}']}),t}(Kt.w),tn=i(67659),nn=i(32288),on=i(20993),an=i(42101),rn=i(14029),ln=i(77906),sn=i(95859),cn=i(72359),un=i(52950),pn=i(23612),gn=i(93367),dn=i(94841),vn=i(79725),mn=i(16095),hn=i(17177),yt=i(36244),Ne=i(57871),ht=i(55133),p=i(47508),bt=i(9434),fn=i(15702),Cn=[p.L.actionButton.name,p.L.image.name,p.L.shape.name,p.L.basicShape.name],Mt=new Set([p.L.card.name,p.L.kpi.name,p.L.actionButton.name,p.L.gauge.name,p.L.multiRowCard.name,p.L.cardVisual.name,"dropdownSlicer"]),$e=new Set([p.L.image.name,p.L.actionButton.name,p.L.basicShape.name,p.L.shape.name]),yn=new Map([[fn.Jo,270],[p.L.azureMap.name,270],[p.L.decompositionTreeVisual.name,270],[p.L.filledMap.name,270],[p.L.keyDriversVisual.name,270],[p.L.map.name,270],[p.L.matrix.name,370],[p.L.pivotTable.name,370],[p.L.multiRowCard.name,100],[p.L.rdlVisual.name,270],[p.L.shapeMap.name,270],[p.L.table.name,370],[p.L.tableEx.name,370],[p.L.hundredPercentStackedBarChart.name,180],[p.L.hundredPercentStackedColumnChart.name,180],[p.L.areaChart.name,180],[p.L.clusteredBarChart.name,180],[p.L.clusteredColumnChart.name,180],[p.L.donutChart.name,180],[p.L.funnel.name,180],[p.L.lineClusteredColumnComboChart.name,180],[p.L.lineStackedColumnComboChart.name,180],[p.L.lineChart.name,180],[p.L.scorecard.name,180],[p.L.pieChart.name,180],[p.L.pythonVisual.name,180],[p.L.qnaVisual.name,180],[p.L.scriptVisual.name,180],[p.L.ribbonChart.name,180],[p.L.scatterChart.name,180],[p.L.stackedAreaChart.name,180],[p.L.hundredPercentStackedAreaChart.name,180],[p.L.barChart.name,180],[p.L.columnChart.name,180],[p.L.treemap.name,270],[p.L.waterfallChart.name,270],[p.L.actionButton.name,40],[p.L.textbox.name,40],[p.L.card.name,100],[p.L.cardVisual.name,100],[p.L.gauge.name,100],[p.L.kpi.name,100],[p.L.basicShape.name,40],[p.L.shape.name,40],[p.L.bookmarkNavigator.name,60],[p.L.pageNavigator.name,60],[p.L.bookmarkNavigator.name,50],[p.L.pageNavigator.name,50],[p.L.slicer.name,100],["listSlicer",180],["continuousSlicer",100],["singleSlicer",100],["relativeSlicer",80],["dropdownSlicer",60],["basic",100]]);function ft(n){var a,o=n.config.singleVisual.objects[bt.gO.data.mode.objectName];if(!_.isEmpty(o))for(var l=0,r=o;l<r.length;l++)a=r[l].properties[bt.gO.data.mode.propertyName];if(!a)return p.L.slicer.name;switch(a.value){case M.j6:return"dropdownSlicer";case M.K8:case M.GV:return"relativeSlicer";case M.bb:case M.e4:case M.vX:return"continuousSlicer";case M.of:case M.Ih:return"listSlicer";case M.Zr:return"singleSlicer";case M.RB:return"basic";default:return p.L.slicer.name}}var xt=.05*Ne.LU,_e={x:0,y:0,width:ht.Co,height:ht.aW},On={provide:"mobileAutoLayoutService",useFactory:function(n){return new Promise(function(t){t(new In(n))})},deps:[yt.m]},In=function(){function n(t){this.layoutInsertionHelperService=t}return n.prototype.createAutoMobileLayout=function(t,o){var a=_.cloneDeep(t.visualContainerGroups),l=this.internalTraverseGroup(a),r=this.sortAndFilterVisualCandidates(l);this.findContainedVisuals(r);for(var s=_.filter(r,function(y){return!y.isContained}),g=0,m=s;g<m.length;g++){var f=m[g];f.containingRect=this.getContainingRectangle(f)}return this.applyCandidatesPosition(r,s,o,1),r},n.prototype.applyCandidatesPosition=function(t,o,a,l){for(var r=0,s=o;r<s.length;r++){var g=s[r],m=this.findAllAvailableSpaces(t);if(this.positionCandidate(g,m,a),g.layouts.length>1)for(var f=0,y=g.containedVisuals;f<y.length;f++)this.positionContainedVisual(y[f],g,a)}this.revisitLayout(t,o,l,a)},n.prototype.revisitLayout=function(t,o,a,l){for(var r=this,s=function(w){if(w.layouts.length<=1)return"continue";var Z=w.config.singleVisual.visualType,Q=g.getPositionRectangle(w,1);if(!$e.has(Z)&&0===w.containedVisuals.length&&Math.ceil(Q.width+Q.x)<_e.width){var U=_.filter(o,function(te){return te.name!==w.name&&te.layouts.length>1});if(0===_.filter(U,function(te){var re=r.getPositionRectangle(te,1);return re?.y>=Q.y&&re?.y<=Q.y+Q.height&&re?.x>Q.x}).length&&g.stretchVisual(t,U,w,l,a))return"break"}},g=this,m=0,f=o;m<f.length&&"break"!==s(f[m]);m++);},n.prototype.stretchVisual=function(t,o,a,l,r){var s=this.getPositionRectangle(a,1),g=this.getPositionRectangle(a,0),m=_.filter(o,function(w){var Z=w.layouts[1];return Z?.position.y>s.y+s.height}),f=(_e.width-s.x)/s.width,y=a.layouts[1].position;if(y.width=s.width*f,s.width/s.height==g.width/g.height){if(y.height=s.height*f,this.removeMobileLayouts(m),r<=10)return this.applyCandidatesPosition(t,_.filter(m,function(w){return!w.isContained}),l,r+1),!0;he.fF.assertFail("applyCandidatesPosition calls exceeded threshold")}return!1},n.prototype.removeMobileLayouts=function(t){for(var o=0,a=t;o<a.length;o++){var l=a[o];l.layouts.splice(1,1),this.removeMobileLayouts(l.containedVisuals)}},n.prototype.positionContainedVisual=function(t,o,a){var l=a.useStylableVisualContainerHeader?0:20,r=this.getPositionRectangle(o,0),s=this.getPositionRectangle(o,1),g=this.getPositionRectangle(t,0),m=r.width?s.width/r.width:1,f=s.height?(s.height-l)/r.height:1;t.layouts.push({id:1,position:{x:s.x+(g.x-r.x)*m,y:s.y+(g.y-r.y)*f,z:t.layouts[0].position.z,width:g.width*m,height:g.height*f,tabOrder:t.layouts[0].position.tabOrder}});for(var S=0,F=t.containedVisuals;S<F.length;S++)this.positionContainedVisual(F[S],t,a)},n.prototype.positionCandidate=function(t,o,a){var l,r=this.getPositionRectangle(t,0),s=t.containingRect,g=1;this.shouldRescaleToCanvasWidth(t)&&(g=_e.width/s.width),0===t.containedVisuals.length&&(g=null!==(l=this.verifyMaxWidth(t))&&void 0!==l?l:g);var m=a.useStylableVisualContainerHeader?0:20,f=this.validateMinMaxHeight(t,g),y=Math.max(f.minimumRatio,f.canvasThresholdRatio),S=Math.max(g,f.minimumRatio);S>y&&(S=y);for(var F=g*r.width,w=S*r.height+m,Z=0,Q=o;Z<Q.length;Z++){var U=Q[Z];if(!(0===U.y&&U.x>.1*_e.width&&r.y>xt)){var W=(r.x-s.x)*g,te=(r.y-s.y)*S,re={x:U.x+W,y:U.y+te,z:t.layouts[0].position.z,width:F,height:w,tabOrder:t.layouts[0].position.tabOrder};if(W+re.width-U.width<.001&&te+re.height-U.height<.001){t.layouts.push({id:1,position:re});break}}}},n.prototype.shouldRescaleToCanvasWidth=function(t){var o=t.containingRect,a=t.config.singleVisual.visualType;return a===p.L.slicer.name&&(a=ft(t)),o.width>_e.width||t.containedVisuals.length>0&&(!$e.has(a)||t.containedVisuals.filter(function(l){return!$e.has(l.config.singleVisual.visualType)}).length>0)||!($e.has(a)||Mt.has(a)||a===p.L.textbox.name)},n.prototype.findAllAvailableSpaces=function(t){var o=this,a=_.map(_.filter(t,function(r){return r.layouts.length>1}),function(r){var s=o.getPositionRectangle(r,1);return{x:Math.round(s.x),y:Math.round(s.y),width:Math.min(Math.round(s.width)+8,_e.width),height:Math.round(s.height)+8}}),l=this.layoutInsertionHelperService.getNonOverlapingRects(_e,a=a.length>0?a:[{x:0,y:0,width:0,height:0}]);return _.sortBy(l,function(r){return r.y})},n.prototype.findContainedVisuals=function(t){for(var o=this,a=function(m){for(var f=[],y=m;y.parent;)f.push(y.parent),y=y.parent;for(var S=_.filter(_.filter(t,function(U){return U.name!==m.name&&!_.find(f,function(W){return U.name===W.name})}),function(U){return o.isRectContained(m,U)||o.overlapPercentage(m,U)>.8}),F=function(W){W.isContained=!0,W.parent&&(W.parent.containedVisuals=W.parent.containedVisuals.filter(function(te){return te!==W})),W.parent=m},w=0,Z=S;w<Z.length;w++)F(Z[w]);m.containedVisuals=S},l=0,r=t;l<r.length;l++)a(r[l])},n.prototype.sortAndFilterVisualCandidates=function(t){var o=this;t=_.filter(t,function(f){if(Cn.includes(f.config.singleVisual.visualType)){var S=o.getPositionRectangle(f,0);return S.width*S.height/(Ne.Z9*Ne.LU)<.6&&!(S.y<xt&&S.height<.15*Ne.LU&&S.width>.6*Ne.Z9)}return!0});for(var a=_.sortBy(t,function(f){return f.layouts[0].position.y}),l=[],r=function(y){if(_.includes(l,y))return"continue";var S=_.filter(a,function(F){return!_.includes(l,F)&&Math.abs(F.layouts[0].position.y-y.layouts[0].position.y)<=20});l.push.apply(l,_.sortBy(S,function(F){return F.layouts[0].position.x}))},s=0,g=a;s<g.length;s++)r(g[s]);return l},n.prototype.isRectContained=function(t,o){var a=this.getPositionRectangle(t,0),l=this.getPositionRectangle(o,0);return!(l.x<a.x||l.y<a.y||l.x+l.width>a.x+a.width||l.y+l.height>a.y+a.height)},n.prototype.internalTraverseGroup=function(t){for(var o=[],a=0,l=t;a<l.length;a++){var r=l[a];if((0,we.q4)(r)){for(var s=0,g=r.children;s<g.length;s++){var m=g[s];m.layouts[0].position.x+=r.layouts[0].position.x,m.layouts[0].position.y+=r.layouts[0].position.y,m.layouts[0].position.z+=r.layouts[0].position.z,m.layouts[0].position.tabOrder+=r.layouts[0].position.tabOrder}o=_.concat(o,this.internalTraverseGroup(r.children))}else(0,we.Vz)(r)&&o.push(r)}return o},n.prototype.overlapPercentage=function(t,o){var a=this.getPositionRectangle(t,0),l=this.getPositionRectangle(o,0),r=this.layoutInsertionHelperService.getIntersectingRectangle(a,l);if(!r)return 0;var s=r.width*r.height,g=Math.min(a.width*a.height,l.width*l.height);return 0===g?0:s/g},n.prototype.getPositionRectangle=function(t,o){var a=t.layouts[o?1:0].position;return he.fF.assert(function(){return!!a},"position requested by getPositionRectangle is undefined"),{x:a.x,y:a.y,width:a.width,height:a.height}},n.prototype.getContainingRectangle=function(t){for(var o=this.getPositionRectangle(t,0),a=o.x,l=o.y,r=o.x+o.width,s=o.y+o.height,g=0,m=t.containedVisuals||[];g<m.length;g++){var y=this.getContainingRectangle(m[g]);a=Math.min(a,y.x),l=Math.min(l,y.y),r=Math.max(r,y.x+y.width),s=Math.max(s,y.y+y.height)}return{x:a,y:l,width:r-a,height:s-l}},n.prototype.validateMinMaxHeight=function(t,o){var a,l=t.config.singleVisual.visualType;l===p.L.slicer.name&&(l=ft(t));for(var r=this.getPositionRectangle(t,0).height,s=Math.min(r,null!==(a=yn.get(l))&&void 0!==a?a:40),g=.8*ht.jk,m={minimumRatio:r?s/this.getPositionRectangle(t,0).height:1,canvasThresholdRatio:0===t.containedVisuals.length?g/(r||1):o},f=0,y=t.containedVisuals||[];f<y.length;f++){var F=this.validateMinMaxHeight(y[f],o);m.minimumRatio=Math.max(m.minimumRatio,F.minimumRatio),m.canvasThresholdRatio=Math.min(m.canvasThresholdRatio,F.canvasThresholdRatio)}return m},n.prototype.verifyMaxWidth=function(t){var o,a,l,r=t.config.singleVisual.visualType;if(r===p.L.slicer.name&&(r=ft(t)),Mt.has(r)&&t.layouts[0].position.width>158){if(r===p.L.cardVisual.name){var s=null===(l=null===(a=null===(o=t.config.singleVisual.query)||void 0===o?void 0:o.projections)||void 0===a?void 0:a.Data)||void 0===l?void 0:l.all().length;if(s&&s>1)return}return 158/t.layouts[0].position.width}},n.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275inject(yt.m))},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n}(),Tn=[{type:rt,componentId:"MobilePageVisualsPaneComponentId"},{type:Wt,componentId:"MobileVisualFormattingPaneComponentId"},{type:en,componentId:"TextboxFormattingSettingsComponentId"},{type:v,componentId:"MobileCanvasEmptyStateComponentId"}],Vn=function(){function n(){}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({providers:[On],imports:[k.CommonModule,on.T,nn.J,rn.ExploreUIThumbnailModule,ln.N.withManifests(Tn),sn.v,pn.N,an.p,tn._,gn.U,dn.b,cn.K,vn.j,mn.Z,hn.T6,un.g]}),n}()},17774:function(ce,A,i){i.d(A,{cH:function(){return h},pI:function(){return q}});var d=i(9434),B=i(32379),j=i(5265),X=i(45413);function h(z,L,E,G){var J;return null===(J=z?.[L])||void 0===J?void 0:J.find(function(D){var ne;return(null===(ne=D?.properties)||void 0===ne?void 0:ne[E])&&(0,B.fS)(D?.selector,G)})}var C=d.gO.data.mode.propertyName,e=new Set([C]),q=function(){function z(L,E,G,J,D){this.state=L,this.cardName=E,this.defns=G,this.services=J,this.visualType=D}return z.prototype.setMobileObjectsValue=function(L,E,G,J){this.state.ignoreFilteringProps&&(!this.state.ignoreFilteringProps||this.propExistsInDefn(E)||this.slicerModePersistWithoutChange(E,G[L]))||((0,j.zx)(this.defns,this.cardName,J)[L]=E)},z.prototype.setMobileObjectsPropertiesValue=function(L,E,G){this.shouldSetFilteringProps(L)&&((0,j.zx)(this.defns,this.cardName,G).properties[L]=E)},z.prototype.shouldSetFilteringProps=function(L){return!this.state.ignoreFilteringProps||!this.services.visualFilterProperties.getProperties(this.visualType,e).has(L)},z.prototype.propExistsInDefn=function(L){return function(z,L){for(var E=z.values(),G=E.next();!G.done;){if(L.hasOwnProperty(G.value))return!0;G=E.next()}return!1}(this.services.visualFilterProperties.getProperties(this.visualType,e),L)},z.prototype.slicerModePersistWithoutChange=function(L,E){if(L.hasOwnProperty(C)&&(0,X.fS)(E?.[C],L[C]))return!0},z}()}}]);