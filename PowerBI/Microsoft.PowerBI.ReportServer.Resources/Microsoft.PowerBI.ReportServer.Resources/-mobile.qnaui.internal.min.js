"use strict";(self.webpackChunkmobile=self.webpackChunkmobile||[]).push([["qnaui.internal"],{8898:function(Ue,re,d){d.d(re,{x:function(){return I}});var I=new(d(50423).InjectionToken)("EventAggregationServiceToken")},65947:function(Ue,re,d){d.d(re,{z:function(){return I}});var I=new(d(50423).InjectionToken)("QnaModelUtilsPath")},12123:function(Ue,re,d){d.d(re,{n:function(){return I}});var I=new(d(50423).InjectionToken)("QnaProxyPath")},71148:function(Ue,re,d){d.d(re,{b:function(){return I}});var I=new(d(50423).InjectionToken)("QnaToolingDialogLauncherService")},73519:function(Ue,re,d){d.r(re),d.d(re,{QnaUIInternalModule:function(){return Rs}});var y=d(77476),I=d(52910),ee=d(76966),Q=d(558),B=d(32288),Y=d(76521),U=d(77906),te=d(95859),T=d(67659),ye=d(33567),Me=d(16095),Se=d(22760),ue=d(1931),oe=d(46544),We=d(47768),qe=d(52950),Vt=d(47231),v=d(81337),ne=d(14172),W=d(83317),nt=d(30794),Le=d(73446),f=d(62458),n=d(50423),pt=d(43286),yt=d(37320),N=d(16808),S=d(72129),M=d(282),k=d(48787),V=d(17653),j=d(57243),q=d(77526),J=d(83495),ce=d(18353),K=d(59973),Ee=d(81905),it=d(46358),rt=d(23558),G=d(35510),De=d(59787),de=d(11547),Ae=d(59017),Ie=d(40133),_e=d(82762),xe=d(63057),Et=d(35988),dt=d(1521),Ut=d(87632),$t=d(59107),Ye=d(32105),Ve=d(31982),Wt=d(65947),Jt=d(12123),Tn=d(87974),he=d(38078);function an(i){i.remove?i.remove():i.parentNode&&i.parentNode.removeChild?i.parentNode.removeChild(i):f.fF.assertFail("No remove element API found")}function Kt(i){return i.isComposing||229===i.keyCode}function kn(i){if(f.fF.assertValue(i,"response"),!_.isEmpty(i.utterance)){for(var e=i.utterance,t=[],r=0,o=_.first(i.results),s=0,u=o&&o.spans||[];s<u.length;s++){var c=u[s];if(r<c.startIndex){var l=sn(e,r,c.startIndex);t.push.apply(t,l||[])}t.push(c),r=c.endExcludingIndex}if(r<e.length){var p=sn(e,r,e.length);t.push.apply(t,p||[])}return t}}function ke(i){return i&&i.replace(/\s/g," ")}function Zt(i,e){if(i){if(i.nodeType===Node.TEXT_NODE)return i;for(var t=i.childNodes,r=_.size(t),a=0,s=e?_.range(0,r):_.range(r-1,-1,-1);a<s.length;a++){var l=Zt(t[s[a]],e);if(l)return l}}}function sn(i,e,t){for(var r=[],o=e;o<t;){var a=o,s=void 0,u=void 0;if(/\s/.test(i.charAt(o)))u=!0,s=a+1,o++;else{u=!1;var c=i.indexOf(" ",o);s=c=c>-1?Math.min(c,t):t,o=c}var l=i.substring(a,s);r.push({startIndex:a,endExcludingIndex:s,text:l,isWhiteSpace:u,isOverlapping:!1,isCorrected:!1,isUnknown:!1,isUsed:!1,state:"none"})}return r}function Xt(i,e){if(f.fF.assertValue(i,"The given node must be defined"),f.fF.assertValue(e>=0,"The given nodeTextContentOffset must be >= 0"),f.fF.assert(function(){return i.nodeType!==Node.COMMENT_NODE},"Expect the given node is NOT a comment node"),0===e)return{node:Zt(i,!0)||i,textOrChildNodesOffset:0};if(e>i.textContent.length)return{node:void 0,textOrChildNodesOffset:-1};if(_.isEmpty(i.childNodes))return f.fF.assert(function(){return i.nodeType===Node.TEXT_NODE},"0 < nodeTextContentOffset <= node.textContent.length, and node has no childNodes, then node should be a TEXT_NODE"),{node:i,textOrChildNodesOffset:e};for(var o=e,a=0;a<i.childNodes.length;a++){var s=i.childNodes.item(a);if(s.nodeType!==Node.COMMENT_NODE){var u=s.textContent.length;if(o>u){o-=u;continue}if(s.nodeType===Node.TEXT_NODE)return{node:s,textOrChildNodesOffset:o};if(o===u){var c=Zt(s,!1);return c?{node:c,textOrChildNodesOffset:c.textContent.length}:{node:i,textOrChildNodesOffset:a+1}}return Xt(s,o)}}f.fF.assertFail("nodeTextContentOffset <= node.textContent.length, there should be a descendant (or same) Node that the given position lands on")}function gt(i,e){return!(!i||!e)&&(i===e||(e.nodeType===Node.ELEMENT_NODE?i.contains(e):gt(i,e.parentNode)))}var Je=d(35691);function un(i,e){var t=0,r=[];return _.forEach(i,function(o,a){var s;o.title&&t++;var u=e-t;return u<=0?_.take(i,a):_.size(o.groupItems)<=u?(t+=_.size(o.groupItems),void r.push({title:o.title,groupItems:(0,v.ev)([],null!==(s=o?.groupItems)&&void 0!==s?s:[],!0)})):(r.push({title:o.title,groupItems:_.take(o.groupItems,u)}),r)}),r}function Lt(i,e,t,r,o){f.fF.assert(function(){return!_.isEmpty(t)},"Expect the given bindingCategories NOT empty!"),f.fF.assertValue(r,"uniqueItemsTextList must be defined already");var a=i[e];f.fF.assertValue(a,"spans[selectedSpanIndex] must be defined!");var s=[];return _.forEach(t,function(u){var c=function(i,e){var t=i.replacementBindings;switch(e){case 1:return t&&t.alternates;case 2:return t&&t.phraseCompletions;case 3:return t&&t.suggestedReplacements;case 0:return i.binding?[i.binding]:[];case 4:return t&&t.phraseExtensions;default:return void f.fF.assertFail("Unhandled SpanBindingCategory value")}}(a,u),l=[];_.forEach(c,function(p){l.push({segments:p.textSegmentsWithMatchInfo,score:p.score,bindingCategory:u})}),l.sort(function(p,g){return g.score-p.score}),s.push.apply(s,l)}),ln(i,e,s,r,o)}function ln(i,e,t,r,o){var a=[],s=i[e];if(_.forEach(t,function(m){var E=[];_.forEach(i,function(P,F){F!==e?E.push({text:P.text,isMatched:!0}):(f.fF.assertValue(_.isEmpty(m)||m.segments,"selectedSpanOneBindingText.segments"),_.isEmpty(m)||E.push.apply(E,m.segments||[]))}),pn(E,a,r,m.score)}),!(_.findIndex(t,function(m){return 0===m.bindingCategory})>=0||_.isEmpty(s.overlapSpans))){var c=Math.max(0,_.findLastIndex(t,function(m){return 1===m.bindingCategory})),l=function(i,e,t,r){var o=[],a=_.map(i,function(c){return c.text}).join("");return _.isEmpty(i[e].overlapSpans)||(i[e].overlapSpans=_.filter(i[e].overlapSpans,function(c){return _.inRange(r,c.startIndex,c.endExcludingIndex+1)})),_.forEach(i[e].overlapSpans,function(c){var l=[],p=0;_.forEach(i,function(m){m.endExcludingIndex<=c.startIndex?(l.push({text:m.text,isMatched:!0}),p++):m.startIndex<c.endExcludingIndex?(m.startIndex<c.startIndex&&(l.push({text:a.substring(m.startIndex,c.startIndex),isMatched:!0}),p++),c.endExcludingIndex<m.endExcludingIndex&&l.push({text:a.substring(c.endExcludingIndex,m.endExcludingIndex),isMatched:!0})):l.push({text:m.text,isMatched:!0})}),_.forEach(c.replacementBindings&&c.replacementBindings.alternates,function(m){for(var E=_.cloneDeep(l),P=m.textSegmentsWithMatchInfo,F=P.length-1;F>=0;F--)E.splice(p,0,P[F]);pn(E,o,t,m.score)})}),o}(i,e,r,o),p=_.slice(a,0,c),g=(0,v.ev)((0,v.ev)([],p,!0),l,!0);g.sort(function(m,E){return E.score-m.score}),a=(0,v.ev)((0,v.ev)([],g,!0),_.slice(a,c),!0)}return a}function pn(i,e,t,r){var o=_.map(i,function(a){return a.text}).join("");-1===_.indexOf(t,o)&&(t.push(o),e.push({textSegments:i,text:o,score:r}))}var Gn=new n.InjectionToken("QnaUnknownTermService"),_t=d(64647),Re=d(83309),Qe=d(65181),Pt=d(59968),ht=d(44581),kt=function(e,t,r,o,a){return{"font-size":e,"font-family":t,"font-weight":r,"font-style":o,"text-decoration":a}};function ot(i,e){if(1&i&&(n.\u0275\u0275elementStart(0,"h4",7),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&i){var t=n.\u0275\u0275nextContext().$implicit,r=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction5(2,kt,r.presentation.value.questionFontProperties.size.px+"px",r.presentation.value.questionFontProperties.family,r.presentation.value.questionFontProperties.bold,r.presentation.value.questionFontProperties.italic,r.presentation.value.questionFontProperties.underline)),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(t.title)}}var dn=function(e){return{matchedSegment:e}};function et(i,e){if(1&i&&(n.\u0275\u0275elementStart(0,"span",15),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&i){var t=e.$implicit;n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(3,dn,!t.isMatched)),n.\u0275\u0275attribute("aria-hidden",!0),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(t.text)}}function at(i,e){if(1&i&&(n.\u0275\u0275elementStart(0,"div",13),n.\u0275\u0275template(1,et,2,5,"span",14),n.\u0275\u0275elementEnd()),2&i){var t=n.\u0275\u0275nextContext().$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",t.textSegments)}}function Rt(i,e){1&i&&(n.\u0275\u0275elementStart(0,"div",16),n.\u0275\u0275element(1,"span",17),n.\u0275\u0275elementEnd())}var ft=function(e,t,r,o,a,s){return{backgroundColor:e,"font-size":t,"font-family":r,"font-weight":o,"font-style":a,"text-decoration":s}},St=function(e,t,r,o){return{selected:e,themableBackgroundColorSelected:t,showMoreItem:r,showAsGroupTitle:o}};function At(i,e){if(1&i){var t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"li",10),n.\u0275\u0275listener("mouseenter",function(){var l=n.\u0275\u0275restoreView(t).index,p=n.\u0275\u0275nextContext(2).index,g=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(g.updateHoverItemIndex(p,l))})("accessible-click",function(){var l=n.\u0275\u0275restoreView(t).$implicit,p=n.\u0275\u0275nextContext(4);return n.\u0275\u0275resetView(p.selectDropdownItem(l))}),n.\u0275\u0275template(1,at,2,1,"div",11),n.\u0275\u0275template(2,Rt,2,0,"div",12),n.\u0275\u0275elementEnd()}if(2&i){var r=e.$implicit,o=e.index,a=n.\u0275\u0275nextContext(2).index,s=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction6(5,ft,s.presentation.value.useShellTheme?"":o===s.selectedSpanIndex&&a===s.selectedGroupIndex||o===s.hoverSpanIndex&&a===s.hoverGroupIndex?s.presentation.value.hoverColor:s.presentation.value.backgroundColor,s.presentation.value.questionFontProperties.size.px+"px",s.presentation.value.questionFontProperties.family,s.presentation.value.questionFontProperties.bold,s.presentation.value.questionFontProperties.italic,s.presentation.value.questionFontProperties.underline))("ngClass",n.\u0275\u0275pureFunction4(12,St,o===s.selectedSpanIndex&&a===s.selectedGroupIndex||o===s.hoverSpanIndex&&a===s.hoverGroupIndex,o===s.selectedSpanIndex&&a===s.selectedGroupIndex||o===s.hoverSpanIndex&&a===s.hoverGroupIndex,r.isShowMore,r.isShowMore&&s.hasGroupTitle)),n.\u0275\u0275attribute("aria-selected",o===s.selectedSpanIndex&&a===s.selectedGroupIndex?"true":"false"),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!r.isShowMore),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.isShowMore)}}function gn(i,e){if(1&i&&(n.\u0275\u0275elementStart(0,"ul",8),n.\u0275\u0275template(1,At,3,17,"li",9),n.\u0275\u0275elementEnd()),2&i){var t=n.\u0275\u0275nextContext().$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",t.groupItems)}}function hn(i,e){if(1&i&&(n.\u0275\u0275elementStart(0,"li",4),n.\u0275\u0275template(1,ot,2,8,"h4",5),n.\u0275\u0275template(2,gn,2,1,"ul",6),n.\u0275\u0275elementEnd()),2&i){var t=e.$implicit,r=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction5(3,kt,r.presentation.value.questionFontProperties.size.px+"px",r.presentation.value.questionFontProperties.family,r.presentation.value.questionFontProperties.bold,r.presentation.value.questionFontProperties.italic,r.presentation.value.questionFontProperties.underline)),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.title&&(null==t.groupItems?null:t.groupItems.length)>0),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.groupItems)}}var fn=function(e,t){return{link:e,fixRequestedText:t}},mn=function(e){return{"border-top-color":e}};function $n(i,e){if(1&i){var t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"span",20),n.\u0275\u0275listener("accessible-click",function(){n.\u0275\u0275restoreView(t);var a=n.\u0275\u0275nextContext(3);return n.\u0275\u0275resetView(a.performActionsInUnknownSpanHeader())}),n.\u0275\u0275elementEnd()}if(2&i){var r=n.\u0275\u0275nextContext(3);n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction2(3,fn,!r.disableUnknownSpanHeaderSubtitleAction,r.isUnknownSpanHeaderForFixRequested))("innerHTML",r.unknownSpanHeaderSubtitle,n.\u0275\u0275sanitizeHtml)("ngStyle",n.\u0275\u0275pureFunction1(6,mn,r.presentation.value.useShellTheme?"":r.presentation.value.questionFontProperties.color))}}function vn(i,e){if(1&i&&(n.\u0275\u0275elementStart(0,"h4",18)(1,"span"),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(3,$n,1,8,"span",19),n.\u0275\u0275elementEnd()),2&i){var t=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction5(3,kt,t.presentation.value.questionFontProperties.size.px+"px",t.presentation.value.questionFontProperties.family,t.presentation.value.questionFontProperties.bold,t.presentation.value.questionFontProperties.italic,t.presentation.value.questionFontProperties.underline)),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(t.unknownSpanHeaderTitle),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.unknownSpanHeaderSubtitle)}}var Ft=function(e,t){return{backgroundColor:e,color:t}};function bt(i,e){if(1&i&&(n.\u0275\u0275elementStart(0,"ul",1),n.\u0275\u0275template(1,hn,3,9,"li",2),n.\u0275\u0275template(2,vn,4,9,"h4",3),n.\u0275\u0275elementEnd()),2&i){var t=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction2(3,Ft,t.presentation.value.useShellTheme?"":t.presentation.value.backgroundColor,t.presentation.value.useShellTheme?"":t.presentation.value.questionFontProperties.color)),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",t.autoCompleteViewModel.dropdownGroups),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.showUnknownSpanHeader)}}var It=/\u00a0/g,z="qna_autocomplete_open",Cn="qna_autocomplete_item",O=function(){function i(e,t,r,o,a){this.highContrastCssGenerationService=e,this.localizationService=t,this.screenReaderService=r,this.telemetryService=o,this.unknownTermService=a,this.utteranceSelected=new n.EventEmitter,this.fullyExpanded=new n.EventEmitter,this.destroy$=new nt.xQ,this.resetSelectedIndices(),this.resetHoverIndices(),this.initializeHighContrastRules()}return i.prototype.ngOnInit=function(){var e=this;this.maxItemCountInFullExpansion=this.maxItemCountInFullExpansion>0?this.maxItemCountInFullExpansion:10,this.maxItemCountInPartialExpansion=this.maxItemCountInPartialExpansion>0?this.maxItemCountInPartialExpansion:4,f.fF.assert(function(){return e.maxItemCountInFullExpansion>=e.maxItemCountInPartialExpansion},"maxItemCountInFullExpansion is less than maxItemCountInPartialExpansion. It does not make sense so we are setting maxItemCountInFullExpansion to be maxItemCountInPartialExpansion now."),this.maxItemCountInFullExpansion=Math.max(this.maxItemCountInFullExpansion,this.maxItemCountInPartialExpansion),this.params.pipe((0,W.R)(this.destroy$)).subscribe(function(t){return e.generateDropdownItems(t)}),this.selectPrevious.pipe((0,W.R)(this.destroy$)).subscribe(function(){return e.moveSelectionUp()}),this.selectNext.pipe((0,W.R)(this.destroy$)).subscribe(function(){return e.moveSelectionDown()}),this.confirmSelection.pipe((0,W.R)(this.destroy$)).subscribe(function(){return e.selectCurrentDropdownItem()}),this.initializedTelemetryEvent=this.telemetryService.logEvent(Je.dY),this.isInitialized=!0},i.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete(),this.screenReaderService.cancelDebounce(Cn)},i.prototype.updateHoverItemIndex=function(e,t){this.resetSelectedIndices(),this.hoverGroupIndex=e,this.hoverSpanIndex=t,this.screenReaderCurrentDropdownSelection(e,t)},i.prototype.selectDropdownItem=function(e){if(this.isInitialized){if(e.isShowMore)return void this.expandAllItems();e&&e.textSegments&&(this.utteranceSelected.emit({utterance:e.text,tags:["Dropdown","Committed"]}),this.telemetryService.logChildEvent(this.initializedTelemetryEvent,Je.$g,{spanState:this.selectedSpan.state}))}},i.prototype.performActionsInUnknownSpanHeader=function(){var e,t;return(0,v.mG)(this,void 0,void 0,function(){var r,o;return(0,v.Jh)(this,function(a){switch(a.label){case 0:return this.disableUnknownSpanHeaderSubtitleAction?[2]:(r=_.map(this.params.value.spans,function(s){return s.text}).join(""),[4,this.unknownTermService.handleUnknownTerm(r,this.selectedSpan.text,this.params.value.dataSourceArray,this.params.value.exploration,null===(t=null===(e=this.params.value.config.header)||void 0===e?void 0:e.unknownSpanHeaderConfig)||void 0===t?void 0:t.actionType)]);case 1:return 0===(o=a.sent())?(this.unknownSpanHeaderSubtitle=this.localizationService.get("Qna_AutoComplete_FixRequestedLabelText"),this.disableUnknownSpanHeaderSubtitleAction=!0,this.isUnknownSpanHeaderForFixRequested=!0,this.utteranceSelected.emit({utterance:r,tags:["Dropdown","AskToAdd","Committed"],showDropdown:!0,action:o})):this.utteranceSelected.emit({utterance:void 0,action:o}),[2]}})})},Object.defineProperty(i.prototype,"hasGroupTitle",{get:function(){var t;return _.some(null===(t=this.autoCompleteViewModel)||void 0===t?void 0:t.dropdownGroups,function(r){return!_.isEmpty(r.title)})},enumerable:!1,configurable:!0}),i.prototype.expandAllItems=function(){var e=this;f.fF.assertValue(this.shouldDisplayShowMore,"Expect this be called only when this.shouldDisplayShowMore is true"),f.fF.assertValue(this.autoCompleteViewModel,"Expect this.autoCompleteViewModel to be defined"),this.shouldDisplayShowMore=!1,f.fF.assert(function(){return _.last(_.last(e.autoCompleteViewModel.dropdownGroups).groupItems).isShowMore},"last group should be for showMore item");var t=_.size(this.autoCompleteViewModel.dropdownGroups)-2;f.fF.assert(function(){return t>=0},"expect lastVisibleGroupIndex>=0 before click ShowMore");var r=_.size(this.autoCompleteViewModel.dropdownGroups[t].groupItems)-1;f.fF.assert(function(){return r>=0},"expect lastVisiableItemIndex>=0 before click ShowMore"),this.autoCompleteViewModel.dropdownGroups=this.allDropdownGroups;var o=h(this.autoCompleteViewModel.dropdownGroups,{groupIndex:t,itemIndex:r});this.selectedGroupIndex=o.groupIndex,this.selectedSpanIndex=o.itemIndex,this.screenReaderCurrentDropdownSelection(this.selectedGroupIndex,this.selectedSpanIndex),this.fullyExpanded.emit()},i.prototype.moveSelectionUp=function(){var t,r,e=this;if(this.isInitialized&&(!this.selectPrevious||void 0!==this.selectPrevious.value)&&null!==(t=this.autoCompleteViewModel)&&void 0!==t&&t.dropdownGroups){if(f.fF.assert(function(){return e.selectedSpanIndex>=0},"Expect selectedSpanIndex >= 0"),this.selectedSpanIndex>0)this.selectedSpanIndex--;else if(0===this.selectedSpanIndex)if(this.selectedGroupIndex>0)this.selectedGroupIndex--,this.selectedSpanIndex=this.autoCompleteViewModel.dropdownGroups[this.selectedGroupIndex].groupItems.length-1;else if(0===this.selectedGroupIndex)this.selectedGroupIndex--;else{this.selectedGroupIndex=this.autoCompleteViewModel.dropdownGroups.length-1;var o=null===(r=this.autoCompleteViewModel.dropdownGroups[this.selectedGroupIndex])||void 0===r?void 0:r.groupItems;_.isEmpty(o)||(this.selectedSpanIndex=o.length-1)}this.resetHoverIndices(),this.screenReaderCurrentDropdownSelection(this.selectedGroupIndex,this.selectedSpanIndex)}},i.prototype.moveSelectionDown=function(){var e;if(this.isInitialized&&(!this.selectNext||void 0!==this.selectNext.value)&&null!==(e=this.autoCompleteViewModel)&&void 0!==e&&e.dropdownGroups){var t=h(this.autoCompleteViewModel.dropdownGroups,{groupIndex:this.selectedGroupIndex,itemIndex:this.selectedSpanIndex});this.selectedGroupIndex=t.groupIndex,this.selectedSpanIndex=t.itemIndex,this.resetHoverIndices(),this.screenReaderCurrentDropdownSelection(this.selectedGroupIndex,this.selectedSpanIndex)}},i.prototype.selectCurrentDropdownItem=function(){var e,t;if(this.isInitialized&&(!this.confirmSelection||void 0!==this.confirmSelection.value)){var r=null===(e=this.autoCompleteViewModel)||void 0===e?void 0:e.dropdownGroups,o=r&&(null===(t=r[this.selectedGroupIndex])||void 0===t?void 0:t.groupItems);o&&o[this.selectedSpanIndex]?this.selectDropdownItem(o[this.selectedSpanIndex]):this.utteranceSelected.emit({utterance:void 0})}},i.prototype.currentDropdownString=function(e,t){var r,o=null===(r=this.autoCompleteViewModel.dropdownGroups[e])||void 0===r?void 0:r.groupItems,a=o&&o[t];if(a)return a.isShowMore?a.text:_.map(a.textSegments,function(s){return s.text}).join("").replace(It," ")},i.prototype.screenReaderCurrentDropdownSelection=function(e,t){var r=this.currentDropdownString(e,t);if(r){var o=this.autoCompleteViewModel.dropdownGroups[e].title;this.screenReaderService.alertWithDebounce(Cn,o?o+" "+r:r)}},i.prototype.generateDropdownItems=function(e){if(e){var t=e.spans,r=e.cursorPosition;this.resetSelectedIndices(),this.resetHoverIndices();var o=function(i,e){var t=0;if(_.isEmpty(i))return-1;if(0===e)return t;if(e>i[i.length-1].endExcludingIndex)return-1;for(t=i.length-1;t>=0;t--){var o=i[t],a=t>0?i[t-1]:void 0,s=e===o.startIndex&&_.isEmpty(o.text),u=a&&a.isWhiteSpace,c=o.startIndex<=e&&e<=o.endExcludingIndex;if(s){var l=o.replacementBindings,p=!_.isEmpty(l&&l.phraseExtensions),g=!_.isEmpty(l&&l.phraseCompletions);if((p||g)&&u)return t}else if(c&&!o.isWhiteSpace)return t}return t}(t,r);if(-1===o)return void(this.showAutoCompleteDropdown=!1);this.unknownSpanHeaderTitle=void 0,this.unknownSpanHeaderSubtitle=void 0,this.selectedSpan=t[o],this.showUnknownSpanHeader=!1,this.disableUnknownSpanHeaderSubtitleAction=!1,this.isUnknownSpanHeaderForFixRequested=!1;var a=function(i,e,t){var r,o,Dt,a=function(i){return _.map(i,function(e){return{text:e.text,correctedStartIndex:e.correctedStartIndex,correctedEndExcludingIndex:e.correctedEndExcludingIndex,isOverlapping:e.isOverlapping,tokens:e.tokens,binding:e.binding,replacementBindings:e.replacementBindings,inferredTermBindings:e.inferredTermBindings,overlapSpans:e.overlapSpans,inferredTermBindingsUnsupported:e.inferredTermBindingsUnsupported,isWhiteSpace:e.isWhiteSpace,isCorrected:e.isCorrected,isUsed:e.isUsed,isUnknown:e.isUnknown,state:e.state,startIndex:e.startIndex,endExcludingIndex:e.endExcludingIndex}})}(i.spans),s=i.config,u=i.cursorPosition,c=a[e],l=c.isUnknown,p=!!c.binding,g=!_.isEmpty(a[e].overlapSpans),m=c.replacementBindings,E=!_.isEmpty(m&&m.alternates),P=!_.isEmpty(m&&m.phraseExtensions),F=!_.isEmpty(m&&m.phraseCompletions),se=!_.isEmpty(m&&m.suggestedReplacements),Pe=p||E||P||F||se||g,be=null===(r=s.header)||void 0===r?void 0:r.show,ct=[],Tt=[];if("accepted"===c.state||"none"===c.state){if(!_.isEmpty(c.text)){var On=Lt(a,e,[0],Tt,u);_.isEmpty(On)||ct.push({groupItems:On})}(E||g||F||P||se)&&(Dt=Lt(a,e,[1,2,4,3],Tt,u),_.isEmpty(Dt)||ct.push({groupItems:Dt,title:be&&p?t.get("Qna_YouCouldAlsoTry_LabelText"):void 0}))}else l&&be&&"none"!==s.header.unknownSpanHeaderConfig.actionType?(f.fF.assert(function(){return null!=s.header.unknownSpanHeaderConfig.actionType},"when config.header.show is true, config.header.unknownSpanHeaderConfig.actionType must be defined"),ct.push({title:t.get("Qna_AutoComplete_UnknowTermWithNoAlternatesTitle")})):Pe?(p&&ct.push({groupItems:Lt(a,e,[0],Tt,u)}),(E||g)&&(Dt=Lt(a,e,[1],Tt,u),_.isEmpty(Dt)||ct.push({groupItems:Dt,title:be?t.get(p?"Qna_YouCouldAlsoTry_LabelText":"Qna_DidYouMean_LabelTextWithColon"):void 0}))):ct.push({groupItems:ln(a,e,[{segments:[{text:c.text,isMatched:!0}],score:null===(o=c.binding)||void 0===o?void 0:o.score}],Tt,u)});return{dropdownGroups:ct}}(e,o,this.localizationService);if(this.allDropdownGroups=un(a.dropdownGroups,this.maxItemCountInFullExpansion),this.autoCompleteViewModel=_.merge({},a,{dropdownGroups:this.allDropdownGroups}),this.showAutoCompleteDropdown=!_.isEmpty(this.allDropdownGroups),this.generateUnknownSpanTitle(e,o),this.resetExpansionState(),this.showAutoCompleteDropdown){var s=_.sum(this.autoCompleteViewModel.dropdownGroups.map(function(c){return _.size(c.groupItems)}));this.shouldDisplayShowMore&&s--;var u=this.localizationService.format("Qna_ScreenReader_SuggestionsOpened_NoTerm",["".concat(s)]);this.screenReaderService.alertWithDebounce(z,u)}else this.screenReaderService.cancelDebounce(z)}},i.prototype.generateUnknownSpanTitle=function(e,t){var o,a,s,u,r=this;if("none"===(null===(a=null===(o=e.config.header)||void 0===o?void 0:o.unknownSpanHeaderConfig)||void 0===a?void 0:a.actionType))return this.showUnknownSpanHeader=!1,this.unknownSpanHeaderTitle=void 0,void(this.unknownSpanHeaderSubtitle=void 0);var c=e.spans,l=_.last(this.allDropdownGroups);if(l?.title&&this.unknownTermService){var p=_.map(c,function(P){return P.text}).join(""),g=null===(u=null===(s=e.config.header)||void 0===s?void 0:s.unknownSpanHeaderConfig)||void 0===u?void 0:u.actionType;if(l.title===this.localizationService.get("Qna_DidYouMean_LabelTextWithColon"))f.fF.assert(function(){var P;return null===(P=e.config.header)||void 0===P?void 0:P.show},"Expect params.config.header?.show to be true when lastDropdownGroup.title is not empty"),"textOnlyHeader"!==g&&!this.unknownTermService.wasUtteranceAdded(p,this.selectedSpan.text)&&(this.unknownSpanHeaderTitle=this.localizationService.get("Qna_AutoComplete_UnusedTermWithAlternatesTitle"),this.unknownSpanHeaderSubtitle=this.unknownTermService.getLabel(c[t],g,e.modelOwner),this.showUnknownSpanHeader=!0);else if(l.title===this.localizationService.get("Qna_AutoComplete_UnknowTermWithNoAlternatesTitle"))if(f.fF.assert(function(){var P;return null===(P=e.config.header)||void 0===P?void 0:P.show},"Expect params.config.header?.show to be true when lastDropdownGroup.title is not empty"),this.showUnknownSpanHeader=!0,"textOnlyHeader"===g){this.unknownSpanHeaderTitle=void 0;var m=e.config.header.unknownSpanHeaderConfig.textOnlyTemplate;if(m){var E=_.map(m.variables,function(P){var F=1===P.type?r.selectedSpan.text:P.text;return P.isBold?function(i){return"<b>"+i+"</b>"}(F):F});this.unknownSpanHeaderSubtitle=this.localizationService.format(m.template,E)}else this.unknownSpanHeaderSubtitle=this.localizationService.get("Qna_AutoComplete_UnknowTermWithNoAlternatesTitle");this.disableUnknownSpanHeaderSubtitleAction=!0}else this.unknownTermService.wasUtteranceAdded(p,this.selectedSpan.text)?(this.unknownSpanHeaderTitle=this.localizationService.get("Qna_AutoComplete_UnknowTermHasAlreadyBeenAdded"),this.disableUnknownSpanHeaderSubtitleAction=!0,this.isUnknownSpanHeaderForFixRequested=!0):(f.fF.assert(function(){return"askToAdd"===g||"defineInTooling"===g},"Expect the actionType is either AskToAdd or DefineInTooling"),this.unknownSpanHeaderTitle=this.localizationService.get("Qna_AutoComplete_UnknowTermWithNoAlternatesTitle"),this.unknownSpanHeaderSubtitle=this.unknownTermService.getLabel(c[t],g,e.modelOwner))}},i.prototype.resetExpansionState=function(){var e,t;f.fF.assertValue(this.autoCompleteViewModel,"Expect this.autoCompleteViewModel to be defined"),this.autoCompleteViewModel.dropdownGroups=un(this.allDropdownGroups,this.showUnknownSpanHeader?this.maxItemCountInPartialExpansion-1:this.maxItemCountInPartialExpansion),this.shouldDisplayShowMore=_.size(this.autoCompleteViewModel.dropdownGroups)<_.size(this.allDropdownGroups)||_.size(null===(e=_.last(this.autoCompleteViewModel.dropdownGroups))||void 0===e?void 0:e.groupItems)<_.size(null===(t=_.last(this.allDropdownGroups))||void 0===t?void 0:t.groupItems),this.shouldDisplayShowMore&&this.autoCompleteViewModel.dropdownGroups.push({groupItems:[{isShowMore:!0,text:this.localizationService.get("ShowMore"),textSegments:[],score:0}]})},i.prototype.initializeHighContrastRules=function(){this.highContrastCssGenerationService.addRule(".themeableElement .link","{ color: var(--link-color) !important; opacity: 1 !important; }")},i.prototype.resetHoverIndices=function(){this.hoverGroupIndex=-1,this.hoverSpanIndex=0},i.prototype.resetSelectedIndices=function(){this.selectedGroupIndex=-1,this.selectedSpanIndex=0},i.\u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(_t.g),n.\u0275\u0275directiveInject(Qe.o),n.\u0275\u0275directiveInject(Re.g),n.\u0275\u0275directiveInject(oe.y0),n.\u0275\u0275directiveInject(Gn,8))},i.\u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["qna-autocomplete"]],inputs:{maxItemCountInFullExpansion:"maxItemCountInFullExpansion",maxItemCountInPartialExpansion:"maxItemCountInPartialExpansion",params:"params",presentation:"presentation",selectPrevious:"selectPrevious",selectNext:"selectNext",confirmSelection:"confirmSelection"},outputs:{utteranceSelected:"utteranceSelected",fullyExpanded:"fullyExpanded"},decls:1,vars:1,consts:[["id","qnaAutoComplete","role","listbox","class","qnaAutoComplete themeableElement highContrastBorder",3,"ngStyle",4,"ngIf"],["id","qnaAutoComplete","role","listbox",1,"qnaAutoComplete","themeableElement","highContrastBorder",3,"ngStyle"],["class","groupItem","drag-resize-disabled","true",3,"ngStyle",4,"ngFor","ngForOf"],["class","unknownTermTitle",3,"ngStyle",4,"ngIf"],["drag-resize-disabled","true",1,"groupItem",3,"ngStyle"],["class","dropdownGroupTitle",3,"ngStyle",4,"ngIf"],["class","dropdownGroupItems",4,"ngIf"],[1,"dropdownGroupTitle",3,"ngStyle"],[1,"dropdownGroupItems"],["class","singleDropdownItem","role","option","data-testid","single-dropdown-item",3,"ngStyle","ngClass","mouseenter","accessible-click",4,"ngFor","ngForOf"],["role","option","data-testid","single-dropdown-item",1,"singleDropdownItem",3,"ngStyle","ngClass","mouseenter","accessible-click"],["class","singleDropdownItemTextContainer",4,"ngIf"],["class","singleDropdownItemTextContainer showMoreItem",4,"ngIf"],[1,"singleDropdownItemTextContainer"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"singleDropdownItemTextContainer","showMoreItem"],["localize","ShowMore"],[1,"unknownTermTitle",3,"ngStyle"],["tabindex","0","drag-resize-disabled","true",3,"ngClass","innerHTML","ngStyle","accessible-click",4,"ngIf"],["tabindex","0","drag-resize-disabled","true",3,"ngClass","innerHTML","ngStyle","accessible-click"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,bt,3,6,"ul",0),2&t&&n.\u0275\u0275property("ngIf",r.showAutoCompleteDropdown)},dependencies:[y.NgClass,y.NgForOf,y.NgIf,y.NgStyle,Pt.X,ht.t],styles:['.qnaAutoComplete[_ngcontent-%COMP%]{display:block;position:absolute;left:0;width:100%;border-radius:2px;box-shadow:0 1.2px 3.6px rgba(0,0,0,.11),0 6.4px 14.4px rgba(0,0,0,.13);background-color:var(--colorNeutralBackground1);color:var(--colorNeutralForeground1)}.qnaAutoComplete[_ngcontent-%COMP%]   .dropdownGroupTitle[_ngcontent-%COMP%], .qnaAutoComplete[_ngcontent-%COMP%]   .unknownTermTitle[_ngcontent-%COMP%], .qnaAutoComplete[_ngcontent-%COMP%]   .dropdownGroupItems[_ngcontent-%COMP%]   .singleDropdownItem.showMoreItem.showAsGroupTitle[_ngcontent-%COMP%]{font-family:Segoe UI Semibold,wf_segoe-ui_semibold,helvetica,arial,sans-serif;background-color:transparent;margin:0;white-space:pre-wrap}html:not([dir="rtl"])[_nghost-%COMP%]   .qnaAutoComplete[_ngcontent-%COMP%]   .dropdownGroupTitle[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .qnaAutoComplete[_ngcontent-%COMP%]   .dropdownGroupTitle[_ngcontent-%COMP%], html:not([dir="rtl"])[_nghost-%COMP%]   .qnaAutoComplete[_ngcontent-%COMP%]   .unknownTermTitle[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .qnaAutoComplete[_ngcontent-%COMP%]   .unknownTermTitle[_ngcontent-%COMP%], html:not([dir="rtl"])[_nghost-%COMP%]   .qnaAutoComplete[_ngcontent-%COMP%]   .dropdownGroupItems[_ngcontent-%COMP%]   .singleDropdownItem.showMoreItem.showAsGroupTitle[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .qnaAutoComplete[_ngcontent-%COMP%]   .dropdownGroupItems[_ngcontent-%COMP%]   .singleDropdownItem.showMoreItem.showAsGroupTitle[_ngcontent-%COMP%]{padding:4px 8px 8px}html[dir="rtl"][_nghost-%COMP%]   .qnaAutoComplete[_ngcontent-%COMP%]   .dropdownGroupTitle[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .qnaAutoComplete[_ngcontent-%COMP%]   .dropdownGroupTitle[_ngcontent-%COMP%], html[dir="rtl"][_nghost-%COMP%]   .qnaAutoComplete[_ngcontent-%COMP%]   .unknownTermTitle[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .qnaAutoComplete[_ngcontent-%COMP%]   .unknownTermTitle[_ngcontent-%COMP%], html[dir="rtl"][_nghost-%COMP%]   .qnaAutoComplete[_ngcontent-%COMP%]   .dropdownGroupItems[_ngcontent-%COMP%]   .singleDropdownItem.showMoreItem.showAsGroupTitle[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .qnaAutoComplete[_ngcontent-%COMP%]   .dropdownGroupItems[_ngcontent-%COMP%]   .singleDropdownItem.showMoreItem.showAsGroupTitle[_ngcontent-%COMP%]{padding:4px 8px 8px}.qnaAutoComplete[_ngcontent-%COMP%]   .dropdownGroupItems[_ngcontent-%COMP%]   .singleDropdownItem[_ngcontent-%COMP%]{background-color:var(--colorNeutralBackground1)}.qnaAutoComplete[_ngcontent-%COMP%]   .dropdownGroupItems[_ngcontent-%COMP%]   .singleDropdownItem.selected[_ngcontent-%COMP%]{background-color:var(--colorNeutralBackground1Hover)}.qnaAutoComplete[_ngcontent-%COMP%]   .unknownTermTitle[_ngcontent-%COMP%]{font-weight:400!important;border-top-color:var(--colorNeutralForeground1)}.qnaAutoComplete[_ngcontent-%COMP%]   .unknownTermTitle[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{color:var(--colorBrandForegroundLink);text-decoration:none;cursor:pointer!important}.qnaAutoComplete[_ngcontent-%COMP%]   .unknownTermTitle[_ngcontent-%COMP%]   .fixRequestedText[_ngcontent-%COMP%]{font-weight:700!important}.qnaAutoComplete[_ngcontent-%COMP%]   .groupItem[_ngcontent-%COMP%]{display:block;text-decoration:none}.qnaAutoComplete[_ngcontent-%COMP%]   .groupItem[_ngcontent-%COMP%]   .dropdownGroupItems[_ngcontent-%COMP%]{list-style:none;z-index:2;cursor:pointer;display:block;position:relative;margin-top:0!important;overflow:visible;white-space:pre-wrap}.qnaAutoComplete[_ngcontent-%COMP%]   .dropdownGroupItems[_ngcontent-%COMP%]   .singleDropdownItem[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin:0;background-color:transparent;overflow-wrap:break-word}html:not([dir="rtl"])[_nghost-%COMP%]   .qnaAutoComplete[_ngcontent-%COMP%]   .dropdownGroupItems[_ngcontent-%COMP%]   .singleDropdownItem[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .qnaAutoComplete[_ngcontent-%COMP%]   .dropdownGroupItems[_ngcontent-%COMP%]   .singleDropdownItem[_ngcontent-%COMP%]{padding:4px 0 8px 16px}html[dir="rtl"][_nghost-%COMP%]   .qnaAutoComplete[_ngcontent-%COMP%]   .dropdownGroupItems[_ngcontent-%COMP%]   .singleDropdownItem[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .qnaAutoComplete[_ngcontent-%COMP%]   .dropdownGroupItems[_ngcontent-%COMP%]   .singleDropdownItem[_ngcontent-%COMP%]{padding:4px 16px 8px 0}.qnaAutoComplete[_ngcontent-%COMP%]   .dropdownGroupItems[_ngcontent-%COMP%]   .singleDropdownItem[_ngcontent-%COMP%]:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color);outline-offset:-1px}.qnaAutoComplete[_ngcontent-%COMP%]   .dropdownGroupItems[_ngcontent-%COMP%]   .singleDropdownItem[_ngcontent-%COMP%]   .singleDropdownItemTextContainer[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline}.qnaAutoComplete[_ngcontent-%COMP%]   .dropdownGroupItems[_ngcontent-%COMP%]   .singleDropdownItem.showMoreItem[_ngcontent-%COMP%]{color:var(--colorBrandForegroundLink)}.qnaAutoComplete[_ngcontent-%COMP%]   .matchedSegment[_ngcontent-%COMP%]{font-weight:700}']}),i}();function h(i,e){var t;f.fF.assertValue(i,"Expect dropdownGroups to be defined"),f.fF.assert(function(){return e.itemIndex>=0},"Expect currentIndices.itemIndex >= 0");var r=e.groupIndex,o=e.itemIndex,a=null===(t=i[r])||void 0===t?void 0:t.groupItems;return a&&o===a.length-1?r>=i.length-1?{groupIndex:-1,itemIndex:0}:{groupIndex:r+1,itemIndex:0}:r<0?{groupIndex:0,itemIndex:0}:{groupIndex:r,itemIndex:o+1}}var C=d(26898),D=d(83008),w=d(39503),b=d(9380),A=d(76072),L=d(84281),R=d(52298),Z=d(22844),H=d(1240),x=["contentElementExtraContainer"],X=["deleteButton"],ae=["commitButton"],ve=["autoComplete"],Fe=["contentElement"],le=["qnaInputContainer"],Ne=["beginGripper"],Be=["endGripper"],Ke=["spanElement"],Ze=function(e,t,r,o){return{width:e,height:t,right:r,top:o}},Oe=function(e){return{"stroke-width":e}};function mt(i,e){if(1&i&&(n.\u0275\u0275namespaceSVG(),n.\u0275\u0275elementStart(0,"svg",19),n.\u0275\u0275element(1,"circle",20),n.\u0275\u0275elementEnd()),2&i){var t=n.\u0275\u0275nextContext().ngIf,r=n.\u0275\u0275nextContext(3).ngIf;n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction4(7,Ze,t.meatball.width+"px",t.meatball.height+"px",t.meatball.right+"px",t.meatball.top+"px")),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction1(12,Oe,t.meatball.strokeWidth+"px")),n.\u0275\u0275attribute("stroke",t.meatball.strokeColor)("fill",r.useShellTheme?"":t.meatball.fillColor)("r",t.meatball.r)("cx",t.meatball.cx)("cy",t.meatball.cy)}}var st=function(e,t,r){return{notClickable:e,loadingIcon:t,warningIcon:r}},Te=function(e,t){return{color:e,"font-size":t}};function Qt(i,e){if(1&i){var t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"span",17),n.\u0275\u0275listener("accessible-click",function(){n.\u0275\u0275restoreView(t);var c=n.\u0275\u0275nextContext(4);return n.\u0275\u0275resetView(c.resetAllState())}),n.\u0275\u0275template(1,mt,2,14,"svg",18),n.\u0275\u0275elementEnd()}if(2&i){var r=e.ngIf,o=n.\u0275\u0275nextContext(2).ngIf,a=n.\u0275\u0275nextContext().ngIf,s=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction3(6,st,s.noResetAllActionIndication,"loading"===r.state,"warning"===r.state))("ngStyle",n.\u0275\u0275pureFunction2(10,Te,a.useShellTheme?"":a.questionFontProperties.color,o.iconFontSize+"px"))("pbi-tooltip",r.tooltipConfig),n.\u0275\u0275attribute("aria-label",r.ariaLabel)("role","normal"!==r.state?"alert":"button"),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf","normal"!==r.state)}}var xt=function(e){return{width:e}},tt=function(e){return{"font-size":e}},Nt=function(e,t,r,o){return{state:e,ariaLabel:t,tooltipConfig:r,meatball:o}};function wt(i,e){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",14)(2,"span",15),n.\u0275\u0275text(3,"\xa0"),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(4,Qt,2,13,"span",16),n.\u0275\u0275pipe(5,"async"),n.\u0275\u0275pipe(6,"async"),n.\u0275\u0275pipe(7,"async"),n.\u0275\u0275pipe(8,"async"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&i){var t=n.\u0275\u0275nextContext().ngIf,r=n.\u0275\u0275nextContext().ngIf,o=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction1(11,xt,null!=o.fullConfig&&o.fullConfig.showQuestionIcon?t.iconFontSize+"px":0)),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction1(13,tt,r.questionFontProperties.size.px+"px")),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",n.\u0275\u0275pureFunction4(15,Nt,n.\u0275\u0275pipeBind1(5,3,o.questionIconProperties.state$),n.\u0275\u0275pipeBind1(6,5,o.questionIconProperties.ariaLabel$),n.\u0275\u0275pipeBind1(7,7,o.questionIconProperties.tooltipConfig$),n.\u0275\u0275pipeBind1(8,9,o.questionIconProperties.loadingWarningPresentation$)))}}function qt(i,e){if(1&i){var t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",32,33),n.\u0275\u0275listener("keyup",function(a){n.\u0275\u0275restoreView(t);var s=n.\u0275\u0275nextContext(2).$implicit,u=n.\u0275\u0275nextContext(6);return n.\u0275\u0275resetView(u.gripperKeyUp(a,s,"beginGripper"))})("cdkDragStarted",function(){n.\u0275\u0275restoreView(t);var a=n.\u0275\u0275nextContext(8);return n.\u0275\u0275resetView(a.beginGripperDragStarted())}),n.\u0275\u0275namespaceSVG(),n.\u0275\u0275elementStart(2,"svg",34),n.\u0275\u0275element(3,"rect"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"svg",35),n.\u0275\u0275element(5,"circle"),n.\u0275\u0275elementEnd()()}if(2&i){var r=n.\u0275\u0275nextContext(7).ngIf;n.\u0275\u0275property("cdkDragData","beginGripper"),n.\u0275\u0275advance(3),n.\u0275\u0275attribute("fill",r.errorUnderlineColor),n.\u0275\u0275advance(2),n.\u0275\u0275attribute("stroke",r.errorUnderlineColor)("fill",r.backgroundColor)}}function ge(i,e){if(1&i){var t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",36,37),n.\u0275\u0275listener("keyup",function(a){n.\u0275\u0275restoreView(t);var s=n.\u0275\u0275nextContext(2).$implicit,u=n.\u0275\u0275nextContext(6);return n.\u0275\u0275resetView(u.gripperKeyUp(a,s,"endGripper"))})("cdkDragStarted",function(){n.\u0275\u0275restoreView(t);var a=n.\u0275\u0275nextContext(8);return n.\u0275\u0275resetView(a.endGripperDragStarted())}),n.\u0275\u0275namespaceSVG(),n.\u0275\u0275elementStart(2,"svg",38),n.\u0275\u0275element(3,"rect"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"svg",35),n.\u0275\u0275element(5,"circle"),n.\u0275\u0275elementEnd()()}if(2&i){var r=n.\u0275\u0275nextContext(7).ngIf;n.\u0275\u0275property("cdkDragData","endGripper"),n.\u0275\u0275advance(3),n.\u0275\u0275attribute("fill",r.errorUnderlineColor),n.\u0275\u0275advance(2),n.\u0275\u0275attribute("stroke",r.errorUnderlineColor)("fill",r.backgroundColor)}}var je=function(e,t,r,o,a,s,u,c,l){return{dropZoneLocatedBeforeToken:e,dropZoneLocatedAfterToken:t,noGripperOnDragging:r,beginGripperOnDragging:o,endGripperOnDragging:a,serveBeginGripper:s,serveEndGripper:u,hasBeginGripper:c,hasEndGripper:l}};function ie(i,e){if(1&i){var t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",29),n.\u0275\u0275listener("cdkDropListEntered",function(c){n.\u0275\u0275restoreView(t);var l=n.\u0275\u0275nextContext(7);return n.\u0275\u0275resetView(l.gripperEnter(c))})("cdkDropListDropped",function(c){n.\u0275\u0275restoreView(t);var l=n.\u0275\u0275nextContext(7);return n.\u0275\u0275resetView(l.dropGripper(c))}),n.\u0275\u0275template(1,qt,6,4,"div",30),n.\u0275\u0275template(2,ge,6,4,"div",31),n.\u0275\u0275elementEnd()}if(2&i){var r=n.\u0275\u0275nextContext().$implicit,o=n.\u0275\u0275nextContext(2).$implicit,a=n.\u0275\u0275nextContext(2).ngIf,s=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunctionV(5,je,[r===(null==o.dropZonesInfo?null:o.dropZonesInfo.zoneLocatedBeforeInfo),r===(null==o.dropZonesInfo?null:o.dropZonesInfo.zoneLocatedAfterInfo),"none"===a.gripperOnDragging,"beginGripper"===a.gripperOnDragging,"endGripper"===a.gripperOnDragging,!!r.beginGripperOf,!!r.endGripperOf,!!r.hasBeginGripper,!!r.hasEndGripper]))("cdkDropListData",r)("cdkDropListEnterPredicate",s.dropZonePredicate),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.hasBeginGripper),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.hasEndGripper)}}function pe(i,e){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,ie,3,15,"div",28),n.\u0275\u0275elementContainerEnd()),2&i){var t=e.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t)}}var ut=function(e,t){return[e,t]};function yn(i,e){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,pe,2,1,"ng-container",27),n.\u0275\u0275elementContainerEnd()),2&i){var t=n.\u0275\u0275nextContext().$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",n.\u0275\u0275pureFunction2(1,ut,null==t.dropZonesInfo?null:t.dropZonesInfo.zoneLocatedBeforeInfo,null==t.dropZonesInfo?null:t.dropZonesInfo.zoneLocatedAfterInfo))}}var Yt=function(e,t,r,o){return{space:e,filler:t,isBetweenDroppedGrippers:r,isBetweenOnDraggingGrippers:o}};function Jn(i,e){if(1&i&&(n.\u0275\u0275elementStart(0,"span",26),n.\u0275\u0275text(1),n.\u0275\u0275template(2,yn,2,4,"ng-container",0),n.\u0275\u0275elementEnd()),2&i){var t=e.$implicit,r=n.\u0275\u0275nextContext(4);n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction4(4,Yt,t.isWhiteSpace,t.isFillerText,t.isBetweenDroppedGrippers,t.isBetweenOnDraggingGrippers)),n.\u0275\u0275attribute("aria-hidden",t.isWhiteSpace),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(t.text),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",null==r.fullConfig?null:r.fullConfig.supportTokenGrippers)}}var En=function(e,t){return{height:e,bottom:t,left:0}};function _n(i,e){if(1&i&&(n.\u0275\u0275namespaceSVG(),n.\u0275\u0275elementStart(0,"svg",39),n.\u0275\u0275element(1,"line",40),n.\u0275\u0275elementEnd()),2&i){var t=n.\u0275\u0275nextContext(3).ngIf;n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction2(7,En,2*t.singleUnderlineThickness+"px",-.5*t.singleUnderlineSpace+-1.5*t.singleUnderlineThickness+"px")),n.\u0275\u0275advance(1),n.\u0275\u0275attribute("x1",t.singleUnderlineThickness)("y1",t.singleUnderlineThickness)("y2",t.singleUnderlineThickness)("stroke-width",t.singleUnderlineThickness)("stroke-dasharray","1 "+(t.singleUnderlineThickness+2))("stroke",t.warningUnderlineColor)}}var Kn=function(e,t,r,o,a,s){return{unused:e,space:t,corrected:r,showAcceptedUnderline:o,showErrorUnderline:a,showWarningUnderline:s}},en=function(e){return{"background-color":e}},Pr=function(e,t){return{hasMultipleTokens:e,unused:t}},Sr=function(e,t,r,o){return{color:e,"border-bottom-color":t,"border-bottom-style":r,"border-bottom-width":o}};function Ar(i,e){if(1&i){var t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"span",21,22),n.\u0275\u0275listener("mouseover",function(){var u=n.\u0275\u0275restoreView(t).$implicit,c=n.\u0275\u0275nextContext(3);return n.\u0275\u0275resetView(c.onSpanMouseEnter(u))})("mouseleave",function(){var u=n.\u0275\u0275restoreView(t).$implicit,c=n.\u0275\u0275nextContext(3);return n.\u0275\u0275resetView(c.onSpanMouseLeave(u))}),n.\u0275\u0275elementStart(2,"span",23),n.\u0275\u0275template(3,Jn,3,9,"span",24),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(4,_n,2,10,"svg",25),n.\u0275\u0275elementEnd()}if(2&i){var r=e.$implicit,o=n.\u0275\u0275nextContext(2).ngIf;n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction6(7,Kn,r.isUnused,r.isWhiteSpace,r.isCorrected,r.shouldShowAcceptedUnderline,r.shouldShowErrorUnderline,r.shouldShowWarningUnderline))("ngStyle",n.\u0275\u0275pureFunction1(14,en,o.useShellTheme?"":r.backgroundColor)),n.\u0275\u0275attribute("aria-hidden",r.isWhiteSpace),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction2(16,Pr,(null==r.tokens?null:r.tokens.length)>1,r.isUnused))("ngStyle",n.\u0275\u0275pureFunction4(19,Sr,o.useShellTheme?"":r.isUnused?o.droppedFontColor:o.questionFontProperties.color,o.useShellTheme?"":r.shouldShowAcceptedUnderline?o.acceptedUnderlineColor:r.shouldShowErrorUnderline?o.errorUnderlineColor:o.warningUnderlineColor,r.shouldShowAcceptedUnderline?"solid":r.shouldShowErrorUnderline?"double":"unset",(r.shouldShowAcceptedUnderline?o.singleUnderlineThickness:r.shouldShowErrorUnderline?2*o.singleUnderlineThickness:0)+"px")),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",null==r?null:r.tokens),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.shouldShowWarningUnderline)}}var Ei=function(e,t){return{disabled:e,usingShellTheme:t}},Fr=function(){return{tooltipLocalizeDescription:"Clear",tooltipShowOnFocus:!0}},_i=function(e,t){return{"font-size":e,color:t}};function br(i,e){if(1&i){var t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",43)(1,"button",44,45),n.\u0275\u0275listener("accessible-click",function(s){n.\u0275\u0275restoreView(t);var u=n.\u0275\u0275nextContext(6);return n.\u0275\u0275resetView(u.clearButtonClicked(s))}),n.\u0275\u0275elementStart(3,"div",46)(4,"span",20),n.\u0275\u0275text(5,"\xa0"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(6,"div",47),n.\u0275\u0275element(7,"i",48),n.\u0275\u0275elementEnd()()()()}if(2&i){var r=n.\u0275\u0275nextContext(4).ngIf,o=n.\u0275\u0275nextContext().ngIf;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction2(6,Ei,r.isUtteranceEmpty,o.useShellTheme))("pbi-tooltip",n.\u0275\u0275pureFunction0(9,Fr))("ngStyle",n.\u0275\u0275pureFunction1(10,en,o.useShellTheme?"":o.backgroundColor)),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction1(12,tt,o.questionFontProperties.size.px+"px")),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction1(14,tt,o.questionFontProperties.size.px+"px")),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction2(16,_i,r.iconFontSize+"px",o.useShellTheme?"":o.questionFontProperties.color))}}var Ir=function(e){return{"aria-label":e}},xr=function(e){return{tooltipLocalizeDescription:e,tooltipShowOnFocus:!0}};function wr(i,e){if(1&i){var t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",43)(1,"button",49,50),n.\u0275\u0275listener("accessible-click",function(u){n.\u0275\u0275restoreView(t);var c=n.\u0275\u0275nextContext(7);return n.\u0275\u0275resetView(c.commitButtonClicked(u))}),n.\u0275\u0275elementStart(3,"div",46)(4,"span",20),n.\u0275\u0275text(5,"\xa0"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(6,"div",47),n.\u0275\u0275element(7,"i",51),n.\u0275\u0275elementEnd()()()()}if(2&i){var r=n.\u0275\u0275nextContext().ngIf,o=n.\u0275\u0275nextContext(4).ngIf,a=n.\u0275\u0275nextContext().ngIf;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction2(7,Ei,!r.isTrue,a.useShellTheme))("localizeAttr",n.\u0275\u0275pureFunction1(10,Ir,r.isTrue?"Submit":"Qna_Input_SubmitQuestion_Disabled_Description"))("pbi-tooltip",n.\u0275\u0275pureFunction1(12,xr,r.isTrue?"Submit":"Qna_Input_SubmitQuestion_Disabled_Description"))("ngStyle",n.\u0275\u0275pureFunction1(14,en,a.useShellTheme?"":a.commitButtonBackgroundColor)),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction1(16,tt,a.questionFontProperties.size.px+"px")),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction1(18,tt,a.questionFontProperties.size.px+"px")),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction2(20,_i,o.iconFontSize+"px",a.useShellTheme?"":a.commitButtonForegroundColor))}}function Mr(i,e){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,wr,8,23,"div",42),n.\u0275\u0275elementContainerEnd()),2&i){var t=n.\u0275\u0275nextContext(2).ngIf;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.commitVisible)}}var Br=function(e){return{isTrue:e}};function Or(i,e){if(1&i){var t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",41),n.\u0275\u0275listener("click",function(u){n.\u0275\u0275restoreView(t);var c=n.\u0275\u0275nextContext(5);return n.\u0275\u0275resetView(c.actionButtonsContainerClicked(u))}),n.\u0275\u0275template(2,br,8,19,"div",42),n.\u0275\u0275template(3,Mr,2,1,"ng-container",0),n.\u0275\u0275pipe(4,"async"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()}if(2&i){var r=n.\u0275\u0275nextContext().ngIf,o=n.\u0275\u0275nextContext(2).ngIf,a=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction1(5,xt,(o.iconFontSize+16)*(!a.inCommitOnDemandMode||null!=a.fullConfig.commitOnDemandConfigs&&a.fullConfig.commitOnDemandConfigs.hideCommitActionUI?1:2)+"px")),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.deleteVisible),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",n.\u0275\u0275pureFunction1(7,Br,n.\u0275\u0275pipeBind1(4,3,a.hasUncommittedQuestion$)))}}function Tr(i,e){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,Or,5,9,"ng-container",0),n.\u0275\u0275elementContainerEnd()),2&i){var t=e.ngIf,r=n.\u0275\u0275nextContext(2).ngIf;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!r.isUtteranceEmpty||t.commitVisible||t.deleteVisible)}}var Vr=function(e,t){return{commitVisible:e,deleteVisible:t}};function Ur(i,e){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,Tr,2,1,"ng-container",0),n.\u0275\u0275pipe(2,"async"),n.\u0275\u0275pipe(3,"async"),n.\u0275\u0275elementContainerEnd()),2&i){var t=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",n.\u0275\u0275pureFunction2(5,Vr,n.\u0275\u0275pipeBind1(2,1,t.commitActionVisible$),n.\u0275\u0275pipeBind1(3,3,t.clearActionVisible$)))}}function Lr(i,e){if(1&i){var t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"qna-autocomplete",52,53),n.\u0275\u0275listener("utteranceSelected",function(s){n.\u0275\u0275restoreView(t);var u=n.\u0275\u0275nextContext(3);return n.\u0275\u0275resetView(u.autoCompleteDropdownItemSelected(s))})("fullyExpanded",function(){n.\u0275\u0275restoreView(t);var s=n.\u0275\u0275nextContext(3);return n.\u0275\u0275resetView(s.autoCompleteFullyExpanded())}),n.\u0275\u0275elementEnd()}if(2&i){var r=n.\u0275\u0275nextContext(2).ngIf,o=n.\u0275\u0275nextContext();n.\u0275\u0275classProp("withTopSeparator",r.height),n.\u0275\u0275property("params",o.autoCompleteInputArgs.params)("presentation",o.autoCompleteInputArgs.presentation)("selectPrevious",o.autoCompleteInputArgs.selectPrevious)("selectNext",o.autoCompleteInputArgs.selectNext)("confirmSelection",o.autoCompleteInputArgs.confirmSelection)}}var kr=function(e,t,r,o){return{withBorder:e,withShadow:t,authoringDisabled:r,showDisabled:o}},Rr=function(e,t,r,o,a,s,u,c,l){return{"background-color":e,color:t,"font-size":r,"font-family":o,"border-color":a,"font-weight":s,"font-style":u,"text-decoration":c,height:l}},Qr=function(e){return{height:e}},Nr=function(e,t){return{withFixedHeight:e,allowContentHorizontalScroll:t}},qr=function(e){return{"max-height":e}},zr=function(e){return{withMaxHeight:e}},jr=function(e){return{isGripperOnDragging:e}};function Hr(i,e){if(1&i&&(n.\u0275\u0275elementStart(0,"div",3),n.\u0275\u0275template(1,wt,9,20,"ng-container",0),n.\u0275\u0275elementStart(2,"div",4,5)(4,"div",6)(5,"div",7)(6,"div",8,9)(8,"div",10,11),n.\u0275\u0275pipe(10,"async"),n.\u0275\u0275template(11,Ar,5,24,"span",12),n.\u0275\u0275pipe(12,"async"),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(13,Ur,4,8,"ng-container",0),n.\u0275\u0275elementEnd()(),n.\u0275\u0275template(14,Lr,2,7,"qna-autocomplete",13),n.\u0275\u0275pipe(15,"async"),n.\u0275\u0275elementEnd()()()),2&i){var t=e.ngIf,r=n.\u0275\u0275nextContext().ngIf,o=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",null==o.fullConfig?null:o.fullConfig.showQuestionIcon),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction4(20,kr,r.withBorder,r.withShadow,null==o.fullConfig?null:o.fullConfig.disableAuthoring,null==o.fullConfig?null:o.fullConfig.displayDisabledStateVisually))("ngStyle",n.\u0275\u0275pureFunctionV(25,Rr,[r.useShellTheme?"":r.backgroundColor,r.useShellTheme?"":r.questionFontProperties.color,r.questionFontProperties.size.px+"px",r.questionFontProperties.family,r.useShellTheme?"":r.borderColor,r.questionFontProperties.weight,r.questionFontProperties.style,r.questionFontProperties.textDecoration,r.height?r.height+"px":"auto"])),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction1(35,Qr,r.height?r.height+"px":"auto"))("ngClass",n.\u0275\u0275pureFunction2(37,Nr,r.height,r.allowContentHorizontalScroll)),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction1(40,qr,r.height?r.height+"px":"unset"))("ngClass",n.\u0275\u0275pureFunction1(42,zr,r.height)),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(44,jr,"none"!==t.gripperOnDragging)),n.\u0275\u0275attribute("contenteditable",o.isEditable())("placeholder",n.\u0275\u0275pipeBind1(10,14,o.placeholder$))("aria-label",o.ariaLabel),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngForOf",n.\u0275\u0275pipeBind1(12,16,o.uiSpans$)),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",null==o.fullConfig?null:o.fullConfig.showActionButtons),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(15,18,o.shouldShowAutoComplete$))}}var Gr=function(e){return{corrected:e}};function $r(i,e){if(1&i&&(n.\u0275\u0275elementStart(0,"span",58),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&i){var t=e.$implicit;n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(2,Gr,t.isCorrected)),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(t.text)}}var Wr=function(e,t,r){return{color:e,"font-size":t,"font-family":r}};function Jr(i,e){if(1&i){var t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",54)(1,"span",55),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"div",56),n.\u0275\u0275listener("accessible-click",function(){var u=n.\u0275\u0275restoreView(t).ngIf,c=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(c.replaceWithCorrectedUtterance(u.replacementUtterance,u.state))}),n.\u0275\u0275template(4,$r,2,4,"span",57),n.\u0275\u0275elementEnd()()}if(2&i){var r=e.ngIf,o=n.\u0275\u0275nextContext().ngIf;n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction3(4,Wr,o.restatementFontProperties.color,o.restatementFontProperties.size.px+"px",o.restatementFontProperties.family)),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(r.label),n.\u0275\u0275advance(1),n.\u0275\u0275attribute("aria-label",r.replacementUtterance),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",r.spans)}}var Kr=function(e,t,r){return{gripperOnDragging:e,isUtteranceEmpty:t,iconFontSize:r}};function Zr(i,e){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,Hr,16,46,"div",1),n.\u0275\u0275pipe(2,"async"),n.\u0275\u0275pipe(3,"async"),n.\u0275\u0275pipe(4,"async"),n.\u0275\u0275template(5,Jr,5,8,"div",2),n.\u0275\u0275pipe(6,"async"),n.\u0275\u0275elementContainerEnd()),2&i){var t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",n.\u0275\u0275pureFunction3(10,Kr,n.\u0275\u0275pipeBind1(2,2,null==t.grippersInfo?null:t.grippersInfo.gripperOnDragging$),n.\u0275\u0275pipeBind1(3,4,t.isDisplayedUtteranceEmpty$),n.\u0275\u0275pipeBind1(4,6,t.iconFontSize$))),n.\u0275\u0275advance(4),n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(6,8,t.currentUtteranceAutoCorrectionInfo$))}}var Pi={withBorder:!1,withShadow:!1,backgroundColor:"#FFFFFF",borderColor:"#A19F9D",questionFontProperties:{color:"#323130",size:Ye.B.createFromPt(10),family:"'Segoe UI', wf_segoe- ui_normal, helvetica, arial, sans- serif"},acceptedUnderlineColor:"#0078D4",errorUnderlineColor:"#FF0000",warningUnderlineColor:"#0078D4",singleUnderlineThickness:2,singleUnderlineSpace:1,droppedFontColor:"#A19F9D",hoverColor:"#EEEEEE",restatementFontProperties:{color:"#323130",size:Ye.B.createFromPt(9),family:"'Segoe UI', wf_segoe- ui_normal, helvetica, arial, sans- serif"},commitButtonBackgroundColor:"#F3F2F1",commitButtonForegroundColor:"#323130",allowContentHorizontalScroll:!1},Yr={sendPausedTagTimeout:3e3,showErrorWarningUnderlineTimeout:1500,showActionButtons:!0,showPlaceholderText:!0,showQuestionIcon:!0,showWarningIcon:!0,showLoadingIcon:!0,showCorrectedUtterance:!0,customPlaceholderText:"",autoFocusOnInit:!1,disableAuthoring:!1,disableAuthoringMessage:"",displayDisabledStateVisually:!0,disableSendingServiceTags:!1,supportTokenGrippers:!1,supportsPodQueries:!1,supportsInsightsQueries:!1,inferUnknownModelTerms:!1,singleAnswerBias:!1,hostSupportsUndo:!1,spanDropdownHeaderConfig:{show:!0,unknownSpanHeaderConfig:{actionType:"none"}},calculation:void 0,considerDroppedSpans:!0,considerErrorSpans:!0,considerWarningSpans:!0,commitOnDemandForcedMode:void 0,commitOnDemandConfigs:{hideCommitActionUI:!1,noCommitOnDropdownSelection:!1,noCommitOnInitialUtterance:!1}},Zn="\xa0",Sn=function(){function i(e,t,r,o,a,s,u,c,l,p,g,m,E){this.changeDetectorRef=e,this.conceptualSchemaProxy=t,this.dataSourcesService=r,this.explorationNavigationService=o,this.featureSwitchService=a,this.highContrastCssGenerationService=s,this.lazyProvider=u,this.localizationService=c,this.screenReaderService=l,this.undoRedoService=p,this.linguisticSchemaProxy=g,this.qnaProxyPathToken=m,this.qnaModelUtilsPathToken=E,this.grippersDefinedTextRangeChanged=new n.EventEmitter,this.enterKeyPressed=new n.EventEmitter,this.initialized=new n.EventEmitter,this.toolingLaunched=new n.EventEmitter,this.inputBoxFocused=new n.EventEmitter,this.displayedUtteranceInternal$=new G.X(void 0),this.distinctDisplayedUtterance$=new G.X(void 0),this.hasUncommittedQuestion$=new G.X(!1),this.loadingStateTooltipConfig$=new G.X(void 0),this.warningStateTooltipConfig$=new G.X(void 0),this.hasFocus$=new G.X(void 0),this.cursorLocation$=new G.X(-1),this.uiSpanWithMouseHover$=new G.X(void 0),this.tokensGripperLocInfoUpdated$=new G.X(void 0),this.delayedSpanUnderlineStyleUpdated$=new G.X(void 0),this.contentElementAngularCommentNodes=[],this.destroy$=new nt.xQ,this.firstTimeLoad=!0,this.componentUniqueId=he.b$.generateGuid(),this.interpretRequestSequenceNumber=-1,this.initializeHighContrastRules(),f.fF.assert(function(){return!(0,N.rO)()},"Expect input box never get created if it is in IE browser.")}return Object.defineProperty(i.prototype,"autoCompleteElementRef",{set:function(t){t&&(this.autoCompleteElement=t.nativeElement)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"contentElementRef",{set:function(t){var r=this;if(t&&(this.contentElement=t.nativeElement,this.firstTimeLoad)){this.firstTimeLoad=!1;var o=!1;this.contentElement&&this.isEditable()&&this.fullConfig.autoFocusOnInit&&(o=!0),this.contentElementAngularCommentNodes=_.takeWhile(this.contentElement.childNodes,function(a){return a.nodeType===Node.COMMENT_NODE}),_.isEmpty(this.contentElementAngularCommentNodes)&&(this.contentElementAngularCommentNodes=_.takeRightWhile(this.contentElement.childNodes,function(a){return a.nodeType===Node.COMMENT_NODE})),this.addEventListeners(),f.fF.assert(function(){return!r.initialUtteranceFromSaved||!_.isEmpty(r.initialUtterance)},"initialUtteranceFromSaved is true, then there must be an initialUtterance"),_.isEmpty(this.initialUtterance)?o&&setTimeout(function(){r.contentElement.focus()}):setTimeout(function(){var a,s;f.fF.assertValue(r.fullConfig,"this.fullConfig should already been set"),r.interpretUtteranceRequest$.next({utterance:r.initialUtterance,uniqueId:he.b$.generateGuid(),utteranceUITextAlreadyEnsured:!1,suppressSuggestions:!0,requireCursorAtEndIfFocused:!0,enforceFocus:o,delayError:!1,linguisticSchemaJson:r.linguisticInfo&&r.linguisticInfo.linguisticSchemaJson,inferredTermBinding:r.linguisticInfo&&r.linguisticInfo.inferredTermBinding,incomingTags:r.initialUtteranceFromSaved?["SavedQuestion"]:void 0,specifiedSpans:void 0,isCommitInCommitQuestionOnDemandMode:!(null!==(s=null===(a=r.fullConfig)||void 0===a?void 0:a.commitOnDemandConfigs)&&void 0!==s&&s.noCommitOnInitialUtterance)})})}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"spanElementRefs",{set:function(t){var r=this;_.forEach(t.toArray(),function(o){(0,De.R)(o.nativeElement,"click").pipe((0,W.R)(r.destroy$)).subscribe(function(a){var s=r.getUtteranceSelection();r.cursorLocation$.next(Mt(1,s)),r.flushUnderlineDelayApply(),we(a);var u=Mt(0,s);-1!==u&&r.showDropdownAtPosition(1,u)})})},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"qnaInputContainerElementRef",{set:function(t){var r=this;t&&(this.qnaInputContainerElement=t.nativeElement,(0,De.R)(t.nativeElement,"focusout").pipe((0,W.R)(this.destroy$)).subscribe(function(o){var a=o.relatedTarget,s=o.target,u=!!s&&gt(r.autoCompleteElement,s),c=!1;(!a&&!u||a&&!gt(r.qnaInputContainerElement,a))&&(c=!0),c&&r.showHideDropdown(!1,{utterance:r.getCurrentUtteranceSpaceNormalized()})}))},enumerable:!1,configurable:!0}),i.prototype.ngOnInit=function(){var e;return(0,v.mG)(this,void 0,void 0,function(){var t,o,a,s,u=this;return(0,v.Jh)(this,function(c){switch(c.label){case 0:return this.qnaProxyPath=this.qnaProxyPathToken||"@powerbi/Qna/qnaweb.module#QnaWebModule",t=this,[4,this.lazyProvider.get(this.qnaProxyPath,"InterpretServiceModern")];case 1:return t.interpretService=c.sent(),o=this,[4,this.lazyProvider.get(this.qnaModelUtilsPathToken||"@powerbi/Qna/qnaweb.module#QnaWebModule","qnaModelUtilsService")];case 2:return o.qnaModelUtils=c.sent(),this.fullConfig=_.merge({},Yr,this.configs),[4,this.updateCommitOnDemandMode()];case 3:return c.sent(),this.placeholder$=this.fullConfig.showPlaceholderText?_.isEmpty(this.fullConfig.customPlaceholderText)?this.interpretService.getPlaceholderText(this.qnaSupportedScopes).pipe((0,k.q)(1),(0,ne.U)(function(l){return l.result})):(0,de.of)(this.fullConfig.customPlaceholderText):(0,de.of)(""),this.fullConfig.showLoadingIcon&&this.interpretListener.getObservable().subscribe(function(l){if(l&&1===l.resultType&&null!=l.retryWarning){var p=xi([l.retryWarning],u.qnaProxyPath,u.localizationService);if(f.fF.assert(function(){return!_.isEmpty(p)},"Unmapped retry warning"),!_.isEmpty(p)){var g={tooltipShowOnFocus:!0,tooltipDescription:p,tooltipDelay:0,tooltipHideDelay:0,tooltipArrowPosition:u.getWarningLoadingIconTooltipArrowPosition()};u.loadingStateTooltipConfig$.next(g)}}}),this.ariaLabel=this.screenReaderService.concatMessages([this.fullConfig.customAriaLabel?this.fullConfig.customAriaLabel:this.localizationService.get("Qna_ScreenReader_TextboxLabel"),this.localizationService.get("Qna_ScreenReader_InitialInstruction")]),this.resetTags(),this.presentationSubject$=new G.X(this.presentationArgs),this.interpretUtteranceRequest$=new G.X(void 0),this.fullPresentation$=this.presentationSubject$.pipe((0,ne.U)(function(l){var p=_.merge({},Pi,l);return p.singleUnderlineThickness=2+Math.floor(p.questionFontProperties.size.px/20),p}),(0,V.b)(function(l){u.autoCompleteInputArgs.presentation.next(l),u.errorBackgroundColorString=(0,dt.Et)(l.errorUnderlineColor,.15),u.warningBackgroundColorString=(0,dt.Et)(l.warningUnderlineColor,.15),u.acceptedBackgroundColorString=(0,dt.Et)(l.acceptedUnderlineColor,.15)}),(0,j.d)()),this.fullConfig.showWarningIcon&&this.fullConfig.disableAuthoring&&!_.isEmpty(this.fullConfig.disableAuthoringMessage)&&this.warningStateTooltipConfig$.next({tooltipShowOnFocus:!0,tooltipDescription:this.fullConfig.disableAuthoringMessage,tooltipDelay:0,tooltipHideDelay:0,tooltipArrowPosition:this.getWarningLoadingIconTooltipArrowPosition()}),this.displayedUtteranceInternal$.pipe((0,W.R)(this.destroy$),(0,q.x)()).subscribe(function(l){u.distinctDisplayedUtterance$.next(l)}),this.isDisplayedUtteranceEmpty$=this.distinctDisplayedUtterance$.pipe((0,W.R)(this.destroy$),(0,ne.U)(function(l){return _.isEmpty(l)}),(0,q.x)(),(0,j.d)(1)),this.fullConfig.showActionButtons?this.inCommitOnDemandMode?(this.interpretUtteranceRequest$.pipe((0,W.R)(this.destroy$),(0,ne.U)(function(l){return null!=l&&!l.isCommitInCommitQuestionOnDemandMode}),(0,q.x)()).subscribe(function(l){u.hasUncommittedQuestion$.next(l)}),a=(0,Ae.aj)([this.hasFocus$,this.isDisplayedUtteranceEmpty$,this.hasUncommittedQuestion$]).pipe((0,W.R)(this.destroy$),(0,ne.U)(function(l){return!!l[2]||l[0]&&!l[1]}),(0,q.x)(),(0,J.B)()),this.commitActionVisible$=null!==(e=this.fullConfig.commitOnDemandConfigs)&&void 0!==e&&e.hideCommitActionUI?(0,de.of)(!1):a.pipe((0,W.R)(this.destroy$)),this.clearActionVisible$=a.pipe((0,W.R)(this.destroy$))):(this.commitActionVisible$=(0,de.of)(!1),this.clearActionVisible$=(0,Ae.aj)([this.hasFocus$,this.isDisplayedUtteranceEmpty$]).pipe((0,W.R)(this.destroy$),(0,ne.U)(function(l){return l[0]&&!l[1]}),(0,q.x)())):(this.commitActionVisible$=(0,de.of)(!1),this.clearActionVisible$=(0,de.of)(!1),this.noResetAllActionIndication=!0),this.isDisplayedUtteranceEmpty$.pipe((0,W.R)(this.destroy$)).subscribe(function(l){l&&(!_.isEmpty(u.utteranceSuggestions)&&u.isInputBoxFocused()?u.showUtteranceSuggestions():u.contentElement&&(u.updateAutoCompleteArgsCommand$.next(void 0),u.showHideDropdown(!1),u.resetPausedTagTimeoutHandler(!1)))}),this.interpretResponse$=this.interpretUtteranceRequest$.pipe((0,ce.R)(function(l,p){return l.push(p),l.slice(-2)},[]),(0,K.h)(function(l){var p,g,m=_.last(l);if(!m)return!1;var E=null!==(p=ke(m.utterance))&&void 0!==p?p:"",P=null!==(g=u.initialUtterance)&&void 0!==g?g:"";return f.fF.assert(function(){return null!=u.contentElement||P===E},"If an interpret request sent in before this.contentElement is even initialized, we expect its utterance to be the same as 'initialUtterance' but now it's not. Re-check this assumption and fix accordingly."),!(null==u.contentElement&&P===E)}),(0,V.b)(function(l){_.nth(l,0)&&_.nth(l,1)&&!Fi(l[0].utterance,l[1].utterance)&&u.showGrippersAroundTextRangeRequest$.next(void 0)}),(0,ne.U)(function(l){var p=_.last(l);if(!p.utteranceUITextAlreadyEnsured){var g=ke(p.utterance),m=u.getUtteranceSelection(),E=u.ensureContentElementUtteranceText(g);u.displayedUtteranceInternal$.next(g);var P=!1;if(E?(m||p.enforceFocus)&&(m&&u.isValidRange(m)?u.setUtteranceSelection(m):P=!0):!m&&p.enforceFocus&&(P=!0),P){var F=p.utterance.length;u.setUtteranceSelection({normalizedAnchor:F,normalizedFocus:F})}}return p}),(0,K.h)(function(l){return!!l}),(0,V.b)(function(l){u.displayedUtteranceInternal$.next(ke(l.utterance))}),(0,Ee.w)(function(l){return u.interpretInternal(l)})),this.currentUtteranceInterpretResponse$=(0,Ae.aj)([this.interpretUtteranceRequest$,this.interpretResponse$]).pipe((0,ne.U)(function(l){var p=l[0],g=l[1];if(g&&p&&g.interpretRequestId===p.uniqueId&&ke(p.utterance)===u.getCurrentUtteranceSpaceNormalized())return(0,v.pi)((0,v.pi)({},g),{suppressSuggestions:p.suppressSuggestions,requireCursorAtEndIfFocused:p.requireCursorAtEndIfFocused,enforceFocus:p.enforceFocus,delayError:p.delayError,isFromInputEvent:p.isFromInputEvent})}),(0,K.h)(function(l){return!!l}),(0,W.R)(this.destroy$),(0,J.B)()),this.currentUtteranceInterpretResponseProcessed$=this.currentUtteranceInterpretResponse$.pipe((0,V.b)(function(l){if(u.loadingStateTooltipConfig$.next(void 0),u.fullConfig.showWarningIcon){var p=l?.warnings,g=xi(p,u.qnaProxyPath,u.localizationService);if(!_.isEmpty(g)){var E={tooltipShowOnFocus:!0,tooltipDescription:_.isEmpty(u.fullConfig.disableAuthoringMessage)?g:u.localizationService.format("Qna_Input_Warning_AuthoringDisabled_Plus_AnotherWarning",[u.fullConfig.disableAuthoringMessage,g]),tooltipDelay:0,tooltipHideDelay:0,tooltipArrowPosition:u.getWarningLoadingIconTooltipArrowPosition()};u.warningStateTooltipConfig$.next(E)}}}),(0,K.h)(function(l){return l&&!(_.isEmpty(l.utterance)&&!l.results)}),(0,ne.U)(function(l){var p;return{utterance:l.utterance,fullCoverageSpans:kn(l),modelOwner:null===(p=_.first(l.results))||void 0===p?void 0:p.modelOwner,suppressSuggestions:l.suppressSuggestions,requireCursorAtEndIfFocused:l.requireCursorAtEndIfFocused,enforceFocus:l.enforceFocus,delayError:l.delayError,isFromInputEvent:l.isFromInputEvent}}),(0,V.b)(function(l){var p=u.getUtteranceSelectionAnchor();l.suppressSuggestions?u.showHideDropdown(!1):u.updateAutoCompleteArgsCommand$.next({matchingUtterance:l.utterance,cursorPosition:Math.max(p,0),triggerSource:0,spans:l.fullCoverageSpans})}),(0,J.B)()),s=_.merge({},Pi,this.presentationArgs),this.setupAutoCompleteRelatedPipes(s),this.uiSpans$=this.currentUtteranceInterpretResponseProcessed$.pipe((0,it.D)(function(l){return(0,Ie.H)(l.isFromInputEvent?200:0)}),(0,K.h)(function(l){return ke(l.utterance)===u.getCurrentUtteranceSpaceNormalized()}),(0,ne.U)(function(l){return{response:l,currentSelection:u.contentElement?u.getUtteranceSelection():void 0}}),(0,V.b)(function(l){var p=ke(l.response&&l.response.utterance),g=l.currentSelection;u.cleanContentElement(),u.cursorLocation$.next(-1),u.ensureAngularCommentNodes(),u.contentElement.contentEditable="false";var m=l.response;setTimeout(function(){u.changeDetectorRef.detectChanges();var E=u.getCurrentUtteranceSpaceNormalized();if(g){var P=!1;m.requireCursorAtEndIfFocused||p===E&&(P=!0),u.setUtteranceSelection(P?g:{normalizedAnchor:F=E.length,normalizedFocus:F})}else if(u.isInputBoxFocused()||m.enforceFocus){var F;u.setUtteranceSelection({normalizedAnchor:F=E.length,normalizedFocus:F})}u.isInputBoxFocused()&&u.cursorLocation$.next(u.getUtteranceCursorPosition()),u.contentElement.contentEditable="true"},1)}),(0,ne.U)(function(l){var p=l.response;return{uiSpans:to(p.fullCoverageSpans,u.fullConfig),delayError:p.delayError,cursorPosition:l.currentSelection?l.currentSelection.normalizedFocus:-1}}),(0,V.b)(function(l){if(u.cancelUnderlineDelayApply(),l.delayError){var g,m,p=l.cursorPosition;-1!==p&&(g=_.find(l.uiSpans,function(E){return!E.isWhiteSpace&&p>=E.startIndex&&p<=E.endExcludingIndex})),g||(g=_.last(l.uiSpans)),g&&(g.shouldShowErrorUnderline||g.shouldShowWarningUnderline)&&(g.shouldShowErrorUnderline?(g.shouldShowErrorUnderline=!1,m=function(){g.shouldShowErrorUnderline=!0}):(g.shouldShowWarningUnderline=!1,m=function(){g.shouldShowWarningUnderline=!0}),u.underlineDelayApplyInfo={timeoutHandler:setTimeout(function(){m(),u.delayedSpanUnderlineStyleUpdated$.next(!0)},u.fullConfig.showErrorWarningUnderlineTimeout),apply:m})}}),(0,ne.U)(function(l){return l.uiSpans}),(0,J.B)()),this.uiSpanWithCursor$=(0,Ae.aj)([this.uiSpans$,this.cursorLocation$]).pipe((0,W.R)(this.destroy$),(0,ne.U)(function(l){var g=l[1];if(!(g<0))for(var m=0,E=l[0]||[];m<E.length;m++){var P=E[m];if(!P.isWhiteSpace&&P.text.length>0&&g>=P.startIndex&&g<=P.endExcludingIndex)return P}}),(0,J.B)()),this.uiSpanWithCursor$.pipe((0,W.R)(this.destroy$),(0,K.h)(function(l){return!!l})).subscribe(function(l){l.shouldShowErrorUnderline&&u.showGrippersAroundTextRangeRequest$.next({startIndex:l.startIndex,endExcludingIndex:l.endExcludingIndex})}),this.setupCorrectionRelatedPipes(),this.setupGrippersRelatedPipes(),(0,Ae.aj)([this.uiSpans$,this.uiSpanWithCursor$,this.uiSpanWithMouseHover$,this.grippersInfo.grippersLocationDuringDragging$,this.tokensGripperLocInfoUpdated$,this.delayedSpanUnderlineStyleUpdated$]).pipe((0,W.R)(this.destroy$)).subscribe(function(l){var p=l[0],g=l[1],m=l[2],E=l[3],P=E?.associatedUISpans===p&&!!E?.begin&&!!E?.end;_.forEach(p,function(F){var se=u.getUISpanBackgroundState(F,F===g,F===m,P);F.backgroundColor="error"===se?u.errorBackgroundColorString:"warning"===se?u.warningBackgroundColorString:"accepted"===se?u.acceptedBackgroundColorString:"transparent"})}),this.iconFontSize$=this.fullPresentation$.pipe((0,ne.U)(function(l){return u.getIconFontSizePx(l)})),this.questionIconProperties={state$:new G.X("normal"),ariaLabel$:new G.X(this.localizationService.get("Qna_ScreenReader_TextboxIcon")),tooltipConfig$:new G.X(void 0),loadingWarningPresentation$:new G.X(void 0)},(0,Ae.aj)([this.loadingStateTooltipConfig$,this.warningStateTooltipConfig$]).pipe((0,W.R)(this.destroy$)).subscribe(function(l){var p=l[0],g=l[1],m=p??g;u.questionIconProperties.state$.next(p?"loading":g?"warning":"normal");var E=[u.localizationService.get("Qna_ResetAllStates_Tooltip")];m?.tooltipDescription&&E.push(m?.tooltipDescription);var P=E.join("\n\n"),F=(0,v.pi)({},m??{tooltipShowOnFocus:!0,tooltipDescription:"",tooltipDelay:0,tooltipHideDelay:0,tooltipArrowPosition:u.getWarningLoadingIconTooltipArrowPosition()});F.tooltipDescription=P,u.questionIconProperties.tooltipConfig$.next(F),u.questionIconProperties.ariaLabel$.next(F.tooltipDescription)}),this.fullPresentation$.pipe((0,W.R)(this.destroy$)).subscribe(function(l){var p=u.getQuestionIconWarningCirleRadius(l);u.questionIconProperties.loadingWarningPresentation$.next({width:2*p,height:2*p,right:1-p+1,top:1-p+1,r:p,cx:p,cy:p,strokeColor:l.backgroundColor,strokeWidth:1,fillColor:l.commitButtonBackgroundColor})}),this.hasInitialized=!0,this.initialized&&this.initialized.emit(),[2]}})})},i.prototype.ngOnChanges=function(e){if(this.hasInitialized){var t=e.presentationArgs&&e.presentationArgs.currentValue;if(t){var r=e.presentationArgs.previousValue,o=r?_.merge({},r,t):t;this.presentationSubject$.next(o)}var a=e.configs&&e.configs.currentValue;if(a){var s=e.configs.previousValue;o=s?_.merge({},s,a):a,f.fF.assertValue(this.fullConfig,"this.fullConfig should have been initialized inside ngOnInit, since it comes here only if this.hasInitialized."),this.fullConfig=_.merge({},this.fullConfig,o)}}},i.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},Object.defineProperty(i.prototype,"currentDisplayedUtterance",{get:function(){return this.distinctDisplayedUtterance$.value},enumerable:!1,configurable:!0}),i.prototype.isEditable=function(){return!this.fullConfig.disableAuthoring},i.prototype.focus=function(){var e;if(this.contentElement&&(null===(e=this.fullConfig)||void 0===e||!e.disableAuthoring))return this.contentElement.focus(),!0},i.prototype.actionButtonsContainerClicked=function(){this.focus()},i.prototype.clearButtonClicked=function(e){we(e),this.clearUtterance(!0)},i.prototype.commitButtonClicked=function(e){we(e),this.hasUncommittedQuestion$.value&&this.commitUtterance()},i.prototype.showGrippersAroundTextRange=function(e){var t=this;f.fF.assert(function(){return t.fullConfig.supportTokenGrippers},"this should be called only when this.fullConfig.supportTokenGrippers is true"),this.showGrippersAroundTextRangeRequest$.next(e)},i.prototype.interpretUtterance=function(e){var t=e.utterance,r=e.isCommitInCommitQuestionOnDemandMode,o=e.specifiedSpans;if(this.inCommitOnDemandMode)if(e.useUncommittedUtterance&&this.hasUncommittedQuestion$.value){var a=this.getCurrentUtteranceSpaceNormalized();a!==t&&(t=a,r=!0,o=void 0)}else!this.hasUncommittedQuestion$.value&&e.utterance===this.getCurrentUtteranceSpaceNormalized()&&(r=!0);this.interpretUtteranceRequest$.next({utterance:t,uniqueId:he.b$.generateGuid(),isCommitInCommitQuestionOnDemandMode:r,utteranceUITextAlreadyEnsured:!1,delayError:!1,enforceFocus:e.enforceFocus,requireCursorAtEndIfFocused:e.requireCursorAtEndIfFocused,suppressSuggestions:e.suppressSuggestions,incomingTags:e.incomingTags,linguisticSchemaJson:this.linguisticInfo&&this.linguisticInfo.linguisticSchemaJson,inferredTermBinding:this.linguisticInfo&&this.linguisticInfo.inferredTermBinding,specifiedSpans:o})},i.prototype.clearUtterance=function(e,t){var r=this;void 0===t&&(t=!1),this.undoRedoService.register(this.inCommitOnDemandMode&&t?"Reset Qna state":"Clear QnA utterance",function(){var a=!!r.inCommitOnDemandMode&&t;r.interpretUtteranceRequest$.next({uniqueId:he.b$.generateGuid(),utterance:"",utteranceUITextAlreadyEnsured:!1,delayError:!1,enforceFocus:!!e,requireCursorAtEndIfFocused:!1,suppressSuggestions:!0,linguisticSchemaJson:void 0,inferredTermBinding:void 0,incomingTags:void 0,specifiedSpans:void 0,isCommitInCommitQuestionOnDemandMode:a})})},i.prototype.commitUtterance=function(){var e=this;f.fF.assert(function(){return e.inCommitOnDemandMode},"expect this.inCommitOnDemandMode to be true"),this.undoRedoService.register("Commit QnA utterance",function(){e.interpretUtteranceRequest$.next({uniqueId:he.b$.generateGuid(),utterance:e.displayedUtteranceInternal$.value,isCommitInCommitQuestionOnDemandMode:!0,utteranceUITextAlreadyEnsured:!0,delayError:!1,enforceFocus:!0,requireCursorAtEndIfFocused:!1,suppressSuggestions:!0,linguisticSchemaJson:void 0,inferredTermBinding:void 0,incomingTags:["Committed"],specifiedSpans:void 0})})},i.prototype.resetAllState=function(){this.clearUtterance(!0,!0)},i.prototype.replaceWithCorrectedUtterance=function(e,t){if(1===t||2===t){var r=1===t?["DidYouMean"]:["ShowingResultsFor"];return r.push("Committed"),void this.replaceWithUtterance(e,!0,!0,!0,r)}f.fF.assertFail("this should only be called for didYouMean or showingResultsFor")},i.prototype.onSpanMouseEnter=function(e){this.uiSpanWithMouseHover$.next(e)},i.prototype.onSpanMouseLeave=function(e){this.uiSpanWithMouseHover$.value===e&&this.uiSpanWithMouseHover$.next(void 0)},i.prototype.gripperKeyUp=function(e,t,r){var o=this,a="beginGripper"===r;if(a||"endGripper"===r){if("Escape"===e.key)return we(e),He(e),this.setUtteranceSelection({normalizedAnchor:t.position,normalizedFocus:t.position}),void this.updateAutoCompleteArgsCommand$.next({matchingUtterance:this.getCurrentUtteranceSpaceNormalized(),cursorPosition:t.position,triggerSource:2,spans:void 0});if("ArrowDown"===e.key)return we(e),He(e),this.setUtteranceSelection({normalizedAnchor:t.position,normalizedFocus:t.position}),void this.arrowDownOnInputboxHanlder();var u="ArrowLeft"===e.key;(u||"ArrowRight"===e.key)&&(we(e),He(e),this.showHideDropdown(!1),this.tryDropGripperInZone(r,a?u?t.previousBeginGripperZoneInfo:t.nextBeginGripperZoneInfo:u?t.previousEndGripperZoneInfo:t.nextEndGripperZoneInfo)&&setTimeout(function(){var p,g,m=a?null===(p=o.beginGripperElementRef)||void 0===p?void 0:p.nativeElement:null===(g=o.endGripperElementRef)||void 0===g?void 0:g.nativeElement;m&&m.focus()}))}},i.prototype.getWarningLoadingIconTooltipArrowPosition=function(){return Ut.xI.arrowBottomLeft},i.prototype.getIconFontSizePx=function(e){return Math.max(e.questionFontProperties.size.px,14)},i.prototype.getQuestionIconWarningCirleRadius=function(e){var t=this.getIconFontSizePx(e);return 3+.5*(Math.floor(t/4)-4)+1},i.prototype.updateCommitOnDemandMode=function(){return(0,v.mG)(this,void 0,void 0,function(){var e,t,r;return(0,v.Jh)(this,function(o){switch(o.label){case 0:return f.fF.assertValue(this.fullConfig,"this.fullConfig should already been set"),null!=(e=this.fullConfig.commitOnDemandForcedMode)?(this.inCommitOnDemandMode="AlwaysOn"===e,[2]):(this.inCommitOnDemandMode=!1,t=_.map(this.qnaSupportedScopes,function(a){return a.model}),r=this,[4,(0,Tn.U)(_.map(t,function(a){return{datasetName:a.dbName,datasetId:a.id}}),this.qnaModelUtils,this.featureSwitchService)]);case 1:return r.inCommitOnDemandMode=o.sent(),[2]}})})},i.prototype.getCurrentUtteranceSpaceNormalized=function(){return this.contentElement?ke(this.contentElement.textContent):void 0},i.prototype.getUISpanBackgroundState=function(e,t,r,o){return e.shouldShowAcceptedUnderline||e.shouldShowErrorUnderline||e.shouldShowWarningUnderline?((t||r)&&(a=!o&&!_.some(e.tokens,function(s){return s.isBetweenOnDraggingGrippers||s.isBetweenDroppedGrippers})),a?e.shouldShowErrorUnderline?"error":e.shouldShowWarningUnderline?"warning":"accepted":"normal"):"normal";var a},i.prototype.replaceWithUtterance=function(e,t,r,o,a){var s=this;this.undoRedoService.register("Replace QnA utterance",function(){var u,c;s.interpretUtteranceRequest$.next({uniqueId:he.b$.generateGuid(),utterance:e,utteranceUITextAlreadyEnsured:!1,suppressSuggestions:t,requireCursorAtEndIfFocused:!0,enforceFocus:r,delayError:!1,linguisticSchemaJson:null===(u=s.linguisticInfo)||void 0===u?void 0:u.linguisticSchemaJson,inferredTermBinding:null===(c=s.linguisticInfo)||void 0===c?void 0:c.inferredTermBinding,incomingTags:a,specifiedSpans:void 0,isCommitInCommitQuestionOnDemandMode:o})})},i.prototype.autoCompleteDropdownItemSelected=function(e){var t,r=this.getCurrentUtteranceSpaceNormalized();1===e.action&&this.toolingLaunched.emit();var o=!(null!==(t=this.fullConfig.commitOnDemandConfigs)&&void 0!==t&&t.noCommitOnDropdownSelection);_.isEmpty(e.utterance)||ke(e.utterance)===r?this.showHideDropdown(!!e.showDropdown,{incomingTags:e.tags,utterance:r}):(this.resetPausedTagTimeoutHandler(!1),this.replaceWithUtterance(ke(e.utterance),!0,!0,o,e.tags),this.showHideDropdown(!1)),this.inCommitOnDemandMode&&o&&this.hasUncommittedQuestion$.value&&this.commitUtterance()},i.prototype.autoCompleteFullyExpanded=function(){f.fF.assertValue(this.utteranceSelectionAtLastAutoCompleteInputUpdate,"autocomplete fully expanded, this.utteranceSelectionAtLastAutoCompleteInputUpdate should be defined"),this.utteranceSelectionAtLastAutoCompleteInputUpdate?this.setUtteranceSelection(this.utteranceSelectionAtLastAutoCompleteInputUpdate):this.focus()},i.prototype.getTokenZoneInfo=function(e,t){var r=e.dropZonesInfo;if(r)return t?r.zoneLocatedBeforeInfo:r.zoneLocatedAfterInfo},i.prototype.dropZonePredicate=function(e,t){return"beginGripper"===e.data?!!t.data.beginGripperOf:!!t.data.endGripperOf},i.prototype.beginGripperDragStarted=function(){this.oneGripperDragStarted("beginGripper")},i.prototype.endGripperDragStarted=function(){this.oneGripperDragStarted("endGripper")},i.prototype.gripperEnter=function(e){var t,r;bi(null===(t=e.item)||void 0===t?void 0:t.data,null===(r=e.container)||void 0===r?void 0:r.data,this.grippersInfo.grippersLocationDuringDragging$)},i.prototype.dropGripper=function(e){var t,r,o=null===(t=e.item)||void 0===t?void 0:t.data,a=null===(r=e.container)||void 0===r?void 0:r.data;this.tryDropGripperInZone(o,a)},i.prototype.tryDropGripperInZone=function(e,t){var r;return this.grippersInfo.gripperOnDragging$.next("none"),f.fF.assertValue(null===(r=this.grippersInfo.grippersLocationDuringDragging$.value)||void 0===r?void 0:r.associatedUISpans,"this.grippersInfo.grippersLocationDuringDragging$.value.associatedUISpans should be defined"),this.grippersInfo.grippersLocationDuringDragging$.next({associatedUISpans:this.grippersInfo.grippersLocationDuringDragging$.value.associatedUISpans,begin:void 0,end:void 0}),bi(e,t,this.grippersInfo.grippersLocationDropped$)},i.prototype.sendFeedback=function(e,t){return f.fF.assertValue(e,"invalid feedback"),f.fF.assertValue(t,"invalid feedback utterance"),this.interpretService.sendFeedback(e,t,this.qnaSupportedScopes,this.tags)},i.prototype.initializeHighContrastRules=function(){this.highContrastCssGenerationService.addRule(".qnaInputV2Container svg *","{ stroke: @foregroundColor !important; fill: @foregroundColor !important; opacity: 1 !important; }"),this.highContrastCssGenerationService.addRule(".themeableElement .qnaInputV2Container *.disabled, .themeableElement .qnaInputV2Container *.disabled *","{ color: @disabledTextColor !important; border-color: @disabledTextColor !important; opacity: 1 !important; }"),this.highContrastCssGenerationService.addRule(".themeableElement .inputBox .qnaInputV2Container .inputWithoutAutoCompleteContainer button.actionButton.disabled:hover, .themeableElement .inputBox .qnaInputV2Container .inputWithoutAutoCompleteContainer button.actionButton.disabled:hover * ","{ background-color: transparent !important; color: @disabledTextColor !important; }"),this.highContrastCssGenerationService.addRule('html[data-focus-source="key"] .inputBox .qnaInputV2Container .beginGripper:focus, html[data-focus-source="key"] .inputBox .qnaInputV2Container .endGripper:focus',"{ outline-color: @foregroundColor; outline-offset: 4px; outline-style: dashed }")},i.prototype.showUtteranceSuggestions=function(){if(!_.isEmpty(this.utteranceSuggestions)){var e={startIndex:0,endExcludingIndex:0,text:"",isUnknown:!1,isCorrected:!1,state:"accepted",isOverlapping:!1,isWhiteSpace:!1,isUsed:!1,replacementBindings:{alternates:_.map(this.utteranceSuggestions,function(r){return{type:10,text:r,textSegmentsWithMatchInfo:[{text:r,isMatched:!1}],score:0}})}};this.showHideDropdown(!0),this.autoCompleteInputArgs.params.next({spans:[e],cursorPosition:0,config:{header:{show:!1}}}),this.resetPausedTagTimeoutHandler(!1)}},i.prototype.resetTags=function(){this.tags=[this.entryPoint]},i.prototype.flushUnderlineDelayApply=function(){if(this.underlineDelayApplyInfo){var e=this.underlineDelayApplyInfo.apply;this.cancelUnderlineDelayApply(),e()}},i.prototype.cancelUnderlineDelayApply=function(){this.underlineDelayApplyInfo&&(clearTimeout(this.underlineDelayApplyInfo.timeoutHandler),this.underlineDelayApplyInfo.timeoutHandler=void 0,this.underlineDelayApplyInfo=void 0)},i.prototype.showDropdownAtCurrentPosition=function(e){var t=this.getUtteranceSelectionAnchor();this.showDropdownAtPosition(e,t)},i.prototype.showDropdownAtPosition=function(e,t){f.fF.assert(function(){return-1!==t},"the given cursorPosition should not be -1.");var r=this.getCurrentUtteranceSpaceNormalized();f.fF.assert(function(){return t<=_.size(r)},"the given cursorPosition should not be > current displayed utterance's length."),-1!==t&&this.updateAutoCompleteArgsCommand$.next({matchingUtterance:r,cursorPosition:t,triggerSource:e,spans:void 0}),this.showHideDropdown(!0)},i.prototype.setupAutoCompleteRelatedPipes=function(e){var t=this;this.isDropdownOn$=new G.X(!1),this.updateAutoCompleteArgsCommand$=new G.X(void 0),this.autoCompleteInputArgs={params:new G.X(void 0),presentation:new G.X(e),selectPrevious:new G.X(void 0),selectNext:new G.X(void 0),confirmSelection:new G.X(void 0)},this.fullConfig.disableAuthoring?this.shouldShowAutoComplete$=(0,de.of)(!1):((0,Ae.aj)([this.updateAutoCompleteArgsCommand$,this.currentUtteranceInterpretResponseProcessed$]).pipe((0,ne.U)(function(r){var o=r[0],a=r[1];if(o&&a&&Fi(o.matchingUtterance,a.utterance))return{command:o,response:a}}),(0,K.h)(function(r){return!!r}),(0,q.x)(function(r,o){if(r.command.matchingUtterance===o.command.matchingUtterance&&r.command.cursorPosition===o.command.cursorPosition)return!0}),(0,ne.U)(function(r){var o,a,s=r.command,u=r.response,c=t.getCurrentUtteranceSpaceNormalized(),l={spans:s.spans||u.fullCoverageSpans,cursorPosition:s.cursorPosition,config:{header:{show:(null===(o=t.fullConfig.spanDropdownHeaderConfig)||void 0===o?void 0:o.show)&&0!==s.triggerSource&&s.cursorPosition<c.length}},modelOwner:u.modelOwner,dataSourceArray:t.dataSourcesService.get(),exploration:t.explorationNavigationService.getCurrentExploration()};return l.config.header.show&&(l.config.header.unknownSpanHeaderConfig=null===(a=t.fullConfig.spanDropdownHeaderConfig)||void 0===a?void 0:a.unknownSpanHeaderConfig),{params:l,utterance:s.matchingUtterance}}),(0,W.R)(this.destroy$)).subscribe(function(r){t.autoCompleteInputArgs.params.next(r.params);var o=!_.isEmpty(r.utterance)&&!!r.params;t.resetPausedTagTimeoutHandler(o,r.utterance);var a=!_.isEmpty(r.utterance)&&!t.escapedDropdown;t.showHideDropdown(a)}),this.shouldShowAutoComplete$=(0,Ae.aj)([this.isDropdownOn$,this.autoCompleteInputArgs.params]).pipe((0,ne.U)(function(r){return!!r[1]&&!!r[0]}),(0,V.b)(function(r){t.utteranceSelectionAtLastAutoCompleteInputUpdate=r?t.getUtteranceSelection():void 0}),(0,q.x)(),(0,W.R)(this.destroy$)))},i.prototype.setupCorrectionRelatedPipes=function(){var e=this;this.currentUtteranceAutoCorrectionInfo$=this.fullConfig.showCorrectedUtterance?this.currentUtteranceInterpretResponse$.pipe((0,K.h)(function(r){return!r.isQuestionUnCommitted}),(0,ne.U)(function(r){var s,u,o=_.first(r?.results),a=o?.correctionInfo;if(a&&0!==a.state)return(0,Ve.Gd)(a)?(s=a.correctedUtterance,u=(0,Ve.zM)(a)):(s=a.replacementUtterance,u=(0,Ve.Yi)(o.spans,a)),{label:io(a.state,e.localizationService),spans:u,replacementUtterance:s,state:a.state}})):(0,de.of)(void 0)},i.prototype.setupGrippersRelatedPipes=function(){var e=this;this.grippersInfo={grippersLocationDropped$:new G.X(void 0),grippersLocationDuringDragging$:new G.X(void 0),gripperOnDragging$:new G.X("none")},this.showGrippersAroundTextRangeRequest$=new G.X(void 0),this.fullConfig.supportTokenGrippers&&((0,Ae.aj)([this.uiSpans$,this.showGrippersAroundTextRangeRequest$]).pipe((0,W.R)(this.destroy$)).subscribe(function(t){var r=t[0],o=t[1],a=-1;o&&(a=_.findIndex(r,function(u){return u.startIndex===o.startIndex&&u.endExcludingIndex===o.endExcludingIndex})),e.grippersInfo.grippersLocationDropped$.next(-1===a?{associatedUISpans:r,begin:void 0,end:void 0}:{associatedUISpans:r,begin:{spanIndex:a,tokenIndex:0},end:{spanIndex:a,tokenIndex:_.size(r[a].tokens)-1}}),e.grippersInfo.grippersLocationDuringDragging$.next({associatedUISpans:r,begin:void 0,end:void 0}),e.grippersInfo.gripperOnDragging$.next("none")}),(0,Ae.aj)([this.uiSpans$,this.grippersInfo.grippersLocationDuringDragging$]).pipe((0,W.R)(this.destroy$),(0,q.x)(function(t,r){return t[0]===r[0]&&_.isEqual(t[1],r[1])})).subscribe(function(t){var r=t[0],o=t[1];o&&o.associatedUISpans!==r||(_.forEach(r,function(a,s){_.forEach(a.tokens,function(u,c){u.isBetweenOnDraggingGrippers=!!o&&Ii(s,c,e.grippersInfo.grippersLocationDuringDragging$.value)})}),e.tokensGripperLocInfoUpdated$.next(!0))}),(0,Ae.aj)([this.uiSpans$,this.grippersInfo.grippersLocationDropped$]).pipe((0,W.R)(this.destroy$),(0,q.x)(function(t,r){return t[0]===r[0]&&_.isEqual(t[1],r[1])})).subscribe(function(t){var r=t[0],o=t[1];if(!o||o.associatedUISpans===r)if(_.forEach(r,function(p,g){_.forEach(p.tokens,function(m,E){var P=m.dropZonesInfo;if(o?.begin&&o?.end){if(P){var F=P.zoneLocatedBeforeInfo;F.hasBeginGripper=An(m,!0,"beginGripper",o),F.hasEndGripper=An(m,!0,"endGripper",o);var se=P.zoneLocatedAfterInfo;se.hasBeginGripper=An(m,!1,"beginGripper",o),se.hasEndGripper=An(m,!1,"endGripper",o)}m.isBetweenDroppedGrippers=Ii(g,E,e.grippersInfo.grippersLocationDropped$.value)}else P&&(P.zoneLocatedBeforeInfo.hasBeginGripper=!1,P.zoneLocatedBeforeInfo.hasEndGripper=!1,P.zoneLocatedAfterInfo.hasBeginGripper=!1,P.zoneLocatedAfterInfo.hasEndGripper=!1),m.isBetweenDroppedGrippers=!1})}),e.tokensGripperLocInfoUpdated$.next(!0),o?.begin&&o?.end){var a=o.begin,u=o.end,c=r[u.spanIndex].tokens[u.tokenIndex];e.grippersDefinedTextRangeChanged.emit({startIndex:r[a.spanIndex].tokens[a.tokenIndex].startIndex,endExcludingIndex:c.startIndex+c.text.length})}else e.grippersDefinedTextRangeChanged.emit(void 0)}))},i.prototype.interpretInternal=function(e){var t=this;this.fullConfig.showWarningIcon&&!_.isEmpty(this.fullConfig.disableAuthoringMessage)?this.warningStateTooltipConfig$.next({tooltipShowOnFocus:!0,tooltipDescription:this.fullConfig.disableAuthoringMessage,tooltipDelay:0,tooltipHideDelay:0}):this.warningStateTooltipConfig$.next(void 0),this.loadingStateTooltipConfig$.next(void 0);var r=!0;this.inCommitOnDemandMode&&(r=!!e.isCommitInCommitQuestionOnDemandMode),this.escapedDropdown=!1;var o={utterance:"",interpretRequestId:e.uniqueId,isQuestionCommitted:!0};if(_.isEmpty(e.utterance))return r&&this.interpretListener.onInterpretResultCleared(),this.resetTags(),(0,de.of)(o);var a=_.union(this.tags,e.incomingTags);this.resetTags();var s=this.fullConfig.calculation;return s&&r&&(s=(0,v.pi)((0,v.pi)({},s),{isCommitted:!0})),this.interpretRequestSequenceNumber++,this.getReportMetadata().pipe((0,Ee.w)(function(c){return t.interpretService.interpret({groupId:t.componentUniqueId,groupSequenceNumber:t.interpretRequestSequenceNumber},e.utterance,t.entryPoint,t.qnaSupportedScopes,t.interpretListener,{supportsPodQueries:t.fullConfig.supportsPodQueries,supportsInsightsQueries:t.fullConfig.supportsInsightsQueries,inferUnknownModelTerms:t.fullConfig.inferUnknownModelTerms,singleAnswerBias:t.fullConfig.singleAnswerBias,supportsCalculation:!!s},{isQuestionNotCommitted:!r,specifiedSpans:e.specifiedSpans,linguisticSchemaJson:e.linguisticSchemaJson,inferredTermBinding:e.inferredTermBinding,tags:a,calculation:s},c).pipe((0,k.q)(1),(0,ne.U)(function(l){return _.merge({},l,{interpretRequestId:e.uniqueId,isQuestionUnCommitted:!r})}))}))},i.prototype.getReportMetadata=function(){var e=this;if("@powerbi/Qna/qnadesktop.module#QnaDesktopModule"!==this.qnaProxyPath||!this.fullConfig.supportsPodQueries||!this.linguisticSchemaProxy)return(0,de.of)(void 0);var t=this.explorationNavigationService.getCurrentExploration();return t?(0,_e.D)(this.conceptualSchemaProxy.get(this.dataSourcesService.get())).pipe((0,ne.U)(function(o){var a=e.linguisticSchemaProxy.getSchema(-1);if(a?.content)return{linguisticSchema:a.content,pods:_.map(t.pods,function(s){return{name:s.name,parameters:_.chain(s.parameters).map(function(u){var c=function(i,e,t,r){var o=_.find(t.sections,function(u){return u.name===e});if(o){var a=_.find(o.filters,function(u){return u.name===i});if(a?.expression){var s=a.expression.getConceptualProperty(r);return s?{column:s.name,entity:a.expression.getTargetEntity().entity}:void 0}f.fF.assertFail("filter should be part of the section and have an expression")}else f.fF.assertFail("pod section should be part of the exploration")}(u.boundFilter,s.boundSection,t,o);if(c)return{name:u.name,targetColumn:c.column,targetEntity:c.entity}}).filter(function(u){return!!u}).value(),cortanaEnabled:s.cortanaEnabled}})}})):(0,de.of)(void 0)},i.prototype.resetPausedTagTimeoutHandler=function(e,t){var r=this;this.fullConfig.disableSendingServiceTags||(null!=this.pausedTagTimeoutHandler&&(clearTimeout(this.pausedTagTimeoutHandler),this.pausedTagTimeoutHandler=null),e&&(f.fF.assert(function(){return!_.isEmpty(t)},"Expect the given utteranceIfRestart not to be empty."),this.pausedTagTimeoutHandler=setTimeout(function(){r.sendTags(["Paused"],t),r.pausedTagTimeoutHandler=void 0},this.fullConfig.sendPausedTagTimeout)))},i.prototype.showHideDropdown=function(e,t){if(!this.fullConfig.disableAuthoring){var r=this.isDropdownOn$.value;if(this.escapedDropdown=!e,(r!==e||e)&&(this.isDropdownOn$.next(e),t)){var o=void 0;_.isEmpty(this.getCurrentUtteranceSpaceNormalized())?o=_.union(t.incomingTags,["Dropdown:Suggested","Committed"]):(f.fF.assert(function(){return!_.isEmpty(t.utterance)},"Going to send tags for dropdown commit, expect its associated utterance not empty"),o=_.union(t.incomingTags,["Committed"])),this.resetPausedTagTimeoutHandler(!1),this.sendTags(o,t.utterance)}}},i.prototype.sendTags=function(e,t){return(0,v.mG)(this,void 0,void 0,function(){var r;return(0,v.Jh)(this,function(o){switch(o.label){case 0:return r=_.union(this.tags,e),this.resetTags(),_.isEmpty(r)?[2]:[4,this.interpretService.sendTags(r,t,this.entryPoint,this.qnaSupportedScopes,{supportsPodQueries:this.fullConfig.supportsPodQueries,supportsInsightsQueries:this.fullConfig.supportsInsightsQueries,inferUnknownModelTerms:this.fullConfig.inferUnknownModelTerms,singleAnswerBias:this.fullConfig.singleAnswerBias})];case 1:return o.sent(),[2]}})})},i.prototype.isInputBoxFocused=function(){return this.contentElement&&gt(this.contentElement,document.activeElement)},i.prototype.getUtteranceSelection=function(){if(f.fF.assertValue(this.contentElement,"this.contentElement"),this.isInputBoxFocused())return function(i){if(i&&window.getSelection){var e=window.getSelection();if(e.rangeCount&&gt(i,e.anchorNode)&&gt(i,e.focusNode)){var t=e.getRangeAt(0),r=t.cloneRange();r.selectNodeContents(i),r.setEnd(t.startContainer,t.startOffset);var o=r.toString().length;if(e.isCollapsed)return{normalizedAnchor:o,normalizedFocus:o};r.setEnd(t.endContainer,t.endOffset);var a=r.toString().length,s=e.anchorNode===t.startContainer;return{normalizedAnchor:s?o:a,normalizedFocus:s?a:o}}}}(this.contentElement)},i.prototype.isValidRange=function(e){var t=_.size(this.contentElement.textContent);return _.inRange(e.normalizedAnchor,0,t+1)&&_.inRange(e.normalizedFocus,0,t+1)},i.prototype.setUtteranceSelection=function(e){f.fF.assertValue(e,"selection"),f.fF.assertValue(this.contentElement,"this.contentElement"),function(i,e){f.fF.assertValue(i,"Expect the given node to be defined."),f.fF.assertValue(e,"Expect the given selectionRange to be defined."),f.fF.assert(function(){return _.inRange(e.normalizedAnchor,0,_.size(i.textContent)+1)},"Expect the given selectionRange.anchor is a valid position inside the given node"),f.fF.assert(function(){return _.inRange(e.normalizedFocus,0,_.size(i.textContent)+1)},"Expect the given selectionRange.focus is a valid position inside the given node");var t=_.size(i.textContent);if(i&&e&&_.inRange(e.normalizedAnchor,0,t+1)&&_.inRange(e.normalizedFocus,0,t+1)){var r=window.getSelection&&window.getSelection();if(r){var o=e.normalizedAnchor,a=e.normalizedFocus,s=Xt(i,o);if(f.fF.assertValue(s,"Expect to find the NodeAndOffset for character position "+o+" inside the node"),s){var u=a===o?s:Xt(i,a);if(f.fF.assertValue(s,"Expect to find the NodeAndOffset for character position "+a+" inside the node"),u){var c=s.node,l=s.textOrChildNodesOffset,p=u.node,g=u.textOrChildNodesOffset;if(r.anchorNode!==c||r.focusNode!==p||r.anchorOffset!==l||r.focusOffset!==g){i instanceof HTMLElement&&i.focus();var m=document.createRange();m.setStart(c,l),m.setEnd(p,g),r.removeAllRanges(),r.addRange(m)}}}}}}(this.contentElement,e)},i.prototype.getUtteranceCursorPosition=function(){var e=this.getUtteranceSelection();return e?e.normalizedFocus:-1},i.prototype.getUtteranceSelectionAnchor=function(){return Mt(0,this.getUtteranceSelection())},i.prototype.addEventListeners=function(){var e=this;(0,De.R)(this.contentElement,"click").pipe((0,W.R)(this.destroy$),(0,J.B)()).subscribe(function(p){var g=e.getUtteranceSelection(),m=Mt(1,g);e.cursorLocation$.next(m),e.flushUnderlineDelayApply(),we(p);var E=e.getCurrentUtteranceSpaceNormalized(),P=Mt(0,g);_.isEmpty(E)||-1!==P&&e.updateAutoCompleteArgsCommand$.next({matchingUtterance:E,cursorPosition:P,triggerSource:1,spans:void 0})});var r=(0,De.R)(this.contentElement,"paste").pipe((0,ne.U)(function(p){return{event:p,beforePastedContentElementText:e.contentElement.textContent}}),(0,V.b)(function(p){if(He(p.event),we(p.event),window.getSelection){var g=(e.getCurrentUtteranceSpaceNormalized()||"").length,m=e.getUtteranceSelection();m&&(g-=Math.abs(m.normalizedAnchor-m.normalizedFocus));var E=(function(i){var e=i.originalEvent||i;return e.clipboardData&&e.clipboardData.getData?e.clipboardData.getData("text/plain"):window.clipboardData&&window.clipboardData.getData?window.clipboardData.getData("Text"):void 0}(p.event)||"").substr(0,200-g);!function(i){f.fF.assertValue(window.getSelection,"Expecting window.getSelection is defined");var e=window.getSelection();if(e.rangeCount){var t=e.getRangeAt(0);if(t.deleteContents(),i){var r=document.createTextNode(i);t.insertNode(r),t.setStart(r,i.length),t.collapse(!0)}}}(E)}}),(0,K.h)(function(p){return p.beforePastedContentElementText!==e.contentElement.textContent})),o=(0,De.R)(this.contentElement,"compositionend").pipe((0,J.B)()),a=(0,De.R)(this.contentElement,"keyup").pipe((0,W.R)(this.destroy$),(0,K.h)(function(p){return!Kt(p)}),(0,J.B)());a.pipe((0,W.R)(this.destroy$),(0,K.h)(function(p){return"Backspace"===p.key||"Delete"===p.key})).subscribe(function(p){_.isEmpty(e.getCurrentUtteranceSpaceNormalized())&&e.cleanContentElement()}),a.pipe((0,W.R)(this.destroy$),(0,K.h)(function(p){return _.includes(["Home","End","ArrowLeft","ArrowRight"],p.key)})).subscribe(function(p){Xn(p)||e.cursorLocation$.next(e.getUtteranceCursorPosition())});var s=["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Backspace","Delete","Home","End","Enter","Escape","Tab"],u=["A","X","C","Z","a","x","c","z"],c=(0,De.R)(this.contentElement,"keydown").pipe((0,W.R)(this.destroy$),(0,K.h)(function(p){return!Kt(p)}),(0,V.b)(function(p){!Xn(p)&&!_.includes(s,p.key)&&(!p.ctrlKey||!_.includes(u,p.key))&&e.getCurrentUtteranceSpaceNormalized().length>=200&&He(p)}),(0,J.B)());(0,De.R)(this.contentElement,"focus").pipe((0,W.R)(this.destroy$),(0,rt.M)(this.distinctDisplayedUtterance$)).subscribe(function(p){var m=p[1];e.inputBoxFocused.emit(p[0]),e.hasFocus$.next(!0),e.cursorLocation$.next(e.getUtteranceCursorPosition()),!e.isAutoCompleteDropdownShown()&&_.isEmpty(m)&&e.showUtteranceSuggestions()}),(0,De.R)(this.contentElement,"blur").pipe((0,W.R)(this.destroy$)).subscribe(function(p){var g=p.relatedTarget;e.deleteButtonElementRef&&e.deleteButtonElementRef.nativeElement.contains(g)||e.commitButtonElementRef&&e.commitButtonElementRef.nativeElement.contains(g)||e.hasFocus$.next(!1),e.cursorLocation$.next(-1),e.flushUnderlineDelayApply();var P=window.getSelection?window.getSelection():void 0;P&&P.removeAllRanges()});var l=(0,De.R)(this.contentElement,"input").pipe((0,K.h)(function(p){return!p.isComposing}));(0,xe.T)(l,o,r).pipe((0,W.R)(this.destroy$),(0,ne.U)(function(p){return e.getCurrentUtteranceSpaceNormalized()}),(0,V.b)(function(p){e.displayedUtteranceInternal$.next(p)})).subscribe(function(p){e.interpretUtteranceRequest$.next({uniqueId:he.b$.generateGuid(),utterance:p,utteranceUITextAlreadyEnsured:!0,delayError:!0,enforceFocus:!1,suppressSuggestions:!1,requireCursorAtEndIfFocused:!1,linguisticSchemaJson:e.linguisticInfo&&e.linguisticInfo.linguisticSchemaJson,inferredTermBinding:e.linguisticInfo&&e.linguisticInfo.inferredTermBinding,incomingTags:void 0,specifiedSpans:void 0,isFromInputEvent:!0})}),c.pipe((0,W.R)(this.destroy$),(0,K.h)(function(p){return!Kt(p)})).subscribe(function(p){if(Xn(p)&&!_.includes(["Tab","Enter"],p.key))return _.includes(["ArrowLeft","ArrowRight","Escape","ArrowDown"],p.key)?(we(p),void He(p)):void 0;var g=e.getCurrentUtteranceSpaceNormalized();switch(p.key){case"z":case"Z":$t.M.isCtrlOrMeta(p)&&(He(p),e.fullConfig.hostSupportsUndo?e.contentElement.blur():we(p));break;case"ArrowLeft":e.flushUnderlineDelayApply(),we(p),_.isEmpty(g)||-1!==(E=Mt(0,m=e.getUtteranceSelection()))&&e.updateAutoCompleteArgsCommand$.next({matchingUtterance:g,cursorPosition:m.normalizedAnchor!==m.normalizedFocus?E:Math.max(0,E-1),triggerSource:2,spans:void 0});break;case"ArrowRight":case"Right":var m,E;e.flushUnderlineDelayApply(),we(p),_.isEmpty(g)||-1!==(E=Mt(0,m=e.getUtteranceSelection()))&&e.updateAutoCompleteArgsCommand$.next({matchingUtterance:g,cursorPosition:m.normalizedAnchor!==m.normalizedFocus?E:Math.min(E+1,g.length),triggerSource:2,spans:void 0});break;case"ArrowUp":e.flushUnderlineDelayApply(),we(p),He(p),e.autoCompleteInputArgs.selectPrevious.next(!0);break;case"ArrowDown":e.flushUnderlineDelayApply(),we(p),He(p),e.arrowDownOnInputboxHanlder();break;case"Enter":e.flushUnderlineDelayApply(),we(p),e.isAutoCompleteDropdownShown()?e.autoCompleteInputArgs.confirmSelection.next(!0):(e.enterKeyPressed&&e.enterKeyPressed.emit(),e.inCommitOnDemandMode&&e.hasUncommittedQuestion$.value&&e.commitUtterance()),He(p);break;case"Backspace":"false"===e.contentElement.contentEditable&&He(p);case"Delete":we(p);break;case"Escape":e.flushUnderlineDelayApply();var P=e.isAutoCompleteDropdownShown();e.showHideDropdown(!1,{utterance:g}),P&&(He(p),we(p));break;case"Home":_.isEmpty(g)||e.updateAutoCompleteArgsCommand$.next({matchingUtterance:g,cursorPosition:0,triggerSource:2,spans:void 0});break;case"End":_.isEmpty(g)||e.updateAutoCompleteArgsCommand$.next({matchingUtterance:g,cursorPosition:g.length,triggerSource:2,spans:void 0})}})},i.prototype.cleanContentElement=function(){this.contentElement&&_.filter(this.contentElement.childNodes,function(t){return t.nodeType!==Node.COMMENT_NODE}).forEach(function(t){an(t)})},i.prototype.isAutoCompleteDropdownShown=function(){var e;return null===(e=this.autoCompleteComponent)||void 0===e?void 0:e.showAutoCompleteDropdown},i.prototype.ensureAngularCommentNodes=function(){var e=this;""===this.contentElement.textContent&&(this.contentElement.innerHTML="");var t=[];_.forEach(this.contentElement.childNodes,function(c){c.nodeType===Node.COMMENT_NODE&&_.includes(e.contentElementAngularCommentNodes,c)&&t.push(c)});var r=_.size(this.contentElementAngularCommentNodes);if(_.size(t)!==r){_.forEach(t,function(c){return an(c)});var o=_.first(this.contentElement.childNodes);if(o)for(var a=o,s=void 0,u=r-1;u>=0;u--)this.contentElement.insertBefore(s=this.contentElementAngularCommentNodes[u],a),a=s;else _.forEach(this.contentElementAngularCommentNodes,function(c){e.contentElement.appendChild(c)})}},i.prototype.ensureContentElementUtteranceText=function(e){return ke(e)!==this.getCurrentUtteranceSpaceNormalized()&&(this.cleanContentElement(),e&&this.contentElement.appendChild(document.createTextNode(e)),!0)},i.prototype.oneGripperDragStarted=function(e){f.fF.assert(function(){return"none"!==e},"Expect this not to be called with GripperIdentifier.None");var t=this.grippersInfo.grippersLocationDropped$.value;f.fF.assertValue(t,"this.grippersInfo.grippersLocationDropped$.value should be defined"),this.grippersInfo.grippersLocationDuringDragging$.next({associatedUISpans:t.associatedUISpans,begin:t.begin,end:t.end}),this.grippersInfo.gripperOnDragging$.next(e)},i.prototype.arrowDownOnInputboxHanlder=function(){this.showDropdownAtCurrentPosition(2),this.autoCompleteInputArgs.selectNext.next(!0)},i.\u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(n.ChangeDetectorRef),n.\u0275\u0275directiveInject(C.i),n.\u0275\u0275directiveInject(D.D),n.\u0275\u0275directiveInject(w.z),n.\u0275\u0275directiveInject(b.vZ),n.\u0275\u0275directiveInject(_t.g),n.\u0275\u0275directiveInject(A.E),n.\u0275\u0275directiveInject(Qe.o),n.\u0275\u0275directiveInject(Re.g),n.\u0275\u0275directiveInject(L.z),n.\u0275\u0275directiveInject(R.e,8),n.\u0275\u0275directiveInject(Jt.n,8),n.\u0275\u0275directiveInject(Wt.z,8))},i.\u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["qna-input-v2"]],viewQuery:function(t,r){if(1&t&&(n.\u0275\u0275viewQuery(x,5,n.ElementRef),n.\u0275\u0275viewQuery(X,5,n.ElementRef),n.\u0275\u0275viewQuery(ae,5,n.ElementRef),n.\u0275\u0275viewQuery(ve,5,n.ElementRef),n.\u0275\u0275viewQuery(Fe,5,n.ElementRef),n.\u0275\u0275viewQuery(O,5),n.\u0275\u0275viewQuery(le,5,n.ElementRef),n.\u0275\u0275viewQuery(Ne,5,n.ElementRef),n.\u0275\u0275viewQuery(Be,5,n.ElementRef),n.\u0275\u0275viewQuery(Ke,5,n.ElementRef)),2&t){var o=void 0;n.\u0275\u0275queryRefresh(o=n.\u0275\u0275loadQuery())&&(r.contentElementExtraContainer=o.first),n.\u0275\u0275queryRefresh(o=n.\u0275\u0275loadQuery())&&(r.deleteButtonElementRef=o.first),n.\u0275\u0275queryRefresh(o=n.\u0275\u0275loadQuery())&&(r.commitButtonElementRef=o.first),n.\u0275\u0275queryRefresh(o=n.\u0275\u0275loadQuery())&&(r.autoCompleteElementRef=o.first),n.\u0275\u0275queryRefresh(o=n.\u0275\u0275loadQuery())&&(r.contentElementRef=o.first),n.\u0275\u0275queryRefresh(o=n.\u0275\u0275loadQuery())&&(r.autoCompleteComponent=o.first),n.\u0275\u0275queryRefresh(o=n.\u0275\u0275loadQuery())&&(r.qnaInputContainerElementRef=o.first),n.\u0275\u0275queryRefresh(o=n.\u0275\u0275loadQuery())&&(r.beginGripperElementRef=o.first),n.\u0275\u0275queryRefresh(o=n.\u0275\u0275loadQuery())&&(r.endGripperElementRef=o.first),n.\u0275\u0275queryRefresh(o=n.\u0275\u0275loadQuery())&&(r.spanElementRefs=o)}},hostVars:1,hostBindings:function(t,r){2&t&&n.\u0275\u0275attribute("tabindex",null!=r.fullConfig&&r.fullConfig.disableAuthoring?null:-1)},inputs:{entryPoint:"entryPoint",presentationArgs:"presentationArgs",configs:"configs",qnaSupportedScopes:"qnaSupportedScopes",interpretListener:"interpretListener",linguisticInfo:"linguisticInfo",initialUtterance:"initialUtterance",initialUtteranceFromSaved:"initialUtteranceFromSaved",utteranceSuggestions:"utteranceSuggestions"},outputs:{grippersDefinedTextRangeChanged:"grippersDefinedTextRangeChanged",enterKeyPressed:"enterKeyPressed",initialized:"initialized",toolingLaunched:"toolingLaunched",inputBoxFocused:"inputBoxFocused"},features:[n.\u0275\u0275NgOnChangesFeature],decls:2,vars:3,consts:[[4,"ngIf"],["class","resetButtonAndInputV2Container",4,"ngIf"],["class","qnaAutoCorrection",3,"ngStyle",4,"ngIf"],[1,"resetButtonAndInputV2Container"],["data-testId","qna-input-v2-container","role","application",1,"qnaInputV2Container",3,"ngClass","ngStyle"],["qnaInputContainer",""],[1,"inputAndAutoCompleteContainer",3,"ngStyle","ngClass"],[1,"inputWithoutAutoCompleteContainer",3,"ngStyle","ngClass"],["contenteditable","false","tabindex","-1",1,"utteranceContentExtraContainer"],["contentElementExtraContainer",""],["data-testId","qna-input-box","tabindex","0","cdkDropListGroup","","role","textbox","aria-autocomplete","list","spellcheck","false",1,"utteranceContent",3,"ngClass"],["contentElement",""],["class","term",3,"ngClass","ngStyle","mouseover","mouseleave",4,"ngFor","ngForOf"],[3,"withTopSeparator","params","presentation","selectPrevious","selectNext","confirmSelection","utteranceSelected","fullyExpanded",4,"ngIf"],[1,"beforeUtteranceOneLineHeightContainer",3,"ngStyle"],["aria-hidden","true",2,"width","1px",3,"ngStyle"],["class","questionIcon glyphicon pbi-glyph-qna",3,"ngClass","ngStyle","pbi-tooltip","accessible-click",4,"ngIf"],[1,"questionIcon","glyphicon","pbi-glyph-qna",3,"ngClass","ngStyle","pbi-tooltip","accessible-click"],["class","questionIconWarningLoadingCircle","preserveAspectRatio","none","style","position: absolute;",3,"ngStyle",4,"ngIf"],["preserveAspectRatio","none",1,"questionIconWarningLoadingCircle",2,"position","absolute",3,"ngStyle"],[3,"ngStyle"],[1,"term",3,"ngClass","ngStyle","mouseover","mouseleave"],["spanElement",""],[1,"term-main",3,"ngClass","ngStyle"],["class","token",3,"ngClass",4,"ngFor","ngForOf"],["style","position: absolute;",3,"ngStyle",4,"ngIf"],[1,"token",3,"ngClass"],[4,"ngFor","ngForOf"],["cdkDropList","","class","dropZone","contenteditable","false",3,"ngClass","cdkDropListData","cdkDropListEnterPredicate","cdkDropListEntered","cdkDropListDropped",4,"ngIf"],["cdkDropList","","contenteditable","false",1,"dropZone",3,"ngClass","cdkDropListData","cdkDropListEnterPredicate","cdkDropListEntered","cdkDropListDropped"],["cdkDrag","","class","beginGripper","cdkDragBoundary",".utteranceContent","tabindex","0",3,"cdkDragData","keyup","cdkDragStarted",4,"ngIf"],["cdkDrag","","class","endGripper","cdkDragBoundary",".utteranceContent","tabindex","0",3,"cdkDragData","keyup","cdkDragStarted",4,"ngIf"],["cdkDrag","","cdkDragBoundary",".utteranceContent","tabindex","0",1,"beginGripper",3,"cdkDragData","keyup","cdkDragStarted"],["beginGripper",""],["preserveAspectRatio","none",1,"line"],["preserveAspectRatio","none",1,"circle"],["cdkDrag","","cdkDragBoundary",".utteranceContent","tabindex","0",1,"endGripper",3,"cdkDragData","keyup","cdkDragStarted"],["endGripper",""],[1,"line"],[2,"position","absolute",3,"ngStyle"],["x2","100%","stroke-linecap","round"],[1,"actionButtonsInputBoxFullHeightContainer",3,"ngStyle","click"],["class","singleButtonContainer",4,"ngIf"],[1,"singleButtonContainer"],["role","button",1,"actionButton","deleteButton",3,"ngClass","pbi-tooltip","ngStyle","accessible-click"],["deleteButton",""],[1,"actionButtonsInputBoxOneLineHeightContainer",3,"ngStyle"],[1,"buttonIconContainer"],[1,"glyphicon","pbi-glyph-exit",3,"ngStyle"],["role","button","data-testId","qna-submit-button",1,"actionButton","commitButton",3,"ngClass","localizeAttr","pbi-tooltip","ngStyle","accessible-click"],["commitButton",""],[1,"glyphicon","pbi-glyph-rightarrow",3,"ngStyle"],[3,"params","presentation","selectPrevious","selectNext","confirmSelection","utteranceSelected","fullyExpanded"],["autoComplete",""],[1,"qnaAutoCorrection",3,"ngStyle"],[1,"correctedUtteranceLabel"],["tabindex","0",1,"correctedUtteranceContentContainer",3,"accessible-click"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,Zr,7,14,"ng-container",0),n.\u0275\u0275pipe(1,"async")),2&t&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,r.fullPresentation$))},dependencies:[y.NgClass,y.NgForOf,y.NgIf,y.NgStyle,Q.Wj,Q.Fd,Q.Zt,Z.b,H.i,ht.t,O,y.AsyncPipe],styles:["@keyframes _ngcontent-%COMP%_pulse{0%{opacity:.2}50%{opacity:1}to{opacity:.2}}html[data-focus-source=key][_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContent[_ngcontent-%COMP%]:focus{outline:none}.resetButtonAndInputV2Container[_ngcontent-%COMP%]{display:flex}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .beforeUtteranceOneLineHeightContainer[_ngcontent-%COMP%]{margin-right:8px;padding:6px 0;background-color:transparent;position:relative;height:fit-content}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .beforeUtteranceOneLineHeightContainer[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%]{position:absolute;left:0;top:50%;transform:translateY(-40%)}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .beforeUtteranceOneLineHeightContainer[_ngcontent-%COMP%]   .questionIcon[_ngcontent-%COMP%]{cursor:pointer;color:var(--colorNeutralForeground1)}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .beforeUtteranceOneLineHeightContainer[_ngcontent-%COMP%]   .questionIcon[_ngcontent-%COMP%]   .questionIconWarningLoadingCircle[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{fill:var(--colorBrandBackground)}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .beforeUtteranceOneLineHeightContainer[_ngcontent-%COMP%]   .questionIcon.notClickable[_ngcontent-%COMP%]{cursor:default;pointer-events:none}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .beforeUtteranceOneLineHeightContainer[_ngcontent-%COMP%]   .loadingIcon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 1s linear .5s infinite}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]{flex:1;display:flex;display:-ms-flexbox;flex-flow:column;align-items:flex-start;position:relative;cursor:text;margin:0;background-color:var(--colorNeutralBackground1);color:var(--colorNeutralForeground1);border-color:var(--colorNeutralStrokeAccessible);--inputContainerBackgroundColor: inherit;--inputContainerColor: inherit}[data-legacy-theming=false][_ngcontent-%COMP%]   .resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]{--inputContainerBackgroundColor: var(--colorNeutralForegroundInverted);--inputContainerColor: var(--colorNeutralForeground1)}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container.authoringDisabled[_ngcontent-%COMP%]{pointer-events:none}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .inputAndAutoCompleteContainer[_ngcontent-%COMP%]{width:100%;overflow-y:hidden}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .inputAndAutoCompleteContainer.withFixedHeight[_ngcontent-%COMP%]{overflow-y:auto}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .inputAndAutoCompleteContainer[_ngcontent-%COMP%]   .inputWithoutAutoCompleteContainer[_ngcontent-%COMP%]{width:100%;overflow-y:visible;display:flex;display:-ms-flexbox;flex-direction:column}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .inputAndAutoCompleteContainer.allowContentHorizontalScroll[_ngcontent-%COMP%]{overflow-x:auto}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .inputAndAutoCompleteContainer.allowContentHorizontalScroll[_ngcontent-%COMP%]   .inputWithoutAutoCompleteContainer[_ngcontent-%COMP%]{min-width:100%;width:fit-content}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container.withBorder[_ngcontent-%COMP%]{border:1px solid;border-radius:2px}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container.withShadow[_ngcontent-%COMP%]{box-shadow:var(--fluent-shadow-depth4, 0px 0px 2px var(--colorNeutralShadowAmbient), 0px 2px 4px var(--colorNeutralShadowKey))}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]{flex:1;-ms-flex:1 1 auto;position:relative;display:inline-flex;display:-ms-inline-flexbox;background-color:var(--inputContainerBackgroundColor)}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent[_ngcontent-%COMP%]{flex:1;-ms-flex:1 1 0px;margin-left:10px;display:block;padding:6px;outline:none;box-sizing:border-box;white-space:pre-wrap;pointer-events:auto;-ms-user-select:text;user-select:text;-webkit-user-select:text;color:var(--inputContainerColor)}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-moz-selection, .resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::selection{background:var(--fluent-theme-neutral-lighter-secondary-color, #E5E5E5)}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent[_ngcontent-%COMP%]:empty:before{content:attr(placeholder);color:var(--fluent-theme-neutral-tertiary-alt-color, #C8C6C4)}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent.isGripperOnDragging[_ngcontent-%COMP%], .resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent.isGripperOnDragging[_ngcontent-%COMP%]   .term[_ngcontent-%COMP%], .resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent.isGripperOnDragging[_ngcontent-%COMP%]   .term-main[_ngcontent-%COMP%], .resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent.isGripperOnDragging[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%], .resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent.isGripperOnDragging[_ngcontent-%COMP%]   .dropZone[_ngcontent-%COMP%], .resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent.isGripperOnDragging[_ngcontent-%COMP%]   .beginGripper[_ngcontent-%COMP%], .resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent.isGripperOnDragging[_ngcontent-%COMP%]   .endGripper[_ngcontent-%COMP%]{cursor:grabbing!important}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent[_ngcontent-%COMP%]   .term[_ngcontent-%COMP%]{display:inline}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent[_ngcontent-%COMP%]   .term[_ngcontent-%COMP%]   .term-main[_ngcontent-%COMP%]{position:static;display:inline;cursor:text;margin:0;min-height:6px;color:var(--inputContainerColor)}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent[_ngcontent-%COMP%]   .term[_ngcontent-%COMP%]   .term-main.hasMultipleTokens[_ngcontent-%COMP%]{white-space:nowrap}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent[_ngcontent-%COMP%]   .term[_ngcontent-%COMP%]   .term-main.unused[_ngcontent-%COMP%]{color:var(--colorNeutralForegroundDisabled)}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent[_ngcontent-%COMP%]   .term[_ngcontent-%COMP%]   .term-main[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]{position:relative;display:inline}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent[_ngcontent-%COMP%]   .term[_ngcontent-%COMP%]   .term-main[_ngcontent-%COMP%]   .token.space[_ngcontent-%COMP%], .resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent[_ngcontent-%COMP%]   .term[_ngcontent-%COMP%]   .term-main[_ngcontent-%COMP%]   .token.filler[_ngcontent-%COMP%]{pointer-events:none}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent[_ngcontent-%COMP%]   .term[_ngcontent-%COMP%]   .term-main[_ngcontent-%COMP%]   .token.isBetweenDroppedGrippers[_ngcontent-%COMP%], .resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent[_ngcontent-%COMP%]   .term[_ngcontent-%COMP%]   .term-main[_ngcontent-%COMP%]   .token.isBetweenOnDraggingGrippers[_ngcontent-%COMP%]{background-color:rgba(254,217,204,.5)}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent[_ngcontent-%COMP%]   .term[_ngcontent-%COMP%]   .term-main[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .beginGripper[_ngcontent-%COMP%], .resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent[_ngcontent-%COMP%]   .term[_ngcontent-%COMP%]   .term-main[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .endGripper[_ngcontent-%COMP%]{pointer-events:auto;cursor:grab;width:6px;height:100%;box-sizing:border-box;background:transparent}  html[data-focus-source=key] .resetButtonAndInputV2Container .qnaInputV2Container .utteranceContentExtraContainer .utteranceContent .term .term-main .token .beginGripper:focus,   html[data-focus-source=key] .resetButtonAndInputV2Container .qnaInputV2Container .utteranceContentExtraContainer .utteranceContent .term .term-main .token .endGripper:focus{outline-offset:2px;outline-style:dashed}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent[_ngcontent-%COMP%]   .term[_ngcontent-%COMP%]   .term-main[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .beginGripper[_ngcontent-%COMP%]   svg.line[_ngcontent-%COMP%], .resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent[_ngcontent-%COMP%]   .term[_ngcontent-%COMP%]   .term-main[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .endGripper[_ngcontent-%COMP%]   svg.line[_ngcontent-%COMP%]{width:2px;height:calc(100% - 12px)}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent[_ngcontent-%COMP%]   .term[_ngcontent-%COMP%]   .term-main[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .beginGripper[_ngcontent-%COMP%]   svg.line[_ngcontent-%COMP%]   rect[_ngcontent-%COMP%], .resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent[_ngcontent-%COMP%]   .term[_ngcontent-%COMP%]   .term-main[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .endGripper[_ngcontent-%COMP%]   svg.line[_ngcontent-%COMP%]   rect[_ngcontent-%COMP%]{width:100%;height:100%}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent[_ngcontent-%COMP%]   .term[_ngcontent-%COMP%]   .term-main[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .beginGripper[_ngcontent-%COMP%]   svg.circle[_ngcontent-%COMP%], .resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent[_ngcontent-%COMP%]   .term[_ngcontent-%COMP%]   .term-main[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .endGripper[_ngcontent-%COMP%]   svg.circle[_ngcontent-%COMP%]{width:8px;height:8px}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent[_ngcontent-%COMP%]   .term[_ngcontent-%COMP%]   .term-main[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .beginGripper[_ngcontent-%COMP%]   svg.circle[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%], .resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent[_ngcontent-%COMP%]   .term[_ngcontent-%COMP%]   .term-main[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .endGripper[_ngcontent-%COMP%]   svg.circle[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{cx:4px;cy:4px;r:3px;stroke-width:2px}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent[_ngcontent-%COMP%]   .term[_ngcontent-%COMP%]   .term-main[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .dropZone[_ngcontent-%COMP%]{pointer-events:auto;cursor:default;background-color:transparent;position:absolute}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent[_ngcontent-%COMP%]   .term[_ngcontent-%COMP%]   .term-main[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .dropZone.noGripperOnDragging[_ngcontent-%COMP%]{pointer-events:none}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent[_ngcontent-%COMP%]   .term[_ngcontent-%COMP%]   .term-main[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .dropZone.endGripperOnDragging[_ngcontent-%COMP%]:not(.serveEndGripper):not(.hasBeginGripper), .resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent[_ngcontent-%COMP%]   .term[_ngcontent-%COMP%]   .term-main[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .dropZone.beginGripperOnDragging[_ngcontent-%COMP%]:not(.serveBeginGripper):not(.hasEndGripper){visibility:hidden;width:0;height:0}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent[_ngcontent-%COMP%]   .term[_ngcontent-%COMP%]   .term-main[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .dropZoneLocatedBeforeToken[_ngcontent-%COMP%]{position:absolute;width:calc(50% + 2px);left:-2px;height:calc(100% + 14px);top:unset;bottom:-2px}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent[_ngcontent-%COMP%]   .term[_ngcontent-%COMP%]   .term-main[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .dropZoneLocatedBeforeToken[_ngcontent-%COMP%]   .beginGripper[_ngcontent-%COMP%]{position:absolute;left:0}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent[_ngcontent-%COMP%]   .term[_ngcontent-%COMP%]   .term-main[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .dropZoneLocatedBeforeToken[_ngcontent-%COMP%]   .beginGripper[_ngcontent-%COMP%]   svg.line[_ngcontent-%COMP%]{position:absolute;left:0;bottom:2px}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent[_ngcontent-%COMP%]   .term[_ngcontent-%COMP%]   .term-main[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .dropZoneLocatedBeforeToken[_ngcontent-%COMP%]   .beginGripper[_ngcontent-%COMP%]   svg.circle[_ngcontent-%COMP%]{position:absolute;left:-3px;top:2px}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent[_ngcontent-%COMP%]   .term[_ngcontent-%COMP%]   .term-main[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .dropZoneLocatedAfterToken[_ngcontent-%COMP%]{position:absolute;right:-2px;height:calc(100% + 16px);width:calc(50% + 2px);top:-2px;bottom:unset}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent[_ngcontent-%COMP%]   .term[_ngcontent-%COMP%]   .term-main[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .dropZoneLocatedAfterToken[_ngcontent-%COMP%]   .endGripper[_ngcontent-%COMP%]{position:absolute;right:0}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent[_ngcontent-%COMP%]   .term[_ngcontent-%COMP%]   .term-main[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .dropZoneLocatedAfterToken[_ngcontent-%COMP%]   .endGripper[_ngcontent-%COMP%]   svg.line[_ngcontent-%COMP%]{position:absolute;right:0;top:2px}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent[_ngcontent-%COMP%]   .term[_ngcontent-%COMP%]   .term-main[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .dropZoneLocatedAfterToken[_ngcontent-%COMP%]   .endGripper[_ngcontent-%COMP%]   svg.circle[_ngcontent-%COMP%]{position:absolute;right:-3px;bottom:2px}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent[_ngcontent-%COMP%]   .term.unused[_ngcontent-%COMP%]   .term-main[_ngcontent-%COMP%]{color:var(--fluent-theme-neutral-tertiary-color, #A19F9D)}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent[_ngcontent-%COMP%]   .term.showAcceptedUnderline[_ngcontent-%COMP%]   .term-main[_ngcontent-%COMP%]{cursor:pointer;padding-bottom:1px;border-bottom-color:var(--colorSuccessForeground1)}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent[_ngcontent-%COMP%]   .term.showAcceptedUnderline[_ngcontent-%COMP%]   .term-main[_ngcontent-%COMP%]:hover{background-color:color-mix(in srgb,var(--colorSuccessForeground1) 15%,transparent)}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent[_ngcontent-%COMP%]   .term.showWarningUnderline[_ngcontent-%COMP%]{position:relative}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent[_ngcontent-%COMP%]   .term.showWarningUnderline[_ngcontent-%COMP%]   .term-main[_ngcontent-%COMP%]{cursor:pointer;border-bottom-color:var(--colorSuccessForeground1)}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent[_ngcontent-%COMP%]   .term.showWarningUnderline[_ngcontent-%COMP%]   .term-main[_ngcontent-%COMP%]:hover{background-color:color-mix(in srgb,var(--colorSuccessForeground1) 15%,transparent)}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent[_ngcontent-%COMP%]   .term.showWarningUnderline[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{position:absolute;width:100%}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent[_ngcontent-%COMP%]   .term.showErrorUnderline[_ngcontent-%COMP%]   .term-main[_ngcontent-%COMP%]{cursor:pointer;padding-bottom:1px;border-bottom-color:var(--colorDangerForeground1)}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent[_ngcontent-%COMP%]   .term.showErrorUnderline[_ngcontent-%COMP%]   .term-main[_ngcontent-%COMP%]:hover{background-color:color-mix(in srgb,var(--colorDangerForeground1) 15%,transparent)}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .actionButtonsInputBoxFullHeightContainer[_ngcontent-%COMP%]{display:flex;display:-ms-flexbox;position:relative;margin-left:2px;padding:1px 0}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .actionButtonsInputBoxFullHeightContainer[_ngcontent-%COMP%]   .singleButtonContainer[_ngcontent-%COMP%]{flex:1;-ms-flex:1 1 auto;position:relative}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .actionButtonsInputBoxFullHeightContainer[_ngcontent-%COMP%]   .singleButtonContainer[_ngcontent-%COMP%]   .actionButton[_ngcontent-%COMP%]{width:100%;position:absolute;top:0;padding:0;margin:0;border:none}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .actionButtonsInputBoxFullHeightContainer[_ngcontent-%COMP%]   .singleButtonContainer[_ngcontent-%COMP%]   .actionButton.deleteButton[_ngcontent-%COMP%]{left:0}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .actionButtonsInputBoxFullHeightContainer[_ngcontent-%COMP%]   .singleButtonContainer[_ngcontent-%COMP%]   .actionButton.commitButton[_ngcontent-%COMP%]{right:0}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .actionButtonsInputBoxFullHeightContainer[_ngcontent-%COMP%]   .singleButtonContainer[_ngcontent-%COMP%]   .actionButton.deleteButton[_ngcontent-%COMP%]:not(.usingShellTheme).disabled, .resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .actionButtonsInputBoxFullHeightContainer[_ngcontent-%COMP%]   .singleButtonContainer[_ngcontent-%COMP%]   .actionButton.commitButton[_ngcontent-%COMP%]:not(.usingShellTheme).disabled{opacity:.5;cursor:default}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .actionButtonsInputBoxFullHeightContainer[_ngcontent-%COMP%]   .singleButtonContainer[_ngcontent-%COMP%]   .actionButton.deleteButton[_ngcontent-%COMP%]:not(.usingShellTheme):hover:not(.disabled), .resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .actionButtonsInputBoxFullHeightContainer[_ngcontent-%COMP%]   .singleButtonContainer[_ngcontent-%COMP%]   .actionButton.commitButton[_ngcontent-%COMP%]:not(.usingShellTheme):hover:not(.disabled){filter:brightness(90%)}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .actionButtonsInputBoxFullHeightContainer[_ngcontent-%COMP%]   .singleButtonContainer[_ngcontent-%COMP%]   .actionButton.deleteButton[_ngcontent-%COMP%]:not(.usingShellTheme):active:not(.disabled), .resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .actionButtonsInputBoxFullHeightContainer[_ngcontent-%COMP%]   .singleButtonContainer[_ngcontent-%COMP%]   .actionButton.commitButton[_ngcontent-%COMP%]:not(.usingShellTheme):active:not(.disabled){filter:brightness(80%)}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .actionButtonsInputBoxFullHeightContainer[_ngcontent-%COMP%]   .singleButtonContainer[_ngcontent-%COMP%]   .actionButton.deleteButton.usingShellTheme[_ngcontent-%COMP%]{background-color:var(--colorNeutralBackground1);color:var(--colorNeutralForeground1)}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .actionButtonsInputBoxFullHeightContainer[_ngcontent-%COMP%]   .singleButtonContainer[_ngcontent-%COMP%]   .actionButton.deleteButton.usingShellTheme.disabled[_ngcontent-%COMP%]{color:var(--colorNeutralForegroundDisabled);cursor:default}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .actionButtonsInputBoxFullHeightContainer[_ngcontent-%COMP%]   .singleButtonContainer[_ngcontent-%COMP%]   .actionButton.deleteButton.usingShellTheme[_ngcontent-%COMP%]:hover:not(.disabled){background-color:var(--colorNeutralBackground1Hover)}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .actionButtonsInputBoxFullHeightContainer[_ngcontent-%COMP%]   .singleButtonContainer[_ngcontent-%COMP%]   .actionButton.deleteButton.usingShellTheme[_ngcontent-%COMP%]:active:not(.disabled){background-color:var(--colorNeutralBackground1Pressed)}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .actionButtonsInputBoxFullHeightContainer[_ngcontent-%COMP%]   .singleButtonContainer[_ngcontent-%COMP%]   .actionButton.commitButton.usingShellTheme[_ngcontent-%COMP%]{background-color:var(--colorBrandBackground);color:var(--colorNeutralForegroundOnBrand)}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .actionButtonsInputBoxFullHeightContainer[_ngcontent-%COMP%]   .singleButtonContainer[_ngcontent-%COMP%]   .actionButton.commitButton.usingShellTheme.disabled[_ngcontent-%COMP%]{background-color:var(--colorNeutralBackgroundDisabled);color:var(--colorNeutralForegroundDisabled);cursor:default}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .actionButtonsInputBoxFullHeightContainer[_ngcontent-%COMP%]   .singleButtonContainer[_ngcontent-%COMP%]   .actionButton.commitButton.usingShellTheme[_ngcontent-%COMP%]:hover:not(.disabled){background-color:var(--colorBrandBackgroundHover)}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .actionButtonsInputBoxFullHeightContainer[_ngcontent-%COMP%]   .singleButtonContainer[_ngcontent-%COMP%]   .actionButton.commitButton.usingShellTheme[_ngcontent-%COMP%]:active:not(.disabled){background-color:var(--colorBrandBackgroundPressed)}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .actionButtonsInputBoxFullHeightContainer[_ngcontent-%COMP%]   .singleButtonContainer[_ngcontent-%COMP%]   .actionButton[_ngcontent-%COMP%]   .actionButtonsInputBoxOneLineHeightContainer[_ngcontent-%COMP%]{padding:5px 0;width:100%}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .actionButtonsInputBoxFullHeightContainer[_ngcontent-%COMP%]   .singleButtonContainer[_ngcontent-%COMP%]   .actionButton[_ngcontent-%COMP%]   .actionButtonsInputBoxOneLineHeightContainer[_ngcontent-%COMP%]   .buttonIconContainer[_ngcontent-%COMP%]{position:absolute;top:0;width:100%;height:100%;display:flex;display:-ms-flexbox;align-items:center;justify-content:center}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container.authoringDisabled[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent[_ngcontent-%COMP%], .resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container.authoringDisabled[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{pointer-events:none}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container.authoringDisabled[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent[_ngcontent-%COMP%]   .token.space[_ngcontent-%COMP%], .resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container.authoringDisabled[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent[_ngcontent-%COMP%]   .token.filler[_ngcontent-%COMP%], .resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container.authoringDisabled[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .beginGripper[_ngcontent-%COMP%], .resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container.authoringDisabled[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .endGripper[_ngcontent-%COMP%], .resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container.authoringDisabled[_ngcontent-%COMP%]   .utteranceContentExtraContainer[_ngcontent-%COMP%]   .utteranceContent[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .dropZone[_ngcontent-%COMP%]{pointer-events:none!important}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container.authoringDisabled.showDisabled[_ngcontent-%COMP%]   .questionIcon[_ngcontent-%COMP%], .resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container.authoringDisabled.showDisabled[_ngcontent-%COMP%]   .utteranceContent[_ngcontent-%COMP%]{opacity:.6}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]     ul.qnaAutoComplete, .resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]     .qnaAutoComplete ul{text-decoration:none;list-style:none;margin-top:4px!important;z-index:101;white-space:pre;max-height:400px;overflow-y:auto;padding:0}.resetButtonAndInputV2Container[_ngcontent-%COMP%]   .qnaInputV2Container[_ngcontent-%COMP%]     .withTopSeparator ul.qnaAutoComplete{border-top:solid 1px var(--fluent-theme-neutral-tertiary-alt-color, #C8C6C4)}.qnaAutoCorrection[_ngcontent-%COMP%]{margin-top:8px;display:flex;display:-ms-flexbox}.qnaAutoCorrection[_ngcontent-%COMP%]   .correctedUtteranceContentContainer[_ngcontent-%COMP%]{margin-left:4px;cursor:pointer;font-style:italic;text-decoration:underline}.qnaAutoCorrection[_ngcontent-%COMP%]   .correctedUtteranceContentContainer[_ngcontent-%COMP%]   .corrected[_ngcontent-%COMP%]{font-weight:600}"]}),i}();function to(i,e){if(i){var t=_.map(i,function(r){if(!_.isEmpty(r.text))return{text:r.isWhiteSpace?r.text:r.text.replace(" ",Zn),startIndex:r.startIndex,endExcludingIndex:r.endExcludingIndex,tokens:no(r),isCorrected:r.isCorrected,isUnused:!r.isUsed&&e.considerDroppedSpans,isWhiteSpace:r.isWhiteSpace,shouldShowAcceptedUnderline:"accepted"===r.state,shouldShowErrorUnderline:"error"===r.state&&e.considerErrorSpans,shouldShowWarningUnderline:"warning"===r.state&&e.considerWarningSpans}}).filter(function(r){return!!r});return e.supportTokenGrippers&&function(i){var e,t;_.forEach(i,function(r,o){_.forEach(r.tokens,function(a,s){var u=i[o].tokens[s];if(!_.isEmpty(u.text)&&!u.isWhiteSpace){var c={position:a.startIndex,beginGripperOf:{spanIndex:o,tokenIndex:s},hasBeginGripper:!1,hasEndGripper:!1,previousBeginGripperZoneInfo:e,previousEndGripperZoneInfo:t},l={position:a.endExcludingIndex,endGripperOf:{spanIndex:o,tokenIndex:s},hasBeginGripper:!1,hasEndGripper:!1,previousBeginGripperZoneInfo:e,previousEndGripperZoneInfo:t};e&&(e.nextBeginGripperZoneInfo=c,e.nextEndGripperZoneInfo=l),t&&(t.nextBeginGripperZoneInfo=c,t.nextEndGripperZoneInfo=l),e=c,t=l,a.dropZonesInfo={zoneLocatedBeforeInfo:c,zoneLocatedAfterInfo:l}}})})}(t),t}}function no(i){for(var e=[],t=0,r=function(p){var g=p.startIndex-i.startIndex,m=p.endExcludingIndex-p.startIndex;if(f.fF.assert(function(){return _.inRange(g,0,_.size(i.text))},"Expect each token.startIndex is a valid index with the given spanText and spanStartIndex"),f.fF.assert(function(){return!_.isEmpty(_.trim(i.text.substr(g,m)))},"Expect no Token being pure space"),t<g){var E=Ai(i.startIndex,i.text,t,g,i.isWhiteSpace);e.push.apply(e,E||[])}e.push({text:p.text.replace(" ",Zn),startIndex:p.startIndex,endExcludingIndex:p.endExcludingIndex,isFillerText:!1,isWhiteSpace:!1}),t=g+m},o=0,a=i.tokens||[];o<a.length;o++)r(a[o]);var u=_.size(i.text);if(t<u){var c=Ai(i.startIndex,i.text,t,u,i.isWhiteSpace);e.push.apply(e,c||[])}return e}function Ai(i,e,t,r,o){f.fF.assert(function(){return _.inRange(t,0,_.size(e))},"Expect the given startIndexInSpan is a valid index in the given spanText"),f.fF.assert(function(){return _.inRange(r,0,_.size(e)+1)},"Expect the given notIncludingEndIndexInSpan is a valid index in the given spanText or equals to spanText.length+1");for(var a=[],s=/\s/.test(e.charAt(t)),u=t,c=t+1;c<=r;c++){var l=/\s/.test(e.charAt(c));if(c===r||s!==l){var p=c-u,g=s&&!o?_.repeat(Zn,p):e.substr(u,p);a.push({text:g,startIndex:i+u,endExcludingIndex:i+u+p,isFillerText:!0,isWhiteSpace:s}),s=l,u=c}}return a}function io(i,e){if(i){if(1===i)return e.get("Qna_DidYouMean_LabelText");if(2===i)return e.get("Qna_ShowingResultsFor_LabelText")}}function He(i){i.preventDefault&&i.preventDefault()}function we(i){i.stopPropagation&&i.stopPropagation()}function Fi(i,e){return null==i?null==e:null==e?null==i:ke(i)===ke(e)}function bi(i,e,t){var r,o,a,s;if(!e)return!1;if("beginGripper"===i&&e.beginGripperOf){var u=_.cloneDeep(t.value.end);if(e.beginGripperOf.spanIndex<u.spanIndex||e.beginGripperOf.spanIndex===u.spanIndex&&e.beginGripperOf.tokenIndex<=u.tokenIndex){var c=e.beginGripperOf;return f.fF.assertValue(null===(r=t.value)||void 0===r?void 0:r.associatedUISpans,"grippersPairLocation$.value.associatedUISpans should be defined"),t.next({associatedUISpans:null===(o=t.value)||void 0===o?void 0:o.associatedUISpans,begin:c,end:u}),!0}}else if("endGripper"===i&&e.endGripperOf){var l=_.cloneDeep(t.value.begin);if(e.endGripperOf.spanIndex>l.spanIndex||e.endGripperOf.spanIndex===l.spanIndex&&e.endGripperOf.tokenIndex>=l.tokenIndex){var p=e.endGripperOf;return f.fF.assertValue(null===(a=t.value)||void 0===a?void 0:a.associatedUISpans,"grippersPairLocation$.value.associatedUISpans should be defined"),t.next({associatedUISpans:null===(s=t.value)||void 0===s?void 0:s.associatedUISpans,begin:l,end:p}),!0}}return!1}function An(i,e,t,r){if(!r?.begin||!r?.end||!i.dropZonesInfo)return!1;var o=e?i.dropZonesInfo.zoneLocatedBeforeInfo:i.dropZonesInfo.zoneLocatedAfterInfo;f.fF.assert(function(){return"none"!==t},"The given gripper should not be GripperIdentifier.None");var a="beginGripper"===t?r.begin:r.end,s="beginGripper"===t?o.beginGripperOf:o.endGripperOf;return a.spanIndex===(s&&s.spanIndex)&&a.tokenIndex===(s&&s.tokenIndex)}function Ii(i,e,t){if(!t?.begin||!t?.end)return!1;var r=t.begin,a=t.end;return(i!==r.spanIndex?i>r.spanIndex:e>=r.tokenIndex)&&(i!==a.spanIndex?i<a.spanIndex:e<=a.tokenIndex)}function Xn(i){var e;return _.some(null===(e=i?.target)||void 0===e?void 0:e.classList,function(t){return"beginGripper"===t||"endGripper"===t})}function xi(i,e,t){var r=Et.Tm(i,e);return _.map(r,function(a){return t.get(a)}).join("\n\n")}function Mt(i,e){return e?0===i?e.normalizedAnchor:e.normalizedFocus:-1}var wi=d(71148),Bt=d(46135),Mi=d(98136),Bi=d(77200),oo=d(55232),Oi=d(28894),ao=d(73425),Ti=d(98885),so=d(46101),uo=d(36858),lo=d(21548),Xe=function(e){return{color:e}},Yn=function(){return{"aria-label":"Qna_FeedbackDialog_ThumbsUp"}},ei=function(){return{"aria-label":"Qna_FeedbackDialog_ThumbsDown"}};function co(i,e){if(1&i){var t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",3),n.\u0275\u0275element(1,"span",4),n.\u0275\u0275elementStart(2,"button",5),n.\u0275\u0275listener("accessible-click",function(){n.\u0275\u0275restoreView(t);var a=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(a.feedbackIconClick(!0))}),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"button",6),n.\u0275\u0275listener("accessible-click",function(){n.\u0275\u0275restoreView(t);var a=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(a.feedbackIconClick(!1))}),n.\u0275\u0275elementEnd()()}if(2&i){var r=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction1(5,Xe,r.fontColor)),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction1(7,Xe,r.fontColor))("localizeAttr",n.\u0275\u0275pureFunction0(9,Yn)),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction1(10,Xe,r.fontColor))("localizeAttr",n.\u0275\u0275pureFunction0(12,ei))}}function po(i,e){if(1&i){var t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",3)(1,"a",7),n.\u0275\u0275listener("accessible-click",function(){n.\u0275\u0275restoreView(t);var a=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(a.launchFeedbackDialog(!0))}),n.\u0275\u0275element(2,"span",8),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(3,"button",9),n.\u0275\u0275elementEnd()}if(2&i){var r=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction1(3,Xe,r.fontColor)),n.\u0275\u0275advance(2),n.\u0275\u0275property("localizeAttr",n.\u0275\u0275pureFunction0(5,Yn))("ngStyle",n.\u0275\u0275pureFunction1(6,Xe,r.fontColor))}}function go(i,e){if(1&i){var t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",3)(1,"a",10),n.\u0275\u0275listener("accessible-click",function(){n.\u0275\u0275restoreView(t);var a=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(a.launchFeedbackDialog(!1))}),n.\u0275\u0275element(2,"span",11),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(3,"button",12),n.\u0275\u0275elementEnd()}if(2&i){var r=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction1(3,Xe,r.fontColor)),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction1(5,Xe,r.fontColor))("localizeAttr",n.\u0275\u0275pureFunction0(7,ei))}}function ho(i,e){if(1&i&&(n.\u0275\u0275elementStart(0,"div",3),n.\u0275\u0275element(1,"span",13)(2,"button",9),n.\u0275\u0275elementEnd()),2&i){var t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction1(3,Xe,t.fontColor)),n.\u0275\u0275advance(1),n.\u0275\u0275property("localizeAttr",n.\u0275\u0275pureFunction0(5,Yn))("ngStyle",n.\u0275\u0275pureFunction1(6,Xe,t.fontColor))}}function fo(i,e){if(1&i&&(n.\u0275\u0275elementStart(0,"div",3),n.\u0275\u0275element(1,"span",13)(2,"button",14),n.\u0275\u0275elementEnd()),2&i){var t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction1(3,Xe,t.fontColor)),n.\u0275\u0275advance(1),n.\u0275\u0275property("localizeAttr",n.\u0275\u0275pureFunction0(5,ei))("ngStyle",n.\u0275\u0275pureFunction1(6,Xe,t.fontColor))}}var ti=function(){function i(e,t,r,o){this.core=e,this.localizationService=t,this.qnaFeedbackStateService=r,this.screenReaderService=o}return i.prototype.ngOnInit=function(){this.utterance=this.core.getCurrentUtteranceTrimmed()},i.prototype.feedbackIconClick=function(e){var t={sentiment:e?1:-1,reason:void 0,comment:void 0};this.updateState(e?"PositiveChecked":"NegativeChecked"),this.sendFeedbackInterpretRequest(t)},i.prototype.getState=function(){return this.qnaFeedbackStateService.getState(this.utterance)},i.prototype.announceDescription=function(){var e=this.getState(),t=this.localizationService.get("Qna_FeedbackState_"+e);f.fF.assertValue(t,"no strings for current feedback state"),this.screenReaderService.alert(t)},i.prototype.launchFeedbackDialog=function(e){return(0,v.mG)(this,void 0,void 0,function(){return(0,v.Jh)(this,function(t){return this.core.launchFeedbackDialog(e?1:-1,!0),[2]})})},i.prototype.sendFeedbackInterpretRequest=function(e){return f.fF.assertValue(e,"invalid feedback"),this.core.sendFeedback(e)},i.prototype.updateState=function(e){this.qnaFeedbackStateService.updateState(this.utterance,e)},i.\u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(M.D),n.\u0275\u0275directiveInject(Qe.o),n.\u0275\u0275directiveInject(lo.B),n.\u0275\u0275directiveInject(Re.g))},i.\u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["qna-feedback"]],inputs:{fontColor:"fontColor"},features:[n.\u0275\u0275ProvidersFeature([Le.Q,Mi.Z])],decls:7,vars:6,consts:[["focus-nav-mode","Hierarchy",1,"qnnFeedback",3,"focusin"],[3,"ngSwitch"],["class","textAndIcons",4,"ngSwitchCase"],[1,"textAndIcons"],["localize","Qna_FeedbackState_Unchosen",1,"descriptionText",3,"ngStyle"],[1,"feedbackIcon","glyphicon","glyph-small","pbi-glyph-like",3,"ngStyle","localizeAttr","accessible-click"],[1,"feedbackIcon","glyphicon","glyph-small","pbi-glyph-dislike",3,"ngStyle","localizeAttr","accessible-click"],["href","javascript:void(0);",1,"descriptionText",3,"ngStyle","accessible-click"],["localize","Qna_FeedbackState_PositiveChecked"],[1,"feedbackIcon","glyphicon","glyph-small","pbi-glyph-likesolid",3,"localizeAttr","ngStyle"],["href","javascript:void(0);",1,"descriptionText",3,"accessible-click"],["localize","Qna_FeedbackState_NegativeChecked",3,"ngStyle"],[1,"feedbackIcon","glyphicon","glyph-small","pbi-glyph-dislikesolid",3,"ngStyle","localizeAttr"],["localize","Qna_FeedbackState_FeedbackDetailSubmitted",1,"descriptionText",3,"ngStyle"],[1,"feedbackIcon","glyphicon","glyph-small","pbi-glyph-dislikesolid",3,"localizeAttr","ngStyle"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275listener("focusin",function(){return r.announceDescription()}),n.\u0275\u0275elementStart(1,"div",1),n.\u0275\u0275template(2,co,4,13,"div",2),n.\u0275\u0275template(3,po,4,8,"div",2),n.\u0275\u0275template(4,go,4,8,"div",2),n.\u0275\u0275template(5,ho,3,8,"div",2),n.\u0275\u0275template(6,fo,3,8,"div",2),n.\u0275\u0275elementEnd()()),2&t&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("ngSwitch",r.getState()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngSwitchCase","Unchosen"),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngSwitchCase","PositiveChecked"),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngSwitchCase","NegativeChecked"),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngSwitchCase","PositiveDetailSubmitted"),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngSwitchCase","NegativeDetailSubmitted"))},dependencies:[y.NgStyle,y.NgSwitch,y.NgSwitchCase,Pt.X,Z.b,ht.t],styles:['.qnnFeedback[_ngcontent-%COMP%]{height:100%}.qnnFeedback[_ngcontent-%COMP%]   .textAndIcons[_ngcontent-%COMP%]{display:flex;flex-direction:row}html:not([dir="rtl"])[_nghost-%COMP%]   .qnnFeedback[_ngcontent-%COMP%]   .textAndIcons[_ngcontent-%COMP%]   .descriptionText[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .qnnFeedback[_ngcontent-%COMP%]   .textAndIcons[_ngcontent-%COMP%]   .descriptionText[_ngcontent-%COMP%]{margin-right:10px}html[dir="rtl"][_nghost-%COMP%]   .qnnFeedback[_ngcontent-%COMP%]   .textAndIcons[_ngcontent-%COMP%]   .descriptionText[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .qnnFeedback[_ngcontent-%COMP%]   .textAndIcons[_ngcontent-%COMP%]   .descriptionText[_ngcontent-%COMP%]{margin-left:10px}.qnnFeedback[_ngcontent-%COMP%]   .textAndIcons[_ngcontent-%COMP%]   .feedbackIcon[_ngcontent-%COMP%]{background-color:transparent}html:not([dir="rtl"])[_nghost-%COMP%]   .qnnFeedback[_ngcontent-%COMP%]   .textAndIcons[_ngcontent-%COMP%]   .feedbackIcon[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .qnnFeedback[_ngcontent-%COMP%]   .textAndIcons[_ngcontent-%COMP%]   .feedbackIcon[_ngcontent-%COMP%]{margin-left:2px;margin-right:2px}html[dir="rtl"][_nghost-%COMP%]   .qnnFeedback[_ngcontent-%COMP%]   .textAndIcons[_ngcontent-%COMP%]   .feedbackIcon[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .qnnFeedback[_ngcontent-%COMP%]   .textAndIcons[_ngcontent-%COMP%]   .feedbackIcon[_ngcontent-%COMP%]{margin-left:2px;margin-right:2px}.qnnFeedback[_ngcontent-%COMP%]   .textAndIcons[_ngcontent-%COMP%]   .feedbackIcon.pbi-glyph-likesolid[_ngcontent-%COMP%], .qnnFeedback[_ngcontent-%COMP%]   .textAndIcons[_ngcontent-%COMP%]   .feedbackIcon.pbi-glyph-dislikesolid[_ngcontent-%COMP%]{cursor:default}']}),i}(),Fn=d(59694),mo=d(73221),vo=d(45769);function Co(i,e){if(1&i){var t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"tri-message-bar",2),n.\u0275\u0275listener("hideMessageBar",function(){var s=n.\u0275\u0275restoreView(t).$implicit,u=n.\u0275\u0275nextContext(3);return n.\u0275\u0275resetView(u.onDismissBanner(s.id))}),n.\u0275\u0275elementEnd()}2&i&&n.\u0275\u0275property("viewModel",e.$implicit)}function Do(i,e){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,Co,1,1,"tri-message-bar",1),n.\u0275\u0275elementContainerEnd()),2&i){var t=n.\u0275\u0275nextContext().ngIf;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",t)}}function yo(i,e){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,Do,2,1,"ng-container",0),n.\u0275\u0275elementContainerEnd()),2&i){var t=e.ngIf;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.length>0)}}var ni=function(i){function e(){var t=i.call(this)||this;return t.onDismiss=new n.EventEmitter,t}return(0,v.ZT)(e,i),e.prototype.ngOnInit=function(){var t=this;this.messageBarModels$=this.changes$("bannerContent").pipe((0,ne.U)(function(r){return _.chain(r.banners).filter(function(a){return a.isVisible}).map(function(a){var s,u;return{id:a.id,bannerType:t.mapToMessageBarType(a.bannerType),message:t.mapToMessageBarText(a.message),barButtons:_.chain(a.actions).map(function(c){return t.mapToMessageBarAction(c,a.data)}).filter(function(c){return!!c}).value(),allowDismiss:a.allowDismiss,isRoundedCorners:!0,isMultiline:!0,link:null===(s=a.link)||void 0===s?void 0:s.href,linkDisplayName:null===(u=a.link)||void 0===u?void 0:u.text}}).value()}))},e.prototype.onDismissBanner=function(t){f.fF.assertValue(t,"bannerId"),this.onDismiss.emit(t)},e.prototype.mapToMessageBarType=function(t){switch(t){case"copilot":return 6;case"error":return 1;case"info":return 0;case"warning":return 2;default:f.fF.assertFail("unknown bannerType ".concat(t))}},e.prototype.mapToMessageBarText=function(t){return f.fF.assert(function(){return!(0,Fn.g)(t.text)},"banner message should be defined and non empty"),t.emphasis?"<b>".concat(t.emphasis,"</b> ").concat(t.text):t.text},e.prototype.mapToMessageBarAction=function(t,r){var o=this,a=(0,Fn.g)(t.text);if(f.fF.assert(function(){return!a},"banner action text should be defined and non empty"),!a)return{buttonText:t.text,buttonAction:function(){return function(c){if("noop"!==c){var l=o.bannerContent.actionHandlers.get(c);f.fF.assertValue(l,"handler with actionId ".concat(c)),null!=r?l(r):l()}}(t.id)},buttonAppearance:"primary"===t.actionAppearance?"primary":void 0,isLoading:"loading"===t.actionAppearance,isDisabled:"loading"===t.actionAppearance}},e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=n.\u0275\u0275defineComponent({type:e,selectors:[["qna-banner"]],inputs:{bannerContent:"bannerContent"},outputs:{onDismiss:"onDismiss"},features:[n.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:[[4,"ngIf"],["style","margin-bottom: 4px;",3,"viewModel","hideMessageBar",4,"ngFor","ngForOf"],[2,"margin-bottom","4px",3,"viewModel","hideMessageBar"]],template:function(r,o){1&r&&(n.\u0275\u0275template(0,yo,2,1,"ng-container",0),n.\u0275\u0275pipe(1,"async")),2&r&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,o.messageBarModels$))},dependencies:[y.NgForOf,y.NgIf,vo.h,y.AsyncPipe],styles:["[_nghost-%COMP%]     tri-message-bar .message-banner{border-top-color:transparent;border-right-color:transparent;border-left-color:transparent}"]}),e}(mo.w),Eo=d(85102),_o=["bannerMainMessageTextContainer"],Po=["contentContainer"];function So(i,e){1&i&&(n.\u0275\u0275elementStart(0,"div",8)(1,"div",9),n.\u0275\u0275element(2,"spinner",10)(3,"span",11),n.\u0275\u0275elementEnd()()),2&i&&(n.\u0275\u0275advance(2),n.\u0275\u0275property("delay",0))}function Ao(i,e){if(1&i){var t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div")(1,"canvas-visual-error-overlay",12),n.\u0275\u0275listener("showErrorDetails",function(){n.\u0275\u0275restoreView(t);var a=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(a.showQnaVisualErrorDetails())}),n.\u0275\u0275elementEnd()()}if(2&i){var r=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("errorInfo",r.viewModel.error)("viewport",r.viewModel.viewport)}}function Fo(i,e){if(1&i){var t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"qna-banner",20),n.\u0275\u0275listener("onDismiss",function(a){n.\u0275\u0275restoreView(t);var s=n.\u0275\u0275nextContext(4);return n.\u0275\u0275resetView(s.onBannerDismiss(a))}),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()}if(2&i){var r=n.\u0275\u0275nextContext().ngIf;n.\u0275\u0275advance(1),n.\u0275\u0275property("bannerContent",r)}}function bo(i,e){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,Fo,2,1,"ng-container",19),n.\u0275\u0275elementContainerEnd()),2&i){var t=e.ngIf;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.showBanners)}}function Io(i,e){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,bo,2,1,"ng-container",19),n.\u0275\u0275pipe(2,"async"),n.\u0275\u0275elementContainerEnd()),2&i){var t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(2,1,t.bannerContent$))}}var xo=function(){return{"aria-label":"VisualContainer_QnaVisual_Promotion_HideAction"}};function wo(i,e){if(1&i){var t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",22),n.\u0275\u0275element(1,"i",23)(2,"span",24,25),n.\u0275\u0275elementStart(4,"button",26),n.\u0275\u0275listener("accessible-click",function(){n.\u0275\u0275restoreView(t);var a=n.\u0275\u0275nextContext(3);return n.\u0275\u0275resetView(a.performBannerMainAction())}),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(5,"button",27),n.\u0275\u0275listener("accessible-click",function(){n.\u0275\u0275restoreView(t);var a=n.\u0275\u0275nextContext(3);return n.\u0275\u0275resetView(a.dismissBanner())}),n.\u0275\u0275pipe(6,"localize"),n.\u0275\u0275elementEnd()()}if(2&i){var r=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(2),n.\u0275\u0275property("pbiTooltip",r.bannerMainMessageTooltip)("localize","VisualContainer_QnaVisual_Promotion_MainMessage"),n.\u0275\u0275advance(2),n.\u0275\u0275property("localize","VisualContainer_QnaVisual_Promotion_ActionText"),n.\u0275\u0275advance(1),n.\u0275\u0275property("pbiTooltip",n.\u0275\u0275pipeBind1(6,5,"VisualContainer_QnaVisual_Promotion_HideAction"))("localizeAttr",n.\u0275\u0275pureFunction0(7,xo))}}function Mo(i,e){if(1&i&&n.\u0275\u0275template(0,wo,7,8,"div",21),2&i){var t=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("ngIf",t.showLegacyBanner)}}var Bo=function(e){return{disabled:e}},Oo=function(){return{"aria-label":"Qna_ConvertDescription"}},Vi=function(e,t){return{color:e,"font-size":t}};function To(i,e){if(1&i){var t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"i",28),n.\u0275\u0275listener("accessible-click",function(){n.\u0275\u0275restoreView(t);var a=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(a.convertVisualClicked())}),n.\u0275\u0275pipe(1,"localize"),n.\u0275\u0275elementEnd()}if(2&i){var r=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(6,Bo,!r.viewModel.result||"Visual"!==r.viewModel.result.type&&"QueryError"!==r.viewModel.result.type))("pbiTooltip",n.\u0275\u0275pipeBind1(1,4,"Qna_ConvertDescription"))("localizeAttr",n.\u0275\u0275pureFunction0(8,Oo))("ngStyle",n.\u0275\u0275pureFunction2(9,Vi,null==r.inputPresentation||null==r.inputPresentation.restatementFontProperties?null:r.inputPresentation.restatementFontProperties.color,(null==r.inputPresentation||null==r.inputPresentation.questionFontProperties?null:r.inputPresentation.questionFontProperties.size.px)+"px"))}}var Vo=function(){return{"aria-label":"Qna_ToolingDescription"}};function Uo(i,e){if(1&i){var t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"i",29),n.\u0275\u0275listener("accessible-click",function(){n.\u0275\u0275restoreView(t);var a=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(a.showTooling("VisualTooling"))}),n.\u0275\u0275pipe(1,"localize"),n.\u0275\u0275elementEnd()}if(2&i){var r=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("pbiTooltip",n.\u0275\u0275pipeBind1(1,3,"Qna_ToolingDescription"))("localizeAttr",n.\u0275\u0275pureFunction0(5,Vo))("ngStyle",n.\u0275\u0275pureFunction2(6,Vi,null==r.inputPresentation||null==r.inputPresentation.restatementFontProperties?null:r.inputPresentation.restatementFontProperties.color,(null==r.inputPresentation||null==r.inputPresentation.questionFontProperties?null:r.inputPresentation.questionFontProperties.size.px)+"px"))}}var Lo=function(e){return{hasBanner:e}};function ko(i,e){if(1&i){var t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,Io,3,3,"ng-container",13),n.\u0275\u0275pipe(2,"async"),n.\u0275\u0275template(3,Mo,1,1,"ng-template",null,14,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementStart(5,"div",15)(6,"qna-input-v2",16),n.\u0275\u0275listener("inputBoxFocused",function(s){n.\u0275\u0275restoreView(t);var u=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(u.onInputBoxFocused(s))}),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(7,To,2,12,"i",17),n.\u0275\u0275template(8,Uo,2,9,"i",18),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()}if(2&i){var r=n.\u0275\u0275reference(4),o=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(2,12,o.allowTooling&&o.isCopilotSynonymsEnabled$))("ngIfElse",r),n.\u0275\u0275advance(4),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(14,Lo,o.showLegacyBanner)),n.\u0275\u0275advance(1),n.\u0275\u0275property("entryPoint",o.viewModel.qnaInputConfiguration.entryPoint)("qnaSupportedScopes",o.viewModel.qnaInputConfiguration.qnaSupportedScopes)("interpretListener",o.viewModel.qnaInputConfiguration.interpretListener)("presentationArgs",o.inputPresentation)("configs",o.viewModel.qnaInputConfiguration.configs)("initialUtterance",o.viewModel.qnaInputConfiguration.initialUtterance)("initialUtteranceFromSaved",o.viewModel.qnaInputConfiguration.initialUtteranceFromSaved),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",o.config.canEdit),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",o.allowTooling)}}var Ro=function(e){return{color:e}};function Qo(i,e){if(1&i&&n.\u0275\u0275element(0,"i",30),2&i){var t=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction1(3,Ro,null==t.inputPresentation||null==t.inputPresentation.restatementFontProperties?null:t.inputPresentation.restatementFontProperties.color))("pbiTooltip",t.displayedRestatement),n.\u0275\u0275attribute("aria-label",t.displayedRestatement.tooltipDescription)}}var No=function(e,t,r,o,a,s,u){return{"background-color":e,color:t,"font-size":r,"font-family":o,"font-weight":a,"font-style":s,"text-decoration":u}};function qo(i,e){if(1&i){var t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",45),n.\u0275\u0275listener("accessible-click",function(){var u=n.\u0275\u0275restoreView(t).$implicit,c=n.\u0275\u0275nextContext(4);return n.\u0275\u0275resetView(c.interpretSuggestedQuestion(u.content))}),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()}if(2&i){var r=e.$implicit,o=n.\u0275\u0275nextContext(4);n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction7(3,No,null==o.suggestionsPresentation?null:o.suggestionsPresentation.backgroundColor,null==o.suggestionsPresentation||null==o.suggestionsPresentation.cardFontProperties?null:o.suggestionsPresentation.cardFontProperties.color,(null==o.suggestionsPresentation||null==o.suggestionsPresentation.cardFontProperties||null==o.suggestionsPresentation.cardFontProperties.size?null:o.suggestionsPresentation.cardFontProperties.size.px)+"px",null==o.suggestionsPresentation||null==o.suggestionsPresentation.cardFontProperties?null:o.suggestionsPresentation.cardFontProperties.family,null==o.suggestionsPresentation||null==o.suggestionsPresentation.cardFontProperties?null:o.suggestionsPresentation.cardFontProperties.weight,null==o.suggestionsPresentation||null==o.suggestionsPresentation.cardFontProperties?null:o.suggestionsPresentation.cardFontProperties.style,null==o.suggestionsPresentation||null==o.suggestionsPresentation.cardFontProperties?null:o.suggestionsPresentation.cardFontProperties.textDecoration)),n.\u0275\u0275attribute("aria-label",r.accessibilityLabel),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",r.content," ")}}var zo=function(e,t,r,o,a,s){return{color:e,"font-size":t,"font-family":r,"font-weight":o,"font-style":a,"text-decoration":s}},jo=function(e){return{"aria-label":e}};function Ho(i,e){if(1&i){var t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",40),n.\u0275\u0275element(1,"div",41),n.\u0275\u0275elementStart(2,"div",42),n.\u0275\u0275template(3,qo,2,11,"div",43),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"div",44),n.\u0275\u0275listener("accessible-click",function(){n.\u0275\u0275restoreView(t);var a=n.\u0275\u0275nextContext(3);return n.\u0275\u0275resetView(a.toggleShowAllSuggestions())}),n.\u0275\u0275elementEnd()()}if(2&i){var r=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction6(4,zo,null==r.suggestionsPresentation||null==r.suggestionsPresentation.headerFontProperties?null:r.suggestionsPresentation.headerFontProperties.color,(null==r.suggestionsPresentation||null==r.suggestionsPresentation.headerFontProperties||null==r.suggestionsPresentation.headerFontProperties.size?null:r.suggestionsPresentation.headerFontProperties.size.px)+"px",null==r.suggestionsPresentation||null==r.suggestionsPresentation.headerFontProperties?null:r.suggestionsPresentation.headerFontProperties.family,null==r.suggestionsPresentation||null==r.suggestionsPresentation.headerFontProperties?null:r.suggestionsPresentation.headerFontProperties.weight,null==r.suggestionsPresentation||null==r.suggestionsPresentation.headerFontProperties?null:r.suggestionsPresentation.headerFontProperties.style,null==r.suggestionsPresentation||null==r.suggestionsPresentation.headerFontProperties?null:r.suggestionsPresentation.headerFontProperties.textDecoration)),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngForOf",r.viewModel.result.suggestions),n.\u0275\u0275advance(1),n.\u0275\u0275propertyInterpolate("localize",r.viewModel.result.showAllSuggestions?"Visual_Qna_SuggestionsLess":"Visual_Qna_SuggestionsAll"),n.\u0275\u0275property("localizeAttr",n.\u0275\u0275pureFunction1(11,jo,r.viewModel.result.showAllSuggestions?"Visual_Qna_SuggestionsLess":"Visual_Qna_SuggestionsAll"))}}var Ui=function(e,t,r,o,a){return{color:e,"font-family":t,"font-weight":r,"font-style":o,"text-decoration":a}};function Go(i,e){if(1&i&&(n.\u0275\u0275elementStart(0,"span",46),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&i){var t=n.\u0275\u0275nextContext(3);n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction5(2,Ui,null==t.inputPresentation||null==t.inputPresentation.restatementFontProperties?null:t.inputPresentation.restatementFontProperties.color,null==t.inputPresentation||null==t.inputPresentation.restatementFontProperties?null:t.inputPresentation.restatementFontProperties.family,null==t.suggestionsPresentation||null==t.suggestionsPresentation.restatementFontProperties?null:t.suggestionsPresentation.restatementFontProperties.weight,null==t.suggestionsPresentation||null==t.suggestionsPresentation.restatementFontProperties?null:t.suggestionsPresentation.restatementFontProperties.style,null==t.suggestionsPresentation||null==t.suggestionsPresentation.restatementFontProperties?null:t.suggestionsPresentation.restatementFontProperties.textDecoration)),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",t.viewModel.result.failedToLoadSuggestionsMessage," ")}}function $o(i,e){if(1&i&&(n.\u0275\u0275elementStart(0,"div",37),n.\u0275\u0275template(1,Ho,5,13,"div",38),n.\u0275\u0275template(2,Go,2,8,"span",39),n.\u0275\u0275elementEnd()),2&i){var t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.viewModel.result.suggestions.length>0&&t.suggestionsPresentation.show),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.viewModel.result.failedToLoadSuggestionsMessage&&t.suggestionsPresentation.show)}}function Wo(i,e){1&i&&n.\u0275\u0275element(0,"spinner",52),2&i&&n.\u0275\u0275property("delay",0)}function Jo(i,e){if(1&i&&(n.\u0275\u0275elementStart(0,"div",49),n.\u0275\u0275template(1,Wo,1,1,"spinner",50),n.\u0275\u0275element(2,"single-visual-host",51),n.\u0275\u0275elementEnd()),2&i){var t=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.viewModel.result.isLoading),n.\u0275\u0275advance(1),n.\u0275\u0275property("visual",t.viewModel.result.visual)("visualViewport",t.viewModel.viewport)("themeCollection",t.viewModel.themeCollection)("config",t.core.singleVisualHostConfig)}}function Ko(i,e){if(1&i&&(n.\u0275\u0275elementStart(0,"div",47),n.\u0275\u0275template(1,Jo,3,5,"div",48),n.\u0275\u0275elementEnd()),2&i){var t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.viewModel.result.visual&&t.core.singleVisualHostConfig)}}function Zo(i,e){if(1&i){var t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"a",57),n.\u0275\u0275listener("accessible-click",function(){n.\u0275\u0275restoreView(t);var o=n.\u0275\u0275nextContext(3);return n.\u0275\u0275resetView(o.launchFeedbackDialog(-1,!1))}),n.\u0275\u0275element(1,"span",58),n.\u0275\u0275elementEnd()}}function Xo(i,e){if(1&i&&(n.\u0275\u0275elementStart(0,"div",53)(1,"div",54)(2,"div")(3,"span",55),n.\u0275\u0275text(4),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(5,Zo,2,0,"a",56),n.\u0275\u0275elementEnd()()()),2&i){var t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction5(3,Ui,null==t.inputPresentation||null==t.inputPresentation.restatementFontProperties?null:t.inputPresentation.restatementFontProperties.color,null==t.inputPresentation||null==t.inputPresentation.restatementFontProperties?null:t.inputPresentation.restatementFontProperties.family,null==t.suggestionsPresentation||null==t.suggestionsPresentation.restatementFontProperties?null:t.suggestionsPresentation.restatementFontProperties.weight,null==t.suggestionsPresentation||null==t.suggestionsPresentation.restatementFontProperties?null:t.suggestionsPresentation.restatementFontProperties.style,null==t.suggestionsPresentation||null==t.suggestionsPresentation.restatementFontProperties?null:t.suggestionsPresentation.restatementFontProperties.textDecoration)),n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate(t.viewModel.result.message),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.allowFeedback&&t.core.shouldShowdoNotUnderstandMessageFeedbackLink())}}function Yo(i,e){1&i&&n.\u0275\u0275elementContainer(0)}function ea(i,e){if(1&i&&(n.\u0275\u0275elementStart(0,"div",59),n.\u0275\u0275template(1,Yo,1,0,"ng-container",60),n.\u0275\u0275elementEnd()),2&i){n.\u0275\u0275nextContext();var t=n.\u0275\u0275reference(7);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngTemplateOutlet",t)}}function ta(i,e){1&i&&n.\u0275\u0275elementContainer(0)}function na(i,e){if(1&i&&(n.\u0275\u0275elementStart(0,"div",59),n.\u0275\u0275template(1,ta,1,0,"ng-container",60),n.\u0275\u0275elementEnd()),2&i){n.\u0275\u0275nextContext();var t=n.\u0275\u0275reference(7);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngTemplateOutlet",t)}}function ia(i,e){if(1&i){var t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"a",57),n.\u0275\u0275listener("accessible-click",function(){n.\u0275\u0275restoreView(t);var o=n.\u0275\u0275nextContext(3);return n.\u0275\u0275resetView(o.launchFeedbackDialog(-1,!1))}),n.\u0275\u0275element(1,"span",58),n.\u0275\u0275elementEnd()}}function ra(i,e){if(1&i){var t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"canvas-visual-error-overlay",12),n.\u0275\u0275listener("showErrorDetails",function(){n.\u0275\u0275restoreView(t);var a=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(a.showResultErrorDetails())}),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(1,ia,2,0,"a",56)}if(2&i){var r=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("errorInfo",r.viewModel.result)("viewport",r.viewModel.viewport),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.allowFeedback&&r.core.shouldShowdoNotUnderstandMessageFeedbackLink())}}function oa(i,e){if(1&i&&(n.\u0275\u0275elementContainerStart(0,31),n.\u0275\u0275template(1,$o,3,2,"div",32),n.\u0275\u0275template(2,Ko,2,1,"div",33),n.\u0275\u0275template(3,Xo,6,9,"div",34),n.\u0275\u0275template(4,ea,2,1,"div",35),n.\u0275\u0275template(5,na,2,1,"div",35),n.\u0275\u0275template(6,ra,2,3,"ng-template",null,36,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementContainerEnd()),2&i){var t=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngSwitch",t.viewModel.result.type),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngSwitchCase","Suggestions"),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngSwitchCase","Visual"),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngSwitchCase","DoNotUnderstand"),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngSwitchCase","Error"),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngSwitchCase","QueryError")}}function aa(i,e){if(1&i&&(n.\u0275\u0275elementStart(0,"div",64),n.\u0275\u0275element(1,"qna-feedback",65),n.\u0275\u0275elementEnd()),2&i){var t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("fontColor",null==t.inputPresentation||null==t.inputPresentation.restatementFontProperties?null:t.inputPresentation.restatementFontProperties.color)}}function sa(i,e){1&i&&(n.\u0275\u0275elementStart(0,"div",66),n.\u0275\u0275element(1,"span",67)(2,"a",68),n.\u0275\u0275elementEnd())}function ua(i,e){if(1&i&&(n.\u0275\u0275elementStart(0,"div",61),n.\u0275\u0275template(1,aa,2,1,"div",62),n.\u0275\u0275template(2,sa,3,0,"div",63),n.\u0275\u0275pipe(3,"async"),n.\u0275\u0275elementEnd()),2&i){var t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.allowFeedback&&t.core.showFeedbackForCurrentQuestion()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(3,2,t.isCopilotSynonymsEnabled$)&&"Visual"===(null==t.viewModel.result?null:t.viewModel.result.type))}}var la=function(e,t){return{contentReady:e,suggestionContent:t}},ii=function(){function i(e,t,r,o,a,s,u,c,l,p){this.dataSources=e,this.explorationNavigation=t,this.featureSwitchService=r,this.lazyScoped=o,this.viewModeState=a,this.telemetryService=s,this.core=u,this.highContrastCssGenerationService=c,this.settingsService=l,this.qnaToolingDialogLauncher=p,this.inputBoxFocused=new n.EventEmitter,this.utteranceUpdated=new n.EventEmitter,this.convertVisual=new n.EventEmitter,this.destroy$=new nt.xQ,this.viewModel=this.core.viewModel,f.fF.assert(function(){return!(0,N.rO)()},"Expect qna.component never get created if it is in IE browser."),this.highContrastCssGenerationService.addRule('html[data-focus-source="key"] .themeableElement .qnaVisual *:focus',"{ outline: 2px solid @selectedBackgroundColor; }")}return Object.defineProperty(i.prototype,"inputComponent",{set:function(t){var r=this;this.qnaInputComponent=t,this.core.setGetQnaInputComponentFunc(function(){return r.qnaInputComponent})},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"_bannerMessageElementRef",{set:function(t){this.bannerMainMessageTextContainerElementRef=t,t&&this.updateBannerMainMessageTooltipConfig()},enumerable:!1,configurable:!0}),i.prototype.ngOnInit=function(){return(0,v.mG)(this,void 0,void 0,function(){var e,t,r,o,s,u=this;return(0,v.Jh)(this,function(c){switch(c.label){case 0:return e=0!==this.viewModeState.getMode(),this.initializedTelemetryEvent=this.telemetryService.logEvent(Je.dZ,{isAuthoring:e,entryPoint:this.entryPoint}),f.fF.assertValue(this.config,"Expect this.config to be defined"),t=_.cloneDeep(this.config),t=_.merge({},t,{hostHandlesUndo:!0}),[4,this.core.initialize(this.models,t,this.hostServices,this.entryPoint,this.utteranceUpdated,this.convertVisual,this.initializedTelemetryEvent,this.contentContainerElement,void 0)];case 1:return c.sent(),this.isCopilotSynonymsEnabled$=this.featureSwitchService.featureSwitches$.pipe((0,ne.U)(function(l){return l.qnaImproveLsdlCopilot})),r=this,[4,this.core.shouldShowThumbsUpDown()];case 2:return r.allowFeedback=c.sent(),o=this,[4,this.core.allowTooling()];case 3:return o.allowTooling=c.sent(),this.allowTooling?[4,this.lazyScoped.get("improveLsdlBackgroundService")]:[3,7];case 4:return[4,c.sent().tryImproveLsdl("qnaVisual")];case 5:return c.sent(),s=this,[4,this.lazyScoped.get("qnaBannerService")];case 6:s.qnaBannerService=c.sent(),this.bannerContent$=this.qnaBannerService.getBannerContent("Visual"),c.label=7;case 7:return this.showLegacyBanner=this.shouldShowBanner(),this.settingsService.settingChanged$.pipe((0,W.R)(this.destroy$)).subscribe(function(l){"ShowQnaVisualBanner"===l&&(u.showLegacyBanner=u.shouldShowBanner())}),[2]}})})},i.prototype.ngAfterViewInit=function(){this.core.updateViewport()},i.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},i.prototype.onBannerDismiss=function(e){var t;null===(t=this.qnaBannerService)||void 0===t||t.dismissBanner("Visual",e)},i.prototype.update=function(e){(0,pt.yE)(e.type,Bt.EP.Resize)&&this.updateBannerMainMessageTooltipConfig(),this.core.update(e)},i.prototype.enumerateObjectInstances=function(e){return this.core.enumerateObjectInstances(e)},i.prototype.getFormattingModel=function(){return this.core.getFormattingModel()},i.prototype.focus=function(){if(this.qnaInputComponent)return this.qnaInputComponent.focus(),!0},i.prototype.onInputBoxFocused=function(e){this.inputBoxFocused.emit(e)},i.prototype.getCurrentVisual=function(){return this.core.getCurrentVisual()},i.prototype.convertVisualClicked=function(){this.core.convertVisualClicked()},i.prototype.dismissBanner=function(){this.settingsService.setShowQnaVisualBanner(!1),this.showLegacyBanner=!1},i.prototype.performBannerMainAction=function(){return(0,v.mG)(this,void 0,void 0,function(){var e=this;return(0,v.Jh)(this,function(t){switch(t.label){case 0:return f.fF.assert(function(){return e.showLegacyBanner},"This should only be called when showBanner is true"),[4,this.showTooling("VisualBanner","bulkEditing")];case 1:return t.sent(),[2]}})})},Object.defineProperty(i.prototype,"inputPresentation",{get:function(){if(this.viewModel)return this.viewModel.presentationViewModel.inputBox},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"suggestionsPresentation",{get:function(){if(this.viewModel)return this.viewModel.presentationViewModel.suggestions},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"displayedRestatement",{get:function(){if("Ready"!==this.viewModel.state)return null;var t=this.viewModel.result;return t?(0,S.mn)(t)||(0,S.fU)(t)||(0,S.lP)(t)?t.restatement:void 0:null},enumerable:!1,configurable:!0}),i.prototype.showTooling=function(e,t){return(0,v.mG)(this,void 0,void 0,function(){var r,o,a=this;return(0,v.Jh)(this,function(s){switch(s.label){case 0:return f.fF.assert(function(){return a.allowTooling},"this should be called only when this.allowTooling is true"),this.allowTooling?(r=this.dataSources.get(),o=this.explorationNavigation.getCurrentExploration(),[4,this.qnaToolingDialogLauncher.showToolingDialog({dataSources:r,exploration:o,entryPoint:e,entryContentType:t,entryQuestion:this.core.getCurrentUtteranceTrimmed()})]):[2];case 1:return s.sent(),[2]}})})},i.prototype.interpretSuggestedQuestion=function(e){this.core.interpretSuggestedQuestion(e)},i.prototype.toggleShowAllSuggestions=function(){this.core.toggleShowAllSuggestions()},i.prototype.showQnaVisualErrorDetails=function(){this.core.showQnaVisualErrorDetails()},i.prototype.showResultErrorDetails=function(){this.core.showResultErrorDetails()},i.prototype.launchFeedbackDialog=function(e,t){this.core.launchFeedbackDialog(e,t)},i.prototype.shouldShowBanner=function(){var e=this;return f.fF.assert(function(){return null!=e.allowTooling},"this.allowTooling value should already been set to be true or false"),this.allowTooling&&this.settingsService.getShowQnaVisualBanner()},i.prototype.updateBannerMainMessageTooltipConfig=function(){if(this.bannerMainMessageTextContainerElementRef){var e=this.bannerMainMessageTextContainerElementRef.nativeElement,t=e&&e.offsetWidth<e.scrollWidth;!this.bannerMainMessage!=!t&&(this.bannerMainMessage=t?e.textContent:null)}},i.\u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(D.D),n.\u0275\u0275directiveInject(w.z),n.\u0275\u0275directiveInject(b.vZ),n.\u0275\u0275directiveInject(Oi.H),n.\u0275\u0275directiveInject(Bi.kc),n.\u0275\u0275directiveInject(oe.y0),n.\u0275\u0275directiveInject(M.D),n.\u0275\u0275directiveInject(_t.g),n.\u0275\u0275directiveInject(oo.g),n.\u0275\u0275directiveInject(wi.b,8))},i.\u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["qna-host"]],viewQuery:function(t,r){if(1&t&&(n.\u0275\u0275viewQuery(Sn,5),n.\u0275\u0275viewQuery(_o,5,n.ElementRef),n.\u0275\u0275viewQuery(Po,7,n.ElementRef)),2&t){var o=void 0;n.\u0275\u0275queryRefresh(o=n.\u0275\u0275loadQuery())&&(r.inputComponent=o.first),n.\u0275\u0275queryRefresh(o=n.\u0275\u0275loadQuery())&&(r._bannerMessageElementRef=o.first),n.\u0275\u0275queryRefresh(o=n.\u0275\u0275loadQuery())&&(r.contentContainerElement=o.first)}},inputs:{models:"models",config:"config",hostServices:"hostServices",entryPoint:"entryPoint"},outputs:{inputBoxFocused:"inputBoxFocused",utteranceUpdated:"utteranceUpdated",convertVisual:"convertVisual"},features:[n.\u0275\u0275ProvidersFeature([yt.y,Le.Q,Mi.Z,M.D])],decls:9,vars:11,consts:[[1,"qnaVisual",3,"ngSwitch"],["class","loadingContainer",4,"ngSwitchCase"],[4,"ngSwitchCase"],["class","glyphicon icon glyph-small pbi-glyph-info restatementIcon","tabindex","0",3,"ngStyle","pbiTooltip",4,"ngIf"],[1,"content",3,"ngClass"],["contentContainer",""],[3,"ngSwitch",4,"ngIf"],["class","footer",4,"ngIf"],[1,"loadingContainer"],[1,"loading"],["size","large",3,"delay"],["localize","Qna_InitialLoading"],[3,"errorInfo","viewport","showErrorDetails"],[4,"ngIf","ngIfElse"],["legacyBanner",""],[1,"header",3,"ngClass"],["drag-resize-disabled","true","tabindex","-1",1,"inputBox",3,"entryPoint","qnaSupportedScopes","interpretListener","presentationArgs","configs","initialUtterance","initialUtteranceFromSaved","inputBoxFocused"],["class","glyphicon icon glyph-small pbi-glyph-dependencyadd qnaAction","role","button",3,"ngClass","pbiTooltip","localizeAttr","ngStyle","accessible-click",4,"ngIf"],["class","glyphicon icon glyph-small pbi-glyph-settings qnaAction","role","button",3,"pbiTooltip","localizeAttr","ngStyle","accessible-click",4,"ngIf"],[4,"ngIf"],[3,"bannerContent","onDismiss"],["class","banner",4,"ngIf"],[1,"banner"],[1,"glyphicon","glyph-small","pbi-glyph-info"],[1,"mainMessage",3,"pbiTooltip","localize"],["bannerMainMessageTextContainer",""],["mat-button","",1,"mainAction",3,"localize","accessible-click"],["mat-button","",1,"dismiss","glyphicon","pbi-glyph-close","glyph-mini",3,"pbiTooltip","localizeAttr","accessible-click"],["role","button",1,"glyphicon","icon","glyph-small","pbi-glyph-dependencyadd","qnaAction",3,"ngClass","pbiTooltip","localizeAttr","ngStyle","accessible-click"],["role","button",1,"glyphicon","icon","glyph-small","pbi-glyph-settings","qnaAction",3,"pbiTooltip","localizeAttr","ngStyle","accessible-click"],["tabindex","0",1,"glyphicon","icon","glyph-small","pbi-glyph-info","restatementIcon",3,"ngStyle","pbiTooltip"],[3,"ngSwitch"],["class","suggestionsContainer",4,"ngSwitchCase"],["class","visualResultContainer",4,"ngSwitchCase"],["class","doNotUnderstandContainer",4,"ngSwitchCase"],["class","resultErrorContainer",4,"ngSwitchCase"],["errorOverlayTemplate",""],[1,"suggestionsContainer"],["class","suggestions",4,"ngIf"],["class","suggestionsWarning",3,"ngStyle",4,"ngIf"],[1,"suggestions"],["localize","Visual_Qna_SuggestionsHeader",1,"suggestionTitle",3,"ngStyle"],["data-testid","qna-suggestions",1,"suggestionsList"],["class","suggestion themeableElement","tabindex","0","role","button","data-testid","qna-suggestion",3,"ngStyle","accessible-click",4,"ngFor","ngForOf"],["tabindex","0","role","button","data-testid","qna-show-all-suggestions-btn",1,"showAllToggle",3,"localize","localizeAttr","accessible-click"],["tabindex","0","role","button","data-testid","qna-suggestion",1,"suggestion","themeableElement",3,"ngStyle","accessible-click"],[1,"suggestionsWarning",3,"ngStyle"],[1,"visualResultContainer"],["class","singleVisualHostContainer",4,"ngIf"],[1,"singleVisualHostContainer"],["class","loadingSpinner","size","small",3,"delay",4,"ngIf"],["tabindex","0","focus-nav-mode","Hierarchy","data-testid","qna-visual",3,"visual","visualViewport","themeCollection","config"],["size","small",1,"loadingSpinner",3,"delay"],[1,"doNotUnderstandContainer"],[1,"showDoNotUnderstandMessage",3,"ngStyle"],[1,"message"],["class","tellUsMore","href","javascript:void(0);",3,"accessible-click",4,"ngIf"],["href","javascript:void(0);",1,"tellUsMore",3,"accessible-click"],["localize","Qna_Feedback_TellUsMore"],[1,"resultErrorContainer"],[4,"ngTemplateOutlet"],[1,"footer"],["class","feedback",4,"ngIf"],["class","disclaimer",4,"ngIf"],[1,"feedback"],[3,"fontColor"],[1,"disclaimer"],["localize","Copilot_Disclaimer_Short"],["href","https://go.microsoft.com/fwlink/?linkid=2243166","localize","CopilotInline_PreviewLink","target","_blank",1,"pbi-external-link","fluentTheme-sm-reg"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275template(1,So,4,1,"div",1),n.\u0275\u0275template(2,Ao,2,2,"div",2),n.\u0275\u0275template(3,ko,9,16,"ng-container",2),n.\u0275\u0275template(4,Qo,1,5,"i",3),n.\u0275\u0275elementStart(5,"div",4,5),n.\u0275\u0275template(7,oa,8,6,"ng-container",6),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(8,ua,4,4,"div",7),n.\u0275\u0275elementEnd()),2&t&&(n.\u0275\u0275property("ngSwitch",r.viewModel.state),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngSwitchCase","Loading"),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngSwitchCase","Error"),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngSwitchCase","Ready"),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.displayedRestatement),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction2(8,la,"Ready"===r.viewModel.state,r.viewModel.result&&"Suggestions"===r.viewModel.result.type)),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",r.viewModel.result),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf","Ready"===r.viewModel.state))},dependencies:[y.NgClass,y.NgForOf,y.NgIf,y.NgTemplateOutlet,y.NgStyle,y.NgSwitch,y.NgSwitchCase,Pt.X,Z.b,ao.O,Ti.f,so.v,ht.t,uo.V,Sn,ti,ni,y.AsyncPipe,Eo.F],styles:['.qnaVisual[_ngcontent-%COMP%]{font-size:12px;height:100%;display:flex;flex-direction:column}  html[data-focus-source=key] .qnaVisual:focus,   html[data-focus-source=key] .qnaVisual *:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color)}  html[data-focus-source=mouse] .qnaVisual:focus,   html[data-focus-source=mouse] .qnaVisual *:focus,   html[data-focus-source=program] .qnaVisual:focus,   html[data-focus-source=program] .qnaVisual *:focus{outline:none}.qnaVisual[_ngcontent-%COMP%]     .powerbi-spinner{position:unset!important;margin-right:12px}.qnaVisual[_ngcontent-%COMP%]   .pbi-glyph-info[_ngcontent-%COMP%]:before{content:"\\e946"!important}.qnaVisual[_ngcontent-%COMP%]   .loadingContainer[_ngcontent-%COMP%]{display:flex;flex:1;align-items:center;justify-content:center}.qnaVisual[_ngcontent-%COMP%]   .loadingContainer[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.qnaVisual[_ngcontent-%COMP%]   .loadingContainer[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;text-align:center;margin:12px}.qnaVisual[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]{display:flex;flex-direction:row;background-color:var(--gray-20, #F3F2F1);padding:0 12px;margin:8px 4px 4px;color:var(--gray-160, #323130);align-items:center}.qnaVisual[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%]{margin:8px 0}.qnaVisual[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .mainMessage[_ngcontent-%COMP%]{margin:4px 8px;flex:1;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.qnaVisual[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .mainAction[_ngcontent-%COMP%]{margin:0;padding:2px 20px;background:var(--white-color, #FFF);font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--md-font-size, 14px);font-weight:var(--font-weight-semi-bold, 600);border:1px solid var(--gray-110, #8A8886);box-sizing:border-box;border-radius:2px;height:fit-content}.qnaVisual[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .glyphicon.dismiss[_ngcontent-%COMP%]{padding:0}html:not([dir="rtl"])[_nghost-%COMP%]   .qnaVisual[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .glyphicon.dismiss[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .qnaVisual[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .glyphicon.dismiss[_ngcontent-%COMP%]{margin:0 0 0 12px}html[dir="rtl"][_nghost-%COMP%]   .qnaVisual[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .glyphicon.dismiss[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .qnaVisual[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .glyphicon.dismiss[_ngcontent-%COMP%]{margin:0 12px 0 0}.qnaVisual[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;flex-direction:row;min-height:44px;position:relative;margin-top:16px}.qnaVisual[_ngcontent-%COMP%]   .header.hasBanner[_ngcontent-%COMP%]{margin-top:0}.qnaVisual[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .inputBox[_ngcontent-%COMP%]{flex:1;margin:4px}.qnaVisual[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .qnaAction[_ngcontent-%COMP%]{margin:12px 4px 0;cursor:pointer;height:16px}.qnaVisual[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .qnaAction.disabled[_ngcontent-%COMP%]{color:var(--fluent-theme-neutral-tertiary-color, #A19F9D)!important;cursor:default}.qnaVisual[_ngcontent-%COMP%]   .restatementIcon[_ngcontent-%COMP%]{align-self:flex-end;cursor:default}.qnaVisual[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin:4px;flex:0}.qnaVisual[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .suggestions[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1}.qnaVisual[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .suggestions[_ngcontent-%COMP%]   .suggestionTitle[_ngcontent-%COMP%]{margin:1px 1px 12px 4px}.qnaVisual[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .suggestions[_ngcontent-%COMP%]   .suggestionsList[_ngcontent-%COMP%]{padding:0 4px;display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));grid-template-rows:repeat(auto-fit,minmax(32px,1fr))}.qnaVisual[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .suggestions[_ngcontent-%COMP%]   .suggestionsList[_ngcontent-%COMP%]   .suggestion[_ngcontent-%COMP%]{font-size:14px;padding:12px 20px;border-radius:2px;box-shadow:var(--fluent-shadow-depth4, 0px 0px 2px var(--colorNeutralShadowAmbient), 0px 2px 4px var(--colorNeutralShadowKey));border:1px solid transparent;box-sizing:border-box;cursor:pointer;margin:0 12px 12px 0}.qnaVisual[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .suggestions[_ngcontent-%COMP%]   .showAllToggle[_ngcontent-%COMP%]{font-size:14px;color:var(--fluent-theme-link-color, #0078D4);margin:12px 4px;cursor:pointer;align-self:flex-end}.qnaVisual[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .visualResultContainer[_ngcontent-%COMP%]{position:relative;height:100%}.qnaVisual[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .visualResultContainer[_ngcontent-%COMP%]   .singleVisualHostContainer[_ngcontent-%COMP%]{height:100%}.qnaVisual[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .visualResultContainer[_ngcontent-%COMP%]   .singleVisualHostContainer[_ngcontent-%COMP%]   spinner[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%}.qnaVisual[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .visualResultContainer[_ngcontent-%COMP%]   .singleVisualHostContainer[_ngcontent-%COMP%]   single-visual-host[_ngcontent-%COMP%]{position:relative;display:block;height:100%;background-color:transparent}.qnaVisual[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .visualResultContainer[_ngcontent-%COMP%]   .singleVisualHostContainer[_ngcontent-%COMP%]   single-visual-host[_ngcontent-%COMP%]     .visual{height:100%}.qnaVisual[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .doNotUnderstandContainer[_ngcontent-%COMP%]{display:flex;justify-content:center;height:100%}.qnaVisual[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .doNotUnderstandContainer[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{margin-right:4px}.qnaVisual[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .doNotUnderstandContainer[_ngcontent-%COMP%]   .showDoNotUnderstandMessage[_ngcontent-%COMP%], .qnaVisual[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .suggestionsContainer[_ngcontent-%COMP%]   .suggestionsWarning[_ngcontent-%COMP%]{display:flex;text-align:center;align-items:center;font-size:14px;max-width:450px;padding:20px;width:100%;box-sizing:border-box}.qnaVisual[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .resultErrorContainer[_ngcontent-%COMP%]{height:100%;position:relative;background-color:var(--neutral-lighter-color, #F4F4F4);display:flex;flex-direction:column;justify-content:center}.qnaVisual[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .resultErrorContainer[_ngcontent-%COMP%]   canvas-visual-error-overlay[_ngcontent-%COMP%]{position:relative;height:auto}.qnaVisual[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .resultErrorContainer[_ngcontent-%COMP%]   .tellUsMore[_ngcontent-%COMP%]{text-align:center;font-size:14px}.qnaVisual[_ngcontent-%COMP%]   .content.contentReady[_ngcontent-%COMP%]{flex:1;overflow:hidden}.qnaVisual[_ngcontent-%COMP%]   .content.suggestionContent[_ngcontent-%COMP%]{overflow-y:auto}.qnaVisual[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .feedback[_ngcontent-%COMP%]{flex:0;padding-top:2px}.qnaVisual[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .feedback[_ngcontent-%COMP%]   qna-feedback[_ngcontent-%COMP%]{float:right}']}),i}(),Li=d(8898);new n.InjectionToken("DesktopHostInjectionToken"),new n.InjectionToken("PromiseStoreService");var ki=function(){function i(e){this.eventAggregationService=e,this.eventHandlers={}}return i.prototype.subscribe=function(e,t){var r;if(this.eventHandlers[e])throw new Error("Already subscribed to ".concat(e));null===(r=this.eventAggregationService)||void 0===r||r.subscribe(e,t),this.eventHandlers[e]=t},i.prototype.unsubscribeAll=function(){var e;for(var t in this.eventHandlers)null===(e=this.eventAggregationService)||void 0===e||e.unsubscribe(t,this.eventHandlers[t])},i}(),fa=d(14463),tn=d(8590),Ri=d(3579),Qi=d(60661),ma=d(91615),va=d(2142),Ca=d(32640),Da=d(82755),Ni=d(5265),ya=d(99917),Ea=d(4541),_a=d(69838),Pa=d(64546),bn=d(40713),ri=d(91592),Sa=d(11494),qi=d(48145),Aa=d(94717),Fa=d(39631),ba=d(10861),Ia=d(81213),xa=d(29866),wa=d(72262),Ma=d(28107),Ba=d(67660),Oa=d(35756),Ta=["qnaVisual"],Va=function(){return{"aria-label":"Qna_MessageDialog_EnableQnaButtonText"}};function Ua(i,e){if(1&i){var t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",11),n.\u0275\u0275listener("accessible-click",function(){n.\u0275\u0275restoreView(t);var o=n.\u0275\u0275nextContext(4);return n.\u0275\u0275resetView(o.enableQna())}),n.\u0275\u0275elementEnd()}2&i&&n.\u0275\u0275property("localizeAttr",n.\u0275\u0275pureFunction0(2,Va))("localize","Qna_MessageDialog_EnableQnaButtonText")}function La(i,e){if(1&i&&(n.\u0275\u0275elementStart(0,"div",7),n.\u0275\u0275element(1,"div",8),n.\u0275\u0275elementStart(2,"span",9),n.\u0275\u0275text(3),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(4,Ua,1,3,"button",10),n.\u0275\u0275elementEnd()),2&i){var t=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(2),n.\u0275\u0275attribute("aria-label",t.disallowQnaDetails.notEnabledDetails.message),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(t.disallowQnaDetails.notEnabledDetails.message),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.disallowQnaDetails.notEnabledDetails.canEnable)}}function ka(i,e){if(1&i){var t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"canvas-visual-error-overlay",12),n.\u0275\u0275listener("showErrorDetails",function(){n.\u0275\u0275restoreView(t);var a=n.\u0275\u0275nextContext(3);return n.\u0275\u0275resetView(a.showVisualErrorDetails())}),n.\u0275\u0275elementEnd()}if(2&i){var r=n.\u0275\u0275nextContext(3);n.\u0275\u0275property("errorInfo",r.disallowQnaDetails.otherReasonErrorDetails)("viewport",r.currentViewport)}}function Ra(i,e){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,La,5,3,"div",5),n.\u0275\u0275template(2,ka,1,2,"canvas-visual-error-overlay",6),n.\u0275\u0275elementContainerEnd()),2&i){var t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf","qnaNotEnabled"===t.disallowQnaDetails.reason),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf","qnaNotEnabled"!==t.disallowQnaDetails.reason)}}function Qa(i,e){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,Ra,3,2,"ng-container",4),n.\u0275\u0275elementContainerEnd()),2&i){var t=n.\u0275\u0275nextContext(),r=n.\u0275\u0275reference(4);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.disallowQna)("ngIfElse",r)}}function Na(i,e){if(1&i){var t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",13)(1,"qna-host",14,15),n.\u0275\u0275listener("utteranceUpdated",function(a){n.\u0275\u0275restoreView(t);var s=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(s.utteranceUpdated(a))})("convertVisual",function(a){n.\u0275\u0275restoreView(t);var s=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(s.convertVisual(a))})("inputBoxFocused",function(a){n.\u0275\u0275restoreView(t);var s=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(s.onInputBoxFocused(a))}),n.\u0275\u0275elementEnd()()}if(2&i){var r=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("config",r.config)("models",r.models)("hostServices",r.hostServices)("entryPoint",r.entryPoint)}}var qa=function(e,t){return{hasDisallowQnaContent:e,customPadding:t}},zi="hiddenProperties",ji="savedUtterance",Hi=function(){function i(e,t,r,o,a,s,u,c,l,p,g,m,E,P,F,se,Pe,be,ct,Tt,Dt,On){var yi=this;this.changeDetectorRef=e,this.conceptualSchemaProxy=t,this.dataSources=r,this.errorService=o,this.eventBridge=a,this.explorationCapabilitiesService=s,this.explorationNavigation=u,this.filterGenerator=c,this.lazyProvider=l,this.localizationService=p,this.pauseQueriesService=g,this.visualPlugin=m,this.featureSwitchService=E,this.selection=P,this.telemetryService=F,this.themeService=se,this.viewModeState=Pe,this.visualAuthoring=be,this.visualAuthoringCustomizeOperations=ct,this.promiseFactory=Tt,this.qnaProxyPath=On,this.visualReady=new n.EventEmitter,this.inputBoxFocused=new n.EventEmitter,this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager().subscribe(tn.CCe,function(){return(0,v.mG)(yi,void 0,void 0,function(){return(0,v.Jh)(this,function(_r){switch(_r.label){case 0:return[4,this.onModelChanged()];case 1:return _r.sent(),[2]}})})}),this.subscriptions=new ki(Dt),this.isReportPausedSubscription=this.pauseQueriesService.isReportPaused$().subscribe(function(){yi.visualContainer&&yi.reInitializeComponent()})}return i.prototype.ngOnInit=function(){return(0,v.mG)(this,void 0,void 0,function(){return(0,v.Jh)(this,function(e){return this.reInitializeComponent(),[2]})})},i.prototype.ngOnDestroy=function(){this.subscriptionManager.unsubscribeAll(),this.subscriptions.unsubscribeAll(),this.settingsChangedSubscription&&this.settingsChangedSubscription.unsubscribe(),this.isReportPausedSubscription&&this.isReportPausedSubscription.unsubscribe(),this.visualAuthoringCustomizeOperations.requiresCustomizeConvert(this.visualContainer)&&this.visualAuthoringCustomizeOperations.removeCustomizeFrom(this.visualContainer)},i.prototype.ngDoCheck=function(){var e=this.visualDefinition.viewport;(!this.currentViewport||e.height!==this.currentViewport.height||e.width!==this.currentViewport.width||e.scale!==this.currentViewport.scale)&&(this.currentViewport={width:e.width,height:e.height,scale:e.scale},this.setNewViewport(e),this.qnaHost&&!this.disallowQna&&this.qnaHost.update({type:Bt.EP.Resize,viewport:this.currentViewport}))},i.prototype.init=function(e){var t=this,r=this.extractObjects(this.visualContainer),o=(0,Da.NA)(r,{objectName:zi,propertyName:ji},"");this.config={canEdit:this.getCanEdit(),canShowPods:!1,canShowVisuals:!0,canShowDidYouMean:!0,initialUtterance:o,initialUtteranceFromSaved:!_.isEmpty(o)};var a=_.find(this.dataSources.get(),function(s){return s.type===va.nKy});this.models=[{vsName:a.dsr.vsName,dbName:a.dsr.dbName,qnaSupported:!0,id:a.id}],this.entryPoint="Visual",this.hostServices=e.host,this.isLoading=!1,this.setNewViewport(e.viewport),this.changeDetectorRef.detectChanges(),this.onVisualContainerUpdate(!0),this.visualAuthoringCustomizeOperations.registerCustomizeFrom(this.visualContainer,function(s){return t.customizeConvertFrom(s)})},i.prototype.update=function(e){!(0,pt.yE)(e.type,Bt.EP.Resize)||!this.qnaHost||(this.setNewViewport(e.viewport),this.qnaHost.update({type:Bt.EP.Resize,viewport:e.viewport}))},i.prototype.onViewModeChanged=function(e){this.config.canEdit=this.getCanEdit()},i.prototype.enumerateObjectInstances=function(e){if(this.qnaHost)return this.qnaHost.enumerateObjectInstances(e)},i.prototype.getFormattingModel=function(){if(this.qnaHost)return this.qnaHost.getFormattingModel()},Object.defineProperty(i.prototype,"supportsCustomPadding",{get:function(){var t;return null===(t=this.featureSwitchService)||void 0===t?void 0:t.featureSwitches.vcPadding},enumerable:!1,configurable:!0}),i.prototype.focus=function(){if(this.qnaHost)return this.qnaHost.focus()},i.prototype.utteranceUpdated=function(e){var t;if(null!=e){var r={merge:[{objectName:zi,selector:void 0,properties:(t={},t[ji]=e,t)}]};this.hostServices.persistProperties(r,!0)}},i.prototype.convertVisual=function(e){return(0,v.mG)(this,void 0,void 0,function(){var t,o,a=this;return(0,v.Jh)(this,function(s){switch(s.label){case 0:return t=(0,Ri.s)(e),[4,this.visualAuthoring.convert(this.visualContainer,this.dataSources.get(),t,void 0)];case 1:return s.sent()&&(o=this.selection.getSelectedElements().find(function(u){return u.canvasItem.name===a.visualContainer.name}))&&this.eventBridge.publishToChannel(tn.MEZ,{affectContainer:function(c){return c===o.canvasItem},preventScroll:!0}),[2]}})})},i.prototype.onInputBoxFocused=function(e){this.inputBoxFocused.emit(e)},i.prototype.customizeConvertFrom=function(e){f.fF.assertValue(e,"visualContainer");var t=this.qnaHost&&this.qnaHost.getCurrentVisual();t&&(e.config.singleVisual.query=t.config.singleVisual.query,e.config.singleVisual.visualType=t.config.singleVisual.visualType,e.config.singleVisual.objects=(0,v.pi)((0,v.pi)({},e.config.singleVisual.objects||{}),t.config.singleVisual.objects||{}),e.filters=t.filters,e.config.singleVisual.conversionSourceContext=void 0)},i.prototype.enableQna=function(){var e=this;f.fF.assert(function(){var t,r;return e.disallowQna&&(null===(r=null===(t=e.disallowQnaDetails)||void 0===t?void 0:t.notEnabledDetails)||void 0===r?void 0:r.canEnable)},"Expect this is called only when this.disallowQna && this.disallowQnaDetails.becauseNotEnabledDetails.canEnable is true"),this.qnaSupportabilityService.enableQna()},i.prototype.showVisualErrorDetails=function(){var e=this;f.fF.assert(function(){var t;return e.disallowQna&&!(null===(t=e.disallowQnaDetails)||void 0===t||!t.otherReasonErrorDetails)},"Expect this to be called only when this.disallowQna && this.disallowQnaDetails.becauseOtherReasonErrorDetails is defined"),(0,bn.aZ)(this.disallowQnaDetails.otherReasonErrorDetails,this.errorService,this.localizationService)},i.prototype.reInitializeComponent=function(){return(0,v.mG)(this,void 0,void 0,function(){var e,t,r,o=this;return(0,v.Jh)(this,function(a){switch(a.label){case 0:return this.isLoading=!0,this.visualContainer.filters=void 0,[4,this.ensureQnaSupportabilityService()];case 1:return a.sent(),this.settingsChangedSubscription||(this.settingsChangedSubscription=this.qnaSupportabilityService.qnaSettingsChanged$.subscribe(function(){return o.reInitializeComponent()})),[4,this.checkIsQnaAllowed()];case 2:return a.sent(),this.disallowQna?(this.isLoading=!1,[2]):(this.wasQnaAllowedBefore?this.visualDefinition.visual.destroy():(this.currentViewport=this.visualDefinition.viewport,e=this.visualPlugin.getPlugin(this.visualDefinition.type),this.visualDefinition.visual=(0,Pa.nm)(e,e.create,this.promiseFactory,this.telemetryService,{createQnaVisual:function(){return o}}),this.subscriptionManager.subscribe(tn.jCS,function(s,u){u&&u.affectContainer(o.visualContainer)&&o.onVisualContainerUpdate()}).subscribe(ma.kx,function(){return(0,v.mG)(o,void 0,void 0,function(){return(0,v.Jh)(this,function(s){switch(s.label){case 0:return[4,this.onVisualContainerUpdate()];case 1:return[2,s.sent()]}})})}).subscribe(tn.Tuj,function(){return(0,v.mG)(o,void 0,void 0,function(){return(0,v.Jh)(this,function(s){switch(s.label){case 0:return[4,this.onVisualContainerUpdate()];case 1:return[2,s.sent()]}})})}),this.subscriptions.subscribe("LuciaDomainModelChangedEvent",function(){return o.onVisualContainerUpdate()})),this.wasQnaAllowedBefore=!0,t=(0,bn.Su)(this.explorationNavigation,this.featureSwitchService),r={element:{empty:function(){},get:function(){}},host:this.visualDefinition.hostServices,visualAdapterHostServices:this.visualDefinition.visualAdapterHostServices,style:this.themeService&&this.themeService.getVisualStyle(t),viewport:this.visualDefinition.viewport,animation:{transitionImmediate:!1},featureSwitches:(0,v.pi)({},this.featureSwitchService.featureSwitches)},[2,this.visualDefinition.visual.init(r)])}})})},i.prototype.getCanEdit=function(){return 0!==this.viewModeState.getMode()},i.prototype.onModelChanged=function(){return(0,v.mG)(this,void 0,void 0,function(){return(0,v.Jh)(this,function(e){switch(e.label){case 0:return[4,this.reInitializeComponent()];case 1:return e.sent(),[2]}})})},i.prototype.checkIsQnaAllowed=function(){return(0,v.mG)(this,void 0,void 0,function(){var e,r,o;return(0,v.Jh)(this,function(a){switch(a.label){case 0:if(this.pauseQueriesService.isReportPaused())return this.disallowQna=!0,this.disallowQnaDetails={reason:"qnaNotSupported",otherReasonErrorDetails:Ha(this.localizationService)},[2];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.conceptualSchemaProxy.get(this.dataSources.get())];case 2:return e=a.sent(),[3,4];case 3:return a.sent(),[2];case 4:if(r=this.explorationCapabilitiesService.getCapabilities(),o=(0,ri.H)(r,e,this.qnaSupportabilityService),this.disallowQna=!o.isAllowed,o.isAllowed)return[2];switch(o.disallowedReason){case"featureDisabledInIE":this.disallowQnaDetails={reason:"featureDisabledInIE",otherReasonErrorDetails:(0,bn.ET)(this.localizationService)};break;case"featureDisabledInApp":f.fF.assertFail("Expect the code of generating a qna visual never be called if app doesn't allow qna feature");break;case"noModel":this.disallowQnaDetails={reason:"noModel",otherReasonErrorDetails:za(this.localizationService)};break;case"qnaNotSupported":this.disallowQnaDetails={reason:"qnaNotSupported",otherReasonErrorDetails:ja(this.localizationService)};break;case"qnaNotEnabled":this.disallowQnaDetails={reason:"qnaNotEnabled",notEnabledDetails:{message:this.qnaSupportabilityService.modelHasQnaDisabledMessage,canEnable:this.qnaSupportabilityService.canAnyUserEnableQna()}};break;default:f.fF.assertNever(o.disallowedReason)}return[2]}})})},i.prototype.onVisualContainerUpdate=function(e){return void 0===e&&(e=!1),(0,v.mG)(this,void 0,void 0,function(){var t,r,o,a,s=this;return(0,v.Jh)(this,function(u){switch(u.label){case 0:return this.isLoading?[2]:[4,this.conceptualSchemaProxy.get(this.dataSources.get())];case 1:return t=u.sent(),r=this.filterGenerator.calculateVisualContainerFilter(this.explorationNavigation.getCurrentExploration(),this.explorationNavigation.getCurrentSection(),this.visualContainer,t),o=this.extractObjects(this.visualContainer),a=Bt.EP.Style|Bt.EP.Data,e&&(a|=Bt.EP.Resize),this.qnaHost&&(this.qnaHost.update({type:a,filters:r,objects:o,firstUpdate:e,viewport:this.currentViewport}),this.visualAuthoringCustomizeOperations.registerCustomizeFrom(this.visualContainer,function(c){return s.customizeConvertFrom(c)})),this.eventBridge.publishToChannel(tn.D1A,this.visualContainer),this.visualReady.emit(),[2]}})})},i.prototype.extractObjects=function(e){var t=(0,Qi.GQ)(e);t||(t={}),t=(0,Ni.d9)(t);var r=(0,bn.Su)(this.explorationNavigation,this.featureSwitchService),o=this.themeService.getVisualObjects(r,(0,Ri.s)(e),void 0,Ca.OF.objects,!1);(0,Ni.l7)(t,o);var a=[];for(var s in t)a.push({name:s,properties:t[s][0].properties});var u=(0,Qi.cj)(e,this.visualPlugin),c=u?.objects;if(c){var l=this.themeService.getVisualStyle(r),p=(0,_a.X)(),g=new Ea.Q(this.featureSwitchService.featureSwitches,l);return(0,ya.PJ)(g,p,c,a)}},i.prototype.setNewViewport=function(e){var t=this.qnaVisualElement.nativeElement;$(t).height(e.height),$(t).width(e.width)},i.prototype.ensureQnaSupportabilityService=function(){return(0,v.mG)(this,void 0,void 0,function(){var e;return(0,v.Jh)(this,function(t){switch(t.label){case 0:return this.qnaSupportabilityService?[2]:(e=this,[4,this.lazyProvider.get(this.qnaProxyPath||"@powerbi/Qna/qnaweb.module#QnaWebModule","qnaSupportabilityService")]);case 1:return e.qnaSupportabilityService=t.sent(),[2]}})})},i.\u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(n.ChangeDetectorRef),n.\u0275\u0275directiveInject(C.i),n.\u0275\u0275directiveInject(D.D),n.\u0275\u0275directiveInject(Ia.T),n.\u0275\u0275directiveInject(Sa.J),n.\u0275\u0275directiveInject(qi.U),n.\u0275\u0275directiveInject(w.z),n.\u0275\u0275directiveInject(Aa.r),n.\u0275\u0275directiveInject(A.E),n.\u0275\u0275directiveInject(Qe.o),n.\u0275\u0275directiveInject(Fa.F),n.\u0275\u0275directiveInject(xa.D),n.\u0275\u0275directiveInject(b.vZ),n.\u0275\u0275directiveInject(wa.z),n.\u0275\u0275directiveInject(oe.y0),n.\u0275\u0275directiveInject(Ba.f),n.\u0275\u0275directiveInject(Bi.kc),n.\u0275\u0275directiveInject(ba.$8),n.\u0275\u0275directiveInject(Ma.Q),n.\u0275\u0275directiveInject(fa.t),n.\u0275\u0275directiveInject(Li.x,8),n.\u0275\u0275directiveInject(Jt.n,8))},i.\u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["qna-visual-host"]],viewQuery:function(t,r){if(1&t&&(n.\u0275\u0275viewQuery(Ta,7,n.ElementRef),n.\u0275\u0275viewQuery(Se.Pl,7),n.\u0275\u0275viewQuery(ii,5)),2&t){var o=void 0;n.\u0275\u0275queryRefresh(o=n.\u0275\u0275loadQuery())&&(r.qnaVisualElement=o.first),n.\u0275\u0275queryRefresh(o=n.\u0275\u0275loadQuery())&&(r.portalOutlet=o.first),n.\u0275\u0275queryRefresh(o=n.\u0275\u0275loadQuery())&&(r.qnaHost=o.first)}},inputs:{visualDefinition:"visualDefinition",visualContainer:"visualContainer"},outputs:{visualReady:"visualReady",inputBoxFocused:"inputBoxFocused"},decls:5,vars:6,consts:[["keyboard-shortcuts","ctrl-ArrowRight scoped",1,"visual","visual-qnaVisual",3,"ngClass"],["qnaVisual",""],[4,"ngIf"],["showQna",""],[4,"ngIf","ngIfElse"],["class","qnaNotEnabledContainer",4,"ngIf"],[3,"errorInfo","viewport","showErrorDetails",4,"ngIf"],[1,"qnaNotEnabledContainer"],[1,"glyphicon","pbi-glyph-blocked2","glyph-med"],["tabindex","0",1,"message"],["class","btn primary",3,"localizeAttr","localize","accessible-click",4,"ngIf"],[1,"btn","primary",3,"localizeAttr","localize","accessible-click"],[3,"errorInfo","viewport","showErrorDetails"],[1,"qnaVisualContent"],[3,"config","models","hostServices","entryPoint","utteranceUpdated","convertVisual","inputBoxFocused"],["qnaHost",""]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div",0,1),n.\u0275\u0275template(2,Qa,2,2,"ng-container",2),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(3,Na,3,4,"ng-template",null,3,n.\u0275\u0275templateRefExtractor)),2&t&&(n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction2(3,qa,r.disallowQna,r.supportsCustomPadding)),n.\u0275\u0275attribute("focus-nav-mode","Group"),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",!r.isLoading))},dependencies:[y.NgClass,y.NgIf,Pt.X,Z.b,Ti.f,ht.t,Oa.q,ii],styles:[".visual-qnaVisual.hasDisallowQnaContent[_ngcontent-%COMP%]{width:100%!important;height:100%!important}  html[data-focus-source=key] .visual-qnaVisual:focus,   html[data-focus-source=key] .visual-qnaVisual *:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color)}  html[data-focus-source=mouse] .visual-qnaVisual:focus,   html[data-focus-source=mouse] .visual-qnaVisual *:focus,   html[data-focus-source=program] .visual-qnaVisual:focus,   html[data-focus-source=program] .visual-qnaVisual *:focus{outline:none}.visual-qnaVisual[_ngcontent-%COMP%]   .qnaNotEnabledContainer[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;box-sizing:border-box;padding:20px;background-color:var(--fluent-theme-neutral-lighter-color, #F3F2F1);font-size:14px;text-align:center}.visual-qnaVisual[_ngcontent-%COMP%]   .qnaNotEnabledContainer[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{margin-top:12px;max-width:300px}.visual-qnaVisual[_ngcontent-%COMP%]   .qnaNotEnabledContainer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:12px}.visual-qnaVisual[_ngcontent-%COMP%]   .qnaVisualContent[_ngcontent-%COMP%]{height:100%}"]}),i}();function za(i){return{code:"qnaNotAllowedWithoutModel",fixableError:0,hideSeeDetails:!0,details:{message:i.get("Qna_NotAllowedForReport_WithoutModel"),displayableErrorInfo:void 0},source:"User"}}function ja(i){var r=[{errorInfoKey:i.get("VisualContainer_QnaVisual_NotSupportedTitle"),errorInfoValue:i.get("VisualContainer_QnaVisual_NotSupportedMessage")}];return{code:"qnaNotSupported",fixableError:0,hideSeeDetails:!1,details:{message:i.get("Qna_NotAllowedForReport_QnaNotSupported"),displayableErrorInfo:r},source:"User"}}function Ha(i){return{code:"qnaNotSupported",fixableError:0,hideSeeDetails:!0,details:{message:i.get("Qna_NotAllowedForReport_Paused"),displayableErrorInfo:void 0},source:"User"}}var Gi=d(67489),Ga=d(96777),$i=function(){function i(e){this.templateDialogPayload=e}return i.prototype.ngOnInit=function(){var e,t=(e=this.templateDialogPayload.input).errorCode,r=e.errorMessage;f.fF.assertValue(t,"diagnostic dialog error code"),this.diagnosticMessage=(0,Fn.g)(r)?t:"".concat(t," ").concat(r)},i.\u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Gi.x))},i.\u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["qna-diagnostic-dialog"]],features:[n.\u0275\u0275ProvidersFeature([Gi.x])],decls:3,vars:1,consts:[[2,"min-width","400px"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"template-dialog")(1,"p",0),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd()()),2&t&&(n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(r.diagnosticMessage))},dependencies:[Ga.J],encapsulation:2,changeDetection:0}),i}(),$a=d(92060),Wa=d(96427),oi=d(14714),Ja=d(68082),ai=d(70604),Ka=d(58938);function Wi(i,e,t,r,o){var a;return(0,v.mG)(this,void 0,void 0,function(){var s,u;return(0,v.Jh)(this,function(l){switch(l.label){case 0:return[4,i.get(e.get())];case 1:return s=l.sent(),u=t.getCapabilities(),(0,ri.H)(u,s,r).isAllowed&&r.allowsLinguisticSchemaEdit()&&"None"!==(null===(a=o.DynamicImprovement)||void 0===a?void 0:a.Schema)?[2,!0]:[2,!1]}})})}function In(i){return _.includes(i,"PowerBI.AzureOpenAISynonyms")||_.includes(i,"PowerBI.AzureOpenAIPhrasings")}function Ji(i){return i.qnaImproveLsdlCopilot&&i.qnaSupportCommitQuestionOnDemandForAll&&i.qnaFuzzyMatch}var Ki=function(){function i(e,t){this.agentName=e,this.agentProperties=t}return Object.defineProperty(i.prototype,"name",{get:function(){return this.agentName},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lastModified",{get:function(){return this.agentProperties.LastModified},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"state",{get:function(){var t;return null!==(t=this.agentProperties.State)&&void 0!==t?t:"Enabled"},set:function(t){this.agentProperties.State=t,this.isDirty=!0},enumerable:!1,configurable:!0}),i.prototype.shouldCommit=function(){return this.isDirty},i.prototype.resetCommitState=function(){this.isDirty=!1},i.prototype.markDirty=function(){this.isDirty=!0},i}(),Ge=d(69615),ze=function(){function i(e,t,r,o,a,s,u){this.value=e,this.state=t,this.weight=r,this.sourceType=o,this.sourceAgent=a,this.type=s,this.lastModified=u,f.fF.assertValue(e,"value"),this.value=e.trim(),t||(this.state="Authored"),o||(this.sourceType="Default")}return i.createAuthoredTerm=function(e){return new i(e,"Authored",void 0,"Default",void 0,void 0,(0,Ge.uL)())},i.createAuthoredTerms=function(e){return _.map(e,function(t){return i.createAuthoredTerm(t)})},Object.defineProperty(i.prototype,"isSuggested",{get:function(){return"Suggested"===this.state},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isVisualColumnRenameTerm",{get:function(){return this.isSuggested&&"External"===this.sourceType&&"PowerBI.VisualColumnRename"===this.sourceAgent},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isAuthored",{get:function(){return"Authored"===this.state||null==this.state},enumerable:!1,configurable:!0}),i.prototype.createModified=function(e){return f.fF.assertValue(e,"modifiedProperties"),new i(this.value,e.state||this.state,e.clearWeight?void 0:this.weight,e.sourceType||this.sourceType,e.clearSourceAgent?void 0:this.sourceAgent,this.type,e.updateLastModified?(0,Ge.uL)():this.lastModified)},i.prototype.areValuesEqual=function(e){return f.fF.assertValue(e,"term"),i.getUniqueKey(this.value)===i.getUniqueKey(e.value)},i.getUniqueKey=function(e){return f.fF.assertValue(e,"value"),e.toLowerCase()},i}(),$e=function(){function i(e,t,r,o,a,s,u){void 0===u&&(u=!1),this.kind=e,this.lsdlName=t,this.entityState=r,this.entityTerms=o,this.entityVisibility=a,this.entityVisibilityState=s,f.fF.assertValue(e,"kind"),this.entityState||(this.entityState="Authored"),this.entityTerms||(this.entityTerms=[]),a||(this.entityVisibility="Visible"),s||(this.entityVisibilityState="Default"),this.isDirty=u}return Object.defineProperty(i.prototype,"terms",{get:function(){return this.entityTerms},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"state",{get:function(){return this.entityState},set:function(t){this.entityState=t,this.isDirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"visibility",{get:function(){return this.entityVisibility},set:function(t){f.fF.assertValue(t,"value"),this.entityVisibility=t,this.entityVisibilityState="Authored",this.isDirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"visibilityState",{get:function(){return this.entityVisibilityState},enumerable:!1,configurable:!0}),i.prototype.shouldCommit=function(){return this.isDirty},i.prototype.equals=function(e){if(f.fF.assertValue(e,"LsdlEntityModel"),this.terms.length!==e.terms.length)return!1;for(var t=new Set,r=0,o=this.terms;r<o.length;r++)"Deleted"!==(a=o[r]).state&&t.add(a.value);for(var s=0,u=e.terms;s<u.length;s++){var a;if("Deleted"!==(a=u[s]).state&&!t.has(a.value))return!1}return this.kind===e.kind&&this.lsdlName===e.lsdlName&&this.visibility===e.visibility&&this.state===e.state},i.prototype.moveToIndex=function(e,t){var r=this;f.fF.assert(function(){return t>=0&&t<_.size(r.terms)},"specified index out of bounds");var o=_.indexOf(this.terms,e);o<0&&f.fF.assertFail("item not in array"),o!==t&&(this.terms.splice(t,0,this.terms.splice(o,1)[0]),this.markGeneratedTermsAsAuthored(),this.isDirty=!0)},i.prototype.addAuthoredTerm=function(e){f.fF.assertValue(e,"value");var t=ze.createAuthoredTerm(e);return _.remove(this.entityTerms,function(r){return r.areValuesEqual(t)}),this.entityTerms.push(t),this.markGeneratedTermsAsAuthored(),this.isDirty=!0,t},i.prototype.addVisualColumnRenameTerms=function(e){f.fF.assertNonEmpty(e,"values");for(var t=function(c){var l=_.trim(c);if(_.isEmpty(l))return"continue";var p=new ze(l,"Suggested",.9,"External","PowerBI.VisualColumnRename",void 0,void 0),g=_.find(r.entityTerms,function(m){return m.areValuesEqual(p)});if(g&&("Suggested"!==g.state||g.isVisualColumnRenameTerm))return"continue";r.entityTerms.push(p),r.isDirty=!0},r=this,o=0,a=e;o<a.length;o++)t(a[o])},i.prototype.removeVisualColumnRenameTerms=function(){var e=_.remove(this.entityTerms,function(t){return t.isVisualColumnRenameTerm});_.isEmpty(e)||(this.isDirty=!0)},i.prototype.removeSuggestedTermsByAgent=function(e){var t=_.remove(this.entityTerms,function(r){return r.isSuggested&&r.sourceAgent===e});_.isEmpty(t)||(this.isDirty=!0)},i.prototype.promoteSuggestedTerm=function(e){f.fF.assertValue(e,"termModel"),this.modifyTerm(e,{state:"Authored",clearWeight:!0,clearSourceAgent:!1,updateLastModified:!0}),this.markGeneratedTermsAsAuthored()},i.prototype.tryMarkTermAsDeleted=function(e){return f.fF.assertValue(e,"termModel"),!_.every(this.terms,function(t){return t.areValuesEqual(e)||"Deleted"===t.state})&&(this.modifyTerm(e,{state:"Deleted",sourceType:"Default",clearWeight:!0,clearSourceAgent:!0,updateLastModified:!0}),this.markGeneratedTermsAsAuthored(),!0)},i.prototype.setAsPrimaryTerm=function(e){f.fF.assertValue(e,"termModel"),f.fF.assert(function(){return"Authored"===e.state||"Generated"===e.state},"only authored/generated terms can be promoted"),_.remove(this.entityTerms,e),this.entityTerms.splice(0,0,e),this.isDirty=!0,this.markGeneratedTermsAsAuthored()},i.prototype.getPrimaryTerm=function(){return _.find(this.entityTerms,function(e){return!e.isSuggested})},i.prototype.resetCommitState=function(){this.isDirty=!1},i.isConceptualEntityModel=function(e){return 1===e.kind},i.isConceptualPropertyModel=function(e){return 2===e.kind},i.isConceptualHierarchyModel=function(e){return 3===e.kind},i.isConceptualHierarchyLevelModel=function(e){return 4===e.kind},i.prototype.markGeneratedTermsAsAuthored=function(){for(var e=0,t=this.entityTerms;e<t.length;e++){var r=t[e];"Generated"===r.state&&this.modifyTerm(r,{state:"Authored",updateLastModified:!1})}},i.prototype.modifyTerm=function(e,t){var r=_.indexOf(this.entityTerms,e);f.fF.assertValue(r>=0,"term has to be part of the current entityModel");var o=e.createModified(t);this.entityTerms.splice(r,1,o),this.isDirty=!0},i}(),Xa=function(i){function e(t,r,o,a,s,u,c){void 0===c&&(c=!1);var l=i.call(this,1,r,o,a,s,u,c)||this;return l.tableName=t,f.fF.assertValue(r,"lsdlName"),f.fF.assertValue(t,"tableName"),l}return(0,v.ZT)(e,i),e}($e),Zi=function(i){function e(t,r,o,a,s,u,c,l){void 0===l&&(l=!1);var p=i.call(this,2,o,a,s,u,c,l)||this;return p.tableName=t,p.propertyName=r,f.fF.assertValue(o,"lsdlName"),f.fF.assertValue(t,"tableName"),f.fF.assertValue(r,"propertyName"),p}return(0,v.ZT)(e,i),e}($e),Ya=function(i){function e(t,r,o,a,s,u,c,l,p){var g=i.call(this,3,s,u,c,l,p)||this;return g.tableName=t,g.hierarchy=r,g.variationSet=o,g.variationSource=a,f.fF.assertValue(s,"lsdlName"),f.fF.assertValue(t,"tableName"),f.fF.assertValue(r,"hierarchy"),f.fF.assertAnyValue(o,"variationSet"),f.fF.assertAnyValue(a,"variationSource"),g}return(0,v.ZT)(e,i),e}($e),es=function(i){function e(t,r,o,a,s,u,c,l,p,g){var m=i.call(this,4,u,c,l,p,g)||this;return m.tableName=t,m.hierarchy=r,m.hierarchyLevel=o,m.variationSet=a,m.variationSource=s,f.fF.assertValue(u,"lsdlName"),f.fF.assertValue(t,"tableName"),f.fF.assertValue(r,"hierarchy"),f.fF.assertValue(o,"hierarchyLevel"),f.fF.assertAnyValue(a,"variationSet"),f.fF.assertAnyValue(s,"variationSource"),m}return(0,v.ZT)(e,i),e}($e),Xi=function(){function i(e,t,r,o){void 0===o&&(o=!1),this.prepPhrasePrepositions=e,this.prepPhraseObjectEntity=t,this.lsdlReference=r,f.fF.assertNonEmpty(e,"cannot have prep phrase with no prepositions"),f.fF.assertValue(t,"objectEntity"),this.isDirty=o}return Object.defineProperty(i.prototype,"prepositions",{get:function(){return this.prepPhrasePrepositions},set:function(t){this.prepPhrasePrepositions=t,this.isDirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"objectEntity",{get:function(){return this.prepPhraseObjectEntity},set:function(t){this.prepPhraseObjectEntity=t,this.isDirty=!0},enumerable:!1,configurable:!0}),i.prototype.shouldCommit=function(){return this.isDirty},i.prototype.resetCommitState=function(){this.isDirty=!1},i.prototype.equalsToPrepPhraseReferenceModel=function(e){return this.lsdlReference===e.lsdlReference},i.prototype.equalsToPrepPhraseReference=function(e){return this.lsdlReference===e},i.prototype.clone=function(){return new i((0,v.ev)([],this.prepPhrasePrepositions,!0),(0,v.pi)({},this.prepPhraseObjectEntity),this.lsdlReference)},i}(),nn=function(){function i(e,t,r,o,a,s,u,c,l){void 0===l&&(l=!1),this.kind=e,this.prepPhrases=t,this.phrasingLastModified=r,this.phrasingID=o,this.phrasingState=a,this.phrasingSource=s,this.parentRelationship=u,this.lsdlReference=c,f.fF.assert(function(){return null!=e},"LsdlPhrasingModel kind"),f.fF.assertValue(u,"parentRelationship"),_.isEmpty(this.prepPhrases)&&(this.prepPhrases=[]),this.phrasingState||(this.phrasingState="Authored"),this.isDirty=l}return Object.defineProperty(i.prototype,"lastModified",{get:function(){return this.phrasingLastModified},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"ID",{get:function(){return this.phrasingID},set:function(t){this.phrasingID=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"state",{get:function(){return this.phrasingState},set:function(t){this.phrasingState=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"prepositionalPhrases",{get:function(){return this.prepPhrases},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"source",{get:function(){return this.phrasingSource},set:function(t){this.phrasingSource=t,this.setPhrasingUpdated()},enumerable:!1,configurable:!0}),i.prototype.shouldCommit=function(){return this.isDirty},i.prototype.resetCommitState=function(){this.isDirty=!1},i.prototype.setPhrasingUpdated=function(){this.isDirty=!0,this.phrasingLastModified=(0,Ge.uL)(),"Deleted"!==this.phrasingState&&(this.phrasingState="Authored"),"Deleted"!==this.parentRelationship.state&&(this.parentRelationship.state="Authored")},i.prototype.updatePrepositionalPhrases=function(e){var t=this;this.prepPhrases=_.map(e,function(r){t.parentRelationship.ensureRole(r.object);var o=r.originalModel?_.find(t.prepositionalPhrases,function(s){return s.equalsToPrepPhraseReferenceModel(r.originalModel)}):void 0;if(null!=o)return o.prepositions=zt(r.prepositions,o.prepositions),o.objectEntity=r.object,o;var a=ze.createAuthoredTerms(r.prepositions);return new Xi(a,r.object,void 0,!0)}),this.setPhrasingUpdated()},i.prototype.equalsToPhrasingReferenceModel=function(e){return this.lsdlReference===e.lsdlReference},i.prototype.equalsToPhrasingReference=function(e){return this.lsdlReference===e},i}(),xn=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return(0,v.ZT)(e,i),e}(nn),si=function(i){function e(t,r,o,a,s,u,c,l,p,g,m,E){void 0===E&&(E=!1);var P=i.call(this,1,s,u,c,l,p,g,m,E)||this;return P.phrasingSubject=t,P.phrasingAdjectives=r,P.phrasingAntonyms=o,P.phrasingMeasurement=a,f.fF.assertValue(t,"LsdlAdjectivePhrasingModel phrasingSubject"),f.fF.assertAnyValue(r,"LsdlAdjectivePhrasingModel phrasingAdjectives"),f.fF.assertAnyValue(o,"LsdlAdjectivePhrasingModel phrasingAntonyms"),f.fF.assertAnyValue(a,"LsdlAdjectivePhrasingModel phrasingMeasurement"),f.fF.assertAnyValue(s,"LsdlAdjectivePhrasingModel prepositionalPhrases"),P.phrasingAdjectives||(P.phrasingAdjectives=[]),P.phrasingAntonyms||(P.phrasingAntonyms=[]),P}return(0,v.ZT)(e,i),Object.defineProperty(e.prototype,"subject",{get:function(){return this.phrasingSubject},set:function(r){this.parentRelationship.ensureRole(r),this.phrasingSubject=r,this.setPhrasingUpdated()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"adjectives",{get:function(){return this.phrasingAdjectives},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"antonyms",{get:function(){return this.phrasingAntonyms},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"measurement",{get:function(){return this.phrasingMeasurement},set:function(r){r&&this.parentRelationship.ensureRole(r),this.phrasingMeasurement=r,this.setPhrasingUpdated()},enumerable:!1,configurable:!0}),e.prototype.updateAdjectives=function(t){this.phrasingAdjectives=zt(t,this.phrasingAdjectives),this.setPhrasingUpdated()},e.prototype.updateAntonyms=function(t){this.phrasingAntonyms=zt(t,this.phrasingAntonyms),this.setPhrasingUpdated()},e.prototype.markTermAsDeleted=function(t){var r=rn(this.phrasingAdjectives,t,this,this.parentRelationship);return(r=rn(this.phrasingAntonyms,t,this,this.parentRelationship)||r)&&this.setPhrasingUpdated(),r},e.prototype.hasTerms=function(){return on(this.phrasingAdjectives)||on(this.phrasingAntonyms)},e.prototype.clone=function(t){return new e((0,v.pi)({},this.phrasingSubject),(0,v.ev)([],this.phrasingAdjectives,!0),(0,v.ev)([],this.phrasingAntonyms,!0),this.phrasingMeasurement?(0,v.pi)({},this.phrasingMeasurement):void 0,_.map(this.prepositionalPhrases,function(r){return r.clone()}),this.lastModified,this.ID,this.state,this.source,t,this.lsdlReference)},e}(xn),ui=function(i){function e(t,r,o,a,s,u,c,l,p,g){void 0===g&&(g=!1);var m=i.call(this,3,o,a,s,u,c,l,p,g)||this;return m.phrasingSubject=t,m.phrasingAdjective=r,f.fF.assertValue(t,"LsdlDynamicAdjectivePhrasingModel phrasingSubject"),f.fF.assertValue(r,"LsdlDynamicAdjectivePhrasingModel phrasingAdjective"),f.fF.assertAnyValue(o,"LsdlDynamicAdjectivePhrasingModel prepositionalPhrases"),m}return(0,v.ZT)(e,i),Object.defineProperty(e.prototype,"subject",{get:function(){return this.phrasingSubject},set:function(r){this.parentRelationship.ensureRole(r),this.phrasingSubject=r,this.setPhrasingUpdated()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"adjective",{get:function(){return this.phrasingAdjective},set:function(r){this.parentRelationship.ensureRole(r),this.phrasingAdjective=r,this.setPhrasingUpdated()},enumerable:!1,configurable:!0}),e.prototype.clone=function(t){return new e((0,v.pi)({},this.phrasingSubject),(0,v.pi)({},this.phrasingAdjective),_.map(this.prepositionalPhrases,function(r){return r.clone()}),this.lastModified,this.ID,this.state,this.source,t,this.lsdlReference)},e}(nn),li=function(i){function e(t,r,o,a,s,u,c,l,p,g){void 0===g&&(g=!1);var m=i.call(this,2,o,a,s,u,c,l,p,g)||this;return m.phrasingSubject=t,m.phrasingNouns=r,f.fF.assertValue(t,"LsdlNounPhrasingModel phrasingSubject"),f.fF.assertValue(r,"LsdlNounPhrasingModel phrasingNouns"),f.fF.assertAnyValue(o,"LsdlNounPhrasingModel prepositionalPhrases"),m}return(0,v.ZT)(e,i),Object.defineProperty(e.prototype,"subject",{get:function(){return this.phrasingSubject},set:function(r){this.parentRelationship.ensureRole(r),this.phrasingSubject=r,this.setPhrasingUpdated()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nouns",{get:function(){return this.phrasingNouns},enumerable:!1,configurable:!0}),e.prototype.updateNouns=function(t){this.phrasingNouns=zt(t,this.phrasingNouns),this.setPhrasingUpdated()},e.prototype.markTermAsDeleted=function(t){var r=rn(this.phrasingNouns,t,this,this.parentRelationship);return r&&this.setPhrasingUpdated(),r},e.prototype.hasTerms=function(){return on(this.phrasingNouns)},e.prototype.clone=function(t){return new e((0,v.pi)({},this.phrasingSubject),(0,v.ev)([],this.phrasingNouns,!0),_.map(this.prepositionalPhrases,function(r){return r.clone()}),this.lastModified,this.ID,this.state,this.source,t,this.lsdlReference)},e}(xn),ci=function(i){function e(t,r,o,a,s,u,c,l,p,g){void 0===g&&(g=!1);var m=i.call(this,4,o,a,s,u,c,l,p,g)||this;return m.phrasingSubject=t,m.phrasingNoun=r,f.fF.assertValue(t,"LsdlDynamicNounPhrasingModel phrasingSubject"),f.fF.assertValue(r,"LsdlDynamicNounPhrasingModel phrasingNoun"),f.fF.assertAnyValue(o,"LsdlDynamicNounPhrasingModel prepositionalPhrases"),m}return(0,v.ZT)(e,i),Object.defineProperty(e.prototype,"subject",{get:function(){return this.phrasingSubject},set:function(r){this.parentRelationship.ensureRole(r),this.phrasingSubject=r,this.setPhrasingUpdated()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"noun",{get:function(){return this.phrasingNoun},set:function(r){this.parentRelationship.ensureRole(r),this.phrasingNoun=r,this.setPhrasingUpdated()},enumerable:!1,configurable:!0}),e.prototype.clone=function(t){return new e((0,v.pi)({},this.phrasingSubject),(0,v.pi)({},this.phrasingNoun),_.map(this.prepositionalPhrases,function(r){return r.clone()}),this.lastModified,this.ID,this.state,this.source,t,this.lsdlReference)},e}(nn),pi=function(i){function e(t,r,o,a,s,u,c,l,p,g,m,E){void 0===E&&(E=!1);var P=i.call(this,5,s,u,c,l,p,g,m,E)||this;return P.phrasingSubject=t,P.phrasingVerbs=r,P.phrasingIndirectObject=o,P.phrasingObject=a,f.fF.assertValue(r,"LsdlVerbPhrasingModel phrasingVerbs"),f.fF.assertAnyValue(t,"LsdlVerbPhrasingModel phrasingSubject"),f.fF.assertAnyValue(o,"LsdlVerbPhrasingModel phrasingIndirectObject"),f.fF.assertAnyValue(a,"LsdlVerbPhrasingModel phrasingObject"),f.fF.assertAnyValue(s,"LsdlVerbPhrasingModel prepositionalPhrases"),P}return(0,v.ZT)(e,i),Object.defineProperty(e.prototype,"subject",{get:function(){return this.phrasingSubject},set:function(r){r&&this.parentRelationship.ensureRole(r),this.phrasingSubject=r,this.setPhrasingUpdated()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"verbs",{get:function(){return this.phrasingVerbs},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"indirectObject",{get:function(){return this.phrasingIndirectObject},set:function(r){r&&this.parentRelationship.ensureRole(r),this.phrasingIndirectObject=r,this.setPhrasingUpdated()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"directObject",{get:function(){return this.phrasingObject},enumerable:!1,configurable:!0}),e.prototype.updateVerbs=function(t){this.phrasingVerbs=zt(t,this.phrasingVerbs),this.setPhrasingUpdated()},Object.defineProperty(e.prototype,"object",{set:function(r){r&&this.parentRelationship.ensureRole(r),this.phrasingObject=r,this.setPhrasingUpdated()},enumerable:!1,configurable:!0}),e.prototype.markTermAsDeleted=function(t){var r=rn(this.phrasingVerbs,t,this,this.parentRelationship);return r&&this.setPhrasingUpdated(),r},e.prototype.hasTerms=function(){return on(this.phrasingVerbs)},e.prototype.clone=function(t){return new e(this.phrasingSubject?(0,v.pi)({},this.phrasingSubject):void 0,(0,v.ev)([],this.phrasingVerbs,!0),this.phrasingIndirectObject?(0,v.pi)({},this.phrasingIndirectObject):void 0,this.phrasingObject?(0,v.pi)({},this.phrasingObject):void 0,_.map(this.prepositionalPhrases,function(r){return r.clone()}),this.lastModified,this.ID,this.state,this.source,t,this.lsdlReference)},e}(xn),di=function(i){function e(t,r,o,a,s,u,c,l,p,g,m){void 0===m&&(m=!1);var E=i.call(this,6,a,s,u,c,l,p,g,m)||this;return E.phrasingSubject=t,E.phrasingPrepositions=r,E.phrasingObject=o,f.fF.assertValue(t,"LsdlPrepositionPhrasingModel phrasingSubject"),f.fF.assertValue(r,"LsdlPrepositionPhrasingModel phrasingPrepositions"),f.fF.assertValue(o,"LsdlPrepositionPhrasingModel phrasingObject"),f.fF.assertAnyValue(a,"LsdlPrepositionPhrasingModel prepositionalPhrases"),E}return(0,v.ZT)(e,i),Object.defineProperty(e.prototype,"subject",{get:function(){return this.phrasingSubject},set:function(r){this.parentRelationship.ensureRole(r),this.phrasingSubject=r,this.setPhrasingUpdated()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"prepositions",{get:function(){return this.phrasingPrepositions},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"object",{get:function(){return this.phrasingObject},set:function(r){this.parentRelationship.ensureRole(r),this.phrasingObject=r,this.setPhrasingUpdated()},enumerable:!1,configurable:!0}),e.prototype.updatePrepositions=function(t){this.phrasingPrepositions=zt(t,this.phrasingPrepositions),this.setPhrasingUpdated()},e.prototype.markTermAsDeleted=function(t){var r=rn(this.phrasingPrepositions,t,this,this.parentRelationship);return r&&this.setPhrasingUpdated(),r},e.prototype.hasTerms=function(){return on(this.phrasingPrepositions)},e.prototype.clone=function(t){return new e((0,v.pi)({},this.phrasingSubject),(0,v.ev)([],this.phrasingPrepositions,!0),(0,v.pi)({},this.phrasingObject),_.map(this.prepositionalPhrases,function(r){return r.clone()}),this.lastModified,this.ID,this.state,this.source,t,this.lsdlReference)},e}(xn),gi=function(i){function e(t,r,o,a,s,u,c,l,p,g){void 0===g&&(g=!1);var m=i.call(this,7,o,a,s,u,c,l,p,g)||this;return m.phrasingSubject=t,m.phrasingObject=r,f.fF.assertValue(t,"LsdlAttributePhrasingModel phrasingSubject"),f.fF.assertValue(r,"LsdlAttributePhrasingModel phrasingObject"),f.fF.assertAnyValue(o,"LsdlAttributePhrasingModel prepositionalPhrases"),m}return(0,v.ZT)(e,i),Object.defineProperty(e.prototype,"subject",{get:function(){return this.phrasingSubject},set:function(r){this.parentRelationship.ensureRole(r),this.phrasingSubject=r,this.setPhrasingUpdated()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"object",{get:function(){return this.phrasingObject},set:function(r){this.parentRelationship.ensureRole(r),this.phrasingObject=r,this.setPhrasingUpdated()},enumerable:!1,configurable:!0}),e.prototype.clone=function(t){return new e((0,v.pi)({},this.phrasingSubject),(0,v.pi)({},this.phrasingObject),_.map(this.prepositionalPhrases,function(r){return r.clone()}),this.lastModified,this.ID,this.state,this.source,t,this.lsdlReference)},e}(nn),hi=function(i){function e(t,r,o,a,s,u,c,l,p,g){void 0===g&&(g=!1);var m=i.call(this,8,o,a,s,u,c,l,p,g)||this;return m.phrasingSubject=t,m.phrasingName=r,f.fF.assertValue(t,"LsdlNamePhrasingModel phrasingSubject"),f.fF.assertValue(r,"LsdlNamePhrasingModel phrasingName"),m}return(0,v.ZT)(e,i),Object.defineProperty(e.prototype,"subject",{get:function(){return this.phrasingSubject},set:function(r){this.parentRelationship.ensureRole(r),this.phrasingSubject=r,this.setPhrasingUpdated()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.phrasingName},set:function(r){this.parentRelationship.ensureRole(r),this.phrasingName=r,this.setPhrasingUpdated()},enumerable:!1,configurable:!0}),e.prototype.clone=function(t){return new e((0,v.pi)({},this.phrasingSubject),(0,v.pi)({},this.phrasingName),_.map(this.prepositionalPhrases,function(r){return r.clone()}),this.lastModified,this.ID,this.state,this.source,t,this.lsdlReference)},e}(nn);function rn(i,e,t,r){var o=_.findIndex(i,e);if(o<0)return!1;var a=i[o].createModified({state:"Deleted",sourceType:"Default",clearWeight:!0,clearSourceAgent:!0,updateLastModified:!0});return i.splice(o,1,a),_.every(i,function(s){return"Deleted"===s.state})&&(t.state="Deleted"),_.every(r.phrasings,function(s){return"Deleted"===s.state})&&(r.state="Deleted"),!0}function on(i){return _.some(i,function(e){return"Deleted"!==e.state})}function zt(i,e){return _.map(i,function(t){var r=ze.createAuthoredTerm(t);return _.find(e,function(a){return a.areValuesEqual(r)})??r})}var Yi=function(){function i(e,t,r,o,a){void 0===a&&(a=!1),this.target=e,this.aggregation=t,this.operator=r,this.value=o,f.fF.assertValue(e,"LsdlConditionModel target"),f.fF.assertValue(r,"LsdlConditionModel operator"),f.fF.assertAnyValue(o,"LsdlConditionModel value"),this.isDirty=a}return i.prototype.shouldCommit=function(){return this.isDirty},i.prototype.resetCommitState=function(){this.isDirty=!1},i.prototype.clone=function(){return new i((0,v.pi)({},this.target),this.aggregation,this.operator,(0,v.pi)({},this.value))},i}(),er=function(){function i(e,t){this.lsdlName=e,this.entityName=t,f.fF.assertValue(e,"LsdlRoleModel lsdlName"),f.fF.assertValue(t,"LsdlRoleModel entityName")}return i.prototype.shouldCommit=function(){return this.isDirty},i.prototype.resetCommitState=function(){this.isDirty=!1},i.prototype.clone=function(){return new i(this.lsdlName,this.entityName)},i}(),fi=function(){function i(e,t,r,o,a){void 0===a&&(a=!1),this.where=e,this.when=t,this.duration=r,this.occurrences=o,this.isDirty=!1,this.isDirty=a}return i.prototype.shouldCommit=function(){return this.isDirty},i.prototype.resetCommitState=function(){this.isDirty=!1},i.prototype.clone=function(){return new i(this.where?(0,v.pi)({},this.where):void 0,this.when?(0,v.pi)({},this.when):void 0,this.duration?(0,v.pi)({},this.duration):void 0,this.occurrences?(0,v.pi)({},this.occurrences):void 0)},i}(),vt={Type:"User"},tr=function(){function i(e,t,r,o,a,s,u,c,l,p){void 0===l&&(l=!1),this.lsdlName=e,this.tableName=t,this.relationshipPhrasings=r,this.relationshipConditions=o,this.relationshipRoles=a,this.relationshipSemanticSlots=s,this.relationshipLastModified=u,this.relationshipState=c,this.basedOnLsdlName=p,f.fF.assertValue(e,"LsdlRelationshipModel lsdlName"),null==this.relationshipPhrasings&&(this.relationshipPhrasings=[]),null==this.relationshipConditions&&(this.relationshipConditions=[]),null==this.relationshipRoles&&(this.relationshipRoles=[]),null==this.relationshipSemanticSlots&&(this.relationshipSemanticSlots=new fi),null==this.relationshipState&&(this.relationshipState="Authored"),this.isDirty=l}return Object.defineProperty(i.prototype,"table",{get:function(){return this.tableName},set:function(t){this.tableName=t,this.setRelationshipUpdated()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"phrasings",{get:function(){return this.relationshipPhrasings},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"condition",{get:function(){return this.relationshipConditions[0]},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"roles",{get:function(){return this.relationshipRoles},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"semanticSlots",{get:function(){return this.relationshipSemanticSlots},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lastModified",{get:function(){return this.relationshipLastModified},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"state",{get:function(){return this.relationshipState},set:function(t){this.relationshipState=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"basedOn",{get:function(){return this.basedOnLsdlName},enumerable:!1,configurable:!0}),i.prototype.setRelationshipUpdated=function(){this.isDirty=!0,this.relationshipLastModified=(0,Ge.uL)(),"Deleted"!==this.relationshipState&&(this.relationshipState="Authored")},i.prototype.markDirtyForForceSave=function(){this.isDirty=!0},i.prototype.addAdjectivePhrasing=function(e,t,r,o,a){this.ensureRole(e),null!=t&&this.ensureRole(t);var s=ze.createAuthoredTerms(r),u=ze.createAuthoredTerms(o),c=new si(e,s,u,t,void 0,(0,Ge.uL)(),void 0,"Authored",vt,this,a,!0);this.relationshipPhrasings.push(c),this.setRelationshipUpdated()},i.prototype.addDynamicAdjectivePhrasing=function(e,t,r){this.ensureRole(e),this.ensureRole(t);var o=new ui(e,t,void 0,(0,Ge.uL)(),void 0,"Authored",vt,this,r,!0);this.relationshipPhrasings.push(o),this.setRelationshipUpdated()},i.prototype.addNounPhrasing=function(e,t,r){this.ensureRole(e);var o=ze.createAuthoredTerms(t),a=new li(e,o,void 0,(0,Ge.uL)(),void 0,"Authored",vt,this,r,!0);this.relationshipPhrasings.push(a),this.setRelationshipUpdated()},i.prototype.addDynamicNounPhrasing=function(e,t,r){this.ensureRole(e),this.ensureRole(t);var o=new ci(e,t,void 0,(0,Ge.uL)(),void 0,"Authored",vt,this,r,!0);this.relationshipPhrasings.push(o),this.setRelationshipUpdated()},i.prototype.addVerbPhrasing=function(e,t,r,o,a){var s=ze.createAuthoredTerms(e);null!=t&&this.ensureRole(t),null!=o&&this.ensureRole(o),null!=r&&this.ensureRole(r);var u=new pi(t,s,r,o,void 0,(0,Ge.uL)(),void 0,"Authored",vt,this,a,!0);this.relationshipPhrasings.push(u),this.setRelationshipUpdated()},i.prototype.addPrepositionPhrasing=function(e,t,r,o){this.ensureRole(e),this.ensureRole(r);var a=ze.createAuthoredTerms(t),s=new di(e,a,r,void 0,(0,Ge.uL)(),void 0,"Authored",vt,this,o,!0);this.relationshipPhrasings.push(s),this.setRelationshipUpdated()},i.prototype.addAttributePhrasing=function(e,t,r){this.ensureRole(e),this.ensureRole(t);var o=new gi(e,t,void 0,(0,Ge.uL)(),void 0,"Authored",vt,this,r,!0);this.relationshipPhrasings.push(o),this.setRelationshipUpdated()},i.prototype.addNamePhrasing=function(e,t,r){this.ensureRole(e),this.ensureRole(t);var o=new hi(e,t,void 0,(0,Ge.uL)(),void 0,"Authored",vt,this,r,!0);this.relationshipPhrasings.push(o),this.setRelationshipUpdated()},i.prototype.deletePhrasing=function(e){f.fF.assertValue(e,"lsdlRelationshipModel deletePhrasing"),_.findIndex(this.relationshipPhrasings,e)>=0&&(e.state="Deleted",this.setRelationshipUpdated()),_.every(this.relationshipPhrasings,function(r){return"Deleted"===r.state})&&(this.state="Deleted")},i.prototype.hasPhrasings=function(){return _.some(this.relationshipPhrasings,function(e){return"Deleted"!==e.state})},i.prototype.updateCondition=function(e,t,r,o){this.ensureRole(e),this.relationshipConditions=[new Yi(e,t,r,o,!0)],this.setRelationshipUpdated()},i.prototype.deleteCondition=function(){this.relationshipConditions=[],this.setRelationshipUpdated()},i.prototype.updateSemanticSlots=function(e){null!=e.where&&this.ensureRole(e.where),null!=e.when&&this.ensureRole(e.when),null!=e.duration&&this.ensureRole(e.duration),null!=e.occurrences&&this.ensureRole(e.occurrences),this.relationshipSemanticSlots=new fi(e.where,e.when,e.duration,e.occurrences),this.setRelationshipUpdated()},i.prototype.shouldCommit=function(){return this.isDirty||this.relationshipSemanticSlots.shouldCommit()||_.some(this.relationshipPhrasings,function(e){return e.shouldCommit()})||_.some(this.relationshipRoles,function(e){return e.shouldCommit()})||_.some(this.relationshipConditions,function(e){return e.shouldCommit()})},i.prototype.resetCommitState=function(){this.isDirty=!1,this.relationshipSemanticSlots.resetCommitState(),_.forEach(this.relationshipPhrasings,function(e){return e.resetCommitState()}),_.forEach(this.relationshipRoles,function(e){return e.resetCommitState()}),_.forEach(this.relationshipConditions,function(e){return e.resetCommitState()})},i.prototype.hasSemanticSlots=function(){return null!=this.relationshipSemanticSlots},i.prototype.ensureRole=function(e){if(null==e.role){var r=_.find(this.relationshipRoles,function(s){return s.entityName===e.entity});if(null!=r)e.role=r.lsdlName;else{var o={};_.forEach(this.relationshipRoles,function(s){return o[s.lsdlName]=!0});var a=(0,he.zE)(o,e.entity);e.role=a,this.relationshipRoles.push(new er(e.role,e.entity))}}else null==_.find(this.relationshipRoles,function(s){return s.lsdlName===e.role})&&f.fF.assertFail("Unknown role mapping")},i.prototype.clone=function(e){var t=new i(this.lsdlName,this.tableName,[],_.map(this.relationshipConditions,function(r){return r.clone()}),_.map(this.relationshipRoles,function(r){return r.clone()}),this.relationshipSemanticSlots.clone(),this.relationshipLastModified,this.relationshipState);return _.forEach(this.relationshipPhrasings,function(r){r.equalsToPhrasingReferenceModel(e)&&t.relationshipPhrasings.push(r.clone(t))}),t},i}();function mi(i){return!!i.Binding}function nr(i){return!!i.HierarchyLevel}function ir(i){return!!i.ConceptualProperty}function rr(i){return!(!i.VariationSet&&!i.VariationSource)}function or(i){return!!i.Noun}function ar(i){return!!i.Adjective}function sr(i){return!!i.DynamicAdjective}function ur(i){return!!i.DynamicNoun}function lr(i){return!!i.Verb}function cr(i){return!!i.Preposition}function pr(i){return!!i.Attribute}function vi(i,e){f.fF.assertValue(i,"name"),f.fF.assert(function(){return function(i){if(0===_.size(i)||!wn(i[0],!0))return!1;for(var e=1;e<_.size(i);e++)if(!wn(i[e],!1))return!1;return!0}(e)},"fallbackName is not CLS compliant");for(var t="",r=0,o=i;r<o.length;r++){var a=o[r],s=_.size(t);s>0&&(os(a)||"."===a||"/"===a)?t+="_":wn(a,0===s)?t+=a:0===s&&wn(a,!1)&&(t=t+e+a)}return _.size(t)>0?t:e}function wn(i,e){f.fF.assert(function(){return 1===_.size(i)},"char is supposed to be 1 character");var t=i.match(/(?:[A-Z\xC0-\xD6\xD8-\xDE\u0100\u0102\u0104\u0106\u0108\u010A\u010C\u010E\u0110\u0112\u0114\u0116\u0118\u011A\u011C\u011E\u0120\u0122\u0124\u0126\u0128\u012A\u012C\u012E\u0130\u0132\u0134\u0136\u0139\u013B\u013D\u013F\u0141\u0143\u0145\u0147\u014A\u014C\u014E\u0150\u0152\u0154\u0156\u0158\u015A\u015C\u015E\u0160\u0162\u0164\u0166\u0168\u016A\u016C\u016E\u0170\u0172\u0174\u0176\u0178\u0179\u017B\u017D\u0181\u0182\u0184\u0186\u0187\u0189-\u018B\u018E-\u0191\u0193\u0194\u0196-\u0198\u019C\u019D\u019F\u01A0\u01A2\u01A4\u01A6\u01A7\u01A9\u01AC\u01AE\u01AF\u01B1-\u01B3\u01B5\u01B7\u01B8\u01BC\u01C4\u01C7\u01CA\u01CD\u01CF\u01D1\u01D3\u01D5\u01D7\u01D9\u01DB\u01DE\u01E0\u01E2\u01E4\u01E6\u01E8\u01EA\u01EC\u01EE\u01F1\u01F4\u01F6-\u01F8\u01FA\u01FC\u01FE\u0200\u0202\u0204\u0206\u0208\u020A\u020C\u020E\u0210\u0212\u0214\u0216\u0218\u021A\u021C\u021E\u0220\u0222\u0224\u0226\u0228\u022A\u022C\u022E\u0230\u0232\u023A\u023B\u023D\u023E\u0241\u0243-\u0246\u0248\u024A\u024C\u024E\u0370\u0372\u0376\u037F\u0386\u0388-\u038A\u038C\u038E\u038F\u0391-\u03A1\u03A3-\u03AB\u03CF\u03D2-\u03D4\u03D8\u03DA\u03DC\u03DE\u03E0\u03E2\u03E4\u03E6\u03E8\u03EA\u03EC\u03EE\u03F4\u03F7\u03F9\u03FA\u03FD-\u042F\u0460\u0462\u0464\u0466\u0468\u046A\u046C\u046E\u0470\u0472\u0474\u0476\u0478\u047A\u047C\u047E\u0480\u048A\u048C\u048E\u0490\u0492\u0494\u0496\u0498\u049A\u049C\u049E\u04A0\u04A2\u04A4\u04A6\u04A8\u04AA\u04AC\u04AE\u04B0\u04B2\u04B4\u04B6\u04B8\u04BA\u04BC\u04BE\u04C0\u04C1\u04C3\u04C5\u04C7\u04C9\u04CB\u04CD\u04D0\u04D2\u04D4\u04D6\u04D8\u04DA\u04DC\u04DE\u04E0\u04E2\u04E4\u04E6\u04E8\u04EA\u04EC\u04EE\u04F0\u04F2\u04F4\u04F6\u04F8\u04FA\u04FC\u04FE\u0500\u0502\u0504\u0506\u0508\u050A\u050C\u050E\u0510\u0512\u0514\u0516\u0518\u051A\u051C\u051E\u0520\u0522\u0524\u0526\u0528\u052A\u052C\u052E\u0531-\u0556\u10A0-\u10C5\u10C7\u10CD\u13A0-\u13F5\u1C90-\u1CBA\u1CBD-\u1CBF\u1E00\u1E02\u1E04\u1E06\u1E08\u1E0A\u1E0C\u1E0E\u1E10\u1E12\u1E14\u1E16\u1E18\u1E1A\u1E1C\u1E1E\u1E20\u1E22\u1E24\u1E26\u1E28\u1E2A\u1E2C\u1E2E\u1E30\u1E32\u1E34\u1E36\u1E38\u1E3A\u1E3C\u1E3E\u1E40\u1E42\u1E44\u1E46\u1E48\u1E4A\u1E4C\u1E4E\u1E50\u1E52\u1E54\u1E56\u1E58\u1E5A\u1E5C\u1E5E\u1E60\u1E62\u1E64\u1E66\u1E68\u1E6A\u1E6C\u1E6E\u1E70\u1E72\u1E74\u1E76\u1E78\u1E7A\u1E7C\u1E7E\u1E80\u1E82\u1E84\u1E86\u1E88\u1E8A\u1E8C\u1E8E\u1E90\u1E92\u1E94\u1E9E\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6\u1EC8\u1ECA\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u1EF2\u1EF4\u1EF6\u1EF8\u1EFA\u1EFC\u1EFE\u1F08-\u1F0F\u1F18-\u1F1D\u1F28-\u1F2F\u1F38-\u1F3F\u1F48-\u1F4D\u1F59\u1F5B\u1F5D\u1F5F\u1F68-\u1F6F\u1FB8-\u1FBB\u1FC8-\u1FCB\u1FD8-\u1FDB\u1FE8-\u1FEC\u1FF8-\u1FFB\u2102\u2107\u210B-\u210D\u2110-\u2112\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u2130-\u2133\u213E\u213F\u2145\u2183\u2C00-\u2C2F\u2C60\u2C62-\u2C64\u2C67\u2C69\u2C6B\u2C6D-\u2C70\u2C72\u2C75\u2C7E-\u2C80\u2C82\u2C84\u2C86\u2C88\u2C8A\u2C8C\u2C8E\u2C90\u2C92\u2C94\u2C96\u2C98\u2C9A\u2C9C\u2C9E\u2CA0\u2CA2\u2CA4\u2CA6\u2CA8\u2CAA\u2CAC\u2CAE\u2CB0\u2CB2\u2CB4\u2CB6\u2CB8\u2CBA\u2CBC\u2CBE\u2CC0\u2CC2\u2CC4\u2CC6\u2CC8\u2CCA\u2CCC\u2CCE\u2CD0\u2CD2\u2CD4\u2CD6\u2CD8\u2CDA\u2CDC\u2CDE\u2CE0\u2CE2\u2CEB\u2CED\u2CF2\uA640\uA642\uA644\uA646\uA648\uA64A\uA64C\uA64E\uA650\uA652\uA654\uA656\uA658\uA65A\uA65C\uA65E\uA660\uA662\uA664\uA666\uA668\uA66A\uA66C\uA680\uA682\uA684\uA686\uA688\uA68A\uA68C\uA68E\uA690\uA692\uA694\uA696\uA698\uA69A\uA722\uA724\uA726\uA728\uA72A\uA72C\uA72E\uA732\uA734\uA736\uA738\uA73A\uA73C\uA73E\uA740\uA742\uA744\uA746\uA748\uA74A\uA74C\uA74E\uA750\uA752\uA754\uA756\uA758\uA75A\uA75C\uA75E\uA760\uA762\uA764\uA766\uA768\uA76A\uA76C\uA76E\uA779\uA77B\uA77D\uA77E\uA780\uA782\uA784\uA786\uA78B\uA78D\uA790\uA792\uA796\uA798\uA79A\uA79C\uA79E\uA7A0\uA7A2\uA7A4\uA7A6\uA7A8\uA7AA-\uA7AE\uA7B0-\uA7B4\uA7B6\uA7B8\uA7BA\uA7BC\uA7BE\uA7C0\uA7C2\uA7C4-\uA7C7\uA7C9\uA7D0\uA7D6\uA7D8\uA7F5\uFF21-\uFF3A]|\uD801[\uDC00-\uDC27\uDCB0-\uDCD3\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95]|\uD803[\uDC80-\uDCB2]|\uD806[\uDCA0-\uDCBF]|\uD81B[\uDE40-\uDE5F]|\uD835[\uDC00-\uDC19\uDC34-\uDC4D\uDC68-\uDC81\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB5\uDCD0-\uDCE9\uDD04\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD38\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD6C-\uDD85\uDDA0-\uDDB9\uDDD4-\uDDED\uDE08-\uDE21\uDE3C-\uDE55\uDE70-\uDE89\uDEA8-\uDEC0\uDEE2-\uDEFA\uDF1C-\uDF34\uDF56-\uDF6E\uDF90-\uDFA8\uDFCA]|\uD83A[\uDD00-\uDD21])|(?:[a-z\xB5\xDF-\xF6\xF8-\xFF\u0101\u0103\u0105\u0107\u0109\u010B\u010D\u010F\u0111\u0113\u0115\u0117\u0119\u011B\u011D\u011F\u0121\u0123\u0125\u0127\u0129\u012B\u012D\u012F\u0131\u0133\u0135\u0137\u0138\u013A\u013C\u013E\u0140\u0142\u0144\u0146\u0148\u0149\u014B\u014D\u014F\u0151\u0153\u0155\u0157\u0159\u015B\u015D\u015F\u0161\u0163\u0165\u0167\u0169\u016B\u016D\u016F\u0171\u0173\u0175\u0177\u017A\u017C\u017E-\u0180\u0183\u0185\u0188\u018C\u018D\u0192\u0195\u0199-\u019B\u019E\u01A1\u01A3\u01A5\u01A8\u01AA\u01AB\u01AD\u01B0\u01B4\u01B6\u01B9\u01BA\u01BD-\u01BF\u01C6\u01C9\u01CC\u01CE\u01D0\u01D2\u01D4\u01D6\u01D8\u01DA\u01DC\u01DD\u01DF\u01E1\u01E3\u01E5\u01E7\u01E9\u01EB\u01ED\u01EF\u01F0\u01F3\u01F5\u01F9\u01FB\u01FD\u01FF\u0201\u0203\u0205\u0207\u0209\u020B\u020D\u020F\u0211\u0213\u0215\u0217\u0219\u021B\u021D\u021F\u0221\u0223\u0225\u0227\u0229\u022B\u022D\u022F\u0231\u0233-\u0239\u023C\u023F\u0240\u0242\u0247\u0249\u024B\u024D\u024F-\u0293\u0295-\u02AF\u0371\u0373\u0377\u037B-\u037D\u0390\u03AC-\u03CE\u03D0\u03D1\u03D5-\u03D7\u03D9\u03DB\u03DD\u03DF\u03E1\u03E3\u03E5\u03E7\u03E9\u03EB\u03ED\u03EF-\u03F3\u03F5\u03F8\u03FB\u03FC\u0430-\u045F\u0461\u0463\u0465\u0467\u0469\u046B\u046D\u046F\u0471\u0473\u0475\u0477\u0479\u047B\u047D\u047F\u0481\u048B\u048D\u048F\u0491\u0493\u0495\u0497\u0499\u049B\u049D\u049F\u04A1\u04A3\u04A5\u04A7\u04A9\u04AB\u04AD\u04AF\u04B1\u04B3\u04B5\u04B7\u04B9\u04BB\u04BD\u04BF\u04C2\u04C4\u04C6\u04C8\u04CA\u04CC\u04CE\u04CF\u04D1\u04D3\u04D5\u04D7\u04D9\u04DB\u04DD\u04DF\u04E1\u04E3\u04E5\u04E7\u04E9\u04EB\u04ED\u04EF\u04F1\u04F3\u04F5\u04F7\u04F9\u04FB\u04FD\u04FF\u0501\u0503\u0505\u0507\u0509\u050B\u050D\u050F\u0511\u0513\u0515\u0517\u0519\u051B\u051D\u051F\u0521\u0523\u0525\u0527\u0529\u052B\u052D\u052F\u0560-\u0588\u10D0-\u10FA\u10FD-\u10FF\u13F8-\u13FD\u1C80-\u1C88\u1D00-\u1D2B\u1D6B-\u1D77\u1D79-\u1D9A\u1E01\u1E03\u1E05\u1E07\u1E09\u1E0B\u1E0D\u1E0F\u1E11\u1E13\u1E15\u1E17\u1E19\u1E1B\u1E1D\u1E1F\u1E21\u1E23\u1E25\u1E27\u1E29\u1E2B\u1E2D\u1E2F\u1E31\u1E33\u1E35\u1E37\u1E39\u1E3B\u1E3D\u1E3F\u1E41\u1E43\u1E45\u1E47\u1E49\u1E4B\u1E4D\u1E4F\u1E51\u1E53\u1E55\u1E57\u1E59\u1E5B\u1E5D\u1E5F\u1E61\u1E63\u1E65\u1E67\u1E69\u1E6B\u1E6D\u1E6F\u1E71\u1E73\u1E75\u1E77\u1E79\u1E7B\u1E7D\u1E7F\u1E81\u1E83\u1E85\u1E87\u1E89\u1E8B\u1E8D\u1E8F\u1E91\u1E93\u1E95-\u1E9D\u1E9F\u1EA1\u1EA3\u1EA5\u1EA7\u1EA9\u1EAB\u1EAD\u1EAF\u1EB1\u1EB3\u1EB5\u1EB7\u1EB9\u1EBB\u1EBD\u1EBF\u1EC1\u1EC3\u1EC5\u1EC7\u1EC9\u1ECB\u1ECD\u1ECF\u1ED1\u1ED3\u1ED5\u1ED7\u1ED9\u1EDB\u1EDD\u1EDF\u1EE1\u1EE3\u1EE5\u1EE7\u1EE9\u1EEB\u1EED\u1EEF\u1EF1\u1EF3\u1EF5\u1EF7\u1EF9\u1EFB\u1EFD\u1EFF-\u1F07\u1F10-\u1F15\u1F20-\u1F27\u1F30-\u1F37\u1F40-\u1F45\u1F50-\u1F57\u1F60-\u1F67\u1F70-\u1F7D\u1F80-\u1F87\u1F90-\u1F97\u1FA0-\u1FA7\u1FB0-\u1FB4\u1FB6\u1FB7\u1FBE\u1FC2-\u1FC4\u1FC6\u1FC7\u1FD0-\u1FD3\u1FD6\u1FD7\u1FE0-\u1FE7\u1FF2-\u1FF4\u1FF6\u1FF7\u210A\u210E\u210F\u2113\u212F\u2134\u2139\u213C\u213D\u2146-\u2149\u214E\u2184\u2C30-\u2C5F\u2C61\u2C65\u2C66\u2C68\u2C6A\u2C6C\u2C71\u2C73\u2C74\u2C76-\u2C7B\u2C81\u2C83\u2C85\u2C87\u2C89\u2C8B\u2C8D\u2C8F\u2C91\u2C93\u2C95\u2C97\u2C99\u2C9B\u2C9D\u2C9F\u2CA1\u2CA3\u2CA5\u2CA7\u2CA9\u2CAB\u2CAD\u2CAF\u2CB1\u2CB3\u2CB5\u2CB7\u2CB9\u2CBB\u2CBD\u2CBF\u2CC1\u2CC3\u2CC5\u2CC7\u2CC9\u2CCB\u2CCD\u2CCF\u2CD1\u2CD3\u2CD5\u2CD7\u2CD9\u2CDB\u2CDD\u2CDF\u2CE1\u2CE3\u2CE4\u2CEC\u2CEE\u2CF3\u2D00-\u2D25\u2D27\u2D2D\uA641\uA643\uA645\uA647\uA649\uA64B\uA64D\uA64F\uA651\uA653\uA655\uA657\uA659\uA65B\uA65D\uA65F\uA661\uA663\uA665\uA667\uA669\uA66B\uA66D\uA681\uA683\uA685\uA687\uA689\uA68B\uA68D\uA68F\uA691\uA693\uA695\uA697\uA699\uA69B\uA723\uA725\uA727\uA729\uA72B\uA72D\uA72F-\uA731\uA733\uA735\uA737\uA739\uA73B\uA73D\uA73F\uA741\uA743\uA745\uA747\uA749\uA74B\uA74D\uA74F\uA751\uA753\uA755\uA757\uA759\uA75B\uA75D\uA75F\uA761\uA763\uA765\uA767\uA769\uA76B\uA76D\uA76F\uA771-\uA778\uA77A\uA77C\uA77F\uA781\uA783\uA785\uA787\uA78C\uA78E\uA791\uA793-\uA795\uA797\uA799\uA79B\uA79D\uA79F\uA7A1\uA7A3\uA7A5\uA7A7\uA7A9\uA7AF\uA7B5\uA7B7\uA7B9\uA7BB\uA7BD\uA7BF\uA7C1\uA7C3\uA7C8\uA7CA\uA7D1\uA7D3\uA7D5\uA7D7\uA7D9\uA7F6\uA7FA\uAB30-\uAB5A\uAB60-\uAB68\uAB70-\uABBF\uFB00-\uFB06\uFB13-\uFB17\uFF41-\uFF5A]|\uD801[\uDC28-\uDC4F\uDCD8-\uDCFB\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC]|\uD803[\uDCC0-\uDCF2]|\uD806[\uDCC0-\uDCDF]|\uD81B[\uDE60-\uDE7F]|\uD835[\uDC1A-\uDC33\uDC4E-\uDC54\uDC56-\uDC67\uDC82-\uDC9B\uDCB6-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDCCF\uDCEA-\uDD03\uDD1E-\uDD37\uDD52-\uDD6B\uDD86-\uDD9F\uDDBA-\uDDD3\uDDEE-\uDE07\uDE22-\uDE3B\uDE56-\uDE6F\uDE8A-\uDEA5\uDEC2-\uDEDA\uDEDC-\uDEE1\uDEFC-\uDF14\uDF16-\uDF1B\uDF36-\uDF4E\uDF50-\uDF55\uDF70-\uDF88\uDF8A-\uDF8F\uDFAA-\uDFC2\uDFC4-\uDFC9\uDFCB]|\uD837[\uDF00-\uDF09\uDF0B-\uDF1E\uDF25-\uDF2A]|\uD83A[\uDD22-\uDD43])|[\u01C5\u01C8\u01CB\u01F2\u1F88-\u1F8F\u1F98-\u1F9F\u1FA8-\u1FAF\u1FBC\u1FCC\u1FFC]|(?:[\u02B0-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0374\u037A\u0559\u0640\u06E5\u06E6\u07F4\u07F5\u07FA\u081A\u0824\u0828\u08C9\u0971\u0E46\u0EC6\u10FC\u17D7\u1843\u1AA7\u1C78-\u1C7D\u1D2C-\u1D6A\u1D78\u1D9B-\u1DBF\u2071\u207F\u2090-\u209C\u2C7C\u2C7D\u2D6F\u2E2F\u3005\u3031-\u3035\u303B\u309D\u309E\u30FC-\u30FE\uA015\uA4F8-\uA4FD\uA60C\uA67F\uA69C\uA69D\uA717-\uA71F\uA770\uA788\uA7F2-\uA7F4\uA7F8\uA7F9\uA9CF\uA9E6\uAA70\uAADD\uAAF3\uAAF4\uAB5C-\uAB5F\uAB69\uFF70\uFF9E\uFF9F]|\uD801[\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD81A[\uDF40-\uDF43]|\uD81B[\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD838[\uDC30-\uDC6D\uDD37-\uDD3D]|\uD839\uDCEB|\uD83A\uDD4B)|(?:[\xAA\xBA\u01BB\u01C0-\u01C3\u0294\u05D0-\u05EA\u05EF-\u05F2\u0620-\u063F\u0641-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u0800-\u0815\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C8\u0904-\u0939\u093D\u0950\u0958-\u0961\u0972-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E45\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1100-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17DC\u1820-\u1842\u1844-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C77\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u2135-\u2138\u2D30-\u2D67\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3006\u303C\u3041-\u3096\u309F\u30A1-\u30FA\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA014\uA016-\uA48C\uA4D0-\uA4F7\uA500-\uA60B\uA610-\uA61F\uA62A\uA62B\uA66E\uA6A0-\uA6E5\uA78F\uA7F7\uA7FB-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9E0-\uA9E4\uA9E7-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA6F\uAA71-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB\uAADC\uAAE0-\uAAEA\uAAF2\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF66-\uFF6F\uFF71-\uFF9D\uFFA0-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC50-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF4A\uDF50]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD837\uDF0A|\uD838[\uDD00-\uDD2C\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEA\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[\u16EE-\u16F0\u2160-\u2182\u2185-\u2188\u3007\u3021-\u3029\u3038-\u303A\uA6E6-\uA6EF]|\uD800[\uDD40-\uDD74\uDF41\uDF4A\uDFD1-\uDFD5]|\uD809[\uDC00-\uDC6E])/g);if(1===_.size(t))return!0;if(e)return!1;var r=i.match(/(?:[\u0300-\u036F\u0483-\u0487\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC6\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ABD\u1ABF-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC01\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDE41\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF40\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB3-\uDCB8\uDCBA\uDCBF\uDCC0\uDCC2\uDCC3\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4\uDF00\uDF01\uDF36-\uDF3A\uDF40\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD67-\uDD69\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDD00-\uDDEF])|(?:[\u0903\u093B\u093E-\u0940\u0949-\u094C\u094E\u094F\u0982\u0983\u09BE-\u09C0\u09C7\u09C8\u09CB\u09CC\u09D7\u0A03\u0A3E-\u0A40\u0A83\u0ABE-\u0AC0\u0AC9\u0ACB\u0ACC\u0B02\u0B03\u0B3E\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0B57\u0BBE\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD7\u0C01-\u0C03\u0C41-\u0C44\u0C82\u0C83\u0CBE\u0CC0-\u0CC4\u0CC7\u0CC8\u0CCA\u0CCB\u0CD5\u0CD6\u0CF3\u0D02\u0D03\u0D3E-\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D57\u0D82\u0D83\u0DCF-\u0DD1\u0DD8-\u0DDF\u0DF2\u0DF3\u0F3E\u0F3F\u0F7F\u102B\u102C\u1031\u1038\u103B\u103C\u1056\u1057\u1062-\u1064\u1067-\u106D\u1083\u1084\u1087-\u108C\u108F\u109A-\u109C\u1715\u1734\u17B6\u17BE-\u17C5\u17C7\u17C8\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1A19\u1A1A\u1A55\u1A57\u1A61\u1A63\u1A64\u1A6D-\u1A72\u1B04\u1B35\u1B3B\u1B3D-\u1B41\u1B43\u1B44\u1B82\u1BA1\u1BA6\u1BA7\u1BAA\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1C24-\u1C2B\u1C34\u1C35\u1CE1\u1CF7\u302E\u302F\uA823\uA824\uA827\uA880\uA881\uA8B4-\uA8C3\uA952\uA953\uA983\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9C0\uAA2F\uAA30\uAA33\uAA34\uAA4D\uAA7B\uAA7D\uAAEB\uAAEE\uAAEF\uAAF5\uABE3\uABE4\uABE6\uABE7\uABE9\uABEA\uABEC]|\uD804[\uDC00\uDC02\uDC82\uDCB0-\uDCB2\uDCB7\uDCB8\uDD2C\uDD45\uDD46\uDD82\uDDB3-\uDDB5\uDDBF\uDDC0\uDDCE\uDE2C-\uDE2E\uDE32\uDE33\uDE35\uDEE0-\uDEE2\uDF02\uDF03\uDF3E\uDF3F\uDF41-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63]|\uD805[\uDC35-\uDC37\uDC40\uDC41\uDC45\uDCB0-\uDCB2\uDCB9\uDCBB-\uDCBE\uDCC1\uDDAF-\uDDB1\uDDB8-\uDDBB\uDDBE\uDE30-\uDE32\uDE3B\uDE3C\uDE3E\uDEAC\uDEAE\uDEAF\uDEB6\uDF20\uDF21\uDF26]|\uD806[\uDC2C-\uDC2E\uDC38\uDD30-\uDD35\uDD37\uDD38\uDD3D\uDD40\uDD42\uDDD1-\uDDD3\uDDDC-\uDDDF\uDDE4\uDE39\uDE57\uDE58\uDE97]|\uD807[\uDC2F\uDC3E\uDCA9\uDCB1\uDCB4\uDD8A-\uDD8E\uDD93\uDD94\uDD96\uDEF5\uDEF6\uDF03\uDF34\uDF35\uDF3E\uDF3F\uDF41]|\uD81B[\uDF51-\uDF87\uDFF0\uDFF1]|\uD834[\uDD65\uDD66\uDD6D-\uDD72])|(?:[0-9\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u1090-\u1099\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\uA620-\uA629\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]|\uD801[\uDCA0-\uDCA9]|\uD803[\uDD30-\uDD39]|\uD804[\uDC66-\uDC6F\uDCF0-\uDCF9\uDD36-\uDD3F\uDDD0-\uDDD9\uDEF0-\uDEF9]|\uD805[\uDC50-\uDC59\uDCD0-\uDCD9\uDE50-\uDE59\uDEC0-\uDEC9\uDF30-\uDF39]|\uD806[\uDCE0-\uDCE9\uDD50-\uDD59]|\uD807[\uDC50-\uDC59\uDD50-\uDD59\uDDA0-\uDDA9\uDF50-\uDF59]|\uD81A[\uDE60-\uDE69\uDEC0-\uDEC9\uDF50-\uDF59]|\uD835[\uDFCE-\uDFFF]|\uD838[\uDD40-\uDD49\uDEF0-\uDEF9]|\uD839[\uDCF0-\uDCF9]|\uD83A[\uDD50-\uDD59]|\uD83E[\uDFF0-\uDFF9])|[_\u203F\u2040\u2054\uFE33\uFE34\uFE4D-\uFE4F\uFF3F]|(?:[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F])/g);return 1===_.size(r)}function os(i){f.fF.assert(function(){return 1===_.size(i)},"char is supposed to be 1 character");var e=i.match(/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]|\u2028|\u2029/g);return 1===_.size(e)}function as(i,e){return f.fF.assertValue(i,"binding"),f.fF.assertValue(e,"visitor"),function(i){return!!i.Hierarchy&&!nr(i)}(i)?e.visitHierarchy(i):nr(i)?e.visitHierarchyLevel(i):ir(i)?rr(i)?void f.fF.assertFail("conceptual property with variation"):e.visitProperty(i):e.visitEntity(i)}function dr(i,e){return f.fF.assertValue(i,"phrasingModel"),f.fF.assertValue(e,"visitor"),i instanceof si?e.visitAdjectivePhrasing(i):i instanceof li?e.visitNounPhrasing(i):i instanceof pi?e.visitVerbPhrasing(i):i instanceof di?e.visitPrepositionPhrasing(i):i instanceof ui?e.visitDynamicAdjectivePhrasing(i):i instanceof ci?e.visitDynamicNounPhrasing(i):i instanceof gi?e.visitAttributePhrasing(i):i instanceof hi?e.visitNamePhrasing(i):void f.fF.assertFail("Unknown phrasing modeltype")}function lt(i,e){var t,r;_.isEmpty(i)&&(i=[]);for(var o={},a=0,s=i;a<s.length;a++){var u=s[a],c=Object.keys(u)[0],l=u[c];o[p=ze.getUniqueKey(c)]||(o[p]={value:c,properties:l})}var g=[];if(!_.isEmpty(e))for(var m=0,E=e;m<E.length;m++){var P=E[m],F={};if(o[p=ze.getUniqueKey(P.value)]){if("Deleted"!==o[p].properties.State)F=o[p].properties;else if("Authored"!==P.state)continue;delete o[p]}F.State=P.state,F.Source={Type:P.sourceType},null!=P.sourceAgent?F.Source.Agent=P.sourceAgent:delete F.Source.Agent,null!=P.type?F.Type=P.type:delete F.Type,null!=P.weight?F.Weight=P.weight:delete F.Weight,null!=P.lastModified?F.LastModified=P.lastModified:delete F.LastModified,g.push(((t={})[P.value]=F,t))}for(var p in o)"Deleted"===(l=o[p].properties).State&&g.push(((r={})[o[p].value]=l,r));return _.isEmpty(g)?void 0:g}var ds=function(){function i(){}return i.prototype.visitEntity=function(e){return{Definition:{Binding:{ConceptualEntity:e.tableName}},State:e.state,Visibility:{Value:e.visibility,State:e.visibilityState}}},i.prototype.visitProperty=function(e){return{Definition:{Binding:{ConceptualEntity:e.tableName,ConceptualProperty:e.propertyName}},State:e.state,Visibility:{Value:e.visibility,State:e.visibilityState}}},i.prototype.visitHierarchy=function(e){f.fF.assertFail("not implemented")},i.prototype.visitHierarchyLevel=function(e){f.fF.assertFail("not implemented")},i}();function gs(i,e){var t=(0,v.pi)({},i||{});return null==i&&(t={}),e.where?t.Where=fe(e.where):delete t.Where,e.when?t.When=fe(e.when):delete t.When,e.duration?t.Duration=fe(e.duration):delete t.Duration,e.occurrences?t.Occurrences=fe(e.occurrences):delete t.Occurrences,_.isEmpty(t)&&(t=void 0),t}function hs(i,e){if(null!=e){var t=i?.[0];return[t=(0,v.pi)((0,v.pi)({},t||{}),{Target:fe(e.target),Aggregation:e.aggregation,Operator:e.operator,Value:e.value})]}}function fs(i,e){var t={};return _.forEach(e,function(r){var o=i?.[r.lsdlName];t[r.lsdlName]=null!=o?o:{Target:{Entity:r.entityName}}}),_.isEmpty(t)?void 0:t}function ms(i,e){var t=[];return _.isEmpty(i)?_.forEach(e,function(r){var o=new gr;t.push(dr(r,o))}):_.forEach(e,function(r){var o=_.find(i,function(s){return r.equalsToPhrasingReference(s)});if(null!=o){var a=new gr(o);t.push((0,v.pi)({TemplateSchema:o.TemplateSchema,Weight:o.Weight},dr(r,a)))}}),_.isEmpty(t)?void 0:t}function Ot(i,e){var t=[];return _.forEach(e,function(r){var o=_.find(i,function(a){return r.equalsToPrepPhraseReference(a)});null==o?t.push({Prepositions:lt(void 0,r.prepositions),Object:fe(r.objectEntity)}):(o.Prepositions=lt(o.Prepositions,r.prepositions),o.Object=fe(r.objectEntity),t.push(o))}),_.isEmpty(t)?void 0:t}var gr=function(){function i(e){this.lsdlPhrasing=_.cloneDeep(e)}return i.prototype.visitAdjectivePhrasing=function(e){var t;return null!=this.lsdlPhrasing&&ar(this.lsdlPhrasing)&&(t=this.lsdlPhrasing.Adjective),(0,v.pi)((0,v.pi)({},this.getCommonLsdlPhrasingProperties(e)),{Adjective:{Subject:fe(e.subject),Adjectives:lt(t?.Adjectives,e.adjectives),Antonyms:lt(t?.Antonyms,e.antonyms),Measurement:fe(e.measurement),AdverbPhrases:t?.AdverbPhrases,PrepositionalPhrases:Ot(t?.PrepositionalPhrases,e.prepositionalPhrases)}})},i.prototype.visitNounPhrasing=function(e){var t;return this.lsdlPhrasing&&or(this.lsdlPhrasing)&&(t=this.lsdlPhrasing.Noun),(0,v.pi)((0,v.pi)({},this.getCommonLsdlPhrasingProperties(e)),{Noun:{Subject:fe(e.subject),Nouns:lt(t?.Nouns,e.nouns),PrepositionalPhrases:Ot(t?.PrepositionalPhrases,e.prepositionalPhrases)}})},i.prototype.visitVerbPhrasing=function(e){var t;return this.lsdlPhrasing&&lr(this.lsdlPhrasing)&&(t=this.lsdlPhrasing.Verb),(0,v.pi)((0,v.pi)({},this.getCommonLsdlPhrasingProperties(e)),{Verb:{Subject:fe(e.subject),Verbs:lt(t?.Verbs,e.verbs),IndirectObject:fe(e.indirectObject),Object:fe(e.directObject),AdverbPhrases:t?.AdverbPhrases,PrepositionalPhrases:Ot(t?.PrepositionalPhrases,e.prepositionalPhrases)}})},i.prototype.visitPrepositionPhrasing=function(e){var t;return this.lsdlPhrasing&&cr(this.lsdlPhrasing)&&(t=this.lsdlPhrasing.Preposition),(0,v.pi)((0,v.pi)({},this.getCommonLsdlPhrasingProperties(e)),{Preposition:{Subject:fe(e.subject),Prepositions:lt(t?.Prepositions,e.prepositions),Object:fe(e.object),PrepositionalPhrases:Ot(t?.PrepositionalPhrases,e.prepositionalPhrases)}})},i.prototype.visitDynamicAdjectivePhrasing=function(e){var t;return this.lsdlPhrasing&&sr(this.lsdlPhrasing)&&(t=this.lsdlPhrasing.DynamicAdjective),(0,v.pi)((0,v.pi)({},this.getCommonLsdlPhrasingProperties(e)),{DynamicAdjective:{Subject:fe(e.subject),Adjective:fe(e.adjective),PrepositionalPhrases:Ot(t?.PrepositionalPhrases,e.prepositionalPhrases)}})},i.prototype.visitDynamicNounPhrasing=function(e){var t;return this.lsdlPhrasing&&ur(this.lsdlPhrasing)&&(t=this.lsdlPhrasing.DynamicNoun),(0,v.pi)((0,v.pi)({},this.getCommonLsdlPhrasingProperties(e)),{DynamicNoun:{Subject:fe(e.subject),Noun:fe(e.noun),PrepositionalPhrases:Ot(t?.PrepositionalPhrases,e.prepositionalPhrases)}})},i.prototype.visitAttributePhrasing=function(e){var t;return this.lsdlPhrasing&&pr(this.lsdlPhrasing)&&(t=this.lsdlPhrasing.Attribute),(0,v.pi)((0,v.pi)({},this.getCommonLsdlPhrasingProperties(e)),{Attribute:{Subject:fe(e.subject),Object:fe(e.object),PrepositionalPhrases:Ot(t?.PrepositionalPhrases,e.prepositionalPhrases)}})},i.prototype.visitNamePhrasing=function(e){return(0,v.pi)((0,v.pi)({},this.getCommonLsdlPhrasingProperties(e)),{Name:{Subject:fe(e.subject),Name:fe(e.name)}})},i.prototype.getCommonLsdlPhrasingProperties=function(e){return{ID:e.ID,LastModified:e.lastModified,State:e.state,Source:e.source}},i}();function fe(i){return null!=i?{Role:i.role}:void 0}var ys=function(){function i(e,t){this.lsdlEntityName=e,this.state=t.State,this.terms=this.getTermsForLsdlEntity(t);var r=t.Visibility;null!=r&&(this.visibility=r.Value,this.visibilityState=r.State)}return i.prototype.visitEntity=function(e){return new Xa(e.ConceptualEntity,this.lsdlEntityName,this.state,this.terms,this.visibility,this.visibilityState)},i.prototype.visitProperty=function(e){return new Zi(e.ConceptualEntity,e.ConceptualProperty,this.lsdlEntityName,this.state,this.terms,this.visibility,this.visibilityState)},i.prototype.visitHierarchy=function(e){return new Ya(e.ConceptualEntity,e.Hierarchy,e.VariationSet,e.VariationSource,this.lsdlEntityName,this.state,this.terms,this.visibility,this.visibilityState)},i.prototype.visitHierarchyLevel=function(e){return new es(e.ConceptualEntity,e.Hierarchy,e.HierarchyLevel,e.VariationSet,e.VariationSource,this.lsdlEntityName,this.state,this.terms,this.visibility,this.visibilityState)},i.prototype.getTermsForLsdlEntity=function(e){var t=e.Terms;if(!_.isEmpty(t)){for(var r={},o=[],a=0,s=t;a<s.length;a++){var c=hr(s[a]);if("Deleted"!==c.state){var l=ze.getUniqueKey(c.value);r[l]||(r[l]=c,o.push(c))}}return o}},i}(),Es=function(){function i(e,t,r){this.roles=t,this.parentRelationship=r,this.state=e.State,this.source=e.Source}return i.prototype.visitAdjectivePhrasing=function(e){var t=e.Adjective,r=[];(function(i){return!!i.Adjectives})(t)&&(r=jt(t.Adjectives));var o=jt(t.Antonyms),a=this.createPrepPhrases(t.PrepositionalPhrases);return new si(Ce(this.roles,t.Subject),r,o,Ce(this.roles,t.Measurement),a,e.LastModified,e.ID,this.state,this.source,this.parentRelationship,e)},i.prototype.visitNounPhrasing=function(e){var t=e.Noun,r=jt(t.Nouns),o=this.createPrepPhrases(t.PrepositionalPhrases);return new li(Ce(this.roles,t.Subject),r,o,e.LastModified,e.ID,this.state,this.source,this.parentRelationship,e)},i.prototype.visitVerbPhrasing=function(e){var t=e.Verb,r=jt(t.Verbs),o=this.createPrepPhrases(t.PrepositionalPhrases);return new pi(Ce(this.roles,t.Subject),r,Ce(this.roles,t.IndirectObject),Ce(this.roles,t.Object),o,e.LastModified,e.ID,this.state,this.source,this.parentRelationship,e)},i.prototype.visitPrepositionPhrasing=function(e){var t=e.Preposition,r=jt(t.Prepositions),o=this.createPrepPhrases(t.PrepositionalPhrases);return new di(Ce(this.roles,t.Subject),r,Ce(this.roles,t.Object),o,e.LastModified,e.ID,this.state,this.source,this.parentRelationship,e)},i.prototype.visitDynamicAdjectivePhrasing=function(e){var t=e.DynamicAdjective,r=this.createPrepPhrases(t.PrepositionalPhrases);return new ui(Ce(this.roles,t.Subject),Ce(this.roles,t.Adjective),r,e.LastModified,e.ID,this.state,this.source,this.parentRelationship,e)},i.prototype.visitDynamicNounPhrasing=function(e){var t=e.DynamicNoun,r=this.createPrepPhrases(t.PrepositionalPhrases);return new ci(Ce(this.roles,t.Subject),Ce(this.roles,t.Noun),r,e.LastModified,e.ID,this.state,this.source,this.parentRelationship,e)},i.prototype.visitAttributePhrasing=function(e){var t=e.Attribute,r=this.createPrepPhrases(t.PrepositionalPhrases);return new gi(Ce(this.roles,t.Subject),Ce(this.roles,t.Object),r,e.LastModified,e.ID,this.state,this.source,this.parentRelationship,e)},i.prototype.visitNamePhrasing=function(e){var t=e.Name;return new hi(Ce(this.roles,t.Subject),Ce(this.roles,t.Name),void 0,e.LastModified,e.ID,this.state,this.source,this.parentRelationship,e)},i.prototype.createPrepPhrases=function(e){var t=this,r=[];return _.isEmpty(e)||e.forEach(function(o){var a=jt(o.Prepositions);r.push(new Xi(a,Ce(t.roles,o.Object),o))}),r},i}();function hr(i){var e=Object.keys(i)[0],t=i[e],r=t.Source;return new ze(e,t.State,t.Weight,r?.Type,r?.Agent,t.Type,t.LastModified)}function jt(i){return _.map(i,function(e){return hr(e)})}function Ce(i,e){if(null!=e){var t=i[e.Role];if(null!=t)return{role:e.Role,entity:t.Target.Entity}}}var Ht=function(){function i(e){var t;f.fF.assertValue(e,"linguisticSchema"),this.document=e,this.existingEntityNames={},this.existingRelationshipNames={},this.ensureAgentModels(),this.runtimeUnderstanding=null===(t=this.document.DynamicImprovement)||void 0===t?void 0:t.RuntimeUnderstanding}return i.prototype.toJsonString=function(){return JSON.stringify(this.document)},i.prototype.getEntities=function(){return this.ensureEntityModels(),f.fF.assertValue(this.entityModels,"entityModels"),this.entityModels},i.prototype.getEntityForTable=function(e){return f.fF.assertValue(e,"tableName"),this.ensureEntityModels(),_.find(this.entityModels,function(t){return $e.isConceptualEntityModel(t)&&t.tableName===e})},i.prototype.getEntityForProperty=function(e,t){return f.fF.assertValue(e,"tableName"),f.fF.assertValue(t,"propertyName"),this.ensureEntityModels(),_.find(this.entityModels,function(r){return $e.isConceptualPropertyModel(r)&&r.tableName===e&&r.propertyName===t})},i.prototype.getEntityForHierarchy=function(e,t,r,o){return f.fF.assertValue(e,"tableName"),f.fF.assertValue(t,"hierarchy"),this.ensureEntityModels(),_.find(this.entityModels,function(a){return $e.isConceptualHierarchyModel(a)&&a.tableName===e&&a.hierarchy===t&&a.variationSet===r&&a.variationSource===o})},i.prototype.getEntityForHierarchyLevel=function(e,t,r,o,a){return f.fF.assertValue(e,"tableName"),f.fF.assertValue(t,"hierarchy"),f.fF.assertValue(r,"hierarchyLevel"),this.ensureEntityModels(),_.find(this.entityModels,function(s){return $e.isConceptualHierarchyLevelModel(s)&&s.tableName===e&&s.hierarchy===t&&s.variationSet===o&&s.variationSource===a&&s.hierarchyLevel===r})},i.prototype.getEntityWithEntityKey=function(e){return f.fF.assertValue(e,"entity key"),_.find(this.entityModels,function(t){return t.lsdlName===e})},i.prototype.getEntityWithRoleReference=function(e,t){var r=_.find(e,function(o){return o.lsdlName===t});if(r)return _.find(this.entityModels,function(o){return r.entityName===o.lsdlName})},i.prototype.getRelationships=function(){return this.ensureRelationshipModels(),f.fF.assertValue(this.relationshipModels,"relationshipModels"),this.relationshipModels},i.prototype.getRelationshipWithRelationshipKey=function(e){return f.fF.assertValue(e,"relationship key"),_.find(this.relationshipModels,function(t){return t.lsdlName===e})},i.prototype.getAgents=function(e){return f.fF.assertValue(this.agentModels,"agentModels"),"oaiPhrasings"===e?_.filter(this.agentModels,function(t){return"PowerBI.AzureOpenAIPhrasings"===t.name}):"allSynonyms"===e?_.filter(this.agentModels,function(t){return"PowerBI.AzureOpenAIPhrasings"!==t.name}):"externalSynonyms"===e?_.filter(this.agentModels,function(t){return"PowerBI.AzureOpenAISynonyms"===t.name||"PowerBI.OrganizationLsdlSharing"===t.name}):void f.fF.assertFail("Incorrect agent category")},i.prototype.setAgents=function(e){f.fF.assertValue(e,"agentModels"),_.forEach(e,function(t){return t.markDirty()}),this.agentModels=e},i.prototype.getRuntimeUnderstanding=function(){return this.runtimeUnderstanding},i.prototype.setRuntimeUnderstanding=function(e){this.runtimeUnderstanding=e??void 0},i.prototype.addEntity=function(e,t){if(f.fF.assertValue(e,"tableName"),f.fF.assertValue(t,"propertyName"),this.ensureEntityModels(),!_.find(this.document.Entities,function(a){return"Deleted"===a.State&&null!=a.Definition&&mi(a.Definition)&&ir(a.Definition.Binding)&&!rr(a.Definition.Binding)&&a.Definition.Binding.ConceptualEntity===e&&a.Definition.Binding.ConceptualProperty===t})){var r=this.getUniqueEntityName(e,t),o=new Zi(e,t,r,"Generated",void 0,void 0,void 0,!0);return this.entityModels.push(o),o}},i.prototype.addRelationship=function(e,t){void 0===t&&(t=void 0),f.fF.assertValue(e,"relationshipModel"),this.ensureRelationshipModels();var r=_.isEmpty(t)?e.lsdlName:t,o=this.getUniqueRelationshipName(r);return this.relationshipModels.push(this.mutateRelationshipWith(e,{lsdlName:o})),o},i.prototype.updateRelationship=function(e,t,r){void 0===r&&(r=void 0),this.ensureRelationshipModels();var o=_.some(t.phrasings,function(p){return _.some(e.phrasings,function(g){return g.equalsToPhrasingReferenceModel(p)&&Ci(g)})}),a=_.size(e.phrasings)>1||o,s=_.isEmpty(r)?t.lsdlName:r,u=a?this.getUniqueRelationshipName(s):e.lsdlName,c=this.mutateRelationshipWith(t,{lsdlName:u,basedOn:e.lsdlName});c.setRelationshipUpdated(),_.forEach(c.phrasings,function(p){return p.setPhrasingUpdated()});var l=_.indexOf(this.relationshipModels,e);return this.relationshipModels.splice(l,a?0:1,c),a&&_.forEach(t.phrasings,function(p){_.remove(e.phrasings,function(g){return g.equalsToPhrasingReferenceModel(p)&&!Ci(g)}),_.forEach(e.phrasings,function(g){g.equalsToPhrasingReferenceModel(p)&&Ci(g)&&e.deletePhrasing(g)})}),u},i.prototype.commit=function(){var e,t=!1;return this.runtimeUnderstanding!==(null===(e=this.document.DynamicImprovement)||void 0===e?void 0:e.RuntimeUnderstanding)&&(null==this.document.DynamicImprovement&&(this.document.DynamicImprovement={}),this.document.DynamicImprovement=(0,v.pi)((0,v.pi)({},this.document.DynamicImprovement),{RuntimeUnderstanding:this.runtimeUnderstanding}),t=!0),_.some(this.entityModels,function(r){return r.shouldCommit()})&&(function(i,e){if(!_.isEmpty(e))for(var t=function(u){var c=_.find(i.Entities,function(g,m){if(mi(g.Definition)){var E=g.Definition.Binding;if(E&&E.ConceptualEntity)return m===u.lsdlName}});if(c)c.State=u.state,c.Visibility={Value:u.visibility,State:u.visibilityState},c.Terms=lt(c.Terms,u.terms);else{i.Entities=i.Entities||{};var l=new ds,p=function(i,e){return f.fF.assertValue(i,"model"),f.fF.assertValue(e,"visitor"),$e.isConceptualHierarchyLevelModel(i)?e.visitHierarchyLevel(i):$e.isConceptualHierarchyModel(i)?e.visitHierarchy(i):$e.isConceptualPropertyModel(i)?e.visitProperty(i):$e.isConceptualEntityModel(i)?e.visitEntity(i):void f.fF.assertFail("unknown entity model")}(u,l);p&&(p.Terms=lt(p.Terms,u.terms),i.Entities[u.lsdlName]=p)}u.resetCommitState()},r=0,o=e;r<o.length;r++)t(o[r])}(this.document,this.entityModels),t=!0),_.some(this.relationshipModels,function(r){return r.shouldCommit()})&&(function(i,e){var t;if(!_.isEmpty(e))for(var r=0,o=e;r<o.length;r++){var a=o[r],s=null!==(t=a.basedOn)&&void 0!==t?t:a.lsdlName;null==i.Relationships[s]&&(i.Relationships[s]={});var u=i.Relationships[s];i.Relationships[a.lsdlName]=(0,v.pi)((0,v.pi)({},u),{Binding:null!=a.table?{ConceptualEntity:a.table}:void 0,State:a.state,LastModified:a.lastModified,SemanticSlots:gs(u.SemanticSlots,a.semanticSlots),Conditions:hs(u.Conditions,a.condition),Roles:fs(u.Roles,a.roles),Phrasings:ms(u.Phrasings,a.phrasings)}),a.resetCommitState()}}(this.document,this.relationshipModels),t=!0),_.some(this.agentModels,function(r){return r.shouldCommit()})&&(function(i,e){if(!_.isEmpty(e)){i.Agents||(i.Agents={});for(var t=0,r=e;t<r.length;t++){var o=r[t];i.Agents[o.name]={LastModified:o.lastModified,State:o.state},o.resetCommitState()}}}(this.document,this.agentModels),t=!0),t},i.prototype.ensureEntityModels=function(){var e=this;this.entityModels||(this.entityModels=function(i){if(_.isEmpty(i))return[];var e=[];for(var t in i){var r=i[t];if("Deleted"!==r.State&&mi(r.Definition)){var o=r.Definition.Binding;if(null!=o?.ConceptualEntity){var s=as(o,new ys(t,r));s&&e.push(s)}}}return e}(this.document.Entities),_.forEach(this.entityModels,function(t){return e.existingEntityNames[t.lsdlName]=!0}))},i.prototype.ensureRelationshipModels=function(){var e=this;this.relationshipModels||(this.relationshipModels=function(i){var e;if(_.isEmpty(i))return[];var t=[],r=function(s){var u=i[s];if("Deleted"===u.State)return"continue";var c=[],l=new tr(s,null===(e=u.Binding)||void 0===e?void 0:e.ConceptualEntity,c,function(i,e){var t=[];if(_.isEmpty(i))return t;for(var r=0,o=i;r<o.length;r++){var a=o[r],s=new Yi(Ce(e,a.Target),a.Aggregation,a.Operator,a.Value);t.push(s)}return t}(u.Conditions,u.Roles),function(i){var e=[];if(_.isEmpty(i))return e;for(var t in i){var o=new er(t,i[t].Target.Entity);e.push(o)}return e}(u.Roles),function(i,e){if(null!=i)return new fi(Ce(e,i.Where),Ce(e,i.When),Ce(e,i.Duration),Ce(e,i.Occurrences))}(u.SemanticSlots,u.Roles),u.LastModified,u.State);_.forEach(u.Phrasings,function(p){if("Deleted"!==p.State){var m=function(i,e){return f.fF.assertValue(i,"phrasing"),f.fF.assertValue(e,"visitor"),ar(i)?e.visitAdjectivePhrasing(i):or(i)?e.visitNounPhrasing(i):lr(i)?e.visitVerbPhrasing(i):cr(i)?e.visitPrepositionPhrasing(i):sr(i)?e.visitDynamicAdjectivePhrasing(i):ur(i)?e.visitDynamicNounPhrasing(i):pr(i)?e.visitAttributePhrasing(i):function(i){return!!i.Name}(i)?e.visitNamePhrasing(i):void f.fF.assertFail("Unknown phrasing type")}(p,new Es(p,u.Roles,l));m?c.push(m):f.fF.assertFail("Empty phrasing model - Failed to create")}}),t.push(l)};for(var o in i)r(o);return t}(this.document.Relationships),_.forEach(this.relationshipModels,function(t){return e.existingRelationshipNames[t.lsdlName]=!0}))},i.prototype.ensureAgentModels=function(){var e=function(i){var e=[];for(var t in i)e.push(new Ki(t,i[t]));return e}(this.document.Agents),t=(0,v.ev)([],e,!0);_.forEach(["PowerBI.AzureOpenAISynonyms","PowerBI.AzureOpenAIPhrasings","PowerBI.OrganizationLsdlSharing","Thesaurus"],function(o){_.find(t,function(a){return a.name===o})||t.push(new Ki(o,{State:"Enabled"}))}),this.agentModels=t},i.prototype.getUniqueEntityName=function(e,t){var r=vi(e.toLowerCase(),"table"),o=vi(t.toLowerCase(),"column"),a="".concat(r,".").concat(o),s=(0,he.zE)(this.existingEntityNames,a);return this.existingEntityNames[s]=!0,s},i.prototype.getUniqueRelationshipName=function(e){var t=vi(e.toLowerCase(),"relationship"),r=(0,he.zE)(this.existingRelationshipNames,t);return this.existingRelationshipNames[r]=!0,r},i.prototype.mutateRelationshipWith=function(e,t){var r,o;return new tr(null!==(r=t.lsdlName)&&void 0!==r?r:e.lsdlName,e.table,(0,v.ev)([],e.phrasings,!0),e.condition?[e.condition]:[],(0,v.ev)([],e.roles,!0),e.semanticSlots,e.lastModified,e.state,!0,null!==(o=t.basedOn)&&void 0!==o?o:e.basedOn)},i}();function Ci(i){return"Generated"===i.state||"Suggested"===i.state}var Ct=function(){function i(e){this.deferredPromise=e}return i.prototype.signalCompletion=function(){this.deferredPromise.resolve()},i.prototype.getDeferredPromise=function(){return this.deferredPromise.promise},i}();function fr(i,e,t){var r;switch(f.fF.assert(function(){return!_.isEmpty(i)},"lsdlAgents should be defined and non empty"),f.fF.assertValue(e,"localizationService"),f.fF.assertValue(t,"target should be defined"),t){case"Synonyms":var o=_.includes(i,"PowerBI.AzureOpenAISynonyms"),a=_.includes(i,"PowerBI.OrganizationLsdlSharing");f.fF.assert(function(){return o||a},"target: Synonyms should contain AzureOpenAISynonyms or OrganizationLsdlSharing agent or both in the improve lsdl flow"),r=mr(o,a,e);break;case"Phrasings":f.fF.assert(function(){return _.includes(i,"PowerBI.AzureOpenAIPhrasings")},"target: Phrasings should contain AzureOpenAIPhrasings agent in the improve lsdl flow"),r=vr(e);break;default:f.fF.assertFail("target should be synonyms or phrasings")}return r}function mr(i,e,t){return{emphasis:t.get(i&&e?"Qna_ImproveLsdl_Synonyms_Copilot_Org":i?"Qna_ImproveLsdl_Synonyms_Copilot":"Qna_ImproveLsdl_Synonyms_Org"),text:t.get(i?"Qna_ImproveLsdl_Copilot_Disclaimer":"Qna_ImproveLsdl_Synonyms_Org_Message")}}function vr(i){var e=i.format("Qna_ImproveLsdl_Copilot_Phrasings_Prompt",[i.get("Qna_ImproveLsdl_Copilot_Disclaimer")]);return{emphasis:i.get("Qna_ImproveLsdl_Phrasings_Copilot"),text:e}}function Di(i,e,t){void 0===t&&(t=!1);var r=e.getAgents(i),o=_.chain(r).filter(function(a){var s="Enabled"===a.state,u=(0,Fn.g)(a.lastModified);return t?s:s&&u}).map(function(a){return a.name}).value();return"oaiPhrasings"!==i||_.find(r,function(a){return"PowerBI.AzureOpenAIPhrasings"===a.name})?"externalSynonyms"===i&&(_.find(r,function(a){return"PowerBI.AzureOpenAISynonyms"===a.name})||o.push("PowerBI.AzureOpenAISynonyms"),_.find(r,function(a){return"PowerBI.OrganizationLsdlSharing"===a.name})||o.push("PowerBI.OrganizationLsdlSharing")):o.push("PowerBI.AzureOpenAIPhrasings"),o}var As=function(i){function e(t,r,o,a,s,u,c){var l=i.call(this,c)||this;return l.featureSwitchService=t,l.conceptualSchemaProxy=r,l.dataModelService=o,l.dataSourcesService=a,l.explorationCapabilitiesService=s,l.qnaSupportabilityService=u,l}return(0,v.ZT)(e,i),e.prototype.execute=function(){var t;return(0,v.mG)(this,void 0,void 0,function(){var o,a,s;return(0,v.Jh)(this,function(u){switch(u.label){case 0:return[4,this.featureSwitchService.getFeatureSwitches()];case 1:return u.sent().qnaCopilotPhrasings?[4,this.dataModelService.getLinguisticSchema()]:(this.signalCompletion(),[2,this.getDeferredPromise()]);case 2:return o=u.sent(),[4,Wi(this.conceptualSchemaProxy,this.dataSourcesService,this.explorationCapabilitiesService,this.qnaSupportabilityService,o)];case 3:return u.sent()?(a=new Ht(o),s=Di("oaiPhrasings",a),_.includes(s,"PowerBI.AzureOpenAIPhrasings")&&this.doneOAISynonyms(a)&&this.hasAuthoredTerm(a)?(null===(t=this.next)||void 0===t||t.execute(s),[2,this.getDeferredPromise()]):(this.signalCompletion(),[2,this.getDeferredPromise()])):(this.signalCompletion(),[2,this.getDeferredPromise()])}})})},e.prototype.doneOAISynonyms=function(t){var r=Di("externalSynonyms",t);return!_.includes(r,"PowerBI.AzureOpenAISynonyms")},e.prototype.hasAuthoredTerm=function(t){var r=t.getEntities();return _.some(r,function(o){return _.some(o.terms,function(a){return a.isAuthored})})},e}(Ct),Fs=function(i){function e(t,r,o,a,s,u){var c=i.call(this,u)||this;return c.conceptualSchemaProxy=t,c.dataModelService=r,c.dataSourcesService=o,c.explorationCapabilitiesService=a,c.qnaSupportabilityService=s,c}return(0,v.ZT)(e,i),e.prototype.execute=function(){var t;return(0,v.mG)(this,void 0,void 0,function(){var r,o,a;return(0,v.Jh)(this,function(s){switch(s.label){case 0:return[4,this.dataModelService.getLinguisticSchema()];case 1:return r=s.sent(),[4,Wi(this.conceptualSchemaProxy,this.dataSourcesService,this.explorationCapabilitiesService,this.qnaSupportabilityService,r)];case 2:return s.sent()?(o=new Ht(r),a=Di("externalSynonyms",o),_.isEmpty(a)?this.signalCompletion():null===(t=this.next)||void 0===t||t.execute(a),[2,this.getDeferredPromise()]):(this.signalCompletion(),[2,this.getDeferredPromise()])}})})},e}(Ct),Is={provide:"qnaBannerService",useFactory:function(){return(0,v.mG)(this,void 0,void 0,function(){return(0,v.Jh)(this,function(i){return[2,new xs]})})},deps:[]},me={showBanners:!1,banners:[]},xs=function(){function i(){var e;this.bannerContent$=new G.X(((e={}).ToolingHome=me,e.ToolingSynonyms=me,e.ToolingPhrasings=me,e.Visual=me,e))}return i.prototype.setContent=function(e){f.fF.assertValue(e,"bannersBySurface"),_.forEach(e,function(t){f.fF.assertValue(t,"banner content should not be null")}),this.bannerContent$.next(e)},i.prototype.updateContent=function(e,t){f.fF.assertValue(e,"qnaBannerSurface"),f.fF.assertValue(t,"updatedContent");var r=this.bannerContent$.value;r[e]=t,this.bannerContent$.next(r)},i.prototype.getBannerContent=function(e){return f.fF.assertValue(e,"qnaBannerSurface"),this.bannerContent$.asObservable().pipe((0,ne.U)(function(t){return t[e]}))},i.prototype.dismissBanner=function(e,t){f.fF.assertValue(e,"qnaBannerSurface"),f.fF.assertValue(t,"qnaBannerId");var o=(0,v.pi)({},this.bannerContent$.value[e]),a=_.find(o.banners,function(s){return s.id===t});null!=a?(a.isVisible=!1,o.banners=(0,v.ev)([],o.banners,!0),this.updateContent(e,o),1===_.size(o.banners)&&o.onDismissAllBanners&&o.onDismissAllBanners()):f.fF.assertFail("banner with id: ".concat(t," not found"))},i.\u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac=function(t){return new(t||i)}}),i}(),Cr=function(i){function e(t,r,o,a,s,u,c,l,p){var g=i.call(this,p)||this;return g.accountService=t,g.dataSourcesService=r,g.explorationNavigationService=o,g.qnaBannerService=a,g.qnaToolingLauncher=s,g.localizationService=u,g.improveLsdlBackgroundTelemetry=c,g.target=l,g}return(0,v.ZT)(e,i),e.prototype.execute=function(t){var r;return(0,v.mG)(this,void 0,void 0,function(){var a,s,u,c,l,p,g=this;return(0,v.Jh)(this,function(m){switch(m.label){case 0:return[4,this.accountService.isSignedInAsync()];case 1:return m.sent()?(this.clearBannerContent(),null===(r=this.next)||void 0===r||r.execute(t),[2,this.getDeferredPromise()]):(a=this.localizationService.get("Synonyms"===this.target?"Qna_ImproveLsdl_Synonyms_LoginMessage":"Qna_ImproveLsdl_Phrasings_LoginMessage"),s={emphasis:this.localizationService.get("Qna_ImproveLsdl_Login"),text:a},u=this.localizationService.get("SignInButton"),c=this.localizationService.get("Synonyms"===this.target?"Qna_ImproveLsdl_Synonyms_AddYourOwnButton":"Qna_ImproveLsdl_Phrasings_AddYourOwnButton"),l=function(P){g.improveLsdlBackgroundTelemetry.logSigninEvent({surface:P,type:g.target,action:"Login"}),g.accountService.trySignInAsync()},this.qnaBannerService.setContent(((p={}).Visual={showBanners:!0,banners:[{id:he.b$.generateGuid(),message:s,isVisible:!0,allowDismiss:!0,bannerType:"copilot",actions:[{id:"login",text:u,actionAppearance:"primary"},{id:"launchTooling",text:c,actionAppearance:"secondary"}]}],actionHandlers:new Map([["login",function(){return l("Visual")}],["launchTooling",function(){g.improveLsdlBackgroundTelemetry.logSigninEvent({surface:"Visual",type:g.target,action:"AddYourOwn"}),g.qnaToolingLauncher.showToolingDialog({dataSources:g.dataSourcesService.get(),exploration:g.explorationNavigationService.getCurrentExploration(),entryPoint:"VisualBanner",entryContentType:"Synonyms"===g.target?"bulkEditing":"managePhrasings"})}]])},p.ToolingHome={showBanners:!0,banners:[{id:he.b$.generateGuid(),message:s,isVisible:!0,allowDismiss:!0,bannerType:"copilot",actions:[{id:"login",text:u,actionAppearance:"primary"},{id:"Synonyms"===this.target?"switchToSynonymsPage":"switchToPhrasingsPage",text:c,actionAppearance:"secondary"}]}],actionHandlers:new Map([["login",function(){return l("ToolingHome")}],["switchToSynonymsPage",void 0],["switchToPhrasingsPage",void 0]])},p.ToolingSynonyms="Synonyms"===this.target?{showBanners:!0,banners:[{id:he.b$.generateGuid(),message:s,isVisible:!0,allowDismiss:!0,bannerType:"copilot",actions:[{id:"login",text:u,actionAppearance:"primary"}]}],actionHandlers:new Map([["login",function(){return l("ToolingSynonyms")}]])}:me,p.ToolingPhrasings="Phrasings"===this.target?{showBanners:!0,banners:[{id:he.b$.generateGuid(),message:s,isVisible:!0,allowDismiss:!0,bannerType:"copilot",actions:[{id:"login",text:u,actionAppearance:"primary"}]}],actionHandlers:new Map([["login",function(){return l("ToolingPhrasings")}]])}:me,p)),[2,this.getDeferredPromise()])}})})},e.prototype.clearBannerContent=function(){var t;this.qnaBannerService.setContent(((t={}).Visual=me,t.ToolingHome=me,t.ToolingSynonyms=me,t.ToolingPhrasings=me,t))},e}(Ct),ws=d(53439),Gt=d(62345),Mn="https://go.microsoft.com/fwlink/?linkid=2243166",Bn=function(i){function e(t,r,o,a,s,u,c,l,p,g,m,E,P){var F=i.call(this,P)||this;return F.dataModelService=t,F.dataSourcesService=r,F.explorationNavigationService=o,F.featureSwitchService=a,F.qnaBannerService=s,F.qnaToolingLauncher=u,F.modelAuthoringService=c,F.localizationService=l,F.dialogService=p,F.improveLsdlExecutionHandler=g,F.improveLsdlBackgroundTelemetry=m,F.target=E,F.underExecution=!1,F}return(0,v.ZT)(e,i),e.prototype.execute=function(t){var r=t.response,o=t.requestedAgents,a=t.copilotWorkspaceId;return(0,v.mG)(this,void 0,void 0,function(){var s,u,c,l,p,g,m,E,P,F,se=this;return(0,v.Jh)(this,function(Pe){switch(Pe.label){case 0:return null==r.result?[3,1]:(s=new Ht(r.result.lsdlObject),[3,3]);case 1:return[4,this.dataModelService.getLinguisticSchema()];case 2:u=Pe.sent(),s=new Ht(u),Pe.label=3;case 3:return[4,this.featureSwitchService.getFeatureSwitches()];case 4:if(c=Pe.sent(),l=Ji(c),p=!1,l&&(s.setRuntimeUnderstanding("Full"),p=s.commit()),null==r.result&&!p)return[3,8];Pe.label=5;case 5:return Pe.trys.push([5,7,,8]),[4,this.modelAuthoringService.apply({changes:[{updateLinguisticMetadata:{linguisticSchemaJson:s.toJsonString()}}]})];case 6:return Pe.sent(),[3,8];case 7:return g=Pe.sent(),f.fF.assertFail(g),[3,8];case 8:return(P={}).Visual=[],P.ToolingHome=[],P.ToolingSynonyms=[],P.ToolingPhrasings=[],m=P,null!=r.result&&(m=this.getSuccessBanners(s,o)),E=[],!_.isEmpty(r.errors)&&null==_.find(r.errors,function(be){return"OperationCancelled"===be.code})&&(E=e.getErrorBanners(r.errors,this.localizationService,this.target)),this.qnaBannerService.setContent(((F={}).Visual={showBanners:!0,banners:(0,v.ev)((0,v.ev)([],m.Visual,!0),E,!0),onDismissAllBanners:function(){return se.signalCompletion()},actionHandlers:new Map([["launchTooling",function(){var be=_.first(m.Visual);se.qnaBannerService.dismissBanner("Visual",be.id),se.improveLsdlBackgroundTelemetry.logResultEvent({surface:"Visual",type:se.target,action:"ReviewResults",resultType:"Success"}),se.qnaToolingLauncher.showToolingDialog({dataSources:se.dataSourcesService.get(),exploration:se.explorationNavigationService.getCurrentExploration(),entryPoint:"VisualBanner",entryContentType:"Synonyms"===se.target?"bulkEditing":"managePhrasings"}),se.signalCompletion()}],["errorDetails",this.getErrorDetailsHandler("Visual")],["retry",this.getRetryHandler("Visual",o,a)]])},F.ToolingHome={showBanners:!0,banners:(0,v.ev)((0,v.ev)([],m.ToolingHome,!0),E,!0),onDismissAllBanners:function(){return se.signalCompletion()},actionHandlers:"Synonyms"===this.target?new Map([["switchToSynonymsPage",void 0],["errorDetails",this.getErrorDetailsHandler("ToolingHome")],["retry",this.getRetryHandler("ToolingHome",o,a)]]):new Map([["switchToPhrasingsPage",void 0],["errorDetails",this.getErrorDetailsHandler("ToolingHome")],["retry",this.getRetryHandler("ToolingHome",o,a)]])},F.ToolingSynonyms="Synonyms"===this.target?{showBanners:!0,banners:E,onDismissAllBanners:function(){return se.signalCompletion()},actionHandlers:new Map([["errorDetails",this.getErrorDetailsHandler("ToolingSynonyms")],["retry",void 0]])}:me,F.ToolingPhrasings="Phrasings"===this.target?{showBanners:!0,banners:E,onDismissAllBanners:function(){return se.signalCompletion()},actionHandlers:new Map([["errorDetails",this.getErrorDetailsHandler("ToolingPhrasings")],["retry",void 0]])}:me,F)),[2,this.getDeferredPromise()]}})})},e.getErrorBanners=function(t,r,o){var a=this,s=_.filter(t,function(p){return null!=p.agent}),u=_.filter(t,function(p){return null==p.agent}),c=new Map;_.forEach(s,function(p){if(c.has(p.code)){var g=c.get(p.code);g.agents.push(p.agent),c.set(p.code,g)}else c.set(p.code,{agents:[p.agent],originalError:p})});var l=[];return c.forEach(function(p){var E=a.generateErrorBanner(p.originalError,r,o,p.agents);l.push(E)}),_.forEach(u,function(p){var g=a.generateErrorBanner(p,r,o);l.push(g)}),l},e.generateErrorBanner=function(t,r,o,a){void 0===a&&(a=[]);var s=this.getErrorConfig(t.code,r,o,a),u=s.text,c=s.bannerType,l=s.actions;return{id:he.b$.generateGuid(),message:{text:u},isVisible:!0,allowDismiss:!0,bannerType:c,data:t,actions:l}},e.prototype.getSuccessBanners=function(t,r){var o,u,a=t.getAgents("Synonyms"===this.target?"externalSynonyms":"oaiPhrasings"),s=_.chain(a).filter(function(g){return null!=g.lastModified}).map(function(g){return g.name}).value();u="Synonyms"===this.target?mr(_.includes(s,"PowerBI.AzureOpenAISynonyms")&&_.includes(r,"PowerBI.AzureOpenAISynonyms"),_.includes(s,"PowerBI.OrganizationLsdlSharing")&&_.includes(r,"PowerBI.OrganizationLsdlSharing"),this.localizationService):vr(this.localizationService);var p=this.localizationService.get("Synonyms"===this.target?"Qna_ImproveLsdl_Synonyms_Review":"Qna_ImproveLsdl_Phrasings_Review");return(o={}).Visual=[{id:he.b$.generateGuid(),message:u,link:{href:Mn,text:this.localizationService.get("CopilotInline_PreviewLink")},isVisible:!0,allowDismiss:!0,bannerType:"copilot",actions:[{id:"launchTooling",text:p,actionAppearance:"primary"}]}],o.ToolingHome=[{id:he.b$.generateGuid(),message:u,link:{href:Mn,text:this.localizationService.get("CopilotInline_PreviewLink")},isVisible:!0,allowDismiss:!0,bannerType:"copilot",actions:[{id:"Synonyms"===this.target?"switchToSynonymsPage":"switchToPhrasingsPage",text:p,actionAppearance:"primary"}]}],o.ToolingSynonyms=[],o.ToolingPhrasings=[],o},e.getErrorConfig=function(t,r,o,a){var s;void 0===a&&(a=[]);var u,g,c=e.getErrorMessageConfig(t,r,o);if("copilotAndOrg"===c.possibleSources){f.fF.assert(function(){return"Synonyms"===o},"target can only be synonyms when the sources are copilot and org");var l=_.includes(a,"PowerBI.AzureOpenAISynonyms"),p=_.includes(a,"PowerBI.OrganizationLsdlSharing");u=l&&p?c.copilotAndOrg:l?c.copilot:c.org}else"copilotOnly"===c.possibleSources?u=c.copilot:"orgOnly"===c.possibleSources?(f.fF.assert(function(){return"Synonyms"===o},"target can only be synonyms when the source is org"),u=c.org):"agnostic"===c.possibleSources?u=c.agnostic:f.fF.assertFail("possibleSources not handled");switch(t){case"NoLsdlIndexAvailable":case"NoLsdlSharingModelsAvailable":g="info";break;case"RequestThrottled":case"RequestTimeOut":g="blocked";break;case"UnsafeContentDetectedInRequest":case"UnsafeContentDetectedInResponse":case"PartiallySuccessful":g="warning";break;case"FeatureNotAvailable":g="info";break;case"FailedToOpenLsdlIndexSearcher":g="info";case"UnsupportedLanguage":f.fF.assertFail("Unexpected improve lsdl error ".concat("UnsupportedLanguage"));default:g="error"}return{text:r.get(u),bannerType:g,actions:null!==(s=c.availableActions)&&void 0!==s?s:[]}},e.getErrorMessageConfig=function(t,r,o){var a={id:"retry",text:r.get("IntermittentFailureRetryButton"),actionAppearance:"primary"},s={id:"errorDetails",text:r.get("View_Details"),actionAppearance:"secondary"},u="Synonyms"===o,l=u?{possibleSources:"copilotAndOrg",copilotAndOrg:"Qna_ImproveLsdl_Synonyms_Error_Generic_Copilot_Org",copilot:"Qna_ImproveLsdl_Synonyms_Error_Generic_Copilot",org:"Qna_ImproveLsdl_Synonyms_Error_Generic_Org",availableActions:[s]}:"Phrasings"===o?{possibleSources:"copilotOnly",copilot:"Qna_ImproveLsdl_Phrasings_Error_Generic_Copilot",availableActions:[s]}:{possibleSources:"copilotOnly",copilot:"Qna_FuzzyMatching_PickWorkspace_Error_Generic",availableActions:[s]};switch(t){case"GenericError":case"FailedToParseLsdlFromRequest":case"FailedToParseLsdlFromRequest":case"UnsupportedLanguage":case"NoKnownAgentsRequested":case"GenericFailure":return l;case"NetworkConnectionIssue":return{possibleSources:"agnostic",agnostic:u?"Qna_ImproveLsdl_Error_NetworkIssue_Synonyms":"Qna_ImproveLsdl_Error_NetworkIssue_Phrasings",availableActions:[a]};case"NoLsdlIndexAvailable":return f.fF.assert(function(){return u},"NoLsdlIndexAvailable error code is only applicable to synonyms"),{possibleSources:"orgOnly",org:"Qna_ImproveLsdl_Error_NoLsdlIndexAvailable"};case"NoLsdlSharingModelsAvailable":return f.fF.assert(function(){return u},"NoLsdlSharingModelsAvailable error code is only applicable to synonyms"),{possibleSources:"orgOnly",org:"Qna_ImproveLsdl_Error_NoLsdlSharingModelsAvailable"};case"InvalidRequestVersion":case"RequiresNewerVersion":return{possibleSources:"agnostic",agnostic:"Qna_ImproveLsdl_Error_RequiresNewerVersion"};case"FailedToOpenLsdlIndexSearcher":return f.fF.assert(function(){return u},"FailedToOpenLsdlIndexSearcher error code is only applicable to synonyms"),{possibleSources:"orgOnly",org:"Qna_ImproveLsdl_Error_FailedToOpenLsdlIndexSearcher"};case"FeatureNotAvailable":case"FeatureNotAvailable":return{possibleSources:"copilotOnly",copilot:u?"Qna_ImproveLsdl_Error_Copilot_Tenant_Disabled_Synonyms":"Qna_ImproveLsdl_Error_Copilot_Tenant_Disabled_Phrasings"};case"UnsupportedUser":return{possibleSources:"copilotOnly",copilot:"CopilotCapability_NoEligibleWorkspace_Message"};case"PartiallySuccessful":return u?{possibleSources:"copilotAndOrg",copilotAndOrg:"Qna_ImproveLsdl_Error_PartialSuccess_Copilot_Org_Synonyms",copilot:"Qna_ImproveLsdl_Error_PartialSuccess_Copilot_Synonyms",org:"Qna_ImproveLsdl_Error_PartialSuccess_Org_Synonyms",availableActions:[a]}:{possibleSources:"copilotOnly",copilot:"Qna_ImproveLsdl_Error_PartialSuccess_Copilot_Phrasings",availableActions:[a]};case"UnsafeContentDetectedInRequest":case"UnsafeContentDetectedInResponse":return u?{possibleSources:"copilotAndOrg",copilotAndOrg:"Qna_ImproveLsdl_Error_PartialSuccess_Copilot_Org_Synonyms",copilot:"Qna_ImproveLsdl_Error_PartialSuccess_Copilot_Synonyms",org:"Qna_ImproveLsdl_Error_PartialSuccess_Org_Synonyms",availableActions:[a]}:{possibleSources:"copilotOnly",copilot:"Qna_ImproveLsdl_Error_Unsafe_Content_Copilot",availableActions:[s]};case"RequestThrottled":return u?{possibleSources:"copilotAndOrg",copilotAndOrg:"Qna_ImproveLsdl_Error_Throttle_Copilot_Org_Synonyms",copilot:"Qna_ImproveLsdl_Error_Throttle_Copilot_Synonyms",org:"Qna_ImproveLsdl_Error_Throttle_Org_Synonyms",availableActions:[a]}:{possibleSources:"copilotOnly",copilot:"Qna_ImproveLsdl_Error_Throttle_Copilot_Phrasings",availableActions:[a]};case"RequestTimeOut":return u?{possibleSources:"copilotAndOrg",copilotAndOrg:"Qna_ImproveLsdl_Error_Timeout_Copilot_Org_Synonyms",copilot:"Qna_ImproveLsdl_Error_Timeout_Copilot_Synonyms",org:"Qna_ImproveLsdl_Error_Timeout_Org_Synonyms",availableActions:[a]}:{possibleSources:"copilotOnly",copilot:"Qna_ImproveLsdl_Error_Timeout_Copilot_Phrasings",availableActions:[a]};case"DisallowedForCrossGeo":return{possibleSources:"copilotOnly",copilot:u?"Qna_ImproveLsdl_Error_Copilot_CrossGeo_Disallowed_Synonyms":"Qna_ImproveLsdl_Error_Copilot_CrossGeo_Disallowed_Phrasings"};default:return f.fF.assertFail("unhandled improveLsdlErrorCode ".concat(t)),l}},e.prototype.getRetryHandler=function(t,r,o){var a=this;return function(){return(0,v.mG)(a,void 0,void 0,function(){return(0,v.Jh)(this,function(s){switch(s.label){case 0:return this.underExecution?[2]:(this.underExecution=!0,this.improveLsdlBackgroundTelemetry.logResultEvent({surface:t,type:this.target,action:"Retry",resultType:"Failure"}),[4,this.improveLsdlExecutionHandler.execute({requestedAgents:r,copilotWorkspaceId:o})]);case 1:return s.sent(),this.underExecution=!1,[2]}})})}},e.prototype.getErrorDetailsHandler=function(t){var r=this;return function(o){f.fF.assertValue(o,"improve lsdl error"),r.improveLsdlBackgroundTelemetry.logResultEvent({surface:t,type:r.target,action:"ShowErrorDetails",resultType:"Failure"}),r.dialogService.showTemplateDialog("QnaDiagnosticDialogComponentId",{title:r.localizationService.get("Qna_Explore_ErrorMessage"),hideCancelButton:!0,input:{errorCode:o.code,errorMessage:o.diagnosticMessage}})}},e}(Ct),Bs=function(i){function e(t,r,o,a,s){var u=i.call(this,s)||this;return u.copilotRequirementsService=t,u.localizationService=r,u.modelAuthoringService=o,u.qnaBannerService=a,u}return(0,v.ZT)(e,i),e.prototype.execute=function(t){return(0,v.mG)(this,void 0,void 0,function(){var r,a,s=this;return(0,v.Jh)(this,function(u){return r="pickWorkspace",this.qnaBannerService.setContent(((a={}).Visual={showBanners:!0,banners:[{id:he.b$.generateGuid(),message:{text:s.localizationService.get("Qna_Enhance_WithCopilot_FromSelectWorkspace_Disclaminer"),emphasis:s.localizationService.get("Qna_Enhance_WithCopilot")},link:{href:"https://go.microsoft.com/fwlink/?linkid=2258254",text:s.localizationService.get("LearnMore")},isVisible:!0,allowDismiss:!0,bannerType:"copilot",actions:[{id:r,text:s.localizationService.get("WorkspacesSelect_Label_Text"),actionAppearance:"primary"}]}],onDismissAllBanners:function(){return s.signalCompletion()},actionHandlers:new Map([[r,s.pickWorkspace(t)]])},a.ToolingHome=me,a.ToolingSynonyms=me,a.ToolingPhrasings=me,a)),[2,this.getDeferredPromise()]})})},e.prototype.pickWorkspace=function(t){var r=this;return function(){return(0,v.mG)(r,void 0,void 0,function(){var o,a,s,u,l,p;return(0,v.Jh)(this,function(g){switch(g.label){case 0:return[4,this.copilotRequirementsService.validateRequirements({showLoadingDialog:!1})];case 1:if(!(o=g.sent()).copilotStatus.enabled||_.isEmpty(o.copilotRequirements.workspaceId))return[3,6];if(a=JSON.parse(JSON.stringify(t)),(s=new Ht(a)).setRuntimeUnderstanding("Full"),!s.commit())return[3,5];g.label=2;case 2:return g.trys.push([2,4,,5]),[4,this.modelAuthoringService.apply({changes:[{updateLinguisticMetadata:{linguisticSchemaJson:s.toJsonString()}}]})];case 3:return g.sent(),[3,5];case 4:return u=g.sent(),f.fF.assertFail(u),[3,5];case 5:return this.qnaBannerService.setContent(((p={}).Visual=me,p.ToolingHome=me,p.ToolingSynonyms=me,p.ToolingPhrasings=me,p)),this.signalCompletion(),[3,7];case 6:if(o.copilotStatus.reason===Gt.Hm.NoWorkspaceId)return[2];l=Bn.getErrorBanners([{category:"powerbi",code:"UnsupportedUser"}],this.localizationService,"fuzzyMatchWorkspace"),this.qnaBannerService.updateContent("Visual",{showBanners:!0,banners:l}),g.label=7;case 7:return[2]}})})}},e}(Ct),Os=function(i){function e(t,r,o,a,s,u,c,l,p){var g=i.call(this,p)||this;return g.qnaProxyPath=t,g.conceptualSchemaProxy=r,g.copilotCapabilityService=o,g.dataModelService=a,g.dataSourcesService=s,g.explorationCapabilitiesService=u,g.featureSwitchService=c,g.qnaSupportabilityService=l,g}return(0,v.ZT)(e,i),e.prototype.execute=function(){var t,r;return(0,v.mG)(this,void 0,void 0,function(){var s,u,l,g,m,E,P;return(0,v.Jh)(this,function(F){switch(F.label){case 0:return"@powerbi/Qna/qnadesktop.module#QnaDesktopModule"!==this.qnaProxyPath?(this.signalCompletion(),[2,this.getDeferredPromise()]):[4,this.featureSwitchService.getFeatureSwitches()];case 1:return Ji(F.sent())?[4,this.conceptualSchemaProxy.get(this.dataSourcesService.get())]:(this.signalCompletion(),[2,this.getDeferredPromise()]);case 2:return s=F.sent(),u=this.explorationCapabilitiesService.getCapabilities(),(0,ri.H)(u,s,this.qnaSupportabilityService).isAllowed&&this.qnaSupportabilityService.allowsLinguisticSchemaEdit()?[4,this.copilotCapabilityService.getCopilotEnablementStatus()]:(this.signalCompletion(),[2,this.getDeferredPromise()]);case 3:return l=F.sent(),g=_.includes([Gt.Hm.NoWorkspaceId,Gt.Hm.WorkspaceNotFound,Gt.Hm.UserNotSignedIn],l.copilotStatus.reason),[4,this.dataModelService.getLinguisticSchema()];case 4:return m=F.sent(),E=null===(t=m.DynamicImprovement)||void 0===t?void 0:t.RuntimeUnderstanding,P=null==E||"Default"===E||"Full"===E,g&&P?[2,null===(r=this.next)||void 0===r?void 0:r.execute(m)]:[2]}})})},e}(Ct),Ts=d(40682),Dr=function(){function i(e,t){this.certifiedEventsService=e,this.telemetryService=t,this.featureName="Qna - Improve LSDL Feature"}return i.prototype.logSigninEvent=function(e){this.telemetryService.logEvent(Je.AM,e),this.logCertifiedEvent(Je.gk,(0,v.pi)({},e))},i.prototype.logPromptEvent=function(e){this.telemetryService.logEvent(Je.UV,e),this.logCertifiedEvent(Je.Zg,(0,v.pi)({},e))},i.prototype.logResultEvent=function(e){this.telemetryService.logEvent(Je.S4,e),this.logCertifiedEvent(Je.F2,(0,v.pi)({},e))},i.prototype.logCertifiedEvent=function(e,t){this.certifiedEventsService.logStandardizedFeatureEvent({correlationId:this.telemetryService.root.id,activityName:e,activityAttributes:t,resultCode:"",featureName:this.featureName,activityStatus:"Succeeded"},{normalizeHierarchicalSeparators:!0})},i.\u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Ts.l),n.\u0275\u0275inject(oe.y0))},i.\u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac}),i}(),yr=function(i){function e(t,r,o,a,s,u){var c=i.call(this,u)||this;return c.improveLsdlService=t,c.dataModelService=r,c.localizationService=o,c.qnaBannerService=a,c.target=s,c}return(0,v.ZT)(e,i),e.prototype.execute=function(t){var r=t.requestedAgents,o=t.copilotWorkspaceId;return(0,v.mG)(this,void 0,void 0,function(){var a,s,u;return(0,v.Jh)(this,function(c){switch(c.label){case 0:return _.isEmpty(r)?(f.fF.assertFail("requestable agents should be defined and non empty"),this.signalCompletion(),[2,this.getDeferredPromise()]):In(r)&&_.isEmpty(o)?(f.fF.assertFail("copilotWorkspaceId should be defined for copilot agents"),this.signalCompletion(),[2,this.getDeferredPromise()]):[4,this.dataModelService.getLinguisticSchema()];case 1:return a=c.sent(),s=new Ht(a),this.setLoadingBanner(r),[4,this.improveLsdlService.improveLinguisticSchema({requestedAgents:r,requestPriority:"Background",lsdlJson:s.toJsonString(),copilotWorkspaceId:o})];case 2:return u=c.sent(),[4,this.next.execute({response:u,requestedAgents:r})];case 3:return c.sent(),[2,this.getDeferredPromise()]}})})},e.prototype.setLoadingBanner=function(t){var r,o=this,a=fr(t,this.localizationService,this.target),s=function(se,Pe){o.improveLsdlService.cancelImproveLinguisticSchema(),o.qnaBannerService.dismissBanner(Pe,se)},u=this.localizationService.get("Synonyms"===this.target?"Qna_ImproveLsdl_Loading_Synonyms":"Qna_ImproveLsdl_Loading_Relationships"),c=this.localizationService.get("PBI_Button_Label_Cancel"),l=In(t)?"copilot":"info",p=he.b$.generateGuid(),g=he.b$.generateGuid(),m=he.b$.generateGuid(),P={showBanners:!0,banners:[{id:m,message:a,isVisible:!0,allowDismiss:!1,bannerType:l,actions:[{id:"noop",text:u,actionAppearance:"loading"},{id:"cancelImproveLsdl",text:c,actionAppearance:"secondary"}]}],actionHandlers:new Map([["noop",void 0],["cancelImproveLsdl","Synonyms"===this.target?function(){return s(m,"ToolingSynonyms")}:function(){return s(m,"ToolingPhrasings")}]])};this.qnaBannerService.setContent(((r={}).Visual={showBanners:!0,banners:[{id:p,message:a,link:{href:Mn,text:this.localizationService.get("CopilotInline_PreviewLink")},isVisible:!0,allowDismiss:!0,bannerType:l,actions:[{id:"noop",text:u,actionAppearance:"loading"},{id:"cancelImproveLsdl",text:c,actionAppearance:"secondary"}]}],actionHandlers:new Map([["noop",void 0],["cancelImproveLsdl",function(){return s(p,"Visual")}]])},r.ToolingHome={showBanners:!0,banners:[{id:g,message:a,isVisible:!0,allowDismiss:!0,bannerType:l,actions:[{id:"noop",text:u,actionAppearance:"loading"},{id:"cancelImproveLsdl",text:c,actionAppearance:"secondary"}]}],actionHandlers:new Map([["noop",void 0],["cancelImproveLsdl",function(){return s(g,"ToolingHome")}]])},r.ToolingSynonyms="Synonyms"===this.target?P:me,r.ToolingPhrasings="Phrasings"===this.target?P:me,r))},e}(Ct),Er=function(i){function e(t,r,o,a,s,u){var c=i.call(this,u)||this;return c.qnaBannerService=t,c.localizationService=r,c.improveLsdlBackgroundTelemetry=o,c.copilotRequirementsService=a,c.target=s,c.underExecution=!1,c}return(0,v.ZT)(e,i),e.prototype.execute=function(t){return(0,v.mG)(this,void 0,void 0,function(){var r,o,a,s=this;return(0,v.Jh)(this,function(u){return f.fF.assertNonEmpty(t,"requestableAgents"),r="Synonyms"===this.target?"generateSynonyms":"generatePhrasings",this.qnaBannerService.setContent(((a={}).Visual=(o=function(l){return{showBanners:!0,banners:[{id:he.b$.generateGuid(),message:fr(t,s.localizationService,s.target),link:{href:Mn,text:s.localizationService.get("CopilotInline_PreviewLink")},isVisible:!0,allowDismiss:!0,bannerType:In(t)?"copilot":"info",actions:[{id:r,text:s.localizationService.get("Synonyms"===s.target?"Add_Synonyms":"Add_Relationships"),actionAppearance:"primary"}]}],actionHandlers:new Map([[r,s.getGenerationHandler(t,s.target,l)]])}})("Visual"),a.ToolingHome=o("ToolingHome"),a.ToolingSynonyms="Synonyms"===this.target?o("ToolingSynonyms"):me,a.ToolingPhrasings="Phrasings"===this.target?o("ToolingPhrasings"):me,a)),[2,this.getDeferredPromise()]})})},e.prototype.getGenerationHandler=function(t,r,o){var a=this;return function(){return(0,v.mG)(a,void 0,void 0,function(){var s,u,l;return(0,v.Jh)(this,function(p){switch(p.label){case 0:return this.underExecution?[2]:(this.underExecution=!0,this.improveLsdlBackgroundTelemetry.logPromptEvent({surface:o,type:r}),In(t)?[3,2]:[4,this.next.execute({requestedAgents:t})]);case 1:return p.sent(),this.underExecution=!1,[2];case 2:return[4,this.copilotRequirementsService.validateRequirements({showLoadingDialog:!1})];case 3:return(s=p.sent()).copilotStatus.enabled&&!_.isEmpty(s.copilotRequirements.workspaceId)?[4,this.next.execute({requestedAgents:t,copilotWorkspaceId:s.copilotRequirements.workspaceId})]:[3,5];case 4:return p.sent(),this.underExecution=!1,[2];case 5:if(s.copilotStatus.reason===Gt.Hm.NoWorkspaceId)return this.underExecution=!1,[2];p.label=6;case 6:return u=_.filter(t,function(g){return"PowerBI.AzureOpenAISynonyms"!==g&&"PowerBI.AzureOpenAIPhrasings"!==g}),_.isEmpty(u)?[3,8]:[4,this.next.execute({requestedAgents:u})];case 7:return p.sent(),this.underExecution=!1,[2];case 8:return l=Bn.getErrorBanners([{category:"powerbi",code:s.copilotStatus.reason===Gt.Hm.DisabledForCrossGeo?"DisallowedForCrossGeo":"UnsupportedUser",agent:"Synonyms"===r?"PowerBI.AzureOpenAISynonyms":"PowerBI.AzureOpenAIPhrasings"}],this.localizationService,r),this.qnaBannerService.updateContent(o,{showBanners:!0,banners:l}),this.underExecution=!1,[2]}})})}},e}(Ct),Us={provide:"improveLsdlBackgroundService",useFactory:function(i,e,t,r,o,a,s,u,c,l,p,g,m,E,P,F,se){return(0,v.mG)(this,void 0,void 0,function(){var Pe;return(0,v.Jh)(this,function(be){switch(be.label){case 0:return[4,r.get(c||"@powerbi/Qna/qnadesktop.module#QnaDesktopModule","qnaSupportabilityService")];case 1:return Pe=be.sent(),f.fF.assertValue(Pe,"qna supportability service should be provided"),[2,new Ls(i,e,t,o,a,s,u,Pe,l,p,g,m,c,E,P,F,se)]}})})},deps:[C.i,D.D,Oi.H,A.E,Qe.o,qi.U,w.z,b.vZ,Jt.n,Ka.x,Dr,Wa.g,oi.I_,$a.F,wi.b,Ja.n,ws.S,oi.Dt,oi.vb]},Ls=function(){function i(e,t,r,o,a,s,u,c,l,p,g,m,E,P,F,se,Pe){var be=this;this.conceptualSchemaProxy=e,this.dataSourcesService=t,this.lazyScoped=r,this.localizationService=o,this.explorationCapabilities=a,this.explorationNavigation=s,this.featureSwitchService=u,this.qnaSupportabilityService=c,this.dialogService=l,this.improveLsdlBackgroundTelemetry=p,this.copilotRequirementsService=g,this.copilotCapabilityService=m,this.qnaProxyPath=E,this.accountService=P,this.qnaToolingDialogLauncher=F,this.dataModelService=se,this.modelAuthoringService=Pe,this.manualImproveLsdlTriggered$=new nt.xQ,this.improveLsdlBackground$=(0,xe.T)(this.qnaSupportabilityService.qnaSettingsChanged$.asObservable(),this.manualImproveLsdlTriggered$.asObservable()).pipe((0,Ee.w)(function(){return be.tryImproveLsdlCore()}))}return i.prototype.tryImproveLsdl=function(e){return(0,v.mG)(this,void 0,void 0,function(){return(0,v.Jh)(this,function(r){switch(r.label){case 0:return[4,this.featureSwitchService.getFeatureSwitches()];case 1:return r.sent().qnaImproveLsdlCopilot&&null==this.improveLsdlBackgroundSub?(this.improveLsdlBackgroundSub=this.improveLsdlBackground$.subscribe(),this.manualImproveLsdlTriggered$.next(e),[2]):[2]}})})},i.prototype.ngOnDestroy=function(){var e;null===(e=this.improveLsdlBackgroundSub)||void 0===e||e.unsubscribe()},i.prototype.tryImproveLsdlCore=function(){return(0,v.mG)(this,void 0,void 0,function(){var e,r,o;return(0,v.Jh)(this,function(a){switch(a.label){case 0:return[4,this.ensureLazyScopedServices()];case 1:return a.sent(),e=new ai.B,this.constructSynonymsBannerTree(e),[4,this.improveSynonymsBannerTree.execute()];case 2:return a.sent(),r=new ai.B,this.constructPhrasingsBannerTree(r),[4,this.improvePhrasingsBannerTree.execute()];case 3:return a.sent(),o=new ai.B,this.constructWorkspacePickerBannerTree(o),[2,this.workspacePickerBannerTree.execute()]}})})},i.prototype.constructSynonymsBannerTree=function(e){this.improveSynonymsBannerTree=new Fs(this.conceptualSchemaProxy,this.dataModelService,this.dataSourcesService,this.explorationCapabilities,this.qnaSupportabilityService,e);var t=new Cr(this.accountService,this.dataSourcesService,this.explorationNavigation,this.qnaBannerService,this.qnaToolingDialogLauncher,this.localizationService,this.improveLsdlBackgroundTelemetry,"Synonyms",e),r=new Er(this.qnaBannerService,this.localizationService,this.improveLsdlBackgroundTelemetry,this.copilotRequirementsService,"Synonyms",e),o=new yr(this.improveLsdlService,this.dataModelService,this.localizationService,this.qnaBannerService,"Synonyms",e),a=new Bn(this.dataModelService,this.dataSourcesService,this.explorationNavigation,this.featureSwitchService,this.qnaBannerService,this.qnaToolingDialogLauncher,this.modelAuthoringService,this.localizationService,this.dialogService,o,this.improveLsdlBackgroundTelemetry,"Synonyms",e);this.improveSynonymsBannerTree.next=t,t.next=r,r.next=o,o.next=a},i.prototype.constructPhrasingsBannerTree=function(e){this.improvePhrasingsBannerTree=new As(this.featureSwitchService,this.conceptualSchemaProxy,this.dataModelService,this.dataSourcesService,this.explorationCapabilities,this.qnaSupportabilityService,e);var t=new Cr(this.accountService,this.dataSourcesService,this.explorationNavigation,this.qnaBannerService,this.qnaToolingDialogLauncher,this.localizationService,this.improveLsdlBackgroundTelemetry,"Phrasings",e),r=new Er(this.qnaBannerService,this.localizationService,this.improveLsdlBackgroundTelemetry,this.copilotRequirementsService,"Phrasings",e),o=new yr(this.improveLsdlService,this.dataModelService,this.localizationService,this.qnaBannerService,"Phrasings",e),a=new Bn(this.dataModelService,this.dataSourcesService,this.explorationNavigation,this.featureSwitchService,this.qnaBannerService,this.qnaToolingDialogLauncher,this.modelAuthoringService,this.localizationService,this.dialogService,o,this.improveLsdlBackgroundTelemetry,"Phrasings",e);this.improvePhrasingsBannerTree.next=t,t.next=r,r.next=o,o.next=a},i.prototype.constructWorkspacePickerBannerTree=function(e){this.workspacePickerBannerTree=new Os(this.qnaProxyPath,this.conceptualSchemaProxy,this.copilotCapabilityService,this.dataModelService,this.dataSourcesService,this.explorationCapabilities,this.featureSwitchService,this.qnaSupportabilityService,e);var t=new Bs(this.copilotRequirementsService,this.localizationService,this.modelAuthoringService,this.qnaBannerService,e);this.workspacePickerBannerTree.next=t},i.prototype.ensureLazyScopedServices=function(){return(0,v.mG)(this,void 0,void 0,function(){var e,t;return(0,v.Jh)(this,function(r){switch(r.label){case 0:return this.qnaBannerService?[3,2]:(e=this,[4,this.lazyScoped.get("qnaBannerService")]);case 1:e.qnaBannerService=r.sent(),f.fF.assertValue(this.qnaBannerService,"qna banner service should be provided"),r.label=2;case 2:return this.improveLsdlService?[3,4]:(t=this,[4,this.lazyScoped.get("improveLsdlService")]);case 3:t.improveLsdlService=r.sent(),f.fF.assertValue(this.improveLsdlService,"improve lsdl service should be provided"),r.label=4;case 4:return[2]}})})},i.\u0275fac=function(t){n.\u0275\u0275invalidFactory()},i.\u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac}),i}(),ks=[{type:Hi,componentId:"QnaVisualHostComponentId"},{type:O,componentId:"QnaAutocompleteComponentId"},{type:Sn,componentId:"QnaInputV2ComponentId"},{type:ti,componentId:"QnaFeedbackComponentId"},{type:ni,componentId:"QnaBannerComponentId"}],Rs=function(){function i(){}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=n.\u0275\u0275defineNgModule({type:i}),i.\u0275inj=n.\u0275\u0275defineInjector({providers:[Us,Is,Dr],imports:[U.N.withManifests(ks),ee.c.withManifest([{componentIdentifier:"QnaDiagnosticDialogComponentId",componentType:$i}]),y.CommonModule,Q._t,te.v,qe.g,ye.gd,Se.eL,B.J,Vt.c,Y.A3,I.O,oe.e3,T._,ue.T,Me.Z,We.I]}),i}()},35691:function(Ue,re,d){d.d(re,{$g:function(){return U},AM:function(){return T},F2:function(){return Se},S4:function(){return ue},UV:function(){return Me},Zg:function(){return ye},dY:function(){return B},dZ:function(){return ee},gk:function(){return te}});var y=d(41114),I="PBI.QnaVisual.Initialized",ee=y.cx[I]=(0,y.b1)(I,{logExpAssignment:!0}),Q="PBI.QnaAutoComplete.Initialized",B=y.cx[Q]=(0,y.b1)(Q),Y="PBI.QnaAutoComplete.DropdownSelected",U=y.cx[Y]=(0,y.b1)(Y),te="PBI.ImproveLsdlBackground.Login",T=y.cx[te]=(0,y.b1)(te),ye="PBI.ImproveLsdlBackground.Prompt",Me=y.cx[ye]=(0,y.b1)(ye),Se="PBI.ImproveLsdlBackground.Result",ue=y.cx[Se]=(0,y.b1)(Se)},1931:function(Ue,re,d){d.d(re,{T:function(){return We}});var y=d(77476),I=d(52910),ee=d(13052),Q=d(31109),B=d(32288),Y=d(76521),U=d(40516),te=d(84497),T=d(95859),ye=d(46544),Me=d(52950),Se=d(47231),ue=d(50423),We=function(){function qe(){}return qe.\u0275fac=function(v){return new(v||qe)},qe.\u0275mod=ue.\u0275\u0275defineNgModule({type:qe}),qe.\u0275inj=ue.\u0275\u0275defineInjector({imports:[y.CommonModule,I.O,ee.T,Q.F,B.J,Y.A3,U.h,te.L,T.v,ye.e3,Me.g,Se.c]}),qe}()},37320:function(Ue,re,d){d.d(re,{y:function(){return Le}});var y=d(81337),I=d(35510),ee=d(74804),Q=d(62458),B=d(58291),Y=d(57871),U=d(42614),te=d(3579),T=d(38953),ye=d(3468),Me=d(35988),Se=d(40713),ue=d(50423),oe=d(26898),We=d(83008),qe=d(3404),Vt=d(21436),v=d(28894),ne=d(84916),W=d(29866),Le=function(){function N(S,M,k,V,j,q,J){this.conceptualSchemaProxy=S,this.dataSources=M,this.explorationSerializer=k,this.lazyScoped=V,this.podExplorationResolver=j,this.resourcePackage=q,this.visualPlugin=J}return N.prototype.createInterpretListener=function(S,M){return void 0===M&&(M=500),new f(this.conceptualSchemaProxy,this.dataSources,this.explorationSerializer,this.lazyScoped,this.podExplorationResolver,this.resourcePackage,this.visualPlugin,S,M)},N.\u0275fac=function(M){return new(M||N)(ue.\u0275\u0275inject(oe.i),ue.\u0275\u0275inject(We.D),ue.\u0275\u0275inject(qe.L),ue.\u0275\u0275inject(v.H),ue.\u0275\u0275inject(Vt.Bl),ue.\u0275\u0275inject(ne.o),ue.\u0275\u0275inject(W.D))},N.\u0275prov=ue.\u0275\u0275defineInjectable({token:N,factory:N.\u0275fac}),N}(),f=function(){function N(S,M,k,V,j,q,J,ce,K){this.conceptualSchemaProxy=S,this.dataSources=M,this.explorationSerializer=k,this.lazyScoped=V,this.podExplorationResolver=j,this.resourcePackage=q,this.visualPlugin=J,this.setupParams=ce,this.timeout=K,Q.fF.assertValue(ce,"setupParams"),this.updateManager=new yt(this.timeout),this.setupParams=ce}return N.prototype.getObservable=function(){return this.updateManager.getObservable()},N.prototype.onInterpretIssued=function(){this.cancelErrorThrottler(),this.updateManager.pushUpdate({resultType:0})},N.prototype.onInterpretRetry=function(S){this.updateManager.pushUpdate({resultType:1,retryWarning:S})},N.prototype.onInterpretResultCleared=function(){this.cancelErrorThrottler(),this.updateManager.pushUpdate({resultType:4,utterance:""})},N.prototype.onInterpretResult=function(S,M){var k;return(0,y.mG)(this,void 0,void 0,function(){var V,j;return(0,y.Jh)(this,function(q){return V=!!M.error||!this.setupParams.forTrainingTermBinding&&_.isEmpty(M.results)||this.setupParams.forTrainingTermBinding&&_.every(M.results,function(J){return!J.command})&&!function(N){return!N||!!_.find(N,function(S){return 2===S||8===S||11===S||12===S||9===S||10===S||24===S})}(M.warnings),V?(j=_.first(M.results),this.onInterpretErrorV2(M.utterance,S,M.error,j?.spans,null===(k=j?.correctionInfo)||void 0===k?void 0:k.correctedUtterance),[2]):[2,this.onInterpretSuccessV2(M,S)]})})},N.prototype.onInterpretSuccessV2=function(S,M){var k,V;return(0,y.mG)(this,void 0,void 0,function(){var j,q;return(0,y.Jh)(this,function(ce){switch(ce.label){case 0:return Q.fF.assertValue(S,"interpretResponse"),this.cancelErrorThrottler(),null!==(k=M?.intent)&&void 0!==k&&k.defineCalculation?[4,this.handleCalculationResult(S,M)]:[3,2];case 1:return ce.sent(),[3,6];case 2:return j=_.first(S.results),(q=null===(V=j?.command)||void 0===V?void 0:V.query)&&_.find(q.from().sources(),function(K){return(0,T.Yg)(K)})?[4,this.handlePodPageResult(S,M)]:[3,4];case 3:return ce.sent(),[3,6];case 4:return[4,this.handleVisualResult(S,M)];case 5:ce.sent(),ce.label=6;case 6:return[2]}})})},N.prototype.onInterpretErrorV2=function(S,M,k,V,j){var q=this;Q.fF.assertValue(S,"utterance"),this.cancelErrorThrottler();var J=this.setupParams.forTrainingTermBinding?{spans:V,correctedUtterance:j}:void 0;this.errorThrottler=setTimeout(function(){q.updateManager.pushThrottledUpdate({request:M,resultType:3,interpretError:k,utterance:S,termBindingsTrainingInfo:J,doNotShowResult:!0}),q.errorThrottler=void 0},this.timeout)},N.prototype.cancelErrorThrottler=function(){this.errorThrottler&&clearTimeout(this.errorThrottler),this.errorThrottler=void 0},N.prototype.handlePodPageResult=function(S,M){return(0,y.mG)(this,void 0,void 0,function(){var k,V,j,q,J,ce,K,Ee,it,rt,G,De,de,Ae,Ie,_e,xe,Et,dt,Ut;return(0,y.Jh)(this,function(Ye){switch(Ye.label){case 0:if(k=_.first(S?.results),Q.fF.assertValue(k,"query interpretResult must be defined for handling pod result"),V=S.utterance,j=n(k),this.setupParams.forTrainingTermBinding)return this.updateManager.pushThrottledUpdate({request:M,resultType:2,utterance:V,termBindingsTrainingInfo:j,doNotShowResult:!1}),[2];if(!this.setupParams.canShowPods)return this.updateManager.pushThrottledUpdate({request:M,resultType:5,utterance:V}),[2];q=k?.command,J=q?.query,Q.fF.assertValue(J,"interpretResult command must have a defined query for handling pod result"),ce=_.find(J.from().sources(),function(Ve){return(0,T.Yg)(Ve)}),Q.fF.assertValue(ce,"expect there is a pod entity"),K=this.podExplorationResolver.getReportId(ce.schema),Ye.label=1;case 1:return Ye.trys.push([1,3,,4]),rt=(it=this.explorationSerializer).deepCopyExploration,[4,this.podExplorationResolver.getExploration(K)];case 2:return Ee=rt.apply(it,[Ye.sent()]),G=_.find(Ee.pods,function(Ve){return Ve.name===ce.pod}),De=G&&G.boundSection,de=_.find(Ee.sections,function(Ve){return De===Ve.name}),G&&De&&de?(U.l.mergeExplorationSectionFilters(Ee,de),Ae=(0,Se.Nj)(q?.queryMetadata),Ie=ye.ib.serializeQuery(J),_.isEmpty(Ie.Where)||(_e=U.l.extractParameterFilters(Ie,Ae),U.l.applySectionParameterFilters(de,G,void 0,_e)),xe=_.filter(Ee.resourcePackages,function(Ve){return _.some(de.visualContainers,function(Wt){return(0,te.s)(Wt)===Ve.name})}),_.isEmpty(xe)||(this.resourcePackage.registerPackages(xe),this.visualPlugin.ensurePlugins(xe)),de.size.displayOption=1,Ee.activeSectionIndex=_.findIndex(Ee.sections,function(Ve){return Ve.name===de.name}),Et=this.getModelFromResult(k),this.ensureDataSources(Et,Ee),dt=Et.id,Ut=this.getNotShowLowConfidenceResult(k),this.updateManager.pushThrottledUpdate({request:M,resultType:2,modelId:dt,utterance:V,exploration:Ee,restatement:k.restatement,doNotShowResult:Ut,usedAgents:k?.usedAgents}),[3,4]):(this.updateManager.pushThrottledUpdate({request:M,resultType:6,utterance:V}),[2]);case 3:return Ye.sent(),this.updateManager.pushThrottledUpdate({request:M,resultType:6,utterance:V}),[3,4];case 4:return[2]}})})},N.prototype.handleVisualResult=function(S,M){return(0,y.mG)(this,void 0,void 0,function(){var k,V,j,q,J,ce,K,Ee,G,De,de;return(0,y.Jh)(this,function(Ie){switch(Ie.label){case 0:if(Q.fF.assertValue(S,"interpretResponse"),k=S.utterance,V=_.first(S?.results),!this.setupParams.canShowVisuals)return this.updateManager.pushThrottledUpdate(this.setupParams.forTrainingTermBinding?{request:M,resultType:2,utterance:k,termBindingsTrainingInfo:n(V),doNotShowResult:!1}:{request:M,resultType:5,utterance:k}),[2];j=this.setupParams.forTrainingTermBinding?n(V):void 0,Ie.label=1;case 1:return Ie.trys.push([1,4,,5]),q=(0,Me.vr)(S?.warnings),J=_.uniq(_.map(q,function(_e){return _e.messageKey})),ce=!_.isEmpty(q),K=void 0,(Ee=V&&V.command)&&Ee.query?_.isEmpty(q)?(G=this.getModelFromResult(V),this.ensureDataSources(G,void 0),[4,this.lazyScoped.get("visualRecommendationService")]):(this.updateManager.pushThrottledUpdate({request:M,resultType:2,utterance:k,termBindingsTrainingInfo:j,doNotShowResult:!0,doNotShowResultCustomMessageKeys:J}),[2]):(this.updateManager.pushThrottledUpdate({request:M,resultType:this.setupParams.forTrainingTermBinding?2:3,utterance:k,termBindingsTrainingInfo:j,doNotShowResult:!this.setupParams.forTrainingTermBinding||ce,doNotShowResultCustomMessageKeys:ce?J:void 0}),[2]);case 2:return De=Ie.sent(),[4,(0,Se.y_)(V,this.conceptualSchemaProxy,this.dataSources,De)];case 3:return(K=Ie.sent())?(de=this.getNotShowLowConfidenceResult(V),this.updateManager.pushThrottledUpdate({request:M,resultType:2,modelId:G.id,utterance:k,restatement:V&&V.restatement,termBindingsTrainingInfo:j,visualContainer:K,doNotShowResult:de,usedAgents:V?.usedAgents})):this.updateManager.pushThrottledUpdate({request:M,resultType:6,utterance:k,termBindingsTrainingInfo:j}),[3,5];case 4:return Ie.sent(),this.updateManager.pushThrottledUpdate({request:M,resultType:6,utterance:k,termBindingsTrainingInfo:j}),[3,5];case 5:return[2]}})})},N.prototype.handleCalculationResult=function(S,M){var k;return(0,y.mG)(this,void 0,void 0,function(){var V,j,J,ce,K;return(0,y.Jh)(this,function(Ee){for(V=S.utterance,this.setupParams.canShowCalculations||this.updateManager.pushThrottledUpdate({request:M,resultType:5,utterance:V}),j=[],J=0,ce=S.results;J<ce.length;J++)null!==(k=(K=ce[J]).command)&&void 0!==k&&k.defineCalculation&&!this.getNotShowLowConfidenceResult(K)&&j.push((0,y.pi)((0,y.pi)({},K.command.defineCalculation),{restatement:K.restatement}));return _.isEmpty(j)?this.updateManager.pushThrottledUpdate({request:M,resultType:3,utterance:V}):this.updateManager.pushThrottledUpdate({request:M,resultType:2,utterance:V,restatement:void 0,doNotShowResult:!1,calculations:j}),[2]})})},N.prototype.getNotShowLowConfidenceResult=function(S){if(!S?.command)return!0;var M=S.correctionInfo&&S.correctionInfo.state;return 0===M||1===M&&this.setupParams.canShowDidYouMean},N.prototype.getModelFromResult=function(S){var M=1===_.size(this.setupParams.models)?this.setupParams.models[0]:_.find(this.setupParams.models,function(k){return k.dbName===S.databaseName&&k.vsName===S.virtualServerName});return Q.fF.assertValue(M,"There are multiple models for interpret, one of them should match the model that the interpret result is from"),M},N.prototype.ensureDataSources=function(S,M){if(S&&this.setupParams.resetDataSources){var k=(0,ee.CD)(S),V=(0,ee.yd)([k]);if(!_.isEmpty(M?.modelExtensions)){var j=Y.eM,q=k.name;V.push({type:B.K,id:void 0,name:j,extends:q,exploration:{schemaName:j,extends:q,getModelExtensions:function(){return M.modelExtensions},getDataSourceVariables:function(){return M.dataSourceVariables}}})}this.dataSources.set(V)}},N}();function n(N){if(N){var S=N.command;return{spans:N.spans,correctedUtterance:N.correctionInfo&&N.correctionInfo.correctedUtterance,linguisticSchemaJson:S&&S.linguisticSchemaJson,linguisticSchemaItems:S&&S.linguisticSchemaItems,inferredTermMetadata:S&&S.inferredTermMetadata}}}var yt=function(){function N(S){this.timeout=S,this.interpretResult$=new I.X(void 0)}return N.prototype.getObservable=function(){return this.interpretResult$.asObservable()},N.prototype.pushUpdate=function(S){this.throttler&&clearTimeout(this.throttler),this.throttler=void 0,this.throttledUpdate=void 0,this.interpretResult$.next(S),this.throttler=this.startThrottler()},N.prototype.pushThrottledUpdate=function(S){this.throttler?this.throttledUpdate=S:(this.interpretResult$.next(S),this.throttler=this.startThrottler())},N.prototype.startThrottler=function(){var S=this;return setTimeout(function(){S.throttledUpdate?(S.interpretResult$.next(S.throttledUpdate),S.throttledUpdate=void 0,S.throttler=S.startThrottler()):S.throttler=void 0},this.timeout)},N}()},72129:function(Ue,re,d){function y(U){return"Suggestions"===U?.type}function I(U){return"Visual"===U?.type}function ee(U){return"VisualAsExploration"===U?.type}function Q(U){return"Pod"===U?.type}function B(U){return"Error"===U?.type}function Y(U){return"QueryError"===U?.type}d.d(re,{Ew:function(){return y},fU:function(){return ee},lP:function(){return Q},mn:function(){return I},uT:function(){return B},wp:function(){return Y}})},282:function(Ue,re,d){d.d(re,{D:function(){return Wn}});var y=d(81337),I=d(50423),ee=d(48787),Q=d(92060),B=d(79154),Y=d(94419),U=d(80981),te=d(90120),T=d(56578),ye=d(1521),Me=d(61903),Se=d(18664),ue=d(47245),oe=d(62458),We=d(2142),qe=d(2931),Vt=d(50550),v=d(11077),ne=d(32105),W=d(33567),nt=d(18503),Le=d(82755),f=d(3579),n=d(60661),pt=d(76045),yt=d(43286),N=d(39681),S=d(16808),M=d(28579),k=d(14463),V=d(78778),j=new I.InjectionToken("QnaLiveConnectService"),q=d(65947),J=d(12123),ce=d(32640),K=d(21728),Ee=d(80952),it=d(46544),rt=d(4954),G=d(38078),De=d(46135),de=d(8590),Ae=d(80318),Ie=d(5894),_e=d(72129),xe=d(40713),Et=d(35988),dt=d(87974),Ut=d(29866),$t=d(52121),Ye=d(26898),Ve=d(83008),Wt=d(48145),Jt=d(39503),Tn=d(11494),he=d(77200),Vn=d(27980),Un=d(58938),Ln=d(67660),an=d(69474),Kt=d(3404),kn=d(79006),ke=d(72262),Zt=d(906),sn=d(84281),Xt=d(80277),gt=d(9380),Rn=d(21548),Qn=d(76072),Je=d(2330),Nn=d(40956),qn=d(58991),un=d(65181),zn=d(81213),jn=d(83309),Lt=d(37320),ln=d(1599),_t="qnaVisualContainer",Re="inputBox",Qe="suggestions",Pt="hiddenProperties",kt="background",ot="header",dn="cardBackground",et="card",at="question",Rt="restatement",ft="FontColor",St="FontSize",At="FontFamily",gn="hoverColor",hn="acceptedColor",fn="errorColor",mn="warningColor",vn="commitButtonBackgroundColor",Ft="Bold",bt="Italic",It="Underline",z={withBorder:!0,showSuggestions:!0,acceptedColor:"#0078D4",errorColor:"#FF0000",warningColor:"#0078D4",borderColor:"#A19F9D",fontColor:"#323130",darkFontColor:"#252423",lightFontColor:"#FFFFFF",inputBoxBackgroundColor:"#FFFFFF",suggestionBackgroundColor:"#F3F2F1",hoverColor:"#EEEEEE",semiboldFont:"'Segoe UI Semibold', wf_segoe-ui_semibold, helvetica, arial, sans-serif",regularFont:"'Segoe UI', wf_segoe-ui_normal, helvetica, arial, sans-serif",smallFontSize:ne.B.createFromPt(9),mediumFontSize:ne.B.createFromPt(10),largeFontSize:ne.B.createFromPt(12),defaultBIUValue:!1},Cn={spanDropdownHeaderConfig:{show:!0,unknownSpanHeaderConfig:{actionType:"none"}}},Wn=function(){function O(h,C,D,w,b,A,L,R,Z,H,x,X,ae,ve,Fe,le,Ne,Be,Ke,Ze,Oe,mt,st,Te,Qt,xt,tt,Nt,wt,qt,ge,je,ie,pe,ut,yn,Yt,Jn){if(this.visualPlugin=h,this.changeDetectorRef=C,this.conceptualSchemaProxy=D,this.dataSources=w,this.dialogService=b,this.explorationActivity=A,this.explorationCapabilities=L,this.explorationNavigation=R,this.explorationSerializer=Z,this.eventBridge=H,this.featureSwitchService=x,this.qnaFeedbackStateService=X,this.lazyProvider=ae,this.themeService=ve,this.expandCollapse=Fe,this.geocoder=le,this.geolocationService=Ne,this.moduleLoader=Be,this.localizationService=Ke,this.errorService=Ze,this.telemetryService=Oe,this.resourceLoader=mt,this.screenReaderService=st,this.interpretListenerFactory=Te,this.selectionService=Qt,this.sortService=xt,this.undoRedoService=tt,this.viewModeState=Nt,this.visualAuthoringOpService=wt,this.azureMapTokenCache=qt,this.azureMapsEndpoint=ge,this.geocoderIndexedDB=je,this.visualHostTooltipServiceFactory=ie,this.promiseFactory=pe,this.accountService=ut,this.qnaProxyPathToken=yn,this.qnaModelUtilsPathToken=Yt,this.qnaLiveConnectService=Jn,this.utteranceUpdated=new I.EventEmitter,this.pinnableContentDefinitionUpdated=new I.EventEmitter,this.convertVisual=new I.EventEmitter,this.utteranceRestated=new I.EventEmitter,this.interpretationError=new I.EventEmitter,this.isBrowserIE=(0,S.rO)(),this.isBrowserIE)this.viewModel={state:"Error",error:(0,xe.ET)(Ke),qnaInputConfiguration:void 0,themeCollection:void 0,viewport:void 0,presentationViewModel:void 0};else{this.pendingSuggestedQuestionsRequests=0;var En=(0,xe.Su)(this.explorationNavigation,this.featureSwitchService),_n=this.themeService.getVisualStyle(En).colorPalette.dataColors.getColorByIndex(0).value,Kn={withBorder:z.withBorder,borderColor:z.borderColor,backgroundColor:z.inputBoxBackgroundColor,questionFontProperties:{color:z.fontColor,size:z.mediumFontSize,family:z.regularFont},acceptedUnderlineColor:z.acceptedColor,errorUnderlineColor:z.errorColor,warningUnderlineColor:z.warningColor,hoverColor:z.hoverColor,restatementFontProperties:{color:z.fontColor,size:z.smallFontSize,family:z.regularFont},commitButtonBackgroundColor:_n,commitButtonForegroundColor:Dn(_n)};this.viewModel={state:"Loading",qnaInputConfiguration:void 0,themeCollection:En,viewport:void 0,presentationViewModel:{inputBox:Kn,suggestions:{backgroundColor:z.suggestionBackgroundColor,show:z.showSuggestions,cardFontProperties:{color:z.fontColor,size:z.mediumFontSize,family:z.regularFont},headerFontProperties:{color:z.fontColor,size:z.largeFontSize,family:z.semiboldFont}}}}}}return O.prototype.initialize=function(h,C,D,w,b,A,L,R,Z,H,x,X,ae){var ve;return void 0===ae&&(ae=!1),(0,y.mG)(this,void 0,void 0,function(){var le,Be,Ke,Ze,Oe,mt,st,Te,Qt,tt,Nt,wt,ge=this;return(0,y.Jh)(this,function(je){switch(je.label){case 0:return this.isBrowserIE?[2]:(this.models=h,this.config=C,this.hostServices=D,this.entryPoint=w,this.utteranceUpdated=b,this.convertVisual=A,this.utteranceRestated=H,this.interpretationError=x,this.initializedTelemetryEvent=L,this.contentElement=R,Z&&(this.pinnableContentDefinitionUpdated=Z),le=this,[4,this.lazyProvider.get(this.qnaProxyPathToken||"@powerbi/Qna/qnaweb.module#QnaWebModule","InterpretServiceModern")]);case 1:return le.interpretService=je.sent(),Be=this,[4,this.lazyProvider.get(this.qnaModelUtilsPathToken||"@powerbi/Qna/qnaweb.module#QnaWebModule","qnaModelUtilsService")];case 2:return Be.qnaModelUtils=je.sent(),Ke=_.map(this.models,function(ie){return{datasetName:ie.dbName,datasetId:ie.id}}),Ze=this,[4,(0,dt.U)(Ke,this.qnaModelUtils,this.featureSwitchService)];case 3:return Ze.inCommitQuestionOnDemandMode=je.sent(),this.interpretListener=this.interpretListenerFactory.createInterpretListener({forTrainingTermBinding:!1,canShowPods:this.config.canShowPods,canShowVisuals:this.config.canShowVisuals,canShowDidYouMean:this.config.canShowDidYouMean,models:this.models,resetDataSources:this.config.resetDataSources}),this.interpretListener.getObservable().subscribe(function(ie){return ge.onResultAvailable(ie)}),Oe=_.find(this.dataSources.get(),function(ie){return ie.type===We.nKy}),[4,this.conceptualSchemaProxy.get(this.dataSources.get())];case 4:return mt=je.sent(),st=Oe&&mt&&mt.schema(Oe.name).capabilities,(Te=(null===(ve=this.viewModel.qnaInputConfiguration)||void 0===ve?void 0:ve.configs)||{}).supportsPodQueries=!!C.canShowPods,null!=C.focusOnInit&&(Te.autoFocusOnInit=C.focusOnInit),null!=C.disableQnaInputAuthoring&&(Te.disableAuthoring=C.disableQnaInputAuthoring,Te.displayDisabledStateVisually=C.disableQnaInputAuthoring),null!=C.disableQnaInputAuthoringMessage&&(Te.disableAuthoringMessage=C.disableQnaInputAuthoringMessage),null!=C.hostHandlesUndo&&(Te.hostSupportsUndo=C.hostHandlesUndo),null!=C.showTermDropdownHeader&&(Te.spanDropdownHeaderConfig={show:C.showTermDropdownHeader}),C.showUnknownTermDropdownHeaderTextOnly&&(Te.spanDropdownHeaderConfig||(Te.spanDropdownHeaderConfig={show:void 0}),Te.spanDropdownHeaderConfig.unknownSpanHeaderConfig={actionType:"textOnlyHeader",textOnlyTemplate:C.unknownTermDropdownHeaderTextOnlyTemplate}),this.viewModel.themeCollection=(0,xe.Su)(this.explorationNavigation,this.featureSwitchService),this.viewModel.qnaInputConfiguration={entryPoint:this.entryPoint,interpretListener:this.interpretListener,qnaSupportedScopes:_.map(this.models,function(ie){return{model:ie}}),configs:Te,presentation:this.viewModel.presentationViewModel.inputBox,initialUtterance:this.config.initialUtterance||"",initialUtteranceFromSaved:this.config.initialUtteranceFromSaved},this.viewModel.presentationViewModel.inputBox.useShellTheme=ae,Qt=this,[4,this.getIsModelEditable()];case 5:return Qt.isModelEditable=je.sent(),[4,this.updateUnknownSpanHeaderConfig()];case 6:return je.sent(),tt=_.map(X,function(ie,pe){return{name:"TempFilter"+pe,filter:ie}}),Nt=this.getCurrentVisual(),wt=(0,N.ED)((0,ue.q)({geocoder:this.geocoder,geolocation:this.geolocationService,localizationService:this.localizationService,moduleLoader:this.moduleLoader,promiseFactory:this.promiseFactory,visualHostTooltipService:this.visualHostTooltipServiceFactory.createFromVisualContract(Nt),getAzureMapToken:function(){return ge.azureMapTokenCache.getAzureMapToken()},azureMapsEndpoint:this.azureMapsEndpoint,geocoderIndexedDB:this.geocoderIndexedDB}),function(ie){ie.getLocalizedString=ge.hostServices.getLocalizedString,ie.tooltips=ge.hostServices.tooltips,ie.canSelect=ge.hostServices.canSelect,ie.onSelecting=ge.hostServices.onSelecting,ie.onSelect=ge.hostServices.onSelect,ie.onCustomSort=function(pe){return ge.onCustomSort(pe.sortDescriptors)},ie.geocoder=ge.hostServices.geocoder,ie.launchUrl=ge.hostServices.launchUrl,ie.canExpandCollapse=function(pe){return st&&st.supportsInstanceFilters},ie.setNodeExpansionState=function(pe){var ut=ge.getCurrentVisual();ut&&(pe.isCollapse?ge.expandCollapse.collapseNode(ut,pe.dataRoles,pe.data):ge.expandCollapse.expandNode(ut,pe.dataRoles,pe.data),ge.eventBridge.publishToChannel(de.jCS,{affectContainer:function(Yt){return Yt.name===_t}}))},ie.telemetry=ge.hostServices.telemetry}),Object.defineProperty(wt,"instanceId",{value:G.b$.generateGuid()}),this.singleVisualHostConfig={notifyStart:_.noop,notifyEnd:function(){var pe;_e.mn(null===(pe=ge.viewModel)||void 0===pe?void 0:pe.result)&&(ge.viewModel.result.isLoading=!1)},clearQueryErrors:_.noop,handleQueryErrors:function(pe){return ge.handleQueryErrors(pe)},handleQueryWarnings:_.noop,queryVisualHostServices:{getFilters:function(){var pe=ge.getCurrentVisual();if(pe){var ut=_.union(pe&&pe.filters,tt);return ge.createVisualContainerFilters(pe,ut)}},getDataSourceVariables:function(){var pe=ge.explorationNavigation.getCurrentExploration();return pe&&pe.dataSourceVariables},disableAnchorTime:!0},visualHostServices:wt,interactivityOptions:{selection:!0},additionalObjectUpdates:void 0,disableQueryCacheUpdates:!1,noLoadMore:!1},[4,this.setSuggestedQuestions()];case 7:return je.sent(),_.isEmpty(this.config.initialUtterance)&&this.setSuggestionsViewModel(),[2]}})})},O.prototype.onCustomSort=function(h){var C=this.getCurrentVisual();(0,xe.fI)(C,this.sortHelper,h)},O.prototype.ngAfterViewInit=function(){this.updateViewport()},O.prototype.update=function(h){var C;return(0,y.mG)(this,void 0,void 0,function(){var D,w,b,A,L,R,Z,H,x,X,ae,ve,Fe,le,Ne,Be,Ke,Ze;return(0,y.Jh)(this,function(Oe){switch(Oe.label){case 0:return D=this,[4,this.getIsModelEditable()];case 1:return D.isModelEditable=Oe.sent(),(0,yt.yE)(h.type,De.EP.Style)&&!this.isBrowserIE?(oe.fF.assertValue(this.viewModel,"viewModel should be defined"),w=(0,xe.Su)(this.explorationNavigation,this.featureSwitchService),this.viewModel.themeCollection=w,b=w&&this.themeService.getVisualStyle(w),A=b&&b.colorPalette.background.value||z.inputBoxBackgroundColor,L=b&&b.colorPalette.backgroundNeutral.value||z.hoverColor,R=z.acceptedColor,Z=z.errorColor,H=z.warningColor,x=b&&te.v.create(b),X=this.themeService.getVisualStyle(this.viewModel.themeCollection).colorPalette.dataColors.getColorByIndex(0).value,ae=(0,ye.um)(X)>.6?z.darkFontColor:z.lightFontColor,ve=(0,Le.W7)(h.objects,{objectName:Re,propertyName:kt},A),Fe=this.createFontProperties(h.objects,Re,at,"label",z.mediumFontSize,!1,x,b),le=(0,Le.W7)(h.objects,{objectName:Re,propertyName:vn},X),Ne={withBorder:z.withBorder,borderColor:z.borderColor,backgroundColor:ve,questionFontProperties:Fe,acceptedUnderlineColor:(0,Le.W7)(h.objects,{objectName:Re,propertyName:hn},R),errorUnderlineColor:(0,Le.W7)(h.objects,{objectName:Re,propertyName:fn},Z),warningUnderlineColor:(0,Le.W7)(h.objects,{objectName:Re,propertyName:mn},H),hoverColor:(0,Le.W7)(h.objects,{objectName:Re,propertyName:gn},L),restatementFontProperties:this.createFontProperties(h.objects,Re,Rt,"smallLabel",z.smallFontSize,!1,x,b),commitButtonBackgroundColor:le,commitButtonForegroundColor:Dn(le)},this.viewModel.presentationViewModel.inputBox=Ne,Be=this.createFontProperties(h.objects,Qe,et,"label",z.mediumFontSize,!1,x,b),(!h.objects||!h.objects[Qe]||!h.objects[Qe][et+ft])&&(Be.color=ae),Ke={show:(0,Le.NA)(h.objects,{objectName:Qe,propertyName:"show"},!0),backgroundColor:(0,Le.W7)(h.objects,{objectName:Qe,propertyName:dn},X),cardFontProperties:Be,headerFontProperties:this.createFontProperties(h.objects,Qe,ot,"largeLabel",z.largeFontSize,!1,x,b)},this.viewModel.presentationViewModel.suggestions=Ke,this.viewModel.qnaInputConfiguration||(this.viewModel.qnaInputConfiguration={entryPoint:this.entryPoint,qnaSupportedScopes:void 0,configs:Cn}),[4,this.updateUnknownSpanHeaderConfig()]):[3,3];case 2:Oe.sent(),Oe.label=3;case 3:return(0,yt.yE)(h.type,De.EP.Data)?(this.inheritedFilters=h.filters,null!==(C=this.viewModel.qnaInputConfiguration)&&void 0!==C&&C.qnaSupportedScopes?[4,this.setSuggestedQuestions()]:[3,6]):[3,7];case 4:return Oe.sent(),_e.Ew(this.viewModel.result)&&this.setSuggestionsViewModel(),[4,this.updateUnknownSpanHeaderConfig()];case 5:Oe.sent(),Oe.label=6;case 6:this.eventBridge.publishToChannel(de.jCS,{affectContainer:function(st){return st.name===_t}}),Oe.label=7;case 7:return(0,yt.yE)(h.type,De.EP.Resize)&&(this.visualContainerViewport=h.viewport,this.updateViewport(),!this.isBrowserIE&&_e.Ew(this.viewModel.result)&&this.setSuggestionsViewModel()),this.isBrowserIE||h.firstUpdate||h.objects&&h.objects[Pt]&&(Ze=(0,Le.NA)(h.objects,{objectName:Pt,propertyName:"savedUtterance"},""),this.qnaInputComponent&&this.qnaInputComponent.interpretUtterance({utterance:Ze,suppressSuggestions:!0,incomingTags:["Committed"],useUncommittedUtterance:!0})),[2]}})})},O.prototype.enumerateObjectInstances=function(h){var C,D,w=this;if(oe.fF.assert(function(){return!w.isBrowserIE},"Expect this not to be called if it is inside IE browser"),!this.isBrowserIE){var b=new M.G,A=this.viewModel.presentationViewModel;switch(h.objectName){case Re:var L=((C={})[kt]=A.inputBox.backgroundColor,C[at+ft]=A.inputBox.questionFontProperties.color,C[at+St]=A.inputBox.questionFontProperties.size.pt,C);L[at+Ft]=A.inputBox.questionFontProperties.weight===B.en,L[at+bt]=A.inputBox.questionFontProperties.style===B.BF,L[at+It]=A.inputBox.questionFontProperties.textDecoration===B.f0,L[at+At]=A.inputBox.questionFontProperties.family,L[hn]=A.inputBox.acceptedUnderlineColor,L[fn]=A.inputBox.errorUnderlineColor,L[mn]=A.inputBox.warningUnderlineColor,L[gn]=A.inputBox.hoverColor,L[Rt+ft]=A.inputBox.restatementFontProperties.color,L[Rt+St]=A.inputBox.restatementFontProperties.size.pt,L[Rt+At]=A.inputBox.restatementFontProperties.family,this.inCommitQuestionOnDemandMode&&(L[vn]=A.inputBox.commitButtonBackgroundColor),b.pushInstance({selector:null,properties:L,objectName:Re});break;case Qe:var R=((D={}).show=A.suggestions.show,D[ot+ft]=A.suggestions.headerFontProperties.color,D[ot+St]=A.suggestions.headerFontProperties.size.pt,D);R[ot+Ft]=A.suggestions.headerFontProperties.weight===B.en,R[ot+bt]=A.suggestions.headerFontProperties.style===B.BF,R[ot+It]=A.suggestions.headerFontProperties.textDecoration===B.f0,R[ot+At]=A.suggestions.headerFontProperties.family,R[dn]=A.suggestions.backgroundColor,R[et+ft]=A.suggestions.cardFontProperties.color,R[et+St]=A.suggestions.cardFontProperties.size.pt,R[et+Ft]=A.suggestions.cardFontProperties.weight===B.en,R[et+bt]=A.suggestions.cardFontProperties.style===B.BF,R[et+It]=A.suggestions.cardFontProperties.textDecoration===B.f0,R[et+At]=A.suggestions.cardFontProperties.family,b.pushInstance({selector:null,properties:R,objectName:Qe})}return b.complete()}},O.prototype.getFormattingModel=function(){var h=this;if(oe.fF.assert(function(){return!h.isBrowserIE},"Expect this not to be called if it is inside IE browser"),!this.isBrowserIE){var C=this.viewModel.presentationViewModel;return new T.Nq(function(){return h.buildInputBoxFormattingCard(C)},function(){return h.buildRestatementFormattingCard(C)},function(){return h.buildSuggestionsFormattingCard(C)}).build()}},O.prototype.getCurrentVisual=function(){var h,C=null===(h=this.viewModel)||void 0===h?void 0:h.result;return _e.mn(C)?C.visual:_e.fU(C)?_.first(C.exploreCanvas.contract.visualContainers):_e.wp(C)?C.visualWithError:void 0},O.prototype.getCurrentUtteranceTrimmed=function(){return _.trim(this.getCurrentUtteranceUntrimmed())},O.prototype.setGetQnaInputComponentFunc=function(h){oe.fF.assertValue(h,"getQnaInputComponent must be defined."),this.getQnaInputComponent=h},O.prototype.convertVisualClicked=function(){var h=this.getCurrentVisual();if(h){var C=(0,f.s)(h);this.telemetryService.logChildEvent(this.initializedTelemetryEvent,Ie.dN,{visualType:C}),this.convertVisual.emit(h)}},O.prototype.interpretSuggestedQuestion=function(h){var C=this;this.telemetryService.logChildEvent(this.initializedTelemetryEvent,Ie.WW,{isAutoSuggestion:!0}),this.qnaInputComponent&&this.undoRedoService.register("Commit suggested QnA utterance",function(){C.qnaInputComponent.interpretUtterance({utterance:h,suppressSuggestions:!0,incomingTags:["SuggestedUtterance","Committed"],requireCursorAtEndIfFocused:!0,enforceFocus:!0,isCommitInCommitQuestionOnDemandMode:!0})})},O.prototype.toggleShowAllSuggestions=function(){if(_e.Ew(this.viewModel.result)){var h=this.viewModel.result;h.showAllSuggestions=!h.showAllSuggestions,this.setSuggestionsViewModel()}},O.prototype.showQnaVisualErrorDetails=function(){(0,xe.aZ)(this.viewModel.error,this.errorService,this.localizationService)},O.prototype.showResultErrorDetails=function(){(_e.uT(this.viewModel.result)||_e.wp(this.viewModel.result))&&(0,xe.aZ)(this.viewModel.result,this.errorService,this.localizationService)},O.prototype.updateViewport=function(){if(!this.isBrowserIE){var h=this.contentElement.nativeElement;this.viewport={scale:1,height:h.clientHeight-10,width:h.clientWidth-10},this.viewModel.viewport=this.viewport}},O.prototype.getUnknownSpanDropdownHeaderActionType=function(){return(0,y.mG)(this,void 0,void 0,function(){return(0,y.Jh)(this,function(h){switch(h.label){case 0:return this.qnaLiveConnectService?this.qnaLiveConnectService.allowsLinguisticSchemaFeedback()?[2,"askToAdd"]:[3,1]:[2,"askToAdd"];case 1:return[4,this.allowTooling()];case 2:return h.sent()?[2,"defineInTooling"]:[2,"none"];case 3:return[2]}})})},O.prototype.allowTooling=function(){var h;return(0,y.mG)(this,void 0,void 0,function(){var C,D,w;return(0,y.Jh)(this,function(b){switch(b.label){case 0:return null==(C=null===(h=this.config)||void 0===h?void 0:h.canEdit)&&(C=0!==this.viewModeState.getMode()),C?(D=this.explorationCapabilities.getCapabilities(),D?.allowQnaTooling?null!=this.isModelEditable?[3,2]:(w=this,[4,this.getIsModelEditable()]):[2,!1]):[2,!1];case 1:w.isModelEditable=b.sent(),b.label=2;case 2:return this.isModelEditable?[2,!0]:[2,!1]}})})},O.prototype.shouldShowThumbsUpDown=function(){return(0,y.mG)(this,void 0,void 0,function(){return(0,y.Jh)(this,function(C){switch(C.label){case 0:return this.isBrowserIE?[2,!1]:this.featureSwitchService.featureSwitches.qnaThumbsUpDown?[4,this.getIsModelEditable()]:[2,!1];case 1:return[2,!C.sent()]}})})},O.prototype.showFeedbackForCurrentQuestion=function(){var C,h=this;if(oe.fF.assert(function(){return!h.isBrowserIE},"Expect this never get called if it is inside IE browser"),this.isBrowserIE)return!1;var D=null===(C=this.viewModel)||void 0===C?void 0:C.result;return!!D&&(_e.mn(D)||_e.lP(D)||_e.fU(D))},O.prototype.sendFeedback=function(h){return this.logFeedbackTelemetry(h),this.qnaInputComponent.sendFeedback(h,this.getCurrentUtteranceTrimmed())},O.prototype.launchFeedbackDialog=function(h,C){return(0,y.mG)(this,void 0,void 0,function(){var w,b=this;return(0,y.Jh)(this,function(A){switch(A.label){case 0:return A.trys.push([0,2,,3]),[4,this.dialogService.openHostDialog({bindings:{sentiment:h,showOptions:C},componentName:V.Xr,config:{minWidth:"600px",panelClass:["no-padding"]},dialogName:"QnaFeedbackDialog"})];case 1:return A.sent().afterClosed().pipe((0,ee.q)(1)).subscribe(function(L){if(L&&(!_.isEmpty(L.reason)||!_.isEmpty(L.comment))){b.sendFeedback(L);var R=1===h?"PositiveDetailSubmitted":"NegativeDetailSubmitted";b.qnaFeedbackStateService.updateState(b.getCurrentUtteranceTrimmed(),R)}}),[3,3];case 2:return w=A.sent(),oe.fF.assertFail("Qna Feedback dialog failed to open"),oe.fF.log(w),[3,3];case 3:return[2]}})})},O.prototype.updateUnknownSpanHeaderConfig=function(){var h;return(0,y.mG)(this,void 0,void 0,function(){var C,w,b;return(0,y.Jh)(this,function(A){switch(A.label){case 0:return oe.fF.assertValue(this.viewModel.qnaInputConfiguration.configs,"Expect this.viewModel.qnaInputConfiguration.configs has already been defined"),C=this.viewModel.qnaInputConfiguration.configs.spanDropdownHeaderConfig,"textOnlyHeader"===(null===(h=C?.unknownSpanHeaderConfig)||void 0===h?void 0:h.actionType)?[3,2]:(this.viewModel.qnaInputConfiguration.configs.spanDropdownHeaderConfig||(this.viewModel.qnaInputConfiguration.configs.spanDropdownHeaderConfig={show:void 0}),w=this.viewModel.qnaInputConfiguration.configs.spanDropdownHeaderConfig,b={},[4,this.getUnknownSpanDropdownHeaderActionType()]);case 1:w.unknownSpanHeaderConfig=(b.actionType=A.sent(),b),A.label=2;case 2:return[2]}})})},O.prototype.logFeedbackTelemetry=function(h){this.telemetryService.logChildEvent(this.initializedTelemetryEvent,Ie.v5,{senitment:this.mapToTelemetryFeedbackSentiment(h.sentiment),reason:h.reason})},O.prototype.mapToTelemetryFeedbackSentiment=function(h){return oe.fF.assert(function(){return 1===h||-1===h},"unexpected telemetry sentiment"),1===h?"Positive":"Negative"},O.prototype.shouldShowdoNotUnderstandMessageFeedbackLink=function(){var h=this.getCurrentUtteranceTrimmed();return"NegativeDetailSubmitted"!==this.qnaFeedbackStateService.getState(h)},Object.defineProperty(O.prototype,"qnaInputComponent",{get:function(){return this.getQnaInputComponent&&this.getQnaInputComponent()},enumerable:!1,configurable:!0}),O.prototype.getIsModelEditable=function(){return(0,y.mG)(this,void 0,void 0,function(){var h,C,D;return(0,y.Jh)(this,function(w){switch(w.label){case 0:return h=_.find(this.dataSources.get(),function(b){return b.type===We.nKy}),[4,this.conceptualSchemaProxy.get(this.dataSources.get())];case 1:return C=w.sent(),D=h&&C?.schema(h.name).capabilities,[2,D?.canEdit]}})})},O.prototype.getCurrentUtteranceUntrimmed=function(){return this.qnaInputComponent&&this.qnaInputComponent.currentDisplayedUtterance},O.prototype.setSuggestedQuestions=function(){return(0,y.mG)(this,void 0,void 0,function(){var h,C,D,w,b,L=this;return(0,y.Jh)(this,function(R){switch(R.label){case 0:return oe.fF.assert(function(){return!!L.interpretService},"interpretService should be defined"),this.pendingSuggestedQuestionsRequests++,[4,this.interpretService.getSuggestedQuestions(this.convertRequestScopes(this.viewModel.qnaInputConfiguration.qnaSupportedScopes)).toPromise()];case 1:if(h=R.sent(),this.pendingSuggestedQuestionsRequests--,C=h.result,"Loading"===this.viewModel.state&&this.pendingSuggestedQuestionsRequests>0&&!h.error&&_.isEmpty(C?.utterances))return[2];if(h.error)return this.viewModel.error=this.getErrorDetailsFromError(h.error),this.viewModel.state="Error",[2];if(D=_.chain(this.models).map(function(Z){return _.map(Z.featuredQuestions,function(H){return H.utterance})}).flatten().value(),_.isEmpty(D))for(D=[],w=0,b=C.utterances;w<b.length;w++)D.push(b[w].text);return oe.fF.assert(function(){return!_.isEmpty(C.utterances)||!_.isEmpty(C.warnings)},"No suggested question but no warning? something is wrong."),this.suggestions={questions:D,hasWarnings:!_.isEmpty(C.warnings)},this.viewModel.state="Ready",[2]}})})},O.prototype.getErrorDetailsFromError=function(h){oe.fF.assertValue(h,"Expect the given error to be defined.");var w,C=(0,Et.AU)(h.errorCode,this.localizationService),D=h.errorCode,b=[],A=[];if("SchemaLanguageNotSupported"===h.errorCode)w=!1,b=[{errorInfoKey:this.localizationService.get("VisualContainer_QnaVisual_NotSupportedTitle"),errorInfoValue:this.localizationService.get("VisualContainer_QnaVisual_NotSupportedMessage")}];else if(!(w="GenericRequestFailure"!==D))if(h.sourceServiceError){var H=new Ee.sI(h.sourceServiceError).getDetails(this.localizationService);b=H.displayableErrorInfo,A=H.debugErrorInfo}else _.isEmpty(h.message)||A.push({errorInfoKey:qe.Bm,errorInfoValue:h.message}),_.isEmpty(h.stackTrace)||A.push({errorInfoKey:qe.RU,errorInfoValue:h.stackTrace});var x={code:D,fixableError:0,hideSeeDetails:w,details:{message:C,displayableErrorInfo:b,debugErrorInfo:A},source:h.source};return"DataIndexMissingAllStatistics"===h.errorCode&&(x.details.helpLink="https://go.microsoft.com/fwlink/?LinkId=786785",x.details.helpLinkType=1,x.details.errorType=1),oe.fF.assert(function(){return!_.isEmpty(x.code)},"telemetryCode should not be empty"),oe.fF.assert(function(){return null!=x.hideSeeDetails},"hideSeeDetails should not be null"),oe.fF.assert(function(){return!_.isEmpty(x.details.message)},"mainMessage should not be empty"),oe.fF.assert(function(){return null!=x.source},"errorSource should not be null"),x},O.prototype.setSuggestionsViewModel=function(){var C,D,w,h=this;oe.fF.assert(function(){return!h.isBrowserIE},"Expect this never get called if it is inside IE browser");var b=_.size(null===(C=this.suggestions)||void 0===C?void 0:C.questions),A=this.viewModel.result,L=!!_e.Ew(A)&&A.showAllSuggestions;b>0&&!L&&(b=Math.floor(this.contentElement.nativeElement.clientWidth/200))<=1&&(b=5);var H=_.take(null===(D=this.suggestions)||void 0===D?void 0:D.questions,b),x=_.size(H);this.viewModel.result={type:"Suggestions",suggestions:_.map(H,function(X,ae){return{content:X,accessibilityLabel:h.localizationService.format("Visual_Qna_SuggestedQuestion_AccessibilityLabel",ae+1,x,X)}}),showAllSuggestions:L,failedToLoadSuggestionsMessage:0===b&&null!==(w=this.suggestions)&&void 0!==w&&w.hasWarnings?this.localizationService.get("QnaStart_ErrorLoadingSuggestions"):void 0}},O.prototype.onResultAvailable=function(h){var C,D,w;return(0,y.mG)(this,void 0,void 0,function(){var b,A,L,R,Z,H,x,X,ae,ve=this;return(0,y.Jh)(this,function(Fe){switch(Fe.label){case 0:return h&&1===h.resultType?[2]:h?(this.showQuestionProblematicResultTimeout&&(clearTimeout(this.showQuestionProblematicResultTimeout),this.showQuestionProblematicResultTimeout=void 0),_.includes(h.usedAgents,"PowerBI.AzureOpenAISynonyms")?[4,this.logInterpretCopilotTelemetry()]:[3,2]):(this.pinnableContentDefinitionUpdated.emit(void 0),this.viewModel.result=void 0,[2]);case 1:Fe.sent(),Fe.label=2;case 2:return null!=h.utterance&&this.utteranceUpdated.emit(h.utterance),this.updateViewport(),4===h.resultType&&this.setSuggestionsViewModel(),4!==h.resultType&&6!==h.resultType&&0!==h.resultType&&h.doNotShowResult&&(this.showQuestionProblematicResultTimeout=setTimeout(function(){var le=h.interpretError;if(le)ve.interpretationError&&ve.interpretationError.emit(),ve.viewModel.result=(0,y.pi)({type:"Error"},ve.getErrorDetailsFromError(le));else{var Ne=ve.localizationService.get("Qna_NoVisual_Message");ve.viewModel.result={type:"DoNotUnderstand",message:_.isEmpty(h.doNotShowResultCustomMessageKeys)?Ne:_.map(h.doNotShowResultCustomMessageKeys,function(Be){return ve.localizationService.get(Be)}).join("\n\n")},ve.screenReaderService.alert(Ne)}},1500)),4===h.resultType||6===h.resultType||h.doNotShowResult||2!==h.resultType||!h.visualContainer&&!h.exploration?(this.pinnableContentDefinitionUpdated.emit(void 0),this.cancelVisualUpdateAlert(),[2]):(this.utteranceRestated&&this.utteranceRestated.emit(h.restatement),oe.fF.assertValue(h.visualContainer||h.exploration,"result should contain either visualContainer or exploration"),h.visualContainer&&(h.visualContainer.name=_t),b=h.restatement,_.startsWith(b,"Show ")&&(b=_.replace(b,"Show ",h.visualContainer?"This visual is showing ":"Showing ")),A=h.modelId,h.visualContainer?(oe.fF.assert(function(){var le;return!(null===(le=h.visualContainer.config)||void 0===le||!le.singleVisual)},"single visual is not defined"),this.config.showVisualsAsExploration?(L="QnaSection",h.visualContainer.layouts=(0,Vt.Br)([{id:0,position:{x:0,y:0,height:this.viewport.height,width:this.viewport.width}}]),(R=null!==(C=(0,n.PQ)(h.visualContainer).vcObjects)&&void 0!==C?C:{}).title=[{properties:{show:(0,Y.O7)(!1)}}],h.visualContainer.config.singleVisual.vcObjects=R,Z={name:L,displayName:L,size:{displayOption:0,width:this.viewport.width,height:this.viewport.height},visualContainers:[h.visualContainer],visualContainerGroups:[h.visualContainer],filters:[]},x={themeCollection:(0,xe.D4)(this.featureSwitchService),dataSources:this.dataSources.get(),sections:[Z],settings:{useNewFilterPaneExperience:!0,allowChangeFilterTypes:!0}},this.explorationNavigation.loadExploration(x),this.explorationNavigation.goto(Z),this.viewModel.result={type:"VisualAsExploration",restatement:b,exploreCanvas:(0,Me.T8)(x,Z,0),modelId:A},K.UP.selectCanvasItem(h.visualContainer,this.selectionService),this.explorationActivity.sendExplorationContainerReady({parentActivity:void 0})):(this.viewModel.result=void 0,setTimeout(function(){return(0,y.mG)(ve,void 0,void 0,function(){var le,Ne=this;return(0,y.Jh)(this,function(Be){switch(Be.label){case 0:return this.viewModel.result={type:"Visual",restatement:b,visual:h.visualContainer,modelId:A,isLoading:!0},le=(0,n.oJ)(h.visualContainer),_.isEmpty(le)?[3,2]:[4,this.createSortHelper(h.visualContainer)];case 1:Be.sent(),Be.label=2;case 2:return this.changeDetectorRef.detectChanges(),this.eventBridge.publishToChannel(de.jCS,{affectContainer:function(Ze){return Ze.name===h.visualContainer.name}}),setTimeout(function(){return Ne.updateViewport()}),[2]}})})})),H=(0,U.d9)(h.visualContainer,this.explorationSerializer),null!=(null===(w=null===(D=H?.config)||void 0===D?void 0:D.singleVisual)||void 0===w?void 0:w.vcObjects)&&(H.config.singleVisual.vcObjects=void 0),this.pinnableContentDefinitionUpdated.emit({pinVisualArgs:{dataSources:this.dataSources.get(),filters:this.createVisualContainerFilters(h.visualContainer,h.visualContainer.filters),modelId:A,resourcePackages:void 0,themeCollection:this.viewModel.themeCollection,utterance:h.utterance,visualContainer:H}}),this.alertVisualUpdate(this.getCurrentUtteranceTrimmed(),(0,f.s)(h.visualContainer)),[3,6]):[3,3]);case 3:return h.exploration?(this.updateViewport(),h.exploration.themeCollection?[4,rt.P.loadThemeAndBaseTheme(this.promiseFactory,this.resourceLoader,this.themeService,h.exploration.resourcePackages,h.exploration.themeCollection)]:[3,5]):[3,6];case 4:Fe.sent(),Fe.label=5;case 5:X=(x=h.exploration).sections[x.activeSectionIndex],this.explorationNavigation.loadExploration(x),this.explorationNavigation.goto(X),this.viewModel.result={type:"Pod",restatement:b,exploreCanvas:(0,Me.T8)(x,X,0),modelId:A},ae=_.find(this.models,function(le){return le.id===A}),this.pinnableContentDefinitionUpdated.emit({pinReportPageArgs:{exploration:(0,Me.vi)(x,0,x.activeSectionIndex,void 0,this.localizationService),section:X,reportId:x.reportId,modelId:A,packageId:ae&&ae.packageId,action:{action:We.RCq},utterance:h.utterance,pod:_.find(h.exploration.pods,function(le){return le.boundSection===X.name}).name,filters:X.filters}}),this.cancelVisualUpdateAlert(),Fe.label=6;case 6:return[2]}})})},O.prototype.createSortHelper=function(h){return(0,y.mG)(this,void 0,void 0,function(){var C;return(0,y.Jh)(this,function(D){switch(D.label){case 0:return C=this,[4,(0,xe.Vq)(h,this.conceptualSchemaProxy,this.dataSources,this.sortService,this.undoRedoService,this.visualAuthoringOpService,this.visualPlugin)];case 1:return C.sortHelper=D.sent(),[2]}})})},O.prototype.createFontProperties=function(h,C,D,w,b,A,L,R){var Z=h&&h[C],H="".concat(D).concat(Ft),x="".concat(D).concat(bt),X="".concat(D).concat(It),ae=(0,pt.N)(Z,H),ve=(0,pt.N)(Z,x),Fe=(0,pt.N)(Z,X),le={color:"".concat(D).concat(ft),family:"".concat(D).concat(At),size:"".concat(D).concat(St)};return ae&&(le.bold="".concat(D).concat(Ft)),ve&&(le.italic="".concat(D).concat(bt)),Fe&&(le.underline="".concat(D).concat(It)),(0,Se.Zi)(h&&h[C],le,L,R,"foreground",w,{color:z.fontColor,family:A?z.semiboldFont:z.regularFont,size:b,weight:B.AI,style:B.AI,textDecoration:B.zu})},O.prototype.createVisualContainerFilters=function(h,C){var D=_.isEmpty(C)?[]:_.chain(C).filter(function(X){return X.filter}).map(function(X){return X.filter}).value();this.inheritedFilters&&this.inheritedFilters.dataFilter&&D.push.apply(D,_.map(this.inheritedFilters.dataFiltersUnmerged,function(X){return X.filter}));for(var w=new v.ME,b=0,A=D;b<A.length;b++)w.addVisualFilter({filter:A[b]});var R=(0,f.s)(h),Z=R&&this.visualPlugin.capabilities(R),H=Z&&Z.supportsHighlight;!H&&this.inheritedFilters&&this.inheritedFilters.highlightFilter&&w.addVisualFilter({filter:this.inheritedFilters.highlightFilter});var x=w.getFilters(!1);return{dataFilter:x.dataFilter,dataFiltersUnmerged:x.dataFiltersUnmerged,highlightFilter:H&&this.inheritedFilters?this.inheritedFilters.highlightFilter:void 0,highlightFiltersUnmerged:H&&this.inheritedFilters?this.inheritedFilters.highlightFiltersUnmerged:void 0}},O.prototype.handleQueryErrors=function(h){if(!h.ignorable){var C=h.getDetails(this.localizationService),D=(0,nt.fe)(h.code);this.viewModel.result={type:"QueryError",visualWithError:this.getCurrentVisual(),details:C,code:h.code,fixableError:0,hideSeeDetails:(0,nt.O6)(h.code),overlayType:D,requestId:h.requestId,source:C.source||h.source||"PowerBI"},this.cancelVisualUpdateAlert()}},O.prototype.alertVisualUpdate=function(h,C){if(h){var D=C?this.localizationService.format("Qna_ScreenReader_VisualUpdatedWithChartType",[h,C]):this.localizationService.format("Qna_ScreenReader_VisualUpdated",[h]);this.screenReaderService.alertWithDebounce("qna_visual_update",D)}},O.prototype.cancelVisualUpdateAlert=function(){this.screenReaderService.cancelDebounce("qna_visual_update")},O.prototype.logInterpretCopilotTelemetry=function(){var h;return(0,y.mG)(this,void 0,void 0,function(){var C,D,w;return(0,y.Jh)(this,function(A){switch(A.label){case 0:return C=null!==(h=this.qnaProxyPathToken)&&void 0!==h?h:"@powerbi/Qna/qnaweb.module#QnaWebModule",[4,this.ensureInterpretCopilotTelemetry(C)];case 1:return A.sent(),[4,this.accountService.isSignedInAsync()];case 2:return D=A.sent(),w=this.viewModeState.getMode(),this.interpretCopilotTelemetry.logInterpretWithCopilotEvent("@powerbi/Qna/qnaweb.module#QnaWebModule"===this.qnaProxyPathToken?"service":"desktop",D,w),[2]}})})},O.prototype.ensureInterpretCopilotTelemetry=function(h){return(0,y.mG)(this,void 0,void 0,function(){var C;return(0,y.Jh)(this,function(D){switch(D.label){case 0:return null!=this.interpretCopilotTelemetry?[2]:(C=this,[4,this.lazyProvider.get(h,"interpretCopilotTelemetryService")]);case 1:return C.interpretCopilotTelemetry=D.sent(),[2]}})})},O.prototype.convertRequestScopes=function(h){return _.map(h,function(C){return{model:C.model,reportIds:C.reportIds}})},O.prototype.buildInputBoxFormattingCard=function(h){var C=this,D=ce.Fp.inputBox,w=new T.CQ(new T.lg("inputBox"),"Visual_Qna_QuestionBox",D,function(H){return C.localizationService.get(H)}),b=h.inputBox.questionFontProperties.weight===B.en,A=h.inputBox.questionFontProperties.style===B.BF,L=h.inputBox.questionFontProperties.textDecoration===B.f0,Z=(new T.UN).withFontFamily({descriptor:D.questionFontFamily,value:h.inputBox.questionFontProperties.family}).withFontSizeProperties({descriptor:D.questionFontSize,value:h.inputBox.questionFontProperties.size.pt}).withBold({descriptor:D.questionBold,value:b}).withItalic({descriptor:D.questionItalic,value:A}).withUnderline({descriptor:D.questionUnderline,value:L}).build();return w.addGroup("text",function(H){H.withDisplayName("Text").addCompositeSlice("fontselector","Font",Z).addSimpleSlice("color",function(){return new T.BT({descriptor:D.questionFontColor,value:{value:h.inputBox.questionFontProperties.color}}).build()},function(x){return x.withCustomDisplayName("Generic_Color")})}),w.addGroup("background",function(H){H.withDisplayName("Visual_Background").addSimpleSlice("defaultColor",function(){return new T.BT({descriptor:D.background,value:{value:h.inputBox.backgroundColor}}).build()},function(x){return x.withCustomDisplayName("Visual_Qna_QuestionBackgroundColor")}).addSimpleSlice("hoverColor",function(){return new T.BT({descriptor:D.hoverColor,value:{value:h.inputBox.hoverColor}}).build()},function(x){return x.withCustomDisplayName("Visual_Qna_QuestionBackgroundHoverColor")})}),w.addGroup("underlines",function(H){H.withDisplayName("Underline").addSimpleSlice("acceptedColor",function(){return new T.BT({descriptor:D.acceptedColor,value:{value:h.inputBox.acceptedUnderlineColor}}).build()},function(x){return x.withCustomDisplayName("AcceptedColor")}).addSimpleSlice("errorColor",function(){return new T.BT({descriptor:D.errorColor,value:{value:h.inputBox.errorUnderlineColor}}).build()},function(x){return x.withCustomDisplayName("Error_Color")}).addSimpleSlice("warningColor",function(){return new T.BT({descriptor:D.warningColor,value:{value:h.inputBox.warningUnderlineColor}}).build()},function(x){return x.withCustomDisplayName("Warning_TitleColor")})}),w.addGroup("submitButton",function(H){H.withDisplayName("Visual_Qna_CommitButtonBackground").addSimpleSlice("submitButtonColor",function(){return new T.BT({descriptor:D.commitButtonBackgroundColor,value:{value:h.inputBox.commitButtonBackgroundColor}}).build()},function(x){return x.withCustomDisplayName("Background_Color")})}),w.build()},O.prototype.buildRestatementFormattingCard=function(h){var C=this,D=ce.Fp.inputBox,w=new T.CQ(new T.lg("restatement"),"Visual_Qna_Restatement",D,function(L){return C.localizationService.get(L)}),A=(new T.UN).withFontFamily({descriptor:D.restatementFontFamily,value:h.inputBox.restatementFontProperties.family}).withFontSizeProperties({descriptor:D.restatementFontSize,value:h.inputBox.restatementFontProperties.size.pt}).build();return w.addGroup("text",function(L){L.addCompositeSlice("fontselector","Font",A).addSimpleSlice("color",function(){return new T.BT({descriptor:D.restatementFontColor,value:{value:h.inputBox.restatementFontProperties.color}}).build()},function(R){return R.withCustomDisplayName("Generic_Color")})}),w.build()},O.prototype.buildSuggestionsFormattingCard=function(h){var C=this,D=ce.Fp.suggestions,w=new T.CQ(new T.lg("suggestions"),"Suggestions",D,function(X){return C.localizationService.get(X)});w.addTopLevelToggle("show",function(){return new T.bd({descriptor:D.show,value:h.suggestions.show}).build()});var b=h.suggestions.headerFontProperties.weight===B.en,A=h.suggestions.headerFontProperties.style===B.BF,L=h.suggestions.headerFontProperties.textDecoration===B.f0,Z=(new T.UN).withFontFamily({descriptor:D.headerFontFamily,value:h.suggestions.headerFontProperties.family}).withFontSizeProperties({descriptor:D.headerFontSize,value:h.suggestions.headerFontProperties.size.pt}).withBold({descriptor:D.headerBold,value:b}).withItalic({descriptor:D.headerItalic,value:A}).withUnderline({descriptor:D.headerUnderline,value:L}).build();w.addGroup("header",function(X){X.withDisplayName("Visual_Qna_SuggestionsCardHeader").addCompositeSlice("fontselector","Font",Z).addSimpleSlice("color",function(){return new T.BT({descriptor:D.headerFontColor,value:{value:h.suggestions.headerFontProperties.color}}).build()},function(ae){return ae.withCustomDisplayName("Generic_Color")})}),b=h.suggestions.cardFontProperties.weight===B.en,A=h.suggestions.cardFontProperties.style===B.BF,L=h.suggestions.cardFontProperties.textDecoration===B.f0;var x=(new T.UN).withFontFamily({descriptor:D.cardFontFamily,value:h.suggestions.cardFontProperties.family}).withFontSizeProperties({descriptor:D.cardFontSize,value:h.suggestions.cardFontProperties.size.pt}).withBold({descriptor:D.cardBold,value:b}).withItalic({descriptor:D.cardItalic,value:A}).withUnderline({descriptor:D.cardUnderline,value:L}).build();return w.addGroup("cards",function(X){X.withDisplayName("Cards").addCompositeSlice("fontselector","Font",x).addSimpleSlice("text",function(){return new T.BT({descriptor:D.cardFontColor,value:{value:h.suggestions.cardFontProperties.color}}).build()},function(ae){return ae.withCustomDisplayName("Text_Color")}).addSimpleSlice("background",function(){return new T.BT({descriptor:D.cardBackground,value:{value:h.suggestions.backgroundColor}}).build()},function(ae){return ae.withCustomDisplayName("Background_Color")})}),w.build()},O.\u0275fac=function(C){return new(C||O)(I.\u0275\u0275inject(Ut.D),I.\u0275\u0275inject(I.ChangeDetectorRef),I.\u0275\u0275inject(Ye.i),I.\u0275\u0275inject(Ve.D),I.\u0275\u0275inject(Un.x),I.\u0275\u0275inject(an.Z),I.\u0275\u0275inject(Wt.U),I.\u0275\u0275inject(Jt.z),I.\u0275\u0275inject(Kt.L),I.\u0275\u0275inject(Tn.J),I.\u0275\u0275inject(gt.vZ),I.\u0275\u0275inject(Rn.B),I.\u0275\u0275inject(Qn.E),I.\u0275\u0275inject(Ln.f),I.\u0275\u0275inject(kn.v),I.\u0275\u0275inject(Nn.i),I.\u0275\u0275inject(W._1),I.\u0275\u0275inject(Je.m),I.\u0275\u0275inject(un.o),I.\u0275\u0275inject(zn.T),I.\u0275\u0275inject(it.y0),I.\u0275\u0275inject($t.l6),I.\u0275\u0275inject(jn.g),I.\u0275\u0275inject(Lt.y),I.\u0275\u0275inject(ke.z),I.\u0275\u0275inject(Zt.K),I.\u0275\u0275inject(sn.z),I.\u0275\u0275inject(he.kc),I.\u0275\u0275inject(Vn.Q),I.\u0275\u0275inject(Xt.o),I.\u0275\u0275inject(qn.A),I.\u0275\u0275inject(ln.W),I.\u0275\u0275inject(Ae.A),I.\u0275\u0275inject(k.t),I.\u0275\u0275inject(Q.F),I.\u0275\u0275inject(J.n,8),I.\u0275\u0275inject(q.z,8),I.\u0275\u0275inject(j,8))},O.\u0275prov=I.\u0275\u0275defineInjectable({token:O,factory:O.\u0275fac}),O}();function Dn(O){return(0,ye.um)(O)>.6?z.darkFontColor:z.lightFontColor}},21548:function(Ue,re,d){d.d(re,{B:function(){return I}});var y=d(50423),I=function(){function ee(){this.states={}}return ee.prototype.updateState=function(Q,B){this.states[Q.toLocaleLowerCase()]=B},ee.prototype.getState=function(Q){var B;return null!==(B=this.states[Q.toLocaleLowerCase()])&&void 0!==B?B:"Unchosen"},ee.\u0275prov=y.\u0275\u0275defineInjectable({token:ee,factory:ee.\u0275fac=function(B){return new(B||ee)},providedIn:"root"}),ee}()},5894:function(Ue,re,d){d.d(re,{WW:function(){return ee},dN:function(){return B},v5:function(){return T},yP:function(){return U}});var y=d(41114),I="PBI.QnaVisual.SuggestionCardClicked",ee=y.cx[I]=(0,y.b1)(I),Q="PBI.QnaVisual.VisualConverted",B=y.cx[Q]=(0,y.b1)(Q),Y="PBI.QnA.INAQ",U=y.cx[Y]=(0,y.b1)(Y,{logExpAssignment:!0}),te="PBI.QnA.Feedback",T=y.cx[te]=(0,y.b1)(te),ye="PBI.QnA.UpdateLsdlSharingPermission",Se=(y.cx[ye]=(0,y.b1)(ye),"PBI.QnaTooling.ImproveLsdlRequest");y.cx[Se]=(0,y.b1)(Se)},31982:function(Ue,re,d){function y(Q){if(Q){var B=Q.correctedUtterance,Y=Q.correctedTextSegments,U=[];if(!_.isEmpty(Y)){var te=0;return _.forEach(Y,function(T){te<T.startIndex&&U.push({text:B.substring(te,T.startIndex),isCorrected:!1}),U.push({text:B.substring(T.startIndex,T.endExcludingIndex),isCorrected:!0}),te=T.endExcludingIndex}),te<B.length&&U.push({text:B.substring(te),isCorrected:!1}),U}}}function I(Q,B){if(B){for(var Y=B.correctedUtterance,U=[],te=0,T=0,ye=0,Me=0,Se=Q;Me<Se.length;Me++){var ue=Se[Me];if(!_.isEmpty(ue.text)&&(te=ye,null!=ue.correctedStartIndex&&null!=ue.correctedEndExcludingIndex?(T=ue.correctedStartIndex,ye=ue.correctedEndExcludingIndex):ye=(T=Y.indexOf(ue.text,te))+(ue.endExcludingIndex-ue.startIndex),ue.isUsed)){if(te!==T){var oe=Y.substring(te,T);(!_.isEmpty(_.trim(oe))||!_.isEmpty(U))&&U.push({text:Y.substring(te,T),isCorrected:!1})}U.push({text:Y.substring(T,ye),isCorrected:ue.isCorrected})}}return U}}function ee(Q){return"correctedTextSegments"in Q}d.d(re,{Gd:function(){return ee},Yi:function(){return I},zM:function(){return y}})},87974:function(Ue,re,d){d.d(re,{U:function(){return I}});var y=d(81337);function I(ee,Q,B){return(0,y.mG)(this,void 0,void 0,function(){var Y,U;return(0,y.Jh)(this,function(T){switch(T.label){case 0:if(B.featureSwitches.qnaSupportCommitQuestionOnDemandForAll)return[2,!0];Y=0,U=ee??[],T.label=1;case 1:return Y<U.length?[4,Q.isDQOrLiveConnectToOnPrem(U[Y])]:[3,4];case 2:if(T.sent())return[2,!0];T.label=3;case 3:return Y++,[3,1];case 4:return[2,!1]}})})}},91592:function(Ue,re,d){d.d(re,{G:function(){return ee},H:function(){return I}});var y=d(16808);function I(Q,B,Y){return(0,y.rO)()?{isAllowed:!1,disallowedReason:"featureDisabledInIE"}:Y.appShouldHideQnaFeature()?{isAllowed:!1,disallowedReason:"featureDisabledInApp"}:_.some(B?.schemas,function(T){return!T.isExtensionSchema&&!_.isEmpty(T.entities)})?Y.modelSupportsQna(B,Q)?Y.modelHasQnaEnabled(B,Q)?{isAllowed:!0}:{isAllowed:!1,disallowedReason:"qnaNotEnabled"}:{isAllowed:!1,disallowedReason:"qnaNotSupported"}:{isAllowed:!1,disallowedReason:"noModel"}}function ee(){return{getIsQnaAllowedInfo:I}}}}]);